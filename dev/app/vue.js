!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n=window.webpackJsonp;window.webpackJsonp=function(i,r){for(var s,a,c=0,l=[];c<i.length;c++)a=i[c],o[a]&&l.push.apply(l,o[a]),o[a]=0;for(s in r)e[s]=r[s];for(n&&n(i,r);l.length;)l.shift().call(null,t)};var i={},o={0:0,1:0,2:0};return t.e=function(e,n){if(0===o[e])return n.call(null,t);if(void 0!==o[e])o[e].push(n);else{o[e]=[n];var i=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0,r.src=t.p+""+e+".app.js",i.appendChild(r)}},t.m=e,t.c=i,t.p="/dev/app/",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var o=n(43),r=i(o),s=n(187),a=i(s),c=n(61),l=i(c),h=n(63),u=i(h),f=n(153),p=i(f);r["default"].config.debug=!0,r["default"].use(a["default"]),r["default"].use(u["default"]);var d=new a["default"],v=r["default"].extend({data:function(){return{ligerEndPoint:"https://api.cms.telus.com/legals",ligerApplicationKey:"b9738d67b89dfc782746d4a9cf4a1093"}}});d.map(l["default"]),d.afterEach(function(){setTimeout(function(){p["default"].highlightAll()},0)}),d.start(v,"#app-main")},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=u[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(c(i.parts[r],t))}else{for(var s=[],r=0;r<i.parts.length;r++)s.push(c(i.parts[r],t));u[i.id]={id:i.id,refs:1,parts:s}}}}function o(e){for(var t=[],n={},i=0;i<e.length;i++){var o=e[i],r=o[0],s=o[1],a=o[2],c=o[3],l={css:s,media:a,sourceMap:c};n[r]?n[r].parts.push(l):t.push(n[r]={id:r,parts:[l]})}return t}function r(e,t){var n=d(),i=_[_.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),_.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function s(e){e.parentNode.removeChild(e);var t=_.indexOf(e);t>=0&&_.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",r(e,t),t}function c(e,t){var n,i,o;if(t.singleton){var r=y++;n=v||(v=a(t)),i=l.bind(null,n,r,!1),o=l.bind(null,n,r,!0)}else n=a(t),i=h.bind(null,n),o=function(){s(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}function l(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,o);else{var r=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function h(e,t){var n=t.css,i=t.media,o=t.sourceMap;if(i&&e.setAttribute("media",i),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var u={},f=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},p=f(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),d=f(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,y=0,_=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=p()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=o(e);return i(n,t),function(e){for(var r=[],s=0;s<n.length;s++){var a=n[s],c=u[a.id];c.refs--,r.push(c)}if(e){var l=o(e);i(l,t)}for(var s=0;s<r.length;s++){var c=r[s];if(0===c.refs){for(var h=0;h<c.parts.length;h++)c.parts[h]();delete u[c.id]}}}};var b=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){(function(t){var i=n(100),o=i("object"==typeof t&&t),r=i("object"==typeof self&&self),s=i("object"==typeof this&&this),a=o||r||s||Function("return this")();e.exports=a}).call(t,function(){return this}())},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){function i(e,t){var n=r(e,t);return o(n)?n:void 0}var o=n(92),r=n(108);e.exports=i},function(e,t){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){var i,o;n(188),i=n(44),o=n(154),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(119),r=n(120),s=n(121),a=n(122),c=n(123);i.prototype.clear=o,i.prototype["delete"]=r,i.prototype.get=s,i.prototype.has=a,i.prototype.set=c,e.exports=i},function(e,t,n){function i(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1}var o=n(140);e.exports=i},function(e,t,n){function i(e,t){var n=e.__data__;return o(t)?n["string"==typeof t?"string":"hash"]:n.map}var o=n(116);e.exports=i},function(e,t,n){function i(e,t){if(o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!r(e))||(a.test(e)||!s.test(e)||null!=t&&e in Object(t))}var o=n(4),r=n(16),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=i},function(e,t,n){var i=n(5),o=i(Object,"create");e.exports=o},function(e,t,n){function i(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}var o=n(16),r=1/0;e.exports=i},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}var i=9007199254740991;e.exports=n},function(e,t,n){function i(e){return"symbol"==typeof e||o(e)&&a.call(e)==r}var o=n(8),r="[object Symbol]",s=Object.prototype,a=s.toString;e.exports=i},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(124),r=n(125),s=n(126),a=n(127),c=n(128);i.prototype.clear=o,i.prototype["delete"]=r,i.prototype.get=s,i.prototype.has=a,i.prototype.set=c,e.exports=i},function(e,t,n){function i(e){var t=o(e)?c.call(e):"";return t==r||t==s}var o=n(6),r="[object Function]",s="[object GeneratorFunction]",a=Object.prototype,c=a.toString;e.exports=i},function(e,t){function n(){u&&l&&(u=!1,l.length?h=l.concat(h):f=-1,h.length&&i())}function i(){if(!u){var e=s(n);u=!0;for(var t=h.length;t;){for(l=h,h=[];++f<t;)l&&l[f].run();f=-1,t=h.length}l=null,u=!1,a(e)}}function o(e,t){this.fun=e,this.array=t}function r(){}var s,a,c=e.exports={};!function(){try{s=setTimeout}catch(e){s=function(){throw new Error("setTimeout is not defined")}}try{a=clearTimeout}catch(e){a=function(){throw new Error("clearTimeout is not defined")}}}();var l,h=[],u=!1,f=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new o(e,t)),1!==h.length||u||s(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=r,c.addListener=r,c.once=r,c.off=r,c.removeListener=r,c.removeAllListeners=r,c.emit=r,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(36),r=i(o);t["default"]={update:function(e){var t=this;e===!0&&(0,r["default"])(function(){t.el.tabIndex=0,t.el.focus()})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(64),r=i(o),s=n(65),a=i(s);t["default"]=[r["default"],a["default"]]},function(e,t,n){var i=n(5),o=n(3),r=i(o,"Map");e.exports=r},function(e,t,n){function i(e){this.__data__=new o(e)}var o=n(9),r=n(133),s=n(134),a=n(135),c=n(136),l=n(137);i.prototype.clear=r,i.prototype["delete"]=s,i.prototype.get=a,i.prototype.has=c,i.prototype.set=l,e.exports=i},function(e,t,n){var i=n(3),o=i.Symbol;e.exports=o},function(e,t,n){function i(e,t){t=r(t,e)?[t]:o(t);for(var n=0,i=t.length;null!=e&&n<i;)e=e[s(t[n++])];return n&&n==i?e:void 0}var o=n(29),r=n(12),s=n(14);e.exports=i},function(e,t,n){function i(e,t){return null!=e&&(s.call(e,t)||"object"==typeof e&&t in e&&null===o(e))}var o=n(106),r=Object.prototype,s=r.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t,n,a,c){return e===t||(null==e||null==t||!r(e)&&!s(t)?e!==e&&t!==t:o(e,t,i,n,a,c))}var o=n(90),r=n(6),s=n(8);e.exports=i},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function i(e){return o(e)?e:r(e)}var o=n(4),r=n(138);e.exports=i},function(e,t,n){function i(e,t,n,i,c,l){var h=c&a,u=e.length,f=t.length;if(u!=f&&!(h&&f>u))return!1;var p=l.get(e);if(p)return p==t;var d=-1,v=!0,y=c&s?new o:void 0;for(l.set(e,t);++d<u;){var _=e[d],b=t[d];if(i)var m=h?i(b,_,d,t,e,l):i(_,b,d,e,t,l);if(void 0!==m){if(m)continue;v=!1;break}if(y){if(!r(t,function(e,t){if(!y.has(t)&&(_===e||n(_,e,i,c,l)))return y.add(t)})){v=!1;break}}else if(_!==b&&!n(_,b,i,c,l)){v=!1;break}}return l["delete"](e),v}var o=n(82),r=n(86),s=1,a=2;e.exports=i},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}e.exports=n},function(e,t){function n(e,t){return t=null==t?i:t,!!t&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){function i(e){return e===e&&!o(e)}var o=n(6);e.exports=i},function(e,t){function n(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}e.exports=n},function(e,t){function n(e){if(null!=e){try{return i.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var i=Function.prototype.toString;e.exports=n},function(e,t,n){var i=n(87),o=n(150),r=o(function(e,t){return i(e,1,t)});e.exports=r},function(e,t,n){function i(e){return o(e)&&a.call(e,"callee")&&(!l.call(e,"callee")||c.call(e)==r)}var o=n(145),r="[object Arguments]",s=Object.prototype,a=s.hasOwnProperty,c=s.toString,l=s.propertyIsEnumerable;e.exports=i},function(e,t,n){function i(e){return null!=e&&s(o(e))&&!r(e)}var o=n(104),r=n(18),s=n(15);e.exports=i},function(e,t,n){function i(e){return"string"==typeof e||!o(e)&&r(e)&&c.call(e)==s}var o=n(4),r=n(8),s="[object String]",a=Object.prototype,c=a.toString;e.exports=i},function(e,t,n){function i(e){var t=l(e);if(!t&&!a(e))return r(e);var n=s(e),i=!!n,h=n||[],u=h.length;for(var f in e)!o(e,f)||i&&("length"==f||c(f,u))||t&&"constructor"==f||h.push(f);return h}var o=n(26),r=n(94),s=n(115),a=n(38),c=n(32),l=n(118);e.exports=i},function(e,t,n){function i(e){var t=o(e),n=t%1;return t===t?n?t-n:t:0}var o=n(151);e.exports=i},function(e,t,n){function i(e){if("number"==typeof e)return e;if(s(e))return a;if(r(e)){var t=o(e.valueOf)?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var n=h.test(e);return n||u.test(e)?f(e.slice(2),n?2:8):l.test(e)?a:+e}var o=n(18),r=n(6),s=n(16),a=NaN,c=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,u=/^0o[0-7]+$/i,f=parseInt;e.exports=i},function(e,t,n){(function(t,n){/*!
	 * Vue.js v1.0.26
	 * (c) 2016 Evan You
	 * Released under the MIT License.
	 */
"use strict";function i(e,t,n){if(r(e,t))return void(e[t]=n);if(e._isVue)return void i(e._data,t,n);var o=e.__ob__;if(!o)return void(e[t]=n);if(o.convert(t,n),o.dep.notify(),o.vms)for(var s=o.vms.length;s--;){var a=o.vms[s];a._proxy(t),a._digest()}return n}function o(e,t){if(r(e,t)){delete e[t];var n=e.__ob__;if(!n)return void(e._isVue&&(delete e._data[t],e._digest()));if(n.dep.notify(),n.vms)for(var i=n.vms.length;i--;){var o=n.vms[i];o._unproxy(t),o._digest()}}}function r(e,t){return Sn.call(e,t)}function s(e){return Vn.test(e)}function a(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function c(e){return null==e?"":e.toString()}function l(e){if("string"!=typeof e)return e;var t=Number(e);return isNaN(t)?e:t}function h(e){return"true"===e||"false"!==e&&e}function u(e){var t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t!==n||34!==t&&39!==t?e:e.slice(1,-1)}function f(e){return e.replace(Pn,p)}function p(e,t){return t?t.toUpperCase():""}function d(e){return e.replace(Rn,"$1-$2").toLowerCase()}function v(e){return e.replace(Fn,p)}function y(e,t){return function(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}}function _(e,t){t=t||0;for(var n=e.length-t,i=new Array(n);n--;)i[n]=e[n+t];return i}function b(e,t){for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}function m(e){return null!==e&&"object"==typeof e}function g(e){return Mn.call(e)===Ln}function E(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}function w(e,t){var n,i,o,r,s,a=function c(){var a=Date.now()-r;a<t&&a>=0?n=setTimeout(c,t-a):(n=null,s=e.apply(o,i),n||(o=i=null))};return function(){return o=this,i=arguments,r=Date.now(),n||(n=setTimeout(a,t)),s}}function x(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function k(e){var t=function n(){if(!n.cancelled)return e.apply(this,arguments)};return t.cancel=function(){t.cancelled=!0},t}function C(e,t){return e==t||!(!m(e)||!m(t))&&JSON.stringify(e)===JSON.stringify(t)}function $(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap=Object.create(null)}function N(){var e,t=ai.slice(pi,ui).trim();if(t){e={};var n=t.match(gi);e.name=n[0],n.length>1&&(e.args=n.slice(1).map(O))}e&&(ci.filters=ci.filters||[]).push(e),pi=ui+1}function O(e){if(Ei.test(e))return{value:l(e),dynamic:!1};var t=u(e),n=t===e;return{value:n?e:t,dynamic:n}}function A(e){var t=mi.get(e);if(t)return t;for(ai=e,di=vi=!1,yi=_i=bi=0,pi=0,ci={},ui=0,fi=ai.length;ui<fi;ui++)if(hi=li,li=ai.charCodeAt(ui),di)39===li&&92!==hi&&(di=!di);else if(vi)34===li&&92!==hi&&(vi=!vi);else if(124===li&&124!==ai.charCodeAt(ui+1)&&124!==ai.charCodeAt(ui-1))null==ci.expression?(pi=ui+1,ci.expression=ai.slice(0,ui).trim()):N();else switch(li){case 34:vi=!0;break;case 39:di=!0;break;case 40:bi++;break;case 41:bi--;break;case 91:_i++;break;case 93:_i--;break;case 123:yi++;break;case 125:yi--}return null==ci.expression?ci.expression=ai.slice(0,ui).trim():0!==pi&&N(),mi.put(e,ci),ci}function T(e){return e.replace(xi,"\\$&")}function j(){var e=T(ji.delimiters[0]),t=T(ji.delimiters[1]),n=T(ji.unsafeDelimiters[0]),i=T(ji.unsafeDelimiters[1]);Ci=new RegExp(n+"((?:.|\\n)+?)"+i+"|"+e+"((?:.|\\n)+?)"+t,"g"),$i=new RegExp("^"+n+"((?:.|\\n)+?)"+i+"$"),ki=new $(1e3)}function D(e){ki||j();var t=ki.get(e);if(t)return t;if(!Ci.test(e))return null;for(var n,i,o,r,s,a,c=[],l=Ci.lastIndex=0;n=Ci.exec(e);)i=n.index,i>l&&c.push({value:e.slice(l,i)}),o=$i.test(n[0]),r=o?n[1]:n[2],s=r.charCodeAt(0),a=42===s,r=a?r.slice(1):r,c.push({tag:!0,value:r.trim(),html:o,oneTime:a}),l=i+n[0].length;return l<e.length&&c.push({value:e.slice(l)}),ki.put(e,c),c}function S(e,t){return e.length>1?e.map(function(e){return V(e,t)}).join("+"):V(e[0],t,!0)}function V(e,t,n){return e.tag?e.oneTime&&t?'"'+t.$eval(e.value)+'"':P(e.value,n):'"'+e.value+'"'}function P(e,t){if(Ni.test(e)){var n=A(e);return n.filters?"this._applyFilters("+n.expression+",null,"+JSON.stringify(n.filters)+",false)":"("+e+")"}return t?e:"("+e+")"}function R(e,t,n,i){L(e,1,function(){t.appendChild(e)},n,i)}function F(e,t,n,i){L(e,1,function(){W(e,t)},n,i)}function M(e,t,n){L(e,-1,function(){J(e)},t,n)}function L(e,t,n,i,o){var r=e.__v_trans;if(!r||!r.hooks&&!Xn||!i._isCompiled||i.$parent&&!i.$parent._isCompiled)return n(),void(o&&o());var s=t>0?"enter":"leave";r[s](n,o)}function I(e){if("string"==typeof e){var t=e;e=document.querySelector(e),e||"production"!==n.env.NODE_ENV&&Di("Cannot find element: "+t)}return e}function H(e){if(!e)return!1;var t=e.ownerDocument.documentElement,n=e.parentNode;return t===e||t===n||!(!n||1!==n.nodeType||!t.contains(n))}function z(e,t){var n=e.getAttribute(t);return null!==n&&e.removeAttribute(t),n}function B(e,t){var n=z(e,":"+t);return null===n&&(n=z(e,"v-bind:"+t)),n}function U(e,t){return e.hasAttribute(t)||e.hasAttribute(":"+t)||e.hasAttribute("v-bind:"+t)}function W(e,t){t.parentNode.insertBefore(e,t)}function q(e,t){t.nextSibling?W(e,t.nextSibling):t.parentNode.appendChild(e)}function J(e){e.parentNode.removeChild(e)}function Q(e,t){t.firstChild?W(e,t.firstChild):t.appendChild(e)}function Y(e,t){var n=e.parentNode;n&&n.replaceChild(t,e)}function G(e,t,n,i){e.addEventListener(t,n,i)}function K(e,t,n){e.removeEventListener(t,n)}function Z(e){var t=e.className;return"object"==typeof t&&(t=t.baseVal||""),t}function X(e,t){qn&&!/svg$/.test(e.namespaceURI)?e.className=t:e.setAttribute("class",t)}function ee(e,t){if(e.classList)e.classList.add(t);else{var n=" "+Z(e)+" ";n.indexOf(" "+t+" ")<0&&X(e,(n+t).trim())}}function te(e,t){if(e.classList)e.classList.remove(t);else{for(var n=" "+Z(e)+" ",i=" "+t+" ";n.indexOf(i)>=0;)n=n.replace(i," ");X(e,n.trim())}e.className||e.removeAttribute("class")}function ne(e,t){var n,i;if(re(e)&&he(e.content)&&(e=e.content),e.hasChildNodes())for(ie(e),i=t?document.createDocumentFragment():document.createElement("div");n=e.firstChild;)i.appendChild(n);return i}function ie(e){for(var t;t=e.firstChild,oe(t);)e.removeChild(t);for(;t=e.lastChild,oe(t);)e.removeChild(t)}function oe(e){return e&&(3===e.nodeType&&!e.data.trim()||8===e.nodeType)}function re(e){return e.tagName&&"template"===e.tagName.toLowerCase()}function se(e,t){var n=ji.debug?document.createComment(e):document.createTextNode(t?" ":"");return n.__v_anchor=!0,n}function ae(e){if(e.hasAttributes())for(var t=e.attributes,n=0,i=t.length;n<i;n++){var o=t[n].name;if(Pi.test(o))return f(o.replace(Pi,""))}}function ce(e,t,n){for(var i;e!==t;)i=e.nextSibling,n(e),e=i;n(t)}function le(e,t,n,i,o){function r(){if(a++,s&&a>=c.length){for(var e=0;e<c.length;e++)i.appendChild(c[e]);o&&o()}}var s=!1,a=0,c=[];ce(e,t,function(e){e===t&&(s=!0),c.push(e),M(e,n,r)})}function he(e){return e&&11===e.nodeType}function ue(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function fe(e,t){var i=e.tagName.toLowerCase(),o=e.hasAttributes();if(Ri.test(i)||Fi.test(i)){if(o)return pe(e,t)}else{if(ge(t,"components",i))return{id:i};var r=o&&pe(e,t);if(r)return r;if("production"!==n.env.NODE_ENV){var s=t._componentNameMap&&t._componentNameMap[i];s?Di("Unknown custom element: <"+i+"> - did you mean <"+s+">? HTML is case-insensitive, remember to use kebab-case in templates."):Mi(e,i)&&Di("Unknown custom element: <"+i+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.')}}}function pe(e,t){var n=e.getAttribute("is");if(null!=n){if(ge(t,"components",n))return e.removeAttribute("is"),{id:n}}else if(n=B(e,"is"),null!=n)return{id:n,dynamic:!0}}function de(e,t){var n,o,s;for(n in t)o=e[n],s=t[n],r(e,n)?m(o)&&m(s)&&de(o,s):i(e,n,s);return e}function ve(e,t){var n=Object.create(e||null);return t?b(n,be(t)):n}function ye(e){if(e.components){var t,i=e.components=be(e.components),o=Object.keys(i);if("production"!==n.env.NODE_ENV)var r=e._componentNameMap={};for(var s=0,a=o.length;s<a;s++){var c=o[s];Ri.test(c)||Fi.test(c)?"production"!==n.env.NODE_ENV&&Di("Do not use built-in or reserved HTML elements as component id: "+c):("production"!==n.env.NODE_ENV&&(r[c.replace(/-/g,"").toLowerCase()]=d(c)),t=i[c],g(t)&&(i[c]=Nn.extend(t)))}}}function _e(e){var t,n,i=e.props;if(In(i))for(e.props={},t=i.length;t--;)n=i[t],"string"==typeof n?e.props[n]=null:n.name&&(e.props[n.name]=n);else if(g(i)){var o=Object.keys(i);for(t=o.length;t--;)n=i[o[t]],"function"==typeof n&&(i[o[t]]={type:n})}}function be(e){if(In(e)){for(var t,i={},o=e.length;o--;){t=e[o];var r="function"==typeof t?t.options&&t.options.name||t.id:t.name||t.id;r?i[r]=t:"production"!==n.env.NODE_ENV&&Di('Array-syntax assets must provide a "name" or "id" field.')}return i}return e}function me(e,t,i){function o(n){var o=Li[n]||Ii;a[n]=o(e[n],t[n],i,n)}ye(t),_e(t),"production"!==n.env.NODE_ENV&&t.propsData&&!i&&Di("propsData can only be used as an instantiation option.");var s,a={};if(t["extends"]&&(e="function"==typeof t["extends"]?me(e,t["extends"].options,i):me(e,t["extends"],i)),t.mixins)for(var c=0,l=t.mixins.length;c<l;c++){var h=t.mixins[c],u=h.prototype instanceof Nn?h.options:h;e=me(e,u,i)}for(s in e)o(s);for(s in t)r(e,s)||o(s);return a}function ge(e,t,i,o){if("string"==typeof i){var r,s=e[t],a=s[i]||s[r=f(i)]||s[r.charAt(0).toUpperCase()+r.slice(1)];return"production"!==n.env.NODE_ENV&&o&&!a&&Di("Failed to resolve "+t.slice(0,-1)+": "+i,e),a}}function Ee(){this.id=Hi++,this.subs=[]}function we(e){Wi=!1,e(),Wi=!0}function xe(e){if(this.value=e,this.dep=new Ee,E(e,"__ob__",this),In(e)){var t=Hn?ke:Ce;t(e,Bi,Ui),this.observeArray(e)}else this.walk(e)}function ke(e,t){e.__proto__=t}function Ce(e,t,n){for(var i=0,o=n.length;i<o;i++){var r=n[i];E(e,r,t[r])}}function $e(e,t){if(e&&"object"==typeof e){var n;return r(e,"__ob__")&&e.__ob__ instanceof xe?n=e.__ob__:Wi&&(In(e)||g(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new xe(e)),n&&t&&n.addVm(t),n}}function Ne(e,t,n){var i=new Ee,o=Object.getOwnPropertyDescriptor(e,t);if(!o||o.configurable!==!1){var r=o&&o.get,s=o&&o.set,a=$e(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=r?r.call(e):n;if(Ee.target&&(i.depend(),a&&a.dep.depend(),In(t)))for(var o,s=0,c=t.length;s<c;s++)o=t[s],o&&o.__ob__&&o.__ob__.dep.depend();return t},set:function(t){var o=r?r.call(e):n;t!==o&&(s?s.call(e,t):n=t,a=$e(t),i.notify())}})}}function Oe(e){e.prototype._init=function(e){e=e||{},this.$el=null,this.$parent=e.parent,this.$root=this.$parent?this.$parent.$root:this,this.$children=[],this.$refs={},this.$els={},this._watchers=[],this._directives=[],this._uid=Ji++,this._isVue=!0,this._events={},this._eventsCount={},this._isFragment=!1,this._fragment=this._fragmentStart=this._fragmentEnd=null,this._isCompiled=this._isDestroyed=this._isReady=this._isAttached=this._isBeingDestroyed=this._vForRemoving=!1,this._unlinkFn=null,this._context=e._context||this.$parent,this._scope=e._scope,this._frag=e._frag,this._frag&&this._frag.children.push(this),this.$parent&&this.$parent.$children.push(this),e=this.$options=me(this.constructor.options,e,this),this._updateRef(),this._data={},this._callHook("init"),this._initState(),this._initEvents(),this._callHook("created"),e.el&&this.$mount(e.el)}}function Ae(e){if(void 0===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:case 48:return e;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return t>=97&&t<=122||t>=65&&t<=90?"ident":t>=49&&t<=57?"number":"else"}function Te(e){var t=e.trim();return("0"!==e.charAt(0)||!isNaN(e))&&(s(t)?u(t):"*"+t)}function je(e){function t(){var t=e[h+1];if(u===oo&&"'"===t||u===ro&&'"'===t)return h++,i="\\"+t,p[Yi](),!0}var n,i,o,r,s,a,c,l=[],h=-1,u=Xi,f=0,p=[];for(p[Gi]=function(){void 0!==o&&(l.push(o),o=void 0)},p[Yi]=function(){void 0===o?o=i:o+=i},p[Ki]=function(){p[Yi](),f++},p[Zi]=function(){if(f>0)f--,u=io,p[Yi]();else{if(f=0,o=Te(o),o===!1)return!1;p[Gi]()}};null!=u;)if(h++,n=e[h],"\\"!==n||!t()){if(r=Ae(n),c=co[u],s=c[r]||c["else"]||ao,s===ao)return;if(u=s[0],a=p[s[1]],a&&(i=s[2],i=void 0===i?n:i,a()===!1))return;if(u===so)return l.raw=e,l}}function De(e){var t=Qi.get(e);return t||(t=je(e),t&&Qi.put(e,t)),t}function Se(e,t){return ze(t).get(e)}function Ve(e,t,o){var r=e;if("string"==typeof t&&(t=je(t)),!t||!m(e))return!1;for(var s,a,c=0,l=t.length;c<l;c++)s=e,a=t[c],"*"===a.charAt(0)&&(a=ze(a.slice(1)).get.call(r,r)),c<l-1?(e=e[a],m(e)||(e={},"production"!==n.env.NODE_ENV&&s._isVue&&lo(t,s),i(s,a,e))):In(e)?e.$set(a,o):a in e?e[a]=o:("production"!==n.env.NODE_ENV&&e._isVue&&lo(t,e),i(e,a,o));return!0}function Pe(){}function Re(e,t){var n=ko.length;return ko[n]=t?e.replace(bo,"\\n"):e,'"'+n+'"'}function Fe(e){var t=e.charAt(0),n=e.slice(1);return po.test(n)?e:(n=n.indexOf('"')>-1?n.replace(go,Me):n,t+"scope."+n)}function Me(e,t){return ko[t]}function Le(e){yo.test(e)&&"production"!==n.env.NODE_ENV&&Di("Avoid using reserved keywords in expression: "+e),ko.length=0;var t=e.replace(mo,Re).replace(_o,"");return t=(" "+t).replace(wo,Fe).replace(go,Me),Ie(t)}function Ie(e){try{return new Function("scope","return "+e+";")}catch(t){return"production"!==n.env.NODE_ENV&&Di(t.toString().match(/unsafe-eval|CSP/)?"It seems you are using the default build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. Use the CSP-compliant build instead: http://vuejs.org/guide/installation.html#CSP-compliant-build":"Invalid expression. Generated function body: "+e),Pe}}function He(e){var t=De(e);return t?function(e,n){Ve(e,t,n)}:void("production"!==n.env.NODE_ENV&&Di("Invalid setter expression: "+e))}function ze(e,t){e=e.trim();var n=uo.get(e);if(n)return t&&!n.set&&(n.set=He(n.exp)),n;var i={exp:e};return i.get=Be(e)&&e.indexOf("[")<0?Ie("scope."+e):Le(e),t&&(i.set=He(e)),uo.put(e,i),i}function Be(e){return Eo.test(e)&&!xo.test(e)&&"Math."!==e.slice(0,5)}function Ue(){$o.length=0,No.length=0,Oo={},Ao={},To=!1}function We(){for(var e=!0;e;)e=!1,qe($o),qe(No),$o.length?e=!0:(Bn&&ji.devtools&&Bn.emit("flush"),Ue())}function qe(e){for(var t=0;t<e.length;t++){var i=e[t],o=i.id;if(Oo[o]=null,i.run(),"production"!==n.env.NODE_ENV&&null!=Oo[o]&&(Ao[o]=(Ao[o]||0)+1,Ao[o]>ji._maxUpdateCount)){Di('You may have an infinite update loop for watcher with expression "'+i.expression+'"',i.vm);break}}e.length=0}function Je(e){var t=e.id;if(null==Oo[t]){var n=e.user?No:$o;Oo[t]=n.length,n.push(e),To||(To=!0,oi(We))}}function Qe(e,t,n,i){i&&b(this,i);var o="function"==typeof t;if(this.vm=e,e._watchers.push(this),this.expression=t,this.cb=n,this.id=++jo,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ri,this.newDepIds=new ri,this.prevError=null,o)this.getter=t,this.setter=void 0;else{var r=ze(t,this.twoWay);this.getter=r.get,this.setter=r.set}this.value=this.lazy?void 0:this.get(),this.queued=this.shallow=!1}function Ye(e,t){var n=void 0,i=void 0;t||(t=Do,t.clear());var o=In(e),r=m(e);if((o||r)&&Object.isExtensible(e)){if(e.__ob__){var s=e.__ob__.dep.id;if(t.has(s))return;t.add(s)}if(o)for(n=e.length;n--;)Ye(e[n],t);else if(r)for(i=Object.keys(e),n=i.length;n--;)Ye(e[i[n]],t)}}function Ge(e){return re(e)&&he(e.content)}function Ke(e,t){var n=t?e:e.trim(),i=Vo.get(n);if(i)return i;var o=document.createDocumentFragment(),r=e.match(Fo),s=Mo.test(e),a=Lo.test(e);if(r||s||a){var c=r&&r[1],l=Ro[c]||Ro.efault,h=l[0],u=l[1],f=l[2],p=document.createElement("div");for(p.innerHTML=u+e+f;h--;)p=p.lastChild;for(var d;d=p.firstChild;)o.appendChild(d)}else o.appendChild(document.createTextNode(e));return t||ie(o),Vo.put(n,o),o}function Ze(e){if(Ge(e))return Ke(e.innerHTML);if("SCRIPT"===e.tagName)return Ke(e.textContent);for(var t,n=Xe(e),i=document.createDocumentFragment();t=n.firstChild;)i.appendChild(t);return ie(i),i}function Xe(e){if(!e.querySelectorAll)return e.cloneNode();var t,n,i,o=e.cloneNode(!0);if(Io){var r=o;if(Ge(e)&&(e=e.content,r=o.content),n=e.querySelectorAll("template"),n.length)for(i=r.querySelectorAll("template"),t=i.length;t--;)i[t].parentNode.replaceChild(Xe(n[t]),i[t])}if(Ho)if("TEXTAREA"===e.tagName)o.value=e.value;else if(n=e.querySelectorAll("textarea"),n.length)for(i=o.querySelectorAll("textarea"),t=i.length;t--;)i[t].value=n[t].value;return o}function et(e,t,n){var i,o;return he(e)?(ie(e),t?Xe(e):e):("string"==typeof e?n||"#"!==e.charAt(0)?o=Ke(e,n):(o=Po.get(e),o||(i=document.getElementById(e.slice(1)),i&&(o=Ze(i),Po.put(e,o)))):e.nodeType&&(o=Ze(e)),o&&t?Xe(o):o)}function tt(e,t,n,i,o,r){this.children=[],this.childFrags=[],this.vm=t,this.scope=o,this.inserted=!1,this.parentFrag=r,r&&r.childFrags.push(this),this.unlink=e(t,n,i,o,this);var s=this.single=1===n.childNodes.length&&!n.childNodes[0].__v_anchor;s?(this.node=n.childNodes[0],this.before=nt,this.remove=it):(this.node=se("fragment-start"),this.end=se("fragment-end"),this.frag=n,Q(this.node,n),n.appendChild(this.end),this.before=ot,this.remove=rt),this.node.__v_frag=this}function nt(e,t){this.inserted=!0;var n=t!==!1?F:W;n(this.node,e,this.vm),H(this.node)&&this.callHook(st)}function it(){this.inserted=!1;var e=H(this.node),t=this;this.beforeRemove(),M(this.node,this.vm,function(){e&&t.callHook(at),t.destroy()})}function ot(e,t){this.inserted=!0;var n=this.vm,i=t!==!1?F:W;ce(this.node,this.end,function(t){i(t,e,n)}),H(this.node)&&this.callHook(st)}function rt(){this.inserted=!1;var e=this,t=H(this.node);this.beforeRemove(),le(this.node,this.end,this.vm,this.frag,function(){t&&e.callHook(at),e.destroy()})}function st(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function at(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}function ct(e,t){this.vm=e;var n,i="string"==typeof t;i||re(t)&&!t.hasAttribute("v-if")?n=et(t,!0):(n=document.createDocumentFragment(),n.appendChild(t)),this.template=n;var o,r=e.constructor.cid;if(r>0){var s=r+(i?t:ue(t));o=Uo.get(s),o||(o=Lt(n,e.$options,!0),Uo.put(s,o))}else o=Lt(n,e.$options,!0);this.linker=o}function lt(e,t,n){var i=e.node.previousSibling;if(i){for(e=i.__v_frag;!(e&&e.forId===n&&e.inserted||i===t);){if(i=i.previousSibling,!i)return;e=i.__v_frag}return e}}function ht(e){var t=e.node;if(e.end)for(;!t.__vue__&&t!==e.end&&t.nextSibling;)t=t.nextSibling;return t.__vue__}function ut(e){for(var t=-1,n=new Array(Math.floor(e));++t<e;)n[t]=t;return n}function ft(e,t,n,i){return i?"$index"===i?e:i.charAt(0).match(/\w/)?Se(n,i):n[i]:t||n}function pt(e,t,n){for(var i,o,r,s=t?[]:null,a=0,c=e.options.length;a<c;a++)if(i=e.options[a],r=n?i.hasAttribute("selected"):i.selected){if(o=i.hasOwnProperty("_value")?i._value:i.value,!t)return o;s.push(o)}return s}function dt(e,t){for(var n=e.length;n--;)if(C(e[n],t))return n;return-1}function vt(e,t){var n=t.map(function(e){var t=e.charCodeAt(0);return t>47&&t<58?parseInt(e,10):1===e.length&&(t=e.toUpperCase().charCodeAt(0),t>64&&t<91)?t:ur[e]});return n=[].concat.apply([],n),function(t){if(n.indexOf(t.keyCode)>-1)return e.call(this,t)}}function yt(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function _t(e){return function(t){return t.preventDefault(),e.call(this,t)}}function bt(e){return function(t){if(t.target===t.currentTarget)return e.call(this,t)}}function mt(e){if(yr[e])return yr[e];var t=gt(e);return yr[e]=yr[t]=t,t}function gt(e){e=d(e);var t=f(e),n=t.charAt(0).toUpperCase()+t.slice(1);_r||(_r=document.createElement("div"));var i,o=pr.length;if("filter"!==t&&t in _r.style)return{kebab:e,camel:t};for(;o--;)if(i=dr[o]+n,i in _r.style)return{kebab:pr[o]+e,camel:i}}function Et(e){var t=[];if(In(e))for(var n=0,i=e.length;n<i;n++){var o=e[n];if(o)if("string"==typeof o)t.push(o);else for(var r in o)o[r]&&t.push(r)}else if(m(e))for(var s in e)e[s]&&t.push(s);return t}function wt(e,t,n){if(t=t.trim(),t.indexOf(" ")===-1)return void n(e,t);for(var i=t.split(/\s+/),o=0,r=i.length;o<r;o++)n(e,i[o])}function xt(e,t,n){function i(){++r>=o?n():e[r].call(t,i)}var o=e.length,r=0;e[0].call(t,i)}function kt(e,t,i){for(var o,r,a,c,l,h,u,p=[],v=Object.keys(t),y=v.length;y--;)if(r=v[y],o=t[r]||Sr,"production"===n.env.NODE_ENV||"$data"!==r)if(l=f(r),Vr.test(l)){if(u={name:r,path:l,options:o,mode:Dr.ONE_WAY,raw:null},a=d(r),null===(c=B(e,a))&&(null!==(c=B(e,a+".sync"))?u.mode=Dr.TWO_WAY:null!==(c=B(e,a+".once"))&&(u.mode=Dr.ONE_TIME)),null!==c)u.raw=c,h=A(c),c=h.expression,u.filters=h.filters,s(c)&&!h.filters?u.optimizedLiteral=!0:(u.dynamic=!0,"production"===n.env.NODE_ENV||u.mode!==Dr.TWO_WAY||Pr.test(c)||(u.mode=Dr.ONE_WAY,Di("Cannot bind two-way prop with non-settable parent path: "+c,i))),u.parentPath=c,"production"!==n.env.NODE_ENV&&o.twoWay&&u.mode!==Dr.TWO_WAY&&Di('Prop "'+r+'" expects a two-way binding type.',i);else if(null!==(c=z(e,a)))u.raw=c;else if("production"!==n.env.NODE_ENV){var _=l.toLowerCase();c=/[A-Z\-]/.test(r)&&(e.getAttribute(_)||e.getAttribute(":"+_)||e.getAttribute("v-bind:"+_)||e.getAttribute(":"+_+".once")||e.getAttribute("v-bind:"+_+".once")||e.getAttribute(":"+_+".sync")||e.getAttribute("v-bind:"+_+".sync")),c?Di("Possible usage error for prop `"+_+"` - did you mean `"+a+"`? HTML is case-insensitive, remember to use kebab-case for props in templates.",i):o.required&&Di("Missing required prop: "+r,i)}p.push(u)}else"production"!==n.env.NODE_ENV&&Di('Invalid prop key: "'+r+'". Prop keys must be valid identifiers.',i);else Di("Do not use $data as prop.",i);return Ct(p)}function Ct(e){return function(t,n){t._props={};for(var i,o,s,a,c,f=t.$options.propsData,p=e.length;p--;)if(i=e[p],c=i.raw,o=i.path,s=i.options,t._props[o]=i,f&&r(f,o)&&Nt(t,i,f[o]),null===c)Nt(t,i,void 0);else if(i.dynamic)i.mode===Dr.ONE_TIME?(a=(n||t._context||t).$get(i.parentPath),Nt(t,i,a)):t._context?t._bindDir({name:"prop",def:Fr,prop:i},null,null,n):Nt(t,i,t.$get(i.parentPath));else if(i.optimizedLiteral){var v=u(c);a=v===c?h(l(c)):v,Nt(t,i,a)}else a=s.type===Boolean&&(""===c||c===d(i.name))||c,Nt(t,i,a)}}function $t(e,t,n,i){var o=t.dynamic&&Be(t.parentPath),r=n;void 0===r&&(r=At(e,t)),r=jt(t,r,e);var s=r!==n;Tt(t,r,e)||(r=void 0),o&&!s?we(function(){i(r)}):i(r)}function Nt(e,t,n){$t(e,t,n,function(n){Ne(e,t.path,n)})}function Ot(e,t,n){$t(e,t,n,function(n){e[t.path]=n})}function At(e,t){var i=t.options;if(!r(i,"default"))return i.type!==Boolean&&void 0;var o=i["default"];return m(o)&&"production"!==n.env.NODE_ENV&&Di('Invalid default value for prop "'+t.name+'": Props with type Object/Array must use a factory function to return the default value.',e),"function"==typeof o&&i.type!==Function?o.call(e):o}function Tt(e,t,i){if(!e.options.required&&(null===e.raw||null==t))return!0;var o=e.options,r=o.type,s=!r,a=[];if(r){In(r)||(r=[r]);for(var c=0;c<r.length&&!s;c++){var l=Dt(t,r[c]);a.push(l.expectedType),s=l.valid}}if(!s)return"production"!==n.env.NODE_ENV&&Di('Invalid prop: type check failed for prop "'+e.name+'". Expected '+a.map(St).join(", ")+", got "+Vt(t)+".",i),!1;var h=o.validator;return!(h&&!h(t))||("production"!==n.env.NODE_ENV&&Di('Invalid prop: custom validator check failed for prop "'+e.name+'".',i),!1)}function jt(e,t,i){var o=e.options.coerce;return o?"function"==typeof o?o(t):("production"!==n.env.NODE_ENV&&Di('Invalid coerce for prop "'+e.name+'": expected function, got '+typeof o+".",i),t):t}function Dt(e,t){var n,i;return t===String?(i="string",n=typeof e===i):t===Number?(i="number",n=typeof e===i):t===Boolean?(i="boolean",n=typeof e===i):t===Function?(i="function",n=typeof e===i):t===Object?(i="object",n=g(e)):t===Array?(i="array",n=In(e)):n=e instanceof t,{valid:n,expectedType:i}}function St(e){return e?e.charAt(0).toUpperCase()+e.slice(1):"custom type"}function Vt(e){return Object.prototype.toString.call(e).slice(8,-1)}function Pt(e){Mr.push(e),Lr||(Lr=!0,oi(Rt))}function Rt(){for(var e=document.documentElement.offsetHeight,t=0;t<Mr.length;t++)Mr[t]();return Mr=[],Lr=!1,e}function Ft(e,t,i,o){this.id=t,this.el=e,this.enterClass=i&&i.enterClass||t+"-enter",this.leaveClass=i&&i.leaveClass||t+"-leave",this.hooks=i,this.vm=o,this.pendingCssEvent=this.pendingCssCb=this.cancel=this.pendingJsCb=this.op=this.cb=null,this.justEntered=!1,this.entered=this.left=!1,this.typeCache={},this.type=i&&i.type,"production"!==n.env.NODE_ENV&&this.type&&this.type!==Ir&&this.type!==Hr&&Di('invalid CSS transition type for transition="'+this.id+'": '+this.type,o);var r=this;["enterNextTick","enterDone","leaveNextTick","leaveDone"].forEach(function(e){r[e]=y(r[e],r)})}function Mt(e){if(/svg$/.test(e.namespaceURI)){var t=e.getBoundingClientRect();return!(t.width||t.height)}return!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function Lt(e,t,n){var i=n||!t._asComponent?qt(e,t):null,o=i&&i.terminal||hn(e)||!e.hasChildNodes()?null:Zt(e.childNodes,t);return function(e,t,n,r,s){var a=_(t.childNodes),c=It(function(){i&&i(e,t,n,r,s),o&&o(e,a,n,r,s)},e);return zt(e,c)}}function It(e,t){"production"===n.env.NODE_ENV&&(t._directives=[]);var i=t._directives.length;e();var o=t._directives.slice(i);o.sort(Ht);for(var r=0,s=o.length;r<s;r++)o[r]._bind();return o}function Ht(e,t){return e=e.descriptor.def.priority||es,t=t.descriptor.def.priority||es,e>t?-1:e===t?0:1}function zt(e,t,n,i){function o(o){Bt(e,t,o),n&&i&&Bt(n,i)}return o.dirs=t,o}function Bt(e,t,i){for(var o=t.length;o--;)t[o]._teardown(),"production"===n.env.NODE_ENV||i||e._directives.$remove(t[o])}function Ut(e,t,n,i){var o=kt(t,n,e),r=It(function(){o(e,i)},e);return zt(e,r)}function Wt(e,t,i){var o,r,s=t._containerAttrs,a=t._replacerAttrs;if(11!==e.nodeType)t._asComponent?(s&&i&&(o=sn(s,i)),a&&(r=sn(a,t))):r=sn(e.attributes,t);else if("production"!==n.env.NODE_ENV&&s){var c=s.filter(function(e){return e.name.indexOf("_v-")<0&&!Gr.test(e.name)&&"slot"!==e.name}).map(function(e){return'"'+e.name+'"'});if(c.length){var l=c.length>1;Di("Attribute"+(l?"s ":" ")+c.join(", ")+(l?" are":" is")+" ignored on component <"+t.el.tagName.toLowerCase()+"> because the component is a fragment instance: http://vuejs.org/guide/components.html#Fragment-Instance")}}return t._containerAttrs=t._replacerAttrs=null,function(e,t,n){var i,s=e._context;s&&o&&(i=It(function(){o(s,t,null,n)},s));var a=It(function(){r&&r(e,t)},e);return zt(e,a,s,i)}}function qt(e,t){var n=e.nodeType;return 1!==n||hn(e)?3===n&&e.data.trim()?Qt(e,t):null:Jt(e,t)}function Jt(e,t){if("TEXTAREA"===e.tagName){var n=D(e.value);n&&(e.setAttribute(":value",S(n)),e.value="")}var i,o=e.hasAttributes(),r=o&&_(e.attributes);return o&&(i=nn(e,r,t)),i||(i=en(e,t)),i||(i=tn(e,t)),!i&&o&&(i=sn(r,t)),i}function Qt(e,t){if(e._skip)return Yt;var n=D(e.wholeText);if(!n)return null;for(var i=e.nextSibling;i&&3===i.nodeType;)i._skip=!0,i=i.nextSibling;for(var o,r,s=document.createDocumentFragment(),a=0,c=n.length;a<c;a++)r=n[a],o=r.tag?Gt(r,t):document.createTextNode(r.value),s.appendChild(o);return Kt(n,s,t)}function Yt(e,t){J(t)}function Gt(e,t){function n(t){if(!e.descriptor){var n=A(e.value);e.descriptor={name:t,def:Ar[t],expression:n.expression,filters:n.filters}}}var i;return e.oneTime?i=document.createTextNode(e.value):e.html?(i=document.createComment("v-html"),n("html")):(i=document.createTextNode(" "),n("text")),i}function Kt(e,t){return function(n,i,o,r){for(var s,a,l,h=t.cloneNode(!0),u=_(h.childNodes),f=0,p=e.length;f<p;f++)s=e[f],a=s.value,s.tag&&(l=u[f],s.oneTime?(a=(r||n).$eval(a),s.html?Y(l,et(a,!0)):l.data=c(a)):n._bindDir(s.descriptor,l,o,r));Y(i,h)}}function Zt(e,t){for(var n,i,o,r=[],s=0,a=e.length;s<a;s++)o=e[s],n=qt(o,t),i=n&&n.terminal||"SCRIPT"===o.tagName||!o.hasChildNodes()?null:Zt(o.childNodes,t),r.push(n,i);return r.length?Xt(r):null}function Xt(e){return function(t,n,i,o,r){for(var s,a,c,l=0,h=0,u=e.length;l<u;h++){s=n[h],a=e[l++],c=e[l++];var f=_(s.childNodes);a&&a(t,s,i,o,r),c&&c(t,f,i,o,r)}}}function en(e,t){var n=e.tagName.toLowerCase();if(!Ri.test(n)){var i=ge(t,"elementDirectives",n);return i?rn(e,n,"",t,i):void 0}}function tn(e,t){var n=fe(e,t);if(n){var i=ae(e),o={name:"component",ref:i,expression:n.id,def:Qr.component,modifiers:{literal:!n.dynamic}},r=function(e,t,n,r,s){i&&Ne((r||e).$refs,i,null),e._bindDir(o,t,n,r,s)};return r.terminal=!0,r}}function nn(e,t,n){if(null!==z(e,"v-pre"))return on;if(e.hasAttribute("v-else")){var i=e.previousElementSibling;if(i&&i.hasAttribute("v-if"))return on}for(var o,r,s,a,c,l,h,u,f,p,d=0,v=t.length;d<v;d++)o=t[d],r=o.name.replace(Zr,""),(c=r.match(Kr))&&(f=ge(n,"directives",c[1]),f&&f.terminal&&(!p||(f.priority||ts)>p.priority)&&(p=f,h=o.name,a=an(o.name),s=o.value,l=c[1],u=c[2]));return p?rn(e,l,s,n,p,h,u,a):void 0}function on(){}function rn(e,t,n,i,o,r,s,a){var c=A(n),l={name:t,arg:s,expression:c.expression,filters:c.filters,raw:n,attr:r,modifiers:a,def:o};"for"!==t&&"router-view"!==t||(l.ref=ae(e));var h=function(e,t,n,i,o){l.ref&&Ne((i||e).$refs,l.ref,null),e._bindDir(l,t,n,i,o)};return h.terminal=!0,h}function sn(e,t){function i(e,t,n){var i=n&&ln(n),o=!i&&A(s);y.push({name:e,attr:a,raw:c,def:t,arg:h,modifiers:u,expression:o&&o.expression,filters:o&&o.filters,interp:n,hasOneTime:i})}for(var o,r,s,a,c,l,h,u,f,p,d,v=e.length,y=[];v--;)if(o=e[v],r=a=o.name,s=c=o.value,p=D(s),h=null,u=an(r),r=r.replace(Zr,""),p)s=S(p),h=r,i("bind",Ar.bind,p),"production"!==n.env.NODE_ENV&&"class"===r&&Array.prototype.some.call(e,function(e){return":class"===e.name||"v-bind:class"===e.name})&&Di('class="'+c+'": Do not mix mustache interpolation and v-bind for "class" on the same element. Use one or the other.',t);else if(Xr.test(r))u.literal=!Yr.test(r),i("transition",Qr.transition);else if(Gr.test(r))h=r.replace(Gr,""),i("on",Ar.on);else if(Yr.test(r))l=r.replace(Yr,""),"style"===l||"class"===l?i(l,Qr[l]):(h=l,i("bind",Ar.bind));else if(d=r.match(Kr)){if(l=d[1],h=d[2],"else"===l)continue;f=ge(t,"directives",l,!0),f&&i(l,f)}if(y.length)return cn(y)}function an(e){var t=Object.create(null),n=e.match(Zr);if(n)for(var i=n.length;i--;)t[n[i].slice(1)]=!0;return t}function cn(e){return function(t,n,i,o,r){for(var s=e.length;s--;)t._bindDir(e[s],n,i,o,r)}}function ln(e){for(var t=e.length;t--;)if(e[t].oneTime)return!0}function hn(e){return"SCRIPT"===e.tagName&&(!e.hasAttribute("type")||"text/javascript"===e.getAttribute("type"))}function un(e,t){return t&&(t._containerAttrs=pn(e)),re(e)&&(e=et(e)),t&&(t._asComponent&&!t.template&&(t.template="<slot></slot>"),t.template&&(t._content=ne(e),e=fn(e,t))),he(e)&&(Q(se("v-start",!0),e),e.appendChild(se("v-end",!0))),e}function fn(e,t){var i=t.template,o=et(i,!0);if(o){var r=o.firstChild,s=r.tagName&&r.tagName.toLowerCase();return t.replace?(e===document.body&&"production"!==n.env.NODE_ENV&&Di("You are mounting an instance with a template to <body>. This will replace <body> entirely. You should probably use `replace: false` here."),o.childNodes.length>1||1!==r.nodeType||"component"===s||ge(t,"components",s)||U(r,"is")||ge(t,"elementDirectives",s)||r.hasAttribute("v-for")||r.hasAttribute("v-if")?o:(t._replacerAttrs=pn(r),dn(e,r),r)):(e.appendChild(o),e)}"production"!==n.env.NODE_ENV&&Di("Invalid template option: "+i)}function pn(e){if(1===e.nodeType&&e.hasAttributes())return _(e.attributes)}function dn(e,t){for(var n,i,o=e.attributes,r=o.length;r--;)n=o[r].name,i=o[r].value,t.hasAttribute(n)||ns.test(n)?"class"===n&&!D(i)&&(i=i.trim())&&i.split(/\s+/).forEach(function(e){ee(t,e)}):t.setAttribute(n,i)}function vn(e,t){if(t){for(var i,o,r=e._slotContents=Object.create(null),s=0,a=t.children.length;s<a;s++)i=t.children[s],(o=i.getAttribute("slot"))&&(r[o]||(r[o]=[])).push(i),"production"!==n.env.NODE_ENV&&B(i,"slot")&&Di('The "slot" attribute must be static.',e.$parent);for(o in r)r[o]=yn(r[o],t);if(t.hasChildNodes()){var c=t.childNodes;if(1===c.length&&3===c[0].nodeType&&!c[0].data.trim())return;r["default"]=yn(t.childNodes,t)}}}function yn(e,t){var n=document.createDocumentFragment();e=_(e);for(var i=0,o=e.length;i<o;i++){var r=e[i];!re(r)||r.hasAttribute("v-if")||r.hasAttribute("v-for")||(t.removeChild(r),r=et(r,!0)),n.appendChild(r)}return n}function _n(e){function t(){}function i(e,t){var n=new Qe(t,e,null,{lazy:!0});return function(){return n.dirty&&n.evaluate(),
Ee.target&&n.depend(),n.value}}Object.defineProperty(e.prototype,"$data",{get:function(){return this._data},set:function(e){e!==this._data&&this._setData(e)}}),e.prototype._initState=function(){this._initProps(),this._initMeta(),this._initMethods(),this._initData(),this._initComputed()},e.prototype._initProps=function(){var e=this.$options,t=e.el,i=e.props;i&&!t&&"production"!==n.env.NODE_ENV&&Di("Props will not be compiled if no `el` option is provided at instantiation.",this),t=e.el=I(t),this._propsUnlinkFn=t&&1===t.nodeType&&i?Ut(this,t,i,this._scope):null},e.prototype._initData=function(){var e=this.$options.data,t=this._data=e?e():{};g(t)||(t={},"production"!==n.env.NODE_ENV&&Di("data functions should return an object.",this));var i,o,s=this._props,a=Object.keys(t);for(i=a.length;i--;)o=a[i],s&&r(s,o)?"production"!==n.env.NODE_ENV&&Di('Data field "'+o+'" is already defined as a prop. To provide default value for a prop, use the "default" prop option; if you want to pass prop values to an instantiation call, use the "propsData" option.',this):this._proxy(o);$e(t,this)},e.prototype._setData=function(e){e=e||{};var t=this._data;this._data=e;var n,i,o;for(n=Object.keys(t),o=n.length;o--;)i=n[o],i in e||this._unproxy(i);for(n=Object.keys(e),o=n.length;o--;)i=n[o],r(this,i)||this._proxy(i);t.__ob__.removeVm(this),$e(e,this),this._digest()},e.prototype._proxy=function(e){if(!a(e)){var t=this;Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return t._data[e]},set:function(n){t._data[e]=n}})}},e.prototype._unproxy=function(e){a(e)||delete this[e]},e.prototype._digest=function(){for(var e=0,t=this._watchers.length;e<t;e++)this._watchers[e].update(!0)},e.prototype._initComputed=function(){var e=this.$options.computed;if(e)for(var n in e){var o=e[n],r={enumerable:!0,configurable:!0};"function"==typeof o?(r.get=i(o,this),r.set=t):(r.get=o.get?o.cache!==!1?i(o.get,this):y(o.get,this):t,r.set=o.set?y(o.set,this):t),Object.defineProperty(this,n,r)}},e.prototype._initMethods=function(){var e=this.$options.methods;if(e)for(var t in e)this[t]=y(e[t],this)},e.prototype._initMeta=function(){var e=this.$options._meta;if(e)for(var t in e)Ne(this,t,e[t])}}function bn(e){function t(e,t){for(var n,i,o,r=t.attributes,s=0,a=r.length;s<a;s++)n=r[s].name,os.test(n)&&(n=n.replace(os,""),i=r[s].value,Be(i)&&(i+=".apply(this, $arguments)"),o=(e._scope||e._context).$eval(i,!0),o._fromParent=!0,e.$on(n.replace(os),o))}function i(e,t,n){if(n){var i,r,s,a;for(r in n)if(i=n[r],In(i))for(s=0,a=i.length;s<a;s++)o(e,t,r,i[s]);else o(e,t,r,i)}}function o(e,t,i,r,s){var a=typeof r;if("function"===a)e[t](i,r,s);else if("string"===a){var c=e.$options.methods,l=c&&c[r];l?e[t](i,l,s):"production"!==n.env.NODE_ENV&&Di('Unknown method: "'+r+'" when registering callback for '+t+': "'+i+'".',e)}else r&&"object"===a&&o(e,t,i,r.handler,r)}function r(){this._isAttached||(this._isAttached=!0,this.$children.forEach(s))}function s(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function a(){this._isAttached&&(this._isAttached=!1,this.$children.forEach(c))}function c(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}e.prototype._initEvents=function(){var e=this.$options;e._asComponent&&t(this,e.el),i(this,"$on",e.events),i(this,"$watch",e.watch)},e.prototype._initDOMHooks=function(){this.$on("hook:attached",r),this.$on("hook:detached",a)},e.prototype._callHook=function(e){this.$emit("pre-hook:"+e);var t=this.$options[e];if(t)for(var n=0,i=t.length;n<i;n++)t[n].call(this);this.$emit("hook:"+e)}}function mn(){}function gn(e,t,i,o,r,s){this.vm=t,this.el=i,this.descriptor=e,this.name=e.name,this.expression=e.expression,this.arg=e.arg,this.modifiers=e.modifiers,this.filters=e.filters,this.literal=this.modifiers&&this.modifiers.literal,this._locked=!1,this._bound=!1,this._listeners=null,this._host=o,this._scope=r,this._frag=s,"production"!==n.env.NODE_ENV&&this.el&&(this.el._vue_directives=this.el._vue_directives||[],this.el._vue_directives.push(this))}function En(e){e.prototype._updateRef=function(e){var t=this.$options._ref;if(t){var n=(this._scope||this._context).$refs;e?n[t]===this&&(n[t]=null):n[t]=this}},e.prototype._compile=function(e){var t=this.$options,n=e;if(e=un(e,t),this._initElement(e),1!==e.nodeType||null===z(e,"v-pre")){var i=this._context&&this._context.$options,o=Wt(e,t,i);vn(this,t._content);var r,s=this.constructor;t._linkerCachable&&(r=s.linker,r||(r=s.linker=Lt(e,t)));var a=o(this,e,this._scope),c=r?r(this,e):Lt(e,t)(this,e);this._unlinkFn=function(){a(),c(!0)},t.replace&&Y(n,e),this._isCompiled=!0,this._callHook("compiled")}},e.prototype._initElement=function(e){he(e)?(this._isFragment=!0,this.$el=this._fragmentStart=e.firstChild,this._fragmentEnd=e.lastChild,3===this._fragmentStart.nodeType&&(this._fragmentStart.data=this._fragmentEnd.data=""),this._fragment=e):this.$el=e,this.$el.__vue__=this,this._callHook("beforeCompile")},e.prototype._bindDir=function(e,t,n,i,o){this._directives.push(new gn(e,this,t,n,i,o))},e.prototype._destroy=function(e,t){if(this._isBeingDestroyed)return void(t||this._cleanup());var n,i,o=this,r=function(){!n||i||t||o._cleanup()};e&&this.$el&&(i=!0,this.$remove(function(){i=!1,r()})),this._callHook("beforeDestroy"),this._isBeingDestroyed=!0;var s,a=this.$parent;for(a&&!a._isBeingDestroyed&&(a.$children.$remove(this),this._updateRef(!0)),s=this.$children.length;s--;)this.$children[s].$destroy();for(this._propsUnlinkFn&&this._propsUnlinkFn(),this._unlinkFn&&this._unlinkFn(),s=this._watchers.length;s--;)this._watchers[s].teardown();this.$el&&(this.$el.__vue__=null),n=!0,r()},e.prototype._cleanup=function(){this._isDestroyed||(this._frag&&this._frag.children.$remove(this),this._data&&this._data.__ob__&&this._data.__ob__.removeVm(this),this.$el=this.$parent=this.$root=this.$children=this._watchers=this._context=this._scope=this._directives=null,this._isDestroyed=!0,this._callHook("destroyed"),this.$off())}}function wn(e){e.prototype._applyFilters=function(e,t,n,i){var o,r,s,a,c,l,h,u,f;for(l=0,h=n.length;l<h;l++)if(o=n[i?h-l-1:l],r=ge(this.$options,"filters",o.name,!0),r&&(r=i?r.write:r.read||r,"function"==typeof r)){if(s=i?[e,t]:[e],c=i?2:1,o.args)for(u=0,f=o.args.length;u<f;u++)a=o.args[u],s[u+c]=a.dynamic?this.$get(a.value):a.value;e=r.apply(this,s)}return e},e.prototype._resolveComponent=function(t,i){var o;if(o="function"==typeof t?t:ge(this.$options,"components",t,!0))if(o.options)i(o);else if(o.resolved)i(o.resolved);else if(o.requested)o.pendingCallbacks.push(i);else{o.requested=!0;var r=o.pendingCallbacks=[i];o.call(this,function(t){g(t)&&(t=e.extend(t)),o.resolved=t;for(var n=0,i=r.length;n<i;n++)r[n](t)},function(e){"production"!==n.env.NODE_ENV&&Di("Failed to resolve async component"+("string"==typeof t?": "+t:"")+". "+(e?"\nReason: "+e:""))})}}}function xn(e){function t(e){return JSON.parse(JSON.stringify(e))}e.prototype.$get=function(e,t){var n=ze(e);if(n){if(t){var i=this;return function(){i.$arguments=_(arguments);var e=n.get.call(i,i);return i.$arguments=null,e}}try{return n.get.call(this,this)}catch(o){}}},e.prototype.$set=function(e,t){var n=ze(e,!0);n&&n.set&&n.set.call(this,this,t)},e.prototype.$delete=function(e){o(this._data,e)},e.prototype.$watch=function(e,t,n){var i,o=this;"string"==typeof e&&(i=A(e),e=i.expression);var r=new Qe(o,e,t,{deep:n&&n.deep,sync:n&&n.sync,filters:i&&i.filters,user:!n||n.user!==!1});return n&&n.immediate&&t.call(o,r.value),function(){r.teardown()}},e.prototype.$eval=function(e,t){if(rs.test(e)){var n=A(e),i=this.$get(n.expression,t);return n.filters?this._applyFilters(i,null,n.filters):i}return this.$get(e,t)},e.prototype.$interpolate=function(e){var t=D(e),n=this;return t?1===t.length?n.$eval(t[0].value)+"":t.map(function(e){return e.tag?n.$eval(e.value):e.value}).join(""):e},e.prototype.$log=function(e){var n=e?Se(this._data,e):this._data;if(n&&(n=t(n)),!e){var i;for(i in this.$options.computed)n[i]=t(this[i]);if(this._props)for(i in this._props)n[i]=t(this[i])}console.log(n)}}function kn(e){function t(e,t,i,o,r,s){t=n(t);var a=!H(t),c=o===!1||a?r:s,l=!a&&!e._isAttached&&!H(e.$el);return e._isFragment?(ce(e._fragmentStart,e._fragmentEnd,function(n){c(n,t,e)}),i&&i()):c(e.$el,t,e,i),l&&e._callHook("attached"),e}function n(e){return"string"==typeof e?document.querySelector(e):e}function i(e,t,n,i){t.appendChild(e),i&&i()}function o(e,t,n,i){W(e,t),i&&i()}function r(e,t,n){J(e),n&&n()}e.prototype.$nextTick=function(e){oi(e,this)},e.prototype.$appendTo=function(e,n,o){return t(this,e,n,o,i,R)},e.prototype.$prependTo=function(e,t,i){return e=n(e),e.hasChildNodes()?this.$before(e.firstChild,t,i):this.$appendTo(e,t,i),this},e.prototype.$before=function(e,n,i){return t(this,e,n,i,o,F)},e.prototype.$after=function(e,t,i){return e=n(e),e.nextSibling?this.$before(e.nextSibling,t,i):this.$appendTo(e.parentNode,t,i),this},e.prototype.$remove=function(e,t){if(!this.$el.parentNode)return e&&e();var n=this._isAttached&&H(this.$el);n||(t=!1);var i=this,o=function(){n&&i._callHook("detached"),e&&e()};if(this._isFragment)le(this._fragmentStart,this._fragmentEnd,this,this._fragment,o);else{var s=t===!1?r:M;s(this.$el,this,o)}return this}}function Cn(e){function t(e,t,i){var o=e.$parent;if(o&&i&&!n.test(t))for(;o;)o._eventsCount[t]=(o._eventsCount[t]||0)+i,o=o.$parent}e.prototype.$on=function(e,n){return(this._events[e]||(this._events[e]=[])).push(n),t(this,e,1),this},e.prototype.$once=function(e,t){function n(){i.$off(e,n),t.apply(this,arguments)}var i=this;return n.fn=t,this.$on(e,n),this},e.prototype.$off=function(e,n){var i;if(!arguments.length){if(this.$parent)for(e in this._events)i=this._events[e],i&&t(this,e,-i.length);return this._events={},this}if(i=this._events[e],!i)return this;if(1===arguments.length)return t(this,e,-i.length),this._events[e]=null,this;for(var o,r=i.length;r--;)if(o=i[r],o===n||o.fn===n){t(this,e,-1),i.splice(r,1);break}return this},e.prototype.$emit=function(e){var t="string"==typeof e;e=t?e:e.name;var n=this._events[e],i=t||!n;if(n){n=n.length>1?_(n):n;var o=t&&n.some(function(e){return e._fromParent});o&&(i=!1);for(var r=_(arguments,1),s=0,a=n.length;s<a;s++){var c=n[s],l=c.apply(this,r);l!==!0||o&&!c._fromParent||(i=!0)}}return i},e.prototype.$broadcast=function(e){var t="string"==typeof e;if(e=t?e:e.name,this._eventsCount[e]){var n=this.$children,i=_(arguments);t&&(i[0]={name:e,source:this});for(var o=0,r=n.length;o<r;o++){var s=n[o],a=s.$emit.apply(s,i);a&&s.$broadcast.apply(s,i)}return this}},e.prototype.$dispatch=function(e){var t=this.$emit.apply(this,arguments);if(t){var n=this.$parent,i=_(arguments);for(i[0]={name:e,source:this};n;)t=n.$emit.apply(n,i),n=t?n.$parent:null;return this}};var n=/^hook:/}function $n(e){function t(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")}e.prototype.$mount=function(e){return this._isCompiled?void("production"!==n.env.NODE_ENV&&Di("$mount() should be called only once.",this)):(e=I(e),e||(e=document.createElement("div")),this._compile(e),this._initDOMHooks(),H(this.$el)?(this._callHook("attached"),t.call(this)):this.$once("hook:attached",t),this)},e.prototype.$destroy=function(e,t){this._destroy(e,t)},e.prototype.$compile=function(e,t,n,i){return Lt(e,this.$options,!0)(this,e,t,n,i)}}function Nn(e){this._init(e)}function On(e,t,n){return n=n?parseInt(n,10):0,t=l(t),"number"==typeof t?e.slice(n,n+t):e}function An(e,t,n){if(e=ls(e),null==t)return e;if("function"==typeof t)return e.filter(t);t=(""+t).toLowerCase();for(var i,o,r,s,a="in"===n?3:2,c=Array.prototype.concat.apply([],_(arguments,a)),l=[],h=0,u=e.length;h<u;h++)if(i=e[h],r=i&&i.$value||i,s=c.length){for(;s--;)if(o=c[s],"$key"===o&&jn(i.$key,t)||jn(Se(r,o),t)){l.push(i);break}}else jn(i,t)&&l.push(i);return l}function Tn(e){function t(e,t,n){var o=i[n];return o&&("$key"!==o&&(m(e)&&"$value"in e&&(e=e.$value),m(t)&&"$value"in t&&(t=t.$value)),e=m(e)?Se(e,o):e,t=m(t)?Se(t,o):t),e===t?0:e>t?r:-r}var n=null,i=void 0;e=ls(e);var o=_(arguments,1),r=o[o.length-1];"number"==typeof r?(r=r<0?-1:1,o=o.length>1?o.slice(0,-1):o):r=1;var s=o[0];return s?("function"==typeof s?n=function(e,t){return s(e,t)*r}:(i=Array.prototype.concat.apply([],o),n=function(e,o,r){return r=r||0,r>=i.length-1?t(e,o,r):t(e,o,r)||n(e,o,r+1)}),e.slice().sort(n)):e}function jn(e,t){var n;if(g(e)){var i=Object.keys(e);for(n=i.length;n--;)if(jn(e[i[n]],t))return!0}else if(In(e)){for(n=e.length;n--;)if(jn(e[n],t))return!0}else if(null!=e)return e.toString().toLowerCase().indexOf(t)>-1}function Dn(e){function t(e){return new Function("return function "+v(e)+" (options) { this._init(options) }")()}e.options={directives:Ar,elementDirectives:cs,filters:us,transitions:{},components:{},partials:{},replace:!0},e.util=qi,e.config=ji,e.set=i,e["delete"]=o,e.nextTick=oi,e.compiler=is,e.FragmentFactory=ct,e.internalDirectives=Qr,e.parsers={path:ho,text:Oi,template:zo,directive:wi,expression:Co},e.cid=0;var r=1;e.extend=function(e){e=e||{};var i=this,o=0===i.cid;if(o&&e._Ctor)return e._Ctor;var s=e.name||i.options.name;"production"!==n.env.NODE_ENV&&(/^[a-zA-Z][\w-]*$/.test(s)||(Di('Invalid component name: "'+s+'". Component names can only contain alphanumeric characaters and the hyphen.'),s=null));var a=t(s||"VueComponent");return a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.cid=r++,a.options=me(i.options,e),a["super"]=i,a.extend=i.extend,ji._assetTypes.forEach(function(e){a[e]=i[e]}),s&&(a.options.components[s]=a),o&&(e._Ctor=a),a},e.use=function(e){if(!e.installed){var t=_(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):e.apply(null,t),e.installed=!0,this}},e.mixin=function(t){e.options=me(e.options,t)},ji._assetTypes.forEach(function(t){e[t]=function(i,o){return o?("production"!==n.env.NODE_ENV&&"component"===t&&(Ri.test(i)||Fi.test(i))&&Di("Do not use built-in or reserved HTML elements as component id: "+i),"component"===t&&g(o)&&(o.name||(o.name=i),o=e.extend(o)),this.options[t+"s"][i]=o,o):this.options[t+"s"][i]}}),b(e.transition,Vi)}var Sn=Object.prototype.hasOwnProperty,Vn=/^\s?(true|false|-?[\d\.]+|'[^']*'|"[^"]*")\s?$/,Pn=/-(\w)/g,Rn=/([a-z\d])([A-Z])/g,Fn=/(?:^|[-_\/])(\w)/g,Mn=Object.prototype.toString,Ln="[object Object]",In=Array.isArray,Hn="__proto__"in{},zn="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),Bn=zn&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,Un=zn&&window.navigator.userAgent.toLowerCase(),Wn=Un&&Un.indexOf("trident")>0,qn=Un&&Un.indexOf("msie 9.0")>0,Jn=Un&&Un.indexOf("android")>0,Qn=Un&&/(iphone|ipad|ipod|ios)/i.test(Un),Yn=Qn&&Un.match(/os ([\d_]+)/),Gn=Yn&&Yn[1].split("_"),Kn=Gn&&Number(Gn[0])>=9&&Number(Gn[1])>=3&&!window.indexedDB,Zn=void 0,Xn=void 0,ei=void 0,ti=void 0;if(zn&&!qn){var ni=void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend,ii=void 0===window.onanimationend&&void 0!==window.onwebkitanimationend;Zn=ni?"WebkitTransition":"transition",Xn=ni?"webkitTransitionEnd":"transitionend",ei=ii?"WebkitAnimation":"animation",ti=ii?"webkitAnimationEnd":"animationend"}var oi=function(){function e(){o=!1;var e=i.slice(0);i=[];for(var t=0;t<e.length;t++)e[t]()}var n,i=[],o=!1;if("undefined"==typeof MutationObserver||Kn){var r=zn?window:"undefined"!=typeof t?t:{};n=r.setImmediate||setTimeout}else{var s=1,a=new MutationObserver(e),c=document.createTextNode(s);a.observe(c,{characterData:!0}),n=function(){s=(s+1)%2,c.data=s}}return function(t,r){var s=r?function(){t.call(r)}:t;i.push(s),o||(o=!0,n(e,0))}}(),ri=void 0;"undefined"!=typeof Set&&Set.toString().match(/native code/)?ri=Set:(ri=function(){this.set=Object.create(null)},ri.prototype.has=function(e){return void 0!==this.set[e]},ri.prototype.add=function(e){this.set[e]=1},ri.prototype.clear=function(){this.set=Object.create(null)});var si=$.prototype;si.put=function(e,t){var n,i=this.get(e,!0);return i||(this.size===this.limit&&(n=this.shift()),i={key:e},this._keymap[e]=i,this.tail?(this.tail.newer=i,i.older=this.tail):this.head=i,this.tail=i,this.size++),i.value=t,n},si.shift=function(){var e=this.head;return e&&(this.head=this.head.newer,this.head.older=void 0,e.newer=e.older=void 0,this._keymap[e.key]=void 0,this.size--),e},si.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return n===this.tail?t?n:n.value:(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n,t?n:n.value)};var ai,ci,li,hi,ui,fi,pi,di,vi,yi,_i,bi,mi=new $(1e3),gi=/[^\s'"]+|'[^']*'|"[^"]*"/g,Ei=/^in$|^-?\d+/,wi=Object.freeze({parseDirective:A}),xi=/[-.*+?^${}()|[\]\/\\]/g,ki=void 0,Ci=void 0,$i=void 0,Ni=/[^|]\|[^|]/,Oi=Object.freeze({compileRegex:j,parseText:D,tokensToExp:S}),Ai=["{{","}}"],Ti=["{{{","}}}"],ji=Object.defineProperties({debug:!1,silent:!1,async:!0,warnExpressionErrors:!0,devtools:"production"!==n.env.NODE_ENV,_delimitersChanged:!0,_assetTypes:["component","directive","elementDirective","filter","transition","partial"],_propBindingModes:{ONE_WAY:0,TWO_WAY:1,ONE_TIME:2},_maxUpdateCount:100},{delimiters:{get:function(){return Ai},set:function(e){Ai=e,j()},configurable:!0,enumerable:!0},unsafeDelimiters:{get:function(){return Ti},set:function(e){Ti=e,j()},configurable:!0,enumerable:!0}}),Di=void 0,Si=void 0;"production"!==n.env.NODE_ENV&&!function(){var e="undefined"!=typeof console;Di=function(t,n){e&&!ji.silent&&console.error("[Vue warn]: "+t+(n?Si(n):""))},Si=function(e){var t=e._isVue?e.$options.name:e.name;return t?" (found in component: <"+d(t)+">)":""}}();var Vi=Object.freeze({appendWithTransition:R,beforeWithTransition:F,removeWithTransition:M,applyTransition:L}),Pi=/^v-ref:/,Ri=/^(div|p|span|img|a|b|i|br|ul|ol|li|h1|h2|h3|h4|h5|h6|code|pre|table|th|td|tr|form|label|input|select|option|nav|article|section|header|footer)$/i,Fi=/^(slot|partial|component)$/i,Mi=void 0;"production"!==n.env.NODE_ENV&&(Mi=function(e,t){return t.indexOf("-")>-1?e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:/HTMLUnknownElement/.test(e.toString())&&!/^(data|time|rtc|rb|details|dialog|summary)$/.test(t)});var Li=ji.optionMergeStrategies=Object.create(null);Li.data=function(e,t,i){return i?e||t?function(){var n="function"==typeof t?t.call(i):t,o="function"==typeof e?e.call(i):void 0;return n?de(n,o):o}:void 0:t?"function"!=typeof t?("production"!==n.env.NODE_ENV&&Di('The "data" option should be a function that returns a per-instance value in component definitions.',i),e):e?function(){return de(t.call(this),e.call(this))}:t:e},Li.el=function(e,t,i){if(!i&&t&&"function"!=typeof t)return void("production"!==n.env.NODE_ENV&&Di('The "el" option should be a function that returns a per-instance value in component definitions.',i));var o=t||e;return i&&"function"==typeof o?o.call(i):o},Li.init=Li.created=Li.ready=Li.attached=Li.detached=Li.beforeCompile=Li.compiled=Li.beforeDestroy=Li.destroyed=Li.activate=function(e,t){return t?e?e.concat(t):In(t)?t:[t]:e},ji._assetTypes.forEach(function(e){Li[e+"s"]=ve}),Li.watch=Li.events=function(e,t){if(!t)return e;if(!e)return t;var n={};b(n,e);for(var i in t){var o=n[i],r=t[i];o&&!In(o)&&(o=[o]),n[i]=o?o.concat(r):[r]}return n},Li.props=Li.methods=Li.computed=function(e,t){if(!t)return e;if(!e)return t;var n=Object.create(null);return b(n,e),b(n,t),n};var Ii=function(e,t){return void 0===t?e:t},Hi=0;Ee.target=null,Ee.prototype.addSub=function(e){this.subs.push(e)},Ee.prototype.removeSub=function(e){this.subs.$remove(e)},Ee.prototype.depend=function(){Ee.target.addDep(this)},Ee.prototype.notify=function(){for(var e=_(this.subs),t=0,n=e.length;t<n;t++)e[t].update()};var zi=Array.prototype,Bi=Object.create(zi);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=zi[e];E(Bi,e,function(){for(var n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];var o,r=t.apply(this,i),s=this.__ob__;switch(e){case"push":o=i;break;case"unshift":o=i;break;case"splice":o=i.slice(2)}return o&&s.observeArray(o),s.dep.notify(),r})}),E(zi,"$set",function(e,t){return e>=this.length&&(this.length=Number(e)+1),this.splice(e,1,t)[0]}),E(zi,"$remove",function(e){if(this.length){var t=x(this,e);return t>-1?this.splice(t,1):void 0}});var Ui=Object.getOwnPropertyNames(Bi),Wi=!0;xe.prototype.walk=function(e){for(var t=Object.keys(e),n=0,i=t.length;n<i;n++)this.convert(t[n],e[t[n]])},xe.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)$e(e[t])},xe.prototype.convert=function(e,t){Ne(this.value,e,t)},xe.prototype.addVm=function(e){(this.vms||(this.vms=[])).push(e)},xe.prototype.removeVm=function(e){this.vms.$remove(e)};var qi=Object.freeze({defineReactive:Ne,set:i,del:o,hasOwn:r,isLiteral:s,isReserved:a,_toString:c,toNumber:l,toBoolean:h,stripQuotes:u,camelize:f,hyphenate:d,classify:v,bind:y,toArray:_,extend:b,isObject:m,isPlainObject:g,def:E,debounce:w,indexOf:x,cancellable:k,looseEqual:C,isArray:In,hasProto:Hn,inBrowser:zn,devtools:Bn,isIE:Wn,isIE9:qn,isAndroid:Jn,isIos:Qn,iosVersionMatch:Yn,iosVersion:Gn,hasMutationObserverBug:Kn,get transitionProp(){return Zn},get transitionEndEvent(){return Xn},get animationProp(){return ei},get animationEndEvent(){return ti},nextTick:oi,get _Set(){return ri},query:I,inDoc:H,getAttr:z,getBindAttr:B,hasBindAttr:U,before:W,after:q,remove:J,prepend:Q,replace:Y,on:G,off:K,setClass:X,addClass:ee,removeClass:te,extractContent:ne,trimNode:ie,isTemplate:re,createAnchor:se,findRef:ae,mapNodeRange:ce,removeNodeRange:le,isFragment:he,getOuterHTML:ue,mergeOptions:me,resolveAsset:ge,checkComponentAttr:fe,commonTagRE:Ri,reservedTagRE:Fi,get warn(){return Di}}),Ji=0,Qi=new $(1e3),Yi=0,Gi=1,Ki=2,Zi=3,Xi=0,eo=1,to=2,no=3,io=4,oo=5,ro=6,so=7,ao=8,co=[];co[Xi]={ws:[Xi],ident:[no,Yi],"[":[io],eof:[so]},co[eo]={ws:[eo],".":[to],"[":[io],eof:[so]},co[to]={ws:[to],ident:[no,Yi]},co[no]={ident:[no,Yi],0:[no,Yi],number:[no,Yi],ws:[eo,Gi],".":[to,Gi],"[":[io,Gi],eof:[so,Gi]},co[io]={"'":[oo,Yi],'"':[ro,Yi],"[":[io,Ki],"]":[eo,Zi],eof:ao,"else":[io,Yi]},co[oo]={"'":[io,Yi],eof:ao,"else":[oo,Yi]},co[ro]={'"':[io,Yi],eof:ao,"else":[ro,Yi]};var lo;"production"!==n.env.NODE_ENV&&(lo=function(e,t){Di('You are setting a non-existent path "'+e.raw+'" on a vm instance. Consider pre-initializing the property with the "data" option for more reliable reactivity and better performance.',t)});var ho=Object.freeze({parsePath:De,getPath:Se,setPath:Ve}),uo=new $(1e3),fo="Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat",po=new RegExp("^("+fo.replace(/,/g,"\\b|")+"\\b)"),vo="break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,return,super,switch,throw,try,var,while,with,yield,enum,await,implements,package,protected,static,interface,private,public",yo=new RegExp("^("+vo.replace(/,/g,"\\b|")+"\\b)"),_o=/\s/g,bo=/\n/g,mo=/[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`)|new |typeof |void /g,go=/"(\d+)"/g,Eo=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,wo=/[^\w$\.](?:[A-Za-z_$][\w$]*)/g,xo=/^(?:true|false|null|undefined|Infinity|NaN)$/,ko=[],Co=Object.freeze({parseExpression:ze,isSimplePath:Be}),$o=[],No=[],Oo={},Ao={},To=!1,jo=0;Qe.prototype.get=function(){this.beforeGet();var e,t=this.scope||this.vm;try{e=this.getter.call(t,t)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating expression "'+this.expression+'": '+i.toString(),this.vm)}return this.deep&&Ye(e),this.preProcess&&(e=this.preProcess(e)),this.filters&&(e=t._applyFilters(e,null,this.filters,!1)),this.postProcess&&(e=this.postProcess(e)),this.afterGet(),e},Qe.prototype.set=function(e){var t=this.scope||this.vm;this.filters&&(e=t._applyFilters(e,this.value,this.filters,!0));try{this.setter.call(t,t,e)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating setter "'+this.expression+'": '+i.toString(),this.vm)}var o=t.$forContext;if(o&&o.alias===this.expression){if(o.filters)return void("production"!==n.env.NODE_ENV&&Di("It seems you are using two-way binding on a v-for alias ("+this.expression+"), and the v-for has filters. This will not work properly. Either remove the filters or use an array of objects and bind to object properties instead.",this.vm));o._withLock(function(){t.$key?o.rawValue[t.$key]=e:o.rawValue.$set(t.$index,e)})}},Qe.prototype.beforeGet=function(){Ee.target=this},Qe.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},Qe.prototype.afterGet=function(){Ee.target=null;for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Qe.prototype.update=function(e){this.lazy?this.dirty=!0:this.sync||!ji.async?this.run():(this.shallow=this.queued?!!e&&this.shallow:!!e,this.queued=!0,"production"!==n.env.NODE_ENV&&ji.debug&&(this.prevError=new Error("[vue] async stack trace")),Je(this))},Qe.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||(m(e)||this.deep)&&!this.shallow){var t=this.value;this.value=e;var i=this.prevError;if("production"!==n.env.NODE_ENV&&ji.debug&&i){this.prevError=null;try{this.cb.call(this.vm,e,t)}catch(o){throw oi(function(){throw i},0),o}}else this.cb.call(this.vm,e,t)}this.queued=this.shallow=!1}},Qe.prototype.evaluate=function(){var e=Ee.target;this.value=this.get(),this.dirty=!1,Ee.target=e},Qe.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},Qe.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||this.vm._vForRemoving||this.vm._watchers.$remove(this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1,this.vm=this.cb=this.value=null}};var Do=new ri,So={bind:function(){this.attr=3===this.el.nodeType?"data":"textContent"},update:function(e){this.el[this.attr]=c(e)}},Vo=new $(1e3),Po=new $(1e3),Ro={efault:[0,"",""],legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]};Ro.td=Ro.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Ro.option=Ro.optgroup=[1,'<select multiple="multiple">',"</select>"],Ro.thead=Ro.tbody=Ro.colgroup=Ro.caption=Ro.tfoot=[1,"<table>","</table>"],Ro.g=Ro.defs=Ro.symbol=Ro.use=Ro.image=Ro.text=Ro.circle=Ro.ellipse=Ro.line=Ro.path=Ro.polygon=Ro.polyline=Ro.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events"version="1.1">',"</svg>"];var Fo=/<([\w:-]+)/,Mo=/&#?\w+?;/,Lo=/<!--/,Io=function(){if(zn){var e=document.createElement("div");return e.innerHTML="<template>1</template>",!e.cloneNode(!0).firstChild.innerHTML}return!1}(),Ho=function(){if(zn){var e=document.createElement("textarea");return e.placeholder="t","t"===e.cloneNode(!0).value}return!1}(),zo=Object.freeze({cloneNode:Xe,parseTemplate:et}),Bo={bind:function(){8===this.el.nodeType&&(this.nodes=[],this.anchor=se("v-html"),Y(this.el,this.anchor))},update:function(e){e=c(e),this.nodes?this.swap(e):this.el.innerHTML=e},swap:function(e){for(var t=this.nodes.length;t--;)J(this.nodes[t]);var n=et(e,!0,!0);this.nodes=_(n.childNodes),W(n,this.anchor)}};tt.prototype.callHook=function(e){var t,n;for(t=0,n=this.childFrags.length;t<n;t++)this.childFrags[t].callHook(e);for(t=0,n=this.children.length;t<n;t++)e(this.children[t])},tt.prototype.beforeRemove=function(){var e,t;for(e=0,t=this.childFrags.length;e<t;e++)this.childFrags[e].beforeRemove(!1);for(e=0,t=this.children.length;e<t;e++)this.children[e].$destroy(!1,!0);var n=this.unlink.dirs;for(e=0,t=n.length;e<t;e++)n[e]._watcher&&n[e]._watcher.teardown()},tt.prototype.destroy=function(){this.parentFrag&&this.parentFrag.childFrags.$remove(this),this.node.__v_frag=null,this.unlink()};var Uo=new $(5e3);ct.prototype.create=function(e,t,n){var i=Xe(this.template);return new tt(this.linker,this.vm,i,e,t,n)};var Wo=700,qo=800,Jo=850,Qo=1100,Yo=1500,Go=1500,Ko=1750,Zo=2100,Xo=2200,er=2300,tr=0,nr={priority:Xo,terminal:!0,params:["track-by","stagger","enter-stagger","leave-stagger"],bind:function(){var e=this.expression.match(/(.*) (?:in|of) (.*)/);if(e){var t=e[1].match(/\((.*),(.*)\)/);t?(this.iterator=t[1].trim(),this.alias=t[2].trim()):this.alias=e[1].trim(),this.expression=e[2]}if(!this.alias)return void("production"!==n.env.NODE_ENV&&Di('Invalid v-for expression "'+this.descriptor.raw+'": alias is required.',this.vm));this.id="__v-for__"+ ++tr;var i=this.el.tagName;this.isOption=("OPTION"===i||"OPTGROUP"===i)&&"SELECT"===this.el.parentNode.tagName,this.start=se("v-for-start"),this.end=se("v-for-end"),Y(this.el,this.end),W(this.start,this.end),this.cache=Object.create(null),this.factory=new ct(this.vm,this.el)},update:function(e){this.diff(e),this.updateRef(),this.updateModel()},diff:function(e){var t,n,i,o,s,a,c=e[0],l=this.fromObject=m(c)&&r(c,"$key")&&r(c,"$value"),h=this.params.trackBy,u=this.frags,f=this.frags=new Array(e.length),p=this.alias,d=this.iterator,v=this.start,y=this.end,_=H(v),b=!u;for(t=0,n=e.length;t<n;t++)c=e[t],o=l?c.$key:null,s=l?c.$value:c,a=!m(s),i=!b&&this.getCachedFrag(s,t,o),i?(i.reused=!0,i.scope.$index=t,o&&(i.scope.$key=o),d&&(i.scope[d]=null!==o?o:t),(h||l||a)&&we(function(){i.scope[p]=s})):(i=this.create(s,p,t,o),i.fresh=!b),f[t]=i,b&&i.before(y);if(!b){var g=0,E=u.length-f.length;for(this.vm._vForRemoving=!0,t=0,n=u.length;t<n;t++)i=u[t],i.reused||(this.deleteCachedFrag(i),this.remove(i,g++,E,_));this.vm._vForRemoving=!1,g&&(this.vm._watchers=this.vm._watchers.filter(function(e){return e.active}));var w,x,k,C=0;for(t=0,n=f.length;t<n;t++)i=f[t],w=f[t-1],x=w?w.staggerCb?w.staggerAnchor:w.end||w.node:v,i.reused&&!i.staggerCb?(k=lt(i,v,this.id),k===w||k&&lt(k,v,this.id)===w||this.move(i,x)):this.insert(i,C++,x,_),i.reused=i.fresh=!1}},create:function(e,t,n,i){var o=this._host,r=this._scope||this.vm,s=Object.create(r);s.$refs=Object.create(r.$refs),s.$els=Object.create(r.$els),s.$parent=r,s.$forContext=this,we(function(){Ne(s,t,e)}),Ne(s,"$index",n),i?Ne(s,"$key",i):s.$key&&E(s,"$key",null),this.iterator&&Ne(s,this.iterator,null!==i?i:n);var a=this.factory.create(o,s,this._frag);return a.forId=this.id,this.cacheFrag(e,a,n,i),a},updateRef:function(){var e=this.descriptor.ref;if(e){var t,n=(this._scope||this.vm).$refs;this.fromObject?(t={},this.frags.forEach(function(e){t[e.scope.$key]=ht(e)})):t=this.frags.map(ht),n[e]=t}},updateModel:function(){if(this.isOption){var e=this.start.parentNode,t=e&&e.__v_model;t&&t.forceUpdate()}},insert:function(e,t,n,i){e.staggerCb&&(e.staggerCb.cancel(),e.staggerCb=null);var o=this.getStagger(e,t,null,"enter");if(i&&o){var r=e.staggerAnchor;r||(r=e.staggerAnchor=se("stagger-anchor"),r.__v_frag=e),q(r,n);var s=e.staggerCb=k(function(){e.staggerCb=null,e.before(r),J(r)});setTimeout(s,o)}else{var a=n.nextSibling;a||(q(this.end,n),a=this.end),e.before(a)}},remove:function(e,t,n,i){if(e.staggerCb)return e.staggerCb.cancel(),void(e.staggerCb=null);var o=this.getStagger(e,t,n,"leave");if(i&&o){var r=e.staggerCb=k(function(){e.staggerCb=null,e.remove()});setTimeout(r,o)}else e.remove()},move:function(e,t){t.nextSibling||this.end.parentNode.appendChild(this.end),e.before(t.nextSibling,!1)},cacheFrag:function(e,t,i,o){var s,a=this.params.trackBy,c=this.cache,l=!m(e);o||a||l?(s=ft(i,o,e,a),c[s]?"$index"!==a&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):c[s]=t):(s=this.id,r(e,s)?null===e[s]?e[s]=t:"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):Object.isExtensible(e)?E(e,s,t):"production"!==n.env.NODE_ENV&&Di("Frozen v-for objects cannot be automatically tracked, make sure to provide a track-by key.")),t.raw=e;
},getCachedFrag:function(e,t,i){var o,r=this.params.trackBy,s=!m(e);if(i||r||s){var a=ft(t,i,e,r);o=this.cache[a]}else o=e[this.id];return o&&(o.reused||o.fresh)&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e),o},deleteCachedFrag:function(e){var t=e.raw,n=this.params.trackBy,i=e.scope,o=i.$index,s=r(i,"$key")&&i.$key,a=!m(t);if(n||s||a){var c=ft(o,s,t,n);this.cache[c]=null}else t[this.id]=null,e.raw=null},getStagger:function(e,t,n,i){i+="Stagger";var o=e.node.__v_trans,r=o&&o.hooks,s=r&&(r[i]||r.stagger);return s?s.call(e,t,n):t*parseInt(this.params[i]||this.params.stagger,10)},_preProcess:function(e){return this.rawValue=e,e},_postProcess:function(e){if(In(e))return e;if(g(e)){for(var t,n=Object.keys(e),i=n.length,o=new Array(i);i--;)t=n[i],o[i]={$key:t,$value:e[t]};return o}return"number"!=typeof e||isNaN(e)||(e=ut(e)),e||[]},unbind:function(){if(this.descriptor.ref&&((this._scope||this.vm).$refs[this.descriptor.ref]=null),this.frags)for(var e,t=this.frags.length;t--;)e=this.frags[t],this.deleteCachedFrag(e),e.destroy()}};"production"!==n.env.NODE_ENV&&(nr.warnDuplicate=function(e){Di('Duplicate value found in v-for="'+this.descriptor.raw+'": '+JSON.stringify(e)+'. Use track-by="$index" if you are expecting duplicate values.',this.vm)});var ir={priority:Zo,terminal:!0,bind:function(){var e=this.el;if(e.__vue__)"production"!==n.env.NODE_ENV&&Di('v-if="'+this.expression+'" cannot be used on an instance root element.',this.vm),this.invalid=!0;else{var t=e.nextElementSibling;t&&null!==z(t,"v-else")&&(J(t),this.elseEl=t),this.anchor=se("v-if"),Y(e,this.anchor)}},update:function(e){this.invalid||(e?this.frag||this.insert():this.remove())},insert:function(){this.elseFrag&&(this.elseFrag.remove(),this.elseFrag=null),this.factory||(this.factory=new ct(this.vm,this.el)),this.frag=this.factory.create(this._host,this._scope,this._frag),this.frag.before(this.anchor)},remove:function(){this.frag&&(this.frag.remove(),this.frag=null),this.elseEl&&!this.elseFrag&&(this.elseFactory||(this.elseFactory=new ct(this.elseEl._context||this.vm,this.elseEl)),this.elseFrag=this.elseFactory.create(this._host,this._scope,this._frag),this.elseFrag.before(this.anchor))},unbind:function(){this.frag&&this.frag.destroy(),this.elseFrag&&this.elseFrag.destroy()}},or={bind:function(){var e=this.el.nextElementSibling;e&&null!==z(e,"v-else")&&(this.elseEl=e)},update:function(e){this.apply(this.el,e),this.elseEl&&this.apply(this.elseEl,!e)},apply:function(e,t){function n(){e.style.display=t?"":"none"}H(e)?L(e,t?1:-1,n,this.vm):n()}},rr={bind:function(){var e=this,t=this.el,n="range"===t.type,i=this.params.lazy,o=this.params.number,r=this.params.debounce,s=!1;if(Jn||n||(this.on("compositionstart",function(){s=!0}),this.on("compositionend",function(){s=!1,i||e.listener()})),this.focused=!1,n||i||(this.on("focus",function(){e.focused=!0}),this.on("blur",function(){e.focused=!1,e._frag&&!e._frag.inserted||e.rawListener()})),this.listener=this.rawListener=function(){if(!s&&e._bound){var i=o||n?l(t.value):t.value;e.set(i),oi(function(){e._bound&&!e.focused&&e.update(e._watcher.value)})}},r&&(this.listener=w(this.listener,r)),this.hasjQuery="function"==typeof jQuery,this.hasjQuery){var a=jQuery.fn.on?"on":"bind";jQuery(t)[a]("change",this.rawListener),i||jQuery(t)[a]("input",this.listener)}else this.on("change",this.rawListener),i||this.on("input",this.listener);!i&&qn&&(this.on("cut",function(){oi(e.listener)}),this.on("keyup",function(t){46!==t.keyCode&&8!==t.keyCode||e.listener()})),(t.hasAttribute("value")||"TEXTAREA"===t.tagName&&t.value.trim())&&(this.afterBind=this.listener)},update:function(e){e=c(e),e!==this.el.value&&(this.el.value=e)},unbind:function(){var e=this.el;if(this.hasjQuery){var t=jQuery.fn.off?"off":"unbind";jQuery(e)[t]("change",this.listener),jQuery(e)[t]("input",this.listener)}}},sr={bind:function(){var e=this,t=this.el;this.getValue=function(){if(t.hasOwnProperty("_value"))return t._value;var n=t.value;return e.params.number&&(n=l(n)),n},this.listener=function(){e.set(e.getValue())},this.on("change",this.listener),t.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){this.el.checked=C(e,this.getValue())}},ar={bind:function(){var e=this,t=this,n=this.el;this.forceUpdate=function(){t._watcher&&t.update(t._watcher.get())};var i=this.multiple=n.hasAttribute("multiple");this.listener=function(){var e=pt(n,i);e=t.params.number?In(e)?e.map(l):l(e):e,t.set(e)},this.on("change",this.listener);var o=pt(n,i,!0);(i&&o.length||!i&&null!==o)&&(this.afterBind=this.listener),this.vm.$on("hook:attached",function(){oi(e.forceUpdate)}),H(n)||oi(this.forceUpdate)},update:function(e){var t=this.el;t.selectedIndex=-1;for(var n,i,o=this.multiple&&In(e),r=t.options,s=r.length;s--;)n=r[s],i=n.hasOwnProperty("_value")?n._value:n.value,n.selected=o?dt(e,i)>-1:C(e,i)},unbind:function(){this.vm.$off("hook:attached",this.forceUpdate)}},cr={bind:function(){function e(){var e=n.checked;return e&&n.hasOwnProperty("_trueValue")?n._trueValue:!e&&n.hasOwnProperty("_falseValue")?n._falseValue:e}var t=this,n=this.el;this.getValue=function(){return n.hasOwnProperty("_value")?n._value:t.params.number?l(n.value):n.value},this.listener=function(){var i=t._watcher.value;if(In(i)){var o=t.getValue();n.checked?x(i,o)<0&&i.push(o):i.$remove(o)}else t.set(e())},this.on("change",this.listener),n.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){var t=this.el;In(e)?t.checked=x(e,this.getValue())>-1:t.hasOwnProperty("_trueValue")?t.checked=C(e,t._trueValue):t.checked=!!e}},lr={text:rr,radio:sr,select:ar,checkbox:cr},hr={priority:qo,twoWay:!0,handlers:lr,params:["lazy","number","debounce"],bind:function(){this.checkFilters(),this.hasRead&&!this.hasWrite&&"production"!==n.env.NODE_ENV&&Di('It seems you are using a read-only filter with v-model="'+this.descriptor.raw+'". You might want to use a two-way filter to ensure correct behavior.',this.vm);var e,t=this.el,i=t.tagName;if("INPUT"===i)e=lr[t.type]||lr.text;else if("SELECT"===i)e=lr.select;else{if("TEXTAREA"!==i)return void("production"!==n.env.NODE_ENV&&Di("v-model does not support element type: "+i,this.vm));e=lr.text}t.__v_model=this,e.bind.call(this),this.update=e.update,this._unbind=e.unbind},checkFilters:function(){var e=this.filters;if(e)for(var t=e.length;t--;){var n=ge(this.vm.$options,"filters",e[t].name);("function"==typeof n||n.read)&&(this.hasRead=!0),n.write&&(this.hasWrite=!0)}},unbind:function(){this.el.__v_model=null,this._unbind&&this._unbind()}},ur={esc:27,tab:9,enter:13,space:32,"delete":[8,46],up:38,left:37,right:39,down:40},fr={priority:Wo,acceptStatement:!0,keyCodes:ur,bind:function(){if("IFRAME"===this.el.tagName&&"load"!==this.arg){var e=this;this.iframeBind=function(){G(e.el.contentWindow,e.arg,e.handler,e.modifiers.capture)},this.on("load",this.iframeBind)}},update:function(e){if(this.descriptor.raw||(e=function(){}),"function"!=typeof e)return void("production"!==n.env.NODE_ENV&&Di("v-on:"+this.arg+'="'+this.expression+'" expects a function value, got '+e,this.vm));this.modifiers.stop&&(e=yt(e)),this.modifiers.prevent&&(e=_t(e)),this.modifiers.self&&(e=bt(e));var t=Object.keys(this.modifiers).filter(function(e){return"stop"!==e&&"prevent"!==e&&"self"!==e&&"capture"!==e});t.length&&(e=vt(e,t)),this.reset(),this.handler=e,this.iframeBind?this.iframeBind():G(this.el,this.arg,this.handler,this.modifiers.capture)},reset:function(){var e=this.iframeBind?this.el.contentWindow:this.el;this.handler&&K(e,this.arg,this.handler)},unbind:function(){this.reset()}},pr=["-webkit-","-moz-","-ms-"],dr=["Webkit","Moz","ms"],vr=/!important;?$/,yr=Object.create(null),_r=null,br={deep:!0,update:function(e){"string"==typeof e?this.el.style.cssText=e:In(e)?this.handleObject(e.reduce(b,{})):this.handleObject(e||{})},handleObject:function(e){var t,n,i=this.cache||(this.cache={});for(t in i)t in e||(this.handleSingle(t,null),delete i[t]);for(t in e)n=e[t],n!==i[t]&&(i[t]=n,this.handleSingle(t,n))},handleSingle:function(e,t){if(e=mt(e))if(null!=t&&(t+=""),t){var i=vr.test(t)?"important":"";i?("production"!==n.env.NODE_ENV&&Di("It's probably a bad idea to use !important with inline rules. This feature will be deprecated in a future version of Vue."),t=t.replace(vr,"").trim(),this.el.style.setProperty(e.kebab,t,i)):this.el.style[e.camel]=t}else this.el.style[e.camel]=""}},mr="http://www.w3.org/1999/xlink",gr=/^xlink:/,Er=/^v-|^:|^@|^(?:is|transition|transition-mode|debounce|track-by|stagger|enter-stagger|leave-stagger)$/,wr=/^(?:value|checked|selected|muted)$/,xr=/^(?:draggable|contenteditable|spellcheck)$/,kr={value:"_value","true-value":"_trueValue","false-value":"_falseValue"},Cr={priority:Jo,bind:function(){var e=this.arg,t=this.el.tagName;e||(this.deep=!0);var i=this.descriptor,o=i.interp;if(o&&(i.hasOneTime&&(this.expression=S(o,this._scope||this.vm)),(Er.test(e)||"name"===e&&("PARTIAL"===t||"SLOT"===t))&&("production"!==n.env.NODE_ENV&&Di(e+'="'+i.raw+'": attribute interpolation is not allowed in Vue.js directives and special attributes.',this.vm),this.el.removeAttribute(e),this.invalid=!0),"production"!==n.env.NODE_ENV)){var r=e+'="'+i.raw+'": ';"src"===e&&Di(r+'interpolation in "src" attribute will cause a 404 request. Use v-bind:src instead.',this.vm),"style"===e&&Di(r+'interpolation in "style" attribute will cause the attribute to be discarded in Internet Explorer. Use v-bind:style instead.',this.vm)}},update:function(e){if(!this.invalid){var t=this.arg;this.arg?this.handleSingle(t,e):this.handleObject(e||{})}},handleObject:br.handleObject,handleSingle:function(e,t){var n=this.el,i=this.descriptor.interp;if(this.modifiers.camel&&(e=f(e)),!i&&wr.test(e)&&e in n){var o="value"===e&&null==t?"":t;n[e]!==o&&(n[e]=o)}var r=kr[e];if(!i&&r){n[r]=t;var s=n.__v_model;s&&s.listener()}return"value"===e&&"TEXTAREA"===n.tagName?void n.removeAttribute(e):void(xr.test(e)?n.setAttribute(e,t?"true":"false"):null!=t&&t!==!1?"class"===e?(n.__v_trans&&(t+=" "+n.__v_trans.id+"-transition"),X(n,t)):gr.test(e)?n.setAttributeNS(mr,e,t===!0?"":t):n.setAttribute(e,t===!0?"":t):n.removeAttribute(e))}},$r={priority:Yo,bind:function(){if(this.arg){var e=this.id=f(this.arg),t=(this._scope||this.vm).$els;r(t,e)?t[e]=this.el:Ne(t,e,this.el)}},unbind:function(){var e=(this._scope||this.vm).$els;e[this.id]===this.el&&(e[this.id]=null)}},Nr={bind:function(){"production"!==n.env.NODE_ENV&&Di("v-ref:"+this.arg+" must be used on a child component. Found on <"+this.el.tagName.toLowerCase()+">.",this.vm)}},Or={bind:function(){var e=this.el;this.vm.$once("pre-hook:compiled",function(){e.removeAttribute("v-cloak")})}},Ar={text:So,html:Bo,"for":nr,"if":ir,show:or,model:hr,on:fr,bind:Cr,el:$r,ref:Nr,cloak:Or},Tr={deep:!0,update:function(e){e?"string"==typeof e?this.setClass(e.trim().split(/\s+/)):this.setClass(Et(e)):this.cleanup()},setClass:function(e){this.cleanup(e);for(var t=0,n=e.length;t<n;t++){var i=e[t];i&&wt(this.el,i,ee)}this.prevKeys=e},cleanup:function(e){var t=this.prevKeys;if(t)for(var n=t.length;n--;){var i=t[n];(!e||e.indexOf(i)<0)&&wt(this.el,i,te)}}},jr={priority:Go,params:["keep-alive","transition-mode","inline-template"],bind:function(){this.el.__vue__?"production"!==n.env.NODE_ENV&&Di('cannot mount component "'+this.expression+'" on already mounted element: '+this.el):(this.keepAlive=this.params.keepAlive,this.keepAlive&&(this.cache={}),this.params.inlineTemplate&&(this.inlineTemplate=ne(this.el,!0)),this.pendingComponentCb=this.Component=null,this.pendingRemovals=0,this.pendingRemovalCb=null,this.anchor=se("v-component"),Y(this.el,this.anchor),this.el.removeAttribute("is"),this.el.removeAttribute(":is"),this.descriptor.ref&&this.el.removeAttribute("v-ref:"+d(this.descriptor.ref)),this.literal&&this.setComponent(this.expression))},update:function(e){this.literal||this.setComponent(e)},setComponent:function(e,t){if(this.invalidatePending(),e){var n=this;this.resolveComponent(e,function(){n.mountComponent(t)})}else this.unbuild(!0),this.remove(this.childVM,t),this.childVM=null},resolveComponent:function(e,t){var n=this;this.pendingComponentCb=k(function(i){n.ComponentName=i.options.name||("string"==typeof e?e:null),n.Component=i,t()}),this.vm._resolveComponent(e,this.pendingComponentCb)},mountComponent:function(e){this.unbuild(!0);var t=this,n=this.Component.options.activate,i=this.getCached(),o=this.build();n&&!i?(this.waitingFor=o,xt(n,o,function(){t.waitingFor===o&&(t.waitingFor=null,t.transition(o,e))})):(i&&o._updateRef(),this.transition(o,e))},invalidatePending:function(){this.pendingComponentCb&&(this.pendingComponentCb.cancel(),this.pendingComponentCb=null)},build:function(e){var t=this.getCached();if(t)return t;if(this.Component){var i={name:this.ComponentName,el:Xe(this.el),template:this.inlineTemplate,parent:this._host||this.vm,_linkerCachable:!this.inlineTemplate,_ref:this.descriptor.ref,_asComponent:!0,_isRouterView:this._isRouterView,_context:this.vm,_scope:this._scope,_frag:this._frag};e&&b(i,e);var o=new this.Component(i);return this.keepAlive&&(this.cache[this.Component.cid]=o),"production"!==n.env.NODE_ENV&&this.el.hasAttribute("transition")&&o._isFragment&&Di("Transitions will not work on a fragment instance. Template: "+o.$options.template,o),o}},getCached:function(){return this.keepAlive&&this.cache[this.Component.cid]},unbuild:function(e){this.waitingFor&&(this.keepAlive||this.waitingFor.$destroy(),this.waitingFor=null);var t=this.childVM;return!t||this.keepAlive?void(t&&(t._inactive=!0,t._updateRef(!0))):void t.$destroy(!1,e)},remove:function(e,t){var n=this.keepAlive;if(e){this.pendingRemovals++,this.pendingRemovalCb=t;var i=this;e.$remove(function(){i.pendingRemovals--,n||e._cleanup(),!i.pendingRemovals&&i.pendingRemovalCb&&(i.pendingRemovalCb(),i.pendingRemovalCb=null)})}else t&&t()},transition:function(e,t){var n=this,i=this.childVM;switch(i&&(i._inactive=!0),e._inactive=!1,this.childVM=e,n.params.transitionMode){case"in-out":e.$before(n.anchor,function(){n.remove(i,t)});break;case"out-in":n.remove(i,function(){e.$before(n.anchor,t)});break;default:n.remove(i),e.$before(n.anchor,t)}},unbind:function(){if(this.invalidatePending(),this.unbuild(),this.cache){for(var e in this.cache)this.cache[e].$destroy();this.cache=null}}},Dr=ji._propBindingModes,Sr={},Vr=/^[$_a-zA-Z]+[\w$]*$/,Pr=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\[[^\[\]]+\])*$/,Rr=ji._propBindingModes,Fr={bind:function(){var e=this.vm,t=e._context,n=this.descriptor.prop,i=n.path,o=n.parentPath,r=n.mode===Rr.TWO_WAY,s=this.parentWatcher=new Qe(t,o,function(t){Ot(e,n,t)},{twoWay:r,filters:n.filters,scope:this._scope});if(Nt(e,n,s.value),r){var a=this;e.$once("pre-hook:created",function(){a.childWatcher=new Qe(e,i,function(e){s.set(e)},{sync:!0})})}},unbind:function(){this.parentWatcher.teardown(),this.childWatcher&&this.childWatcher.teardown()}},Mr=[],Lr=!1,Ir="transition",Hr="animation",zr=Zn+"Duration",Br=ei+"Duration",Ur=zn&&window.requestAnimationFrame,Wr=Ur?function(e){Ur(function(){Ur(e)})}:function(e){setTimeout(e,50)},qr=Ft.prototype;qr.enter=function(e,t){this.cancelPending(),this.callHook("beforeEnter"),this.cb=t,ee(this.el,this.enterClass),e(),this.entered=!1,this.callHookWithCb("enter"),this.entered||(this.cancel=this.hooks&&this.hooks.enterCancelled,Pt(this.enterNextTick))},qr.enterNextTick=function(){var e=this;this.justEntered=!0,Wr(function(){e.justEntered=!1});var t=this.enterDone,n=this.getCssTransitionType(this.enterClass);this.pendingJsCb?n===Ir&&te(this.el,this.enterClass):n===Ir?(te(this.el,this.enterClass),this.setupCssCb(Xn,t)):n===Hr?this.setupCssCb(ti,t):t()},qr.enterDone=function(){this.entered=!0,this.cancel=this.pendingJsCb=null,te(this.el,this.enterClass),this.callHook("afterEnter"),this.cb&&this.cb()},qr.leave=function(e,t){this.cancelPending(),this.callHook("beforeLeave"),this.op=e,this.cb=t,ee(this.el,this.leaveClass),this.left=!1,this.callHookWithCb("leave"),this.left||(this.cancel=this.hooks&&this.hooks.leaveCancelled,this.op&&!this.pendingJsCb&&(this.justEntered?this.leaveDone():Pt(this.leaveNextTick)))},qr.leaveNextTick=function(){var e=this.getCssTransitionType(this.leaveClass);if(e){var t=e===Ir?Xn:ti;this.setupCssCb(t,this.leaveDone)}else this.leaveDone()},qr.leaveDone=function(){this.left=!0,this.cancel=this.pendingJsCb=null,this.op(),te(this.el,this.leaveClass),this.callHook("afterLeave"),this.cb&&this.cb(),this.op=null},qr.cancelPending=function(){this.op=this.cb=null;var e=!1;this.pendingCssCb&&(e=!0,K(this.el,this.pendingCssEvent,this.pendingCssCb),this.pendingCssEvent=this.pendingCssCb=null),this.pendingJsCb&&(e=!0,this.pendingJsCb.cancel(),this.pendingJsCb=null),e&&(te(this.el,this.enterClass),te(this.el,this.leaveClass)),this.cancel&&(this.cancel.call(this.vm,this.el),this.cancel=null)},qr.callHook=function(e){this.hooks&&this.hooks[e]&&this.hooks[e].call(this.vm,this.el)},qr.callHookWithCb=function(e){var t=this.hooks&&this.hooks[e];t&&(t.length>1&&(this.pendingJsCb=k(this[e+"Done"])),t.call(this.vm,this.el,this.pendingJsCb))},qr.getCssTransitionType=function(e){if(!(!Xn||document.hidden||this.hooks&&this.hooks.css===!1||Mt(this.el))){var t=this.type||this.typeCache[e];if(t)return t;var n=this.el.style,i=window.getComputedStyle(this.el),o=n[zr]||i[zr];if(o&&"0s"!==o)t=Ir;else{var r=n[Br]||i[Br];r&&"0s"!==r&&(t=Hr)}return t&&(this.typeCache[e]=t),t}},qr.setupCssCb=function(e,t){this.pendingCssEvent=e;var n=this,i=this.el,o=this.pendingCssCb=function(r){r.target===i&&(K(i,e,o),n.pendingCssEvent=n.pendingCssCb=null,!n.pendingJsCb&&t&&t())};G(i,e,o)};var Jr={priority:Qo,update:function(e,t){var n=this.el,i=ge(this.vm.$options,"transitions",e);e=e||"v",t=t||"v",n.__v_trans=new Ft(n,e,i,this.vm),te(n,t+"-transition"),ee(n,e+"-transition")}},Qr={style:br,"class":Tr,component:jr,prop:Fr,transition:Jr},Yr=/^v-bind:|^:/,Gr=/^v-on:|^@/,Kr=/^v-([^:]+)(?:$|:(.*)$)/,Zr=/\.[^\.]+/g,Xr=/^(v-bind:|:)?transition$/,es=1e3,ts=2e3;on.terminal=!0;var ns=/[^\w\-:\.]/,is=Object.freeze({compile:Lt,compileAndLinkProps:Ut,compileRoot:Wt,transclude:un,resolveSlots:vn}),os=/^v-on:|^@/;gn.prototype._bind=function(){var e=this.name,t=this.descriptor;if(("cloak"!==e||this.vm._isCompiled)&&this.el&&this.el.removeAttribute){var n=t.attr||"v-"+e;this.el.removeAttribute(n)}var i=t.def;if("function"==typeof i?this.update=i:b(this,i),this._setupParams(),this.bind&&this.bind(),this._bound=!0,this.literal)this.update&&this.update(t.raw);else if((this.expression||this.modifiers)&&(this.update||this.twoWay)&&!this._checkStatement()){var o=this;this.update?this._update=function(e,t){o._locked||o.update(e,t)}:this._update=mn;var r=this._preProcess?y(this._preProcess,this):null,s=this._postProcess?y(this._postProcess,this):null,a=this._watcher=new Qe(this.vm,this.expression,this._update,{filters:this.filters,twoWay:this.twoWay,deep:this.deep,preProcess:r,postProcess:s,scope:this._scope});this.afterBind?this.afterBind():this.update&&this.update(a.value)}},gn.prototype._setupParams=function(){if(this.params){var e=this.params;this.params=Object.create(null);for(var t,n,i,o=e.length;o--;)t=d(e[o]),i=f(t),n=B(this.el,t),null!=n?this._setupParamWatcher(i,n):(n=z(this.el,t),null!=n&&(this.params[i]=""===n||n))}},gn.prototype._setupParamWatcher=function(e,t){var n=this,i=!1,o=(this._scope||this.vm).$watch(t,function(t,o){if(n.params[e]=t,i){var r=n.paramWatchers&&n.paramWatchers[e];r&&r.call(n,t,o)}else i=!0},{immediate:!0,user:!1});(this._paramUnwatchFns||(this._paramUnwatchFns=[])).push(o)},gn.prototype._checkStatement=function(){var e=this.expression;if(e&&this.acceptStatement&&!Be(e)){var t=ze(e).get,n=this._scope||this.vm,i=function(e){n.$event=e,t.call(n,n),n.$event=null};return this.filters&&(i=n._applyFilters(i,null,this.filters)),this.update(i),!0}},gn.prototype.set=function(e){this.twoWay?this._withLock(function(){this._watcher.set(e)}):"production"!==n.env.NODE_ENV&&Di("Directive.set() can only be used inside twoWaydirectives.")},gn.prototype._withLock=function(e){var t=this;t._locked=!0,e.call(t),oi(function(){t._locked=!1})},gn.prototype.on=function(e,t,n){G(this.el,e,t,n),(this._listeners||(this._listeners=[])).push([e,t])},gn.prototype._teardown=function(){if(this._bound){this._bound=!1,this.unbind&&this.unbind(),this._watcher&&this._watcher.teardown();var e,t=this._listeners;if(t)for(e=t.length;e--;)K(this.el,t[e][0],t[e][1]);var i=this._paramUnwatchFns;if(i)for(e=i.length;e--;)i[e]();"production"!==n.env.NODE_ENV&&this.el&&this.el._vue_directives.$remove(this),this.vm=this.el=this._watcher=this._listeners=null}};var rs=/[^|]\|[^|]/;Oe(Nn),_n(Nn),bn(Nn),En(Nn),wn(Nn),xn(Nn),kn(Nn),Cn(Nn),$n(Nn);var ss={priority:er,params:["name"],bind:function(){var e=this.params.name||"default",t=this.vm._slotContents&&this.vm._slotContents[e];t&&t.hasChildNodes()?this.compile(t.cloneNode(!0),this.vm._context,this.vm):this.fallback()},compile:function(e,t,n){if(e&&t){if(this.el.hasChildNodes()&&1===e.childNodes.length&&1===e.childNodes[0].nodeType&&e.childNodes[0].hasAttribute("v-if")){var i=document.createElement("template");i.setAttribute("v-else",""),i.innerHTML=this.el.innerHTML,i._context=this.vm,e.appendChild(i)}var o=n?n._scope:this._scope;this.unlink=t.$compile(e,n,o,this._frag)}e?Y(this.el,e):J(this.el)},fallback:function(){this.compile(ne(this.el,!0),this.vm)},unbind:function(){this.unlink&&this.unlink()}},as={priority:Ko,params:["name"],paramWatchers:{name:function(e){ir.remove.call(this),e&&this.insert(e)}},bind:function(){this.anchor=se("v-partial"),Y(this.el,this.anchor),this.insert(this.params.name)},insert:function(e){var t=ge(this.vm.$options,"partials",e,!0);t&&(this.factory=new ct(this.vm,t),ir.insert.call(this))},unbind:function(){this.frag&&this.frag.destroy()}},cs={slot:ss,partial:as},ls=nr._postProcess,hs=/(\d{3})(?=\d)/g,us={orderBy:Tn,filterBy:An,limitBy:On,json:{read:function(e,t){return"string"==typeof e?e:JSON.stringify(e,null,arguments.length>1?t:2)},write:function(e){try{return JSON.parse(e)}catch(t){return e}}},capitalize:function(e){return e||0===e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""},uppercase:function(e){return e||0===e?e.toString().toUpperCase():""},lowercase:function(e){return e||0===e?e.toString().toLowerCase():""},currency:function(e,t,n){if(e=parseFloat(e),!isFinite(e)||!e&&0!==e)return"";t=null!=t?t:"$",n=null!=n?n:2;var i=Math.abs(e).toFixed(n),o=n?i.slice(0,-1-n):i,r=o.length%3,s=r>0?o.slice(0,r)+(o.length>3?",":""):"",a=n?i.slice(-1-n):"",c=e<0?"-":"";return c+t+s+o.slice(r).replace(hs,"$1,")+a},pluralize:function(e){var t=_(arguments,1),n=t.length;if(n>1){var i=e%10-1;return i in t?t[i]:t[n-1]}return t[0]+(1===e?"":"s")},debounce:function(e,t){if(e)return t||(t=300),w(e,t)}};Dn(Nn),Nn.version="1.0.26",setTimeout(function(){ji.devtools&&(Bn?Bn.emit("init",Nn):"production"!==n.env.NODE_ENV&&zn&&/Chrome\/\d+/.test(window.navigator.userAgent)&&console.log("Download the Vue Devtools for a better development experience:\nhttps://github.com/vuejs/vue-devtools"))},0),e.exports=Nn}).call(t,function(){return this}(),n(19))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{items:{type:Array}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{dismissCallBack:function(){window.alert("alert dismissed.")},apiItems:[{name:"type",type:"String",isRequired:!0,"default":"n/a",desc:"The type of alert (error, info, success)"},{name:"dismissible",type:"Boolean",isRequired:!1,"default":!0,desc:"Is the alert dismissible?"},{name:"timeout",type:"Number",isRequired:!1,"default":-1,desc:"The duration alert stays on screen in ms"},{name:"onClosed",type:"Function",isRequired:!1,"default":"n/a",desc:"Callback function to be called when alert is closed."}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"label",type:"String",isRequired:!0,"default":"n/a",desc:"The lable of the panel"},{name:"isOpen",type:"Boolean",isRequired:!1,"default":!1,desc:"Is the panel open."}]}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"legalKey",type:"String",isRequired:!0,"default":"n/a",desc:"the key of legal in cms"},{name:"legalLang",type:"String",isRequired:!0,"default":"n/a",desc:"the language of legal in cms"},{name:"legalRegion",type:"String",isRequired:!0,"default":"n/a",desc:"the region of legal in cms"}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"overlayKey",type:"String",isRequired:!0,"default":"n/a",desc:"The key of the overlay. Used by the overlay opener directive to target the overley."}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){var e=this;return{stepTrackerCurrentStep:2,stepTrackerConfig:{isClickable:!0,steps:[{title:"Step A",link:"",onClickHandler:function(t){e.stepTrackerCurrentStep=0}},{title:"Step B",link:"",onClickHandler:function(t){e.stepTrackerCurrentStep=1}},{title:"Step C",link:"",onClickHandler:function(t){e.stepTrackerCurrentStep=2}}]},apiItems:[{name:"currentStep",type:"Integer",isRequired:!0,"default":0,desc:"todo"},{name:"config",type:"Object",isRequired:!0,"default":"n/a",desc:"todo"},{name:"config.title",type:"String",isRequired:!0,"default":"n/a",desc:"The title of the step"},{name:"config.link",type:"String",isRequired:!1,"default":"n/a",desc:"The link of the step. "},{name:"config.onClickHandler",type:"Function",isRequired:!1,"default":"n/a",desc:"The callback function when step is clicked."}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"label",type:"String",isRequired:!0,"default":"n/a",desc:"The lable of the tab"},{name:"isDisabled",type:"Boolean",isRequired:!1,"default":!1,desc:"Is the tab disabled or not. When set to true, the tab is not clickable."}]}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={data:function(){return{isVisible:!0}},props:{type:{type:String,required:!0},dismissible:{type:Boolean,"default":!0},timeout:{type:Number,"default":-1},onClosed:{type:Function}},methods:{dismiss:function(){var e=this;this.isVisible=!1,setTimeout(function(){e.onClosed&&e.onClosed.apply(e)})}},ready:function(){var e=this;this.timeout>=0&&setTimeout(function(){e.dismiss()},this.timeout)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{isOpen:{type:Boolean,"default":!1},label:{type:String,required:!0}},methods:{toggleOpen:function(e){this.isOpen=!this.isOpen}}}},function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),r=i(o),s=n(141),a=i(s),c=n(139),l=i(c),h=n(20),u=i(h);t["default"]={mixins:r["default"],directives:{setFocus:u["default"]},data:function(){return{indexedLegals:[],nonIndexedLegals:[],apiLang:null,apiRegion:null}},methods:{fetchLegals:function(t){return e("\n          "+this.$root.ligerEndPoint+"?lang="+this.apiLang+"&region="+this.apiRegion+"&html=true\n        ",{method:"POST",headers:{"Content-Type":"application/json",applicationKey:this.$root.ligerApplicationKey},body:JSON.stringify({keys:t})})},appendResponseToLegalContainer:function(e,t){var n=function(e,t){t.forEach(function(t){var n=e.findIndex(function(e){return e.key===t.key});n>-1&&e.$set(n,{content:t.content,key:t.key})})};"indexed"===e?n(this.indexedLegals,t):n(this.nonIndexedLegals,t)},getLegals:function(){return l["default"].call(this,function(){var e=this,t=this.indexedLegals.map(function(e){return e.key}),n=this.nonIndexedLegals.map(function(e){return e.key});t.length>0&&this.fetchLegals(t).then(this.parseJSON).then(function(t){e.appendResponseToLegalContainer("indexed",t)}),n.length>0&&this.fetchLegals(n).then(this.parseJSON).then(function(t){e.appendResponseToLegalContainer("nonIndexed",t)})},10)}()},events:{"legal::click":function(e){var t=this,n=this.indexedLegals.findIndex(function(t){return t.key===e});n>-1&&this.indexedLegals.forEach(function(e,i){i!==n?e.isSelected=!1:t.indexedLegals.$set(i,Object.assign({},t.indexedLegals[i],{isSelected:!0}))})},"legal::init":function(e){this.apiLang=e.lang,this.apiRegion=e.region;var t=e.isNonIndexed?this.nonIndexedLegals:this.indexedLegals,n=(0,a["default"])(t,function(t){return t.key===e.key});n<0&&(n=t.push(e)-1,this.getLegals()),e.isNonIndexed||this.rootBroadcast("legal::udpate",{key:e.key,isNonIndexed:e.isNonIndexed,index:n})}}}}).call(t,n(77))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),r=i(o),s=n(36),a=i(s);t["default"]={mixins:r["default"],data:function(){return{legalCounter:null}},props:{legalKey:{type:String,required:!0},isNonIndexed:{type:Boolean,"default":!1},legalLang:{type:String,required:!0},legalRegion:{type:String,required:!0}},events:{"legal::udpate":function(e){this.isNonIndexed||e.key!==this.legalKey||(this.legalCounter=e.index+1)}},methods:{clickHandler:function(){this.rootBroadcast("legal::click",this.legalKey)}},beforeCompile:function(){},ready:function(){var e=this;(0,a["default"])(function(){e.rootBroadcast("legal::init",{key:e.legalKey,lang:e.legalLang,region:e.legalRegion,isNonIndexed:e.isNonIndexed})})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=27;t["default"]={props:{isVisible:{type:Boolean,"default":!1}},watch:{isVisible:function(e){var t=window.document.body,n="no-scroll";e?t.classList?t.classList.add(n):t.className+=" "+n:t.classList?t.classList.remove(n):t.className=t.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")}},events:{"overlayContainer::open":function(){this.isVisible=!0},"overlayContainer::close":function(){this.isVisible=!1}},ready:function(){var e=this;window.document.addEventListener("keydown",function(t){t=t||window.event,t.keyCode===n&&(e.isVisible=!1)})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={data:function(){return{isVisible:!1}},props:{overlayKey:{type:String}},methods:{closeOverlay:function(){this.$dispatch("overlayContainer::close")}},events:{"overlay::open":function(e){return e===this.overlayKey?void(this.isVisible=!0):void(this.isVisible=!1)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{config:{type:Object},currentStep:{type:Number,"default":0}},methods:{clickHandler:function(e,t,n){t.onClickHandler&&(e.preventDefault(),this.currentStep>n&&t.onClickHandler())}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{label:{type:String},isDisabled:{type:Boolean,"default":!1}},data:function(){return{tabIndex:0,isVisible:!1}},computed:{isVisible:function(){return this.$parent.activeTabIndex===this.tabIndex}},created:function(){this.$parent.tabs.push({label:this.label,isDisabled:this.isDisabled})},ready:function(){var e=this;this.$parent.$children.forEach(function(t,n){t.$el===e.$el&&(e.tabIndex=n)})},beforeDestroy:function(){
this.$parent.tabs.splice(this.tabIndex,1)}}},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n({props:{activeTabIndex:{type:Number,"default":0}},methods:{isActive:function(e){return activeTabIndex===e}},data:function(){return{tabs:[]}}},"methods",{handleTabListClick:function(e,t){t.isDisabled||(this.activeTabIndex=e)}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(173),r=i(o),s=n(176),a=i(s),c=n(177),l=i(c),h=n(174),u=i(h),f=n(175),p=i(f),d=n(172),v=i(d),y=n(171),_=i(y);t["default"]={"/":{component:r["default"]},"/alert":{component:{template:"<alert-page></alert-page>",components:{AlertPage:_["default"]}}},"/step-tracker":{component:{template:"<step-tracker-page></step-tracker-page>",components:{StepTrackerPage:a["default"]}}},"/tabs":{component:{template:"<tabs-page></tabs-page>",components:{TabsPage:l["default"]}}},"/legal":{component:{template:"<legal-page></legal-page>",components:{LegalPage:u["default"]}}},"/overlay":{component:{template:"<overlay-page></overlay-page>",components:{OverlayPage:p["default"]}}},"/collapsable-panel":{component:{template:"<collapsable-panel-page></collapsable-panel-page>",components:{CollapsablePanelPage:v["default"]}}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={isLiteral:!0,eventHandler:function(e){e.preventDefault(),this.vm.$root.$broadcast("overlay::open",this.expression),this.vm.$root.$broadcast("overlayContainer::open")},bind:function(){this.el.addEventListener("click",this.eventHandler.bind(this))},unbind:function(){this.el.removeEventListener("click",this.eventHandler.bind(this))}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var o=n(62),r=i(o),s=n(20),a=i(s),c=n(184),l=i(c),h=n(182),u=i(h),f=n(183),p=i(f),d=n(181),v=i(d),y=n(180),_=i(y),b=n(186),m=i(b),g=n(185),E=i(g),w=n(179),x=i(w),k=n(178),C=i(k),$={StepTracker:l["default"],OverlayContainer:u["default"],Overlay:p["default"],LegalCounter:v["default"],LegalContainer:_["default"],Tabs:m["default"],Tab:E["default"],CollapsablePanel:x["default"],Alert:C["default"]},N={overlayOpener:r["default"],setFocus:a["default"]};e.exports=function(e){for(var t in $)e.component(t,$[t]);for(var n in N)e.directive(n,N[n])}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={methods:{rootBroadcast:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.$broadcast.apply(this.$root,t)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={methods:{parseJSON:function(e){return e.json()}}}},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.sg_c-api-table{width:100%}.sg_c-api-table tr{-webkit-box-flex:1;-ms-flex:1;flex:1}.sg_c-api-table th{background-color:#eee}.sg_c-api-table td{text-align:center}',""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".sg_c-nav{display:block;position:fixed;left:0;width:25rem;height:100%;border-right:.1rem solid #e2e2e2;padding:2rem;overflow-x:hidden;overflow-y:auto;background-color:#fff}.sg_c-nav__section{font-family:Telus Medium,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:1.2rem;border-bottom:.1rem solid #e2e2e2;padding-top:1rem;padding-bottom:.5rem;margin:1rem 0}.sg_c-nav__list-item{padding:5px 0}.sg_c-nav__link:hover{color:#8c68a6}.sg_c-nav__link--active{color:#57a708}body{background-color:#f5f6f7}.sg_c-site__main{margin-left:25rem}.sg_c-demo{margin:20px 0}.sg_c-demo__container{background-color:#fff;overflow:hidden;border-radius:5px;border:1px solid #eee;padding:25px;margin:20px 0}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.fade-transition{-webkit-transition:all .3s ease;transition:all .3s ease}.fade-enter,.fade-leave{opacity:0}.c-alert{position:relative;padding:7px 15px;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.c-alert--info{background-color:#333;border-color:#000;color:#fff}.c-alert--info button{color:#fff}.c-alert--success{background-color:#e6ffcc;border-color:#9f3;color:#408000}.c-alert--error{background-color:#f8dde3;border-color:#f2c0ca;color:#c81235}.c-alert__close-button{position:absolute;top:0;right:10px;-webkit-appearance:none;padding:0;cursor:pointer;background:0 0;border:0;font-size:2.5rem;opacity:.2}.c-alert__close-button:hover{opacity:.3}',""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.c-collapsable-panel{border:1px solid #e2e2e2;box-shadow:0 1px 3px 1px #e2e2e2}.c-collapsable-panel__header{cursor:pointer;padding:10px 15px;position:relative}.c-collapsable-panel__header:after{position:absolute;right:1em;top:.75em;font-size:.75em;font-family:Telus Icon;content:\'\\E114\';color:#57a708}.c-collapsable-panel__header--open:after{content:\'\\E117\'}.c-collapsable-panel__body{border-top:1px solid #e2e2e2;max-height:0;padding:0 15px;-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out;overflow:hidden;opacity:0}.c-collapsable-panel__body--open{opacity:1;padding:15px;max-height:9999px}',""]);
},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-legal-container__ordered-list{margin-top:10px;margin-bottom:20px;list-style:decimal;list-style-type:decimal;padding-left:20px}.c-legal-container__unordered-list{margin-top:10px;margin-bottom:20px;padding-left:20px;list-style:none;list-style-type:none}.c-legal-container__list-item{line-height:19px;margin-bottom:10px;padding:10px}.c-legal-container__list-item--active{background-color:#f9f1ff}.c-legal-container__list-item a{color:#49166d;text-decoration:none;border-bottom:1px dotted;padding-bottom:1px}.c-legal-container__list-item a:hover{color:#8c68a6}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-legal-sup{font-size:.75em;line-height:0;vertical-align:super;text-decoration:none;top:0!important;cursor:pointer}.c-legal-sup a{color:#49166d}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".no-scroll{overflow-x:hidden;overflow:hidden;overflow-y:hidden;position:relative;height:100%}.c-overlay-container__curtain{opacity:0;-webkit-transition:opacity 1.3s ease-in-out;transition:opacity 1.3s ease-in-out}.c-overlay-container__curtain--active{opacity:1;background:rgba(0,0,0,.55);position:fixed;top:0;left:0;right:0;bottom:0}.c-overlay-container__overlays{position:fixed;right:0;top:0;bottom:0;background-color:rgba(0,0,0,.5);-webkit-transform:translateX(100%);transform:translateX(100%);-webkit-transition:1s ease-in-out;transition:1s ease-in-out}@media screen and (max-width:599px){.c-overlay-container__overlays{width:100%}}@media screen and (min-width:600px){.c-overlay-container__overlays{width:66%}}.c-overlay-container__overlays--active{-webkit-transform:translateX(0);transform:translateX(0);z-index:99999}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-overlay{height:100%;width:100%;background-color:#fff}.c-overlay__header{padding:20px;position:fixed;top:0;height:75px;width:100%;border-bottom:1px solid #e2e2e2;background-color:#f5f6f7}.c-overlay__close-button{cursor:pointer;background:0;border:0;position:absolute;top:20px;right:20px;font-family:Telus Icon;font-size:2em;color:#49166d}.c-overlay__close-button:before{content:'\\E106'}.c-overlay__body{position:fixed;-webkit-overflow-scrolling:touch;overflow-y:scroll;top:75px;bottom:0;width:100%;padding:20px 20px 50px}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.c-step-tracker__icon,.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.c-step-tracker{list-style:none;padding:0;position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin:1rem -1.5rem}@media screen and (min-width:600px){.c-step-tracker{padding-bottom:2.5rem;margin:1rem 0}}.c-step-tracker__step{width:100%;position:relative;text-align:center}.c-step-tracker__step:after,.c-step-tracker__step:before{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:calc(50% - 1.4rem);content:\' \';border-bottom:.6rem solid #aeaeae}.c-step-tracker__step:before{left:0}.c-step-tracker__step:after{right:0}.c-step-tracker .c-step-tracker__step:first-child:before,.c-step-tracker .c-step-tracker__step:last-child:after{content:none}.c-step-tracker__label{position:absolute;bottom:-3rem;left:0;font-size:1.7rem;width:100%;height:2.5rem;font-family:Telus Regular,Helvetica Neue,Helvetica,Arial,sans-serif;color:#666}@media screen and (max-width:599px){.c-step-tracker__label{display:none}}.c-step-tracker__step--active .c-step-tracker__label{font-family:Telus Medium,Helvetica Neue,Helvetica,Arial,sans-serif;color:#408000}.c-step-tracker__icon{font-size:3rem;color:#aeaeae}.c-step-tracker__icon:before{content:"\\E001"}.c-step-tracker__step--active .c-step-tracker__icon:before{content:"\\E002"}.c-step-tracker__setp--clickable a{cursor:pointer}.c-step-tracker__step--complete:after{border-bottom:.6rem solid #57a708}.c-step-tracker__step--complete .c-step-tracker__icon:before{content:"\\E110"}.c-step-tracker__step--active .c-step-tracker__icon:before,.c-step-tracker__step--complete .c-step-tracker__icon:before{color:#57a708}.c-step-tracker__step--complete+.c-step-tracker__step--active:before,.c-step-tracker__step--complete+.c-step-tracker__step--complete:before{border-bottom:.6rem solid #57a708}.c-step-tracker-mobile-label{font-size:1.7rem;text-align:center;font-family:Telus Regular,Helvetica Neue,Helvetica,Arial,sans-serif;color:#666}@media screen and (min-width:600px){.c-step-tracker-mobile-label{display:none}}.c-step-tracker-mobile-label__step{font-family:Telus Medium,Helvetica Neue,Helvetica,Arial,sans-serif;color:#408000}',""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-tabs__header{list-style:none;padding:0;margin:0;display:-webkit-box;display:-ms-flexbox;display:flex}.c-tabs__header-item{margin-top:2px;height:45px;padding:0 2px;-webkit-box-flex:1;-ms-flex:1;flex:1}.c-tabs__header-item a{background-color:#e2e2e2;text-decoration:none;padding:13px 20px;color:#49166d;display:block}.c-tabs__header-item--active{margin-top:1px;height:46px;background-color:#fff;border-top:1px solid #e2e2e2;border-left:1px solid #e2e2e2;border-right:1px solid #e2e2e2}.c-tabs__header-item--active a{background-color:#fff;color:#333}.c-tabs__header-item--disabled a{background-color:#f5f6f7;color:#aeaeae;cursor:not-allowed}.c-tabs__body{background-color:#fff;border:1px solid #e2e2e2;margin-top:-1px;padding:20px}.c-tabs__pane{display:block;border-top:none;opacity:0;height:0;overflow:hidden;padding:0 5px;-webkit-transition:all .5s ease-out;transition:all .5s ease-out}.c-tabs__pane--active{opacity:1;padding:5px;height:auto}",""])},function(e,t,n){var i;(function(e,o,r){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
	 * @version   3.2.1
	 */
(function(){"use strict";function s(e){return"function"==typeof e||"object"==typeof e&&null!==e}function a(e){return"function"==typeof e}function c(e){G=e}function l(e){ee=e}function h(){return function(){e.nextTick(v)}}function u(){return function(){Y(v)}}function f(){var e=0,t=new ie(v),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function p(){var e=new MessageChannel;return e.port1.onmessage=v,function(){e.port2.postMessage(0)}}function d(){return function(){setTimeout(v,1)}}function v(){for(var e=0;e<X;e+=2){var t=se[e],n=se[e+1];t(n),se[e]=void 0,se[e+1]=void 0}X=0}function y(){try{var e=n(201);return Y=e.runOnLoop||e.runOnContext,u()}catch(t){return d()}}function _(e,t){var n=this,i=new this.constructor(m);void 0===i[le]&&M(i);var o=n._state;if(o){var r=arguments[o-1];ee(function(){P(o,i,r,n._result)})}else j(n,i,e,t);return i}function b(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(m);return N(n,e),n}function m(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function E(){return new TypeError("A promises callback cannot return that same promise.")}function w(e){try{return e.then}catch(t){return pe.error=t,pe}}function x(e,t,n,i){try{e.call(t,n,i)}catch(o){return o}}function k(e,t,n){ee(function(e){var i=!1,o=x(n,t,function(n){i||(i=!0,t!==n?N(e,n):A(e,n))},function(t){i||(i=!0,T(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&o&&(i=!0,T(e,o))},e)}function C(e,t){t._state===ue?A(e,t._result):t._state===fe?T(e,t._result):j(t,void 0,function(t){N(e,t)},function(t){T(e,t)})}function $(e,t,n){t.constructor===e.constructor&&n===ae&&constructor.resolve===ce?C(e,t):n===pe?T(e,pe.error):void 0===n?A(e,t):a(n)?k(e,t,n):A(e,t)}function N(e,t){e===t?T(e,g()):s(t)?$(e,t,w(t)):A(e,t)}function O(e){e._onerror&&e._onerror(e._result),D(e)}function A(e,t){e._state===he&&(e._result=t,e._state=ue,0!==e._subscribers.length&&ee(D,e))}function T(e,t){e._state===he&&(e._state=fe,e._result=t,ee(O,e))}function j(e,t,n,i){var o=e._subscribers,r=o.length;e._onerror=null,o[r]=t,o[r+ue]=n,o[r+fe]=i,0===r&&e._state&&ee(D,e)}function D(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i,o,r=e._result,s=0;s<t.length;s+=3)i=t[s],o=t[s+n],i?P(n,i,o,r):o(r);e._subscribers.length=0}}function S(){this.error=null}function V(e,t){try{return e(t)}catch(n){return de.error=n,de}}function P(e,t,n,i){var o,r,s,c,l=a(n);if(l){if(o=V(n,i),o===de?(c=!0,r=o.error,o=null):s=!0,t===o)return void T(t,E())}else o=i,s=!0;t._state!==he||(l&&s?N(t,o):c?T(t,r):e===ue?A(t,o):e===fe&&T(t,o))}function R(e,t){try{t(function(t){N(e,t)},function(t){T(e,t)})}catch(n){T(e,n)}}function F(){return ve++}function M(e){e[le]=ve++,e._state=void 0,e._result=void 0,e._subscribers=[]}function L(e){return new ge(this,e).promise}function I(e){var t=this;return new t(Z(e)?function(n,i){for(var o=e.length,r=0;r<o;r++)t.resolve(e[r]).then(n,i)}:function(e,t){t(new TypeError("You must pass an array to race."))})}function H(e){var t=this,n=new t(m);return T(n,e),n}function z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function B(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(e){this[le]=F(),this._result=this._state=void 0,this._subscribers=[],m!==e&&("function"!=typeof e&&z(),this instanceof U?R(this,e):B())}function W(e,t){this._instanceConstructor=e,this.promise=new e(m),this.promise[le]||M(this.promise),Z(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&A(this.promise,this._result))):T(this.promise,q())}function q(){return new Error("Array Methods must be provided an Array")}function J(){var e;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(e.Promise=me)}var Q;Q=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y,G,K,Z=Q,X=0,ee=function(e,t){se[X]=e,se[X+1]=t,X+=2,2===X&&(G?G(v):K())},te="undefined"!=typeof window?window:void 0,ne=te||{},ie=ne.MutationObserver||ne.WebKitMutationObserver,oe="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),re="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,se=new Array(1e3);K=oe?h():ie?f():re?p():void 0===te?y():d();var ae=_,ce=b,le=Math.random().toString(36).substring(16),he=void 0,ue=1,fe=2,pe=new S,de=new S,ve=0,ye=L,_e=I,be=H,me=U;U.all=ye,U.race=_e,U.resolve=ce,U.reject=be,U._setScheduler=c,U._setAsap=l,U._asap=ee,U.prototype={constructor:U,then:ae,"catch":function(e){return this.then(null,e)}};var ge=W;W.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===he&&n<e;n++)this._eachEntry(t[n],n)},W.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===ce){var o=w(e);if(o===ae&&e._state!==he)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===me){var r=new n(m);$(r,e,o),this._willSettleAt(r,t)}else this._willSettleAt(new n(function(t){t(e)}),t)}else this._willSettleAt(i(e),t)},W.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===he&&(this._remaining--,e===fe?T(i,n):this._result[t]=n),0===this._remaining&&A(i,this._result)},W.prototype._willSettleAt=function(e,t){var n=this;j(e,void 0,function(e){n._settledAt(ue,t,e)},function(e){n._settledAt(fe,t,e)})};var Ee=J,we={Promise:me,polyfill:Ee};n(199).amd?(i=function(){return we}.call(t,n,t,r),!(void 0!==i&&(r.exports=i))):"undefined"!=typeof r&&r.exports?r.exports=we:"undefined"!=typeof this&&(this.ES6Promise=we),Ee()}).call(this),r.exports=o.Promise}).call(t,n(19),function(){return this}(),n(200)(e))},function(e,t,n){(function(t){!function(e){"use strict";function n(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function o(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return y.iterable&&(t[Symbol.iterator]=function(){return t}),t}function r(e){this.map={},e instanceof r?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(e){return e.bodyUsed?t.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new t(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function c(e){var t=new FileReader;return t.readAsArrayBuffer(e),a(t)}function l(e){var t=new FileReader;return t.readAsText(e),a(t)}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(y.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(y.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob?(this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return t.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return t.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return t.resolve(this._bodyText)}):this.text=function(){var e=s(this);return e?e:t.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(e){var t=e.toUpperCase();return _.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var n=t.body;if(f.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new r(e.headers)),this.method=e.method,this.mode=e.mode,n||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new r(t.headers)),this.method=u(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(o))}}),t}function d(e){var t=new r,n=(e.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(e){var n=e.trim().split(":"),i=n.shift().trim(),o=n.join(":").trim();t.append(i,o)}),t}function v(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof r?t.headers:new r(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var y={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};r.prototype.append=function(e,t){e=n(e),t=i(t);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(t)},r.prototype["delete"]=function(e){delete this.map[n(e)]},r.prototype.get=function(e){var t=this.map[n(e)];return t?t[0]:null},r.prototype.getAll=function(e){return this.map[n(e)]||[]},r.prototype.has=function(e){return this.map.hasOwnProperty(n(e))},r.prototype.set=function(e,t){this.map[n(e)]=[i(t)]},r.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(i){e.call(t,i,n,this)},this)},this)},r.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),o(e)},r.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),o(e)},r.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),o(e)},y.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},h.call(f.prototype),h.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308];v.redirect=function(e,t){if(b.indexOf(t)===-1)throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=r,e.Request=f,e.Response=v,e.fetch=function(e,n){return new t(function(t,i){function o(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var r;r=f.prototype.isPrototypeOf(e)&&!n?e:new f(e,n);var s=new XMLHttpRequest;s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:d(s),url:o()},n="response"in s?s.response:s.responseText;t(new v(n,e))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.open(r.method,r.url,!0),"include"===r.credentials&&(s.withCredentials=!0),"responseType"in s&&y.blob&&(s.responseType="blob"),r.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send("undefined"==typeof r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),e.exports=self.fetch}).call(t,n(76))},function(e,t,n){var i=n(5),o=n(3),r=i(o,"DataView");e.exports=r},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(110),r=n(111),s=n(112),a=n(113),c=n(114);i.prototype.clear=o,i.prototype["delete"]=r,i.prototype.get=s,i.prototype.has=a,i.prototype.set=c,e.exports=i},function(e,t,n){var i=n(5),o=n(3),r=i(o,"Promise");e.exports=r},function(e,t,n){var i=n(5),o=n(3),r=i(o,"Set");e.exports=r},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.__data__=new o;++t<n;)this.add(e[t])}var o=n(17),r=n(130),s=n(131);i.prototype.add=i.prototype.push=r,i.prototype.has=s,e.exports=i},function(e,t,n){var i=n(3),o=i.Uint8Array;e.exports=o},function(e,t,n){var i=n(5),o=n(3),r=i(o,"WeakMap");e.exports=r},function(e,t){function n(e,t,n){var i=n.length;switch(i){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t){function n(e,t){for(var n=-1,i=e?e.length:0;++n<i;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t){function n(e,t,n){if("function"!=typeof e)throw new TypeError(i);return setTimeout(function(){e.apply(void 0,n)},t)}var i="Expected a function";e.exports=n},function(e,t){function n(e,t,n,i){for(var o=e.length,r=n+(i?1:-1);i?r--:++r<o;)if(t(e[r],r,e))return r;return-1}e.exports=n},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function i(e,t,n,i,y,b){var m=l(e),g=l(t),E=d,w=d;m||(E=c(e),E=E==p?v:E),g||(w=c(t),w=w==p?v:w);var x=E==v&&!h(e),k=w==v&&!h(t),C=E==w;if(C&&!x)return b||(b=new o),m||u(e)?r(e,t,n,i,y,b):s(e,t,E,n,i,y,b);if(!(y&f)){var $=x&&_.call(e,"__wrapped__"),N=k&&_.call(t,"__wrapped__");if($||N){var O=$?e.value():e,A=N?t.value():t;return b||(b=new o),n(O,A,i,y,b)}}return!!C&&(b||(b=new o),a(e,t,n,i,y,b))}var o=n(23),r=n(30),s=n(102),a=n(103),c=n(107),l=n(4),h=n(31),u=n(146),f=2,p="[object Arguments]",d="[object Array]",v="[object Object]",y=Object.prototype,_=y.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t,n,i){var c=n.length,l=c,h=!i;if(null==e)return!l;for(e=Object(e);c--;){var u=n[c];if(h&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++c<l;){u=n[c];var f=u[0],p=e[f],d=u[1];if(h&&u[2]){if(void 0===p&&!(f in e))return!1}else{var v=new o;if(i)var y=i(p,d,f,e,t,v);if(!(void 0===y?r(d,p,i,s|a,v):y))return!1}}return!0}var o=n(23),r=n(27),s=1,a=2;e.exports=i},function(e,t,n){function i(e){if(!a(e)||s(e))return!1;var t=o(e)||r(e)?d:h;return t.test(c(e))}var o=n(18),r=n(31),s=n(117),a=n(6),c=n(35),l=/[\\^$.*+?()[\]{}|]/g,h=/^\[object .+?Constructor\]$/,u=Object.prototype,f=Function.prototype.toString,p=u.hasOwnProperty,d=RegExp("^"+f.call(p).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t,n){function i(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?a(e)?r(e[0],e[1]):o(e):c(e)}var o=n(95),r=n(96),s=n(144),a=n(4),c=n(149);e.exports=i},function(e,t){function n(e){return i(Object(e))}var i=Object.keys;e.exports=n},function(e,t,n){function i(e){var t=r(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(n){return n===e||o(n,e,t)}}var o=n(91),r=n(105),s=n(34);e.exports=i},function(e,t,n){function i(e,t){return a(e)&&c(t)?l(h(e),t):function(n){var i=r(n,e);return void 0===i&&i===t?s(n,e):o(t,i,void 0,u|f)}}var o=n(27),r=n(142),s=n(143),a=n(12),c=n(33),l=n(34),h=n(14),u=1,f=2;e.exports=i},function(e,t,n){function i(e){return function(t){return o(t,e)}}var o=n(25);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}e.exports=n},function(e,t,n){function i(e){if("string"==typeof e)return e;if(r(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}var o=n(24),r=n(16),s=1/0,a=o?o.prototype:void 0,c=a?a.toString:void 0;e.exports=i},function(e,t){function n(e){return e&&e.Object===Object?e:null}e.exports=n},function(e,t,n){var i=n(3),o=i["__core-js_shared__"];e.exports=o},function(e,t,n){function i(e,t,n,i,o,w,k){switch(n){case E:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case g:return!(e.byteLength!=t.byteLength||!i(new r(e),new r(t)));case u:case f:return+e==+t;case p:return e.name==t.name&&e.message==t.message;case v:return e!=+e?t!=+t:e==+t;case y:case b:return e==t+"";case d:var C=a;case _:var $=w&h;if(C||(C=c),e.size!=t.size&&!$)return!1;var N=k.get(e);return N?N==t:(w|=l,k.set(e,t),s(C(e),C(t),i,o,w,k));case m:if(x)return x.call(e)==x.call(t)}return!1}var o=n(24),r=n(83),s=n(30),a=n(129),c=n(132),l=1,h=2,u="[object Boolean]",f="[object Date]",p="[object Error]",d="[object Map]",v="[object Number]",y="[object RegExp]",_="[object Set]",b="[object String]",m="[object Symbol]",g="[object ArrayBuffer]",E="[object DataView]",w=o?o.prototype:void 0,x=w?w.valueOf:void 0;e.exports=i},function(e,t,n){function i(e,t,n,i,a,c){var l=a&s,h=r(e),u=h.length,f=r(t),p=f.length;if(u!=p&&!l)return!1;for(var d=u;d--;){var v=h[d];if(!(l?v in t:o(t,v)))return!1}var y=c.get(e);if(y)return y==t;var _=!0;c.set(e,t);for(var b=l;++d<u;){v=h[d];var m=e[v],g=t[v];if(i)var E=l?i(g,m,v,t,e,c):i(m,g,v,e,t,c);if(!(void 0===E?m===g||n(m,g,i,a,c):E)){_=!1;break}b||(b="constructor"==v)}if(_&&!b){var w=e.constructor,x=t.constructor;w!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x)&&(_=!1)}return c["delete"](e),_}var o=n(26),r=n(40),s=2;e.exports=i},function(e,t,n){var i=n(28),o=i("length");e.exports=o},function(e,t,n){function i(e){for(var t=r(e),n=t.length;n--;){var i=t[n],s=e[i];t[n]=[i,s,o(s)]}return t}var o=n(33),r=n(40);e.exports=i},function(e,t){function n(e){return i(Object(e))}var i=Object.getPrototypeOf;e.exports=n},function(e,t,n){function i(e){return _.call(e)}var o=n(78),r=n(22),s=n(80),a=n(81),c=n(84),l=n(35),h="[object Map]",u="[object Object]",f="[object Promise]",p="[object Set]",d="[object WeakMap]",v="[object DataView]",y=Object.prototype,_=y.toString,b=l(o),m=l(r),g=l(s),E=l(a),w=l(c);(o&&i(new o(new ArrayBuffer(1)))!=v||r&&i(new r)!=h||s&&i(s.resolve())!=f||a&&i(new a)!=p||c&&i(new c)!=d)&&(i=function(e){var t=_.call(e),n=t==u?e.constructor:void 0,i=n?l(n):void 0;if(i)switch(i){case b:return v;case m:return h;case g:return f;case E:return p;case w:return d}return t}),e.exports=i},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function i(e,t,n){t=c(t,e)?[t]:o(t);for(var i,f=-1,p=t.length;++f<p;){var d=u(t[f]);if(!(i=null!=e&&n(e,d)))break;e=e[d]}if(i)return i;var p=e?e.length:0;return!!p&&l(p)&&a(d,p)&&(s(e)||h(e)||r(e))}var o=n(29),r=n(37),s=n(4),a=n(32),c=n(12),l=n(15),h=n(39),u=n(14);e.exports=i},function(e,t,n){function i(){this.__data__=o?o(null):{}}var o=n(13);e.exports=i},function(e,t){function n(e){return this.has(e)&&delete this.__data__[e]}e.exports=n},function(e,t,n){function i(e){var t=this.__data__;if(o){var n=t[e];return n===r?void 0:n}return a.call(t,e)?t[e]:void 0}var o=n(13),r="__lodash_hash_undefined__",s=Object.prototype,a=s.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){var t=this.__data__;return o?void 0!==t[e]:s.call(t,e)}var o=n(13),r=Object.prototype,s=r.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__;return n[e]=o&&void 0===t?r:t,this}var o=n(13),r="__lodash_hash_undefined__";e.exports=i},function(e,t,n){function i(e){var t=e?e.length:void 0;return a(t)&&(s(e)||c(e)||r(e))?o(t,String):null}var o=n(98),r=n(37),s=n(4),a=n(15),c=n(39);e.exports=i},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function i(e){return!!r&&r in e}var o=n(101),r=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=i},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||i;return e===n}var i=Object.prototype;e.exports=n},function(e,t){function n(){this.__data__=[]}e.exports=n},function(e,t,n){function i(e){var t=this.__data__,n=o(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():s.call(t,n,1),!0}var o=n(10),r=Array.prototype,s=r.splice;e.exports=i},function(e,t,n){function i(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]}var o=n(10);e.exports=i},function(e,t,n){function i(e){return o(this.__data__,e)>-1}var o=n(10);e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__,i=o(n,e);return i<0?n.push([e,t]):n[i][1]=t,this}var o=n(10);e.exports=i},function(e,t,n){function i(){this.__data__={hash:new o,map:new(s||r),string:new o}}var o=n(79),r=n(9),s=n(22);e.exports=i},function(e,t,n){function i(e){return o(this,e)["delete"](e)}var o=n(11);e.exports=i},function(e,t,n){function i(e){return o(this,e).get(e)}var o=n(11);e.exports=i},function(e,t,n){function i(e){return o(this,e).has(e)}var o=n(11);e.exports=i},function(e,t,n){function i(e,t){return o(this,e).set(e,t),this}var o=n(11);e.exports=i},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}e.exports=n},function(e,t){function n(e){return this.__data__.set(e,i),this}var i="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function i(){this.__data__=new o}var o=n(9);e.exports=i},function(e,t){function n(e){return this.__data__["delete"](e)}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function i(e,t){var n=this.__data__;return n instanceof o&&n.__data__.length==s&&(n=this.__data__=new r(n.__data__)),n.set(e,t),this}var o=n(9),r=n(17),s=200;e.exports=i},function(e,t,n){var i=n(147),o=n(152),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(\.|\[\])(?:\4|$))/g,s=/\\(\\)?/g,a=i(function(e){var t=[];return o(e).replace(r,function(e,n,i,o){t.push(i?o.replace(s,"$1"):n||e)}),t});e.exports=a},function(e,t,n){function i(e,t,n){function i(t){var n=b,i=m;return b=m=void 0,k=t,E=e.apply(i,n)}function h(e){return k=e,w=setTimeout(p,t),C?i(e):E}function u(e){var n=e-x,i=e-k,o=t-n;return $?l(o,g-i):o}function f(e){var n=e-x,i=e-k;return void 0===x||n>=t||n<0||$&&i>=g}function p(){var e=r();return f(e)?d(e):void(w=setTimeout(p,u(e)))}function d(e){return w=void 0,N&&b?i(e):(b=m=void 0,E)}function v(){k=0,b=x=m=w=void 0}function y(){return void 0===w?E:d(r())}function _(){var e=r(),n=f(e);if(b=arguments,m=this,x=e,n){if(void 0===w)return h(x);if($)return w=setTimeout(p,t),i(x)}return void 0===w&&(w=setTimeout(p,t)),E}var b,m,g,E,w,x,k=0,C=!1,$=!1,N=!0;if("function"!=typeof e)throw new TypeError(a);return t=s(t)||0,o(n)&&(C=!!n.leading,$="maxWait"in n,g=$?c(s(n.maxWait)||0,t):g,N="trailing"in n?!!n.trailing:N),_.cancel=v,_.flush=y,_}var o=n(6),r=n(148),s=n(42),a="Expected a function",c=Math.max,l=Math.min;e.exports=i},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function i(e,t,n){var i=e?e.length:0;if(!i)return-1;var c=null==n?0:s(n);return c<0&&(c=a(i+c,0)),o(e,r(t,3),c)}var o=n(88),r=n(93),s=n(41),a=Math.max;e.exports=i},function(e,t,n){function i(e,t,n){var i=null==e?void 0:o(e,t);return void 0===i?n:i}var o=n(25);e.exports=i},function(e,t,n){function i(e,t){return null!=e&&r(e,t,o)}var o=n(89),r=n(109);e.exports=i},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function i(e){return r(e)&&o(e)}var o=n(38),r=n(8);e.exports=i},function(e,t,n){function i(e){return r(e)&&o(e.length)&&!!T[D.call(e)]}var o=n(15),r=n(8),s="[object Arguments]",a="[object Array]",c="[object Boolean]",l="[object Date]",h="[object Error]",u="[object Function]",f="[object Map]",p="[object Number]",d="[object Object]",v="[object RegExp]",y="[object Set]",_="[object String]",b="[object WeakMap]",m="[object ArrayBuffer]",g="[object DataView]",E="[object Float32Array]",w="[object Float64Array]",x="[object Int8Array]",k="[object Int16Array]",C="[object Int32Array]",$="[object Uint8Array]",N="[object Uint8ClampedArray]",O="[object Uint16Array]",A="[object Uint32Array]",T={};T[E]=T[w]=T[x]=T[k]=T[C]=T[$]=T[N]=T[O]=T[A]=!0,T[s]=T[a]=T[m]=T[c]=T[g]=T[l]=T[h]=T[u]=T[f]=T[p]=T[d]=T[v]=T[y]=T[_]=T[b]=!1;var j=Object.prototype,D=j.toString;e.exports=i},function(e,t,n){function i(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(r);var n=function(){var i=arguments,o=t?t.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var s=e.apply(this,i);return n.cache=r.set(o,s),s};return n.cache=new(i.Cache||o),n}var o=n(17),r="Expected a function";i.Cache=o,e.exports=i},function(e,t){function n(){return Date.now()}e.exports=n},function(e,t,n){function i(e){return s(e)?o(a(e)):r(e)}var o=n(28),r=n(97),s=n(12),a=n(14);e.exports=i},function(e,t,n){function i(e,t){if("function"!=typeof e)throw new TypeError(s);return t=a(void 0===t?e.length-1:r(t),0),function(){for(var n=arguments,i=-1,r=a(n.length-t,0),s=Array(r);++i<r;)s[i]=n[t+i];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}var c=Array(t+1);for(i=-1;++i<t;)c[i]=n[i];return c[t]=s,o(e,this,c)}}var o=n(85),r=n(41),s="Expected a function",a=Math.max;e.exports=i},function(e,t,n){function i(e){if(!e)return 0===e?e:0;if(e=o(e),e===r||e===-r){var t=e<0?-1:1;return t*s}return e===e?e:0}var o=n(42),r=1/0,s=1.7976931348623157e308;e.exports=i},function(e,t,n){function i(e){return null==e?"":o(e)}var o=n(99);e.exports=i},function(e,t){(function(t){var n="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},i=function(){var e=/\blang(?:uage)?-(\w+)\b/i,t=0,i=n.Prism={util:{encode:function(e){return e instanceof o?new o(e.type,i.util.encode(e.content),e.alias):"Array"===i.util.type(e)?e.map(i.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function(e){var t=i.util.type(e);switch(t){case"Object":var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=i.util.clone(e[o]));return n;case"Array":return e.map&&e.map(function(e){return i.util.clone(e)})}return e}},languages:{extend:function(e,t){var n=i.util.clone(i.languages[e]);for(var o in t)n[o]=t[o];return n},insertBefore:function(e,t,n,o){o=o||i.languages;var r=o[e];if(2==arguments.length){n=arguments[1];for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s]);return r}var a={};for(var c in r)if(r.hasOwnProperty(c)){if(c==t)for(var s in n)n.hasOwnProperty(s)&&(a[s]=n[s]);a[c]=r[c]}return i.languages.DFS(i.languages,function(t,n){n===o[e]&&t!=e&&(this[t]=a)}),o[e]=a},DFS:function(e,t,n,o){o=o||{};for(var r in e)e.hasOwnProperty(r)&&(t.call(e,r,e[r],n||r),"Object"!==i.util.type(e[r])||o[i.util.objId(e[r])]?"Array"!==i.util.type(e[r])||o[i.util.objId(e[r])]||(o[i.util.objId(e[r])]=!0,i.languages.DFS(e[r],t,r,o)):(o[i.util.objId(e[r])]=!0,i.languages.DFS(e[r],t,null,o)))}},plugins:{},highlightAll:function(e,t){var n={callback:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",n);for(var o,r=n.elements||document.querySelectorAll(n.selector),s=0;o=r[s++];)i.highlightElement(o,e===!0,n.callback)},highlightElement:function(t,o,r){for(var s,a,c=t;c&&!e.test(c.className);)c=c.parentNode;c&&(s=(c.className.match(e)||[,""])[1].toLowerCase(),a=i.languages[s]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+s,c=t.parentNode,/pre/i.test(c.nodeName)&&(c.className=c.className.replace(e,"").replace(/\s+/g," ")+" language-"+s);var l=t.textContent,h={element:t,language:s,grammar:a,code:l};if(i.hooks.run("before-sanity-check",h),!h.code||!h.grammar)return void i.hooks.run("complete",h);if(i.hooks.run("before-highlight",h),o&&n.Worker){var u=new Worker(i.filename);u.onmessage=function(e){h.highlightedCode=e.data,i.hooks.run("before-insert",h),h.element.innerHTML=h.highlightedCode,r&&r.call(h.element),i.hooks.run("after-highlight",h),i.hooks.run("complete",h)},u.postMessage(JSON.stringify({language:h.language,code:h.code,immediateClose:!0}))}else h.highlightedCode=i.highlight(h.code,h.grammar,h.language),i.hooks.run("before-insert",h),h.element.innerHTML=h.highlightedCode,r&&r.call(t),i.hooks.run("after-highlight",h),i.hooks.run("complete",h)},highlight:function(e,t,n){var r=i.tokenize(e,t);return o.stringify(i.util.encode(r),n)},tokenize:function(e,t,n){var o=i.Token,r=[e],s=t.rest;if(s){for(var a in s)t[a]=s[a];delete t.rest}e:for(var a in t)if(t.hasOwnProperty(a)&&t[a]){var c=t[a];c="Array"===i.util.type(c)?c:[c];for(var l=0;l<c.length;++l){var h=c[l],u=h.inside,f=!!h.lookbehind,p=!!h.greedy,d=0,v=h.alias;h=h.pattern||h;for(var y=0;y<r.length;y++){var _=r[y];if(r.length>e.length)break e;if(!(_ instanceof o)){h.lastIndex=0;var b=h.exec(_),m=1;if(!b&&p&&y!=r.length-1){var g=r[y+1].matchedStr||r[y+1],E=_+g;if(y<r.length-2&&(E+=r[y+2].matchedStr||r[y+2]),h.lastIndex=0,b=h.exec(E),!b)continue;var w=b.index+(f?b[1].length:0);if(w>=_.length)continue;var x=b.index+b[0].length,k=_.length+g.length;if(m=3,x<=k){if(r[y+1].greedy)continue;m=2,E=E.slice(0,k)}_=E}if(b){f&&(d=b[1].length);var w=b.index+d,b=b[0].slice(d),x=w+b.length,C=_.slice(0,w),$=_.slice(x),N=[y,m];C&&N.push(C);var O=new o(a,u?i.tokenize(b,u):b,v,b,p);N.push(O),$&&N.push($),Array.prototype.splice.apply(r,N)}}}}}return r},hooks:{all:{},add:function(e,t){var n=i.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=i.hooks.all[e];if(n&&n.length)for(var o,r=0;o=n[r++];)o(t)}}},o=i.Token=function(e,t,n,i,o){this.type=e,this.content=t,this.alias=n,this.matchedStr=i||null,this.greedy=!!o};if(o.stringify=function(e,t,n){if("string"==typeof e)return e;if("Array"===i.util.type(e))return e.map(function(n){return o.stringify(n,t,e)}).join("");var r={type:e.type,content:o.stringify(e.content,t,n),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:n};if("comment"==r.type&&(r.attributes.spellcheck="true"),e.alias){var s="Array"===i.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(r.classes,s)}i.hooks.run("wrap",r);var a="";for(var c in r.attributes)a+=(a?" ":"")+c+'="'+(r.attributes[c]||"")+'"';return"<"+r.tag+' class="'+r.classes.join(" ")+'" '+a+">"+r.content+"</"+r.tag+">"},!n.document)return n.addEventListener?(n.addEventListener("message",function(e){var t=JSON.parse(e.data),o=t.language,r=t.code,s=t.immediateClose;n.postMessage(i.highlight(r,i.languages[o],o)),s&&n.close()},!1),n.Prism):n.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return r&&(i.filename=r.src,document.addEventListener&&!r.hasAttribute("data-manual")&&("loading"!==document.readyState?requestAnimationFrame(i.highlightAll,0):document.addEventListener("DOMContentLoaded",i.highlightAll))),n.Prism}();"undefined"!=typeof e&&e.exports&&(e.exports=i),"undefined"!=typeof t&&(t.Prism=i),i.languages.markup={comment:/<!--[\w\W]*?-->/,
prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=.$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},i.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),i.languages.xml=i.languages.markup,i.languages.html=i.languages.markup,i.languages.mathml=i.languages.markup,i.languages.svg=i.languages.markup,i.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,"function":/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},i.languages.css.atrule.inside.rest=i.util.clone(i.languages.css),i.languages.markup&&(i.languages.insertBefore("markup","tag",{style:{pattern:/(<style[\w\W]*?>)[\w\W]*?(?=<\/style>)/i,lookbehind:!0,inside:i.languages.css,alias:"language-css"}}),i.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:i.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:i.languages.css}},alias:"language-css"}},i.languages.markup.tag)),i.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,"boolean":/\b(true|false)\b/,"function":/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},i.languages.javascript=i.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,"function":/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),i.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}}),i.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\\\|\\?[^\\])*?`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:i.languages.javascript}},string:/[\s\S]+/}}}),i.languages.markup&&i.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\w\W]*?>)[\w\W]*?(?=<\/script>)/i,lookbehind:!0,inside:i.languages.javascript,alias:"language-javascript"}}),i.languages.js=i.languages.javascript,function(){"undefined"!=typeof self&&self.Prism&&self.document&&document.querySelector&&(self.Prism.fileHighlight=function(){var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"};Array.prototype.forEach&&Array.prototype.slice.call(document.querySelectorAll("pre[data-src]")).forEach(function(t){for(var n,o=t.getAttribute("data-src"),r=t,s=/\blang(?:uage)?-(?!\*)(\w+)\b/i;r&&!s.test(r.className);)r=r.parentNode;if(r&&(n=(t.className.match(s)||[,""])[1]),!n){var a=(o.match(/\.(\w+)$/)||[,""])[1];n=e[a]||a}var c=document.createElement("code");c.className="language-"+n,t.textContent="",c.textContent="Loading…",t.appendChild(c);var l=new XMLHttpRequest;l.open("GET",o,!0),l.onreadystatechange=function(){4==l.readyState&&(l.status<400&&l.responseText?(c.textContent=l.responseText,i.highlightElement(c)):l.status>=400?c.textContent="✖ Error "+l.status+" while fetching file: "+l.statusText:c.textContent="✖ Error: File does not exist or is empty")},l.send(null)})},document.addEventListener("DOMContentLoaded",self.Prism.fileHighlight))}()}).call(t,function(){return this}())},function(e,t){e.exports='<table class=sg_c-api-table> <tr> <th> Name </th> <th> Type </th> <th> Required </th> <th> Default </th> <th> Description </th> </tr> <tr v-for="item in items"> <td>{{item.name}}</td> <td>{{item.type}}</td> <td>{{item.isRequired}}</td> <td>{{item.default}}</td> <td>{{item.desc}}</td> </tr> </table> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Alert</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <alert type=error>This is an error alert.</alert> <alert type=info>This is an info alert.</alert> <alert type=success>This is a success alert.</alert> <alert type=success :dismissible=false>This is not a dismissible alert.</alert> <alert type=success :on-closed=dismissCallBack>This is an alert with callback.</alert> <alert type=info :timeout=5000>This alert should timeout in 5 seconds.</alert> </div> <collapsable-panel label=HTML> <pre>\n           <code class=language-html>\n         &lt;alert type="error"&gt;This is an error alert.&lt;/alert&gt;\n         &lt;alert type="info"&gt;This is an info alert.&lt;/alert&gt;\n         &lt;alert type="success"&gt;This is a success alert.&lt;/alert&gt;\n         &lt;alert type="success" :dismissible="false"&gt;This is not a dismissible alert.&lt;/alert&gt;\n         &lt;alert type="success" :on-closed="dismissCallBack"&gt;This is an alert with callback.&lt;/alert&gt;\n         &lt;alert type="success" :timeout="5000"&gt;This alert should timeout in 5 seconds.&lt;/alert&gt;\n           </code>\n         </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Collapsable Panel</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <collapsable-panel label="Panel 1" :is-open=true> Panel 1 content </collapsable-panel> <collapsable-panel label="Panel 2"> Panel 2 content </collapsable-panel> </div> <collapsable-panel label=HTML> <pre>\n           <code class=language-html>\n             &lt;collapsable-panel label="Panel 1" :is-open="true"&gt;\n               Panel 1 content\n             &lt;/collapsable-panel&gt;\n             &lt;collapsable-panel label="Panel 2"&gt;\n               Panel 2 content\n             &lt;/collapsable-panel&gt;\n           </code>\n         </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Getting Started</h2> <hr class=hy_u-space-mb-2> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <h3 class="hy_c-headline hy_c-headline--5 hy_t-grey">CDN</h3> <p> ... </p> </div> </div></section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Legal System</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <p class="hy_c-copy hy_c-copy--body hy_t-grey"> Lorem ipsum<legal-counter v-overlay-opener=legal-overlay legal-key=hs-referral-terms legal-lang=en legal-region=bc></legal-counter> dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. <legal-counter v-overlay-opener=legal-overlay legal-key=1-year-offer-stim legal-lang=en legal-region=bc></legal-counter> </p> </div> <div class=sg_c-demo__container> <legal-container></legal-container> </div> <collapsable-panel label=HTML> <pre>\n           <code class=language-html>\n             &lt;legal-counter&gt;\n                legal-key="hs-referral-terms"\n                legal-lang="en"\n                legal-region="bc"\n             &lt;/legal-counter&gt;\n             &lt;legal-container&gt;&lt;/legal-container&gt;\n           </code>\n         </pre> </collapsable-panel> <collapsable-panel label=javascript> <pre>\n           <code class=language-javascript>\n             let vm = new Vue({\n               el: \'body\',\n               data() {\n                 return {\n                   ligerEndPoint: \'https://api.cms.telus.com/legals\',\n                   ligerApplicationKey: \'b9738d67b89dfc782746d4a9cf4a1093\'\n                 };\n               },\n               components: {\n                 LegalCounter,\n                 LegalContainer\n               }\n             });\n           </code>\n         </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API: Legal Counter</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Overlay System</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <p> <button v-overlay-opener=overlay-1 class="hy_c-button hy_c-button--link hy_t-purple" type=button role=button> Open overlay #1 <i class="hy_c-icon hy_c-icon--arrow-right-circled hy_c-button__icon"></i> </button> </p> <p> <button v-overlay-opener=overlay-2 class="hy_c-button hy_c-button--link hy_t-purple" type=button role=button> Open overlay #2 <i class="hy_c-icon hy_c-icon--arrow-right-circled hy_c-button__icon"></i> </button> </p> <overlay-container> <overlay overlay-key=overlay-1> <h4 class="hy_c-headline hy_c-headline--h4" slot=overlay-header>This is overlay #1</h4> <article slot=overlay-body> Overlay #1 body </article> </overlay> <overlay overlay-key=overlay-2> <h4 class="hy_c-headline hy_c-headline--h4" slot=overlay-header>This is overlay #2</h4> <article slot=overlay-body> Overlay #2 body </article> </overlay> </overlay-container> </div> <collapsable-panel label=HTML> <pre>\n           <code class=language-html>\n             &lt;overlay-container&gt;\n               &lt;overlay overlay-key="overlay-1"&gt;\n                 &lt;h4  class="hy_c-headline hy_c-headline--h4" slot="overlay-header"&gt;\n                 This is overlay #1\n                 &lt;/h4&gt;\n                 &lt;article slot="overlay-body"&gt;\n                   Overlay #1 body\n                 &lt;/article&gt;\n               &lt;/overlay&gt;\n               &lt;overlay overlay-key="overlay-2"&gt;\n                 &lt;h4  class="hy_c-headline hy_c-headline--h4" slot="overlay-header"&gt;\n                 This is overlay #1\n                 &lt;/h4&gt;\n                 &lt;article slot="overlay-body"&gt;\n                   Overlay #2 body\n                 &lt;/article&gt;\n               &lt;/overlay&gt;\n             &lt;/overlay-container&gt;\n           </code>\n         </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=" <section class=\"hy_c-module hy_t-grey\"> <div class=hy_o-wrapper> <h2 class=\"hy_c-headline hy_c-headline--h4 hy_t-grey\">Step Tracker</h2> <hr class=hy_u-space-mb-2> <div class=\"sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed\"> <div class=sg_c-demo__container> <step-tracker :current-step=stepTrackerCurrentStep :config=stepTrackerConfig></step-tracker> </div> <collapsable-panel label=HTML> <pre>\n       <code class=language-html>\n        &lt;step-tracker\n        :current-step=\"stepTrackerCurrentStep\"\n        :config=\"stepTrackerConfig\"&gt;\n        &lt;/step-tracker&gt;\n       </code>\n     </pre> </collapsable-panel> <collapsable-panel label=javascript> <pre>\n           <code class=language-js>\n            let stepTrackerCurrentStep = 2;\n            let stepTrackerConfig = {\n              isClickable: true,\n              steps: [\n                {\n                  title: 'Step A',\n                  link: '',\n                  onClickHandler: (event) => {\n                    this.stepTrackerCurrentStep = 0;\n                  }\n                }, {\n                  title: 'Step B',\n                  link: '',\n                  onClickHandler: (event) => {\n                    this.stepTrackerCurrentStep = 1;\n                  }\n                }, {\n                  title: 'Step C',\n                  link: '',\n                  onClickHandler: (event) => {\n                    this.stepTrackerCurrentStep = 2;\n                  }\n                }\n              ]\n            };\n            let vm = new Vue({\n              el: 'body',\n              data: {\n                stepTrackerConfig,\n                stepTrackerCurrentStep\n            },\n              components: {\n                StepTracker\n              }\n            });\n           </code>\n         </pre> </collapsable-panel> </div> <h3 class=\"hy_c-headline hy_c-headline--h5 hy_t-grey\">API</h3> <div class=\"hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed\"> <api-table :items=apiItems></api-table> </div> </div> </section> "},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Tab</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <tabs class="c-price-lookup hy_o-layout__item hy_u-size-3of3@sm hy_u-size-3of4@md hy_u-size-4of12@lg"> <tab label="Tab 1"> <p> Tab 1 content </p> </tab> <tab label="Tab 2"> <p> Tab 2 content </p> </tab> <tab label="Tab 3" :is-disabled=true> <p> Tab 3 content </p> </tab> </tabs> </div> <collapsable-panel label=HTML> <pre>\n           <code class=language-html>\n             &lt;tabs&gt;\n               &lt;tab label="Tab 1"&gt;\n                 &lt;p&gt;\n                   Tab 1 content\n                 &lt;/p&gt;\n               &lt;/tab&gt;\n               &lt;tab label="Tab 2"&gt;\n                 &lt;p&gt;\n                   Tab 2 content\n                 &lt;/p&gt;\n               &lt;/tab&gt;\n               &lt;tab label="Tab 3" :is-disabled="true"&gt;\n                 &lt;p&gt;\n                   Tab 3 content\n                 &lt;/p&gt;\n               &lt;/tab&gt;\n             &lt;/tabs&gt;\n           </code>\n         </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports="<div v-if=isVisible transition=fade class=c-alert :class=\"'c-alert--' + type\" :class=\"{ 'c-alert--dismissible': dismissible }\" role=alert> <button v-if=dismissible @click=dismiss type=button class=c-alert__close-button aria-label=Close> <span aria-hidden=true>&times;</span> <span class=hy_u-invisible>Close</span> </button> <slot></slot> </div> "},function(e,t){e.exports='<div class=c-collapsable-panel> <h3 @click.prevent=toggleOpen :class="{\n      \'c-collapsable-panel__header--open\': isOpen\n    }" class="c-collapsable-panel__header hy_c-headline hy_c-headline--h5 hy_t-grey" v-html=label> </h3> <div class=c-collapsable-panel__body :class="{\n    \'c-collapsable-panel__body--open\': isOpen\n  }"> <slot></slot> </div> </div> '},function(e,t){e.exports='<div class=c-legal-container> <ol class=c-legal-container__ordered-list> <li v-set-focus=legal.isSelected class=c-legal-container__list-item :class="{\n      \'c-legal-container__list-item--active\': legal.isSelected\n    }" v-for="legal in indexedLegals" v-html=legal.content> </li> </ol> <ul class=c-legal-container__unordered-list> <li class=c-legal-container__list-item v-for="legal in nonIndexedLegals" v-html=legal.content> </li> </ul> </div> '},function(e,t){e.exports="<sup class=c-legal-sup> <a href=# @click.prevent=clickHandler> {{legalCounter}} </a> </sup> "},function(e,t){e.exports='<div class=c-overlay-container> <div class=c-overlay-container__curtain :class="{\n        \'c-overlay-container__curtain--active\': isVisible\n    }" @click.prevent="isVisible=false"> </div> <div class=c-overlay-container__overlays :class="{\n        \'c-overlay-container__overlays--active\': isVisible\n    }"> <slot></slot> </div> </div> '},function(e,t){e.exports="<article class=c-overlay v-show=isVisible> <div class=c-overlay__body> <slot name=overlay-body></slot> </div> <header class=c-overlay__header> <slot name=overlay-header></slot> <button type=button class=c-overlay__close-button aria-label=Close tabindex=0 @click.prevent=closeOverlay></button> </header> </article> "},function(e,t){e.exports='<ul class=c-step-tracker> <li class=c-step-tracker__step :class="{\n      \'c-step-tracker__step--complete\': currentStep > $index,\n      \'c-step-tracker__step--active\': currentStep === $index,\n      \'c-step-tracker__setp--clickable\': (currentStep > $index && config.isClickable)\n  }" v-for="step in config.steps"> <a :href="step.link || false" @click="clickHandler($event, step, $index)" v-if=config.isClickable> <span class=c-step-tracker__icon></span> <span class=c-step-tracker__label>{{$index + 1}}. {{step.title}}</span> </a> <span v-else class=c-step-tracker__icon></span> <span v-else class=c-step-tracker__label>{{$index + 1}}. {{step.title}}</span> </li> </ul> '},function(e,t){e.exports="<div class=c-tabs__pane :class=\"{\n    'c-tabs__pane--active': isVisible\n  }\"> <slot></slot> </div> "},function(e,t){e.exports='<div class=c-tabs> <ul class=c-tabs__header> <li v-for="tab in tabs" class=c-tabs__header-item :class="{\n                \'c-tabs__header-item--active\': ($index === activeTabIndex),\n                \'c-tabs__header-item--disabled\': tab.isDisabled\n              }" :disabled=tab.disabled> <a href=# @click.prevent="handleTabListClick($index, tab)" v-html=tab.label></a> </li> </ul> <div class=c-tabs__body> <slot></slot> </div> </div> '},function(e,t,n){var i,o;i=n(45),o=n(155),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(46),o=n(156),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(189),i=n(47),o=n(157),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(48),o=n(158),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(49),o=n(159),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(50),o=n(160),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(51),o=n(161),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(190),i=n(52),o=n(162),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(191),i=n(53),o=n(163),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(192),i=n(54),o=n(164),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(193),i=n(55),o=n(165),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(194),i=n(56),o=n(166),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(195),i=n(57),o=n(167),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(196),i=n(58),o=n(168),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(59),o=n(169),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(197),i=n(60),o=n(170),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){/*!
	 * vue-router v0.7.13
	 * (c) 2016 Evan You
	 * Released under the MIT License.
	 */
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t,n){this.path=e,this.matcher=t,this.delegate=n}function t(e){this.routes={},this.children={},this.target=e}function n(t,i,o){return function(r,s){var a=t+r;return s?void s(n(a,i,o)):new e(t+r,i,o)}}function i(e,t,n){for(var i=0,o=0,r=e.length;o<r;o++)i+=e[o].path.length;t=t.substr(i);var s={path:t,handler:n};e.push(s)}function o(e,t,n,r){var s=t.routes;for(var a in s)if(s.hasOwnProperty(a)){var c=e.slice();i(c,a,s[a]),t.children[a]?o(c,t.children[a],n,r):n.call(r,c)}}function r(e,i){var r=new t;e(n("",r,this.delegate)),o([],r,function(e){i?i(this,e):this.add(e)},this)}function s(e){W||"undefined"==typeof console||console.error("[vue-router] "+e)}function a(e,t){try{return t?decodeURIComponent(e):decodeURI(e)}catch(n){s("malformed URI"+(t?" component: ":": ")+e)}}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function l(e){this.string=e}function h(e){this.name=e}function u(e){this.name=e}function f(){}function p(e,t,n){"/"===e.charAt(0)&&(e=e.substr(1));var i=e.split("/"),o=[];n.val="";for(var r=0,s=i.length;r<s;r++){var a,c=i[r];(a=c.match(/^:([^\/]+)$/))?(o.push(new h(a[1])),t.push(a[1]),n.val+="3"):(a=c.match(/^\*([^\/]+)$/))?(o.push(new u(a[1])),n.val+="2",t.push(a[1])):""===c?(o.push(new f),n.val+="1"):(o.push(new l(c)),n.val+="4")}return n.val=+n.val,o}function d(e){this.charSpec=e,this.nextStates=[]}function v(e){return e.sort(function(e,t){return t.specificity.val-e.specificity.val})}function y(e,t){for(var n=[],i=0,o=e.length;i<o;i++){var r=e[i];n=n.concat(r.match(t))}return n}function _(e){this.queryParams=e||{}}function b(e,t,n){for(var i=e.handlers,o=e.regex,r=t.match(o),s=1,a=new _(n),c=0,l=i.length;c<l;c++){for(var h=i[c],u=h.names,f={},p=0,d=u.length;p<d;p++)f[u[p]]=r[s++];a.push({handler:h.handler,params:f,isDynamic:!!u.length})}return a}function m(e,t){return t.eachChar(function(t){e=e.put(t)}),e}function g(e){return e=e.replace(/\+/gm,"%20"),a(e,!0)}function E(e){"undefined"!=typeof console&&console.error("[vue-router] "+e)}function w(e,t,n){var i=e.match(/(\?.*)$/);if(i&&(i=i[1],e=e.slice(0,-i.length)),"?"===t.charAt(0))return e+t;var o=e.split("/");n&&o[o.length-1]||o.pop();for(var r=t.replace(/^\//,"").split("/"),s=0;s<r.length;s++){var a=r[s];"."!==a&&(".."===a?o.pop():o.push(a))}return""!==o[0]&&o.unshift(""),o.join("/")}function x(e){return e&&"function"==typeof e.then}function k(e,t){var n=e&&(e.$options||e.options);return n&&n.route&&n.route[t]}function C(e,t){G?G.$options.components._=e.component:G={resolve:Y.Vue.prototype._resolveComponent,$options:{components:{_:e.component}}},G.resolve("_",function(n){e.component=n,t(n)})}function $(e,t,n){return void 0===t&&(t={}),e=e.replace(/:([^\/]+)/g,function(n,i){var o=t[i];return o||E('param "'+i+'" not found when generating path for "'+e+'" with params '+JSON.stringify(t)),o||""}),n&&(e+=Q(n)),e}function N(e,t,n){var i=e.childVM;if(!i||!t)return!1;if(e.Component!==t.component)return!1;var o=k(i,"canReuse");return"boolean"==typeof o?o:!o||o.call(i,{to:n.to,from:n.from})}function O(e,t,n){var i=e.childVM,o=k(i,"canDeactivate");o?t.callHook(o,i,n,{expectBoolean:!0}):n()}function A(e,t,n){C(e,function(e){if(!t.aborted){var i=k(e,"canActivate");i?t.callHook(i,null,n,{expectBoolean:!0}):n()}})}function T(e,t,n){var i=e.childVM,o=k(i,"deactivate");o?t.callHooks(o,i,n):n()}function j(e,t,n,i,o){var r=t.activateQueue[n];if(!r)return V(e),e._bound&&e.setComponent(null),void(i&&i());var s=e.Component=r.component,a=k(s,"activate"),c=k(s,"data"),l=k(s,"waitForData");e.depth=n,e.activated=!1;var h=void 0,u=!(!c||l);if(o=o&&e.childVM&&e.childVM.constructor===s)h=e.childVM,h.$loadingRouteData=u;else if(V(e),e.unbuild(!0),h=e.build({_meta:{$loadingRouteData:u},created:function(){this._routerView=e}}),e.keepAlive){h.$loadingRouteData=u;var f=h._keepAliveRouterView;f&&(e.childView=f,h._keepAliveRouterView=null)}var p=function(){h.$destroy()},d=function(){if(o)return void(i&&i());var n=t.router;n._rendered||n._transitionOnLoad?e.transition(h):(e.setCurrent?e.setCurrent(h):e.childVM=h,h.$before(e.anchor,null,!1)),i&&i()},v=function(){e.childView&&j(e.childView,t,n+1,null,o||e.keepAlive),d()},y=function(){e.activated=!0,c&&l?S(h,t,c,v,p):(c&&S(h,t,c),v())};a?t.callHooks(a,h,y,{cleanup:p,postActivate:!0}):y()}function D(e,t){var n=e.childVM,i=k(n,"data");i&&S(n,t,i)}function S(e,t,n,i,o){e.$loadingRouteData=!0,t.callHooks(n,e,function(){e.$loadingRouteData=!1,e.$emit("route-data-loaded",e),i&&i()},{cleanup:o,postActivate:!0,processData:function(t){var n=[];if(P(t)&&Object.keys(t).forEach(function(i){var o=t[i];x(o)?n.push(o.then(function(t){e.$set(i,t)})):e.$set(i,o)}),n.length)return n[0].constructor.all(n)}})}function V(e){e.keepAlive&&e.childVM&&e.childView&&(e.childVM._keepAliveRouterView=e.childView),e.childView=null}function P(e){return"[object Object]"===Object.prototype.toString.call(e)}function R(e){return"[object Object]"===Object.prototype.toString.call(e)}function F(e){return e?Array.prototype.slice.call(e):[]}function M(e){var t=e.util,n=t.extend,i=t.isArray,o=t.defineReactive,r=e.prototype._init;e.prototype._init=function(e){e=e||{};var t=e._parent||e.parent||this,n=t.$router,i=t.$route;n&&(this.$router=n,n._children.push(this),this._defineMeta?this._defineMeta("$route",i):o(this,"$route",i)),r.call(this,e)};var s=e.prototype._destroy;e.prototype._destroy=function(){!this._isBeingDestroyed&&this.$router&&this.$router._children.$remove(this),s.apply(this,arguments)};var a=e.config.optionMergeStrategies,c=/^(data|activate|deactivate)$/;a&&(a.route=function(e,t){if(!t)return e;if(!e)return t;var o={};n(o,e);for(var r in t){var s=o[r],a=t[r];s&&c.test(r)?o[r]=(i(s)?s:[s]).concat(a):o[r]=a}return o})}function L(e){var t=e.util,n=e.directive("_component")||e.internalDirectives.component,i=t.extend({},n);t.extend(i,{_isRouterView:!0,bind:function(){var e=this.vm.$route;if(!e)return void E("<router-view> can only be used inside a router-enabled app.");this._isDynamicLiteral=!0,n.bind.call(this);for(var t=void 0,i=this.vm;i;){if(i._routerView){t=i._routerView;break}i=i.$parent}if(t)this.parentView=t,t.childView=this;else{var o=e.router;o._rootView=this}var r=e.router._currentTransition;if(!t&&r.done||t&&t.activated){var s=t?t.depth+1:0;j(this,r,s)}},unbind:function(){this.parentView&&(this.parentView.childView=null),n.unbind.call(this)}}),e.elementDirective("router-view",i)}function I(e){function t(e){return e.protocol===location.protocol&&e.hostname===location.hostname&&e.port===location.port}function n(e,t,n){if(t=t.trim(),t.indexOf(" ")===-1)return void n(e,t);for(var i=t.split(/\s+/),o=0,r=i.length;o<r;o++)n(e,i[o])}var i=e.util,o=i.bind,r=i.isObject,s=i.addClass,a=i.removeClass,c=e.directive("on").priority,l="__vue-router-link-update__",h=0;e.directive("link-active",{priority:9999,bind:function(){for(var e=this,t=String(h++),n=this.el.querySelectorAll("[v-link]"),i=0,o=n.length;i<o;i++){var r=n[i],s=r.getAttribute(l),a=s?s+","+t:t;r.setAttribute(l,a)}this.vm.$on(l,this.cb=function(n,i){n.activeIds.indexOf(t)>-1&&n.updateClasses(i,e.el)})},unbind:function(){this.vm.$off(l,this.cb)}}),e.directive("link",{priority:c-2,bind:function(){var e=this.vm;if(!e.$route)return void E("v-link can only be used inside a router-enabled app.");this.router=e.$route.router,this.unwatch=e.$watch("$route",o(this.onRouteUpdate,this));var t=this.el.getAttribute(l);t&&(this.el.removeAttribute(l),this.activeIds=t.split(",")),"A"===this.el.tagName&&"_blank"===this.el.getAttribute("target")||(this.handler=o(this.onClick,this),this.el.addEventListener("click",this.handler))},update:function(e){this.target=e,r(e)&&(this.append=e.append,this.exact=e.exact,this.prevActiveClass=this.activeClass,this.activeClass=e.activeClass),this.onRouteUpdate(this.vm.$route)},onClick:function(e){if(!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||0!==e.button)){var n=this.target;if(n)e.preventDefault(),this.router.go(n);else{for(var i=e.target;"A"!==i.tagName&&i!==this.el;)i=i.parentNode;if("A"===i.tagName&&t(i)){e.preventDefault();var o=i.pathname;this.router.history.root&&(o=o.replace(this.router.history.rootRE,"")),this.router.go({path:o,replace:n&&n.replace,append:n&&n.append})}}}},onRouteUpdate:function(e){var t=this.router.stringifyPath(this.target);this.path!==t&&(this.path=t,this.updateActiveMatch(),this.updateHref()),this.activeIds?this.vm.$emit(l,this,e.path):this.updateClasses(e.path,this.el)},updateActiveMatch:function(){this.activeRE=this.path&&!this.exact?new RegExp("^"+this.path.replace(/\/$/,"").replace(se,"").replace(re,"\\$&")+"(\\/|$)"):null},updateHref:function(){if("A"===this.el.tagName){var e=this.path,t=this.router,n="/"===e.charAt(0),i=e&&("hash"===t.mode||n)?t.history.formatPath(e,this.append):e;i?this.el.href=i:this.el.removeAttribute("href")}},updateClasses:function(e,t){var i=this.activeClass||this.router._linkActiveClass;this.prevActiveClass&&this.prevActiveClass!==i&&n(t,this.prevActiveClass,a);var o=this.path.replace(se,"");e=e.replace(se,""),this.exact?o===e||"/"!==o.charAt(o.length-1)&&o===e.replace(oe,"")?n(t,i,s):n(t,i,a):this.activeRE&&this.activeRE.test(e)?n(t,i,s):n(t,i,a)},unbind:function(){this.el.removeEventListener("click",this.handler),this.unwatch&&this.unwatch()}})}function H(e,t){var n=t.component;ce.util.isPlainObject(n)&&(n=t.component=ce.extend(n)),"function"!=typeof n&&(t.component=null,E('invalid component for route "'+e+'".'))}var z={};z.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.prototype={to:function(e,t){var n=this.delegate;if(n&&n.willAddRoute&&(e=n.willAddRoute(this.matcher.target,e)),this.matcher.add(this.path,e),t){if(0===t.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,e,t,this.delegate)}return this}},t.prototype={add:function(e,t){this.routes[e]=t},addChild:function(e,i,o,r){var s=new t(i);this.children[e]=s;var a=n(e,s,r);r&&r.contextEntered&&r.contextEntered(i,a),o(a)}};var B=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],U=new RegExp("(\\"+B.join("|\\")+")","g"),W=!1;l.prototype={eachChar:function(e){for(var t,n=this.string,i=0,o=n.length;i<o;i++)t=n.charAt(i),e({validChars:t})},regex:function(){return this.string.replace(U,"\\$1")},generate:function(){return this.string}},h.prototype={eachChar:function(e){e({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(e){var t=e[this.name];return null==t?":"+this.name:t}},u.prototype={eachChar:function(e){e({invalidChars:"",repeat:!0})},regex:function(){return"(.+)"},generate:function(e){var t=e[this.name];return null==t?":"+this.name:t}},f.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},d.prototype={get:function(e){for(var t=this.nextStates,n=0,i=t.length;n<i;n++){var o=t[n],r=o.charSpec.validChars===e.validChars;if(r=r&&o.charSpec.invalidChars===e.invalidChars)return o}},put:function(e){var t;return(t=this.get(e))?t:(t=new d(e),this.nextStates.push(t),e.repeat&&t.nextStates.push(t),t)},match:function(e){for(var t,n,i,o=this.nextStates,r=[],s=0,a=o.length;s<a;s++)t=o[s],n=t.charSpec,"undefined"!=typeof(i=n.validChars)?i.indexOf(e)!==-1&&r.push(t):"undefined"!=typeof(i=n.invalidChars)&&i.indexOf(e)===-1&&r.push(t);return r}};var q=Object.create||function(e){function t(){}return t.prototype=e,new t};_.prototype=q({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});var J=function(){this.rootState=new d,this.names={}};J.prototype={add:function(e,t){for(var n,i=this.rootState,o="^",r={},s=[],a=[],c=!0,l=0,h=e.length;l<h;l++){var u=e[l],d=[],v=p(u.path,d,r);a=a.concat(v);for(var y=0,_=v.length;y<_;y++){var b=v[y];b instanceof f||(c=!1,i=i.put({validChars:"/"}),o+="/",i=m(i,b),o+=b.regex())}var g={handler:u.handler,names:d};s.push(g)}c&&(i=i.put({validChars:"/"}),o+="/"),i.handlers=s,i.regex=new RegExp(o+"$"),i.specificity=r,(n=t&&t.as)&&(this.names[n]={segments:a,handlers:s})},handlersFor:function(e){var t=this.names[e],n=[];if(!t)throw new Error("There is no route named "+e);for(var i=0,o=t.handlers.length;i<o;i++)n.push(t.handlers[i]);return n},hasRoute:function(e){return!!this.names[e]},generate:function(e,t){var n=this.names[e],i="";if(!n)throw new Error("There is no route named "+e);for(var o=n.segments,r=0,s=o.length;r<s;r++){var a=o[r];a instanceof f||(i+="/",i+=a.generate(t))}return"/"!==i.charAt(0)&&(i="/"+i),t&&t.queryParams&&(i+=this.generateQueryString(t.queryParams)),i},generateQueryString:function(e){var t=[],n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(i);n.sort();for(var o=0,r=n.length;o<r;o++){i=n[o];var s=e[i];if(null!=s){var a=encodeURIComponent(i);if(c(s))for(var l=0,h=s.length;l<h;l++){var u=i+"[]="+encodeURIComponent(s[l]);t.push(u)}else a+="="+encodeURIComponent(s),t.push(a)}}return 0===t.length?"":"?"+t.join("&")},parseQueryString:function(e){for(var t=e.split("&"),n={},i=0;i<t.length;i++){var o,r=t[i].split("="),s=g(r[0]),a=s.length,c=!1;1===r.length?o="true":(a>2&&"[]"===s.slice(a-2)&&(c=!0,s=s.slice(0,a-2),n[s]||(n[s]=[])),o=r[1]?g(r[1]):""),c?n[s].push(o):n[s]=o}return n},recognize:function(e,t){W=t;var n,i,o,r,s=[this.rootState],c={},l=!1;if(r=e.indexOf("?"),r!==-1){var h=e.substr(r+1,e.length);e=e.substr(0,r),h&&(c=this.parseQueryString(h))}if(e=a(e)){for("/"!==e.charAt(0)&&(e="/"+e),n=e.length,n>1&&"/"===e.charAt(n-1)&&(e=e.substr(0,n-1),l=!0),i=0,o=e.length;i<o&&(s=y(s,e.charAt(i)),s.length);i++);var u=[];for(i=0,o=s.length;i<o;i++)s[i].handlers&&u.push(s[i]);s=v(u);var f=u[0];return f&&f.handlers?(l&&"(.+)$"===f.regex.source.slice(-5)&&(e+="/"),b(f,e,c)):void 0}}},J.prototype.map=r;var Q=J.prototype.generateQueryString,Y={},G=void 0,K=/#.*$/,Z=function(){function e(t){var n=t.root,i=t.onChange;z.classCallCheck(this,e),n&&"/"!==n?("/"!==n.charAt(0)&&(n="/"+n),this.root=n.replace(/\/$/,""),this.rootRE=new RegExp("^\\"+this.root)):this.root=null,this.onChange=i;var o=document.querySelector("base");this.base=o&&o.getAttribute("href")}return e.prototype.start=function(){var e=this;this.listener=function(t){var n=location.pathname+location.search;e.root&&(n=n.replace(e.rootRE,"")),e.onChange(n,t&&t.state,location.hash)},window.addEventListener("popstate",this.listener),this.listener()},e.prototype.stop=function(){window.removeEventListener("popstate",this.listener)},e.prototype.go=function(e,t,n){var i=this.formatPath(e,n);t?history.replaceState({},"",i):(history.replaceState({pos:{x:window.pageXOffset,y:window.pageYOffset}},"",location.href),history.pushState({},"",i));var o=e.match(K),r=o&&o[0];e=i.replace(K,"").replace(this.rootRE,""),this.onChange(e,null,r)},e.prototype.formatPath=function(e,t){return"/"===e.charAt(0)?this.root?this.root+"/"+e.replace(/^\//,""):e:w(this.base||location.pathname,e,t)},e}(),X=function(){function e(t){var n=t.hashbang,i=t.onChange;z.classCallCheck(this,e),this.hashbang=n,this.onChange=i}return e.prototype.start=function(){var e=this;this.listener=function(){var t=location.hash,n=t.replace(/^#!?/,"");"/"!==n.charAt(0)&&(n="/"+n);var i=e.formatPath(n);if(i!==t)return void location.replace(i);var o=location.search&&t.indexOf("?")>-1?"&"+location.search.slice(1):location.search;e.onChange(t.replace(/^#!?/,"")+o)},window.addEventListener("hashchange",this.listener),this.listener()},e.prototype.stop=function(){window.removeEventListener("hashchange",this.listener)},e.prototype.go=function(e,t,n){e=this.formatPath(e,n),t?location.replace(e):location.hash=e},e.prototype.formatPath=function(e,t){var n="/"===e.charAt(0),i="#"+(this.hashbang?"!":"");return n?i+e:i+w(location.hash.replace(/^#!?/,""),e,t)},e}(),ee=function(){function e(t){var n=t.onChange;z.classCallCheck(this,e),this.onChange=n,this.currentPath="/"}return e.prototype.start=function(){this.onChange("/")},e.prototype.stop=function(){},e.prototype.go=function(e,t,n){e=this.currentPath=this.formatPath(e,n),this.onChange(e)},e.prototype.formatPath=function(e,t){return"/"===e.charAt(0)?e:w(this.currentPath,e,t)},e}(),te=function(){function e(t,n,i){z.classCallCheck(this,e),this.router=t,this.to=n,this.from=i,this.next=null,this.aborted=!1,this.done=!1}return e.prototype.abort=function(){if(!this.aborted){this.aborted=!0;var e=!this.from.path&&"/"===this.to.path;e||this.router.replace(this.from.path||"/")}},e.prototype.redirect=function(e){this.aborted||(this.aborted=!0,"string"==typeof e?e=$(e,this.to.params,this.to.query):(e.params=e.params||this.to.params,e.query=e.query||this.to.query),this.router.replace(e))},e.prototype.start=function(e){for(var t=this,n=[],i=this.router._rootView;i;)n.unshift(i),i=i.childView;var o=n.slice().reverse(),r=this.activateQueue=F(this.to.matched).map(function(e){return e.handler}),s=void 0,a=void 0;for(s=0;s<o.length&&N(o[s],r[s],t);s++);s>0&&(a=o.slice(0,s),n=o.slice(s).reverse(),r=r.slice(s)),t.runQueue(n,O,function(){t.runQueue(r,A,function(){t.runQueue(n,T,function(){if(t.router._onTransitionValidated(t),a&&a.forEach(function(e){return D(e,t)}),n.length){var i=n[n.length-1],o=a?a.length:0;j(i,t,o,e)}else e()})})})},e.prototype.runQueue=function(e,t,n){function i(r){r>=e.length?n():t(e[r],o,function(){i(r+1)})}var o=this;i(0)},e.prototype.callHook=function(e,t,n){var i=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],o=i.expectBoolean,r=void 0!==o&&o,s=i.postActivate,a=void 0!==s&&s,c=i.processData,l=i.cleanup,h=this,u=!1,f=function(){l&&l(),h.abort()},p=function(e){if(a?v():f(),e&&!h.router._suppress)throw E("Uncaught error during transition: "),e instanceof Error?e:new Error(e)},d=function(e){try{p(e)}catch(t){setTimeout(function(){throw t},0)}},v=function(){return u?void E("transition.next() should be called only once."):(u=!0,h.aborted?void(l&&l()):void(n&&n()))},y=function(t){"boolean"==typeof t?t?v():f():x(t)?t.then(function(e){e?v():f()},d):e.length||v()},_=function(e){var t=void 0;try{t=c(e)}catch(n){return p(n)}x(t)?t.then(v,d):v()},b={to:h.to,from:h.from,abort:f,next:c?_:v,redirect:function(){h.redirect.apply(h,arguments)}},m=void 0;try{m=e.call(t,b)}catch(g){return p(g)}r?y(m):x(m)?c?m.then(_,d):m.then(v,d):c&&R(m)?_(m):e.length||v()},e.prototype.callHooks=function(e,t,n,i){var o=this;Array.isArray(e)?this.runQueue(e,function(e,n,r){o.aborted||o.callHook(e,t,r,i)},n):this.callHook(e,t,n,i)},e}(),ne=/^(component|subRoutes|fullPath)$/,ie=function he(e,t){var n=this;z.classCallCheck(this,he);var i=t._recognizer.recognize(e);i&&([].forEach.call(i,function(e){for(var t in e.handler)ne.test(t)||(n[t]=e.handler[t])}),this.query=i.queryParams,this.params=[].reduce.call(i,function(e,t){if(t.params)for(var n in t.params)e[n]=t.params[n];return e},{})),this.path=e,this.matched=i||t._notFoundHandler,Object.defineProperty(this,"router",{enumerable:!1,value:t}),Object.freeze(this)},oe=/\/$/,re=/[-.*+?^${}()|[\]\/\\]/g,se=/\?.*$/,ae={"abstract":ee,hash:X,html5:Z},ce=void 0,le=function(){function e(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=n.hashbang,o=void 0===i||i,r=n["abstract"],s=void 0!==r&&r,a=n.history,c=void 0!==a&&a,l=n.saveScrollPosition,h=void 0!==l&&l,u=n.transitionOnLoad,f=void 0!==u&&u,p=n.suppressTransitionError,d=void 0!==p&&p,v=n.root,y=void 0===v?null:v,_=n.linkActiveClass,b=void 0===_?"v-link-active":_;if(z.classCallCheck(this,e),!e.installed)throw new Error("Please install the Router with Vue.use() before creating an instance.");this.app=null,this._children=[],this._recognizer=new J,this._guardRecognizer=new J,this._started=!1,this._startCb=null,this._currentRoute={},this._currentTransition=null,this._previousTransition=null,this._notFoundHandler=null,this._notFoundRedirect=null,this._beforeEachHooks=[],this._afterEachHooks=[],this._rendered=!1,this._transitionOnLoad=f,this._root=y,this._abstract=s,this._hashbang=o;var m="undefined"!=typeof window&&window.history&&window.history.pushState;this._history=c&&m,this._historyFallback=c&&!m;var g=ce.util.inBrowser;this.mode=!g||this._abstract?"abstract":this._history?"html5":"hash";var E=ae[this.mode];this.history=new E({root:y,hashbang:this._hashbang,onChange:function(e,n,i){t._match(e,n,i)}}),this._saveScrollPosition=h,this._linkActiveClass=b,this._suppress=d}return e.prototype.map=function(e){for(var t in e)this.on(t,e[t]);return this},e.prototype.on=function(e,t){return"*"===e?this._notFound(t):this._addRoute(e,t,[]),this},e.prototype.redirect=function(e){for(var t in e)this._addRedirect(t,e[t]);return this},e.prototype.alias=function(e){for(var t in e)this._addAlias(t,e[t]);return this},e.prototype.beforeEach=function(e){return this._beforeEachHooks.push(e),this},e.prototype.afterEach=function(e){return this._afterEachHooks.push(e),this},e.prototype.go=function(e){var t=!1,n=!1;ce.util.isObject(e)&&(t=e.replace,n=e.append),e=this.stringifyPath(e),e&&this.history.go(e,t,n)},e.prototype.replace=function(e){"string"==typeof e&&(e={path:e}),e.replace=!0,this.go(e)},e.prototype.start=function(e,t,n){if(this._started)return void E("already started.");if(this._started=!0,this._startCb=n,!this.app){if(!e||!t)throw new Error("Must start vue-router with a component and a root container.");if(e instanceof ce)throw new Error("Must start vue-router with a component, not a Vue instance.");this._appContainer=t;var i=this._appConstructor="function"==typeof e?e:ce.extend(e);i.options.name=i.options.name||"RouterApp"}if(this._historyFallback){var o=window.location,r=new Z({root:this._root}),s=r.root?o.pathname.replace(r.rootRE,""):o.pathname;if(s&&"/"!==s)return void o.assign((r.root||"")+"/"+this.history.formatPath(s)+o.search)}this.history.start()},e.prototype.stop=function(){this.history.stop(),this._started=!1},e.prototype.stringifyPath=function(e){var t="";if(e&&"object"==typeof e){if(e.name){var n=ce.util.extend,i=this._currentTransition&&this._currentTransition.to.params,o=e.params||{},r=i?n(n({},i),o):o;t=encodeURI(this._recognizer.generate(e.name,r))}else e.path&&(t=encodeURI(e.path));if(e.query){var s=this._recognizer.generateQueryString(e.query);t+=t.indexOf("?")>-1?"&"+s.slice(1):s}}else t=encodeURI(e?e+"":"");return t},e.prototype._addRoute=function(e,t,n){if(H(e,t),t.path=e,t.fullPath=(n.reduce(function(e,t){return e+t.path},"")+e).replace("//","/"),n.push({path:e,handler:t}),this._recognizer.add(n,{as:t.name}),t.subRoutes)for(var i in t.subRoutes)this._addRoute(i,t.subRoutes[i],n.slice())},e.prototype._notFound=function(e){H("*",e),this._notFoundHandler=[{handler:e}]},e.prototype._addRedirect=function(e,t){"*"===e?this._notFoundRedirect=t:this._addGuard(e,t,this.replace)},e.prototype._addAlias=function(e,t){this._addGuard(e,t,this._match)},e.prototype._addGuard=function(e,t,n){var i=this;this._guardRecognizer.add([{path:e,handler:function(e,o){var r=$(t,e.params,o);n.call(i,r)}}])},e.prototype._checkGuard=function(e){var t=this._guardRecognizer.recognize(e,!0);return t?(t[0].handler(t[0],t.queryParams),!0):this._notFoundRedirect&&(t=this._recognizer.recognize(e),!t)?(this.replace(this._notFoundRedirect),!0):void 0},e.prototype._match=function(e,t,n){var i=this;if(!this._checkGuard(e)){var o=this._currentRoute,r=this._currentTransition;if(r){if(r.to.path===e)return;if(o.path===e)return r.aborted=!0,void(this._currentTransition=this._prevTransition);r.aborted=!0}var s=new ie(e,this),a=new te(this,s,o);this._prevTransition=r,this._currentTransition=a,this.app||!function(){var e=i;i.app=new i._appConstructor({el:i._appContainer,created:function(){this.$router=e},_meta:{$route:s}})}();var c=this._beforeEachHooks,l=function(){a.start(function(){i._postTransition(s,t,n)})};c.length?a.runQueue(c,function(e,t,n){a===i._currentTransition&&a.callHook(e,null,n,{expectBoolean:!0})},l):l(),!this._rendered&&this._startCb&&this._startCb.call(null),this._rendered=!0}},e.prototype._onTransitionValidated=function(e){var t=this._currentRoute=e.to;this.app.$route!==t&&(this.app.$route=t,this._children.forEach(function(e){e.$route=t})),this._afterEachHooks.length&&this._afterEachHooks.forEach(function(t){return t.call(null,{to:e.to,from:e.from})}),this._currentTransition.done=!0},e.prototype._postTransition=function(e,t,n){var i=t&&t.pos;i&&this._saveScrollPosition?ce.nextTick(function(){window.scrollTo(i.x,i.y)}):n&&ce.nextTick(function(){var e=document.getElementById(n.slice(1));e&&window.scrollTo(window.scrollX,e.offsetTop)})},e}();return le.installed=!1,le.install=function(e){return le.installed?void E("already installed."):(ce=e,M(ce),L(ce),I(ce),Y.Vue=ce,void(le.installed=!0))},"undefined"!=typeof window&&window.Vue&&window.Vue.use(le),le})},function(e,t,n){var i=n(66);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(67);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(68);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(69);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(70);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(71);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(72);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(73);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(74);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(75);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){(function(t,n){/*!
	 * Vue.js v1.0.26
	 * (c) 2016 Evan You
	 * Released under the MIT License.
	 */
"use strict";function i(e,t,n){if(r(e,t))return void(e[t]=n);if(e._isVue)return void i(e._data,t,n);var o=e.__ob__;if(!o)return void(e[t]=n);if(o.convert(t,n),o.dep.notify(),o.vms)for(var s=o.vms.length;s--;){var a=o.vms[s];a._proxy(t),a._digest()}return n}function o(e,t){if(r(e,t)){delete e[t];var n=e.__ob__;if(!n)return void(e._isVue&&(delete e._data[t],e._digest()));if(n.dep.notify(),n.vms)for(var i=n.vms.length;i--;){var o=n.vms[i];o._unproxy(t),o._digest()}}}function r(e,t){return Sn.call(e,t)}function s(e){return Vn.test(e)}function a(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function c(e){return null==e?"":e.toString()}function l(e){if("string"!=typeof e)return e;var t=Number(e);return isNaN(t)?e:t}function h(e){return"true"===e||"false"!==e&&e}function u(e){var t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t!==n||34!==t&&39!==t?e:e.slice(1,-1)}function f(e){return e.replace(Pn,p)}function p(e,t){return t?t.toUpperCase():""}function d(e){return e.replace(Rn,"$1-$2").toLowerCase()}function v(e){return e.replace(Fn,p)}function y(e,t){return function(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}}function _(e,t){t=t||0;for(var n=e.length-t,i=new Array(n);n--;)i[n]=e[n+t];return i}function b(e,t){for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}function m(e){return null!==e&&"object"==typeof e}function g(e){return Mn.call(e)===Ln}function E(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}function w(e,t){var n,i,o,r,s,a=function c(){var a=Date.now()-r;a<t&&a>=0?n=setTimeout(c,t-a):(n=null,s=e.apply(o,i),n||(o=i=null))};return function(){return o=this,i=arguments,r=Date.now(),n||(n=setTimeout(a,t)),s}}function x(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function k(e){var t=function n(){if(!n.cancelled)return e.apply(this,arguments)};return t.cancel=function(){t.cancelled=!0},t}function C(e,t){return e==t||!(!m(e)||!m(t))&&JSON.stringify(e)===JSON.stringify(t)}function $(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap=Object.create(null)}function N(){var e,t=ai.slice(pi,ui).trim();if(t){e={};var n=t.match(gi);e.name=n[0],n.length>1&&(e.args=n.slice(1).map(O))}e&&(ci.filters=ci.filters||[]).push(e),pi=ui+1}function O(e){if(Ei.test(e))return{value:l(e),dynamic:!1};var t=u(e),n=t===e;return{value:n?e:t,dynamic:n}}function A(e){var t=mi.get(e);if(t)return t;for(ai=e,di=vi=!1,yi=_i=bi=0,pi=0,ci={},ui=0,fi=ai.length;ui<fi;ui++)if(hi=li,li=ai.charCodeAt(ui),di)39===li&&92!==hi&&(di=!di);else if(vi)34===li&&92!==hi&&(vi=!vi);else if(124===li&&124!==ai.charCodeAt(ui+1)&&124!==ai.charCodeAt(ui-1))null==ci.expression?(pi=ui+1,ci.expression=ai.slice(0,ui).trim()):N();else switch(li){case 34:vi=!0;break;case 39:di=!0;break;case 40:bi++;break;case 41:bi--;break;case 91:_i++;break;case 93:_i--;break;case 123:yi++;break;case 125:yi--}return null==ci.expression?ci.expression=ai.slice(0,ui).trim():0!==pi&&N(),mi.put(e,ci),ci}function T(e){return e.replace(xi,"\\$&")}function j(){var e=T(ji.delimiters[0]),t=T(ji.delimiters[1]),n=T(ji.unsafeDelimiters[0]),i=T(ji.unsafeDelimiters[1]);Ci=new RegExp(n+"((?:.|\\n)+?)"+i+"|"+e+"((?:.|\\n)+?)"+t,"g"),$i=new RegExp("^"+n+"((?:.|\\n)+?)"+i+"$"),ki=new $(1e3)}function D(e){ki||j();var t=ki.get(e);if(t)return t;if(!Ci.test(e))return null;for(var n,i,o,r,s,a,c=[],l=Ci.lastIndex=0;n=Ci.exec(e);)i=n.index,i>l&&c.push({value:e.slice(l,i)}),o=$i.test(n[0]),r=o?n[1]:n[2],s=r.charCodeAt(0),a=42===s,r=a?r.slice(1):r,c.push({tag:!0,value:r.trim(),html:o,oneTime:a}),l=i+n[0].length;return l<e.length&&c.push({value:e.slice(l)}),ki.put(e,c),c}function S(e,t){return e.length>1?e.map(function(e){return V(e,t)}).join("+"):V(e[0],t,!0)}function V(e,t,n){return e.tag?e.oneTime&&t?'"'+t.$eval(e.value)+'"':P(e.value,n):'"'+e.value+'"'}function P(e,t){if(Ni.test(e)){var n=A(e);return n.filters?"this._applyFilters("+n.expression+",null,"+JSON.stringify(n.filters)+",false)":"("+e+")"}return t?e:"("+e+")"}function R(e,t,n,i){L(e,1,function(){t.appendChild(e)},n,i)}function F(e,t,n,i){L(e,1,function(){W(e,t)},n,i)}function M(e,t,n){L(e,-1,function(){J(e)},t,n)}function L(e,t,n,i,o){var r=e.__v_trans;if(!r||!r.hooks&&!Xn||!i._isCompiled||i.$parent&&!i.$parent._isCompiled)return n(),void(o&&o());var s=t>0?"enter":"leave";r[s](n,o)}function I(e){if("string"==typeof e){var t=e;e=document.querySelector(e),e||"production"!==n.env.NODE_ENV&&Di("Cannot find element: "+t)}return e}function H(e){if(!e)return!1;var t=e.ownerDocument.documentElement,n=e.parentNode;return t===e||t===n||!(!n||1!==n.nodeType||!t.contains(n))}function z(e,t){var n=e.getAttribute(t);return null!==n&&e.removeAttribute(t),n}function B(e,t){var n=z(e,":"+t);return null===n&&(n=z(e,"v-bind:"+t)),n}function U(e,t){return e.hasAttribute(t)||e.hasAttribute(":"+t)||e.hasAttribute("v-bind:"+t)}function W(e,t){t.parentNode.insertBefore(e,t)}function q(e,t){t.nextSibling?W(e,t.nextSibling):t.parentNode.appendChild(e)}function J(e){e.parentNode.removeChild(e)}function Q(e,t){t.firstChild?W(e,t.firstChild):t.appendChild(e)}function Y(e,t){var n=e.parentNode;n&&n.replaceChild(t,e)}function G(e,t,n,i){e.addEventListener(t,n,i)}function K(e,t,n){e.removeEventListener(t,n)}function Z(e){var t=e.className;return"object"==typeof t&&(t=t.baseVal||""),t}function X(e,t){qn&&!/svg$/.test(e.namespaceURI)?e.className=t:e.setAttribute("class",t)}function ee(e,t){if(e.classList)e.classList.add(t);else{var n=" "+Z(e)+" ";n.indexOf(" "+t+" ")<0&&X(e,(n+t).trim())}}function te(e,t){if(e.classList)e.classList.remove(t);else{for(var n=" "+Z(e)+" ",i=" "+t+" ";n.indexOf(i)>=0;)n=n.replace(i," ");X(e,n.trim())}e.className||e.removeAttribute("class")}function ne(e,t){var n,i;if(re(e)&&he(e.content)&&(e=e.content),e.hasChildNodes())for(ie(e),i=t?document.createDocumentFragment():document.createElement("div");n=e.firstChild;)i.appendChild(n);return i}function ie(e){for(var t;t=e.firstChild,oe(t);)e.removeChild(t);for(;t=e.lastChild,oe(t);)e.removeChild(t)}function oe(e){return e&&(3===e.nodeType&&!e.data.trim()||8===e.nodeType)}function re(e){return e.tagName&&"template"===e.tagName.toLowerCase()}function se(e,t){var n=ji.debug?document.createComment(e):document.createTextNode(t?" ":"");return n.__v_anchor=!0,n}function ae(e){if(e.hasAttributes())for(var t=e.attributes,n=0,i=t.length;n<i;n++){var o=t[n].name;if(Pi.test(o))return f(o.replace(Pi,""))}}function ce(e,t,n){for(var i;e!==t;)i=e.nextSibling,n(e),e=i;n(t)}function le(e,t,n,i,o){function r(){if(a++,s&&a>=c.length){for(var e=0;e<c.length;e++)i.appendChild(c[e]);o&&o()}}var s=!1,a=0,c=[];ce(e,t,function(e){e===t&&(s=!0),c.push(e),M(e,n,r)})}function he(e){return e&&11===e.nodeType}function ue(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function fe(e,t){var i=e.tagName.toLowerCase(),o=e.hasAttributes();if(Ri.test(i)||Fi.test(i)){if(o)return pe(e,t)}else{if(ge(t,"components",i))return{id:i};var r=o&&pe(e,t);if(r)return r;if("production"!==n.env.NODE_ENV){var s=t._componentNameMap&&t._componentNameMap[i];s?Di("Unknown custom element: <"+i+"> - did you mean <"+s+">? HTML is case-insensitive, remember to use kebab-case in templates."):Mi(e,i)&&Di("Unknown custom element: <"+i+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.')}}}function pe(e,t){var n=e.getAttribute("is");if(null!=n){if(ge(t,"components",n))return e.removeAttribute("is"),{id:n}}else if(n=B(e,"is"),null!=n)return{id:n,dynamic:!0}}function de(e,t){var n,o,s;for(n in t)o=e[n],s=t[n],r(e,n)?m(o)&&m(s)&&de(o,s):i(e,n,s);return e}function ve(e,t){var n=Object.create(e||null);return t?b(n,be(t)):n}function ye(e){if(e.components){var t,i=e.components=be(e.components),o=Object.keys(i);if("production"!==n.env.NODE_ENV)var r=e._componentNameMap={};for(var s=0,a=o.length;s<a;s++){var c=o[s];Ri.test(c)||Fi.test(c)?"production"!==n.env.NODE_ENV&&Di("Do not use built-in or reserved HTML elements as component id: "+c):("production"!==n.env.NODE_ENV&&(r[c.replace(/-/g,"").toLowerCase()]=d(c)),t=i[c],g(t)&&(i[c]=Nn.extend(t)))}}}function _e(e){var t,n,i=e.props;if(In(i))for(e.props={},t=i.length;t--;)n=i[t],"string"==typeof n?e.props[n]=null:n.name&&(e.props[n.name]=n);else if(g(i)){var o=Object.keys(i);for(t=o.length;t--;)n=i[o[t]],"function"==typeof n&&(i[o[t]]={type:n})}}function be(e){if(In(e)){for(var t,i={},o=e.length;o--;){t=e[o];var r="function"==typeof t?t.options&&t.options.name||t.id:t.name||t.id;r?i[r]=t:"production"!==n.env.NODE_ENV&&Di('Array-syntax assets must provide a "name" or "id" field.')}return i}return e}function me(e,t,i){function o(n){var o=Li[n]||Ii;a[n]=o(e[n],t[n],i,n)}ye(t),_e(t),"production"!==n.env.NODE_ENV&&t.propsData&&!i&&Di("propsData can only be used as an instantiation option.");var s,a={};if(t["extends"]&&(e="function"==typeof t["extends"]?me(e,t["extends"].options,i):me(e,t["extends"],i)),t.mixins)for(var c=0,l=t.mixins.length;c<l;c++){var h=t.mixins[c],u=h.prototype instanceof Nn?h.options:h;e=me(e,u,i)}for(s in e)o(s);for(s in t)r(e,s)||o(s);return a}function ge(e,t,i,o){if("string"==typeof i){var r,s=e[t],a=s[i]||s[r=f(i)]||s[r.charAt(0).toUpperCase()+r.slice(1)];return"production"!==n.env.NODE_ENV&&o&&!a&&Di("Failed to resolve "+t.slice(0,-1)+": "+i,e),a}}function Ee(){this.id=Hi++,this.subs=[]}function we(e){Wi=!1,e(),Wi=!0}function xe(e){if(this.value=e,this.dep=new Ee,E(e,"__ob__",this),In(e)){var t=Hn?ke:Ce;t(e,Bi,Ui),this.observeArray(e)}else this.walk(e)}function ke(e,t){e.__proto__=t}function Ce(e,t,n){for(var i=0,o=n.length;i<o;i++){var r=n[i];E(e,r,t[r])}}function $e(e,t){if(e&&"object"==typeof e){var n;return r(e,"__ob__")&&e.__ob__ instanceof xe?n=e.__ob__:Wi&&(In(e)||g(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new xe(e)),n&&t&&n.addVm(t),n}}function Ne(e,t,n){var i=new Ee,o=Object.getOwnPropertyDescriptor(e,t);if(!o||o.configurable!==!1){var r=o&&o.get,s=o&&o.set,a=$e(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=r?r.call(e):n;if(Ee.target&&(i.depend(),a&&a.dep.depend(),In(t)))for(var o,s=0,c=t.length;s<c;s++)o=t[s],o&&o.__ob__&&o.__ob__.dep.depend();return t},set:function(t){var o=r?r.call(e):n;t!==o&&(s?s.call(e,t):n=t,a=$e(t),i.notify())}})}}function Oe(e){e.prototype._init=function(e){e=e||{},this.$el=null,this.$parent=e.parent,this.$root=this.$parent?this.$parent.$root:this,this.$children=[],this.$refs={},this.$els={},this._watchers=[],this._directives=[],this._uid=Ji++,this._isVue=!0,this._events={},this._eventsCount={},this._isFragment=!1,this._fragment=this._fragmentStart=this._fragmentEnd=null,this._isCompiled=this._isDestroyed=this._isReady=this._isAttached=this._isBeingDestroyed=this._vForRemoving=!1,this._unlinkFn=null,this._context=e._context||this.$parent,this._scope=e._scope,this._frag=e._frag,this._frag&&this._frag.children.push(this),this.$parent&&this.$parent.$children.push(this),e=this.$options=me(this.constructor.options,e,this),this._updateRef(),this._data={},this._callHook("init"),this._initState(),this._initEvents(),this._callHook("created"),e.el&&this.$mount(e.el)}}function Ae(e){if(void 0===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:case 48:return e;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return t>=97&&t<=122||t>=65&&t<=90?"ident":t>=49&&t<=57?"number":"else"}function Te(e){var t=e.trim();return("0"!==e.charAt(0)||!isNaN(e))&&(s(t)?u(t):"*"+t)}function je(e){function t(){var t=e[h+1];if(u===oo&&"'"===t||u===ro&&'"'===t)return h++,i="\\"+t,p[Yi](),!0}var n,i,o,r,s,a,c,l=[],h=-1,u=Xi,f=0,p=[];for(p[Gi]=function(){void 0!==o&&(l.push(o),o=void 0)},p[Yi]=function(){void 0===o?o=i:o+=i},p[Ki]=function(){p[Yi](),f++},p[Zi]=function(){if(f>0)f--,u=io,p[Yi]();else{if(f=0,o=Te(o),o===!1)return!1;p[Gi]()}};null!=u;)if(h++,n=e[h],"\\"!==n||!t()){if(r=Ae(n),c=co[u],s=c[r]||c["else"]||ao,s===ao)return;if(u=s[0],a=p[s[1]],a&&(i=s[2],i=void 0===i?n:i,a()===!1))return;if(u===so)return l.raw=e,l}}function De(e){var t=Qi.get(e);return t||(t=je(e),t&&Qi.put(e,t)),t}function Se(e,t){return ze(t).get(e)}function Ve(e,t,o){var r=e;if("string"==typeof t&&(t=je(t)),!t||!m(e))return!1;for(var s,a,c=0,l=t.length;c<l;c++)s=e,a=t[c],"*"===a.charAt(0)&&(a=ze(a.slice(1)).get.call(r,r)),c<l-1?(e=e[a],m(e)||(e={},"production"!==n.env.NODE_ENV&&s._isVue&&lo(t,s),i(s,a,e))):In(e)?e.$set(a,o):a in e?e[a]=o:("production"!==n.env.NODE_ENV&&e._isVue&&lo(t,e),i(e,a,o));return!0}function Pe(){}function Re(e,t){var n=ko.length;return ko[n]=t?e.replace(bo,"\\n"):e,'"'+n+'"'}function Fe(e){var t=e.charAt(0),n=e.slice(1);return po.test(n)?e:(n=n.indexOf('"')>-1?n.replace(go,Me):n,t+"scope."+n)}function Me(e,t){return ko[t]}function Le(e){yo.test(e)&&"production"!==n.env.NODE_ENV&&Di("Avoid using reserved keywords in expression: "+e),ko.length=0;var t=e.replace(mo,Re).replace(_o,"");return t=(" "+t).replace(wo,Fe).replace(go,Me),Ie(t)}function Ie(e){try{return new Function("scope","return "+e+";")}catch(t){return"production"!==n.env.NODE_ENV&&Di(t.toString().match(/unsafe-eval|CSP/)?"It seems you are using the default build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. Use the CSP-compliant build instead: http://vuejs.org/guide/installation.html#CSP-compliant-build":"Invalid expression. Generated function body: "+e),Pe}}function He(e){var t=De(e);return t?function(e,n){Ve(e,t,n)}:void("production"!==n.env.NODE_ENV&&Di("Invalid setter expression: "+e))}function ze(e,t){e=e.trim();var n=uo.get(e);if(n)return t&&!n.set&&(n.set=He(n.exp)),n;var i={exp:e};return i.get=Be(e)&&e.indexOf("[")<0?Ie("scope."+e):Le(e),t&&(i.set=He(e)),uo.put(e,i),i}function Be(e){return Eo.test(e)&&!xo.test(e)&&"Math."!==e.slice(0,5)}function Ue(){$o.length=0,No.length=0,Oo={},Ao={},To=!1}function We(){for(var e=!0;e;)e=!1,qe($o),qe(No),$o.length?e=!0:(Bn&&ji.devtools&&Bn.emit("flush"),Ue())}function qe(e){for(var t=0;t<e.length;t++){var i=e[t],o=i.id;if(Oo[o]=null,i.run(),"production"!==n.env.NODE_ENV&&null!=Oo[o]&&(Ao[o]=(Ao[o]||0)+1,Ao[o]>ji._maxUpdateCount)){Di('You may have an infinite update loop for watcher with expression "'+i.expression+'"',i.vm);break}}e.length=0}function Je(e){var t=e.id;if(null==Oo[t]){var n=e.user?No:$o;Oo[t]=n.length,n.push(e),To||(To=!0,oi(We))}}function Qe(e,t,n,i){i&&b(this,i);var o="function"==typeof t;if(this.vm=e,e._watchers.push(this),this.expression=t,this.cb=n,this.id=++jo,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ri,this.newDepIds=new ri,this.prevError=null,o)this.getter=t,this.setter=void 0;else{var r=ze(t,this.twoWay);this.getter=r.get,this.setter=r.set}this.value=this.lazy?void 0:this.get(),this.queued=this.shallow=!1}function Ye(e,t){var n=void 0,i=void 0;t||(t=Do,t.clear());var o=In(e),r=m(e);if((o||r)&&Object.isExtensible(e)){if(e.__ob__){var s=e.__ob__.dep.id;if(t.has(s))return;t.add(s)}if(o)for(n=e.length;n--;)Ye(e[n],t);else if(r)for(i=Object.keys(e),n=i.length;n--;)Ye(e[i[n]],t)}}function Ge(e){return re(e)&&he(e.content)}function Ke(e,t){var n=t?e:e.trim(),i=Vo.get(n);if(i)return i;var o=document.createDocumentFragment(),r=e.match(Fo),s=Mo.test(e),a=Lo.test(e);if(r||s||a){var c=r&&r[1],l=Ro[c]||Ro.efault,h=l[0],u=l[1],f=l[2],p=document.createElement("div");for(p.innerHTML=u+e+f;h--;)p=p.lastChild;for(var d;d=p.firstChild;)o.appendChild(d)}else o.appendChild(document.createTextNode(e));return t||ie(o),Vo.put(n,o),o}function Ze(e){if(Ge(e))return Ke(e.innerHTML);if("SCRIPT"===e.tagName)return Ke(e.textContent);for(var t,n=Xe(e),i=document.createDocumentFragment();t=n.firstChild;)i.appendChild(t);return ie(i),i}function Xe(e){if(!e.querySelectorAll)return e.cloneNode();var t,n,i,o=e.cloneNode(!0);if(Io){var r=o;if(Ge(e)&&(e=e.content,r=o.content),n=e.querySelectorAll("template"),n.length)for(i=r.querySelectorAll("template"),t=i.length;t--;)i[t].parentNode.replaceChild(Xe(n[t]),i[t])}if(Ho)if("TEXTAREA"===e.tagName)o.value=e.value;else if(n=e.querySelectorAll("textarea"),n.length)for(i=o.querySelectorAll("textarea"),t=i.length;t--;)i[t].value=n[t].value;return o}function et(e,t,n){var i,o;return he(e)?(ie(e),t?Xe(e):e):("string"==typeof e?n||"#"!==e.charAt(0)?o=Ke(e,n):(o=Po.get(e),o||(i=document.getElementById(e.slice(1)),i&&(o=Ze(i),Po.put(e,o)))):e.nodeType&&(o=Ze(e)),o&&t?Xe(o):o)}function tt(e,t,n,i,o,r){this.children=[],this.childFrags=[],this.vm=t,this.scope=o,this.inserted=!1,this.parentFrag=r,r&&r.childFrags.push(this),this.unlink=e(t,n,i,o,this);var s=this.single=1===n.childNodes.length&&!n.childNodes[0].__v_anchor;s?(this.node=n.childNodes[0],this.before=nt,this.remove=it):(this.node=se("fragment-start"),this.end=se("fragment-end"),this.frag=n,Q(this.node,n),n.appendChild(this.end),this.before=ot,this.remove=rt),this.node.__v_frag=this}function nt(e,t){this.inserted=!0;var n=t!==!1?F:W;n(this.node,e,this.vm),H(this.node)&&this.callHook(st)}function it(){this.inserted=!1;var e=H(this.node),t=this;this.beforeRemove(),M(this.node,this.vm,function(){e&&t.callHook(at),t.destroy()})}function ot(e,t){this.inserted=!0;var n=this.vm,i=t!==!1?F:W;ce(this.node,this.end,function(t){i(t,e,n)}),H(this.node)&&this.callHook(st)}function rt(){this.inserted=!1;var e=this,t=H(this.node);this.beforeRemove(),le(this.node,this.end,this.vm,this.frag,function(){t&&e.callHook(at),e.destroy()})}function st(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function at(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}function ct(e,t){this.vm=e;var n,i="string"==typeof t;i||re(t)&&!t.hasAttribute("v-if")?n=et(t,!0):(n=document.createDocumentFragment(),n.appendChild(t)),this.template=n;var o,r=e.constructor.cid;if(r>0){var s=r+(i?t:ue(t));o=Uo.get(s),o||(o=Lt(n,e.$options,!0),Uo.put(s,o))}else o=Lt(n,e.$options,!0);this.linker=o}function lt(e,t,n){var i=e.node.previousSibling;if(i){for(e=i.__v_frag;!(e&&e.forId===n&&e.inserted||i===t);){if(i=i.previousSibling,!i)return;e=i.__v_frag}return e}}function ht(e){var t=e.node;if(e.end)for(;!t.__vue__&&t!==e.end&&t.nextSibling;)t=t.nextSibling;return t.__vue__}function ut(e){for(var t=-1,n=new Array(Math.floor(e));++t<e;)n[t]=t;return n}function ft(e,t,n,i){return i?"$index"===i?e:i.charAt(0).match(/\w/)?Se(n,i):n[i]:t||n}function pt(e,t,n){for(var i,o,r,s=t?[]:null,a=0,c=e.options.length;a<c;a++)if(i=e.options[a],r=n?i.hasAttribute("selected"):i.selected){if(o=i.hasOwnProperty("_value")?i._value:i.value,!t)return o;s.push(o)}return s}function dt(e,t){for(var n=e.length;n--;)if(C(e[n],t))return n;return-1}function vt(e,t){var n=t.map(function(e){var t=e.charCodeAt(0);return t>47&&t<58?parseInt(e,10):1===e.length&&(t=e.toUpperCase().charCodeAt(0),t>64&&t<91)?t:ur[e]});return n=[].concat.apply([],n),function(t){if(n.indexOf(t.keyCode)>-1)return e.call(this,t)}}function yt(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function _t(e){return function(t){return t.preventDefault(),e.call(this,t)}}function bt(e){return function(t){if(t.target===t.currentTarget)return e.call(this,t)}}function mt(e){if(yr[e])return yr[e];var t=gt(e);return yr[e]=yr[t]=t,t}function gt(e){e=d(e);var t=f(e),n=t.charAt(0).toUpperCase()+t.slice(1);_r||(_r=document.createElement("div"));var i,o=pr.length;if("filter"!==t&&t in _r.style)return{kebab:e,camel:t};for(;o--;)if(i=dr[o]+n,i in _r.style)return{kebab:pr[o]+e,camel:i}}function Et(e){var t=[];if(In(e))for(var n=0,i=e.length;n<i;n++){var o=e[n];if(o)if("string"==typeof o)t.push(o);else for(var r in o)o[r]&&t.push(r)}else if(m(e))for(var s in e)e[s]&&t.push(s);return t}function wt(e,t,n){if(t=t.trim(),t.indexOf(" ")===-1)return void n(e,t);for(var i=t.split(/\s+/),o=0,r=i.length;o<r;o++)n(e,i[o])}function xt(e,t,n){function i(){++r>=o?n():e[r].call(t,i)}var o=e.length,r=0;e[0].call(t,i)}function kt(e,t,i){for(var o,r,a,c,l,h,u,p=[],v=Object.keys(t),y=v.length;y--;)if(r=v[y],o=t[r]||Sr,"production"===n.env.NODE_ENV||"$data"!==r)if(l=f(r),Vr.test(l)){if(u={name:r,path:l,options:o,mode:Dr.ONE_WAY,raw:null},a=d(r),null===(c=B(e,a))&&(null!==(c=B(e,a+".sync"))?u.mode=Dr.TWO_WAY:null!==(c=B(e,a+".once"))&&(u.mode=Dr.ONE_TIME)),null!==c)u.raw=c,h=A(c),c=h.expression,u.filters=h.filters,s(c)&&!h.filters?u.optimizedLiteral=!0:(u.dynamic=!0,"production"===n.env.NODE_ENV||u.mode!==Dr.TWO_WAY||Pr.test(c)||(u.mode=Dr.ONE_WAY,Di("Cannot bind two-way prop with non-settable parent path: "+c,i))),u.parentPath=c,"production"!==n.env.NODE_ENV&&o.twoWay&&u.mode!==Dr.TWO_WAY&&Di('Prop "'+r+'" expects a two-way binding type.',i);else if(null!==(c=z(e,a)))u.raw=c;else if("production"!==n.env.NODE_ENV){var _=l.toLowerCase();c=/[A-Z\-]/.test(r)&&(e.getAttribute(_)||e.getAttribute(":"+_)||e.getAttribute("v-bind:"+_)||e.getAttribute(":"+_+".once")||e.getAttribute("v-bind:"+_+".once")||e.getAttribute(":"+_+".sync")||e.getAttribute("v-bind:"+_+".sync")),c?Di("Possible usage error for prop `"+_+"` - did you mean `"+a+"`? HTML is case-insensitive, remember to use kebab-case for props in templates.",i):o.required&&Di("Missing required prop: "+r,i)}p.push(u)}else"production"!==n.env.NODE_ENV&&Di('Invalid prop key: "'+r+'". Prop keys must be valid identifiers.',i);else Di("Do not use $data as prop.",i);return Ct(p)}function Ct(e){return function(t,n){t._props={};for(var i,o,s,a,c,f=t.$options.propsData,p=e.length;p--;)if(i=e[p],c=i.raw,o=i.path,s=i.options,t._props[o]=i,f&&r(f,o)&&Nt(t,i,f[o]),null===c)Nt(t,i,void 0);else if(i.dynamic)i.mode===Dr.ONE_TIME?(a=(n||t._context||t).$get(i.parentPath),Nt(t,i,a)):t._context?t._bindDir({name:"prop",def:Fr,prop:i},null,null,n):Nt(t,i,t.$get(i.parentPath));else if(i.optimizedLiteral){var v=u(c);a=v===c?h(l(c)):v,Nt(t,i,a)}else a=s.type===Boolean&&(""===c||c===d(i.name))||c,Nt(t,i,a)}}function $t(e,t,n,i){var o=t.dynamic&&Be(t.parentPath),r=n;void 0===r&&(r=At(e,t)),r=jt(t,r,e);var s=r!==n;Tt(t,r,e)||(r=void 0),o&&!s?we(function(){i(r)}):i(r)}function Nt(e,t,n){$t(e,t,n,function(n){Ne(e,t.path,n)})}function Ot(e,t,n){$t(e,t,n,function(n){e[t.path]=n})}function At(e,t){var i=t.options;if(!r(i,"default"))return i.type!==Boolean&&void 0;var o=i["default"];return m(o)&&"production"!==n.env.NODE_ENV&&Di('Invalid default value for prop "'+t.name+'": Props with type Object/Array must use a factory function to return the default value.',e),"function"==typeof o&&i.type!==Function?o.call(e):o}function Tt(e,t,i){if(!e.options.required&&(null===e.raw||null==t))return!0;var o=e.options,r=o.type,s=!r,a=[];if(r){In(r)||(r=[r]);for(var c=0;c<r.length&&!s;c++){var l=Dt(t,r[c]);a.push(l.expectedType),s=l.valid}}if(!s)return"production"!==n.env.NODE_ENV&&Di('Invalid prop: type check failed for prop "'+e.name+'". Expected '+a.map(St).join(", ")+", got "+Vt(t)+".",i),!1;var h=o.validator;return!(h&&!h(t))||("production"!==n.env.NODE_ENV&&Di('Invalid prop: custom validator check failed for prop "'+e.name+'".',i),!1)}function jt(e,t,i){var o=e.options.coerce;return o?"function"==typeof o?o(t):("production"!==n.env.NODE_ENV&&Di('Invalid coerce for prop "'+e.name+'": expected function, got '+typeof o+".",i),t):t}function Dt(e,t){var n,i;return t===String?(i="string",n=typeof e===i):t===Number?(i="number",n=typeof e===i):t===Boolean?(i="boolean",n=typeof e===i):t===Function?(i="function",n=typeof e===i):t===Object?(i="object",n=g(e)):t===Array?(i="array",n=In(e)):n=e instanceof t,{valid:n,expectedType:i}}function St(e){return e?e.charAt(0).toUpperCase()+e.slice(1):"custom type"}function Vt(e){return Object.prototype.toString.call(e).slice(8,-1)}function Pt(e){Mr.push(e),Lr||(Lr=!0,oi(Rt))}function Rt(){for(var e=document.documentElement.offsetHeight,t=0;t<Mr.length;t++)Mr[t]();return Mr=[],Lr=!1,e}function Ft(e,t,i,o){this.id=t,this.el=e,this.enterClass=i&&i.enterClass||t+"-enter",this.leaveClass=i&&i.leaveClass||t+"-leave",this.hooks=i,this.vm=o,this.pendingCssEvent=this.pendingCssCb=this.cancel=this.pendingJsCb=this.op=this.cb=null,this.justEntered=!1,this.entered=this.left=!1,this.typeCache={},this.type=i&&i.type,"production"!==n.env.NODE_ENV&&this.type&&this.type!==Ir&&this.type!==Hr&&Di('invalid CSS transition type for transition="'+this.id+'": '+this.type,o);var r=this;["enterNextTick","enterDone","leaveNextTick","leaveDone"].forEach(function(e){r[e]=y(r[e],r)})}function Mt(e){if(/svg$/.test(e.namespaceURI)){var t=e.getBoundingClientRect();return!(t.width||t.height)}return!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function Lt(e,t,n){var i=n||!t._asComponent?qt(e,t):null,o=i&&i.terminal||hn(e)||!e.hasChildNodes()?null:Zt(e.childNodes,t);return function(e,t,n,r,s){var a=_(t.childNodes),c=It(function(){i&&i(e,t,n,r,s),o&&o(e,a,n,r,s)},e);return zt(e,c)}}function It(e,t){"production"===n.env.NODE_ENV&&(t._directives=[]);var i=t._directives.length;e();var o=t._directives.slice(i);o.sort(Ht);for(var r=0,s=o.length;r<s;r++)o[r]._bind();return o}function Ht(e,t){return e=e.descriptor.def.priority||es,t=t.descriptor.def.priority||es,e>t?-1:e===t?0:1}function zt(e,t,n,i){function o(o){Bt(e,t,o),n&&i&&Bt(n,i)}return o.dirs=t,o}function Bt(e,t,i){for(var o=t.length;o--;)t[o]._teardown(),"production"===n.env.NODE_ENV||i||e._directives.$remove(t[o])}function Ut(e,t,n,i){var o=kt(t,n,e),r=It(function(){o(e,i)},e);return zt(e,r)}function Wt(e,t,i){var o,r,s=t._containerAttrs,a=t._replacerAttrs;if(11!==e.nodeType)t._asComponent?(s&&i&&(o=sn(s,i)),a&&(r=sn(a,t))):r=sn(e.attributes,t);else if("production"!==n.env.NODE_ENV&&s){var c=s.filter(function(e){return e.name.indexOf("_v-")<0&&!Gr.test(e.name)&&"slot"!==e.name}).map(function(e){return'"'+e.name+'"'});if(c.length){var l=c.length>1;Di("Attribute"+(l?"s ":" ")+c.join(", ")+(l?" are":" is")+" ignored on component <"+t.el.tagName.toLowerCase()+"> because the component is a fragment instance: http://vuejs.org/guide/components.html#Fragment-Instance")}}return t._containerAttrs=t._replacerAttrs=null,function(e,t,n){var i,s=e._context;s&&o&&(i=It(function(){o(s,t,null,n)},s));var a=It(function(){r&&r(e,t)},e);return zt(e,a,s,i)}}function qt(e,t){var n=e.nodeType;return 1!==n||hn(e)?3===n&&e.data.trim()?Qt(e,t):null:Jt(e,t)}function Jt(e,t){if("TEXTAREA"===e.tagName){var n=D(e.value);n&&(e.setAttribute(":value",S(n)),e.value="")}var i,o=e.hasAttributes(),r=o&&_(e.attributes);return o&&(i=nn(e,r,t)),i||(i=en(e,t)),i||(i=tn(e,t)),!i&&o&&(i=sn(r,t)),i}function Qt(e,t){if(e._skip)return Yt;var n=D(e.wholeText);if(!n)return null;for(var i=e.nextSibling;i&&3===i.nodeType;)i._skip=!0,i=i.nextSibling;for(var o,r,s=document.createDocumentFragment(),a=0,c=n.length;a<c;a++)r=n[a],o=r.tag?Gt(r,t):document.createTextNode(r.value),s.appendChild(o);return Kt(n,s,t)}function Yt(e,t){J(t)}function Gt(e,t){function n(t){if(!e.descriptor){var n=A(e.value);e.descriptor={name:t,def:Ar[t],expression:n.expression,filters:n.filters}}}var i;return e.oneTime?i=document.createTextNode(e.value):e.html?(i=document.createComment("v-html"),n("html")):(i=document.createTextNode(" "),n("text")),i}function Kt(e,t){return function(n,i,o,r){for(var s,a,l,h=t.cloneNode(!0),u=_(h.childNodes),f=0,p=e.length;f<p;f++)s=e[f],a=s.value,s.tag&&(l=u[f],s.oneTime?(a=(r||n).$eval(a),s.html?Y(l,et(a,!0)):l.data=c(a)):n._bindDir(s.descriptor,l,o,r));Y(i,h)}}function Zt(e,t){for(var n,i,o,r=[],s=0,a=e.length;s<a;s++)o=e[s],n=qt(o,t),i=n&&n.terminal||"SCRIPT"===o.tagName||!o.hasChildNodes()?null:Zt(o.childNodes,t),r.push(n,i);return r.length?Xt(r):null}function Xt(e){return function(t,n,i,o,r){for(var s,a,c,l=0,h=0,u=e.length;l<u;h++){s=n[h],a=e[l++],c=e[l++];var f=_(s.childNodes);a&&a(t,s,i,o,r),c&&c(t,f,i,o,r)}}}function en(e,t){var n=e.tagName.toLowerCase();if(!Ri.test(n)){var i=ge(t,"elementDirectives",n);return i?rn(e,n,"",t,i):void 0}}function tn(e,t){var n=fe(e,t);if(n){var i=ae(e),o={name:"component",ref:i,expression:n.id,def:Qr.component,modifiers:{literal:!n.dynamic}},r=function(e,t,n,r,s){i&&Ne((r||e).$refs,i,null),e._bindDir(o,t,n,r,s)};return r.terminal=!0,r}}function nn(e,t,n){if(null!==z(e,"v-pre"))return on;if(e.hasAttribute("v-else")){var i=e.previousElementSibling;if(i&&i.hasAttribute("v-if"))return on}for(var o,r,s,a,c,l,h,u,f,p,d=0,v=t.length;d<v;d++)o=t[d],r=o.name.replace(Zr,""),(c=r.match(Kr))&&(f=ge(n,"directives",c[1]),f&&f.terminal&&(!p||(f.priority||ts)>p.priority)&&(p=f,h=o.name,a=an(o.name),s=o.value,l=c[1],u=c[2]));return p?rn(e,l,s,n,p,h,u,a):void 0}function on(){}function rn(e,t,n,i,o,r,s,a){var c=A(n),l={name:t,arg:s,expression:c.expression,filters:c.filters,raw:n,attr:r,modifiers:a,def:o};"for"!==t&&"router-view"!==t||(l.ref=ae(e));var h=function(e,t,n,i,o){l.ref&&Ne((i||e).$refs,l.ref,null),e._bindDir(l,t,n,i,o)};return h.terminal=!0,h}function sn(e,t){function i(e,t,n){var i=n&&ln(n),o=!i&&A(s);y.push({name:e,attr:a,raw:c,def:t,arg:h,modifiers:u,expression:o&&o.expression,filters:o&&o.filters,interp:n,hasOneTime:i})}for(var o,r,s,a,c,l,h,u,f,p,d,v=e.length,y=[];v--;)if(o=e[v],r=a=o.name,s=c=o.value,p=D(s),h=null,u=an(r),r=r.replace(Zr,""),p)s=S(p),h=r,i("bind",Ar.bind,p),"production"!==n.env.NODE_ENV&&"class"===r&&Array.prototype.some.call(e,function(e){return":class"===e.name||"v-bind:class"===e.name})&&Di('class="'+c+'": Do not mix mustache interpolation and v-bind for "class" on the same element. Use one or the other.',t);else if(Xr.test(r))u.literal=!Yr.test(r),i("transition",Qr.transition);else if(Gr.test(r))h=r.replace(Gr,""),i("on",Ar.on);else if(Yr.test(r))l=r.replace(Yr,""),"style"===l||"class"===l?i(l,Qr[l]):(h=l,i("bind",Ar.bind));else if(d=r.match(Kr)){if(l=d[1],h=d[2],"else"===l)continue;f=ge(t,"directives",l,!0),f&&i(l,f)}if(y.length)return cn(y)}function an(e){var t=Object.create(null),n=e.match(Zr);if(n)for(var i=n.length;i--;)t[n[i].slice(1)]=!0;return t}function cn(e){return function(t,n,i,o,r){for(var s=e.length;s--;)t._bindDir(e[s],n,i,o,r)}}function ln(e){for(var t=e.length;t--;)if(e[t].oneTime)return!0}function hn(e){return"SCRIPT"===e.tagName&&(!e.hasAttribute("type")||"text/javascript"===e.getAttribute("type"))}function un(e,t){return t&&(t._containerAttrs=pn(e)),re(e)&&(e=et(e)),t&&(t._asComponent&&!t.template&&(t.template="<slot></slot>"),t.template&&(t._content=ne(e),e=fn(e,t))),he(e)&&(Q(se("v-start",!0),e),e.appendChild(se("v-end",!0))),e}function fn(e,t){var i=t.template,o=et(i,!0);if(o){var r=o.firstChild,s=r.tagName&&r.tagName.toLowerCase();return t.replace?(e===document.body&&"production"!==n.env.NODE_ENV&&Di("You are mounting an instance with a template to <body>. This will replace <body> entirely. You should probably use `replace: false` here."),o.childNodes.length>1||1!==r.nodeType||"component"===s||ge(t,"components",s)||U(r,"is")||ge(t,"elementDirectives",s)||r.hasAttribute("v-for")||r.hasAttribute("v-if")?o:(t._replacerAttrs=pn(r),dn(e,r),r)):(e.appendChild(o),e)}"production"!==n.env.NODE_ENV&&Di("Invalid template option: "+i)}function pn(e){if(1===e.nodeType&&e.hasAttributes())return _(e.attributes)}function dn(e,t){for(var n,i,o=e.attributes,r=o.length;r--;)n=o[r].name,i=o[r].value,t.hasAttribute(n)||ns.test(n)?"class"===n&&!D(i)&&(i=i.trim())&&i.split(/\s+/).forEach(function(e){ee(t,e)}):t.setAttribute(n,i)}function vn(e,t){if(t){for(var i,o,r=e._slotContents=Object.create(null),s=0,a=t.children.length;s<a;s++)i=t.children[s],(o=i.getAttribute("slot"))&&(r[o]||(r[o]=[])).push(i),"production"!==n.env.NODE_ENV&&B(i,"slot")&&Di('The "slot" attribute must be static.',e.$parent);for(o in r)r[o]=yn(r[o],t);if(t.hasChildNodes()){var c=t.childNodes;if(1===c.length&&3===c[0].nodeType&&!c[0].data.trim())return;r["default"]=yn(t.childNodes,t)}}}function yn(e,t){var n=document.createDocumentFragment();e=_(e);for(var i=0,o=e.length;i<o;i++){var r=e[i];!re(r)||r.hasAttribute("v-if")||r.hasAttribute("v-for")||(t.removeChild(r),r=et(r,!0)),n.appendChild(r)}return n}function _n(e){function t(){}function i(e,t){var n=new Qe(t,e,null,{lazy:!0});return function(){return n.dirty&&n.evaluate(),
Ee.target&&n.depend(),n.value}}Object.defineProperty(e.prototype,"$data",{get:function(){return this._data},set:function(e){e!==this._data&&this._setData(e)}}),e.prototype._initState=function(){this._initProps(),this._initMeta(),this._initMethods(),this._initData(),this._initComputed()},e.prototype._initProps=function(){var e=this.$options,t=e.el,i=e.props;i&&!t&&"production"!==n.env.NODE_ENV&&Di("Props will not be compiled if no `el` option is provided at instantiation.",this),t=e.el=I(t),this._propsUnlinkFn=t&&1===t.nodeType&&i?Ut(this,t,i,this._scope):null},e.prototype._initData=function(){var e=this.$options.data,t=this._data=e?e():{};g(t)||(t={},"production"!==n.env.NODE_ENV&&Di("data functions should return an object.",this));var i,o,s=this._props,a=Object.keys(t);for(i=a.length;i--;)o=a[i],s&&r(s,o)?"production"!==n.env.NODE_ENV&&Di('Data field "'+o+'" is already defined as a prop. To provide default value for a prop, use the "default" prop option; if you want to pass prop values to an instantiation call, use the "propsData" option.',this):this._proxy(o);$e(t,this)},e.prototype._setData=function(e){e=e||{};var t=this._data;this._data=e;var n,i,o;for(n=Object.keys(t),o=n.length;o--;)i=n[o],i in e||this._unproxy(i);for(n=Object.keys(e),o=n.length;o--;)i=n[o],r(this,i)||this._proxy(i);t.__ob__.removeVm(this),$e(e,this),this._digest()},e.prototype._proxy=function(e){if(!a(e)){var t=this;Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return t._data[e]},set:function(n){t._data[e]=n}})}},e.prototype._unproxy=function(e){a(e)||delete this[e]},e.prototype._digest=function(){for(var e=0,t=this._watchers.length;e<t;e++)this._watchers[e].update(!0)},e.prototype._initComputed=function(){var e=this.$options.computed;if(e)for(var n in e){var o=e[n],r={enumerable:!0,configurable:!0};"function"==typeof o?(r.get=i(o,this),r.set=t):(r.get=o.get?o.cache!==!1?i(o.get,this):y(o.get,this):t,r.set=o.set?y(o.set,this):t),Object.defineProperty(this,n,r)}},e.prototype._initMethods=function(){var e=this.$options.methods;if(e)for(var t in e)this[t]=y(e[t],this)},e.prototype._initMeta=function(){var e=this.$options._meta;if(e)for(var t in e)Ne(this,t,e[t])}}function bn(e){function t(e,t){for(var n,i,o,r=t.attributes,s=0,a=r.length;s<a;s++)n=r[s].name,os.test(n)&&(n=n.replace(os,""),i=r[s].value,Be(i)&&(i+=".apply(this, $arguments)"),o=(e._scope||e._context).$eval(i,!0),o._fromParent=!0,e.$on(n.replace(os),o))}function i(e,t,n){if(n){var i,r,s,a;for(r in n)if(i=n[r],In(i))for(s=0,a=i.length;s<a;s++)o(e,t,r,i[s]);else o(e,t,r,i)}}function o(e,t,i,r,s){var a=typeof r;if("function"===a)e[t](i,r,s);else if("string"===a){var c=e.$options.methods,l=c&&c[r];l?e[t](i,l,s):"production"!==n.env.NODE_ENV&&Di('Unknown method: "'+r+'" when registering callback for '+t+': "'+i+'".',e)}else r&&"object"===a&&o(e,t,i,r.handler,r)}function r(){this._isAttached||(this._isAttached=!0,this.$children.forEach(s))}function s(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function a(){this._isAttached&&(this._isAttached=!1,this.$children.forEach(c))}function c(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}e.prototype._initEvents=function(){var e=this.$options;e._asComponent&&t(this,e.el),i(this,"$on",e.events),i(this,"$watch",e.watch)},e.prototype._initDOMHooks=function(){this.$on("hook:attached",r),this.$on("hook:detached",a)},e.prototype._callHook=function(e){this.$emit("pre-hook:"+e);var t=this.$options[e];if(t)for(var n=0,i=t.length;n<i;n++)t[n].call(this);this.$emit("hook:"+e)}}function mn(){}function gn(e,t,i,o,r,s){this.vm=t,this.el=i,this.descriptor=e,this.name=e.name,this.expression=e.expression,this.arg=e.arg,this.modifiers=e.modifiers,this.filters=e.filters,this.literal=this.modifiers&&this.modifiers.literal,this._locked=!1,this._bound=!1,this._listeners=null,this._host=o,this._scope=r,this._frag=s,"production"!==n.env.NODE_ENV&&this.el&&(this.el._vue_directives=this.el._vue_directives||[],this.el._vue_directives.push(this))}function En(e){e.prototype._updateRef=function(e){var t=this.$options._ref;if(t){var n=(this._scope||this._context).$refs;e?n[t]===this&&(n[t]=null):n[t]=this}},e.prototype._compile=function(e){var t=this.$options,n=e;if(e=un(e,t),this._initElement(e),1!==e.nodeType||null===z(e,"v-pre")){var i=this._context&&this._context.$options,o=Wt(e,t,i);vn(this,t._content);var r,s=this.constructor;t._linkerCachable&&(r=s.linker,r||(r=s.linker=Lt(e,t)));var a=o(this,e,this._scope),c=r?r(this,e):Lt(e,t)(this,e);this._unlinkFn=function(){a(),c(!0)},t.replace&&Y(n,e),this._isCompiled=!0,this._callHook("compiled")}},e.prototype._initElement=function(e){he(e)?(this._isFragment=!0,this.$el=this._fragmentStart=e.firstChild,this._fragmentEnd=e.lastChild,3===this._fragmentStart.nodeType&&(this._fragmentStart.data=this._fragmentEnd.data=""),this._fragment=e):this.$el=e,this.$el.__vue__=this,this._callHook("beforeCompile")},e.prototype._bindDir=function(e,t,n,i,o){this._directives.push(new gn(e,this,t,n,i,o))},e.prototype._destroy=function(e,t){if(this._isBeingDestroyed)return void(t||this._cleanup());var n,i,o=this,r=function(){!n||i||t||o._cleanup()};e&&this.$el&&(i=!0,this.$remove(function(){i=!1,r()})),this._callHook("beforeDestroy"),this._isBeingDestroyed=!0;var s,a=this.$parent;for(a&&!a._isBeingDestroyed&&(a.$children.$remove(this),this._updateRef(!0)),s=this.$children.length;s--;)this.$children[s].$destroy();for(this._propsUnlinkFn&&this._propsUnlinkFn(),this._unlinkFn&&this._unlinkFn(),s=this._watchers.length;s--;)this._watchers[s].teardown();this.$el&&(this.$el.__vue__=null),n=!0,r()},e.prototype._cleanup=function(){this._isDestroyed||(this._frag&&this._frag.children.$remove(this),this._data&&this._data.__ob__&&this._data.__ob__.removeVm(this),this.$el=this.$parent=this.$root=this.$children=this._watchers=this._context=this._scope=this._directives=null,this._isDestroyed=!0,this._callHook("destroyed"),this.$off())}}function wn(e){e.prototype._applyFilters=function(e,t,n,i){var o,r,s,a,c,l,h,u,f;for(l=0,h=n.length;l<h;l++)if(o=n[i?h-l-1:l],r=ge(this.$options,"filters",o.name,!0),r&&(r=i?r.write:r.read||r,"function"==typeof r)){if(s=i?[e,t]:[e],c=i?2:1,o.args)for(u=0,f=o.args.length;u<f;u++)a=o.args[u],s[u+c]=a.dynamic?this.$get(a.value):a.value;e=r.apply(this,s)}return e},e.prototype._resolveComponent=function(t,i){var o;if(o="function"==typeof t?t:ge(this.$options,"components",t,!0))if(o.options)i(o);else if(o.resolved)i(o.resolved);else if(o.requested)o.pendingCallbacks.push(i);else{o.requested=!0;var r=o.pendingCallbacks=[i];o.call(this,function(t){g(t)&&(t=e.extend(t)),o.resolved=t;for(var n=0,i=r.length;n<i;n++)r[n](t)},function(e){"production"!==n.env.NODE_ENV&&Di("Failed to resolve async component"+("string"==typeof t?": "+t:"")+". "+(e?"\nReason: "+e:""))})}}}function xn(e){function t(e){return JSON.parse(JSON.stringify(e))}e.prototype.$get=function(e,t){var n=ze(e);if(n){if(t){var i=this;return function(){i.$arguments=_(arguments);var e=n.get.call(i,i);return i.$arguments=null,e}}try{return n.get.call(this,this)}catch(o){}}},e.prototype.$set=function(e,t){var n=ze(e,!0);n&&n.set&&n.set.call(this,this,t)},e.prototype.$delete=function(e){o(this._data,e)},e.prototype.$watch=function(e,t,n){var i,o=this;"string"==typeof e&&(i=A(e),e=i.expression);var r=new Qe(o,e,t,{deep:n&&n.deep,sync:n&&n.sync,filters:i&&i.filters,user:!n||n.user!==!1});return n&&n.immediate&&t.call(o,r.value),function(){r.teardown()}},e.prototype.$eval=function(e,t){if(rs.test(e)){var n=A(e),i=this.$get(n.expression,t);return n.filters?this._applyFilters(i,null,n.filters):i}return this.$get(e,t)},e.prototype.$interpolate=function(e){var t=D(e),n=this;return t?1===t.length?n.$eval(t[0].value)+"":t.map(function(e){return e.tag?n.$eval(e.value):e.value}).join(""):e},e.prototype.$log=function(e){var n=e?Se(this._data,e):this._data;if(n&&(n=t(n)),!e){var i;for(i in this.$options.computed)n[i]=t(this[i]);if(this._props)for(i in this._props)n[i]=t(this[i])}console.log(n)}}function kn(e){function t(e,t,i,o,r,s){t=n(t);var a=!H(t),c=o===!1||a?r:s,l=!a&&!e._isAttached&&!H(e.$el);return e._isFragment?(ce(e._fragmentStart,e._fragmentEnd,function(n){c(n,t,e)}),i&&i()):c(e.$el,t,e,i),l&&e._callHook("attached"),e}function n(e){return"string"==typeof e?document.querySelector(e):e}function i(e,t,n,i){t.appendChild(e),i&&i()}function o(e,t,n,i){W(e,t),i&&i()}function r(e,t,n){J(e),n&&n()}e.prototype.$nextTick=function(e){oi(e,this)},e.prototype.$appendTo=function(e,n,o){return t(this,e,n,o,i,R)},e.prototype.$prependTo=function(e,t,i){return e=n(e),e.hasChildNodes()?this.$before(e.firstChild,t,i):this.$appendTo(e,t,i),this},e.prototype.$before=function(e,n,i){return t(this,e,n,i,o,F)},e.prototype.$after=function(e,t,i){return e=n(e),e.nextSibling?this.$before(e.nextSibling,t,i):this.$appendTo(e.parentNode,t,i),this},e.prototype.$remove=function(e,t){if(!this.$el.parentNode)return e&&e();var n=this._isAttached&&H(this.$el);n||(t=!1);var i=this,o=function(){n&&i._callHook("detached"),e&&e()};if(this._isFragment)le(this._fragmentStart,this._fragmentEnd,this,this._fragment,o);else{var s=t===!1?r:M;s(this.$el,this,o)}return this}}function Cn(e){function t(e,t,i){var o=e.$parent;if(o&&i&&!n.test(t))for(;o;)o._eventsCount[t]=(o._eventsCount[t]||0)+i,o=o.$parent}e.prototype.$on=function(e,n){return(this._events[e]||(this._events[e]=[])).push(n),t(this,e,1),this},e.prototype.$once=function(e,t){function n(){i.$off(e,n),t.apply(this,arguments)}var i=this;return n.fn=t,this.$on(e,n),this},e.prototype.$off=function(e,n){var i;if(!arguments.length){if(this.$parent)for(e in this._events)i=this._events[e],i&&t(this,e,-i.length);return this._events={},this}if(i=this._events[e],!i)return this;if(1===arguments.length)return t(this,e,-i.length),this._events[e]=null,this;for(var o,r=i.length;r--;)if(o=i[r],o===n||o.fn===n){t(this,e,-1),i.splice(r,1);break}return this},e.prototype.$emit=function(e){var t="string"==typeof e;e=t?e:e.name;var n=this._events[e],i=t||!n;if(n){n=n.length>1?_(n):n;var o=t&&n.some(function(e){return e._fromParent});o&&(i=!1);for(var r=_(arguments,1),s=0,a=n.length;s<a;s++){var c=n[s],l=c.apply(this,r);l!==!0||o&&!c._fromParent||(i=!0)}}return i},e.prototype.$broadcast=function(e){var t="string"==typeof e;if(e=t?e:e.name,this._eventsCount[e]){var n=this.$children,i=_(arguments);t&&(i[0]={name:e,source:this});for(var o=0,r=n.length;o<r;o++){var s=n[o],a=s.$emit.apply(s,i);a&&s.$broadcast.apply(s,i)}return this}},e.prototype.$dispatch=function(e){var t=this.$emit.apply(this,arguments);if(t){var n=this.$parent,i=_(arguments);for(i[0]={name:e,source:this};n;)t=n.$emit.apply(n,i),n=t?n.$parent:null;return this}};var n=/^hook:/}function $n(e){function t(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")}e.prototype.$mount=function(e){return this._isCompiled?void("production"!==n.env.NODE_ENV&&Di("$mount() should be called only once.",this)):(e=I(e),e||(e=document.createElement("div")),this._compile(e),this._initDOMHooks(),H(this.$el)?(this._callHook("attached"),t.call(this)):this.$once("hook:attached",t),this)},e.prototype.$destroy=function(e,t){this._destroy(e,t)},e.prototype.$compile=function(e,t,n,i){return Lt(e,this.$options,!0)(this,e,t,n,i)}}function Nn(e){this._init(e)}function On(e,t,n){return n=n?parseInt(n,10):0,t=l(t),"number"==typeof t?e.slice(n,n+t):e}function An(e,t,n){if(e=ls(e),null==t)return e;if("function"==typeof t)return e.filter(t);t=(""+t).toLowerCase();for(var i,o,r,s,a="in"===n?3:2,c=Array.prototype.concat.apply([],_(arguments,a)),l=[],h=0,u=e.length;h<u;h++)if(i=e[h],r=i&&i.$value||i,s=c.length){for(;s--;)if(o=c[s],"$key"===o&&jn(i.$key,t)||jn(Se(r,o),t)){l.push(i);break}}else jn(i,t)&&l.push(i);return l}function Tn(e){function t(e,t,n){var o=i[n];return o&&("$key"!==o&&(m(e)&&"$value"in e&&(e=e.$value),m(t)&&"$value"in t&&(t=t.$value)),e=m(e)?Se(e,o):e,t=m(t)?Se(t,o):t),e===t?0:e>t?r:-r}var n=null,i=void 0;e=ls(e);var o=_(arguments,1),r=o[o.length-1];"number"==typeof r?(r=r<0?-1:1,o=o.length>1?o.slice(0,-1):o):r=1;var s=o[0];return s?("function"==typeof s?n=function(e,t){return s(e,t)*r}:(i=Array.prototype.concat.apply([],o),n=function(e,o,r){return r=r||0,r>=i.length-1?t(e,o,r):t(e,o,r)||n(e,o,r+1)}),e.slice().sort(n)):e}function jn(e,t){var n;if(g(e)){var i=Object.keys(e);for(n=i.length;n--;)if(jn(e[i[n]],t))return!0}else if(In(e)){for(n=e.length;n--;)if(jn(e[n],t))return!0}else if(null!=e)return e.toString().toLowerCase().indexOf(t)>-1}function Dn(e){function t(e){return new Function("return function "+v(e)+" (options) { this._init(options) }")()}e.options={directives:Ar,elementDirectives:cs,filters:us,transitions:{},components:{},partials:{},replace:!0},e.util=qi,e.config=ji,e.set=i,e["delete"]=o,e.nextTick=oi,e.compiler=is,e.FragmentFactory=ct,e.internalDirectives=Qr,e.parsers={path:ho,text:Oi,template:zo,directive:wi,expression:Co},e.cid=0;var r=1;e.extend=function(e){e=e||{};var i=this,o=0===i.cid;if(o&&e._Ctor)return e._Ctor;var s=e.name||i.options.name;"production"!==n.env.NODE_ENV&&(/^[a-zA-Z][\w-]*$/.test(s)||(Di('Invalid component name: "'+s+'". Component names can only contain alphanumeric characaters and the hyphen.'),s=null));var a=t(s||"VueComponent");return a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.cid=r++,a.options=me(i.options,e),a["super"]=i,a.extend=i.extend,ji._assetTypes.forEach(function(e){a[e]=i[e]}),s&&(a.options.components[s]=a),o&&(e._Ctor=a),a},e.use=function(e){if(!e.installed){var t=_(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):e.apply(null,t),e.installed=!0,this}},e.mixin=function(t){e.options=me(e.options,t)},ji._assetTypes.forEach(function(t){e[t]=function(i,o){return o?("production"!==n.env.NODE_ENV&&"component"===t&&(Ri.test(i)||Fi.test(i))&&Di("Do not use built-in or reserved HTML elements as component id: "+i),"component"===t&&g(o)&&(o.name||(o.name=i),o=e.extend(o)),this.options[t+"s"][i]=o,o):this.options[t+"s"][i]}}),b(e.transition,Vi)}var Sn=Object.prototype.hasOwnProperty,Vn=/^\s?(true|false|-?[\d\.]+|'[^']*'|"[^"]*")\s?$/,Pn=/-(\w)/g,Rn=/([a-z\d])([A-Z])/g,Fn=/(?:^|[-_\/])(\w)/g,Mn=Object.prototype.toString,Ln="[object Object]",In=Array.isArray,Hn="__proto__"in{},zn="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),Bn=zn&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,Un=zn&&window.navigator.userAgent.toLowerCase(),Wn=Un&&Un.indexOf("trident")>0,qn=Un&&Un.indexOf("msie 9.0")>0,Jn=Un&&Un.indexOf("android")>0,Qn=Un&&/(iphone|ipad|ipod|ios)/i.test(Un),Yn=Qn&&Un.match(/os ([\d_]+)/),Gn=Yn&&Yn[1].split("_"),Kn=Gn&&Number(Gn[0])>=9&&Number(Gn[1])>=3&&!window.indexedDB,Zn=void 0,Xn=void 0,ei=void 0,ti=void 0;if(zn&&!qn){var ni=void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend,ii=void 0===window.onanimationend&&void 0!==window.onwebkitanimationend;Zn=ni?"WebkitTransition":"transition",Xn=ni?"webkitTransitionEnd":"transitionend",ei=ii?"WebkitAnimation":"animation",ti=ii?"webkitAnimationEnd":"animationend"}var oi=function(){function e(){o=!1;var e=i.slice(0);i=[];for(var t=0;t<e.length;t++)e[t]()}var n,i=[],o=!1;if("undefined"==typeof MutationObserver||Kn){var r=zn?window:"undefined"!=typeof t?t:{};n=r.setImmediate||setTimeout}else{var s=1,a=new MutationObserver(e),c=document.createTextNode(s);a.observe(c,{characterData:!0}),n=function(){s=(s+1)%2,c.data=s}}return function(t,r){var s=r?function(){t.call(r)}:t;i.push(s),o||(o=!0,n(e,0))}}(),ri=void 0;"undefined"!=typeof Set&&Set.toString().match(/native code/)?ri=Set:(ri=function(){this.set=Object.create(null)},ri.prototype.has=function(e){return void 0!==this.set[e]},ri.prototype.add=function(e){this.set[e]=1},ri.prototype.clear=function(){this.set=Object.create(null)});var si=$.prototype;si.put=function(e,t){var n,i=this.get(e,!0);return i||(this.size===this.limit&&(n=this.shift()),i={key:e},this._keymap[e]=i,this.tail?(this.tail.newer=i,i.older=this.tail):this.head=i,this.tail=i,this.size++),i.value=t,n},si.shift=function(){var e=this.head;return e&&(this.head=this.head.newer,this.head.older=void 0,e.newer=e.older=void 0,this._keymap[e.key]=void 0,this.size--),e},si.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return n===this.tail?t?n:n.value:(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n,t?n:n.value)};var ai,ci,li,hi,ui,fi,pi,di,vi,yi,_i,bi,mi=new $(1e3),gi=/[^\s'"]+|'[^']*'|"[^"]*"/g,Ei=/^in$|^-?\d+/,wi=Object.freeze({parseDirective:A}),xi=/[-.*+?^${}()|[\]\/\\]/g,ki=void 0,Ci=void 0,$i=void 0,Ni=/[^|]\|[^|]/,Oi=Object.freeze({compileRegex:j,parseText:D,tokensToExp:S}),Ai=["{{","}}"],Ti=["{{{","}}}"],ji=Object.defineProperties({debug:!1,silent:!1,async:!0,warnExpressionErrors:!0,devtools:"production"!==n.env.NODE_ENV,_delimitersChanged:!0,_assetTypes:["component","directive","elementDirective","filter","transition","partial"],_propBindingModes:{ONE_WAY:0,TWO_WAY:1,ONE_TIME:2},_maxUpdateCount:100},{delimiters:{get:function(){return Ai},set:function(e){Ai=e,j()},configurable:!0,enumerable:!0},unsafeDelimiters:{get:function(){return Ti},set:function(e){Ti=e,j()},configurable:!0,enumerable:!0}}),Di=void 0,Si=void 0;"production"!==n.env.NODE_ENV&&!function(){var e="undefined"!=typeof console;Di=function(t,n){e&&!ji.silent&&console.error("[Vue warn]: "+t+(n?Si(n):""))},Si=function(e){var t=e._isVue?e.$options.name:e.name;return t?" (found in component: <"+d(t)+">)":""}}();var Vi=Object.freeze({appendWithTransition:R,beforeWithTransition:F,removeWithTransition:M,applyTransition:L}),Pi=/^v-ref:/,Ri=/^(div|p|span|img|a|b|i|br|ul|ol|li|h1|h2|h3|h4|h5|h6|code|pre|table|th|td|tr|form|label|input|select|option|nav|article|section|header|footer)$/i,Fi=/^(slot|partial|component)$/i,Mi=void 0;"production"!==n.env.NODE_ENV&&(Mi=function(e,t){return t.indexOf("-")>-1?e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:/HTMLUnknownElement/.test(e.toString())&&!/^(data|time|rtc|rb|details|dialog|summary)$/.test(t)});var Li=ji.optionMergeStrategies=Object.create(null);Li.data=function(e,t,i){return i?e||t?function(){var n="function"==typeof t?t.call(i):t,o="function"==typeof e?e.call(i):void 0;return n?de(n,o):o}:void 0:t?"function"!=typeof t?("production"!==n.env.NODE_ENV&&Di('The "data" option should be a function that returns a per-instance value in component definitions.',i),e):e?function(){return de(t.call(this),e.call(this))}:t:e},Li.el=function(e,t,i){if(!i&&t&&"function"!=typeof t)return void("production"!==n.env.NODE_ENV&&Di('The "el" option should be a function that returns a per-instance value in component definitions.',i));var o=t||e;return i&&"function"==typeof o?o.call(i):o},Li.init=Li.created=Li.ready=Li.attached=Li.detached=Li.beforeCompile=Li.compiled=Li.beforeDestroy=Li.destroyed=Li.activate=function(e,t){return t?e?e.concat(t):In(t)?t:[t]:e},ji._assetTypes.forEach(function(e){Li[e+"s"]=ve}),Li.watch=Li.events=function(e,t){if(!t)return e;if(!e)return t;var n={};b(n,e);for(var i in t){var o=n[i],r=t[i];o&&!In(o)&&(o=[o]),n[i]=o?o.concat(r):[r]}return n},Li.props=Li.methods=Li.computed=function(e,t){if(!t)return e;if(!e)return t;var n=Object.create(null);return b(n,e),b(n,t),n};var Ii=function(e,t){return void 0===t?e:t},Hi=0;Ee.target=null,Ee.prototype.addSub=function(e){this.subs.push(e)},Ee.prototype.removeSub=function(e){this.subs.$remove(e)},Ee.prototype.depend=function(){Ee.target.addDep(this)},Ee.prototype.notify=function(){for(var e=_(this.subs),t=0,n=e.length;t<n;t++)e[t].update()};var zi=Array.prototype,Bi=Object.create(zi);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=zi[e];E(Bi,e,function(){for(var n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];var o,r=t.apply(this,i),s=this.__ob__;switch(e){case"push":o=i;break;case"unshift":o=i;break;case"splice":o=i.slice(2)}return o&&s.observeArray(o),s.dep.notify(),r})}),E(zi,"$set",function(e,t){return e>=this.length&&(this.length=Number(e)+1),this.splice(e,1,t)[0]}),E(zi,"$remove",function(e){if(this.length){var t=x(this,e);return t>-1?this.splice(t,1):void 0}});var Ui=Object.getOwnPropertyNames(Bi),Wi=!0;xe.prototype.walk=function(e){for(var t=Object.keys(e),n=0,i=t.length;n<i;n++)this.convert(t[n],e[t[n]])},xe.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)$e(e[t])},xe.prototype.convert=function(e,t){Ne(this.value,e,t)},xe.prototype.addVm=function(e){(this.vms||(this.vms=[])).push(e)},xe.prototype.removeVm=function(e){this.vms.$remove(e)};var qi=Object.freeze({defineReactive:Ne,set:i,del:o,hasOwn:r,isLiteral:s,isReserved:a,_toString:c,toNumber:l,toBoolean:h,stripQuotes:u,camelize:f,hyphenate:d,classify:v,bind:y,toArray:_,extend:b,isObject:m,isPlainObject:g,def:E,debounce:w,indexOf:x,cancellable:k,looseEqual:C,isArray:In,hasProto:Hn,inBrowser:zn,devtools:Bn,isIE:Wn,isIE9:qn,isAndroid:Jn,isIos:Qn,iosVersionMatch:Yn,iosVersion:Gn,hasMutationObserverBug:Kn,get transitionProp(){return Zn},get transitionEndEvent(){return Xn},get animationProp(){return ei},get animationEndEvent(){return ti},nextTick:oi,get _Set(){return ri},query:I,inDoc:H,getAttr:z,getBindAttr:B,hasBindAttr:U,before:W,after:q,remove:J,prepend:Q,replace:Y,on:G,off:K,setClass:X,addClass:ee,removeClass:te,extractContent:ne,trimNode:ie,isTemplate:re,createAnchor:se,findRef:ae,mapNodeRange:ce,removeNodeRange:le,isFragment:he,getOuterHTML:ue,mergeOptions:me,resolveAsset:ge,checkComponentAttr:fe,commonTagRE:Ri,reservedTagRE:Fi,get warn(){return Di}}),Ji=0,Qi=new $(1e3),Yi=0,Gi=1,Ki=2,Zi=3,Xi=0,eo=1,to=2,no=3,io=4,oo=5,ro=6,so=7,ao=8,co=[];co[Xi]={ws:[Xi],ident:[no,Yi],"[":[io],eof:[so]},co[eo]={ws:[eo],".":[to],"[":[io],eof:[so]},co[to]={ws:[to],ident:[no,Yi]},co[no]={ident:[no,Yi],0:[no,Yi],number:[no,Yi],ws:[eo,Gi],".":[to,Gi],"[":[io,Gi],eof:[so,Gi]},co[io]={"'":[oo,Yi],'"':[ro,Yi],"[":[io,Ki],"]":[eo,Zi],eof:ao,"else":[io,Yi]},co[oo]={"'":[io,Yi],eof:ao,"else":[oo,Yi]},co[ro]={'"':[io,Yi],eof:ao,"else":[ro,Yi]};var lo;"production"!==n.env.NODE_ENV&&(lo=function(e,t){Di('You are setting a non-existent path "'+e.raw+'" on a vm instance. Consider pre-initializing the property with the "data" option for more reliable reactivity and better performance.',t)});var ho=Object.freeze({parsePath:De,getPath:Se,setPath:Ve}),uo=new $(1e3),fo="Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat",po=new RegExp("^("+fo.replace(/,/g,"\\b|")+"\\b)"),vo="break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,return,super,switch,throw,try,var,while,with,yield,enum,await,implements,package,protected,static,interface,private,public",yo=new RegExp("^("+vo.replace(/,/g,"\\b|")+"\\b)"),_o=/\s/g,bo=/\n/g,mo=/[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`)|new |typeof |void /g,go=/"(\d+)"/g,Eo=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,wo=/[^\w$\.](?:[A-Za-z_$][\w$]*)/g,xo=/^(?:true|false|null|undefined|Infinity|NaN)$/,ko=[],Co=Object.freeze({parseExpression:ze,isSimplePath:Be}),$o=[],No=[],Oo={},Ao={},To=!1,jo=0;Qe.prototype.get=function(){this.beforeGet();var e,t=this.scope||this.vm;try{e=this.getter.call(t,t)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating expression "'+this.expression+'": '+i.toString(),this.vm)}return this.deep&&Ye(e),this.preProcess&&(e=this.preProcess(e)),this.filters&&(e=t._applyFilters(e,null,this.filters,!1)),this.postProcess&&(e=this.postProcess(e)),this.afterGet(),e},Qe.prototype.set=function(e){var t=this.scope||this.vm;this.filters&&(e=t._applyFilters(e,this.value,this.filters,!0));try{this.setter.call(t,t,e)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating setter "'+this.expression+'": '+i.toString(),this.vm)}var o=t.$forContext;if(o&&o.alias===this.expression){if(o.filters)return void("production"!==n.env.NODE_ENV&&Di("It seems you are using two-way binding on a v-for alias ("+this.expression+"), and the v-for has filters. This will not work properly. Either remove the filters or use an array of objects and bind to object properties instead.",this.vm));o._withLock(function(){t.$key?o.rawValue[t.$key]=e:o.rawValue.$set(t.$index,e)})}},Qe.prototype.beforeGet=function(){Ee.target=this},Qe.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},Qe.prototype.afterGet=function(){Ee.target=null;for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Qe.prototype.update=function(e){this.lazy?this.dirty=!0:this.sync||!ji.async?this.run():(this.shallow=this.queued?!!e&&this.shallow:!!e,this.queued=!0,"production"!==n.env.NODE_ENV&&ji.debug&&(this.prevError=new Error("[vue] async stack trace")),Je(this))},Qe.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||(m(e)||this.deep)&&!this.shallow){var t=this.value;this.value=e;var i=this.prevError;if("production"!==n.env.NODE_ENV&&ji.debug&&i){this.prevError=null;try{this.cb.call(this.vm,e,t)}catch(o){throw oi(function(){throw i},0),o}}else this.cb.call(this.vm,e,t)}this.queued=this.shallow=!1}},Qe.prototype.evaluate=function(){var e=Ee.target;this.value=this.get(),this.dirty=!1,Ee.target=e},Qe.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},Qe.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||this.vm._vForRemoving||this.vm._watchers.$remove(this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1,this.vm=this.cb=this.value=null}};var Do=new ri,So={bind:function(){this.attr=3===this.el.nodeType?"data":"textContent"},update:function(e){this.el[this.attr]=c(e)}},Vo=new $(1e3),Po=new $(1e3),Ro={efault:[0,"",""],legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]};Ro.td=Ro.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Ro.option=Ro.optgroup=[1,'<select multiple="multiple">',"</select>"],Ro.thead=Ro.tbody=Ro.colgroup=Ro.caption=Ro.tfoot=[1,"<table>","</table>"],Ro.g=Ro.defs=Ro.symbol=Ro.use=Ro.image=Ro.text=Ro.circle=Ro.ellipse=Ro.line=Ro.path=Ro.polygon=Ro.polyline=Ro.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events"version="1.1">',"</svg>"];var Fo=/<([\w:-]+)/,Mo=/&#?\w+?;/,Lo=/<!--/,Io=function(){if(zn){var e=document.createElement("div");return e.innerHTML="<template>1</template>",!e.cloneNode(!0).firstChild.innerHTML}return!1}(),Ho=function(){if(zn){var e=document.createElement("textarea");return e.placeholder="t","t"===e.cloneNode(!0).value}return!1}(),zo=Object.freeze({cloneNode:Xe,parseTemplate:et}),Bo={bind:function(){8===this.el.nodeType&&(this.nodes=[],this.anchor=se("v-html"),Y(this.el,this.anchor))},update:function(e){e=c(e),this.nodes?this.swap(e):this.el.innerHTML=e},swap:function(e){for(var t=this.nodes.length;t--;)J(this.nodes[t]);var n=et(e,!0,!0);this.nodes=_(n.childNodes),W(n,this.anchor)}};tt.prototype.callHook=function(e){var t,n;for(t=0,n=this.childFrags.length;t<n;t++)this.childFrags[t].callHook(e);for(t=0,n=this.children.length;t<n;t++)e(this.children[t])},tt.prototype.beforeRemove=function(){var e,t;for(e=0,t=this.childFrags.length;e<t;e++)this.childFrags[e].beforeRemove(!1);for(e=0,t=this.children.length;e<t;e++)this.children[e].$destroy(!1,!0);var n=this.unlink.dirs;for(e=0,t=n.length;e<t;e++)n[e]._watcher&&n[e]._watcher.teardown()},tt.prototype.destroy=function(){this.parentFrag&&this.parentFrag.childFrags.$remove(this),this.node.__v_frag=null,this.unlink()};var Uo=new $(5e3);ct.prototype.create=function(e,t,n){var i=Xe(this.template);return new tt(this.linker,this.vm,i,e,t,n)};var Wo=700,qo=800,Jo=850,Qo=1100,Yo=1500,Go=1500,Ko=1750,Zo=2100,Xo=2200,er=2300,tr=0,nr={priority:Xo,terminal:!0,params:["track-by","stagger","enter-stagger","leave-stagger"],bind:function(){var e=this.expression.match(/(.*) (?:in|of) (.*)/);if(e){var t=e[1].match(/\((.*),(.*)\)/);t?(this.iterator=t[1].trim(),this.alias=t[2].trim()):this.alias=e[1].trim(),this.expression=e[2]}if(!this.alias)return void("production"!==n.env.NODE_ENV&&Di('Invalid v-for expression "'+this.descriptor.raw+'": alias is required.',this.vm));this.id="__v-for__"+ ++tr;var i=this.el.tagName;this.isOption=("OPTION"===i||"OPTGROUP"===i)&&"SELECT"===this.el.parentNode.tagName,this.start=se("v-for-start"),this.end=se("v-for-end"),Y(this.el,this.end),W(this.start,this.end),this.cache=Object.create(null),this.factory=new ct(this.vm,this.el)},update:function(e){this.diff(e),this.updateRef(),this.updateModel()},diff:function(e){var t,n,i,o,s,a,c=e[0],l=this.fromObject=m(c)&&r(c,"$key")&&r(c,"$value"),h=this.params.trackBy,u=this.frags,f=this.frags=new Array(e.length),p=this.alias,d=this.iterator,v=this.start,y=this.end,_=H(v),b=!u;for(t=0,n=e.length;t<n;t++)c=e[t],o=l?c.$key:null,s=l?c.$value:c,a=!m(s),i=!b&&this.getCachedFrag(s,t,o),i?(i.reused=!0,i.scope.$index=t,o&&(i.scope.$key=o),d&&(i.scope[d]=null!==o?o:t),(h||l||a)&&we(function(){i.scope[p]=s})):(i=this.create(s,p,t,o),i.fresh=!b),f[t]=i,b&&i.before(y);if(!b){var g=0,E=u.length-f.length;for(this.vm._vForRemoving=!0,t=0,n=u.length;t<n;t++)i=u[t],i.reused||(this.deleteCachedFrag(i),this.remove(i,g++,E,_));this.vm._vForRemoving=!1,g&&(this.vm._watchers=this.vm._watchers.filter(function(e){return e.active}));var w,x,k,C=0;for(t=0,n=f.length;t<n;t++)i=f[t],w=f[t-1],x=w?w.staggerCb?w.staggerAnchor:w.end||w.node:v,i.reused&&!i.staggerCb?(k=lt(i,v,this.id),k===w||k&&lt(k,v,this.id)===w||this.move(i,x)):this.insert(i,C++,x,_),i.reused=i.fresh=!1}},create:function(e,t,n,i){var o=this._host,r=this._scope||this.vm,s=Object.create(r);s.$refs=Object.create(r.$refs),s.$els=Object.create(r.$els),s.$parent=r,s.$forContext=this,we(function(){Ne(s,t,e)}),Ne(s,"$index",n),i?Ne(s,"$key",i):s.$key&&E(s,"$key",null),this.iterator&&Ne(s,this.iterator,null!==i?i:n);var a=this.factory.create(o,s,this._frag);return a.forId=this.id,this.cacheFrag(e,a,n,i),a},updateRef:function(){var e=this.descriptor.ref;if(e){var t,n=(this._scope||this.vm).$refs;this.fromObject?(t={},this.frags.forEach(function(e){t[e.scope.$key]=ht(e)})):t=this.frags.map(ht),n[e]=t}},updateModel:function(){if(this.isOption){var e=this.start.parentNode,t=e&&e.__v_model;t&&t.forceUpdate()}},insert:function(e,t,n,i){e.staggerCb&&(e.staggerCb.cancel(),e.staggerCb=null);var o=this.getStagger(e,t,null,"enter");if(i&&o){var r=e.staggerAnchor;r||(r=e.staggerAnchor=se("stagger-anchor"),r.__v_frag=e),q(r,n);var s=e.staggerCb=k(function(){e.staggerCb=null,e.before(r),J(r)});setTimeout(s,o)}else{var a=n.nextSibling;a||(q(this.end,n),a=this.end),e.before(a)}},remove:function(e,t,n,i){if(e.staggerCb)return e.staggerCb.cancel(),void(e.staggerCb=null);var o=this.getStagger(e,t,n,"leave");if(i&&o){var r=e.staggerCb=k(function(){e.staggerCb=null,e.remove()});setTimeout(r,o)}else e.remove()},move:function(e,t){t.nextSibling||this.end.parentNode.appendChild(this.end),e.before(t.nextSibling,!1)},cacheFrag:function(e,t,i,o){var s,a=this.params.trackBy,c=this.cache,l=!m(e);o||a||l?(s=ft(i,o,e,a),c[s]?"$index"!==a&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):c[s]=t):(s=this.id,r(e,s)?null===e[s]?e[s]=t:"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):Object.isExtensible(e)?E(e,s,t):"production"!==n.env.NODE_ENV&&Di("Frozen v-for objects cannot be automatically tracked, make sure to provide a track-by key.")),t.raw=e;
},getCachedFrag:function(e,t,i){var o,r=this.params.trackBy,s=!m(e);if(i||r||s){var a=ft(t,i,e,r);o=this.cache[a]}else o=e[this.id];return o&&(o.reused||o.fresh)&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e),o},deleteCachedFrag:function(e){var t=e.raw,n=this.params.trackBy,i=e.scope,o=i.$index,s=r(i,"$key")&&i.$key,a=!m(t);if(n||s||a){var c=ft(o,s,t,n);this.cache[c]=null}else t[this.id]=null,e.raw=null},getStagger:function(e,t,n,i){i+="Stagger";var o=e.node.__v_trans,r=o&&o.hooks,s=r&&(r[i]||r.stagger);return s?s.call(e,t,n):t*parseInt(this.params[i]||this.params.stagger,10)},_preProcess:function(e){return this.rawValue=e,e},_postProcess:function(e){if(In(e))return e;if(g(e)){for(var t,n=Object.keys(e),i=n.length,o=new Array(i);i--;)t=n[i],o[i]={$key:t,$value:e[t]};return o}return"number"!=typeof e||isNaN(e)||(e=ut(e)),e||[]},unbind:function(){if(this.descriptor.ref&&((this._scope||this.vm).$refs[this.descriptor.ref]=null),this.frags)for(var e,t=this.frags.length;t--;)e=this.frags[t],this.deleteCachedFrag(e),e.destroy()}};"production"!==n.env.NODE_ENV&&(nr.warnDuplicate=function(e){Di('Duplicate value found in v-for="'+this.descriptor.raw+'": '+JSON.stringify(e)+'. Use track-by="$index" if you are expecting duplicate values.',this.vm)});var ir={priority:Zo,terminal:!0,bind:function(){var e=this.el;if(e.__vue__)"production"!==n.env.NODE_ENV&&Di('v-if="'+this.expression+'" cannot be used on an instance root element.',this.vm),this.invalid=!0;else{var t=e.nextElementSibling;t&&null!==z(t,"v-else")&&(J(t),this.elseEl=t),this.anchor=se("v-if"),Y(e,this.anchor)}},update:function(e){this.invalid||(e?this.frag||this.insert():this.remove())},insert:function(){this.elseFrag&&(this.elseFrag.remove(),this.elseFrag=null),this.factory||(this.factory=new ct(this.vm,this.el)),this.frag=this.factory.create(this._host,this._scope,this._frag),this.frag.before(this.anchor)},remove:function(){this.frag&&(this.frag.remove(),this.frag=null),this.elseEl&&!this.elseFrag&&(this.elseFactory||(this.elseFactory=new ct(this.elseEl._context||this.vm,this.elseEl)),this.elseFrag=this.elseFactory.create(this._host,this._scope,this._frag),this.elseFrag.before(this.anchor))},unbind:function(){this.frag&&this.frag.destroy(),this.elseFrag&&this.elseFrag.destroy()}},or={bind:function(){var e=this.el.nextElementSibling;e&&null!==z(e,"v-else")&&(this.elseEl=e)},update:function(e){this.apply(this.el,e),this.elseEl&&this.apply(this.elseEl,!e)},apply:function(e,t){function n(){e.style.display=t?"":"none"}H(e)?L(e,t?1:-1,n,this.vm):n()}},rr={bind:function(){var e=this,t=this.el,n="range"===t.type,i=this.params.lazy,o=this.params.number,r=this.params.debounce,s=!1;if(Jn||n||(this.on("compositionstart",function(){s=!0}),this.on("compositionend",function(){s=!1,i||e.listener()})),this.focused=!1,n||i||(this.on("focus",function(){e.focused=!0}),this.on("blur",function(){e.focused=!1,e._frag&&!e._frag.inserted||e.rawListener()})),this.listener=this.rawListener=function(){if(!s&&e._bound){var i=o||n?l(t.value):t.value;e.set(i),oi(function(){e._bound&&!e.focused&&e.update(e._watcher.value)})}},r&&(this.listener=w(this.listener,r)),this.hasjQuery="function"==typeof jQuery,this.hasjQuery){var a=jQuery.fn.on?"on":"bind";jQuery(t)[a]("change",this.rawListener),i||jQuery(t)[a]("input",this.listener)}else this.on("change",this.rawListener),i||this.on("input",this.listener);!i&&qn&&(this.on("cut",function(){oi(e.listener)}),this.on("keyup",function(t){46!==t.keyCode&&8!==t.keyCode||e.listener()})),(t.hasAttribute("value")||"TEXTAREA"===t.tagName&&t.value.trim())&&(this.afterBind=this.listener)},update:function(e){e=c(e),e!==this.el.value&&(this.el.value=e)},unbind:function(){var e=this.el;if(this.hasjQuery){var t=jQuery.fn.off?"off":"unbind";jQuery(e)[t]("change",this.listener),jQuery(e)[t]("input",this.listener)}}},sr={bind:function(){var e=this,t=this.el;this.getValue=function(){if(t.hasOwnProperty("_value"))return t._value;var n=t.value;return e.params.number&&(n=l(n)),n},this.listener=function(){e.set(e.getValue())},this.on("change",this.listener),t.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){this.el.checked=C(e,this.getValue())}},ar={bind:function(){var e=this,t=this,n=this.el;this.forceUpdate=function(){t._watcher&&t.update(t._watcher.get())};var i=this.multiple=n.hasAttribute("multiple");this.listener=function(){var e=pt(n,i);e=t.params.number?In(e)?e.map(l):l(e):e,t.set(e)},this.on("change",this.listener);var o=pt(n,i,!0);(i&&o.length||!i&&null!==o)&&(this.afterBind=this.listener),this.vm.$on("hook:attached",function(){oi(e.forceUpdate)}),H(n)||oi(this.forceUpdate)},update:function(e){var t=this.el;t.selectedIndex=-1;for(var n,i,o=this.multiple&&In(e),r=t.options,s=r.length;s--;)n=r[s],i=n.hasOwnProperty("_value")?n._value:n.value,n.selected=o?dt(e,i)>-1:C(e,i)},unbind:function(){this.vm.$off("hook:attached",this.forceUpdate)}},cr={bind:function(){function e(){var e=n.checked;return e&&n.hasOwnProperty("_trueValue")?n._trueValue:!e&&n.hasOwnProperty("_falseValue")?n._falseValue:e}var t=this,n=this.el;this.getValue=function(){return n.hasOwnProperty("_value")?n._value:t.params.number?l(n.value):n.value},this.listener=function(){var i=t._watcher.value;if(In(i)){var o=t.getValue();n.checked?x(i,o)<0&&i.push(o):i.$remove(o)}else t.set(e())},this.on("change",this.listener),n.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){var t=this.el;In(e)?t.checked=x(e,this.getValue())>-1:t.hasOwnProperty("_trueValue")?t.checked=C(e,t._trueValue):t.checked=!!e}},lr={text:rr,radio:sr,select:ar,checkbox:cr},hr={priority:qo,twoWay:!0,handlers:lr,params:["lazy","number","debounce"],bind:function(){this.checkFilters(),this.hasRead&&!this.hasWrite&&"production"!==n.env.NODE_ENV&&Di('It seems you are using a read-only filter with v-model="'+this.descriptor.raw+'". You might want to use a two-way filter to ensure correct behavior.',this.vm);var e,t=this.el,i=t.tagName;if("INPUT"===i)e=lr[t.type]||lr.text;else if("SELECT"===i)e=lr.select;else{if("TEXTAREA"!==i)return void("production"!==n.env.NODE_ENV&&Di("v-model does not support element type: "+i,this.vm));e=lr.text}t.__v_model=this,e.bind.call(this),this.update=e.update,this._unbind=e.unbind},checkFilters:function(){var e=this.filters;if(e)for(var t=e.length;t--;){var n=ge(this.vm.$options,"filters",e[t].name);("function"==typeof n||n.read)&&(this.hasRead=!0),n.write&&(this.hasWrite=!0)}},unbind:function(){this.el.__v_model=null,this._unbind&&this._unbind()}},ur={esc:27,tab:9,enter:13,space:32,"delete":[8,46],up:38,left:37,right:39,down:40},fr={priority:Wo,acceptStatement:!0,keyCodes:ur,bind:function(){if("IFRAME"===this.el.tagName&&"load"!==this.arg){var e=this;this.iframeBind=function(){G(e.el.contentWindow,e.arg,e.handler,e.modifiers.capture)},this.on("load",this.iframeBind)}},update:function(e){if(this.descriptor.raw||(e=function(){}),"function"!=typeof e)return void("production"!==n.env.NODE_ENV&&Di("v-on:"+this.arg+'="'+this.expression+'" expects a function value, got '+e,this.vm));this.modifiers.stop&&(e=yt(e)),this.modifiers.prevent&&(e=_t(e)),this.modifiers.self&&(e=bt(e));var t=Object.keys(this.modifiers).filter(function(e){return"stop"!==e&&"prevent"!==e&&"self"!==e&&"capture"!==e});t.length&&(e=vt(e,t)),this.reset(),this.handler=e,this.iframeBind?this.iframeBind():G(this.el,this.arg,this.handler,this.modifiers.capture)},reset:function(){var e=this.iframeBind?this.el.contentWindow:this.el;this.handler&&K(e,this.arg,this.handler)},unbind:function(){this.reset()}},pr=["-webkit-","-moz-","-ms-"],dr=["Webkit","Moz","ms"],vr=/!important;?$/,yr=Object.create(null),_r=null,br={deep:!0,update:function(e){"string"==typeof e?this.el.style.cssText=e:In(e)?this.handleObject(e.reduce(b,{})):this.handleObject(e||{})},handleObject:function(e){var t,n,i=this.cache||(this.cache={});for(t in i)t in e||(this.handleSingle(t,null),delete i[t]);for(t in e)n=e[t],n!==i[t]&&(i[t]=n,this.handleSingle(t,n))},handleSingle:function(e,t){if(e=mt(e))if(null!=t&&(t+=""),t){var i=vr.test(t)?"important":"";i?("production"!==n.env.NODE_ENV&&Di("It's probably a bad idea to use !important with inline rules. This feature will be deprecated in a future version of Vue."),t=t.replace(vr,"").trim(),this.el.style.setProperty(e.kebab,t,i)):this.el.style[e.camel]=t}else this.el.style[e.camel]=""}},mr="http://www.w3.org/1999/xlink",gr=/^xlink:/,Er=/^v-|^:|^@|^(?:is|transition|transition-mode|debounce|track-by|stagger|enter-stagger|leave-stagger)$/,wr=/^(?:value|checked|selected|muted)$/,xr=/^(?:draggable|contenteditable|spellcheck)$/,kr={value:"_value","true-value":"_trueValue","false-value":"_falseValue"},Cr={priority:Jo,bind:function(){var e=this.arg,t=this.el.tagName;e||(this.deep=!0);var i=this.descriptor,o=i.interp;if(o&&(i.hasOneTime&&(this.expression=S(o,this._scope||this.vm)),(Er.test(e)||"name"===e&&("PARTIAL"===t||"SLOT"===t))&&("production"!==n.env.NODE_ENV&&Di(e+'="'+i.raw+'": attribute interpolation is not allowed in Vue.js directives and special attributes.',this.vm),this.el.removeAttribute(e),this.invalid=!0),"production"!==n.env.NODE_ENV)){var r=e+'="'+i.raw+'": ';"src"===e&&Di(r+'interpolation in "src" attribute will cause a 404 request. Use v-bind:src instead.',this.vm),"style"===e&&Di(r+'interpolation in "style" attribute will cause the attribute to be discarded in Internet Explorer. Use v-bind:style instead.',this.vm)}},update:function(e){if(!this.invalid){var t=this.arg;this.arg?this.handleSingle(t,e):this.handleObject(e||{})}},handleObject:br.handleObject,handleSingle:function(e,t){var n=this.el,i=this.descriptor.interp;if(this.modifiers.camel&&(e=f(e)),!i&&wr.test(e)&&e in n){var o="value"===e&&null==t?"":t;n[e]!==o&&(n[e]=o)}var r=kr[e];if(!i&&r){n[r]=t;var s=n.__v_model;s&&s.listener()}return"value"===e&&"TEXTAREA"===n.tagName?void n.removeAttribute(e):void(xr.test(e)?n.setAttribute(e,t?"true":"false"):null!=t&&t!==!1?"class"===e?(n.__v_trans&&(t+=" "+n.__v_trans.id+"-transition"),X(n,t)):gr.test(e)?n.setAttributeNS(mr,e,t===!0?"":t):n.setAttribute(e,t===!0?"":t):n.removeAttribute(e))}},$r={priority:Yo,bind:function(){if(this.arg){var e=this.id=f(this.arg),t=(this._scope||this.vm).$els;r(t,e)?t[e]=this.el:Ne(t,e,this.el)}},unbind:function(){var e=(this._scope||this.vm).$els;e[this.id]===this.el&&(e[this.id]=null)}},Nr={bind:function(){"production"!==n.env.NODE_ENV&&Di("v-ref:"+this.arg+" must be used on a child component. Found on <"+this.el.tagName.toLowerCase()+">.",this.vm)}},Or={bind:function(){var e=this.el;this.vm.$once("pre-hook:compiled",function(){e.removeAttribute("v-cloak")})}},Ar={text:So,html:Bo,"for":nr,"if":ir,show:or,model:hr,on:fr,bind:Cr,el:$r,ref:Nr,cloak:Or},Tr={deep:!0,update:function(e){e?"string"==typeof e?this.setClass(e.trim().split(/\s+/)):this.setClass(Et(e)):this.cleanup()},setClass:function(e){this.cleanup(e);for(var t=0,n=e.length;t<n;t++){var i=e[t];i&&wt(this.el,i,ee)}this.prevKeys=e},cleanup:function(e){var t=this.prevKeys;if(t)for(var n=t.length;n--;){var i=t[n];(!e||e.indexOf(i)<0)&&wt(this.el,i,te)}}},jr={priority:Go,params:["keep-alive","transition-mode","inline-template"],bind:function(){this.el.__vue__?"production"!==n.env.NODE_ENV&&Di('cannot mount component "'+this.expression+'" on already mounted element: '+this.el):(this.keepAlive=this.params.keepAlive,this.keepAlive&&(this.cache={}),this.params.inlineTemplate&&(this.inlineTemplate=ne(this.el,!0)),this.pendingComponentCb=this.Component=null,this.pendingRemovals=0,this.pendingRemovalCb=null,this.anchor=se("v-component"),Y(this.el,this.anchor),this.el.removeAttribute("is"),this.el.removeAttribute(":is"),this.descriptor.ref&&this.el.removeAttribute("v-ref:"+d(this.descriptor.ref)),this.literal&&this.setComponent(this.expression))},update:function(e){this.literal||this.setComponent(e)},setComponent:function(e,t){if(this.invalidatePending(),e){var n=this;this.resolveComponent(e,function(){n.mountComponent(t)})}else this.unbuild(!0),this.remove(this.childVM,t),this.childVM=null},resolveComponent:function(e,t){var n=this;this.pendingComponentCb=k(function(i){n.ComponentName=i.options.name||("string"==typeof e?e:null),n.Component=i,t()}),this.vm._resolveComponent(e,this.pendingComponentCb)},mountComponent:function(e){this.unbuild(!0);var t=this,n=this.Component.options.activate,i=this.getCached(),o=this.build();n&&!i?(this.waitingFor=o,xt(n,o,function(){t.waitingFor===o&&(t.waitingFor=null,t.transition(o,e))})):(i&&o._updateRef(),this.transition(o,e))},invalidatePending:function(){this.pendingComponentCb&&(this.pendingComponentCb.cancel(),this.pendingComponentCb=null)},build:function(e){var t=this.getCached();if(t)return t;if(this.Component){var i={name:this.ComponentName,el:Xe(this.el),template:this.inlineTemplate,parent:this._host||this.vm,_linkerCachable:!this.inlineTemplate,_ref:this.descriptor.ref,_asComponent:!0,_isRouterView:this._isRouterView,_context:this.vm,_scope:this._scope,_frag:this._frag};e&&b(i,e);var o=new this.Component(i);return this.keepAlive&&(this.cache[this.Component.cid]=o),"production"!==n.env.NODE_ENV&&this.el.hasAttribute("transition")&&o._isFragment&&Di("Transitions will not work on a fragment instance. Template: "+o.$options.template,o),o}},getCached:function(){return this.keepAlive&&this.cache[this.Component.cid]},unbuild:function(e){this.waitingFor&&(this.keepAlive||this.waitingFor.$destroy(),this.waitingFor=null);var t=this.childVM;return!t||this.keepAlive?void(t&&(t._inactive=!0,t._updateRef(!0))):void t.$destroy(!1,e)},remove:function(e,t){var n=this.keepAlive;if(e){this.pendingRemovals++,this.pendingRemovalCb=t;var i=this;e.$remove(function(){i.pendingRemovals--,n||e._cleanup(),!i.pendingRemovals&&i.pendingRemovalCb&&(i.pendingRemovalCb(),i.pendingRemovalCb=null)})}else t&&t()},transition:function(e,t){var n=this,i=this.childVM;switch(i&&(i._inactive=!0),e._inactive=!1,this.childVM=e,n.params.transitionMode){case"in-out":e.$before(n.anchor,function(){n.remove(i,t)});break;case"out-in":n.remove(i,function(){e.$before(n.anchor,t)});break;default:n.remove(i),e.$before(n.anchor,t)}},unbind:function(){if(this.invalidatePending(),this.unbuild(),this.cache){for(var e in this.cache)this.cache[e].$destroy();this.cache=null}}},Dr=ji._propBindingModes,Sr={},Vr=/^[$_a-zA-Z]+[\w$]*$/,Pr=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\[[^\[\]]+\])*$/,Rr=ji._propBindingModes,Fr={bind:function(){var e=this.vm,t=e._context,n=this.descriptor.prop,i=n.path,o=n.parentPath,r=n.mode===Rr.TWO_WAY,s=this.parentWatcher=new Qe(t,o,function(t){Ot(e,n,t)},{twoWay:r,filters:n.filters,scope:this._scope});if(Nt(e,n,s.value),r){var a=this;e.$once("pre-hook:created",function(){a.childWatcher=new Qe(e,i,function(e){s.set(e)},{sync:!0})})}},unbind:function(){this.parentWatcher.teardown(),this.childWatcher&&this.childWatcher.teardown()}},Mr=[],Lr=!1,Ir="transition",Hr="animation",zr=Zn+"Duration",Br=ei+"Duration",Ur=zn&&window.requestAnimationFrame,Wr=Ur?function(e){Ur(function(){Ur(e)})}:function(e){setTimeout(e,50)},qr=Ft.prototype;qr.enter=function(e,t){this.cancelPending(),this.callHook("beforeEnter"),this.cb=t,ee(this.el,this.enterClass),e(),this.entered=!1,this.callHookWithCb("enter"),this.entered||(this.cancel=this.hooks&&this.hooks.enterCancelled,Pt(this.enterNextTick))},qr.enterNextTick=function(){var e=this;this.justEntered=!0,Wr(function(){e.justEntered=!1});var t=this.enterDone,n=this.getCssTransitionType(this.enterClass);this.pendingJsCb?n===Ir&&te(this.el,this.enterClass):n===Ir?(te(this.el,this.enterClass),this.setupCssCb(Xn,t)):n===Hr?this.setupCssCb(ti,t):t()},qr.enterDone=function(){this.entered=!0,this.cancel=this.pendingJsCb=null,te(this.el,this.enterClass),this.callHook("afterEnter"),this.cb&&this.cb()},qr.leave=function(e,t){this.cancelPending(),this.callHook("beforeLeave"),this.op=e,this.cb=t,ee(this.el,this.leaveClass),this.left=!1,this.callHookWithCb("leave"),this.left||(this.cancel=this.hooks&&this.hooks.leaveCancelled,this.op&&!this.pendingJsCb&&(this.justEntered?this.leaveDone():Pt(this.leaveNextTick)))},qr.leaveNextTick=function(){var e=this.getCssTransitionType(this.leaveClass);if(e){var t=e===Ir?Xn:ti;this.setupCssCb(t,this.leaveDone)}else this.leaveDone()},qr.leaveDone=function(){this.left=!0,this.cancel=this.pendingJsCb=null,this.op(),te(this.el,this.leaveClass),this.callHook("afterLeave"),this.cb&&this.cb(),this.op=null},qr.cancelPending=function(){this.op=this.cb=null;var e=!1;this.pendingCssCb&&(e=!0,K(this.el,this.pendingCssEvent,this.pendingCssCb),this.pendingCssEvent=this.pendingCssCb=null),this.pendingJsCb&&(e=!0,this.pendingJsCb.cancel(),this.pendingJsCb=null),e&&(te(this.el,this.enterClass),te(this.el,this.leaveClass)),this.cancel&&(this.cancel.call(this.vm,this.el),this.cancel=null)},qr.callHook=function(e){this.hooks&&this.hooks[e]&&this.hooks[e].call(this.vm,this.el)},qr.callHookWithCb=function(e){var t=this.hooks&&this.hooks[e];t&&(t.length>1&&(this.pendingJsCb=k(this[e+"Done"])),t.call(this.vm,this.el,this.pendingJsCb))},qr.getCssTransitionType=function(e){if(!(!Xn||document.hidden||this.hooks&&this.hooks.css===!1||Mt(this.el))){var t=this.type||this.typeCache[e];if(t)return t;var n=this.el.style,i=window.getComputedStyle(this.el),o=n[zr]||i[zr];if(o&&"0s"!==o)t=Ir;else{var r=n[Br]||i[Br];r&&"0s"!==r&&(t=Hr)}return t&&(this.typeCache[e]=t),t}},qr.setupCssCb=function(e,t){this.pendingCssEvent=e;var n=this,i=this.el,o=this.pendingCssCb=function(r){r.target===i&&(K(i,e,o),n.pendingCssEvent=n.pendingCssCb=null,!n.pendingJsCb&&t&&t())};G(i,e,o)};var Jr={priority:Qo,update:function(e,t){var n=this.el,i=ge(this.vm.$options,"transitions",e);e=e||"v",t=t||"v",n.__v_trans=new Ft(n,e,i,this.vm),te(n,t+"-transition"),ee(n,e+"-transition")}},Qr={style:br,"class":Tr,component:jr,prop:Fr,transition:Jr},Yr=/^v-bind:|^:/,Gr=/^v-on:|^@/,Kr=/^v-([^:]+)(?:$|:(.*)$)/,Zr=/\.[^\.]+/g,Xr=/^(v-bind:|:)?transition$/,es=1e3,ts=2e3;on.terminal=!0;var ns=/[^\w\-:\.]/,is=Object.freeze({compile:Lt,compileAndLinkProps:Ut,compileRoot:Wt,transclude:un,resolveSlots:vn}),os=/^v-on:|^@/;gn.prototype._bind=function(){var e=this.name,t=this.descriptor;if(("cloak"!==e||this.vm._isCompiled)&&this.el&&this.el.removeAttribute){var n=t.attr||"v-"+e;this.el.removeAttribute(n)}var i=t.def;if("function"==typeof i?this.update=i:b(this,i),this._setupParams(),this.bind&&this.bind(),this._bound=!0,this.literal)this.update&&this.update(t.raw);else if((this.expression||this.modifiers)&&(this.update||this.twoWay)&&!this._checkStatement()){var o=this;this.update?this._update=function(e,t){o._locked||o.update(e,t)}:this._update=mn;var r=this._preProcess?y(this._preProcess,this):null,s=this._postProcess?y(this._postProcess,this):null,a=this._watcher=new Qe(this.vm,this.expression,this._update,{filters:this.filters,twoWay:this.twoWay,deep:this.deep,preProcess:r,postProcess:s,scope:this._scope});this.afterBind?this.afterBind():this.update&&this.update(a.value)}},gn.prototype._setupParams=function(){if(this.params){var e=this.params;this.params=Object.create(null);for(var t,n,i,o=e.length;o--;)t=d(e[o]),i=f(t),n=B(this.el,t),null!=n?this._setupParamWatcher(i,n):(n=z(this.el,t),null!=n&&(this.params[i]=""===n||n))}},gn.prototype._setupParamWatcher=function(e,t){var n=this,i=!1,o=(this._scope||this.vm).$watch(t,function(t,o){if(n.params[e]=t,i){var r=n.paramWatchers&&n.paramWatchers[e];r&&r.call(n,t,o)}else i=!0},{immediate:!0,user:!1});(this._paramUnwatchFns||(this._paramUnwatchFns=[])).push(o)},gn.prototype._checkStatement=function(){var e=this.expression;if(e&&this.acceptStatement&&!Be(e)){var t=ze(e).get,n=this._scope||this.vm,i=function(e){n.$event=e,t.call(n,n),n.$event=null};return this.filters&&(i=n._applyFilters(i,null,this.filters)),this.update(i),!0}},gn.prototype.set=function(e){this.twoWay?this._withLock(function(){this._watcher.set(e)}):"production"!==n.env.NODE_ENV&&Di("Directive.set() can only be used inside twoWaydirectives.")},gn.prototype._withLock=function(e){var t=this;t._locked=!0,e.call(t),oi(function(){t._locked=!1})},gn.prototype.on=function(e,t,n){G(this.el,e,t,n),(this._listeners||(this._listeners=[])).push([e,t])},gn.prototype._teardown=function(){if(this._bound){this._bound=!1,this.unbind&&this.unbind(),this._watcher&&this._watcher.teardown();var e,t=this._listeners;if(t)for(e=t.length;e--;)K(this.el,t[e][0],t[e][1]);var i=this._paramUnwatchFns;if(i)for(e=i.length;e--;)i[e]();"production"!==n.env.NODE_ENV&&this.el&&this.el._vue_directives.$remove(this),this.vm=this.el=this._watcher=this._listeners=null}};var rs=/[^|]\|[^|]/;Oe(Nn),_n(Nn),bn(Nn),En(Nn),wn(Nn),xn(Nn),kn(Nn),Cn(Nn),$n(Nn);var ss={priority:er,params:["name"],bind:function(){var e=this.params.name||"default",t=this.vm._slotContents&&this.vm._slotContents[e];t&&t.hasChildNodes()?this.compile(t.cloneNode(!0),this.vm._context,this.vm):this.fallback()},compile:function(e,t,n){if(e&&t){if(this.el.hasChildNodes()&&1===e.childNodes.length&&1===e.childNodes[0].nodeType&&e.childNodes[0].hasAttribute("v-if")){var i=document.createElement("template");i.setAttribute("v-else",""),i.innerHTML=this.el.innerHTML,i._context=this.vm,e.appendChild(i)}var o=n?n._scope:this._scope;this.unlink=t.$compile(e,n,o,this._frag)}e?Y(this.el,e):J(this.el)},fallback:function(){this.compile(ne(this.el,!0),this.vm)},unbind:function(){this.unlink&&this.unlink()}},as={priority:Ko,params:["name"],paramWatchers:{name:function(e){ir.remove.call(this),e&&this.insert(e)}},bind:function(){this.anchor=se("v-partial"),Y(this.el,this.anchor),this.insert(this.params.name)},insert:function(e){var t=ge(this.vm.$options,"partials",e,!0);t&&(this.factory=new ct(this.vm,t),ir.insert.call(this))},unbind:function(){this.frag&&this.frag.destroy()}},cs={slot:ss,partial:as},ls=nr._postProcess,hs=/(\d{3})(?=\d)/g,us={orderBy:Tn,filterBy:An,limitBy:On,json:{read:function(e,t){return"string"==typeof e?e:JSON.stringify(e,null,arguments.length>1?t:2)},write:function(e){try{return JSON.parse(e)}catch(t){return e}}},capitalize:function(e){return e||0===e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""},uppercase:function(e){return e||0===e?e.toString().toUpperCase():""},lowercase:function(e){return e||0===e?e.toString().toLowerCase():""},currency:function(e,t,n){if(e=parseFloat(e),!isFinite(e)||!e&&0!==e)return"";t=null!=t?t:"$",n=null!=n?n:2;var i=Math.abs(e).toFixed(n),o=n?i.slice(0,-1-n):i,r=o.length%3,s=r>0?o.slice(0,r)+(o.length>3?",":""):"",a=n?i.slice(-1-n):"",c=e<0?"-":"";return c+t+s+o.slice(r).replace(hs,"$1,")+a},pluralize:function(e){var t=_(arguments,1),n=t.length;if(n>1){var i=e%10-1;return i in t?t[i]:t[n-1]}return t[0]+(1===e?"":"s")},debounce:function(e,t){if(e)return t||(t=300),w(e,t)}};Dn(Nn),Nn.version="1.0.26",setTimeout(function(){ji.devtools&&(Bn?Bn.emit("init",Nn):"production"!==n.env.NODE_ENV&&zn&&/Chrome\/\d+/.test(window.navigator.userAgent)&&console.log("Download the Vue Devtools for a better development experience:\nhttps://github.com/vuejs/vue-devtools"))},0),e.exports=Nn}).call(t,function(){return this}(),n(19))},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vdnVlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA4ZTc5YzVjZGRlYzY5MjFmZmU0ZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19yb290LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2lzQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2dldE5hdGl2ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc09iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL2NvbXBvbmVudHMvYXBpLXRhYmxlLnZ1ZSIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc09iamVjdExpa2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX0xpc3RDYWNoZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYXNzb2NJbmRleE9mLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19nZXRNYXBEYXRhLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19pc0tleS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbmF0aXZlQ3JlYXRlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL190b0tleS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc0xlbmd0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc1N5bWJvbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fTWFwQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNGdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGlyZWN0aXZlcy9zZXQtZm9jdXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21peGlucy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fTWFwLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19TdGFjay5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fU3ltYm9sLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlR2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlSGFzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlSXNFcXVhbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZVByb3BlcnR5LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19jYXN0UGF0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fZXF1YWxBcnJheXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2lzSG9zdE9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faXNJbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faXNTdHJpY3RDb21wYXJhYmxlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19tYXRjaGVzU3RyaWN0Q29tcGFyYWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fdG9Tb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvZGVmZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNBcmd1bWVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNBcnJheUxpa2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNTdHJpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gva2V5cy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC90b0ludGVnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvdG9OdW1iZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9WdWUvZGlzdC92dWUuY29tbW9uLmpzIiwid2VicGFjazovLy9hcGktdGFibGUudnVlIiwid2VicGFjazovLy9hbGVydC1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vY29sbGFwc2FibGUtcGFuZWwtcGFnZS52dWUiLCJ3ZWJwYWNrOi8vL2xlZ2FsLXBhZ2UudnVlIiwid2VicGFjazovLy9vdmVybGF5LXBhZ2UudnVlIiwid2VicGFjazovLy9zdGVwLXRyYWNrZXItcGFnZS52dWUiLCJ3ZWJwYWNrOi8vL3RhYnMtcGFnZS52dWUiLCJ3ZWJwYWNrOi8vL2luZGV4LnZ1ZSIsIndlYnBhY2s6Ly8vaW5kZXgudnVlPzlhOTUiLCJ3ZWJwYWNrOi8vL2xlZ2FsLWNvbnRhaW5lci52dWUiLCJ3ZWJwYWNrOi8vL2xlZ2FsLWNvdW50ZXIudnVlIiwid2VicGFjazovLy9vdmVybGF5LWNvbnRhaW5lci52dWUiLCJ3ZWJwYWNrOi8vL292ZXJsYXkudnVlIiwid2VicGFjazovLy9pbmRleC52dWU/MzFlYiIsIndlYnBhY2s6Ly8vdGFiLnZ1ZSIsIndlYnBhY2s6Ly8vdGFicy52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9yb3V0ZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RpcmVjdGl2ZXMvb3ZlcmxheS1vcGVuZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21peGlucy9ldmVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21peGlucy94aHItcmVzcG9uc2UuanMiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL2FwaS10YWJsZS52dWU/NzE1YyIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2luZGV4LnZ1ZT81YzhiIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2FsZXJ0L2luZGV4LnZ1ZT9jOTk0Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2NvbGxhcHNhYmxlLXBhbmVsL2luZGV4LnZ1ZT82NWM3Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci52dWU/NDQ2ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb3VudGVyLnZ1ZT9lMDMxIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS1jb250YWluZXIudnVlPzNlODMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LnZ1ZT9iNTc0Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3N0ZXAtdHJhY2tlci9pbmRleC52dWU/ZGVmZCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90YWIvdGFicy52dWU/YjY0ZiIsIndlYnBhY2s6Ly8vLi9+L2VzNi1wcm9taXNlL2Rpc3QvZXM2LXByb21pc2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi93aGF0d2ctZmV0Y2gvZmV0Y2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX0RhdGFWaWV3LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19IYXNoLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19Qcm9taXNlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19TZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX1NldENhY2hlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19VaW50OEFycmF5LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19XZWFrTWFwLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19hcHBseS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYXJyYXlTb21lLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlRGVsYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2Jhc2VGaW5kSW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2Jhc2VIYXNJbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZUlzRXF1YWxEZWVwLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlSXNNYXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZUlzTmF0aXZlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlSXRlcmF0ZWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2Jhc2VLZXlzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlTWF0Y2hlcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZU1hdGNoZXNQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZVByb3BlcnR5RGVlcC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZVRpbWVzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlVG9TdHJpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2NoZWNrR2xvYmFsLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19jb3JlSnNEYXRhLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19lcXVhbEJ5VGFnLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19lcXVhbE9iamVjdHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2dldExlbmd0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fZ2V0TWF0Y2hEYXRhLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19nZXRQcm90b3R5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2dldFRhZy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fZ2V0VmFsdWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2hhc1BhdGguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2hhc2hDbGVhci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faGFzaERlbGV0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faGFzaEdldC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faGFzaEhhcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faGFzaFNldC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faW5kZXhLZXlzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19pc0tleWFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2lzTWFza2VkLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19pc1Byb3RvdHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbGlzdENhY2hlQ2xlYXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2xpc3RDYWNoZURlbGV0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbGlzdENhY2hlR2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19saXN0Q2FjaGVIYXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2xpc3RDYWNoZVNldC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbWFwQ2FjaGVDbGVhci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbWFwQ2FjaGVEZWxldGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX21hcENhY2hlR2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19tYXBDYWNoZUhhcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbWFwQ2FjaGVTZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX21hcFRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX3NldENhY2hlQWRkLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19zZXRDYWNoZUhhcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fc2V0VG9BcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fc3RhY2tDbGVhci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fc3RhY2tEZWxldGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX3N0YWNrR2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19zdGFja0hhcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fc3RhY2tTZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX3N0cmluZ1RvUGF0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9kZWJvdW5jZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9lcS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9maW5kSW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvZ2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2hhc0luLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2lkZW50aXR5LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2lzQXJyYXlMaWtlT2JqZWN0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2lzVHlwZWRBcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9tZW1vaXplLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL25vdy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9wcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9yZXN0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL3RvRmluaXRlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL3RvU3RyaW5nLmpzIiwid2VicGFjazovLy8uL34vcHJpc21qcy9wcmlzbS5qcyIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL2NvbXBvbmVudHMvYXBpLXRhYmxlLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9hbGVydC1wYWdlLnZ1ZT85MWYzIiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3MvY29sbGFwc2FibGUtcGFuZWwtcGFnZS52dWU/MDBjNSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2luZGV4LnZ1ZT82YzQ1Iiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3MvbGVnYWwtcGFnZS52dWU/NzY4ZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL292ZXJsYXktcGFnZS52dWU/NzhmNyIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL3N0ZXAtdHJhY2tlci1wYWdlLnZ1ZT9mMGVlIiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3MvdGFicy1wYWdlLnZ1ZT9hN2YyIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2FsZXJ0L2FsZXJ0Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvY29sbGFwc2FibGUtcGFuZWwvY29sbGFwc2FibGUtcGFuZWwuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb250YWluZXIuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb3VudGVyLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LWNvbnRhaW5lci5odG1sIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS5odG1sIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3N0ZXAtdHJhY2tlci9zdGVwLXRyYWNrZXIuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90YWIvdGFiLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYnMuaHRtbCIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2FsZXJ0LXBhZ2UudnVlIiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3MvY29sbGFwc2FibGUtcGFuZWwtcGFnZS52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9sZWdhbC1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL292ZXJsYXktcGFnZS52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9zdGVwLXRyYWNrZXItcGFnZS52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy90YWJzLXBhZ2UudnVlIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2FsZXJ0L2luZGV4LnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9jb2xsYXBzYWJsZS1wYW5lbC9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY29udGFpbmVyLnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb3VudGVyLnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXktY29udGFpbmVyLnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXkudnVlIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3N0ZXAtdHJhY2tlci9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYi52dWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYnMudnVlIiwid2VicGFjazovLy8uL34vdnVlLXJvdXRlci9kaXN0L3Z1ZS1yb3V0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL2FwaS10YWJsZS52dWU/Y2EzNSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2luZGV4LnZ1ZT81MjE4Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2FsZXJ0L2luZGV4LnZ1ZT8wMjc1Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2NvbGxhcHNhYmxlLXBhbmVsL2luZGV4LnZ1ZT9kMWM0Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci52dWU/MzU3NiIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb3VudGVyLnZ1ZT9lYjM5Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS1jb250YWluZXIudnVlPzE5NzIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LnZ1ZT9jMzgzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3N0ZXAtdHJhY2tlci9pbmRleC52dWU/MDFlMyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90YWIvdGFicy52dWU/ZjkxZiIsIndlYnBhY2s6Ly8vLi9+L3Z1ZS9kaXN0L3Z1ZS5jb21tb24uanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2FtZC1kZWZpbmUuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL21vZHVsZS5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJwYXJlbnRKc29ucEZ1bmN0aW9uIiwid2luZG93IiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsImNodW5rSWQiLCJpIiwiY2FsbGJhY2tzIiwibGVuZ3RoIiwiaW5zdGFsbGVkQ2h1bmtzIiwicHVzaCIsImFwcGx5Iiwic2hpZnQiLCIwIiwiMSIsIjIiLCJlIiwiY2FsbGJhY2siLCJ1bmRlZmluZWQiLCJoZWFkIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInNjcmlwdCIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwiY2hhcnNldCIsImFzeW5jIiwic3JjIiwicCIsImFwcGVuZENoaWxkIiwibSIsImMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfVnVlIiwiX1Z1ZTIiLCJfdnVlUm91dGVyIiwiX3Z1ZVJvdXRlcjIiLCJfcm91dGVzIiwiX3JvdXRlczIiLCJfaHlicmlkVGhvcml1bSIsIl9oeWJyaWRUaG9yaXVtMiIsIl9wcmlzbWpzIiwiX3ByaXNtanMyIiwiY29uZmlnIiwiZGVidWciLCJ1c2UiLCJyb3V0ZXIiLCJBcHAiLCJleHRlbmQiLCJkYXRhIiwibGlnZXJFbmRQb2ludCIsImxpZ2VyQXBwbGljYXRpb25LZXkiLCJtYXAiLCJhZnRlckVhY2giLCJzZXRUaW1lb3V0IiwiaGlnaGxpZ2h0QWxsIiwic3RhcnQiLCJsaXN0IiwidG9TdHJpbmciLCJyZXN1bHQiLCJ0aGlzIiwiaXRlbSIsImpvaW4iLCJtZWRpYVF1ZXJ5IiwiYWxyZWFkeUltcG9ydGVkTW9kdWxlcyIsImFkZFN0eWxlc1RvRG9tIiwic3R5bGVzIiwib3B0aW9ucyIsImRvbVN0eWxlIiwic3R5bGVzSW5Eb20iLCJyZWZzIiwiaiIsInBhcnRzIiwiYWRkU3R5bGUiLCJsaXN0VG9TdHlsZXMiLCJuZXdTdHlsZXMiLCJjc3MiLCJtZWRpYSIsInNvdXJjZU1hcCIsInBhcnQiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZUVsZW1lbnQiLCJnZXRIZWFkRWxlbWVudCIsImxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wIiwic3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AiLCJpbnNlcnRBdCIsIm5leHRTaWJsaW5nIiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsIkVycm9yIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiaWR4IiwiaW5kZXhPZiIsInNwbGljZSIsImNyZWF0ZVN0eWxlRWxlbWVudCIsInVwZGF0ZSIsInJlbW92ZSIsInNpbmdsZXRvbiIsInN0eWxlSW5kZXgiLCJzaW5nbGV0b25Db3VudGVyIiwic2luZ2xldG9uRWxlbWVudCIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJiaW5kIiwiYXBwbHlUb1RhZyIsIm5ld09iaiIsImluZGV4Iiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJyZXBsYWNlVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJzZXRBdHRyaWJ1dGUiLCJzb3VyY2VzIiwiYnRvYSIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsIm1lbW9pemUiLCJmbiIsIm1lbW8iLCJhcmd1bWVudHMiLCJpc09sZElFIiwidGVzdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwibmV3TGlzdCIsIm1heVJlbW92ZSIsInRleHRTdG9yZSIsInJlcGxhY2VtZW50IiwiZmlsdGVyIiwiQm9vbGVhbiIsImdsb2JhbCIsImNoZWNrR2xvYmFsIiwiZnJlZUdsb2JhbCIsImZyZWVTZWxmIiwic2VsZiIsInRoaXNHbG9iYWwiLCJyb290IiwiRnVuY3Rpb24iLCJpc0FycmF5IiwiQXJyYXkiLCJnZXROYXRpdmUiLCJvYmplY3QiLCJrZXkiLCJ2YWx1ZSIsImdldFZhbHVlIiwiYmFzZUlzTmF0aXZlIiwiaXNPYmplY3QiLCJfX3Z1ZV9zY3JpcHRfXyIsIl9fdnVlX3RlbXBsYXRlX18iLCJ0ZW1wbGF0ZSIsImlzT2JqZWN0TGlrZSIsIkxpc3RDYWNoZSIsImVudHJpZXMiLCJjbGVhciIsImVudHJ5Iiwic2V0IiwibGlzdENhY2hlQ2xlYXIiLCJsaXN0Q2FjaGVEZWxldGUiLCJsaXN0Q2FjaGVHZXQiLCJsaXN0Q2FjaGVIYXMiLCJsaXN0Q2FjaGVTZXQiLCJwcm90b3R5cGUiLCJnZXQiLCJoYXMiLCJhc3NvY0luZGV4T2YiLCJhcnJheSIsImVxIiwiZ2V0TWFwRGF0YSIsIl9fZGF0YV9fIiwiaXNLZXlhYmxlIiwiaXNLZXkiLCJpc1N5bWJvbCIsInJlSXNQbGFpblByb3AiLCJyZUlzRGVlcFByb3AiLCJPYmplY3QiLCJuYXRpdmVDcmVhdGUiLCJ0b0tleSIsIklORklOSVRZIiwiaXNMZW5ndGgiLCJNQVhfU0FGRV9JTlRFR0VSIiwib2JqZWN0VG9TdHJpbmciLCJzeW1ib2xUYWciLCJvYmplY3RQcm90byIsIk1hcENhY2hlIiwibWFwQ2FjaGVDbGVhciIsIm1hcENhY2hlRGVsZXRlIiwibWFwQ2FjaGVHZXQiLCJtYXBDYWNoZUhhcyIsIm1hcENhY2hlU2V0IiwiaXNGdW5jdGlvbiIsInRhZyIsImZ1bmNUYWciLCJnZW5UYWciLCJjbGVhblVwTmV4dFRpY2siLCJkcmFpbmluZyIsImN1cnJlbnRRdWV1ZSIsInF1ZXVlIiwiY29uY2F0IiwicXVldWVJbmRleCIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwiY2FjaGVkU2V0VGltZW91dCIsImxlbiIsInJ1biIsImNhY2hlZENsZWFyVGltZW91dCIsIkl0ZW0iLCJmdW4iLCJub29wIiwicHJvY2VzcyIsImNsZWFyVGltZW91dCIsIm5leHRUaWNrIiwiYXJncyIsInRpdGxlIiwiYnJvd3NlciIsImVudiIsImFyZ3YiLCJ2ZXJzaW9uIiwidmVyc2lvbnMiLCJvbiIsImFkZExpc3RlbmVyIiwib25jZSIsIm9mZiIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZW1pdCIsImJpbmRpbmciLCJuYW1lIiwiY3dkIiwiY2hkaXIiLCJkaXIiLCJ1bWFzayIsImRlZmluZVByb3BlcnR5IiwiX2RlZmVyIiwiX2RlZmVyMiIsIm5ld1ZhbCIsIl90aGlzIiwiZWwiLCJ0YWJJbmRleCIsImZvY3VzIiwiX2V2ZW50cyIsIl9ldmVudHMyIiwiX3hoclJlc3BvbnNlIiwiX3hoclJlc3BvbnNlMiIsIk1hcCIsIlN0YWNrIiwic3RhY2tDbGVhciIsInN0YWNrRGVsZXRlIiwic3RhY2tHZXQiLCJzdGFja0hhcyIsInN0YWNrU2V0IiwiU3ltYm9sIiwiYmFzZUdldCIsInBhdGgiLCJjYXN0UGF0aCIsImJhc2VIYXMiLCJoYXNPd25Qcm9wZXJ0eSIsImdldFByb3RvdHlwZSIsImJhc2VJc0VxdWFsIiwib3RoZXIiLCJjdXN0b21pemVyIiwiYml0bWFzayIsInN0YWNrIiwiYmFzZUlzRXF1YWxEZWVwIiwiYmFzZVByb3BlcnR5Iiwic3RyaW5nVG9QYXRoIiwiZXF1YWxBcnJheXMiLCJlcXVhbEZ1bmMiLCJpc1BhcnRpYWwiLCJQQVJUSUFMX0NPTVBBUkVfRkxBRyIsImFyckxlbmd0aCIsIm90aExlbmd0aCIsInN0YWNrZWQiLCJzZWVuIiwiVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyIsIlNldENhY2hlIiwiYXJyVmFsdWUiLCJvdGhWYWx1ZSIsImNvbXBhcmVkIiwiYXJyYXlTb21lIiwib3RoSW5kZXgiLCJhZGQiLCJpc0hvc3RPYmplY3QiLCJpc0luZGV4IiwicmVJc1VpbnQiLCJpc1N0cmljdENvbXBhcmFibGUiLCJtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZSIsInNyY1ZhbHVlIiwidG9Tb3VyY2UiLCJmdW5jIiwiZnVuY1RvU3RyaW5nIiwiYmFzZURlbGF5IiwicmVzdCIsImRlZmVyIiwiaXNBcmd1bWVudHMiLCJpc0FycmF5TGlrZU9iamVjdCIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiYXJnc1RhZyIsImlzQXJyYXlMaWtlIiwiZ2V0TGVuZ3RoIiwiaXNTdHJpbmciLCJzdHJpbmdUYWciLCJrZXlzIiwiaXNQcm90byIsImlzUHJvdG90eXBlIiwiYmFzZUtleXMiLCJpbmRleGVzIiwiaW5kZXhLZXlzIiwic2tpcEluZGV4ZXMiLCJ0b0ludGVnZXIiLCJ0b0Zpbml0ZSIsInJlbWFpbmRlciIsInRvTnVtYmVyIiwiTkFOIiwidmFsdWVPZiIsInJlcGxhY2UiLCJyZVRyaW0iLCJpc0JpbmFyeSIsInJlSXNCaW5hcnkiLCJyZUlzT2N0YWwiLCJmcmVlUGFyc2VJbnQiLCJzbGljZSIsInJlSXNCYWRIZXgiLCJwYXJzZUludCIsInZhbCIsImhhc093biIsIl9pc1Z1ZSIsIl9kYXRhIiwib2IiLCJfX29iX18iLCJjb252ZXJ0IiwiZGVwIiwibm90aWZ5Iiwidm1zIiwidm0iLCJfcHJveHkiLCJfZGlnZXN0IiwiZGVsIiwiX3VucHJveHkiLCJpc0xpdGVyYWwiLCJleHAiLCJsaXRlcmFsVmFsdWVSRSIsImlzUmVzZXJ2ZWQiLCJzdHIiLCJjaGFyQ29kZUF0IiwiX3RvU3RyaW5nIiwicGFyc2VkIiwiTnVtYmVyIiwiaXNOYU4iLCJ0b0Jvb2xlYW4iLCJzdHJpcFF1b3RlcyIsImEiLCJiIiwiY2FtZWxpemUiLCJjYW1lbGl6ZVJFIiwidG9VcHBlciIsIl8iLCJ0b1VwcGVyQ2FzZSIsImh5cGhlbmF0ZSIsImh5cGhlbmF0ZVJFIiwiY2xhc3NpZnkiLCJjbGFzc2lmeVJFIiwiY3R4IiwibCIsInRvQXJyYXkiLCJyZXQiLCJ0byIsImZyb20iLCJpc1BsYWluT2JqZWN0IiwiT0JKRUNUX1NUUklORyIsImRlZiIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsIl9kZWJvdW5jZSIsIndhaXQiLCJjb250ZXh0IiwidGltZXN0YW1wIiwibGF0ZXIiLCJsYXN0IiwiRGF0ZSIsIm5vdyIsImFyciIsImNhbmNlbGxhYmxlIiwiY2IiLCJjYW5jZWxsZWQiLCJjYW5jZWwiLCJsb29zZUVxdWFsIiwiQ2FjaGUiLCJsaW1pdCIsInNpemUiLCJ0YWlsIiwiX2tleW1hcCIsImNyZWF0ZSIsInB1c2hGaWx0ZXIiLCJsYXN0RmlsdGVySW5kZXgiLCJ0cmltIiwidG9rZW5zIiwibWF0Y2giLCJmaWx0ZXJUb2tlblJFIiwicHJvY2Vzc0ZpbHRlckFyZyIsImZpbHRlcnMiLCJhcmciLCJyZXNlcnZlZEFyZ1JFIiwiZHluYW1pYyIsInN0cmlwcGVkIiwicGFyc2VEaXJlY3RpdmUiLCJzIiwiaGl0IiwiY2FjaGUkMSIsImluU2luZ2xlIiwiaW5Eb3VibGUiLCJjdXJseSIsInNxdWFyZSIsInBhcmVuIiwicHJldiIsImV4cHJlc3Npb24iLCJwdXQiLCJlc2NhcGVSZWdleCIsInJlZ2V4RXNjYXBlUkUiLCJjb21waWxlUmVnZXgiLCJvcGVuIiwiZGVsaW1pdGVycyIsImNsb3NlIiwidW5zYWZlT3BlbiIsInVuc2FmZURlbGltaXRlcnMiLCJ1bnNhZmVDbG9zZSIsInRhZ1JFIiwiUmVnRXhwIiwiaHRtbFJFIiwiY2FjaGUiLCJwYXJzZVRleHQiLCJ0ZXh0IiwiaHRtbCIsImZpcnN0Iiwib25lVGltZSIsImxhc3RJbmRleCIsImV4ZWMiLCJ0b2tlbnNUb0V4cCIsInRva2VuIiwiZm9ybWF0VG9rZW4iLCJzaW5nbGUiLCIkZXZhbCIsImlubGluZUZpbHRlcnMiLCJmaWx0ZXJSRSIsImFwcGVuZFdpdGhUcmFuc2l0aW9uIiwidGFyZ2V0IiwiYXBwbHlUcmFuc2l0aW9uIiwiYmVmb3JlV2l0aFRyYW5zaXRpb24iLCJiZWZvcmUiLCJyZW1vdmVXaXRoVHJhbnNpdGlvbiIsImRpcmVjdGlvbiIsIm9wIiwidHJhbnNpdGlvbiIsIl9fdl90cmFucyIsImhvb2tzIiwidHJhbnNpdGlvbkVuZEV2ZW50IiwiX2lzQ29tcGlsZWQiLCIkcGFyZW50IiwiYWN0aW9uIiwicXVlcnkiLCJzZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3IiLCJOT0RFX0VOViIsIndhcm4iLCJpbkRvYyIsIm5vZGUiLCJkb2MiLCJvd25lckRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwicGFyZW50Iiwibm9kZVR5cGUiLCJjb250YWlucyIsImdldEF0dHIiLCJfYXR0ciIsImdldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImdldEJpbmRBdHRyIiwiaGFzQmluZEF0dHIiLCJoYXNBdHRyaWJ1dGUiLCJhZnRlciIsInByZXBlbmQiLCJyZXBsYWNlQ2hpbGQiLCJldmVudCIsInVzZUNhcHR1cmUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImdldENsYXNzIiwiY2xhc3NuYW1lIiwiY2xhc3NOYW1lIiwiYmFzZVZhbCIsInNldENsYXNzIiwiY2xzIiwiaXNJRTkiLCJuYW1lc3BhY2VVUkkiLCJhZGRDbGFzcyIsImNsYXNzTGlzdCIsImN1ciIsInJlbW92ZUNsYXNzIiwidGFyIiwiZXh0cmFjdENvbnRlbnQiLCJhc0ZyYWdtZW50IiwiY2hpbGQiLCJyYXdDb250ZW50IiwiaXNUZW1wbGF0ZSIsImlzRnJhZ21lbnQiLCJjb250ZW50IiwiaGFzQ2hpbGROb2RlcyIsInRyaW1Ob2RlIiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImlzVHJpbW1hYmxlIiwibGFzdENoaWxkIiwidGFnTmFtZSIsImNyZWF0ZUFuY2hvciIsInBlcnNpc3QiLCJhbmNob3IiLCJjcmVhdGVDb21tZW50IiwiX192X2FuY2hvciIsImZpbmRSZWYiLCJoYXNBdHRyaWJ1dGVzIiwiYXR0cnMiLCJhdHRyaWJ1dGVzIiwicmVmUkUiLCJtYXBOb2RlUmFuZ2UiLCJlbmQiLCJuZXh0IiwicmVtb3ZlTm9kZVJhbmdlIiwiZnJhZyIsIm9uUmVtb3ZlZCIsInJlbW92ZWQiLCJkb25lIiwibm9kZXMiLCJnZXRPdXRlckhUTUwiLCJvdXRlckhUTUwiLCJjb250YWluZXIiLCJjbG9uZU5vZGUiLCJpbm5lckhUTUwiLCJjaGVja0NvbXBvbmVudEF0dHIiLCJoYXNBdHRycyIsImNvbW1vblRhZ1JFIiwicmVzZXJ2ZWRUYWdSRSIsImdldElzQmluZGluZyIsInJlc29sdmVBc3NldCIsImlzIiwiZXhwZWN0ZWRUYWciLCJfY29tcG9uZW50TmFtZU1hcCIsImlzVW5rbm93bkVsZW1lbnQiLCJtZXJnZURhdGEiLCJ0b1ZhbCIsImZyb21WYWwiLCJtZXJnZUFzc2V0cyIsInBhcmVudFZhbCIsImNoaWxkVmFsIiwicmVzIiwiZ3VhcmRBcnJheUFzc2V0cyIsImd1YXJkQ29tcG9uZW50cyIsImNvbXBvbmVudHMiLCJpZHMiLCJWdWUiLCJndWFyZFByb3BzIiwicHJvcHMiLCJhc3NldHMiLCJhc3NldCIsIm1lcmdlT3B0aW9ucyIsIm1lcmdlRmllbGQiLCJzdHJhdCIsInN0cmF0cyIsImRlZmF1bHRTdHJhdCIsInByb3BzRGF0YSIsIm1peGlucyIsIm1peGluIiwibWl4aW5PcHRpb25zIiwid2Fybk1pc3NpbmciLCJjYW1lbGl6ZWRJZCIsImNoYXJBdCIsIkRlcCIsInVpZCQxIiwic3VicyIsIndpdGhvdXRDb252ZXJzaW9uIiwic2hvdWxkQ29udmVydCIsIk9ic2VydmVyIiwiYXVnbWVudCIsImhhc1Byb3RvIiwicHJvdG9BdWdtZW50IiwiY29weUF1Z21lbnQiLCJhcnJheU1ldGhvZHMiLCJhcnJheUtleXMiLCJvYnNlcnZlQXJyYXkiLCJ3YWxrIiwiX19wcm90b19fIiwib2JzZXJ2ZSIsImlzRXh0ZW5zaWJsZSIsImFkZFZtIiwiZGVmaW5lUmVhY3RpdmUiLCJwcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImdldHRlciIsInNldHRlciIsImNoaWxkT2IiLCJkZXBlbmQiLCJpbml0TWl4aW4iLCJfaW5pdCIsIiRlbCIsIiRyb290IiwiJGNoaWxkcmVuIiwiJHJlZnMiLCIkZWxzIiwiX3dhdGNoZXJzIiwiX2RpcmVjdGl2ZXMiLCJfdWlkIiwidWlkIiwiX2V2ZW50c0NvdW50IiwiX2lzRnJhZ21lbnQiLCJfZnJhZ21lbnQiLCJfZnJhZ21lbnRTdGFydCIsIl9mcmFnbWVudEVuZCIsIl9pc0Rlc3Ryb3llZCIsIl9pc1JlYWR5IiwiX2lzQXR0YWNoZWQiLCJfaXNCZWluZ0Rlc3Ryb3llZCIsIl92Rm9yUmVtb3ZpbmciLCJfdW5saW5rRm4iLCJfY29udGV4dCIsIl9zY29wZSIsIl9mcmFnIiwiY2hpbGRyZW4iLCIkb3B0aW9ucyIsImNvbnN0cnVjdG9yIiwiX3VwZGF0ZVJlZiIsIl9jYWxsSG9vayIsIl9pbml0U3RhdGUiLCJfaW5pdEV2ZW50cyIsIiRtb3VudCIsImdldFBhdGhDaGFyVHlwZSIsImNoIiwiY29kZSIsImZvcm1hdFN1YlBhdGgiLCJ0cmltbWVkIiwicGFyc2UiLCJtYXliZVVuZXNjYXBlUXVvdGUiLCJuZXh0Q2hhciIsIm1vZGUiLCJJTl9TSU5HTEVfUVVPVEUiLCJJTl9ET1VCTEVfUVVPVEUiLCJuZXdDaGFyIiwiYWN0aW9ucyIsIkFQUEVORCIsInR5cGVNYXAiLCJCRUZPUkVfUEFUSCIsInN1YlBhdGhEZXB0aCIsIlBVU0giLCJJTkNfU1VCX1BBVEhfREVQVEgiLCJQVVNIX1NVQl9QQVRIIiwiSU5fU1VCX1BBVEgiLCJwYXRoU3RhdGVNYWNoaW5lIiwiRVJST1IiLCJBRlRFUl9QQVRIIiwicmF3IiwicGFyc2VQYXRoIiwicGF0aENhY2hlIiwiZ2V0UGF0aCIsInBhcnNlRXhwcmVzc2lvbiIsInNldFBhdGgiLCJvcmlnaW5hbCIsIndhcm5Ob25FeGlzdGVudCIsIiRzZXQiLCJzYXZlIiwic2F2ZWQiLCJuZXdsaW5lUkUiLCJyZXdyaXRlIiwiYWxsb3dlZEtleXdvcmRzUkUiLCJyZXN0b3JlUkUiLCJyZXN0b3JlIiwiY29tcGlsZUdldHRlciIsImltcHJvcGVyS2V5d29yZHNSRSIsImJvZHkiLCJzYXZlUkUiLCJ3c1JFIiwiaWRlbnRSRSIsIm1ha2VHZXR0ZXJGbiIsImNvbXBpbGVTZXR0ZXIiLCJzY29wZSIsIm5lZWRTZXQiLCJleHByZXNzaW9uQ2FjaGUiLCJpc1NpbXBsZVBhdGgiLCJwYXRoVGVzdFJFIiwibGl0ZXJhbFZhbHVlUkUkMSIsInJlc2V0QmF0Y2hlclN0YXRlIiwidXNlclF1ZXVlIiwiY2lyY3VsYXIiLCJ3YWl0aW5nIiwiZmx1c2hCYXRjaGVyUXVldWUiLCJfYWdhaW4iLCJydW5CYXRjaGVyUXVldWUiLCJkZXZ0b29scyIsIndhdGNoZXIiLCJfbWF4VXBkYXRlQ291bnQiLCJwdXNoV2F0Y2hlciIsInEiLCJ1c2VyIiwiV2F0Y2hlciIsImV4cE9yRm4iLCJpc0ZuIiwidWlkJDIiLCJhY3RpdmUiLCJkaXJ0eSIsImxhenkiLCJkZXBzIiwibmV3RGVwcyIsImRlcElkcyIsIl9TZXQiLCJuZXdEZXBJZHMiLCJwcmV2RXJyb3IiLCJ0d29XYXkiLCJxdWV1ZWQiLCJzaGFsbG93IiwidHJhdmVyc2UiLCJzZWVuT2JqZWN0cyIsImlzQSIsImlzTyIsImRlcElkIiwiaXNSZWFsVGVtcGxhdGUiLCJzdHJpbmdUb0ZyYWdtZW50IiwidGVtcGxhdGVTdHJpbmciLCJjYWNoZUtleSIsInRlbXBsYXRlQ2FjaGUiLCJ0YWdNYXRjaCIsInRhZ1JFJDEiLCJlbnRpdHlNYXRjaCIsImVudGl0eVJFIiwiY29tbWVudE1hdGNoIiwiY29tbWVudFJFIiwid3JhcCIsImVmYXVsdCIsImRlcHRoIiwicHJlZml4Iiwic3VmZml4Iiwibm9kZVRvRnJhZ21lbnQiLCJ0ZXh0Q29udGVudCIsImNsb25lZE5vZGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2xvbmVkIiwiaGFzQnJva2VuVGVtcGxhdGUiLCJ0ZW1wQ2xvbmUiLCJoYXNUZXh0YXJlYUNsb25lQnVnIiwicGFyc2VUZW1wbGF0ZSIsInNob3VsZENsb25lIiwiaWRTZWxlY3RvckNhY2hlIiwiZ2V0RWxlbWVudEJ5SWQiLCJGcmFnbWVudCIsImxpbmtlciIsImhvc3QiLCJwYXJlbnRGcmFnIiwiY2hpbGRGcmFncyIsImluc2VydGVkIiwidW5saW5rIiwic2luZ2xlQmVmb3JlIiwic2luZ2xlUmVtb3ZlIiwibXVsdGlCZWZvcmUiLCJtdWx0aVJlbW92ZSIsIl9fdl9mcmFnIiwid2l0aFRyYW5zaXRpb24iLCJtZXRob2QiLCJjYWxsSG9vayIsImF0dGFjaCIsInNob3VsZENhbGxSZW1vdmUiLCJiZWZvcmVSZW1vdmUiLCJkZXRhY2giLCJkZXN0cm95IiwiRnJhZ21lbnRGYWN0b3J5IiwiY2lkIiwiY2FjaGVJZCIsImxpbmtlckNhY2hlIiwiY29tcGlsZSIsImZpbmRQcmV2RnJhZyIsInByZXZpb3VzU2libGluZyIsImZvcklkIiwiZmluZFZtRnJvbUZyYWciLCJfX3Z1ZV9fIiwicmFuZ2UiLCJuIiwiTWF0aCIsImZsb29yIiwiZ2V0VHJhY2tCeUtleSIsInRyYWNrQnlLZXkiLCJtdWx0aSIsImluaXQiLCJzZWxlY3RlZCIsIl92YWx1ZSIsImluZGV4T2YkMSIsImtleUZpbHRlciIsImhhbmRsZXIiLCJjb2RlcyIsImNoYXJDb2RlIiwia2V5Q29kZXMiLCJrZXlDb2RlIiwic3RvcEZpbHRlciIsInN0b3BQcm9wYWdhdGlvbiIsInByZXZlbnRGaWx0ZXIiLCJwcmV2ZW50RGVmYXVsdCIsInNlbGZGaWx0ZXIiLCJjdXJyZW50VGFyZ2V0Iiwibm9ybWFsaXplIiwicHJvcCIsInByb3BDYWNoZSIsImNhbWVsIiwidXBwZXIiLCJ0ZXN0RWwiLCJwcmVmaXhlZCIsInByZWZpeGVzIiwic3R5bGUiLCJrZWJhYiIsImNhbWVsUHJlZml4ZXMiLCJub3JtYWxpemUkMSIsIl9rZXkiLCJrIiwic3BsaXQiLCJjYWxsQWN0aXZhdGVIb29rcyIsImNhbGxlZCIsInRvdGFsIiwiY29tcGlsZVByb3BzIiwicHJvcE9wdGlvbnMiLCJhdHRyIiwibmFtZXMiLCJlbXB0eSIsImlkZW50UkUkMSIsInByb3BCaW5kaW5nTW9kZXMiLCJPTkVfV0FZIiwiVFdPX1dBWSIsIk9ORV9USU1FIiwib3B0aW1pemVkTGl0ZXJhbCIsInNldHRhYmxlUGF0aFJFIiwicGFyZW50UGF0aCIsImxvd2VyQ2FzZU5hbWUiLCJyZXF1aXJlZCIsIm1ha2VQcm9wc0xpbmtGbiIsIl9wcm9wcyIsImlubGluZVByb3BzIiwiaW5pdFByb3AiLCIkZ2V0IiwiX2JpbmREaXIiLCJwcm9wRGVmIiwicHJvY2Vzc1Byb3BWYWx1ZSIsInJhd1ZhbHVlIiwiaXNTaW1wbGUiLCJnZXRQcm9wRGVmYXVsdFZhbHVlIiwiY29lcmNlUHJvcCIsImNvZXJjZWQiLCJhc3NlcnRQcm9wIiwidXBkYXRlUHJvcCIsInZhbGlkIiwiZXhwZWN0ZWRUeXBlcyIsImFzc2VydGVkVHlwZSIsImFzc2VydFR5cGUiLCJleHBlY3RlZFR5cGUiLCJmb3JtYXRUeXBlIiwiZm9ybWF0VmFsdWUiLCJ2YWxpZGF0b3IiLCJjb2VyY2UiLCJTdHJpbmciLCJwdXNoSm9iIiwiam9iIiwicXVldWUkMSIsImZsdXNoIiwiZiIsIm9mZnNldEhlaWdodCIsIlRyYW5zaXRpb24iLCJlbnRlckNsYXNzIiwibGVhdmVDbGFzcyIsInBlbmRpbmdDc3NFdmVudCIsInBlbmRpbmdDc3NDYiIsInBlbmRpbmdKc0NiIiwianVzdEVudGVyZWQiLCJlbnRlcmVkIiwibGVmdCIsInR5cGVDYWNoZSIsIlRZUEVfVFJBTlNJVElPTiIsIlRZUEVfQU5JTUFUSU9OIiwiZm9yRWFjaCIsImlzSGlkZGVuIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIndpZHRoIiwiaGVpZ2h0Iiwib2Zmc2V0V2lkdGgiLCJnZXRDbGllbnRSZWN0cyIsInBhcnRpYWwiLCJub2RlTGlua0ZuIiwiX2FzQ29tcG9uZW50IiwiY29tcGlsZU5vZGUiLCJjaGlsZExpbmtGbiIsInRlcm1pbmFsIiwiaXNTY3JpcHQiLCJjb21waWxlTm9kZUxpc3QiLCJkaXJzIiwibGlua0FuZENhcHR1cmUiLCJtYWtlVW5saW5rRm4iLCJvcmlnaW5hbERpckNvdW50Iiwic29ydCIsImRpcmVjdGl2ZUNvbXBhcmF0b3IiLCJfYmluZCIsImRlc2NyaXB0b3IiLCJwcmlvcml0eSIsIkRFRkFVTFRfUFJJT1JJVFkiLCJjb250ZXh0RGlycyIsImRlc3Ryb3lpbmciLCJ0ZWFyZG93bkRpcnMiLCJfdGVhcmRvd24iLCIkcmVtb3ZlIiwiY29tcGlsZUFuZExpbmtQcm9wcyIsInByb3BzTGlua0ZuIiwicHJvcERpcnMiLCJjb21waWxlUm9vdCIsImNvbnRleHRPcHRpb25zIiwiY29udGV4dExpbmtGbiIsInJlcGxhY2VyTGlua0ZuIiwiY29udGFpbmVyQXR0cnMiLCJfY29udGFpbmVyQXR0cnMiLCJyZXBsYWNlckF0dHJzIiwiX3JlcGxhY2VyQXR0cnMiLCJjb21waWxlRGlyZWN0aXZlcyIsIm9uUkUiLCJwbHVyYWwiLCJzZWxmRGlycyIsImNvbXBpbGVUZXh0Tm9kZSIsImNvbXBpbGVFbGVtZW50IiwibGlua0ZuIiwiY2hlY2tUZXJtaW5hbERpcmVjdGl2ZXMiLCJjaGVja0VsZW1lbnREaXJlY3RpdmVzIiwiY2hlY2tDb21wb25lbnQiLCJfc2tpcCIsInJlbW92ZVRleHQiLCJ3aG9sZVRleHQiLCJwcm9jZXNzVGV4dFRva2VuIiwibWFrZVRleHROb2RlTGlua0ZuIiwic2V0VG9rZW5UeXBlIiwiZGlyZWN0aXZlcyIsImZyYWdDbG9uZSIsIm5vZGVMaXN0IiwibGlua0ZucyIsIm1ha2VDaGlsZExpbmtGbiIsImNoaWxkcmVuTGlua0ZuIiwibWFrZVRlcm1pbmFsTm9kZUxpbmtGbiIsImNvbXBvbmVudCIsInJlZiIsImludGVybmFsRGlyZWN0aXZlcyIsIm1vZGlmaWVycyIsImxpdGVyYWwiLCJjb21wb25lbnRMaW5rRm4iLCJza2lwIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsIm1hdGNoZWQiLCJkaXJOYW1lIiwicmF3TmFtZSIsInRlcm1EZWYiLCJtb2RpZmllclJFIiwiZGlyQXR0clJFIiwiREVGQVVMVF9URVJNSU5BTF9QUklPUklUWSIsInBhcnNlTW9kaWZpZXJzIiwicHVzaERpciIsImludGVycFRva2VucyIsImhhc09uZVRpbWVUb2tlbiIsImhhc09uZVRpbWUiLCJpbnRlcnAiLCJkaXJEZWYiLCJzb21lIiwidHJhbnNpdGlvblJFIiwiYmluZFJFIiwibWFrZU5vZGVMaW5rRm4iLCJ0cmFuc2NsdWRlIiwiZXh0cmFjdEF0dHJzIiwiX2NvbnRlbnQiLCJ0cmFuc2NsdWRlVGVtcGxhdGUiLCJyZXBsYWNlciIsIm1lcmdlQXR0cnMiLCJzcGVjaWFsQ2hhclJFIiwicmVzb2x2ZVNsb3RzIiwiY29udGVudHMiLCJfc2xvdENvbnRlbnRzIiwiZXh0cmFjdEZyYWdtZW50Iiwic3RhdGVNaXhpbiIsIm1ha2VDb21wdXRlZEdldHRlciIsIm93bmVyIiwiZXZhbHVhdGUiLCJuZXdEYXRhIiwiX3NldERhdGEiLCJfaW5pdFByb3BzIiwiX2luaXRNZXRhIiwiX2luaXRNZXRob2RzIiwiX2luaXREYXRhIiwiX2luaXRDb21wdXRlZCIsIl9wcm9wc1VubGlua0ZuIiwiZGF0YUZuIiwib2xkRGF0YSIsInJlbW92ZVZtIiwiY29tcHV0ZWQiLCJ1c2VyRGVmIiwibWV0aG9kcyIsIm1ldGFzIiwiX21ldGEiLCJldmVudHNNaXhpbiIsInJlZ2lzdGVyQ29tcG9uZW50RXZlbnRzIiwiZXZlbnRSRSIsIl9mcm9tUGFyZW50IiwiJG9uIiwicmVnaXN0ZXJDYWxsYmFja3MiLCJoYXNoIiwiaGFuZGxlcnMiLCJyZWdpc3RlciIsIm9uQXR0YWNoZWQiLCJjYWxsQXR0YWNoIiwib25EZXRhY2hlZCIsImNhbGxEZXRhY2giLCJldmVudHMiLCJ3YXRjaCIsIl9pbml0RE9NSG9va3MiLCJob29rIiwiJGVtaXQiLCJub29wJDEiLCJEaXJlY3RpdmUiLCJfbG9ja2VkIiwiX2JvdW5kIiwiX2xpc3RlbmVycyIsIl9ob3N0IiwiX3Z1ZV9kaXJlY3RpdmVzIiwibGlmZWN5Y2xlTWl4aW4iLCJfcmVmIiwiX2NvbXBpbGUiLCJfaW5pdEVsZW1lbnQiLCJyb290TGlua2VyIiwiY29udGVudExpbmtGbiIsImN0b3IiLCJfbGlua2VyQ2FjaGFibGUiLCJyb290VW5saW5rRm4iLCJjb250ZW50VW5saW5rRm4iLCJfZGVzdHJveSIsImRlZmVyQ2xlYW51cCIsIl9jbGVhbnVwIiwiZGVzdHJveVJlYWR5IiwicGVuZGluZ1JlbW92YWwiLCJjbGVhbnVwSWZQb3NzaWJsZSIsIiRkZXN0cm95IiwidGVhcmRvd24iLCIkb2ZmIiwibWlzY01peGluIiwiX2FwcGx5RmlsdGVycyIsIm9sZFZhbHVlIiwid3JpdGUiLCJvZmZzZXQiLCJyZWFkIiwiX3Jlc29sdmVDb21wb25lbnQiLCJmYWN0b3J5IiwicmVzb2x2ZWQiLCJyZXF1ZXN0ZWQiLCJwZW5kaW5nQ2FsbGJhY2tzIiwiY2JzIiwicmVhc29uIiwiZGF0YUFQSSIsImNsZWFuIiwiYXNTdGF0ZW1lbnQiLCIkYXJndW1lbnRzIiwiJGRlbGV0ZSIsIiR3YXRjaCIsImRlZXAiLCJzeW5jIiwiaW1tZWRpYXRlIiwiZmlsdGVyUkUkMSIsIiRpbnRlcnBvbGF0ZSIsIiRsb2ciLCJjb25zb2xlIiwibG9nIiwiZG9tQVBJIiwiaW5zZXJ0Iiwib3AxIiwib3AyIiwidGFyZ2V0SXNEZXRhY2hlZCIsInNob3VsZENhbGxIb29rIiwiYXBwZW5kIiwiYmVmb3JlV2l0aENiIiwicmVtb3ZlV2l0aENiIiwiJG5leHRUaWNrIiwiJGFwcGVuZFRvIiwiJHByZXBlbmRUbyIsIiRiZWZvcmUiLCIkYWZ0ZXIiLCJpbkRvY3VtZW50IiwicmVhbENiIiwiZXZlbnRzQVBJIiwibW9kaWZ5TGlzdGVuZXJDb3VudCIsImNvdW50IiwiaG9va1JFIiwiJG9uY2UiLCJpc1NvdXJjZSIsInNob3VsZFByb3BhZ2F0ZSIsImhhc1BhcmVudENicyIsIiRicm9hZGNhc3QiLCJzb3VyY2UiLCIkZGlzcGF0Y2giLCJsaWZlY3ljbGVBUEkiLCJyZWFkeSIsIiRjb21waWxlIiwibGltaXRCeSIsImZpbHRlckJ5Iiwic2VhcmNoIiwiZGVsaW1pdGVyIiwiY29udmVydEFycmF5IiwiJHZhbHVlIiwiJGtleSIsIm9yZGVyQnkiLCJiYXNlQ29tcGFyZSIsInNvcnRLZXlJbmRleCIsInNvcnRLZXkiLCJzb3J0S2V5cyIsIm9yZGVyIiwiY29tcGFyYXRvciIsImZpcnN0QXJnIiwiaW5zdGFsbEdsb2JhbEFQSSIsImNyZWF0ZUNsYXNzIiwiZWxlbWVudERpcmVjdGl2ZXMiLCJ0cmFuc2l0aW9ucyIsInBhcnRpYWxzIiwidXRpbCIsImNvbXBpbGVyIiwicGFyc2VycyIsImRpcmVjdGl2ZSIsImV4dGVuZE9wdGlvbnMiLCJTdXBlciIsImlzRmlyc3RFeHRlbmQiLCJfQ3RvciIsIlN1YiIsIl9hc3NldFR5cGVzIiwicGx1Z2luIiwiaW5zdGFsbGVkIiwidW5zaGlmdCIsImluc3RhbGwiLCJkZWZpbml0aW9uIiwiaW5Ccm93c2VyIiwiX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyIsIlVBIiwiaXNJRSIsImlzQW5kcm9pZCIsImlzSW9zIiwiaW9zVmVyc2lvbk1hdGNoIiwiaW9zVmVyc2lvbiIsImhhc011dGF0aW9uT2JzZXJ2ZXJCdWciLCJpbmRleGVkREIiLCJ0cmFuc2l0aW9uUHJvcCIsImFuaW1hdGlvblByb3AiLCJhbmltYXRpb25FbmRFdmVudCIsImlzV2Via2l0VHJhbnMiLCJvbnRyYW5zaXRpb25lbmQiLCJvbndlYmtpdHRyYW5zaXRpb25lbmQiLCJpc1dlYmtpdEFuaW0iLCJvbmFuaW1hdGlvbmVuZCIsIm9ud2Via2l0YW5pbWF0aW9uZW5kIiwibmV4dFRpY2tIYW5kbGVyIiwicGVuZGluZyIsImNvcGllcyIsInRpbWVyRnVuYyIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJzZXRJbW1lZGlhdGUiLCJjb3VudGVyIiwib2JzZXJ2ZXIiLCJ0ZXh0Tm9kZSIsImNoYXJhY3RlckRhdGEiLCJTZXQiLCJuZXdlciIsIm9sZGVyIiwicmV0dXJuRW50cnkiLCJmcmVlemUiLCJkZWZpbmVQcm9wZXJ0aWVzIiwic2lsZW50Iiwid2FybkV4cHJlc3Npb25FcnJvcnMiLCJfZGVsaW1pdGVyc0NoYW5nZWQiLCJfcHJvcEJpbmRpbmdNb2RlcyIsImZvcm1hdENvbXBvbmVudE5hbWUiLCJoYXNDb25zb2xlIiwibXNnIiwiZXJyb3IiLCJIVE1MVW5rbm93bkVsZW1lbnQiLCJIVE1MRWxlbWVudCIsIm9wdGlvbk1lcmdlU3RyYXRlZ2llcyIsImluc3RhbmNlRGF0YSIsImRlZmF1bHREYXRhIiwiY3JlYXRlZCIsImF0dGFjaGVkIiwiZGV0YWNoZWQiLCJiZWZvcmVDb21waWxlIiwiY29tcGlsZWQiLCJiZWZvcmVEZXN0cm95IiwiZGVzdHJveWVkIiwiYWN0aXZhdGUiLCJhZGRTdWIiLCJzdWIiLCJyZW1vdmVTdWIiLCJhZGREZXAiLCJhcnJheVByb3RvIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsIml0ZW1zIiwiZGVib3VuY2UiLCJJTl9QQVRIIiwiQkVGT1JFX0lERU5UIiwiSU5fSURFTlQiLCJ3cyIsImlkZW50IiwiWyIsImVvZiIsIi4iLCJudW1iZXIiLCInIiwiXCIiLCJdIiwiZWxzZSIsImFsbG93ZWRLZXl3b3JkcyIsImltcHJvcGVyS2V5d29yZHMiLCJiZWZvcmVHZXQiLCJwcmVQcm9jZXNzIiwicG9zdFByb2Nlc3MiLCJhZnRlckdldCIsImZvckNvbnRleHQiLCIkZm9yQ29udGV4dCIsImFsaWFzIiwiX3dpdGhMb2NrIiwiJGluZGV4IiwidG1wIiwiY3VycmVudCIsInRleHQkMSIsImxlZ2VuZCIsInRyIiwiY29sIiwidGQiLCJ0aCIsIm9wdGlvbiIsIm9wdGdyb3VwIiwidGhlYWQiLCJ0Ym9keSIsImNvbGdyb3VwIiwiY2FwdGlvbiIsInRmb290IiwiZyIsImRlZnMiLCJzeW1ib2wiLCJpbWFnZSIsImNpcmNsZSIsImVsbGlwc2UiLCJsaW5lIiwicG9seWdvbiIsInBvbHlsaW5lIiwidCIsInBsYWNlaG9sZGVyIiwic3dhcCIsIl93YXRjaGVyIiwiT04iLCJNT0RFTCIsIkJJTkQiLCJUUkFOU0lUSU9OIiwiRUwiLCJDT01QT05FTlQiLCJQQVJUSUFMIiwiSUYiLCJGT1IiLCJTTE9UIiwidWlkJDMiLCJ2Rm9yIiwicGFyYW1zIiwiaW5NYXRjaCIsIml0TWF0Y2giLCJpdGVyYXRvciIsImlzT3B0aW9uIiwiZGlmZiIsInVwZGF0ZVJlZiIsInVwZGF0ZU1vZGVsIiwicHJpbWl0aXZlIiwiY29udmVydGVkRnJvbU9iamVjdCIsImZyb21PYmplY3QiLCJ0cmFja0J5Iiwib2xkRnJhZ3MiLCJmcmFncyIsImdldENhY2hlZEZyYWciLCJyZXVzZWQiLCJmcmVzaCIsInJlbW92YWxJbmRleCIsInRvdGFsUmVtb3ZlZCIsImRlbGV0ZUNhY2hlZEZyYWciLCJ3IiwidGFyZ2V0UHJldiIsInByZXZFbCIsImN1cnJlbnRQcmV2IiwiaW5zZXJ0aW9uSW5kZXgiLCJzdGFnZ2VyQ2IiLCJzdGFnZ2VyQW5jaG9yIiwibW92ZSIsInBhcmVudFNjb3BlIiwiY2FjaGVGcmFnIiwibW9kZWwiLCJfX3ZfbW9kZWwiLCJmb3JjZVVwZGF0ZSIsInN0YWdnZXJBbW91bnQiLCJnZXRTdGFnZ2VyIiwid2FybkR1cGxpY2F0ZSIsInRyYW5zIiwic3RhZ2dlciIsIl9wcmVQcm9jZXNzIiwiX3Bvc3RQcm9jZXNzIiwidW5iaW5kIiwidklmIiwiaW52YWxpZCIsIm5leHRFbGVtZW50U2libGluZyIsImVsc2VFbCIsImVsc2VGcmFnIiwiZWxzZUZhY3RvcnkiLCJzaG93IiwidG9nZ2xlIiwiZGlzcGxheSIsInRleHQkMiIsImlzUmFuZ2UiLCJjb21wb3NpbmciLCJsaXN0ZW5lciIsImZvY3VzZWQiLCJyYXdMaXN0ZW5lciIsImhhc2pRdWVyeSIsImpRdWVyeSIsImFmdGVyQmluZCIsInJhZGlvIiwiY2hlY2tlZCIsInNlbGVjdCIsIm11bHRpcGxlIiwiaW5pdFZhbHVlIiwic2VsZWN0ZWRJbmRleCIsImNoZWNrYm94IiwiZ2V0Qm9vbGVhblZhbHVlIiwiX3RydWVWYWx1ZSIsIl9mYWxzZVZhbHVlIiwiY2hlY2tGaWx0ZXJzIiwiaGFzUmVhZCIsImhhc1dyaXRlIiwiX3VuYmluZCIsImVzYyIsInRhYiIsImVudGVyIiwic3BhY2UiLCJkZWxldGUiLCJ1cCIsInJpZ2h0IiwiZG93biIsIm9uJDEiLCJhY2NlcHRTdGF0ZW1lbnQiLCJpZnJhbWVCaW5kIiwiY29udGVudFdpbmRvdyIsImNhcHR1cmUiLCJzdG9wIiwicHJldmVudCIsInJlc2V0IiwiaW1wb3J0YW50UkUiLCJoYW5kbGVPYmplY3QiLCJyZWR1Y2UiLCJoYW5kbGVTaW5nbGUiLCJpc0ltcG9ydGFudCIsInNldFByb3BlcnR5IiwieGxpbmtOUyIsInhsaW5rUkUiLCJkaXNhbGxvd2VkSW50ZXJwQXR0clJFIiwiYXR0cldpdGhQcm9wc1JFIiwiZW51bWVyYXRlZEF0dHJSRSIsIm1vZGVsUHJvcHMiLCJ0cnVlLXZhbHVlIiwiZmFsc2UtdmFsdWUiLCJiaW5kJDEiLCJhdHRyVmFsdWUiLCJtb2RlbFByb3AiLCJzZXRBdHRyaWJ1dGVOUyIsImNsb2FrIiwiZm9yIiwiaWYiLCJ2Q2xhc3MiLCJjbGVhbnVwIiwicHJldktleXMiLCJrZWVwQWxpdmUiLCJpbmxpbmVUZW1wbGF0ZSIsInBlbmRpbmdDb21wb25lbnRDYiIsIkNvbXBvbmVudCIsInBlbmRpbmdSZW1vdmFscyIsInBlbmRpbmdSZW1vdmFsQ2IiLCJzZXRDb21wb25lbnQiLCJpbnZhbGlkYXRlUGVuZGluZyIsInJlc29sdmVDb21wb25lbnQiLCJtb3VudENvbXBvbmVudCIsInVuYnVpbGQiLCJjaGlsZFZNIiwiQ29tcG9uZW50TmFtZSIsImFjdGl2YXRlSG9va3MiLCJjYWNoZWQiLCJnZXRDYWNoZWQiLCJuZXdDb21wb25lbnQiLCJidWlsZCIsIndhaXRpbmdGb3IiLCJleHRyYU9wdGlvbnMiLCJfaXNSb3V0ZXJWaWV3IiwiX2luYWN0aXZlIiwidHJhbnNpdGlvbk1vZGUiLCJiaW5kaW5nTW9kZXMiLCJjaGlsZEtleSIsInBhcmVudEtleSIsInBhcmVudFdhdGNoZXIiLCJjaGlsZFdhdGNoZXIiLCJ0cmFuc0R1cmF0aW9uUHJvcCIsImFuaW1EdXJhdGlvblByb3AiLCJyYWYiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3YWl0Rm9yVHJhbnNpdGlvblN0YXJ0IiwicCQxIiwiY2FuY2VsUGVuZGluZyIsImNhbGxIb29rV2l0aENiIiwiZW50ZXJDYW5jZWxsZWQiLCJlbnRlck5leHRUaWNrIiwiZW50ZXJEb25lIiwiZ2V0Q3NzVHJhbnNpdGlvblR5cGUiLCJzZXR1cENzc0NiIiwibGVhdmUiLCJsZWF2ZUNhbmNlbGxlZCIsImxlYXZlRG9uZSIsImxlYXZlTmV4dFRpY2siLCJoYXNQZW5kaW5nIiwiaGlkZGVuIiwiaW5saW5lU3R5bGVzIiwiY29tcHV0ZWRTdHlsZXMiLCJnZXRDb21wdXRlZFN0eWxlIiwidHJhbnNEdXJhdGlvbiIsImFuaW1EdXJhdGlvbiIsIm9uRW5kIiwidHJhbnNpdGlvbiQxIiwib2xkSWQiLCJjbGFzcyIsIl9zZXR1cFBhcmFtcyIsIl9jaGVja1N0YXRlbWVudCIsIl91cGRhdGUiLCJvbGRWYWwiLCJtYXBwZWRLZXkiLCJfc2V0dXBQYXJhbVdhdGNoZXIiLCJ1bndhdGNoIiwicGFyYW1XYXRjaGVycyIsIl9wYXJhbVVud2F0Y2hGbnMiLCIkZXZlbnQiLCJsaXN0ZW5lcnMiLCJ1bndhdGNoRm5zIiwic2xvdCIsImZhbGxiYWNrIiwiZWxzZUJsb2NrIiwiZGlnaXRzUkUiLCJqc29uIiwiaW5kZW50IiwiY2FwaXRhbGl6ZSIsInVwcGVyY2FzZSIsImxvd2VyY2FzZSIsImN1cnJlbmN5IiwiX2N1cnJlbmN5IiwiZGVjaW1hbHMiLCJwYXJzZUZsb2F0IiwiaXNGaW5pdGUiLCJzdHJpbmdpZmllZCIsImFicyIsInRvRml4ZWQiLCJfaW50IiwiX2Zsb2F0Iiwic2lnbiIsInBsdXJhbGl6ZSIsImRlbGF5IiwiX2FwaVRhYmxlIiwiX2FwaVRhYmxlMiIsIkFwaVRhYmxlIiwiZGlzbWlzc0NhbGxCYWNrIiwiYWxlcnQiLCJhcGlJdGVtcyIsImlzUmVxdWlyZWQiLCJkZXNjIiwic3RlcFRyYWNrZXJDdXJyZW50U3RlcCIsInN0ZXBUcmFja2VyQ29uZmlnIiwiaXNDbGlja2FibGUiLCJzdGVwcyIsImxpbmsiLCJvbkNsaWNrSGFuZGxlciIsImlzVmlzaWJsZSIsImRpc21pc3NpYmxlIiwib25DbG9zZWQiLCJkaXNtaXNzIiwiX3RoaXMyIiwiaXNPcGVuIiwibGFiZWwiLCJ0b2dnbGVPcGVuIiwiZmV0Y2giLCJfbWl4aW5zIiwiX21peGluczIiLCJfZmluZEluZGV4IiwiX2ZpbmRJbmRleDIiLCJfZGVib3VuY2UyIiwiX3NldEZvY3VzIiwiX3NldEZvY3VzMiIsInNldEZvY3VzIiwiaW5kZXhlZExlZ2FscyIsIm5vbkluZGV4ZWRMZWdhbHMiLCJhcGlMYW5nIiwiYXBpUmVnaW9uIiwiZmV0Y2hMZWdhbHMiLCJoZWFkZXJzIiwiQ29udGVudC1UeXBlIiwiYXBwbGljYXRpb25LZXkiLCJhcHBlbmRSZXNwb25zZVRvTGVnYWxDb250YWluZXIiLCJkYXRhQXJ5IiwibGVnYWxSZXNwb25zZSIsImZpbmRJbmRleCIsImdldExlZ2FscyIsImluZGV4ZWRLZXlzIiwibGVnYWwiLCJub25JbmRleGVkS2V5cyIsInRoZW4iLCJwYXJzZUpTT04iLCJsZWdhbDo6Y2xpY2siLCJsZWdhbEtleSIsInRhcmdldExlZ2FsSW5kZXgiLCJpc1NlbGVjdGVkIiwiYXNzaWduIiwibGVnYWw6OmluaXQiLCJsZWdhbEluaXREZXRhaWwiLCJsYW5nIiwicmVnaW9uIiwiY29udGFpbmVyUmVmIiwiaXNOb25JbmRleGVkIiwicm9vdEJyb2FkY2FzdCIsImxlZ2FsQ291bnRlciIsImxlZ2FsTGFuZyIsImxlZ2FsUmVnaW9uIiwibGVnYWw6OnVkcGF0ZSIsInVwZGF0ZURldGFpbCIsImNsaWNrSGFuZGxlciIsIkVTQyIsIl9pc1Zpc2libGUiLCJvdmVybGF5Q29udGFpbmVyOjpvcGVuIiwib3ZlcmxheUNvbnRhaW5lcjo6Y2xvc2UiLCJldnQiLCJvdmVybGF5S2V5IiwiY2xvc2VPdmVybGF5Iiwib3ZlcmxheTo6b3BlbiIsImN1cnJlbnRTdGVwIiwic3RlcCIsImlzRGlzYWJsZWQiLCJhY3RpdmVUYWJJbmRleCIsInRhYnMiLCJfZGVmaW5lUHJvcGVydHkiLCJpc0FjdGl2ZSIsImhhbmRsZVRhYkxpc3RDbGljayIsIl9pbmRleCIsIl9pbmRleDIiLCJfc3RlcFRyYWNrZXJQYWdlIiwiX3N0ZXBUcmFja2VyUGFnZTIiLCJfdGFic1BhZ2UiLCJfdGFic1BhZ2UyIiwiX2xlZ2FsUGFnZSIsIl9sZWdhbFBhZ2UyIiwiX292ZXJsYXlQYWdlIiwiX292ZXJsYXlQYWdlMiIsIl9jb2xsYXBzYWJsZVBhbmVsUGFnZSIsIl9jb2xsYXBzYWJsZVBhbmVsUGFnZTIiLCJfYWxlcnRQYWdlIiwiX2FsZXJ0UGFnZTIiLCIvIiwiL2FsZXJ0IiwiQWxlcnRQYWdlIiwiL3N0ZXAtdHJhY2tlciIsIlN0ZXBUcmFja2VyUGFnZSIsIi90YWJzIiwiVGFic1BhZ2UiLCIvbGVnYWwiLCJMZWdhbFBhZ2UiLCIvb3ZlcmxheSIsIk92ZXJsYXlQYWdlIiwiL2NvbGxhcHNhYmxlLXBhbmVsIiwiQ29sbGFwc2FibGVQYW5lbFBhZ2UiLCJldmVudEhhbmRsZXIiLCJfb3ZlcmxheU9wZW5lciIsIl9vdmVybGF5T3BlbmVyMiIsIl9vdmVybGF5Q29udGFpbmVyIiwiX292ZXJsYXlDb250YWluZXIyIiwiX292ZXJsYXkiLCJfb3ZlcmxheTIiLCJfbGVnYWxDb3VudGVyIiwiX2xlZ2FsQ291bnRlcjIiLCJfbGVnYWxDb250YWluZXIiLCJfbGVnYWxDb250YWluZXIyIiwiX3RhYnMiLCJfdGFiczIiLCJfdGFiIiwiX3RhYjIiLCJfaW5kZXgzIiwiX2luZGV4NCIsIl9pbmRleDUiLCJfaW5kZXg2IiwiU3RlcFRyYWNrZXIiLCJPdmVybGF5Q29udGFpbmVyIiwiT3ZlcmxheSIsIkxlZ2FsQ291bnRlciIsIkxlZ2FsQ29udGFpbmVyIiwiVGFicyIsIlRhYiIsIkNvbGxhcHNhYmxlUGFuZWwiLCJBbGVydCIsIm92ZXJsYXlPcGVuZXIiLCJfbmFtZSIsIl9sZW4iLCJyZXNwb25zZSIsIl9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fIiwibGliJGVzNiRwcm9taXNlJHV0aWxzJCRvYmplY3RPckZ1bmN0aW9uIiwieCIsImxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbiIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRzZXRTY2hlZHVsZXIiLCJzY2hlZHVsZUZuIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHNldEFzYXAiLCJhc2FwRm4iLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcCIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VOZXh0VGljayIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VWZXJ0eFRpbWVyIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHZlcnR4TmV4dCIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNdXRhdGlvbk9ic2VydmVyIiwiaXRlcmF0aW9ucyIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRCcm93c2VyTXV0YXRpb25PYnNlcnZlciIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNZXNzYWdlQ2hhbm5lbCIsImNoYW5uZWwiLCJNZXNzYWdlQ2hhbm5lbCIsInBvcnQxIiwib25tZXNzYWdlIiwicG9ydDIiLCJwb3N0TWVzc2FnZSIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0IiwibGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZSIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRhdHRlbXB0VmVydHgiLCJ2ZXJ0eCIsInJ1bk9uTG9vcCIsInJ1bk9uQ29udGV4dCIsImxpYiRlczYkcHJvbWlzZSR0aGVuJCR0aGVuIiwib25GdWxmaWxsbWVudCIsIm9uUmVqZWN0aW9uIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBST01JU0VfSUQiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRtYWtlUHJvbWlzZSIsInN0YXRlIiwiX3N0YXRlIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW52b2tlQ2FsbGJhY2siLCJfcmVzdWx0IiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlIiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkcmVzb2x2ZSIsIkNvbnN0cnVjdG9yIiwicHJvbWlzZSIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzZWxmRnVsZmlsbG1lbnQiLCJUeXBlRXJyb3IiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRjYW5ub3RSZXR1cm5Pd24iLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRnZXRUaGVuIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1IiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlUaGVuIiwiZnVsZmlsbG1lbnRIYW5kbGVyIiwicmVqZWN0aW9uSGFuZGxlciIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZUZvcmVpZ25UaGVuYWJsZSIsInRoZW5hYmxlIiwic2VhbGVkIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdCIsIl9sYWJlbCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU93blRoZW5hYmxlIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVNYXliZVRoZW5hYmxlIiwibWF5YmVUaGVuYWJsZSIsImxpYiRlczYkcHJvbWlzZSR0aGVuJCRkZWZhdWx0IiwicmVzb2x2ZSIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJGRlZmF1bHQiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoUmVqZWN0aW9uIiwiX29uZXJyb3IiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORyIsIl9zdWJzY3JpYmVycyIsInN1YnNjcmliZXJzIiwic2V0dGxlZCIsImRldGFpbCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEVycm9yT2JqZWN0IiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5Q2F0Y2giLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1IiLCJzdWNjZWVkZWQiLCJmYWlsZWQiLCJoYXNDYWxsYmFjayIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGluaXRpYWxpemVQcm9taXNlIiwicmVzb2x2ZXIiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRuZXh0SWQiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpZCIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkYWxsIiwibGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJGRlZmF1bHQiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRyYWNlIiwibGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0FycmF5IiwicmVqZWN0IiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRyZWplY3QiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkbmVlZHNSZXNvbHZlciIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc05ldyIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlIiwibGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IiLCJpbnB1dCIsIl9pbnN0YW5jZUNvbnN0cnVjdG9yIiwiX2lucHV0IiwiX3JlbWFpbmluZyIsIl9lbnVtZXJhdGUiLCJsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkdmFsaWRhdGlvbkVycm9yIiwibGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRwb2x5ZmlsbCIsImxvY2FsIiwiUCIsIlByb21pc2UiLCJjYXN0IiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkJGRlZmF1bHQiLCJsaWIkZXM2JHByb21pc2UkdXRpbHMkJF9pc0FycmF5IiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2giLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3NlcldpbmRvdyIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyR2xvYmFsIiwiV2ViS2l0TXV0YXRpb25PYnNlcnZlciIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc05vZGUiLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNXb3JrZXIiLCJVaW50OENsYW1wZWRBcnJheSIsImltcG9ydFNjcmlwdHMiLCJyYW5kb20iLCJzdWJzdHJpbmciLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGRlZmF1bHQiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRkZWZhdWx0IiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRkZWZhdWx0IiwiYWxsIiwicmFjZSIsIl9zZXRTY2hlZHVsZXIiLCJfc2V0QXNhcCIsIl9hc2FwIiwiY2F0Y2giLCJfZWFjaEVudHJ5IiwiX3NldHRsZWRBdCIsIl93aWxsU2V0dGxlQXQiLCJlbnVtZXJhdG9yIiwibGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRkZWZhdWx0IiwibGliJGVzNiRwcm9taXNlJHVtZCQkRVM2UHJvbWlzZSIsInBvbHlmaWxsIiwibm9ybWFsaXplTmFtZSIsIm5vcm1hbGl6ZVZhbHVlIiwiaXRlcmF0b3JGb3IiLCJzdXBwb3J0IiwiaXRlcmFibGUiLCJIZWFkZXJzIiwiY29uc3VtZWQiLCJib2R5VXNlZCIsImZpbGVSZWFkZXJSZWFkeSIsInJlYWRlciIsIm9ubG9hZCIsIm9uZXJyb3IiLCJyZWFkQmxvYkFzQXJyYXlCdWZmZXIiLCJibG9iIiwiRmlsZVJlYWRlciIsInJlYWRBc0FycmF5QnVmZmVyIiwicmVhZEJsb2JBc1RleHQiLCJyZWFkQXNUZXh0IiwiQm9keSIsIl9pbml0Qm9keSIsIl9ib2R5SW5pdCIsIl9ib2R5VGV4dCIsIkJsb2IiLCJpc1Byb3RvdHlwZU9mIiwiX2JvZHlCbG9iIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsIl9ib2R5Rm9ybURhdGEiLCJzZWFyY2hQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJhcnJheUJ1ZmZlciIsIkFycmF5QnVmZmVyIiwicmVqZWN0ZWQiLCJkZWNvZGUiLCJub3JtYWxpemVNZXRob2QiLCJ1cGNhc2VkIiwiUmVxdWVzdCIsInVybCIsImNyZWRlbnRpYWxzIiwicmVmZXJyZXIiLCJmb3JtIiwiYnl0ZXMiLCJkZWNvZGVVUklDb21wb25lbnQiLCJ4aHIiLCJwYWlycyIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsImhlYWRlciIsIlJlc3BvbnNlIiwiYm9keUluaXQiLCJzdGF0dXMiLCJvayIsInN0YXR1c1RleHQiLCJ2YWx1ZXMiLCJnZXRBbGwiLCJ0aGlzQXJnIiwiY2xvbmUiLCJyZWRpcmVjdFN0YXR1c2VzIiwicmVkaXJlY3QiLCJSYW5nZUVycm9yIiwibG9jYXRpb24iLCJyZXNwb25zZVVSTCIsImdldFJlc3BvbnNlSGVhZGVyIiwicmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0IiwicmVzcG9uc2VUZXh0Iiwib250aW1lb3V0Iiwid2l0aENyZWRlbnRpYWxzIiwicmVzcG9uc2VUeXBlIiwic2V0UmVxdWVzdEhlYWRlciIsInNlbmQiLCJEYXRhVmlldyIsIkhhc2giLCJoYXNoQ2xlYXIiLCJoYXNoRGVsZXRlIiwiaGFzaEdldCIsImhhc2hIYXMiLCJoYXNoU2V0Iiwic2V0Q2FjaGVBZGQiLCJzZXRDYWNoZUhhcyIsIlVpbnQ4QXJyYXkiLCJXZWFrTWFwIiwicHJlZGljYXRlIiwiRlVOQ19FUlJPUl9URVhUIiwiYmFzZUZpbmRJbmRleCIsImZyb21JbmRleCIsImZyb21SaWdodCIsImJhc2VIYXNJbiIsIm9iaklzQXJyIiwib3RoSXNBcnIiLCJvYmpUYWciLCJhcnJheVRhZyIsIm90aFRhZyIsImdldFRhZyIsIm9iamVjdFRhZyIsIm9iaklzT2JqIiwib3RoSXNPYmoiLCJpc1NhbWVUYWciLCJpc1R5cGVkQXJyYXkiLCJlcXVhbEJ5VGFnIiwib2JqSXNXcmFwcGVkIiwib3RoSXNXcmFwcGVkIiwib2JqVW53cmFwcGVkIiwib3RoVW53cmFwcGVkIiwiZXF1YWxPYmplY3RzIiwiYmFzZUlzTWF0Y2giLCJtYXRjaERhdGEiLCJub0N1c3RvbWl6ZXIiLCJvYmpWYWx1ZSIsImlzTWFza2VkIiwicGF0dGVybiIsInJlSXNOYXRpdmUiLCJyZUlzSG9zdEN0b3IiLCJyZVJlZ0V4cENoYXIiLCJiYXNlSXRlcmF0ZWUiLCJpZGVudGl0eSIsImJhc2VNYXRjaGVzUHJvcGVydHkiLCJiYXNlTWF0Y2hlcyIsIm5hdGl2ZUtleXMiLCJnZXRNYXRjaERhdGEiLCJoYXNJbiIsImJhc2VQcm9wZXJ0eURlZXAiLCJiYXNlVGltZXMiLCJpdGVyYXRlZSIsImJhc2VUb1N0cmluZyIsInN5bWJvbFRvU3RyaW5nIiwic3ltYm9sUHJvdG8iLCJjb3JlSnNEYXRhIiwiZGF0YVZpZXdUYWciLCJieXRlTGVuZ3RoIiwiYnl0ZU9mZnNldCIsImJ1ZmZlciIsImFycmF5QnVmZmVyVGFnIiwiYm9vbFRhZyIsImRhdGVUYWciLCJlcnJvclRhZyIsIm1lc3NhZ2UiLCJudW1iZXJUYWciLCJyZWdleHBUYWciLCJtYXBUYWciLCJtYXBUb0FycmF5Iiwic2V0VGFnIiwic2V0VG9BcnJheSIsInN5bWJvbFZhbHVlT2YiLCJvYmpQcm9wcyIsIm9iakxlbmd0aCIsIm90aFByb3BzIiwic2tpcEN0b3IiLCJvYmpDdG9yIiwib3RoQ3RvciIsIm5hdGl2ZUdldFByb3RvdHlwZSIsImdldFByb3RvdHlwZU9mIiwicHJvbWlzZVRhZyIsIndlYWtNYXBUYWciLCJkYXRhVmlld0N0b3JTdHJpbmciLCJtYXBDdG9yU3RyaW5nIiwicHJvbWlzZUN0b3JTdHJpbmciLCJzZXRDdG9yU3RyaW5nIiwid2Vha01hcEN0b3JTdHJpbmciLCJDdG9yIiwiY3RvclN0cmluZyIsImhhc1BhdGgiLCJoYXNGdW5jIiwiSEFTSF9VTkRFRklORUQiLCJtYXNrU3JjS2V5IiwiSUVfUFJPVE8iLCJwcm90byIsInBvcCIsInN0cmluZyIsIkxBUkdFX0FSUkFZX1NJWkUiLCJyZVByb3BOYW1lIiwicmVFc2NhcGVDaGFyIiwicXVvdGUiLCJpbnZva2VGdW5jIiwidGltZSIsImxhc3RBcmdzIiwibGFzdFRoaXMiLCJsYXN0SW52b2tlVGltZSIsImxlYWRpbmdFZGdlIiwidGltZXJJZCIsInRpbWVyRXhwaXJlZCIsImxlYWRpbmciLCJyZW1haW5pbmdXYWl0IiwidGltZVNpbmNlTGFzdENhbGwiLCJsYXN0Q2FsbFRpbWUiLCJ0aW1lU2luY2VMYXN0SW52b2tlIiwibWF4aW5nIiwibmF0aXZlTWluIiwibWF4V2FpdCIsInNob3VsZEludm9rZSIsInRyYWlsaW5nRWRnZSIsInRyYWlsaW5nIiwiZGVib3VuY2VkIiwiaXNJbnZva2luZyIsIm5hdGl2ZU1heCIsIm1heCIsIm1pbiIsImRlZmF1bHRWYWx1ZSIsInR5cGVkQXJyYXlUYWdzIiwiZmxvYXQzMlRhZyIsImZsb2F0NjRUYWciLCJpbnQ4VGFnIiwiaW50MTZUYWciLCJpbnQzMlRhZyIsInVpbnQ4VGFnIiwidWludDhDbGFtcGVkVGFnIiwidWludDE2VGFnIiwidWludDMyVGFnIiwibWVtb2l6ZWQiLCJvdGhlckFyZ3MiLCJNQVhfSU5URUdFUiIsIl9zZWxmIiwiV29ya2VyR2xvYmFsU2NvcGUiLCJQcmlzbSIsInVuaXF1ZUlkIiwiZW5jb2RlIiwiVG9rZW4iLCJvIiwib2JqSWQiLCJ2IiwibGFuZ3VhZ2VzIiwicmVkZWYiLCJpbnNpZGUiLCJncmFtbWFyIiwibmV3VG9rZW4iLCJERlMiLCJ2aXNpdGVkIiwicGx1Z2lucyIsImVsZW1lbnQiLCJlbGVtZW50cyIsImhpZ2hsaWdodEVsZW1lbnQiLCJsYW5ndWFnZSIsIm5vZGVOYW1lIiwiV29ya2VyIiwid29ya2VyIiwiZmlsZW5hbWUiLCJoaWdobGlnaHRlZENvZGUiLCJpbW1lZGlhdGVDbG9zZSIsImhpZ2hsaWdodCIsInRva2VuaXplIiwic3RyYXJyIiwidG9rZW5sb29wIiwicGF0dGVybnMiLCJsb29rYmVoaW5kIiwiZ3JlZWR5IiwibG9va2JlaGluZExlbmd0aCIsImRlbE51bSIsIm5leHRUb2tlbiIsIm1hdGNoZWRTdHIiLCJjb21iU3RyIiwid3JhcHBlZCIsImNsYXNzZXMiLCJhbGlhc2VzIiwiY3VycmVudFNjcmlwdCIsInJlYWR5U3RhdGUiLCJtYXJrdXAiLCJjb21tZW50IiwicHJvbG9nIiwiZG9jdHlwZSIsImNkYXRhIiwicHVuY3R1YXRpb24iLCJuYW1lc3BhY2UiLCJhdHRyLXZhbHVlIiwiYXR0ci1uYW1lIiwiZW50aXR5IiwieG1sIiwibWF0aG1sIiwic3ZnIiwiYXRydWxlIiwicnVsZSIsImltcG9ydGFudCIsImZ1bmN0aW9uIiwic3R5bGUtYXR0ciIsImNsaWtlIiwiY2xhc3MtbmFtZSIsImtleXdvcmQiLCJib29sZWFuIiwib3BlcmF0b3IiLCJqYXZhc2NyaXB0IiwicmVnZXgiLCJ0ZW1wbGF0ZS1zdHJpbmciLCJpbnRlcnBvbGF0aW9uIiwiaW50ZXJwb2xhdGlvbi1wdW5jdHVhdGlvbiIsImpzIiwiZmlsZUhpZ2hsaWdodCIsIkV4dGVuc2lvbnMiLCJweSIsInJiIiwicHMxIiwicHNtMSIsInNoIiwiYmF0IiwiaCIsInRleCIsInByZSIsImV4dGVuc2lvbiIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsIlRhcmdldCIsIm1hdGNoZXIiLCJkZWxlZ2F0ZSIsIk1hdGNoZXIiLCJyb3V0ZXMiLCJnZW5lcmF0ZU1hdGNoIiwic3RhcnRpbmdQYXRoIiwibmVzdGVkQ2FsbGJhY2siLCJmdWxsUGF0aCIsImFkZFJvdXRlIiwicm91dGVBcnJheSIsInN1YnN0ciIsInJvdXRlIiwiZWFjaFJvdXRlIiwiYmFzZVJvdXRlIiwiYWRkUm91dGVDYWxsYmFjayIsIm5vV2FybmluZyIsInRyeURlY29kZSIsInVyaSIsImFzQ29tcG9uZW50IiwiZGVjb2RlVVJJIiwiU3RhdGljU2VnbWVudCIsIkR5bmFtaWNTZWdtZW50IiwiU3RhclNlZ21lbnQiLCJFcHNpbG9uU2VnbWVudCIsInNwZWNpZmljaXR5Iiwic2VnbWVudHMiLCJyZXN1bHRzIiwic2VnbWVudCIsIlN0YXRlIiwiY2hhclNwZWMiLCJuZXh0U3RhdGVzIiwic29ydFNvbHV0aW9ucyIsInN0YXRlcyIsInJlY29nbml6ZUNoYXIiLCJSZWNvZ25pemVSZXN1bHRzIiwicXVlcnlQYXJhbXMiLCJmaW5kSGFuZGxlciIsImNhcHR1cmVzIiwiY3VycmVudENhcHR1cmUiLCJpc0R5bmFtaWMiLCJhZGRTZWdtZW50IiwiY3VycmVudFN0YXRlIiwiZWFjaENoYXIiLCJkZWNvZGVRdWVyeVBhcmFtUGFydCIsIndhcm4kMSIsInJlc29sdmVQYXRoIiwiYmFzZSIsInJlbGF0aXZlIiwiaXNQcm9taXNlIiwiZ2V0Um91dGVDb25maWciLCJyZXNvbHZlQXN5bmNDb21wb25lbnQiLCJleHBvcnRzJDEiLCJtYXBQYXJhbXMiLCJnZW5RdWVyeSIsImNhblJldXNlIiwidmlldyIsImNhblJldXNlRm4iLCJjYW5EZWFjdGl2YXRlIiwiZnJvbUNvbXBvbmVudCIsImV4cGVjdEJvb2xlYW4iLCJjYW5BY3RpdmF0ZSIsImFib3J0ZWQiLCJkZWFjdGl2YXRlIiwiY2FsbEhvb2tzIiwicmV1c2UiLCJhY3RpdmF0ZVF1ZXVlIiwic2F2ZUNoaWxkVmlldyIsImFjdGl2YXRlSG9vayIsImRhdGFIb29rIiwid2FpdEZvckRhdGEiLCJhY3RpdmF0ZWQiLCJsb2FkaW5nIiwiJGxvYWRpbmdSb3V0ZURhdGEiLCJfcm91dGVyVmlldyIsImNhY2hlZENoaWxkVmlldyIsIl9rZWVwQWxpdmVSb3V0ZXJWaWV3IiwiY2hpbGRWaWV3IiwiX3JlbmRlcmVkIiwiX3RyYW5zaXRpb25PbkxvYWQiLCJzZXRDdXJyZW50IiwiYWZ0ZXJEYXRhIiwiYWZ0ZXJBY3RpdmF0ZSIsImxvYWREYXRhIiwicG9zdEFjdGl2YXRlIiwicHJvY2Vzc0RhdGEiLCJwcm9taXNlcyIsInJlc29sdmVkVmFsIiwiaXNQbGFpbk9qYmVjdCIsImFwcGx5T3ZlcnJpZGUiLCJfVnVlJHV0aWwiLCJfcGFyZW50IiwiJHJvdXRlciIsIiRyb3V0ZSIsIl9jaGlsZHJlbiIsIl9kZWZpbmVNZXRhIiwiaG9va3NUb01lcmdlUkUiLCJWaWV3IiwiY29tcG9uZW50RGVmIiwidmlld0RlZiIsIl9pc0R5bmFtaWNMaXRlcmFsIiwicGFyZW50VmlldyIsIl9yb290VmlldyIsIl9jdXJyZW50VHJhbnNpdGlvbiIsImVsZW1lbnREaXJlY3RpdmUiLCJMaW5rIiwic2FtZU9yaWdpbiIsInByb3RvY29sIiwiaG9zdG5hbWUiLCJwb3J0IiwidG9nZ2xlQ2xhc3NlcyIsIm9uUHJpb3JpdHkiLCJMSU5LX1VQREFURSIsImFjdGl2ZUlkIiwiY2hpbGRMaW5rcyIsImV4aXN0aW5nSWQiLCJhY3RpdmVJZHMiLCJ1cGRhdGVDbGFzc2VzIiwib25Sb3V0ZVVwZGF0ZSIsIm9uQ2xpY2siLCJleGFjdCIsInByZXZBY3RpdmVDbGFzcyIsImFjdGl2ZUNsYXNzIiwibWV0YUtleSIsImN0cmxLZXkiLCJzaGlmdEtleSIsImRlZmF1bHRQcmV2ZW50ZWQiLCJidXR0b24iLCJnbyIsInBhdGhuYW1lIiwiaGlzdG9yeSIsInJvb3RSRSIsIm5ld1BhdGgiLCJzdHJpbmdpZnlQYXRoIiwidXBkYXRlQWN0aXZlTWF0Y2giLCJ1cGRhdGVIcmVmIiwiYWN0aXZlUkUiLCJxdWVyeVN0cmluZ1JFIiwiaXNBYnNvbHV0ZSIsImhyZWYiLCJmb3JtYXRQYXRoIiwiX2xpbmtBY3RpdmVDbGFzcyIsImRlc3QiLCJ0cmFpbGluZ1NsYXNoUkUiLCJndWFyZENvbXBvbmVudCIsImNvbXAiLCJiYWJlbEhlbHBlcnMiLCJjbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwid2lsbEFkZFJvdXRlIiwiYWRkQ2hpbGQiLCJjb250ZXh0RW50ZXJlZCIsInNwZWNpYWxzIiwidmFsaWRDaGFycyIsImdlbmVyYXRlIiwiaW52YWxpZENoYXJzIiwicmVwZWF0IiwiaXNFcXVhbCIsImNoYXJzIiwicmV0dXJuZWQiLCJvQ3JlYXRlIiwiRiIsIlJvdXRlUmVjb2duaXplciIsInJvb3RTdGF0ZSIsImFsbFNlZ21lbnRzIiwiaXNFbXB0eSIsImFzIiwiaGFuZGxlcnNGb3IiLCJoYXNSb3V0ZSIsIm91dHB1dCIsImdlbmVyYXRlUXVlcnlTdHJpbmciLCJwYWlyIiwiYXJyYXlQYWlyIiwicGFyc2VRdWVyeVN0cmluZyIsInF1ZXJ5U3RyaW5nIiwia2V5TGVuZ3RoIiwicmVjb2duaXplIiwicGF0aExlbiIsInF1ZXJ5U3RhcnQiLCJpc1NsYXNoRHJvcHBlZCIsInNvbHV0aW9ucyIsImhhc2hSRSIsIkhUTUw1SGlzdG9yeSIsIm9uQ2hhbmdlIiwiYmFzZUVsIiwicmVwbGFjZVN0YXRlIiwicG9zIiwicGFnZVhPZmZzZXQiLCJ5IiwicGFnZVlPZmZzZXQiLCJwdXNoU3RhdGUiLCJoYXNoTWF0Y2giLCJIYXNoSGlzdG9yeSIsImhhc2hiYW5nIiwiZm9ybWF0dGVkUGF0aCIsImlzQWJzb2xvdXRlIiwiQWJzdHJhY3RIaXN0b3J5IiwiY3VycmVudFBhdGgiLCJSb3V0ZVRyYW5zaXRpb24iLCJhYm9ydCIsImFib3J0aW5nT25Mb2FkIiwiZGVhY3RpdmF0ZVF1ZXVlIiwicmV2ZXJzZURlYWN0aXZhdGVRdWV1ZSIsInJldmVyc2UiLCJyZXVzZVF1ZXVlIiwicnVuUXVldWUiLCJfb25UcmFuc2l0aW9uVmFsaWRhdGVkIiwiX3ZpZXciLCJfcmVmJGV4cGVjdEJvb2xlYW4iLCJfcmVmJHBvc3RBY3RpdmF0ZSIsIm5leHRDYWxsZWQiLCJvbkVycm9yIiwiZXJyIiwiX3N1cHByZXNzIiwib25Qcm9taXNlRXJyb3IiLCJuZXh0V2l0aEJvb2xlYW4iLCJuZXh0V2l0aERhdGEiLCJleHBvc2VkIiwiaW50ZXJuYWxLZXlzUkUiLCJSb3V0ZSIsIl9yZWNvZ25pemVyIiwiX25vdEZvdW5kSGFuZGxlciIsImhpc3RvcnlCYWNrZW5kcyIsImFic3RyYWN0IiwiaHRtbDUiLCJSb3V0ZXIiLCJfcmVmJGhhc2hiYW5nIiwiX3JlZiRhYnN0cmFjdCIsIl9yZWYkaGlzdG9yeSIsIl9yZWYkc2F2ZVNjcm9sbFBvc2l0aW9uIiwic2F2ZVNjcm9sbFBvc2l0aW9uIiwiX3JlZiR0cmFuc2l0aW9uT25Mb2FkIiwidHJhbnNpdGlvbk9uTG9hZCIsIl9yZWYkc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3IiLCJzdXBwcmVzc1RyYW5zaXRpb25FcnJvciIsIl9yZWYkcm9vdCIsIl9yZWYkbGlua0FjdGl2ZUNsYXNzIiwibGlua0FjdGl2ZUNsYXNzIiwiYXBwIiwiX2d1YXJkUmVjb2duaXplciIsIl9zdGFydGVkIiwiX3N0YXJ0Q2IiLCJfY3VycmVudFJvdXRlIiwiX3ByZXZpb3VzVHJhbnNpdGlvbiIsIl9ub3RGb3VuZFJlZGlyZWN0IiwiX2JlZm9yZUVhY2hIb29rcyIsIl9hZnRlckVhY2hIb29rcyIsIl9yb290IiwiX2Fic3RyYWN0IiwiX2hhc2hiYW5nIiwiaGFzUHVzaFN0YXRlIiwiX2hpc3RvcnkiLCJfaGlzdG9yeUZhbGxiYWNrIiwiSGlzdG9yeSIsIl9tYXRjaCIsIl9zYXZlU2Nyb2xsUG9zaXRpb24iLCJfbWFwIiwicm9vdFBhdGgiLCJfbm90Rm91bmQiLCJfYWRkUm91dGUiLCJfYWRkUmVkaXJlY3QiLCJfYWRkQWxpYXMiLCJiZWZvcmVFYWNoIiwiX2FwcENvbnRhaW5lciIsIl9hcHBDb25zdHJ1Y3RvciIsIl9sb2NhdGlvbiIsImdlbmVyYXRlZFBhdGgiLCJjdXJyZW50UGFyYW1zIiwidGFyZ2V0UGFyYW1zIiwiZW5jb2RlVVJJIiwic3ViUm91dGVzIiwic3ViUGF0aCIsInJlZGlyZWN0UGF0aCIsIl9hZGRHdWFyZCIsImFsaWFzUGF0aCIsIm1hcHBlZFBhdGgiLCJfaGFuZGxlciIsInJlYWxQYXRoIiwiX2NoZWNrR3VhcmQiLCJfdGhpczMiLCJjdXJyZW50Um91dGUiLCJjdXJyZW50VHJhbnNpdGlvbiIsIl9wcmV2VHJhbnNpdGlvbiIsImJlZm9yZUhvb2tzIiwic3RhcnRUcmFuc2l0aW9uIiwiX3Bvc3RUcmFuc2l0aW9uIiwic2Nyb2xsVG8iLCJzY3JvbGxYIiwib2Zmc2V0VG9wIiwiZXh0ZXJuYWxWdWUiLCJsb2NhbHMiLCJ3ZWJwYWNrUG9seWZpbGwiLCJkZXByZWNhdGUiLCJwYXRocyJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NrQ25CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FFLFdBQ0FFLEdBQUFKLEVBQ0FLLFFBQUEsRUFVQSxPQU5BUCxHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxRQUFBLEVBR0FGLEVBQUFELFFBckRBLEdBQUFLLEdBQUFDLE9BQUEsWUFDQUEsUUFBQSxzQkFBQUMsRUFBQUMsR0FJQSxJQURBLEdBQUFWLEdBQUFXLEVBQUFDLEVBQUEsRUFBQUMsS0FDUUQsRUFBQUgsRUFBQUssT0FBb0JGLElBQzVCRCxFQUFBRixFQUFBRyxHQUNBRyxFQUFBSixJQUNBRSxFQUFBRyxLQUFBQyxNQUFBSixFQUFBRSxFQUFBSixJQUNBSSxFQUFBSixHQUFBLENBRUEsS0FBQVgsSUFBQVUsR0FDQVosRUFBQUUsR0FBQVUsRUFBQVYsRUFHQSxLQURBTyxLQUFBRSxFQUFBQyxHQUNBRyxFQUFBQyxRQUNBRCxFQUFBSyxRQUFBWixLQUFBLEtBQUFQLEdBS0EsSUFBQUUsTUFLQWMsR0FDQUksRUFBQSxFQUNBQyxFQUFBLEVBQ0FDLEVBQUEsRUE2REEsT0FoQ0F0QixHQUFBdUIsRUFBQSxTQUFBWCxFQUFBWSxHQUVBLE9BQUFSLEVBQUFKLEdBQ0EsTUFBQVksR0FBQWpCLEtBQUEsS0FBQVAsRUFHQSxJQUFBeUIsU0FBQVQsRUFBQUosR0FDQUksRUFBQUosR0FBQUssS0FBQU8sT0FDSSxDQUVKUixF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N2pZWCxHbkQ4allXQyxlQUFnQixTQUF3QnIrQixHQUN0Q3ZQLEVBQU11dEMsdUJtRDdqWW5CLEtuRGdrWVc5dUMsTW1ENWpZWCxTbkQ2allXa3ZDLEttRDVqWVgsR25ENmpZV0MsZUFBZ0IsU0FBd0JyK0IsR0FDdEN2UCxFQUFNdXRDLHVCbUQ1alluQixLbkQrallXOXVDLE1tRDNqWVgsU25ENGpZV2t2QyxLbUQzallYLEduRDRqWVdDLGVBQWdCLFNBQXdCcitCLEdBQ3RDdlAsRUFBTXV0Qyx1Qm1EM2pZbkIsTW5EK2pZT0gsV0FDRTd0QyxLbUQxallULGNuRDJqWVNuTixLbUQxallULFVuRDJqWVNpN0MsWW1EMWpZVCxFbkQyallTdDZDLFVtRDFqWVQsRW5EMmpZU3U2QyxLbUQxallULFNuRDRqWVMvdEMsS21EMWpZVCxTbkQyallTbk4sS21EMWpZVCxTbkQyallTaTdDLFltRDFqWVQsRW5EMmpZU3Q2QyxVbUQxallULE1uRDJqWVN1NkMsS21EMWpZVCxTbkQ0allTL3RDLEttRDFqWVQsZW5EMmpZU25OLEttRDFqWVQsU25EMmpZU2k3QyxZbUQxallULEVuRDJqWVN0NkMsVW1EMWpZVCxNbkQyallTdTZDLEttRDFqWVQsMEJuRDRqWVMvdEMsS21EMWpZVCxjbkQyallTbk4sS21EMWpZVCxTbkQyallTaTdDLFltRDFqWVQsRW5EMmpZU3Q2QyxVbUQxallULE1uRDJqWVN1NkMsS21EMWpZVCwyQm5ENGpZUy90QyxLbUQxallULHdCbkQyallTbk4sS21EMWpZVCxXbkQyallTaTdDLFltRDFqWVQsRW5EMmpZU3Q2QyxVbUQxallULE1uRDJqWVN1NkMsS21EeGpZVCxvRG5EeW9ZTSxTQUFTNzhDLEVBQVFELEVBQVNILEdBRS9CLFlBVUEsU0FBU3VDLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFVBQVNGLEdBUnZGc0osT0FBT3lELGVBQWVwUCxFQUFTLGNBQzdCNEosT0FBTyxHb0QxdFlWLElBQUEyeUMsR0FBQTE4QyxFQUFBLEdwRCt0WUsyOEMsRUFBYXA2QyxFQUF1Qm02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LEdBQUEwQyxFQUFBLElBQ0EsT0FBQTFDLEtBQUE4RyxLQUFBOUcsR0FBQThHLEVBQUFwTixFQUFBLEdBRUEsTUFBQW9OLEdBQUEsUUFBQXBFLEVBQUEsU0FZQStoQyxTQUFBLFNBQUF4WixFQUFBbXFCLEdBQ0EsR0FBQW5xQixFQUlBLE1BSEFtcUIsS0FDQUEsRUFBQSxLQUVBcGtDLEVBQUFpYSxFQUFBbXFCLElBd0xBOVYsSUFBQTlpQixJQUVBQSxHQUFBclYsUUFBQSxTQUlBeEssV0FBQSxXQUNBWCxHQUFBZ3BCLFdBQ0FBLEdBQ0FBLEdBQUFyZCxLQUFBLE9BQUE2VSxJQUNLLGVBQUE3VixFQUFBTSxJQUFBd1AsVUFBQWlxQixJQUFBLGNBQUF2L0IsS0FBQS9ILE9BQUFnSSxVQUFBQyxZQUNMazdCLFFBQUFDLElBQUEsMkdBR0MsR0FFRHpqQyxFQUFBRCxRQUFBMGpCLEt2TXcycUI4QnRqQixLQUFLSixFQUFVLFdBQWEsTUFBT21FLFNBQVl0RSxFQUFvQixNQUkzRixTQUFTSSxFQUFRRCxHd01ycytCdkJDLEVBQUFELFFBQUEsV0FBNkIsU0FBQWdHLE9BQUEsb0N4TTRzK0J2QixTQUFTL0YsRUFBUUQsR3lNNXMrQnZCQyxFQUFBRCxRQUFBLFNBQUFDLEdBUUEsTUFQQUEsR0FBQXN5RSxrQkFDQXR5RSxFQUFBdXlFLFVBQUEsYUFDQXZ5RSxFQUFBd3lFLFNBRUF4eUUsRUFBQTRuQixZQUNBNW5CLEVBQUFzeUUsZ0JBQUEsR0FFQXR5RSxJek1vdCtCTSxTQUFTQSxFQUFRRCIsImZpbGUiOiJ2dWUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xuLyoqKioqKi8gXHR2YXIgcGFyZW50SnNvbnBGdW5jdGlvbiA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXTtcbi8qKioqKiovIFx0d2luZG93W1wid2VicGFja0pzb25wXCJdID0gZnVuY3Rpb24gd2VicGFja0pzb25wQ2FsbGJhY2soY2h1bmtJZHMsIG1vcmVNb2R1bGVzKSB7XG4vKioqKioqLyBcdFx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG4vKioqKioqLyBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMCwgY2FsbGJhY2tzID0gW107XG4vKioqKioqLyBcdFx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcbi8qKioqKiovIFx0XHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcbi8qKioqKiovIFx0XHRcdGlmKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSlcbi8qKioqKiovIFx0XHRcdFx0Y2FsbGJhY2tzLnB1c2guYXBwbHkoY2FsbGJhY2tzLCBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pO1xuLyoqKioqKi8gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG4vKioqKioqLyBcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihjaHVua0lkcywgbW9yZU1vZHVsZXMpO1xuLyoqKioqKi8gXHRcdHdoaWxlKGNhbGxiYWNrcy5sZW5ndGgpXG4vKioqKioqLyBcdFx0XHRjYWxsYmFja3Muc2hpZnQoKS5jYWxsKG51bGwsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vKioqKioqLyBcdC8vIFwiMFwiIG1lYW5zIFwiYWxyZWFkeSBsb2FkZWRcIlxuLyoqKioqKi8gXHQvLyBBcnJheSBtZWFucyBcImxvYWRpbmdcIiwgYXJyYXkgY29udGFpbnMgY2FsbGJhY2tzXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG4vKioqKioqLyBcdFx0MDowLFxuLyoqKioqKi8gXHRcdDE6MCxcbi8qKioqKiovIFx0XHQyOjBcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhpcyBmaWxlIGNvbnRhaW5zIG9ubHkgdGhlIGVudHJ5IGNodW5rLlxuLyoqKioqKi8gXHQvLyBUaGUgY2h1bmsgbG9hZGluZyBmdW5jdGlvbiBmb3IgYWRkaXRpb25hbCBjaHVua3Ncbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5lID0gZnVuY3Rpb24gcmVxdWlyZUVuc3VyZShjaHVua0lkLCBjYWxsYmFjaykge1xuLyoqKioqKi8gXHRcdC8vIFwiMFwiIGlzIHRoZSBzaWduYWwgZm9yIFwiYWxyZWFkeSBsb2FkZWRcIlxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMClcbi8qKioqKiovIFx0XHRcdHJldHVybiBjYWxsYmFjay5jYWxsKG51bGwsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBhbiBhcnJheSBtZWFucyBcImN1cnJlbnRseSBsb2FkaW5nXCIuXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdICE9PSB1bmRlZmluZWQpIHtcbi8qKioqKiovIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXS5wdXNoKGNhbGxiYWNrKTtcbi8qKioqKiovIFx0XHR9IGVsc2Uge1xuLyoqKioqKi8gXHRcdFx0Ly8gc3RhcnQgY2h1bmsgbG9hZGluZ1xuLyoqKioqKi8gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gW2NhbGxiYWNrXTtcbi8qKioqKiovIFx0XHRcdHZhciBoZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbi8qKioqKiovIFx0XHRcdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbi8qKioqKiovIFx0XHRcdHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4vKioqKioqLyBcdFx0XHRzY3JpcHQuY2hhcnNldCA9ICd1dGYtOCc7XG4vKioqKioqLyBcdFx0XHRzY3JpcHQuYXN5bmMgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHRcdHNjcmlwdC5zcmMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcIlwiICsgY2h1bmtJZCArIFwiLmFwcC5qc1wiO1xuLyoqKioqKi8gXHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvZGV2L2FwcC9cIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfVnVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Myk7XG5cdFxuXHR2YXIgX1Z1ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9WdWUpO1xuXHRcblx0dmFyIF92dWVSb3V0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Nyk7XG5cdFxuXHR2YXIgX3Z1ZVJvdXRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92dWVSb3V0ZXIpO1xuXHRcblx0dmFyIF9yb3V0ZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKTtcblx0XG5cdHZhciBfcm91dGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JvdXRlcyk7XG5cdFxuXHR2YXIgX2h5YnJpZFRob3JpdW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKTtcblx0XG5cdHZhciBfaHlicmlkVGhvcml1bTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oeWJyaWRUaG9yaXVtKTtcblx0XG5cdHZhciBfcHJpc21qcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUzKTtcblx0XG5cdHZhciBfcHJpc21qczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcmlzbWpzKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRfVnVlMi5kZWZhdWx0LmNvbmZpZy5kZWJ1ZyA9IHRydWU7XG5cdFxuXHRfVnVlMi5kZWZhdWx0LnVzZShfdnVlUm91dGVyMi5kZWZhdWx0KTtcblx0X1Z1ZTIuZGVmYXVsdC51c2UoX2h5YnJpZFRob3JpdW0yLmRlZmF1bHQpO1xuXHRcblx0dmFyIHJvdXRlciA9IG5ldyBfdnVlUm91dGVyMi5kZWZhdWx0KCk7XG5cdHZhciBBcHAgPSBfVnVlMi5kZWZhdWx0LmV4dGVuZCh7XG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGxpZ2VyRW5kUG9pbnQ6ICdodHRwczovL2FwaS5jbXMudGVsdXMuY29tL2xlZ2FscycsXG5cdCAgICAgIGxpZ2VyQXBwbGljYXRpb25LZXk6ICdiOTczOGQ2N2I4OWRmYzc4Mjc0NmQ0YTljZjRhMTA5Mydcblx0ICAgIH07XG5cdCAgfVxuXHR9KTtcblx0cm91dGVyLm1hcChfcm91dGVzMi5kZWZhdWx0KTtcblx0cm91dGVyLmFmdGVyRWFjaChmdW5jdGlvbiAoKSB7XG5cdCAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICBfcHJpc21qczIuZGVmYXVsdC5oaWdobGlnaHRBbGwoKTtcblx0ICB9LCAwKTtcblx0fSk7XG5cdHJvdXRlci5zdGFydChBcHAsICcjYXBwLW1haW4nKTtcblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qXHJcblx0XHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdFx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxyXG5cdCovXHJcblx0Ly8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcclxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGxpc3QgPSBbXTtcclxuXHRcclxuXHRcdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcclxuXHRcdGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcclxuXHRcdFx0dmFyIHJlc3VsdCA9IFtdO1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBpdGVtID0gdGhpc1tpXTtcclxuXHRcdFx0XHRpZihpdGVtWzJdKSB7XHJcblx0XHRcdFx0XHRyZXN1bHQucHVzaChcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGl0ZW1bMV0gKyBcIn1cIik7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKGl0ZW1bMV0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gcmVzdWx0LmpvaW4oXCJcIik7XHJcblx0XHR9O1xyXG5cdFxyXG5cdFx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcclxuXHRcdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXHJcblx0XHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xyXG5cdFx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XHJcblx0XHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxyXG5cdFx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XHJcblx0XHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxyXG5cdFx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXHJcblx0XHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cclxuXHRcdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxyXG5cdFx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XHJcblx0XHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XHJcblx0XHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdHJldHVybiBsaXN0O1xyXG5cdH07XHJcblxuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0XHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRcdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcblx0Ki9cblx0dmFyIHN0eWxlc0luRG9tID0ge30sXG5cdFx0bWVtb2l6ZSA9IGZ1bmN0aW9uKGZuKSB7XG5cdFx0XHR2YXIgbWVtbztcblx0XHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgbWVtbyA9PT0gXCJ1bmRlZmluZWRcIikgbWVtbyA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHRcdHJldHVybiBtZW1vO1xuXHRcdFx0fTtcblx0XHR9LFxuXHRcdGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIC9tc2llIFs2LTldXFxiLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xuXHRcdH0pLFxuXHRcdGdldEhlYWRFbGVtZW50ID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XG5cdFx0fSksXG5cdFx0c2luZ2xldG9uRWxlbWVudCA9IG51bGwsXG5cdFx0c2luZ2xldG9uQ291bnRlciA9IDAsXG5cdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AgPSBbXTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykge1xuXHRcdGlmKGZhbHNlKSB7XG5cdFx0XHRpZih0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcblx0XHR9XG5cdFxuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcdC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuXHRcdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2Vcblx0XHRpZiAodHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcblx0XG5cdFx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgYm90dG9tIG9mIDxoZWFkPi5cblx0XHRpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xuXHRcblx0XHR2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QpO1xuXHRcdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XG5cdFxuXHRcdHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuXHRcdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xuXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cdFx0XHRcdGRvbVN0eWxlLnJlZnMtLTtcblx0XHRcdFx0bWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuXHRcdFx0fVxuXHRcdFx0aWYobmV3TGlzdCkge1xuXHRcdFx0XHR2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QpO1xuXHRcdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuXHRcdFx0fVxuXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XG5cdFx0XHRcdGlmKGRvbVN0eWxlLnJlZnMgPT09IDApIHtcblx0XHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspXG5cdFx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXSgpO1xuXHRcdFx0XHRcdGRlbGV0ZSBzdHlsZXNJbkRvbVtkb21TdHlsZS5pZF07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpIHtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXHRcdFx0aWYoZG9tU3R5bGUpIHtcblx0XHRcdFx0ZG9tU3R5bGUucmVmcysrO1xuXHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRmb3IoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2YXIgcGFydHMgPSBbXTtcblx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzfTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxpc3RUb1N0eWxlcyhsaXN0KSB7XG5cdFx0dmFyIHN0eWxlcyA9IFtdO1xuXHRcdHZhciBuZXdTdHlsZXMgPSB7fTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xuXHRcdFx0dmFyIGlkID0gaXRlbVswXTtcblx0XHRcdHZhciBjc3MgPSBpdGVtWzFdO1xuXHRcdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcblx0XHRcdHZhciBzb3VyY2VNYXAgPSBpdGVtWzNdO1xuXHRcdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xuXHRcdFx0aWYoIW5ld1N0eWxlc1tpZF0pXG5cdFx0XHRcdHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7aWQ6IGlkLCBwYXJ0czogW3BhcnRdfSk7XG5cdFx0XHRlbHNlXG5cdFx0XHRcdG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcblx0XHR9XG5cdFx0cmV0dXJuIHN0eWxlcztcblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlRWxlbWVudCkge1xuXHRcdHZhciBoZWFkID0gZ2V0SGVhZEVsZW1lbnQoKTtcblx0XHR2YXIgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AgPSBzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcFtzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5sZW5ndGggLSAxXTtcblx0XHRpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xuXHRcdFx0aWYoIWxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wKSB7XG5cdFx0XHRcdGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlRWxlbWVudCwgaGVhZC5maXJzdENoaWxkKTtcblx0XHRcdH0gZWxzZSBpZihsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xuXHRcdFx0XHRoZWFkLmluc2VydEJlZm9yZShzdHlsZUVsZW1lbnQsIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0XHRcdH1cblx0XHRcdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLnB1c2goc3R5bGVFbGVtZW50KTtcblx0XHR9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwiYm90dG9tXCIpIHtcblx0XHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcuIE11c3QgYmUgJ3RvcCcgb3IgJ2JvdHRvbScuXCIpO1xuXHRcdH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCkge1xuXHRcdHN0eWxlRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudCk7XG5cdFx0dmFyIGlkeCA9IHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLmluZGV4T2Yoc3R5bGVFbGVtZW50KTtcblx0XHRpZihpZHggPj0gMCkge1xuXHRcdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3Auc3BsaWNlKGlkeCwgMSk7XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuXHRcdHZhciBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cdFx0c3R5bGVFbGVtZW50LnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdFx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlRWxlbWVudCk7XG5cdFx0cmV0dXJuIHN0eWxlRWxlbWVudDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG5cdFx0dmFyIHN0eWxlRWxlbWVudCwgdXBkYXRlLCByZW1vdmU7XG5cdFxuXHRcdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuXHRcdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG5cdFx0XHRzdHlsZUVsZW1lbnQgPSBzaW5nbGV0b25FbGVtZW50IHx8IChzaW5nbGV0b25FbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcblx0XHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIGZhbHNlKTtcblx0XHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIHRydWUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0XHR1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50KTtcblx0XHRcdHJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcblx0XHRcdH07XG5cdFx0fVxuXHRcblx0XHR1cGRhdGUob2JqKTtcblx0XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuXHRcdFx0aWYobmV3T2JqKSB7XG5cdFx0XHRcdGlmKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcClcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdHVwZGF0ZShvYmogPSBuZXdPYmopO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVtb3ZlKCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXHRcblx0dmFyIHJlcGxhY2VUZXh0ID0gKGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgdGV4dFN0b3JlID0gW107XG5cdFxuXHRcdHJldHVybiBmdW5jdGlvbiAoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG5cdFx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cdFx0XHRyZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcblx0XHR9O1xuXHR9KSgpO1xuXHRcblx0ZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZUVsZW1lbnQsIGluZGV4LCByZW1vdmUsIG9iaikge1xuXHRcdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcblx0XG5cdFx0aWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcblx0XHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGVFbGVtZW50LmNoaWxkTm9kZXM7XG5cdFx0XHRpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0XHRpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcblx0XHRcdFx0c3R5bGVFbGVtZW50Lmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlRWxlbWVudCwgb2JqKSB7XG5cdFx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdFx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXHRcdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXHRcblx0XHRpZiAobWVkaWEpIHtcblx0XHRcdHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLCBtZWRpYSk7XG5cdFx0fVxuXHRcblx0XHRpZiAoc291cmNlTWFwKSB7XG5cdFx0XHQvLyBodHRwczovL2RldmVsb3Blci5jaHJvbWUuY29tL2RldnRvb2xzL2RvY3MvamF2YXNjcmlwdC1kZWJ1Z2dpbmdcblx0XHRcdC8vIHRoaXMgbWFrZXMgc291cmNlIG1hcHMgaW5zaWRlIHN0eWxlIHRhZ3Mgd29yayBwcm9wZXJseSBpbiBDaHJvbWVcblx0XHRcdGNzcyArPSAnXFxuLyojIHNvdXJjZVVSTD0nICsgc291cmNlTWFwLnNvdXJjZXNbMF0gKyAnICovJztcblx0XHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XG5cdFx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdFx0fVxuXHRcblx0XHRpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcblx0XHRcdHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHdoaWxlKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKSB7XG5cdFx0XHRcdHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCk7XG5cdFx0XHR9XG5cdFx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG5cdFx0fVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHt2YXIgY2hlY2tHbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMCk7XG5cdFxuXHQvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xuXHR2YXIgZnJlZUdsb2JhbCA9IGNoZWNrR2xvYmFsKHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsKTtcblx0XG5cdC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG5cdHZhciBmcmVlU2VsZiA9IGNoZWNrR2xvYmFsKHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYpO1xuXHRcblx0LyoqIERldGVjdCBgdGhpc2AgYXMgdGhlIGdsb2JhbCBvYmplY3QuICovXG5cdHZhciB0aGlzR2xvYmFsID0gY2hlY2tHbG9iYWwodHlwZW9mIHRoaXMgPT0gJ29iamVjdCcgJiYgdGhpcyk7XG5cdFxuXHQvKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cblx0dmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IHRoaXNHbG9iYWwgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gcm9vdDtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBBcnJheWAgb2JqZWN0LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAdHlwZSB7RnVuY3Rpb259XG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc0FycmF5KFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0FycmF5KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXkoJ2FiYycpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXkoXy5ub29wKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNBcnJheTtcblxuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VJc05hdGl2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oOTIpLFxuXHQgICAgZ2V0VmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOCk7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgbmF0aXZlIGZ1bmN0aW9uIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kIHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZ1bmN0aW9uIGlmIGl0J3MgbmF0aXZlLCBlbHNlIGB1bmRlZmluZWRgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TmF0aXZlKG9iamVjdCwga2V5KSB7XG5cdCAgdmFyIHZhbHVlID0gZ2V0VmFsdWUob2JqZWN0LCBrZXkpO1xuXHQgIHJldHVybiBiYXNlSXNOYXRpdmUodmFsdWUpID8gdmFsdWUgOiB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZ2V0TmF0aXZlO1xuXG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG5cdCAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcblx0ICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3Qoe30pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChudWxsKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc09iamVjdDtcblxuXG4vKioqLyB9LFxuLyogNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMTg4KVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1NClcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG5cdCAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKHt9KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzT2JqZWN0TGlrZTtcblxuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGxpc3RDYWNoZUNsZWFyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTkpLFxuXHQgICAgbGlzdENhY2hlRGVsZXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjApLFxuXHQgICAgbGlzdENhY2hlR2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjEpLFxuXHQgICAgbGlzdENhY2hlSGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjIpLFxuXHQgICAgbGlzdENhY2hlU2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjMpO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYW4gbGlzdCBjYWNoZSBvYmplY3QuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cblx0ICovXG5cdGZ1bmN0aW9uIExpc3RDYWNoZShlbnRyaWVzKSB7XG5cdCAgdmFyIGluZGV4ID0gLTEsXG5cdCAgICAgIGxlbmd0aCA9IGVudHJpZXMgPyBlbnRyaWVzLmxlbmd0aCA6IDA7XG5cdFxuXHQgIHRoaXMuY2xlYXIoKTtcblx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG5cdCAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pO1xuXHQgIH1cblx0fVxuXHRcblx0Ly8gQWRkIG1ldGhvZHMgdG8gYExpc3RDYWNoZWAuXG5cdExpc3RDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBsaXN0Q2FjaGVDbGVhcjtcblx0TGlzdENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBsaXN0Q2FjaGVEZWxldGU7XG5cdExpc3RDYWNoZS5wcm90b3R5cGUuZ2V0ID0gbGlzdENhY2hlR2V0O1xuXHRMaXN0Q2FjaGUucHJvdG90eXBlLmhhcyA9IGxpc3RDYWNoZUhhcztcblx0TGlzdENhY2hlLnByb3RvdHlwZS5zZXQgPSBsaXN0Q2FjaGVTZXQ7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IExpc3RDYWNoZTtcblxuXG4vKioqLyB9LFxuLyogMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBlcSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQwKTtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBpbmRleCBhdCB3aGljaCB0aGUgYGtleWAgaXMgZm91bmQgaW4gYGFycmF5YCBvZiBrZXktdmFsdWUgcGFpcnMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG5cdCAqIEBwYXJhbSB7Kn0ga2V5IFRoZSBrZXkgdG8gc2VhcmNoIGZvci5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cblx0ICovXG5cdGZ1bmN0aW9uIGFzc29jSW5kZXhPZihhcnJheSwga2V5KSB7XG5cdCAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblx0ICB3aGlsZSAobGVuZ3RoLS0pIHtcblx0ICAgIGlmIChlcShhcnJheVtsZW5ndGhdWzBdLCBrZXkpKSB7XG5cdCAgICAgIHJldHVybiBsZW5ndGg7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiAtMTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBhc3NvY0luZGV4T2Y7XG5cblxuLyoqKi8gfSxcbi8qIDExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNLZXlhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTYpO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIGRhdGEgZm9yIGBtYXBgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIHJlZmVyZW5jZSBrZXkuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtYXAgZGF0YS5cblx0ICovXG5cdGZ1bmN0aW9uIGdldE1hcERhdGEobWFwLCBrZXkpIHtcblx0ICB2YXIgZGF0YSA9IG1hcC5fX2RhdGFfXztcblx0ICByZXR1cm4gaXNLZXlhYmxlKGtleSlcblx0ICAgID8gZGF0YVt0eXBlb2Yga2V5ID09ICdzdHJpbmcnID8gJ3N0cmluZycgOiAnaGFzaCddXG5cdCAgICA6IGRhdGEubWFwO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGdldE1hcERhdGE7XG5cblxuLyoqKi8gfSxcbi8qIDEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNCksXG5cdCAgICBpc1N5bWJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHRcblx0LyoqIFVzZWQgdG8gbWF0Y2ggcHJvcGVydHkgbmFtZXMgd2l0aGluIHByb3BlcnR5IHBhdGhzLiAqL1xuXHR2YXIgcmVJc0RlZXBQcm9wID0gL1xcLnxcXFsoPzpbXltcXF1dKnwoW1wiJ10pKD86KD8hXFwxKVteXFxcXF18XFxcXC4pKj9cXDEpXFxdLyxcblx0ICAgIHJlSXNQbGFpblByb3AgPSAvXlxcdyokLztcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUgYW5kIG5vdCBhIHByb3BlcnR5IHBhdGguXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeSBrZXlzIG9uLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzS2V5KHZhbHVlLCBvYmplY3QpIHtcblx0ICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdCAgaWYgKHR5cGUgPT0gJ251bWJlcicgfHwgdHlwZSA9PSAnc3ltYm9sJyB8fCB0eXBlID09ICdib29sZWFuJyB8fFxuXHQgICAgICB2YWx1ZSA9PSBudWxsIHx8IGlzU3ltYm9sKHZhbHVlKSkge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHQgIHJldHVybiByZUlzUGxhaW5Qcm9wLnRlc3QodmFsdWUpIHx8ICFyZUlzRGVlcFByb3AudGVzdCh2YWx1ZSkgfHxcblx0ICAgIChvYmplY3QgIT0gbnVsbCAmJiB2YWx1ZSBpbiBPYmplY3Qob2JqZWN0KSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNLZXk7XG5cblxuLyoqKi8gfSxcbi8qIDEzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2V0TmF0aXZlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cblx0dmFyIG5hdGl2ZUNyZWF0ZSA9IGdldE5hdGl2ZShPYmplY3QsICdjcmVhdGUnKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbmF0aXZlQ3JlYXRlO1xuXG5cbi8qKiovIH0sXG4vKiAxNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzU3ltYm9sID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdFxuXHQvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cblx0dmFyIElORklOSVRZID0gMSAvIDA7XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZyBrZXkgaWYgaXQncyBub3QgYSBzdHJpbmcgb3Igc3ltYm9sLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBpbnNwZWN0LlxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfHN5bWJvbH0gUmV0dXJucyB0aGUga2V5LlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9LZXkodmFsdWUpIHtcblx0ICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnIHx8IGlzU3ltYm9sKHZhbHVlKSkge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICB2YXIgcmVzdWx0ID0gKHZhbHVlICsgJycpO1xuXHQgIHJldHVybiAocmVzdWx0ID09ICcwJyAmJiAoMSAvIHZhbHVlKSA9PSAtSU5GSU5JVFkpID8gJy0wJyA6IHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB0b0tleTtcblxuXG4vKioqLyB9LFxuLyogMTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xuXHR2YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cblx0ICpcblx0ICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgbG9vc2VseSBiYXNlZCBvblxuXHQgKiBbYFRvTGVuZ3RoYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtdG9sZW5ndGgpLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsXG5cdCAqICBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNMZW5ndGgoMyk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0xlbmd0aChOdW1iZXIuTUlOX1ZBTFVFKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICpcblx0ICogXy5pc0xlbmd0aChJbmZpbml0eSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqXG5cdCAqIF8uaXNMZW5ndGgoJzMnKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJlxuXHQgICAgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzTGVuZ3RoO1xuXG5cbi8qKiovIH0sXG4vKiAxNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzT2JqZWN0TGlrZSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHQvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG5cdHZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlXG5cdCAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc1N5bWJvbCgnYWJjJyk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuXHQgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcblx0ICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZyk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNTeW1ib2w7XG5cblxuLyoqKi8gfSxcbi8qIDE3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgbWFwQ2FjaGVDbGVhciA9IF9fd2VicGFja19yZXF1aXJlX18oMTI0KSxcblx0ICAgIG1hcENhY2hlRGVsZXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjUpLFxuXHQgICAgbWFwQ2FjaGVHZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNiksXG5cdCAgICBtYXBDYWNoZUhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTI3KSxcblx0ICAgIG1hcENhY2hlU2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjgpO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBtYXAgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIGtleS12YWx1ZSBwYWlycy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuXHQgKi9cblx0ZnVuY3Rpb24gTWFwQ2FjaGUoZW50cmllcykge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICBsZW5ndGggPSBlbnRyaWVzID8gZW50cmllcy5sZW5ndGggOiAwO1xuXHRcblx0ICB0aGlzLmNsZWFyKCk7XG5cdCAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuXHQgICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIEFkZCBtZXRob2RzIHRvIGBNYXBDYWNoZWAuXG5cdE1hcENhY2hlLnByb3RvdHlwZS5jbGVhciA9IG1hcENhY2hlQ2xlYXI7XG5cdE1hcENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBtYXBDYWNoZURlbGV0ZTtcblx0TWFwQ2FjaGUucHJvdG90eXBlLmdldCA9IG1hcENhY2hlR2V0O1xuXHRNYXBDYWNoZS5wcm90b3R5cGUuaGFzID0gbWFwQ2FjaGVIYXM7XG5cdE1hcENhY2hlLnByb3RvdHlwZS5zZXQgPSBtYXBDYWNoZVNldDtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gTWFwQ2FjaGU7XG5cblxuLyoqKi8gfSxcbi8qIDE4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG5cdCAgICBnZW5UYWcgPSAnW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0nO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcblx0ICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG5cdCAqIG9mIHZhbHVlcy5cblx0ICovXG5cdHZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgRnVuY3Rpb25gIG9iamVjdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMC4xLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzRnVuY3Rpb24oXyk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0Z1bmN0aW9uKC9hYmMvKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcblx0ICAvLyBUaGUgdXNlIG9mIGBPYmplY3QjdG9TdHJpbmdgIGF2b2lkcyBpc3N1ZXMgd2l0aCB0aGUgYHR5cGVvZmAgb3BlcmF0b3Jcblx0ICAvLyBpbiBTYWZhcmkgOCB3aGljaCByZXR1cm5zICdvYmplY3QnIGZvciB0eXBlZCBhcnJheSBhbmQgd2VhayBtYXAgY29uc3RydWN0b3JzLFxuXHQgIC8vIGFuZCBQaGFudG9tSlMgMS45IHdoaWNoIHJldHVybnMgJ2Z1bmN0aW9uJyBmb3IgYE5vZGVMaXN0YCBpbnN0YW5jZXMuXG5cdCAgdmFyIHRhZyA9IGlzT2JqZWN0KHZhbHVlKSA/IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpIDogJyc7XG5cdCAgcmV0dXJuIHRhZyA9PSBmdW5jVGFnIHx8IHRhZyA9PSBnZW5UYWc7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNGdW5jdGlvbjtcblxuXG4vKioqLyB9LFxuLyogMTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXHRcblx0dmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXHRcblx0Ly8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG5cdC8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuXHQvLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG5cdC8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cdFxuXHR2YXIgY2FjaGVkU2V0VGltZW91dDtcblx0dmFyIGNhY2hlZENsZWFyVGltZW91dDtcblx0XG5cdChmdW5jdGlvbiAoKSB7XG5cdCAgdHJ5IHtcblx0ICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGNhY2hlZFNldFRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBpcyBub3QgZGVmaW5lZCcpO1xuXHQgICAgfVxuXHQgIH1cblx0ICB0cnkge1xuXHQgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaXMgbm90IGRlZmluZWQnKTtcblx0ICAgIH1cblx0ICB9XG5cdH0gKCkpXG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgZHJhaW5pbmcgPSBmYWxzZTtcblx0dmFyIGN1cnJlbnRRdWV1ZTtcblx0dmFyIHF1ZXVlSW5kZXggPSAtMTtcblx0XG5cdGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcblx0ICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgIH1cblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBkcmFpblF1ZXVlKCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG5cdCAgICBpZiAoZHJhaW5pbmcpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgdGltZW91dCA9IGNhY2hlZFNldFRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcblx0ICAgIGRyYWluaW5nID0gdHJ1ZTtcblx0XG5cdCAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgd2hpbGUobGVuKSB7XG5cdCAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG5cdCAgICAgICAgcXVldWUgPSBbXTtcblx0ICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgfVxuXHQgICAgY3VycmVudFF1ZXVlID0gbnVsbDtcblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBjYWNoZWRDbGVhclRpbWVvdXQodGltZW91dCk7XG5cdH1cblx0XG5cdHByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcblx0ICAgICAgICBjYWNoZWRTZXRUaW1lb3V0KGRyYWluUXVldWUsIDApO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0Ly8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuXHRmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcblx0ICAgIHRoaXMuZnVuID0gZnVuO1xuXHQgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuXHR9XG5cdEl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xuXHR9O1xuXHRwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xuXHRwcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xuXHRwcm9jZXNzLmVudiA9IHt9O1xuXHRwcm9jZXNzLmFyZ3YgPSBbXTtcblx0cHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5cdHByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHRcblx0cHJvY2Vzcy5vbiA9IG5vb3A7XG5cdHByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLm9uY2UgPSBub29wO1xuXHRwcm9jZXNzLm9mZiA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5cdHByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cdFxuXHRwcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRcblx0cHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcblx0cHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdHByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuLyoqKi8gfSxcbi8qIDIwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZGVmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblx0XG5cdHZhciBfZGVmZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShuZXdWYWwpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgaWYgKG5ld1ZhbCA9PT0gdHJ1ZSkge1xuXHQgICAgICAoMCwgX2RlZmVyMi5kZWZhdWx0KShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgX3RoaXMuZWwudGFiSW5kZXggPSAwO1xuXHQgICAgICAgIF90aGlzLmVsLmZvY3VzKCk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1cblx0fTsgLypcblx0ICAgICBAZGVzYyBBZGQgYmVoYXZpb3IgdG8gYW55IGVsZW1lbnQuXG5cdCAgICAgV2hlbiBldmFsIHRvIHRydWUsIGl0IHdpbGwgc2V0IGVsZW1lbnQgdGFiIGluZGV4IHRvIDAgYW5kIGZvY3VzIG9uIGl0LlxuXHQgICAgIEV4YW1wbGU6IDxkaXYgc2V0LWZvY3VzPVwid2lsbEZvY3VzV2hlblRydWVcIj48L2Rpdj5cblx0ICAgKi9cblxuLyoqKi8gfSxcbi8qIDIxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZXZlbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NCk7XG5cdFxuXHR2YXIgX2V2ZW50czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ldmVudHMpO1xuXHRcblx0dmFyIF94aHJSZXNwb25zZSA9IF9fd2VicGFja19yZXF1aXJlX18oNjUpO1xuXHRcblx0dmFyIF94aHJSZXNwb25zZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF94aHJSZXNwb25zZSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gW19ldmVudHMyLmRlZmF1bHQsIF94aHJSZXNwb25zZTIuZGVmYXVsdF07XG5cbi8qKiovIH0sXG4vKiAyMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldE5hdGl2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNSksXG5cdCAgICByb290ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cblx0dmFyIE1hcCA9IGdldE5hdGl2ZShyb290LCAnTWFwJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IE1hcDtcblxuXG4vKioqLyB9LFxuLyogMjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBMaXN0Q2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpLFxuXHQgICAgc3RhY2tDbGVhciA9IF9fd2VicGFja19yZXF1aXJlX18oMTMzKSxcblx0ICAgIHN0YWNrRGVsZXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzQpLFxuXHQgICAgc3RhY2tHZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNSksXG5cdCAgICBzdGFja0hhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTM2KSxcblx0ICAgIHN0YWNrU2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzcpO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBzdGFjayBjYWNoZSBvYmplY3QgdG8gc3RvcmUga2V5LXZhbHVlIHBhaXJzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG5cdCAqL1xuXHRmdW5jdGlvbiBTdGFjayhlbnRyaWVzKSB7XG5cdCAgdGhpcy5fX2RhdGFfXyA9IG5ldyBMaXN0Q2FjaGUoZW50cmllcyk7XG5cdH1cblx0XG5cdC8vIEFkZCBtZXRob2RzIHRvIGBTdGFja2AuXG5cdFN0YWNrLnByb3RvdHlwZS5jbGVhciA9IHN0YWNrQ2xlYXI7XG5cdFN0YWNrLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBzdGFja0RlbGV0ZTtcblx0U3RhY2sucHJvdG90eXBlLmdldCA9IHN0YWNrR2V0O1xuXHRTdGFjay5wcm90b3R5cGUuaGFzID0gc3RhY2tIYXM7XG5cdFN0YWNrLnByb3RvdHlwZS5zZXQgPSBzdGFja1NldDtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gU3RhY2s7XG5cblxuLyoqKi8gfSxcbi8qIDI0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgcm9vdCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cblx0dmFyIFN5bWJvbCA9IHJvb3QuU3ltYm9sO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTeW1ib2w7XG5cblxuLyoqKi8gfSxcbi8qIDI1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgY2FzdFBhdGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KSxcblx0ICAgIGlzS2V5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMiksXG5cdCAgICB0b0tleSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmdldGAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWZhdWx0IHZhbHVlcy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlR2V0KG9iamVjdCwgcGF0aCkge1xuXHQgIHBhdGggPSBpc0tleShwYXRoLCBvYmplY3QpID8gW3BhdGhdIDogY2FzdFBhdGgocGF0aCk7XG5cdFxuXHQgIHZhciBpbmRleCA9IDAsXG5cdCAgICAgIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xuXHRcblx0ICB3aGlsZSAob2JqZWN0ICE9IG51bGwgJiYgaW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIG9iamVjdCA9IG9iamVjdFt0b0tleShwYXRoW2luZGV4KytdKV07XG5cdCAgfVxuXHQgIHJldHVybiAoaW5kZXggJiYgaW5kZXggPT0gbGVuZ3RoKSA/IG9iamVjdCA6IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlR2V0O1xuXG5cbi8qKiovIH0sXG4vKiAyNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldFByb3RvdHlwZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTA2KTtcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5oYXNgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBrZXkgVGhlIGtleSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUhhcyhvYmplY3QsIGtleSkge1xuXHQgIC8vIEF2b2lkIGEgYnVnIGluIElFIDEwLTExIHdoZXJlIG9iamVjdHMgd2l0aCBhIFtbUHJvdG90eXBlXV0gb2YgYG51bGxgLFxuXHQgIC8vIHRoYXQgYXJlIGNvbXBvc2VkIGVudGlyZWx5IG9mIGluZGV4IHByb3BlcnRpZXMsIHJldHVybiBgZmFsc2VgIGZvclxuXHQgIC8vIGBoYXNPd25Qcm9wZXJ0eWAgY2hlY2tzIG9mIHRoZW0uXG5cdCAgcmV0dXJuIG9iamVjdCAhPSBudWxsICYmXG5cdCAgICAoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkgfHxcblx0ICAgICAgKHR5cGVvZiBvYmplY3QgPT0gJ29iamVjdCcgJiYga2V5IGluIG9iamVjdCAmJiBnZXRQcm90b3R5cGUob2JqZWN0KSA9PT0gbnVsbCkpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VIYXM7XG5cblxuLyoqKi8gfSxcbi8qIDI3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZUlzRXF1YWxEZWVwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MCksXG5cdCAgICBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNiksXG5cdCAgICBpc09iamVjdExpa2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzRXF1YWxgIHdoaWNoIHN1cHBvcnRzIHBhcnRpYWwgY29tcGFyaXNvbnNcblx0ICogYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gW2JpdG1hc2tdIFRoZSBiaXRtYXNrIG9mIGNvbXBhcmlzb24gZmxhZ3MuXG5cdCAqICBUaGUgYml0bWFzayBtYXkgYmUgY29tcG9zZWQgb2YgdGhlIGZvbGxvd2luZyBmbGFnczpcblx0ICogICAgIDEgLSBVbm9yZGVyZWQgY29tcGFyaXNvblxuXHQgKiAgICAgMiAtIFBhcnRpYWwgY29tcGFyaXNvblxuXHQgKiBAcGFyYW0ge09iamVjdH0gW3N0YWNrXSBUcmFja3MgdHJhdmVyc2VkIGB2YWx1ZWAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlciwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcblx0ICBpZiAodmFsdWUgPT09IG90aGVyKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdCAgaWYgKHZhbHVlID09IG51bGwgfHwgb3RoZXIgPT0gbnVsbCB8fCAoIWlzT2JqZWN0KHZhbHVlKSAmJiAhaXNPYmplY3RMaWtlKG90aGVyKSkpIHtcblx0ICAgIHJldHVybiB2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyO1xuXHQgIH1cblx0ICByZXR1cm4gYmFzZUlzRXF1YWxEZWVwKHZhbHVlLCBvdGhlciwgYmFzZUlzRXF1YWwsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlSXNFcXVhbDtcblxuXG4vKioqLyB9LFxuLyogMjggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eWAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYWNjZXNzb3IgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlUHJvcGVydHkoa2V5KSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuXHQgICAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG5cdCAgfTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlUHJvcGVydHk7XG5cblxuLyoqKi8gfSxcbi8qIDI5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNCksXG5cdCAgICBzdHJpbmdUb1BhdGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOCk7XG5cdFxuXHQvKipcblx0ICogQ2FzdHMgYHZhbHVlYCB0byBhIHBhdGggYXJyYXkgaWYgaXQncyBub3Qgb25lLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBpbnNwZWN0LlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGNhc3QgcHJvcGVydHkgcGF0aCBhcnJheS5cblx0ICovXG5cdGZ1bmN0aW9uIGNhc3RQYXRoKHZhbHVlKSB7XG5cdCAgcmV0dXJuIGlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBzdHJpbmdUb1BhdGgodmFsdWUpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGNhc3RQYXRoO1xuXG5cbi8qKiovIH0sXG4vKiAzMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIFNldENhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MiksXG5cdCAgICBhcnJheVNvbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg2KTtcblx0XG5cdC8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNvbXBhcmlzb24gc3R5bGVzLiAqL1xuXHR2YXIgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyA9IDEsXG5cdCAgICBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cdFxuXHQvKipcblx0ICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBhcnJheXMgd2l0aCBzdXBwb3J0IGZvclxuXHQgKiBwYXJ0aWFsIGRlZXAgY29tcGFyaXNvbnMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge0FycmF5fSBvdGhlciBUaGUgb3RoZXIgYXJyYXkgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIG9mIGNvbXBhcmlzb24gZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgXG5cdCAqICBmb3IgbW9yZSBkZXRhaWxzLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gc3RhY2sgVHJhY2tzIHRyYXZlcnNlZCBgYXJyYXlgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXJyYXlzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBlcXVhbEFycmF5cyhhcnJheSwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcblx0ICB2YXIgaXNQYXJ0aWFsID0gYml0bWFzayAmIFBBUlRJQUxfQ09NUEFSRV9GTEFHLFxuXHQgICAgICBhcnJMZW5ndGggPSBhcnJheS5sZW5ndGgsXG5cdCAgICAgIG90aExlbmd0aCA9IG90aGVyLmxlbmd0aDtcblx0XG5cdCAgaWYgKGFyckxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIShpc1BhcnRpYWwgJiYgb3RoTGVuZ3RoID4gYXJyTGVuZ3RoKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG5cdCAgdmFyIHN0YWNrZWQgPSBzdGFjay5nZXQoYXJyYXkpO1xuXHQgIGlmIChzdGFja2VkKSB7XG5cdCAgICByZXR1cm4gc3RhY2tlZCA9PSBvdGhlcjtcblx0ICB9XG5cdCAgdmFyIGluZGV4ID0gLTEsXG5cdCAgICAgIHJlc3VsdCA9IHRydWUsXG5cdCAgICAgIHNlZW4gPSAoYml0bWFzayAmIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcpID8gbmV3IFNldENhY2hlIDogdW5kZWZpbmVkO1xuXHRcblx0ICBzdGFjay5zZXQoYXJyYXksIG90aGVyKTtcblx0XG5cdCAgLy8gSWdub3JlIG5vbi1pbmRleCBwcm9wZXJ0aWVzLlxuXHQgIHdoaWxlICgrK2luZGV4IDwgYXJyTGVuZ3RoKSB7XG5cdCAgICB2YXIgYXJyVmFsdWUgPSBhcnJheVtpbmRleF0sXG5cdCAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltpbmRleF07XG5cdFxuXHQgICAgaWYgKGN1c3RvbWl6ZXIpIHtcblx0ICAgICAgdmFyIGNvbXBhcmVkID0gaXNQYXJ0aWFsXG5cdCAgICAgICAgPyBjdXN0b21pemVyKG90aFZhbHVlLCBhcnJWYWx1ZSwgaW5kZXgsIG90aGVyLCBhcnJheSwgc3RhY2spXG5cdCAgICAgICAgOiBjdXN0b21pemVyKGFyclZhbHVlLCBvdGhWYWx1ZSwgaW5kZXgsIGFycmF5LCBvdGhlciwgc3RhY2spO1xuXHQgICAgfVxuXHQgICAgaWYgKGNvbXBhcmVkICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAgaWYgKGNvbXBhcmVkKSB7XG5cdCAgICAgICAgY29udGludWU7XG5cdCAgICAgIH1cblx0ICAgICAgcmVzdWx0ID0gZmFsc2U7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHQgICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cblx0ICAgIGlmIChzZWVuKSB7XG5cdCAgICAgIGlmICghYXJyYXlTb21lKG90aGVyLCBmdW5jdGlvbihvdGhWYWx1ZSwgb3RoSW5kZXgpIHtcblx0ICAgICAgICAgICAgaWYgKCFzZWVuLmhhcyhvdGhJbmRleCkgJiZcblx0ICAgICAgICAgICAgICAgIChhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spKSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBzZWVuLmFkZChvdGhJbmRleCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0pKSB7XG5cdCAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoIShcblx0ICAgICAgICAgIGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fFxuXHQgICAgICAgICAgICBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaylcblx0ICAgICAgICApKSB7XG5cdCAgICAgIHJlc3VsdCA9IGZhbHNlO1xuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICB9XG5cdCAgc3RhY2tbJ2RlbGV0ZSddKGFycmF5KTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGVxdWFsQXJyYXlzO1xuXG5cbi8qKiovIH0sXG4vKiAzMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgaG9zdCBvYmplY3QgaW4gSUUgPCA5LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBob3N0IG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNIb3N0T2JqZWN0KHZhbHVlKSB7XG5cdCAgLy8gTWFueSBob3N0IG9iamVjdHMgYXJlIGBPYmplY3RgIG9iamVjdHMgdGhhdCBjYW4gY29lcmNlIHRvIHN0cmluZ3Ncblx0ICAvLyBkZXNwaXRlIGhhdmluZyBpbXByb3Blcmx5IGRlZmluZWQgYHRvU3RyaW5nYCBtZXRob2RzLlxuXHQgIHZhciByZXN1bHQgPSBmYWxzZTtcblx0ICBpZiAodmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUudG9TdHJpbmcgIT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmVzdWx0ID0gISEodmFsdWUgKyAnJyk7XG5cdCAgICB9IGNhdGNoIChlKSB7fVxuXHQgIH1cblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzSG9zdE9iamVjdDtcblxuXG4vKioqLyB9LFxuLyogMzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xuXHR2YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgdW5zaWduZWQgaW50ZWdlciB2YWx1ZXMuICovXG5cdHZhciByZUlzVWludCA9IC9eKD86MHxbMS05XVxcZCopJC87XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGluZGV4LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHtcblx0ICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIgOiBsZW5ndGg7XG5cdCAgcmV0dXJuICEhbGVuZ3RoICYmXG5cdCAgICAodHlwZW9mIHZhbHVlID09ICdudW1iZXInIHx8IHJlSXNVaW50LnRlc3QodmFsdWUpKSAmJlxuXHQgICAgKHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPCBsZW5ndGgpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzSW5kZXg7XG5cblxuLyoqKi8gfSxcbi8qIDMzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciBzdHJpY3QgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpZiBzdWl0YWJsZSBmb3Igc3RyaWN0XG5cdCAqICBlcXVhbGl0eSBjb21wYXJpc29ucywgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNTdHJpY3RDb21wYXJhYmxlKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSAmJiAhaXNPYmplY3QodmFsdWUpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzU3RyaWN0Q29tcGFyYWJsZTtcblxuXG4vKioqLyB9LFxuLyogMzQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYG1hdGNoZXNQcm9wZXJ0eWAgZm9yIHNvdXJjZSB2YWx1ZXMgc3VpdGFibGVcblx0ICogZm9yIHN0cmljdCBlcXVhbGl0eSBjb21wYXJpc29ucywgaS5lLiBgPT09YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdCAqIEBwYXJhbSB7Kn0gc3JjVmFsdWUgVGhlIHZhbHVlIHRvIG1hdGNoLlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzcGVjIGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWF0Y2hlc1N0cmljdENvbXBhcmFibGUoa2V5LCBzcmNWYWx1ZSkge1xuXHQgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcblx0ICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gb2JqZWN0W2tleV0gPT09IHNyY1ZhbHVlICYmXG5cdCAgICAgIChzcmNWYWx1ZSAhPT0gdW5kZWZpbmVkIHx8IChrZXkgaW4gT2JqZWN0KG9iamVjdCkpKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlO1xuXG5cbi8qKiovIH0sXG4vKiAzNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xuXHR2YXIgZnVuY1RvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGBmdW5jYCB0byBpdHMgc291cmNlIGNvZGUuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHNvdXJjZSBjb2RlLlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9Tb3VyY2UoZnVuYykge1xuXHQgIGlmIChmdW5jICE9IG51bGwpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJldHVybiBmdW5jVG9TdHJpbmcuY2FsbChmdW5jKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgICB0cnkge1xuXHQgICAgICByZXR1cm4gKGZ1bmMgKyAnJyk7XG5cdCAgICB9IGNhdGNoIChlKSB7fVxuXHQgIH1cblx0ICByZXR1cm4gJyc7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gdG9Tb3VyY2U7XG5cblxuLyoqKi8gfSxcbi8qIDM2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZURlbGF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NyksXG5cdCAgICByZXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTApO1xuXHRcblx0LyoqXG5cdCAqIERlZmVycyBpbnZva2luZyB0aGUgYGZ1bmNgIHVudGlsIHRoZSBjdXJyZW50IGNhbGwgc3RhY2sgaGFzIGNsZWFyZWQuIEFueVxuXHQgKiBhZGRpdGlvbmFsIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgdG8gYGZ1bmNgIHdoZW4gaXQncyBpbnZva2VkLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVmZXIuXG5cdCAqIEBwYXJhbSB7Li4uKn0gW2FyZ3NdIFRoZSBhcmd1bWVudHMgdG8gaW52b2tlIGBmdW5jYCB3aXRoLlxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lciBpZC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5kZWZlcihmdW5jdGlvbih0ZXh0KSB7XG5cdCAqICAgY29uc29sZS5sb2codGV4dCk7XG5cdCAqIH0sICdkZWZlcnJlZCcpO1xuXHQgKiAvLyA9PiBMb2dzICdkZWZlcnJlZCcgYWZ0ZXIgb25lIG9yIG1vcmUgbWlsbGlzZWNvbmRzLlxuXHQgKi9cblx0dmFyIGRlZmVyID0gcmVzdChmdW5jdGlvbihmdW5jLCBhcmdzKSB7XG5cdCAgcmV0dXJuIGJhc2VEZWxheShmdW5jLCAxLCBhcmdzKTtcblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGRlZmVyO1xuXG5cbi8qKiovIH0sXG4vKiAzNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzQXJyYXlMaWtlT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDUpO1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcblx0ICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG5cdCAqIG9mIHZhbHVlcy5cblx0ICovXG5cdHZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXHRcblx0LyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG5cdHZhciBwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IG9iamVjdFByb3RvLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxpa2VseSBhbiBgYXJndW1lbnRzYCBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc0FyZ3VtZW50cyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzQXJndW1lbnRzKFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0FyZ3VtZW50cyh2YWx1ZSkge1xuXHQgIC8vIFNhZmFyaSA4LjEgaW5jb3JyZWN0bHkgbWFrZXMgYGFyZ3VtZW50cy5jYWxsZWVgIGVudW1lcmFibGUgaW4gc3RyaWN0IG1vZGUuXG5cdCAgcmV0dXJuIGlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKSAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCAnY2FsbGVlJykgJiZcblx0ICAgICghcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpIHx8IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IGFyZ3NUYWcpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzQXJndW1lbnRzO1xuXG5cbi8qKiovIH0sXG4vKiAzOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldExlbmd0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMTA0KSxcblx0ICAgIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KSxcblx0ICAgIGlzTGVuZ3RoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZS4gQSB2YWx1ZSBpcyBjb25zaWRlcmVkIGFycmF5LWxpa2UgaWYgaXQnc1xuXHQgKiBub3QgYSBmdW5jdGlvbiBhbmQgaGFzIGEgYHZhbHVlLmxlbmd0aGAgdGhhdCdzIGFuIGludGVnZXIgZ3JlYXRlciB0aGFuIG9yXG5cdCAqIGVxdWFsIHRvIGAwYCBhbmQgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUmAuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNBcnJheUxpa2UoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXlMaWtlKGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNBcnJheUxpa2UoJ2FiYycpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNBcnJheUxpa2UoXy5ub29wKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgaXNMZW5ndGgoZ2V0TGVuZ3RoKHZhbHVlKSkgJiYgIWlzRnVuY3Rpb24odmFsdWUpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzQXJyYXlMaWtlO1xuXG5cbi8qKiovIH0sXG4vKiAzOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuXHQgICAgaXNPYmplY3RMaWtlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcblx0ICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG5cdCAqIG9mIHZhbHVlcy5cblx0ICovXG5cdHZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3RyaW5nYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsXG5cdCAqICBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNTdHJpbmcoJ2FiYycpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNTdHJpbmcoMSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge1xuXHQgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgfHxcblx0ICAgICghaXNBcnJheSh2YWx1ZSkgJiYgaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzdHJpbmdUYWcpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzU3RyaW5nO1xuXG5cbi8qKiovIH0sXG4vKiA0MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VIYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KSxcblx0ICAgIGJhc2VLZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NCksXG5cdCAgICBpbmRleEtleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNSksXG5cdCAgICBpc0FycmF5TGlrZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpLFxuXHQgICAgaXNJbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpLFxuXHQgICAgaXNQcm90b3R5cGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOCk7XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuXG5cdCAqXG5cdCAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLiBTZWUgdGhlXG5cdCAqIFtFUyBzcGVjXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3Qua2V5cylcblx0ICogZm9yIG1vcmUgZGV0YWlscy5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAc2luY2UgMC4xLjBcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGNhdGVnb3J5IE9iamVjdFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIGZ1bmN0aW9uIEZvbygpIHtcblx0ICogICB0aGlzLmEgPSAxO1xuXHQgKiAgIHRoaXMuYiA9IDI7XG5cdCAqIH1cblx0ICpcblx0ICogRm9vLnByb3RvdHlwZS5jID0gMztcblx0ICpcblx0ICogXy5rZXlzKG5ldyBGb28pO1xuXHQgKiAvLyA9PiBbJ2EnLCAnYiddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG5cdCAqXG5cdCAqIF8ua2V5cygnaGknKTtcblx0ICogLy8gPT4gWycwJywgJzEnXVxuXHQgKi9cblx0ZnVuY3Rpb24ga2V5cyhvYmplY3QpIHtcblx0ICB2YXIgaXNQcm90byA9IGlzUHJvdG90eXBlKG9iamVjdCk7XG5cdCAgaWYgKCEoaXNQcm90byB8fCBpc0FycmF5TGlrZShvYmplY3QpKSkge1xuXHQgICAgcmV0dXJuIGJhc2VLZXlzKG9iamVjdCk7XG5cdCAgfVxuXHQgIHZhciBpbmRleGVzID0gaW5kZXhLZXlzKG9iamVjdCksXG5cdCAgICAgIHNraXBJbmRleGVzID0gISFpbmRleGVzLFxuXHQgICAgICByZXN1bHQgPSBpbmRleGVzIHx8IFtdLFxuXHQgICAgICBsZW5ndGggPSByZXN1bHQubGVuZ3RoO1xuXHRcblx0ICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG5cdCAgICBpZiAoYmFzZUhhcyhvYmplY3QsIGtleSkgJiZcblx0ICAgICAgICAhKHNraXBJbmRleGVzICYmIChrZXkgPT0gJ2xlbmd0aCcgfHwgaXNJbmRleChrZXksIGxlbmd0aCkpKSAmJlxuXHQgICAgICAgICEoaXNQcm90byAmJiBrZXkgPT0gJ2NvbnN0cnVjdG9yJykpIHtcblx0ICAgICAgcmVzdWx0LnB1c2goa2V5KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBrZXlzO1xuXG5cbi8qKiovIH0sXG4vKiA0MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHRvRmluaXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTEpO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYW4gaW50ZWdlci5cblx0ICpcblx0ICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGxvb3NlbHkgYmFzZWQgb25cblx0ICogW2BUb0ludGVnZXJgXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtdG9pbnRlZ2VyKS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29udmVydGVkIGludGVnZXIuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8udG9JbnRlZ2VyKDMuMik7XG5cdCAqIC8vID0+IDNcblx0ICpcblx0ICogXy50b0ludGVnZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG5cdCAqIC8vID0+IDBcblx0ICpcblx0ICogXy50b0ludGVnZXIoSW5maW5pdHkpO1xuXHQgKiAvLyA9PiAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOFxuXHQgKlxuXHQgKiBfLnRvSW50ZWdlcignMy4yJyk7XG5cdCAqIC8vID0+IDNcblx0ICovXG5cdGZ1bmN0aW9uIHRvSW50ZWdlcih2YWx1ZSkge1xuXHQgIHZhciByZXN1bHQgPSB0b0Zpbml0ZSh2YWx1ZSksXG5cdCAgICAgIHJlbWFpbmRlciA9IHJlc3VsdCAlIDE7XG5cdFxuXHQgIHJldHVybiByZXN1bHQgPT09IHJlc3VsdCA/IChyZW1haW5kZXIgPyByZXN1bHQgLSByZW1haW5kZXIgOiByZXN1bHQpIDogMDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB0b0ludGVnZXI7XG5cblxuLyoqKi8gfSxcbi8qIDQyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpLFxuXHQgICAgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpLFxuXHQgICAgaXNTeW1ib2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdC8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xuXHR2YXIgTkFOID0gMCAvIDA7XG5cdFxuXHQvKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLiAqL1xuXHR2YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgYmFkIHNpZ25lZCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xuXHR2YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IGJpbmFyeSBzdHJpbmcgdmFsdWVzLiAqL1xuXHR2YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBvY3RhbCBzdHJpbmcgdmFsdWVzLiAqL1xuXHR2YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblx0XG5cdC8qKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB3aXRob3V0IGEgZGVwZW5kZW5jeSBvbiBgcm9vdGAuICovXG5cdHZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoMy4yKTtcblx0ICogLy8gPT4gMy4yXG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG5cdCAqIC8vID0+IDVlLTMyNFxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcblx0ICogLy8gPT4gSW5maW5pdHlcblx0ICpcblx0ICogXy50b051bWJlcignMy4yJyk7XG5cdCAqIC8vID0+IDMuMlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcblx0ICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfVxuXHQgIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiBOQU47XG5cdCAgfVxuXHQgIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcblx0ICAgIHZhciBvdGhlciA9IGlzRnVuY3Rpb24odmFsdWUudmFsdWVPZikgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcblx0ICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7XG5cdCAgfVxuXHQgIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuXHQgIH1cblx0ICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCAnJyk7XG5cdCAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcblx0ICByZXR1cm4gKGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSlcblx0ICAgID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KVxuXHQgICAgOiAocmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gdG9OdW1iZXI7XG5cblxuLyoqKi8gfSxcbi8qIDQzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsLCBwcm9jZXNzKSB7LyohXG5cdCAqIFZ1ZS5qcyB2MS4wLjI2XG5cdCAqIChjKSAyMDE2IEV2YW4gWW91XG5cdCAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGZ1bmN0aW9uIHNldChvYmosIGtleSwgdmFsKSB7XG5cdCAgaWYgKGhhc093bihvYmosIGtleSkpIHtcblx0ICAgIG9ialtrZXldID0gdmFsO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBpZiAob2JqLl9pc1Z1ZSkge1xuXHQgICAgc2V0KG9iai5fZGF0YSwga2V5LCB2YWwpO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgb2IgPSBvYmouX19vYl9fO1xuXHQgIGlmICghb2IpIHtcblx0ICAgIG9ialtrZXldID0gdmFsO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBvYi5jb252ZXJ0KGtleSwgdmFsKTtcblx0ICBvYi5kZXAubm90aWZ5KCk7XG5cdCAgaWYgKG9iLnZtcykge1xuXHQgICAgdmFyIGkgPSBvYi52bXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YXIgdm0gPSBvYi52bXNbaV07XG5cdCAgICAgIHZtLl9wcm94eShrZXkpO1xuXHQgICAgICB2bS5fZGlnZXN0KCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB2YWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZWxldGUgYSBwcm9wZXJ0eSBhbmQgdHJpZ2dlciBjaGFuZ2UgaWYgbmVjZXNzYXJ5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkZWwob2JqLCBrZXkpIHtcblx0ICBpZiAoIWhhc093bihvYmosIGtleSkpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgZGVsZXRlIG9ialtrZXldO1xuXHQgIHZhciBvYiA9IG9iai5fX29iX187XG5cdCAgaWYgKCFvYikge1xuXHQgICAgaWYgKG9iai5faXNWdWUpIHtcblx0ICAgICAgZGVsZXRlIG9iai5fZGF0YVtrZXldO1xuXHQgICAgICBvYmouX2RpZ2VzdCgpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBvYi5kZXAubm90aWZ5KCk7XG5cdCAgaWYgKG9iLnZtcykge1xuXHQgICAgdmFyIGkgPSBvYi52bXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YXIgdm0gPSBvYi52bXNbaV07XG5cdCAgICAgIHZtLl91bnByb3h5KGtleSk7XG5cdCAgICAgIHZtLl9kaWdlc3QoKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cdC8qKlxuXHQgKiBDaGVjayB3aGV0aGVyIHRoZSBvYmplY3QgaGFzIHRoZSBwcm9wZXJ0eS5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaGFzT3duKG9iaiwga2V5KSB7XG5cdCAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZXhwcmVzc2lvbiBpcyBhIGxpdGVyYWwgdmFsdWUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHR2YXIgbGl0ZXJhbFZhbHVlUkUgPSAvXlxccz8odHJ1ZXxmYWxzZXwtP1tcXGRcXC5dK3wnW14nXSonfFwiW15cIl0qXCIpXFxzPyQvO1xuXHRcblx0ZnVuY3Rpb24gaXNMaXRlcmFsKGV4cCkge1xuXHQgIHJldHVybiBsaXRlcmFsVmFsdWVSRS50ZXN0KGV4cCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhIHN0cmluZyBzdGFydHMgd2l0aCAkIG9yIF9cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzUmVzZXJ2ZWQoc3RyKSB7XG5cdCAgdmFyIGMgPSAoc3RyICsgJycpLmNoYXJDb2RlQXQoMCk7XG5cdCAgcmV0dXJuIGMgPT09IDB4MjQgfHwgYyA9PT0gMHg1Rjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEd1YXJkIHRleHQgb3V0cHV0LCBtYWtlIHN1cmUgdW5kZWZpbmVkIG91dHB1dHNcblx0ICogZW1wdHkgc3RyaW5nXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIF90b1N0cmluZyh2YWx1ZSkge1xuXHQgIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZS50b1N0cmluZygpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgYW5kIGNvbnZlcnQgcG9zc2libGUgbnVtZXJpYyBzdHJpbmdzIHRvIG51bWJlcnNcblx0ICogYmVmb3JlIHNldHRpbmcgYmFjayB0byBkYXRhXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybiB7KnxOdW1iZXJ9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcblx0ICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgcGFyc2VkID0gTnVtYmVyKHZhbHVlKTtcblx0ICAgIHJldHVybiBpc05hTihwYXJzZWQpID8gdmFsdWUgOiBwYXJzZWQ7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBzdHJpbmcgYm9vbGVhbiBsaXRlcmFscyBpbnRvIHJlYWwgYm9vbGVhbnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybiB7KnxCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRvQm9vbGVhbih2YWx1ZSkge1xuXHQgIHJldHVybiB2YWx1ZSA9PT0gJ3RydWUnID8gdHJ1ZSA6IHZhbHVlID09PSAnZmFsc2UnID8gZmFsc2UgOiB2YWx1ZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFN0cmlwIHF1b3RlcyBmcm9tIGEgc3RyaW5nXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHJldHVybiB7U3RyaW5nIHwgZmFsc2V9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc3RyaXBRdW90ZXMoc3RyKSB7XG5cdCAgdmFyIGEgPSBzdHIuY2hhckNvZGVBdCgwKTtcblx0ICB2YXIgYiA9IHN0ci5jaGFyQ29kZUF0KHN0ci5sZW5ndGggLSAxKTtcblx0ICByZXR1cm4gYSA9PT0gYiAmJiAoYSA9PT0gMHgyMiB8fCBhID09PSAweDI3KSA/IHN0ci5zbGljZSgxLCAtMSkgOiBzdHI7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDYW1lbGl6ZSBhIGh5cGhlbi1kZWxtaXRlZCBzdHJpbmcuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdHZhciBjYW1lbGl6ZVJFID0gLy0oXFx3KS9nO1xuXHRcblx0ZnVuY3Rpb24gY2FtZWxpemUoc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKGNhbWVsaXplUkUsIHRvVXBwZXIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b1VwcGVyKF8sIGMpIHtcblx0ICByZXR1cm4gYyA/IGMudG9VcHBlckNhc2UoKSA6ICcnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSHlwaGVuYXRlIGEgY2FtZWxDYXNlIHN0cmluZy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0dmFyIGh5cGhlbmF0ZVJFID0gLyhbYS16XFxkXSkoW0EtWl0pL2c7XG5cdFxuXHRmdW5jdGlvbiBoeXBoZW5hdGUoc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKGh5cGhlbmF0ZVJFLCAnJDEtJDInKS50b0xvd2VyQ2FzZSgpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgaHlwaGVuL3VuZGVyc2NvcmUvc2xhc2ggZGVsaW1pdGVyZWQgbmFtZXMgaW50b1xuXHQgKiBjYW1lbGl6ZWQgY2xhc3NOYW1lcy5cblx0ICpcblx0ICogZS5nLiBteS1jb21wb25lbnQgPT4gTXlDb21wb25lbnRcblx0ICogICAgICBzb21lX2Vsc2UgICAgPT4gU29tZUVsc2Vcblx0ICogICAgICBzb21lL2NvbXAgICAgPT4gU29tZUNvbXBcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0dmFyIGNsYXNzaWZ5UkUgPSAvKD86XnxbLV9cXC9dKShcXHcpL2c7XG5cdFxuXHRmdW5jdGlvbiBjbGFzc2lmeShzdHIpIHtcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UoY2xhc3NpZnlSRSwgdG9VcHBlcik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTaW1wbGUgYmluZCwgZmFzdGVyIHRoYW4gbmF0aXZlXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjdHhcblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYmluZChmbiwgY3R4KSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG5cdCAgICB2YXIgbCA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cdCAgICByZXR1cm4gbCA/IGwgPiAxID8gZm4uYXBwbHkoY3R4LCBhcmd1bWVudHMpIDogZm4uY2FsbChjdHgsIGEpIDogZm4uY2FsbChjdHgpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IGFuIEFycmF5LWxpa2Ugb2JqZWN0IHRvIGEgcmVhbCBBcnJheS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheS1saWtlfSBsaXN0XG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbc3RhcnRdIC0gc3RhcnQgaW5kZXhcblx0ICogQHJldHVybiB7QXJyYXl9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdG9BcnJheShsaXN0LCBzdGFydCkge1xuXHQgIHN0YXJ0ID0gc3RhcnQgfHwgMDtcblx0ICB2YXIgaSA9IGxpc3QubGVuZ3RoIC0gc3RhcnQ7XG5cdCAgdmFyIHJldCA9IG5ldyBBcnJheShpKTtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICByZXRbaV0gPSBsaXN0W2kgKyBzdGFydF07XG5cdCAgfVxuXHQgIHJldHVybiByZXQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNaXggcHJvcGVydGllcyBpbnRvIHRhcmdldCBvYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB0b1xuXHQgKiBAcGFyYW0ge09iamVjdH0gZnJvbVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGV4dGVuZCh0bywgZnJvbSkge1xuXHQgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZnJvbSk7XG5cdCAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICB0b1trZXlzW2ldXSA9IGZyb21ba2V5c1tpXV07XG5cdCAgfVxuXHQgIHJldHVybiB0bztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFF1aWNrIG9iamVjdCBjaGVjayAtIHRoaXMgaXMgcHJpbWFyaWx5IHVzZWQgdG8gdGVsbFxuXHQgKiBPYmplY3RzIGZyb20gcHJpbWl0aXZlIHZhbHVlcyB3aGVuIHdlIGtub3cgdGhlIHZhbHVlXG5cdCAqIGlzIGEgSlNPTi1jb21wbGlhbnQgdHlwZS5cblx0ICpcblx0ICogQHBhcmFtIHsqfSBvYmpcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc09iamVjdChvYmopIHtcblx0ICByZXR1cm4gb2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU3RyaWN0IG9iamVjdCB0eXBlIGNoZWNrLiBPbmx5IHJldHVybnMgdHJ1ZVxuXHQgKiBmb3IgcGxhaW4gSmF2YVNjcmlwdCBvYmplY3RzLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IG9ialxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdHZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cdHZhciBPQkpFQ1RfU1RSSU5HID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cdFxuXHRmdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iaikge1xuXHQgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09IE9CSkVDVF9TVFJJTkc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBcnJheSB0eXBlIGNoZWNrLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IG9ialxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblx0XG5cdC8qKlxuXHQgKiBEZWZpbmUgYSBwcm9wZXJ0eS5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW2VudW1lcmFibGVdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGVmKG9iaiwga2V5LCB2YWwsIGVudW1lcmFibGUpIHtcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcblx0ICAgIHZhbHVlOiB2YWwsXG5cdCAgICBlbnVtZXJhYmxlOiAhIWVudW1lcmFibGUsXG5cdCAgICB3cml0YWJsZTogdHJ1ZSxcblx0ICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGVib3VuY2UgYSBmdW5jdGlvbiBzbyBpdCBvbmx5IGdldHMgY2FsbGVkIGFmdGVyIHRoZVxuXHQgKiBpbnB1dCBzdG9wcyBhcnJpdmluZyBhZnRlciB0aGUgZ2l2ZW4gd2FpdCBwZXJpb2QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmNcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHdhaXRcblx0ICogQHJldHVybiB7RnVuY3Rpb259IC0gdGhlIGRlYm91bmNlZCBmdW5jdGlvblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIF9kZWJvdW5jZShmdW5jLCB3YWl0KSB7XG5cdCAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xuXHQgIHZhciBsYXRlciA9IGZ1bmN0aW9uIGxhdGVyKCkge1xuXHQgICAgdmFyIGxhc3QgPSBEYXRlLm5vdygpIC0gdGltZXN0YW1wO1xuXHQgICAgaWYgKGxhc3QgPCB3YWl0ICYmIGxhc3QgPj0gMCkge1xuXHQgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGltZW91dCA9IG51bGw7XG5cdCAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdCAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuXHQgICAgfVxuXHQgIH07XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIGNvbnRleHQgPSB0aGlzO1xuXHQgICAgYXJncyA9IGFyZ3VtZW50cztcblx0ICAgIHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG5cdCAgICBpZiAoIXRpbWVvdXQpIHtcblx0ICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogTWFudWFsIGluZGV4T2YgYmVjYXVzZSBpdCdzIHNsaWdodGx5IGZhc3RlciB0aGFuXG5cdCAqIG5hdGl2ZS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyXG5cdCAqIEBwYXJhbSB7Kn0gb2JqXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaW5kZXhPZihhcnIsIG9iaikge1xuXHQgIHZhciBpID0gYXJyLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBpZiAoYXJyW2ldID09PSBvYmopIHJldHVybiBpO1xuXHQgIH1cblx0ICByZXR1cm4gLTE7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNYWtlIGEgY2FuY2VsbGFibGUgdmVyc2lvbiBvZiBhbiBhc3luYyBjYWxsYmFjay5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2FuY2VsbGFibGUoZm4pIHtcblx0ICB2YXIgY2IgPSBmdW5jdGlvbiBjYigpIHtcblx0ICAgIGlmICghY2IuY2FuY2VsbGVkKSB7XG5cdCAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHQgIH07XG5cdCAgY2IuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgY2IuY2FuY2VsbGVkID0gdHJ1ZTtcblx0ICB9O1xuXHQgIHJldHVybiBjYjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIHR3byB2YWx1ZXMgYXJlIGxvb3NlbHkgZXF1YWwgLSB0aGF0IGlzLFxuXHQgKiBpZiB0aGV5IGFyZSBwbGFpbiBvYmplY3RzLCBkbyB0aGV5IGhhdmUgdGhlIHNhbWUgc2hhcGU/XG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gYVxuXHQgKiBAcGFyYW0geyp9IGJcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBsb29zZUVxdWFsKGEsIGIpIHtcblx0ICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cblx0ICByZXR1cm4gYSA9PSBiIHx8IChpc09iamVjdChhKSAmJiBpc09iamVjdChiKSA/IEpTT04uc3RyaW5naWZ5KGEpID09PSBKU09OLnN0cmluZ2lmeShiKSA6IGZhbHNlKTtcblx0ICAvKiBlc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xuXHR9XG5cdFxuXHR2YXIgaGFzUHJvdG8gPSAoJ19fcHJvdG9fXycgaW4ge30pO1xuXHRcblx0Ly8gQnJvd3NlciBlbnZpcm9ubWVudCBzbmlmZmluZ1xuXHR2YXIgaW5Ccm93c2VyID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHdpbmRvdykgIT09ICdbb2JqZWN0IE9iamVjdF0nO1xuXHRcblx0Ly8gZGV0ZWN0IGRldnRvb2xzXG5cdHZhciBkZXZ0b29scyA9IGluQnJvd3NlciAmJiB3aW5kb3cuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXztcblx0XG5cdC8vIFVBIHNuaWZmaW5nIGZvciB3b3JraW5nIGFyb3VuZCBicm93c2VyLXNwZWNpZmljIHF1aXJrc1xuXHR2YXIgVUEgPSBpbkJyb3dzZXIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcblx0dmFyIGlzSUUgPSBVQSAmJiBVQS5pbmRleE9mKCd0cmlkZW50JykgPiAwO1xuXHR2YXIgaXNJRTkgPSBVQSAmJiBVQS5pbmRleE9mKCdtc2llIDkuMCcpID4gMDtcblx0dmFyIGlzQW5kcm9pZCA9IFVBICYmIFVBLmluZGV4T2YoJ2FuZHJvaWQnKSA+IDA7XG5cdHZhciBpc0lvcyA9IFVBICYmIC8oaXBob25lfGlwYWR8aXBvZHxpb3MpL2kudGVzdChVQSk7XG5cdHZhciBpb3NWZXJzaW9uTWF0Y2ggPSBpc0lvcyAmJiBVQS5tYXRjaCgvb3MgKFtcXGRfXSspLyk7XG5cdHZhciBpb3NWZXJzaW9uID0gaW9zVmVyc2lvbk1hdGNoICYmIGlvc1ZlcnNpb25NYXRjaFsxXS5zcGxpdCgnXycpO1xuXHRcblx0Ly8gZGV0ZWN0aW5nIGlPUyBVSVdlYlZpZXcgYnkgaW5kZXhlZERCXG5cdHZhciBoYXNNdXRhdGlvbk9ic2VydmVyQnVnID0gaW9zVmVyc2lvbiAmJiBOdW1iZXIoaW9zVmVyc2lvblswXSkgPj0gOSAmJiBOdW1iZXIoaW9zVmVyc2lvblsxXSkgPj0gMyAmJiAhd2luZG93LmluZGV4ZWREQjtcblx0XG5cdHZhciB0cmFuc2l0aW9uUHJvcCA9IHVuZGVmaW5lZDtcblx0dmFyIHRyYW5zaXRpb25FbmRFdmVudCA9IHVuZGVmaW5lZDtcblx0dmFyIGFuaW1hdGlvblByb3AgPSB1bmRlZmluZWQ7XG5cdHZhciBhbmltYXRpb25FbmRFdmVudCA9IHVuZGVmaW5lZDtcblx0XG5cdC8vIFRyYW5zaXRpb24gcHJvcGVydHkvZXZlbnQgc25pZmZpbmdcblx0aWYgKGluQnJvd3NlciAmJiAhaXNJRTkpIHtcblx0ICB2YXIgaXNXZWJraXRUcmFucyA9IHdpbmRvdy5vbnRyYW5zaXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kICE9PSB1bmRlZmluZWQ7XG5cdCAgdmFyIGlzV2Via2l0QW5pbSA9IHdpbmRvdy5vbmFuaW1hdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmIHdpbmRvdy5vbndlYmtpdGFuaW1hdGlvbmVuZCAhPT0gdW5kZWZpbmVkO1xuXHQgIHRyYW5zaXRpb25Qcm9wID0gaXNXZWJraXRUcmFucyA/ICdXZWJraXRUcmFuc2l0aW9uJyA6ICd0cmFuc2l0aW9uJztcblx0ICB0cmFuc2l0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdFRyYW5zID8gJ3dlYmtpdFRyYW5zaXRpb25FbmQnIDogJ3RyYW5zaXRpb25lbmQnO1xuXHQgIGFuaW1hdGlvblByb3AgPSBpc1dlYmtpdEFuaW0gPyAnV2Via2l0QW5pbWF0aW9uJyA6ICdhbmltYXRpb24nO1xuXHQgIGFuaW1hdGlvbkVuZEV2ZW50ID0gaXNXZWJraXRBbmltID8gJ3dlYmtpdEFuaW1hdGlvbkVuZCcgOiAnYW5pbWF0aW9uZW5kJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERlZmVyIGEgdGFzayB0byBleGVjdXRlIGl0IGFzeW5jaHJvbm91c2x5LiBJZGVhbGx5IHRoaXNcblx0ICogc2hvdWxkIGJlIGV4ZWN1dGVkIGFzIGEgbWljcm90YXNrLCBzbyB3ZSBsZXZlcmFnZVxuXHQgKiBNdXRhdGlvbk9ic2VydmVyIGlmIGl0J3MgYXZhaWxhYmxlLCBhbmQgZmFsbGJhY2sgdG9cblx0ICogc2V0VGltZW91dCgwKS5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICogQHBhcmFtIHtPYmplY3R9IGN0eFxuXHQgKi9cblx0XG5cdHZhciBuZXh0VGljayA9IChmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGNhbGxiYWNrcyA9IFtdO1xuXHQgIHZhciBwZW5kaW5nID0gZmFsc2U7XG5cdCAgdmFyIHRpbWVyRnVuYztcblx0ICBmdW5jdGlvbiBuZXh0VGlja0hhbmRsZXIoKSB7XG5cdCAgICBwZW5kaW5nID0gZmFsc2U7XG5cdCAgICB2YXIgY29waWVzID0gY2FsbGJhY2tzLnNsaWNlKDApO1xuXHQgICAgY2FsbGJhY2tzID0gW107XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvcGllcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICBjb3BpZXNbaV0oKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICh0eXBlb2YgTXV0YXRpb25PYnNlcnZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgIWhhc011dGF0aW9uT2JzZXJ2ZXJCdWcpIHtcblx0ICAgIHZhciBjb3VudGVyID0gMTtcblx0ICAgIHZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKG5leHRUaWNrSGFuZGxlcik7XG5cdCAgICB2YXIgdGV4dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjb3VudGVyKTtcblx0ICAgIG9ic2VydmVyLm9ic2VydmUodGV4dE5vZGUsIHtcblx0ICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZVxuXHQgICAgfSk7XG5cdCAgICB0aW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGNvdW50ZXIgPSAoY291bnRlciArIDEpICUgMjtcblx0ICAgICAgdGV4dE5vZGUuZGF0YSA9IGNvdW50ZXI7XG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyB3ZWJwYWNrIGF0dGVtcHRzIHRvIGluamVjdCBhIHNoaW0gZm9yIHNldEltbWVkaWF0ZVxuXHQgICAgLy8gaWYgaXQgaXMgdXNlZCBhcyBhIGdsb2JhbCwgc28gd2UgaGF2ZSB0byB3b3JrIGFyb3VuZCB0aGF0IHRvXG5cdCAgICAvLyBhdm9pZCBidW5kbGluZyB1bm5lY2Vzc2FyeSBjb2RlLlxuXHQgICAgdmFyIGNvbnRleHQgPSBpbkJyb3dzZXIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHt9O1xuXHQgICAgdGltZXJGdW5jID0gY29udGV4dC5zZXRJbW1lZGlhdGUgfHwgc2V0VGltZW91dDtcblx0ICB9XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIChjYiwgY3R4KSB7XG5cdCAgICB2YXIgZnVuYyA9IGN0eCA/IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgY2IuY2FsbChjdHgpO1xuXHQgICAgfSA6IGNiO1xuXHQgICAgY2FsbGJhY2tzLnB1c2goZnVuYyk7XG5cdCAgICBpZiAocGVuZGluZykgcmV0dXJuO1xuXHQgICAgcGVuZGluZyA9IHRydWU7XG5cdCAgICB0aW1lckZ1bmMobmV4dFRpY2tIYW5kbGVyLCAwKTtcblx0ICB9O1xuXHR9KSgpO1xuXHRcblx0dmFyIF9TZXQgPSB1bmRlZmluZWQ7XG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHRpZiAodHlwZW9mIFNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgU2V0LnRvU3RyaW5nKCkubWF0Y2goL25hdGl2ZSBjb2RlLykpIHtcblx0ICAvLyB1c2UgbmF0aXZlIFNldCB3aGVuIGF2YWlsYWJsZS5cblx0ICBfU2V0ID0gU2V0O1xuXHR9IGVsc2Uge1xuXHQgIC8vIGEgbm9uLXN0YW5kYXJkIFNldCBwb2x5ZmlsbCB0aGF0IG9ubHkgd29ya3Mgd2l0aCBwcmltaXRpdmUga2V5cy5cblx0ICBfU2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5zZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIH07XG5cdCAgX1NldC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgcmV0dXJuIHRoaXMuc2V0W2tleV0gIT09IHVuZGVmaW5lZDtcblx0ICB9O1xuXHQgIF9TZXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIHRoaXMuc2V0W2tleV0gPSAxO1xuXHQgIH07XG5cdCAgX1NldC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gQ2FjaGUobGltaXQpIHtcblx0ICB0aGlzLnNpemUgPSAwO1xuXHQgIHRoaXMubGltaXQgPSBsaW1pdDtcblx0ICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSB1bmRlZmluZWQ7XG5cdCAgdGhpcy5fa2V5bWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0fVxuXHRcblx0dmFyIHAgPSBDYWNoZS5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogUHV0IDx2YWx1ZT4gaW50byB0aGUgY2FjaGUgYXNzb2NpYXRlZCB3aXRoIDxrZXk+LlxuXHQgKiBSZXR1cm5zIHRoZSBlbnRyeSB3aGljaCB3YXMgcmVtb3ZlZCB0byBtYWtlIHJvb20gZm9yXG5cdCAqIHRoZSBuZXcgZW50cnkuIE90aGVyd2lzZSB1bmRlZmluZWQgaXMgcmV0dXJuZWQuXG5cdCAqIChpLmUuIGlmIHRoZXJlIHdhcyBlbm91Z2ggcm9vbSBhbHJlYWR5KS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEByZXR1cm4ge0VudHJ5fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRwLnB1dCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgdmFyIHJlbW92ZWQ7XG5cdFxuXHQgIHZhciBlbnRyeSA9IHRoaXMuZ2V0KGtleSwgdHJ1ZSk7XG5cdCAgaWYgKCFlbnRyeSkge1xuXHQgICAgaWYgKHRoaXMuc2l6ZSA9PT0gdGhpcy5saW1pdCkge1xuXHQgICAgICByZW1vdmVkID0gdGhpcy5zaGlmdCgpO1xuXHQgICAgfVxuXHQgICAgZW50cnkgPSB7XG5cdCAgICAgIGtleToga2V5XG5cdCAgICB9O1xuXHQgICAgdGhpcy5fa2V5bWFwW2tleV0gPSBlbnRyeTtcblx0ICAgIGlmICh0aGlzLnRhaWwpIHtcblx0ICAgICAgdGhpcy50YWlsLm5ld2VyID0gZW50cnk7XG5cdCAgICAgIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5oZWFkID0gZW50cnk7XG5cdCAgICB9XG5cdCAgICB0aGlzLnRhaWwgPSBlbnRyeTtcblx0ICAgIHRoaXMuc2l6ZSsrO1xuXHQgIH1cblx0ICBlbnRyeS52YWx1ZSA9IHZhbHVlO1xuXHRcblx0ICByZXR1cm4gcmVtb3ZlZDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBQdXJnZSB0aGUgbGVhc3QgcmVjZW50bHkgdXNlZCAob2xkZXN0KSBlbnRyeSBmcm9tIHRoZVxuXHQgKiBjYWNoZS4gUmV0dXJucyB0aGUgcmVtb3ZlZCBlbnRyeSBvciB1bmRlZmluZWQgaWYgdGhlXG5cdCAqIGNhY2hlIHdhcyBlbXB0eS5cblx0ICovXG5cdFxuXHRwLnNoaWZ0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBlbnRyeSA9IHRoaXMuaGVhZDtcblx0ICBpZiAoZW50cnkpIHtcblx0ICAgIHRoaXMuaGVhZCA9IHRoaXMuaGVhZC5uZXdlcjtcblx0ICAgIHRoaXMuaGVhZC5vbGRlciA9IHVuZGVmaW5lZDtcblx0ICAgIGVudHJ5Lm5ld2VyID0gZW50cnkub2xkZXIgPSB1bmRlZmluZWQ7XG5cdCAgICB0aGlzLl9rZXltYXBbZW50cnkua2V5XSA9IHVuZGVmaW5lZDtcblx0ICAgIHRoaXMuc2l6ZS0tO1xuXHQgIH1cblx0ICByZXR1cm4gZW50cnk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogR2V0IGFuZCByZWdpc3RlciByZWNlbnQgdXNlIG9mIDxrZXk+LiBSZXR1cm5zIHRoZSB2YWx1ZVxuXHQgKiBhc3NvY2lhdGVkIHdpdGggPGtleT4gb3IgdW5kZWZpbmVkIGlmIG5vdCBpbiBjYWNoZS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHJldHVybkVudHJ5XG5cdCAqIEByZXR1cm4ge0VudHJ5fCp9XG5cdCAqL1xuXHRcblx0cC5nZXQgPSBmdW5jdGlvbiAoa2V5LCByZXR1cm5FbnRyeSkge1xuXHQgIHZhciBlbnRyeSA9IHRoaXMuX2tleW1hcFtrZXldO1xuXHQgIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG5cdCAgaWYgKGVudHJ5ID09PSB0aGlzLnRhaWwpIHtcblx0ICAgIHJldHVybiByZXR1cm5FbnRyeSA/IGVudHJ5IDogZW50cnkudmFsdWU7XG5cdCAgfVxuXHQgIC8vIEhFQUQtLS0tLS0tLS0tLS0tLVRBSUxcblx0ICAvLyAgIDwub2xkZXIgICAubmV3ZXI+XG5cdCAgLy8gIDwtLS0gYWRkIGRpcmVjdGlvbiAtLVxuXHQgIC8vICAgQSAgQiAgQyAgPEQ+ICBFXG5cdCAgaWYgKGVudHJ5Lm5ld2VyKSB7XG5cdCAgICBpZiAoZW50cnkgPT09IHRoaXMuaGVhZCkge1xuXHQgICAgICB0aGlzLmhlYWQgPSBlbnRyeS5uZXdlcjtcblx0ICAgIH1cblx0ICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gZW50cnkub2xkZXI7IC8vIEMgPC0tIEUuXG5cdCAgfVxuXHQgIGlmIChlbnRyeS5vbGRlcikge1xuXHQgICAgZW50cnkub2xkZXIubmV3ZXIgPSBlbnRyeS5uZXdlcjsgLy8gQy4gLS0+IEVcblx0ICB9XG5cdCAgZW50cnkubmV3ZXIgPSB1bmRlZmluZWQ7IC8vIEQgLS14XG5cdCAgZW50cnkub2xkZXIgPSB0aGlzLnRhaWw7IC8vIEQuIC0tPiBFXG5cdCAgaWYgKHRoaXMudGFpbCkge1xuXHQgICAgdGhpcy50YWlsLm5ld2VyID0gZW50cnk7IC8vIEUuIDwtLSBEXG5cdCAgfVxuXHQgIHRoaXMudGFpbCA9IGVudHJ5O1xuXHQgIHJldHVybiByZXR1cm5FbnRyeSA/IGVudHJ5IDogZW50cnkudmFsdWU7XG5cdH07XG5cdFxuXHR2YXIgY2FjaGUkMSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0dmFyIGZpbHRlclRva2VuUkUgPSAvW15cXHMnXCJdK3wnW14nXSonfFwiW15cIl0qXCIvZztcblx0dmFyIHJlc2VydmVkQXJnUkUgPSAvXmluJHxeLT9cXGQrLztcblx0XG5cdC8qKlxuXHQgKiBQYXJzZXIgc3RhdGVcblx0ICovXG5cdFxuXHR2YXIgc3RyO1xuXHR2YXIgZGlyO1xuXHR2YXIgYztcblx0dmFyIHByZXY7XG5cdHZhciBpO1xuXHR2YXIgbDtcblx0dmFyIGxhc3RGaWx0ZXJJbmRleDtcblx0dmFyIGluU2luZ2xlO1xuXHR2YXIgaW5Eb3VibGU7XG5cdHZhciBjdXJseTtcblx0dmFyIHNxdWFyZTtcblx0dmFyIHBhcmVuO1xuXHQvKipcblx0ICogUHVzaCBhIGZpbHRlciB0byB0aGUgY3VycmVudCBkaXJlY3RpdmUgb2JqZWN0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHVzaEZpbHRlcigpIHtcblx0ICB2YXIgZXhwID0gc3RyLnNsaWNlKGxhc3RGaWx0ZXJJbmRleCwgaSkudHJpbSgpO1xuXHQgIHZhciBmaWx0ZXI7XG5cdCAgaWYgKGV4cCkge1xuXHQgICAgZmlsdGVyID0ge307XG5cdCAgICB2YXIgdG9rZW5zID0gZXhwLm1hdGNoKGZpbHRlclRva2VuUkUpO1xuXHQgICAgZmlsdGVyLm5hbWUgPSB0b2tlbnNbMF07XG5cdCAgICBpZiAodG9rZW5zLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgZmlsdGVyLmFyZ3MgPSB0b2tlbnMuc2xpY2UoMSkubWFwKHByb2Nlc3NGaWx0ZXJBcmcpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoZmlsdGVyKSB7XG5cdCAgICAoZGlyLmZpbHRlcnMgPSBkaXIuZmlsdGVycyB8fCBbXSkucHVzaChmaWx0ZXIpO1xuXHQgIH1cblx0ICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGFyZ3VtZW50IGlzIGR5bmFtaWMgYW5kIHN0cmlwIHF1b3Rlcy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGFyZ1xuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc0ZpbHRlckFyZyhhcmcpIHtcblx0ICBpZiAocmVzZXJ2ZWRBcmdSRS50ZXN0KGFyZykpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHZhbHVlOiB0b051bWJlcihhcmcpLFxuXHQgICAgICBkeW5hbWljOiBmYWxzZVxuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHN0cmlwcGVkID0gc3RyaXBRdW90ZXMoYXJnKTtcblx0ICAgIHZhciBkeW5hbWljID0gc3RyaXBwZWQgPT09IGFyZztcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHZhbHVlOiBkeW5hbWljID8gYXJnIDogc3RyaXBwZWQsXG5cdCAgICAgIGR5bmFtaWM6IGR5bmFtaWNcblx0ICAgIH07XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2UgYSBkaXJlY3RpdmUgdmFsdWUgYW5kIGV4dHJhY3QgdGhlIGV4cHJlc3Npb25cblx0ICogYW5kIGl0cyBmaWx0ZXJzIGludG8gYSBkZXNjcmlwdG9yLlxuXHQgKlxuXHQgKiBFeGFtcGxlOlxuXHQgKlxuXHQgKiBcImEgKyAxIHwgdXBwZXJjYXNlXCIgd2lsbCB5aWVsZDpcblx0ICoge1xuXHQgKiAgIGV4cHJlc3Npb246ICdhICsgMScsXG5cdCAqICAgZmlsdGVyczogW1xuXHQgKiAgICAgeyBuYW1lOiAndXBwZXJjYXNlJywgYXJnczogbnVsbCB9XG5cdCAqICAgXVxuXHQgKiB9XG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZURpcmVjdGl2ZShzKSB7XG5cdCAgdmFyIGhpdCA9IGNhY2hlJDEuZ2V0KHMpO1xuXHQgIGlmIChoaXQpIHtcblx0ICAgIHJldHVybiBoaXQ7XG5cdCAgfVxuXHRcblx0ICAvLyByZXNldCBwYXJzZXIgc3RhdGVcblx0ICBzdHIgPSBzO1xuXHQgIGluU2luZ2xlID0gaW5Eb3VibGUgPSBmYWxzZTtcblx0ICBjdXJseSA9IHNxdWFyZSA9IHBhcmVuID0gMDtcblx0ICBsYXN0RmlsdGVySW5kZXggPSAwO1xuXHQgIGRpciA9IHt9O1xuXHRcblx0ICBmb3IgKGkgPSAwLCBsID0gc3RyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgcHJldiA9IGM7XG5cdCAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG5cdCAgICBpZiAoaW5TaW5nbGUpIHtcblx0ICAgICAgLy8gY2hlY2sgc2luZ2xlIHF1b3RlXG5cdCAgICAgIGlmIChjID09PSAweDI3ICYmIHByZXYgIT09IDB4NUMpIGluU2luZ2xlID0gIWluU2luZ2xlO1xuXHQgICAgfSBlbHNlIGlmIChpbkRvdWJsZSkge1xuXHQgICAgICAvLyBjaGVjayBkb3VibGUgcXVvdGVcblx0ICAgICAgaWYgKGMgPT09IDB4MjIgJiYgcHJldiAhPT0gMHg1QykgaW5Eb3VibGUgPSAhaW5Eb3VibGU7XG5cdCAgICB9IGVsc2UgaWYgKGMgPT09IDB4N0MgJiYgLy8gcGlwZVxuXHQgICAgc3RyLmNoYXJDb2RlQXQoaSArIDEpICE9PSAweDdDICYmIHN0ci5jaGFyQ29kZUF0KGkgLSAxKSAhPT0gMHg3Qykge1xuXHQgICAgICBpZiAoZGlyLmV4cHJlc3Npb24gPT0gbnVsbCkge1xuXHQgICAgICAgIC8vIGZpcnN0IGZpbHRlciwgZW5kIG9mIGV4cHJlc3Npb25cblx0ICAgICAgICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTtcblx0ICAgICAgICBkaXIuZXhwcmVzc2lvbiA9IHN0ci5zbGljZSgwLCBpKS50cmltKCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gYWxyZWFkeSBoYXMgZmlsdGVyXG5cdCAgICAgICAgcHVzaEZpbHRlcigpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzd2l0Y2ggKGMpIHtcblx0ICAgICAgICBjYXNlIDB4MjI6XG5cdCAgICAgICAgICBpbkRvdWJsZSA9IHRydWU7YnJlYWs7IC8vIFwiXG5cdCAgICAgICAgY2FzZSAweDI3OlxuXHQgICAgICAgICAgaW5TaW5nbGUgPSB0cnVlO2JyZWFrOyAvLyAnXG5cdCAgICAgICAgY2FzZSAweDI4OlxuXHQgICAgICAgICAgcGFyZW4rKzticmVhazsgLy8gKFxuXHQgICAgICAgIGNhc2UgMHgyOTpcblx0ICAgICAgICAgIHBhcmVuLS07YnJlYWs7IC8vIClcblx0ICAgICAgICBjYXNlIDB4NUI6XG5cdCAgICAgICAgICBzcXVhcmUrKzticmVhazsgLy8gW1xuXHQgICAgICAgIGNhc2UgMHg1RDpcblx0ICAgICAgICAgIHNxdWFyZS0tO2JyZWFrOyAvLyBdXG5cdCAgICAgICAgY2FzZSAweDdCOlxuXHQgICAgICAgICAgY3VybHkrKzticmVhazsgLy8ge1xuXHQgICAgICAgIGNhc2UgMHg3RDpcblx0ICAgICAgICAgIGN1cmx5LS07YnJlYWs7IC8vIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKGRpci5leHByZXNzaW9uID09IG51bGwpIHtcblx0ICAgIGRpci5leHByZXNzaW9uID0gc3RyLnNsaWNlKDAsIGkpLnRyaW0oKTtcblx0ICB9IGVsc2UgaWYgKGxhc3RGaWx0ZXJJbmRleCAhPT0gMCkge1xuXHQgICAgcHVzaEZpbHRlcigpO1xuXHQgIH1cblx0XG5cdCAgY2FjaGUkMS5wdXQocywgZGlyKTtcblx0ICByZXR1cm4gZGlyO1xuXHR9XG5cdFxuXHR2YXIgZGlyZWN0aXZlID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgcGFyc2VEaXJlY3RpdmU6IHBhcnNlRGlyZWN0aXZlXG5cdH0pO1xuXHRcblx0dmFyIHJlZ2V4RXNjYXBlUkUgPSAvWy0uKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nO1xuXHR2YXIgY2FjaGUgPSB1bmRlZmluZWQ7XG5cdHZhciB0YWdSRSA9IHVuZGVmaW5lZDtcblx0dmFyIGh0bWxSRSA9IHVuZGVmaW5lZDtcblx0LyoqXG5cdCAqIEVzY2FwZSBhIHN0cmluZyBzbyBpdCBjYW4gYmUgdXNlZCBpbiBhIFJlZ0V4cFxuXHQgKiBjb25zdHJ1Y3Rvci5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGVzY2FwZVJlZ2V4KHN0cikge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZShyZWdleEVzY2FwZVJFLCAnXFxcXCQmJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVSZWdleCgpIHtcblx0ICB2YXIgb3BlbiA9IGVzY2FwZVJlZ2V4KGNvbmZpZy5kZWxpbWl0ZXJzWzBdKTtcblx0ICB2YXIgY2xvc2UgPSBlc2NhcGVSZWdleChjb25maWcuZGVsaW1pdGVyc1sxXSk7XG5cdCAgdmFyIHVuc2FmZU9wZW4gPSBlc2NhcGVSZWdleChjb25maWcudW5zYWZlRGVsaW1pdGVyc1swXSk7XG5cdCAgdmFyIHVuc2FmZUNsb3NlID0gZXNjYXBlUmVnZXgoY29uZmlnLnVuc2FmZURlbGltaXRlcnNbMV0pO1xuXHQgIHRhZ1JFID0gbmV3IFJlZ0V4cCh1bnNhZmVPcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyB1bnNhZmVDbG9zZSArICd8JyArIG9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIGNsb3NlLCAnZycpO1xuXHQgIGh0bWxSRSA9IG5ldyBSZWdFeHAoJ14nICsgdW5zYWZlT3BlbiArICcoKD86LnxcXFxcbikrPyknICsgdW5zYWZlQ2xvc2UgKyAnJCcpO1xuXHQgIC8vIHJlc2V0IGNhY2hlXG5cdCAgY2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBhIHRlbXBsYXRlIHRleHQgc3RyaW5nIGludG8gYW4gYXJyYXkgb2YgdG9rZW5zLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuXHQgKiBAcmV0dXJuIHtBcnJheTxPYmplY3Q+IHwgbnVsbH1cblx0ICogICAgICAgICAgICAgICAtIHtTdHJpbmd9IHR5cGVcblx0ICogICAgICAgICAgICAgICAtIHtTdHJpbmd9IHZhbHVlXG5cdCAqICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW2h0bWxdXG5cdCAqICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW29uZVRpbWVdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VUZXh0KHRleHQpIHtcblx0ICBpZiAoIWNhY2hlKSB7XG5cdCAgICBjb21waWxlUmVnZXgoKTtcblx0ICB9XG5cdCAgdmFyIGhpdCA9IGNhY2hlLmdldCh0ZXh0KTtcblx0ICBpZiAoaGl0KSB7XG5cdCAgICByZXR1cm4gaGl0O1xuXHQgIH1cblx0ICBpZiAoIXRhZ1JFLnRlc3QodGV4dCkpIHtcblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0ICB2YXIgdG9rZW5zID0gW107XG5cdCAgdmFyIGxhc3RJbmRleCA9IHRhZ1JFLmxhc3RJbmRleCA9IDA7XG5cdCAgdmFyIG1hdGNoLCBpbmRleCwgaHRtbCwgdmFsdWUsIGZpcnN0LCBvbmVUaW1lO1xuXHQgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgd2hpbGUgKG1hdGNoID0gdGFnUkUuZXhlYyh0ZXh0KSkge1xuXHQgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgaW5kZXggPSBtYXRjaC5pbmRleDtcblx0ICAgIC8vIHB1c2ggdGV4dCB0b2tlblxuXHQgICAgaWYgKGluZGV4ID4gbGFzdEluZGV4KSB7XG5cdCAgICAgIHRva2Vucy5wdXNoKHtcblx0ICAgICAgICB2YWx1ZTogdGV4dC5zbGljZShsYXN0SW5kZXgsIGluZGV4KVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIC8vIHRhZyB0b2tlblxuXHQgICAgaHRtbCA9IGh0bWxSRS50ZXN0KG1hdGNoWzBdKTtcblx0ICAgIHZhbHVlID0gaHRtbCA/IG1hdGNoWzFdIDogbWF0Y2hbMl07XG5cdCAgICBmaXJzdCA9IHZhbHVlLmNoYXJDb2RlQXQoMCk7XG5cdCAgICBvbmVUaW1lID0gZmlyc3QgPT09IDQyOyAvLyAqXG5cdCAgICB2YWx1ZSA9IG9uZVRpbWUgPyB2YWx1ZS5zbGljZSgxKSA6IHZhbHVlO1xuXHQgICAgdG9rZW5zLnB1c2goe1xuXHQgICAgICB0YWc6IHRydWUsXG5cdCAgICAgIHZhbHVlOiB2YWx1ZS50cmltKCksXG5cdCAgICAgIGh0bWw6IGh0bWwsXG5cdCAgICAgIG9uZVRpbWU6IG9uZVRpbWVcblx0ICAgIH0pO1xuXHQgICAgbGFzdEluZGV4ID0gaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7XG5cdCAgfVxuXHQgIGlmIChsYXN0SW5kZXggPCB0ZXh0Lmxlbmd0aCkge1xuXHQgICAgdG9rZW5zLnB1c2goe1xuXHQgICAgICB2YWx1ZTogdGV4dC5zbGljZShsYXN0SW5kZXgpXG5cdCAgICB9KTtcblx0ICB9XG5cdCAgY2FjaGUucHV0KHRleHQsIHRva2Vucyk7XG5cdCAgcmV0dXJuIHRva2Vucztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcm1hdCBhIGxpc3Qgb2YgdG9rZW5zIGludG8gYW4gZXhwcmVzc2lvbi5cblx0ICogZS5nLiB0b2tlbnMgcGFyc2VkIGZyb20gJ2Ege3tifX0gYycgY2FuIGJlIHNlcmlhbGl6ZWRcblx0ICogaW50byBvbmUgc2luZ2xlIGV4cHJlc3Npb24gYXMgJ1wiYSBcIiArIGIgKyBcIiBjXCInLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSB0b2tlbnNcblx0ICogQHBhcmFtIHtWdWV9IFt2bV1cblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRva2Vuc1RvRXhwKHRva2Vucywgdm0pIHtcblx0ICBpZiAodG9rZW5zLmxlbmd0aCA+IDEpIHtcblx0ICAgIHJldHVybiB0b2tlbnMubWFwKGZ1bmN0aW9uICh0b2tlbikge1xuXHQgICAgICByZXR1cm4gZm9ybWF0VG9rZW4odG9rZW4sIHZtKTtcblx0ICAgIH0pLmpvaW4oJysnKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGZvcm1hdFRva2VuKHRva2Vuc1swXSwgdm0sIHRydWUpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcm1hdCBhIHNpbmdsZSB0b2tlbi5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHRva2VuXG5cdCAqIEBwYXJhbSB7VnVlfSBbdm1dXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW3NpbmdsZV1cblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFRva2VuKHRva2VuLCB2bSwgc2luZ2xlKSB7XG5cdCAgcmV0dXJuIHRva2VuLnRhZyA/IHRva2VuLm9uZVRpbWUgJiYgdm0gPyAnXCInICsgdm0uJGV2YWwodG9rZW4udmFsdWUpICsgJ1wiJyA6IGlubGluZUZpbHRlcnModG9rZW4udmFsdWUsIHNpbmdsZSkgOiAnXCInICsgdG9rZW4udmFsdWUgKyAnXCInO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9yIGFuIGF0dHJpYnV0ZSB3aXRoIG11bHRpcGxlIGludGVycG9sYXRpb24gdGFncyxcblx0ICogZS5nLiBhdHRyPVwic29tZS17e3RoaW5nIHwgZmlsdGVyfX1cIiwgaW4gb3JkZXIgdG8gY29tYmluZVxuXHQgKiB0aGUgd2hvbGUgdGhpbmcgaW50byBhIHNpbmdsZSB3YXRjaGFibGUgZXhwcmVzc2lvbiwgd2Vcblx0ICogaGF2ZSB0byBpbmxpbmUgdGhvc2UgZmlsdGVycy4gVGhpcyBmdW5jdGlvbiBkb2VzIGV4YWN0bHlcblx0ICogdGhhdC4gVGhpcyBpcyBhIGJpdCBoYWNreSBidXQgaXQgYXZvaWRzIGhlYXZ5IGNoYW5nZXNcblx0ICogdG8gZGlyZWN0aXZlIHBhcnNlciBhbmQgd2F0Y2hlciBtZWNoYW5pc20uXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHBhcmFtIHtCb29sZWFufSBzaW5nbGVcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdHZhciBmaWx0ZXJSRSA9IC9bXnxdXFx8W158XS87XG5cdGZ1bmN0aW9uIGlubGluZUZpbHRlcnMoZXhwLCBzaW5nbGUpIHtcblx0ICBpZiAoIWZpbHRlclJFLnRlc3QoZXhwKSkge1xuXHQgICAgcmV0dXJuIHNpbmdsZSA/IGV4cCA6ICcoJyArIGV4cCArICcpJztcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGRpciA9IHBhcnNlRGlyZWN0aXZlKGV4cCk7XG5cdCAgICBpZiAoIWRpci5maWx0ZXJzKSB7XG5cdCAgICAgIHJldHVybiAnKCcgKyBleHAgKyAnKSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3RoaXMuX2FwcGx5RmlsdGVycygnICsgZGlyLmV4cHJlc3Npb24gKyAvLyB2YWx1ZVxuXHQgICAgICAnLG51bGwsJyArIC8vIG9sZFZhbHVlIChudWxsIGZvciByZWFkKVxuXHQgICAgICBKU09OLnN0cmluZ2lmeShkaXIuZmlsdGVycykgKyAvLyBmaWx0ZXIgZGVzY3JpcHRvcnNcblx0ICAgICAgJyxmYWxzZSknOyAvLyB3cml0ZT9cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciB0ZXh0ID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgY29tcGlsZVJlZ2V4OiBjb21waWxlUmVnZXgsXG5cdCAgcGFyc2VUZXh0OiBwYXJzZVRleHQsXG5cdCAgdG9rZW5zVG9FeHA6IHRva2Vuc1RvRXhwXG5cdH0pO1xuXHRcblx0dmFyIGRlbGltaXRlcnMgPSBbJ3t7JywgJ319J107XG5cdHZhciB1bnNhZmVEZWxpbWl0ZXJzID0gWyd7e3snLCAnfX19J107XG5cdFxuXHR2YXIgY29uZmlnID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuXHRcblx0ICAvKipcblx0ICAgKiBXaGV0aGVyIHRvIHByaW50IGRlYnVnIG1lc3NhZ2VzLlxuXHQgICAqIEFsc28gZW5hYmxlcyBzdGFjayB0cmFjZSBmb3Igd2FybmluZ3MuXG5cdCAgICpcblx0ICAgKiBAdHlwZSB7Qm9vbGVhbn1cblx0ICAgKi9cblx0XG5cdCAgZGVidWc6IGZhbHNlLFxuXHRcblx0ICAvKipcblx0ICAgKiBXaGV0aGVyIHRvIHN1cHByZXNzIHdhcm5pbmdzLlxuXHQgICAqXG5cdCAgICogQHR5cGUge0Jvb2xlYW59XG5cdCAgICovXG5cdFxuXHQgIHNpbGVudDogZmFsc2UsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gdXNlIGFzeW5jIHJlbmRlcmluZy5cblx0ICAgKi9cblx0XG5cdCAgYXN5bmM6IHRydWUsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gd2FybiBhZ2FpbnN0IGVycm9ycyBjYXVnaHQgd2hlbiBldmFsdWF0aW5nXG5cdCAgICogZXhwcmVzc2lvbnMuXG5cdCAgICovXG5cdFxuXHQgIHdhcm5FeHByZXNzaW9uRXJyb3JzOiB0cnVlLFxuXHRcblx0ICAvKipcblx0ICAgKiBXaGV0aGVyIHRvIGFsbG93IGRldnRvb2xzIGluc3BlY3Rpb24uXG5cdCAgICogRGlzYWJsZWQgYnkgZGVmYXVsdCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cblx0ICAgKi9cblx0XG5cdCAgZGV2dG9vbHM6IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicsXG5cdFxuXHQgIC8qKlxuXHQgICAqIEludGVybmFsIGZsYWcgdG8gaW5kaWNhdGUgdGhlIGRlbGltaXRlcnMgaGF2ZSBiZWVuXG5cdCAgICogY2hhbmdlZC5cblx0ICAgKlxuXHQgICAqIEB0eXBlIHtCb29sZWFufVxuXHQgICAqL1xuXHRcblx0ICBfZGVsaW1pdGVyc0NoYW5nZWQ6IHRydWUsXG5cdFxuXHQgIC8qKlxuXHQgICAqIExpc3Qgb2YgYXNzZXQgdHlwZXMgdGhhdCBhIGNvbXBvbmVudCBjYW4gb3duLlxuXHQgICAqXG5cdCAgICogQHR5cGUge0FycmF5fVxuXHQgICAqL1xuXHRcblx0ICBfYXNzZXRUeXBlczogWydjb21wb25lbnQnLCAnZGlyZWN0aXZlJywgJ2VsZW1lbnREaXJlY3RpdmUnLCAnZmlsdGVyJywgJ3RyYW5zaXRpb24nLCAncGFydGlhbCddLFxuXHRcblx0ICAvKipcblx0ICAgKiBwcm9wIGJpbmRpbmcgbW9kZXNcblx0ICAgKi9cblx0XG5cdCAgX3Byb3BCaW5kaW5nTW9kZXM6IHtcblx0ICAgIE9ORV9XQVk6IDAsXG5cdCAgICBUV09fV0FZOiAxLFxuXHQgICAgT05FX1RJTUU6IDJcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBNYXggY2lyY3VsYXIgdXBkYXRlcyBhbGxvd2VkIGluIGEgYmF0Y2hlciBmbHVzaCBjeWNsZS5cblx0ICAgKi9cblx0XG5cdCAgX21heFVwZGF0ZUNvdW50OiAxMDBcblx0XG5cdH0sIHtcblx0ICBkZWxpbWl0ZXJzOiB7IC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW50ZXJwb2xhdGlvbiBkZWxpbWl0ZXJzLiBDaGFuZ2luZyB0aGVzZSB3b3VsZCB0cmlnZ2VyXG5cdCAgICAgICAgICAgICAgICAgKiB0aGUgdGV4dCBwYXJzZXIgdG8gcmUtY29tcGlsZSB0aGUgcmVndWxhciBleHByZXNzaW9ucy5cblx0ICAgICAgICAgICAgICAgICAqXG5cdCAgICAgICAgICAgICAgICAgKiBAdHlwZSB7QXJyYXk8U3RyaW5nPn1cblx0ICAgICAgICAgICAgICAgICAqL1xuXHRcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICByZXR1cm4gZGVsaW1pdGVycztcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcblx0ICAgICAgZGVsaW1pdGVycyA9IHZhbDtcblx0ICAgICAgY29tcGlsZVJlZ2V4KCk7XG5cdCAgICB9LFxuXHQgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgZW51bWVyYWJsZTogdHJ1ZVxuXHQgIH0sXG5cdCAgdW5zYWZlRGVsaW1pdGVyczoge1xuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIHJldHVybiB1bnNhZmVEZWxpbWl0ZXJzO1xuXHQgICAgfSxcblx0ICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuXHQgICAgICB1bnNhZmVEZWxpbWl0ZXJzID0gdmFsO1xuXHQgICAgICBjb21waWxlUmVnZXgoKTtcblx0ICAgIH0sXG5cdCAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICBlbnVtZXJhYmxlOiB0cnVlXG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciB3YXJuID0gdW5kZWZpbmVkO1xuXHR2YXIgZm9ybWF0Q29tcG9uZW50TmFtZSA9IHVuZGVmaW5lZDtcblx0XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgKGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBoYXNDb25zb2xlID0gdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnO1xuXHRcblx0ICAgIHdhcm4gPSBmdW5jdGlvbiAobXNnLCB2bSkge1xuXHQgICAgICBpZiAoaGFzQ29uc29sZSAmJiAhY29uZmlnLnNpbGVudCkge1xuXHQgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tWdWUgd2Fybl06ICcgKyBtc2cgKyAodm0gPyBmb3JtYXRDb21wb25lbnROYW1lKHZtKSA6ICcnKSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgZm9ybWF0Q29tcG9uZW50TmFtZSA9IGZ1bmN0aW9uICh2bSkge1xuXHQgICAgICB2YXIgbmFtZSA9IHZtLl9pc1Z1ZSA/IHZtLiRvcHRpb25zLm5hbWUgOiB2bS5uYW1lO1xuXHQgICAgICByZXR1cm4gbmFtZSA/ICcgKGZvdW5kIGluIGNvbXBvbmVudDogPCcgKyBoeXBoZW5hdGUobmFtZSkgKyAnPiknIDogJyc7XG5cdCAgICB9O1xuXHQgIH0pKCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBcHBlbmQgd2l0aCB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXBwZW5kV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XG5cdCAgYXBwbHlUcmFuc2l0aW9uKGVsLCAxLCBmdW5jdGlvbiAoKSB7XG5cdCAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH0sIHZtLCBjYik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbnNlcnRCZWZvcmUgd2l0aCB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYmVmb3JlV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XG5cdCAgYXBwbHlUcmFuc2l0aW9uKGVsLCAxLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBiZWZvcmUoZWwsIHRhcmdldCk7XG5cdCAgfSwgdm0sIGNiKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSB3aXRoIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZW1vdmVXaXRoVHJhbnNpdGlvbihlbCwgdm0sIGNiKSB7XG5cdCAgYXBwbHlUcmFuc2l0aW9uKGVsLCAtMSwgZnVuY3Rpb24gKCkge1xuXHQgICAgcmVtb3ZlKGVsKTtcblx0ICB9LCB2bSwgY2IpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXBwbHkgdHJhbnNpdGlvbnMgd2l0aCBhbiBvcGVyYXRpb24gY2FsbGJhY2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGRpcmVjdGlvblxuXHQgKiAgICAgICAgICAgICAgICAgIDE6IGVudGVyXG5cdCAqICAgICAgICAgICAgICAgICAtMTogbGVhdmVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSB0aGUgYWN0dWFsIERPTSBvcGVyYXRpb25cblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhcHBseVRyYW5zaXRpb24oZWwsIGRpcmVjdGlvbiwgb3AsIHZtLCBjYikge1xuXHQgIHZhciB0cmFuc2l0aW9uID0gZWwuX192X3RyYW5zO1xuXHQgIGlmICghdHJhbnNpdGlvbiB8fFxuXHQgIC8vIHNraXAgaWYgdGhlcmUgYXJlIG5vIGpzIGhvb2tzIGFuZCBDU1MgdHJhbnNpdGlvbiBpc1xuXHQgIC8vIG5vdCBzdXBwb3J0ZWRcblx0ICAhdHJhbnNpdGlvbi5ob29rcyAmJiAhdHJhbnNpdGlvbkVuZEV2ZW50IHx8XG5cdCAgLy8gc2tpcCB0cmFuc2l0aW9ucyBmb3IgaW5pdGlhbCBjb21waWxlXG5cdCAgIXZtLl9pc0NvbXBpbGVkIHx8XG5cdCAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIG1hbmlwdWxhdGVkIGJ5IGEgcGFyZW50IGRpcmVjdGl2ZVxuXHQgIC8vIGR1cmluZyB0aGUgcGFyZW50J3MgY29tcGlsYXRpb24gcGhhc2UsIHNraXAgdGhlXG5cdCAgLy8gYW5pbWF0aW9uLlxuXHQgIHZtLiRwYXJlbnQgJiYgIXZtLiRwYXJlbnQuX2lzQ29tcGlsZWQpIHtcblx0ICAgIG9wKCk7XG5cdCAgICBpZiAoY2IpIGNiKCk7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBhY3Rpb24gPSBkaXJlY3Rpb24gPiAwID8gJ2VudGVyJyA6ICdsZWF2ZSc7XG5cdCAgdHJhbnNpdGlvblthY3Rpb25dKG9wLCBjYik7XG5cdH1cblx0XG5cdHZhciB0cmFuc2l0aW9uID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgYXBwZW5kV2l0aFRyYW5zaXRpb246IGFwcGVuZFdpdGhUcmFuc2l0aW9uLFxuXHQgIGJlZm9yZVdpdGhUcmFuc2l0aW9uOiBiZWZvcmVXaXRoVHJhbnNpdGlvbixcblx0ICByZW1vdmVXaXRoVHJhbnNpdGlvbjogcmVtb3ZlV2l0aFRyYW5zaXRpb24sXG5cdCAgYXBwbHlUcmFuc2l0aW9uOiBhcHBseVRyYW5zaXRpb25cblx0fSk7XG5cdFxuXHQvKipcblx0ICogUXVlcnkgYW4gZWxlbWVudCBzZWxlY3RvciBpZiBpdCdzIG5vdCBhbiBlbGVtZW50IGFscmVhZHkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGVsXG5cdCAqIEByZXR1cm4ge0VsZW1lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcXVlcnkoZWwpIHtcblx0ICBpZiAodHlwZW9mIGVsID09PSAnc3RyaW5nJykge1xuXHQgICAgdmFyIHNlbGVjdG9yID0gZWw7XG5cdCAgICBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpO1xuXHQgICAgaWYgKCFlbCkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0Nhbm5vdCBmaW5kIGVsZW1lbnQ6ICcgKyBzZWxlY3Rvcik7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBlbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGEgbm9kZSBpcyBpbiB0aGUgZG9jdW1lbnQuXG5cdCAqIE5vdGU6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyBzaG91bGQgd29yayBoZXJlXG5cdCAqIGJ1dCBhbHdheXMgcmV0dXJucyBmYWxzZSBmb3IgY29tbWVudCBub2RlcyBpbiBwaGFudG9tanMsXG5cdCAqIG1ha2luZyB1bml0IHRlc3RzIGRpZmZpY3VsdC4gVGhpcyBpcyBmaXhlZCBieSBkb2luZyB0aGVcblx0ICogY29udGFpbnMoKSBjaGVjayBvbiB0aGUgbm9kZSdzIHBhcmVudE5vZGUgaW5zdGVhZCBvZlxuXHQgKiB0aGUgbm9kZSBpdHNlbGYuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGluRG9jKG5vZGUpIHtcblx0ICBpZiAoIW5vZGUpIHJldHVybiBmYWxzZTtcblx0ICB2YXIgZG9jID0gbm9kZS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblx0ICB2YXIgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuXHQgIHJldHVybiBkb2MgPT09IG5vZGUgfHwgZG9jID09PSBwYXJlbnQgfHwgISEocGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSA9PT0gMSAmJiBkb2MuY29udGFpbnMocGFyZW50KSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgYW5kIHJlbW92ZSBhbiBhdHRyaWJ1dGUgZnJvbSBhIG5vZGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gX2F0dHJcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRBdHRyKG5vZGUsIF9hdHRyKSB7XG5cdCAgdmFyIHZhbCA9IG5vZGUuZ2V0QXR0cmlidXRlKF9hdHRyKTtcblx0ICBpZiAodmFsICE9PSBudWxsKSB7XG5cdCAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShfYXR0cik7XG5cdCAgfVxuXHQgIHJldHVybiB2YWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgYW4gYXR0cmlidXRlIHdpdGggY29sb24gb3Igdi1iaW5kOiBwcmVmaXguXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd8bnVsbH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRCaW5kQXR0cihub2RlLCBuYW1lKSB7XG5cdCAgdmFyIHZhbCA9IGdldEF0dHIobm9kZSwgJzonICsgbmFtZSk7XG5cdCAgaWYgKHZhbCA9PT0gbnVsbCkge1xuXHQgICAgdmFsID0gZ2V0QXR0cihub2RlLCAndi1iaW5kOicgKyBuYW1lKTtcblx0ICB9XG5cdCAgcmV0dXJuIHZhbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIHRoZSBwcmVzZW5jZSBvZiBhIGJpbmQgYXR0cmlidXRlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBoYXNCaW5kQXR0cihub2RlLCBuYW1lKSB7XG5cdCAgcmV0dXJuIG5vZGUuaGFzQXR0cmlidXRlKG5hbWUpIHx8IG5vZGUuaGFzQXR0cmlidXRlKCc6JyArIG5hbWUpIHx8IG5vZGUuaGFzQXR0cmlidXRlKCd2LWJpbmQ6JyArIG5hbWUpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSW5zZXJ0IGVsIGJlZm9yZSB0YXJnZXRcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGJlZm9yZShlbCwgdGFyZ2V0KSB7XG5cdCAgdGFyZ2V0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsLCB0YXJnZXQpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSW5zZXJ0IGVsIGFmdGVyIHRhcmdldFxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYWZ0ZXIoZWwsIHRhcmdldCkge1xuXHQgIGlmICh0YXJnZXQubmV4dFNpYmxpbmcpIHtcblx0ICAgIGJlZm9yZShlbCwgdGFyZ2V0Lm5leHRTaWJsaW5nKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGFyZ2V0LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBlbCBmcm9tIERPTVxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlKGVsKSB7XG5cdCAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcmVwZW5kIGVsIHRvIHRhcmdldFxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJlcGVuZChlbCwgdGFyZ2V0KSB7XG5cdCAgaWYgKHRhcmdldC5maXJzdENoaWxkKSB7XG5cdCAgICBiZWZvcmUoZWwsIHRhcmdldC5maXJzdENoaWxkKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZXBsYWNlIHRhcmdldCB3aXRoIGVsXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXBsYWNlKHRhcmdldCwgZWwpIHtcblx0ICB2YXIgcGFyZW50ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG5cdCAgaWYgKHBhcmVudCkge1xuXHQgICAgcGFyZW50LnJlcGxhY2VDaGlsZChlbCwgdGFyZ2V0KTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBZGQgZXZlbnQgbGlzdGVuZXIgc2hvcnRoYW5kLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VDYXB0dXJlXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG9uKGVsLCBldmVudCwgY2IsIHVzZUNhcHR1cmUpIHtcblx0ICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBjYiwgdXNlQ2FwdHVyZSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgZXZlbnQgbGlzdGVuZXIgc2hvcnRoYW5kLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG9mZihlbCwgZXZlbnQsIGNiKSB7XG5cdCAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgY2IpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9yIElFOSBjb21wYXQ6IHdoZW4gYm90aCBjbGFzcyBhbmQgOmNsYXNzIGFyZSBwcmVzZW50XG5cdCAqIGdldEF0dHJpYnV0ZSgnY2xhc3MnKSByZXR1cm5zIHdyb25nIHZhbHVlLi4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldENsYXNzKGVsKSB7XG5cdCAgdmFyIGNsYXNzbmFtZSA9IGVsLmNsYXNzTmFtZTtcblx0ICBpZiAodHlwZW9mIGNsYXNzbmFtZSA9PT0gJ29iamVjdCcpIHtcblx0ICAgIGNsYXNzbmFtZSA9IGNsYXNzbmFtZS5iYXNlVmFsIHx8ICcnO1xuXHQgIH1cblx0ICByZXR1cm4gY2xhc3NuYW1lO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSW4gSUU5LCBzZXRBdHRyaWJ1dGUoJ2NsYXNzJykgd2lsbCByZXN1bHQgaW4gZW1wdHkgY2xhc3Ncblx0ICogaWYgdGhlIGVsZW1lbnQgYWxzbyBoYXMgdGhlIDpjbGFzcyBhdHRyaWJ1dGU7IEhvd2V2ZXIgaW5cblx0ICogUGhhbnRvbUpTLCBzZXR0aW5nIGBjbGFzc05hbWVgIGRvZXMgbm90IHdvcmsgb24gU1ZHIGVsZW1lbnRzLi4uXG5cdCAqIFNvIHdlIGhhdmUgdG8gZG8gYSBjb25kaXRpb25hbCBjaGVjayBoZXJlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzZXRDbGFzcyhlbCwgY2xzKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGlzSUU5ICYmICEvc3ZnJC8udGVzdChlbC5uYW1lc3BhY2VVUkkpKSB7XG5cdCAgICBlbC5jbGFzc05hbWUgPSBjbHM7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbHMpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEFkZCBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIElFICYgU1ZHXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFkZENsYXNzKGVsLCBjbHMpIHtcblx0ICBpZiAoZWwuY2xhc3NMaXN0KSB7XG5cdCAgICBlbC5jbGFzc0xpc3QuYWRkKGNscyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBjdXIgPSAnICcgKyBnZXRDbGFzcyhlbCkgKyAnICc7XG5cdCAgICBpZiAoY3VyLmluZGV4T2YoJyAnICsgY2xzICsgJyAnKSA8IDApIHtcblx0ICAgICAgc2V0Q2xhc3MoZWwsIChjdXIgKyBjbHMpLnRyaW0oKSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGNsYXNzIHdpdGggY29tcGF0aWJpbGl0eSBmb3IgSUUgJiBTVkdcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY2xzXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWwsIGNscykge1xuXHQgIGlmIChlbC5jbGFzc0xpc3QpIHtcblx0ICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGN1ciA9ICcgJyArIGdldENsYXNzKGVsKSArICcgJztcblx0ICAgIHZhciB0YXIgPSAnICcgKyBjbHMgKyAnICc7XG5cdCAgICB3aGlsZSAoY3VyLmluZGV4T2YodGFyKSA+PSAwKSB7XG5cdCAgICAgIGN1ciA9IGN1ci5yZXBsYWNlKHRhciwgJyAnKTtcblx0ICAgIH1cblx0ICAgIHNldENsYXNzKGVsLCBjdXIudHJpbSgpKTtcblx0ICB9XG5cdCAgaWYgKCFlbC5jbGFzc05hbWUpIHtcblx0ICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFeHRyYWN0IHJhdyBjb250ZW50IGluc2lkZSBhbiBlbGVtZW50IGludG8gYSB0ZW1wb3Jhcnlcblx0ICogY29udGFpbmVyIGRpdlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gYXNGcmFnbWVudFxuXHQgKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZXh0cmFjdENvbnRlbnQoZWwsIGFzRnJhZ21lbnQpIHtcblx0ICB2YXIgY2hpbGQ7XG5cdCAgdmFyIHJhd0NvbnRlbnQ7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGlzVGVtcGxhdGUoZWwpICYmIGlzRnJhZ21lbnQoZWwuY29udGVudCkpIHtcblx0ICAgIGVsID0gZWwuY29udGVudDtcblx0ICB9XG5cdCAgaWYgKGVsLmhhc0NoaWxkTm9kZXMoKSkge1xuXHQgICAgdHJpbU5vZGUoZWwpO1xuXHQgICAgcmF3Q29udGVudCA9IGFzRnJhZ21lbnQgPyBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICB3aGlsZSAoY2hpbGQgPSBlbC5maXJzdENoaWxkKSB7XG5cdCAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgICAgcmF3Q29udGVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByYXdDb250ZW50O1xuXHR9XG5cdFxuXHQvKipcblx0ICogVHJpbSBwb3NzaWJsZSBlbXB0eSBoZWFkL3RhaWwgdGV4dCBhbmQgY29tbWVudFxuXHQgKiBub2RlcyBpbnNpZGUgYSBwYXJlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRyaW1Ob2RlKG5vZGUpIHtcblx0ICB2YXIgY2hpbGQ7XG5cdCAgLyogZXNsaW50LWRpc2FibGUgbm8tc2VxdWVuY2VzICovXG5cdCAgd2hpbGUgKChjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZCwgaXNUcmltbWFibGUoY2hpbGQpKSkge1xuXHQgICAgbm9kZS5yZW1vdmVDaGlsZChjaGlsZCk7XG5cdCAgfVxuXHQgIHdoaWxlICgoY2hpbGQgPSBub2RlLmxhc3RDaGlsZCwgaXNUcmltbWFibGUoY2hpbGQpKSkge1xuXHQgICAgbm9kZS5yZW1vdmVDaGlsZChjaGlsZCk7XG5cdCAgfVxuXHQgIC8qIGVzbGludC1lbmFibGUgbm8tc2VxdWVuY2VzICovXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzVHJpbW1hYmxlKG5vZGUpIHtcblx0ICByZXR1cm4gbm9kZSAmJiAobm9kZS5ub2RlVHlwZSA9PT0gMyAmJiAhbm9kZS5kYXRhLnRyaW0oKSB8fCBub2RlLm5vZGVUeXBlID09PSA4KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSB0ZW1wbGF0ZSB0YWcuXG5cdCAqIE5vdGUgaWYgdGhlIHRlbXBsYXRlIGFwcGVhcnMgaW5zaWRlIGFuIFNWRyBpdHMgdGFnTmFtZVxuXHQgKiB3aWxsIGJlIGluIGxvd2VyY2FzZS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzVGVtcGxhdGUoZWwpIHtcblx0ICByZXR1cm4gZWwudGFnTmFtZSAmJiBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0ZW1wbGF0ZSc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGUgYW4gXCJhbmNob3JcIiBmb3IgcGVyZm9ybWluZyBkb20gaW5zZXJ0aW9uL3JlbW92YWxzLlxuXHQgKiBUaGlzIGlzIHVzZWQgaW4gYSBudW1iZXIgb2Ygc2NlbmFyaW9zOlxuXHQgKiAtIGZyYWdtZW50IGluc3RhbmNlXG5cdCAqIC0gdi1odG1sXG5cdCAqIC0gdi1pZlxuXHQgKiAtIHYtZm9yXG5cdCAqIC0gY29tcG9uZW50XG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50XG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gcGVyc2lzdCAtIElFIHRyYXNoZXMgZW1wdHkgdGV4dE5vZGVzIG9uXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lTm9kZSh0cnVlKSwgc28gaW4gY2VydGFpblxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlcyB0aGUgYW5jaG9yIG5lZWRzIHRvIGJlXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbi1lbXB0eSB0byBiZSBwZXJzaXN0ZWQgaW5cblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVzLlxuXHQgKiBAcmV0dXJuIHtDb21tZW50fFRleHR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQW5jaG9yKGNvbnRlbnQsIHBlcnNpc3QpIHtcblx0ICB2YXIgYW5jaG9yID0gY29uZmlnLmRlYnVnID8gZG9jdW1lbnQuY3JlYXRlQ29tbWVudChjb250ZW50KSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHBlcnNpc3QgPyAnICcgOiAnJyk7XG5cdCAgYW5jaG9yLl9fdl9hbmNob3IgPSB0cnVlO1xuXHQgIHJldHVybiBhbmNob3I7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGaW5kIGEgY29tcG9uZW50IHJlZiBhdHRyaWJ1dGUgdGhhdCBzdGFydHMgd2l0aCAkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGVcblx0ICogQHJldHVybiB7U3RyaW5nfHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHR2YXIgcmVmUkUgPSAvXnYtcmVmOi87XG5cdFxuXHRmdW5jdGlvbiBmaW5kUmVmKG5vZGUpIHtcblx0ICBpZiAobm9kZS5oYXNBdHRyaWJ1dGVzKCkpIHtcblx0ICAgIHZhciBhdHRycyA9IG5vZGUuYXR0cmlidXRlcztcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBuYW1lID0gYXR0cnNbaV0ubmFtZTtcblx0ICAgICAgaWYgKHJlZlJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICByZXR1cm4gY2FtZWxpemUobmFtZS5yZXBsYWNlKHJlZlJFLCAnJykpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogTWFwIGEgZnVuY3Rpb24gdG8gYSByYW5nZSBvZiBub2RlcyAuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge05vZGV9IGVuZFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1hcE5vZGVSYW5nZShub2RlLCBlbmQsIG9wKSB7XG5cdCAgdmFyIG5leHQ7XG5cdCAgd2hpbGUgKG5vZGUgIT09IGVuZCkge1xuXHQgICAgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG5cdCAgICBvcChub2RlKTtcblx0ICAgIG5vZGUgPSBuZXh0O1xuXHQgIH1cblx0ICBvcChlbmQpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGEgcmFuZ2Ugb2Ygbm9kZXMgd2l0aCB0cmFuc2l0aW9uLCBzdG9yZVxuXHQgKiB0aGUgbm9kZXMgaW4gYSBmcmFnbWVudCB3aXRoIGNvcnJlY3Qgb3JkZXJpbmcsXG5cdCAqIGFuZCBjYWxsIGNhbGxiYWNrIHdoZW4gZG9uZS5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBzdGFydFxuXHQgKiBAcGFyYW0ge05vZGV9IGVuZFxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlTm9kZVJhbmdlKHN0YXJ0LCBlbmQsIHZtLCBmcmFnLCBjYikge1xuXHQgIHZhciBkb25lID0gZmFsc2U7XG5cdCAgdmFyIHJlbW92ZWQgPSAwO1xuXHQgIHZhciBub2RlcyA9IFtdO1xuXHQgIG1hcE5vZGVSYW5nZShzdGFydCwgZW5kLCBmdW5jdGlvbiAobm9kZSkge1xuXHQgICAgaWYgKG5vZGUgPT09IGVuZCkgZG9uZSA9IHRydWU7XG5cdCAgICBub2Rlcy5wdXNoKG5vZGUpO1xuXHQgICAgcmVtb3ZlV2l0aFRyYW5zaXRpb24obm9kZSwgdm0sIG9uUmVtb3ZlZCk7XG5cdCAgfSk7XG5cdCAgZnVuY3Rpb24gb25SZW1vdmVkKCkge1xuXHQgICAgcmVtb3ZlZCsrO1xuXHQgICAgaWYgKGRvbmUgJiYgcmVtb3ZlZCA+PSBub2Rlcy5sZW5ndGgpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZXNbaV0pO1xuXHQgICAgICB9XG5cdCAgICAgIGNiICYmIGNiKCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYSBub2RlIGlzIGEgRG9jdW1lbnRGcmFnbWVudC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNGcmFnbWVudChub2RlKSB7XG5cdCAgcmV0dXJuIG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMTE7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgb3V0ZXJIVE1MIG9mIGVsZW1lbnRzLCB0YWtpbmcgY2FyZVxuXHQgKiBvZiBTVkcgZWxlbWVudHMgaW4gSUUgYXMgd2VsbC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0T3V0ZXJIVE1MKGVsKSB7XG5cdCAgaWYgKGVsLm91dGVySFRNTCkge1xuXHQgICAgcmV0dXJuIGVsLm91dGVySFRNTDtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVsLmNsb25lTm9kZSh0cnVlKSk7XG5cdCAgICByZXR1cm4gY29udGFpbmVyLmlubmVySFRNTDtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBjb21tb25UYWdSRSA9IC9eKGRpdnxwfHNwYW58aW1nfGF8YnxpfGJyfHVsfG9sfGxpfGgxfGgyfGgzfGg0fGg1fGg2fGNvZGV8cHJlfHRhYmxlfHRofHRkfHRyfGZvcm18bGFiZWx8aW5wdXR8c2VsZWN0fG9wdGlvbnxuYXZ8YXJ0aWNsZXxzZWN0aW9ufGhlYWRlcnxmb290ZXIpJC9pO1xuXHR2YXIgcmVzZXJ2ZWRUYWdSRSA9IC9eKHNsb3R8cGFydGlhbHxjb21wb25lbnQpJC9pO1xuXHRcblx0dmFyIGlzVW5rbm93bkVsZW1lbnQgPSB1bmRlZmluZWQ7XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgaXNVbmtub3duRWxlbWVudCA9IGZ1bmN0aW9uIChlbCwgdGFnKSB7XG5cdCAgICBpZiAodGFnLmluZGV4T2YoJy0nKSA+IC0xKSB7XG5cdCAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI4MjEwMzY0LzEwNzAyNDRcblx0ICAgICAgcmV0dXJuIGVsLmNvbnN0cnVjdG9yID09PSB3aW5kb3cuSFRNTFVua25vd25FbGVtZW50IHx8IGVsLmNvbnN0cnVjdG9yID09PSB3aW5kb3cuSFRNTEVsZW1lbnQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gKC9IVE1MVW5rbm93bkVsZW1lbnQvLnRlc3QoZWwudG9TdHJpbmcoKSkgJiZcblx0ICAgICAgICAvLyBDaHJvbWUgcmV0dXJucyB1bmtub3duIGZvciBzZXZlcmFsIEhUTUw1IGVsZW1lbnRzLlxuXHQgICAgICAgIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD01NDA1MjZcblx0ICAgICAgICAvLyBGaXJlZm94IHJldHVybnMgdW5rbm93biBmb3Igc29tZSBcIkludGVyYWN0aXZlIGVsZW1lbnRzLlwiXG5cdCAgICAgICAgIS9eKGRhdGF8dGltZXxydGN8cmJ8ZGV0YWlsc3xkaWFsb2d8c3VtbWFyeSkkLy50ZXN0KHRhZylcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIGNvbXBvbmVudCwgaWYgeWVzIHJldHVybiBpdHNcblx0ICogY29tcG9uZW50IGlkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2hlY2tDb21wb25lbnRBdHRyKGVsLCBvcHRpb25zKSB7XG5cdCAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblx0ICB2YXIgaGFzQXR0cnMgPSBlbC5oYXNBdHRyaWJ1dGVzKCk7XG5cdCAgaWYgKCFjb21tb25UYWdSRS50ZXN0KHRhZykgJiYgIXJlc2VydmVkVGFnUkUudGVzdCh0YWcpKSB7XG5cdCAgICBpZiAocmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgdGFnKSkge1xuXHQgICAgICByZXR1cm4geyBpZDogdGFnIH07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgaXMgPSBoYXNBdHRycyAmJiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpO1xuXHQgICAgICBpZiAoaXMpIHtcblx0ICAgICAgICByZXR1cm4gaXM7XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHZhciBleHBlY3RlZFRhZyA9IG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXAgJiYgb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcFt0YWddO1xuXHQgICAgICAgIGlmIChleHBlY3RlZFRhZykge1xuXHQgICAgICAgICAgd2FybignVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtICcgKyAnZGlkIHlvdSBtZWFuIDwnICsgZXhwZWN0ZWRUYWcgKyAnPj8gJyArICdIVE1MIGlzIGNhc2UtaW5zZW5zaXRpdmUsIHJlbWVtYmVyIHRvIHVzZSBrZWJhYi1jYXNlIGluIHRlbXBsYXRlcy4nKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGlzVW5rbm93bkVsZW1lbnQoZWwsIHRhZykpIHtcblx0ICAgICAgICAgIHdhcm4oJ1Vua25vd24gY3VzdG9tIGVsZW1lbnQ6IDwnICsgdGFnICsgJz4gLSBkaWQgeW91ICcgKyAncmVnaXN0ZXIgdGhlIGNvbXBvbmVudCBjb3JyZWN0bHk/IEZvciByZWN1cnNpdmUgY29tcG9uZW50cywgJyArICdtYWtlIHN1cmUgdG8gcHJvdmlkZSB0aGUgXCJuYW1lXCIgb3B0aW9uLicpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaGFzQXR0cnMpIHtcblx0ICAgIHJldHVybiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCBcImlzXCIgYmluZGluZyBmcm9tIGFuIGVsZW1lbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpIHtcblx0ICAvLyBkeW5hbWljIHN5bnRheFxuXHQgIHZhciBleHAgPSBlbC5nZXRBdHRyaWJ1dGUoJ2lzJyk7XG5cdCAgaWYgKGV4cCAhPSBudWxsKSB7XG5cdCAgICBpZiAocmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgZXhwKSkge1xuXHQgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2lzJyk7XG5cdCAgICAgIHJldHVybiB7IGlkOiBleHAgfTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgZXhwID0gZ2V0QmluZEF0dHIoZWwsICdpcycpO1xuXHQgICAgaWYgKGV4cCAhPSBudWxsKSB7XG5cdCAgICAgIHJldHVybiB7IGlkOiBleHAsIGR5bmFtaWM6IHRydWUgfTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBPcHRpb24gb3ZlcndyaXRpbmcgc3RyYXRlZ2llcyBhcmUgZnVuY3Rpb25zIHRoYXQgaGFuZGxlXG5cdCAqIGhvdyB0byBtZXJnZSBhIHBhcmVudCBvcHRpb24gdmFsdWUgYW5kIGEgY2hpbGQgb3B0aW9uXG5cdCAqIHZhbHVlIGludG8gdGhlIGZpbmFsIHZhbHVlLlxuXHQgKlxuXHQgKiBBbGwgc3RyYXRlZ3kgZnVuY3Rpb25zIGZvbGxvdyB0aGUgc2FtZSBzaWduYXR1cmU6XG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gcGFyZW50VmFsXG5cdCAqIEBwYXJhbSB7Kn0gY2hpbGRWYWxcblx0ICogQHBhcmFtIHtWdWV9IFt2bV1cblx0ICovXG5cdFxuXHR2YXIgc3RyYXRzID0gY29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdFxuXHQvKipcblx0ICogSGVscGVyIHRoYXQgcmVjdXJzaXZlbHkgbWVyZ2VzIHR3byBkYXRhIG9iamVjdHMgdG9nZXRoZXIuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWVyZ2VEYXRhKHRvLCBmcm9tKSB7XG5cdCAgdmFyIGtleSwgdG9WYWwsIGZyb21WYWw7XG5cdCAgZm9yIChrZXkgaW4gZnJvbSkge1xuXHQgICAgdG9WYWwgPSB0b1trZXldO1xuXHQgICAgZnJvbVZhbCA9IGZyb21ba2V5XTtcblx0ICAgIGlmICghaGFzT3duKHRvLCBrZXkpKSB7XG5cdCAgICAgIHNldCh0bywga2V5LCBmcm9tVmFsKTtcblx0ICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodG9WYWwpICYmIGlzT2JqZWN0KGZyb21WYWwpKSB7XG5cdCAgICAgIG1lcmdlRGF0YSh0b1ZhbCwgZnJvbVZhbCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0bztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERhdGFcblx0ICovXG5cdFxuXHRzdHJhdHMuZGF0YSA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSkge1xuXHQgIGlmICghdm0pIHtcblx0ICAgIC8vIGluIGEgVnVlLmV4dGVuZCBtZXJnZSwgYm90aCBzaG91bGQgYmUgZnVuY3Rpb25zXG5cdCAgICBpZiAoIWNoaWxkVmFsKSB7XG5cdCAgICAgIHJldHVybiBwYXJlbnRWYWw7XG5cdCAgICB9XG5cdCAgICBpZiAodHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVGhlIFwiZGF0YVwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICsgJ3RoYXQgcmV0dXJucyBhIHBlci1pbnN0YW5jZSB2YWx1ZSBpbiBjb21wb25lbnQgJyArICdkZWZpbml0aW9ucy4nLCB2bSk7XG5cdCAgICAgIHJldHVybiBwYXJlbnRWYWw7XG5cdCAgICB9XG5cdCAgICBpZiAoIXBhcmVudFZhbCkge1xuXHQgICAgICByZXR1cm4gY2hpbGRWYWw7XG5cdCAgICB9XG5cdCAgICAvLyB3aGVuIHBhcmVudFZhbCAmIGNoaWxkVmFsIGFyZSBib3RoIHByZXNlbnQsXG5cdCAgICAvLyB3ZSBuZWVkIHRvIHJldHVybiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGVcblx0ICAgIC8vIG1lcmdlZCByZXN1bHQgb2YgYm90aCBmdW5jdGlvbnMuLi4gbm8gbmVlZCB0b1xuXHQgICAgLy8gY2hlY2sgaWYgcGFyZW50VmFsIGlzIGEgZnVuY3Rpb24gaGVyZSBiZWNhdXNlXG5cdCAgICAvLyBpdCBoYXMgdG8gYmUgYSBmdW5jdGlvbiB0byBwYXNzIHByZXZpb3VzIG1lcmdlcy5cblx0ICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWREYXRhRm4oKSB7XG5cdCAgICAgIHJldHVybiBtZXJnZURhdGEoY2hpbGRWYWwuY2FsbCh0aGlzKSwgcGFyZW50VmFsLmNhbGwodGhpcykpO1xuXHQgICAgfTtcblx0ICB9IGVsc2UgaWYgKHBhcmVudFZhbCB8fCBjaGlsZFZhbCkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZEluc3RhbmNlRGF0YUZuKCkge1xuXHQgICAgICAvLyBpbnN0YW5jZSBtZXJnZVxuXHQgICAgICB2YXIgaW5zdGFuY2VEYXRhID0gdHlwZW9mIGNoaWxkVmFsID09PSAnZnVuY3Rpb24nID8gY2hpbGRWYWwuY2FsbCh2bSkgOiBjaGlsZFZhbDtcblx0ICAgICAgdmFyIGRlZmF1bHREYXRhID0gdHlwZW9mIHBhcmVudFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IHBhcmVudFZhbC5jYWxsKHZtKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgaWYgKGluc3RhbmNlRGF0YSkge1xuXHQgICAgICAgIHJldHVybiBtZXJnZURhdGEoaW5zdGFuY2VEYXRhLCBkZWZhdWx0RGF0YSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGRlZmF1bHREYXRhO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBFbFxuXHQgKi9cblx0XG5cdHN0cmF0cy5lbCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSkge1xuXHQgIGlmICghdm0gJiYgY2hpbGRWYWwgJiYgdHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1RoZSBcImVsXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgKyAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICsgJ2RlZmluaXRpb25zLicsIHZtKTtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIHJldCA9IGNoaWxkVmFsIHx8IHBhcmVudFZhbDtcblx0ICAvLyBpbnZva2UgdGhlIGVsZW1lbnQgZmFjdG9yeSBpZiB0aGlzIGlzIGluc3RhbmNlIG1lcmdlXG5cdCAgcmV0dXJuIHZtICYmIHR5cGVvZiByZXQgPT09ICdmdW5jdGlvbicgPyByZXQuY2FsbCh2bSkgOiByZXQ7XG5cdH07XG5cdFxuXHQvKipcblx0ICogSG9va3MgYW5kIHBhcmFtIGF0dHJpYnV0ZXMgYXJlIG1lcmdlZCBhcyBhcnJheXMuXG5cdCAqL1xuXHRcblx0c3RyYXRzLmluaXQgPSBzdHJhdHMuY3JlYXRlZCA9IHN0cmF0cy5yZWFkeSA9IHN0cmF0cy5hdHRhY2hlZCA9IHN0cmF0cy5kZXRhY2hlZCA9IHN0cmF0cy5iZWZvcmVDb21waWxlID0gc3RyYXRzLmNvbXBpbGVkID0gc3RyYXRzLmJlZm9yZURlc3Ryb3kgPSBzdHJhdHMuZGVzdHJveWVkID0gc3RyYXRzLmFjdGl2YXRlID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcblx0ICByZXR1cm4gY2hpbGRWYWwgPyBwYXJlbnRWYWwgPyBwYXJlbnRWYWwuY29uY2F0KGNoaWxkVmFsKSA6IGlzQXJyYXkoY2hpbGRWYWwpID8gY2hpbGRWYWwgOiBbY2hpbGRWYWxdIDogcGFyZW50VmFsO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEFzc2V0c1xuXHQgKlxuXHQgKiBXaGVuIGEgdm0gaXMgcHJlc2VudCAoaW5zdGFuY2UgY3JlYXRpb24pLCB3ZSBuZWVkIHRvIGRvXG5cdCAqIGEgdGhyZWUtd2F5IG1lcmdlIGJldHdlZW4gY29uc3RydWN0b3Igb3B0aW9ucywgaW5zdGFuY2Vcblx0ICogb3B0aW9ucyBhbmQgcGFyZW50IG9wdGlvbnMuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWVyZ2VBc3NldHMocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFZhbCB8fCBudWxsKTtcblx0ICByZXR1cm4gY2hpbGRWYWwgPyBleHRlbmQocmVzLCBndWFyZEFycmF5QXNzZXRzKGNoaWxkVmFsKSkgOiByZXM7XG5cdH1cblx0XG5cdGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgc3RyYXRzW3R5cGUgKyAncyddID0gbWVyZ2VBc3NldHM7XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIEV2ZW50cyAmIFdhdGNoZXJzLlxuXHQgKlxuXHQgKiBFdmVudHMgJiB3YXRjaGVycyBoYXNoZXMgc2hvdWxkIG5vdCBvdmVyd3JpdGUgb25lXG5cdCAqIGFub3RoZXIsIHNvIHdlIG1lcmdlIHRoZW0gYXMgYXJyYXlzLlxuXHQgKi9cblx0XG5cdHN0cmF0cy53YXRjaCA9IHN0cmF0cy5ldmVudHMgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG5cdCAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbDtcblx0ICB2YXIgcmV0ID0ge307XG5cdCAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcblx0ICBmb3IgKHZhciBrZXkgaW4gY2hpbGRWYWwpIHtcblx0ICAgIHZhciBwYXJlbnQgPSByZXRba2V5XTtcblx0ICAgIHZhciBjaGlsZCA9IGNoaWxkVmFsW2tleV07XG5cdCAgICBpZiAocGFyZW50ICYmICFpc0FycmF5KHBhcmVudCkpIHtcblx0ICAgICAgcGFyZW50ID0gW3BhcmVudF07XG5cdCAgICB9XG5cdCAgICByZXRba2V5XSA9IHBhcmVudCA/IHBhcmVudC5jb25jYXQoY2hpbGQpIDogW2NoaWxkXTtcblx0ICB9XG5cdCAgcmV0dXJuIHJldDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBPdGhlciBvYmplY3QgaGFzaGVzLlxuXHQgKi9cblx0XG5cdHN0cmF0cy5wcm9wcyA9IHN0cmF0cy5tZXRob2RzID0gc3RyYXRzLmNvbXB1dGVkID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcblx0ICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsO1xuXHQgIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG5cdCAgdmFyIHJldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcblx0ICBleHRlbmQocmV0LCBjaGlsZFZhbCk7XG5cdCAgcmV0dXJuIHJldDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBEZWZhdWx0IHN0cmF0ZWd5LlxuXHQgKi9cblx0XG5cdHZhciBkZWZhdWx0U3RyYXQgPSBmdW5jdGlvbiBkZWZhdWx0U3RyYXQocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgIHJldHVybiBjaGlsZFZhbCA9PT0gdW5kZWZpbmVkID8gcGFyZW50VmFsIDogY2hpbGRWYWw7XG5cdH07XG5cdFxuXHQvKipcblx0ICogTWFrZSBzdXJlIGNvbXBvbmVudCBvcHRpb25zIGdldCBjb252ZXJ0ZWQgdG8gYWN0dWFsXG5cdCAqIGNvbnN0cnVjdG9ycy5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBndWFyZENvbXBvbmVudHMob3B0aW9ucykge1xuXHQgIGlmIChvcHRpb25zLmNvbXBvbmVudHMpIHtcblx0ICAgIHZhciBjb21wb25lbnRzID0gb3B0aW9ucy5jb21wb25lbnRzID0gZ3VhcmRBcnJheUFzc2V0cyhvcHRpb25zLmNvbXBvbmVudHMpO1xuXHQgICAgdmFyIGlkcyA9IE9iamVjdC5rZXlzKGNvbXBvbmVudHMpO1xuXHQgICAgdmFyIGRlZjtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIHZhciBtYXAgPSBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwID0ge307XG5cdCAgICB9XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGlkcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIGtleSA9IGlkc1tpXTtcblx0ICAgICAgaWYgKGNvbW1vblRhZ1JFLnRlc3Qoa2V5KSB8fCByZXNlcnZlZFRhZ1JFLnRlc3Qoa2V5KSkge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCAnICsgJ2lkOiAnICsga2V5KTtcblx0ICAgICAgICBjb250aW51ZTtcblx0ICAgICAgfVxuXHQgICAgICAvLyByZWNvcmQgYSBhbGwgbG93ZXJjYXNlIDwtPiBrZWJhYi1jYXNlIG1hcHBpbmcgZm9yXG5cdCAgICAgIC8vIHBvc3NpYmxlIGN1c3RvbSBlbGVtZW50IGNhc2UgZXJyb3Igd2FybmluZ1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIG1hcFtrZXkucmVwbGFjZSgvLS9nLCAnJykudG9Mb3dlckNhc2UoKV0gPSBoeXBoZW5hdGUoa2V5KTtcblx0ICAgICAgfVxuXHQgICAgICBkZWYgPSBjb21wb25lbnRzW2tleV07XG5cdCAgICAgIGlmIChpc1BsYWluT2JqZWN0KGRlZikpIHtcblx0ICAgICAgICBjb21wb25lbnRzW2tleV0gPSBWdWUuZXh0ZW5kKGRlZik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFbnN1cmUgYWxsIHByb3BzIG9wdGlvbiBzeW50YXggYXJlIG5vcm1hbGl6ZWQgaW50byB0aGVcblx0ICogT2JqZWN0LWJhc2VkIGZvcm1hdC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBndWFyZFByb3BzKG9wdGlvbnMpIHtcblx0ICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuXHQgIHZhciBpLCB2YWw7XG5cdCAgaWYgKGlzQXJyYXkocHJvcHMpKSB7XG5cdCAgICBvcHRpb25zLnByb3BzID0ge307XG5cdCAgICBpID0gcHJvcHMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YWwgPSBwcm9wc1tpXTtcblx0ICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgb3B0aW9ucy5wcm9wc1t2YWxdID0gbnVsbDtcblx0ICAgICAgfSBlbHNlIGlmICh2YWwubmFtZSkge1xuXHQgICAgICAgIG9wdGlvbnMucHJvcHNbdmFsLm5hbWVdID0gdmFsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHByb3BzKSkge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wcyk7XG5cdCAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhbCA9IHByb3BzW2tleXNbaV1dO1xuXHQgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIHByb3BzW2tleXNbaV1dID0geyB0eXBlOiB2YWwgfTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEd1YXJkIGFuIEFycmF5LWZvcm1hdCBhc3NldHMgb3B0aW9uIGFuZCBjb252ZXJ0ZWQgaXRcblx0ICogaW50byB0aGUga2V5LXZhbHVlIE9iamVjdCBmb3JtYXQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBhc3NldHNcblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGd1YXJkQXJyYXlBc3NldHMoYXNzZXRzKSB7XG5cdCAgaWYgKGlzQXJyYXkoYXNzZXRzKSkge1xuXHQgICAgdmFyIHJlcyA9IHt9O1xuXHQgICAgdmFyIGkgPSBhc3NldHMubGVuZ3RoO1xuXHQgICAgdmFyIGFzc2V0O1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBhc3NldCA9IGFzc2V0c1tpXTtcblx0ICAgICAgdmFyIGlkID0gdHlwZW9mIGFzc2V0ID09PSAnZnVuY3Rpb24nID8gYXNzZXQub3B0aW9ucyAmJiBhc3NldC5vcHRpb25zLm5hbWUgfHwgYXNzZXQuaWQgOiBhc3NldC5uYW1lIHx8IGFzc2V0LmlkO1xuXHQgICAgICBpZiAoIWlkKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdBcnJheS1zeW50YXggYXNzZXRzIG11c3QgcHJvdmlkZSBhIFwibmFtZVwiIG9yIFwiaWRcIiBmaWVsZC4nKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXNbaWRdID0gYXNzZXQ7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiByZXM7XG5cdCAgfVxuXHQgIHJldHVybiBhc3NldHM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNZXJnZSB0d28gb3B0aW9uIG9iamVjdHMgaW50byBhIG5ldyBvbmUuXG5cdCAqIENvcmUgdXRpbGl0eSB1c2VkIGluIGJvdGggaW5zdGFudGlhdGlvbiBhbmQgaW5oZXJpdGFuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwYXJlbnRcblx0ICogQHBhcmFtIHtPYmplY3R9IGNoaWxkXG5cdCAqIEBwYXJhbSB7VnVlfSBbdm1dIC0gaWYgdm0gaXMgcHJlc2VudCwgaW5kaWNhdGVzIHRoaXMgaXNcblx0ICogICAgICAgICAgICAgICAgICAgICBhbiBpbnN0YW50aWF0aW9uIG1lcmdlLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkLCB2bSkge1xuXHQgIGd1YXJkQ29tcG9uZW50cyhjaGlsZCk7XG5cdCAgZ3VhcmRQcm9wcyhjaGlsZCk7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGlmIChjaGlsZC5wcm9wc0RhdGEgJiYgIXZtKSB7XG5cdCAgICAgIHdhcm4oJ3Byb3BzRGF0YSBjYW4gb25seSBiZSB1c2VkIGFzIGFuIGluc3RhbnRpYXRpb24gb3B0aW9uLicpO1xuXHQgICAgfVxuXHQgIH1cblx0ICB2YXIgb3B0aW9ucyA9IHt9O1xuXHQgIHZhciBrZXk7XG5cdCAgaWYgKGNoaWxkWydleHRlbmRzJ10pIHtcblx0ICAgIHBhcmVudCA9IHR5cGVvZiBjaGlsZFsnZXh0ZW5kcyddID09PSAnZnVuY3Rpb24nID8gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGRbJ2V4dGVuZHMnXS5vcHRpb25zLCB2bSkgOiBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZFsnZXh0ZW5kcyddLCB2bSk7XG5cdCAgfVxuXHQgIGlmIChjaGlsZC5taXhpbnMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGQubWl4aW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgbWl4aW4gPSBjaGlsZC5taXhpbnNbaV07XG5cdCAgICAgIHZhciBtaXhpbk9wdGlvbnMgPSBtaXhpbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBWdWUgPyBtaXhpbi5vcHRpb25zIDogbWl4aW47XG5cdCAgICAgIHBhcmVudCA9IG1lcmdlT3B0aW9ucyhwYXJlbnQsIG1peGluT3B0aW9ucywgdm0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmb3IgKGtleSBpbiBwYXJlbnQpIHtcblx0ICAgIG1lcmdlRmllbGQoa2V5KTtcblx0ICB9XG5cdCAgZm9yIChrZXkgaW4gY2hpbGQpIHtcblx0ICAgIGlmICghaGFzT3duKHBhcmVudCwga2V5KSkge1xuXHQgICAgICBtZXJnZUZpZWxkKGtleSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGZ1bmN0aW9uIG1lcmdlRmllbGQoa2V5KSB7XG5cdCAgICB2YXIgc3RyYXQgPSBzdHJhdHNba2V5XSB8fCBkZWZhdWx0U3RyYXQ7XG5cdCAgICBvcHRpb25zW2tleV0gPSBzdHJhdChwYXJlbnRba2V5XSwgY2hpbGRba2V5XSwgdm0sIGtleSk7XG5cdCAgfVxuXHQgIHJldHVybiBvcHRpb25zO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmVzb2x2ZSBhbiBhc3NldC5cblx0ICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJlY2F1c2UgY2hpbGQgaW5zdGFuY2VzIG5lZWQgYWNjZXNzXG5cdCAqIHRvIGFzc2V0cyBkZWZpbmVkIGluIGl0cyBhbmNlc3RvciBjaGFpbi5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlkXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gd2Fybk1pc3Npbmdcblx0ICogQHJldHVybiB7T2JqZWN0fEZ1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVBc3NldChvcHRpb25zLCB0eXBlLCBpZCwgd2Fybk1pc3NpbmcpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgYXNzZXRzID0gb3B0aW9uc1t0eXBlXTtcblx0ICB2YXIgY2FtZWxpemVkSWQ7XG5cdCAgdmFyIHJlcyA9IGFzc2V0c1tpZF0gfHxcblx0ICAvLyBjYW1lbENhc2UgSURcblx0ICBhc3NldHNbY2FtZWxpemVkSWQgPSBjYW1lbGl6ZShpZCldIHx8XG5cdCAgLy8gUGFzY2FsIENhc2UgSURcblx0ICBhc3NldHNbY2FtZWxpemVkSWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbGl6ZWRJZC5zbGljZSgxKV07XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybk1pc3NpbmcgJiYgIXJlcykge1xuXHQgICAgd2FybignRmFpbGVkIHRvIHJlc29sdmUgJyArIHR5cGUuc2xpY2UoMCwgLTEpICsgJzogJyArIGlkLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0dmFyIHVpZCQxID0gMDtcblx0XG5cdC8qKlxuXHQgKiBBIGRlcCBpcyBhbiBvYnNlcnZhYmxlIHRoYXQgY2FuIGhhdmUgbXVsdGlwbGVcblx0ICogZGlyZWN0aXZlcyBzdWJzY3JpYmluZyB0byBpdC5cblx0ICpcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqL1xuXHRmdW5jdGlvbiBEZXAoKSB7XG5cdCAgdGhpcy5pZCA9IHVpZCQxKys7XG5cdCAgdGhpcy5zdWJzID0gW107XG5cdH1cblx0XG5cdC8vIHRoZSBjdXJyZW50IHRhcmdldCB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZC5cblx0Ly8gdGhpcyBpcyBnbG9iYWxseSB1bmlxdWUgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvbmx5IG9uZVxuXHQvLyB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZCBhdCBhbnkgdGltZS5cblx0RGVwLnRhcmdldCA9IG51bGw7XG5cdFxuXHQvKipcblx0ICogQWRkIGEgZGlyZWN0aXZlIHN1YnNjcmliZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RGlyZWN0aXZlfSBzdWJcblx0ICovXG5cdFxuXHREZXAucHJvdG90eXBlLmFkZFN1YiA9IGZ1bmN0aW9uIChzdWIpIHtcblx0ICB0aGlzLnN1YnMucHVzaChzdWIpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBhIGRpcmVjdGl2ZSBzdWJzY3JpYmVyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gc3ViXG5cdCAqL1xuXHRcblx0RGVwLnByb3RvdHlwZS5yZW1vdmVTdWIgPSBmdW5jdGlvbiAoc3ViKSB7XG5cdCAgdGhpcy5zdWJzLiRyZW1vdmUoc3ViKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBZGQgc2VsZiBhcyBhIGRlcGVuZGVuY3kgdG8gdGhlIHRhcmdldCB3YXRjaGVyLlxuXHQgKi9cblx0XG5cdERlcC5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gKCkge1xuXHQgIERlcC50YXJnZXQuYWRkRGVwKHRoaXMpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE5vdGlmeSBhbGwgc3Vic2NyaWJlcnMgb2YgYSBuZXcgdmFsdWUuXG5cdCAqL1xuXHRcblx0RGVwLnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbiAoKSB7XG5cdCAgLy8gc3RhYmxpemUgdGhlIHN1YnNjcmliZXIgbGlzdCBmaXJzdFxuXHQgIHZhciBzdWJzID0gdG9BcnJheSh0aGlzLnN1YnMpO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gc3Vicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHN1YnNbaV0udXBkYXRlKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG5cdHZhciBhcnJheU1ldGhvZHMgPSBPYmplY3QuY3JlYXRlKGFycmF5UHJvdG8pXG5cdFxuXHQvKipcblx0ICogSW50ZXJjZXB0IG11dGF0aW5nIG1ldGhvZHMgYW5kIGVtaXQgZXZlbnRzXG5cdCAqL1xuXHRcblx0O1sncHVzaCcsICdwb3AnLCAnc2hpZnQnLCAndW5zaGlmdCcsICdzcGxpY2UnLCAnc29ydCcsICdyZXZlcnNlJ10uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG5cdCAgLy8gY2FjaGUgb3JpZ2luYWwgbWV0aG9kXG5cdCAgdmFyIG9yaWdpbmFsID0gYXJyYXlQcm90b1ttZXRob2RdO1xuXHQgIGRlZihhcnJheU1ldGhvZHMsIG1ldGhvZCwgZnVuY3Rpb24gbXV0YXRvcigpIHtcblx0ICAgIC8vIGF2b2lkIGxlYWtpbmcgYXJndW1lbnRzOlxuXHQgICAgLy8gaHR0cDovL2pzcGVyZi5jb20vY2xvc3VyZS13aXRoLWFyZ3VtZW50c1xuXHQgICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoO1xuXHQgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoaSk7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG5cdCAgICB9XG5cdCAgICB2YXIgcmVzdWx0ID0gb3JpZ2luYWwuYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICB2YXIgb2IgPSB0aGlzLl9fb2JfXztcblx0ICAgIHZhciBpbnNlcnRlZDtcblx0ICAgIHN3aXRjaCAobWV0aG9kKSB7XG5cdCAgICAgIGNhc2UgJ3B1c2gnOlxuXHQgICAgICAgIGluc2VydGVkID0gYXJncztcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAndW5zaGlmdCc6XG5cdCAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICdzcGxpY2UnOlxuXHQgICAgICAgIGluc2VydGVkID0gYXJncy5zbGljZSgyKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgIH1cblx0ICAgIGlmIChpbnNlcnRlZCkgb2Iub2JzZXJ2ZUFycmF5KGluc2VydGVkKTtcblx0ICAgIC8vIG5vdGlmeSBjaGFuZ2Vcblx0ICAgIG9iLmRlcC5ub3RpZnkoKTtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfSk7XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIFN3YXAgdGhlIGVsZW1lbnQgYXQgdGhlIGdpdmVuIGluZGV4IHdpdGggYSBuZXcgdmFsdWVcblx0ICogYW5kIGVtaXRzIGNvcnJlc3BvbmRpbmcgZXZlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKiBAcmV0dXJuIHsqfSAtIHJlcGxhY2VkIGVsZW1lbnRcblx0ICovXG5cdFxuXHRkZWYoYXJyYXlQcm90bywgJyRzZXQnLCBmdW5jdGlvbiAkc2V0KGluZGV4LCB2YWwpIHtcblx0ICBpZiAoaW5kZXggPj0gdGhpcy5sZW5ndGgpIHtcblx0ICAgIHRoaXMubGVuZ3RoID0gTnVtYmVyKGluZGV4KSArIDE7XG5cdCAgfVxuXHQgIHJldHVybiB0aGlzLnNwbGljZShpbmRleCwgMSwgdmFsKVswXTtcblx0fSk7XG5cdFxuXHQvKipcblx0ICogQ29udmVuaWVuY2UgbWV0aG9kIHRvIHJlbW92ZSB0aGUgZWxlbWVudCBhdCBnaXZlbiBpbmRleCBvciB0YXJnZXQgZWxlbWVudCByZWZlcmVuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gaXRlbVxuXHQgKi9cblx0XG5cdGRlZihhcnJheVByb3RvLCAnJHJlbW92ZScsIGZ1bmN0aW9uICRyZW1vdmUoaXRlbSkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICghdGhpcy5sZW5ndGgpIHJldHVybjtcblx0ICB2YXIgaW5kZXggPSBpbmRleE9mKHRoaXMsIGl0ZW0pO1xuXHQgIGlmIChpbmRleCA+IC0xKSB7XG5cdCAgICByZXR1cm4gdGhpcy5zcGxpY2UoaW5kZXgsIDEpO1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgYXJyYXlLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYXJyYXlNZXRob2RzKTtcblx0XG5cdC8qKlxuXHQgKiBCeSBkZWZhdWx0LCB3aGVuIGEgcmVhY3RpdmUgcHJvcGVydHkgaXMgc2V0LCB0aGUgbmV3IHZhbHVlIGlzXG5cdCAqIGFsc28gY29udmVydGVkIHRvIGJlY29tZSByZWFjdGl2ZS4gSG93ZXZlciBpbiBjZXJ0YWluIGNhc2VzLCBlLmcuXG5cdCAqIHYtZm9yIHNjb3BlIGFsaWFzIGFuZCBwcm9wcywgd2UgZG9uJ3Qgd2FudCB0byBmb3JjZSBjb252ZXJzaW9uXG5cdCAqIGJlY2F1c2UgdGhlIHZhbHVlIG1heSBiZSBhIG5lc3RlZCB2YWx1ZSB1bmRlciBhIGZyb3plbiBkYXRhIHN0cnVjdHVyZS5cblx0ICpcblx0ICogU28gd2hlbmV2ZXIgd2Ugd2FudCB0byBzZXQgYSByZWFjdGl2ZSBwcm9wZXJ0eSB3aXRob3V0IGZvcmNpbmdcblx0ICogY29udmVyc2lvbiBvbiB0aGUgbmV3IHZhbHVlLCB3ZSB3cmFwIHRoYXQgY2FsbCBpbnNpZGUgdGhpcyBmdW5jdGlvbi5cblx0ICovXG5cdFxuXHR2YXIgc2hvdWxkQ29udmVydCA9IHRydWU7XG5cdFxuXHRmdW5jdGlvbiB3aXRob3V0Q29udmVyc2lvbihmbikge1xuXHQgIHNob3VsZENvbnZlcnQgPSBmYWxzZTtcblx0ICBmbigpO1xuXHQgIHNob3VsZENvbnZlcnQgPSB0cnVlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogT2JzZXJ2ZXIgY2xhc3MgdGhhdCBhcmUgYXR0YWNoZWQgdG8gZWFjaCBvYnNlcnZlZFxuXHQgKiBvYmplY3QuIE9uY2UgYXR0YWNoZWQsIHRoZSBvYnNlcnZlciBjb252ZXJ0cyB0YXJnZXRcblx0ICogb2JqZWN0J3MgcHJvcGVydHkga2V5cyBpbnRvIGdldHRlci9zZXR0ZXJzIHRoYXRcblx0ICogY29sbGVjdCBkZXBlbmRlbmNpZXMgYW5kIGRpc3BhdGNoZXMgdXBkYXRlcy5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheXxPYmplY3R9IHZhbHVlXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIE9ic2VydmVyKHZhbHVlKSB7XG5cdCAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuXHQgIHRoaXMuZGVwID0gbmV3IERlcCgpO1xuXHQgIGRlZih2YWx1ZSwgJ19fb2JfXycsIHRoaXMpO1xuXHQgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgdmFyIGF1Z21lbnQgPSBoYXNQcm90byA/IHByb3RvQXVnbWVudCA6IGNvcHlBdWdtZW50O1xuXHQgICAgYXVnbWVudCh2YWx1ZSwgYXJyYXlNZXRob2RzLCBhcnJheUtleXMpO1xuXHQgICAgdGhpcy5vYnNlcnZlQXJyYXkodmFsdWUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLndhbGsodmFsdWUpO1xuXHQgIH1cblx0fVxuXHRcblx0Ly8gSW5zdGFuY2UgbWV0aG9kc1xuXHRcblx0LyoqXG5cdCAqIFdhbGsgdGhyb3VnaCBlYWNoIHByb3BlcnR5IGFuZCBjb252ZXJ0IHRoZW0gaW50b1xuXHQgKiBnZXR0ZXIvc2V0dGVycy4gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIHdoZW5cblx0ICogdmFsdWUgdHlwZSBpcyBPYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICovXG5cdFxuXHRPYnNlcnZlci5wcm90b3R5cGUud2FsayA9IGZ1bmN0aW9uIChvYmopIHtcblx0ICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdGhpcy5jb252ZXJ0KGtleXNbaV0sIG9ialtrZXlzW2ldXSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE9ic2VydmUgYSBsaXN0IG9mIEFycmF5IGl0ZW1zLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBpdGVtc1xuXHQgKi9cblx0XG5cdE9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlQXJyYXkgPSBmdW5jdGlvbiAoaXRlbXMpIHtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGl0ZW1zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgb2JzZXJ2ZShpdGVtc1tpXSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgYSBwcm9wZXJ0eSBpbnRvIGdldHRlci9zZXR0ZXIgc28gd2UgY2FuIGVtaXRcblx0ICogdGhlIGV2ZW50cyB3aGVuIHRoZSBwcm9wZXJ0eSBpcyBhY2Nlc3NlZC9jaGFuZ2VkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqL1xuXHRcblx0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbnZlcnQgPSBmdW5jdGlvbiAoa2V5LCB2YWwpIHtcblx0ICBkZWZpbmVSZWFjdGl2ZSh0aGlzLnZhbHVlLCBrZXksIHZhbCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQWRkIGFuIG93bmVyIHZtLCBzbyB0aGF0IHdoZW4gJHNldC8kZGVsZXRlIG11dGF0aW9uc1xuXHQgKiBoYXBwZW4gd2UgY2FuIG5vdGlmeSBvd25lciB2bXMgdG8gcHJveHkgdGhlIGtleXMgYW5kXG5cdCAqIGRpZ2VzdCB0aGUgd2F0Y2hlcnMuIFRoaXMgaXMgb25seSBjYWxsZWQgd2hlbiB0aGUgb2JqZWN0XG5cdCAqIGlzIG9ic2VydmVkIGFzIGFuIGluc3RhbmNlJ3Mgcm9vdCAkZGF0YS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRcblx0T2JzZXJ2ZXIucHJvdG90eXBlLmFkZFZtID0gZnVuY3Rpb24gKHZtKSB7XG5cdCAgKHRoaXMudm1zIHx8ICh0aGlzLnZtcyA9IFtdKSkucHVzaCh2bSk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGFuIG93bmVyIHZtLiBUaGlzIGlzIGNhbGxlZCB3aGVuIHRoZSBvYmplY3QgaXNcblx0ICogc3dhcHBlZCBvdXQgYXMgYW4gaW5zdGFuY2UncyAkZGF0YSBvYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0XG5cdE9ic2VydmVyLnByb3RvdHlwZS5yZW1vdmVWbSA9IGZ1bmN0aW9uICh2bSkge1xuXHQgIHRoaXMudm1zLiRyZW1vdmUodm0pO1xuXHR9O1xuXHRcblx0Ly8gaGVscGVyc1xuXHRcblx0LyoqXG5cdCAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBpbnRlcmNlcHRpbmdcblx0ICogdGhlIHByb3RvdHlwZSBjaGFpbiB1c2luZyBfX3Byb3RvX19cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHRhcmdldFxuXHQgKiBAcGFyYW0ge09iamVjdH0gc3JjXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJvdG9BdWdtZW50KHRhcmdldCwgc3JjKSB7XG5cdCAgLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cblx0ICB0YXJnZXQuX19wcm90b19fID0gc3JjO1xuXHQgIC8qIGVzbGludC1lbmFibGUgbm8tcHJvdG8gKi9cblx0fVxuXHRcblx0LyoqXG5cdCAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBkZWZpbmluZ1xuXHQgKiBoaWRkZW4gcHJvcGVydGllcy5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHRhcmdldFxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvdG9cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb3B5QXVnbWVudCh0YXJnZXQsIHNyYywga2V5cykge1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuXHQgICAgZGVmKHRhcmdldCwga2V5LCBzcmNba2V5XSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQXR0ZW1wdCB0byBjcmVhdGUgYW4gb2JzZXJ2ZXIgaW5zdGFuY2UgZm9yIGEgdmFsdWUsXG5cdCAqIHJldHVybnMgdGhlIG5ldyBvYnNlcnZlciBpZiBzdWNjZXNzZnVsbHkgb2JzZXJ2ZWQsXG5cdCAqIG9yIHRoZSBleGlzdGluZyBvYnNlcnZlciBpZiB0aGUgdmFsdWUgYWxyZWFkeSBoYXMgb25lLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwYXJhbSB7VnVlfSBbdm1dXG5cdCAqIEByZXR1cm4ge09ic2VydmVyfHVuZGVmaW5lZH1cblx0ICogQHN0YXRpY1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG9ic2VydmUodmFsdWUsIHZtKSB7XG5cdCAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBvYjtcblx0ICBpZiAoaGFzT3duKHZhbHVlLCAnX19vYl9fJykgJiYgdmFsdWUuX19vYl9fIGluc3RhbmNlb2YgT2JzZXJ2ZXIpIHtcblx0ICAgIG9iID0gdmFsdWUuX19vYl9fO1xuXHQgIH0gZWxzZSBpZiAoc2hvdWxkQ29udmVydCAmJiAoaXNBcnJheSh2YWx1ZSkgfHwgaXNQbGFpbk9iamVjdCh2YWx1ZSkpICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpICYmICF2YWx1ZS5faXNWdWUpIHtcblx0ICAgIG9iID0gbmV3IE9ic2VydmVyKHZhbHVlKTtcblx0ICB9XG5cdCAgaWYgKG9iICYmIHZtKSB7XG5cdCAgICBvYi5hZGRWbSh2bSk7XG5cdCAgfVxuXHQgIHJldHVybiBvYjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIERlZmluZSBhIHJlYWN0aXZlIHByb3BlcnR5IG9uIGFuIE9iamVjdC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGVmaW5lUmVhY3RpdmUob2JqLCBrZXksIHZhbCkge1xuXHQgIHZhciBkZXAgPSBuZXcgRGVwKCk7XG5cdFxuXHQgIHZhciBwcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpO1xuXHQgIGlmIChwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5jb25maWd1cmFibGUgPT09IGZhbHNlKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHRcblx0ICAvLyBjYXRlciBmb3IgcHJlLWRlZmluZWQgZ2V0dGVyL3NldHRlcnNcblx0ICB2YXIgZ2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuZ2V0O1xuXHQgIHZhciBzZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5zZXQ7XG5cdFxuXHQgIHZhciBjaGlsZE9iID0gb2JzZXJ2ZSh2YWwpO1xuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuXHQgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0ICAgIGdldDogZnVuY3Rpb24gcmVhY3RpdmVHZXR0ZXIoKSB7XG5cdCAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7XG5cdCAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG5cdCAgICAgICAgZGVwLmRlcGVuZCgpO1xuXHQgICAgICAgIGlmIChjaGlsZE9iKSB7XG5cdCAgICAgICAgICBjaGlsZE9iLmRlcC5kZXBlbmQoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICAgICAgICBmb3IgKHZhciBlLCBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgICAgICBlID0gdmFsdWVbaV07XG5cdCAgICAgICAgICAgIGUgJiYgZS5fX29iX18gJiYgZS5fX29iX18uZGVwLmRlcGVuZCgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdmFsdWU7XG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiByZWFjdGl2ZVNldHRlcihuZXdWYWwpIHtcblx0ICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcblx0ICAgICAgaWYgKG5ld1ZhbCA9PT0gdmFsdWUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHNldHRlcikge1xuXHQgICAgICAgIHNldHRlci5jYWxsKG9iaiwgbmV3VmFsKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YWwgPSBuZXdWYWw7XG5cdCAgICAgIH1cblx0ICAgICAgY2hpbGRPYiA9IG9ic2VydmUobmV3VmFsKTtcblx0ICAgICAgZGVwLm5vdGlmeSgpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9XG5cdFxuXHRcblx0XG5cdHZhciB1dGlsID0gT2JqZWN0LmZyZWV6ZSh7XG5cdFx0ZGVmaW5lUmVhY3RpdmU6IGRlZmluZVJlYWN0aXZlLFxuXHRcdHNldDogc2V0LFxuXHRcdGRlbDogZGVsLFxuXHRcdGhhc093bjogaGFzT3duLFxuXHRcdGlzTGl0ZXJhbDogaXNMaXRlcmFsLFxuXHRcdGlzUmVzZXJ2ZWQ6IGlzUmVzZXJ2ZWQsXG5cdFx0X3RvU3RyaW5nOiBfdG9TdHJpbmcsXG5cdFx0dG9OdW1iZXI6IHRvTnVtYmVyLFxuXHRcdHRvQm9vbGVhbjogdG9Cb29sZWFuLFxuXHRcdHN0cmlwUXVvdGVzOiBzdHJpcFF1b3Rlcyxcblx0XHRjYW1lbGl6ZTogY2FtZWxpemUsXG5cdFx0aHlwaGVuYXRlOiBoeXBoZW5hdGUsXG5cdFx0Y2xhc3NpZnk6IGNsYXNzaWZ5LFxuXHRcdGJpbmQ6IGJpbmQsXG5cdFx0dG9BcnJheTogdG9BcnJheSxcblx0XHRleHRlbmQ6IGV4dGVuZCxcblx0XHRpc09iamVjdDogaXNPYmplY3QsXG5cdFx0aXNQbGFpbk9iamVjdDogaXNQbGFpbk9iamVjdCxcblx0XHRkZWY6IGRlZixcblx0XHRkZWJvdW5jZTogX2RlYm91bmNlLFxuXHRcdGluZGV4T2Y6IGluZGV4T2YsXG5cdFx0Y2FuY2VsbGFibGU6IGNhbmNlbGxhYmxlLFxuXHRcdGxvb3NlRXF1YWw6IGxvb3NlRXF1YWwsXG5cdFx0aXNBcnJheTogaXNBcnJheSxcblx0XHRoYXNQcm90bzogaGFzUHJvdG8sXG5cdFx0aW5Ccm93c2VyOiBpbkJyb3dzZXIsXG5cdFx0ZGV2dG9vbHM6IGRldnRvb2xzLFxuXHRcdGlzSUU6IGlzSUUsXG5cdFx0aXNJRTk6IGlzSUU5LFxuXHRcdGlzQW5kcm9pZDogaXNBbmRyb2lkLFxuXHRcdGlzSW9zOiBpc0lvcyxcblx0XHRpb3NWZXJzaW9uTWF0Y2g6IGlvc1ZlcnNpb25NYXRjaCxcblx0XHRpb3NWZXJzaW9uOiBpb3NWZXJzaW9uLFxuXHRcdGhhc011dGF0aW9uT2JzZXJ2ZXJCdWc6IGhhc011dGF0aW9uT2JzZXJ2ZXJCdWcsXG5cdFx0Z2V0IHRyYW5zaXRpb25Qcm9wICgpIHsgcmV0dXJuIHRyYW5zaXRpb25Qcm9wOyB9LFxuXHRcdGdldCB0cmFuc2l0aW9uRW5kRXZlbnQgKCkgeyByZXR1cm4gdHJhbnNpdGlvbkVuZEV2ZW50OyB9LFxuXHRcdGdldCBhbmltYXRpb25Qcm9wICgpIHsgcmV0dXJuIGFuaW1hdGlvblByb3A7IH0sXG5cdFx0Z2V0IGFuaW1hdGlvbkVuZEV2ZW50ICgpIHsgcmV0dXJuIGFuaW1hdGlvbkVuZEV2ZW50OyB9LFxuXHRcdG5leHRUaWNrOiBuZXh0VGljayxcblx0XHRnZXQgX1NldCAoKSB7IHJldHVybiBfU2V0OyB9LFxuXHRcdHF1ZXJ5OiBxdWVyeSxcblx0XHRpbkRvYzogaW5Eb2MsXG5cdFx0Z2V0QXR0cjogZ2V0QXR0cixcblx0XHRnZXRCaW5kQXR0cjogZ2V0QmluZEF0dHIsXG5cdFx0aGFzQmluZEF0dHI6IGhhc0JpbmRBdHRyLFxuXHRcdGJlZm9yZTogYmVmb3JlLFxuXHRcdGFmdGVyOiBhZnRlcixcblx0XHRyZW1vdmU6IHJlbW92ZSxcblx0XHRwcmVwZW5kOiBwcmVwZW5kLFxuXHRcdHJlcGxhY2U6IHJlcGxhY2UsXG5cdFx0b246IG9uLFxuXHRcdG9mZjogb2ZmLFxuXHRcdHNldENsYXNzOiBzZXRDbGFzcyxcblx0XHRhZGRDbGFzczogYWRkQ2xhc3MsXG5cdFx0cmVtb3ZlQ2xhc3M6IHJlbW92ZUNsYXNzLFxuXHRcdGV4dHJhY3RDb250ZW50OiBleHRyYWN0Q29udGVudCxcblx0XHR0cmltTm9kZTogdHJpbU5vZGUsXG5cdFx0aXNUZW1wbGF0ZTogaXNUZW1wbGF0ZSxcblx0XHRjcmVhdGVBbmNob3I6IGNyZWF0ZUFuY2hvcixcblx0XHRmaW5kUmVmOiBmaW5kUmVmLFxuXHRcdG1hcE5vZGVSYW5nZTogbWFwTm9kZVJhbmdlLFxuXHRcdHJlbW92ZU5vZGVSYW5nZTogcmVtb3ZlTm9kZVJhbmdlLFxuXHRcdGlzRnJhZ21lbnQ6IGlzRnJhZ21lbnQsXG5cdFx0Z2V0T3V0ZXJIVE1MOiBnZXRPdXRlckhUTUwsXG5cdFx0bWVyZ2VPcHRpb25zOiBtZXJnZU9wdGlvbnMsXG5cdFx0cmVzb2x2ZUFzc2V0OiByZXNvbHZlQXNzZXQsXG5cdFx0Y2hlY2tDb21wb25lbnRBdHRyOiBjaGVja0NvbXBvbmVudEF0dHIsXG5cdFx0Y29tbW9uVGFnUkU6IGNvbW1vblRhZ1JFLFxuXHRcdHJlc2VydmVkVGFnUkU6IHJlc2VydmVkVGFnUkUsXG5cdFx0Z2V0IHdhcm4gKCkgeyByZXR1cm4gd2FybjsgfVxuXHR9KTtcblx0XG5cdHZhciB1aWQgPSAwO1xuXHRcblx0ZnVuY3Rpb24gaW5pdE1peGluIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBUaGUgbWFpbiBpbml0IHNlcXVlbmNlLiBUaGlzIGlzIGNhbGxlZCBmb3IgZXZlcnlcblx0ICAgKiBpbnN0YW5jZSwgaW5jbHVkaW5nIG9uZXMgdGhhdCBhcmUgY3JlYXRlZCBmcm9tIGV4dGVuZGVkXG5cdCAgICogY29uc3RydWN0b3JzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSB0aGlzIG9wdGlvbnMgb2JqZWN0IHNob3VsZCBiZVxuXHQgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHJlc3VsdCBvZiBtZXJnaW5nIGNsYXNzXG5cdCAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zIGFuZCB0aGUgb3B0aW9ucyBwYXNzZWRcblx0ICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIHRvIHRoZSBjb25zdHJ1Y3Rvci5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdCAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0XG5cdCAgICB0aGlzLiRlbCA9IG51bGw7XG5cdCAgICB0aGlzLiRwYXJlbnQgPSBvcHRpb25zLnBhcmVudDtcblx0ICAgIHRoaXMuJHJvb3QgPSB0aGlzLiRwYXJlbnQgPyB0aGlzLiRwYXJlbnQuJHJvb3QgOiB0aGlzO1xuXHQgICAgdGhpcy4kY2hpbGRyZW4gPSBbXTtcblx0ICAgIHRoaXMuJHJlZnMgPSB7fTsgLy8gY2hpbGQgdm0gcmVmZXJlbmNlc1xuXHQgICAgdGhpcy4kZWxzID0ge307IC8vIGVsZW1lbnQgcmVmZXJlbmNlc1xuXHQgICAgdGhpcy5fd2F0Y2hlcnMgPSBbXTsgLy8gYWxsIHdhdGNoZXJzIGFzIGFuIGFycmF5XG5cdCAgICB0aGlzLl9kaXJlY3RpdmVzID0gW107IC8vIGFsbCBkaXJlY3RpdmVzXG5cdFxuXHQgICAgLy8gYSB1aWRcblx0ICAgIHRoaXMuX3VpZCA9IHVpZCsrO1xuXHRcblx0ICAgIC8vIGEgZmxhZyB0byBhdm9pZCB0aGlzIGJlaW5nIG9ic2VydmVkXG5cdCAgICB0aGlzLl9pc1Z1ZSA9IHRydWU7XG5cdFxuXHQgICAgLy8gZXZlbnRzIGJvb2trZWVwaW5nXG5cdCAgICB0aGlzLl9ldmVudHMgPSB7fTsgLy8gcmVnaXN0ZXJlZCBjYWxsYmFja3Ncblx0ICAgIHRoaXMuX2V2ZW50c0NvdW50ID0ge307IC8vIGZvciAkYnJvYWRjYXN0IG9wdGltaXphdGlvblxuXHRcblx0ICAgIC8vIGZyYWdtZW50IGluc3RhbmNlIHByb3BlcnRpZXNcblx0ICAgIHRoaXMuX2lzRnJhZ21lbnQgPSBmYWxzZTtcblx0ICAgIHRoaXMuX2ZyYWdtZW50ID0gLy8gQHR5cGUge0RvY3VtZW50RnJhZ21lbnR9XG5cdCAgICB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gLy8gQHR5cGUge1RleHR8Q29tbWVudH1cblx0ICAgIHRoaXMuX2ZyYWdtZW50RW5kID0gbnVsbDsgLy8gQHR5cGUge1RleHR8Q29tbWVudH1cblx0XG5cdCAgICAvLyBsaWZlY3ljbGUgc3RhdGVcblx0ICAgIHRoaXMuX2lzQ29tcGlsZWQgPSB0aGlzLl9pc0Rlc3Ryb3llZCA9IHRoaXMuX2lzUmVhZHkgPSB0aGlzLl9pc0F0dGFjaGVkID0gdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCA9IHRoaXMuX3ZGb3JSZW1vdmluZyA9IGZhbHNlO1xuXHQgICAgdGhpcy5fdW5saW5rRm4gPSBudWxsO1xuXHRcblx0ICAgIC8vIGNvbnRleHQ6XG5cdCAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBjb250ZXh0XG5cdCAgICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2Vcblx0ICAgIC8vIGFuZCBpdHMgaG9zdC5cblx0ICAgIHRoaXMuX2NvbnRleHQgPSBvcHRpb25zLl9jb250ZXh0IHx8IHRoaXMuJHBhcmVudDtcblx0XG5cdCAgICAvLyBzY29wZTpcblx0ICAgIC8vIGlmIHRoaXMgaXMgaW5zaWRlIGFuIGlubGluZSB2LWZvciwgdGhlIHNjb3BlXG5cdCAgICAvLyB3aWxsIGJlIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgY3JlYXRlZCBmb3IgdGhpc1xuXHQgICAgLy8gcmVwZWF0IGZyYWdtZW50LiB0aGlzIGlzIHVzZWQgZm9yIGxpbmtpbmcgcHJvcHNcblx0ICAgIC8vIGFuZCBjb250YWluZXIgZGlyZWN0aXZlcy5cblx0ICAgIHRoaXMuX3Njb3BlID0gb3B0aW9ucy5fc2NvcGU7XG5cdFxuXHQgICAgLy8gZnJhZ21lbnQ6XG5cdCAgICAvLyBpZiB0aGlzIGluc3RhbmNlIGlzIGNvbXBpbGVkIGluc2lkZSBhIEZyYWdtZW50LCBpdFxuXHQgICAgLy8gbmVlZHMgdG8gcmVpZ3N0ZXIgaXRzZWxmIGFzIGEgY2hpbGQgb2YgdGhhdCBmcmFnbWVudFxuXHQgICAgLy8gZm9yIGF0dGFjaC9kZXRhY2ggdG8gd29yayBwcm9wZXJseS5cblx0ICAgIHRoaXMuX2ZyYWcgPSBvcHRpb25zLl9mcmFnO1xuXHQgICAgaWYgKHRoaXMuX2ZyYWcpIHtcblx0ICAgICAgdGhpcy5fZnJhZy5jaGlsZHJlbi5wdXNoKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHB1c2ggc2VsZiBpbnRvIHBhcmVudCAvIHRyYW5zY2x1c2lvbiBob3N0XG5cdCAgICBpZiAodGhpcy4kcGFyZW50KSB7XG5cdCAgICAgIHRoaXMuJHBhcmVudC4kY2hpbGRyZW4ucHVzaCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBtZXJnZSBvcHRpb25zLlxuXHQgICAgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnMgPSBtZXJnZU9wdGlvbnModGhpcy5jb25zdHJ1Y3Rvci5vcHRpb25zLCBvcHRpb25zLCB0aGlzKTtcblx0XG5cdCAgICAvLyBzZXQgcmVmXG5cdCAgICB0aGlzLl91cGRhdGVSZWYoKTtcblx0XG5cdCAgICAvLyBpbml0aWFsaXplIGRhdGEgYXMgZW1wdHkgb2JqZWN0LlxuXHQgICAgLy8gaXQgd2lsbCBiZSBmaWxsZWQgdXAgaW4gX2luaXREYXRhKCkuXG5cdCAgICB0aGlzLl9kYXRhID0ge307XG5cdFxuXHQgICAgLy8gY2FsbCBpbml0IGhvb2tcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdpbml0Jyk7XG5cdFxuXHQgICAgLy8gaW5pdGlhbGl6ZSBkYXRhIG9ic2VydmF0aW9uIGFuZCBzY29wZSBpbmhlcml0YW5jZS5cblx0ICAgIHRoaXMuX2luaXRTdGF0ZSgpO1xuXHRcblx0ICAgIC8vIHNldHVwIGV2ZW50IHN5c3RlbSBhbmQgb3B0aW9uIGV2ZW50cy5cblx0ICAgIHRoaXMuX2luaXRFdmVudHMoKTtcblx0XG5cdCAgICAvLyBjYWxsIGNyZWF0ZWQgaG9va1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2NyZWF0ZWQnKTtcblx0XG5cdCAgICAvLyBpZiBgZWxgIG9wdGlvbiBpcyBwYXNzZWQsIHN0YXJ0IGNvbXBpbGF0aW9uLlxuXHQgICAgaWYgKG9wdGlvbnMuZWwpIHtcblx0ICAgICAgdGhpcy4kbW91bnQob3B0aW9ucy5lbCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0dmFyIHBhdGhDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0XG5cdC8vIGFjdGlvbnNcblx0dmFyIEFQUEVORCA9IDA7XG5cdHZhciBQVVNIID0gMTtcblx0dmFyIElOQ19TVUJfUEFUSF9ERVBUSCA9IDI7XG5cdHZhciBQVVNIX1NVQl9QQVRIID0gMztcblx0XG5cdC8vIHN0YXRlc1xuXHR2YXIgQkVGT1JFX1BBVEggPSAwO1xuXHR2YXIgSU5fUEFUSCA9IDE7XG5cdHZhciBCRUZPUkVfSURFTlQgPSAyO1xuXHR2YXIgSU5fSURFTlQgPSAzO1xuXHR2YXIgSU5fU1VCX1BBVEggPSA0O1xuXHR2YXIgSU5fU0lOR0xFX1FVT1RFID0gNTtcblx0dmFyIElOX0RPVUJMRV9RVU9URSA9IDY7XG5cdHZhciBBRlRFUl9QQVRIID0gNztcblx0dmFyIEVSUk9SID0gODtcblx0XG5cdHZhciBwYXRoU3RhdGVNYWNoaW5lID0gW107XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9QQVRIXSA9IHtcblx0ICAnd3MnOiBbQkVGT1JFX1BBVEhdLFxuXHQgICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcblx0ICAnWyc6IFtJTl9TVUJfUEFUSF0sXG5cdCAgJ2VvZic6IFtBRlRFUl9QQVRIXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtJTl9QQVRIXSA9IHtcblx0ICAnd3MnOiBbSU5fUEFUSF0sXG5cdCAgJy4nOiBbQkVGT1JFX0lERU5UXSxcblx0ICAnWyc6IFtJTl9TVUJfUEFUSF0sXG5cdCAgJ2VvZic6IFtBRlRFUl9QQVRIXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtCRUZPUkVfSURFTlRdID0ge1xuXHQgICd3cyc6IFtCRUZPUkVfSURFTlRdLFxuXHQgICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtJTl9JREVOVF0gPSB7XG5cdCAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdLFxuXHQgICcwJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuXHQgICdudW1iZXInOiBbSU5fSURFTlQsIEFQUEVORF0sXG5cdCAgJ3dzJzogW0lOX1BBVEgsIFBVU0hdLFxuXHQgICcuJzogW0JFRk9SRV9JREVOVCwgUFVTSF0sXG5cdCAgJ1snOiBbSU5fU1VCX1BBVEgsIFBVU0hdLFxuXHQgICdlb2YnOiBbQUZURVJfUEFUSCwgUFVTSF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbSU5fU1VCX1BBVEhdID0ge1xuXHQgIFwiJ1wiOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkRdLFxuXHQgICdcIic6IFtJTl9ET1VCTEVfUVVPVEUsIEFQUEVORF0sXG5cdCAgJ1snOiBbSU5fU1VCX1BBVEgsIElOQ19TVUJfUEFUSF9ERVBUSF0sXG5cdCAgJ10nOiBbSU5fUEFUSCwgUFVTSF9TVUJfUEFUSF0sXG5cdCAgJ2VvZic6IEVSUk9SLFxuXHQgICdlbHNlJzogW0lOX1NVQl9QQVRILCBBUFBFTkRdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0lOX1NJTkdMRV9RVU9URV0gPSB7XG5cdCAgXCInXCI6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXSxcblx0ICAnZW9mJzogRVJST1IsXG5cdCAgJ2Vsc2UnOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkRdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0lOX0RPVUJMRV9RVU9URV0gPSB7XG5cdCAgJ1wiJzogW0lOX1NVQl9QQVRILCBBUFBFTkRdLFxuXHQgICdlb2YnOiBFUlJPUixcblx0ICAnZWxzZSc6IFtJTl9ET1VCTEVfUVVPVEUsIEFQUEVORF1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgdGhlIHR5cGUgb2YgYSBjaGFyYWN0ZXIgaW4gYSBrZXlwYXRoLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0NoYXJ9IGNoXG5cdCAqIEByZXR1cm4ge1N0cmluZ30gdHlwZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldFBhdGhDaGFyVHlwZShjaCkge1xuXHQgIGlmIChjaCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ2VvZic7XG5cdCAgfVxuXHRcblx0ICB2YXIgY29kZSA9IGNoLmNoYXJDb2RlQXQoMCk7XG5cdFxuXHQgIHN3aXRjaCAoY29kZSkge1xuXHQgICAgY2FzZSAweDVCOiAvLyBbXG5cdCAgICBjYXNlIDB4NUQ6IC8vIF1cblx0ICAgIGNhc2UgMHgyRTogLy8gLlxuXHQgICAgY2FzZSAweDIyOiAvLyBcIlxuXHQgICAgY2FzZSAweDI3OiAvLyAnXG5cdCAgICBjYXNlIDB4MzA6XG5cdCAgICAgIC8vIDBcblx0ICAgICAgcmV0dXJuIGNoO1xuXHRcblx0ICAgIGNhc2UgMHg1RjogLy8gX1xuXHQgICAgY2FzZSAweDI0OlxuXHQgICAgICAvLyAkXG5cdCAgICAgIHJldHVybiAnaWRlbnQnO1xuXHRcblx0ICAgIGNhc2UgMHgyMDogLy8gU3BhY2Vcblx0ICAgIGNhc2UgMHgwOTogLy8gVGFiXG5cdCAgICBjYXNlIDB4MEE6IC8vIE5ld2xpbmVcblx0ICAgIGNhc2UgMHgwRDogLy8gUmV0dXJuXG5cdCAgICBjYXNlIDB4QTA6IC8vIE5vLWJyZWFrIHNwYWNlXG5cdCAgICBjYXNlIDB4RkVGRjogLy8gQnl0ZSBPcmRlciBNYXJrXG5cdCAgICBjYXNlIDB4MjAyODogLy8gTGluZSBTZXBhcmF0b3Jcblx0ICAgIGNhc2UgMHgyMDI5OlxuXHQgICAgICAvLyBQYXJhZ3JhcGggU2VwYXJhdG9yXG5cdCAgICAgIHJldHVybiAnd3MnO1xuXHQgIH1cblx0XG5cdCAgLy8gYS16LCBBLVpcblx0ICBpZiAoY29kZSA+PSAweDYxICYmIGNvZGUgPD0gMHg3QSB8fCBjb2RlID49IDB4NDEgJiYgY29kZSA8PSAweDVBKSB7XG5cdCAgICByZXR1cm4gJ2lkZW50Jztcblx0ICB9XG5cdFxuXHQgIC8vIDEtOVxuXHQgIGlmIChjb2RlID49IDB4MzEgJiYgY29kZSA8PSAweDM5KSB7XG5cdCAgICByZXR1cm4gJ251bWJlcic7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gJ2Vsc2UnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9ybWF0IGEgc3ViUGF0aCwgcmV0dXJuIGl0cyBwbGFpbiBmb3JtIGlmIGl0IGlzXG5cdCAqIGEgbGl0ZXJhbCBzdHJpbmcgb3IgbnVtYmVyLiBPdGhlcndpc2UgcHJlcGVuZCB0aGVcblx0ICogZHluYW1pYyBpbmRpY2F0b3IgKCopLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZm9ybWF0U3ViUGF0aChwYXRoKSB7XG5cdCAgdmFyIHRyaW1tZWQgPSBwYXRoLnRyaW0oKTtcblx0ICAvLyBpbnZhbGlkIGxlYWRpbmcgMFxuXHQgIGlmIChwYXRoLmNoYXJBdCgwKSA9PT0gJzAnICYmIGlzTmFOKHBhdGgpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHJldHVybiBpc0xpdGVyYWwodHJpbW1lZCkgPyBzdHJpcFF1b3Rlcyh0cmltbWVkKSA6ICcqJyArIHRyaW1tZWQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBhIHN0cmluZyBwYXRoIGludG8gYW4gYXJyYXkgb2Ygc2VnbWVudHNcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICogQHJldHVybiB7QXJyYXl8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlKHBhdGgpIHtcblx0ICB2YXIga2V5cyA9IFtdO1xuXHQgIHZhciBpbmRleCA9IC0xO1xuXHQgIHZhciBtb2RlID0gQkVGT1JFX1BBVEg7XG5cdCAgdmFyIHN1YlBhdGhEZXB0aCA9IDA7XG5cdCAgdmFyIGMsIG5ld0NoYXIsIGtleSwgdHlwZSwgdHJhbnNpdGlvbiwgYWN0aW9uLCB0eXBlTWFwO1xuXHRcblx0ICB2YXIgYWN0aW9ucyA9IFtdO1xuXHRcblx0ICBhY3Rpb25zW1BVU0hdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKGtleSAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGtleXMucHVzaChrZXkpO1xuXHQgICAgICBrZXkgPSB1bmRlZmluZWQ7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgYWN0aW9uc1tBUFBFTkRdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGtleSA9IG5ld0NoYXI7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBrZXkgKz0gbmV3Q2hhcjtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBhY3Rpb25zW0lOQ19TVUJfUEFUSF9ERVBUSF0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBhY3Rpb25zW0FQUEVORF0oKTtcblx0ICAgIHN1YlBhdGhEZXB0aCsrO1xuXHQgIH07XG5cdFxuXHQgIGFjdGlvbnNbUFVTSF9TVUJfUEFUSF0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoc3ViUGF0aERlcHRoID4gMCkge1xuXHQgICAgICBzdWJQYXRoRGVwdGgtLTtcblx0ICAgICAgbW9kZSA9IElOX1NVQl9QQVRIO1xuXHQgICAgICBhY3Rpb25zW0FQUEVORF0oKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN1YlBhdGhEZXB0aCA9IDA7XG5cdCAgICAgIGtleSA9IGZvcm1hdFN1YlBhdGgoa2V5KTtcblx0ICAgICAgaWYgKGtleSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgYWN0aW9uc1tQVVNIXSgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gbWF5YmVVbmVzY2FwZVF1b3RlKCkge1xuXHQgICAgdmFyIG5leHRDaGFyID0gcGF0aFtpbmRleCArIDFdO1xuXHQgICAgaWYgKG1vZGUgPT09IElOX1NJTkdMRV9RVU9URSAmJiBuZXh0Q2hhciA9PT0gXCInXCIgfHwgbW9kZSA9PT0gSU5fRE9VQkxFX1FVT1RFICYmIG5leHRDaGFyID09PSAnXCInKSB7XG5cdCAgICAgIGluZGV4Kys7XG5cdCAgICAgIG5ld0NoYXIgPSAnXFxcXCcgKyBuZXh0Q2hhcjtcblx0ICAgICAgYWN0aW9uc1tBUFBFTkRdKCk7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgd2hpbGUgKG1vZGUgIT0gbnVsbCkge1xuXHQgICAgaW5kZXgrKztcblx0ICAgIGMgPSBwYXRoW2luZGV4XTtcblx0XG5cdCAgICBpZiAoYyA9PT0gJ1xcXFwnICYmIG1heWJlVW5lc2NhcGVRdW90ZSgpKSB7XG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIHR5cGUgPSBnZXRQYXRoQ2hhclR5cGUoYyk7XG5cdCAgICB0eXBlTWFwID0gcGF0aFN0YXRlTWFjaGluZVttb2RlXTtcblx0ICAgIHRyYW5zaXRpb24gPSB0eXBlTWFwW3R5cGVdIHx8IHR5cGVNYXBbJ2Vsc2UnXSB8fCBFUlJPUjtcblx0XG5cdCAgICBpZiAodHJhbnNpdGlvbiA9PT0gRVJST1IpIHtcblx0ICAgICAgcmV0dXJuOyAvLyBwYXJzZSBlcnJvclxuXHQgICAgfVxuXHRcblx0ICAgIG1vZGUgPSB0cmFuc2l0aW9uWzBdO1xuXHQgICAgYWN0aW9uID0gYWN0aW9uc1t0cmFuc2l0aW9uWzFdXTtcblx0ICAgIGlmIChhY3Rpb24pIHtcblx0ICAgICAgbmV3Q2hhciA9IHRyYW5zaXRpb25bMl07XG5cdCAgICAgIG5ld0NoYXIgPSBuZXdDaGFyID09PSB1bmRlZmluZWQgPyBjIDogbmV3Q2hhcjtcblx0ICAgICAgaWYgKGFjdGlvbigpID09PSBmYWxzZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChtb2RlID09PSBBRlRFUl9QQVRIKSB7XG5cdCAgICAgIGtleXMucmF3ID0gcGF0aDtcblx0ICAgICAgcmV0dXJuIGtleXM7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRXh0ZXJuYWwgcGFyc2UgdGhhdCBjaGVjayBmb3IgYSBjYWNoZSBoaXQgZmlyc3Rcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICogQHJldHVybiB7QXJyYXl8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlUGF0aChwYXRoKSB7XG5cdCAgdmFyIGhpdCA9IHBhdGhDYWNoZS5nZXQocGF0aCk7XG5cdCAgaWYgKCFoaXQpIHtcblx0ICAgIGhpdCA9IHBhcnNlKHBhdGgpO1xuXHQgICAgaWYgKGhpdCkge1xuXHQgICAgICBwYXRoQ2FjaGUucHV0KHBhdGgsIGhpdCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBoaXQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgZnJvbSBhbiBvYmplY3QgZnJvbSBhIHBhdGggc3RyaW5nXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRQYXRoKG9iaiwgcGF0aCkge1xuXHQgIHJldHVybiBwYXJzZUV4cHJlc3Npb24ocGF0aCkuZ2V0KG9iaik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBXYXJuIGFnYWluc3Qgc2V0dGluZyBub24tZXhpc3RlbnQgcm9vdCBwYXRoIG9uIGEgdm0uXG5cdCAqL1xuXHRcblx0dmFyIHdhcm5Ob25FeGlzdGVudDtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICB3YXJuTm9uRXhpc3RlbnQgPSBmdW5jdGlvbiAocGF0aCwgdm0pIHtcblx0ICAgIHdhcm4oJ1lvdSBhcmUgc2V0dGluZyBhIG5vbi1leGlzdGVudCBwYXRoIFwiJyArIHBhdGgucmF3ICsgJ1wiICcgKyAnb24gYSB2bSBpbnN0YW5jZS4gQ29uc2lkZXIgcHJlLWluaXRpYWxpemluZyB0aGUgcHJvcGVydHkgJyArICd3aXRoIHRoZSBcImRhdGFcIiBvcHRpb24gZm9yIG1vcmUgcmVsaWFibGUgcmVhY3Rpdml0eSAnICsgJ2FuZCBiZXR0ZXIgcGVyZm9ybWFuY2UuJywgdm0pO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTZXQgb24gYW4gb2JqZWN0IGZyb20gYSBwYXRoXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmcgfCBBcnJheX0gcGF0aFxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHNldFBhdGgob2JqLCBwYXRoLCB2YWwpIHtcblx0ICB2YXIgb3JpZ2luYWwgPSBvYmo7XG5cdCAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuXHQgICAgcGF0aCA9IHBhcnNlKHBhdGgpO1xuXHQgIH1cblx0ICBpZiAoIXBhdGggfHwgIWlzT2JqZWN0KG9iaikpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgdmFyIGxhc3QsIGtleTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IHBhdGgubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBsYXN0ID0gb2JqO1xuXHQgICAga2V5ID0gcGF0aFtpXTtcblx0ICAgIGlmIChrZXkuY2hhckF0KDApID09PSAnKicpIHtcblx0ICAgICAga2V5ID0gcGFyc2VFeHByZXNzaW9uKGtleS5zbGljZSgxKSkuZ2V0LmNhbGwob3JpZ2luYWwsIG9yaWdpbmFsKTtcblx0ICAgIH1cblx0ICAgIGlmIChpIDwgbCAtIDEpIHtcblx0ICAgICAgb2JqID0gb2JqW2tleV07XG5cdCAgICAgIGlmICghaXNPYmplY3Qob2JqKSkge1xuXHQgICAgICAgIG9iaiA9IHt9O1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGxhc3QuX2lzVnVlKSB7XG5cdCAgICAgICAgICB3YXJuTm9uRXhpc3RlbnQocGF0aCwgbGFzdCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHNldChsYXN0LCBrZXksIG9iaik7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmIChpc0FycmF5KG9iaikpIHtcblx0ICAgICAgICBvYmouJHNldChrZXksIHZhbCk7XG5cdCAgICAgIH0gZWxzZSBpZiAoa2V5IGluIG9iaikge1xuXHQgICAgICAgIG9ialtrZXldID0gdmFsO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG9iai5faXNWdWUpIHtcblx0ICAgICAgICAgIHdhcm5Ob25FeGlzdGVudChwYXRoLCBvYmopO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzZXQob2JqLCBrZXksIHZhbCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdHZhciBwYXRoID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgcGFyc2VQYXRoOiBwYXJzZVBhdGgsXG5cdCAgZ2V0UGF0aDogZ2V0UGF0aCxcblx0ICBzZXRQYXRoOiBzZXRQYXRoXG5cdH0pO1xuXHRcblx0dmFyIGV4cHJlc3Npb25DYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0XG5cdHZhciBhbGxvd2VkS2V5d29yZHMgPSAnTWF0aCxEYXRlLHRoaXMsdHJ1ZSxmYWxzZSxudWxsLHVuZGVmaW5lZCxJbmZpbml0eSxOYU4sJyArICdpc05hTixpc0Zpbml0ZSxkZWNvZGVVUkksZGVjb2RlVVJJQ29tcG9uZW50LGVuY29kZVVSSSwnICsgJ2VuY29kZVVSSUNvbXBvbmVudCxwYXJzZUludCxwYXJzZUZsb2F0Jztcblx0dmFyIGFsbG93ZWRLZXl3b3Jkc1JFID0gbmV3IFJlZ0V4cCgnXignICsgYWxsb3dlZEtleXdvcmRzLnJlcGxhY2UoLywvZywgJ1xcXFxifCcpICsgJ1xcXFxiKScpO1xuXHRcblx0Ly8ga2V5d29yZHMgdGhhdCBkb24ndCBtYWtlIHNlbnNlIGluc2lkZSBleHByZXNzaW9uc1xuXHR2YXIgaW1wcm9wZXJLZXl3b3JkcyA9ICdicmVhayxjYXNlLGNsYXNzLGNhdGNoLGNvbnN0LGNvbnRpbnVlLGRlYnVnZ2VyLGRlZmF1bHQsJyArICdkZWxldGUsZG8sZWxzZSxleHBvcnQsZXh0ZW5kcyxmaW5hbGx5LGZvcixmdW5jdGlvbixpZiwnICsgJ2ltcG9ydCxpbixpbnN0YW5jZW9mLGxldCxyZXR1cm4sc3VwZXIsc3dpdGNoLHRocm93LHRyeSwnICsgJ3Zhcix3aGlsZSx3aXRoLHlpZWxkLGVudW0sYXdhaXQsaW1wbGVtZW50cyxwYWNrYWdlLCcgKyAncHJvdGVjdGVkLHN0YXRpYyxpbnRlcmZhY2UscHJpdmF0ZSxwdWJsaWMnO1xuXHR2YXIgaW1wcm9wZXJLZXl3b3Jkc1JFID0gbmV3IFJlZ0V4cCgnXignICsgaW1wcm9wZXJLZXl3b3Jkcy5yZXBsYWNlKC8sL2csICdcXFxcYnwnKSArICdcXFxcYiknKTtcblx0XG5cdHZhciB3c1JFID0gL1xccy9nO1xuXHR2YXIgbmV3bGluZVJFID0gL1xcbi9nO1xuXHR2YXIgc2F2ZVJFID0gL1tcXHssXVxccypbXFx3XFwkX10rXFxzKjp8KCcoPzpbXidcXFxcXXxcXFxcLikqJ3xcIig/OlteXCJcXFxcXXxcXFxcLikqXCJ8YCg/OlteYFxcXFxdfFxcXFwuKSpcXCRcXHt8XFx9KD86W15gXFxcXF18XFxcXC4pKmB8YCg/OlteYFxcXFxdfFxcXFwuKSpgKXxuZXcgfHR5cGVvZiB8dm9pZCAvZztcblx0dmFyIHJlc3RvcmVSRSA9IC9cIihcXGQrKVwiL2c7XG5cdHZhciBwYXRoVGVzdFJFID0gL15bQS1aYS16XyRdW1xcdyRdKig/OlxcLltBLVphLXpfJF1bXFx3JF0qfFxcWycuKj8nXFxdfFxcW1wiLio/XCJcXF18XFxbXFxkK1xcXXxcXFtbQS1aYS16XyRdW1xcdyRdKlxcXSkqJC87XG5cdHZhciBpZGVudFJFID0gL1teXFx3JFxcLl0oPzpbQS1aYS16XyRdW1xcdyRdKikvZztcblx0dmFyIGxpdGVyYWxWYWx1ZVJFJDEgPSAvXig/OnRydWV8ZmFsc2V8bnVsbHx1bmRlZmluZWR8SW5maW5pdHl8TmFOKSQvO1xuXHRcblx0ZnVuY3Rpb24gbm9vcCgpIHt9XG5cdFxuXHQvKipcblx0ICogU2F2ZSAvIFJld3JpdGUgLyBSZXN0b3JlXG5cdCAqXG5cdCAqIFdoZW4gcmV3cml0aW5nIHBhdGhzIGZvdW5kIGluIGFuIGV4cHJlc3Npb24sIGl0IGlzXG5cdCAqIHBvc3NpYmxlIGZvciB0aGUgc2FtZSBsZXR0ZXIgc2VxdWVuY2VzIHRvIGJlIGZvdW5kIGluXG5cdCAqIHN0cmluZ3MgYW5kIE9iamVjdCBsaXRlcmFsIHByb3BlcnR5IGtleXMuIFRoZXJlZm9yZSB3ZVxuXHQgKiByZW1vdmUgYW5kIHN0b3JlIHRoZXNlIHBhcnRzIGluIGEgdGVtcG9yYXJ5IGFycmF5LCBhbmRcblx0ICogcmVzdG9yZSB0aGVtIGFmdGVyIHRoZSBwYXRoIHJld3JpdGUuXG5cdCAqL1xuXHRcblx0dmFyIHNhdmVkID0gW107XG5cdFxuXHQvKipcblx0ICogU2F2ZSByZXBsYWNlclxuXHQgKlxuXHQgKiBUaGUgc2F2ZSByZWdleCBjYW4gbWF0Y2ggdHdvIHBvc3NpYmxlIGNhc2VzOlxuXHQgKiAxLiBBbiBvcGVuaW5nIG9iamVjdCBsaXRlcmFsXG5cdCAqIDIuIEEgc3RyaW5nXG5cdCAqIElmIG1hdGNoZWQgYXMgYSBwbGFpbiBzdHJpbmcsIHdlIG5lZWQgdG8gZXNjYXBlIGl0c1xuXHQgKiBuZXdsaW5lcywgc2luY2UgdGhlIHN0cmluZyBuZWVkcyB0byBiZSBwcmVzZXJ2ZWQgd2hlblxuXHQgKiBnZW5lcmF0aW5nIHRoZSBmdW5jdGlvbiBib2R5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpc1N0cmluZyAtIHN0ciBpZiBtYXRjaGVkIGFzIGEgc3RyaW5nXG5cdCAqIEByZXR1cm4ge1N0cmluZ30gLSBwbGFjZWhvbGRlciB3aXRoIGluZGV4XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2F2ZShzdHIsIGlzU3RyaW5nKSB7XG5cdCAgdmFyIGkgPSBzYXZlZC5sZW5ndGg7XG5cdCAgc2F2ZWRbaV0gPSBpc1N0cmluZyA/IHN0ci5yZXBsYWNlKG5ld2xpbmVSRSwgJ1xcXFxuJykgOiBzdHI7XG5cdCAgcmV0dXJuICdcIicgKyBpICsgJ1wiJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhdGggcmV3cml0ZSByZXBsYWNlclxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcmF3XG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXdyaXRlKHJhdykge1xuXHQgIHZhciBjID0gcmF3LmNoYXJBdCgwKTtcblx0ICB2YXIgcGF0aCA9IHJhdy5zbGljZSgxKTtcblx0ICBpZiAoYWxsb3dlZEtleXdvcmRzUkUudGVzdChwYXRoKSkge1xuXHQgICAgcmV0dXJuIHJhdztcblx0ICB9IGVsc2Uge1xuXHQgICAgcGF0aCA9IHBhdGguaW5kZXhPZignXCInKSA+IC0xID8gcGF0aC5yZXBsYWNlKHJlc3RvcmVSRSwgcmVzdG9yZSkgOiBwYXRoO1xuXHQgICAgcmV0dXJuIGMgKyAnc2NvcGUuJyArIHBhdGg7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVzdG9yZSByZXBsYWNlclxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpIC0gbWF0Y2hlZCBzYXZlIGluZGV4XG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXN0b3JlKHN0ciwgaSkge1xuXHQgIHJldHVybiBzYXZlZFtpXTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJld3JpdGUgYW4gZXhwcmVzc2lvbiwgcHJlZml4aW5nIGFsbCBwYXRoIGFjY2Vzc29ycyB3aXRoXG5cdCAqIGBzY29wZS5gIGFuZCBnZW5lcmF0ZSBnZXR0ZXIvc2V0dGVyIGZ1bmN0aW9ucy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlR2V0dGVyKGV4cCkge1xuXHQgIGlmIChpbXByb3BlcktleXdvcmRzUkUudGVzdChleHApKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0F2b2lkIHVzaW5nIHJlc2VydmVkIGtleXdvcmRzIGluIGV4cHJlc3Npb246ICcgKyBleHApO1xuXHQgIH1cblx0ICAvLyByZXNldCBzdGF0ZVxuXHQgIHNhdmVkLmxlbmd0aCA9IDA7XG5cdCAgLy8gc2F2ZSBzdHJpbmdzIGFuZCBvYmplY3QgbGl0ZXJhbCBrZXlzXG5cdCAgdmFyIGJvZHkgPSBleHAucmVwbGFjZShzYXZlUkUsIHNhdmUpLnJlcGxhY2Uod3NSRSwgJycpO1xuXHQgIC8vIHJld3JpdGUgYWxsIHBhdGhzXG5cdCAgLy8gcGFkIDEgc3BhY2UgaGVyZSBiZWNhdXNlIHRoZSByZWdleCBtYXRjaGVzIDEgZXh0cmEgY2hhclxuXHQgIGJvZHkgPSAoJyAnICsgYm9keSkucmVwbGFjZShpZGVudFJFLCByZXdyaXRlKS5yZXBsYWNlKHJlc3RvcmVSRSwgcmVzdG9yZSk7XG5cdCAgcmV0dXJuIG1ha2VHZXR0ZXJGbihib2R5KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEJ1aWxkIGEgZ2V0dGVyIGZ1bmN0aW9uLiBSZXF1aXJlcyBldmFsLlxuXHQgKlxuXHQgKiBXZSBpc29sYXRlIHRoZSB0cnkvY2F0Y2ggc28gaXQgZG9lc24ndCBhZmZlY3QgdGhlXG5cdCAqIG9wdGltaXphdGlvbiBvZiB0aGUgcGFyc2UgZnVuY3Rpb24gd2hlbiBpdCBpcyBub3QgY2FsbGVkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gYm9keVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZUdldHRlckZuKGJvZHkpIHtcblx0ICB0cnkge1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgbm8tbmV3LWZ1bmMgKi9cblx0ICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ3Njb3BlJywgJ3JldHVybiAnICsgYm9keSArICc7Jyk7XG5cdCAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLW5ldy1mdW5jICovXG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChlLnRvU3RyaW5nKCkubWF0Y2goL3Vuc2FmZS1ldmFsfENTUC8pKSB7XG5cdCAgICAgICAgd2FybignSXQgc2VlbXMgeW91IGFyZSB1c2luZyB0aGUgZGVmYXVsdCBidWlsZCBvZiBWdWUuanMgaW4gYW4gZW52aXJvbm1lbnQgJyArICd3aXRoIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IHRoYXQgcHJvaGliaXRzIHVuc2FmZS1ldmFsLiAnICsgJ1VzZSB0aGUgQ1NQLWNvbXBsaWFudCBidWlsZCBpbnN0ZWFkOiAnICsgJ2h0dHA6Ly92dWVqcy5vcmcvZ3VpZGUvaW5zdGFsbGF0aW9uLmh0bWwjQ1NQLWNvbXBsaWFudC1idWlsZCcpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHdhcm4oJ0ludmFsaWQgZXhwcmVzc2lvbi4gJyArICdHZW5lcmF0ZWQgZnVuY3Rpb24gYm9keTogJyArIGJvZHkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbm9vcDtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGEgc2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgZXhwcmVzc2lvbi5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZVNldHRlcihleHApIHtcblx0ICB2YXIgcGF0aCA9IHBhcnNlUGF0aChleHApO1xuXHQgIGlmIChwYXRoKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCB2YWwpIHtcblx0ICAgICAgc2V0UGF0aChzY29wZSwgcGF0aCwgdmFsKTtcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBzZXR0ZXIgZXhwcmVzc2lvbjogJyArIGV4cCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2UgYW4gZXhwcmVzc2lvbiBpbnRvIHJlLXdyaXR0ZW4gZ2V0dGVyL3NldHRlcnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHBhcmFtIHtCb29sZWFufSBuZWVkU2V0XG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlRXhwcmVzc2lvbihleHAsIG5lZWRTZXQpIHtcblx0ICBleHAgPSBleHAudHJpbSgpO1xuXHQgIC8vIHRyeSBjYWNoZVxuXHQgIHZhciBoaXQgPSBleHByZXNzaW9uQ2FjaGUuZ2V0KGV4cCk7XG5cdCAgaWYgKGhpdCkge1xuXHQgICAgaWYgKG5lZWRTZXQgJiYgIWhpdC5zZXQpIHtcblx0ICAgICAgaGl0LnNldCA9IGNvbXBpbGVTZXR0ZXIoaGl0LmV4cCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gaGl0O1xuXHQgIH1cblx0ICB2YXIgcmVzID0geyBleHA6IGV4cCB9O1xuXHQgIHJlcy5nZXQgPSBpc1NpbXBsZVBhdGgoZXhwKSAmJiBleHAuaW5kZXhPZignWycpIDwgMFxuXHQgIC8vIG9wdGltaXplZCBzdXBlciBzaW1wbGUgZ2V0dGVyXG5cdCAgPyBtYWtlR2V0dGVyRm4oJ3Njb3BlLicgKyBleHApXG5cdCAgLy8gZHluYW1pYyBnZXR0ZXJcblx0ICA6IGNvbXBpbGVHZXR0ZXIoZXhwKTtcblx0ICBpZiAobmVlZFNldCkge1xuXHQgICAgcmVzLnNldCA9IGNvbXBpbGVTZXR0ZXIoZXhwKTtcblx0ICB9XG5cdCAgZXhwcmVzc2lvbkNhY2hlLnB1dChleHAsIHJlcyk7XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBzaW1wbGUgcGF0aC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzU2ltcGxlUGF0aChleHApIHtcblx0ICByZXR1cm4gcGF0aFRlc3RSRS50ZXN0KGV4cCkgJiZcblx0ICAvLyBkb24ndCB0cmVhdCBsaXRlcmFsIHZhbHVlcyBhcyBwYXRoc1xuXHQgICFsaXRlcmFsVmFsdWVSRSQxLnRlc3QoZXhwKSAmJlxuXHQgIC8vIE1hdGggY29uc3RhbnRzIGUuZy4gTWF0aC5QSSwgTWF0aC5FIGV0Yy5cblx0ICBleHAuc2xpY2UoMCwgNSkgIT09ICdNYXRoLic7XG5cdH1cblx0XG5cdHZhciBleHByZXNzaW9uID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgcGFyc2VFeHByZXNzaW9uOiBwYXJzZUV4cHJlc3Npb24sXG5cdCAgaXNTaW1wbGVQYXRoOiBpc1NpbXBsZVBhdGhcblx0fSk7XG5cdFxuXHQvLyB3ZSBoYXZlIHR3byBzZXBhcmF0ZSBxdWV1ZXM6IG9uZSBmb3IgZGlyZWN0aXZlIHVwZGF0ZXNcblx0Ly8gYW5kIG9uZSBmb3IgdXNlciB3YXRjaGVyIHJlZ2lzdGVyZWQgdmlhICR3YXRjaCgpLlxuXHQvLyB3ZSB3YW50IHRvIGd1YXJhbnRlZSBkaXJlY3RpdmUgdXBkYXRlcyB0byBiZSBjYWxsZWRcblx0Ly8gYmVmb3JlIHVzZXIgd2F0Y2hlcnMgc28gdGhhdCB3aGVuIHVzZXIgd2F0Y2hlcnMgYXJlXG5cdC8vIHRyaWdnZXJlZCwgdGhlIERPTSB3b3VsZCBoYXZlIGFscmVhZHkgYmVlbiBpbiB1cGRhdGVkXG5cdC8vIHN0YXRlLlxuXHRcblx0dmFyIHF1ZXVlID0gW107XG5cdHZhciB1c2VyUXVldWUgPSBbXTtcblx0dmFyIGhhcyA9IHt9O1xuXHR2YXIgY2lyY3VsYXIgPSB7fTtcblx0dmFyIHdhaXRpbmcgPSBmYWxzZTtcblx0XG5cdC8qKlxuXHQgKiBSZXNldCB0aGUgYmF0Y2hlcidzIHN0YXRlLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlc2V0QmF0Y2hlclN0YXRlKCkge1xuXHQgIHF1ZXVlLmxlbmd0aCA9IDA7XG5cdCAgdXNlclF1ZXVlLmxlbmd0aCA9IDA7XG5cdCAgaGFzID0ge307XG5cdCAgY2lyY3VsYXIgPSB7fTtcblx0ICB3YWl0aW5nID0gZmFsc2U7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGbHVzaCBib3RoIHF1ZXVlcyBhbmQgcnVuIHRoZSB3YXRjaGVycy5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmbHVzaEJhdGNoZXJRdWV1ZSgpIHtcblx0ICB2YXIgX2FnYWluID0gdHJ1ZTtcblx0XG5cdCAgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7XG5cdCAgICBfYWdhaW4gPSBmYWxzZTtcblx0XG5cdCAgICBydW5CYXRjaGVyUXVldWUocXVldWUpO1xuXHQgICAgcnVuQmF0Y2hlclF1ZXVlKHVzZXJRdWV1ZSk7XG5cdCAgICAvLyB1c2VyIHdhdGNoZXJzIHRyaWdnZXJlZCBtb3JlIHdhdGNoZXJzLFxuXHQgICAgLy8ga2VlcCBmbHVzaGluZyB1bnRpbCBpdCBkZXBsZXRlc1xuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICBfYWdhaW4gPSB0cnVlO1xuXHQgICAgICBjb250aW51ZSBfZnVuY3Rpb247XG5cdCAgICB9XG5cdCAgICAvLyBkZXYgdG9vbCBob29rXG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmIChkZXZ0b29scyAmJiBjb25maWcuZGV2dG9vbHMpIHtcblx0ICAgICAgZGV2dG9vbHMuZW1pdCgnZmx1c2gnKTtcblx0ICAgIH1cblx0ICAgIHJlc2V0QmF0Y2hlclN0YXRlKCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUnVuIHRoZSB3YXRjaGVycyBpbiBhIHNpbmdsZSBxdWV1ZS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gcXVldWVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBydW5CYXRjaGVyUXVldWUocXVldWUpIHtcblx0ICAvLyBkbyBub3QgY2FjaGUgbGVuZ3RoIGJlY2F1c2UgbW9yZSB3YXRjaGVycyBtaWdodCBiZSBwdXNoZWRcblx0ICAvLyBhcyB3ZSBydW4gZXhpc3Rpbmcgd2F0Y2hlcnNcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgd2F0Y2hlciA9IHF1ZXVlW2ldO1xuXHQgICAgdmFyIGlkID0gd2F0Y2hlci5pZDtcblx0ICAgIGhhc1tpZF0gPSBudWxsO1xuXHQgICAgd2F0Y2hlci5ydW4oKTtcblx0ICAgIC8vIGluIGRldiBidWlsZCwgY2hlY2sgYW5kIHN0b3AgY2lyY3VsYXIgdXBkYXRlcy5cblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGhhc1tpZF0gIT0gbnVsbCkge1xuXHQgICAgICBjaXJjdWxhcltpZF0gPSAoY2lyY3VsYXJbaWRdIHx8IDApICsgMTtcblx0ICAgICAgaWYgKGNpcmN1bGFyW2lkXSA+IGNvbmZpZy5fbWF4VXBkYXRlQ291bnQpIHtcblx0ICAgICAgICB3YXJuKCdZb3UgbWF5IGhhdmUgYW4gaW5maW5pdGUgdXBkYXRlIGxvb3AgZm9yIHdhdGNoZXIgJyArICd3aXRoIGV4cHJlc3Npb24gXCInICsgd2F0Y2hlci5leHByZXNzaW9uICsgJ1wiJywgd2F0Y2hlci52bSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcXVldWUubGVuZ3RoID0gMDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFB1c2ggYSB3YXRjaGVyIGludG8gdGhlIHdhdGNoZXIgcXVldWUuXG5cdCAqIEpvYnMgd2l0aCBkdXBsaWNhdGUgSURzIHdpbGwgYmUgc2tpcHBlZCB1bmxlc3MgaXQnc1xuXHQgKiBwdXNoZWQgd2hlbiB0aGUgcXVldWUgaXMgYmVpbmcgZmx1c2hlZC5cblx0ICpcblx0ICogQHBhcmFtIHtXYXRjaGVyfSB3YXRjaGVyXG5cdCAqICAgcHJvcGVydGllczpcblx0ICogICAtIHtOdW1iZXJ9IGlkXG5cdCAqICAgLSB7RnVuY3Rpb259IHJ1blxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHB1c2hXYXRjaGVyKHdhdGNoZXIpIHtcblx0ICB2YXIgaWQgPSB3YXRjaGVyLmlkO1xuXHQgIGlmIChoYXNbaWRdID09IG51bGwpIHtcblx0ICAgIC8vIHB1c2ggd2F0Y2hlciBpbnRvIGFwcHJvcHJpYXRlIHF1ZXVlXG5cdCAgICB2YXIgcSA9IHdhdGNoZXIudXNlciA/IHVzZXJRdWV1ZSA6IHF1ZXVlO1xuXHQgICAgaGFzW2lkXSA9IHEubGVuZ3RoO1xuXHQgICAgcS5wdXNoKHdhdGNoZXIpO1xuXHQgICAgLy8gcXVldWUgdGhlIGZsdXNoXG5cdCAgICBpZiAoIXdhaXRpbmcpIHtcblx0ICAgICAgd2FpdGluZyA9IHRydWU7XG5cdCAgICAgIG5leHRUaWNrKGZsdXNoQmF0Y2hlclF1ZXVlKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciB1aWQkMiA9IDA7XG5cdFxuXHQvKipcblx0ICogQSB3YXRjaGVyIHBhcnNlcyBhbiBleHByZXNzaW9uLCBjb2xsZWN0cyBkZXBlbmRlbmNpZXMsXG5cdCAqIGFuZCBmaXJlcyBjYWxsYmFjayB3aGVuIHRoZSBleHByZXNzaW9uIHZhbHVlIGNoYW5nZXMuXG5cdCAqIFRoaXMgaXMgdXNlZCBmb3IgYm90aCB0aGUgJHdhdGNoKCkgYXBpIGFuZCBkaXJlY3RpdmVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IGV4cE9yRm5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogICAgICAgICAgICAgICAgIC0ge0FycmF5fSBmaWx0ZXJzXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSB0d29XYXlcblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGRlZXBcblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHVzZXJcblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHN5bmNcblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGxhenlcblx0ICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbcHJlUHJvY2Vzc11cblx0ICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbcG9zdFByb2Nlc3NdXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0ZnVuY3Rpb24gV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIG9wdGlvbnMpIHtcblx0ICAvLyBtaXggaW4gb3B0aW9uc1xuXHQgIGlmIChvcHRpb25zKSB7XG5cdCAgICBleHRlbmQodGhpcywgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIHZhciBpc0ZuID0gdHlwZW9mIGV4cE9yRm4gPT09ICdmdW5jdGlvbic7XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIHZtLl93YXRjaGVycy5wdXNoKHRoaXMpO1xuXHQgIHRoaXMuZXhwcmVzc2lvbiA9IGV4cE9yRm47XG5cdCAgdGhpcy5jYiA9IGNiO1xuXHQgIHRoaXMuaWQgPSArK3VpZCQyOyAvLyB1aWQgZm9yIGJhdGNoaW5nXG5cdCAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuXHQgIHRoaXMuZGlydHkgPSB0aGlzLmxhenk7IC8vIGZvciBsYXp5IHdhdGNoZXJzXG5cdCAgdGhpcy5kZXBzID0gW107XG5cdCAgdGhpcy5uZXdEZXBzID0gW107XG5cdCAgdGhpcy5kZXBJZHMgPSBuZXcgX1NldCgpO1xuXHQgIHRoaXMubmV3RGVwSWRzID0gbmV3IF9TZXQoKTtcblx0ICB0aGlzLnByZXZFcnJvciA9IG51bGw7IC8vIGZvciBhc3luYyBlcnJvciBzdGFja3Ncblx0ICAvLyBwYXJzZSBleHByZXNzaW9uIGZvciBnZXR0ZXIvc2V0dGVyXG5cdCAgaWYgKGlzRm4pIHtcblx0ICAgIHRoaXMuZ2V0dGVyID0gZXhwT3JGbjtcblx0ICAgIHRoaXMuc2V0dGVyID0gdW5kZWZpbmVkO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cE9yRm4sIHRoaXMudHdvV2F5KTtcblx0ICAgIHRoaXMuZ2V0dGVyID0gcmVzLmdldDtcblx0ICAgIHRoaXMuc2V0dGVyID0gcmVzLnNldDtcblx0ICB9XG5cdCAgdGhpcy52YWx1ZSA9IHRoaXMubGF6eSA/IHVuZGVmaW5lZCA6IHRoaXMuZ2V0KCk7XG5cdCAgLy8gc3RhdGUgZm9yIGF2b2lkaW5nIGZhbHNlIHRyaWdnZXJzIGZvciBkZWVwIGFuZCBBcnJheVxuXHQgIC8vIHdhdGNoZXJzIGR1cmluZyB2bS5fZGlnZXN0KClcblx0ICB0aGlzLnF1ZXVlZCA9IHRoaXMuc2hhbGxvdyA9IGZhbHNlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRXZhbHVhdGUgdGhlIGdldHRlciwgYW5kIHJlLWNvbGxlY3QgZGVwZW5kZW5jaWVzLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICB0aGlzLmJlZm9yZUdldCgpO1xuXHQgIHZhciBzY29wZSA9IHRoaXMuc2NvcGUgfHwgdGhpcy52bTtcblx0ICB2YXIgdmFsdWU7XG5cdCAgdHJ5IHtcblx0ICAgIHZhbHVlID0gdGhpcy5nZXR0ZXIuY2FsbChzY29wZSwgc2NvcGUpO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy53YXJuRXhwcmVzc2lvbkVycm9ycykge1xuXHQgICAgICB3YXJuKCdFcnJvciB3aGVuIGV2YWx1YXRpbmcgZXhwcmVzc2lvbiAnICsgJ1wiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIjogJyArIGUudG9TdHJpbmcoKSwgdGhpcy52bSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIFwidG91Y2hcIiBldmVyeSBwcm9wZXJ0eSBzbyB0aGV5IGFyZSBhbGwgdHJhY2tlZCBhc1xuXHQgIC8vIGRlcGVuZGVuY2llcyBmb3IgZGVlcCB3YXRjaGluZ1xuXHQgIGlmICh0aGlzLmRlZXApIHtcblx0ICAgIHRyYXZlcnNlKHZhbHVlKTtcblx0ICB9XG5cdCAgaWYgKHRoaXMucHJlUHJvY2Vzcykge1xuXHQgICAgdmFsdWUgPSB0aGlzLnByZVByb2Nlc3ModmFsdWUpO1xuXHQgIH1cblx0ICBpZiAodGhpcy5maWx0ZXJzKSB7XG5cdCAgICB2YWx1ZSA9IHNjb3BlLl9hcHBseUZpbHRlcnModmFsdWUsIG51bGwsIHRoaXMuZmlsdGVycywgZmFsc2UpO1xuXHQgIH1cblx0ICBpZiAodGhpcy5wb3N0UHJvY2Vzcykge1xuXHQgICAgdmFsdWUgPSB0aGlzLnBvc3RQcm9jZXNzKHZhbHVlKTtcblx0ICB9XG5cdCAgdGhpcy5hZnRlckdldCgpO1xuXHQgIHJldHVybiB2YWx1ZTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTZXQgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgd2l0aCB0aGUgc2V0dGVyLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgdmFyIHNjb3BlID0gdGhpcy5zY29wZSB8fCB0aGlzLnZtO1xuXHQgIGlmICh0aGlzLmZpbHRlcnMpIHtcblx0ICAgIHZhbHVlID0gc2NvcGUuX2FwcGx5RmlsdGVycyh2YWx1ZSwgdGhpcy52YWx1ZSwgdGhpcy5maWx0ZXJzLCB0cnVlKTtcblx0ICB9XG5cdCAgdHJ5IHtcblx0ICAgIHRoaXMuc2V0dGVyLmNhbGwoc2NvcGUsIHNjb3BlLCB2YWx1ZSk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLndhcm5FeHByZXNzaW9uRXJyb3JzKSB7XG5cdCAgICAgIHdhcm4oJ0Vycm9yIHdoZW4gZXZhbHVhdGluZyBzZXR0ZXIgJyArICdcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCI6ICcgKyBlLnRvU3RyaW5nKCksIHRoaXMudm0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyB0d28td2F5IHN5bmMgZm9yIHYtZm9yIGFsaWFzXG5cdCAgdmFyIGZvckNvbnRleHQgPSBzY29wZS4kZm9yQ29udGV4dDtcblx0ICBpZiAoZm9yQ29udGV4dCAmJiBmb3JDb250ZXh0LmFsaWFzID09PSB0aGlzLmV4cHJlc3Npb24pIHtcblx0ICAgIGlmIChmb3JDb250ZXh0LmZpbHRlcnMpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHR3by13YXkgYmluZGluZyBvbiAnICsgJ2Egdi1mb3IgYWxpYXMgKCcgKyB0aGlzLmV4cHJlc3Npb24gKyAnKSwgYW5kIHRoZSAnICsgJ3YtZm9yIGhhcyBmaWx0ZXJzLiBUaGlzIHdpbGwgbm90IHdvcmsgcHJvcGVybHkuICcgKyAnRWl0aGVyIHJlbW92ZSB0aGUgZmlsdGVycyBvciB1c2UgYW4gYXJyYXkgb2YgJyArICdvYmplY3RzIGFuZCBiaW5kIHRvIG9iamVjdCBwcm9wZXJ0aWVzIGluc3RlYWQuJywgdGhpcy52bSk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGZvckNvbnRleHQuX3dpdGhMb2NrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKHNjb3BlLiRrZXkpIHtcblx0ICAgICAgICAvLyBvcmlnaW5hbCBpcyBhbiBvYmplY3Rcblx0ICAgICAgICBmb3JDb250ZXh0LnJhd1ZhbHVlW3Njb3BlLiRrZXldID0gdmFsdWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZm9yQ29udGV4dC5yYXdWYWx1ZS4kc2V0KHNjb3BlLiRpbmRleCwgdmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogUHJlcGFyZSBmb3IgZGVwZW5kZW5jeSBjb2xsZWN0aW9uLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmJlZm9yZUdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICBEZXAudGFyZ2V0ID0gdGhpcztcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBZGQgYSBkZXBlbmRlbmN5IHRvIHRoaXMgZGlyZWN0aXZlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0RlcH0gZGVwXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuYWRkRGVwID0gZnVuY3Rpb24gKGRlcCkge1xuXHQgIHZhciBpZCA9IGRlcC5pZDtcblx0ICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhpZCkpIHtcblx0ICAgIHRoaXMubmV3RGVwSWRzLmFkZChpZCk7XG5cdCAgICB0aGlzLm5ld0RlcHMucHVzaChkZXApO1xuXHQgICAgaWYgKCF0aGlzLmRlcElkcy5oYXMoaWQpKSB7XG5cdCAgICAgIGRlcC5hZGRTdWIodGhpcyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENsZWFuIHVwIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuYWZ0ZXJHZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgRGVwLnRhcmdldCA9IG51bGw7XG5cdCAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHZhciBkZXAgPSB0aGlzLmRlcHNbaV07XG5cdCAgICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhkZXAuaWQpKSB7XG5cdCAgICAgIGRlcC5yZW1vdmVTdWIodGhpcyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciB0bXAgPSB0aGlzLmRlcElkcztcblx0ICB0aGlzLmRlcElkcyA9IHRoaXMubmV3RGVwSWRzO1xuXHQgIHRoaXMubmV3RGVwSWRzID0gdG1wO1xuXHQgIHRoaXMubmV3RGVwSWRzLmNsZWFyKCk7XG5cdCAgdG1wID0gdGhpcy5kZXBzO1xuXHQgIHRoaXMuZGVwcyA9IHRoaXMubmV3RGVwcztcblx0ICB0aGlzLm5ld0RlcHMgPSB0bXA7XG5cdCAgdGhpcy5uZXdEZXBzLmxlbmd0aCA9IDA7XG5cdH07XG5cdFxuXHQvKipcblx0ICogU3Vic2NyaWJlciBpbnRlcmZhY2UuXG5cdCAqIFdpbGwgYmUgY2FsbGVkIHdoZW4gYSBkZXBlbmRlbmN5IGNoYW5nZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hhbGxvd1xuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChzaGFsbG93KSB7XG5cdCAgaWYgKHRoaXMubGF6eSkge1xuXHQgICAgdGhpcy5kaXJ0eSA9IHRydWU7XG5cdCAgfSBlbHNlIGlmICh0aGlzLnN5bmMgfHwgIWNvbmZpZy5hc3luYykge1xuXHQgICAgdGhpcy5ydW4oKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gaWYgcXVldWVkLCBvbmx5IG92ZXJ3cml0ZSBzaGFsbG93IHdpdGggbm9uLXNoYWxsb3csXG5cdCAgICAvLyBidXQgbm90IHRoZSBvdGhlciB3YXkgYXJvdW5kLlxuXHQgICAgdGhpcy5zaGFsbG93ID0gdGhpcy5xdWV1ZWQgPyBzaGFsbG93ID8gdGhpcy5zaGFsbG93IDogZmFsc2UgOiAhIXNoYWxsb3c7XG5cdCAgICB0aGlzLnF1ZXVlZCA9IHRydWU7XG5cdCAgICAvLyByZWNvcmQgYmVmb3JlLXB1c2ggZXJyb3Igc3RhY2sgaW4gZGVidWcgbW9kZVxuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcuZGVidWcpIHtcblx0ICAgICAgdGhpcy5wcmV2RXJyb3IgPSBuZXcgRXJyb3IoJ1t2dWVdIGFzeW5jIHN0YWNrIHRyYWNlJyk7XG5cdCAgICB9XG5cdCAgICBwdXNoV2F0Y2hlcih0aGlzKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQmF0Y2hlciBqb2IgaW50ZXJmYWNlLlxuXHQgKiBXaWxsIGJlIGNhbGxlZCBieSB0aGUgYmF0Y2hlci5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKHRoaXMuYWN0aXZlKSB7XG5cdCAgICB2YXIgdmFsdWUgPSB0aGlzLmdldCgpO1xuXHQgICAgaWYgKHZhbHVlICE9PSB0aGlzLnZhbHVlIHx8XG5cdCAgICAvLyBEZWVwIHdhdGNoZXJzIGFuZCB3YXRjaGVycyBvbiBPYmplY3QvQXJyYXlzIHNob3VsZCBmaXJlIGV2ZW5cblx0ICAgIC8vIHdoZW4gdGhlIHZhbHVlIGlzIHRoZSBzYW1lLCBiZWNhdXNlIHRoZSB2YWx1ZSBtYXlcblx0ICAgIC8vIGhhdmUgbXV0YXRlZDsgYnV0IG9ubHkgZG8gc28gaWYgdGhpcyBpcyBhXG5cdCAgICAvLyBub24tc2hhbGxvdyB1cGRhdGUgKGNhdXNlZCBieSBhIHZtIGRpZ2VzdCkuXG5cdCAgICAoaXNPYmplY3QodmFsdWUpIHx8IHRoaXMuZGVlcCkgJiYgIXRoaXMuc2hhbGxvdykge1xuXHQgICAgICAvLyBzZXQgbmV3IHZhbHVlXG5cdCAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWU7XG5cdCAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgLy8gaW4gZGVidWcgKyBhc3luYyBtb2RlLCB3aGVuIGEgd2F0Y2hlciBjYWxsYmFja3Ncblx0ICAgICAgLy8gdGhyb3dzLCB3ZSBhbHNvIHRocm93IHRoZSBzYXZlZCBiZWZvcmUtcHVzaCBlcnJvclxuXHQgICAgICAvLyBzbyB0aGUgZnVsbCBjcm9zcy10aWNrIHN0YWNrIHRyYWNlIGlzIGF2YWlsYWJsZS5cblx0ICAgICAgdmFyIHByZXZFcnJvciA9IHRoaXMucHJldkVycm9yO1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLmRlYnVnICYmIHByZXZFcnJvcikge1xuXHQgICAgICAgIHRoaXMucHJldkVycm9yID0gbnVsbDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICB0aHJvdyBwcmV2RXJyb3I7XG5cdCAgICAgICAgICB9LCAwKTtcblx0ICAgICAgICAgIHRocm93IGU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aGlzLnF1ZXVlZCA9IHRoaXMuc2hhbGxvdyA9IGZhbHNlO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBFdmFsdWF0ZSB0aGUgdmFsdWUgb2YgdGhlIHdhdGNoZXIuXG5cdCAqIFRoaXMgb25seSBnZXRzIGNhbGxlZCBmb3IgbGF6eSB3YXRjaGVycy5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAvLyBhdm9pZCBvdmVyd3JpdGluZyBhbm90aGVyIHdhdGNoZXIgdGhhdCBpcyBiZWluZ1xuXHQgIC8vIGNvbGxlY3RlZC5cblx0ICB2YXIgY3VycmVudCA9IERlcC50YXJnZXQ7XG5cdCAgdGhpcy52YWx1ZSA9IHRoaXMuZ2V0KCk7XG5cdCAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuXHQgIERlcC50YXJnZXQgPSBjdXJyZW50O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIERlcGVuZCBvbiBhbGwgZGVwcyBjb2xsZWN0ZWQgYnkgdGhpcyB3YXRjaGVyLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgdGhpcy5kZXBzW2ldLmRlcGVuZCgpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgc2VsZiBmcm9tIGFsbCBkZXBlbmRlbmNpZXMnIHN1YmNyaWJlciBsaXN0LlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLnRlYXJkb3duID0gZnVuY3Rpb24gKCkge1xuXHQgIGlmICh0aGlzLmFjdGl2ZSkge1xuXHQgICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSB2bSdzIHdhdGNoZXIgbGlzdFxuXHQgICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGV4cGVuc2l2ZSBvcGVyYXRpb24gc28gd2Ugc2tpcCBpdFxuXHQgICAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIGRlc3Ryb3llZCBvciBpcyBwZXJmb3JtaW5nIGEgdi1mb3Jcblx0ICAgIC8vIHJlLXJlbmRlciAodGhlIHdhdGNoZXIgbGlzdCBpcyB0aGVuIGZpbHRlcmVkIGJ5IHYtZm9yKS5cblx0ICAgIGlmICghdGhpcy52bS5faXNCZWluZ0Rlc3Ryb3llZCAmJiAhdGhpcy52bS5fdkZvclJlbW92aW5nKSB7XG5cdCAgICAgIHRoaXMudm0uX3dhdGNoZXJzLiRyZW1vdmUodGhpcyk7XG5cdCAgICB9XG5cdCAgICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHRoaXMuZGVwc1tpXS5yZW1vdmVTdWIodGhpcyk7XG5cdCAgICB9XG5cdCAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuXHQgICAgdGhpcy52bSA9IHRoaXMuY2IgPSB0aGlzLnZhbHVlID0gbnVsbDtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogUmVjcnVzaXZlbHkgdHJhdmVyc2UgYW4gb2JqZWN0IHRvIGV2b2tlIGFsbCBjb252ZXJ0ZWRcblx0ICogZ2V0dGVycywgc28gdGhhdCBldmVyeSBuZXN0ZWQgcHJvcGVydHkgaW5zaWRlIHRoZSBvYmplY3Rcblx0ICogaXMgY29sbGVjdGVkIGFzIGEgXCJkZWVwXCIgZGVwZW5kZW5jeS5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICovXG5cdFxuXHR2YXIgc2Vlbk9iamVjdHMgPSBuZXcgX1NldCgpO1xuXHRmdW5jdGlvbiB0cmF2ZXJzZSh2YWwsIHNlZW4pIHtcblx0ICB2YXIgaSA9IHVuZGVmaW5lZCxcblx0ICAgICAga2V5cyA9IHVuZGVmaW5lZDtcblx0ICBpZiAoIXNlZW4pIHtcblx0ICAgIHNlZW4gPSBzZWVuT2JqZWN0cztcblx0ICAgIHNlZW4uY2xlYXIoKTtcblx0ICB9XG5cdCAgdmFyIGlzQSA9IGlzQXJyYXkodmFsKTtcblx0ICB2YXIgaXNPID0gaXNPYmplY3QodmFsKTtcblx0ICBpZiAoKGlzQSB8fCBpc08pICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsKSkge1xuXHQgICAgaWYgKHZhbC5fX29iX18pIHtcblx0ICAgICAgdmFyIGRlcElkID0gdmFsLl9fb2JfXy5kZXAuaWQ7XG5cdCAgICAgIGlmIChzZWVuLmhhcyhkZXBJZCkpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc2Vlbi5hZGQoZGVwSWQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAoaXNBKSB7XG5cdCAgICAgIGkgPSB2YWwubGVuZ3RoO1xuXHQgICAgICB3aGlsZSAoaS0tKSB0cmF2ZXJzZSh2YWxbaV0sIHNlZW4pO1xuXHQgICAgfSBlbHNlIGlmIChpc08pIHtcblx0ICAgICAga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7XG5cdCAgICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKGktLSkgdHJhdmVyc2UodmFsW2tleXNbaV1dLCBzZWVuKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciB0ZXh0JDEgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB0aGlzLmF0dHIgPSB0aGlzLmVsLm5vZGVUeXBlID09PSAzID8gJ2RhdGEnIDogJ3RleHRDb250ZW50Jztcblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdGhpcy5lbFt0aGlzLmF0dHJdID0gX3RvU3RyaW5nKHZhbHVlKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgdGVtcGxhdGVDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0dmFyIGlkU2VsZWN0b3JDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0XG5cdHZhciBtYXAgPSB7XG5cdCAgZWZhdWx0OiBbMCwgJycsICcnXSxcblx0ICBsZWdlbmQ6IFsxLCAnPGZpZWxkc2V0PicsICc8L2ZpZWxkc2V0PiddLFxuXHQgIHRyOiBbMiwgJzx0YWJsZT48dGJvZHk+JywgJzwvdGJvZHk+PC90YWJsZT4nXSxcblx0ICBjb2w6IFsyLCAnPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4nLCAnPC9jb2xncm91cD48L3RhYmxlPiddXG5cdH07XG5cdFxuXHRtYXAudGQgPSBtYXAudGggPSBbMywgJzx0YWJsZT48dGJvZHk+PHRyPicsICc8L3RyPjwvdGJvZHk+PC90YWJsZT4nXTtcblx0XG5cdG1hcC5vcHRpb24gPSBtYXAub3B0Z3JvdXAgPSBbMSwgJzxzZWxlY3QgbXVsdGlwbGU9XCJtdWx0aXBsZVwiPicsICc8L3NlbGVjdD4nXTtcblx0XG5cdG1hcC50aGVhZCA9IG1hcC50Ym9keSA9IG1hcC5jb2xncm91cCA9IG1hcC5jYXB0aW9uID0gbWFwLnRmb290ID0gWzEsICc8dGFibGU+JywgJzwvdGFibGU+J107XG5cdFxuXHRtYXAuZyA9IG1hcC5kZWZzID0gbWFwLnN5bWJvbCA9IG1hcC51c2UgPSBtYXAuaW1hZ2UgPSBtYXAudGV4dCA9IG1hcC5jaXJjbGUgPSBtYXAuZWxsaXBzZSA9IG1hcC5saW5lID0gbWFwLnBhdGggPSBtYXAucG9seWdvbiA9IG1hcC5wb2x5bGluZSA9IG1hcC5yZWN0ID0gWzEsICc8c3ZnICcgKyAneG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiICcgKyAneG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgJyArICd4bWxuczpldj1cImh0dHA6Ly93d3cudzMub3JnLzIwMDEveG1sLWV2ZW50c1wiJyArICd2ZXJzaW9uPVwiMS4xXCI+JywgJzwvc3ZnPiddO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGEgbm9kZSBpcyBhIHN1cHBvcnRlZCB0ZW1wbGF0ZSBub2RlIHdpdGggYVxuXHQgKiBEb2N1bWVudEZyYWdtZW50IGNvbnRlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzUmVhbFRlbXBsYXRlKG5vZGUpIHtcblx0ICByZXR1cm4gaXNUZW1wbGF0ZShub2RlKSAmJiBpc0ZyYWdtZW50KG5vZGUuY29udGVudCk7XG5cdH1cblx0XG5cdHZhciB0YWdSRSQxID0gLzwoW1xcdzotXSspLztcblx0dmFyIGVudGl0eVJFID0gLyYjP1xcdys/Oy87XG5cdHZhciBjb21tZW50UkUgPSAvPCEtLS87XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBhIHN0cmluZyB0ZW1wbGF0ZSB0byBhIERvY3VtZW50RnJhZ21lbnQuXG5cdCAqIERldGVybWluZXMgY29ycmVjdCB3cmFwcGluZyBieSB0YWcgdHlwZXMuIFdyYXBwaW5nXG5cdCAqIHN0cmF0ZWd5IGZvdW5kIGluIGpRdWVyeSAmIGNvbXBvbmVudC9kb21pZnkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0ZW1wbGF0ZVN0cmluZ1xuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHJhd1xuXHQgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHN0cmluZ1RvRnJhZ21lbnQodGVtcGxhdGVTdHJpbmcsIHJhdykge1xuXHQgIC8vIHRyeSBhIGNhY2hlIGhpdCBmaXJzdFxuXHQgIHZhciBjYWNoZUtleSA9IHJhdyA/IHRlbXBsYXRlU3RyaW5nIDogdGVtcGxhdGVTdHJpbmcudHJpbSgpO1xuXHQgIHZhciBoaXQgPSB0ZW1wbGF0ZUNhY2hlLmdldChjYWNoZUtleSk7XG5cdCAgaWYgKGhpdCkge1xuXHQgICAgcmV0dXJuIGhpdDtcblx0ICB9XG5cdFxuXHQgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXHQgIHZhciB0YWdNYXRjaCA9IHRlbXBsYXRlU3RyaW5nLm1hdGNoKHRhZ1JFJDEpO1xuXHQgIHZhciBlbnRpdHlNYXRjaCA9IGVudGl0eVJFLnRlc3QodGVtcGxhdGVTdHJpbmcpO1xuXHQgIHZhciBjb21tZW50TWF0Y2ggPSBjb21tZW50UkUudGVzdCh0ZW1wbGF0ZVN0cmluZyk7XG5cdFxuXHQgIGlmICghdGFnTWF0Y2ggJiYgIWVudGl0eU1hdGNoICYmICFjb21tZW50TWF0Y2gpIHtcblx0ICAgIC8vIHRleHQgb25seSwgcmV0dXJuIGEgc2luZ2xlIHRleHQgbm9kZS5cblx0ICAgIGZyYWcuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGVtcGxhdGVTdHJpbmcpKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHRhZyA9IHRhZ01hdGNoICYmIHRhZ01hdGNoWzFdO1xuXHQgICAgdmFyIHdyYXAgPSBtYXBbdGFnXSB8fCBtYXAuZWZhdWx0O1xuXHQgICAgdmFyIGRlcHRoID0gd3JhcFswXTtcblx0ICAgIHZhciBwcmVmaXggPSB3cmFwWzFdO1xuXHQgICAgdmFyIHN1ZmZpeCA9IHdyYXBbMl07XG5cdCAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcblx0ICAgIG5vZGUuaW5uZXJIVE1MID0gcHJlZml4ICsgdGVtcGxhdGVTdHJpbmcgKyBzdWZmaXg7XG5cdCAgICB3aGlsZSAoZGVwdGgtLSkge1xuXHQgICAgICBub2RlID0gbm9kZS5sYXN0Q2hpbGQ7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGNoaWxkO1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIHdoaWxlIChjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZCkge1xuXHQgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICAgIGZyYWcuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoIXJhdykge1xuXHQgICAgdHJpbU5vZGUoZnJhZyk7XG5cdCAgfVxuXHQgIHRlbXBsYXRlQ2FjaGUucHV0KGNhY2hlS2V5LCBmcmFnKTtcblx0ICByZXR1cm4gZnJhZztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgYSB0ZW1wbGF0ZSBub2RlIHRvIGEgRG9jdW1lbnRGcmFnbWVudC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbm9kZVRvRnJhZ21lbnQobm9kZSkge1xuXHQgIC8vIGlmIGl0cyBhIHRlbXBsYXRlIHRhZyBhbmQgdGhlIGJyb3dzZXIgc3VwcG9ydHMgaXQsXG5cdCAgLy8gaXRzIGNvbnRlbnQgaXMgYWxyZWFkeSBhIGRvY3VtZW50IGZyYWdtZW50LiBIb3dldmVyLCBpT1MgU2FmYXJpIGhhc1xuXHQgIC8vIGJ1ZyB3aGVuIHVzaW5nIGRpcmVjdGx5IGNsb25lZCB0ZW1wbGF0ZSBjb250ZW50IHdpdGggdG91Y2hcblx0ICAvLyBldmVudHMgYW5kIGNhbiBjYXVzZSBjcmFzaGVzIHdoZW4gdGhlIG5vZGVzIGFyZSByZW1vdmVkIGZyb20gRE9NLCBzbyB3ZVxuXHQgIC8vIGhhdmUgdG8gdHJlYXQgdGVtcGxhdGUgZWxlbWVudHMgYXMgc3RyaW5nIHRlbXBsYXRlcy4gKCMyODA1KVxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChpc1JlYWxUZW1wbGF0ZShub2RlKSkge1xuXHQgICAgcmV0dXJuIHN0cmluZ1RvRnJhZ21lbnQobm9kZS5pbm5lckhUTUwpO1xuXHQgIH1cblx0ICAvLyBzY3JpcHQgdGVtcGxhdGVcblx0ICBpZiAobm9kZS50YWdOYW1lID09PSAnU0NSSVBUJykge1xuXHQgICAgcmV0dXJuIHN0cmluZ1RvRnJhZ21lbnQobm9kZS50ZXh0Q29udGVudCk7XG5cdCAgfVxuXHQgIC8vIG5vcm1hbCBub2RlLCBjbG9uZSBpdCB0byBhdm9pZCBtdXRhdGluZyB0aGUgb3JpZ2luYWxcblx0ICB2YXIgY2xvbmVkTm9kZSA9IGNsb25lTm9kZShub2RlKTtcblx0ICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0ICB2YXIgY2hpbGQ7XG5cdCAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICB3aGlsZSAoY2hpbGQgPSBjbG9uZWROb2RlLmZpcnN0Q2hpbGQpIHtcblx0ICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIGZyYWcuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuXHQgIH1cblx0ICB0cmltTm9kZShmcmFnKTtcblx0ICByZXR1cm4gZnJhZztcblx0fVxuXHRcblx0Ly8gVGVzdCBmb3IgdGhlIHByZXNlbmNlIG9mIHRoZSBTYWZhcmkgdGVtcGxhdGUgY2xvbmluZyBidWdcblx0Ly8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd3VnLmNnaT9pZD0xMzc3NTVcblx0dmFyIGhhc0Jyb2tlblRlbXBsYXRlID0gKGZ1bmN0aW9uICgpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuXHQgIGlmIChpbkJyb3dzZXIpIHtcblx0ICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICBhLmlubmVySFRNTCA9ICc8dGVtcGxhdGU+MTwvdGVtcGxhdGU+Jztcblx0ICAgIHJldHVybiAhYS5jbG9uZU5vZGUodHJ1ZSkuZmlyc3RDaGlsZC5pbm5lckhUTUw7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdH0pKCk7XG5cdFxuXHQvLyBUZXN0IGZvciBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGNsb25lIGJ1Z1xuXHR2YXIgaGFzVGV4dGFyZWFDbG9uZUJ1ZyA9IChmdW5jdGlvbiAoKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICBpZiAoaW5Ccm93c2VyKSB7XG5cdCAgICB2YXIgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG5cdCAgICB0LnBsYWNlaG9sZGVyID0gJ3QnO1xuXHQgICAgcmV0dXJuIHQuY2xvbmVOb2RlKHRydWUpLnZhbHVlID09PSAndCc7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdH0pKCk7XG5cdFxuXHQvKipcblx0ICogMS4gRGVhbCB3aXRoIFNhZmFyaSBjbG9uaW5nIG5lc3RlZCA8dGVtcGxhdGU+IGJ1ZyBieVxuXHQgKiAgICBtYW51YWxseSBjbG9uaW5nIGFsbCB0ZW1wbGF0ZSBpbnN0YW5jZXMuXG5cdCAqIDIuIERlYWwgd2l0aCBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGJ1ZyBieSBzZXR0aW5nXG5cdCAqICAgIHRoZSBjb3JyZWN0IHZhbHVlIGFmdGVyIGNsb25pbmcuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBub2RlXG5cdCAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjbG9uZU5vZGUobm9kZSkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICghbm9kZS5xdWVyeVNlbGVjdG9yQWxsKSB7XG5cdCAgICByZXR1cm4gbm9kZS5jbG9uZU5vZGUoKTtcblx0ICB9XG5cdCAgdmFyIHJlcyA9IG5vZGUuY2xvbmVOb2RlKHRydWUpO1xuXHQgIHZhciBpLCBvcmlnaW5hbCwgY2xvbmVkO1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChoYXNCcm9rZW5UZW1wbGF0ZSkge1xuXHQgICAgdmFyIHRlbXBDbG9uZSA9IHJlcztcblx0ICAgIGlmIChpc1JlYWxUZW1wbGF0ZShub2RlKSkge1xuXHQgICAgICBub2RlID0gbm9kZS5jb250ZW50O1xuXHQgICAgICB0ZW1wQ2xvbmUgPSByZXMuY29udGVudDtcblx0ICAgIH1cblx0ICAgIG9yaWdpbmFsID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpO1xuXHQgICAgaWYgKG9yaWdpbmFsLmxlbmd0aCkge1xuXHQgICAgICBjbG9uZWQgPSB0ZW1wQ2xvbmUucXVlcnlTZWxlY3RvckFsbCgndGVtcGxhdGUnKTtcblx0ICAgICAgaSA9IGNsb25lZC5sZW5ndGg7XG5cdCAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICBjbG9uZWRbaV0ucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoY2xvbmVOb2RlKG9yaWdpbmFsW2ldKSwgY2xvbmVkW2ldKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaGFzVGV4dGFyZWFDbG9uZUJ1Zykge1xuXHQgICAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuXHQgICAgICByZXMudmFsdWUgPSBub2RlLnZhbHVlO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb3JpZ2luYWwgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJyk7XG5cdCAgICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcblx0ICAgICAgICBjbG9uZWQgPSByZXMucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKTtcblx0ICAgICAgICBpID0gY2xvbmVkLmxlbmd0aDtcblx0ICAgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAgICBjbG9uZWRbaV0udmFsdWUgPSBvcmlnaW5hbFtpXS52YWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByb2Nlc3MgdGhlIHRlbXBsYXRlIG9wdGlvbiBhbmQgbm9ybWFsaXplcyBpdCBpbnRvIGFcblx0ICogYSBEb2N1bWVudEZyYWdtZW50IHRoYXQgY2FuIGJlIHVzZWQgYXMgYSBwYXJ0aWFsIG9yIGFcblx0ICogaW5zdGFuY2UgdGVtcGxhdGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdGVtcGxhdGVcblx0ICogICAgICAgIFBvc3NpYmxlIHZhbHVlcyBpbmNsdWRlOlxuXHQgKiAgICAgICAgLSBEb2N1bWVudEZyYWdtZW50IG9iamVjdFxuXHQgKiAgICAgICAgLSBOb2RlIG9iamVjdCBvZiB0eXBlIFRlbXBsYXRlXG5cdCAqICAgICAgICAtIGlkIHNlbGVjdG9yOiAnI3NvbWUtdGVtcGxhdGUtaWQnXG5cdCAqICAgICAgICAtIHRlbXBsYXRlIHN0cmluZzogJzxkaXY+PHNwYW4+e3ttc2d9fTwvc3Bhbj48L2Rpdj4nXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hvdWxkQ2xvbmVcblx0ICogQHBhcmFtIHtCb29sZWFufSByYXdcblx0ICogICAgICAgIGlubGluZSBIVE1MIGludGVycG9sYXRpb24uIERvIG5vdCBjaGVjayBmb3IgaWRcblx0ICogICAgICAgIHNlbGVjdG9yIGFuZCBrZWVwIHdoaXRlc3BhY2UgaW4gdGhlIHN0cmluZy5cblx0ICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudHx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgc2hvdWxkQ2xvbmUsIHJhdykge1xuXHQgIHZhciBub2RlLCBmcmFnO1xuXHRcblx0ICAvLyBpZiB0aGUgdGVtcGxhdGUgaXMgYWxyZWFkeSBhIGRvY3VtZW50IGZyYWdtZW50LFxuXHQgIC8vIGRvIG5vdGhpbmdcblx0ICBpZiAoaXNGcmFnbWVudCh0ZW1wbGF0ZSkpIHtcblx0ICAgIHRyaW1Ob2RlKHRlbXBsYXRlKTtcblx0ICAgIHJldHVybiBzaG91bGRDbG9uZSA/IGNsb25lTm9kZSh0ZW1wbGF0ZSkgOiB0ZW1wbGF0ZTtcblx0ICB9XG5cdFxuXHQgIGlmICh0eXBlb2YgdGVtcGxhdGUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAvLyBpZCBzZWxlY3RvclxuXHQgICAgaWYgKCFyYXcgJiYgdGVtcGxhdGUuY2hhckF0KDApID09PSAnIycpIHtcblx0ICAgICAgLy8gaWQgc2VsZWN0b3IgY2FuIGJlIGNhY2hlZCB0b29cblx0ICAgICAgZnJhZyA9IGlkU2VsZWN0b3JDYWNoZS5nZXQodGVtcGxhdGUpO1xuXHQgICAgICBpZiAoIWZyYWcpIHtcblx0ICAgICAgICBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGVtcGxhdGUuc2xpY2UoMSkpO1xuXHQgICAgICAgIGlmIChub2RlKSB7XG5cdCAgICAgICAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQobm9kZSk7XG5cdCAgICAgICAgICAvLyBzYXZlIHNlbGVjdG9yIHRvIGNhY2hlXG5cdCAgICAgICAgICBpZFNlbGVjdG9yQ2FjaGUucHV0KHRlbXBsYXRlLCBmcmFnKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIG5vcm1hbCBzdHJpbmcgdGVtcGxhdGVcblx0ICAgICAgZnJhZyA9IHN0cmluZ1RvRnJhZ21lbnQodGVtcGxhdGUsIHJhdyk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICh0ZW1wbGF0ZS5ub2RlVHlwZSkge1xuXHQgICAgLy8gYSBkaXJlY3Qgbm9kZVxuXHQgICAgZnJhZyA9IG5vZGVUb0ZyYWdtZW50KHRlbXBsYXRlKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBmcmFnICYmIHNob3VsZENsb25lID8gY2xvbmVOb2RlKGZyYWcpIDogZnJhZztcblx0fVxuXHRcblx0dmFyIHRlbXBsYXRlID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgY2xvbmVOb2RlOiBjbG9uZU5vZGUsXG5cdCAgcGFyc2VUZW1wbGF0ZTogcGFyc2VUZW1wbGF0ZVxuXHR9KTtcblx0XG5cdHZhciBodG1sID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gYSBjb21tZW50IG5vZGUgbWVhbnMgdGhpcyBpcyBhIGJpbmRpbmcgZm9yXG5cdCAgICAvLyB7e3sgaW5saW5lIHVuZXNjYXBlZCBodG1sIH19fVxuXHQgICAgaWYgKHRoaXMuZWwubm9kZVR5cGUgPT09IDgpIHtcblx0ICAgICAgLy8gaG9sZCBub2Rlc1xuXHQgICAgICB0aGlzLm5vZGVzID0gW107XG5cdCAgICAgIC8vIHJlcGxhY2UgdGhlIHBsYWNlaG9sZGVyIHdpdGggcHJvcGVyIGFuY2hvclxuXHQgICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1odG1sJyk7XG5cdCAgICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB2YWx1ZSA9IF90b1N0cmluZyh2YWx1ZSk7XG5cdCAgICBpZiAodGhpcy5ub2Rlcykge1xuXHQgICAgICB0aGlzLnN3YXAodmFsdWUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5lbC5pbm5lckhUTUwgPSB2YWx1ZTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBzd2FwOiBmdW5jdGlvbiBzd2FwKHZhbHVlKSB7XG5cdCAgICAvLyByZW1vdmUgb2xkIG5vZGVzXG5cdCAgICB2YXIgaSA9IHRoaXMubm9kZXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICByZW1vdmUodGhpcy5ub2Rlc1tpXSk7XG5cdCAgICB9XG5cdCAgICAvLyBjb252ZXJ0IG5ldyB2YWx1ZSB0byBhIGZyYWdtZW50XG5cdCAgICAvLyBkbyBub3QgYXR0ZW1wdCB0byByZXRyaWV2ZSBmcm9tIGlkIHNlbGVjdG9yXG5cdCAgICB2YXIgZnJhZyA9IHBhcnNlVGVtcGxhdGUodmFsdWUsIHRydWUsIHRydWUpO1xuXHQgICAgLy8gc2F2ZSBhIHJlZmVyZW5jZSB0byB0aGVzZSBub2RlcyBzbyB3ZSBjYW4gcmVtb3ZlIGxhdGVyXG5cdCAgICB0aGlzLm5vZGVzID0gdG9BcnJheShmcmFnLmNoaWxkTm9kZXMpO1xuXHQgICAgYmVmb3JlKGZyYWcsIHRoaXMuYW5jaG9yKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQWJzdHJhY3Rpb24gZm9yIGEgcGFydGlhbGx5LWNvbXBpbGVkIGZyYWdtZW50LlxuXHQgKiBDYW4gb3B0aW9uYWxseSBjb21waWxlIGNvbnRlbnQgd2l0aCBhIGNoaWxkIHNjb3BlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaW5rZXJcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuXHQgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG5cdCAqIEBwYXJhbSB7RnJhZ21lbnR9IFtwYXJlbnRGcmFnXVxuXHQgKi9cblx0ZnVuY3Rpb24gRnJhZ21lbnQobGlua2VyLCB2bSwgZnJhZywgaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpIHtcblx0ICB0aGlzLmNoaWxkcmVuID0gW107XG5cdCAgdGhpcy5jaGlsZEZyYWdzID0gW107XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIHRoaXMuc2NvcGUgPSBzY29wZTtcblx0ICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG5cdCAgdGhpcy5wYXJlbnRGcmFnID0gcGFyZW50RnJhZztcblx0ICBpZiAocGFyZW50RnJhZykge1xuXHQgICAgcGFyZW50RnJhZy5jaGlsZEZyYWdzLnB1c2godGhpcyk7XG5cdCAgfVxuXHQgIHRoaXMudW5saW5rID0gbGlua2VyKHZtLCBmcmFnLCBob3N0LCBzY29wZSwgdGhpcyk7XG5cdCAgdmFyIHNpbmdsZSA9IHRoaXMuc2luZ2xlID0gZnJhZy5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSAmJlxuXHQgIC8vIGRvIG5vdCBnbyBzaW5nbGUgbW9kZSBpZiB0aGUgb25seSBub2RlIGlzIGFuIGFuY2hvclxuXHQgICFmcmFnLmNoaWxkTm9kZXNbMF0uX192X2FuY2hvcjtcblx0ICBpZiAoc2luZ2xlKSB7XG5cdCAgICB0aGlzLm5vZGUgPSBmcmFnLmNoaWxkTm9kZXNbMF07XG5cdCAgICB0aGlzLmJlZm9yZSA9IHNpbmdsZUJlZm9yZTtcblx0ICAgIHRoaXMucmVtb3ZlID0gc2luZ2xlUmVtb3ZlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLm5vZGUgPSBjcmVhdGVBbmNob3IoJ2ZyYWdtZW50LXN0YXJ0Jyk7XG5cdCAgICB0aGlzLmVuZCA9IGNyZWF0ZUFuY2hvcignZnJhZ21lbnQtZW5kJyk7XG5cdCAgICB0aGlzLmZyYWcgPSBmcmFnO1xuXHQgICAgcHJlcGVuZCh0aGlzLm5vZGUsIGZyYWcpO1xuXHQgICAgZnJhZy5hcHBlbmRDaGlsZCh0aGlzLmVuZCk7XG5cdCAgICB0aGlzLmJlZm9yZSA9IG11bHRpQmVmb3JlO1xuXHQgICAgdGhpcy5yZW1vdmUgPSBtdWx0aVJlbW92ZTtcblx0ICB9XG5cdCAgdGhpcy5ub2RlLl9fdl9mcmFnID0gdGhpcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENhbGwgYXR0YWNoL2RldGFjaCBmb3IgYWxsIGNvbXBvbmVudHMgY29udGFpbmVkIHdpdGhpblxuXHQgKiB0aGlzIGZyYWdtZW50LiBBbHNvIGRvIHNvIHJlY3Vyc2l2ZWx5IGZvciBhbGwgY2hpbGRcblx0ICogZnJhZ21lbnRzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rXG5cdCAqL1xuXHRcblx0RnJhZ21lbnQucHJvdG90eXBlLmNhbGxIb29rID0gZnVuY3Rpb24gKGhvb2spIHtcblx0ICB2YXIgaSwgbDtcblx0ICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdGhpcy5jaGlsZEZyYWdzW2ldLmNhbGxIb29rKGhvb2spO1xuXHQgIH1cblx0ICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGhvb2sodGhpcy5jaGlsZHJlbltpXSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzaW5nbGVCZWZvcmUodGFyZ2V0LCB3aXRoVHJhbnNpdGlvbikge1xuXHQgIHRoaXMuaW5zZXJ0ZWQgPSB0cnVlO1xuXHQgIHZhciBtZXRob2QgPSB3aXRoVHJhbnNpdGlvbiAhPT0gZmFsc2UgPyBiZWZvcmVXaXRoVHJhbnNpdGlvbiA6IGJlZm9yZTtcblx0ICBtZXRob2QodGhpcy5ub2RlLCB0YXJnZXQsIHRoaXMudm0pO1xuXHQgIGlmIChpbkRvYyh0aGlzLm5vZGUpKSB7XG5cdCAgICB0aGlzLmNhbGxIb29rKGF0dGFjaCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGZyYWdtZW50LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2luZ2xlUmVtb3ZlKCkge1xuXHQgIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcblx0ICB2YXIgc2hvdWxkQ2FsbFJlbW92ZSA9IGluRG9jKHRoaXMubm9kZSk7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIHRoaXMuYmVmb3JlUmVtb3ZlKCk7XG5cdCAgcmVtb3ZlV2l0aFRyYW5zaXRpb24odGhpcy5ub2RlLCB0aGlzLnZtLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoc2hvdWxkQ2FsbFJlbW92ZSkge1xuXHQgICAgICBzZWxmLmNhbGxIb29rKGRldGFjaCk7XG5cdCAgICB9XG5cdCAgICBzZWxmLmRlc3Ryb3koKTtcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtdWx0aUJlZm9yZSh0YXJnZXQsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgdGhpcy5pbnNlcnRlZCA9IHRydWU7XG5cdCAgdmFyIHZtID0gdGhpcy52bTtcblx0ICB2YXIgbWV0aG9kID0gd2l0aFRyYW5zaXRpb24gIT09IGZhbHNlID8gYmVmb3JlV2l0aFRyYW5zaXRpb24gOiBiZWZvcmU7XG5cdCAgbWFwTm9kZVJhbmdlKHRoaXMubm9kZSwgdGhpcy5lbmQsIGZ1bmN0aW9uIChub2RlKSB7XG5cdCAgICBtZXRob2Qobm9kZSwgdGFyZ2V0LCB2bSk7XG5cdCAgfSk7XG5cdCAgaWYgKGluRG9jKHRoaXMubm9kZSkpIHtcblx0ICAgIHRoaXMuY2FsbEhvb2soYXR0YWNoKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgZnJhZ21lbnQsIG11bHRpLW5vZGVzIHZlcnNpb25cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtdWx0aVJlbW92ZSgpIHtcblx0ICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIHZhciBzaG91bGRDYWxsUmVtb3ZlID0gaW5Eb2ModGhpcy5ub2RlKTtcblx0ICB0aGlzLmJlZm9yZVJlbW92ZSgpO1xuXHQgIHJlbW92ZU5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCB0aGlzLnZtLCB0aGlzLmZyYWcsIGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChzaG91bGRDYWxsUmVtb3ZlKSB7XG5cdCAgICAgIHNlbGYuY2FsbEhvb2soZGV0YWNoKTtcblx0ICAgIH1cblx0ICAgIHNlbGYuZGVzdHJveSgpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJlcGFyZSB0aGUgZnJhZ21lbnQgZm9yIHJlbW92YWwuXG5cdCAqL1xuXHRcblx0RnJhZ21lbnQucHJvdG90eXBlLmJlZm9yZVJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgaSwgbDtcblx0ICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgLy8gY2FsbCB0aGUgc2FtZSBtZXRob2QgcmVjdXJzaXZlbHkgb24gY2hpbGRcblx0ICAgIC8vIGZyYWdtZW50cywgZGVwdGgtZmlyc3Rcblx0ICAgIHRoaXMuY2hpbGRGcmFnc1tpXS5iZWZvcmVSZW1vdmUoZmFsc2UpO1xuXHQgIH1cblx0ICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIC8vIENhbGwgZGVzdHJveSBmb3IgYWxsIGNvbnRhaW5lZCBpbnN0YW5jZXMsXG5cdCAgICAvLyB3aXRoIHJlbW92ZTpmYWxzZSBhbmQgZGVmZXI6dHJ1ZS5cblx0ICAgIC8vIERlZmVyIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHdlIG5lZWQgdG9cblx0ICAgIC8vIGtlZXAgdGhlIGNoaWxkcmVuIHRvIGNhbGwgZGV0YWNoIGhvb2tzXG5cdCAgICAvLyBvbiB0aGVtLlxuXHQgICAgdGhpcy5jaGlsZHJlbltpXS4kZGVzdHJveShmYWxzZSwgdHJ1ZSk7XG5cdCAgfVxuXHQgIHZhciBkaXJzID0gdGhpcy51bmxpbmsuZGlycztcblx0ICBmb3IgKGkgPSAwLCBsID0gZGlycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIC8vIGRpc2FibGUgdGhlIHdhdGNoZXJzIG9uIGFsbCB0aGUgZGlyZWN0aXZlc1xuXHQgICAgLy8gc28gdGhhdCB0aGUgcmVuZGVyZWQgY29udGVudCBzdGF5cyB0aGUgc2FtZVxuXHQgICAgLy8gZHVyaW5nIHJlbW92YWwuXG5cdCAgICBkaXJzW2ldLl93YXRjaGVyICYmIGRpcnNbaV0uX3dhdGNoZXIudGVhcmRvd24oKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogRGVzdHJveSB0aGUgZnJhZ21lbnQuXG5cdCAqL1xuXHRcblx0RnJhZ21lbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKHRoaXMucGFyZW50RnJhZykge1xuXHQgICAgdGhpcy5wYXJlbnRGcmFnLmNoaWxkRnJhZ3MuJHJlbW92ZSh0aGlzKTtcblx0ICB9XG5cdCAgdGhpcy5ub2RlLl9fdl9mcmFnID0gbnVsbDtcblx0ICB0aGlzLnVubGluaygpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENhbGwgYXR0YWNoIGhvb2sgZm9yIGEgVnVlIGluc3RhbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhdHRhY2goY2hpbGQpIHtcblx0ICBpZiAoIWNoaWxkLl9pc0F0dGFjaGVkICYmIGluRG9jKGNoaWxkLiRlbCkpIHtcblx0ICAgIGNoaWxkLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDYWxsIGRldGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IGNoaWxkXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGV0YWNoKGNoaWxkKSB7XG5cdCAgaWYgKGNoaWxkLl9pc0F0dGFjaGVkICYmICFpbkRvYyhjaGlsZC4kZWwpKSB7XG5cdCAgICBjaGlsZC5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgbGlua2VyQ2FjaGUgPSBuZXcgQ2FjaGUoNTAwMCk7XG5cdFxuXHQvKipcblx0ICogQSBmYWN0b3J5IHRoYXQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGluc3RhbmNlcyBvZiBhXG5cdCAqIGZyYWdtZW50LiBDYWNoZXMgdGhlIGNvbXBpbGVkIGxpbmtlciBpZiBwb3NzaWJsZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RWxlbWVudHxTdHJpbmd9IGVsXG5cdCAqL1xuXHRmdW5jdGlvbiBGcmFnbWVudEZhY3Rvcnkodm0sIGVsKSB7XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIHZhciB0ZW1wbGF0ZTtcblx0ICB2YXIgaXNTdHJpbmcgPSB0eXBlb2YgZWwgPT09ICdzdHJpbmcnO1xuXHQgIGlmIChpc1N0cmluZyB8fCBpc1RlbXBsYXRlKGVsKSAmJiAhZWwuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcblx0ICAgIHRlbXBsYXRlID0gcGFyc2VUZW1wbGF0ZShlbCwgdHJ1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXHQgICAgdGVtcGxhdGUuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH1cblx0ICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG5cdCAgLy8gbGlua2VyIGNhbiBiZSBjYWNoZWQsIGJ1dCBvbmx5IGZvciBjb21wb25lbnRzXG5cdCAgdmFyIGxpbmtlcjtcblx0ICB2YXIgY2lkID0gdm0uY29uc3RydWN0b3IuY2lkO1xuXHQgIGlmIChjaWQgPiAwKSB7XG5cdCAgICB2YXIgY2FjaGVJZCA9IGNpZCArIChpc1N0cmluZyA/IGVsIDogZ2V0T3V0ZXJIVE1MKGVsKSk7XG5cdCAgICBsaW5rZXIgPSBsaW5rZXJDYWNoZS5nZXQoY2FjaGVJZCk7XG5cdCAgICBpZiAoIWxpbmtlcikge1xuXHQgICAgICBsaW5rZXIgPSBjb21waWxlKHRlbXBsYXRlLCB2bS4kb3B0aW9ucywgdHJ1ZSk7XG5cdCAgICAgIGxpbmtlckNhY2hlLnB1dChjYWNoZUlkLCBsaW5rZXIpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBsaW5rZXIgPSBjb21waWxlKHRlbXBsYXRlLCB2bS4kb3B0aW9ucywgdHJ1ZSk7XG5cdCAgfVxuXHQgIHRoaXMubGlua2VyID0gbGlua2VyO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlIGEgZnJhZ21lbnQgaW5zdGFuY2Ugd2l0aCBnaXZlbiBob3N0IGFuZCBzY29wZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IGhvc3Rcblx0ICogQHBhcmFtIHtPYmplY3R9IHNjb3BlXG5cdCAqIEBwYXJhbSB7RnJhZ21lbnR9IHBhcmVudEZyYWdcblx0ICovXG5cdFxuXHRGcmFnbWVudEZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChob3N0LCBzY29wZSwgcGFyZW50RnJhZykge1xuXHQgIHZhciBmcmFnID0gY2xvbmVOb2RlKHRoaXMudGVtcGxhdGUpO1xuXHQgIHJldHVybiBuZXcgRnJhZ21lbnQodGhpcy5saW5rZXIsIHRoaXMudm0sIGZyYWcsIGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKTtcblx0fTtcblx0XG5cdHZhciBPTiA9IDcwMDtcblx0dmFyIE1PREVMID0gODAwO1xuXHR2YXIgQklORCA9IDg1MDtcblx0dmFyIFRSQU5TSVRJT04gPSAxMTAwO1xuXHR2YXIgRUwgPSAxNTAwO1xuXHR2YXIgQ09NUE9ORU5UID0gMTUwMDtcblx0dmFyIFBBUlRJQUwgPSAxNzUwO1xuXHR2YXIgSUYgPSAyMTAwO1xuXHR2YXIgRk9SID0gMjIwMDtcblx0dmFyIFNMT1QgPSAyMzAwO1xuXHRcblx0dmFyIHVpZCQzID0gMDtcblx0XG5cdHZhciB2Rm9yID0ge1xuXHRcblx0ICBwcmlvcml0eTogRk9SLFxuXHQgIHRlcm1pbmFsOiB0cnVlLFxuXHRcblx0ICBwYXJhbXM6IFsndHJhY2stYnknLCAnc3RhZ2dlcicsICdlbnRlci1zdGFnZ2VyJywgJ2xlYXZlLXN0YWdnZXInXSxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8vIHN1cHBvcnQgXCJpdGVtIGluL29mIGl0ZW1zXCIgc3ludGF4XG5cdCAgICB2YXIgaW5NYXRjaCA9IHRoaXMuZXhwcmVzc2lvbi5tYXRjaCgvKC4qKSAoPzppbnxvZikgKC4qKS8pO1xuXHQgICAgaWYgKGluTWF0Y2gpIHtcblx0ICAgICAgdmFyIGl0TWF0Y2ggPSBpbk1hdGNoWzFdLm1hdGNoKC9cXCgoLiopLCguKilcXCkvKTtcblx0ICAgICAgaWYgKGl0TWF0Y2gpIHtcblx0ICAgICAgICB0aGlzLml0ZXJhdG9yID0gaXRNYXRjaFsxXS50cmltKCk7XG5cdCAgICAgICAgdGhpcy5hbGlhcyA9IGl0TWF0Y2hbMl0udHJpbSgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuYWxpYXMgPSBpbk1hdGNoWzFdLnRyaW0oKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLmV4cHJlc3Npb24gPSBpbk1hdGNoWzJdO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICghdGhpcy5hbGlhcykge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgdi1mb3IgZXhwcmVzc2lvbiBcIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2FsaWFzIGlzIHJlcXVpcmVkLicsIHRoaXMudm0pO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gdWlkIGFzIGEgY2FjaGUgaWRlbnRpZmllclxuXHQgICAgdGhpcy5pZCA9ICdfX3YtZm9yX18nICsgKyt1aWQkMztcblx0XG5cdCAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGFuIG9wdGlvbiBsaXN0LFxuXHQgICAgLy8gc28gdGhhdCB3ZSBrbm93IGlmIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSA8c2VsZWN0PidzXG5cdCAgICAvLyB2LW1vZGVsIHdoZW4gdGhlIG9wdGlvbiBsaXN0IGhhcyBjaGFuZ2VkLlxuXHQgICAgLy8gYmVjYXVzZSB2LW1vZGVsIGhhcyBhIGxvd2VyIHByaW9yaXR5IHRoYW4gdi1mb3IsXG5cdCAgICAvLyB0aGUgdi1tb2RlbCBpcyBub3QgYm91bmQgaGVyZSB5ZXQsIHNvIHdlIGhhdmUgdG9cblx0ICAgIC8vIHJldHJpdmUgaXQgaW4gdGhlIGFjdHVhbCB1cGRhdGVNb2RlbCgpIGZ1bmN0aW9uLlxuXHQgICAgdmFyIHRhZyA9IHRoaXMuZWwudGFnTmFtZTtcblx0ICAgIHRoaXMuaXNPcHRpb24gPSAodGFnID09PSAnT1BUSU9OJyB8fCB0YWcgPT09ICdPUFRHUk9VUCcpICYmIHRoaXMuZWwucGFyZW50Tm9kZS50YWdOYW1lID09PSAnU0VMRUNUJztcblx0XG5cdCAgICAvLyBzZXR1cCBhbmNob3Igbm9kZXNcblx0ICAgIHRoaXMuc3RhcnQgPSBjcmVhdGVBbmNob3IoJ3YtZm9yLXN0YXJ0Jyk7XG5cdCAgICB0aGlzLmVuZCA9IGNyZWF0ZUFuY2hvcigndi1mb3ItZW5kJyk7XG5cdCAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuZW5kKTtcblx0ICAgIGJlZm9yZSh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7XG5cdFxuXHQgICAgLy8gY2FjaGVcblx0ICAgIHRoaXMuY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRcblx0ICAgIC8vIGZyYWdtZW50IGZhY3Rvcnlcblx0ICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgdGhpcy5lbCk7XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoZGF0YSkge1xuXHQgICAgdGhpcy5kaWZmKGRhdGEpO1xuXHQgICAgdGhpcy51cGRhdGVSZWYoKTtcblx0ICAgIHRoaXMudXBkYXRlTW9kZWwoKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBEaWZmLCBiYXNlZCBvbiBuZXcgZGF0YSBhbmQgb2xkIGRhdGEsIGRldGVybWluZSB0aGVcblx0ICAgKiBtaW5pbXVtIGFtb3VudCBvZiBET00gbWFuaXB1bGF0aW9ucyBuZWVkZWQgdG8gbWFrZSB0aGVcblx0ICAgKiBET00gcmVmbGVjdCB0aGUgbmV3IGRhdGEgQXJyYXkuXG5cdCAgICpcblx0ICAgKiBUaGUgYWxnb3JpdGhtIGRpZmZzIHRoZSBuZXcgZGF0YSBBcnJheSBieSBzdG9yaW5nIGFcblx0ICAgKiBoaWRkZW4gcmVmZXJlbmNlIHRvIGFuIG93bmVyIHZtIGluc3RhbmNlIG9uIHByZXZpb3VzbHlcblx0ICAgKiBzZWVuIGRhdGEuIFRoaXMgYWxsb3dzIHVzIHRvIGFjaGlldmUgTyhuKSB3aGljaCBpc1xuXHQgICAqIGJldHRlciB0aGFuIGEgbGV2ZW5zaHRlaW4gZGlzdGFuY2UgYmFzZWQgYWxnb3JpdGhtLFxuXHQgICAqIHdoaWNoIGlzIE8obSAqIG4pLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtBcnJheX0gZGF0YVxuXHQgICAqL1xuXHRcblx0ICBkaWZmOiBmdW5jdGlvbiBkaWZmKGRhdGEpIHtcblx0ICAgIC8vIGNoZWNrIGlmIHRoZSBBcnJheSB3YXMgY29udmVydGVkIGZyb20gYW4gT2JqZWN0XG5cdCAgICB2YXIgaXRlbSA9IGRhdGFbMF07XG5cdCAgICB2YXIgY29udmVydGVkRnJvbU9iamVjdCA9IHRoaXMuZnJvbU9iamVjdCA9IGlzT2JqZWN0KGl0ZW0pICYmIGhhc093bihpdGVtLCAnJGtleScpICYmIGhhc093bihpdGVtLCAnJHZhbHVlJyk7XG5cdFxuXHQgICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuXHQgICAgdmFyIG9sZEZyYWdzID0gdGhpcy5mcmFncztcblx0ICAgIHZhciBmcmFncyA9IHRoaXMuZnJhZ3MgPSBuZXcgQXJyYXkoZGF0YS5sZW5ndGgpO1xuXHQgICAgdmFyIGFsaWFzID0gdGhpcy5hbGlhcztcblx0ICAgIHZhciBpdGVyYXRvciA9IHRoaXMuaXRlcmF0b3I7XG5cdCAgICB2YXIgc3RhcnQgPSB0aGlzLnN0YXJ0O1xuXHQgICAgdmFyIGVuZCA9IHRoaXMuZW5kO1xuXHQgICAgdmFyIGluRG9jdW1lbnQgPSBpbkRvYyhzdGFydCk7XG5cdCAgICB2YXIgaW5pdCA9ICFvbGRGcmFncztcblx0ICAgIHZhciBpLCBsLCBmcmFnLCBrZXksIHZhbHVlLCBwcmltaXRpdmU7XG5cdFxuXHQgICAgLy8gRmlyc3QgcGFzcywgZ28gdGhyb3VnaCB0aGUgbmV3IEFycmF5IGFuZCBmaWxsIHVwXG5cdCAgICAvLyB0aGUgbmV3IGZyYWdzIGFycmF5LiBJZiBhIHBpZWNlIG9mIGRhdGEgaGFzIGEgY2FjaGVkXG5cdCAgICAvLyBpbnN0YW5jZSBmb3IgaXQsIHdlIHJldXNlIGl0LiBPdGhlcndpc2UgYnVpbGQgYSBuZXdcblx0ICAgIC8vIGluc3RhbmNlLlxuXHQgICAgZm9yIChpID0gMCwgbCA9IGRhdGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGl0ZW0gPSBkYXRhW2ldO1xuXHQgICAgICBrZXkgPSBjb252ZXJ0ZWRGcm9tT2JqZWN0ID8gaXRlbS4ka2V5IDogbnVsbDtcblx0ICAgICAgdmFsdWUgPSBjb252ZXJ0ZWRGcm9tT2JqZWN0ID8gaXRlbS4kdmFsdWUgOiBpdGVtO1xuXHQgICAgICBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuXHQgICAgICBmcmFnID0gIWluaXQgJiYgdGhpcy5nZXRDYWNoZWRGcmFnKHZhbHVlLCBpLCBrZXkpO1xuXHQgICAgICBpZiAoZnJhZykge1xuXHQgICAgICAgIC8vIHJldXNhYmxlIGZyYWdtZW50XG5cdCAgICAgICAgZnJhZy5yZXVzZWQgPSB0cnVlO1xuXHQgICAgICAgIC8vIHVwZGF0ZSAkaW5kZXhcblx0ICAgICAgICBmcmFnLnNjb3BlLiRpbmRleCA9IGk7XG5cdCAgICAgICAgLy8gdXBkYXRlICRrZXlcblx0ICAgICAgICBpZiAoa2V5KSB7XG5cdCAgICAgICAgICBmcmFnLnNjb3BlLiRrZXkgPSBrZXk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIHVwZGF0ZSBpdGVyYXRvclxuXHQgICAgICAgIGlmIChpdGVyYXRvcikge1xuXHQgICAgICAgICAgZnJhZy5zY29wZVtpdGVyYXRvcl0gPSBrZXkgIT09IG51bGwgPyBrZXkgOiBpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyB1cGRhdGUgZGF0YSBmb3IgdHJhY2stYnksIG9iamVjdCByZXBlYXQgJlxuXHQgICAgICAgIC8vIHByaW1pdGl2ZSB2YWx1ZXMuXG5cdCAgICAgICAgaWYgKHRyYWNrQnlLZXkgfHwgY29udmVydGVkRnJvbU9iamVjdCB8fCBwcmltaXRpdmUpIHtcblx0ICAgICAgICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgZnJhZy5zY29wZVthbGlhc10gPSB2YWx1ZTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBuZXcgaXNudGFuY2Vcblx0ICAgICAgICBmcmFnID0gdGhpcy5jcmVhdGUodmFsdWUsIGFsaWFzLCBpLCBrZXkpO1xuXHQgICAgICAgIGZyYWcuZnJlc2ggPSAhaW5pdDtcblx0ICAgICAgfVxuXHQgICAgICBmcmFnc1tpXSA9IGZyYWc7XG5cdCAgICAgIGlmIChpbml0KSB7XG5cdCAgICAgICAgZnJhZy5iZWZvcmUoZW5kKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIHdlJ3JlIGRvbmUgZm9yIHRoZSBpbml0aWFsIHJlbmRlci5cblx0ICAgIGlmIChpbml0KSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBTZWNvbmQgcGFzcywgZ28gdGhyb3VnaCB0aGUgb2xkIGZyYWdtZW50cyBhbmRcblx0ICAgIC8vIGRlc3Ryb3kgdGhvc2Ugd2hvIGFyZSBub3QgcmV1c2VkIChhbmQgcmVtb3ZlIHRoZW1cblx0ICAgIC8vIGZyb20gY2FjaGUpXG5cdCAgICB2YXIgcmVtb3ZhbEluZGV4ID0gMDtcblx0ICAgIHZhciB0b3RhbFJlbW92ZWQgPSBvbGRGcmFncy5sZW5ndGggLSBmcmFncy5sZW5ndGg7XG5cdCAgICAvLyB3aGVuIHJlbW92aW5nIGEgbGFyZ2UgbnVtYmVyIG9mIGZyYWdtZW50cywgd2F0Y2hlciByZW1vdmFsXG5cdCAgICAvLyB0dXJucyBvdXQgdG8gYmUgYSBwZXJmIGJvdHRsZW5lY2ssIHNvIHdlIGJhdGNoIHRoZSB3YXRjaGVyXG5cdCAgICAvLyByZW1vdmFscyBpbnRvIGEgc2luZ2xlIGZpbHRlciBjYWxsIVxuXHQgICAgdGhpcy52bS5fdkZvclJlbW92aW5nID0gdHJ1ZTtcblx0ICAgIGZvciAoaSA9IDAsIGwgPSBvbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgZnJhZyA9IG9sZEZyYWdzW2ldO1xuXHQgICAgICBpZiAoIWZyYWcucmV1c2VkKSB7XG5cdCAgICAgICAgdGhpcy5kZWxldGVDYWNoZWRGcmFnKGZyYWcpO1xuXHQgICAgICAgIHRoaXMucmVtb3ZlKGZyYWcsIHJlbW92YWxJbmRleCsrLCB0b3RhbFJlbW92ZWQsIGluRG9jdW1lbnQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aGlzLnZtLl92Rm9yUmVtb3ZpbmcgPSBmYWxzZTtcblx0ICAgIGlmIChyZW1vdmFsSW5kZXgpIHtcblx0ICAgICAgdGhpcy52bS5fd2F0Y2hlcnMgPSB0aGlzLnZtLl93YXRjaGVycy5maWx0ZXIoZnVuY3Rpb24gKHcpIHtcblx0ICAgICAgICByZXR1cm4gdy5hY3RpdmU7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEZpbmFsIHBhc3MsIG1vdmUvaW5zZXJ0IG5ldyBmcmFnbWVudHMgaW50byB0aGVcblx0ICAgIC8vIHJpZ2h0IHBsYWNlLlxuXHQgICAgdmFyIHRhcmdldFByZXYsIHByZXZFbCwgY3VycmVudFByZXY7XG5cdCAgICB2YXIgaW5zZXJ0aW9uSW5kZXggPSAwO1xuXHQgICAgZm9yIChpID0gMCwgbCA9IGZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBmcmFnID0gZnJhZ3NbaV07XG5cdCAgICAgIC8vIHRoaXMgaXMgdGhlIGZyYWcgdGhhdCB3ZSBzaG91bGQgYmUgYWZ0ZXJcblx0ICAgICAgdGFyZ2V0UHJldiA9IGZyYWdzW2kgLSAxXTtcblx0ICAgICAgcHJldkVsID0gdGFyZ2V0UHJldiA/IHRhcmdldFByZXYuc3RhZ2dlckNiID8gdGFyZ2V0UHJldi5zdGFnZ2VyQW5jaG9yIDogdGFyZ2V0UHJldi5lbmQgfHwgdGFyZ2V0UHJldi5ub2RlIDogc3RhcnQ7XG5cdCAgICAgIGlmIChmcmFnLnJldXNlZCAmJiAhZnJhZy5zdGFnZ2VyQ2IpIHtcblx0ICAgICAgICBjdXJyZW50UHJldiA9IGZpbmRQcmV2RnJhZyhmcmFnLCBzdGFydCwgdGhpcy5pZCk7XG5cdCAgICAgICAgaWYgKGN1cnJlbnRQcmV2ICE9PSB0YXJnZXRQcmV2ICYmICghY3VycmVudFByZXYgfHxcblx0ICAgICAgICAvLyBvcHRpbWl6YXRpb24gZm9yIG1vdmluZyBhIHNpbmdsZSBpdGVtLlxuXHQgICAgICAgIC8vIHRoYW5rcyB0byBzdWdnZXN0aW9ucyBieSBAbGl2b3JhcyBpbiAjMTgwN1xuXHQgICAgICAgIGZpbmRQcmV2RnJhZyhjdXJyZW50UHJldiwgc3RhcnQsIHRoaXMuaWQpICE9PSB0YXJnZXRQcmV2KSkge1xuXHQgICAgICAgICAgdGhpcy5tb3ZlKGZyYWcsIHByZXZFbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIG5ldyBpbnN0YW5jZSwgb3Igc3RpbGwgaW4gc3RhZ2dlci5cblx0ICAgICAgICAvLyBpbnNlcnQgd2l0aCB1cGRhdGVkIHN0YWdnZXIgaW5kZXguXG5cdCAgICAgICAgdGhpcy5pbnNlcnQoZnJhZywgaW5zZXJ0aW9uSW5kZXgrKywgcHJldkVsLCBpbkRvY3VtZW50KTtcblx0ICAgICAgfVxuXHQgICAgICBmcmFnLnJldXNlZCA9IGZyYWcuZnJlc2ggPSBmYWxzZTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGUgYSBuZXcgZnJhZ21lbnQgaW5zdGFuY2UuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGFsaWFzXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IFtrZXldXG5cdCAgICogQHJldHVybiB7RnJhZ21lbnR9XG5cdCAgICovXG5cdFxuXHQgIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlKHZhbHVlLCBhbGlhcywgaW5kZXgsIGtleSkge1xuXHQgICAgdmFyIGhvc3QgPSB0aGlzLl9ob3N0O1xuXHQgICAgLy8gY3JlYXRlIGl0ZXJhdGlvbiBzY29wZVxuXHQgICAgdmFyIHBhcmVudFNjb3BlID0gdGhpcy5fc2NvcGUgfHwgdGhpcy52bTtcblx0ICAgIHZhciBzY29wZSA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUpO1xuXHQgICAgLy8gcmVmIGhvbGRlciBmb3IgdGhlIHNjb3BlXG5cdCAgICBzY29wZS4kcmVmcyA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUuJHJlZnMpO1xuXHQgICAgc2NvcGUuJGVscyA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUuJGVscyk7XG5cdCAgICAvLyBtYWtlIHN1cmUgcG9pbnQgJHBhcmVudCB0byBwYXJlbnQgc2NvcGVcblx0ICAgIHNjb3BlLiRwYXJlbnQgPSBwYXJlbnRTY29wZTtcblx0ICAgIC8vIGZvciB0d28td2F5IGJpbmRpbmcgb24gYWxpYXNcblx0ICAgIHNjb3BlLiRmb3JDb250ZXh0ID0gdGhpcztcblx0ICAgIC8vIGRlZmluZSBzY29wZSBwcm9wZXJ0aWVzXG5cdCAgICAvLyBpbXBvcnRhbnQ6IGRlZmluZSB0aGUgc2NvcGUgYWxpYXMgd2l0aG91dCBmb3JjZWQgY29udmVyc2lvblxuXHQgICAgLy8gc28gdGhhdCBmcm96ZW4gZGF0YSBzdHJ1Y3R1cmVzIHJlbWFpbiBub24tcmVhY3RpdmUuXG5cdCAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCBhbGlhcywgdmFsdWUpO1xuXHQgICAgfSk7XG5cdCAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgJyRpbmRleCcsIGluZGV4KTtcblx0ICAgIGlmIChrZXkpIHtcblx0ICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsICcka2V5Jywga2V5KTtcblx0ICAgIH0gZWxzZSBpZiAoc2NvcGUuJGtleSkge1xuXHQgICAgICAvLyBhdm9pZCBhY2NpZGVudGFsIGZhbGxiYWNrXG5cdCAgICAgIGRlZihzY29wZSwgJyRrZXknLCBudWxsKTtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLml0ZXJhdG9yKSB7XG5cdCAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCB0aGlzLml0ZXJhdG9yLCBrZXkgIT09IG51bGwgPyBrZXkgOiBpbmRleCk7XG5cdCAgICB9XG5cdCAgICB2YXIgZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUoaG9zdCwgc2NvcGUsIHRoaXMuX2ZyYWcpO1xuXHQgICAgZnJhZy5mb3JJZCA9IHRoaXMuaWQ7XG5cdCAgICB0aGlzLmNhY2hlRnJhZyh2YWx1ZSwgZnJhZywgaW5kZXgsIGtleSk7XG5cdCAgICByZXR1cm4gZnJhZztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBVcGRhdGUgdGhlIHYtcmVmIG9uIG93bmVyIHZtLlxuXHQgICAqL1xuXHRcblx0ICB1cGRhdGVSZWY6IGZ1bmN0aW9uIHVwZGF0ZVJlZigpIHtcblx0ICAgIHZhciByZWYgPSB0aGlzLmRlc2NyaXB0b3IucmVmO1xuXHQgICAgaWYgKCFyZWYpIHJldHVybjtcblx0ICAgIHZhciBoYXNoID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRyZWZzO1xuXHQgICAgdmFyIHJlZnM7XG5cdCAgICBpZiAoIXRoaXMuZnJvbU9iamVjdCkge1xuXHQgICAgICByZWZzID0gdGhpcy5mcmFncy5tYXAoZmluZFZtRnJvbUZyYWcpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVmcyA9IHt9O1xuXHQgICAgICB0aGlzLmZyYWdzLmZvckVhY2goZnVuY3Rpb24gKGZyYWcpIHtcblx0ICAgICAgICByZWZzW2ZyYWcuc2NvcGUuJGtleV0gPSBmaW5kVm1Gcm9tRnJhZyhmcmFnKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgICBoYXNoW3JlZl0gPSByZWZzO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEZvciBvcHRpb24gbGlzdHMsIHVwZGF0ZSB0aGUgY29udGFpbmluZyB2LW1vZGVsIG9uXG5cdCAgICogcGFyZW50IDxzZWxlY3Q+LlxuXHQgICAqL1xuXHRcblx0ICB1cGRhdGVNb2RlbDogZnVuY3Rpb24gdXBkYXRlTW9kZWwoKSB7XG5cdCAgICBpZiAodGhpcy5pc09wdGlvbikge1xuXHQgICAgICB2YXIgcGFyZW50ID0gdGhpcy5zdGFydC5wYXJlbnROb2RlO1xuXHQgICAgICB2YXIgbW9kZWwgPSBwYXJlbnQgJiYgcGFyZW50Ll9fdl9tb2RlbDtcblx0ICAgICAgaWYgKG1vZGVsKSB7XG5cdCAgICAgICAgbW9kZWwuZm9yY2VVcGRhdGUoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEluc2VydCBhIGZyYWdtZW50LiBIYW5kbGVzIHN0YWdnZXJpbmcuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtOb2RlfSBwcmV2RWxcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IGluRG9jdW1lbnRcblx0ICAgKi9cblx0XG5cdCAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoZnJhZywgaW5kZXgsIHByZXZFbCwgaW5Eb2N1bWVudCkge1xuXHQgICAgaWYgKGZyYWcuc3RhZ2dlckNiKSB7XG5cdCAgICAgIGZyYWcuc3RhZ2dlckNiLmNhbmNlbCgpO1xuXHQgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG5cdCAgICB9XG5cdCAgICB2YXIgc3RhZ2dlckFtb3VudCA9IHRoaXMuZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgbnVsbCwgJ2VudGVyJyk7XG5cdCAgICBpZiAoaW5Eb2N1bWVudCAmJiBzdGFnZ2VyQW1vdW50KSB7XG5cdCAgICAgIC8vIGNyZWF0ZSBhbiBhbmNob3IgYW5kIGluc2VydCBpdCBzeW5jaHJvbm91c2x5LFxuXHQgICAgICAvLyBzbyB0aGF0IHdlIGNhbiByZXNvbHZlIHRoZSBjb3JyZWN0IG9yZGVyIHdpdGhvdXRcblx0ICAgICAgLy8gd29ycnlpbmcgYWJvdXQgc29tZSBlbGVtZW50cyBub3QgaW5zZXJ0ZWQgeWV0XG5cdCAgICAgIHZhciBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3I7XG5cdCAgICAgIGlmICghYW5jaG9yKSB7XG5cdCAgICAgICAgYW5jaG9yID0gZnJhZy5zdGFnZ2VyQW5jaG9yID0gY3JlYXRlQW5jaG9yKCdzdGFnZ2VyLWFuY2hvcicpO1xuXHQgICAgICAgIGFuY2hvci5fX3ZfZnJhZyA9IGZyYWc7XG5cdCAgICAgIH1cblx0ICAgICAgYWZ0ZXIoYW5jaG9yLCBwcmV2RWwpO1xuXHQgICAgICB2YXIgb3AgPSBmcmFnLnN0YWdnZXJDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG5cdCAgICAgICAgZnJhZy5iZWZvcmUoYW5jaG9yKTtcblx0ICAgICAgICByZW1vdmUoYW5jaG9yKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHNldFRpbWVvdXQob3AsIHN0YWdnZXJBbW91bnQpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIHRhcmdldCA9IHByZXZFbC5uZXh0U2libGluZztcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmICghdGFyZ2V0KSB7XG5cdCAgICAgICAgLy8gcmVzZXQgZW5kIGFuY2hvciBwb3NpdGlvbiBpbiBjYXNlIHRoZSBwb3NpdGlvbiB3YXMgbWVzc2VkIHVwXG5cdCAgICAgICAgLy8gYnkgYW4gZXh0ZXJuYWwgZHJhZy1uLWRyb3AgbGlicmFyeS5cblx0ICAgICAgICBhZnRlcih0aGlzLmVuZCwgcHJldkVsKTtcblx0ICAgICAgICB0YXJnZXQgPSB0aGlzLmVuZDtcblx0ICAgICAgfVxuXHQgICAgICBmcmFnLmJlZm9yZSh0YXJnZXQpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZSBhIGZyYWdtZW50LiBIYW5kbGVzIHN0YWdnZXJpbmcuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBpbkRvY3VtZW50XG5cdCAgICovXG5cdFxuXHQgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGZyYWcsIGluZGV4LCB0b3RhbCwgaW5Eb2N1bWVudCkge1xuXHQgICAgaWYgKGZyYWcuc3RhZ2dlckNiKSB7XG5cdCAgICAgIGZyYWcuc3RhZ2dlckNiLmNhbmNlbCgpO1xuXHQgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG5cdCAgICAgIC8vIGl0J3Mgbm90IHBvc3NpYmxlIGZvciB0aGUgc2FtZSBmcmFnIHRvIGJlIHJlbW92ZWRcblx0ICAgICAgLy8gdHdpY2UsIHNvIGlmIHdlIGhhdmUgYSBwZW5kaW5nIHN0YWdnZXIgY2FsbGJhY2ssXG5cdCAgICAgIC8vIGl0IG1lYW5zIHRoaXMgZnJhZyBpcyBxdWV1ZWQgZm9yIGVudGVyIGJ1dCByZW1vdmVkXG5cdCAgICAgIC8vIGJlZm9yZSBpdHMgdHJhbnNpdGlvbiBzdGFydGVkLiBTaW5jZSBpdCBpcyBhbHJlYWR5XG5cdCAgICAgIC8vIGRlc3Ryb3llZCwgd2UgY2FuIGp1c3QgbGVhdmUgaXQgaW4gZGV0YWNoZWQgc3RhdGUuXG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBzdGFnZ2VyQW1vdW50ID0gdGhpcy5nZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCB0b3RhbCwgJ2xlYXZlJyk7XG5cdCAgICBpZiAoaW5Eb2N1bWVudCAmJiBzdGFnZ2VyQW1vdW50KSB7XG5cdCAgICAgIHZhciBvcCA9IGZyYWcuc3RhZ2dlckNiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcblx0ICAgICAgICBmcmFnLnJlbW92ZSgpO1xuXHQgICAgICB9KTtcblx0ICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBmcmFnLnJlbW92ZSgpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIE1vdmUgYSBmcmFnbWVudCB0byBhIG5ldyBwb3NpdGlvbi5cblx0ICAgKiBGb3JjZSBubyB0cmFuc2l0aW9uLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqIEBwYXJhbSB7Tm9kZX0gcHJldkVsXG5cdCAgICovXG5cdFxuXHQgIG1vdmU6IGZ1bmN0aW9uIG1vdmUoZnJhZywgcHJldkVsKSB7XG5cdCAgICAvLyBmaXggYSBjb21tb24gaXNzdWUgd2l0aCBTb3J0YWJsZTpcblx0ICAgIC8vIGlmIHByZXZFbCBkb2Vzbid0IGhhdmUgbmV4dFNpYmxpbmcsIHRoaXMgbWVhbnMgaXQnc1xuXHQgICAgLy8gYmVlbiBkcmFnZ2VkIGFmdGVyIHRoZSBlbmQgYW5jaG9yLiBKdXN0IHJlLXBvc2l0aW9uXG5cdCAgICAvLyB0aGUgZW5kIGFuY2hvciB0byB0aGUgZW5kIG9mIHRoZSBjb250YWluZXIuXG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghcHJldkVsLm5leHRTaWJsaW5nKSB7XG5cdCAgICAgIHRoaXMuZW5kLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xuXHQgICAgfVxuXHQgICAgZnJhZy5iZWZvcmUocHJldkVsLm5leHRTaWJsaW5nLCBmYWxzZSk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ2FjaGUgYSBmcmFnbWVudCB1c2luZyB0cmFjay1ieSBvciB0aGUgb2JqZWN0IGtleS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IFtrZXldXG5cdCAgICovXG5cdFxuXHQgIGNhY2hlRnJhZzogZnVuY3Rpb24gY2FjaGVGcmFnKHZhbHVlLCBmcmFnLCBpbmRleCwga2V5KSB7XG5cdCAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG5cdCAgICB2YXIgY2FjaGUgPSB0aGlzLmNhY2hlO1xuXHQgICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG5cdCAgICB2YXIgaWQ7XG5cdCAgICBpZiAoa2V5IHx8IHRyYWNrQnlLZXkgfHwgcHJpbWl0aXZlKSB7XG5cdCAgICAgIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG5cdCAgICAgIGlmICghY2FjaGVbaWRdKSB7XG5cdCAgICAgICAgY2FjaGVbaWRdID0gZnJhZztcblx0ICAgICAgfSBlbHNlIGlmICh0cmFja0J5S2V5ICE9PSAnJGluZGV4Jykge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWQgPSB0aGlzLmlkO1xuXHQgICAgICBpZiAoaGFzT3duKHZhbHVlLCBpZCkpIHtcblx0ICAgICAgICBpZiAodmFsdWVbaWRdID09PSBudWxsKSB7XG5cdCAgICAgICAgICB2YWx1ZVtpZF0gPSBmcmFnO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpKSB7XG5cdCAgICAgICAgZGVmKHZhbHVlLCBpZCwgZnJhZyk7XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHdhcm4oJ0Zyb3plbiB2LWZvciBvYmplY3RzIGNhbm5vdCBiZSBhdXRvbWF0aWNhbGx5IHRyYWNrZWQsIG1ha2Ugc3VyZSB0byAnICsgJ3Byb3ZpZGUgYSB0cmFjay1ieSBrZXkuJyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGZyYWcucmF3ID0gdmFsdWU7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogR2V0IGEgY2FjaGVkIGZyYWdtZW50IGZyb20gdGhlIHZhbHVlL2luZGV4L2tleVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cblx0ICAgKi9cblx0XG5cdCAgZ2V0Q2FjaGVkRnJhZzogZnVuY3Rpb24gZ2V0Q2FjaGVkRnJhZyh2YWx1ZSwgaW5kZXgsIGtleSkge1xuXHQgICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuXHQgICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG5cdCAgICB2YXIgZnJhZztcblx0ICAgIGlmIChrZXkgfHwgdHJhY2tCeUtleSB8fCBwcmltaXRpdmUpIHtcblx0ICAgICAgdmFyIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG5cdCAgICAgIGZyYWcgPSB0aGlzLmNhY2hlW2lkXTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGZyYWcgPSB2YWx1ZVt0aGlzLmlkXTtcblx0ICAgIH1cblx0ICAgIGlmIChmcmFnICYmIChmcmFnLnJldXNlZCB8fCBmcmFnLmZyZXNoKSkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZnJhZztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBEZWxldGUgYSBmcmFnbWVudCBmcm9tIGNhY2hlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqL1xuXHRcblx0ICBkZWxldGVDYWNoZWRGcmFnOiBmdW5jdGlvbiBkZWxldGVDYWNoZWRGcmFnKGZyYWcpIHtcblx0ICAgIHZhciB2YWx1ZSA9IGZyYWcucmF3O1xuXHQgICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuXHQgICAgdmFyIHNjb3BlID0gZnJhZy5zY29wZTtcblx0ICAgIHZhciBpbmRleCA9IHNjb3BlLiRpbmRleDtcblx0ICAgIC8vIGZpeCAjOTQ4OiBhdm9pZCBhY2NpZGVudGFsbHkgZmFsbCB0aHJvdWdoIHRvXG5cdCAgICAvLyBhIHBhcmVudCByZXBlYXRlciB3aGljaCBoYXBwZW5zIHRvIGhhdmUgJGtleS5cblx0ICAgIHZhciBrZXkgPSBoYXNPd24oc2NvcGUsICcka2V5JykgJiYgc2NvcGUuJGtleTtcblx0ICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuXHQgICAgaWYgKHRyYWNrQnlLZXkgfHwga2V5IHx8IHByaW1pdGl2ZSkge1xuXHQgICAgICB2YXIgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcblx0ICAgICAgdGhpcy5jYWNoZVtpZF0gPSBudWxsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFsdWVbdGhpcy5pZF0gPSBudWxsO1xuXHQgICAgICBmcmFnLnJhdyA9IG51bGw7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogR2V0IHRoZSBzdGFnZ2VyIGFtb3VudCBmb3IgYW4gaW5zZXJ0aW9uL3JlbW92YWwuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICAgKi9cblx0XG5cdCAgZ2V0U3RhZ2dlcjogZnVuY3Rpb24gZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgdG90YWwsIHR5cGUpIHtcblx0ICAgIHR5cGUgPSB0eXBlICsgJ1N0YWdnZXInO1xuXHQgICAgdmFyIHRyYW5zID0gZnJhZy5ub2RlLl9fdl90cmFucztcblx0ICAgIHZhciBob29rcyA9IHRyYW5zICYmIHRyYW5zLmhvb2tzO1xuXHQgICAgdmFyIGhvb2sgPSBob29rcyAmJiAoaG9va3NbdHlwZV0gfHwgaG9va3Muc3RhZ2dlcik7XG5cdCAgICByZXR1cm4gaG9vayA/IGhvb2suY2FsbChmcmFnLCBpbmRleCwgdG90YWwpIDogaW5kZXggKiBwYXJzZUludCh0aGlzLnBhcmFtc1t0eXBlXSB8fCB0aGlzLnBhcmFtcy5zdGFnZ2VyLCAxMCk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUHJlLXByb2Nlc3MgdGhlIHZhbHVlIGJlZm9yZSBwaXBpbmcgaXQgdGhyb3VnaCB0aGVcblx0ICAgKiBmaWx0ZXJzLiBUaGlzIGlzIHBhc3NlZCB0byBhbmQgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyLlxuXHQgICAqL1xuXHRcblx0ICBfcHJlUHJvY2VzczogZnVuY3Rpb24gX3ByZVByb2Nlc3ModmFsdWUpIHtcblx0ICAgIC8vIHJlZ2FyZGxlc3Mgb2YgdHlwZSwgc3RvcmUgdGhlIHVuLWZpbHRlcmVkIHJhdyB2YWx1ZS5cblx0ICAgIHRoaXMucmF3VmFsdWUgPSB2YWx1ZTtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBQb3N0LXByb2Nlc3MgdGhlIHZhbHVlIGFmdGVyIGl0IGhhcyBiZWVuIHBpcGVkIHRocm91Z2hcblx0ICAgKiB0aGUgZmlsdGVycy4gVGhpcyBpcyBwYXNzZWQgdG8gYW5kIGNhbGxlZCBieSB0aGUgd2F0Y2hlci5cblx0ICAgKlxuXHQgICAqIEl0IGlzIG5lY2Vzc2FyeSBmb3IgdGhpcyB0byBiZSBjYWxsZWQgZHVyaW5nIHRoZVxuXHQgICAqIHdhdGNoZXIncyBkZXBlbmRlbmN5IGNvbGxlY3Rpb24gcGhhc2UgYmVjYXVzZSB3ZSB3YW50XG5cdCAgICogdGhlIHYtZm9yIHRvIHVwZGF0ZSB3aGVuIHRoZSBzb3VyY2UgT2JqZWN0IGlzIG11dGF0ZWQuXG5cdCAgICovXG5cdFxuXHQgIF9wb3N0UHJvY2VzczogZnVuY3Rpb24gX3Bvc3RQcm9jZXNzKHZhbHVlKSB7XG5cdCAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgcmV0dXJuIHZhbHVlO1xuXHQgICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuXHQgICAgICAvLyBjb252ZXJ0IHBsYWluIG9iamVjdCB0byBhcnJheS5cblx0ICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7XG5cdCAgICAgIHZhciBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICAgIHZhciByZXMgPSBuZXcgQXJyYXkoaSk7XG5cdCAgICAgIHZhciBrZXk7XG5cdCAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICAgIHJlc1tpXSA9IHtcblx0ICAgICAgICAgICRrZXk6IGtleSxcblx0ICAgICAgICAgICR2YWx1ZTogdmFsdWVba2V5XVxuXHQgICAgICAgIH07XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHJlcztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmICFpc05hTih2YWx1ZSkpIHtcblx0ICAgICAgICB2YWx1ZSA9IHJhbmdlKHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdmFsdWUgfHwgW107XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICBpZiAodGhpcy5kZXNjcmlwdG9yLnJlZikge1xuXHQgICAgICAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHJlZnNbdGhpcy5kZXNjcmlwdG9yLnJlZl0gPSBudWxsO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuZnJhZ3MpIHtcblx0ICAgICAgdmFyIGkgPSB0aGlzLmZyYWdzLmxlbmd0aDtcblx0ICAgICAgdmFyIGZyYWc7XG5cdCAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICBmcmFnID0gdGhpcy5mcmFnc1tpXTtcblx0ICAgICAgICB0aGlzLmRlbGV0ZUNhY2hlZEZyYWcoZnJhZyk7XG5cdCAgICAgICAgZnJhZy5kZXN0cm95KCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogSGVscGVyIHRvIGZpbmQgdGhlIHByZXZpb3VzIGVsZW1lbnQgdGhhdCBpcyBhIGZyYWdtZW50XG5cdCAqIGFuY2hvci4gVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBhIGRlc3Ryb3llZCBmcmFnJ3Ncblx0ICogZWxlbWVudCBjb3VsZCBzdGlsbCBiZSBsaW5nZXJpbmcgaW4gdGhlIERPTSBiZWZvcmUgaXRzXG5cdCAqIGxlYXZpbmcgdHJhbnNpdGlvbiBmaW5pc2hlcywgYnV0IGl0cyBpbnNlcnRlZCBmbGFnXG5cdCAqIHNob3VsZCBoYXZlIGJlZW4gc2V0IHRvIGZhbHNlIHNvIHdlIGNhbiBza2lwIHRoZW0uXG5cdCAqXG5cdCAqIElmIHRoaXMgaXMgYSBibG9jayByZXBlYXQsIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHdlIG9ubHlcblx0ICogcmV0dXJuIGZyYWcgdGhhdCBpcyBib3VuZCB0byB0aGlzIHYtZm9yLiAoc2VlICM5MjkpXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICogQHBhcmFtIHtDb21tZW50fFRleHR9IGFuY2hvclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaWRcblx0ICogQHJldHVybiB7RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZmluZFByZXZGcmFnKGZyYWcsIGFuY2hvciwgaWQpIHtcblx0ICB2YXIgZWwgPSBmcmFnLm5vZGUucHJldmlvdXNTaWJsaW5nO1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICghZWwpIHJldHVybjtcblx0ICBmcmFnID0gZWwuX192X2ZyYWc7XG5cdCAgd2hpbGUgKCghZnJhZyB8fCBmcmFnLmZvcklkICE9PSBpZCB8fCAhZnJhZy5pbnNlcnRlZCkgJiYgZWwgIT09IGFuY2hvcikge1xuXHQgICAgZWwgPSBlbC5wcmV2aW91c1NpYmxpbmc7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghZWwpIHJldHVybjtcblx0ICAgIGZyYWcgPSBlbC5fX3ZfZnJhZztcblx0ICB9XG5cdCAgcmV0dXJuIGZyYWc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGaW5kIGEgdm0gZnJvbSBhIGZyYWdtZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAqIEByZXR1cm4ge1Z1ZXx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZmluZFZtRnJvbUZyYWcoZnJhZykge1xuXHQgIHZhciBub2RlID0gZnJhZy5ub2RlO1xuXHQgIC8vIGhhbmRsZSBtdWx0aS1ub2RlIGZyYWdcblx0ICBpZiAoZnJhZy5lbmQpIHtcblx0ICAgIHdoaWxlICghbm9kZS5fX3Z1ZV9fICYmIG5vZGUgIT09IGZyYWcuZW5kICYmIG5vZGUubmV4dFNpYmxpbmcpIHtcblx0ICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBub2RlLl9fdnVlX187XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGUgYSByYW5nZSBhcnJheSBmcm9tIGdpdmVuIG51bWJlci5cblx0ICpcblx0ICogQHBhcmFtIHtOdW1iZXJ9IG5cblx0ICogQHJldHVybiB7QXJyYXl9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmFuZ2Uobikge1xuXHQgIHZhciBpID0gLTE7XG5cdCAgdmFyIHJldCA9IG5ldyBBcnJheShNYXRoLmZsb29yKG4pKTtcblx0ICB3aGlsZSAoKytpIDwgbikge1xuXHQgICAgcmV0W2ldID0gaTtcblx0ICB9XG5cdCAgcmV0dXJuIHJldDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCB0aGUgdHJhY2sgYnkga2V5IGZvciBhbiBpdGVtLlxuXHQgKlxuXHQgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbdHJhY2tCeUtleV1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KSB7XG5cdCAgcmV0dXJuIHRyYWNrQnlLZXkgPyB0cmFja0J5S2V5ID09PSAnJGluZGV4JyA/IGluZGV4IDogdHJhY2tCeUtleS5jaGFyQXQoMCkubWF0Y2goL1xcdy8pID8gZ2V0UGF0aCh2YWx1ZSwgdHJhY2tCeUtleSkgOiB2YWx1ZVt0cmFja0J5S2V5XSA6IGtleSB8fCB2YWx1ZTtcblx0fVxuXHRcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICB2Rm9yLndhcm5EdXBsaWNhdGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgIHdhcm4oJ0R1cGxpY2F0ZSB2YWx1ZSBmb3VuZCBpbiB2LWZvcj1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpICsgJy4gVXNlIHRyYWNrLWJ5PVwiJGluZGV4XCIgaWYgJyArICd5b3UgYXJlIGV4cGVjdGluZyBkdXBsaWNhdGUgdmFsdWVzLicsIHRoaXMudm0pO1xuXHQgIH07XG5cdH1cblx0XG5cdHZhciB2SWYgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBJRixcblx0ICB0ZXJtaW5hbDogdHJ1ZSxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICBpZiAoIWVsLl9fdnVlX18pIHtcblx0ICAgICAgLy8gY2hlY2sgZWxzZSBibG9ja1xuXHQgICAgICB2YXIgbmV4dCA9IGVsLm5leHRFbGVtZW50U2libGluZztcblx0ICAgICAgaWYgKG5leHQgJiYgZ2V0QXR0cihuZXh0LCAndi1lbHNlJykgIT09IG51bGwpIHtcblx0ICAgICAgICByZW1vdmUobmV4dCk7XG5cdCAgICAgICAgdGhpcy5lbHNlRWwgPSBuZXh0O1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGNoZWNrIG1haW4gYmxvY2tcblx0ICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtaWYnKTtcblx0ICAgICAgcmVwbGFjZShlbCwgdGhpcy5hbmNob3IpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LWlmPVwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiBjYW5ub3QgYmUgJyArICd1c2VkIG9uIGFuIGluc3RhbmNlIHJvb3QgZWxlbWVudC4nLCB0aGlzLnZtKTtcblx0ICAgICAgdGhpcy5pbnZhbGlkID0gdHJ1ZTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgaWYgKHRoaXMuaW52YWxpZCkgcmV0dXJuO1xuXHQgICAgaWYgKHZhbHVlKSB7XG5cdCAgICAgIGlmICghdGhpcy5mcmFnKSB7XG5cdCAgICAgICAgdGhpcy5pbnNlcnQoKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5yZW1vdmUoKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydCgpIHtcblx0ICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcucmVtb3ZlKCk7XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgLy8gbGF6eSBpbml0IGZhY3Rvcnlcblx0ICAgIGlmICghdGhpcy5mYWN0b3J5KSB7XG5cdCAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgdGhpcy5lbCk7XG5cdCAgICB9XG5cdCAgICB0aGlzLmZyYWcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKHRoaXMuX2hvc3QsIHRoaXMuX3Njb3BlLCB0aGlzLl9mcmFnKTtcblx0ICAgIHRoaXMuZnJhZy5iZWZvcmUodGhpcy5hbmNob3IpO1xuXHQgIH0sXG5cdFxuXHQgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuXHQgICAgaWYgKHRoaXMuZnJhZykge1xuXHQgICAgICB0aGlzLmZyYWcucmVtb3ZlKCk7XG5cdCAgICAgIHRoaXMuZnJhZyA9IG51bGw7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5lbHNlRWwgJiYgIXRoaXMuZWxzZUZyYWcpIHtcblx0ICAgICAgaWYgKCF0aGlzLmVsc2VGYWN0b3J5KSB7XG5cdCAgICAgICAgdGhpcy5lbHNlRmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy5lbHNlRWwuX2NvbnRleHQgfHwgdGhpcy52bSwgdGhpcy5lbHNlRWwpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcgPSB0aGlzLmVsc2VGYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZyk7XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcuYmVmb3JlKHRoaXMuYW5jaG9yKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIGlmICh0aGlzLmZyYWcpIHtcblx0ICAgICAgdGhpcy5mcmFnLmRlc3Ryb3koKTtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcuZGVzdHJveSgpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBzaG93ID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gY2hlY2sgZWxzZSBibG9ja1xuXHQgICAgdmFyIG5leHQgPSB0aGlzLmVsLm5leHRFbGVtZW50U2libGluZztcblx0ICAgIGlmIChuZXh0ICYmIGdldEF0dHIobmV4dCwgJ3YtZWxzZScpICE9PSBudWxsKSB7XG5cdCAgICAgIHRoaXMuZWxzZUVsID0gbmV4dDtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdGhpcy5hcHBseSh0aGlzLmVsLCB2YWx1ZSk7XG5cdCAgICBpZiAodGhpcy5lbHNlRWwpIHtcblx0ICAgICAgdGhpcy5hcHBseSh0aGlzLmVsc2VFbCwgIXZhbHVlKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBhcHBseTogZnVuY3Rpb24gYXBwbHkoZWwsIHZhbHVlKSB7XG5cdCAgICBpZiAoaW5Eb2MoZWwpKSB7XG5cdCAgICAgIGFwcGx5VHJhbnNpdGlvbihlbCwgdmFsdWUgPyAxIDogLTEsIHRvZ2dsZSwgdGhpcy52bSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0b2dnbGUoKTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIHRvZ2dsZSgpIHtcblx0ICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gJycgOiAnbm9uZSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHRleHQkMiA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICB2YXIgaXNSYW5nZSA9IGVsLnR5cGUgPT09ICdyYW5nZSc7XG5cdCAgICB2YXIgbGF6eSA9IHRoaXMucGFyYW1zLmxhenk7XG5cdCAgICB2YXIgbnVtYmVyID0gdGhpcy5wYXJhbXMubnVtYmVyO1xuXHQgICAgdmFyIGRlYm91bmNlID0gdGhpcy5wYXJhbXMuZGVib3VuY2U7XG5cdFxuXHQgICAgLy8gaGFuZGxlIGNvbXBvc2l0aW9uIGV2ZW50cy5cblx0ICAgIC8vICAgaHR0cDovL2Jsb2cuZXZhbnlvdS5tZS8yMDE0LzAxLzAzL2NvbXBvc2l0aW9uLWV2ZW50L1xuXHQgICAgLy8gc2tpcCB0aGlzIGZvciBBbmRyb2lkIGJlY2F1c2UgaXQgaGFuZGxlcyBjb21wb3NpdGlvblxuXHQgICAgLy8gZXZlbnRzIHF1aXRlIGRpZmZlcmVudGx5LiBBbmRyb2lkIGRvZXNuJ3QgdHJpZ2dlclxuXHQgICAgLy8gY29tcG9zaXRpb24gZXZlbnRzIGZvciBsYW5ndWFnZSBpbnB1dCBtZXRob2RzIGUuZy5cblx0ICAgIC8vIENoaW5lc2UsIGJ1dCBpbnN0ZWFkIHRyaWdnZXJzIHRoZW0gZm9yIHNwZWxsaW5nXG5cdCAgICAvLyBzdWdnZXN0aW9ucy4uLiAoc2VlIERpc2N1c3Npb24vIzE2Milcblx0ICAgIHZhciBjb21wb3NpbmcgPSBmYWxzZTtcblx0ICAgIGlmICghaXNBbmRyb2lkICYmICFpc1JhbmdlKSB7XG5cdCAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgY29tcG9zaW5nID0gdHJ1ZTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGNvbXBvc2luZyA9IGZhbHNlO1xuXHQgICAgICAgIC8vIGluIElFMTEgdGhlIFwiY29tcG9zaXRpb25lbmRcIiBldmVudCBmaXJlcyBBRlRFUlxuXHQgICAgICAgIC8vIHRoZSBcImlucHV0XCIgZXZlbnQsIHNvIHRoZSBpbnB1dCBoYW5kbGVyIGlzIGJsb2NrZWRcblx0ICAgICAgICAvLyBhdCB0aGUgZW5kLi4uIGhhdmUgdG8gY2FsbCBpdCBoZXJlLlxuXHQgICAgICAgIC8vXG5cdCAgICAgICAgLy8gIzEzMjc6IGluIGxhenkgbW9kZSB0aGlzIGlzIHVuZWNlc3NhcnkuXG5cdCAgICAgICAgaWYgKCFsYXp5KSB7XG5cdCAgICAgICAgICBzZWxmLmxpc3RlbmVyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBwcmV2ZW50IG1lc3Npbmcgd2l0aCB0aGUgaW5wdXQgd2hlbiB1c2VyIGlzIHR5cGluZyxcblx0ICAgIC8vIGFuZCBmb3JjZSB1cGRhdGUgb24gYmx1ci5cblx0ICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlO1xuXHQgICAgaWYgKCFpc1JhbmdlICYmICFsYXp5KSB7XG5cdCAgICAgIHRoaXMub24oJ2ZvY3VzJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHNlbGYuZm9jdXNlZCA9IHRydWU7XG5cdCAgICAgIH0pO1xuXHQgICAgICB0aGlzLm9uKCdibHVyJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHNlbGYuZm9jdXNlZCA9IGZhbHNlO1xuXHQgICAgICAgIC8vIGRvIG5vdCBzeW5jIHZhbHVlIGFmdGVyIGZyYWdtZW50IHJlbW92YWwgKCMyMDE3KVxuXHQgICAgICAgIGlmICghc2VsZi5fZnJhZyB8fCBzZWxmLl9mcmFnLmluc2VydGVkKSB7XG5cdCAgICAgICAgICBzZWxmLnJhd0xpc3RlbmVyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBOb3cgYXR0YWNoIHRoZSBtYWluIGxpc3RlbmVyXG5cdCAgICB0aGlzLmxpc3RlbmVyID0gdGhpcy5yYXdMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKGNvbXBvc2luZyB8fCAhc2VsZi5fYm91bmQpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHZhbCA9IG51bWJlciB8fCBpc1JhbmdlID8gdG9OdW1iZXIoZWwudmFsdWUpIDogZWwudmFsdWU7XG5cdCAgICAgIHNlbGYuc2V0KHZhbCk7XG5cdCAgICAgIC8vIGZvcmNlIHVwZGF0ZSBvbiBuZXh0IHRpY2sgdG8gYXZvaWQgbG9jayAmIHNhbWUgdmFsdWVcblx0ICAgICAgLy8gYWxzbyBvbmx5IHVwZGF0ZSB3aGVuIHVzZXIgaXMgbm90IHR5cGluZ1xuXHQgICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHNlbGYuX2JvdW5kICYmICFzZWxmLmZvY3VzZWQpIHtcblx0ICAgICAgICAgIHNlbGYudXBkYXRlKHNlbGYuX3dhdGNoZXIudmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGFwcGx5IGRlYm91bmNlXG5cdCAgICBpZiAoZGVib3VuY2UpIHtcblx0ICAgICAgdGhpcy5saXN0ZW5lciA9IF9kZWJvdW5jZSh0aGlzLmxpc3RlbmVyLCBkZWJvdW5jZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gU3VwcG9ydCBqUXVlcnkgZXZlbnRzLCBzaW5jZSBqUXVlcnkudHJpZ2dlcigpIGRvZXNuJ3Rcblx0ICAgIC8vIHRyaWdnZXIgbmF0aXZlIGV2ZW50cyBpbiBzb21lIGNhc2VzIGFuZCBzb21lIHBsdWdpbnNcblx0ICAgIC8vIHJlbHkgb24gJC50cmlnZ2VyKClcblx0ICAgIC8vXG5cdCAgICAvLyBXZSB3YW50IHRvIG1ha2Ugc3VyZSBpZiBhIGxpc3RlbmVyIGlzIGF0dGFjaGVkIHVzaW5nXG5cdCAgICAvLyBqUXVlcnksIGl0IGlzIGFsc28gcmVtb3ZlZCB3aXRoIGpRdWVyeSwgdGhhdCdzIHdoeVxuXHQgICAgLy8gd2UgZG8gdGhlIGNoZWNrIGZvciBlYWNoIGRpcmVjdGl2ZSBpbnN0YW5jZSBhbmRcblx0ICAgIC8vIHN0b3JlIHRoYXQgY2hlY2sgcmVzdWx0IG9uIGl0c2VsZi4gVGhpcyBhbHNvIGFsbG93c1xuXHQgICAgLy8gZWFzaWVyIHRlc3QgY292ZXJhZ2UgY29udHJvbCBieSB1bnNldHRpbmcgdGhlIGdsb2JhbFxuXHQgICAgLy8galF1ZXJ5IHZhcmlhYmxlIGluIHRlc3RzLlxuXHQgICAgdGhpcy5oYXNqUXVlcnkgPSB0eXBlb2YgalF1ZXJ5ID09PSAnZnVuY3Rpb24nO1xuXHQgICAgaWYgKHRoaXMuaGFzalF1ZXJ5KSB7XG5cdCAgICAgIHZhciBtZXRob2QgPSBqUXVlcnkuZm4ub24gPyAnb24nIDogJ2JpbmQnO1xuXHQgICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2NoYW5nZScsIHRoaXMucmF3TGlzdGVuZXIpO1xuXHQgICAgICBpZiAoIWxhenkpIHtcblx0ICAgICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2lucHV0JywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMucmF3TGlzdGVuZXIpO1xuXHQgICAgICBpZiAoIWxhenkpIHtcblx0ICAgICAgICB0aGlzLm9uKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gSUU5IGRvZXNuJ3QgZmlyZSBpbnB1dCBldmVudCBvbiBiYWNrc3BhY2UvZGVsL2N1dFxuXHQgICAgaWYgKCFsYXp5ICYmIGlzSUU5KSB7XG5cdCAgICAgIHRoaXMub24oJ2N1dCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBuZXh0VGljayhzZWxmLmxpc3RlbmVyKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHRoaXMub24oJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICBpZiAoZS5rZXlDb2RlID09PSA0NiB8fCBlLmtleUNvZGUgPT09IDgpIHtcblx0ICAgICAgICAgIHNlbGYubGlzdGVuZXIoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHNldCBpbml0aWFsIHZhbHVlIGlmIHByZXNlbnRcblx0ICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykgfHwgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyAmJiBlbC52YWx1ZS50cmltKCkpIHtcblx0ICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICAvLyAjMzAyOSBvbmx5IHVwZGF0ZSB3aGVuIHRoZSB2YWx1ZSBjaGFuZ2VzLiBUaGlzIHByZXZlbnRcblx0ICAgIC8vIGJyb3dzZXJzIGZyb20gb3ZlcndyaXRpbmcgdmFsdWVzIGxpa2Ugc2VsZWN0aW9uU3RhcnRcblx0ICAgIHZhbHVlID0gX3RvU3RyaW5nKHZhbHVlKTtcblx0ICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5lbC52YWx1ZSkgdGhpcy5lbC52YWx1ZSA9IHZhbHVlO1xuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIGlmICh0aGlzLmhhc2pRdWVyeSkge1xuXHQgICAgICB2YXIgbWV0aG9kID0galF1ZXJ5LmZuLm9mZiA/ICdvZmYnIDogJ3VuYmluZCc7XG5cdCAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcmFkaW8gPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHRcblx0ICAgIHRoaXMuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIC8vIHZhbHVlIG92ZXJ3cml0ZSB2aWEgdi1iaW5kOnZhbHVlXG5cdCAgICAgIGlmIChlbC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykpIHtcblx0ICAgICAgICByZXR1cm4gZWwuX3ZhbHVlO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciB2YWwgPSBlbC52YWx1ZTtcblx0ICAgICAgaWYgKHNlbGYucGFyYW1zLm51bWJlcikge1xuXHQgICAgICAgIHZhbCA9IHRvTnVtYmVyKHZhbCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHZhbDtcblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgc2VsZi5zZXQoc2VsZi5nZXRWYWx1ZSgpKTtcblx0ICAgIH07XG5cdCAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblx0XG5cdCAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdjaGVja2VkJykpIHtcblx0ICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB0aGlzLmVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCB0aGlzLmdldFZhbHVlKCkpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBzZWxlY3QgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdFxuXHQgICAgLy8gbWV0aG9kIHRvIGZvcmNlIHVwZGF0ZSBET00gdXNpbmcgbGF0ZXN0IHZhbHVlLlxuXHQgICAgdGhpcy5mb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKHNlbGYuX3dhdGNoZXIpIHtcblx0ICAgICAgICBzZWxmLnVwZGF0ZShzZWxmLl93YXRjaGVyLmdldCgpKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGEgbXVsdGlwbGUgc2VsZWN0XG5cdCAgICB2YXIgbXVsdGlwbGUgPSB0aGlzLm11bHRpcGxlID0gZWwuaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpO1xuXHRcblx0ICAgIC8vIGF0dGFjaCBsaXN0ZW5lclxuXHQgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIHZhbHVlID0gZ2V0VmFsdWUoZWwsIG11bHRpcGxlKTtcblx0ICAgICAgdmFsdWUgPSBzZWxmLnBhcmFtcy5udW1iZXIgPyBpc0FycmF5KHZhbHVlKSA/IHZhbHVlLm1hcCh0b051bWJlcikgOiB0b051bWJlcih2YWx1ZSkgOiB2YWx1ZTtcblx0ICAgICAgc2VsZi5zZXQodmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXHRcblx0ICAgIC8vIGlmIGhhcyBpbml0aWFsIHZhbHVlLCBzZXQgYWZ0ZXJCaW5kXG5cdCAgICB2YXIgaW5pdFZhbHVlID0gZ2V0VmFsdWUoZWwsIG11bHRpcGxlLCB0cnVlKTtcblx0ICAgIGlmIChtdWx0aXBsZSAmJiBpbml0VmFsdWUubGVuZ3RoIHx8ICFtdWx0aXBsZSAmJiBpbml0VmFsdWUgIT09IG51bGwpIHtcblx0ICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEFsbCBtYWpvciBicm93c2VycyBleGNlcHQgRmlyZWZveCByZXNldHNcblx0ICAgIC8vIHNlbGVjdGVkSW5kZXggd2l0aCB2YWx1ZSAtMSB0byAwIHdoZW4gdGhlIGVsZW1lbnRcblx0ICAgIC8vIGlzIGFwcGVuZGVkIHRvIGEgbmV3IHBhcmVudCwgdGhlcmVmb3JlIHdlIGhhdmUgdG9cblx0ICAgIC8vIGZvcmNlIGEgRE9NIHVwZGF0ZSB3aGVuZXZlciB0aGF0IGhhcHBlbnMuLi5cblx0ICAgIHRoaXMudm0uJG9uKCdob29rOmF0dGFjaGVkJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICBuZXh0VGljayhfdGhpcy5mb3JjZVVwZGF0ZSk7XG5cdCAgICB9KTtcblx0ICAgIGlmICghaW5Eb2MoZWwpKSB7XG5cdCAgICAgIG5leHRUaWNrKHRoaXMuZm9yY2VVcGRhdGUpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgZWwuc2VsZWN0ZWRJbmRleCA9IC0xO1xuXHQgICAgdmFyIG11bHRpID0gdGhpcy5tdWx0aXBsZSAmJiBpc0FycmF5KHZhbHVlKTtcblx0ICAgIHZhciBvcHRpb25zID0gZWwub3B0aW9ucztcblx0ICAgIHZhciBpID0gb3B0aW9ucy5sZW5ndGg7XG5cdCAgICB2YXIgb3AsIHZhbDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgb3AgPSBvcHRpb25zW2ldO1xuXHQgICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBvcC5fdmFsdWUgOiBvcC52YWx1ZTtcblx0ICAgICAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG5cdCAgICAgIG9wLnNlbGVjdGVkID0gbXVsdGkgPyBpbmRleE9mJDEodmFsdWUsIHZhbCkgPiAtMSA6IGxvb3NlRXF1YWwodmFsdWUsIHZhbCk7XG5cdCAgICAgIC8qIGVzbGludC1lbmFibGUgZXFlcWVxICovXG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHQgICAgdGhpcy52bS4kb2ZmKCdob29rOmF0dGFjaGVkJywgdGhpcy5mb3JjZVVwZGF0ZSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEdldCBzZWxlY3QgdmFsdWVcblx0ICpcblx0ICogQHBhcmFtIHtTZWxlY3RFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IG11bHRpXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5pdFxuXHQgKiBAcmV0dXJuIHtBcnJheXwqfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldFZhbHVlKGVsLCBtdWx0aSwgaW5pdCkge1xuXHQgIHZhciByZXMgPSBtdWx0aSA/IFtdIDogbnVsbDtcblx0ICB2YXIgb3AsIHZhbCwgc2VsZWN0ZWQ7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBlbC5vcHRpb25zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgb3AgPSBlbC5vcHRpb25zW2ldO1xuXHQgICAgc2VsZWN0ZWQgPSBpbml0ID8gb3AuaGFzQXR0cmlidXRlKCdzZWxlY3RlZCcpIDogb3Auc2VsZWN0ZWQ7XG5cdCAgICBpZiAoc2VsZWN0ZWQpIHtcblx0ICAgICAgdmFsID0gb3AuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpID8gb3AuX3ZhbHVlIDogb3AudmFsdWU7XG5cdCAgICAgIGlmIChtdWx0aSkge1xuXHQgICAgICAgIHJlcy5wdXNoKHZhbCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIHZhbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTmF0aXZlIEFycmF5LmluZGV4T2YgdXNlcyBzdHJpY3QgZXF1YWwsIGJ1dCBpbiB0aGlzXG5cdCAqIGNhc2Ugd2UgbmVlZCB0byBtYXRjaCBzdHJpbmcvbnVtYmVycyB3aXRoIGN1c3RvbSBlcXVhbC5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyXG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaW5kZXhPZiQxKGFyciwgdmFsKSB7XG5cdCAgdmFyIGkgPSBhcnIubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGlmIChsb29zZUVxdWFsKGFycltpXSwgdmFsKSkge1xuXHQgICAgICByZXR1cm4gaTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIC0xO1xuXHR9XG5cdFxuXHR2YXIgY2hlY2tib3ggPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHRcblx0ICAgIHRoaXMuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBlbC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBlbC5fdmFsdWUgOiBzZWxmLnBhcmFtcy5udW1iZXIgPyB0b051bWJlcihlbC52YWx1ZSkgOiBlbC52YWx1ZTtcblx0ICAgIH07XG5cdFxuXHQgICAgZnVuY3Rpb24gZ2V0Qm9vbGVhblZhbHVlKCkge1xuXHQgICAgICB2YXIgdmFsID0gZWwuY2hlY2tlZDtcblx0ICAgICAgaWYgKHZhbCAmJiBlbC5oYXNPd25Qcm9wZXJ0eSgnX3RydWVWYWx1ZScpKSB7XG5cdCAgICAgICAgcmV0dXJuIGVsLl90cnVlVmFsdWU7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKCF2YWwgJiYgZWwuaGFzT3duUHJvcGVydHkoJ19mYWxzZVZhbHVlJykpIHtcblx0ICAgICAgICByZXR1cm4gZWwuX2ZhbHNlVmFsdWU7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHZhbDtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgbW9kZWwgPSBzZWxmLl93YXRjaGVyLnZhbHVlO1xuXHQgICAgICBpZiAoaXNBcnJheShtb2RlbCkpIHtcblx0ICAgICAgICB2YXIgdmFsID0gc2VsZi5nZXRWYWx1ZSgpO1xuXHQgICAgICAgIGlmIChlbC5jaGVja2VkKSB7XG5cdCAgICAgICAgICBpZiAoaW5kZXhPZihtb2RlbCwgdmFsKSA8IDApIHtcblx0ICAgICAgICAgICAgbW9kZWwucHVzaCh2YWwpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBtb2RlbC4kcmVtb3ZlKHZhbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHNlbGYuc2V0KGdldEJvb2xlYW5WYWx1ZSgpKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkge1xuXHQgICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgZWwuY2hlY2tlZCA9IGluZGV4T2YodmFsdWUsIHRoaXMuZ2V0VmFsdWUoKSkgPiAtMTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmIChlbC5oYXNPd25Qcm9wZXJ0eSgnX3RydWVWYWx1ZScpKSB7XG5cdCAgICAgICAgZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIGVsLl90cnVlVmFsdWUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGVsLmNoZWNrZWQgPSAhIXZhbHVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGhhbmRsZXJzID0ge1xuXHQgIHRleHQ6IHRleHQkMixcblx0ICByYWRpbzogcmFkaW8sXG5cdCAgc2VsZWN0OiBzZWxlY3QsXG5cdCAgY2hlY2tib3g6IGNoZWNrYm94XG5cdH07XG5cdFxuXHR2YXIgbW9kZWwgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBNT0RFTCxcblx0ICB0d29XYXk6IHRydWUsXG5cdCAgaGFuZGxlcnM6IGhhbmRsZXJzLFxuXHQgIHBhcmFtczogWydsYXp5JywgJ251bWJlcicsICdkZWJvdW5jZSddLFxuXHRcblx0ICAvKipcblx0ICAgKiBQb3NzaWJsZSBlbGVtZW50czpcblx0ICAgKiAgIDxzZWxlY3Q+XG5cdCAgICogICA8dGV4dGFyZWE+XG5cdCAgICogICA8aW5wdXQgdHlwZT1cIipcIj5cblx0ICAgKiAgICAgLSB0ZXh0XG5cdCAgICogICAgIC0gY2hlY2tib3hcblx0ICAgKiAgICAgLSByYWRpb1xuXHQgICAqICAgICAtIG51bWJlclxuXHQgICAqL1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gZnJpZW5kbHkgd2FybmluZy4uLlxuXHQgICAgdGhpcy5jaGVja0ZpbHRlcnMoKTtcblx0ICAgIGlmICh0aGlzLmhhc1JlYWQgJiYgIXRoaXMuaGFzV3JpdGUpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIGEgcmVhZC1vbmx5IGZpbHRlciB3aXRoICcgKyAndi1tb2RlbD1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiLiAnICsgJ1lvdSBtaWdodCB3YW50IHRvIHVzZSBhIHR3by13YXkgZmlsdGVyIHRvIGVuc3VyZSBjb3JyZWN0IGJlaGF2aW9yLicsIHRoaXMudm0pO1xuXHQgICAgfVxuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIHZhciB0YWcgPSBlbC50YWdOYW1lO1xuXHQgICAgdmFyIGhhbmRsZXI7XG5cdCAgICBpZiAodGFnID09PSAnSU5QVVQnKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBoYW5kbGVyc1tlbC50eXBlXSB8fCBoYW5kbGVycy50ZXh0O1xuXHQgICAgfSBlbHNlIGlmICh0YWcgPT09ICdTRUxFQ1QnKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBoYW5kbGVycy5zZWxlY3Q7XG5cdCAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1RFWFRBUkVBJykge1xuXHQgICAgICBoYW5kbGVyID0gaGFuZGxlcnMudGV4dDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1tb2RlbCBkb2VzIG5vdCBzdXBwb3J0IGVsZW1lbnQgdHlwZTogJyArIHRhZywgdGhpcy52bSk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGVsLl9fdl9tb2RlbCA9IHRoaXM7XG5cdCAgICBoYW5kbGVyLmJpbmQuY2FsbCh0aGlzKTtcblx0ICAgIHRoaXMudXBkYXRlID0gaGFuZGxlci51cGRhdGU7XG5cdCAgICB0aGlzLl91bmJpbmQgPSBoYW5kbGVyLnVuYmluZDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBDaGVjayByZWFkL3dyaXRlIGZpbHRlciBzdGF0cy5cblx0ICAgKi9cblx0XG5cdCAgY2hlY2tGaWx0ZXJzOiBmdW5jdGlvbiBjaGVja0ZpbHRlcnMoKSB7XG5cdCAgICB2YXIgZmlsdGVycyA9IHRoaXMuZmlsdGVycztcblx0ICAgIGlmICghZmlsdGVycykgcmV0dXJuO1xuXHQgICAgdmFyIGkgPSBmaWx0ZXJzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdmFyIGZpbHRlciA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlcnNbaV0ubmFtZSk7XG5cdCAgICAgIGlmICh0eXBlb2YgZmlsdGVyID09PSAnZnVuY3Rpb24nIHx8IGZpbHRlci5yZWFkKSB7XG5cdCAgICAgICAgdGhpcy5oYXNSZWFkID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoZmlsdGVyLndyaXRlKSB7XG5cdCAgICAgICAgdGhpcy5oYXNXcml0ZSA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHRoaXMuZWwuX192X21vZGVsID0gbnVsbDtcblx0ICAgIHRoaXMuX3VuYmluZCAmJiB0aGlzLl91bmJpbmQoKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyBrZXlDb2RlIGFsaWFzZXNcblx0dmFyIGtleUNvZGVzID0ge1xuXHQgIGVzYzogMjcsXG5cdCAgdGFiOiA5LFxuXHQgIGVudGVyOiAxMyxcblx0ICBzcGFjZTogMzIsXG5cdCAgJ2RlbGV0ZSc6IFs4LCA0Nl0sXG5cdCAgdXA6IDM4LFxuXHQgIGxlZnQ6IDM3LFxuXHQgIHJpZ2h0OiAzOSxcblx0ICBkb3duOiA0MFxuXHR9O1xuXHRcblx0ZnVuY3Rpb24ga2V5RmlsdGVyKGhhbmRsZXIsIGtleXMpIHtcblx0ICB2YXIgY29kZXMgPSBrZXlzLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICB2YXIgY2hhckNvZGUgPSBrZXkuY2hhckNvZGVBdCgwKTtcblx0ICAgIGlmIChjaGFyQ29kZSA+IDQ3ICYmIGNoYXJDb2RlIDwgNTgpIHtcblx0ICAgICAgcmV0dXJuIHBhcnNlSW50KGtleSwgMTApO1xuXHQgICAgfVxuXHQgICAgaWYgKGtleS5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgY2hhckNvZGUgPSBrZXkudG9VcHBlckNhc2UoKS5jaGFyQ29kZUF0KDApO1xuXHQgICAgICBpZiAoY2hhckNvZGUgPiA2NCAmJiBjaGFyQ29kZSA8IDkxKSB7XG5cdCAgICAgICAgcmV0dXJuIGNoYXJDb2RlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4ga2V5Q29kZXNba2V5XTtcblx0ICB9KTtcblx0ICBjb2RlcyA9IFtdLmNvbmNhdC5hcHBseShbXSwgY29kZXMpO1xuXHQgIHJldHVybiBmdW5jdGlvbiBrZXlIYW5kbGVyKGUpIHtcblx0ICAgIGlmIChjb2Rlcy5pbmRleE9mKGUua2V5Q29kZSkgPiAtMSkge1xuXHQgICAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHN0b3BGaWx0ZXIoaGFuZGxlcikge1xuXHQgIHJldHVybiBmdW5jdGlvbiBzdG9wSGFuZGxlcihlKSB7XG5cdCAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHQgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gcHJldmVudEhhbmRsZXIoZSkge1xuXHQgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZWxmRmlsdGVyKGhhbmRsZXIpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gc2VsZkhhbmRsZXIoZSkge1xuXHQgICAgaWYgKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQpIHtcblx0ICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgb24kMSA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IE9OLFxuXHQgIGFjY2VwdFN0YXRlbWVudDogdHJ1ZSxcblx0ICBrZXlDb2Rlczoga2V5Q29kZXMsXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyBkZWFsIHdpdGggaWZyYW1lc1xuXHQgICAgaWYgKHRoaXMuZWwudGFnTmFtZSA9PT0gJ0lGUkFNRScgJiYgdGhpcy5hcmcgIT09ICdsb2FkJykge1xuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIHRoaXMuaWZyYW1lQmluZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBvbihzZWxmLmVsLmNvbnRlbnRXaW5kb3csIHNlbGYuYXJnLCBzZWxmLmhhbmRsZXIsIHNlbGYubW9kaWZpZXJzLmNhcHR1cmUpO1xuXHQgICAgICB9O1xuXHQgICAgICB0aGlzLm9uKCdsb2FkJywgdGhpcy5pZnJhbWVCaW5kKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShoYW5kbGVyKSB7XG5cdCAgICAvLyBzdHViIGEgbm9vcCBmb3Igdi1vbiB3aXRoIG5vIHZhbHVlLFxuXHQgICAgLy8gZS5nLiBAbW91c2Vkb3duLnByZXZlbnRcblx0ICAgIGlmICghdGhpcy5kZXNjcmlwdG9yLnJhdykge1xuXHQgICAgICBoYW5kbGVyID0gZnVuY3Rpb24gKCkge307XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1vbjonICsgdGhpcy5hcmcgKyAnPVwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiBleHBlY3RzIGEgZnVuY3Rpb24gdmFsdWUsICcgKyAnZ290ICcgKyBoYW5kbGVyLCB0aGlzLnZtKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGFwcGx5IG1vZGlmaWVyc1xuXHQgICAgaWYgKHRoaXMubW9kaWZpZXJzLnN0b3ApIHtcblx0ICAgICAgaGFuZGxlciA9IHN0b3BGaWx0ZXIoaGFuZGxlcik7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5tb2RpZmllcnMucHJldmVudCkge1xuXHQgICAgICBoYW5kbGVyID0gcHJldmVudEZpbHRlcihoYW5kbGVyKTtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLm1vZGlmaWVycy5zZWxmKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBzZWxmRmlsdGVyKGhhbmRsZXIpO1xuXHQgICAgfVxuXHQgICAgLy8ga2V5IGZpbHRlclxuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLm1vZGlmaWVycykuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgcmV0dXJuIGtleSAhPT0gJ3N0b3AnICYmIGtleSAhPT0gJ3ByZXZlbnQnICYmIGtleSAhPT0gJ3NlbGYnICYmIGtleSAhPT0gJ2NhcHR1cmUnO1xuXHQgICAgfSk7XG5cdCAgICBpZiAoa2V5cy5sZW5ndGgpIHtcblx0ICAgICAgaGFuZGxlciA9IGtleUZpbHRlcihoYW5kbGVyLCBrZXlzKTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLnJlc2V0KCk7XG5cdCAgICB0aGlzLmhhbmRsZXIgPSBoYW5kbGVyO1xuXHRcblx0ICAgIGlmICh0aGlzLmlmcmFtZUJpbmQpIHtcblx0ICAgICAgdGhpcy5pZnJhbWVCaW5kKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvbih0aGlzLmVsLCB0aGlzLmFyZywgdGhpcy5oYW5kbGVyLCB0aGlzLm1vZGlmaWVycy5jYXB0dXJlKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmlmcmFtZUJpbmQgPyB0aGlzLmVsLmNvbnRlbnRXaW5kb3cgOiB0aGlzLmVsO1xuXHQgICAgaWYgKHRoaXMuaGFuZGxlcikge1xuXHQgICAgICBvZmYoZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdGhpcy5yZXNldCgpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBwcmVmaXhlcyA9IFsnLXdlYmtpdC0nLCAnLW1vei0nLCAnLW1zLSddO1xuXHR2YXIgY2FtZWxQcmVmaXhlcyA9IFsnV2Via2l0JywgJ01veicsICdtcyddO1xuXHR2YXIgaW1wb3J0YW50UkUgPSAvIWltcG9ydGFudDs/JC87XG5cdHZhciBwcm9wQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRcblx0dmFyIHRlc3RFbCA9IG51bGw7XG5cdFxuXHR2YXIgc3R5bGUgPSB7XG5cdFxuXHQgIGRlZXA6IHRydWUsXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuXHQgICAgICB0aGlzLmVsLnN0eWxlLmNzc1RleHQgPSB2YWx1ZTtcblx0ICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUucmVkdWNlKGV4dGVuZCwge30pKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlIHx8IHt9KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBoYW5kbGVPYmplY3Q6IGZ1bmN0aW9uIGhhbmRsZU9iamVjdCh2YWx1ZSkge1xuXHQgICAgLy8gY2FjaGUgb2JqZWN0IHN0eWxlcyBzbyB0aGF0IG9ubHkgY2hhbmdlZCBwcm9wc1xuXHQgICAgLy8gYXJlIGFjdHVhbGx5IHVwZGF0ZWQuXG5cdCAgICB2YXIgY2FjaGUgPSB0aGlzLmNhY2hlIHx8ICh0aGlzLmNhY2hlID0ge30pO1xuXHQgICAgdmFyIG5hbWUsIHZhbDtcblx0ICAgIGZvciAobmFtZSBpbiBjYWNoZSkge1xuXHQgICAgICBpZiAoIShuYW1lIGluIHZhbHVlKSkge1xuXHQgICAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKG5hbWUsIG51bGwpO1xuXHQgICAgICAgIGRlbGV0ZSBjYWNoZVtuYW1lXTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgZm9yIChuYW1lIGluIHZhbHVlKSB7XG5cdCAgICAgIHZhbCA9IHZhbHVlW25hbWVdO1xuXHQgICAgICBpZiAodmFsICE9PSBjYWNoZVtuYW1lXSkge1xuXHQgICAgICAgIGNhY2hlW25hbWVdID0gdmFsO1xuXHQgICAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKG5hbWUsIHZhbCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBoYW5kbGVTaW5nbGU6IGZ1bmN0aW9uIGhhbmRsZVNpbmdsZShwcm9wLCB2YWx1ZSkge1xuXHQgICAgcHJvcCA9IG5vcm1hbGl6ZShwcm9wKTtcblx0ICAgIGlmICghcHJvcCkgcmV0dXJuOyAvLyB1bnN1cHBvcnRlZCBwcm9wXG5cdCAgICAvLyBjYXN0IHBvc3NpYmxlIG51bWJlcnMvYm9vbGVhbnMgaW50byBzdHJpbmdzXG5cdCAgICBpZiAodmFsdWUgIT0gbnVsbCkgdmFsdWUgKz0gJyc7XG5cdCAgICBpZiAodmFsdWUpIHtcblx0ICAgICAgdmFyIGlzSW1wb3J0YW50ID0gaW1wb3J0YW50UkUudGVzdCh2YWx1ZSkgPyAnaW1wb3J0YW50JyA6ICcnO1xuXHQgICAgICBpZiAoaXNJbXBvcnRhbnQpIHtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgICAgd2FybignSXRcXCdzIHByb2JhYmx5IGEgYmFkIGlkZWEgdG8gdXNlICFpbXBvcnRhbnQgd2l0aCBpbmxpbmUgcnVsZXMuICcgKyAnVGhpcyBmZWF0dXJlIHdpbGwgYmUgZGVwcmVjYXRlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uIG9mIFZ1ZS4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKGltcG9ydGFudFJFLCAnJykudHJpbSgpO1xuXHQgICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkocHJvcC5rZWJhYiwgdmFsdWUsIGlzSW1wb3J0YW50KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmVsLnN0eWxlW3Byb3AuY2FtZWxdID0gdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuZWwuc3R5bGVbcHJvcC5jYW1lbF0gPSAnJztcblx0ICAgIH1cblx0ICB9XG5cdFxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE5vcm1hbGl6ZSBhIENTUyBwcm9wZXJ0eSBuYW1lLlxuXHQgKiAtIGNhY2hlIHJlc3VsdFxuXHQgKiAtIGF1dG8gcHJlZml4XG5cdCAqIC0gY2FtZWxDYXNlIC0+IGRhc2gtY2FzZVxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbm9ybWFsaXplKHByb3ApIHtcblx0ICBpZiAocHJvcENhY2hlW3Byb3BdKSB7XG5cdCAgICByZXR1cm4gcHJvcENhY2hlW3Byb3BdO1xuXHQgIH1cblx0ICB2YXIgcmVzID0gcHJlZml4KHByb3ApO1xuXHQgIHByb3BDYWNoZVtwcm9wXSA9IHByb3BDYWNoZVtyZXNdID0gcmVzO1xuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBdXRvIGRldGVjdCB0aGUgYXBwcm9wcmlhdGUgcHJlZml4IGZvciBhIENTUyBwcm9wZXJ0eS5cblx0ICogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vcGF1bGlyaXNoLzUyMzY5MlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJlZml4KHByb3ApIHtcblx0ICBwcm9wID0gaHlwaGVuYXRlKHByb3ApO1xuXHQgIHZhciBjYW1lbCA9IGNhbWVsaXplKHByb3ApO1xuXHQgIHZhciB1cHBlciA9IGNhbWVsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWwuc2xpY2UoMSk7XG5cdCAgaWYgKCF0ZXN0RWwpIHtcblx0ICAgIHRlc3RFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgIH1cblx0ICB2YXIgaSA9IHByZWZpeGVzLmxlbmd0aDtcblx0ICB2YXIgcHJlZml4ZWQ7XG5cdCAgaWYgKGNhbWVsICE9PSAnZmlsdGVyJyAmJiBjYW1lbCBpbiB0ZXN0RWwuc3R5bGUpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGtlYmFiOiBwcm9wLFxuXHQgICAgICBjYW1lbDogY2FtZWxcblx0ICAgIH07XG5cdCAgfVxuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHByZWZpeGVkID0gY2FtZWxQcmVmaXhlc1tpXSArIHVwcGVyO1xuXHQgICAgaWYgKHByZWZpeGVkIGluIHRlc3RFbC5zdHlsZSkge1xuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIGtlYmFiOiBwcmVmaXhlc1tpXSArIHByb3AsXG5cdCAgICAgICAgY2FtZWw6IHByZWZpeGVkXG5cdCAgICAgIH07XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyB4bGlua1xuXHR2YXIgeGxpbmtOUyA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJztcblx0dmFyIHhsaW5rUkUgPSAvXnhsaW5rOi87XG5cdFxuXHQvLyBjaGVjayBmb3IgYXR0cmlidXRlcyB0aGF0IHByb2hpYml0IGludGVycG9sYXRpb25zXG5cdHZhciBkaXNhbGxvd2VkSW50ZXJwQXR0clJFID0gL152LXxeOnxeQHxeKD86aXN8dHJhbnNpdGlvbnx0cmFuc2l0aW9uLW1vZGV8ZGVib3VuY2V8dHJhY2stYnl8c3RhZ2dlcnxlbnRlci1zdGFnZ2VyfGxlYXZlLXN0YWdnZXIpJC87XG5cdC8vIHRoZXNlIGF0dHJpYnV0ZXMgc2hvdWxkIGFsc28gc2V0IHRoZWlyIGNvcnJlc3BvbmRpbmcgcHJvcGVydGllc1xuXHQvLyBiZWNhdXNlIHRoZXkgb25seSBhZmZlY3QgdGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIGVsZW1lbnRcblx0dmFyIGF0dHJXaXRoUHJvcHNSRSA9IC9eKD86dmFsdWV8Y2hlY2tlZHxzZWxlY3RlZHxtdXRlZCkkLztcblx0Ly8gdGhlc2UgYXR0cmlidXRlcyBleHBlY3QgZW51bXJhdGVkIHZhbHVlcyBvZiBcInRydWVcIiBvciBcImZhbHNlXCJcblx0Ly8gYnV0IGFyZSBub3QgYm9vbGVhbiBhdHRyaWJ1dGVzXG5cdHZhciBlbnVtZXJhdGVkQXR0clJFID0gL14oPzpkcmFnZ2FibGV8Y29udGVudGVkaXRhYmxlfHNwZWxsY2hlY2spJC87XG5cdFxuXHQvLyB0aGVzZSBhdHRyaWJ1dGVzIHNob3VsZCBzZXQgYSBoaWRkZW4gcHJvcGVydHkgZm9yXG5cdC8vIGJpbmRpbmcgdi1tb2RlbCB0byBvYmplY3QgdmFsdWVzXG5cdHZhciBtb2RlbFByb3BzID0ge1xuXHQgIHZhbHVlOiAnX3ZhbHVlJyxcblx0ICAndHJ1ZS12YWx1ZSc6ICdfdHJ1ZVZhbHVlJyxcblx0ICAnZmFsc2UtdmFsdWUnOiAnX2ZhbHNlVmFsdWUnXG5cdH07XG5cdFxuXHR2YXIgYmluZCQxID0ge1xuXHRcblx0ICBwcmlvcml0eTogQklORCxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBhdHRyID0gdGhpcy5hcmc7XG5cdCAgICB2YXIgdGFnID0gdGhpcy5lbC50YWdOYW1lO1xuXHQgICAgLy8gc2hvdWxkIGJlIGRlZXAgd2F0Y2ggb24gb2JqZWN0IG1vZGVcblx0ICAgIGlmICghYXR0cikge1xuXHQgICAgICB0aGlzLmRlZXAgPSB0cnVlO1xuXHQgICAgfVxuXHQgICAgLy8gaGFuZGxlIGludGVycG9sYXRpb24gYmluZGluZ3Ncblx0ICAgIHZhciBkZXNjcmlwdG9yID0gdGhpcy5kZXNjcmlwdG9yO1xuXHQgICAgdmFyIHRva2VucyA9IGRlc2NyaXB0b3IuaW50ZXJwO1xuXHQgICAgaWYgKHRva2Vucykge1xuXHQgICAgICAvLyBoYW5kbGUgaW50ZXJwb2xhdGlvbnMgd2l0aCBvbmUtdGltZSB0b2tlbnNcblx0ICAgICAgaWYgKGRlc2NyaXB0b3IuaGFzT25lVGltZSkge1xuXHQgICAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IHRva2Vuc1RvRXhwKHRva2VucywgdGhpcy5fc2NvcGUgfHwgdGhpcy52bSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIG9ubHkgYWxsb3cgYmluZGluZyBvbiBuYXRpdmUgYXR0cmlidXRlc1xuXHQgICAgICBpZiAoZGlzYWxsb3dlZEludGVycEF0dHJSRS50ZXN0KGF0dHIpIHx8IGF0dHIgPT09ICduYW1lJyAmJiAodGFnID09PSAnUEFSVElBTCcgfHwgdGFnID09PSAnU0xPVCcpKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKGF0dHIgKyAnPVwiJyArIGRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2F0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uIGlzIG5vdCBhbGxvd2VkIGluIFZ1ZS5qcyAnICsgJ2RpcmVjdGl2ZXMgYW5kIHNwZWNpYWwgYXR0cmlidXRlcy4nLCB0aGlzLnZtKTtcblx0ICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcblx0ICAgICAgICB0aGlzLmludmFsaWQgPSB0cnVlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICB2YXIgcmF3ID0gYXR0ciArICc9XCInICsgZGVzY3JpcHRvci5yYXcgKyAnXCI6ICc7XG5cdCAgICAgICAgLy8gd2FybiBzcmNcblx0ICAgICAgICBpZiAoYXR0ciA9PT0gJ3NyYycpIHtcblx0ICAgICAgICAgIHdhcm4ocmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzcmNcIiBhdHRyaWJ1dGUgd2lsbCBjYXVzZSAnICsgJ2EgNDA0IHJlcXVlc3QuIFVzZSB2LWJpbmQ6c3JjIGluc3RlYWQuJywgdGhpcy52bSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyB3YXJuIHN0eWxlXG5cdCAgICAgICAgaWYgKGF0dHIgPT09ICdzdHlsZScpIHtcblx0ICAgICAgICAgIHdhcm4ocmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzdHlsZVwiIGF0dHJpYnV0ZSB3aWxsIGNhdXNlICcgKyAndGhlIGF0dHJpYnV0ZSB0byBiZSBkaXNjYXJkZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIuICcgKyAnVXNlIHYtYmluZDpzdHlsZSBpbnN0ZWFkLicsIHRoaXMudm0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICBpZiAodGhpcy5pbnZhbGlkKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBhdHRyID0gdGhpcy5hcmc7XG5cdCAgICBpZiAodGhpcy5hcmcpIHtcblx0ICAgICAgdGhpcy5oYW5kbGVTaW5nbGUoYXR0ciwgdmFsdWUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUgfHwge30pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8vIHNoYXJlIG9iamVjdCBoYW5kbGVyIHdpdGggdi1iaW5kOmNsYXNzXG5cdCAgaGFuZGxlT2JqZWN0OiBzdHlsZS5oYW5kbGVPYmplY3QsXG5cdFxuXHQgIGhhbmRsZVNpbmdsZTogZnVuY3Rpb24gaGFuZGxlU2luZ2xlKGF0dHIsIHZhbHVlKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgdmFyIGludGVycCA9IHRoaXMuZGVzY3JpcHRvci5pbnRlcnA7XG5cdCAgICBpZiAodGhpcy5tb2RpZmllcnMuY2FtZWwpIHtcblx0ICAgICAgYXR0ciA9IGNhbWVsaXplKGF0dHIpO1xuXHQgICAgfVxuXHQgICAgaWYgKCFpbnRlcnAgJiYgYXR0cldpdGhQcm9wc1JFLnRlc3QoYXR0cikgJiYgYXR0ciBpbiBlbCkge1xuXHQgICAgICB2YXIgYXR0clZhbHVlID0gYXR0ciA9PT0gJ3ZhbHVlJyA/IHZhbHVlID09IG51bGwgLy8gSUU5IHdpbGwgc2V0IGlucHV0LnZhbHVlIHRvIFwibnVsbFwiIGZvciBudWxsLi4uXG5cdCAgICAgID8gJycgOiB2YWx1ZSA6IHZhbHVlO1xuXHRcblx0ICAgICAgaWYgKGVsW2F0dHJdICE9PSBhdHRyVmFsdWUpIHtcblx0ICAgICAgICBlbFthdHRyXSA9IGF0dHJWYWx1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gc2V0IG1vZGVsIHByb3BzXG5cdCAgICB2YXIgbW9kZWxQcm9wID0gbW9kZWxQcm9wc1thdHRyXTtcblx0ICAgIGlmICghaW50ZXJwICYmIG1vZGVsUHJvcCkge1xuXHQgICAgICBlbFttb2RlbFByb3BdID0gdmFsdWU7XG5cdCAgICAgIC8vIHVwZGF0ZSB2LW1vZGVsIGlmIHByZXNlbnRcblx0ICAgICAgdmFyIG1vZGVsID0gZWwuX192X21vZGVsO1xuXHQgICAgICBpZiAobW9kZWwpIHtcblx0ICAgICAgICBtb2RlbC5saXN0ZW5lcigpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBkbyBub3Qgc2V0IHZhbHVlIGF0dHJpYnV0ZSBmb3IgdGV4dGFyZWFcblx0ICAgIGlmIChhdHRyID09PSAndmFsdWUnICYmIGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcblx0ICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICAvLyB1cGRhdGUgYXR0cmlidXRlXG5cdCAgICBpZiAoZW51bWVyYXRlZEF0dHJSRS50ZXN0KGF0dHIpKSB7XG5cdCAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSA/ICd0cnVlJyA6ICdmYWxzZScpO1xuXHQgICAgfSBlbHNlIGlmICh2YWx1ZSAhPSBudWxsICYmIHZhbHVlICE9PSBmYWxzZSkge1xuXHQgICAgICBpZiAoYXR0ciA9PT0gJ2NsYXNzJykge1xuXHQgICAgICAgIC8vIGhhbmRsZSBlZGdlIGNhc2UgIzE5NjA6XG5cdCAgICAgICAgLy8gY2xhc3MgaW50ZXJwb2xhdGlvbiBzaG91bGQgbm90IG92ZXJ3cml0ZSBWdWUgdHJhbnNpdGlvbiBjbGFzc1xuXHQgICAgICAgIGlmIChlbC5fX3ZfdHJhbnMpIHtcblx0ICAgICAgICAgIHZhbHVlICs9ICcgJyArIGVsLl9fdl90cmFucy5pZCArICctdHJhbnNpdGlvbic7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHNldENsYXNzKGVsLCB2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoeGxpbmtSRS50ZXN0KGF0dHIpKSB7XG5cdCAgICAgICAgZWwuc2V0QXR0cmlidXRlTlMoeGxpbmtOUywgYXR0ciwgdmFsdWUgPT09IHRydWUgPyAnJyA6IHZhbHVlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUgPT09IHRydWUgPyAnJyA6IHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBlbCA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IEVMLFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoIXRoaXMuYXJnKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBpZCA9IHRoaXMuaWQgPSBjYW1lbGl6ZSh0aGlzLmFyZyk7XG5cdCAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kZWxzO1xuXHQgICAgaWYgKGhhc093bihyZWZzLCBpZCkpIHtcblx0ICAgICAgcmVmc1tpZF0gPSB0aGlzLmVsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZGVmaW5lUmVhY3RpdmUocmVmcywgaWQsIHRoaXMuZWwpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJGVscztcblx0ICAgIGlmIChyZWZzW3RoaXMuaWRdID09PSB0aGlzLmVsKSB7XG5cdCAgICAgIHJlZnNbdGhpcy5pZF0gPSBudWxsO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciByZWYgPSB7XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1yZWY6JyArIHRoaXMuYXJnICsgJyBtdXN0IGJlIHVzZWQgb24gYSBjaGlsZCAnICsgJ2NvbXBvbmVudC4gRm91bmQgb24gPCcgKyB0aGlzLmVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICc+LicsIHRoaXMudm0pO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBjbG9hayA9IHtcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIHRoaXMudm0uJG9uY2UoJ3ByZS1ob29rOmNvbXBpbGVkJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3YtY2xvYWsnKTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIG11c3QgZXhwb3J0IHBsYWluIG9iamVjdFxuXHR2YXIgZGlyZWN0aXZlcyA9IHtcblx0ICB0ZXh0OiB0ZXh0JDEsXG5cdCAgaHRtbDogaHRtbCxcblx0ICAnZm9yJzogdkZvcixcblx0ICAnaWYnOiB2SWYsXG5cdCAgc2hvdzogc2hvdyxcblx0ICBtb2RlbDogbW9kZWwsXG5cdCAgb246IG9uJDEsXG5cdCAgYmluZDogYmluZCQxLFxuXHQgIGVsOiBlbCxcblx0ICByZWY6IHJlZixcblx0ICBjbG9hazogY2xvYWtcblx0fTtcblx0XG5cdHZhciB2Q2xhc3MgPSB7XG5cdFxuXHQgIGRlZXA6IHRydWUsXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICBpZiAoIXZhbHVlKSB7XG5cdCAgICAgIHRoaXMuY2xlYW51cCgpO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHRoaXMuc2V0Q2xhc3ModmFsdWUudHJpbSgpLnNwbGl0KC9cXHMrLykpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5zZXRDbGFzcyhub3JtYWxpemUkMSh2YWx1ZSkpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHNldENsYXNzOiBmdW5jdGlvbiBzZXRDbGFzcyh2YWx1ZSkge1xuXHQgICAgdGhpcy5jbGVhbnVwKHZhbHVlKTtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciB2YWwgPSB2YWx1ZVtpXTtcblx0ICAgICAgaWYgKHZhbCkge1xuXHQgICAgICAgIGFwcGx5KHRoaXMuZWwsIHZhbCwgYWRkQ2xhc3MpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aGlzLnByZXZLZXlzID0gdmFsdWU7XG5cdCAgfSxcblx0XG5cdCAgY2xlYW51cDogZnVuY3Rpb24gY2xlYW51cCh2YWx1ZSkge1xuXHQgICAgdmFyIHByZXZLZXlzID0gdGhpcy5wcmV2S2V5cztcblx0ICAgIGlmICghcHJldktleXMpIHJldHVybjtcblx0ICAgIHZhciBpID0gcHJldktleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YXIga2V5ID0gcHJldktleXNbaV07XG5cdCAgICAgIGlmICghdmFsdWUgfHwgdmFsdWUuaW5kZXhPZihrZXkpIDwgMCkge1xuXHQgICAgICAgIGFwcGx5KHRoaXMuZWwsIGtleSwgcmVtb3ZlQ2xhc3MpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE5vcm1hbGl6ZSBvYmplY3RzIGFuZCBhcnJheXMgKHBvdGVudGlhbGx5IGNvbnRhaW5pbmcgb2JqZWN0cylcblx0ICogaW50byBhcnJheSBvZiBzdHJpbmdzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdHxBcnJheTxTdHJpbmd8T2JqZWN0Pn0gdmFsdWVcblx0ICogQHJldHVybiB7QXJyYXk8U3RyaW5nPn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBub3JtYWxpemUkMSh2YWx1ZSkge1xuXHQgIHZhciByZXMgPSBbXTtcblx0ICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBfa2V5ID0gdmFsdWVbaV07XG5cdCAgICAgIGlmIChfa2V5KSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBfa2V5ID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgcmVzLnB1c2goX2tleSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGZvciAodmFyIGsgaW4gX2tleSkge1xuXHQgICAgICAgICAgICBpZiAoX2tleVtrXSkgcmVzLnB1c2goayk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcblx0ICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuXHQgICAgICBpZiAodmFsdWVba2V5XSkgcmVzLnB1c2goa2V5KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFkZCBvciByZW1vdmUgYSBjbGFzcy9jbGFzc2VzIG9uIGFuIGVsZW1lbnRcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBjbGFzcyBuYW1lLiBUaGlzIG1heSBvciBtYXkgbm90XG5cdCAqICAgICAgICAgICAgICAgICAgICAgY29udGFpbiBhIHNwYWNlIGNoYXJhY3RlciwgaW4gc3VjaCBhXG5cdCAqICAgICAgICAgICAgICAgICAgICAgY2FzZSB3ZSdsbCBkZWFsIHdpdGggbXVsdGlwbGUgY2xhc3Ncblx0ICogICAgICAgICAgICAgICAgICAgICBuYW1lcyBhdCBvbmNlLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFwcGx5KGVsLCBrZXksIGZuKSB7XG5cdCAga2V5ID0ga2V5LnRyaW0oKTtcblx0ICBpZiAoa2V5LmluZGV4T2YoJyAnKSA9PT0gLTEpIHtcblx0ICAgIGZuKGVsLCBrZXkpO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICAvLyBUaGUga2V5IGNvbnRhaW5zIG9uZSBvciBtb3JlIHNwYWNlIGNoYXJhY3RlcnMuXG5cdCAgLy8gU2luY2UgYSBjbGFzcyBuYW1lIGRvZXNuJ3QgYWNjZXB0IHN1Y2ggY2hhcmFjdGVycywgd2Vcblx0ICAvLyB0cmVhdCBpdCBhcyBtdWx0aXBsZSBjbGFzc2VzLlxuXHQgIHZhciBrZXlzID0ga2V5LnNwbGl0KC9cXHMrLyk7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgZm4oZWwsIGtleXNbaV0pO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGNvbXBvbmVudCA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IENPTVBPTkVOVCxcblx0XG5cdCAgcGFyYW1zOiBbJ2tlZXAtYWxpdmUnLCAndHJhbnNpdGlvbi1tb2RlJywgJ2lubGluZS10ZW1wbGF0ZSddLFxuXHRcblx0ICAvKipcblx0ICAgKiBTZXR1cC4gVHdvIHBvc3NpYmxlIHVzYWdlczpcblx0ICAgKlxuXHQgICAqIC0gc3RhdGljOlxuXHQgICAqICAgPGNvbXA+IG9yIDxkaXYgdi1jb21wb25lbnQ9XCJjb21wXCI+XG5cdCAgICpcblx0ICAgKiAtIGR5bmFtaWM6XG5cdCAgICogICA8Y29tcG9uZW50IDppcz1cInZpZXdcIj5cblx0ICAgKi9cblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIGlmICghdGhpcy5lbC5fX3Z1ZV9fKSB7XG5cdCAgICAgIC8vIGtlZXAtYWxpdmUgY2FjaGVcblx0ICAgICAgdGhpcy5rZWVwQWxpdmUgPSB0aGlzLnBhcmFtcy5rZWVwQWxpdmU7XG5cdCAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xuXHQgICAgICAgIHRoaXMuY2FjaGUgPSB7fTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBjaGVjayBpbmxpbmUtdGVtcGxhdGVcblx0ICAgICAgaWYgKHRoaXMucGFyYW1zLmlubGluZVRlbXBsYXRlKSB7XG5cdCAgICAgICAgLy8gZXh0cmFjdCBpbmxpbmUgdGVtcGxhdGUgYXMgYSBEb2N1bWVudEZyYWdtZW50XG5cdCAgICAgICAgdGhpcy5pbmxpbmVUZW1wbGF0ZSA9IGV4dHJhY3RDb250ZW50KHRoaXMuZWwsIHRydWUpO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGNvbXBvbmVudCByZXNvbHV0aW9uIHJlbGF0ZWQgc3RhdGVcblx0ICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSB0aGlzLkNvbXBvbmVudCA9IG51bGw7XG5cdCAgICAgIC8vIHRyYW5zaXRpb24gcmVsYXRlZCBzdGF0ZVxuXHQgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFscyA9IDA7XG5cdCAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxDYiA9IG51bGw7XG5cdCAgICAgIC8vIGNyZWF0ZSBhIHJlZiBhbmNob3Jcblx0ICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtY29tcG9uZW50Jyk7XG5cdCAgICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuXHQgICAgICAvLyByZW1vdmUgaXMgYXR0cmlidXRlLlxuXHQgICAgICAvLyB0aGlzIGlzIHJlbW92ZWQgZHVyaW5nIGNvbXBpbGF0aW9uLCBidXQgYmVjYXVzZSBjb21waWxhdGlvbiBpc1xuXHQgICAgICAvLyBjYWNoZWQsIHdoZW4gdGhlIGNvbXBvbmVudCBpcyB1c2VkIGVsc2V3aGVyZSB0aGlzIGF0dHJpYnV0ZVxuXHQgICAgICAvLyB3aWxsIHJlbWFpbiBhdCBsaW5rIHRpbWUuXG5cdCAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCdpcycpO1xuXHQgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnOmlzJyk7XG5cdCAgICAgIC8vIHJlbW92ZSByZWYsIHNhbWUgYXMgYWJvdmVcblx0ICAgICAgaWYgKHRoaXMuZGVzY3JpcHRvci5yZWYpIHtcblx0ICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgndi1yZWY6JyArIGh5cGhlbmF0ZSh0aGlzLmRlc2NyaXB0b3IucmVmKSk7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gaWYgc3RhdGljLCBidWlsZCByaWdodCBub3cuXG5cdCAgICAgIGlmICh0aGlzLmxpdGVyYWwpIHtcblx0ICAgICAgICB0aGlzLnNldENvbXBvbmVudCh0aGlzLmV4cHJlc3Npb24pO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ2Nhbm5vdCBtb3VudCBjb21wb25lbnQgXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiICcgKyAnb24gYWxyZWFkeSBtb3VudGVkIGVsZW1lbnQ6ICcgKyB0aGlzLmVsKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBQdWJsaWMgdXBkYXRlLCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIgaW4gdGhlIGR5bmFtaWNcblx0ICAgKiBsaXRlcmFsIHNjZW5hcmlvLCBlLmcuIDxjb21wb25lbnQgOmlzPVwidmlld1wiPlxuXHQgICAqL1xuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgaWYgKCF0aGlzLmxpdGVyYWwpIHtcblx0ICAgICAgdGhpcy5zZXRDb21wb25lbnQodmFsdWUpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFN3aXRjaCBkeW5hbWljIGNvbXBvbmVudHMuIE1heSByZXNvbHZlIHRoZSBjb21wb25lbnRcblx0ICAgKiBhc3luY2hyb25vdXNseSwgYW5kIHBlcmZvcm0gdHJhbnNpdGlvbiBiYXNlZCBvblxuXHQgICAqIHNwZWNpZmllZCB0cmFuc2l0aW9uIG1vZGUuIEFjY2VwdHMgYSBmZXcgYWRkaXRpb25hbFxuXHQgICAqIGFyZ3VtZW50cyBzcGVjaWZpY2FsbHkgZm9yIHZ1ZS1yb3V0ZXIuXG5cdCAgICpcblx0ICAgKiBUaGUgY2FsbGJhY2sgaXMgY2FsbGVkIHdoZW4gdGhlIGZ1bGwgdHJhbnNpdGlvbiBpc1xuXHQgICAqIGZpbmlzaGVkLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICBzZXRDb21wb25lbnQ6IGZ1bmN0aW9uIHNldENvbXBvbmVudCh2YWx1ZSwgY2IpIHtcblx0ICAgIHRoaXMuaW52YWxpZGF0ZVBlbmRpbmcoKTtcblx0ICAgIGlmICghdmFsdWUpIHtcblx0ICAgICAgLy8ganVzdCByZW1vdmUgY3VycmVudFxuXHQgICAgICB0aGlzLnVuYnVpbGQodHJ1ZSk7XG5cdCAgICAgIHRoaXMucmVtb3ZlKHRoaXMuY2hpbGRWTSwgY2IpO1xuXHQgICAgICB0aGlzLmNoaWxkVk0gPSBudWxsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICB0aGlzLnJlc29sdmVDb21wb25lbnQodmFsdWUsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzZWxmLm1vdW50Q29tcG9uZW50KGNiKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVzb2x2ZSB0aGUgY29tcG9uZW50IGNvbnN0cnVjdG9yIHRvIHVzZSB3aGVuIGNyZWF0aW5nXG5cdCAgICogdGhlIGNoaWxkIHZtLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHZhbHVlXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgKi9cblx0XG5cdCAgcmVzb2x2ZUNvbXBvbmVudDogZnVuY3Rpb24gcmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgY2IpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKENvbXBvbmVudCkge1xuXHQgICAgICBzZWxmLkNvbXBvbmVudE5hbWUgPSBDb21wb25lbnQub3B0aW9ucy5uYW1lIHx8ICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBudWxsKTtcblx0ICAgICAgc2VsZi5Db21wb25lbnQgPSBDb21wb25lbnQ7XG5cdCAgICAgIGNiKCk7XG5cdCAgICB9KTtcblx0ICAgIHRoaXMudm0uX3Jlc29sdmVDb21wb25lbnQodmFsdWUsIHRoaXMucGVuZGluZ0NvbXBvbmVudENiKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2UgdXNpbmcgdGhlIGN1cnJlbnQgY29uc3RydWN0b3IgYW5kXG5cdCAgICogcmVwbGFjZSB0aGUgZXhpc3RpbmcgaW5zdGFuY2UuIFRoaXMgbWV0aG9kIGRvZXNuJ3QgY2FyZVxuXHQgICAqIHdoZXRoZXIgdGhlIG5ldyBjb21wb25lbnQgYW5kIHRoZSBvbGQgb25lIGFyZSBhY3R1YWxseVxuXHQgICAqIHRoZSBzYW1lLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICBtb3VudENvbXBvbmVudDogZnVuY3Rpb24gbW91bnRDb21wb25lbnQoY2IpIHtcblx0ICAgIC8vIGFjdHVhbCBtb3VudFxuXHQgICAgdGhpcy51bmJ1aWxkKHRydWUpO1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGFjdGl2YXRlSG9va3MgPSB0aGlzLkNvbXBvbmVudC5vcHRpb25zLmFjdGl2YXRlO1xuXHQgICAgdmFyIGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkKCk7XG5cdCAgICB2YXIgbmV3Q29tcG9uZW50ID0gdGhpcy5idWlsZCgpO1xuXHQgICAgaWYgKGFjdGl2YXRlSG9va3MgJiYgIWNhY2hlZCkge1xuXHQgICAgICB0aGlzLndhaXRpbmdGb3IgPSBuZXdDb21wb25lbnQ7XG5cdCAgICAgIGNhbGxBY3RpdmF0ZUhvb2tzKGFjdGl2YXRlSG9va3MsIG5ld0NvbXBvbmVudCwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChzZWxmLndhaXRpbmdGb3IgIT09IG5ld0NvbXBvbmVudCkge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzZWxmLndhaXRpbmdGb3IgPSBudWxsO1xuXHQgICAgICAgIHNlbGYudHJhbnNpdGlvbihuZXdDb21wb25lbnQsIGNiKTtcblx0ICAgICAgfSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyB1cGRhdGUgcmVmIGZvciBrZXB0LWFsaXZlIGNvbXBvbmVudFxuXHQgICAgICBpZiAoY2FjaGVkKSB7XG5cdCAgICAgICAgbmV3Q29tcG9uZW50Ll91cGRhdGVSZWYoKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLnRyYW5zaXRpb24obmV3Q29tcG9uZW50LCBjYik7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hlbiB0aGUgY29tcG9uZW50IGNoYW5nZXMgb3IgdW5iaW5kcyBiZWZvcmUgYW4gYXN5bmNcblx0ICAgKiBjb25zdHJ1Y3RvciBpcyByZXNvbHZlZCwgd2UgbmVlZCB0byBpbnZhbGlkYXRlIGl0c1xuXHQgICAqIHBlbmRpbmcgY2FsbGJhY2suXG5cdCAgICovXG5cdFxuXHQgIGludmFsaWRhdGVQZW5kaW5nOiBmdW5jdGlvbiBpbnZhbGlkYXRlUGVuZGluZygpIHtcblx0ICAgIGlmICh0aGlzLnBlbmRpbmdDb21wb25lbnRDYikge1xuXHQgICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYi5jYW5jZWwoKTtcblx0ICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSBudWxsO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEluc3RhbnRpYXRlL2luc2VydCBhIG5ldyBjaGlsZCB2bS5cblx0ICAgKiBJZiBrZWVwIGFsaXZlIGFuZCBoYXMgY2FjaGVkIGluc3RhbmNlLCBpbnNlcnQgdGhhdFxuXHQgICAqIGluc3RhbmNlOyBvdGhlcndpc2UgYnVpbGQgYSBuZXcgb25lIGFuZCBjYWNoZSBpdC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbZXh0cmFPcHRpb25zXVxuXHQgICAqIEByZXR1cm4ge1Z1ZX0gLSB0aGUgY3JlYXRlZCBpbnN0YW5jZVxuXHQgICAqL1xuXHRcblx0ICBidWlsZDogZnVuY3Rpb24gYnVpbGQoZXh0cmFPcHRpb25zKSB7XG5cdCAgICB2YXIgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWQoKTtcblx0ICAgIGlmIChjYWNoZWQpIHtcblx0ICAgICAgcmV0dXJuIGNhY2hlZDtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLkNvbXBvbmVudCkge1xuXHQgICAgICAvLyBkZWZhdWx0IG9wdGlvbnNcblx0ICAgICAgdmFyIG9wdGlvbnMgPSB7XG5cdCAgICAgICAgbmFtZTogdGhpcy5Db21wb25lbnROYW1lLFxuXHQgICAgICAgIGVsOiBjbG9uZU5vZGUodGhpcy5lbCksXG5cdCAgICAgICAgdGVtcGxhdGU6IHRoaXMuaW5saW5lVGVtcGxhdGUsXG5cdCAgICAgICAgLy8gbWFrZSBzdXJlIHRvIGFkZCB0aGUgY2hpbGQgd2l0aCBjb3JyZWN0IHBhcmVudFxuXHQgICAgICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGl0cyBwYXJlbnRcblx0ICAgICAgICAvLyBzaG91bGQgYmUgdGhlIHRyYW5zY2x1c2lvbiBob3N0LlxuXHQgICAgICAgIHBhcmVudDogdGhpcy5faG9zdCB8fCB0aGlzLnZtLFxuXHQgICAgICAgIC8vIGlmIG5vIGlubGluZS10ZW1wbGF0ZSwgdGhlbiB0aGUgY29tcGlsZWRcblx0ICAgICAgICAvLyBsaW5rZXIgY2FuIGJlIGNhY2hlZCBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLlxuXHQgICAgICAgIF9saW5rZXJDYWNoYWJsZTogIXRoaXMuaW5saW5lVGVtcGxhdGUsXG5cdCAgICAgICAgX3JlZjogdGhpcy5kZXNjcmlwdG9yLnJlZixcblx0ICAgICAgICBfYXNDb21wb25lbnQ6IHRydWUsXG5cdCAgICAgICAgX2lzUm91dGVyVmlldzogdGhpcy5faXNSb3V0ZXJWaWV3LFxuXHQgICAgICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGNvbnRleHRcblx0ICAgICAgICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2Vcblx0ICAgICAgICAvLyBhbmQgaXRzIGhvc3QuXG5cdCAgICAgICAgX2NvbnRleHQ6IHRoaXMudm0sXG5cdCAgICAgICAgLy8gaWYgdGhpcyBpcyBpbnNpZGUgYW4gaW5saW5lIHYtZm9yLCB0aGUgc2NvcGVcblx0ICAgICAgICAvLyB3aWxsIGJlIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgY3JlYXRlZCBmb3IgdGhpc1xuXHQgICAgICAgIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXG5cdCAgICAgICAgLy8gYW5kIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuXHQgICAgICAgIF9zY29wZTogdGhpcy5fc2NvcGUsXG5cdCAgICAgICAgLy8gcGFzcyBpbiB0aGUgb3duZXIgZnJhZ21lbnQgb2YgdGhpcyBjb21wb25lbnQuXG5cdCAgICAgICAgLy8gdGhpcyBpcyBuZWNlc3Nhcnkgc28gdGhhdCB0aGUgZnJhZ21lbnQgY2FuIGtlZXBcblx0ICAgICAgICAvLyB0cmFjayBvZiBpdHMgY29udGFpbmVkIGNvbXBvbmVudHMgaW4gb3JkZXIgdG9cblx0ICAgICAgICAvLyBjYWxsIGF0dGFjaC9kZXRhY2ggaG9va3MgZm9yIHRoZW0uXG5cdCAgICAgICAgX2ZyYWc6IHRoaXMuX2ZyYWdcblx0ICAgICAgfTtcblx0ICAgICAgLy8gZXh0cmEgb3B0aW9uc1xuXHQgICAgICAvLyBpbiAxLjAuMCB0aGlzIGlzIHVzZWQgYnkgdnVlLXJvdXRlciBvbmx5XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoZXh0cmFPcHRpb25zKSB7XG5cdCAgICAgICAgZXh0ZW5kKG9wdGlvbnMsIGV4dHJhT3B0aW9ucyk7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGNoaWxkID0gbmV3IHRoaXMuQ29tcG9uZW50KG9wdGlvbnMpO1xuXHQgICAgICBpZiAodGhpcy5rZWVwQWxpdmUpIHtcblx0ICAgICAgICB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF0gPSBjaGlsZDtcblx0ICAgICAgfVxuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbC5oYXNBdHRyaWJ1dGUoJ3RyYW5zaXRpb24nKSAmJiBjaGlsZC5faXNGcmFnbWVudCkge1xuXHQgICAgICAgIHdhcm4oJ1RyYW5zaXRpb25zIHdpbGwgbm90IHdvcmsgb24gYSBmcmFnbWVudCBpbnN0YW5jZS4gJyArICdUZW1wbGF0ZTogJyArIGNoaWxkLiRvcHRpb25zLnRlbXBsYXRlLCBjaGlsZCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGNoaWxkO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFRyeSB0byBnZXQgYSBjYWNoZWQgaW5zdGFuY2Ugb2YgdGhlIGN1cnJlbnQgY29tcG9uZW50LlxuXHQgICAqXG5cdCAgICogQHJldHVybiB7VnVlfHVuZGVmaW5lZH1cblx0ICAgKi9cblx0XG5cdCAgZ2V0Q2FjaGVkOiBmdW5jdGlvbiBnZXRDYWNoZWQoKSB7XG5cdCAgICByZXR1cm4gdGhpcy5rZWVwQWxpdmUgJiYgdGhpcy5jYWNoZVt0aGlzLkNvbXBvbmVudC5jaWRdO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFRlYXJkb3duIHRoZSBjdXJyZW50IGNoaWxkLCBidXQgZGVmZXJzIGNsZWFudXAgc29cblx0ICAgKiB0aGF0IHdlIGNhbiBzZXBhcmF0ZSB0aGUgZGVzdHJveSBhbmQgcmVtb3ZhbCBzdGVwcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJcblx0ICAgKi9cblx0XG5cdCAgdW5idWlsZDogZnVuY3Rpb24gdW5idWlsZChkZWZlcikge1xuXHQgICAgaWYgKHRoaXMud2FpdGluZ0Zvcikge1xuXHQgICAgICBpZiAoIXRoaXMua2VlcEFsaXZlKSB7XG5cdCAgICAgICAgdGhpcy53YWl0aW5nRm9yLiRkZXN0cm95KCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy53YWl0aW5nRm9yID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIHZhciBjaGlsZCA9IHRoaXMuY2hpbGRWTTtcblx0ICAgIGlmICghY2hpbGQgfHwgdGhpcy5rZWVwQWxpdmUpIHtcblx0ICAgICAgaWYgKGNoaWxkKSB7XG5cdCAgICAgICAgLy8gcmVtb3ZlIHJlZlxuXHQgICAgICAgIGNoaWxkLl9pbmFjdGl2ZSA9IHRydWU7XG5cdCAgICAgICAgY2hpbGQuX3VwZGF0ZVJlZih0cnVlKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICAvLyB0aGUgc29sZSBwdXJwb3NlIG9mIGBkZWZlckNsZWFudXBgIGlzIHNvIHRoYXQgd2UgY2FuXG5cdCAgICAvLyBcImRlYWN0aXZhdGVcIiB0aGUgdm0gcmlnaHQgbm93IGFuZCBwZXJmb3JtIERPTSByZW1vdmFsXG5cdCAgICAvLyBsYXRlci5cblx0ICAgIGNoaWxkLiRkZXN0cm95KGZhbHNlLCBkZWZlcik7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVtb3ZlIGN1cnJlbnQgZGVzdHJveWVkIGNoaWxkIGFuZCBtYW51YWxseSBkb1xuXHQgICAqIHRoZSBjbGVhbnVwIGFmdGVyIHJlbW92YWwuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAqL1xuXHRcblx0ICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShjaGlsZCwgY2IpIHtcblx0ICAgIHZhciBrZWVwQWxpdmUgPSB0aGlzLmtlZXBBbGl2ZTtcblx0ICAgIGlmIChjaGlsZCkge1xuXHQgICAgICAvLyB3ZSBtYXkgaGF2ZSBhIGNvbXBvbmVudCBzd2l0Y2ggd2hlbiBhIHByZXZpb3VzXG5cdCAgICAgIC8vIGNvbXBvbmVudCBpcyBzdGlsbCBiZWluZyB0cmFuc2l0aW9uZWQgb3V0LlxuXHQgICAgICAvLyB3ZSB3YW50IHRvIHRyaWdnZXIgb25seSBvbmUgbGFzdGVzdCBpbnNlcnRpb24gY2Jcblx0ICAgICAgLy8gd2hlbiB0aGUgZXhpc3RpbmcgdHJhbnNpdGlvbiBmaW5pc2hlcy4gKCMxMTE5KVxuXHQgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFscysrO1xuXHQgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsQ2IgPSBjYjtcblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICBjaGlsZC4kcmVtb3ZlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFscy0tO1xuXHQgICAgICAgIGlmICgha2VlcEFsaXZlKSBjaGlsZC5fY2xlYW51cCgpO1xuXHQgICAgICAgIGlmICghc2VsZi5wZW5kaW5nUmVtb3ZhbHMgJiYgc2VsZi5wZW5kaW5nUmVtb3ZhbENiKSB7XG5cdCAgICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IoKTtcblx0ICAgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxDYiA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSBpZiAoY2IpIHtcblx0ICAgICAgY2IoKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBBY3R1YWxseSBzd2FwIHRoZSBjb21wb25lbnRzLCBkZXBlbmRpbmcgb24gdGhlXG5cdCAgICogdHJhbnNpdGlvbiBtb2RlLiBEZWZhdWx0cyB0byBzaW11bHRhbmVvdXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICB0cmFuc2l0aW9uOiBmdW5jdGlvbiB0cmFuc2l0aW9uKHRhcmdldCwgY2IpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBjdXJyZW50ID0gdGhpcy5jaGlsZFZNO1xuXHQgICAgLy8gZm9yIGRldnRvb2wgaW5zcGVjdGlvblxuXHQgICAgaWYgKGN1cnJlbnQpIGN1cnJlbnQuX2luYWN0aXZlID0gdHJ1ZTtcblx0ICAgIHRhcmdldC5faW5hY3RpdmUgPSBmYWxzZTtcblx0ICAgIHRoaXMuY2hpbGRWTSA9IHRhcmdldDtcblx0ICAgIHN3aXRjaCAoc2VsZi5wYXJhbXMudHJhbnNpdGlvbk1vZGUpIHtcblx0ICAgICAgY2FzZSAnaW4tb3V0Jzpcblx0ICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCwgY2IpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICdvdXQtaW4nOlxuXHQgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBjYik7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCk7XG5cdCAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGNiKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBVbmJpbmQuXG5cdCAgICovXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdGhpcy5pbnZhbGlkYXRlUGVuZGluZygpO1xuXHQgICAgLy8gRG8gbm90IGRlZmVyIGNsZWFudXAgd2hlbiB1bmJpbmRpbmdcblx0ICAgIHRoaXMudW5idWlsZCgpO1xuXHQgICAgLy8gZGVzdHJveSBhbGwga2VlcC1hbGl2ZSBjYWNoZWQgaW5zdGFuY2VzXG5cdCAgICBpZiAodGhpcy5jYWNoZSkge1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jYWNoZSkge1xuXHQgICAgICAgIHRoaXMuY2FjaGVba2V5XS4kZGVzdHJveSgpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuY2FjaGUgPSBudWxsO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDYWxsIGFjdGl2YXRlIGhvb2tzIGluIG9yZGVyIChhc3luY2hyb25vdXMpXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGhvb2tzXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNhbGxBY3RpdmF0ZUhvb2tzKGhvb2tzLCB2bSwgY2IpIHtcblx0ICB2YXIgdG90YWwgPSBob29rcy5sZW5ndGg7XG5cdCAgdmFyIGNhbGxlZCA9IDA7XG5cdCAgaG9va3NbMF0uY2FsbCh2bSwgbmV4dCk7XG5cdCAgZnVuY3Rpb24gbmV4dCgpIHtcblx0ICAgIGlmICgrK2NhbGxlZCA+PSB0b3RhbCkge1xuXHQgICAgICBjYigpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaG9va3NbY2FsbGVkXS5jYWxsKHZtLCBuZXh0KTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciBwcm9wQmluZGluZ01vZGVzID0gY29uZmlnLl9wcm9wQmluZGluZ01vZGVzO1xuXHR2YXIgZW1wdHkgPSB7fTtcblx0XG5cdC8vIHJlZ2V4ZXNcblx0dmFyIGlkZW50UkUkMSA9IC9eWyRfYS16QS1aXStbXFx3JF0qJC87XG5cdHZhciBzZXR0YWJsZVBhdGhSRSA9IC9eW0EtWmEtel8kXVtcXHckXSooXFwuW0EtWmEtel8kXVtcXHckXSp8XFxbW15cXFtcXF1dK1xcXSkqJC87XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBwcm9wcyBvbiBhIHJvb3QgZWxlbWVudCBhbmQgcmV0dXJuXG5cdCAqIGEgcHJvcHMgbGluayBmdW5jdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHByb3BPcHRpb25zXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gcHJvcHNMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlUHJvcHMoZWwsIHByb3BPcHRpb25zLCB2bSkge1xuXHQgIHZhciBwcm9wcyA9IFtdO1xuXHQgIHZhciBuYW1lcyA9IE9iamVjdC5rZXlzKHByb3BPcHRpb25zKTtcblx0ICB2YXIgaSA9IG5hbWVzLmxlbmd0aDtcblx0ICB2YXIgb3B0aW9ucywgbmFtZSwgYXR0ciwgdmFsdWUsIHBhdGgsIHBhcnNlZCwgcHJvcDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBuYW1lID0gbmFtZXNbaV07XG5cdCAgICBvcHRpb25zID0gcHJvcE9wdGlvbnNbbmFtZV0gfHwgZW1wdHk7XG5cdFxuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgbmFtZSA9PT0gJyRkYXRhJykge1xuXHQgICAgICB3YXJuKCdEbyBub3QgdXNlICRkYXRhIGFzIHByb3AuJywgdm0pO1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBwcm9wcyBjb3VsZCBjb250YWluIGRhc2hlcywgd2hpY2ggd2lsbCBiZVxuXHQgICAgLy8gaW50ZXJwcmV0ZWQgYXMgbWludXMgY2FsY3VsYXRpb25zIGJ5IHRoZSBwYXJzZXJcblx0ICAgIC8vIHNvIHdlIG5lZWQgdG8gY2FtZWxpemUgdGhlIHBhdGggaGVyZVxuXHQgICAgcGF0aCA9IGNhbWVsaXplKG5hbWUpO1xuXHQgICAgaWYgKCFpZGVudFJFJDEudGVzdChwYXRoKSkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgcHJvcCBrZXk6IFwiJyArIG5hbWUgKyAnXCIuIFByb3Aga2V5cyAnICsgJ211c3QgYmUgdmFsaWQgaWRlbnRpZmllcnMuJywgdm0pO1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0XG5cdCAgICBwcm9wID0ge1xuXHQgICAgICBuYW1lOiBuYW1lLFxuXHQgICAgICBwYXRoOiBwYXRoLFxuXHQgICAgICBvcHRpb25zOiBvcHRpb25zLFxuXHQgICAgICBtb2RlOiBwcm9wQmluZGluZ01vZGVzLk9ORV9XQVksXG5cdCAgICAgIHJhdzogbnVsbFxuXHQgICAgfTtcblx0XG5cdCAgICBhdHRyID0gaHlwaGVuYXRlKG5hbWUpO1xuXHQgICAgLy8gZmlyc3QgY2hlY2sgZHluYW1pYyB2ZXJzaW9uXG5cdCAgICBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIpKSA9PT0gbnVsbCkge1xuXHQgICAgICBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIgKyAnLnN5bmMnKSkgIT09IG51bGwpIHtcblx0ICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVk7XG5cdCAgICAgIH0gZWxzZSBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIgKyAnLm9uY2UnKSkgIT09IG51bGwpIHtcblx0ICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLk9ORV9USU1FO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcblx0ICAgICAgLy8gaGFzIGR5bmFtaWMgYmluZGluZyFcblx0ICAgICAgcHJvcC5yYXcgPSB2YWx1ZTtcblx0ICAgICAgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuXHQgICAgICB2YWx1ZSA9IHBhcnNlZC5leHByZXNzaW9uO1xuXHQgICAgICBwcm9wLmZpbHRlcnMgPSBwYXJzZWQuZmlsdGVycztcblx0ICAgICAgLy8gY2hlY2sgYmluZGluZyB0eXBlXG5cdCAgICAgIGlmIChpc0xpdGVyYWwodmFsdWUpICYmICFwYXJzZWQuZmlsdGVycykge1xuXHQgICAgICAgIC8vIGZvciBleHByZXNzaW9ucyBjb250YWluaW5nIGxpdGVyYWwgbnVtYmVycyBhbmRcblx0ICAgICAgICAvLyBib29sZWFucywgdGhlcmUncyBubyBuZWVkIHRvIHNldHVwIGEgcHJvcCBiaW5kaW5nLFxuXHQgICAgICAgIC8vIHNvIHdlIGNhbiBvcHRpbWl6ZSB0aGVtIGFzIGEgb25lLXRpbWUgc2V0LlxuXHQgICAgICAgIHByb3Aub3B0aW1pemVkTGl0ZXJhbCA9IHRydWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcHJvcC5keW5hbWljID0gdHJ1ZTtcblx0ICAgICAgICAvLyBjaGVjayBub24tc2V0dGFibGUgcGF0aCBmb3IgdHdvLXdheSBiaW5kaW5nc1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHByb3AubW9kZSA9PT0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZICYmICFzZXR0YWJsZVBhdGhSRS50ZXN0KHZhbHVlKSkge1xuXHQgICAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfV0FZO1xuXHQgICAgICAgICAgd2FybignQ2Fubm90IGJpbmQgdHdvLXdheSBwcm9wIHdpdGggbm9uLXNldHRhYmxlICcgKyAncGFyZW50IHBhdGg6ICcgKyB2YWx1ZSwgdm0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBwcm9wLnBhcmVudFBhdGggPSB2YWx1ZTtcblx0XG5cdCAgICAgIC8vIHdhcm4gcmVxdWlyZWQgdHdvLXdheVxuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBvcHRpb25zLnR3b1dheSAmJiBwcm9wLm1vZGUgIT09IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWSkge1xuXHQgICAgICAgIHdhcm4oJ1Byb3AgXCInICsgbmFtZSArICdcIiBleHBlY3RzIGEgdHdvLXdheSBiaW5kaW5nIHR5cGUuJywgdm0pO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKCh2YWx1ZSA9IGdldEF0dHIoZWwsIGF0dHIpKSAhPT0gbnVsbCkge1xuXHQgICAgICAvLyBoYXMgbGl0ZXJhbCBiaW5kaW5nIVxuXHQgICAgICBwcm9wLnJhdyA9IHZhbHVlO1xuXHQgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIC8vIGNoZWNrIHBvc3NpYmxlIGNhbWVsQ2FzZSBwcm9wIHVzYWdlXG5cdCAgICAgIHZhciBsb3dlckNhc2VOYW1lID0gcGF0aC50b0xvd2VyQ2FzZSgpO1xuXHQgICAgICB2YWx1ZSA9IC9bQS1aXFwtXS8udGVzdChuYW1lKSAmJiAoZWwuZ2V0QXR0cmlidXRlKGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLm9uY2UnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSArICcub25jZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lICsgJy5zeW5jJykgfHwgZWwuZ2V0QXR0cmlidXRlKCd2LWJpbmQ6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLnN5bmMnKSk7XG5cdCAgICAgIGlmICh2YWx1ZSkge1xuXHQgICAgICAgIHdhcm4oJ1Bvc3NpYmxlIHVzYWdlIGVycm9yIGZvciBwcm9wIGAnICsgbG93ZXJDYXNlTmFtZSArICdgIC0gJyArICdkaWQgeW91IG1lYW4gYCcgKyBhdHRyICsgJ2A/IEhUTUwgaXMgY2FzZS1pbnNlbnNpdGl2ZSwgcmVtZW1iZXIgdG8gdXNlICcgKyAna2ViYWItY2FzZSBmb3IgcHJvcHMgaW4gdGVtcGxhdGVzLicsIHZtKTtcblx0ICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJlcXVpcmVkKSB7XG5cdCAgICAgICAgLy8gd2FybiBtaXNzaW5nIHJlcXVpcmVkXG5cdCAgICAgICAgd2FybignTWlzc2luZyByZXF1aXJlZCBwcm9wOiAnICsgbmFtZSwgdm0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBwdXNoIHByb3Bcblx0ICAgIHByb3BzLnB1c2gocHJvcCk7XG5cdCAgfVxuXHQgIHJldHVybiBtYWtlUHJvcHNMaW5rRm4ocHJvcHMpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQnVpbGQgYSBmdW5jdGlvbiB0aGF0IGFwcGxpZXMgcHJvcHMgdG8gYSB2bS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gcHJvcHNcblx0ICogQHJldHVybiB7RnVuY3Rpb259IHByb3BzTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVByb3BzTGlua0ZuKHByb3BzKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHByb3BzTGlua0ZuKHZtLCBzY29wZSkge1xuXHQgICAgLy8gc3RvcmUgcmVzb2x2ZWQgcHJvcHMgaW5mb1xuXHQgICAgdm0uX3Byb3BzID0ge307XG5cdCAgICB2YXIgaW5saW5lUHJvcHMgPSB2bS4kb3B0aW9ucy5wcm9wc0RhdGE7XG5cdCAgICB2YXIgaSA9IHByb3BzLmxlbmd0aDtcblx0ICAgIHZhciBwcm9wLCBwYXRoLCBvcHRpb25zLCB2YWx1ZSwgcmF3O1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBwcm9wID0gcHJvcHNbaV07XG5cdCAgICAgIHJhdyA9IHByb3AucmF3O1xuXHQgICAgICBwYXRoID0gcHJvcC5wYXRoO1xuXHQgICAgICBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xuXHQgICAgICB2bS5fcHJvcHNbcGF0aF0gPSBwcm9wO1xuXHQgICAgICBpZiAoaW5saW5lUHJvcHMgJiYgaGFzT3duKGlubGluZVByb3BzLCBwYXRoKSkge1xuXHQgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCBpbmxpbmVQcm9wc1twYXRoXSk7XG5cdCAgICAgIH1pZiAocmF3ID09PSBudWxsKSB7XG5cdCAgICAgICAgLy8gaW5pdGlhbGl6ZSBhYnNlbnQgcHJvcFxuXHQgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB1bmRlZmluZWQpO1xuXHQgICAgICB9IGVsc2UgaWYgKHByb3AuZHluYW1pYykge1xuXHQgICAgICAgIC8vIGR5bmFtaWMgcHJvcFxuXHQgICAgICAgIGlmIChwcm9wLm1vZGUgPT09IHByb3BCaW5kaW5nTW9kZXMuT05FX1RJTUUpIHtcblx0ICAgICAgICAgIC8vIG9uZSB0aW1lIGJpbmRpbmdcblx0ICAgICAgICAgIHZhbHVlID0gKHNjb3BlIHx8IHZtLl9jb250ZXh0IHx8IHZtKS4kZ2V0KHByb3AucGFyZW50UGF0aCk7XG5cdCAgICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBpZiAodm0uX2NvbnRleHQpIHtcblx0ICAgICAgICAgICAgLy8gZHluYW1pYyBiaW5kaW5nXG5cdCAgICAgICAgICAgIHZtLl9iaW5kRGlyKHtcblx0ICAgICAgICAgICAgICBuYW1lOiAncHJvcCcsXG5cdCAgICAgICAgICAgICAgZGVmOiBwcm9wRGVmLFxuXHQgICAgICAgICAgICAgIHByb3A6IHByb3Bcblx0ICAgICAgICAgICAgfSwgbnVsbCwgbnVsbCwgc2NvcGUpOyAvLyBlbCwgaG9zdCwgc2NvcGVcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgLy8gcm9vdCBpbnN0YW5jZVxuXHQgICAgICAgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2bS4kZ2V0KHByb3AucGFyZW50UGF0aCkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKHByb3Aub3B0aW1pemVkTGl0ZXJhbCkge1xuXHQgICAgICAgIC8vIG9wdGltaXplZCBsaXRlcmFsLCBjYXN0IGl0IGFuZCBqdXN0IHNldCBvbmNlXG5cdCAgICAgICAgdmFyIHN0cmlwcGVkID0gc3RyaXBRdW90ZXMocmF3KTtcblx0ICAgICAgICB2YWx1ZSA9IHN0cmlwcGVkID09PSByYXcgPyB0b0Jvb2xlYW4odG9OdW1iZXIocmF3KSkgOiBzdHJpcHBlZDtcblx0ICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIHN0cmluZyBsaXRlcmFsLCBidXQgd2UgbmVlZCB0byBjYXRlciBmb3Jcblx0ICAgICAgICAvLyBCb29sZWFuIHByb3BzIHdpdGggbm8gdmFsdWUsIG9yIHdpdGggc2FtZVxuXHQgICAgICAgIC8vIGxpdGVyYWwgdmFsdWUgKGUuZy4gZGlzYWJsZWQ9XCJkaXNhYmxlZFwiKVxuXHQgICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWxvYWRlci9pc3N1ZXMvMTgyXG5cdCAgICAgICAgdmFsdWUgPSBvcHRpb25zLnR5cGUgPT09IEJvb2xlYW4gJiYgKHJhdyA9PT0gJycgfHwgcmF3ID09PSBoeXBoZW5hdGUocHJvcC5uYW1lKSkgPyB0cnVlIDogcmF3O1xuXHQgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJvY2VzcyBhIHByb3Agd2l0aCBhIHJhd1ZhbHVlLCBhcHBseWluZyBuZWNlc3NhcnkgY29lcnNpb25zLFxuXHQgKiBkZWZhdWx0IHZhbHVlcyAmIGFzc2VydGlvbnMgYW5kIGNhbGwgdGhlIGdpdmVuIGNhbGxiYWNrIHdpdGhcblx0ICogcHJvY2Vzc2VkIHZhbHVlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3Bcblx0ICogQHBhcmFtIHsqfSByYXdWYWx1ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHJhd1ZhbHVlLCBmbikge1xuXHQgIHZhciBpc1NpbXBsZSA9IHByb3AuZHluYW1pYyAmJiBpc1NpbXBsZVBhdGgocHJvcC5wYXJlbnRQYXRoKTtcblx0ICB2YXIgdmFsdWUgPSByYXdWYWx1ZTtcblx0ICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgdmFsdWUgPSBnZXRQcm9wRGVmYXVsdFZhbHVlKHZtLCBwcm9wKTtcblx0ICB9XG5cdCAgdmFsdWUgPSBjb2VyY2VQcm9wKHByb3AsIHZhbHVlLCB2bSk7XG5cdCAgdmFyIGNvZXJjZWQgPSB2YWx1ZSAhPT0gcmF3VmFsdWU7XG5cdCAgaWYgKCFhc3NlcnRQcm9wKHByb3AsIHZhbHVlLCB2bSkpIHtcblx0ICAgIHZhbHVlID0gdW5kZWZpbmVkO1xuXHQgIH1cblx0ICBpZiAoaXNTaW1wbGUgJiYgIWNvZXJjZWQpIHtcblx0ICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgZm4odmFsdWUpO1xuXHQgICAgfSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGZuKHZhbHVlKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTZXQgYSBwcm9wJ3MgaW5pdGlhbCB2YWx1ZSBvbiBhIHZtIGFuZCBpdHMgZGF0YSBvYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKSB7XG5cdCAgcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgdmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgZGVmaW5lUmVhY3RpdmUodm0sIHByb3AucGF0aCwgdmFsdWUpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVXBkYXRlIGEgcHJvcCdzIHZhbHVlIG9uIGEgdm0uXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdXBkYXRlUHJvcCh2bSwgcHJvcCwgdmFsdWUpIHtcblx0ICBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCB2YWx1ZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICB2bVtwcm9wLnBhdGhdID0gdmFsdWU7XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgdGhlIGRlZmF1bHQgdmFsdWUgb2YgYSBwcm9wLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3Bcblx0ICogQHJldHVybiB7Kn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRQcm9wRGVmYXVsdFZhbHVlKHZtLCBwcm9wKSB7XG5cdCAgLy8gbm8gZGVmYXVsdCwgcmV0dXJuIHVuZGVmaW5lZFxuXHQgIHZhciBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xuXHQgIGlmICghaGFzT3duKG9wdGlvbnMsICdkZWZhdWx0JykpIHtcblx0ICAgIC8vIGFic2VudCBib29sZWFuIHZhbHVlIGRlZmF1bHRzIHRvIGZhbHNlXG5cdCAgICByZXR1cm4gb3B0aW9ucy50eXBlID09PSBCb29sZWFuID8gZmFsc2UgOiB1bmRlZmluZWQ7XG5cdCAgfVxuXHQgIHZhciBkZWYgPSBvcHRpb25zWydkZWZhdWx0J107XG5cdCAgLy8gd2FybiBhZ2FpbnN0IG5vbi1mYWN0b3J5IGRlZmF1bHRzIGZvciBPYmplY3QgJiBBcnJheVxuXHQgIGlmIChpc09iamVjdChkZWYpKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgZGVmYXVsdCB2YWx1ZSBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCI6ICcgKyAnUHJvcHMgd2l0aCB0eXBlIE9iamVjdC9BcnJheSBtdXN0IHVzZSBhIGZhY3RvcnkgZnVuY3Rpb24gJyArICd0byByZXR1cm4gdGhlIGRlZmF1bHQgdmFsdWUuJywgdm0pO1xuXHQgIH1cblx0ICAvLyBjYWxsIGZhY3RvcnkgZnVuY3Rpb24gZm9yIG5vbi1GdW5jdGlvbiB0eXBlc1xuXHQgIHJldHVybiB0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nICYmIG9wdGlvbnMudHlwZSAhPT0gRnVuY3Rpb24gPyBkZWYuY2FsbCh2bSkgOiBkZWY7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBc3NlcnQgd2hldGhlciBhIHByb3AgaXMgdmFsaWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXNzZXJ0UHJvcChwcm9wLCB2YWx1ZSwgdm0pIHtcblx0ICBpZiAoIXByb3Aub3B0aW9ucy5yZXF1aXJlZCAmJiAoIC8vIG5vbi1yZXF1aXJlZFxuXHQgIHByb3AucmF3ID09PSBudWxsIHx8IC8vIGFic2NlbnRcblx0ICB2YWx1ZSA9PSBudWxsKSAvLyBudWxsIG9yIHVuZGVmaW5lZFxuXHQgICkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICB2YXIgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcblx0ICB2YXIgdHlwZSA9IG9wdGlvbnMudHlwZTtcblx0ICB2YXIgdmFsaWQgPSAhdHlwZTtcblx0ICB2YXIgZXhwZWN0ZWRUeXBlcyA9IFtdO1xuXHQgIGlmICh0eXBlKSB7XG5cdCAgICBpZiAoIWlzQXJyYXkodHlwZSkpIHtcblx0ICAgICAgdHlwZSA9IFt0eXBlXTtcblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHlwZS5sZW5ndGggJiYgIXZhbGlkOyBpKyspIHtcblx0ICAgICAgdmFyIGFzc2VydGVkVHlwZSA9IGFzc2VydFR5cGUodmFsdWUsIHR5cGVbaV0pO1xuXHQgICAgICBleHBlY3RlZFR5cGVzLnB1c2goYXNzZXJ0ZWRUeXBlLmV4cGVjdGVkVHlwZSk7XG5cdCAgICAgIHZhbGlkID0gYXNzZXJ0ZWRUeXBlLnZhbGlkO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoIXZhbGlkKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICB3YXJuKCdJbnZhbGlkIHByb3A6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIi4nICsgJyBFeHBlY3RlZCAnICsgZXhwZWN0ZWRUeXBlcy5tYXAoZm9ybWF0VHlwZSkuam9pbignLCAnKSArICcsIGdvdCAnICsgZm9ybWF0VmFsdWUodmFsdWUpICsgJy4nLCB2bSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciB2YWxpZGF0b3IgPSBvcHRpb25zLnZhbGlkYXRvcjtcblx0ICBpZiAodmFsaWRhdG9yKSB7XG5cdCAgICBpZiAoIXZhbGlkYXRvcih2YWx1ZSkpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHByb3A6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIi4nLCB2bSk7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JjZSBwYXJzaW5nIHZhbHVlIHdpdGggY29lcmNlIG9wdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHsqfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvZXJjZVByb3AocHJvcCwgdmFsdWUsIHZtKSB7XG5cdCAgdmFyIGNvZXJjZSA9IHByb3Aub3B0aW9ucy5jb2VyY2U7XG5cdCAgaWYgKCFjb2VyY2UpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBjb2VyY2UgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiBjb2VyY2UodmFsdWUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgY29lcmNlIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIjogZXhwZWN0ZWQgZnVuY3Rpb24sIGdvdCAnICsgdHlwZW9mIGNvZXJjZSArICcuJywgdm0pO1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEFzc2VydCB0aGUgdHlwZSBvZiBhIHZhbHVlXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gdHlwZVxuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZSkge1xuXHQgIHZhciB2YWxpZDtcblx0ICB2YXIgZXhwZWN0ZWRUeXBlO1xuXHQgIGlmICh0eXBlID09PSBTdHJpbmcpIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdzdHJpbmcnO1xuXHQgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IE51bWJlcikge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ251bWJlcic7XG5cdCAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gQm9vbGVhbikge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ2Jvb2xlYW4nO1xuXHQgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IEZ1bmN0aW9uKSB7XG5cdCAgICBleHBlY3RlZFR5cGUgPSAnZnVuY3Rpb24nO1xuXHQgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IE9iamVjdCkge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ29iamVjdCc7XG5cdCAgICB2YWxpZCA9IGlzUGxhaW5PYmplY3QodmFsdWUpO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gQXJyYXkpIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdhcnJheSc7XG5cdCAgICB2YWxpZCA9IGlzQXJyYXkodmFsdWUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YWxpZCA9IHZhbHVlIGluc3RhbmNlb2YgdHlwZTtcblx0ICB9XG5cdCAgcmV0dXJuIHtcblx0ICAgIHZhbGlkOiB2YWxpZCxcblx0ICAgIGV4cGVjdGVkVHlwZTogZXhwZWN0ZWRUeXBlXG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcm1hdCB0eXBlIGZvciBvdXRwdXRcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFR5cGUodHlwZSkge1xuXHQgIHJldHVybiB0eXBlID8gdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR5cGUuc2xpY2UoMSkgOiAnY3VzdG9tIHR5cGUnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9ybWF0IHZhbHVlXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFZhbHVlKHZhbCkge1xuXHQgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKS5zbGljZSg4LCAtMSk7XG5cdH1cblx0XG5cdHZhciBiaW5kaW5nTW9kZXMgPSBjb25maWcuX3Byb3BCaW5kaW5nTW9kZXM7XG5cdFxuXHR2YXIgcHJvcERlZiA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBjaGlsZCA9IHRoaXMudm07XG5cdCAgICB2YXIgcGFyZW50ID0gY2hpbGQuX2NvbnRleHQ7XG5cdCAgICAvLyBwYXNzZWQgaW4gZnJvbSBjb21waWxlciBkaXJlY3RseVxuXHQgICAgdmFyIHByb3AgPSB0aGlzLmRlc2NyaXB0b3IucHJvcDtcblx0ICAgIHZhciBjaGlsZEtleSA9IHByb3AucGF0aDtcblx0ICAgIHZhciBwYXJlbnRLZXkgPSBwcm9wLnBhcmVudFBhdGg7XG5cdCAgICB2YXIgdHdvV2F5ID0gcHJvcC5tb2RlID09PSBiaW5kaW5nTW9kZXMuVFdPX1dBWTtcblx0XG5cdCAgICB2YXIgcGFyZW50V2F0Y2hlciA9IHRoaXMucGFyZW50V2F0Y2hlciA9IG5ldyBXYXRjaGVyKHBhcmVudCwgcGFyZW50S2V5LCBmdW5jdGlvbiAodmFsKSB7XG5cdCAgICAgIHVwZGF0ZVByb3AoY2hpbGQsIHByb3AsIHZhbCk7XG5cdCAgICB9LCB7XG5cdCAgICAgIHR3b1dheTogdHdvV2F5LFxuXHQgICAgICBmaWx0ZXJzOiBwcm9wLmZpbHRlcnMsXG5cdCAgICAgIC8vIGltcG9ydGFudDogcHJvcHMgbmVlZCB0byBiZSBvYnNlcnZlZCBvbiB0aGVcblx0ICAgICAgLy8gdi1mb3Igc2NvcGUgaWYgcHJlc2VudFxuXHQgICAgICBzY29wZTogdGhpcy5fc2NvcGVcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8vIHNldCB0aGUgY2hpbGQgaW5pdGlhbCB2YWx1ZS5cblx0ICAgIGluaXRQcm9wKGNoaWxkLCBwcm9wLCBwYXJlbnRXYXRjaGVyLnZhbHVlKTtcblx0XG5cdCAgICAvLyBzZXR1cCB0d28td2F5IGJpbmRpbmdcblx0ICAgIGlmICh0d29XYXkpIHtcblx0ICAgICAgLy8gaW1wb3J0YW50OiBkZWZlciB0aGUgY2hpbGQgd2F0Y2hlciBjcmVhdGlvbiB1bnRpbFxuXHQgICAgICAvLyB0aGUgY3JlYXRlZCBob29rIChhZnRlciBkYXRhIG9ic2VydmF0aW9uKVxuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIGNoaWxkLiRvbmNlKCdwcmUtaG9vazpjcmVhdGVkJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHNlbGYuY2hpbGRXYXRjaGVyID0gbmV3IFdhdGNoZXIoY2hpbGQsIGNoaWxkS2V5LCBmdW5jdGlvbiAodmFsKSB7XG5cdCAgICAgICAgICBwYXJlbnRXYXRjaGVyLnNldCh2YWwpO1xuXHQgICAgICAgIH0sIHtcblx0ICAgICAgICAgIC8vIGVuc3VyZSBzeW5jIHVwd2FyZCBiZWZvcmUgcGFyZW50IHN5bmMgZG93bi5cblx0ICAgICAgICAgIC8vIHRoaXMgaXMgbmVjZXNzYXJ5IGluIGNhc2VzIGUuZy4gdGhlIGNoaWxkXG5cdCAgICAgICAgICAvLyBtdXRhdGVzIGEgcHJvcCBhcnJheSwgdGhlbiByZXBsYWNlcyBpdC4gKCMxNjgzKVxuXHQgICAgICAgICAgc3luYzogdHJ1ZVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHRoaXMucGFyZW50V2F0Y2hlci50ZWFyZG93bigpO1xuXHQgICAgaWYgKHRoaXMuY2hpbGRXYXRjaGVyKSB7XG5cdCAgICAgIHRoaXMuY2hpbGRXYXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHF1ZXVlJDEgPSBbXTtcblx0dmFyIHF1ZXVlZCA9IGZhbHNlO1xuXHRcblx0LyoqXG5cdCAqIFB1c2ggYSBqb2IgaW50byB0aGUgcXVldWUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGpvYlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHB1c2hKb2Ioam9iKSB7XG5cdCAgcXVldWUkMS5wdXNoKGpvYik7XG5cdCAgaWYgKCFxdWV1ZWQpIHtcblx0ICAgIHF1ZXVlZCA9IHRydWU7XG5cdCAgICBuZXh0VGljayhmbHVzaCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRmx1c2ggdGhlIHF1ZXVlLCBhbmQgZG8gb25lIGZvcmNlZCByZWZsb3cgYmVmb3JlXG5cdCAqIHRyaWdnZXJpbmcgdHJhbnNpdGlvbnMuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZmx1c2goKSB7XG5cdCAgLy8gRm9yY2UgbGF5b3V0XG5cdCAgdmFyIGYgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUkMS5sZW5ndGg7IGkrKykge1xuXHQgICAgcXVldWUkMVtpXSgpO1xuXHQgIH1cblx0ICBxdWV1ZSQxID0gW107XG5cdCAgcXVldWVkID0gZmFsc2U7XG5cdCAgLy8gZHVtbXkgcmV0dXJuLCBzbyBqcyBsaW50ZXJzIGRvbid0IGNvbXBsYWluIGFib3V0XG5cdCAgLy8gdW51c2VkIHZhcmlhYmxlIGZcblx0ICByZXR1cm4gZjtcblx0fVxuXHRcblx0dmFyIFRZUEVfVFJBTlNJVElPTiA9ICd0cmFuc2l0aW9uJztcblx0dmFyIFRZUEVfQU5JTUFUSU9OID0gJ2FuaW1hdGlvbic7XG5cdHZhciB0cmFuc0R1cmF0aW9uUHJvcCA9IHRyYW5zaXRpb25Qcm9wICsgJ0R1cmF0aW9uJztcblx0dmFyIGFuaW1EdXJhdGlvblByb3AgPSBhbmltYXRpb25Qcm9wICsgJ0R1cmF0aW9uJztcblx0XG5cdC8qKlxuXHQgKiBJZiBhIGp1c3QtZW50ZXJlZCBlbGVtZW50IGlzIGFwcGxpZWQgdGhlXG5cdCAqIGxlYXZlIGNsYXNzIHdoaWxlIGl0cyBlbnRlciB0cmFuc2l0aW9uIGhhc24ndCBzdGFydGVkIHlldCxcblx0ICogYW5kIHRoZSB0cmFuc2l0aW9uZWQgcHJvcGVydHkgaGFzIHRoZSBzYW1lIHZhbHVlIGZvciBib3RoXG5cdCAqIGVudGVyL2xlYXZlLCB0aGVuIHRoZSBsZWF2ZSB0cmFuc2l0aW9uIHdpbGwgYmUgc2tpcHBlZCBhbmRcblx0ICogdGhlIHRyYW5zaXRpb25lbmQgZXZlbnQgbmV2ZXIgZmlyZXMuIFRoaXMgZnVuY3Rpb24gZW5zdXJlc1xuXHQgKiBpdHMgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIGFmdGVyIGEgdHJhbnNpdGlvbiBoYXMgc3RhcnRlZFxuXHQgKiBieSB3YWl0aW5nIGZvciBkb3VibGUgcmFmLlxuXHQgKlxuXHQgKiBJdCBmYWxscyBiYWNrIHRvIHNldFRpbWVvdXQgb24gZGV2aWNlcyB0aGF0IHN1cHBvcnQgQ1NTXG5cdCAqIHRyYW5zaXRpb25zIGJ1dCBub3QgcmFmIChlLmcuIEFuZHJvaWQgNC4yIGJyb3dzZXIpIC0gc2luY2Vcblx0ICogdGhlc2UgZW52aXJvbm1lbnRzIGFyZSB1c3VhbGx5IHNsb3csIHdlIGFyZSBnaXZpbmcgaXQgYVxuXHQgKiByZWxhdGl2ZWx5IGxhcmdlIHRpbWVvdXQuXG5cdCAqL1xuXHRcblx0dmFyIHJhZiA9IGluQnJvd3NlciAmJiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuXHR2YXIgd2FpdEZvclRyYW5zaXRpb25TdGFydCA9IHJhZlxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHQ/IGZ1bmN0aW9uIChmbikge1xuXHQgIHJhZihmdW5jdGlvbiAoKSB7XG5cdCAgICByYWYoZm4pO1xuXHQgIH0pO1xuXHR9IDogZnVuY3Rpb24gKGZuKSB7XG5cdCAgc2V0VGltZW91dChmbiwgNTApO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEEgVHJhbnNpdGlvbiBvYmplY3QgdGhhdCBlbmNhcHN1bGF0ZXMgdGhlIHN0YXRlIGFuZCBsb2dpY1xuXHQgKiBvZiB0aGUgdHJhbnNpdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaWRcblx0ICogQHBhcmFtIHtPYmplY3R9IGhvb2tzXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0ZnVuY3Rpb24gVHJhbnNpdGlvbihlbCwgaWQsIGhvb2tzLCB2bSkge1xuXHQgIHRoaXMuaWQgPSBpZDtcblx0ICB0aGlzLmVsID0gZWw7XG5cdCAgdGhpcy5lbnRlckNsYXNzID0gaG9va3MgJiYgaG9va3MuZW50ZXJDbGFzcyB8fCBpZCArICctZW50ZXInO1xuXHQgIHRoaXMubGVhdmVDbGFzcyA9IGhvb2tzICYmIGhvb2tzLmxlYXZlQ2xhc3MgfHwgaWQgKyAnLWxlYXZlJztcblx0ICB0aGlzLmhvb2tzID0gaG9va3M7XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIC8vIGFzeW5jIHN0YXRlXG5cdCAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IHRoaXMub3AgPSB0aGlzLmNiID0gbnVsbDtcblx0ICB0aGlzLmp1c3RFbnRlcmVkID0gZmFsc2U7XG5cdCAgdGhpcy5lbnRlcmVkID0gdGhpcy5sZWZ0ID0gZmFsc2U7XG5cdCAgdGhpcy50eXBlQ2FjaGUgPSB7fTtcblx0ICAvLyBjaGVjayBjc3MgdHJhbnNpdGlvbiB0eXBlXG5cdCAgdGhpcy50eXBlID0gaG9va3MgJiYgaG9va3MudHlwZTtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgaWYgKHRoaXMudHlwZSAmJiB0aGlzLnR5cGUgIT09IFRZUEVfVFJBTlNJVElPTiAmJiB0aGlzLnR5cGUgIT09IFRZUEVfQU5JTUFUSU9OKSB7XG5cdCAgICAgIHdhcm4oJ2ludmFsaWQgQ1NTIHRyYW5zaXRpb24gdHlwZSBmb3IgdHJhbnNpdGlvbj1cIicgKyB0aGlzLmlkICsgJ1wiOiAnICsgdGhpcy50eXBlLCB2bSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIGJpbmRcblx0ICB2YXIgc2VsZiA9IHRoaXM7WydlbnRlck5leHRUaWNrJywgJ2VudGVyRG9uZScsICdsZWF2ZU5leHRUaWNrJywgJ2xlYXZlRG9uZSddLmZvckVhY2goZnVuY3Rpb24gKG0pIHtcblx0ICAgIHNlbGZbbV0gPSBiaW5kKHNlbGZbbV0sIHNlbGYpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHR2YXIgcCQxID0gVHJhbnNpdGlvbi5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogU3RhcnQgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbi5cblx0ICpcblx0ICogMS4gZW50ZXIgdHJhbnNpdGlvbiB0cmlnZ2VyZWRcblx0ICogMi4gY2FsbCBiZWZvcmVFbnRlciBob29rXG5cdCAqIDMuIGFkZCBlbnRlciBjbGFzc1xuXHQgKiA0LiBpbnNlcnQvc2hvdyBlbGVtZW50XG5cdCAqIDUuIGNhbGwgZW50ZXIgaG9vayAod2l0aCBwb3NzaWJsZSBleHBsaWNpdCBqcyBjYWxsYmFjaylcblx0ICogNi4gcmVmbG93XG5cdCAqIDcuIGJhc2VkIG9uIHRyYW5zaXRpb24gdHlwZTpcblx0ICogICAgLSB0cmFuc2l0aW9uOlxuXHQgKiAgICAgICAgcmVtb3ZlIGNsYXNzIG5vdywgd2FpdCBmb3IgdHJhbnNpdGlvbmVuZCxcblx0ICogICAgICAgIHRoZW4gZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuXHQgKiAgICAtIGFuaW1hdGlvbjpcblx0ICogICAgICAgIHdhaXQgZm9yIGFuaW1hdGlvbmVuZCwgcmVtb3ZlIGNsYXNzLFxuXHQgKiAgICAgICAgdGhlbiBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG5cdCAqICAgIC0gbm8gY3NzIHRyYW5zaXRpb246XG5cdCAqICAgICAgICBkb25lIG5vdyBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuXHQgKiA4LiB3YWl0IGZvciBlaXRoZXIgZG9uZSBvciBqcyBjYWxsYmFjaywgdGhlbiBjYWxsXG5cdCAqICAgIGFmdGVyRW50ZXIgaG9vay5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSBpbnNlcnQvc2hvdyB0aGUgZWxlbWVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0cCQxLmVudGVyID0gZnVuY3Rpb24gKG9wLCBjYikge1xuXHQgIHRoaXMuY2FuY2VsUGVuZGluZygpO1xuXHQgIHRoaXMuY2FsbEhvb2soJ2JlZm9yZUVudGVyJyk7XG5cdCAgdGhpcy5jYiA9IGNiO1xuXHQgIGFkZENsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgb3AoKTtcblx0ICB0aGlzLmVudGVyZWQgPSBmYWxzZTtcblx0ICB0aGlzLmNhbGxIb29rV2l0aENiKCdlbnRlcicpO1xuXHQgIGlmICh0aGlzLmVudGVyZWQpIHtcblx0ICAgIHJldHVybjsgLy8gdXNlciBjYWxsZWQgZG9uZSBzeW5jaHJvbm91c2x5LlxuXHQgIH1cblx0ICB0aGlzLmNhbmNlbCA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5lbnRlckNhbmNlbGxlZDtcblx0ICBwdXNoSm9iKHRoaXMuZW50ZXJOZXh0VGljayk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogVGhlIFwibmV4dFRpY2tcIiBwaGFzZSBvZiBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLCB3aGljaCBpc1xuXHQgKiB0byBiZSBwdXNoZWQgaW50byBhIHF1ZXVlIGFuZCBleGVjdXRlZCBhZnRlciBhIHJlZmxvdyBzb1xuXHQgKiB0aGF0IHJlbW92aW5nIHRoZSBjbGFzcyBjYW4gdHJpZ2dlciBhIENTUyB0cmFuc2l0aW9uLlxuXHQgKi9cblx0XG5cdHAkMS5lbnRlck5leHRUaWNrID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgIC8vIHByZXZlbnQgdHJhbnNpdGlvbiBza2lwcGluZ1xuXHQgIHRoaXMuanVzdEVudGVyZWQgPSB0cnVlO1xuXHQgIHdhaXRGb3JUcmFuc2l0aW9uU3RhcnQoZnVuY3Rpb24gKCkge1xuXHQgICAgX3RoaXMuanVzdEVudGVyZWQgPSBmYWxzZTtcblx0ICB9KTtcblx0ICB2YXIgZW50ZXJEb25lID0gdGhpcy5lbnRlckRvbmU7XG5cdCAgdmFyIHR5cGUgPSB0aGlzLmdldENzc1RyYW5zaXRpb25UeXBlKHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgaWYgKCF0aGlzLnBlbmRpbmdKc0NiKSB7XG5cdCAgICBpZiAodHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OKSB7XG5cdCAgICAgIC8vIHRyaWdnZXIgdHJhbnNpdGlvbiBieSByZW1vdmluZyBlbnRlciBjbGFzcyBub3dcblx0ICAgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcblx0ICAgICAgdGhpcy5zZXR1cENzc0NiKHRyYW5zaXRpb25FbmRFdmVudCwgZW50ZXJEb25lKTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gVFlQRV9BTklNQVRJT04pIHtcblx0ICAgICAgdGhpcy5zZXR1cENzc0NiKGFuaW1hdGlvbkVuZEV2ZW50LCBlbnRlckRvbmUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZW50ZXJEb25lKCk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSBUWVBFX1RSQU5TSVRJT04pIHtcblx0ICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFRoZSBcImNsZWFudXBcIiBwaGFzZSBvZiBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLlxuXHQgKi9cblx0XG5cdHAkMS5lbnRlckRvbmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdGhpcy5lbnRlcmVkID0gdHJ1ZTtcblx0ICB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsO1xuXHQgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgdGhpcy5jYWxsSG9vaygnYWZ0ZXJFbnRlcicpO1xuXHQgIGlmICh0aGlzLmNiKSB0aGlzLmNiKCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogU3RhcnQgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIDEuIGxlYXZlIHRyYW5zaXRpb24gdHJpZ2dlcmVkLlxuXHQgKiAyLiBjYWxsIGJlZm9yZUxlYXZlIGhvb2tcblx0ICogMy4gYWRkIGxlYXZlIGNsYXNzICh0cmlnZ2VyIGNzcyB0cmFuc2l0aW9uKVxuXHQgKiA0LiBjYWxsIGxlYXZlIGhvb2sgKHdpdGggcG9zc2libGUgZXhwbGljaXQganMgY2FsbGJhY2spXG5cdCAqIDUuIHJlZmxvdyBpZiBubyBleHBsaWNpdCBqcyBjYWxsYmFjayBpcyBwcm92aWRlZFxuXHQgKiA2LiBiYXNlZCBvbiB0cmFuc2l0aW9uIHR5cGU6XG5cdCAqICAgIC0gdHJhbnNpdGlvbiBvciBhbmltYXRpb246XG5cdCAqICAgICAgICB3YWl0IGZvciBlbmQgZXZlbnQsIHJlbW92ZSBjbGFzcywgdGhlbiBkb25lIGlmXG5cdCAqICAgICAgICB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuXHQgKiAgICAtIG5vIGNzcyB0cmFuc2l0aW9uOlxuXHQgKiAgICAgICAgZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuXHQgKiA3LiB3YWl0IGZvciBlaXRoZXIgZG9uZSBvciBqcyBjYWxsYmFjaywgdGhlbiBjYWxsXG5cdCAqICAgIGFmdGVyTGVhdmUgaG9vay5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSByZW1vdmUvaGlkZSB0aGUgZWxlbWVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0cCQxLmxlYXZlID0gZnVuY3Rpb24gKG9wLCBjYikge1xuXHQgIHRoaXMuY2FuY2VsUGVuZGluZygpO1xuXHQgIHRoaXMuY2FsbEhvb2soJ2JlZm9yZUxlYXZlJyk7XG5cdCAgdGhpcy5vcCA9IG9wO1xuXHQgIHRoaXMuY2IgPSBjYjtcblx0ICBhZGRDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuXHQgIHRoaXMubGVmdCA9IGZhbHNlO1xuXHQgIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2xlYXZlJyk7XG5cdCAgaWYgKHRoaXMubGVmdCkge1xuXHQgICAgcmV0dXJuOyAvLyB1c2VyIGNhbGxlZCBkb25lIHN5bmNocm9ub3VzbHkuXG5cdCAgfVxuXHQgIHRoaXMuY2FuY2VsID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmxlYXZlQ2FuY2VsbGVkO1xuXHQgIC8vIG9ubHkgbmVlZCB0byBoYW5kbGUgbGVhdmVEb25lIGlmXG5cdCAgLy8gMS4gdGhlIHRyYW5zaXRpb24gaXMgYWxyZWFkeSBkb25lIChzeW5jaHJvbm91c2x5IGNhbGxlZFxuXHQgIC8vICAgIGJ5IHRoZSB1c2VyLCB3aGljaCBjYXVzZXMgdGhpcy5vcCBzZXQgdG8gbnVsbClcblx0ICAvLyAyLiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrXG5cdCAgaWYgKHRoaXMub3AgJiYgIXRoaXMucGVuZGluZ0pzQ2IpIHtcblx0ICAgIC8vIGlmIGEgQ1NTIHRyYW5zaXRpb24gbGVhdmVzIGltbWVkaWF0ZWx5IGFmdGVyIGVudGVyLFxuXHQgICAgLy8gdGhlIHRyYW5zaXRpb25lbmQgZXZlbnQgbmV2ZXIgZmlyZXMuIHRoZXJlZm9yZSB3ZVxuXHQgICAgLy8gZGV0ZWN0IHN1Y2ggY2FzZXMgYW5kIGVuZCB0aGUgbGVhdmUgaW1tZWRpYXRlbHkuXG5cdCAgICBpZiAodGhpcy5qdXN0RW50ZXJlZCkge1xuXHQgICAgICB0aGlzLmxlYXZlRG9uZSgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcHVzaEpvYih0aGlzLmxlYXZlTmV4dFRpY2spO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgXCJuZXh0VGlja1wiIHBoYXNlIG9mIGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuXHQgKi9cblx0XG5cdHAkMS5sZWF2ZU5leHRUaWNrID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciB0eXBlID0gdGhpcy5nZXRDc3NUcmFuc2l0aW9uVHlwZSh0aGlzLmxlYXZlQ2xhc3MpO1xuXHQgIGlmICh0eXBlKSB7XG5cdCAgICB2YXIgZXZlbnQgPSB0eXBlID09PSBUWVBFX1RSQU5TSVRJT04gPyB0cmFuc2l0aW9uRW5kRXZlbnQgOiBhbmltYXRpb25FbmRFdmVudDtcblx0ICAgIHRoaXMuc2V0dXBDc3NDYihldmVudCwgdGhpcy5sZWF2ZURvbmUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLmxlYXZlRG9uZSgpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgXCJjbGVhbnVwXCIgcGhhc2Ugb2YgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG5cdCAqL1xuXHRcblx0cCQxLmxlYXZlRG9uZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB0aGlzLmxlZnQgPSB0cnVlO1xuXHQgIHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG5cdCAgdGhpcy5vcCgpO1xuXHQgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG5cdCAgdGhpcy5jYWxsSG9vaygnYWZ0ZXJMZWF2ZScpO1xuXHQgIGlmICh0aGlzLmNiKSB0aGlzLmNiKCk7XG5cdCAgdGhpcy5vcCA9IG51bGw7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2FuY2VsIGFueSBwZW5kaW5nIGNhbGxiYWNrcyBmcm9tIGEgcHJldmlvdXNseSBydW5uaW5nXG5cdCAqIGJ1dCBub3QgZmluaXNoZWQgdHJhbnNpdGlvbi5cblx0ICovXG5cdFxuXHRwJDEuY2FuY2VsUGVuZGluZyA9IGZ1bmN0aW9uICgpIHtcblx0ICB0aGlzLm9wID0gdGhpcy5jYiA9IG51bGw7XG5cdCAgdmFyIGhhc1BlbmRpbmcgPSBmYWxzZTtcblx0ICBpZiAodGhpcy5wZW5kaW5nQ3NzQ2IpIHtcblx0ICAgIGhhc1BlbmRpbmcgPSB0cnVlO1xuXHQgICAgb2ZmKHRoaXMuZWwsIHRoaXMucGVuZGluZ0Nzc0V2ZW50LCB0aGlzLnBlbmRpbmdDc3NDYik7XG5cdCAgICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gbnVsbDtcblx0ICB9XG5cdCAgaWYgKHRoaXMucGVuZGluZ0pzQ2IpIHtcblx0ICAgIGhhc1BlbmRpbmcgPSB0cnVlO1xuXHQgICAgdGhpcy5wZW5kaW5nSnNDYi5jYW5jZWwoKTtcblx0ICAgIHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsO1xuXHQgIH1cblx0ICBpZiAoaGFzUGVuZGluZykge1xuXHQgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcblx0ICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG5cdCAgfVxuXHQgIGlmICh0aGlzLmNhbmNlbCkge1xuXHQgICAgdGhpcy5jYW5jZWwuY2FsbCh0aGlzLnZtLCB0aGlzLmVsKTtcblx0ICAgIHRoaXMuY2FuY2VsID0gbnVsbDtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2FsbCBhIHVzZXItcHJvdmlkZWQgc3luY2hyb25vdXMgaG9vayBmdW5jdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICovXG5cdFxuXHRwJDEuY2FsbEhvb2sgPSBmdW5jdGlvbiAodHlwZSkge1xuXHQgIGlmICh0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV0pIHtcblx0ICAgIHRoaXMuaG9va3NbdHlwZV0uY2FsbCh0aGlzLnZtLCB0aGlzLmVsKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2FsbCBhIHVzZXItcHJvdmlkZWQsIHBvdGVudGlhbGx5LWFzeW5jIGhvb2sgZnVuY3Rpb24uXG5cdCAqIFdlIGNoZWNrIGZvciB0aGUgbGVuZ3RoIG9mIGFyZ3VtZW50cyB0byBzZWUgaWYgdGhlIGhvb2tcblx0ICogZXhwZWN0cyBhIGBkb25lYCBjYWxsYmFjay4gSWYgdHJ1ZSwgdGhlIHRyYW5zaXRpb24ncyBlbmRcblx0ICogd2lsbCBiZSBkZXRlcm1pbmVkIGJ5IHdoZW4gdGhlIHVzZXIgY2FsbHMgdGhhdCBjYWxsYmFjaztcblx0ICogb3RoZXJ3aXNlLCB0aGUgZW5kIGlzIGRldGVybWluZWQgYnkgdGhlIENTUyB0cmFuc2l0aW9uIG9yXG5cdCAqIGFuaW1hdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICovXG5cdFxuXHRwJDEuY2FsbEhvb2tXaXRoQ2IgPSBmdW5jdGlvbiAodHlwZSkge1xuXHQgIHZhciBob29rID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzW3R5cGVdO1xuXHQgIGlmIChob29rKSB7XG5cdCAgICBpZiAoaG9vay5sZW5ndGggPiAxKSB7XG5cdCAgICAgIHRoaXMucGVuZGluZ0pzQ2IgPSBjYW5jZWxsYWJsZSh0aGlzW3R5cGUgKyAnRG9uZSddKTtcblx0ICAgIH1cblx0ICAgIGhvb2suY2FsbCh0aGlzLnZtLCB0aGlzLmVsLCB0aGlzLnBlbmRpbmdKc0NiKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogR2V0IGFuIGVsZW1lbnQncyB0cmFuc2l0aW9uIHR5cGUgYmFzZWQgb24gdGhlXG5cdCAqIGNhbGN1bGF0ZWQgc3R5bGVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY2xhc3NOYW1lXG5cdCAqIEByZXR1cm4ge051bWJlcn1cblx0ICovXG5cdFxuXHRwJDEuZ2V0Q3NzVHJhbnNpdGlvblR5cGUgPSBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKCF0cmFuc2l0aW9uRW5kRXZlbnQgfHxcblx0ICAvLyBza2lwIENTUyB0cmFuc2l0aW9ucyBpZiBwYWdlIGlzIG5vdCB2aXNpYmxlIC1cblx0ICAvLyB0aGlzIHNvbHZlcyB0aGUgaXNzdWUgb2YgdHJhbnNpdGlvbmVuZCBldmVudHMgbm90XG5cdCAgLy8gZmlyaW5nIHVudGlsIHRoZSBwYWdlIGlzIHZpc2libGUgYWdhaW4uXG5cdCAgLy8gcGFnZVZpc2liaWxpdHkgQVBJIGlzIHN1cHBvcnRlZCBpbiBJRTEwKywgc2FtZSBhc1xuXHQgIC8vIENTUyB0cmFuc2l0aW9ucy5cblx0ICBkb2N1bWVudC5oaWRkZW4gfHxcblx0ICAvLyBleHBsaWNpdCBqcy1vbmx5IHRyYW5zaXRpb25cblx0ICB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MuY3NzID09PSBmYWxzZSB8fFxuXHQgIC8vIGVsZW1lbnQgaXMgaGlkZGVuXG5cdCAgaXNIaWRkZW4odGhpcy5lbCkpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIHR5cGUgPSB0aGlzLnR5cGUgfHwgdGhpcy50eXBlQ2FjaGVbY2xhc3NOYW1lXTtcblx0ICBpZiAodHlwZSkgcmV0dXJuIHR5cGU7XG5cdCAgdmFyIGlubGluZVN0eWxlcyA9IHRoaXMuZWwuc3R5bGU7XG5cdCAgdmFyIGNvbXB1dGVkU3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbCk7XG5cdCAgdmFyIHRyYW5zRHVyYXRpb24gPSBpbmxpbmVTdHlsZXNbdHJhbnNEdXJhdGlvblByb3BdIHx8IGNvbXB1dGVkU3R5bGVzW3RyYW5zRHVyYXRpb25Qcm9wXTtcblx0ICBpZiAodHJhbnNEdXJhdGlvbiAmJiB0cmFuc0R1cmF0aW9uICE9PSAnMHMnKSB7XG5cdCAgICB0eXBlID0gVFlQRV9UUkFOU0lUSU9OO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgYW5pbUR1cmF0aW9uID0gaW5saW5lU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdIHx8IGNvbXB1dGVkU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdO1xuXHQgICAgaWYgKGFuaW1EdXJhdGlvbiAmJiBhbmltRHVyYXRpb24gIT09ICcwcycpIHtcblx0ICAgICAgdHlwZSA9IFRZUEVfQU5JTUFUSU9OO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAodHlwZSkge1xuXHQgICAgdGhpcy50eXBlQ2FjaGVbY2xhc3NOYW1lXSA9IHR5cGU7XG5cdCAgfVxuXHQgIHJldHVybiB0eXBlO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFNldHVwIGEgQ1NTIHRyYW5zaXRpb25lbmQvYW5pbWF0aW9uZW5kIGNhbGxiYWNrLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICovXG5cdFxuXHRwJDEuc2V0dXBDc3NDYiA9IGZ1bmN0aW9uIChldmVudCwgY2IpIHtcblx0ICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IGV2ZW50O1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgIHZhciBvbkVuZCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgIGlmIChlLnRhcmdldCA9PT0gZWwpIHtcblx0ICAgICAgb2ZmKGVsLCBldmVudCwgb25FbmQpO1xuXHQgICAgICBzZWxmLnBlbmRpbmdDc3NFdmVudCA9IHNlbGYucGVuZGluZ0Nzc0NiID0gbnVsbDtcblx0ICAgICAgaWYgKCFzZWxmLnBlbmRpbmdKc0NiICYmIGNiKSB7XG5cdCAgICAgICAgY2IoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdCAgb24oZWwsIGV2ZW50LCBvbkVuZCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBoaWRkZW4gLSBpbiB0aGF0IGNhc2Ugd2UgY2FuIGp1c3Rcblx0ICogc2tpcCB0aGUgdHJhbnNpdGlvbiBhbGx0b2dldGhlci5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzSGlkZGVuKGVsKSB7XG5cdCAgaWYgKC9zdmckLy50ZXN0KGVsLm5hbWVzcGFjZVVSSSkpIHtcblx0ICAgIC8vIFNWRyBlbGVtZW50cyBkbyBub3QgaGF2ZSBvZmZzZXQoV2lkdGh8SGVpZ2h0KVxuXHQgICAgLy8gc28gd2UgbmVlZCB0byBjaGVjayB0aGUgY2xpZW50IHJlY3Rcblx0ICAgIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdCAgICByZXR1cm4gIShyZWN0LndpZHRoIHx8IHJlY3QuaGVpZ2h0KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuICEoZWwub2Zmc2V0V2lkdGggfHwgZWwub2Zmc2V0SGVpZ2h0IHx8IGVsLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciB0cmFuc2l0aW9uJDEgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBUUkFOU0lUSU9OLFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShpZCwgb2xkSWQpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICAvLyByZXNvbHZlIG9uIG93bmVyIHZtXG5cdCAgICB2YXIgaG9va3MgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3RyYW5zaXRpb25zJywgaWQpO1xuXHQgICAgaWQgPSBpZCB8fCAndic7XG5cdCAgICBvbGRJZCA9IG9sZElkIHx8ICd2Jztcblx0ICAgIGVsLl9fdl90cmFucyA9IG5ldyBUcmFuc2l0aW9uKGVsLCBpZCwgaG9va3MsIHRoaXMudm0pO1xuXHQgICAgcmVtb3ZlQ2xhc3MoZWwsIG9sZElkICsgJy10cmFuc2l0aW9uJyk7XG5cdCAgICBhZGRDbGFzcyhlbCwgaWQgKyAnLXRyYW5zaXRpb24nKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgaW50ZXJuYWxEaXJlY3RpdmVzID0ge1xuXHQgIHN0eWxlOiBzdHlsZSxcblx0ICAnY2xhc3MnOiB2Q2xhc3MsXG5cdCAgY29tcG9uZW50OiBjb21wb25lbnQsXG5cdCAgcHJvcDogcHJvcERlZixcblx0ICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uJDFcblx0fTtcblx0XG5cdC8vIHNwZWNpYWwgYmluZGluZyBwcmVmaXhlc1xuXHR2YXIgYmluZFJFID0gL152LWJpbmQ6fF46Lztcblx0dmFyIG9uUkUgPSAvXnYtb246fF5ALztcblx0dmFyIGRpckF0dHJSRSA9IC9edi0oW146XSspKD86JHw6KC4qKSQpLztcblx0dmFyIG1vZGlmaWVyUkUgPSAvXFwuW15cXC5dKy9nO1xuXHR2YXIgdHJhbnNpdGlvblJFID0gL14odi1iaW5kOnw6KT90cmFuc2l0aW9uJC87XG5cdFxuXHQvLyBkZWZhdWx0IGRpcmVjdGl2ZSBwcmlvcml0eVxuXHR2YXIgREVGQVVMVF9QUklPUklUWSA9IDEwMDA7XG5cdHZhciBERUZBVUxUX1RFUk1JTkFMX1BSSU9SSVRZID0gMjAwMDtcblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGEgdGVtcGxhdGUgYW5kIHJldHVybiBhIHJldXNhYmxlIGNvbXBvc2l0ZSBsaW5rXG5cdCAqIGZ1bmN0aW9uLCB3aGljaCByZWN1cnNpdmVseSBjb250YWlucyBtb3JlIGxpbmsgZnVuY3Rpb25zXG5cdCAqIGluc2lkZS4gVGhpcyB0b3AgbGV2ZWwgY29tcGlsZSBmdW5jdGlvbiB3b3VsZCBub3JtYWxseVxuXHQgKiBiZSBjYWxsZWQgb24gaW5zdGFuY2Ugcm9vdCBub2RlcywgYnV0IGNhbiBhbHNvIGJlIHVzZWRcblx0ICogZm9yIHBhcnRpYWwgY29tcGlsYXRpb24gaWYgdGhlIHBhcnRpYWwgYXJndW1lbnQgaXMgdHJ1ZS5cblx0ICpcblx0ICogVGhlIHJldHVybmVkIGNvbXBvc2l0ZSBsaW5rIGZ1bmN0aW9uLCB3aGVuIGNhbGxlZCwgd2lsbFxuXHQgKiByZXR1cm4gYW4gdW5saW5rIGZ1bmN0aW9uIHRoYXQgdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzXG5cdCAqIGNyZWF0ZWQgZHVyaW5nIHRoZSBsaW5raW5nIHBoYXNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHBhcmFtIHtCb29sZWFufSBwYXJ0aWFsXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGUoZWwsIG9wdGlvbnMsIHBhcnRpYWwpIHtcblx0ICAvLyBsaW5rIGZ1bmN0aW9uIGZvciB0aGUgbm9kZSBpdHNlbGYuXG5cdCAgdmFyIG5vZGVMaW5rRm4gPSBwYXJ0aWFsIHx8ICFvcHRpb25zLl9hc0NvbXBvbmVudCA/IGNvbXBpbGVOb2RlKGVsLCBvcHRpb25zKSA6IG51bGw7XG5cdCAgLy8gbGluayBmdW5jdGlvbiBmb3IgdGhlIGNoaWxkTm9kZXNcblx0ICB2YXIgY2hpbGRMaW5rRm4gPSAhKG5vZGVMaW5rRm4gJiYgbm9kZUxpbmtGbi50ZXJtaW5hbCkgJiYgIWlzU2NyaXB0KGVsKSAmJiBlbC5oYXNDaGlsZE5vZGVzKCkgPyBjb21waWxlTm9kZUxpc3QoZWwuY2hpbGROb2Rlcywgb3B0aW9ucykgOiBudWxsO1xuXHRcblx0ICAvKipcblx0ICAgKiBBIGNvbXBvc2l0ZSBsaW5rZXIgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGEgYWxyZWFkeVxuXHQgICAqIGNvbXBpbGVkIHBpZWNlIG9mIERPTSwgd2hpY2ggaW5zdGFudGlhdGVzIGFsbCBkaXJlY3RpdmVcblx0ICAgKiBpbnN0YW5jZXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gaG9zdCB2bSBvZiB0cmFuc2NsdWRlZCBjb250ZW50XG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIGxpbmsgY29udGV4dCBmcmFnbWVudFxuXHQgICAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cblx0ICAgKi9cblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGNvbXBvc2l0ZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICAvLyBjYWNoZSBjaGlsZE5vZGVzIGJlZm9yZSBsaW5raW5nIHBhcmVudCwgZml4ICM2NTdcblx0ICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShlbC5jaGlsZE5vZGVzKTtcblx0ICAgIC8vIGxpbmtcblx0ICAgIHZhciBkaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gY29tcG9zaXRlTGlua0NhcHR1cmVyKCkge1xuXHQgICAgICBpZiAobm9kZUxpbmtGbikgbm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgICAgaWYgKGNoaWxkTGlua0ZuKSBjaGlsZExpbmtGbih2bSwgY2hpbGROb2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgfSwgdm0pO1xuXHQgICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgZGlycyk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFwcGx5IGEgbGlua2VyIHRvIGEgdm0vZWxlbWVudCBwYWlyIGFuZCBjYXB0dXJlIHRoZVxuXHQgKiBkaXJlY3RpdmVzIGNyZWF0ZWQgZHVyaW5nIHRoZSBwcm9jZXNzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaW5rZXJcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbGlua0FuZENhcHR1cmUobGlua2VyLCB2bSkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAvLyByZXNldCBkaXJlY3RpdmVzIGJlZm9yZSBldmVyeSBjYXB0dXJlIGluIHByb2R1Y3Rpb25cblx0ICAgIC8vIG1vZGUsIHNvIHRoYXQgd2hlbiB1bmxpbmtpbmcgd2UgZG9uJ3QgbmVlZCB0byBzcGxpY2Vcblx0ICAgIC8vIHRoZW0gb3V0ICh3aGljaCB0dXJucyBvdXQgdG8gYmUgYSBwZXJmIGhpdCkuXG5cdCAgICAvLyB0aGV5IGFyZSBrZXB0IGluIGRldmVsb3BtZW50IG1vZGUgYmVjYXVzZSB0aGV5IGFyZVxuXHQgICAgLy8gdXNlZnVsIGZvciBWdWUncyBvd24gdGVzdHMuXG5cdCAgICB2bS5fZGlyZWN0aXZlcyA9IFtdO1xuXHQgIH1cblx0ICB2YXIgb3JpZ2luYWxEaXJDb3VudCA9IHZtLl9kaXJlY3RpdmVzLmxlbmd0aDtcblx0ICBsaW5rZXIoKTtcblx0ICB2YXIgZGlycyA9IHZtLl9kaXJlY3RpdmVzLnNsaWNlKG9yaWdpbmFsRGlyQ291bnQpO1xuXHQgIGRpcnMuc29ydChkaXJlY3RpdmVDb21wYXJhdG9yKTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBkaXJzW2ldLl9iaW5kKCk7XG5cdCAgfVxuXHQgIHJldHVybiBkaXJzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGlyZWN0aXZlIHByaW9yaXR5IHNvcnQgY29tcGFyYXRvclxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gYVxuXHQgKiBAcGFyYW0ge09iamVjdH0gYlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGRpcmVjdGl2ZUNvbXBhcmF0b3IoYSwgYikge1xuXHQgIGEgPSBhLmRlc2NyaXB0b3IuZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfUFJJT1JJVFk7XG5cdCAgYiA9IGIuZGVzY3JpcHRvci5kZWYucHJpb3JpdHkgfHwgREVGQVVMVF9QUklPUklUWTtcblx0ICByZXR1cm4gYSA+IGIgPyAtMSA6IGEgPT09IGIgPyAwIDogMTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIExpbmtlciBmdW5jdGlvbnMgcmV0dXJuIGFuIHVubGluayBmdW5jdGlvbiB0aGF0XG5cdCAqIHRlYXJzZG93biBhbGwgZGlyZWN0aXZlcyBpbnN0YW5jZXMgZ2VuZXJhdGVkIGR1cmluZ1xuXHQgKiB0aGUgcHJvY2Vzcy5cblx0ICpcblx0ICogV2UgY3JlYXRlIHVubGluayBmdW5jdGlvbnMgd2l0aCBvbmx5IHRoZSBuZWNlc3Nhcnlcblx0ICogaW5mb3JtYXRpb24gdG8gYXZvaWQgcmV0YWluaW5nIGFkZGl0aW9uYWwgY2xvc3VyZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0FycmF5fSBkaXJzXG5cdCAqIEBwYXJhbSB7VnVlfSBbY29udGV4dF1cblx0ICogQHBhcmFtIHtBcnJheX0gW2NvbnRleHREaXJzXVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlVW5saW5rRm4odm0sIGRpcnMsIGNvbnRleHQsIGNvbnRleHREaXJzKSB7XG5cdCAgZnVuY3Rpb24gdW5saW5rKGRlc3Ryb3lpbmcpIHtcblx0ICAgIHRlYXJkb3duRGlycyh2bSwgZGlycywgZGVzdHJveWluZyk7XG5cdCAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0RGlycykge1xuXHQgICAgICB0ZWFyZG93bkRpcnMoY29udGV4dCwgY29udGV4dERpcnMpO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyBleHBvc2UgbGlua2VkIGRpcmVjdGl2ZXNcblx0ICB1bmxpbmsuZGlycyA9IGRpcnM7XG5cdCAgcmV0dXJuIHVubGluaztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRlYXJkb3duIHBhcnRpYWwgbGlua2VkIGRpcmVjdGl2ZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0FycmF5fSBkaXJzXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVzdHJveWluZ1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRlYXJkb3duRGlycyh2bSwgZGlycywgZGVzdHJveWluZykge1xuXHQgIHZhciBpID0gZGlycy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgZGlyc1tpXS5fdGVhcmRvd24oKTtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFkZXN0cm95aW5nKSB7XG5cdCAgICAgIHZtLl9kaXJlY3RpdmVzLiRyZW1vdmUoZGlyc1tpXSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBsaW5rIHByb3BzIG9uIGFuIGluc3RhbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcHNcblx0ICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZUFuZExpbmtQcm9wcyh2bSwgZWwsIHByb3BzLCBzY29wZSkge1xuXHQgIHZhciBwcm9wc0xpbmtGbiA9IGNvbXBpbGVQcm9wcyhlbCwgcHJvcHMsIHZtKTtcblx0ICB2YXIgcHJvcERpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG5cdCAgICBwcm9wc0xpbmtGbih2bSwgc2NvcGUpO1xuXHQgIH0sIHZtKTtcblx0ICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBwcm9wRGlycyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIHRoZSByb290IGVsZW1lbnQgb2YgYW4gaW5zdGFuY2UuXG5cdCAqXG5cdCAqIDEuIGF0dHJzIG9uIGNvbnRleHQgY29udGFpbmVyIChjb250ZXh0IHNjb3BlKVxuXHQgKiAyLiBhdHRycyBvbiB0aGUgY29tcG9uZW50IHRlbXBsYXRlIHJvb3Qgbm9kZSwgaWZcblx0ICogICAgcmVwbGFjZTp0cnVlIChjaGlsZCBzY29wZSlcblx0ICpcblx0ICogSWYgdGhpcyBpcyBhIGZyYWdtZW50IGluc3RhbmNlLCB3ZSBvbmx5IG5lZWQgdG8gY29tcGlsZSAxLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0T3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlUm9vdChlbCwgb3B0aW9ucywgY29udGV4dE9wdGlvbnMpIHtcblx0ICB2YXIgY29udGFpbmVyQXR0cnMgPSBvcHRpb25zLl9jb250YWluZXJBdHRycztcblx0ICB2YXIgcmVwbGFjZXJBdHRycyA9IG9wdGlvbnMuX3JlcGxhY2VyQXR0cnM7XG5cdCAgdmFyIGNvbnRleHRMaW5rRm4sIHJlcGxhY2VyTGlua0ZuO1xuXHRcblx0ICAvLyBvbmx5IG5lZWQgdG8gY29tcGlsZSBvdGhlciBhdHRyaWJ1dGVzIGZvclxuXHQgIC8vIG5vbi1mcmFnbWVudCBpbnN0YW5jZXNcblx0ICBpZiAoZWwubm9kZVR5cGUgIT09IDExKSB7XG5cdCAgICAvLyBmb3IgY29tcG9uZW50cywgY29udGFpbmVyIGFuZCByZXBsYWNlciBuZWVkIHRvIGJlXG5cdCAgICAvLyBjb21waWxlZCBzZXBhcmF0ZWx5IGFuZCBsaW5rZWQgaW4gZGlmZmVyZW50IHNjb3Blcy5cblx0ICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCkge1xuXHQgICAgICAvLyAyLiBjb250YWluZXIgYXR0cmlidXRlc1xuXHQgICAgICBpZiAoY29udGFpbmVyQXR0cnMgJiYgY29udGV4dE9wdGlvbnMpIHtcblx0ICAgICAgICBjb250ZXh0TGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoY29udGFpbmVyQXR0cnMsIGNvbnRleHRPcHRpb25zKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAocmVwbGFjZXJBdHRycykge1xuXHQgICAgICAgIC8vIDMuIHJlcGxhY2VyIGF0dHJpYnV0ZXNcblx0ICAgICAgICByZXBsYWNlckxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKHJlcGxhY2VyQXR0cnMsIG9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBub24tY29tcG9uZW50LCBqdXN0IGNvbXBpbGUgYXMgYSBub3JtYWwgZWxlbWVudC5cblx0ICAgICAgcmVwbGFjZXJMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhlbC5hdHRyaWJ1dGVzLCBvcHRpb25zKTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29udGFpbmVyQXR0cnMpIHtcblx0ICAgIC8vIHdhcm4gY29udGFpbmVyIGRpcmVjdGl2ZXMgZm9yIGZyYWdtZW50IGluc3RhbmNlc1xuXHQgICAgdmFyIG5hbWVzID0gY29udGFpbmVyQXR0cnMuZmlsdGVyKGZ1bmN0aW9uIChhdHRyKSB7XG5cdCAgICAgIC8vIGFsbG93IHZ1ZS1sb2FkZXIvdnVlaWZ5IHNjb3BlZCBjc3MgYXR0cmlidXRlc1xuXHQgICAgICByZXR1cm4gYXR0ci5uYW1lLmluZGV4T2YoJ192LScpIDwgMCAmJlxuXHQgICAgICAvLyBhbGxvdyBldmVudCBsaXN0ZW5lcnNcblx0ICAgICAgIW9uUkUudGVzdChhdHRyLm5hbWUpICYmXG5cdCAgICAgIC8vIGFsbG93IHNsb3RzXG5cdCAgICAgIGF0dHIubmFtZSAhPT0gJ3Nsb3QnO1xuXHQgICAgfSkubWFwKGZ1bmN0aW9uIChhdHRyKSB7XG5cdCAgICAgIHJldHVybiAnXCInICsgYXR0ci5uYW1lICsgJ1wiJztcblx0ICAgIH0pO1xuXHQgICAgaWYgKG5hbWVzLmxlbmd0aCkge1xuXHQgICAgICB2YXIgcGx1cmFsID0gbmFtZXMubGVuZ3RoID4gMTtcblx0ICAgICAgd2FybignQXR0cmlidXRlJyArIChwbHVyYWwgPyAncyAnIDogJyAnKSArIG5hbWVzLmpvaW4oJywgJykgKyAocGx1cmFsID8gJyBhcmUnIDogJyBpcycpICsgJyBpZ25vcmVkIG9uIGNvbXBvbmVudCAnICsgJzwnICsgb3B0aW9ucy5lbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyAnPiBiZWNhdXNlICcgKyAndGhlIGNvbXBvbmVudCBpcyBhIGZyYWdtZW50IGluc3RhbmNlOiAnICsgJ2h0dHA6Ly92dWVqcy5vcmcvZ3VpZGUvY29tcG9uZW50cy5odG1sI0ZyYWdtZW50LUluc3RhbmNlJyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBvcHRpb25zLl9jb250YWluZXJBdHRycyA9IG9wdGlvbnMuX3JlcGxhY2VyQXR0cnMgPSBudWxsO1xuXHQgIHJldHVybiBmdW5jdGlvbiByb290TGlua0ZuKHZtLCBlbCwgc2NvcGUpIHtcblx0ICAgIC8vIGxpbmsgY29udGV4dCBzY29wZSBkaXJzXG5cdCAgICB2YXIgY29udGV4dCA9IHZtLl9jb250ZXh0O1xuXHQgICAgdmFyIGNvbnRleHREaXJzO1xuXHQgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dExpbmtGbikge1xuXHQgICAgICBjb250ZXh0RGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBjb250ZXh0TGlua0ZuKGNvbnRleHQsIGVsLCBudWxsLCBzY29wZSk7XG5cdCAgICAgIH0sIGNvbnRleHQpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGxpbmsgc2VsZlxuXHQgICAgdmFyIHNlbGZEaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAocmVwbGFjZXJMaW5rRm4pIHJlcGxhY2VyTGlua0ZuKHZtLCBlbCk7XG5cdCAgICB9LCB2bSk7XG5cdFxuXHQgICAgLy8gcmV0dXJuIHRoZSB1bmxpbmsgZnVuY3Rpb24gdGhhdCB0ZWFyc2Rvd24gY29udGV4dFxuXHQgICAgLy8gY29udGFpbmVyIGRpcmVjdGl2ZXMuXG5cdCAgICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBzZWxmRGlycywgY29udGV4dCwgY29udGV4dERpcnMpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGEgbm9kZSBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbiBiYXNlZCBvbiB0aGVcblx0ICogbm9kZSB0eXBlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb258bnVsbH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKSB7XG5cdCAgdmFyIHR5cGUgPSBub2RlLm5vZGVUeXBlO1xuXHQgIGlmICh0eXBlID09PSAxICYmICFpc1NjcmlwdChub2RlKSkge1xuXHQgICAgcmV0dXJuIGNvbXBpbGVFbGVtZW50KG5vZGUsIG9wdGlvbnMpO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gMyAmJiBub2RlLmRhdGEudHJpbSgpKSB7XG5cdCAgICByZXR1cm4gY29tcGlsZVRleHROb2RlKG5vZGUsIG9wdGlvbnMpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb258bnVsbH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlRWxlbWVudChlbCwgb3B0aW9ucykge1xuXHQgIC8vIHByZXByb2Nlc3MgdGV4dGFyZWFzLlxuXHQgIC8vIHRleHRhcmVhIHRyZWF0cyBpdHMgdGV4dCBjb250ZW50IGFzIHRoZSBpbml0aWFsIHZhbHVlLlxuXHQgIC8vIGp1c3QgYmluZCBpdCBhcyBhbiBhdHRyIGRpcmVjdGl2ZSBmb3IgdmFsdWUuXG5cdCAgaWYgKGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcblx0ICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQoZWwudmFsdWUpO1xuXHQgICAgaWYgKHRva2Vucykge1xuXHQgICAgICBlbC5zZXRBdHRyaWJ1dGUoJzp2YWx1ZScsIHRva2Vuc1RvRXhwKHRva2VucykpO1xuXHQgICAgICBlbC52YWx1ZSA9ICcnO1xuXHQgICAgfVxuXHQgIH1cblx0ICB2YXIgbGlua0ZuO1xuXHQgIHZhciBoYXNBdHRycyA9IGVsLmhhc0F0dHJpYnV0ZXMoKTtcblx0ICB2YXIgYXR0cnMgPSBoYXNBdHRycyAmJiB0b0FycmF5KGVsLmF0dHJpYnV0ZXMpO1xuXHQgIC8vIGNoZWNrIHRlcm1pbmFsIGRpcmVjdGl2ZXMgKGZvciAmIGlmKVxuXHQgIGlmIChoYXNBdHRycykge1xuXHQgICAgbGlua0ZuID0gY2hlY2tUZXJtaW5hbERpcmVjdGl2ZXMoZWwsIGF0dHJzLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgLy8gY2hlY2sgZWxlbWVudCBkaXJlY3RpdmVzXG5cdCAgaWYgKCFsaW5rRm4pIHtcblx0ICAgIGxpbmtGbiA9IGNoZWNrRWxlbWVudERpcmVjdGl2ZXMoZWwsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICAvLyBjaGVjayBjb21wb25lbnRcblx0ICBpZiAoIWxpbmtGbikge1xuXHQgICAgbGlua0ZuID0gY2hlY2tDb21wb25lbnQoZWwsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICAvLyBub3JtYWwgZGlyZWN0aXZlc1xuXHQgIGlmICghbGlua0ZuICYmIGhhc0F0dHJzKSB7XG5cdCAgICBsaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhhdHRycywgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIHJldHVybiBsaW5rRm47XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGEgdGV4dE5vZGUgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7VGV4dE5vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb258bnVsbH0gdGV4dE5vZGVMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucykge1xuXHQgIC8vIHNraXAgbWFya2VkIHRleHQgbm9kZXNcblx0ICBpZiAobm9kZS5fc2tpcCkge1xuXHQgICAgcmV0dXJuIHJlbW92ZVRleHQ7XG5cdCAgfVxuXHRcblx0ICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KG5vZGUud2hvbGVUZXh0KTtcblx0ICBpZiAoIXRva2Vucykge1xuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHRcblx0ICAvLyBtYXJrIGFkamFjZW50IHRleHQgbm9kZXMgYXMgc2tpcHBlZCxcblx0ICAvLyBiZWNhdXNlIHdlIGFyZSB1c2luZyBub2RlLndob2xlVGV4dCB0byBjb21waWxlXG5cdCAgLy8gYWxsIGFkamFjZW50IHRleHQgbm9kZXMgdG9nZXRoZXIuIFRoaXMgZml4ZXNcblx0ICAvLyBpc3N1ZXMgaW4gSUUgd2hlcmUgc29tZXRpbWVzIGl0IHNwbGl0cyB1cCBhIHNpbmdsZVxuXHQgIC8vIHRleHQgbm9kZSBpbnRvIG11bHRpcGxlIG9uZXMuXG5cdCAgdmFyIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuXHQgIHdoaWxlIChuZXh0ICYmIG5leHQubm9kZVR5cGUgPT09IDMpIHtcblx0ICAgIG5leHQuX3NraXAgPSB0cnVlO1xuXHQgICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmc7XG5cdCAgfVxuXHRcblx0ICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0ICB2YXIgZWwsIHRva2VuO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdG9rZW4gPSB0b2tlbnNbaV07XG5cdCAgICBlbCA9IHRva2VuLnRhZyA/IHByb2Nlc3NUZXh0VG9rZW4odG9rZW4sIG9wdGlvbnMpIDogZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodG9rZW4udmFsdWUpO1xuXHQgICAgZnJhZy5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfVxuXHQgIHJldHVybiBtYWtlVGV4dE5vZGVMaW5rRm4odG9rZW5zLCBmcmFnLCBvcHRpb25zKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIExpbmtlciBmb3IgYW4gc2tpcHBlZCB0ZXh0IG5vZGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge1RleHR9IG5vZGVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZW1vdmVUZXh0KHZtLCBub2RlKSB7XG5cdCAgcmVtb3ZlKG5vZGUpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJvY2VzcyBhIHNpbmdsZSB0ZXh0IHRva2VuLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdG9rZW5cblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7Tm9kZX1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzVGV4dFRva2VuKHRva2VuLCBvcHRpb25zKSB7XG5cdCAgdmFyIGVsO1xuXHQgIGlmICh0b2tlbi5vbmVUaW1lKSB7XG5cdCAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRva2VuLnZhbHVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgaWYgKHRva2VuLmh0bWwpIHtcblx0ICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KCd2LWh0bWwnKTtcblx0ICAgICAgc2V0VG9rZW5UeXBlKCdodG1sJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBJRSB3aWxsIGNsZWFuIHVwIGVtcHR5IHRleHROb2RlcyBkdXJpbmdcblx0ICAgICAgLy8gZnJhZy5jbG9uZU5vZGUodHJ1ZSksIHNvIHdlIGhhdmUgdG8gZ2l2ZSBpdFxuXHQgICAgICAvLyBzb21ldGhpbmcgaGVyZS4uLlxuXHQgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcgJyk7XG5cdCAgICAgIHNldFRva2VuVHlwZSgndGV4dCcpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmdW5jdGlvbiBzZXRUb2tlblR5cGUodHlwZSkge1xuXHQgICAgaWYgKHRva2VuLmRlc2NyaXB0b3IpIHJldHVybjtcblx0ICAgIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh0b2tlbi52YWx1ZSk7XG5cdCAgICB0b2tlbi5kZXNjcmlwdG9yID0ge1xuXHQgICAgICBuYW1lOiB0eXBlLFxuXHQgICAgICBkZWY6IGRpcmVjdGl2ZXNbdHlwZV0sXG5cdCAgICAgIGV4cHJlc3Npb246IHBhcnNlZC5leHByZXNzaW9uLFxuXHQgICAgICBmaWx0ZXJzOiBwYXJzZWQuZmlsdGVyc1xuXHQgICAgfTtcblx0ICB9XG5cdCAgcmV0dXJuIGVsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQnVpbGQgYSBmdW5jdGlvbiB0aGF0IHByb2Nlc3NlcyBhIHRleHROb2RlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IHRva2Vuc1xuXHQgKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlVGV4dE5vZGVMaW5rRm4odG9rZW5zLCBmcmFnKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHRleHROb2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUpIHtcblx0ICAgIHZhciBmcmFnQ2xvbmUgPSBmcmFnLmNsb25lTm9kZSh0cnVlKTtcblx0ICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShmcmFnQ2xvbmUuY2hpbGROb2Rlcyk7XG5cdCAgICB2YXIgdG9rZW4sIHZhbHVlLCBub2RlO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0b2tlbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHRva2VuID0gdG9rZW5zW2ldO1xuXHQgICAgICB2YWx1ZSA9IHRva2VuLnZhbHVlO1xuXHQgICAgICBpZiAodG9rZW4udGFnKSB7XG5cdCAgICAgICAgbm9kZSA9IGNoaWxkTm9kZXNbaV07XG5cdCAgICAgICAgaWYgKHRva2VuLm9uZVRpbWUpIHtcblx0ICAgICAgICAgIHZhbHVlID0gKHNjb3BlIHx8IHZtKS4kZXZhbCh2YWx1ZSk7XG5cdCAgICAgICAgICBpZiAodG9rZW4uaHRtbCkge1xuXHQgICAgICAgICAgICByZXBsYWNlKG5vZGUsIHBhcnNlVGVtcGxhdGUodmFsdWUsIHRydWUpKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIG5vZGUuZGF0YSA9IF90b1N0cmluZyh2YWx1ZSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHZtLl9iaW5kRGlyKHRva2VuLmRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJlcGxhY2UoZWwsIGZyYWdDbG9uZSk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYSBub2RlIGxpc3QgYW5kIHJldHVybiBhIGNoaWxkTGlua0ZuLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGVMaXN0fSBub2RlTGlzdFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZU5vZGVMaXN0KG5vZGVMaXN0LCBvcHRpb25zKSB7XG5cdCAgdmFyIGxpbmtGbnMgPSBbXTtcblx0ICB2YXIgbm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4sIG5vZGU7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2RlTGlzdC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIG5vZGUgPSBub2RlTGlzdFtpXTtcblx0ICAgIG5vZGVMaW5rRm4gPSBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKTtcblx0ICAgIGNoaWxkTGlua0ZuID0gIShub2RlTGlua0ZuICYmIG5vZGVMaW5rRm4udGVybWluYWwpICYmIG5vZGUudGFnTmFtZSAhPT0gJ1NDUklQVCcgJiYgbm9kZS5oYXNDaGlsZE5vZGVzKCkgPyBjb21waWxlTm9kZUxpc3Qobm9kZS5jaGlsZE5vZGVzLCBvcHRpb25zKSA6IG51bGw7XG5cdCAgICBsaW5rRm5zLnB1c2gobm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4pO1xuXHQgIH1cblx0ICByZXR1cm4gbGlua0Zucy5sZW5ndGggPyBtYWtlQ2hpbGRMaW5rRm4obGlua0ZucykgOiBudWxsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTWFrZSBhIGNoaWxkIGxpbmsgZnVuY3Rpb24gZm9yIGEgbm9kZSdzIGNoaWxkTm9kZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXk8RnVuY3Rpb24+fSBsaW5rRm5zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSBjaGlsZExpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VDaGlsZExpbmtGbihsaW5rRm5zKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGNoaWxkTGlua0ZuKHZtLCBub2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIHZhciBub2RlLCBub2RlTGlua0ZuLCBjaGlsZHJlbkxpbmtGbjtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBuID0gMCwgbCA9IGxpbmtGbnMubGVuZ3RoOyBpIDwgbDsgbisrKSB7XG5cdCAgICAgIG5vZGUgPSBub2Rlc1tuXTtcblx0ICAgICAgbm9kZUxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcblx0ICAgICAgY2hpbGRyZW5MaW5rRm4gPSBsaW5rRm5zW2krK107XG5cdCAgICAgIC8vIGNhY2hlIGNoaWxkTm9kZXMgYmVmb3JlIGxpbmtpbmcgcGFyZW50LCBmaXggIzY1N1xuXHQgICAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkobm9kZS5jaGlsZE5vZGVzKTtcblx0ICAgICAgaWYgKG5vZGVMaW5rRm4pIHtcblx0ICAgICAgICBub2RlTGlua0ZuKHZtLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGNoaWxkcmVuTGlua0ZuKSB7XG5cdCAgICAgICAgY2hpbGRyZW5MaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBmb3IgZWxlbWVudCBkaXJlY3RpdmVzIChjdXN0b20gZWxlbWVudHMgdGhhdCBzaG91bGRcblx0ICogYmUgcmVzb3ZsZWQgYXMgdGVybWluYWwgZGlyZWN0aXZlcykuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjaGVja0VsZW1lbnREaXJlY3RpdmVzKGVsLCBvcHRpb25zKSB7XG5cdCAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblx0ICBpZiAoY29tbW9uVGFnUkUudGVzdCh0YWcpKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBkZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2VsZW1lbnREaXJlY3RpdmVzJywgdGFnKTtcblx0ICBpZiAoZGVmKSB7XG5cdCAgICByZXR1cm4gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgdGFnLCAnJywgb3B0aW9ucywgZGVmKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgY29tcG9uZW50LiBJZiB5ZXMsIHJldHVyblxuXHQgKiBhIGNvbXBvbmVudCBsaW5rIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjaGVja0NvbXBvbmVudChlbCwgb3B0aW9ucykge1xuXHQgIHZhciBjb21wb25lbnQgPSBjaGVja0NvbXBvbmVudEF0dHIoZWwsIG9wdGlvbnMpO1xuXHQgIGlmIChjb21wb25lbnQpIHtcblx0ICAgIHZhciByZWYgPSBmaW5kUmVmKGVsKTtcblx0ICAgIHZhciBkZXNjcmlwdG9yID0ge1xuXHQgICAgICBuYW1lOiAnY29tcG9uZW50Jyxcblx0ICAgICAgcmVmOiByZWYsXG5cdCAgICAgIGV4cHJlc3Npb246IGNvbXBvbmVudC5pZCxcblx0ICAgICAgZGVmOiBpbnRlcm5hbERpcmVjdGl2ZXMuY29tcG9uZW50LFxuXHQgICAgICBtb2RpZmllcnM6IHtcblx0ICAgICAgICBsaXRlcmFsOiAhY29tcG9uZW50LmR5bmFtaWNcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHZhciBjb21wb25lbnRMaW5rRm4gPSBmdW5jdGlvbiBjb21wb25lbnRMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgICBpZiAocmVmKSB7XG5cdCAgICAgICAgZGVmaW5lUmVhY3RpdmUoKHNjb3BlIHx8IHZtKS4kcmVmcywgcmVmLCBudWxsKTtcblx0ICAgICAgfVxuXHQgICAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgfTtcblx0ICAgIGNvbXBvbmVudExpbmtGbi50ZXJtaW5hbCA9IHRydWU7XG5cdCAgICByZXR1cm4gY29tcG9uZW50TGlua0ZuO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGFuIGVsZW1lbnQgZm9yIHRlcm1pbmFsIGRpcmVjdGl2ZXMgaW4gZml4ZWQgb3JkZXIuXG5cdCAqIElmIGl0IGZpbmRzIG9uZSwgcmV0dXJuIGEgdGVybWluYWwgbGluayBmdW5jdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0FycmF5fSBhdHRyc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGVybWluYWxMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyhlbCwgYXR0cnMsIG9wdGlvbnMpIHtcblx0ICAvLyBza2lwIHYtcHJlXG5cdCAgaWYgKGdldEF0dHIoZWwsICd2LXByZScpICE9PSBudWxsKSB7XG5cdCAgICByZXR1cm4gc2tpcDtcblx0ICB9XG5cdCAgLy8gc2tpcCB2LWVsc2UgYmxvY2ssIGJ1dCBvbmx5IGlmIGZvbGxvd2luZyB2LWlmXG5cdCAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgndi1lbHNlJykpIHtcblx0ICAgIHZhciBwcmV2ID0gZWwucHJldmlvdXNFbGVtZW50U2libGluZztcblx0ICAgIGlmIChwcmV2ICYmIHByZXYuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcblx0ICAgICAgcmV0dXJuIHNraXA7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB2YXIgYXR0ciwgbmFtZSwgdmFsdWUsIG1vZGlmaWVycywgbWF0Y2hlZCwgZGlyTmFtZSwgcmF3TmFtZSwgYXJnLCBkZWYsIHRlcm1EZWY7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGogPSBhdHRycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0ICAgIGF0dHIgPSBhdHRyc1tpXTtcblx0ICAgIG5hbWUgPSBhdHRyLm5hbWUucmVwbGFjZShtb2RpZmllclJFLCAnJyk7XG5cdCAgICBpZiAobWF0Y2hlZCA9IG5hbWUubWF0Y2goZGlyQXR0clJFKSkge1xuXHQgICAgICBkZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBtYXRjaGVkWzFdKTtcblx0ICAgICAgaWYgKGRlZiAmJiBkZWYudGVybWluYWwpIHtcblx0ICAgICAgICBpZiAoIXRlcm1EZWYgfHwgKGRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1RFUk1JTkFMX1BSSU9SSVRZKSA+IHRlcm1EZWYucHJpb3JpdHkpIHtcblx0ICAgICAgICAgIHRlcm1EZWYgPSBkZWY7XG5cdCAgICAgICAgICByYXdOYW1lID0gYXR0ci5uYW1lO1xuXHQgICAgICAgICAgbW9kaWZpZXJzID0gcGFyc2VNb2RpZmllcnMoYXR0ci5uYW1lKTtcblx0ICAgICAgICAgIHZhbHVlID0gYXR0ci52YWx1ZTtcblx0ICAgICAgICAgIGRpck5hbWUgPSBtYXRjaGVkWzFdO1xuXHQgICAgICAgICAgYXJnID0gbWF0Y2hlZFsyXTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGlmICh0ZXJtRGVmKSB7XG5cdCAgICByZXR1cm4gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgZGlyTmFtZSwgdmFsdWUsIG9wdGlvbnMsIHRlcm1EZWYsIHJhd05hbWUsIGFyZywgbW9kaWZpZXJzKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNraXAoKSB7fVxuXHRza2lwLnRlcm1pbmFsID0gdHJ1ZTtcblx0XG5cdC8qKlxuXHQgKiBCdWlsZCBhIG5vZGUgbGluayBmdW5jdGlvbiBmb3IgYSB0ZXJtaW5hbCBkaXJlY3RpdmUuXG5cdCAqIEEgdGVybWluYWwgbGluayBmdW5jdGlvbiB0ZXJtaW5hdGVzIHRoZSBjdXJyZW50XG5cdCAqIGNvbXBpbGF0aW9uIHJlY3Vyc2lvbiBhbmQgaGFuZGxlcyBjb21waWxhdGlvbiBvZiB0aGVcblx0ICogc3VidHJlZSBpbiB0aGUgZGlyZWN0aXZlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBkaXJOYW1lXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gZGVmXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbcmF3TmFtZV1cblx0ICogQHBhcmFtIHtTdHJpbmd9IFthcmddXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbbW9kaWZpZXJzXVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGVybWluYWxMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCBkaXJOYW1lLCB2YWx1ZSwgb3B0aW9ucywgZGVmLCByYXdOYW1lLCBhcmcsIG1vZGlmaWVycykge1xuXHQgIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG5cdCAgdmFyIGRlc2NyaXB0b3IgPSB7XG5cdCAgICBuYW1lOiBkaXJOYW1lLFxuXHQgICAgYXJnOiBhcmcsXG5cdCAgICBleHByZXNzaW9uOiBwYXJzZWQuZXhwcmVzc2lvbixcblx0ICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzLFxuXHQgICAgcmF3OiB2YWx1ZSxcblx0ICAgIGF0dHI6IHJhd05hbWUsXG5cdCAgICBtb2RpZmllcnM6IG1vZGlmaWVycyxcblx0ICAgIGRlZjogZGVmXG5cdCAgfTtcblx0ICAvLyBjaGVjayByZWYgZm9yIHYtZm9yIGFuZCByb3V0ZXItdmlld1xuXHQgIGlmIChkaXJOYW1lID09PSAnZm9yJyB8fCBkaXJOYW1lID09PSAncm91dGVyLXZpZXcnKSB7XG5cdCAgICBkZXNjcmlwdG9yLnJlZiA9IGZpbmRSZWYoZWwpO1xuXHQgIH1cblx0ICB2YXIgZm4gPSBmdW5jdGlvbiB0ZXJtaW5hbE5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgaWYgKGRlc2NyaXB0b3IucmVmKSB7XG5cdCAgICAgIGRlZmluZVJlYWN0aXZlKChzY29wZSB8fCB2bSkuJHJlZnMsIGRlc2NyaXB0b3IucmVmLCBudWxsKTtcblx0ICAgIH1cblx0ICAgIHZtLl9iaW5kRGlyKGRlc2NyaXB0b3IsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgfTtcblx0ICBmbi50ZXJtaW5hbCA9IHRydWU7XG5cdCAgcmV0dXJuIGZuO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSB0aGUgZGlyZWN0aXZlcyBvbiBhbiBlbGVtZW50IGFuZCByZXR1cm4gYSBsaW5rZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl8TmFtZWROb2RlTWFwfSBhdHRyc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlRGlyZWN0aXZlcyhhdHRycywgb3B0aW9ucykge1xuXHQgIHZhciBpID0gYXR0cnMubGVuZ3RoO1xuXHQgIHZhciBkaXJzID0gW107XG5cdCAgdmFyIGF0dHIsIG5hbWUsIHZhbHVlLCByYXdOYW1lLCByYXdWYWx1ZSwgZGlyTmFtZSwgYXJnLCBtb2RpZmllcnMsIGRpckRlZiwgdG9rZW5zLCBtYXRjaGVkO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGF0dHIgPSBhdHRyc1tpXTtcblx0ICAgIG5hbWUgPSByYXdOYW1lID0gYXR0ci5uYW1lO1xuXHQgICAgdmFsdWUgPSByYXdWYWx1ZSA9IGF0dHIudmFsdWU7XG5cdCAgICB0b2tlbnMgPSBwYXJzZVRleHQodmFsdWUpO1xuXHQgICAgLy8gcmVzZXQgYXJnXG5cdCAgICBhcmcgPSBudWxsO1xuXHQgICAgLy8gY2hlY2sgbW9kaWZpZXJzXG5cdCAgICBtb2RpZmllcnMgPSBwYXJzZU1vZGlmaWVycyhuYW1lKTtcblx0ICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UobW9kaWZpZXJSRSwgJycpO1xuXHRcblx0ICAgIC8vIGF0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uc1xuXHQgICAgaWYgKHRva2Vucykge1xuXHQgICAgICB2YWx1ZSA9IHRva2Vuc1RvRXhwKHRva2Vucyk7XG5cdCAgICAgIGFyZyA9IG5hbWU7XG5cdCAgICAgIHB1c2hEaXIoJ2JpbmQnLCBkaXJlY3RpdmVzLmJpbmQsIHRva2Vucyk7XG5cdCAgICAgIC8vIHdhcm4gYWdhaW5zdCBtaXhpbmcgbXVzdGFjaGVzIHdpdGggdi1iaW5kXG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgQXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChhdHRycywgZnVuY3Rpb24gKGF0dHIpIHtcblx0ICAgICAgICAgIHJldHVybiBhdHRyLm5hbWUgPT09ICc6Y2xhc3MnIHx8IGF0dHIubmFtZSA9PT0gJ3YtYmluZDpjbGFzcyc7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHdhcm4oJ2NsYXNzPVwiJyArIHJhd1ZhbHVlICsgJ1wiOiBEbyBub3QgbWl4IG11c3RhY2hlIGludGVycG9sYXRpb24gJyArICdhbmQgdi1iaW5kIGZvciBcImNsYXNzXCIgb24gdGhlIHNhbWUgZWxlbWVudC4gVXNlIG9uZSBvciB0aGUgb3RoZXIuJywgb3B0aW9ucyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2Vcblx0XG5cdCAgICAgIC8vIHNwZWNpYWwgYXR0cmlidXRlOiB0cmFuc2l0aW9uXG5cdCAgICAgIGlmICh0cmFuc2l0aW9uUkUudGVzdChuYW1lKSkge1xuXHQgICAgICAgIG1vZGlmaWVycy5saXRlcmFsID0gIWJpbmRSRS50ZXN0KG5hbWUpO1xuXHQgICAgICAgIHB1c2hEaXIoJ3RyYW5zaXRpb24nLCBpbnRlcm5hbERpcmVjdGl2ZXMudHJhbnNpdGlvbik7XG5cdCAgICAgIH0gZWxzZVxuXHRcblx0ICAgICAgICAvLyBldmVudCBoYW5kbGVyc1xuXHQgICAgICAgIGlmIChvblJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICAgIGFyZyA9IG5hbWUucmVwbGFjZShvblJFLCAnJyk7XG5cdCAgICAgICAgICBwdXNoRGlyKCdvbicsIGRpcmVjdGl2ZXMub24pO1xuXHQgICAgICAgIH0gZWxzZVxuXHRcblx0ICAgICAgICAgIC8vIGF0dHJpYnV0ZSBiaW5kaW5nc1xuXHQgICAgICAgICAgaWYgKGJpbmRSRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgICAgIGRpck5hbWUgPSBuYW1lLnJlcGxhY2UoYmluZFJFLCAnJyk7XG5cdCAgICAgICAgICAgIGlmIChkaXJOYW1lID09PSAnc3R5bGUnIHx8IGRpck5hbWUgPT09ICdjbGFzcycpIHtcblx0ICAgICAgICAgICAgICBwdXNoRGlyKGRpck5hbWUsIGludGVybmFsRGlyZWN0aXZlc1tkaXJOYW1lXSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgYXJnID0gZGlyTmFtZTtcblx0ICAgICAgICAgICAgICBwdXNoRGlyKCdiaW5kJywgZGlyZWN0aXZlcy5iaW5kKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSBlbHNlXG5cdFxuXHQgICAgICAgICAgICAvLyBub3JtYWwgZGlyZWN0aXZlc1xuXHQgICAgICAgICAgICBpZiAobWF0Y2hlZCA9IG5hbWUubWF0Y2goZGlyQXR0clJFKSkge1xuXHQgICAgICAgICAgICAgIGRpck5hbWUgPSBtYXRjaGVkWzFdO1xuXHQgICAgICAgICAgICAgIGFyZyA9IG1hdGNoZWRbMl07XG5cdFxuXHQgICAgICAgICAgICAgIC8vIHNraXAgdi1lbHNlICh3aGVuIHVzZWQgd2l0aCB2LXNob3cpXG5cdCAgICAgICAgICAgICAgaWYgKGRpck5hbWUgPT09ICdlbHNlJykge1xuXHQgICAgICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICBkaXJEZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBkaXJOYW1lLCB0cnVlKTtcblx0ICAgICAgICAgICAgICBpZiAoZGlyRGVmKSB7XG5cdCAgICAgICAgICAgICAgICBwdXNoRGlyKGRpck5hbWUsIGRpckRlZik7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBQdXNoIGEgZGlyZWN0aXZlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGRpck5hbWVcblx0ICAgKiBAcGFyYW0ge09iamVjdHxGdW5jdGlvbn0gZGVmXG5cdCAgICogQHBhcmFtIHtBcnJheX0gW2ludGVycFRva2Vuc11cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcHVzaERpcihkaXJOYW1lLCBkZWYsIGludGVycFRva2Vucykge1xuXHQgICAgdmFyIGhhc09uZVRpbWVUb2tlbiA9IGludGVycFRva2VucyAmJiBoYXNPbmVUaW1lKGludGVycFRva2Vucyk7XG5cdCAgICB2YXIgcGFyc2VkID0gIWhhc09uZVRpbWVUb2tlbiAmJiBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG5cdCAgICBkaXJzLnB1c2goe1xuXHQgICAgICBuYW1lOiBkaXJOYW1lLFxuXHQgICAgICBhdHRyOiByYXdOYW1lLFxuXHQgICAgICByYXc6IHJhd1ZhbHVlLFxuXHQgICAgICBkZWY6IGRlZixcblx0ICAgICAgYXJnOiBhcmcsXG5cdCAgICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLFxuXHQgICAgICAvLyBjb252ZXJzaW9uIGZyb20gaW50ZXJwb2xhdGlvbiBzdHJpbmdzIHdpdGggb25lLXRpbWUgdG9rZW5cblx0ICAgICAgLy8gdG8gZXhwcmVzc2lvbiBpcyBkaWZmZXJlZCB1bnRpbCBkaXJlY3RpdmUgYmluZCB0aW1lIHNvIHRoYXQgd2Vcblx0ICAgICAgLy8gaGF2ZSBhY2Nlc3MgdG8gdGhlIGFjdHVhbCB2bSBjb250ZXh0IGZvciBvbmUtdGltZSBiaW5kaW5ncy5cblx0ICAgICAgZXhwcmVzc2lvbjogcGFyc2VkICYmIHBhcnNlZC5leHByZXNzaW9uLFxuXHQgICAgICBmaWx0ZXJzOiBwYXJzZWQgJiYgcGFyc2VkLmZpbHRlcnMsXG5cdCAgICAgIGludGVycDogaW50ZXJwVG9rZW5zLFxuXHQgICAgICBoYXNPbmVUaW1lOiBoYXNPbmVUaW1lVG9rZW5cblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgaWYgKGRpcnMubGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gbWFrZU5vZGVMaW5rRm4oZGlycyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2UgbW9kaWZpZXJzIGZyb20gZGlyZWN0aXZlIGF0dHJpYnV0ZSBuYW1lLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VNb2RpZmllcnMobmFtZSkge1xuXHQgIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHZhciBtYXRjaCA9IG5hbWUubWF0Y2gobW9kaWZpZXJSRSk7XG5cdCAgaWYgKG1hdGNoKSB7XG5cdCAgICB2YXIgaSA9IG1hdGNoLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgcmVzW21hdGNoW2ldLnNsaWNlKDEpXSA9IHRydWU7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBCdWlsZCBhIGxpbmsgZnVuY3Rpb24gZm9yIGFsbCBkaXJlY3RpdmVzIG9uIGEgc2luZ2xlIG5vZGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGRpcmVjdGl2ZXNcblx0ICogQHJldHVybiB7RnVuY3Rpb259IGRpcmVjdGl2ZXNMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlTm9kZUxpbmtGbihkaXJlY3RpdmVzKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIG5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgLy8gcmV2ZXJzZSBhcHBseSBiZWNhdXNlIGl0J3Mgc29ydGVkIGxvdyB0byBoaWdoXG5cdCAgICB2YXIgaSA9IGRpcmVjdGl2ZXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2bS5fYmluZERpcihkaXJlY3RpdmVzW2ldLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBpbnRlcnBvbGF0aW9uIHN0cmluZyBjb250YWlucyBvbmUtdGltZSB0b2tlbnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGhhc09uZVRpbWUodG9rZW5zKSB7XG5cdCAgdmFyIGkgPSB0b2tlbnMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGlmICh0b2tlbnNbaV0ub25lVGltZSkgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1NjcmlwdChlbCkge1xuXHQgIHJldHVybiBlbC50YWdOYW1lID09PSAnU0NSSVBUJyAmJiAoIWVsLmhhc0F0dHJpYnV0ZSgndHlwZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAndGV4dC9qYXZhc2NyaXB0Jyk7XG5cdH1cblx0XG5cdHZhciBzcGVjaWFsQ2hhclJFID0gL1teXFx3XFwtOlxcLl0vO1xuXHRcblx0LyoqXG5cdCAqIFByb2Nlc3MgYW4gZWxlbWVudCBvciBhIERvY3VtZW50RnJhZ21lbnQgYmFzZWQgb24gYVxuXHQgKiBpbnN0YW5jZSBvcHRpb24gb2JqZWN0LiBUaGlzIGFsbG93cyB1cyB0byB0cmFuc2NsdWRlXG5cdCAqIGEgdGVtcGxhdGUgbm9kZS9mcmFnbWVudCBiZWZvcmUgdGhlIGluc3RhbmNlIGlzIGNyZWF0ZWQsXG5cdCAqIHNvIHRoZSBwcm9jZXNzZWQgZnJhZ21lbnQgY2FuIHRoZW4gYmUgY2xvbmVkIGFuZCByZXVzZWRcblx0ICogaW4gdi1mb3IuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRyYW5zY2x1ZGUoZWwsIG9wdGlvbnMpIHtcblx0ICAvLyBleHRyYWN0IGNvbnRhaW5lciBhdHRyaWJ1dGVzIHRvIHBhc3MgdGhlbSBkb3duXG5cdCAgLy8gdG8gY29tcGlsZXIsIGJlY2F1c2UgdGhleSBuZWVkIHRvIGJlIGNvbXBpbGVkIGluXG5cdCAgLy8gcGFyZW50IHNjb3BlLiB3ZSBhcmUgbXV0YXRpbmcgdGhlIG9wdGlvbnMgb2JqZWN0IGhlcmVcblx0ICAvLyBhc3N1bWluZyB0aGUgc2FtZSBvYmplY3Qgd2lsbCBiZSB1c2VkIGZvciBjb21waWxlXG5cdCAgLy8gcmlnaHQgYWZ0ZXIgdGhpcy5cblx0ICBpZiAob3B0aW9ucykge1xuXHQgICAgb3B0aW9ucy5fY29udGFpbmVyQXR0cnMgPSBleHRyYWN0QXR0cnMoZWwpO1xuXHQgIH1cblx0ICAvLyBmb3IgdGVtcGxhdGUgdGFncywgd2hhdCB3ZSB3YW50IGlzIGl0cyBjb250ZW50IGFzXG5cdCAgLy8gYSBkb2N1bWVudEZyYWdtZW50IChmb3IgZnJhZ21lbnQgaW5zdGFuY2VzKVxuXHQgIGlmIChpc1RlbXBsYXRlKGVsKSkge1xuXHQgICAgZWwgPSBwYXJzZVRlbXBsYXRlKGVsKTtcblx0ICB9XG5cdCAgaWYgKG9wdGlvbnMpIHtcblx0ICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCAmJiAhb3B0aW9ucy50ZW1wbGF0ZSkge1xuXHQgICAgICBvcHRpb25zLnRlbXBsYXRlID0gJzxzbG90Pjwvc2xvdD4nO1xuXHQgICAgfVxuXHQgICAgaWYgKG9wdGlvbnMudGVtcGxhdGUpIHtcblx0ICAgICAgb3B0aW9ucy5fY29udGVudCA9IGV4dHJhY3RDb250ZW50KGVsKTtcblx0ICAgICAgZWwgPSB0cmFuc2NsdWRlVGVtcGxhdGUoZWwsIG9wdGlvbnMpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoaXNGcmFnbWVudChlbCkpIHtcblx0ICAgIC8vIGFuY2hvcnMgZm9yIGZyYWdtZW50IGluc3RhbmNlXG5cdCAgICAvLyBwYXNzaW5nIGluIGBwZXJzaXN0OiB0cnVlYCB0byBhdm9pZCB0aGVtIGJlaW5nXG5cdCAgICAvLyBkaXNjYXJkZWQgYnkgSUUgZHVyaW5nIHRlbXBsYXRlIGNsb25pbmdcblx0ICAgIHByZXBlbmQoY3JlYXRlQW5jaG9yKCd2LXN0YXJ0JywgdHJ1ZSksIGVsKTtcblx0ICAgIGVsLmFwcGVuZENoaWxkKGNyZWF0ZUFuY2hvcigndi1lbmQnLCB0cnVlKSk7XG5cdCAgfVxuXHQgIHJldHVybiBlbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByb2Nlc3MgdGhlIHRlbXBsYXRlIG9wdGlvbi5cblx0ICogSWYgdGhlIHJlcGxhY2Ugb3B0aW9uIGlzIHRydWUgdGhpcyB3aWxsIHN3YXAgdGhlICRlbC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdHJhbnNjbHVkZVRlbXBsYXRlKGVsLCBvcHRpb25zKSB7XG5cdCAgdmFyIHRlbXBsYXRlID0gb3B0aW9ucy50ZW1wbGF0ZTtcblx0ICB2YXIgZnJhZyA9IHBhcnNlVGVtcGxhdGUodGVtcGxhdGUsIHRydWUpO1xuXHQgIGlmIChmcmFnKSB7XG5cdCAgICB2YXIgcmVwbGFjZXIgPSBmcmFnLmZpcnN0Q2hpbGQ7XG5cdCAgICB2YXIgdGFnID0gcmVwbGFjZXIudGFnTmFtZSAmJiByZXBsYWNlci50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdCAgICBpZiAob3B0aW9ucy5yZXBsYWNlKSB7XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoZWwgPT09IGRvY3VtZW50LmJvZHkpIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1lvdSBhcmUgbW91bnRpbmcgYW4gaW5zdGFuY2Ugd2l0aCBhIHRlbXBsYXRlIHRvICcgKyAnPGJvZHk+LiBUaGlzIHdpbGwgcmVwbGFjZSA8Ym9keT4gZW50aXJlbHkuIFlvdSAnICsgJ3Nob3VsZCBwcm9iYWJseSB1c2UgYHJlcGxhY2U6IGZhbHNlYCBoZXJlLicpO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIHRoZXJlIGFyZSBtYW55IGNhc2VzIHdoZXJlIHRoZSBpbnN0YW5jZSBtdXN0XG5cdCAgICAgIC8vIGJlY29tZSBhIGZyYWdtZW50IGluc3RhbmNlOiBiYXNpY2FsbHkgYW55dGhpbmcgdGhhdFxuXHQgICAgICAvLyBjYW4gY3JlYXRlIG1vcmUgdGhhbiAxIHJvb3Qgbm9kZXMuXG5cdCAgICAgIGlmIChcblx0ICAgICAgLy8gbXVsdGktY2hpbGRyZW4gdGVtcGxhdGVcblx0ICAgICAgZnJhZy5jaGlsZE5vZGVzLmxlbmd0aCA+IDEgfHxcblx0ICAgICAgLy8gbm9uLWVsZW1lbnQgdGVtcGxhdGVcblx0ICAgICAgcmVwbGFjZXIubm9kZVR5cGUgIT09IDEgfHxcblx0ICAgICAgLy8gc2luZ2xlIG5lc3RlZCBjb21wb25lbnRcblx0ICAgICAgdGFnID09PSAnY29tcG9uZW50JyB8fCByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCB0YWcpIHx8IGhhc0JpbmRBdHRyKHJlcGxhY2VyLCAnaXMnKSB8fFxuXHQgICAgICAvLyBlbGVtZW50IGRpcmVjdGl2ZVxuXHQgICAgICByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2VsZW1lbnREaXJlY3RpdmVzJywgdGFnKSB8fFxuXHQgICAgICAvLyBmb3IgYmxvY2tcblx0ICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWZvcicpIHx8XG5cdCAgICAgIC8vIGlmIGJsb2NrXG5cdCAgICAgIHJlcGxhY2VyLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG5cdCAgICAgICAgcmV0dXJuIGZyYWc7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgb3B0aW9ucy5fcmVwbGFjZXJBdHRycyA9IGV4dHJhY3RBdHRycyhyZXBsYWNlcik7XG5cdCAgICAgICAgbWVyZ2VBdHRycyhlbCwgcmVwbGFjZXIpO1xuXHQgICAgICAgIHJldHVybiByZXBsYWNlcjtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWwuYXBwZW5kQ2hpbGQoZnJhZyk7XG5cdCAgICAgIHJldHVybiBlbDtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHRlbXBsYXRlIG9wdGlvbjogJyArIHRlbXBsYXRlKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBIZWxwZXIgdG8gZXh0cmFjdCBhIGNvbXBvbmVudCBjb250YWluZXIncyBhdHRyaWJ1dGVzXG5cdCAqIGludG8gYSBwbGFpbiBvYmplY3QgYXJyYXkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHJldHVybiB7QXJyYXl9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZXh0cmFjdEF0dHJzKGVsKSB7XG5cdCAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGVsLmhhc0F0dHJpYnV0ZXMoKSkge1xuXHQgICAgcmV0dXJuIHRvQXJyYXkoZWwuYXR0cmlidXRlcyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogTWVyZ2UgdGhlIGF0dHJpYnV0ZXMgb2YgdHdvIGVsZW1lbnRzLCBhbmQgbWFrZSBzdXJlXG5cdCAqIHRoZSBjbGFzcyBuYW1lcyBhcmUgbWVyZ2VkIHByb3Blcmx5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGZyb21cblx0ICogQHBhcmFtIHtFbGVtZW50fSB0b1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1lcmdlQXR0cnMoZnJvbSwgdG8pIHtcblx0ICB2YXIgYXR0cnMgPSBmcm9tLmF0dHJpYnV0ZXM7XG5cdCAgdmFyIGkgPSBhdHRycy5sZW5ndGg7XG5cdCAgdmFyIG5hbWUsIHZhbHVlO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuXHQgICAgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZTtcblx0ICAgIGlmICghdG8uaGFzQXR0cmlidXRlKG5hbWUpICYmICFzcGVjaWFsQ2hhclJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgdG8uc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcblx0ICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ2NsYXNzJyAmJiAhcGFyc2VUZXh0KHZhbHVlKSAmJiAodmFsdWUgPSB2YWx1ZS50cmltKCkpKSB7XG5cdCAgICAgIHZhbHVlLnNwbGl0KC9cXHMrLykuZm9yRWFjaChmdW5jdGlvbiAoY2xzKSB7XG5cdCAgICAgICAgYWRkQ2xhc3ModG8sIGNscyk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFNjYW4gYW5kIGRldGVybWluZSBzbG90IGNvbnRlbnQgZGlzdHJpYnV0aW9uLlxuXHQgKiBXZSBkbyB0aGlzIGR1cmluZyB0cmFuc2NsdXNpb24gaW5zdGVhZCBhdCBjb21waWxlIHRpbWUgc28gdGhhdFxuXHQgKiB0aGUgZGlzdHJpYnV0aW9uIGlzIGRlY291cGxlZCBmcm9tIHRoZSBjb21waWxhdGlvbiBvcmRlciBvZlxuXHQgKiB0aGUgc2xvdHMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSB0ZW1wbGF0ZVxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRlbnRcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVzb2x2ZVNsb3RzKHZtLCBjb250ZW50KSB7XG5cdCAgaWYgKCFjb250ZW50KSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBjb250ZW50cyA9IHZtLl9zbG90Q29udGVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHZhciBlbCwgbmFtZTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGNvbnRlbnQuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBlbCA9IGNvbnRlbnQuY2hpbGRyZW5baV07XG5cdCAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgaWYgKG5hbWUgPSBlbC5nZXRBdHRyaWJ1dGUoJ3Nsb3QnKSkge1xuXHQgICAgICAoY29udGVudHNbbmFtZV0gfHwgKGNvbnRlbnRzW25hbWVdID0gW10pKS5wdXNoKGVsKTtcblx0ICAgIH1cblx0ICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGdldEJpbmRBdHRyKGVsLCAnc2xvdCcpKSB7XG5cdCAgICAgIHdhcm4oJ1RoZSBcInNsb3RcIiBhdHRyaWJ1dGUgbXVzdCBiZSBzdGF0aWMuJywgdm0uJHBhcmVudCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGZvciAobmFtZSBpbiBjb250ZW50cykge1xuXHQgICAgY29udGVudHNbbmFtZV0gPSBleHRyYWN0RnJhZ21lbnQoY29udGVudHNbbmFtZV0sIGNvbnRlbnQpO1xuXHQgIH1cblx0ICBpZiAoY29udGVudC5oYXNDaGlsZE5vZGVzKCkpIHtcblx0ICAgIHZhciBub2RlcyA9IGNvbnRlbnQuY2hpbGROb2Rlcztcblx0ICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDEgJiYgbm9kZXNbMF0ubm9kZVR5cGUgPT09IDMgJiYgIW5vZGVzWzBdLmRhdGEudHJpbSgpKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGNvbnRlbnRzWydkZWZhdWx0J10gPSBleHRyYWN0RnJhZ21lbnQoY29udGVudC5jaGlsZE5vZGVzLCBjb250ZW50KTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFeHRyYWN0IHF1YWxpZmllZCBjb250ZW50IG5vZGVzIGZyb20gYSBub2RlIGxpc3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVzXG5cdCAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZXh0cmFjdEZyYWdtZW50KG5vZGVzLCBwYXJlbnQpIHtcblx0ICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0ICBub2RlcyA9IHRvQXJyYXkobm9kZXMpO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICB2YXIgbm9kZSA9IG5vZGVzW2ldO1xuXHQgICAgaWYgKGlzVGVtcGxhdGUobm9kZSkgJiYgIW5vZGUuaGFzQXR0cmlidXRlKCd2LWlmJykgJiYgIW5vZGUuaGFzQXR0cmlidXRlKCd2LWZvcicpKSB7XG5cdCAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChub2RlKTtcblx0ICAgICAgbm9kZSA9IHBhcnNlVGVtcGxhdGUobm9kZSwgdHJ1ZSk7XG5cdCAgICB9XG5cdCAgICBmcmFnLmFwcGVuZENoaWxkKG5vZGUpO1xuXHQgIH1cblx0ICByZXR1cm4gZnJhZztcblx0fVxuXHRcblx0XG5cdFxuXHR2YXIgY29tcGlsZXIgPSBPYmplY3QuZnJlZXplKHtcblx0XHRjb21waWxlOiBjb21waWxlLFxuXHRcdGNvbXBpbGVBbmRMaW5rUHJvcHM6IGNvbXBpbGVBbmRMaW5rUHJvcHMsXG5cdFx0Y29tcGlsZVJvb3Q6IGNvbXBpbGVSb290LFxuXHRcdHRyYW5zY2x1ZGU6IHRyYW5zY2x1ZGUsXG5cdFx0cmVzb2x2ZVNsb3RzOiByZXNvbHZlU2xvdHNcblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBzdGF0ZU1peGluIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBBY2Nlc3NvciBmb3IgYCRkYXRhYCBwcm9wZXJ0eSwgc2luY2Ugc2V0dGluZyAkZGF0YVxuXHQgICAqIHJlcXVpcmVzIG9ic2VydmluZyB0aGUgbmV3IG9iamVjdCBhbmQgdXBkYXRpbmdcblx0ICAgKiBwcm94aWVkIHByb3BlcnRpZXMuXG5cdCAgICovXG5cdFxuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJGRhdGEnLCB7XG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7XG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiBzZXQobmV3RGF0YSkge1xuXHQgICAgICBpZiAobmV3RGF0YSAhPT0gdGhpcy5fZGF0YSkge1xuXHQgICAgICAgIHRoaXMuX3NldERhdGEobmV3RGF0YSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogU2V0dXAgdGhlIHNjb3BlIG9mIGFuIGluc3RhbmNlLCB3aGljaCBjb250YWluczpcblx0ICAgKiAtIG9ic2VydmVkIGRhdGFcblx0ICAgKiAtIGNvbXB1dGVkIHByb3BlcnRpZXNcblx0ICAgKiAtIHVzZXIgbWV0aG9kc1xuXHQgICAqIC0gbWV0YSBwcm9wZXJ0aWVzXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuX2luaXRQcm9wcygpO1xuXHQgICAgdGhpcy5faW5pdE1ldGEoKTtcblx0ICAgIHRoaXMuX2luaXRNZXRob2RzKCk7XG5cdCAgICB0aGlzLl9pbml0RGF0YSgpO1xuXHQgICAgdGhpcy5faW5pdENvbXB1dGVkKCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5pdGlhbGl6ZSBwcm9wcy5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdFByb3BzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuXHQgICAgdmFyIGVsID0gb3B0aW9ucy5lbDtcblx0ICAgIHZhciBwcm9wcyA9IG9wdGlvbnMucHJvcHM7XG5cdCAgICBpZiAocHJvcHMgJiYgIWVsKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignUHJvcHMgd2lsbCBub3QgYmUgY29tcGlsZWQgaWYgbm8gYGVsYCBvcHRpb24gaXMgJyArICdwcm92aWRlZCBhdCBpbnN0YW50aWF0aW9uLicsIHRoaXMpO1xuXHQgICAgfVxuXHQgICAgLy8gbWFrZSBzdXJlIHRvIGNvbnZlcnQgc3RyaW5nIHNlbGVjdG9ycyBpbnRvIGVsZW1lbnQgbm93XG5cdCAgICBlbCA9IG9wdGlvbnMuZWwgPSBxdWVyeShlbCk7XG5cdCAgICB0aGlzLl9wcm9wc1VubGlua0ZuID0gZWwgJiYgZWwubm9kZVR5cGUgPT09IDEgJiYgcHJvcHNcblx0ICAgIC8vIHByb3BzIG11c3QgYmUgbGlua2VkIGluIHByb3BlciBzY29wZSBpZiBpbnNpZGUgdi1mb3Jcblx0ICAgID8gY29tcGlsZUFuZExpbmtQcm9wcyh0aGlzLCBlbCwgcHJvcHMsIHRoaXMuX3Njb3BlKSA6IG51bGw7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5pdGlhbGl6ZSB0aGUgZGF0YS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdERhdGEgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgZGF0YUZuID0gdGhpcy4kb3B0aW9ucy5kYXRhO1xuXHQgICAgdmFyIGRhdGEgPSB0aGlzLl9kYXRhID0gZGF0YUZuID8gZGF0YUZuKCkgOiB7fTtcblx0ICAgIGlmICghaXNQbGFpbk9iamVjdChkYXRhKSkge1xuXHQgICAgICBkYXRhID0ge307XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignZGF0YSBmdW5jdGlvbnMgc2hvdWxkIHJldHVybiBhbiBvYmplY3QuJywgdGhpcyk7XG5cdCAgICB9XG5cdCAgICB2YXIgcHJvcHMgPSB0aGlzLl9wcm9wcztcblx0ICAgIC8vIHByb3h5IGRhdGEgb24gaW5zdGFuY2Vcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XG5cdCAgICB2YXIgaSwga2V5O1xuXHQgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICAvLyB0aGVyZSBhcmUgdHdvIHNjZW5hcmlvcyB3aGVyZSB3ZSBjYW4gcHJveHkgYSBkYXRhIGtleTpcblx0ICAgICAgLy8gMS4gaXQncyBub3QgYWxyZWFkeSBkZWZpbmVkIGFzIGEgcHJvcFxuXHQgICAgICAvLyAyLiBpdCdzIHByb3ZpZGVkIHZpYSBhIGluc3RhbnRpYXRpb24gb3B0aW9uIEFORCB0aGVyZSBhcmUgbm9cblx0ICAgICAgLy8gICAgdGVtcGxhdGUgcHJvcCBwcmVzZW50XG5cdCAgICAgIGlmICghcHJvcHMgfHwgIWhhc093bihwcm9wcywga2V5KSkge1xuXHQgICAgICAgIHRoaXMuX3Byb3h5KGtleSk7XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHdhcm4oJ0RhdGEgZmllbGQgXCInICsga2V5ICsgJ1wiIGlzIGFscmVhZHkgZGVmaW5lZCAnICsgJ2FzIGEgcHJvcC4gVG8gcHJvdmlkZSBkZWZhdWx0IHZhbHVlIGZvciBhIHByb3AsIHVzZSB0aGUgXCJkZWZhdWx0XCIgJyArICdwcm9wIG9wdGlvbjsgaWYgeW91IHdhbnQgdG8gcGFzcyBwcm9wIHZhbHVlcyB0byBhbiBpbnN0YW50aWF0aW9uICcgKyAnY2FsbCwgdXNlIHRoZSBcInByb3BzRGF0YVwiIG9wdGlvbi4nLCB0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gb2JzZXJ2ZSBkYXRhXG5cdCAgICBvYnNlcnZlKGRhdGEsIHRoaXMpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFN3YXAgdGhlIGluc3RhbmNlJ3MgJGRhdGEuIENhbGxlZCBpbiAkZGF0YSdzIHNldHRlci5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBuZXdEYXRhXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX3NldERhdGEgPSBmdW5jdGlvbiAobmV3RGF0YSkge1xuXHQgICAgbmV3RGF0YSA9IG5ld0RhdGEgfHwge307XG5cdCAgICB2YXIgb2xkRGF0YSA9IHRoaXMuX2RhdGE7XG5cdCAgICB0aGlzLl9kYXRhID0gbmV3RGF0YTtcblx0ICAgIHZhciBrZXlzLCBrZXksIGk7XG5cdCAgICAvLyB1bnByb3h5IGtleXMgbm90IHByZXNlbnQgaW4gbmV3IGRhdGFcblx0ICAgIGtleXMgPSBPYmplY3Qua2V5cyhvbGREYXRhKTtcblx0ICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgaWYgKCEoa2V5IGluIG5ld0RhdGEpKSB7XG5cdCAgICAgICAgdGhpcy5fdW5wcm94eShrZXkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBwcm94eSBrZXlzIG5vdCBhbHJlYWR5IHByb3hpZWQsXG5cdCAgICAvLyBhbmQgdHJpZ2dlciBjaGFuZ2UgZm9yIGNoYW5nZWQgdmFsdWVzXG5cdCAgICBrZXlzID0gT2JqZWN0LmtleXMobmV3RGF0YSk7XG5cdCAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGtleSA9IGtleXNbaV07XG5cdCAgICAgIGlmICghaGFzT3duKHRoaXMsIGtleSkpIHtcblx0ICAgICAgICAvLyBuZXcgcHJvcGVydHlcblx0ICAgICAgICB0aGlzLl9wcm94eShrZXkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBvbGREYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKTtcblx0ICAgIG9ic2VydmUobmV3RGF0YSwgdGhpcyk7XG5cdCAgICB0aGlzLl9kaWdlc3QoKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBQcm94eSBhIHByb3BlcnR5LCBzbyB0aGF0XG5cdCAgICogdm0ucHJvcCA9PT0gdm0uX2RhdGEucHJvcFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIGlmICghaXNSZXNlcnZlZChrZXkpKSB7XG5cdCAgICAgIC8vIG5lZWQgdG8gc3RvcmUgcmVmIHRvIHNlbGYgaGVyZVxuXHQgICAgICAvLyBiZWNhdXNlIHRoZXNlIGdldHRlci9zZXR0ZXJzIG1pZ2h0XG5cdCAgICAgIC8vIGJlIGNhbGxlZCBieSBjaGlsZCBzY29wZXMgdmlhXG5cdCAgICAgIC8vIHByb3RvdHlwZSBpbmhlcml0YW5jZS5cblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwga2V5LCB7XG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiBwcm94eUdldHRlcigpIHtcblx0ICAgICAgICAgIHJldHVybiBzZWxmLl9kYXRhW2tleV07XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBzZXQ6IGZ1bmN0aW9uIHByb3h5U2V0dGVyKHZhbCkge1xuXHQgICAgICAgICAgc2VsZi5fZGF0YVtrZXldID0gdmFsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogVW5wcm94eSBhIHByb3BlcnR5LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl91bnByb3h5ID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgaWYgKCFpc1Jlc2VydmVkKGtleSkpIHtcblx0ICAgICAgZGVsZXRlIHRoaXNba2V5XTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBGb3JjZSB1cGRhdGUgb24gZXZlcnkgd2F0Y2hlciBpbiBzY29wZS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLl93YXRjaGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdGhpcy5fd2F0Y2hlcnNbaV0udXBkYXRlKHRydWUpOyAvLyBzaGFsbG93IHVwZGF0ZXNcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBTZXR1cCBjb21wdXRlZCBwcm9wZXJ0aWVzLiBUaGV5IGFyZSBlc3NlbnRpYWxseVxuXHQgICAqIHNwZWNpYWwgZ2V0dGVyL3NldHRlcnNcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gbm9vcCgpIHt9XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdENvbXB1dGVkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGNvbXB1dGVkID0gdGhpcy4kb3B0aW9ucy5jb21wdXRlZDtcblx0ICAgIGlmIChjb21wdXRlZCkge1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gY29tcHV0ZWQpIHtcblx0ICAgICAgICB2YXIgdXNlckRlZiA9IGNvbXB1dGVkW2tleV07XG5cdCAgICAgICAgdmFyIGRlZiA9IHtcblx0ICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgICAgICB9O1xuXHQgICAgICAgIGlmICh0eXBlb2YgdXNlckRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgZGVmLmdldCA9IG1ha2VDb21wdXRlZEdldHRlcih1c2VyRGVmLCB0aGlzKTtcblx0ICAgICAgICAgIGRlZi5zZXQgPSBub29wO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBkZWYuZ2V0ID0gdXNlckRlZi5nZXQgPyB1c2VyRGVmLmNhY2hlICE9PSBmYWxzZSA/IG1ha2VDb21wdXRlZEdldHRlcih1c2VyRGVmLmdldCwgdGhpcykgOiBiaW5kKHVzZXJEZWYuZ2V0LCB0aGlzKSA6IG5vb3A7XG5cdCAgICAgICAgICBkZWYuc2V0ID0gdXNlckRlZi5zZXQgPyBiaW5kKHVzZXJEZWYuc2V0LCB0aGlzKSA6IG5vb3A7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrZXksIGRlZik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBtYWtlQ29tcHV0ZWRHZXR0ZXIoZ2V0dGVyLCBvd25lcikge1xuXHQgICAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcihvd25lciwgZ2V0dGVyLCBudWxsLCB7XG5cdCAgICAgIGxhenk6IHRydWVcblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIGNvbXB1dGVkR2V0dGVyKCkge1xuXHQgICAgICBpZiAod2F0Y2hlci5kaXJ0eSkge1xuXHQgICAgICAgIHdhdGNoZXIuZXZhbHVhdGUoKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoRGVwLnRhcmdldCkge1xuXHQgICAgICAgIHdhdGNoZXIuZGVwZW5kKCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHdhdGNoZXIudmFsdWU7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogU2V0dXAgaW5zdGFuY2UgbWV0aG9kcy4gTWV0aG9kcyBtdXN0IGJlIGJvdW5kIHRvIHRoZVxuXHQgICAqIGluc3RhbmNlIHNpbmNlIHRoZXkgbWlnaHQgYmUgcGFzc2VkIGRvd24gYXMgYSBwcm9wIHRvXG5cdCAgICogY2hpbGQgY29tcG9uZW50cy5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdE1ldGhvZHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgbWV0aG9kcyA9IHRoaXMuJG9wdGlvbnMubWV0aG9kcztcblx0ICAgIGlmIChtZXRob2RzKSB7XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiBtZXRob2RzKSB7XG5cdCAgICAgICAgdGhpc1trZXldID0gYmluZChtZXRob2RzW2tleV0sIHRoaXMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5pdGlhbGl6ZSBtZXRhIGluZm9ybWF0aW9uIGxpa2UgJGluZGV4LCAka2V5ICYgJHZhbHVlLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0TWV0YSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBtZXRhcyA9IHRoaXMuJG9wdGlvbnMuX21ldGE7XG5cdCAgICBpZiAobWV0YXMpIHtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIG1ldGFzKSB7XG5cdCAgICAgICAgZGVmaW5lUmVhY3RpdmUodGhpcywga2V5LCBtZXRhc1trZXldKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdHZhciBldmVudFJFID0gL152LW9uOnxeQC87XG5cdFxuXHRmdW5jdGlvbiBldmVudHNNaXhpbiAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogU2V0dXAgdGhlIGluc3RhbmNlJ3Mgb3B0aW9uIGV2ZW50cyAmIHdhdGNoZXJzLlxuXHQgICAqIElmIHRoZSB2YWx1ZSBpcyBhIHN0cmluZywgd2UgcHVsbCBpdCBmcm9tIHRoZVxuXHQgICAqIGluc3RhbmNlJ3MgbWV0aG9kcyBieSBuYW1lLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0RXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuXHQgICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50KSB7XG5cdCAgICAgIHJlZ2lzdGVyQ29tcG9uZW50RXZlbnRzKHRoaXMsIG9wdGlvbnMuZWwpO1xuXHQgICAgfVxuXHQgICAgcmVnaXN0ZXJDYWxsYmFja3ModGhpcywgJyRvbicsIG9wdGlvbnMuZXZlbnRzKTtcblx0ICAgIHJlZ2lzdGVyQ2FsbGJhY2tzKHRoaXMsICckd2F0Y2gnLCBvcHRpb25zLndhdGNoKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZWdpc3RlciB2LW9uIGV2ZW50cyBvbiBhIGNoaWxkIGNvbXBvbmVudFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZWdpc3RlckNvbXBvbmVudEV2ZW50cyh2bSwgZWwpIHtcblx0ICAgIHZhciBhdHRycyA9IGVsLmF0dHJpYnV0ZXM7XG5cdCAgICB2YXIgbmFtZSwgdmFsdWUsIGhhbmRsZXI7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBuYW1lID0gYXR0cnNbaV0ubmFtZTtcblx0ICAgICAgaWYgKGV2ZW50UkUudGVzdChuYW1lKSkge1xuXHQgICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoZXZlbnRSRSwgJycpO1xuXHQgICAgICAgIC8vIGZvcmNlIHRoZSBleHByZXNzaW9uIGludG8gYSBzdGF0ZW1lbnQgc28gdGhhdFxuXHQgICAgICAgIC8vIGl0IGFsd2F5cyBkeW5hbWljYWxseSByZXNvbHZlcyB0aGUgbWV0aG9kIHRvIGNhbGwgKCMyNjcwKVxuXHQgICAgICAgIC8vIGtpbmRhIHVnbHkgaGFjaywgYnV0IGRvZXMgdGhlIGpvYi5cblx0ICAgICAgICB2YWx1ZSA9IGF0dHJzW2ldLnZhbHVlO1xuXHQgICAgICAgIGlmIChpc1NpbXBsZVBhdGgodmFsdWUpKSB7XG5cdCAgICAgICAgICB2YWx1ZSArPSAnLmFwcGx5KHRoaXMsICRhcmd1bWVudHMpJztcblx0ICAgICAgICB9XG5cdCAgICAgICAgaGFuZGxlciA9ICh2bS5fc2NvcGUgfHwgdm0uX2NvbnRleHQpLiRldmFsKHZhbHVlLCB0cnVlKTtcblx0ICAgICAgICBoYW5kbGVyLl9mcm9tUGFyZW50ID0gdHJ1ZTtcblx0ICAgICAgICB2bS4kb24obmFtZS5yZXBsYWNlKGV2ZW50UkUpLCBoYW5kbGVyKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmVnaXN0ZXIgY2FsbGJhY2tzIGZvciBvcHRpb24gZXZlbnRzIGFuZCB3YXRjaGVycy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25cblx0ICAgKiBAcGFyYW0ge09iamVjdH0gaGFzaFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZWdpc3RlckNhbGxiYWNrcyh2bSwgYWN0aW9uLCBoYXNoKSB7XG5cdCAgICBpZiAoIWhhc2gpIHJldHVybjtcblx0ICAgIHZhciBoYW5kbGVycywga2V5LCBpLCBqO1xuXHQgICAgZm9yIChrZXkgaW4gaGFzaCkge1xuXHQgICAgICBoYW5kbGVycyA9IGhhc2hba2V5XTtcblx0ICAgICAgaWYgKGlzQXJyYXkoaGFuZGxlcnMpKSB7XG5cdCAgICAgICAgZm9yIChpID0gMCwgaiA9IGhhbmRsZXJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHQgICAgICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyc1tpXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlcnMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBIZWxwZXIgdG8gcmVnaXN0ZXIgYW4gZXZlbnQvd2F0Y2ggY2FsbGJhY2suXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfE9iamVjdH0gaGFuZGxlclxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLCBvcHRpb25zKSB7XG5cdCAgICB2YXIgdHlwZSA9IHR5cGVvZiBoYW5kbGVyO1xuXHQgICAgaWYgKHR5cGUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgdm1bYWN0aW9uXShrZXksIGhhbmRsZXIsIG9wdGlvbnMpO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlID09PSAnc3RyaW5nJykge1xuXHQgICAgICB2YXIgbWV0aG9kcyA9IHZtLiRvcHRpb25zLm1ldGhvZHM7XG5cdCAgICAgIHZhciBtZXRob2QgPSBtZXRob2RzICYmIG1ldGhvZHNbaGFuZGxlcl07XG5cdCAgICAgIGlmIChtZXRob2QpIHtcblx0ICAgICAgICB2bVthY3Rpb25dKGtleSwgbWV0aG9kLCBvcHRpb25zKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1Vua25vd24gbWV0aG9kOiBcIicgKyBoYW5kbGVyICsgJ1wiIHdoZW4gJyArICdyZWdpc3RlcmluZyBjYWxsYmFjayBmb3IgJyArIGFjdGlvbiArICc6IFwiJyArIGtleSArICdcIi4nLCB2bSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoaGFuZGxlciAmJiB0eXBlID09PSAnb2JqZWN0Jykge1xuXHQgICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXIuaGFuZGxlciwgaGFuZGxlcik7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBTZXR1cCByZWN1cnNpdmUgYXR0YWNoZWQvZGV0YWNoZWQgY2FsbHNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdERPTUhvb2tzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy4kb24oJ2hvb2s6YXR0YWNoZWQnLCBvbkF0dGFjaGVkKTtcblx0ICAgIHRoaXMuJG9uKCdob29rOmRldGFjaGVkJywgb25EZXRhY2hlZCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ2FsbGJhY2sgdG8gcmVjdXJzaXZlbHkgY2FsbCBhdHRhY2hlZCBob29rIG9uIGNoaWxkcmVuXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIG9uQXR0YWNoZWQoKSB7XG5cdCAgICBpZiAoIXRoaXMuX2lzQXR0YWNoZWQpIHtcblx0ICAgICAgdGhpcy5faXNBdHRhY2hlZCA9IHRydWU7XG5cdCAgICAgIHRoaXMuJGNoaWxkcmVuLmZvckVhY2goY2FsbEF0dGFjaCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBJdGVyYXRvciB0byBjYWxsIGF0dGFjaGVkIGhvb2tcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjYWxsQXR0YWNoKGNoaWxkKSB7XG5cdCAgICBpZiAoIWNoaWxkLl9pc0F0dGFjaGVkICYmIGluRG9jKGNoaWxkLiRlbCkpIHtcblx0ICAgICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQ2FsbGJhY2sgdG8gcmVjdXJzaXZlbHkgY2FsbCBkZXRhY2hlZCBob29rIG9uIGNoaWxkcmVuXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIG9uRGV0YWNoZWQoKSB7XG5cdCAgICBpZiAodGhpcy5faXNBdHRhY2hlZCkge1xuXHQgICAgICB0aGlzLl9pc0F0dGFjaGVkID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuJGNoaWxkcmVuLmZvckVhY2goY2FsbERldGFjaCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBJdGVyYXRvciB0byBjYWxsIGRldGFjaGVkIGhvb2tcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjYWxsRGV0YWNoKGNoaWxkKSB7XG5cdCAgICBpZiAoY2hpbGQuX2lzQXR0YWNoZWQgJiYgIWluRG9jKGNoaWxkLiRlbCkpIHtcblx0ICAgICAgY2hpbGQuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogVHJpZ2dlciBhbGwgaGFuZGxlcnMgZm9yIGEgaG9va1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGhvb2tcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fY2FsbEhvb2sgPSBmdW5jdGlvbiAoaG9vaykge1xuXHQgICAgdGhpcy4kZW1pdCgncHJlLWhvb2s6JyArIGhvb2spO1xuXHQgICAgdmFyIGhhbmRsZXJzID0gdGhpcy4kb3B0aW9uc1tob29rXTtcblx0ICAgIGlmIChoYW5kbGVycykge1xuXHQgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IGhhbmRsZXJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHQgICAgICAgIGhhbmRsZXJzW2ldLmNhbGwodGhpcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHRoaXMuJGVtaXQoJ2hvb2s6JyArIGhvb2spO1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG5vb3AkMSgpIHt9XG5cdFxuXHQvKipcblx0ICogQSBkaXJlY3RpdmUgbGlua3MgYSBET00gZWxlbWVudCB3aXRoIGEgcGllY2Ugb2YgZGF0YSxcblx0ICogd2hpY2ggaXMgdGhlIHJlc3VsdCBvZiBldmFsdWF0aW5nIGFuIGV4cHJlc3Npb24uXG5cdCAqIEl0IHJlZ2lzdGVycyBhIHdhdGNoZXIgd2l0aCB0aGUgZXhwcmVzc2lvbiBhbmQgY2FsbHNcblx0ICogdGhlIERPTSB1cGRhdGUgZnVuY3Rpb24gd2hlbiBhIGNoYW5nZSBpcyB0cmlnZ2VyZWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBkZXNjcmlwdG9yXG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IG5hbWVcblx0ICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gZGVmXG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGV4cHJlc3Npb25cblx0ICogICAgICAgICAgICAgICAgIC0ge0FycmF5PE9iamVjdD59IFtmaWx0ZXJzXVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBbbW9kaWZpZXJzXVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gbGl0ZXJhbFxuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBhdHRyXG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGFyZ1xuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSByYXdcblx0ICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gW3JlZl1cblx0ICogICAgICAgICAgICAgICAgIC0ge0FycmF5PE9iamVjdD59IFtpbnRlcnBdXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBbaGFzT25lVGltZV1cblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7Tm9kZX0gZWxcblx0ICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIHRyYW5zY2x1c2lvbiBob3N0IGNvbXBvbmVudFxuXHQgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG5cdCAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIG93bmVyIGZyYWdtZW50XG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0ZnVuY3Rpb24gRGlyZWN0aXZlKGRlc2NyaXB0b3IsIHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICB0aGlzLnZtID0gdm07XG5cdCAgdGhpcy5lbCA9IGVsO1xuXHQgIC8vIGNvcHkgZGVzY3JpcHRvciBwcm9wZXJ0aWVzXG5cdCAgdGhpcy5kZXNjcmlwdG9yID0gZGVzY3JpcHRvcjtcblx0ICB0aGlzLm5hbWUgPSBkZXNjcmlwdG9yLm5hbWU7XG5cdCAgdGhpcy5leHByZXNzaW9uID0gZGVzY3JpcHRvci5leHByZXNzaW9uO1xuXHQgIHRoaXMuYXJnID0gZGVzY3JpcHRvci5hcmc7XG5cdCAgdGhpcy5tb2RpZmllcnMgPSBkZXNjcmlwdG9yLm1vZGlmaWVycztcblx0ICB0aGlzLmZpbHRlcnMgPSBkZXNjcmlwdG9yLmZpbHRlcnM7XG5cdCAgdGhpcy5saXRlcmFsID0gdGhpcy5tb2RpZmllcnMgJiYgdGhpcy5tb2RpZmllcnMubGl0ZXJhbDtcblx0ICAvLyBwcml2YXRlXG5cdCAgdGhpcy5fbG9ja2VkID0gZmFsc2U7XG5cdCAgdGhpcy5fYm91bmQgPSBmYWxzZTtcblx0ICB0aGlzLl9saXN0ZW5lcnMgPSBudWxsO1xuXHQgIC8vIGxpbmsgY29udGV4dFxuXHQgIHRoaXMuX2hvc3QgPSBob3N0O1xuXHQgIHRoaXMuX3Njb3BlID0gc2NvcGU7XG5cdCAgdGhpcy5fZnJhZyA9IGZyYWc7XG5cdCAgLy8gc3RvcmUgZGlyZWN0aXZlcyBvbiBub2RlIGluIGRldiBtb2RlXG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbCkge1xuXHQgICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMgPSB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcyB8fCBbXTtcblx0ICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzLnB1c2godGhpcyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogSW5pdGlhbGl6ZSB0aGUgZGlyZWN0aXZlLCBtaXhpbiBkZWZpbml0aW9uIHByb3BlcnRpZXMsXG5cdCAqIHNldHVwIHRoZSB3YXRjaGVyLCBjYWxsIGRlZmluaXRpb24gYmluZCgpIGFuZCB1cGRhdGUoKVxuXHQgKiBpZiBwcmVzZW50LlxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX2JpbmQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIG5hbWUgPSB0aGlzLm5hbWU7XG5cdCAgdmFyIGRlc2NyaXB0b3IgPSB0aGlzLmRlc2NyaXB0b3I7XG5cdFxuXHQgIC8vIHJlbW92ZSBhdHRyaWJ1dGVcblx0ICBpZiAoKG5hbWUgIT09ICdjbG9haycgfHwgdGhpcy52bS5faXNDb21waWxlZCkgJiYgdGhpcy5lbCAmJiB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSkge1xuXHQgICAgdmFyIGF0dHIgPSBkZXNjcmlwdG9yLmF0dHIgfHwgJ3YtJyArIG5hbWU7XG5cdCAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcblx0ICB9XG5cdFxuXHQgIC8vIGNvcHkgZGVmIHByb3BlcnRpZXNcblx0ICB2YXIgZGVmID0gZGVzY3JpcHRvci5kZWY7XG5cdCAgaWYgKHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHRoaXMudXBkYXRlID0gZGVmO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBleHRlbmQodGhpcywgZGVmKTtcblx0ICB9XG5cdFxuXHQgIC8vIHNldHVwIGRpcmVjdGl2ZSBwYXJhbXNcblx0ICB0aGlzLl9zZXR1cFBhcmFtcygpO1xuXHRcblx0ICAvLyBpbml0aWFsIGJpbmRcblx0ICBpZiAodGhpcy5iaW5kKSB7XG5cdCAgICB0aGlzLmJpbmQoKTtcblx0ICB9XG5cdCAgdGhpcy5fYm91bmQgPSB0cnVlO1xuXHRcblx0ICBpZiAodGhpcy5saXRlcmFsKSB7XG5cdCAgICB0aGlzLnVwZGF0ZSAmJiB0aGlzLnVwZGF0ZShkZXNjcmlwdG9yLnJhdyk7XG5cdCAgfSBlbHNlIGlmICgodGhpcy5leHByZXNzaW9uIHx8IHRoaXMubW9kaWZpZXJzKSAmJiAodGhpcy51cGRhdGUgfHwgdGhpcy50d29XYXkpICYmICF0aGlzLl9jaGVja1N0YXRlbWVudCgpKSB7XG5cdCAgICAvLyB3cmFwcGVkIHVwZGF0ZXIgZm9yIGNvbnRleHRcblx0ICAgIHZhciBkaXIgPSB0aGlzO1xuXHQgICAgaWYgKHRoaXMudXBkYXRlKSB7XG5cdCAgICAgIHRoaXMuX3VwZGF0ZSA9IGZ1bmN0aW9uICh2YWwsIG9sZFZhbCkge1xuXHQgICAgICAgIGlmICghZGlyLl9sb2NrZWQpIHtcblx0ICAgICAgICAgIGRpci51cGRhdGUodmFsLCBvbGRWYWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuX3VwZGF0ZSA9IG5vb3AkMTtcblx0ICAgIH1cblx0ICAgIHZhciBwcmVQcm9jZXNzID0gdGhpcy5fcHJlUHJvY2VzcyA/IGJpbmQodGhpcy5fcHJlUHJvY2VzcywgdGhpcykgOiBudWxsO1xuXHQgICAgdmFyIHBvc3RQcm9jZXNzID0gdGhpcy5fcG9zdFByb2Nlc3MgPyBiaW5kKHRoaXMuX3Bvc3RQcm9jZXNzLCB0aGlzKSA6IG51bGw7XG5cdCAgICB2YXIgd2F0Y2hlciA9IHRoaXMuX3dhdGNoZXIgPSBuZXcgV2F0Y2hlcih0aGlzLnZtLCB0aGlzLmV4cHJlc3Npb24sIHRoaXMuX3VwZGF0ZSwgLy8gY2FsbGJhY2tcblx0ICAgIHtcblx0ICAgICAgZmlsdGVyczogdGhpcy5maWx0ZXJzLFxuXHQgICAgICB0d29XYXk6IHRoaXMudHdvV2F5LFxuXHQgICAgICBkZWVwOiB0aGlzLmRlZXAsXG5cdCAgICAgIHByZVByb2Nlc3M6IHByZVByb2Nlc3MsXG5cdCAgICAgIHBvc3RQcm9jZXNzOiBwb3N0UHJvY2Vzcyxcblx0ICAgICAgc2NvcGU6IHRoaXMuX3Njb3BlXG5cdCAgICB9KTtcblx0ICAgIC8vIHYtbW9kZWwgd2l0aCBpbml0YWwgaW5saW5lIHZhbHVlIG5lZWQgdG8gc3luYyBiYWNrIHRvXG5cdCAgICAvLyBtb2RlbCBpbnN0ZWFkIG9mIHVwZGF0ZSB0byBET00gb24gaW5pdC4gVGhleSB3b3VsZFxuXHQgICAgLy8gc2V0IHRoZSBhZnRlckJpbmQgaG9vayB0byBpbmRpY2F0ZSB0aGF0LlxuXHQgICAgaWYgKHRoaXMuYWZ0ZXJCaW5kKSB7XG5cdCAgICAgIHRoaXMuYWZ0ZXJCaW5kKCk7XG5cdCAgICB9IGVsc2UgaWYgKHRoaXMudXBkYXRlKSB7XG5cdCAgICAgIHRoaXMudXBkYXRlKHdhdGNoZXIudmFsdWUpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTZXR1cCBhbGwgcGFyYW0gYXR0cmlidXRlcywgZS5nLiB0cmFjay1ieSxcblx0ICogdHJhbnNpdGlvbi1tb2RlLCBldGMuLi5cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl9zZXR1cFBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBpZiAoIXRoaXMucGFyYW1zKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBwYXJhbXMgPSB0aGlzLnBhcmFtcztcblx0ICAvLyBzd2FwIHRoZSBwYXJhbXMgYXJyYXkgd2l0aCBhIGZyZXNoIG9iamVjdC5cblx0ICB0aGlzLnBhcmFtcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgdmFyIGkgPSBwYXJhbXMubGVuZ3RoO1xuXHQgIHZhciBrZXksIHZhbCwgbWFwcGVkS2V5O1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGtleSA9IGh5cGhlbmF0ZShwYXJhbXNbaV0pO1xuXHQgICAgbWFwcGVkS2V5ID0gY2FtZWxpemUoa2V5KTtcblx0ICAgIHZhbCA9IGdldEJpbmRBdHRyKHRoaXMuZWwsIGtleSk7XG5cdCAgICBpZiAodmFsICE9IG51bGwpIHtcblx0ICAgICAgLy8gZHluYW1pY1xuXHQgICAgICB0aGlzLl9zZXR1cFBhcmFtV2F0Y2hlcihtYXBwZWRLZXksIHZhbCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBzdGF0aWNcblx0ICAgICAgdmFsID0gZ2V0QXR0cih0aGlzLmVsLCBrZXkpO1xuXHQgICAgICBpZiAodmFsICE9IG51bGwpIHtcblx0ICAgICAgICB0aGlzLnBhcmFtc1ttYXBwZWRLZXldID0gdmFsID09PSAnJyA/IHRydWUgOiB2YWw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogU2V0dXAgYSB3YXRjaGVyIGZvciBhIGR5bmFtaWMgcGFyYW0uXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cHJlc3Npb25cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl9zZXR1cFBhcmFtV2F0Y2hlciA9IGZ1bmN0aW9uIChrZXksIGV4cHJlc3Npb24pIHtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuXHQgIHZhciB1bndhdGNoID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiR3YXRjaChleHByZXNzaW9uLCBmdW5jdGlvbiAodmFsLCBvbGRWYWwpIHtcblx0ICAgIHNlbGYucGFyYW1zW2tleV0gPSB2YWw7XG5cdCAgICAvLyBzaW5jZSB3ZSBhcmUgaW4gaW1tZWRpYXRlIG1vZGUsXG5cdCAgICAvLyBvbmx5IGNhbGwgdGhlIHBhcmFtIGNoYW5nZSBjYWxsYmFja3MgaWYgdGhpcyBpcyBub3QgdGhlIGZpcnN0IHVwZGF0ZS5cblx0ICAgIGlmIChjYWxsZWQpIHtcblx0ICAgICAgdmFyIGNiID0gc2VsZi5wYXJhbVdhdGNoZXJzICYmIHNlbGYucGFyYW1XYXRjaGVyc1trZXldO1xuXHQgICAgICBpZiAoY2IpIHtcblx0ICAgICAgICBjYi5jYWxsKHNlbGYsIHZhbCwgb2xkVmFsKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgY2FsbGVkID0gdHJ1ZTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBpbW1lZGlhdGU6IHRydWUsXG5cdCAgICB1c2VyOiBmYWxzZVxuXHQgIH0pOyh0aGlzLl9wYXJhbVVud2F0Y2hGbnMgfHwgKHRoaXMuX3BhcmFtVW53YXRjaEZucyA9IFtdKSkucHVzaCh1bndhdGNoKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiB0aGUgZGlyZWN0aXZlIGlzIGEgZnVuY3Rpb24gY2FsbGVyXG5cdCAqIGFuZCBpZiB0aGUgZXhwcmVzc2lvbiBpcyBhIGNhbGxhYmxlIG9uZS4gSWYgYm90aCB0cnVlLFxuXHQgKiB3ZSB3cmFwIHVwIHRoZSBleHByZXNzaW9uIGFuZCB1c2UgaXQgYXMgdGhlIGV2ZW50XG5cdCAqIGhhbmRsZXIuXG5cdCAqXG5cdCAqIGUuZy4gb24tY2xpY2s9XCJhKytcIlxuXHQgKlxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX2NoZWNrU3RhdGVtZW50ID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBleHByZXNzaW9uID0gdGhpcy5leHByZXNzaW9uO1xuXHQgIGlmIChleHByZXNzaW9uICYmIHRoaXMuYWNjZXB0U3RhdGVtZW50ICYmICFpc1NpbXBsZVBhdGgoZXhwcmVzc2lvbikpIHtcblx0ICAgIHZhciBmbiA9IHBhcnNlRXhwcmVzc2lvbihleHByZXNzaW9uKS5nZXQ7XG5cdCAgICB2YXIgc2NvcGUgPSB0aGlzLl9zY29wZSB8fCB0aGlzLnZtO1xuXHQgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyKGUpIHtcblx0ICAgICAgc2NvcGUuJGV2ZW50ID0gZTtcblx0ICAgICAgZm4uY2FsbChzY29wZSwgc2NvcGUpO1xuXHQgICAgICBzY29wZS4kZXZlbnQgPSBudWxsO1xuXHQgICAgfTtcblx0ICAgIGlmICh0aGlzLmZpbHRlcnMpIHtcblx0ICAgICAgaGFuZGxlciA9IHNjb3BlLl9hcHBseUZpbHRlcnMoaGFuZGxlciwgbnVsbCwgdGhpcy5maWx0ZXJzKTtcblx0ICAgIH1cblx0ICAgIHRoaXMudXBkYXRlKGhhbmRsZXIpO1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFNldCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSB3aXRoIHRoZSBzZXR0ZXIuXG5cdCAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0d28td2F5IGRpcmVjdGl2ZXNcblx0ICogZS5nLiB2LW1vZGVsLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgaWYgKHRoaXMudHdvV2F5KSB7XG5cdCAgICB0aGlzLl93aXRoTG9jayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMuX3dhdGNoZXIuc2V0KHZhbHVlKTtcblx0ICAgIH0pO1xuXHQgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgd2FybignRGlyZWN0aXZlLnNldCgpIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHR3b1dheScgKyAnZGlyZWN0aXZlcy4nKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogRXhlY3V0ZSBhIGZ1bmN0aW9uIHdoaWxlIHByZXZlbnRpbmcgdGhhdCBmdW5jdGlvbiBmcm9tXG5cdCAqIHRyaWdnZXJpbmcgdXBkYXRlcyBvbiB0aGlzIGRpcmVjdGl2ZSBpbnN0YW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl93aXRoTG9jayA9IGZ1bmN0aW9uIChmbikge1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICBzZWxmLl9sb2NrZWQgPSB0cnVlO1xuXHQgIGZuLmNhbGwoc2VsZik7XG5cdCAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHQgICAgc2VsZi5fbG9ja2VkID0gZmFsc2U7XG5cdCAgfSk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ29udmVuaWVuY2UgbWV0aG9kIHRoYXQgYXR0YWNoZXMgYSBET00gZXZlbnQgbGlzdGVuZXJcblx0ICogdG8gdGhlIGRpcmVjdGl2ZSBlbGVtZW50IGFuZCBhdXRvbWV0aWNhbGx5IHRlYXJzIGl0IGRvd25cblx0ICogZHVyaW5nIHVuYmluZC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcblx0ICogQHBhcmFtIHtCb29sZWFufSBbdXNlQ2FwdHVyZV1cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2ZW50LCBoYW5kbGVyLCB1c2VDYXB0dXJlKSB7XG5cdCAgb24odGhpcy5lbCwgZXZlbnQsIGhhbmRsZXIsIHVzZUNhcHR1cmUpOyh0aGlzLl9saXN0ZW5lcnMgfHwgKHRoaXMuX2xpc3RlbmVycyA9IFtdKSkucHVzaChbZXZlbnQsIGhhbmRsZXJdKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBUZWFyZG93biB0aGUgd2F0Y2hlciBhbmQgY2FsbCB1bmJpbmQuXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5fdGVhcmRvd24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKHRoaXMuX2JvdW5kKSB7XG5cdCAgICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xuXHQgICAgaWYgKHRoaXMudW5iaW5kKSB7XG5cdCAgICAgIHRoaXMudW5iaW5kKCk7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5fd2F0Y2hlcikge1xuXHQgICAgICB0aGlzLl93YXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgICB9XG5cdCAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xuXHQgICAgdmFyIGk7XG5cdCAgICBpZiAobGlzdGVuZXJzKSB7XG5cdCAgICAgIGkgPSBsaXN0ZW5lcnMubGVuZ3RoO1xuXHQgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAgb2ZmKHRoaXMuZWwsIGxpc3RlbmVyc1tpXVswXSwgbGlzdGVuZXJzW2ldWzFdKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdmFyIHVud2F0Y2hGbnMgPSB0aGlzLl9wYXJhbVVud2F0Y2hGbnM7XG5cdCAgICBpZiAodW53YXRjaEZucykge1xuXHQgICAgICBpID0gdW53YXRjaEZucy5sZW5ndGg7XG5cdCAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICB1bndhdGNoRm5zW2ldKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwpIHtcblx0ICAgICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMuJHJlbW92ZSh0aGlzKTtcblx0ICAgIH1cblx0ICAgIHRoaXMudm0gPSB0aGlzLmVsID0gdGhpcy5fd2F0Y2hlciA9IHRoaXMuX2xpc3RlbmVycyA9IG51bGw7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gbGlmZWN5Y2xlTWl4aW4gKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIFVwZGF0ZSB2LXJlZiBmb3IgY29tcG9uZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fdXBkYXRlUmVmID0gZnVuY3Rpb24gKHJlbW92ZSkge1xuXHQgICAgdmFyIHJlZiA9IHRoaXMuJG9wdGlvbnMuX3JlZjtcblx0ICAgIGlmIChyZWYpIHtcblx0ICAgICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy5fY29udGV4dCkuJHJlZnM7XG5cdCAgICAgIGlmIChyZW1vdmUpIHtcblx0ICAgICAgICBpZiAocmVmc1tyZWZdID09PSB0aGlzKSB7XG5cdCAgICAgICAgICByZWZzW3JlZl0gPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZWZzW3JlZl0gPSB0aGlzO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogVHJhbnNjbHVkZSwgY29tcGlsZSBhbmQgbGluayBlbGVtZW50LlxuXHQgICAqXG5cdCAgICogSWYgYSBwcmUtY29tcGlsZWQgbGlua2VyIGlzIGF2YWlsYWJsZSwgdGhhdCBtZWFucyB0aGVcblx0ICAgKiBwYXNzZWQgaW4gZWxlbWVudCB3aWxsIGJlIHByZS10cmFuc2NsdWRlZCBhbmQgY29tcGlsZWRcblx0ICAgKiBhcyB3ZWxsIC0gYWxsIHdlIG5lZWQgdG8gZG8gaXMgdG8gY2FsbCB0aGUgbGlua2VyLlxuXHQgICAqXG5cdCAgICogT3RoZXJ3aXNlIHdlIG5lZWQgdG8gY2FsbCB0cmFuc2NsdWRlL2NvbXBpbGUvbGluayBoZXJlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9jb21waWxlID0gZnVuY3Rpb24gKGVsKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG5cdFxuXHQgICAgLy8gdHJhbnNjbHVkZSBhbmQgaW5pdCBlbGVtZW50XG5cdCAgICAvLyB0cmFuc2NsdWRlIGNhbiBwb3RlbnRpYWxseSByZXBsYWNlIG9yaWdpbmFsXG5cdCAgICAvLyBzbyB3ZSBuZWVkIHRvIGtlZXAgcmVmZXJlbmNlOyB0aGlzIHN0ZXAgYWxzbyBpbmplY3RzXG5cdCAgICAvLyB0aGUgdGVtcGxhdGUgYW5kIGNhY2hlcyB0aGUgb3JpZ2luYWwgYXR0cmlidXRlc1xuXHQgICAgLy8gb24gdGhlIGNvbnRhaW5lciBub2RlIGFuZCByZXBsYWNlciBub2RlLlxuXHQgICAgdmFyIG9yaWdpbmFsID0gZWw7XG5cdCAgICBlbCA9IHRyYW5zY2x1ZGUoZWwsIG9wdGlvbnMpO1xuXHQgICAgdGhpcy5faW5pdEVsZW1lbnQoZWwpO1xuXHRcblx0ICAgIC8vIGhhbmRsZSB2LXByZSBvbiByb290IG5vZGUgKCMyMDI2KVxuXHQgICAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGdldEF0dHIoZWwsICd2LXByZScpICE9PSBudWxsKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICAvLyByb290IGlzIGFsd2F5cyBjb21waWxlZCBwZXItaW5zdGFuY2UsIGJlY2F1c2Vcblx0ICAgIC8vIGNvbnRhaW5lciBhdHRycyBhbmQgcHJvcHMgY2FuIGJlIGRpZmZlcmVudCBldmVyeSB0aW1lLlxuXHQgICAgdmFyIGNvbnRleHRPcHRpb25zID0gdGhpcy5fY29udGV4dCAmJiB0aGlzLl9jb250ZXh0LiRvcHRpb25zO1xuXHQgICAgdmFyIHJvb3RMaW5rZXIgPSBjb21waWxlUm9vdChlbCwgb3B0aW9ucywgY29udGV4dE9wdGlvbnMpO1xuXHRcblx0ICAgIC8vIHJlc29sdmUgc2xvdCBkaXN0cmlidXRpb25cblx0ICAgIHJlc29sdmVTbG90cyh0aGlzLCBvcHRpb25zLl9jb250ZW50KTtcblx0XG5cdCAgICAvLyBjb21waWxlIGFuZCBsaW5rIHRoZSByZXN0XG5cdCAgICB2YXIgY29udGVudExpbmtGbjtcblx0ICAgIHZhciBjdG9yID0gdGhpcy5jb25zdHJ1Y3Rvcjtcblx0ICAgIC8vIGNvbXBvbmVudCBjb21waWxhdGlvbiBjYW4gYmUgY2FjaGVkXG5cdCAgICAvLyBhcyBsb25nIGFzIGl0J3Mgbm90IHVzaW5nIGlubGluZS10ZW1wbGF0ZVxuXHQgICAgaWYgKG9wdGlvbnMuX2xpbmtlckNhY2hhYmxlKSB7XG5cdCAgICAgIGNvbnRlbnRMaW5rRm4gPSBjdG9yLmxpbmtlcjtcblx0ICAgICAgaWYgKCFjb250ZW50TGlua0ZuKSB7XG5cdCAgICAgICAgY29udGVudExpbmtGbiA9IGN0b3IubGlua2VyID0gY29tcGlsZShlbCwgb3B0aW9ucyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBsaW5rIHBoYXNlXG5cdCAgICAvLyBtYWtlIHN1cmUgdG8gbGluayByb290IHdpdGggcHJvcCBzY29wZSFcblx0ICAgIHZhciByb290VW5saW5rRm4gPSByb290TGlua2VyKHRoaXMsIGVsLCB0aGlzLl9zY29wZSk7XG5cdCAgICB2YXIgY29udGVudFVubGlua0ZuID0gY29udGVudExpbmtGbiA/IGNvbnRlbnRMaW5rRm4odGhpcywgZWwpIDogY29tcGlsZShlbCwgb3B0aW9ucykodGhpcywgZWwpO1xuXHRcblx0ICAgIC8vIHJlZ2lzdGVyIGNvbXBvc2l0ZSB1bmxpbmsgZnVuY3Rpb25cblx0ICAgIC8vIHRvIGJlIGNhbGxlZCBkdXJpbmcgaW5zdGFuY2UgZGVzdHJ1Y3Rpb25cblx0ICAgIHRoaXMuX3VubGlua0ZuID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICByb290VW5saW5rRm4oKTtcblx0ICAgICAgLy8gcGFzc2luZyBkZXN0cm95aW5nOiB0cnVlIHRvIGF2b2lkIHNlYXJjaGluZyBhbmRcblx0ICAgICAgLy8gc3BsaWNpbmcgdGhlIGRpcmVjdGl2ZXNcblx0ICAgICAgY29udGVudFVubGlua0ZuKHRydWUpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBmaW5hbGx5IHJlcGxhY2Ugb3JpZ2luYWxcblx0ICAgIGlmIChvcHRpb25zLnJlcGxhY2UpIHtcblx0ICAgICAgcmVwbGFjZShvcmlnaW5hbCwgZWwpO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuX2lzQ29tcGlsZWQgPSB0cnVlO1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2NvbXBpbGVkJyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5pdGlhbGl6ZSBpbnN0YW5jZSBlbGVtZW50LiBDYWxsZWQgaW4gdGhlIHB1YmxpY1xuXHQgICAqICRtb3VudCgpIG1ldGhvZC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWwpIHtcblx0ICAgIGlmIChpc0ZyYWdtZW50KGVsKSkge1xuXHQgICAgICB0aGlzLl9pc0ZyYWdtZW50ID0gdHJ1ZTtcblx0ICAgICAgdGhpcy4kZWwgPSB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gZWwuZmlyc3RDaGlsZDtcblx0ICAgICAgdGhpcy5fZnJhZ21lbnRFbmQgPSBlbC5sYXN0Q2hpbGQ7XG5cdCAgICAgIC8vIHNldCBwZXJzaXN0ZWQgdGV4dCBhbmNob3JzIHRvIGVtcHR5XG5cdCAgICAgIGlmICh0aGlzLl9mcmFnbWVudFN0YXJ0Lm5vZGVUeXBlID09PSAzKSB7XG5cdCAgICAgICAgdGhpcy5fZnJhZ21lbnRTdGFydC5kYXRhID0gdGhpcy5fZnJhZ21lbnRFbmQuZGF0YSA9ICcnO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuX2ZyYWdtZW50ID0gZWw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLiRlbCA9IGVsO1xuXHQgICAgfVxuXHQgICAgdGhpcy4kZWwuX192dWVfXyA9IHRoaXM7XG5cdCAgICB0aGlzLl9jYWxsSG9vaygnYmVmb3JlQ29tcGlsZScpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENyZWF0ZSBhbmQgYmluZCBhIGRpcmVjdGl2ZSB0byBhbiBlbGVtZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3IgLSBwYXJzZWQgZGlyZWN0aXZlIGRlc2NyaXB0b3Jcblx0ICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgICAtIHRhcmdldCBub2RlXG5cdCAgICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIHRyYW5zY2x1c2lvbiBob3N0IGNvbXBvbmVudFxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBvd25lciBmcmFnbWVudFxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9iaW5kRGlyID0gZnVuY3Rpb24gKGRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICB0aGlzLl9kaXJlY3RpdmVzLnB1c2gobmV3IERpcmVjdGl2ZShkZXNjcmlwdG9yLCB0aGlzLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZykpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRlYXJkb3duIGFuIGluc3RhbmNlLCB1bm9ic2VydmVzIHRoZSBkYXRhLCB1bmJpbmQgYWxsIHRoZVxuXHQgICAqIGRpcmVjdGl2ZXMsIHR1cm4gb2ZmIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzLCBldGMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZSAtIHdoZXRoZXIgdG8gcmVtb3ZlIHRoZSBET00gbm9kZS5cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cCAtIGlmIHRydWUsIGRlZmVyIGNsZWFudXAgdG9cblx0ICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlIGNhbGxlZCBsYXRlclxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9kZXN0cm95ID0gZnVuY3Rpb24gKHJlbW92ZSwgZGVmZXJDbGVhbnVwKSB7XG5cdCAgICBpZiAodGhpcy5faXNCZWluZ0Rlc3Ryb3llZCkge1xuXHQgICAgICBpZiAoIWRlZmVyQ2xlYW51cCkge1xuXHQgICAgICAgIHRoaXMuX2NsZWFudXAoKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGRlc3Ryb3lSZWFkeTtcblx0ICAgIHZhciBwZW5kaW5nUmVtb3ZhbDtcblx0XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAvLyBDbGVhbnVwIHNob3VsZCBiZSBjYWxsZWQgZWl0aGVyIHN5bmNocm9ub3VzbHkgb3IgYXN5bmNocm9ub3lzbHkgYXNcblx0ICAgIC8vIGNhbGxiYWNrIG9mIHRoaXMuJHJlbW92ZSgpLCBvciBpZiByZW1vdmUgYW5kIGRlZmVyQ2xlYW51cCBhcmUgZmFsc2UuXG5cdCAgICAvLyBJbiBhbnkgY2FzZSBpdCBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIGFsbCBvdGhlciByZW1vdmluZywgdW5iaW5kaW5nIGFuZFxuXHQgICAgLy8gdHVybmluZyBvZiBpcyBkb25lXG5cdCAgICB2YXIgY2xlYW51cElmUG9zc2libGUgPSBmdW5jdGlvbiBjbGVhbnVwSWZQb3NzaWJsZSgpIHtcblx0ICAgICAgaWYgKGRlc3Ryb3lSZWFkeSAmJiAhcGVuZGluZ1JlbW92YWwgJiYgIWRlZmVyQ2xlYW51cCkge1xuXHQgICAgICAgIHNlbGYuX2NsZWFudXAoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvLyByZW1vdmUgRE9NIGVsZW1lbnRcblx0ICAgIGlmIChyZW1vdmUgJiYgdGhpcy4kZWwpIHtcblx0ICAgICAgcGVuZGluZ1JlbW92YWwgPSB0cnVlO1xuXHQgICAgICB0aGlzLiRyZW1vdmUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHBlbmRpbmdSZW1vdmFsID0gZmFsc2U7XG5cdCAgICAgICAgY2xlYW51cElmUG9zc2libGUoKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2JlZm9yZURlc3Ryb3knKTtcblx0ICAgIHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgPSB0cnVlO1xuXHQgICAgdmFyIGk7XG5cdCAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHBhcmVudC4gb25seSBuZWNlc3Nhcnlcblx0ICAgIC8vIGlmIHBhcmVudCBpcyBub3QgYmVpbmcgZGVzdHJveWVkIGFzIHdlbGwuXG5cdCAgICB2YXIgcGFyZW50ID0gdGhpcy4kcGFyZW50O1xuXHQgICAgaWYgKHBhcmVudCAmJiAhcGFyZW50Ll9pc0JlaW5nRGVzdHJveWVkKSB7XG5cdCAgICAgIHBhcmVudC4kY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcblx0ICAgICAgLy8gdW5yZWdpc3RlciByZWYgKHJlbW92ZTogdHJ1ZSlcblx0ICAgICAgdGhpcy5fdXBkYXRlUmVmKHRydWUpO1xuXHQgICAgfVxuXHQgICAgLy8gZGVzdHJveSBhbGwgY2hpbGRyZW4uXG5cdCAgICBpID0gdGhpcy4kY2hpbGRyZW4ubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB0aGlzLiRjaGlsZHJlbltpXS4kZGVzdHJveSgpO1xuXHQgICAgfVxuXHQgICAgLy8gdGVhcmRvd24gcHJvcHNcblx0ICAgIGlmICh0aGlzLl9wcm9wc1VubGlua0ZuKSB7XG5cdCAgICAgIHRoaXMuX3Byb3BzVW5saW5rRm4oKTtcblx0ICAgIH1cblx0ICAgIC8vIHRlYXJkb3duIGFsbCBkaXJlY3RpdmVzLiB0aGlzIGFsc28gdGVhcnNkb3duIGFsbFxuXHQgICAgLy8gZGlyZWN0aXZlLW93bmVkIHdhdGNoZXJzLlxuXHQgICAgaWYgKHRoaXMuX3VubGlua0ZuKSB7XG5cdCAgICAgIHRoaXMuX3VubGlua0ZuKCk7XG5cdCAgICB9XG5cdCAgICBpID0gdGhpcy5fd2F0Y2hlcnMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB0aGlzLl93YXRjaGVyc1tpXS50ZWFyZG93bigpO1xuXHQgICAgfVxuXHQgICAgLy8gcmVtb3ZlIHJlZmVyZW5jZSB0byBzZWxmIG9uICRlbFxuXHQgICAgaWYgKHRoaXMuJGVsKSB7XG5cdCAgICAgIHRoaXMuJGVsLl9fdnVlX18gPSBudWxsO1xuXHQgICAgfVxuXHRcblx0ICAgIGRlc3Ryb3lSZWFkeSA9IHRydWU7XG5cdCAgICBjbGVhbnVwSWZQb3NzaWJsZSgpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENsZWFuIHVwIHRvIGVuc3VyZSBnYXJiYWdlIGNvbGxlY3Rpb24uXG5cdCAgICogVGhpcyBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGxlYXZlIHRyYW5zaXRpb24gaWYgdGhlcmVcblx0ICAgKiBpcyBhbnkuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAodGhpcy5faXNEZXN0cm95ZWQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSBvd25lciBmcmFnbWVudFxuXHQgICAgLy8gZG8gaXQgaW4gY2xlYW51cCBzbyB0aGF0IHdlIGNhbiBjYWxsICRkZXN0cm95IHdpdGhcblx0ICAgIC8vIGRlZmVyIHJpZ2h0IHdoZW4gYSBmcmFnbWVudCBpcyBhYm91dCB0byBiZSByZW1vdmVkLlxuXHQgICAgaWYgKHRoaXMuX2ZyYWcpIHtcblx0ICAgICAgdGhpcy5fZnJhZy5jaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xuXHQgICAgfVxuXHQgICAgLy8gcmVtb3ZlIHJlZmVyZW5jZSBmcm9tIGRhdGEgb2Jcblx0ICAgIC8vIGZyb3plbiBvYmplY3QgbWF5IG5vdCBoYXZlIG9ic2VydmVyLlxuXHQgICAgaWYgKHRoaXMuX2RhdGEgJiYgdGhpcy5fZGF0YS5fX29iX18pIHtcblx0ICAgICAgdGhpcy5fZGF0YS5fX29iX18ucmVtb3ZlVm0odGhpcyk7XG5cdCAgICB9XG5cdCAgICAvLyBDbGVhbiB1cCByZWZlcmVuY2VzIHRvIHByaXZhdGUgcHJvcGVydGllcyBhbmQgb3RoZXJcblx0ICAgIC8vIGluc3RhbmNlcy4gcHJlc2VydmUgcmVmZXJlbmNlIHRvIF9kYXRhIHNvIHRoYXQgcHJveHlcblx0ICAgIC8vIGFjY2Vzc29ycyBzdGlsbCB3b3JrLiBUaGUgb25seSBwb3RlbnRpYWwgc2lkZSBlZmZlY3Rcblx0ICAgIC8vIGhlcmUgaXMgdGhhdCBtdXRhdGluZyB0aGUgaW5zdGFuY2UgYWZ0ZXIgaXQncyBkZXN0cm95ZWRcblx0ICAgIC8vIG1heSBhZmZlY3QgdGhlIHN0YXRlIG9mIG90aGVyIGNvbXBvbmVudHMgdGhhdCBhcmUgc3RpbGxcblx0ICAgIC8vIG9ic2VydmluZyB0aGUgc2FtZSBvYmplY3QsIGJ1dCB0aGF0IHNlZW1zIHRvIGJlIGFcblx0ICAgIC8vIHJlYXNvbmFibGUgcmVzcG9uc2liaWxpdHkgZm9yIHRoZSB1c2VyIHJhdGhlciB0aGFuXG5cdCAgICAvLyBhbHdheXMgdGhyb3dpbmcgYW4gZXJyb3Igb24gdGhlbS5cblx0ICAgIHRoaXMuJGVsID0gdGhpcy4kcGFyZW50ID0gdGhpcy4kcm9vdCA9IHRoaXMuJGNoaWxkcmVuID0gdGhpcy5fd2F0Y2hlcnMgPSB0aGlzLl9jb250ZXh0ID0gdGhpcy5fc2NvcGUgPSB0aGlzLl9kaXJlY3RpdmVzID0gbnVsbDtcblx0ICAgIC8vIGNhbGwgdGhlIGxhc3QgaG9vay4uLlxuXHQgICAgdGhpcy5faXNEZXN0cm95ZWQgPSB0cnVlO1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2Rlc3Ryb3llZCcpO1xuXHQgICAgLy8gdHVybiBvZmYgYWxsIGluc3RhbmNlIGxpc3RlbmVycy5cblx0ICAgIHRoaXMuJG9mZigpO1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1pc2NNaXhpbiAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogQXBwbHkgYSBsaXN0IG9mIGZpbHRlciAoZGVzY3JpcHRvcnMpIHRvIGEgdmFsdWUuXG5cdCAgICogVXNpbmcgcGxhaW4gZm9yIGxvb3BzIGhlcmUgYmVjYXVzZSB0aGlzIHdpbGwgYmUgY2FsbGVkIGluXG5cdCAgICogdGhlIGdldHRlciBvZiBhbnkgd2F0Y2hlciB3aXRoIGZpbHRlcnMgc28gaXQgaXMgdmVyeVxuXHQgICAqIHBlcmZvcm1hbmNlIHNlbnNpdGl2ZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgKiBAcGFyYW0geyp9IFtvbGRWYWx1ZV1cblx0ICAgKiBAcGFyYW0ge0FycmF5fSBmaWx0ZXJzXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSB3cml0ZVxuXHQgICAqIEByZXR1cm4geyp9XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2FwcGx5RmlsdGVycyA9IGZ1bmN0aW9uICh2YWx1ZSwgb2xkVmFsdWUsIGZpbHRlcnMsIHdyaXRlKSB7XG5cdCAgICB2YXIgZmlsdGVyLCBmbiwgYXJncywgYXJnLCBvZmZzZXQsIGksIGwsIGosIGs7XG5cdCAgICBmb3IgKGkgPSAwLCBsID0gZmlsdGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgZmlsdGVyID0gZmlsdGVyc1t3cml0ZSA/IGwgLSBpIC0gMSA6IGldO1xuXHQgICAgICBmbiA9IHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlci5uYW1lLCB0cnVlKTtcblx0ICAgICAgaWYgKCFmbikgY29udGludWU7XG5cdCAgICAgIGZuID0gd3JpdGUgPyBmbi53cml0ZSA6IGZuLnJlYWQgfHwgZm47XG5cdCAgICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIGNvbnRpbnVlO1xuXHQgICAgICBhcmdzID0gd3JpdGUgPyBbdmFsdWUsIG9sZFZhbHVlXSA6IFt2YWx1ZV07XG5cdCAgICAgIG9mZnNldCA9IHdyaXRlID8gMiA6IDE7XG5cdCAgICAgIGlmIChmaWx0ZXIuYXJncykge1xuXHQgICAgICAgIGZvciAoaiA9IDAsIGsgPSBmaWx0ZXIuYXJncy5sZW5ndGg7IGogPCBrOyBqKyspIHtcblx0ICAgICAgICAgIGFyZyA9IGZpbHRlci5hcmdzW2pdO1xuXHQgICAgICAgICAgYXJnc1tqICsgb2Zmc2V0XSA9IGFyZy5keW5hbWljID8gdGhpcy4kZ2V0KGFyZy52YWx1ZSkgOiBhcmcudmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHZhbHVlID0gZm4uYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVzb2x2ZSBhIGNvbXBvbmVudCwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGNvbXBvbmVudFxuXHQgICAqIGlzIGRlZmluZWQgbm9ybWFsbHkgb3IgdXNpbmcgYW4gYXN5bmMgZmFjdG9yeSBmdW5jdGlvbi5cblx0ICAgKiBSZXNvbHZlcyBzeW5jaHJvbm91c2x5IGlmIGFscmVhZHkgcmVzb2x2ZWQsIG90aGVyd2lzZVxuXHQgICAqIHJlc29sdmVzIGFzeW5jaHJvbm91c2x5IGFuZCBjYWNoZXMgdGhlIHJlc29sdmVkXG5cdCAgICogY29uc3RydWN0b3Igb24gdGhlIGZhY3RvcnkuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9yZXNvbHZlQ29tcG9uZW50ID0gZnVuY3Rpb24gKHZhbHVlLCBjYikge1xuXHQgICAgdmFyIGZhY3Rvcnk7XG5cdCAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIGZhY3RvcnkgPSB2YWx1ZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGZhY3RvcnkgPSByZXNvbHZlQXNzZXQodGhpcy4kb3B0aW9ucywgJ2NvbXBvbmVudHMnLCB2YWx1ZSwgdHJ1ZSk7XG5cdCAgICB9XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghZmFjdG9yeSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICAvLyBhc3luYyBjb21wb25lbnQgZmFjdG9yeVxuXHQgICAgaWYgKCFmYWN0b3J5Lm9wdGlvbnMpIHtcblx0ICAgICAgaWYgKGZhY3RvcnkucmVzb2x2ZWQpIHtcblx0ICAgICAgICAvLyBjYWNoZWRcblx0ICAgICAgICBjYihmYWN0b3J5LnJlc29sdmVkKTtcblx0ICAgICAgfSBlbHNlIGlmIChmYWN0b3J5LnJlcXVlc3RlZCkge1xuXHQgICAgICAgIC8vIHBvb2wgY2FsbGJhY2tzXG5cdCAgICAgICAgZmFjdG9yeS5wZW5kaW5nQ2FsbGJhY2tzLnB1c2goY2IpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGZhY3RvcnkucmVxdWVzdGVkID0gdHJ1ZTtcblx0ICAgICAgICB2YXIgY2JzID0gZmFjdG9yeS5wZW5kaW5nQ2FsbGJhY2tzID0gW2NiXTtcblx0ICAgICAgICBmYWN0b3J5LmNhbGwodGhpcywgZnVuY3Rpb24gcmVzb2x2ZShyZXMpIHtcblx0ICAgICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHJlcykpIHtcblx0ICAgICAgICAgICAgcmVzID0gVnVlLmV4dGVuZChyZXMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgLy8gY2FjaGUgcmVzb2x2ZWRcblx0ICAgICAgICAgIGZhY3RvcnkucmVzb2x2ZWQgPSByZXM7XG5cdCAgICAgICAgICAvLyBpbnZva2UgY2FsbGJhY2tzXG5cdCAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICAgICAgY2JzW2ldKHJlcyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwgZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuXHQgICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdGYWlsZWQgdG8gcmVzb2x2ZSBhc3luYyBjb21wb25lbnQnICsgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyAnOiAnICsgdmFsdWUgOiAnJykgKyAnLiAnICsgKHJlYXNvbiA/ICdcXG5SZWFzb246ICcgKyByZWFzb24gOiAnJykpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBub3JtYWwgY29tcG9uZW50XG5cdCAgICAgIGNiKGZhY3RvcnkpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdHZhciBmaWx0ZXJSRSQxID0gL1tefF1cXHxbXnxdLztcblx0XG5cdGZ1bmN0aW9uIGRhdGFBUEkgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIEdldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXG5cdCAgICogQHJldHVybiB7Kn1cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZ2V0ID0gZnVuY3Rpb24gKGV4cCwgYXNTdGF0ZW1lbnQpIHtcblx0ICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwKTtcblx0ICAgIGlmIChyZXMpIHtcblx0ICAgICAgaWYgKGFzU3RhdGVtZW50KSB7XG5cdCAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICAgIHJldHVybiBmdW5jdGlvbiBzdGF0ZW1lbnRIYW5kbGVyKCkge1xuXHQgICAgICAgICAgc2VsZi4kYXJndW1lbnRzID0gdG9BcnJheShhcmd1bWVudHMpO1xuXHQgICAgICAgICAgdmFyIHJlc3VsdCA9IHJlcy5nZXQuY2FsbChzZWxmLCBzZWxmKTtcblx0ICAgICAgICAgIHNlbGYuJGFyZ3VtZW50cyA9IG51bGw7XG5cdCAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuXHQgICAgICAgIH07XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHJldHVybiByZXMuZ2V0LmNhbGwodGhpcywgdGhpcyk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG5cdCAgICogVGhlIGV4cHJlc3Npb24gbXVzdCBiZSBhIHZhbGlkIGxlZnQtaGFuZFxuXHQgICAqIGV4cHJlc3Npb24gaW4gYW4gYXNzaWdubWVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICAgKiBAcGFyYW0geyp9IHZhbFxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRzZXQgPSBmdW5jdGlvbiAoZXhwLCB2YWwpIHtcblx0ICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwLCB0cnVlKTtcblx0ICAgIGlmIChyZXMgJiYgcmVzLnNldCkge1xuXHQgICAgICByZXMuc2V0LmNhbGwodGhpcywgdGhpcywgdmFsKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBEZWxldGUgYSBwcm9wZXJ0eSBvbiB0aGUgVk1cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgZGVsKHRoaXMuX2RhdGEsIGtleSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogV2F0Y2ggYW4gZXhwcmVzc2lvbiwgdHJpZ2dlciBjYWxsYmFjayB3aGVuIGl0c1xuXHQgICAqIHZhbHVlIGNoYW5nZXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gZXhwT3JGblxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuXHQgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBkZWVwXG5cdCAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGltbWVkaWF0ZVxuXHQgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSAtIHVud2F0Y2hGblxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiR3YXRjaCA9IGZ1bmN0aW9uIChleHBPckZuLCBjYiwgb3B0aW9ucykge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblx0ICAgIHZhciBwYXJzZWQ7XG5cdCAgICBpZiAodHlwZW9mIGV4cE9yRm4gPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKGV4cE9yRm4pO1xuXHQgICAgICBleHBPckZuID0gcGFyc2VkLmV4cHJlc3Npb247XG5cdCAgICB9XG5cdCAgICB2YXIgd2F0Y2hlciA9IG5ldyBXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwge1xuXHQgICAgICBkZWVwOiBvcHRpb25zICYmIG9wdGlvbnMuZGVlcCxcblx0ICAgICAgc3luYzogb3B0aW9ucyAmJiBvcHRpb25zLnN5bmMsXG5cdCAgICAgIGZpbHRlcnM6IHBhcnNlZCAmJiBwYXJzZWQuZmlsdGVycyxcblx0ICAgICAgdXNlcjogIW9wdGlvbnMgfHwgb3B0aW9ucy51c2VyICE9PSBmYWxzZVxuXHQgICAgfSk7XG5cdCAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmltbWVkaWF0ZSkge1xuXHQgICAgICBjYi5jYWxsKHZtLCB3YXRjaGVyLnZhbHVlKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmdW5jdGlvbiB1bndhdGNoRm4oKSB7XG5cdCAgICAgIHdhdGNoZXIudGVhcmRvd24oKTtcblx0ICAgIH07XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogRXZhbHVhdGUgYSB0ZXh0IGRpcmVjdGl2ZSwgaW5jbHVkaW5nIGZpbHRlcnMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FzU3RhdGVtZW50XVxuXHQgICAqIEByZXR1cm4ge1N0cmluZ31cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZXZhbCA9IGZ1bmN0aW9uICh0ZXh0LCBhc1N0YXRlbWVudCkge1xuXHQgICAgLy8gY2hlY2sgZm9yIGZpbHRlcnMuXG5cdCAgICBpZiAoZmlsdGVyUkUkMS50ZXN0KHRleHQpKSB7XG5cdCAgICAgIHZhciBkaXIgPSBwYXJzZURpcmVjdGl2ZSh0ZXh0KTtcblx0ICAgICAgLy8gdGhlIGZpbHRlciByZWdleCBjaGVjayBtaWdodCBnaXZlIGZhbHNlIHBvc2l0aXZlXG5cdCAgICAgIC8vIGZvciBwaXBlcyBpbnNpZGUgc3RyaW5ncywgc28gaXQncyBwb3NzaWJsZSB0aGF0XG5cdCAgICAgIC8vIHdlIGRvbid0IGdldCBhbnkgZmlsdGVycyBoZXJlXG5cdCAgICAgIHZhciB2YWwgPSB0aGlzLiRnZXQoZGlyLmV4cHJlc3Npb24sIGFzU3RhdGVtZW50KTtcblx0ICAgICAgcmV0dXJuIGRpci5maWx0ZXJzID8gdGhpcy5fYXBwbHlGaWx0ZXJzKHZhbCwgbnVsbCwgZGlyLmZpbHRlcnMpIDogdmFsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gbm8gZmlsdGVyXG5cdCAgICAgIHJldHVybiB0aGlzLiRnZXQodGV4dCwgYXNTdGF0ZW1lbnQpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEludGVycG9sYXRlIGEgcGllY2Ugb2YgdGVtcGxhdGUgdGV4dC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG5cdCAgICogQHJldHVybiB7U3RyaW5nfVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRpbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uICh0ZXh0KSB7XG5cdCAgICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KHRleHQpO1xuXHQgICAgdmFyIHZtID0gdGhpcztcblx0ICAgIGlmICh0b2tlbnMpIHtcblx0ICAgICAgaWYgKHRva2Vucy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICByZXR1cm4gdm0uJGV2YWwodG9rZW5zWzBdLnZhbHVlKSArICcnO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiB0b2tlbnMubWFwKGZ1bmN0aW9uICh0b2tlbikge1xuXHQgICAgICAgICAgcmV0dXJuIHRva2VuLnRhZyA/IHZtLiRldmFsKHRva2VuLnZhbHVlKSA6IHRva2VuLnZhbHVlO1xuXHQgICAgICAgIH0pLmpvaW4oJycpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gdGV4dDtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBMb2cgaW5zdGFuY2UgZGF0YSBhcyBhIHBsYWluIEpTIG9iamVjdFxuXHQgICAqIHNvIHRoYXQgaXQgaXMgZWFzaWVyIHRvIGluc3BlY3QgaW4gY29uc29sZS5cblx0ICAgKiBUaGlzIG1ldGhvZCBhc3N1bWVzIGNvbnNvbGUgaXMgYXZhaWxhYmxlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IFtwYXRoXVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRsb2cgPSBmdW5jdGlvbiAocGF0aCkge1xuXHQgICAgdmFyIGRhdGEgPSBwYXRoID8gZ2V0UGF0aCh0aGlzLl9kYXRhLCBwYXRoKSA6IHRoaXMuX2RhdGE7XG5cdCAgICBpZiAoZGF0YSkge1xuXHQgICAgICBkYXRhID0gY2xlYW4oZGF0YSk7XG5cdCAgICB9XG5cdCAgICAvLyBpbmNsdWRlIGNvbXB1dGVkIGZpZWxkc1xuXHQgICAgaWYgKCFwYXRoKSB7XG5cdCAgICAgIHZhciBrZXk7XG5cdCAgICAgIGZvciAoa2V5IGluIHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQpIHtcblx0ICAgICAgICBkYXRhW2tleV0gPSBjbGVhbih0aGlzW2tleV0pO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICh0aGlzLl9wcm9wcykge1xuXHQgICAgICAgIGZvciAoa2V5IGluIHRoaXMuX3Byb3BzKSB7XG5cdCAgICAgICAgICBkYXRhW2tleV0gPSBjbGVhbih0aGlzW2tleV0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgY29uc29sZS5sb2coZGF0YSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogXCJjbGVhblwiIGEgZ2V0dGVyL3NldHRlciBjb252ZXJ0ZWQgb2JqZWN0IGludG8gYSBwbGFpblxuXHQgICAqIG9iamVjdCBjb3B5LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IC0gb2JqXG5cdCAgICogQHJldHVybiB7T2JqZWN0fVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjbGVhbihvYmopIHtcblx0ICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZG9tQVBJIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBDb252ZW5pZW5jZSBvbi1pbnN0YW5jZSBuZXh0VGljay4gVGhlIGNhbGxiYWNrIGlzXG5cdCAgICogYXV0by1ib3VuZCB0byB0aGUgaW5zdGFuY2UsIGFuZCB0aGlzIGF2b2lkcyBjb21wb25lbnRcblx0ICAgKiBtb2R1bGVzIGhhdmluZyB0byByZWx5IG9uIHRoZSBnbG9iYWwgVnVlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kbmV4dFRpY2sgPSBmdW5jdGlvbiAoZm4pIHtcblx0ICAgIG5leHRUaWNrKGZuLCB0aGlzKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBBcHBlbmQgaW5zdGFuY2UgdG8gdGFyZ2V0XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGFwcGVuZFRvID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgICByZXR1cm4gaW5zZXJ0KHRoaXMsIHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uLCBhcHBlbmQsIGFwcGVuZFdpdGhUcmFuc2l0aW9uKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBQcmVwZW5kIGluc3RhbmNlIHRvIHRhcmdldFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRwcmVwZW5kVG8gPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XG5cdCAgICBpZiAodGFyZ2V0Lmhhc0NoaWxkTm9kZXMoKSkge1xuXHQgICAgICB0aGlzLiRiZWZvcmUodGFyZ2V0LmZpcnN0Q2hpbGQsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbnNlcnQgaW5zdGFuY2UgYmVmb3JlIHRhcmdldFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRiZWZvcmUgPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICAgIHJldHVybiBpbnNlcnQodGhpcywgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIGJlZm9yZVdpdGhDYiwgYmVmb3JlV2l0aFRyYW5zaXRpb24pO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluc2VydCBpbnN0YW5jZSBhZnRlciB0YXJnZXRcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kYWZ0ZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XG5cdCAgICBpZiAodGFyZ2V0Lm5leHRTaWJsaW5nKSB7XG5cdCAgICAgIHRoaXMuJGJlZm9yZSh0YXJnZXQubmV4dFNpYmxpbmcsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQucGFyZW50Tm9kZSwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZSBpbnN0YW5jZSBmcm9tIERPTVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kcmVtb3ZlID0gZnVuY3Rpb24gKGNiLCB3aXRoVHJhbnNpdGlvbikge1xuXHQgICAgaWYgKCF0aGlzLiRlbC5wYXJlbnROb2RlKSB7XG5cdCAgICAgIHJldHVybiBjYiAmJiBjYigpO1xuXHQgICAgfVxuXHQgICAgdmFyIGluRG9jdW1lbnQgPSB0aGlzLl9pc0F0dGFjaGVkICYmIGluRG9jKHRoaXMuJGVsKTtcblx0ICAgIC8vIGlmIHdlIGFyZSBub3QgaW4gZG9jdW1lbnQsIG5vIG5lZWQgdG8gY2hlY2tcblx0ICAgIC8vIGZvciB0cmFuc2l0aW9uc1xuXHQgICAgaWYgKCFpbkRvY3VtZW50KSB3aXRoVHJhbnNpdGlvbiA9IGZhbHNlO1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIHJlYWxDYiA9IGZ1bmN0aW9uIHJlYWxDYigpIHtcblx0ICAgICAgaWYgKGluRG9jdW1lbnQpIHNlbGYuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuXHQgICAgICBpZiAoY2IpIGNiKCk7XG5cdCAgICB9O1xuXHQgICAgaWYgKHRoaXMuX2lzRnJhZ21lbnQpIHtcblx0ICAgICAgcmVtb3ZlTm9kZVJhbmdlKHRoaXMuX2ZyYWdtZW50U3RhcnQsIHRoaXMuX2ZyYWdtZW50RW5kLCB0aGlzLCB0aGlzLl9mcmFnbWVudCwgcmVhbENiKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBvcCA9IHdpdGhUcmFuc2l0aW9uID09PSBmYWxzZSA/IHJlbW92ZVdpdGhDYiA6IHJlbW92ZVdpdGhUcmFuc2l0aW9uO1xuXHQgICAgICBvcCh0aGlzLiRlbCwgdGhpcywgcmVhbENiKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNoYXJlZCBET00gaW5zZXJ0aW9uIGZ1bmN0aW9uLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3AxIC0gb3AgZm9yIG5vbi10cmFuc2l0aW9uIGluc2VydFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMiAtIG9wIGZvciB0cmFuc2l0aW9uIGluc2VydFxuXHQgICAqIEByZXR1cm4gdm1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gaW5zZXJ0KHZtLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgb3AxLCBvcDIpIHtcblx0ICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XG5cdCAgICB2YXIgdGFyZ2V0SXNEZXRhY2hlZCA9ICFpbkRvYyh0YXJnZXQpO1xuXHQgICAgdmFyIG9wID0gd2l0aFRyYW5zaXRpb24gPT09IGZhbHNlIHx8IHRhcmdldElzRGV0YWNoZWQgPyBvcDEgOiBvcDI7XG5cdCAgICB2YXIgc2hvdWxkQ2FsbEhvb2sgPSAhdGFyZ2V0SXNEZXRhY2hlZCAmJiAhdm0uX2lzQXR0YWNoZWQgJiYgIWluRG9jKHZtLiRlbCk7XG5cdCAgICBpZiAodm0uX2lzRnJhZ21lbnQpIHtcblx0ICAgICAgbWFwTm9kZVJhbmdlKHZtLl9mcmFnbWVudFN0YXJ0LCB2bS5fZnJhZ21lbnRFbmQsIGZ1bmN0aW9uIChub2RlKSB7XG5cdCAgICAgICAgb3Aobm9kZSwgdGFyZ2V0LCB2bSk7XG5cdCAgICAgIH0pO1xuXHQgICAgICBjYiAmJiBjYigpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb3Aodm0uJGVsLCB0YXJnZXQsIHZtLCBjYik7XG5cdCAgICB9XG5cdCAgICBpZiAoc2hvdWxkQ2FsbEhvb2spIHtcblx0ICAgICAgdm0uX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHZtO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgZm9yIHNlbGVjdG9yc1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gZWxcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcXVlcnkoZWwpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgZWwgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCkgOiBlbDtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEFwcGVuZCBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSBlbFxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBhcHBlbmQoZWwsIHRhcmdldCwgdm0sIGNiKSB7XG5cdCAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgICAgaWYgKGNiKSBjYigpO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogSW5zZXJ0QmVmb3JlIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IGVsXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGJlZm9yZVdpdGhDYihlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcblx0ICAgIGJlZm9yZShlbCwgdGFyZ2V0KTtcblx0ICAgIGlmIChjYikgY2IoKTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZSBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSBlbFxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVtb3ZlV2l0aENiKGVsLCB2bSwgY2IpIHtcblx0ICAgIHJlbW92ZShlbCk7XG5cdCAgICBpZiAoY2IpIGNiKCk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBldmVudHNBUEkgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIExpc3RlbiBvbiB0aGUgZ2l2ZW4gYGV2ZW50YCB3aXRoIGBmbmAuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRvbiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcblx0ICAgICh0aGlzLl9ldmVudHNbZXZlbnRdIHx8ICh0aGlzLl9ldmVudHNbZXZlbnRdID0gW10pKS5wdXNoKGZuKTtcblx0ICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIDEpO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQWRkcyBhbiBgZXZlbnRgIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBpbnZva2VkIGEgc2luZ2xlXG5cdCAgICogdGltZSB0aGVuIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJG9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICBmdW5jdGlvbiBvbigpIHtcblx0ICAgICAgc2VsZi4kb2ZmKGV2ZW50LCBvbik7XG5cdCAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgICBvbi5mbiA9IGZuO1xuXHQgICAgdGhpcy4kb24oZXZlbnQsIG9uKTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgZm9yIGBldmVudGAgb3IgYWxsXG5cdCAgICogcmVnaXN0ZXJlZCBjYWxsYmFja3MuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRvZmYgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG5cdCAgICB2YXIgY2JzO1xuXHQgICAgLy8gYWxsXG5cdCAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcblx0ICAgICAgaWYgKHRoaXMuJHBhcmVudCkge1xuXHQgICAgICAgIGZvciAoZXZlbnQgaW4gdGhpcy5fZXZlbnRzKSB7XG5cdCAgICAgICAgICBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuXHQgICAgICAgICAgaWYgKGNicykge1xuXHQgICAgICAgICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtY2JzLmxlbmd0aCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICAgIC8vIHNwZWNpZmljIGV2ZW50XG5cdCAgICBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuXHQgICAgaWYgKCFjYnMpIHtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtY2JzLmxlbmd0aCk7XG5cdCAgICAgIHRoaXMuX2V2ZW50c1tldmVudF0gPSBudWxsO1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICAgIC8vIHNwZWNpZmljIGhhbmRsZXJcblx0ICAgIHZhciBjYjtcblx0ICAgIHZhciBpID0gY2JzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgY2IgPSBjYnNbaV07XG5cdCAgICAgIGlmIChjYiA9PT0gZm4gfHwgY2IuZm4gPT09IGZuKSB7XG5cdCAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLTEpO1xuXHQgICAgICAgIGNicy5zcGxpY2UoaSwgMSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRyaWdnZXIgYW4gZXZlbnQgb24gc2VsZi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gZXZlbnRcblx0ICAgKiBAcmV0dXJuIHtCb29sZWFufSBzaG91bGRQcm9wYWdhdGVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZW1pdCA9IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgdmFyIGlzU291cmNlID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJztcblx0ICAgIGV2ZW50ID0gaXNTb3VyY2UgPyBldmVudCA6IGV2ZW50Lm5hbWU7XG5cdCAgICB2YXIgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcblx0ICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSBpc1NvdXJjZSB8fCAhY2JzO1xuXHQgICAgaWYgKGNicykge1xuXHQgICAgICBjYnMgPSBjYnMubGVuZ3RoID4gMSA/IHRvQXJyYXkoY2JzKSA6IGNicztcblx0ICAgICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGhhY2t5IHNvbHV0aW9uIHRvIHRoZSBxdWVzdGlvbiByYWlzZWRcblx0ICAgICAgLy8gaW4gIzIxMDI6IGZvciBhbiBpbmxpbmUgY29tcG9uZW50IGxpc3RlbmVyIGxpa2UgPGNvbXAgQHRlc3Q9XCJkb1RoaXNcIj4sXG5cdCAgICAgIC8vIHRoZSBwcm9wYWdhdGlvbiBoYW5kbGluZyBpcyBzb21ld2hhdCBicm9rZW4uIFRoZXJlZm9yZSB3ZVxuXHQgICAgICAvLyBuZWVkIHRvIHRyZWF0IHRoZXNlIGlubGluZSBjYWxsYmFja3MgZGlmZmVyZW50bHkuXG5cdCAgICAgIHZhciBoYXNQYXJlbnRDYnMgPSBpc1NvdXJjZSAmJiBjYnMuc29tZShmdW5jdGlvbiAoY2IpIHtcblx0ICAgICAgICByZXR1cm4gY2IuX2Zyb21QYXJlbnQ7XG5cdCAgICAgIH0pO1xuXHQgICAgICBpZiAoaGFzUGFyZW50Q2JzKSB7XG5cdCAgICAgICAgc2hvdWxkUHJvcGFnYXRlID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHZhciBjYiA9IGNic1tpXTtcblx0ICAgICAgICB2YXIgcmVzID0gY2IuYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICAgICAgaWYgKHJlcyA9PT0gdHJ1ZSAmJiAoIWhhc1BhcmVudENicyB8fCBjYi5fZnJvbVBhcmVudCkpIHtcblx0ICAgICAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gc2hvdWxkUHJvcGFnYXRlO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlY3Vyc2l2ZWx5IGJyb2FkY2FzdCBhbiBldmVudCB0byBhbGwgY2hpbGRyZW4gaW5zdGFuY2VzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBldmVudFxuXHQgICAqIEBwYXJhbSB7Li4uKn0gYWRkaXRpb25hbCBhcmd1bWVudHNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kYnJvYWRjYXN0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICB2YXIgaXNTb3VyY2UgPSB0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnO1xuXHQgICAgZXZlbnQgPSBpc1NvdXJjZSA/IGV2ZW50IDogZXZlbnQubmFtZTtcblx0ICAgIC8vIGlmIG5vIGNoaWxkIGhhcyByZWdpc3RlcmVkIGZvciB0aGlzIGV2ZW50LFxuXHQgICAgLy8gdGhlbiB0aGVyZSdzIG5vIG5lZWQgdG8gYnJvYWRjYXN0LlxuXHQgICAgaWYgKCF0aGlzLl9ldmVudHNDb3VudFtldmVudF0pIHJldHVybjtcblx0ICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuJGNoaWxkcmVuO1xuXHQgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG5cdCAgICBpZiAoaXNTb3VyY2UpIHtcblx0ICAgICAgLy8gdXNlIG9iamVjdCBldmVudCB0byBpbmRpY2F0ZSBub24tc291cmNlIGVtaXRcblx0ICAgICAgLy8gb24gY2hpbGRyZW5cblx0ICAgICAgYXJnc1swXSA9IHsgbmFtZTogZXZlbnQsIHNvdXJjZTogdGhpcyB9O1xuXHQgICAgfVxuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV07XG5cdCAgICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSBjaGlsZC4kZW1pdC5hcHBseShjaGlsZCwgYXJncyk7XG5cdCAgICAgIGlmIChzaG91bGRQcm9wYWdhdGUpIHtcblx0ICAgICAgICBjaGlsZC4kYnJvYWRjYXN0LmFwcGx5KGNoaWxkLCBhcmdzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVjdXJzaXZlbHkgcHJvcGFnYXRlIGFuIGV2ZW50IHVwIHRoZSBwYXJlbnQgY2hhaW4uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICAgKiBAcGFyYW0gey4uLip9IGFkZGl0aW9uYWwgYXJndW1lbnRzXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGRpc3BhdGNoID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gdGhpcy4kZW1pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgaWYgKCFzaG91bGRQcm9wYWdhdGUpIHJldHVybjtcblx0ICAgIHZhciBwYXJlbnQgPSB0aGlzLiRwYXJlbnQ7XG5cdCAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcblx0ICAgIC8vIHVzZSBvYmplY3QgZXZlbnQgdG8gaW5kaWNhdGUgbm9uLXNvdXJjZSBlbWl0XG5cdCAgICAvLyBvbiBwYXJlbnRzXG5cdCAgICBhcmdzWzBdID0geyBuYW1lOiBldmVudCwgc291cmNlOiB0aGlzIH07XG5cdCAgICB3aGlsZSAocGFyZW50KSB7XG5cdCAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IHBhcmVudC4kZW1pdC5hcHBseShwYXJlbnQsIGFyZ3MpO1xuXHQgICAgICBwYXJlbnQgPSBzaG91bGRQcm9wYWdhdGUgPyBwYXJlbnQuJHBhcmVudCA6IG51bGw7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBNb2RpZnkgdGhlIGxpc3RlbmVyIGNvdW50cyBvbiBhbGwgcGFyZW50cy5cblx0ICAgKiBUaGlzIGJvb2trZWVwaW5nIGFsbG93cyAkYnJvYWRjYXN0IHRvIHJldHVybiBlYXJseSB3aGVuXG5cdCAgICogbm8gY2hpbGQgaGFzIGxpc3RlbmVkIHRvIGEgY2VydGFpbiBldmVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudFxuXHQgICAqL1xuXHRcblx0ICB2YXIgaG9va1JFID0gL15ob29rOi87XG5cdCAgZnVuY3Rpb24gbW9kaWZ5TGlzdGVuZXJDb3VudCh2bSwgZXZlbnQsIGNvdW50KSB7XG5cdCAgICB2YXIgcGFyZW50ID0gdm0uJHBhcmVudDtcblx0ICAgIC8vIGhvb2tzIGRvIG5vdCBnZXQgYnJvYWRjYXN0ZWQgc28gbm8gbmVlZFxuXHQgICAgLy8gdG8gZG8gYm9va2tlZXBpbmcgZm9yIHRoZW1cblx0ICAgIGlmICghcGFyZW50IHx8ICFjb3VudCB8fCBob29rUkUudGVzdChldmVudCkpIHJldHVybjtcblx0ICAgIHdoaWxlIChwYXJlbnQpIHtcblx0ICAgICAgcGFyZW50Ll9ldmVudHNDb3VudFtldmVudF0gPSAocGFyZW50Ll9ldmVudHNDb3VudFtldmVudF0gfHwgMCkgKyBjb3VudDtcblx0ICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBsaWZlY3ljbGVBUEkgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIFNldCBpbnN0YW5jZSB0YXJnZXQgZWxlbWVudCBhbmQga2ljayBvZmYgdGhlIGNvbXBpbGF0aW9uXG5cdCAgICogcHJvY2Vzcy4gVGhlIHBhc3NlZCBpbiBgZWxgIGNhbiBiZSBhIHNlbGVjdG9yIHN0cmluZywgYW5cblx0ICAgKiBleGlzdGluZyBFbGVtZW50LCBvciBhIERvY3VtZW50RnJhZ21lbnQgKGZvciBibG9ja1xuXHQgICAqIGluc3RhbmNlcykuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudHxzdHJpbmd9IGVsXG5cdCAgICogQHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRtb3VudCA9IGZ1bmN0aW9uIChlbCkge1xuXHQgICAgaWYgKHRoaXMuX2lzQ29tcGlsZWQpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCckbW91bnQoKSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZS4nLCB0aGlzKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZWwgPSBxdWVyeShlbCk7XG5cdCAgICBpZiAoIWVsKSB7XG5cdCAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICB9XG5cdCAgICB0aGlzLl9jb21waWxlKGVsKTtcblx0ICAgIHRoaXMuX2luaXRET01Ib29rcygpO1xuXHQgICAgaWYgKGluRG9jKHRoaXMuJGVsKSkge1xuXHQgICAgICB0aGlzLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcblx0ICAgICAgcmVhZHkuY2FsbCh0aGlzKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuJG9uY2UoJ2hvb2s6YXR0YWNoZWQnLCByZWFkeSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBNYXJrIGFuIGluc3RhbmNlIGFzIHJlYWR5LlxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZWFkeSgpIHtcblx0ICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlO1xuXHQgICAgdGhpcy5faXNSZWFkeSA9IHRydWU7XG5cdCAgICB0aGlzLl9jYWxsSG9vaygncmVhZHknKTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRlYXJkb3duIHRoZSBpbnN0YW5jZSwgc2ltcGx5IGRlbGVnYXRlIHRvIHRoZSBpbnRlcm5hbFxuXHQgICAqIF9kZXN0cm95LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmVcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cFxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRkZXN0cm95ID0gZnVuY3Rpb24gKHJlbW92ZSwgZGVmZXJDbGVhbnVwKSB7XG5cdCAgICB0aGlzLl9kZXN0cm95KHJlbW92ZSwgZGVmZXJDbGVhbnVwKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBQYXJ0aWFsbHkgY29tcGlsZSBhIHBpZWNlIG9mIERPTSBhbmQgcmV0dXJuIGFcblx0ICAgKiBkZWNvbXBpbGUgZnVuY3Rpb24uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ11cblx0ICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kY29tcGlsZSA9IGZ1bmN0aW9uIChlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIHJldHVybiBjb21waWxlKGVsLCB0aGlzLiRvcHRpb25zLCB0cnVlKSh0aGlzLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUaGUgZXhwb3NlZCBWdWUgY29uc3RydWN0b3IuXG5cdCAqXG5cdCAqIEFQSSBjb252ZW50aW9uczpcblx0ICogLSBwdWJsaWMgQVBJIG1ldGhvZHMvcHJvcGVydGllcyBhcmUgcHJlZml4ZWQgd2l0aCBgJGBcblx0ICogLSBpbnRlcm5hbCBtZXRob2RzL3Byb3BlcnRpZXMgYXJlIHByZWZpeGVkIHdpdGggYF9gXG5cdCAqIC0gbm9uLXByZWZpeGVkIHByb3BlcnRpZXMgYXJlIGFzc3VtZWQgdG8gYmUgcHJveGllZCB1c2VyXG5cdCAqICAgZGF0YS5cblx0ICpcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICogQHB1YmxpY1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIFZ1ZShvcHRpb25zKSB7XG5cdCAgdGhpcy5faW5pdChvcHRpb25zKTtcblx0fVxuXHRcblx0Ly8gaW5zdGFsbCBpbnRlcm5hbHNcblx0aW5pdE1peGluKFZ1ZSk7XG5cdHN0YXRlTWl4aW4oVnVlKTtcblx0ZXZlbnRzTWl4aW4oVnVlKTtcblx0bGlmZWN5Y2xlTWl4aW4oVnVlKTtcblx0bWlzY01peGluKFZ1ZSk7XG5cdFxuXHQvLyBpbnN0YWxsIGluc3RhbmNlIEFQSXNcblx0ZGF0YUFQSShWdWUpO1xuXHRkb21BUEkoVnVlKTtcblx0ZXZlbnRzQVBJKFZ1ZSk7XG5cdGxpZmVjeWNsZUFQSShWdWUpO1xuXHRcblx0dmFyIHNsb3QgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBTTE9ULFxuXHQgIHBhcmFtczogWyduYW1lJ10sXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyB0aGlzIHdhcyByZXNvbHZlZCBkdXJpbmcgY29tcG9uZW50IHRyYW5zY2x1c2lvblxuXHQgICAgdmFyIG5hbWUgPSB0aGlzLnBhcmFtcy5uYW1lIHx8ICdkZWZhdWx0Jztcblx0ICAgIHZhciBjb250ZW50ID0gdGhpcy52bS5fc2xvdENvbnRlbnRzICYmIHRoaXMudm0uX3Nsb3RDb250ZW50c1tuYW1lXTtcblx0ICAgIGlmICghY29udGVudCB8fCAhY29udGVudC5oYXNDaGlsZE5vZGVzKCkpIHtcblx0ICAgICAgdGhpcy5mYWxsYmFjaygpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5jb21waWxlKGNvbnRlbnQuY2xvbmVOb2RlKHRydWUpLCB0aGlzLnZtLl9jb250ZXh0LCB0aGlzLnZtKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBjb21waWxlOiBmdW5jdGlvbiBjb21waWxlKGNvbnRlbnQsIGNvbnRleHQsIGhvc3QpIHtcblx0ICAgIGlmIChjb250ZW50ICYmIGNvbnRleHQpIHtcblx0ICAgICAgaWYgKHRoaXMuZWwuaGFzQ2hpbGROb2RlcygpICYmIGNvbnRlbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiYgY29udGVudC5jaGlsZE5vZGVzWzBdLm5vZGVUeXBlID09PSAxICYmIGNvbnRlbnQuY2hpbGROb2Rlc1swXS5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuXHQgICAgICAgIC8vIGlmIHRoZSBpbnNlcnRlZCBzbG90IGhhcyB2LWlmXG5cdCAgICAgICAgLy8gaW5qZWN0IGZhbGxiYWNrIGNvbnRlbnQgYXMgdGhlIHYtZWxzZVxuXHQgICAgICAgIHZhciBlbHNlQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuXHQgICAgICAgIGVsc2VCbG9jay5zZXRBdHRyaWJ1dGUoJ3YtZWxzZScsICcnKTtcblx0ICAgICAgICBlbHNlQmxvY2suaW5uZXJIVE1MID0gdGhpcy5lbC5pbm5lckhUTUw7XG5cdCAgICAgICAgLy8gdGhlIGVsc2UgYmxvY2sgc2hvdWxkIGJlIGNvbXBpbGVkIGluIGNoaWxkIHNjb3BlXG5cdCAgICAgICAgZWxzZUJsb2NrLl9jb250ZXh0ID0gdGhpcy52bTtcblx0ICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGVsc2VCbG9jayk7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHNjb3BlID0gaG9zdCA/IGhvc3QuX3Njb3BlIDogdGhpcy5fc2NvcGU7XG5cdCAgICAgIHRoaXMudW5saW5rID0gY29udGV4dC4kY29tcGlsZShjb250ZW50LCBob3N0LCBzY29wZSwgdGhpcy5fZnJhZyk7XG5cdCAgICB9XG5cdCAgICBpZiAoY29udGVudCkge1xuXHQgICAgICByZXBsYWNlKHRoaXMuZWwsIGNvbnRlbnQpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVtb3ZlKHRoaXMuZWwpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGZhbGxiYWNrOiBmdW5jdGlvbiBmYWxsYmFjaygpIHtcblx0ICAgIHRoaXMuY29tcGlsZShleHRyYWN0Q29udGVudCh0aGlzLmVsLCB0cnVlKSwgdGhpcy52bSk7XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICBpZiAodGhpcy51bmxpbmspIHtcblx0ICAgICAgdGhpcy51bmxpbmsoKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcGFydGlhbCA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IFBBUlRJQUwsXG5cdFxuXHQgIHBhcmFtczogWyduYW1lJ10sXG5cdFxuXHQgIC8vIHdhdGNoIGNoYW5nZXMgdG8gbmFtZSBmb3IgZHluYW1pYyBwYXJ0aWFsc1xuXHQgIHBhcmFtV2F0Y2hlcnM6IHtcblx0ICAgIG5hbWU6IGZ1bmN0aW9uIG5hbWUodmFsdWUpIHtcblx0ICAgICAgdklmLnJlbW92ZS5jYWxsKHRoaXMpO1xuXHQgICAgICBpZiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLmluc2VydCh2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtcGFydGlhbCcpO1xuXHQgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG5cdCAgICB0aGlzLmluc2VydCh0aGlzLnBhcmFtcy5uYW1lKTtcblx0ICB9LFxuXHRcblx0ICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydChpZCkge1xuXHQgICAgdmFyIHBhcnRpYWwgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3BhcnRpYWxzJywgaWQsIHRydWUpO1xuXHQgICAgaWYgKHBhcnRpYWwpIHtcblx0ICAgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCBwYXJ0aWFsKTtcblx0ICAgICAgdklmLmluc2VydC5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgaWYgKHRoaXMuZnJhZykge1xuXHQgICAgICB0aGlzLmZyYWcuZGVzdHJveSgpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBlbGVtZW50RGlyZWN0aXZlcyA9IHtcblx0ICBzbG90OiBzbG90LFxuXHQgIHBhcnRpYWw6IHBhcnRpYWxcblx0fTtcblx0XG5cdHZhciBjb252ZXJ0QXJyYXkgPSB2Rm9yLl9wb3N0UHJvY2Vzcztcblx0XG5cdC8qKlxuXHQgKiBMaW1pdCBmaWx0ZXIgZm9yIGFycmF5c1xuXHQgKlxuXHQgKiBAcGFyYW0ge051bWJlcn0gblxuXHQgKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IChEZWNpbWFsIGV4cGVjdGVkKVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGxpbWl0QnkoYXJyLCBuLCBvZmZzZXQpIHtcblx0ICBvZmZzZXQgPSBvZmZzZXQgPyBwYXJzZUludChvZmZzZXQsIDEwKSA6IDA7XG5cdCAgbiA9IHRvTnVtYmVyKG4pO1xuXHQgIHJldHVybiB0eXBlb2YgbiA9PT0gJ251bWJlcicgPyBhcnIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBuKSA6IGFycjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZpbHRlciBmaWx0ZXIgZm9yIGFycmF5c1xuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbZGVsaW1pdGVyXVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gLi4uZGF0YUtleXNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmaWx0ZXJCeShhcnIsIHNlYXJjaCwgZGVsaW1pdGVyKSB7XG5cdCAgYXJyID0gY29udmVydEFycmF5KGFycik7XG5cdCAgaWYgKHNlYXJjaCA9PSBudWxsKSB7XG5cdCAgICByZXR1cm4gYXJyO1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIHNlYXJjaCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgcmV0dXJuIGFyci5maWx0ZXIoc2VhcmNoKTtcblx0ICB9XG5cdCAgLy8gY2FzdCB0byBsb3dlcmNhc2Ugc3RyaW5nXG5cdCAgc2VhcmNoID0gKCcnICsgc2VhcmNoKS50b0xvd2VyQ2FzZSgpO1xuXHQgIC8vIGFsbG93IG9wdGlvbmFsIGBpbmAgZGVsaW1pdGVyXG5cdCAgLy8gYmVjYXVzZSB3aHkgbm90XG5cdCAgdmFyIG4gPSBkZWxpbWl0ZXIgPT09ICdpbicgPyAzIDogMjtcblx0ICAvLyBleHRyYWN0IGFuZCBmbGF0dGVuIGtleXNcblx0ICB2YXIga2V5cyA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIHRvQXJyYXkoYXJndW1lbnRzLCBuKSk7XG5cdCAgdmFyIHJlcyA9IFtdO1xuXHQgIHZhciBpdGVtLCBrZXksIHZhbCwgajtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGFyci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGl0ZW0gPSBhcnJbaV07XG5cdCAgICB2YWwgPSBpdGVtICYmIGl0ZW0uJHZhbHVlIHx8IGl0ZW07XG5cdCAgICBqID0ga2V5cy5sZW5ndGg7XG5cdCAgICBpZiAoaikge1xuXHQgICAgICB3aGlsZSAoai0tKSB7XG5cdCAgICAgICAga2V5ID0ga2V5c1tqXTtcblx0ICAgICAgICBpZiAoa2V5ID09PSAnJGtleScgJiYgY29udGFpbnMoaXRlbS4ka2V5LCBzZWFyY2gpIHx8IGNvbnRhaW5zKGdldFBhdGgodmFsLCBrZXkpLCBzZWFyY2gpKSB7XG5cdCAgICAgICAgICByZXMucHVzaChpdGVtKTtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChjb250YWlucyhpdGVtLCBzZWFyY2gpKSB7XG5cdCAgICAgIHJlcy5wdXNoKGl0ZW0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRmlsdGVyIGZpbHRlciBmb3IgYXJyYXlzXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfEFycmF5PFN0cmluZz58RnVuY3Rpb259IC4uLnNvcnRLZXlzXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbb3JkZXJdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gb3JkZXJCeShhcnIpIHtcblx0ICB2YXIgY29tcGFyYXRvciA9IG51bGw7XG5cdCAgdmFyIHNvcnRLZXlzID0gdW5kZWZpbmVkO1xuXHQgIGFyciA9IGNvbnZlcnRBcnJheShhcnIpO1xuXHRcblx0ICAvLyBkZXRlcm1pbmUgb3JkZXIgKGxhc3QgYXJndW1lbnQpXG5cdCAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG5cdCAgdmFyIG9yZGVyID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuXHQgIGlmICh0eXBlb2Ygb3JkZXIgPT09ICdudW1iZXInKSB7XG5cdCAgICBvcmRlciA9IG9yZGVyIDwgMCA/IC0xIDogMTtcblx0ICAgIGFyZ3MgPSBhcmdzLmxlbmd0aCA+IDEgPyBhcmdzLnNsaWNlKDAsIC0xKSA6IGFyZ3M7XG5cdCAgfSBlbHNlIHtcblx0ICAgIG9yZGVyID0gMTtcblx0ICB9XG5cdFxuXHQgIC8vIGRldGVybWluZSBzb3J0S2V5cyAmIGNvbXBhcmF0b3Jcblx0ICB2YXIgZmlyc3RBcmcgPSBhcmdzWzBdO1xuXHQgIGlmICghZmlyc3RBcmcpIHtcblx0ICAgIHJldHVybiBhcnI7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgZmlyc3RBcmcgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIC8vIGN1c3RvbSBjb21wYXJhdG9yXG5cdCAgICBjb21wYXJhdG9yID0gZnVuY3Rpb24gKGEsIGIpIHtcblx0ICAgICAgcmV0dXJuIGZpcnN0QXJnKGEsIGIpICogb3JkZXI7XG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBzdHJpbmcga2V5cy4gZmxhdHRlbiBmaXJzdFxuXHQgICAgc29ydEtleXMgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBhcmdzKTtcblx0ICAgIGNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYiwgaSkge1xuXHQgICAgICBpID0gaSB8fCAwO1xuXHQgICAgICByZXR1cm4gaSA+PSBzb3J0S2V5cy5sZW5ndGggLSAxID8gYmFzZUNvbXBhcmUoYSwgYiwgaSkgOiBiYXNlQ29tcGFyZShhLCBiLCBpKSB8fCBjb21wYXJhdG9yKGEsIGIsIGkgKyAxKTtcblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBiYXNlQ29tcGFyZShhLCBiLCBzb3J0S2V5SW5kZXgpIHtcblx0ICAgIHZhciBzb3J0S2V5ID0gc29ydEtleXNbc29ydEtleUluZGV4XTtcblx0ICAgIGlmIChzb3J0S2V5KSB7XG5cdCAgICAgIGlmIChzb3J0S2V5ICE9PSAnJGtleScpIHtcblx0ICAgICAgICBpZiAoaXNPYmplY3QoYSkgJiYgJyR2YWx1ZScgaW4gYSkgYSA9IGEuJHZhbHVlO1xuXHQgICAgICAgIGlmIChpc09iamVjdChiKSAmJiAnJHZhbHVlJyBpbiBiKSBiID0gYi4kdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgICAgYSA9IGlzT2JqZWN0KGEpID8gZ2V0UGF0aChhLCBzb3J0S2V5KSA6IGE7XG5cdCAgICAgIGIgPSBpc09iamVjdChiKSA/IGdldFBhdGgoYiwgc29ydEtleSkgOiBiO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGEgPT09IGIgPyAwIDogYSA+IGIgPyBvcmRlciA6IC1vcmRlcjtcblx0ICB9XG5cdFxuXHQgIC8vIHNvcnQgb24gYSBjb3B5IHRvIGF2b2lkIG11dGF0aW5nIG9yaWdpbmFsIGFycmF5XG5cdCAgcmV0dXJuIGFyci5zbGljZSgpLnNvcnQoY29tcGFyYXRvcik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTdHJpbmcgY29udGFpbiBoZWxwZXJcblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbnRhaW5zKHZhbCwgc2VhcmNoKSB7XG5cdCAgdmFyIGk7XG5cdCAgaWYgKGlzUGxhaW5PYmplY3QodmFsKSkge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xuXHQgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBpZiAoY29udGFpbnModmFsW2tleXNbaV1dLCBzZWFyY2gpKSB7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsKSkge1xuXHQgICAgaSA9IHZhbC5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGlmIChjb250YWlucyh2YWxbaV0sIHNlYXJjaCkpIHtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAodmFsICE9IG51bGwpIHtcblx0ICAgIHJldHVybiB2YWwudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2VhcmNoKSA+IC0xO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGRpZ2l0c1JFID0gLyhcXGR7M30pKD89XFxkKS9nO1xuXHRcblx0Ly8gYXNzZXQgY29sbGVjdGlvbnMgbXVzdCBiZSBhIHBsYWluIG9iamVjdC5cblx0dmFyIGZpbHRlcnMgPSB7XG5cdFxuXHQgIG9yZGVyQnk6IG9yZGVyQnksXG5cdCAgZmlsdGVyQnk6IGZpbHRlckJ5LFxuXHQgIGxpbWl0Qnk6IGxpbWl0QnksXG5cdFxuXHQgIC8qKlxuXHQgICAqIFN0cmluZ2lmeSB2YWx1ZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRlbnRcblx0ICAgKi9cblx0XG5cdCAganNvbjoge1xuXHQgICAgcmVhZDogZnVuY3Rpb24gcmVhZCh2YWx1ZSwgaW5kZW50KSB7XG5cdCAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSwgbnVsbCwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBpbmRlbnQgOiAyKTtcblx0ICAgIH0sXG5cdCAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUodmFsdWUpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh2YWx1ZSk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICByZXR1cm4gdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiAnYWJjJyA9PiAnQWJjJ1xuXHQgICAqL1xuXHRcblx0ICBjYXBpdGFsaXplOiBmdW5jdGlvbiBjYXBpdGFsaXplKHZhbHVlKSB7XG5cdCAgICBpZiAoIXZhbHVlICYmIHZhbHVlICE9PSAwKSByZXR1cm4gJyc7XG5cdCAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG5cdCAgICByZXR1cm4gdmFsdWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2YWx1ZS5zbGljZSgxKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiAnYWJjJyA9PiAnQUJDJ1xuXHQgICAqL1xuXHRcblx0ICB1cHBlcmNhc2U6IGZ1bmN0aW9uIHVwcGVyY2FzZSh2YWx1ZSkge1xuXHQgICAgcmV0dXJuIHZhbHVlIHx8IHZhbHVlID09PSAwID8gdmFsdWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpIDogJyc7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogJ0FiQycgPT4gJ2FiYydcblx0ICAgKi9cblx0XG5cdCAgbG93ZXJjYXNlOiBmdW5jdGlvbiBsb3dlcmNhc2UodmFsdWUpIHtcblx0ICAgIHJldHVybiB2YWx1ZSB8fCB2YWx1ZSA9PT0gMCA/IHZhbHVlLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSA6ICcnO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIDEyMzQ1ID0+ICQxMiwzNDUuMDBcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBzaWduXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGRlY2ltYWxzIERlY2ltYWwgcGxhY2VzXG5cdCAgICovXG5cdFxuXHQgIGN1cnJlbmN5OiBmdW5jdGlvbiBjdXJyZW5jeSh2YWx1ZSwgX2N1cnJlbmN5LCBkZWNpbWFscykge1xuXHQgICAgdmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKTtcblx0ICAgIGlmICghaXNGaW5pdGUodmFsdWUpIHx8ICF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkgcmV0dXJuICcnO1xuXHQgICAgX2N1cnJlbmN5ID0gX2N1cnJlbmN5ICE9IG51bGwgPyBfY3VycmVuY3kgOiAnJCc7XG5cdCAgICBkZWNpbWFscyA9IGRlY2ltYWxzICE9IG51bGwgPyBkZWNpbWFscyA6IDI7XG5cdCAgICB2YXIgc3RyaW5naWZpZWQgPSBNYXRoLmFicyh2YWx1ZSkudG9GaXhlZChkZWNpbWFscyk7XG5cdCAgICB2YXIgX2ludCA9IGRlY2ltYWxzID8gc3RyaW5naWZpZWQuc2xpY2UoMCwgLTEgLSBkZWNpbWFscykgOiBzdHJpbmdpZmllZDtcblx0ICAgIHZhciBpID0gX2ludC5sZW5ndGggJSAzO1xuXHQgICAgdmFyIGhlYWQgPSBpID4gMCA/IF9pbnQuc2xpY2UoMCwgaSkgKyAoX2ludC5sZW5ndGggPiAzID8gJywnIDogJycpIDogJyc7XG5cdCAgICB2YXIgX2Zsb2F0ID0gZGVjaW1hbHMgPyBzdHJpbmdpZmllZC5zbGljZSgtMSAtIGRlY2ltYWxzKSA6ICcnO1xuXHQgICAgdmFyIHNpZ24gPSB2YWx1ZSA8IDAgPyAnLScgOiAnJztcblx0ICAgIHJldHVybiBzaWduICsgX2N1cnJlbmN5ICsgaGVhZCArIF9pbnQuc2xpY2UoaSkucmVwbGFjZShkaWdpdHNSRSwgJyQxLCcpICsgX2Zsb2F0O1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqICdpdGVtJyA9PiAnaXRlbXMnXG5cdCAgICpcblx0ICAgKiBAcGFyYW1zXG5cdCAgICogIGFuIGFycmF5IG9mIHN0cmluZ3MgY29ycmVzcG9uZGluZyB0b1xuXHQgICAqICB0aGUgc2luZ2xlLCBkb3VibGUsIHRyaXBsZSAuLi4gZm9ybXMgb2YgdGhlIHdvcmQgdG9cblx0ICAgKiAgYmUgcGx1cmFsaXplZC4gV2hlbiB0aGUgbnVtYmVyIHRvIGJlIHBsdXJhbGl6ZWRcblx0ICAgKiAgZXhjZWVkcyB0aGUgbGVuZ3RoIG9mIHRoZSBhcmdzLCBpdCB3aWxsIHVzZSB0aGUgbGFzdFxuXHQgICAqICBlbnRyeSBpbiB0aGUgYXJyYXkuXG5cdCAgICpcblx0ICAgKiAgZS5nLiBbJ3NpbmdsZScsICdkb3VibGUnLCAndHJpcGxlJywgJ211bHRpcGxlJ11cblx0ICAgKi9cblx0XG5cdCAgcGx1cmFsaXplOiBmdW5jdGlvbiBwbHVyYWxpemUodmFsdWUpIHtcblx0ICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuXHQgICAgdmFyIGxlbmd0aCA9IGFyZ3MubGVuZ3RoO1xuXHQgICAgaWYgKGxlbmd0aCA+IDEpIHtcblx0ICAgICAgdmFyIGluZGV4ID0gdmFsdWUgJSAxMCAtIDE7XG5cdCAgICAgIHJldHVybiBpbmRleCBpbiBhcmdzID8gYXJnc1tpbmRleF0gOiBhcmdzW2xlbmd0aCAtIDFdO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIGFyZ3NbMF0gKyAodmFsdWUgPT09IDEgPyAnJyA6ICdzJyk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRGVib3VuY2UgYSBoYW5kbGVyIGZ1bmN0aW9uLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheSA9IDMwMFxuXHQgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgICAqL1xuXHRcblx0ICBkZWJvdW5jZTogZnVuY3Rpb24gZGVib3VuY2UoaGFuZGxlciwgZGVsYXkpIHtcblx0ICAgIGlmICghaGFuZGxlcikgcmV0dXJuO1xuXHQgICAgaWYgKCFkZWxheSkge1xuXHQgICAgICBkZWxheSA9IDMwMDtcblx0ICAgIH1cblx0ICAgIHJldHVybiBfZGVib3VuY2UoaGFuZGxlciwgZGVsYXkpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIGluc3RhbGxHbG9iYWxBUEkgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIFZ1ZSBhbmQgZXZlcnkgY29uc3RydWN0b3IgdGhhdCBleHRlbmRzIFZ1ZSBoYXMgYW5cblx0ICAgKiBhc3NvY2lhdGVkIG9wdGlvbnMgb2JqZWN0LCB3aGljaCBjYW4gYmUgYWNjZXNzZWQgZHVyaW5nXG5cdCAgICogY29tcGlsYXRpb24gc3RlcHMgYXMgYHRoaXMuY29uc3RydWN0b3Iub3B0aW9uc2AuXG5cdCAgICpcblx0ICAgKiBUaGVzZSBjYW4gYmUgc2VlbiBhcyB0aGUgZGVmYXVsdCBvcHRpb25zIG9mIGV2ZXJ5XG5cdCAgICogVnVlIGluc3RhbmNlLlxuXHQgICAqL1xuXHRcblx0ICBWdWUub3B0aW9ucyA9IHtcblx0ICAgIGRpcmVjdGl2ZXM6IGRpcmVjdGl2ZXMsXG5cdCAgICBlbGVtZW50RGlyZWN0aXZlczogZWxlbWVudERpcmVjdGl2ZXMsXG5cdCAgICBmaWx0ZXJzOiBmaWx0ZXJzLFxuXHQgICAgdHJhbnNpdGlvbnM6IHt9LFxuXHQgICAgY29tcG9uZW50czoge30sXG5cdCAgICBwYXJ0aWFsczoge30sXG5cdCAgICByZXBsYWNlOiB0cnVlXG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogRXhwb3NlIHVzZWZ1bCBpbnRlcm5hbHNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnV0aWwgPSB1dGlsO1xuXHQgIFZ1ZS5jb25maWcgPSBjb25maWc7XG5cdCAgVnVlLnNldCA9IHNldDtcblx0ICBWdWVbJ2RlbGV0ZSddID0gZGVsO1xuXHQgIFZ1ZS5uZXh0VGljayA9IG5leHRUaWNrO1xuXHRcblx0ICAvKipcblx0ICAgKiBUaGUgZm9sbG93aW5nIGFyZSBleHBvc2VkIGZvciBhZHZhbmNlZCB1c2FnZSAvIHBsdWdpbnNcblx0ICAgKi9cblx0XG5cdCAgVnVlLmNvbXBpbGVyID0gY29tcGlsZXI7XG5cdCAgVnVlLkZyYWdtZW50RmFjdG9yeSA9IEZyYWdtZW50RmFjdG9yeTtcblx0ICBWdWUuaW50ZXJuYWxEaXJlY3RpdmVzID0gaW50ZXJuYWxEaXJlY3RpdmVzO1xuXHQgIFZ1ZS5wYXJzZXJzID0ge1xuXHQgICAgcGF0aDogcGF0aCxcblx0ICAgIHRleHQ6IHRleHQsXG5cdCAgICB0ZW1wbGF0ZTogdGVtcGxhdGUsXG5cdCAgICBkaXJlY3RpdmU6IGRpcmVjdGl2ZSxcblx0ICAgIGV4cHJlc3Npb246IGV4cHJlc3Npb25cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBFYWNoIGluc3RhbmNlIGNvbnN0cnVjdG9yLCBpbmNsdWRpbmcgVnVlLCBoYXMgYSB1bmlxdWVcblx0ICAgKiBjaWQuIFRoaXMgZW5hYmxlcyB1cyB0byBjcmVhdGUgd3JhcHBlZCBcImNoaWxkXG5cdCAgICogY29uc3RydWN0b3JzXCIgZm9yIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UgYW5kIGNhY2hlIHRoZW0uXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5jaWQgPSAwO1xuXHQgIHZhciBjaWQgPSAxO1xuXHRcblx0ICAvKipcblx0ICAgKiBDbGFzcyBpbmhlcml0YW5jZVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IGV4dGVuZE9wdGlvbnNcblx0ICAgKi9cblx0XG5cdCAgVnVlLmV4dGVuZCA9IGZ1bmN0aW9uIChleHRlbmRPcHRpb25zKSB7XG5cdCAgICBleHRlbmRPcHRpb25zID0gZXh0ZW5kT3B0aW9ucyB8fCB7fTtcblx0ICAgIHZhciBTdXBlciA9IHRoaXM7XG5cdCAgICB2YXIgaXNGaXJzdEV4dGVuZCA9IFN1cGVyLmNpZCA9PT0gMDtcblx0ICAgIGlmIChpc0ZpcnN0RXh0ZW5kICYmIGV4dGVuZE9wdGlvbnMuX0N0b3IpIHtcblx0ICAgICAgcmV0dXJuIGV4dGVuZE9wdGlvbnMuX0N0b3I7XG5cdCAgICB9XG5cdCAgICB2YXIgbmFtZSA9IGV4dGVuZE9wdGlvbnMubmFtZSB8fCBTdXBlci5vcHRpb25zLm5hbWU7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBpZiAoIS9eW2EtekEtWl1bXFx3LV0qJC8udGVzdChuYW1lKSkge1xuXHQgICAgICAgIHdhcm4oJ0ludmFsaWQgY29tcG9uZW50IG5hbWU6IFwiJyArIG5hbWUgKyAnXCIuIENvbXBvbmVudCBuYW1lcyAnICsgJ2NhbiBvbmx5IGNvbnRhaW4gYWxwaGFudW1lcmljIGNoYXJhY2F0ZXJzIGFuZCB0aGUgaHlwaGVuLicpO1xuXHQgICAgICAgIG5hbWUgPSBudWxsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB2YXIgU3ViID0gY3JlYXRlQ2xhc3MobmFtZSB8fCAnVnVlQ29tcG9uZW50Jyk7XG5cdCAgICBTdWIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdXBlci5wcm90b3R5cGUpO1xuXHQgICAgU3ViLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN1Yjtcblx0ICAgIFN1Yi5jaWQgPSBjaWQrKztcblx0ICAgIFN1Yi5vcHRpb25zID0gbWVyZ2VPcHRpb25zKFN1cGVyLm9wdGlvbnMsIGV4dGVuZE9wdGlvbnMpO1xuXHQgICAgU3ViWydzdXBlciddID0gU3VwZXI7XG5cdCAgICAvLyBhbGxvdyBmdXJ0aGVyIGV4dGVuc2lvblxuXHQgICAgU3ViLmV4dGVuZCA9IFN1cGVyLmV4dGVuZDtcblx0ICAgIC8vIGNyZWF0ZSBhc3NldCByZWdpc3RlcnMsIHNvIGV4dGVuZGVkIGNsYXNzZXNcblx0ICAgIC8vIGNhbiBoYXZlIHRoZWlyIHByaXZhdGUgYXNzZXRzIHRvby5cblx0ICAgIGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgICAgIFN1Ylt0eXBlXSA9IFN1cGVyW3R5cGVdO1xuXHQgICAgfSk7XG5cdCAgICAvLyBlbmFibGUgcmVjdXJzaXZlIHNlbGYtbG9va3VwXG5cdCAgICBpZiAobmFtZSkge1xuXHQgICAgICBTdWIub3B0aW9ucy5jb21wb25lbnRzW25hbWVdID0gU3ViO1xuXHQgICAgfVxuXHQgICAgLy8gY2FjaGUgY29uc3RydWN0b3Jcblx0ICAgIGlmIChpc0ZpcnN0RXh0ZW5kKSB7XG5cdCAgICAgIGV4dGVuZE9wdGlvbnMuX0N0b3IgPSBTdWI7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gU3ViO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3ViLWNsYXNzIGNvbnN0cnVjdG9yIHdpdGggdGhlXG5cdCAgICogZ2l2ZW4gbmFtZS4gVGhpcyBnaXZlcyB1cyBtdWNoIG5pY2VyIG91dHB1dCB3aGVuXG5cdCAgICogbG9nZ2luZyBpbnN0YW5jZXMgaW4gdGhlIGNvbnNvbGUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjcmVhdGVDbGFzcyhuYW1lKSB7XG5cdCAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1uZXctZnVuYyAqL1xuXHQgICAgcmV0dXJuIG5ldyBGdW5jdGlvbigncmV0dXJuIGZ1bmN0aW9uICcgKyBjbGFzc2lmeShuYW1lKSArICcgKG9wdGlvbnMpIHsgdGhpcy5faW5pdChvcHRpb25zKSB9JykoKTtcblx0ICAgIC8qIGVzbGludC1lbmFibGUgbm8tbmV3LWZ1bmMgKi9cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFBsdWdpbiBzeXN0ZW1cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBwbHVnaW5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnVzZSA9IGZ1bmN0aW9uIChwbHVnaW4pIHtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKHBsdWdpbi5pbnN0YWxsZWQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gYWRkaXRpb25hbCBwYXJhbWV0ZXJzXG5cdCAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcblx0ICAgIGFyZ3MudW5zaGlmdCh0aGlzKTtcblx0ICAgIGlmICh0eXBlb2YgcGx1Z2luLmluc3RhbGwgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcGx1Z2luLmluc3RhbGwuYXBwbHkocGx1Z2luLCBhcmdzKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHBsdWdpbi5hcHBseShudWxsLCBhcmdzKTtcblx0ICAgIH1cblx0ICAgIHBsdWdpbi5pbnN0YWxsZWQgPSB0cnVlO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQXBwbHkgYSBnbG9iYWwgbWl4aW4gYnkgbWVyZ2luZyBpdCBpbnRvIHRoZSBkZWZhdWx0XG5cdCAgICogb3B0aW9ucy5cblx0ICAgKi9cblx0XG5cdCAgVnVlLm1peGluID0gZnVuY3Rpb24gKG1peGluKSB7XG5cdCAgICBWdWUub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhWdWUub3B0aW9ucywgbWl4aW4pO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENyZWF0ZSBhc3NldCByZWdpc3RyYXRpb24gbWV0aG9kcyB3aXRoIHRoZSBmb2xsb3dpbmdcblx0ICAgKiBzaWduYXR1cmU6XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gaWRcblx0ICAgKiBAcGFyYW0geyp9IGRlZmluaXRpb25cblx0ICAgKi9cblx0XG5cdCAgY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcblx0ICAgIFZ1ZVt0eXBlXSA9IGZ1bmN0aW9uIChpZCwgZGVmaW5pdGlvbikge1xuXHQgICAgICBpZiAoIWRlZmluaXRpb24pIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgICAgaWYgKHR5cGUgPT09ICdjb21wb25lbnQnICYmIChjb21tb25UYWdSRS50ZXN0KGlkKSB8fCByZXNlcnZlZFRhZ1JFLnRlc3QoaWQpKSkge1xuXHQgICAgICAgICAgICB3YXJuKCdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgKyAnaWQ6ICcgKyBpZCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiBpc1BsYWluT2JqZWN0KGRlZmluaXRpb24pKSB7XG5cdCAgICAgICAgICBpZiAoIWRlZmluaXRpb24ubmFtZSkge1xuXHQgICAgICAgICAgICBkZWZpbml0aW9uLm5hbWUgPSBpZDtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGRlZmluaXRpb24gPSBWdWUuZXh0ZW5kKGRlZmluaXRpb24pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdID0gZGVmaW5pdGlvbjtcblx0ICAgICAgICByZXR1cm4gZGVmaW5pdGlvbjtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9KTtcblx0XG5cdCAgLy8gZXhwb3NlIGludGVybmFsIHRyYW5zaXRpb24gQVBJXG5cdCAgZXh0ZW5kKFZ1ZS50cmFuc2l0aW9uLCB0cmFuc2l0aW9uKTtcblx0fVxuXHRcblx0aW5zdGFsbEdsb2JhbEFQSShWdWUpO1xuXHRcblx0VnVlLnZlcnNpb24gPSAnMS4wLjI2Jztcblx0XG5cdC8vIGRldnRvb2xzIGdsb2JhbCBob29rXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgIGlmIChjb25maWcuZGV2dG9vbHMpIHtcblx0ICAgIGlmIChkZXZ0b29scykge1xuXHQgICAgICBkZXZ0b29scy5lbWl0KCdpbml0JywgVnVlKTtcblx0ICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBpbkJyb3dzZXIgJiYgL0Nocm9tZVxcL1xcZCsvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG5cdCAgICAgIGNvbnNvbGUubG9nKCdEb3dubG9hZCB0aGUgVnVlIERldnRvb2xzIGZvciBhIGJldHRlciBkZXZlbG9wbWVudCBleHBlcmllbmNlOlxcbicgKyAnaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1kZXZ0b29scycpO1xuXHQgICAgfVxuXHQgIH1cblx0fSwgMCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFZ1ZTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSksIF9fd2VicGFja19yZXF1aXJlX18oMTkpKSlcblxuLyoqKi8gfSxcbi8qIDQ0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHQvLyA8c3R5bGUgbGFuZz1cInNhc3NcIj5cblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvY29tcG9uZW50cy91aS9pY29uJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vYXBpLXRhYmxlJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vYXBpLXRhYmxlLmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgcHJvcHM6IHtcblx0ICAgIGl0ZW1zOiB7XG5cdCAgICAgIHR5cGU6IEFycmF5XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9hcGlUYWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHR2YXIgX2FwaVRhYmxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FwaVRhYmxlKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgY29tcG9uZW50czoge1xuXHQgICAgQXBpVGFibGU6IF9hcGlUYWJsZTIuZGVmYXVsdFxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGRpc21pc3NDYWxsQmFjazogZnVuY3Rpb24gZGlzbWlzc0NhbGxCYWNrKCkge1xuXHQgICAgICAgIHdpbmRvdy5hbGVydCgnYWxlcnQgZGlzbWlzc2VkLicpO1xuXHQgICAgICB9LFxuXHRcblx0ICAgICAgYXBpSXRlbXM6IFt7XG5cdCAgICAgICAgbmFtZTogJ3R5cGUnLFxuXHQgICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ1RoZSB0eXBlIG9mIGFsZXJ0IChlcnJvciwgaW5mbywgc3VjY2VzcyknXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnZGlzbWlzc2libGUnLFxuXHQgICAgICAgIHR5cGU6ICdCb29sZWFuJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcblx0ICAgICAgICBkZWZhdWx0OiB0cnVlLFxuXHQgICAgICAgIGRlc2M6ICdJcyB0aGUgYWxlcnQgZGlzbWlzc2libGU/J1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ3RpbWVvdXQnLFxuXHQgICAgICAgIHR5cGU6ICdOdW1iZXInLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6IC0xLFxuXHQgICAgICAgIGRlc2M6ICdUaGUgZHVyYXRpb24gYWxlcnQgc3RheXMgb24gc2NyZWVuIGluIG1zJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ29uQ2xvc2VkJyxcblx0ICAgICAgICB0eXBlOiAnRnVuY3Rpb24nLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICdDYWxsYmFjayBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBhbGVydCBpcyBjbG9zZWQuJ1xuXHQgICAgICB9XVxuXHQgICAgfTtcblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cdC8vIDx0ZW1wbGF0ZT5cblx0Ly8gICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuXHQvLyAgICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG5cdC8vICAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5BbGVydDwvaDI+XG5cdC8vICAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG5cdC8vICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG5cdC8vICAgICAgICAgICAgPGFsZXJ0IHR5cGU9XCJlcnJvclwiPlRoaXMgaXMgYW4gZXJyb3IgYWxlcnQuPC9hbGVydD5cblx0Ly8gICAgICAgICAgICA8YWxlcnQgdHlwZT1cImluZm9cIj5UaGlzIGlzIGFuIGluZm8gYWxlcnQuPC9hbGVydD5cblx0Ly8gICAgICAgICAgICA8YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIj5UaGlzIGlzIGEgc3VjY2VzcyBhbGVydC48L2FsZXJ0PlxuXHQvLyAgICAgICAgICAgIDxhbGVydCB0eXBlPVwic3VjY2Vzc1wiIDpkaXNtaXNzaWJsZT1cImZhbHNlXCI+VGhpcyBpcyBub3QgYSBkaXNtaXNzaWJsZSBhbGVydC48L2FsZXJ0PlxuXHQvLyAgICAgICAgICAgIDxhbGVydCB0eXBlPVwic3VjY2Vzc1wiIDpvbi1jbG9zZWQ9XCJkaXNtaXNzQ2FsbEJhY2tcIj5UaGlzIGlzIGFuIGFsZXJ0IHdpdGggY2FsbGJhY2suPC9hbGVydD5cblx0Ly8gICAgICAgICAgICA8YWxlcnQgdHlwZT1cImluZm9cIiA6dGltZW91dD1cIjUwMDBcIj5UaGlzIGFsZXJ0IHNob3VsZCB0aW1lb3V0IGluIDUgc2Vjb25kcy48L2FsZXJ0PlxuXHQvLyAgICAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiSFRNTFwiPlxuXHQvLyAgICAgICAgICAgIDxwcmU+XG5cdC8vICAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cblx0Ly8gICAgICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cImVycm9yXCImZ3Q7VGhpcyBpcyBhbiBlcnJvciBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xuXHQvLyAgICAgICAgICAgICZsdDthbGVydCB0eXBlPVwiaW5mb1wiJmd0O1RoaXMgaXMgYW4gaW5mbyBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xuXHQvLyAgICAgICAgICAgICZsdDthbGVydCB0eXBlPVwic3VjY2Vzc1wiJmd0O1RoaXMgaXMgYSBzdWNjZXNzIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XG5cdC8vICAgICAgICAgICAgJmx0O2FsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOmRpc21pc3NpYmxlPVwiZmFsc2VcIiZndDtUaGlzIGlzIG5vdCBhIGRpc21pc3NpYmxlIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XG5cdC8vICAgICAgICAgICAgJmx0O2FsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOm9uLWNsb3NlZD1cImRpc21pc3NDYWxsQmFja1wiJmd0O1RoaXMgaXMgYW4gYWxlcnQgd2l0aCBjYWxsYmFjay4mbHQ7L2FsZXJ0Jmd0O1xuXHQvLyAgICAgICAgICAgICZsdDthbGVydCB0eXBlPVwic3VjY2Vzc1wiIDp0aW1lb3V0PVwiNTAwMFwiJmd0O1RoaXMgYWxlcnQgc2hvdWxkIHRpbWVvdXQgaW4gNSBzZWNvbmRzLiZsdDsvYWxlcnQmZ3Q7XG5cdC8vICAgICAgICAgICAgICA8L2NvZGU+XG5cdC8vICAgICAgICAgICAgPC9wcmU+XG5cdC8vICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG5cdC8vICAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvL1xuXHQvLyAgICA8L2Rpdj5cblx0Ly8gICA8L3NlY3Rpb24+XG5cdC8vIDwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cbi8qKiovIH0sXG4vKiA0NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2FwaVRhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBfYXBpVGFibGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXBpVGFibGUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBjb21wb25lbnRzOiB7XG5cdCAgICBBcGlUYWJsZTogX2FwaVRhYmxlMi5kZWZhdWx0XG5cdCAgfSxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgYXBpSXRlbXM6IFt7XG5cdCAgICAgICAgbmFtZTogJ2xhYmVsJyxcblx0ICAgICAgICB0eXBlOiAnU3RyaW5nJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICdUaGUgbGFibGUgb2YgdGhlIHBhbmVsJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ2lzT3BlbicsXG5cdCAgICAgICAgdHlwZTogJ0Jvb2xlYW4nLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuXHQgICAgICAgIGRlc2M6ICdJcyB0aGUgcGFuZWwgb3Blbi4nXG5cdCAgICAgIH1dXG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblx0Ly8gPHRlbXBsYXRlPlxuXHQvLyAgIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG5cdC8vICAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cblx0Ly8gICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPkNvbGxhcHNhYmxlIFBhbmVsPC9oMj5cblx0Ly8gICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cblx0Ly8gICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cblx0Ly8gICAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJQYW5lbCAxXCIgOmlzLW9wZW49XCJ0cnVlXCI+XG5cdC8vICAgICAgICAgICAgIFBhbmVsIDEgY29udGVudFxuXHQvLyAgICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cdC8vXG5cdC8vICAgICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiUGFuZWwgMlwiPlxuXHQvLyAgICAgICAgICAgICBQYW5lbCAyIGNvbnRlbnRcblx0Ly8gICAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiSFRNTFwiPlxuXHQvLyAgICAgICAgICAgIDxwcmU+XG5cdC8vICAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cblx0Ly8gICAgICAgICAgICAgICAgJmx0O2NvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiUGFuZWwgMVwiIDppcy1vcGVuPVwidHJ1ZVwiJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAgIFBhbmVsIDEgY29udGVudFxuXHQvLyAgICAgICAgICAgICAgICAmbHQ7L2NvbGxhcHNhYmxlLXBhbmVsJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAmbHQ7Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJQYW5lbCAyXCImZ3Q7XG5cdC8vICAgICAgICAgICAgICAgICAgUGFuZWwgMiBjb250ZW50XG5cdC8vICAgICAgICAgICAgICAgICZsdDsvY29sbGFwc2FibGUtcGFuZWwmZ3Q7XG5cdC8vICAgICAgICAgICAgICA8L2NvZGU+XG5cdC8vICAgICAgICAgICAgPC9wcmU+XG5cdC8vICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG5cdC8vICAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvL1xuXHQvLyAgICA8L2Rpdj5cblx0Ly8gICA8L3NlY3Rpb24+XG5cdC8vIDwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cbi8qKiovIH0sXG4vKiA0NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0Ly8gPHRlbXBsYXRlPlxuXHQvLyAgIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG5cdC8vICAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cblx0Ly8gICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPkdldHRpbmcgU3RhcnRlZDwvaDI+XG5cdC8vICAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG5cdC8vICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0tNSBoeV90LWdyZXlcIj5DRE48L2gzPlxuXHQvLyAgICAgIDxwPlxuXHQvLyAgICAgICAgLi4uXG5cdC8vICAgICAgPC9wPlxuXHQvLyAgICA8L2Rpdj5cblx0Ly8gICA8L3NlY3Rpb24+XG5cdC8vIDwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4uL3Njc3MvbmF2LnNjc3MnO1xuXHQvLyAgICAgQGltcG9ydCAnLi4vc2Nzcy9tYWluLnNjc3MnO1xuXHQvLyAgICAgQGltcG9ydCAnLi4vc2Nzcy9wcmlzbS5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly8gPHNjcmlwdD5cblx0ZXhwb3J0cy5kZWZhdWx0ID0ge307XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA0OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2FwaVRhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBfYXBpVGFibGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXBpVGFibGUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBjb21wb25lbnRzOiB7XG5cdCAgICBBcGlUYWJsZTogX2FwaVRhYmxlMi5kZWZhdWx0XG5cdCAgfSxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgYXBpSXRlbXM6IFt7XG5cdCAgICAgICAgbmFtZTogJ2xlZ2FsS2V5Jyxcblx0ICAgICAgICB0eXBlOiAnU3RyaW5nJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICd0aGUga2V5IG9mIGxlZ2FsIGluIGNtcydcblx0ICAgICAgfSwge1xuXHQgICAgICAgIG5hbWU6ICdsZWdhbExhbmcnLFxuXHQgICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ3RoZSBsYW5ndWFnZSBvZiBsZWdhbCBpbiBjbXMnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnbGVnYWxSZWdpb24nLFxuXHQgICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ3RoZSByZWdpb24gb2YgbGVnYWwgaW4gY21zJ1xuXHQgICAgICB9XVxuXHQgICAgfTtcblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cdC8vIDx0ZW1wbGF0ZT5cblx0Ly8gICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuXHQvLyAgICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG5cdC8vICAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5MZWdhbCBTeXN0ZW08L2gyPlxuXHQvLyAgICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuXHQvLyAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuXHQvLyAgICAgICAgICAgIDxwIGNsYXNzPVwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcIj5cblx0Ly8gICAgICAgICAgICAgIExvcmVtIGlwc3VtPGxlZ2FsLWNvdW50ZXJcblx0Ly8gICAgICAgICAgICAgICAgdi1vdmVybGF5LW9wZW5lcj1cImxlZ2FsLW92ZXJsYXlcIlxuXHQvLyAgICAgICAgICAgICAgICBsZWdhbC1rZXk9XCJocy1yZWZlcnJhbC10ZXJtc1wiXG5cdC8vICAgICAgICAgICAgICAgIGxlZ2FsLWxhbmc9XCJlblwiIGxlZ2FsLXJlZ2lvbj1cImJjXCJcblx0Ly8gICAgICAgICAgICAgICAgPjwvbGVnYWwtY291bnRlcj4gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdCxcblx0Ly8gICAgICAgICAgICAgIHNlZCBkbyBlaXVzbW9kIHRlbXBvciBpbmNpZGlkdW50IHV0IGxhYm9yZSBldCBkb2xvcmUgbWFnbmEgYWxpcXVhLlxuXHQvLyAgICAgICAgICAgICAgPGxlZ2FsLWNvdW50ZXJcblx0Ly8gICAgICAgICAgICAgICAgdi1vdmVybGF5LW9wZW5lcj1cImxlZ2FsLW92ZXJsYXlcIlxuXHQvLyAgICAgICAgICAgICAgICBsZWdhbC1rZXk9XCIxLXllYXItb2ZmZXItc3RpbVwiXG5cdC8vICAgICAgICAgICAgICAgIGxlZ2FsLWxhbmc9XCJlblwiIGxlZ2FsLXJlZ2lvbj1cImJjXCJcblx0Ly8gICAgICAgICAgICAgICAgPjwvbGVnYWwtY291bnRlcj5cblx0Ly8gICAgICAgICAgICAgIDwvcD5cblx0Ly8gICAgICAgICAgPC9kaXY+XG5cdC8vICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cblx0Ly8gICAgICAgICAgICAgPGxlZ2FsLWNvbnRhaW5lcj48L2xlZ2FsLWNvbnRhaW5lcj5cblx0Ly8gICAgICAgICAgPC9kaXY+XG5cdC8vICAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cblx0Ly8gICAgICAgICAgICA8cHJlPlxuXHQvLyAgICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG5cdC8vICAgICAgICAgICAgICAgICZsdDtsZWdhbC1jb3VudGVyJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAgICBsZWdhbC1rZXk9XCJocy1yZWZlcnJhbC10ZXJtc1wiXG5cdC8vICAgICAgICAgICAgICAgICAgIGxlZ2FsLWxhbmc9XCJlblwiXG5cdC8vICAgICAgICAgICAgICAgICAgIGxlZ2FsLXJlZ2lvbj1cImJjXCJcblx0Ly8gICAgICAgICAgICAgICAgJmx0Oy9sZWdhbC1jb3VudGVyJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAmbHQ7bGVnYWwtY29udGFpbmVyJmd0OyZsdDsvbGVnYWwtY29udGFpbmVyJmd0O1xuXHQvLyAgICAgICAgICAgICAgPC9jb2RlPlxuXHQvLyAgICAgICAgICAgIDwvcHJlPlxuXHQvLyAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJqYXZhc2NyaXB0XCI+XG5cdC8vICAgICAgICAgICAgPHByZT5cblx0Ly8gICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtamF2YXNjcmlwdFwiPlxuXHQvLyAgICAgICAgICAgICAgICBsZXQgdm0gPSBuZXcgVnVlKHtcblx0Ly8gICAgICAgICAgICAgICAgICBlbDogJ2JvZHknLFxuXHQvLyAgICAgICAgICAgICAgICAgIGRhdGEoKSB7XG5cdC8vICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuXHQvLyAgICAgICAgICAgICAgICAgICAgICBsaWdlckVuZFBvaW50OiAnaHR0cHM6Ly9hcGkuY21zLnRlbHVzLmNvbS9sZWdhbHMnLFxuXHQvLyAgICAgICAgICAgICAgICAgICAgICBsaWdlckFwcGxpY2F0aW9uS2V5OiAnYjk3MzhkNjdiODlkZmM3ODI3NDZkNGE5Y2Y0YTEwOTMnXG5cdC8vICAgICAgICAgICAgICAgICAgICB9O1xuXHQvLyAgICAgICAgICAgICAgICAgIH0sXG5cdC8vICAgICAgICAgICAgICAgICAgY29tcG9uZW50czoge1xuXHQvLyAgICAgICAgICAgICAgICAgICAgTGVnYWxDb3VudGVyLFxuXHQvLyAgICAgICAgICAgICAgICAgICAgTGVnYWxDb250YWluZXJcblx0Ly8gICAgICAgICAgICAgICAgICB9XG5cdC8vICAgICAgICAgICAgICAgIH0pO1xuXHQvLyAgICAgICAgICAgICAgPC9jb2RlPlxuXHQvLyAgICAgICAgICAgIDwvcHJlPlxuXHQvLyAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk6IExlZ2FsIENvdW50ZXI8L2gzPlxuXHQvLyAgICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly8gICAgPC9kaXY+XG5cdC8vICAgPC9zZWN0aW9uPlxuXHQvL1xuXHQvL1xuXHQvLyA8L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXG4vKioqLyB9LFxuLyogNDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9hcGlUYWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHR2YXIgX2FwaVRhYmxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FwaVRhYmxlKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgY29tcG9uZW50czoge1xuXHQgICAgQXBpVGFibGU6IF9hcGlUYWJsZTIuZGVmYXVsdFxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGFwaUl0ZW1zOiBbe1xuXHQgICAgICAgIG5hbWU6ICdvdmVybGF5S2V5Jyxcblx0ICAgICAgICB0eXBlOiAnU3RyaW5nJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICdUaGUga2V5IG9mIHRoZSBvdmVybGF5LiBVc2VkIGJ5IHRoZSBvdmVybGF5IG9wZW5lciBkaXJlY3RpdmUgdG8gdGFyZ2V0IHRoZSBvdmVybGV5Lidcblx0ICAgICAgfV1cblx0ICAgIH07XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXHQvLyA8dGVtcGxhdGU+XG5cdC8vICAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cblx0Ly8gICAgPGRpdiBjbGFzcz1cImh5X28td3JhcHBlclwiPlxuXHQvLyAgICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+T3ZlcmxheSBTeXN0ZW08L2gyPlxuXHQvLyAgICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuXHQvLyAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuXHQvLyAgICAgICAgICAgIDxwPlxuXHQvLyAgICAgICAgICAgICAgPGJ1dHRvbiB2LW92ZXJsYXktb3BlbmVyPVwib3ZlcmxheS0xXCIgY2xhc3M9XCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tbGluayBoeV90LXB1cnBsZVwiIHR5cGU9XCJidXR0b25cIiByb2xlPVwiYnV0dG9uXCI+XG5cdC8vICAgICAgICAgICAgICAgIE9wZW4gb3ZlcmxheSAjMSA8aSBjbGFzcz1cImh5X2MtaWNvbiBoeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQgaHlfYy1idXR0b25fX2ljb25cIj48L2k+XG5cdC8vICAgICAgICAgICAgICA8L2J1dHRvbj5cblx0Ly8gICAgICAgICAgICA8L3A+XG5cdC8vICAgICAgICAgICAgPHA+XG5cdC8vICAgICAgICAgICAgICA8YnV0dG9uIHYtb3ZlcmxheS1vcGVuZXI9XCJvdmVybGF5LTJcIiBjbGFzcz1cImh5X2MtYnV0dG9uIGh5X2MtYnV0dG9uLS1saW5rIGh5X3QtcHVycGxlXCIgdHlwZT1cImJ1dHRvblwiIHJvbGU9XCJidXR0b25cIj5cblx0Ly8gICAgICAgICAgICAgICAgT3BlbiBvdmVybGF5ICMyIDxpIGNsYXNzPVwiaHlfYy1pY29uIGh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZCBoeV9jLWJ1dHRvbl9faWNvblwiPjwvaT5cblx0Ly8gICAgICAgICAgICAgIDwvYnV0dG9uPlxuXHQvLyAgICAgICAgICAgIDwvcD5cblx0Ly8gICAgICAgICAgICA8b3ZlcmxheS1jb250YWluZXI+XG5cdC8vICAgICAgICAgICAgICAgICAgIDxvdmVybGF5IG92ZXJsYXkta2V5PVwib3ZlcmxheS0xXCI+XG5cdC8vICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFwiIHNsb3Q9XCJvdmVybGF5LWhlYWRlclwiPlRoaXMgaXMgb3ZlcmxheSAjMTwvaDQ+XG5cdC8vICAgICAgICAgICAgICAgICAgICAgPGFydGljbGUgc2xvdD1cIm92ZXJsYXktYm9keVwiPlxuXHQvLyAgICAgICAgICAgICAgICAgICAgICAgICBPdmVybGF5ICMxIGJvZHlcblx0Ly8gICAgICAgICAgICAgICAgICAgICA8L2FydGljbGU+XG5cdC8vICAgICAgICAgICAgICAgICAgIDwvb3ZlcmxheT5cblx0Ly8gICAgICAgICAgICAgICAgICAgPG92ZXJsYXkgb3ZlcmxheS1rZXk9XCJvdmVybGF5LTJcIj5cblx0Ly8gICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XCIgc2xvdD1cIm92ZXJsYXktaGVhZGVyXCI+VGhpcyBpcyBvdmVybGF5ICMyPC9oND5cblx0Ly8gICAgICAgICAgICAgICAgICAgICA8YXJ0aWNsZSBzbG90PVwib3ZlcmxheS1ib2R5XCI+XG5cdC8vICAgICAgICAgICAgICAgICAgICAgICAgIE92ZXJsYXkgIzIgYm9keVxuXHQvLyAgICAgICAgICAgICAgICAgICAgIDwvYXJ0aWNsZT5cblx0Ly8gICAgICAgICAgICAgICAgICAgPC9vdmVybGF5PlxuXHQvLyAgICAgICAgICAgPC9vdmVybGF5LWNvbnRhaW5lcj5cblx0Ly8gICAgICAgICAgPC9kaXY+XG5cdC8vICAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cblx0Ly8gICAgICAgICAgICA8cHJlPlxuXHQvLyAgICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG5cdC8vICAgICAgICAgICAgICAgICZsdDtvdmVybGF5LWNvbnRhaW5lciZndDtcblx0Ly8gICAgICAgICAgICAgICAgICAmbHQ7b3ZlcmxheSBvdmVybGF5LWtleT1cIm92ZXJsYXktMVwiJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAgICAgJmx0O2g0ICBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcIiBzbG90PVwib3ZlcmxheS1oZWFkZXJcIiZndDtcblx0Ly8gICAgICAgICAgICAgICAgICAgIFRoaXMgaXMgb3ZlcmxheSAjMVxuXHQvLyAgICAgICAgICAgICAgICAgICAgJmx0Oy9oNCZndDtcblx0Ly8gICAgICAgICAgICAgICAgICAgICZsdDthcnRpY2xlIHNsb3Q9XCJvdmVybGF5LWJvZHlcIiZndDtcblx0Ly8gICAgICAgICAgICAgICAgICAgICAgT3ZlcmxheSAjMSBib2R5XG5cdC8vICAgICAgICAgICAgICAgICAgICAmbHQ7L2FydGljbGUmZ3Q7XG5cdC8vICAgICAgICAgICAgICAgICAgJmx0Oy9vdmVybGF5Jmd0O1xuXHQvLyAgICAgICAgICAgICAgICAgICZsdDtvdmVybGF5IG92ZXJsYXkta2V5PVwib3ZlcmxheS0yXCImZ3Q7XG5cdC8vICAgICAgICAgICAgICAgICAgICAmbHQ7aDQgIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFwiIHNsb3Q9XCJvdmVybGF5LWhlYWRlclwiJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAgICAgVGhpcyBpcyBvdmVybGF5ICMxXG5cdC8vICAgICAgICAgICAgICAgICAgICAmbHQ7L2g0Jmd0O1xuXHQvLyAgICAgICAgICAgICAgICAgICAgJmx0O2FydGljbGUgc2xvdD1cIm92ZXJsYXktYm9keVwiJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAgICAgICBPdmVybGF5ICMyIGJvZHlcblx0Ly8gICAgICAgICAgICAgICAgICAgICZsdDsvYXJ0aWNsZSZndDtcblx0Ly8gICAgICAgICAgICAgICAgICAmbHQ7L292ZXJsYXkmZ3Q7XG5cdC8vICAgICAgICAgICAgICAgICZsdDsvb3ZlcmxheS1jb250YWluZXImZ3Q7XG5cdC8vICAgICAgICAgICAgICA8L2NvZGU+XG5cdC8vICAgICAgICAgICAgPC9wcmU+XG5cdC8vICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG5cdC8vICAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvLyAgICA8L2Rpdj5cblx0Ly8gICA8L3NlY3Rpb24+XG5cdC8vXG5cdC8vIDwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cbi8qKiovIH0sXG4vKiA1MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2FwaVRhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBfYXBpVGFibGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXBpVGFibGUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBjb21wb25lbnRzOiB7XG5cdCAgICBBcGlUYWJsZTogX2FwaVRhYmxlMi5kZWZhdWx0XG5cdCAgfSxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBzdGVwVHJhY2tlckN1cnJlbnRTdGVwOiAyLFxuXHQgICAgICBzdGVwVHJhY2tlckNvbmZpZzoge1xuXHQgICAgICAgIGlzQ2xpY2thYmxlOiB0cnVlLFxuXHQgICAgICAgIHN0ZXBzOiBbe1xuXHQgICAgICAgICAgdGl0bGU6ICdTdGVwIEEnLFxuXHQgICAgICAgICAgbGluazogJycsXG5cdCAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogZnVuY3Rpb24gb25DbGlja0hhbmRsZXIoZXZlbnQpIHtcblx0ICAgICAgICAgICAgX3RoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDA7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgdGl0bGU6ICdTdGVwIEInLFxuXHQgICAgICAgICAgbGluazogJycsXG5cdCAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogZnVuY3Rpb24gb25DbGlja0hhbmRsZXIoZXZlbnQpIHtcblx0ICAgICAgICAgICAgX3RoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDE7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgdGl0bGU6ICdTdGVwIEMnLFxuXHQgICAgICAgICAgbGluazogJycsXG5cdCAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogZnVuY3Rpb24gb25DbGlja0hhbmRsZXIoZXZlbnQpIHtcblx0ICAgICAgICAgICAgX3RoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDI7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfV1cblx0ICAgICAgfSxcblx0ICAgICAgYXBpSXRlbXM6IFt7XG5cdCAgICAgICAgbmFtZTogJ2N1cnJlbnRTdGVwJyxcblx0ICAgICAgICB0eXBlOiAnSW50ZWdlcicsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcblx0ICAgICAgICBkZWZhdWx0OiAwLFxuXHQgICAgICAgIGRlc2M6ICd0b2RvJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ2NvbmZpZycsXG5cdCAgICAgICAgdHlwZTogJ09iamVjdCcsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAndG9kbydcblx0ICAgICAgfSwge1xuXHQgICAgICAgIG5hbWU6ICdjb25maWcudGl0bGUnLFxuXHQgICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ1RoZSB0aXRsZSBvZiB0aGUgc3RlcCdcblx0ICAgICAgfSwge1xuXHQgICAgICAgIG5hbWU6ICdjb25maWcubGluaycsXG5cdCAgICAgICAgdHlwZTogJ1N0cmluZycsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ1RoZSBsaW5rIG9mIHRoZSBzdGVwLiAnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnY29uZmlnLm9uQ2xpY2tIYW5kbGVyJyxcblx0ICAgICAgICB0eXBlOiAnRnVuY3Rpb24nLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICdUaGUgY2FsbGJhY2sgZnVuY3Rpb24gd2hlbiBzdGVwIGlzIGNsaWNrZWQuJ1xuXHQgICAgICB9XVxuXHQgICAgfTtcblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cdC8vIDx0ZW1wbGF0ZT5cblx0Ly8gICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuXHQvLyAgICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG5cdC8vICAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5TdGVwIFRyYWNrZXI8L2gyPlxuXHQvLyAgICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuXHQvLyAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuXHQvLyAgICAgICAgICAgIDxzdGVwLXRyYWNrZXIgOmN1cnJlbnQtc3RlcD1cInN0ZXBUcmFja2VyQ3VycmVudFN0ZXBcIiA6Y29uZmlnPVwic3RlcFRyYWNrZXJDb25maWdcIj48L3N0ZXAtdHJhY2tlcj5cblx0Ly8gICAgICAgICAgPC9kaXY+XG5cdC8vICAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cblx0Ly8gICAgICAgIDxwcmU+XG5cdC8vICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuXHQvLyAgICAgICAgICAgJmx0O3N0ZXAtdHJhY2tlclxuXHQvLyAgICAgICAgICAgOmN1cnJlbnQtc3RlcD1cInN0ZXBUcmFja2VyQ3VycmVudFN0ZXBcIlxuXHQvLyAgICAgICAgICAgOmNvbmZpZz1cInN0ZXBUcmFja2VyQ29uZmlnXCImZ3Q7XG5cdC8vICAgICAgICAgICAmbHQ7L3N0ZXAtdHJhY2tlciZndDtcblx0Ly8gICAgICAgICAgPC9jb2RlPlxuXHQvLyAgICAgICAgPC9wcmU+XG5cdC8vICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cdC8vICAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cImphdmFzY3JpcHRcIj5cblx0Ly8gICAgICAgICAgICA8cHJlPlxuXHQvLyAgICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1qc1wiPlxuXHQvLyAgICAgICAgICAgICAgIGxldCBzdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMjtcblx0Ly8gICAgICAgICAgICAgICBsZXQgc3RlcFRyYWNrZXJDb25maWcgPSB7XG5cdC8vICAgICAgICAgICAgICAgICBpc0NsaWNrYWJsZTogdHJ1ZSxcblx0Ly8gICAgICAgICAgICAgICAgIHN0ZXBzOiBbXG5cdC8vICAgICAgICAgICAgICAgICAgIHtcblx0Ly8gICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQScsXG5cdC8vICAgICAgICAgICAgICAgICAgICAgbGluazogJycsXG5cdC8vICAgICAgICAgICAgICAgICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xuXHQvLyAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMDtcblx0Ly8gICAgICAgICAgICAgICAgICAgICB9XG5cdC8vICAgICAgICAgICAgICAgICAgIH0sIHtcblx0Ly8gICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQicsXG5cdC8vICAgICAgICAgICAgICAgICAgICAgbGluazogJycsXG5cdC8vICAgICAgICAgICAgICAgICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xuXHQvLyAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMTtcblx0Ly8gICAgICAgICAgICAgICAgICAgICB9XG5cdC8vICAgICAgICAgICAgICAgICAgIH0sIHtcblx0Ly8gICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQycsXG5cdC8vICAgICAgICAgICAgICAgICAgICAgbGluazogJycsXG5cdC8vICAgICAgICAgICAgICAgICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xuXHQvLyAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMjtcblx0Ly8gICAgICAgICAgICAgICAgICAgICB9XG5cdC8vICAgICAgICAgICAgICAgICAgIH1cblx0Ly8gICAgICAgICAgICAgICAgIF1cblx0Ly8gICAgICAgICAgICAgICB9O1xuXHQvLyAgICAgICAgICAgICAgIGxldCB2bSA9IG5ldyBWdWUoe1xuXHQvLyAgICAgICAgICAgICAgICAgZWw6ICdib2R5Jyxcblx0Ly8gICAgICAgICAgICAgICAgIGRhdGE6IHtcblx0Ly8gICAgICAgICAgICAgICAgICAgc3RlcFRyYWNrZXJDb25maWcsXG5cdC8vICAgICAgICAgICAgICAgICAgIHN0ZXBUcmFja2VyQ3VycmVudFN0ZXBcblx0Ly8gICAgICAgICAgICAgICB9LFxuXHQvLyAgICAgICAgICAgICAgICAgY29tcG9uZW50czoge1xuXHQvLyAgICAgICAgICAgICAgICAgICBTdGVwVHJhY2tlclxuXHQvLyAgICAgICAgICAgICAgICAgfVxuXHQvLyAgICAgICAgICAgICAgIH0pO1xuXHQvLyAgICAgICAgICAgICAgPC9jb2RlPlxuXHQvLyAgICAgICAgICAgIDwvcHJlPlxuXHQvLyAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk8L2gzPlxuXHQvLyAgICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly8gICAgPC9kaXY+XG5cdC8vICAgPC9zZWN0aW9uPlxuXHQvLyA8L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXG4vKioqLyB9LFxuLyogNTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9hcGlUYWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHR2YXIgX2FwaVRhYmxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FwaVRhYmxlKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgY29tcG9uZW50czoge1xuXHQgICAgQXBpVGFibGU6IF9hcGlUYWJsZTIuZGVmYXVsdFxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGFwaUl0ZW1zOiBbe1xuXHQgICAgICAgIG5hbWU6ICdsYWJlbCcsXG5cdCAgICAgICAgdHlwZTogJ1N0cmluZycsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAnVGhlIGxhYmxlIG9mIHRoZSB0YWInXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnaXNEaXNhYmxlZCcsXG5cdCAgICAgICAgdHlwZTogJ0Jvb2xlYW4nLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuXHQgICAgICAgIGRlc2M6ICdJcyB0aGUgdGFiIGRpc2FibGVkIG9yIG5vdC4gV2hlbiBzZXQgdG8gdHJ1ZSwgdGhlIHRhYiBpcyBub3QgY2xpY2thYmxlLidcblx0ICAgICAgfV1cblx0ICAgIH07XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXHQvLyA8dGVtcGxhdGU+XG5cdC8vICAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cblx0Ly8gICAgPGRpdiBjbGFzcz1cImh5X28td3JhcHBlclwiPlxuXHQvLyAgICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+VGFiPC9oMj5cblx0Ly8gICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cblx0Ly8gICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cblx0Ly8gICAgICAgICAgICA8dGFicyBjbGFzcz1cImMtcHJpY2UtbG9va3VwIGh5X28tbGF5b3V0X19pdGVtICBoeV91LXNpemUtM29mM0BzbSBoeV91LXNpemUtM29mNEBtZCBoeV91LXNpemUtNG9mMTJAbGdcIj5cblx0Ly8gICAgICAgICAgICAgIDx0YWIgbGFiZWw9XCJUYWIgMVwiPlxuXHQvLyAgICAgICAgICAgICAgIDxwPlxuXHQvLyAgICAgICAgICAgICAgICAgVGFiIDEgY29udGVudFxuXHQvLyAgICAgICAgICAgICAgIDwvcD5cblx0Ly8gICAgICAgICAgICAgIDwvdGFiPlxuXHQvLyAgICAgICAgICAgICAgPHRhYiBsYWJlbD1cIlRhYiAyXCI+XG5cdC8vICAgICAgICAgICAgICAgIDxwPlxuXHQvLyAgICAgICAgICAgICAgICAgIFRhYiAyIGNvbnRlbnRcblx0Ly8gICAgICAgICAgICAgICAgPC9wPlxuXHQvLyAgICAgICAgICAgICAgPC90YWI+XG5cdC8vICAgICAgICAgICAgICA8dGFiIGxhYmVsPVwiVGFiIDNcIiA6aXMtZGlzYWJsZWQ9XCJ0cnVlXCI+XG5cdC8vICAgICAgICAgICAgICAgIDxwPlxuXHQvLyAgICAgICAgICAgICAgICAgIFRhYiAzIGNvbnRlbnRcblx0Ly8gICAgICAgICAgICAgICAgPC9wPlxuXHQvLyAgICAgICAgICAgICAgPC90YWI+XG5cdC8vICAgICAgICAgICAgPC90YWJzPlxuXHQvLyAgICAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiSFRNTFwiPlxuXHQvLyAgICAgICAgICAgIDxwcmU+XG5cdC8vICAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cblx0Ly8gICAgICAgICAgICAgICAgJmx0O3RhYnMmZ3Q7XG5cdC8vICAgICAgICAgICAgICAgICAgJmx0O3RhYiBsYWJlbD1cIlRhYiAxXCImZ3Q7XG5cdC8vICAgICAgICAgICAgICAgICAgICAmbHQ7cCZndDtcblx0Ly8gICAgICAgICAgICAgICAgICAgICAgVGFiIDEgY29udGVudFxuXHQvLyAgICAgICAgICAgICAgICAgICAgJmx0Oy9wJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAgICZsdDsvdGFiJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAgICZsdDt0YWIgbGFiZWw9XCJUYWIgMlwiJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAgICAgJmx0O3AmZ3Q7XG5cdC8vICAgICAgICAgICAgICAgICAgICAgIFRhYiAyIGNvbnRlbnRcblx0Ly8gICAgICAgICAgICAgICAgICAgICZsdDsvcCZndDtcblx0Ly8gICAgICAgICAgICAgICAgICAmbHQ7L3RhYiZndDtcblx0Ly8gICAgICAgICAgICAgICAgICAmbHQ7dGFiIGxhYmVsPVwiVGFiIDNcIiA6aXMtZGlzYWJsZWQ9XCJ0cnVlXCImZ3Q7XG5cdC8vICAgICAgICAgICAgICAgICAgICAmbHQ7cCZndDtcblx0Ly8gICAgICAgICAgICAgICAgICAgICAgVGFiIDMgY29udGVudFxuXHQvLyAgICAgICAgICAgICAgICAgICAgJmx0Oy9wJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAgICZsdDsvdGFiJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAmbHQ7L3RhYnMmZ3Q7XG5cdC8vICAgICAgICAgICAgICA8L2NvZGU+XG5cdC8vICAgICAgICAgICAgPC9wcmU+XG5cdC8vICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG5cdC8vICAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvL1xuXHQvLyAgICA8L2Rpdj5cblx0Ly8gICA8L3NlY3Rpb24+XG5cdC8vIDwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cbi8qKiovIH0sXG4vKiA1MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0Ly8gPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL2NvbXBvbmVudHMvdWkvaWNvbic7XG5cdC8vICAgICBAaW1wb3J0ICcuLi8uLi90cmFuc2l0aW9ucy9mYWRlLnNjc3MnO1xuXHQvLyAgICAgQGltcG9ydCAnLi9hbGVydC5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vYWxlcnQuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgaXNWaXNpYmxlOiB0cnVlXG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIHByb3BzOiB7XG5cdCAgICB0eXBlOiB7XG5cdCAgICAgIHR5cGU6IFN0cmluZyxcblx0ICAgICAgcmVxdWlyZWQ6IHRydWVcblx0ICAgIH0sXG5cdCAgICBkaXNtaXNzaWJsZToge1xuXHQgICAgICB0eXBlOiBCb29sZWFuLFxuXHQgICAgICBkZWZhdWx0OiB0cnVlXG5cdCAgICB9LFxuXHQgICAgdGltZW91dDoge1xuXHQgICAgICB0eXBlOiBOdW1iZXIsXG5cdCAgICAgIGRlZmF1bHQ6IC0xXG5cdCAgICB9LFxuXHQgICAgb25DbG9zZWQ6IHtcblx0ICAgICAgdHlwZTogRnVuY3Rpb25cblx0ICAgIH1cblx0ICB9LFxuXHQgIG1ldGhvZHM6IHtcblx0ICAgIGRpc21pc3M6IGZ1bmN0aW9uIGRpc21pc3MoKSB7XG5cdCAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuXHQgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoISFfdGhpcy5vbkNsb3NlZCkge1xuXHQgICAgICAgICAgX3RoaXMub25DbG9zZWQuYXBwbHkoX3RoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICByZWFkeTogZnVuY3Rpb24gcmVhZHkoKSB7XG5cdCAgICB2YXIgX3RoaXMyID0gdGhpcztcblx0XG5cdCAgICBpZiAodGhpcy50aW1lb3V0ID49IDApIHtcblx0ICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgX3RoaXMyLmRpc21pc3MoKTtcblx0ICAgICAgfSwgdGhpcy50aW1lb3V0KTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA1MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0Ly8gPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL2NvbXBvbmVudHMvdWkvaWNvbic7XG5cdC8vICAgICBAaW1wb3J0ICcuL2NvbGxhcHNhYmxlLXBhbmVsLnNjc3MnO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi9jb2xsYXBzYWJsZS1wYW5lbC5odG1sXCI+PC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIHByb3BzOiB7XG5cdCAgICBpc09wZW46IHtcblx0ICAgICAgdHlwZTogQm9vbGVhbixcblx0ICAgICAgZGVmYXVsdDogZmFsc2Vcblx0ICAgIH0sXG5cdCAgICBsYWJlbDoge1xuXHQgICAgICB0eXBlOiBTdHJpbmcsXG5cdCAgICAgIHJlcXVpcmVkOiB0cnVlXG5cdCAgICB9XG5cdCAgfSxcblx0ICBtZXRob2RzOiB7XG5cdCAgICB0b2dnbGVPcGVuOiBmdW5jdGlvbiB0b2dnbGVPcGVuKCRldmVudCkge1xuXHQgICAgICB0aGlzLmlzT3BlbiA9ICF0aGlzLmlzT3Blbjtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA1NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGZldGNoKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX21peGlucyA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHRcblx0dmFyIF9taXhpbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWl4aW5zKTtcblx0XG5cdHZhciBfZmluZEluZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDEpO1xuXHRcblx0dmFyIF9maW5kSW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZmluZEluZGV4KTtcblx0XG5cdHZhciBfZGVib3VuY2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOSk7XG5cdFxuXHR2YXIgX2RlYm91bmNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlYm91bmNlKTtcblx0XG5cdHZhciBfc2V0Rm9jdXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0XG5cdHZhciBfc2V0Rm9jdXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2V0Rm9jdXMpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdC8vXG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vbGVnYWwtY29udGFpbmVyLnNjc3MnO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi9sZWdhbC1jb250YWluZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdC8qXG5cdCAqIEFQSTogPGxlZ2FsLWNvbnRhaW5lcj48L2xlZ2FsLWNvbnRhaW5lcj5cblx0Ki9cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBtaXhpbnM6IF9taXhpbnMyLmRlZmF1bHQsXG5cdCAgZGlyZWN0aXZlczoge1xuXHQgICAgc2V0Rm9jdXM6IF9zZXRGb2N1czIuZGVmYXVsdFxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGluZGV4ZWRMZWdhbHM6IFtdLFxuXHQgICAgICBub25JbmRleGVkTGVnYWxzOiBbXSxcblx0ICAgICAgYXBpTGFuZzogbnVsbCxcblx0ICAgICAgYXBpUmVnaW9uOiBudWxsXG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIG1ldGhvZHM6IHtcblx0ICAgIGZldGNoTGVnYWxzOiBmdW5jdGlvbiBmZXRjaExlZ2FscyhrZXlzKSB7XG5cdCAgICAgIHJldHVybiBmZXRjaCgnXFxuICAgICAgICAgICcgKyB0aGlzLiRyb290LmxpZ2VyRW5kUG9pbnQgKyAnP2xhbmc9JyArIHRoaXMuYXBpTGFuZyArICcmcmVnaW9uPScgKyB0aGlzLmFwaVJlZ2lvbiArICcmaHRtbD10cnVlXFxuICAgICAgICAnLCB7XG5cdCAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG5cdCAgICAgICAgaGVhZGVyczoge1xuXHQgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcblx0ICAgICAgICAgIGFwcGxpY2F0aW9uS2V5OiB0aGlzLiRyb290LmxpZ2VyQXBwbGljYXRpb25LZXlcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcblx0ICAgICAgICAgIGtleXM6IGtleXNcblx0ICAgICAgICB9KVxuXHQgICAgICB9KTtcblx0ICAgIH0sXG5cdCAgICBhcHBlbmRSZXNwb25zZVRvTGVnYWxDb250YWluZXI6IGZ1bmN0aW9uIGFwcGVuZFJlc3BvbnNlVG9MZWdhbENvbnRhaW5lcih0eXBlLCBkYXRhKSB7XG5cdCAgICAgIHZhciBwcm9jZXNzID0gZnVuY3Rpb24gcHJvY2Vzcyh0YXJnZXQsIGRhdGFBcnkpIHtcblx0ICAgICAgICBkYXRhQXJ5LmZvckVhY2goZnVuY3Rpb24gKGxlZ2FsUmVzcG9uc2UpIHtcblx0ICAgICAgICAgIHZhciBpbmRleCA9IHRhcmdldC5maW5kSW5kZXgoZnVuY3Rpb24gKGwpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGwua2V5ID09PSBsZWdhbFJlc3BvbnNlLmtleTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcblx0ICAgICAgICAgICAgdGFyZ2V0LiRzZXQoaW5kZXgsIHtcblx0ICAgICAgICAgICAgICBjb250ZW50OiBsZWdhbFJlc3BvbnNlLmNvbnRlbnQsXG5cdCAgICAgICAgICAgICAga2V5OiBsZWdhbFJlc3BvbnNlLmtleVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfTtcblx0ICAgICAgaWYgKHR5cGUgPT09ICdpbmRleGVkJykge1xuXHQgICAgICAgIHByb2Nlc3ModGhpcy5pbmRleGVkTGVnYWxzLCBkYXRhKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwcm9jZXNzKHRoaXMubm9uSW5kZXhlZExlZ2FscywgZGF0YSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0TGVnYWxzOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBfZGVib3VuY2UyLmRlZmF1bHQuY2FsbCh0aGlzLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgICAgdmFyIGluZGV4ZWRLZXlzID0gdGhpcy5pbmRleGVkTGVnYWxzLm1hcChmdW5jdGlvbiAobGVnYWwpIHtcblx0ICAgICAgICAgIHJldHVybiBsZWdhbC5rZXk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgdmFyIG5vbkluZGV4ZWRLZXlzID0gdGhpcy5ub25JbmRleGVkTGVnYWxzLm1hcChmdW5jdGlvbiAobGVnYWwpIHtcblx0ICAgICAgICAgIHJldHVybiBsZWdhbC5rZXk7XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIGlmIChpbmRleGVkS2V5cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICB0aGlzLmZldGNoTGVnYWxzKGluZGV4ZWRLZXlzKS50aGVuKHRoaXMucGFyc2VKU09OKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgICAgIF90aGlzLmFwcGVuZFJlc3BvbnNlVG9MZWdhbENvbnRhaW5lcignaW5kZXhlZCcsIGRhdGEpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChub25JbmRleGVkS2V5cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICB0aGlzLmZldGNoTGVnYWxzKG5vbkluZGV4ZWRLZXlzKS50aGVuKHRoaXMucGFyc2VKU09OKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgICAgIF90aGlzLmFwcGVuZFJlc3BvbnNlVG9MZWdhbENvbnRhaW5lcignbm9uSW5kZXhlZCcsIGRhdGEpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LCAxMCk7XG5cdCAgICB9KClcblx0ICB9LFxuXHQgIGV2ZW50czoge1xuXHQgICAgJ2xlZ2FsOjpjbGljayc6IGZ1bmN0aW9uIGxlZ2FsQ2xpY2sobGVnYWxLZXkpIHtcblx0ICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgICB2YXIgdGFyZ2V0TGVnYWxJbmRleCA9IHRoaXMuaW5kZXhlZExlZ2Fscy5maW5kSW5kZXgoZnVuY3Rpb24gKGwpIHtcblx0ICAgICAgICByZXR1cm4gbC5rZXkgPT09IGxlZ2FsS2V5O1xuXHQgICAgICB9KTtcblx0ICAgICAgaWYgKHRhcmdldExlZ2FsSW5kZXggPiAtMSkge1xuXHQgICAgICAgIHRoaXMuaW5kZXhlZExlZ2Fscy5mb3JFYWNoKGZ1bmN0aW9uIChsLCBpKSB7XG5cdCAgICAgICAgICBpZiAoaSAhPT0gdGFyZ2V0TGVnYWxJbmRleCkge1xuXHQgICAgICAgICAgICBsLmlzU2VsZWN0ZWQgPSBmYWxzZTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIF90aGlzMi5pbmRleGVkTGVnYWxzLiRzZXQoaSwgT2JqZWN0LmFzc2lnbih7fSwgX3RoaXMyLmluZGV4ZWRMZWdhbHNbaV0sIHsgaXNTZWxlY3RlZDogdHJ1ZSB9KSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdCAgICAnbGVnYWw6OmluaXQnOiBmdW5jdGlvbiBsZWdhbEluaXQobGVnYWxJbml0RGV0YWlsKSB7XG5cdCAgICAgIHRoaXMuYXBpTGFuZyA9IGxlZ2FsSW5pdERldGFpbC5sYW5nO1xuXHQgICAgICB0aGlzLmFwaVJlZ2lvbiA9IGxlZ2FsSW5pdERldGFpbC5yZWdpb247XG5cdCAgICAgIC8vIGNoZWNrIGlmIGxvYWRlZCBhbHJlYWR5XG5cdCAgICAgIHZhciBjb250YWluZXJSZWYgPSBsZWdhbEluaXREZXRhaWwuaXNOb25JbmRleGVkID8gdGhpcy5ub25JbmRleGVkTGVnYWxzIDogdGhpcy5pbmRleGVkTGVnYWxzO1xuXHQgICAgICB2YXIgaW5kZXggPSAoMCwgX2ZpbmRJbmRleDIuZGVmYXVsdCkoY29udGFpbmVyUmVmLCBmdW5jdGlvbiAobGVnYWwpIHtcblx0ICAgICAgICByZXR1cm4gbGVnYWwua2V5ID09PSBsZWdhbEluaXREZXRhaWwua2V5O1xuXHQgICAgICB9KTtcblx0ICAgICAgLy8gaWYgbm90IGZvdW5kXG5cdCAgICAgIGlmIChpbmRleCA8IDApIHtcblx0ICAgICAgICBpbmRleCA9IGNvbnRhaW5lclJlZi5wdXNoKGxlZ2FsSW5pdERldGFpbCkgLSAxO1xuXHQgICAgICAgIHRoaXMuZ2V0TGVnYWxzKCk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKCFsZWdhbEluaXREZXRhaWwuaXNOb25JbmRleGVkKSB7XG5cdCAgICAgICAgdGhpcy5yb290QnJvYWRjYXN0KCdsZWdhbDo6dWRwYXRlJywge1xuXHQgICAgICAgICAga2V5OiBsZWdhbEluaXREZXRhaWwua2V5LFxuXHQgICAgICAgICAgaXNOb25JbmRleGVkOiBsZWdhbEluaXREZXRhaWwuaXNOb25JbmRleGVkLFxuXHQgICAgICAgICAgaW5kZXg6IGluZGV4XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3KSkpXG5cbi8qKiovIH0sXG4vKiA1NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX21peGlucyA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHRcblx0dmFyIF9taXhpbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWl4aW5zKTtcblx0XG5cdHZhciBfZGVmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblx0XG5cdHZhciBfZGVmZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vbGVnYWwtY291bnRlci5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vbGVnYWwtY291bnRlci5odG1sXCI+PC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblx0Lypcblx0ICogQVBJOiA8bGVnYWwtY291bnRlclxuXHQgKiAgICAgICAgbGVnYWwta2V5PVwiKFN0cmluZykga2V5XCJcblx0ICogICAgICAgIGxlZ2FsLWxhbmc9XCIoU3RyaW5nKSBsYW5nXCJcblx0ICogICAgICAgIGxlZ2FsLXJlZ2lvbj1cIihTdHJpbmcpIHJlZ2lvblwiXG5cdCAqICAgICAgICBpcy1ub24taW5kZXhlZD1cIihCb29sZWFuKSBpc05vbkluZGV4ZWRcIlxuXHQgKiAgICAgID48L2xlZ2FsLWNvdW50ZXI+XG5cdCovXG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgbWl4aW5zOiBfbWl4aW5zMi5kZWZhdWx0LFxuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBsZWdhbENvdW50ZXI6IG51bGxcblx0ICAgIH07XG5cdCAgfSxcblx0XG5cdCAgcHJvcHM6IHtcblx0ICAgIGxlZ2FsS2V5OiB7XG5cdCAgICAgIHR5cGU6IFN0cmluZyxcblx0ICAgICAgcmVxdWlyZWQ6IHRydWVcblx0ICAgIH0sXG5cdCAgICBpc05vbkluZGV4ZWQ6IHtcblx0ICAgICAgdHlwZTogQm9vbGVhbixcblx0ICAgICAgZGVmYXVsdDogZmFsc2Vcblx0ICAgIH0sXG5cdCAgICBsZWdhbExhbmc6IHtcblx0ICAgICAgdHlwZTogU3RyaW5nLFxuXHQgICAgICByZXF1aXJlZDogdHJ1ZVxuXHQgICAgfSxcblx0ICAgIGxlZ2FsUmVnaW9uOiB7XG5cdCAgICAgIHR5cGU6IFN0cmluZyxcblx0ICAgICAgcmVxdWlyZWQ6IHRydWVcblx0ICAgIH1cblx0ICB9LFxuXHQgIGV2ZW50czoge1xuXHQgICAgJ2xlZ2FsOjp1ZHBhdGUnOiBmdW5jdGlvbiBsZWdhbFVkcGF0ZSh1cGRhdGVEZXRhaWwpIHtcblx0ICAgICAgaWYgKCF0aGlzLmlzTm9uSW5kZXhlZCAmJiB1cGRhdGVEZXRhaWwua2V5ID09PSB0aGlzLmxlZ2FsS2V5KSB7XG5cdCAgICAgICAgdGhpcy5sZWdhbENvdW50ZXIgPSB1cGRhdGVEZXRhaWwuaW5kZXggKyAxO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0ICBtZXRob2RzOiB7XG5cdCAgICBjbGlja0hhbmRsZXI6IGZ1bmN0aW9uIGNsaWNrSGFuZGxlcigpIHtcblx0ICAgICAgdGhpcy5yb290QnJvYWRjYXN0KCdsZWdhbDo6Y2xpY2snLCB0aGlzLmxlZ2FsS2V5KTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIGJlZm9yZUNvbXBpbGU6IGZ1bmN0aW9uIGJlZm9yZUNvbXBpbGUoKSB7fSxcblx0ICByZWFkeTogZnVuY3Rpb24gcmVhZHkoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICgwLCBfZGVmZXIyLmRlZmF1bHQpKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX3RoaXMucm9vdEJyb2FkY2FzdCgnbGVnYWw6OmluaXQnLCB7XG5cdCAgICAgICAga2V5OiBfdGhpcy5sZWdhbEtleSxcblx0ICAgICAgICBsYW5nOiBfdGhpcy5sZWdhbExhbmcsXG5cdCAgICAgICAgcmVnaW9uOiBfdGhpcy5sZWdhbFJlZ2lvbixcblx0ICAgICAgICBpc05vbkluZGV4ZWQ6IF90aGlzLmlzTm9uSW5kZXhlZFxuXHQgICAgICB9KTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblxuLyoqKi8gfSxcbi8qIDU2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0Ly8gPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuXHQvLyAgICAgQGltcG9ydCAnLi9vdmVybGF5LWNvbnRhaW5lci5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vb3ZlcmxheS1jb250YWluZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdC8qXG5cdCogRXg6IDxvdmVybGF5LWNvbnRhaW5lciBpcy12aXNpYmxlPVwiKEJvb2xlYW4pIGZhbHNlXCI+XG5cdCAgICAgIDwvb3ZlcmxheS1jb250YWluZXI+XG5cdCovXG5cdHZhciBFU0MgPSAyNztcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIHByb3BzOiB7XG5cdCAgICBpc1Zpc2libGU6IHtcblx0ICAgICAgdHlwZTogQm9vbGVhbixcblx0ICAgICAgZGVmYXVsdDogZmFsc2Vcblx0ICAgIH1cblx0ICB9LFxuXHQgIHdhdGNoOiB7XG5cdCAgICBpc1Zpc2libGU6IGZ1bmN0aW9uIGlzVmlzaWJsZShfaXNWaXNpYmxlKSB7XG5cdCAgICAgIHZhciBlbCA9IHdpbmRvdy5kb2N1bWVudC5ib2R5O1xuXHQgICAgICB2YXIgY2xhc3NOYW1lID0gJ25vLXNjcm9sbCc7XG5cdCAgICAgIGlmIChfaXNWaXNpYmxlKSB7XG5cdCAgICAgICAgaWYgKCEhZWwuY2xhc3NMaXN0KSB7XG5cdCAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGVsLmNsYXNzTmFtZSArPSAnICcgKyBjbGFzc05hbWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGlmIChlbC5jbGFzc0xpc3QpIHtcblx0ICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cCgnKF58XFxcXGIpJyArIGNsYXNzTmFtZS5zcGxpdCgnICcpLmpvaW4oJ3wnKSArICcoXFxcXGJ8JCknLCAnZ2knKSwgJyAnKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHQgIGV2ZW50czoge1xuXHQgICAgJ292ZXJsYXlDb250YWluZXI6Om9wZW4nOiBmdW5jdGlvbiBvdmVybGF5Q29udGFpbmVyT3BlbigpIHtcblx0ICAgICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xuXHQgICAgfSxcblx0ICAgICdvdmVybGF5Q29udGFpbmVyOjpjbG9zZSc6IGZ1bmN0aW9uIG92ZXJsYXlDb250YWluZXJDbG9zZSgpIHtcblx0ICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIHJlYWR5OiBmdW5jdGlvbiByZWFkeSgpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgd2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZ0KSB7XG5cdCAgICAgIGV2dCA9IGV2dCB8fCB3aW5kb3cuZXZlbnQ7XG5cdCAgICAgIGlmIChldnQua2V5Q29kZSA9PT0gRVNDKSB7XG5cdCAgICAgICAgX3RoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblxuLyoqKi8gfSxcbi8qIDU3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0Ly8gPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuXHQvLyAgICAgQGltcG9ydCAnLi9vdmVybGF5LnNjc3MnO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi9vdmVybGF5Lmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHQvKlxuXHQgKiBFeDogPG92ZXJsYXkgb3ZlcmxheS1rZXk9XCIoU3RyaW5nKSBrZXlcIj5cblx0ICogICAgICAgIEFueSBjb250ZW50XG5cdCAqICAgICAgPC9vdmVybGF5PlxuXHQqL1xuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGlzVmlzaWJsZTogZmFsc2Vcblx0ICAgIH07XG5cdCAgfSxcblx0XG5cdCAgcHJvcHM6IHtcblx0ICAgIG92ZXJsYXlLZXk6IHtcblx0ICAgICAgdHlwZTogU3RyaW5nXG5cdCAgICB9XG5cdCAgfSxcblx0ICBtZXRob2RzOiB7XG5cdCAgICBjbG9zZU92ZXJsYXk6IGZ1bmN0aW9uIGNsb3NlT3ZlcmxheSgpIHtcblx0ICAgICAgdGhpcy4kZGlzcGF0Y2goJ292ZXJsYXlDb250YWluZXI6OmNsb3NlJyk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBldmVudHM6IHtcblx0ICAgICdvdmVybGF5OjpvcGVuJzogZnVuY3Rpb24gb3ZlcmxheU9wZW4ob3ZlcmxheUtleSkge1xuXHQgICAgICBpZiAob3ZlcmxheUtleSA9PT0gdGhpcy5vdmVybGF5S2V5KSB7XG5cdCAgICAgICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblxuLyoqKi8gfSxcbi8qIDU4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHQvLyA8c3R5bGUgbGFuZz1cInNhc3NcIj5cblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvY29tcG9uZW50cy91aS9pY29uJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vc3RlcC10cmFja2VyLnNjc3MnO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi9zdGVwLXRyYWNrZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBwcm9wczoge1xuXHQgICAgY29uZmlnOiB7XG5cdCAgICAgIHR5cGU6IE9iamVjdFxuXHQgICAgfSxcblx0ICAgIGN1cnJlbnRTdGVwOiB7XG5cdCAgICAgIHR5cGU6IE51bWJlcixcblx0ICAgICAgZGVmYXVsdDogMFxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgY2xpY2tIYW5kbGVyOiBmdW5jdGlvbiBjbGlja0hhbmRsZXIoJGV2ZW50LCBzdGVwLCBpbmRleCkge1xuXHQgICAgICBpZiAoISFzdGVwLm9uQ2xpY2tIYW5kbGVyKSB7XG5cdCAgICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICAgICAgaWYgKHRoaXMuY3VycmVudFN0ZXAgPiBpbmRleCkge1xuXHQgICAgICAgICAgc3RlcC5vbkNsaWNrSGFuZGxlcigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblxuLyoqKi8gfSxcbi8qIDU5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi90YWIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBwcm9wczoge1xuXHQgICAgbGFiZWw6IHtcblx0ICAgICAgdHlwZTogU3RyaW5nXG5cdCAgICB9LFxuXHQgICAgaXNEaXNhYmxlZDoge1xuXHQgICAgICB0eXBlOiBCb29sZWFuLFxuXHQgICAgICBkZWZhdWx0OiBmYWxzZVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHRhYkluZGV4OiAwLFxuXHQgICAgICBpc1Zpc2libGU6IGZhbHNlXG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIGNvbXB1dGVkOiB7XG5cdCAgICBpc1Zpc2libGU6IGZ1bmN0aW9uIGlzVmlzaWJsZSgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuJHBhcmVudC5hY3RpdmVUYWJJbmRleCA9PT0gdGhpcy50YWJJbmRleDtcblx0ICAgIH1cblx0ICB9LFxuXHQgIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7XG5cdCAgICB0aGlzLiRwYXJlbnQudGFicy5wdXNoKHtcblx0ICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG5cdCAgICAgIGlzRGlzYWJsZWQ6IHRoaXMuaXNEaXNhYmxlZFxuXHQgICAgfSk7XG5cdCAgfSxcblx0ICByZWFkeTogZnVuY3Rpb24gcmVhZHkoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHRoaXMuJHBhcmVudC4kY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoYywgaW5kZXgpIHtcblx0ICAgICAgaWYgKGMuJGVsID09PSBfdGhpcy4kZWwpIHtcblx0ICAgICAgICBfdGhpcy50YWJJbmRleCA9IGluZGV4O1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9LFxuXHQgIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7XG5cdCAgICB0aGlzLiRwYXJlbnQudGFicy5zcGxpY2UodGhpcy50YWJJbmRleCwgMSk7XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNjAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXHRcblx0Ly8gPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuXHQvLyAgICAgQGltcG9ydCAnLi90YWJzLnNjc3MnO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi90YWJzLmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHQvKlxuXHQgKiAgRXg6IDx0YWJzIGFjdGl2ZS10YWItaW5kZXg9XCIoSW50ZWdlcikgMFwiPlxuXHQgKiAgICAgICAgPHRhYiBsYWJlbD1cIlRhYiBBXCI+XG5cdCAqICAgICAgICAgIEFueSBjb250ZW50XG5cdCAqICAgICAgICA8L3RhYj5cblx0ICogICAgICAgIDx0YWIgbGFiZWw9XCJUYWIgQlwiIGlzLWRpc2FibGVkPVwiKEJvb2xlYW4pIGZhbHNlXCI+XG5cdCAqICAgICAgICAgIEFueSBjb250ZW50XG5cdCAqICAgICAgICA8L3RhYj5cblx0ICogICAgICAgPHRhYnM+XG5cdCovXG5cdGV4cG9ydHMuZGVmYXVsdCA9IF9kZWZpbmVQcm9wZXJ0eSh7XG5cdCAgcHJvcHM6IHtcblx0ICAgIGFjdGl2ZVRhYkluZGV4OiB7XG5cdCAgICAgIHR5cGU6IE51bWJlcixcblx0ICAgICAgZGVmYXVsdDogMFxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgaXNBY3RpdmU6IGZ1bmN0aW9uIGlzQWN0aXZlKGluZGV4KSB7XG5cdCAgICAgIHJldHVybiBhY3RpdmVUYWJJbmRleCA9PT0gaW5kZXg7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgdGFiczogW11cblx0ICAgIH07XG5cdCAgfVxuXHR9LCBcIm1ldGhvZHNcIiwge1xuXHQgIGhhbmRsZVRhYkxpc3RDbGljazogZnVuY3Rpb24gaGFuZGxlVGFiTGlzdENsaWNrKGluZGV4LCB0YWIpIHtcblx0ICAgIGlmICghdGFiLmlzRGlzYWJsZWQpIHtcblx0ICAgICAgdGhpcy5hY3RpdmVUYWJJbmRleCA9IGluZGV4O1xuXHQgICAgfVxuXHQgIH1cblx0fSk7XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA2MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzMpO1xuXHRcblx0dmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cdFxuXHR2YXIgX3N0ZXBUcmFja2VyUGFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTc2KTtcblx0XG5cdHZhciBfc3RlcFRyYWNrZXJQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0ZXBUcmFja2VyUGFnZSk7XG5cdFxuXHR2YXIgX3RhYnNQYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzcpO1xuXHRcblx0dmFyIF90YWJzUGFnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90YWJzUGFnZSk7XG5cdFxuXHR2YXIgX2xlZ2FsUGFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTc0KTtcblx0XG5cdHZhciBfbGVnYWxQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xlZ2FsUGFnZSk7XG5cdFxuXHR2YXIgX292ZXJsYXlQYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzUpO1xuXHRcblx0dmFyIF9vdmVybGF5UGFnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vdmVybGF5UGFnZSk7XG5cdFxuXHR2YXIgX2NvbGxhcHNhYmxlUGFuZWxQYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzIpO1xuXHRcblx0dmFyIF9jb2xsYXBzYWJsZVBhbmVsUGFnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb2xsYXBzYWJsZVBhbmVsUGFnZSk7XG5cdFxuXHR2YXIgX2FsZXJ0UGFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcxKTtcblx0XG5cdHZhciBfYWxlcnRQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FsZXJ0UGFnZSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgICcvJzoge1xuXHQgICAgY29tcG9uZW50OiBfaW5kZXgyLmRlZmF1bHRcblx0ICB9LFxuXHQgICcvYWxlcnQnOiB7XG5cdCAgICBjb21wb25lbnQ6IHtcblx0ICAgICAgdGVtcGxhdGU6ICc8YWxlcnQtcGFnZT48L2FsZXJ0LXBhZ2U+Jyxcblx0ICAgICAgY29tcG9uZW50czogeyBBbGVydFBhZ2U6IF9hbGVydFBhZ2UyLmRlZmF1bHQgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgJy9zdGVwLXRyYWNrZXInOiB7XG5cdCAgICBjb21wb25lbnQ6IHtcblx0ICAgICAgdGVtcGxhdGU6ICc8c3RlcC10cmFja2VyLXBhZ2U+PC9zdGVwLXRyYWNrZXItcGFnZT4nLFxuXHQgICAgICBjb21wb25lbnRzOiB7IFN0ZXBUcmFja2VyUGFnZTogX3N0ZXBUcmFja2VyUGFnZTIuZGVmYXVsdCB9XG5cdCAgICB9XG5cdCAgfSxcblx0ICAnL3RhYnMnOiB7XG5cdCAgICBjb21wb25lbnQ6IHtcblx0ICAgICAgdGVtcGxhdGU6ICc8dGFicy1wYWdlPjwvdGFicy1wYWdlPicsXG5cdCAgICAgIGNvbXBvbmVudHM6IHsgVGFic1BhZ2U6IF90YWJzUGFnZTIuZGVmYXVsdCB9XG5cdCAgICB9XG5cdCAgfSxcblx0ICAnL2xlZ2FsJzoge1xuXHQgICAgY29tcG9uZW50OiB7XG5cdCAgICAgIHRlbXBsYXRlOiAnPGxlZ2FsLXBhZ2U+PC9sZWdhbC1wYWdlPicsXG5cdCAgICAgIGNvbXBvbmVudHM6IHsgTGVnYWxQYWdlOiBfbGVnYWxQYWdlMi5kZWZhdWx0IH1cblx0ICAgIH1cblx0ICB9LFxuXHQgICcvb3ZlcmxheSc6IHtcblx0ICAgIGNvbXBvbmVudDoge1xuXHQgICAgICB0ZW1wbGF0ZTogJzxvdmVybGF5LXBhZ2U+PC9vdmVybGF5LXBhZ2U+Jyxcblx0ICAgICAgY29tcG9uZW50czogeyBPdmVybGF5UGFnZTogX292ZXJsYXlQYWdlMi5kZWZhdWx0IH1cblx0ICAgIH1cblx0ICB9LFxuXHQgICcvY29sbGFwc2FibGUtcGFuZWwnOiB7XG5cdCAgICBjb21wb25lbnQ6IHtcblx0ICAgICAgdGVtcGxhdGU6ICc8Y29sbGFwc2FibGUtcGFuZWwtcGFnZT48L2NvbGxhcHNhYmxlLXBhbmVsLXBhZ2U+Jyxcblx0ICAgICAgY29tcG9uZW50czogeyBDb2xsYXBzYWJsZVBhbmVsUGFnZTogX2NvbGxhcHNhYmxlUGFuZWxQYWdlMi5kZWZhdWx0IH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cbi8qKiovIH0sXG4vKiA2MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8qXG5cdCAgQGRlc2MgQWRkIGJlaGF2aW9yIHRvIGFueSBlbGVtZW50LiBXaGVuIGNsaWNrZWQsIGl0IHdpbGwgb3BlbiB0aGUgY29ycmVzcG9uZGluZyBvdmVybGF5XG5cdCAgRXhhbXBsZTogPGJ1dHRvbiBvdmVybGF5LW9wZW5lcj1cIm15LW92ZXJsYXlcIj48L2J1dHRvbj5cblx0Ki9cblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGlzTGl0ZXJhbDogdHJ1ZSxcblx0ICBldmVudEhhbmRsZXI6IGZ1bmN0aW9uIGV2ZW50SGFuZGxlcihlKSB7XG5cdCAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICB0aGlzLnZtLiRyb290LiRicm9hZGNhc3QoJ292ZXJsYXk6Om9wZW4nLCB0aGlzLmV4cHJlc3Npb24pO1xuXHQgICAgdGhpcy52bS4kcm9vdC4kYnJvYWRjYXN0KCdvdmVybGF5Q29udGFpbmVyOjpvcGVuJyk7XG5cdCAgfSxcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZXZlbnRIYW5kbGVyLmJpbmQodGhpcykpO1xuXHQgIH0sXG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5ldmVudEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9LFxuLyogNjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfb3ZlcmxheU9wZW5lciA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpO1xuXHRcblx0dmFyIF9vdmVybGF5T3BlbmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX292ZXJsYXlPcGVuZXIpO1xuXHRcblx0dmFyIF9zZXRGb2N1cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHRcblx0dmFyIF9zZXRGb2N1czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZXRGb2N1cyk7XG5cdFxuXHR2YXIgX2luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODQpO1xuXHRcblx0dmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cdFxuXHR2YXIgX292ZXJsYXlDb250YWluZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Mik7XG5cdFxuXHR2YXIgX292ZXJsYXlDb250YWluZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb3ZlcmxheUNvbnRhaW5lcik7XG5cdFxuXHR2YXIgX292ZXJsYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Myk7XG5cdFxuXHR2YXIgX292ZXJsYXkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb3ZlcmxheSk7XG5cdFxuXHR2YXIgX2xlZ2FsQ291bnRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgxKTtcblx0XG5cdHZhciBfbGVnYWxDb3VudGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xlZ2FsQ291bnRlcik7XG5cdFxuXHR2YXIgX2xlZ2FsQ29udGFpbmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODApO1xuXHRcblx0dmFyIF9sZWdhbENvbnRhaW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sZWdhbENvbnRhaW5lcik7XG5cdFxuXHR2YXIgX3RhYnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Nik7XG5cdFxuXHR2YXIgX3RhYnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdGFicyk7XG5cdFxuXHR2YXIgX3RhYiA9IF9fd2VicGFja19yZXF1aXJlX18oMTg1KTtcblx0XG5cdHZhciBfdGFiMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RhYik7XG5cdFxuXHR2YXIgX2luZGV4MyA9IF9fd2VicGFja19yZXF1aXJlX18oMTc5KTtcblx0XG5cdHZhciBfaW5kZXg0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgzKTtcblx0XG5cdHZhciBfaW5kZXg1ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzgpO1xuXHRcblx0dmFyIF9pbmRleDYgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleDUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBjb21wb25lbnRzID0ge1xuXHQgIFN0ZXBUcmFja2VyOiBfaW5kZXgyLmRlZmF1bHQsXG5cdCAgT3ZlcmxheUNvbnRhaW5lcjogX292ZXJsYXlDb250YWluZXIyLmRlZmF1bHQsXG5cdCAgT3ZlcmxheTogX292ZXJsYXkyLmRlZmF1bHQsXG5cdCAgTGVnYWxDb3VudGVyOiBfbGVnYWxDb3VudGVyMi5kZWZhdWx0LFxuXHQgIExlZ2FsQ29udGFpbmVyOiBfbGVnYWxDb250YWluZXIyLmRlZmF1bHQsXG5cdCAgVGFiczogX3RhYnMyLmRlZmF1bHQsXG5cdCAgVGFiOiBfdGFiMi5kZWZhdWx0LFxuXHQgIENvbGxhcHNhYmxlUGFuZWw6IF9pbmRleDQuZGVmYXVsdCxcblx0ICBBbGVydDogX2luZGV4Ni5kZWZhdWx0XG5cdH07XG5cdHZhciBkaXJlY3RpdmVzID0ge1xuXHQgIG92ZXJsYXlPcGVuZXI6IF9vdmVybGF5T3BlbmVyMi5kZWZhdWx0LFxuXHQgIHNldEZvY3VzOiBfc2V0Rm9jdXMyLmRlZmF1bHRcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5zdGFsbChWdWUpIHtcblx0ICBmb3IgKHZhciBuYW1lIGluIGNvbXBvbmVudHMpIHtcblx0ICAgIFZ1ZS5jb21wb25lbnQobmFtZSwgY29tcG9uZW50c1tuYW1lXSk7XG5cdCAgfVxuXHQgIGZvciAodmFyIF9uYW1lIGluIGRpcmVjdGl2ZXMpIHtcblx0ICAgIFZ1ZS5kaXJlY3RpdmUoX25hbWUsIGRpcmVjdGl2ZXNbX25hbWVdKTtcblx0ICB9XG5cdH07XG5cbi8qKiovIH0sXG4vKiA2NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIG1ldGhvZHM6IHtcblx0ICAgIHJvb3RCcm9hZGNhc3Q6IGZ1bmN0aW9uIHJvb3RCcm9hZGNhc3QoKSB7XG5cdCAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG5cdCAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy4kYnJvYWRjYXN0LmFwcGx5KHRoaXMuJHJvb3QsIGFyZ3MpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblxuLyoqKi8gfSxcbi8qIDY1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgbWV0aG9kczoge1xuXHQgICAgcGFyc2VKU09OOiBmdW5jdGlvbiBwYXJzZUpTT04ocmVzcG9uc2UpIHtcblx0ICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cbi8qKiovIH0sXG4vKiA2NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5oeV9jLWljb257Zm9udC1mYW1pbHk6VGVsdXMgSWNvbixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjt0ZXh0LWRlY29yYXRpb246bm9uZTt0ZXh0LXJlbmRlcmluZzpvcHRpbWl6ZUxlZ2liaWxpdHk7Y29sb3I6aW5oZXJpdDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Zm9udC1zaXplOmluaGVyaXQ7bGluZS1oZWlnaHQ6aW5oZXJpdH0uaHlfYy1pY29uX19zcXVhcmV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjIuNXJlbTtsaW5lLWhlaWdodDozcmVtO3dpZHRoOjNyZW07aGVpZ2h0OjNyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tMnh7Zm9udC1zaXplOjJlbX0uaHlfYy1pY29uLS0zeHtmb250LXNpemU6M2VtfS5oeV9jLWljb24tLTR4e2ZvbnQtc2l6ZTo0ZW19Lmh5X2MtaWNvbl9fc3R5bGVndWlkZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6MnJlbTtsaW5lLWhlaWdodDo0cmVtO3dpZHRoOjRyZW07aGVpZ2h0OjRyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXRoaWNrLW91dGxpbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uaHlfYy1pY29uLS1jaXJjbGUtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA1XFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDZcXFwifS5oeV9jLWljb24tLXRlbHVzLWxvZ286YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA5XFxcIn0uaHlfYy1pY29uLS1iYXItY2hhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEwXFxcIn0uaHlfYy1pY29uLS1waWN0dXJlLWZyYW1lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMVxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEyXFxcIn0uaHlfYy1pY29uLS1wYXBlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTNcXFwifS5oeV9jLWljb24tLWZvbGRlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTRcXFwifS5oeV9jLWljb24tLXNoYXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNVxcXCJ9Lmh5X2MtaWNvbi0tbWFnbmlmeS1nbGFzczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTZcXFwifS5oeV9jLWljb24tLXdhcm5pbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE4XFxcIn0uaHlfYy1pY29uLS1zdGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOVxcXCJ9Lmh5X2MtaWNvbi0tc3RhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjBcXFwifS5oeV9jLWljb24tLWhlYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMVxcXCJ9Lmh5X2MtaWNvbi0tbGlmZXNhdmVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMlxcXCJ9Lmh5X2MtaWNvbi0taGFtYnVyZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNFxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI1XFxcIn0uaHlfYy1pY29uLS1ncmlkLWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI2XFxcIn0uaHlfYy1pY29uLS1saWdodGJ1bGI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI3XFxcIn0uaHlfYy1pY29uLS1zcGVlZG9tZXRlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjhcXFwifS5oeV9jLWljb24tLWFkZC1yZW1vdmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI5XFxcIn0uaHlfYy1pY29uLS1jYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMFxcXCJ9Lmh5X2MtaWNvbi0tdHdpdHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzFcXFwifS5oeV9jLWljb24tLWZhY2Vib29rOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMlxcXCJ9Lmh5X2MtaWNvbi0teW91dHViZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzNcXFwifS5oeV9jLWljb24tLWdvb2dsZS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNFxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzVcXFwifS5oeV9jLWljb24tLXBsYXktYnV0dG9uLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNlxcXCJ9Lmh5X2MtaWNvbi0tdmlkZW8taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM3XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM5XFxcIn0uaHlfYy1pY29uLS1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDBcXFwifS5oeV9jLWljb24tLWNsb2NrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MVxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDJcXFwifS5oeV9jLWljb24tLXRhYmxldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDNcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDRcXFwifS5oeV9jLWljb24tLW1vdXNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NVxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ2XFxcIn0uaHlfYy1pY29uLS1wYXBlci1ub3Rlcy1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDdcXFwifS5oeV9jLWljb24tLXR2OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OFxcXCJ9Lmh5X2MtaWNvbi0tZmlsbTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDlcXFwifS5oeV9jLWljb24tLWVudmVsb3BlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MFxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MVxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTJcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUzXFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU1XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTZcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTdcXFwifS5oeV9jLWljb24tLXVzZXJzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1OVxcXCJ9Lmh5X2MtaWNvbi0tdXNlcnMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjBcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYyXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWJveGVkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2M1xcXCJ9Lmh5X2MtaWNvbi0tZ2VhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjRcXFwifS5oeV9jLWljb24tLWdlYXItY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjVcXFwifS5oeV9jLWljb24tLWdlYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY2XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OFxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jay1pbnZlcmV0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY5XFxcIn0uaHlfYy1pY29uLS1zdGFja2VkLXBhcGVycy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzFcXFwifS5oeV9jLWljb24tLW11c2ljLW5vdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcyXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3M1xcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NVxcXCJ9Lmh5X2MtaWNvbi0tbW91c2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc2XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzdcXFwifS5oeV9jLWljb24tLXBhcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OFxcXCJ9Lmh5X2MtaWNvbi0tdHYtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc5XFxcIn0uaHlfYy1pY29uLS1maWxtLWNsYXBwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgwXFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODFcXFwifS5oeV9jLWljb24tLXBob25lLWhhbmRzZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgyXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgzXFxcIn0uaHlfYy1pY29uLS1ob21lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NVxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODZcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTNcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTVcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24tY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTZcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTdcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDBcXFwifS5oeV9jLWljb24tLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAyXFxcIn0uaHlfYy1pY29uLS14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNFxcXCJ9Lmh5X2MtaWNvbi0teC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNVxcXCJ9Lmh5X2MtaWNvbi0teC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDZcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDhcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOVxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTExXFxcIn0uaHlfYy1pY29uLS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMlxcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExM1xcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTRcXFwifS5oeV9jLWljb24tLW1pbnVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNVxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTZcXFwifS5oeV9jLWljb24tLW1pbnVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExN1xcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1idWJibGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE5XFxcIn0uaHlfYy1pY29uLS1jaGF0LWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIwXFxcIn0uaHlfYy1pY29uLS1jaGF0LWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMlxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjNcXFwifS5oeV9jLWljb24tLXNpbS1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNVxcXCJ9Lmh5X2MtaWNvbi0tY2FsY3VsYXRvcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjZcXFwifS5oeV9jLWljb24tLWJsdWV0b290aC1oZWFkc2V0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyN1xcXCJ9Lmh5X2MtaWNvbi0tb3V0Z29pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjlcXFwifS5oeV9jLWljb24tLWluY29taW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMwXFxcIn0uaHlfYy1pY29uLS1jYXV0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzJcXFwifS5oeV9jLWljb24tLXdpZmk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMzXFxcIn0uaHlfYy1pY29uLS10aGluLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzVcXFwifS5oeV9jLWljb24tLWluZm8taW52ZXJ0ZWQ6YmVmb3JlLC5oeV9jLWljb24tLWluZm86YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM2XFxcIn0uaHlfYy1pY29uLS10cmVuZC11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzhcXFwifS5oeV9jLWljb24tLWdsb2JlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MlxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NFxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDVcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NlxcXCJ9Lmh5X2MtaWNvbi0tb3ZlcnZpZXctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ3XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1jaXJjbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ4XFxcIn0uaHlfYy1pY29uLS1wdWxzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDlcXFwifS5oeV9jLWljb24tLW1pa2UtbW9iaWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MFxcXCJ9Lmh5X2MtaWNvbi0tcmV3YXJkcy1iYWRnZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTFcXFwifS5oeV9jLWljb24tLWZpbHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTJcXFwifS5oeV9jLWljb24tLXNjaGVkdWxlLXRhbGs6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUzXFxcIn0uaHlfYy1pY29uLS13YXJuaW5nOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NVxcXCJ9Lmh5X2MtaWNvbi0tY2FydC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTZcXFwifS5oeV9jLWljb24tLWxpdmUtY2hhdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTdcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3QtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU4XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OVxcXCJ9Lmh5X2MtaWNvbi0tY2xvdWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYwXFxcIn0uaHlfYy1pY29uLS1kYXRhOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MVxcXCJ9Lmh5X2MtaWNvbi0tZGVsaXZlcnktdHJ1Y2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYyXFxcIn0uaHlfYy1pY29uLS1wcm90ZWN0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2M1xcXCJ9Lmh5X2MtaWNvbi0tY29sb3VyLXBpY2tlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjRcXFwifS5oeV9jLWljb24tLW11bHRpLWFjY291bnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY1XFxcIn0uaHlfYy1pY29uLS1hY2Nlc3Nvcmllcy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjZcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2N1xcXCJ9Lmh5X2MtaWNvbi0tZG9sbGFyLXNpZ246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY4XFxcIn0uaHlfYy1pY29uLS1saW5rLWFjY291bnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY5XFxcIn0uaHlfYy1pY29uLS1kYXRhLW1hbmFnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcwXFxcIn0uaHlfYy1pY29uLS1hY2Nlc3NvcmllczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzFcXFwifS5oeV9jLWljb24tLXRvb2xzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MlxcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTczXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzRcXFwifS5oeV9jLWljb24tLWlwLWZheDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzVcXFwifS5oeV9jLWljb24tLWlwLWZheC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzZcXFwifS5oeV9jLWljb24tLWxpbmtlZC1pbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzdcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OFxcXCJ9Lmh5X2MtaWNvbi0tbWljcm9waG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzlcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MFxcXCJ9Lmh5X2MtaWNvbi0tbmV0d29ya2luZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODFcXFwifS5oeV9jLWljb24tLWN5Y2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MlxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4M1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NFxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1hZGQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg1XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODZcXFwifS5zZ19jLWFwaS10YWJsZXt3aWR0aDoxMDAlfS5zZ19jLWFwaS10YWJsZSB0cnstd2Via2l0LWJveC1mbGV4OjE7LW1zLWZsZXg6MTtmbGV4OjF9LnNnX2MtYXBpLXRhYmxlIHRoe2JhY2tncm91bmQtY29sb3I6I2VlZX0uc2dfYy1hcGktdGFibGUgdGR7dGV4dC1hbGlnbjpjZW50ZXJ9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogNjcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuc2dfYy1uYXZ7ZGlzcGxheTpibG9jaztwb3NpdGlvbjpmaXhlZDtsZWZ0OjA7d2lkdGg6MjVyZW07aGVpZ2h0OjEwMCU7Ym9yZGVyLXJpZ2h0Oi4xcmVtIHNvbGlkICNlMmUyZTI7cGFkZGluZzoycmVtO292ZXJmbG93LXg6aGlkZGVuO292ZXJmbG93LXk6YXV0bztiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9LnNnX2MtbmF2X19zZWN0aW9ue2ZvbnQtZmFtaWx5OlRlbHVzIE1lZGl1bSxIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtmb250LXNpemU6MS4ycmVtO2JvcmRlci1ib3R0b206LjFyZW0gc29saWQgI2UyZTJlMjtwYWRkaW5nLXRvcDoxcmVtO3BhZGRpbmctYm90dG9tOi41cmVtO21hcmdpbjoxcmVtIDB9LnNnX2MtbmF2X19saXN0LWl0ZW17cGFkZGluZzo1cHggMH0uc2dfYy1uYXZfX2xpbms6aG92ZXJ7Y29sb3I6IzhjNjhhNn0uc2dfYy1uYXZfX2xpbmstLWFjdGl2ZXtjb2xvcjojNTdhNzA4fWJvZHl7YmFja2dyb3VuZC1jb2xvcjojZjVmNmY3fS5zZ19jLXNpdGVfX21haW57bWFyZ2luLWxlZnQ6MjVyZW19LnNnX2MtZGVtb3ttYXJnaW46MjBweCAwfS5zZ19jLWRlbW9fX2NvbnRhaW5lcntiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7b3ZlcmZsb3c6aGlkZGVuO2JvcmRlci1yYWRpdXM6NXB4O2JvcmRlcjoxcHggc29saWQgI2VlZTtwYWRkaW5nOjI1cHg7bWFyZ2luOjIwcHggMH1jb2RlW2NsYXNzKj1sYW5ndWFnZS1dLHByZVtjbGFzcyo9bGFuZ3VhZ2UtXXtjb2xvcjojMDAwO2JhY2tncm91bmQ6bm9uZTt0ZXh0LXNoYWRvdzowIDFweCAjZmZmO2ZvbnQtZmFtaWx5OkNvbnNvbGFzLE1vbmFjbyxBbmRhbGUgTW9ubyxVYnVudHUgTW9ubyxtb25vc3BhY2U7dGV4dC1hbGlnbjpsZWZ0O3doaXRlLXNwYWNlOnByZTt3b3JkLXNwYWNpbmc6bm9ybWFsO3dvcmQtYnJlYWs6bm9ybWFsO3dvcmQtd3JhcDpub3JtYWw7bGluZS1oZWlnaHQ6MS41Oy1tb3otdGFiLXNpemU6NDstby10YWItc2l6ZTo0O3RhYi1zaXplOjQ7LXdlYmtpdC1oeXBoZW5zOm5vbmU7LW1zLWh5cGhlbnM6bm9uZTtoeXBoZW5zOm5vbmV9Y29kZVtjbGFzcyo9bGFuZ3VhZ2UtXTo6LW1vei1zZWxlY3Rpb24sY29kZVtjbGFzcyo9bGFuZ3VhZ2UtXSA6Oi1tb3otc2VsZWN0aW9uLHByZVtjbGFzcyo9bGFuZ3VhZ2UtXTo6LW1vei1zZWxlY3Rpb24scHJlW2NsYXNzKj1sYW5ndWFnZS1dIDo6LW1vei1zZWxlY3Rpb257dGV4dC1zaGFkb3c6bm9uZTtiYWNrZ3JvdW5kOiNiM2Q0ZmN9Y29kZVtjbGFzcyo9bGFuZ3VhZ2UtXTo6c2VsZWN0aW9uLGNvZGVbY2xhc3MqPWxhbmd1YWdlLV0gOjpzZWxlY3Rpb24scHJlW2NsYXNzKj1sYW5ndWFnZS1dOjpzZWxlY3Rpb24scHJlW2NsYXNzKj1sYW5ndWFnZS1dIDo6c2VsZWN0aW9ue3RleHQtc2hhZG93Om5vbmU7YmFja2dyb3VuZDojYjNkNGZjfUBtZWRpYSBwcmludHtjb2RlW2NsYXNzKj1sYW5ndWFnZS1dLHByZVtjbGFzcyo9bGFuZ3VhZ2UtXXt0ZXh0LXNoYWRvdzpub25lfX1wcmVbY2xhc3MqPWxhbmd1YWdlLV17cGFkZGluZzoxZW07bWFyZ2luOi41ZW0gMDtvdmVyZmxvdzphdXRvfTpub3QocHJlKT5jb2RlW2NsYXNzKj1sYW5ndWFnZS1dLHByZVtjbGFzcyo9bGFuZ3VhZ2UtXXtiYWNrZ3JvdW5kOiNmNWYyZjB9Om5vdChwcmUpPmNvZGVbY2xhc3MqPWxhbmd1YWdlLV17cGFkZGluZzouMWVtO2JvcmRlci1yYWRpdXM6LjNlbTt3aGl0ZS1zcGFjZTpub3JtYWx9LnRva2VuLmNkYXRhLC50b2tlbi5jb21tZW50LC50b2tlbi5kb2N0eXBlLC50b2tlbi5wcm9sb2d7Y29sb3I6IzcwODA5MH0udG9rZW4ucHVuY3R1YXRpb257Y29sb3I6Izk5OX0ubmFtZXNwYWNle29wYWNpdHk6Ljd9LnRva2VuLmJvb2xlYW4sLnRva2VuLmNvbnN0YW50LC50b2tlbi5kZWxldGVkLC50b2tlbi5udW1iZXIsLnRva2VuLnByb3BlcnR5LC50b2tlbi5zeW1ib2wsLnRva2VuLnRhZ3tjb2xvcjojOTA1fS50b2tlbi5hdHRyLW5hbWUsLnRva2VuLmJ1aWx0aW4sLnRva2VuLmNoYXIsLnRva2VuLmluc2VydGVkLC50b2tlbi5zZWxlY3RvciwudG9rZW4uc3RyaW5ne2NvbG9yOiM2OTB9Lmxhbmd1YWdlLWNzcyAudG9rZW4uc3RyaW5nLC5zdHlsZSAudG9rZW4uc3RyaW5nLC50b2tlbi5lbnRpdHksLnRva2VuLm9wZXJhdG9yLC50b2tlbi51cmx7Y29sb3I6I2E2N2Y1OTtiYWNrZ3JvdW5kOmhzbGEoMCwwJSwxMDAlLC41KX0udG9rZW4uYXRydWxlLC50b2tlbi5hdHRyLXZhbHVlLC50b2tlbi5rZXl3b3Jke2NvbG9yOiMwN2F9LnRva2VuLmZ1bmN0aW9ue2NvbG9yOiNkZDRhNjh9LnRva2VuLmltcG9ydGFudCwudG9rZW4ucmVnZXgsLnRva2VuLnZhcmlhYmxle2NvbG9yOiNlOTB9LnRva2VuLmJvbGQsLnRva2VuLmltcG9ydGFudHtmb250LXdlaWdodDo3MDB9LnRva2VuLml0YWxpY3tmb250LXN0eWxlOml0YWxpY30udG9rZW4uZW50aXR5e2N1cnNvcjpoZWxwfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDY4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmh5X2MtaWNvbntmb250LWZhbWlseTpUZWx1cyBJY29uLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO3RleHQtZGVjb3JhdGlvbjpub25lO3RleHQtcmVuZGVyaW5nOm9wdGltaXplTGVnaWJpbGl0eTtjb2xvcjppbmhlcml0O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtmb250LXNpemU6aW5oZXJpdDtsaW5lLWhlaWdodDppbmhlcml0fS5oeV9jLWljb25fX3NxdWFyZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6Mi41cmVtO2xpbmUtaGVpZ2h0OjNyZW07d2lkdGg6M3JlbTtoZWlnaHQ6M3JlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS0yeHtmb250LXNpemU6MmVtfS5oeV9jLWljb24tLTN4e2ZvbnQtc2l6ZTozZW19Lmh5X2MtaWNvbi0tNHh7Zm9udC1zaXplOjRlbX0uaHlfYy1pY29uX19zdHlsZWd1aWRle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToycmVtO2xpbmUtaGVpZ2h0OjRyZW07d2lkdGg6NHJlbTtoZWlnaHQ6NHJlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS1jaXJjbGUtdGhpY2stb3V0bGluZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDFcXFwifS5oeV9jLWljb24tLWNpcmNsZS1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDJcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDVcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtbG9nbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDlcXFwifS5oeV9jLWljb24tLWJhci1jaGFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTBcXFwifS5oeV9jLWljb24tLXBpY3R1cmUtZnJhbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDExXFxcIn0uaHlfYy1pY29uLS1wYXBlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTJcXFwifS5oeV9jLWljb24tLXBhcGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxM1xcXCJ9Lmh5X2MtaWNvbi0tZm9sZGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNFxcXCJ9Lmh5X2MtaWNvbi0tc2hhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE1XFxcIn0uaHlfYy1pY29uLS1tYWduaWZ5LWdsYXNzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNlxcXCJ9Lmh5X2MtaWNvbi0td2FybmluZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMThcXFwifS5oeV9jLWljb24tLXN0YXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE5XFxcIn0uaHlfYy1pY29uLS1zdGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMFxcXCJ9Lmh5X2MtaWNvbi0taGVhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIxXFxcIn0uaHlfYy1pY29uLS1saWZlc2F2ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIyXFxcIn0uaHlfYy1pY29uLS1oYW1idXJnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI0XFxcIn0uaHlfYy1pY29uLS1ncmlkLXNxdWFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjVcXFwifS5oeV9jLWljb24tLWdyaWQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjZcXFwifS5oeV9jLWljb24tLWxpZ2h0YnVsYjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjdcXFwifS5oeV9jLWljb24tLXNwZWVkb21ldGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOFxcXCJ9Lmh5X2MtaWNvbi0tYWRkLXJlbW92ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjlcXFwifS5oeV9jLWljb24tLWNhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMwXFxcIn0uaHlfYy1pY29uLS10d2l0dGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMVxcXCJ9Lmh5X2MtaWNvbi0tZmFjZWJvb2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMyXFxcIn0uaHlfYy1pY29uLS15b3V0dWJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzM1xcXCJ9Lmh5X2MtaWNvbi0tZ29vZ2xlLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM0XFxcIn0uaHlfYy1pY29uLS10cmVuZC1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNVxcXCJ9Lmh5X2MtaWNvbi0tcGxheS1idXR0b24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM2XFxcIn0uaHlfYy1pY29uLS12aWRlby1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzdcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM4XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzlcXFwifS5oeV9jLWljb24tLWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MFxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQxXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MlxcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NFxcXCJ9Lmh5X2MtaWNvbi0tbW91c2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ1XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDZcXFwifS5oeV9jLWljb24tLXBhcGVyLW5vdGVzLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0N1xcXCJ9Lmh5X2MtaWNvbi0tdHY6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ4XFxcIn0uaHlfYy1pY29uLS1maWxtOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OVxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUwXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUxXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MlxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTNcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTVcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NlxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1N1xcXCJ9Lmh5X2MtaWNvbi0tdXNlcnM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU5XFxcIn0uaHlfYy1pY29uLS11c2Vycy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MFxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjJcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtYm94ZWQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYzXFxcIn0uaHlfYy1pY29uLS1nZWFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NFxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NVxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjZcXFwifS5oeV9jLWljb24tLXBhZGxvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY4XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrLWludmVyZXRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjlcXFwifS5oeV9jLWljb24tLXN0YWNrZWQtcGFwZXJzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MVxcXCJ9Lmh5X2MtaWNvbi0tbXVzaWMtbm90ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzJcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDczXFxcIn0uaHlfYy1pY29uLS10YWJsZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc0XFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc1XFxcIn0uaHlfYy1pY29uLS1tb3VzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzZcXFwifS5oeV9jLWljb24tLXByaWNldGFnLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3N1xcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc4XFxcIn0uaHlfYy1pY29uLS10di1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzlcXFwifS5oeV9jLWljb24tLWZpbG0tY2xhcHBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODBcXFwifS5oeV9jLWljb24tLWVudmVsb3BlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MVxcXCJ9Lmh5X2MtaWNvbi0tcGhvbmUtaGFuZHNldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODJcXFwifS5oeV9jLWljb24tLXVzYi1zdGljay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODNcXFwifS5oeV9jLWljb24tLWhvbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg0XFxcIn0uaHlfYy1pY29uLS1ob21lLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg1XFxcIn0uaHlfYy1pY29uLS1ob21lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NlxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTFcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkyXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5M1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk0XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5N1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOThcXFwifS5oeV9jLWljb24tLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk5XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDJcXFwifS5oeV9jLWljb24tLXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA0XFxcIn0uaHlfYy1pY29uLS14LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA1XFxcIn0uaHlfYy1pY29uLS14LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNlxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOFxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA5XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEwXFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTFcXFwifS5oeV9jLWljb24tLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEyXFxcIn0uaHlfYy1pY29uLS1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEzXFxcIn0uaHlfYy1pY29uLS1wbHVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNFxcXCJ9Lmh5X2MtaWNvbi0tbWludXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE1XFxcIn0uaHlfYy1pY29uLS1taW51cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNlxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE3XFxcIn0uaHlfYy1pY29uLS1jaGF0LWJ1YmJsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTlcXFwifS5oeV9jLWljb24tLWNoYXQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjBcXFwifS5oeV9jLWljb24tLWNoYXQtY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIxXFxcIn0uaHlfYy1pY29uLS1jaGF0LXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIyXFxcIn0uaHlfYy1pY29uLS1jaGF0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyM1xcXCJ9Lmh5X2MtaWNvbi0tc2ltLWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI1XFxcIn0uaHlfYy1pY29uLS1jYWxjdWxhdG9yOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNlxcXCJ9Lmh5X2MtaWNvbi0tYmx1ZXRvb3RoLWhlYWRzZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI3XFxcIn0uaHlfYy1pY29uLS1vdXRnb2luZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyOVxcXCJ9Lmh5X2MtaWNvbi0taW5jb21pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzBcXFwifS5oeV9jLWljb24tLWNhdXRpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMxXFxcIn0uaHlfYy1pY29uLS13aWZpLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMlxcXCJ9Lmh5X2MtaWNvbi0td2lmaTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzNcXFwifS5oeV9jLWljb24tLXRoaW4tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNVxcXCJ9Lmh5X2MtaWNvbi0taW5mby1pbnZlcnRlZDpiZWZvcmUsLmh5X2MtaWNvbi0taW5mbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzZcXFwifS5oeV9jLWljb24tLXRyZW5kLXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzOFxcXCJ9Lmh5X2MtaWNvbi0tZ2xvYmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQwXFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQyXFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ0XFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NVxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ2XFxcIn0uaHlfYy1pY29uLS1vdmVydmlldy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDdcXFwifS5oeV9jLWljb24tLXRlbHVzLWNpcmNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDhcXFwifS5oeV9jLWljb24tLXB1bHNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OVxcXCJ9Lmh5X2MtaWNvbi0tbWlrZS1tb2JpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUwXFxcIn0uaHlfYy1pY29uLS1yZXdhcmRzLWJhZGdlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MVxcXCJ9Lmh5X2MtaWNvbi0tZmlsdGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MlxcXCJ9Lmh5X2MtaWNvbi0tc2NoZWR1bGUtdGFsazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTNcXFwifS5oeV9jLWljb24tLXdhcm5pbmc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU0XFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU1XFxcIn0uaHlfYy1pY29uLS1jYXJ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NlxcXCJ9Lmh5X2MtaWNvbi0tbGl2ZS1jaGF0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1N1xcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNThcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3Q6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU5XFxcIn0uaHlfYy1pY29uLS1jbG91ZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjBcXFwifS5oeV9jLWljb24tLWRhdGE6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYxXFxcIn0uaHlfYy1pY29uLS1kZWxpdmVyeS10cnVjazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjJcXFwifS5oeV9jLWljb24tLXByb3RlY3Rpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYzXFxcIn0uaHlfYy1pY29uLS1jb2xvdXItcGlja2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NFxcXCJ9Lmh5X2MtaWNvbi0tbXVsdGktYWNjb3VudC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjVcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NlxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY3XFxcIn0uaHlfYy1pY29uLS1kb2xsYXItc2lnbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjhcXFwifS5oeV9jLWljb24tLWxpbmstYWNjb3VudDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjlcXFwifS5oeV9jLWljb24tLWRhdGEtbWFuYWdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzBcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MVxcXCJ9Lmh5X2MtaWNvbi0tdG9vbHMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcyXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzNcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NFxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NVxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NlxcXCJ9Lmh5X2MtaWNvbi0tbGlua2VkLWluLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3N1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc4XFxcIn0uaHlfYy1pY29uLS1taWNyb3Bob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgwXFxcIn0uaHlfYy1pY29uLS1uZXR3b3JraW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MVxcXCJ9Lmh5X2MtaWNvbi0tY3ljbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgyXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgzXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg0XFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWFkZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODVcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NlxcXCJ9LmZhZGUtdHJhbnNpdGlvbnstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlO3RyYW5zaXRpb246YWxsIC4zcyBlYXNlfS5mYWRlLWVudGVyLC5mYWRlLWxlYXZle29wYWNpdHk6MH0uYy1hbGVydHtwb3NpdGlvbjpyZWxhdGl2ZTtwYWRkaW5nOjdweCAxNXB4O21hcmdpbi1ib3R0b206MXJlbTtib3JkZXI6MXB4IHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci1yYWRpdXM6LjI1cmVtfS5jLWFsZXJ0LS1pbmZve2JhY2tncm91bmQtY29sb3I6IzMzMztib3JkZXItY29sb3I6IzAwMDtjb2xvcjojZmZmfS5jLWFsZXJ0LS1pbmZvIGJ1dHRvbntjb2xvcjojZmZmfS5jLWFsZXJ0LS1zdWNjZXNze2JhY2tncm91bmQtY29sb3I6I2U2ZmZjYztib3JkZXItY29sb3I6IzlmMztjb2xvcjojNDA4MDAwfS5jLWFsZXJ0LS1lcnJvcntiYWNrZ3JvdW5kLWNvbG9yOiNmOGRkZTM7Ym9yZGVyLWNvbG9yOiNmMmMwY2E7Y29sb3I6I2M4MTIzNX0uYy1hbGVydF9fY2xvc2UtYnV0dG9ue3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjEwcHg7LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmU7cGFkZGluZzowO2N1cnNvcjpwb2ludGVyO2JhY2tncm91bmQ6MCAwO2JvcmRlcjowO2ZvbnQtc2l6ZToyLjVyZW07b3BhY2l0eTouMn0uYy1hbGVydF9fY2xvc2UtYnV0dG9uOmhvdmVye29wYWNpdHk6LjN9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogNjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuaHlfYy1pY29ue2ZvbnQtZmFtaWx5OlRlbHVzIEljb24sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7dGV4dC1kZWNvcmF0aW9uOm5vbmU7dGV4dC1yZW5kZXJpbmc6b3B0aW1pemVMZWdpYmlsaXR5O2NvbG9yOmluaGVyaXQ7dmVydGljYWwtYWxpZ246bWlkZGxlO2ZvbnQtc2l6ZTppbmhlcml0O2xpbmUtaGVpZ2h0OmluaGVyaXR9Lmh5X2MtaWNvbl9fc3F1YXJle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToyLjVyZW07bGluZS1oZWlnaHQ6M3JlbTt3aWR0aDozcmVtO2hlaWdodDozcmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLTJ4e2ZvbnQtc2l6ZToyZW19Lmh5X2MtaWNvbi0tM3h7Zm9udC1zaXplOjNlbX0uaHlfYy1pY29uLS00eHtmb250LXNpemU6NGVtfS5oeV9jLWljb25fX3N0eWxlZ3VpZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjJyZW07bGluZS1oZWlnaHQ6NHJlbTt3aWR0aDo0cmVtO2hlaWdodDo0cmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLWNpcmNsZS10aGljay1vdXRsaW5lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMVxcXCJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMlxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNVxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA2XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1sb2dvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwOVxcXCJ9Lmh5X2MtaWNvbi0tYmFyLWNoYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMFxcXCJ9Lmh5X2MtaWNvbi0tcGljdHVyZS1mcmFtZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTFcXFwifS5oeV9jLWljb24tLXBhcGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEzXFxcIn0uaHlfYy1pY29uLS1mb2xkZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE0XFxcIn0uaHlfYy1pY29uLS1zaGFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTVcXFwifS5oeV9jLWljb24tLW1hZ25pZnktZ2xhc3M6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE2XFxcIn0uaHlfYy1pY29uLS13YXJuaW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOFxcXCJ9Lmh5X2MtaWNvbi0tc3Rhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTlcXFwifS5oeV9jLWljb24tLXN0YXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIwXFxcIn0uaHlfYy1pY29uLS1oZWFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjFcXFwifS5oeV9jLWljb24tLWxpZmVzYXZlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjJcXFwifS5oeV9jLWljb24tLWhhbWJ1cmdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjRcXFwifS5oeV9jLWljb24tLWdyaWQtc3F1YXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNVxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNlxcXCJ9Lmh5X2MtaWNvbi0tbGlnaHRidWxiOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyN1xcXCJ9Lmh5X2MtaWNvbi0tc3BlZWRvbWV0ZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI4XFxcIn0uaHlfYy1pY29uLS1hZGQtcmVtb3ZlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOVxcXCJ9Lmh5X2MtaWNvbi0tY2FydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzBcXFwifS5oeV9jLWljb24tLXR3aXR0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMxXFxcIn0uaHlfYy1pY29uLS1mYWNlYm9vazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzJcXFwifS5oeV9jLWljb24tLXlvdXR1YmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMzXFxcIn0uaHlfYy1pY29uLS1nb29nbGUtcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzRcXFwifS5oeV9jLWljb24tLXRyZW5kLWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM1XFxcIn0uaHlfYy1pY29uLS1wbGF5LWJ1dHRvbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzZcXFwifS5oeV9jLWljb24tLXZpZGVvLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzN1xcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzhcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOVxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQwXFxcIn0uaHlfYy1pY29uLS1jbG9jay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDFcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQyXFxcIn0uaHlfYy1pY29uLS10YWJsZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQzXFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ0XFxcIn0uaHlfYy1pY29uLS1tb3VzZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDVcXFwifS5oeV9jLWljb24tLXByaWNldGFnOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItbm90ZXMtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ3XFxcIn0uaHlfYy1pY29uLS10djpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDhcXFwifS5oeV9jLWljb24tLWZpbG06YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ5XFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTBcXFwifS5oeV9jLWljb24tLXVzYi1zdGljazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTFcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUyXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1M1xcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NVxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU2XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU3XFxcIn0uaHlfYy1pY29uLS11c2VyczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTlcXFwifS5oeV9jLWljb24tLXVzZXJzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYwXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1ib3hlZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjNcXFwifS5oeV9jLWljb24tLWdlYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY0XFxcIn0uaHlfYy1pY29uLS1nZWFyLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY1XFxcIn0uaHlfYy1pY29uLS1nZWFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NlxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjhcXFwifS5oeV9jLWljb24tLXBhZGxvY2staW52ZXJldGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OVxcXCJ9Lmh5X2MtaWNvbi0tc3RhY2tlZC1wYXBlcnMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcxXFxcIn0uaHlfYy1pY29uLS1tdXNpYy1ub3RlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MlxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzNcXFwifS5oeV9jLWljb24tLXRhYmxldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzRcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzVcXFwifS5oeV9jLWljb24tLW1vdXNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NlxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc3XFxcIn0uaHlfYy1pY29uLS1wYXBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzhcXFwifS5oeV9jLWljb24tLXR2LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OVxcXCJ9Lmh5X2MtaWNvbi0tZmlsbS1jbGFwcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MFxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgxXFxcIn0uaHlfYy1pY29uLS1waG9uZS1oYW5kc2V0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MlxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODRcXFwifS5oeV9jLWljb24tLWhvbWUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODVcXFwifS5oeV9jLWljb24tLWhvbWUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg2XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODhcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTJcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkzXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTRcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk1XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk2XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk3XFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTlcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAwXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDFcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMlxcXCJ9Lmh5X2MtaWNvbi0teDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDRcXFwifS5oeV9jLWljb24tLXgtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDVcXFwifS5oeV9jLWljb24tLXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA2XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcms6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA4XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDlcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTBcXFwifS5oeV9jLWljb24tLWluZmluaXR5OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMVxcXCJ9Lmh5X2MtaWNvbi0tcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTJcXFwifS5oeV9jLWljb24tLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTNcXFwifS5oeV9jLWljb24tLXBsdXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE0XFxcIn0uaHlfYy1pY29uLS1taW51czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTVcXFwifS5oeV9jLWljb24tLW1pbnVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE2XFxcIn0uaHlfYy1pY29uLS1taW51cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTdcXFwifS5oeV9jLWljb24tLWNoYXQtYnViYmxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExOVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMFxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjFcXFwifS5oeV9jLWljb24tLWNoYXQteDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjJcXFwifS5oeV9jLWljb24tLWNoYXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIzXFxcIn0uaHlfYy1pY29uLS1zaW0tY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjVcXFwifS5oeV9jLWljb24tLWNhbGN1bGF0b3I6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI2XFxcIn0uaHlfYy1pY29uLS1ibHVldG9vdGgtaGVhZHNldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjdcXFwifS5oeV9jLWljb24tLW91dGdvaW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI5XFxcIn0uaHlfYy1pY29uLS1pbmNvbWluZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMFxcXCJ9Lmh5X2MtaWNvbi0tY2F1dGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzFcXFwifS5oeV9jLWljb24tLXdpZmktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMyXFxcIn0uaHlfYy1pY29uLS13aWZpOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzM1xcXCJ9Lmh5X2MtaWNvbi0tdGhpbi1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM1XFxcIn0uaHlfYy1pY29uLS1pbmZvLWludmVydGVkOmJlZm9yZSwuaHlfYy1pY29uLS1pbmZvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNlxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM4XFxcIn0uaHlfYy1pY29uLS1nbG9iZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDBcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDJcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDRcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ1XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDZcXFwifS5oeV9jLWljb24tLW92ZXJ2aWV3LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0N1xcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtY2lyY2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OFxcXCJ9Lmh5X2MtaWNvbi0tcHVsc2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ5XFxcIn0uaHlfYy1pY29uLS1taWtlLW1vYmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTBcXFwifS5oeV9jLWljb24tLXJld2FyZHMtYmFkZ2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUxXFxcIn0uaHlfYy1pY29uLS1maWx0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUyXFxcIn0uaHlfYy1pY29uLS1zY2hlZHVsZS10YWxrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1M1xcXCJ9Lmh5X2MtaWNvbi0td2FybmluZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTRcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTVcXFwifS5oeV9jLWljb24tLWNhcnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU2XFxcIn0uaHlfYy1pY29uLS1saXZlLWNoYXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU3XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OFxcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTlcXFwifS5oeV9jLWljb24tLWNsb3VkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MFxcXCJ9Lmh5X2MtaWNvbi0tZGF0YTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjFcXFwifS5oeV9jLWljb24tLWRlbGl2ZXJ5LXRydWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MlxcXCJ9Lmh5X2MtaWNvbi0tcHJvdGVjdGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjNcXFwifS5oeV9jLWljb24tLWNvbG91ci1waWNrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY0XFxcIn0uaHlfYy1pY29uLS1tdWx0aS1hY2NvdW50LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NVxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY2XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjdcXFwifS5oeV9jLWljb24tLWRvbGxhci1zaWduOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OFxcXCJ9Lmh5X2MtaWNvbi0tbGluay1hY2NvdW50OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OVxcXCJ9Lmh5X2MtaWNvbi0tZGF0YS1tYW5hZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MFxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcxXFxcIn0uaHlfYy1pY29uLS10b29scy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzJcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3M1xcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc0XFxcIn0uaHlfYy1pY29uLS1pcC1mYXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc1XFxcIn0uaHlfYy1pY29uLS1pcC1mYXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc2XFxcIn0uaHlfYy1pY29uLS1saW5rZWQtaW4taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc3XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzhcXFwifS5oeV9jLWljb24tLW1pY3JvcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc5XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODBcXFwifS5oeV9jLWljb24tLW5ldHdvcmtpbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgxXFxcIn0uaHlfYy1pY29uLS1jeWNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODJcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODNcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODRcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtYWRkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NVxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg2XFxcIn0uYy1jb2xsYXBzYWJsZS1wYW5lbHtib3JkZXI6MXB4IHNvbGlkICNlMmUyZTI7Ym94LXNoYWRvdzowIDFweCAzcHggMXB4ICNlMmUyZTJ9LmMtY29sbGFwc2FibGUtcGFuZWxfX2hlYWRlcntjdXJzb3I6cG9pbnRlcjtwYWRkaW5nOjEwcHggMTVweDtwb3NpdGlvbjpyZWxhdGl2ZX0uYy1jb2xsYXBzYWJsZS1wYW5lbF9faGVhZGVyOmFmdGVye3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjFlbTt0b3A6Ljc1ZW07Zm9udC1zaXplOi43NWVtO2ZvbnQtZmFtaWx5OlRlbHVzIEljb247Y29udGVudDonXFxcXEUxMTQnO2NvbG9yOiM1N2E3MDh9LmMtY29sbGFwc2FibGUtcGFuZWxfX2hlYWRlci0tb3BlbjphZnRlcntjb250ZW50OidcXFxcRTExNyd9LmMtY29sbGFwc2FibGUtcGFuZWxfX2JvZHl7Ym9yZGVyLXRvcDoxcHggc29saWQgI2UyZTJlMjttYXgtaGVpZ2h0OjA7cGFkZGluZzowIDE1cHg7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZS1pbi1vdXQ7dHJhbnNpdGlvbjphbGwgLjNzIGVhc2UtaW4tb3V0O292ZXJmbG93OmhpZGRlbjtvcGFjaXR5OjB9LmMtY29sbGFwc2FibGUtcGFuZWxfX2JvZHktLW9wZW57b3BhY2l0eToxO3BhZGRpbmc6MTVweDttYXgtaGVpZ2h0Ojk5OTlweH1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0sXG4vKiA3MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5jLWxlZ2FsLWNvbnRhaW5lcl9fb3JkZXJlZC1saXN0e21hcmdpbi10b3A6MTBweDttYXJnaW4tYm90dG9tOjIwcHg7bGlzdC1zdHlsZTpkZWNpbWFsO2xpc3Qtc3R5bGUtdHlwZTpkZWNpbWFsO3BhZGRpbmctbGVmdDoyMHB4fS5jLWxlZ2FsLWNvbnRhaW5lcl9fdW5vcmRlcmVkLWxpc3R7bWFyZ2luLXRvcDoxMHB4O21hcmdpbi1ib3R0b206MjBweDtwYWRkaW5nLWxlZnQ6MjBweDtsaXN0LXN0eWxlOm5vbmU7bGlzdC1zdHlsZS10eXBlOm5vbmV9LmMtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW17bGluZS1oZWlnaHQ6MTlweDttYXJnaW4tYm90dG9tOjEwcHg7cGFkZGluZzoxMHB4fS5jLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVtLS1hY3RpdmV7YmFja2dyb3VuZC1jb2xvcjojZjlmMWZmfS5jLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVtIGF7Y29sb3I6IzQ5MTY2ZDt0ZXh0LWRlY29yYXRpb246bm9uZTtib3JkZXItYm90dG9tOjFweCBkb3R0ZWQ7cGFkZGluZy1ib3R0b206MXB4fS5jLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVtIGE6aG92ZXJ7Y29sb3I6IzhjNjhhNn1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0sXG4vKiA3MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5jLWxlZ2FsLXN1cHtmb250LXNpemU6Ljc1ZW07bGluZS1oZWlnaHQ6MDt2ZXJ0aWNhbC1hbGlnbjpzdXBlcjt0ZXh0LWRlY29yYXRpb246bm9uZTt0b3A6MCFpbXBvcnRhbnQ7Y3Vyc29yOnBvaW50ZXJ9LmMtbGVnYWwtc3VwIGF7Y29sb3I6IzQ5MTY2ZH1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0sXG4vKiA3MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5uby1zY3JvbGx7b3ZlcmZsb3cteDpoaWRkZW47b3ZlcmZsb3c6aGlkZGVuO292ZXJmbG93LXk6aGlkZGVuO3Bvc2l0aW9uOnJlbGF0aXZlO2hlaWdodDoxMDAlfS5jLW92ZXJsYXktY29udGFpbmVyX19jdXJ0YWlue29wYWNpdHk6MDstd2Via2l0LXRyYW5zaXRpb246b3BhY2l0eSAxLjNzIGVhc2UtaW4tb3V0O3RyYW5zaXRpb246b3BhY2l0eSAxLjNzIGVhc2UtaW4tb3V0fS5jLW92ZXJsYXktY29udGFpbmVyX19jdXJ0YWluLS1hY3RpdmV7b3BhY2l0eToxO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuNTUpO3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDtyaWdodDowO2JvdHRvbTowfS5jLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5c3twb3NpdGlvbjpmaXhlZDtyaWdodDowO3RvcDowO2JvdHRvbTowO2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuNSk7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgxMDAlKTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgxMDAlKTstd2Via2l0LXRyYW5zaXRpb246MXMgZWFzZS1pbi1vdXQ7dHJhbnNpdGlvbjoxcyBlYXNlLWluLW91dH1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjU5OXB4KXsuYy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXN7d2lkdGg6MTAwJX19QG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDo2MDBweCl7LmMtb3ZlcmxheS1jb250YWluZXJfX292ZXJsYXlze3dpZHRoOjY2JX19LmMtb3ZlcmxheS1jb250YWluZXJfX292ZXJsYXlzLS1hY3RpdmV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgwKTt6LWluZGV4Ojk5OTk5fVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDczICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtb3ZlcmxheXtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO2JhY2tncm91bmQtY29sb3I6I2ZmZn0uYy1vdmVybGF5X19oZWFkZXJ7cGFkZGluZzoyMHB4O3Bvc2l0aW9uOmZpeGVkO3RvcDowO2hlaWdodDo3NXB4O3dpZHRoOjEwMCU7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2UyZTJlMjtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY2Zjd9LmMtb3ZlcmxheV9fY2xvc2UtYnV0dG9ue2N1cnNvcjpwb2ludGVyO2JhY2tncm91bmQ6MDtib3JkZXI6MDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MjBweDtyaWdodDoyMHB4O2ZvbnQtZmFtaWx5OlRlbHVzIEljb247Zm9udC1zaXplOjJlbTtjb2xvcjojNDkxNjZkfS5jLW92ZXJsYXlfX2Nsb3NlLWJ1dHRvbjpiZWZvcmV7Y29udGVudDonXFxcXEUxMDYnfS5jLW92ZXJsYXlfX2JvZHl7cG9zaXRpb246Zml4ZWQ7LXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2g7b3ZlcmZsb3cteTpzY3JvbGw7dG9wOjc1cHg7Ym90dG9tOjA7d2lkdGg6MTAwJTtwYWRkaW5nOjIwcHggMjBweCA1MHB4fVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDc0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtc3RlcC10cmFja2VyX19pY29uLC5oeV9jLWljb257Zm9udC1mYW1pbHk6VGVsdXMgSWNvbixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjt0ZXh0LWRlY29yYXRpb246bm9uZTt0ZXh0LXJlbmRlcmluZzpvcHRpbWl6ZUxlZ2liaWxpdHk7Y29sb3I6aW5oZXJpdDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Zm9udC1zaXplOmluaGVyaXQ7bGluZS1oZWlnaHQ6aW5oZXJpdH0uaHlfYy1pY29uX19zcXVhcmV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjIuNXJlbTtsaW5lLWhlaWdodDozcmVtO3dpZHRoOjNyZW07aGVpZ2h0OjNyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tMnh7Zm9udC1zaXplOjJlbX0uaHlfYy1pY29uLS0zeHtmb250LXNpemU6M2VtfS5oeV9jLWljb24tLTR4e2ZvbnQtc2l6ZTo0ZW19Lmh5X2MtaWNvbl9fc3R5bGVndWlkZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6MnJlbTtsaW5lLWhlaWdodDo0cmVtO3dpZHRoOjRyZW07aGVpZ2h0OjRyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXRoaWNrLW91dGxpbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uaHlfYy1pY29uLS1jaXJjbGUtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA1XFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDZcXFwifS5oeV9jLWljb24tLXRlbHVzLWxvZ286YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA5XFxcIn0uaHlfYy1pY29uLS1iYXItY2hhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEwXFxcIn0uaHlfYy1pY29uLS1waWN0dXJlLWZyYW1lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMVxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEyXFxcIn0uaHlfYy1pY29uLS1wYXBlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTNcXFwifS5oeV9jLWljb24tLWZvbGRlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTRcXFwifS5oeV9jLWljb24tLXNoYXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNVxcXCJ9Lmh5X2MtaWNvbi0tbWFnbmlmeS1nbGFzczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTZcXFwifS5oeV9jLWljb24tLXdhcm5pbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE4XFxcIn0uaHlfYy1pY29uLS1zdGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOVxcXCJ9Lmh5X2MtaWNvbi0tc3RhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjBcXFwifS5oeV9jLWljb24tLWhlYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMVxcXCJ9Lmh5X2MtaWNvbi0tbGlmZXNhdmVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMlxcXCJ9Lmh5X2MtaWNvbi0taGFtYnVyZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNFxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI1XFxcIn0uaHlfYy1pY29uLS1ncmlkLWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI2XFxcIn0uaHlfYy1pY29uLS1saWdodGJ1bGI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI3XFxcIn0uaHlfYy1pY29uLS1zcGVlZG9tZXRlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjhcXFwifS5oeV9jLWljb24tLWFkZC1yZW1vdmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI5XFxcIn0uaHlfYy1pY29uLS1jYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMFxcXCJ9Lmh5X2MtaWNvbi0tdHdpdHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzFcXFwifS5oeV9jLWljb24tLWZhY2Vib29rOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMlxcXCJ9Lmh5X2MtaWNvbi0teW91dHViZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzNcXFwifS5oeV9jLWljb24tLWdvb2dsZS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNFxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzVcXFwifS5oeV9jLWljb24tLXBsYXktYnV0dG9uLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNlxcXCJ9Lmh5X2MtaWNvbi0tdmlkZW8taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM3XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM5XFxcIn0uaHlfYy1pY29uLS1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDBcXFwifS5oeV9jLWljb24tLWNsb2NrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MVxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDJcXFwifS5oeV9jLWljb24tLXRhYmxldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDNcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDRcXFwifS5oeV9jLWljb24tLW1vdXNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NVxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ2XFxcIn0uaHlfYy1pY29uLS1wYXBlci1ub3Rlcy1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDdcXFwifS5oeV9jLWljb24tLXR2OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OFxcXCJ9Lmh5X2MtaWNvbi0tZmlsbTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDlcXFwifS5oeV9jLWljb24tLWVudmVsb3BlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MFxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MVxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTJcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUzXFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU1XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTZcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTdcXFwifS5oeV9jLWljb24tLXVzZXJzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1OVxcXCJ9Lmh5X2MtaWNvbi0tdXNlcnMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjBcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYyXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWJveGVkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2M1xcXCJ9Lmh5X2MtaWNvbi0tZ2VhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjRcXFwifS5oeV9jLWljb24tLWdlYXItY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjVcXFwifS5oeV9jLWljb24tLWdlYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY2XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OFxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jay1pbnZlcmV0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY5XFxcIn0uaHlfYy1pY29uLS1zdGFja2VkLXBhcGVycy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzFcXFwifS5oeV9jLWljb24tLW11c2ljLW5vdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcyXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3M1xcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NVxcXCJ9Lmh5X2MtaWNvbi0tbW91c2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc2XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzdcXFwifS5oeV9jLWljb24tLXBhcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OFxcXCJ9Lmh5X2MtaWNvbi0tdHYtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc5XFxcIn0uaHlfYy1pY29uLS1maWxtLWNsYXBwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgwXFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODFcXFwifS5oeV9jLWljb24tLXBob25lLWhhbmRzZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgyXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgzXFxcIn0uaHlfYy1pY29uLS1ob21lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NVxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODZcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTNcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTVcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24tY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTZcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTdcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDBcXFwifS5oeV9jLWljb24tLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAyXFxcIn0uaHlfYy1pY29uLS14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNFxcXCJ9Lmh5X2MtaWNvbi0teC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNVxcXCJ9Lmh5X2MtaWNvbi0teC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDZcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDhcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOVxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTExXFxcIn0uaHlfYy1pY29uLS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMlxcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExM1xcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTRcXFwifS5oeV9jLWljb24tLW1pbnVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNVxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTZcXFwifS5oeV9jLWljb24tLW1pbnVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExN1xcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1idWJibGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE5XFxcIn0uaHlfYy1pY29uLS1jaGF0LWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIwXFxcIn0uaHlfYy1pY29uLS1jaGF0LWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMlxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjNcXFwifS5oeV9jLWljb24tLXNpbS1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNVxcXCJ9Lmh5X2MtaWNvbi0tY2FsY3VsYXRvcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjZcXFwifS5oeV9jLWljb24tLWJsdWV0b290aC1oZWFkc2V0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyN1xcXCJ9Lmh5X2MtaWNvbi0tb3V0Z29pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjlcXFwifS5oeV9jLWljb24tLWluY29taW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMwXFxcIn0uaHlfYy1pY29uLS1jYXV0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzJcXFwifS5oeV9jLWljb24tLXdpZmk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMzXFxcIn0uaHlfYy1pY29uLS10aGluLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzVcXFwifS5oeV9jLWljb24tLWluZm8taW52ZXJ0ZWQ6YmVmb3JlLC5oeV9jLWljb24tLWluZm86YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM2XFxcIn0uaHlfYy1pY29uLS10cmVuZC11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzhcXFwifS5oeV9jLWljb24tLWdsb2JlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MlxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NFxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDVcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NlxcXCJ9Lmh5X2MtaWNvbi0tb3ZlcnZpZXctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ3XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1jaXJjbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ4XFxcIn0uaHlfYy1pY29uLS1wdWxzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDlcXFwifS5oeV9jLWljb24tLW1pa2UtbW9iaWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MFxcXCJ9Lmh5X2MtaWNvbi0tcmV3YXJkcy1iYWRnZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTFcXFwifS5oeV9jLWljb24tLWZpbHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTJcXFwifS5oeV9jLWljb24tLXNjaGVkdWxlLXRhbGs6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUzXFxcIn0uaHlfYy1pY29uLS13YXJuaW5nOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NVxcXCJ9Lmh5X2MtaWNvbi0tY2FydC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTZcXFwifS5oeV9jLWljb24tLWxpdmUtY2hhdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTdcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3QtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU4XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OVxcXCJ9Lmh5X2MtaWNvbi0tY2xvdWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYwXFxcIn0uaHlfYy1pY29uLS1kYXRhOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MVxcXCJ9Lmh5X2MtaWNvbi0tZGVsaXZlcnktdHJ1Y2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYyXFxcIn0uaHlfYy1pY29uLS1wcm90ZWN0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2M1xcXCJ9Lmh5X2MtaWNvbi0tY29sb3VyLXBpY2tlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjRcXFwifS5oeV9jLWljb24tLW11bHRpLWFjY291bnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY1XFxcIn0uaHlfYy1pY29uLS1hY2Nlc3Nvcmllcy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjZcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2N1xcXCJ9Lmh5X2MtaWNvbi0tZG9sbGFyLXNpZ246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY4XFxcIn0uaHlfYy1pY29uLS1saW5rLWFjY291bnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY5XFxcIn0uaHlfYy1pY29uLS1kYXRhLW1hbmFnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcwXFxcIn0uaHlfYy1pY29uLS1hY2Nlc3NvcmllczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzFcXFwifS5oeV9jLWljb24tLXRvb2xzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MlxcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTczXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzRcXFwifS5oeV9jLWljb24tLWlwLWZheDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzVcXFwifS5oeV9jLWljb24tLWlwLWZheC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzZcXFwifS5oeV9jLWljb24tLWxpbmtlZC1pbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzdcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OFxcXCJ9Lmh5X2MtaWNvbi0tbWljcm9waG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzlcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MFxcXCJ9Lmh5X2MtaWNvbi0tbmV0d29ya2luZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODFcXFwifS5oeV9jLWljb24tLWN5Y2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MlxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4M1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NFxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1hZGQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg1XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODZcXFwifS5jLXN0ZXAtdHJhY2tlcntsaXN0LXN0eWxlOm5vbmU7cGFkZGluZzowO3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6LXdlYmtpdC1ib3g7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7LXdlYmtpdC1ib3gtcGFjazpqdXN0aWZ5Oy1tcy1mbGV4LXBhY2s6anVzdGlmeTtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjttYXJnaW46MXJlbSAtMS41cmVtfUBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6NjAwcHgpey5jLXN0ZXAtdHJhY2tlcntwYWRkaW5nLWJvdHRvbToyLjVyZW07bWFyZ2luOjFyZW0gMH19LmMtc3RlcC10cmFja2VyX19zdGVwe3dpZHRoOjEwMCU7cG9zaXRpb246cmVsYXRpdmU7dGV4dC1hbGlnbjpjZW50ZXJ9LmMtc3RlcC10cmFja2VyX19zdGVwOmFmdGVyLC5jLXN0ZXAtdHJhY2tlcl9fc3RlcDpiZWZvcmV7cG9zaXRpb246YWJzb2x1dGU7dG9wOjUwJTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpO3dpZHRoOmNhbGMoNTAlIC0gMS40cmVtKTtjb250ZW50OicgJztib3JkZXItYm90dG9tOi42cmVtIHNvbGlkICNhZWFlYWV9LmMtc3RlcC10cmFja2VyX19zdGVwOmJlZm9yZXtsZWZ0OjB9LmMtc3RlcC10cmFja2VyX19zdGVwOmFmdGVye3JpZ2h0OjB9LmMtc3RlcC10cmFja2VyIC5jLXN0ZXAtdHJhY2tlcl9fc3RlcDpmaXJzdC1jaGlsZDpiZWZvcmUsLmMtc3RlcC10cmFja2VyIC5jLXN0ZXAtdHJhY2tlcl9fc3RlcDpsYXN0LWNoaWxkOmFmdGVye2NvbnRlbnQ6bm9uZX0uYy1zdGVwLXRyYWNrZXJfX2xhYmVse3Bvc2l0aW9uOmFic29sdXRlO2JvdHRvbTotM3JlbTtsZWZ0OjA7Zm9udC1zaXplOjEuN3JlbTt3aWR0aDoxMDAlO2hlaWdodDoyLjVyZW07Zm9udC1mYW1pbHk6VGVsdXMgUmVndWxhcixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjojNjY2fUBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6NTk5cHgpey5jLXN0ZXAtdHJhY2tlcl9fbGFiZWx7ZGlzcGxheTpub25lfX0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWFjdGl2ZSAuYy1zdGVwLXRyYWNrZXJfX2xhYmVse2ZvbnQtZmFtaWx5OlRlbHVzIE1lZGl1bSxIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjojNDA4MDAwfS5jLXN0ZXAtdHJhY2tlcl9faWNvbntmb250LXNpemU6M3JlbTtjb2xvcjojYWVhZWFlfS5jLXN0ZXAtdHJhY2tlcl9faWNvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDFcXFwifS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tYWN0aXZlIC5jLXN0ZXAtdHJhY2tlcl9faWNvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDJcXFwifS5jLXN0ZXAtdHJhY2tlcl9fc2V0cC0tY2xpY2thYmxlIGF7Y3Vyc29yOnBvaW50ZXJ9LmMtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZTphZnRlcntib3JkZXItYm90dG9tOi42cmVtIHNvbGlkICM1N2E3MDh9LmMtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZSAuYy1zdGVwLXRyYWNrZXJfX2ljb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEwXFxcIn0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWFjdGl2ZSAuYy1zdGVwLXRyYWNrZXJfX2ljb246YmVmb3JlLC5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGUgLmMtc3RlcC10cmFja2VyX19pY29uOmJlZm9yZXtjb2xvcjojNTdhNzA4fS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGUrLmMtc3RlcC10cmFja2VyX19zdGVwLS1hY3RpdmU6YmVmb3JlLC5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGUrLmMtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZTpiZWZvcmV7Ym9yZGVyLWJvdHRvbTouNnJlbSBzb2xpZCAjNTdhNzA4fS5jLXN0ZXAtdHJhY2tlci1tb2JpbGUtbGFiZWx7Zm9udC1zaXplOjEuN3JlbTt0ZXh0LWFsaWduOmNlbnRlcjtmb250LWZhbWlseTpUZWx1cyBSZWd1bGFyLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2NvbG9yOiM2NjZ9QG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDo2MDBweCl7LmMtc3RlcC10cmFja2VyLW1vYmlsZS1sYWJlbHtkaXNwbGF5Om5vbmV9fS5jLXN0ZXAtdHJhY2tlci1tb2JpbGUtbGFiZWxfX3N0ZXB7Zm9udC1mYW1pbHk6VGVsdXMgTWVkaXVtLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2NvbG9yOiM0MDgwMDB9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogNzUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYy10YWJzX19oZWFkZXJ7bGlzdC1zdHlsZTpub25lO3BhZGRpbmc6MDttYXJnaW46MDtkaXNwbGF5Oi13ZWJraXQtYm94O2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4fS5jLXRhYnNfX2hlYWRlci1pdGVte21hcmdpbi10b3A6MnB4O2hlaWdodDo0NXB4O3BhZGRpbmc6MCAycHg7LXdlYmtpdC1ib3gtZmxleDoxOy1tcy1mbGV4OjE7ZmxleDoxfS5jLXRhYnNfX2hlYWRlci1pdGVtIGF7YmFja2dyb3VuZC1jb2xvcjojZTJlMmUyO3RleHQtZGVjb3JhdGlvbjpub25lO3BhZGRpbmc6MTNweCAyMHB4O2NvbG9yOiM0OTE2NmQ7ZGlzcGxheTpibG9ja30uYy10YWJzX19oZWFkZXItaXRlbS0tYWN0aXZle21hcmdpbi10b3A6MXB4O2hlaWdodDo0NnB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3JkZXItdG9wOjFweCBzb2xpZCAjZTJlMmUyO2JvcmRlci1sZWZ0OjFweCBzb2xpZCAjZTJlMmUyO2JvcmRlci1yaWdodDoxcHggc29saWQgI2UyZTJlMn0uYy10YWJzX19oZWFkZXItaXRlbS0tYWN0aXZlIGF7YmFja2dyb3VuZC1jb2xvcjojZmZmO2NvbG9yOiMzMzN9LmMtdGFic19faGVhZGVyLWl0ZW0tLWRpc2FibGVkIGF7YmFja2dyb3VuZC1jb2xvcjojZjVmNmY3O2NvbG9yOiNhZWFlYWU7Y3Vyc29yOm5vdC1hbGxvd2VkfS5jLXRhYnNfX2JvZHl7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JvcmRlcjoxcHggc29saWQgI2UyZTJlMjttYXJnaW4tdG9wOi0xcHg7cGFkZGluZzoyMHB4fS5jLXRhYnNfX3BhbmV7ZGlzcGxheTpibG9jaztib3JkZXItdG9wOm5vbmU7b3BhY2l0eTowO2hlaWdodDowO292ZXJmbG93OmhpZGRlbjtwYWRkaW5nOjAgNXB4Oy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjVzIGVhc2Utb3V0O3RyYW5zaXRpb246YWxsIC41cyBlYXNlLW91dH0uYy10YWJzX19wYW5lLS1hY3RpdmV7b3BhY2l0eToxO3BhZGRpbmc6NXB4O2hlaWdodDphdXRvfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDc2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgcmVxdWlyZTt2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MsIGdsb2JhbCwgbW9kdWxlKSB7LyohXG5cdCAqIEBvdmVydmlldyBlczYtcHJvbWlzZSAtIGEgdGlueSBpbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlcy9BKy5cblx0ICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZClcblx0ICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuXHQgKiAgICAgICAgICAgIFNlZSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vamFrZWFyY2hpYmFsZC9lczYtcHJvbWlzZS9tYXN0ZXIvTElDRU5TRVxuXHQgKiBAdmVyc2lvbiAgIDMuMi4xXG5cdCAqL1xuXHRcblx0KGZ1bmN0aW9uKCkge1xuXHQgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkdXRpbHMkJG9iamVjdE9yRnVuY3Rpb24oeCkge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbicgfHwgKHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiB4ICE9PSBudWxsKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24oeCkge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc01heWJlVGhlbmFibGUoeCkge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdvYmplY3QnICYmIHggIT09IG51bGw7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXk7XG5cdCAgICBpZiAoIUFycmF5LmlzQXJyYXkpIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG5cdCAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcblx0ICAgICAgfTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzQXJyYXkgPSBsaWIkZXM2JHByb21pc2UkdXRpbHMkJF9pc0FycmF5O1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gPSAwO1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR2ZXJ0eE5leHQ7XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuO1xuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbl0gPSBjYWxsYmFjaztcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2xpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gKyAxXSA9IGFyZztcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiArPSAyO1xuXHQgICAgICBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiA9PT0gMikge1xuXHQgICAgICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC5cblx0ICAgICAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleVxuXHQgICAgICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cblx0ICAgICAgICBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm4obGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2goKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuID0gc2NoZWR1bGVGbjtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0QXNhcChhc2FwRm4pIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAgPSBhc2FwRm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93ID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSA/IHdpbmRvdyA6IHVuZGVmaW5lZDtcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3Nlckdsb2JhbCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93IHx8IHt9O1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyR2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNOb2RlID0gdHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG5cdFxuXHQgICAgLy8gdGVzdCBmb3Igd2ViIHdvcmtlciBidXQgbm90IGluIElFMTBcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNXb3JrZXIgPSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09ICd1bmRlZmluZWQnICYmXG5cdCAgICAgIHR5cGVvZiBpbXBvcnRTY3JpcHRzICE9PSAndW5kZWZpbmVkJyAmJlxuXHQgICAgICB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnO1xuXHRcblx0ICAgIC8vIG5vZGVcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VOZXh0VGljaygpIHtcblx0ICAgICAgLy8gbm9kZSB2ZXJzaW9uIDAuMTAueCBkaXNwbGF5cyBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2hlbiBuZXh0VGljayBpcyB1c2VkIHJlY3Vyc2l2ZWx5XG5cdCAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY3Vqb2pzL3doZW4vaXNzdWVzLzQxMCBmb3IgZGV0YWlsc1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHZlcnR4XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlVmVydHhUaW1lcigpIHtcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR2ZXJ0eE5leHQobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTXV0YXRpb25PYnNlcnZlcigpIHtcblx0ICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuXHQgICAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgbGliJGVzNiRwcm9taXNlJGFzYXAkJEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCk7XG5cdCAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuXHQgICAgICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHsgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9KTtcblx0XG5cdCAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgICBub2RlLmRhdGEgPSAoaXRlcmF0aW9ucyA9ICsraXRlcmF0aW9ucyAlIDIpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHdlYiB3b3JrZXJcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNZXNzYWdlQ2hhbm5lbCgpIHtcblx0ICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcblx0ICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2g7XG5cdCAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlU2V0VGltZW91dCgpIHtcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHNldFRpbWVvdXQobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoLCAxKTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlID0gbmV3IEFycmF5KDEwMDApO1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKCkge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW47IGkrPTIpIHtcblx0ICAgICAgICB2YXIgY2FsbGJhY2sgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaV07XG5cdCAgICAgICAgdmFyIGFyZyA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpKzFdO1xuXHRcblx0ICAgICAgICBjYWxsYmFjayhhcmcpO1xuXHRcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaV0gPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2krMV0gPSB1bmRlZmluZWQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gPSAwO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhdHRlbXB0VmVydHgoKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdmFyIHIgPSByZXF1aXJlO1xuXHQgICAgICAgIHZhciB2ZXJ0eCA9IF9fd2VicGFja19yZXF1aXJlX18oMjAxKTtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcblx0ICAgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVZlcnR4VGltZXIoKTtcblx0ICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0KCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2g7XG5cdCAgICAvLyBEZWNpZGUgd2hhdCBhc3luYyBtZXRob2QgdG8gdXNlIHRvIHRyaWdnZXJpbmcgcHJvY2Vzc2luZyBvZiBxdWV1ZWQgY2FsbGJhY2tzOlxuXHQgICAgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc05vZGUpIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTmV4dFRpY2soKTtcblx0ICAgIH0gZWxzZSBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTtcblx0ICAgIH0gZWxzZSBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGlzV29ya2VyKSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU1lc3NhZ2VDaGFubmVsKCk7XG5cdCAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgXCJmdW5jdGlvblwiID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGF0dGVtcHRWZXJ0eCgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlU2V0VGltZW91dCgpO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHRoZW4kJHRoZW4ob25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcblx0ICAgICAgdmFyIHBhcmVudCA9IHRoaXM7XG5cdFxuXHQgICAgICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcblx0XG5cdCAgICAgIGlmIChjaGlsZFtsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEXSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbWFrZVByb21pc2UoY2hpbGQpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xuXHRcblx0ICAgICAgaWYgKHN0YXRlKSB7XG5cdCAgICAgICAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzW3N0YXRlIC0gMV07XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAoZnVuY3Rpb24oKXtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGludm9rZUNhbGxiYWNrKHN0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gY2hpbGQ7XG5cdCAgICB9XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJHRoZW4kJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkdGhlbiQkdGhlbjtcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJHJlc29sdmUob2JqZWN0KSB7XG5cdCAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG5cdCAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cdFxuXHQgICAgICBpZiAob2JqZWN0ICYmIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gQ29uc3RydWN0b3IpIHtcblx0ICAgICAgICByZXR1cm4gb2JqZWN0O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCBvYmplY3QpO1xuXHQgICAgICByZXR1cm4gcHJvbWlzZTtcblx0ICAgIH1cblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkcmVzb2x2ZTtcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDE2KTtcblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKCkge31cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORyAgID0gdm9pZCAwO1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCA9IDE7XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQgID0gMjtcblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1IgPSBuZXcgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRXJyb3JPYmplY3QoKTtcblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzZWxmRnVsZmlsbG1lbnQoKSB7XG5cdCAgICAgIHJldHVybiBuZXcgVHlwZUVycm9yKFwiWW91IGNhbm5vdCByZXNvbHZlIGEgcHJvbWlzZSB3aXRoIGl0c2VsZlwiKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRjYW5ub3RSZXR1cm5Pd24oKSB7XG5cdCAgICAgIHJldHVybiBuZXcgVHlwZUVycm9yKCdBIHByb21pc2VzIGNhbGxiYWNrIGNhbm5vdCByZXR1cm4gdGhhdCBzYW1lIHByb21pc2UuJyk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZ2V0VGhlbihwcm9taXNlKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbjtcblx0ICAgICAgfSBjYXRjaChlcnJvcikge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SLmVycm9yID0gZXJyb3I7XG5cdCAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5VGhlbih0aGVuLCB2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpO1xuXHQgICAgICB9IGNhdGNoKGUpIHtcblx0ICAgICAgICByZXR1cm4gZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSwgdGhlbikge1xuXHQgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAoZnVuY3Rpb24ocHJvbWlzZSkge1xuXHQgICAgICAgIHZhciBzZWFsZWQgPSBmYWxzZTtcblx0ICAgICAgICB2YXIgZXJyb3IgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlUaGVuKHRoZW4sIHRoZW5hYmxlLCBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgICAgaWYgKHNlYWxlZCkgeyByZXR1cm47IH1cblx0ICAgICAgICAgIHNlYWxlZCA9IHRydWU7XG5cdCAgICAgICAgICBpZiAodGhlbmFibGUgIT09IHZhbHVlKSB7XG5cdCAgICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG5cdCAgICAgICAgICBpZiAoc2VhbGVkKSB7IHJldHVybjsgfVxuXHQgICAgICAgICAgc2VhbGVkID0gdHJ1ZTtcblx0XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcblx0ICAgICAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpO1xuXHRcblx0ICAgICAgICBpZiAoIXNlYWxlZCAmJiBlcnJvcikge1xuXHQgICAgICAgICAgc2VhbGVkID0gdHJ1ZTtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBlcnJvcik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LCBwcm9taXNlKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSkge1xuXHQgICAgICBpZiAodGhlbmFibGUuX3N0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuXHQgICAgICB9IGVsc2UgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlKHRoZW5hYmxlLCB1bmRlZmluZWQsIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuKSB7XG5cdCAgICAgIGlmIChtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yID09PSBwcm9taXNlLmNvbnN0cnVjdG9yICYmXG5cdCAgICAgICAgICB0aGVuID09PSBsaWIkZXM2JHByb21pc2UkdGhlbiQkZGVmYXVsdCAmJlxuXHQgICAgICAgICAgY29uc3RydWN0b3IucmVzb2x2ZSA9PT0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGlmICh0aGVuID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUikge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SLmVycm9yKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKHRoZW4gPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbih0aGVuKSkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4pO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcblx0ICAgICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHNlbGZGdWxmaWxsbWVudCgpKTtcblx0ICAgICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCB2YWx1ZSwgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZ2V0VGhlbih2YWx1ZSkpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaFJlamVjdGlvbihwcm9taXNlKSB7XG5cdCAgICAgIGlmIChwcm9taXNlLl9vbmVycm9yKSB7XG5cdCAgICAgICAgcHJvbWlzZS5fb25lcnJvcihwcm9taXNlLl9yZXN1bHQpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoKHByb21pc2UpO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpIHtcblx0ICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7IHJldHVybjsgfVxuXHRcblx0ICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gdmFsdWU7XG5cdCAgICAgIHByb21pc2UuX3N0YXRlID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEO1xuXHRcblx0ICAgICAgaWYgKHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCAhPT0gMCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gsIHByb21pc2UpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbikge1xuXHQgICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHsgcmV0dXJuOyB9XG5cdCAgICAgIHByb21pc2UuX3N0YXRlID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQ7XG5cdCAgICAgIHByb21pc2UuX3Jlc3VsdCA9IHJlYXNvbjtcblx0XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2hSZWplY3Rpb24sIHByb21pc2UpO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuXHQgICAgICB2YXIgc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzO1xuXHQgICAgICB2YXIgbGVuZ3RoID0gc3Vic2NyaWJlcnMubGVuZ3RoO1xuXHRcblx0ICAgICAgcGFyZW50Ll9vbmVycm9yID0gbnVsbDtcblx0XG5cdCAgICAgIHN1YnNjcmliZXJzW2xlbmd0aF0gPSBjaGlsZDtcblx0ICAgICAgc3Vic2NyaWJlcnNbbGVuZ3RoICsgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEXSA9IG9uRnVsZmlsbG1lbnQ7XG5cdCAgICAgIHN1YnNjcmliZXJzW2xlbmd0aCArIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEXSAgPSBvblJlamVjdGlvbjtcblx0XG5cdCAgICAgIGlmIChsZW5ndGggPT09IDAgJiYgcGFyZW50Ll9zdGF0ZSkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gsIHBhcmVudCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoKHByb21pc2UpIHtcblx0ICAgICAgdmFyIHN1YnNjcmliZXJzID0gcHJvbWlzZS5fc3Vic2NyaWJlcnM7XG5cdCAgICAgIHZhciBzZXR0bGVkID0gcHJvbWlzZS5fc3RhdGU7XG5cdFxuXHQgICAgICBpZiAoc3Vic2NyaWJlcnMubGVuZ3RoID09PSAwKSB7IHJldHVybjsgfVxuXHRcblx0ICAgICAgdmFyIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsID0gcHJvbWlzZS5fcmVzdWx0O1xuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkgKz0gMykge1xuXHQgICAgICAgIGNoaWxkID0gc3Vic2NyaWJlcnNbaV07XG5cdCAgICAgICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0dGxlZF07XG5cdFxuXHQgICAgICAgIGlmIChjaGlsZCkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBjYWxsYmFjayhkZXRhaWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgcHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoID0gMDtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRFcnJvck9iamVjdCgpIHtcblx0ICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFRSWV9DQVRDSF9FUlJPUiA9IG5ldyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRFcnJvck9iamVjdCgpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlsKTtcblx0ICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SLmVycm9yID0gZTtcblx0ICAgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgcHJvbWlzZSwgY2FsbGJhY2ssIGRldGFpbCkge1xuXHQgICAgICB2YXIgaGFzQ2FsbGJhY2sgPSBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24oY2FsbGJhY2spLFxuXHQgICAgICAgICAgdmFsdWUsIGVycm9yLCBzdWNjZWVkZWQsIGZhaWxlZDtcblx0XG5cdCAgICAgIGlmIChoYXNDYWxsYmFjaykge1xuXHQgICAgICAgIHZhbHVlID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCk7XG5cdFxuXHQgICAgICAgIGlmICh2YWx1ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SKSB7XG5cdCAgICAgICAgICBmYWlsZWQgPSB0cnVlO1xuXHQgICAgICAgICAgZXJyb3IgPSB2YWx1ZS5lcnJvcjtcblx0ICAgICAgICAgIHZhbHVlID0gbnVsbDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGNhbm5vdFJldHVybk93bigpKTtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHZhbHVlID0gZGV0YWlsO1xuXHQgICAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuXHQgICAgICAgIC8vIG5vb3Bcblx0ICAgICAgfSBlbHNlIGlmIChoYXNDYWxsYmFjayAmJiBzdWNjZWVkZWQpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgfSBlbHNlIGlmIChmYWlsZWQpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuXHQgICAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGluaXRpYWxpemVQcm9taXNlKHByb21pc2UsIHJlc29sdmVyKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcmVzb2x2ZXIoZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UodmFsdWUpe1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGNhdGNoKGUpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaWQgPSAwO1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbmV4dElkKCkge1xuXHQgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaWQrKztcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRtYWtlUHJvbWlzZShwcm9taXNlKSB7XG5cdCAgICAgIHByb21pc2VbbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUFJPTUlTRV9JRF0gPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpZCsrO1xuXHQgICAgICBwcm9taXNlLl9zdGF0ZSA9IHVuZGVmaW5lZDtcblx0ICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gdW5kZWZpbmVkO1xuXHQgICAgICBwcm9taXNlLl9zdWJzY3JpYmVycyA9IFtdO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkYWxsKGVudHJpZXMpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkZGVmYXVsdCh0aGlzLCBlbnRyaWVzKS5wcm9taXNlO1xuXHQgICAgfVxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkYWxsO1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkcmFjZShlbnRyaWVzKSB7XG5cdCAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG5cdCAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cdFxuXHQgICAgICBpZiAoIWxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNBcnJheShlbnRyaWVzKSkge1xuXHQgICAgICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLicpKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICAgICAgdmFyIGxlbmd0aCA9IGVudHJpZXMubGVuZ3RoO1xuXHQgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKGVudHJpZXNbaV0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRyYWNlO1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRyZWplY3QocmVhc29uKSB7XG5cdCAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG5cdCAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cdCAgICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcblx0ICAgICAgcmV0dXJuIHByb21pc2U7XG5cdCAgICB9XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRyZWplY3Q7XG5cdFxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc1Jlc29sdmVyKCkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzTmV3KCkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlO1xuXHQgICAgLyoqXG5cdCAgICAgIFByb21pc2Ugb2JqZWN0cyByZXByZXNlbnQgdGhlIGV2ZW50dWFsIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLiBUaGVcblx0ICAgICAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2hcblx0ICAgICAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uXG5cdCAgICAgIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuXHRcblx0ICAgICAgVGVybWlub2xvZ3lcblx0ICAgICAgLS0tLS0tLS0tLS1cblx0XG5cdCAgICAgIC0gYHByb21pc2VgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB3aXRoIGEgYHRoZW5gIG1ldGhvZCB3aG9zZSBiZWhhdmlvciBjb25mb3JtcyB0byB0aGlzIHNwZWNpZmljYXRpb24uXG5cdCAgICAgIC0gYHRoZW5hYmxlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gdGhhdCBkZWZpbmVzIGEgYHRoZW5gIG1ldGhvZC5cblx0ICAgICAgLSBgdmFsdWVgIGlzIGFueSBsZWdhbCBKYXZhU2NyaXB0IHZhbHVlIChpbmNsdWRpbmcgdW5kZWZpbmVkLCBhIHRoZW5hYmxlLCBvciBhIHByb21pc2UpLlxuXHQgICAgICAtIGBleGNlcHRpb25gIGlzIGEgdmFsdWUgdGhhdCBpcyB0aHJvd24gdXNpbmcgdGhlIHRocm93IHN0YXRlbWVudC5cblx0ICAgICAgLSBgcmVhc29uYCBpcyBhIHZhbHVlIHRoYXQgaW5kaWNhdGVzIHdoeSBhIHByb21pc2Ugd2FzIHJlamVjdGVkLlxuXHQgICAgICAtIGBzZXR0bGVkYCB0aGUgZmluYWwgcmVzdGluZyBzdGF0ZSBvZiBhIHByb21pc2UsIGZ1bGZpbGxlZCBvciByZWplY3RlZC5cblx0XG5cdCAgICAgIEEgcHJvbWlzZSBjYW4gYmUgaW4gb25lIG9mIHRocmVlIHN0YXRlczogcGVuZGluZywgZnVsZmlsbGVkLCBvciByZWplY3RlZC5cblx0XG5cdCAgICAgIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXG5cdCAgICAgIHN0YXRlLiAgUHJvbWlzZXMgdGhhdCBhcmUgcmVqZWN0ZWQgaGF2ZSBhIHJlamVjdGlvbiByZWFzb24gYW5kIGFyZSBpbiB0aGVcblx0ICAgICAgcmVqZWN0ZWQgc3RhdGUuICBBIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5ldmVyIGEgdGhlbmFibGUuXG5cdFxuXHQgICAgICBQcm9taXNlcyBjYW4gYWxzbyBiZSBzYWlkIHRvICpyZXNvbHZlKiBhIHZhbHVlLiAgSWYgdGhpcyB2YWx1ZSBpcyBhbHNvIGFcblx0ICAgICAgcHJvbWlzZSwgdGhlbiB0aGUgb3JpZ2luYWwgcHJvbWlzZSdzIHNldHRsZWQgc3RhdGUgd2lsbCBtYXRjaCB0aGUgdmFsdWUnc1xuXHQgICAgICBzZXR0bGVkIHN0YXRlLiAgU28gYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCByZWplY3RzIHdpbGxcblx0ICAgICAgaXRzZWxmIHJlamVjdCwgYW5kIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgd2lsbFxuXHQgICAgICBpdHNlbGYgZnVsZmlsbC5cblx0XG5cdFxuXHQgICAgICBCYXNpYyBVc2FnZTpcblx0ICAgICAgLS0tLS0tLS0tLS0tXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICAgIC8vIG9uIHN1Y2Nlc3Ncblx0ICAgICAgICByZXNvbHZlKHZhbHVlKTtcblx0XG5cdCAgICAgICAgLy8gb24gZmFpbHVyZVxuXHQgICAgICAgIHJlamVjdChyZWFzb24pO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIC8vIG9uIGZ1bGZpbGxtZW50XG5cdCAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuXHQgICAgICAgIC8vIG9uIHJlamVjdGlvblxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBBZHZhbmNlZCBVc2FnZTpcblx0ICAgICAgLS0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgICAgICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzXG5cdCAgICAgIGBYTUxIdHRwUmVxdWVzdGBzLlxuXHRcblx0ICAgICAgYGBganNcblx0ICAgICAgZnVuY3Rpb24gZ2V0SlNPTih1cmwpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcblx0ICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XG5cdCAgICAgICAgICB4aHIub3BlbignR0VUJywgdXJsKTtcblx0ICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyO1xuXHQgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcblx0ICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuXHQgICAgICAgICAgeGhyLnNlbmQoKTtcblx0XG5cdCAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVyKCkge1xuXHQgICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHtcblx0ICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuXHQgICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcblx0ICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignZ2V0SlNPTjogYCcgKyB1cmwgKyAnYCBmYWlsZWQgd2l0aCBzdGF0dXM6IFsnICsgdGhpcy5zdGF0dXMgKyAnXScpKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGdldEpTT04oJy9wb3N0cy5qc29uJykudGhlbihmdW5jdGlvbihqc29uKSB7XG5cdCAgICAgICAgLy8gb24gZnVsZmlsbG1lbnRcblx0ICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG5cdCAgICAgICAgLy8gb24gcmVqZWN0aW9uXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIFVubGlrZSBjYWxsYmFja3MsIHByb21pc2VzIGFyZSBncmVhdCBjb21wb3NhYmxlIHByaW1pdGl2ZXMuXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBQcm9taXNlLmFsbChbXG5cdCAgICAgICAgZ2V0SlNPTignL3Bvc3RzJyksXG5cdCAgICAgICAgZ2V0SlNPTignL2NvbW1lbnRzJylcblx0ICAgICAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpe1xuXHQgICAgICAgIHZhbHVlc1swXSAvLyA9PiBwb3N0c0pTT05cblx0ICAgICAgICB2YWx1ZXNbMV0gLy8gPT4gY29tbWVudHNKU09OXG5cdFxuXHQgICAgICAgIHJldHVybiB2YWx1ZXM7XG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIEBjbGFzcyBQcm9taXNlXG5cdCAgICAgIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmVyXG5cdCAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cblx0ICAgICAgQGNvbnN0cnVjdG9yXG5cdCAgICAqL1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UocmVzb2x2ZXIpIHtcblx0ICAgICAgdGhpc1tsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEXSA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5leHRJZCgpO1xuXHQgICAgICB0aGlzLl9yZXN1bHQgPSB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcblx0ICAgICAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblx0XG5cdCAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wICE9PSByZXNvbHZlcikge1xuXHQgICAgICAgIHR5cGVvZiByZXNvbHZlciAhPT0gJ2Z1bmN0aW9uJyAmJiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkbmVlZHNSZXNvbHZlcigpO1xuXHQgICAgICAgIHRoaXMgaW5zdGFuY2VvZiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZSA/IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGluaXRpYWxpemVQcm9taXNlKHRoaXMsIHJlc29sdmVyKSA6IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc05ldygpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuYWxsID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRkZWZhdWx0O1xuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UucmFjZSA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJGRlZmF1bHQ7XG5cdCAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5yZXNvbHZlID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdDtcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnJlamVjdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkZGVmYXVsdDtcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLl9zZXRTY2hlZHVsZXIgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0U2NoZWR1bGVyO1xuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuX3NldEFzYXAgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0QXNhcDtcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLl9hc2FwID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXA7XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UucHJvdG90eXBlID0ge1xuXHQgICAgICBjb25zdHJ1Y3RvcjogbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UsXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLFxuXHQgICAgICB3aGljaCByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZVxuXHQgICAgICByZWFzb24gd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24odXNlcil7XG5cdCAgICAgICAgLy8gdXNlciBpcyBhdmFpbGFibGVcblx0ICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcblx0ICAgICAgICAvLyB1c2VyIGlzIHVuYXZhaWxhYmxlLCBhbmQgeW91IGFyZSBnaXZlbiB0aGUgcmVhc29uIHdoeVxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBDaGFpbmluZ1xuXHQgICAgICAtLS0tLS0tLVxuXHRcblx0ICAgICAgVGhlIHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4gIFRoaXMgc2Vjb25kLCAnZG93bnN0cmVhbSdcblx0ICAgICAgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZpcnN0IHByb21pc2UncyBmdWxmaWxsbWVudFxuXHQgICAgICBvciByZWplY3Rpb24gaGFuZGxlciwgb3IgcmVqZWN0ZWQgaWYgdGhlIGhhbmRsZXIgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cblx0XG5cdCAgICAgIGBgYGpzXG5cdCAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgICAgIHJldHVybiB1c2VyLm5hbWU7XG5cdCAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgICByZXR1cm4gJ2RlZmF1bHQgbmFtZSc7XG5cdCAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7XG5cdCAgICAgICAgLy8gSWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGB1c2VyTmFtZWAgd2lsbCBiZSB0aGUgdXNlcidzIG5hbWUsIG90aGVyd2lzZSBpdFxuXHQgICAgICAgIC8vIHdpbGwgYmUgYCdkZWZhdWx0IG5hbWUnYFxuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknKTtcblx0ICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpO1xuXHQgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcblx0ICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICAgIC8vIGlmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgcmVhc29uYCB3aWxsIGJlICdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScuXG5cdCAgICAgICAgLy8gSWYgYGZpbmRVc2VyYCByZWplY3RlZCwgYHJlYXNvbmAgd2lsbCBiZSAnYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScuXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0ICAgICAgSWYgdGhlIGRvd25zdHJlYW0gcHJvbWlzZSBkb2VzIG5vdCBzcGVjaWZ5IGEgcmVqZWN0aW9uIGhhbmRsZXIsIHJlamVjdGlvbiByZWFzb25zIHdpbGwgYmUgcHJvcGFnYXRlZCBmdXJ0aGVyIGRvd25zdHJlYW0uXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgUGVkYWdvZ2ljYWxFeGNlcHRpb24oJ1Vwc3RyZWFtIGVycm9yJyk7XG5cdCAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuXHQgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcblx0ICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlzIHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIEFzc2ltaWxhdGlvblxuXHQgICAgICAtLS0tLS0tLS0tLS1cblx0XG5cdCAgICAgIFNvbWV0aW1lcyB0aGUgdmFsdWUgeW91IHdhbnQgdG8gcHJvcGFnYXRlIHRvIGEgZG93bnN0cmVhbSBwcm9taXNlIGNhbiBvbmx5IGJlXG5cdCAgICAgIHJldHJpZXZlZCBhc3luY2hyb25vdXNseS4gVGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcmV0dXJuaW5nIGEgcHJvbWlzZSBpbiB0aGVcblx0ICAgICAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmdcblx0ICAgICAgdW50aWwgdGhlIHJldHVybmVkIHByb21pc2UgaXMgc2V0dGxlZC4gVGhpcyBpcyBjYWxsZWQgKmFzc2ltaWxhdGlvbiouXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcblx0ICAgICAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG5cdCAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG5cdCAgICAgICAgLy8gVGhlIHVzZXIncyBjb21tZW50cyBhcmUgbm93IGF2YWlsYWJsZVxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBJZiB0aGUgYXNzaW1saWF0ZWQgcHJvbWlzZSByZWplY3RzLCB0aGVuIHRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCBhbHNvIHJlamVjdC5cblx0XG5cdCAgICAgIGBgYGpzXG5cdCAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcblx0ICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcblx0ICAgICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIGZ1bGZpbGxzLCB3ZSdsbCBoYXZlIHRoZSB2YWx1ZSBoZXJlXG5cdCAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIHJlamVjdHMsIHdlJ2xsIGhhdmUgdGhlIHJlYXNvbiBoZXJlXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIFNpbXBsZSBFeGFtcGxlXG5cdCAgICAgIC0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgICAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG5cdFxuXHQgICAgICBgYGBqYXZhc2NyaXB0XG5cdCAgICAgIHZhciByZXN1bHQ7XG5cdFxuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHJlc3VsdCA9IGZpbmRSZXN1bHQoKTtcblx0ICAgICAgICAvLyBzdWNjZXNzXG5cdCAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG5cdCAgICAgICAgLy8gZmFpbHVyZVxuXHQgICAgICB9XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgRXJyYmFjayBFeGFtcGxlXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXtcblx0ICAgICAgICBpZiAoZXJyKSB7XG5cdCAgICAgICAgICAvLyBmYWlsdXJlXG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIHN1Y2Nlc3Ncblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIFByb21pc2UgRXhhbXBsZTtcblx0XG5cdCAgICAgIGBgYGphdmFzY3JpcHRcblx0ICAgICAgZmluZFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcblx0ICAgICAgICAvLyBzdWNjZXNzXG5cdCAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgICAgICAgLy8gZmFpbHVyZVxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBBZHZhbmNlZCBFeGFtcGxlXG5cdCAgICAgIC0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgICAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG5cdFxuXHQgICAgICBgYGBqYXZhc2NyaXB0XG5cdCAgICAgIHZhciBhdXRob3IsIGJvb2tzO1xuXHRcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBhdXRob3IgPSBmaW5kQXV0aG9yKCk7XG5cdCAgICAgICAgYm9va3MgID0gZmluZEJvb2tzQnlBdXRob3IoYXV0aG9yKTtcblx0ICAgICAgICAvLyBzdWNjZXNzXG5cdCAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG5cdCAgICAgICAgLy8gZmFpbHVyZVxuXHQgICAgICB9XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgRXJyYmFjayBFeGFtcGxlXG5cdFxuXHQgICAgICBgYGBqc1xuXHRcblx0ICAgICAgZnVuY3Rpb24gZm91bmRCb29rcyhib29rcykge1xuXHRcblx0ICAgICAgfVxuXHRcblx0ICAgICAgZnVuY3Rpb24gZmFpbHVyZShyZWFzb24pIHtcblx0XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0aG9yLCBlcnIpe1xuXHQgICAgICAgIGlmIChlcnIpIHtcblx0ICAgICAgICAgIGZhaWx1cmUoZXJyKTtcblx0ICAgICAgICAgIC8vIGZhaWx1cmVcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgZmluZEJvb29rc0J5QXV0aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikge1xuXHQgICAgICAgICAgICAgIGlmIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgIGZhaWx1cmUoZXJyKTtcblx0ICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgZm91bmRCb29rcyhib29rcyk7XG5cdCAgICAgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikge1xuXHQgICAgICAgICAgICAgICAgICBmYWlsdXJlKHJlYXNvbik7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcblx0ICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgLy8gc3VjY2Vzc1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgUHJvbWlzZSBFeGFtcGxlO1xuXHRcblx0ICAgICAgYGBgamF2YXNjcmlwdFxuXHQgICAgICBmaW5kQXV0aG9yKCkuXG5cdCAgICAgICAgdGhlbihmaW5kQm9va3NCeUF1dGhvcikuXG5cdCAgICAgICAgdGhlbihmdW5jdGlvbihib29rcyl7XG5cdCAgICAgICAgICAvLyBmb3VuZCBib29rc1xuXHQgICAgICB9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuXHQgICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIEBtZXRob2QgdGhlblxuXHQgICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvbkZ1bGZpbGxlZFxuXHQgICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGVkXG5cdCAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cblx0ICAgICAgQHJldHVybiB7UHJvbWlzZX1cblx0ICAgICovXG5cdCAgICAgIHRoZW46IGxpYiRlczYkcHJvbWlzZSR0aGVuJCRkZWZhdWx0LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXG5cdCAgICAgIGFzIHRoZSBjYXRjaCBibG9jayBvZiBhIHRyeS9jYXRjaCBzdGF0ZW1lbnQuXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmdW5jdGlvbiBmaW5kQXV0aG9yKCl7XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG4ndCBmaW5kIHRoYXQgYXV0aG9yJyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIHN5bmNocm9ub3VzXG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgZmluZEF1dGhvcigpO1xuXHQgICAgICB9IGNhdGNoKHJlYXNvbikge1xuXHQgICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcblx0ICAgICAgZmluZEF1dGhvcigpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3Jvbmdcblx0ICAgICAgfSk7XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgQG1ldGhvZCBjYXRjaFxuXHQgICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGlvblxuXHQgICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgICAgIEByZXR1cm4ge1Byb21pc2V9XG5cdCAgICAqL1xuXHQgICAgICAnY2F0Y2gnOiBmdW5jdGlvbihvblJlamVjdGlvbikge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24pO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3I7XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvcihDb25zdHJ1Y3RvciwgaW5wdXQpIHtcblx0ICAgICAgdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvciA9IENvbnN0cnVjdG9yO1xuXHQgICAgICB0aGlzLnByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG5cdFxuXHQgICAgICBpZiAoIXRoaXMucHJvbWlzZVtsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEXSkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG1ha2VQcm9taXNlKHRoaXMucHJvbWlzZSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzQXJyYXkoaW5wdXQpKSB7XG5cdCAgICAgICAgdGhpcy5faW5wdXQgICAgID0gaW5wdXQ7XG5cdCAgICAgICAgdGhpcy5sZW5ndGggICAgID0gaW5wdXQubGVuZ3RoO1xuXHQgICAgICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcblx0XG5cdCAgICAgICAgdGhpcy5fcmVzdWx0ID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTtcblx0XG5cdCAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLmxlbmd0aCB8fCAwO1xuXHQgICAgICAgICAgdGhpcy5fZW51bWVyYXRlKCk7XG5cdCAgICAgICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG5cdCAgICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QodGhpcy5wcm9taXNlLCBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkdmFsaWRhdGlvbkVycm9yKCkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJHZhbGlkYXRpb25FcnJvcigpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBFcnJvcignQXJyYXkgTWV0aG9kcyBtdXN0IGJlIHByb3ZpZGVkIGFuIEFycmF5Jyk7XG5cdCAgICB9XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl9lbnVtZXJhdGUgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGxlbmd0aCAgPSB0aGlzLmxlbmd0aDtcblx0ICAgICAgdmFyIGlucHV0ICAgPSB0aGlzLl9pbnB1dDtcblx0XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyB0aGlzLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORyAmJiBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB0aGlzLl9lYWNoRW50cnkoaW5wdXRbaV0sIGkpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24oZW50cnksIGkpIHtcblx0ICAgICAgdmFyIGMgPSB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yO1xuXHQgICAgICB2YXIgcmVzb2x2ZSA9IGMucmVzb2x2ZTtcblx0XG5cdCAgICAgIGlmIChyZXNvbHZlID09PSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRkZWZhdWx0KSB7XG5cdCAgICAgICAgdmFyIHRoZW4gPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRnZXRUaGVuKGVudHJ5KTtcblx0XG5cdCAgICAgICAgaWYgKHRoZW4gPT09IGxpYiRlczYkcHJvbWlzZSR0aGVuJCRkZWZhdWx0ICYmXG5cdCAgICAgICAgICAgIGVudHJ5Ll9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuXHQgICAgICAgICAgdGhpcy5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7XG5cdCAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhlbiAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG5cdCAgICAgICAgICB0aGlzLl9yZXN1bHRbaV0gPSBlbnRyeTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGMgPT09IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0KSB7XG5cdCAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBjKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBlbnRyeSwgdGhlbik7XG5cdCAgICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChuZXcgYyhmdW5jdGlvbihyZXNvbHZlKSB7IHJlc29sdmUoZW50cnkpOyB9KSwgaSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChyZXNvbHZlKGVudHJ5KSwgaSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbihzdGF0ZSwgaSwgdmFsdWUpIHtcblx0ICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG5cdFxuXHQgICAgICBpZiAocHJvbWlzZS5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHtcblx0ICAgICAgICB0aGlzLl9yZW1haW5pbmctLTtcblx0XG5cdCAgICAgICAgaWYgKHN0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdGhpcy5fcmVzdWx0W2ldID0gdmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fd2lsbFNldHRsZUF0ID0gZnVuY3Rpb24ocHJvbWlzZSwgaSkge1xuXHQgICAgICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cdFxuXHQgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUocHJvbWlzZSwgdW5kZWZpbmVkLCBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIGVudW1lcmF0b3IuX3NldHRsZWRBdChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQsIGksIHZhbHVlKTtcblx0ICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG5cdCAgICAgICAgZW51bWVyYXRvci5fc2V0dGxlZEF0KGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVELCBpLCByZWFzb24pO1xuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJHBvbHlmaWxsKCkge1xuXHQgICAgICB2YXIgbG9jYWw7XG5cdFxuXHQgICAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICAgIGxvY2FsID0gZ2xvYmFsO1xuXHQgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgbG9jYWwgPSBzZWxmO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICBsb2NhbCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdCAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlO1xuXHRcblx0ICAgICAgaWYgKFAgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFAucmVzb2x2ZSgpKSA9PT0gJ1tvYmplY3QgUHJvbWlzZV0nICYmICFQLmNhc3QpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGxvY2FsLlByb21pc2UgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdDtcblx0ICAgIH1cblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJHBvbHlmaWxsO1xuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlID0ge1xuXHQgICAgICAnUHJvbWlzZSc6IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0LFxuXHQgICAgICAncG9seWZpbGwnOiBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHRcblx0ICAgIH07XG5cdFxuXHQgICAgLyogZ2xvYmFsIGRlZmluZTp0cnVlIG1vZHVsZTp0cnVlIHdpbmRvdzogdHJ1ZSAqL1xuXHQgICAgaWYgKFwiZnVuY3Rpb25cIiA9PT0gJ2Z1bmN0aW9uJyAmJiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5OSlbJ2FtZCddKSB7XG5cdCAgICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSBmdW5jdGlvbigpIHsgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2U7IH0uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fLCBleHBvcnRzLCBtb2R1bGUpLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZVsnZXhwb3J0cyddKSB7XG5cdCAgICAgIG1vZHVsZVsnZXhwb3J0cyddID0gbGliJGVzNiRwcm9taXNlJHVtZCQkRVM2UHJvbWlzZTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgIHRoaXNbJ0VTNlByb21pc2UnXSA9IGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2U7XG5cdCAgICB9XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRkZWZhdWx0KCk7XG5cdH0pLmNhbGwodGhpcyk7XG5cdFxuXHRcblx0XG5cdC8qKiogRVhQT1JUUyBGUk9NIGV4cG9ydHMtbG9hZGVyICoqKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwuUHJvbWlzZTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTkpLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwMCkobW9kdWxlKSkpXG5cbi8qKiovIH0sXG4vKiA3NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKFByb21pc2UpIHsoZnVuY3Rpb24oc2VsZikge1xuXHQgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgaWYgKHNlbGYuZmV0Y2gpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0XG5cdCAgdmFyIHN1cHBvcnQgPSB7XG5cdCAgICBzZWFyY2hQYXJhbXM6ICdVUkxTZWFyY2hQYXJhbXMnIGluIHNlbGYsXG5cdCAgICBpdGVyYWJsZTogJ1N5bWJvbCcgaW4gc2VsZiAmJiAnaXRlcmF0b3InIGluIFN5bWJvbCxcblx0ICAgIGJsb2I6ICdGaWxlUmVhZGVyJyBpbiBzZWxmICYmICdCbG9iJyBpbiBzZWxmICYmIChmdW5jdGlvbigpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBuZXcgQmxvYigpXG5cdCAgICAgICAgcmV0dXJuIHRydWVcblx0ICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgICAgIH1cblx0ICAgIH0pKCksXG5cdCAgICBmb3JtRGF0YTogJ0Zvcm1EYXRhJyBpbiBzZWxmLFxuXHQgICAgYXJyYXlCdWZmZXI6ICdBcnJheUJ1ZmZlcicgaW4gc2VsZlxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lKSB7XG5cdCAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIG5hbWUgPSBTdHJpbmcobmFtZSlcblx0ICAgIH1cblx0ICAgIGlmICgvW15hLXowLTlcXC0jJCUmJyorLlxcXl9gfH5dL2kudGVzdChuYW1lKSkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGNoYXJhY3RlciBpbiBoZWFkZXIgZmllbGQgbmFtZScpXG5cdCAgICB9XG5cdCAgICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBub3JtYWxpemVWYWx1ZSh2YWx1ZSkge1xuXHQgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcblx0ICAgICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpXG5cdCAgICB9XG5cdCAgICByZXR1cm4gdmFsdWVcblx0ICB9XG5cdFxuXHQgIC8vIEJ1aWxkIGEgZGVzdHJ1Y3RpdmUgaXRlcmF0b3IgZm9yIHRoZSB2YWx1ZSBsaXN0XG5cdCAgZnVuY3Rpb24gaXRlcmF0b3JGb3IoaXRlbXMpIHtcblx0ICAgIHZhciBpdGVyYXRvciA9IHtcblx0ICAgICAgbmV4dDogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHZhbHVlID0gaXRlbXMuc2hpZnQoKVxuXHQgICAgICAgIHJldHVybiB7ZG9uZTogdmFsdWUgPT09IHVuZGVmaW5lZCwgdmFsdWU6IHZhbHVlfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHN1cHBvcnQuaXRlcmFibGUpIHtcblx0ICAgICAgaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiBpdGVyYXRvclxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGl0ZXJhdG9yXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBIZWFkZXJzKGhlYWRlcnMpIHtcblx0ICAgIHRoaXMubWFwID0ge31cblx0XG5cdCAgICBpZiAoaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMpIHtcblx0ICAgICAgaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG5cdCAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgdmFsdWUpXG5cdCAgICAgIH0sIHRoaXMpXG5cdFxuXHQgICAgfSBlbHNlIGlmIChoZWFkZXJzKSB7XG5cdCAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuXHQgICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIGhlYWRlcnNbbmFtZV0pXG5cdCAgICAgIH0sIHRoaXMpXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuXHQgICAgbmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSlcblx0ICAgIHZhbHVlID0gbm9ybWFsaXplVmFsdWUodmFsdWUpXG5cdCAgICB2YXIgbGlzdCA9IHRoaXMubWFwW25hbWVdXG5cdCAgICBpZiAoIWxpc3QpIHtcblx0ICAgICAgbGlzdCA9IFtdXG5cdCAgICAgIHRoaXMubWFwW25hbWVdID0gbGlzdFxuXHQgICAgfVxuXHQgICAgbGlzdC5wdXNoKHZhbHVlKVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGVbJ2RlbGV0ZSddID0gZnVuY3Rpb24obmFtZSkge1xuXHQgICAgZGVsZXRlIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihuYW1lKSB7XG5cdCAgICB2YXIgdmFsdWVzID0gdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV1cblx0ICAgIHJldHVybiB2YWx1ZXMgPyB2YWx1ZXNbMF0gOiBudWxsXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbihuYW1lKSB7XG5cdCAgICByZXR1cm4gdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV0gfHwgW11cblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgIHJldHVybiB0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShub3JtYWxpemVOYW1lKG5hbWUpKVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcblx0ICAgIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldID0gW25vcm1hbGl6ZVZhbHVlKHZhbHVlKV1cblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaywgdGhpc0FyZykge1xuXHQgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcy5tYXApLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuXHQgICAgICB0aGlzLm1hcFtuYW1lXS5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB2YWx1ZSwgbmFtZSwgdGhpcylcblx0ICAgICAgfSwgdGhpcylcblx0ICAgIH0sIHRoaXMpXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5rZXlzID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgaXRlbXMgPSBbXVxuXHQgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7IGl0ZW1zLnB1c2gobmFtZSkgfSlcblx0ICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGl0ZW1zID0gW11cblx0ICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkgeyBpdGVtcy5wdXNoKHZhbHVlKSB9KVxuXHQgICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUuZW50cmllcyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGl0ZW1zID0gW11cblx0ICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkgeyBpdGVtcy5wdXNoKFtuYW1lLCB2YWx1ZV0pIH0pXG5cdCAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG5cdCAgfVxuXHRcblx0ICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuXHQgICAgSGVhZGVycy5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXNcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGNvbnN1bWVkKGJvZHkpIHtcblx0ICAgIGlmIChib2R5LmJvZHlVc2VkKSB7XG5cdCAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKSlcblx0ICAgIH1cblx0ICAgIGJvZHkuYm9keVVzZWQgPSB0cnVlXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKSB7XG5cdCAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXNvbHZlKHJlYWRlci5yZXN1bHQpXG5cdCAgICAgIH1cblx0ICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZWplY3QocmVhZGVyLmVycm9yKVxuXHQgICAgICB9XG5cdCAgICB9KVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVhZEJsb2JBc0FycmF5QnVmZmVyKGJsb2IpIHtcblx0ICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG5cdCAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYilcblx0ICAgIHJldHVybiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikge1xuXHQgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcblx0ICAgIHJlYWRlci5yZWFkQXNUZXh0KGJsb2IpXG5cdCAgICByZXR1cm4gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIEJvZHkoKSB7XG5cdCAgICB0aGlzLmJvZHlVc2VkID0gZmFsc2Vcblx0XG5cdCAgICB0aGlzLl9pbml0Qm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcblx0ICAgICAgdGhpcy5fYm9keUluaXQgPSBib2R5XG5cdCAgICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHlcblx0ICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmJsb2IgJiYgQmxvYi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuXHQgICAgICAgIHRoaXMuX2JvZHlCbG9iID0gYm9keVxuXHQgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuZm9ybURhdGEgJiYgRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcblx0ICAgICAgICB0aGlzLl9ib2R5Rm9ybURhdGEgPSBib2R5XG5cdCAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG5cdCAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5LnRvU3RyaW5nKClcblx0ICAgICAgfSBlbHNlIGlmICghYm9keSkge1xuXHQgICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gJydcblx0ICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyICYmIEFycmF5QnVmZmVyLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG5cdCAgICAgICAgLy8gT25seSBzdXBwb3J0IEFycmF5QnVmZmVycyBmb3IgUE9TVCBtZXRob2QuXG5cdCAgICAgICAgLy8gUmVjZWl2aW5nIEFycmF5QnVmZmVycyBoYXBwZW5zIHZpYSBCbG9icywgaW5zdGVhZC5cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIEJvZHlJbml0IHR5cGUnKVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIXRoaXMuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ3RleHQvcGxhaW47Y2hhcnNldD1VVEYtOCcpXG5cdCAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QmxvYiAmJiB0aGlzLl9ib2R5QmxvYi50eXBlKSB7XG5cdCAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCB0aGlzLl9ib2R5QmxvYi50eXBlKVxuXHQgICAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG5cdCAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLTgnKVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChzdXBwb3J0LmJsb2IpIHtcblx0ICAgICAgdGhpcy5ibG9iID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcblx0ICAgICAgICBpZiAocmVqZWN0ZWQpIHtcblx0ICAgICAgICAgIHJldHVybiByZWplY3RlZFxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG5cdCAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlCbG9iKVxuXHQgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYicpXG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLmFycmF5QnVmZmVyID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuYmxvYigpLnRoZW4ocmVhZEJsb2JBc0FycmF5QnVmZmVyKVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuXHQgICAgICAgIGlmIChyZWplY3RlZCkge1xuXHQgICAgICAgICAgcmV0dXJuIHJlamVjdGVkXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcblx0ICAgICAgICAgIHJldHVybiByZWFkQmxvYkFzVGV4dCh0aGlzLl9ib2R5QmxvYilcblx0ICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlGb3JtRGF0YSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIHRleHQnKVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlUZXh0KVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy50ZXh0ID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcblx0ICAgICAgICByZXR1cm4gcmVqZWN0ZWQgPyByZWplY3RlZCA6IFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChzdXBwb3J0LmZvcm1EYXRhKSB7XG5cdCAgICAgIHRoaXMuZm9ybURhdGEgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihkZWNvZGUpXG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmpzb24gPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oSlNPTi5wYXJzZSlcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdGhpc1xuXHQgIH1cblx0XG5cdCAgLy8gSFRUUCBtZXRob2RzIHdob3NlIGNhcGl0YWxpemF0aW9uIHNob3VsZCBiZSBub3JtYWxpemVkXG5cdCAgdmFyIG1ldGhvZHMgPSBbJ0RFTEVURScsICdHRVQnLCAnSEVBRCcsICdPUFRJT05TJywgJ1BPU1QnLCAnUFVUJ11cblx0XG5cdCAgZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kKG1ldGhvZCkge1xuXHQgICAgdmFyIHVwY2FzZWQgPSBtZXRob2QudG9VcHBlckNhc2UoKVxuXHQgICAgcmV0dXJuIChtZXRob2RzLmluZGV4T2YodXBjYXNlZCkgPiAtMSkgPyB1cGNhc2VkIDogbWV0aG9kXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBSZXF1ZXN0KGlucHV0LCBvcHRpb25zKSB7XG5cdCAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuXHQgICAgdmFyIGJvZHkgPSBvcHRpb25zLmJvZHlcblx0ICAgIGlmIChSZXF1ZXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGlucHV0KSkge1xuXHQgICAgICBpZiAoaW5wdXQuYm9keVVzZWQpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKVxuXHQgICAgICB9XG5cdCAgICAgIHRoaXMudXJsID0gaW5wdXQudXJsXG5cdCAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBpbnB1dC5jcmVkZW50aWFsc1xuXHQgICAgICBpZiAoIW9wdGlvbnMuaGVhZGVycykge1xuXHQgICAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKGlucHV0LmhlYWRlcnMpXG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5tZXRob2QgPSBpbnB1dC5tZXRob2Rcblx0ICAgICAgdGhpcy5tb2RlID0gaW5wdXQubW9kZVxuXHQgICAgICBpZiAoIWJvZHkpIHtcblx0ICAgICAgICBib2R5ID0gaW5wdXQuX2JvZHlJbml0XG5cdCAgICAgICAgaW5wdXQuYm9keVVzZWQgPSB0cnVlXG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMudXJsID0gaW5wdXRcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmNyZWRlbnRpYWxzID0gb3B0aW9ucy5jcmVkZW50aWFscyB8fCB0aGlzLmNyZWRlbnRpYWxzIHx8ICdvbWl0J1xuXHQgICAgaWYgKG9wdGlvbnMuaGVhZGVycyB8fCAhdGhpcy5oZWFkZXJzKSB7XG5cdCAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcblx0ICAgIH1cblx0ICAgIHRoaXMubWV0aG9kID0gbm9ybWFsaXplTWV0aG9kKG9wdGlvbnMubWV0aG9kIHx8IHRoaXMubWV0aG9kIHx8ICdHRVQnKVxuXHQgICAgdGhpcy5tb2RlID0gb3B0aW9ucy5tb2RlIHx8IHRoaXMubW9kZSB8fCBudWxsXG5cdCAgICB0aGlzLnJlZmVycmVyID0gbnVsbFxuXHRcblx0ICAgIGlmICgodGhpcy5tZXRob2QgPT09ICdHRVQnIHx8IHRoaXMubWV0aG9kID09PSAnSEVBRCcpICYmIGJvZHkpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm9keSBub3QgYWxsb3dlZCBmb3IgR0VUIG9yIEhFQUQgcmVxdWVzdHMnKVxuXHQgICAgfVxuXHQgICAgdGhpcy5faW5pdEJvZHkoYm9keSlcblx0ICB9XG5cdFxuXHQgIFJlcXVlc3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gbmV3IFJlcXVlc3QodGhpcylcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGRlY29kZShib2R5KSB7XG5cdCAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpXG5cdCAgICBib2R5LnRyaW0oKS5zcGxpdCgnJicpLmZvckVhY2goZnVuY3Rpb24oYnl0ZXMpIHtcblx0ICAgICAgaWYgKGJ5dGVzKSB7XG5cdCAgICAgICAgdmFyIHNwbGl0ID0gYnl0ZXMuc3BsaXQoJz0nKVxuXHQgICAgICAgIHZhciBuYW1lID0gc3BsaXQuc2hpZnQoKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuXHQgICAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJz0nKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuXHQgICAgICAgIGZvcm0uYXBwZW5kKGRlY29kZVVSSUNvbXBvbmVudChuYW1lKSwgZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSlcblx0ICAgICAgfVxuXHQgICAgfSlcblx0ICAgIHJldHVybiBmb3JtXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBoZWFkZXJzKHhocikge1xuXHQgICAgdmFyIGhlYWQgPSBuZXcgSGVhZGVycygpXG5cdCAgICB2YXIgcGFpcnMgPSAoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpIHx8ICcnKS50cmltKCkuc3BsaXQoJ1xcbicpXG5cdCAgICBwYWlycy5mb3JFYWNoKGZ1bmN0aW9uKGhlYWRlcikge1xuXHQgICAgICB2YXIgc3BsaXQgPSBoZWFkZXIudHJpbSgpLnNwbGl0KCc6Jylcblx0ICAgICAgdmFyIGtleSA9IHNwbGl0LnNoaWZ0KCkudHJpbSgpXG5cdCAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJzonKS50cmltKClcblx0ICAgICAgaGVhZC5hcHBlbmQoa2V5LCB2YWx1ZSlcblx0ICAgIH0pXG5cdCAgICByZXR1cm4gaGVhZFxuXHQgIH1cblx0XG5cdCAgQm9keS5jYWxsKFJlcXVlc3QucHJvdG90eXBlKVxuXHRcblx0ICBmdW5jdGlvbiBSZXNwb25zZShib2R5SW5pdCwgb3B0aW9ucykge1xuXHQgICAgaWYgKCFvcHRpb25zKSB7XG5cdCAgICAgIG9wdGlvbnMgPSB7fVxuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMudHlwZSA9ICdkZWZhdWx0J1xuXHQgICAgdGhpcy5zdGF0dXMgPSBvcHRpb25zLnN0YXR1c1xuXHQgICAgdGhpcy5vayA9IHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMFxuXHQgICAgdGhpcy5zdGF0dXNUZXh0ID0gb3B0aW9ucy5zdGF0dXNUZXh0XG5cdCAgICB0aGlzLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzID8gb3B0aW9ucy5oZWFkZXJzIDogbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuXHQgICAgdGhpcy51cmwgPSBvcHRpb25zLnVybCB8fCAnJ1xuXHQgICAgdGhpcy5faW5pdEJvZHkoYm9keUluaXQpXG5cdCAgfVxuXHRcblx0ICBCb2R5LmNhbGwoUmVzcG9uc2UucHJvdG90eXBlKVxuXHRcblx0ICBSZXNwb25zZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiBuZXcgUmVzcG9uc2UodGhpcy5fYm9keUluaXQsIHtcblx0ICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcblx0ICAgICAgc3RhdHVzVGV4dDogdGhpcy5zdGF0dXNUZXh0LFxuXHQgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpLFxuXHQgICAgICB1cmw6IHRoaXMudXJsXG5cdCAgICB9KVxuXHQgIH1cblx0XG5cdCAgUmVzcG9uc2UuZXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciByZXNwb25zZSA9IG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiAwLCBzdGF0dXNUZXh0OiAnJ30pXG5cdCAgICByZXNwb25zZS50eXBlID0gJ2Vycm9yJ1xuXHQgICAgcmV0dXJuIHJlc3BvbnNlXG5cdCAgfVxuXHRcblx0ICB2YXIgcmVkaXJlY3RTdGF0dXNlcyA9IFszMDEsIDMwMiwgMzAzLCAzMDcsIDMwOF1cblx0XG5cdCAgUmVzcG9uc2UucmVkaXJlY3QgPSBmdW5jdGlvbih1cmwsIHN0YXR1cykge1xuXHQgICAgaWYgKHJlZGlyZWN0U3RhdHVzZXMuaW5kZXhPZihzdGF0dXMpID09PSAtMSkge1xuXHQgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCBzdGF0dXMgY29kZScpXG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiBzdGF0dXMsIGhlYWRlcnM6IHtsb2NhdGlvbjogdXJsfX0pXG5cdCAgfVxuXHRcblx0ICBzZWxmLkhlYWRlcnMgPSBIZWFkZXJzXG5cdCAgc2VsZi5SZXF1ZXN0ID0gUmVxdWVzdFxuXHQgIHNlbGYuUmVzcG9uc2UgPSBSZXNwb25zZVxuXHRcblx0ICBzZWxmLmZldGNoID0gZnVuY3Rpb24oaW5wdXQsIGluaXQpIHtcblx0ICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgdmFyIHJlcXVlc3Rcblx0ICAgICAgaWYgKFJlcXVlc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoaW5wdXQpICYmICFpbml0KSB7XG5cdCAgICAgICAgcmVxdWVzdCA9IGlucHV0XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KGlucHV0LCBpbml0KVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcblx0XG5cdCAgICAgIGZ1bmN0aW9uIHJlc3BvbnNlVVJMKCkge1xuXHQgICAgICAgIGlmICgncmVzcG9uc2VVUkwnIGluIHhocikge1xuXHQgICAgICAgICAgcmV0dXJuIHhoci5yZXNwb25zZVVSTFxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gQXZvaWQgc2VjdXJpdHkgd2FybmluZ3Mgb24gZ2V0UmVzcG9uc2VIZWFkZXIgd2hlbiBub3QgYWxsb3dlZCBieSBDT1JTXG5cdCAgICAgICAgaWYgKC9eWC1SZXF1ZXN0LVVSTDovbS50ZXN0KHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpIHtcblx0ICAgICAgICAgIHJldHVybiB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ1gtUmVxdWVzdC1VUkwnKVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgb3B0aW9ucyA9IHtcblx0ICAgICAgICAgIHN0YXR1czogeGhyLnN0YXR1cyxcblx0ICAgICAgICAgIHN0YXR1c1RleHQ6IHhoci5zdGF0dXNUZXh0LFxuXHQgICAgICAgICAgaGVhZGVyczogaGVhZGVycyh4aHIpLFxuXHQgICAgICAgICAgdXJsOiByZXNwb25zZVVSTCgpXG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBib2R5ID0gJ3Jlc3BvbnNlJyBpbiB4aHIgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0XG5cdCAgICAgICAgcmVzb2x2ZShuZXcgUmVzcG9uc2UoYm9keSwgb3B0aW9ucykpXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcblx0ICAgICAgfVxuXHRcblx0ICAgICAgeGhyLm9udGltZW91dCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnVybCwgdHJ1ZSlcblx0XG5cdCAgICAgIGlmIChyZXF1ZXN0LmNyZWRlbnRpYWxzID09PSAnaW5jbHVkZScpIHtcblx0ICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoJ3Jlc3BvbnNlVHlwZScgaW4geGhyICYmIHN1cHBvcnQuYmxvYikge1xuXHQgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYidcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmVxdWVzdC5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcblx0ICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihuYW1lLCB2YWx1ZSlcblx0ICAgICAgfSlcblx0XG5cdCAgICAgIHhoci5zZW5kKHR5cGVvZiByZXF1ZXN0Ll9ib2R5SW5pdCA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogcmVxdWVzdC5fYm9keUluaXQpXG5cdCAgICB9KVxuXHQgIH1cblx0ICBzZWxmLmZldGNoLnBvbHlmaWxsID0gdHJ1ZVxuXHR9KSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcyk7XG5cdFxuXHRcblx0LyoqKiBFWFBPUlRTIEZST00gZXhwb3J0cy1sb2FkZXIgKioqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IHNlbGYuZmV0Y2g7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDc2KSkpXG5cbi8qKiovIH0sXG4vKiA3OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldE5hdGl2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNSksXG5cdCAgICByb290ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cblx0dmFyIERhdGFWaWV3ID0gZ2V0TmF0aXZlKHJvb3QsICdEYXRhVmlldycpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBEYXRhVmlldztcblxuXG4vKioqLyB9LFxuLyogNzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBoYXNoQ2xlYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMCksXG5cdCAgICBoYXNoRGVsZXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTEpLFxuXHQgICAgaGFzaEdldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEyKSxcblx0ICAgIGhhc2hIYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMyksXG5cdCAgICBoYXNoU2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTQpO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBoYXNoIG9iamVjdC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuXHQgKi9cblx0ZnVuY3Rpb24gSGFzaChlbnRyaWVzKSB7XG5cdCAgdmFyIGluZGV4ID0gLTEsXG5cdCAgICAgIGxlbmd0aCA9IGVudHJpZXMgPyBlbnRyaWVzLmxlbmd0aCA6IDA7XG5cdFxuXHQgIHRoaXMuY2xlYXIoKTtcblx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG5cdCAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pO1xuXHQgIH1cblx0fVxuXHRcblx0Ly8gQWRkIG1ldGhvZHMgdG8gYEhhc2hgLlxuXHRIYXNoLnByb3RvdHlwZS5jbGVhciA9IGhhc2hDbGVhcjtcblx0SGFzaC5wcm90b3R5cGVbJ2RlbGV0ZSddID0gaGFzaERlbGV0ZTtcblx0SGFzaC5wcm90b3R5cGUuZ2V0ID0gaGFzaEdldDtcblx0SGFzaC5wcm90b3R5cGUuaGFzID0gaGFzaEhhcztcblx0SGFzaC5wcm90b3R5cGUuc2V0ID0gaGFzaFNldDtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gSGFzaDtcblxuXG4vKioqLyB9LFxuLyogODAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXROYXRpdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpLFxuXHQgICAgcm9vdCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG5cdHZhciBQcm9taXNlID0gZ2V0TmF0aXZlKHJvb3QsICdQcm9taXNlJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFByb21pc2U7XG5cblxuLyoqKi8gfSxcbi8qIDgxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2V0TmF0aXZlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KSxcblx0ICAgIHJvb3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xuXHR2YXIgU2V0ID0gZ2V0TmF0aXZlKHJvb3QsICdTZXQnKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gU2V0O1xuXG5cbi8qKiovIH0sXG4vKiA4MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIE1hcENhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyksXG5cdCAgICBzZXRDYWNoZUFkZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMwKSxcblx0ICAgIHNldENhY2hlSGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzEpO1xuXHRcblx0LyoqXG5cdCAqXG5cdCAqIENyZWF0ZXMgYW4gYXJyYXkgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIHVuaXF1ZSB2YWx1ZXMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge0FycmF5fSBbdmFsdWVzXSBUaGUgdmFsdWVzIHRvIGNhY2hlLlxuXHQgKi9cblx0ZnVuY3Rpb24gU2V0Q2FjaGUodmFsdWVzKSB7XG5cdCAgdmFyIGluZGV4ID0gLTEsXG5cdCAgICAgIGxlbmd0aCA9IHZhbHVlcyA/IHZhbHVlcy5sZW5ndGggOiAwO1xuXHRcblx0ICB0aGlzLl9fZGF0YV9fID0gbmV3IE1hcENhY2hlO1xuXHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICB0aGlzLmFkZCh2YWx1ZXNbaW5kZXhdKTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIEFkZCBtZXRob2RzIHRvIGBTZXRDYWNoZWAuXG5cdFNldENhY2hlLnByb3RvdHlwZS5hZGQgPSBTZXRDYWNoZS5wcm90b3R5cGUucHVzaCA9IHNldENhY2hlQWRkO1xuXHRTZXRDYWNoZS5wcm90b3R5cGUuaGFzID0gc2V0Q2FjaGVIYXM7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFNldENhY2hlO1xuXG5cbi8qKiovIH0sXG4vKiA4MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHJvb3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG5cdHZhciBVaW50OEFycmF5ID0gcm9vdC5VaW50OEFycmF5O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBVaW50OEFycmF5O1xuXG5cbi8qKiovIH0sXG4vKiA4NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldE5hdGl2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNSksXG5cdCAgICByb290ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cblx0dmFyIFdlYWtNYXAgPSBnZXROYXRpdmUocm9vdCwgJ1dlYWtNYXAnKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gV2Vha01hcDtcblxuXG4vKioqLyB9LFxuLyogODUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBBIGZhc3RlciBhbHRlcm5hdGl2ZSB0byBgRnVuY3Rpb24jYXBwbHlgLCB0aGlzIGZ1bmN0aW9uIGludm9rZXMgYGZ1bmNgXG5cdCAqIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIGB0aGlzQXJnYCBhbmQgdGhlIGFyZ3VtZW50cyBvZiBgYXJnc2AuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGludm9rZS5cblx0ICogQHBhcmFtIHsqfSB0aGlzQXJnIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgYGZ1bmNgIHdpdGguXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXN1bHQgb2YgYGZ1bmNgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYXBwbHkoZnVuYywgdGhpc0FyZywgYXJncykge1xuXHQgIHZhciBsZW5ndGggPSBhcmdzLmxlbmd0aDtcblx0ICBzd2l0Y2ggKGxlbmd0aCkge1xuXHQgICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcpO1xuXHQgICAgY2FzZSAxOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0pO1xuXHQgICAgY2FzZSAyOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0sIGFyZ3NbMV0pO1xuXHQgICAgY2FzZSAzOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuXHQgIH1cblx0ICByZXR1cm4gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBhcHBseTtcblxuXG4vKioqLyB9LFxuLyogODYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uc29tZWAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlXG5cdCAqIHNob3J0aGFuZHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFthcnJheV0gVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBwYXNzZXMgdGhlIHByZWRpY2F0ZSBjaGVjayxcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGFycmF5U29tZShhcnJheSwgcHJlZGljYXRlKSB7XG5cdCAgdmFyIGluZGV4ID0gLTEsXG5cdCAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcblx0XG5cdCAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gZmFsc2U7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYXJyYXlTb21lO1xuXG5cbi8qKiovIH0sXG4vKiA4NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cblx0dmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5kZWxheWAgYW5kIGBfLmRlZmVyYCB3aGljaCBhY2NlcHRzIGFuIGFycmF5XG5cdCAqIG9mIGBmdW5jYCBhcmd1bWVudHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlbGF5LlxuXHQgKiBAcGFyYW0ge251bWJlcn0gd2FpdCBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheSBpbnZvY2F0aW9uLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gYXJncyBUaGUgYXJndW1lbnRzIHRvIHByb3ZpZGUgdG8gYGZ1bmNgLlxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lciBpZC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VEZWxheShmdW5jLCB3YWl0LCBhcmdzKSB7XG5cdCAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcblx0ICB9XG5cdCAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGZ1bmMuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTsgfSwgd2FpdCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZURlbGF5O1xuXG5cbi8qKiovIH0sXG4vKiA4OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZpbmRJbmRleGAgYW5kIGBfLmZpbmRMYXN0SW5kZXhgIHdpdGhvdXRcblx0ICogc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBmcm9tSW5kZXggVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VGaW5kSW5kZXgoYXJyYXksIHByZWRpY2F0ZSwgZnJvbUluZGV4LCBmcm9tUmlnaHQpIHtcblx0ICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuXHQgICAgICBpbmRleCA9IGZyb21JbmRleCArIChmcm9tUmlnaHQgPyAxIDogLTEpO1xuXHRcblx0ICB3aGlsZSAoKGZyb21SaWdodCA/IGluZGV4LS0gOiArK2luZGV4IDwgbGVuZ3RoKSkge1xuXHQgICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcblx0ICAgICAgcmV0dXJuIGluZGV4O1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gLTE7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZUZpbmRJbmRleDtcblxuXG4vKioqLyB9LFxuLyogODkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5oYXNJbmAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IGtleSBUaGUga2V5IHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlSGFzSW4ob2JqZWN0LCBrZXkpIHtcblx0ICByZXR1cm4gb2JqZWN0ICE9IG51bGwgJiYga2V5IGluIE9iamVjdChvYmplY3QpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VIYXNJbjtcblxuXG4vKioqLyB9LFxuLyogOTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBTdGFjayA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpLFxuXHQgICAgZXF1YWxBcnJheXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKSxcblx0ICAgIGVxdWFsQnlUYWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMiksXG5cdCAgICBlcXVhbE9iamVjdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMyksXG5cdCAgICBnZXRUYWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNyksXG5cdCAgICBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KSxcblx0ICAgIGlzSG9zdE9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpLFxuXHQgICAgaXNUeXBlZEFycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDYpO1xuXHRcblx0LyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG5cdHZhciBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cdFxuXHQvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG5cdHZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG5cdCAgICBhcnJheVRhZyA9ICdbb2JqZWN0IEFycmF5XScsXG5cdCAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJztcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdC8qKlxuXHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsYCBmb3IgYXJyYXlzIGFuZCBvYmplY3RzIHdoaWNoIHBlcmZvcm1zXG5cdCAqIGRlZXAgY29tcGFyaXNvbnMgYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cyBlbmFibGluZyBvYmplY3RzIHdpdGggY2lyY3VsYXJcblx0ICogcmVmZXJlbmNlcyB0byBiZSBjb21wYXJlZC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbYml0bWFza10gVGhlIGJpdG1hc2sgb2YgY29tcGFyaXNvbiBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGBcblx0ICogIGZvciBtb3JlIGRldGFpbHMuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhY2tdIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlSXNFcXVhbERlZXAob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuXHQgIHZhciBvYmpJc0FyciA9IGlzQXJyYXkob2JqZWN0KSxcblx0ICAgICAgb3RoSXNBcnIgPSBpc0FycmF5KG90aGVyKSxcblx0ICAgICAgb2JqVGFnID0gYXJyYXlUYWcsXG5cdCAgICAgIG90aFRhZyA9IGFycmF5VGFnO1xuXHRcblx0ICBpZiAoIW9iaklzQXJyKSB7XG5cdCAgICBvYmpUYWcgPSBnZXRUYWcob2JqZWN0KTtcblx0ICAgIG9ialRhZyA9IG9ialRhZyA9PSBhcmdzVGFnID8gb2JqZWN0VGFnIDogb2JqVGFnO1xuXHQgIH1cblx0ICBpZiAoIW90aElzQXJyKSB7XG5cdCAgICBvdGhUYWcgPSBnZXRUYWcob3RoZXIpO1xuXHQgICAgb3RoVGFnID0gb3RoVGFnID09IGFyZ3NUYWcgPyBvYmplY3RUYWcgOiBvdGhUYWc7XG5cdCAgfVxuXHQgIHZhciBvYmpJc09iaiA9IG9ialRhZyA9PSBvYmplY3RUYWcgJiYgIWlzSG9zdE9iamVjdChvYmplY3QpLFxuXHQgICAgICBvdGhJc09iaiA9IG90aFRhZyA9PSBvYmplY3RUYWcgJiYgIWlzSG9zdE9iamVjdChvdGhlciksXG5cdCAgICAgIGlzU2FtZVRhZyA9IG9ialRhZyA9PSBvdGhUYWc7XG5cdFxuXHQgIGlmIChpc1NhbWVUYWcgJiYgIW9iaklzT2JqKSB7XG5cdCAgICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2spO1xuXHQgICAgcmV0dXJuIChvYmpJc0FyciB8fCBpc1R5cGVkQXJyYXkob2JqZWN0KSlcblx0ICAgICAgPyBlcXVhbEFycmF5cyhvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKVxuXHQgICAgICA6IGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgb2JqVGFnLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKTtcblx0ICB9XG5cdCAgaWYgKCEoYml0bWFzayAmIFBBUlRJQUxfQ09NUEFSRV9GTEFHKSkge1xuXHQgICAgdmFyIG9iaklzV3JhcHBlZCA9IG9iaklzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCAnX193cmFwcGVkX18nKSxcblx0ICAgICAgICBvdGhJc1dyYXBwZWQgPSBvdGhJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG90aGVyLCAnX193cmFwcGVkX18nKTtcblx0XG5cdCAgICBpZiAob2JqSXNXcmFwcGVkIHx8IG90aElzV3JhcHBlZCkge1xuXHQgICAgICB2YXIgb2JqVW53cmFwcGVkID0gb2JqSXNXcmFwcGVkID8gb2JqZWN0LnZhbHVlKCkgOiBvYmplY3QsXG5cdCAgICAgICAgICBvdGhVbndyYXBwZWQgPSBvdGhJc1dyYXBwZWQgPyBvdGhlci52YWx1ZSgpIDogb3RoZXI7XG5cdFxuXHQgICAgICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2spO1xuXHQgICAgICByZXR1cm4gZXF1YWxGdW5jKG9ialVud3JhcHBlZCwgb3RoVW53cmFwcGVkLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmICghaXNTYW1lVGFnKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHN0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjayk7XG5cdCAgcmV0dXJuIGVxdWFsT2JqZWN0cyhvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlSXNFcXVhbERlZXA7XG5cblxuLyoqKi8gfSxcbi8qIDkxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgU3RhY2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKSxcblx0ICAgIGJhc2VJc0VxdWFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdFxuXHQvKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cblx0dmFyIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgPSAxLFxuXHQgICAgUEFSVElBTF9DT01QQVJFX0ZMQUcgPSAyO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzTWF0Y2hgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG5cdCAqIEBwYXJhbSB7QXJyYXl9IG1hdGNoRGF0YSBUaGUgcHJvcGVydHkgbmFtZXMsIHZhbHVlcywgYW5kIGNvbXBhcmUgZmxhZ3MgdG8gbWF0Y2guXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYG9iamVjdGAgaXMgYSBtYXRjaCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUlzTWF0Y2gob2JqZWN0LCBzb3VyY2UsIG1hdGNoRGF0YSwgY3VzdG9taXplcikge1xuXHQgIHZhciBpbmRleCA9IG1hdGNoRGF0YS5sZW5ndGgsXG5cdCAgICAgIGxlbmd0aCA9IGluZGV4LFxuXHQgICAgICBub0N1c3RvbWl6ZXIgPSAhY3VzdG9taXplcjtcblx0XG5cdCAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG5cdCAgICByZXR1cm4gIWxlbmd0aDtcblx0ICB9XG5cdCAgb2JqZWN0ID0gT2JqZWN0KG9iamVjdCk7XG5cdCAgd2hpbGUgKGluZGV4LS0pIHtcblx0ICAgIHZhciBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTtcblx0ICAgIGlmICgobm9DdXN0b21pemVyICYmIGRhdGFbMl0pXG5cdCAgICAgICAgICA/IGRhdGFbMV0gIT09IG9iamVjdFtkYXRhWzBdXVxuXHQgICAgICAgICAgOiAhKGRhdGFbMF0gaW4gb2JqZWN0KVxuXHQgICAgICAgICkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTtcblx0ICAgIHZhciBrZXkgPSBkYXRhWzBdLFxuXHQgICAgICAgIG9ialZhbHVlID0gb2JqZWN0W2tleV0sXG5cdCAgICAgICAgc3JjVmFsdWUgPSBkYXRhWzFdO1xuXHRcblx0ICAgIGlmIChub0N1c3RvbWl6ZXIgJiYgZGF0YVsyXSkge1xuXHQgICAgICBpZiAob2JqVmFsdWUgPT09IHVuZGVmaW5lZCAmJiAhKGtleSBpbiBvYmplY3QpKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgc3RhY2sgPSBuZXcgU3RhY2s7XG5cdCAgICAgIGlmIChjdXN0b21pemVyKSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdCA9IGN1c3RvbWl6ZXIob2JqVmFsdWUsIHNyY1ZhbHVlLCBrZXksIG9iamVjdCwgc291cmNlLCBzdGFjayk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKCEocmVzdWx0ID09PSB1bmRlZmluZWRcblx0ICAgICAgICAgICAgPyBiYXNlSXNFcXVhbChzcmNWYWx1ZSwgb2JqVmFsdWUsIGN1c3RvbWl6ZXIsIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgfCBQQVJUSUFMX0NPTVBBUkVfRkxBRywgc3RhY2spXG5cdCAgICAgICAgICAgIDogcmVzdWx0XG5cdCAgICAgICAgICApKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VJc01hdGNoO1xuXG5cbi8qKiovIH0sXG4vKiA5MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KSxcblx0ICAgIGlzSG9zdE9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpLFxuXHQgICAgaXNNYXNrZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNyksXG5cdCAgICBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNiksXG5cdCAgICB0b1NvdXJjZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpO1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gbWF0Y2ggYFJlZ0V4cGBcblx0ICogW3N5bnRheCBjaGFyYWN0ZXJzXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1wYXR0ZXJucykuXG5cdCAqL1xuXHR2YXIgcmVSZWdFeHBDaGFyID0gL1tcXFxcXiQuKis/KClbXFxde318XS9nO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IGhvc3QgY29uc3RydWN0b3JzIChTYWZhcmkpLiAqL1xuXHR2YXIgcmVJc0hvc3RDdG9yID0gL15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLztcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGRlY29tcGlsZWQgc291cmNlIG9mIGZ1bmN0aW9ucy4gKi9cblx0dmFyIGZ1bmNUb1N0cmluZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZztcblx0XG5cdC8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBpZiBhIG1ldGhvZCBpcyBuYXRpdmUuICovXG5cdHZhciByZUlzTmF0aXZlID0gUmVnRXhwKCdeJyArXG5cdCAgZnVuY1RvU3RyaW5nLmNhbGwoaGFzT3duUHJvcGVydHkpLnJlcGxhY2UocmVSZWdFeHBDaGFyLCAnXFxcXCQmJylcblx0ICAucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZywgJyQxLio/JykgKyAnJCdcblx0KTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc05hdGl2ZWAgd2l0aG91dCBiYWQgc2hpbSBjaGVja3MuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbixcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VJc05hdGl2ZSh2YWx1ZSkge1xuXHQgIGlmICghaXNPYmplY3QodmFsdWUpIHx8IGlzTWFza2VkKHZhbHVlKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICB2YXIgcGF0dGVybiA9IChpc0Z1bmN0aW9uKHZhbHVlKSB8fCBpc0hvc3RPYmplY3QodmFsdWUpKSA/IHJlSXNOYXRpdmUgOiByZUlzSG9zdEN0b3I7XG5cdCAgcmV0dXJuIHBhdHRlcm4udGVzdCh0b1NvdXJjZSh2YWx1ZSkpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VJc05hdGl2ZTtcblxuXG4vKioqLyB9LFxuLyogOTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlTWF0Y2hlcyA9IF9fd2VicGFja19yZXF1aXJlX18oOTUpLFxuXHQgICAgYmFzZU1hdGNoZXNQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oOTYpLFxuXHQgICAgaWRlbnRpdHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NCksXG5cdCAgICBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KSxcblx0ICAgIHByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDkpO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLml0ZXJhdGVlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSBbdmFsdWU9Xy5pZGVudGl0eV0gVGhlIHZhbHVlIHRvIGNvbnZlcnQgdG8gYW4gaXRlcmF0ZWUuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgaXRlcmF0ZWUuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlSXRlcmF0ZWUodmFsdWUpIHtcblx0ICAvLyBEb24ndCBzdG9yZSB0aGUgYHR5cGVvZmAgcmVzdWx0IGluIGEgdmFyaWFibGUgdG8gYXZvaWQgYSBKSVQgYnVnIGluIFNhZmFyaSA5LlxuXHQgIC8vIFNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTU2MDM0IGZvciBtb3JlIGRldGFpbHMuXG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfVxuXHQgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG5cdCAgICByZXR1cm4gaWRlbnRpdHk7XG5cdCAgfVxuXHQgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcpIHtcblx0ICAgIHJldHVybiBpc0FycmF5KHZhbHVlKVxuXHQgICAgICA/IGJhc2VNYXRjaGVzUHJvcGVydHkodmFsdWVbMF0sIHZhbHVlWzFdKVxuXHQgICAgICA6IGJhc2VNYXRjaGVzKHZhbHVlKTtcblx0ICB9XG5cdCAgcmV0dXJuIHByb3BlcnR5KHZhbHVlKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlSXRlcmF0ZWU7XG5cblxuLyoqKi8gfSxcbi8qIDk0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG5cdHZhciBuYXRpdmVLZXlzID0gT2JqZWN0LmtleXM7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ua2V5c2Agd2hpY2ggZG9lc24ndCBza2lwIHRoZSBjb25zdHJ1Y3RvclxuXHQgKiBwcm9wZXJ0eSBvZiBwcm90b3R5cGVzIG9yIHRyZWF0IHNwYXJzZSBhcnJheXMgYXMgZGVuc2UuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VLZXlzKG9iamVjdCkge1xuXHQgIHJldHVybiBuYXRpdmVLZXlzKE9iamVjdChvYmplY3QpKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlS2V5cztcblxuXG4vKioqLyB9LFxuLyogOTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlSXNNYXRjaCA9IF9fd2VicGFja19yZXF1aXJlX18oOTEpLFxuXHQgICAgZ2V0TWF0Y2hEYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDUpLFxuXHQgICAgbWF0Y2hlc1N0cmljdENvbXBhcmFibGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tYXRjaGVzYCB3aGljaCBkb2Vzbid0IGNsb25lIGBzb3VyY2VgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIG1hdGNoLlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzcGVjIGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZU1hdGNoZXMoc291cmNlKSB7XG5cdCAgdmFyIG1hdGNoRGF0YSA9IGdldE1hdGNoRGF0YShzb3VyY2UpO1xuXHQgIGlmIChtYXRjaERhdGEubGVuZ3RoID09IDEgJiYgbWF0Y2hEYXRhWzBdWzJdKSB7XG5cdCAgICByZXR1cm4gbWF0Y2hlc1N0cmljdENvbXBhcmFibGUobWF0Y2hEYXRhWzBdWzBdLCBtYXRjaERhdGFbMF1bMV0pO1xuXHQgIH1cblx0ICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG5cdCAgICByZXR1cm4gb2JqZWN0ID09PSBzb3VyY2UgfHwgYmFzZUlzTWF0Y2gob2JqZWN0LCBzb3VyY2UsIG1hdGNoRGF0YSk7XG5cdCAgfTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlTWF0Y2hlcztcblxuXG4vKioqLyB9LFxuLyogOTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlSXNFcXVhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpLFxuXHQgICAgZ2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDIpLFxuXHQgICAgaGFzSW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MyksXG5cdCAgICBpc0tleSA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpLFxuXHQgICAgaXNTdHJpY3RDb21wYXJhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyksXG5cdCAgICBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpLFxuXHQgICAgdG9LZXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdC8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNvbXBhcmlzb24gc3R5bGVzLiAqL1xuXHR2YXIgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyA9IDEsXG5cdCAgICBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWF0Y2hlc1Byb3BlcnR5YCB3aGljaCBkb2Vzbid0IGNsb25lIGBzcmNWYWx1ZWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdCAqIEBwYXJhbSB7Kn0gc3JjVmFsdWUgVGhlIHZhbHVlIHRvIG1hdGNoLlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzcGVjIGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZU1hdGNoZXNQcm9wZXJ0eShwYXRoLCBzcmNWYWx1ZSkge1xuXHQgIGlmIChpc0tleShwYXRoKSAmJiBpc1N0cmljdENvbXBhcmFibGUoc3JjVmFsdWUpKSB7XG5cdCAgICByZXR1cm4gbWF0Y2hlc1N0cmljdENvbXBhcmFibGUodG9LZXkocGF0aCksIHNyY1ZhbHVlKTtcblx0ICB9XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuXHQgICAgdmFyIG9ialZhbHVlID0gZ2V0KG9iamVjdCwgcGF0aCk7XG5cdCAgICByZXR1cm4gKG9ialZhbHVlID09PSB1bmRlZmluZWQgJiYgb2JqVmFsdWUgPT09IHNyY1ZhbHVlKVxuXHQgICAgICA/IGhhc0luKG9iamVjdCwgcGF0aClcblx0ICAgICAgOiBiYXNlSXNFcXVhbChzcmNWYWx1ZSwgb2JqVmFsdWUsIHVuZGVmaW5lZCwgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyB8IFBBUlRJQUxfQ09NUEFSRV9GTEFHKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VNYXRjaGVzUHJvcGVydHk7XG5cblxuLyoqKi8gfSxcbi8qIDk3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZUdldCA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0LyoqXG5cdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZVByb3BlcnR5YCB3aGljaCBzdXBwb3J0cyBkZWVwIHBhdGhzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhY2Nlc3NvciBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VQcm9wZXJ0eURlZXAocGF0aCkge1xuXHQgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcblx0ICAgIHJldHVybiBiYXNlR2V0KG9iamVjdCwgcGF0aCk7XG5cdCAgfTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlUHJvcGVydHlEZWVwO1xuXG5cbi8qKiovIH0sXG4vKiA5OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRpbWVzYCB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHNcblx0ICogb3IgbWF4IGFycmF5IGxlbmd0aCBjaGVja3MuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gaW52b2tlIGBpdGVyYXRlZWAuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzdWx0cy5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VUaW1lcyhuLCBpdGVyYXRlZSkge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICByZXN1bHQgPSBBcnJheShuKTtcblx0XG5cdCAgd2hpbGUgKCsraW5kZXggPCBuKSB7XG5cdCAgICByZXN1bHRbaW5kZXhdID0gaXRlcmF0ZWUoaW5kZXgpO1xuXHQgIH1cblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VUaW1lcztcblxuXG4vKioqLyB9LFxuLyogOTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBTeW1ib2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KSxcblx0ICAgIGlzU3ltYm9sID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdFxuXHQvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cblx0dmFyIElORklOSVRZID0gMSAvIDA7XG5cdFxuXHQvKiogVXNlZCB0byBjb252ZXJ0IHN5bWJvbHMgdG8gcHJpbWl0aXZlcyBhbmQgc3RyaW5ncy4gKi9cblx0dmFyIHN5bWJvbFByb3RvID0gU3ltYm9sID8gU3ltYm9sLnByb3RvdHlwZSA6IHVuZGVmaW5lZCxcblx0ICAgIHN5bWJvbFRvU3RyaW5nID0gc3ltYm9sUHJvdG8gPyBzeW1ib2xQcm90by50b1N0cmluZyA6IHVuZGVmaW5lZDtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50b1N0cmluZ2Agd2hpY2ggZG9lc24ndCBjb252ZXJ0IG51bGxpc2hcblx0ICogdmFsdWVzIHRvIGVtcHR5IHN0cmluZ3MuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VUb1N0cmluZyh2YWx1ZSkge1xuXHQgIC8vIEV4aXQgZWFybHkgZm9yIHN0cmluZ3MgdG8gYXZvaWQgYSBwZXJmb3JtYW5jZSBoaXQgaW4gc29tZSBlbnZpcm9ubWVudHMuXG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG5cdCAgICByZXR1cm4gc3ltYm9sVG9TdHJpbmcgPyBzeW1ib2xUb1N0cmluZy5jYWxsKHZhbHVlKSA6ICcnO1xuXHQgIH1cblx0ICB2YXIgcmVzdWx0ID0gKHZhbHVlICsgJycpO1xuXHQgIHJldHVybiAocmVzdWx0ID09ICcwJyAmJiAoMSAvIHZhbHVlKSA9PSAtSU5GSU5JVFkpID8gJy0wJyA6IHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlVG9TdHJpbmc7XG5cblxuLyoqKi8gfSxcbi8qIDEwMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgZ2xvYmFsIG9iamVjdC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtudWxsfE9iamVjdH0gUmV0dXJucyBgdmFsdWVgIGlmIGl0J3MgYSBnbG9iYWwgb2JqZWN0LCBlbHNlIGBudWxsYC5cblx0ICovXG5cdGZ1bmN0aW9uIGNoZWNrR2xvYmFsKHZhbHVlKSB7XG5cdCAgcmV0dXJuICh2YWx1ZSAmJiB2YWx1ZS5PYmplY3QgPT09IE9iamVjdCkgPyB2YWx1ZSA6IG51bGw7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gY2hlY2tHbG9iYWw7XG5cblxuLyoqKi8gfSxcbi8qIDEwMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHJvb3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IG92ZXJyZWFjaGluZyBjb3JlLWpzIHNoaW1zLiAqL1xuXHR2YXIgY29yZUpzRGF0YSA9IHJvb3RbJ19fY29yZS1qc19zaGFyZWRfXyddO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBjb3JlSnNEYXRhO1xuXG5cbi8qKiovIH0sXG4vKiAxMDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBTeW1ib2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KSxcblx0ICAgIFVpbnQ4QXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgzKSxcblx0ICAgIGVxdWFsQXJyYXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCksXG5cdCAgICBtYXBUb0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjkpLFxuXHQgICAgc2V0VG9BcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMyKTtcblx0XG5cdC8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNvbXBhcmlzb24gc3R5bGVzLiAqL1xuXHR2YXIgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyA9IDEsXG5cdCAgICBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cdFxuXHQvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG5cdHZhciBib29sVGFnID0gJ1tvYmplY3QgQm9vbGVhbl0nLFxuXHQgICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcblx0ICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJyxcblx0ICAgIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuXHQgICAgbnVtYmVyVGFnID0gJ1tvYmplY3QgTnVtYmVyXScsXG5cdCAgICByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJyxcblx0ICAgIHNldFRhZyA9ICdbb2JqZWN0IFNldF0nLFxuXHQgICAgc3RyaW5nVGFnID0gJ1tvYmplY3QgU3RyaW5nXScsXG5cdCAgICBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblx0XG5cdHZhciBhcnJheUJ1ZmZlclRhZyA9ICdbb2JqZWN0IEFycmF5QnVmZmVyXScsXG5cdCAgICBkYXRhVmlld1RhZyA9ICdbb2JqZWN0IERhdGFWaWV3XSc7XG5cdFxuXHQvKiogVXNlZCB0byBjb252ZXJ0IHN5bWJvbHMgdG8gcHJpbWl0aXZlcyBhbmQgc3RyaW5ncy4gKi9cblx0dmFyIHN5bWJvbFByb3RvID0gU3ltYm9sID8gU3ltYm9sLnByb3RvdHlwZSA6IHVuZGVmaW5lZCxcblx0ICAgIHN5bWJvbFZhbHVlT2YgPSBzeW1ib2xQcm90byA/IHN5bWJvbFByb3RvLnZhbHVlT2YgOiB1bmRlZmluZWQ7XG5cdFxuXHQvKipcblx0ICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBjb21wYXJpbmcgb2JqZWN0cyBvZlxuXHQgKiB0aGUgc2FtZSBgdG9TdHJpbmdUYWdgLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBvbmx5IHN1cHBvcnRzIGNvbXBhcmluZyB2YWx1ZXMgd2l0aCB0YWdzIG9mXG5cdCAqIGBCb29sZWFuYCwgYERhdGVgLCBgRXJyb3JgLCBgTnVtYmVyYCwgYFJlZ0V4cGAsIG9yIGBTdHJpbmdgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtzdHJpbmd9IHRhZyBUaGUgYHRvU3RyaW5nVGFnYCBvZiB0aGUgb2JqZWN0cyB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cblx0ICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgb2YgY29tcGFyaXNvbiBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGBcblx0ICogIGZvciBtb3JlIGRldGFpbHMuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzdGFjayBUcmFja3MgdHJhdmVyc2VkIGBvYmplY3RgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCB0YWcsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcblx0ICBzd2l0Y2ggKHRhZykge1xuXHQgICAgY2FzZSBkYXRhVmlld1RhZzpcblx0ICAgICAgaWYgKChvYmplY3QuYnl0ZUxlbmd0aCAhPSBvdGhlci5ieXRlTGVuZ3RoKSB8fFxuXHQgICAgICAgICAgKG9iamVjdC5ieXRlT2Zmc2V0ICE9IG90aGVyLmJ5dGVPZmZzZXQpKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICAgIG9iamVjdCA9IG9iamVjdC5idWZmZXI7XG5cdCAgICAgIG90aGVyID0gb3RoZXIuYnVmZmVyO1xuXHRcblx0ICAgIGNhc2UgYXJyYXlCdWZmZXJUYWc6XG5cdCAgICAgIGlmICgob2JqZWN0LmJ5dGVMZW5ndGggIT0gb3RoZXIuYnl0ZUxlbmd0aCkgfHxcblx0ICAgICAgICAgICFlcXVhbEZ1bmMobmV3IFVpbnQ4QXJyYXkob2JqZWN0KSwgbmV3IFVpbnQ4QXJyYXkob3RoZXIpKSkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0XG5cdCAgICBjYXNlIGJvb2xUYWc6XG5cdCAgICBjYXNlIGRhdGVUYWc6XG5cdCAgICAgIC8vIENvZXJjZSBkYXRlcyBhbmQgYm9vbGVhbnMgdG8gbnVtYmVycywgZGF0ZXMgdG8gbWlsbGlzZWNvbmRzIGFuZFxuXHQgICAgICAvLyBib29sZWFucyB0byBgMWAgb3IgYDBgIHRyZWF0aW5nIGludmFsaWQgZGF0ZXMgY29lcmNlZCB0byBgTmFOYCBhc1xuXHQgICAgICAvLyBub3QgZXF1YWwuXG5cdCAgICAgIHJldHVybiArb2JqZWN0ID09ICtvdGhlcjtcblx0XG5cdCAgICBjYXNlIGVycm9yVGFnOlxuXHQgICAgICByZXR1cm4gb2JqZWN0Lm5hbWUgPT0gb3RoZXIubmFtZSAmJiBvYmplY3QubWVzc2FnZSA9PSBvdGhlci5tZXNzYWdlO1xuXHRcblx0ICAgIGNhc2UgbnVtYmVyVGFnOlxuXHQgICAgICAvLyBUcmVhdCBgTmFOYCB2cy4gYE5hTmAgYXMgZXF1YWwuXG5cdCAgICAgIHJldHVybiAob2JqZWN0ICE9ICtvYmplY3QpID8gb3RoZXIgIT0gK290aGVyIDogb2JqZWN0ID09ICtvdGhlcjtcblx0XG5cdCAgICBjYXNlIHJlZ2V4cFRhZzpcblx0ICAgIGNhc2Ugc3RyaW5nVGFnOlxuXHQgICAgICAvLyBDb2VyY2UgcmVnZXhlcyB0byBzdHJpbmdzIGFuZCB0cmVhdCBzdHJpbmdzLCBwcmltaXRpdmVzIGFuZCBvYmplY3RzLFxuXHQgICAgICAvLyBhcyBlcXVhbC4gU2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1yZWdleHAucHJvdG90eXBlLnRvc3RyaW5nXG5cdCAgICAgIC8vIGZvciBtb3JlIGRldGFpbHMuXG5cdCAgICAgIHJldHVybiBvYmplY3QgPT0gKG90aGVyICsgJycpO1xuXHRcblx0ICAgIGNhc2UgbWFwVGFnOlxuXHQgICAgICB2YXIgY29udmVydCA9IG1hcFRvQXJyYXk7XG5cdFxuXHQgICAgY2FzZSBzZXRUYWc6XG5cdCAgICAgIHZhciBpc1BhcnRpYWwgPSBiaXRtYXNrICYgUEFSVElBTF9DT01QQVJFX0ZMQUc7XG5cdCAgICAgIGNvbnZlcnQgfHwgKGNvbnZlcnQgPSBzZXRUb0FycmF5KTtcblx0XG5cdCAgICAgIGlmIChvYmplY3Quc2l6ZSAhPSBvdGhlci5zaXplICYmICFpc1BhcnRpYWwpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuXHQgICAgICB2YXIgc3RhY2tlZCA9IHN0YWNrLmdldChvYmplY3QpO1xuXHQgICAgICBpZiAoc3RhY2tlZCkge1xuXHQgICAgICAgIHJldHVybiBzdGFja2VkID09IG90aGVyO1xuXHQgICAgICB9XG5cdCAgICAgIGJpdG1hc2sgfD0gVU5PUkRFUkVEX0NPTVBBUkVfRkxBRztcblx0ICAgICAgc3RhY2suc2V0KG9iamVjdCwgb3RoZXIpO1xuXHRcblx0ICAgICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG5cdCAgICAgIHJldHVybiBlcXVhbEFycmF5cyhjb252ZXJ0KG9iamVjdCksIGNvbnZlcnQob3RoZXIpLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKTtcblx0XG5cdCAgICBjYXNlIHN5bWJvbFRhZzpcblx0ICAgICAgaWYgKHN5bWJvbFZhbHVlT2YpIHtcblx0ICAgICAgICByZXR1cm4gc3ltYm9sVmFsdWVPZi5jYWxsKG9iamVjdCkgPT0gc3ltYm9sVmFsdWVPZi5jYWxsKG90aGVyKTtcblx0ICAgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gZmFsc2U7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZXF1YWxCeVRhZztcblxuXG4vKioqLyB9LFxuLyogMTAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZUhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpLFxuXHQgICAga2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHRcblx0LyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG5cdHZhciBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cdFxuXHQvKipcblx0ICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBvYmplY3RzIHdpdGggc3VwcG9ydCBmb3Jcblx0ICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIG9mIGNvbXBhcmlzb24gZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgXG5cdCAqICBmb3IgbW9yZSBkZXRhaWxzLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gc3RhY2sgVHJhY2tzIHRyYXZlcnNlZCBgb2JqZWN0YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGVxdWFsT2JqZWN0cyhvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSB7XG5cdCAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRyxcblx0ICAgICAgb2JqUHJvcHMgPSBrZXlzKG9iamVjdCksXG5cdCAgICAgIG9iakxlbmd0aCA9IG9ialByb3BzLmxlbmd0aCxcblx0ICAgICAgb3RoUHJvcHMgPSBrZXlzKG90aGVyKSxcblx0ICAgICAgb3RoTGVuZ3RoID0gb3RoUHJvcHMubGVuZ3RoO1xuXHRcblx0ICBpZiAob2JqTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhaXNQYXJ0aWFsKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciBpbmRleCA9IG9iakxlbmd0aDtcblx0ICB3aGlsZSAoaW5kZXgtLSkge1xuXHQgICAgdmFyIGtleSA9IG9ialByb3BzW2luZGV4XTtcblx0ICAgIGlmICghKGlzUGFydGlhbCA/IGtleSBpbiBvdGhlciA6IGJhc2VIYXMob3RoZXIsIGtleSkpKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuXHQgIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KG9iamVjdCk7XG5cdCAgaWYgKHN0YWNrZWQpIHtcblx0ICAgIHJldHVybiBzdGFja2VkID09IG90aGVyO1xuXHQgIH1cblx0ICB2YXIgcmVzdWx0ID0gdHJ1ZTtcblx0ICBzdGFjay5zZXQob2JqZWN0LCBvdGhlcik7XG5cdFxuXHQgIHZhciBza2lwQ3RvciA9IGlzUGFydGlhbDtcblx0ICB3aGlsZSAoKytpbmRleCA8IG9iakxlbmd0aCkge1xuXHQgICAga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuXHQgICAgdmFyIG9ialZhbHVlID0gb2JqZWN0W2tleV0sXG5cdCAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltrZXldO1xuXHRcblx0ICAgIGlmIChjdXN0b21pemVyKSB7XG5cdCAgICAgIHZhciBjb21wYXJlZCA9IGlzUGFydGlhbFxuXHQgICAgICAgID8gY3VzdG9taXplcihvdGhWYWx1ZSwgb2JqVmFsdWUsIGtleSwgb3RoZXIsIG9iamVjdCwgc3RhY2spXG5cdCAgICAgICAgOiBjdXN0b21pemVyKG9ialZhbHVlLCBvdGhWYWx1ZSwga2V5LCBvYmplY3QsIG90aGVyLCBzdGFjayk7XG5cdCAgICB9XG5cdCAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cblx0ICAgIGlmICghKGNvbXBhcmVkID09PSB1bmRlZmluZWRcblx0ICAgICAgICAgID8gKG9ialZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMob2JqVmFsdWUsIG90aFZhbHVlLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykpXG5cdCAgICAgICAgICA6IGNvbXBhcmVkXG5cdCAgICAgICAgKSkge1xuXHQgICAgICByZXN1bHQgPSBmYWxzZTtcblx0ICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdCAgICBza2lwQ3RvciB8fCAoc2tpcEN0b3IgPSBrZXkgPT0gJ2NvbnN0cnVjdG9yJyk7XG5cdCAgfVxuXHQgIGlmIChyZXN1bHQgJiYgIXNraXBDdG9yKSB7XG5cdCAgICB2YXIgb2JqQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3Rvcixcblx0ICAgICAgICBvdGhDdG9yID0gb3RoZXIuY29uc3RydWN0b3I7XG5cdFxuXHQgICAgLy8gTm9uIGBPYmplY3RgIG9iamVjdCBpbnN0YW5jZXMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1YWwuXG5cdCAgICBpZiAob2JqQ3RvciAhPSBvdGhDdG9yICYmXG5cdCAgICAgICAgKCdjb25zdHJ1Y3RvcicgaW4gb2JqZWN0ICYmICdjb25zdHJ1Y3RvcicgaW4gb3RoZXIpICYmXG5cdCAgICAgICAgISh0eXBlb2Ygb2JqQ3RvciA9PSAnZnVuY3Rpb24nICYmIG9iakN0b3IgaW5zdGFuY2VvZiBvYmpDdG9yICYmXG5cdCAgICAgICAgICB0eXBlb2Ygb3RoQ3RvciA9PSAnZnVuY3Rpb24nICYmIG90aEN0b3IgaW5zdGFuY2VvZiBvdGhDdG9yKSkge1xuXHQgICAgICByZXN1bHQgPSBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgc3RhY2tbJ2RlbGV0ZSddKG9iamVjdCk7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBlcXVhbE9iamVjdHM7XG5cblxuLyoqKi8gfSxcbi8qIDEwNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIFwibGVuZ3RoXCIgcHJvcGVydHkgdmFsdWUgb2YgYG9iamVjdGAuXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gYXZvaWQgYVxuXHQgKiBbSklUIGJ1Z10oaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE0Mjc5MikgdGhhdCBhZmZlY3RzXG5cdCAqIFNhZmFyaSBvbiBhdCBsZWFzdCBpT1MgOC4xLTguMyBBUk02NC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgXCJsZW5ndGhcIiB2YWx1ZS5cblx0ICovXG5cdHZhciBnZXRMZW5ndGggPSBiYXNlUHJvcGVydHkoJ2xlbmd0aCcpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXRMZW5ndGg7XG5cblxuLyoqKi8gfSxcbi8qIDEwNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzU3RyaWN0Q29tcGFyYWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpLFxuXHQgICAga2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIHByb3BlcnR5IG5hbWVzLCB2YWx1ZXMsIGFuZCBjb21wYXJlIGZsYWdzIG9mIGBvYmplY3RgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbWF0Y2ggZGF0YSBvZiBgb2JqZWN0YC5cblx0ICovXG5cdGZ1bmN0aW9uIGdldE1hdGNoRGF0YShvYmplY3QpIHtcblx0ICB2YXIgcmVzdWx0ID0ga2V5cyhvYmplY3QpLFxuXHQgICAgICBsZW5ndGggPSByZXN1bHQubGVuZ3RoO1xuXHRcblx0ICB3aGlsZSAobGVuZ3RoLS0pIHtcblx0ICAgIHZhciBrZXkgPSByZXN1bHRbbGVuZ3RoXSxcblx0ICAgICAgICB2YWx1ZSA9IG9iamVjdFtrZXldO1xuXHRcblx0ICAgIHJlc3VsdFtsZW5ndGhdID0gW2tleSwgdmFsdWUsIGlzU3RyaWN0Q29tcGFyYWJsZSh2YWx1ZSldO1xuXHQgIH1cblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGdldE1hdGNoRGF0YTtcblxuXG4vKioqLyB9LFxuLyogMTA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG5cdHZhciBuYXRpdmVHZXRQcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgYFtbUHJvdG90eXBlXV1gIG9mIGB2YWx1ZWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuXHQgKiBAcmV0dXJucyB7bnVsbHxPYmplY3R9IFJldHVybnMgdGhlIGBbW1Byb3RvdHlwZV1dYC5cblx0ICovXG5cdGZ1bmN0aW9uIGdldFByb3RvdHlwZSh2YWx1ZSkge1xuXHQgIHJldHVybiBuYXRpdmVHZXRQcm90b3R5cGUoT2JqZWN0KHZhbHVlKSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZ2V0UHJvdG90eXBlO1xuXG5cbi8qKiovIH0sXG4vKiAxMDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBEYXRhVmlldyA9IF9fd2VicGFja19yZXF1aXJlX18oNzgpLFxuXHQgICAgTWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMiksXG5cdCAgICBQcm9taXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MCksXG5cdCAgICBTZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgxKSxcblx0ICAgIFdlYWtNYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg0KSxcblx0ICAgIHRvU291cmNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSk7XG5cdFxuXHQvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG5cdHZhciBtYXBUYWcgPSAnW29iamVjdCBNYXBdJyxcblx0ICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nLFxuXHQgICAgcHJvbWlzZVRhZyA9ICdbb2JqZWN0IFByb21pc2VdJyxcblx0ICAgIHNldFRhZyA9ICdbb2JqZWN0IFNldF0nLFxuXHQgICAgd2Vha01hcFRhZyA9ICdbb2JqZWN0IFdlYWtNYXBdJztcblx0XG5cdHZhciBkYXRhVmlld1RhZyA9ICdbb2JqZWN0IERhdGFWaWV3XSc7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogVXNlZCB0byByZXNvbHZlIHRoZVxuXHQgKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcblx0ICogb2YgdmFsdWVzLlxuXHQgKi9cblx0dmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgbWFwcywgc2V0cywgYW5kIHdlYWttYXBzLiAqL1xuXHR2YXIgZGF0YVZpZXdDdG9yU3RyaW5nID0gdG9Tb3VyY2UoRGF0YVZpZXcpLFxuXHQgICAgbWFwQ3RvclN0cmluZyA9IHRvU291cmNlKE1hcCksXG5cdCAgICBwcm9taXNlQ3RvclN0cmluZyA9IHRvU291cmNlKFByb21pc2UpLFxuXHQgICAgc2V0Q3RvclN0cmluZyA9IHRvU291cmNlKFNldCksXG5cdCAgICB3ZWFrTWFwQ3RvclN0cmluZyA9IHRvU291cmNlKFdlYWtNYXApO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIGB0b1N0cmluZ1RhZ2Agb2YgYHZhbHVlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGB0b1N0cmluZ1RhZ2AuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRUYWcodmFsdWUpIHtcblx0ICByZXR1cm4gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG5cdH1cblx0XG5cdC8vIEZhbGxiYWNrIGZvciBkYXRhIHZpZXdzLCBtYXBzLCBzZXRzLCBhbmQgd2VhayBtYXBzIGluIElFIDExLFxuXHQvLyBmb3IgZGF0YSB2aWV3cyBpbiBFZGdlLCBhbmQgcHJvbWlzZXMgaW4gTm9kZS5qcy5cblx0aWYgKChEYXRhVmlldyAmJiBnZXRUYWcobmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcigxKSkpICE9IGRhdGFWaWV3VGFnKSB8fFxuXHQgICAgKE1hcCAmJiBnZXRUYWcobmV3IE1hcCkgIT0gbWFwVGFnKSB8fFxuXHQgICAgKFByb21pc2UgJiYgZ2V0VGFnKFByb21pc2UucmVzb2x2ZSgpKSAhPSBwcm9taXNlVGFnKSB8fFxuXHQgICAgKFNldCAmJiBnZXRUYWcobmV3IFNldCkgIT0gc2V0VGFnKSB8fFxuXHQgICAgKFdlYWtNYXAgJiYgZ2V0VGFnKG5ldyBXZWFrTWFwKSAhPSB3ZWFrTWFwVGFnKSkge1xuXHQgIGdldFRhZyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICB2YXIgcmVzdWx0ID0gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSksXG5cdCAgICAgICAgQ3RvciA9IHJlc3VsdCA9PSBvYmplY3RUYWcgPyB2YWx1ZS5jb25zdHJ1Y3RvciA6IHVuZGVmaW5lZCxcblx0ICAgICAgICBjdG9yU3RyaW5nID0gQ3RvciA/IHRvU291cmNlKEN0b3IpIDogdW5kZWZpbmVkO1xuXHRcblx0ICAgIGlmIChjdG9yU3RyaW5nKSB7XG5cdCAgICAgIHN3aXRjaCAoY3RvclN0cmluZykge1xuXHQgICAgICAgIGNhc2UgZGF0YVZpZXdDdG9yU3RyaW5nOiByZXR1cm4gZGF0YVZpZXdUYWc7XG5cdCAgICAgICAgY2FzZSBtYXBDdG9yU3RyaW5nOiByZXR1cm4gbWFwVGFnO1xuXHQgICAgICAgIGNhc2UgcHJvbWlzZUN0b3JTdHJpbmc6IHJldHVybiBwcm9taXNlVGFnO1xuXHQgICAgICAgIGNhc2Ugc2V0Q3RvclN0cmluZzogcmV0dXJuIHNldFRhZztcblx0ICAgICAgICBjYXNlIHdlYWtNYXBDdG9yU3RyaW5nOiByZXR1cm4gd2Vha01hcFRhZztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGdldFRhZztcblxuXG4vKioqLyB9LFxuLyogMTA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogR2V0cyB0aGUgdmFsdWUgYXQgYGtleWAgb2YgYG9iamVjdGAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0VmFsdWUob2JqZWN0LCBrZXkpIHtcblx0ICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXRWYWx1ZTtcblxuXG4vKioqLyB9LFxuLyogMTA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgY2FzdFBhdGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KSxcblx0ICAgIGlzQXJndW1lbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyksXG5cdCAgICBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KSxcblx0ICAgIGlzSW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKSxcblx0ICAgIGlzS2V5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMiksXG5cdCAgICBpc0xlbmd0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpLFxuXHQgICAgaXNTdHJpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KSxcblx0ICAgIHRvS2V5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGBwYXRoYCBleGlzdHMgb24gYG9iamVjdGAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggdG8gY2hlY2suXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGhhc0Z1bmMgVGhlIGZ1bmN0aW9uIHRvIGNoZWNrIHByb3BlcnRpZXMuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgcGF0aGAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNQYXRoKG9iamVjdCwgcGF0aCwgaGFzRnVuYykge1xuXHQgIHBhdGggPSBpc0tleShwYXRoLCBvYmplY3QpID8gW3BhdGhdIDogY2FzdFBhdGgocGF0aCk7XG5cdFxuXHQgIHZhciByZXN1bHQsXG5cdCAgICAgIGluZGV4ID0gLTEsXG5cdCAgICAgIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xuXHRcblx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgdmFyIGtleSA9IHRvS2V5KHBhdGhbaW5kZXhdKTtcblx0ICAgIGlmICghKHJlc3VsdCA9IG9iamVjdCAhPSBudWxsICYmIGhhc0Z1bmMob2JqZWN0LCBrZXkpKSkge1xuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICAgIG9iamVjdCA9IG9iamVjdFtrZXldO1xuXHQgIH1cblx0ICBpZiAocmVzdWx0KSB7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0ICB2YXIgbGVuZ3RoID0gb2JqZWN0ID8gb2JqZWN0Lmxlbmd0aCA6IDA7XG5cdCAgcmV0dXJuICEhbGVuZ3RoICYmIGlzTGVuZ3RoKGxlbmd0aCkgJiYgaXNJbmRleChrZXksIGxlbmd0aCkgJiZcblx0ICAgIChpc0FycmF5KG9iamVjdCkgfHwgaXNTdHJpbmcob2JqZWN0KSB8fCBpc0FyZ3VtZW50cyhvYmplY3QpKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBoYXNQYXRoO1xuXG5cbi8qKiovIH0sXG4vKiAxMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBuYXRpdmVDcmVhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBoYXNoLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBjbGVhclxuXHQgKiBAbWVtYmVyT2YgSGFzaFxuXHQgKi9cblx0ZnVuY3Rpb24gaGFzaENsZWFyKCkge1xuXHQgIHRoaXMuX19kYXRhX18gPSBuYXRpdmVDcmVhdGUgPyBuYXRpdmVDcmVhdGUobnVsbCkgOiB7fTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBoYXNoQ2xlYXI7XG5cblxuLyoqKi8gfSxcbi8qIDExMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBoYXNoLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBkZWxldGVcblx0ICogQG1lbWJlck9mIEhhc2hcblx0ICogQHBhcmFtIHtPYmplY3R9IGhhc2ggVGhlIGhhc2ggdG8gbW9kaWZ5LlxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaGFzaERlbGV0ZShrZXkpIHtcblx0ICByZXR1cm4gdGhpcy5oYXMoa2V5KSAmJiBkZWxldGUgdGhpcy5fX2RhdGFfX1trZXldO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGhhc2hEZWxldGU7XG5cblxuLyoqKi8gfSxcbi8qIDExMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIG5hdGl2ZUNyZWF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0LyoqIFVzZWQgdG8gc3RhbmQtaW4gZm9yIGB1bmRlZmluZWRgIGhhc2ggdmFsdWVzLiAqL1xuXHR2YXIgSEFTSF9VTkRFRklORUQgPSAnX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyc7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cblx0dmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgaGFzaCB2YWx1ZSBmb3IgYGtleWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGdldFxuXHQgKiBAbWVtYmVyT2YgSGFzaFxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gaGFzaEdldChrZXkpIHtcblx0ICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG5cdCAgaWYgKG5hdGl2ZUNyZWF0ZSkge1xuXHQgICAgdmFyIHJlc3VsdCA9IGRhdGFba2V5XTtcblx0ICAgIHJldHVybiByZXN1bHQgPT09IEhBU0hfVU5ERUZJTkVEID8gdW5kZWZpbmVkIDogcmVzdWx0O1xuXHQgIH1cblx0ICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLCBrZXkpID8gZGF0YVtrZXldIDogdW5kZWZpbmVkO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGhhc2hHZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDExMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIG5hdGl2ZUNyZWF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBhIGhhc2ggdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgaGFzXG5cdCAqIEBtZW1iZXJPZiBIYXNoXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNoSGFzKGtleSkge1xuXHQgIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcblx0ICByZXR1cm4gbmF0aXZlQ3JlYXRlID8gZGF0YVtrZXldICE9PSB1bmRlZmluZWQgOiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaGFzaEhhcztcblxuXG4vKioqLyB9LFxuLyogMTE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgbmF0aXZlQ3JlYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHQvKiogVXNlZCB0byBzdGFuZC1pbiBmb3IgYHVuZGVmaW5lZGAgaGFzaCB2YWx1ZXMuICovXG5cdHZhciBIQVNIX1VOREVGSU5FRCA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJztcblx0XG5cdC8qKlxuXHQgKiBTZXRzIHRoZSBoYXNoIGBrZXlgIHRvIGB2YWx1ZWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIHNldFxuXHQgKiBAbWVtYmVyT2YgSGFzaFxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBoYXNoIGluc3RhbmNlLlxuXHQgKi9cblx0ZnVuY3Rpb24gaGFzaFNldChrZXksIHZhbHVlKSB7XG5cdCAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuXHQgIGRhdGFba2V5XSA9IChuYXRpdmVDcmVhdGUgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkgPyBIQVNIX1VOREVGSU5FRCA6IHZhbHVlO1xuXHQgIHJldHVybiB0aGlzO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGhhc2hTZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDExNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VUaW1lcyA9IF9fd2VicGFja19yZXF1aXJlX18oOTgpLFxuXHQgICAgaXNBcmd1bWVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KSxcblx0ICAgIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuXHQgICAgaXNMZW5ndGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KSxcblx0ICAgIGlzU3RyaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBhcnJheSBvZiBpbmRleCBrZXlzIGZvciBgb2JqZWN0YCB2YWx1ZXMgb2YgYXJyYXlzLFxuXHQgKiBgYXJndW1lbnRzYCBvYmplY3RzLCBhbmQgc3RyaW5ncywgb3RoZXJ3aXNlIGBudWxsYCBpcyByZXR1cm5lZC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcmV0dXJucyB7QXJyYXl8bnVsbH0gUmV0dXJucyBpbmRleCBrZXlzLCBlbHNlIGBudWxsYC5cblx0ICovXG5cdGZ1bmN0aW9uIGluZGV4S2V5cyhvYmplY3QpIHtcblx0ICB2YXIgbGVuZ3RoID0gb2JqZWN0ID8gb2JqZWN0Lmxlbmd0aCA6IHVuZGVmaW5lZDtcblx0ICBpZiAoaXNMZW5ndGgobGVuZ3RoKSAmJlxuXHQgICAgICAoaXNBcnJheShvYmplY3QpIHx8IGlzU3RyaW5nKG9iamVjdCkgfHwgaXNBcmd1bWVudHMob2JqZWN0KSkpIHtcblx0ICAgIHJldHVybiBiYXNlVGltZXMobGVuZ3RoLCBTdHJpbmcpO1xuXHQgIH1cblx0ICByZXR1cm4gbnVsbDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpbmRleEtleXM7XG5cblxuLyoqKi8gfSxcbi8qIDExNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciB1c2UgYXMgdW5pcXVlIG9iamVjdCBrZXkuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNLZXlhYmxlKHZhbHVlKSB7XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdCAgcmV0dXJuICh0eXBlID09ICdzdHJpbmcnIHx8IHR5cGUgPT0gJ251bWJlcicgfHwgdHlwZSA9PSAnc3ltYm9sJyB8fCB0eXBlID09ICdib29sZWFuJylcblx0ICAgID8gKHZhbHVlICE9PSAnX19wcm90b19fJylcblx0ICAgIDogKHZhbHVlID09PSBudWxsKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0tleWFibGU7XG5cblxuLyoqKi8gfSxcbi8qIDExNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGNvcmVKc0RhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMSk7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgbWV0aG9kcyBtYXNxdWVyYWRpbmcgYXMgbmF0aXZlLiAqL1xuXHR2YXIgbWFza1NyY0tleSA9IChmdW5jdGlvbigpIHtcblx0ICB2YXIgdWlkID0gL1teLl0rJC8uZXhlYyhjb3JlSnNEYXRhICYmIGNvcmVKc0RhdGEua2V5cyAmJiBjb3JlSnNEYXRhLmtleXMuSUVfUFJPVE8gfHwgJycpO1xuXHQgIHJldHVybiB1aWQgPyAoJ1N5bWJvbChzcmMpXzEuJyArIHVpZCkgOiAnJztcblx0fSgpKTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYGZ1bmNgIGhhcyBpdHMgc291cmNlIG1hc2tlZC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgZnVuY2AgaXMgbWFza2VkLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc01hc2tlZChmdW5jKSB7XG5cdCAgcmV0dXJuICEhbWFza1NyY0tleSAmJiAobWFza1NyY0tleSBpbiBmdW5jKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc01hc2tlZDtcblxuXG4vKioqLyB9LFxuLyogMTE4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGEgcHJvdG90eXBlIG9iamVjdC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvdG90eXBlLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1Byb3RvdHlwZSh2YWx1ZSkge1xuXHQgIHZhciBDdG9yID0gdmFsdWUgJiYgdmFsdWUuY29uc3RydWN0b3IsXG5cdCAgICAgIHByb3RvID0gKHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUpIHx8IG9iamVjdFByb3RvO1xuXHRcblx0ICByZXR1cm4gdmFsdWUgPT09IHByb3RvO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzUHJvdG90eXBlO1xuXG5cbi8qKiovIH0sXG4vKiAxMTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBsaXN0IGNhY2hlLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBjbGVhclxuXHQgKiBAbWVtYmVyT2YgTGlzdENhY2hlXG5cdCAqL1xuXHRmdW5jdGlvbiBsaXN0Q2FjaGVDbGVhcigpIHtcblx0ICB0aGlzLl9fZGF0YV9fID0gW107XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbGlzdENhY2hlQ2xlYXI7XG5cblxuLyoqKi8gfSxcbi8qIDEyMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGFzc29jSW5kZXhPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTtcblx0XG5cdC8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xuXHR2YXIgc3BsaWNlID0gYXJyYXlQcm90by5zcGxpY2U7XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGxpc3QgY2FjaGUuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGRlbGV0ZVxuXHQgKiBAbWVtYmVyT2YgTGlzdENhY2hlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBsaXN0Q2FjaGVEZWxldGUoa2V5KSB7XG5cdCAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuXHQgICAgICBpbmRleCA9IGFzc29jSW5kZXhPZihkYXRhLCBrZXkpO1xuXHRcblx0ICBpZiAoaW5kZXggPCAwKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciBsYXN0SW5kZXggPSBkYXRhLmxlbmd0aCAtIDE7XG5cdCAgaWYgKGluZGV4ID09IGxhc3RJbmRleCkge1xuXHQgICAgZGF0YS5wb3AoKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgc3BsaWNlLmNhbGwoZGF0YSwgaW5kZXgsIDEpO1xuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBsaXN0Q2FjaGVEZWxldGU7XG5cblxuLyoqKi8gfSxcbi8qIDEyMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGFzc29jSW5kZXhPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIGxpc3QgY2FjaGUgdmFsdWUgZm9yIGBrZXlgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBnZXRcblx0ICogQG1lbWJlck9mIExpc3RDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gbGlzdENhY2hlR2V0KGtleSkge1xuXHQgIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcblx0ICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblx0XG5cdCAgcmV0dXJuIGluZGV4IDwgMCA/IHVuZGVmaW5lZCA6IGRhdGFbaW5kZXhdWzFdO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGxpc3RDYWNoZUdldDtcblxuXG4vKioqLyB9LFxuLyogMTIyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYXNzb2NJbmRleE9mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGEgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBoYXNcblx0ICogQG1lbWJlck9mIExpc3RDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gbGlzdENhY2hlSGFzKGtleSkge1xuXHQgIHJldHVybiBhc3NvY0luZGV4T2YodGhpcy5fX2RhdGFfXywga2V5KSA+IC0xO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGxpc3RDYWNoZUhhcztcblxuXG4vKioqLyB9LFxuLyogMTIzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYXNzb2NJbmRleE9mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHQvKipcblx0ICogU2V0cyB0aGUgbGlzdCBjYWNoZSBga2V5YCB0byBgdmFsdWVgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBzZXRcblx0ICogQG1lbWJlck9mIExpc3RDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBsaXN0IGNhY2hlIGluc3RhbmNlLlxuXHQgKi9cblx0ZnVuY3Rpb24gbGlzdENhY2hlU2V0KGtleSwgdmFsdWUpIHtcblx0ICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG5cdCAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cdFxuXHQgIGlmIChpbmRleCA8IDApIHtcblx0ICAgIGRhdGEucHVzaChba2V5LCB2YWx1ZV0pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBkYXRhW2luZGV4XVsxXSA9IHZhbHVlO1xuXHQgIH1cblx0ICByZXR1cm4gdGhpcztcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBsaXN0Q2FjaGVTZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDEyNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIEhhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KSxcblx0ICAgIExpc3RDYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oOSksXG5cdCAgICBNYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBtYXAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGNsZWFyXG5cdCAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwQ2FjaGVDbGVhcigpIHtcblx0ICB0aGlzLl9fZGF0YV9fID0ge1xuXHQgICAgJ2hhc2gnOiBuZXcgSGFzaCxcblx0ICAgICdtYXAnOiBuZXcgKE1hcCB8fCBMaXN0Q2FjaGUpLFxuXHQgICAgJ3N0cmluZyc6IG5ldyBIYXNoXG5cdCAgfTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZUNsZWFyO1xuXG5cbi8qKiovIH0sXG4vKiAxMjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXRNYXBEYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIG1hcC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgZGVsZXRlXG5cdCAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwQ2FjaGVEZWxldGUoa2V5KSB7XG5cdCAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KVsnZGVsZXRlJ10oa2V5KTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZURlbGV0ZTtcblxuXG4vKioqLyB9LFxuLyogMTI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2V0TWFwRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIG1hcCB2YWx1ZSBmb3IgYGtleWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGdldFxuXHQgKiBAbWVtYmVyT2YgTWFwQ2FjaGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcENhY2hlR2V0KGtleSkge1xuXHQgIHJldHVybiBnZXRNYXBEYXRhKHRoaXMsIGtleSkuZ2V0KGtleSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbWFwQ2FjaGVHZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDEyNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldE1hcERhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYSBtYXAgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgaGFzXG5cdCAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwQ2FjaGVIYXMoa2V5KSB7XG5cdCAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KS5oYXMoa2V5KTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZUhhcztcblxuXG4vKioqLyB9LFxuLyogMTI4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2V0TWFwRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0LyoqXG5cdCAqIFNldHMgdGhlIG1hcCBga2V5YCB0byBgdmFsdWVgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBzZXRcblx0ICogQG1lbWJlck9mIE1hcENhY2hlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG1hcCBjYWNoZSBpbnN0YW5jZS5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcENhY2hlU2V0KGtleSwgdmFsdWUpIHtcblx0ICBnZXRNYXBEYXRhKHRoaXMsIGtleSkuc2V0KGtleSwgdmFsdWUpO1xuXHQgIHJldHVybiB0aGlzO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG1hcENhY2hlU2V0O1xuXG5cbi8qKiovIH0sXG4vKiAxMjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgbWFwYCB0byBpdHMga2V5LXZhbHVlIHBhaXJzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gY29udmVydC5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBrZXktdmFsdWUgcGFpcnMuXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXBUb0FycmF5KG1hcCkge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICByZXN1bHQgPSBBcnJheShtYXAuc2l6ZSk7XG5cdFxuXHQgIG1hcC5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcblx0ICAgIHJlc3VsdFsrK2luZGV4XSA9IFtrZXksIHZhbHVlXTtcblx0ICB9KTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG1hcFRvQXJyYXk7XG5cblxuLyoqKi8gfSxcbi8qIDEzMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqIFVzZWQgdG8gc3RhbmQtaW4gZm9yIGB1bmRlZmluZWRgIGhhc2ggdmFsdWVzLiAqL1xuXHR2YXIgSEFTSF9VTkRFRklORUQgPSAnX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyc7XG5cdFxuXHQvKipcblx0ICogQWRkcyBgdmFsdWVgIHRvIHRoZSBhcnJheSBjYWNoZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgYWRkXG5cdCAqIEBtZW1iZXJPZiBTZXRDYWNoZVxuXHQgKiBAYWxpYXMgcHVzaFxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjYWNoZS5cblx0ICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY2FjaGUgaW5zdGFuY2UuXG5cdCAqL1xuXHRmdW5jdGlvbiBzZXRDYWNoZUFkZCh2YWx1ZSkge1xuXHQgIHRoaXMuX19kYXRhX18uc2V0KHZhbHVlLCBIQVNIX1VOREVGSU5FRCk7XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc2V0Q2FjaGVBZGQ7XG5cblxuLyoqKi8gfSxcbi8qIDEzMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGluIHRoZSBhcnJheSBjYWNoZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgaGFzXG5cdCAqIEBtZW1iZXJPZiBTZXRDYWNoZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGZvdW5kLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBzZXRDYWNoZUhhcyh2YWx1ZSkge1xuXHQgIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyh2YWx1ZSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc2V0Q2FjaGVIYXM7XG5cblxuLyoqKi8gfSxcbi8qIDEzMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGBzZXRgIHRvIGFuIGFycmF5IG9mIGl0cyB2YWx1ZXMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzZXQgVGhlIHNldCB0byBjb252ZXJ0LlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHZhbHVlcy5cblx0ICovXG5cdGZ1bmN0aW9uIHNldFRvQXJyYXkoc2V0KSB7XG5cdCAgdmFyIGluZGV4ID0gLTEsXG5cdCAgICAgIHJlc3VsdCA9IEFycmF5KHNldC5zaXplKTtcblx0XG5cdCAgc2V0LmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgIHJlc3VsdFsrK2luZGV4XSA9IHZhbHVlO1xuXHQgIH0pO1xuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc2V0VG9BcnJheTtcblxuXG4vKioqLyB9LFxuLyogMTMzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgTGlzdENhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBzdGFjay5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgY2xlYXJcblx0ICogQG1lbWJlck9mIFN0YWNrXG5cdCAqL1xuXHRmdW5jdGlvbiBzdGFja0NsZWFyKCkge1xuXHQgIHRoaXMuX19kYXRhX18gPSBuZXcgTGlzdENhY2hlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHN0YWNrQ2xlYXI7XG5cblxuLyoqKi8gfSxcbi8qIDEzNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBzdGFjay5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgZGVsZXRlXG5cdCAqIEBtZW1iZXJPZiBTdGFja1xuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gc3RhY2tEZWxldGUoa2V5KSB7XG5cdCAgcmV0dXJuIHRoaXMuX19kYXRhX19bJ2RlbGV0ZSddKGtleSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc3RhY2tEZWxldGU7XG5cblxuLyoqKi8gfSxcbi8qIDEzNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIEdldHMgdGhlIHN0YWNrIHZhbHVlIGZvciBga2V5YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgZ2V0XG5cdCAqIEBtZW1iZXJPZiBTdGFja1xuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gc3RhY2tHZXQoa2V5KSB7XG5cdCAgcmV0dXJuIHRoaXMuX19kYXRhX18uZ2V0KGtleSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc3RhY2tHZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDEzNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBhIHN0YWNrIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGhhc1xuXHQgKiBAbWVtYmVyT2YgU3RhY2tcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIHN0YWNrSGFzKGtleSkge1xuXHQgIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyhrZXkpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHN0YWNrSGFzO1xuXG5cbi8qKiovIH0sXG4vKiAxMzcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBMaXN0Q2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpLFxuXHQgICAgTWFwQ2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0XG5cdC8qKiBVc2VkIGFzIHRoZSBzaXplIHRvIGVuYWJsZSBsYXJnZSBhcnJheSBvcHRpbWl6YXRpb25zLiAqL1xuXHR2YXIgTEFSR0VfQVJSQVlfU0laRSA9IDIwMDtcblx0XG5cdC8qKlxuXHQgKiBTZXRzIHRoZSBzdGFjayBga2V5YCB0byBgdmFsdWVgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBzZXRcblx0ICogQG1lbWJlck9mIFN0YWNrXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIHN0YWNrIGNhY2hlIGluc3RhbmNlLlxuXHQgKi9cblx0ZnVuY3Rpb24gc3RhY2tTZXQoa2V5LCB2YWx1ZSkge1xuXHQgIHZhciBjYWNoZSA9IHRoaXMuX19kYXRhX187XG5cdCAgaWYgKGNhY2hlIGluc3RhbmNlb2YgTGlzdENhY2hlICYmIGNhY2hlLl9fZGF0YV9fLmxlbmd0aCA9PSBMQVJHRV9BUlJBWV9TSVpFKSB7XG5cdCAgICBjYWNoZSA9IHRoaXMuX19kYXRhX18gPSBuZXcgTWFwQ2FjaGUoY2FjaGUuX19kYXRhX18pO1xuXHQgIH1cblx0ICBjYWNoZS5zZXQoa2V5LCB2YWx1ZSk7XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc3RhY2tTZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDEzOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIG1lbW9pemUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NyksXG5cdCAgICB0b1N0cmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUyKTtcblx0XG5cdC8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cblx0dmFyIHJlUHJvcE5hbWUgPSAvW14uW1xcXV0rfFxcWyg/OigtP1xcZCsoPzpcXC5cXGQrKT8pfChbXCInXSkoKD86KD8hXFwyKVteXFxcXF18XFxcXC4pKj8pXFwyKVxcXXwoPz0oXFwufFxcW1xcXSkoPzpcXDR8JCkpL2c7XG5cdFxuXHQvKiogVXNlZCB0byBtYXRjaCBiYWNrc2xhc2hlcyBpbiBwcm9wZXJ0eSBwYXRocy4gKi9cblx0dmFyIHJlRXNjYXBlQ2hhciA9IC9cXFxcKFxcXFwpPy9nO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGBzdHJpbmdgIHRvIGEgcHJvcGVydHkgcGF0aCBhcnJheS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcHJvcGVydHkgcGF0aCBhcnJheS5cblx0ICovXG5cdHZhciBzdHJpbmdUb1BhdGggPSBtZW1vaXplKGZ1bmN0aW9uKHN0cmluZykge1xuXHQgIHZhciByZXN1bHQgPSBbXTtcblx0ICB0b1N0cmluZyhzdHJpbmcpLnJlcGxhY2UocmVQcm9wTmFtZSwgZnVuY3Rpb24obWF0Y2gsIG51bWJlciwgcXVvdGUsIHN0cmluZykge1xuXHQgICAgcmVzdWx0LnB1c2gocXVvdGUgPyBzdHJpbmcucmVwbGFjZShyZUVzY2FwZUNoYXIsICckMScpIDogKG51bWJlciB8fCBtYXRjaCkpO1xuXHQgIH0pO1xuXHQgIHJldHVybiByZXN1bHQ7XG5cdH0pO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBzdHJpbmdUb1BhdGg7XG5cblxuLyoqKi8gfSxcbi8qIDEzOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KSxcblx0ICAgIG5vdyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ4KSxcblx0ICAgIHRvTnVtYmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdFxuXHQvKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xuXHR2YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXHRcblx0LyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xuXHR2YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG5cdCAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcblx0ICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG5cdCAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWxcblx0ICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uXG5cdCAqIFByb3ZpZGUgYW4gb3B0aW9ucyBvYmplY3QgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb25cblx0ICogdGhlIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcblx0ICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudCBjYWxsc1xuXHQgKiB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYCBpbnZvY2F0aW9uLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzIGludm9rZWRcblx0ICogb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIGlzXG5cdCAqIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cblx0ICpcblx0ICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG5cdCAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBGdW5jdGlvblxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cblx0ICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuXHQgKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cblx0ICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG5cdCAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG5cdCAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKSk7XG5cdCAqXG5cdCAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuXHQgKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG5cdCAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuXHQgKiAgICd0cmFpbGluZyc6IGZhbHNlXG5cdCAqIH0pKTtcblx0ICpcblx0ICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cblx0ICogdmFyIGRlYm91bmNlZCA9IF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwgeyAnbWF4V2FpdCc6IDEwMDAgfSk7XG5cdCAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcblx0ICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuXHQgKlxuXHQgKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuXHQgKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcblx0ICovXG5cdGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcblx0ICB2YXIgbGFzdEFyZ3MsXG5cdCAgICAgIGxhc3RUaGlzLFxuXHQgICAgICBtYXhXYWl0LFxuXHQgICAgICByZXN1bHQsXG5cdCAgICAgIHRpbWVySWQsXG5cdCAgICAgIGxhc3RDYWxsVGltZSxcblx0ICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuXHQgICAgICBsZWFkaW5nID0gZmFsc2UsXG5cdCAgICAgIG1heGluZyA9IGZhbHNlLFxuXHQgICAgICB0cmFpbGluZyA9IHRydWU7XG5cdFxuXHQgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG5cdCAgfVxuXHQgIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuXHQgIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuXHQgICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuXHQgICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG5cdCAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuXHQgICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGludm9rZUZ1bmModGltZSkge1xuXHQgICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcblx0ICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cdFxuXHQgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcblx0ICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcblx0ICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuXHQgICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cblx0ICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcblx0ICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG5cdCAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuXHQgICAgLy8gSW52b2tlIHRoZSBsZWFkaW5nIGVkZ2UuXG5cdCAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcblx0ICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG5cdCAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZSxcblx0ICAgICAgICByZXN1bHQgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cdFxuXHQgICAgcmV0dXJuIG1heGluZyA/IG5hdGl2ZU1pbihyZXN1bHQsIG1heFdhaXQgLSB0aW1lU2luY2VMYXN0SW52b2tlKSA6IHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHNob3VsZEludm9rZSh0aW1lKSB7XG5cdCAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuXHQgICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cdFxuXHQgICAgLy8gRWl0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIGFjdGl2aXR5IGhhcyBzdG9wcGVkIGFuZCB3ZSdyZSBhdCB0aGVcblx0ICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG5cdCAgICAvLyBpdCBhcyB0aGUgdHJhaWxpbmcgZWRnZSwgb3Igd2UndmUgaGl0IHRoZSBgbWF4V2FpdGAgbGltaXQuXG5cdCAgICByZXR1cm4gKGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8ICh0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0KSB8fFxuXHQgICAgICAodGltZVNpbmNlTGFzdENhbGwgPCAwKSB8fCAobWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdCkpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuXHQgICAgdmFyIHRpbWUgPSBub3coKTtcblx0ICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcblx0ICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcblx0ICAgIH1cblx0ICAgIC8vIFJlc3RhcnQgdGhlIHRpbWVyLlxuXHQgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG5cdCAgICB0aW1lcklkID0gdW5kZWZpbmVkO1xuXHRcblx0ICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cblx0ICAgIC8vIGRlYm91bmNlZCBhdCBsZWFzdCBvbmNlLlxuXHQgICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG5cdCAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuXHQgICAgfVxuXHQgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBjYW5jZWwoKSB7XG5cdCAgICBsYXN0SW52b2tlVGltZSA9IDA7XG5cdCAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGZsdXNoKCkge1xuXHQgICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG5cdCAgICB2YXIgdGltZSA9IG5vdygpLFxuXHQgICAgICAgIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7XG5cdFxuXHQgICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG5cdCAgICBsYXN0VGhpcyA9IHRoaXM7XG5cdCAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuXHRcblx0ICAgIGlmIChpc0ludm9raW5nKSB7XG5cdCAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAobWF4aW5nKSB7XG5cdCAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cblx0ICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuXHQgICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHQgIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG5cdCAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG5cdCAgcmV0dXJuIGRlYm91bmNlZDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBkZWJvdW5jZTtcblxuXG4vKioqLyB9LFxuLyogMTQwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogUGVyZm9ybXMgYVxuXHQgKiBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuXHQgKiBjb21wYXJpc29uIGJldHdlZW4gdHdvIHZhbHVlcyB0byBkZXRlcm1pbmUgaWYgdGhleSBhcmUgZXF1aXZhbGVudC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcblx0ICogdmFyIG90aGVyID0geyAndXNlcic6ICdmcmVkJyB9O1xuXHQgKlxuXHQgKiBfLmVxKG9iamVjdCwgb2JqZWN0KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmVxKG9iamVjdCwgb3RoZXIpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmVxKCdhJywgJ2EnKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmVxKCdhJywgT2JqZWN0KCdhJykpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmVxKE5hTiwgTmFOKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKi9cblx0ZnVuY3Rpb24gZXEodmFsdWUsIG90aGVyKSB7XG5cdCAgcmV0dXJuIHZhbHVlID09PSBvdGhlciB8fCAodmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcik7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZXE7XG5cblxuLyoqKi8gfSxcbi8qIDE0MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VGaW5kSW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg4KSxcblx0ICAgIGJhc2VJdGVyYXRlZSA9IF9fd2VicGFja19yZXF1aXJlX18oOTMpLFxuXHQgICAgdG9JbnRlZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG5cdHZhciBuYXRpdmVNYXggPSBNYXRoLm1heDtcblx0XG5cdC8qKlxuXHQgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZpbmRgIGV4Y2VwdCB0aGF0IGl0IHJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdFxuXHQgKiBlbGVtZW50IGBwcmVkaWNhdGVgIHJldHVybnMgdHJ1dGh5IGZvciBpbnN0ZWFkIG9mIHRoZSBlbGVtZW50IGl0c2VsZi5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMS4xLjBcblx0ICogQGNhdGVnb3J5IEFycmF5XG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG5cdCAqIEBwYXJhbSB7QXJyYXl8RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XVxuXHQgKiAgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtmcm9tSW5kZXg9MF0gVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZm91bmQgZWxlbWVudCwgZWxzZSBgLTFgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiB2YXIgdXNlcnMgPSBbXG5cdCAqICAgeyAndXNlcic6ICdiYXJuZXknLCAgJ2FjdGl2ZSc6IGZhbHNlIH0sXG5cdCAqICAgeyAndXNlcic6ICdmcmVkJywgICAgJ2FjdGl2ZSc6IGZhbHNlIH0sXG5cdCAqICAgeyAndXNlcic6ICdwZWJibGVzJywgJ2FjdGl2ZSc6IHRydWUgfVxuXHQgKiBdO1xuXHQgKlxuXHQgKiBfLmZpbmRJbmRleCh1c2VycywgZnVuY3Rpb24obykgeyByZXR1cm4gby51c2VyID09ICdiYXJuZXknOyB9KTtcblx0ICogLy8gPT4gMFxuXHQgKlxuXHQgKiAvLyBUaGUgYF8ubWF0Y2hlc2AgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuXHQgKiBfLmZpbmRJbmRleCh1c2VycywgeyAndXNlcic6ICdmcmVkJywgJ2FjdGl2ZSc6IGZhbHNlIH0pO1xuXHQgKiAvLyA9PiAxXG5cdCAqXG5cdCAqIC8vIFRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cblx0ICogXy5maW5kSW5kZXgodXNlcnMsIFsnYWN0aXZlJywgZmFsc2VdKTtcblx0ICogLy8gPT4gMFxuXHQgKlxuXHQgKiAvLyBUaGUgYF8ucHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cblx0ICogXy5maW5kSW5kZXgodXNlcnMsICdhY3RpdmUnKTtcblx0ICogLy8gPT4gMlxuXHQgKi9cblx0ZnVuY3Rpb24gZmluZEluZGV4KGFycmF5LCBwcmVkaWNhdGUsIGZyb21JbmRleCkge1xuXHQgIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG5cdCAgaWYgKCFsZW5ndGgpIHtcblx0ICAgIHJldHVybiAtMTtcblx0ICB9XG5cdCAgdmFyIGluZGV4ID0gZnJvbUluZGV4ID09IG51bGwgPyAwIDogdG9JbnRlZ2VyKGZyb21JbmRleCk7XG5cdCAgaWYgKGluZGV4IDwgMCkge1xuXHQgICAgaW5kZXggPSBuYXRpdmVNYXgobGVuZ3RoICsgaW5kZXgsIDApO1xuXHQgIH1cblx0ICByZXR1cm4gYmFzZUZpbmRJbmRleChhcnJheSwgYmFzZUl0ZXJhdGVlKHByZWRpY2F0ZSwgMyksIGluZGV4KTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmaW5kSW5kZXg7XG5cblxuLyoqKi8gfSxcbi8qIDE0MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VHZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSB2YWx1ZSBhdCBgcGF0aGAgb2YgYG9iamVjdGAuIElmIHRoZSByZXNvbHZlZCB2YWx1ZSBpc1xuXHQgKiBgdW5kZWZpbmVkYCwgdGhlIGBkZWZhdWx0VmFsdWVgIGlzIHVzZWQgaW4gaXRzIHBsYWNlLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAzLjcuMFxuXHQgKiBAY2F0ZWdvcnkgT2JqZWN0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHBhcmFtIHsqfSBbZGVmYXVsdFZhbHVlXSBUaGUgdmFsdWUgcmV0dXJuZWQgZm9yIGB1bmRlZmluZWRgIHJlc29sdmVkIHZhbHVlcy5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiB2YXIgb2JqZWN0ID0geyAnYSc6IFt7ICdiJzogeyAnYyc6IDMgfSB9XSB9O1xuXHQgKlxuXHQgKiBfLmdldChvYmplY3QsICdhWzBdLmIuYycpO1xuXHQgKiAvLyA9PiAzXG5cdCAqXG5cdCAqIF8uZ2V0KG9iamVjdCwgWydhJywgJzAnLCAnYicsICdjJ10pO1xuXHQgKiAvLyA9PiAzXG5cdCAqXG5cdCAqIF8uZ2V0KG9iamVjdCwgJ2EuYi5jJywgJ2RlZmF1bHQnKTtcblx0ICogLy8gPT4gJ2RlZmF1bHQnXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXQob2JqZWN0LCBwYXRoLCBkZWZhdWx0VmFsdWUpIHtcblx0ICB2YXIgcmVzdWx0ID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBiYXNlR2V0KG9iamVjdCwgcGF0aCk7XG5cdCAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdFZhbHVlIDogcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGdldDtcblxuXG4vKioqLyB9LFxuLyogMTQzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZUhhc0luID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OSksXG5cdCAgICBoYXNQYXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDkpO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgcGF0aGAgaXMgYSBkaXJlY3Qgb3IgaW5oZXJpdGVkIHByb3BlcnR5IG9mIGBvYmplY3RgLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgT2JqZWN0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgcGF0aGAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIHZhciBvYmplY3QgPSBfLmNyZWF0ZSh7ICdhJzogXy5jcmVhdGUoeyAnYic6IDIgfSkgfSk7XG5cdCAqXG5cdCAqIF8uaGFzSW4ob2JqZWN0LCAnYScpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaGFzSW4ob2JqZWN0LCAnYS5iJyk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5oYXNJbihvYmplY3QsIFsnYScsICdiJ10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaGFzSW4ob2JqZWN0LCAnYicpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaGFzSW4ob2JqZWN0LCBwYXRoKSB7XG5cdCAgcmV0dXJuIG9iamVjdCAhPSBudWxsICYmIGhhc1BhdGgob2JqZWN0LCBwYXRoLCBiYXNlSGFzSW4pO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGhhc0luO1xuXG5cbi8qKiovIH0sXG4vKiAxNDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBmaXJzdCBhcmd1bWVudCBnaXZlbiB0byBpdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAc2luY2UgMC4xLjBcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGNhdGVnb3J5IFV0aWxcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBBbnkgdmFsdWUuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIGB2YWx1ZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG5cdCAqXG5cdCAqIGNvbnNvbGUubG9nKF8uaWRlbnRpdHkob2JqZWN0KSA9PT0gb2JqZWN0KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKi9cblx0ZnVuY3Rpb24gaWRlbnRpdHkodmFsdWUpIHtcblx0ICByZXR1cm4gdmFsdWU7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaWRlbnRpdHk7XG5cblxuLyoqKi8gfSxcbi8qIDE0NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzQXJyYXlMaWtlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCksXG5cdCAgICBpc09iamVjdExpa2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0LyoqXG5cdCAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uaXNBcnJheUxpa2VgIGV4Y2VwdCB0aGF0IGl0IGFsc28gY2hlY2tzIGlmIGB2YWx1ZWBcblx0ICogaXMgYW4gb2JqZWN0LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYXJyYXktbGlrZSBvYmplY3QsXG5cdCAqICBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNBcnJheUxpa2VPYmplY3QoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXlMaWtlT2JqZWN0KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNBcnJheUxpa2VPYmplY3QoJ2FiYycpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXlMaWtlT2JqZWN0KF8ubm9vcCk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkge1xuXHQgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzQXJyYXlMaWtlKHZhbHVlKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0FycmF5TGlrZU9iamVjdDtcblxuXG4vKioqLyB9LFxuLyogMTQ2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNMZW5ndGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KSxcblx0ICAgIGlzT2JqZWN0TGlrZSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHQvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG5cdHZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG5cdCAgICBhcnJheVRhZyA9ICdbb2JqZWN0IEFycmF5XScsXG5cdCAgICBib29sVGFnID0gJ1tvYmplY3QgQm9vbGVhbl0nLFxuXHQgICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcblx0ICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJyxcblx0ICAgIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuXHQgICAgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG5cdCAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcblx0ICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nLFxuXHQgICAgcmVnZXhwVGFnID0gJ1tvYmplY3QgUmVnRXhwXScsXG5cdCAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJyxcblx0ICAgIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nLFxuXHQgICAgd2Vha01hcFRhZyA9ICdbb2JqZWN0IFdlYWtNYXBdJztcblx0XG5cdHZhciBhcnJheUJ1ZmZlclRhZyA9ICdbb2JqZWN0IEFycmF5QnVmZmVyXScsXG5cdCAgICBkYXRhVmlld1RhZyA9ICdbb2JqZWN0IERhdGFWaWV3XScsXG5cdCAgICBmbG9hdDMyVGFnID0gJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsXG5cdCAgICBmbG9hdDY0VGFnID0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScsXG5cdCAgICBpbnQ4VGFnID0gJ1tvYmplY3QgSW50OEFycmF5XScsXG5cdCAgICBpbnQxNlRhZyA9ICdbb2JqZWN0IEludDE2QXJyYXldJyxcblx0ICAgIGludDMyVGFnID0gJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuXHQgICAgdWludDhUYWcgPSAnW29iamVjdCBVaW50OEFycmF5XScsXG5cdCAgICB1aW50OENsYW1wZWRUYWcgPSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nLFxuXHQgICAgdWludDE2VGFnID0gJ1tvYmplY3QgVWludDE2QXJyYXldJyxcblx0ICAgIHVpbnQzMlRhZyA9ICdbb2JqZWN0IFVpbnQzMkFycmF5XSc7XG5cdFxuXHQvKiogVXNlZCB0byBpZGVudGlmeSBgdG9TdHJpbmdUYWdgIHZhbHVlcyBvZiB0eXBlZCBhcnJheXMuICovXG5cdHZhciB0eXBlZEFycmF5VGFncyA9IHt9O1xuXHR0eXBlZEFycmF5VGFnc1tmbG9hdDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Zsb2F0NjRUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbaW50OFRhZ10gPSB0eXBlZEFycmF5VGFnc1tpbnQxNlRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1tpbnQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50OFRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1t1aW50OENsYW1wZWRUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDE2VGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW3VpbnQzMlRhZ10gPSB0cnVlO1xuXHR0eXBlZEFycmF5VGFnc1thcmdzVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2FycmF5VGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW2FycmF5QnVmZmVyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Jvb2xUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbZGF0YVZpZXdUYWddID0gdHlwZWRBcnJheVRhZ3NbZGF0ZVRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1tlcnJvclRhZ10gPSB0eXBlZEFycmF5VGFnc1tmdW5jVGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW21hcFRhZ10gPSB0eXBlZEFycmF5VGFnc1tudW1iZXJUYWddID1cblx0dHlwZWRBcnJheVRhZ3Nbb2JqZWN0VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3JlZ2V4cFRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1tzZXRUYWddID0gdHlwZWRBcnJheVRhZ3Nbc3RyaW5nVGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW3dlYWtNYXBUYWddID0gZmFsc2U7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogVXNlZCB0byByZXNvbHZlIHRoZVxuXHQgKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcblx0ICogb2YgdmFsdWVzLlxuXHQgKi9cblx0dmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIHR5cGVkIGFycmF5LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAzLjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsXG5cdCAqICBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNUeXBlZEFycmF5KG5ldyBVaW50OEFycmF5KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzVHlwZWRBcnJheShbXSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1R5cGVkQXJyYXkodmFsdWUpIHtcblx0ICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJlxuXHQgICAgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhIXR5cGVkQXJyYXlUYWdzW29iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpXTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc1R5cGVkQXJyYXk7XG5cblxuLyoqKi8gfSxcbi8qIDE0NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIE1hcENhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdFxuXHQvKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xuXHR2YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IG1lbW9pemVzIHRoZSByZXN1bHQgb2YgYGZ1bmNgLiBJZiBgcmVzb2x2ZXJgIGlzXG5cdCAqIHByb3ZpZGVkLCBpdCBkZXRlcm1pbmVzIHRoZSBjYWNoZSBrZXkgZm9yIHN0b3JpbmcgdGhlIHJlc3VsdCBiYXNlZCBvbiB0aGVcblx0ICogYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBtZW1vaXplZCBmdW5jdGlvbi4gQnkgZGVmYXVsdCwgdGhlIGZpcnN0IGFyZ3VtZW50XG5cdCAqIHByb3ZpZGVkIHRvIHRoZSBtZW1vaXplZCBmdW5jdGlvbiBpcyB1c2VkIGFzIHRoZSBtYXAgY2FjaGUga2V5LiBUaGUgYGZ1bmNgXG5cdCAqIGlzIGludm9rZWQgd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlIG1lbW9pemVkIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogVGhlIGNhY2hlIGlzIGV4cG9zZWQgYXMgdGhlIGBjYWNoZWAgcHJvcGVydHkgb24gdGhlIG1lbW9pemVkXG5cdCAqIGZ1bmN0aW9uLiBJdHMgY3JlYXRpb24gbWF5IGJlIGN1c3RvbWl6ZWQgYnkgcmVwbGFjaW5nIHRoZSBgXy5tZW1vaXplLkNhY2hlYFxuXHQgKiBjb25zdHJ1Y3RvciB3aXRoIG9uZSB3aG9zZSBpbnN0YW5jZXMgaW1wbGVtZW50IHRoZVxuXHQgKiBbYE1hcGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXByb3BlcnRpZXMtb2YtdGhlLW1hcC1wcm90b3R5cGUtb2JqZWN0KVxuXHQgKiBtZXRob2QgaW50ZXJmYWNlIG9mIGBkZWxldGVgLCBgZ2V0YCwgYGhhc2AsIGFuZCBgc2V0YC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMC4xLjBcblx0ICogQGNhdGVnb3J5IEZ1bmN0aW9uXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGhhdmUgaXRzIG91dHB1dCBtZW1vaXplZC5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW3Jlc29sdmVyXSBUaGUgZnVuY3Rpb24gdG8gcmVzb2x2ZSB0aGUgY2FjaGUga2V5LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBtZW1vaXplZCBmdW5jdGlvbi5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxLCAnYic6IDIgfTtcblx0ICogdmFyIG90aGVyID0geyAnYyc6IDMsICdkJzogNCB9O1xuXHQgKlxuXHQgKiB2YXIgdmFsdWVzID0gXy5tZW1vaXplKF8udmFsdWVzKTtcblx0ICogdmFsdWVzKG9iamVjdCk7XG5cdCAqIC8vID0+IFsxLCAyXVxuXHQgKlxuXHQgKiB2YWx1ZXMob3RoZXIpO1xuXHQgKiAvLyA9PiBbMywgNF1cblx0ICpcblx0ICogb2JqZWN0LmEgPSAyO1xuXHQgKiB2YWx1ZXMob2JqZWN0KTtcblx0ICogLy8gPT4gWzEsIDJdXG5cdCAqXG5cdCAqIC8vIE1vZGlmeSB0aGUgcmVzdWx0IGNhY2hlLlxuXHQgKiB2YWx1ZXMuY2FjaGUuc2V0KG9iamVjdCwgWydhJywgJ2InXSk7XG5cdCAqIHZhbHVlcyhvYmplY3QpO1xuXHQgKiAvLyA9PiBbJ2EnLCAnYiddXG5cdCAqXG5cdCAqIC8vIFJlcGxhY2UgYF8ubWVtb2l6ZS5DYWNoZWAuXG5cdCAqIF8ubWVtb2l6ZS5DYWNoZSA9IFdlYWtNYXA7XG5cdCAqL1xuXHRmdW5jdGlvbiBtZW1vaXplKGZ1bmMsIHJlc29sdmVyKSB7XG5cdCAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicgfHwgKHJlc29sdmVyICYmIHR5cGVvZiByZXNvbHZlciAhPSAnZnVuY3Rpb24nKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuXHQgIH1cblx0ICB2YXIgbWVtb2l6ZWQgPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuXHQgICAgICAgIGtleSA9IHJlc29sdmVyID8gcmVzb2x2ZXIuYXBwbHkodGhpcywgYXJncykgOiBhcmdzWzBdLFxuXHQgICAgICAgIGNhY2hlID0gbWVtb2l6ZWQuY2FjaGU7XG5cdFxuXHQgICAgaWYgKGNhY2hlLmhhcyhrZXkpKSB7XG5cdCAgICAgIHJldHVybiBjYWNoZS5nZXQoa2V5KTtcblx0ICAgIH1cblx0ICAgIHZhciByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgbWVtb2l6ZWQuY2FjaGUgPSBjYWNoZS5zZXQoa2V5LCByZXN1bHQpO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9O1xuXHQgIG1lbW9pemVkLmNhY2hlID0gbmV3IChtZW1vaXplLkNhY2hlIHx8IE1hcENhY2hlKTtcblx0ICByZXR1cm4gbWVtb2l6ZWQ7XG5cdH1cblx0XG5cdC8vIEFzc2lnbiBjYWNoZSB0byBgXy5tZW1vaXplYC5cblx0bWVtb2l6ZS5DYWNoZSA9IE1hcENhY2hlO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtZW1vaXplO1xuXG5cbi8qKiovIH0sXG4vKiAxNDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBHZXRzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2Vcblx0ICogdGhlIFVuaXggZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDIuNC4wXG5cdCAqIEBjYXRlZ29yeSBEYXRlXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVzdGFtcC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuXHQgKiAgIGNvbnNvbGUubG9nKF8ubm93KCkgLSBzdGFtcCk7XG5cdCAqIH0sIF8ubm93KCkpO1xuXHQgKiAvLyA9PiBMb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBpbnZvY2F0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gbm93KCkge1xuXHQgIHJldHVybiBEYXRlLm5vdygpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG5vdztcblxuXG4vKioqLyB9LFxuLyogMTQ5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCksXG5cdCAgICBiYXNlUHJvcGVydHlEZWVwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NyksXG5cdCAgICBpc0tleSA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpLFxuXHQgICAgdG9LZXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSB2YWx1ZSBhdCBgcGF0aGAgb2YgYSBnaXZlbiBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDIuNC4wXG5cdCAqIEBjYXRlZ29yeSBVdGlsXG5cdCAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiB2YXIgb2JqZWN0cyA9IFtcblx0ICogICB7ICdhJzogeyAnYic6IDIgfSB9LFxuXHQgKiAgIHsgJ2EnOiB7ICdiJzogMSB9IH1cblx0ICogXTtcblx0ICpcblx0ICogXy5tYXAob2JqZWN0cywgXy5wcm9wZXJ0eSgnYS5iJykpO1xuXHQgKiAvLyA9PiBbMiwgMV1cblx0ICpcblx0ICogXy5tYXAoXy5zb3J0Qnkob2JqZWN0cywgXy5wcm9wZXJ0eShbJ2EnLCAnYiddKSksICdhLmInKTtcblx0ICogLy8gPT4gWzEsIDJdXG5cdCAqL1xuXHRmdW5jdGlvbiBwcm9wZXJ0eShwYXRoKSB7XG5cdCAgcmV0dXJuIGlzS2V5KHBhdGgpID8gYmFzZVByb3BlcnR5KHRvS2V5KHBhdGgpKSA6IGJhc2VQcm9wZXJ0eURlZXAocGF0aCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gcHJvcGVydHk7XG5cblxuLyoqKi8gfSxcbi8qIDE1MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGFwcGx5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NSksXG5cdCAgICB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0XG5cdC8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG5cdHZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG5cdHZhciBuYXRpdmVNYXggPSBNYXRoLm1heDtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGVcblx0ICogY3JlYXRlZCBmdW5jdGlvbiBhbmQgYXJndW1lbnRzIGZyb20gYHN0YXJ0YCBhbmQgYmV5b25kIHByb3ZpZGVkIGFzXG5cdCAqIGFuIGFycmF5LlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgYmFzZWQgb24gdGhlXG5cdCAqIFtyZXN0IHBhcmFtZXRlcl0oaHR0cHM6Ly9tZG4uaW8vcmVzdF9wYXJhbWV0ZXJzKS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IEZ1bmN0aW9uXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGFwcGx5IGEgcmVzdCBwYXJhbWV0ZXIgdG8uXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9ZnVuYy5sZW5ndGgtMV0gVGhlIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSByZXN0IHBhcmFtZXRlci5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIHZhciBzYXkgPSBfLnJlc3QoZnVuY3Rpb24od2hhdCwgbmFtZXMpIHtcblx0ICogICByZXR1cm4gd2hhdCArICcgJyArIF8uaW5pdGlhbChuYW1lcykuam9pbignLCAnKSArXG5cdCAqICAgICAoXy5zaXplKG5hbWVzKSA+IDEgPyAnLCAmICcgOiAnJykgKyBfLmxhc3QobmFtZXMpO1xuXHQgKiB9KTtcblx0ICpcblx0ICogc2F5KCdoZWxsbycsICdmcmVkJywgJ2Jhcm5leScsICdwZWJibGVzJyk7XG5cdCAqIC8vID0+ICdoZWxsbyBmcmVkLCBiYXJuZXksICYgcGViYmxlcydcblx0ICovXG5cdGZ1bmN0aW9uIHJlc3QoZnVuYywgc3RhcnQpIHtcblx0ICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuXHQgIH1cblx0ICBzdGFydCA9IG5hdGl2ZU1heChzdGFydCA9PT0gdW5kZWZpbmVkID8gKGZ1bmMubGVuZ3RoIC0gMSkgOiB0b0ludGVnZXIoc3RhcnQpLCAwKTtcblx0ICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcblx0ICAgICAgICBpbmRleCA9IC0xLFxuXHQgICAgICAgIGxlbmd0aCA9IG5hdGl2ZU1heChhcmdzLmxlbmd0aCAtIHN0YXJ0LCAwKSxcblx0ICAgICAgICBhcnJheSA9IEFycmF5KGxlbmd0aCk7XG5cdFxuXHQgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0ICAgICAgYXJyYXlbaW5kZXhdID0gYXJnc1tzdGFydCArIGluZGV4XTtcblx0ICAgIH1cblx0ICAgIHN3aXRjaCAoc3RhcnQpIHtcblx0ICAgICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFycmF5KTtcblx0ICAgICAgY2FzZSAxOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3NbMF0sIGFycmF5KTtcblx0ICAgICAgY2FzZSAyOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFycmF5KTtcblx0ICAgIH1cblx0ICAgIHZhciBvdGhlckFyZ3MgPSBBcnJheShzdGFydCArIDEpO1xuXHQgICAgaW5kZXggPSAtMTtcblx0ICAgIHdoaWxlICgrK2luZGV4IDwgc3RhcnQpIHtcblx0ICAgICAgb3RoZXJBcmdzW2luZGV4XSA9IGFyZ3NbaW5kZXhdO1xuXHQgICAgfVxuXHQgICAgb3RoZXJBcmdzW3N0YXJ0XSA9IGFycmF5O1xuXHQgICAgcmV0dXJuIGFwcGx5KGZ1bmMsIHRoaXMsIG90aGVyQXJncyk7XG5cdCAgfTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSByZXN0O1xuXG5cbi8qKiovIH0sXG4vKiAxNTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciB0b051bWJlciA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHRcblx0LyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG5cdHZhciBJTkZJTklUWSA9IDEgLyAwLFxuXHQgICAgTUFYX0lOVEVHRVIgPSAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwODtcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgZmluaXRlIG51bWJlci5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4xMi4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBudW1iZXIuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8udG9GaW5pdGUoMy4yKTtcblx0ICogLy8gPT4gMy4yXG5cdCAqXG5cdCAqIF8udG9GaW5pdGUoTnVtYmVyLk1JTl9WQUxVRSk7XG5cdCAqIC8vID0+IDVlLTMyNFxuXHQgKlxuXHQgKiBfLnRvRmluaXRlKEluZmluaXR5KTtcblx0ICogLy8gPT4gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDhcblx0ICpcblx0ICogXy50b0Zpbml0ZSgnMy4yJyk7XG5cdCAqIC8vID0+IDMuMlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9GaW5pdGUodmFsdWUpIHtcblx0ICBpZiAoIXZhbHVlKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6IDA7XG5cdCAgfVxuXHQgIHZhbHVlID0gdG9OdW1iZXIodmFsdWUpO1xuXHQgIGlmICh2YWx1ZSA9PT0gSU5GSU5JVFkgfHwgdmFsdWUgPT09IC1JTkZJTklUWSkge1xuXHQgICAgdmFyIHNpZ24gPSAodmFsdWUgPCAwID8gLTEgOiAxKTtcblx0ICAgIHJldHVybiBzaWduICogTUFYX0lOVEVHRVI7XG5cdCAgfVxuXHQgIHJldHVybiB2YWx1ZSA9PT0gdmFsdWUgPyB2YWx1ZSA6IDA7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gdG9GaW5pdGU7XG5cblxuLyoqKi8gfSxcbi8qIDE1MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VUb1N0cmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZCBmb3IgYG51bGxgXG5cdCAqIGFuZCBgdW5kZWZpbmVkYCB2YWx1ZXMuIFRoZSBzaWduIG9mIGAtMGAgaXMgcHJlc2VydmVkLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8udG9TdHJpbmcobnVsbCk7XG5cdCAqIC8vID0+ICcnXG5cdCAqXG5cdCAqIF8udG9TdHJpbmcoLTApO1xuXHQgKiAvLyA9PiAnLTAnXG5cdCAqXG5cdCAqIF8udG9TdHJpbmcoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gJzEsMiwzJ1xuXHQgKi9cblx0ZnVuY3Rpb24gdG9TdHJpbmcodmFsdWUpIHtcblx0ICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogYmFzZVRvU3RyaW5nKHZhbHVlKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB0b1N0cmluZztcblxuXG4vKioqLyB9LFxuLyogMTUzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cdC8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICBCZWdpbiBwcmlzbS1jb3JlLmpzXG5cdCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblx0XG5cdHZhciBfc2VsZiA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJylcblx0XHQ/IHdpbmRvdyAgIC8vIGlmIGluIGJyb3dzZXJcblx0XHQ6IChcblx0XHRcdCh0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICd1bmRlZmluZWQnICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZSlcblx0XHRcdD8gc2VsZiAvLyBpZiBpbiB3b3JrZXJcblx0XHRcdDoge30gICAvLyBpZiBpbiBub2RlIGpzXG5cdFx0KTtcblx0XG5cdC8qKlxuXHQgKiBQcmlzbTogTGlnaHR3ZWlnaHQsIHJvYnVzdCwgZWxlZ2FudCBzeW50YXggaGlnaGxpZ2h0aW5nXG5cdCAqIE1JVCBsaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwL1xuXHQgKiBAYXV0aG9yIExlYSBWZXJvdSBodHRwOi8vbGVhLnZlcm91Lm1lXG5cdCAqL1xuXHRcblx0dmFyIFByaXNtID0gKGZ1bmN0aW9uKCl7XG5cdFxuXHQvLyBQcml2YXRlIGhlbHBlciB2YXJzXG5cdHZhciBsYW5nID0gL1xcYmxhbmcoPzp1YWdlKT8tKFxcdyspXFxiL2k7XG5cdHZhciB1bmlxdWVJZCA9IDA7XG5cdFxuXHR2YXIgXyA9IF9zZWxmLlByaXNtID0ge1xuXHRcdHV0aWw6IHtcblx0XHRcdGVuY29kZTogZnVuY3Rpb24gKHRva2Vucykge1xuXHRcdFx0XHRpZiAodG9rZW5zIGluc3RhbmNlb2YgVG9rZW4pIHtcblx0XHRcdFx0XHRyZXR1cm4gbmV3IFRva2VuKHRva2Vucy50eXBlLCBfLnV0aWwuZW5jb2RlKHRva2Vucy5jb250ZW50KSwgdG9rZW5zLmFsaWFzKTtcblx0XHRcdFx0fSBlbHNlIGlmIChfLnV0aWwudHlwZSh0b2tlbnMpID09PSAnQXJyYXknKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRva2Vucy5tYXAoXy51dGlsLmVuY29kZSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRva2Vucy5yZXBsYWNlKC8mL2csICcmYW1wOycpLnJlcGxhY2UoLzwvZywgJyZsdDsnKS5yZXBsYWNlKC9cXHUwMGEwL2csICcgJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFxuXHRcdFx0dHlwZTogZnVuY3Rpb24gKG8pIHtcblx0XHRcdFx0cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5tYXRjaCgvXFxbb2JqZWN0IChcXHcrKVxcXS8pWzFdO1xuXHRcdFx0fSxcblx0XG5cdFx0XHRvYmpJZDogZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0XHRpZiAoIW9ialsnX19pZCddKSB7XG5cdFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgJ19faWQnLCB7IHZhbHVlOiArK3VuaXF1ZUlkIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBvYmpbJ19faWQnXTtcblx0XHRcdH0sXG5cdFxuXHRcdFx0Ly8gRGVlcCBjbG9uZSBhIGxhbmd1YWdlIGRlZmluaXRpb24gKGUuZy4gdG8gZXh0ZW5kIGl0KVxuXHRcdFx0Y2xvbmU6IGZ1bmN0aW9uIChvKSB7XG5cdFx0XHRcdHZhciB0eXBlID0gXy51dGlsLnR5cGUobyk7XG5cdFxuXHRcdFx0XHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRcdFx0XHRjYXNlICdPYmplY3QnOlxuXHRcdFx0XHRcdFx0dmFyIGNsb25lID0ge307XG5cdFxuXHRcdFx0XHRcdFx0Zm9yICh2YXIga2V5IGluIG8pIHtcblx0XHRcdFx0XHRcdFx0aWYgKG8uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdFx0XHRcdFx0XHRcdGNsb25lW2tleV0gPSBfLnV0aWwuY2xvbmUob1trZXldKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdHJldHVybiBjbG9uZTtcblx0XG5cdFx0XHRcdFx0Y2FzZSAnQXJyYXknOlxuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgZm9yIGV4aXN0ZW5jZSBmb3IgSUU4XG5cdFx0XHRcdFx0XHRyZXR1cm4gby5tYXAgJiYgby5tYXAoZnVuY3Rpb24odikgeyByZXR1cm4gXy51dGlsLmNsb25lKHYpOyB9KTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0cmV0dXJuIG87XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0bGFuZ3VhZ2VzOiB7XG5cdFx0XHRleHRlbmQ6IGZ1bmN0aW9uIChpZCwgcmVkZWYpIHtcblx0XHRcdFx0dmFyIGxhbmcgPSBfLnV0aWwuY2xvbmUoXy5sYW5ndWFnZXNbaWRdKTtcblx0XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiByZWRlZikge1xuXHRcdFx0XHRcdGxhbmdba2V5XSA9IHJlZGVmW2tleV07XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHJldHVybiBsYW5nO1xuXHRcdFx0fSxcblx0XG5cdFx0XHQvKipcblx0XHRcdCAqIEluc2VydCBhIHRva2VuIGJlZm9yZSBhbm90aGVyIHRva2VuIGluIGEgbGFuZ3VhZ2UgbGl0ZXJhbFxuXHRcdFx0ICogQXMgdGhpcyBuZWVkcyB0byByZWNyZWF0ZSB0aGUgb2JqZWN0ICh3ZSBjYW5ub3QgYWN0dWFsbHkgaW5zZXJ0IGJlZm9yZSBrZXlzIGluIG9iamVjdCBsaXRlcmFscyksXG5cdFx0XHQgKiB3ZSBjYW5ub3QganVzdCBwcm92aWRlIGFuIG9iamVjdCwgd2UgbmVlZCBhbm9iamVjdCBhbmQgYSBrZXkuXG5cdFx0XHQgKiBAcGFyYW0gaW5zaWRlIFRoZSBrZXkgKG9yIGxhbmd1YWdlIGlkKSBvZiB0aGUgcGFyZW50XG5cdFx0XHQgKiBAcGFyYW0gYmVmb3JlIFRoZSBrZXkgdG8gaW5zZXJ0IGJlZm9yZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgZnVuY3Rpb24gYXBwZW5kcyBpbnN0ZWFkLlxuXHRcdFx0ICogQHBhcmFtIGluc2VydCBPYmplY3Qgd2l0aCB0aGUga2V5L3ZhbHVlIHBhaXJzIHRvIGluc2VydFxuXHRcdFx0ICogQHBhcmFtIHJvb3QgVGhlIG9iamVjdCB0aGF0IGNvbnRhaW5zIGBpbnNpZGVgLiBJZiBlcXVhbCB0byBQcmlzbS5sYW5ndWFnZXMsIGl0IGNhbiBiZSBvbWl0dGVkLlxuXHRcdFx0ICovXG5cdFx0XHRpbnNlcnRCZWZvcmU6IGZ1bmN0aW9uIChpbnNpZGUsIGJlZm9yZSwgaW5zZXJ0LCByb290KSB7XG5cdFx0XHRcdHJvb3QgPSByb290IHx8IF8ubGFuZ3VhZ2VzO1xuXHRcdFx0XHR2YXIgZ3JhbW1hciA9IHJvb3RbaW5zaWRlXTtcblx0XG5cdFx0XHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID09IDIpIHtcblx0XHRcdFx0XHRpbnNlcnQgPSBhcmd1bWVudHNbMV07XG5cdFxuXHRcdFx0XHRcdGZvciAodmFyIG5ld1Rva2VuIGluIGluc2VydCkge1xuXHRcdFx0XHRcdFx0aWYgKGluc2VydC5oYXNPd25Qcm9wZXJ0eShuZXdUb2tlbikpIHtcblx0XHRcdFx0XHRcdFx0Z3JhbW1hcltuZXdUb2tlbl0gPSBpbnNlcnRbbmV3VG9rZW5dO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0cmV0dXJuIGdyYW1tYXI7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHZhciByZXQgPSB7fTtcblx0XG5cdFx0XHRcdGZvciAodmFyIHRva2VuIGluIGdyYW1tYXIpIHtcblx0XG5cdFx0XHRcdFx0aWYgKGdyYW1tYXIuaGFzT3duUHJvcGVydHkodG9rZW4pKSB7XG5cdFxuXHRcdFx0XHRcdFx0aWYgKHRva2VuID09IGJlZm9yZSkge1xuXHRcblx0XHRcdFx0XHRcdFx0Zm9yICh2YXIgbmV3VG9rZW4gaW4gaW5zZXJ0KSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdGlmIChpbnNlcnQuaGFzT3duUHJvcGVydHkobmV3VG9rZW4pKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXRbbmV3VG9rZW5dID0gaW5zZXJ0W25ld1Rva2VuXTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRyZXRbdG9rZW5dID0gZ3JhbW1hclt0b2tlbl07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBVcGRhdGUgcmVmZXJlbmNlcyBpbiBvdGhlciBsYW5ndWFnZSBkZWZpbml0aW9uc1xuXHRcdFx0XHRfLmxhbmd1YWdlcy5ERlMoXy5sYW5ndWFnZXMsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcblx0XHRcdFx0XHRpZiAodmFsdWUgPT09IHJvb3RbaW5zaWRlXSAmJiBrZXkgIT0gaW5zaWRlKSB7XG5cdFx0XHRcdFx0XHR0aGlzW2tleV0gPSByZXQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XG5cdFx0XHRcdHJldHVybiByb290W2luc2lkZV0gPSByZXQ7XG5cdFx0XHR9LFxuXHRcblx0XHRcdC8vIFRyYXZlcnNlIGEgbGFuZ3VhZ2UgZGVmaW5pdGlvbiB3aXRoIERlcHRoIEZpcnN0IFNlYXJjaFxuXHRcdFx0REZTOiBmdW5jdGlvbihvLCBjYWxsYmFjaywgdHlwZSwgdmlzaXRlZCkge1xuXHRcdFx0XHR2aXNpdGVkID0gdmlzaXRlZCB8fCB7fTtcblx0XHRcdFx0Zm9yICh2YXIgaSBpbiBvKSB7XG5cdFx0XHRcdFx0aWYgKG8uaGFzT3duUHJvcGVydHkoaSkpIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwobywgaSwgb1tpXSwgdHlwZSB8fCBpKTtcblx0XG5cdFx0XHRcdFx0XHRpZiAoXy51dGlsLnR5cGUob1tpXSkgPT09ICdPYmplY3QnICYmICF2aXNpdGVkW18udXRpbC5vYmpJZChvW2ldKV0pIHtcblx0XHRcdFx0XHRcdFx0dmlzaXRlZFtfLnV0aWwub2JqSWQob1tpXSldID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0Xy5sYW5ndWFnZXMuREZTKG9baV0sIGNhbGxiYWNrLCBudWxsLCB2aXNpdGVkKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2UgaWYgKF8udXRpbC50eXBlKG9baV0pID09PSAnQXJyYXknICYmICF2aXNpdGVkW18udXRpbC5vYmpJZChvW2ldKV0pIHtcblx0XHRcdFx0XHRcdFx0dmlzaXRlZFtfLnV0aWwub2JqSWQob1tpXSldID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0Xy5sYW5ndWFnZXMuREZTKG9baV0sIGNhbGxiYWNrLCBpLCB2aXNpdGVkKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdHBsdWdpbnM6IHt9LFxuXHRcblx0XHRoaWdobGlnaHRBbGw6IGZ1bmN0aW9uKGFzeW5jLCBjYWxsYmFjaykge1xuXHRcdFx0dmFyIGVudiA9IHtcblx0XHRcdFx0Y2FsbGJhY2s6IGNhbGxiYWNrLFxuXHRcdFx0XHRzZWxlY3RvcjogJ2NvZGVbY2xhc3MqPVwibGFuZ3VhZ2UtXCJdLCBbY2xhc3MqPVwibGFuZ3VhZ2UtXCJdIGNvZGUsIGNvZGVbY2xhc3MqPVwibGFuZy1cIl0sIFtjbGFzcyo9XCJsYW5nLVwiXSBjb2RlJ1xuXHRcdFx0fTtcblx0XG5cdFx0XHRfLmhvb2tzLnJ1bihcImJlZm9yZS1oaWdobGlnaHRhbGxcIiwgZW52KTtcblx0XG5cdFx0XHR2YXIgZWxlbWVudHMgPSBlbnYuZWxlbWVudHMgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbnYuc2VsZWN0b3IpO1xuXHRcblx0XHRcdGZvciAodmFyIGk9MCwgZWxlbWVudDsgZWxlbWVudCA9IGVsZW1lbnRzW2krK107KSB7XG5cdFx0XHRcdF8uaGlnaGxpZ2h0RWxlbWVudChlbGVtZW50LCBhc3luYyA9PT0gdHJ1ZSwgZW52LmNhbGxiYWNrKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRoaWdobGlnaHRFbGVtZW50OiBmdW5jdGlvbihlbGVtZW50LCBhc3luYywgY2FsbGJhY2spIHtcblx0XHRcdC8vIEZpbmQgbGFuZ3VhZ2Vcblx0XHRcdHZhciBsYW5ndWFnZSwgZ3JhbW1hciwgcGFyZW50ID0gZWxlbWVudDtcblx0XG5cdFx0XHR3aGlsZSAocGFyZW50ICYmICFsYW5nLnRlc3QocGFyZW50LmNsYXNzTmFtZSkpIHtcblx0XHRcdFx0cGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKHBhcmVudCkge1xuXHRcdFx0XHRsYW5ndWFnZSA9IChwYXJlbnQuY2xhc3NOYW1lLm1hdGNoKGxhbmcpIHx8IFssJyddKVsxXS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRncmFtbWFyID0gXy5sYW5ndWFnZXNbbGFuZ3VhZ2VdO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFNldCBsYW5ndWFnZSBvbiB0aGUgZWxlbWVudCwgaWYgbm90IHByZXNlbnRcblx0XHRcdGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUucmVwbGFjZShsYW5nLCAnJykucmVwbGFjZSgvXFxzKy9nLCAnICcpICsgJyBsYW5ndWFnZS0nICsgbGFuZ3VhZ2U7XG5cdFxuXHRcdFx0Ly8gU2V0IGxhbmd1YWdlIG9uIHRoZSBwYXJlbnQsIGZvciBzdHlsaW5nXG5cdFx0XHRwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG5cdFxuXHRcdFx0aWYgKC9wcmUvaS50ZXN0KHBhcmVudC5ub2RlTmFtZSkpIHtcblx0XHRcdFx0cGFyZW50LmNsYXNzTmFtZSA9IHBhcmVudC5jbGFzc05hbWUucmVwbGFjZShsYW5nLCAnJykucmVwbGFjZSgvXFxzKy9nLCAnICcpICsgJyBsYW5ndWFnZS0nICsgbGFuZ3VhZ2U7XG5cdFx0XHR9XG5cdFxuXHRcdFx0dmFyIGNvZGUgPSBlbGVtZW50LnRleHRDb250ZW50O1xuXHRcblx0XHRcdHZhciBlbnYgPSB7XG5cdFx0XHRcdGVsZW1lbnQ6IGVsZW1lbnQsXG5cdFx0XHRcdGxhbmd1YWdlOiBsYW5ndWFnZSxcblx0XHRcdFx0Z3JhbW1hcjogZ3JhbW1hcixcblx0XHRcdFx0Y29kZTogY29kZVxuXHRcdFx0fTtcblx0XG5cdFx0XHRfLmhvb2tzLnJ1bignYmVmb3JlLXNhbml0eS1jaGVjaycsIGVudik7XG5cdFxuXHRcdFx0aWYgKCFlbnYuY29kZSB8fCAhZW52LmdyYW1tYXIpIHtcblx0XHRcdFx0Xy5ob29rcy5ydW4oJ2NvbXBsZXRlJywgZW52KTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcblx0XHRcdF8uaG9va3MucnVuKCdiZWZvcmUtaGlnaGxpZ2h0JywgZW52KTtcblx0XG5cdFx0XHRpZiAoYXN5bmMgJiYgX3NlbGYuV29ya2VyKSB7XG5cdFx0XHRcdHZhciB3b3JrZXIgPSBuZXcgV29ya2VyKF8uZmlsZW5hbWUpO1xuXHRcblx0XHRcdFx0d29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2dCkge1xuXHRcdFx0XHRcdGVudi5oaWdobGlnaHRlZENvZGUgPSBldnQuZGF0YTtcblx0XG5cdFx0XHRcdFx0Xy5ob29rcy5ydW4oJ2JlZm9yZS1pbnNlcnQnLCBlbnYpO1xuXHRcblx0XHRcdFx0XHRlbnYuZWxlbWVudC5pbm5lckhUTUwgPSBlbnYuaGlnaGxpZ2h0ZWRDb2RlO1xuXHRcblx0XHRcdFx0XHRjYWxsYmFjayAmJiBjYWxsYmFjay5jYWxsKGVudi5lbGVtZW50KTtcblx0XHRcdFx0XHRfLmhvb2tzLnJ1bignYWZ0ZXItaGlnaGxpZ2h0JywgZW52KTtcblx0XHRcdFx0XHRfLmhvb2tzLnJ1bignY29tcGxldGUnLCBlbnYpO1xuXHRcdFx0XHR9O1xuXHRcblx0XHRcdFx0d29ya2VyLnBvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0XHRsYW5ndWFnZTogZW52Lmxhbmd1YWdlLFxuXHRcdFx0XHRcdGNvZGU6IGVudi5jb2RlLFxuXHRcdFx0XHRcdGltbWVkaWF0ZUNsb3NlOiB0cnVlXG5cdFx0XHRcdH0pKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRlbnYuaGlnaGxpZ2h0ZWRDb2RlID0gXy5oaWdobGlnaHQoZW52LmNvZGUsIGVudi5ncmFtbWFyLCBlbnYubGFuZ3VhZ2UpO1xuXHRcblx0XHRcdFx0Xy5ob29rcy5ydW4oJ2JlZm9yZS1pbnNlcnQnLCBlbnYpO1xuXHRcblx0XHRcdFx0ZW52LmVsZW1lbnQuaW5uZXJIVE1MID0gZW52LmhpZ2hsaWdodGVkQ29kZTtcblx0XG5cdFx0XHRcdGNhbGxiYWNrICYmIGNhbGxiYWNrLmNhbGwoZWxlbWVudCk7XG5cdFxuXHRcdFx0XHRfLmhvb2tzLnJ1bignYWZ0ZXItaGlnaGxpZ2h0JywgZW52KTtcblx0XHRcdFx0Xy5ob29rcy5ydW4oJ2NvbXBsZXRlJywgZW52KTtcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRoaWdobGlnaHQ6IGZ1bmN0aW9uICh0ZXh0LCBncmFtbWFyLCBsYW5ndWFnZSkge1xuXHRcdFx0dmFyIHRva2VucyA9IF8udG9rZW5pemUodGV4dCwgZ3JhbW1hcik7XG5cdFx0XHRyZXR1cm4gVG9rZW4uc3RyaW5naWZ5KF8udXRpbC5lbmNvZGUodG9rZW5zKSwgbGFuZ3VhZ2UpO1xuXHRcdH0sXG5cdFxuXHRcdHRva2VuaXplOiBmdW5jdGlvbih0ZXh0LCBncmFtbWFyLCBsYW5ndWFnZSkge1xuXHRcdFx0dmFyIFRva2VuID0gXy5Ub2tlbjtcblx0XG5cdFx0XHR2YXIgc3RyYXJyID0gW3RleHRdO1xuXHRcblx0XHRcdHZhciByZXN0ID0gZ3JhbW1hci5yZXN0O1xuXHRcblx0XHRcdGlmIChyZXN0KSB7XG5cdFx0XHRcdGZvciAodmFyIHRva2VuIGluIHJlc3QpIHtcblx0XHRcdFx0XHRncmFtbWFyW3Rva2VuXSA9IHJlc3RbdG9rZW5dO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRkZWxldGUgZ3JhbW1hci5yZXN0O1xuXHRcdFx0fVxuXHRcblx0XHRcdHRva2VubG9vcDogZm9yICh2YXIgdG9rZW4gaW4gZ3JhbW1hcikge1xuXHRcdFx0XHRpZighZ3JhbW1hci5oYXNPd25Qcm9wZXJ0eSh0b2tlbikgfHwgIWdyYW1tYXJbdG9rZW5dKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHZhciBwYXR0ZXJucyA9IGdyYW1tYXJbdG9rZW5dO1xuXHRcdFx0XHRwYXR0ZXJucyA9IChfLnV0aWwudHlwZShwYXR0ZXJucykgPT09IFwiQXJyYXlcIikgPyBwYXR0ZXJucyA6IFtwYXR0ZXJuc107XG5cdFxuXHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IHBhdHRlcm5zLmxlbmd0aDsgKytqKSB7XG5cdFx0XHRcdFx0dmFyIHBhdHRlcm4gPSBwYXR0ZXJuc1tqXSxcblx0XHRcdFx0XHRcdGluc2lkZSA9IHBhdHRlcm4uaW5zaWRlLFxuXHRcdFx0XHRcdFx0bG9va2JlaGluZCA9ICEhcGF0dGVybi5sb29rYmVoaW5kLFxuXHRcdFx0XHRcdFx0Z3JlZWR5ID0gISFwYXR0ZXJuLmdyZWVkeSxcblx0XHRcdFx0XHRcdGxvb2tiZWhpbmRMZW5ndGggPSAwLFxuXHRcdFx0XHRcdFx0YWxpYXMgPSBwYXR0ZXJuLmFsaWFzO1xuXHRcblx0XHRcdFx0XHRwYXR0ZXJuID0gcGF0dGVybi5wYXR0ZXJuIHx8IHBhdHRlcm47XG5cdFxuXHRcdFx0XHRcdGZvciAodmFyIGk9MDsgaTxzdHJhcnIubGVuZ3RoOyBpKyspIHsgLy8gRG9u4oCZdCBjYWNoZSBsZW5ndGggYXMgaXQgY2hhbmdlcyBkdXJpbmcgdGhlIGxvb3Bcblx0XG5cdFx0XHRcdFx0XHR2YXIgc3RyID0gc3RyYXJyW2ldO1xuXHRcblx0XHRcdFx0XHRcdGlmIChzdHJhcnIubGVuZ3RoID4gdGV4dC5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0Ly8gU29tZXRoaW5nIHdlbnQgdGVycmlibHkgd3JvbmcsIEFCT1JULCBBQk9SVCFcblx0XHRcdFx0XHRcdFx0YnJlYWsgdG9rZW5sb29wO1xuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdGlmIChzdHIgaW5zdGFuY2VvZiBUb2tlbikge1xuXHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRwYXR0ZXJuLmxhc3RJbmRleCA9IDA7XG5cdFxuXHRcdFx0XHRcdFx0dmFyIG1hdGNoID0gcGF0dGVybi5leGVjKHN0ciksXG5cdFx0XHRcdFx0XHQgICAgZGVsTnVtID0gMTtcblx0XG5cdFx0XHRcdFx0XHQvLyBHcmVlZHkgcGF0dGVybnMgY2FuIG92ZXJyaWRlL3JlbW92ZSB1cCB0byB0d28gcHJldmlvdXNseSBtYXRjaGVkIHRva2Vuc1xuXHRcdFx0XHRcdFx0aWYgKCFtYXRjaCAmJiBncmVlZHkgJiYgaSAhPSBzdHJhcnIubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRcdFx0XHQvLyBSZWNvbnN0cnVjdCB0aGUgb3JpZ2luYWwgdGV4dCB1c2luZyB0aGUgbmV4dCB0d28gdG9rZW5zXG5cdFx0XHRcdFx0XHRcdHZhciBuZXh0VG9rZW4gPSBzdHJhcnJbaSArIDFdLm1hdGNoZWRTdHIgfHwgc3RyYXJyW2kgKyAxXSxcblx0XHRcdFx0XHRcdFx0ICAgIGNvbWJTdHIgPSBzdHIgKyBuZXh0VG9rZW47XG5cdFxuXHRcdFx0XHRcdFx0XHRpZiAoaSA8IHN0cmFyci5sZW5ndGggLSAyKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29tYlN0ciArPSBzdHJhcnJbaSArIDJdLm1hdGNoZWRTdHIgfHwgc3RyYXJyW2kgKyAyXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdFx0Ly8gVHJ5IHRoZSBwYXR0ZXJuIGFnYWluIG9uIHRoZSByZWNvbnN0cnVjdGVkIHRleHRcblx0XHRcdFx0XHRcdFx0cGF0dGVybi5sYXN0SW5kZXggPSAwO1xuXHRcdFx0XHRcdFx0XHRtYXRjaCA9IHBhdHRlcm4uZXhlYyhjb21iU3RyKTtcblx0XHRcdFx0XHRcdFx0aWYgKCFtYXRjaCkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0XHR2YXIgZnJvbSA9IG1hdGNoLmluZGV4ICsgKGxvb2tiZWhpbmQgPyBtYXRjaFsxXS5sZW5ndGggOiAwKTtcblx0XHRcdFx0XHRcdFx0Ly8gVG8gYmUgYSB2YWxpZCBjYW5kaWRhdGUsIHRoZSBuZXcgbWF0Y2ggaGFzIHRvIHN0YXJ0IGluc2lkZSBvZiBzdHJcblx0XHRcdFx0XHRcdFx0aWYgKGZyb20gPj0gc3RyLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHZhciB0byA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoLFxuXHRcdFx0XHRcdFx0XHQgICAgbGVuID0gc3RyLmxlbmd0aCArIG5leHRUb2tlbi5sZW5ndGg7XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyBOdW1iZXIgb2YgdG9rZW5zIHRvIGRlbGV0ZSBhbmQgcmVwbGFjZSB3aXRoIHRoZSBuZXcgbWF0Y2hcblx0XHRcdFx0XHRcdFx0ZGVsTnVtID0gMztcblx0XG5cdFx0XHRcdFx0XHRcdGlmICh0byA8PSBsZW4pIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoc3RyYXJyW2kgKyAxXS5ncmVlZHkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRkZWxOdW0gPSAyO1xuXHRcdFx0XHRcdFx0XHRcdGNvbWJTdHIgPSBjb21iU3RyLnNsaWNlKDAsIGxlbik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0c3RyID0gY29tYlN0cjtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRpZiAoIW1hdGNoKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdGlmKGxvb2tiZWhpbmQpIHtcblx0XHRcdFx0XHRcdFx0bG9va2JlaGluZExlbmd0aCA9IG1hdGNoWzFdLmxlbmd0aDtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHR2YXIgZnJvbSA9IG1hdGNoLmluZGV4ICsgbG9va2JlaGluZExlbmd0aCxcblx0XHRcdFx0XHRcdCAgICBtYXRjaCA9IG1hdGNoWzBdLnNsaWNlKGxvb2tiZWhpbmRMZW5ndGgpLFxuXHRcdFx0XHRcdFx0ICAgIHRvID0gZnJvbSArIG1hdGNoLmxlbmd0aCxcblx0XHRcdFx0XHRcdCAgICBiZWZvcmUgPSBzdHIuc2xpY2UoMCwgZnJvbSksXG5cdFx0XHRcdFx0XHQgICAgYWZ0ZXIgPSBzdHIuc2xpY2UodG8pO1xuXHRcblx0XHRcdFx0XHRcdHZhciBhcmdzID0gW2ksIGRlbE51bV07XG5cdFxuXHRcdFx0XHRcdFx0aWYgKGJlZm9yZSkge1xuXHRcdFx0XHRcdFx0XHRhcmdzLnB1c2goYmVmb3JlKTtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHR2YXIgd3JhcHBlZCA9IG5ldyBUb2tlbih0b2tlbiwgaW5zaWRlPyBfLnRva2VuaXplKG1hdGNoLCBpbnNpZGUpIDogbWF0Y2gsIGFsaWFzLCBtYXRjaCwgZ3JlZWR5KTtcblx0XG5cdFx0XHRcdFx0XHRhcmdzLnB1c2god3JhcHBlZCk7XG5cdFxuXHRcdFx0XHRcdFx0aWYgKGFmdGVyKSB7XG5cdFx0XHRcdFx0XHRcdGFyZ3MucHVzaChhZnRlcik7XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0QXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShzdHJhcnIsIGFyZ3MpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiBzdHJhcnI7XG5cdFx0fSxcblx0XG5cdFx0aG9va3M6IHtcblx0XHRcdGFsbDoge30sXG5cdFxuXHRcdFx0YWRkOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2spIHtcblx0XHRcdFx0dmFyIGhvb2tzID0gXy5ob29rcy5hbGw7XG5cdFxuXHRcdFx0XHRob29rc1tuYW1lXSA9IGhvb2tzW25hbWVdIHx8IFtdO1xuXHRcblx0XHRcdFx0aG9va3NbbmFtZV0ucHVzaChjYWxsYmFjayk7XG5cdFx0XHR9LFxuXHRcblx0XHRcdHJ1bjogZnVuY3Rpb24gKG5hbWUsIGVudikge1xuXHRcdFx0XHR2YXIgY2FsbGJhY2tzID0gXy5ob29rcy5hbGxbbmFtZV07XG5cdFxuXHRcdFx0XHRpZiAoIWNhbGxiYWNrcyB8fCAhY2FsbGJhY2tzLmxlbmd0aCkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Zm9yICh2YXIgaT0wLCBjYWxsYmFjazsgY2FsbGJhY2sgPSBjYWxsYmFja3NbaSsrXTspIHtcblx0XHRcdFx0XHRjYWxsYmFjayhlbnYpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRcblx0dmFyIFRva2VuID0gXy5Ub2tlbiA9IGZ1bmN0aW9uKHR5cGUsIGNvbnRlbnQsIGFsaWFzLCBtYXRjaGVkU3RyLCBncmVlZHkpIHtcblx0XHR0aGlzLnR5cGUgPSB0eXBlO1xuXHRcdHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG5cdFx0dGhpcy5hbGlhcyA9IGFsaWFzO1xuXHRcdC8vIENvcHkgb2YgdGhlIGZ1bGwgc3RyaW5nIHRoaXMgdG9rZW4gd2FzIGNyZWF0ZWQgZnJvbVxuXHRcdHRoaXMubWF0Y2hlZFN0ciA9IG1hdGNoZWRTdHIgfHwgbnVsbDtcblx0XHR0aGlzLmdyZWVkeSA9ICEhZ3JlZWR5O1xuXHR9O1xuXHRcblx0VG9rZW4uc3RyaW5naWZ5ID0gZnVuY3Rpb24obywgbGFuZ3VhZ2UsIHBhcmVudCkge1xuXHRcdGlmICh0eXBlb2YgbyA9PSAnc3RyaW5nJykge1xuXHRcdFx0cmV0dXJuIG87XG5cdFx0fVxuXHRcblx0XHRpZiAoXy51dGlsLnR5cGUobykgPT09ICdBcnJheScpIHtcblx0XHRcdHJldHVybiBvLm1hcChmdW5jdGlvbihlbGVtZW50KSB7XG5cdFx0XHRcdHJldHVybiBUb2tlbi5zdHJpbmdpZnkoZWxlbWVudCwgbGFuZ3VhZ2UsIG8pO1xuXHRcdFx0fSkuam9pbignJyk7XG5cdFx0fVxuXHRcblx0XHR2YXIgZW52ID0ge1xuXHRcdFx0dHlwZTogby50eXBlLFxuXHRcdFx0Y29udGVudDogVG9rZW4uc3RyaW5naWZ5KG8uY29udGVudCwgbGFuZ3VhZ2UsIHBhcmVudCksXG5cdFx0XHR0YWc6ICdzcGFuJyxcblx0XHRcdGNsYXNzZXM6IFsndG9rZW4nLCBvLnR5cGVdLFxuXHRcdFx0YXR0cmlidXRlczoge30sXG5cdFx0XHRsYW5ndWFnZTogbGFuZ3VhZ2UsXG5cdFx0XHRwYXJlbnQ6IHBhcmVudFxuXHRcdH07XG5cdFxuXHRcdGlmIChlbnYudHlwZSA9PSAnY29tbWVudCcpIHtcblx0XHRcdGVudi5hdHRyaWJ1dGVzWydzcGVsbGNoZWNrJ10gPSAndHJ1ZSc7XG5cdFx0fVxuXHRcblx0XHRpZiAoby5hbGlhcykge1xuXHRcdFx0dmFyIGFsaWFzZXMgPSBfLnV0aWwudHlwZShvLmFsaWFzKSA9PT0gJ0FycmF5JyA/IG8uYWxpYXMgOiBbby5hbGlhc107XG5cdFx0XHRBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShlbnYuY2xhc3NlcywgYWxpYXNlcyk7XG5cdFx0fVxuXHRcblx0XHRfLmhvb2tzLnJ1bignd3JhcCcsIGVudik7XG5cdFxuXHRcdHZhciBhdHRyaWJ1dGVzID0gJyc7XG5cdFxuXHRcdGZvciAodmFyIG5hbWUgaW4gZW52LmF0dHJpYnV0ZXMpIHtcblx0XHRcdGF0dHJpYnV0ZXMgKz0gKGF0dHJpYnV0ZXMgPyAnICcgOiAnJykgKyBuYW1lICsgJz1cIicgKyAoZW52LmF0dHJpYnV0ZXNbbmFtZV0gfHwgJycpICsgJ1wiJztcblx0XHR9XG5cdFxuXHRcdHJldHVybiAnPCcgKyBlbnYudGFnICsgJyBjbGFzcz1cIicgKyBlbnYuY2xhc3Nlcy5qb2luKCcgJykgKyAnXCIgJyArIGF0dHJpYnV0ZXMgKyAnPicgKyBlbnYuY29udGVudCArICc8LycgKyBlbnYudGFnICsgJz4nO1xuXHRcblx0fTtcblx0XG5cdGlmICghX3NlbGYuZG9jdW1lbnQpIHtcblx0XHRpZiAoIV9zZWxmLmFkZEV2ZW50TGlzdGVuZXIpIHtcblx0XHRcdC8vIGluIE5vZGUuanNcblx0XHRcdHJldHVybiBfc2VsZi5QcmlzbTtcblx0XHR9XG5cdCBcdC8vIEluIHdvcmtlclxuXHRcdF9zZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihldnQpIHtcblx0XHRcdHZhciBtZXNzYWdlID0gSlNPTi5wYXJzZShldnQuZGF0YSksXG5cdFx0XHQgICAgbGFuZyA9IG1lc3NhZ2UubGFuZ3VhZ2UsXG5cdFx0XHQgICAgY29kZSA9IG1lc3NhZ2UuY29kZSxcblx0XHRcdCAgICBpbW1lZGlhdGVDbG9zZSA9IG1lc3NhZ2UuaW1tZWRpYXRlQ2xvc2U7XG5cdFxuXHRcdFx0X3NlbGYucG9zdE1lc3NhZ2UoXy5oaWdobGlnaHQoY29kZSwgXy5sYW5ndWFnZXNbbGFuZ10sIGxhbmcpKTtcblx0XHRcdGlmIChpbW1lZGlhdGVDbG9zZSkge1xuXHRcdFx0XHRfc2VsZi5jbG9zZSgpO1xuXHRcdFx0fVxuXHRcdH0sIGZhbHNlKTtcblx0XG5cdFx0cmV0dXJuIF9zZWxmLlByaXNtO1xuXHR9XG5cdFxuXHQvL0dldCBjdXJyZW50IHNjcmlwdCBhbmQgaGlnaGxpZ2h0XG5cdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0IHx8IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIikpLnBvcCgpO1xuXHRcblx0aWYgKHNjcmlwdCkge1xuXHRcdF8uZmlsZW5hbWUgPSBzY3JpcHQuc3JjO1xuXHRcblx0XHRpZiAoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAmJiAhc2NyaXB0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1tYW51YWwnKSkge1xuXHRcdFx0aWYoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gXCJsb2FkaW5nXCIpIHtcblx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKF8uaGlnaGxpZ2h0QWxsLCAwKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgXy5oaWdobGlnaHRBbGwpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRcblx0cmV0dXJuIF9zZWxmLlByaXNtO1xuXHRcblx0fSkoKTtcblx0XG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gUHJpc207XG5cdH1cblx0XG5cdC8vIGhhY2sgZm9yIGNvbXBvbmVudHMgdG8gd29yayBjb3JyZWN0bHkgaW4gbm9kZS5qc1xuXHRpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRnbG9iYWwuUHJpc20gPSBQcmlzbTtcblx0fVxuXHRcblx0XG5cdC8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICBCZWdpbiBwcmlzbS1tYXJrdXAuanNcblx0KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXHRcblx0UHJpc20ubGFuZ3VhZ2VzLm1hcmt1cCA9IHtcblx0XHQnY29tbWVudCc6IC88IS0tW1xcd1xcV10qPy0tPi8sXG5cdFx0J3Byb2xvZyc6IC88XFw/W1xcd1xcV10rP1xcPz4vLFxuXHRcdCdkb2N0eXBlJzogLzwhRE9DVFlQRVtcXHdcXFddKz8+Lyxcblx0XHQnY2RhdGEnOiAvPCFcXFtDREFUQVxcW1tcXHdcXFddKj9dXT4vaSxcblx0XHQndGFnJzoge1xuXHRcdFx0cGF0dGVybjogLzxcXC8/KD8hXFxkKVteXFxzPlxcLz0uJDxdKyg/OlxccytbXlxccz5cXC89XSsoPzo9KD86KFwifCcpKD86XFxcXFxcMXxcXFxcPyg/IVxcMSlbXFx3XFxXXSkqXFwxfFteXFxzJ1wiPj1dKykpPykqXFxzKlxcLz8+L2ksXG5cdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0J3RhZyc6IHtcblx0XHRcdFx0XHRwYXR0ZXJuOiAvXjxcXC8/W15cXHM+XFwvXSsvaSxcblx0XHRcdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0XHRcdCdwdW5jdHVhdGlvbic6IC9ePFxcLz8vLFxuXHRcdFx0XHRcdFx0J25hbWVzcGFjZSc6IC9eW15cXHM+XFwvOl0rOi9cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdCdhdHRyLXZhbHVlJzoge1xuXHRcdFx0XHRcdHBhdHRlcm46IC89KD86KCd8XCIpW1xcd1xcV10qPyhcXDEpfFteXFxzPl0rKS9pLFxuXHRcdFx0XHRcdGluc2lkZToge1xuXHRcdFx0XHRcdFx0J3B1bmN0dWF0aW9uJzogL1s9PlwiJ10vXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHQncHVuY3R1YXRpb24nOiAvXFwvPz4vLFxuXHRcdFx0XHQnYXR0ci1uYW1lJzoge1xuXHRcdFx0XHRcdHBhdHRlcm46IC9bXlxccz5cXC9dKy8sXG5cdFx0XHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdFx0XHQnbmFtZXNwYWNlJzogL15bXlxccz5cXC86XSs6L1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcblx0XHRcdH1cblx0XHR9LFxuXHRcdCdlbnRpdHknOiAvJiM/W1xcZGEtel17MSw4fTsvaVxuXHR9O1xuXHRcblx0Ly8gUGx1Z2luIHRvIG1ha2UgZW50aXR5IHRpdGxlIHNob3cgdGhlIHJlYWwgZW50aXR5LCBpZGVhIGJ5IFJvbWFuIEtvbWFyb3Zcblx0UHJpc20uaG9va3MuYWRkKCd3cmFwJywgZnVuY3Rpb24oZW52KSB7XG5cdFxuXHRcdGlmIChlbnYudHlwZSA9PT0gJ2VudGl0eScpIHtcblx0XHRcdGVudi5hdHRyaWJ1dGVzWyd0aXRsZSddID0gZW52LmNvbnRlbnQucmVwbGFjZSgvJmFtcDsvLCAnJicpO1xuXHRcdH1cblx0fSk7XG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMueG1sID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblx0UHJpc20ubGFuZ3VhZ2VzLmh0bWwgPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwO1xuXHRQcmlzbS5sYW5ndWFnZXMubWF0aG1sID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblx0UHJpc20ubGFuZ3VhZ2VzLnN2ZyA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5cdFxuXHRcblx0LyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXHQgICAgIEJlZ2luIHByaXNtLWNzcy5qc1xuXHQqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMuY3NzID0ge1xuXHRcdCdjb21tZW50JzogL1xcL1xcKltcXHdcXFddKj9cXCpcXC8vLFxuXHRcdCdhdHJ1bGUnOiB7XG5cdFx0XHRwYXR0ZXJuOiAvQFtcXHctXSs/Lio/KDt8KD89XFxzKlxceykpL2ksXG5cdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0J3J1bGUnOiAvQFtcXHctXSsvXG5cdFx0XHRcdC8vIFNlZSByZXN0IGJlbG93XG5cdFx0XHR9XG5cdFx0fSxcblx0XHQndXJsJzogL3VybFxcKCg/OihbXCInXSkoXFxcXCg/OlxcclxcbnxbXFx3XFxXXSl8KD8hXFwxKVteXFxcXFxcclxcbl0pKlxcMXwuKj8pXFwpL2ksXG5cdFx0J3NlbGVjdG9yJzogL1teXFx7XFx9XFxzXVteXFx7XFx9O10qPyg/PVxccypcXHspLyxcblx0XHQnc3RyaW5nJzogLyhcInwnKShcXFxcKD86XFxyXFxufFtcXHdcXFddKXwoPyFcXDEpW15cXFxcXFxyXFxuXSkqXFwxLyxcblx0XHQncHJvcGVydHknOiAvKFxcYnxcXEIpW1xcdy1dKyg/PVxccyo6KS9pLFxuXHRcdCdpbXBvcnRhbnQnOiAvXFxCIWltcG9ydGFudFxcYi9pLFxuXHRcdCdmdW5jdGlvbic6IC9bLWEtejAtOV0rKD89XFwoKS9pLFxuXHRcdCdwdW5jdHVhdGlvbic6IC9bKCl7fTs6XS9cblx0fTtcblx0XG5cdFByaXNtLmxhbmd1YWdlcy5jc3NbJ2F0cnVsZSddLmluc2lkZS5yZXN0ID0gUHJpc20udXRpbC5jbG9uZShQcmlzbS5sYW5ndWFnZXMuY3NzKTtcblx0XG5cdGlmIChQcmlzbS5sYW5ndWFnZXMubWFya3VwKSB7XG5cdFx0UHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnbWFya3VwJywgJ3RhZycsIHtcblx0XHRcdCdzdHlsZSc6IHtcblx0XHRcdFx0cGF0dGVybjogLyg8c3R5bGVbXFx3XFxXXSo/PilbXFx3XFxXXSo/KD89PFxcL3N0eWxlPikvaSxcblx0XHRcdFx0bG9va2JlaGluZDogdHJ1ZSxcblx0XHRcdFx0aW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuY3NzLFxuXHRcdFx0XHRhbGlhczogJ2xhbmd1YWdlLWNzcydcblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHRQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdpbnNpZGUnLCAnYXR0ci12YWx1ZScsIHtcblx0XHRcdCdzdHlsZS1hdHRyJzoge1xuXHRcdFx0XHRwYXR0ZXJuOiAvXFxzKnN0eWxlPShcInwnKS4qP1xcMS9pLFxuXHRcdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0XHQnYXR0ci1uYW1lJzoge1xuXHRcdFx0XHRcdFx0cGF0dGVybjogL15cXHMqc3R5bGUvaSxcblx0XHRcdFx0XHRcdGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cC50YWcuaW5zaWRlXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQncHVuY3R1YXRpb24nOiAvXlxccyo9XFxzKlsnXCJdfFsnXCJdXFxzKiQvLFxuXHRcdFx0XHRcdCdhdHRyLXZhbHVlJzoge1xuXHRcdFx0XHRcdFx0cGF0dGVybjogLy4rL2ksXG5cdFx0XHRcdFx0XHRpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5jc3Ncblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFsaWFzOiAnbGFuZ3VhZ2UtY3NzJ1xuXHRcdFx0fVxuXHRcdH0sIFByaXNtLmxhbmd1YWdlcy5tYXJrdXAudGFnKTtcblx0fVxuXHRcblx0LyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXHQgICAgIEJlZ2luIHByaXNtLWNsaWtlLmpzXG5cdCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblx0XG5cdFByaXNtLmxhbmd1YWdlcy5jbGlrZSA9IHtcblx0XHQnY29tbWVudCc6IFtcblx0XHRcdHtcblx0XHRcdFx0cGF0dGVybjogLyhefFteXFxcXF0pXFwvXFwqW1xcd1xcV10qP1xcKlxcLy8sXG5cdFx0XHRcdGxvb2tiZWhpbmQ6IHRydWVcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHBhdHRlcm46IC8oXnxbXlxcXFw6XSlcXC9cXC8uKi8sXG5cdFx0XHRcdGxvb2tiZWhpbmQ6IHRydWVcblx0XHRcdH1cblx0XHRdLFxuXHRcdCdzdHJpbmcnOiB7XG5cdFx0XHRwYXR0ZXJuOiAvKFtcIiddKShcXFxcKD86XFxyXFxufFtcXHNcXFNdKXwoPyFcXDEpW15cXFxcXFxyXFxuXSkqXFwxLyxcblx0XHRcdGdyZWVkeTogdHJ1ZVxuXHRcdH0sXG5cdFx0J2NsYXNzLW5hbWUnOiB7XG5cdFx0XHRwYXR0ZXJuOiAvKCg/OlxcYig/OmNsYXNzfGludGVyZmFjZXxleHRlbmRzfGltcGxlbWVudHN8dHJhaXR8aW5zdGFuY2VvZnxuZXcpXFxzKyl8KD86Y2F0Y2hcXHMrXFwoKSlbYS16MC05X1xcLlxcXFxdKy9pLFxuXHRcdFx0bG9va2JlaGluZDogdHJ1ZSxcblx0XHRcdGluc2lkZToge1xuXHRcdFx0XHRwdW5jdHVhdGlvbjogLyhcXC58XFxcXCkvXG5cdFx0XHR9XG5cdFx0fSxcblx0XHQna2V5d29yZCc6IC9cXGIoaWZ8ZWxzZXx3aGlsZXxkb3xmb3J8cmV0dXJufGlufGluc3RhbmNlb2Z8ZnVuY3Rpb258bmV3fHRyeXx0aHJvd3xjYXRjaHxmaW5hbGx5fG51bGx8YnJlYWt8Y29udGludWUpXFxiLyxcblx0XHQnYm9vbGVhbic6IC9cXGIodHJ1ZXxmYWxzZSlcXGIvLFxuXHRcdCdmdW5jdGlvbic6IC9bYS16MC05X10rKD89XFwoKS9pLFxuXHRcdCdudW1iZXInOiAvXFxiLT8oPzoweFtcXGRhLWZdK3xcXGQqXFwuP1xcZCsoPzplWystXT9cXGQrKT8pXFxiL2ksXG5cdFx0J29wZXJhdG9yJzogLy0tP3xcXCtcXCs/fCE9Pz0/fDw9P3w+PT98PT0/PT98JiY/fFxcfFxcfD98XFw/fFxcKnxcXC98fnxcXF58JS8sXG5cdFx0J3B1bmN0dWF0aW9uJzogL1t7fVtcXF07KCksLjpdL1xuXHR9O1xuXHRcblx0XG5cdC8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICBCZWdpbiBwcmlzbS1qYXZhc2NyaXB0LmpzXG5cdCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblx0XG5cdFByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0ID0gUHJpc20ubGFuZ3VhZ2VzLmV4dGVuZCgnY2xpa2UnLCB7XG5cdFx0J2tleXdvcmQnOiAvXFxiKGFzfGFzeW5jfGF3YWl0fGJyZWFrfGNhc2V8Y2F0Y2h8Y2xhc3N8Y29uc3R8Y29udGludWV8ZGVidWdnZXJ8ZGVmYXVsdHxkZWxldGV8ZG98ZWxzZXxlbnVtfGV4cG9ydHxleHRlbmRzfGZpbmFsbHl8Zm9yfGZyb218ZnVuY3Rpb258Z2V0fGlmfGltcGxlbWVudHN8aW1wb3J0fGlufGluc3RhbmNlb2Z8aW50ZXJmYWNlfGxldHxuZXd8bnVsbHxvZnxwYWNrYWdlfHByaXZhdGV8cHJvdGVjdGVkfHB1YmxpY3xyZXR1cm58c2V0fHN0YXRpY3xzdXBlcnxzd2l0Y2h8dGhpc3x0aHJvd3x0cnl8dHlwZW9mfHZhcnx2b2lkfHdoaWxlfHdpdGh8eWllbGQpXFxiLyxcblx0XHQnbnVtYmVyJzogL1xcYi0/KDB4W1xcZEEtRmEtZl0rfDBiWzAxXSt8MG9bMC03XSt8XFxkKlxcLj9cXGQrKFtFZV1bKy1dP1xcZCspP3xOYU58SW5maW5pdHkpXFxiLyxcblx0XHQvLyBBbGxvdyBmb3IgYWxsIG5vbi1BU0NJSSBjaGFyYWN0ZXJzIChTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjAwODQ0NClcblx0XHQnZnVuY3Rpb24nOiAvW18kYS16QS1aXFx4QTAtXFx1RkZGRl1bXyRhLXpBLVowLTlcXHhBMC1cXHVGRkZGXSooPz1cXCgpL2lcblx0fSk7XG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdqYXZhc2NyaXB0JywgJ2tleXdvcmQnLCB7XG5cdFx0J3JlZ2V4Jzoge1xuXHRcdFx0cGF0dGVybjogLyhefFteL10pXFwvKD8hXFwvKShcXFsuKz9dfFxcXFwufFteL1xcXFxcXHJcXG5dKStcXC9bZ2lteXVdezAsNX0oPz1cXHMqKCR8W1xcclxcbiwuO30pXSkpLyxcblx0XHRcdGxvb2tiZWhpbmQ6IHRydWUsXG5cdFx0XHRncmVlZHk6IHRydWVcblx0XHR9XG5cdH0pO1xuXHRcblx0UHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnamF2YXNjcmlwdCcsICdzdHJpbmcnLCB7XG5cdFx0J3RlbXBsYXRlLXN0cmluZyc6IHtcblx0XHRcdHBhdHRlcm46IC9gKD86XFxcXFxcXFx8XFxcXD9bXlxcXFxdKSo/YC8sXG5cdFx0XHRncmVlZHk6IHRydWUsXG5cdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0J2ludGVycG9sYXRpb24nOiB7XG5cdFx0XHRcdFx0cGF0dGVybjogL1xcJFxce1tefV0rXFx9Lyxcblx0XHRcdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0XHRcdCdpbnRlcnBvbGF0aW9uLXB1bmN0dWF0aW9uJzoge1xuXHRcdFx0XHRcdFx0XHRwYXR0ZXJuOiAvXlxcJFxce3xcXH0kLyxcblx0XHRcdFx0XHRcdFx0YWxpYXM6ICdwdW5jdHVhdGlvbidcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyZXN0OiBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0J3N0cmluZyc6IC9bXFxzXFxTXSsvXG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblx0XG5cdGlmIChQcmlzbS5sYW5ndWFnZXMubWFya3VwKSB7XG5cdFx0UHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnbWFya3VwJywgJ3RhZycsIHtcblx0XHRcdCdzY3JpcHQnOiB7XG5cdFx0XHRcdHBhdHRlcm46IC8oPHNjcmlwdFtcXHdcXFddKj8+KVtcXHdcXFddKj8oPz08XFwvc2NyaXB0PikvaSxcblx0XHRcdFx0bG9va2JlaGluZDogdHJ1ZSxcblx0XHRcdFx0aW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdCxcblx0XHRcdFx0YWxpYXM6ICdsYW5ndWFnZS1qYXZhc2NyaXB0J1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMuanMgPSBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdDtcblx0XG5cdC8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICBCZWdpbiBwcmlzbS1maWxlLWhpZ2hsaWdodC5qc1xuXHQqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cdFxuXHQoZnVuY3Rpb24gKCkge1xuXHRcdGlmICh0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgfHwgIXNlbGYuUHJpc20gfHwgIXNlbGYuZG9jdW1lbnQgfHwgIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFxuXHRcdHNlbGYuUHJpc20uZmlsZUhpZ2hsaWdodCA9IGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdHZhciBFeHRlbnNpb25zID0ge1xuXHRcdFx0XHQnanMnOiAnamF2YXNjcmlwdCcsXG5cdFx0XHRcdCdweSc6ICdweXRob24nLFxuXHRcdFx0XHQncmInOiAncnVieScsXG5cdFx0XHRcdCdwczEnOiAncG93ZXJzaGVsbCcsXG5cdFx0XHRcdCdwc20xJzogJ3Bvd2Vyc2hlbGwnLFxuXHRcdFx0XHQnc2gnOiAnYmFzaCcsXG5cdFx0XHRcdCdiYXQnOiAnYmF0Y2gnLFxuXHRcdFx0XHQnaCc6ICdjJyxcblx0XHRcdFx0J3RleCc6ICdsYXRleCdcblx0XHRcdH07XG5cdFxuXHRcdFx0aWYoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpIHsgLy8gQ2hlY2sgdG8gcHJldmVudCBlcnJvciBpbiBJRThcblx0XHRcdFx0QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgncHJlW2RhdGEtc3JjXScpKS5mb3JFYWNoKGZ1bmN0aW9uIChwcmUpIHtcblx0XHRcdFx0XHR2YXIgc3JjID0gcHJlLmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKTtcblx0XG5cdFx0XHRcdFx0dmFyIGxhbmd1YWdlLCBwYXJlbnQgPSBwcmU7XG5cdFx0XHRcdFx0dmFyIGxhbmcgPSAvXFxibGFuZyg/OnVhZ2UpPy0oPyFcXCopKFxcdyspXFxiL2k7XG5cdFx0XHRcdFx0d2hpbGUgKHBhcmVudCAmJiAhbGFuZy50ZXN0KHBhcmVudC5jbGFzc05hbWUpKSB7XG5cdFx0XHRcdFx0XHRwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdGlmIChwYXJlbnQpIHtcblx0XHRcdFx0XHRcdGxhbmd1YWdlID0gKHByZS5jbGFzc05hbWUubWF0Y2gobGFuZykgfHwgWywgJyddKVsxXTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdGlmICghbGFuZ3VhZ2UpIHtcblx0XHRcdFx0XHRcdHZhciBleHRlbnNpb24gPSAoc3JjLm1hdGNoKC9cXC4oXFx3KykkLykgfHwgWywgJyddKVsxXTtcblx0XHRcdFx0XHRcdGxhbmd1YWdlID0gRXh0ZW5zaW9uc1tleHRlbnNpb25dIHx8IGV4dGVuc2lvbjtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdHZhciBjb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY29kZScpO1xuXHRcdFx0XHRcdGNvZGUuY2xhc3NOYW1lID0gJ2xhbmd1YWdlLScgKyBsYW5ndWFnZTtcblx0XG5cdFx0XHRcdFx0cHJlLnRleHRDb250ZW50ID0gJyc7XG5cdFxuXHRcdFx0XHRcdGNvZGUudGV4dENvbnRlbnQgPSAnTG9hZGluZ+KApic7XG5cdFxuXHRcdFx0XHRcdHByZS5hcHBlbmRDaGlsZChjb2RlKTtcblx0XG5cdFx0XHRcdFx0dmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcblx0XHRcdFx0XHR4aHIub3BlbignR0VUJywgc3JjLCB0cnVlKTtcblx0XG5cdFx0XHRcdFx0eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdGlmICh4aHIucmVhZHlTdGF0ZSA9PSA0KSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRpZiAoeGhyLnN0YXR1cyA8IDQwMCAmJiB4aHIucmVzcG9uc2VUZXh0KSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29kZS50ZXh0Q29udGVudCA9IHhoci5yZXNwb25zZVRleHQ7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdFByaXNtLmhpZ2hsaWdodEVsZW1lbnQoY29kZSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAoeGhyLnN0YXR1cyA+PSA0MDApIHtcblx0XHRcdFx0XHRcdFx0XHRjb2RlLnRleHRDb250ZW50ID0gJ+KcliBFcnJvciAnICsgeGhyLnN0YXR1cyArICcgd2hpbGUgZmV0Y2hpbmcgZmlsZTogJyArIHhoci5zdGF0dXNUZXh0O1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGNvZGUudGV4dENvbnRlbnQgPSAn4pyWIEVycm9yOiBGaWxlIGRvZXMgbm90IGV4aXN0IG9yIGlzIGVtcHR5Jztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFxuXHRcdFx0XHRcdHhoci5zZW5kKG51bGwpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XG5cdFx0fTtcblx0XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHNlbGYuUHJpc20uZmlsZUhpZ2hsaWdodCk7XG5cdFxuXHR9KSgpO1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogMTU0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPHRhYmxlIGNsYXNzPXNnX2MtYXBpLXRhYmxlPiA8dHI+IDx0aD4gTmFtZSA8L3RoPiA8dGg+IFR5cGUgPC90aD4gPHRoPiBSZXF1aXJlZCA8L3RoPiA8dGg+IERlZmF1bHQgPC90aD4gPHRoPiBEZXNjcmlwdGlvbiA8L3RoPiA8L3RyPiA8dHIgdi1mb3I9XFxcIml0ZW0gaW4gaXRlbXNcXFwiPiA8dGQ+e3tpdGVtLm5hbWV9fTwvdGQ+IDx0ZD57e2l0ZW0udHlwZX19PC90ZD4gPHRkPnt7aXRlbS5pc1JlcXVpcmVkfX08L3RkPiA8dGQ+e3tpdGVtLmRlZmF1bHR9fTwvdGQ+IDx0ZD57e2l0ZW0uZGVzY319PC90ZD4gPC90cj4gPC90YWJsZT4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5BbGVydDwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8YWxlcnQgdHlwZT1lcnJvcj5UaGlzIGlzIGFuIGVycm9yIGFsZXJ0LjwvYWxlcnQ+IDxhbGVydCB0eXBlPWluZm8+VGhpcyBpcyBhbiBpbmZvIGFsZXJ0LjwvYWxlcnQ+IDxhbGVydCB0eXBlPXN1Y2Nlc3M+VGhpcyBpcyBhIHN1Y2Nlc3MgYWxlcnQuPC9hbGVydD4gPGFsZXJ0IHR5cGU9c3VjY2VzcyA6ZGlzbWlzc2libGU9ZmFsc2U+VGhpcyBpcyBub3QgYSBkaXNtaXNzaWJsZSBhbGVydC48L2FsZXJ0PiA8YWxlcnQgdHlwZT1zdWNjZXNzIDpvbi1jbG9zZWQ9ZGlzbWlzc0NhbGxCYWNrPlRoaXMgaXMgYW4gYWxlcnQgd2l0aCBjYWxsYmFjay48L2FsZXJ0PiA8YWxlcnQgdHlwZT1pbmZvIDp0aW1lb3V0PTUwMDA+VGhpcyBhbGVydCBzaG91bGQgdGltZW91dCBpbiA1IHNlY29uZHMuPC9hbGVydD4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4gICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cXFwiZXJyb3JcXFwiJmd0O1RoaXMgaXMgYW4gZXJyb3IgYWxlcnQuJmx0Oy9hbGVydCZndDtcXG4gICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cXFwiaW5mb1xcXCImZ3Q7VGhpcyBpcyBhbiBpbmZvIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuICAgICAgICAgJmx0O2FsZXJ0IHR5cGU9XFxcInN1Y2Nlc3NcXFwiJmd0O1RoaXMgaXMgYSBzdWNjZXNzIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuICAgICAgICAgJmx0O2FsZXJ0IHR5cGU9XFxcInN1Y2Nlc3NcXFwiIDpkaXNtaXNzaWJsZT1cXFwiZmFsc2VcXFwiJmd0O1RoaXMgaXMgbm90IGEgZGlzbWlzc2libGUgYWxlcnQuJmx0Oy9hbGVydCZndDtcXG4gICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cXFwic3VjY2Vzc1xcXCIgOm9uLWNsb3NlZD1cXFwiZGlzbWlzc0NhbGxCYWNrXFxcIiZndDtUaGlzIGlzIGFuIGFsZXJ0IHdpdGggY2FsbGJhY2suJmx0Oy9hbGVydCZndDtcXG4gICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cXFwic3VjY2Vzc1xcXCIgOnRpbWVvdXQ9XFxcIjUwMDBcXFwiJmd0O1RoaXMgYWxlcnQgc2hvdWxkIHRpbWVvdXQgaW4gNSBzZWNvbmRzLiZsdDsvYWxlcnQmZ3Q7XFxuICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG4vKioqLyB9LFxuLyogMTU2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+Q29sbGFwc2FibGUgUGFuZWw8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVxcXCJQYW5lbCAxXFxcIiA6aXMtb3Blbj10cnVlPiBQYW5lbCAxIGNvbnRlbnQgPC9jb2xsYXBzYWJsZS1wYW5lbD4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVxcXCJQYW5lbCAyXFxcIj4gUGFuZWwgMiBjb250ZW50IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuICAgICAgICAgICAgICZsdDtjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cXFwiUGFuZWwgMVxcXCIgOmlzLW9wZW49XFxcInRydWVcXFwiJmd0O1xcbiAgICAgICAgICAgICAgIFBhbmVsIDEgY29udGVudFxcbiAgICAgICAgICAgICAmbHQ7L2NvbGxhcHNhYmxlLXBhbmVsJmd0O1xcbiAgICAgICAgICAgICAmbHQ7Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XFxcIlBhbmVsIDJcXFwiJmd0O1xcbiAgICAgICAgICAgICAgIFBhbmVsIDIgY29udGVudFxcbiAgICAgICAgICAgICAmbHQ7L2NvbGxhcHNhYmxlLXBhbmVsJmd0O1xcbiAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE1NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPkdldHRpbmcgU3RhcnRlZDwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS01IGh5X3QtZ3JleVxcXCI+Q0ROPC9oMz4gPHA+IC4uLiA8L3A+IDwvZGl2PiA8L2Rpdj48L3NlY3Rpb24+IFwiO1xuXG4vKioqLyB9LFxuLyogMTU4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+TGVnYWwgU3lzdGVtPC9oMj4gPGhyIGNsYXNzPWh5X3Utc3BhY2UtbWItMj4gPGRpdiBjbGFzcz1cXFwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxkaXYgY2xhc3M9c2dfYy1kZW1vX19jb250YWluZXI+IDxwIGNsYXNzPVxcXCJoeV9jLWNvcHkgaHlfYy1jb3B5LS1ib2R5IGh5X3QtZ3JleVxcXCI+IExvcmVtIGlwc3VtPGxlZ2FsLWNvdW50ZXIgdi1vdmVybGF5LW9wZW5lcj1sZWdhbC1vdmVybGF5IGxlZ2FsLWtleT1ocy1yZWZlcnJhbC10ZXJtcyBsZWdhbC1sYW5nPWVuIGxlZ2FsLXJlZ2lvbj1iYz48L2xlZ2FsLWNvdW50ZXI+IGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQsIHNlZCBkbyBlaXVzbW9kIHRlbXBvciBpbmNpZGlkdW50IHV0IGxhYm9yZSBldCBkb2xvcmUgbWFnbmEgYWxpcXVhLiA8bGVnYWwtY291bnRlciB2LW92ZXJsYXktb3BlbmVyPWxlZ2FsLW92ZXJsYXkgbGVnYWwta2V5PTEteWVhci1vZmZlci1zdGltIGxlZ2FsLWxhbmc9ZW4gbGVnYWwtcmVnaW9uPWJjPjwvbGVnYWwtY291bnRlcj4gPC9wPiA8L2Rpdj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPGxlZ2FsLWNvbnRhaW5lcj48L2xlZ2FsLWNvbnRhaW5lcj4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4gICAgICAgICAgICAgJmx0O2xlZ2FsLWNvdW50ZXImZ3Q7XFxuICAgICAgICAgICAgICAgIGxlZ2FsLWtleT1cXFwiaHMtcmVmZXJyYWwtdGVybXNcXFwiXFxuICAgICAgICAgICAgICAgIGxlZ2FsLWxhbmc9XFxcImVuXFxcIlxcbiAgICAgICAgICAgICAgICBsZWdhbC1yZWdpb249XFxcImJjXFxcIlxcbiAgICAgICAgICAgICAmbHQ7L2xlZ2FsLWNvdW50ZXImZ3Q7XFxuICAgICAgICAgICAgICZsdDtsZWdhbC1jb250YWluZXImZ3Q7Jmx0Oy9sZWdhbC1jb250YWluZXImZ3Q7XFxuICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1qYXZhc2NyaXB0PiA8cHJlPlxcbiAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtamF2YXNjcmlwdD5cXG4gICAgICAgICAgICAgbGV0IHZtID0gbmV3IFZ1ZSh7XFxuICAgICAgICAgICAgICAgZWw6ICdib2R5JyxcXG4gICAgICAgICAgICAgICBkYXRhKCkge1xcbiAgICAgICAgICAgICAgICAgcmV0dXJuIHtcXG4gICAgICAgICAgICAgICAgICAgbGlnZXJFbmRQb2ludDogJ2h0dHBzOi8vYXBpLmNtcy50ZWx1cy5jb20vbGVnYWxzJyxcXG4gICAgICAgICAgICAgICAgICAgbGlnZXJBcHBsaWNhdGlvbktleTogJ2I5NzM4ZDY3Yjg5ZGZjNzgyNzQ2ZDRhOWNmNGExMDkzJ1xcbiAgICAgICAgICAgICAgICAgfTtcXG4gICAgICAgICAgICAgICB9LFxcbiAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IHtcXG4gICAgICAgICAgICAgICAgIExlZ2FsQ291bnRlcixcXG4gICAgICAgICAgICAgICAgIExlZ2FsQ29udGFpbmVyXFxuICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICB9KTtcXG4gICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiPkFQSTogTGVnYWwgQ291bnRlcjwvaDM+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxhcGktdGFibGUgOml0ZW1zPWFwaUl0ZW1zPjwvYXBpLXRhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5PdmVybGF5IFN5c3RlbTwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8cD4gPGJ1dHRvbiB2LW92ZXJsYXktb3BlbmVyPW92ZXJsYXktMSBjbGFzcz1cXFwiaHlfYy1idXR0b24gaHlfYy1idXR0b24tLWxpbmsgaHlfdC1wdXJwbGVcXFwiIHR5cGU9YnV0dG9uIHJvbGU9YnV0dG9uPiBPcGVuIG92ZXJsYXkgIzEgPGkgY2xhc3M9XFxcImh5X2MtaWNvbiBoeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQgaHlfYy1idXR0b25fX2ljb25cXFwiPjwvaT4gPC9idXR0b24+IDwvcD4gPHA+IDxidXR0b24gdi1vdmVybGF5LW9wZW5lcj1vdmVybGF5LTIgY2xhc3M9XFxcImh5X2MtYnV0dG9uIGh5X2MtYnV0dG9uLS1saW5rIGh5X3QtcHVycGxlXFxcIiB0eXBlPWJ1dHRvbiByb2xlPWJ1dHRvbj4gT3BlbiBvdmVybGF5ICMyIDxpIGNsYXNzPVxcXCJoeV9jLWljb24gaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkIGh5X2MtYnV0dG9uX19pY29uXFxcIj48L2k+IDwvYnV0dG9uPiA8L3A+IDxvdmVybGF5LWNvbnRhaW5lcj4gPG92ZXJsYXkgb3ZlcmxheS1rZXk9b3ZlcmxheS0xPiA8aDQgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcXFwiIHNsb3Q9b3ZlcmxheS1oZWFkZXI+VGhpcyBpcyBvdmVybGF5ICMxPC9oND4gPGFydGljbGUgc2xvdD1vdmVybGF5LWJvZHk+IE92ZXJsYXkgIzEgYm9keSA8L2FydGljbGU+IDwvb3ZlcmxheT4gPG92ZXJsYXkgb3ZlcmxheS1rZXk9b3ZlcmxheS0yPiA8aDQgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcXFwiIHNsb3Q9b3ZlcmxheS1oZWFkZXI+VGhpcyBpcyBvdmVybGF5ICMyPC9oND4gPGFydGljbGUgc2xvdD1vdmVybGF5LWJvZHk+IE92ZXJsYXkgIzIgYm9keSA8L2FydGljbGU+IDwvb3ZlcmxheT4gPC9vdmVybGF5LWNvbnRhaW5lcj4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4gICAgICAgICAgICAgJmx0O292ZXJsYXktY29udGFpbmVyJmd0O1xcbiAgICAgICAgICAgICAgICZsdDtvdmVybGF5IG92ZXJsYXkta2V5PVxcXCJvdmVybGF5LTFcXFwiJmd0O1xcbiAgICAgICAgICAgICAgICAgJmx0O2g0ICBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFxcXCIgc2xvdD1cXFwib3ZlcmxheS1oZWFkZXJcXFwiJmd0O1xcbiAgICAgICAgICAgICAgICAgVGhpcyBpcyBvdmVybGF5ICMxXFxuICAgICAgICAgICAgICAgICAmbHQ7L2g0Jmd0O1xcbiAgICAgICAgICAgICAgICAgJmx0O2FydGljbGUgc2xvdD1cXFwib3ZlcmxheS1ib2R5XFxcIiZndDtcXG4gICAgICAgICAgICAgICAgICAgT3ZlcmxheSAjMSBib2R5XFxuICAgICAgICAgICAgICAgICAmbHQ7L2FydGljbGUmZ3Q7XFxuICAgICAgICAgICAgICAgJmx0Oy9vdmVybGF5Jmd0O1xcbiAgICAgICAgICAgICAgICZsdDtvdmVybGF5IG92ZXJsYXkta2V5PVxcXCJvdmVybGF5LTJcXFwiJmd0O1xcbiAgICAgICAgICAgICAgICAgJmx0O2g0ICBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFxcXCIgc2xvdD1cXFwib3ZlcmxheS1oZWFkZXJcXFwiJmd0O1xcbiAgICAgICAgICAgICAgICAgVGhpcyBpcyBvdmVybGF5ICMxXFxuICAgICAgICAgICAgICAgICAmbHQ7L2g0Jmd0O1xcbiAgICAgICAgICAgICAgICAgJmx0O2FydGljbGUgc2xvdD1cXFwib3ZlcmxheS1ib2R5XFxcIiZndDtcXG4gICAgICAgICAgICAgICAgICAgT3ZlcmxheSAjMiBib2R5XFxuICAgICAgICAgICAgICAgICAmbHQ7L2FydGljbGUmZ3Q7XFxuICAgICAgICAgICAgICAgJmx0Oy9vdmVybGF5Jmd0O1xcbiAgICAgICAgICAgICAmbHQ7L292ZXJsYXktY29udGFpbmVyJmd0O1xcbiAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE2MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPlN0ZXAgVHJhY2tlcjwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8c3RlcC10cmFja2VyIDpjdXJyZW50LXN0ZXA9c3RlcFRyYWNrZXJDdXJyZW50U3RlcCA6Y29uZmlnPXN0ZXBUcmFja2VyQ29uZmlnPjwvc3RlcC10cmFja2VyPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuICAgICAgICAmbHQ7c3RlcC10cmFja2VyXFxuICAgICAgICA6Y3VycmVudC1zdGVwPVxcXCJzdGVwVHJhY2tlckN1cnJlbnRTdGVwXFxcIlxcbiAgICAgICAgOmNvbmZpZz1cXFwic3RlcFRyYWNrZXJDb25maWdcXFwiJmd0O1xcbiAgICAgICAgJmx0Oy9zdGVwLXRyYWNrZXImZ3Q7XFxuICAgICAgIDwvY29kZT5cXG4gICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9amF2YXNjcmlwdD4gPHByZT5cXG4gICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWpzPlxcbiAgICAgICAgICAgIGxldCBzdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMjtcXG4gICAgICAgICAgICBsZXQgc3RlcFRyYWNrZXJDb25maWcgPSB7XFxuICAgICAgICAgICAgICBpc0NsaWNrYWJsZTogdHJ1ZSxcXG4gICAgICAgICAgICAgIHN0ZXBzOiBbXFxuICAgICAgICAgICAgICAgIHtcXG4gICAgICAgICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQScsXFxuICAgICAgICAgICAgICAgICAgbGluazogJycsXFxuICAgICAgICAgICAgICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMDtcXG4gICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIH0sIHtcXG4gICAgICAgICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQicsXFxuICAgICAgICAgICAgICAgICAgbGluazogJycsXFxuICAgICAgICAgICAgICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMTtcXG4gICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIH0sIHtcXG4gICAgICAgICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQycsXFxuICAgICAgICAgICAgICAgICAgbGluazogJycsXFxuICAgICAgICAgICAgICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMjtcXG4gICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgIF1cXG4gICAgICAgICAgICB9O1xcbiAgICAgICAgICAgIGxldCB2bSA9IG5ldyBWdWUoe1xcbiAgICAgICAgICAgICAgZWw6ICdib2R5JyxcXG4gICAgICAgICAgICAgIGRhdGE6IHtcXG4gICAgICAgICAgICAgICAgc3RlcFRyYWNrZXJDb25maWcsXFxuICAgICAgICAgICAgICAgIHN0ZXBUcmFja2VyQ3VycmVudFN0ZXBcXG4gICAgICAgICAgICB9LFxcbiAgICAgICAgICAgICAgY29tcG9uZW50czoge1xcbiAgICAgICAgICAgICAgICBTdGVwVHJhY2tlclxcbiAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH0pO1xcbiAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE2MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPlRhYjwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8dGFicyBjbGFzcz1cXFwiYy1wcmljZS1sb29rdXAgaHlfby1sYXlvdXRfX2l0ZW0gaHlfdS1zaXplLTNvZjNAc20gaHlfdS1zaXplLTNvZjRAbWQgaHlfdS1zaXplLTRvZjEyQGxnXFxcIj4gPHRhYiBsYWJlbD1cXFwiVGFiIDFcXFwiPiA8cD4gVGFiIDEgY29udGVudCA8L3A+IDwvdGFiPiA8dGFiIGxhYmVsPVxcXCJUYWIgMlxcXCI+IDxwPiBUYWIgMiBjb250ZW50IDwvcD4gPC90YWI+IDx0YWIgbGFiZWw9XFxcIlRhYiAzXFxcIiA6aXMtZGlzYWJsZWQ9dHJ1ZT4gPHA+IFRhYiAzIGNvbnRlbnQgPC9wPiA8L3RhYj4gPC90YWJzPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiAgICAgICAgICAgICAmbHQ7dGFicyZndDtcXG4gICAgICAgICAgICAgICAmbHQ7dGFiIGxhYmVsPVxcXCJUYWIgMVxcXCImZ3Q7XFxuICAgICAgICAgICAgICAgICAmbHQ7cCZndDtcXG4gICAgICAgICAgICAgICAgICAgVGFiIDEgY29udGVudFxcbiAgICAgICAgICAgICAgICAgJmx0Oy9wJmd0O1xcbiAgICAgICAgICAgICAgICZsdDsvdGFiJmd0O1xcbiAgICAgICAgICAgICAgICZsdDt0YWIgbGFiZWw9XFxcIlRhYiAyXFxcIiZndDtcXG4gICAgICAgICAgICAgICAgICZsdDtwJmd0O1xcbiAgICAgICAgICAgICAgICAgICBUYWIgMiBjb250ZW50XFxuICAgICAgICAgICAgICAgICAmbHQ7L3AmZ3Q7XFxuICAgICAgICAgICAgICAgJmx0Oy90YWImZ3Q7XFxuICAgICAgICAgICAgICAgJmx0O3RhYiBsYWJlbD1cXFwiVGFiIDNcXFwiIDppcy1kaXNhYmxlZD1cXFwidHJ1ZVxcXCImZ3Q7XFxuICAgICAgICAgICAgICAgICAmbHQ7cCZndDtcXG4gICAgICAgICAgICAgICAgICAgVGFiIDMgY29udGVudFxcbiAgICAgICAgICAgICAgICAgJmx0Oy9wJmd0O1xcbiAgICAgICAgICAgICAgICZsdDsvdGFiJmd0O1xcbiAgICAgICAgICAgICAmbHQ7L3RhYnMmZ3Q7XFxuICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG4vKioqLyB9LFxuLyogMTYyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiB2LWlmPWlzVmlzaWJsZSB0cmFuc2l0aW9uPWZhZGUgY2xhc3M9Yy1hbGVydCA6Y2xhc3M9XFxcIidjLWFsZXJ0LS0nICsgdHlwZVxcXCIgOmNsYXNzPVxcXCJ7ICdjLWFsZXJ0LS1kaXNtaXNzaWJsZSc6IGRpc21pc3NpYmxlIH1cXFwiIHJvbGU9YWxlcnQ+IDxidXR0b24gdi1pZj1kaXNtaXNzaWJsZSBAY2xpY2s9ZGlzbWlzcyB0eXBlPWJ1dHRvbiBjbGFzcz1jLWFsZXJ0X19jbG9zZS1idXR0b24gYXJpYS1sYWJlbD1DbG9zZT4gPHNwYW4gYXJpYS1oaWRkZW49dHJ1ZT4mdGltZXM7PC9zcGFuPiA8c3BhbiBjbGFzcz1oeV91LWludmlzaWJsZT5DbG9zZTwvc3Bhbj4gPC9idXR0b24+IDxzbG90Pjwvc2xvdD4gPC9kaXY+IFwiO1xuXG4vKioqLyB9LFxuLyogMTYzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLWNvbGxhcHNhYmxlLXBhbmVsPiA8aDMgQGNsaWNrLnByZXZlbnQ9dG9nZ2xlT3BlbiA6Y2xhc3M9XFxcIntcXG4gICAgICAnYy1jb2xsYXBzYWJsZS1wYW5lbF9faGVhZGVyLS1vcGVuJzogaXNPcGVuXFxuICAgIH1cXFwiIGNsYXNzPVxcXCJjLWNvbGxhcHNhYmxlLXBhbmVsX19oZWFkZXIgaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiIHYtaHRtbD1sYWJlbD4gPC9oMz4gPGRpdiBjbGFzcz1jLWNvbGxhcHNhYmxlLXBhbmVsX19ib2R5IDpjbGFzcz1cXFwie1xcbiAgICAnYy1jb2xsYXBzYWJsZS1wYW5lbF9fYm9keS0tb3Blbic6IGlzT3BlblxcbiAgfVxcXCI+IDxzbG90Pjwvc2xvdD4gPC9kaXY+IDwvZGl2PiBcIjtcblxuLyoqKi8gfSxcbi8qIDE2NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy1sZWdhbC1jb250YWluZXI+IDxvbCBjbGFzcz1jLWxlZ2FsLWNvbnRhaW5lcl9fb3JkZXJlZC1saXN0PiA8bGkgdi1zZXQtZm9jdXM9bGVnYWwuaXNTZWxlY3RlZCBjbGFzcz1jLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVtIDpjbGFzcz1cXFwie1xcbiAgICAgICdjLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVtLS1hY3RpdmUnOiBsZWdhbC5pc1NlbGVjdGVkXFxuICAgIH1cXFwiIHYtZm9yPVxcXCJsZWdhbCBpbiBpbmRleGVkTGVnYWxzXFxcIiB2LWh0bWw9bGVnYWwuY29udGVudD4gPC9saT4gPC9vbD4gPHVsIGNsYXNzPWMtbGVnYWwtY29udGFpbmVyX191bm9yZGVyZWQtbGlzdD4gPGxpIGNsYXNzPWMtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0gdi1mb3I9XFxcImxlZ2FsIGluIG5vbkluZGV4ZWRMZWdhbHNcXFwiIHYtaHRtbD1sZWdhbC5jb250ZW50PiA8L2xpPiA8L3VsPiA8L2Rpdj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8c3VwIGNsYXNzPWMtbGVnYWwtc3VwPiA8YSBocmVmPSMgQGNsaWNrLnByZXZlbnQ9Y2xpY2tIYW5kbGVyPiB7e2xlZ2FsQ291bnRlcn19IDwvYT4gPC9zdXA+IFwiO1xuXG4vKioqLyB9LFxuLyogMTY2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLW92ZXJsYXktY29udGFpbmVyPiA8ZGl2IGNsYXNzPWMtb3ZlcmxheS1jb250YWluZXJfX2N1cnRhaW4gOmNsYXNzPVxcXCJ7XFxuICAgICAgICAnYy1vdmVybGF5LWNvbnRhaW5lcl9fY3VydGFpbi0tYWN0aXZlJzogaXNWaXNpYmxlXFxuICAgIH1cXFwiIEBjbGljay5wcmV2ZW50PVxcXCJpc1Zpc2libGU9ZmFsc2VcXFwiPiA8L2Rpdj4gPGRpdiBjbGFzcz1jLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5cyA6Y2xhc3M9XFxcIntcXG4gICAgICAgICdjLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5cy0tYWN0aXZlJzogaXNWaXNpYmxlXFxuICAgIH1cXFwiPiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiA8L2Rpdj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNjcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8YXJ0aWNsZSBjbGFzcz1jLW92ZXJsYXkgdi1zaG93PWlzVmlzaWJsZT4gPGRpdiBjbGFzcz1jLW92ZXJsYXlfX2JvZHk+IDxzbG90IG5hbWU9b3ZlcmxheS1ib2R5Pjwvc2xvdD4gPC9kaXY+IDxoZWFkZXIgY2xhc3M9Yy1vdmVybGF5X19oZWFkZXI+IDxzbG90IG5hbWU9b3ZlcmxheS1oZWFkZXI+PC9zbG90PiA8YnV0dG9uIHR5cGU9YnV0dG9uIGNsYXNzPWMtb3ZlcmxheV9fY2xvc2UtYnV0dG9uIGFyaWEtbGFiZWw9Q2xvc2UgdGFiaW5kZXg9MCBAY2xpY2sucHJldmVudD1jbG9zZU92ZXJsYXk+PC9idXR0b24+IDwvaGVhZGVyPiA8L2FydGljbGU+IFwiO1xuXG4vKioqLyB9LFxuLyogMTY4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPHVsIGNsYXNzPWMtc3RlcC10cmFja2VyPiA8bGkgY2xhc3M9Yy1zdGVwLXRyYWNrZXJfX3N0ZXAgOmNsYXNzPVxcXCJ7XFxuICAgICAgJ2Mtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZSc6IGN1cnJlbnRTdGVwID4gJGluZGV4LFxcbiAgICAgICdjLXN0ZXAtdHJhY2tlcl9fc3RlcC0tYWN0aXZlJzogY3VycmVudFN0ZXAgPT09ICRpbmRleCxcXG4gICAgICAnYy1zdGVwLXRyYWNrZXJfX3NldHAtLWNsaWNrYWJsZSc6IChjdXJyZW50U3RlcCA+ICRpbmRleCAmJiBjb25maWcuaXNDbGlja2FibGUpXFxuICB9XFxcIiB2LWZvcj1cXFwic3RlcCBpbiBjb25maWcuc3RlcHNcXFwiPiA8YSA6aHJlZj1cXFwic3RlcC5saW5rIHx8IGZhbHNlXFxcIiBAY2xpY2s9XFxcImNsaWNrSGFuZGxlcigkZXZlbnQsIHN0ZXAsICRpbmRleClcXFwiIHYtaWY9Y29uZmlnLmlzQ2xpY2thYmxlPiA8c3BhbiBjbGFzcz1jLXN0ZXAtdHJhY2tlcl9faWNvbj48L3NwYW4+IDxzcGFuIGNsYXNzPWMtc3RlcC10cmFja2VyX19sYWJlbD57eyRpbmRleCArIDF9fS4ge3tzdGVwLnRpdGxlfX08L3NwYW4+IDwvYT4gPHNwYW4gdi1lbHNlIGNsYXNzPWMtc3RlcC10cmFja2VyX19pY29uPjwvc3Bhbj4gPHNwYW4gdi1lbHNlIGNsYXNzPWMtc3RlcC10cmFja2VyX19sYWJlbD57eyRpbmRleCArIDF9fS4ge3tzdGVwLnRpdGxlfX08L3NwYW4+IDwvbGk+IDwvdWw+IFwiO1xuXG4vKioqLyB9LFxuLyogMTY5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLXRhYnNfX3BhbmUgOmNsYXNzPVxcXCJ7XFxuICAgICdjLXRhYnNfX3BhbmUtLWFjdGl2ZSc6IGlzVmlzaWJsZVxcbiAgfVxcXCI+IDxzbG90Pjwvc2xvdD4gPC9kaXY+IFwiO1xuXG4vKioqLyB9LFxuLyogMTcwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLXRhYnM+IDx1bCBjbGFzcz1jLXRhYnNfX2hlYWRlcj4gPGxpIHYtZm9yPVxcXCJ0YWIgaW4gdGFic1xcXCIgY2xhc3M9Yy10YWJzX19oZWFkZXItaXRlbSA6Y2xhc3M9XFxcIntcXG4gICAgICAgICAgICAgICAgJ2MtdGFic19faGVhZGVyLWl0ZW0tLWFjdGl2ZSc6ICgkaW5kZXggPT09IGFjdGl2ZVRhYkluZGV4KSxcXG4gICAgICAgICAgICAgICAgJ2MtdGFic19faGVhZGVyLWl0ZW0tLWRpc2FibGVkJzogdGFiLmlzRGlzYWJsZWRcXG4gICAgICAgICAgICAgIH1cXFwiIDpkaXNhYmxlZD10YWIuZGlzYWJsZWQ+IDxhIGhyZWY9IyBAY2xpY2sucHJldmVudD1cXFwiaGFuZGxlVGFiTGlzdENsaWNrKCRpbmRleCwgdGFiKVxcXCIgdi1odG1sPXRhYi5sYWJlbD48L2E+IDwvbGk+IDwvdWw+IDxkaXYgY2xhc3M9Yy10YWJzX19ib2R5PiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiA8L2Rpdj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNzEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1NSlcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxNzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Nilcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxNzMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE4OSlcblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTcpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTc0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTgpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTc1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTkpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTc2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjApXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTc3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjEpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTc4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygxOTApXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Milcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYyKVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE3OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMTkxKVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Mylcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxODAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE5Milcblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjQpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTgxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygxOTMpXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSlcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTY1KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE4MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMTk0KVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Nilcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxODMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE5NSlcblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjcpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTg0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygxOTYpXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OClcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTY4KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE4NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSlcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTY5KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE4NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMTk3KVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjApXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3MClcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxODcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIVxuXHQgKiB2dWUtcm91dGVyIHYwLjcuMTNcblx0ICogKGMpIDIwMTYgRXZhbiBZb3Vcblx0ICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuXHQgKi9cblx0KGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0ICAgdHJ1ZSA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0ICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuXHQgIGdsb2JhbC5WdWVSb3V0ZXIgPSBmYWN0b3J5KCk7XG5cdH0odGhpcywgZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cdFxuXHQgIHZhciBiYWJlbEhlbHBlcnMgPSB7fTtcblx0XG5cdCAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgICAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICAgIH1cblx0ICB9O1xuXHQgIGZ1bmN0aW9uIFRhcmdldChwYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSkge1xuXHQgICAgdGhpcy5wYXRoID0gcGF0aDtcblx0ICAgIHRoaXMubWF0Y2hlciA9IG1hdGNoZXI7XG5cdCAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG5cdCAgfVxuXHRcblx0ICBUYXJnZXQucHJvdG90eXBlID0ge1xuXHQgICAgdG86IGZ1bmN0aW9uIHRvKHRhcmdldCwgY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIGRlbGVnYXRlID0gdGhpcy5kZWxlZ2F0ZTtcblx0XG5cdCAgICAgIGlmIChkZWxlZ2F0ZSAmJiBkZWxlZ2F0ZS53aWxsQWRkUm91dGUpIHtcblx0ICAgICAgICB0YXJnZXQgPSBkZWxlZ2F0ZS53aWxsQWRkUm91dGUodGhpcy5tYXRjaGVyLnRhcmdldCwgdGFyZ2V0KTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5tYXRjaGVyLmFkZCh0aGlzLnBhdGgsIHRhcmdldCk7XG5cdFxuXHQgICAgICBpZiAoY2FsbGJhY2spIHtcblx0ICAgICAgICBpZiAoY2FsbGJhY2subGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgbXVzdCBoYXZlIGFuIGFyZ3VtZW50IGluIHRoZSBmdW5jdGlvbiBwYXNzZWQgdG8gYHRvYFwiKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5tYXRjaGVyLmFkZENoaWxkKHRoaXMucGF0aCwgdGFyZ2V0LCBjYWxsYmFjaywgdGhpcy5kZWxlZ2F0ZSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gTWF0Y2hlcih0YXJnZXQpIHtcblx0ICAgIHRoaXMucm91dGVzID0ge307XG5cdCAgICB0aGlzLmNoaWxkcmVuID0ge307XG5cdCAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcblx0ICB9XG5cdFxuXHQgIE1hdGNoZXIucHJvdG90eXBlID0ge1xuXHQgICAgYWRkOiBmdW5jdGlvbiBhZGQocGF0aCwgaGFuZGxlcikge1xuXHQgICAgICB0aGlzLnJvdXRlc1twYXRoXSA9IGhhbmRsZXI7XG5cdCAgICB9LFxuXHRcblx0ICAgIGFkZENoaWxkOiBmdW5jdGlvbiBhZGRDaGlsZChwYXRoLCB0YXJnZXQsIGNhbGxiYWNrLCBkZWxlZ2F0ZSkge1xuXHQgICAgICB2YXIgbWF0Y2hlciA9IG5ldyBNYXRjaGVyKHRhcmdldCk7XG5cdCAgICAgIHRoaXMuY2hpbGRyZW5bcGF0aF0gPSBtYXRjaGVyO1xuXHRcblx0ICAgICAgdmFyIG1hdGNoID0gZ2VuZXJhdGVNYXRjaChwYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSk7XG5cdFxuXHQgICAgICBpZiAoZGVsZWdhdGUgJiYgZGVsZWdhdGUuY29udGV4dEVudGVyZWQpIHtcblx0ICAgICAgICBkZWxlZ2F0ZS5jb250ZXh0RW50ZXJlZCh0YXJnZXQsIG1hdGNoKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgY2FsbGJhY2sobWF0Y2gpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIGdlbmVyYXRlTWF0Y2goc3RhcnRpbmdQYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIChwYXRoLCBuZXN0ZWRDYWxsYmFjaykge1xuXHQgICAgICB2YXIgZnVsbFBhdGggPSBzdGFydGluZ1BhdGggKyBwYXRoO1xuXHRcblx0ICAgICAgaWYgKG5lc3RlZENhbGxiYWNrKSB7XG5cdCAgICAgICAgbmVzdGVkQ2FsbGJhY2soZ2VuZXJhdGVNYXRjaChmdWxsUGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gbmV3IFRhcmdldChzdGFydGluZ1BhdGggKyBwYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBhZGRSb3V0ZShyb3V0ZUFycmF5LCBwYXRoLCBoYW5kbGVyKSB7XG5cdCAgICB2YXIgbGVuID0gMDtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gcm91dGVBcnJheS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgbGVuICs9IHJvdXRlQXJyYXlbaV0ucGF0aC5sZW5ndGg7XG5cdCAgICB9XG5cdFxuXHQgICAgcGF0aCA9IHBhdGguc3Vic3RyKGxlbik7XG5cdCAgICB2YXIgcm91dGUgPSB7IHBhdGg6IHBhdGgsIGhhbmRsZXI6IGhhbmRsZXIgfTtcblx0ICAgIHJvdXRlQXJyYXkucHVzaChyb3V0ZSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBlYWNoUm91dGUoYmFzZVJvdXRlLCBtYXRjaGVyLCBjYWxsYmFjaywgYmluZGluZykge1xuXHQgICAgdmFyIHJvdXRlcyA9IG1hdGNoZXIucm91dGVzO1xuXHRcblx0ICAgIGZvciAodmFyIHBhdGggaW4gcm91dGVzKSB7XG5cdCAgICAgIGlmIChyb3V0ZXMuaGFzT3duUHJvcGVydHkocGF0aCkpIHtcblx0ICAgICAgICB2YXIgcm91dGVBcnJheSA9IGJhc2VSb3V0ZS5zbGljZSgpO1xuXHQgICAgICAgIGFkZFJvdXRlKHJvdXRlQXJyYXksIHBhdGgsIHJvdXRlc1twYXRoXSk7XG5cdFxuXHQgICAgICAgIGlmIChtYXRjaGVyLmNoaWxkcmVuW3BhdGhdKSB7XG5cdCAgICAgICAgICBlYWNoUm91dGUocm91dGVBcnJheSwgbWF0Y2hlci5jaGlsZHJlbltwYXRoXSwgY2FsbGJhY2ssIGJpbmRpbmcpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBjYWxsYmFjay5jYWxsKGJpbmRpbmcsIHJvdXRlQXJyYXkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbWFwIChjYWxsYmFjaywgYWRkUm91dGVDYWxsYmFjaykge1xuXHQgICAgdmFyIG1hdGNoZXIgPSBuZXcgTWF0Y2hlcigpO1xuXHRcblx0ICAgIGNhbGxiYWNrKGdlbmVyYXRlTWF0Y2goXCJcIiwgbWF0Y2hlciwgdGhpcy5kZWxlZ2F0ZSkpO1xuXHRcblx0ICAgIGVhY2hSb3V0ZShbXSwgbWF0Y2hlciwgZnVuY3Rpb24gKHJvdXRlKSB7XG5cdCAgICAgIGlmIChhZGRSb3V0ZUNhbGxiYWNrKSB7XG5cdCAgICAgICAgYWRkUm91dGVDYWxsYmFjayh0aGlzLCByb3V0ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5hZGQocm91dGUpO1xuXHQgICAgICB9XG5cdCAgICB9LCB0aGlzKTtcblx0ICB9XG5cdFxuXHQgIHZhciBzcGVjaWFscyA9IFsnLycsICcuJywgJyonLCAnKycsICc/JywgJ3wnLCAnKCcsICcpJywgJ1snLCAnXScsICd7JywgJ30nLCAnXFxcXCddO1xuXHRcblx0ICB2YXIgZXNjYXBlUmVnZXggPSBuZXcgUmVnRXhwKCcoXFxcXCcgKyBzcGVjaWFscy5qb2luKCd8XFxcXCcpICsgJyknLCAnZycpO1xuXHRcblx0ICB2YXIgbm9XYXJuaW5nID0gZmFsc2U7XG5cdCAgZnVuY3Rpb24gd2Fybihtc2cpIHtcblx0ICAgIGlmICghbm9XYXJuaW5nICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICBjb25zb2xlLmVycm9yKCdbdnVlLXJvdXRlcl0gJyArIG1zZyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiB0cnlEZWNvZGUodXJpLCBhc0NvbXBvbmVudCkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmV0dXJuIGFzQ29tcG9uZW50ID8gZGVjb2RlVVJJQ29tcG9uZW50KHVyaSkgOiBkZWNvZGVVUkkodXJpKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgd2FybignbWFsZm9ybWVkIFVSSScgKyAoYXNDb21wb25lbnQgPyAnIGNvbXBvbmVudDogJyA6ICc6ICcpICsgdXJpKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGlzQXJyYXkodGVzdCkge1xuXHQgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0ZXN0KSA9PT0gXCJbb2JqZWN0IEFycmF5XVwiO1xuXHQgIH1cblx0XG5cdCAgLy8gQSBTZWdtZW50IHJlcHJlc2VudHMgYSBzZWdtZW50IGluIHRoZSBvcmlnaW5hbCByb3V0ZSBkZXNjcmlwdGlvbi5cblx0ICAvLyBFYWNoIFNlZ21lbnQgdHlwZSBwcm92aWRlcyBhbiBgZWFjaENoYXJgIGFuZCBgcmVnZXhgIG1ldGhvZC5cblx0ICAvL1xuXHQgIC8vIFRoZSBgZWFjaENoYXJgIG1ldGhvZCBpbnZva2VzIHRoZSBjYWxsYmFjayB3aXRoIG9uZSBvciBtb3JlIGNoYXJhY3RlclxuXHQgIC8vIHNwZWNpZmljYXRpb25zLiBBIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGNvbnN1bWVzIG9uZSBvciBtb3JlIGlucHV0XG5cdCAgLy8gY2hhcmFjdGVycy5cblx0ICAvL1xuXHQgIC8vIFRoZSBgcmVnZXhgIG1ldGhvZCByZXR1cm5zIGEgcmVnZXggZnJhZ21lbnQgZm9yIHRoZSBzZWdtZW50LiBJZiB0aGVcblx0ICAvLyBzZWdtZW50IGlzIGEgZHluYW1pYyBvZiBzdGFyIHNlZ21lbnQsIHRoZSByZWdleCBmcmFnbWVudCBhbHNvIGluY2x1ZGVzXG5cdCAgLy8gYSBjYXB0dXJlLlxuXHQgIC8vXG5cdCAgLy8gQSBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiBjb250YWluczpcblx0ICAvL1xuXHQgIC8vICogYHZhbGlkQ2hhcnNgOiBhIFN0cmluZyB3aXRoIGEgbGlzdCBvZiBhbGwgdmFsaWQgY2hhcmFjdGVycywgb3Jcblx0ICAvLyAqIGBpbnZhbGlkQ2hhcnNgOiBhIFN0cmluZyB3aXRoIGEgbGlzdCBvZiBhbGwgaW52YWxpZCBjaGFyYWN0ZXJzXG5cdCAgLy8gKiBgcmVwZWF0YDogdHJ1ZSBpZiB0aGUgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gY2FuIHJlcGVhdFxuXHRcblx0ICBmdW5jdGlvbiBTdGF0aWNTZWdtZW50KHN0cmluZykge1xuXHQgICAgdGhpcy5zdHJpbmcgPSBzdHJpbmc7XG5cdCAgfVxuXHQgIFN0YXRpY1NlZ21lbnQucHJvdG90eXBlID0ge1xuXHQgICAgZWFjaENoYXI6IGZ1bmN0aW9uIGVhY2hDaGFyKGNhbGxiYWNrKSB7XG5cdCAgICAgIHZhciBzdHJpbmcgPSB0aGlzLnN0cmluZyxcblx0ICAgICAgICAgIGNoO1xuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdHJpbmcubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgY2ggPSBzdHJpbmcuY2hhckF0KGkpO1xuXHQgICAgICAgIGNhbGxiYWNrKHsgdmFsaWRDaGFyczogY2ggfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5zdHJpbmcucmVwbGFjZShlc2NhcGVSZWdleCwgJ1xcXFwkMScpO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnN0cmluZztcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBEeW5hbWljU2VnbWVudChuYW1lKSB7XG5cdCAgICB0aGlzLm5hbWUgPSBuYW1lO1xuXHQgIH1cblx0ICBEeW5hbWljU2VnbWVudC5wcm90b3R5cGUgPSB7XG5cdCAgICBlYWNoQ2hhcjogZnVuY3Rpb24gZWFjaENoYXIoY2FsbGJhY2spIHtcblx0ICAgICAgY2FsbGJhY2soeyBpbnZhbGlkQ2hhcnM6IFwiL1wiLCByZXBlYXQ6IHRydWUgfSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlZ2V4OiBmdW5jdGlvbiByZWdleCgpIHtcblx0ICAgICAgcmV0dXJuIFwiKFteL10rKVwiO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUocGFyYW1zKSB7XG5cdCAgICAgIHZhciB2YWwgPSBwYXJhbXNbdGhpcy5uYW1lXTtcblx0ICAgICAgcmV0dXJuIHZhbCA9PSBudWxsID8gXCI6XCIgKyB0aGlzLm5hbWUgOiB2YWw7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gU3RhclNlZ21lbnQobmFtZSkge1xuXHQgICAgdGhpcy5uYW1lID0gbmFtZTtcblx0ICB9XG5cdCAgU3RhclNlZ21lbnQucHJvdG90eXBlID0ge1xuXHQgICAgZWFjaENoYXI6IGZ1bmN0aW9uIGVhY2hDaGFyKGNhbGxiYWNrKSB7XG5cdCAgICAgIGNhbGxiYWNrKHsgaW52YWxpZENoYXJzOiBcIlwiLCByZXBlYXQ6IHRydWUgfSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlZ2V4OiBmdW5jdGlvbiByZWdleCgpIHtcblx0ICAgICAgcmV0dXJuIFwiKC4rKVwiO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUocGFyYW1zKSB7XG5cdCAgICAgIHZhciB2YWwgPSBwYXJhbXNbdGhpcy5uYW1lXTtcblx0ICAgICAgcmV0dXJuIHZhbCA9PSBudWxsID8gXCI6XCIgKyB0aGlzLm5hbWUgOiB2YWw7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gRXBzaWxvblNlZ21lbnQoKSB7fVxuXHQgIEVwc2lsb25TZWdtZW50LnByb3RvdHlwZSA9IHtcblx0ICAgIGVhY2hDaGFyOiBmdW5jdGlvbiBlYWNoQ2hhcigpIHt9LFxuXHQgICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuXHQgICAgICByZXR1cm4gXCJcIjtcblx0ICAgIH0sXG5cdCAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUoKSB7XG5cdCAgICAgIHJldHVybiBcIlwiO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIHBhcnNlKHJvdXRlLCBuYW1lcywgc3BlY2lmaWNpdHkpIHtcblx0ICAgIC8vIG5vcm1hbGl6ZSByb3V0ZSBhcyBub3Qgc3RhcnRpbmcgd2l0aCBhIFwiL1wiLiBSZWNvZ25pdGlvbiB3aWxsXG5cdCAgICAvLyBhbHNvIG5vcm1hbGl6ZS5cblx0ICAgIGlmIChyb3V0ZS5jaGFyQXQoMCkgPT09IFwiL1wiKSB7XG5cdCAgICAgIHJvdXRlID0gcm91dGUuc3Vic3RyKDEpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBzZWdtZW50cyA9IHJvdXRlLnNwbGl0KFwiL1wiKSxcblx0ICAgICAgICByZXN1bHRzID0gW107XG5cdFxuXHQgICAgLy8gQSByb3V0ZXMgaGFzIHNwZWNpZmljaXR5IGRldGVybWluZWQgYnkgdGhlIG9yZGVyIHRoYXQgaXRzIGRpZmZlcmVudCBzZWdtZW50c1xuXHQgICAgLy8gYXBwZWFyIGluLiBUaGlzIHN5c3RlbSBtaXJyb3JzIGhvdyB0aGUgbWFnbml0dWRlIG9mIG51bWJlcnMgd3JpdHRlbiBhcyBzdHJpbmdzXG5cdCAgICAvLyB3b3Jrcy5cblx0ICAgIC8vIENvbnNpZGVyIGEgbnVtYmVyIHdyaXR0ZW4gYXM6IFwiYWJjXCIuIEFuIGV4YW1wbGUgd291bGQgYmUgXCIyMDBcIi4gQW55IG90aGVyIG51bWJlciB3cml0dGVuXG5cdCAgICAvLyBcInh5elwiIHdpbGwgYmUgc21hbGxlciB0aGFuIFwiYWJjXCIgc28gbG9uZyBhcyBgYSA+IHpgLiBGb3IgaW5zdGFuY2UsIFwiMTk5XCIgaXMgc21hbGxlclxuXHQgICAgLy8gdGhlbiBcIjIwMFwiLCBldmVuIHRob3VnaCBcInlcIiBhbmQgXCJ6XCIgKHdoaWNoIGFyZSBib3RoIDkpIGFyZSBsYXJnZXIgdGhhbiBcIjBcIiAodGhlIHZhbHVlXG5cdCAgICAvLyBvZiAoYGJgIGFuZCBgY2ApLiBUaGlzIGlzIGJlY2F1c2UgdGhlIGxlYWRpbmcgc3ltYm9sLCBcIjJcIiwgaXMgbGFyZ2VyIHRoYW4gdGhlIG90aGVyXG5cdCAgICAvLyBsZWFkaW5nIHN5bWJvbCwgXCIxXCIuXG5cdCAgICAvLyBUaGUgcnVsZSBpcyB0aGF0IHN5bWJvbHMgdG8gdGhlIGxlZnQgY2FycnkgbW9yZSB3ZWlnaHQgdGhhbiBzeW1ib2xzIHRvIHRoZSByaWdodFxuXHQgICAgLy8gd2hlbiBhIG51bWJlciBpcyB3cml0dGVuIG91dCBhcyBhIHN0cmluZy4gSW4gdGhlIGFib3ZlIHN0cmluZ3MsIHRoZSBsZWFkaW5nIGRpZ2l0XG5cdCAgICAvLyByZXByZXNlbnRzIGhvdyBtYW55IDEwMCdzIGFyZSBpbiB0aGUgbnVtYmVyLCBhbmQgaXQgY2FycmllcyBtb3JlIHdlaWdodCB0aGFuIHRoZSBtaWRkbGVcblx0ICAgIC8vIG51bWJlciB3aGljaCByZXByZXNlbnRzIGhvdyBtYW55IDEwJ3MgYXJlIGluIHRoZSBudW1iZXIuXG5cdCAgICAvLyBUaGlzIHN5c3RlbSBvZiBudW1iZXIgbWFnbml0dWRlIHdvcmtzIHdlbGwgZm9yIHJvdXRlIHNwZWNpZmljaXR5LCB0b28uIEEgcm91dGUgd3JpdHRlbiBhc1xuXHQgICAgLy8gYGEvYi9jYCB3aWxsIGJlIG1vcmUgc3BlY2lmaWMgdGhhbiBgeC95L3pgIGFzIGxvbmcgYXMgYGFgIGlzIG1vcmUgc3BlY2lmaWMgdGhhblxuXHQgICAgLy8gYHhgLCBpcnJlc3BlY3RpdmUgb2YgdGhlIG90aGVyIHBhcnRzLlxuXHQgICAgLy8gQmVjYXVzZSBvZiB0aGlzIHNpbWlsYXJpdHksIHdlIGFzc2lnbiBlYWNoIHR5cGUgb2Ygc2VnbWVudCBhIG51bWJlciB2YWx1ZSB3cml0dGVuIGFzIGFcblx0ICAgIC8vIHN0cmluZy4gV2UgY2FuIGZpbmQgdGhlIHNwZWNpZmljaXR5IG9mIGNvbXBvdW5kIHJvdXRlcyBieSBjb25jYXRlbmF0aW5nIHRoZXNlIHN0cmluZ3Ncblx0ICAgIC8vIHRvZ2V0aGVyLCBmcm9tIGxlZnQgdG8gcmlnaHQuIEFmdGVyIHdlIGhhdmUgbG9vcGVkIHRocm91Z2ggYWxsIG9mIHRoZSBzZWdtZW50cyxcblx0ICAgIC8vIHdlIGNvbnZlcnQgdGhlIHN0cmluZyB0byBhIG51bWJlci5cblx0ICAgIHNwZWNpZmljaXR5LnZhbCA9ICcnO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gc2VnbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbaV0sXG5cdCAgICAgICAgICBtYXRjaDtcblx0XG5cdCAgICAgIGlmIChtYXRjaCA9IHNlZ21lbnQubWF0Y2goL146KFteXFwvXSspJC8pKSB7XG5cdCAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBEeW5hbWljU2VnbWVudChtYXRjaFsxXSkpO1xuXHQgICAgICAgIG5hbWVzLnB1c2gobWF0Y2hbMV0pO1xuXHQgICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnMyc7XG5cdCAgICAgIH0gZWxzZSBpZiAobWF0Y2ggPSBzZWdtZW50Lm1hdGNoKC9eXFwqKFteXFwvXSspJC8pKSB7XG5cdCAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBTdGFyU2VnbWVudChtYXRjaFsxXSkpO1xuXHQgICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnMic7XG5cdCAgICAgICAgbmFtZXMucHVzaChtYXRjaFsxXSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoc2VnbWVudCA9PT0gXCJcIikge1xuXHQgICAgICAgIHJlc3VsdHMucHVzaChuZXcgRXBzaWxvblNlZ21lbnQoKSk7XG5cdCAgICAgICAgc3BlY2lmaWNpdHkudmFsICs9ICcxJztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXN1bHRzLnB1c2gobmV3IFN0YXRpY1NlZ21lbnQoc2VnbWVudCkpO1xuXHQgICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnNCc7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBzcGVjaWZpY2l0eS52YWwgPSArc3BlY2lmaWNpdHkudmFsO1xuXHRcblx0ICAgIHJldHVybiByZXN1bHRzO1xuXHQgIH1cblx0XG5cdCAgLy8gQSBTdGF0ZSBoYXMgYSBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiBhbmQgKGBjaGFyU3BlY2ApIGFuZCBhIGxpc3Qgb2YgcG9zc2libGVcblx0ICAvLyBzdWJzZXF1ZW50IHN0YXRlcyAoYG5leHRTdGF0ZXNgKS5cblx0ICAvL1xuXHQgIC8vIElmIGEgU3RhdGUgaXMgYW4gYWNjZXB0aW5nIHN0YXRlLCBpdCB3aWxsIGFsc28gaGF2ZSBzZXZlcmFsIGFkZGl0aW9uYWxcblx0ICAvLyBwcm9wZXJ0aWVzOlxuXHQgIC8vXG5cdCAgLy8gKiBgcmVnZXhgOiBBIHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIHVzZWQgdG8gZXh0cmFjdCBwYXJhbWV0ZXJzIGZyb20gcGF0aHNcblx0ICAvLyAgIHRoYXQgcmVhY2hlZCB0aGlzIGFjY2VwdGluZyBzdGF0ZS5cblx0ICAvLyAqIGBoYW5kbGVyc2A6IEluZm9ybWF0aW9uIG9uIGhvdyB0byBjb252ZXJ0IHRoZSBsaXN0IG9mIGNhcHR1cmVzIGludG8gY2FsbHNcblx0ICAvLyAgIHRvIHJlZ2lzdGVyZWQgaGFuZGxlcnMgd2l0aCB0aGUgc3BlY2lmaWVkIHBhcmFtZXRlcnNcblx0ICAvLyAqIGB0eXBlc2A6IEhvdyBtYW55IHN0YXRpYywgZHluYW1pYyBvciBzdGFyIHNlZ21lbnRzIGluIHRoaXMgcm91dGUuIFVzZWQgdG9cblx0ICAvLyAgIGRlY2lkZSB3aGljaCByb3V0ZSB0byB1c2UgaWYgbXVsdGlwbGUgcmVnaXN0ZXJlZCByb3V0ZXMgbWF0Y2ggYSBwYXRoLlxuXHQgIC8vXG5cdCAgLy8gQ3VycmVudGx5LCBTdGF0ZSBpcyBpbXBsZW1lbnRlZCBuYWl2ZWx5IGJ5IGxvb3Bpbmcgb3ZlciBgbmV4dFN0YXRlc2AgYW5kXG5cdCAgLy8gY29tcGFyaW5nIGEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gYWdhaW5zdCBhIGNoYXJhY3Rlci4gQSBtb3JlIGVmZmljaWVudFxuXHQgIC8vIGltcGxlbWVudGF0aW9uIHdvdWxkIHVzZSBhIGhhc2ggb2Yga2V5cyBwb2ludGluZyBhdCBvbmUgb3IgbW9yZSBuZXh0IHN0YXRlcy5cblx0XG5cdCAgZnVuY3Rpb24gU3RhdGUoY2hhclNwZWMpIHtcblx0ICAgIHRoaXMuY2hhclNwZWMgPSBjaGFyU3BlYztcblx0ICAgIHRoaXMubmV4dFN0YXRlcyA9IFtdO1xuXHQgIH1cblx0XG5cdCAgU3RhdGUucHJvdG90eXBlID0ge1xuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoY2hhclNwZWMpIHtcblx0ICAgICAgdmFyIG5leHRTdGF0ZXMgPSB0aGlzLm5leHRTdGF0ZXM7XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5leHRTdGF0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIGNoaWxkID0gbmV4dFN0YXRlc1tpXTtcblx0XG5cdCAgICAgICAgdmFyIGlzRXF1YWwgPSBjaGlsZC5jaGFyU3BlYy52YWxpZENoYXJzID09PSBjaGFyU3BlYy52YWxpZENoYXJzO1xuXHQgICAgICAgIGlzRXF1YWwgPSBpc0VxdWFsICYmIGNoaWxkLmNoYXJTcGVjLmludmFsaWRDaGFycyA9PT0gY2hhclNwZWMuaW52YWxpZENoYXJzO1xuXHRcblx0ICAgICAgICBpZiAoaXNFcXVhbCkge1xuXHQgICAgICAgICAgcmV0dXJuIGNoaWxkO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICBwdXQ6IGZ1bmN0aW9uIHB1dChjaGFyU3BlYykge1xuXHQgICAgICB2YXIgc3RhdGU7XG5cdFxuXHQgICAgICAvLyBJZiB0aGUgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gYWxyZWFkeSBleGlzdHMgaW4gYSBjaGlsZCBvZiB0aGUgY3VycmVudFxuXHQgICAgICAvLyBzdGF0ZSwganVzdCByZXR1cm4gdGhhdCBzdGF0ZS5cblx0ICAgICAgaWYgKHN0YXRlID0gdGhpcy5nZXQoY2hhclNwZWMpKSB7XG5cdCAgICAgICAgcmV0dXJuIHN0YXRlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBNYWtlIGEgbmV3IHN0YXRlIGZvciB0aGUgY2hhcmFjdGVyIHNwZWNcblx0ICAgICAgc3RhdGUgPSBuZXcgU3RhdGUoY2hhclNwZWMpO1xuXHRcblx0ICAgICAgLy8gSW5zZXJ0IHRoZSBuZXcgc3RhdGUgYXMgYSBjaGlsZCBvZiB0aGUgY3VycmVudCBzdGF0ZVxuXHQgICAgICB0aGlzLm5leHRTdGF0ZXMucHVzaChzdGF0ZSk7XG5cdFxuXHQgICAgICAvLyBJZiB0aGlzIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIHJlcGVhdHMsIGluc2VydCB0aGUgbmV3IHN0YXRlIGFzIGEgY2hpbGRcblx0ICAgICAgLy8gb2YgaXRzZWxmLiBOb3RlIHRoYXQgdGhpcyB3aWxsIG5vdCB0cmlnZ2VyIGFuIGluZmluaXRlIGxvb3AgYmVjYXVzZSBlYWNoXG5cdCAgICAgIC8vIHRyYW5zaXRpb24gZHVyaW5nIHJlY29nbml0aW9uIGNvbnN1bWVzIGEgY2hhcmFjdGVyLlxuXHQgICAgICBpZiAoY2hhclNwZWMucmVwZWF0KSB7XG5cdCAgICAgICAgc3RhdGUubmV4dFN0YXRlcy5wdXNoKHN0YXRlKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gUmV0dXJuIHRoZSBuZXcgc3RhdGVcblx0ICAgICAgcmV0dXJuIHN0YXRlO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBGaW5kIGEgbGlzdCBvZiBjaGlsZCBzdGF0ZXMgbWF0Y2hpbmcgdGhlIG5leHQgY2hhcmFjdGVyXG5cdCAgICBtYXRjaDogZnVuY3Rpb24gbWF0Y2goY2gpIHtcblx0ICAgICAgLy8gREVCVUcgXCJQcm9jZXNzaW5nIGBcIiArIGNoICsgXCJgOlwiXG5cdCAgICAgIHZhciBuZXh0U3RhdGVzID0gdGhpcy5uZXh0U3RhdGVzLFxuXHQgICAgICAgICAgY2hpbGQsXG5cdCAgICAgICAgICBjaGFyU3BlYyxcblx0ICAgICAgICAgIGNoYXJzO1xuXHRcblx0ICAgICAgLy8gREVCVUcgXCIgIFwiICsgZGVidWdTdGF0ZSh0aGlzKVxuXHQgICAgICB2YXIgcmV0dXJuZWQgPSBbXTtcblx0XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbmV4dFN0YXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBjaGlsZCA9IG5leHRTdGF0ZXNbaV07XG5cdFxuXHQgICAgICAgIGNoYXJTcGVjID0gY2hpbGQuY2hhclNwZWM7XG5cdFxuXHQgICAgICAgIGlmICh0eXBlb2YgKGNoYXJzID0gY2hhclNwZWMudmFsaWRDaGFycykgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgICBpZiAoY2hhcnMuaW5kZXhPZihjaCkgIT09IC0xKSB7XG5cdCAgICAgICAgICAgIHJldHVybmVkLnB1c2goY2hpbGQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIChjaGFycyA9IGNoYXJTcGVjLmludmFsaWRDaGFycykgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgICBpZiAoY2hhcnMuaW5kZXhPZihjaCkgPT09IC0xKSB7XG5cdCAgICAgICAgICAgIHJldHVybmVkLnB1c2goY2hpbGQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIHJldHVybmVkO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKiBJRiBERUJVR1xuXHQgICAgLCBkZWJ1ZzogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBjaGFyU3BlYyA9IHRoaXMuY2hhclNwZWMsXG5cdCAgICAgICAgICBkZWJ1ZyA9IFwiW1wiLFxuXHQgICAgICAgICAgY2hhcnMgPSBjaGFyU3BlYy52YWxpZENoYXJzIHx8IGNoYXJTcGVjLmludmFsaWRDaGFycztcblx0ICAgICAgIGlmIChjaGFyU3BlYy5pbnZhbGlkQ2hhcnMpIHsgZGVidWcgKz0gXCJeXCI7IH1cblx0ICAgICAgZGVidWcgKz0gY2hhcnM7XG5cdCAgICAgIGRlYnVnICs9IFwiXVwiO1xuXHQgICAgICAgaWYgKGNoYXJTcGVjLnJlcGVhdCkgeyBkZWJ1ZyArPSBcIitcIjsgfVxuXHQgICAgICAgcmV0dXJuIGRlYnVnO1xuXHQgICAgfVxuXHQgICAgRU5EIElGICoqL1xuXHQgIH07XG5cdFxuXHQgIC8qKiBJRiBERUJVR1xuXHQgIGZ1bmN0aW9uIGRlYnVnKGxvZykge1xuXHQgICAgY29uc29sZS5sb2cobG9nKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGRlYnVnU3RhdGUoc3RhdGUpIHtcblx0ICAgIHJldHVybiBzdGF0ZS5uZXh0U3RhdGVzLm1hcChmdW5jdGlvbihuKSB7XG5cdCAgICAgIGlmIChuLm5leHRTdGF0ZXMubGVuZ3RoID09PSAwKSB7IHJldHVybiBcIiggXCIgKyBuLmRlYnVnKCkgKyBcIiBbYWNjZXB0aW5nXSApXCI7IH1cblx0ICAgICAgcmV0dXJuIFwiKCBcIiArIG4uZGVidWcoKSArIFwiIDx0aGVuPiBcIiArIG4ubmV4dFN0YXRlcy5tYXAoZnVuY3Rpb24ocykgeyByZXR1cm4gcy5kZWJ1ZygpIH0pLmpvaW4oXCIgb3IgXCIpICsgXCIgKVwiO1xuXHQgICAgfSkuam9pbihcIiwgXCIpXG5cdCAgfVxuXHQgIEVORCBJRiAqKi9cblx0XG5cdCAgLy8gU29ydCB0aGUgcm91dGVzIGJ5IHNwZWNpZmljaXR5XG5cdCAgZnVuY3Rpb24gc29ydFNvbHV0aW9ucyhzdGF0ZXMpIHtcblx0ICAgIHJldHVybiBzdGF0ZXMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuXHQgICAgICByZXR1cm4gYi5zcGVjaWZpY2l0eS52YWwgLSBhLnNwZWNpZmljaXR5LnZhbDtcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVjb2duaXplQ2hhcihzdGF0ZXMsIGNoKSB7XG5cdCAgICB2YXIgbmV4dFN0YXRlcyA9IFtdO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gc3RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgc3RhdGUgPSBzdGF0ZXNbaV07XG5cdFxuXHQgICAgICBuZXh0U3RhdGVzID0gbmV4dFN0YXRlcy5jb25jYXQoc3RhdGUubWF0Y2goY2gpKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gbmV4dFN0YXRlcztcblx0ICB9XG5cdFxuXHQgIHZhciBvQ3JlYXRlID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbiAocHJvdG8pIHtcblx0ICAgIGZ1bmN0aW9uIEYoKSB7fVxuXHQgICAgRi5wcm90b3R5cGUgPSBwcm90bztcblx0ICAgIHJldHVybiBuZXcgRigpO1xuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIFJlY29nbml6ZVJlc3VsdHMocXVlcnlQYXJhbXMpIHtcblx0ICAgIHRoaXMucXVlcnlQYXJhbXMgPSBxdWVyeVBhcmFtcyB8fCB7fTtcblx0ICB9XG5cdCAgUmVjb2duaXplUmVzdWx0cy5wcm90b3R5cGUgPSBvQ3JlYXRlKHtcblx0ICAgIHNwbGljZTogQXJyYXkucHJvdG90eXBlLnNwbGljZSxcblx0ICAgIHNsaWNlOiBBcnJheS5wcm90b3R5cGUuc2xpY2UsXG5cdCAgICBwdXNoOiBBcnJheS5wcm90b3R5cGUucHVzaCxcblx0ICAgIGxlbmd0aDogMCxcblx0ICAgIHF1ZXJ5UGFyYW1zOiBudWxsXG5cdCAgfSk7XG5cdFxuXHQgIGZ1bmN0aW9uIGZpbmRIYW5kbGVyKHN0YXRlLCBwYXRoLCBxdWVyeVBhcmFtcykge1xuXHQgICAgdmFyIGhhbmRsZXJzID0gc3RhdGUuaGFuZGxlcnMsXG5cdCAgICAgICAgcmVnZXggPSBzdGF0ZS5yZWdleDtcblx0ICAgIHZhciBjYXB0dXJlcyA9IHBhdGgubWF0Y2gocmVnZXgpLFxuXHQgICAgICAgIGN1cnJlbnRDYXB0dXJlID0gMTtcblx0ICAgIHZhciByZXN1bHQgPSBuZXcgUmVjb2duaXplUmVzdWx0cyhxdWVyeVBhcmFtcyk7XG5cdFxuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIGhhbmRsZXIgPSBoYW5kbGVyc1tpXSxcblx0ICAgICAgICAgIG5hbWVzID0gaGFuZGxlci5uYW1lcyxcblx0ICAgICAgICAgIHBhcmFtcyA9IHt9O1xuXHRcblx0ICAgICAgZm9yICh2YXIgaiA9IDAsIG0gPSBuYW1lcy5sZW5ndGg7IGogPCBtOyBqKyspIHtcblx0ICAgICAgICBwYXJhbXNbbmFtZXNbal1dID0gY2FwdHVyZXNbY3VycmVudENhcHR1cmUrK107XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJlc3VsdC5wdXNoKHsgaGFuZGxlcjogaGFuZGxlci5oYW5kbGVyLCBwYXJhbXM6IHBhcmFtcywgaXNEeW5hbWljOiAhIW5hbWVzLmxlbmd0aCB9KTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gYWRkU2VnbWVudChjdXJyZW50U3RhdGUsIHNlZ21lbnQpIHtcblx0ICAgIHNlZ21lbnQuZWFjaENoYXIoZnVuY3Rpb24gKGNoKSB7XG5cdCAgICAgIHZhciBzdGF0ZTtcblx0XG5cdCAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRTdGF0ZS5wdXQoY2gpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgcmV0dXJuIGN1cnJlbnRTdGF0ZTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGRlY29kZVF1ZXJ5UGFyYW1QYXJ0KHBhcnQpIHtcblx0ICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw0MDEvaW50ZXJhY3QvZm9ybXMuaHRtbCNoLTE3LjEzLjQuMVxuXHQgICAgcGFydCA9IHBhcnQucmVwbGFjZSgvXFwrL2dtLCAnJTIwJyk7XG5cdCAgICByZXR1cm4gdHJ5RGVjb2RlKHBhcnQsIHRydWUpO1xuXHQgIH1cblx0XG5cdCAgLy8gVGhlIG1haW4gaW50ZXJmYWNlXG5cdFxuXHQgIHZhciBSb3V0ZVJlY29nbml6ZXIgPSBmdW5jdGlvbiBSb3V0ZVJlY29nbml6ZXIoKSB7XG5cdCAgICB0aGlzLnJvb3RTdGF0ZSA9IG5ldyBTdGF0ZSgpO1xuXHQgICAgdGhpcy5uYW1lcyA9IHt9O1xuXHQgIH07XG5cdFxuXHQgIFJvdXRlUmVjb2duaXplci5wcm90b3R5cGUgPSB7XG5cdCAgICBhZGQ6IGZ1bmN0aW9uIGFkZChyb3V0ZXMsIG9wdGlvbnMpIHtcblx0ICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IHRoaXMucm9vdFN0YXRlLFxuXHQgICAgICAgICAgcmVnZXggPSBcIl5cIixcblx0ICAgICAgICAgIHNwZWNpZmljaXR5ID0ge30sXG5cdCAgICAgICAgICBoYW5kbGVycyA9IFtdLFxuXHQgICAgICAgICAgYWxsU2VnbWVudHMgPSBbXSxcblx0ICAgICAgICAgIG5hbWU7XG5cdFxuXHQgICAgICB2YXIgaXNFbXB0eSA9IHRydWU7XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHJvdXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICB2YXIgcm91dGUgPSByb3V0ZXNbaV0sXG5cdCAgICAgICAgICAgIG5hbWVzID0gW107XG5cdFxuXHQgICAgICAgIHZhciBzZWdtZW50cyA9IHBhcnNlKHJvdXRlLnBhdGgsIG5hbWVzLCBzcGVjaWZpY2l0eSk7XG5cdFxuXHQgICAgICAgIGFsbFNlZ21lbnRzID0gYWxsU2VnbWVudHMuY29uY2F0KHNlZ21lbnRzKTtcblx0XG5cdCAgICAgICAgZm9yICh2YXIgaiA9IDAsIG0gPSBzZWdtZW50cy5sZW5ndGg7IGogPCBtOyBqKyspIHtcblx0ICAgICAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbal07XG5cdFxuXHQgICAgICAgICAgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBFcHNpbG9uU2VnbWVudCkge1xuXHQgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpc0VtcHR5ID0gZmFsc2U7XG5cdFxuXHQgICAgICAgICAgLy8gQWRkIGEgXCIvXCIgZm9yIHRoZSBuZXcgc2VnbWVudFxuXHQgICAgICAgICAgY3VycmVudFN0YXRlID0gY3VycmVudFN0YXRlLnB1dCh7IHZhbGlkQ2hhcnM6IFwiL1wiIH0pO1xuXHQgICAgICAgICAgcmVnZXggKz0gXCIvXCI7XG5cdFxuXHQgICAgICAgICAgLy8gQWRkIGEgcmVwcmVzZW50YXRpb24gb2YgdGhlIHNlZ21lbnQgdG8gdGhlIE5GQSBhbmQgcmVnZXhcblx0ICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IGFkZFNlZ21lbnQoY3VycmVudFN0YXRlLCBzZWdtZW50KTtcblx0ICAgICAgICAgIHJlZ2V4ICs9IHNlZ21lbnQucmVnZXgoKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciBoYW5kbGVyID0geyBoYW5kbGVyOiByb3V0ZS5oYW5kbGVyLCBuYW1lczogbmFtZXMgfTtcblx0ICAgICAgICBoYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoaXNFbXB0eSkge1xuXHQgICAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRTdGF0ZS5wdXQoeyB2YWxpZENoYXJzOiBcIi9cIiB9KTtcblx0ICAgICAgICByZWdleCArPSBcIi9cIjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgY3VycmVudFN0YXRlLmhhbmRsZXJzID0gaGFuZGxlcnM7XG5cdCAgICAgIGN1cnJlbnRTdGF0ZS5yZWdleCA9IG5ldyBSZWdFeHAocmVnZXggKyBcIiRcIik7XG5cdCAgICAgIGN1cnJlbnRTdGF0ZS5zcGVjaWZpY2l0eSA9IHNwZWNpZmljaXR5O1xuXHRcblx0ICAgICAgaWYgKG5hbWUgPSBvcHRpb25zICYmIG9wdGlvbnMuYXMpIHtcblx0ICAgICAgICB0aGlzLm5hbWVzW25hbWVdID0ge1xuXHQgICAgICAgICAgc2VnbWVudHM6IGFsbFNlZ21lbnRzLFxuXHQgICAgICAgICAgaGFuZGxlcnM6IGhhbmRsZXJzXG5cdCAgICAgICAgfTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICBoYW5kbGVyc0ZvcjogZnVuY3Rpb24gaGFuZGxlcnNGb3IobmFtZSkge1xuXHQgICAgICB2YXIgcm91dGUgPSB0aGlzLm5hbWVzW25hbWVdLFxuXHQgICAgICAgICAgcmVzdWx0ID0gW107XG5cdCAgICAgIGlmICghcm91dGUpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGVyZSBpcyBubyByb3V0ZSBuYW1lZCBcIiArIG5hbWUpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHJvdXRlLmhhbmRsZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHJlc3VsdC5wdXNoKHJvdXRlLmhhbmRsZXJzW2ldKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgIH0sXG5cdFxuXHQgICAgaGFzUm91dGU6IGZ1bmN0aW9uIGhhc1JvdXRlKG5hbWUpIHtcblx0ICAgICAgcmV0dXJuICEhdGhpcy5uYW1lc1tuYW1lXTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2VuZXJhdGU6IGZ1bmN0aW9uIGdlbmVyYXRlKG5hbWUsIHBhcmFtcykge1xuXHQgICAgICB2YXIgcm91dGUgPSB0aGlzLm5hbWVzW25hbWVdLFxuXHQgICAgICAgICAgb3V0cHV0ID0gXCJcIjtcblx0ICAgICAgaWYgKCFyb3V0ZSkge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZXJlIGlzIG5vIHJvdXRlIG5hbWVkIFwiICsgbmFtZSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBzZWdtZW50cyA9IHJvdXRlLnNlZ21lbnRzO1xuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzZWdtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2ldO1xuXHRcblx0ICAgICAgICBpZiAoc2VnbWVudCBpbnN0YW5jZW9mIEVwc2lsb25TZWdtZW50KSB7XG5cdCAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIG91dHB1dCArPSBcIi9cIjtcblx0ICAgICAgICBvdXRwdXQgKz0gc2VnbWVudC5nZW5lcmF0ZShwYXJhbXMpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAob3V0cHV0LmNoYXJBdCgwKSAhPT0gJy8nKSB7XG5cdCAgICAgICAgb3V0cHV0ID0gJy8nICsgb3V0cHV0O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5xdWVyeVBhcmFtcykge1xuXHQgICAgICAgIG91dHB1dCArPSB0aGlzLmdlbmVyYXRlUXVlcnlTdHJpbmcocGFyYW1zLnF1ZXJ5UGFyYW1zKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIG91dHB1dDtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2VuZXJhdGVRdWVyeVN0cmluZzogZnVuY3Rpb24gZ2VuZXJhdGVRdWVyeVN0cmluZyhwYXJhbXMpIHtcblx0ICAgICAgdmFyIHBhaXJzID0gW107XG5cdCAgICAgIHZhciBrZXlzID0gW107XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiBwYXJhbXMpIHtcblx0ICAgICAgICBpZiAocGFyYW1zLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0ICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBrZXlzLnNvcnQoKTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGtleXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICAgIHZhciB2YWx1ZSA9IHBhcmFtc1trZXldO1xuXHQgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG5cdCAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHBhaXIgPSBlbmNvZGVVUklDb21wb25lbnQoa2V5KTtcblx0ICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgICAgIGZvciAodmFyIGogPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBqIDwgbDsgaisrKSB7XG5cdCAgICAgICAgICAgIHZhciBhcnJheVBhaXIgPSBrZXkgKyAnW10nICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlW2pdKTtcblx0ICAgICAgICAgICAgcGFpcnMucHVzaChhcnJheVBhaXIpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBwYWlyICs9IFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcblx0ICAgICAgICAgIHBhaXJzLnB1c2gocGFpcik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAocGFpcnMubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuICcnO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gXCI/XCIgKyBwYWlycy5qb2luKFwiJlwiKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgcGFyc2VRdWVyeVN0cmluZzogZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZyhxdWVyeVN0cmluZykge1xuXHQgICAgICB2YXIgcGFpcnMgPSBxdWVyeVN0cmluZy5zcGxpdChcIiZcIiksXG5cdCAgICAgICAgICBxdWVyeVBhcmFtcyA9IHt9O1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhaXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIHBhaXIgPSBwYWlyc1tpXS5zcGxpdCgnPScpLFxuXHQgICAgICAgICAgICBrZXkgPSBkZWNvZGVRdWVyeVBhcmFtUGFydChwYWlyWzBdKSxcblx0ICAgICAgICAgICAga2V5TGVuZ3RoID0ga2V5Lmxlbmd0aCxcblx0ICAgICAgICAgICAgaXNBcnJheSA9IGZhbHNlLFxuXHQgICAgICAgICAgICB2YWx1ZTtcblx0ICAgICAgICBpZiAocGFpci5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICAgIHZhbHVlID0gJ3RydWUnO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvL0hhbmRsZSBhcnJheXNcblx0ICAgICAgICAgIGlmIChrZXlMZW5ndGggPiAyICYmIGtleS5zbGljZShrZXlMZW5ndGggLSAyKSA9PT0gJ1tdJykge1xuXHQgICAgICAgICAgICBpc0FycmF5ID0gdHJ1ZTtcblx0ICAgICAgICAgICAga2V5ID0ga2V5LnNsaWNlKDAsIGtleUxlbmd0aCAtIDIpO1xuXHQgICAgICAgICAgICBpZiAoIXF1ZXJ5UGFyYW1zW2tleV0pIHtcblx0ICAgICAgICAgICAgICBxdWVyeVBhcmFtc1trZXldID0gW107XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIHZhbHVlID0gcGFpclsxXSA/IGRlY29kZVF1ZXJ5UGFyYW1QYXJ0KHBhaXJbMV0pIDogJyc7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChpc0FycmF5KSB7XG5cdCAgICAgICAgICBxdWVyeVBhcmFtc1trZXldLnB1c2godmFsdWUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBxdWVyeVBhcmFtc1trZXldID0gdmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBxdWVyeVBhcmFtcztcblx0ICAgIH0sXG5cdFxuXHQgICAgcmVjb2duaXplOiBmdW5jdGlvbiByZWNvZ25pemUocGF0aCwgc2lsZW50KSB7XG5cdCAgICAgIG5vV2FybmluZyA9IHNpbGVudDtcblx0ICAgICAgdmFyIHN0YXRlcyA9IFt0aGlzLnJvb3RTdGF0ZV0sXG5cdCAgICAgICAgICBwYXRoTGVuLFxuXHQgICAgICAgICAgaSxcblx0ICAgICAgICAgIGwsXG5cdCAgICAgICAgICBxdWVyeVN0YXJ0LFxuXHQgICAgICAgICAgcXVlcnlQYXJhbXMgPSB7fSxcblx0ICAgICAgICAgIGlzU2xhc2hEcm9wcGVkID0gZmFsc2U7XG5cdFxuXHQgICAgICBxdWVyeVN0YXJ0ID0gcGF0aC5pbmRleE9mKCc/Jyk7XG5cdCAgICAgIGlmIChxdWVyeVN0YXJ0ICE9PSAtMSkge1xuXHQgICAgICAgIHZhciBxdWVyeVN0cmluZyA9IHBhdGguc3Vic3RyKHF1ZXJ5U3RhcnQgKyAxLCBwYXRoLmxlbmd0aCk7XG5cdCAgICAgICAgcGF0aCA9IHBhdGguc3Vic3RyKDAsIHF1ZXJ5U3RhcnQpO1xuXHQgICAgICAgIGlmIChxdWVyeVN0cmluZykge1xuXHQgICAgICAgICAgcXVlcnlQYXJhbXMgPSB0aGlzLnBhcnNlUXVlcnlTdHJpbmcocXVlcnlTdHJpbmcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgcGF0aCA9IHRyeURlY29kZShwYXRoKTtcblx0ICAgICAgaWYgKCFwYXRoKSByZXR1cm47XG5cdFxuXHQgICAgICAvLyBERUJVRyBHUk9VUCBwYXRoXG5cdFxuXHQgICAgICBpZiAocGF0aC5jaGFyQXQoMCkgIT09IFwiL1wiKSB7XG5cdCAgICAgICAgcGF0aCA9IFwiL1wiICsgcGF0aDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcGF0aExlbiA9IHBhdGgubGVuZ3RoO1xuXHQgICAgICBpZiAocGF0aExlbiA+IDEgJiYgcGF0aC5jaGFyQXQocGF0aExlbiAtIDEpID09PSBcIi9cIikge1xuXHQgICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cigwLCBwYXRoTGVuIC0gMSk7XG5cdCAgICAgICAgaXNTbGFzaERyb3BwZWQgPSB0cnVlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBmb3IgKGkgPSAwLCBsID0gcGF0aC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBzdGF0ZXMgPSByZWNvZ25pemVDaGFyKHN0YXRlcywgcGF0aC5jaGFyQXQoaSkpO1xuXHQgICAgICAgIGlmICghc3RhdGVzLmxlbmd0aCkge1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBFTkQgREVCVUcgR1JPVVBcblx0XG5cdCAgICAgIHZhciBzb2x1dGlvbnMgPSBbXTtcblx0ICAgICAgZm9yIChpID0gMCwgbCA9IHN0YXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBpZiAoc3RhdGVzW2ldLmhhbmRsZXJzKSB7XG5cdCAgICAgICAgICBzb2x1dGlvbnMucHVzaChzdGF0ZXNbaV0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgc3RhdGVzID0gc29ydFNvbHV0aW9ucyhzb2x1dGlvbnMpO1xuXHRcblx0ICAgICAgdmFyIHN0YXRlID0gc29sdXRpb25zWzBdO1xuXHRcblx0ICAgICAgaWYgKHN0YXRlICYmIHN0YXRlLmhhbmRsZXJzKSB7XG5cdCAgICAgICAgLy8gaWYgYSB0cmFpbGluZyBzbGFzaCB3YXMgZHJvcHBlZCBhbmQgYSBzdGFyIHNlZ21lbnQgaXMgdGhlIGxhc3Qgc2VnbWVudFxuXHQgICAgICAgIC8vIHNwZWNpZmllZCwgcHV0IHRoZSB0cmFpbGluZyBzbGFzaCBiYWNrXG5cdCAgICAgICAgaWYgKGlzU2xhc2hEcm9wcGVkICYmIHN0YXRlLnJlZ2V4LnNvdXJjZS5zbGljZSgtNSkgPT09IFwiKC4rKSRcIikge1xuXHQgICAgICAgICAgcGF0aCA9IHBhdGggKyBcIi9cIjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIGZpbmRIYW5kbGVyKHN0YXRlLCBwYXRoLCBxdWVyeVBhcmFtcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBSb3V0ZVJlY29nbml6ZXIucHJvdG90eXBlLm1hcCA9IG1hcDtcblx0XG5cdCAgdmFyIGdlblF1ZXJ5ID0gUm91dGVSZWNvZ25pemVyLnByb3RvdHlwZS5nZW5lcmF0ZVF1ZXJ5U3RyaW5nO1xuXHRcblx0ICAvLyBleHBvcnQgZGVmYXVsdCBmb3IgaG9sZGluZyB0aGUgVnVlIHJlZmVyZW5jZVxuXHQgIHZhciBleHBvcnRzJDEgPSB7fTtcblx0ICAvKipcblx0ICAgKiBXYXJuIHN0dWZmLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1zZ1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiB3YXJuJDEobXNnKSB7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHQgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICBjb25zb2xlLmVycm9yKCdbdnVlLXJvdXRlcl0gJyArIG1zZyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBSZXNvbHZlIGEgcmVsYXRpdmUgcGF0aC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBiYXNlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHJlbGF0aXZlXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBhcHBlbmRcblx0ICAgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJlc29sdmVQYXRoKGJhc2UsIHJlbGF0aXZlLCBhcHBlbmQpIHtcblx0ICAgIHZhciBxdWVyeSA9IGJhc2UubWF0Y2goLyhcXD8uKikkLyk7XG5cdCAgICBpZiAocXVlcnkpIHtcblx0ICAgICAgcXVlcnkgPSBxdWVyeVsxXTtcblx0ICAgICAgYmFzZSA9IGJhc2Uuc2xpY2UoMCwgLXF1ZXJ5Lmxlbmd0aCk7XG5cdCAgICB9XG5cdCAgICAvLyBhIHF1ZXJ5IVxuXHQgICAgaWYgKHJlbGF0aXZlLmNoYXJBdCgwKSA9PT0gJz8nKSB7XG5cdCAgICAgIHJldHVybiBiYXNlICsgcmVsYXRpdmU7XG5cdCAgICB9XG5cdCAgICB2YXIgc3RhY2sgPSBiYXNlLnNwbGl0KCcvJyk7XG5cdCAgICAvLyByZW1vdmUgdHJhaWxpbmcgc2VnbWVudCBpZjpcblx0ICAgIC8vIC0gbm90IGFwcGVuZGluZ1xuXHQgICAgLy8gLSBhcHBlbmRpbmcgdG8gdHJhaWxpbmcgc2xhc2ggKGxhc3Qgc2VnbWVudCBpcyBlbXB0eSlcblx0ICAgIGlmICghYXBwZW5kIHx8ICFzdGFja1tzdGFjay5sZW5ndGggLSAxXSkge1xuXHQgICAgICBzdGFjay5wb3AoKTtcblx0ICAgIH1cblx0ICAgIC8vIHJlc29sdmUgcmVsYXRpdmUgcGF0aFxuXHQgICAgdmFyIHNlZ21lbnRzID0gcmVsYXRpdmUucmVwbGFjZSgvXlxcLy8sICcnKS5zcGxpdCgnLycpO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2ldO1xuXHQgICAgICBpZiAoc2VnbWVudCA9PT0gJy4nKSB7XG5cdCAgICAgICAgY29udGludWU7XG5cdCAgICAgIH0gZWxzZSBpZiAoc2VnbWVudCA9PT0gJy4uJykge1xuXHQgICAgICAgIHN0YWNrLnBvcCgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHN0YWNrLnB1c2goc2VnbWVudCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIGVuc3VyZSBsZWFkaW5nIHNsYXNoXG5cdCAgICBpZiAoc3RhY2tbMF0gIT09ICcnKSB7XG5cdCAgICAgIHN0YWNrLnVuc2hpZnQoJycpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHN0YWNrLmpvaW4oJy8nKTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEZvcmdpdmluZyBjaGVjayBmb3IgYSBwcm9taXNlXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gcFxuXHQgICAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGlzUHJvbWlzZShwKSB7XG5cdCAgICByZXR1cm4gcCAmJiB0eXBlb2YgcC50aGVuID09PSAnZnVuY3Rpb24nO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmV0cml2ZSBhIHJvdXRlIGNvbmZpZyBmaWVsZCBmcm9tIGEgY29tcG9uZW50IGluc3RhbmNlXG5cdCAgICogT1IgYSBjb21wb25lbnQgY29udHJ1Y3Rvci5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb258VnVlfSBjb21wb25lbnRcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgICAqIEByZXR1cm4geyp9XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGdldFJvdXRlQ29uZmlnKGNvbXBvbmVudCwgbmFtZSkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSBjb21wb25lbnQgJiYgKGNvbXBvbmVudC4kb3B0aW9ucyB8fCBjb21wb25lbnQub3B0aW9ucyk7XG5cdCAgICByZXR1cm4gb3B0aW9ucyAmJiBvcHRpb25zLnJvdXRlICYmIG9wdGlvbnMucm91dGVbbmFtZV07XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBSZXNvbHZlIGFuIGFzeW5jIGNvbXBvbmVudCBmYWN0b3J5LiBIYXZlIHRvIGRvIGEgZGlydHlcblx0ICAgKiBtb2NrIGhlcmUgYmVjYXVzZSBvZiBWdWUgY29yZSdzIGludGVybmFsIEFQSSBkZXBlbmRzIG9uXG5cdCAgICogYW4gSUQgY2hlY2suXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICovXG5cdFxuXHQgIHZhciByZXNvbHZlciA9IHVuZGVmaW5lZDtcblx0XG5cdCAgZnVuY3Rpb24gcmVzb2x2ZUFzeW5jQ29tcG9uZW50KGhhbmRsZXIsIGNiKSB7XG5cdCAgICBpZiAoIXJlc29sdmVyKSB7XG5cdCAgICAgIHJlc29sdmVyID0ge1xuXHQgICAgICAgIHJlc29sdmU6IGV4cG9ydHMkMS5WdWUucHJvdG90eXBlLl9yZXNvbHZlQ29tcG9uZW50LFxuXHQgICAgICAgICRvcHRpb25zOiB7XG5cdCAgICAgICAgICBjb21wb25lbnRzOiB7XG5cdCAgICAgICAgICAgIF86IGhhbmRsZXIuY29tcG9uZW50XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVzb2x2ZXIuJG9wdGlvbnMuY29tcG9uZW50cy5fID0gaGFuZGxlci5jb21wb25lbnQ7XG5cdCAgICB9XG5cdCAgICByZXNvbHZlci5yZXNvbHZlKCdfJywgZnVuY3Rpb24gKENvbXBvbmVudCkge1xuXHQgICAgICBoYW5kbGVyLmNvbXBvbmVudCA9IENvbXBvbmVudDtcblx0ICAgICAgY2IoQ29tcG9uZW50KTtcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogTWFwIHRoZSBkeW5hbWljIHNlZ21lbnRzIGluIGEgcGF0aCB0byBwYXJhbXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXNcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gcXVlcnlcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gbWFwUGFyYW1zKHBhdGgsIHBhcmFtcywgcXVlcnkpIHtcblx0ICAgIGlmIChwYXJhbXMgPT09IHVuZGVmaW5lZCkgcGFyYW1zID0ge307XG5cdFxuXHQgICAgcGF0aCA9IHBhdGgucmVwbGFjZSgvOihbXlxcL10rKS9nLCBmdW5jdGlvbiAoXywga2V5KSB7XG5cdCAgICAgIHZhciB2YWwgPSBwYXJhbXNba2V5XTtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmICghdmFsKSB7XG5cdCAgICAgICAgd2FybiQxKCdwYXJhbSBcIicgKyBrZXkgKyAnXCIgbm90IGZvdW5kIHdoZW4gZ2VuZXJhdGluZyAnICsgJ3BhdGggZm9yIFwiJyArIHBhdGggKyAnXCIgd2l0aCBwYXJhbXMgJyArIEpTT04uc3RyaW5naWZ5KHBhcmFtcykpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2YWwgfHwgJyc7XG5cdCAgICB9KTtcblx0ICAgIGlmIChxdWVyeSkge1xuXHQgICAgICBwYXRoICs9IGdlblF1ZXJ5KHF1ZXJ5KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBwYXRoO1xuXHQgIH1cblx0XG5cdCAgdmFyIGhhc2hSRSA9IC8jLiokLztcblx0XG5cdCAgdmFyIEhUTUw1SGlzdG9yeSA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBIVE1MNUhpc3RvcnkoX3JlZikge1xuXHQgICAgICB2YXIgcm9vdCA9IF9yZWYucm9vdDtcblx0ICAgICAgdmFyIG9uQ2hhbmdlID0gX3JlZi5vbkNoYW5nZTtcblx0ICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIEhUTUw1SGlzdG9yeSk7XG5cdFxuXHQgICAgICBpZiAocm9vdCAmJiByb290ICE9PSAnLycpIHtcblx0ICAgICAgICAvLyBtYWtlIHN1cmUgdGhlcmUncyB0aGUgc3RhcnRpbmcgc2xhc2hcblx0ICAgICAgICBpZiAocm9vdC5jaGFyQXQoMCkgIT09ICcvJykge1xuXHQgICAgICAgICAgcm9vdCA9ICcvJyArIHJvb3Q7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIHJlbW92ZSB0cmFpbGluZyBzbGFzaFxuXHQgICAgICAgIHRoaXMucm9vdCA9IHJvb3QucmVwbGFjZSgvXFwvJC8sICcnKTtcblx0ICAgICAgICB0aGlzLnJvb3RSRSA9IG5ldyBSZWdFeHAoJ15cXFxcJyArIHRoaXMucm9vdCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5yb290ID0gbnVsbDtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLm9uQ2hhbmdlID0gb25DaGFuZ2U7XG5cdCAgICAgIC8vIGNoZWNrIGJhc2UgdGFnXG5cdCAgICAgIHZhciBiYXNlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdiYXNlJyk7XG5cdCAgICAgIHRoaXMuYmFzZSA9IGJhc2VFbCAmJiBiYXNlRWwuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG5cdCAgICB9XG5cdFxuXHQgICAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KCkge1xuXHQgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgdmFyIHVybCA9IGxvY2F0aW9uLnBhdGhuYW1lICsgbG9jYXRpb24uc2VhcmNoO1xuXHQgICAgICAgIGlmIChfdGhpcy5yb290KSB7XG5cdCAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZShfdGhpcy5yb290UkUsICcnKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgX3RoaXMub25DaGFuZ2UodXJsLCBlICYmIGUuc3RhdGUsIGxvY2F0aW9uLmhhc2gpO1xuXHQgICAgICB9O1xuXHQgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgICAgdGhpcy5saXN0ZW5lcigpO1xuXHQgICAgfTtcblx0XG5cdCAgICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCkge1xuXHQgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgIH07XG5cdFxuXHQgICAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvKHBhdGgsIHJlcGxhY2UsIGFwcGVuZCkge1xuXHQgICAgICB2YXIgdXJsID0gdGhpcy5mb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCk7XG5cdCAgICAgIGlmIChyZXBsYWNlKSB7XG5cdCAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sICcnLCB1cmwpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIHJlY29yZCBzY3JvbGwgcG9zaXRpb24gYnkgcmVwbGFjaW5nIGN1cnJlbnQgc3RhdGVcblx0ICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZSh7XG5cdCAgICAgICAgICBwb3M6IHtcblx0ICAgICAgICAgICAgeDogd2luZG93LnBhZ2VYT2Zmc2V0LFxuXHQgICAgICAgICAgICB5OiB3aW5kb3cucGFnZVlPZmZzZXRcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCAnJywgbG9jYXRpb24uaHJlZik7XG5cdCAgICAgICAgLy8gdGhlbiBwdXNoIG5ldyBzdGF0ZVxuXHQgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKHt9LCAnJywgdXJsKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgaGFzaE1hdGNoID0gcGF0aC5tYXRjaChoYXNoUkUpO1xuXHQgICAgICB2YXIgaGFzaCA9IGhhc2hNYXRjaCAmJiBoYXNoTWF0Y2hbMF07XG5cdCAgICAgIHBhdGggPSB1cmxcblx0ICAgICAgLy8gc3RyaXAgaGFzaCBzbyBpdCBkb2Vzbid0IG1lc3MgdXAgcGFyYW1zXG5cdCAgICAgIC5yZXBsYWNlKGhhc2hSRSwgJycpXG5cdCAgICAgIC8vIHJlbW92ZSByb290IGJlZm9yZSBtYXRjaGluZ1xuXHQgICAgICAucmVwbGFjZSh0aGlzLnJvb3RSRSwgJycpO1xuXHQgICAgICB0aGlzLm9uQ2hhbmdlKHBhdGgsIG51bGwsIGhhc2gpO1xuXHQgICAgfTtcblx0XG5cdCAgICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLmZvcm1hdFBhdGggPSBmdW5jdGlvbiBmb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCkge1xuXHQgICAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJ1xuXHQgICAgICAvLyBhYnNvbHV0ZSBwYXRoXG5cdCAgICAgID8gdGhpcy5yb290ID8gdGhpcy5yb290ICsgJy8nICsgcGF0aC5yZXBsYWNlKC9eXFwvLywgJycpIDogcGF0aCA6IHJlc29sdmVQYXRoKHRoaXMuYmFzZSB8fCBsb2NhdGlvbi5wYXRobmFtZSwgcGF0aCwgYXBwZW5kKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIEhUTUw1SGlzdG9yeTtcblx0ICB9KSgpO1xuXHRcblx0ICB2YXIgSGFzaEhpc3RvcnkgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gSGFzaEhpc3RvcnkoX3JlZikge1xuXHQgICAgICB2YXIgaGFzaGJhbmcgPSBfcmVmLmhhc2hiYW5nO1xuXHQgICAgICB2YXIgb25DaGFuZ2UgPSBfcmVmLm9uQ2hhbmdlO1xuXHQgICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgSGFzaEhpc3RvcnkpO1xuXHRcblx0ICAgICAgdGhpcy5oYXNoYmFuZyA9IGhhc2hiYW5nO1xuXHQgICAgICB0aGlzLm9uQ2hhbmdlID0gb25DaGFuZ2U7XG5cdCAgICB9XG5cdFxuXHQgICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoKSB7XG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgcGF0aCA9IGxvY2F0aW9uLmhhc2g7XG5cdCAgICAgICAgdmFyIHJhdyA9IHBhdGgucmVwbGFjZSgvXiMhPy8sICcnKTtcblx0ICAgICAgICAvLyBhbHdheXNcblx0ICAgICAgICBpZiAocmF3LmNoYXJBdCgwKSAhPT0gJy8nKSB7XG5cdCAgICAgICAgICByYXcgPSAnLycgKyByYXc7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBmb3JtYXR0ZWRQYXRoID0gc2VsZi5mb3JtYXRQYXRoKHJhdyk7XG5cdCAgICAgICAgaWYgKGZvcm1hdHRlZFBhdGggIT09IHBhdGgpIHtcblx0ICAgICAgICAgIGxvY2F0aW9uLnJlcGxhY2UoZm9ybWF0dGVkUGF0aCk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIGRldGVybWluZSBxdWVyeVxuXHQgICAgICAgIC8vIG5vdGUgaXQncyBwb3NzaWJsZSB0byBoYXZlIHF1ZXJpZXMgaW4gYm90aCB0aGUgYWN0dWFsIFVSTFxuXHQgICAgICAgIC8vIGFuZCB0aGUgaGFzaCBmcmFnbWVudCBpdHNlbGYuXG5cdCAgICAgICAgdmFyIHF1ZXJ5ID0gbG9jYXRpb24uc2VhcmNoICYmIHBhdGguaW5kZXhPZignPycpID4gLTEgPyAnJicgKyBsb2NhdGlvbi5zZWFyY2guc2xpY2UoMSkgOiBsb2NhdGlvbi5zZWFyY2g7XG5cdCAgICAgICAgc2VsZi5vbkNoYW5nZShwYXRoLnJlcGxhY2UoL14jIT8vLCAnJykgKyBxdWVyeSk7XG5cdCAgICAgIH07XG5cdCAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICAgIHRoaXMubGlzdGVuZXIoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCkge1xuXHQgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgfTtcblx0XG5cdCAgICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyhwYXRoLCByZXBsYWNlLCBhcHBlbmQpIHtcblx0ICAgICAgcGF0aCA9IHRoaXMuZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpO1xuXHQgICAgICBpZiAocmVwbGFjZSkge1xuXHQgICAgICAgIGxvY2F0aW9uLnJlcGxhY2UocGF0aCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbG9jYXRpb24uaGFzaCA9IHBhdGg7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLmZvcm1hdFBhdGggPSBmdW5jdGlvbiBmb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCkge1xuXHQgICAgICB2YXIgaXNBYnNvbG91dGUgPSBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nO1xuXHQgICAgICB2YXIgcHJlZml4ID0gJyMnICsgKHRoaXMuaGFzaGJhbmcgPyAnIScgOiAnJyk7XG5cdCAgICAgIHJldHVybiBpc0Fic29sb3V0ZSA/IHByZWZpeCArIHBhdGggOiBwcmVmaXggKyByZXNvbHZlUGF0aChsb2NhdGlvbi5oYXNoLnJlcGxhY2UoL14jIT8vLCAnJyksIHBhdGgsIGFwcGVuZCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBIYXNoSGlzdG9yeTtcblx0ICB9KSgpO1xuXHRcblx0ICB2YXIgQWJzdHJhY3RIaXN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEFic3RyYWN0SGlzdG9yeShfcmVmKSB7XG5cdCAgICAgIHZhciBvbkNoYW5nZSA9IF9yZWYub25DaGFuZ2U7XG5cdCAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBBYnN0cmFjdEhpc3RvcnkpO1xuXHRcblx0ICAgICAgdGhpcy5vbkNoYW5nZSA9IG9uQ2hhbmdlO1xuXHQgICAgICB0aGlzLmN1cnJlbnRQYXRoID0gJy8nO1xuXHQgICAgfVxuXHRcblx0ICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydCgpIHtcblx0ICAgICAgdGhpcy5vbkNoYW5nZSgnLycpO1xuXHQgICAgfTtcblx0XG5cdCAgICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCkge1xuXHQgICAgICAvLyBub29wXG5cdCAgICB9O1xuXHRcblx0ICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyhwYXRoLCByZXBsYWNlLCBhcHBlbmQpIHtcblx0ICAgICAgcGF0aCA9IHRoaXMuY3VycmVudFBhdGggPSB0aGlzLmZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKTtcblx0ICAgICAgdGhpcy5vbkNoYW5nZShwYXRoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5mb3JtYXRQYXRoID0gZnVuY3Rpb24gZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpIHtcblx0ICAgICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLycgPyBwYXRoIDogcmVzb2x2ZVBhdGgodGhpcy5jdXJyZW50UGF0aCwgcGF0aCwgYXBwZW5kKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIEFic3RyYWN0SGlzdG9yeTtcblx0ICB9KSgpO1xuXHRcblx0ICAvKipcblx0ICAgKiBEZXRlcm1pbmUgdGhlIHJldXNhYmlsaXR5IG9mIGFuIGV4aXN0aW5nIHJvdXRlciB2aWV3LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuXHQgICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjYW5SZXVzZSh2aWV3LCBoYW5kbGVyLCB0cmFuc2l0aW9uKSB7XG5cdCAgICB2YXIgY29tcG9uZW50ID0gdmlldy5jaGlsZFZNO1xuXHQgICAgaWYgKCFjb21wb25lbnQgfHwgIWhhbmRsZXIpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgICAgLy8gaW1wb3J0YW50OiBjaGVjayB2aWV3LkNvbXBvbmVudCBoZXJlIGJlY2F1c2UgaXQgbWF5XG5cdCAgICAvLyBoYXZlIGJlZW4gY2hhbmdlZCBpbiBhY3RpdmF0ZSBob29rXG5cdCAgICBpZiAodmlldy5Db21wb25lbnQgIT09IGhhbmRsZXIuY29tcG9uZW50KSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICAgIHZhciBjYW5SZXVzZUZuID0gZ2V0Um91dGVDb25maWcoY29tcG9uZW50LCAnY2FuUmV1c2UnKTtcblx0ICAgIHJldHVybiB0eXBlb2YgY2FuUmV1c2VGbiA9PT0gJ2Jvb2xlYW4nID8gY2FuUmV1c2VGbiA6IGNhblJldXNlRm4gPyBjYW5SZXVzZUZuLmNhbGwoY29tcG9uZW50LCB7XG5cdCAgICAgIHRvOiB0cmFuc2l0aW9uLnRvLFxuXHQgICAgICBmcm9tOiB0cmFuc2l0aW9uLmZyb21cblx0ICAgIH0pIDogdHJ1ZTsgLy8gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgaWYgYSBjb21wb25lbnQgY2FuIGRlYWN0aXZhdGUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuXHQgICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gY2FuRGVhY3RpdmF0ZSh2aWV3LCB0cmFuc2l0aW9uLCBuZXh0KSB7XG5cdCAgICB2YXIgZnJvbUNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcblx0ICAgIHZhciBob29rID0gZ2V0Um91dGVDb25maWcoZnJvbUNvbXBvbmVudCwgJ2NhbkRlYWN0aXZhdGUnKTtcblx0ICAgIGlmICghaG9vaykge1xuXHQgICAgICBuZXh0KCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0cmFuc2l0aW9uLmNhbGxIb29rKGhvb2ssIGZyb21Db21wb25lbnQsIG5leHQsIHtcblx0ICAgICAgICBleHBlY3RCb29sZWFuOiB0cnVlXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgaWYgYSBjb21wb25lbnQgY2FuIGFjdGl2YXRlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcblx0ICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXh0XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGNhbkFjdGl2YXRlKGhhbmRsZXIsIHRyYW5zaXRpb24sIG5leHQpIHtcblx0ICAgIHJlc29sdmVBc3luY0NvbXBvbmVudChoYW5kbGVyLCBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG5cdCAgICAgIC8vIGhhdmUgdG8gY2hlY2sgZHVlIHRvIGFzeW5jLW5lc3Ncblx0ICAgICAgaWYgKHRyYW5zaXRpb24uYWJvcnRlZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICAvLyBkZXRlcm1pbmUgaWYgdGhpcyBjb21wb25lbnQgY2FuIGJlIGFjdGl2YXRlZFxuXHQgICAgICB2YXIgaG9vayA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ2NhbkFjdGl2YXRlJyk7XG5cdCAgICAgIGlmICghaG9vaykge1xuXHQgICAgICAgIG5leHQoKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0cmFuc2l0aW9uLmNhbGxIb29rKGhvb2ssIG51bGwsIG5leHQsIHtcblx0ICAgICAgICAgIGV4cGVjdEJvb2xlYW46IHRydWVcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBDYWxsIGRlYWN0aXZhdGUgaG9va3MgZm9yIGV4aXN0aW5nIHJvdXRlci12aWV3cy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XG5cdCAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBkZWFjdGl2YXRlKHZpZXcsIHRyYW5zaXRpb24sIG5leHQpIHtcblx0ICAgIHZhciBjb21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG5cdCAgICB2YXIgaG9vayA9IGdldFJvdXRlQ29uZmlnKGNvbXBvbmVudCwgJ2RlYWN0aXZhdGUnKTtcblx0ICAgIGlmICghaG9vaykge1xuXHQgICAgICBuZXh0KCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0cmFuc2l0aW9uLmNhbGxIb29rcyhob29rLCBjb21wb25lbnQsIG5leHQpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQWN0aXZhdGUgLyBzd2l0Y2ggY29tcG9uZW50IGZvciBhIHJvdXRlci12aWV3LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcblx0ICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cblx0ICAgKiBAcGFyYW0ge051bWJlcn0gZGVwdGhcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGFjdGl2YXRlKHZpZXcsIHRyYW5zaXRpb24sIGRlcHRoLCBjYiwgcmV1c2UpIHtcblx0ICAgIHZhciBoYW5kbGVyID0gdHJhbnNpdGlvbi5hY3RpdmF0ZVF1ZXVlW2RlcHRoXTtcblx0ICAgIGlmICghaGFuZGxlcikge1xuXHQgICAgICBzYXZlQ2hpbGRWaWV3KHZpZXcpO1xuXHQgICAgICBpZiAodmlldy5fYm91bmQpIHtcblx0ICAgICAgICB2aWV3LnNldENvbXBvbmVudChudWxsKTtcblx0ICAgICAgfVxuXHQgICAgICBjYiAmJiBjYigpO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIENvbXBvbmVudCA9IHZpZXcuQ29tcG9uZW50ID0gaGFuZGxlci5jb21wb25lbnQ7XG5cdCAgICB2YXIgYWN0aXZhdGVIb29rID0gZ2V0Um91dGVDb25maWcoQ29tcG9uZW50LCAnYWN0aXZhdGUnKTtcblx0ICAgIHZhciBkYXRhSG9vayA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ2RhdGEnKTtcblx0ICAgIHZhciB3YWl0Rm9yRGF0YSA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ3dhaXRGb3JEYXRhJyk7XG5cdFxuXHQgICAgdmlldy5kZXB0aCA9IGRlcHRoO1xuXHQgICAgdmlldy5hY3RpdmF0ZWQgPSBmYWxzZTtcblx0XG5cdCAgICB2YXIgY29tcG9uZW50ID0gdW5kZWZpbmVkO1xuXHQgICAgdmFyIGxvYWRpbmcgPSAhIShkYXRhSG9vayAmJiAhd2FpdEZvckRhdGEpO1xuXHRcblx0ICAgIC8vIFwicmV1c2VcIiBpcyBhIGZsYWcgcGFzc2VkIGRvd24gd2hlbiB0aGUgcGFyZW50IHZpZXcgaXNcblx0ICAgIC8vIGVpdGhlciByZXVzZWQgdmlhIGtlZXAtYWxpdmUgb3IgYXMgYSBjaGlsZCBvZiBhIGtlcHQtYWxpdmUgdmlldy5cblx0ICAgIC8vIG9mIGNvdXJzZSB3ZSBjYW4gb25seSByZXVzZSBpZiB0aGUgY3VycmVudCBrZXB0LWFsaXZlIGluc3RhbmNlXG5cdCAgICAvLyBpcyBvZiB0aGUgY29ycmVjdCB0eXBlLlxuXHQgICAgcmV1c2UgPSByZXVzZSAmJiB2aWV3LmNoaWxkVk0gJiYgdmlldy5jaGlsZFZNLmNvbnN0cnVjdG9yID09PSBDb21wb25lbnQ7XG5cdFxuXHQgICAgaWYgKHJldXNlKSB7XG5cdCAgICAgIC8vIGp1c3QgcmV1c2Vcblx0ICAgICAgY29tcG9uZW50ID0gdmlldy5jaGlsZFZNO1xuXHQgICAgICBjb21wb25lbnQuJGxvYWRpbmdSb3V0ZURhdGEgPSBsb2FkaW5nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc2F2ZUNoaWxkVmlldyh2aWV3KTtcblx0XG5cdCAgICAgIC8vIHVuYnVpbGQgY3VycmVudCBjb21wb25lbnQuIHRoaXMgc3RlcCBhbHNvIGRlc3Ryb3lzXG5cdCAgICAgIC8vIGFuZCByZW1vdmVzIGFsbCBuZXN0ZWQgY2hpbGQgdmlld3MuXG5cdCAgICAgIHZpZXcudW5idWlsZCh0cnVlKTtcblx0XG5cdCAgICAgIC8vIGJ1aWxkIHRoZSBuZXcgY29tcG9uZW50LiB0aGlzIHdpbGwgYWxzbyBjcmVhdGUgdGhlXG5cdCAgICAgIC8vIGRpcmVjdCBjaGlsZCB2aWV3IG9mIHRoZSBjdXJyZW50IG9uZS4gaXQgd2lsbCByZWdpc3RlclxuXHQgICAgICAvLyBpdHNlbGYgYXMgdmlldy5jaGlsZFZpZXcuXG5cdCAgICAgIGNvbXBvbmVudCA9IHZpZXcuYnVpbGQoe1xuXHQgICAgICAgIF9tZXRhOiB7XG5cdCAgICAgICAgICAkbG9hZGluZ1JvdXRlRGF0YTogbG9hZGluZ1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHtcblx0ICAgICAgICAgIHRoaXMuX3JvdXRlclZpZXcgPSB2aWV3O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICAvLyBoYW5kbGUga2VlcC1hbGl2ZS5cblx0ICAgICAgLy8gd2hlbiBhIGtlcHQtYWxpdmUgY2hpbGQgdm0gaXMgcmVzdG9yZWQsIHdlIG5lZWQgdG9cblx0ICAgICAgLy8gYWRkIGl0cyBjYWNoZWQgY2hpbGQgdmlld3MgaW50byB0aGUgcm91dGVyJ3MgdmlldyBsaXN0LFxuXHQgICAgICAvLyBhbmQgYWxzbyBwcm9wZXJseSB1cGRhdGUgY3VycmVudCB2aWV3J3MgY2hpbGQgdmlldy5cblx0ICAgICAgaWYgKHZpZXcua2VlcEFsaXZlKSB7XG5cdCAgICAgICAgY29tcG9uZW50LiRsb2FkaW5nUm91dGVEYXRhID0gbG9hZGluZztcblx0ICAgICAgICB2YXIgY2FjaGVkQ2hpbGRWaWV3ID0gY29tcG9uZW50Ll9rZWVwQWxpdmVSb3V0ZXJWaWV3O1xuXHQgICAgICAgIGlmIChjYWNoZWRDaGlsZFZpZXcpIHtcblx0ICAgICAgICAgIHZpZXcuY2hpbGRWaWV3ID0gY2FjaGVkQ2hpbGRWaWV3O1xuXHQgICAgICAgICAgY29tcG9uZW50Ll9rZWVwQWxpdmVSb3V0ZXJWaWV3ID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBjbGVhbnVwIHRoZSBjb21wb25lbnQgaW4gY2FzZSB0aGUgdHJhbnNpdGlvbiBpcyBhYm9ydGVkXG5cdCAgICAvLyBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBldmVyIGluc2VydGVkLlxuXHQgICAgdmFyIGNsZWFudXAgPSBmdW5jdGlvbiBjbGVhbnVwKCkge1xuXHQgICAgICBjb21wb25lbnQuJGRlc3Ryb3koKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gYWN0dWFsbHkgaW5zZXJ0IHRoZSBjb21wb25lbnQgYW5kIHRyaWdnZXIgdHJhbnNpdGlvblxuXHQgICAgdmFyIGluc2VydCA9IGZ1bmN0aW9uIGluc2VydCgpIHtcblx0ICAgICAgaWYgKHJldXNlKSB7XG5cdCAgICAgICAgY2IgJiYgY2IoKTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHJvdXRlciA9IHRyYW5zaXRpb24ucm91dGVyO1xuXHQgICAgICBpZiAocm91dGVyLl9yZW5kZXJlZCB8fCByb3V0ZXIuX3RyYW5zaXRpb25PbkxvYWQpIHtcblx0ICAgICAgICB2aWV3LnRyYW5zaXRpb24oY29tcG9uZW50KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBubyB0cmFuc2l0aW9uIG9uIGZpcnN0IHJlbmRlciwgbWFudWFsIHRyYW5zaXRpb25cblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAodmlldy5zZXRDdXJyZW50KSB7XG5cdCAgICAgICAgICAvLyAwLjEyIGNvbXBhdFxuXHQgICAgICAgICAgdmlldy5zZXRDdXJyZW50KGNvbXBvbmVudCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIDEuMFxuXHQgICAgICAgICAgdmlldy5jaGlsZFZNID0gY29tcG9uZW50O1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjb21wb25lbnQuJGJlZm9yZSh2aWV3LmFuY2hvciwgbnVsbCwgZmFsc2UpO1xuXHQgICAgICB9XG5cdCAgICAgIGNiICYmIGNiKCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHZhciBhZnRlckRhdGEgPSBmdW5jdGlvbiBhZnRlckRhdGEoKSB7XG5cdCAgICAgIC8vIGFjdGl2YXRlIHRoZSBjaGlsZCB2aWV3XG5cdCAgICAgIGlmICh2aWV3LmNoaWxkVmlldykge1xuXHQgICAgICAgIGFjdGl2YXRlKHZpZXcuY2hpbGRWaWV3LCB0cmFuc2l0aW9uLCBkZXB0aCArIDEsIG51bGwsIHJldXNlIHx8IHZpZXcua2VlcEFsaXZlKTtcblx0ICAgICAgfVxuXHQgICAgICBpbnNlcnQoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gY2FsbGVkIGFmdGVyIGFjdGl2YXRpb24gaG9vayBpcyByZXNvbHZlZFxuXHQgICAgdmFyIGFmdGVyQWN0aXZhdGUgPSBmdW5jdGlvbiBhZnRlckFjdGl2YXRlKCkge1xuXHQgICAgICB2aWV3LmFjdGl2YXRlZCA9IHRydWU7XG5cdCAgICAgIGlmIChkYXRhSG9vayAmJiB3YWl0Rm9yRGF0YSkge1xuXHQgICAgICAgIC8vIHdhaXQgdW50aWwgZGF0YSBsb2FkZWQgdG8gaW5zZXJ0XG5cdCAgICAgICAgbG9hZERhdGEoY29tcG9uZW50LCB0cmFuc2l0aW9uLCBkYXRhSG9vaywgYWZ0ZXJEYXRhLCBjbGVhbnVwKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBsb2FkIGRhdGEgYW5kIGluc2VydCBhdCB0aGUgc2FtZSB0aW1lXG5cdCAgICAgICAgaWYgKGRhdGFIb29rKSB7XG5cdCAgICAgICAgICBsb2FkRGF0YShjb21wb25lbnQsIHRyYW5zaXRpb24sIGRhdGFIb29rKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgYWZ0ZXJEYXRhKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgaWYgKGFjdGl2YXRlSG9vaykge1xuXHQgICAgICB0cmFuc2l0aW9uLmNhbGxIb29rcyhhY3RpdmF0ZUhvb2ssIGNvbXBvbmVudCwgYWZ0ZXJBY3RpdmF0ZSwge1xuXHQgICAgICAgIGNsZWFudXA6IGNsZWFudXAsXG5cdCAgICAgICAgcG9zdEFjdGl2YXRlOiB0cnVlXG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgYWZ0ZXJBY3RpdmF0ZSgpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmV1c2UgYSB2aWV3LCBqdXN0IHJlbG9hZCBkYXRhIGlmIG5lY2Vzc2FyeS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XG5cdCAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJldXNlKHZpZXcsIHRyYW5zaXRpb24pIHtcblx0ICAgIHZhciBjb21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG5cdCAgICB2YXIgZGF0YUhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhjb21wb25lbnQsICdkYXRhJyk7XG5cdCAgICBpZiAoZGF0YUhvb2spIHtcblx0ICAgICAgbG9hZERhdGEoY29tcG9uZW50LCB0cmFuc2l0aW9uLCBkYXRhSG9vayk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBBc3luY2hyb25vdXNseSBsb2FkIGFuZCBhcHBseSBkYXRhIHRvIGNvbXBvbmVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSBjb21wb25lbnRcblx0ICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjbGVhbnVwXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGxvYWREYXRhKGNvbXBvbmVudCwgdHJhbnNpdGlvbiwgaG9vaywgY2IsIGNsZWFudXApIHtcblx0ICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IHRydWU7XG5cdCAgICB0cmFuc2l0aW9uLmNhbGxIb29rcyhob29rLCBjb21wb25lbnQsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgY29tcG9uZW50LiRsb2FkaW5nUm91dGVEYXRhID0gZmFsc2U7XG5cdCAgICAgIGNvbXBvbmVudC4kZW1pdCgncm91dGUtZGF0YS1sb2FkZWQnLCBjb21wb25lbnQpO1xuXHQgICAgICBjYiAmJiBjYigpO1xuXHQgICAgfSwge1xuXHQgICAgICBjbGVhbnVwOiBjbGVhbnVwLFxuXHQgICAgICBwb3N0QWN0aXZhdGU6IHRydWUsXG5cdCAgICAgIHByb2Nlc3NEYXRhOiBmdW5jdGlvbiBwcm9jZXNzRGF0YShkYXRhKSB7XG5cdCAgICAgICAgLy8gaGFuZGxlIHByb21pc2Ugc3VnYXIgc3ludGF4XG5cdCAgICAgICAgdmFyIHByb21pc2VzID0gW107XG5cdCAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QoZGF0YSkpIHtcblx0ICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgICAgICB2YXIgdmFsID0gZGF0YVtrZXldO1xuXHQgICAgICAgICAgICBpZiAoaXNQcm9taXNlKHZhbCkpIHtcblx0ICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHZhbC50aGVuKGZ1bmN0aW9uIChyZXNvbHZlZFZhbCkge1xuXHQgICAgICAgICAgICAgICAgY29tcG9uZW50LiRzZXQoa2V5LCByZXNvbHZlZFZhbCk7XG5cdCAgICAgICAgICAgICAgfSkpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIGNvbXBvbmVudC4kc2V0KGtleSwgdmFsKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChwcm9taXNlcy5sZW5ndGgpIHtcblx0ICAgICAgICAgIHJldHVybiBwcm9taXNlc1swXS5jb25zdHJ1Y3Rvci5hbGwocHJvbWlzZXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBTYXZlIHRoZSBjaGlsZCB2aWV3IGZvciBhIGtlcHQtYWxpdmUgdmlldyBzbyB0aGF0XG5cdCAgICogd2UgY2FuIHJlc3RvcmUgaXQgd2hlbiBpdCBpcyBzd2l0Y2hlZCBiYWNrIHRvLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gc2F2ZUNoaWxkVmlldyh2aWV3KSB7XG5cdCAgICBpZiAodmlldy5rZWVwQWxpdmUgJiYgdmlldy5jaGlsZFZNICYmIHZpZXcuY2hpbGRWaWV3KSB7XG5cdCAgICAgIHZpZXcuY2hpbGRWTS5fa2VlcEFsaXZlUm91dGVyVmlldyA9IHZpZXcuY2hpbGRWaWV3O1xuXHQgICAgfVxuXHQgICAgdmlldy5jaGlsZFZpZXcgPSBudWxsO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgcGxhaW4gb2JqZWN0LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHsqfSB2YWxcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWwpIHtcblx0ICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBBIFJvdXRlVHJhbnNpdGlvbiBvYmplY3QgbWFuYWdlcyB0aGUgcGlwZWxpbmUgb2YgYVxuXHQgICAqIHJvdXRlci12aWV3IHN3aXRjaGluZyBwcm9jZXNzLiBUaGlzIGlzIGFsc28gdGhlIG9iamVjdFxuXHQgICAqIHBhc3NlZCBpbnRvIHVzZXIgcm91dGUgaG9va3MuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1JvdXRlcn0gcm91dGVyXG5cdCAgICogQHBhcmFtIHtSb3V0ZX0gdG9cblx0ICAgKiBAcGFyYW0ge1JvdXRlfSBmcm9tXG5cdCAgICovXG5cdFxuXHQgIHZhciBSb3V0ZVRyYW5zaXRpb24gPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gUm91dGVUcmFuc2l0aW9uKHJvdXRlciwgdG8sIGZyb20pIHtcblx0ICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIFJvdXRlVHJhbnNpdGlvbik7XG5cdFxuXHQgICAgICB0aGlzLnJvdXRlciA9IHJvdXRlcjtcblx0ICAgICAgdGhpcy50byA9IHRvO1xuXHQgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuXHQgICAgICB0aGlzLm5leHQgPSBudWxsO1xuXHQgICAgICB0aGlzLmFib3J0ZWQgPSBmYWxzZTtcblx0ICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBYm9ydCBjdXJyZW50IHRyYW5zaXRpb24gYW5kIHJldHVybiB0byBwcmV2aW91cyBsb2NhdGlvbi5cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuYWJvcnQgPSBmdW5jdGlvbiBhYm9ydCgpIHtcblx0ICAgICAgaWYgKCF0aGlzLmFib3J0ZWQpIHtcblx0ICAgICAgICB0aGlzLmFib3J0ZWQgPSB0cnVlO1xuXHQgICAgICAgIC8vIGlmIHRoZSByb290IHBhdGggdGhyb3dzIGFuIGVycm9yIGR1cmluZyB2YWxpZGF0aW9uXG5cdCAgICAgICAgLy8gb24gaW5pdGlhbCBsb2FkLCBpdCBnZXRzIGNhdWdodCBpbiBhbiBpbmZpbml0ZSBsb29wLlxuXHQgICAgICAgIHZhciBhYm9ydGluZ09uTG9hZCA9ICF0aGlzLmZyb20ucGF0aCAmJiB0aGlzLnRvLnBhdGggPT09ICcvJztcblx0ICAgICAgICBpZiAoIWFib3J0aW5nT25Mb2FkKSB7XG5cdCAgICAgICAgICB0aGlzLnJvdXRlci5yZXBsYWNlKHRoaXMuZnJvbS5wYXRoIHx8ICcvJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQWJvcnQgY3VycmVudCB0cmFuc2l0aW9uIGFuZCByZWRpcmVjdCB0byBhIG5ldyBsb2NhdGlvbi5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5yZWRpcmVjdCA9IGZ1bmN0aW9uIHJlZGlyZWN0KHBhdGgpIHtcblx0ICAgICAgaWYgKCF0aGlzLmFib3J0ZWQpIHtcblx0ICAgICAgICB0aGlzLmFib3J0ZWQgPSB0cnVlO1xuXHQgICAgICAgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgIHBhdGggPSBtYXBQYXJhbXMocGF0aCwgdGhpcy50by5wYXJhbXMsIHRoaXMudG8ucXVlcnkpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBwYXRoLnBhcmFtcyA9IHBhdGgucGFyYW1zIHx8IHRoaXMudG8ucGFyYW1zO1xuXHQgICAgICAgICAgcGF0aC5xdWVyeSA9IHBhdGgucXVlcnkgfHwgdGhpcy50by5xdWVyeTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5yb3V0ZXIucmVwbGFjZShwYXRoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEEgcm91dGVyIHZpZXcgdHJhbnNpdGlvbidzIHBpcGVsaW5lIGNhbiBiZSBkZXNjcmliZWQgYXNcblx0ICAgICAqIGZvbGxvd3MsIGFzc3VtaW5nIHdlIGFyZSB0cmFuc2l0aW9uaW5nIGZyb20gYW4gZXhpc3Rpbmdcblx0ICAgICAqIDxyb3V0ZXItdmlldz4gY2hhaW4gW0NvbXBvbmVudCBBLCBDb21wb25lbnQgQl0gdG8gYSBuZXdcblx0ICAgICAqIGNoYWluIFtDb21wb25lbnQgQSwgQ29tcG9uZW50IENdOlxuXHQgICAgICpcblx0ICAgICAqICBBICAgIEFcblx0ICAgICAqICB8ID0+IHxcblx0ICAgICAqICBCICAgIENcblx0ICAgICAqXG5cdCAgICAgKiAxLiBSZXVzYWJsaXR5IHBoYXNlOlxuXHQgICAgICogICAtPiBjYW5SZXVzZShBLCBBKVxuXHQgICAgICogICAtPiBjYW5SZXVzZShCLCBDKVxuXHQgICAgICogICAtPiBkZXRlcm1pbmUgbmV3IHF1ZXVlczpcblx0ICAgICAqICAgICAgLSBkZWFjdGl2YXRpb246IFtCXVxuXHQgICAgICogICAgICAtIGFjdGl2YXRpb246IFtDXVxuXHQgICAgICpcblx0ICAgICAqIDIuIFZhbGlkYXRpb24gcGhhc2U6XG5cdCAgICAgKiAgIC0+IGNhbkRlYWN0aXZhdGUoQilcblx0ICAgICAqICAgLT4gY2FuQWN0aXZhdGUoQylcblx0ICAgICAqXG5cdCAgICAgKiAzLiBBY3RpdmF0aW9uIHBoYXNlOlxuXHQgICAgICogICAtPiBkZWFjdGl2YXRlKEIpXG5cdCAgICAgKiAgIC0+IGFjdGl2YXRlKEMpXG5cdCAgICAgKlxuXHQgICAgICogRWFjaCBvZiB0aGVzZSBzdGVwcyBjYW4gYmUgYXN5bmNocm9ub3VzLCBhbmQgYW55XG5cdCAgICAgKiBzdGVwIGNhbiBwb3RlbnRpYWxseSBhYm9ydCB0aGUgdHJhbnNpdGlvbi5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KGNiKSB7XG5cdCAgICAgIHZhciB0cmFuc2l0aW9uID0gdGhpcztcblx0XG5cdCAgICAgIC8vIGRldGVybWluZSB0aGUgcXVldWUgb2Ygdmlld3MgdG8gZGVhY3RpdmF0ZVxuXHQgICAgICB2YXIgZGVhY3RpdmF0ZVF1ZXVlID0gW107XG5cdCAgICAgIHZhciB2aWV3ID0gdGhpcy5yb3V0ZXIuX3Jvb3RWaWV3O1xuXHQgICAgICB3aGlsZSAodmlldykge1xuXHQgICAgICAgIGRlYWN0aXZhdGVRdWV1ZS51bnNoaWZ0KHZpZXcpO1xuXHQgICAgICAgIHZpZXcgPSB2aWV3LmNoaWxkVmlldztcblx0ICAgICAgfVxuXHQgICAgICB2YXIgcmV2ZXJzZURlYWN0aXZhdGVRdWV1ZSA9IGRlYWN0aXZhdGVRdWV1ZS5zbGljZSgpLnJldmVyc2UoKTtcblx0XG5cdCAgICAgIC8vIGRldGVybWluZSB0aGUgcXVldWUgb2Ygcm91dGUgaGFuZGxlcnMgdG8gYWN0aXZhdGVcblx0ICAgICAgdmFyIGFjdGl2YXRlUXVldWUgPSB0aGlzLmFjdGl2YXRlUXVldWUgPSB0b0FycmF5KHRoaXMudG8ubWF0Y2hlZCkubWFwKGZ1bmN0aW9uIChtYXRjaCkge1xuXHQgICAgICAgIHJldHVybiBtYXRjaC5oYW5kbGVyO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIC8vIDEuIFJldXNhYmlsaXR5IHBoYXNlXG5cdCAgICAgIHZhciBpID0gdW5kZWZpbmVkLFxuXHQgICAgICAgICAgcmV1c2VRdWV1ZSA9IHVuZGVmaW5lZDtcblx0ICAgICAgZm9yIChpID0gMDsgaSA8IHJldmVyc2VEZWFjdGl2YXRlUXVldWUubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBpZiAoIWNhblJldXNlKHJldmVyc2VEZWFjdGl2YXRlUXVldWVbaV0sIGFjdGl2YXRlUXVldWVbaV0sIHRyYW5zaXRpb24pKSB7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGkgPiAwKSB7XG5cdCAgICAgICAgcmV1c2VRdWV1ZSA9IHJldmVyc2VEZWFjdGl2YXRlUXVldWUuc2xpY2UoMCwgaSk7XG5cdCAgICAgICAgZGVhY3RpdmF0ZVF1ZXVlID0gcmV2ZXJzZURlYWN0aXZhdGVRdWV1ZS5zbGljZShpKS5yZXZlcnNlKCk7XG5cdCAgICAgICAgYWN0aXZhdGVRdWV1ZSA9IGFjdGl2YXRlUXVldWUuc2xpY2UoaSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIDIuIFZhbGlkYXRpb24gcGhhc2Vcblx0ICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShkZWFjdGl2YXRlUXVldWUsIGNhbkRlYWN0aXZhdGUsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0cmFuc2l0aW9uLnJ1blF1ZXVlKGFjdGl2YXRlUXVldWUsIGNhbkFjdGl2YXRlLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB0cmFuc2l0aW9uLnJ1blF1ZXVlKGRlYWN0aXZhdGVRdWV1ZSwgZGVhY3RpdmF0ZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAvLyAzLiBBY3RpdmF0aW9uIHBoYXNlXG5cdFxuXHQgICAgICAgICAgICAvLyBVcGRhdGUgcm91dGVyIGN1cnJlbnQgcm91dGVcblx0ICAgICAgICAgICAgdHJhbnNpdGlvbi5yb3V0ZXIuX29uVHJhbnNpdGlvblZhbGlkYXRlZCh0cmFuc2l0aW9uKTtcblx0XG5cdCAgICAgICAgICAgIC8vIHRyaWdnZXIgcmV1c2UgZm9yIGFsbCByZXVzZWQgdmlld3Ncblx0ICAgICAgICAgICAgcmV1c2VRdWV1ZSAmJiByZXVzZVF1ZXVlLmZvckVhY2goZnVuY3Rpb24gKHZpZXcpIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gcmV1c2UodmlldywgdHJhbnNpdGlvbik7XG5cdCAgICAgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAgICAgLy8gdGhlIHJvb3Qgb2YgdGhlIGNoYWluIHRoYXQgbmVlZHMgdG8gYmUgcmVwbGFjZWRcblx0ICAgICAgICAgICAgLy8gaXMgdGhlIHRvcC1tb3N0IG5vbi1yZXVzYWJsZSB2aWV3LlxuXHQgICAgICAgICAgICBpZiAoZGVhY3RpdmF0ZVF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgICAgICAgIHZhciBfdmlldyA9IGRlYWN0aXZhdGVRdWV1ZVtkZWFjdGl2YXRlUXVldWUubGVuZ3RoIC0gMV07XG5cdCAgICAgICAgICAgICAgdmFyIGRlcHRoID0gcmV1c2VRdWV1ZSA/IHJldXNlUXVldWUubGVuZ3RoIDogMDtcblx0ICAgICAgICAgICAgICBhY3RpdmF0ZShfdmlldywgdHJhbnNpdGlvbiwgZGVwdGgsIGNiKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICBjYigpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQXN5bmNocm9ub3VzbHkgYW5kIHNlcXVlbnRpYWxseSBhcHBseSBhIGZ1bmN0aW9uIHRvIGFcblx0ICAgICAqIHF1ZXVlLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7QXJyYXl9IHF1ZXVlXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUucnVuUXVldWUgPSBmdW5jdGlvbiBydW5RdWV1ZShxdWV1ZSwgZm4sIGNiKSB7XG5cdCAgICAgIHZhciB0cmFuc2l0aW9uID0gdGhpcztcblx0ICAgICAgc3RlcCgwKTtcblx0ICAgICAgZnVuY3Rpb24gc3RlcChpbmRleCkge1xuXHQgICAgICAgIGlmIChpbmRleCA+PSBxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICAgIGNiKCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGZuKHF1ZXVlW2luZGV4XSwgdHJhbnNpdGlvbiwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBzdGVwKGluZGV4ICsgMSk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBDYWxsIGEgdXNlciBwcm92aWRlZCByb3V0ZSB0cmFuc2l0aW9uIGhvb2sgYW5kIGhhbmRsZVxuXHQgICAgICogdGhlIHJlc3BvbnNlIChlLmcuIGlmIHRoZSB1c2VyIHJldHVybnMgYSBwcm9taXNlKS5cblx0ICAgICAqXG5cdCAgICAgKiBJZiB0aGUgdXNlciBuZWl0aGVyIGV4cGVjdHMgYW4gYXJndW1lbnQgbm9yIHJldHVybnMgYVxuXHQgICAgICogcHJvbWlzZSwgdGhlIGhvb2sgaXMgYXNzdW1lZCB0byBiZSBzeW5jaHJvbm91cy5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rXG5cdCAgICAgKiBAcGFyYW0geyp9IFtjb250ZXh0XVxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuXHQgICAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGV4cGVjdEJvb2xlYW5cblx0ICAgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBwb3N0QWN0aXZlXG5cdCAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IHByb2Nlc3NEYXRhXG5cdCAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IGNsZWFudXBcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuY2FsbEhvb2sgPSBmdW5jdGlvbiBjYWxsSG9vayhob29rLCBjb250ZXh0LCBjYikge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCBhcmd1bWVudHNbM10gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzNdO1xuXHRcblx0ICAgICAgdmFyIF9yZWYkZXhwZWN0Qm9vbGVhbiA9IF9yZWYuZXhwZWN0Qm9vbGVhbjtcblx0ICAgICAgdmFyIGV4cGVjdEJvb2xlYW4gPSBfcmVmJGV4cGVjdEJvb2xlYW4gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRleHBlY3RCb29sZWFuO1xuXHQgICAgICB2YXIgX3JlZiRwb3N0QWN0aXZhdGUgPSBfcmVmLnBvc3RBY3RpdmF0ZTtcblx0ICAgICAgdmFyIHBvc3RBY3RpdmF0ZSA9IF9yZWYkcG9zdEFjdGl2YXRlID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkcG9zdEFjdGl2YXRlO1xuXHQgICAgICB2YXIgcHJvY2Vzc0RhdGEgPSBfcmVmLnByb2Nlc3NEYXRhO1xuXHQgICAgICB2YXIgY2xlYW51cCA9IF9yZWYuY2xlYW51cDtcblx0XG5cdCAgICAgIHZhciB0cmFuc2l0aW9uID0gdGhpcztcblx0ICAgICAgdmFyIG5leHRDYWxsZWQgPSBmYWxzZTtcblx0XG5cdCAgICAgIC8vIGFib3J0IHRoZSB0cmFuc2l0aW9uXG5cdCAgICAgIHZhciBhYm9ydCA9IGZ1bmN0aW9uIGFib3J0KCkge1xuXHQgICAgICAgIGNsZWFudXAgJiYgY2xlYW51cCgpO1xuXHQgICAgICAgIHRyYW5zaXRpb24uYWJvcnQoKTtcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIC8vIGhhbmRsZSBlcnJvcnNcblx0ICAgICAgdmFyIG9uRXJyb3IgPSBmdW5jdGlvbiBvbkVycm9yKGVycikge1xuXHQgICAgICAgIHBvc3RBY3RpdmF0ZSA/IG5leHQoKSA6IGFib3J0KCk7XG5cdCAgICAgICAgaWYgKGVyciAmJiAhdHJhbnNpdGlvbi5yb3V0ZXIuX3N1cHByZXNzKSB7XG5cdCAgICAgICAgICB3YXJuJDEoJ1VuY2F1Z2h0IGVycm9yIGR1cmluZyB0cmFuc2l0aW9uOiAnKTtcblx0ICAgICAgICAgIHRocm93IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyIDogbmV3IEVycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgLy8gc2luY2UgcHJvbWlzZSBzd2FsbG93cyBlcnJvcnMsIHdlIGhhdmUgdG9cblx0ICAgICAgLy8gdGhyb3cgaXQgaW4gdGhlIG5leHQgdGljay4uLlxuXHQgICAgICB2YXIgb25Qcm9taXNlRXJyb3IgPSBmdW5jdGlvbiBvblByb21pc2VFcnJvcihlcnIpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgb25FcnJvcihlcnIpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICB0aHJvdyBlO1xuXHQgICAgICAgICAgfSwgMCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgLy8gYWR2YW5jZSB0aGUgdHJhbnNpdGlvbiB0byB0aGUgbmV4dCBzdGVwXG5cdCAgICAgIHZhciBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcblx0ICAgICAgICBpZiAobmV4dENhbGxlZCkge1xuXHQgICAgICAgICAgd2FybiQxKCd0cmFuc2l0aW9uLm5leHQoKSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZS4nKTtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgbmV4dENhbGxlZCA9IHRydWU7XG5cdCAgICAgICAgaWYgKHRyYW5zaXRpb24uYWJvcnRlZCkge1xuXHQgICAgICAgICAgY2xlYW51cCAmJiBjbGVhbnVwKCk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNiICYmIGNiKCk7XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICB2YXIgbmV4dFdpdGhCb29sZWFuID0gZnVuY3Rpb24gbmV4dFdpdGhCb29sZWFuKHJlcykge1xuXHQgICAgICAgIGlmICh0eXBlb2YgcmVzID09PSAnYm9vbGVhbicpIHtcblx0ICAgICAgICAgIHJlcyA/IG5leHQoKSA6IGFib3J0KCk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChpc1Byb21pc2UocmVzKSkge1xuXHQgICAgICAgICAgcmVzLnRoZW4oZnVuY3Rpb24gKG9rKSB7XG5cdCAgICAgICAgICAgIG9rID8gbmV4dCgpIDogYWJvcnQoKTtcblx0ICAgICAgICAgIH0sIG9uUHJvbWlzZUVycm9yKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKCFob29rLmxlbmd0aCkge1xuXHQgICAgICAgICAgbmV4dCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0XG5cdCAgICAgIHZhciBuZXh0V2l0aERhdGEgPSBmdW5jdGlvbiBuZXh0V2l0aERhdGEoZGF0YSkge1xuXHQgICAgICAgIHZhciByZXMgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHJlcyA9IHByb2Nlc3NEYXRhKGRhdGEpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgcmV0dXJuIG9uRXJyb3IoZXJyKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGlzUHJvbWlzZShyZXMpKSB7XG5cdCAgICAgICAgICByZXMudGhlbihuZXh0LCBvblByb21pc2VFcnJvcik7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIG5leHQoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICAvLyBleHBvc2UgYSBjbG9uZSBvZiB0aGUgdHJhbnNpdGlvbiBvYmplY3QsIHNvIHRoYXQgZWFjaFxuXHQgICAgICAvLyBob29rIGdldHMgYSBjbGVhbiBjb3B5IGFuZCBwcmV2ZW50IHRoZSB1c2VyIGZyb21cblx0ICAgICAgLy8gbWVzc2luZyB3aXRoIHRoZSBpbnRlcm5hbHMuXG5cdCAgICAgIHZhciBleHBvc2VkID0ge1xuXHQgICAgICAgIHRvOiB0cmFuc2l0aW9uLnRvLFxuXHQgICAgICAgIGZyb206IHRyYW5zaXRpb24uZnJvbSxcblx0ICAgICAgICBhYm9ydDogYWJvcnQsXG5cdCAgICAgICAgbmV4dDogcHJvY2Vzc0RhdGEgPyBuZXh0V2l0aERhdGEgOiBuZXh0LFxuXHQgICAgICAgIHJlZGlyZWN0OiBmdW5jdGlvbiByZWRpcmVjdCgpIHtcblx0ICAgICAgICAgIHRyYW5zaXRpb24ucmVkaXJlY3QuYXBwbHkodHJhbnNpdGlvbiwgYXJndW1lbnRzKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICAvLyBhY3R1YWxseSBjYWxsIHRoZSBob29rXG5cdCAgICAgIHZhciByZXMgPSB1bmRlZmluZWQ7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcmVzID0gaG9vay5jYWxsKGNvbnRleHQsIGV4cG9zZWQpO1xuXHQgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICByZXR1cm4gb25FcnJvcihlcnIpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoZXhwZWN0Qm9vbGVhbikge1xuXHQgICAgICAgIC8vIGJvb2xlYW4gaG9va3Ncblx0ICAgICAgICBuZXh0V2l0aEJvb2xlYW4ocmVzKTtcblx0ICAgICAgfSBlbHNlIGlmIChpc1Byb21pc2UocmVzKSkge1xuXHQgICAgICAgIC8vIHByb21pc2Vcblx0ICAgICAgICBpZiAocHJvY2Vzc0RhdGEpIHtcblx0ICAgICAgICAgIHJlcy50aGVuKG5leHRXaXRoRGF0YSwgb25Qcm9taXNlRXJyb3IpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXMudGhlbihuZXh0LCBvblByb21pc2VFcnJvcik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKHByb2Nlc3NEYXRhICYmIGlzUGxhaW5PamJlY3QocmVzKSkge1xuXHQgICAgICAgIC8vIGRhdGEgcHJvbWlzZSBzdWdhclxuXHQgICAgICAgIG5leHRXaXRoRGF0YShyZXMpO1xuXHQgICAgICB9IGVsc2UgaWYgKCFob29rLmxlbmd0aCkge1xuXHQgICAgICAgIG5leHQoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIENhbGwgYSBzaW5nbGUgaG9vayBvciBhbiBhcnJheSBvZiBhc3luYyBob29rcyBpbiBzZXJpZXMuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtBcnJheX0gaG9va3Ncblx0ICAgICAqIEBwYXJhbSB7Kn0gY29udGV4dFxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuY2FsbEhvb2tzID0gZnVuY3Rpb24gY2FsbEhvb2tzKGhvb2tzLCBjb250ZXh0LCBjYiwgb3B0aW9ucykge1xuXHQgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaG9va3MpKSB7XG5cdCAgICAgICAgdGhpcy5ydW5RdWV1ZShob29rcywgZnVuY3Rpb24gKGhvb2ssIF8sIG5leHQpIHtcblx0ICAgICAgICAgIGlmICghX3RoaXMuYWJvcnRlZCkge1xuXHQgICAgICAgICAgICBfdGhpcy5jYWxsSG9vayhob29rLCBjb250ZXh0LCBuZXh0LCBvcHRpb25zKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCBjYik7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5jYWxsSG9vayhob29rcywgY29udGV4dCwgY2IsIG9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBSb3V0ZVRyYW5zaXRpb247XG5cdCAgfSkoKTtcblx0XG5cdCAgZnVuY3Rpb24gaXNQbGFpbk9qYmVjdCh2YWwpIHtcblx0ICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiB0b0FycmF5KHZhbCkge1xuXHQgICAgcmV0dXJuIHZhbCA/IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHZhbCkgOiBbXTtcblx0ICB9XG5cdFxuXHQgIHZhciBpbnRlcm5hbEtleXNSRSA9IC9eKGNvbXBvbmVudHxzdWJSb3V0ZXN8ZnVsbFBhdGgpJC87XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJvdXRlIENvbnRleHQgT2JqZWN0XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAqIEBwYXJhbSB7Um91dGVyfSByb3V0ZXJcblx0ICAgKi9cblx0XG5cdCAgdmFyIFJvdXRlID0gZnVuY3Rpb24gUm91dGUocGF0aCwgcm91dGVyKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBSb3V0ZSk7XG5cdFxuXHQgICAgdmFyIG1hdGNoZWQgPSByb3V0ZXIuX3JlY29nbml6ZXIucmVjb2duaXplKHBhdGgpO1xuXHQgICAgaWYgKG1hdGNoZWQpIHtcblx0ICAgICAgLy8gY29weSBhbGwgY3VzdG9tIGZpZWxkcyBmcm9tIHJvdXRlIGNvbmZpZ3Ncblx0ICAgICAgW10uZm9yRWFjaC5jYWxsKG1hdGNoZWQsIGZ1bmN0aW9uIChtYXRjaCkge1xuXHQgICAgICAgIGZvciAodmFyIGtleSBpbiBtYXRjaC5oYW5kbGVyKSB7XG5cdCAgICAgICAgICBpZiAoIWludGVybmFsS2V5c1JFLnRlc3Qoa2V5KSkge1xuXHQgICAgICAgICAgICBfdGhpc1trZXldID0gbWF0Y2guaGFuZGxlcltrZXldO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIC8vIHNldCBxdWVyeSBhbmQgcGFyYW1zXG5cdCAgICAgIHRoaXMucXVlcnkgPSBtYXRjaGVkLnF1ZXJ5UGFyYW1zO1xuXHQgICAgICB0aGlzLnBhcmFtcyA9IFtdLnJlZHVjZS5jYWxsKG1hdGNoZWQsIGZ1bmN0aW9uIChwcmV2LCBjdXIpIHtcblx0ICAgICAgICBpZiAoY3VyLnBhcmFtcykge1xuXHQgICAgICAgICAgZm9yICh2YXIga2V5IGluIGN1ci5wYXJhbXMpIHtcblx0ICAgICAgICAgICAgcHJldltrZXldID0gY3VyLnBhcmFtc1trZXldO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gcHJldjtcblx0ICAgICAgfSwge30pO1xuXHQgICAgfVxuXHQgICAgLy8gZXhwb3NlIHBhdGggYW5kIHJvdXRlclxuXHQgICAgdGhpcy5wYXRoID0gcGF0aDtcblx0ICAgIC8vIGZvciBpbnRlcm5hbCB1c2Vcblx0ICAgIHRoaXMubWF0Y2hlZCA9IG1hdGNoZWQgfHwgcm91dGVyLl9ub3RGb3VuZEhhbmRsZXI7XG5cdCAgICAvLyBpbnRlcm5hbCByZWZlcmVuY2UgdG8gcm91dGVyXG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3JvdXRlcicsIHtcblx0ICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG5cdCAgICAgIHZhbHVlOiByb3V0ZXJcblx0ICAgIH0pO1xuXHQgICAgLy8gSW1wb3J0YW50OiBmcmVlemUgc2VsZiB0byBwcmV2ZW50IG9ic2VydmF0aW9uXG5cdCAgICBPYmplY3QuZnJlZXplKHRoaXMpO1xuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIGFwcGx5T3ZlcnJpZGUgKFZ1ZSkge1xuXHQgICAgdmFyIF9WdWUkdXRpbCA9IFZ1ZS51dGlsO1xuXHQgICAgdmFyIGV4dGVuZCA9IF9WdWUkdXRpbC5leHRlbmQ7XG5cdCAgICB2YXIgaXNBcnJheSA9IF9WdWUkdXRpbC5pc0FycmF5O1xuXHQgICAgdmFyIGRlZmluZVJlYWN0aXZlID0gX1Z1ZSR1dGlsLmRlZmluZVJlYWN0aXZlO1xuXHRcblx0ICAgIC8vIG92ZXJyaWRlIFZ1ZSdzIGluaXQgYW5kIGRlc3Ryb3kgcHJvY2VzcyB0byBrZWVwIHRyYWNrIG9mIHJvdXRlciBpbnN0YW5jZXNcblx0ICAgIHZhciBpbml0ID0gVnVlLnByb3RvdHlwZS5faW5pdDtcblx0ICAgIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuXHQgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0ICAgICAgdmFyIHJvb3QgPSBvcHRpb25zLl9wYXJlbnQgfHwgb3B0aW9ucy5wYXJlbnQgfHwgdGhpcztcblx0ICAgICAgdmFyIHJvdXRlciA9IHJvb3QuJHJvdXRlcjtcblx0ICAgICAgdmFyIHJvdXRlID0gcm9vdC4kcm91dGU7XG5cdCAgICAgIGlmIChyb3V0ZXIpIHtcblx0ICAgICAgICAvLyBleHBvc2Ugcm91dGVyXG5cdCAgICAgICAgdGhpcy4kcm91dGVyID0gcm91dGVyO1xuXHQgICAgICAgIHJvdXRlci5fY2hpbGRyZW4ucHVzaCh0aGlzKTtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAodGhpcy5fZGVmaW5lTWV0YSkge1xuXHQgICAgICAgICAgLy8gMC4xMlxuXHQgICAgICAgICAgdGhpcy5fZGVmaW5lTWV0YSgnJHJvdXRlJywgcm91dGUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvLyAxLjBcblx0ICAgICAgICAgIGRlZmluZVJlYWN0aXZlKHRoaXMsICckcm91dGUnLCByb3V0ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGluaXQuY2FsbCh0aGlzLCBvcHRpb25zKTtcblx0ICAgIH07XG5cdFxuXHQgICAgdmFyIGRlc3Ryb3kgPSBWdWUucHJvdG90eXBlLl9kZXN0cm95O1xuXHQgICAgVnVlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKCF0aGlzLl9pc0JlaW5nRGVzdHJveWVkICYmIHRoaXMuJHJvdXRlcikge1xuXHQgICAgICAgIHRoaXMuJHJvdXRlci5fY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgICBkZXN0cm95LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIDEuMCBvbmx5OiBlbmFibGUgcm91dGUgbWl4aW5zXG5cdCAgICB2YXIgc3RyYXRzID0gVnVlLmNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXM7XG5cdCAgICB2YXIgaG9va3NUb01lcmdlUkUgPSAvXihkYXRhfGFjdGl2YXRlfGRlYWN0aXZhdGUpJC87XG5cdFxuXHQgICAgaWYgKHN0cmF0cykge1xuXHQgICAgICBzdHJhdHMucm91dGUgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgICAgICAgIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG5cdCAgICAgICAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbDtcblx0ICAgICAgICB2YXIgcmV0ID0ge307XG5cdCAgICAgICAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcblx0ICAgICAgICBmb3IgKHZhciBrZXkgaW4gY2hpbGRWYWwpIHtcblx0ICAgICAgICAgIHZhciBhID0gcmV0W2tleV07XG5cdCAgICAgICAgICB2YXIgYiA9IGNoaWxkVmFsW2tleV07XG5cdCAgICAgICAgICAvLyBmb3IgZGF0YSwgYWN0aXZhdGUgYW5kIGRlYWN0aXZhdGUsIHdlIG5lZWQgdG8gbWVyZ2UgdGhlbSBpbnRvXG5cdCAgICAgICAgICAvLyBhcnJheXMgc2ltaWxhciB0byBsaWZlY3ljbGUgaG9va3MuXG5cdCAgICAgICAgICBpZiAoYSAmJiBob29rc1RvTWVyZ2VSRS50ZXN0KGtleSkpIHtcblx0ICAgICAgICAgICAgcmV0W2tleV0gPSAoaXNBcnJheShhKSA/IGEgOiBbYV0pLmNvbmNhdChiKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHJldFtrZXldID0gYjtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHJldDtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIFZpZXcgKFZ1ZSkge1xuXHRcblx0ICAgIHZhciBfID0gVnVlLnV0aWw7XG5cdCAgICB2YXIgY29tcG9uZW50RGVmID1cblx0ICAgIC8vIDAuMTJcblx0ICAgIFZ1ZS5kaXJlY3RpdmUoJ19jb21wb25lbnQnKSB8fFxuXHQgICAgLy8gMS4wXG5cdCAgICBWdWUuaW50ZXJuYWxEaXJlY3RpdmVzLmNvbXBvbmVudDtcblx0ICAgIC8vIDxyb3V0ZXItdmlldz4gZXh0ZW5kcyB0aGUgaW50ZXJuYWwgY29tcG9uZW50IGRpcmVjdGl2ZVxuXHQgICAgdmFyIHZpZXdEZWYgPSBfLmV4dGVuZCh7fSwgY29tcG9uZW50RGVmKTtcblx0XG5cdCAgICAvLyB3aXRoIHNvbWUgb3ZlcnJpZGVzXG5cdCAgICBfLmV4dGVuZCh2aWV3RGVmLCB7XG5cdFxuXHQgICAgICBfaXNSb3V0ZXJWaWV3OiB0cnVlLFxuXHRcblx0ICAgICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgICAgICB2YXIgcm91dGUgPSB0aGlzLnZtLiRyb3V0ZTtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAoIXJvdXRlKSB7XG5cdCAgICAgICAgICB3YXJuJDEoJzxyb3V0ZXItdmlldz4gY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgYSAnICsgJ3JvdXRlci1lbmFibGVkIGFwcC4nKTtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gZm9yY2UgZHluYW1pYyBkaXJlY3RpdmUgc28gdi1jb21wb25lbnQgZG9lc24ndFxuXHQgICAgICAgIC8vIGF0dGVtcHQgdG8gYnVpbGQgcmlnaHQgbm93XG5cdCAgICAgICAgdGhpcy5faXNEeW5hbWljTGl0ZXJhbCA9IHRydWU7XG5cdCAgICAgICAgLy8gZmluYWxseSwgaW5pdCBieSBkZWxlZ2F0aW5nIHRvIHYtY29tcG9uZW50XG5cdCAgICAgICAgY29tcG9uZW50RGVmLmJpbmQuY2FsbCh0aGlzKTtcblx0XG5cdCAgICAgICAgLy8gbG9jYXRlIHRoZSBwYXJlbnQgdmlld1xuXHQgICAgICAgIHZhciBwYXJlbnRWaWV3ID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnZtO1xuXHQgICAgICAgIHdoaWxlIChwYXJlbnQpIHtcblx0ICAgICAgICAgIGlmIChwYXJlbnQuX3JvdXRlclZpZXcpIHtcblx0ICAgICAgICAgICAgcGFyZW50VmlldyA9IHBhcmVudC5fcm91dGVyVmlldztcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQuJHBhcmVudDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHBhcmVudFZpZXcpIHtcblx0ICAgICAgICAgIC8vIHJlZ2lzdGVyIHNlbGYgYXMgYSBjaGlsZCBvZiB0aGUgcGFyZW50IHZpZXcsXG5cdCAgICAgICAgICAvLyBpbnN0ZWFkIG9mIGFjdGl2YXRpbmcgbm93LiBUaGlzIGlzIHNvIHRoYXQgdGhlXG5cdCAgICAgICAgICAvLyBjaGlsZCdzIGFjdGl2YXRlIGhvb2sgaXMgY2FsbGVkIGFmdGVyIHRoZVxuXHQgICAgICAgICAgLy8gcGFyZW50J3MgaGFzIHJlc29sdmVkLlxuXHQgICAgICAgICAgdGhpcy5wYXJlbnRWaWV3ID0gcGFyZW50Vmlldztcblx0ICAgICAgICAgIHBhcmVudFZpZXcuY2hpbGRWaWV3ID0gdGhpcztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8gdGhpcyBpcyB0aGUgcm9vdCB2aWV3IVxuXHQgICAgICAgICAgdmFyIHJvdXRlciA9IHJvdXRlLnJvdXRlcjtcblx0ICAgICAgICAgIHJvdXRlci5fcm9vdFZpZXcgPSB0aGlzO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gaGFuZGxlIGxhdGUtcmVuZGVyZWQgdmlld1xuXHQgICAgICAgIC8vIHR3byBwb3NzaWJpbGl0aWVzOlxuXHQgICAgICAgIC8vIDEuIHJvb3QgdmlldyByZW5kZXJlZCBhZnRlciB0cmFuc2l0aW9uIGhhcyBiZWVuXG5cdCAgICAgICAgLy8gICAgdmFsaWRhdGVkO1xuXHQgICAgICAgIC8vIDIuIGNoaWxkIHZpZXcgcmVuZGVyZWQgYWZ0ZXIgcGFyZW50IHZpZXcgaGFzIGJlZW5cblx0ICAgICAgICAvLyAgICBhY3RpdmF0ZWQuXG5cdCAgICAgICAgdmFyIHRyYW5zaXRpb24gPSByb3V0ZS5yb3V0ZXIuX2N1cnJlbnRUcmFuc2l0aW9uO1xuXHQgICAgICAgIGlmICghcGFyZW50VmlldyAmJiB0cmFuc2l0aW9uLmRvbmUgfHwgcGFyZW50VmlldyAmJiBwYXJlbnRWaWV3LmFjdGl2YXRlZCkge1xuXHQgICAgICAgICAgdmFyIGRlcHRoID0gcGFyZW50VmlldyA/IHBhcmVudFZpZXcuZGVwdGggKyAxIDogMDtcblx0ICAgICAgICAgIGFjdGl2YXRlKHRoaXMsIHRyYW5zaXRpb24sIGRlcHRoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgICAgICBpZiAodGhpcy5wYXJlbnRWaWV3KSB7XG5cdCAgICAgICAgICB0aGlzLnBhcmVudFZpZXcuY2hpbGRWaWV3ID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY29tcG9uZW50RGVmLnVuYmluZC5jYWxsKHRoaXMpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICBWdWUuZWxlbWVudERpcmVjdGl2ZSgncm91dGVyLXZpZXcnLCB2aWV3RGVmKTtcblx0ICB9XG5cdFxuXHQgIHZhciB0cmFpbGluZ1NsYXNoUkUgPSAvXFwvJC87XG5cdCAgdmFyIHJlZ2V4RXNjYXBlUkUgPSAvWy0uKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nO1xuXHQgIHZhciBxdWVyeVN0cmluZ1JFID0gL1xcPy4qJC87XG5cdFxuXHQgIC8vIGluc3RhbGwgdi1saW5rLCB3aGljaCBwcm92aWRlcyBuYXZpZ2F0aW9uIHN1cHBvcnQgZm9yXG5cdCAgLy8gSFRNTDUgaGlzdG9yeSBtb2RlXG5cdCAgZnVuY3Rpb24gTGluayAoVnVlKSB7XG5cdCAgICB2YXIgX1Z1ZSR1dGlsID0gVnVlLnV0aWw7XG5cdCAgICB2YXIgX2JpbmQgPSBfVnVlJHV0aWwuYmluZDtcblx0ICAgIHZhciBpc09iamVjdCA9IF9WdWUkdXRpbC5pc09iamVjdDtcblx0ICAgIHZhciBhZGRDbGFzcyA9IF9WdWUkdXRpbC5hZGRDbGFzcztcblx0ICAgIHZhciByZW1vdmVDbGFzcyA9IF9WdWUkdXRpbC5yZW1vdmVDbGFzcztcblx0XG5cdCAgICB2YXIgb25Qcmlvcml0eSA9IFZ1ZS5kaXJlY3RpdmUoJ29uJykucHJpb3JpdHk7XG5cdCAgICB2YXIgTElOS19VUERBVEUgPSAnX192dWUtcm91dGVyLWxpbmstdXBkYXRlX18nO1xuXHRcblx0ICAgIHZhciBhY3RpdmVJZCA9IDA7XG5cdFxuXHQgICAgVnVlLmRpcmVjdGl2ZSgnbGluay1hY3RpdmUnLCB7XG5cdCAgICAgIHByaW9yaXR5OiA5OTk5LFxuXHQgICAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICAgIHZhciBpZCA9IFN0cmluZyhhY3RpdmVJZCsrKTtcblx0ICAgICAgICAvLyBjb2xsZWN0IHYtbGlua3MgY29udGFpbmVkIHdpdGhpbiB0aGlzIGVsZW1lbnQuXG5cdCAgICAgICAgLy8gd2UgbmVlZCBkbyB0aGlzIGhlcmUgYmVmb3JlIHRoZSBwYXJlbnQtY2hpbGQgcmVsYXRpb25zaGlwXG5cdCAgICAgICAgLy8gZ2V0cyBtZXNzZWQgdXAgYnkgdGVybWluYWwgZGlyZWN0aXZlcyAoaWYsIGZvciwgY29tcG9uZW50cylcblx0ICAgICAgICB2YXIgY2hpbGRMaW5rcyA9IHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbCgnW3YtbGlua10nKTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkTGlua3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgICB2YXIgbGluayA9IGNoaWxkTGlua3NbaV07XG5cdCAgICAgICAgICB2YXIgZXhpc3RpbmdJZCA9IGxpbmsuZ2V0QXR0cmlidXRlKExJTktfVVBEQVRFKTtcblx0ICAgICAgICAgIHZhciB2YWx1ZSA9IGV4aXN0aW5nSWQgPyBleGlzdGluZ0lkICsgJywnICsgaWQgOiBpZDtcblx0ICAgICAgICAgIC8vIGxlYXZlIGEgbWFyayBvbiB0aGUgbGluayBlbGVtZW50IHdoaWNoIGNhbiBiZSBwZXJzaXN0ZWRcblx0ICAgICAgICAgIC8vIHRocm91Z2ggZnJhZ21lbnQgY2xvbmVzLlxuXHQgICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoTElOS19VUERBVEUsIHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy52bS4kb24oTElOS19VUERBVEUsIHRoaXMuY2IgPSBmdW5jdGlvbiAobGluaywgcGF0aCkge1xuXHQgICAgICAgICAgaWYgKGxpbmsuYWN0aXZlSWRzLmluZGV4T2YoaWQpID4gLTEpIHtcblx0ICAgICAgICAgICAgbGluay51cGRhdGVDbGFzc2VzKHBhdGgsIF90aGlzLmVsKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfSxcblx0ICAgICAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICAgICAgdGhpcy52bS4kb2ZmKExJTktfVVBEQVRFLCB0aGlzLmNiKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgVnVlLmRpcmVjdGl2ZSgnbGluaycsIHtcblx0ICAgICAgcHJpb3JpdHk6IG9uUHJpb3JpdHkgLSAyLFxuXHRcblx0ICAgICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgICAgICB2YXIgdm0gPSB0aGlzLnZtO1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmICghdm0uJHJvdXRlKSB7XG5cdCAgICAgICAgICB3YXJuJDEoJ3YtbGluayBjYW4gb25seSBiZSB1c2VkIGluc2lkZSBhIHJvdXRlci1lbmFibGVkIGFwcC4nKTtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5yb3V0ZXIgPSB2bS4kcm91dGUucm91dGVyO1xuXHQgICAgICAgIC8vIHVwZGF0ZSB0aGluZ3Mgd2hlbiB0aGUgcm91dGUgY2hhbmdlc1xuXHQgICAgICAgIHRoaXMudW53YXRjaCA9IHZtLiR3YXRjaCgnJHJvdXRlJywgX2JpbmQodGhpcy5vblJvdXRlVXBkYXRlLCB0aGlzKSk7XG5cdCAgICAgICAgLy8gY2hlY2sgdi1saW5rLWFjdGl2ZSBpZHNcblx0ICAgICAgICB2YXIgYWN0aXZlSWRzID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoTElOS19VUERBVEUpO1xuXHQgICAgICAgIGlmIChhY3RpdmVJZHMpIHtcblx0ICAgICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKExJTktfVVBEQVRFKTtcblx0ICAgICAgICAgIHRoaXMuYWN0aXZlSWRzID0gYWN0aXZlSWRzLnNwbGl0KCcsJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIG5vIG5lZWQgdG8gaGFuZGxlIGNsaWNrIGlmIGxpbmsgZXhwZWN0cyB0byBiZSBvcGVuZWRcblx0ICAgICAgICAvLyBpbiBhIG5ldyB3aW5kb3cvdGFiLlxuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmICh0aGlzLmVsLnRhZ05hbWUgPT09ICdBJyAmJiB0aGlzLmVsLmdldEF0dHJpYnV0ZSgndGFyZ2V0JykgPT09ICdfYmxhbmsnKSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIGhhbmRsZSBjbGlja1xuXHQgICAgICAgIHRoaXMuaGFuZGxlciA9IF9iaW5kKHRoaXMub25DbGljaywgdGhpcyk7XG5cdCAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlcik7XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh0YXJnZXQpIHtcblx0ICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcblx0ICAgICAgICBpZiAoaXNPYmplY3QodGFyZ2V0KSkge1xuXHQgICAgICAgICAgdGhpcy5hcHBlbmQgPSB0YXJnZXQuYXBwZW5kO1xuXHQgICAgICAgICAgdGhpcy5leGFjdCA9IHRhcmdldC5leGFjdDtcblx0ICAgICAgICAgIHRoaXMucHJldkFjdGl2ZUNsYXNzID0gdGhpcy5hY3RpdmVDbGFzcztcblx0ICAgICAgICAgIHRoaXMuYWN0aXZlQ2xhc3MgPSB0YXJnZXQuYWN0aXZlQ2xhc3M7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMub25Sb3V0ZVVwZGF0ZSh0aGlzLnZtLiRyb3V0ZSk7XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcblx0ICAgICAgICAvLyBkb24ndCByZWRpcmVjdCB3aXRoIGNvbnRyb2wga2V5c1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmIChlLm1ldGFLZXkgfHwgZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkpIHJldHVybjtcblx0ICAgICAgICAvLyBkb24ndCByZWRpcmVjdCB3aGVuIHByZXZlbnREZWZhdWx0IGNhbGxlZFxuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjtcblx0ICAgICAgICAvLyBkb24ndCByZWRpcmVjdCBvbiByaWdodCBjbGlja1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmIChlLmJ1dHRvbiAhPT0gMCkgcmV0dXJuO1xuXHRcblx0ICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy50YXJnZXQ7XG5cdCAgICAgICAgaWYgKHRhcmdldCkge1xuXHQgICAgICAgICAgLy8gdi1saW5rIHdpdGggZXhwcmVzc2lvbiwganVzdCBnb1xuXHQgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgICAgdGhpcy5yb3V0ZXIuZ28odGFyZ2V0KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8gbm8gZXhwcmVzc2lvbiwgZGVsZWdhdGUgZm9yIGFuIDxhPiBpbnNpZGVcblx0ICAgICAgICAgIHZhciBlbCA9IGUudGFyZ2V0O1xuXHQgICAgICAgICAgd2hpbGUgKGVsLnRhZ05hbWUgIT09ICdBJyAmJiBlbCAhPT0gdGhpcy5lbCkge1xuXHQgICAgICAgICAgICBlbCA9IGVsLnBhcmVudE5vZGU7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBpZiAoZWwudGFnTmFtZSA9PT0gJ0EnICYmIHNhbWVPcmlnaW4oZWwpKSB7XG5cdCAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICAgICAgdmFyIHBhdGggPSBlbC5wYXRobmFtZTtcblx0ICAgICAgICAgICAgaWYgKHRoaXMucm91dGVyLmhpc3Rvcnkucm9vdCkge1xuXHQgICAgICAgICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UodGhpcy5yb3V0ZXIuaGlzdG9yeS5yb290UkUsICcnKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLnJvdXRlci5nbyh7XG5cdCAgICAgICAgICAgICAgcGF0aDogcGF0aCxcblx0ICAgICAgICAgICAgICByZXBsYWNlOiB0YXJnZXQgJiYgdGFyZ2V0LnJlcGxhY2UsXG5cdCAgICAgICAgICAgICAgYXBwZW5kOiB0YXJnZXQgJiYgdGFyZ2V0LmFwcGVuZFxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBvblJvdXRlVXBkYXRlOiBmdW5jdGlvbiBvblJvdXRlVXBkYXRlKHJvdXRlKSB7XG5cdCAgICAgICAgLy8gcm91dGVyLnN0cmluZ2lmeVBhdGggaXMgZGVwZW5kZW50IG9uIGN1cnJlbnQgcm91dGVcblx0ICAgICAgICAvLyBhbmQgbmVlZHMgdG8gYmUgY2FsbGVkIGFnYWluIHdoZW52ZXIgcm91dGUgY2hhbmdlcy5cblx0ICAgICAgICB2YXIgbmV3UGF0aCA9IHRoaXMucm91dGVyLnN0cmluZ2lmeVBhdGgodGhpcy50YXJnZXQpO1xuXHQgICAgICAgIGlmICh0aGlzLnBhdGggIT09IG5ld1BhdGgpIHtcblx0ICAgICAgICAgIHRoaXMucGF0aCA9IG5ld1BhdGg7XG5cdCAgICAgICAgICB0aGlzLnVwZGF0ZUFjdGl2ZU1hdGNoKCk7XG5cdCAgICAgICAgICB0aGlzLnVwZGF0ZUhyZWYoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHRoaXMuYWN0aXZlSWRzKSB7XG5cdCAgICAgICAgICB0aGlzLnZtLiRlbWl0KExJTktfVVBEQVRFLCB0aGlzLCByb3V0ZS5wYXRoKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdGhpcy51cGRhdGVDbGFzc2VzKHJvdXRlLnBhdGgsIHRoaXMuZWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0XG5cdCAgICAgIHVwZGF0ZUFjdGl2ZU1hdGNoOiBmdW5jdGlvbiB1cGRhdGVBY3RpdmVNYXRjaCgpIHtcblx0ICAgICAgICB0aGlzLmFjdGl2ZVJFID0gdGhpcy5wYXRoICYmICF0aGlzLmV4YWN0ID8gbmV3IFJlZ0V4cCgnXicgKyB0aGlzLnBhdGgucmVwbGFjZSgvXFwvJC8sICcnKS5yZXBsYWNlKHF1ZXJ5U3RyaW5nUkUsICcnKS5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXFxcJCYnKSArICcoXFxcXC98JCknKSA6IG51bGw7XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICB1cGRhdGVIcmVmOiBmdW5jdGlvbiB1cGRhdGVIcmVmKCkge1xuXHQgICAgICAgIGlmICh0aGlzLmVsLnRhZ05hbWUgIT09ICdBJykge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgcGF0aCA9IHRoaXMucGF0aDtcblx0ICAgICAgICB2YXIgcm91dGVyID0gdGhpcy5yb3V0ZXI7XG5cdCAgICAgICAgdmFyIGlzQWJzb2x1dGUgPSBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nO1xuXHQgICAgICAgIC8vIGRvIG5vdCBmb3JtYXQgbm9uLWhhc2ggcmVsYXRpdmUgcGF0aHNcblx0ICAgICAgICB2YXIgaHJlZiA9IHBhdGggJiYgKHJvdXRlci5tb2RlID09PSAnaGFzaCcgfHwgaXNBYnNvbHV0ZSkgPyByb3V0ZXIuaGlzdG9yeS5mb3JtYXRQYXRoKHBhdGgsIHRoaXMuYXBwZW5kKSA6IHBhdGg7XG5cdCAgICAgICAgaWYgKGhyZWYpIHtcblx0ICAgICAgICAgIHRoaXMuZWwuaHJlZiA9IGhyZWY7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCdocmVmJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHRcblx0ICAgICAgdXBkYXRlQ2xhc3NlczogZnVuY3Rpb24gdXBkYXRlQ2xhc3NlcyhwYXRoLCBlbCkge1xuXHQgICAgICAgIHZhciBhY3RpdmVDbGFzcyA9IHRoaXMuYWN0aXZlQ2xhc3MgfHwgdGhpcy5yb3V0ZXIuX2xpbmtBY3RpdmVDbGFzcztcblx0ICAgICAgICAvLyBjbGVhciBvbGQgY2xhc3Ncblx0ICAgICAgICBpZiAodGhpcy5wcmV2QWN0aXZlQ2xhc3MgJiYgdGhpcy5wcmV2QWN0aXZlQ2xhc3MgIT09IGFjdGl2ZUNsYXNzKSB7XG5cdCAgICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCB0aGlzLnByZXZBY3RpdmVDbGFzcywgcmVtb3ZlQ2xhc3MpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyByZW1vdmUgcXVlcnkgc3RyaW5nIGJlZm9yZSBtYXRjaGluZ1xuXHQgICAgICAgIHZhciBkZXN0ID0gdGhpcy5wYXRoLnJlcGxhY2UocXVlcnlTdHJpbmdSRSwgJycpO1xuXHQgICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UocXVlcnlTdHJpbmdSRSwgJycpO1xuXHQgICAgICAgIC8vIGFkZCBuZXcgY2xhc3Ncblx0ICAgICAgICBpZiAodGhpcy5leGFjdCkge1xuXHQgICAgICAgICAgaWYgKGRlc3QgPT09IHBhdGggfHxcblx0ICAgICAgICAgIC8vIGFsc28gYWxsb3cgYWRkaXRpb25hbCB0cmFpbGluZyBzbGFzaFxuXHQgICAgICAgICAgZGVzdC5jaGFyQXQoZGVzdC5sZW5ndGggLSAxKSAhPT0gJy8nICYmIGRlc3QgPT09IHBhdGgucmVwbGFjZSh0cmFpbGluZ1NsYXNoUkUsICcnKSkge1xuXHQgICAgICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBhY3RpdmVDbGFzcywgYWRkQ2xhc3MpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgYWN0aXZlQ2xhc3MsIHJlbW92ZUNsYXNzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlUkUgJiYgdGhpcy5hY3RpdmVSRS50ZXN0KHBhdGgpKSB7XG5cdCAgICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGFjdGl2ZUNsYXNzLCBhZGRDbGFzcyk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBhY3RpdmVDbGFzcywgcmVtb3ZlQ2xhc3MpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0XG5cdCAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZXIpO1xuXHQgICAgICAgIHRoaXMudW53YXRjaCAmJiB0aGlzLnVud2F0Y2goKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgZnVuY3Rpb24gc2FtZU9yaWdpbihsaW5rKSB7XG5cdCAgICAgIHJldHVybiBsaW5rLnByb3RvY29sID09PSBsb2NhdGlvbi5wcm90b2NvbCAmJiBsaW5rLmhvc3RuYW1lID09PSBsb2NhdGlvbi5ob3N0bmFtZSAmJiBsaW5rLnBvcnQgPT09IGxvY2F0aW9uLnBvcnQ7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gdGhpcyBmdW5jdGlvbiBpcyBjb3BpZWQgZnJvbSB2LWJpbmQ6Y2xhc3MgaW1wbGVtZW50YXRpb24gdW50aWxcblx0ICAgIC8vIHdlIHByb3Blcmx5IGV4cG9zZSBpdC4uLlxuXHQgICAgZnVuY3Rpb24gdG9nZ2xlQ2xhc3NlcyhlbCwga2V5LCBmbikge1xuXHQgICAgICBrZXkgPSBrZXkudHJpbSgpO1xuXHQgICAgICBpZiAoa2V5LmluZGV4T2YoJyAnKSA9PT0gLTEpIHtcblx0ICAgICAgICBmbihlbCwga2V5KTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGtleXMgPSBrZXkuc3BsaXQoL1xccysvKTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIGZuKGVsLCBrZXlzW2ldKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIGhpc3RvcnlCYWNrZW5kcyA9IHtcblx0ICAgIGFic3RyYWN0OiBBYnN0cmFjdEhpc3RvcnksXG5cdCAgICBoYXNoOiBIYXNoSGlzdG9yeSxcblx0ICAgIGh0bWw1OiBIVE1MNUhpc3Rvcnlcblx0ICB9O1xuXHRcblx0ICAvLyBsYXRlIGJpbmQgZHVyaW5nIGluc3RhbGxcblx0ICB2YXIgVnVlID0gdW5kZWZpbmVkO1xuXHRcblx0ICAvKipcblx0ICAgKiBSb3V0ZXIgY29uc3RydWN0b3Jcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgKi9cblx0XG5cdCAgdmFyIFJvdXRlciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBSb3V0ZXIoKSB7XG5cdCAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzBdO1xuXHRcblx0ICAgICAgdmFyIF9yZWYkaGFzaGJhbmcgPSBfcmVmLmhhc2hiYW5nO1xuXHQgICAgICB2YXIgaGFzaGJhbmcgPSBfcmVmJGhhc2hiYW5nID09PSB1bmRlZmluZWQgPyB0cnVlIDogX3JlZiRoYXNoYmFuZztcblx0ICAgICAgdmFyIF9yZWYkYWJzdHJhY3QgPSBfcmVmLmFic3RyYWN0O1xuXHQgICAgICB2YXIgYWJzdHJhY3QgPSBfcmVmJGFic3RyYWN0ID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkYWJzdHJhY3Q7XG5cdCAgICAgIHZhciBfcmVmJGhpc3RvcnkgPSBfcmVmLmhpc3Rvcnk7XG5cdCAgICAgIHZhciBoaXN0b3J5ID0gX3JlZiRoaXN0b3J5ID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkaGlzdG9yeTtcblx0ICAgICAgdmFyIF9yZWYkc2F2ZVNjcm9sbFBvc2l0aW9uID0gX3JlZi5zYXZlU2Nyb2xsUG9zaXRpb247XG5cdCAgICAgIHZhciBzYXZlU2Nyb2xsUG9zaXRpb24gPSBfcmVmJHNhdmVTY3JvbGxQb3NpdGlvbiA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJHNhdmVTY3JvbGxQb3NpdGlvbjtcblx0ICAgICAgdmFyIF9yZWYkdHJhbnNpdGlvbk9uTG9hZCA9IF9yZWYudHJhbnNpdGlvbk9uTG9hZDtcblx0ICAgICAgdmFyIHRyYW5zaXRpb25PbkxvYWQgPSBfcmVmJHRyYW5zaXRpb25PbkxvYWQgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiR0cmFuc2l0aW9uT25Mb2FkO1xuXHQgICAgICB2YXIgX3JlZiRzdXBwcmVzc1RyYW5zaXRpb25FcnJvciA9IF9yZWYuc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3I7XG5cdCAgICAgIHZhciBzdXBwcmVzc1RyYW5zaXRpb25FcnJvciA9IF9yZWYkc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3IgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRzdXBwcmVzc1RyYW5zaXRpb25FcnJvcjtcblx0ICAgICAgdmFyIF9yZWYkcm9vdCA9IF9yZWYucm9vdDtcblx0ICAgICAgdmFyIHJvb3QgPSBfcmVmJHJvb3QgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBfcmVmJHJvb3Q7XG5cdCAgICAgIHZhciBfcmVmJGxpbmtBY3RpdmVDbGFzcyA9IF9yZWYubGlua0FjdGl2ZUNsYXNzO1xuXHQgICAgICB2YXIgbGlua0FjdGl2ZUNsYXNzID0gX3JlZiRsaW5rQWN0aXZlQ2xhc3MgPT09IHVuZGVmaW5lZCA/ICd2LWxpbmstYWN0aXZlJyA6IF9yZWYkbGlua0FjdGl2ZUNsYXNzO1xuXHQgICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgUm91dGVyKTtcblx0XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoIVJvdXRlci5pbnN0YWxsZWQpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBpbnN0YWxsIHRoZSBSb3V0ZXIgd2l0aCBWdWUudXNlKCkgYmVmb3JlICcgKyAnY3JlYXRpbmcgYW4gaW5zdGFuY2UuJyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIFZ1ZSBpbnN0YW5jZXNcblx0ICAgICAgdGhpcy5hcHAgPSBudWxsO1xuXHQgICAgICB0aGlzLl9jaGlsZHJlbiA9IFtdO1xuXHRcblx0ICAgICAgLy8gcm91dGUgcmVjb2duaXplclxuXHQgICAgICB0aGlzLl9yZWNvZ25pemVyID0gbmV3IFJvdXRlUmVjb2duaXplcigpO1xuXHQgICAgICB0aGlzLl9ndWFyZFJlY29nbml6ZXIgPSBuZXcgUm91dGVSZWNvZ25pemVyKCk7XG5cdFxuXHQgICAgICAvLyBzdGF0ZVxuXHQgICAgICB0aGlzLl9zdGFydGVkID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuX3N0YXJ0Q2IgPSBudWxsO1xuXHQgICAgICB0aGlzLl9jdXJyZW50Um91dGUgPSB7fTtcblx0ICAgICAgdGhpcy5fY3VycmVudFRyYW5zaXRpb24gPSBudWxsO1xuXHQgICAgICB0aGlzLl9wcmV2aW91c1RyYW5zaXRpb24gPSBudWxsO1xuXHQgICAgICB0aGlzLl9ub3RGb3VuZEhhbmRsZXIgPSBudWxsO1xuXHQgICAgICB0aGlzLl9ub3RGb3VuZFJlZGlyZWN0ID0gbnVsbDtcblx0ICAgICAgdGhpcy5fYmVmb3JlRWFjaEhvb2tzID0gW107XG5cdCAgICAgIHRoaXMuX2FmdGVyRWFjaEhvb2tzID0gW107XG5cdFxuXHQgICAgICAvLyB0cmlnZ2VyIHRyYW5zaXRpb24gb24gaW5pdGlhbCByZW5kZXI/XG5cdCAgICAgIHRoaXMuX3JlbmRlcmVkID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuX3RyYW5zaXRpb25PbkxvYWQgPSB0cmFuc2l0aW9uT25Mb2FkO1xuXHRcblx0ICAgICAgLy8gaGlzdG9yeSBtb2RlXG5cdCAgICAgIHRoaXMuX3Jvb3QgPSByb290O1xuXHQgICAgICB0aGlzLl9hYnN0cmFjdCA9IGFic3RyYWN0O1xuXHQgICAgICB0aGlzLl9oYXNoYmFuZyA9IGhhc2hiYW5nO1xuXHRcblx0ICAgICAgLy8gY2hlY2sgaWYgSFRNTDUgaGlzdG9yeSBpcyBhdmFpbGFibGVcblx0ICAgICAgdmFyIGhhc1B1c2hTdGF0ZSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5oaXN0b3J5ICYmIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZTtcblx0ICAgICAgdGhpcy5faGlzdG9yeSA9IGhpc3RvcnkgJiYgaGFzUHVzaFN0YXRlO1xuXHQgICAgICB0aGlzLl9oaXN0b3J5RmFsbGJhY2sgPSBoaXN0b3J5ICYmICFoYXNQdXNoU3RhdGU7XG5cdFxuXHQgICAgICAvLyBjcmVhdGUgaGlzdG9yeSBvYmplY3Rcblx0ICAgICAgdmFyIGluQnJvd3NlciA9IFZ1ZS51dGlsLmluQnJvd3Nlcjtcblx0ICAgICAgdGhpcy5tb2RlID0gIWluQnJvd3NlciB8fCB0aGlzLl9hYnN0cmFjdCA/ICdhYnN0cmFjdCcgOiB0aGlzLl9oaXN0b3J5ID8gJ2h0bWw1JyA6ICdoYXNoJztcblx0XG5cdCAgICAgIHZhciBIaXN0b3J5ID0gaGlzdG9yeUJhY2tlbmRzW3RoaXMubW9kZV07XG5cdCAgICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KHtcblx0ICAgICAgICByb290OiByb290LFxuXHQgICAgICAgIGhhc2hiYW5nOiB0aGlzLl9oYXNoYmFuZyxcblx0ICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UocGF0aCwgc3RhdGUsIGFuY2hvcikge1xuXHQgICAgICAgICAgX3RoaXMuX21hdGNoKHBhdGgsIHN0YXRlLCBhbmNob3IpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICAvLyBvdGhlciBvcHRpb25zXG5cdCAgICAgIHRoaXMuX3NhdmVTY3JvbGxQb3NpdGlvbiA9IHNhdmVTY3JvbGxQb3NpdGlvbjtcblx0ICAgICAgdGhpcy5fbGlua0FjdGl2ZUNsYXNzID0gbGlua0FjdGl2ZUNsYXNzO1xuXHQgICAgICB0aGlzLl9zdXBwcmVzcyA9IHN1cHByZXNzVHJhbnNpdGlvbkVycm9yO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQWxsb3cgZGlyZWN0bHkgcGFzc2luZyBjb21wb25lbnRzIHRvIGEgcm91dGVcblx0ICAgICAqIGRlZmluaXRpb24uXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG5cdCAgICAgKi9cblx0XG5cdCAgICAvLyBBUEkgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFxuXHQgICAgLyoqXG5cdCAgICAqIFJlZ2lzdGVyIGEgbWFwIG9mIHRvcC1sZXZlbCBwYXRocy5cblx0ICAgICpcblx0ICAgICogQHBhcmFtIHtPYmplY3R9IG1hcFxuXHQgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uIG1hcChfbWFwKSB7XG5cdCAgICAgIGZvciAodmFyIHJvdXRlIGluIF9tYXApIHtcblx0ICAgICAgICB0aGlzLm9uKHJvdXRlLCBfbWFwW3JvdXRlXSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUmVnaXN0ZXIgYSBzaW5nbGUgcm9vdC1sZXZlbCBwYXRoXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHJvb3RQYXRoXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuXHQgICAgICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gY29tcG9uZW50XG5cdCAgICAgKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBbc3ViUm91dGVzXVxuXHQgICAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtmb3JjZVJlZnJlc2hdXG5cdCAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtiZWZvcmVdXG5cdCAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFthZnRlcl1cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihyb290UGF0aCwgaGFuZGxlcikge1xuXHQgICAgICBpZiAocm9vdFBhdGggPT09ICcqJykge1xuXHQgICAgICAgIHRoaXMuX25vdEZvdW5kKGhhbmRsZXIpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuX2FkZFJvdXRlKHJvb3RQYXRoLCBoYW5kbGVyLCBbXSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0IHJlZGlyZWN0cy5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFwXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLnJlZGlyZWN0ID0gZnVuY3Rpb24gcmVkaXJlY3QobWFwKSB7XG5cdCAgICAgIGZvciAodmFyIHBhdGggaW4gbWFwKSB7XG5cdCAgICAgICAgdGhpcy5fYWRkUmVkaXJlY3QocGF0aCwgbWFwW3BhdGhdKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTZXQgYWxpYXNlcy5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFwXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLmFsaWFzID0gZnVuY3Rpb24gYWxpYXMobWFwKSB7XG5cdCAgICAgIGZvciAodmFyIHBhdGggaW4gbWFwKSB7XG5cdCAgICAgICAgdGhpcy5fYWRkQWxpYXMocGF0aCwgbWFwW3BhdGhdKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTZXQgZ2xvYmFsIGJlZm9yZSBob29rLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLmJlZm9yZUVhY2ggPSBmdW5jdGlvbiBiZWZvcmVFYWNoKGZuKSB7XG5cdCAgICAgIHRoaXMuX2JlZm9yZUVhY2hIb29rcy5wdXNoKGZuKTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0IGdsb2JhbCBhZnRlciBob29rLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLmFmdGVyRWFjaCA9IGZ1bmN0aW9uIGFmdGVyRWFjaChmbikge1xuXHQgICAgICB0aGlzLl9hZnRlckVhY2hIb29rcy5wdXNoKGZuKTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogTmF2aWdhdGUgdG8gYSBnaXZlbiBwYXRoLlxuXHQgICAgICogVGhlIHBhdGggY2FuIGJlIGFuIG9iamVjdCBkZXNjcmliaW5nIGEgbmFtZWQgcGF0aCBpblxuXHQgICAgICogdGhlIGZvcm1hdCBvZiB7IG5hbWU6ICcuLi4nLCBwYXJhbXM6IHt9LCBxdWVyeToge319XG5cdCAgICAgKiBUaGUgcGF0aCBpcyBhc3N1bWVkIHRvIGJlIGFscmVhZHkgZGVjb2RlZCwgYW5kIHdpbGxcblx0ICAgICAqIGJlIHJlc29sdmVkIGFnYWluc3Qgcm9vdCAoaWYgcHJvdmlkZWQpXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBwYXRoXG5cdCAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtyZXBsYWNlXVxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvKHBhdGgpIHtcblx0ICAgICAgdmFyIHJlcGxhY2UgPSBmYWxzZTtcblx0ICAgICAgdmFyIGFwcGVuZCA9IGZhbHNlO1xuXHQgICAgICBpZiAoVnVlLnV0aWwuaXNPYmplY3QocGF0aCkpIHtcblx0ICAgICAgICByZXBsYWNlID0gcGF0aC5yZXBsYWNlO1xuXHQgICAgICAgIGFwcGVuZCA9IHBhdGguYXBwZW5kO1xuXHQgICAgICB9XG5cdCAgICAgIHBhdGggPSB0aGlzLnN0cmluZ2lmeVBhdGgocGF0aCk7XG5cdCAgICAgIGlmIChwYXRoKSB7XG5cdCAgICAgICAgdGhpcy5oaXN0b3J5LmdvKHBhdGgsIHJlcGxhY2UsIGFwcGVuZCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTaG9ydCBoYW5kIGZvciByZXBsYWNpbmcgY3VycmVudCBwYXRoXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUucmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UocGF0aCkge1xuXHQgICAgICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgcGF0aCA9IHsgcGF0aDogcGF0aCB9O1xuXHQgICAgICB9XG5cdCAgICAgIHBhdGgucmVwbGFjZSA9IHRydWU7XG5cdCAgICAgIHRoaXMuZ28ocGF0aCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU3RhcnQgdGhlIHJvdXRlci5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1Z1ZUNvbnN0cnVjdG9yfSBBcHBcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGNvbnRhaW5lclxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KEFwcCwgY29udGFpbmVyLCBjYikge1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKHRoaXMuX3N0YXJ0ZWQpIHtcblx0ICAgICAgICB3YXJuJDEoJ2FscmVhZHkgc3RhcnRlZC4nKTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5fc3RhcnRlZCA9IHRydWU7XG5cdCAgICAgIHRoaXMuX3N0YXJ0Q2IgPSBjYjtcblx0ICAgICAgaWYgKCF0aGlzLmFwcCkge1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmICghQXBwIHx8ICFjb250YWluZXIpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTXVzdCBzdGFydCB2dWUtcm91dGVyIHdpdGggYSBjb21wb25lbnQgYW5kIGEgJyArICdyb290IGNvbnRhaW5lci4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKEFwcCBpbnN0YW5jZW9mIFZ1ZSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXN0IHN0YXJ0IHZ1ZS1yb3V0ZXIgd2l0aCBhIGNvbXBvbmVudCwgbm90IGEgJyArICdWdWUgaW5zdGFuY2UuJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuX2FwcENvbnRhaW5lciA9IGNvbnRhaW5lcjtcblx0ICAgICAgICB2YXIgQ3RvciA9IHRoaXMuX2FwcENvbnN0cnVjdG9yID0gdHlwZW9mIEFwcCA9PT0gJ2Z1bmN0aW9uJyA/IEFwcCA6IFZ1ZS5leHRlbmQoQXBwKTtcblx0ICAgICAgICAvLyBnaXZlIGl0IGEgbmFtZSBmb3IgYmV0dGVyIGRlYnVnZ2luZ1xuXHQgICAgICAgIEN0b3Iub3B0aW9ucy5uYW1lID0gQ3Rvci5vcHRpb25zLm5hbWUgfHwgJ1JvdXRlckFwcCc7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIGhhbmRsZSBoaXN0b3J5IGZhbGxiYWNrIGluIGJyb3dzZXJzIHRoYXQgZG8gbm90XG5cdCAgICAgIC8vIHN1cHBvcnQgSFRNTDUgaGlzdG9yeSBBUElcblx0ICAgICAgaWYgKHRoaXMuX2hpc3RvcnlGYWxsYmFjaykge1xuXHQgICAgICAgIHZhciBfbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG5cdCAgICAgICAgdmFyIF9oaXN0b3J5ID0gbmV3IEhUTUw1SGlzdG9yeSh7IHJvb3Q6IHRoaXMuX3Jvb3QgfSk7XG5cdCAgICAgICAgdmFyIHBhdGggPSBfaGlzdG9yeS5yb290ID8gX2xvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoX2hpc3Rvcnkucm9vdFJFLCAnJykgOiBfbG9jYXRpb24ucGF0aG5hbWU7XG5cdCAgICAgICAgaWYgKHBhdGggJiYgcGF0aCAhPT0gJy8nKSB7XG5cdCAgICAgICAgICBfbG9jYXRpb24uYXNzaWduKChfaGlzdG9yeS5yb290IHx8ICcnKSArICcvJyArIHRoaXMuaGlzdG9yeS5mb3JtYXRQYXRoKHBhdGgpICsgX2xvY2F0aW9uLnNlYXJjaCk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLmhpc3Rvcnkuc3RhcnQoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTdG9wIGxpc3RlbmluZyB0byByb3V0ZSBjaGFuZ2VzLlxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gc3RvcCgpIHtcblx0ICAgICAgdGhpcy5oaXN0b3J5LnN0b3AoKTtcblx0ICAgICAgdGhpcy5fc3RhcnRlZCA9IGZhbHNlO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIE5vcm1hbGl6ZSBuYW1lZCByb3V0ZSBvYmplY3QgLyBzdHJpbmcgcGF0aHMgaW50b1xuXHQgICAgICogYSBzdHJpbmcuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfE51bWJlcn0gcGF0aFxuXHQgICAgICogQHJldHVybiB7U3RyaW5nfVxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5zdHJpbmdpZnlQYXRoID0gZnVuY3Rpb24gc3RyaW5naWZ5UGF0aChwYXRoKSB7XG5cdCAgICAgIHZhciBnZW5lcmF0ZWRQYXRoID0gJyc7XG5cdCAgICAgIGlmIChwYXRoICYmIHR5cGVvZiBwYXRoID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgIGlmIChwYXRoLm5hbWUpIHtcblx0ICAgICAgICAgIHZhciBleHRlbmQgPSBWdWUudXRpbC5leHRlbmQ7XG5cdCAgICAgICAgICB2YXIgY3VycmVudFBhcmFtcyA9IHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uICYmIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uLnRvLnBhcmFtcztcblx0ICAgICAgICAgIHZhciB0YXJnZXRQYXJhbXMgPSBwYXRoLnBhcmFtcyB8fCB7fTtcblx0ICAgICAgICAgIHZhciBwYXJhbXMgPSBjdXJyZW50UGFyYW1zID8gZXh0ZW5kKGV4dGVuZCh7fSwgY3VycmVudFBhcmFtcyksIHRhcmdldFBhcmFtcykgOiB0YXJnZXRQYXJhbXM7XG5cdCAgICAgICAgICBnZW5lcmF0ZWRQYXRoID0gZW5jb2RlVVJJKHRoaXMuX3JlY29nbml6ZXIuZ2VuZXJhdGUocGF0aC5uYW1lLCBwYXJhbXMpKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKHBhdGgucGF0aCkge1xuXHQgICAgICAgICAgZ2VuZXJhdGVkUGF0aCA9IGVuY29kZVVSSShwYXRoLnBhdGgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAocGF0aC5xdWVyeSkge1xuXHQgICAgICAgICAgLy8gbm90ZTogdGhlIGdlbmVyYXRlZCBxdWVyeSBzdHJpbmcgaXMgcHJlLVVSTC1lbmNvZGVkIGJ5IHRoZSByZWNvZ25pemVyXG5cdCAgICAgICAgICB2YXIgcXVlcnkgPSB0aGlzLl9yZWNvZ25pemVyLmdlbmVyYXRlUXVlcnlTdHJpbmcocGF0aC5xdWVyeSk7XG5cdCAgICAgICAgICBpZiAoZ2VuZXJhdGVkUGF0aC5pbmRleE9mKCc/JykgPiAtMSkge1xuXHQgICAgICAgICAgICBnZW5lcmF0ZWRQYXRoICs9ICcmJyArIHF1ZXJ5LnNsaWNlKDEpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgZ2VuZXJhdGVkUGF0aCArPSBxdWVyeTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZ2VuZXJhdGVkUGF0aCA9IGVuY29kZVVSSShwYXRoID8gcGF0aCArICcnIDogJycpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBnZW5lcmF0ZWRQYXRoO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBJbnRlcm5hbCBtZXRob2RzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFxuXHQgICAgLyoqXG5cdCAgICAqIEFkZCBhIHJvdXRlIGNvbnRhaW5pbmcgYSBsaXN0IG9mIHNlZ21lbnRzIHRvIHRoZSBpbnRlcm5hbFxuXHQgICAgKiByb3V0ZSByZWNvZ25pemVyLiBXaWxsIGJlIGNhbGxlZCByZWN1cnNpdmVseSB0byBhZGQgYWxsXG5cdCAgICAqIHBvc3NpYmxlIHN1Yi1yb3V0ZXMuXG5cdCAgICAqXG5cdCAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG5cdCAgICAqIEBwYXJhbSB7QXJyYXl9IHNlZ21lbnRzXG5cdCAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX2FkZFJvdXRlID0gZnVuY3Rpb24gX2FkZFJvdXRlKHBhdGgsIGhhbmRsZXIsIHNlZ21lbnRzKSB7XG5cdCAgICAgIGd1YXJkQ29tcG9uZW50KHBhdGgsIGhhbmRsZXIpO1xuXHQgICAgICBoYW5kbGVyLnBhdGggPSBwYXRoO1xuXHQgICAgICBoYW5kbGVyLmZ1bGxQYXRoID0gKHNlZ21lbnRzLnJlZHVjZShmdW5jdGlvbiAocGF0aCwgc2VnbWVudCkge1xuXHQgICAgICAgIHJldHVybiBwYXRoICsgc2VnbWVudC5wYXRoO1xuXHQgICAgICB9LCAnJykgKyBwYXRoKS5yZXBsYWNlKCcvLycsICcvJyk7XG5cdCAgICAgIHNlZ21lbnRzLnB1c2goe1xuXHQgICAgICAgIHBhdGg6IHBhdGgsXG5cdCAgICAgICAgaGFuZGxlcjogaGFuZGxlclxuXHQgICAgICB9KTtcblx0ICAgICAgdGhpcy5fcmVjb2duaXplci5hZGQoc2VnbWVudHMsIHtcblx0ICAgICAgICBhczogaGFuZGxlci5uYW1lXG5cdCAgICAgIH0pO1xuXHQgICAgICAvLyBhZGQgc3ViIHJvdXRlc1xuXHQgICAgICBpZiAoaGFuZGxlci5zdWJSb3V0ZXMpIHtcblx0ICAgICAgICBmb3IgKHZhciBzdWJQYXRoIGluIGhhbmRsZXIuc3ViUm91dGVzKSB7XG5cdCAgICAgICAgICAvLyByZWN1cnNpdmVseSB3YWxrIGFsbCBzdWIgcm91dGVzXG5cdCAgICAgICAgICB0aGlzLl9hZGRSb3V0ZShzdWJQYXRoLCBoYW5kbGVyLnN1YlJvdXRlc1tzdWJQYXRoXSxcblx0ICAgICAgICAgIC8vIHBhc3MgYSBjb3B5IGluIHJlY3Vyc2lvbiB0byBhdm9pZCBtdXRhdGluZ1xuXHQgICAgICAgICAgLy8gYWNyb3NzIGJyYW5jaGVzXG5cdCAgICAgICAgICBzZWdtZW50cy5zbGljZSgpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTZXQgdGhlIG5vdEZvdW5kIHJvdXRlIGhhbmRsZXIuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX25vdEZvdW5kID0gZnVuY3Rpb24gX25vdEZvdW5kKGhhbmRsZXIpIHtcblx0ICAgICAgZ3VhcmRDb21wb25lbnQoJyonLCBoYW5kbGVyKTtcblx0ICAgICAgdGhpcy5fbm90Rm91bmRIYW5kbGVyID0gW3sgaGFuZGxlcjogaGFuZGxlciB9XTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBZGQgYSByZWRpcmVjdCByZWNvcmQuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSByZWRpcmVjdFBhdGhcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX2FkZFJlZGlyZWN0ID0gZnVuY3Rpb24gX2FkZFJlZGlyZWN0KHBhdGgsIHJlZGlyZWN0UGF0aCkge1xuXHQgICAgICBpZiAocGF0aCA9PT0gJyonKSB7XG5cdCAgICAgICAgdGhpcy5fbm90Rm91bmRSZWRpcmVjdCA9IHJlZGlyZWN0UGF0aDtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLl9hZGRHdWFyZChwYXRoLCByZWRpcmVjdFBhdGgsIHRoaXMucmVwbGFjZSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBZGQgYW4gYWxpYXMgcmVjb3JkLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gYWxpYXNQYXRoXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLl9hZGRBbGlhcyA9IGZ1bmN0aW9uIF9hZGRBbGlhcyhwYXRoLCBhbGlhc1BhdGgpIHtcblx0ICAgICAgdGhpcy5fYWRkR3VhcmQocGF0aCwgYWxpYXNQYXRoLCB0aGlzLl9tYXRjaCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQWRkIGEgcGF0aCBndWFyZC5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IG1hcHBlZFBhdGhcblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX2FkZEd1YXJkID0gZnVuY3Rpb24gX2FkZEd1YXJkKHBhdGgsIG1hcHBlZFBhdGgsIF9oYW5kbGVyKSB7XG5cdCAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgICAgdGhpcy5fZ3VhcmRSZWNvZ25pemVyLmFkZChbe1xuXHQgICAgICAgIHBhdGg6IHBhdGgsXG5cdCAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihtYXRjaCwgcXVlcnkpIHtcblx0ICAgICAgICAgIHZhciByZWFsUGF0aCA9IG1hcFBhcmFtcyhtYXBwZWRQYXRoLCBtYXRjaC5wYXJhbXMsIHF1ZXJ5KTtcblx0ICAgICAgICAgIF9oYW5kbGVyLmNhbGwoX3RoaXMyLCByZWFsUGF0aCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQ2hlY2sgaWYgYSBwYXRoIG1hdGNoZXMgYW55IHJlZGlyZWN0IHJlY29yZHMuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IC0gaWYgdHJ1ZSwgd2lsbCBza2lwIG5vcm1hbCBtYXRjaC5cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX2NoZWNrR3VhcmQgPSBmdW5jdGlvbiBfY2hlY2tHdWFyZChwYXRoKSB7XG5cdCAgICAgIHZhciBtYXRjaGVkID0gdGhpcy5fZ3VhcmRSZWNvZ25pemVyLnJlY29nbml6ZShwYXRoLCB0cnVlKTtcblx0ICAgICAgaWYgKG1hdGNoZWQpIHtcblx0ICAgICAgICBtYXRjaGVkWzBdLmhhbmRsZXIobWF0Y2hlZFswXSwgbWF0Y2hlZC5xdWVyeVBhcmFtcyk7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH0gZWxzZSBpZiAodGhpcy5fbm90Rm91bmRSZWRpcmVjdCkge1xuXHQgICAgICAgIG1hdGNoZWQgPSB0aGlzLl9yZWNvZ25pemVyLnJlY29nbml6ZShwYXRoKTtcblx0ICAgICAgICBpZiAoIW1hdGNoZWQpIHtcblx0ICAgICAgICAgIHRoaXMucmVwbGFjZSh0aGlzLl9ub3RGb3VuZFJlZGlyZWN0KTtcblx0ICAgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIE1hdGNoIGEgVVJMIHBhdGggYW5kIHNldCB0aGUgcm91dGUgY29udGV4dCBvbiB2bSxcblx0ICAgICAqIHRyaWdnZXJpbmcgdmlldyB1cGRhdGVzLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gW3N0YXRlXVxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IFthbmNob3JdXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLl9tYXRjaCA9IGZ1bmN0aW9uIF9tYXRjaChwYXRoLCBzdGF0ZSwgYW5jaG9yKSB7XG5cdCAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXHRcblx0ICAgICAgaWYgKHRoaXMuX2NoZWNrR3VhcmQocGF0aCkpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBjdXJyZW50Um91dGUgPSB0aGlzLl9jdXJyZW50Um91dGU7XG5cdCAgICAgIHZhciBjdXJyZW50VHJhbnNpdGlvbiA9IHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uO1xuXHRcblx0ICAgICAgaWYgKGN1cnJlbnRUcmFuc2l0aW9uKSB7XG5cdCAgICAgICAgaWYgKGN1cnJlbnRUcmFuc2l0aW9uLnRvLnBhdGggPT09IHBhdGgpIHtcblx0ICAgICAgICAgIC8vIGRvIG5vdGhpbmcgaWYgd2UgaGF2ZSBhbiBhY3RpdmUgdHJhbnNpdGlvbiBnb2luZyB0byB0aGUgc2FtZSBwYXRoXG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50Um91dGUucGF0aCA9PT0gcGF0aCkge1xuXHQgICAgICAgICAgLy8gV2UgYXJlIGdvaW5nIHRvIHRoZSBzYW1lIHBhdGgsIGJ1dCB3ZSBhbHNvIGhhdmUgYW4gb25nb2luZyBidXRcblx0ICAgICAgICAgIC8vIG5vdC15ZXQtdmFsaWRhdGVkIHRyYW5zaXRpb24uIEFib3J0IHRoYXQgdHJhbnNpdGlvbiBhbmQgcmVzZXQgdG9cblx0ICAgICAgICAgIC8vIHByZXYgdHJhbnNpdGlvbi5cblx0ICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uLmFib3J0ZWQgPSB0cnVlO1xuXHQgICAgICAgICAgdGhpcy5fY3VycmVudFRyYW5zaXRpb24gPSB0aGlzLl9wcmV2VHJhbnNpdGlvbjtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8gZ29pbmcgdG8gYSB0b3RhbGx5IGRpZmZlcmVudCBwYXRoLiBhYm9ydCBvbmdvaW5nIHRyYW5zaXRpb24uXG5cdCAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbi5hYm9ydGVkID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIGNvbnN0cnVjdCBuZXcgcm91dGUgYW5kIHRyYW5zaXRpb24gY29udGV4dFxuXHQgICAgICB2YXIgcm91dGUgPSBuZXcgUm91dGUocGF0aCwgdGhpcyk7XG5cdCAgICAgIHZhciB0cmFuc2l0aW9uID0gbmV3IFJvdXRlVHJhbnNpdGlvbih0aGlzLCByb3V0ZSwgY3VycmVudFJvdXRlKTtcblx0XG5cdCAgICAgIC8vIGN1cnJlbnQgdHJhbnNpdGlvbiBpcyB1cGRhdGVkIHJpZ2h0IG5vdy5cblx0ICAgICAgLy8gaG93ZXZlciwgY3VycmVudCByb3V0ZSB3aWxsIG9ubHkgYmUgdXBkYXRlZCBhZnRlciB0aGUgdHJhbnNpdGlvbiBoYXNcblx0ICAgICAgLy8gYmVlbiB2YWxpZGF0ZWQuXG5cdCAgICAgIHRoaXMuX3ByZXZUcmFuc2l0aW9uID0gY3VycmVudFRyYW5zaXRpb247XG5cdCAgICAgIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uID0gdHJhbnNpdGlvbjtcblx0XG5cdCAgICAgIGlmICghdGhpcy5hcHApIHtcblx0ICAgICAgICAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgLy8gaW5pdGlhbCByZW5kZXJcblx0ICAgICAgICAgIHZhciByb3V0ZXIgPSBfdGhpczM7XG5cdCAgICAgICAgICBfdGhpczMuYXBwID0gbmV3IF90aGlzMy5fYXBwQ29uc3RydWN0b3Ioe1xuXHQgICAgICAgICAgICBlbDogX3RoaXMzLl9hcHBDb250YWluZXIsXG5cdCAgICAgICAgICAgIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7XG5cdCAgICAgICAgICAgICAgdGhpcy4kcm91dGVyID0gcm91dGVyO1xuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfbWV0YToge1xuXHQgICAgICAgICAgICAgICRyb3V0ZTogcm91dGVcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSkoKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gY2hlY2sgZ2xvYmFsIGJlZm9yZSBob29rXG5cdCAgICAgIHZhciBiZWZvcmVIb29rcyA9IHRoaXMuX2JlZm9yZUVhY2hIb29rcztcblx0ICAgICAgdmFyIHN0YXJ0VHJhbnNpdGlvbiA9IGZ1bmN0aW9uIHN0YXJ0VHJhbnNpdGlvbigpIHtcblx0ICAgICAgICB0cmFuc2l0aW9uLnN0YXJ0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIF90aGlzMy5fcG9zdFRyYW5zaXRpb24ocm91dGUsIHN0YXRlLCBhbmNob3IpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9O1xuXHRcblx0ICAgICAgaWYgKGJlZm9yZUhvb2tzLmxlbmd0aCkge1xuXHQgICAgICAgIHRyYW5zaXRpb24ucnVuUXVldWUoYmVmb3JlSG9va3MsIGZ1bmN0aW9uIChob29rLCBfLCBuZXh0KSB7XG5cdCAgICAgICAgICBpZiAodHJhbnNpdGlvbiA9PT0gX3RoaXMzLl9jdXJyZW50VHJhbnNpdGlvbikge1xuXHQgICAgICAgICAgICB0cmFuc2l0aW9uLmNhbGxIb29rKGhvb2ssIG51bGwsIG5leHQsIHtcblx0ICAgICAgICAgICAgICBleHBlY3RCb29sZWFuOiB0cnVlXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIHN0YXJ0VHJhbnNpdGlvbik7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc3RhcnRUcmFuc2l0aW9uKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghdGhpcy5fcmVuZGVyZWQgJiYgdGhpcy5fc3RhcnRDYikge1xuXHQgICAgICAgIHRoaXMuX3N0YXJ0Q2IuY2FsbChudWxsKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gSEFDSzpcblx0ICAgICAgLy8gc2V0IHJlbmRlcmVkIHRvIHRydWUgYWZ0ZXIgdGhlIHRyYW5zaXRpb24gc3RhcnQsIHNvXG5cdCAgICAgIC8vIHRoYXQgY29tcG9uZW50cyB0aGF0IGFyZSBhY2l0dmF0ZWQgc3luY2hyb25vdXNseSBrbm93XG5cdCAgICAgIC8vIHdoZXRoZXIgaXQgaXMgdGhlIGluaXRpYWwgcmVuZGVyLlxuXHQgICAgICB0aGlzLl9yZW5kZXJlZCA9IHRydWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0IGN1cnJlbnQgdG8gdGhlIG5ldyB0cmFuc2l0aW9uLlxuXHQgICAgICogVGhpcyBpcyBjYWxsZWQgYnkgdGhlIHRyYW5zaXRpb24gb2JqZWN0IHdoZW4gdGhlXG5cdCAgICAgKiB2YWxpZGF0aW9uIG9mIGEgcm91dGUgaGFzIHN1Y2NlZWRlZC5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX29uVHJhbnNpdGlvblZhbGlkYXRlZCA9IGZ1bmN0aW9uIF9vblRyYW5zaXRpb25WYWxpZGF0ZWQodHJhbnNpdGlvbikge1xuXHQgICAgICAvLyBzZXQgY3VycmVudCByb3V0ZVxuXHQgICAgICB2YXIgcm91dGUgPSB0aGlzLl9jdXJyZW50Um91dGUgPSB0cmFuc2l0aW9uLnRvO1xuXHQgICAgICAvLyB1cGRhdGUgcm91dGUgY29udGV4dCBmb3IgYWxsIGNoaWxkcmVuXG5cdCAgICAgIGlmICh0aGlzLmFwcC4kcm91dGUgIT09IHJvdXRlKSB7XG5cdCAgICAgICAgdGhpcy5hcHAuJHJvdXRlID0gcm91dGU7XG5cdCAgICAgICAgdGhpcy5fY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHtcblx0ICAgICAgICAgIGNoaWxkLiRyb3V0ZSA9IHJvdXRlO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGNhbGwgZ2xvYmFsIGFmdGVyIGhvb2tcblx0ICAgICAgaWYgKHRoaXMuX2FmdGVyRWFjaEhvb2tzLmxlbmd0aCkge1xuXHQgICAgICAgIHRoaXMuX2FmdGVyRWFjaEhvb2tzLmZvckVhY2goZnVuY3Rpb24gKGhvb2spIHtcblx0ICAgICAgICAgIHJldHVybiBob29rLmNhbGwobnVsbCwge1xuXHQgICAgICAgICAgICB0bzogdHJhbnNpdGlvbi50byxcblx0ICAgICAgICAgICAgZnJvbTogdHJhbnNpdGlvbi5mcm9tXG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbi5kb25lID0gdHJ1ZTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBIYW5kbGUgc3R1ZmYgYWZ0ZXIgdGhlIHRyYW5zaXRpb24uXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtSb3V0ZX0gcm91dGVcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhdGVdXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gW2FuY2hvcl1cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX3Bvc3RUcmFuc2l0aW9uID0gZnVuY3Rpb24gX3Bvc3RUcmFuc2l0aW9uKHJvdXRlLCBzdGF0ZSwgYW5jaG9yKSB7XG5cdCAgICAgIC8vIGhhbmRsZSBzY3JvbGwgcG9zaXRpb25zXG5cdCAgICAgIC8vIHNhdmVkIHNjcm9sbCBwb3NpdGlvbnMgdGFrZSBwcmlvcml0eVxuXHQgICAgICAvLyB0aGVuIHdlIGNoZWNrIGlmIHRoZSBwYXRoIGhhcyBhbiBhbmNob3Jcblx0ICAgICAgdmFyIHBvcyA9IHN0YXRlICYmIHN0YXRlLnBvcztcblx0ICAgICAgaWYgKHBvcyAmJiB0aGlzLl9zYXZlU2Nyb2xsUG9zaXRpb24pIHtcblx0ICAgICAgICBWdWUubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgd2luZG93LnNjcm9sbFRvKHBvcy54LCBwb3MueSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoYW5jaG9yKSB7XG5cdCAgICAgICAgVnVlLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFuY2hvci5zbGljZSgxKSk7XG5cdCAgICAgICAgICBpZiAoZWwpIHtcblx0ICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKHdpbmRvdy5zY3JvbGxYLCBlbC5vZmZzZXRUb3ApO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBSb3V0ZXI7XG5cdCAgfSkoKTtcblx0XG5cdCAgZnVuY3Rpb24gZ3VhcmRDb21wb25lbnQocGF0aCwgaGFuZGxlcikge1xuXHQgICAgdmFyIGNvbXAgPSBoYW5kbGVyLmNvbXBvbmVudDtcblx0ICAgIGlmIChWdWUudXRpbC5pc1BsYWluT2JqZWN0KGNvbXApKSB7XG5cdCAgICAgIGNvbXAgPSBoYW5kbGVyLmNvbXBvbmVudCA9IFZ1ZS5leHRlbmQoY29tcCk7XG5cdCAgICB9XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICh0eXBlb2YgY29tcCAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBoYW5kbGVyLmNvbXBvbmVudCA9IG51bGw7XG5cdCAgICAgIHdhcm4kMSgnaW52YWxpZCBjb21wb25lbnQgZm9yIHJvdXRlIFwiJyArIHBhdGggKyAnXCIuJyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKiBJbnN0YWxsYXRpb24gKi9cblx0XG5cdCAgUm91dGVyLmluc3RhbGxlZCA9IGZhbHNlO1xuXHRcblx0ICAvKipcblx0ICAgKiBJbnN0YWxsYXRpb24gaW50ZXJmYWNlLlxuXHQgICAqIEluc3RhbGwgdGhlIG5lY2Vzc2FyeSBkaXJlY3RpdmVzLlxuXHQgICAqL1xuXHRcblx0ICBSb3V0ZXIuaW5zdGFsbCA9IGZ1bmN0aW9uIChleHRlcm5hbFZ1ZSkge1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoUm91dGVyLmluc3RhbGxlZCkge1xuXHQgICAgICB3YXJuJDEoJ2FscmVhZHkgaW5zdGFsbGVkLicpO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBWdWUgPSBleHRlcm5hbFZ1ZTtcblx0ICAgIGFwcGx5T3ZlcnJpZGUoVnVlKTtcblx0ICAgIFZpZXcoVnVlKTtcblx0ICAgIExpbmsoVnVlKTtcblx0ICAgIGV4cG9ydHMkMS5WdWUgPSBWdWU7XG5cdCAgICBSb3V0ZXIuaW5zdGFsbGVkID0gdHJ1ZTtcblx0ICB9O1xuXHRcblx0ICAvLyBhdXRvIGluc3RhbGxcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LlZ1ZSkge1xuXHQgICAgd2luZG93LlZ1ZS51c2UoUm91dGVyKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBSb3V0ZXI7XG5cdFxuXHR9KSk7XG5cbi8qKiovIH0sXG4vKiAxODggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY2KTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9hcGktdGFibGUudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vYXBpLXRhYmxlLnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDE4OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDE5MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNjgpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDE5MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNjkpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDE5MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNzApO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2xlZ2FsLWNvbnRhaW5lci52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9sZWdhbC1jb250YWluZXIudnVlXCIpO1xuXHRcdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMTkzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY291bnRlci52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9sZWdhbC1jb3VudGVyLnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDE5NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNzIpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXktY29udGFpbmVyLnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXktY29udGFpbmVyLnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDE5NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNzMpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXkudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vb3ZlcmxheS52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAxOTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAxOTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi90YWJzLnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3RhYnMudnVlXCIpO1xuXHRcdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMTk4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsLCBwcm9jZXNzKSB7LyohXG5cdCAqIFZ1ZS5qcyB2MS4wLjI2XG5cdCAqIChjKSAyMDE2IEV2YW4gWW91XG5cdCAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGZ1bmN0aW9uIHNldChvYmosIGtleSwgdmFsKSB7XG5cdCAgaWYgKGhhc093bihvYmosIGtleSkpIHtcblx0ICAgIG9ialtrZXldID0gdmFsO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBpZiAob2JqLl9pc1Z1ZSkge1xuXHQgICAgc2V0KG9iai5fZGF0YSwga2V5LCB2YWwpO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgb2IgPSBvYmouX19vYl9fO1xuXHQgIGlmICghb2IpIHtcblx0ICAgIG9ialtrZXldID0gdmFsO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBvYi5jb252ZXJ0KGtleSwgdmFsKTtcblx0ICBvYi5kZXAubm90aWZ5KCk7XG5cdCAgaWYgKG9iLnZtcykge1xuXHQgICAgdmFyIGkgPSBvYi52bXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YXIgdm0gPSBvYi52bXNbaV07XG5cdCAgICAgIHZtLl9wcm94eShrZXkpO1xuXHQgICAgICB2bS5fZGlnZXN0KCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB2YWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZWxldGUgYSBwcm9wZXJ0eSBhbmQgdHJpZ2dlciBjaGFuZ2UgaWYgbmVjZXNzYXJ5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkZWwob2JqLCBrZXkpIHtcblx0ICBpZiAoIWhhc093bihvYmosIGtleSkpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgZGVsZXRlIG9ialtrZXldO1xuXHQgIHZhciBvYiA9IG9iai5fX29iX187XG5cdCAgaWYgKCFvYikge1xuXHQgICAgaWYgKG9iai5faXNWdWUpIHtcblx0ICAgICAgZGVsZXRlIG9iai5fZGF0YVtrZXldO1xuXHQgICAgICBvYmouX2RpZ2VzdCgpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBvYi5kZXAubm90aWZ5KCk7XG5cdCAgaWYgKG9iLnZtcykge1xuXHQgICAgdmFyIGkgPSBvYi52bXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YXIgdm0gPSBvYi52bXNbaV07XG5cdCAgICAgIHZtLl91bnByb3h5KGtleSk7XG5cdCAgICAgIHZtLl9kaWdlc3QoKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cdC8qKlxuXHQgKiBDaGVjayB3aGV0aGVyIHRoZSBvYmplY3QgaGFzIHRoZSBwcm9wZXJ0eS5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaGFzT3duKG9iaiwga2V5KSB7XG5cdCAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZXhwcmVzc2lvbiBpcyBhIGxpdGVyYWwgdmFsdWUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHR2YXIgbGl0ZXJhbFZhbHVlUkUgPSAvXlxccz8odHJ1ZXxmYWxzZXwtP1tcXGRcXC5dK3wnW14nXSonfFwiW15cIl0qXCIpXFxzPyQvO1xuXHRcblx0ZnVuY3Rpb24gaXNMaXRlcmFsKGV4cCkge1xuXHQgIHJldHVybiBsaXRlcmFsVmFsdWVSRS50ZXN0KGV4cCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhIHN0cmluZyBzdGFydHMgd2l0aCAkIG9yIF9cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzUmVzZXJ2ZWQoc3RyKSB7XG5cdCAgdmFyIGMgPSAoc3RyICsgJycpLmNoYXJDb2RlQXQoMCk7XG5cdCAgcmV0dXJuIGMgPT09IDB4MjQgfHwgYyA9PT0gMHg1Rjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEd1YXJkIHRleHQgb3V0cHV0LCBtYWtlIHN1cmUgdW5kZWZpbmVkIG91dHB1dHNcblx0ICogZW1wdHkgc3RyaW5nXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIF90b1N0cmluZyh2YWx1ZSkge1xuXHQgIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZS50b1N0cmluZygpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgYW5kIGNvbnZlcnQgcG9zc2libGUgbnVtZXJpYyBzdHJpbmdzIHRvIG51bWJlcnNcblx0ICogYmVmb3JlIHNldHRpbmcgYmFjayB0byBkYXRhXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybiB7KnxOdW1iZXJ9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcblx0ICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgcGFyc2VkID0gTnVtYmVyKHZhbHVlKTtcblx0ICAgIHJldHVybiBpc05hTihwYXJzZWQpID8gdmFsdWUgOiBwYXJzZWQ7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBzdHJpbmcgYm9vbGVhbiBsaXRlcmFscyBpbnRvIHJlYWwgYm9vbGVhbnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybiB7KnxCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRvQm9vbGVhbih2YWx1ZSkge1xuXHQgIHJldHVybiB2YWx1ZSA9PT0gJ3RydWUnID8gdHJ1ZSA6IHZhbHVlID09PSAnZmFsc2UnID8gZmFsc2UgOiB2YWx1ZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFN0cmlwIHF1b3RlcyBmcm9tIGEgc3RyaW5nXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHJldHVybiB7U3RyaW5nIHwgZmFsc2V9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc3RyaXBRdW90ZXMoc3RyKSB7XG5cdCAgdmFyIGEgPSBzdHIuY2hhckNvZGVBdCgwKTtcblx0ICB2YXIgYiA9IHN0ci5jaGFyQ29kZUF0KHN0ci5sZW5ndGggLSAxKTtcblx0ICByZXR1cm4gYSA9PT0gYiAmJiAoYSA9PT0gMHgyMiB8fCBhID09PSAweDI3KSA/IHN0ci5zbGljZSgxLCAtMSkgOiBzdHI7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDYW1lbGl6ZSBhIGh5cGhlbi1kZWxtaXRlZCBzdHJpbmcuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdHZhciBjYW1lbGl6ZVJFID0gLy0oXFx3KS9nO1xuXHRcblx0ZnVuY3Rpb24gY2FtZWxpemUoc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKGNhbWVsaXplUkUsIHRvVXBwZXIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b1VwcGVyKF8sIGMpIHtcblx0ICByZXR1cm4gYyA/IGMudG9VcHBlckNhc2UoKSA6ICcnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSHlwaGVuYXRlIGEgY2FtZWxDYXNlIHN0cmluZy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0dmFyIGh5cGhlbmF0ZVJFID0gLyhbYS16XFxkXSkoW0EtWl0pL2c7XG5cdFxuXHRmdW5jdGlvbiBoeXBoZW5hdGUoc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKGh5cGhlbmF0ZVJFLCAnJDEtJDInKS50b0xvd2VyQ2FzZSgpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgaHlwaGVuL3VuZGVyc2NvcmUvc2xhc2ggZGVsaW1pdGVyZWQgbmFtZXMgaW50b1xuXHQgKiBjYW1lbGl6ZWQgY2xhc3NOYW1lcy5cblx0ICpcblx0ICogZS5nLiBteS1jb21wb25lbnQgPT4gTXlDb21wb25lbnRcblx0ICogICAgICBzb21lX2Vsc2UgICAgPT4gU29tZUVsc2Vcblx0ICogICAgICBzb21lL2NvbXAgICAgPT4gU29tZUNvbXBcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0dmFyIGNsYXNzaWZ5UkUgPSAvKD86XnxbLV9cXC9dKShcXHcpL2c7XG5cdFxuXHRmdW5jdGlvbiBjbGFzc2lmeShzdHIpIHtcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UoY2xhc3NpZnlSRSwgdG9VcHBlcik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTaW1wbGUgYmluZCwgZmFzdGVyIHRoYW4gbmF0aXZlXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjdHhcblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYmluZChmbiwgY3R4KSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG5cdCAgICB2YXIgbCA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cdCAgICByZXR1cm4gbCA/IGwgPiAxID8gZm4uYXBwbHkoY3R4LCBhcmd1bWVudHMpIDogZm4uY2FsbChjdHgsIGEpIDogZm4uY2FsbChjdHgpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IGFuIEFycmF5LWxpa2Ugb2JqZWN0IHRvIGEgcmVhbCBBcnJheS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheS1saWtlfSBsaXN0XG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbc3RhcnRdIC0gc3RhcnQgaW5kZXhcblx0ICogQHJldHVybiB7QXJyYXl9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdG9BcnJheShsaXN0LCBzdGFydCkge1xuXHQgIHN0YXJ0ID0gc3RhcnQgfHwgMDtcblx0ICB2YXIgaSA9IGxpc3QubGVuZ3RoIC0gc3RhcnQ7XG5cdCAgdmFyIHJldCA9IG5ldyBBcnJheShpKTtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICByZXRbaV0gPSBsaXN0W2kgKyBzdGFydF07XG5cdCAgfVxuXHQgIHJldHVybiByZXQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNaXggcHJvcGVydGllcyBpbnRvIHRhcmdldCBvYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB0b1xuXHQgKiBAcGFyYW0ge09iamVjdH0gZnJvbVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGV4dGVuZCh0bywgZnJvbSkge1xuXHQgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZnJvbSk7XG5cdCAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICB0b1trZXlzW2ldXSA9IGZyb21ba2V5c1tpXV07XG5cdCAgfVxuXHQgIHJldHVybiB0bztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFF1aWNrIG9iamVjdCBjaGVjayAtIHRoaXMgaXMgcHJpbWFyaWx5IHVzZWQgdG8gdGVsbFxuXHQgKiBPYmplY3RzIGZyb20gcHJpbWl0aXZlIHZhbHVlcyB3aGVuIHdlIGtub3cgdGhlIHZhbHVlXG5cdCAqIGlzIGEgSlNPTi1jb21wbGlhbnQgdHlwZS5cblx0ICpcblx0ICogQHBhcmFtIHsqfSBvYmpcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc09iamVjdChvYmopIHtcblx0ICByZXR1cm4gb2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU3RyaWN0IG9iamVjdCB0eXBlIGNoZWNrLiBPbmx5IHJldHVybnMgdHJ1ZVxuXHQgKiBmb3IgcGxhaW4gSmF2YVNjcmlwdCBvYmplY3RzLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IG9ialxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdHZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cdHZhciBPQkpFQ1RfU1RSSU5HID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cdFxuXHRmdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iaikge1xuXHQgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09IE9CSkVDVF9TVFJJTkc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBcnJheSB0eXBlIGNoZWNrLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IG9ialxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblx0XG5cdC8qKlxuXHQgKiBEZWZpbmUgYSBwcm9wZXJ0eS5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW2VudW1lcmFibGVdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGVmKG9iaiwga2V5LCB2YWwsIGVudW1lcmFibGUpIHtcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcblx0ICAgIHZhbHVlOiB2YWwsXG5cdCAgICBlbnVtZXJhYmxlOiAhIWVudW1lcmFibGUsXG5cdCAgICB3cml0YWJsZTogdHJ1ZSxcblx0ICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGVib3VuY2UgYSBmdW5jdGlvbiBzbyBpdCBvbmx5IGdldHMgY2FsbGVkIGFmdGVyIHRoZVxuXHQgKiBpbnB1dCBzdG9wcyBhcnJpdmluZyBhZnRlciB0aGUgZ2l2ZW4gd2FpdCBwZXJpb2QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmNcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHdhaXRcblx0ICogQHJldHVybiB7RnVuY3Rpb259IC0gdGhlIGRlYm91bmNlZCBmdW5jdGlvblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIF9kZWJvdW5jZShmdW5jLCB3YWl0KSB7XG5cdCAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xuXHQgIHZhciBsYXRlciA9IGZ1bmN0aW9uIGxhdGVyKCkge1xuXHQgICAgdmFyIGxhc3QgPSBEYXRlLm5vdygpIC0gdGltZXN0YW1wO1xuXHQgICAgaWYgKGxhc3QgPCB3YWl0ICYmIGxhc3QgPj0gMCkge1xuXHQgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGltZW91dCA9IG51bGw7XG5cdCAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdCAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuXHQgICAgfVxuXHQgIH07XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIGNvbnRleHQgPSB0aGlzO1xuXHQgICAgYXJncyA9IGFyZ3VtZW50cztcblx0ICAgIHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG5cdCAgICBpZiAoIXRpbWVvdXQpIHtcblx0ICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogTWFudWFsIGluZGV4T2YgYmVjYXVzZSBpdCdzIHNsaWdodGx5IGZhc3RlciB0aGFuXG5cdCAqIG5hdGl2ZS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyXG5cdCAqIEBwYXJhbSB7Kn0gb2JqXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaW5kZXhPZihhcnIsIG9iaikge1xuXHQgIHZhciBpID0gYXJyLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBpZiAoYXJyW2ldID09PSBvYmopIHJldHVybiBpO1xuXHQgIH1cblx0ICByZXR1cm4gLTE7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNYWtlIGEgY2FuY2VsbGFibGUgdmVyc2lvbiBvZiBhbiBhc3luYyBjYWxsYmFjay5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2FuY2VsbGFibGUoZm4pIHtcblx0ICB2YXIgY2IgPSBmdW5jdGlvbiBjYigpIHtcblx0ICAgIGlmICghY2IuY2FuY2VsbGVkKSB7XG5cdCAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHQgIH07XG5cdCAgY2IuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgY2IuY2FuY2VsbGVkID0gdHJ1ZTtcblx0ICB9O1xuXHQgIHJldHVybiBjYjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIHR3byB2YWx1ZXMgYXJlIGxvb3NlbHkgZXF1YWwgLSB0aGF0IGlzLFxuXHQgKiBpZiB0aGV5IGFyZSBwbGFpbiBvYmplY3RzLCBkbyB0aGV5IGhhdmUgdGhlIHNhbWUgc2hhcGU/XG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gYVxuXHQgKiBAcGFyYW0geyp9IGJcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBsb29zZUVxdWFsKGEsIGIpIHtcblx0ICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cblx0ICByZXR1cm4gYSA9PSBiIHx8IChpc09iamVjdChhKSAmJiBpc09iamVjdChiKSA/IEpTT04uc3RyaW5naWZ5KGEpID09PSBKU09OLnN0cmluZ2lmeShiKSA6IGZhbHNlKTtcblx0ICAvKiBlc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xuXHR9XG5cdFxuXHR2YXIgaGFzUHJvdG8gPSAoJ19fcHJvdG9fXycgaW4ge30pO1xuXHRcblx0Ly8gQnJvd3NlciBlbnZpcm9ubWVudCBzbmlmZmluZ1xuXHR2YXIgaW5Ccm93c2VyID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHdpbmRvdykgIT09ICdbb2JqZWN0IE9iamVjdF0nO1xuXHRcblx0Ly8gZGV0ZWN0IGRldnRvb2xzXG5cdHZhciBkZXZ0b29scyA9IGluQnJvd3NlciAmJiB3aW5kb3cuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXztcblx0XG5cdC8vIFVBIHNuaWZmaW5nIGZvciB3b3JraW5nIGFyb3VuZCBicm93c2VyLXNwZWNpZmljIHF1aXJrc1xuXHR2YXIgVUEgPSBpbkJyb3dzZXIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcblx0dmFyIGlzSUUgPSBVQSAmJiBVQS5pbmRleE9mKCd0cmlkZW50JykgPiAwO1xuXHR2YXIgaXNJRTkgPSBVQSAmJiBVQS5pbmRleE9mKCdtc2llIDkuMCcpID4gMDtcblx0dmFyIGlzQW5kcm9pZCA9IFVBICYmIFVBLmluZGV4T2YoJ2FuZHJvaWQnKSA+IDA7XG5cdHZhciBpc0lvcyA9IFVBICYmIC8oaXBob25lfGlwYWR8aXBvZHxpb3MpL2kudGVzdChVQSk7XG5cdHZhciBpb3NWZXJzaW9uTWF0Y2ggPSBpc0lvcyAmJiBVQS5tYXRjaCgvb3MgKFtcXGRfXSspLyk7XG5cdHZhciBpb3NWZXJzaW9uID0gaW9zVmVyc2lvbk1hdGNoICYmIGlvc1ZlcnNpb25NYXRjaFsxXS5zcGxpdCgnXycpO1xuXHRcblx0Ly8gZGV0ZWN0aW5nIGlPUyBVSVdlYlZpZXcgYnkgaW5kZXhlZERCXG5cdHZhciBoYXNNdXRhdGlvbk9ic2VydmVyQnVnID0gaW9zVmVyc2lvbiAmJiBOdW1iZXIoaW9zVmVyc2lvblswXSkgPj0gOSAmJiBOdW1iZXIoaW9zVmVyc2lvblsxXSkgPj0gMyAmJiAhd2luZG93LmluZGV4ZWREQjtcblx0XG5cdHZhciB0cmFuc2l0aW9uUHJvcCA9IHVuZGVmaW5lZDtcblx0dmFyIHRyYW5zaXRpb25FbmRFdmVudCA9IHVuZGVmaW5lZDtcblx0dmFyIGFuaW1hdGlvblByb3AgPSB1bmRlZmluZWQ7XG5cdHZhciBhbmltYXRpb25FbmRFdmVudCA9IHVuZGVmaW5lZDtcblx0XG5cdC8vIFRyYW5zaXRpb24gcHJvcGVydHkvZXZlbnQgc25pZmZpbmdcblx0aWYgKGluQnJvd3NlciAmJiAhaXNJRTkpIHtcblx0ICB2YXIgaXNXZWJraXRUcmFucyA9IHdpbmRvdy5vbnRyYW5zaXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kICE9PSB1bmRlZmluZWQ7XG5cdCAgdmFyIGlzV2Via2l0QW5pbSA9IHdpbmRvdy5vbmFuaW1hdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmIHdpbmRvdy5vbndlYmtpdGFuaW1hdGlvbmVuZCAhPT0gdW5kZWZpbmVkO1xuXHQgIHRyYW5zaXRpb25Qcm9wID0gaXNXZWJraXRUcmFucyA/ICdXZWJraXRUcmFuc2l0aW9uJyA6ICd0cmFuc2l0aW9uJztcblx0ICB0cmFuc2l0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdFRyYW5zID8gJ3dlYmtpdFRyYW5zaXRpb25FbmQnIDogJ3RyYW5zaXRpb25lbmQnO1xuXHQgIGFuaW1hdGlvblByb3AgPSBpc1dlYmtpdEFuaW0gPyAnV2Via2l0QW5pbWF0aW9uJyA6ICdhbmltYXRpb24nO1xuXHQgIGFuaW1hdGlvbkVuZEV2ZW50ID0gaXNXZWJraXRBbmltID8gJ3dlYmtpdEFuaW1hdGlvbkVuZCcgOiAnYW5pbWF0aW9uZW5kJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERlZmVyIGEgdGFzayB0byBleGVjdXRlIGl0IGFzeW5jaHJvbm91c2x5LiBJZGVhbGx5IHRoaXNcblx0ICogc2hvdWxkIGJlIGV4ZWN1dGVkIGFzIGEgbWljcm90YXNrLCBzbyB3ZSBsZXZlcmFnZVxuXHQgKiBNdXRhdGlvbk9ic2VydmVyIGlmIGl0J3MgYXZhaWxhYmxlLCBhbmQgZmFsbGJhY2sgdG9cblx0ICogc2V0VGltZW91dCgwKS5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICogQHBhcmFtIHtPYmplY3R9IGN0eFxuXHQgKi9cblx0XG5cdHZhciBuZXh0VGljayA9IChmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGNhbGxiYWNrcyA9IFtdO1xuXHQgIHZhciBwZW5kaW5nID0gZmFsc2U7XG5cdCAgdmFyIHRpbWVyRnVuYztcblx0ICBmdW5jdGlvbiBuZXh0VGlja0hhbmRsZXIoKSB7XG5cdCAgICBwZW5kaW5nID0gZmFsc2U7XG5cdCAgICB2YXIgY29waWVzID0gY2FsbGJhY2tzLnNsaWNlKDApO1xuXHQgICAgY2FsbGJhY2tzID0gW107XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvcGllcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICBjb3BpZXNbaV0oKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICh0eXBlb2YgTXV0YXRpb25PYnNlcnZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgIWhhc011dGF0aW9uT2JzZXJ2ZXJCdWcpIHtcblx0ICAgIHZhciBjb3VudGVyID0gMTtcblx0ICAgIHZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKG5leHRUaWNrSGFuZGxlcik7XG5cdCAgICB2YXIgdGV4dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjb3VudGVyKTtcblx0ICAgIG9ic2VydmVyLm9ic2VydmUodGV4dE5vZGUsIHtcblx0ICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZVxuXHQgICAgfSk7XG5cdCAgICB0aW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGNvdW50ZXIgPSAoY291bnRlciArIDEpICUgMjtcblx0ICAgICAgdGV4dE5vZGUuZGF0YSA9IGNvdW50ZXI7XG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyB3ZWJwYWNrIGF0dGVtcHRzIHRvIGluamVjdCBhIHNoaW0gZm9yIHNldEltbWVkaWF0ZVxuXHQgICAgLy8gaWYgaXQgaXMgdXNlZCBhcyBhIGdsb2JhbCwgc28gd2UgaGF2ZSB0byB3b3JrIGFyb3VuZCB0aGF0IHRvXG5cdCAgICAvLyBhdm9pZCBidW5kbGluZyB1bm5lY2Vzc2FyeSBjb2RlLlxuXHQgICAgdmFyIGNvbnRleHQgPSBpbkJyb3dzZXIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHt9O1xuXHQgICAgdGltZXJGdW5jID0gY29udGV4dC5zZXRJbW1lZGlhdGUgfHwgc2V0VGltZW91dDtcblx0ICB9XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIChjYiwgY3R4KSB7XG5cdCAgICB2YXIgZnVuYyA9IGN0eCA/IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgY2IuY2FsbChjdHgpO1xuXHQgICAgfSA6IGNiO1xuXHQgICAgY2FsbGJhY2tzLnB1c2goZnVuYyk7XG5cdCAgICBpZiAocGVuZGluZykgcmV0dXJuO1xuXHQgICAgcGVuZGluZyA9IHRydWU7XG5cdCAgICB0aW1lckZ1bmMobmV4dFRpY2tIYW5kbGVyLCAwKTtcblx0ICB9O1xuXHR9KSgpO1xuXHRcblx0dmFyIF9TZXQgPSB1bmRlZmluZWQ7XG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHRpZiAodHlwZW9mIFNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgU2V0LnRvU3RyaW5nKCkubWF0Y2goL25hdGl2ZSBjb2RlLykpIHtcblx0ICAvLyB1c2UgbmF0aXZlIFNldCB3aGVuIGF2YWlsYWJsZS5cblx0ICBfU2V0ID0gU2V0O1xuXHR9IGVsc2Uge1xuXHQgIC8vIGEgbm9uLXN0YW5kYXJkIFNldCBwb2x5ZmlsbCB0aGF0IG9ubHkgd29ya3Mgd2l0aCBwcmltaXRpdmUga2V5cy5cblx0ICBfU2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5zZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIH07XG5cdCAgX1NldC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgcmV0dXJuIHRoaXMuc2V0W2tleV0gIT09IHVuZGVmaW5lZDtcblx0ICB9O1xuXHQgIF9TZXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIHRoaXMuc2V0W2tleV0gPSAxO1xuXHQgIH07XG5cdCAgX1NldC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gQ2FjaGUobGltaXQpIHtcblx0ICB0aGlzLnNpemUgPSAwO1xuXHQgIHRoaXMubGltaXQgPSBsaW1pdDtcblx0ICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSB1bmRlZmluZWQ7XG5cdCAgdGhpcy5fa2V5bWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0fVxuXHRcblx0dmFyIHAgPSBDYWNoZS5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogUHV0IDx2YWx1ZT4gaW50byB0aGUgY2FjaGUgYXNzb2NpYXRlZCB3aXRoIDxrZXk+LlxuXHQgKiBSZXR1cm5zIHRoZSBlbnRyeSB3aGljaCB3YXMgcmVtb3ZlZCB0byBtYWtlIHJvb20gZm9yXG5cdCAqIHRoZSBuZXcgZW50cnkuIE90aGVyd2lzZSB1bmRlZmluZWQgaXMgcmV0dXJuZWQuXG5cdCAqIChpLmUuIGlmIHRoZXJlIHdhcyBlbm91Z2ggcm9vbSBhbHJlYWR5KS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEByZXR1cm4ge0VudHJ5fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRwLnB1dCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgdmFyIHJlbW92ZWQ7XG5cdFxuXHQgIHZhciBlbnRyeSA9IHRoaXMuZ2V0KGtleSwgdHJ1ZSk7XG5cdCAgaWYgKCFlbnRyeSkge1xuXHQgICAgaWYgKHRoaXMuc2l6ZSA9PT0gdGhpcy5saW1pdCkge1xuXHQgICAgICByZW1vdmVkID0gdGhpcy5zaGlmdCgpO1xuXHQgICAgfVxuXHQgICAgZW50cnkgPSB7XG5cdCAgICAgIGtleToga2V5XG5cdCAgICB9O1xuXHQgICAgdGhpcy5fa2V5bWFwW2tleV0gPSBlbnRyeTtcblx0ICAgIGlmICh0aGlzLnRhaWwpIHtcblx0ICAgICAgdGhpcy50YWlsLm5ld2VyID0gZW50cnk7XG5cdCAgICAgIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5oZWFkID0gZW50cnk7XG5cdCAgICB9XG5cdCAgICB0aGlzLnRhaWwgPSBlbnRyeTtcblx0ICAgIHRoaXMuc2l6ZSsrO1xuXHQgIH1cblx0ICBlbnRyeS52YWx1ZSA9IHZhbHVlO1xuXHRcblx0ICByZXR1cm4gcmVtb3ZlZDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBQdXJnZSB0aGUgbGVhc3QgcmVjZW50bHkgdXNlZCAob2xkZXN0KSBlbnRyeSBmcm9tIHRoZVxuXHQgKiBjYWNoZS4gUmV0dXJucyB0aGUgcmVtb3ZlZCBlbnRyeSBvciB1bmRlZmluZWQgaWYgdGhlXG5cdCAqIGNhY2hlIHdhcyBlbXB0eS5cblx0ICovXG5cdFxuXHRwLnNoaWZ0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBlbnRyeSA9IHRoaXMuaGVhZDtcblx0ICBpZiAoZW50cnkpIHtcblx0ICAgIHRoaXMuaGVhZCA9IHRoaXMuaGVhZC5uZXdlcjtcblx0ICAgIHRoaXMuaGVhZC5vbGRlciA9IHVuZGVmaW5lZDtcblx0ICAgIGVudHJ5Lm5ld2VyID0gZW50cnkub2xkZXIgPSB1bmRlZmluZWQ7XG5cdCAgICB0aGlzLl9rZXltYXBbZW50cnkua2V5XSA9IHVuZGVmaW5lZDtcblx0ICAgIHRoaXMuc2l6ZS0tO1xuXHQgIH1cblx0ICByZXR1cm4gZW50cnk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogR2V0IGFuZCByZWdpc3RlciByZWNlbnQgdXNlIG9mIDxrZXk+LiBSZXR1cm5zIHRoZSB2YWx1ZVxuXHQgKiBhc3NvY2lhdGVkIHdpdGggPGtleT4gb3IgdW5kZWZpbmVkIGlmIG5vdCBpbiBjYWNoZS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHJldHVybkVudHJ5XG5cdCAqIEByZXR1cm4ge0VudHJ5fCp9XG5cdCAqL1xuXHRcblx0cC5nZXQgPSBmdW5jdGlvbiAoa2V5LCByZXR1cm5FbnRyeSkge1xuXHQgIHZhciBlbnRyeSA9IHRoaXMuX2tleW1hcFtrZXldO1xuXHQgIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG5cdCAgaWYgKGVudHJ5ID09PSB0aGlzLnRhaWwpIHtcblx0ICAgIHJldHVybiByZXR1cm5FbnRyeSA/IGVudHJ5IDogZW50cnkudmFsdWU7XG5cdCAgfVxuXHQgIC8vIEhFQUQtLS0tLS0tLS0tLS0tLVRBSUxcblx0ICAvLyAgIDwub2xkZXIgICAubmV3ZXI+XG5cdCAgLy8gIDwtLS0gYWRkIGRpcmVjdGlvbiAtLVxuXHQgIC8vICAgQSAgQiAgQyAgPEQ+ICBFXG5cdCAgaWYgKGVudHJ5Lm5ld2VyKSB7XG5cdCAgICBpZiAoZW50cnkgPT09IHRoaXMuaGVhZCkge1xuXHQgICAgICB0aGlzLmhlYWQgPSBlbnRyeS5uZXdlcjtcblx0ICAgIH1cblx0ICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gZW50cnkub2xkZXI7IC8vIEMgPC0tIEUuXG5cdCAgfVxuXHQgIGlmIChlbnRyeS5vbGRlcikge1xuXHQgICAgZW50cnkub2xkZXIubmV3ZXIgPSBlbnRyeS5uZXdlcjsgLy8gQy4gLS0+IEVcblx0ICB9XG5cdCAgZW50cnkubmV3ZXIgPSB1bmRlZmluZWQ7IC8vIEQgLS14XG5cdCAgZW50cnkub2xkZXIgPSB0aGlzLnRhaWw7IC8vIEQuIC0tPiBFXG5cdCAgaWYgKHRoaXMudGFpbCkge1xuXHQgICAgdGhpcy50YWlsLm5ld2VyID0gZW50cnk7IC8vIEUuIDwtLSBEXG5cdCAgfVxuXHQgIHRoaXMudGFpbCA9IGVudHJ5O1xuXHQgIHJldHVybiByZXR1cm5FbnRyeSA/IGVudHJ5IDogZW50cnkudmFsdWU7XG5cdH07XG5cdFxuXHR2YXIgY2FjaGUkMSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0dmFyIGZpbHRlclRva2VuUkUgPSAvW15cXHMnXCJdK3wnW14nXSonfFwiW15cIl0qXCIvZztcblx0dmFyIHJlc2VydmVkQXJnUkUgPSAvXmluJHxeLT9cXGQrLztcblx0XG5cdC8qKlxuXHQgKiBQYXJzZXIgc3RhdGVcblx0ICovXG5cdFxuXHR2YXIgc3RyO1xuXHR2YXIgZGlyO1xuXHR2YXIgYztcblx0dmFyIHByZXY7XG5cdHZhciBpO1xuXHR2YXIgbDtcblx0dmFyIGxhc3RGaWx0ZXJJbmRleDtcblx0dmFyIGluU2luZ2xlO1xuXHR2YXIgaW5Eb3VibGU7XG5cdHZhciBjdXJseTtcblx0dmFyIHNxdWFyZTtcblx0dmFyIHBhcmVuO1xuXHQvKipcblx0ICogUHVzaCBhIGZpbHRlciB0byB0aGUgY3VycmVudCBkaXJlY3RpdmUgb2JqZWN0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHVzaEZpbHRlcigpIHtcblx0ICB2YXIgZXhwID0gc3RyLnNsaWNlKGxhc3RGaWx0ZXJJbmRleCwgaSkudHJpbSgpO1xuXHQgIHZhciBmaWx0ZXI7XG5cdCAgaWYgKGV4cCkge1xuXHQgICAgZmlsdGVyID0ge307XG5cdCAgICB2YXIgdG9rZW5zID0gZXhwLm1hdGNoKGZpbHRlclRva2VuUkUpO1xuXHQgICAgZmlsdGVyLm5hbWUgPSB0b2tlbnNbMF07XG5cdCAgICBpZiAodG9rZW5zLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgZmlsdGVyLmFyZ3MgPSB0b2tlbnMuc2xpY2UoMSkubWFwKHByb2Nlc3NGaWx0ZXJBcmcpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoZmlsdGVyKSB7XG5cdCAgICAoZGlyLmZpbHRlcnMgPSBkaXIuZmlsdGVycyB8fCBbXSkucHVzaChmaWx0ZXIpO1xuXHQgIH1cblx0ICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGFyZ3VtZW50IGlzIGR5bmFtaWMgYW5kIHN0cmlwIHF1b3Rlcy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGFyZ1xuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc0ZpbHRlckFyZyhhcmcpIHtcblx0ICBpZiAocmVzZXJ2ZWRBcmdSRS50ZXN0KGFyZykpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHZhbHVlOiB0b051bWJlcihhcmcpLFxuXHQgICAgICBkeW5hbWljOiBmYWxzZVxuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHN0cmlwcGVkID0gc3RyaXBRdW90ZXMoYXJnKTtcblx0ICAgIHZhciBkeW5hbWljID0gc3RyaXBwZWQgPT09IGFyZztcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHZhbHVlOiBkeW5hbWljID8gYXJnIDogc3RyaXBwZWQsXG5cdCAgICAgIGR5bmFtaWM6IGR5bmFtaWNcblx0ICAgIH07XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2UgYSBkaXJlY3RpdmUgdmFsdWUgYW5kIGV4dHJhY3QgdGhlIGV4cHJlc3Npb25cblx0ICogYW5kIGl0cyBmaWx0ZXJzIGludG8gYSBkZXNjcmlwdG9yLlxuXHQgKlxuXHQgKiBFeGFtcGxlOlxuXHQgKlxuXHQgKiBcImEgKyAxIHwgdXBwZXJjYXNlXCIgd2lsbCB5aWVsZDpcblx0ICoge1xuXHQgKiAgIGV4cHJlc3Npb246ICdhICsgMScsXG5cdCAqICAgZmlsdGVyczogW1xuXHQgKiAgICAgeyBuYW1lOiAndXBwZXJjYXNlJywgYXJnczogbnVsbCB9XG5cdCAqICAgXVxuXHQgKiB9XG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZURpcmVjdGl2ZShzKSB7XG5cdCAgdmFyIGhpdCA9IGNhY2hlJDEuZ2V0KHMpO1xuXHQgIGlmIChoaXQpIHtcblx0ICAgIHJldHVybiBoaXQ7XG5cdCAgfVxuXHRcblx0ICAvLyByZXNldCBwYXJzZXIgc3RhdGVcblx0ICBzdHIgPSBzO1xuXHQgIGluU2luZ2xlID0gaW5Eb3VibGUgPSBmYWxzZTtcblx0ICBjdXJseSA9IHNxdWFyZSA9IHBhcmVuID0gMDtcblx0ICBsYXN0RmlsdGVySW5kZXggPSAwO1xuXHQgIGRpciA9IHt9O1xuXHRcblx0ICBmb3IgKGkgPSAwLCBsID0gc3RyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgcHJldiA9IGM7XG5cdCAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG5cdCAgICBpZiAoaW5TaW5nbGUpIHtcblx0ICAgICAgLy8gY2hlY2sgc2luZ2xlIHF1b3RlXG5cdCAgICAgIGlmIChjID09PSAweDI3ICYmIHByZXYgIT09IDB4NUMpIGluU2luZ2xlID0gIWluU2luZ2xlO1xuXHQgICAgfSBlbHNlIGlmIChpbkRvdWJsZSkge1xuXHQgICAgICAvLyBjaGVjayBkb3VibGUgcXVvdGVcblx0ICAgICAgaWYgKGMgPT09IDB4MjIgJiYgcHJldiAhPT0gMHg1QykgaW5Eb3VibGUgPSAhaW5Eb3VibGU7XG5cdCAgICB9IGVsc2UgaWYgKGMgPT09IDB4N0MgJiYgLy8gcGlwZVxuXHQgICAgc3RyLmNoYXJDb2RlQXQoaSArIDEpICE9PSAweDdDICYmIHN0ci5jaGFyQ29kZUF0KGkgLSAxKSAhPT0gMHg3Qykge1xuXHQgICAgICBpZiAoZGlyLmV4cHJlc3Npb24gPT0gbnVsbCkge1xuXHQgICAgICAgIC8vIGZpcnN0IGZpbHRlciwgZW5kIG9mIGV4cHJlc3Npb25cblx0ICAgICAgICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTtcblx0ICAgICAgICBkaXIuZXhwcmVzc2lvbiA9IHN0ci5zbGljZSgwLCBpKS50cmltKCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gYWxyZWFkeSBoYXMgZmlsdGVyXG5cdCAgICAgICAgcHVzaEZpbHRlcigpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzd2l0Y2ggKGMpIHtcblx0ICAgICAgICBjYXNlIDB4MjI6XG5cdCAgICAgICAgICBpbkRvdWJsZSA9IHRydWU7YnJlYWs7IC8vIFwiXG5cdCAgICAgICAgY2FzZSAweDI3OlxuXHQgICAgICAgICAgaW5TaW5nbGUgPSB0cnVlO2JyZWFrOyAvLyAnXG5cdCAgICAgICAgY2FzZSAweDI4OlxuXHQgICAgICAgICAgcGFyZW4rKzticmVhazsgLy8gKFxuXHQgICAgICAgIGNhc2UgMHgyOTpcblx0ICAgICAgICAgIHBhcmVuLS07YnJlYWs7IC8vIClcblx0ICAgICAgICBjYXNlIDB4NUI6XG5cdCAgICAgICAgICBzcXVhcmUrKzticmVhazsgLy8gW1xuXHQgICAgICAgIGNhc2UgMHg1RDpcblx0ICAgICAgICAgIHNxdWFyZS0tO2JyZWFrOyAvLyBdXG5cdCAgICAgICAgY2FzZSAweDdCOlxuXHQgICAgICAgICAgY3VybHkrKzticmVhazsgLy8ge1xuXHQgICAgICAgIGNhc2UgMHg3RDpcblx0ICAgICAgICAgIGN1cmx5LS07YnJlYWs7IC8vIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKGRpci5leHByZXNzaW9uID09IG51bGwpIHtcblx0ICAgIGRpci5leHByZXNzaW9uID0gc3RyLnNsaWNlKDAsIGkpLnRyaW0oKTtcblx0ICB9IGVsc2UgaWYgKGxhc3RGaWx0ZXJJbmRleCAhPT0gMCkge1xuXHQgICAgcHVzaEZpbHRlcigpO1xuXHQgIH1cblx0XG5cdCAgY2FjaGUkMS5wdXQocywgZGlyKTtcblx0ICByZXR1cm4gZGlyO1xuXHR9XG5cdFxuXHR2YXIgZGlyZWN0aXZlID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgcGFyc2VEaXJlY3RpdmU6IHBhcnNlRGlyZWN0aXZlXG5cdH0pO1xuXHRcblx0dmFyIHJlZ2V4RXNjYXBlUkUgPSAvWy0uKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nO1xuXHR2YXIgY2FjaGUgPSB1bmRlZmluZWQ7XG5cdHZhciB0YWdSRSA9IHVuZGVmaW5lZDtcblx0dmFyIGh0bWxSRSA9IHVuZGVmaW5lZDtcblx0LyoqXG5cdCAqIEVzY2FwZSBhIHN0cmluZyBzbyBpdCBjYW4gYmUgdXNlZCBpbiBhIFJlZ0V4cFxuXHQgKiBjb25zdHJ1Y3Rvci5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGVzY2FwZVJlZ2V4KHN0cikge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZShyZWdleEVzY2FwZVJFLCAnXFxcXCQmJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVSZWdleCgpIHtcblx0ICB2YXIgb3BlbiA9IGVzY2FwZVJlZ2V4KGNvbmZpZy5kZWxpbWl0ZXJzWzBdKTtcblx0ICB2YXIgY2xvc2UgPSBlc2NhcGVSZWdleChjb25maWcuZGVsaW1pdGVyc1sxXSk7XG5cdCAgdmFyIHVuc2FmZU9wZW4gPSBlc2NhcGVSZWdleChjb25maWcudW5zYWZlRGVsaW1pdGVyc1swXSk7XG5cdCAgdmFyIHVuc2FmZUNsb3NlID0gZXNjYXBlUmVnZXgoY29uZmlnLnVuc2FmZURlbGltaXRlcnNbMV0pO1xuXHQgIHRhZ1JFID0gbmV3IFJlZ0V4cCh1bnNhZmVPcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyB1bnNhZmVDbG9zZSArICd8JyArIG9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIGNsb3NlLCAnZycpO1xuXHQgIGh0bWxSRSA9IG5ldyBSZWdFeHAoJ14nICsgdW5zYWZlT3BlbiArICcoKD86LnxcXFxcbikrPyknICsgdW5zYWZlQ2xvc2UgKyAnJCcpO1xuXHQgIC8vIHJlc2V0IGNhY2hlXG5cdCAgY2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBhIHRlbXBsYXRlIHRleHQgc3RyaW5nIGludG8gYW4gYXJyYXkgb2YgdG9rZW5zLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuXHQgKiBAcmV0dXJuIHtBcnJheTxPYmplY3Q+IHwgbnVsbH1cblx0ICogICAgICAgICAgICAgICAtIHtTdHJpbmd9IHR5cGVcblx0ICogICAgICAgICAgICAgICAtIHtTdHJpbmd9IHZhbHVlXG5cdCAqICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW2h0bWxdXG5cdCAqICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW29uZVRpbWVdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VUZXh0KHRleHQpIHtcblx0ICBpZiAoIWNhY2hlKSB7XG5cdCAgICBjb21waWxlUmVnZXgoKTtcblx0ICB9XG5cdCAgdmFyIGhpdCA9IGNhY2hlLmdldCh0ZXh0KTtcblx0ICBpZiAoaGl0KSB7XG5cdCAgICByZXR1cm4gaGl0O1xuXHQgIH1cblx0ICBpZiAoIXRhZ1JFLnRlc3QodGV4dCkpIHtcblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0ICB2YXIgdG9rZW5zID0gW107XG5cdCAgdmFyIGxhc3RJbmRleCA9IHRhZ1JFLmxhc3RJbmRleCA9IDA7XG5cdCAgdmFyIG1hdGNoLCBpbmRleCwgaHRtbCwgdmFsdWUsIGZpcnN0LCBvbmVUaW1lO1xuXHQgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgd2hpbGUgKG1hdGNoID0gdGFnUkUuZXhlYyh0ZXh0KSkge1xuXHQgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgaW5kZXggPSBtYXRjaC5pbmRleDtcblx0ICAgIC8vIHB1c2ggdGV4dCB0b2tlblxuXHQgICAgaWYgKGluZGV4ID4gbGFzdEluZGV4KSB7XG5cdCAgICAgIHRva2Vucy5wdXNoKHtcblx0ICAgICAgICB2YWx1ZTogdGV4dC5zbGljZShsYXN0SW5kZXgsIGluZGV4KVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIC8vIHRhZyB0b2tlblxuXHQgICAgaHRtbCA9IGh0bWxSRS50ZXN0KG1hdGNoWzBdKTtcblx0ICAgIHZhbHVlID0gaHRtbCA/IG1hdGNoWzFdIDogbWF0Y2hbMl07XG5cdCAgICBmaXJzdCA9IHZhbHVlLmNoYXJDb2RlQXQoMCk7XG5cdCAgICBvbmVUaW1lID0gZmlyc3QgPT09IDQyOyAvLyAqXG5cdCAgICB2YWx1ZSA9IG9uZVRpbWUgPyB2YWx1ZS5zbGljZSgxKSA6IHZhbHVlO1xuXHQgICAgdG9rZW5zLnB1c2goe1xuXHQgICAgICB0YWc6IHRydWUsXG5cdCAgICAgIHZhbHVlOiB2YWx1ZS50cmltKCksXG5cdCAgICAgIGh0bWw6IGh0bWwsXG5cdCAgICAgIG9uZVRpbWU6IG9uZVRpbWVcblx0ICAgIH0pO1xuXHQgICAgbGFzdEluZGV4ID0gaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7XG5cdCAgfVxuXHQgIGlmIChsYXN0SW5kZXggPCB0ZXh0Lmxlbmd0aCkge1xuXHQgICAgdG9rZW5zLnB1c2goe1xuXHQgICAgICB2YWx1ZTogdGV4dC5zbGljZShsYXN0SW5kZXgpXG5cdCAgICB9KTtcblx0ICB9XG5cdCAgY2FjaGUucHV0KHRleHQsIHRva2Vucyk7XG5cdCAgcmV0dXJuIHRva2Vucztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcm1hdCBhIGxpc3Qgb2YgdG9rZW5zIGludG8gYW4gZXhwcmVzc2lvbi5cblx0ICogZS5nLiB0b2tlbnMgcGFyc2VkIGZyb20gJ2Ege3tifX0gYycgY2FuIGJlIHNlcmlhbGl6ZWRcblx0ICogaW50byBvbmUgc2luZ2xlIGV4cHJlc3Npb24gYXMgJ1wiYSBcIiArIGIgKyBcIiBjXCInLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSB0b2tlbnNcblx0ICogQHBhcmFtIHtWdWV9IFt2bV1cblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRva2Vuc1RvRXhwKHRva2Vucywgdm0pIHtcblx0ICBpZiAodG9rZW5zLmxlbmd0aCA+IDEpIHtcblx0ICAgIHJldHVybiB0b2tlbnMubWFwKGZ1bmN0aW9uICh0b2tlbikge1xuXHQgICAgICByZXR1cm4gZm9ybWF0VG9rZW4odG9rZW4sIHZtKTtcblx0ICAgIH0pLmpvaW4oJysnKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGZvcm1hdFRva2VuKHRva2Vuc1swXSwgdm0sIHRydWUpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcm1hdCBhIHNpbmdsZSB0b2tlbi5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHRva2VuXG5cdCAqIEBwYXJhbSB7VnVlfSBbdm1dXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW3NpbmdsZV1cblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFRva2VuKHRva2VuLCB2bSwgc2luZ2xlKSB7XG5cdCAgcmV0dXJuIHRva2VuLnRhZyA/IHRva2VuLm9uZVRpbWUgJiYgdm0gPyAnXCInICsgdm0uJGV2YWwodG9rZW4udmFsdWUpICsgJ1wiJyA6IGlubGluZUZpbHRlcnModG9rZW4udmFsdWUsIHNpbmdsZSkgOiAnXCInICsgdG9rZW4udmFsdWUgKyAnXCInO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9yIGFuIGF0dHJpYnV0ZSB3aXRoIG11bHRpcGxlIGludGVycG9sYXRpb24gdGFncyxcblx0ICogZS5nLiBhdHRyPVwic29tZS17e3RoaW5nIHwgZmlsdGVyfX1cIiwgaW4gb3JkZXIgdG8gY29tYmluZVxuXHQgKiB0aGUgd2hvbGUgdGhpbmcgaW50byBhIHNpbmdsZSB3YXRjaGFibGUgZXhwcmVzc2lvbiwgd2Vcblx0ICogaGF2ZSB0byBpbmxpbmUgdGhvc2UgZmlsdGVycy4gVGhpcyBmdW5jdGlvbiBkb2VzIGV4YWN0bHlcblx0ICogdGhhdC4gVGhpcyBpcyBhIGJpdCBoYWNreSBidXQgaXQgYXZvaWRzIGhlYXZ5IGNoYW5nZXNcblx0ICogdG8gZGlyZWN0aXZlIHBhcnNlciBhbmQgd2F0Y2hlciBtZWNoYW5pc20uXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHBhcmFtIHtCb29sZWFufSBzaW5nbGVcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdHZhciBmaWx0ZXJSRSA9IC9bXnxdXFx8W158XS87XG5cdGZ1bmN0aW9uIGlubGluZUZpbHRlcnMoZXhwLCBzaW5nbGUpIHtcblx0ICBpZiAoIWZpbHRlclJFLnRlc3QoZXhwKSkge1xuXHQgICAgcmV0dXJuIHNpbmdsZSA/IGV4cCA6ICcoJyArIGV4cCArICcpJztcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGRpciA9IHBhcnNlRGlyZWN0aXZlKGV4cCk7XG5cdCAgICBpZiAoIWRpci5maWx0ZXJzKSB7XG5cdCAgICAgIHJldHVybiAnKCcgKyBleHAgKyAnKSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3RoaXMuX2FwcGx5RmlsdGVycygnICsgZGlyLmV4cHJlc3Npb24gKyAvLyB2YWx1ZVxuXHQgICAgICAnLG51bGwsJyArIC8vIG9sZFZhbHVlIChudWxsIGZvciByZWFkKVxuXHQgICAgICBKU09OLnN0cmluZ2lmeShkaXIuZmlsdGVycykgKyAvLyBmaWx0ZXIgZGVzY3JpcHRvcnNcblx0ICAgICAgJyxmYWxzZSknOyAvLyB3cml0ZT9cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciB0ZXh0ID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgY29tcGlsZVJlZ2V4OiBjb21waWxlUmVnZXgsXG5cdCAgcGFyc2VUZXh0OiBwYXJzZVRleHQsXG5cdCAgdG9rZW5zVG9FeHA6IHRva2Vuc1RvRXhwXG5cdH0pO1xuXHRcblx0dmFyIGRlbGltaXRlcnMgPSBbJ3t7JywgJ319J107XG5cdHZhciB1bnNhZmVEZWxpbWl0ZXJzID0gWyd7e3snLCAnfX19J107XG5cdFxuXHR2YXIgY29uZmlnID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuXHRcblx0ICAvKipcblx0ICAgKiBXaGV0aGVyIHRvIHByaW50IGRlYnVnIG1lc3NhZ2VzLlxuXHQgICAqIEFsc28gZW5hYmxlcyBzdGFjayB0cmFjZSBmb3Igd2FybmluZ3MuXG5cdCAgICpcblx0ICAgKiBAdHlwZSB7Qm9vbGVhbn1cblx0ICAgKi9cblx0XG5cdCAgZGVidWc6IGZhbHNlLFxuXHRcblx0ICAvKipcblx0ICAgKiBXaGV0aGVyIHRvIHN1cHByZXNzIHdhcm5pbmdzLlxuXHQgICAqXG5cdCAgICogQHR5cGUge0Jvb2xlYW59XG5cdCAgICovXG5cdFxuXHQgIHNpbGVudDogZmFsc2UsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gdXNlIGFzeW5jIHJlbmRlcmluZy5cblx0ICAgKi9cblx0XG5cdCAgYXN5bmM6IHRydWUsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gd2FybiBhZ2FpbnN0IGVycm9ycyBjYXVnaHQgd2hlbiBldmFsdWF0aW5nXG5cdCAgICogZXhwcmVzc2lvbnMuXG5cdCAgICovXG5cdFxuXHQgIHdhcm5FeHByZXNzaW9uRXJyb3JzOiB0cnVlLFxuXHRcblx0ICAvKipcblx0ICAgKiBXaGV0aGVyIHRvIGFsbG93IGRldnRvb2xzIGluc3BlY3Rpb24uXG5cdCAgICogRGlzYWJsZWQgYnkgZGVmYXVsdCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cblx0ICAgKi9cblx0XG5cdCAgZGV2dG9vbHM6IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicsXG5cdFxuXHQgIC8qKlxuXHQgICAqIEludGVybmFsIGZsYWcgdG8gaW5kaWNhdGUgdGhlIGRlbGltaXRlcnMgaGF2ZSBiZWVuXG5cdCAgICogY2hhbmdlZC5cblx0ICAgKlxuXHQgICAqIEB0eXBlIHtCb29sZWFufVxuXHQgICAqL1xuXHRcblx0ICBfZGVsaW1pdGVyc0NoYW5nZWQ6IHRydWUsXG5cdFxuXHQgIC8qKlxuXHQgICAqIExpc3Qgb2YgYXNzZXQgdHlwZXMgdGhhdCBhIGNvbXBvbmVudCBjYW4gb3duLlxuXHQgICAqXG5cdCAgICogQHR5cGUge0FycmF5fVxuXHQgICAqL1xuXHRcblx0ICBfYXNzZXRUeXBlczogWydjb21wb25lbnQnLCAnZGlyZWN0aXZlJywgJ2VsZW1lbnREaXJlY3RpdmUnLCAnZmlsdGVyJywgJ3RyYW5zaXRpb24nLCAncGFydGlhbCddLFxuXHRcblx0ICAvKipcblx0ICAgKiBwcm9wIGJpbmRpbmcgbW9kZXNcblx0ICAgKi9cblx0XG5cdCAgX3Byb3BCaW5kaW5nTW9kZXM6IHtcblx0ICAgIE9ORV9XQVk6IDAsXG5cdCAgICBUV09fV0FZOiAxLFxuXHQgICAgT05FX1RJTUU6IDJcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBNYXggY2lyY3VsYXIgdXBkYXRlcyBhbGxvd2VkIGluIGEgYmF0Y2hlciBmbHVzaCBjeWNsZS5cblx0ICAgKi9cblx0XG5cdCAgX21heFVwZGF0ZUNvdW50OiAxMDBcblx0XG5cdH0sIHtcblx0ICBkZWxpbWl0ZXJzOiB7IC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW50ZXJwb2xhdGlvbiBkZWxpbWl0ZXJzLiBDaGFuZ2luZyB0aGVzZSB3b3VsZCB0cmlnZ2VyXG5cdCAgICAgICAgICAgICAgICAgKiB0aGUgdGV4dCBwYXJzZXIgdG8gcmUtY29tcGlsZSB0aGUgcmVndWxhciBleHByZXNzaW9ucy5cblx0ICAgICAgICAgICAgICAgICAqXG5cdCAgICAgICAgICAgICAgICAgKiBAdHlwZSB7QXJyYXk8U3RyaW5nPn1cblx0ICAgICAgICAgICAgICAgICAqL1xuXHRcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICByZXR1cm4gZGVsaW1pdGVycztcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcblx0ICAgICAgZGVsaW1pdGVycyA9IHZhbDtcblx0ICAgICAgY29tcGlsZVJlZ2V4KCk7XG5cdCAgICB9LFxuXHQgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgZW51bWVyYWJsZTogdHJ1ZVxuXHQgIH0sXG5cdCAgdW5zYWZlRGVsaW1pdGVyczoge1xuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIHJldHVybiB1bnNhZmVEZWxpbWl0ZXJzO1xuXHQgICAgfSxcblx0ICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuXHQgICAgICB1bnNhZmVEZWxpbWl0ZXJzID0gdmFsO1xuXHQgICAgICBjb21waWxlUmVnZXgoKTtcblx0ICAgIH0sXG5cdCAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICBlbnVtZXJhYmxlOiB0cnVlXG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciB3YXJuID0gdW5kZWZpbmVkO1xuXHR2YXIgZm9ybWF0Q29tcG9uZW50TmFtZSA9IHVuZGVmaW5lZDtcblx0XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgKGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBoYXNDb25zb2xlID0gdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnO1xuXHRcblx0ICAgIHdhcm4gPSBmdW5jdGlvbiAobXNnLCB2bSkge1xuXHQgICAgICBpZiAoaGFzQ29uc29sZSAmJiAhY29uZmlnLnNpbGVudCkge1xuXHQgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tWdWUgd2Fybl06ICcgKyBtc2cgKyAodm0gPyBmb3JtYXRDb21wb25lbnROYW1lKHZtKSA6ICcnKSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgZm9ybWF0Q29tcG9uZW50TmFtZSA9IGZ1bmN0aW9uICh2bSkge1xuXHQgICAgICB2YXIgbmFtZSA9IHZtLl9pc1Z1ZSA/IHZtLiRvcHRpb25zLm5hbWUgOiB2bS5uYW1lO1xuXHQgICAgICByZXR1cm4gbmFtZSA/ICcgKGZvdW5kIGluIGNvbXBvbmVudDogPCcgKyBoeXBoZW5hdGUobmFtZSkgKyAnPiknIDogJyc7XG5cdCAgICB9O1xuXHQgIH0pKCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBcHBlbmQgd2l0aCB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXBwZW5kV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XG5cdCAgYXBwbHlUcmFuc2l0aW9uKGVsLCAxLCBmdW5jdGlvbiAoKSB7XG5cdCAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH0sIHZtLCBjYik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbnNlcnRCZWZvcmUgd2l0aCB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYmVmb3JlV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XG5cdCAgYXBwbHlUcmFuc2l0aW9uKGVsLCAxLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBiZWZvcmUoZWwsIHRhcmdldCk7XG5cdCAgfSwgdm0sIGNiKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSB3aXRoIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZW1vdmVXaXRoVHJhbnNpdGlvbihlbCwgdm0sIGNiKSB7XG5cdCAgYXBwbHlUcmFuc2l0aW9uKGVsLCAtMSwgZnVuY3Rpb24gKCkge1xuXHQgICAgcmVtb3ZlKGVsKTtcblx0ICB9LCB2bSwgY2IpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXBwbHkgdHJhbnNpdGlvbnMgd2l0aCBhbiBvcGVyYXRpb24gY2FsbGJhY2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGRpcmVjdGlvblxuXHQgKiAgICAgICAgICAgICAgICAgIDE6IGVudGVyXG5cdCAqICAgICAgICAgICAgICAgICAtMTogbGVhdmVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSB0aGUgYWN0dWFsIERPTSBvcGVyYXRpb25cblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhcHBseVRyYW5zaXRpb24oZWwsIGRpcmVjdGlvbiwgb3AsIHZtLCBjYikge1xuXHQgIHZhciB0cmFuc2l0aW9uID0gZWwuX192X3RyYW5zO1xuXHQgIGlmICghdHJhbnNpdGlvbiB8fFxuXHQgIC8vIHNraXAgaWYgdGhlcmUgYXJlIG5vIGpzIGhvb2tzIGFuZCBDU1MgdHJhbnNpdGlvbiBpc1xuXHQgIC8vIG5vdCBzdXBwb3J0ZWRcblx0ICAhdHJhbnNpdGlvbi5ob29rcyAmJiAhdHJhbnNpdGlvbkVuZEV2ZW50IHx8XG5cdCAgLy8gc2tpcCB0cmFuc2l0aW9ucyBmb3IgaW5pdGlhbCBjb21waWxlXG5cdCAgIXZtLl9pc0NvbXBpbGVkIHx8XG5cdCAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIG1hbmlwdWxhdGVkIGJ5IGEgcGFyZW50IGRpcmVjdGl2ZVxuXHQgIC8vIGR1cmluZyB0aGUgcGFyZW50J3MgY29tcGlsYXRpb24gcGhhc2UsIHNraXAgdGhlXG5cdCAgLy8gYW5pbWF0aW9uLlxuXHQgIHZtLiRwYXJlbnQgJiYgIXZtLiRwYXJlbnQuX2lzQ29tcGlsZWQpIHtcblx0ICAgIG9wKCk7XG5cdCAgICBpZiAoY2IpIGNiKCk7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBhY3Rpb24gPSBkaXJlY3Rpb24gPiAwID8gJ2VudGVyJyA6ICdsZWF2ZSc7XG5cdCAgdHJhbnNpdGlvblthY3Rpb25dKG9wLCBjYik7XG5cdH1cblx0XG5cdHZhciB0cmFuc2l0aW9uID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgYXBwZW5kV2l0aFRyYW5zaXRpb246IGFwcGVuZFdpdGhUcmFuc2l0aW9uLFxuXHQgIGJlZm9yZVdpdGhUcmFuc2l0aW9uOiBiZWZvcmVXaXRoVHJhbnNpdGlvbixcblx0ICByZW1vdmVXaXRoVHJhbnNpdGlvbjogcmVtb3ZlV2l0aFRyYW5zaXRpb24sXG5cdCAgYXBwbHlUcmFuc2l0aW9uOiBhcHBseVRyYW5zaXRpb25cblx0fSk7XG5cdFxuXHQvKipcblx0ICogUXVlcnkgYW4gZWxlbWVudCBzZWxlY3RvciBpZiBpdCdzIG5vdCBhbiBlbGVtZW50IGFscmVhZHkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGVsXG5cdCAqIEByZXR1cm4ge0VsZW1lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcXVlcnkoZWwpIHtcblx0ICBpZiAodHlwZW9mIGVsID09PSAnc3RyaW5nJykge1xuXHQgICAgdmFyIHNlbGVjdG9yID0gZWw7XG5cdCAgICBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpO1xuXHQgICAgaWYgKCFlbCkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0Nhbm5vdCBmaW5kIGVsZW1lbnQ6ICcgKyBzZWxlY3Rvcik7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBlbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGEgbm9kZSBpcyBpbiB0aGUgZG9jdW1lbnQuXG5cdCAqIE5vdGU6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyBzaG91bGQgd29yayBoZXJlXG5cdCAqIGJ1dCBhbHdheXMgcmV0dXJucyBmYWxzZSBmb3IgY29tbWVudCBub2RlcyBpbiBwaGFudG9tanMsXG5cdCAqIG1ha2luZyB1bml0IHRlc3RzIGRpZmZpY3VsdC4gVGhpcyBpcyBmaXhlZCBieSBkb2luZyB0aGVcblx0ICogY29udGFpbnMoKSBjaGVjayBvbiB0aGUgbm9kZSdzIHBhcmVudE5vZGUgaW5zdGVhZCBvZlxuXHQgKiB0aGUgbm9kZSBpdHNlbGYuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGluRG9jKG5vZGUpIHtcblx0ICBpZiAoIW5vZGUpIHJldHVybiBmYWxzZTtcblx0ICB2YXIgZG9jID0gbm9kZS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblx0ICB2YXIgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuXHQgIHJldHVybiBkb2MgPT09IG5vZGUgfHwgZG9jID09PSBwYXJlbnQgfHwgISEocGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSA9PT0gMSAmJiBkb2MuY29udGFpbnMocGFyZW50KSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgYW5kIHJlbW92ZSBhbiBhdHRyaWJ1dGUgZnJvbSBhIG5vZGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gX2F0dHJcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRBdHRyKG5vZGUsIF9hdHRyKSB7XG5cdCAgdmFyIHZhbCA9IG5vZGUuZ2V0QXR0cmlidXRlKF9hdHRyKTtcblx0ICBpZiAodmFsICE9PSBudWxsKSB7XG5cdCAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShfYXR0cik7XG5cdCAgfVxuXHQgIHJldHVybiB2YWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgYW4gYXR0cmlidXRlIHdpdGggY29sb24gb3Igdi1iaW5kOiBwcmVmaXguXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd8bnVsbH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRCaW5kQXR0cihub2RlLCBuYW1lKSB7XG5cdCAgdmFyIHZhbCA9IGdldEF0dHIobm9kZSwgJzonICsgbmFtZSk7XG5cdCAgaWYgKHZhbCA9PT0gbnVsbCkge1xuXHQgICAgdmFsID0gZ2V0QXR0cihub2RlLCAndi1iaW5kOicgKyBuYW1lKTtcblx0ICB9XG5cdCAgcmV0dXJuIHZhbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIHRoZSBwcmVzZW5jZSBvZiBhIGJpbmQgYXR0cmlidXRlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBoYXNCaW5kQXR0cihub2RlLCBuYW1lKSB7XG5cdCAgcmV0dXJuIG5vZGUuaGFzQXR0cmlidXRlKG5hbWUpIHx8IG5vZGUuaGFzQXR0cmlidXRlKCc6JyArIG5hbWUpIHx8IG5vZGUuaGFzQXR0cmlidXRlKCd2LWJpbmQ6JyArIG5hbWUpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSW5zZXJ0IGVsIGJlZm9yZSB0YXJnZXRcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGJlZm9yZShlbCwgdGFyZ2V0KSB7XG5cdCAgdGFyZ2V0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsLCB0YXJnZXQpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSW5zZXJ0IGVsIGFmdGVyIHRhcmdldFxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYWZ0ZXIoZWwsIHRhcmdldCkge1xuXHQgIGlmICh0YXJnZXQubmV4dFNpYmxpbmcpIHtcblx0ICAgIGJlZm9yZShlbCwgdGFyZ2V0Lm5leHRTaWJsaW5nKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGFyZ2V0LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBlbCBmcm9tIERPTVxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlKGVsKSB7XG5cdCAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcmVwZW5kIGVsIHRvIHRhcmdldFxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJlcGVuZChlbCwgdGFyZ2V0KSB7XG5cdCAgaWYgKHRhcmdldC5maXJzdENoaWxkKSB7XG5cdCAgICBiZWZvcmUoZWwsIHRhcmdldC5maXJzdENoaWxkKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZXBsYWNlIHRhcmdldCB3aXRoIGVsXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXBsYWNlKHRhcmdldCwgZWwpIHtcblx0ICB2YXIgcGFyZW50ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG5cdCAgaWYgKHBhcmVudCkge1xuXHQgICAgcGFyZW50LnJlcGxhY2VDaGlsZChlbCwgdGFyZ2V0KTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBZGQgZXZlbnQgbGlzdGVuZXIgc2hvcnRoYW5kLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VDYXB0dXJlXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG9uKGVsLCBldmVudCwgY2IsIHVzZUNhcHR1cmUpIHtcblx0ICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBjYiwgdXNlQ2FwdHVyZSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgZXZlbnQgbGlzdGVuZXIgc2hvcnRoYW5kLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG9mZihlbCwgZXZlbnQsIGNiKSB7XG5cdCAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgY2IpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9yIElFOSBjb21wYXQ6IHdoZW4gYm90aCBjbGFzcyBhbmQgOmNsYXNzIGFyZSBwcmVzZW50XG5cdCAqIGdldEF0dHJpYnV0ZSgnY2xhc3MnKSByZXR1cm5zIHdyb25nIHZhbHVlLi4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldENsYXNzKGVsKSB7XG5cdCAgdmFyIGNsYXNzbmFtZSA9IGVsLmNsYXNzTmFtZTtcblx0ICBpZiAodHlwZW9mIGNsYXNzbmFtZSA9PT0gJ29iamVjdCcpIHtcblx0ICAgIGNsYXNzbmFtZSA9IGNsYXNzbmFtZS5iYXNlVmFsIHx8ICcnO1xuXHQgIH1cblx0ICByZXR1cm4gY2xhc3NuYW1lO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSW4gSUU5LCBzZXRBdHRyaWJ1dGUoJ2NsYXNzJykgd2lsbCByZXN1bHQgaW4gZW1wdHkgY2xhc3Ncblx0ICogaWYgdGhlIGVsZW1lbnQgYWxzbyBoYXMgdGhlIDpjbGFzcyBhdHRyaWJ1dGU7IEhvd2V2ZXIgaW5cblx0ICogUGhhbnRvbUpTLCBzZXR0aW5nIGBjbGFzc05hbWVgIGRvZXMgbm90IHdvcmsgb24gU1ZHIGVsZW1lbnRzLi4uXG5cdCAqIFNvIHdlIGhhdmUgdG8gZG8gYSBjb25kaXRpb25hbCBjaGVjayBoZXJlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzZXRDbGFzcyhlbCwgY2xzKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGlzSUU5ICYmICEvc3ZnJC8udGVzdChlbC5uYW1lc3BhY2VVUkkpKSB7XG5cdCAgICBlbC5jbGFzc05hbWUgPSBjbHM7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbHMpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEFkZCBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIElFICYgU1ZHXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFkZENsYXNzKGVsLCBjbHMpIHtcblx0ICBpZiAoZWwuY2xhc3NMaXN0KSB7XG5cdCAgICBlbC5jbGFzc0xpc3QuYWRkKGNscyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBjdXIgPSAnICcgKyBnZXRDbGFzcyhlbCkgKyAnICc7XG5cdCAgICBpZiAoY3VyLmluZGV4T2YoJyAnICsgY2xzICsgJyAnKSA8IDApIHtcblx0ICAgICAgc2V0Q2xhc3MoZWwsIChjdXIgKyBjbHMpLnRyaW0oKSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGNsYXNzIHdpdGggY29tcGF0aWJpbGl0eSBmb3IgSUUgJiBTVkdcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY2xzXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWwsIGNscykge1xuXHQgIGlmIChlbC5jbGFzc0xpc3QpIHtcblx0ICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGN1ciA9ICcgJyArIGdldENsYXNzKGVsKSArICcgJztcblx0ICAgIHZhciB0YXIgPSAnICcgKyBjbHMgKyAnICc7XG5cdCAgICB3aGlsZSAoY3VyLmluZGV4T2YodGFyKSA+PSAwKSB7XG5cdCAgICAgIGN1ciA9IGN1ci5yZXBsYWNlKHRhciwgJyAnKTtcblx0ICAgIH1cblx0ICAgIHNldENsYXNzKGVsLCBjdXIudHJpbSgpKTtcblx0ICB9XG5cdCAgaWYgKCFlbC5jbGFzc05hbWUpIHtcblx0ICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFeHRyYWN0IHJhdyBjb250ZW50IGluc2lkZSBhbiBlbGVtZW50IGludG8gYSB0ZW1wb3Jhcnlcblx0ICogY29udGFpbmVyIGRpdlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gYXNGcmFnbWVudFxuXHQgKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZXh0cmFjdENvbnRlbnQoZWwsIGFzRnJhZ21lbnQpIHtcblx0ICB2YXIgY2hpbGQ7XG5cdCAgdmFyIHJhd0NvbnRlbnQ7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGlzVGVtcGxhdGUoZWwpICYmIGlzRnJhZ21lbnQoZWwuY29udGVudCkpIHtcblx0ICAgIGVsID0gZWwuY29udGVudDtcblx0ICB9XG5cdCAgaWYgKGVsLmhhc0NoaWxkTm9kZXMoKSkge1xuXHQgICAgdHJpbU5vZGUoZWwpO1xuXHQgICAgcmF3Q29udGVudCA9IGFzRnJhZ21lbnQgPyBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICB3aGlsZSAoY2hpbGQgPSBlbC5maXJzdENoaWxkKSB7XG5cdCAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgICAgcmF3Q29udGVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByYXdDb250ZW50O1xuXHR9XG5cdFxuXHQvKipcblx0ICogVHJpbSBwb3NzaWJsZSBlbXB0eSBoZWFkL3RhaWwgdGV4dCBhbmQgY29tbWVudFxuXHQgKiBub2RlcyBpbnNpZGUgYSBwYXJlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRyaW1Ob2RlKG5vZGUpIHtcblx0ICB2YXIgY2hpbGQ7XG5cdCAgLyogZXNsaW50LWRpc2FibGUgbm8tc2VxdWVuY2VzICovXG5cdCAgd2hpbGUgKChjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZCwgaXNUcmltbWFibGUoY2hpbGQpKSkge1xuXHQgICAgbm9kZS5yZW1vdmVDaGlsZChjaGlsZCk7XG5cdCAgfVxuXHQgIHdoaWxlICgoY2hpbGQgPSBub2RlLmxhc3RDaGlsZCwgaXNUcmltbWFibGUoY2hpbGQpKSkge1xuXHQgICAgbm9kZS5yZW1vdmVDaGlsZChjaGlsZCk7XG5cdCAgfVxuXHQgIC8qIGVzbGludC1lbmFibGUgbm8tc2VxdWVuY2VzICovXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzVHJpbW1hYmxlKG5vZGUpIHtcblx0ICByZXR1cm4gbm9kZSAmJiAobm9kZS5ub2RlVHlwZSA9PT0gMyAmJiAhbm9kZS5kYXRhLnRyaW0oKSB8fCBub2RlLm5vZGVUeXBlID09PSA4KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSB0ZW1wbGF0ZSB0YWcuXG5cdCAqIE5vdGUgaWYgdGhlIHRlbXBsYXRlIGFwcGVhcnMgaW5zaWRlIGFuIFNWRyBpdHMgdGFnTmFtZVxuXHQgKiB3aWxsIGJlIGluIGxvd2VyY2FzZS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzVGVtcGxhdGUoZWwpIHtcblx0ICByZXR1cm4gZWwudGFnTmFtZSAmJiBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0ZW1wbGF0ZSc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGUgYW4gXCJhbmNob3JcIiBmb3IgcGVyZm9ybWluZyBkb20gaW5zZXJ0aW9uL3JlbW92YWxzLlxuXHQgKiBUaGlzIGlzIHVzZWQgaW4gYSBudW1iZXIgb2Ygc2NlbmFyaW9zOlxuXHQgKiAtIGZyYWdtZW50IGluc3RhbmNlXG5cdCAqIC0gdi1odG1sXG5cdCAqIC0gdi1pZlxuXHQgKiAtIHYtZm9yXG5cdCAqIC0gY29tcG9uZW50XG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50XG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gcGVyc2lzdCAtIElFIHRyYXNoZXMgZW1wdHkgdGV4dE5vZGVzIG9uXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lTm9kZSh0cnVlKSwgc28gaW4gY2VydGFpblxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlcyB0aGUgYW5jaG9yIG5lZWRzIHRvIGJlXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbi1lbXB0eSB0byBiZSBwZXJzaXN0ZWQgaW5cblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVzLlxuXHQgKiBAcmV0dXJuIHtDb21tZW50fFRleHR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQW5jaG9yKGNvbnRlbnQsIHBlcnNpc3QpIHtcblx0ICB2YXIgYW5jaG9yID0gY29uZmlnLmRlYnVnID8gZG9jdW1lbnQuY3JlYXRlQ29tbWVudChjb250ZW50KSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHBlcnNpc3QgPyAnICcgOiAnJyk7XG5cdCAgYW5jaG9yLl9fdl9hbmNob3IgPSB0cnVlO1xuXHQgIHJldHVybiBhbmNob3I7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGaW5kIGEgY29tcG9uZW50IHJlZiBhdHRyaWJ1dGUgdGhhdCBzdGFydHMgd2l0aCAkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGVcblx0ICogQHJldHVybiB7U3RyaW5nfHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHR2YXIgcmVmUkUgPSAvXnYtcmVmOi87XG5cdFxuXHRmdW5jdGlvbiBmaW5kUmVmKG5vZGUpIHtcblx0ICBpZiAobm9kZS5oYXNBdHRyaWJ1dGVzKCkpIHtcblx0ICAgIHZhciBhdHRycyA9IG5vZGUuYXR0cmlidXRlcztcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBuYW1lID0gYXR0cnNbaV0ubmFtZTtcblx0ICAgICAgaWYgKHJlZlJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICByZXR1cm4gY2FtZWxpemUobmFtZS5yZXBsYWNlKHJlZlJFLCAnJykpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogTWFwIGEgZnVuY3Rpb24gdG8gYSByYW5nZSBvZiBub2RlcyAuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge05vZGV9IGVuZFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1hcE5vZGVSYW5nZShub2RlLCBlbmQsIG9wKSB7XG5cdCAgdmFyIG5leHQ7XG5cdCAgd2hpbGUgKG5vZGUgIT09IGVuZCkge1xuXHQgICAgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG5cdCAgICBvcChub2RlKTtcblx0ICAgIG5vZGUgPSBuZXh0O1xuXHQgIH1cblx0ICBvcChlbmQpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGEgcmFuZ2Ugb2Ygbm9kZXMgd2l0aCB0cmFuc2l0aW9uLCBzdG9yZVxuXHQgKiB0aGUgbm9kZXMgaW4gYSBmcmFnbWVudCB3aXRoIGNvcnJlY3Qgb3JkZXJpbmcsXG5cdCAqIGFuZCBjYWxsIGNhbGxiYWNrIHdoZW4gZG9uZS5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBzdGFydFxuXHQgKiBAcGFyYW0ge05vZGV9IGVuZFxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlTm9kZVJhbmdlKHN0YXJ0LCBlbmQsIHZtLCBmcmFnLCBjYikge1xuXHQgIHZhciBkb25lID0gZmFsc2U7XG5cdCAgdmFyIHJlbW92ZWQgPSAwO1xuXHQgIHZhciBub2RlcyA9IFtdO1xuXHQgIG1hcE5vZGVSYW5nZShzdGFydCwgZW5kLCBmdW5jdGlvbiAobm9kZSkge1xuXHQgICAgaWYgKG5vZGUgPT09IGVuZCkgZG9uZSA9IHRydWU7XG5cdCAgICBub2Rlcy5wdXNoKG5vZGUpO1xuXHQgICAgcmVtb3ZlV2l0aFRyYW5zaXRpb24obm9kZSwgdm0sIG9uUmVtb3ZlZCk7XG5cdCAgfSk7XG5cdCAgZnVuY3Rpb24gb25SZW1vdmVkKCkge1xuXHQgICAgcmVtb3ZlZCsrO1xuXHQgICAgaWYgKGRvbmUgJiYgcmVtb3ZlZCA+PSBub2Rlcy5sZW5ndGgpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZXNbaV0pO1xuXHQgICAgICB9XG5cdCAgICAgIGNiICYmIGNiKCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYSBub2RlIGlzIGEgRG9jdW1lbnRGcmFnbWVudC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNGcmFnbWVudChub2RlKSB7XG5cdCAgcmV0dXJuIG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMTE7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgb3V0ZXJIVE1MIG9mIGVsZW1lbnRzLCB0YWtpbmcgY2FyZVxuXHQgKiBvZiBTVkcgZWxlbWVudHMgaW4gSUUgYXMgd2VsbC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0T3V0ZXJIVE1MKGVsKSB7XG5cdCAgaWYgKGVsLm91dGVySFRNTCkge1xuXHQgICAgcmV0dXJuIGVsLm91dGVySFRNTDtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVsLmNsb25lTm9kZSh0cnVlKSk7XG5cdCAgICByZXR1cm4gY29udGFpbmVyLmlubmVySFRNTDtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBjb21tb25UYWdSRSA9IC9eKGRpdnxwfHNwYW58aW1nfGF8YnxpfGJyfHVsfG9sfGxpfGgxfGgyfGgzfGg0fGg1fGg2fGNvZGV8cHJlfHRhYmxlfHRofHRkfHRyfGZvcm18bGFiZWx8aW5wdXR8c2VsZWN0fG9wdGlvbnxuYXZ8YXJ0aWNsZXxzZWN0aW9ufGhlYWRlcnxmb290ZXIpJC9pO1xuXHR2YXIgcmVzZXJ2ZWRUYWdSRSA9IC9eKHNsb3R8cGFydGlhbHxjb21wb25lbnQpJC9pO1xuXHRcblx0dmFyIGlzVW5rbm93bkVsZW1lbnQgPSB1bmRlZmluZWQ7XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgaXNVbmtub3duRWxlbWVudCA9IGZ1bmN0aW9uIChlbCwgdGFnKSB7XG5cdCAgICBpZiAodGFnLmluZGV4T2YoJy0nKSA+IC0xKSB7XG5cdCAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI4MjEwMzY0LzEwNzAyNDRcblx0ICAgICAgcmV0dXJuIGVsLmNvbnN0cnVjdG9yID09PSB3aW5kb3cuSFRNTFVua25vd25FbGVtZW50IHx8IGVsLmNvbnN0cnVjdG9yID09PSB3aW5kb3cuSFRNTEVsZW1lbnQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gKC9IVE1MVW5rbm93bkVsZW1lbnQvLnRlc3QoZWwudG9TdHJpbmcoKSkgJiZcblx0ICAgICAgICAvLyBDaHJvbWUgcmV0dXJucyB1bmtub3duIGZvciBzZXZlcmFsIEhUTUw1IGVsZW1lbnRzLlxuXHQgICAgICAgIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD01NDA1MjZcblx0ICAgICAgICAvLyBGaXJlZm94IHJldHVybnMgdW5rbm93biBmb3Igc29tZSBcIkludGVyYWN0aXZlIGVsZW1lbnRzLlwiXG5cdCAgICAgICAgIS9eKGRhdGF8dGltZXxydGN8cmJ8ZGV0YWlsc3xkaWFsb2d8c3VtbWFyeSkkLy50ZXN0KHRhZylcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIGNvbXBvbmVudCwgaWYgeWVzIHJldHVybiBpdHNcblx0ICogY29tcG9uZW50IGlkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2hlY2tDb21wb25lbnRBdHRyKGVsLCBvcHRpb25zKSB7XG5cdCAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblx0ICB2YXIgaGFzQXR0cnMgPSBlbC5oYXNBdHRyaWJ1dGVzKCk7XG5cdCAgaWYgKCFjb21tb25UYWdSRS50ZXN0KHRhZykgJiYgIXJlc2VydmVkVGFnUkUudGVzdCh0YWcpKSB7XG5cdCAgICBpZiAocmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgdGFnKSkge1xuXHQgICAgICByZXR1cm4geyBpZDogdGFnIH07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgaXMgPSBoYXNBdHRycyAmJiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpO1xuXHQgICAgICBpZiAoaXMpIHtcblx0ICAgICAgICByZXR1cm4gaXM7XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHZhciBleHBlY3RlZFRhZyA9IG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXAgJiYgb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcFt0YWddO1xuXHQgICAgICAgIGlmIChleHBlY3RlZFRhZykge1xuXHQgICAgICAgICAgd2FybignVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtICcgKyAnZGlkIHlvdSBtZWFuIDwnICsgZXhwZWN0ZWRUYWcgKyAnPj8gJyArICdIVE1MIGlzIGNhc2UtaW5zZW5zaXRpdmUsIHJlbWVtYmVyIHRvIHVzZSBrZWJhYi1jYXNlIGluIHRlbXBsYXRlcy4nKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGlzVW5rbm93bkVsZW1lbnQoZWwsIHRhZykpIHtcblx0ICAgICAgICAgIHdhcm4oJ1Vua25vd24gY3VzdG9tIGVsZW1lbnQ6IDwnICsgdGFnICsgJz4gLSBkaWQgeW91ICcgKyAncmVnaXN0ZXIgdGhlIGNvbXBvbmVudCBjb3JyZWN0bHk/IEZvciByZWN1cnNpdmUgY29tcG9uZW50cywgJyArICdtYWtlIHN1cmUgdG8gcHJvdmlkZSB0aGUgXCJuYW1lXCIgb3B0aW9uLicpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaGFzQXR0cnMpIHtcblx0ICAgIHJldHVybiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCBcImlzXCIgYmluZGluZyBmcm9tIGFuIGVsZW1lbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpIHtcblx0ICAvLyBkeW5hbWljIHN5bnRheFxuXHQgIHZhciBleHAgPSBlbC5nZXRBdHRyaWJ1dGUoJ2lzJyk7XG5cdCAgaWYgKGV4cCAhPSBudWxsKSB7XG5cdCAgICBpZiAocmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgZXhwKSkge1xuXHQgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2lzJyk7XG5cdCAgICAgIHJldHVybiB7IGlkOiBleHAgfTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgZXhwID0gZ2V0QmluZEF0dHIoZWwsICdpcycpO1xuXHQgICAgaWYgKGV4cCAhPSBudWxsKSB7XG5cdCAgICAgIHJldHVybiB7IGlkOiBleHAsIGR5bmFtaWM6IHRydWUgfTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBPcHRpb24gb3ZlcndyaXRpbmcgc3RyYXRlZ2llcyBhcmUgZnVuY3Rpb25zIHRoYXQgaGFuZGxlXG5cdCAqIGhvdyB0byBtZXJnZSBhIHBhcmVudCBvcHRpb24gdmFsdWUgYW5kIGEgY2hpbGQgb3B0aW9uXG5cdCAqIHZhbHVlIGludG8gdGhlIGZpbmFsIHZhbHVlLlxuXHQgKlxuXHQgKiBBbGwgc3RyYXRlZ3kgZnVuY3Rpb25zIGZvbGxvdyB0aGUgc2FtZSBzaWduYXR1cmU6XG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gcGFyZW50VmFsXG5cdCAqIEBwYXJhbSB7Kn0gY2hpbGRWYWxcblx0ICogQHBhcmFtIHtWdWV9IFt2bV1cblx0ICovXG5cdFxuXHR2YXIgc3RyYXRzID0gY29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdFxuXHQvKipcblx0ICogSGVscGVyIHRoYXQgcmVjdXJzaXZlbHkgbWVyZ2VzIHR3byBkYXRhIG9iamVjdHMgdG9nZXRoZXIuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWVyZ2VEYXRhKHRvLCBmcm9tKSB7XG5cdCAgdmFyIGtleSwgdG9WYWwsIGZyb21WYWw7XG5cdCAgZm9yIChrZXkgaW4gZnJvbSkge1xuXHQgICAgdG9WYWwgPSB0b1trZXldO1xuXHQgICAgZnJvbVZhbCA9IGZyb21ba2V5XTtcblx0ICAgIGlmICghaGFzT3duKHRvLCBrZXkpKSB7XG5cdCAgICAgIHNldCh0bywga2V5LCBmcm9tVmFsKTtcblx0ICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodG9WYWwpICYmIGlzT2JqZWN0KGZyb21WYWwpKSB7XG5cdCAgICAgIG1lcmdlRGF0YSh0b1ZhbCwgZnJvbVZhbCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0bztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERhdGFcblx0ICovXG5cdFxuXHRzdHJhdHMuZGF0YSA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSkge1xuXHQgIGlmICghdm0pIHtcblx0ICAgIC8vIGluIGEgVnVlLmV4dGVuZCBtZXJnZSwgYm90aCBzaG91bGQgYmUgZnVuY3Rpb25zXG5cdCAgICBpZiAoIWNoaWxkVmFsKSB7XG5cdCAgICAgIHJldHVybiBwYXJlbnRWYWw7XG5cdCAgICB9XG5cdCAgICBpZiAodHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVGhlIFwiZGF0YVwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICsgJ3RoYXQgcmV0dXJucyBhIHBlci1pbnN0YW5jZSB2YWx1ZSBpbiBjb21wb25lbnQgJyArICdkZWZpbml0aW9ucy4nLCB2bSk7XG5cdCAgICAgIHJldHVybiBwYXJlbnRWYWw7XG5cdCAgICB9XG5cdCAgICBpZiAoIXBhcmVudFZhbCkge1xuXHQgICAgICByZXR1cm4gY2hpbGRWYWw7XG5cdCAgICB9XG5cdCAgICAvLyB3aGVuIHBhcmVudFZhbCAmIGNoaWxkVmFsIGFyZSBib3RoIHByZXNlbnQsXG5cdCAgICAvLyB3ZSBuZWVkIHRvIHJldHVybiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGVcblx0ICAgIC8vIG1lcmdlZCByZXN1bHQgb2YgYm90aCBmdW5jdGlvbnMuLi4gbm8gbmVlZCB0b1xuXHQgICAgLy8gY2hlY2sgaWYgcGFyZW50VmFsIGlzIGEgZnVuY3Rpb24gaGVyZSBiZWNhdXNlXG5cdCAgICAvLyBpdCBoYXMgdG8gYmUgYSBmdW5jdGlvbiB0byBwYXNzIHByZXZpb3VzIG1lcmdlcy5cblx0ICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWREYXRhRm4oKSB7XG5cdCAgICAgIHJldHVybiBtZXJnZURhdGEoY2hpbGRWYWwuY2FsbCh0aGlzKSwgcGFyZW50VmFsLmNhbGwodGhpcykpO1xuXHQgICAgfTtcblx0ICB9IGVsc2UgaWYgKHBhcmVudFZhbCB8fCBjaGlsZFZhbCkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZEluc3RhbmNlRGF0YUZuKCkge1xuXHQgICAgICAvLyBpbnN0YW5jZSBtZXJnZVxuXHQgICAgICB2YXIgaW5zdGFuY2VEYXRhID0gdHlwZW9mIGNoaWxkVmFsID09PSAnZnVuY3Rpb24nID8gY2hpbGRWYWwuY2FsbCh2bSkgOiBjaGlsZFZhbDtcblx0ICAgICAgdmFyIGRlZmF1bHREYXRhID0gdHlwZW9mIHBhcmVudFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IHBhcmVudFZhbC5jYWxsKHZtKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgaWYgKGluc3RhbmNlRGF0YSkge1xuXHQgICAgICAgIHJldHVybiBtZXJnZURhdGEoaW5zdGFuY2VEYXRhLCBkZWZhdWx0RGF0YSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGRlZmF1bHREYXRhO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBFbFxuXHQgKi9cblx0XG5cdHN0cmF0cy5lbCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSkge1xuXHQgIGlmICghdm0gJiYgY2hpbGRWYWwgJiYgdHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1RoZSBcImVsXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgKyAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICsgJ2RlZmluaXRpb25zLicsIHZtKTtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIHJldCA9IGNoaWxkVmFsIHx8IHBhcmVudFZhbDtcblx0ICAvLyBpbnZva2UgdGhlIGVsZW1lbnQgZmFjdG9yeSBpZiB0aGlzIGlzIGluc3RhbmNlIG1lcmdlXG5cdCAgcmV0dXJuIHZtICYmIHR5cGVvZiByZXQgPT09ICdmdW5jdGlvbicgPyByZXQuY2FsbCh2bSkgOiByZXQ7XG5cdH07XG5cdFxuXHQvKipcblx0ICogSG9va3MgYW5kIHBhcmFtIGF0dHJpYnV0ZXMgYXJlIG1lcmdlZCBhcyBhcnJheXMuXG5cdCAqL1xuXHRcblx0c3RyYXRzLmluaXQgPSBzdHJhdHMuY3JlYXRlZCA9IHN0cmF0cy5yZWFkeSA9IHN0cmF0cy5hdHRhY2hlZCA9IHN0cmF0cy5kZXRhY2hlZCA9IHN0cmF0cy5iZWZvcmVDb21waWxlID0gc3RyYXRzLmNvbXBpbGVkID0gc3RyYXRzLmJlZm9yZURlc3Ryb3kgPSBzdHJhdHMuZGVzdHJveWVkID0gc3RyYXRzLmFjdGl2YXRlID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcblx0ICByZXR1cm4gY2hpbGRWYWwgPyBwYXJlbnRWYWwgPyBwYXJlbnRWYWwuY29uY2F0KGNoaWxkVmFsKSA6IGlzQXJyYXkoY2hpbGRWYWwpID8gY2hpbGRWYWwgOiBbY2hpbGRWYWxdIDogcGFyZW50VmFsO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEFzc2V0c1xuXHQgKlxuXHQgKiBXaGVuIGEgdm0gaXMgcHJlc2VudCAoaW5zdGFuY2UgY3JlYXRpb24pLCB3ZSBuZWVkIHRvIGRvXG5cdCAqIGEgdGhyZWUtd2F5IG1lcmdlIGJldHdlZW4gY29uc3RydWN0b3Igb3B0aW9ucywgaW5zdGFuY2Vcblx0ICogb3B0aW9ucyBhbmQgcGFyZW50IG9wdGlvbnMuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWVyZ2VBc3NldHMocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFZhbCB8fCBudWxsKTtcblx0ICByZXR1cm4gY2hpbGRWYWwgPyBleHRlbmQocmVzLCBndWFyZEFycmF5QXNzZXRzKGNoaWxkVmFsKSkgOiByZXM7XG5cdH1cblx0XG5cdGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgc3RyYXRzW3R5cGUgKyAncyddID0gbWVyZ2VBc3NldHM7XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIEV2ZW50cyAmIFdhdGNoZXJzLlxuXHQgKlxuXHQgKiBFdmVudHMgJiB3YXRjaGVycyBoYXNoZXMgc2hvdWxkIG5vdCBvdmVyd3JpdGUgb25lXG5cdCAqIGFub3RoZXIsIHNvIHdlIG1lcmdlIHRoZW0gYXMgYXJyYXlzLlxuXHQgKi9cblx0XG5cdHN0cmF0cy53YXRjaCA9IHN0cmF0cy5ldmVudHMgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG5cdCAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbDtcblx0ICB2YXIgcmV0ID0ge307XG5cdCAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcblx0ICBmb3IgKHZhciBrZXkgaW4gY2hpbGRWYWwpIHtcblx0ICAgIHZhciBwYXJlbnQgPSByZXRba2V5XTtcblx0ICAgIHZhciBjaGlsZCA9IGNoaWxkVmFsW2tleV07XG5cdCAgICBpZiAocGFyZW50ICYmICFpc0FycmF5KHBhcmVudCkpIHtcblx0ICAgICAgcGFyZW50ID0gW3BhcmVudF07XG5cdCAgICB9XG5cdCAgICByZXRba2V5XSA9IHBhcmVudCA/IHBhcmVudC5jb25jYXQoY2hpbGQpIDogW2NoaWxkXTtcblx0ICB9XG5cdCAgcmV0dXJuIHJldDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBPdGhlciBvYmplY3QgaGFzaGVzLlxuXHQgKi9cblx0XG5cdHN0cmF0cy5wcm9wcyA9IHN0cmF0cy5tZXRob2RzID0gc3RyYXRzLmNvbXB1dGVkID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcblx0ICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsO1xuXHQgIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG5cdCAgdmFyIHJldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcblx0ICBleHRlbmQocmV0LCBjaGlsZFZhbCk7XG5cdCAgcmV0dXJuIHJldDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBEZWZhdWx0IHN0cmF0ZWd5LlxuXHQgKi9cblx0XG5cdHZhciBkZWZhdWx0U3RyYXQgPSBmdW5jdGlvbiBkZWZhdWx0U3RyYXQocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgIHJldHVybiBjaGlsZFZhbCA9PT0gdW5kZWZpbmVkID8gcGFyZW50VmFsIDogY2hpbGRWYWw7XG5cdH07XG5cdFxuXHQvKipcblx0ICogTWFrZSBzdXJlIGNvbXBvbmVudCBvcHRpb25zIGdldCBjb252ZXJ0ZWQgdG8gYWN0dWFsXG5cdCAqIGNvbnN0cnVjdG9ycy5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBndWFyZENvbXBvbmVudHMob3B0aW9ucykge1xuXHQgIGlmIChvcHRpb25zLmNvbXBvbmVudHMpIHtcblx0ICAgIHZhciBjb21wb25lbnRzID0gb3B0aW9ucy5jb21wb25lbnRzID0gZ3VhcmRBcnJheUFzc2V0cyhvcHRpb25zLmNvbXBvbmVudHMpO1xuXHQgICAgdmFyIGlkcyA9IE9iamVjdC5rZXlzKGNvbXBvbmVudHMpO1xuXHQgICAgdmFyIGRlZjtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIHZhciBtYXAgPSBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwID0ge307XG5cdCAgICB9XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGlkcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIGtleSA9IGlkc1tpXTtcblx0ICAgICAgaWYgKGNvbW1vblRhZ1JFLnRlc3Qoa2V5KSB8fCByZXNlcnZlZFRhZ1JFLnRlc3Qoa2V5KSkge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCAnICsgJ2lkOiAnICsga2V5KTtcblx0ICAgICAgICBjb250aW51ZTtcblx0ICAgICAgfVxuXHQgICAgICAvLyByZWNvcmQgYSBhbGwgbG93ZXJjYXNlIDwtPiBrZWJhYi1jYXNlIG1hcHBpbmcgZm9yXG5cdCAgICAgIC8vIHBvc3NpYmxlIGN1c3RvbSBlbGVtZW50IGNhc2UgZXJyb3Igd2FybmluZ1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIG1hcFtrZXkucmVwbGFjZSgvLS9nLCAnJykudG9Mb3dlckNhc2UoKV0gPSBoeXBoZW5hdGUoa2V5KTtcblx0ICAgICAgfVxuXHQgICAgICBkZWYgPSBjb21wb25lbnRzW2tleV07XG5cdCAgICAgIGlmIChpc1BsYWluT2JqZWN0KGRlZikpIHtcblx0ICAgICAgICBjb21wb25lbnRzW2tleV0gPSBWdWUuZXh0ZW5kKGRlZik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFbnN1cmUgYWxsIHByb3BzIG9wdGlvbiBzeW50YXggYXJlIG5vcm1hbGl6ZWQgaW50byB0aGVcblx0ICogT2JqZWN0LWJhc2VkIGZvcm1hdC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBndWFyZFByb3BzKG9wdGlvbnMpIHtcblx0ICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuXHQgIHZhciBpLCB2YWw7XG5cdCAgaWYgKGlzQXJyYXkocHJvcHMpKSB7XG5cdCAgICBvcHRpb25zLnByb3BzID0ge307XG5cdCAgICBpID0gcHJvcHMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YWwgPSBwcm9wc1tpXTtcblx0ICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgb3B0aW9ucy5wcm9wc1t2YWxdID0gbnVsbDtcblx0ICAgICAgfSBlbHNlIGlmICh2YWwubmFtZSkge1xuXHQgICAgICAgIG9wdGlvbnMucHJvcHNbdmFsLm5hbWVdID0gdmFsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHByb3BzKSkge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wcyk7XG5cdCAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhbCA9IHByb3BzW2tleXNbaV1dO1xuXHQgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIHByb3BzW2tleXNbaV1dID0geyB0eXBlOiB2YWwgfTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEd1YXJkIGFuIEFycmF5LWZvcm1hdCBhc3NldHMgb3B0aW9uIGFuZCBjb252ZXJ0ZWQgaXRcblx0ICogaW50byB0aGUga2V5LXZhbHVlIE9iamVjdCBmb3JtYXQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBhc3NldHNcblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGd1YXJkQXJyYXlBc3NldHMoYXNzZXRzKSB7XG5cdCAgaWYgKGlzQXJyYXkoYXNzZXRzKSkge1xuXHQgICAgdmFyIHJlcyA9IHt9O1xuXHQgICAgdmFyIGkgPSBhc3NldHMubGVuZ3RoO1xuXHQgICAgdmFyIGFzc2V0O1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBhc3NldCA9IGFzc2V0c1tpXTtcblx0ICAgICAgdmFyIGlkID0gdHlwZW9mIGFzc2V0ID09PSAnZnVuY3Rpb24nID8gYXNzZXQub3B0aW9ucyAmJiBhc3NldC5vcHRpb25zLm5hbWUgfHwgYXNzZXQuaWQgOiBhc3NldC5uYW1lIHx8IGFzc2V0LmlkO1xuXHQgICAgICBpZiAoIWlkKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdBcnJheS1zeW50YXggYXNzZXRzIG11c3QgcHJvdmlkZSBhIFwibmFtZVwiIG9yIFwiaWRcIiBmaWVsZC4nKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXNbaWRdID0gYXNzZXQ7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiByZXM7XG5cdCAgfVxuXHQgIHJldHVybiBhc3NldHM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNZXJnZSB0d28gb3B0aW9uIG9iamVjdHMgaW50byBhIG5ldyBvbmUuXG5cdCAqIENvcmUgdXRpbGl0eSB1c2VkIGluIGJvdGggaW5zdGFudGlhdGlvbiBhbmQgaW5oZXJpdGFuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwYXJlbnRcblx0ICogQHBhcmFtIHtPYmplY3R9IGNoaWxkXG5cdCAqIEBwYXJhbSB7VnVlfSBbdm1dIC0gaWYgdm0gaXMgcHJlc2VudCwgaW5kaWNhdGVzIHRoaXMgaXNcblx0ICogICAgICAgICAgICAgICAgICAgICBhbiBpbnN0YW50aWF0aW9uIG1lcmdlLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkLCB2bSkge1xuXHQgIGd1YXJkQ29tcG9uZW50cyhjaGlsZCk7XG5cdCAgZ3VhcmRQcm9wcyhjaGlsZCk7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGlmIChjaGlsZC5wcm9wc0RhdGEgJiYgIXZtKSB7XG5cdCAgICAgIHdhcm4oJ3Byb3BzRGF0YSBjYW4gb25seSBiZSB1c2VkIGFzIGFuIGluc3RhbnRpYXRpb24gb3B0aW9uLicpO1xuXHQgICAgfVxuXHQgIH1cblx0ICB2YXIgb3B0aW9ucyA9IHt9O1xuXHQgIHZhciBrZXk7XG5cdCAgaWYgKGNoaWxkWydleHRlbmRzJ10pIHtcblx0ICAgIHBhcmVudCA9IHR5cGVvZiBjaGlsZFsnZXh0ZW5kcyddID09PSAnZnVuY3Rpb24nID8gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGRbJ2V4dGVuZHMnXS5vcHRpb25zLCB2bSkgOiBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZFsnZXh0ZW5kcyddLCB2bSk7XG5cdCAgfVxuXHQgIGlmIChjaGlsZC5taXhpbnMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGQubWl4aW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgbWl4aW4gPSBjaGlsZC5taXhpbnNbaV07XG5cdCAgICAgIHZhciBtaXhpbk9wdGlvbnMgPSBtaXhpbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBWdWUgPyBtaXhpbi5vcHRpb25zIDogbWl4aW47XG5cdCAgICAgIHBhcmVudCA9IG1lcmdlT3B0aW9ucyhwYXJlbnQsIG1peGluT3B0aW9ucywgdm0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmb3IgKGtleSBpbiBwYXJlbnQpIHtcblx0ICAgIG1lcmdlRmllbGQoa2V5KTtcblx0ICB9XG5cdCAgZm9yIChrZXkgaW4gY2hpbGQpIHtcblx0ICAgIGlmICghaGFzT3duKHBhcmVudCwga2V5KSkge1xuXHQgICAgICBtZXJnZUZpZWxkKGtleSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGZ1bmN0aW9uIG1lcmdlRmllbGQoa2V5KSB7XG5cdCAgICB2YXIgc3RyYXQgPSBzdHJhdHNba2V5XSB8fCBkZWZhdWx0U3RyYXQ7XG5cdCAgICBvcHRpb25zW2tleV0gPSBzdHJhdChwYXJlbnRba2V5XSwgY2hpbGRba2V5XSwgdm0sIGtleSk7XG5cdCAgfVxuXHQgIHJldHVybiBvcHRpb25zO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmVzb2x2ZSBhbiBhc3NldC5cblx0ICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJlY2F1c2UgY2hpbGQgaW5zdGFuY2VzIG5lZWQgYWNjZXNzXG5cdCAqIHRvIGFzc2V0cyBkZWZpbmVkIGluIGl0cyBhbmNlc3RvciBjaGFpbi5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlkXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gd2Fybk1pc3Npbmdcblx0ICogQHJldHVybiB7T2JqZWN0fEZ1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVBc3NldChvcHRpb25zLCB0eXBlLCBpZCwgd2Fybk1pc3NpbmcpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgYXNzZXRzID0gb3B0aW9uc1t0eXBlXTtcblx0ICB2YXIgY2FtZWxpemVkSWQ7XG5cdCAgdmFyIHJlcyA9IGFzc2V0c1tpZF0gfHxcblx0ICAvLyBjYW1lbENhc2UgSURcblx0ICBhc3NldHNbY2FtZWxpemVkSWQgPSBjYW1lbGl6ZShpZCldIHx8XG5cdCAgLy8gUGFzY2FsIENhc2UgSURcblx0ICBhc3NldHNbY2FtZWxpemVkSWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbGl6ZWRJZC5zbGljZSgxKV07XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybk1pc3NpbmcgJiYgIXJlcykge1xuXHQgICAgd2FybignRmFpbGVkIHRvIHJlc29sdmUgJyArIHR5cGUuc2xpY2UoMCwgLTEpICsgJzogJyArIGlkLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0dmFyIHVpZCQxID0gMDtcblx0XG5cdC8qKlxuXHQgKiBBIGRlcCBpcyBhbiBvYnNlcnZhYmxlIHRoYXQgY2FuIGhhdmUgbXVsdGlwbGVcblx0ICogZGlyZWN0aXZlcyBzdWJzY3JpYmluZyB0byBpdC5cblx0ICpcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqL1xuXHRmdW5jdGlvbiBEZXAoKSB7XG5cdCAgdGhpcy5pZCA9IHVpZCQxKys7XG5cdCAgdGhpcy5zdWJzID0gW107XG5cdH1cblx0XG5cdC8vIHRoZSBjdXJyZW50IHRhcmdldCB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZC5cblx0Ly8gdGhpcyBpcyBnbG9iYWxseSB1bmlxdWUgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvbmx5IG9uZVxuXHQvLyB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZCBhdCBhbnkgdGltZS5cblx0RGVwLnRhcmdldCA9IG51bGw7XG5cdFxuXHQvKipcblx0ICogQWRkIGEgZGlyZWN0aXZlIHN1YnNjcmliZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RGlyZWN0aXZlfSBzdWJcblx0ICovXG5cdFxuXHREZXAucHJvdG90eXBlLmFkZFN1YiA9IGZ1bmN0aW9uIChzdWIpIHtcblx0ICB0aGlzLnN1YnMucHVzaChzdWIpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBhIGRpcmVjdGl2ZSBzdWJzY3JpYmVyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gc3ViXG5cdCAqL1xuXHRcblx0RGVwLnByb3RvdHlwZS5yZW1vdmVTdWIgPSBmdW5jdGlvbiAoc3ViKSB7XG5cdCAgdGhpcy5zdWJzLiRyZW1vdmUoc3ViKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBZGQgc2VsZiBhcyBhIGRlcGVuZGVuY3kgdG8gdGhlIHRhcmdldCB3YXRjaGVyLlxuXHQgKi9cblx0XG5cdERlcC5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gKCkge1xuXHQgIERlcC50YXJnZXQuYWRkRGVwKHRoaXMpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE5vdGlmeSBhbGwgc3Vic2NyaWJlcnMgb2YgYSBuZXcgdmFsdWUuXG5cdCAqL1xuXHRcblx0RGVwLnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbiAoKSB7XG5cdCAgLy8gc3RhYmxpemUgdGhlIHN1YnNjcmliZXIgbGlzdCBmaXJzdFxuXHQgIHZhciBzdWJzID0gdG9BcnJheSh0aGlzLnN1YnMpO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gc3Vicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHN1YnNbaV0udXBkYXRlKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG5cdHZhciBhcnJheU1ldGhvZHMgPSBPYmplY3QuY3JlYXRlKGFycmF5UHJvdG8pXG5cdFxuXHQvKipcblx0ICogSW50ZXJjZXB0IG11dGF0aW5nIG1ldGhvZHMgYW5kIGVtaXQgZXZlbnRzXG5cdCAqL1xuXHRcblx0O1sncHVzaCcsICdwb3AnLCAnc2hpZnQnLCAndW5zaGlmdCcsICdzcGxpY2UnLCAnc29ydCcsICdyZXZlcnNlJ10uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG5cdCAgLy8gY2FjaGUgb3JpZ2luYWwgbWV0aG9kXG5cdCAgdmFyIG9yaWdpbmFsID0gYXJyYXlQcm90b1ttZXRob2RdO1xuXHQgIGRlZihhcnJheU1ldGhvZHMsIG1ldGhvZCwgZnVuY3Rpb24gbXV0YXRvcigpIHtcblx0ICAgIC8vIGF2b2lkIGxlYWtpbmcgYXJndW1lbnRzOlxuXHQgICAgLy8gaHR0cDovL2pzcGVyZi5jb20vY2xvc3VyZS13aXRoLWFyZ3VtZW50c1xuXHQgICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoO1xuXHQgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoaSk7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG5cdCAgICB9XG5cdCAgICB2YXIgcmVzdWx0ID0gb3JpZ2luYWwuYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICB2YXIgb2IgPSB0aGlzLl9fb2JfXztcblx0ICAgIHZhciBpbnNlcnRlZDtcblx0ICAgIHN3aXRjaCAobWV0aG9kKSB7XG5cdCAgICAgIGNhc2UgJ3B1c2gnOlxuXHQgICAgICAgIGluc2VydGVkID0gYXJncztcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAndW5zaGlmdCc6XG5cdCAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICdzcGxpY2UnOlxuXHQgICAgICAgIGluc2VydGVkID0gYXJncy5zbGljZSgyKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgIH1cblx0ICAgIGlmIChpbnNlcnRlZCkgb2Iub2JzZXJ2ZUFycmF5KGluc2VydGVkKTtcblx0ICAgIC8vIG5vdGlmeSBjaGFuZ2Vcblx0ICAgIG9iLmRlcC5ub3RpZnkoKTtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfSk7XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIFN3YXAgdGhlIGVsZW1lbnQgYXQgdGhlIGdpdmVuIGluZGV4IHdpdGggYSBuZXcgdmFsdWVcblx0ICogYW5kIGVtaXRzIGNvcnJlc3BvbmRpbmcgZXZlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKiBAcmV0dXJuIHsqfSAtIHJlcGxhY2VkIGVsZW1lbnRcblx0ICovXG5cdFxuXHRkZWYoYXJyYXlQcm90bywgJyRzZXQnLCBmdW5jdGlvbiAkc2V0KGluZGV4LCB2YWwpIHtcblx0ICBpZiAoaW5kZXggPj0gdGhpcy5sZW5ndGgpIHtcblx0ICAgIHRoaXMubGVuZ3RoID0gTnVtYmVyKGluZGV4KSArIDE7XG5cdCAgfVxuXHQgIHJldHVybiB0aGlzLnNwbGljZShpbmRleCwgMSwgdmFsKVswXTtcblx0fSk7XG5cdFxuXHQvKipcblx0ICogQ29udmVuaWVuY2UgbWV0aG9kIHRvIHJlbW92ZSB0aGUgZWxlbWVudCBhdCBnaXZlbiBpbmRleCBvciB0YXJnZXQgZWxlbWVudCByZWZlcmVuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gaXRlbVxuXHQgKi9cblx0XG5cdGRlZihhcnJheVByb3RvLCAnJHJlbW92ZScsIGZ1bmN0aW9uICRyZW1vdmUoaXRlbSkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICghdGhpcy5sZW5ndGgpIHJldHVybjtcblx0ICB2YXIgaW5kZXggPSBpbmRleE9mKHRoaXMsIGl0ZW0pO1xuXHQgIGlmIChpbmRleCA+IC0xKSB7XG5cdCAgICByZXR1cm4gdGhpcy5zcGxpY2UoaW5kZXgsIDEpO1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgYXJyYXlLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYXJyYXlNZXRob2RzKTtcblx0XG5cdC8qKlxuXHQgKiBCeSBkZWZhdWx0LCB3aGVuIGEgcmVhY3RpdmUgcHJvcGVydHkgaXMgc2V0LCB0aGUgbmV3IHZhbHVlIGlzXG5cdCAqIGFsc28gY29udmVydGVkIHRvIGJlY29tZSByZWFjdGl2ZS4gSG93ZXZlciBpbiBjZXJ0YWluIGNhc2VzLCBlLmcuXG5cdCAqIHYtZm9yIHNjb3BlIGFsaWFzIGFuZCBwcm9wcywgd2UgZG9uJ3Qgd2FudCB0byBmb3JjZSBjb252ZXJzaW9uXG5cdCAqIGJlY2F1c2UgdGhlIHZhbHVlIG1heSBiZSBhIG5lc3RlZCB2YWx1ZSB1bmRlciBhIGZyb3plbiBkYXRhIHN0cnVjdHVyZS5cblx0ICpcblx0ICogU28gd2hlbmV2ZXIgd2Ugd2FudCB0byBzZXQgYSByZWFjdGl2ZSBwcm9wZXJ0eSB3aXRob3V0IGZvcmNpbmdcblx0ICogY29udmVyc2lvbiBvbiB0aGUgbmV3IHZhbHVlLCB3ZSB3cmFwIHRoYXQgY2FsbCBpbnNpZGUgdGhpcyBmdW5jdGlvbi5cblx0ICovXG5cdFxuXHR2YXIgc2hvdWxkQ29udmVydCA9IHRydWU7XG5cdFxuXHRmdW5jdGlvbiB3aXRob3V0Q29udmVyc2lvbihmbikge1xuXHQgIHNob3VsZENvbnZlcnQgPSBmYWxzZTtcblx0ICBmbigpO1xuXHQgIHNob3VsZENvbnZlcnQgPSB0cnVlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogT2JzZXJ2ZXIgY2xhc3MgdGhhdCBhcmUgYXR0YWNoZWQgdG8gZWFjaCBvYnNlcnZlZFxuXHQgKiBvYmplY3QuIE9uY2UgYXR0YWNoZWQsIHRoZSBvYnNlcnZlciBjb252ZXJ0cyB0YXJnZXRcblx0ICogb2JqZWN0J3MgcHJvcGVydHkga2V5cyBpbnRvIGdldHRlci9zZXR0ZXJzIHRoYXRcblx0ICogY29sbGVjdCBkZXBlbmRlbmNpZXMgYW5kIGRpc3BhdGNoZXMgdXBkYXRlcy5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheXxPYmplY3R9IHZhbHVlXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIE9ic2VydmVyKHZhbHVlKSB7XG5cdCAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuXHQgIHRoaXMuZGVwID0gbmV3IERlcCgpO1xuXHQgIGRlZih2YWx1ZSwgJ19fb2JfXycsIHRoaXMpO1xuXHQgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgdmFyIGF1Z21lbnQgPSBoYXNQcm90byA/IHByb3RvQXVnbWVudCA6IGNvcHlBdWdtZW50O1xuXHQgICAgYXVnbWVudCh2YWx1ZSwgYXJyYXlNZXRob2RzLCBhcnJheUtleXMpO1xuXHQgICAgdGhpcy5vYnNlcnZlQXJyYXkodmFsdWUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLndhbGsodmFsdWUpO1xuXHQgIH1cblx0fVxuXHRcblx0Ly8gSW5zdGFuY2UgbWV0aG9kc1xuXHRcblx0LyoqXG5cdCAqIFdhbGsgdGhyb3VnaCBlYWNoIHByb3BlcnR5IGFuZCBjb252ZXJ0IHRoZW0gaW50b1xuXHQgKiBnZXR0ZXIvc2V0dGVycy4gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIHdoZW5cblx0ICogdmFsdWUgdHlwZSBpcyBPYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICovXG5cdFxuXHRPYnNlcnZlci5wcm90b3R5cGUud2FsayA9IGZ1bmN0aW9uIChvYmopIHtcblx0ICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdGhpcy5jb252ZXJ0KGtleXNbaV0sIG9ialtrZXlzW2ldXSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE9ic2VydmUgYSBsaXN0IG9mIEFycmF5IGl0ZW1zLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBpdGVtc1xuXHQgKi9cblx0XG5cdE9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlQXJyYXkgPSBmdW5jdGlvbiAoaXRlbXMpIHtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGl0ZW1zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgb2JzZXJ2ZShpdGVtc1tpXSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgYSBwcm9wZXJ0eSBpbnRvIGdldHRlci9zZXR0ZXIgc28gd2UgY2FuIGVtaXRcblx0ICogdGhlIGV2ZW50cyB3aGVuIHRoZSBwcm9wZXJ0eSBpcyBhY2Nlc3NlZC9jaGFuZ2VkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqL1xuXHRcblx0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbnZlcnQgPSBmdW5jdGlvbiAoa2V5LCB2YWwpIHtcblx0ICBkZWZpbmVSZWFjdGl2ZSh0aGlzLnZhbHVlLCBrZXksIHZhbCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQWRkIGFuIG93bmVyIHZtLCBzbyB0aGF0IHdoZW4gJHNldC8kZGVsZXRlIG11dGF0aW9uc1xuXHQgKiBoYXBwZW4gd2UgY2FuIG5vdGlmeSBvd25lciB2bXMgdG8gcHJveHkgdGhlIGtleXMgYW5kXG5cdCAqIGRpZ2VzdCB0aGUgd2F0Y2hlcnMuIFRoaXMgaXMgb25seSBjYWxsZWQgd2hlbiB0aGUgb2JqZWN0XG5cdCAqIGlzIG9ic2VydmVkIGFzIGFuIGluc3RhbmNlJ3Mgcm9vdCAkZGF0YS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRcblx0T2JzZXJ2ZXIucHJvdG90eXBlLmFkZFZtID0gZnVuY3Rpb24gKHZtKSB7XG5cdCAgKHRoaXMudm1zIHx8ICh0aGlzLnZtcyA9IFtdKSkucHVzaCh2bSk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGFuIG93bmVyIHZtLiBUaGlzIGlzIGNhbGxlZCB3aGVuIHRoZSBvYmplY3QgaXNcblx0ICogc3dhcHBlZCBvdXQgYXMgYW4gaW5zdGFuY2UncyAkZGF0YSBvYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0XG5cdE9ic2VydmVyLnByb3RvdHlwZS5yZW1vdmVWbSA9IGZ1bmN0aW9uICh2bSkge1xuXHQgIHRoaXMudm1zLiRyZW1vdmUodm0pO1xuXHR9O1xuXHRcblx0Ly8gaGVscGVyc1xuXHRcblx0LyoqXG5cdCAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBpbnRlcmNlcHRpbmdcblx0ICogdGhlIHByb3RvdHlwZSBjaGFpbiB1c2luZyBfX3Byb3RvX19cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHRhcmdldFxuXHQgKiBAcGFyYW0ge09iamVjdH0gc3JjXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJvdG9BdWdtZW50KHRhcmdldCwgc3JjKSB7XG5cdCAgLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cblx0ICB0YXJnZXQuX19wcm90b19fID0gc3JjO1xuXHQgIC8qIGVzbGludC1lbmFibGUgbm8tcHJvdG8gKi9cblx0fVxuXHRcblx0LyoqXG5cdCAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBkZWZpbmluZ1xuXHQgKiBoaWRkZW4gcHJvcGVydGllcy5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHRhcmdldFxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvdG9cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb3B5QXVnbWVudCh0YXJnZXQsIHNyYywga2V5cykge1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuXHQgICAgZGVmKHRhcmdldCwga2V5LCBzcmNba2V5XSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQXR0ZW1wdCB0byBjcmVhdGUgYW4gb2JzZXJ2ZXIgaW5zdGFuY2UgZm9yIGEgdmFsdWUsXG5cdCAqIHJldHVybnMgdGhlIG5ldyBvYnNlcnZlciBpZiBzdWNjZXNzZnVsbHkgb2JzZXJ2ZWQsXG5cdCAqIG9yIHRoZSBleGlzdGluZyBvYnNlcnZlciBpZiB0aGUgdmFsdWUgYWxyZWFkeSBoYXMgb25lLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwYXJhbSB7VnVlfSBbdm1dXG5cdCAqIEByZXR1cm4ge09ic2VydmVyfHVuZGVmaW5lZH1cblx0ICogQHN0YXRpY1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG9ic2VydmUodmFsdWUsIHZtKSB7XG5cdCAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBvYjtcblx0ICBpZiAoaGFzT3duKHZhbHVlLCAnX19vYl9fJykgJiYgdmFsdWUuX19vYl9fIGluc3RhbmNlb2YgT2JzZXJ2ZXIpIHtcblx0ICAgIG9iID0gdmFsdWUuX19vYl9fO1xuXHQgIH0gZWxzZSBpZiAoc2hvdWxkQ29udmVydCAmJiAoaXNBcnJheSh2YWx1ZSkgfHwgaXNQbGFpbk9iamVjdCh2YWx1ZSkpICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpICYmICF2YWx1ZS5faXNWdWUpIHtcblx0ICAgIG9iID0gbmV3IE9ic2VydmVyKHZhbHVlKTtcblx0ICB9XG5cdCAgaWYgKG9iICYmIHZtKSB7XG5cdCAgICBvYi5hZGRWbSh2bSk7XG5cdCAgfVxuXHQgIHJldHVybiBvYjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIERlZmluZSBhIHJlYWN0aXZlIHByb3BlcnR5IG9uIGFuIE9iamVjdC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGVmaW5lUmVhY3RpdmUob2JqLCBrZXksIHZhbCkge1xuXHQgIHZhciBkZXAgPSBuZXcgRGVwKCk7XG5cdFxuXHQgIHZhciBwcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpO1xuXHQgIGlmIChwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5jb25maWd1cmFibGUgPT09IGZhbHNlKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHRcblx0ICAvLyBjYXRlciBmb3IgcHJlLWRlZmluZWQgZ2V0dGVyL3NldHRlcnNcblx0ICB2YXIgZ2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuZ2V0O1xuXHQgIHZhciBzZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5zZXQ7XG5cdFxuXHQgIHZhciBjaGlsZE9iID0gb2JzZXJ2ZSh2YWwpO1xuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuXHQgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0ICAgIGdldDogZnVuY3Rpb24gcmVhY3RpdmVHZXR0ZXIoKSB7XG5cdCAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7XG5cdCAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG5cdCAgICAgICAgZGVwLmRlcGVuZCgpO1xuXHQgICAgICAgIGlmIChjaGlsZE9iKSB7XG5cdCAgICAgICAgICBjaGlsZE9iLmRlcC5kZXBlbmQoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICAgICAgICBmb3IgKHZhciBlLCBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgICAgICBlID0gdmFsdWVbaV07XG5cdCAgICAgICAgICAgIGUgJiYgZS5fX29iX18gJiYgZS5fX29iX18uZGVwLmRlcGVuZCgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdmFsdWU7XG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiByZWFjdGl2ZVNldHRlcihuZXdWYWwpIHtcblx0ICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcblx0ICAgICAgaWYgKG5ld1ZhbCA9PT0gdmFsdWUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHNldHRlcikge1xuXHQgICAgICAgIHNldHRlci5jYWxsKG9iaiwgbmV3VmFsKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YWwgPSBuZXdWYWw7XG5cdCAgICAgIH1cblx0ICAgICAgY2hpbGRPYiA9IG9ic2VydmUobmV3VmFsKTtcblx0ICAgICAgZGVwLm5vdGlmeSgpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9XG5cdFxuXHRcblx0XG5cdHZhciB1dGlsID0gT2JqZWN0LmZyZWV6ZSh7XG5cdFx0ZGVmaW5lUmVhY3RpdmU6IGRlZmluZVJlYWN0aXZlLFxuXHRcdHNldDogc2V0LFxuXHRcdGRlbDogZGVsLFxuXHRcdGhhc093bjogaGFzT3duLFxuXHRcdGlzTGl0ZXJhbDogaXNMaXRlcmFsLFxuXHRcdGlzUmVzZXJ2ZWQ6IGlzUmVzZXJ2ZWQsXG5cdFx0X3RvU3RyaW5nOiBfdG9TdHJpbmcsXG5cdFx0dG9OdW1iZXI6IHRvTnVtYmVyLFxuXHRcdHRvQm9vbGVhbjogdG9Cb29sZWFuLFxuXHRcdHN0cmlwUXVvdGVzOiBzdHJpcFF1b3Rlcyxcblx0XHRjYW1lbGl6ZTogY2FtZWxpemUsXG5cdFx0aHlwaGVuYXRlOiBoeXBoZW5hdGUsXG5cdFx0Y2xhc3NpZnk6IGNsYXNzaWZ5LFxuXHRcdGJpbmQ6IGJpbmQsXG5cdFx0dG9BcnJheTogdG9BcnJheSxcblx0XHRleHRlbmQ6IGV4dGVuZCxcblx0XHRpc09iamVjdDogaXNPYmplY3QsXG5cdFx0aXNQbGFpbk9iamVjdDogaXNQbGFpbk9iamVjdCxcblx0XHRkZWY6IGRlZixcblx0XHRkZWJvdW5jZTogX2RlYm91bmNlLFxuXHRcdGluZGV4T2Y6IGluZGV4T2YsXG5cdFx0Y2FuY2VsbGFibGU6IGNhbmNlbGxhYmxlLFxuXHRcdGxvb3NlRXF1YWw6IGxvb3NlRXF1YWwsXG5cdFx0aXNBcnJheTogaXNBcnJheSxcblx0XHRoYXNQcm90bzogaGFzUHJvdG8sXG5cdFx0aW5Ccm93c2VyOiBpbkJyb3dzZXIsXG5cdFx0ZGV2dG9vbHM6IGRldnRvb2xzLFxuXHRcdGlzSUU6IGlzSUUsXG5cdFx0aXNJRTk6IGlzSUU5LFxuXHRcdGlzQW5kcm9pZDogaXNBbmRyb2lkLFxuXHRcdGlzSW9zOiBpc0lvcyxcblx0XHRpb3NWZXJzaW9uTWF0Y2g6IGlvc1ZlcnNpb25NYXRjaCxcblx0XHRpb3NWZXJzaW9uOiBpb3NWZXJzaW9uLFxuXHRcdGhhc011dGF0aW9uT2JzZXJ2ZXJCdWc6IGhhc011dGF0aW9uT2JzZXJ2ZXJCdWcsXG5cdFx0Z2V0IHRyYW5zaXRpb25Qcm9wICgpIHsgcmV0dXJuIHRyYW5zaXRpb25Qcm9wOyB9LFxuXHRcdGdldCB0cmFuc2l0aW9uRW5kRXZlbnQgKCkgeyByZXR1cm4gdHJhbnNpdGlvbkVuZEV2ZW50OyB9LFxuXHRcdGdldCBhbmltYXRpb25Qcm9wICgpIHsgcmV0dXJuIGFuaW1hdGlvblByb3A7IH0sXG5cdFx0Z2V0IGFuaW1hdGlvbkVuZEV2ZW50ICgpIHsgcmV0dXJuIGFuaW1hdGlvbkVuZEV2ZW50OyB9LFxuXHRcdG5leHRUaWNrOiBuZXh0VGljayxcblx0XHRnZXQgX1NldCAoKSB7IHJldHVybiBfU2V0OyB9LFxuXHRcdHF1ZXJ5OiBxdWVyeSxcblx0XHRpbkRvYzogaW5Eb2MsXG5cdFx0Z2V0QXR0cjogZ2V0QXR0cixcblx0XHRnZXRCaW5kQXR0cjogZ2V0QmluZEF0dHIsXG5cdFx0aGFzQmluZEF0dHI6IGhhc0JpbmRBdHRyLFxuXHRcdGJlZm9yZTogYmVmb3JlLFxuXHRcdGFmdGVyOiBhZnRlcixcblx0XHRyZW1vdmU6IHJlbW92ZSxcblx0XHRwcmVwZW5kOiBwcmVwZW5kLFxuXHRcdHJlcGxhY2U6IHJlcGxhY2UsXG5cdFx0b246IG9uLFxuXHRcdG9mZjogb2ZmLFxuXHRcdHNldENsYXNzOiBzZXRDbGFzcyxcblx0XHRhZGRDbGFzczogYWRkQ2xhc3MsXG5cdFx0cmVtb3ZlQ2xhc3M6IHJlbW92ZUNsYXNzLFxuXHRcdGV4dHJhY3RDb250ZW50OiBleHRyYWN0Q29udGVudCxcblx0XHR0cmltTm9kZTogdHJpbU5vZGUsXG5cdFx0aXNUZW1wbGF0ZTogaXNUZW1wbGF0ZSxcblx0XHRjcmVhdGVBbmNob3I6IGNyZWF0ZUFuY2hvcixcblx0XHRmaW5kUmVmOiBmaW5kUmVmLFxuXHRcdG1hcE5vZGVSYW5nZTogbWFwTm9kZVJhbmdlLFxuXHRcdHJlbW92ZU5vZGVSYW5nZTogcmVtb3ZlTm9kZVJhbmdlLFxuXHRcdGlzRnJhZ21lbnQ6IGlzRnJhZ21lbnQsXG5cdFx0Z2V0T3V0ZXJIVE1MOiBnZXRPdXRlckhUTUwsXG5cdFx0bWVyZ2VPcHRpb25zOiBtZXJnZU9wdGlvbnMsXG5cdFx0cmVzb2x2ZUFzc2V0OiByZXNvbHZlQXNzZXQsXG5cdFx0Y2hlY2tDb21wb25lbnRBdHRyOiBjaGVja0NvbXBvbmVudEF0dHIsXG5cdFx0Y29tbW9uVGFnUkU6IGNvbW1vblRhZ1JFLFxuXHRcdHJlc2VydmVkVGFnUkU6IHJlc2VydmVkVGFnUkUsXG5cdFx0Z2V0IHdhcm4gKCkgeyByZXR1cm4gd2FybjsgfVxuXHR9KTtcblx0XG5cdHZhciB1aWQgPSAwO1xuXHRcblx0ZnVuY3Rpb24gaW5pdE1peGluIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBUaGUgbWFpbiBpbml0IHNlcXVlbmNlLiBUaGlzIGlzIGNhbGxlZCBmb3IgZXZlcnlcblx0ICAgKiBpbnN0YW5jZSwgaW5jbHVkaW5nIG9uZXMgdGhhdCBhcmUgY3JlYXRlZCBmcm9tIGV4dGVuZGVkXG5cdCAgICogY29uc3RydWN0b3JzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSB0aGlzIG9wdGlvbnMgb2JqZWN0IHNob3VsZCBiZVxuXHQgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHJlc3VsdCBvZiBtZXJnaW5nIGNsYXNzXG5cdCAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zIGFuZCB0aGUgb3B0aW9ucyBwYXNzZWRcblx0ICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIHRvIHRoZSBjb25zdHJ1Y3Rvci5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdCAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0XG5cdCAgICB0aGlzLiRlbCA9IG51bGw7XG5cdCAgICB0aGlzLiRwYXJlbnQgPSBvcHRpb25zLnBhcmVudDtcblx0ICAgIHRoaXMuJHJvb3QgPSB0aGlzLiRwYXJlbnQgPyB0aGlzLiRwYXJlbnQuJHJvb3QgOiB0aGlzO1xuXHQgICAgdGhpcy4kY2hpbGRyZW4gPSBbXTtcblx0ICAgIHRoaXMuJHJlZnMgPSB7fTsgLy8gY2hpbGQgdm0gcmVmZXJlbmNlc1xuXHQgICAgdGhpcy4kZWxzID0ge307IC8vIGVsZW1lbnQgcmVmZXJlbmNlc1xuXHQgICAgdGhpcy5fd2F0Y2hlcnMgPSBbXTsgLy8gYWxsIHdhdGNoZXJzIGFzIGFuIGFycmF5XG5cdCAgICB0aGlzLl9kaXJlY3RpdmVzID0gW107IC8vIGFsbCBkaXJlY3RpdmVzXG5cdFxuXHQgICAgLy8gYSB1aWRcblx0ICAgIHRoaXMuX3VpZCA9IHVpZCsrO1xuXHRcblx0ICAgIC8vIGEgZmxhZyB0byBhdm9pZCB0aGlzIGJlaW5nIG9ic2VydmVkXG5cdCAgICB0aGlzLl9pc1Z1ZSA9IHRydWU7XG5cdFxuXHQgICAgLy8gZXZlbnRzIGJvb2trZWVwaW5nXG5cdCAgICB0aGlzLl9ldmVudHMgPSB7fTsgLy8gcmVnaXN0ZXJlZCBjYWxsYmFja3Ncblx0ICAgIHRoaXMuX2V2ZW50c0NvdW50ID0ge307IC8vIGZvciAkYnJvYWRjYXN0IG9wdGltaXphdGlvblxuXHRcblx0ICAgIC8vIGZyYWdtZW50IGluc3RhbmNlIHByb3BlcnRpZXNcblx0ICAgIHRoaXMuX2lzRnJhZ21lbnQgPSBmYWxzZTtcblx0ICAgIHRoaXMuX2ZyYWdtZW50ID0gLy8gQHR5cGUge0RvY3VtZW50RnJhZ21lbnR9XG5cdCAgICB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gLy8gQHR5cGUge1RleHR8Q29tbWVudH1cblx0ICAgIHRoaXMuX2ZyYWdtZW50RW5kID0gbnVsbDsgLy8gQHR5cGUge1RleHR8Q29tbWVudH1cblx0XG5cdCAgICAvLyBsaWZlY3ljbGUgc3RhdGVcblx0ICAgIHRoaXMuX2lzQ29tcGlsZWQgPSB0aGlzLl9pc0Rlc3Ryb3llZCA9IHRoaXMuX2lzUmVhZHkgPSB0aGlzLl9pc0F0dGFjaGVkID0gdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCA9IHRoaXMuX3ZGb3JSZW1vdmluZyA9IGZhbHNlO1xuXHQgICAgdGhpcy5fdW5saW5rRm4gPSBudWxsO1xuXHRcblx0ICAgIC8vIGNvbnRleHQ6XG5cdCAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBjb250ZXh0XG5cdCAgICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2Vcblx0ICAgIC8vIGFuZCBpdHMgaG9zdC5cblx0ICAgIHRoaXMuX2NvbnRleHQgPSBvcHRpb25zLl9jb250ZXh0IHx8IHRoaXMuJHBhcmVudDtcblx0XG5cdCAgICAvLyBzY29wZTpcblx0ICAgIC8vIGlmIHRoaXMgaXMgaW5zaWRlIGFuIGlubGluZSB2LWZvciwgdGhlIHNjb3BlXG5cdCAgICAvLyB3aWxsIGJlIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgY3JlYXRlZCBmb3IgdGhpc1xuXHQgICAgLy8gcmVwZWF0IGZyYWdtZW50LiB0aGlzIGlzIHVzZWQgZm9yIGxpbmtpbmcgcHJvcHNcblx0ICAgIC8vIGFuZCBjb250YWluZXIgZGlyZWN0aXZlcy5cblx0ICAgIHRoaXMuX3Njb3BlID0gb3B0aW9ucy5fc2NvcGU7XG5cdFxuXHQgICAgLy8gZnJhZ21lbnQ6XG5cdCAgICAvLyBpZiB0aGlzIGluc3RhbmNlIGlzIGNvbXBpbGVkIGluc2lkZSBhIEZyYWdtZW50LCBpdFxuXHQgICAgLy8gbmVlZHMgdG8gcmVpZ3N0ZXIgaXRzZWxmIGFzIGEgY2hpbGQgb2YgdGhhdCBmcmFnbWVudFxuXHQgICAgLy8gZm9yIGF0dGFjaC9kZXRhY2ggdG8gd29yayBwcm9wZXJseS5cblx0ICAgIHRoaXMuX2ZyYWcgPSBvcHRpb25zLl9mcmFnO1xuXHQgICAgaWYgKHRoaXMuX2ZyYWcpIHtcblx0ICAgICAgdGhpcy5fZnJhZy5jaGlsZHJlbi5wdXNoKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHB1c2ggc2VsZiBpbnRvIHBhcmVudCAvIHRyYW5zY2x1c2lvbiBob3N0XG5cdCAgICBpZiAodGhpcy4kcGFyZW50KSB7XG5cdCAgICAgIHRoaXMuJHBhcmVudC4kY2hpbGRyZW4ucHVzaCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBtZXJnZSBvcHRpb25zLlxuXHQgICAgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnMgPSBtZXJnZU9wdGlvbnModGhpcy5jb25zdHJ1Y3Rvci5vcHRpb25zLCBvcHRpb25zLCB0aGlzKTtcblx0XG5cdCAgICAvLyBzZXQgcmVmXG5cdCAgICB0aGlzLl91cGRhdGVSZWYoKTtcblx0XG5cdCAgICAvLyBpbml0aWFsaXplIGRhdGEgYXMgZW1wdHkgb2JqZWN0LlxuXHQgICAgLy8gaXQgd2lsbCBiZSBmaWxsZWQgdXAgaW4gX2luaXREYXRhKCkuXG5cdCAgICB0aGlzLl9kYXRhID0ge307XG5cdFxuXHQgICAgLy8gY2FsbCBpbml0IGhvb2tcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdpbml0Jyk7XG5cdFxuXHQgICAgLy8gaW5pdGlhbGl6ZSBkYXRhIG9ic2VydmF0aW9uIGFuZCBzY29wZSBpbmhlcml0YW5jZS5cblx0ICAgIHRoaXMuX2luaXRTdGF0ZSgpO1xuXHRcblx0ICAgIC8vIHNldHVwIGV2ZW50IHN5c3RlbSBhbmQgb3B0aW9uIGV2ZW50cy5cblx0ICAgIHRoaXMuX2luaXRFdmVudHMoKTtcblx0XG5cdCAgICAvLyBjYWxsIGNyZWF0ZWQgaG9va1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2NyZWF0ZWQnKTtcblx0XG5cdCAgICAvLyBpZiBgZWxgIG9wdGlvbiBpcyBwYXNzZWQsIHN0YXJ0IGNvbXBpbGF0aW9uLlxuXHQgICAgaWYgKG9wdGlvbnMuZWwpIHtcblx0ICAgICAgdGhpcy4kbW91bnQob3B0aW9ucy5lbCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0dmFyIHBhdGhDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0XG5cdC8vIGFjdGlvbnNcblx0dmFyIEFQUEVORCA9IDA7XG5cdHZhciBQVVNIID0gMTtcblx0dmFyIElOQ19TVUJfUEFUSF9ERVBUSCA9IDI7XG5cdHZhciBQVVNIX1NVQl9QQVRIID0gMztcblx0XG5cdC8vIHN0YXRlc1xuXHR2YXIgQkVGT1JFX1BBVEggPSAwO1xuXHR2YXIgSU5fUEFUSCA9IDE7XG5cdHZhciBCRUZPUkVfSURFTlQgPSAyO1xuXHR2YXIgSU5fSURFTlQgPSAzO1xuXHR2YXIgSU5fU1VCX1BBVEggPSA0O1xuXHR2YXIgSU5fU0lOR0xFX1FVT1RFID0gNTtcblx0dmFyIElOX0RPVUJMRV9RVU9URSA9IDY7XG5cdHZhciBBRlRFUl9QQVRIID0gNztcblx0dmFyIEVSUk9SID0gODtcblx0XG5cdHZhciBwYXRoU3RhdGVNYWNoaW5lID0gW107XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9QQVRIXSA9IHtcblx0ICAnd3MnOiBbQkVGT1JFX1BBVEhdLFxuXHQgICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcblx0ICAnWyc6IFtJTl9TVUJfUEFUSF0sXG5cdCAgJ2VvZic6IFtBRlRFUl9QQVRIXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtJTl9QQVRIXSA9IHtcblx0ICAnd3MnOiBbSU5fUEFUSF0sXG5cdCAgJy4nOiBbQkVGT1JFX0lERU5UXSxcblx0ICAnWyc6IFtJTl9TVUJfUEFUSF0sXG5cdCAgJ2VvZic6IFtBRlRFUl9QQVRIXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtCRUZPUkVfSURFTlRdID0ge1xuXHQgICd3cyc6IFtCRUZPUkVfSURFTlRdLFxuXHQgICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtJTl9JREVOVF0gPSB7XG5cdCAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdLFxuXHQgICcwJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuXHQgICdudW1iZXInOiBbSU5fSURFTlQsIEFQUEVORF0sXG5cdCAgJ3dzJzogW0lOX1BBVEgsIFBVU0hdLFxuXHQgICcuJzogW0JFRk9SRV9JREVOVCwgUFVTSF0sXG5cdCAgJ1snOiBbSU5fU1VCX1BBVEgsIFBVU0hdLFxuXHQgICdlb2YnOiBbQUZURVJfUEFUSCwgUFVTSF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbSU5fU1VCX1BBVEhdID0ge1xuXHQgIFwiJ1wiOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkRdLFxuXHQgICdcIic6IFtJTl9ET1VCTEVfUVVPVEUsIEFQUEVORF0sXG5cdCAgJ1snOiBbSU5fU1VCX1BBVEgsIElOQ19TVUJfUEFUSF9ERVBUSF0sXG5cdCAgJ10nOiBbSU5fUEFUSCwgUFVTSF9TVUJfUEFUSF0sXG5cdCAgJ2VvZic6IEVSUk9SLFxuXHQgICdlbHNlJzogW0lOX1NVQl9QQVRILCBBUFBFTkRdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0lOX1NJTkdMRV9RVU9URV0gPSB7XG5cdCAgXCInXCI6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXSxcblx0ICAnZW9mJzogRVJST1IsXG5cdCAgJ2Vsc2UnOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkRdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0lOX0RPVUJMRV9RVU9URV0gPSB7XG5cdCAgJ1wiJzogW0lOX1NVQl9QQVRILCBBUFBFTkRdLFxuXHQgICdlb2YnOiBFUlJPUixcblx0ICAnZWxzZSc6IFtJTl9ET1VCTEVfUVVPVEUsIEFQUEVORF1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgdGhlIHR5cGUgb2YgYSBjaGFyYWN0ZXIgaW4gYSBrZXlwYXRoLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0NoYXJ9IGNoXG5cdCAqIEByZXR1cm4ge1N0cmluZ30gdHlwZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldFBhdGhDaGFyVHlwZShjaCkge1xuXHQgIGlmIChjaCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ2VvZic7XG5cdCAgfVxuXHRcblx0ICB2YXIgY29kZSA9IGNoLmNoYXJDb2RlQXQoMCk7XG5cdFxuXHQgIHN3aXRjaCAoY29kZSkge1xuXHQgICAgY2FzZSAweDVCOiAvLyBbXG5cdCAgICBjYXNlIDB4NUQ6IC8vIF1cblx0ICAgIGNhc2UgMHgyRTogLy8gLlxuXHQgICAgY2FzZSAweDIyOiAvLyBcIlxuXHQgICAgY2FzZSAweDI3OiAvLyAnXG5cdCAgICBjYXNlIDB4MzA6XG5cdCAgICAgIC8vIDBcblx0ICAgICAgcmV0dXJuIGNoO1xuXHRcblx0ICAgIGNhc2UgMHg1RjogLy8gX1xuXHQgICAgY2FzZSAweDI0OlxuXHQgICAgICAvLyAkXG5cdCAgICAgIHJldHVybiAnaWRlbnQnO1xuXHRcblx0ICAgIGNhc2UgMHgyMDogLy8gU3BhY2Vcblx0ICAgIGNhc2UgMHgwOTogLy8gVGFiXG5cdCAgICBjYXNlIDB4MEE6IC8vIE5ld2xpbmVcblx0ICAgIGNhc2UgMHgwRDogLy8gUmV0dXJuXG5cdCAgICBjYXNlIDB4QTA6IC8vIE5vLWJyZWFrIHNwYWNlXG5cdCAgICBjYXNlIDB4RkVGRjogLy8gQnl0ZSBPcmRlciBNYXJrXG5cdCAgICBjYXNlIDB4MjAyODogLy8gTGluZSBTZXBhcmF0b3Jcblx0ICAgIGNhc2UgMHgyMDI5OlxuXHQgICAgICAvLyBQYXJhZ3JhcGggU2VwYXJhdG9yXG5cdCAgICAgIHJldHVybiAnd3MnO1xuXHQgIH1cblx0XG5cdCAgLy8gYS16LCBBLVpcblx0ICBpZiAoY29kZSA+PSAweDYxICYmIGNvZGUgPD0gMHg3QSB8fCBjb2RlID49IDB4NDEgJiYgY29kZSA8PSAweDVBKSB7XG5cdCAgICByZXR1cm4gJ2lkZW50Jztcblx0ICB9XG5cdFxuXHQgIC8vIDEtOVxuXHQgIGlmIChjb2RlID49IDB4MzEgJiYgY29kZSA8PSAweDM5KSB7XG5cdCAgICByZXR1cm4gJ251bWJlcic7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gJ2Vsc2UnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9ybWF0IGEgc3ViUGF0aCwgcmV0dXJuIGl0cyBwbGFpbiBmb3JtIGlmIGl0IGlzXG5cdCAqIGEgbGl0ZXJhbCBzdHJpbmcgb3IgbnVtYmVyLiBPdGhlcndpc2UgcHJlcGVuZCB0aGVcblx0ICogZHluYW1pYyBpbmRpY2F0b3IgKCopLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZm9ybWF0U3ViUGF0aChwYXRoKSB7XG5cdCAgdmFyIHRyaW1tZWQgPSBwYXRoLnRyaW0oKTtcblx0ICAvLyBpbnZhbGlkIGxlYWRpbmcgMFxuXHQgIGlmIChwYXRoLmNoYXJBdCgwKSA9PT0gJzAnICYmIGlzTmFOKHBhdGgpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHJldHVybiBpc0xpdGVyYWwodHJpbW1lZCkgPyBzdHJpcFF1b3Rlcyh0cmltbWVkKSA6ICcqJyArIHRyaW1tZWQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBhIHN0cmluZyBwYXRoIGludG8gYW4gYXJyYXkgb2Ygc2VnbWVudHNcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICogQHJldHVybiB7QXJyYXl8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlKHBhdGgpIHtcblx0ICB2YXIga2V5cyA9IFtdO1xuXHQgIHZhciBpbmRleCA9IC0xO1xuXHQgIHZhciBtb2RlID0gQkVGT1JFX1BBVEg7XG5cdCAgdmFyIHN1YlBhdGhEZXB0aCA9IDA7XG5cdCAgdmFyIGMsIG5ld0NoYXIsIGtleSwgdHlwZSwgdHJhbnNpdGlvbiwgYWN0aW9uLCB0eXBlTWFwO1xuXHRcblx0ICB2YXIgYWN0aW9ucyA9IFtdO1xuXHRcblx0ICBhY3Rpb25zW1BVU0hdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKGtleSAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGtleXMucHVzaChrZXkpO1xuXHQgICAgICBrZXkgPSB1bmRlZmluZWQ7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgYWN0aW9uc1tBUFBFTkRdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGtleSA9IG5ld0NoYXI7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBrZXkgKz0gbmV3Q2hhcjtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBhY3Rpb25zW0lOQ19TVUJfUEFUSF9ERVBUSF0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBhY3Rpb25zW0FQUEVORF0oKTtcblx0ICAgIHN1YlBhdGhEZXB0aCsrO1xuXHQgIH07XG5cdFxuXHQgIGFjdGlvbnNbUFVTSF9TVUJfUEFUSF0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoc3ViUGF0aERlcHRoID4gMCkge1xuXHQgICAgICBzdWJQYXRoRGVwdGgtLTtcblx0ICAgICAgbW9kZSA9IElOX1NVQl9QQVRIO1xuXHQgICAgICBhY3Rpb25zW0FQUEVORF0oKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN1YlBhdGhEZXB0aCA9IDA7XG5cdCAgICAgIGtleSA9IGZvcm1hdFN1YlBhdGgoa2V5KTtcblx0ICAgICAgaWYgKGtleSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgYWN0aW9uc1tQVVNIXSgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gbWF5YmVVbmVzY2FwZVF1b3RlKCkge1xuXHQgICAgdmFyIG5leHRDaGFyID0gcGF0aFtpbmRleCArIDFdO1xuXHQgICAgaWYgKG1vZGUgPT09IElOX1NJTkdMRV9RVU9URSAmJiBuZXh0Q2hhciA9PT0gXCInXCIgfHwgbW9kZSA9PT0gSU5fRE9VQkxFX1FVT1RFICYmIG5leHRDaGFyID09PSAnXCInKSB7XG5cdCAgICAgIGluZGV4Kys7XG5cdCAgICAgIG5ld0NoYXIgPSAnXFxcXCcgKyBuZXh0Q2hhcjtcblx0ICAgICAgYWN0aW9uc1tBUFBFTkRdKCk7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgd2hpbGUgKG1vZGUgIT0gbnVsbCkge1xuXHQgICAgaW5kZXgrKztcblx0ICAgIGMgPSBwYXRoW2luZGV4XTtcblx0XG5cdCAgICBpZiAoYyA9PT0gJ1xcXFwnICYmIG1heWJlVW5lc2NhcGVRdW90ZSgpKSB7XG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIHR5cGUgPSBnZXRQYXRoQ2hhclR5cGUoYyk7XG5cdCAgICB0eXBlTWFwID0gcGF0aFN0YXRlTWFjaGluZVttb2RlXTtcblx0ICAgIHRyYW5zaXRpb24gPSB0eXBlTWFwW3R5cGVdIHx8IHR5cGVNYXBbJ2Vsc2UnXSB8fCBFUlJPUjtcblx0XG5cdCAgICBpZiAodHJhbnNpdGlvbiA9PT0gRVJST1IpIHtcblx0ICAgICAgcmV0dXJuOyAvLyBwYXJzZSBlcnJvclxuXHQgICAgfVxuXHRcblx0ICAgIG1vZGUgPSB0cmFuc2l0aW9uWzBdO1xuXHQgICAgYWN0aW9uID0gYWN0aW9uc1t0cmFuc2l0aW9uWzFdXTtcblx0ICAgIGlmIChhY3Rpb24pIHtcblx0ICAgICAgbmV3Q2hhciA9IHRyYW5zaXRpb25bMl07XG5cdCAgICAgIG5ld0NoYXIgPSBuZXdDaGFyID09PSB1bmRlZmluZWQgPyBjIDogbmV3Q2hhcjtcblx0ICAgICAgaWYgKGFjdGlvbigpID09PSBmYWxzZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChtb2RlID09PSBBRlRFUl9QQVRIKSB7XG5cdCAgICAgIGtleXMucmF3ID0gcGF0aDtcblx0ICAgICAgcmV0dXJuIGtleXM7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRXh0ZXJuYWwgcGFyc2UgdGhhdCBjaGVjayBmb3IgYSBjYWNoZSBoaXQgZmlyc3Rcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICogQHJldHVybiB7QXJyYXl8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlUGF0aChwYXRoKSB7XG5cdCAgdmFyIGhpdCA9IHBhdGhDYWNoZS5nZXQocGF0aCk7XG5cdCAgaWYgKCFoaXQpIHtcblx0ICAgIGhpdCA9IHBhcnNlKHBhdGgpO1xuXHQgICAgaWYgKGhpdCkge1xuXHQgICAgICBwYXRoQ2FjaGUucHV0KHBhdGgsIGhpdCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBoaXQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgZnJvbSBhbiBvYmplY3QgZnJvbSBhIHBhdGggc3RyaW5nXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRQYXRoKG9iaiwgcGF0aCkge1xuXHQgIHJldHVybiBwYXJzZUV4cHJlc3Npb24ocGF0aCkuZ2V0KG9iaik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBXYXJuIGFnYWluc3Qgc2V0dGluZyBub24tZXhpc3RlbnQgcm9vdCBwYXRoIG9uIGEgdm0uXG5cdCAqL1xuXHRcblx0dmFyIHdhcm5Ob25FeGlzdGVudDtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICB3YXJuTm9uRXhpc3RlbnQgPSBmdW5jdGlvbiAocGF0aCwgdm0pIHtcblx0ICAgIHdhcm4oJ1lvdSBhcmUgc2V0dGluZyBhIG5vbi1leGlzdGVudCBwYXRoIFwiJyArIHBhdGgucmF3ICsgJ1wiICcgKyAnb24gYSB2bSBpbnN0YW5jZS4gQ29uc2lkZXIgcHJlLWluaXRpYWxpemluZyB0aGUgcHJvcGVydHkgJyArICd3aXRoIHRoZSBcImRhdGFcIiBvcHRpb24gZm9yIG1vcmUgcmVsaWFibGUgcmVhY3Rpdml0eSAnICsgJ2FuZCBiZXR0ZXIgcGVyZm9ybWFuY2UuJywgdm0pO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTZXQgb24gYW4gb2JqZWN0IGZyb20gYSBwYXRoXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmcgfCBBcnJheX0gcGF0aFxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHNldFBhdGgob2JqLCBwYXRoLCB2YWwpIHtcblx0ICB2YXIgb3JpZ2luYWwgPSBvYmo7XG5cdCAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuXHQgICAgcGF0aCA9IHBhcnNlKHBhdGgpO1xuXHQgIH1cblx0ICBpZiAoIXBhdGggfHwgIWlzT2JqZWN0KG9iaikpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgdmFyIGxhc3QsIGtleTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IHBhdGgubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBsYXN0ID0gb2JqO1xuXHQgICAga2V5ID0gcGF0aFtpXTtcblx0ICAgIGlmIChrZXkuY2hhckF0KDApID09PSAnKicpIHtcblx0ICAgICAga2V5ID0gcGFyc2VFeHByZXNzaW9uKGtleS5zbGljZSgxKSkuZ2V0LmNhbGwob3JpZ2luYWwsIG9yaWdpbmFsKTtcblx0ICAgIH1cblx0ICAgIGlmIChpIDwgbCAtIDEpIHtcblx0ICAgICAgb2JqID0gb2JqW2tleV07XG5cdCAgICAgIGlmICghaXNPYmplY3Qob2JqKSkge1xuXHQgICAgICAgIG9iaiA9IHt9O1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGxhc3QuX2lzVnVlKSB7XG5cdCAgICAgICAgICB3YXJuTm9uRXhpc3RlbnQocGF0aCwgbGFzdCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHNldChsYXN0LCBrZXksIG9iaik7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmIChpc0FycmF5KG9iaikpIHtcblx0ICAgICAgICBvYmouJHNldChrZXksIHZhbCk7XG5cdCAgICAgIH0gZWxzZSBpZiAoa2V5IGluIG9iaikge1xuXHQgICAgICAgIG9ialtrZXldID0gdmFsO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG9iai5faXNWdWUpIHtcblx0ICAgICAgICAgIHdhcm5Ob25FeGlzdGVudChwYXRoLCBvYmopO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzZXQob2JqLCBrZXksIHZhbCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdHZhciBwYXRoID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgcGFyc2VQYXRoOiBwYXJzZVBhdGgsXG5cdCAgZ2V0UGF0aDogZ2V0UGF0aCxcblx0ICBzZXRQYXRoOiBzZXRQYXRoXG5cdH0pO1xuXHRcblx0dmFyIGV4cHJlc3Npb25DYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0XG5cdHZhciBhbGxvd2VkS2V5d29yZHMgPSAnTWF0aCxEYXRlLHRoaXMsdHJ1ZSxmYWxzZSxudWxsLHVuZGVmaW5lZCxJbmZpbml0eSxOYU4sJyArICdpc05hTixpc0Zpbml0ZSxkZWNvZGVVUkksZGVjb2RlVVJJQ29tcG9uZW50LGVuY29kZVVSSSwnICsgJ2VuY29kZVVSSUNvbXBvbmVudCxwYXJzZUludCxwYXJzZUZsb2F0Jztcblx0dmFyIGFsbG93ZWRLZXl3b3Jkc1JFID0gbmV3IFJlZ0V4cCgnXignICsgYWxsb3dlZEtleXdvcmRzLnJlcGxhY2UoLywvZywgJ1xcXFxifCcpICsgJ1xcXFxiKScpO1xuXHRcblx0Ly8ga2V5d29yZHMgdGhhdCBkb24ndCBtYWtlIHNlbnNlIGluc2lkZSBleHByZXNzaW9uc1xuXHR2YXIgaW1wcm9wZXJLZXl3b3JkcyA9ICdicmVhayxjYXNlLGNsYXNzLGNhdGNoLGNvbnN0LGNvbnRpbnVlLGRlYnVnZ2VyLGRlZmF1bHQsJyArICdkZWxldGUsZG8sZWxzZSxleHBvcnQsZXh0ZW5kcyxmaW5hbGx5LGZvcixmdW5jdGlvbixpZiwnICsgJ2ltcG9ydCxpbixpbnN0YW5jZW9mLGxldCxyZXR1cm4sc3VwZXIsc3dpdGNoLHRocm93LHRyeSwnICsgJ3Zhcix3aGlsZSx3aXRoLHlpZWxkLGVudW0sYXdhaXQsaW1wbGVtZW50cyxwYWNrYWdlLCcgKyAncHJvdGVjdGVkLHN0YXRpYyxpbnRlcmZhY2UscHJpdmF0ZSxwdWJsaWMnO1xuXHR2YXIgaW1wcm9wZXJLZXl3b3Jkc1JFID0gbmV3IFJlZ0V4cCgnXignICsgaW1wcm9wZXJLZXl3b3Jkcy5yZXBsYWNlKC8sL2csICdcXFxcYnwnKSArICdcXFxcYiknKTtcblx0XG5cdHZhciB3c1JFID0gL1xccy9nO1xuXHR2YXIgbmV3bGluZVJFID0gL1xcbi9nO1xuXHR2YXIgc2F2ZVJFID0gL1tcXHssXVxccypbXFx3XFwkX10rXFxzKjp8KCcoPzpbXidcXFxcXXxcXFxcLikqJ3xcIig/OlteXCJcXFxcXXxcXFxcLikqXCJ8YCg/OlteYFxcXFxdfFxcXFwuKSpcXCRcXHt8XFx9KD86W15gXFxcXF18XFxcXC4pKmB8YCg/OlteYFxcXFxdfFxcXFwuKSpgKXxuZXcgfHR5cGVvZiB8dm9pZCAvZztcblx0dmFyIHJlc3RvcmVSRSA9IC9cIihcXGQrKVwiL2c7XG5cdHZhciBwYXRoVGVzdFJFID0gL15bQS1aYS16XyRdW1xcdyRdKig/OlxcLltBLVphLXpfJF1bXFx3JF0qfFxcWycuKj8nXFxdfFxcW1wiLio/XCJcXF18XFxbXFxkK1xcXXxcXFtbQS1aYS16XyRdW1xcdyRdKlxcXSkqJC87XG5cdHZhciBpZGVudFJFID0gL1teXFx3JFxcLl0oPzpbQS1aYS16XyRdW1xcdyRdKikvZztcblx0dmFyIGxpdGVyYWxWYWx1ZVJFJDEgPSAvXig/OnRydWV8ZmFsc2V8bnVsbHx1bmRlZmluZWR8SW5maW5pdHl8TmFOKSQvO1xuXHRcblx0ZnVuY3Rpb24gbm9vcCgpIHt9XG5cdFxuXHQvKipcblx0ICogU2F2ZSAvIFJld3JpdGUgLyBSZXN0b3JlXG5cdCAqXG5cdCAqIFdoZW4gcmV3cml0aW5nIHBhdGhzIGZvdW5kIGluIGFuIGV4cHJlc3Npb24sIGl0IGlzXG5cdCAqIHBvc3NpYmxlIGZvciB0aGUgc2FtZSBsZXR0ZXIgc2VxdWVuY2VzIHRvIGJlIGZvdW5kIGluXG5cdCAqIHN0cmluZ3MgYW5kIE9iamVjdCBsaXRlcmFsIHByb3BlcnR5IGtleXMuIFRoZXJlZm9yZSB3ZVxuXHQgKiByZW1vdmUgYW5kIHN0b3JlIHRoZXNlIHBhcnRzIGluIGEgdGVtcG9yYXJ5IGFycmF5LCBhbmRcblx0ICogcmVzdG9yZSB0aGVtIGFmdGVyIHRoZSBwYXRoIHJld3JpdGUuXG5cdCAqL1xuXHRcblx0dmFyIHNhdmVkID0gW107XG5cdFxuXHQvKipcblx0ICogU2F2ZSByZXBsYWNlclxuXHQgKlxuXHQgKiBUaGUgc2F2ZSByZWdleCBjYW4gbWF0Y2ggdHdvIHBvc3NpYmxlIGNhc2VzOlxuXHQgKiAxLiBBbiBvcGVuaW5nIG9iamVjdCBsaXRlcmFsXG5cdCAqIDIuIEEgc3RyaW5nXG5cdCAqIElmIG1hdGNoZWQgYXMgYSBwbGFpbiBzdHJpbmcsIHdlIG5lZWQgdG8gZXNjYXBlIGl0c1xuXHQgKiBuZXdsaW5lcywgc2luY2UgdGhlIHN0cmluZyBuZWVkcyB0byBiZSBwcmVzZXJ2ZWQgd2hlblxuXHQgKiBnZW5lcmF0aW5nIHRoZSBmdW5jdGlvbiBib2R5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpc1N0cmluZyAtIHN0ciBpZiBtYXRjaGVkIGFzIGEgc3RyaW5nXG5cdCAqIEByZXR1cm4ge1N0cmluZ30gLSBwbGFjZWhvbGRlciB3aXRoIGluZGV4XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2F2ZShzdHIsIGlzU3RyaW5nKSB7XG5cdCAgdmFyIGkgPSBzYXZlZC5sZW5ndGg7XG5cdCAgc2F2ZWRbaV0gPSBpc1N0cmluZyA/IHN0ci5yZXBsYWNlKG5ld2xpbmVSRSwgJ1xcXFxuJykgOiBzdHI7XG5cdCAgcmV0dXJuICdcIicgKyBpICsgJ1wiJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhdGggcmV3cml0ZSByZXBsYWNlclxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcmF3XG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXdyaXRlKHJhdykge1xuXHQgIHZhciBjID0gcmF3LmNoYXJBdCgwKTtcblx0ICB2YXIgcGF0aCA9IHJhdy5zbGljZSgxKTtcblx0ICBpZiAoYWxsb3dlZEtleXdvcmRzUkUudGVzdChwYXRoKSkge1xuXHQgICAgcmV0dXJuIHJhdztcblx0ICB9IGVsc2Uge1xuXHQgICAgcGF0aCA9IHBhdGguaW5kZXhPZignXCInKSA+IC0xID8gcGF0aC5yZXBsYWNlKHJlc3RvcmVSRSwgcmVzdG9yZSkgOiBwYXRoO1xuXHQgICAgcmV0dXJuIGMgKyAnc2NvcGUuJyArIHBhdGg7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVzdG9yZSByZXBsYWNlclxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpIC0gbWF0Y2hlZCBzYXZlIGluZGV4XG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXN0b3JlKHN0ciwgaSkge1xuXHQgIHJldHVybiBzYXZlZFtpXTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJld3JpdGUgYW4gZXhwcmVzc2lvbiwgcHJlZml4aW5nIGFsbCBwYXRoIGFjY2Vzc29ycyB3aXRoXG5cdCAqIGBzY29wZS5gIGFuZCBnZW5lcmF0ZSBnZXR0ZXIvc2V0dGVyIGZ1bmN0aW9ucy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlR2V0dGVyKGV4cCkge1xuXHQgIGlmIChpbXByb3BlcktleXdvcmRzUkUudGVzdChleHApKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0F2b2lkIHVzaW5nIHJlc2VydmVkIGtleXdvcmRzIGluIGV4cHJlc3Npb246ICcgKyBleHApO1xuXHQgIH1cblx0ICAvLyByZXNldCBzdGF0ZVxuXHQgIHNhdmVkLmxlbmd0aCA9IDA7XG5cdCAgLy8gc2F2ZSBzdHJpbmdzIGFuZCBvYmplY3QgbGl0ZXJhbCBrZXlzXG5cdCAgdmFyIGJvZHkgPSBleHAucmVwbGFjZShzYXZlUkUsIHNhdmUpLnJlcGxhY2Uod3NSRSwgJycpO1xuXHQgIC8vIHJld3JpdGUgYWxsIHBhdGhzXG5cdCAgLy8gcGFkIDEgc3BhY2UgaGVyZSBiZWNhdXNlIHRoZSByZWdleCBtYXRjaGVzIDEgZXh0cmEgY2hhclxuXHQgIGJvZHkgPSAoJyAnICsgYm9keSkucmVwbGFjZShpZGVudFJFLCByZXdyaXRlKS5yZXBsYWNlKHJlc3RvcmVSRSwgcmVzdG9yZSk7XG5cdCAgcmV0dXJuIG1ha2VHZXR0ZXJGbihib2R5KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEJ1aWxkIGEgZ2V0dGVyIGZ1bmN0aW9uLiBSZXF1aXJlcyBldmFsLlxuXHQgKlxuXHQgKiBXZSBpc29sYXRlIHRoZSB0cnkvY2F0Y2ggc28gaXQgZG9lc24ndCBhZmZlY3QgdGhlXG5cdCAqIG9wdGltaXphdGlvbiBvZiB0aGUgcGFyc2UgZnVuY3Rpb24gd2hlbiBpdCBpcyBub3QgY2FsbGVkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gYm9keVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZUdldHRlckZuKGJvZHkpIHtcblx0ICB0cnkge1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgbm8tbmV3LWZ1bmMgKi9cblx0ICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ3Njb3BlJywgJ3JldHVybiAnICsgYm9keSArICc7Jyk7XG5cdCAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLW5ldy1mdW5jICovXG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChlLnRvU3RyaW5nKCkubWF0Y2goL3Vuc2FmZS1ldmFsfENTUC8pKSB7XG5cdCAgICAgICAgd2FybignSXQgc2VlbXMgeW91IGFyZSB1c2luZyB0aGUgZGVmYXVsdCBidWlsZCBvZiBWdWUuanMgaW4gYW4gZW52aXJvbm1lbnQgJyArICd3aXRoIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IHRoYXQgcHJvaGliaXRzIHVuc2FmZS1ldmFsLiAnICsgJ1VzZSB0aGUgQ1NQLWNvbXBsaWFudCBidWlsZCBpbnN0ZWFkOiAnICsgJ2h0dHA6Ly92dWVqcy5vcmcvZ3VpZGUvaW5zdGFsbGF0aW9uLmh0bWwjQ1NQLWNvbXBsaWFudC1idWlsZCcpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHdhcm4oJ0ludmFsaWQgZXhwcmVzc2lvbi4gJyArICdHZW5lcmF0ZWQgZnVuY3Rpb24gYm9keTogJyArIGJvZHkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbm9vcDtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGEgc2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgZXhwcmVzc2lvbi5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZVNldHRlcihleHApIHtcblx0ICB2YXIgcGF0aCA9IHBhcnNlUGF0aChleHApO1xuXHQgIGlmIChwYXRoKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCB2YWwpIHtcblx0ICAgICAgc2V0UGF0aChzY29wZSwgcGF0aCwgdmFsKTtcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBzZXR0ZXIgZXhwcmVzc2lvbjogJyArIGV4cCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2UgYW4gZXhwcmVzc2lvbiBpbnRvIHJlLXdyaXR0ZW4gZ2V0dGVyL3NldHRlcnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHBhcmFtIHtCb29sZWFufSBuZWVkU2V0XG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlRXhwcmVzc2lvbihleHAsIG5lZWRTZXQpIHtcblx0ICBleHAgPSBleHAudHJpbSgpO1xuXHQgIC8vIHRyeSBjYWNoZVxuXHQgIHZhciBoaXQgPSBleHByZXNzaW9uQ2FjaGUuZ2V0KGV4cCk7XG5cdCAgaWYgKGhpdCkge1xuXHQgICAgaWYgKG5lZWRTZXQgJiYgIWhpdC5zZXQpIHtcblx0ICAgICAgaGl0LnNldCA9IGNvbXBpbGVTZXR0ZXIoaGl0LmV4cCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gaGl0O1xuXHQgIH1cblx0ICB2YXIgcmVzID0geyBleHA6IGV4cCB9O1xuXHQgIHJlcy5nZXQgPSBpc1NpbXBsZVBhdGgoZXhwKSAmJiBleHAuaW5kZXhPZignWycpIDwgMFxuXHQgIC8vIG9wdGltaXplZCBzdXBlciBzaW1wbGUgZ2V0dGVyXG5cdCAgPyBtYWtlR2V0dGVyRm4oJ3Njb3BlLicgKyBleHApXG5cdCAgLy8gZHluYW1pYyBnZXR0ZXJcblx0ICA6IGNvbXBpbGVHZXR0ZXIoZXhwKTtcblx0ICBpZiAobmVlZFNldCkge1xuXHQgICAgcmVzLnNldCA9IGNvbXBpbGVTZXR0ZXIoZXhwKTtcblx0ICB9XG5cdCAgZXhwcmVzc2lvbkNhY2hlLnB1dChleHAsIHJlcyk7XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBzaW1wbGUgcGF0aC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzU2ltcGxlUGF0aChleHApIHtcblx0ICByZXR1cm4gcGF0aFRlc3RSRS50ZXN0KGV4cCkgJiZcblx0ICAvLyBkb24ndCB0cmVhdCBsaXRlcmFsIHZhbHVlcyBhcyBwYXRoc1xuXHQgICFsaXRlcmFsVmFsdWVSRSQxLnRlc3QoZXhwKSAmJlxuXHQgIC8vIE1hdGggY29uc3RhbnRzIGUuZy4gTWF0aC5QSSwgTWF0aC5FIGV0Yy5cblx0ICBleHAuc2xpY2UoMCwgNSkgIT09ICdNYXRoLic7XG5cdH1cblx0XG5cdHZhciBleHByZXNzaW9uID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgcGFyc2VFeHByZXNzaW9uOiBwYXJzZUV4cHJlc3Npb24sXG5cdCAgaXNTaW1wbGVQYXRoOiBpc1NpbXBsZVBhdGhcblx0fSk7XG5cdFxuXHQvLyB3ZSBoYXZlIHR3byBzZXBhcmF0ZSBxdWV1ZXM6IG9uZSBmb3IgZGlyZWN0aXZlIHVwZGF0ZXNcblx0Ly8gYW5kIG9uZSBmb3IgdXNlciB3YXRjaGVyIHJlZ2lzdGVyZWQgdmlhICR3YXRjaCgpLlxuXHQvLyB3ZSB3YW50IHRvIGd1YXJhbnRlZSBkaXJlY3RpdmUgdXBkYXRlcyB0byBiZSBjYWxsZWRcblx0Ly8gYmVmb3JlIHVzZXIgd2F0Y2hlcnMgc28gdGhhdCB3aGVuIHVzZXIgd2F0Y2hlcnMgYXJlXG5cdC8vIHRyaWdnZXJlZCwgdGhlIERPTSB3b3VsZCBoYXZlIGFscmVhZHkgYmVlbiBpbiB1cGRhdGVkXG5cdC8vIHN0YXRlLlxuXHRcblx0dmFyIHF1ZXVlID0gW107XG5cdHZhciB1c2VyUXVldWUgPSBbXTtcblx0dmFyIGhhcyA9IHt9O1xuXHR2YXIgY2lyY3VsYXIgPSB7fTtcblx0dmFyIHdhaXRpbmcgPSBmYWxzZTtcblx0XG5cdC8qKlxuXHQgKiBSZXNldCB0aGUgYmF0Y2hlcidzIHN0YXRlLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlc2V0QmF0Y2hlclN0YXRlKCkge1xuXHQgIHF1ZXVlLmxlbmd0aCA9IDA7XG5cdCAgdXNlclF1ZXVlLmxlbmd0aCA9IDA7XG5cdCAgaGFzID0ge307XG5cdCAgY2lyY3VsYXIgPSB7fTtcblx0ICB3YWl0aW5nID0gZmFsc2U7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGbHVzaCBib3RoIHF1ZXVlcyBhbmQgcnVuIHRoZSB3YXRjaGVycy5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmbHVzaEJhdGNoZXJRdWV1ZSgpIHtcblx0ICB2YXIgX2FnYWluID0gdHJ1ZTtcblx0XG5cdCAgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7XG5cdCAgICBfYWdhaW4gPSBmYWxzZTtcblx0XG5cdCAgICBydW5CYXRjaGVyUXVldWUocXVldWUpO1xuXHQgICAgcnVuQmF0Y2hlclF1ZXVlKHVzZXJRdWV1ZSk7XG5cdCAgICAvLyB1c2VyIHdhdGNoZXJzIHRyaWdnZXJlZCBtb3JlIHdhdGNoZXJzLFxuXHQgICAgLy8ga2VlcCBmbHVzaGluZyB1bnRpbCBpdCBkZXBsZXRlc1xuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICBfYWdhaW4gPSB0cnVlO1xuXHQgICAgICBjb250aW51ZSBfZnVuY3Rpb247XG5cdCAgICB9XG5cdCAgICAvLyBkZXYgdG9vbCBob29rXG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmIChkZXZ0b29scyAmJiBjb25maWcuZGV2dG9vbHMpIHtcblx0ICAgICAgZGV2dG9vbHMuZW1pdCgnZmx1c2gnKTtcblx0ICAgIH1cblx0ICAgIHJlc2V0QmF0Y2hlclN0YXRlKCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUnVuIHRoZSB3YXRjaGVycyBpbiBhIHNpbmdsZSBxdWV1ZS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gcXVldWVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBydW5CYXRjaGVyUXVldWUocXVldWUpIHtcblx0ICAvLyBkbyBub3QgY2FjaGUgbGVuZ3RoIGJlY2F1c2UgbW9yZSB3YXRjaGVycyBtaWdodCBiZSBwdXNoZWRcblx0ICAvLyBhcyB3ZSBydW4gZXhpc3Rpbmcgd2F0Y2hlcnNcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgd2F0Y2hlciA9IHF1ZXVlW2ldO1xuXHQgICAgdmFyIGlkID0gd2F0Y2hlci5pZDtcblx0ICAgIGhhc1tpZF0gPSBudWxsO1xuXHQgICAgd2F0Y2hlci5ydW4oKTtcblx0ICAgIC8vIGluIGRldiBidWlsZCwgY2hlY2sgYW5kIHN0b3AgY2lyY3VsYXIgdXBkYXRlcy5cblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGhhc1tpZF0gIT0gbnVsbCkge1xuXHQgICAgICBjaXJjdWxhcltpZF0gPSAoY2lyY3VsYXJbaWRdIHx8IDApICsgMTtcblx0ICAgICAgaWYgKGNpcmN1bGFyW2lkXSA+IGNvbmZpZy5fbWF4VXBkYXRlQ291bnQpIHtcblx0ICAgICAgICB3YXJuKCdZb3UgbWF5IGhhdmUgYW4gaW5maW5pdGUgdXBkYXRlIGxvb3AgZm9yIHdhdGNoZXIgJyArICd3aXRoIGV4cHJlc3Npb24gXCInICsgd2F0Y2hlci5leHByZXNzaW9uICsgJ1wiJywgd2F0Y2hlci52bSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcXVldWUubGVuZ3RoID0gMDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFB1c2ggYSB3YXRjaGVyIGludG8gdGhlIHdhdGNoZXIgcXVldWUuXG5cdCAqIEpvYnMgd2l0aCBkdXBsaWNhdGUgSURzIHdpbGwgYmUgc2tpcHBlZCB1bmxlc3MgaXQnc1xuXHQgKiBwdXNoZWQgd2hlbiB0aGUgcXVldWUgaXMgYmVpbmcgZmx1c2hlZC5cblx0ICpcblx0ICogQHBhcmFtIHtXYXRjaGVyfSB3YXRjaGVyXG5cdCAqICAgcHJvcGVydGllczpcblx0ICogICAtIHtOdW1iZXJ9IGlkXG5cdCAqICAgLSB7RnVuY3Rpb259IHJ1blxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHB1c2hXYXRjaGVyKHdhdGNoZXIpIHtcblx0ICB2YXIgaWQgPSB3YXRjaGVyLmlkO1xuXHQgIGlmIChoYXNbaWRdID09IG51bGwpIHtcblx0ICAgIC8vIHB1c2ggd2F0Y2hlciBpbnRvIGFwcHJvcHJpYXRlIHF1ZXVlXG5cdCAgICB2YXIgcSA9IHdhdGNoZXIudXNlciA/IHVzZXJRdWV1ZSA6IHF1ZXVlO1xuXHQgICAgaGFzW2lkXSA9IHEubGVuZ3RoO1xuXHQgICAgcS5wdXNoKHdhdGNoZXIpO1xuXHQgICAgLy8gcXVldWUgdGhlIGZsdXNoXG5cdCAgICBpZiAoIXdhaXRpbmcpIHtcblx0ICAgICAgd2FpdGluZyA9IHRydWU7XG5cdCAgICAgIG5leHRUaWNrKGZsdXNoQmF0Y2hlclF1ZXVlKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciB1aWQkMiA9IDA7XG5cdFxuXHQvKipcblx0ICogQSB3YXRjaGVyIHBhcnNlcyBhbiBleHByZXNzaW9uLCBjb2xsZWN0cyBkZXBlbmRlbmNpZXMsXG5cdCAqIGFuZCBmaXJlcyBjYWxsYmFjayB3aGVuIHRoZSBleHByZXNzaW9uIHZhbHVlIGNoYW5nZXMuXG5cdCAqIFRoaXMgaXMgdXNlZCBmb3IgYm90aCB0aGUgJHdhdGNoKCkgYXBpIGFuZCBkaXJlY3RpdmVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IGV4cE9yRm5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogICAgICAgICAgICAgICAgIC0ge0FycmF5fSBmaWx0ZXJzXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSB0d29XYXlcblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGRlZXBcblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHVzZXJcblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHN5bmNcblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGxhenlcblx0ICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbcHJlUHJvY2Vzc11cblx0ICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbcG9zdFByb2Nlc3NdXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0ZnVuY3Rpb24gV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIG9wdGlvbnMpIHtcblx0ICAvLyBtaXggaW4gb3B0aW9uc1xuXHQgIGlmIChvcHRpb25zKSB7XG5cdCAgICBleHRlbmQodGhpcywgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIHZhciBpc0ZuID0gdHlwZW9mIGV4cE9yRm4gPT09ICdmdW5jdGlvbic7XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIHZtLl93YXRjaGVycy5wdXNoKHRoaXMpO1xuXHQgIHRoaXMuZXhwcmVzc2lvbiA9IGV4cE9yRm47XG5cdCAgdGhpcy5jYiA9IGNiO1xuXHQgIHRoaXMuaWQgPSArK3VpZCQyOyAvLyB1aWQgZm9yIGJhdGNoaW5nXG5cdCAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuXHQgIHRoaXMuZGlydHkgPSB0aGlzLmxhenk7IC8vIGZvciBsYXp5IHdhdGNoZXJzXG5cdCAgdGhpcy5kZXBzID0gW107XG5cdCAgdGhpcy5uZXdEZXBzID0gW107XG5cdCAgdGhpcy5kZXBJZHMgPSBuZXcgX1NldCgpO1xuXHQgIHRoaXMubmV3RGVwSWRzID0gbmV3IF9TZXQoKTtcblx0ICB0aGlzLnByZXZFcnJvciA9IG51bGw7IC8vIGZvciBhc3luYyBlcnJvciBzdGFja3Ncblx0ICAvLyBwYXJzZSBleHByZXNzaW9uIGZvciBnZXR0ZXIvc2V0dGVyXG5cdCAgaWYgKGlzRm4pIHtcblx0ICAgIHRoaXMuZ2V0dGVyID0gZXhwT3JGbjtcblx0ICAgIHRoaXMuc2V0dGVyID0gdW5kZWZpbmVkO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cE9yRm4sIHRoaXMudHdvV2F5KTtcblx0ICAgIHRoaXMuZ2V0dGVyID0gcmVzLmdldDtcblx0ICAgIHRoaXMuc2V0dGVyID0gcmVzLnNldDtcblx0ICB9XG5cdCAgdGhpcy52YWx1ZSA9IHRoaXMubGF6eSA/IHVuZGVmaW5lZCA6IHRoaXMuZ2V0KCk7XG5cdCAgLy8gc3RhdGUgZm9yIGF2b2lkaW5nIGZhbHNlIHRyaWdnZXJzIGZvciBkZWVwIGFuZCBBcnJheVxuXHQgIC8vIHdhdGNoZXJzIGR1cmluZyB2bS5fZGlnZXN0KClcblx0ICB0aGlzLnF1ZXVlZCA9IHRoaXMuc2hhbGxvdyA9IGZhbHNlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRXZhbHVhdGUgdGhlIGdldHRlciwgYW5kIHJlLWNvbGxlY3QgZGVwZW5kZW5jaWVzLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICB0aGlzLmJlZm9yZUdldCgpO1xuXHQgIHZhciBzY29wZSA9IHRoaXMuc2NvcGUgfHwgdGhpcy52bTtcblx0ICB2YXIgdmFsdWU7XG5cdCAgdHJ5IHtcblx0ICAgIHZhbHVlID0gdGhpcy5nZXR0ZXIuY2FsbChzY29wZSwgc2NvcGUpO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy53YXJuRXhwcmVzc2lvbkVycm9ycykge1xuXHQgICAgICB3YXJuKCdFcnJvciB3aGVuIGV2YWx1YXRpbmcgZXhwcmVzc2lvbiAnICsgJ1wiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIjogJyArIGUudG9TdHJpbmcoKSwgdGhpcy52bSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIFwidG91Y2hcIiBldmVyeSBwcm9wZXJ0eSBzbyB0aGV5IGFyZSBhbGwgdHJhY2tlZCBhc1xuXHQgIC8vIGRlcGVuZGVuY2llcyBmb3IgZGVlcCB3YXRjaGluZ1xuXHQgIGlmICh0aGlzLmRlZXApIHtcblx0ICAgIHRyYXZlcnNlKHZhbHVlKTtcblx0ICB9XG5cdCAgaWYgKHRoaXMucHJlUHJvY2Vzcykge1xuXHQgICAgdmFsdWUgPSB0aGlzLnByZVByb2Nlc3ModmFsdWUpO1xuXHQgIH1cblx0ICBpZiAodGhpcy5maWx0ZXJzKSB7XG5cdCAgICB2YWx1ZSA9IHNjb3BlLl9hcHBseUZpbHRlcnModmFsdWUsIG51bGwsIHRoaXMuZmlsdGVycywgZmFsc2UpO1xuXHQgIH1cblx0ICBpZiAodGhpcy5wb3N0UHJvY2Vzcykge1xuXHQgICAgdmFsdWUgPSB0aGlzLnBvc3RQcm9jZXNzKHZhbHVlKTtcblx0ICB9XG5cdCAgdGhpcy5hZnRlckdldCgpO1xuXHQgIHJldHVybiB2YWx1ZTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTZXQgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgd2l0aCB0aGUgc2V0dGVyLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgdmFyIHNjb3BlID0gdGhpcy5zY29wZSB8fCB0aGlzLnZtO1xuXHQgIGlmICh0aGlzLmZpbHRlcnMpIHtcblx0ICAgIHZhbHVlID0gc2NvcGUuX2FwcGx5RmlsdGVycyh2YWx1ZSwgdGhpcy52YWx1ZSwgdGhpcy5maWx0ZXJzLCB0cnVlKTtcblx0ICB9XG5cdCAgdHJ5IHtcblx0ICAgIHRoaXMuc2V0dGVyLmNhbGwoc2NvcGUsIHNjb3BlLCB2YWx1ZSk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLndhcm5FeHByZXNzaW9uRXJyb3JzKSB7XG5cdCAgICAgIHdhcm4oJ0Vycm9yIHdoZW4gZXZhbHVhdGluZyBzZXR0ZXIgJyArICdcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCI6ICcgKyBlLnRvU3RyaW5nKCksIHRoaXMudm0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyB0d28td2F5IHN5bmMgZm9yIHYtZm9yIGFsaWFzXG5cdCAgdmFyIGZvckNvbnRleHQgPSBzY29wZS4kZm9yQ29udGV4dDtcblx0ICBpZiAoZm9yQ29udGV4dCAmJiBmb3JDb250ZXh0LmFsaWFzID09PSB0aGlzLmV4cHJlc3Npb24pIHtcblx0ICAgIGlmIChmb3JDb250ZXh0LmZpbHRlcnMpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHR3by13YXkgYmluZGluZyBvbiAnICsgJ2Egdi1mb3IgYWxpYXMgKCcgKyB0aGlzLmV4cHJlc3Npb24gKyAnKSwgYW5kIHRoZSAnICsgJ3YtZm9yIGhhcyBmaWx0ZXJzLiBUaGlzIHdpbGwgbm90IHdvcmsgcHJvcGVybHkuICcgKyAnRWl0aGVyIHJlbW92ZSB0aGUgZmlsdGVycyBvciB1c2UgYW4gYXJyYXkgb2YgJyArICdvYmplY3RzIGFuZCBiaW5kIHRvIG9iamVjdCBwcm9wZXJ0aWVzIGluc3RlYWQuJywgdGhpcy52bSk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGZvckNvbnRleHQuX3dpdGhMb2NrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKHNjb3BlLiRrZXkpIHtcblx0ICAgICAgICAvLyBvcmlnaW5hbCBpcyBhbiBvYmplY3Rcblx0ICAgICAgICBmb3JDb250ZXh0LnJhd1ZhbHVlW3Njb3BlLiRrZXldID0gdmFsdWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZm9yQ29udGV4dC5yYXdWYWx1ZS4kc2V0KHNjb3BlLiRpbmRleCwgdmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogUHJlcGFyZSBmb3IgZGVwZW5kZW5jeSBjb2xsZWN0aW9uLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmJlZm9yZUdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICBEZXAudGFyZ2V0ID0gdGhpcztcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBZGQgYSBkZXBlbmRlbmN5IHRvIHRoaXMgZGlyZWN0aXZlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0RlcH0gZGVwXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuYWRkRGVwID0gZnVuY3Rpb24gKGRlcCkge1xuXHQgIHZhciBpZCA9IGRlcC5pZDtcblx0ICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhpZCkpIHtcblx0ICAgIHRoaXMubmV3RGVwSWRzLmFkZChpZCk7XG5cdCAgICB0aGlzLm5ld0RlcHMucHVzaChkZXApO1xuXHQgICAgaWYgKCF0aGlzLmRlcElkcy5oYXMoaWQpKSB7XG5cdCAgICAgIGRlcC5hZGRTdWIodGhpcyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENsZWFuIHVwIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuYWZ0ZXJHZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgRGVwLnRhcmdldCA9IG51bGw7XG5cdCAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHZhciBkZXAgPSB0aGlzLmRlcHNbaV07XG5cdCAgICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhkZXAuaWQpKSB7XG5cdCAgICAgIGRlcC5yZW1vdmVTdWIodGhpcyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciB0bXAgPSB0aGlzLmRlcElkcztcblx0ICB0aGlzLmRlcElkcyA9IHRoaXMubmV3RGVwSWRzO1xuXHQgIHRoaXMubmV3RGVwSWRzID0gdG1wO1xuXHQgIHRoaXMubmV3RGVwSWRzLmNsZWFyKCk7XG5cdCAgdG1wID0gdGhpcy5kZXBzO1xuXHQgIHRoaXMuZGVwcyA9IHRoaXMubmV3RGVwcztcblx0ICB0aGlzLm5ld0RlcHMgPSB0bXA7XG5cdCAgdGhpcy5uZXdEZXBzLmxlbmd0aCA9IDA7XG5cdH07XG5cdFxuXHQvKipcblx0ICogU3Vic2NyaWJlciBpbnRlcmZhY2UuXG5cdCAqIFdpbGwgYmUgY2FsbGVkIHdoZW4gYSBkZXBlbmRlbmN5IGNoYW5nZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hhbGxvd1xuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChzaGFsbG93KSB7XG5cdCAgaWYgKHRoaXMubGF6eSkge1xuXHQgICAgdGhpcy5kaXJ0eSA9IHRydWU7XG5cdCAgfSBlbHNlIGlmICh0aGlzLnN5bmMgfHwgIWNvbmZpZy5hc3luYykge1xuXHQgICAgdGhpcy5ydW4oKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gaWYgcXVldWVkLCBvbmx5IG92ZXJ3cml0ZSBzaGFsbG93IHdpdGggbm9uLXNoYWxsb3csXG5cdCAgICAvLyBidXQgbm90IHRoZSBvdGhlciB3YXkgYXJvdW5kLlxuXHQgICAgdGhpcy5zaGFsbG93ID0gdGhpcy5xdWV1ZWQgPyBzaGFsbG93ID8gdGhpcy5zaGFsbG93IDogZmFsc2UgOiAhIXNoYWxsb3c7XG5cdCAgICB0aGlzLnF1ZXVlZCA9IHRydWU7XG5cdCAgICAvLyByZWNvcmQgYmVmb3JlLXB1c2ggZXJyb3Igc3RhY2sgaW4gZGVidWcgbW9kZVxuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcuZGVidWcpIHtcblx0ICAgICAgdGhpcy5wcmV2RXJyb3IgPSBuZXcgRXJyb3IoJ1t2dWVdIGFzeW5jIHN0YWNrIHRyYWNlJyk7XG5cdCAgICB9XG5cdCAgICBwdXNoV2F0Y2hlcih0aGlzKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQmF0Y2hlciBqb2IgaW50ZXJmYWNlLlxuXHQgKiBXaWxsIGJlIGNhbGxlZCBieSB0aGUgYmF0Y2hlci5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKHRoaXMuYWN0aXZlKSB7XG5cdCAgICB2YXIgdmFsdWUgPSB0aGlzLmdldCgpO1xuXHQgICAgaWYgKHZhbHVlICE9PSB0aGlzLnZhbHVlIHx8XG5cdCAgICAvLyBEZWVwIHdhdGNoZXJzIGFuZCB3YXRjaGVycyBvbiBPYmplY3QvQXJyYXlzIHNob3VsZCBmaXJlIGV2ZW5cblx0ICAgIC8vIHdoZW4gdGhlIHZhbHVlIGlzIHRoZSBzYW1lLCBiZWNhdXNlIHRoZSB2YWx1ZSBtYXlcblx0ICAgIC8vIGhhdmUgbXV0YXRlZDsgYnV0IG9ubHkgZG8gc28gaWYgdGhpcyBpcyBhXG5cdCAgICAvLyBub24tc2hhbGxvdyB1cGRhdGUgKGNhdXNlZCBieSBhIHZtIGRpZ2VzdCkuXG5cdCAgICAoaXNPYmplY3QodmFsdWUpIHx8IHRoaXMuZGVlcCkgJiYgIXRoaXMuc2hhbGxvdykge1xuXHQgICAgICAvLyBzZXQgbmV3IHZhbHVlXG5cdCAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWU7XG5cdCAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgLy8gaW4gZGVidWcgKyBhc3luYyBtb2RlLCB3aGVuIGEgd2F0Y2hlciBjYWxsYmFja3Ncblx0ICAgICAgLy8gdGhyb3dzLCB3ZSBhbHNvIHRocm93IHRoZSBzYXZlZCBiZWZvcmUtcHVzaCBlcnJvclxuXHQgICAgICAvLyBzbyB0aGUgZnVsbCBjcm9zcy10aWNrIHN0YWNrIHRyYWNlIGlzIGF2YWlsYWJsZS5cblx0ICAgICAgdmFyIHByZXZFcnJvciA9IHRoaXMucHJldkVycm9yO1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLmRlYnVnICYmIHByZXZFcnJvcikge1xuXHQgICAgICAgIHRoaXMucHJldkVycm9yID0gbnVsbDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICB0aHJvdyBwcmV2RXJyb3I7XG5cdCAgICAgICAgICB9LCAwKTtcblx0ICAgICAgICAgIHRocm93IGU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aGlzLnF1ZXVlZCA9IHRoaXMuc2hhbGxvdyA9IGZhbHNlO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBFdmFsdWF0ZSB0aGUgdmFsdWUgb2YgdGhlIHdhdGNoZXIuXG5cdCAqIFRoaXMgb25seSBnZXRzIGNhbGxlZCBmb3IgbGF6eSB3YXRjaGVycy5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAvLyBhdm9pZCBvdmVyd3JpdGluZyBhbm90aGVyIHdhdGNoZXIgdGhhdCBpcyBiZWluZ1xuXHQgIC8vIGNvbGxlY3RlZC5cblx0ICB2YXIgY3VycmVudCA9IERlcC50YXJnZXQ7XG5cdCAgdGhpcy52YWx1ZSA9IHRoaXMuZ2V0KCk7XG5cdCAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuXHQgIERlcC50YXJnZXQgPSBjdXJyZW50O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIERlcGVuZCBvbiBhbGwgZGVwcyBjb2xsZWN0ZWQgYnkgdGhpcyB3YXRjaGVyLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgdGhpcy5kZXBzW2ldLmRlcGVuZCgpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgc2VsZiBmcm9tIGFsbCBkZXBlbmRlbmNpZXMnIHN1YmNyaWJlciBsaXN0LlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLnRlYXJkb3duID0gZnVuY3Rpb24gKCkge1xuXHQgIGlmICh0aGlzLmFjdGl2ZSkge1xuXHQgICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSB2bSdzIHdhdGNoZXIgbGlzdFxuXHQgICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGV4cGVuc2l2ZSBvcGVyYXRpb24gc28gd2Ugc2tpcCBpdFxuXHQgICAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIGRlc3Ryb3llZCBvciBpcyBwZXJmb3JtaW5nIGEgdi1mb3Jcblx0ICAgIC8vIHJlLXJlbmRlciAodGhlIHdhdGNoZXIgbGlzdCBpcyB0aGVuIGZpbHRlcmVkIGJ5IHYtZm9yKS5cblx0ICAgIGlmICghdGhpcy52bS5faXNCZWluZ0Rlc3Ryb3llZCAmJiAhdGhpcy52bS5fdkZvclJlbW92aW5nKSB7XG5cdCAgICAgIHRoaXMudm0uX3dhdGNoZXJzLiRyZW1vdmUodGhpcyk7XG5cdCAgICB9XG5cdCAgICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHRoaXMuZGVwc1tpXS5yZW1vdmVTdWIodGhpcyk7XG5cdCAgICB9XG5cdCAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuXHQgICAgdGhpcy52bSA9IHRoaXMuY2IgPSB0aGlzLnZhbHVlID0gbnVsbDtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogUmVjcnVzaXZlbHkgdHJhdmVyc2UgYW4gb2JqZWN0IHRvIGV2b2tlIGFsbCBjb252ZXJ0ZWRcblx0ICogZ2V0dGVycywgc28gdGhhdCBldmVyeSBuZXN0ZWQgcHJvcGVydHkgaW5zaWRlIHRoZSBvYmplY3Rcblx0ICogaXMgY29sbGVjdGVkIGFzIGEgXCJkZWVwXCIgZGVwZW5kZW5jeS5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICovXG5cdFxuXHR2YXIgc2Vlbk9iamVjdHMgPSBuZXcgX1NldCgpO1xuXHRmdW5jdGlvbiB0cmF2ZXJzZSh2YWwsIHNlZW4pIHtcblx0ICB2YXIgaSA9IHVuZGVmaW5lZCxcblx0ICAgICAga2V5cyA9IHVuZGVmaW5lZDtcblx0ICBpZiAoIXNlZW4pIHtcblx0ICAgIHNlZW4gPSBzZWVuT2JqZWN0cztcblx0ICAgIHNlZW4uY2xlYXIoKTtcblx0ICB9XG5cdCAgdmFyIGlzQSA9IGlzQXJyYXkodmFsKTtcblx0ICB2YXIgaXNPID0gaXNPYmplY3QodmFsKTtcblx0ICBpZiAoKGlzQSB8fCBpc08pICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsKSkge1xuXHQgICAgaWYgKHZhbC5fX29iX18pIHtcblx0ICAgICAgdmFyIGRlcElkID0gdmFsLl9fb2JfXy5kZXAuaWQ7XG5cdCAgICAgIGlmIChzZWVuLmhhcyhkZXBJZCkpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc2Vlbi5hZGQoZGVwSWQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAoaXNBKSB7XG5cdCAgICAgIGkgPSB2YWwubGVuZ3RoO1xuXHQgICAgICB3aGlsZSAoaS0tKSB0cmF2ZXJzZSh2YWxbaV0sIHNlZW4pO1xuXHQgICAgfSBlbHNlIGlmIChpc08pIHtcblx0ICAgICAga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7XG5cdCAgICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKGktLSkgdHJhdmVyc2UodmFsW2tleXNbaV1dLCBzZWVuKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciB0ZXh0JDEgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB0aGlzLmF0dHIgPSB0aGlzLmVsLm5vZGVUeXBlID09PSAzID8gJ2RhdGEnIDogJ3RleHRDb250ZW50Jztcblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdGhpcy5lbFt0aGlzLmF0dHJdID0gX3RvU3RyaW5nKHZhbHVlKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgdGVtcGxhdGVDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0dmFyIGlkU2VsZWN0b3JDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0XG5cdHZhciBtYXAgPSB7XG5cdCAgZWZhdWx0OiBbMCwgJycsICcnXSxcblx0ICBsZWdlbmQ6IFsxLCAnPGZpZWxkc2V0PicsICc8L2ZpZWxkc2V0PiddLFxuXHQgIHRyOiBbMiwgJzx0YWJsZT48dGJvZHk+JywgJzwvdGJvZHk+PC90YWJsZT4nXSxcblx0ICBjb2w6IFsyLCAnPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4nLCAnPC9jb2xncm91cD48L3RhYmxlPiddXG5cdH07XG5cdFxuXHRtYXAudGQgPSBtYXAudGggPSBbMywgJzx0YWJsZT48dGJvZHk+PHRyPicsICc8L3RyPjwvdGJvZHk+PC90YWJsZT4nXTtcblx0XG5cdG1hcC5vcHRpb24gPSBtYXAub3B0Z3JvdXAgPSBbMSwgJzxzZWxlY3QgbXVsdGlwbGU9XCJtdWx0aXBsZVwiPicsICc8L3NlbGVjdD4nXTtcblx0XG5cdG1hcC50aGVhZCA9IG1hcC50Ym9keSA9IG1hcC5jb2xncm91cCA9IG1hcC5jYXB0aW9uID0gbWFwLnRmb290ID0gWzEsICc8dGFibGU+JywgJzwvdGFibGU+J107XG5cdFxuXHRtYXAuZyA9IG1hcC5kZWZzID0gbWFwLnN5bWJvbCA9IG1hcC51c2UgPSBtYXAuaW1hZ2UgPSBtYXAudGV4dCA9IG1hcC5jaXJjbGUgPSBtYXAuZWxsaXBzZSA9IG1hcC5saW5lID0gbWFwLnBhdGggPSBtYXAucG9seWdvbiA9IG1hcC5wb2x5bGluZSA9IG1hcC5yZWN0ID0gWzEsICc8c3ZnICcgKyAneG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiICcgKyAneG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgJyArICd4bWxuczpldj1cImh0dHA6Ly93d3cudzMub3JnLzIwMDEveG1sLWV2ZW50c1wiJyArICd2ZXJzaW9uPVwiMS4xXCI+JywgJzwvc3ZnPiddO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGEgbm9kZSBpcyBhIHN1cHBvcnRlZCB0ZW1wbGF0ZSBub2RlIHdpdGggYVxuXHQgKiBEb2N1bWVudEZyYWdtZW50IGNvbnRlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzUmVhbFRlbXBsYXRlKG5vZGUpIHtcblx0ICByZXR1cm4gaXNUZW1wbGF0ZShub2RlKSAmJiBpc0ZyYWdtZW50KG5vZGUuY29udGVudCk7XG5cdH1cblx0XG5cdHZhciB0YWdSRSQxID0gLzwoW1xcdzotXSspLztcblx0dmFyIGVudGl0eVJFID0gLyYjP1xcdys/Oy87XG5cdHZhciBjb21tZW50UkUgPSAvPCEtLS87XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBhIHN0cmluZyB0ZW1wbGF0ZSB0byBhIERvY3VtZW50RnJhZ21lbnQuXG5cdCAqIERldGVybWluZXMgY29ycmVjdCB3cmFwcGluZyBieSB0YWcgdHlwZXMuIFdyYXBwaW5nXG5cdCAqIHN0cmF0ZWd5IGZvdW5kIGluIGpRdWVyeSAmIGNvbXBvbmVudC9kb21pZnkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0ZW1wbGF0ZVN0cmluZ1xuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHJhd1xuXHQgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHN0cmluZ1RvRnJhZ21lbnQodGVtcGxhdGVTdHJpbmcsIHJhdykge1xuXHQgIC8vIHRyeSBhIGNhY2hlIGhpdCBmaXJzdFxuXHQgIHZhciBjYWNoZUtleSA9IHJhdyA/IHRlbXBsYXRlU3RyaW5nIDogdGVtcGxhdGVTdHJpbmcudHJpbSgpO1xuXHQgIHZhciBoaXQgPSB0ZW1wbGF0ZUNhY2hlLmdldChjYWNoZUtleSk7XG5cdCAgaWYgKGhpdCkge1xuXHQgICAgcmV0dXJuIGhpdDtcblx0ICB9XG5cdFxuXHQgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXHQgIHZhciB0YWdNYXRjaCA9IHRlbXBsYXRlU3RyaW5nLm1hdGNoKHRhZ1JFJDEpO1xuXHQgIHZhciBlbnRpdHlNYXRjaCA9IGVudGl0eVJFLnRlc3QodGVtcGxhdGVTdHJpbmcpO1xuXHQgIHZhciBjb21tZW50TWF0Y2ggPSBjb21tZW50UkUudGVzdCh0ZW1wbGF0ZVN0cmluZyk7XG5cdFxuXHQgIGlmICghdGFnTWF0Y2ggJiYgIWVudGl0eU1hdGNoICYmICFjb21tZW50TWF0Y2gpIHtcblx0ICAgIC8vIHRleHQgb25seSwgcmV0dXJuIGEgc2luZ2xlIHRleHQgbm9kZS5cblx0ICAgIGZyYWcuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGVtcGxhdGVTdHJpbmcpKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHRhZyA9IHRhZ01hdGNoICYmIHRhZ01hdGNoWzFdO1xuXHQgICAgdmFyIHdyYXAgPSBtYXBbdGFnXSB8fCBtYXAuZWZhdWx0O1xuXHQgICAgdmFyIGRlcHRoID0gd3JhcFswXTtcblx0ICAgIHZhciBwcmVmaXggPSB3cmFwWzFdO1xuXHQgICAgdmFyIHN1ZmZpeCA9IHdyYXBbMl07XG5cdCAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcblx0ICAgIG5vZGUuaW5uZXJIVE1MID0gcHJlZml4ICsgdGVtcGxhdGVTdHJpbmcgKyBzdWZmaXg7XG5cdCAgICB3aGlsZSAoZGVwdGgtLSkge1xuXHQgICAgICBub2RlID0gbm9kZS5sYXN0Q2hpbGQ7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGNoaWxkO1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIHdoaWxlIChjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZCkge1xuXHQgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICAgIGZyYWcuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoIXJhdykge1xuXHQgICAgdHJpbU5vZGUoZnJhZyk7XG5cdCAgfVxuXHQgIHRlbXBsYXRlQ2FjaGUucHV0KGNhY2hlS2V5LCBmcmFnKTtcblx0ICByZXR1cm4gZnJhZztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgYSB0ZW1wbGF0ZSBub2RlIHRvIGEgRG9jdW1lbnRGcmFnbWVudC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbm9kZVRvRnJhZ21lbnQobm9kZSkge1xuXHQgIC8vIGlmIGl0cyBhIHRlbXBsYXRlIHRhZyBhbmQgdGhlIGJyb3dzZXIgc3VwcG9ydHMgaXQsXG5cdCAgLy8gaXRzIGNvbnRlbnQgaXMgYWxyZWFkeSBhIGRvY3VtZW50IGZyYWdtZW50LiBIb3dldmVyLCBpT1MgU2FmYXJpIGhhc1xuXHQgIC8vIGJ1ZyB3aGVuIHVzaW5nIGRpcmVjdGx5IGNsb25lZCB0ZW1wbGF0ZSBjb250ZW50IHdpdGggdG91Y2hcblx0ICAvLyBldmVudHMgYW5kIGNhbiBjYXVzZSBjcmFzaGVzIHdoZW4gdGhlIG5vZGVzIGFyZSByZW1vdmVkIGZyb20gRE9NLCBzbyB3ZVxuXHQgIC8vIGhhdmUgdG8gdHJlYXQgdGVtcGxhdGUgZWxlbWVudHMgYXMgc3RyaW5nIHRlbXBsYXRlcy4gKCMyODA1KVxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChpc1JlYWxUZW1wbGF0ZShub2RlKSkge1xuXHQgICAgcmV0dXJuIHN0cmluZ1RvRnJhZ21lbnQobm9kZS5pbm5lckhUTUwpO1xuXHQgIH1cblx0ICAvLyBzY3JpcHQgdGVtcGxhdGVcblx0ICBpZiAobm9kZS50YWdOYW1lID09PSAnU0NSSVBUJykge1xuXHQgICAgcmV0dXJuIHN0cmluZ1RvRnJhZ21lbnQobm9kZS50ZXh0Q29udGVudCk7XG5cdCAgfVxuXHQgIC8vIG5vcm1hbCBub2RlLCBjbG9uZSBpdCB0byBhdm9pZCBtdXRhdGluZyB0aGUgb3JpZ2luYWxcblx0ICB2YXIgY2xvbmVkTm9kZSA9IGNsb25lTm9kZShub2RlKTtcblx0ICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0ICB2YXIgY2hpbGQ7XG5cdCAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICB3aGlsZSAoY2hpbGQgPSBjbG9uZWROb2RlLmZpcnN0Q2hpbGQpIHtcblx0ICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIGZyYWcuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuXHQgIH1cblx0ICB0cmltTm9kZShmcmFnKTtcblx0ICByZXR1cm4gZnJhZztcblx0fVxuXHRcblx0Ly8gVGVzdCBmb3IgdGhlIHByZXNlbmNlIG9mIHRoZSBTYWZhcmkgdGVtcGxhdGUgY2xvbmluZyBidWdcblx0Ly8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd3VnLmNnaT9pZD0xMzc3NTVcblx0dmFyIGhhc0Jyb2tlblRlbXBsYXRlID0gKGZ1bmN0aW9uICgpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuXHQgIGlmIChpbkJyb3dzZXIpIHtcblx0ICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICBhLmlubmVySFRNTCA9ICc8dGVtcGxhdGU+MTwvdGVtcGxhdGU+Jztcblx0ICAgIHJldHVybiAhYS5jbG9uZU5vZGUodHJ1ZSkuZmlyc3RDaGlsZC5pbm5lckhUTUw7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdH0pKCk7XG5cdFxuXHQvLyBUZXN0IGZvciBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGNsb25lIGJ1Z1xuXHR2YXIgaGFzVGV4dGFyZWFDbG9uZUJ1ZyA9IChmdW5jdGlvbiAoKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICBpZiAoaW5Ccm93c2VyKSB7XG5cdCAgICB2YXIgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG5cdCAgICB0LnBsYWNlaG9sZGVyID0gJ3QnO1xuXHQgICAgcmV0dXJuIHQuY2xvbmVOb2RlKHRydWUpLnZhbHVlID09PSAndCc7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdH0pKCk7XG5cdFxuXHQvKipcblx0ICogMS4gRGVhbCB3aXRoIFNhZmFyaSBjbG9uaW5nIG5lc3RlZCA8dGVtcGxhdGU+IGJ1ZyBieVxuXHQgKiAgICBtYW51YWxseSBjbG9uaW5nIGFsbCB0ZW1wbGF0ZSBpbnN0YW5jZXMuXG5cdCAqIDIuIERlYWwgd2l0aCBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGJ1ZyBieSBzZXR0aW5nXG5cdCAqICAgIHRoZSBjb3JyZWN0IHZhbHVlIGFmdGVyIGNsb25pbmcuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBub2RlXG5cdCAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjbG9uZU5vZGUobm9kZSkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICghbm9kZS5xdWVyeVNlbGVjdG9yQWxsKSB7XG5cdCAgICByZXR1cm4gbm9kZS5jbG9uZU5vZGUoKTtcblx0ICB9XG5cdCAgdmFyIHJlcyA9IG5vZGUuY2xvbmVOb2RlKHRydWUpO1xuXHQgIHZhciBpLCBvcmlnaW5hbCwgY2xvbmVkO1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChoYXNCcm9rZW5UZW1wbGF0ZSkge1xuXHQgICAgdmFyIHRlbXBDbG9uZSA9IHJlcztcblx0ICAgIGlmIChpc1JlYWxUZW1wbGF0ZShub2RlKSkge1xuXHQgICAgICBub2RlID0gbm9kZS5jb250ZW50O1xuXHQgICAgICB0ZW1wQ2xvbmUgPSByZXMuY29udGVudDtcblx0ICAgIH1cblx0ICAgIG9yaWdpbmFsID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpO1xuXHQgICAgaWYgKG9yaWdpbmFsLmxlbmd0aCkge1xuXHQgICAgICBjbG9uZWQgPSB0ZW1wQ2xvbmUucXVlcnlTZWxlY3RvckFsbCgndGVtcGxhdGUnKTtcblx0ICAgICAgaSA9IGNsb25lZC5sZW5ndGg7XG5cdCAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICBjbG9uZWRbaV0ucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoY2xvbmVOb2RlKG9yaWdpbmFsW2ldKSwgY2xvbmVkW2ldKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaGFzVGV4dGFyZWFDbG9uZUJ1Zykge1xuXHQgICAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuXHQgICAgICByZXMudmFsdWUgPSBub2RlLnZhbHVlO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb3JpZ2luYWwgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJyk7XG5cdCAgICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcblx0ICAgICAgICBjbG9uZWQgPSByZXMucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKTtcblx0ICAgICAgICBpID0gY2xvbmVkLmxlbmd0aDtcblx0ICAgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAgICBjbG9uZWRbaV0udmFsdWUgPSBvcmlnaW5hbFtpXS52YWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByb2Nlc3MgdGhlIHRlbXBsYXRlIG9wdGlvbiBhbmQgbm9ybWFsaXplcyBpdCBpbnRvIGFcblx0ICogYSBEb2N1bWVudEZyYWdtZW50IHRoYXQgY2FuIGJlIHVzZWQgYXMgYSBwYXJ0aWFsIG9yIGFcblx0ICogaW5zdGFuY2UgdGVtcGxhdGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdGVtcGxhdGVcblx0ICogICAgICAgIFBvc3NpYmxlIHZhbHVlcyBpbmNsdWRlOlxuXHQgKiAgICAgICAgLSBEb2N1bWVudEZyYWdtZW50IG9iamVjdFxuXHQgKiAgICAgICAgLSBOb2RlIG9iamVjdCBvZiB0eXBlIFRlbXBsYXRlXG5cdCAqICAgICAgICAtIGlkIHNlbGVjdG9yOiAnI3NvbWUtdGVtcGxhdGUtaWQnXG5cdCAqICAgICAgICAtIHRlbXBsYXRlIHN0cmluZzogJzxkaXY+PHNwYW4+e3ttc2d9fTwvc3Bhbj48L2Rpdj4nXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hvdWxkQ2xvbmVcblx0ICogQHBhcmFtIHtCb29sZWFufSByYXdcblx0ICogICAgICAgIGlubGluZSBIVE1MIGludGVycG9sYXRpb24uIERvIG5vdCBjaGVjayBmb3IgaWRcblx0ICogICAgICAgIHNlbGVjdG9yIGFuZCBrZWVwIHdoaXRlc3BhY2UgaW4gdGhlIHN0cmluZy5cblx0ICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudHx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgc2hvdWxkQ2xvbmUsIHJhdykge1xuXHQgIHZhciBub2RlLCBmcmFnO1xuXHRcblx0ICAvLyBpZiB0aGUgdGVtcGxhdGUgaXMgYWxyZWFkeSBhIGRvY3VtZW50IGZyYWdtZW50LFxuXHQgIC8vIGRvIG5vdGhpbmdcblx0ICBpZiAoaXNGcmFnbWVudCh0ZW1wbGF0ZSkpIHtcblx0ICAgIHRyaW1Ob2RlKHRlbXBsYXRlKTtcblx0ICAgIHJldHVybiBzaG91bGRDbG9uZSA/IGNsb25lTm9kZSh0ZW1wbGF0ZSkgOiB0ZW1wbGF0ZTtcblx0ICB9XG5cdFxuXHQgIGlmICh0eXBlb2YgdGVtcGxhdGUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAvLyBpZCBzZWxlY3RvclxuXHQgICAgaWYgKCFyYXcgJiYgdGVtcGxhdGUuY2hhckF0KDApID09PSAnIycpIHtcblx0ICAgICAgLy8gaWQgc2VsZWN0b3IgY2FuIGJlIGNhY2hlZCB0b29cblx0ICAgICAgZnJhZyA9IGlkU2VsZWN0b3JDYWNoZS5nZXQodGVtcGxhdGUpO1xuXHQgICAgICBpZiAoIWZyYWcpIHtcblx0ICAgICAgICBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGVtcGxhdGUuc2xpY2UoMSkpO1xuXHQgICAgICAgIGlmIChub2RlKSB7XG5cdCAgICAgICAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQobm9kZSk7XG5cdCAgICAgICAgICAvLyBzYXZlIHNlbGVjdG9yIHRvIGNhY2hlXG5cdCAgICAgICAgICBpZFNlbGVjdG9yQ2FjaGUucHV0KHRlbXBsYXRlLCBmcmFnKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIG5vcm1hbCBzdHJpbmcgdGVtcGxhdGVcblx0ICAgICAgZnJhZyA9IHN0cmluZ1RvRnJhZ21lbnQodGVtcGxhdGUsIHJhdyk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICh0ZW1wbGF0ZS5ub2RlVHlwZSkge1xuXHQgICAgLy8gYSBkaXJlY3Qgbm9kZVxuXHQgICAgZnJhZyA9IG5vZGVUb0ZyYWdtZW50KHRlbXBsYXRlKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBmcmFnICYmIHNob3VsZENsb25lID8gY2xvbmVOb2RlKGZyYWcpIDogZnJhZztcblx0fVxuXHRcblx0dmFyIHRlbXBsYXRlID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgY2xvbmVOb2RlOiBjbG9uZU5vZGUsXG5cdCAgcGFyc2VUZW1wbGF0ZTogcGFyc2VUZW1wbGF0ZVxuXHR9KTtcblx0XG5cdHZhciBodG1sID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gYSBjb21tZW50IG5vZGUgbWVhbnMgdGhpcyBpcyBhIGJpbmRpbmcgZm9yXG5cdCAgICAvLyB7e3sgaW5saW5lIHVuZXNjYXBlZCBodG1sIH19fVxuXHQgICAgaWYgKHRoaXMuZWwubm9kZVR5cGUgPT09IDgpIHtcblx0ICAgICAgLy8gaG9sZCBub2Rlc1xuXHQgICAgICB0aGlzLm5vZGVzID0gW107XG5cdCAgICAgIC8vIHJlcGxhY2UgdGhlIHBsYWNlaG9sZGVyIHdpdGggcHJvcGVyIGFuY2hvclxuXHQgICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1odG1sJyk7XG5cdCAgICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB2YWx1ZSA9IF90b1N0cmluZyh2YWx1ZSk7XG5cdCAgICBpZiAodGhpcy5ub2Rlcykge1xuXHQgICAgICB0aGlzLnN3YXAodmFsdWUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5lbC5pbm5lckhUTUwgPSB2YWx1ZTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBzd2FwOiBmdW5jdGlvbiBzd2FwKHZhbHVlKSB7XG5cdCAgICAvLyByZW1vdmUgb2xkIG5vZGVzXG5cdCAgICB2YXIgaSA9IHRoaXMubm9kZXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICByZW1vdmUodGhpcy5ub2Rlc1tpXSk7XG5cdCAgICB9XG5cdCAgICAvLyBjb252ZXJ0IG5ldyB2YWx1ZSB0byBhIGZyYWdtZW50XG5cdCAgICAvLyBkbyBub3QgYXR0ZW1wdCB0byByZXRyaWV2ZSBmcm9tIGlkIHNlbGVjdG9yXG5cdCAgICB2YXIgZnJhZyA9IHBhcnNlVGVtcGxhdGUodmFsdWUsIHRydWUsIHRydWUpO1xuXHQgICAgLy8gc2F2ZSBhIHJlZmVyZW5jZSB0byB0aGVzZSBub2RlcyBzbyB3ZSBjYW4gcmVtb3ZlIGxhdGVyXG5cdCAgICB0aGlzLm5vZGVzID0gdG9BcnJheShmcmFnLmNoaWxkTm9kZXMpO1xuXHQgICAgYmVmb3JlKGZyYWcsIHRoaXMuYW5jaG9yKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQWJzdHJhY3Rpb24gZm9yIGEgcGFydGlhbGx5LWNvbXBpbGVkIGZyYWdtZW50LlxuXHQgKiBDYW4gb3B0aW9uYWxseSBjb21waWxlIGNvbnRlbnQgd2l0aCBhIGNoaWxkIHNjb3BlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaW5rZXJcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuXHQgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG5cdCAqIEBwYXJhbSB7RnJhZ21lbnR9IFtwYXJlbnRGcmFnXVxuXHQgKi9cblx0ZnVuY3Rpb24gRnJhZ21lbnQobGlua2VyLCB2bSwgZnJhZywgaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpIHtcblx0ICB0aGlzLmNoaWxkcmVuID0gW107XG5cdCAgdGhpcy5jaGlsZEZyYWdzID0gW107XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIHRoaXMuc2NvcGUgPSBzY29wZTtcblx0ICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG5cdCAgdGhpcy5wYXJlbnRGcmFnID0gcGFyZW50RnJhZztcblx0ICBpZiAocGFyZW50RnJhZykge1xuXHQgICAgcGFyZW50RnJhZy5jaGlsZEZyYWdzLnB1c2godGhpcyk7XG5cdCAgfVxuXHQgIHRoaXMudW5saW5rID0gbGlua2VyKHZtLCBmcmFnLCBob3N0LCBzY29wZSwgdGhpcyk7XG5cdCAgdmFyIHNpbmdsZSA9IHRoaXMuc2luZ2xlID0gZnJhZy5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSAmJlxuXHQgIC8vIGRvIG5vdCBnbyBzaW5nbGUgbW9kZSBpZiB0aGUgb25seSBub2RlIGlzIGFuIGFuY2hvclxuXHQgICFmcmFnLmNoaWxkTm9kZXNbMF0uX192X2FuY2hvcjtcblx0ICBpZiAoc2luZ2xlKSB7XG5cdCAgICB0aGlzLm5vZGUgPSBmcmFnLmNoaWxkTm9kZXNbMF07XG5cdCAgICB0aGlzLmJlZm9yZSA9IHNpbmdsZUJlZm9yZTtcblx0ICAgIHRoaXMucmVtb3ZlID0gc2luZ2xlUmVtb3ZlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLm5vZGUgPSBjcmVhdGVBbmNob3IoJ2ZyYWdtZW50LXN0YXJ0Jyk7XG5cdCAgICB0aGlzLmVuZCA9IGNyZWF0ZUFuY2hvcignZnJhZ21lbnQtZW5kJyk7XG5cdCAgICB0aGlzLmZyYWcgPSBmcmFnO1xuXHQgICAgcHJlcGVuZCh0aGlzLm5vZGUsIGZyYWcpO1xuXHQgICAgZnJhZy5hcHBlbmRDaGlsZCh0aGlzLmVuZCk7XG5cdCAgICB0aGlzLmJlZm9yZSA9IG11bHRpQmVmb3JlO1xuXHQgICAgdGhpcy5yZW1vdmUgPSBtdWx0aVJlbW92ZTtcblx0ICB9XG5cdCAgdGhpcy5ub2RlLl9fdl9mcmFnID0gdGhpcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENhbGwgYXR0YWNoL2RldGFjaCBmb3IgYWxsIGNvbXBvbmVudHMgY29udGFpbmVkIHdpdGhpblxuXHQgKiB0aGlzIGZyYWdtZW50LiBBbHNvIGRvIHNvIHJlY3Vyc2l2ZWx5IGZvciBhbGwgY2hpbGRcblx0ICogZnJhZ21lbnRzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rXG5cdCAqL1xuXHRcblx0RnJhZ21lbnQucHJvdG90eXBlLmNhbGxIb29rID0gZnVuY3Rpb24gKGhvb2spIHtcblx0ICB2YXIgaSwgbDtcblx0ICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdGhpcy5jaGlsZEZyYWdzW2ldLmNhbGxIb29rKGhvb2spO1xuXHQgIH1cblx0ICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGhvb2sodGhpcy5jaGlsZHJlbltpXSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzaW5nbGVCZWZvcmUodGFyZ2V0LCB3aXRoVHJhbnNpdGlvbikge1xuXHQgIHRoaXMuaW5zZXJ0ZWQgPSB0cnVlO1xuXHQgIHZhciBtZXRob2QgPSB3aXRoVHJhbnNpdGlvbiAhPT0gZmFsc2UgPyBiZWZvcmVXaXRoVHJhbnNpdGlvbiA6IGJlZm9yZTtcblx0ICBtZXRob2QodGhpcy5ub2RlLCB0YXJnZXQsIHRoaXMudm0pO1xuXHQgIGlmIChpbkRvYyh0aGlzLm5vZGUpKSB7XG5cdCAgICB0aGlzLmNhbGxIb29rKGF0dGFjaCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGZyYWdtZW50LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2luZ2xlUmVtb3ZlKCkge1xuXHQgIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcblx0ICB2YXIgc2hvdWxkQ2FsbFJlbW92ZSA9IGluRG9jKHRoaXMubm9kZSk7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIHRoaXMuYmVmb3JlUmVtb3ZlKCk7XG5cdCAgcmVtb3ZlV2l0aFRyYW5zaXRpb24odGhpcy5ub2RlLCB0aGlzLnZtLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoc2hvdWxkQ2FsbFJlbW92ZSkge1xuXHQgICAgICBzZWxmLmNhbGxIb29rKGRldGFjaCk7XG5cdCAgICB9XG5cdCAgICBzZWxmLmRlc3Ryb3koKTtcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtdWx0aUJlZm9yZSh0YXJnZXQsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgdGhpcy5pbnNlcnRlZCA9IHRydWU7XG5cdCAgdmFyIHZtID0gdGhpcy52bTtcblx0ICB2YXIgbWV0aG9kID0gd2l0aFRyYW5zaXRpb24gIT09IGZhbHNlID8gYmVmb3JlV2l0aFRyYW5zaXRpb24gOiBiZWZvcmU7XG5cdCAgbWFwTm9kZVJhbmdlKHRoaXMubm9kZSwgdGhpcy5lbmQsIGZ1bmN0aW9uIChub2RlKSB7XG5cdCAgICBtZXRob2Qobm9kZSwgdGFyZ2V0LCB2bSk7XG5cdCAgfSk7XG5cdCAgaWYgKGluRG9jKHRoaXMubm9kZSkpIHtcblx0ICAgIHRoaXMuY2FsbEhvb2soYXR0YWNoKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgZnJhZ21lbnQsIG11bHRpLW5vZGVzIHZlcnNpb25cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtdWx0aVJlbW92ZSgpIHtcblx0ICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIHZhciBzaG91bGRDYWxsUmVtb3ZlID0gaW5Eb2ModGhpcy5ub2RlKTtcblx0ICB0aGlzLmJlZm9yZVJlbW92ZSgpO1xuXHQgIHJlbW92ZU5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCB0aGlzLnZtLCB0aGlzLmZyYWcsIGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChzaG91bGRDYWxsUmVtb3ZlKSB7XG5cdCAgICAgIHNlbGYuY2FsbEhvb2soZGV0YWNoKTtcblx0ICAgIH1cblx0ICAgIHNlbGYuZGVzdHJveSgpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJlcGFyZSB0aGUgZnJhZ21lbnQgZm9yIHJlbW92YWwuXG5cdCAqL1xuXHRcblx0RnJhZ21lbnQucHJvdG90eXBlLmJlZm9yZVJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgaSwgbDtcblx0ICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgLy8gY2FsbCB0aGUgc2FtZSBtZXRob2QgcmVjdXJzaXZlbHkgb24gY2hpbGRcblx0ICAgIC8vIGZyYWdtZW50cywgZGVwdGgtZmlyc3Rcblx0ICAgIHRoaXMuY2hpbGRGcmFnc1tpXS5iZWZvcmVSZW1vdmUoZmFsc2UpO1xuXHQgIH1cblx0ICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIC8vIENhbGwgZGVzdHJveSBmb3IgYWxsIGNvbnRhaW5lZCBpbnN0YW5jZXMsXG5cdCAgICAvLyB3aXRoIHJlbW92ZTpmYWxzZSBhbmQgZGVmZXI6dHJ1ZS5cblx0ICAgIC8vIERlZmVyIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHdlIG5lZWQgdG9cblx0ICAgIC8vIGtlZXAgdGhlIGNoaWxkcmVuIHRvIGNhbGwgZGV0YWNoIGhvb2tzXG5cdCAgICAvLyBvbiB0aGVtLlxuXHQgICAgdGhpcy5jaGlsZHJlbltpXS4kZGVzdHJveShmYWxzZSwgdHJ1ZSk7XG5cdCAgfVxuXHQgIHZhciBkaXJzID0gdGhpcy51bmxpbmsuZGlycztcblx0ICBmb3IgKGkgPSAwLCBsID0gZGlycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIC8vIGRpc2FibGUgdGhlIHdhdGNoZXJzIG9uIGFsbCB0aGUgZGlyZWN0aXZlc1xuXHQgICAgLy8gc28gdGhhdCB0aGUgcmVuZGVyZWQgY29udGVudCBzdGF5cyB0aGUgc2FtZVxuXHQgICAgLy8gZHVyaW5nIHJlbW92YWwuXG5cdCAgICBkaXJzW2ldLl93YXRjaGVyICYmIGRpcnNbaV0uX3dhdGNoZXIudGVhcmRvd24oKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogRGVzdHJveSB0aGUgZnJhZ21lbnQuXG5cdCAqL1xuXHRcblx0RnJhZ21lbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKHRoaXMucGFyZW50RnJhZykge1xuXHQgICAgdGhpcy5wYXJlbnRGcmFnLmNoaWxkRnJhZ3MuJHJlbW92ZSh0aGlzKTtcblx0ICB9XG5cdCAgdGhpcy5ub2RlLl9fdl9mcmFnID0gbnVsbDtcblx0ICB0aGlzLnVubGluaygpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENhbGwgYXR0YWNoIGhvb2sgZm9yIGEgVnVlIGluc3RhbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhdHRhY2goY2hpbGQpIHtcblx0ICBpZiAoIWNoaWxkLl9pc0F0dGFjaGVkICYmIGluRG9jKGNoaWxkLiRlbCkpIHtcblx0ICAgIGNoaWxkLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDYWxsIGRldGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IGNoaWxkXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGV0YWNoKGNoaWxkKSB7XG5cdCAgaWYgKGNoaWxkLl9pc0F0dGFjaGVkICYmICFpbkRvYyhjaGlsZC4kZWwpKSB7XG5cdCAgICBjaGlsZC5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgbGlua2VyQ2FjaGUgPSBuZXcgQ2FjaGUoNTAwMCk7XG5cdFxuXHQvKipcblx0ICogQSBmYWN0b3J5IHRoYXQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGluc3RhbmNlcyBvZiBhXG5cdCAqIGZyYWdtZW50LiBDYWNoZXMgdGhlIGNvbXBpbGVkIGxpbmtlciBpZiBwb3NzaWJsZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RWxlbWVudHxTdHJpbmd9IGVsXG5cdCAqL1xuXHRmdW5jdGlvbiBGcmFnbWVudEZhY3Rvcnkodm0sIGVsKSB7XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIHZhciB0ZW1wbGF0ZTtcblx0ICB2YXIgaXNTdHJpbmcgPSB0eXBlb2YgZWwgPT09ICdzdHJpbmcnO1xuXHQgIGlmIChpc1N0cmluZyB8fCBpc1RlbXBsYXRlKGVsKSAmJiAhZWwuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcblx0ICAgIHRlbXBsYXRlID0gcGFyc2VUZW1wbGF0ZShlbCwgdHJ1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXHQgICAgdGVtcGxhdGUuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH1cblx0ICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG5cdCAgLy8gbGlua2VyIGNhbiBiZSBjYWNoZWQsIGJ1dCBvbmx5IGZvciBjb21wb25lbnRzXG5cdCAgdmFyIGxpbmtlcjtcblx0ICB2YXIgY2lkID0gdm0uY29uc3RydWN0b3IuY2lkO1xuXHQgIGlmIChjaWQgPiAwKSB7XG5cdCAgICB2YXIgY2FjaGVJZCA9IGNpZCArIChpc1N0cmluZyA/IGVsIDogZ2V0T3V0ZXJIVE1MKGVsKSk7XG5cdCAgICBsaW5rZXIgPSBsaW5rZXJDYWNoZS5nZXQoY2FjaGVJZCk7XG5cdCAgICBpZiAoIWxpbmtlcikge1xuXHQgICAgICBsaW5rZXIgPSBjb21waWxlKHRlbXBsYXRlLCB2bS4kb3B0aW9ucywgdHJ1ZSk7XG5cdCAgICAgIGxpbmtlckNhY2hlLnB1dChjYWNoZUlkLCBsaW5rZXIpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBsaW5rZXIgPSBjb21waWxlKHRlbXBsYXRlLCB2bS4kb3B0aW9ucywgdHJ1ZSk7XG5cdCAgfVxuXHQgIHRoaXMubGlua2VyID0gbGlua2VyO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlIGEgZnJhZ21lbnQgaW5zdGFuY2Ugd2l0aCBnaXZlbiBob3N0IGFuZCBzY29wZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IGhvc3Rcblx0ICogQHBhcmFtIHtPYmplY3R9IHNjb3BlXG5cdCAqIEBwYXJhbSB7RnJhZ21lbnR9IHBhcmVudEZyYWdcblx0ICovXG5cdFxuXHRGcmFnbWVudEZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChob3N0LCBzY29wZSwgcGFyZW50RnJhZykge1xuXHQgIHZhciBmcmFnID0gY2xvbmVOb2RlKHRoaXMudGVtcGxhdGUpO1xuXHQgIHJldHVybiBuZXcgRnJhZ21lbnQodGhpcy5saW5rZXIsIHRoaXMudm0sIGZyYWcsIGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKTtcblx0fTtcblx0XG5cdHZhciBPTiA9IDcwMDtcblx0dmFyIE1PREVMID0gODAwO1xuXHR2YXIgQklORCA9IDg1MDtcblx0dmFyIFRSQU5TSVRJT04gPSAxMTAwO1xuXHR2YXIgRUwgPSAxNTAwO1xuXHR2YXIgQ09NUE9ORU5UID0gMTUwMDtcblx0dmFyIFBBUlRJQUwgPSAxNzUwO1xuXHR2YXIgSUYgPSAyMTAwO1xuXHR2YXIgRk9SID0gMjIwMDtcblx0dmFyIFNMT1QgPSAyMzAwO1xuXHRcblx0dmFyIHVpZCQzID0gMDtcblx0XG5cdHZhciB2Rm9yID0ge1xuXHRcblx0ICBwcmlvcml0eTogRk9SLFxuXHQgIHRlcm1pbmFsOiB0cnVlLFxuXHRcblx0ICBwYXJhbXM6IFsndHJhY2stYnknLCAnc3RhZ2dlcicsICdlbnRlci1zdGFnZ2VyJywgJ2xlYXZlLXN0YWdnZXInXSxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8vIHN1cHBvcnQgXCJpdGVtIGluL29mIGl0ZW1zXCIgc3ludGF4XG5cdCAgICB2YXIgaW5NYXRjaCA9IHRoaXMuZXhwcmVzc2lvbi5tYXRjaCgvKC4qKSAoPzppbnxvZikgKC4qKS8pO1xuXHQgICAgaWYgKGluTWF0Y2gpIHtcblx0ICAgICAgdmFyIGl0TWF0Y2ggPSBpbk1hdGNoWzFdLm1hdGNoKC9cXCgoLiopLCguKilcXCkvKTtcblx0ICAgICAgaWYgKGl0TWF0Y2gpIHtcblx0ICAgICAgICB0aGlzLml0ZXJhdG9yID0gaXRNYXRjaFsxXS50cmltKCk7XG5cdCAgICAgICAgdGhpcy5hbGlhcyA9IGl0TWF0Y2hbMl0udHJpbSgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuYWxpYXMgPSBpbk1hdGNoWzFdLnRyaW0oKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLmV4cHJlc3Npb24gPSBpbk1hdGNoWzJdO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICghdGhpcy5hbGlhcykge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgdi1mb3IgZXhwcmVzc2lvbiBcIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2FsaWFzIGlzIHJlcXVpcmVkLicsIHRoaXMudm0pO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gdWlkIGFzIGEgY2FjaGUgaWRlbnRpZmllclxuXHQgICAgdGhpcy5pZCA9ICdfX3YtZm9yX18nICsgKyt1aWQkMztcblx0XG5cdCAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGFuIG9wdGlvbiBsaXN0LFxuXHQgICAgLy8gc28gdGhhdCB3ZSBrbm93IGlmIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSA8c2VsZWN0PidzXG5cdCAgICAvLyB2LW1vZGVsIHdoZW4gdGhlIG9wdGlvbiBsaXN0IGhhcyBjaGFuZ2VkLlxuXHQgICAgLy8gYmVjYXVzZSB2LW1vZGVsIGhhcyBhIGxvd2VyIHByaW9yaXR5IHRoYW4gdi1mb3IsXG5cdCAgICAvLyB0aGUgdi1tb2RlbCBpcyBub3QgYm91bmQgaGVyZSB5ZXQsIHNvIHdlIGhhdmUgdG9cblx0ICAgIC8vIHJldHJpdmUgaXQgaW4gdGhlIGFjdHVhbCB1cGRhdGVNb2RlbCgpIGZ1bmN0aW9uLlxuXHQgICAgdmFyIHRhZyA9IHRoaXMuZWwudGFnTmFtZTtcblx0ICAgIHRoaXMuaXNPcHRpb24gPSAodGFnID09PSAnT1BUSU9OJyB8fCB0YWcgPT09ICdPUFRHUk9VUCcpICYmIHRoaXMuZWwucGFyZW50Tm9kZS50YWdOYW1lID09PSAnU0VMRUNUJztcblx0XG5cdCAgICAvLyBzZXR1cCBhbmNob3Igbm9kZXNcblx0ICAgIHRoaXMuc3RhcnQgPSBjcmVhdGVBbmNob3IoJ3YtZm9yLXN0YXJ0Jyk7XG5cdCAgICB0aGlzLmVuZCA9IGNyZWF0ZUFuY2hvcigndi1mb3ItZW5kJyk7XG5cdCAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuZW5kKTtcblx0ICAgIGJlZm9yZSh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7XG5cdFxuXHQgICAgLy8gY2FjaGVcblx0ICAgIHRoaXMuY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRcblx0ICAgIC8vIGZyYWdtZW50IGZhY3Rvcnlcblx0ICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgdGhpcy5lbCk7XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoZGF0YSkge1xuXHQgICAgdGhpcy5kaWZmKGRhdGEpO1xuXHQgICAgdGhpcy51cGRhdGVSZWYoKTtcblx0ICAgIHRoaXMudXBkYXRlTW9kZWwoKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBEaWZmLCBiYXNlZCBvbiBuZXcgZGF0YSBhbmQgb2xkIGRhdGEsIGRldGVybWluZSB0aGVcblx0ICAgKiBtaW5pbXVtIGFtb3VudCBvZiBET00gbWFuaXB1bGF0aW9ucyBuZWVkZWQgdG8gbWFrZSB0aGVcblx0ICAgKiBET00gcmVmbGVjdCB0aGUgbmV3IGRhdGEgQXJyYXkuXG5cdCAgICpcblx0ICAgKiBUaGUgYWxnb3JpdGhtIGRpZmZzIHRoZSBuZXcgZGF0YSBBcnJheSBieSBzdG9yaW5nIGFcblx0ICAgKiBoaWRkZW4gcmVmZXJlbmNlIHRvIGFuIG93bmVyIHZtIGluc3RhbmNlIG9uIHByZXZpb3VzbHlcblx0ICAgKiBzZWVuIGRhdGEuIFRoaXMgYWxsb3dzIHVzIHRvIGFjaGlldmUgTyhuKSB3aGljaCBpc1xuXHQgICAqIGJldHRlciB0aGFuIGEgbGV2ZW5zaHRlaW4gZGlzdGFuY2UgYmFzZWQgYWxnb3JpdGhtLFxuXHQgICAqIHdoaWNoIGlzIE8obSAqIG4pLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtBcnJheX0gZGF0YVxuXHQgICAqL1xuXHRcblx0ICBkaWZmOiBmdW5jdGlvbiBkaWZmKGRhdGEpIHtcblx0ICAgIC8vIGNoZWNrIGlmIHRoZSBBcnJheSB3YXMgY29udmVydGVkIGZyb20gYW4gT2JqZWN0XG5cdCAgICB2YXIgaXRlbSA9IGRhdGFbMF07XG5cdCAgICB2YXIgY29udmVydGVkRnJvbU9iamVjdCA9IHRoaXMuZnJvbU9iamVjdCA9IGlzT2JqZWN0KGl0ZW0pICYmIGhhc093bihpdGVtLCAnJGtleScpICYmIGhhc093bihpdGVtLCAnJHZhbHVlJyk7XG5cdFxuXHQgICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuXHQgICAgdmFyIG9sZEZyYWdzID0gdGhpcy5mcmFncztcblx0ICAgIHZhciBmcmFncyA9IHRoaXMuZnJhZ3MgPSBuZXcgQXJyYXkoZGF0YS5sZW5ndGgpO1xuXHQgICAgdmFyIGFsaWFzID0gdGhpcy5hbGlhcztcblx0ICAgIHZhciBpdGVyYXRvciA9IHRoaXMuaXRlcmF0b3I7XG5cdCAgICB2YXIgc3RhcnQgPSB0aGlzLnN0YXJ0O1xuXHQgICAgdmFyIGVuZCA9IHRoaXMuZW5kO1xuXHQgICAgdmFyIGluRG9jdW1lbnQgPSBpbkRvYyhzdGFydCk7XG5cdCAgICB2YXIgaW5pdCA9ICFvbGRGcmFncztcblx0ICAgIHZhciBpLCBsLCBmcmFnLCBrZXksIHZhbHVlLCBwcmltaXRpdmU7XG5cdFxuXHQgICAgLy8gRmlyc3QgcGFzcywgZ28gdGhyb3VnaCB0aGUgbmV3IEFycmF5IGFuZCBmaWxsIHVwXG5cdCAgICAvLyB0aGUgbmV3IGZyYWdzIGFycmF5LiBJZiBhIHBpZWNlIG9mIGRhdGEgaGFzIGEgY2FjaGVkXG5cdCAgICAvLyBpbnN0YW5jZSBmb3IgaXQsIHdlIHJldXNlIGl0LiBPdGhlcndpc2UgYnVpbGQgYSBuZXdcblx0ICAgIC8vIGluc3RhbmNlLlxuXHQgICAgZm9yIChpID0gMCwgbCA9IGRhdGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGl0ZW0gPSBkYXRhW2ldO1xuXHQgICAgICBrZXkgPSBjb252ZXJ0ZWRGcm9tT2JqZWN0ID8gaXRlbS4ka2V5IDogbnVsbDtcblx0ICAgICAgdmFsdWUgPSBjb252ZXJ0ZWRGcm9tT2JqZWN0ID8gaXRlbS4kdmFsdWUgOiBpdGVtO1xuXHQgICAgICBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuXHQgICAgICBmcmFnID0gIWluaXQgJiYgdGhpcy5nZXRDYWNoZWRGcmFnKHZhbHVlLCBpLCBrZXkpO1xuXHQgICAgICBpZiAoZnJhZykge1xuXHQgICAgICAgIC8vIHJldXNhYmxlIGZyYWdtZW50XG5cdCAgICAgICAgZnJhZy5yZXVzZWQgPSB0cnVlO1xuXHQgICAgICAgIC8vIHVwZGF0ZSAkaW5kZXhcblx0ICAgICAgICBmcmFnLnNjb3BlLiRpbmRleCA9IGk7XG5cdCAgICAgICAgLy8gdXBkYXRlICRrZXlcblx0ICAgICAgICBpZiAoa2V5KSB7XG5cdCAgICAgICAgICBmcmFnLnNjb3BlLiRrZXkgPSBrZXk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIHVwZGF0ZSBpdGVyYXRvclxuXHQgICAgICAgIGlmIChpdGVyYXRvcikge1xuXHQgICAgICAgICAgZnJhZy5zY29wZVtpdGVyYXRvcl0gPSBrZXkgIT09IG51bGwgPyBrZXkgOiBpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyB1cGRhdGUgZGF0YSBmb3IgdHJhY2stYnksIG9iamVjdCByZXBlYXQgJlxuXHQgICAgICAgIC8vIHByaW1pdGl2ZSB2YWx1ZXMuXG5cdCAgICAgICAgaWYgKHRyYWNrQnlLZXkgfHwgY29udmVydGVkRnJvbU9iamVjdCB8fCBwcmltaXRpdmUpIHtcblx0ICAgICAgICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgZnJhZy5zY29wZVthbGlhc10gPSB2YWx1ZTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBuZXcgaXNudGFuY2Vcblx0ICAgICAgICBmcmFnID0gdGhpcy5jcmVhdGUodmFsdWUsIGFsaWFzLCBpLCBrZXkpO1xuXHQgICAgICAgIGZyYWcuZnJlc2ggPSAhaW5pdDtcblx0ICAgICAgfVxuXHQgICAgICBmcmFnc1tpXSA9IGZyYWc7XG5cdCAgICAgIGlmIChpbml0KSB7XG5cdCAgICAgICAgZnJhZy5iZWZvcmUoZW5kKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIHdlJ3JlIGRvbmUgZm9yIHRoZSBpbml0aWFsIHJlbmRlci5cblx0ICAgIGlmIChpbml0KSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBTZWNvbmQgcGFzcywgZ28gdGhyb3VnaCB0aGUgb2xkIGZyYWdtZW50cyBhbmRcblx0ICAgIC8vIGRlc3Ryb3kgdGhvc2Ugd2hvIGFyZSBub3QgcmV1c2VkIChhbmQgcmVtb3ZlIHRoZW1cblx0ICAgIC8vIGZyb20gY2FjaGUpXG5cdCAgICB2YXIgcmVtb3ZhbEluZGV4ID0gMDtcblx0ICAgIHZhciB0b3RhbFJlbW92ZWQgPSBvbGRGcmFncy5sZW5ndGggLSBmcmFncy5sZW5ndGg7XG5cdCAgICAvLyB3aGVuIHJlbW92aW5nIGEgbGFyZ2UgbnVtYmVyIG9mIGZyYWdtZW50cywgd2F0Y2hlciByZW1vdmFsXG5cdCAgICAvLyB0dXJucyBvdXQgdG8gYmUgYSBwZXJmIGJvdHRsZW5lY2ssIHNvIHdlIGJhdGNoIHRoZSB3YXRjaGVyXG5cdCAgICAvLyByZW1vdmFscyBpbnRvIGEgc2luZ2xlIGZpbHRlciBjYWxsIVxuXHQgICAgdGhpcy52bS5fdkZvclJlbW92aW5nID0gdHJ1ZTtcblx0ICAgIGZvciAoaSA9IDAsIGwgPSBvbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgZnJhZyA9IG9sZEZyYWdzW2ldO1xuXHQgICAgICBpZiAoIWZyYWcucmV1c2VkKSB7XG5cdCAgICAgICAgdGhpcy5kZWxldGVDYWNoZWRGcmFnKGZyYWcpO1xuXHQgICAgICAgIHRoaXMucmVtb3ZlKGZyYWcsIHJlbW92YWxJbmRleCsrLCB0b3RhbFJlbW92ZWQsIGluRG9jdW1lbnQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aGlzLnZtLl92Rm9yUmVtb3ZpbmcgPSBmYWxzZTtcblx0ICAgIGlmIChyZW1vdmFsSW5kZXgpIHtcblx0ICAgICAgdGhpcy52bS5fd2F0Y2hlcnMgPSB0aGlzLnZtLl93YXRjaGVycy5maWx0ZXIoZnVuY3Rpb24gKHcpIHtcblx0ICAgICAgICByZXR1cm4gdy5hY3RpdmU7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEZpbmFsIHBhc3MsIG1vdmUvaW5zZXJ0IG5ldyBmcmFnbWVudHMgaW50byB0aGVcblx0ICAgIC8vIHJpZ2h0IHBsYWNlLlxuXHQgICAgdmFyIHRhcmdldFByZXYsIHByZXZFbCwgY3VycmVudFByZXY7XG5cdCAgICB2YXIgaW5zZXJ0aW9uSW5kZXggPSAwO1xuXHQgICAgZm9yIChpID0gMCwgbCA9IGZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBmcmFnID0gZnJhZ3NbaV07XG5cdCAgICAgIC8vIHRoaXMgaXMgdGhlIGZyYWcgdGhhdCB3ZSBzaG91bGQgYmUgYWZ0ZXJcblx0ICAgICAgdGFyZ2V0UHJldiA9IGZyYWdzW2kgLSAxXTtcblx0ICAgICAgcHJldkVsID0gdGFyZ2V0UHJldiA/IHRhcmdldFByZXYuc3RhZ2dlckNiID8gdGFyZ2V0UHJldi5zdGFnZ2VyQW5jaG9yIDogdGFyZ2V0UHJldi5lbmQgfHwgdGFyZ2V0UHJldi5ub2RlIDogc3RhcnQ7XG5cdCAgICAgIGlmIChmcmFnLnJldXNlZCAmJiAhZnJhZy5zdGFnZ2VyQ2IpIHtcblx0ICAgICAgICBjdXJyZW50UHJldiA9IGZpbmRQcmV2RnJhZyhmcmFnLCBzdGFydCwgdGhpcy5pZCk7XG5cdCAgICAgICAgaWYgKGN1cnJlbnRQcmV2ICE9PSB0YXJnZXRQcmV2ICYmICghY3VycmVudFByZXYgfHxcblx0ICAgICAgICAvLyBvcHRpbWl6YXRpb24gZm9yIG1vdmluZyBhIHNpbmdsZSBpdGVtLlxuXHQgICAgICAgIC8vIHRoYW5rcyB0byBzdWdnZXN0aW9ucyBieSBAbGl2b3JhcyBpbiAjMTgwN1xuXHQgICAgICAgIGZpbmRQcmV2RnJhZyhjdXJyZW50UHJldiwgc3RhcnQsIHRoaXMuaWQpICE9PSB0YXJnZXRQcmV2KSkge1xuXHQgICAgICAgICAgdGhpcy5tb3ZlKGZyYWcsIHByZXZFbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIG5ldyBpbnN0YW5jZSwgb3Igc3RpbGwgaW4gc3RhZ2dlci5cblx0ICAgICAgICAvLyBpbnNlcnQgd2l0aCB1cGRhdGVkIHN0YWdnZXIgaW5kZXguXG5cdCAgICAgICAgdGhpcy5pbnNlcnQoZnJhZywgaW5zZXJ0aW9uSW5kZXgrKywgcHJldkVsLCBpbkRvY3VtZW50KTtcblx0ICAgICAgfVxuXHQgICAgICBmcmFnLnJldXNlZCA9IGZyYWcuZnJlc2ggPSBmYWxzZTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGUgYSBuZXcgZnJhZ21lbnQgaW5zdGFuY2UuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGFsaWFzXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IFtrZXldXG5cdCAgICogQHJldHVybiB7RnJhZ21lbnR9XG5cdCAgICovXG5cdFxuXHQgIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlKHZhbHVlLCBhbGlhcywgaW5kZXgsIGtleSkge1xuXHQgICAgdmFyIGhvc3QgPSB0aGlzLl9ob3N0O1xuXHQgICAgLy8gY3JlYXRlIGl0ZXJhdGlvbiBzY29wZVxuXHQgICAgdmFyIHBhcmVudFNjb3BlID0gdGhpcy5fc2NvcGUgfHwgdGhpcy52bTtcblx0ICAgIHZhciBzY29wZSA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUpO1xuXHQgICAgLy8gcmVmIGhvbGRlciBmb3IgdGhlIHNjb3BlXG5cdCAgICBzY29wZS4kcmVmcyA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUuJHJlZnMpO1xuXHQgICAgc2NvcGUuJGVscyA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUuJGVscyk7XG5cdCAgICAvLyBtYWtlIHN1cmUgcG9pbnQgJHBhcmVudCB0byBwYXJlbnQgc2NvcGVcblx0ICAgIHNjb3BlLiRwYXJlbnQgPSBwYXJlbnRTY29wZTtcblx0ICAgIC8vIGZvciB0d28td2F5IGJpbmRpbmcgb24gYWxpYXNcblx0ICAgIHNjb3BlLiRmb3JDb250ZXh0ID0gdGhpcztcblx0ICAgIC8vIGRlZmluZSBzY29wZSBwcm9wZXJ0aWVzXG5cdCAgICAvLyBpbXBvcnRhbnQ6IGRlZmluZSB0aGUgc2NvcGUgYWxpYXMgd2l0aG91dCBmb3JjZWQgY29udmVyc2lvblxuXHQgICAgLy8gc28gdGhhdCBmcm96ZW4gZGF0YSBzdHJ1Y3R1cmVzIHJlbWFpbiBub24tcmVhY3RpdmUuXG5cdCAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCBhbGlhcywgdmFsdWUpO1xuXHQgICAgfSk7XG5cdCAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgJyRpbmRleCcsIGluZGV4KTtcblx0ICAgIGlmIChrZXkpIHtcblx0ICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsICcka2V5Jywga2V5KTtcblx0ICAgIH0gZWxzZSBpZiAoc2NvcGUuJGtleSkge1xuXHQgICAgICAvLyBhdm9pZCBhY2NpZGVudGFsIGZhbGxiYWNrXG5cdCAgICAgIGRlZihzY29wZSwgJyRrZXknLCBudWxsKTtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLml0ZXJhdG9yKSB7XG5cdCAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCB0aGlzLml0ZXJhdG9yLCBrZXkgIT09IG51bGwgPyBrZXkgOiBpbmRleCk7XG5cdCAgICB9XG5cdCAgICB2YXIgZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUoaG9zdCwgc2NvcGUsIHRoaXMuX2ZyYWcpO1xuXHQgICAgZnJhZy5mb3JJZCA9IHRoaXMuaWQ7XG5cdCAgICB0aGlzLmNhY2hlRnJhZyh2YWx1ZSwgZnJhZywgaW5kZXgsIGtleSk7XG5cdCAgICByZXR1cm4gZnJhZztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBVcGRhdGUgdGhlIHYtcmVmIG9uIG93bmVyIHZtLlxuXHQgICAqL1xuXHRcblx0ICB1cGRhdGVSZWY6IGZ1bmN0aW9uIHVwZGF0ZVJlZigpIHtcblx0ICAgIHZhciByZWYgPSB0aGlzLmRlc2NyaXB0b3IucmVmO1xuXHQgICAgaWYgKCFyZWYpIHJldHVybjtcblx0ICAgIHZhciBoYXNoID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRyZWZzO1xuXHQgICAgdmFyIHJlZnM7XG5cdCAgICBpZiAoIXRoaXMuZnJvbU9iamVjdCkge1xuXHQgICAgICByZWZzID0gdGhpcy5mcmFncy5tYXAoZmluZFZtRnJvbUZyYWcpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVmcyA9IHt9O1xuXHQgICAgICB0aGlzLmZyYWdzLmZvckVhY2goZnVuY3Rpb24gKGZyYWcpIHtcblx0ICAgICAgICByZWZzW2ZyYWcuc2NvcGUuJGtleV0gPSBmaW5kVm1Gcm9tRnJhZyhmcmFnKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgICBoYXNoW3JlZl0gPSByZWZzO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEZvciBvcHRpb24gbGlzdHMsIHVwZGF0ZSB0aGUgY29udGFpbmluZyB2LW1vZGVsIG9uXG5cdCAgICogcGFyZW50IDxzZWxlY3Q+LlxuXHQgICAqL1xuXHRcblx0ICB1cGRhdGVNb2RlbDogZnVuY3Rpb24gdXBkYXRlTW9kZWwoKSB7XG5cdCAgICBpZiAodGhpcy5pc09wdGlvbikge1xuXHQgICAgICB2YXIgcGFyZW50ID0gdGhpcy5zdGFydC5wYXJlbnROb2RlO1xuXHQgICAgICB2YXIgbW9kZWwgPSBwYXJlbnQgJiYgcGFyZW50Ll9fdl9tb2RlbDtcblx0ICAgICAgaWYgKG1vZGVsKSB7XG5cdCAgICAgICAgbW9kZWwuZm9yY2VVcGRhdGUoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEluc2VydCBhIGZyYWdtZW50LiBIYW5kbGVzIHN0YWdnZXJpbmcuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtOb2RlfSBwcmV2RWxcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IGluRG9jdW1lbnRcblx0ICAgKi9cblx0XG5cdCAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoZnJhZywgaW5kZXgsIHByZXZFbCwgaW5Eb2N1bWVudCkge1xuXHQgICAgaWYgKGZyYWcuc3RhZ2dlckNiKSB7XG5cdCAgICAgIGZyYWcuc3RhZ2dlckNiLmNhbmNlbCgpO1xuXHQgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG5cdCAgICB9XG5cdCAgICB2YXIgc3RhZ2dlckFtb3VudCA9IHRoaXMuZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgbnVsbCwgJ2VudGVyJyk7XG5cdCAgICBpZiAoaW5Eb2N1bWVudCAmJiBzdGFnZ2VyQW1vdW50KSB7XG5cdCAgICAgIC8vIGNyZWF0ZSBhbiBhbmNob3IgYW5kIGluc2VydCBpdCBzeW5jaHJvbm91c2x5LFxuXHQgICAgICAvLyBzbyB0aGF0IHdlIGNhbiByZXNvbHZlIHRoZSBjb3JyZWN0IG9yZGVyIHdpdGhvdXRcblx0ICAgICAgLy8gd29ycnlpbmcgYWJvdXQgc29tZSBlbGVtZW50cyBub3QgaW5zZXJ0ZWQgeWV0XG5cdCAgICAgIHZhciBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3I7XG5cdCAgICAgIGlmICghYW5jaG9yKSB7XG5cdCAgICAgICAgYW5jaG9yID0gZnJhZy5zdGFnZ2VyQW5jaG9yID0gY3JlYXRlQW5jaG9yKCdzdGFnZ2VyLWFuY2hvcicpO1xuXHQgICAgICAgIGFuY2hvci5fX3ZfZnJhZyA9IGZyYWc7XG5cdCAgICAgIH1cblx0ICAgICAgYWZ0ZXIoYW5jaG9yLCBwcmV2RWwpO1xuXHQgICAgICB2YXIgb3AgPSBmcmFnLnN0YWdnZXJDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG5cdCAgICAgICAgZnJhZy5iZWZvcmUoYW5jaG9yKTtcblx0ICAgICAgICByZW1vdmUoYW5jaG9yKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHNldFRpbWVvdXQob3AsIHN0YWdnZXJBbW91bnQpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIHRhcmdldCA9IHByZXZFbC5uZXh0U2libGluZztcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmICghdGFyZ2V0KSB7XG5cdCAgICAgICAgLy8gcmVzZXQgZW5kIGFuY2hvciBwb3NpdGlvbiBpbiBjYXNlIHRoZSBwb3NpdGlvbiB3YXMgbWVzc2VkIHVwXG5cdCAgICAgICAgLy8gYnkgYW4gZXh0ZXJuYWwgZHJhZy1uLWRyb3AgbGlicmFyeS5cblx0ICAgICAgICBhZnRlcih0aGlzLmVuZCwgcHJldkVsKTtcblx0ICAgICAgICB0YXJnZXQgPSB0aGlzLmVuZDtcblx0ICAgICAgfVxuXHQgICAgICBmcmFnLmJlZm9yZSh0YXJnZXQpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZSBhIGZyYWdtZW50LiBIYW5kbGVzIHN0YWdnZXJpbmcuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBpbkRvY3VtZW50XG5cdCAgICovXG5cdFxuXHQgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGZyYWcsIGluZGV4LCB0b3RhbCwgaW5Eb2N1bWVudCkge1xuXHQgICAgaWYgKGZyYWcuc3RhZ2dlckNiKSB7XG5cdCAgICAgIGZyYWcuc3RhZ2dlckNiLmNhbmNlbCgpO1xuXHQgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG5cdCAgICAgIC8vIGl0J3Mgbm90IHBvc3NpYmxlIGZvciB0aGUgc2FtZSBmcmFnIHRvIGJlIHJlbW92ZWRcblx0ICAgICAgLy8gdHdpY2UsIHNvIGlmIHdlIGhhdmUgYSBwZW5kaW5nIHN0YWdnZXIgY2FsbGJhY2ssXG5cdCAgICAgIC8vIGl0IG1lYW5zIHRoaXMgZnJhZyBpcyBxdWV1ZWQgZm9yIGVudGVyIGJ1dCByZW1vdmVkXG5cdCAgICAgIC8vIGJlZm9yZSBpdHMgdHJhbnNpdGlvbiBzdGFydGVkLiBTaW5jZSBpdCBpcyBhbHJlYWR5XG5cdCAgICAgIC8vIGRlc3Ryb3llZCwgd2UgY2FuIGp1c3QgbGVhdmUgaXQgaW4gZGV0YWNoZWQgc3RhdGUuXG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBzdGFnZ2VyQW1vdW50ID0gdGhpcy5nZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCB0b3RhbCwgJ2xlYXZlJyk7XG5cdCAgICBpZiAoaW5Eb2N1bWVudCAmJiBzdGFnZ2VyQW1vdW50KSB7XG5cdCAgICAgIHZhciBvcCA9IGZyYWcuc3RhZ2dlckNiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcblx0ICAgICAgICBmcmFnLnJlbW92ZSgpO1xuXHQgICAgICB9KTtcblx0ICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBmcmFnLnJlbW92ZSgpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIE1vdmUgYSBmcmFnbWVudCB0byBhIG5ldyBwb3NpdGlvbi5cblx0ICAgKiBGb3JjZSBubyB0cmFuc2l0aW9uLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqIEBwYXJhbSB7Tm9kZX0gcHJldkVsXG5cdCAgICovXG5cdFxuXHQgIG1vdmU6IGZ1bmN0aW9uIG1vdmUoZnJhZywgcHJldkVsKSB7XG5cdCAgICAvLyBmaXggYSBjb21tb24gaXNzdWUgd2l0aCBTb3J0YWJsZTpcblx0ICAgIC8vIGlmIHByZXZFbCBkb2Vzbid0IGhhdmUgbmV4dFNpYmxpbmcsIHRoaXMgbWVhbnMgaXQnc1xuXHQgICAgLy8gYmVlbiBkcmFnZ2VkIGFmdGVyIHRoZSBlbmQgYW5jaG9yLiBKdXN0IHJlLXBvc2l0aW9uXG5cdCAgICAvLyB0aGUgZW5kIGFuY2hvciB0byB0aGUgZW5kIG9mIHRoZSBjb250YWluZXIuXG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghcHJldkVsLm5leHRTaWJsaW5nKSB7XG5cdCAgICAgIHRoaXMuZW5kLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xuXHQgICAgfVxuXHQgICAgZnJhZy5iZWZvcmUocHJldkVsLm5leHRTaWJsaW5nLCBmYWxzZSk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ2FjaGUgYSBmcmFnbWVudCB1c2luZyB0cmFjay1ieSBvciB0aGUgb2JqZWN0IGtleS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IFtrZXldXG5cdCAgICovXG5cdFxuXHQgIGNhY2hlRnJhZzogZnVuY3Rpb24gY2FjaGVGcmFnKHZhbHVlLCBmcmFnLCBpbmRleCwga2V5KSB7XG5cdCAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG5cdCAgICB2YXIgY2FjaGUgPSB0aGlzLmNhY2hlO1xuXHQgICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG5cdCAgICB2YXIgaWQ7XG5cdCAgICBpZiAoa2V5IHx8IHRyYWNrQnlLZXkgfHwgcHJpbWl0aXZlKSB7XG5cdCAgICAgIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG5cdCAgICAgIGlmICghY2FjaGVbaWRdKSB7XG5cdCAgICAgICAgY2FjaGVbaWRdID0gZnJhZztcblx0ICAgICAgfSBlbHNlIGlmICh0cmFja0J5S2V5ICE9PSAnJGluZGV4Jykge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWQgPSB0aGlzLmlkO1xuXHQgICAgICBpZiAoaGFzT3duKHZhbHVlLCBpZCkpIHtcblx0ICAgICAgICBpZiAodmFsdWVbaWRdID09PSBudWxsKSB7XG5cdCAgICAgICAgICB2YWx1ZVtpZF0gPSBmcmFnO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpKSB7XG5cdCAgICAgICAgZGVmKHZhbHVlLCBpZCwgZnJhZyk7XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHdhcm4oJ0Zyb3plbiB2LWZvciBvYmplY3RzIGNhbm5vdCBiZSBhdXRvbWF0aWNhbGx5IHRyYWNrZWQsIG1ha2Ugc3VyZSB0byAnICsgJ3Byb3ZpZGUgYSB0cmFjay1ieSBrZXkuJyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGZyYWcucmF3ID0gdmFsdWU7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogR2V0IGEgY2FjaGVkIGZyYWdtZW50IGZyb20gdGhlIHZhbHVlL2luZGV4L2tleVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cblx0ICAgKi9cblx0XG5cdCAgZ2V0Q2FjaGVkRnJhZzogZnVuY3Rpb24gZ2V0Q2FjaGVkRnJhZyh2YWx1ZSwgaW5kZXgsIGtleSkge1xuXHQgICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuXHQgICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG5cdCAgICB2YXIgZnJhZztcblx0ICAgIGlmIChrZXkgfHwgdHJhY2tCeUtleSB8fCBwcmltaXRpdmUpIHtcblx0ICAgICAgdmFyIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG5cdCAgICAgIGZyYWcgPSB0aGlzLmNhY2hlW2lkXTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGZyYWcgPSB2YWx1ZVt0aGlzLmlkXTtcblx0ICAgIH1cblx0ICAgIGlmIChmcmFnICYmIChmcmFnLnJldXNlZCB8fCBmcmFnLmZyZXNoKSkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZnJhZztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBEZWxldGUgYSBmcmFnbWVudCBmcm9tIGNhY2hlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqL1xuXHRcblx0ICBkZWxldGVDYWNoZWRGcmFnOiBmdW5jdGlvbiBkZWxldGVDYWNoZWRGcmFnKGZyYWcpIHtcblx0ICAgIHZhciB2YWx1ZSA9IGZyYWcucmF3O1xuXHQgICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuXHQgICAgdmFyIHNjb3BlID0gZnJhZy5zY29wZTtcblx0ICAgIHZhciBpbmRleCA9IHNjb3BlLiRpbmRleDtcblx0ICAgIC8vIGZpeCAjOTQ4OiBhdm9pZCBhY2NpZGVudGFsbHkgZmFsbCB0aHJvdWdoIHRvXG5cdCAgICAvLyBhIHBhcmVudCByZXBlYXRlciB3aGljaCBoYXBwZW5zIHRvIGhhdmUgJGtleS5cblx0ICAgIHZhciBrZXkgPSBoYXNPd24oc2NvcGUsICcka2V5JykgJiYgc2NvcGUuJGtleTtcblx0ICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuXHQgICAgaWYgKHRyYWNrQnlLZXkgfHwga2V5IHx8IHByaW1pdGl2ZSkge1xuXHQgICAgICB2YXIgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcblx0ICAgICAgdGhpcy5jYWNoZVtpZF0gPSBudWxsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFsdWVbdGhpcy5pZF0gPSBudWxsO1xuXHQgICAgICBmcmFnLnJhdyA9IG51bGw7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogR2V0IHRoZSBzdGFnZ2VyIGFtb3VudCBmb3IgYW4gaW5zZXJ0aW9uL3JlbW92YWwuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICAgKi9cblx0XG5cdCAgZ2V0U3RhZ2dlcjogZnVuY3Rpb24gZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgdG90YWwsIHR5cGUpIHtcblx0ICAgIHR5cGUgPSB0eXBlICsgJ1N0YWdnZXInO1xuXHQgICAgdmFyIHRyYW5zID0gZnJhZy5ub2RlLl9fdl90cmFucztcblx0ICAgIHZhciBob29rcyA9IHRyYW5zICYmIHRyYW5zLmhvb2tzO1xuXHQgICAgdmFyIGhvb2sgPSBob29rcyAmJiAoaG9va3NbdHlwZV0gfHwgaG9va3Muc3RhZ2dlcik7XG5cdCAgICByZXR1cm4gaG9vayA/IGhvb2suY2FsbChmcmFnLCBpbmRleCwgdG90YWwpIDogaW5kZXggKiBwYXJzZUludCh0aGlzLnBhcmFtc1t0eXBlXSB8fCB0aGlzLnBhcmFtcy5zdGFnZ2VyLCAxMCk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUHJlLXByb2Nlc3MgdGhlIHZhbHVlIGJlZm9yZSBwaXBpbmcgaXQgdGhyb3VnaCB0aGVcblx0ICAgKiBmaWx0ZXJzLiBUaGlzIGlzIHBhc3NlZCB0byBhbmQgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyLlxuXHQgICAqL1xuXHRcblx0ICBfcHJlUHJvY2VzczogZnVuY3Rpb24gX3ByZVByb2Nlc3ModmFsdWUpIHtcblx0ICAgIC8vIHJlZ2FyZGxlc3Mgb2YgdHlwZSwgc3RvcmUgdGhlIHVuLWZpbHRlcmVkIHJhdyB2YWx1ZS5cblx0ICAgIHRoaXMucmF3VmFsdWUgPSB2YWx1ZTtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBQb3N0LXByb2Nlc3MgdGhlIHZhbHVlIGFmdGVyIGl0IGhhcyBiZWVuIHBpcGVkIHRocm91Z2hcblx0ICAgKiB0aGUgZmlsdGVycy4gVGhpcyBpcyBwYXNzZWQgdG8gYW5kIGNhbGxlZCBieSB0aGUgd2F0Y2hlci5cblx0ICAgKlxuXHQgICAqIEl0IGlzIG5lY2Vzc2FyeSBmb3IgdGhpcyB0byBiZSBjYWxsZWQgZHVyaW5nIHRoZVxuXHQgICAqIHdhdGNoZXIncyBkZXBlbmRlbmN5IGNvbGxlY3Rpb24gcGhhc2UgYmVjYXVzZSB3ZSB3YW50XG5cdCAgICogdGhlIHYtZm9yIHRvIHVwZGF0ZSB3aGVuIHRoZSBzb3VyY2UgT2JqZWN0IGlzIG11dGF0ZWQuXG5cdCAgICovXG5cdFxuXHQgIF9wb3N0UHJvY2VzczogZnVuY3Rpb24gX3Bvc3RQcm9jZXNzKHZhbHVlKSB7XG5cdCAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgcmV0dXJuIHZhbHVlO1xuXHQgICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuXHQgICAgICAvLyBjb252ZXJ0IHBsYWluIG9iamVjdCB0byBhcnJheS5cblx0ICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7XG5cdCAgICAgIHZhciBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICAgIHZhciByZXMgPSBuZXcgQXJyYXkoaSk7XG5cdCAgICAgIHZhciBrZXk7XG5cdCAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICAgIHJlc1tpXSA9IHtcblx0ICAgICAgICAgICRrZXk6IGtleSxcblx0ICAgICAgICAgICR2YWx1ZTogdmFsdWVba2V5XVxuXHQgICAgICAgIH07XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHJlcztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmICFpc05hTih2YWx1ZSkpIHtcblx0ICAgICAgICB2YWx1ZSA9IHJhbmdlKHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdmFsdWUgfHwgW107XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICBpZiAodGhpcy5kZXNjcmlwdG9yLnJlZikge1xuXHQgICAgICAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHJlZnNbdGhpcy5kZXNjcmlwdG9yLnJlZl0gPSBudWxsO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuZnJhZ3MpIHtcblx0ICAgICAgdmFyIGkgPSB0aGlzLmZyYWdzLmxlbmd0aDtcblx0ICAgICAgdmFyIGZyYWc7XG5cdCAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICBmcmFnID0gdGhpcy5mcmFnc1tpXTtcblx0ICAgICAgICB0aGlzLmRlbGV0ZUNhY2hlZEZyYWcoZnJhZyk7XG5cdCAgICAgICAgZnJhZy5kZXN0cm95KCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogSGVscGVyIHRvIGZpbmQgdGhlIHByZXZpb3VzIGVsZW1lbnQgdGhhdCBpcyBhIGZyYWdtZW50XG5cdCAqIGFuY2hvci4gVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBhIGRlc3Ryb3llZCBmcmFnJ3Ncblx0ICogZWxlbWVudCBjb3VsZCBzdGlsbCBiZSBsaW5nZXJpbmcgaW4gdGhlIERPTSBiZWZvcmUgaXRzXG5cdCAqIGxlYXZpbmcgdHJhbnNpdGlvbiBmaW5pc2hlcywgYnV0IGl0cyBpbnNlcnRlZCBmbGFnXG5cdCAqIHNob3VsZCBoYXZlIGJlZW4gc2V0IHRvIGZhbHNlIHNvIHdlIGNhbiBza2lwIHRoZW0uXG5cdCAqXG5cdCAqIElmIHRoaXMgaXMgYSBibG9jayByZXBlYXQsIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHdlIG9ubHlcblx0ICogcmV0dXJuIGZyYWcgdGhhdCBpcyBib3VuZCB0byB0aGlzIHYtZm9yLiAoc2VlICM5MjkpXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICogQHBhcmFtIHtDb21tZW50fFRleHR9IGFuY2hvclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaWRcblx0ICogQHJldHVybiB7RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZmluZFByZXZGcmFnKGZyYWcsIGFuY2hvciwgaWQpIHtcblx0ICB2YXIgZWwgPSBmcmFnLm5vZGUucHJldmlvdXNTaWJsaW5nO1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICghZWwpIHJldHVybjtcblx0ICBmcmFnID0gZWwuX192X2ZyYWc7XG5cdCAgd2hpbGUgKCghZnJhZyB8fCBmcmFnLmZvcklkICE9PSBpZCB8fCAhZnJhZy5pbnNlcnRlZCkgJiYgZWwgIT09IGFuY2hvcikge1xuXHQgICAgZWwgPSBlbC5wcmV2aW91c1NpYmxpbmc7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghZWwpIHJldHVybjtcblx0ICAgIGZyYWcgPSBlbC5fX3ZfZnJhZztcblx0ICB9XG5cdCAgcmV0dXJuIGZyYWc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGaW5kIGEgdm0gZnJvbSBhIGZyYWdtZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAqIEByZXR1cm4ge1Z1ZXx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZmluZFZtRnJvbUZyYWcoZnJhZykge1xuXHQgIHZhciBub2RlID0gZnJhZy5ub2RlO1xuXHQgIC8vIGhhbmRsZSBtdWx0aS1ub2RlIGZyYWdcblx0ICBpZiAoZnJhZy5lbmQpIHtcblx0ICAgIHdoaWxlICghbm9kZS5fX3Z1ZV9fICYmIG5vZGUgIT09IGZyYWcuZW5kICYmIG5vZGUubmV4dFNpYmxpbmcpIHtcblx0ICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBub2RlLl9fdnVlX187XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGUgYSByYW5nZSBhcnJheSBmcm9tIGdpdmVuIG51bWJlci5cblx0ICpcblx0ICogQHBhcmFtIHtOdW1iZXJ9IG5cblx0ICogQHJldHVybiB7QXJyYXl9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmFuZ2Uobikge1xuXHQgIHZhciBpID0gLTE7XG5cdCAgdmFyIHJldCA9IG5ldyBBcnJheShNYXRoLmZsb29yKG4pKTtcblx0ICB3aGlsZSAoKytpIDwgbikge1xuXHQgICAgcmV0W2ldID0gaTtcblx0ICB9XG5cdCAgcmV0dXJuIHJldDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCB0aGUgdHJhY2sgYnkga2V5IGZvciBhbiBpdGVtLlxuXHQgKlxuXHQgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbdHJhY2tCeUtleV1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KSB7XG5cdCAgcmV0dXJuIHRyYWNrQnlLZXkgPyB0cmFja0J5S2V5ID09PSAnJGluZGV4JyA/IGluZGV4IDogdHJhY2tCeUtleS5jaGFyQXQoMCkubWF0Y2goL1xcdy8pID8gZ2V0UGF0aCh2YWx1ZSwgdHJhY2tCeUtleSkgOiB2YWx1ZVt0cmFja0J5S2V5XSA6IGtleSB8fCB2YWx1ZTtcblx0fVxuXHRcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICB2Rm9yLndhcm5EdXBsaWNhdGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgIHdhcm4oJ0R1cGxpY2F0ZSB2YWx1ZSBmb3VuZCBpbiB2LWZvcj1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpICsgJy4gVXNlIHRyYWNrLWJ5PVwiJGluZGV4XCIgaWYgJyArICd5b3UgYXJlIGV4cGVjdGluZyBkdXBsaWNhdGUgdmFsdWVzLicsIHRoaXMudm0pO1xuXHQgIH07XG5cdH1cblx0XG5cdHZhciB2SWYgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBJRixcblx0ICB0ZXJtaW5hbDogdHJ1ZSxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICBpZiAoIWVsLl9fdnVlX18pIHtcblx0ICAgICAgLy8gY2hlY2sgZWxzZSBibG9ja1xuXHQgICAgICB2YXIgbmV4dCA9IGVsLm5leHRFbGVtZW50U2libGluZztcblx0ICAgICAgaWYgKG5leHQgJiYgZ2V0QXR0cihuZXh0LCAndi1lbHNlJykgIT09IG51bGwpIHtcblx0ICAgICAgICByZW1vdmUobmV4dCk7XG5cdCAgICAgICAgdGhpcy5lbHNlRWwgPSBuZXh0O1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGNoZWNrIG1haW4gYmxvY2tcblx0ICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtaWYnKTtcblx0ICAgICAgcmVwbGFjZShlbCwgdGhpcy5hbmNob3IpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LWlmPVwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiBjYW5ub3QgYmUgJyArICd1c2VkIG9uIGFuIGluc3RhbmNlIHJvb3QgZWxlbWVudC4nLCB0aGlzLnZtKTtcblx0ICAgICAgdGhpcy5pbnZhbGlkID0gdHJ1ZTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgaWYgKHRoaXMuaW52YWxpZCkgcmV0dXJuO1xuXHQgICAgaWYgKHZhbHVlKSB7XG5cdCAgICAgIGlmICghdGhpcy5mcmFnKSB7XG5cdCAgICAgICAgdGhpcy5pbnNlcnQoKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5yZW1vdmUoKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydCgpIHtcblx0ICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcucmVtb3ZlKCk7XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgLy8gbGF6eSBpbml0IGZhY3Rvcnlcblx0ICAgIGlmICghdGhpcy5mYWN0b3J5KSB7XG5cdCAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgdGhpcy5lbCk7XG5cdCAgICB9XG5cdCAgICB0aGlzLmZyYWcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKHRoaXMuX2hvc3QsIHRoaXMuX3Njb3BlLCB0aGlzLl9mcmFnKTtcblx0ICAgIHRoaXMuZnJhZy5iZWZvcmUodGhpcy5hbmNob3IpO1xuXHQgIH0sXG5cdFxuXHQgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuXHQgICAgaWYgKHRoaXMuZnJhZykge1xuXHQgICAgICB0aGlzLmZyYWcucmVtb3ZlKCk7XG5cdCAgICAgIHRoaXMuZnJhZyA9IG51bGw7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5lbHNlRWwgJiYgIXRoaXMuZWxzZUZyYWcpIHtcblx0ICAgICAgaWYgKCF0aGlzLmVsc2VGYWN0b3J5KSB7XG5cdCAgICAgICAgdGhpcy5lbHNlRmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy5lbHNlRWwuX2NvbnRleHQgfHwgdGhpcy52bSwgdGhpcy5lbHNlRWwpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcgPSB0aGlzLmVsc2VGYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZyk7XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcuYmVmb3JlKHRoaXMuYW5jaG9yKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIGlmICh0aGlzLmZyYWcpIHtcblx0ICAgICAgdGhpcy5mcmFnLmRlc3Ryb3koKTtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcuZGVzdHJveSgpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBzaG93ID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gY2hlY2sgZWxzZSBibG9ja1xuXHQgICAgdmFyIG5leHQgPSB0aGlzLmVsLm5leHRFbGVtZW50U2libGluZztcblx0ICAgIGlmIChuZXh0ICYmIGdldEF0dHIobmV4dCwgJ3YtZWxzZScpICE9PSBudWxsKSB7XG5cdCAgICAgIHRoaXMuZWxzZUVsID0gbmV4dDtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdGhpcy5hcHBseSh0aGlzLmVsLCB2YWx1ZSk7XG5cdCAgICBpZiAodGhpcy5lbHNlRWwpIHtcblx0ICAgICAgdGhpcy5hcHBseSh0aGlzLmVsc2VFbCwgIXZhbHVlKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBhcHBseTogZnVuY3Rpb24gYXBwbHkoZWwsIHZhbHVlKSB7XG5cdCAgICBpZiAoaW5Eb2MoZWwpKSB7XG5cdCAgICAgIGFwcGx5VHJhbnNpdGlvbihlbCwgdmFsdWUgPyAxIDogLTEsIHRvZ2dsZSwgdGhpcy52bSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0b2dnbGUoKTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIHRvZ2dsZSgpIHtcblx0ICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gJycgOiAnbm9uZSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHRleHQkMiA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICB2YXIgaXNSYW5nZSA9IGVsLnR5cGUgPT09ICdyYW5nZSc7XG5cdCAgICB2YXIgbGF6eSA9IHRoaXMucGFyYW1zLmxhenk7XG5cdCAgICB2YXIgbnVtYmVyID0gdGhpcy5wYXJhbXMubnVtYmVyO1xuXHQgICAgdmFyIGRlYm91bmNlID0gdGhpcy5wYXJhbXMuZGVib3VuY2U7XG5cdFxuXHQgICAgLy8gaGFuZGxlIGNvbXBvc2l0aW9uIGV2ZW50cy5cblx0ICAgIC8vICAgaHR0cDovL2Jsb2cuZXZhbnlvdS5tZS8yMDE0LzAxLzAzL2NvbXBvc2l0aW9uLWV2ZW50L1xuXHQgICAgLy8gc2tpcCB0aGlzIGZvciBBbmRyb2lkIGJlY2F1c2UgaXQgaGFuZGxlcyBjb21wb3NpdGlvblxuXHQgICAgLy8gZXZlbnRzIHF1aXRlIGRpZmZlcmVudGx5LiBBbmRyb2lkIGRvZXNuJ3QgdHJpZ2dlclxuXHQgICAgLy8gY29tcG9zaXRpb24gZXZlbnRzIGZvciBsYW5ndWFnZSBpbnB1dCBtZXRob2RzIGUuZy5cblx0ICAgIC8vIENoaW5lc2UsIGJ1dCBpbnN0ZWFkIHRyaWdnZXJzIHRoZW0gZm9yIHNwZWxsaW5nXG5cdCAgICAvLyBzdWdnZXN0aW9ucy4uLiAoc2VlIERpc2N1c3Npb24vIzE2Milcblx0ICAgIHZhciBjb21wb3NpbmcgPSBmYWxzZTtcblx0ICAgIGlmICghaXNBbmRyb2lkICYmICFpc1JhbmdlKSB7XG5cdCAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgY29tcG9zaW5nID0gdHJ1ZTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGNvbXBvc2luZyA9IGZhbHNlO1xuXHQgICAgICAgIC8vIGluIElFMTEgdGhlIFwiY29tcG9zaXRpb25lbmRcIiBldmVudCBmaXJlcyBBRlRFUlxuXHQgICAgICAgIC8vIHRoZSBcImlucHV0XCIgZXZlbnQsIHNvIHRoZSBpbnB1dCBoYW5kbGVyIGlzIGJsb2NrZWRcblx0ICAgICAgICAvLyBhdCB0aGUgZW5kLi4uIGhhdmUgdG8gY2FsbCBpdCBoZXJlLlxuXHQgICAgICAgIC8vXG5cdCAgICAgICAgLy8gIzEzMjc6IGluIGxhenkgbW9kZSB0aGlzIGlzIHVuZWNlc3NhcnkuXG5cdCAgICAgICAgaWYgKCFsYXp5KSB7XG5cdCAgICAgICAgICBzZWxmLmxpc3RlbmVyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBwcmV2ZW50IG1lc3Npbmcgd2l0aCB0aGUgaW5wdXQgd2hlbiB1c2VyIGlzIHR5cGluZyxcblx0ICAgIC8vIGFuZCBmb3JjZSB1cGRhdGUgb24gYmx1ci5cblx0ICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlO1xuXHQgICAgaWYgKCFpc1JhbmdlICYmICFsYXp5KSB7XG5cdCAgICAgIHRoaXMub24oJ2ZvY3VzJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHNlbGYuZm9jdXNlZCA9IHRydWU7XG5cdCAgICAgIH0pO1xuXHQgICAgICB0aGlzLm9uKCdibHVyJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHNlbGYuZm9jdXNlZCA9IGZhbHNlO1xuXHQgICAgICAgIC8vIGRvIG5vdCBzeW5jIHZhbHVlIGFmdGVyIGZyYWdtZW50IHJlbW92YWwgKCMyMDE3KVxuXHQgICAgICAgIGlmICghc2VsZi5fZnJhZyB8fCBzZWxmLl9mcmFnLmluc2VydGVkKSB7XG5cdCAgICAgICAgICBzZWxmLnJhd0xpc3RlbmVyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBOb3cgYXR0YWNoIHRoZSBtYWluIGxpc3RlbmVyXG5cdCAgICB0aGlzLmxpc3RlbmVyID0gdGhpcy5yYXdMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKGNvbXBvc2luZyB8fCAhc2VsZi5fYm91bmQpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHZhbCA9IG51bWJlciB8fCBpc1JhbmdlID8gdG9OdW1iZXIoZWwudmFsdWUpIDogZWwudmFsdWU7XG5cdCAgICAgIHNlbGYuc2V0KHZhbCk7XG5cdCAgICAgIC8vIGZvcmNlIHVwZGF0ZSBvbiBuZXh0IHRpY2sgdG8gYXZvaWQgbG9jayAmIHNhbWUgdmFsdWVcblx0ICAgICAgLy8gYWxzbyBvbmx5IHVwZGF0ZSB3aGVuIHVzZXIgaXMgbm90IHR5cGluZ1xuXHQgICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHNlbGYuX2JvdW5kICYmICFzZWxmLmZvY3VzZWQpIHtcblx0ICAgICAgICAgIHNlbGYudXBkYXRlKHNlbGYuX3dhdGNoZXIudmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGFwcGx5IGRlYm91bmNlXG5cdCAgICBpZiAoZGVib3VuY2UpIHtcblx0ICAgICAgdGhpcy5saXN0ZW5lciA9IF9kZWJvdW5jZSh0aGlzLmxpc3RlbmVyLCBkZWJvdW5jZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gU3VwcG9ydCBqUXVlcnkgZXZlbnRzLCBzaW5jZSBqUXVlcnkudHJpZ2dlcigpIGRvZXNuJ3Rcblx0ICAgIC8vIHRyaWdnZXIgbmF0aXZlIGV2ZW50cyBpbiBzb21lIGNhc2VzIGFuZCBzb21lIHBsdWdpbnNcblx0ICAgIC8vIHJlbHkgb24gJC50cmlnZ2VyKClcblx0ICAgIC8vXG5cdCAgICAvLyBXZSB3YW50IHRvIG1ha2Ugc3VyZSBpZiBhIGxpc3RlbmVyIGlzIGF0dGFjaGVkIHVzaW5nXG5cdCAgICAvLyBqUXVlcnksIGl0IGlzIGFsc28gcmVtb3ZlZCB3aXRoIGpRdWVyeSwgdGhhdCdzIHdoeVxuXHQgICAgLy8gd2UgZG8gdGhlIGNoZWNrIGZvciBlYWNoIGRpcmVjdGl2ZSBpbnN0YW5jZSBhbmRcblx0ICAgIC8vIHN0b3JlIHRoYXQgY2hlY2sgcmVzdWx0IG9uIGl0c2VsZi4gVGhpcyBhbHNvIGFsbG93c1xuXHQgICAgLy8gZWFzaWVyIHRlc3QgY292ZXJhZ2UgY29udHJvbCBieSB1bnNldHRpbmcgdGhlIGdsb2JhbFxuXHQgICAgLy8galF1ZXJ5IHZhcmlhYmxlIGluIHRlc3RzLlxuXHQgICAgdGhpcy5oYXNqUXVlcnkgPSB0eXBlb2YgalF1ZXJ5ID09PSAnZnVuY3Rpb24nO1xuXHQgICAgaWYgKHRoaXMuaGFzalF1ZXJ5KSB7XG5cdCAgICAgIHZhciBtZXRob2QgPSBqUXVlcnkuZm4ub24gPyAnb24nIDogJ2JpbmQnO1xuXHQgICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2NoYW5nZScsIHRoaXMucmF3TGlzdGVuZXIpO1xuXHQgICAgICBpZiAoIWxhenkpIHtcblx0ICAgICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2lucHV0JywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMucmF3TGlzdGVuZXIpO1xuXHQgICAgICBpZiAoIWxhenkpIHtcblx0ICAgICAgICB0aGlzLm9uKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gSUU5IGRvZXNuJ3QgZmlyZSBpbnB1dCBldmVudCBvbiBiYWNrc3BhY2UvZGVsL2N1dFxuXHQgICAgaWYgKCFsYXp5ICYmIGlzSUU5KSB7XG5cdCAgICAgIHRoaXMub24oJ2N1dCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBuZXh0VGljayhzZWxmLmxpc3RlbmVyKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHRoaXMub24oJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICBpZiAoZS5rZXlDb2RlID09PSA0NiB8fCBlLmtleUNvZGUgPT09IDgpIHtcblx0ICAgICAgICAgIHNlbGYubGlzdGVuZXIoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHNldCBpbml0aWFsIHZhbHVlIGlmIHByZXNlbnRcblx0ICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykgfHwgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyAmJiBlbC52YWx1ZS50cmltKCkpIHtcblx0ICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICAvLyAjMzAyOSBvbmx5IHVwZGF0ZSB3aGVuIHRoZSB2YWx1ZSBjaGFuZ2VzLiBUaGlzIHByZXZlbnRcblx0ICAgIC8vIGJyb3dzZXJzIGZyb20gb3ZlcndyaXRpbmcgdmFsdWVzIGxpa2Ugc2VsZWN0aW9uU3RhcnRcblx0ICAgIHZhbHVlID0gX3RvU3RyaW5nKHZhbHVlKTtcblx0ICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5lbC52YWx1ZSkgdGhpcy5lbC52YWx1ZSA9IHZhbHVlO1xuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIGlmICh0aGlzLmhhc2pRdWVyeSkge1xuXHQgICAgICB2YXIgbWV0aG9kID0galF1ZXJ5LmZuLm9mZiA/ICdvZmYnIDogJ3VuYmluZCc7XG5cdCAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcmFkaW8gPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHRcblx0ICAgIHRoaXMuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIC8vIHZhbHVlIG92ZXJ3cml0ZSB2aWEgdi1iaW5kOnZhbHVlXG5cdCAgICAgIGlmIChlbC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykpIHtcblx0ICAgICAgICByZXR1cm4gZWwuX3ZhbHVlO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciB2YWwgPSBlbC52YWx1ZTtcblx0ICAgICAgaWYgKHNlbGYucGFyYW1zLm51bWJlcikge1xuXHQgICAgICAgIHZhbCA9IHRvTnVtYmVyKHZhbCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHZhbDtcblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgc2VsZi5zZXQoc2VsZi5nZXRWYWx1ZSgpKTtcblx0ICAgIH07XG5cdCAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblx0XG5cdCAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdjaGVja2VkJykpIHtcblx0ICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB0aGlzLmVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCB0aGlzLmdldFZhbHVlKCkpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBzZWxlY3QgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdFxuXHQgICAgLy8gbWV0aG9kIHRvIGZvcmNlIHVwZGF0ZSBET00gdXNpbmcgbGF0ZXN0IHZhbHVlLlxuXHQgICAgdGhpcy5mb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKHNlbGYuX3dhdGNoZXIpIHtcblx0ICAgICAgICBzZWxmLnVwZGF0ZShzZWxmLl93YXRjaGVyLmdldCgpKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGEgbXVsdGlwbGUgc2VsZWN0XG5cdCAgICB2YXIgbXVsdGlwbGUgPSB0aGlzLm11bHRpcGxlID0gZWwuaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpO1xuXHRcblx0ICAgIC8vIGF0dGFjaCBsaXN0ZW5lclxuXHQgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIHZhbHVlID0gZ2V0VmFsdWUoZWwsIG11bHRpcGxlKTtcblx0ICAgICAgdmFsdWUgPSBzZWxmLnBhcmFtcy5udW1iZXIgPyBpc0FycmF5KHZhbHVlKSA/IHZhbHVlLm1hcCh0b051bWJlcikgOiB0b051bWJlcih2YWx1ZSkgOiB2YWx1ZTtcblx0ICAgICAgc2VsZi5zZXQodmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXHRcblx0ICAgIC8vIGlmIGhhcyBpbml0aWFsIHZhbHVlLCBzZXQgYWZ0ZXJCaW5kXG5cdCAgICB2YXIgaW5pdFZhbHVlID0gZ2V0VmFsdWUoZWwsIG11bHRpcGxlLCB0cnVlKTtcblx0ICAgIGlmIChtdWx0aXBsZSAmJiBpbml0VmFsdWUubGVuZ3RoIHx8ICFtdWx0aXBsZSAmJiBpbml0VmFsdWUgIT09IG51bGwpIHtcblx0ICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEFsbCBtYWpvciBicm93c2VycyBleGNlcHQgRmlyZWZveCByZXNldHNcblx0ICAgIC8vIHNlbGVjdGVkSW5kZXggd2l0aCB2YWx1ZSAtMSB0byAwIHdoZW4gdGhlIGVsZW1lbnRcblx0ICAgIC8vIGlzIGFwcGVuZGVkIHRvIGEgbmV3IHBhcmVudCwgdGhlcmVmb3JlIHdlIGhhdmUgdG9cblx0ICAgIC8vIGZvcmNlIGEgRE9NIHVwZGF0ZSB3aGVuZXZlciB0aGF0IGhhcHBlbnMuLi5cblx0ICAgIHRoaXMudm0uJG9uKCdob29rOmF0dGFjaGVkJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICBuZXh0VGljayhfdGhpcy5mb3JjZVVwZGF0ZSk7XG5cdCAgICB9KTtcblx0ICAgIGlmICghaW5Eb2MoZWwpKSB7XG5cdCAgICAgIG5leHRUaWNrKHRoaXMuZm9yY2VVcGRhdGUpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgZWwuc2VsZWN0ZWRJbmRleCA9IC0xO1xuXHQgICAgdmFyIG11bHRpID0gdGhpcy5tdWx0aXBsZSAmJiBpc0FycmF5KHZhbHVlKTtcblx0ICAgIHZhciBvcHRpb25zID0gZWwub3B0aW9ucztcblx0ICAgIHZhciBpID0gb3B0aW9ucy5sZW5ndGg7XG5cdCAgICB2YXIgb3AsIHZhbDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgb3AgPSBvcHRpb25zW2ldO1xuXHQgICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBvcC5fdmFsdWUgOiBvcC52YWx1ZTtcblx0ICAgICAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG5cdCAgICAgIG9wLnNlbGVjdGVkID0gbXVsdGkgPyBpbmRleE9mJDEodmFsdWUsIHZhbCkgPiAtMSA6IGxvb3NlRXF1YWwodmFsdWUsIHZhbCk7XG5cdCAgICAgIC8qIGVzbGludC1lbmFibGUgZXFlcWVxICovXG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHQgICAgdGhpcy52bS4kb2ZmKCdob29rOmF0dGFjaGVkJywgdGhpcy5mb3JjZVVwZGF0ZSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEdldCBzZWxlY3QgdmFsdWVcblx0ICpcblx0ICogQHBhcmFtIHtTZWxlY3RFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IG11bHRpXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5pdFxuXHQgKiBAcmV0dXJuIHtBcnJheXwqfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldFZhbHVlKGVsLCBtdWx0aSwgaW5pdCkge1xuXHQgIHZhciByZXMgPSBtdWx0aSA/IFtdIDogbnVsbDtcblx0ICB2YXIgb3AsIHZhbCwgc2VsZWN0ZWQ7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBlbC5vcHRpb25zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgb3AgPSBlbC5vcHRpb25zW2ldO1xuXHQgICAgc2VsZWN0ZWQgPSBpbml0ID8gb3AuaGFzQXR0cmlidXRlKCdzZWxlY3RlZCcpIDogb3Auc2VsZWN0ZWQ7XG5cdCAgICBpZiAoc2VsZWN0ZWQpIHtcblx0ICAgICAgdmFsID0gb3AuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpID8gb3AuX3ZhbHVlIDogb3AudmFsdWU7XG5cdCAgICAgIGlmIChtdWx0aSkge1xuXHQgICAgICAgIHJlcy5wdXNoKHZhbCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIHZhbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTmF0aXZlIEFycmF5LmluZGV4T2YgdXNlcyBzdHJpY3QgZXF1YWwsIGJ1dCBpbiB0aGlzXG5cdCAqIGNhc2Ugd2UgbmVlZCB0byBtYXRjaCBzdHJpbmcvbnVtYmVycyB3aXRoIGN1c3RvbSBlcXVhbC5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyXG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaW5kZXhPZiQxKGFyciwgdmFsKSB7XG5cdCAgdmFyIGkgPSBhcnIubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGlmIChsb29zZUVxdWFsKGFycltpXSwgdmFsKSkge1xuXHQgICAgICByZXR1cm4gaTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIC0xO1xuXHR9XG5cdFxuXHR2YXIgY2hlY2tib3ggPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHRcblx0ICAgIHRoaXMuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBlbC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBlbC5fdmFsdWUgOiBzZWxmLnBhcmFtcy5udW1iZXIgPyB0b051bWJlcihlbC52YWx1ZSkgOiBlbC52YWx1ZTtcblx0ICAgIH07XG5cdFxuXHQgICAgZnVuY3Rpb24gZ2V0Qm9vbGVhblZhbHVlKCkge1xuXHQgICAgICB2YXIgdmFsID0gZWwuY2hlY2tlZDtcblx0ICAgICAgaWYgKHZhbCAmJiBlbC5oYXNPd25Qcm9wZXJ0eSgnX3RydWVWYWx1ZScpKSB7XG5cdCAgICAgICAgcmV0dXJuIGVsLl90cnVlVmFsdWU7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKCF2YWwgJiYgZWwuaGFzT3duUHJvcGVydHkoJ19mYWxzZVZhbHVlJykpIHtcblx0ICAgICAgICByZXR1cm4gZWwuX2ZhbHNlVmFsdWU7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHZhbDtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgbW9kZWwgPSBzZWxmLl93YXRjaGVyLnZhbHVlO1xuXHQgICAgICBpZiAoaXNBcnJheShtb2RlbCkpIHtcblx0ICAgICAgICB2YXIgdmFsID0gc2VsZi5nZXRWYWx1ZSgpO1xuXHQgICAgICAgIGlmIChlbC5jaGVja2VkKSB7XG5cdCAgICAgICAgICBpZiAoaW5kZXhPZihtb2RlbCwgdmFsKSA8IDApIHtcblx0ICAgICAgICAgICAgbW9kZWwucHVzaCh2YWwpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBtb2RlbC4kcmVtb3ZlKHZhbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHNlbGYuc2V0KGdldEJvb2xlYW5WYWx1ZSgpKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkge1xuXHQgICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgZWwuY2hlY2tlZCA9IGluZGV4T2YodmFsdWUsIHRoaXMuZ2V0VmFsdWUoKSkgPiAtMTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmIChlbC5oYXNPd25Qcm9wZXJ0eSgnX3RydWVWYWx1ZScpKSB7XG5cdCAgICAgICAgZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIGVsLl90cnVlVmFsdWUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGVsLmNoZWNrZWQgPSAhIXZhbHVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGhhbmRsZXJzID0ge1xuXHQgIHRleHQ6IHRleHQkMixcblx0ICByYWRpbzogcmFkaW8sXG5cdCAgc2VsZWN0OiBzZWxlY3QsXG5cdCAgY2hlY2tib3g6IGNoZWNrYm94XG5cdH07XG5cdFxuXHR2YXIgbW9kZWwgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBNT0RFTCxcblx0ICB0d29XYXk6IHRydWUsXG5cdCAgaGFuZGxlcnM6IGhhbmRsZXJzLFxuXHQgIHBhcmFtczogWydsYXp5JywgJ251bWJlcicsICdkZWJvdW5jZSddLFxuXHRcblx0ICAvKipcblx0ICAgKiBQb3NzaWJsZSBlbGVtZW50czpcblx0ICAgKiAgIDxzZWxlY3Q+XG5cdCAgICogICA8dGV4dGFyZWE+XG5cdCAgICogICA8aW5wdXQgdHlwZT1cIipcIj5cblx0ICAgKiAgICAgLSB0ZXh0XG5cdCAgICogICAgIC0gY2hlY2tib3hcblx0ICAgKiAgICAgLSByYWRpb1xuXHQgICAqICAgICAtIG51bWJlclxuXHQgICAqL1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gZnJpZW5kbHkgd2FybmluZy4uLlxuXHQgICAgdGhpcy5jaGVja0ZpbHRlcnMoKTtcblx0ICAgIGlmICh0aGlzLmhhc1JlYWQgJiYgIXRoaXMuaGFzV3JpdGUpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIGEgcmVhZC1vbmx5IGZpbHRlciB3aXRoICcgKyAndi1tb2RlbD1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiLiAnICsgJ1lvdSBtaWdodCB3YW50IHRvIHVzZSBhIHR3by13YXkgZmlsdGVyIHRvIGVuc3VyZSBjb3JyZWN0IGJlaGF2aW9yLicsIHRoaXMudm0pO1xuXHQgICAgfVxuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIHZhciB0YWcgPSBlbC50YWdOYW1lO1xuXHQgICAgdmFyIGhhbmRsZXI7XG5cdCAgICBpZiAodGFnID09PSAnSU5QVVQnKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBoYW5kbGVyc1tlbC50eXBlXSB8fCBoYW5kbGVycy50ZXh0O1xuXHQgICAgfSBlbHNlIGlmICh0YWcgPT09ICdTRUxFQ1QnKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBoYW5kbGVycy5zZWxlY3Q7XG5cdCAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1RFWFRBUkVBJykge1xuXHQgICAgICBoYW5kbGVyID0gaGFuZGxlcnMudGV4dDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1tb2RlbCBkb2VzIG5vdCBzdXBwb3J0IGVsZW1lbnQgdHlwZTogJyArIHRhZywgdGhpcy52bSk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGVsLl9fdl9tb2RlbCA9IHRoaXM7XG5cdCAgICBoYW5kbGVyLmJpbmQuY2FsbCh0aGlzKTtcblx0ICAgIHRoaXMudXBkYXRlID0gaGFuZGxlci51cGRhdGU7XG5cdCAgICB0aGlzLl91bmJpbmQgPSBoYW5kbGVyLnVuYmluZDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBDaGVjayByZWFkL3dyaXRlIGZpbHRlciBzdGF0cy5cblx0ICAgKi9cblx0XG5cdCAgY2hlY2tGaWx0ZXJzOiBmdW5jdGlvbiBjaGVja0ZpbHRlcnMoKSB7XG5cdCAgICB2YXIgZmlsdGVycyA9IHRoaXMuZmlsdGVycztcblx0ICAgIGlmICghZmlsdGVycykgcmV0dXJuO1xuXHQgICAgdmFyIGkgPSBmaWx0ZXJzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdmFyIGZpbHRlciA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlcnNbaV0ubmFtZSk7XG5cdCAgICAgIGlmICh0eXBlb2YgZmlsdGVyID09PSAnZnVuY3Rpb24nIHx8IGZpbHRlci5yZWFkKSB7XG5cdCAgICAgICAgdGhpcy5oYXNSZWFkID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoZmlsdGVyLndyaXRlKSB7XG5cdCAgICAgICAgdGhpcy5oYXNXcml0ZSA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHRoaXMuZWwuX192X21vZGVsID0gbnVsbDtcblx0ICAgIHRoaXMuX3VuYmluZCAmJiB0aGlzLl91bmJpbmQoKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyBrZXlDb2RlIGFsaWFzZXNcblx0dmFyIGtleUNvZGVzID0ge1xuXHQgIGVzYzogMjcsXG5cdCAgdGFiOiA5LFxuXHQgIGVudGVyOiAxMyxcblx0ICBzcGFjZTogMzIsXG5cdCAgJ2RlbGV0ZSc6IFs4LCA0Nl0sXG5cdCAgdXA6IDM4LFxuXHQgIGxlZnQ6IDM3LFxuXHQgIHJpZ2h0OiAzOSxcblx0ICBkb3duOiA0MFxuXHR9O1xuXHRcblx0ZnVuY3Rpb24ga2V5RmlsdGVyKGhhbmRsZXIsIGtleXMpIHtcblx0ICB2YXIgY29kZXMgPSBrZXlzLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICB2YXIgY2hhckNvZGUgPSBrZXkuY2hhckNvZGVBdCgwKTtcblx0ICAgIGlmIChjaGFyQ29kZSA+IDQ3ICYmIGNoYXJDb2RlIDwgNTgpIHtcblx0ICAgICAgcmV0dXJuIHBhcnNlSW50KGtleSwgMTApO1xuXHQgICAgfVxuXHQgICAgaWYgKGtleS5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgY2hhckNvZGUgPSBrZXkudG9VcHBlckNhc2UoKS5jaGFyQ29kZUF0KDApO1xuXHQgICAgICBpZiAoY2hhckNvZGUgPiA2NCAmJiBjaGFyQ29kZSA8IDkxKSB7XG5cdCAgICAgICAgcmV0dXJuIGNoYXJDb2RlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4ga2V5Q29kZXNba2V5XTtcblx0ICB9KTtcblx0ICBjb2RlcyA9IFtdLmNvbmNhdC5hcHBseShbXSwgY29kZXMpO1xuXHQgIHJldHVybiBmdW5jdGlvbiBrZXlIYW5kbGVyKGUpIHtcblx0ICAgIGlmIChjb2Rlcy5pbmRleE9mKGUua2V5Q29kZSkgPiAtMSkge1xuXHQgICAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHN0b3BGaWx0ZXIoaGFuZGxlcikge1xuXHQgIHJldHVybiBmdW5jdGlvbiBzdG9wSGFuZGxlcihlKSB7XG5cdCAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHQgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gcHJldmVudEhhbmRsZXIoZSkge1xuXHQgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZWxmRmlsdGVyKGhhbmRsZXIpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gc2VsZkhhbmRsZXIoZSkge1xuXHQgICAgaWYgKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQpIHtcblx0ICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgb24kMSA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IE9OLFxuXHQgIGFjY2VwdFN0YXRlbWVudDogdHJ1ZSxcblx0ICBrZXlDb2Rlczoga2V5Q29kZXMsXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyBkZWFsIHdpdGggaWZyYW1lc1xuXHQgICAgaWYgKHRoaXMuZWwudGFnTmFtZSA9PT0gJ0lGUkFNRScgJiYgdGhpcy5hcmcgIT09ICdsb2FkJykge1xuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIHRoaXMuaWZyYW1lQmluZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBvbihzZWxmLmVsLmNvbnRlbnRXaW5kb3csIHNlbGYuYXJnLCBzZWxmLmhhbmRsZXIsIHNlbGYubW9kaWZpZXJzLmNhcHR1cmUpO1xuXHQgICAgICB9O1xuXHQgICAgICB0aGlzLm9uKCdsb2FkJywgdGhpcy5pZnJhbWVCaW5kKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShoYW5kbGVyKSB7XG5cdCAgICAvLyBzdHViIGEgbm9vcCBmb3Igdi1vbiB3aXRoIG5vIHZhbHVlLFxuXHQgICAgLy8gZS5nLiBAbW91c2Vkb3duLnByZXZlbnRcblx0ICAgIGlmICghdGhpcy5kZXNjcmlwdG9yLnJhdykge1xuXHQgICAgICBoYW5kbGVyID0gZnVuY3Rpb24gKCkge307XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1vbjonICsgdGhpcy5hcmcgKyAnPVwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiBleHBlY3RzIGEgZnVuY3Rpb24gdmFsdWUsICcgKyAnZ290ICcgKyBoYW5kbGVyLCB0aGlzLnZtKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGFwcGx5IG1vZGlmaWVyc1xuXHQgICAgaWYgKHRoaXMubW9kaWZpZXJzLnN0b3ApIHtcblx0ICAgICAgaGFuZGxlciA9IHN0b3BGaWx0ZXIoaGFuZGxlcik7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5tb2RpZmllcnMucHJldmVudCkge1xuXHQgICAgICBoYW5kbGVyID0gcHJldmVudEZpbHRlcihoYW5kbGVyKTtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLm1vZGlmaWVycy5zZWxmKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBzZWxmRmlsdGVyKGhhbmRsZXIpO1xuXHQgICAgfVxuXHQgICAgLy8ga2V5IGZpbHRlclxuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLm1vZGlmaWVycykuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgcmV0dXJuIGtleSAhPT0gJ3N0b3AnICYmIGtleSAhPT0gJ3ByZXZlbnQnICYmIGtleSAhPT0gJ3NlbGYnICYmIGtleSAhPT0gJ2NhcHR1cmUnO1xuXHQgICAgfSk7XG5cdCAgICBpZiAoa2V5cy5sZW5ndGgpIHtcblx0ICAgICAgaGFuZGxlciA9IGtleUZpbHRlcihoYW5kbGVyLCBrZXlzKTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLnJlc2V0KCk7XG5cdCAgICB0aGlzLmhhbmRsZXIgPSBoYW5kbGVyO1xuXHRcblx0ICAgIGlmICh0aGlzLmlmcmFtZUJpbmQpIHtcblx0ICAgICAgdGhpcy5pZnJhbWVCaW5kKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvbih0aGlzLmVsLCB0aGlzLmFyZywgdGhpcy5oYW5kbGVyLCB0aGlzLm1vZGlmaWVycy5jYXB0dXJlKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmlmcmFtZUJpbmQgPyB0aGlzLmVsLmNvbnRlbnRXaW5kb3cgOiB0aGlzLmVsO1xuXHQgICAgaWYgKHRoaXMuaGFuZGxlcikge1xuXHQgICAgICBvZmYoZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdGhpcy5yZXNldCgpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBwcmVmaXhlcyA9IFsnLXdlYmtpdC0nLCAnLW1vei0nLCAnLW1zLSddO1xuXHR2YXIgY2FtZWxQcmVmaXhlcyA9IFsnV2Via2l0JywgJ01veicsICdtcyddO1xuXHR2YXIgaW1wb3J0YW50UkUgPSAvIWltcG9ydGFudDs/JC87XG5cdHZhciBwcm9wQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRcblx0dmFyIHRlc3RFbCA9IG51bGw7XG5cdFxuXHR2YXIgc3R5bGUgPSB7XG5cdFxuXHQgIGRlZXA6IHRydWUsXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuXHQgICAgICB0aGlzLmVsLnN0eWxlLmNzc1RleHQgPSB2YWx1ZTtcblx0ICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUucmVkdWNlKGV4dGVuZCwge30pKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlIHx8IHt9KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBoYW5kbGVPYmplY3Q6IGZ1bmN0aW9uIGhhbmRsZU9iamVjdCh2YWx1ZSkge1xuXHQgICAgLy8gY2FjaGUgb2JqZWN0IHN0eWxlcyBzbyB0aGF0IG9ubHkgY2hhbmdlZCBwcm9wc1xuXHQgICAgLy8gYXJlIGFjdHVhbGx5IHVwZGF0ZWQuXG5cdCAgICB2YXIgY2FjaGUgPSB0aGlzLmNhY2hlIHx8ICh0aGlzLmNhY2hlID0ge30pO1xuXHQgICAgdmFyIG5hbWUsIHZhbDtcblx0ICAgIGZvciAobmFtZSBpbiBjYWNoZSkge1xuXHQgICAgICBpZiAoIShuYW1lIGluIHZhbHVlKSkge1xuXHQgICAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKG5hbWUsIG51bGwpO1xuXHQgICAgICAgIGRlbGV0ZSBjYWNoZVtuYW1lXTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgZm9yIChuYW1lIGluIHZhbHVlKSB7XG5cdCAgICAgIHZhbCA9IHZhbHVlW25hbWVdO1xuXHQgICAgICBpZiAodmFsICE9PSBjYWNoZVtuYW1lXSkge1xuXHQgICAgICAgIGNhY2hlW25hbWVdID0gdmFsO1xuXHQgICAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKG5hbWUsIHZhbCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBoYW5kbGVTaW5nbGU6IGZ1bmN0aW9uIGhhbmRsZVNpbmdsZShwcm9wLCB2YWx1ZSkge1xuXHQgICAgcHJvcCA9IG5vcm1hbGl6ZShwcm9wKTtcblx0ICAgIGlmICghcHJvcCkgcmV0dXJuOyAvLyB1bnN1cHBvcnRlZCBwcm9wXG5cdCAgICAvLyBjYXN0IHBvc3NpYmxlIG51bWJlcnMvYm9vbGVhbnMgaW50byBzdHJpbmdzXG5cdCAgICBpZiAodmFsdWUgIT0gbnVsbCkgdmFsdWUgKz0gJyc7XG5cdCAgICBpZiAodmFsdWUpIHtcblx0ICAgICAgdmFyIGlzSW1wb3J0YW50ID0gaW1wb3J0YW50UkUudGVzdCh2YWx1ZSkgPyAnaW1wb3J0YW50JyA6ICcnO1xuXHQgICAgICBpZiAoaXNJbXBvcnRhbnQpIHtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgICAgd2FybignSXRcXCdzIHByb2JhYmx5IGEgYmFkIGlkZWEgdG8gdXNlICFpbXBvcnRhbnQgd2l0aCBpbmxpbmUgcnVsZXMuICcgKyAnVGhpcyBmZWF0dXJlIHdpbGwgYmUgZGVwcmVjYXRlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uIG9mIFZ1ZS4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKGltcG9ydGFudFJFLCAnJykudHJpbSgpO1xuXHQgICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkocHJvcC5rZWJhYiwgdmFsdWUsIGlzSW1wb3J0YW50KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmVsLnN0eWxlW3Byb3AuY2FtZWxdID0gdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuZWwuc3R5bGVbcHJvcC5jYW1lbF0gPSAnJztcblx0ICAgIH1cblx0ICB9XG5cdFxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE5vcm1hbGl6ZSBhIENTUyBwcm9wZXJ0eSBuYW1lLlxuXHQgKiAtIGNhY2hlIHJlc3VsdFxuXHQgKiAtIGF1dG8gcHJlZml4XG5cdCAqIC0gY2FtZWxDYXNlIC0+IGRhc2gtY2FzZVxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbm9ybWFsaXplKHByb3ApIHtcblx0ICBpZiAocHJvcENhY2hlW3Byb3BdKSB7XG5cdCAgICByZXR1cm4gcHJvcENhY2hlW3Byb3BdO1xuXHQgIH1cblx0ICB2YXIgcmVzID0gcHJlZml4KHByb3ApO1xuXHQgIHByb3BDYWNoZVtwcm9wXSA9IHByb3BDYWNoZVtyZXNdID0gcmVzO1xuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBdXRvIGRldGVjdCB0aGUgYXBwcm9wcmlhdGUgcHJlZml4IGZvciBhIENTUyBwcm9wZXJ0eS5cblx0ICogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vcGF1bGlyaXNoLzUyMzY5MlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJlZml4KHByb3ApIHtcblx0ICBwcm9wID0gaHlwaGVuYXRlKHByb3ApO1xuXHQgIHZhciBjYW1lbCA9IGNhbWVsaXplKHByb3ApO1xuXHQgIHZhciB1cHBlciA9IGNhbWVsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWwuc2xpY2UoMSk7XG5cdCAgaWYgKCF0ZXN0RWwpIHtcblx0ICAgIHRlc3RFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgIH1cblx0ICB2YXIgaSA9IHByZWZpeGVzLmxlbmd0aDtcblx0ICB2YXIgcHJlZml4ZWQ7XG5cdCAgaWYgKGNhbWVsICE9PSAnZmlsdGVyJyAmJiBjYW1lbCBpbiB0ZXN0RWwuc3R5bGUpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGtlYmFiOiBwcm9wLFxuXHQgICAgICBjYW1lbDogY2FtZWxcblx0ICAgIH07XG5cdCAgfVxuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHByZWZpeGVkID0gY2FtZWxQcmVmaXhlc1tpXSArIHVwcGVyO1xuXHQgICAgaWYgKHByZWZpeGVkIGluIHRlc3RFbC5zdHlsZSkge1xuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIGtlYmFiOiBwcmVmaXhlc1tpXSArIHByb3AsXG5cdCAgICAgICAgY2FtZWw6IHByZWZpeGVkXG5cdCAgICAgIH07XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyB4bGlua1xuXHR2YXIgeGxpbmtOUyA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJztcblx0dmFyIHhsaW5rUkUgPSAvXnhsaW5rOi87XG5cdFxuXHQvLyBjaGVjayBmb3IgYXR0cmlidXRlcyB0aGF0IHByb2hpYml0IGludGVycG9sYXRpb25zXG5cdHZhciBkaXNhbGxvd2VkSW50ZXJwQXR0clJFID0gL152LXxeOnxeQHxeKD86aXN8dHJhbnNpdGlvbnx0cmFuc2l0aW9uLW1vZGV8ZGVib3VuY2V8dHJhY2stYnl8c3RhZ2dlcnxlbnRlci1zdGFnZ2VyfGxlYXZlLXN0YWdnZXIpJC87XG5cdC8vIHRoZXNlIGF0dHJpYnV0ZXMgc2hvdWxkIGFsc28gc2V0IHRoZWlyIGNvcnJlc3BvbmRpbmcgcHJvcGVydGllc1xuXHQvLyBiZWNhdXNlIHRoZXkgb25seSBhZmZlY3QgdGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIGVsZW1lbnRcblx0dmFyIGF0dHJXaXRoUHJvcHNSRSA9IC9eKD86dmFsdWV8Y2hlY2tlZHxzZWxlY3RlZHxtdXRlZCkkLztcblx0Ly8gdGhlc2UgYXR0cmlidXRlcyBleHBlY3QgZW51bXJhdGVkIHZhbHVlcyBvZiBcInRydWVcIiBvciBcImZhbHNlXCJcblx0Ly8gYnV0IGFyZSBub3QgYm9vbGVhbiBhdHRyaWJ1dGVzXG5cdHZhciBlbnVtZXJhdGVkQXR0clJFID0gL14oPzpkcmFnZ2FibGV8Y29udGVudGVkaXRhYmxlfHNwZWxsY2hlY2spJC87XG5cdFxuXHQvLyB0aGVzZSBhdHRyaWJ1dGVzIHNob3VsZCBzZXQgYSBoaWRkZW4gcHJvcGVydHkgZm9yXG5cdC8vIGJpbmRpbmcgdi1tb2RlbCB0byBvYmplY3QgdmFsdWVzXG5cdHZhciBtb2RlbFByb3BzID0ge1xuXHQgIHZhbHVlOiAnX3ZhbHVlJyxcblx0ICAndHJ1ZS12YWx1ZSc6ICdfdHJ1ZVZhbHVlJyxcblx0ICAnZmFsc2UtdmFsdWUnOiAnX2ZhbHNlVmFsdWUnXG5cdH07XG5cdFxuXHR2YXIgYmluZCQxID0ge1xuXHRcblx0ICBwcmlvcml0eTogQklORCxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBhdHRyID0gdGhpcy5hcmc7XG5cdCAgICB2YXIgdGFnID0gdGhpcy5lbC50YWdOYW1lO1xuXHQgICAgLy8gc2hvdWxkIGJlIGRlZXAgd2F0Y2ggb24gb2JqZWN0IG1vZGVcblx0ICAgIGlmICghYXR0cikge1xuXHQgICAgICB0aGlzLmRlZXAgPSB0cnVlO1xuXHQgICAgfVxuXHQgICAgLy8gaGFuZGxlIGludGVycG9sYXRpb24gYmluZGluZ3Ncblx0ICAgIHZhciBkZXNjcmlwdG9yID0gdGhpcy5kZXNjcmlwdG9yO1xuXHQgICAgdmFyIHRva2VucyA9IGRlc2NyaXB0b3IuaW50ZXJwO1xuXHQgICAgaWYgKHRva2Vucykge1xuXHQgICAgICAvLyBoYW5kbGUgaW50ZXJwb2xhdGlvbnMgd2l0aCBvbmUtdGltZSB0b2tlbnNcblx0ICAgICAgaWYgKGRlc2NyaXB0b3IuaGFzT25lVGltZSkge1xuXHQgICAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IHRva2Vuc1RvRXhwKHRva2VucywgdGhpcy5fc2NvcGUgfHwgdGhpcy52bSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIG9ubHkgYWxsb3cgYmluZGluZyBvbiBuYXRpdmUgYXR0cmlidXRlc1xuXHQgICAgICBpZiAoZGlzYWxsb3dlZEludGVycEF0dHJSRS50ZXN0KGF0dHIpIHx8IGF0dHIgPT09ICduYW1lJyAmJiAodGFnID09PSAnUEFSVElBTCcgfHwgdGFnID09PSAnU0xPVCcpKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKGF0dHIgKyAnPVwiJyArIGRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2F0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uIGlzIG5vdCBhbGxvd2VkIGluIFZ1ZS5qcyAnICsgJ2RpcmVjdGl2ZXMgYW5kIHNwZWNpYWwgYXR0cmlidXRlcy4nLCB0aGlzLnZtKTtcblx0ICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcblx0ICAgICAgICB0aGlzLmludmFsaWQgPSB0cnVlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICB2YXIgcmF3ID0gYXR0ciArICc9XCInICsgZGVzY3JpcHRvci5yYXcgKyAnXCI6ICc7XG5cdCAgICAgICAgLy8gd2FybiBzcmNcblx0ICAgICAgICBpZiAoYXR0ciA9PT0gJ3NyYycpIHtcblx0ICAgICAgICAgIHdhcm4ocmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzcmNcIiBhdHRyaWJ1dGUgd2lsbCBjYXVzZSAnICsgJ2EgNDA0IHJlcXVlc3QuIFVzZSB2LWJpbmQ6c3JjIGluc3RlYWQuJywgdGhpcy52bSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyB3YXJuIHN0eWxlXG5cdCAgICAgICAgaWYgKGF0dHIgPT09ICdzdHlsZScpIHtcblx0ICAgICAgICAgIHdhcm4ocmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzdHlsZVwiIGF0dHJpYnV0ZSB3aWxsIGNhdXNlICcgKyAndGhlIGF0dHJpYnV0ZSB0byBiZSBkaXNjYXJkZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIuICcgKyAnVXNlIHYtYmluZDpzdHlsZSBpbnN0ZWFkLicsIHRoaXMudm0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICBpZiAodGhpcy5pbnZhbGlkKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBhdHRyID0gdGhpcy5hcmc7XG5cdCAgICBpZiAodGhpcy5hcmcpIHtcblx0ICAgICAgdGhpcy5oYW5kbGVTaW5nbGUoYXR0ciwgdmFsdWUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUgfHwge30pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8vIHNoYXJlIG9iamVjdCBoYW5kbGVyIHdpdGggdi1iaW5kOmNsYXNzXG5cdCAgaGFuZGxlT2JqZWN0OiBzdHlsZS5oYW5kbGVPYmplY3QsXG5cdFxuXHQgIGhhbmRsZVNpbmdsZTogZnVuY3Rpb24gaGFuZGxlU2luZ2xlKGF0dHIsIHZhbHVlKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgdmFyIGludGVycCA9IHRoaXMuZGVzY3JpcHRvci5pbnRlcnA7XG5cdCAgICBpZiAodGhpcy5tb2RpZmllcnMuY2FtZWwpIHtcblx0ICAgICAgYXR0ciA9IGNhbWVsaXplKGF0dHIpO1xuXHQgICAgfVxuXHQgICAgaWYgKCFpbnRlcnAgJiYgYXR0cldpdGhQcm9wc1JFLnRlc3QoYXR0cikgJiYgYXR0ciBpbiBlbCkge1xuXHQgICAgICB2YXIgYXR0clZhbHVlID0gYXR0ciA9PT0gJ3ZhbHVlJyA/IHZhbHVlID09IG51bGwgLy8gSUU5IHdpbGwgc2V0IGlucHV0LnZhbHVlIHRvIFwibnVsbFwiIGZvciBudWxsLi4uXG5cdCAgICAgID8gJycgOiB2YWx1ZSA6IHZhbHVlO1xuXHRcblx0ICAgICAgaWYgKGVsW2F0dHJdICE9PSBhdHRyVmFsdWUpIHtcblx0ICAgICAgICBlbFthdHRyXSA9IGF0dHJWYWx1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gc2V0IG1vZGVsIHByb3BzXG5cdCAgICB2YXIgbW9kZWxQcm9wID0gbW9kZWxQcm9wc1thdHRyXTtcblx0ICAgIGlmICghaW50ZXJwICYmIG1vZGVsUHJvcCkge1xuXHQgICAgICBlbFttb2RlbFByb3BdID0gdmFsdWU7XG5cdCAgICAgIC8vIHVwZGF0ZSB2LW1vZGVsIGlmIHByZXNlbnRcblx0ICAgICAgdmFyIG1vZGVsID0gZWwuX192X21vZGVsO1xuXHQgICAgICBpZiAobW9kZWwpIHtcblx0ICAgICAgICBtb2RlbC5saXN0ZW5lcigpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBkbyBub3Qgc2V0IHZhbHVlIGF0dHJpYnV0ZSBmb3IgdGV4dGFyZWFcblx0ICAgIGlmIChhdHRyID09PSAndmFsdWUnICYmIGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcblx0ICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICAvLyB1cGRhdGUgYXR0cmlidXRlXG5cdCAgICBpZiAoZW51bWVyYXRlZEF0dHJSRS50ZXN0KGF0dHIpKSB7XG5cdCAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSA/ICd0cnVlJyA6ICdmYWxzZScpO1xuXHQgICAgfSBlbHNlIGlmICh2YWx1ZSAhPSBudWxsICYmIHZhbHVlICE9PSBmYWxzZSkge1xuXHQgICAgICBpZiAoYXR0ciA9PT0gJ2NsYXNzJykge1xuXHQgICAgICAgIC8vIGhhbmRsZSBlZGdlIGNhc2UgIzE5NjA6XG5cdCAgICAgICAgLy8gY2xhc3MgaW50ZXJwb2xhdGlvbiBzaG91bGQgbm90IG92ZXJ3cml0ZSBWdWUgdHJhbnNpdGlvbiBjbGFzc1xuXHQgICAgICAgIGlmIChlbC5fX3ZfdHJhbnMpIHtcblx0ICAgICAgICAgIHZhbHVlICs9ICcgJyArIGVsLl9fdl90cmFucy5pZCArICctdHJhbnNpdGlvbic7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHNldENsYXNzKGVsLCB2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoeGxpbmtSRS50ZXN0KGF0dHIpKSB7XG5cdCAgICAgICAgZWwuc2V0QXR0cmlidXRlTlMoeGxpbmtOUywgYXR0ciwgdmFsdWUgPT09IHRydWUgPyAnJyA6IHZhbHVlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUgPT09IHRydWUgPyAnJyA6IHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBlbCA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IEVMLFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoIXRoaXMuYXJnKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBpZCA9IHRoaXMuaWQgPSBjYW1lbGl6ZSh0aGlzLmFyZyk7XG5cdCAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kZWxzO1xuXHQgICAgaWYgKGhhc093bihyZWZzLCBpZCkpIHtcblx0ICAgICAgcmVmc1tpZF0gPSB0aGlzLmVsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZGVmaW5lUmVhY3RpdmUocmVmcywgaWQsIHRoaXMuZWwpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJGVscztcblx0ICAgIGlmIChyZWZzW3RoaXMuaWRdID09PSB0aGlzLmVsKSB7XG5cdCAgICAgIHJlZnNbdGhpcy5pZF0gPSBudWxsO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciByZWYgPSB7XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1yZWY6JyArIHRoaXMuYXJnICsgJyBtdXN0IGJlIHVzZWQgb24gYSBjaGlsZCAnICsgJ2NvbXBvbmVudC4gRm91bmQgb24gPCcgKyB0aGlzLmVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICc+LicsIHRoaXMudm0pO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBjbG9hayA9IHtcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIHRoaXMudm0uJG9uY2UoJ3ByZS1ob29rOmNvbXBpbGVkJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3YtY2xvYWsnKTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIG11c3QgZXhwb3J0IHBsYWluIG9iamVjdFxuXHR2YXIgZGlyZWN0aXZlcyA9IHtcblx0ICB0ZXh0OiB0ZXh0JDEsXG5cdCAgaHRtbDogaHRtbCxcblx0ICAnZm9yJzogdkZvcixcblx0ICAnaWYnOiB2SWYsXG5cdCAgc2hvdzogc2hvdyxcblx0ICBtb2RlbDogbW9kZWwsXG5cdCAgb246IG9uJDEsXG5cdCAgYmluZDogYmluZCQxLFxuXHQgIGVsOiBlbCxcblx0ICByZWY6IHJlZixcblx0ICBjbG9hazogY2xvYWtcblx0fTtcblx0XG5cdHZhciB2Q2xhc3MgPSB7XG5cdFxuXHQgIGRlZXA6IHRydWUsXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICBpZiAoIXZhbHVlKSB7XG5cdCAgICAgIHRoaXMuY2xlYW51cCgpO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHRoaXMuc2V0Q2xhc3ModmFsdWUudHJpbSgpLnNwbGl0KC9cXHMrLykpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5zZXRDbGFzcyhub3JtYWxpemUkMSh2YWx1ZSkpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHNldENsYXNzOiBmdW5jdGlvbiBzZXRDbGFzcyh2YWx1ZSkge1xuXHQgICAgdGhpcy5jbGVhbnVwKHZhbHVlKTtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciB2YWwgPSB2YWx1ZVtpXTtcblx0ICAgICAgaWYgKHZhbCkge1xuXHQgICAgICAgIGFwcGx5KHRoaXMuZWwsIHZhbCwgYWRkQ2xhc3MpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aGlzLnByZXZLZXlzID0gdmFsdWU7XG5cdCAgfSxcblx0XG5cdCAgY2xlYW51cDogZnVuY3Rpb24gY2xlYW51cCh2YWx1ZSkge1xuXHQgICAgdmFyIHByZXZLZXlzID0gdGhpcy5wcmV2S2V5cztcblx0ICAgIGlmICghcHJldktleXMpIHJldHVybjtcblx0ICAgIHZhciBpID0gcHJldktleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YXIga2V5ID0gcHJldktleXNbaV07XG5cdCAgICAgIGlmICghdmFsdWUgfHwgdmFsdWUuaW5kZXhPZihrZXkpIDwgMCkge1xuXHQgICAgICAgIGFwcGx5KHRoaXMuZWwsIGtleSwgcmVtb3ZlQ2xhc3MpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE5vcm1hbGl6ZSBvYmplY3RzIGFuZCBhcnJheXMgKHBvdGVudGlhbGx5IGNvbnRhaW5pbmcgb2JqZWN0cylcblx0ICogaW50byBhcnJheSBvZiBzdHJpbmdzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdHxBcnJheTxTdHJpbmd8T2JqZWN0Pn0gdmFsdWVcblx0ICogQHJldHVybiB7QXJyYXk8U3RyaW5nPn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBub3JtYWxpemUkMSh2YWx1ZSkge1xuXHQgIHZhciByZXMgPSBbXTtcblx0ICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBfa2V5ID0gdmFsdWVbaV07XG5cdCAgICAgIGlmIChfa2V5KSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBfa2V5ID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgcmVzLnB1c2goX2tleSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGZvciAodmFyIGsgaW4gX2tleSkge1xuXHQgICAgICAgICAgICBpZiAoX2tleVtrXSkgcmVzLnB1c2goayk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcblx0ICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuXHQgICAgICBpZiAodmFsdWVba2V5XSkgcmVzLnB1c2goa2V5KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFkZCBvciByZW1vdmUgYSBjbGFzcy9jbGFzc2VzIG9uIGFuIGVsZW1lbnRcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBjbGFzcyBuYW1lLiBUaGlzIG1heSBvciBtYXkgbm90XG5cdCAqICAgICAgICAgICAgICAgICAgICAgY29udGFpbiBhIHNwYWNlIGNoYXJhY3RlciwgaW4gc3VjaCBhXG5cdCAqICAgICAgICAgICAgICAgICAgICAgY2FzZSB3ZSdsbCBkZWFsIHdpdGggbXVsdGlwbGUgY2xhc3Ncblx0ICogICAgICAgICAgICAgICAgICAgICBuYW1lcyBhdCBvbmNlLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFwcGx5KGVsLCBrZXksIGZuKSB7XG5cdCAga2V5ID0ga2V5LnRyaW0oKTtcblx0ICBpZiAoa2V5LmluZGV4T2YoJyAnKSA9PT0gLTEpIHtcblx0ICAgIGZuKGVsLCBrZXkpO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICAvLyBUaGUga2V5IGNvbnRhaW5zIG9uZSBvciBtb3JlIHNwYWNlIGNoYXJhY3RlcnMuXG5cdCAgLy8gU2luY2UgYSBjbGFzcyBuYW1lIGRvZXNuJ3QgYWNjZXB0IHN1Y2ggY2hhcmFjdGVycywgd2Vcblx0ICAvLyB0cmVhdCBpdCBhcyBtdWx0aXBsZSBjbGFzc2VzLlxuXHQgIHZhciBrZXlzID0ga2V5LnNwbGl0KC9cXHMrLyk7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgZm4oZWwsIGtleXNbaV0pO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGNvbXBvbmVudCA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IENPTVBPTkVOVCxcblx0XG5cdCAgcGFyYW1zOiBbJ2tlZXAtYWxpdmUnLCAndHJhbnNpdGlvbi1tb2RlJywgJ2lubGluZS10ZW1wbGF0ZSddLFxuXHRcblx0ICAvKipcblx0ICAgKiBTZXR1cC4gVHdvIHBvc3NpYmxlIHVzYWdlczpcblx0ICAgKlxuXHQgICAqIC0gc3RhdGljOlxuXHQgICAqICAgPGNvbXA+IG9yIDxkaXYgdi1jb21wb25lbnQ9XCJjb21wXCI+XG5cdCAgICpcblx0ICAgKiAtIGR5bmFtaWM6XG5cdCAgICogICA8Y29tcG9uZW50IDppcz1cInZpZXdcIj5cblx0ICAgKi9cblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIGlmICghdGhpcy5lbC5fX3Z1ZV9fKSB7XG5cdCAgICAgIC8vIGtlZXAtYWxpdmUgY2FjaGVcblx0ICAgICAgdGhpcy5rZWVwQWxpdmUgPSB0aGlzLnBhcmFtcy5rZWVwQWxpdmU7XG5cdCAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xuXHQgICAgICAgIHRoaXMuY2FjaGUgPSB7fTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBjaGVjayBpbmxpbmUtdGVtcGxhdGVcblx0ICAgICAgaWYgKHRoaXMucGFyYW1zLmlubGluZVRlbXBsYXRlKSB7XG5cdCAgICAgICAgLy8gZXh0cmFjdCBpbmxpbmUgdGVtcGxhdGUgYXMgYSBEb2N1bWVudEZyYWdtZW50XG5cdCAgICAgICAgdGhpcy5pbmxpbmVUZW1wbGF0ZSA9IGV4dHJhY3RDb250ZW50KHRoaXMuZWwsIHRydWUpO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGNvbXBvbmVudCByZXNvbHV0aW9uIHJlbGF0ZWQgc3RhdGVcblx0ICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSB0aGlzLkNvbXBvbmVudCA9IG51bGw7XG5cdCAgICAgIC8vIHRyYW5zaXRpb24gcmVsYXRlZCBzdGF0ZVxuXHQgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFscyA9IDA7XG5cdCAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxDYiA9IG51bGw7XG5cdCAgICAgIC8vIGNyZWF0ZSBhIHJlZiBhbmNob3Jcblx0ICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtY29tcG9uZW50Jyk7XG5cdCAgICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuXHQgICAgICAvLyByZW1vdmUgaXMgYXR0cmlidXRlLlxuXHQgICAgICAvLyB0aGlzIGlzIHJlbW92ZWQgZHVyaW5nIGNvbXBpbGF0aW9uLCBidXQgYmVjYXVzZSBjb21waWxhdGlvbiBpc1xuXHQgICAgICAvLyBjYWNoZWQsIHdoZW4gdGhlIGNvbXBvbmVudCBpcyB1c2VkIGVsc2V3aGVyZSB0aGlzIGF0dHJpYnV0ZVxuXHQgICAgICAvLyB3aWxsIHJlbWFpbiBhdCBsaW5rIHRpbWUuXG5cdCAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCdpcycpO1xuXHQgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnOmlzJyk7XG5cdCAgICAgIC8vIHJlbW92ZSByZWYsIHNhbWUgYXMgYWJvdmVcblx0ICAgICAgaWYgKHRoaXMuZGVzY3JpcHRvci5yZWYpIHtcblx0ICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgndi1yZWY6JyArIGh5cGhlbmF0ZSh0aGlzLmRlc2NyaXB0b3IucmVmKSk7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gaWYgc3RhdGljLCBidWlsZCByaWdodCBub3cuXG5cdCAgICAgIGlmICh0aGlzLmxpdGVyYWwpIHtcblx0ICAgICAgICB0aGlzLnNldENvbXBvbmVudCh0aGlzLmV4cHJlc3Npb24pO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ2Nhbm5vdCBtb3VudCBjb21wb25lbnQgXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiICcgKyAnb24gYWxyZWFkeSBtb3VudGVkIGVsZW1lbnQ6ICcgKyB0aGlzLmVsKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBQdWJsaWMgdXBkYXRlLCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIgaW4gdGhlIGR5bmFtaWNcblx0ICAgKiBsaXRlcmFsIHNjZW5hcmlvLCBlLmcuIDxjb21wb25lbnQgOmlzPVwidmlld1wiPlxuXHQgICAqL1xuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgaWYgKCF0aGlzLmxpdGVyYWwpIHtcblx0ICAgICAgdGhpcy5zZXRDb21wb25lbnQodmFsdWUpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFN3aXRjaCBkeW5hbWljIGNvbXBvbmVudHMuIE1heSByZXNvbHZlIHRoZSBjb21wb25lbnRcblx0ICAgKiBhc3luY2hyb25vdXNseSwgYW5kIHBlcmZvcm0gdHJhbnNpdGlvbiBiYXNlZCBvblxuXHQgICAqIHNwZWNpZmllZCB0cmFuc2l0aW9uIG1vZGUuIEFjY2VwdHMgYSBmZXcgYWRkaXRpb25hbFxuXHQgICAqIGFyZ3VtZW50cyBzcGVjaWZpY2FsbHkgZm9yIHZ1ZS1yb3V0ZXIuXG5cdCAgICpcblx0ICAgKiBUaGUgY2FsbGJhY2sgaXMgY2FsbGVkIHdoZW4gdGhlIGZ1bGwgdHJhbnNpdGlvbiBpc1xuXHQgICAqIGZpbmlzaGVkLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICBzZXRDb21wb25lbnQ6IGZ1bmN0aW9uIHNldENvbXBvbmVudCh2YWx1ZSwgY2IpIHtcblx0ICAgIHRoaXMuaW52YWxpZGF0ZVBlbmRpbmcoKTtcblx0ICAgIGlmICghdmFsdWUpIHtcblx0ICAgICAgLy8ganVzdCByZW1vdmUgY3VycmVudFxuXHQgICAgICB0aGlzLnVuYnVpbGQodHJ1ZSk7XG5cdCAgICAgIHRoaXMucmVtb3ZlKHRoaXMuY2hpbGRWTSwgY2IpO1xuXHQgICAgICB0aGlzLmNoaWxkVk0gPSBudWxsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICB0aGlzLnJlc29sdmVDb21wb25lbnQodmFsdWUsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzZWxmLm1vdW50Q29tcG9uZW50KGNiKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVzb2x2ZSB0aGUgY29tcG9uZW50IGNvbnN0cnVjdG9yIHRvIHVzZSB3aGVuIGNyZWF0aW5nXG5cdCAgICogdGhlIGNoaWxkIHZtLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHZhbHVlXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgKi9cblx0XG5cdCAgcmVzb2x2ZUNvbXBvbmVudDogZnVuY3Rpb24gcmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgY2IpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKENvbXBvbmVudCkge1xuXHQgICAgICBzZWxmLkNvbXBvbmVudE5hbWUgPSBDb21wb25lbnQub3B0aW9ucy5uYW1lIHx8ICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBudWxsKTtcblx0ICAgICAgc2VsZi5Db21wb25lbnQgPSBDb21wb25lbnQ7XG5cdCAgICAgIGNiKCk7XG5cdCAgICB9KTtcblx0ICAgIHRoaXMudm0uX3Jlc29sdmVDb21wb25lbnQodmFsdWUsIHRoaXMucGVuZGluZ0NvbXBvbmVudENiKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2UgdXNpbmcgdGhlIGN1cnJlbnQgY29uc3RydWN0b3IgYW5kXG5cdCAgICogcmVwbGFjZSB0aGUgZXhpc3RpbmcgaW5zdGFuY2UuIFRoaXMgbWV0aG9kIGRvZXNuJ3QgY2FyZVxuXHQgICAqIHdoZXRoZXIgdGhlIG5ldyBjb21wb25lbnQgYW5kIHRoZSBvbGQgb25lIGFyZSBhY3R1YWxseVxuXHQgICAqIHRoZSBzYW1lLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICBtb3VudENvbXBvbmVudDogZnVuY3Rpb24gbW91bnRDb21wb25lbnQoY2IpIHtcblx0ICAgIC8vIGFjdHVhbCBtb3VudFxuXHQgICAgdGhpcy51bmJ1aWxkKHRydWUpO1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGFjdGl2YXRlSG9va3MgPSB0aGlzLkNvbXBvbmVudC5vcHRpb25zLmFjdGl2YXRlO1xuXHQgICAgdmFyIGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkKCk7XG5cdCAgICB2YXIgbmV3Q29tcG9uZW50ID0gdGhpcy5idWlsZCgpO1xuXHQgICAgaWYgKGFjdGl2YXRlSG9va3MgJiYgIWNhY2hlZCkge1xuXHQgICAgICB0aGlzLndhaXRpbmdGb3IgPSBuZXdDb21wb25lbnQ7XG5cdCAgICAgIGNhbGxBY3RpdmF0ZUhvb2tzKGFjdGl2YXRlSG9va3MsIG5ld0NvbXBvbmVudCwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChzZWxmLndhaXRpbmdGb3IgIT09IG5ld0NvbXBvbmVudCkge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzZWxmLndhaXRpbmdGb3IgPSBudWxsO1xuXHQgICAgICAgIHNlbGYudHJhbnNpdGlvbihuZXdDb21wb25lbnQsIGNiKTtcblx0ICAgICAgfSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyB1cGRhdGUgcmVmIGZvciBrZXB0LWFsaXZlIGNvbXBvbmVudFxuXHQgICAgICBpZiAoY2FjaGVkKSB7XG5cdCAgICAgICAgbmV3Q29tcG9uZW50Ll91cGRhdGVSZWYoKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLnRyYW5zaXRpb24obmV3Q29tcG9uZW50LCBjYik7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hlbiB0aGUgY29tcG9uZW50IGNoYW5nZXMgb3IgdW5iaW5kcyBiZWZvcmUgYW4gYXN5bmNcblx0ICAgKiBjb25zdHJ1Y3RvciBpcyByZXNvbHZlZCwgd2UgbmVlZCB0byBpbnZhbGlkYXRlIGl0c1xuXHQgICAqIHBlbmRpbmcgY2FsbGJhY2suXG5cdCAgICovXG5cdFxuXHQgIGludmFsaWRhdGVQZW5kaW5nOiBmdW5jdGlvbiBpbnZhbGlkYXRlUGVuZGluZygpIHtcblx0ICAgIGlmICh0aGlzLnBlbmRpbmdDb21wb25lbnRDYikge1xuXHQgICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYi5jYW5jZWwoKTtcblx0ICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSBudWxsO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEluc3RhbnRpYXRlL2luc2VydCBhIG5ldyBjaGlsZCB2bS5cblx0ICAgKiBJZiBrZWVwIGFsaXZlIGFuZCBoYXMgY2FjaGVkIGluc3RhbmNlLCBpbnNlcnQgdGhhdFxuXHQgICAqIGluc3RhbmNlOyBvdGhlcndpc2UgYnVpbGQgYSBuZXcgb25lIGFuZCBjYWNoZSBpdC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbZXh0cmFPcHRpb25zXVxuXHQgICAqIEByZXR1cm4ge1Z1ZX0gLSB0aGUgY3JlYXRlZCBpbnN0YW5jZVxuXHQgICAqL1xuXHRcblx0ICBidWlsZDogZnVuY3Rpb24gYnVpbGQoZXh0cmFPcHRpb25zKSB7XG5cdCAgICB2YXIgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWQoKTtcblx0ICAgIGlmIChjYWNoZWQpIHtcblx0ICAgICAgcmV0dXJuIGNhY2hlZDtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLkNvbXBvbmVudCkge1xuXHQgICAgICAvLyBkZWZhdWx0IG9wdGlvbnNcblx0ICAgICAgdmFyIG9wdGlvbnMgPSB7XG5cdCAgICAgICAgbmFtZTogdGhpcy5Db21wb25lbnROYW1lLFxuXHQgICAgICAgIGVsOiBjbG9uZU5vZGUodGhpcy5lbCksXG5cdCAgICAgICAgdGVtcGxhdGU6IHRoaXMuaW5saW5lVGVtcGxhdGUsXG5cdCAgICAgICAgLy8gbWFrZSBzdXJlIHRvIGFkZCB0aGUgY2hpbGQgd2l0aCBjb3JyZWN0IHBhcmVudFxuXHQgICAgICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGl0cyBwYXJlbnRcblx0ICAgICAgICAvLyBzaG91bGQgYmUgdGhlIHRyYW5zY2x1c2lvbiBob3N0LlxuXHQgICAgICAgIHBhcmVudDogdGhpcy5faG9zdCB8fCB0aGlzLnZtLFxuXHQgICAgICAgIC8vIGlmIG5vIGlubGluZS10ZW1wbGF0ZSwgdGhlbiB0aGUgY29tcGlsZWRcblx0ICAgICAgICAvLyBsaW5rZXIgY2FuIGJlIGNhY2hlZCBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLlxuXHQgICAgICAgIF9saW5rZXJDYWNoYWJsZTogIXRoaXMuaW5saW5lVGVtcGxhdGUsXG5cdCAgICAgICAgX3JlZjogdGhpcy5kZXNjcmlwdG9yLnJlZixcblx0ICAgICAgICBfYXNDb21wb25lbnQ6IHRydWUsXG5cdCAgICAgICAgX2lzUm91dGVyVmlldzogdGhpcy5faXNSb3V0ZXJWaWV3LFxuXHQgICAgICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGNvbnRleHRcblx0ICAgICAgICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2Vcblx0ICAgICAgICAvLyBhbmQgaXRzIGhvc3QuXG5cdCAgICAgICAgX2NvbnRleHQ6IHRoaXMudm0sXG5cdCAgICAgICAgLy8gaWYgdGhpcyBpcyBpbnNpZGUgYW4gaW5saW5lIHYtZm9yLCB0aGUgc2NvcGVcblx0ICAgICAgICAvLyB3aWxsIGJlIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgY3JlYXRlZCBmb3IgdGhpc1xuXHQgICAgICAgIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXG5cdCAgICAgICAgLy8gYW5kIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuXHQgICAgICAgIF9zY29wZTogdGhpcy5fc2NvcGUsXG5cdCAgICAgICAgLy8gcGFzcyBpbiB0aGUgb3duZXIgZnJhZ21lbnQgb2YgdGhpcyBjb21wb25lbnQuXG5cdCAgICAgICAgLy8gdGhpcyBpcyBuZWNlc3Nhcnkgc28gdGhhdCB0aGUgZnJhZ21lbnQgY2FuIGtlZXBcblx0ICAgICAgICAvLyB0cmFjayBvZiBpdHMgY29udGFpbmVkIGNvbXBvbmVudHMgaW4gb3JkZXIgdG9cblx0ICAgICAgICAvLyBjYWxsIGF0dGFjaC9kZXRhY2ggaG9va3MgZm9yIHRoZW0uXG5cdCAgICAgICAgX2ZyYWc6IHRoaXMuX2ZyYWdcblx0ICAgICAgfTtcblx0ICAgICAgLy8gZXh0cmEgb3B0aW9uc1xuXHQgICAgICAvLyBpbiAxLjAuMCB0aGlzIGlzIHVzZWQgYnkgdnVlLXJvdXRlciBvbmx5XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoZXh0cmFPcHRpb25zKSB7XG5cdCAgICAgICAgZXh0ZW5kKG9wdGlvbnMsIGV4dHJhT3B0aW9ucyk7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGNoaWxkID0gbmV3IHRoaXMuQ29tcG9uZW50KG9wdGlvbnMpO1xuXHQgICAgICBpZiAodGhpcy5rZWVwQWxpdmUpIHtcblx0ICAgICAgICB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF0gPSBjaGlsZDtcblx0ICAgICAgfVxuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbC5oYXNBdHRyaWJ1dGUoJ3RyYW5zaXRpb24nKSAmJiBjaGlsZC5faXNGcmFnbWVudCkge1xuXHQgICAgICAgIHdhcm4oJ1RyYW5zaXRpb25zIHdpbGwgbm90IHdvcmsgb24gYSBmcmFnbWVudCBpbnN0YW5jZS4gJyArICdUZW1wbGF0ZTogJyArIGNoaWxkLiRvcHRpb25zLnRlbXBsYXRlLCBjaGlsZCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGNoaWxkO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFRyeSB0byBnZXQgYSBjYWNoZWQgaW5zdGFuY2Ugb2YgdGhlIGN1cnJlbnQgY29tcG9uZW50LlxuXHQgICAqXG5cdCAgICogQHJldHVybiB7VnVlfHVuZGVmaW5lZH1cblx0ICAgKi9cblx0XG5cdCAgZ2V0Q2FjaGVkOiBmdW5jdGlvbiBnZXRDYWNoZWQoKSB7XG5cdCAgICByZXR1cm4gdGhpcy5rZWVwQWxpdmUgJiYgdGhpcy5jYWNoZVt0aGlzLkNvbXBvbmVudC5jaWRdO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFRlYXJkb3duIHRoZSBjdXJyZW50IGNoaWxkLCBidXQgZGVmZXJzIGNsZWFudXAgc29cblx0ICAgKiB0aGF0IHdlIGNhbiBzZXBhcmF0ZSB0aGUgZGVzdHJveSBhbmQgcmVtb3ZhbCBzdGVwcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJcblx0ICAgKi9cblx0XG5cdCAgdW5idWlsZDogZnVuY3Rpb24gdW5idWlsZChkZWZlcikge1xuXHQgICAgaWYgKHRoaXMud2FpdGluZ0Zvcikge1xuXHQgICAgICBpZiAoIXRoaXMua2VlcEFsaXZlKSB7XG5cdCAgICAgICAgdGhpcy53YWl0aW5nRm9yLiRkZXN0cm95KCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy53YWl0aW5nRm9yID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIHZhciBjaGlsZCA9IHRoaXMuY2hpbGRWTTtcblx0ICAgIGlmICghY2hpbGQgfHwgdGhpcy5rZWVwQWxpdmUpIHtcblx0ICAgICAgaWYgKGNoaWxkKSB7XG5cdCAgICAgICAgLy8gcmVtb3ZlIHJlZlxuXHQgICAgICAgIGNoaWxkLl9pbmFjdGl2ZSA9IHRydWU7XG5cdCAgICAgICAgY2hpbGQuX3VwZGF0ZVJlZih0cnVlKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICAvLyB0aGUgc29sZSBwdXJwb3NlIG9mIGBkZWZlckNsZWFudXBgIGlzIHNvIHRoYXQgd2UgY2FuXG5cdCAgICAvLyBcImRlYWN0aXZhdGVcIiB0aGUgdm0gcmlnaHQgbm93IGFuZCBwZXJmb3JtIERPTSByZW1vdmFsXG5cdCAgICAvLyBsYXRlci5cblx0ICAgIGNoaWxkLiRkZXN0cm95KGZhbHNlLCBkZWZlcik7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVtb3ZlIGN1cnJlbnQgZGVzdHJveWVkIGNoaWxkIGFuZCBtYW51YWxseSBkb1xuXHQgICAqIHRoZSBjbGVhbnVwIGFmdGVyIHJlbW92YWwuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAqL1xuXHRcblx0ICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShjaGlsZCwgY2IpIHtcblx0ICAgIHZhciBrZWVwQWxpdmUgPSB0aGlzLmtlZXBBbGl2ZTtcblx0ICAgIGlmIChjaGlsZCkge1xuXHQgICAgICAvLyB3ZSBtYXkgaGF2ZSBhIGNvbXBvbmVudCBzd2l0Y2ggd2hlbiBhIHByZXZpb3VzXG5cdCAgICAgIC8vIGNvbXBvbmVudCBpcyBzdGlsbCBiZWluZyB0cmFuc2l0aW9uZWQgb3V0LlxuXHQgICAgICAvLyB3ZSB3YW50IHRvIHRyaWdnZXIgb25seSBvbmUgbGFzdGVzdCBpbnNlcnRpb24gY2Jcblx0ICAgICAgLy8gd2hlbiB0aGUgZXhpc3RpbmcgdHJhbnNpdGlvbiBmaW5pc2hlcy4gKCMxMTE5KVxuXHQgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFscysrO1xuXHQgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsQ2IgPSBjYjtcblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICBjaGlsZC4kcmVtb3ZlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFscy0tO1xuXHQgICAgICAgIGlmICgha2VlcEFsaXZlKSBjaGlsZC5fY2xlYW51cCgpO1xuXHQgICAgICAgIGlmICghc2VsZi5wZW5kaW5nUmVtb3ZhbHMgJiYgc2VsZi5wZW5kaW5nUmVtb3ZhbENiKSB7XG5cdCAgICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IoKTtcblx0ICAgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxDYiA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSBpZiAoY2IpIHtcblx0ICAgICAgY2IoKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBBY3R1YWxseSBzd2FwIHRoZSBjb21wb25lbnRzLCBkZXBlbmRpbmcgb24gdGhlXG5cdCAgICogdHJhbnNpdGlvbiBtb2RlLiBEZWZhdWx0cyB0byBzaW11bHRhbmVvdXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICB0cmFuc2l0aW9uOiBmdW5jdGlvbiB0cmFuc2l0aW9uKHRhcmdldCwgY2IpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBjdXJyZW50ID0gdGhpcy5jaGlsZFZNO1xuXHQgICAgLy8gZm9yIGRldnRvb2wgaW5zcGVjdGlvblxuXHQgICAgaWYgKGN1cnJlbnQpIGN1cnJlbnQuX2luYWN0aXZlID0gdHJ1ZTtcblx0ICAgIHRhcmdldC5faW5hY3RpdmUgPSBmYWxzZTtcblx0ICAgIHRoaXMuY2hpbGRWTSA9IHRhcmdldDtcblx0ICAgIHN3aXRjaCAoc2VsZi5wYXJhbXMudHJhbnNpdGlvbk1vZGUpIHtcblx0ICAgICAgY2FzZSAnaW4tb3V0Jzpcblx0ICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCwgY2IpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICdvdXQtaW4nOlxuXHQgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBjYik7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCk7XG5cdCAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGNiKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBVbmJpbmQuXG5cdCAgICovXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdGhpcy5pbnZhbGlkYXRlUGVuZGluZygpO1xuXHQgICAgLy8gRG8gbm90IGRlZmVyIGNsZWFudXAgd2hlbiB1bmJpbmRpbmdcblx0ICAgIHRoaXMudW5idWlsZCgpO1xuXHQgICAgLy8gZGVzdHJveSBhbGwga2VlcC1hbGl2ZSBjYWNoZWQgaW5zdGFuY2VzXG5cdCAgICBpZiAodGhpcy5jYWNoZSkge1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jYWNoZSkge1xuXHQgICAgICAgIHRoaXMuY2FjaGVba2V5XS4kZGVzdHJveSgpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuY2FjaGUgPSBudWxsO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDYWxsIGFjdGl2YXRlIGhvb2tzIGluIG9yZGVyIChhc3luY2hyb25vdXMpXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGhvb2tzXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNhbGxBY3RpdmF0ZUhvb2tzKGhvb2tzLCB2bSwgY2IpIHtcblx0ICB2YXIgdG90YWwgPSBob29rcy5sZW5ndGg7XG5cdCAgdmFyIGNhbGxlZCA9IDA7XG5cdCAgaG9va3NbMF0uY2FsbCh2bSwgbmV4dCk7XG5cdCAgZnVuY3Rpb24gbmV4dCgpIHtcblx0ICAgIGlmICgrK2NhbGxlZCA+PSB0b3RhbCkge1xuXHQgICAgICBjYigpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaG9va3NbY2FsbGVkXS5jYWxsKHZtLCBuZXh0KTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciBwcm9wQmluZGluZ01vZGVzID0gY29uZmlnLl9wcm9wQmluZGluZ01vZGVzO1xuXHR2YXIgZW1wdHkgPSB7fTtcblx0XG5cdC8vIHJlZ2V4ZXNcblx0dmFyIGlkZW50UkUkMSA9IC9eWyRfYS16QS1aXStbXFx3JF0qJC87XG5cdHZhciBzZXR0YWJsZVBhdGhSRSA9IC9eW0EtWmEtel8kXVtcXHckXSooXFwuW0EtWmEtel8kXVtcXHckXSp8XFxbW15cXFtcXF1dK1xcXSkqJC87XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBwcm9wcyBvbiBhIHJvb3QgZWxlbWVudCBhbmQgcmV0dXJuXG5cdCAqIGEgcHJvcHMgbGluayBmdW5jdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHByb3BPcHRpb25zXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gcHJvcHNMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlUHJvcHMoZWwsIHByb3BPcHRpb25zLCB2bSkge1xuXHQgIHZhciBwcm9wcyA9IFtdO1xuXHQgIHZhciBuYW1lcyA9IE9iamVjdC5rZXlzKHByb3BPcHRpb25zKTtcblx0ICB2YXIgaSA9IG5hbWVzLmxlbmd0aDtcblx0ICB2YXIgb3B0aW9ucywgbmFtZSwgYXR0ciwgdmFsdWUsIHBhdGgsIHBhcnNlZCwgcHJvcDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBuYW1lID0gbmFtZXNbaV07XG5cdCAgICBvcHRpb25zID0gcHJvcE9wdGlvbnNbbmFtZV0gfHwgZW1wdHk7XG5cdFxuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgbmFtZSA9PT0gJyRkYXRhJykge1xuXHQgICAgICB3YXJuKCdEbyBub3QgdXNlICRkYXRhIGFzIHByb3AuJywgdm0pO1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBwcm9wcyBjb3VsZCBjb250YWluIGRhc2hlcywgd2hpY2ggd2lsbCBiZVxuXHQgICAgLy8gaW50ZXJwcmV0ZWQgYXMgbWludXMgY2FsY3VsYXRpb25zIGJ5IHRoZSBwYXJzZXJcblx0ICAgIC8vIHNvIHdlIG5lZWQgdG8gY2FtZWxpemUgdGhlIHBhdGggaGVyZVxuXHQgICAgcGF0aCA9IGNhbWVsaXplKG5hbWUpO1xuXHQgICAgaWYgKCFpZGVudFJFJDEudGVzdChwYXRoKSkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgcHJvcCBrZXk6IFwiJyArIG5hbWUgKyAnXCIuIFByb3Aga2V5cyAnICsgJ211c3QgYmUgdmFsaWQgaWRlbnRpZmllcnMuJywgdm0pO1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0XG5cdCAgICBwcm9wID0ge1xuXHQgICAgICBuYW1lOiBuYW1lLFxuXHQgICAgICBwYXRoOiBwYXRoLFxuXHQgICAgICBvcHRpb25zOiBvcHRpb25zLFxuXHQgICAgICBtb2RlOiBwcm9wQmluZGluZ01vZGVzLk9ORV9XQVksXG5cdCAgICAgIHJhdzogbnVsbFxuXHQgICAgfTtcblx0XG5cdCAgICBhdHRyID0gaHlwaGVuYXRlKG5hbWUpO1xuXHQgICAgLy8gZmlyc3QgY2hlY2sgZHluYW1pYyB2ZXJzaW9uXG5cdCAgICBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIpKSA9PT0gbnVsbCkge1xuXHQgICAgICBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIgKyAnLnN5bmMnKSkgIT09IG51bGwpIHtcblx0ICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVk7XG5cdCAgICAgIH0gZWxzZSBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIgKyAnLm9uY2UnKSkgIT09IG51bGwpIHtcblx0ICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLk9ORV9USU1FO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcblx0ICAgICAgLy8gaGFzIGR5bmFtaWMgYmluZGluZyFcblx0ICAgICAgcHJvcC5yYXcgPSB2YWx1ZTtcblx0ICAgICAgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuXHQgICAgICB2YWx1ZSA9IHBhcnNlZC5leHByZXNzaW9uO1xuXHQgICAgICBwcm9wLmZpbHRlcnMgPSBwYXJzZWQuZmlsdGVycztcblx0ICAgICAgLy8gY2hlY2sgYmluZGluZyB0eXBlXG5cdCAgICAgIGlmIChpc0xpdGVyYWwodmFsdWUpICYmICFwYXJzZWQuZmlsdGVycykge1xuXHQgICAgICAgIC8vIGZvciBleHByZXNzaW9ucyBjb250YWluaW5nIGxpdGVyYWwgbnVtYmVycyBhbmRcblx0ICAgICAgICAvLyBib29sZWFucywgdGhlcmUncyBubyBuZWVkIHRvIHNldHVwIGEgcHJvcCBiaW5kaW5nLFxuXHQgICAgICAgIC8vIHNvIHdlIGNhbiBvcHRpbWl6ZSB0aGVtIGFzIGEgb25lLXRpbWUgc2V0LlxuXHQgICAgICAgIHByb3Aub3B0aW1pemVkTGl0ZXJhbCA9IHRydWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcHJvcC5keW5hbWljID0gdHJ1ZTtcblx0ICAgICAgICAvLyBjaGVjayBub24tc2V0dGFibGUgcGF0aCBmb3IgdHdvLXdheSBiaW5kaW5nc1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHByb3AubW9kZSA9PT0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZICYmICFzZXR0YWJsZVBhdGhSRS50ZXN0KHZhbHVlKSkge1xuXHQgICAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfV0FZO1xuXHQgICAgICAgICAgd2FybignQ2Fubm90IGJpbmQgdHdvLXdheSBwcm9wIHdpdGggbm9uLXNldHRhYmxlICcgKyAncGFyZW50IHBhdGg6ICcgKyB2YWx1ZSwgdm0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBwcm9wLnBhcmVudFBhdGggPSB2YWx1ZTtcblx0XG5cdCAgICAgIC8vIHdhcm4gcmVxdWlyZWQgdHdvLXdheVxuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBvcHRpb25zLnR3b1dheSAmJiBwcm9wLm1vZGUgIT09IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWSkge1xuXHQgICAgICAgIHdhcm4oJ1Byb3AgXCInICsgbmFtZSArICdcIiBleHBlY3RzIGEgdHdvLXdheSBiaW5kaW5nIHR5cGUuJywgdm0pO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKCh2YWx1ZSA9IGdldEF0dHIoZWwsIGF0dHIpKSAhPT0gbnVsbCkge1xuXHQgICAgICAvLyBoYXMgbGl0ZXJhbCBiaW5kaW5nIVxuXHQgICAgICBwcm9wLnJhdyA9IHZhbHVlO1xuXHQgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIC8vIGNoZWNrIHBvc3NpYmxlIGNhbWVsQ2FzZSBwcm9wIHVzYWdlXG5cdCAgICAgIHZhciBsb3dlckNhc2VOYW1lID0gcGF0aC50b0xvd2VyQ2FzZSgpO1xuXHQgICAgICB2YWx1ZSA9IC9bQS1aXFwtXS8udGVzdChuYW1lKSAmJiAoZWwuZ2V0QXR0cmlidXRlKGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLm9uY2UnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSArICcub25jZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lICsgJy5zeW5jJykgfHwgZWwuZ2V0QXR0cmlidXRlKCd2LWJpbmQ6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLnN5bmMnKSk7XG5cdCAgICAgIGlmICh2YWx1ZSkge1xuXHQgICAgICAgIHdhcm4oJ1Bvc3NpYmxlIHVzYWdlIGVycm9yIGZvciBwcm9wIGAnICsgbG93ZXJDYXNlTmFtZSArICdgIC0gJyArICdkaWQgeW91IG1lYW4gYCcgKyBhdHRyICsgJ2A/IEhUTUwgaXMgY2FzZS1pbnNlbnNpdGl2ZSwgcmVtZW1iZXIgdG8gdXNlICcgKyAna2ViYWItY2FzZSBmb3IgcHJvcHMgaW4gdGVtcGxhdGVzLicsIHZtKTtcblx0ICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJlcXVpcmVkKSB7XG5cdCAgICAgICAgLy8gd2FybiBtaXNzaW5nIHJlcXVpcmVkXG5cdCAgICAgICAgd2FybignTWlzc2luZyByZXF1aXJlZCBwcm9wOiAnICsgbmFtZSwgdm0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBwdXNoIHByb3Bcblx0ICAgIHByb3BzLnB1c2gocHJvcCk7XG5cdCAgfVxuXHQgIHJldHVybiBtYWtlUHJvcHNMaW5rRm4ocHJvcHMpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQnVpbGQgYSBmdW5jdGlvbiB0aGF0IGFwcGxpZXMgcHJvcHMgdG8gYSB2bS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gcHJvcHNcblx0ICogQHJldHVybiB7RnVuY3Rpb259IHByb3BzTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVByb3BzTGlua0ZuKHByb3BzKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHByb3BzTGlua0ZuKHZtLCBzY29wZSkge1xuXHQgICAgLy8gc3RvcmUgcmVzb2x2ZWQgcHJvcHMgaW5mb1xuXHQgICAgdm0uX3Byb3BzID0ge307XG5cdCAgICB2YXIgaW5saW5lUHJvcHMgPSB2bS4kb3B0aW9ucy5wcm9wc0RhdGE7XG5cdCAgICB2YXIgaSA9IHByb3BzLmxlbmd0aDtcblx0ICAgIHZhciBwcm9wLCBwYXRoLCBvcHRpb25zLCB2YWx1ZSwgcmF3O1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBwcm9wID0gcHJvcHNbaV07XG5cdCAgICAgIHJhdyA9IHByb3AucmF3O1xuXHQgICAgICBwYXRoID0gcHJvcC5wYXRoO1xuXHQgICAgICBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xuXHQgICAgICB2bS5fcHJvcHNbcGF0aF0gPSBwcm9wO1xuXHQgICAgICBpZiAoaW5saW5lUHJvcHMgJiYgaGFzT3duKGlubGluZVByb3BzLCBwYXRoKSkge1xuXHQgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCBpbmxpbmVQcm9wc1twYXRoXSk7XG5cdCAgICAgIH1pZiAocmF3ID09PSBudWxsKSB7XG5cdCAgICAgICAgLy8gaW5pdGlhbGl6ZSBhYnNlbnQgcHJvcFxuXHQgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB1bmRlZmluZWQpO1xuXHQgICAgICB9IGVsc2UgaWYgKHByb3AuZHluYW1pYykge1xuXHQgICAgICAgIC8vIGR5bmFtaWMgcHJvcFxuXHQgICAgICAgIGlmIChwcm9wLm1vZGUgPT09IHByb3BCaW5kaW5nTW9kZXMuT05FX1RJTUUpIHtcblx0ICAgICAgICAgIC8vIG9uZSB0aW1lIGJpbmRpbmdcblx0ICAgICAgICAgIHZhbHVlID0gKHNjb3BlIHx8IHZtLl9jb250ZXh0IHx8IHZtKS4kZ2V0KHByb3AucGFyZW50UGF0aCk7XG5cdCAgICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBpZiAodm0uX2NvbnRleHQpIHtcblx0ICAgICAgICAgICAgLy8gZHluYW1pYyBiaW5kaW5nXG5cdCAgICAgICAgICAgIHZtLl9iaW5kRGlyKHtcblx0ICAgICAgICAgICAgICBuYW1lOiAncHJvcCcsXG5cdCAgICAgICAgICAgICAgZGVmOiBwcm9wRGVmLFxuXHQgICAgICAgICAgICAgIHByb3A6IHByb3Bcblx0ICAgICAgICAgICAgfSwgbnVsbCwgbnVsbCwgc2NvcGUpOyAvLyBlbCwgaG9zdCwgc2NvcGVcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgLy8gcm9vdCBpbnN0YW5jZVxuXHQgICAgICAgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2bS4kZ2V0KHByb3AucGFyZW50UGF0aCkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKHByb3Aub3B0aW1pemVkTGl0ZXJhbCkge1xuXHQgICAgICAgIC8vIG9wdGltaXplZCBsaXRlcmFsLCBjYXN0IGl0IGFuZCBqdXN0IHNldCBvbmNlXG5cdCAgICAgICAgdmFyIHN0cmlwcGVkID0gc3RyaXBRdW90ZXMocmF3KTtcblx0ICAgICAgICB2YWx1ZSA9IHN0cmlwcGVkID09PSByYXcgPyB0b0Jvb2xlYW4odG9OdW1iZXIocmF3KSkgOiBzdHJpcHBlZDtcblx0ICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIHN0cmluZyBsaXRlcmFsLCBidXQgd2UgbmVlZCB0byBjYXRlciBmb3Jcblx0ICAgICAgICAvLyBCb29sZWFuIHByb3BzIHdpdGggbm8gdmFsdWUsIG9yIHdpdGggc2FtZVxuXHQgICAgICAgIC8vIGxpdGVyYWwgdmFsdWUgKGUuZy4gZGlzYWJsZWQ9XCJkaXNhYmxlZFwiKVxuXHQgICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWxvYWRlci9pc3N1ZXMvMTgyXG5cdCAgICAgICAgdmFsdWUgPSBvcHRpb25zLnR5cGUgPT09IEJvb2xlYW4gJiYgKHJhdyA9PT0gJycgfHwgcmF3ID09PSBoeXBoZW5hdGUocHJvcC5uYW1lKSkgPyB0cnVlIDogcmF3O1xuXHQgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJvY2VzcyBhIHByb3Agd2l0aCBhIHJhd1ZhbHVlLCBhcHBseWluZyBuZWNlc3NhcnkgY29lcnNpb25zLFxuXHQgKiBkZWZhdWx0IHZhbHVlcyAmIGFzc2VydGlvbnMgYW5kIGNhbGwgdGhlIGdpdmVuIGNhbGxiYWNrIHdpdGhcblx0ICogcHJvY2Vzc2VkIHZhbHVlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3Bcblx0ICogQHBhcmFtIHsqfSByYXdWYWx1ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHJhd1ZhbHVlLCBmbikge1xuXHQgIHZhciBpc1NpbXBsZSA9IHByb3AuZHluYW1pYyAmJiBpc1NpbXBsZVBhdGgocHJvcC5wYXJlbnRQYXRoKTtcblx0ICB2YXIgdmFsdWUgPSByYXdWYWx1ZTtcblx0ICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgdmFsdWUgPSBnZXRQcm9wRGVmYXVsdFZhbHVlKHZtLCBwcm9wKTtcblx0ICB9XG5cdCAgdmFsdWUgPSBjb2VyY2VQcm9wKHByb3AsIHZhbHVlLCB2bSk7XG5cdCAgdmFyIGNvZXJjZWQgPSB2YWx1ZSAhPT0gcmF3VmFsdWU7XG5cdCAgaWYgKCFhc3NlcnRQcm9wKHByb3AsIHZhbHVlLCB2bSkpIHtcblx0ICAgIHZhbHVlID0gdW5kZWZpbmVkO1xuXHQgIH1cblx0ICBpZiAoaXNTaW1wbGUgJiYgIWNvZXJjZWQpIHtcblx0ICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgZm4odmFsdWUpO1xuXHQgICAgfSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGZuKHZhbHVlKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTZXQgYSBwcm9wJ3MgaW5pdGlhbCB2YWx1ZSBvbiBhIHZtIGFuZCBpdHMgZGF0YSBvYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKSB7XG5cdCAgcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgdmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgZGVmaW5lUmVhY3RpdmUodm0sIHByb3AucGF0aCwgdmFsdWUpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVXBkYXRlIGEgcHJvcCdzIHZhbHVlIG9uIGEgdm0uXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdXBkYXRlUHJvcCh2bSwgcHJvcCwgdmFsdWUpIHtcblx0ICBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCB2YWx1ZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICB2bVtwcm9wLnBhdGhdID0gdmFsdWU7XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgdGhlIGRlZmF1bHQgdmFsdWUgb2YgYSBwcm9wLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3Bcblx0ICogQHJldHVybiB7Kn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRQcm9wRGVmYXVsdFZhbHVlKHZtLCBwcm9wKSB7XG5cdCAgLy8gbm8gZGVmYXVsdCwgcmV0dXJuIHVuZGVmaW5lZFxuXHQgIHZhciBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xuXHQgIGlmICghaGFzT3duKG9wdGlvbnMsICdkZWZhdWx0JykpIHtcblx0ICAgIC8vIGFic2VudCBib29sZWFuIHZhbHVlIGRlZmF1bHRzIHRvIGZhbHNlXG5cdCAgICByZXR1cm4gb3B0aW9ucy50eXBlID09PSBCb29sZWFuID8gZmFsc2UgOiB1bmRlZmluZWQ7XG5cdCAgfVxuXHQgIHZhciBkZWYgPSBvcHRpb25zWydkZWZhdWx0J107XG5cdCAgLy8gd2FybiBhZ2FpbnN0IG5vbi1mYWN0b3J5IGRlZmF1bHRzIGZvciBPYmplY3QgJiBBcnJheVxuXHQgIGlmIChpc09iamVjdChkZWYpKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgZGVmYXVsdCB2YWx1ZSBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCI6ICcgKyAnUHJvcHMgd2l0aCB0eXBlIE9iamVjdC9BcnJheSBtdXN0IHVzZSBhIGZhY3RvcnkgZnVuY3Rpb24gJyArICd0byByZXR1cm4gdGhlIGRlZmF1bHQgdmFsdWUuJywgdm0pO1xuXHQgIH1cblx0ICAvLyBjYWxsIGZhY3RvcnkgZnVuY3Rpb24gZm9yIG5vbi1GdW5jdGlvbiB0eXBlc1xuXHQgIHJldHVybiB0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nICYmIG9wdGlvbnMudHlwZSAhPT0gRnVuY3Rpb24gPyBkZWYuY2FsbCh2bSkgOiBkZWY7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBc3NlcnQgd2hldGhlciBhIHByb3AgaXMgdmFsaWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXNzZXJ0UHJvcChwcm9wLCB2YWx1ZSwgdm0pIHtcblx0ICBpZiAoIXByb3Aub3B0aW9ucy5yZXF1aXJlZCAmJiAoIC8vIG5vbi1yZXF1aXJlZFxuXHQgIHByb3AucmF3ID09PSBudWxsIHx8IC8vIGFic2NlbnRcblx0ICB2YWx1ZSA9PSBudWxsKSAvLyBudWxsIG9yIHVuZGVmaW5lZFxuXHQgICkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICB2YXIgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcblx0ICB2YXIgdHlwZSA9IG9wdGlvbnMudHlwZTtcblx0ICB2YXIgdmFsaWQgPSAhdHlwZTtcblx0ICB2YXIgZXhwZWN0ZWRUeXBlcyA9IFtdO1xuXHQgIGlmICh0eXBlKSB7XG5cdCAgICBpZiAoIWlzQXJyYXkodHlwZSkpIHtcblx0ICAgICAgdHlwZSA9IFt0eXBlXTtcblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHlwZS5sZW5ndGggJiYgIXZhbGlkOyBpKyspIHtcblx0ICAgICAgdmFyIGFzc2VydGVkVHlwZSA9IGFzc2VydFR5cGUodmFsdWUsIHR5cGVbaV0pO1xuXHQgICAgICBleHBlY3RlZFR5cGVzLnB1c2goYXNzZXJ0ZWRUeXBlLmV4cGVjdGVkVHlwZSk7XG5cdCAgICAgIHZhbGlkID0gYXNzZXJ0ZWRUeXBlLnZhbGlkO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoIXZhbGlkKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICB3YXJuKCdJbnZhbGlkIHByb3A6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIi4nICsgJyBFeHBlY3RlZCAnICsgZXhwZWN0ZWRUeXBlcy5tYXAoZm9ybWF0VHlwZSkuam9pbignLCAnKSArICcsIGdvdCAnICsgZm9ybWF0VmFsdWUodmFsdWUpICsgJy4nLCB2bSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciB2YWxpZGF0b3IgPSBvcHRpb25zLnZhbGlkYXRvcjtcblx0ICBpZiAodmFsaWRhdG9yKSB7XG5cdCAgICBpZiAoIXZhbGlkYXRvcih2YWx1ZSkpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHByb3A6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIi4nLCB2bSk7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JjZSBwYXJzaW5nIHZhbHVlIHdpdGggY29lcmNlIG9wdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHsqfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvZXJjZVByb3AocHJvcCwgdmFsdWUsIHZtKSB7XG5cdCAgdmFyIGNvZXJjZSA9IHByb3Aub3B0aW9ucy5jb2VyY2U7XG5cdCAgaWYgKCFjb2VyY2UpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBjb2VyY2UgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiBjb2VyY2UodmFsdWUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgY29lcmNlIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIjogZXhwZWN0ZWQgZnVuY3Rpb24sIGdvdCAnICsgdHlwZW9mIGNvZXJjZSArICcuJywgdm0pO1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEFzc2VydCB0aGUgdHlwZSBvZiBhIHZhbHVlXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gdHlwZVxuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZSkge1xuXHQgIHZhciB2YWxpZDtcblx0ICB2YXIgZXhwZWN0ZWRUeXBlO1xuXHQgIGlmICh0eXBlID09PSBTdHJpbmcpIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdzdHJpbmcnO1xuXHQgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IE51bWJlcikge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ251bWJlcic7XG5cdCAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gQm9vbGVhbikge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ2Jvb2xlYW4nO1xuXHQgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IEZ1bmN0aW9uKSB7XG5cdCAgICBleHBlY3RlZFR5cGUgPSAnZnVuY3Rpb24nO1xuXHQgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IE9iamVjdCkge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ29iamVjdCc7XG5cdCAgICB2YWxpZCA9IGlzUGxhaW5PYmplY3QodmFsdWUpO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gQXJyYXkpIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdhcnJheSc7XG5cdCAgICB2YWxpZCA9IGlzQXJyYXkodmFsdWUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YWxpZCA9IHZhbHVlIGluc3RhbmNlb2YgdHlwZTtcblx0ICB9XG5cdCAgcmV0dXJuIHtcblx0ICAgIHZhbGlkOiB2YWxpZCxcblx0ICAgIGV4cGVjdGVkVHlwZTogZXhwZWN0ZWRUeXBlXG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcm1hdCB0eXBlIGZvciBvdXRwdXRcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFR5cGUodHlwZSkge1xuXHQgIHJldHVybiB0eXBlID8gdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR5cGUuc2xpY2UoMSkgOiAnY3VzdG9tIHR5cGUnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9ybWF0IHZhbHVlXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFZhbHVlKHZhbCkge1xuXHQgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKS5zbGljZSg4LCAtMSk7XG5cdH1cblx0XG5cdHZhciBiaW5kaW5nTW9kZXMgPSBjb25maWcuX3Byb3BCaW5kaW5nTW9kZXM7XG5cdFxuXHR2YXIgcHJvcERlZiA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBjaGlsZCA9IHRoaXMudm07XG5cdCAgICB2YXIgcGFyZW50ID0gY2hpbGQuX2NvbnRleHQ7XG5cdCAgICAvLyBwYXNzZWQgaW4gZnJvbSBjb21waWxlciBkaXJlY3RseVxuXHQgICAgdmFyIHByb3AgPSB0aGlzLmRlc2NyaXB0b3IucHJvcDtcblx0ICAgIHZhciBjaGlsZEtleSA9IHByb3AucGF0aDtcblx0ICAgIHZhciBwYXJlbnRLZXkgPSBwcm9wLnBhcmVudFBhdGg7XG5cdCAgICB2YXIgdHdvV2F5ID0gcHJvcC5tb2RlID09PSBiaW5kaW5nTW9kZXMuVFdPX1dBWTtcblx0XG5cdCAgICB2YXIgcGFyZW50V2F0Y2hlciA9IHRoaXMucGFyZW50V2F0Y2hlciA9IG5ldyBXYXRjaGVyKHBhcmVudCwgcGFyZW50S2V5LCBmdW5jdGlvbiAodmFsKSB7XG5cdCAgICAgIHVwZGF0ZVByb3AoY2hpbGQsIHByb3AsIHZhbCk7XG5cdCAgICB9LCB7XG5cdCAgICAgIHR3b1dheTogdHdvV2F5LFxuXHQgICAgICBmaWx0ZXJzOiBwcm9wLmZpbHRlcnMsXG5cdCAgICAgIC8vIGltcG9ydGFudDogcHJvcHMgbmVlZCB0byBiZSBvYnNlcnZlZCBvbiB0aGVcblx0ICAgICAgLy8gdi1mb3Igc2NvcGUgaWYgcHJlc2VudFxuXHQgICAgICBzY29wZTogdGhpcy5fc2NvcGVcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8vIHNldCB0aGUgY2hpbGQgaW5pdGlhbCB2YWx1ZS5cblx0ICAgIGluaXRQcm9wKGNoaWxkLCBwcm9wLCBwYXJlbnRXYXRjaGVyLnZhbHVlKTtcblx0XG5cdCAgICAvLyBzZXR1cCB0d28td2F5IGJpbmRpbmdcblx0ICAgIGlmICh0d29XYXkpIHtcblx0ICAgICAgLy8gaW1wb3J0YW50OiBkZWZlciB0aGUgY2hpbGQgd2F0Y2hlciBjcmVhdGlvbiB1bnRpbFxuXHQgICAgICAvLyB0aGUgY3JlYXRlZCBob29rIChhZnRlciBkYXRhIG9ic2VydmF0aW9uKVxuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIGNoaWxkLiRvbmNlKCdwcmUtaG9vazpjcmVhdGVkJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHNlbGYuY2hpbGRXYXRjaGVyID0gbmV3IFdhdGNoZXIoY2hpbGQsIGNoaWxkS2V5LCBmdW5jdGlvbiAodmFsKSB7XG5cdCAgICAgICAgICBwYXJlbnRXYXRjaGVyLnNldCh2YWwpO1xuXHQgICAgICAgIH0sIHtcblx0ICAgICAgICAgIC8vIGVuc3VyZSBzeW5jIHVwd2FyZCBiZWZvcmUgcGFyZW50IHN5bmMgZG93bi5cblx0ICAgICAgICAgIC8vIHRoaXMgaXMgbmVjZXNzYXJ5IGluIGNhc2VzIGUuZy4gdGhlIGNoaWxkXG5cdCAgICAgICAgICAvLyBtdXRhdGVzIGEgcHJvcCBhcnJheSwgdGhlbiByZXBsYWNlcyBpdC4gKCMxNjgzKVxuXHQgICAgICAgICAgc3luYzogdHJ1ZVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHRoaXMucGFyZW50V2F0Y2hlci50ZWFyZG93bigpO1xuXHQgICAgaWYgKHRoaXMuY2hpbGRXYXRjaGVyKSB7XG5cdCAgICAgIHRoaXMuY2hpbGRXYXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHF1ZXVlJDEgPSBbXTtcblx0dmFyIHF1ZXVlZCA9IGZhbHNlO1xuXHRcblx0LyoqXG5cdCAqIFB1c2ggYSBqb2IgaW50byB0aGUgcXVldWUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGpvYlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHB1c2hKb2Ioam9iKSB7XG5cdCAgcXVldWUkMS5wdXNoKGpvYik7XG5cdCAgaWYgKCFxdWV1ZWQpIHtcblx0ICAgIHF1ZXVlZCA9IHRydWU7XG5cdCAgICBuZXh0VGljayhmbHVzaCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRmx1c2ggdGhlIHF1ZXVlLCBhbmQgZG8gb25lIGZvcmNlZCByZWZsb3cgYmVmb3JlXG5cdCAqIHRyaWdnZXJpbmcgdHJhbnNpdGlvbnMuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZmx1c2goKSB7XG5cdCAgLy8gRm9yY2UgbGF5b3V0XG5cdCAgdmFyIGYgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUkMS5sZW5ndGg7IGkrKykge1xuXHQgICAgcXVldWUkMVtpXSgpO1xuXHQgIH1cblx0ICBxdWV1ZSQxID0gW107XG5cdCAgcXVldWVkID0gZmFsc2U7XG5cdCAgLy8gZHVtbXkgcmV0dXJuLCBzbyBqcyBsaW50ZXJzIGRvbid0IGNvbXBsYWluIGFib3V0XG5cdCAgLy8gdW51c2VkIHZhcmlhYmxlIGZcblx0ICByZXR1cm4gZjtcblx0fVxuXHRcblx0dmFyIFRZUEVfVFJBTlNJVElPTiA9ICd0cmFuc2l0aW9uJztcblx0dmFyIFRZUEVfQU5JTUFUSU9OID0gJ2FuaW1hdGlvbic7XG5cdHZhciB0cmFuc0R1cmF0aW9uUHJvcCA9IHRyYW5zaXRpb25Qcm9wICsgJ0R1cmF0aW9uJztcblx0dmFyIGFuaW1EdXJhdGlvblByb3AgPSBhbmltYXRpb25Qcm9wICsgJ0R1cmF0aW9uJztcblx0XG5cdC8qKlxuXHQgKiBJZiBhIGp1c3QtZW50ZXJlZCBlbGVtZW50IGlzIGFwcGxpZWQgdGhlXG5cdCAqIGxlYXZlIGNsYXNzIHdoaWxlIGl0cyBlbnRlciB0cmFuc2l0aW9uIGhhc24ndCBzdGFydGVkIHlldCxcblx0ICogYW5kIHRoZSB0cmFuc2l0aW9uZWQgcHJvcGVydHkgaGFzIHRoZSBzYW1lIHZhbHVlIGZvciBib3RoXG5cdCAqIGVudGVyL2xlYXZlLCB0aGVuIHRoZSBsZWF2ZSB0cmFuc2l0aW9uIHdpbGwgYmUgc2tpcHBlZCBhbmRcblx0ICogdGhlIHRyYW5zaXRpb25lbmQgZXZlbnQgbmV2ZXIgZmlyZXMuIFRoaXMgZnVuY3Rpb24gZW5zdXJlc1xuXHQgKiBpdHMgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIGFmdGVyIGEgdHJhbnNpdGlvbiBoYXMgc3RhcnRlZFxuXHQgKiBieSB3YWl0aW5nIGZvciBkb3VibGUgcmFmLlxuXHQgKlxuXHQgKiBJdCBmYWxscyBiYWNrIHRvIHNldFRpbWVvdXQgb24gZGV2aWNlcyB0aGF0IHN1cHBvcnQgQ1NTXG5cdCAqIHRyYW5zaXRpb25zIGJ1dCBub3QgcmFmIChlLmcuIEFuZHJvaWQgNC4yIGJyb3dzZXIpIC0gc2luY2Vcblx0ICogdGhlc2UgZW52aXJvbm1lbnRzIGFyZSB1c3VhbGx5IHNsb3csIHdlIGFyZSBnaXZpbmcgaXQgYVxuXHQgKiByZWxhdGl2ZWx5IGxhcmdlIHRpbWVvdXQuXG5cdCAqL1xuXHRcblx0dmFyIHJhZiA9IGluQnJvd3NlciAmJiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuXHR2YXIgd2FpdEZvclRyYW5zaXRpb25TdGFydCA9IHJhZlxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHQ/IGZ1bmN0aW9uIChmbikge1xuXHQgIHJhZihmdW5jdGlvbiAoKSB7XG5cdCAgICByYWYoZm4pO1xuXHQgIH0pO1xuXHR9IDogZnVuY3Rpb24gKGZuKSB7XG5cdCAgc2V0VGltZW91dChmbiwgNTApO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEEgVHJhbnNpdGlvbiBvYmplY3QgdGhhdCBlbmNhcHN1bGF0ZXMgdGhlIHN0YXRlIGFuZCBsb2dpY1xuXHQgKiBvZiB0aGUgdHJhbnNpdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaWRcblx0ICogQHBhcmFtIHtPYmplY3R9IGhvb2tzXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0ZnVuY3Rpb24gVHJhbnNpdGlvbihlbCwgaWQsIGhvb2tzLCB2bSkge1xuXHQgIHRoaXMuaWQgPSBpZDtcblx0ICB0aGlzLmVsID0gZWw7XG5cdCAgdGhpcy5lbnRlckNsYXNzID0gaG9va3MgJiYgaG9va3MuZW50ZXJDbGFzcyB8fCBpZCArICctZW50ZXInO1xuXHQgIHRoaXMubGVhdmVDbGFzcyA9IGhvb2tzICYmIGhvb2tzLmxlYXZlQ2xhc3MgfHwgaWQgKyAnLWxlYXZlJztcblx0ICB0aGlzLmhvb2tzID0gaG9va3M7XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIC8vIGFzeW5jIHN0YXRlXG5cdCAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IHRoaXMub3AgPSB0aGlzLmNiID0gbnVsbDtcblx0ICB0aGlzLmp1c3RFbnRlcmVkID0gZmFsc2U7XG5cdCAgdGhpcy5lbnRlcmVkID0gdGhpcy5sZWZ0ID0gZmFsc2U7XG5cdCAgdGhpcy50eXBlQ2FjaGUgPSB7fTtcblx0ICAvLyBjaGVjayBjc3MgdHJhbnNpdGlvbiB0eXBlXG5cdCAgdGhpcy50eXBlID0gaG9va3MgJiYgaG9va3MudHlwZTtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgaWYgKHRoaXMudHlwZSAmJiB0aGlzLnR5cGUgIT09IFRZUEVfVFJBTlNJVElPTiAmJiB0aGlzLnR5cGUgIT09IFRZUEVfQU5JTUFUSU9OKSB7XG5cdCAgICAgIHdhcm4oJ2ludmFsaWQgQ1NTIHRyYW5zaXRpb24gdHlwZSBmb3IgdHJhbnNpdGlvbj1cIicgKyB0aGlzLmlkICsgJ1wiOiAnICsgdGhpcy50eXBlLCB2bSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIGJpbmRcblx0ICB2YXIgc2VsZiA9IHRoaXM7WydlbnRlck5leHRUaWNrJywgJ2VudGVyRG9uZScsICdsZWF2ZU5leHRUaWNrJywgJ2xlYXZlRG9uZSddLmZvckVhY2goZnVuY3Rpb24gKG0pIHtcblx0ICAgIHNlbGZbbV0gPSBiaW5kKHNlbGZbbV0sIHNlbGYpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHR2YXIgcCQxID0gVHJhbnNpdGlvbi5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogU3RhcnQgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbi5cblx0ICpcblx0ICogMS4gZW50ZXIgdHJhbnNpdGlvbiB0cmlnZ2VyZWRcblx0ICogMi4gY2FsbCBiZWZvcmVFbnRlciBob29rXG5cdCAqIDMuIGFkZCBlbnRlciBjbGFzc1xuXHQgKiA0LiBpbnNlcnQvc2hvdyBlbGVtZW50XG5cdCAqIDUuIGNhbGwgZW50ZXIgaG9vayAod2l0aCBwb3NzaWJsZSBleHBsaWNpdCBqcyBjYWxsYmFjaylcblx0ICogNi4gcmVmbG93XG5cdCAqIDcuIGJhc2VkIG9uIHRyYW5zaXRpb24gdHlwZTpcblx0ICogICAgLSB0cmFuc2l0aW9uOlxuXHQgKiAgICAgICAgcmVtb3ZlIGNsYXNzIG5vdywgd2FpdCBmb3IgdHJhbnNpdGlvbmVuZCxcblx0ICogICAgICAgIHRoZW4gZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuXHQgKiAgICAtIGFuaW1hdGlvbjpcblx0ICogICAgICAgIHdhaXQgZm9yIGFuaW1hdGlvbmVuZCwgcmVtb3ZlIGNsYXNzLFxuXHQgKiAgICAgICAgdGhlbiBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG5cdCAqICAgIC0gbm8gY3NzIHRyYW5zaXRpb246XG5cdCAqICAgICAgICBkb25lIG5vdyBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuXHQgKiA4LiB3YWl0IGZvciBlaXRoZXIgZG9uZSBvciBqcyBjYWxsYmFjaywgdGhlbiBjYWxsXG5cdCAqICAgIGFmdGVyRW50ZXIgaG9vay5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSBpbnNlcnQvc2hvdyB0aGUgZWxlbWVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0cCQxLmVudGVyID0gZnVuY3Rpb24gKG9wLCBjYikge1xuXHQgIHRoaXMuY2FuY2VsUGVuZGluZygpO1xuXHQgIHRoaXMuY2FsbEhvb2soJ2JlZm9yZUVudGVyJyk7XG5cdCAgdGhpcy5jYiA9IGNiO1xuXHQgIGFkZENsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgb3AoKTtcblx0ICB0aGlzLmVudGVyZWQgPSBmYWxzZTtcblx0ICB0aGlzLmNhbGxIb29rV2l0aENiKCdlbnRlcicpO1xuXHQgIGlmICh0aGlzLmVudGVyZWQpIHtcblx0ICAgIHJldHVybjsgLy8gdXNlciBjYWxsZWQgZG9uZSBzeW5jaHJvbm91c2x5LlxuXHQgIH1cblx0ICB0aGlzLmNhbmNlbCA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5lbnRlckNhbmNlbGxlZDtcblx0ICBwdXNoSm9iKHRoaXMuZW50ZXJOZXh0VGljayk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogVGhlIFwibmV4dFRpY2tcIiBwaGFzZSBvZiBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLCB3aGljaCBpc1xuXHQgKiB0byBiZSBwdXNoZWQgaW50byBhIHF1ZXVlIGFuZCBleGVjdXRlZCBhZnRlciBhIHJlZmxvdyBzb1xuXHQgKiB0aGF0IHJlbW92aW5nIHRoZSBjbGFzcyBjYW4gdHJpZ2dlciBhIENTUyB0cmFuc2l0aW9uLlxuXHQgKi9cblx0XG5cdHAkMS5lbnRlck5leHRUaWNrID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgIC8vIHByZXZlbnQgdHJhbnNpdGlvbiBza2lwcGluZ1xuXHQgIHRoaXMuanVzdEVudGVyZWQgPSB0cnVlO1xuXHQgIHdhaXRGb3JUcmFuc2l0aW9uU3RhcnQoZnVuY3Rpb24gKCkge1xuXHQgICAgX3RoaXMuanVzdEVudGVyZWQgPSBmYWxzZTtcblx0ICB9KTtcblx0ICB2YXIgZW50ZXJEb25lID0gdGhpcy5lbnRlckRvbmU7XG5cdCAgdmFyIHR5cGUgPSB0aGlzLmdldENzc1RyYW5zaXRpb25UeXBlKHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgaWYgKCF0aGlzLnBlbmRpbmdKc0NiKSB7XG5cdCAgICBpZiAodHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OKSB7XG5cdCAgICAgIC8vIHRyaWdnZXIgdHJhbnNpdGlvbiBieSByZW1vdmluZyBlbnRlciBjbGFzcyBub3dcblx0ICAgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcblx0ICAgICAgdGhpcy5zZXR1cENzc0NiKHRyYW5zaXRpb25FbmRFdmVudCwgZW50ZXJEb25lKTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gVFlQRV9BTklNQVRJT04pIHtcblx0ICAgICAgdGhpcy5zZXR1cENzc0NiKGFuaW1hdGlvbkVuZEV2ZW50LCBlbnRlckRvbmUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZW50ZXJEb25lKCk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSBUWVBFX1RSQU5TSVRJT04pIHtcblx0ICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFRoZSBcImNsZWFudXBcIiBwaGFzZSBvZiBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLlxuXHQgKi9cblx0XG5cdHAkMS5lbnRlckRvbmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdGhpcy5lbnRlcmVkID0gdHJ1ZTtcblx0ICB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsO1xuXHQgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgdGhpcy5jYWxsSG9vaygnYWZ0ZXJFbnRlcicpO1xuXHQgIGlmICh0aGlzLmNiKSB0aGlzLmNiKCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogU3RhcnQgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIDEuIGxlYXZlIHRyYW5zaXRpb24gdHJpZ2dlcmVkLlxuXHQgKiAyLiBjYWxsIGJlZm9yZUxlYXZlIGhvb2tcblx0ICogMy4gYWRkIGxlYXZlIGNsYXNzICh0cmlnZ2VyIGNzcyB0cmFuc2l0aW9uKVxuXHQgKiA0LiBjYWxsIGxlYXZlIGhvb2sgKHdpdGggcG9zc2libGUgZXhwbGljaXQganMgY2FsbGJhY2spXG5cdCAqIDUuIHJlZmxvdyBpZiBubyBleHBsaWNpdCBqcyBjYWxsYmFjayBpcyBwcm92aWRlZFxuXHQgKiA2LiBiYXNlZCBvbiB0cmFuc2l0aW9uIHR5cGU6XG5cdCAqICAgIC0gdHJhbnNpdGlvbiBvciBhbmltYXRpb246XG5cdCAqICAgICAgICB3YWl0IGZvciBlbmQgZXZlbnQsIHJlbW92ZSBjbGFzcywgdGhlbiBkb25lIGlmXG5cdCAqICAgICAgICB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuXHQgKiAgICAtIG5vIGNzcyB0cmFuc2l0aW9uOlxuXHQgKiAgICAgICAgZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuXHQgKiA3LiB3YWl0IGZvciBlaXRoZXIgZG9uZSBvciBqcyBjYWxsYmFjaywgdGhlbiBjYWxsXG5cdCAqICAgIGFmdGVyTGVhdmUgaG9vay5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSByZW1vdmUvaGlkZSB0aGUgZWxlbWVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0cCQxLmxlYXZlID0gZnVuY3Rpb24gKG9wLCBjYikge1xuXHQgIHRoaXMuY2FuY2VsUGVuZGluZygpO1xuXHQgIHRoaXMuY2FsbEhvb2soJ2JlZm9yZUxlYXZlJyk7XG5cdCAgdGhpcy5vcCA9IG9wO1xuXHQgIHRoaXMuY2IgPSBjYjtcblx0ICBhZGRDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuXHQgIHRoaXMubGVmdCA9IGZhbHNlO1xuXHQgIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2xlYXZlJyk7XG5cdCAgaWYgKHRoaXMubGVmdCkge1xuXHQgICAgcmV0dXJuOyAvLyB1c2VyIGNhbGxlZCBkb25lIHN5bmNocm9ub3VzbHkuXG5cdCAgfVxuXHQgIHRoaXMuY2FuY2VsID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmxlYXZlQ2FuY2VsbGVkO1xuXHQgIC8vIG9ubHkgbmVlZCB0byBoYW5kbGUgbGVhdmVEb25lIGlmXG5cdCAgLy8gMS4gdGhlIHRyYW5zaXRpb24gaXMgYWxyZWFkeSBkb25lIChzeW5jaHJvbm91c2x5IGNhbGxlZFxuXHQgIC8vICAgIGJ5IHRoZSB1c2VyLCB3aGljaCBjYXVzZXMgdGhpcy5vcCBzZXQgdG8gbnVsbClcblx0ICAvLyAyLiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrXG5cdCAgaWYgKHRoaXMub3AgJiYgIXRoaXMucGVuZGluZ0pzQ2IpIHtcblx0ICAgIC8vIGlmIGEgQ1NTIHRyYW5zaXRpb24gbGVhdmVzIGltbWVkaWF0ZWx5IGFmdGVyIGVudGVyLFxuXHQgICAgLy8gdGhlIHRyYW5zaXRpb25lbmQgZXZlbnQgbmV2ZXIgZmlyZXMuIHRoZXJlZm9yZSB3ZVxuXHQgICAgLy8gZGV0ZWN0IHN1Y2ggY2FzZXMgYW5kIGVuZCB0aGUgbGVhdmUgaW1tZWRpYXRlbHkuXG5cdCAgICBpZiAodGhpcy5qdXN0RW50ZXJlZCkge1xuXHQgICAgICB0aGlzLmxlYXZlRG9uZSgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcHVzaEpvYih0aGlzLmxlYXZlTmV4dFRpY2spO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgXCJuZXh0VGlja1wiIHBoYXNlIG9mIGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuXHQgKi9cblx0XG5cdHAkMS5sZWF2ZU5leHRUaWNrID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciB0eXBlID0gdGhpcy5nZXRDc3NUcmFuc2l0aW9uVHlwZSh0aGlzLmxlYXZlQ2xhc3MpO1xuXHQgIGlmICh0eXBlKSB7XG5cdCAgICB2YXIgZXZlbnQgPSB0eXBlID09PSBUWVBFX1RSQU5TSVRJT04gPyB0cmFuc2l0aW9uRW5kRXZlbnQgOiBhbmltYXRpb25FbmRFdmVudDtcblx0ICAgIHRoaXMuc2V0dXBDc3NDYihldmVudCwgdGhpcy5sZWF2ZURvbmUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLmxlYXZlRG9uZSgpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgXCJjbGVhbnVwXCIgcGhhc2Ugb2YgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG5cdCAqL1xuXHRcblx0cCQxLmxlYXZlRG9uZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB0aGlzLmxlZnQgPSB0cnVlO1xuXHQgIHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG5cdCAgdGhpcy5vcCgpO1xuXHQgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG5cdCAgdGhpcy5jYWxsSG9vaygnYWZ0ZXJMZWF2ZScpO1xuXHQgIGlmICh0aGlzLmNiKSB0aGlzLmNiKCk7XG5cdCAgdGhpcy5vcCA9IG51bGw7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2FuY2VsIGFueSBwZW5kaW5nIGNhbGxiYWNrcyBmcm9tIGEgcHJldmlvdXNseSBydW5uaW5nXG5cdCAqIGJ1dCBub3QgZmluaXNoZWQgdHJhbnNpdGlvbi5cblx0ICovXG5cdFxuXHRwJDEuY2FuY2VsUGVuZGluZyA9IGZ1bmN0aW9uICgpIHtcblx0ICB0aGlzLm9wID0gdGhpcy5jYiA9IG51bGw7XG5cdCAgdmFyIGhhc1BlbmRpbmcgPSBmYWxzZTtcblx0ICBpZiAodGhpcy5wZW5kaW5nQ3NzQ2IpIHtcblx0ICAgIGhhc1BlbmRpbmcgPSB0cnVlO1xuXHQgICAgb2ZmKHRoaXMuZWwsIHRoaXMucGVuZGluZ0Nzc0V2ZW50LCB0aGlzLnBlbmRpbmdDc3NDYik7XG5cdCAgICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gbnVsbDtcblx0ICB9XG5cdCAgaWYgKHRoaXMucGVuZGluZ0pzQ2IpIHtcblx0ICAgIGhhc1BlbmRpbmcgPSB0cnVlO1xuXHQgICAgdGhpcy5wZW5kaW5nSnNDYi5jYW5jZWwoKTtcblx0ICAgIHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsO1xuXHQgIH1cblx0ICBpZiAoaGFzUGVuZGluZykge1xuXHQgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcblx0ICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG5cdCAgfVxuXHQgIGlmICh0aGlzLmNhbmNlbCkge1xuXHQgICAgdGhpcy5jYW5jZWwuY2FsbCh0aGlzLnZtLCB0aGlzLmVsKTtcblx0ICAgIHRoaXMuY2FuY2VsID0gbnVsbDtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2FsbCBhIHVzZXItcHJvdmlkZWQgc3luY2hyb25vdXMgaG9vayBmdW5jdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICovXG5cdFxuXHRwJDEuY2FsbEhvb2sgPSBmdW5jdGlvbiAodHlwZSkge1xuXHQgIGlmICh0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV0pIHtcblx0ICAgIHRoaXMuaG9va3NbdHlwZV0uY2FsbCh0aGlzLnZtLCB0aGlzLmVsKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2FsbCBhIHVzZXItcHJvdmlkZWQsIHBvdGVudGlhbGx5LWFzeW5jIGhvb2sgZnVuY3Rpb24uXG5cdCAqIFdlIGNoZWNrIGZvciB0aGUgbGVuZ3RoIG9mIGFyZ3VtZW50cyB0byBzZWUgaWYgdGhlIGhvb2tcblx0ICogZXhwZWN0cyBhIGBkb25lYCBjYWxsYmFjay4gSWYgdHJ1ZSwgdGhlIHRyYW5zaXRpb24ncyBlbmRcblx0ICogd2lsbCBiZSBkZXRlcm1pbmVkIGJ5IHdoZW4gdGhlIHVzZXIgY2FsbHMgdGhhdCBjYWxsYmFjaztcblx0ICogb3RoZXJ3aXNlLCB0aGUgZW5kIGlzIGRldGVybWluZWQgYnkgdGhlIENTUyB0cmFuc2l0aW9uIG9yXG5cdCAqIGFuaW1hdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICovXG5cdFxuXHRwJDEuY2FsbEhvb2tXaXRoQ2IgPSBmdW5jdGlvbiAodHlwZSkge1xuXHQgIHZhciBob29rID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzW3R5cGVdO1xuXHQgIGlmIChob29rKSB7XG5cdCAgICBpZiAoaG9vay5sZW5ndGggPiAxKSB7XG5cdCAgICAgIHRoaXMucGVuZGluZ0pzQ2IgPSBjYW5jZWxsYWJsZSh0aGlzW3R5cGUgKyAnRG9uZSddKTtcblx0ICAgIH1cblx0ICAgIGhvb2suY2FsbCh0aGlzLnZtLCB0aGlzLmVsLCB0aGlzLnBlbmRpbmdKc0NiKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogR2V0IGFuIGVsZW1lbnQncyB0cmFuc2l0aW9uIHR5cGUgYmFzZWQgb24gdGhlXG5cdCAqIGNhbGN1bGF0ZWQgc3R5bGVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY2xhc3NOYW1lXG5cdCAqIEByZXR1cm4ge051bWJlcn1cblx0ICovXG5cdFxuXHRwJDEuZ2V0Q3NzVHJhbnNpdGlvblR5cGUgPSBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKCF0cmFuc2l0aW9uRW5kRXZlbnQgfHxcblx0ICAvLyBza2lwIENTUyB0cmFuc2l0aW9ucyBpZiBwYWdlIGlzIG5vdCB2aXNpYmxlIC1cblx0ICAvLyB0aGlzIHNvbHZlcyB0aGUgaXNzdWUgb2YgdHJhbnNpdGlvbmVuZCBldmVudHMgbm90XG5cdCAgLy8gZmlyaW5nIHVudGlsIHRoZSBwYWdlIGlzIHZpc2libGUgYWdhaW4uXG5cdCAgLy8gcGFnZVZpc2liaWxpdHkgQVBJIGlzIHN1cHBvcnRlZCBpbiBJRTEwKywgc2FtZSBhc1xuXHQgIC8vIENTUyB0cmFuc2l0aW9ucy5cblx0ICBkb2N1bWVudC5oaWRkZW4gfHxcblx0ICAvLyBleHBsaWNpdCBqcy1vbmx5IHRyYW5zaXRpb25cblx0ICB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MuY3NzID09PSBmYWxzZSB8fFxuXHQgIC8vIGVsZW1lbnQgaXMgaGlkZGVuXG5cdCAgaXNIaWRkZW4odGhpcy5lbCkpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIHR5cGUgPSB0aGlzLnR5cGUgfHwgdGhpcy50eXBlQ2FjaGVbY2xhc3NOYW1lXTtcblx0ICBpZiAodHlwZSkgcmV0dXJuIHR5cGU7XG5cdCAgdmFyIGlubGluZVN0eWxlcyA9IHRoaXMuZWwuc3R5bGU7XG5cdCAgdmFyIGNvbXB1dGVkU3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbCk7XG5cdCAgdmFyIHRyYW5zRHVyYXRpb24gPSBpbmxpbmVTdHlsZXNbdHJhbnNEdXJhdGlvblByb3BdIHx8IGNvbXB1dGVkU3R5bGVzW3RyYW5zRHVyYXRpb25Qcm9wXTtcblx0ICBpZiAodHJhbnNEdXJhdGlvbiAmJiB0cmFuc0R1cmF0aW9uICE9PSAnMHMnKSB7XG5cdCAgICB0eXBlID0gVFlQRV9UUkFOU0lUSU9OO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgYW5pbUR1cmF0aW9uID0gaW5saW5lU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdIHx8IGNvbXB1dGVkU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdO1xuXHQgICAgaWYgKGFuaW1EdXJhdGlvbiAmJiBhbmltRHVyYXRpb24gIT09ICcwcycpIHtcblx0ICAgICAgdHlwZSA9IFRZUEVfQU5JTUFUSU9OO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAodHlwZSkge1xuXHQgICAgdGhpcy50eXBlQ2FjaGVbY2xhc3NOYW1lXSA9IHR5cGU7XG5cdCAgfVxuXHQgIHJldHVybiB0eXBlO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFNldHVwIGEgQ1NTIHRyYW5zaXRpb25lbmQvYW5pbWF0aW9uZW5kIGNhbGxiYWNrLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICovXG5cdFxuXHRwJDEuc2V0dXBDc3NDYiA9IGZ1bmN0aW9uIChldmVudCwgY2IpIHtcblx0ICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IGV2ZW50O1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgIHZhciBvbkVuZCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgIGlmIChlLnRhcmdldCA9PT0gZWwpIHtcblx0ICAgICAgb2ZmKGVsLCBldmVudCwgb25FbmQpO1xuXHQgICAgICBzZWxmLnBlbmRpbmdDc3NFdmVudCA9IHNlbGYucGVuZGluZ0Nzc0NiID0gbnVsbDtcblx0ICAgICAgaWYgKCFzZWxmLnBlbmRpbmdKc0NiICYmIGNiKSB7XG5cdCAgICAgICAgY2IoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdCAgb24oZWwsIGV2ZW50LCBvbkVuZCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBoaWRkZW4gLSBpbiB0aGF0IGNhc2Ugd2UgY2FuIGp1c3Rcblx0ICogc2tpcCB0aGUgdHJhbnNpdGlvbiBhbGx0b2dldGhlci5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzSGlkZGVuKGVsKSB7XG5cdCAgaWYgKC9zdmckLy50ZXN0KGVsLm5hbWVzcGFjZVVSSSkpIHtcblx0ICAgIC8vIFNWRyBlbGVtZW50cyBkbyBub3QgaGF2ZSBvZmZzZXQoV2lkdGh8SGVpZ2h0KVxuXHQgICAgLy8gc28gd2UgbmVlZCB0byBjaGVjayB0aGUgY2xpZW50IHJlY3Rcblx0ICAgIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdCAgICByZXR1cm4gIShyZWN0LndpZHRoIHx8IHJlY3QuaGVpZ2h0KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuICEoZWwub2Zmc2V0V2lkdGggfHwgZWwub2Zmc2V0SGVpZ2h0IHx8IGVsLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciB0cmFuc2l0aW9uJDEgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBUUkFOU0lUSU9OLFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShpZCwgb2xkSWQpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICAvLyByZXNvbHZlIG9uIG93bmVyIHZtXG5cdCAgICB2YXIgaG9va3MgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3RyYW5zaXRpb25zJywgaWQpO1xuXHQgICAgaWQgPSBpZCB8fCAndic7XG5cdCAgICBvbGRJZCA9IG9sZElkIHx8ICd2Jztcblx0ICAgIGVsLl9fdl90cmFucyA9IG5ldyBUcmFuc2l0aW9uKGVsLCBpZCwgaG9va3MsIHRoaXMudm0pO1xuXHQgICAgcmVtb3ZlQ2xhc3MoZWwsIG9sZElkICsgJy10cmFuc2l0aW9uJyk7XG5cdCAgICBhZGRDbGFzcyhlbCwgaWQgKyAnLXRyYW5zaXRpb24nKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgaW50ZXJuYWxEaXJlY3RpdmVzID0ge1xuXHQgIHN0eWxlOiBzdHlsZSxcblx0ICAnY2xhc3MnOiB2Q2xhc3MsXG5cdCAgY29tcG9uZW50OiBjb21wb25lbnQsXG5cdCAgcHJvcDogcHJvcERlZixcblx0ICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uJDFcblx0fTtcblx0XG5cdC8vIHNwZWNpYWwgYmluZGluZyBwcmVmaXhlc1xuXHR2YXIgYmluZFJFID0gL152LWJpbmQ6fF46Lztcblx0dmFyIG9uUkUgPSAvXnYtb246fF5ALztcblx0dmFyIGRpckF0dHJSRSA9IC9edi0oW146XSspKD86JHw6KC4qKSQpLztcblx0dmFyIG1vZGlmaWVyUkUgPSAvXFwuW15cXC5dKy9nO1xuXHR2YXIgdHJhbnNpdGlvblJFID0gL14odi1iaW5kOnw6KT90cmFuc2l0aW9uJC87XG5cdFxuXHQvLyBkZWZhdWx0IGRpcmVjdGl2ZSBwcmlvcml0eVxuXHR2YXIgREVGQVVMVF9QUklPUklUWSA9IDEwMDA7XG5cdHZhciBERUZBVUxUX1RFUk1JTkFMX1BSSU9SSVRZID0gMjAwMDtcblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGEgdGVtcGxhdGUgYW5kIHJldHVybiBhIHJldXNhYmxlIGNvbXBvc2l0ZSBsaW5rXG5cdCAqIGZ1bmN0aW9uLCB3aGljaCByZWN1cnNpdmVseSBjb250YWlucyBtb3JlIGxpbmsgZnVuY3Rpb25zXG5cdCAqIGluc2lkZS4gVGhpcyB0b3AgbGV2ZWwgY29tcGlsZSBmdW5jdGlvbiB3b3VsZCBub3JtYWxseVxuXHQgKiBiZSBjYWxsZWQgb24gaW5zdGFuY2Ugcm9vdCBub2RlcywgYnV0IGNhbiBhbHNvIGJlIHVzZWRcblx0ICogZm9yIHBhcnRpYWwgY29tcGlsYXRpb24gaWYgdGhlIHBhcnRpYWwgYXJndW1lbnQgaXMgdHJ1ZS5cblx0ICpcblx0ICogVGhlIHJldHVybmVkIGNvbXBvc2l0ZSBsaW5rIGZ1bmN0aW9uLCB3aGVuIGNhbGxlZCwgd2lsbFxuXHQgKiByZXR1cm4gYW4gdW5saW5rIGZ1bmN0aW9uIHRoYXQgdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzXG5cdCAqIGNyZWF0ZWQgZHVyaW5nIHRoZSBsaW5raW5nIHBoYXNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHBhcmFtIHtCb29sZWFufSBwYXJ0aWFsXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGUoZWwsIG9wdGlvbnMsIHBhcnRpYWwpIHtcblx0ICAvLyBsaW5rIGZ1bmN0aW9uIGZvciB0aGUgbm9kZSBpdHNlbGYuXG5cdCAgdmFyIG5vZGVMaW5rRm4gPSBwYXJ0aWFsIHx8ICFvcHRpb25zLl9hc0NvbXBvbmVudCA/IGNvbXBpbGVOb2RlKGVsLCBvcHRpb25zKSA6IG51bGw7XG5cdCAgLy8gbGluayBmdW5jdGlvbiBmb3IgdGhlIGNoaWxkTm9kZXNcblx0ICB2YXIgY2hpbGRMaW5rRm4gPSAhKG5vZGVMaW5rRm4gJiYgbm9kZUxpbmtGbi50ZXJtaW5hbCkgJiYgIWlzU2NyaXB0KGVsKSAmJiBlbC5oYXNDaGlsZE5vZGVzKCkgPyBjb21waWxlTm9kZUxpc3QoZWwuY2hpbGROb2Rlcywgb3B0aW9ucykgOiBudWxsO1xuXHRcblx0ICAvKipcblx0ICAgKiBBIGNvbXBvc2l0ZSBsaW5rZXIgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGEgYWxyZWFkeVxuXHQgICAqIGNvbXBpbGVkIHBpZWNlIG9mIERPTSwgd2hpY2ggaW5zdGFudGlhdGVzIGFsbCBkaXJlY3RpdmVcblx0ICAgKiBpbnN0YW5jZXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gaG9zdCB2bSBvZiB0cmFuc2NsdWRlZCBjb250ZW50XG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIGxpbmsgY29udGV4dCBmcmFnbWVudFxuXHQgICAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cblx0ICAgKi9cblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGNvbXBvc2l0ZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICAvLyBjYWNoZSBjaGlsZE5vZGVzIGJlZm9yZSBsaW5raW5nIHBhcmVudCwgZml4ICM2NTdcblx0ICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShlbC5jaGlsZE5vZGVzKTtcblx0ICAgIC8vIGxpbmtcblx0ICAgIHZhciBkaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gY29tcG9zaXRlTGlua0NhcHR1cmVyKCkge1xuXHQgICAgICBpZiAobm9kZUxpbmtGbikgbm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgICAgaWYgKGNoaWxkTGlua0ZuKSBjaGlsZExpbmtGbih2bSwgY2hpbGROb2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgfSwgdm0pO1xuXHQgICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgZGlycyk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFwcGx5IGEgbGlua2VyIHRvIGEgdm0vZWxlbWVudCBwYWlyIGFuZCBjYXB0dXJlIHRoZVxuXHQgKiBkaXJlY3RpdmVzIGNyZWF0ZWQgZHVyaW5nIHRoZSBwcm9jZXNzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaW5rZXJcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbGlua0FuZENhcHR1cmUobGlua2VyLCB2bSkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAvLyByZXNldCBkaXJlY3RpdmVzIGJlZm9yZSBldmVyeSBjYXB0dXJlIGluIHByb2R1Y3Rpb25cblx0ICAgIC8vIG1vZGUsIHNvIHRoYXQgd2hlbiB1bmxpbmtpbmcgd2UgZG9uJ3QgbmVlZCB0byBzcGxpY2Vcblx0ICAgIC8vIHRoZW0gb3V0ICh3aGljaCB0dXJucyBvdXQgdG8gYmUgYSBwZXJmIGhpdCkuXG5cdCAgICAvLyB0aGV5IGFyZSBrZXB0IGluIGRldmVsb3BtZW50IG1vZGUgYmVjYXVzZSB0aGV5IGFyZVxuXHQgICAgLy8gdXNlZnVsIGZvciBWdWUncyBvd24gdGVzdHMuXG5cdCAgICB2bS5fZGlyZWN0aXZlcyA9IFtdO1xuXHQgIH1cblx0ICB2YXIgb3JpZ2luYWxEaXJDb3VudCA9IHZtLl9kaXJlY3RpdmVzLmxlbmd0aDtcblx0ICBsaW5rZXIoKTtcblx0ICB2YXIgZGlycyA9IHZtLl9kaXJlY3RpdmVzLnNsaWNlKG9yaWdpbmFsRGlyQ291bnQpO1xuXHQgIGRpcnMuc29ydChkaXJlY3RpdmVDb21wYXJhdG9yKTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBkaXJzW2ldLl9iaW5kKCk7XG5cdCAgfVxuXHQgIHJldHVybiBkaXJzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGlyZWN0aXZlIHByaW9yaXR5IHNvcnQgY29tcGFyYXRvclxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gYVxuXHQgKiBAcGFyYW0ge09iamVjdH0gYlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGRpcmVjdGl2ZUNvbXBhcmF0b3IoYSwgYikge1xuXHQgIGEgPSBhLmRlc2NyaXB0b3IuZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfUFJJT1JJVFk7XG5cdCAgYiA9IGIuZGVzY3JpcHRvci5kZWYucHJpb3JpdHkgfHwgREVGQVVMVF9QUklPUklUWTtcblx0ICByZXR1cm4gYSA+IGIgPyAtMSA6IGEgPT09IGIgPyAwIDogMTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIExpbmtlciBmdW5jdGlvbnMgcmV0dXJuIGFuIHVubGluayBmdW5jdGlvbiB0aGF0XG5cdCAqIHRlYXJzZG93biBhbGwgZGlyZWN0aXZlcyBpbnN0YW5jZXMgZ2VuZXJhdGVkIGR1cmluZ1xuXHQgKiB0aGUgcHJvY2Vzcy5cblx0ICpcblx0ICogV2UgY3JlYXRlIHVubGluayBmdW5jdGlvbnMgd2l0aCBvbmx5IHRoZSBuZWNlc3Nhcnlcblx0ICogaW5mb3JtYXRpb24gdG8gYXZvaWQgcmV0YWluaW5nIGFkZGl0aW9uYWwgY2xvc3VyZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0FycmF5fSBkaXJzXG5cdCAqIEBwYXJhbSB7VnVlfSBbY29udGV4dF1cblx0ICogQHBhcmFtIHtBcnJheX0gW2NvbnRleHREaXJzXVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlVW5saW5rRm4odm0sIGRpcnMsIGNvbnRleHQsIGNvbnRleHREaXJzKSB7XG5cdCAgZnVuY3Rpb24gdW5saW5rKGRlc3Ryb3lpbmcpIHtcblx0ICAgIHRlYXJkb3duRGlycyh2bSwgZGlycywgZGVzdHJveWluZyk7XG5cdCAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0RGlycykge1xuXHQgICAgICB0ZWFyZG93bkRpcnMoY29udGV4dCwgY29udGV4dERpcnMpO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyBleHBvc2UgbGlua2VkIGRpcmVjdGl2ZXNcblx0ICB1bmxpbmsuZGlycyA9IGRpcnM7XG5cdCAgcmV0dXJuIHVubGluaztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRlYXJkb3duIHBhcnRpYWwgbGlua2VkIGRpcmVjdGl2ZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0FycmF5fSBkaXJzXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVzdHJveWluZ1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRlYXJkb3duRGlycyh2bSwgZGlycywgZGVzdHJveWluZykge1xuXHQgIHZhciBpID0gZGlycy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgZGlyc1tpXS5fdGVhcmRvd24oKTtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFkZXN0cm95aW5nKSB7XG5cdCAgICAgIHZtLl9kaXJlY3RpdmVzLiRyZW1vdmUoZGlyc1tpXSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBsaW5rIHByb3BzIG9uIGFuIGluc3RhbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcHNcblx0ICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZUFuZExpbmtQcm9wcyh2bSwgZWwsIHByb3BzLCBzY29wZSkge1xuXHQgIHZhciBwcm9wc0xpbmtGbiA9IGNvbXBpbGVQcm9wcyhlbCwgcHJvcHMsIHZtKTtcblx0ICB2YXIgcHJvcERpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG5cdCAgICBwcm9wc0xpbmtGbih2bSwgc2NvcGUpO1xuXHQgIH0sIHZtKTtcblx0ICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBwcm9wRGlycyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIHRoZSByb290IGVsZW1lbnQgb2YgYW4gaW5zdGFuY2UuXG5cdCAqXG5cdCAqIDEuIGF0dHJzIG9uIGNvbnRleHQgY29udGFpbmVyIChjb250ZXh0IHNjb3BlKVxuXHQgKiAyLiBhdHRycyBvbiB0aGUgY29tcG9uZW50IHRlbXBsYXRlIHJvb3Qgbm9kZSwgaWZcblx0ICogICAgcmVwbGFjZTp0cnVlIChjaGlsZCBzY29wZSlcblx0ICpcblx0ICogSWYgdGhpcyBpcyBhIGZyYWdtZW50IGluc3RhbmNlLCB3ZSBvbmx5IG5lZWQgdG8gY29tcGlsZSAxLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0T3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlUm9vdChlbCwgb3B0aW9ucywgY29udGV4dE9wdGlvbnMpIHtcblx0ICB2YXIgY29udGFpbmVyQXR0cnMgPSBvcHRpb25zLl9jb250YWluZXJBdHRycztcblx0ICB2YXIgcmVwbGFjZXJBdHRycyA9IG9wdGlvbnMuX3JlcGxhY2VyQXR0cnM7XG5cdCAgdmFyIGNvbnRleHRMaW5rRm4sIHJlcGxhY2VyTGlua0ZuO1xuXHRcblx0ICAvLyBvbmx5IG5lZWQgdG8gY29tcGlsZSBvdGhlciBhdHRyaWJ1dGVzIGZvclxuXHQgIC8vIG5vbi1mcmFnbWVudCBpbnN0YW5jZXNcblx0ICBpZiAoZWwubm9kZVR5cGUgIT09IDExKSB7XG5cdCAgICAvLyBmb3IgY29tcG9uZW50cywgY29udGFpbmVyIGFuZCByZXBsYWNlciBuZWVkIHRvIGJlXG5cdCAgICAvLyBjb21waWxlZCBzZXBhcmF0ZWx5IGFuZCBsaW5rZWQgaW4gZGlmZmVyZW50IHNjb3Blcy5cblx0ICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCkge1xuXHQgICAgICAvLyAyLiBjb250YWluZXIgYXR0cmlidXRlc1xuXHQgICAgICBpZiAoY29udGFpbmVyQXR0cnMgJiYgY29udGV4dE9wdGlvbnMpIHtcblx0ICAgICAgICBjb250ZXh0TGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoY29udGFpbmVyQXR0cnMsIGNvbnRleHRPcHRpb25zKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAocmVwbGFjZXJBdHRycykge1xuXHQgICAgICAgIC8vIDMuIHJlcGxhY2VyIGF0dHJpYnV0ZXNcblx0ICAgICAgICByZXBsYWNlckxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKHJlcGxhY2VyQXR0cnMsIG9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBub24tY29tcG9uZW50LCBqdXN0IGNvbXBpbGUgYXMgYSBub3JtYWwgZWxlbWVudC5cblx0ICAgICAgcmVwbGFjZXJMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhlbC5hdHRyaWJ1dGVzLCBvcHRpb25zKTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29udGFpbmVyQXR0cnMpIHtcblx0ICAgIC8vIHdhcm4gY29udGFpbmVyIGRpcmVjdGl2ZXMgZm9yIGZyYWdtZW50IGluc3RhbmNlc1xuXHQgICAgdmFyIG5hbWVzID0gY29udGFpbmVyQXR0cnMuZmlsdGVyKGZ1bmN0aW9uIChhdHRyKSB7XG5cdCAgICAgIC8vIGFsbG93IHZ1ZS1sb2FkZXIvdnVlaWZ5IHNjb3BlZCBjc3MgYXR0cmlidXRlc1xuXHQgICAgICByZXR1cm4gYXR0ci5uYW1lLmluZGV4T2YoJ192LScpIDwgMCAmJlxuXHQgICAgICAvLyBhbGxvdyBldmVudCBsaXN0ZW5lcnNcblx0ICAgICAgIW9uUkUudGVzdChhdHRyLm5hbWUpICYmXG5cdCAgICAgIC8vIGFsbG93IHNsb3RzXG5cdCAgICAgIGF0dHIubmFtZSAhPT0gJ3Nsb3QnO1xuXHQgICAgfSkubWFwKGZ1bmN0aW9uIChhdHRyKSB7XG5cdCAgICAgIHJldHVybiAnXCInICsgYXR0ci5uYW1lICsgJ1wiJztcblx0ICAgIH0pO1xuXHQgICAgaWYgKG5hbWVzLmxlbmd0aCkge1xuXHQgICAgICB2YXIgcGx1cmFsID0gbmFtZXMubGVuZ3RoID4gMTtcblx0ICAgICAgd2FybignQXR0cmlidXRlJyArIChwbHVyYWwgPyAncyAnIDogJyAnKSArIG5hbWVzLmpvaW4oJywgJykgKyAocGx1cmFsID8gJyBhcmUnIDogJyBpcycpICsgJyBpZ25vcmVkIG9uIGNvbXBvbmVudCAnICsgJzwnICsgb3B0aW9ucy5lbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyAnPiBiZWNhdXNlICcgKyAndGhlIGNvbXBvbmVudCBpcyBhIGZyYWdtZW50IGluc3RhbmNlOiAnICsgJ2h0dHA6Ly92dWVqcy5vcmcvZ3VpZGUvY29tcG9uZW50cy5odG1sI0ZyYWdtZW50LUluc3RhbmNlJyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBvcHRpb25zLl9jb250YWluZXJBdHRycyA9IG9wdGlvbnMuX3JlcGxhY2VyQXR0cnMgPSBudWxsO1xuXHQgIHJldHVybiBmdW5jdGlvbiByb290TGlua0ZuKHZtLCBlbCwgc2NvcGUpIHtcblx0ICAgIC8vIGxpbmsgY29udGV4dCBzY29wZSBkaXJzXG5cdCAgICB2YXIgY29udGV4dCA9IHZtLl9jb250ZXh0O1xuXHQgICAgdmFyIGNvbnRleHREaXJzO1xuXHQgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dExpbmtGbikge1xuXHQgICAgICBjb250ZXh0RGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBjb250ZXh0TGlua0ZuKGNvbnRleHQsIGVsLCBudWxsLCBzY29wZSk7XG5cdCAgICAgIH0sIGNvbnRleHQpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGxpbmsgc2VsZlxuXHQgICAgdmFyIHNlbGZEaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAocmVwbGFjZXJMaW5rRm4pIHJlcGxhY2VyTGlua0ZuKHZtLCBlbCk7XG5cdCAgICB9LCB2bSk7XG5cdFxuXHQgICAgLy8gcmV0dXJuIHRoZSB1bmxpbmsgZnVuY3Rpb24gdGhhdCB0ZWFyc2Rvd24gY29udGV4dFxuXHQgICAgLy8gY29udGFpbmVyIGRpcmVjdGl2ZXMuXG5cdCAgICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBzZWxmRGlycywgY29udGV4dCwgY29udGV4dERpcnMpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGEgbm9kZSBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbiBiYXNlZCBvbiB0aGVcblx0ICogbm9kZSB0eXBlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb258bnVsbH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKSB7XG5cdCAgdmFyIHR5cGUgPSBub2RlLm5vZGVUeXBlO1xuXHQgIGlmICh0eXBlID09PSAxICYmICFpc1NjcmlwdChub2RlKSkge1xuXHQgICAgcmV0dXJuIGNvbXBpbGVFbGVtZW50KG5vZGUsIG9wdGlvbnMpO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gMyAmJiBub2RlLmRhdGEudHJpbSgpKSB7XG5cdCAgICByZXR1cm4gY29tcGlsZVRleHROb2RlKG5vZGUsIG9wdGlvbnMpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb258bnVsbH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlRWxlbWVudChlbCwgb3B0aW9ucykge1xuXHQgIC8vIHByZXByb2Nlc3MgdGV4dGFyZWFzLlxuXHQgIC8vIHRleHRhcmVhIHRyZWF0cyBpdHMgdGV4dCBjb250ZW50IGFzIHRoZSBpbml0aWFsIHZhbHVlLlxuXHQgIC8vIGp1c3QgYmluZCBpdCBhcyBhbiBhdHRyIGRpcmVjdGl2ZSBmb3IgdmFsdWUuXG5cdCAgaWYgKGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcblx0ICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQoZWwudmFsdWUpO1xuXHQgICAgaWYgKHRva2Vucykge1xuXHQgICAgICBlbC5zZXRBdHRyaWJ1dGUoJzp2YWx1ZScsIHRva2Vuc1RvRXhwKHRva2VucykpO1xuXHQgICAgICBlbC52YWx1ZSA9ICcnO1xuXHQgICAgfVxuXHQgIH1cblx0ICB2YXIgbGlua0ZuO1xuXHQgIHZhciBoYXNBdHRycyA9IGVsLmhhc0F0dHJpYnV0ZXMoKTtcblx0ICB2YXIgYXR0cnMgPSBoYXNBdHRycyAmJiB0b0FycmF5KGVsLmF0dHJpYnV0ZXMpO1xuXHQgIC8vIGNoZWNrIHRlcm1pbmFsIGRpcmVjdGl2ZXMgKGZvciAmIGlmKVxuXHQgIGlmIChoYXNBdHRycykge1xuXHQgICAgbGlua0ZuID0gY2hlY2tUZXJtaW5hbERpcmVjdGl2ZXMoZWwsIGF0dHJzLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgLy8gY2hlY2sgZWxlbWVudCBkaXJlY3RpdmVzXG5cdCAgaWYgKCFsaW5rRm4pIHtcblx0ICAgIGxpbmtGbiA9IGNoZWNrRWxlbWVudERpcmVjdGl2ZXMoZWwsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICAvLyBjaGVjayBjb21wb25lbnRcblx0ICBpZiAoIWxpbmtGbikge1xuXHQgICAgbGlua0ZuID0gY2hlY2tDb21wb25lbnQoZWwsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICAvLyBub3JtYWwgZGlyZWN0aXZlc1xuXHQgIGlmICghbGlua0ZuICYmIGhhc0F0dHJzKSB7XG5cdCAgICBsaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhhdHRycywgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIHJldHVybiBsaW5rRm47XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGEgdGV4dE5vZGUgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7VGV4dE5vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb258bnVsbH0gdGV4dE5vZGVMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucykge1xuXHQgIC8vIHNraXAgbWFya2VkIHRleHQgbm9kZXNcblx0ICBpZiAobm9kZS5fc2tpcCkge1xuXHQgICAgcmV0dXJuIHJlbW92ZVRleHQ7XG5cdCAgfVxuXHRcblx0ICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KG5vZGUud2hvbGVUZXh0KTtcblx0ICBpZiAoIXRva2Vucykge1xuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHRcblx0ICAvLyBtYXJrIGFkamFjZW50IHRleHQgbm9kZXMgYXMgc2tpcHBlZCxcblx0ICAvLyBiZWNhdXNlIHdlIGFyZSB1c2luZyBub2RlLndob2xlVGV4dCB0byBjb21waWxlXG5cdCAgLy8gYWxsIGFkamFjZW50IHRleHQgbm9kZXMgdG9nZXRoZXIuIFRoaXMgZml4ZXNcblx0ICAvLyBpc3N1ZXMgaW4gSUUgd2hlcmUgc29tZXRpbWVzIGl0IHNwbGl0cyB1cCBhIHNpbmdsZVxuXHQgIC8vIHRleHQgbm9kZSBpbnRvIG11bHRpcGxlIG9uZXMuXG5cdCAgdmFyIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuXHQgIHdoaWxlIChuZXh0ICYmIG5leHQubm9kZVR5cGUgPT09IDMpIHtcblx0ICAgIG5leHQuX3NraXAgPSB0cnVlO1xuXHQgICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmc7XG5cdCAgfVxuXHRcblx0ICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0ICB2YXIgZWwsIHRva2VuO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdG9rZW4gPSB0b2tlbnNbaV07XG5cdCAgICBlbCA9IHRva2VuLnRhZyA/IHByb2Nlc3NUZXh0VG9rZW4odG9rZW4sIG9wdGlvbnMpIDogZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodG9rZW4udmFsdWUpO1xuXHQgICAgZnJhZy5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfVxuXHQgIHJldHVybiBtYWtlVGV4dE5vZGVMaW5rRm4odG9rZW5zLCBmcmFnLCBvcHRpb25zKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIExpbmtlciBmb3IgYW4gc2tpcHBlZCB0ZXh0IG5vZGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge1RleHR9IG5vZGVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZW1vdmVUZXh0KHZtLCBub2RlKSB7XG5cdCAgcmVtb3ZlKG5vZGUpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJvY2VzcyBhIHNpbmdsZSB0ZXh0IHRva2VuLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdG9rZW5cblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7Tm9kZX1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzVGV4dFRva2VuKHRva2VuLCBvcHRpb25zKSB7XG5cdCAgdmFyIGVsO1xuXHQgIGlmICh0b2tlbi5vbmVUaW1lKSB7XG5cdCAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRva2VuLnZhbHVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgaWYgKHRva2VuLmh0bWwpIHtcblx0ICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KCd2LWh0bWwnKTtcblx0ICAgICAgc2V0VG9rZW5UeXBlKCdodG1sJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBJRSB3aWxsIGNsZWFuIHVwIGVtcHR5IHRleHROb2RlcyBkdXJpbmdcblx0ICAgICAgLy8gZnJhZy5jbG9uZU5vZGUodHJ1ZSksIHNvIHdlIGhhdmUgdG8gZ2l2ZSBpdFxuXHQgICAgICAvLyBzb21ldGhpbmcgaGVyZS4uLlxuXHQgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcgJyk7XG5cdCAgICAgIHNldFRva2VuVHlwZSgndGV4dCcpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmdW5jdGlvbiBzZXRUb2tlblR5cGUodHlwZSkge1xuXHQgICAgaWYgKHRva2VuLmRlc2NyaXB0b3IpIHJldHVybjtcblx0ICAgIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh0b2tlbi52YWx1ZSk7XG5cdCAgICB0b2tlbi5kZXNjcmlwdG9yID0ge1xuXHQgICAgICBuYW1lOiB0eXBlLFxuXHQgICAgICBkZWY6IGRpcmVjdGl2ZXNbdHlwZV0sXG5cdCAgICAgIGV4cHJlc3Npb246IHBhcnNlZC5leHByZXNzaW9uLFxuXHQgICAgICBmaWx0ZXJzOiBwYXJzZWQuZmlsdGVyc1xuXHQgICAgfTtcblx0ICB9XG5cdCAgcmV0dXJuIGVsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQnVpbGQgYSBmdW5jdGlvbiB0aGF0IHByb2Nlc3NlcyBhIHRleHROb2RlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IHRva2Vuc1xuXHQgKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlVGV4dE5vZGVMaW5rRm4odG9rZW5zLCBmcmFnKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHRleHROb2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUpIHtcblx0ICAgIHZhciBmcmFnQ2xvbmUgPSBmcmFnLmNsb25lTm9kZSh0cnVlKTtcblx0ICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShmcmFnQ2xvbmUuY2hpbGROb2Rlcyk7XG5cdCAgICB2YXIgdG9rZW4sIHZhbHVlLCBub2RlO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0b2tlbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHRva2VuID0gdG9rZW5zW2ldO1xuXHQgICAgICB2YWx1ZSA9IHRva2VuLnZhbHVlO1xuXHQgICAgICBpZiAodG9rZW4udGFnKSB7XG5cdCAgICAgICAgbm9kZSA9IGNoaWxkTm9kZXNbaV07XG5cdCAgICAgICAgaWYgKHRva2VuLm9uZVRpbWUpIHtcblx0ICAgICAgICAgIHZhbHVlID0gKHNjb3BlIHx8IHZtKS4kZXZhbCh2YWx1ZSk7XG5cdCAgICAgICAgICBpZiAodG9rZW4uaHRtbCkge1xuXHQgICAgICAgICAgICByZXBsYWNlKG5vZGUsIHBhcnNlVGVtcGxhdGUodmFsdWUsIHRydWUpKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIG5vZGUuZGF0YSA9IF90b1N0cmluZyh2YWx1ZSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHZtLl9iaW5kRGlyKHRva2VuLmRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJlcGxhY2UoZWwsIGZyYWdDbG9uZSk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYSBub2RlIGxpc3QgYW5kIHJldHVybiBhIGNoaWxkTGlua0ZuLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGVMaXN0fSBub2RlTGlzdFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZU5vZGVMaXN0KG5vZGVMaXN0LCBvcHRpb25zKSB7XG5cdCAgdmFyIGxpbmtGbnMgPSBbXTtcblx0ICB2YXIgbm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4sIG5vZGU7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2RlTGlzdC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIG5vZGUgPSBub2RlTGlzdFtpXTtcblx0ICAgIG5vZGVMaW5rRm4gPSBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKTtcblx0ICAgIGNoaWxkTGlua0ZuID0gIShub2RlTGlua0ZuICYmIG5vZGVMaW5rRm4udGVybWluYWwpICYmIG5vZGUudGFnTmFtZSAhPT0gJ1NDUklQVCcgJiYgbm9kZS5oYXNDaGlsZE5vZGVzKCkgPyBjb21waWxlTm9kZUxpc3Qobm9kZS5jaGlsZE5vZGVzLCBvcHRpb25zKSA6IG51bGw7XG5cdCAgICBsaW5rRm5zLnB1c2gobm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4pO1xuXHQgIH1cblx0ICByZXR1cm4gbGlua0Zucy5sZW5ndGggPyBtYWtlQ2hpbGRMaW5rRm4obGlua0ZucykgOiBudWxsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTWFrZSBhIGNoaWxkIGxpbmsgZnVuY3Rpb24gZm9yIGEgbm9kZSdzIGNoaWxkTm9kZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXk8RnVuY3Rpb24+fSBsaW5rRm5zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSBjaGlsZExpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VDaGlsZExpbmtGbihsaW5rRm5zKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGNoaWxkTGlua0ZuKHZtLCBub2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIHZhciBub2RlLCBub2RlTGlua0ZuLCBjaGlsZHJlbkxpbmtGbjtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBuID0gMCwgbCA9IGxpbmtGbnMubGVuZ3RoOyBpIDwgbDsgbisrKSB7XG5cdCAgICAgIG5vZGUgPSBub2Rlc1tuXTtcblx0ICAgICAgbm9kZUxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcblx0ICAgICAgY2hpbGRyZW5MaW5rRm4gPSBsaW5rRm5zW2krK107XG5cdCAgICAgIC8vIGNhY2hlIGNoaWxkTm9kZXMgYmVmb3JlIGxpbmtpbmcgcGFyZW50LCBmaXggIzY1N1xuXHQgICAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkobm9kZS5jaGlsZE5vZGVzKTtcblx0ICAgICAgaWYgKG5vZGVMaW5rRm4pIHtcblx0ICAgICAgICBub2RlTGlua0ZuKHZtLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGNoaWxkcmVuTGlua0ZuKSB7XG5cdCAgICAgICAgY2hpbGRyZW5MaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBmb3IgZWxlbWVudCBkaXJlY3RpdmVzIChjdXN0b20gZWxlbWVudHMgdGhhdCBzaG91bGRcblx0ICogYmUgcmVzb3ZsZWQgYXMgdGVybWluYWwgZGlyZWN0aXZlcykuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjaGVja0VsZW1lbnREaXJlY3RpdmVzKGVsLCBvcHRpb25zKSB7XG5cdCAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblx0ICBpZiAoY29tbW9uVGFnUkUudGVzdCh0YWcpKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBkZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2VsZW1lbnREaXJlY3RpdmVzJywgdGFnKTtcblx0ICBpZiAoZGVmKSB7XG5cdCAgICByZXR1cm4gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgdGFnLCAnJywgb3B0aW9ucywgZGVmKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgY29tcG9uZW50LiBJZiB5ZXMsIHJldHVyblxuXHQgKiBhIGNvbXBvbmVudCBsaW5rIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjaGVja0NvbXBvbmVudChlbCwgb3B0aW9ucykge1xuXHQgIHZhciBjb21wb25lbnQgPSBjaGVja0NvbXBvbmVudEF0dHIoZWwsIG9wdGlvbnMpO1xuXHQgIGlmIChjb21wb25lbnQpIHtcblx0ICAgIHZhciByZWYgPSBmaW5kUmVmKGVsKTtcblx0ICAgIHZhciBkZXNjcmlwdG9yID0ge1xuXHQgICAgICBuYW1lOiAnY29tcG9uZW50Jyxcblx0ICAgICAgcmVmOiByZWYsXG5cdCAgICAgIGV4cHJlc3Npb246IGNvbXBvbmVudC5pZCxcblx0ICAgICAgZGVmOiBpbnRlcm5hbERpcmVjdGl2ZXMuY29tcG9uZW50LFxuXHQgICAgICBtb2RpZmllcnM6IHtcblx0ICAgICAgICBsaXRlcmFsOiAhY29tcG9uZW50LmR5bmFtaWNcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHZhciBjb21wb25lbnRMaW5rRm4gPSBmdW5jdGlvbiBjb21wb25lbnRMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgICBpZiAocmVmKSB7XG5cdCAgICAgICAgZGVmaW5lUmVhY3RpdmUoKHNjb3BlIHx8IHZtKS4kcmVmcywgcmVmLCBudWxsKTtcblx0ICAgICAgfVxuXHQgICAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgfTtcblx0ICAgIGNvbXBvbmVudExpbmtGbi50ZXJtaW5hbCA9IHRydWU7XG5cdCAgICByZXR1cm4gY29tcG9uZW50TGlua0ZuO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGFuIGVsZW1lbnQgZm9yIHRlcm1pbmFsIGRpcmVjdGl2ZXMgaW4gZml4ZWQgb3JkZXIuXG5cdCAqIElmIGl0IGZpbmRzIG9uZSwgcmV0dXJuIGEgdGVybWluYWwgbGluayBmdW5jdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0FycmF5fSBhdHRyc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGVybWluYWxMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyhlbCwgYXR0cnMsIG9wdGlvbnMpIHtcblx0ICAvLyBza2lwIHYtcHJlXG5cdCAgaWYgKGdldEF0dHIoZWwsICd2LXByZScpICE9PSBudWxsKSB7XG5cdCAgICByZXR1cm4gc2tpcDtcblx0ICB9XG5cdCAgLy8gc2tpcCB2LWVsc2UgYmxvY2ssIGJ1dCBvbmx5IGlmIGZvbGxvd2luZyB2LWlmXG5cdCAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgndi1lbHNlJykpIHtcblx0ICAgIHZhciBwcmV2ID0gZWwucHJldmlvdXNFbGVtZW50U2libGluZztcblx0ICAgIGlmIChwcmV2ICYmIHByZXYuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcblx0ICAgICAgcmV0dXJuIHNraXA7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB2YXIgYXR0ciwgbmFtZSwgdmFsdWUsIG1vZGlmaWVycywgbWF0Y2hlZCwgZGlyTmFtZSwgcmF3TmFtZSwgYXJnLCBkZWYsIHRlcm1EZWY7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGogPSBhdHRycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0ICAgIGF0dHIgPSBhdHRyc1tpXTtcblx0ICAgIG5hbWUgPSBhdHRyLm5hbWUucmVwbGFjZShtb2RpZmllclJFLCAnJyk7XG5cdCAgICBpZiAobWF0Y2hlZCA9IG5hbWUubWF0Y2goZGlyQXR0clJFKSkge1xuXHQgICAgICBkZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBtYXRjaGVkWzFdKTtcblx0ICAgICAgaWYgKGRlZiAmJiBkZWYudGVybWluYWwpIHtcblx0ICAgICAgICBpZiAoIXRlcm1EZWYgfHwgKGRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1RFUk1JTkFMX1BSSU9SSVRZKSA+IHRlcm1EZWYucHJpb3JpdHkpIHtcblx0ICAgICAgICAgIHRlcm1EZWYgPSBkZWY7XG5cdCAgICAgICAgICByYXdOYW1lID0gYXR0ci5uYW1lO1xuXHQgICAgICAgICAgbW9kaWZpZXJzID0gcGFyc2VNb2RpZmllcnMoYXR0ci5uYW1lKTtcblx0ICAgICAgICAgIHZhbHVlID0gYXR0ci52YWx1ZTtcblx0ICAgICAgICAgIGRpck5hbWUgPSBtYXRjaGVkWzFdO1xuXHQgICAgICAgICAgYXJnID0gbWF0Y2hlZFsyXTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGlmICh0ZXJtRGVmKSB7XG5cdCAgICByZXR1cm4gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgZGlyTmFtZSwgdmFsdWUsIG9wdGlvbnMsIHRlcm1EZWYsIHJhd05hbWUsIGFyZywgbW9kaWZpZXJzKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNraXAoKSB7fVxuXHRza2lwLnRlcm1pbmFsID0gdHJ1ZTtcblx0XG5cdC8qKlxuXHQgKiBCdWlsZCBhIG5vZGUgbGluayBmdW5jdGlvbiBmb3IgYSB0ZXJtaW5hbCBkaXJlY3RpdmUuXG5cdCAqIEEgdGVybWluYWwgbGluayBmdW5jdGlvbiB0ZXJtaW5hdGVzIHRoZSBjdXJyZW50XG5cdCAqIGNvbXBpbGF0aW9uIHJlY3Vyc2lvbiBhbmQgaGFuZGxlcyBjb21waWxhdGlvbiBvZiB0aGVcblx0ICogc3VidHJlZSBpbiB0aGUgZGlyZWN0aXZlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBkaXJOYW1lXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gZGVmXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbcmF3TmFtZV1cblx0ICogQHBhcmFtIHtTdHJpbmd9IFthcmddXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbbW9kaWZpZXJzXVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGVybWluYWxMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCBkaXJOYW1lLCB2YWx1ZSwgb3B0aW9ucywgZGVmLCByYXdOYW1lLCBhcmcsIG1vZGlmaWVycykge1xuXHQgIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG5cdCAgdmFyIGRlc2NyaXB0b3IgPSB7XG5cdCAgICBuYW1lOiBkaXJOYW1lLFxuXHQgICAgYXJnOiBhcmcsXG5cdCAgICBleHByZXNzaW9uOiBwYXJzZWQuZXhwcmVzc2lvbixcblx0ICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzLFxuXHQgICAgcmF3OiB2YWx1ZSxcblx0ICAgIGF0dHI6IHJhd05hbWUsXG5cdCAgICBtb2RpZmllcnM6IG1vZGlmaWVycyxcblx0ICAgIGRlZjogZGVmXG5cdCAgfTtcblx0ICAvLyBjaGVjayByZWYgZm9yIHYtZm9yIGFuZCByb3V0ZXItdmlld1xuXHQgIGlmIChkaXJOYW1lID09PSAnZm9yJyB8fCBkaXJOYW1lID09PSAncm91dGVyLXZpZXcnKSB7XG5cdCAgICBkZXNjcmlwdG9yLnJlZiA9IGZpbmRSZWYoZWwpO1xuXHQgIH1cblx0ICB2YXIgZm4gPSBmdW5jdGlvbiB0ZXJtaW5hbE5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgaWYgKGRlc2NyaXB0b3IucmVmKSB7XG5cdCAgICAgIGRlZmluZVJlYWN0aXZlKChzY29wZSB8fCB2bSkuJHJlZnMsIGRlc2NyaXB0b3IucmVmLCBudWxsKTtcblx0ICAgIH1cblx0ICAgIHZtLl9iaW5kRGlyKGRlc2NyaXB0b3IsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgfTtcblx0ICBmbi50ZXJtaW5hbCA9IHRydWU7XG5cdCAgcmV0dXJuIGZuO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSB0aGUgZGlyZWN0aXZlcyBvbiBhbiBlbGVtZW50IGFuZCByZXR1cm4gYSBsaW5rZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl8TmFtZWROb2RlTWFwfSBhdHRyc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlRGlyZWN0aXZlcyhhdHRycywgb3B0aW9ucykge1xuXHQgIHZhciBpID0gYXR0cnMubGVuZ3RoO1xuXHQgIHZhciBkaXJzID0gW107XG5cdCAgdmFyIGF0dHIsIG5hbWUsIHZhbHVlLCByYXdOYW1lLCByYXdWYWx1ZSwgZGlyTmFtZSwgYXJnLCBtb2RpZmllcnMsIGRpckRlZiwgdG9rZW5zLCBtYXRjaGVkO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGF0dHIgPSBhdHRyc1tpXTtcblx0ICAgIG5hbWUgPSByYXdOYW1lID0gYXR0ci5uYW1lO1xuXHQgICAgdmFsdWUgPSByYXdWYWx1ZSA9IGF0dHIudmFsdWU7XG5cdCAgICB0b2tlbnMgPSBwYXJzZVRleHQodmFsdWUpO1xuXHQgICAgLy8gcmVzZXQgYXJnXG5cdCAgICBhcmcgPSBudWxsO1xuXHQgICAgLy8gY2hlY2sgbW9kaWZpZXJzXG5cdCAgICBtb2RpZmllcnMgPSBwYXJzZU1vZGlmaWVycyhuYW1lKTtcblx0ICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UobW9kaWZpZXJSRSwgJycpO1xuXHRcblx0ICAgIC8vIGF0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uc1xuXHQgICAgaWYgKHRva2Vucykge1xuXHQgICAgICB2YWx1ZSA9IHRva2Vuc1RvRXhwKHRva2Vucyk7XG5cdCAgICAgIGFyZyA9IG5hbWU7XG5cdCAgICAgIHB1c2hEaXIoJ2JpbmQnLCBkaXJlY3RpdmVzLmJpbmQsIHRva2Vucyk7XG5cdCAgICAgIC8vIHdhcm4gYWdhaW5zdCBtaXhpbmcgbXVzdGFjaGVzIHdpdGggdi1iaW5kXG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgQXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChhdHRycywgZnVuY3Rpb24gKGF0dHIpIHtcblx0ICAgICAgICAgIHJldHVybiBhdHRyLm5hbWUgPT09ICc6Y2xhc3MnIHx8IGF0dHIubmFtZSA9PT0gJ3YtYmluZDpjbGFzcyc7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHdhcm4oJ2NsYXNzPVwiJyArIHJhd1ZhbHVlICsgJ1wiOiBEbyBub3QgbWl4IG11c3RhY2hlIGludGVycG9sYXRpb24gJyArICdhbmQgdi1iaW5kIGZvciBcImNsYXNzXCIgb24gdGhlIHNhbWUgZWxlbWVudC4gVXNlIG9uZSBvciB0aGUgb3RoZXIuJywgb3B0aW9ucyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2Vcblx0XG5cdCAgICAgIC8vIHNwZWNpYWwgYXR0cmlidXRlOiB0cmFuc2l0aW9uXG5cdCAgICAgIGlmICh0cmFuc2l0aW9uUkUudGVzdChuYW1lKSkge1xuXHQgICAgICAgIG1vZGlmaWVycy5saXRlcmFsID0gIWJpbmRSRS50ZXN0KG5hbWUpO1xuXHQgICAgICAgIHB1c2hEaXIoJ3RyYW5zaXRpb24nLCBpbnRlcm5hbERpcmVjdGl2ZXMudHJhbnNpdGlvbik7XG5cdCAgICAgIH0gZWxzZVxuXHRcblx0ICAgICAgICAvLyBldmVudCBoYW5kbGVyc1xuXHQgICAgICAgIGlmIChvblJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICAgIGFyZyA9IG5hbWUucmVwbGFjZShvblJFLCAnJyk7XG5cdCAgICAgICAgICBwdXNoRGlyKCdvbicsIGRpcmVjdGl2ZXMub24pO1xuXHQgICAgICAgIH0gZWxzZVxuXHRcblx0ICAgICAgICAgIC8vIGF0dHJpYnV0ZSBiaW5kaW5nc1xuXHQgICAgICAgICAgaWYgKGJpbmRSRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgICAgIGRpck5hbWUgPSBuYW1lLnJlcGxhY2UoYmluZFJFLCAnJyk7XG5cdCAgICAgICAgICAgIGlmIChkaXJOYW1lID09PSAnc3R5bGUnIHx8IGRpck5hbWUgPT09ICdjbGFzcycpIHtcblx0ICAgICAgICAgICAgICBwdXNoRGlyKGRpck5hbWUsIGludGVybmFsRGlyZWN0aXZlc1tkaXJOYW1lXSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgYXJnID0gZGlyTmFtZTtcblx0ICAgICAgICAgICAgICBwdXNoRGlyKCdiaW5kJywgZGlyZWN0aXZlcy5iaW5kKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSBlbHNlXG5cdFxuXHQgICAgICAgICAgICAvLyBub3JtYWwgZGlyZWN0aXZlc1xuXHQgICAgICAgICAgICBpZiAobWF0Y2hlZCA9IG5hbWUubWF0Y2goZGlyQXR0clJFKSkge1xuXHQgICAgICAgICAgICAgIGRpck5hbWUgPSBtYXRjaGVkWzFdO1xuXHQgICAgICAgICAgICAgIGFyZyA9IG1hdGNoZWRbMl07XG5cdFxuXHQgICAgICAgICAgICAgIC8vIHNraXAgdi1lbHNlICh3aGVuIHVzZWQgd2l0aCB2LXNob3cpXG5cdCAgICAgICAgICAgICAgaWYgKGRpck5hbWUgPT09ICdlbHNlJykge1xuXHQgICAgICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICBkaXJEZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBkaXJOYW1lLCB0cnVlKTtcblx0ICAgICAgICAgICAgICBpZiAoZGlyRGVmKSB7XG5cdCAgICAgICAgICAgICAgICBwdXNoRGlyKGRpck5hbWUsIGRpckRlZik7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBQdXNoIGEgZGlyZWN0aXZlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGRpck5hbWVcblx0ICAgKiBAcGFyYW0ge09iamVjdHxGdW5jdGlvbn0gZGVmXG5cdCAgICogQHBhcmFtIHtBcnJheX0gW2ludGVycFRva2Vuc11cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcHVzaERpcihkaXJOYW1lLCBkZWYsIGludGVycFRva2Vucykge1xuXHQgICAgdmFyIGhhc09uZVRpbWVUb2tlbiA9IGludGVycFRva2VucyAmJiBoYXNPbmVUaW1lKGludGVycFRva2Vucyk7XG5cdCAgICB2YXIgcGFyc2VkID0gIWhhc09uZVRpbWVUb2tlbiAmJiBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG5cdCAgICBkaXJzLnB1c2goe1xuXHQgICAgICBuYW1lOiBkaXJOYW1lLFxuXHQgICAgICBhdHRyOiByYXdOYW1lLFxuXHQgICAgICByYXc6IHJhd1ZhbHVlLFxuXHQgICAgICBkZWY6IGRlZixcblx0ICAgICAgYXJnOiBhcmcsXG5cdCAgICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLFxuXHQgICAgICAvLyBjb252ZXJzaW9uIGZyb20gaW50ZXJwb2xhdGlvbiBzdHJpbmdzIHdpdGggb25lLXRpbWUgdG9rZW5cblx0ICAgICAgLy8gdG8gZXhwcmVzc2lvbiBpcyBkaWZmZXJlZCB1bnRpbCBkaXJlY3RpdmUgYmluZCB0aW1lIHNvIHRoYXQgd2Vcblx0ICAgICAgLy8gaGF2ZSBhY2Nlc3MgdG8gdGhlIGFjdHVhbCB2bSBjb250ZXh0IGZvciBvbmUtdGltZSBiaW5kaW5ncy5cblx0ICAgICAgZXhwcmVzc2lvbjogcGFyc2VkICYmIHBhcnNlZC5leHByZXNzaW9uLFxuXHQgICAgICBmaWx0ZXJzOiBwYXJzZWQgJiYgcGFyc2VkLmZpbHRlcnMsXG5cdCAgICAgIGludGVycDogaW50ZXJwVG9rZW5zLFxuXHQgICAgICBoYXNPbmVUaW1lOiBoYXNPbmVUaW1lVG9rZW5cblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgaWYgKGRpcnMubGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gbWFrZU5vZGVMaW5rRm4oZGlycyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2UgbW9kaWZpZXJzIGZyb20gZGlyZWN0aXZlIGF0dHJpYnV0ZSBuYW1lLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VNb2RpZmllcnMobmFtZSkge1xuXHQgIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHZhciBtYXRjaCA9IG5hbWUubWF0Y2gobW9kaWZpZXJSRSk7XG5cdCAgaWYgKG1hdGNoKSB7XG5cdCAgICB2YXIgaSA9IG1hdGNoLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgcmVzW21hdGNoW2ldLnNsaWNlKDEpXSA9IHRydWU7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBCdWlsZCBhIGxpbmsgZnVuY3Rpb24gZm9yIGFsbCBkaXJlY3RpdmVzIG9uIGEgc2luZ2xlIG5vZGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGRpcmVjdGl2ZXNcblx0ICogQHJldHVybiB7RnVuY3Rpb259IGRpcmVjdGl2ZXNMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlTm9kZUxpbmtGbihkaXJlY3RpdmVzKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIG5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgLy8gcmV2ZXJzZSBhcHBseSBiZWNhdXNlIGl0J3Mgc29ydGVkIGxvdyB0byBoaWdoXG5cdCAgICB2YXIgaSA9IGRpcmVjdGl2ZXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2bS5fYmluZERpcihkaXJlY3RpdmVzW2ldLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBpbnRlcnBvbGF0aW9uIHN0cmluZyBjb250YWlucyBvbmUtdGltZSB0b2tlbnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGhhc09uZVRpbWUodG9rZW5zKSB7XG5cdCAgdmFyIGkgPSB0b2tlbnMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGlmICh0b2tlbnNbaV0ub25lVGltZSkgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1NjcmlwdChlbCkge1xuXHQgIHJldHVybiBlbC50YWdOYW1lID09PSAnU0NSSVBUJyAmJiAoIWVsLmhhc0F0dHJpYnV0ZSgndHlwZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAndGV4dC9qYXZhc2NyaXB0Jyk7XG5cdH1cblx0XG5cdHZhciBzcGVjaWFsQ2hhclJFID0gL1teXFx3XFwtOlxcLl0vO1xuXHRcblx0LyoqXG5cdCAqIFByb2Nlc3MgYW4gZWxlbWVudCBvciBhIERvY3VtZW50RnJhZ21lbnQgYmFzZWQgb24gYVxuXHQgKiBpbnN0YW5jZSBvcHRpb24gb2JqZWN0LiBUaGlzIGFsbG93cyB1cyB0byB0cmFuc2NsdWRlXG5cdCAqIGEgdGVtcGxhdGUgbm9kZS9mcmFnbWVudCBiZWZvcmUgdGhlIGluc3RhbmNlIGlzIGNyZWF0ZWQsXG5cdCAqIHNvIHRoZSBwcm9jZXNzZWQgZnJhZ21lbnQgY2FuIHRoZW4gYmUgY2xvbmVkIGFuZCByZXVzZWRcblx0ICogaW4gdi1mb3IuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRyYW5zY2x1ZGUoZWwsIG9wdGlvbnMpIHtcblx0ICAvLyBleHRyYWN0IGNvbnRhaW5lciBhdHRyaWJ1dGVzIHRvIHBhc3MgdGhlbSBkb3duXG5cdCAgLy8gdG8gY29tcGlsZXIsIGJlY2F1c2UgdGhleSBuZWVkIHRvIGJlIGNvbXBpbGVkIGluXG5cdCAgLy8gcGFyZW50IHNjb3BlLiB3ZSBhcmUgbXV0YXRpbmcgdGhlIG9wdGlvbnMgb2JqZWN0IGhlcmVcblx0ICAvLyBhc3N1bWluZyB0aGUgc2FtZSBvYmplY3Qgd2lsbCBiZSB1c2VkIGZvciBjb21waWxlXG5cdCAgLy8gcmlnaHQgYWZ0ZXIgdGhpcy5cblx0ICBpZiAob3B0aW9ucykge1xuXHQgICAgb3B0aW9ucy5fY29udGFpbmVyQXR0cnMgPSBleHRyYWN0QXR0cnMoZWwpO1xuXHQgIH1cblx0ICAvLyBmb3IgdGVtcGxhdGUgdGFncywgd2hhdCB3ZSB3YW50IGlzIGl0cyBjb250ZW50IGFzXG5cdCAgLy8gYSBkb2N1bWVudEZyYWdtZW50IChmb3IgZnJhZ21lbnQgaW5zdGFuY2VzKVxuXHQgIGlmIChpc1RlbXBsYXRlKGVsKSkge1xuXHQgICAgZWwgPSBwYXJzZVRlbXBsYXRlKGVsKTtcblx0ICB9XG5cdCAgaWYgKG9wdGlvbnMpIHtcblx0ICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCAmJiAhb3B0aW9ucy50ZW1wbGF0ZSkge1xuXHQgICAgICBvcHRpb25zLnRlbXBsYXRlID0gJzxzbG90Pjwvc2xvdD4nO1xuXHQgICAgfVxuXHQgICAgaWYgKG9wdGlvbnMudGVtcGxhdGUpIHtcblx0ICAgICAgb3B0aW9ucy5fY29udGVudCA9IGV4dHJhY3RDb250ZW50KGVsKTtcblx0ICAgICAgZWwgPSB0cmFuc2NsdWRlVGVtcGxhdGUoZWwsIG9wdGlvbnMpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoaXNGcmFnbWVudChlbCkpIHtcblx0ICAgIC8vIGFuY2hvcnMgZm9yIGZyYWdtZW50IGluc3RhbmNlXG5cdCAgICAvLyBwYXNzaW5nIGluIGBwZXJzaXN0OiB0cnVlYCB0byBhdm9pZCB0aGVtIGJlaW5nXG5cdCAgICAvLyBkaXNjYXJkZWQgYnkgSUUgZHVyaW5nIHRlbXBsYXRlIGNsb25pbmdcblx0ICAgIHByZXBlbmQoY3JlYXRlQW5jaG9yKCd2LXN0YXJ0JywgdHJ1ZSksIGVsKTtcblx0ICAgIGVsLmFwcGVuZENoaWxkKGNyZWF0ZUFuY2hvcigndi1lbmQnLCB0cnVlKSk7XG5cdCAgfVxuXHQgIHJldHVybiBlbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByb2Nlc3MgdGhlIHRlbXBsYXRlIG9wdGlvbi5cblx0ICogSWYgdGhlIHJlcGxhY2Ugb3B0aW9uIGlzIHRydWUgdGhpcyB3aWxsIHN3YXAgdGhlICRlbC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdHJhbnNjbHVkZVRlbXBsYXRlKGVsLCBvcHRpb25zKSB7XG5cdCAgdmFyIHRlbXBsYXRlID0gb3B0aW9ucy50ZW1wbGF0ZTtcblx0ICB2YXIgZnJhZyA9IHBhcnNlVGVtcGxhdGUodGVtcGxhdGUsIHRydWUpO1xuXHQgIGlmIChmcmFnKSB7XG5cdCAgICB2YXIgcmVwbGFjZXIgPSBmcmFnLmZpcnN0Q2hpbGQ7XG5cdCAgICB2YXIgdGFnID0gcmVwbGFjZXIudGFnTmFtZSAmJiByZXBsYWNlci50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdCAgICBpZiAob3B0aW9ucy5yZXBsYWNlKSB7XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoZWwgPT09IGRvY3VtZW50LmJvZHkpIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1lvdSBhcmUgbW91bnRpbmcgYW4gaW5zdGFuY2Ugd2l0aCBhIHRlbXBsYXRlIHRvICcgKyAnPGJvZHk+LiBUaGlzIHdpbGwgcmVwbGFjZSA8Ym9keT4gZW50aXJlbHkuIFlvdSAnICsgJ3Nob3VsZCBwcm9iYWJseSB1c2UgYHJlcGxhY2U6IGZhbHNlYCBoZXJlLicpO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIHRoZXJlIGFyZSBtYW55IGNhc2VzIHdoZXJlIHRoZSBpbnN0YW5jZSBtdXN0XG5cdCAgICAgIC8vIGJlY29tZSBhIGZyYWdtZW50IGluc3RhbmNlOiBiYXNpY2FsbHkgYW55dGhpbmcgdGhhdFxuXHQgICAgICAvLyBjYW4gY3JlYXRlIG1vcmUgdGhhbiAxIHJvb3Qgbm9kZXMuXG5cdCAgICAgIGlmIChcblx0ICAgICAgLy8gbXVsdGktY2hpbGRyZW4gdGVtcGxhdGVcblx0ICAgICAgZnJhZy5jaGlsZE5vZGVzLmxlbmd0aCA+IDEgfHxcblx0ICAgICAgLy8gbm9uLWVsZW1lbnQgdGVtcGxhdGVcblx0ICAgICAgcmVwbGFjZXIubm9kZVR5cGUgIT09IDEgfHxcblx0ICAgICAgLy8gc2luZ2xlIG5lc3RlZCBjb21wb25lbnRcblx0ICAgICAgdGFnID09PSAnY29tcG9uZW50JyB8fCByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCB0YWcpIHx8IGhhc0JpbmRBdHRyKHJlcGxhY2VyLCAnaXMnKSB8fFxuXHQgICAgICAvLyBlbGVtZW50IGRpcmVjdGl2ZVxuXHQgICAgICByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2VsZW1lbnREaXJlY3RpdmVzJywgdGFnKSB8fFxuXHQgICAgICAvLyBmb3IgYmxvY2tcblx0ICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWZvcicpIHx8XG5cdCAgICAgIC8vIGlmIGJsb2NrXG5cdCAgICAgIHJlcGxhY2VyLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG5cdCAgICAgICAgcmV0dXJuIGZyYWc7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgb3B0aW9ucy5fcmVwbGFjZXJBdHRycyA9IGV4dHJhY3RBdHRycyhyZXBsYWNlcik7XG5cdCAgICAgICAgbWVyZ2VBdHRycyhlbCwgcmVwbGFjZXIpO1xuXHQgICAgICAgIHJldHVybiByZXBsYWNlcjtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWwuYXBwZW5kQ2hpbGQoZnJhZyk7XG5cdCAgICAgIHJldHVybiBlbDtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHRlbXBsYXRlIG9wdGlvbjogJyArIHRlbXBsYXRlKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBIZWxwZXIgdG8gZXh0cmFjdCBhIGNvbXBvbmVudCBjb250YWluZXIncyBhdHRyaWJ1dGVzXG5cdCAqIGludG8gYSBwbGFpbiBvYmplY3QgYXJyYXkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHJldHVybiB7QXJyYXl9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZXh0cmFjdEF0dHJzKGVsKSB7XG5cdCAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGVsLmhhc0F0dHJpYnV0ZXMoKSkge1xuXHQgICAgcmV0dXJuIHRvQXJyYXkoZWwuYXR0cmlidXRlcyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogTWVyZ2UgdGhlIGF0dHJpYnV0ZXMgb2YgdHdvIGVsZW1lbnRzLCBhbmQgbWFrZSBzdXJlXG5cdCAqIHRoZSBjbGFzcyBuYW1lcyBhcmUgbWVyZ2VkIHByb3Blcmx5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGZyb21cblx0ICogQHBhcmFtIHtFbGVtZW50fSB0b1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1lcmdlQXR0cnMoZnJvbSwgdG8pIHtcblx0ICB2YXIgYXR0cnMgPSBmcm9tLmF0dHJpYnV0ZXM7XG5cdCAgdmFyIGkgPSBhdHRycy5sZW5ndGg7XG5cdCAgdmFyIG5hbWUsIHZhbHVlO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuXHQgICAgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZTtcblx0ICAgIGlmICghdG8uaGFzQXR0cmlidXRlKG5hbWUpICYmICFzcGVjaWFsQ2hhclJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgdG8uc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcblx0ICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ2NsYXNzJyAmJiAhcGFyc2VUZXh0KHZhbHVlKSAmJiAodmFsdWUgPSB2YWx1ZS50cmltKCkpKSB7XG5cdCAgICAgIHZhbHVlLnNwbGl0KC9cXHMrLykuZm9yRWFjaChmdW5jdGlvbiAoY2xzKSB7XG5cdCAgICAgICAgYWRkQ2xhc3ModG8sIGNscyk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFNjYW4gYW5kIGRldGVybWluZSBzbG90IGNvbnRlbnQgZGlzdHJpYnV0aW9uLlxuXHQgKiBXZSBkbyB0aGlzIGR1cmluZyB0cmFuc2NsdXNpb24gaW5zdGVhZCBhdCBjb21waWxlIHRpbWUgc28gdGhhdFxuXHQgKiB0aGUgZGlzdHJpYnV0aW9uIGlzIGRlY291cGxlZCBmcm9tIHRoZSBjb21waWxhdGlvbiBvcmRlciBvZlxuXHQgKiB0aGUgc2xvdHMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSB0ZW1wbGF0ZVxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRlbnRcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVzb2x2ZVNsb3RzKHZtLCBjb250ZW50KSB7XG5cdCAgaWYgKCFjb250ZW50KSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBjb250ZW50cyA9IHZtLl9zbG90Q29udGVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHZhciBlbCwgbmFtZTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGNvbnRlbnQuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBlbCA9IGNvbnRlbnQuY2hpbGRyZW5baV07XG5cdCAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgaWYgKG5hbWUgPSBlbC5nZXRBdHRyaWJ1dGUoJ3Nsb3QnKSkge1xuXHQgICAgICAoY29udGVudHNbbmFtZV0gfHwgKGNvbnRlbnRzW25hbWVdID0gW10pKS5wdXNoKGVsKTtcblx0ICAgIH1cblx0ICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGdldEJpbmRBdHRyKGVsLCAnc2xvdCcpKSB7XG5cdCAgICAgIHdhcm4oJ1RoZSBcInNsb3RcIiBhdHRyaWJ1dGUgbXVzdCBiZSBzdGF0aWMuJywgdm0uJHBhcmVudCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGZvciAobmFtZSBpbiBjb250ZW50cykge1xuXHQgICAgY29udGVudHNbbmFtZV0gPSBleHRyYWN0RnJhZ21lbnQoY29udGVudHNbbmFtZV0sIGNvbnRlbnQpO1xuXHQgIH1cblx0ICBpZiAoY29udGVudC5oYXNDaGlsZE5vZGVzKCkpIHtcblx0ICAgIHZhciBub2RlcyA9IGNvbnRlbnQuY2hpbGROb2Rlcztcblx0ICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDEgJiYgbm9kZXNbMF0ubm9kZVR5cGUgPT09IDMgJiYgIW5vZGVzWzBdLmRhdGEudHJpbSgpKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGNvbnRlbnRzWydkZWZhdWx0J10gPSBleHRyYWN0RnJhZ21lbnQoY29udGVudC5jaGlsZE5vZGVzLCBjb250ZW50KTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFeHRyYWN0IHF1YWxpZmllZCBjb250ZW50IG5vZGVzIGZyb20gYSBub2RlIGxpc3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVzXG5cdCAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZXh0cmFjdEZyYWdtZW50KG5vZGVzLCBwYXJlbnQpIHtcblx0ICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0ICBub2RlcyA9IHRvQXJyYXkobm9kZXMpO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICB2YXIgbm9kZSA9IG5vZGVzW2ldO1xuXHQgICAgaWYgKGlzVGVtcGxhdGUobm9kZSkgJiYgIW5vZGUuaGFzQXR0cmlidXRlKCd2LWlmJykgJiYgIW5vZGUuaGFzQXR0cmlidXRlKCd2LWZvcicpKSB7XG5cdCAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChub2RlKTtcblx0ICAgICAgbm9kZSA9IHBhcnNlVGVtcGxhdGUobm9kZSwgdHJ1ZSk7XG5cdCAgICB9XG5cdCAgICBmcmFnLmFwcGVuZENoaWxkKG5vZGUpO1xuXHQgIH1cblx0ICByZXR1cm4gZnJhZztcblx0fVxuXHRcblx0XG5cdFxuXHR2YXIgY29tcGlsZXIgPSBPYmplY3QuZnJlZXplKHtcblx0XHRjb21waWxlOiBjb21waWxlLFxuXHRcdGNvbXBpbGVBbmRMaW5rUHJvcHM6IGNvbXBpbGVBbmRMaW5rUHJvcHMsXG5cdFx0Y29tcGlsZVJvb3Q6IGNvbXBpbGVSb290LFxuXHRcdHRyYW5zY2x1ZGU6IHRyYW5zY2x1ZGUsXG5cdFx0cmVzb2x2ZVNsb3RzOiByZXNvbHZlU2xvdHNcblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBzdGF0ZU1peGluIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBBY2Nlc3NvciBmb3IgYCRkYXRhYCBwcm9wZXJ0eSwgc2luY2Ugc2V0dGluZyAkZGF0YVxuXHQgICAqIHJlcXVpcmVzIG9ic2VydmluZyB0aGUgbmV3IG9iamVjdCBhbmQgdXBkYXRpbmdcblx0ICAgKiBwcm94aWVkIHByb3BlcnRpZXMuXG5cdCAgICovXG5cdFxuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJGRhdGEnLCB7XG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7XG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiBzZXQobmV3RGF0YSkge1xuXHQgICAgICBpZiAobmV3RGF0YSAhPT0gdGhpcy5fZGF0YSkge1xuXHQgICAgICAgIHRoaXMuX3NldERhdGEobmV3RGF0YSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogU2V0dXAgdGhlIHNjb3BlIG9mIGFuIGluc3RhbmNlLCB3aGljaCBjb250YWluczpcblx0ICAgKiAtIG9ic2VydmVkIGRhdGFcblx0ICAgKiAtIGNvbXB1dGVkIHByb3BlcnRpZXNcblx0ICAgKiAtIHVzZXIgbWV0aG9kc1xuXHQgICAqIC0gbWV0YSBwcm9wZXJ0aWVzXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuX2luaXRQcm9wcygpO1xuXHQgICAgdGhpcy5faW5pdE1ldGEoKTtcblx0ICAgIHRoaXMuX2luaXRNZXRob2RzKCk7XG5cdCAgICB0aGlzLl9pbml0RGF0YSgpO1xuXHQgICAgdGhpcy5faW5pdENvbXB1dGVkKCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5pdGlhbGl6ZSBwcm9wcy5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdFByb3BzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuXHQgICAgdmFyIGVsID0gb3B0aW9ucy5lbDtcblx0ICAgIHZhciBwcm9wcyA9IG9wdGlvbnMucHJvcHM7XG5cdCAgICBpZiAocHJvcHMgJiYgIWVsKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignUHJvcHMgd2lsbCBub3QgYmUgY29tcGlsZWQgaWYgbm8gYGVsYCBvcHRpb24gaXMgJyArICdwcm92aWRlZCBhdCBpbnN0YW50aWF0aW9uLicsIHRoaXMpO1xuXHQgICAgfVxuXHQgICAgLy8gbWFrZSBzdXJlIHRvIGNvbnZlcnQgc3RyaW5nIHNlbGVjdG9ycyBpbnRvIGVsZW1lbnQgbm93XG5cdCAgICBlbCA9IG9wdGlvbnMuZWwgPSBxdWVyeShlbCk7XG5cdCAgICB0aGlzLl9wcm9wc1VubGlua0ZuID0gZWwgJiYgZWwubm9kZVR5cGUgPT09IDEgJiYgcHJvcHNcblx0ICAgIC8vIHByb3BzIG11c3QgYmUgbGlua2VkIGluIHByb3BlciBzY29wZSBpZiBpbnNpZGUgdi1mb3Jcblx0ICAgID8gY29tcGlsZUFuZExpbmtQcm9wcyh0aGlzLCBlbCwgcHJvcHMsIHRoaXMuX3Njb3BlKSA6IG51bGw7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5pdGlhbGl6ZSB0aGUgZGF0YS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdERhdGEgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgZGF0YUZuID0gdGhpcy4kb3B0aW9ucy5kYXRhO1xuXHQgICAgdmFyIGRhdGEgPSB0aGlzLl9kYXRhID0gZGF0YUZuID8gZGF0YUZuKCkgOiB7fTtcblx0ICAgIGlmICghaXNQbGFpbk9iamVjdChkYXRhKSkge1xuXHQgICAgICBkYXRhID0ge307XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignZGF0YSBmdW5jdGlvbnMgc2hvdWxkIHJldHVybiBhbiBvYmplY3QuJywgdGhpcyk7XG5cdCAgICB9XG5cdCAgICB2YXIgcHJvcHMgPSB0aGlzLl9wcm9wcztcblx0ICAgIC8vIHByb3h5IGRhdGEgb24gaW5zdGFuY2Vcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XG5cdCAgICB2YXIgaSwga2V5O1xuXHQgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICAvLyB0aGVyZSBhcmUgdHdvIHNjZW5hcmlvcyB3aGVyZSB3ZSBjYW4gcHJveHkgYSBkYXRhIGtleTpcblx0ICAgICAgLy8gMS4gaXQncyBub3QgYWxyZWFkeSBkZWZpbmVkIGFzIGEgcHJvcFxuXHQgICAgICAvLyAyLiBpdCdzIHByb3ZpZGVkIHZpYSBhIGluc3RhbnRpYXRpb24gb3B0aW9uIEFORCB0aGVyZSBhcmUgbm9cblx0ICAgICAgLy8gICAgdGVtcGxhdGUgcHJvcCBwcmVzZW50XG5cdCAgICAgIGlmICghcHJvcHMgfHwgIWhhc093bihwcm9wcywga2V5KSkge1xuXHQgICAgICAgIHRoaXMuX3Byb3h5KGtleSk7XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHdhcm4oJ0RhdGEgZmllbGQgXCInICsga2V5ICsgJ1wiIGlzIGFscmVhZHkgZGVmaW5lZCAnICsgJ2FzIGEgcHJvcC4gVG8gcHJvdmlkZSBkZWZhdWx0IHZhbHVlIGZvciBhIHByb3AsIHVzZSB0aGUgXCJkZWZhdWx0XCIgJyArICdwcm9wIG9wdGlvbjsgaWYgeW91IHdhbnQgdG8gcGFzcyBwcm9wIHZhbHVlcyB0byBhbiBpbnN0YW50aWF0aW9uICcgKyAnY2FsbCwgdXNlIHRoZSBcInByb3BzRGF0YVwiIG9wdGlvbi4nLCB0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gb2JzZXJ2ZSBkYXRhXG5cdCAgICBvYnNlcnZlKGRhdGEsIHRoaXMpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFN3YXAgdGhlIGluc3RhbmNlJ3MgJGRhdGEuIENhbGxlZCBpbiAkZGF0YSdzIHNldHRlci5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBuZXdEYXRhXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX3NldERhdGEgPSBmdW5jdGlvbiAobmV3RGF0YSkge1xuXHQgICAgbmV3RGF0YSA9IG5ld0RhdGEgfHwge307XG5cdCAgICB2YXIgb2xkRGF0YSA9IHRoaXMuX2RhdGE7XG5cdCAgICB0aGlzLl9kYXRhID0gbmV3RGF0YTtcblx0ICAgIHZhciBrZXlzLCBrZXksIGk7XG5cdCAgICAvLyB1bnByb3h5IGtleXMgbm90IHByZXNlbnQgaW4gbmV3IGRhdGFcblx0ICAgIGtleXMgPSBPYmplY3Qua2V5cyhvbGREYXRhKTtcblx0ICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgaWYgKCEoa2V5IGluIG5ld0RhdGEpKSB7XG5cdCAgICAgICAgdGhpcy5fdW5wcm94eShrZXkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBwcm94eSBrZXlzIG5vdCBhbHJlYWR5IHByb3hpZWQsXG5cdCAgICAvLyBhbmQgdHJpZ2dlciBjaGFuZ2UgZm9yIGNoYW5nZWQgdmFsdWVzXG5cdCAgICBrZXlzID0gT2JqZWN0LmtleXMobmV3RGF0YSk7XG5cdCAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGtleSA9IGtleXNbaV07XG5cdCAgICAgIGlmICghaGFzT3duKHRoaXMsIGtleSkpIHtcblx0ICAgICAgICAvLyBuZXcgcHJvcGVydHlcblx0ICAgICAgICB0aGlzLl9wcm94eShrZXkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBvbGREYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKTtcblx0ICAgIG9ic2VydmUobmV3RGF0YSwgdGhpcyk7XG5cdCAgICB0aGlzLl9kaWdlc3QoKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBQcm94eSBhIHByb3BlcnR5LCBzbyB0aGF0XG5cdCAgICogdm0ucHJvcCA9PT0gdm0uX2RhdGEucHJvcFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIGlmICghaXNSZXNlcnZlZChrZXkpKSB7XG5cdCAgICAgIC8vIG5lZWQgdG8gc3RvcmUgcmVmIHRvIHNlbGYgaGVyZVxuXHQgICAgICAvLyBiZWNhdXNlIHRoZXNlIGdldHRlci9zZXR0ZXJzIG1pZ2h0XG5cdCAgICAgIC8vIGJlIGNhbGxlZCBieSBjaGlsZCBzY29wZXMgdmlhXG5cdCAgICAgIC8vIHByb3RvdHlwZSBpbmhlcml0YW5jZS5cblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwga2V5LCB7XG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiBwcm94eUdldHRlcigpIHtcblx0ICAgICAgICAgIHJldHVybiBzZWxmLl9kYXRhW2tleV07XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBzZXQ6IGZ1bmN0aW9uIHByb3h5U2V0dGVyKHZhbCkge1xuXHQgICAgICAgICAgc2VsZi5fZGF0YVtrZXldID0gdmFsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogVW5wcm94eSBhIHByb3BlcnR5LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl91bnByb3h5ID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgaWYgKCFpc1Jlc2VydmVkKGtleSkpIHtcblx0ICAgICAgZGVsZXRlIHRoaXNba2V5XTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBGb3JjZSB1cGRhdGUgb24gZXZlcnkgd2F0Y2hlciBpbiBzY29wZS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLl93YXRjaGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdGhpcy5fd2F0Y2hlcnNbaV0udXBkYXRlKHRydWUpOyAvLyBzaGFsbG93IHVwZGF0ZXNcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBTZXR1cCBjb21wdXRlZCBwcm9wZXJ0aWVzLiBUaGV5IGFyZSBlc3NlbnRpYWxseVxuXHQgICAqIHNwZWNpYWwgZ2V0dGVyL3NldHRlcnNcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gbm9vcCgpIHt9XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdENvbXB1dGVkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGNvbXB1dGVkID0gdGhpcy4kb3B0aW9ucy5jb21wdXRlZDtcblx0ICAgIGlmIChjb21wdXRlZCkge1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gY29tcHV0ZWQpIHtcblx0ICAgICAgICB2YXIgdXNlckRlZiA9IGNvbXB1dGVkW2tleV07XG5cdCAgICAgICAgdmFyIGRlZiA9IHtcblx0ICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgICAgICB9O1xuXHQgICAgICAgIGlmICh0eXBlb2YgdXNlckRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgZGVmLmdldCA9IG1ha2VDb21wdXRlZEdldHRlcih1c2VyRGVmLCB0aGlzKTtcblx0ICAgICAgICAgIGRlZi5zZXQgPSBub29wO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBkZWYuZ2V0ID0gdXNlckRlZi5nZXQgPyB1c2VyRGVmLmNhY2hlICE9PSBmYWxzZSA/IG1ha2VDb21wdXRlZEdldHRlcih1c2VyRGVmLmdldCwgdGhpcykgOiBiaW5kKHVzZXJEZWYuZ2V0LCB0aGlzKSA6IG5vb3A7XG5cdCAgICAgICAgICBkZWYuc2V0ID0gdXNlckRlZi5zZXQgPyBiaW5kKHVzZXJEZWYuc2V0LCB0aGlzKSA6IG5vb3A7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrZXksIGRlZik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBtYWtlQ29tcHV0ZWRHZXR0ZXIoZ2V0dGVyLCBvd25lcikge1xuXHQgICAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcihvd25lciwgZ2V0dGVyLCBudWxsLCB7XG5cdCAgICAgIGxhenk6IHRydWVcblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIGNvbXB1dGVkR2V0dGVyKCkge1xuXHQgICAgICBpZiAod2F0Y2hlci5kaXJ0eSkge1xuXHQgICAgICAgIHdhdGNoZXIuZXZhbHVhdGUoKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoRGVwLnRhcmdldCkge1xuXHQgICAgICAgIHdhdGNoZXIuZGVwZW5kKCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHdhdGNoZXIudmFsdWU7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogU2V0dXAgaW5zdGFuY2UgbWV0aG9kcy4gTWV0aG9kcyBtdXN0IGJlIGJvdW5kIHRvIHRoZVxuXHQgICAqIGluc3RhbmNlIHNpbmNlIHRoZXkgbWlnaHQgYmUgcGFzc2VkIGRvd24gYXMgYSBwcm9wIHRvXG5cdCAgICogY2hpbGQgY29tcG9uZW50cy5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdE1ldGhvZHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgbWV0aG9kcyA9IHRoaXMuJG9wdGlvbnMubWV0aG9kcztcblx0ICAgIGlmIChtZXRob2RzKSB7XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiBtZXRob2RzKSB7XG5cdCAgICAgICAgdGhpc1trZXldID0gYmluZChtZXRob2RzW2tleV0sIHRoaXMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5pdGlhbGl6ZSBtZXRhIGluZm9ybWF0aW9uIGxpa2UgJGluZGV4LCAka2V5ICYgJHZhbHVlLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0TWV0YSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBtZXRhcyA9IHRoaXMuJG9wdGlvbnMuX21ldGE7XG5cdCAgICBpZiAobWV0YXMpIHtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIG1ldGFzKSB7XG5cdCAgICAgICAgZGVmaW5lUmVhY3RpdmUodGhpcywga2V5LCBtZXRhc1trZXldKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdHZhciBldmVudFJFID0gL152LW9uOnxeQC87XG5cdFxuXHRmdW5jdGlvbiBldmVudHNNaXhpbiAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogU2V0dXAgdGhlIGluc3RhbmNlJ3Mgb3B0aW9uIGV2ZW50cyAmIHdhdGNoZXJzLlxuXHQgICAqIElmIHRoZSB2YWx1ZSBpcyBhIHN0cmluZywgd2UgcHVsbCBpdCBmcm9tIHRoZVxuXHQgICAqIGluc3RhbmNlJ3MgbWV0aG9kcyBieSBuYW1lLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0RXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuXHQgICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50KSB7XG5cdCAgICAgIHJlZ2lzdGVyQ29tcG9uZW50RXZlbnRzKHRoaXMsIG9wdGlvbnMuZWwpO1xuXHQgICAgfVxuXHQgICAgcmVnaXN0ZXJDYWxsYmFja3ModGhpcywgJyRvbicsIG9wdGlvbnMuZXZlbnRzKTtcblx0ICAgIHJlZ2lzdGVyQ2FsbGJhY2tzKHRoaXMsICckd2F0Y2gnLCBvcHRpb25zLndhdGNoKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZWdpc3RlciB2LW9uIGV2ZW50cyBvbiBhIGNoaWxkIGNvbXBvbmVudFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZWdpc3RlckNvbXBvbmVudEV2ZW50cyh2bSwgZWwpIHtcblx0ICAgIHZhciBhdHRycyA9IGVsLmF0dHJpYnV0ZXM7XG5cdCAgICB2YXIgbmFtZSwgdmFsdWUsIGhhbmRsZXI7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBuYW1lID0gYXR0cnNbaV0ubmFtZTtcblx0ICAgICAgaWYgKGV2ZW50UkUudGVzdChuYW1lKSkge1xuXHQgICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoZXZlbnRSRSwgJycpO1xuXHQgICAgICAgIC8vIGZvcmNlIHRoZSBleHByZXNzaW9uIGludG8gYSBzdGF0ZW1lbnQgc28gdGhhdFxuXHQgICAgICAgIC8vIGl0IGFsd2F5cyBkeW5hbWljYWxseSByZXNvbHZlcyB0aGUgbWV0aG9kIHRvIGNhbGwgKCMyNjcwKVxuXHQgICAgICAgIC8vIGtpbmRhIHVnbHkgaGFjaywgYnV0IGRvZXMgdGhlIGpvYi5cblx0ICAgICAgICB2YWx1ZSA9IGF0dHJzW2ldLnZhbHVlO1xuXHQgICAgICAgIGlmIChpc1NpbXBsZVBhdGgodmFsdWUpKSB7XG5cdCAgICAgICAgICB2YWx1ZSArPSAnLmFwcGx5KHRoaXMsICRhcmd1bWVudHMpJztcblx0ICAgICAgICB9XG5cdCAgICAgICAgaGFuZGxlciA9ICh2bS5fc2NvcGUgfHwgdm0uX2NvbnRleHQpLiRldmFsKHZhbHVlLCB0cnVlKTtcblx0ICAgICAgICBoYW5kbGVyLl9mcm9tUGFyZW50ID0gdHJ1ZTtcblx0ICAgICAgICB2bS4kb24obmFtZS5yZXBsYWNlKGV2ZW50UkUpLCBoYW5kbGVyKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmVnaXN0ZXIgY2FsbGJhY2tzIGZvciBvcHRpb24gZXZlbnRzIGFuZCB3YXRjaGVycy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25cblx0ICAgKiBAcGFyYW0ge09iamVjdH0gaGFzaFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZWdpc3RlckNhbGxiYWNrcyh2bSwgYWN0aW9uLCBoYXNoKSB7XG5cdCAgICBpZiAoIWhhc2gpIHJldHVybjtcblx0ICAgIHZhciBoYW5kbGVycywga2V5LCBpLCBqO1xuXHQgICAgZm9yIChrZXkgaW4gaGFzaCkge1xuXHQgICAgICBoYW5kbGVycyA9IGhhc2hba2V5XTtcblx0ICAgICAgaWYgKGlzQXJyYXkoaGFuZGxlcnMpKSB7XG5cdCAgICAgICAgZm9yIChpID0gMCwgaiA9IGhhbmRsZXJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHQgICAgICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyc1tpXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlcnMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBIZWxwZXIgdG8gcmVnaXN0ZXIgYW4gZXZlbnQvd2F0Y2ggY2FsbGJhY2suXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfE9iamVjdH0gaGFuZGxlclxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLCBvcHRpb25zKSB7XG5cdCAgICB2YXIgdHlwZSA9IHR5cGVvZiBoYW5kbGVyO1xuXHQgICAgaWYgKHR5cGUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgdm1bYWN0aW9uXShrZXksIGhhbmRsZXIsIG9wdGlvbnMpO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlID09PSAnc3RyaW5nJykge1xuXHQgICAgICB2YXIgbWV0aG9kcyA9IHZtLiRvcHRpb25zLm1ldGhvZHM7XG5cdCAgICAgIHZhciBtZXRob2QgPSBtZXRob2RzICYmIG1ldGhvZHNbaGFuZGxlcl07XG5cdCAgICAgIGlmIChtZXRob2QpIHtcblx0ICAgICAgICB2bVthY3Rpb25dKGtleSwgbWV0aG9kLCBvcHRpb25zKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1Vua25vd24gbWV0aG9kOiBcIicgKyBoYW5kbGVyICsgJ1wiIHdoZW4gJyArICdyZWdpc3RlcmluZyBjYWxsYmFjayBmb3IgJyArIGFjdGlvbiArICc6IFwiJyArIGtleSArICdcIi4nLCB2bSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoaGFuZGxlciAmJiB0eXBlID09PSAnb2JqZWN0Jykge1xuXHQgICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXIuaGFuZGxlciwgaGFuZGxlcik7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBTZXR1cCByZWN1cnNpdmUgYXR0YWNoZWQvZGV0YWNoZWQgY2FsbHNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdERPTUhvb2tzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy4kb24oJ2hvb2s6YXR0YWNoZWQnLCBvbkF0dGFjaGVkKTtcblx0ICAgIHRoaXMuJG9uKCdob29rOmRldGFjaGVkJywgb25EZXRhY2hlZCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ2FsbGJhY2sgdG8gcmVjdXJzaXZlbHkgY2FsbCBhdHRhY2hlZCBob29rIG9uIGNoaWxkcmVuXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIG9uQXR0YWNoZWQoKSB7XG5cdCAgICBpZiAoIXRoaXMuX2lzQXR0YWNoZWQpIHtcblx0ICAgICAgdGhpcy5faXNBdHRhY2hlZCA9IHRydWU7XG5cdCAgICAgIHRoaXMuJGNoaWxkcmVuLmZvckVhY2goY2FsbEF0dGFjaCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBJdGVyYXRvciB0byBjYWxsIGF0dGFjaGVkIGhvb2tcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjYWxsQXR0YWNoKGNoaWxkKSB7XG5cdCAgICBpZiAoIWNoaWxkLl9pc0F0dGFjaGVkICYmIGluRG9jKGNoaWxkLiRlbCkpIHtcblx0ICAgICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQ2FsbGJhY2sgdG8gcmVjdXJzaXZlbHkgY2FsbCBkZXRhY2hlZCBob29rIG9uIGNoaWxkcmVuXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIG9uRGV0YWNoZWQoKSB7XG5cdCAgICBpZiAodGhpcy5faXNBdHRhY2hlZCkge1xuXHQgICAgICB0aGlzLl9pc0F0dGFjaGVkID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuJGNoaWxkcmVuLmZvckVhY2goY2FsbERldGFjaCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBJdGVyYXRvciB0byBjYWxsIGRldGFjaGVkIGhvb2tcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjYWxsRGV0YWNoKGNoaWxkKSB7XG5cdCAgICBpZiAoY2hpbGQuX2lzQXR0YWNoZWQgJiYgIWluRG9jKGNoaWxkLiRlbCkpIHtcblx0ICAgICAgY2hpbGQuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogVHJpZ2dlciBhbGwgaGFuZGxlcnMgZm9yIGEgaG9va1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGhvb2tcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fY2FsbEhvb2sgPSBmdW5jdGlvbiAoaG9vaykge1xuXHQgICAgdGhpcy4kZW1pdCgncHJlLWhvb2s6JyArIGhvb2spO1xuXHQgICAgdmFyIGhhbmRsZXJzID0gdGhpcy4kb3B0aW9uc1tob29rXTtcblx0ICAgIGlmIChoYW5kbGVycykge1xuXHQgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IGhhbmRsZXJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHQgICAgICAgIGhhbmRsZXJzW2ldLmNhbGwodGhpcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHRoaXMuJGVtaXQoJ2hvb2s6JyArIGhvb2spO1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG5vb3AkMSgpIHt9XG5cdFxuXHQvKipcblx0ICogQSBkaXJlY3RpdmUgbGlua3MgYSBET00gZWxlbWVudCB3aXRoIGEgcGllY2Ugb2YgZGF0YSxcblx0ICogd2hpY2ggaXMgdGhlIHJlc3VsdCBvZiBldmFsdWF0aW5nIGFuIGV4cHJlc3Npb24uXG5cdCAqIEl0IHJlZ2lzdGVycyBhIHdhdGNoZXIgd2l0aCB0aGUgZXhwcmVzc2lvbiBhbmQgY2FsbHNcblx0ICogdGhlIERPTSB1cGRhdGUgZnVuY3Rpb24gd2hlbiBhIGNoYW5nZSBpcyB0cmlnZ2VyZWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBkZXNjcmlwdG9yXG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IG5hbWVcblx0ICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gZGVmXG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGV4cHJlc3Npb25cblx0ICogICAgICAgICAgICAgICAgIC0ge0FycmF5PE9iamVjdD59IFtmaWx0ZXJzXVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBbbW9kaWZpZXJzXVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gbGl0ZXJhbFxuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBhdHRyXG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGFyZ1xuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSByYXdcblx0ICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gW3JlZl1cblx0ICogICAgICAgICAgICAgICAgIC0ge0FycmF5PE9iamVjdD59IFtpbnRlcnBdXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBbaGFzT25lVGltZV1cblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7Tm9kZX0gZWxcblx0ICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIHRyYW5zY2x1c2lvbiBob3N0IGNvbXBvbmVudFxuXHQgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG5cdCAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIG93bmVyIGZyYWdtZW50XG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0ZnVuY3Rpb24gRGlyZWN0aXZlKGRlc2NyaXB0b3IsIHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICB0aGlzLnZtID0gdm07XG5cdCAgdGhpcy5lbCA9IGVsO1xuXHQgIC8vIGNvcHkgZGVzY3JpcHRvciBwcm9wZXJ0aWVzXG5cdCAgdGhpcy5kZXNjcmlwdG9yID0gZGVzY3JpcHRvcjtcblx0ICB0aGlzLm5hbWUgPSBkZXNjcmlwdG9yLm5hbWU7XG5cdCAgdGhpcy5leHByZXNzaW9uID0gZGVzY3JpcHRvci5leHByZXNzaW9uO1xuXHQgIHRoaXMuYXJnID0gZGVzY3JpcHRvci5hcmc7XG5cdCAgdGhpcy5tb2RpZmllcnMgPSBkZXNjcmlwdG9yLm1vZGlmaWVycztcblx0ICB0aGlzLmZpbHRlcnMgPSBkZXNjcmlwdG9yLmZpbHRlcnM7XG5cdCAgdGhpcy5saXRlcmFsID0gdGhpcy5tb2RpZmllcnMgJiYgdGhpcy5tb2RpZmllcnMubGl0ZXJhbDtcblx0ICAvLyBwcml2YXRlXG5cdCAgdGhpcy5fbG9ja2VkID0gZmFsc2U7XG5cdCAgdGhpcy5fYm91bmQgPSBmYWxzZTtcblx0ICB0aGlzLl9saXN0ZW5lcnMgPSBudWxsO1xuXHQgIC8vIGxpbmsgY29udGV4dFxuXHQgIHRoaXMuX2hvc3QgPSBob3N0O1xuXHQgIHRoaXMuX3Njb3BlID0gc2NvcGU7XG5cdCAgdGhpcy5fZnJhZyA9IGZyYWc7XG5cdCAgLy8gc3RvcmUgZGlyZWN0aXZlcyBvbiBub2RlIGluIGRldiBtb2RlXG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbCkge1xuXHQgICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMgPSB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcyB8fCBbXTtcblx0ICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzLnB1c2godGhpcyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogSW5pdGlhbGl6ZSB0aGUgZGlyZWN0aXZlLCBtaXhpbiBkZWZpbml0aW9uIHByb3BlcnRpZXMsXG5cdCAqIHNldHVwIHRoZSB3YXRjaGVyLCBjYWxsIGRlZmluaXRpb24gYmluZCgpIGFuZCB1cGRhdGUoKVxuXHQgKiBpZiBwcmVzZW50LlxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX2JpbmQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIG5hbWUgPSB0aGlzLm5hbWU7XG5cdCAgdmFyIGRlc2NyaXB0b3IgPSB0aGlzLmRlc2NyaXB0b3I7XG5cdFxuXHQgIC8vIHJlbW92ZSBhdHRyaWJ1dGVcblx0ICBpZiAoKG5hbWUgIT09ICdjbG9haycgfHwgdGhpcy52bS5faXNDb21waWxlZCkgJiYgdGhpcy5lbCAmJiB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSkge1xuXHQgICAgdmFyIGF0dHIgPSBkZXNjcmlwdG9yLmF0dHIgfHwgJ3YtJyArIG5hbWU7XG5cdCAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcblx0ICB9XG5cdFxuXHQgIC8vIGNvcHkgZGVmIHByb3BlcnRpZXNcblx0ICB2YXIgZGVmID0gZGVzY3JpcHRvci5kZWY7XG5cdCAgaWYgKHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHRoaXMudXBkYXRlID0gZGVmO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBleHRlbmQodGhpcywgZGVmKTtcblx0ICB9XG5cdFxuXHQgIC8vIHNldHVwIGRpcmVjdGl2ZSBwYXJhbXNcblx0ICB0aGlzLl9zZXR1cFBhcmFtcygpO1xuXHRcblx0ICAvLyBpbml0aWFsIGJpbmRcblx0ICBpZiAodGhpcy5iaW5kKSB7XG5cdCAgICB0aGlzLmJpbmQoKTtcblx0ICB9XG5cdCAgdGhpcy5fYm91bmQgPSB0cnVlO1xuXHRcblx0ICBpZiAodGhpcy5saXRlcmFsKSB7XG5cdCAgICB0aGlzLnVwZGF0ZSAmJiB0aGlzLnVwZGF0ZShkZXNjcmlwdG9yLnJhdyk7XG5cdCAgfSBlbHNlIGlmICgodGhpcy5leHByZXNzaW9uIHx8IHRoaXMubW9kaWZpZXJzKSAmJiAodGhpcy51cGRhdGUgfHwgdGhpcy50d29XYXkpICYmICF0aGlzLl9jaGVja1N0YXRlbWVudCgpKSB7XG5cdCAgICAvLyB3cmFwcGVkIHVwZGF0ZXIgZm9yIGNvbnRleHRcblx0ICAgIHZhciBkaXIgPSB0aGlzO1xuXHQgICAgaWYgKHRoaXMudXBkYXRlKSB7XG5cdCAgICAgIHRoaXMuX3VwZGF0ZSA9IGZ1bmN0aW9uICh2YWwsIG9sZFZhbCkge1xuXHQgICAgICAgIGlmICghZGlyLl9sb2NrZWQpIHtcblx0ICAgICAgICAgIGRpci51cGRhdGUodmFsLCBvbGRWYWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuX3VwZGF0ZSA9IG5vb3AkMTtcblx0ICAgIH1cblx0ICAgIHZhciBwcmVQcm9jZXNzID0gdGhpcy5fcHJlUHJvY2VzcyA/IGJpbmQodGhpcy5fcHJlUHJvY2VzcywgdGhpcykgOiBudWxsO1xuXHQgICAgdmFyIHBvc3RQcm9jZXNzID0gdGhpcy5fcG9zdFByb2Nlc3MgPyBiaW5kKHRoaXMuX3Bvc3RQcm9jZXNzLCB0aGlzKSA6IG51bGw7XG5cdCAgICB2YXIgd2F0Y2hlciA9IHRoaXMuX3dhdGNoZXIgPSBuZXcgV2F0Y2hlcih0aGlzLnZtLCB0aGlzLmV4cHJlc3Npb24sIHRoaXMuX3VwZGF0ZSwgLy8gY2FsbGJhY2tcblx0ICAgIHtcblx0ICAgICAgZmlsdGVyczogdGhpcy5maWx0ZXJzLFxuXHQgICAgICB0d29XYXk6IHRoaXMudHdvV2F5LFxuXHQgICAgICBkZWVwOiB0aGlzLmRlZXAsXG5cdCAgICAgIHByZVByb2Nlc3M6IHByZVByb2Nlc3MsXG5cdCAgICAgIHBvc3RQcm9jZXNzOiBwb3N0UHJvY2Vzcyxcblx0ICAgICAgc2NvcGU6IHRoaXMuX3Njb3BlXG5cdCAgICB9KTtcblx0ICAgIC8vIHYtbW9kZWwgd2l0aCBpbml0YWwgaW5saW5lIHZhbHVlIG5lZWQgdG8gc3luYyBiYWNrIHRvXG5cdCAgICAvLyBtb2RlbCBpbnN0ZWFkIG9mIHVwZGF0ZSB0byBET00gb24gaW5pdC4gVGhleSB3b3VsZFxuXHQgICAgLy8gc2V0IHRoZSBhZnRlckJpbmQgaG9vayB0byBpbmRpY2F0ZSB0aGF0LlxuXHQgICAgaWYgKHRoaXMuYWZ0ZXJCaW5kKSB7XG5cdCAgICAgIHRoaXMuYWZ0ZXJCaW5kKCk7XG5cdCAgICB9IGVsc2UgaWYgKHRoaXMudXBkYXRlKSB7XG5cdCAgICAgIHRoaXMudXBkYXRlKHdhdGNoZXIudmFsdWUpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTZXR1cCBhbGwgcGFyYW0gYXR0cmlidXRlcywgZS5nLiB0cmFjay1ieSxcblx0ICogdHJhbnNpdGlvbi1tb2RlLCBldGMuLi5cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl9zZXR1cFBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBpZiAoIXRoaXMucGFyYW1zKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBwYXJhbXMgPSB0aGlzLnBhcmFtcztcblx0ICAvLyBzd2FwIHRoZSBwYXJhbXMgYXJyYXkgd2l0aCBhIGZyZXNoIG9iamVjdC5cblx0ICB0aGlzLnBhcmFtcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgdmFyIGkgPSBwYXJhbXMubGVuZ3RoO1xuXHQgIHZhciBrZXksIHZhbCwgbWFwcGVkS2V5O1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGtleSA9IGh5cGhlbmF0ZShwYXJhbXNbaV0pO1xuXHQgICAgbWFwcGVkS2V5ID0gY2FtZWxpemUoa2V5KTtcblx0ICAgIHZhbCA9IGdldEJpbmRBdHRyKHRoaXMuZWwsIGtleSk7XG5cdCAgICBpZiAodmFsICE9IG51bGwpIHtcblx0ICAgICAgLy8gZHluYW1pY1xuXHQgICAgICB0aGlzLl9zZXR1cFBhcmFtV2F0Y2hlcihtYXBwZWRLZXksIHZhbCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBzdGF0aWNcblx0ICAgICAgdmFsID0gZ2V0QXR0cih0aGlzLmVsLCBrZXkpO1xuXHQgICAgICBpZiAodmFsICE9IG51bGwpIHtcblx0ICAgICAgICB0aGlzLnBhcmFtc1ttYXBwZWRLZXldID0gdmFsID09PSAnJyA/IHRydWUgOiB2YWw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogU2V0dXAgYSB3YXRjaGVyIGZvciBhIGR5bmFtaWMgcGFyYW0uXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cHJlc3Npb25cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl9zZXR1cFBhcmFtV2F0Y2hlciA9IGZ1bmN0aW9uIChrZXksIGV4cHJlc3Npb24pIHtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuXHQgIHZhciB1bndhdGNoID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiR3YXRjaChleHByZXNzaW9uLCBmdW5jdGlvbiAodmFsLCBvbGRWYWwpIHtcblx0ICAgIHNlbGYucGFyYW1zW2tleV0gPSB2YWw7XG5cdCAgICAvLyBzaW5jZSB3ZSBhcmUgaW4gaW1tZWRpYXRlIG1vZGUsXG5cdCAgICAvLyBvbmx5IGNhbGwgdGhlIHBhcmFtIGNoYW5nZSBjYWxsYmFja3MgaWYgdGhpcyBpcyBub3QgdGhlIGZpcnN0IHVwZGF0ZS5cblx0ICAgIGlmIChjYWxsZWQpIHtcblx0ICAgICAgdmFyIGNiID0gc2VsZi5wYXJhbVdhdGNoZXJzICYmIHNlbGYucGFyYW1XYXRjaGVyc1trZXldO1xuXHQgICAgICBpZiAoY2IpIHtcblx0ICAgICAgICBjYi5jYWxsKHNlbGYsIHZhbCwgb2xkVmFsKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgY2FsbGVkID0gdHJ1ZTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBpbW1lZGlhdGU6IHRydWUsXG5cdCAgICB1c2VyOiBmYWxzZVxuXHQgIH0pOyh0aGlzLl9wYXJhbVVud2F0Y2hGbnMgfHwgKHRoaXMuX3BhcmFtVW53YXRjaEZucyA9IFtdKSkucHVzaCh1bndhdGNoKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiB0aGUgZGlyZWN0aXZlIGlzIGEgZnVuY3Rpb24gY2FsbGVyXG5cdCAqIGFuZCBpZiB0aGUgZXhwcmVzc2lvbiBpcyBhIGNhbGxhYmxlIG9uZS4gSWYgYm90aCB0cnVlLFxuXHQgKiB3ZSB3cmFwIHVwIHRoZSBleHByZXNzaW9uIGFuZCB1c2UgaXQgYXMgdGhlIGV2ZW50XG5cdCAqIGhhbmRsZXIuXG5cdCAqXG5cdCAqIGUuZy4gb24tY2xpY2s9XCJhKytcIlxuXHQgKlxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX2NoZWNrU3RhdGVtZW50ID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBleHByZXNzaW9uID0gdGhpcy5leHByZXNzaW9uO1xuXHQgIGlmIChleHByZXNzaW9uICYmIHRoaXMuYWNjZXB0U3RhdGVtZW50ICYmICFpc1NpbXBsZVBhdGgoZXhwcmVzc2lvbikpIHtcblx0ICAgIHZhciBmbiA9IHBhcnNlRXhwcmVzc2lvbihleHByZXNzaW9uKS5nZXQ7XG5cdCAgICB2YXIgc2NvcGUgPSB0aGlzLl9zY29wZSB8fCB0aGlzLnZtO1xuXHQgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyKGUpIHtcblx0ICAgICAgc2NvcGUuJGV2ZW50ID0gZTtcblx0ICAgICAgZm4uY2FsbChzY29wZSwgc2NvcGUpO1xuXHQgICAgICBzY29wZS4kZXZlbnQgPSBudWxsO1xuXHQgICAgfTtcblx0ICAgIGlmICh0aGlzLmZpbHRlcnMpIHtcblx0ICAgICAgaGFuZGxlciA9IHNjb3BlLl9hcHBseUZpbHRlcnMoaGFuZGxlciwgbnVsbCwgdGhpcy5maWx0ZXJzKTtcblx0ICAgIH1cblx0ICAgIHRoaXMudXBkYXRlKGhhbmRsZXIpO1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFNldCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSB3aXRoIHRoZSBzZXR0ZXIuXG5cdCAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0d28td2F5IGRpcmVjdGl2ZXNcblx0ICogZS5nLiB2LW1vZGVsLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgaWYgKHRoaXMudHdvV2F5KSB7XG5cdCAgICB0aGlzLl93aXRoTG9jayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMuX3dhdGNoZXIuc2V0KHZhbHVlKTtcblx0ICAgIH0pO1xuXHQgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgd2FybignRGlyZWN0aXZlLnNldCgpIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHR3b1dheScgKyAnZGlyZWN0aXZlcy4nKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogRXhlY3V0ZSBhIGZ1bmN0aW9uIHdoaWxlIHByZXZlbnRpbmcgdGhhdCBmdW5jdGlvbiBmcm9tXG5cdCAqIHRyaWdnZXJpbmcgdXBkYXRlcyBvbiB0aGlzIGRpcmVjdGl2ZSBpbnN0YW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl93aXRoTG9jayA9IGZ1bmN0aW9uIChmbikge1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICBzZWxmLl9sb2NrZWQgPSB0cnVlO1xuXHQgIGZuLmNhbGwoc2VsZik7XG5cdCAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHQgICAgc2VsZi5fbG9ja2VkID0gZmFsc2U7XG5cdCAgfSk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ29udmVuaWVuY2UgbWV0aG9kIHRoYXQgYXR0YWNoZXMgYSBET00gZXZlbnQgbGlzdGVuZXJcblx0ICogdG8gdGhlIGRpcmVjdGl2ZSBlbGVtZW50IGFuZCBhdXRvbWV0aWNhbGx5IHRlYXJzIGl0IGRvd25cblx0ICogZHVyaW5nIHVuYmluZC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcblx0ICogQHBhcmFtIHtCb29sZWFufSBbdXNlQ2FwdHVyZV1cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2ZW50LCBoYW5kbGVyLCB1c2VDYXB0dXJlKSB7XG5cdCAgb24odGhpcy5lbCwgZXZlbnQsIGhhbmRsZXIsIHVzZUNhcHR1cmUpOyh0aGlzLl9saXN0ZW5lcnMgfHwgKHRoaXMuX2xpc3RlbmVycyA9IFtdKSkucHVzaChbZXZlbnQsIGhhbmRsZXJdKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBUZWFyZG93biB0aGUgd2F0Y2hlciBhbmQgY2FsbCB1bmJpbmQuXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5fdGVhcmRvd24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKHRoaXMuX2JvdW5kKSB7XG5cdCAgICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xuXHQgICAgaWYgKHRoaXMudW5iaW5kKSB7XG5cdCAgICAgIHRoaXMudW5iaW5kKCk7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5fd2F0Y2hlcikge1xuXHQgICAgICB0aGlzLl93YXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgICB9XG5cdCAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xuXHQgICAgdmFyIGk7XG5cdCAgICBpZiAobGlzdGVuZXJzKSB7XG5cdCAgICAgIGkgPSBsaXN0ZW5lcnMubGVuZ3RoO1xuXHQgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAgb2ZmKHRoaXMuZWwsIGxpc3RlbmVyc1tpXVswXSwgbGlzdGVuZXJzW2ldWzFdKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdmFyIHVud2F0Y2hGbnMgPSB0aGlzLl9wYXJhbVVud2F0Y2hGbnM7XG5cdCAgICBpZiAodW53YXRjaEZucykge1xuXHQgICAgICBpID0gdW53YXRjaEZucy5sZW5ndGg7XG5cdCAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICB1bndhdGNoRm5zW2ldKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwpIHtcblx0ICAgICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMuJHJlbW92ZSh0aGlzKTtcblx0ICAgIH1cblx0ICAgIHRoaXMudm0gPSB0aGlzLmVsID0gdGhpcy5fd2F0Y2hlciA9IHRoaXMuX2xpc3RlbmVycyA9IG51bGw7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gbGlmZWN5Y2xlTWl4aW4gKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIFVwZGF0ZSB2LXJlZiBmb3IgY29tcG9uZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fdXBkYXRlUmVmID0gZnVuY3Rpb24gKHJlbW92ZSkge1xuXHQgICAgdmFyIHJlZiA9IHRoaXMuJG9wdGlvbnMuX3JlZjtcblx0ICAgIGlmIChyZWYpIHtcblx0ICAgICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy5fY29udGV4dCkuJHJlZnM7XG5cdCAgICAgIGlmIChyZW1vdmUpIHtcblx0ICAgICAgICBpZiAocmVmc1tyZWZdID09PSB0aGlzKSB7XG5cdCAgICAgICAgICByZWZzW3JlZl0gPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZWZzW3JlZl0gPSB0aGlzO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogVHJhbnNjbHVkZSwgY29tcGlsZSBhbmQgbGluayBlbGVtZW50LlxuXHQgICAqXG5cdCAgICogSWYgYSBwcmUtY29tcGlsZWQgbGlua2VyIGlzIGF2YWlsYWJsZSwgdGhhdCBtZWFucyB0aGVcblx0ICAgKiBwYXNzZWQgaW4gZWxlbWVudCB3aWxsIGJlIHByZS10cmFuc2NsdWRlZCBhbmQgY29tcGlsZWRcblx0ICAgKiBhcyB3ZWxsIC0gYWxsIHdlIG5lZWQgdG8gZG8gaXMgdG8gY2FsbCB0aGUgbGlua2VyLlxuXHQgICAqXG5cdCAgICogT3RoZXJ3aXNlIHdlIG5lZWQgdG8gY2FsbCB0cmFuc2NsdWRlL2NvbXBpbGUvbGluayBoZXJlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9jb21waWxlID0gZnVuY3Rpb24gKGVsKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG5cdFxuXHQgICAgLy8gdHJhbnNjbHVkZSBhbmQgaW5pdCBlbGVtZW50XG5cdCAgICAvLyB0cmFuc2NsdWRlIGNhbiBwb3RlbnRpYWxseSByZXBsYWNlIG9yaWdpbmFsXG5cdCAgICAvLyBzbyB3ZSBuZWVkIHRvIGtlZXAgcmVmZXJlbmNlOyB0aGlzIHN0ZXAgYWxzbyBpbmplY3RzXG5cdCAgICAvLyB0aGUgdGVtcGxhdGUgYW5kIGNhY2hlcyB0aGUgb3JpZ2luYWwgYXR0cmlidXRlc1xuXHQgICAgLy8gb24gdGhlIGNvbnRhaW5lciBub2RlIGFuZCByZXBsYWNlciBub2RlLlxuXHQgICAgdmFyIG9yaWdpbmFsID0gZWw7XG5cdCAgICBlbCA9IHRyYW5zY2x1ZGUoZWwsIG9wdGlvbnMpO1xuXHQgICAgdGhpcy5faW5pdEVsZW1lbnQoZWwpO1xuXHRcblx0ICAgIC8vIGhhbmRsZSB2LXByZSBvbiByb290IG5vZGUgKCMyMDI2KVxuXHQgICAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGdldEF0dHIoZWwsICd2LXByZScpICE9PSBudWxsKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICAvLyByb290IGlzIGFsd2F5cyBjb21waWxlZCBwZXItaW5zdGFuY2UsIGJlY2F1c2Vcblx0ICAgIC8vIGNvbnRhaW5lciBhdHRycyBhbmQgcHJvcHMgY2FuIGJlIGRpZmZlcmVudCBldmVyeSB0aW1lLlxuXHQgICAgdmFyIGNvbnRleHRPcHRpb25zID0gdGhpcy5fY29udGV4dCAmJiB0aGlzLl9jb250ZXh0LiRvcHRpb25zO1xuXHQgICAgdmFyIHJvb3RMaW5rZXIgPSBjb21waWxlUm9vdChlbCwgb3B0aW9ucywgY29udGV4dE9wdGlvbnMpO1xuXHRcblx0ICAgIC8vIHJlc29sdmUgc2xvdCBkaXN0cmlidXRpb25cblx0ICAgIHJlc29sdmVTbG90cyh0aGlzLCBvcHRpb25zLl9jb250ZW50KTtcblx0XG5cdCAgICAvLyBjb21waWxlIGFuZCBsaW5rIHRoZSByZXN0XG5cdCAgICB2YXIgY29udGVudExpbmtGbjtcblx0ICAgIHZhciBjdG9yID0gdGhpcy5jb25zdHJ1Y3Rvcjtcblx0ICAgIC8vIGNvbXBvbmVudCBjb21waWxhdGlvbiBjYW4gYmUgY2FjaGVkXG5cdCAgICAvLyBhcyBsb25nIGFzIGl0J3Mgbm90IHVzaW5nIGlubGluZS10ZW1wbGF0ZVxuXHQgICAgaWYgKG9wdGlvbnMuX2xpbmtlckNhY2hhYmxlKSB7XG5cdCAgICAgIGNvbnRlbnRMaW5rRm4gPSBjdG9yLmxpbmtlcjtcblx0ICAgICAgaWYgKCFjb250ZW50TGlua0ZuKSB7XG5cdCAgICAgICAgY29udGVudExpbmtGbiA9IGN0b3IubGlua2VyID0gY29tcGlsZShlbCwgb3B0aW9ucyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBsaW5rIHBoYXNlXG5cdCAgICAvLyBtYWtlIHN1cmUgdG8gbGluayByb290IHdpdGggcHJvcCBzY29wZSFcblx0ICAgIHZhciByb290VW5saW5rRm4gPSByb290TGlua2VyKHRoaXMsIGVsLCB0aGlzLl9zY29wZSk7XG5cdCAgICB2YXIgY29udGVudFVubGlua0ZuID0gY29udGVudExpbmtGbiA/IGNvbnRlbnRMaW5rRm4odGhpcywgZWwpIDogY29tcGlsZShlbCwgb3B0aW9ucykodGhpcywgZWwpO1xuXHRcblx0ICAgIC8vIHJlZ2lzdGVyIGNvbXBvc2l0ZSB1bmxpbmsgZnVuY3Rpb25cblx0ICAgIC8vIHRvIGJlIGNhbGxlZCBkdXJpbmcgaW5zdGFuY2UgZGVzdHJ1Y3Rpb25cblx0ICAgIHRoaXMuX3VubGlua0ZuID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICByb290VW5saW5rRm4oKTtcblx0ICAgICAgLy8gcGFzc2luZyBkZXN0cm95aW5nOiB0cnVlIHRvIGF2b2lkIHNlYXJjaGluZyBhbmRcblx0ICAgICAgLy8gc3BsaWNpbmcgdGhlIGRpcmVjdGl2ZXNcblx0ICAgICAgY29udGVudFVubGlua0ZuKHRydWUpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBmaW5hbGx5IHJlcGxhY2Ugb3JpZ2luYWxcblx0ICAgIGlmIChvcHRpb25zLnJlcGxhY2UpIHtcblx0ICAgICAgcmVwbGFjZShvcmlnaW5hbCwgZWwpO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuX2lzQ29tcGlsZWQgPSB0cnVlO1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2NvbXBpbGVkJyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5pdGlhbGl6ZSBpbnN0YW5jZSBlbGVtZW50LiBDYWxsZWQgaW4gdGhlIHB1YmxpY1xuXHQgICAqICRtb3VudCgpIG1ldGhvZC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWwpIHtcblx0ICAgIGlmIChpc0ZyYWdtZW50KGVsKSkge1xuXHQgICAgICB0aGlzLl9pc0ZyYWdtZW50ID0gdHJ1ZTtcblx0ICAgICAgdGhpcy4kZWwgPSB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gZWwuZmlyc3RDaGlsZDtcblx0ICAgICAgdGhpcy5fZnJhZ21lbnRFbmQgPSBlbC5sYXN0Q2hpbGQ7XG5cdCAgICAgIC8vIHNldCBwZXJzaXN0ZWQgdGV4dCBhbmNob3JzIHRvIGVtcHR5XG5cdCAgICAgIGlmICh0aGlzLl9mcmFnbWVudFN0YXJ0Lm5vZGVUeXBlID09PSAzKSB7XG5cdCAgICAgICAgdGhpcy5fZnJhZ21lbnRTdGFydC5kYXRhID0gdGhpcy5fZnJhZ21lbnRFbmQuZGF0YSA9ICcnO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuX2ZyYWdtZW50ID0gZWw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLiRlbCA9IGVsO1xuXHQgICAgfVxuXHQgICAgdGhpcy4kZWwuX192dWVfXyA9IHRoaXM7XG5cdCAgICB0aGlzLl9jYWxsSG9vaygnYmVmb3JlQ29tcGlsZScpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENyZWF0ZSBhbmQgYmluZCBhIGRpcmVjdGl2ZSB0byBhbiBlbGVtZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3IgLSBwYXJzZWQgZGlyZWN0aXZlIGRlc2NyaXB0b3Jcblx0ICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgICAtIHRhcmdldCBub2RlXG5cdCAgICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIHRyYW5zY2x1c2lvbiBob3N0IGNvbXBvbmVudFxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBvd25lciBmcmFnbWVudFxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9iaW5kRGlyID0gZnVuY3Rpb24gKGRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICB0aGlzLl9kaXJlY3RpdmVzLnB1c2gobmV3IERpcmVjdGl2ZShkZXNjcmlwdG9yLCB0aGlzLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZykpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRlYXJkb3duIGFuIGluc3RhbmNlLCB1bm9ic2VydmVzIHRoZSBkYXRhLCB1bmJpbmQgYWxsIHRoZVxuXHQgICAqIGRpcmVjdGl2ZXMsIHR1cm4gb2ZmIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzLCBldGMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZSAtIHdoZXRoZXIgdG8gcmVtb3ZlIHRoZSBET00gbm9kZS5cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cCAtIGlmIHRydWUsIGRlZmVyIGNsZWFudXAgdG9cblx0ICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlIGNhbGxlZCBsYXRlclxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9kZXN0cm95ID0gZnVuY3Rpb24gKHJlbW92ZSwgZGVmZXJDbGVhbnVwKSB7XG5cdCAgICBpZiAodGhpcy5faXNCZWluZ0Rlc3Ryb3llZCkge1xuXHQgICAgICBpZiAoIWRlZmVyQ2xlYW51cCkge1xuXHQgICAgICAgIHRoaXMuX2NsZWFudXAoKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGRlc3Ryb3lSZWFkeTtcblx0ICAgIHZhciBwZW5kaW5nUmVtb3ZhbDtcblx0XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAvLyBDbGVhbnVwIHNob3VsZCBiZSBjYWxsZWQgZWl0aGVyIHN5bmNocm9ub3VzbHkgb3IgYXN5bmNocm9ub3lzbHkgYXNcblx0ICAgIC8vIGNhbGxiYWNrIG9mIHRoaXMuJHJlbW92ZSgpLCBvciBpZiByZW1vdmUgYW5kIGRlZmVyQ2xlYW51cCBhcmUgZmFsc2UuXG5cdCAgICAvLyBJbiBhbnkgY2FzZSBpdCBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIGFsbCBvdGhlciByZW1vdmluZywgdW5iaW5kaW5nIGFuZFxuXHQgICAgLy8gdHVybmluZyBvZiBpcyBkb25lXG5cdCAgICB2YXIgY2xlYW51cElmUG9zc2libGUgPSBmdW5jdGlvbiBjbGVhbnVwSWZQb3NzaWJsZSgpIHtcblx0ICAgICAgaWYgKGRlc3Ryb3lSZWFkeSAmJiAhcGVuZGluZ1JlbW92YWwgJiYgIWRlZmVyQ2xlYW51cCkge1xuXHQgICAgICAgIHNlbGYuX2NsZWFudXAoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvLyByZW1vdmUgRE9NIGVsZW1lbnRcblx0ICAgIGlmIChyZW1vdmUgJiYgdGhpcy4kZWwpIHtcblx0ICAgICAgcGVuZGluZ1JlbW92YWwgPSB0cnVlO1xuXHQgICAgICB0aGlzLiRyZW1vdmUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHBlbmRpbmdSZW1vdmFsID0gZmFsc2U7XG5cdCAgICAgICAgY2xlYW51cElmUG9zc2libGUoKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2JlZm9yZURlc3Ryb3knKTtcblx0ICAgIHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgPSB0cnVlO1xuXHQgICAgdmFyIGk7XG5cdCAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHBhcmVudC4gb25seSBuZWNlc3Nhcnlcblx0ICAgIC8vIGlmIHBhcmVudCBpcyBub3QgYmVpbmcgZGVzdHJveWVkIGFzIHdlbGwuXG5cdCAgICB2YXIgcGFyZW50ID0gdGhpcy4kcGFyZW50O1xuXHQgICAgaWYgKHBhcmVudCAmJiAhcGFyZW50Ll9pc0JlaW5nRGVzdHJveWVkKSB7XG5cdCAgICAgIHBhcmVudC4kY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcblx0ICAgICAgLy8gdW5yZWdpc3RlciByZWYgKHJlbW92ZTogdHJ1ZSlcblx0ICAgICAgdGhpcy5fdXBkYXRlUmVmKHRydWUpO1xuXHQgICAgfVxuXHQgICAgLy8gZGVzdHJveSBhbGwgY2hpbGRyZW4uXG5cdCAgICBpID0gdGhpcy4kY2hpbGRyZW4ubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB0aGlzLiRjaGlsZHJlbltpXS4kZGVzdHJveSgpO1xuXHQgICAgfVxuXHQgICAgLy8gdGVhcmRvd24gcHJvcHNcblx0ICAgIGlmICh0aGlzLl9wcm9wc1VubGlua0ZuKSB7XG5cdCAgICAgIHRoaXMuX3Byb3BzVW5saW5rRm4oKTtcblx0ICAgIH1cblx0ICAgIC8vIHRlYXJkb3duIGFsbCBkaXJlY3RpdmVzLiB0aGlzIGFsc28gdGVhcnNkb3duIGFsbFxuXHQgICAgLy8gZGlyZWN0aXZlLW93bmVkIHdhdGNoZXJzLlxuXHQgICAgaWYgKHRoaXMuX3VubGlua0ZuKSB7XG5cdCAgICAgIHRoaXMuX3VubGlua0ZuKCk7XG5cdCAgICB9XG5cdCAgICBpID0gdGhpcy5fd2F0Y2hlcnMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB0aGlzLl93YXRjaGVyc1tpXS50ZWFyZG93bigpO1xuXHQgICAgfVxuXHQgICAgLy8gcmVtb3ZlIHJlZmVyZW5jZSB0byBzZWxmIG9uICRlbFxuXHQgICAgaWYgKHRoaXMuJGVsKSB7XG5cdCAgICAgIHRoaXMuJGVsLl9fdnVlX18gPSBudWxsO1xuXHQgICAgfVxuXHRcblx0ICAgIGRlc3Ryb3lSZWFkeSA9IHRydWU7XG5cdCAgICBjbGVhbnVwSWZQb3NzaWJsZSgpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENsZWFuIHVwIHRvIGVuc3VyZSBnYXJiYWdlIGNvbGxlY3Rpb24uXG5cdCAgICogVGhpcyBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGxlYXZlIHRyYW5zaXRpb24gaWYgdGhlcmVcblx0ICAgKiBpcyBhbnkuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAodGhpcy5faXNEZXN0cm95ZWQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSBvd25lciBmcmFnbWVudFxuXHQgICAgLy8gZG8gaXQgaW4gY2xlYW51cCBzbyB0aGF0IHdlIGNhbiBjYWxsICRkZXN0cm95IHdpdGhcblx0ICAgIC8vIGRlZmVyIHJpZ2h0IHdoZW4gYSBmcmFnbWVudCBpcyBhYm91dCB0byBiZSByZW1vdmVkLlxuXHQgICAgaWYgKHRoaXMuX2ZyYWcpIHtcblx0ICAgICAgdGhpcy5fZnJhZy5jaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xuXHQgICAgfVxuXHQgICAgLy8gcmVtb3ZlIHJlZmVyZW5jZSBmcm9tIGRhdGEgb2Jcblx0ICAgIC8vIGZyb3plbiBvYmplY3QgbWF5IG5vdCBoYXZlIG9ic2VydmVyLlxuXHQgICAgaWYgKHRoaXMuX2RhdGEgJiYgdGhpcy5fZGF0YS5fX29iX18pIHtcblx0ICAgICAgdGhpcy5fZGF0YS5fX29iX18ucmVtb3ZlVm0odGhpcyk7XG5cdCAgICB9XG5cdCAgICAvLyBDbGVhbiB1cCByZWZlcmVuY2VzIHRvIHByaXZhdGUgcHJvcGVydGllcyBhbmQgb3RoZXJcblx0ICAgIC8vIGluc3RhbmNlcy4gcHJlc2VydmUgcmVmZXJlbmNlIHRvIF9kYXRhIHNvIHRoYXQgcHJveHlcblx0ICAgIC8vIGFjY2Vzc29ycyBzdGlsbCB3b3JrLiBUaGUgb25seSBwb3RlbnRpYWwgc2lkZSBlZmZlY3Rcblx0ICAgIC8vIGhlcmUgaXMgdGhhdCBtdXRhdGluZyB0aGUgaW5zdGFuY2UgYWZ0ZXIgaXQncyBkZXN0cm95ZWRcblx0ICAgIC8vIG1heSBhZmZlY3QgdGhlIHN0YXRlIG9mIG90aGVyIGNvbXBvbmVudHMgdGhhdCBhcmUgc3RpbGxcblx0ICAgIC8vIG9ic2VydmluZyB0aGUgc2FtZSBvYmplY3QsIGJ1dCB0aGF0IHNlZW1zIHRvIGJlIGFcblx0ICAgIC8vIHJlYXNvbmFibGUgcmVzcG9uc2liaWxpdHkgZm9yIHRoZSB1c2VyIHJhdGhlciB0aGFuXG5cdCAgICAvLyBhbHdheXMgdGhyb3dpbmcgYW4gZXJyb3Igb24gdGhlbS5cblx0ICAgIHRoaXMuJGVsID0gdGhpcy4kcGFyZW50ID0gdGhpcy4kcm9vdCA9IHRoaXMuJGNoaWxkcmVuID0gdGhpcy5fd2F0Y2hlcnMgPSB0aGlzLl9jb250ZXh0ID0gdGhpcy5fc2NvcGUgPSB0aGlzLl9kaXJlY3RpdmVzID0gbnVsbDtcblx0ICAgIC8vIGNhbGwgdGhlIGxhc3QgaG9vay4uLlxuXHQgICAgdGhpcy5faXNEZXN0cm95ZWQgPSB0cnVlO1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2Rlc3Ryb3llZCcpO1xuXHQgICAgLy8gdHVybiBvZmYgYWxsIGluc3RhbmNlIGxpc3RlbmVycy5cblx0ICAgIHRoaXMuJG9mZigpO1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1pc2NNaXhpbiAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogQXBwbHkgYSBsaXN0IG9mIGZpbHRlciAoZGVzY3JpcHRvcnMpIHRvIGEgdmFsdWUuXG5cdCAgICogVXNpbmcgcGxhaW4gZm9yIGxvb3BzIGhlcmUgYmVjYXVzZSB0aGlzIHdpbGwgYmUgY2FsbGVkIGluXG5cdCAgICogdGhlIGdldHRlciBvZiBhbnkgd2F0Y2hlciB3aXRoIGZpbHRlcnMgc28gaXQgaXMgdmVyeVxuXHQgICAqIHBlcmZvcm1hbmNlIHNlbnNpdGl2ZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgKiBAcGFyYW0geyp9IFtvbGRWYWx1ZV1cblx0ICAgKiBAcGFyYW0ge0FycmF5fSBmaWx0ZXJzXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSB3cml0ZVxuXHQgICAqIEByZXR1cm4geyp9XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2FwcGx5RmlsdGVycyA9IGZ1bmN0aW9uICh2YWx1ZSwgb2xkVmFsdWUsIGZpbHRlcnMsIHdyaXRlKSB7XG5cdCAgICB2YXIgZmlsdGVyLCBmbiwgYXJncywgYXJnLCBvZmZzZXQsIGksIGwsIGosIGs7XG5cdCAgICBmb3IgKGkgPSAwLCBsID0gZmlsdGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgZmlsdGVyID0gZmlsdGVyc1t3cml0ZSA/IGwgLSBpIC0gMSA6IGldO1xuXHQgICAgICBmbiA9IHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlci5uYW1lLCB0cnVlKTtcblx0ICAgICAgaWYgKCFmbikgY29udGludWU7XG5cdCAgICAgIGZuID0gd3JpdGUgPyBmbi53cml0ZSA6IGZuLnJlYWQgfHwgZm47XG5cdCAgICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIGNvbnRpbnVlO1xuXHQgICAgICBhcmdzID0gd3JpdGUgPyBbdmFsdWUsIG9sZFZhbHVlXSA6IFt2YWx1ZV07XG5cdCAgICAgIG9mZnNldCA9IHdyaXRlID8gMiA6IDE7XG5cdCAgICAgIGlmIChmaWx0ZXIuYXJncykge1xuXHQgICAgICAgIGZvciAoaiA9IDAsIGsgPSBmaWx0ZXIuYXJncy5sZW5ndGg7IGogPCBrOyBqKyspIHtcblx0ICAgICAgICAgIGFyZyA9IGZpbHRlci5hcmdzW2pdO1xuXHQgICAgICAgICAgYXJnc1tqICsgb2Zmc2V0XSA9IGFyZy5keW5hbWljID8gdGhpcy4kZ2V0KGFyZy52YWx1ZSkgOiBhcmcudmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHZhbHVlID0gZm4uYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVzb2x2ZSBhIGNvbXBvbmVudCwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGNvbXBvbmVudFxuXHQgICAqIGlzIGRlZmluZWQgbm9ybWFsbHkgb3IgdXNpbmcgYW4gYXN5bmMgZmFjdG9yeSBmdW5jdGlvbi5cblx0ICAgKiBSZXNvbHZlcyBzeW5jaHJvbm91c2x5IGlmIGFscmVhZHkgcmVzb2x2ZWQsIG90aGVyd2lzZVxuXHQgICAqIHJlc29sdmVzIGFzeW5jaHJvbm91c2x5IGFuZCBjYWNoZXMgdGhlIHJlc29sdmVkXG5cdCAgICogY29uc3RydWN0b3Igb24gdGhlIGZhY3RvcnkuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9yZXNvbHZlQ29tcG9uZW50ID0gZnVuY3Rpb24gKHZhbHVlLCBjYikge1xuXHQgICAgdmFyIGZhY3Rvcnk7XG5cdCAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIGZhY3RvcnkgPSB2YWx1ZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGZhY3RvcnkgPSByZXNvbHZlQXNzZXQodGhpcy4kb3B0aW9ucywgJ2NvbXBvbmVudHMnLCB2YWx1ZSwgdHJ1ZSk7XG5cdCAgICB9XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghZmFjdG9yeSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICAvLyBhc3luYyBjb21wb25lbnQgZmFjdG9yeVxuXHQgICAgaWYgKCFmYWN0b3J5Lm9wdGlvbnMpIHtcblx0ICAgICAgaWYgKGZhY3RvcnkucmVzb2x2ZWQpIHtcblx0ICAgICAgICAvLyBjYWNoZWRcblx0ICAgICAgICBjYihmYWN0b3J5LnJlc29sdmVkKTtcblx0ICAgICAgfSBlbHNlIGlmIChmYWN0b3J5LnJlcXVlc3RlZCkge1xuXHQgICAgICAgIC8vIHBvb2wgY2FsbGJhY2tzXG5cdCAgICAgICAgZmFjdG9yeS5wZW5kaW5nQ2FsbGJhY2tzLnB1c2goY2IpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGZhY3RvcnkucmVxdWVzdGVkID0gdHJ1ZTtcblx0ICAgICAgICB2YXIgY2JzID0gZmFjdG9yeS5wZW5kaW5nQ2FsbGJhY2tzID0gW2NiXTtcblx0ICAgICAgICBmYWN0b3J5LmNhbGwodGhpcywgZnVuY3Rpb24gcmVzb2x2ZShyZXMpIHtcblx0ICAgICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHJlcykpIHtcblx0ICAgICAgICAgICAgcmVzID0gVnVlLmV4dGVuZChyZXMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgLy8gY2FjaGUgcmVzb2x2ZWRcblx0ICAgICAgICAgIGZhY3RvcnkucmVzb2x2ZWQgPSByZXM7XG5cdCAgICAgICAgICAvLyBpbnZva2UgY2FsbGJhY2tzXG5cdCAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICAgICAgY2JzW2ldKHJlcyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwgZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuXHQgICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdGYWlsZWQgdG8gcmVzb2x2ZSBhc3luYyBjb21wb25lbnQnICsgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyAnOiAnICsgdmFsdWUgOiAnJykgKyAnLiAnICsgKHJlYXNvbiA/ICdcXG5SZWFzb246ICcgKyByZWFzb24gOiAnJykpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBub3JtYWwgY29tcG9uZW50XG5cdCAgICAgIGNiKGZhY3RvcnkpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdHZhciBmaWx0ZXJSRSQxID0gL1tefF1cXHxbXnxdLztcblx0XG5cdGZ1bmN0aW9uIGRhdGFBUEkgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIEdldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXG5cdCAgICogQHJldHVybiB7Kn1cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZ2V0ID0gZnVuY3Rpb24gKGV4cCwgYXNTdGF0ZW1lbnQpIHtcblx0ICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwKTtcblx0ICAgIGlmIChyZXMpIHtcblx0ICAgICAgaWYgKGFzU3RhdGVtZW50KSB7XG5cdCAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICAgIHJldHVybiBmdW5jdGlvbiBzdGF0ZW1lbnRIYW5kbGVyKCkge1xuXHQgICAgICAgICAgc2VsZi4kYXJndW1lbnRzID0gdG9BcnJheShhcmd1bWVudHMpO1xuXHQgICAgICAgICAgdmFyIHJlc3VsdCA9IHJlcy5nZXQuY2FsbChzZWxmLCBzZWxmKTtcblx0ICAgICAgICAgIHNlbGYuJGFyZ3VtZW50cyA9IG51bGw7XG5cdCAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuXHQgICAgICAgIH07XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHJldHVybiByZXMuZ2V0LmNhbGwodGhpcywgdGhpcyk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG5cdCAgICogVGhlIGV4cHJlc3Npb24gbXVzdCBiZSBhIHZhbGlkIGxlZnQtaGFuZFxuXHQgICAqIGV4cHJlc3Npb24gaW4gYW4gYXNzaWdubWVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICAgKiBAcGFyYW0geyp9IHZhbFxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRzZXQgPSBmdW5jdGlvbiAoZXhwLCB2YWwpIHtcblx0ICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwLCB0cnVlKTtcblx0ICAgIGlmIChyZXMgJiYgcmVzLnNldCkge1xuXHQgICAgICByZXMuc2V0LmNhbGwodGhpcywgdGhpcywgdmFsKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBEZWxldGUgYSBwcm9wZXJ0eSBvbiB0aGUgVk1cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgZGVsKHRoaXMuX2RhdGEsIGtleSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogV2F0Y2ggYW4gZXhwcmVzc2lvbiwgdHJpZ2dlciBjYWxsYmFjayB3aGVuIGl0c1xuXHQgICAqIHZhbHVlIGNoYW5nZXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gZXhwT3JGblxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuXHQgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBkZWVwXG5cdCAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGltbWVkaWF0ZVxuXHQgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSAtIHVud2F0Y2hGblxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiR3YXRjaCA9IGZ1bmN0aW9uIChleHBPckZuLCBjYiwgb3B0aW9ucykge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblx0ICAgIHZhciBwYXJzZWQ7XG5cdCAgICBpZiAodHlwZW9mIGV4cE9yRm4gPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKGV4cE9yRm4pO1xuXHQgICAgICBleHBPckZuID0gcGFyc2VkLmV4cHJlc3Npb247XG5cdCAgICB9XG5cdCAgICB2YXIgd2F0Y2hlciA9IG5ldyBXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwge1xuXHQgICAgICBkZWVwOiBvcHRpb25zICYmIG9wdGlvbnMuZGVlcCxcblx0ICAgICAgc3luYzogb3B0aW9ucyAmJiBvcHRpb25zLnN5bmMsXG5cdCAgICAgIGZpbHRlcnM6IHBhcnNlZCAmJiBwYXJzZWQuZmlsdGVycyxcblx0ICAgICAgdXNlcjogIW9wdGlvbnMgfHwgb3B0aW9ucy51c2VyICE9PSBmYWxzZVxuXHQgICAgfSk7XG5cdCAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmltbWVkaWF0ZSkge1xuXHQgICAgICBjYi5jYWxsKHZtLCB3YXRjaGVyLnZhbHVlKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmdW5jdGlvbiB1bndhdGNoRm4oKSB7XG5cdCAgICAgIHdhdGNoZXIudGVhcmRvd24oKTtcblx0ICAgIH07XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogRXZhbHVhdGUgYSB0ZXh0IGRpcmVjdGl2ZSwgaW5jbHVkaW5nIGZpbHRlcnMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FzU3RhdGVtZW50XVxuXHQgICAqIEByZXR1cm4ge1N0cmluZ31cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZXZhbCA9IGZ1bmN0aW9uICh0ZXh0LCBhc1N0YXRlbWVudCkge1xuXHQgICAgLy8gY2hlY2sgZm9yIGZpbHRlcnMuXG5cdCAgICBpZiAoZmlsdGVyUkUkMS50ZXN0KHRleHQpKSB7XG5cdCAgICAgIHZhciBkaXIgPSBwYXJzZURpcmVjdGl2ZSh0ZXh0KTtcblx0ICAgICAgLy8gdGhlIGZpbHRlciByZWdleCBjaGVjayBtaWdodCBnaXZlIGZhbHNlIHBvc2l0aXZlXG5cdCAgICAgIC8vIGZvciBwaXBlcyBpbnNpZGUgc3RyaW5ncywgc28gaXQncyBwb3NzaWJsZSB0aGF0XG5cdCAgICAgIC8vIHdlIGRvbid0IGdldCBhbnkgZmlsdGVycyBoZXJlXG5cdCAgICAgIHZhciB2YWwgPSB0aGlzLiRnZXQoZGlyLmV4cHJlc3Npb24sIGFzU3RhdGVtZW50KTtcblx0ICAgICAgcmV0dXJuIGRpci5maWx0ZXJzID8gdGhpcy5fYXBwbHlGaWx0ZXJzKHZhbCwgbnVsbCwgZGlyLmZpbHRlcnMpIDogdmFsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gbm8gZmlsdGVyXG5cdCAgICAgIHJldHVybiB0aGlzLiRnZXQodGV4dCwgYXNTdGF0ZW1lbnQpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEludGVycG9sYXRlIGEgcGllY2Ugb2YgdGVtcGxhdGUgdGV4dC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG5cdCAgICogQHJldHVybiB7U3RyaW5nfVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRpbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uICh0ZXh0KSB7XG5cdCAgICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KHRleHQpO1xuXHQgICAgdmFyIHZtID0gdGhpcztcblx0ICAgIGlmICh0b2tlbnMpIHtcblx0ICAgICAgaWYgKHRva2Vucy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICByZXR1cm4gdm0uJGV2YWwodG9rZW5zWzBdLnZhbHVlKSArICcnO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiB0b2tlbnMubWFwKGZ1bmN0aW9uICh0b2tlbikge1xuXHQgICAgICAgICAgcmV0dXJuIHRva2VuLnRhZyA/IHZtLiRldmFsKHRva2VuLnZhbHVlKSA6IHRva2VuLnZhbHVlO1xuXHQgICAgICAgIH0pLmpvaW4oJycpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gdGV4dDtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBMb2cgaW5zdGFuY2UgZGF0YSBhcyBhIHBsYWluIEpTIG9iamVjdFxuXHQgICAqIHNvIHRoYXQgaXQgaXMgZWFzaWVyIHRvIGluc3BlY3QgaW4gY29uc29sZS5cblx0ICAgKiBUaGlzIG1ldGhvZCBhc3N1bWVzIGNvbnNvbGUgaXMgYXZhaWxhYmxlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IFtwYXRoXVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRsb2cgPSBmdW5jdGlvbiAocGF0aCkge1xuXHQgICAgdmFyIGRhdGEgPSBwYXRoID8gZ2V0UGF0aCh0aGlzLl9kYXRhLCBwYXRoKSA6IHRoaXMuX2RhdGE7XG5cdCAgICBpZiAoZGF0YSkge1xuXHQgICAgICBkYXRhID0gY2xlYW4oZGF0YSk7XG5cdCAgICB9XG5cdCAgICAvLyBpbmNsdWRlIGNvbXB1dGVkIGZpZWxkc1xuXHQgICAgaWYgKCFwYXRoKSB7XG5cdCAgICAgIHZhciBrZXk7XG5cdCAgICAgIGZvciAoa2V5IGluIHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQpIHtcblx0ICAgICAgICBkYXRhW2tleV0gPSBjbGVhbih0aGlzW2tleV0pO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICh0aGlzLl9wcm9wcykge1xuXHQgICAgICAgIGZvciAoa2V5IGluIHRoaXMuX3Byb3BzKSB7XG5cdCAgICAgICAgICBkYXRhW2tleV0gPSBjbGVhbih0aGlzW2tleV0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgY29uc29sZS5sb2coZGF0YSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogXCJjbGVhblwiIGEgZ2V0dGVyL3NldHRlciBjb252ZXJ0ZWQgb2JqZWN0IGludG8gYSBwbGFpblxuXHQgICAqIG9iamVjdCBjb3B5LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IC0gb2JqXG5cdCAgICogQHJldHVybiB7T2JqZWN0fVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjbGVhbihvYmopIHtcblx0ICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZG9tQVBJIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBDb252ZW5pZW5jZSBvbi1pbnN0YW5jZSBuZXh0VGljay4gVGhlIGNhbGxiYWNrIGlzXG5cdCAgICogYXV0by1ib3VuZCB0byB0aGUgaW5zdGFuY2UsIGFuZCB0aGlzIGF2b2lkcyBjb21wb25lbnRcblx0ICAgKiBtb2R1bGVzIGhhdmluZyB0byByZWx5IG9uIHRoZSBnbG9iYWwgVnVlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kbmV4dFRpY2sgPSBmdW5jdGlvbiAoZm4pIHtcblx0ICAgIG5leHRUaWNrKGZuLCB0aGlzKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBBcHBlbmQgaW5zdGFuY2UgdG8gdGFyZ2V0XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGFwcGVuZFRvID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgICByZXR1cm4gaW5zZXJ0KHRoaXMsIHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uLCBhcHBlbmQsIGFwcGVuZFdpdGhUcmFuc2l0aW9uKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBQcmVwZW5kIGluc3RhbmNlIHRvIHRhcmdldFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRwcmVwZW5kVG8gPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XG5cdCAgICBpZiAodGFyZ2V0Lmhhc0NoaWxkTm9kZXMoKSkge1xuXHQgICAgICB0aGlzLiRiZWZvcmUodGFyZ2V0LmZpcnN0Q2hpbGQsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbnNlcnQgaW5zdGFuY2UgYmVmb3JlIHRhcmdldFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRiZWZvcmUgPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICAgIHJldHVybiBpbnNlcnQodGhpcywgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIGJlZm9yZVdpdGhDYiwgYmVmb3JlV2l0aFRyYW5zaXRpb24pO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluc2VydCBpbnN0YW5jZSBhZnRlciB0YXJnZXRcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kYWZ0ZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XG5cdCAgICBpZiAodGFyZ2V0Lm5leHRTaWJsaW5nKSB7XG5cdCAgICAgIHRoaXMuJGJlZm9yZSh0YXJnZXQubmV4dFNpYmxpbmcsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQucGFyZW50Tm9kZSwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZSBpbnN0YW5jZSBmcm9tIERPTVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kcmVtb3ZlID0gZnVuY3Rpb24gKGNiLCB3aXRoVHJhbnNpdGlvbikge1xuXHQgICAgaWYgKCF0aGlzLiRlbC5wYXJlbnROb2RlKSB7XG5cdCAgICAgIHJldHVybiBjYiAmJiBjYigpO1xuXHQgICAgfVxuXHQgICAgdmFyIGluRG9jdW1lbnQgPSB0aGlzLl9pc0F0dGFjaGVkICYmIGluRG9jKHRoaXMuJGVsKTtcblx0ICAgIC8vIGlmIHdlIGFyZSBub3QgaW4gZG9jdW1lbnQsIG5vIG5lZWQgdG8gY2hlY2tcblx0ICAgIC8vIGZvciB0cmFuc2l0aW9uc1xuXHQgICAgaWYgKCFpbkRvY3VtZW50KSB3aXRoVHJhbnNpdGlvbiA9IGZhbHNlO1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIHJlYWxDYiA9IGZ1bmN0aW9uIHJlYWxDYigpIHtcblx0ICAgICAgaWYgKGluRG9jdW1lbnQpIHNlbGYuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuXHQgICAgICBpZiAoY2IpIGNiKCk7XG5cdCAgICB9O1xuXHQgICAgaWYgKHRoaXMuX2lzRnJhZ21lbnQpIHtcblx0ICAgICAgcmVtb3ZlTm9kZVJhbmdlKHRoaXMuX2ZyYWdtZW50U3RhcnQsIHRoaXMuX2ZyYWdtZW50RW5kLCB0aGlzLCB0aGlzLl9mcmFnbWVudCwgcmVhbENiKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBvcCA9IHdpdGhUcmFuc2l0aW9uID09PSBmYWxzZSA/IHJlbW92ZVdpdGhDYiA6IHJlbW92ZVdpdGhUcmFuc2l0aW9uO1xuXHQgICAgICBvcCh0aGlzLiRlbCwgdGhpcywgcmVhbENiKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNoYXJlZCBET00gaW5zZXJ0aW9uIGZ1bmN0aW9uLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3AxIC0gb3AgZm9yIG5vbi10cmFuc2l0aW9uIGluc2VydFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMiAtIG9wIGZvciB0cmFuc2l0aW9uIGluc2VydFxuXHQgICAqIEByZXR1cm4gdm1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gaW5zZXJ0KHZtLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgb3AxLCBvcDIpIHtcblx0ICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XG5cdCAgICB2YXIgdGFyZ2V0SXNEZXRhY2hlZCA9ICFpbkRvYyh0YXJnZXQpO1xuXHQgICAgdmFyIG9wID0gd2l0aFRyYW5zaXRpb24gPT09IGZhbHNlIHx8IHRhcmdldElzRGV0YWNoZWQgPyBvcDEgOiBvcDI7XG5cdCAgICB2YXIgc2hvdWxkQ2FsbEhvb2sgPSAhdGFyZ2V0SXNEZXRhY2hlZCAmJiAhdm0uX2lzQXR0YWNoZWQgJiYgIWluRG9jKHZtLiRlbCk7XG5cdCAgICBpZiAodm0uX2lzRnJhZ21lbnQpIHtcblx0ICAgICAgbWFwTm9kZVJhbmdlKHZtLl9mcmFnbWVudFN0YXJ0LCB2bS5fZnJhZ21lbnRFbmQsIGZ1bmN0aW9uIChub2RlKSB7XG5cdCAgICAgICAgb3Aobm9kZSwgdGFyZ2V0LCB2bSk7XG5cdCAgICAgIH0pO1xuXHQgICAgICBjYiAmJiBjYigpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb3Aodm0uJGVsLCB0YXJnZXQsIHZtLCBjYik7XG5cdCAgICB9XG5cdCAgICBpZiAoc2hvdWxkQ2FsbEhvb2spIHtcblx0ICAgICAgdm0uX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHZtO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgZm9yIHNlbGVjdG9yc1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gZWxcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcXVlcnkoZWwpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgZWwgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCkgOiBlbDtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEFwcGVuZCBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSBlbFxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBhcHBlbmQoZWwsIHRhcmdldCwgdm0sIGNiKSB7XG5cdCAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgICAgaWYgKGNiKSBjYigpO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogSW5zZXJ0QmVmb3JlIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IGVsXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGJlZm9yZVdpdGhDYihlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcblx0ICAgIGJlZm9yZShlbCwgdGFyZ2V0KTtcblx0ICAgIGlmIChjYikgY2IoKTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZSBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSBlbFxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVtb3ZlV2l0aENiKGVsLCB2bSwgY2IpIHtcblx0ICAgIHJlbW92ZShlbCk7XG5cdCAgICBpZiAoY2IpIGNiKCk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBldmVudHNBUEkgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIExpc3RlbiBvbiB0aGUgZ2l2ZW4gYGV2ZW50YCB3aXRoIGBmbmAuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRvbiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcblx0ICAgICh0aGlzLl9ldmVudHNbZXZlbnRdIHx8ICh0aGlzLl9ldmVudHNbZXZlbnRdID0gW10pKS5wdXNoKGZuKTtcblx0ICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIDEpO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQWRkcyBhbiBgZXZlbnRgIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBpbnZva2VkIGEgc2luZ2xlXG5cdCAgICogdGltZSB0aGVuIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJG9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICBmdW5jdGlvbiBvbigpIHtcblx0ICAgICAgc2VsZi4kb2ZmKGV2ZW50LCBvbik7XG5cdCAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgICBvbi5mbiA9IGZuO1xuXHQgICAgdGhpcy4kb24oZXZlbnQsIG9uKTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgZm9yIGBldmVudGAgb3IgYWxsXG5cdCAgICogcmVnaXN0ZXJlZCBjYWxsYmFja3MuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRvZmYgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG5cdCAgICB2YXIgY2JzO1xuXHQgICAgLy8gYWxsXG5cdCAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcblx0ICAgICAgaWYgKHRoaXMuJHBhcmVudCkge1xuXHQgICAgICAgIGZvciAoZXZlbnQgaW4gdGhpcy5fZXZlbnRzKSB7XG5cdCAgICAgICAgICBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuXHQgICAgICAgICAgaWYgKGNicykge1xuXHQgICAgICAgICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtY2JzLmxlbmd0aCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICAgIC8vIHNwZWNpZmljIGV2ZW50XG5cdCAgICBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuXHQgICAgaWYgKCFjYnMpIHtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtY2JzLmxlbmd0aCk7XG5cdCAgICAgIHRoaXMuX2V2ZW50c1tldmVudF0gPSBudWxsO1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICAgIC8vIHNwZWNpZmljIGhhbmRsZXJcblx0ICAgIHZhciBjYjtcblx0ICAgIHZhciBpID0gY2JzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgY2IgPSBjYnNbaV07XG5cdCAgICAgIGlmIChjYiA9PT0gZm4gfHwgY2IuZm4gPT09IGZuKSB7XG5cdCAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLTEpO1xuXHQgICAgICAgIGNicy5zcGxpY2UoaSwgMSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRyaWdnZXIgYW4gZXZlbnQgb24gc2VsZi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gZXZlbnRcblx0ICAgKiBAcmV0dXJuIHtCb29sZWFufSBzaG91bGRQcm9wYWdhdGVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZW1pdCA9IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgdmFyIGlzU291cmNlID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJztcblx0ICAgIGV2ZW50ID0gaXNTb3VyY2UgPyBldmVudCA6IGV2ZW50Lm5hbWU7XG5cdCAgICB2YXIgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcblx0ICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSBpc1NvdXJjZSB8fCAhY2JzO1xuXHQgICAgaWYgKGNicykge1xuXHQgICAgICBjYnMgPSBjYnMubGVuZ3RoID4gMSA/IHRvQXJyYXkoY2JzKSA6IGNicztcblx0ICAgICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGhhY2t5IHNvbHV0aW9uIHRvIHRoZSBxdWVzdGlvbiByYWlzZWRcblx0ICAgICAgLy8gaW4gIzIxMDI6IGZvciBhbiBpbmxpbmUgY29tcG9uZW50IGxpc3RlbmVyIGxpa2UgPGNvbXAgQHRlc3Q9XCJkb1RoaXNcIj4sXG5cdCAgICAgIC8vIHRoZSBwcm9wYWdhdGlvbiBoYW5kbGluZyBpcyBzb21ld2hhdCBicm9rZW4uIFRoZXJlZm9yZSB3ZVxuXHQgICAgICAvLyBuZWVkIHRvIHRyZWF0IHRoZXNlIGlubGluZSBjYWxsYmFja3MgZGlmZmVyZW50bHkuXG5cdCAgICAgIHZhciBoYXNQYXJlbnRDYnMgPSBpc1NvdXJjZSAmJiBjYnMuc29tZShmdW5jdGlvbiAoY2IpIHtcblx0ICAgICAgICByZXR1cm4gY2IuX2Zyb21QYXJlbnQ7XG5cdCAgICAgIH0pO1xuXHQgICAgICBpZiAoaGFzUGFyZW50Q2JzKSB7XG5cdCAgICAgICAgc2hvdWxkUHJvcGFnYXRlID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHZhciBjYiA9IGNic1tpXTtcblx0ICAgICAgICB2YXIgcmVzID0gY2IuYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICAgICAgaWYgKHJlcyA9PT0gdHJ1ZSAmJiAoIWhhc1BhcmVudENicyB8fCBjYi5fZnJvbVBhcmVudCkpIHtcblx0ICAgICAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gc2hvdWxkUHJvcGFnYXRlO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlY3Vyc2l2ZWx5IGJyb2FkY2FzdCBhbiBldmVudCB0byBhbGwgY2hpbGRyZW4gaW5zdGFuY2VzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBldmVudFxuXHQgICAqIEBwYXJhbSB7Li4uKn0gYWRkaXRpb25hbCBhcmd1bWVudHNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kYnJvYWRjYXN0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICB2YXIgaXNTb3VyY2UgPSB0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnO1xuXHQgICAgZXZlbnQgPSBpc1NvdXJjZSA/IGV2ZW50IDogZXZlbnQubmFtZTtcblx0ICAgIC8vIGlmIG5vIGNoaWxkIGhhcyByZWdpc3RlcmVkIGZvciB0aGlzIGV2ZW50LFxuXHQgICAgLy8gdGhlbiB0aGVyZSdzIG5vIG5lZWQgdG8gYnJvYWRjYXN0LlxuXHQgICAgaWYgKCF0aGlzLl9ldmVudHNDb3VudFtldmVudF0pIHJldHVybjtcblx0ICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuJGNoaWxkcmVuO1xuXHQgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG5cdCAgICBpZiAoaXNTb3VyY2UpIHtcblx0ICAgICAgLy8gdXNlIG9iamVjdCBldmVudCB0byBpbmRpY2F0ZSBub24tc291cmNlIGVtaXRcblx0ICAgICAgLy8gb24gY2hpbGRyZW5cblx0ICAgICAgYXJnc1swXSA9IHsgbmFtZTogZXZlbnQsIHNvdXJjZTogdGhpcyB9O1xuXHQgICAgfVxuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV07XG5cdCAgICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSBjaGlsZC4kZW1pdC5hcHBseShjaGlsZCwgYXJncyk7XG5cdCAgICAgIGlmIChzaG91bGRQcm9wYWdhdGUpIHtcblx0ICAgICAgICBjaGlsZC4kYnJvYWRjYXN0LmFwcGx5KGNoaWxkLCBhcmdzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVjdXJzaXZlbHkgcHJvcGFnYXRlIGFuIGV2ZW50IHVwIHRoZSBwYXJlbnQgY2hhaW4uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICAgKiBAcGFyYW0gey4uLip9IGFkZGl0aW9uYWwgYXJndW1lbnRzXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGRpc3BhdGNoID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gdGhpcy4kZW1pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgaWYgKCFzaG91bGRQcm9wYWdhdGUpIHJldHVybjtcblx0ICAgIHZhciBwYXJlbnQgPSB0aGlzLiRwYXJlbnQ7XG5cdCAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcblx0ICAgIC8vIHVzZSBvYmplY3QgZXZlbnQgdG8gaW5kaWNhdGUgbm9uLXNvdXJjZSBlbWl0XG5cdCAgICAvLyBvbiBwYXJlbnRzXG5cdCAgICBhcmdzWzBdID0geyBuYW1lOiBldmVudCwgc291cmNlOiB0aGlzIH07XG5cdCAgICB3aGlsZSAocGFyZW50KSB7XG5cdCAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IHBhcmVudC4kZW1pdC5hcHBseShwYXJlbnQsIGFyZ3MpO1xuXHQgICAgICBwYXJlbnQgPSBzaG91bGRQcm9wYWdhdGUgPyBwYXJlbnQuJHBhcmVudCA6IG51bGw7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBNb2RpZnkgdGhlIGxpc3RlbmVyIGNvdW50cyBvbiBhbGwgcGFyZW50cy5cblx0ICAgKiBUaGlzIGJvb2trZWVwaW5nIGFsbG93cyAkYnJvYWRjYXN0IHRvIHJldHVybiBlYXJseSB3aGVuXG5cdCAgICogbm8gY2hpbGQgaGFzIGxpc3RlbmVkIHRvIGEgY2VydGFpbiBldmVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudFxuXHQgICAqL1xuXHRcblx0ICB2YXIgaG9va1JFID0gL15ob29rOi87XG5cdCAgZnVuY3Rpb24gbW9kaWZ5TGlzdGVuZXJDb3VudCh2bSwgZXZlbnQsIGNvdW50KSB7XG5cdCAgICB2YXIgcGFyZW50ID0gdm0uJHBhcmVudDtcblx0ICAgIC8vIGhvb2tzIGRvIG5vdCBnZXQgYnJvYWRjYXN0ZWQgc28gbm8gbmVlZFxuXHQgICAgLy8gdG8gZG8gYm9va2tlZXBpbmcgZm9yIHRoZW1cblx0ICAgIGlmICghcGFyZW50IHx8ICFjb3VudCB8fCBob29rUkUudGVzdChldmVudCkpIHJldHVybjtcblx0ICAgIHdoaWxlIChwYXJlbnQpIHtcblx0ICAgICAgcGFyZW50Ll9ldmVudHNDb3VudFtldmVudF0gPSAocGFyZW50Ll9ldmVudHNDb3VudFtldmVudF0gfHwgMCkgKyBjb3VudDtcblx0ICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBsaWZlY3ljbGVBUEkgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIFNldCBpbnN0YW5jZSB0YXJnZXQgZWxlbWVudCBhbmQga2ljayBvZmYgdGhlIGNvbXBpbGF0aW9uXG5cdCAgICogcHJvY2Vzcy4gVGhlIHBhc3NlZCBpbiBgZWxgIGNhbiBiZSBhIHNlbGVjdG9yIHN0cmluZywgYW5cblx0ICAgKiBleGlzdGluZyBFbGVtZW50LCBvciBhIERvY3VtZW50RnJhZ21lbnQgKGZvciBibG9ja1xuXHQgICAqIGluc3RhbmNlcykuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudHxzdHJpbmd9IGVsXG5cdCAgICogQHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRtb3VudCA9IGZ1bmN0aW9uIChlbCkge1xuXHQgICAgaWYgKHRoaXMuX2lzQ29tcGlsZWQpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCckbW91bnQoKSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZS4nLCB0aGlzKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZWwgPSBxdWVyeShlbCk7XG5cdCAgICBpZiAoIWVsKSB7XG5cdCAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICB9XG5cdCAgICB0aGlzLl9jb21waWxlKGVsKTtcblx0ICAgIHRoaXMuX2luaXRET01Ib29rcygpO1xuXHQgICAgaWYgKGluRG9jKHRoaXMuJGVsKSkge1xuXHQgICAgICB0aGlzLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcblx0ICAgICAgcmVhZHkuY2FsbCh0aGlzKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuJG9uY2UoJ2hvb2s6YXR0YWNoZWQnLCByZWFkeSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBNYXJrIGFuIGluc3RhbmNlIGFzIHJlYWR5LlxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZWFkeSgpIHtcblx0ICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlO1xuXHQgICAgdGhpcy5faXNSZWFkeSA9IHRydWU7XG5cdCAgICB0aGlzLl9jYWxsSG9vaygncmVhZHknKTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRlYXJkb3duIHRoZSBpbnN0YW5jZSwgc2ltcGx5IGRlbGVnYXRlIHRvIHRoZSBpbnRlcm5hbFxuXHQgICAqIF9kZXN0cm95LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmVcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cFxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRkZXN0cm95ID0gZnVuY3Rpb24gKHJlbW92ZSwgZGVmZXJDbGVhbnVwKSB7XG5cdCAgICB0aGlzLl9kZXN0cm95KHJlbW92ZSwgZGVmZXJDbGVhbnVwKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBQYXJ0aWFsbHkgY29tcGlsZSBhIHBpZWNlIG9mIERPTSBhbmQgcmV0dXJuIGFcblx0ICAgKiBkZWNvbXBpbGUgZnVuY3Rpb24uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ11cblx0ICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kY29tcGlsZSA9IGZ1bmN0aW9uIChlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIHJldHVybiBjb21waWxlKGVsLCB0aGlzLiRvcHRpb25zLCB0cnVlKSh0aGlzLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUaGUgZXhwb3NlZCBWdWUgY29uc3RydWN0b3IuXG5cdCAqXG5cdCAqIEFQSSBjb252ZW50aW9uczpcblx0ICogLSBwdWJsaWMgQVBJIG1ldGhvZHMvcHJvcGVydGllcyBhcmUgcHJlZml4ZWQgd2l0aCBgJGBcblx0ICogLSBpbnRlcm5hbCBtZXRob2RzL3Byb3BlcnRpZXMgYXJlIHByZWZpeGVkIHdpdGggYF9gXG5cdCAqIC0gbm9uLXByZWZpeGVkIHByb3BlcnRpZXMgYXJlIGFzc3VtZWQgdG8gYmUgcHJveGllZCB1c2VyXG5cdCAqICAgZGF0YS5cblx0ICpcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICogQHB1YmxpY1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIFZ1ZShvcHRpb25zKSB7XG5cdCAgdGhpcy5faW5pdChvcHRpb25zKTtcblx0fVxuXHRcblx0Ly8gaW5zdGFsbCBpbnRlcm5hbHNcblx0aW5pdE1peGluKFZ1ZSk7XG5cdHN0YXRlTWl4aW4oVnVlKTtcblx0ZXZlbnRzTWl4aW4oVnVlKTtcblx0bGlmZWN5Y2xlTWl4aW4oVnVlKTtcblx0bWlzY01peGluKFZ1ZSk7XG5cdFxuXHQvLyBpbnN0YWxsIGluc3RhbmNlIEFQSXNcblx0ZGF0YUFQSShWdWUpO1xuXHRkb21BUEkoVnVlKTtcblx0ZXZlbnRzQVBJKFZ1ZSk7XG5cdGxpZmVjeWNsZUFQSShWdWUpO1xuXHRcblx0dmFyIHNsb3QgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBTTE9ULFxuXHQgIHBhcmFtczogWyduYW1lJ10sXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyB0aGlzIHdhcyByZXNvbHZlZCBkdXJpbmcgY29tcG9uZW50IHRyYW5zY2x1c2lvblxuXHQgICAgdmFyIG5hbWUgPSB0aGlzLnBhcmFtcy5uYW1lIHx8ICdkZWZhdWx0Jztcblx0ICAgIHZhciBjb250ZW50ID0gdGhpcy52bS5fc2xvdENvbnRlbnRzICYmIHRoaXMudm0uX3Nsb3RDb250ZW50c1tuYW1lXTtcblx0ICAgIGlmICghY29udGVudCB8fCAhY29udGVudC5oYXNDaGlsZE5vZGVzKCkpIHtcblx0ICAgICAgdGhpcy5mYWxsYmFjaygpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5jb21waWxlKGNvbnRlbnQuY2xvbmVOb2RlKHRydWUpLCB0aGlzLnZtLl9jb250ZXh0LCB0aGlzLnZtKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBjb21waWxlOiBmdW5jdGlvbiBjb21waWxlKGNvbnRlbnQsIGNvbnRleHQsIGhvc3QpIHtcblx0ICAgIGlmIChjb250ZW50ICYmIGNvbnRleHQpIHtcblx0ICAgICAgaWYgKHRoaXMuZWwuaGFzQ2hpbGROb2RlcygpICYmIGNvbnRlbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiYgY29udGVudC5jaGlsZE5vZGVzWzBdLm5vZGVUeXBlID09PSAxICYmIGNvbnRlbnQuY2hpbGROb2Rlc1swXS5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuXHQgICAgICAgIC8vIGlmIHRoZSBpbnNlcnRlZCBzbG90IGhhcyB2LWlmXG5cdCAgICAgICAgLy8gaW5qZWN0IGZhbGxiYWNrIGNvbnRlbnQgYXMgdGhlIHYtZWxzZVxuXHQgICAgICAgIHZhciBlbHNlQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuXHQgICAgICAgIGVsc2VCbG9jay5zZXRBdHRyaWJ1dGUoJ3YtZWxzZScsICcnKTtcblx0ICAgICAgICBlbHNlQmxvY2suaW5uZXJIVE1MID0gdGhpcy5lbC5pbm5lckhUTUw7XG5cdCAgICAgICAgLy8gdGhlIGVsc2UgYmxvY2sgc2hvdWxkIGJlIGNvbXBpbGVkIGluIGNoaWxkIHNjb3BlXG5cdCAgICAgICAgZWxzZUJsb2NrLl9jb250ZXh0ID0gdGhpcy52bTtcblx0ICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGVsc2VCbG9jayk7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHNjb3BlID0gaG9zdCA/IGhvc3QuX3Njb3BlIDogdGhpcy5fc2NvcGU7XG5cdCAgICAgIHRoaXMudW5saW5rID0gY29udGV4dC4kY29tcGlsZShjb250ZW50LCBob3N0LCBzY29wZSwgdGhpcy5fZnJhZyk7XG5cdCAgICB9XG5cdCAgICBpZiAoY29udGVudCkge1xuXHQgICAgICByZXBsYWNlKHRoaXMuZWwsIGNvbnRlbnQpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVtb3ZlKHRoaXMuZWwpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGZhbGxiYWNrOiBmdW5jdGlvbiBmYWxsYmFjaygpIHtcblx0ICAgIHRoaXMuY29tcGlsZShleHRyYWN0Q29udGVudCh0aGlzLmVsLCB0cnVlKSwgdGhpcy52bSk7XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICBpZiAodGhpcy51bmxpbmspIHtcblx0ICAgICAgdGhpcy51bmxpbmsoKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcGFydGlhbCA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IFBBUlRJQUwsXG5cdFxuXHQgIHBhcmFtczogWyduYW1lJ10sXG5cdFxuXHQgIC8vIHdhdGNoIGNoYW5nZXMgdG8gbmFtZSBmb3IgZHluYW1pYyBwYXJ0aWFsc1xuXHQgIHBhcmFtV2F0Y2hlcnM6IHtcblx0ICAgIG5hbWU6IGZ1bmN0aW9uIG5hbWUodmFsdWUpIHtcblx0ICAgICAgdklmLnJlbW92ZS5jYWxsKHRoaXMpO1xuXHQgICAgICBpZiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLmluc2VydCh2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtcGFydGlhbCcpO1xuXHQgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG5cdCAgICB0aGlzLmluc2VydCh0aGlzLnBhcmFtcy5uYW1lKTtcblx0ICB9LFxuXHRcblx0ICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydChpZCkge1xuXHQgICAgdmFyIHBhcnRpYWwgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3BhcnRpYWxzJywgaWQsIHRydWUpO1xuXHQgICAgaWYgKHBhcnRpYWwpIHtcblx0ICAgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCBwYXJ0aWFsKTtcblx0ICAgICAgdklmLmluc2VydC5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgaWYgKHRoaXMuZnJhZykge1xuXHQgICAgICB0aGlzLmZyYWcuZGVzdHJveSgpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBlbGVtZW50RGlyZWN0aXZlcyA9IHtcblx0ICBzbG90OiBzbG90LFxuXHQgIHBhcnRpYWw6IHBhcnRpYWxcblx0fTtcblx0XG5cdHZhciBjb252ZXJ0QXJyYXkgPSB2Rm9yLl9wb3N0UHJvY2Vzcztcblx0XG5cdC8qKlxuXHQgKiBMaW1pdCBmaWx0ZXIgZm9yIGFycmF5c1xuXHQgKlxuXHQgKiBAcGFyYW0ge051bWJlcn0gblxuXHQgKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IChEZWNpbWFsIGV4cGVjdGVkKVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGxpbWl0QnkoYXJyLCBuLCBvZmZzZXQpIHtcblx0ICBvZmZzZXQgPSBvZmZzZXQgPyBwYXJzZUludChvZmZzZXQsIDEwKSA6IDA7XG5cdCAgbiA9IHRvTnVtYmVyKG4pO1xuXHQgIHJldHVybiB0eXBlb2YgbiA9PT0gJ251bWJlcicgPyBhcnIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBuKSA6IGFycjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZpbHRlciBmaWx0ZXIgZm9yIGFycmF5c1xuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbZGVsaW1pdGVyXVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gLi4uZGF0YUtleXNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmaWx0ZXJCeShhcnIsIHNlYXJjaCwgZGVsaW1pdGVyKSB7XG5cdCAgYXJyID0gY29udmVydEFycmF5KGFycik7XG5cdCAgaWYgKHNlYXJjaCA9PSBudWxsKSB7XG5cdCAgICByZXR1cm4gYXJyO1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIHNlYXJjaCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgcmV0dXJuIGFyci5maWx0ZXIoc2VhcmNoKTtcblx0ICB9XG5cdCAgLy8gY2FzdCB0byBsb3dlcmNhc2Ugc3RyaW5nXG5cdCAgc2VhcmNoID0gKCcnICsgc2VhcmNoKS50b0xvd2VyQ2FzZSgpO1xuXHQgIC8vIGFsbG93IG9wdGlvbmFsIGBpbmAgZGVsaW1pdGVyXG5cdCAgLy8gYmVjYXVzZSB3aHkgbm90XG5cdCAgdmFyIG4gPSBkZWxpbWl0ZXIgPT09ICdpbicgPyAzIDogMjtcblx0ICAvLyBleHRyYWN0IGFuZCBmbGF0dGVuIGtleXNcblx0ICB2YXIga2V5cyA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIHRvQXJyYXkoYXJndW1lbnRzLCBuKSk7XG5cdCAgdmFyIHJlcyA9IFtdO1xuXHQgIHZhciBpdGVtLCBrZXksIHZhbCwgajtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGFyci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGl0ZW0gPSBhcnJbaV07XG5cdCAgICB2YWwgPSBpdGVtICYmIGl0ZW0uJHZhbHVlIHx8IGl0ZW07XG5cdCAgICBqID0ga2V5cy5sZW5ndGg7XG5cdCAgICBpZiAoaikge1xuXHQgICAgICB3aGlsZSAoai0tKSB7XG5cdCAgICAgICAga2V5ID0ga2V5c1tqXTtcblx0ICAgICAgICBpZiAoa2V5ID09PSAnJGtleScgJiYgY29udGFpbnMoaXRlbS4ka2V5LCBzZWFyY2gpIHx8IGNvbnRhaW5zKGdldFBhdGgodmFsLCBrZXkpLCBzZWFyY2gpKSB7XG5cdCAgICAgICAgICByZXMucHVzaChpdGVtKTtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChjb250YWlucyhpdGVtLCBzZWFyY2gpKSB7XG5cdCAgICAgIHJlcy5wdXNoKGl0ZW0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRmlsdGVyIGZpbHRlciBmb3IgYXJyYXlzXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfEFycmF5PFN0cmluZz58RnVuY3Rpb259IC4uLnNvcnRLZXlzXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbb3JkZXJdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gb3JkZXJCeShhcnIpIHtcblx0ICB2YXIgY29tcGFyYXRvciA9IG51bGw7XG5cdCAgdmFyIHNvcnRLZXlzID0gdW5kZWZpbmVkO1xuXHQgIGFyciA9IGNvbnZlcnRBcnJheShhcnIpO1xuXHRcblx0ICAvLyBkZXRlcm1pbmUgb3JkZXIgKGxhc3QgYXJndW1lbnQpXG5cdCAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG5cdCAgdmFyIG9yZGVyID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuXHQgIGlmICh0eXBlb2Ygb3JkZXIgPT09ICdudW1iZXInKSB7XG5cdCAgICBvcmRlciA9IG9yZGVyIDwgMCA/IC0xIDogMTtcblx0ICAgIGFyZ3MgPSBhcmdzLmxlbmd0aCA+IDEgPyBhcmdzLnNsaWNlKDAsIC0xKSA6IGFyZ3M7XG5cdCAgfSBlbHNlIHtcblx0ICAgIG9yZGVyID0gMTtcblx0ICB9XG5cdFxuXHQgIC8vIGRldGVybWluZSBzb3J0S2V5cyAmIGNvbXBhcmF0b3Jcblx0ICB2YXIgZmlyc3RBcmcgPSBhcmdzWzBdO1xuXHQgIGlmICghZmlyc3RBcmcpIHtcblx0ICAgIHJldHVybiBhcnI7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgZmlyc3RBcmcgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIC8vIGN1c3RvbSBjb21wYXJhdG9yXG5cdCAgICBjb21wYXJhdG9yID0gZnVuY3Rpb24gKGEsIGIpIHtcblx0ICAgICAgcmV0dXJuIGZpcnN0QXJnKGEsIGIpICogb3JkZXI7XG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBzdHJpbmcga2V5cy4gZmxhdHRlbiBmaXJzdFxuXHQgICAgc29ydEtleXMgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBhcmdzKTtcblx0ICAgIGNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYiwgaSkge1xuXHQgICAgICBpID0gaSB8fCAwO1xuXHQgICAgICByZXR1cm4gaSA+PSBzb3J0S2V5cy5sZW5ndGggLSAxID8gYmFzZUNvbXBhcmUoYSwgYiwgaSkgOiBiYXNlQ29tcGFyZShhLCBiLCBpKSB8fCBjb21wYXJhdG9yKGEsIGIsIGkgKyAxKTtcblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBiYXNlQ29tcGFyZShhLCBiLCBzb3J0S2V5SW5kZXgpIHtcblx0ICAgIHZhciBzb3J0S2V5ID0gc29ydEtleXNbc29ydEtleUluZGV4XTtcblx0ICAgIGlmIChzb3J0S2V5KSB7XG5cdCAgICAgIGlmIChzb3J0S2V5ICE9PSAnJGtleScpIHtcblx0ICAgICAgICBpZiAoaXNPYmplY3QoYSkgJiYgJyR2YWx1ZScgaW4gYSkgYSA9IGEuJHZhbHVlO1xuXHQgICAgICAgIGlmIChpc09iamVjdChiKSAmJiAnJHZhbHVlJyBpbiBiKSBiID0gYi4kdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgICAgYSA9IGlzT2JqZWN0KGEpID8gZ2V0UGF0aChhLCBzb3J0S2V5KSA6IGE7XG5cdCAgICAgIGIgPSBpc09iamVjdChiKSA/IGdldFBhdGgoYiwgc29ydEtleSkgOiBiO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGEgPT09IGIgPyAwIDogYSA+IGIgPyBvcmRlciA6IC1vcmRlcjtcblx0ICB9XG5cdFxuXHQgIC8vIHNvcnQgb24gYSBjb3B5IHRvIGF2b2lkIG11dGF0aW5nIG9yaWdpbmFsIGFycmF5XG5cdCAgcmV0dXJuIGFyci5zbGljZSgpLnNvcnQoY29tcGFyYXRvcik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTdHJpbmcgY29udGFpbiBoZWxwZXJcblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbnRhaW5zKHZhbCwgc2VhcmNoKSB7XG5cdCAgdmFyIGk7XG5cdCAgaWYgKGlzUGxhaW5PYmplY3QodmFsKSkge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xuXHQgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBpZiAoY29udGFpbnModmFsW2tleXNbaV1dLCBzZWFyY2gpKSB7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsKSkge1xuXHQgICAgaSA9IHZhbC5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGlmIChjb250YWlucyh2YWxbaV0sIHNlYXJjaCkpIHtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAodmFsICE9IG51bGwpIHtcblx0ICAgIHJldHVybiB2YWwudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2VhcmNoKSA+IC0xO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGRpZ2l0c1JFID0gLyhcXGR7M30pKD89XFxkKS9nO1xuXHRcblx0Ly8gYXNzZXQgY29sbGVjdGlvbnMgbXVzdCBiZSBhIHBsYWluIG9iamVjdC5cblx0dmFyIGZpbHRlcnMgPSB7XG5cdFxuXHQgIG9yZGVyQnk6IG9yZGVyQnksXG5cdCAgZmlsdGVyQnk6IGZpbHRlckJ5LFxuXHQgIGxpbWl0Qnk6IGxpbWl0QnksXG5cdFxuXHQgIC8qKlxuXHQgICAqIFN0cmluZ2lmeSB2YWx1ZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRlbnRcblx0ICAgKi9cblx0XG5cdCAganNvbjoge1xuXHQgICAgcmVhZDogZnVuY3Rpb24gcmVhZCh2YWx1ZSwgaW5kZW50KSB7XG5cdCAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSwgbnVsbCwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBpbmRlbnQgOiAyKTtcblx0ICAgIH0sXG5cdCAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUodmFsdWUpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh2YWx1ZSk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICByZXR1cm4gdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiAnYWJjJyA9PiAnQWJjJ1xuXHQgICAqL1xuXHRcblx0ICBjYXBpdGFsaXplOiBmdW5jdGlvbiBjYXBpdGFsaXplKHZhbHVlKSB7XG5cdCAgICBpZiAoIXZhbHVlICYmIHZhbHVlICE9PSAwKSByZXR1cm4gJyc7XG5cdCAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG5cdCAgICByZXR1cm4gdmFsdWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2YWx1ZS5zbGljZSgxKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiAnYWJjJyA9PiAnQUJDJ1xuXHQgICAqL1xuXHRcblx0ICB1cHBlcmNhc2U6IGZ1bmN0aW9uIHVwcGVyY2FzZSh2YWx1ZSkge1xuXHQgICAgcmV0dXJuIHZhbHVlIHx8IHZhbHVlID09PSAwID8gdmFsdWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpIDogJyc7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogJ0FiQycgPT4gJ2FiYydcblx0ICAgKi9cblx0XG5cdCAgbG93ZXJjYXNlOiBmdW5jdGlvbiBsb3dlcmNhc2UodmFsdWUpIHtcblx0ICAgIHJldHVybiB2YWx1ZSB8fCB2YWx1ZSA9PT0gMCA/IHZhbHVlLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSA6ICcnO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIDEyMzQ1ID0+ICQxMiwzNDUuMDBcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBzaWduXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGRlY2ltYWxzIERlY2ltYWwgcGxhY2VzXG5cdCAgICovXG5cdFxuXHQgIGN1cnJlbmN5OiBmdW5jdGlvbiBjdXJyZW5jeSh2YWx1ZSwgX2N1cnJlbmN5LCBkZWNpbWFscykge1xuXHQgICAgdmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKTtcblx0ICAgIGlmICghaXNGaW5pdGUodmFsdWUpIHx8ICF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkgcmV0dXJuICcnO1xuXHQgICAgX2N1cnJlbmN5ID0gX2N1cnJlbmN5ICE9IG51bGwgPyBfY3VycmVuY3kgOiAnJCc7XG5cdCAgICBkZWNpbWFscyA9IGRlY2ltYWxzICE9IG51bGwgPyBkZWNpbWFscyA6IDI7XG5cdCAgICB2YXIgc3RyaW5naWZpZWQgPSBNYXRoLmFicyh2YWx1ZSkudG9GaXhlZChkZWNpbWFscyk7XG5cdCAgICB2YXIgX2ludCA9IGRlY2ltYWxzID8gc3RyaW5naWZpZWQuc2xpY2UoMCwgLTEgLSBkZWNpbWFscykgOiBzdHJpbmdpZmllZDtcblx0ICAgIHZhciBpID0gX2ludC5sZW5ndGggJSAzO1xuXHQgICAgdmFyIGhlYWQgPSBpID4gMCA/IF9pbnQuc2xpY2UoMCwgaSkgKyAoX2ludC5sZW5ndGggPiAzID8gJywnIDogJycpIDogJyc7XG5cdCAgICB2YXIgX2Zsb2F0ID0gZGVjaW1hbHMgPyBzdHJpbmdpZmllZC5zbGljZSgtMSAtIGRlY2ltYWxzKSA6ICcnO1xuXHQgICAgdmFyIHNpZ24gPSB2YWx1ZSA8IDAgPyAnLScgOiAnJztcblx0ICAgIHJldHVybiBzaWduICsgX2N1cnJlbmN5ICsgaGVhZCArIF9pbnQuc2xpY2UoaSkucmVwbGFjZShkaWdpdHNSRSwgJyQxLCcpICsgX2Zsb2F0O1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqICdpdGVtJyA9PiAnaXRlbXMnXG5cdCAgICpcblx0ICAgKiBAcGFyYW1zXG5cdCAgICogIGFuIGFycmF5IG9mIHN0cmluZ3MgY29ycmVzcG9uZGluZyB0b1xuXHQgICAqICB0aGUgc2luZ2xlLCBkb3VibGUsIHRyaXBsZSAuLi4gZm9ybXMgb2YgdGhlIHdvcmQgdG9cblx0ICAgKiAgYmUgcGx1cmFsaXplZC4gV2hlbiB0aGUgbnVtYmVyIHRvIGJlIHBsdXJhbGl6ZWRcblx0ICAgKiAgZXhjZWVkcyB0aGUgbGVuZ3RoIG9mIHRoZSBhcmdzLCBpdCB3aWxsIHVzZSB0aGUgbGFzdFxuXHQgICAqICBlbnRyeSBpbiB0aGUgYXJyYXkuXG5cdCAgICpcblx0ICAgKiAgZS5nLiBbJ3NpbmdsZScsICdkb3VibGUnLCAndHJpcGxlJywgJ211bHRpcGxlJ11cblx0ICAgKi9cblx0XG5cdCAgcGx1cmFsaXplOiBmdW5jdGlvbiBwbHVyYWxpemUodmFsdWUpIHtcblx0ICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuXHQgICAgdmFyIGxlbmd0aCA9IGFyZ3MubGVuZ3RoO1xuXHQgICAgaWYgKGxlbmd0aCA+IDEpIHtcblx0ICAgICAgdmFyIGluZGV4ID0gdmFsdWUgJSAxMCAtIDE7XG5cdCAgICAgIHJldHVybiBpbmRleCBpbiBhcmdzID8gYXJnc1tpbmRleF0gOiBhcmdzW2xlbmd0aCAtIDFdO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIGFyZ3NbMF0gKyAodmFsdWUgPT09IDEgPyAnJyA6ICdzJyk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRGVib3VuY2UgYSBoYW5kbGVyIGZ1bmN0aW9uLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheSA9IDMwMFxuXHQgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgICAqL1xuXHRcblx0ICBkZWJvdW5jZTogZnVuY3Rpb24gZGVib3VuY2UoaGFuZGxlciwgZGVsYXkpIHtcblx0ICAgIGlmICghaGFuZGxlcikgcmV0dXJuO1xuXHQgICAgaWYgKCFkZWxheSkge1xuXHQgICAgICBkZWxheSA9IDMwMDtcblx0ICAgIH1cblx0ICAgIHJldHVybiBfZGVib3VuY2UoaGFuZGxlciwgZGVsYXkpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIGluc3RhbGxHbG9iYWxBUEkgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIFZ1ZSBhbmQgZXZlcnkgY29uc3RydWN0b3IgdGhhdCBleHRlbmRzIFZ1ZSBoYXMgYW5cblx0ICAgKiBhc3NvY2lhdGVkIG9wdGlvbnMgb2JqZWN0LCB3aGljaCBjYW4gYmUgYWNjZXNzZWQgZHVyaW5nXG5cdCAgICogY29tcGlsYXRpb24gc3RlcHMgYXMgYHRoaXMuY29uc3RydWN0b3Iub3B0aW9uc2AuXG5cdCAgICpcblx0ICAgKiBUaGVzZSBjYW4gYmUgc2VlbiBhcyB0aGUgZGVmYXVsdCBvcHRpb25zIG9mIGV2ZXJ5XG5cdCAgICogVnVlIGluc3RhbmNlLlxuXHQgICAqL1xuXHRcblx0ICBWdWUub3B0aW9ucyA9IHtcblx0ICAgIGRpcmVjdGl2ZXM6IGRpcmVjdGl2ZXMsXG5cdCAgICBlbGVtZW50RGlyZWN0aXZlczogZWxlbWVudERpcmVjdGl2ZXMsXG5cdCAgICBmaWx0ZXJzOiBmaWx0ZXJzLFxuXHQgICAgdHJhbnNpdGlvbnM6IHt9LFxuXHQgICAgY29tcG9uZW50czoge30sXG5cdCAgICBwYXJ0aWFsczoge30sXG5cdCAgICByZXBsYWNlOiB0cnVlXG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogRXhwb3NlIHVzZWZ1bCBpbnRlcm5hbHNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnV0aWwgPSB1dGlsO1xuXHQgIFZ1ZS5jb25maWcgPSBjb25maWc7XG5cdCAgVnVlLnNldCA9IHNldDtcblx0ICBWdWVbJ2RlbGV0ZSddID0gZGVsO1xuXHQgIFZ1ZS5uZXh0VGljayA9IG5leHRUaWNrO1xuXHRcblx0ICAvKipcblx0ICAgKiBUaGUgZm9sbG93aW5nIGFyZSBleHBvc2VkIGZvciBhZHZhbmNlZCB1c2FnZSAvIHBsdWdpbnNcblx0ICAgKi9cblx0XG5cdCAgVnVlLmNvbXBpbGVyID0gY29tcGlsZXI7XG5cdCAgVnVlLkZyYWdtZW50RmFjdG9yeSA9IEZyYWdtZW50RmFjdG9yeTtcblx0ICBWdWUuaW50ZXJuYWxEaXJlY3RpdmVzID0gaW50ZXJuYWxEaXJlY3RpdmVzO1xuXHQgIFZ1ZS5wYXJzZXJzID0ge1xuXHQgICAgcGF0aDogcGF0aCxcblx0ICAgIHRleHQ6IHRleHQsXG5cdCAgICB0ZW1wbGF0ZTogdGVtcGxhdGUsXG5cdCAgICBkaXJlY3RpdmU6IGRpcmVjdGl2ZSxcblx0ICAgIGV4cHJlc3Npb246IGV4cHJlc3Npb25cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBFYWNoIGluc3RhbmNlIGNvbnN0cnVjdG9yLCBpbmNsdWRpbmcgVnVlLCBoYXMgYSB1bmlxdWVcblx0ICAgKiBjaWQuIFRoaXMgZW5hYmxlcyB1cyB0byBjcmVhdGUgd3JhcHBlZCBcImNoaWxkXG5cdCAgICogY29uc3RydWN0b3JzXCIgZm9yIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UgYW5kIGNhY2hlIHRoZW0uXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5jaWQgPSAwO1xuXHQgIHZhciBjaWQgPSAxO1xuXHRcblx0ICAvKipcblx0ICAgKiBDbGFzcyBpbmhlcml0YW5jZVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IGV4dGVuZE9wdGlvbnNcblx0ICAgKi9cblx0XG5cdCAgVnVlLmV4dGVuZCA9IGZ1bmN0aW9uIChleHRlbmRPcHRpb25zKSB7XG5cdCAgICBleHRlbmRPcHRpb25zID0gZXh0ZW5kT3B0aW9ucyB8fCB7fTtcblx0ICAgIHZhciBTdXBlciA9IHRoaXM7XG5cdCAgICB2YXIgaXNGaXJzdEV4dGVuZCA9IFN1cGVyLmNpZCA9PT0gMDtcblx0ICAgIGlmIChpc0ZpcnN0RXh0ZW5kICYmIGV4dGVuZE9wdGlvbnMuX0N0b3IpIHtcblx0ICAgICAgcmV0dXJuIGV4dGVuZE9wdGlvbnMuX0N0b3I7XG5cdCAgICB9XG5cdCAgICB2YXIgbmFtZSA9IGV4dGVuZE9wdGlvbnMubmFtZSB8fCBTdXBlci5vcHRpb25zLm5hbWU7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBpZiAoIS9eW2EtekEtWl1bXFx3LV0qJC8udGVzdChuYW1lKSkge1xuXHQgICAgICAgIHdhcm4oJ0ludmFsaWQgY29tcG9uZW50IG5hbWU6IFwiJyArIG5hbWUgKyAnXCIuIENvbXBvbmVudCBuYW1lcyAnICsgJ2NhbiBvbmx5IGNvbnRhaW4gYWxwaGFudW1lcmljIGNoYXJhY2F0ZXJzIGFuZCB0aGUgaHlwaGVuLicpO1xuXHQgICAgICAgIG5hbWUgPSBudWxsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB2YXIgU3ViID0gY3JlYXRlQ2xhc3MobmFtZSB8fCAnVnVlQ29tcG9uZW50Jyk7XG5cdCAgICBTdWIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdXBlci5wcm90b3R5cGUpO1xuXHQgICAgU3ViLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN1Yjtcblx0ICAgIFN1Yi5jaWQgPSBjaWQrKztcblx0ICAgIFN1Yi5vcHRpb25zID0gbWVyZ2VPcHRpb25zKFN1cGVyLm9wdGlvbnMsIGV4dGVuZE9wdGlvbnMpO1xuXHQgICAgU3ViWydzdXBlciddID0gU3VwZXI7XG5cdCAgICAvLyBhbGxvdyBmdXJ0aGVyIGV4dGVuc2lvblxuXHQgICAgU3ViLmV4dGVuZCA9IFN1cGVyLmV4dGVuZDtcblx0ICAgIC8vIGNyZWF0ZSBhc3NldCByZWdpc3RlcnMsIHNvIGV4dGVuZGVkIGNsYXNzZXNcblx0ICAgIC8vIGNhbiBoYXZlIHRoZWlyIHByaXZhdGUgYXNzZXRzIHRvby5cblx0ICAgIGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgICAgIFN1Ylt0eXBlXSA9IFN1cGVyW3R5cGVdO1xuXHQgICAgfSk7XG5cdCAgICAvLyBlbmFibGUgcmVjdXJzaXZlIHNlbGYtbG9va3VwXG5cdCAgICBpZiAobmFtZSkge1xuXHQgICAgICBTdWIub3B0aW9ucy5jb21wb25lbnRzW25hbWVdID0gU3ViO1xuXHQgICAgfVxuXHQgICAgLy8gY2FjaGUgY29uc3RydWN0b3Jcblx0ICAgIGlmIChpc0ZpcnN0RXh0ZW5kKSB7XG5cdCAgICAgIGV4dGVuZE9wdGlvbnMuX0N0b3IgPSBTdWI7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gU3ViO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3ViLWNsYXNzIGNvbnN0cnVjdG9yIHdpdGggdGhlXG5cdCAgICogZ2l2ZW4gbmFtZS4gVGhpcyBnaXZlcyB1cyBtdWNoIG5pY2VyIG91dHB1dCB3aGVuXG5cdCAgICogbG9nZ2luZyBpbnN0YW5jZXMgaW4gdGhlIGNvbnNvbGUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjcmVhdGVDbGFzcyhuYW1lKSB7XG5cdCAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1uZXctZnVuYyAqL1xuXHQgICAgcmV0dXJuIG5ldyBGdW5jdGlvbigncmV0dXJuIGZ1bmN0aW9uICcgKyBjbGFzc2lmeShuYW1lKSArICcgKG9wdGlvbnMpIHsgdGhpcy5faW5pdChvcHRpb25zKSB9JykoKTtcblx0ICAgIC8qIGVzbGludC1lbmFibGUgbm8tbmV3LWZ1bmMgKi9cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFBsdWdpbiBzeXN0ZW1cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBwbHVnaW5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnVzZSA9IGZ1bmN0aW9uIChwbHVnaW4pIHtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKHBsdWdpbi5pbnN0YWxsZWQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gYWRkaXRpb25hbCBwYXJhbWV0ZXJzXG5cdCAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcblx0ICAgIGFyZ3MudW5zaGlmdCh0aGlzKTtcblx0ICAgIGlmICh0eXBlb2YgcGx1Z2luLmluc3RhbGwgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcGx1Z2luLmluc3RhbGwuYXBwbHkocGx1Z2luLCBhcmdzKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHBsdWdpbi5hcHBseShudWxsLCBhcmdzKTtcblx0ICAgIH1cblx0ICAgIHBsdWdpbi5pbnN0YWxsZWQgPSB0cnVlO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQXBwbHkgYSBnbG9iYWwgbWl4aW4gYnkgbWVyZ2luZyBpdCBpbnRvIHRoZSBkZWZhdWx0XG5cdCAgICogb3B0aW9ucy5cblx0ICAgKi9cblx0XG5cdCAgVnVlLm1peGluID0gZnVuY3Rpb24gKG1peGluKSB7XG5cdCAgICBWdWUub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhWdWUub3B0aW9ucywgbWl4aW4pO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENyZWF0ZSBhc3NldCByZWdpc3RyYXRpb24gbWV0aG9kcyB3aXRoIHRoZSBmb2xsb3dpbmdcblx0ICAgKiBzaWduYXR1cmU6XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gaWRcblx0ICAgKiBAcGFyYW0geyp9IGRlZmluaXRpb25cblx0ICAgKi9cblx0XG5cdCAgY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcblx0ICAgIFZ1ZVt0eXBlXSA9IGZ1bmN0aW9uIChpZCwgZGVmaW5pdGlvbikge1xuXHQgICAgICBpZiAoIWRlZmluaXRpb24pIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgICAgaWYgKHR5cGUgPT09ICdjb21wb25lbnQnICYmIChjb21tb25UYWdSRS50ZXN0KGlkKSB8fCByZXNlcnZlZFRhZ1JFLnRlc3QoaWQpKSkge1xuXHQgICAgICAgICAgICB3YXJuKCdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgKyAnaWQ6ICcgKyBpZCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiBpc1BsYWluT2JqZWN0KGRlZmluaXRpb24pKSB7XG5cdCAgICAgICAgICBpZiAoIWRlZmluaXRpb24ubmFtZSkge1xuXHQgICAgICAgICAgICBkZWZpbml0aW9uLm5hbWUgPSBpZDtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGRlZmluaXRpb24gPSBWdWUuZXh0ZW5kKGRlZmluaXRpb24pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdID0gZGVmaW5pdGlvbjtcblx0ICAgICAgICByZXR1cm4gZGVmaW5pdGlvbjtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9KTtcblx0XG5cdCAgLy8gZXhwb3NlIGludGVybmFsIHRyYW5zaXRpb24gQVBJXG5cdCAgZXh0ZW5kKFZ1ZS50cmFuc2l0aW9uLCB0cmFuc2l0aW9uKTtcblx0fVxuXHRcblx0aW5zdGFsbEdsb2JhbEFQSShWdWUpO1xuXHRcblx0VnVlLnZlcnNpb24gPSAnMS4wLjI2Jztcblx0XG5cdC8vIGRldnRvb2xzIGdsb2JhbCBob29rXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgIGlmIChjb25maWcuZGV2dG9vbHMpIHtcblx0ICAgIGlmIChkZXZ0b29scykge1xuXHQgICAgICBkZXZ0b29scy5lbWl0KCdpbml0JywgVnVlKTtcblx0ICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBpbkJyb3dzZXIgJiYgL0Nocm9tZVxcL1xcZCsvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG5cdCAgICAgIGNvbnNvbGUubG9nKCdEb3dubG9hZCB0aGUgVnVlIERldnRvb2xzIGZvciBhIGJldHRlciBkZXZlbG9wbWVudCBleHBlcmllbmNlOlxcbicgKyAnaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1kZXZ0b29scycpO1xuXHQgICAgfVxuXHQgIH1cblx0fSwgMCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFZ1ZTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSksIF9fd2VicGFja19yZXF1aXJlX18oMTkpKSlcblxuLyoqKi8gfSxcbi8qIDE5OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHsgdGhyb3cgbmV3IEVycm9yKFwiZGVmaW5lIGNhbm5vdCBiZSB1c2VkIGluZGlyZWN0XCIpOyB9O1xyXG5cblxuLyoqKi8gfSxcbi8qIDIwMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcclxuXHRcdGlmKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XHJcblx0XHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xyXG5cdFx0XHRtb2R1bGUucGF0aHMgPSBbXTtcclxuXHRcdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XHJcblx0XHRcdG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xyXG5cdFx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBtb2R1bGU7XHJcblx0fVxyXG5cblxuLyoqKi8gfSxcbi8qIDIwMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogKGlnbm9yZWQpICovXG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHZ1ZS5qc1xuICoqLyIsIiBcdC8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xuIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl07XG4gXHR3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSBmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhjaHVua0lkcywgbW9yZU1vZHVsZXMpIHtcbiBcdFx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG4gXHRcdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuIFx0XHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCBjYWxsYmFja3MgPSBbXTtcbiBcdFx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG4gXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKVxuIFx0XHRcdFx0Y2FsbGJhY2tzLnB1c2guYXBwbHkoY2FsbGJhY2tzLCBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pO1xuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG4gXHRcdH1cbiBcdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG4gXHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihjaHVua0lkcywgbW9yZU1vZHVsZXMpO1xuIFx0XHR3aGlsZShjYWxsYmFja3MubGVuZ3RoKVxuIFx0XHRcdGNhbGxiYWNrcy5zaGlmdCgpLmNhbGwobnVsbCwgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdH07XG5cbiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4gXHQvLyBcIjBcIiBtZWFucyBcImFscmVhZHkgbG9hZGVkXCJcbiBcdC8vIEFycmF5IG1lYW5zIFwibG9hZGluZ1wiLCBhcnJheSBjb250YWlucyBjYWxsYmFja3NcbiBcdHZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG4gXHRcdDA6MCxcbiBcdFx0MTowLFxuIFx0XHQyOjBcbiBcdH07XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuIFx0Ly8gVGhpcyBmaWxlIGNvbnRhaW5zIG9ubHkgdGhlIGVudHJ5IGNodW5rLlxuIFx0Ly8gVGhlIGNodW5rIGxvYWRpbmcgZnVuY3Rpb24gZm9yIGFkZGl0aW9uYWwgY2h1bmtzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSBmdW5jdGlvbiByZXF1aXJlRW5zdXJlKGNodW5rSWQsIGNhbGxiYWNrKSB7XG4gXHRcdC8vIFwiMFwiIGlzIHRoZSBzaWduYWwgZm9yIFwiYWxyZWFkeSBsb2FkZWRcIlxuIFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDApXG4gXHRcdFx0cmV0dXJuIGNhbGxiYWNrLmNhbGwobnVsbCwgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gYW4gYXJyYXkgbWVhbnMgXCJjdXJyZW50bHkgbG9hZGluZ1wiLlxuIFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gIT09IHVuZGVmaW5lZCkge1xuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXS5wdXNoKGNhbGxiYWNrKTtcbiBcdFx0fSBlbHNlIHtcbiBcdFx0XHQvLyBzdGFydCBjaHVuayBsb2FkaW5nXG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gW2NhbGxiYWNrXTtcbiBcdFx0XHR2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gXHRcdFx0dmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuIFx0XHRcdHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4gXHRcdFx0c2NyaXB0LmNoYXJzZXQgPSAndXRmLTgnO1xuIFx0XHRcdHNjcmlwdC5hc3luYyA9IHRydWU7XG5cbiBcdFx0XHRzY3JpcHQuc3JjID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArIGNodW5rSWQgKyBcIi5hcHAuanNcIjtcbiBcdFx0XHRoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL2Rldi9hcHAvXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL2Jvb3RzdHJhcCA4ZTc5YzVjZGRlYzY5MjFmZmU0ZVxuICoqLyIsImltcG9ydCBWdWUgZnJvbSAnVnVlJztcbmltcG9ydCBWdWVSb3V0ZXIgZnJvbSAndnVlLXJvdXRlcic7XG5pbXBvcnQgcm91dGVzIGZyb20gJy4vcm91dGVzJztcbmltcG9ydCBIeWJyaWRUaG9yaXVtIGZyb20gJ2h5YnJpZC10aG9yaXVtJztcbmltcG9ydCBQcmlzbSBmcm9tICdwcmlzbWpzJztcblZ1ZS5jb25maWcuZGVidWcgPSB0cnVlO1xuXG5WdWUudXNlKFZ1ZVJvdXRlcik7XG5WdWUudXNlKEh5YnJpZFRob3JpdW0pO1xuXG5sZXQgcm91dGVyID0gbmV3IFZ1ZVJvdXRlcigpO1xubGV0IEFwcCA9IFZ1ZS5leHRlbmQoe1xuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBsaWdlckVuZFBvaW50OiAnaHR0cHM6Ly9hcGkuY21zLnRlbHVzLmNvbS9sZWdhbHMnLFxuICAgICAgbGlnZXJBcHBsaWNhdGlvbktleTogJ2I5NzM4ZDY3Yjg5ZGZjNzgyNzQ2ZDRhOWNmNGExMDkzJ1xuICAgIH07XG4gIH1cbn0pO1xucm91dGVyLm1hcChyb3V0ZXMpO1xucm91dGVyLmFmdGVyRWFjaCgoKSA9PiB7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIFByaXNtLmhpZ2hsaWdodEFsbCgpO1xuICB9LCAwKTtcbn0pO1xucm91dGVyLnN0YXJ0KEFwcCwgJyNhcHAtbWFpbicpO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9kZXYvc3JjL21haW4uanNcbiAqKi8iLCIvKlxyXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxyXG4qL1xyXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cdHZhciBsaXN0ID0gW107XHJcblxyXG5cdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcclxuXHRsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XHJcblx0XHR2YXIgcmVzdWx0ID0gW107XHJcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgaXRlbSA9IHRoaXNbaV07XHJcblx0XHRcdGlmKGl0ZW1bMl0pIHtcclxuXHRcdFx0XHRyZXN1bHQucHVzaChcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGl0ZW1bMV0gKyBcIn1cIik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmVzdWx0LnB1c2goaXRlbVsxXSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiByZXN1bHQuam9pbihcIlwiKTtcclxuXHR9O1xyXG5cclxuXHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxyXG5cdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcclxuXHRcdGlmKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKVxyXG5cdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XHJcblx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcclxuXHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxyXG5cdFx0XHRcdGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSBtb2R1bGVzW2ldO1xyXG5cdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXHJcblx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXHJcblx0XHRcdC8vICB3aGVuIGEgbW9kdWxlIGlzIGltcG9ydGVkIG11bHRpcGxlIHRpbWVzIHdpdGggZGlmZmVyZW50IG1lZGlhIHF1ZXJpZXMuXHJcblx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXHJcblx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XHJcblx0XHRcdFx0aWYobWVkaWFRdWVyeSAmJiAhaXRlbVsyXSkge1xyXG5cdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XHJcblx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0XHRcdGl0ZW1bMl0gPSBcIihcIiArIGl0ZW1bMl0gKyBcIikgYW5kIChcIiArIG1lZGlhUXVlcnkgKyBcIilcIjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHRyZXR1cm4gbGlzdDtcclxufTtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcbiAqKiBtb2R1bGUgaWQgPSAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xudmFyIHN0eWxlc0luRG9tID0ge30sXG5cdG1lbW9pemUgPSBmdW5jdGlvbihmbikge1xuXHRcdHZhciBtZW1vO1xuXHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRpZiAodHlwZW9mIG1lbW8gPT09IFwidW5kZWZpbmVkXCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdFx0cmV0dXJuIG1lbW87XG5cdFx0fTtcblx0fSxcblx0aXNPbGRJRSA9IG1lbW9pemUoZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIC9tc2llIFs2LTldXFxiLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xuXHR9KSxcblx0Z2V0SGVhZEVsZW1lbnQgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XG5cdH0pLFxuXHRzaW5nbGV0b25FbGVtZW50ID0gbnVsbCxcblx0c2luZ2xldG9uQ291bnRlciA9IDAsXG5cdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wID0gW107XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykge1xuXHRpZih0eXBlb2YgREVCVUcgIT09IFwidW5kZWZpbmVkXCIgJiYgREVCVUcpIHtcblx0XHRpZih0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcblx0fVxuXG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cblx0Ly8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXHRpZiAodHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSBib3R0b20gb2YgPGhlYWQ+LlxuXHRpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xuXG5cdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCk7XG5cdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG5cdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cdFx0XHRkb21TdHlsZS5yZWZzLS07XG5cdFx0XHRtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XG5cdFx0fVxuXHRcdGlmKG5ld0xpc3QpIHtcblx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCk7XG5cdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuXHRcdH1cblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XG5cdFx0XHRpZihkb21TdHlsZS5yZWZzID09PSAwKSB7XG5cdFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKylcblx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXSgpO1xuXHRcdFx0XHRkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKSB7XG5cdGZvcih2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblx0XHRpZihkb21TdHlsZSkge1xuXHRcdFx0ZG9tU3R5bGUucmVmcysrO1xuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuXHRcdFx0fVxuXHRcdFx0Zm9yKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBwYXJ0cyA9IFtdO1xuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0cGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cdFx0XHRzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzfTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gbGlzdFRvU3R5bGVzKGxpc3QpIHtcblx0dmFyIHN0eWxlcyA9IFtdO1xuXHR2YXIgbmV3U3R5bGVzID0ge307XG5cdGZvcih2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xuXHRcdHZhciBpZCA9IGl0ZW1bMF07XG5cdFx0dmFyIGNzcyA9IGl0ZW1bMV07XG5cdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcblx0XHR2YXIgc291cmNlTWFwID0gaXRlbVszXTtcblx0XHR2YXIgcGFydCA9IHtjc3M6IGNzcywgbWVkaWE6IG1lZGlhLCBzb3VyY2VNYXA6IHNvdXJjZU1hcH07XG5cdFx0aWYoIW5ld1N0eWxlc1tpZF0pXG5cdFx0XHRzdHlsZXMucHVzaChuZXdTdHlsZXNbaWRdID0ge2lkOiBpZCwgcGFydHM6IFtwYXJ0XX0pO1xuXHRcdGVsc2Vcblx0XHRcdG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcblx0fVxuXHRyZXR1cm4gc3R5bGVzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGVFbGVtZW50KSB7XG5cdHZhciBoZWFkID0gZ2V0SGVhZEVsZW1lbnQoKTtcblx0dmFyIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wID0gc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3Bbc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AubGVuZ3RoIC0gMV07XG5cdGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcInRvcFwiKSB7XG5cdFx0aWYoIWxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wKSB7XG5cdFx0XHRoZWFkLmluc2VydEJlZm9yZShzdHlsZUVsZW1lbnQsIGhlYWQuZmlyc3RDaGlsZCk7XG5cdFx0fSBlbHNlIGlmKGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKSB7XG5cdFx0XHRoZWFkLmluc2VydEJlZm9yZShzdHlsZUVsZW1lbnQsIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuXHRcdH1cblx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5wdXNoKHN0eWxlRWxlbWVudCk7XG5cdH0gZWxzZSBpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJib3R0b21cIikge1xuXHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgJ2luc2VydEF0Jy4gTXVzdCBiZSAndG9wJyBvciAnYm90dG9tJy5cIik7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCkge1xuXHRzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xuXHR2YXIgaWR4ID0gc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZUVsZW1lbnQpO1xuXHRpZihpZHggPj0gMCkge1xuXHRcdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLnNwbGljZShpZHgsIDEpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSB7XG5cdHZhciBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cdHN0eWxlRWxlbWVudC50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGVFbGVtZW50KTtcblx0cmV0dXJuIHN0eWxlRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZUVsZW1lbnQsIHVwZGF0ZSwgcmVtb3ZlO1xuXG5cdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuXHRcdHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuXHRcdHN0eWxlRWxlbWVudCA9IHNpbmdsZXRvbkVsZW1lbnQgfHwgKHNpbmdsZXRvbkVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuXHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIGZhbHNlKTtcblx0XHRyZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCB0cnVlKTtcblx0fSBlbHNlIHtcblx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcblx0XHR9O1xuXHR9XG5cblx0dXBkYXRlKG9iaik7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuXHRcdGlmKG5ld09iaikge1xuXHRcdFx0aWYobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKVxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVtb3ZlKCk7XG5cdFx0fVxuXHR9O1xufVxuXG52YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHR2YXIgdGV4dFN0b3JlID0gW107XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cdFx0cmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG5cdH07XG59KSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlRWxlbWVudCwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG5cdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcblxuXHRpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGVFbGVtZW50LmNoaWxkTm9kZXM7XG5cdFx0aWYgKGNoaWxkTm9kZXNbaW5kZXhdKSBzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0c3R5bGVFbGVtZW50Lmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZUVsZW1lbnQsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuXHRpZiAobWVkaWEpIHtcblx0XHRzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpO1xuXHR9XG5cblx0aWYgKHNvdXJjZU1hcCkge1xuXHRcdC8vIGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vZGV2dG9vbHMvZG9jcy9qYXZhc2NyaXB0LWRlYnVnZ2luZ1xuXHRcdC8vIHRoaXMgbWFrZXMgc291cmNlIG1hcHMgaW5zaWRlIHN0eWxlIHRhZ3Mgd29yayBwcm9wZXJseSBpbiBDaHJvbWVcblx0XHRjc3MgKz0gJ1xcbi8qIyBzb3VyY2VVUkw9JyArIHNvdXJjZU1hcC5zb3VyY2VzWzBdICsgJyAqLyc7XG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY2MDM4NzVcblx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdH1cblxuXHRpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuXHR9IGVsc2Uge1xuXHRcdHdoaWxlKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpO1xuXHRcdH1cblx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG5cdH1cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXG4gKiogbW9kdWxlIGlkID0gMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGNoZWNrR2xvYmFsID0gcmVxdWlyZSgnLi9fY2hlY2tHbG9iYWwnKTtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlR2xvYmFsID0gY2hlY2tHbG9iYWwodHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwpO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xudmFyIGZyZWVTZWxmID0gY2hlY2tHbG9iYWwodHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZik7XG5cbi8qKiBEZXRlY3QgYHRoaXNgIGFzIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHRoaXNHbG9iYWwgPSBjaGVja0dsb2JhbCh0eXBlb2YgdGhpcyA9PSAnb2JqZWN0JyAmJiB0aGlzKTtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgdGhpc0dsb2JhbCB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvb3Q7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3Jvb3QuanNcbiAqKiBtb2R1bGUgaWQgPSAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYW4gYEFycmF5YCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQHR5cGUge0Z1bmN0aW9ufVxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXkoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheSgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGlzQXJyYXk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaXNBcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlSXNOYXRpdmUgPSByZXF1aXJlKCcuL19iYXNlSXNOYXRpdmUnKSxcbiAgICBnZXRWYWx1ZSA9IHJlcXVpcmUoJy4vX2dldFZhbHVlJyk7XG5cbi8qKlxuICogR2V0cyB0aGUgbmF0aXZlIGZ1bmN0aW9uIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIG1ldGhvZCB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZnVuY3Rpb24gaWYgaXQncyBuYXRpdmUsIGVsc2UgYHVuZGVmaW5lZGAuXG4gKi9cbmZ1bmN0aW9uIGdldE5hdGl2ZShvYmplY3QsIGtleSkge1xuICB2YXIgdmFsdWUgPSBnZXRWYWx1ZShvYmplY3QsIGtleSk7XG4gIHJldHVybiBiYXNlSXNOYXRpdmUodmFsdWUpID8gdmFsdWUgOiB1bmRlZmluZWQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0TmF0aXZlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19nZXROYXRpdmUuanNcbiAqKiBtb2R1bGUgaWQgPSA1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChfLm5vb3ApO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc09iamVjdDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9pc09iamVjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vYXBpLXRhYmxlLnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vYXBpLXRhYmxlLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9hcGktdGFibGUuaHRtbFwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9kZXYvc3JjL2NvbXBvbmVudHMvYXBpLXRhYmxlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzT2JqZWN0TGlrZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9pc09iamVjdExpa2UuanNcbiAqKiBtb2R1bGUgaWQgPSA4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgbGlzdENhY2hlQ2xlYXIgPSByZXF1aXJlKCcuL19saXN0Q2FjaGVDbGVhcicpLFxuICAgIGxpc3RDYWNoZURlbGV0ZSA9IHJlcXVpcmUoJy4vX2xpc3RDYWNoZURlbGV0ZScpLFxuICAgIGxpc3RDYWNoZUdldCA9IHJlcXVpcmUoJy4vX2xpc3RDYWNoZUdldCcpLFxuICAgIGxpc3RDYWNoZUhhcyA9IHJlcXVpcmUoJy4vX2xpc3RDYWNoZUhhcycpLFxuICAgIGxpc3RDYWNoZVNldCA9IHJlcXVpcmUoJy4vX2xpc3RDYWNoZVNldCcpO1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gbGlzdCBjYWNoZSBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIExpc3RDYWNoZShlbnRyaWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gZW50cmllcyA/IGVudHJpZXMubGVuZ3RoIDogMDtcblxuICB0aGlzLmNsZWFyKCk7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG4gICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcbiAgfVxufVxuXG4vLyBBZGQgbWV0aG9kcyB0byBgTGlzdENhY2hlYC5cbkxpc3RDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBsaXN0Q2FjaGVDbGVhcjtcbkxpc3RDYWNoZS5wcm90b3R5cGVbJ2RlbGV0ZSddID0gbGlzdENhY2hlRGVsZXRlO1xuTGlzdENhY2hlLnByb3RvdHlwZS5nZXQgPSBsaXN0Q2FjaGVHZXQ7XG5MaXN0Q2FjaGUucHJvdG90eXBlLmhhcyA9IGxpc3RDYWNoZUhhcztcbkxpc3RDYWNoZS5wcm90b3R5cGUuc2V0ID0gbGlzdENhY2hlU2V0O1xuXG5tb2R1bGUuZXhwb3J0cyA9IExpc3RDYWNoZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fTGlzdENhY2hlLmpzXG4gKiogbW9kdWxlIGlkID0gOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGVxID0gcmVxdWlyZSgnLi9lcScpO1xuXG4vKipcbiAqIEdldHMgdGhlIGluZGV4IGF0IHdoaWNoIHRoZSBga2V5YCBpcyBmb3VuZCBpbiBgYXJyYXlgIG9mIGtleS12YWx1ZSBwYWlycy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cbiAqIEBwYXJhbSB7Kn0ga2V5IFRoZSBrZXkgdG8gc2VhcmNoIGZvci5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG4gKi9cbmZ1bmN0aW9uIGFzc29jSW5kZXhPZihhcnJheSwga2V5KSB7XG4gIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG4gIHdoaWxlIChsZW5ndGgtLSkge1xuICAgIGlmIChlcShhcnJheVtsZW5ndGhdWzBdLCBrZXkpKSB7XG4gICAgICByZXR1cm4gbGVuZ3RoO1xuICAgIH1cbiAgfVxuICByZXR1cm4gLTE7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYXNzb2NJbmRleE9mO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19hc3NvY0luZGV4T2YuanNcbiAqKiBtb2R1bGUgaWQgPSAxMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzS2V5YWJsZSA9IHJlcXVpcmUoJy4vX2lzS2V5YWJsZScpO1xuXG4vKipcbiAqIEdldHMgdGhlIGRhdGEgZm9yIGBtYXBgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSByZWZlcmVuY2Uga2V5LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIG1hcCBkYXRhLlxuICovXG5mdW5jdGlvbiBnZXRNYXBEYXRhKG1hcCwga2V5KSB7XG4gIHZhciBkYXRhID0gbWFwLl9fZGF0YV9fO1xuICByZXR1cm4gaXNLZXlhYmxlKGtleSlcbiAgICA/IGRhdGFbdHlwZW9mIGtleSA9PSAnc3RyaW5nJyA/ICdzdHJpbmcnIDogJ2hhc2gnXVxuICAgIDogZGF0YS5tYXA7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0TWFwRGF0YTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fZ2V0TWFwRGF0YS5qc1xuICoqIG1vZHVsZSBpZCA9IDExXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNBcnJheSA9IHJlcXVpcmUoJy4vaXNBcnJheScpLFxuICAgIGlzU3ltYm9sID0gcmVxdWlyZSgnLi9pc1N5bWJvbCcpO1xuXG4vKiogVXNlZCB0byBtYXRjaCBwcm9wZXJ0eSBuYW1lcyB3aXRoaW4gcHJvcGVydHkgcGF0aHMuICovXG52YXIgcmVJc0RlZXBQcm9wID0gL1xcLnxcXFsoPzpbXltcXF1dKnwoW1wiJ10pKD86KD8hXFwxKVteXFxcXF18XFxcXC4pKj9cXDEpXFxdLyxcbiAgICByZUlzUGxhaW5Qcm9wID0gL15cXHcqJC87XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lIGFuZCBub3QgYSBwcm9wZXJ0eSBwYXRoLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5IGtleXMgb24uXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNLZXkodmFsdWUsIG9iamVjdCkge1xuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIGlmICh0eXBlID09ICdudW1iZXInIHx8IHR5cGUgPT0gJ3N5bWJvbCcgfHwgdHlwZSA9PSAnYm9vbGVhbicgfHxcbiAgICAgIHZhbHVlID09IG51bGwgfHwgaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIHJlSXNQbGFpblByb3AudGVzdCh2YWx1ZSkgfHwgIXJlSXNEZWVwUHJvcC50ZXN0KHZhbHVlKSB8fFxuICAgIChvYmplY3QgIT0gbnVsbCAmJiB2YWx1ZSBpbiBPYmplY3Qob2JqZWN0KSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNLZXk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2lzS2V5LmpzXG4gKiogbW9kdWxlIGlkID0gMTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnZXROYXRpdmUgPSByZXF1aXJlKCcuL19nZXROYXRpdmUnKTtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xudmFyIG5hdGl2ZUNyZWF0ZSA9IGdldE5hdGl2ZShPYmplY3QsICdjcmVhdGUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBuYXRpdmVDcmVhdGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX25hdGl2ZUNyZWF0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNTeW1ib2wgPSByZXF1aXJlKCcuL2lzU3ltYm9sJyk7XG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIElORklOSVRZID0gMSAvIDA7XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZyBrZXkgaWYgaXQncyBub3QgYSBzdHJpbmcgb3Igc3ltYm9sLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBpbnNwZWN0LlxuICogQHJldHVybnMge3N0cmluZ3xzeW1ib2x9IFJldHVybnMgdGhlIGtleS5cbiAqL1xuZnVuY3Rpb24gdG9LZXkodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyB8fCBpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgdmFyIHJlc3VsdCA9ICh2YWx1ZSArICcnKTtcbiAgcmV0dXJuIChyZXN1bHQgPT0gJzAnICYmICgxIC8gdmFsdWUpID09IC1JTkZJTklUWSkgPyAnLTAnIDogcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRvS2V5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL190b0tleS5qc1xuICoqIG1vZHVsZSBpZCA9IDE0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgbGVuZ3RoLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGxvb3NlbHkgYmFzZWQgb25cbiAqIFtgVG9MZW5ndGhgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy10b2xlbmd0aCkuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzTGVuZ3RoKDMpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNMZW5ndGgoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNMZW5ndGgoSW5maW5pdHkpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzTGVuZ3RoKCczJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmXG4gICAgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzTGVuZ3RoO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzTGVuZ3RoLmpzXG4gKiogbW9kdWxlIGlkID0gMTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc09iamVjdExpa2UgPSByZXF1aXJlKCcuL2lzT2JqZWN0TGlrZScpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNTeW1ib2woJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3ltYm9sJyB8fFxuICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNTeW1ib2w7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaXNTeW1ib2wuanNcbiAqKiBtb2R1bGUgaWQgPSAxNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIG1hcENhY2hlQ2xlYXIgPSByZXF1aXJlKCcuL19tYXBDYWNoZUNsZWFyJyksXG4gICAgbWFwQ2FjaGVEZWxldGUgPSByZXF1aXJlKCcuL19tYXBDYWNoZURlbGV0ZScpLFxuICAgIG1hcENhY2hlR2V0ID0gcmVxdWlyZSgnLi9fbWFwQ2FjaGVHZXQnKSxcbiAgICBtYXBDYWNoZUhhcyA9IHJlcXVpcmUoJy4vX21hcENhY2hlSGFzJyksXG4gICAgbWFwQ2FjaGVTZXQgPSByZXF1aXJlKCcuL19tYXBDYWNoZVNldCcpO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBtYXAgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIGtleS12YWx1ZSBwYWlycy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cbiAqL1xuZnVuY3Rpb24gTWFwQ2FjaGUoZW50cmllcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGVudHJpZXMgPyBlbnRyaWVzLmxlbmd0aCA6IDA7XG5cbiAgdGhpcy5jbGVhcigpO1xuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7XG4gIH1cbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYE1hcENhY2hlYC5cbk1hcENhY2hlLnByb3RvdHlwZS5jbGVhciA9IG1hcENhY2hlQ2xlYXI7XG5NYXBDYWNoZS5wcm90b3R5cGVbJ2RlbGV0ZSddID0gbWFwQ2FjaGVEZWxldGU7XG5NYXBDYWNoZS5wcm90b3R5cGUuZ2V0ID0gbWFwQ2FjaGVHZXQ7XG5NYXBDYWNoZS5wcm90b3R5cGUuaGFzID0gbWFwQ2FjaGVIYXM7XG5NYXBDYWNoZS5wcm90b3R5cGUuc2V0ID0gbWFwQ2FjaGVTZXQ7XG5cbm1vZHVsZS5leHBvcnRzID0gTWFwQ2FjaGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX01hcENhY2hlLmpzXG4gKiogbW9kdWxlIGlkID0gMTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vaXNPYmplY3QnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuICAgIGdlblRhZyA9ICdbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXSc7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgRnVuY3Rpb25gIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNGdW5jdGlvbihfKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzRnVuY3Rpb24oL2FiYy8pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkge1xuICAvLyBUaGUgdXNlIG9mIGBPYmplY3QjdG9TdHJpbmdgIGF2b2lkcyBpc3N1ZXMgd2l0aCB0aGUgYHR5cGVvZmAgb3BlcmF0b3JcbiAgLy8gaW4gU2FmYXJpIDggd2hpY2ggcmV0dXJucyAnb2JqZWN0JyBmb3IgdHlwZWQgYXJyYXkgYW5kIHdlYWsgbWFwIGNvbnN0cnVjdG9ycyxcbiAgLy8gYW5kIFBoYW50b21KUyAxLjkgd2hpY2ggcmV0dXJucyAnZnVuY3Rpb24nIGZvciBgTm9kZUxpc3RgIGluc3RhbmNlcy5cbiAgdmFyIHRhZyA9IGlzT2JqZWN0KHZhbHVlKSA/IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpIDogJyc7XG4gIHJldHVybiB0YWcgPT0gZnVuY1RhZyB8fCB0YWcgPT0gZ2VuVGFnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzRnVuY3Rpb247XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaXNGdW5jdGlvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDE4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcblxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG4oZnVuY3Rpb24gKCkge1xuICB0cnkge1xuICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICB9IGNhdGNoIChlKSB7XG4gICAgY2FjaGVkU2V0VGltZW91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBpcyBub3QgZGVmaW5lZCcpO1xuICAgIH1cbiAgfVxuICB0cnkge1xuICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGlzIG5vdCBkZWZpbmVkJyk7XG4gICAgfVxuICB9XG59ICgpKVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gY2FjaGVkU2V0VGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgY2FjaGVkQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dChkcmFpblF1ZXVlLCAwKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Byb2Nlc3MvYnJvd3Nlci5qc1xuICoqIG1vZHVsZSBpZCA9IDE5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKlxuICBAZGVzYyBBZGQgYmVoYXZpb3IgdG8gYW55IGVsZW1lbnQuXG4gIFdoZW4gZXZhbCB0byB0cnVlLCBpdCB3aWxsIHNldCBlbGVtZW50IHRhYiBpbmRleCB0byAwIGFuZCBmb2N1cyBvbiBpdC5cbiAgRXhhbXBsZTogPGRpdiBzZXQtZm9jdXM9XCJ3aWxsRm9jdXNXaGVuVHJ1ZVwiPjwvZGl2PlxuKi9cblxuaW1wb3J0IGRlZmVyIGZyb20gJ2xvZGFzaC9kZWZlcic7XG5leHBvcnQgZGVmYXVsdCB7XG4gIHVwZGF0ZShuZXdWYWwpIHtcbiAgICBpZiAobmV3VmFsID09PSB0cnVlKSB7XG4gICAgICBkZWZlcigoKSA9PiB7XG4gICAgICAgIHRoaXMuZWwudGFiSW5kZXggPSAwO1xuICAgICAgICB0aGlzLmVsLmZvY3VzKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvZGlyZWN0aXZlcy9zZXQtZm9jdXMuanNcbiAqKi8iLCJpbXBvcnQgZXZlbnRzIGZyb20gJy4vZXZlbnRzJztcbmltcG9ydCB4aHJSZXNwb25zZSBmcm9tICcuL3hoci1yZXNwb25zZSc7XG5leHBvcnQgZGVmYXVsdCBbXG4gIGV2ZW50cyxcbiAgeGhyUmVzcG9uc2UsXG5dO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvbWl4aW5zL2luZGV4LmpzXG4gKiovIiwidmFyIGdldE5hdGl2ZSA9IHJlcXVpcmUoJy4vX2dldE5hdGl2ZScpLFxuICAgIHJvb3QgPSByZXF1aXJlKCcuL19yb290Jyk7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cbnZhciBNYXAgPSBnZXROYXRpdmUocm9vdCwgJ01hcCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1hcDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fTWFwLmpzXG4gKiogbW9kdWxlIGlkID0gMjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBMaXN0Q2FjaGUgPSByZXF1aXJlKCcuL19MaXN0Q2FjaGUnKSxcbiAgICBzdGFja0NsZWFyID0gcmVxdWlyZSgnLi9fc3RhY2tDbGVhcicpLFxuICAgIHN0YWNrRGVsZXRlID0gcmVxdWlyZSgnLi9fc3RhY2tEZWxldGUnKSxcbiAgICBzdGFja0dldCA9IHJlcXVpcmUoJy4vX3N0YWNrR2V0JyksXG4gICAgc3RhY2tIYXMgPSByZXF1aXJlKCcuL19zdGFja0hhcycpLFxuICAgIHN0YWNrU2V0ID0gcmVxdWlyZSgnLi9fc3RhY2tTZXQnKTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgc3RhY2sgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIGtleS12YWx1ZSBwYWlycy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cbiAqL1xuZnVuY3Rpb24gU3RhY2soZW50cmllcykge1xuICB0aGlzLl9fZGF0YV9fID0gbmV3IExpc3RDYWNoZShlbnRyaWVzKTtcbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYFN0YWNrYC5cblN0YWNrLnByb3RvdHlwZS5jbGVhciA9IHN0YWNrQ2xlYXI7XG5TdGFjay5wcm90b3R5cGVbJ2RlbGV0ZSddID0gc3RhY2tEZWxldGU7XG5TdGFjay5wcm90b3R5cGUuZ2V0ID0gc3RhY2tHZXQ7XG5TdGFjay5wcm90b3R5cGUuaGFzID0gc3RhY2tIYXM7XG5TdGFjay5wcm90b3R5cGUuc2V0ID0gc3RhY2tTZXQ7XG5cbm1vZHVsZS5leHBvcnRzID0gU3RhY2s7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX1N0YWNrLmpzXG4gKiogbW9kdWxlIGlkID0gMjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciByb290ID0gcmVxdWlyZSgnLi9fcm9vdCcpO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBTeW1ib2wgPSByb290LlN5bWJvbDtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW1ib2w7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX1N5bWJvbC5qc1xuICoqIG1vZHVsZSBpZCA9IDI0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgY2FzdFBhdGggPSByZXF1aXJlKCcuL19jYXN0UGF0aCcpLFxuICAgIGlzS2V5ID0gcmVxdWlyZSgnLi9faXNLZXknKSxcbiAgICB0b0tleSA9IHJlcXVpcmUoJy4vX3RvS2V5Jyk7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZ2V0YCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZmF1bHQgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuICovXG5mdW5jdGlvbiBiYXNlR2V0KG9iamVjdCwgcGF0aCkge1xuICBwYXRoID0gaXNLZXkocGF0aCwgb2JqZWN0KSA/IFtwYXRoXSA6IGNhc3RQYXRoKHBhdGgpO1xuXG4gIHZhciBpbmRleCA9IDAsXG4gICAgICBsZW5ndGggPSBwYXRoLmxlbmd0aDtcblxuICB3aGlsZSAob2JqZWN0ICE9IG51bGwgJiYgaW5kZXggPCBsZW5ndGgpIHtcbiAgICBvYmplY3QgPSBvYmplY3RbdG9LZXkocGF0aFtpbmRleCsrXSldO1xuICB9XG4gIHJldHVybiAoaW5kZXggJiYgaW5kZXggPT0gbGVuZ3RoKSA/IG9iamVjdCA6IHVuZGVmaW5lZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlR2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlR2V0LmpzXG4gKiogbW9kdWxlIGlkID0gMjVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnZXRQcm90b3R5cGUgPSByZXF1aXJlKCcuL19nZXRQcm90b3R5cGUnKTtcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5oYXNgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ30ga2V5IFRoZSBrZXkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VIYXMob2JqZWN0LCBrZXkpIHtcbiAgLy8gQXZvaWQgYSBidWcgaW4gSUUgMTAtMTEgd2hlcmUgb2JqZWN0cyB3aXRoIGEgW1tQcm90b3R5cGVdXSBvZiBgbnVsbGAsXG4gIC8vIHRoYXQgYXJlIGNvbXBvc2VkIGVudGlyZWx5IG9mIGluZGV4IHByb3BlcnRpZXMsIHJldHVybiBgZmFsc2VgIGZvclxuICAvLyBgaGFzT3duUHJvcGVydHlgIGNoZWNrcyBvZiB0aGVtLlxuICByZXR1cm4gb2JqZWN0ICE9IG51bGwgJiZcbiAgICAoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkgfHxcbiAgICAgICh0eXBlb2Ygb2JqZWN0ID09ICdvYmplY3QnICYmIGtleSBpbiBvYmplY3QgJiYgZ2V0UHJvdG90eXBlKG9iamVjdCkgPT09IG51bGwpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlSGFzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlSGFzLmpzXG4gKiogbW9kdWxlIGlkID0gMjZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlSXNFcXVhbERlZXAgPSByZXF1aXJlKCcuL19iYXNlSXNFcXVhbERlZXAnKSxcbiAgICBpc09iamVjdCA9IHJlcXVpcmUoJy4vaXNPYmplY3QnKSxcbiAgICBpc09iamVjdExpa2UgPSByZXF1aXJlKCcuL2lzT2JqZWN0TGlrZScpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzRXF1YWxgIHdoaWNoIHN1cHBvcnRzIHBhcnRpYWwgY29tcGFyaXNvbnNcbiAqIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtiaXRtYXNrXSBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLlxuICogIFRoZSBiaXRtYXNrIG1heSBiZSBjb21wb3NlZCBvZiB0aGUgZm9sbG93aW5nIGZsYWdzOlxuICogICAgIDEgLSBVbm9yZGVyZWQgY29tcGFyaXNvblxuICogICAgIDIgLSBQYXJ0aWFsIGNvbXBhcmlzb25cbiAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhY2tdIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBhbmQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzRXF1YWwodmFsdWUsIG90aGVyLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuICBpZiAodmFsdWUgPT09IG90aGVyKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKHZhbHVlID09IG51bGwgfHwgb3RoZXIgPT0gbnVsbCB8fCAoIWlzT2JqZWN0KHZhbHVlKSAmJiAhaXNPYmplY3RMaWtlKG90aGVyKSkpIHtcbiAgICByZXR1cm4gdmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcjtcbiAgfVxuICByZXR1cm4gYmFzZUlzRXF1YWxEZWVwKHZhbHVlLCBvdGhlciwgYmFzZUlzRXF1YWwsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlSXNFcXVhbDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUlzRXF1YWwuanNcbiAqKiBtb2R1bGUgaWQgPSAyN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eWAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlUHJvcGVydHkoa2V5KSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlUHJvcGVydHk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VQcm9wZXJ0eS5qc1xuICoqIG1vZHVsZSBpZCA9IDI4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNBcnJheSA9IHJlcXVpcmUoJy4vaXNBcnJheScpLFxuICAgIHN0cmluZ1RvUGF0aCA9IHJlcXVpcmUoJy4vX3N0cmluZ1RvUGF0aCcpO1xuXG4vKipcbiAqIENhc3RzIGB2YWx1ZWAgdG8gYSBwYXRoIGFycmF5IGlmIGl0J3Mgbm90IG9uZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gaW5zcGVjdC5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgY2FzdCBwcm9wZXJ0eSBwYXRoIGFycmF5LlxuICovXG5mdW5jdGlvbiBjYXN0UGF0aCh2YWx1ZSkge1xuICByZXR1cm4gaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IHN0cmluZ1RvUGF0aCh2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY2FzdFBhdGg7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Nhc3RQYXRoLmpzXG4gKiogbW9kdWxlIGlkID0gMjlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBTZXRDYWNoZSA9IHJlcXVpcmUoJy4vX1NldENhY2hlJyksXG4gICAgYXJyYXlTb21lID0gcmVxdWlyZSgnLi9fYXJyYXlTb21lJyk7XG5cbi8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNvbXBhcmlzb24gc3R5bGVzLiAqL1xudmFyIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgPSAxLFxuICAgIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGFycmF5cyB3aXRoIHN1cHBvcnQgZm9yXG4gKiBwYXJ0aWFsIGRlZXAgY29tcGFyaXNvbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBjb21wYXJlLlxuICogQHBhcmFtIHtBcnJheX0gb3RoZXIgVGhlIG90aGVyIGFycmF5IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYFxuICogIGZvciBtb3JlIGRldGFpbHMuXG4gKiBAcGFyYW0ge09iamVjdH0gc3RhY2sgVHJhY2tzIHRyYXZlcnNlZCBgYXJyYXlgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGFycmF5cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBlcXVhbEFycmF5cyhhcnJheSwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcbiAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRyxcbiAgICAgIGFyckxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgIG90aExlbmd0aCA9IG90aGVyLmxlbmd0aDtcblxuICBpZiAoYXJyTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhKGlzUGFydGlhbCAmJiBvdGhMZW5ndGggPiBhcnJMZW5ndGgpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cbiAgdmFyIHN0YWNrZWQgPSBzdGFjay5nZXQoYXJyYXkpO1xuICBpZiAoc3RhY2tlZCkge1xuICAgIHJldHVybiBzdGFja2VkID09IG90aGVyO1xuICB9XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcmVzdWx0ID0gdHJ1ZSxcbiAgICAgIHNlZW4gPSAoYml0bWFzayAmIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcpID8gbmV3IFNldENhY2hlIDogdW5kZWZpbmVkO1xuXG4gIHN0YWNrLnNldChhcnJheSwgb3RoZXIpO1xuXG4gIC8vIElnbm9yZSBub24taW5kZXggcHJvcGVydGllcy5cbiAgd2hpbGUgKCsraW5kZXggPCBhcnJMZW5ndGgpIHtcbiAgICB2YXIgYXJyVmFsdWUgPSBhcnJheVtpbmRleF0sXG4gICAgICAgIG90aFZhbHVlID0gb3RoZXJbaW5kZXhdO1xuXG4gICAgaWYgKGN1c3RvbWl6ZXIpIHtcbiAgICAgIHZhciBjb21wYXJlZCA9IGlzUGFydGlhbFxuICAgICAgICA/IGN1c3RvbWl6ZXIob3RoVmFsdWUsIGFyclZhbHVlLCBpbmRleCwgb3RoZXIsIGFycmF5LCBzdGFjaylcbiAgICAgICAgOiBjdXN0b21pemVyKGFyclZhbHVlLCBvdGhWYWx1ZSwgaW5kZXgsIGFycmF5LCBvdGhlciwgc3RhY2spO1xuICAgIH1cbiAgICBpZiAoY29tcGFyZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKGNvbXBhcmVkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICBpZiAoc2Vlbikge1xuICAgICAgaWYgKCFhcnJheVNvbWUob3RoZXIsIGZ1bmN0aW9uKG90aFZhbHVlLCBvdGhJbmRleCkge1xuICAgICAgICAgICAgaWYgKCFzZWVuLmhhcyhvdGhJbmRleCkgJiZcbiAgICAgICAgICAgICAgICAoYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNlZW4uYWRkKG90aEluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSkge1xuICAgICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghKFxuICAgICAgICAgIGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fFxuICAgICAgICAgICAgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spXG4gICAgICAgICkpIHtcbiAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHN0YWNrWydkZWxldGUnXShhcnJheSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXF1YWxBcnJheXM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2VxdWFsQXJyYXlzLmpzXG4gKiogbW9kdWxlIGlkID0gMzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBob3N0IG9iamVjdCBpbiBJRSA8IDkuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBob3N0IG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0hvc3RPYmplY3QodmFsdWUpIHtcbiAgLy8gTWFueSBob3N0IG9iamVjdHMgYXJlIGBPYmplY3RgIG9iamVjdHMgdGhhdCBjYW4gY29lcmNlIHRvIHN0cmluZ3NcbiAgLy8gZGVzcGl0ZSBoYXZpbmcgaW1wcm9wZXJseSBkZWZpbmVkIGB0b1N0cmluZ2AgbWV0aG9kcy5cbiAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuICBpZiAodmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUudG9TdHJpbmcgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRyeSB7XG4gICAgICByZXN1bHQgPSAhISh2YWx1ZSArICcnKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNIb3N0T2JqZWN0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19pc0hvc3RPYmplY3QuanNcbiAqKiBtb2R1bGUgaWQgPSAzMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCB1bnNpZ25lZCBpbnRlZ2VyIHZhbHVlcy4gKi9cbnZhciByZUlzVWludCA9IC9eKD86MHxbMS05XVxcZCopJC87XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGluZGV4LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoPU1BWF9TQUZFX0lOVEVHRVJdIFRoZSB1cHBlciBib3VuZHMgb2YgYSB2YWxpZCBpbmRleC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgaW5kZXgsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNJbmRleCh2YWx1ZSwgbGVuZ3RoKSB7XG4gIGxlbmd0aCA9IGxlbmd0aCA9PSBudWxsID8gTUFYX1NBRkVfSU5URUdFUiA6IGxlbmd0aDtcbiAgcmV0dXJuICEhbGVuZ3RoICYmXG4gICAgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyB8fCByZUlzVWludC50ZXN0KHZhbHVlKSkgJiZcbiAgICAodmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8IGxlbmd0aCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNJbmRleDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faXNJbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDMyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL2lzT2JqZWN0Jyk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgc3VpdGFibGUgZm9yIHN0cmljdCBlcXVhbGl0eSBjb21wYXJpc29ucywgaS5lLiBgPT09YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpZiBzdWl0YWJsZSBmb3Igc3RyaWN0XG4gKiAgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNTdHJpY3RDb21wYXJhYmxlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gdmFsdWUgJiYgIWlzT2JqZWN0KHZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1N0cmljdENvbXBhcmFibGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2lzU3RyaWN0Q29tcGFyYWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDMzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgbWF0Y2hlc1Byb3BlcnR5YCBmb3Igc291cmNlIHZhbHVlcyBzdWl0YWJsZVxuICogZm9yIHN0cmljdCBlcXVhbGl0eSBjb21wYXJpc29ucywgaS5lLiBgPT09YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcGFyYW0geyp9IHNyY1ZhbHVlIFRoZSB2YWx1ZSB0byBtYXRjaC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHNwZWMgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlKGtleSwgc3JjVmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0W2tleV0gPT09IHNyY1ZhbHVlICYmXG4gICAgICAoc3JjVmFsdWUgIT09IHVuZGVmaW5lZCB8fCAoa2V5IGluIE9iamVjdChvYmplY3QpKSk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbWF0Y2hlc1N0cmljdENvbXBhcmFibGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX21hdGNoZXNTdHJpY3RDb21wYXJhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGRlY29tcGlsZWQgc291cmNlIG9mIGZ1bmN0aW9ucy4gKi9cbnZhciBmdW5jVG9TdHJpbmcgPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8qKlxuICogQ29udmVydHMgYGZ1bmNgIHRvIGl0cyBzb3VyY2UgY29kZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHNvdXJjZSBjb2RlLlxuICovXG5mdW5jdGlvbiB0b1NvdXJjZShmdW5jKSB7XG4gIGlmIChmdW5jICE9IG51bGwpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGZ1bmNUb1N0cmluZy5jYWxsKGZ1bmMpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiAoZnVuYyArICcnKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICB9XG4gIHJldHVybiAnJztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0b1NvdXJjZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fdG9Tb3VyY2UuanNcbiAqKiBtb2R1bGUgaWQgPSAzNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VEZWxheSA9IHJlcXVpcmUoJy4vX2Jhc2VEZWxheScpLFxuICAgIHJlc3QgPSByZXF1aXJlKCcuL3Jlc3QnKTtcblxuLyoqXG4gKiBEZWZlcnMgaW52b2tpbmcgdGhlIGBmdW5jYCB1bnRpbCB0aGUgY3VycmVudCBjYWxsIHN0YWNrIGhhcyBjbGVhcmVkLiBBbnlcbiAqIGFkZGl0aW9uYWwgYXJndW1lbnRzIGFyZSBwcm92aWRlZCB0byBgZnVuY2Agd2hlbiBpdCdzIGludm9rZWQuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWZlci5cbiAqIEBwYXJhbSB7Li4uKn0gW2FyZ3NdIFRoZSBhcmd1bWVudHMgdG8gaW52b2tlIGBmdW5jYCB3aXRoLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXIgaWQuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uZGVmZXIoZnVuY3Rpb24odGV4dCkge1xuICogICBjb25zb2xlLmxvZyh0ZXh0KTtcbiAqIH0sICdkZWZlcnJlZCcpO1xuICogLy8gPT4gTG9ncyAnZGVmZXJyZWQnIGFmdGVyIG9uZSBvciBtb3JlIG1pbGxpc2Vjb25kcy5cbiAqL1xudmFyIGRlZmVyID0gcmVzdChmdW5jdGlvbihmdW5jLCBhcmdzKSB7XG4gIHJldHVybiBiYXNlRGVsYXkoZnVuYywgMSwgYXJncyk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBkZWZlcjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9kZWZlci5qc1xuICoqIG1vZHVsZSBpZCA9IDM2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNBcnJheUxpa2VPYmplY3QgPSByZXF1aXJlKCcuL2lzQXJyYXlMaWtlT2JqZWN0Jyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXSc7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IG9iamVjdFByb3RvLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxpa2VseSBhbiBgYXJndW1lbnRzYCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJndW1lbnRzKGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcmd1bWVudHMoWzEsIDIsIDNdKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJndW1lbnRzKHZhbHVlKSB7XG4gIC8vIFNhZmFyaSA4LjEgaW5jb3JyZWN0bHkgbWFrZXMgYGFyZ3VtZW50cy5jYWxsZWVgIGVudW1lcmFibGUgaW4gc3RyaWN0IG1vZGUuXG4gIHJldHVybiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkgJiYgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpICYmXG4gICAgKCFwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHZhbHVlLCAnY2FsbGVlJykgfHwgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gYXJnc1RhZyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNBcmd1bWVudHM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaXNBcmd1bWVudHMuanNcbiAqKiBtb2R1bGUgaWQgPSAzN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdldExlbmd0aCA9IHJlcXVpcmUoJy4vX2dldExlbmd0aCcpLFxuICAgIGlzRnVuY3Rpb24gPSByZXF1aXJlKCcuL2lzRnVuY3Rpb24nKSxcbiAgICBpc0xlbmd0aCA9IHJlcXVpcmUoJy4vaXNMZW5ndGgnKTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLiBBIHZhbHVlIGlzIGNvbnNpZGVyZWQgYXJyYXktbGlrZSBpZiBpdCdzXG4gKiBub3QgYSBmdW5jdGlvbiBhbmQgaGFzIGEgYHZhbHVlLmxlbmd0aGAgdGhhdCdzIGFuIGludGVnZXIgZ3JlYXRlciB0aGFuIG9yXG4gKiBlcXVhbCB0byBgMGAgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byBgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZSgnYWJjJyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUxpa2UodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgaXNMZW5ndGgoZ2V0TGVuZ3RoKHZhbHVlKSkgJiYgIWlzRnVuY3Rpb24odmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzQXJyYXlMaWtlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzQXJyYXlMaWtlLmpzXG4gKiogbW9kdWxlIGlkID0gMzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc0FycmF5ID0gcmVxdWlyZSgnLi9pc0FycmF5JyksXG4gICAgaXNPYmplY3RMaWtlID0gcmVxdWlyZSgnLi9pc09iamVjdExpa2UnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN0cmluZ2AgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTdHJpbmcoJ2FiYycpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNTdHJpbmcoMSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzdHJpbmcnIHx8XG4gICAgKCFpc0FycmF5KHZhbHVlKSAmJiBpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN0cmluZ1RhZyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNTdHJpbmc7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaXNTdHJpbmcuanNcbiAqKiBtb2R1bGUgaWQgPSAzOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VIYXMgPSByZXF1aXJlKCcuL19iYXNlSGFzJyksXG4gICAgYmFzZUtleXMgPSByZXF1aXJlKCcuL19iYXNlS2V5cycpLFxuICAgIGluZGV4S2V5cyA9IHJlcXVpcmUoJy4vX2luZGV4S2V5cycpLFxuICAgIGlzQXJyYXlMaWtlID0gcmVxdWlyZSgnLi9pc0FycmF5TGlrZScpLFxuICAgIGlzSW5kZXggPSByZXF1aXJlKCcuL19pc0luZGV4JyksXG4gICAgaXNQcm90b3R5cGUgPSByZXF1aXJlKCcuL19pc1Byb3RvdHlwZScpO1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuICpcbiAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLiBTZWUgdGhlXG4gKiBbRVMgc3BlY10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LmtleXMpXG4gKiBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBzaW5jZSAwLjEuMFxuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5hID0gMTtcbiAqICAgdGhpcy5iID0gMjtcbiAqIH1cbiAqXG4gKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICpcbiAqIF8ua2V5cyhuZXcgRm9vKTtcbiAqIC8vID0+IFsnYScsICdiJ10gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAqXG4gKiBfLmtleXMoJ2hpJyk7XG4gKiAvLyA9PiBbJzAnLCAnMSddXG4gKi9cbmZ1bmN0aW9uIGtleXMob2JqZWN0KSB7XG4gIHZhciBpc1Byb3RvID0gaXNQcm90b3R5cGUob2JqZWN0KTtcbiAgaWYgKCEoaXNQcm90byB8fCBpc0FycmF5TGlrZShvYmplY3QpKSkge1xuICAgIHJldHVybiBiYXNlS2V5cyhvYmplY3QpO1xuICB9XG4gIHZhciBpbmRleGVzID0gaW5kZXhLZXlzKG9iamVjdCksXG4gICAgICBza2lwSW5kZXhlcyA9ICEhaW5kZXhlcyxcbiAgICAgIHJlc3VsdCA9IGluZGV4ZXMgfHwgW10sXG4gICAgICBsZW5ndGggPSByZXN1bHQubGVuZ3RoO1xuXG4gIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICBpZiAoYmFzZUhhcyhvYmplY3QsIGtleSkgJiZcbiAgICAgICAgIShza2lwSW5kZXhlcyAmJiAoa2V5ID09ICdsZW5ndGgnIHx8IGlzSW5kZXgoa2V5LCBsZW5ndGgpKSkgJiZcbiAgICAgICAgIShpc1Byb3RvICYmIGtleSA9PSAnY29uc3RydWN0b3InKSkge1xuICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBrZXlzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2tleXMuanNcbiAqKiBtb2R1bGUgaWQgPSA0MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIHRvRmluaXRlID0gcmVxdWlyZSgnLi90b0Zpbml0ZScpO1xuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYW4gaW50ZWdlci5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgbG9vc2VseSBiYXNlZCBvblxuICogW2BUb0ludGVnZXJgXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtdG9pbnRlZ2VyKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBpbnRlZ2VyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvSW50ZWdlcigzLjIpO1xuICogLy8gPT4gM1xuICpcbiAqIF8udG9JbnRlZ2VyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gMFxuICpcbiAqIF8udG9JbnRlZ2VyKEluZmluaXR5KTtcbiAqIC8vID0+IDEuNzk3NjkzMTM0ODYyMzE1N2UrMzA4XG4gKlxuICogXy50b0ludGVnZXIoJzMuMicpO1xuICogLy8gPT4gM1xuICovXG5mdW5jdGlvbiB0b0ludGVnZXIodmFsdWUpIHtcbiAgdmFyIHJlc3VsdCA9IHRvRmluaXRlKHZhbHVlKSxcbiAgICAgIHJlbWFpbmRlciA9IHJlc3VsdCAlIDE7XG5cbiAgcmV0dXJuIHJlc3VsdCA9PT0gcmVzdWx0ID8gKHJlbWFpbmRlciA/IHJlc3VsdCAtIHJlbWFpbmRlciA6IHJlc3VsdCkgOiAwO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRvSW50ZWdlcjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC90b0ludGVnZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA0MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCcuL2lzRnVuY3Rpb24nKSxcbiAgICBpc09iamVjdCA9IHJlcXVpcmUoJy4vaXNPYmplY3QnKSxcbiAgICBpc1N5bWJvbCA9IHJlcXVpcmUoJy4vaXNTeW1ib2wnKTtcblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgTkFOID0gMCAvIDA7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG52YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblxuLyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cbnZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvTnVtYmVyKDMuMik7XG4gKiAvLyA9PiAzLjJcbiAqXG4gKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gNWUtMzI0XG4gKlxuICogXy50b051bWJlcihJbmZpbml0eSk7XG4gKiAvLyA9PiBJbmZpbml0eVxuICpcbiAqIF8udG9OdW1iZXIoJzMuMicpO1xuICogLy8gPT4gMy4yXG4gKi9cbmZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiBOQU47XG4gIH1cbiAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgIHZhciBvdGhlciA9IGlzRnVuY3Rpb24odmFsdWUudmFsdWVPZikgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcbiAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IChvdGhlciArICcnKSA6IG90aGVyO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTtcbiAgfVxuICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCAnJyk7XG4gIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG4gIHJldHVybiAoaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpKVxuICAgID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KVxuICAgIDogKHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRvTnVtYmVyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL3RvTnVtYmVyLmpzXG4gKiogbW9kdWxlIGlkID0gNDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qIVxuICogVnVlLmpzIHYxLjAuMjZcbiAqIChjKSAyMDE2IEV2YW4gWW91XG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gc2V0KG9iaiwga2V5LCB2YWwpIHtcbiAgaWYgKGhhc093bihvYmosIGtleSkpIHtcbiAgICBvYmpba2V5XSA9IHZhbDtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKG9iai5faXNWdWUpIHtcbiAgICBzZXQob2JqLl9kYXRhLCBrZXksIHZhbCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBvYiA9IG9iai5fX29iX187XG4gIGlmICghb2IpIHtcbiAgICBvYmpba2V5XSA9IHZhbDtcbiAgICByZXR1cm47XG4gIH1cbiAgb2IuY29udmVydChrZXksIHZhbCk7XG4gIG9iLmRlcC5ub3RpZnkoKTtcbiAgaWYgKG9iLnZtcykge1xuICAgIHZhciBpID0gb2Iudm1zLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YXIgdm0gPSBvYi52bXNbaV07XG4gICAgICB2bS5fcHJveHkoa2V5KTtcbiAgICAgIHZtLl9kaWdlc3QoKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbDtcbn1cblxuLyoqXG4gKiBEZWxldGUgYSBwcm9wZXJ0eSBhbmQgdHJpZ2dlciBjaGFuZ2UgaWYgbmVjZXNzYXJ5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqL1xuXG5mdW5jdGlvbiBkZWwob2JqLCBrZXkpIHtcbiAgaWYgKCFoYXNPd24ob2JqLCBrZXkpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGRlbGV0ZSBvYmpba2V5XTtcbiAgdmFyIG9iID0gb2JqLl9fb2JfXztcbiAgaWYgKCFvYikge1xuICAgIGlmIChvYmouX2lzVnVlKSB7XG4gICAgICBkZWxldGUgb2JqLl9kYXRhW2tleV07XG4gICAgICBvYmouX2RpZ2VzdCgpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgb2IuZGVwLm5vdGlmeSgpO1xuICBpZiAob2Iudm1zKSB7XG4gICAgdmFyIGkgPSBvYi52bXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciB2bSA9IG9iLnZtc1tpXTtcbiAgICAgIHZtLl91bnByb3h5KGtleSk7XG4gICAgICB2bS5fZGlnZXN0KCk7XG4gICAgfVxuICB9XG59XG5cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG4vKipcbiAqIENoZWNrIHdoZXRoZXIgdGhlIG9iamVjdCBoYXMgdGhlIHByb3BlcnR5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaGFzT3duKG9iaiwga2V5KSB7XG4gIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBleHByZXNzaW9uIGlzIGEgbGl0ZXJhbCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbnZhciBsaXRlcmFsVmFsdWVSRSA9IC9eXFxzPyh0cnVlfGZhbHNlfC0/W1xcZFxcLl0rfCdbXiddKid8XCJbXlwiXSpcIilcXHM/JC87XG5cbmZ1bmN0aW9uIGlzTGl0ZXJhbChleHApIHtcbiAgcmV0dXJuIGxpdGVyYWxWYWx1ZVJFLnRlc3QoZXhwKTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHN0cmluZyBzdGFydHMgd2l0aCAkIG9yIF9cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzUmVzZXJ2ZWQoc3RyKSB7XG4gIHZhciBjID0gKHN0ciArICcnKS5jaGFyQ29kZUF0KDApO1xuICByZXR1cm4gYyA9PT0gMHgyNCB8fCBjID09PSAweDVGO1xufVxuXG4vKipcbiAqIEd1YXJkIHRleHQgb3V0cHV0LCBtYWtlIHN1cmUgdW5kZWZpbmVkIG91dHB1dHNcbiAqIGVtcHR5IHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBfdG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlLnRvU3RyaW5nKCk7XG59XG5cbi8qKlxuICogQ2hlY2sgYW5kIGNvbnZlcnQgcG9zc2libGUgbnVtZXJpYyBzdHJpbmdzIHRvIG51bWJlcnNcbiAqIGJlZm9yZSBzZXR0aW5nIGJhY2sgdG8gZGF0YVxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4geyp8TnVtYmVyfVxuICovXG5cbmZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9IGVsc2Uge1xuICAgIHZhciBwYXJzZWQgPSBOdW1iZXIodmFsdWUpO1xuICAgIHJldHVybiBpc05hTihwYXJzZWQpID8gdmFsdWUgOiBwYXJzZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0IHN0cmluZyBib29sZWFuIGxpdGVyYWxzIGludG8gcmVhbCBib29sZWFucy5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHsqfEJvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gdG9Cb29sZWFuKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gJ3RydWUnID8gdHJ1ZSA6IHZhbHVlID09PSAnZmFsc2UnID8gZmFsc2UgOiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBTdHJpcCBxdW90ZXMgZnJvbSBhIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZyB8IGZhbHNlfVxuICovXG5cbmZ1bmN0aW9uIHN0cmlwUXVvdGVzKHN0cikge1xuICB2YXIgYSA9IHN0ci5jaGFyQ29kZUF0KDApO1xuICB2YXIgYiA9IHN0ci5jaGFyQ29kZUF0KHN0ci5sZW5ndGggLSAxKTtcbiAgcmV0dXJuIGEgPT09IGIgJiYgKGEgPT09IDB4MjIgfHwgYSA9PT0gMHgyNykgPyBzdHIuc2xpY2UoMSwgLTEpIDogc3RyO1xufVxuXG4vKipcbiAqIENhbWVsaXplIGEgaHlwaGVuLWRlbG1pdGVkIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxudmFyIGNhbWVsaXplUkUgPSAvLShcXHcpL2c7XG5cbmZ1bmN0aW9uIGNhbWVsaXplKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoY2FtZWxpemVSRSwgdG9VcHBlcik7XG59XG5cbmZ1bmN0aW9uIHRvVXBwZXIoXywgYykge1xuICByZXR1cm4gYyA/IGMudG9VcHBlckNhc2UoKSA6ICcnO1xufVxuXG4vKipcbiAqIEh5cGhlbmF0ZSBhIGNhbWVsQ2FzZSBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbnZhciBoeXBoZW5hdGVSRSA9IC8oW2EtelxcZF0pKFtBLVpdKS9nO1xuXG5mdW5jdGlvbiBoeXBoZW5hdGUoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShoeXBoZW5hdGVSRSwgJyQxLSQyJykudG9Mb3dlckNhc2UoKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBoeXBoZW4vdW5kZXJzY29yZS9zbGFzaCBkZWxpbWl0ZXJlZCBuYW1lcyBpbnRvXG4gKiBjYW1lbGl6ZWQgY2xhc3NOYW1lcy5cbiAqXG4gKiBlLmcuIG15LWNvbXBvbmVudCA9PiBNeUNvbXBvbmVudFxuICogICAgICBzb21lX2Vsc2UgICAgPT4gU29tZUVsc2VcbiAqICAgICAgc29tZS9jb21wICAgID0+IFNvbWVDb21wXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbnZhciBjbGFzc2lmeVJFID0gLyg/Ol58Wy1fXFwvXSkoXFx3KS9nO1xuXG5mdW5jdGlvbiBjbGFzc2lmeShzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKGNsYXNzaWZ5UkUsIHRvVXBwZXIpO1xufVxuXG4vKipcbiAqIFNpbXBsZSBiaW5kLCBmYXN0ZXIgdGhhbiBuYXRpdmVcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHBhcmFtIHtPYmplY3R9IGN0eFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gYmluZChmbiwgY3R4KSB7XG4gIHJldHVybiBmdW5jdGlvbiAoYSkge1xuICAgIHZhciBsID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICByZXR1cm4gbCA/IGwgPiAxID8gZm4uYXBwbHkoY3R4LCBhcmd1bWVudHMpIDogZm4uY2FsbChjdHgsIGEpIDogZm4uY2FsbChjdHgpO1xuICB9O1xufVxuXG4vKipcbiAqIENvbnZlcnQgYW4gQXJyYXktbGlrZSBvYmplY3QgdG8gYSByZWFsIEFycmF5LlxuICpcbiAqIEBwYXJhbSB7QXJyYXktbGlrZX0gbGlzdFxuICogQHBhcmFtIHtOdW1iZXJ9IFtzdGFydF0gLSBzdGFydCBpbmRleFxuICogQHJldHVybiB7QXJyYXl9XG4gKi9cblxuZnVuY3Rpb24gdG9BcnJheShsaXN0LCBzdGFydCkge1xuICBzdGFydCA9IHN0YXJ0IHx8IDA7XG4gIHZhciBpID0gbGlzdC5sZW5ndGggLSBzdGFydDtcbiAgdmFyIHJldCA9IG5ldyBBcnJheShpKTtcbiAgd2hpbGUgKGktLSkge1xuICAgIHJldFtpXSA9IGxpc3RbaSArIHN0YXJ0XTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG4vKipcbiAqIE1peCBwcm9wZXJ0aWVzIGludG8gdGFyZ2V0IG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdG9cbiAqIEBwYXJhbSB7T2JqZWN0fSBmcm9tXG4gKi9cblxuZnVuY3Rpb24gZXh0ZW5kKHRvLCBmcm9tKSB7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZnJvbSk7XG4gIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICB0b1trZXlzW2ldXSA9IGZyb21ba2V5c1tpXV07XG4gIH1cbiAgcmV0dXJuIHRvO1xufVxuXG4vKipcbiAqIFF1aWNrIG9iamVjdCBjaGVjayAtIHRoaXMgaXMgcHJpbWFyaWx5IHVzZWQgdG8gdGVsbFxuICogT2JqZWN0cyBmcm9tIHByaW1pdGl2ZSB2YWx1ZXMgd2hlbiB3ZSBrbm93IHRoZSB2YWx1ZVxuICogaXMgYSBKU09OLWNvbXBsaWFudCB0eXBlLlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xuICByZXR1cm4gb2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIFN0cmljdCBvYmplY3QgdHlwZSBjaGVjay4gT25seSByZXR1cm5zIHRydWVcbiAqIGZvciBwbGFpbiBKYXZhU2NyaXB0IG9iamVjdHMuXG4gKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbnZhciBPQkpFQ1RfU1RSSU5HID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qob2JqKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09IE9CSkVDVF9TVFJJTkc7XG59XG5cbi8qKlxuICogQXJyYXkgdHlwZSBjaGVjay5cbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5cbi8qKlxuICogRGVmaW5lIGEgcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHsqfSB2YWxcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW2VudW1lcmFibGVdXG4gKi9cblxuZnVuY3Rpb24gZGVmKG9iaiwga2V5LCB2YWwsIGVudW1lcmFibGUpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgdmFsdWU6IHZhbCxcbiAgICBlbnVtZXJhYmxlOiAhIWVudW1lcmFibGUsXG4gICAgd3JpdGFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufVxuXG4vKipcbiAqIERlYm91bmNlIGEgZnVuY3Rpb24gc28gaXQgb25seSBnZXRzIGNhbGxlZCBhZnRlciB0aGVcbiAqIGlucHV0IHN0b3BzIGFycml2aW5nIGFmdGVyIHRoZSBnaXZlbiB3YWl0IHBlcmlvZC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jXG4gKiBAcGFyYW0ge051bWJlcn0gd2FpdFxuICogQHJldHVybiB7RnVuY3Rpb259IC0gdGhlIGRlYm91bmNlZCBmdW5jdGlvblxuICovXG5cbmZ1bmN0aW9uIF9kZWJvdW5jZShmdW5jLCB3YWl0KSB7XG4gIHZhciB0aW1lb3V0LCBhcmdzLCBjb250ZXh0LCB0aW1lc3RhbXAsIHJlc3VsdDtcbiAgdmFyIGxhdGVyID0gZnVuY3Rpb24gbGF0ZXIoKSB7XG4gICAgdmFyIGxhc3QgPSBEYXRlLm5vdygpIC0gdGltZXN0YW1wO1xuICAgIGlmIChsYXN0IDwgd2FpdCAmJiBsYXN0ID49IDApIHtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0IC0gbGFzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBjb250ZXh0ID0gdGhpcztcbiAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgaWYgKCF0aW1lb3V0KSB7XG4gICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5cbi8qKlxuICogTWFudWFsIGluZGV4T2YgYmVjYXVzZSBpdCdzIHNsaWdodGx5IGZhc3RlciB0aGFuXG4gKiBuYXRpdmUuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJyXG4gKiBAcGFyYW0geyp9IG9ialxuICovXG5cbmZ1bmN0aW9uIGluZGV4T2YoYXJyLCBvYmopIHtcbiAgdmFyIGkgPSBhcnIubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgaWYgKGFycltpXSA9PT0gb2JqKSByZXR1cm4gaTtcbiAgfVxuICByZXR1cm4gLTE7XG59XG5cbi8qKlxuICogTWFrZSBhIGNhbmNlbGxhYmxlIHZlcnNpb24gb2YgYW4gYXN5bmMgY2FsbGJhY2suXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNhbmNlbGxhYmxlKGZuKSB7XG4gIHZhciBjYiA9IGZ1bmN0aW9uIGNiKCkge1xuICAgIGlmICghY2IuY2FuY2VsbGVkKSB7XG4gICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gIH07XG4gIGNiLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICBjYi5jYW5jZWxsZWQgPSB0cnVlO1xuICB9O1xuICByZXR1cm4gY2I7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdHdvIHZhbHVlcyBhcmUgbG9vc2VseSBlcXVhbCAtIHRoYXQgaXMsXG4gKiBpZiB0aGV5IGFyZSBwbGFpbiBvYmplY3RzLCBkbyB0aGV5IGhhdmUgdGhlIHNhbWUgc2hhcGU/XG4gKlxuICogQHBhcmFtIHsqfSBhXG4gKiBAcGFyYW0geyp9IGJcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gbG9vc2VFcXVhbChhLCBiKSB7XG4gIC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuICByZXR1cm4gYSA9PSBiIHx8IChpc09iamVjdChhKSAmJiBpc09iamVjdChiKSA/IEpTT04uc3RyaW5naWZ5KGEpID09PSBKU09OLnN0cmluZ2lmeShiKSA6IGZhbHNlKTtcbiAgLyogZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cbn1cblxudmFyIGhhc1Byb3RvID0gKCdfX3Byb3RvX18nIGluIHt9KTtcblxuLy8gQnJvd3NlciBlbnZpcm9ubWVudCBzbmlmZmluZ1xudmFyIGluQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh3aW5kb3cpICE9PSAnW29iamVjdCBPYmplY3RdJztcblxuLy8gZGV0ZWN0IGRldnRvb2xzXG52YXIgZGV2dG9vbHMgPSBpbkJyb3dzZXIgJiYgd2luZG93Ll9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX187XG5cbi8vIFVBIHNuaWZmaW5nIGZvciB3b3JraW5nIGFyb3VuZCBicm93c2VyLXNwZWNpZmljIHF1aXJrc1xudmFyIFVBID0gaW5Ccm93c2VyICYmIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG52YXIgaXNJRSA9IFVBICYmIFVBLmluZGV4T2YoJ3RyaWRlbnQnKSA+IDA7XG52YXIgaXNJRTkgPSBVQSAmJiBVQS5pbmRleE9mKCdtc2llIDkuMCcpID4gMDtcbnZhciBpc0FuZHJvaWQgPSBVQSAmJiBVQS5pbmRleE9mKCdhbmRyb2lkJykgPiAwO1xudmFyIGlzSW9zID0gVUEgJiYgLyhpcGhvbmV8aXBhZHxpcG9kfGlvcykvaS50ZXN0KFVBKTtcbnZhciBpb3NWZXJzaW9uTWF0Y2ggPSBpc0lvcyAmJiBVQS5tYXRjaCgvb3MgKFtcXGRfXSspLyk7XG52YXIgaW9zVmVyc2lvbiA9IGlvc1ZlcnNpb25NYXRjaCAmJiBpb3NWZXJzaW9uTWF0Y2hbMV0uc3BsaXQoJ18nKTtcblxuLy8gZGV0ZWN0aW5nIGlPUyBVSVdlYlZpZXcgYnkgaW5kZXhlZERCXG52YXIgaGFzTXV0YXRpb25PYnNlcnZlckJ1ZyA9IGlvc1ZlcnNpb24gJiYgTnVtYmVyKGlvc1ZlcnNpb25bMF0pID49IDkgJiYgTnVtYmVyKGlvc1ZlcnNpb25bMV0pID49IDMgJiYgIXdpbmRvdy5pbmRleGVkREI7XG5cbnZhciB0cmFuc2l0aW9uUHJvcCA9IHVuZGVmaW5lZDtcbnZhciB0cmFuc2l0aW9uRW5kRXZlbnQgPSB1bmRlZmluZWQ7XG52YXIgYW5pbWF0aW9uUHJvcCA9IHVuZGVmaW5lZDtcbnZhciBhbmltYXRpb25FbmRFdmVudCA9IHVuZGVmaW5lZDtcblxuLy8gVHJhbnNpdGlvbiBwcm9wZXJ0eS9ldmVudCBzbmlmZmluZ1xuaWYgKGluQnJvd3NlciAmJiAhaXNJRTkpIHtcbiAgdmFyIGlzV2Via2l0VHJhbnMgPSB3aW5kb3cub250cmFuc2l0aW9uZW5kID09PSB1bmRlZmluZWQgJiYgd2luZG93Lm9ud2Via2l0dHJhbnNpdGlvbmVuZCAhPT0gdW5kZWZpbmVkO1xuICB2YXIgaXNXZWJraXRBbmltID0gd2luZG93Lm9uYW5pbWF0aW9uZW5kID09PSB1bmRlZmluZWQgJiYgd2luZG93Lm9ud2Via2l0YW5pbWF0aW9uZW5kICE9PSB1bmRlZmluZWQ7XG4gIHRyYW5zaXRpb25Qcm9wID0gaXNXZWJraXRUcmFucyA/ICdXZWJraXRUcmFuc2l0aW9uJyA6ICd0cmFuc2l0aW9uJztcbiAgdHJhbnNpdGlvbkVuZEV2ZW50ID0gaXNXZWJraXRUcmFucyA/ICd3ZWJraXRUcmFuc2l0aW9uRW5kJyA6ICd0cmFuc2l0aW9uZW5kJztcbiAgYW5pbWF0aW9uUHJvcCA9IGlzV2Via2l0QW5pbSA/ICdXZWJraXRBbmltYXRpb24nIDogJ2FuaW1hdGlvbic7XG4gIGFuaW1hdGlvbkVuZEV2ZW50ID0gaXNXZWJraXRBbmltID8gJ3dlYmtpdEFuaW1hdGlvbkVuZCcgOiAnYW5pbWF0aW9uZW5kJztcbn1cblxuLyoqXG4gKiBEZWZlciBhIHRhc2sgdG8gZXhlY3V0ZSBpdCBhc3luY2hyb25vdXNseS4gSWRlYWxseSB0aGlzXG4gKiBzaG91bGQgYmUgZXhlY3V0ZWQgYXMgYSBtaWNyb3Rhc2ssIHNvIHdlIGxldmVyYWdlXG4gKiBNdXRhdGlvbk9ic2VydmVyIGlmIGl0J3MgYXZhaWxhYmxlLCBhbmQgZmFsbGJhY2sgdG9cbiAqIHNldFRpbWVvdXQoMCkuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqIEBwYXJhbSB7T2JqZWN0fSBjdHhcbiAqL1xuXG52YXIgbmV4dFRpY2sgPSAoZnVuY3Rpb24gKCkge1xuICB2YXIgY2FsbGJhY2tzID0gW107XG4gIHZhciBwZW5kaW5nID0gZmFsc2U7XG4gIHZhciB0aW1lckZ1bmM7XG4gIGZ1bmN0aW9uIG5leHRUaWNrSGFuZGxlcigpIHtcbiAgICBwZW5kaW5nID0gZmFsc2U7XG4gICAgdmFyIGNvcGllcyA9IGNhbGxiYWNrcy5zbGljZSgwKTtcbiAgICBjYWxsYmFja3MgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvcGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29waWVzW2ldKCk7XG4gICAgfVxuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICh0eXBlb2YgTXV0YXRpb25PYnNlcnZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgIWhhc011dGF0aW9uT2JzZXJ2ZXJCdWcpIHtcbiAgICB2YXIgY291bnRlciA9IDE7XG4gICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobmV4dFRpY2tIYW5kbGVyKTtcbiAgICB2YXIgdGV4dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjb3VudGVyKTtcbiAgICBvYnNlcnZlci5vYnNlcnZlKHRleHROb2RlLCB7XG4gICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlXG4gICAgfSk7XG4gICAgdGltZXJGdW5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgY291bnRlciA9IChjb3VudGVyICsgMSkgJSAyO1xuICAgICAgdGV4dE5vZGUuZGF0YSA9IGNvdW50ZXI7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICAvLyB3ZWJwYWNrIGF0dGVtcHRzIHRvIGluamVjdCBhIHNoaW0gZm9yIHNldEltbWVkaWF0ZVxuICAgIC8vIGlmIGl0IGlzIHVzZWQgYXMgYSBnbG9iYWwsIHNvIHdlIGhhdmUgdG8gd29yayBhcm91bmQgdGhhdCB0b1xuICAgIC8vIGF2b2lkIGJ1bmRsaW5nIHVubmVjZXNzYXJ5IGNvZGUuXG4gICAgdmFyIGNvbnRleHQgPSBpbkJyb3dzZXIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHt9O1xuICAgIHRpbWVyRnVuYyA9IGNvbnRleHQuc2V0SW1tZWRpYXRlIHx8IHNldFRpbWVvdXQ7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIChjYiwgY3R4KSB7XG4gICAgdmFyIGZ1bmMgPSBjdHggPyBmdW5jdGlvbiAoKSB7XG4gICAgICBjYi5jYWxsKGN0eCk7XG4gICAgfSA6IGNiO1xuICAgIGNhbGxiYWNrcy5wdXNoKGZ1bmMpO1xuICAgIGlmIChwZW5kaW5nKSByZXR1cm47XG4gICAgcGVuZGluZyA9IHRydWU7XG4gICAgdGltZXJGdW5jKG5leHRUaWNrSGFuZGxlciwgMCk7XG4gIH07XG59KSgpO1xuXG52YXIgX1NldCA9IHVuZGVmaW5lZDtcbi8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuaWYgKHR5cGVvZiBTZXQgIT09ICd1bmRlZmluZWQnICYmIFNldC50b1N0cmluZygpLm1hdGNoKC9uYXRpdmUgY29kZS8pKSB7XG4gIC8vIHVzZSBuYXRpdmUgU2V0IHdoZW4gYXZhaWxhYmxlLlxuICBfU2V0ID0gU2V0O1xufSBlbHNlIHtcbiAgLy8gYSBub24tc3RhbmRhcmQgU2V0IHBvbHlmaWxsIHRoYXQgb25seSB3b3JrcyB3aXRoIHByaW1pdGl2ZSBrZXlzLlxuICBfU2V0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc2V0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfTtcbiAgX1NldC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiB0aGlzLnNldFtrZXldICE9PSB1bmRlZmluZWQ7XG4gIH07XG4gIF9TZXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICB0aGlzLnNldFtrZXldID0gMTtcbiAgfTtcbiAgX1NldC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5zZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBDYWNoZShsaW1pdCkge1xuICB0aGlzLnNpemUgPSAwO1xuICB0aGlzLmxpbWl0ID0gbGltaXQ7XG4gIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fa2V5bWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbn1cblxudmFyIHAgPSBDYWNoZS5wcm90b3R5cGU7XG5cbi8qKlxuICogUHV0IDx2YWx1ZT4gaW50byB0aGUgY2FjaGUgYXNzb2NpYXRlZCB3aXRoIDxrZXk+LlxuICogUmV0dXJucyB0aGUgZW50cnkgd2hpY2ggd2FzIHJlbW92ZWQgdG8gbWFrZSByb29tIGZvclxuICogdGhlIG5ldyBlbnRyeS4gT3RoZXJ3aXNlIHVuZGVmaW5lZCBpcyByZXR1cm5lZC5cbiAqIChpLmUuIGlmIHRoZXJlIHdhcyBlbm91Z2ggcm9vbSBhbHJlYWR5KS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHtFbnRyeXx1bmRlZmluZWR9XG4gKi9cblxucC5wdXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICB2YXIgcmVtb3ZlZDtcblxuICB2YXIgZW50cnkgPSB0aGlzLmdldChrZXksIHRydWUpO1xuICBpZiAoIWVudHJ5KSB7XG4gICAgaWYgKHRoaXMuc2l6ZSA9PT0gdGhpcy5saW1pdCkge1xuICAgICAgcmVtb3ZlZCA9IHRoaXMuc2hpZnQoKTtcbiAgICB9XG4gICAgZW50cnkgPSB7XG4gICAgICBrZXk6IGtleVxuICAgIH07XG4gICAgdGhpcy5fa2V5bWFwW2tleV0gPSBlbnRyeTtcbiAgICBpZiAodGhpcy50YWlsKSB7XG4gICAgICB0aGlzLnRhaWwubmV3ZXIgPSBlbnRyeTtcbiAgICAgIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhlYWQgPSBlbnRyeTtcbiAgICB9XG4gICAgdGhpcy50YWlsID0gZW50cnk7XG4gICAgdGhpcy5zaXplKys7XG4gIH1cbiAgZW50cnkudmFsdWUgPSB2YWx1ZTtcblxuICByZXR1cm4gcmVtb3ZlZDtcbn07XG5cbi8qKlxuICogUHVyZ2UgdGhlIGxlYXN0IHJlY2VudGx5IHVzZWQgKG9sZGVzdCkgZW50cnkgZnJvbSB0aGVcbiAqIGNhY2hlLiBSZXR1cm5zIHRoZSByZW1vdmVkIGVudHJ5IG9yIHVuZGVmaW5lZCBpZiB0aGVcbiAqIGNhY2hlIHdhcyBlbXB0eS5cbiAqL1xuXG5wLnNoaWZ0ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZW50cnkgPSB0aGlzLmhlYWQ7XG4gIGlmIChlbnRyeSkge1xuICAgIHRoaXMuaGVhZCA9IHRoaXMuaGVhZC5uZXdlcjtcbiAgICB0aGlzLmhlYWQub2xkZXIgPSB1bmRlZmluZWQ7XG4gICAgZW50cnkubmV3ZXIgPSBlbnRyeS5vbGRlciA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9rZXltYXBbZW50cnkua2V5XSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnNpemUtLTtcbiAgfVxuICByZXR1cm4gZW50cnk7XG59O1xuXG4vKipcbiAqIEdldCBhbmQgcmVnaXN0ZXIgcmVjZW50IHVzZSBvZiA8a2V5Pi4gUmV0dXJucyB0aGUgdmFsdWVcbiAqIGFzc29jaWF0ZWQgd2l0aCA8a2V5PiBvciB1bmRlZmluZWQgaWYgbm90IGluIGNhY2hlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcmV0dXJuRW50cnlcbiAqIEByZXR1cm4ge0VudHJ5fCp9XG4gKi9cblxucC5nZXQgPSBmdW5jdGlvbiAoa2V5LCByZXR1cm5FbnRyeSkge1xuICB2YXIgZW50cnkgPSB0aGlzLl9rZXltYXBba2V5XTtcbiAgaWYgKGVudHJ5ID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgaWYgKGVudHJ5ID09PSB0aGlzLnRhaWwpIHtcbiAgICByZXR1cm4gcmV0dXJuRW50cnkgPyBlbnRyeSA6IGVudHJ5LnZhbHVlO1xuICB9XG4gIC8vIEhFQUQtLS0tLS0tLS0tLS0tLVRBSUxcbiAgLy8gICA8Lm9sZGVyICAgLm5ld2VyPlxuICAvLyAgPC0tLSBhZGQgZGlyZWN0aW9uIC0tXG4gIC8vICAgQSAgQiAgQyAgPEQ+ICBFXG4gIGlmIChlbnRyeS5uZXdlcikge1xuICAgIGlmIChlbnRyeSA9PT0gdGhpcy5oZWFkKSB7XG4gICAgICB0aGlzLmhlYWQgPSBlbnRyeS5uZXdlcjtcbiAgICB9XG4gICAgZW50cnkubmV3ZXIub2xkZXIgPSBlbnRyeS5vbGRlcjsgLy8gQyA8LS0gRS5cbiAgfVxuICBpZiAoZW50cnkub2xkZXIpIHtcbiAgICBlbnRyeS5vbGRlci5uZXdlciA9IGVudHJ5Lm5ld2VyOyAvLyBDLiAtLT4gRVxuICB9XG4gIGVudHJ5Lm5ld2VyID0gdW5kZWZpbmVkOyAvLyBEIC0teFxuICBlbnRyeS5vbGRlciA9IHRoaXMudGFpbDsgLy8gRC4gLS0+IEVcbiAgaWYgKHRoaXMudGFpbCkge1xuICAgIHRoaXMudGFpbC5uZXdlciA9IGVudHJ5OyAvLyBFLiA8LS0gRFxuICB9XG4gIHRoaXMudGFpbCA9IGVudHJ5O1xuICByZXR1cm4gcmV0dXJuRW50cnkgPyBlbnRyeSA6IGVudHJ5LnZhbHVlO1xufTtcblxudmFyIGNhY2hlJDEgPSBuZXcgQ2FjaGUoMTAwMCk7XG52YXIgZmlsdGVyVG9rZW5SRSA9IC9bXlxccydcIl0rfCdbXiddKid8XCJbXlwiXSpcIi9nO1xudmFyIHJlc2VydmVkQXJnUkUgPSAvXmluJHxeLT9cXGQrLztcblxuLyoqXG4gKiBQYXJzZXIgc3RhdGVcbiAqL1xuXG52YXIgc3RyO1xudmFyIGRpcjtcbnZhciBjO1xudmFyIHByZXY7XG52YXIgaTtcbnZhciBsO1xudmFyIGxhc3RGaWx0ZXJJbmRleDtcbnZhciBpblNpbmdsZTtcbnZhciBpbkRvdWJsZTtcbnZhciBjdXJseTtcbnZhciBzcXVhcmU7XG52YXIgcGFyZW47XG4vKipcbiAqIFB1c2ggYSBmaWx0ZXIgdG8gdGhlIGN1cnJlbnQgZGlyZWN0aXZlIG9iamVjdFxuICovXG5cbmZ1bmN0aW9uIHB1c2hGaWx0ZXIoKSB7XG4gIHZhciBleHAgPSBzdHIuc2xpY2UobGFzdEZpbHRlckluZGV4LCBpKS50cmltKCk7XG4gIHZhciBmaWx0ZXI7XG4gIGlmIChleHApIHtcbiAgICBmaWx0ZXIgPSB7fTtcbiAgICB2YXIgdG9rZW5zID0gZXhwLm1hdGNoKGZpbHRlclRva2VuUkUpO1xuICAgIGZpbHRlci5uYW1lID0gdG9rZW5zWzBdO1xuICAgIGlmICh0b2tlbnMubGVuZ3RoID4gMSkge1xuICAgICAgZmlsdGVyLmFyZ3MgPSB0b2tlbnMuc2xpY2UoMSkubWFwKHByb2Nlc3NGaWx0ZXJBcmcpO1xuICAgIH1cbiAgfVxuICBpZiAoZmlsdGVyKSB7XG4gICAgKGRpci5maWx0ZXJzID0gZGlyLmZpbHRlcnMgfHwgW10pLnB1c2goZmlsdGVyKTtcbiAgfVxuICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBhcmd1bWVudCBpcyBkeW5hbWljIGFuZCBzdHJpcCBxdW90ZXMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGFyZ1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIHByb2Nlc3NGaWx0ZXJBcmcoYXJnKSB7XG4gIGlmIChyZXNlcnZlZEFyZ1JFLnRlc3QoYXJnKSkge1xuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZTogdG9OdW1iZXIoYXJnKSxcbiAgICAgIGR5bmFtaWM6IGZhbHNlXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgc3RyaXBwZWQgPSBzdHJpcFF1b3RlcyhhcmcpO1xuICAgIHZhciBkeW5hbWljID0gc3RyaXBwZWQgPT09IGFyZztcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWU6IGR5bmFtaWMgPyBhcmcgOiBzdHJpcHBlZCxcbiAgICAgIGR5bmFtaWM6IGR5bmFtaWNcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogUGFyc2UgYSBkaXJlY3RpdmUgdmFsdWUgYW5kIGV4dHJhY3QgdGhlIGV4cHJlc3Npb25cbiAqIGFuZCBpdHMgZmlsdGVycyBpbnRvIGEgZGVzY3JpcHRvci5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIFwiYSArIDEgfCB1cHBlcmNhc2VcIiB3aWxsIHlpZWxkOlxuICoge1xuICogICBleHByZXNzaW9uOiAnYSArIDEnLFxuICogICBmaWx0ZXJzOiBbXG4gKiAgICAgeyBuYW1lOiAndXBwZXJjYXNlJywgYXJnczogbnVsbCB9XG4gKiAgIF1cbiAqIH1cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlRGlyZWN0aXZlKHMpIHtcbiAgdmFyIGhpdCA9IGNhY2hlJDEuZ2V0KHMpO1xuICBpZiAoaGl0KSB7XG4gICAgcmV0dXJuIGhpdDtcbiAgfVxuXG4gIC8vIHJlc2V0IHBhcnNlciBzdGF0ZVxuICBzdHIgPSBzO1xuICBpblNpbmdsZSA9IGluRG91YmxlID0gZmFsc2U7XG4gIGN1cmx5ID0gc3F1YXJlID0gcGFyZW4gPSAwO1xuICBsYXN0RmlsdGVySW5kZXggPSAwO1xuICBkaXIgPSB7fTtcblxuICBmb3IgKGkgPSAwLCBsID0gc3RyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHByZXYgPSBjO1xuICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICBpZiAoaW5TaW5nbGUpIHtcbiAgICAgIC8vIGNoZWNrIHNpbmdsZSBxdW90ZVxuICAgICAgaWYgKGMgPT09IDB4MjcgJiYgcHJldiAhPT0gMHg1QykgaW5TaW5nbGUgPSAhaW5TaW5nbGU7XG4gICAgfSBlbHNlIGlmIChpbkRvdWJsZSkge1xuICAgICAgLy8gY2hlY2sgZG91YmxlIHF1b3RlXG4gICAgICBpZiAoYyA9PT0gMHgyMiAmJiBwcmV2ICE9PSAweDVDKSBpbkRvdWJsZSA9ICFpbkRvdWJsZTtcbiAgICB9IGVsc2UgaWYgKGMgPT09IDB4N0MgJiYgLy8gcGlwZVxuICAgIHN0ci5jaGFyQ29kZUF0KGkgKyAxKSAhPT0gMHg3QyAmJiBzdHIuY2hhckNvZGVBdChpIC0gMSkgIT09IDB4N0MpIHtcbiAgICAgIGlmIChkaXIuZXhwcmVzc2lvbiA9PSBudWxsKSB7XG4gICAgICAgIC8vIGZpcnN0IGZpbHRlciwgZW5kIG9mIGV4cHJlc3Npb25cbiAgICAgICAgbGFzdEZpbHRlckluZGV4ID0gaSArIDE7XG4gICAgICAgIGRpci5leHByZXNzaW9uID0gc3RyLnNsaWNlKDAsIGkpLnRyaW0oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGFscmVhZHkgaGFzIGZpbHRlclxuICAgICAgICBwdXNoRmlsdGVyKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN3aXRjaCAoYykge1xuICAgICAgICBjYXNlIDB4MjI6XG4gICAgICAgICAgaW5Eb3VibGUgPSB0cnVlO2JyZWFrOyAvLyBcIlxuICAgICAgICBjYXNlIDB4Mjc6XG4gICAgICAgICAgaW5TaW5nbGUgPSB0cnVlO2JyZWFrOyAvLyAnXG4gICAgICAgIGNhc2UgMHgyODpcbiAgICAgICAgICBwYXJlbisrO2JyZWFrOyAvLyAoXG4gICAgICAgIGNhc2UgMHgyOTpcbiAgICAgICAgICBwYXJlbi0tO2JyZWFrOyAvLyApXG4gICAgICAgIGNhc2UgMHg1QjpcbiAgICAgICAgICBzcXVhcmUrKzticmVhazsgLy8gW1xuICAgICAgICBjYXNlIDB4NUQ6XG4gICAgICAgICAgc3F1YXJlLS07YnJlYWs7IC8vIF1cbiAgICAgICAgY2FzZSAweDdCOlxuICAgICAgICAgIGN1cmx5Kys7YnJlYWs7IC8vIHtcbiAgICAgICAgY2FzZSAweDdEOlxuICAgICAgICAgIGN1cmx5LS07YnJlYWs7IC8vIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoZGlyLmV4cHJlc3Npb24gPT0gbnVsbCkge1xuICAgIGRpci5leHByZXNzaW9uID0gc3RyLnNsaWNlKDAsIGkpLnRyaW0oKTtcbiAgfSBlbHNlIGlmIChsYXN0RmlsdGVySW5kZXggIT09IDApIHtcbiAgICBwdXNoRmlsdGVyKCk7XG4gIH1cblxuICBjYWNoZSQxLnB1dChzLCBkaXIpO1xuICByZXR1cm4gZGlyO1xufVxuXG52YXIgZGlyZWN0aXZlID0gT2JqZWN0LmZyZWV6ZSh7XG4gIHBhcnNlRGlyZWN0aXZlOiBwYXJzZURpcmVjdGl2ZVxufSk7XG5cbnZhciByZWdleEVzY2FwZVJFID0gL1stLiorP14ke30oKXxbXFxdXFwvXFxcXF0vZztcbnZhciBjYWNoZSA9IHVuZGVmaW5lZDtcbnZhciB0YWdSRSA9IHVuZGVmaW5lZDtcbnZhciBodG1sUkUgPSB1bmRlZmluZWQ7XG4vKipcbiAqIEVzY2FwZSBhIHN0cmluZyBzbyBpdCBjYW4gYmUgdXNlZCBpbiBhIFJlZ0V4cFxuICogY29uc3RydWN0b3IuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICovXG5cbmZ1bmN0aW9uIGVzY2FwZVJlZ2V4KHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UocmVnZXhFc2NhcGVSRSwgJ1xcXFwkJicpO1xufVxuXG5mdW5jdGlvbiBjb21waWxlUmVnZXgoKSB7XG4gIHZhciBvcGVuID0gZXNjYXBlUmVnZXgoY29uZmlnLmRlbGltaXRlcnNbMF0pO1xuICB2YXIgY2xvc2UgPSBlc2NhcGVSZWdleChjb25maWcuZGVsaW1pdGVyc1sxXSk7XG4gIHZhciB1bnNhZmVPcGVuID0gZXNjYXBlUmVnZXgoY29uZmlnLnVuc2FmZURlbGltaXRlcnNbMF0pO1xuICB2YXIgdW5zYWZlQ2xvc2UgPSBlc2NhcGVSZWdleChjb25maWcudW5zYWZlRGVsaW1pdGVyc1sxXSk7XG4gIHRhZ1JFID0gbmV3IFJlZ0V4cCh1bnNhZmVPcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyB1bnNhZmVDbG9zZSArICd8JyArIG9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIGNsb3NlLCAnZycpO1xuICBodG1sUkUgPSBuZXcgUmVnRXhwKCdeJyArIHVuc2FmZU9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIHVuc2FmZUNsb3NlICsgJyQnKTtcbiAgLy8gcmVzZXQgY2FjaGVcbiAgY2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG59XG5cbi8qKlxuICogUGFyc2UgYSB0ZW1wbGF0ZSB0ZXh0IHN0cmluZyBpbnRvIGFuIGFycmF5IG9mIHRva2Vucy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuICogQHJldHVybiB7QXJyYXk8T2JqZWN0PiB8IG51bGx9XG4gKiAgICAgICAgICAgICAgIC0ge1N0cmluZ30gdHlwZVxuICogICAgICAgICAgICAgICAtIHtTdHJpbmd9IHZhbHVlXG4gKiAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtodG1sXVxuICogICAgICAgICAgICAgICAtIHtCb29sZWFufSBbb25lVGltZV1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZVRleHQodGV4dCkge1xuICBpZiAoIWNhY2hlKSB7XG4gICAgY29tcGlsZVJlZ2V4KCk7XG4gIH1cbiAgdmFyIGhpdCA9IGNhY2hlLmdldCh0ZXh0KTtcbiAgaWYgKGhpdCkge1xuICAgIHJldHVybiBoaXQ7XG4gIH1cbiAgaWYgKCF0YWdSRS50ZXN0KHRleHQpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgdmFyIHRva2VucyA9IFtdO1xuICB2YXIgbGFzdEluZGV4ID0gdGFnUkUubGFzdEluZGV4ID0gMDtcbiAgdmFyIG1hdGNoLCBpbmRleCwgaHRtbCwgdmFsdWUsIGZpcnN0LCBvbmVUaW1lO1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICB3aGlsZSAobWF0Y2ggPSB0YWdSRS5leGVjKHRleHQpKSB7XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIGluZGV4ID0gbWF0Y2guaW5kZXg7XG4gICAgLy8gcHVzaCB0ZXh0IHRva2VuXG4gICAgaWYgKGluZGV4ID4gbGFzdEluZGV4KSB7XG4gICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgIHZhbHVlOiB0ZXh0LnNsaWNlKGxhc3RJbmRleCwgaW5kZXgpXG4gICAgICB9KTtcbiAgICB9XG4gICAgLy8gdGFnIHRva2VuXG4gICAgaHRtbCA9IGh0bWxSRS50ZXN0KG1hdGNoWzBdKTtcbiAgICB2YWx1ZSA9IGh0bWwgPyBtYXRjaFsxXSA6IG1hdGNoWzJdO1xuICAgIGZpcnN0ID0gdmFsdWUuY2hhckNvZGVBdCgwKTtcbiAgICBvbmVUaW1lID0gZmlyc3QgPT09IDQyOyAvLyAqXG4gICAgdmFsdWUgPSBvbmVUaW1lID8gdmFsdWUuc2xpY2UoMSkgOiB2YWx1ZTtcbiAgICB0b2tlbnMucHVzaCh7XG4gICAgICB0YWc6IHRydWUsXG4gICAgICB2YWx1ZTogdmFsdWUudHJpbSgpLFxuICAgICAgaHRtbDogaHRtbCxcbiAgICAgIG9uZVRpbWU6IG9uZVRpbWVcbiAgICB9KTtcbiAgICBsYXN0SW5kZXggPSBpbmRleCArIG1hdGNoWzBdLmxlbmd0aDtcbiAgfVxuICBpZiAobGFzdEluZGV4IDwgdGV4dC5sZW5ndGgpIHtcbiAgICB0b2tlbnMucHVzaCh7XG4gICAgICB2YWx1ZTogdGV4dC5zbGljZShsYXN0SW5kZXgpXG4gICAgfSk7XG4gIH1cbiAgY2FjaGUucHV0KHRleHQsIHRva2Vucyk7XG4gIHJldHVybiB0b2tlbnM7XG59XG5cbi8qKlxuICogRm9ybWF0IGEgbGlzdCBvZiB0b2tlbnMgaW50byBhbiBleHByZXNzaW9uLlxuICogZS5nLiB0b2tlbnMgcGFyc2VkIGZyb20gJ2Ege3tifX0gYycgY2FuIGJlIHNlcmlhbGl6ZWRcbiAqIGludG8gb25lIHNpbmdsZSBleHByZXNzaW9uIGFzICdcImEgXCIgKyBiICsgXCIgY1wiJy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSB0b2tlbnNcbiAqIEBwYXJhbSB7VnVlfSBbdm1dXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gdG9rZW5zVG9FeHAodG9rZW5zLCB2bSkge1xuICBpZiAodG9rZW5zLmxlbmd0aCA+IDEpIHtcbiAgICByZXR1cm4gdG9rZW5zLm1hcChmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgIHJldHVybiBmb3JtYXRUb2tlbih0b2tlbiwgdm0pO1xuICAgIH0pLmpvaW4oJysnKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZm9ybWF0VG9rZW4odG9rZW5zWzBdLCB2bSwgdHJ1ZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBzaW5nbGUgdG9rZW4uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRva2VuXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuICogQHBhcmFtIHtCb29sZWFufSBbc2luZ2xlXVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGZvcm1hdFRva2VuKHRva2VuLCB2bSwgc2luZ2xlKSB7XG4gIHJldHVybiB0b2tlbi50YWcgPyB0b2tlbi5vbmVUaW1lICYmIHZtID8gJ1wiJyArIHZtLiRldmFsKHRva2VuLnZhbHVlKSArICdcIicgOiBpbmxpbmVGaWx0ZXJzKHRva2VuLnZhbHVlLCBzaW5nbGUpIDogJ1wiJyArIHRva2VuLnZhbHVlICsgJ1wiJztcbn1cblxuLyoqXG4gKiBGb3IgYW4gYXR0cmlidXRlIHdpdGggbXVsdGlwbGUgaW50ZXJwb2xhdGlvbiB0YWdzLFxuICogZS5nLiBhdHRyPVwic29tZS17e3RoaW5nIHwgZmlsdGVyfX1cIiwgaW4gb3JkZXIgdG8gY29tYmluZVxuICogdGhlIHdob2xlIHRoaW5nIGludG8gYSBzaW5nbGUgd2F0Y2hhYmxlIGV4cHJlc3Npb24sIHdlXG4gKiBoYXZlIHRvIGlubGluZSB0aG9zZSBmaWx0ZXJzLiBUaGlzIGZ1bmN0aW9uIGRvZXMgZXhhY3RseVxuICogdGhhdC4gVGhpcyBpcyBhIGJpdCBoYWNreSBidXQgaXQgYXZvaWRzIGhlYXZ5IGNoYW5nZXNcbiAqIHRvIGRpcmVjdGl2ZSBwYXJzZXIgYW5kIHdhdGNoZXIgbWVjaGFuaXNtLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gc2luZ2xlXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxudmFyIGZpbHRlclJFID0gL1tefF1cXHxbXnxdLztcbmZ1bmN0aW9uIGlubGluZUZpbHRlcnMoZXhwLCBzaW5nbGUpIHtcbiAgaWYgKCFmaWx0ZXJSRS50ZXN0KGV4cCkpIHtcbiAgICByZXR1cm4gc2luZ2xlID8gZXhwIDogJygnICsgZXhwICsgJyknO1xuICB9IGVsc2Uge1xuICAgIHZhciBkaXIgPSBwYXJzZURpcmVjdGl2ZShleHApO1xuICAgIGlmICghZGlyLmZpbHRlcnMpIHtcbiAgICAgIHJldHVybiAnKCcgKyBleHAgKyAnKSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAndGhpcy5fYXBwbHlGaWx0ZXJzKCcgKyBkaXIuZXhwcmVzc2lvbiArIC8vIHZhbHVlXG4gICAgICAnLG51bGwsJyArIC8vIG9sZFZhbHVlIChudWxsIGZvciByZWFkKVxuICAgICAgSlNPTi5zdHJpbmdpZnkoZGlyLmZpbHRlcnMpICsgLy8gZmlsdGVyIGRlc2NyaXB0b3JzXG4gICAgICAnLGZhbHNlKSc7IC8vIHdyaXRlP1xuICAgIH1cbiAgfVxufVxuXG52YXIgdGV4dCA9IE9iamVjdC5mcmVlemUoe1xuICBjb21waWxlUmVnZXg6IGNvbXBpbGVSZWdleCxcbiAgcGFyc2VUZXh0OiBwYXJzZVRleHQsXG4gIHRva2Vuc1RvRXhwOiB0b2tlbnNUb0V4cFxufSk7XG5cbnZhciBkZWxpbWl0ZXJzID0gWyd7eycsICd9fSddO1xudmFyIHVuc2FmZURlbGltaXRlcnMgPSBbJ3t7eycsICd9fX0nXTtcblxudmFyIGNvbmZpZyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHtcblxuICAvKipcbiAgICogV2hldGhlciB0byBwcmludCBkZWJ1ZyBtZXNzYWdlcy5cbiAgICogQWxzbyBlbmFibGVzIHN0YWNrIHRyYWNlIGZvciB3YXJuaW5ncy5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuXG4gIGRlYnVnOiBmYWxzZSxcblxuICAvKipcbiAgICogV2hldGhlciB0byBzdXBwcmVzcyB3YXJuaW5ncy5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuXG4gIHNpbGVudDogZmFsc2UsXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gdXNlIGFzeW5jIHJlbmRlcmluZy5cbiAgICovXG5cbiAgYXN5bmM6IHRydWUsXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gd2FybiBhZ2FpbnN0IGVycm9ycyBjYXVnaHQgd2hlbiBldmFsdWF0aW5nXG4gICAqIGV4cHJlc3Npb25zLlxuICAgKi9cblxuICB3YXJuRXhwcmVzc2lvbkVycm9yczogdHJ1ZSxcblxuICAvKipcbiAgICogV2hldGhlciB0byBhbGxvdyBkZXZ0b29scyBpbnNwZWN0aW9uLlxuICAgKiBEaXNhYmxlZCBieSBkZWZhdWx0IGluIHByb2R1Y3Rpb24gYnVpbGRzLlxuICAgKi9cblxuICBkZXZ0b29sczogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyxcblxuICAvKipcbiAgICogSW50ZXJuYWwgZmxhZyB0byBpbmRpY2F0ZSB0aGUgZGVsaW1pdGVycyBoYXZlIGJlZW5cbiAgICogY2hhbmdlZC5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuXG4gIF9kZWxpbWl0ZXJzQ2hhbmdlZDogdHJ1ZSxcblxuICAvKipcbiAgICogTGlzdCBvZiBhc3NldCB0eXBlcyB0aGF0IGEgY29tcG9uZW50IGNhbiBvd24uXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheX1cbiAgICovXG5cbiAgX2Fzc2V0VHlwZXM6IFsnY29tcG9uZW50JywgJ2RpcmVjdGl2ZScsICdlbGVtZW50RGlyZWN0aXZlJywgJ2ZpbHRlcicsICd0cmFuc2l0aW9uJywgJ3BhcnRpYWwnXSxcblxuICAvKipcbiAgICogcHJvcCBiaW5kaW5nIG1vZGVzXG4gICAqL1xuXG4gIF9wcm9wQmluZGluZ01vZGVzOiB7XG4gICAgT05FX1dBWTogMCxcbiAgICBUV09fV0FZOiAxLFxuICAgIE9ORV9USU1FOiAyXG4gIH0sXG5cbiAgLyoqXG4gICAqIE1heCBjaXJjdWxhciB1cGRhdGVzIGFsbG93ZWQgaW4gYSBiYXRjaGVyIGZsdXNoIGN5Y2xlLlxuICAgKi9cblxuICBfbWF4VXBkYXRlQ291bnQ6IDEwMFxuXG59LCB7XG4gIGRlbGltaXRlcnM6IHsgLyoqXG4gICAgICAgICAgICAgICAgICogSW50ZXJwb2xhdGlvbiBkZWxpbWl0ZXJzLiBDaGFuZ2luZyB0aGVzZSB3b3VsZCB0cmlnZ2VyXG4gICAgICAgICAgICAgICAgICogdGhlIHRleHQgcGFyc2VyIHRvIHJlLWNvbXBpbGUgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbnMuXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAdHlwZSB7QXJyYXk8U3RyaW5nPn1cbiAgICAgICAgICAgICAgICAgKi9cblxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGRlbGltaXRlcnM7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcbiAgICAgIGRlbGltaXRlcnMgPSB2YWw7XG4gICAgICBjb21waWxlUmVnZXgoKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHVuc2FmZURlbGltaXRlcnM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB1bnNhZmVEZWxpbWl0ZXJzO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7XG4gICAgICB1bnNhZmVEZWxpbWl0ZXJzID0gdmFsO1xuICAgICAgY29tcGlsZVJlZ2V4KCk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9XG59KTtcblxudmFyIHdhcm4gPSB1bmRlZmluZWQ7XG52YXIgZm9ybWF0Q29tcG9uZW50TmFtZSA9IHVuZGVmaW5lZDtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaGFzQ29uc29sZSA9IHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJztcblxuICAgIHdhcm4gPSBmdW5jdGlvbiAobXNnLCB2bSkge1xuICAgICAgaWYgKGhhc0NvbnNvbGUgJiYgIWNvbmZpZy5zaWxlbnQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW1Z1ZSB3YXJuXTogJyArIG1zZyArICh2bSA/IGZvcm1hdENvbXBvbmVudE5hbWUodm0pIDogJycpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZm9ybWF0Q29tcG9uZW50TmFtZSA9IGZ1bmN0aW9uICh2bSkge1xuICAgICAgdmFyIG5hbWUgPSB2bS5faXNWdWUgPyB2bS4kb3B0aW9ucy5uYW1lIDogdm0ubmFtZTtcbiAgICAgIHJldHVybiBuYW1lID8gJyAoZm91bmQgaW4gY29tcG9uZW50OiA8JyArIGh5cGhlbmF0ZShuYW1lKSArICc+KScgOiAnJztcbiAgICB9O1xuICB9KSgpO1xufVxuXG4vKipcbiAqIEFwcGVuZCB3aXRoIHRyYW5zaXRpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbmZ1bmN0aW9uIGFwcGVuZFdpdGhUcmFuc2l0aW9uKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuICBhcHBseVRyYW5zaXRpb24oZWwsIDEsIGZ1bmN0aW9uICgpIHtcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuICB9LCB2bSwgY2IpO1xufVxuXG4vKipcbiAqIEluc2VydEJlZm9yZSB3aXRoIHRyYW5zaXRpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbmZ1bmN0aW9uIGJlZm9yZVdpdGhUcmFuc2l0aW9uKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuICBhcHBseVRyYW5zaXRpb24oZWwsIDEsIGZ1bmN0aW9uICgpIHtcbiAgICBiZWZvcmUoZWwsIHRhcmdldCk7XG4gIH0sIHZtLCBjYik7XG59XG5cbi8qKlxuICogUmVtb3ZlIHdpdGggdHJhbnNpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVXaXRoVHJhbnNpdGlvbihlbCwgdm0sIGNiKSB7XG4gIGFwcGx5VHJhbnNpdGlvbihlbCwgLTEsIGZ1bmN0aW9uICgpIHtcbiAgICByZW1vdmUoZWwpO1xuICB9LCB2bSwgY2IpO1xufVxuXG4vKipcbiAqIEFwcGx5IHRyYW5zaXRpb25zIHdpdGggYW4gb3BlcmF0aW9uIGNhbGxiYWNrLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7TnVtYmVyfSBkaXJlY3Rpb25cbiAqICAgICAgICAgICAgICAgICAgMTogZW50ZXJcbiAqICAgICAgICAgICAgICAgICAtMTogbGVhdmVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gdGhlIGFjdHVhbCBET00gb3BlcmF0aW9uXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5mdW5jdGlvbiBhcHBseVRyYW5zaXRpb24oZWwsIGRpcmVjdGlvbiwgb3AsIHZtLCBjYikge1xuICB2YXIgdHJhbnNpdGlvbiA9IGVsLl9fdl90cmFucztcbiAgaWYgKCF0cmFuc2l0aW9uIHx8XG4gIC8vIHNraXAgaWYgdGhlcmUgYXJlIG5vIGpzIGhvb2tzIGFuZCBDU1MgdHJhbnNpdGlvbiBpc1xuICAvLyBub3Qgc3VwcG9ydGVkXG4gICF0cmFuc2l0aW9uLmhvb2tzICYmICF0cmFuc2l0aW9uRW5kRXZlbnQgfHxcbiAgLy8gc2tpcCB0cmFuc2l0aW9ucyBmb3IgaW5pdGlhbCBjb21waWxlXG4gICF2bS5faXNDb21waWxlZCB8fFxuICAvLyBpZiB0aGUgdm0gaXMgYmVpbmcgbWFuaXB1bGF0ZWQgYnkgYSBwYXJlbnQgZGlyZWN0aXZlXG4gIC8vIGR1cmluZyB0aGUgcGFyZW50J3MgY29tcGlsYXRpb24gcGhhc2UsIHNraXAgdGhlXG4gIC8vIGFuaW1hdGlvbi5cbiAgdm0uJHBhcmVudCAmJiAhdm0uJHBhcmVudC5faXNDb21waWxlZCkge1xuICAgIG9wKCk7XG4gICAgaWYgKGNiKSBjYigpO1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgYWN0aW9uID0gZGlyZWN0aW9uID4gMCA/ICdlbnRlcicgOiAnbGVhdmUnO1xuICB0cmFuc2l0aW9uW2FjdGlvbl0ob3AsIGNiKTtcbn1cblxudmFyIHRyYW5zaXRpb24gPSBPYmplY3QuZnJlZXplKHtcbiAgYXBwZW5kV2l0aFRyYW5zaXRpb246IGFwcGVuZFdpdGhUcmFuc2l0aW9uLFxuICBiZWZvcmVXaXRoVHJhbnNpdGlvbjogYmVmb3JlV2l0aFRyYW5zaXRpb24sXG4gIHJlbW92ZVdpdGhUcmFuc2l0aW9uOiByZW1vdmVXaXRoVHJhbnNpdGlvbixcbiAgYXBwbHlUcmFuc2l0aW9uOiBhcHBseVRyYW5zaXRpb25cbn0pO1xuXG4vKipcbiAqIFF1ZXJ5IGFuIGVsZW1lbnQgc2VsZWN0b3IgaWYgaXQncyBub3QgYW4gZWxlbWVudCBhbHJlYWR5LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHtFbGVtZW50fVxuICovXG5cbmZ1bmN0aW9uIHF1ZXJ5KGVsKSB7XG4gIGlmICh0eXBlb2YgZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIHNlbGVjdG9yID0gZWw7XG4gICAgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsKTtcbiAgICBpZiAoIWVsKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0Nhbm5vdCBmaW5kIGVsZW1lbnQ6ICcgKyBzZWxlY3Rvcik7XG4gICAgfVxuICB9XG4gIHJldHVybiBlbDtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIG5vZGUgaXMgaW4gdGhlIGRvY3VtZW50LlxuICogTm90ZTogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zIHNob3VsZCB3b3JrIGhlcmVcbiAqIGJ1dCBhbHdheXMgcmV0dXJucyBmYWxzZSBmb3IgY29tbWVudCBub2RlcyBpbiBwaGFudG9tanMsXG4gKiBtYWtpbmcgdW5pdCB0ZXN0cyBkaWZmaWN1bHQuIFRoaXMgaXMgZml4ZWQgYnkgZG9pbmcgdGhlXG4gKiBjb250YWlucygpIGNoZWNrIG9uIHRoZSBub2RlJ3MgcGFyZW50Tm9kZSBpbnN0ZWFkIG9mXG4gKiB0aGUgbm9kZSBpdHNlbGYuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGluRG9jKG5vZGUpIHtcbiAgaWYgKCFub2RlKSByZXR1cm4gZmFsc2U7XG4gIHZhciBkb2MgPSBub2RlLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICB2YXIgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuICByZXR1cm4gZG9jID09PSBub2RlIHx8IGRvYyA9PT0gcGFyZW50IHx8ICEhKHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgPT09IDEgJiYgZG9jLmNvbnRhaW5zKHBhcmVudCkpO1xufVxuXG4vKipcbiAqIEdldCBhbmQgcmVtb3ZlIGFuIGF0dHJpYnV0ZSBmcm9tIGEgbm9kZS5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBfYXR0clxuICovXG5cbmZ1bmN0aW9uIGdldEF0dHIobm9kZSwgX2F0dHIpIHtcbiAgdmFyIHZhbCA9IG5vZGUuZ2V0QXR0cmlidXRlKF9hdHRyKTtcbiAgaWYgKHZhbCAhPT0gbnVsbCkge1xuICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKF9hdHRyKTtcbiAgfVxuICByZXR1cm4gdmFsO1xufVxuXG4vKipcbiAqIEdldCBhbiBhdHRyaWJ1dGUgd2l0aCBjb2xvbiBvciB2LWJpbmQ6IHByZWZpeC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHtTdHJpbmd8bnVsbH1cbiAqL1xuXG5mdW5jdGlvbiBnZXRCaW5kQXR0cihub2RlLCBuYW1lKSB7XG4gIHZhciB2YWwgPSBnZXRBdHRyKG5vZGUsICc6JyArIG5hbWUpO1xuICBpZiAodmFsID09PSBudWxsKSB7XG4gICAgdmFsID0gZ2V0QXR0cihub2RlLCAndi1iaW5kOicgKyBuYW1lKTtcbiAgfVxuICByZXR1cm4gdmFsO1xufVxuXG4vKipcbiAqIENoZWNrIHRoZSBwcmVzZW5jZSBvZiBhIGJpbmQgYXR0cmlidXRlLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaGFzQmluZEF0dHIobm9kZSwgbmFtZSkge1xuICByZXR1cm4gbm9kZS5oYXNBdHRyaWJ1dGUobmFtZSkgfHwgbm9kZS5oYXNBdHRyaWJ1dGUoJzonICsgbmFtZSkgfHwgbm9kZS5oYXNBdHRyaWJ1dGUoJ3YtYmluZDonICsgbmFtZSk7XG59XG5cbi8qKlxuICogSW5zZXJ0IGVsIGJlZm9yZSB0YXJnZXRcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICovXG5cbmZ1bmN0aW9uIGJlZm9yZShlbCwgdGFyZ2V0KSB7XG4gIHRhcmdldC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlbCwgdGFyZ2V0KTtcbn1cblxuLyoqXG4gKiBJbnNlcnQgZWwgYWZ0ZXIgdGFyZ2V0XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqL1xuXG5mdW5jdGlvbiBhZnRlcihlbCwgdGFyZ2V0KSB7XG4gIGlmICh0YXJnZXQubmV4dFNpYmxpbmcpIHtcbiAgICBiZWZvcmUoZWwsIHRhcmdldC5uZXh0U2libGluZyk7XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZWwpO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIGVsIGZyb20gRE9NXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICovXG5cbmZ1bmN0aW9uIHJlbW92ZShlbCkge1xuICBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTtcbn1cblxuLyoqXG4gKiBQcmVwZW5kIGVsIHRvIHRhcmdldFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKi9cblxuZnVuY3Rpb24gcHJlcGVuZChlbCwgdGFyZ2V0KSB7XG4gIGlmICh0YXJnZXQuZmlyc3RDaGlsZCkge1xuICAgIGJlZm9yZShlbCwgdGFyZ2V0LmZpcnN0Q2hpbGQpO1xuICB9IGVsc2Uge1xuICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXBsYWNlIHRhcmdldCB3aXRoIGVsXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqL1xuXG5mdW5jdGlvbiByZXBsYWNlKHRhcmdldCwgZWwpIHtcbiAgdmFyIHBhcmVudCA9IHRhcmdldC5wYXJlbnROb2RlO1xuICBpZiAocGFyZW50KSB7XG4gICAgcGFyZW50LnJlcGxhY2VDaGlsZChlbCwgdGFyZ2V0KTtcbiAgfVxufVxuXG4vKipcbiAqIEFkZCBldmVudCBsaXN0ZW5lciBzaG9ydGhhbmQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtIHtCb29sZWFufSBbdXNlQ2FwdHVyZV1cbiAqL1xuXG5mdW5jdGlvbiBvbihlbCwgZXZlbnQsIGNiLCB1c2VDYXB0dXJlKSB7XG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNiLCB1c2VDYXB0dXJlKTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgZXZlbnQgbGlzdGVuZXIgc2hvcnRoYW5kLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuXG5mdW5jdGlvbiBvZmYoZWwsIGV2ZW50LCBjYikge1xuICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBjYik7XG59XG5cbi8qKlxuICogRm9yIElFOSBjb21wYXQ6IHdoZW4gYm90aCBjbGFzcyBhbmQgOmNsYXNzIGFyZSBwcmVzZW50XG4gKiBnZXRBdHRyaWJ1dGUoJ2NsYXNzJykgcmV0dXJucyB3cm9uZyB2YWx1ZS4uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBnZXRDbGFzcyhlbCkge1xuICB2YXIgY2xhc3NuYW1lID0gZWwuY2xhc3NOYW1lO1xuICBpZiAodHlwZW9mIGNsYXNzbmFtZSA9PT0gJ29iamVjdCcpIHtcbiAgICBjbGFzc25hbWUgPSBjbGFzc25hbWUuYmFzZVZhbCB8fCAnJztcbiAgfVxuICByZXR1cm4gY2xhc3NuYW1lO1xufVxuXG4vKipcbiAqIEluIElFOSwgc2V0QXR0cmlidXRlKCdjbGFzcycpIHdpbGwgcmVzdWx0IGluIGVtcHR5IGNsYXNzXG4gKiBpZiB0aGUgZWxlbWVudCBhbHNvIGhhcyB0aGUgOmNsYXNzIGF0dHJpYnV0ZTsgSG93ZXZlciBpblxuICogUGhhbnRvbUpTLCBzZXR0aW5nIGBjbGFzc05hbWVgIGRvZXMgbm90IHdvcmsgb24gU1ZHIGVsZW1lbnRzLi4uXG4gKiBTbyB3ZSBoYXZlIHRvIGRvIGEgY29uZGl0aW9uYWwgY2hlY2sgaGVyZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gY2xzXG4gKi9cblxuZnVuY3Rpb24gc2V0Q2xhc3MoZWwsIGNscykge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGlzSUU5ICYmICEvc3ZnJC8udGVzdChlbC5uYW1lc3BhY2VVUkkpKSB7XG4gICAgZWwuY2xhc3NOYW1lID0gY2xzO1xuICB9IGVsc2Uge1xuICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbHMpO1xuICB9XG59XG5cbi8qKlxuICogQWRkIGNsYXNzIHdpdGggY29tcGF0aWJpbGl0eSBmb3IgSUUgJiBTVkdcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gY2xzXG4gKi9cblxuZnVuY3Rpb24gYWRkQ2xhc3MoZWwsIGNscykge1xuICBpZiAoZWwuY2xhc3NMaXN0KSB7XG4gICAgZWwuY2xhc3NMaXN0LmFkZChjbHMpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjdXIgPSAnICcgKyBnZXRDbGFzcyhlbCkgKyAnICc7XG4gICAgaWYgKGN1ci5pbmRleE9mKCcgJyArIGNscyArICcgJykgPCAwKSB7XG4gICAgICBzZXRDbGFzcyhlbCwgKGN1ciArIGNscykudHJpbSgpKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBJRSAmIFNWR1xuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVDbGFzcyhlbCwgY2xzKSB7XG4gIGlmIChlbC5jbGFzc0xpc3QpIHtcbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNscyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGN1ciA9ICcgJyArIGdldENsYXNzKGVsKSArICcgJztcbiAgICB2YXIgdGFyID0gJyAnICsgY2xzICsgJyAnO1xuICAgIHdoaWxlIChjdXIuaW5kZXhPZih0YXIpID49IDApIHtcbiAgICAgIGN1ciA9IGN1ci5yZXBsYWNlKHRhciwgJyAnKTtcbiAgICB9XG4gICAgc2V0Q2xhc3MoZWwsIGN1ci50cmltKCkpO1xuICB9XG4gIGlmICghZWwuY2xhc3NOYW1lKSB7XG4gICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpO1xuICB9XG59XG5cbi8qKlxuICogRXh0cmFjdCByYXcgY29udGVudCBpbnNpZGUgYW4gZWxlbWVudCBpbnRvIGEgdGVtcG9yYXJ5XG4gKiBjb250YWluZXIgZGl2XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtCb29sZWFufSBhc0ZyYWdtZW50XG4gKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gZXh0cmFjdENvbnRlbnQoZWwsIGFzRnJhZ21lbnQpIHtcbiAgdmFyIGNoaWxkO1xuICB2YXIgcmF3Q29udGVudDtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChpc1RlbXBsYXRlKGVsKSAmJiBpc0ZyYWdtZW50KGVsLmNvbnRlbnQpKSB7XG4gICAgZWwgPSBlbC5jb250ZW50O1xuICB9XG4gIGlmIChlbC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICB0cmltTm9kZShlbCk7XG4gICAgcmF3Q29udGVudCA9IGFzRnJhZ21lbnQgPyBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIHdoaWxlIChjaGlsZCA9IGVsLmZpcnN0Q2hpbGQpIHtcbiAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICAgIHJhd0NvbnRlbnQuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmF3Q29udGVudDtcbn1cblxuLyoqXG4gKiBUcmltIHBvc3NpYmxlIGVtcHR5IGhlYWQvdGFpbCB0ZXh0IGFuZCBjb21tZW50XG4gKiBub2RlcyBpbnNpZGUgYSBwYXJlbnQuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKi9cblxuZnVuY3Rpb24gdHJpbU5vZGUobm9kZSkge1xuICB2YXIgY2hpbGQ7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLXNlcXVlbmNlcyAqL1xuICB3aGlsZSAoKGNoaWxkID0gbm9kZS5maXJzdENoaWxkLCBpc1RyaW1tYWJsZShjaGlsZCkpKSB7XG4gICAgbm9kZS5yZW1vdmVDaGlsZChjaGlsZCk7XG4gIH1cbiAgd2hpbGUgKChjaGlsZCA9IG5vZGUubGFzdENoaWxkLCBpc1RyaW1tYWJsZShjaGlsZCkpKSB7XG4gICAgbm9kZS5yZW1vdmVDaGlsZChjaGlsZCk7XG4gIH1cbiAgLyogZXNsaW50LWVuYWJsZSBuby1zZXF1ZW5jZXMgKi9cbn1cblxuZnVuY3Rpb24gaXNUcmltbWFibGUobm9kZSkge1xuICByZXR1cm4gbm9kZSAmJiAobm9kZS5ub2RlVHlwZSA9PT0gMyAmJiAhbm9kZS5kYXRhLnRyaW0oKSB8fCBub2RlLm5vZGVUeXBlID09PSA4KTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgdGVtcGxhdGUgdGFnLlxuICogTm90ZSBpZiB0aGUgdGVtcGxhdGUgYXBwZWFycyBpbnNpZGUgYW4gU1ZHIGl0cyB0YWdOYW1lXG4gKiB3aWxsIGJlIGluIGxvd2VyY2FzZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKi9cblxuZnVuY3Rpb24gaXNUZW1wbGF0ZShlbCkge1xuICByZXR1cm4gZWwudGFnTmFtZSAmJiBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0ZW1wbGF0ZSc7XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIFwiYW5jaG9yXCIgZm9yIHBlcmZvcm1pbmcgZG9tIGluc2VydGlvbi9yZW1vdmFscy5cbiAqIFRoaXMgaXMgdXNlZCBpbiBhIG51bWJlciBvZiBzY2VuYXJpb3M6XG4gKiAtIGZyYWdtZW50IGluc3RhbmNlXG4gKiAtIHYtaHRtbFxuICogLSB2LWlmXG4gKiAtIHYtZm9yXG4gKiAtIGNvbXBvbmVudFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50XG4gKiBAcGFyYW0ge0Jvb2xlYW59IHBlcnNpc3QgLSBJRSB0cmFzaGVzIGVtcHR5IHRleHROb2RlcyBvblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVOb2RlKHRydWUpLCBzbyBpbiBjZXJ0YWluXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlcyB0aGUgYW5jaG9yIG5lZWRzIHRvIGJlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub24tZW1wdHkgdG8gYmUgcGVyc2lzdGVkIGluXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZXMuXG4gKiBAcmV0dXJuIHtDb21tZW50fFRleHR9XG4gKi9cblxuZnVuY3Rpb24gY3JlYXRlQW5jaG9yKGNvbnRlbnQsIHBlcnNpc3QpIHtcbiAgdmFyIGFuY2hvciA9IGNvbmZpZy5kZWJ1ZyA/IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoY29udGVudCkgOiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShwZXJzaXN0ID8gJyAnIDogJycpO1xuICBhbmNob3IuX192X2FuY2hvciA9IHRydWU7XG4gIHJldHVybiBhbmNob3I7XG59XG5cbi8qKlxuICogRmluZCBhIGNvbXBvbmVudCByZWYgYXR0cmlidXRlIHRoYXQgc3RhcnRzIHdpdGggJC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGVcbiAqIEByZXR1cm4ge1N0cmluZ3x1bmRlZmluZWR9XG4gKi9cblxudmFyIHJlZlJFID0gL152LXJlZjovO1xuXG5mdW5jdGlvbiBmaW5kUmVmKG5vZGUpIHtcbiAgaWYgKG5vZGUuaGFzQXR0cmlidXRlcygpKSB7XG4gICAgdmFyIGF0dHJzID0gbm9kZS5hdHRyaWJ1dGVzO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG4gICAgICBpZiAocmVmUkUudGVzdChuYW1lKSkge1xuICAgICAgICByZXR1cm4gY2FtZWxpemUobmFtZS5yZXBsYWNlKHJlZlJFLCAnJykpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIE1hcCBhIGZ1bmN0aW9uIHRvIGEgcmFuZ2Ugb2Ygbm9kZXMgLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtOb2RlfSBlbmRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9wXG4gKi9cblxuZnVuY3Rpb24gbWFwTm9kZVJhbmdlKG5vZGUsIGVuZCwgb3ApIHtcbiAgdmFyIG5leHQ7XG4gIHdoaWxlIChub2RlICE9PSBlbmQpIHtcbiAgICBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcbiAgICBvcChub2RlKTtcbiAgICBub2RlID0gbmV4dDtcbiAgfVxuICBvcChlbmQpO1xufVxuXG4vKipcbiAqIFJlbW92ZSBhIHJhbmdlIG9mIG5vZGVzIHdpdGggdHJhbnNpdGlvbiwgc3RvcmVcbiAqIHRoZSBub2RlcyBpbiBhIGZyYWdtZW50IHdpdGggY29ycmVjdCBvcmRlcmluZyxcbiAqIGFuZCBjYWxsIGNhbGxiYWNrIHdoZW4gZG9uZS5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IHN0YXJ0XG4gKiBAcGFyYW0ge05vZGV9IGVuZFxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKi9cblxuZnVuY3Rpb24gcmVtb3ZlTm9kZVJhbmdlKHN0YXJ0LCBlbmQsIHZtLCBmcmFnLCBjYikge1xuICB2YXIgZG9uZSA9IGZhbHNlO1xuICB2YXIgcmVtb3ZlZCA9IDA7XG4gIHZhciBub2RlcyA9IFtdO1xuICBtYXBOb2RlUmFuZ2Uoc3RhcnQsIGVuZCwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICBpZiAobm9kZSA9PT0gZW5kKSBkb25lID0gdHJ1ZTtcbiAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgIHJlbW92ZVdpdGhUcmFuc2l0aW9uKG5vZGUsIHZtLCBvblJlbW92ZWQpO1xuICB9KTtcbiAgZnVuY3Rpb24gb25SZW1vdmVkKCkge1xuICAgIHJlbW92ZWQrKztcbiAgICBpZiAoZG9uZSAmJiByZW1vdmVkID49IG5vZGVzLmxlbmd0aCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmcmFnLmFwcGVuZENoaWxkKG5vZGVzW2ldKTtcbiAgICAgIH1cbiAgICAgIGNiICYmIGNiKCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBub2RlIGlzIGEgRG9jdW1lbnRGcmFnbWVudC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNGcmFnbWVudChub2RlKSB7XG4gIHJldHVybiBub2RlICYmIG5vZGUubm9kZVR5cGUgPT09IDExO1xufVxuXG4vKipcbiAqIEdldCBvdXRlckhUTUwgb2YgZWxlbWVudHMsIHRha2luZyBjYXJlXG4gKiBvZiBTVkcgZWxlbWVudHMgaW4gSUUgYXMgd2VsbC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gZ2V0T3V0ZXJIVE1MKGVsKSB7XG4gIGlmIChlbC5vdXRlckhUTUwpIHtcbiAgICByZXR1cm4gZWwub3V0ZXJIVE1MO1xuICB9IGVsc2Uge1xuICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWwuY2xvbmVOb2RlKHRydWUpKTtcbiAgICByZXR1cm4gY29udGFpbmVyLmlubmVySFRNTDtcbiAgfVxufVxuXG52YXIgY29tbW9uVGFnUkUgPSAvXihkaXZ8cHxzcGFufGltZ3xhfGJ8aXxicnx1bHxvbHxsaXxoMXxoMnxoM3xoNHxoNXxoNnxjb2RlfHByZXx0YWJsZXx0aHx0ZHx0cnxmb3JtfGxhYmVsfGlucHV0fHNlbGVjdHxvcHRpb258bmF2fGFydGljbGV8c2VjdGlvbnxoZWFkZXJ8Zm9vdGVyKSQvaTtcbnZhciByZXNlcnZlZFRhZ1JFID0gL14oc2xvdHxwYXJ0aWFsfGNvbXBvbmVudCkkL2k7XG5cbnZhciBpc1Vua25vd25FbGVtZW50ID0gdW5kZWZpbmVkO1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgaXNVbmtub3duRWxlbWVudCA9IGZ1bmN0aW9uIChlbCwgdGFnKSB7XG4gICAgaWYgKHRhZy5pbmRleE9mKCctJykgPiAtMSkge1xuICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjgyMTAzNjQvMTA3MDI0NFxuICAgICAgcmV0dXJuIGVsLmNvbnN0cnVjdG9yID09PSB3aW5kb3cuSFRNTFVua25vd25FbGVtZW50IHx8IGVsLmNvbnN0cnVjdG9yID09PSB3aW5kb3cuSFRNTEVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoL0hUTUxVbmtub3duRWxlbWVudC8udGVzdChlbC50b1N0cmluZygpKSAmJlxuICAgICAgICAvLyBDaHJvbWUgcmV0dXJucyB1bmtub3duIGZvciBzZXZlcmFsIEhUTUw1IGVsZW1lbnRzLlxuICAgICAgICAvLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NTQwNTI2XG4gICAgICAgIC8vIEZpcmVmb3ggcmV0dXJucyB1bmtub3duIGZvciBzb21lIFwiSW50ZXJhY3RpdmUgZWxlbWVudHMuXCJcbiAgICAgICAgIS9eKGRhdGF8dGltZXxydGN8cmJ8ZGV0YWlsc3xkaWFsb2d8c3VtbWFyeSkkLy50ZXN0KHRhZylcbiAgICAgICk7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSBjb21wb25lbnQsIGlmIHllcyByZXR1cm4gaXRzXG4gKiBjb21wb25lbnQgaWQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gY2hlY2tDb21wb25lbnRBdHRyKGVsLCBvcHRpb25zKSB7XG4gIHZhciB0YWcgPSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIHZhciBoYXNBdHRycyA9IGVsLmhhc0F0dHJpYnV0ZXMoKTtcbiAgaWYgKCFjb21tb25UYWdSRS50ZXN0KHRhZykgJiYgIXJlc2VydmVkVGFnUkUudGVzdCh0YWcpKSB7XG4gICAgaWYgKHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykpIHtcbiAgICAgIHJldHVybiB7IGlkOiB0YWcgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGlzID0gaGFzQXR0cnMgJiYgZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKTtcbiAgICAgIGlmIChpcykge1xuICAgICAgICByZXR1cm4gaXM7XG4gICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgdmFyIGV4cGVjdGVkVGFnID0gb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcCAmJiBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwW3RhZ107XG4gICAgICAgIGlmIChleHBlY3RlZFRhZykge1xuICAgICAgICAgIHdhcm4oJ1Vua25vd24gY3VzdG9tIGVsZW1lbnQ6IDwnICsgdGFnICsgJz4gLSAnICsgJ2RpZCB5b3UgbWVhbiA8JyArIGV4cGVjdGVkVGFnICsgJz4/ICcgKyAnSFRNTCBpcyBjYXNlLWluc2Vuc2l0aXZlLCByZW1lbWJlciB0byB1c2Uga2ViYWItY2FzZSBpbiB0ZW1wbGF0ZXMuJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNVbmtub3duRWxlbWVudChlbCwgdGFnKSkge1xuICAgICAgICAgIHdhcm4oJ1Vua25vd24gY3VzdG9tIGVsZW1lbnQ6IDwnICsgdGFnICsgJz4gLSBkaWQgeW91ICcgKyAncmVnaXN0ZXIgdGhlIGNvbXBvbmVudCBjb3JyZWN0bHk/IEZvciByZWN1cnNpdmUgY29tcG9uZW50cywgJyArICdtYWtlIHN1cmUgdG8gcHJvdmlkZSB0aGUgXCJuYW1lXCIgb3B0aW9uLicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGhhc0F0dHJzKSB7XG4gICAgcmV0dXJuIGdldElzQmluZGluZyhlbCwgb3B0aW9ucyk7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgXCJpc1wiIGJpbmRpbmcgZnJvbSBhbiBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIGdldElzQmluZGluZyhlbCwgb3B0aW9ucykge1xuICAvLyBkeW5hbWljIHN5bnRheFxuICB2YXIgZXhwID0gZWwuZ2V0QXR0cmlidXRlKCdpcycpO1xuICBpZiAoZXhwICE9IG51bGwpIHtcbiAgICBpZiAocmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgZXhwKSkge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdpcycpO1xuICAgICAgcmV0dXJuIHsgaWQ6IGV4cCB9O1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBleHAgPSBnZXRCaW5kQXR0cihlbCwgJ2lzJyk7XG4gICAgaWYgKGV4cCAhPSBudWxsKSB7XG4gICAgICByZXR1cm4geyBpZDogZXhwLCBkeW5hbWljOiB0cnVlIH07XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogT3B0aW9uIG92ZXJ3cml0aW5nIHN0cmF0ZWdpZXMgYXJlIGZ1bmN0aW9ucyB0aGF0IGhhbmRsZVxuICogaG93IHRvIG1lcmdlIGEgcGFyZW50IG9wdGlvbiB2YWx1ZSBhbmQgYSBjaGlsZCBvcHRpb25cbiAqIHZhbHVlIGludG8gdGhlIGZpbmFsIHZhbHVlLlxuICpcbiAqIEFsbCBzdHJhdGVneSBmdW5jdGlvbnMgZm9sbG93IHRoZSBzYW1lIHNpZ25hdHVyZTpcbiAqXG4gKiBAcGFyYW0geyp9IHBhcmVudFZhbFxuICogQHBhcmFtIHsqfSBjaGlsZFZhbFxuICogQHBhcmFtIHtWdWV9IFt2bV1cbiAqL1xuXG52YXIgc3RyYXRzID0gY29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbi8qKlxuICogSGVscGVyIHRoYXQgcmVjdXJzaXZlbHkgbWVyZ2VzIHR3byBkYXRhIG9iamVjdHMgdG9nZXRoZXIuXG4gKi9cblxuZnVuY3Rpb24gbWVyZ2VEYXRhKHRvLCBmcm9tKSB7XG4gIHZhciBrZXksIHRvVmFsLCBmcm9tVmFsO1xuICBmb3IgKGtleSBpbiBmcm9tKSB7XG4gICAgdG9WYWwgPSB0b1trZXldO1xuICAgIGZyb21WYWwgPSBmcm9tW2tleV07XG4gICAgaWYgKCFoYXNPd24odG8sIGtleSkpIHtcbiAgICAgIHNldCh0bywga2V5LCBmcm9tVmFsKTtcbiAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHRvVmFsKSAmJiBpc09iamVjdChmcm9tVmFsKSkge1xuICAgICAgbWVyZ2VEYXRhKHRvVmFsLCBmcm9tVmFsKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRvO1xufVxuXG4vKipcbiAqIERhdGFcbiAqL1xuXG5zdHJhdHMuZGF0YSA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSkge1xuICBpZiAoIXZtKSB7XG4gICAgLy8gaW4gYSBWdWUuZXh0ZW5kIG1lcmdlLCBib3RoIHNob3VsZCBiZSBmdW5jdGlvbnNcbiAgICBpZiAoIWNoaWxkVmFsKSB7XG4gICAgICByZXR1cm4gcGFyZW50VmFsO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1RoZSBcImRhdGFcIiBvcHRpb24gc2hvdWxkIGJlIGEgZnVuY3Rpb24gJyArICd0aGF0IHJldHVybnMgYSBwZXItaW5zdGFuY2UgdmFsdWUgaW4gY29tcG9uZW50ICcgKyAnZGVmaW5pdGlvbnMuJywgdm0pO1xuICAgICAgcmV0dXJuIHBhcmVudFZhbDtcbiAgICB9XG4gICAgaWYgKCFwYXJlbnRWYWwpIHtcbiAgICAgIHJldHVybiBjaGlsZFZhbDtcbiAgICB9XG4gICAgLy8gd2hlbiBwYXJlbnRWYWwgJiBjaGlsZFZhbCBhcmUgYm90aCBwcmVzZW50LFxuICAgIC8vIHdlIG5lZWQgdG8gcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZVxuICAgIC8vIG1lcmdlZCByZXN1bHQgb2YgYm90aCBmdW5jdGlvbnMuLi4gbm8gbmVlZCB0b1xuICAgIC8vIGNoZWNrIGlmIHBhcmVudFZhbCBpcyBhIGZ1bmN0aW9uIGhlcmUgYmVjYXVzZVxuICAgIC8vIGl0IGhhcyB0byBiZSBhIGZ1bmN0aW9uIHRvIHBhc3MgcHJldmlvdXMgbWVyZ2VzLlxuICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWREYXRhRm4oKSB7XG4gICAgICByZXR1cm4gbWVyZ2VEYXRhKGNoaWxkVmFsLmNhbGwodGhpcyksIHBhcmVudFZhbC5jYWxsKHRoaXMpKTtcbiAgICB9O1xuICB9IGVsc2UgaWYgKHBhcmVudFZhbCB8fCBjaGlsZFZhbCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWRJbnN0YW5jZURhdGFGbigpIHtcbiAgICAgIC8vIGluc3RhbmNlIG1lcmdlXG4gICAgICB2YXIgaW5zdGFuY2VEYXRhID0gdHlwZW9mIGNoaWxkVmFsID09PSAnZnVuY3Rpb24nID8gY2hpbGRWYWwuY2FsbCh2bSkgOiBjaGlsZFZhbDtcbiAgICAgIHZhciBkZWZhdWx0RGF0YSA9IHR5cGVvZiBwYXJlbnRWYWwgPT09ICdmdW5jdGlvbicgPyBwYXJlbnRWYWwuY2FsbCh2bSkgOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoaW5zdGFuY2VEYXRhKSB7XG4gICAgICAgIHJldHVybiBtZXJnZURhdGEoaW5zdGFuY2VEYXRhLCBkZWZhdWx0RGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZGVmYXVsdERhdGE7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufTtcblxuLyoqXG4gKiBFbFxuICovXG5cbnN0cmF0cy5lbCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSkge1xuICBpZiAoIXZtICYmIGNoaWxkVmFsICYmIHR5cGVvZiBjaGlsZFZhbCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVGhlIFwiZWxcIiBvcHRpb24gc2hvdWxkIGJlIGEgZnVuY3Rpb24gJyArICd0aGF0IHJldHVybnMgYSBwZXItaW5zdGFuY2UgdmFsdWUgaW4gY29tcG9uZW50ICcgKyAnZGVmaW5pdGlvbnMuJywgdm0pO1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgcmV0ID0gY2hpbGRWYWwgfHwgcGFyZW50VmFsO1xuICAvLyBpbnZva2UgdGhlIGVsZW1lbnQgZmFjdG9yeSBpZiB0aGlzIGlzIGluc3RhbmNlIG1lcmdlXG4gIHJldHVybiB2bSAmJiB0eXBlb2YgcmV0ID09PSAnZnVuY3Rpb24nID8gcmV0LmNhbGwodm0pIDogcmV0O1xufTtcblxuLyoqXG4gKiBIb29rcyBhbmQgcGFyYW0gYXR0cmlidXRlcyBhcmUgbWVyZ2VkIGFzIGFycmF5cy5cbiAqL1xuXG5zdHJhdHMuaW5pdCA9IHN0cmF0cy5jcmVhdGVkID0gc3RyYXRzLnJlYWR5ID0gc3RyYXRzLmF0dGFjaGVkID0gc3RyYXRzLmRldGFjaGVkID0gc3RyYXRzLmJlZm9yZUNvbXBpbGUgPSBzdHJhdHMuY29tcGlsZWQgPSBzdHJhdHMuYmVmb3JlRGVzdHJveSA9IHN0cmF0cy5kZXN0cm95ZWQgPSBzdHJhdHMuYWN0aXZhdGUgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuICByZXR1cm4gY2hpbGRWYWwgPyBwYXJlbnRWYWwgPyBwYXJlbnRWYWwuY29uY2F0KGNoaWxkVmFsKSA6IGlzQXJyYXkoY2hpbGRWYWwpID8gY2hpbGRWYWwgOiBbY2hpbGRWYWxdIDogcGFyZW50VmFsO1xufTtcblxuLyoqXG4gKiBBc3NldHNcbiAqXG4gKiBXaGVuIGEgdm0gaXMgcHJlc2VudCAoaW5zdGFuY2UgY3JlYXRpb24pLCB3ZSBuZWVkIHRvIGRvXG4gKiBhIHRocmVlLXdheSBtZXJnZSBiZXR3ZWVuIGNvbnN0cnVjdG9yIG9wdGlvbnMsIGluc3RhbmNlXG4gKiBvcHRpb25zIGFuZCBwYXJlbnQgb3B0aW9ucy5cbiAqL1xuXG5mdW5jdGlvbiBtZXJnZUFzc2V0cyhwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFZhbCB8fCBudWxsKTtcbiAgcmV0dXJuIGNoaWxkVmFsID8gZXh0ZW5kKHJlcywgZ3VhcmRBcnJheUFzc2V0cyhjaGlsZFZhbCkpIDogcmVzO1xufVxuXG5jb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICBzdHJhdHNbdHlwZSArICdzJ10gPSBtZXJnZUFzc2V0cztcbn0pO1xuXG4vKipcbiAqIEV2ZW50cyAmIFdhdGNoZXJzLlxuICpcbiAqIEV2ZW50cyAmIHdhdGNoZXJzIGhhc2hlcyBzaG91bGQgbm90IG92ZXJ3cml0ZSBvbmVcbiAqIGFub3RoZXIsIHNvIHdlIG1lcmdlIHRoZW0gYXMgYXJyYXlzLlxuICovXG5cbnN0cmF0cy53YXRjaCA9IHN0cmF0cy5ldmVudHMgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsO1xuICBpZiAoIXBhcmVudFZhbCkgcmV0dXJuIGNoaWxkVmFsO1xuICB2YXIgcmV0ID0ge307XG4gIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG4gIGZvciAodmFyIGtleSBpbiBjaGlsZFZhbCkge1xuICAgIHZhciBwYXJlbnQgPSByZXRba2V5XTtcbiAgICB2YXIgY2hpbGQgPSBjaGlsZFZhbFtrZXldO1xuICAgIGlmIChwYXJlbnQgJiYgIWlzQXJyYXkocGFyZW50KSkge1xuICAgICAgcGFyZW50ID0gW3BhcmVudF07XG4gICAgfVxuICAgIHJldFtrZXldID0gcGFyZW50ID8gcGFyZW50LmNvbmNhdChjaGlsZCkgOiBbY2hpbGRdO1xuICB9XG4gIHJldHVybiByZXQ7XG59O1xuXG4vKipcbiAqIE90aGVyIG9iamVjdCBoYXNoZXMuXG4gKi9cblxuc3RyYXRzLnByb3BzID0gc3RyYXRzLm1ldGhvZHMgPSBzdHJhdHMuY29tcHV0ZWQgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsO1xuICBpZiAoIXBhcmVudFZhbCkgcmV0dXJuIGNoaWxkVmFsO1xuICB2YXIgcmV0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcbiAgZXh0ZW5kKHJldCwgY2hpbGRWYWwpO1xuICByZXR1cm4gcmV0O1xufTtcblxuLyoqXG4gKiBEZWZhdWx0IHN0cmF0ZWd5LlxuICovXG5cbnZhciBkZWZhdWx0U3RyYXQgPSBmdW5jdGlvbiBkZWZhdWx0U3RyYXQocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuICByZXR1cm4gY2hpbGRWYWwgPT09IHVuZGVmaW5lZCA/IHBhcmVudFZhbCA6IGNoaWxkVmFsO1xufTtcblxuLyoqXG4gKiBNYWtlIHN1cmUgY29tcG9uZW50IG9wdGlvbnMgZ2V0IGNvbnZlcnRlZCB0byBhY3R1YWxcbiAqIGNvbnN0cnVjdG9ycy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5cbmZ1bmN0aW9uIGd1YXJkQ29tcG9uZW50cyhvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zLmNvbXBvbmVudHMpIHtcbiAgICB2YXIgY29tcG9uZW50cyA9IG9wdGlvbnMuY29tcG9uZW50cyA9IGd1YXJkQXJyYXlBc3NldHMob3B0aW9ucy5jb21wb25lbnRzKTtcbiAgICB2YXIgaWRzID0gT2JqZWN0LmtleXMoY29tcG9uZW50cyk7XG4gICAgdmFyIGRlZjtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFyIG1hcCA9IG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXAgPSB7fTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBpZHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0gaWRzW2ldO1xuICAgICAgaWYgKGNvbW1vblRhZ1JFLnRlc3Qoa2V5KSB8fCByZXNlcnZlZFRhZ1JFLnRlc3Qoa2V5KSkge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0RvIG5vdCB1c2UgYnVpbHQtaW4gb3IgcmVzZXJ2ZWQgSFRNTCBlbGVtZW50cyBhcyBjb21wb25lbnQgJyArICdpZDogJyArIGtleSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgLy8gcmVjb3JkIGEgYWxsIGxvd2VyY2FzZSA8LT4ga2ViYWItY2FzZSBtYXBwaW5nIGZvclxuICAgICAgLy8gcG9zc2libGUgY3VzdG9tIGVsZW1lbnQgY2FzZSBlcnJvciB3YXJuaW5nXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBtYXBba2V5LnJlcGxhY2UoLy0vZywgJycpLnRvTG93ZXJDYXNlKCldID0gaHlwaGVuYXRlKGtleSk7XG4gICAgICB9XG4gICAgICBkZWYgPSBjb21wb25lbnRzW2tleV07XG4gICAgICBpZiAoaXNQbGFpbk9iamVjdChkZWYpKSB7XG4gICAgICAgIGNvbXBvbmVudHNba2V5XSA9IFZ1ZS5leHRlbmQoZGVmKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBFbnN1cmUgYWxsIHByb3BzIG9wdGlvbiBzeW50YXggYXJlIG5vcm1hbGl6ZWQgaW50byB0aGVcbiAqIE9iamVjdC1iYXNlZCBmb3JtYXQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuXG5mdW5jdGlvbiBndWFyZFByb3BzKG9wdGlvbnMpIHtcbiAgdmFyIHByb3BzID0gb3B0aW9ucy5wcm9wcztcbiAgdmFyIGksIHZhbDtcbiAgaWYgKGlzQXJyYXkocHJvcHMpKSB7XG4gICAgb3B0aW9ucy5wcm9wcyA9IHt9O1xuICAgIGkgPSBwcm9wcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFsID0gcHJvcHNbaV07XG4gICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgb3B0aW9ucy5wcm9wc1t2YWxdID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAodmFsLm5hbWUpIHtcbiAgICAgICAgb3B0aW9ucy5wcm9wc1t2YWwubmFtZV0gPSB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QocHJvcHMpKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wcyk7XG4gICAgaSA9IGtleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhbCA9IHByb3BzW2tleXNbaV1dO1xuICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcHJvcHNba2V5c1tpXV0gPSB7IHR5cGU6IHZhbCB9O1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEd1YXJkIGFuIEFycmF5LWZvcm1hdCBhc3NldHMgb3B0aW9uIGFuZCBjb252ZXJ0ZWQgaXRcbiAqIGludG8gdGhlIGtleS12YWx1ZSBPYmplY3QgZm9ybWF0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBhc3NldHNcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBndWFyZEFycmF5QXNzZXRzKGFzc2V0cykge1xuICBpZiAoaXNBcnJheShhc3NldHMpKSB7XG4gICAgdmFyIHJlcyA9IHt9O1xuICAgIHZhciBpID0gYXNzZXRzLmxlbmd0aDtcbiAgICB2YXIgYXNzZXQ7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgYXNzZXQgPSBhc3NldHNbaV07XG4gICAgICB2YXIgaWQgPSB0eXBlb2YgYXNzZXQgPT09ICdmdW5jdGlvbicgPyBhc3NldC5vcHRpb25zICYmIGFzc2V0Lm9wdGlvbnMubmFtZSB8fCBhc3NldC5pZCA6IGFzc2V0Lm5hbWUgfHwgYXNzZXQuaWQ7XG4gICAgICBpZiAoIWlkKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQXJyYXktc3ludGF4IGFzc2V0cyBtdXN0IHByb3ZpZGUgYSBcIm5hbWVcIiBvciBcImlkXCIgZmllbGQuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNbaWRdID0gYXNzZXQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cbiAgcmV0dXJuIGFzc2V0cztcbn1cblxuLyoqXG4gKiBNZXJnZSB0d28gb3B0aW9uIG9iamVjdHMgaW50byBhIG5ldyBvbmUuXG4gKiBDb3JlIHV0aWxpdHkgdXNlZCBpbiBib3RoIGluc3RhbnRpYXRpb24gYW5kIGluaGVyaXRhbmNlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYXJlbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBjaGlsZFxuICogQHBhcmFtIHtWdWV9IFt2bV0gLSBpZiB2bSBpcyBwcmVzZW50LCBpbmRpY2F0ZXMgdGhpcyBpc1xuICogICAgICAgICAgICAgICAgICAgICBhbiBpbnN0YW50aWF0aW9uIG1lcmdlLlxuICovXG5cbmZ1bmN0aW9uIG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkLCB2bSkge1xuICBndWFyZENvbXBvbmVudHMoY2hpbGQpO1xuICBndWFyZFByb3BzKGNoaWxkKTtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoY2hpbGQucHJvcHNEYXRhICYmICF2bSkge1xuICAgICAgd2FybigncHJvcHNEYXRhIGNhbiBvbmx5IGJlIHVzZWQgYXMgYW4gaW5zdGFudGlhdGlvbiBvcHRpb24uJyk7XG4gICAgfVxuICB9XG4gIHZhciBvcHRpb25zID0ge307XG4gIHZhciBrZXk7XG4gIGlmIChjaGlsZFsnZXh0ZW5kcyddKSB7XG4gICAgcGFyZW50ID0gdHlwZW9mIGNoaWxkWydleHRlbmRzJ10gPT09ICdmdW5jdGlvbicgPyBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZFsnZXh0ZW5kcyddLm9wdGlvbnMsIHZtKSA6IG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkWydleHRlbmRzJ10sIHZtKTtcbiAgfVxuICBpZiAoY2hpbGQubWl4aW5zKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZC5taXhpbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgbWl4aW4gPSBjaGlsZC5taXhpbnNbaV07XG4gICAgICB2YXIgbWl4aW5PcHRpb25zID0gbWl4aW4ucHJvdG90eXBlIGluc3RhbmNlb2YgVnVlID8gbWl4aW4ub3B0aW9ucyA6IG1peGluO1xuICAgICAgcGFyZW50ID0gbWVyZ2VPcHRpb25zKHBhcmVudCwgbWl4aW5PcHRpb25zLCB2bSk7XG4gICAgfVxuICB9XG4gIGZvciAoa2V5IGluIHBhcmVudCkge1xuICAgIG1lcmdlRmllbGQoa2V5KTtcbiAgfVxuICBmb3IgKGtleSBpbiBjaGlsZCkge1xuICAgIGlmICghaGFzT3duKHBhcmVudCwga2V5KSkge1xuICAgICAgbWVyZ2VGaWVsZChrZXkpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBtZXJnZUZpZWxkKGtleSkge1xuICAgIHZhciBzdHJhdCA9IHN0cmF0c1trZXldIHx8IGRlZmF1bHRTdHJhdDtcbiAgICBvcHRpb25zW2tleV0gPSBzdHJhdChwYXJlbnRba2V5XSwgY2hpbGRba2V5XSwgdm0sIGtleSk7XG4gIH1cbiAgcmV0dXJuIG9wdGlvbnM7XG59XG5cbi8qKlxuICogUmVzb2x2ZSBhbiBhc3NldC5cbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBiZWNhdXNlIGNoaWxkIGluc3RhbmNlcyBuZWVkIGFjY2Vzc1xuICogdG8gYXNzZXRzIGRlZmluZWQgaW4gaXRzIGFuY2VzdG9yIGNoYWluLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHdhcm5NaXNzaW5nXG4gKiBAcmV0dXJuIHtPYmplY3R8RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsIHR5cGUsIGlkLCB3YXJuTWlzc2luZykge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHR5cGVvZiBpZCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGFzc2V0cyA9IG9wdGlvbnNbdHlwZV07XG4gIHZhciBjYW1lbGl6ZWRJZDtcbiAgdmFyIHJlcyA9IGFzc2V0c1tpZF0gfHxcbiAgLy8gY2FtZWxDYXNlIElEXG4gIGFzc2V0c1tjYW1lbGl6ZWRJZCA9IGNhbWVsaXplKGlkKV0gfHxcbiAgLy8gUGFzY2FsIENhc2UgSURcbiAgYXNzZXRzW2NhbWVsaXplZElkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWxpemVkSWQuc2xpY2UoMSldO1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuTWlzc2luZyAmJiAhcmVzKSB7XG4gICAgd2FybignRmFpbGVkIHRvIHJlc29sdmUgJyArIHR5cGUuc2xpY2UoMCwgLTEpICsgJzogJyArIGlkLCBvcHRpb25zKTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG52YXIgdWlkJDEgPSAwO1xuXG4vKipcbiAqIEEgZGVwIGlzIGFuIG9ic2VydmFibGUgdGhhdCBjYW4gaGF2ZSBtdWx0aXBsZVxuICogZGlyZWN0aXZlcyBzdWJzY3JpYmluZyB0byBpdC5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gRGVwKCkge1xuICB0aGlzLmlkID0gdWlkJDErKztcbiAgdGhpcy5zdWJzID0gW107XG59XG5cbi8vIHRoZSBjdXJyZW50IHRhcmdldCB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZC5cbi8vIHRoaXMgaXMgZ2xvYmFsbHkgdW5pcXVlIGJlY2F1c2UgdGhlcmUgY291bGQgYmUgb25seSBvbmVcbi8vIHdhdGNoZXIgYmVpbmcgZXZhbHVhdGVkIGF0IGFueSB0aW1lLlxuRGVwLnRhcmdldCA9IG51bGw7XG5cbi8qKlxuICogQWRkIGEgZGlyZWN0aXZlIHN1YnNjcmliZXIuXG4gKlxuICogQHBhcmFtIHtEaXJlY3RpdmV9IHN1YlxuICovXG5cbkRlcC5wcm90b3R5cGUuYWRkU3ViID0gZnVuY3Rpb24gKHN1Yikge1xuICB0aGlzLnN1YnMucHVzaChzdWIpO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYSBkaXJlY3RpdmUgc3Vic2NyaWJlci5cbiAqXG4gKiBAcGFyYW0ge0RpcmVjdGl2ZX0gc3ViXG4gKi9cblxuRGVwLnByb3RvdHlwZS5yZW1vdmVTdWIgPSBmdW5jdGlvbiAoc3ViKSB7XG4gIHRoaXMuc3Vicy4kcmVtb3ZlKHN1Yik7XG59O1xuXG4vKipcbiAqIEFkZCBzZWxmIGFzIGEgZGVwZW5kZW5jeSB0byB0aGUgdGFyZ2V0IHdhdGNoZXIuXG4gKi9cblxuRGVwLnByb3RvdHlwZS5kZXBlbmQgPSBmdW5jdGlvbiAoKSB7XG4gIERlcC50YXJnZXQuYWRkRGVwKHRoaXMpO1xufTtcblxuLyoqXG4gKiBOb3RpZnkgYWxsIHN1YnNjcmliZXJzIG9mIGEgbmV3IHZhbHVlLlxuICovXG5cbkRlcC5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gKCkge1xuICAvLyBzdGFibGl6ZSB0aGUgc3Vic2NyaWJlciBsaXN0IGZpcnN0XG4gIHZhciBzdWJzID0gdG9BcnJheSh0aGlzLnN1YnMpO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHN1YnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgc3Vic1tpXS51cGRhdGUoKTtcbiAgfVxufTtcblxudmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG52YXIgYXJyYXlNZXRob2RzID0gT2JqZWN0LmNyZWF0ZShhcnJheVByb3RvKVxuXG4vKipcbiAqIEludGVyY2VwdCBtdXRhdGluZyBtZXRob2RzIGFuZCBlbWl0IGV2ZW50c1xuICovXG5cbjtbJ3B1c2gnLCAncG9wJywgJ3NoaWZ0JywgJ3Vuc2hpZnQnLCAnc3BsaWNlJywgJ3NvcnQnLCAncmV2ZXJzZSddLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkge1xuICAvLyBjYWNoZSBvcmlnaW5hbCBtZXRob2RcbiAgdmFyIG9yaWdpbmFsID0gYXJyYXlQcm90b1ttZXRob2RdO1xuICBkZWYoYXJyYXlNZXRob2RzLCBtZXRob2QsIGZ1bmN0aW9uIG11dGF0b3IoKSB7XG4gICAgLy8gYXZvaWQgbGVha2luZyBhcmd1bWVudHM6XG4gICAgLy8gaHR0cDovL2pzcGVyZi5jb20vY2xvc3VyZS13aXRoLWFyZ3VtZW50c1xuICAgIHZhciBpID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShpKTtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gb3JpZ2luYWwuYXBwbHkodGhpcywgYXJncyk7XG4gICAgdmFyIG9iID0gdGhpcy5fX29iX187XG4gICAgdmFyIGluc2VydGVkO1xuICAgIHN3aXRjaCAobWV0aG9kKSB7XG4gICAgICBjYXNlICdwdXNoJzpcbiAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3Vuc2hpZnQnOlxuICAgICAgICBpbnNlcnRlZCA9IGFyZ3M7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc3BsaWNlJzpcbiAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzLnNsaWNlKDIpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgaWYgKGluc2VydGVkKSBvYi5vYnNlcnZlQXJyYXkoaW5zZXJ0ZWQpO1xuICAgIC8vIG5vdGlmeSBjaGFuZ2VcbiAgICBvYi5kZXAubm90aWZ5KCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSk7XG59KTtcblxuLyoqXG4gKiBTd2FwIHRoZSBlbGVtZW50IGF0IHRoZSBnaXZlbiBpbmRleCB3aXRoIGEgbmV3IHZhbHVlXG4gKiBhbmQgZW1pdHMgY29ycmVzcG9uZGluZyBldmVudC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKiBAcmV0dXJuIHsqfSAtIHJlcGxhY2VkIGVsZW1lbnRcbiAqL1xuXG5kZWYoYXJyYXlQcm90bywgJyRzZXQnLCBmdW5jdGlvbiAkc2V0KGluZGV4LCB2YWwpIHtcbiAgaWYgKGluZGV4ID49IHRoaXMubGVuZ3RoKSB7XG4gICAgdGhpcy5sZW5ndGggPSBOdW1iZXIoaW5kZXgpICsgMTtcbiAgfVxuICByZXR1cm4gdGhpcy5zcGxpY2UoaW5kZXgsIDEsIHZhbClbMF07XG59KTtcblxuLyoqXG4gKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcmVtb3ZlIHRoZSBlbGVtZW50IGF0IGdpdmVuIGluZGV4IG9yIHRhcmdldCBlbGVtZW50IHJlZmVyZW5jZS5cbiAqXG4gKiBAcGFyYW0geyp9IGl0ZW1cbiAqL1xuXG5kZWYoYXJyYXlQcm90bywgJyRyZW1vdmUnLCBmdW5jdGlvbiAkcmVtb3ZlKGl0ZW0pIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICghdGhpcy5sZW5ndGgpIHJldHVybjtcbiAgdmFyIGluZGV4ID0gaW5kZXhPZih0aGlzLCBpdGVtKTtcbiAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICByZXR1cm4gdGhpcy5zcGxpY2UoaW5kZXgsIDEpO1xuICB9XG59KTtcblxudmFyIGFycmF5S2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGFycmF5TWV0aG9kcyk7XG5cbi8qKlxuICogQnkgZGVmYXVsdCwgd2hlbiBhIHJlYWN0aXZlIHByb3BlcnR5IGlzIHNldCwgdGhlIG5ldyB2YWx1ZSBpc1xuICogYWxzbyBjb252ZXJ0ZWQgdG8gYmVjb21lIHJlYWN0aXZlLiBIb3dldmVyIGluIGNlcnRhaW4gY2FzZXMsIGUuZy5cbiAqIHYtZm9yIHNjb3BlIGFsaWFzIGFuZCBwcm9wcywgd2UgZG9uJ3Qgd2FudCB0byBmb3JjZSBjb252ZXJzaW9uXG4gKiBiZWNhdXNlIHRoZSB2YWx1ZSBtYXkgYmUgYSBuZXN0ZWQgdmFsdWUgdW5kZXIgYSBmcm96ZW4gZGF0YSBzdHJ1Y3R1cmUuXG4gKlxuICogU28gd2hlbmV2ZXIgd2Ugd2FudCB0byBzZXQgYSByZWFjdGl2ZSBwcm9wZXJ0eSB3aXRob3V0IGZvcmNpbmdcbiAqIGNvbnZlcnNpb24gb24gdGhlIG5ldyB2YWx1ZSwgd2Ugd3JhcCB0aGF0IGNhbGwgaW5zaWRlIHRoaXMgZnVuY3Rpb24uXG4gKi9cblxudmFyIHNob3VsZENvbnZlcnQgPSB0cnVlO1xuXG5mdW5jdGlvbiB3aXRob3V0Q29udmVyc2lvbihmbikge1xuICBzaG91bGRDb252ZXJ0ID0gZmFsc2U7XG4gIGZuKCk7XG4gIHNob3VsZENvbnZlcnQgPSB0cnVlO1xufVxuXG4vKipcbiAqIE9ic2VydmVyIGNsYXNzIHRoYXQgYXJlIGF0dGFjaGVkIHRvIGVhY2ggb2JzZXJ2ZWRcbiAqIG9iamVjdC4gT25jZSBhdHRhY2hlZCwgdGhlIG9ic2VydmVyIGNvbnZlcnRzIHRhcmdldFxuICogb2JqZWN0J3MgcHJvcGVydHkga2V5cyBpbnRvIGdldHRlci9zZXR0ZXJzIHRoYXRcbiAqIGNvbGxlY3QgZGVwZW5kZW5jaWVzIGFuZCBkaXNwYXRjaGVzIHVwZGF0ZXMuXG4gKlxuICogQHBhcmFtIHtBcnJheXxPYmplY3R9IHZhbHVlXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuXG5mdW5jdGlvbiBPYnNlcnZlcih2YWx1ZSkge1xuICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gIHRoaXMuZGVwID0gbmV3IERlcCgpO1xuICBkZWYodmFsdWUsICdfX29iX18nLCB0aGlzKTtcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgdmFyIGF1Z21lbnQgPSBoYXNQcm90byA/IHByb3RvQXVnbWVudCA6IGNvcHlBdWdtZW50O1xuICAgIGF1Z21lbnQodmFsdWUsIGFycmF5TWV0aG9kcywgYXJyYXlLZXlzKTtcbiAgICB0aGlzLm9ic2VydmVBcnJheSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy53YWxrKHZhbHVlKTtcbiAgfVxufVxuXG4vLyBJbnN0YW5jZSBtZXRob2RzXG5cbi8qKlxuICogV2FsayB0aHJvdWdoIGVhY2ggcHJvcGVydHkgYW5kIGNvbnZlcnQgdGhlbSBpbnRvXG4gKiBnZXR0ZXIvc2V0dGVycy4gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIHdoZW5cbiAqIHZhbHVlIHR5cGUgaXMgT2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqL1xuXG5PYnNlcnZlci5wcm90b3R5cGUud2FsayA9IGZ1bmN0aW9uIChvYmopIHtcbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdGhpcy5jb252ZXJ0KGtleXNbaV0sIG9ialtrZXlzW2ldXSk7XG4gIH1cbn07XG5cbi8qKlxuICogT2JzZXJ2ZSBhIGxpc3Qgb2YgQXJyYXkgaXRlbXMuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gaXRlbXNcbiAqL1xuXG5PYnNlcnZlci5wcm90b3R5cGUub2JzZXJ2ZUFycmF5ID0gZnVuY3Rpb24gKGl0ZW1zKSB7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gaXRlbXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgb2JzZXJ2ZShpdGVtc1tpXSk7XG4gIH1cbn07XG5cbi8qKlxuICogQ29udmVydCBhIHByb3BlcnR5IGludG8gZ2V0dGVyL3NldHRlciBzbyB3ZSBjYW4gZW1pdFxuICogdGhlIGV2ZW50cyB3aGVuIHRoZSBwcm9wZXJ0eSBpcyBhY2Nlc3NlZC9jaGFuZ2VkLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLmNvbnZlcnQgPSBmdW5jdGlvbiAoa2V5LCB2YWwpIHtcbiAgZGVmaW5lUmVhY3RpdmUodGhpcy52YWx1ZSwga2V5LCB2YWwpO1xufTtcblxuLyoqXG4gKiBBZGQgYW4gb3duZXIgdm0sIHNvIHRoYXQgd2hlbiAkc2V0LyRkZWxldGUgbXV0YXRpb25zXG4gKiBoYXBwZW4gd2UgY2FuIG5vdGlmeSBvd25lciB2bXMgdG8gcHJveHkgdGhlIGtleXMgYW5kXG4gKiBkaWdlc3QgdGhlIHdhdGNoZXJzLiBUaGlzIGlzIG9ubHkgY2FsbGVkIHdoZW4gdGhlIG9iamVjdFxuICogaXMgb2JzZXJ2ZWQgYXMgYW4gaW5zdGFuY2UncyByb290ICRkYXRhLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICovXG5cbk9ic2VydmVyLnByb3RvdHlwZS5hZGRWbSA9IGZ1bmN0aW9uICh2bSkge1xuICAodGhpcy52bXMgfHwgKHRoaXMudm1zID0gW10pKS5wdXNoKHZtKTtcbn07XG5cbi8qKlxuICogUmVtb3ZlIGFuIG93bmVyIHZtLiBUaGlzIGlzIGNhbGxlZCB3aGVuIHRoZSBvYmplY3QgaXNcbiAqIHN3YXBwZWQgb3V0IGFzIGFuIGluc3RhbmNlJ3MgJGRhdGEgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICovXG5cbk9ic2VydmVyLnByb3RvdHlwZS5yZW1vdmVWbSA9IGZ1bmN0aW9uICh2bSkge1xuICB0aGlzLnZtcy4kcmVtb3ZlKHZtKTtcbn07XG5cbi8vIGhlbHBlcnNcblxuLyoqXG4gKiBBdWdtZW50IGFuIHRhcmdldCBPYmplY3Qgb3IgQXJyYXkgYnkgaW50ZXJjZXB0aW5nXG4gKiB0aGUgcHJvdG90eXBlIGNoYWluIHVzaW5nIF9fcHJvdG9fX1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSB0YXJnZXRcbiAqIEBwYXJhbSB7T2JqZWN0fSBzcmNcbiAqL1xuXG5mdW5jdGlvbiBwcm90b0F1Z21lbnQodGFyZ2V0LCBzcmMpIHtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cbiAgdGFyZ2V0Ll9fcHJvdG9fXyA9IHNyYztcbiAgLyogZXNsaW50LWVuYWJsZSBuby1wcm90byAqL1xufVxuXG4vKipcbiAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBkZWZpbmluZ1xuICogaGlkZGVuIHByb3BlcnRpZXMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHRhcmdldFxuICogQHBhcmFtIHtPYmplY3R9IHByb3RvXG4gKi9cblxuZnVuY3Rpb24gY29weUF1Z21lbnQodGFyZ2V0LCBzcmMsIGtleXMpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgIGRlZih0YXJnZXQsIGtleSwgc3JjW2tleV0pO1xuICB9XG59XG5cbi8qKlxuICogQXR0ZW1wdCB0byBjcmVhdGUgYW4gb2JzZXJ2ZXIgaW5zdGFuY2UgZm9yIGEgdmFsdWUsXG4gKiByZXR1cm5zIHRoZSBuZXcgb2JzZXJ2ZXIgaWYgc3VjY2Vzc2Z1bGx5IG9ic2VydmVkLFxuICogb3IgdGhlIGV4aXN0aW5nIG9ic2VydmVyIGlmIHRoZSB2YWx1ZSBhbHJlYWR5IGhhcyBvbmUuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtWdWV9IFt2bV1cbiAqIEByZXR1cm4ge09ic2VydmVyfHVuZGVmaW5lZH1cbiAqIEBzdGF0aWNcbiAqL1xuXG5mdW5jdGlvbiBvYnNlcnZlKHZhbHVlLCB2bSkge1xuICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG9iO1xuICBpZiAoaGFzT3duKHZhbHVlLCAnX19vYl9fJykgJiYgdmFsdWUuX19vYl9fIGluc3RhbmNlb2YgT2JzZXJ2ZXIpIHtcbiAgICBvYiA9IHZhbHVlLl9fb2JfXztcbiAgfSBlbHNlIGlmIChzaG91bGRDb252ZXJ0ICYmIChpc0FycmF5KHZhbHVlKSB8fCBpc1BsYWluT2JqZWN0KHZhbHVlKSkgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWx1ZSkgJiYgIXZhbHVlLl9pc1Z1ZSkge1xuICAgIG9iID0gbmV3IE9ic2VydmVyKHZhbHVlKTtcbiAgfVxuICBpZiAob2IgJiYgdm0pIHtcbiAgICBvYi5hZGRWbSh2bSk7XG4gIH1cbiAgcmV0dXJuIG9iO1xufVxuXG4vKipcbiAqIERlZmluZSBhIHJlYWN0aXZlIHByb3BlcnR5IG9uIGFuIE9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5cbmZ1bmN0aW9uIGRlZmluZVJlYWN0aXZlKG9iaiwga2V5LCB2YWwpIHtcbiAgdmFyIGRlcCA9IG5ldyBEZXAoKTtcblxuICB2YXIgcHJvcGVydHkgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KTtcbiAgaWYgKHByb3BlcnR5ICYmIHByb3BlcnR5LmNvbmZpZ3VyYWJsZSA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBjYXRlciBmb3IgcHJlLWRlZmluZWQgZ2V0dGVyL3NldHRlcnNcbiAgdmFyIGdldHRlciA9IHByb3BlcnR5ICYmIHByb3BlcnR5LmdldDtcbiAgdmFyIHNldHRlciA9IHByb3BlcnR5ICYmIHByb3BlcnR5LnNldDtcblxuICB2YXIgY2hpbGRPYiA9IG9ic2VydmUodmFsKTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiByZWFjdGl2ZUdldHRlcigpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7XG4gICAgICBpZiAoRGVwLnRhcmdldCkge1xuICAgICAgICBkZXAuZGVwZW5kKCk7XG4gICAgICAgIGlmIChjaGlsZE9iKSB7XG4gICAgICAgICAgY2hpbGRPYi5kZXAuZGVwZW5kKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgZm9yICh2YXIgZSwgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGUgPSB2YWx1ZVtpXTtcbiAgICAgICAgICAgIGUgJiYgZS5fX29iX18gJiYgZS5fX29iX18uZGVwLmRlcGVuZCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiByZWFjdGl2ZVNldHRlcihuZXdWYWwpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7XG4gICAgICBpZiAobmV3VmFsID09PSB2YWx1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoc2V0dGVyKSB7XG4gICAgICAgIHNldHRlci5jYWxsKG9iaiwgbmV3VmFsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbCA9IG5ld1ZhbDtcbiAgICAgIH1cbiAgICAgIGNoaWxkT2IgPSBvYnNlcnZlKG5ld1ZhbCk7XG4gICAgICBkZXAubm90aWZ5KCk7XG4gICAgfVxuICB9KTtcbn1cblxuXG5cbnZhciB1dGlsID0gT2JqZWN0LmZyZWV6ZSh7XG5cdGRlZmluZVJlYWN0aXZlOiBkZWZpbmVSZWFjdGl2ZSxcblx0c2V0OiBzZXQsXG5cdGRlbDogZGVsLFxuXHRoYXNPd246IGhhc093bixcblx0aXNMaXRlcmFsOiBpc0xpdGVyYWwsXG5cdGlzUmVzZXJ2ZWQ6IGlzUmVzZXJ2ZWQsXG5cdF90b1N0cmluZzogX3RvU3RyaW5nLFxuXHR0b051bWJlcjogdG9OdW1iZXIsXG5cdHRvQm9vbGVhbjogdG9Cb29sZWFuLFxuXHRzdHJpcFF1b3Rlczogc3RyaXBRdW90ZXMsXG5cdGNhbWVsaXplOiBjYW1lbGl6ZSxcblx0aHlwaGVuYXRlOiBoeXBoZW5hdGUsXG5cdGNsYXNzaWZ5OiBjbGFzc2lmeSxcblx0YmluZDogYmluZCxcblx0dG9BcnJheTogdG9BcnJheSxcblx0ZXh0ZW5kOiBleHRlbmQsXG5cdGlzT2JqZWN0OiBpc09iamVjdCxcblx0aXNQbGFpbk9iamVjdDogaXNQbGFpbk9iamVjdCxcblx0ZGVmOiBkZWYsXG5cdGRlYm91bmNlOiBfZGVib3VuY2UsXG5cdGluZGV4T2Y6IGluZGV4T2YsXG5cdGNhbmNlbGxhYmxlOiBjYW5jZWxsYWJsZSxcblx0bG9vc2VFcXVhbDogbG9vc2VFcXVhbCxcblx0aXNBcnJheTogaXNBcnJheSxcblx0aGFzUHJvdG86IGhhc1Byb3RvLFxuXHRpbkJyb3dzZXI6IGluQnJvd3Nlcixcblx0ZGV2dG9vbHM6IGRldnRvb2xzLFxuXHRpc0lFOiBpc0lFLFxuXHRpc0lFOTogaXNJRTksXG5cdGlzQW5kcm9pZDogaXNBbmRyb2lkLFxuXHRpc0lvczogaXNJb3MsXG5cdGlvc1ZlcnNpb25NYXRjaDogaW9zVmVyc2lvbk1hdGNoLFxuXHRpb3NWZXJzaW9uOiBpb3NWZXJzaW9uLFxuXHRoYXNNdXRhdGlvbk9ic2VydmVyQnVnOiBoYXNNdXRhdGlvbk9ic2VydmVyQnVnLFxuXHRnZXQgdHJhbnNpdGlvblByb3AgKCkgeyByZXR1cm4gdHJhbnNpdGlvblByb3A7IH0sXG5cdGdldCB0cmFuc2l0aW9uRW5kRXZlbnQgKCkgeyByZXR1cm4gdHJhbnNpdGlvbkVuZEV2ZW50OyB9LFxuXHRnZXQgYW5pbWF0aW9uUHJvcCAoKSB7IHJldHVybiBhbmltYXRpb25Qcm9wOyB9LFxuXHRnZXQgYW5pbWF0aW9uRW5kRXZlbnQgKCkgeyByZXR1cm4gYW5pbWF0aW9uRW5kRXZlbnQ7IH0sXG5cdG5leHRUaWNrOiBuZXh0VGljayxcblx0Z2V0IF9TZXQgKCkgeyByZXR1cm4gX1NldDsgfSxcblx0cXVlcnk6IHF1ZXJ5LFxuXHRpbkRvYzogaW5Eb2MsXG5cdGdldEF0dHI6IGdldEF0dHIsXG5cdGdldEJpbmRBdHRyOiBnZXRCaW5kQXR0cixcblx0aGFzQmluZEF0dHI6IGhhc0JpbmRBdHRyLFxuXHRiZWZvcmU6IGJlZm9yZSxcblx0YWZ0ZXI6IGFmdGVyLFxuXHRyZW1vdmU6IHJlbW92ZSxcblx0cHJlcGVuZDogcHJlcGVuZCxcblx0cmVwbGFjZTogcmVwbGFjZSxcblx0b246IG9uLFxuXHRvZmY6IG9mZixcblx0c2V0Q2xhc3M6IHNldENsYXNzLFxuXHRhZGRDbGFzczogYWRkQ2xhc3MsXG5cdHJlbW92ZUNsYXNzOiByZW1vdmVDbGFzcyxcblx0ZXh0cmFjdENvbnRlbnQ6IGV4dHJhY3RDb250ZW50LFxuXHR0cmltTm9kZTogdHJpbU5vZGUsXG5cdGlzVGVtcGxhdGU6IGlzVGVtcGxhdGUsXG5cdGNyZWF0ZUFuY2hvcjogY3JlYXRlQW5jaG9yLFxuXHRmaW5kUmVmOiBmaW5kUmVmLFxuXHRtYXBOb2RlUmFuZ2U6IG1hcE5vZGVSYW5nZSxcblx0cmVtb3ZlTm9kZVJhbmdlOiByZW1vdmVOb2RlUmFuZ2UsXG5cdGlzRnJhZ21lbnQ6IGlzRnJhZ21lbnQsXG5cdGdldE91dGVySFRNTDogZ2V0T3V0ZXJIVE1MLFxuXHRtZXJnZU9wdGlvbnM6IG1lcmdlT3B0aW9ucyxcblx0cmVzb2x2ZUFzc2V0OiByZXNvbHZlQXNzZXQsXG5cdGNoZWNrQ29tcG9uZW50QXR0cjogY2hlY2tDb21wb25lbnRBdHRyLFxuXHRjb21tb25UYWdSRTogY29tbW9uVGFnUkUsXG5cdHJlc2VydmVkVGFnUkU6IHJlc2VydmVkVGFnUkUsXG5cdGdldCB3YXJuICgpIHsgcmV0dXJuIHdhcm47IH1cbn0pO1xuXG52YXIgdWlkID0gMDtcblxuZnVuY3Rpb24gaW5pdE1peGluIChWdWUpIHtcbiAgLyoqXG4gICAqIFRoZSBtYWluIGluaXQgc2VxdWVuY2UuIFRoaXMgaXMgY2FsbGVkIGZvciBldmVyeVxuICAgKiBpbnN0YW5jZSwgaW5jbHVkaW5nIG9uZXMgdGhhdCBhcmUgY3JlYXRlZCBmcm9tIGV4dGVuZGVkXG4gICAqIGNvbnN0cnVjdG9ycy5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSB0aGlzIG9wdGlvbnMgb2JqZWN0IHNob3VsZCBiZVxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSByZXN1bHQgb2YgbWVyZ2luZyBjbGFzc1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgYW5kIHRoZSBvcHRpb25zIHBhc3NlZFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIHRvIHRoZSBjb25zdHJ1Y3Rvci5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICB0aGlzLiRlbCA9IG51bGw7XG4gICAgdGhpcy4kcGFyZW50ID0gb3B0aW9ucy5wYXJlbnQ7XG4gICAgdGhpcy4kcm9vdCA9IHRoaXMuJHBhcmVudCA/IHRoaXMuJHBhcmVudC4kcm9vdCA6IHRoaXM7XG4gICAgdGhpcy4kY2hpbGRyZW4gPSBbXTtcbiAgICB0aGlzLiRyZWZzID0ge307IC8vIGNoaWxkIHZtIHJlZmVyZW5jZXNcbiAgICB0aGlzLiRlbHMgPSB7fTsgLy8gZWxlbWVudCByZWZlcmVuY2VzXG4gICAgdGhpcy5fd2F0Y2hlcnMgPSBbXTsgLy8gYWxsIHdhdGNoZXJzIGFzIGFuIGFycmF5XG4gICAgdGhpcy5fZGlyZWN0aXZlcyA9IFtdOyAvLyBhbGwgZGlyZWN0aXZlc1xuXG4gICAgLy8gYSB1aWRcbiAgICB0aGlzLl91aWQgPSB1aWQrKztcblxuICAgIC8vIGEgZmxhZyB0byBhdm9pZCB0aGlzIGJlaW5nIG9ic2VydmVkXG4gICAgdGhpcy5faXNWdWUgPSB0cnVlO1xuXG4gICAgLy8gZXZlbnRzIGJvb2trZWVwaW5nXG4gICAgdGhpcy5fZXZlbnRzID0ge307IC8vIHJlZ2lzdGVyZWQgY2FsbGJhY2tzXG4gICAgdGhpcy5fZXZlbnRzQ291bnQgPSB7fTsgLy8gZm9yICRicm9hZGNhc3Qgb3B0aW1pemF0aW9uXG5cbiAgICAvLyBmcmFnbWVudCBpbnN0YW5jZSBwcm9wZXJ0aWVzXG4gICAgdGhpcy5faXNGcmFnbWVudCA9IGZhbHNlO1xuICAgIHRoaXMuX2ZyYWdtZW50ID0gLy8gQHR5cGUge0RvY3VtZW50RnJhZ21lbnR9XG4gICAgdGhpcy5fZnJhZ21lbnRTdGFydCA9IC8vIEB0eXBlIHtUZXh0fENvbW1lbnR9XG4gICAgdGhpcy5fZnJhZ21lbnRFbmQgPSBudWxsOyAvLyBAdHlwZSB7VGV4dHxDb21tZW50fVxuXG4gICAgLy8gbGlmZWN5Y2xlIHN0YXRlXG4gICAgdGhpcy5faXNDb21waWxlZCA9IHRoaXMuX2lzRGVzdHJveWVkID0gdGhpcy5faXNSZWFkeSA9IHRoaXMuX2lzQXR0YWNoZWQgPSB0aGlzLl9pc0JlaW5nRGVzdHJveWVkID0gdGhpcy5fdkZvclJlbW92aW5nID0gZmFsc2U7XG4gICAgdGhpcy5fdW5saW5rRm4gPSBudWxsO1xuXG4gICAgLy8gY29udGV4dDpcbiAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBjb250ZXh0XG4gICAgLy8gd2lsbCBiZSB0aGUgY29tbW9uIHBhcmVudCB2bSBvZiB0aGlzIGluc3RhbmNlXG4gICAgLy8gYW5kIGl0cyBob3N0LlxuICAgIHRoaXMuX2NvbnRleHQgPSBvcHRpb25zLl9jb250ZXh0IHx8IHRoaXMuJHBhcmVudDtcblxuICAgIC8vIHNjb3BlOlxuICAgIC8vIGlmIHRoaXMgaXMgaW5zaWRlIGFuIGlubGluZSB2LWZvciwgdGhlIHNjb3BlXG4gICAgLy8gd2lsbCBiZSB0aGUgaW50ZXJtZWRpYXRlIHNjb3BlIGNyZWF0ZWQgZm9yIHRoaXNcbiAgICAvLyByZXBlYXQgZnJhZ21lbnQuIHRoaXMgaXMgdXNlZCBmb3IgbGlua2luZyBwcm9wc1xuICAgIC8vIGFuZCBjb250YWluZXIgZGlyZWN0aXZlcy5cbiAgICB0aGlzLl9zY29wZSA9IG9wdGlvbnMuX3Njb3BlO1xuXG4gICAgLy8gZnJhZ21lbnQ6XG4gICAgLy8gaWYgdGhpcyBpbnN0YW5jZSBpcyBjb21waWxlZCBpbnNpZGUgYSBGcmFnbWVudCwgaXRcbiAgICAvLyBuZWVkcyB0byByZWlnc3RlciBpdHNlbGYgYXMgYSBjaGlsZCBvZiB0aGF0IGZyYWdtZW50XG4gICAgLy8gZm9yIGF0dGFjaC9kZXRhY2ggdG8gd29yayBwcm9wZXJseS5cbiAgICB0aGlzLl9mcmFnID0gb3B0aW9ucy5fZnJhZztcbiAgICBpZiAodGhpcy5fZnJhZykge1xuICAgICAgdGhpcy5fZnJhZy5jaGlsZHJlbi5wdXNoKHRoaXMpO1xuICAgIH1cblxuICAgIC8vIHB1c2ggc2VsZiBpbnRvIHBhcmVudCAvIHRyYW5zY2x1c2lvbiBob3N0XG4gICAgaWYgKHRoaXMuJHBhcmVudCkge1xuICAgICAgdGhpcy4kcGFyZW50LiRjaGlsZHJlbi5wdXNoKHRoaXMpO1xuICAgIH1cblxuICAgIC8vIG1lcmdlIG9wdGlvbnMuXG4gICAgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnMgPSBtZXJnZU9wdGlvbnModGhpcy5jb25zdHJ1Y3Rvci5vcHRpb25zLCBvcHRpb25zLCB0aGlzKTtcblxuICAgIC8vIHNldCByZWZcbiAgICB0aGlzLl91cGRhdGVSZWYoKTtcblxuICAgIC8vIGluaXRpYWxpemUgZGF0YSBhcyBlbXB0eSBvYmplY3QuXG4gICAgLy8gaXQgd2lsbCBiZSBmaWxsZWQgdXAgaW4gX2luaXREYXRhKCkuXG4gICAgdGhpcy5fZGF0YSA9IHt9O1xuXG4gICAgLy8gY2FsbCBpbml0IGhvb2tcbiAgICB0aGlzLl9jYWxsSG9vaygnaW5pdCcpO1xuXG4gICAgLy8gaW5pdGlhbGl6ZSBkYXRhIG9ic2VydmF0aW9uIGFuZCBzY29wZSBpbmhlcml0YW5jZS5cbiAgICB0aGlzLl9pbml0U3RhdGUoKTtcblxuICAgIC8vIHNldHVwIGV2ZW50IHN5c3RlbSBhbmQgb3B0aW9uIGV2ZW50cy5cbiAgICB0aGlzLl9pbml0RXZlbnRzKCk7XG5cbiAgICAvLyBjYWxsIGNyZWF0ZWQgaG9va1xuICAgIHRoaXMuX2NhbGxIb29rKCdjcmVhdGVkJyk7XG5cbiAgICAvLyBpZiBgZWxgIG9wdGlvbiBpcyBwYXNzZWQsIHN0YXJ0IGNvbXBpbGF0aW9uLlxuICAgIGlmIChvcHRpb25zLmVsKSB7XG4gICAgICB0aGlzLiRtb3VudChvcHRpb25zLmVsKTtcbiAgICB9XG4gIH07XG59XG5cbnZhciBwYXRoQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cbi8vIGFjdGlvbnNcbnZhciBBUFBFTkQgPSAwO1xudmFyIFBVU0ggPSAxO1xudmFyIElOQ19TVUJfUEFUSF9ERVBUSCA9IDI7XG52YXIgUFVTSF9TVUJfUEFUSCA9IDM7XG5cbi8vIHN0YXRlc1xudmFyIEJFRk9SRV9QQVRIID0gMDtcbnZhciBJTl9QQVRIID0gMTtcbnZhciBCRUZPUkVfSURFTlQgPSAyO1xudmFyIElOX0lERU5UID0gMztcbnZhciBJTl9TVUJfUEFUSCA9IDQ7XG52YXIgSU5fU0lOR0xFX1FVT1RFID0gNTtcbnZhciBJTl9ET1VCTEVfUVVPVEUgPSA2O1xudmFyIEFGVEVSX1BBVEggPSA3O1xudmFyIEVSUk9SID0gODtcblxudmFyIHBhdGhTdGF0ZU1hY2hpbmUgPSBbXTtcblxucGF0aFN0YXRlTWFjaGluZVtCRUZPUkVfUEFUSF0gPSB7XG4gICd3cyc6IFtCRUZPUkVfUEFUSF0sXG4gICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcbiAgJ1snOiBbSU5fU1VCX1BBVEhdLFxuICAnZW9mJzogW0FGVEVSX1BBVEhdXG59O1xuXG5wYXRoU3RhdGVNYWNoaW5lW0lOX1BBVEhdID0ge1xuICAnd3MnOiBbSU5fUEFUSF0sXG4gICcuJzogW0JFRk9SRV9JREVOVF0sXG4gICdbJzogW0lOX1NVQl9QQVRIXSxcbiAgJ2VvZic6IFtBRlRFUl9QQVRIXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtCRUZPUkVfSURFTlRdID0ge1xuICAnd3MnOiBbQkVGT1JFX0lERU5UXSxcbiAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdXG59O1xuXG5wYXRoU3RhdGVNYWNoaW5lW0lOX0lERU5UXSA9IHtcbiAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnMCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcbiAgJ251bWJlcic6IFtJTl9JREVOVCwgQVBQRU5EXSxcbiAgJ3dzJzogW0lOX1BBVEgsIFBVU0hdLFxuICAnLic6IFtCRUZPUkVfSURFTlQsIFBVU0hdLFxuICAnWyc6IFtJTl9TVUJfUEFUSCwgUFVTSF0sXG4gICdlb2YnOiBbQUZURVJfUEFUSCwgUFVTSF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fU1VCX1BBVEhdID0ge1xuICBcIidcIjogW0lOX1NJTkdMRV9RVU9URSwgQVBQRU5EXSxcbiAgJ1wiJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5EXSxcbiAgJ1snOiBbSU5fU1VCX1BBVEgsIElOQ19TVUJfUEFUSF9ERVBUSF0sXG4gICddJzogW0lOX1BBVEgsIFBVU0hfU1VCX1BBVEhdLFxuICAnZW9mJzogRVJST1IsXG4gICdlbHNlJzogW0lOX1NVQl9QQVRILCBBUFBFTkRdXG59O1xuXG5wYXRoU3RhdGVNYWNoaW5lW0lOX1NJTkdMRV9RVU9URV0gPSB7XG4gIFwiJ1wiOiBbSU5fU1VCX1BBVEgsIEFQUEVORF0sXG4gICdlb2YnOiBFUlJPUixcbiAgJ2Vsc2UnOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkRdXG59O1xuXG5wYXRoU3RhdGVNYWNoaW5lW0lOX0RPVUJMRV9RVU9URV0gPSB7XG4gICdcIic6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXSxcbiAgJ2VvZic6IEVSUk9SLFxuICAnZWxzZSc6IFtJTl9ET1VCTEVfUVVPVEUsIEFQUEVORF1cbn07XG5cbi8qKlxuICogRGV0ZXJtaW5lIHRoZSB0eXBlIG9mIGEgY2hhcmFjdGVyIGluIGEga2V5cGF0aC5cbiAqXG4gKiBAcGFyYW0ge0NoYXJ9IGNoXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHR5cGVcbiAqL1xuXG5mdW5jdGlvbiBnZXRQYXRoQ2hhclR5cGUoY2gpIHtcbiAgaWYgKGNoID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gJ2VvZic7XG4gIH1cblxuICB2YXIgY29kZSA9IGNoLmNoYXJDb2RlQXQoMCk7XG5cbiAgc3dpdGNoIChjb2RlKSB7XG4gICAgY2FzZSAweDVCOiAvLyBbXG4gICAgY2FzZSAweDVEOiAvLyBdXG4gICAgY2FzZSAweDJFOiAvLyAuXG4gICAgY2FzZSAweDIyOiAvLyBcIlxuICAgIGNhc2UgMHgyNzogLy8gJ1xuICAgIGNhc2UgMHgzMDpcbiAgICAgIC8vIDBcbiAgICAgIHJldHVybiBjaDtcblxuICAgIGNhc2UgMHg1RjogLy8gX1xuICAgIGNhc2UgMHgyNDpcbiAgICAgIC8vICRcbiAgICAgIHJldHVybiAnaWRlbnQnO1xuXG4gICAgY2FzZSAweDIwOiAvLyBTcGFjZVxuICAgIGNhc2UgMHgwOTogLy8gVGFiXG4gICAgY2FzZSAweDBBOiAvLyBOZXdsaW5lXG4gICAgY2FzZSAweDBEOiAvLyBSZXR1cm5cbiAgICBjYXNlIDB4QTA6IC8vIE5vLWJyZWFrIHNwYWNlXG4gICAgY2FzZSAweEZFRkY6IC8vIEJ5dGUgT3JkZXIgTWFya1xuICAgIGNhc2UgMHgyMDI4OiAvLyBMaW5lIFNlcGFyYXRvclxuICAgIGNhc2UgMHgyMDI5OlxuICAgICAgLy8gUGFyYWdyYXBoIFNlcGFyYXRvclxuICAgICAgcmV0dXJuICd3cyc7XG4gIH1cblxuICAvLyBhLXosIEEtWlxuICBpZiAoY29kZSA+PSAweDYxICYmIGNvZGUgPD0gMHg3QSB8fCBjb2RlID49IDB4NDEgJiYgY29kZSA8PSAweDVBKSB7XG4gICAgcmV0dXJuICdpZGVudCc7XG4gIH1cblxuICAvLyAxLTlcbiAgaWYgKGNvZGUgPj0gMHgzMSAmJiBjb2RlIDw9IDB4MzkpIHtcbiAgICByZXR1cm4gJ251bWJlcic7XG4gIH1cblxuICByZXR1cm4gJ2Vsc2UnO1xufVxuXG4vKipcbiAqIEZvcm1hdCBhIHN1YlBhdGgsIHJldHVybiBpdHMgcGxhaW4gZm9ybSBpZiBpdCBpc1xuICogYSBsaXRlcmFsIHN0cmluZyBvciBudW1iZXIuIE90aGVyd2lzZSBwcmVwZW5kIHRoZVxuICogZHluYW1pYyBpbmRpY2F0b3IgKCopLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0U3ViUGF0aChwYXRoKSB7XG4gIHZhciB0cmltbWVkID0gcGF0aC50cmltKCk7XG4gIC8vIGludmFsaWQgbGVhZGluZyAwXG4gIGlmIChwYXRoLmNoYXJBdCgwKSA9PT0gJzAnICYmIGlzTmFOKHBhdGgpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBpc0xpdGVyYWwodHJpbW1lZCkgPyBzdHJpcFF1b3Rlcyh0cmltbWVkKSA6ICcqJyArIHRyaW1tZWQ7XG59XG5cbi8qKlxuICogUGFyc2UgYSBzdHJpbmcgcGF0aCBpbnRvIGFuIGFycmF5IG9mIHNlZ21lbnRzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEByZXR1cm4ge0FycmF5fHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZShwYXRoKSB7XG4gIHZhciBrZXlzID0gW107XG4gIHZhciBpbmRleCA9IC0xO1xuICB2YXIgbW9kZSA9IEJFRk9SRV9QQVRIO1xuICB2YXIgc3ViUGF0aERlcHRoID0gMDtcbiAgdmFyIGMsIG5ld0NoYXIsIGtleSwgdHlwZSwgdHJhbnNpdGlvbiwgYWN0aW9uLCB0eXBlTWFwO1xuXG4gIHZhciBhY3Rpb25zID0gW107XG5cbiAgYWN0aW9uc1tQVVNIXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoa2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAga2V5ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfTtcblxuICBhY3Rpb25zW0FQUEVORF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBrZXkgPSBuZXdDaGFyO1xuICAgIH0gZWxzZSB7XG4gICAgICBrZXkgKz0gbmV3Q2hhcjtcbiAgICB9XG4gIH07XG5cbiAgYWN0aW9uc1tJTkNfU1VCX1BBVEhfREVQVEhdID0gZnVuY3Rpb24gKCkge1xuICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xuICAgIHN1YlBhdGhEZXB0aCsrO1xuICB9O1xuXG4gIGFjdGlvbnNbUFVTSF9TVUJfUEFUSF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHN1YlBhdGhEZXB0aCA+IDApIHtcbiAgICAgIHN1YlBhdGhEZXB0aC0tO1xuICAgICAgbW9kZSA9IElOX1NVQl9QQVRIO1xuICAgICAgYWN0aW9uc1tBUFBFTkRdKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1YlBhdGhEZXB0aCA9IDA7XG4gICAgICBrZXkgPSBmb3JtYXRTdWJQYXRoKGtleSk7XG4gICAgICBpZiAoa2V5ID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3Rpb25zW1BVU0hdKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIG1heWJlVW5lc2NhcGVRdW90ZSgpIHtcbiAgICB2YXIgbmV4dENoYXIgPSBwYXRoW2luZGV4ICsgMV07XG4gICAgaWYgKG1vZGUgPT09IElOX1NJTkdMRV9RVU9URSAmJiBuZXh0Q2hhciA9PT0gXCInXCIgfHwgbW9kZSA9PT0gSU5fRE9VQkxFX1FVT1RFICYmIG5leHRDaGFyID09PSAnXCInKSB7XG4gICAgICBpbmRleCsrO1xuICAgICAgbmV3Q2hhciA9ICdcXFxcJyArIG5leHRDaGFyO1xuICAgICAgYWN0aW9uc1tBUFBFTkRdKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICB3aGlsZSAobW9kZSAhPSBudWxsKSB7XG4gICAgaW5kZXgrKztcbiAgICBjID0gcGF0aFtpbmRleF07XG5cbiAgICBpZiAoYyA9PT0gJ1xcXFwnICYmIG1heWJlVW5lc2NhcGVRdW90ZSgpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICB0eXBlID0gZ2V0UGF0aENoYXJUeXBlKGMpO1xuICAgIHR5cGVNYXAgPSBwYXRoU3RhdGVNYWNoaW5lW21vZGVdO1xuICAgIHRyYW5zaXRpb24gPSB0eXBlTWFwW3R5cGVdIHx8IHR5cGVNYXBbJ2Vsc2UnXSB8fCBFUlJPUjtcblxuICAgIGlmICh0cmFuc2l0aW9uID09PSBFUlJPUikge1xuICAgICAgcmV0dXJuOyAvLyBwYXJzZSBlcnJvclxuICAgIH1cblxuICAgIG1vZGUgPSB0cmFuc2l0aW9uWzBdO1xuICAgIGFjdGlvbiA9IGFjdGlvbnNbdHJhbnNpdGlvblsxXV07XG4gICAgaWYgKGFjdGlvbikge1xuICAgICAgbmV3Q2hhciA9IHRyYW5zaXRpb25bMl07XG4gICAgICBuZXdDaGFyID0gbmV3Q2hhciA9PT0gdW5kZWZpbmVkID8gYyA6IG5ld0NoYXI7XG4gICAgICBpZiAoYWN0aW9uKCkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobW9kZSA9PT0gQUZURVJfUEFUSCkge1xuICAgICAga2V5cy5yYXcgPSBwYXRoO1xuICAgICAgcmV0dXJuIGtleXM7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRXh0ZXJuYWwgcGFyc2UgdGhhdCBjaGVjayBmb3IgYSBjYWNoZSBoaXQgZmlyc3RcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICogQHJldHVybiB7QXJyYXl8dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlUGF0aChwYXRoKSB7XG4gIHZhciBoaXQgPSBwYXRoQ2FjaGUuZ2V0KHBhdGgpO1xuICBpZiAoIWhpdCkge1xuICAgIGhpdCA9IHBhcnNlKHBhdGgpO1xuICAgIGlmIChoaXQpIHtcbiAgICAgIHBhdGhDYWNoZS5wdXQocGF0aCwgaGl0KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGhpdDtcbn1cblxuLyoqXG4gKiBHZXQgZnJvbSBhbiBvYmplY3QgZnJvbSBhIHBhdGggc3RyaW5nXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqL1xuXG5mdW5jdGlvbiBnZXRQYXRoKG9iaiwgcGF0aCkge1xuICByZXR1cm4gcGFyc2VFeHByZXNzaW9uKHBhdGgpLmdldChvYmopO1xufVxuXG4vKipcbiAqIFdhcm4gYWdhaW5zdCBzZXR0aW5nIG5vbi1leGlzdGVudCByb290IHBhdGggb24gYSB2bS5cbiAqL1xuXG52YXIgd2Fybk5vbkV4aXN0ZW50O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgd2Fybk5vbkV4aXN0ZW50ID0gZnVuY3Rpb24gKHBhdGgsIHZtKSB7XG4gICAgd2FybignWW91IGFyZSBzZXR0aW5nIGEgbm9uLWV4aXN0ZW50IHBhdGggXCInICsgcGF0aC5yYXcgKyAnXCIgJyArICdvbiBhIHZtIGluc3RhbmNlLiBDb25zaWRlciBwcmUtaW5pdGlhbGl6aW5nIHRoZSBwcm9wZXJ0eSAnICsgJ3dpdGggdGhlIFwiZGF0YVwiIG9wdGlvbiBmb3IgbW9yZSByZWxpYWJsZSByZWFjdGl2aXR5ICcgKyAnYW5kIGJldHRlciBwZXJmb3JtYW5jZS4nLCB2bSk7XG4gIH07XG59XG5cbi8qKlxuICogU2V0IG9uIGFuIG9iamVjdCBmcm9tIGEgcGF0aFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nIHwgQXJyYXl9IHBhdGhcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuZnVuY3Rpb24gc2V0UGF0aChvYmosIHBhdGgsIHZhbCkge1xuICB2YXIgb3JpZ2luYWwgPSBvYmo7XG4gIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcbiAgICBwYXRoID0gcGFyc2UocGF0aCk7XG4gIH1cbiAgaWYgKCFwYXRoIHx8ICFpc09iamVjdChvYmopKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBsYXN0LCBrZXk7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gcGF0aC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBsYXN0ID0gb2JqO1xuICAgIGtleSA9IHBhdGhbaV07XG4gICAgaWYgKGtleS5jaGFyQXQoMCkgPT09ICcqJykge1xuICAgICAga2V5ID0gcGFyc2VFeHByZXNzaW9uKGtleS5zbGljZSgxKSkuZ2V0LmNhbGwob3JpZ2luYWwsIG9yaWdpbmFsKTtcbiAgICB9XG4gICAgaWYgKGkgPCBsIC0gMSkge1xuICAgICAgb2JqID0gb2JqW2tleV07XG4gICAgICBpZiAoIWlzT2JqZWN0KG9iaikpIHtcbiAgICAgICAgb2JqID0ge307XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGxhc3QuX2lzVnVlKSB7XG4gICAgICAgICAgd2Fybk5vbkV4aXN0ZW50KHBhdGgsIGxhc3QpO1xuICAgICAgICB9XG4gICAgICAgIHNldChsYXN0LCBrZXksIG9iaik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpc0FycmF5KG9iaikpIHtcbiAgICAgICAgb2JqLiRzZXQoa2V5LCB2YWwpO1xuICAgICAgfSBlbHNlIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgICAgIG9ialtrZXldID0gdmFsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgb2JqLl9pc1Z1ZSkge1xuICAgICAgICAgIHdhcm5Ob25FeGlzdGVudChwYXRoLCBvYmopO1xuICAgICAgICB9XG4gICAgICAgIHNldChvYmosIGtleSwgdmFsKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbnZhciBwYXRoID0gT2JqZWN0LmZyZWV6ZSh7XG4gIHBhcnNlUGF0aDogcGFyc2VQYXRoLFxuICBnZXRQYXRoOiBnZXRQYXRoLFxuICBzZXRQYXRoOiBzZXRQYXRoXG59KTtcblxudmFyIGV4cHJlc3Npb25DYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblxudmFyIGFsbG93ZWRLZXl3b3JkcyA9ICdNYXRoLERhdGUsdGhpcyx0cnVlLGZhbHNlLG51bGwsdW5kZWZpbmVkLEluZmluaXR5LE5hTiwnICsgJ2lzTmFOLGlzRmluaXRlLGRlY29kZVVSSSxkZWNvZGVVUklDb21wb25lbnQsZW5jb2RlVVJJLCcgKyAnZW5jb2RlVVJJQ29tcG9uZW50LHBhcnNlSW50LHBhcnNlRmxvYXQnO1xudmFyIGFsbG93ZWRLZXl3b3Jkc1JFID0gbmV3IFJlZ0V4cCgnXignICsgYWxsb3dlZEtleXdvcmRzLnJlcGxhY2UoLywvZywgJ1xcXFxifCcpICsgJ1xcXFxiKScpO1xuXG4vLyBrZXl3b3JkcyB0aGF0IGRvbid0IG1ha2Ugc2Vuc2UgaW5zaWRlIGV4cHJlc3Npb25zXG52YXIgaW1wcm9wZXJLZXl3b3JkcyA9ICdicmVhayxjYXNlLGNsYXNzLGNhdGNoLGNvbnN0LGNvbnRpbnVlLGRlYnVnZ2VyLGRlZmF1bHQsJyArICdkZWxldGUsZG8sZWxzZSxleHBvcnQsZXh0ZW5kcyxmaW5hbGx5LGZvcixmdW5jdGlvbixpZiwnICsgJ2ltcG9ydCxpbixpbnN0YW5jZW9mLGxldCxyZXR1cm4sc3VwZXIsc3dpdGNoLHRocm93LHRyeSwnICsgJ3Zhcix3aGlsZSx3aXRoLHlpZWxkLGVudW0sYXdhaXQsaW1wbGVtZW50cyxwYWNrYWdlLCcgKyAncHJvdGVjdGVkLHN0YXRpYyxpbnRlcmZhY2UscHJpdmF0ZSxwdWJsaWMnO1xudmFyIGltcHJvcGVyS2V5d29yZHNSRSA9IG5ldyBSZWdFeHAoJ14oJyArIGltcHJvcGVyS2V5d29yZHMucmVwbGFjZSgvLC9nLCAnXFxcXGJ8JykgKyAnXFxcXGIpJyk7XG5cbnZhciB3c1JFID0gL1xccy9nO1xudmFyIG5ld2xpbmVSRSA9IC9cXG4vZztcbnZhciBzYXZlUkUgPSAvW1xceyxdXFxzKltcXHdcXCRfXStcXHMqOnwoJyg/OlteJ1xcXFxdfFxcXFwuKSonfFwiKD86W15cIlxcXFxdfFxcXFwuKSpcInxgKD86W15gXFxcXF18XFxcXC4pKlxcJFxce3xcXH0oPzpbXmBcXFxcXXxcXFxcLikqYHxgKD86W15gXFxcXF18XFxcXC4pKmApfG5ldyB8dHlwZW9mIHx2b2lkIC9nO1xudmFyIHJlc3RvcmVSRSA9IC9cIihcXGQrKVwiL2c7XG52YXIgcGF0aFRlc3RSRSA9IC9eW0EtWmEtel8kXVtcXHckXSooPzpcXC5bQS1aYS16XyRdW1xcdyRdKnxcXFsnLio/J1xcXXxcXFtcIi4qP1wiXFxdfFxcW1xcZCtcXF18XFxbW0EtWmEtel8kXVtcXHckXSpcXF0pKiQvO1xudmFyIGlkZW50UkUgPSAvW15cXHckXFwuXSg/OltBLVphLXpfJF1bXFx3JF0qKS9nO1xudmFyIGxpdGVyYWxWYWx1ZVJFJDEgPSAvXig/OnRydWV8ZmFsc2V8bnVsbHx1bmRlZmluZWR8SW5maW5pdHl8TmFOKSQvO1xuXG5mdW5jdGlvbiBub29wKCkge31cblxuLyoqXG4gKiBTYXZlIC8gUmV3cml0ZSAvIFJlc3RvcmVcbiAqXG4gKiBXaGVuIHJld3JpdGluZyBwYXRocyBmb3VuZCBpbiBhbiBleHByZXNzaW9uLCBpdCBpc1xuICogcG9zc2libGUgZm9yIHRoZSBzYW1lIGxldHRlciBzZXF1ZW5jZXMgdG8gYmUgZm91bmQgaW5cbiAqIHN0cmluZ3MgYW5kIE9iamVjdCBsaXRlcmFsIHByb3BlcnR5IGtleXMuIFRoZXJlZm9yZSB3ZVxuICogcmVtb3ZlIGFuZCBzdG9yZSB0aGVzZSBwYXJ0cyBpbiBhIHRlbXBvcmFyeSBhcnJheSwgYW5kXG4gKiByZXN0b3JlIHRoZW0gYWZ0ZXIgdGhlIHBhdGggcmV3cml0ZS5cbiAqL1xuXG52YXIgc2F2ZWQgPSBbXTtcblxuLyoqXG4gKiBTYXZlIHJlcGxhY2VyXG4gKlxuICogVGhlIHNhdmUgcmVnZXggY2FuIG1hdGNoIHR3byBwb3NzaWJsZSBjYXNlczpcbiAqIDEuIEFuIG9wZW5pbmcgb2JqZWN0IGxpdGVyYWxcbiAqIDIuIEEgc3RyaW5nXG4gKiBJZiBtYXRjaGVkIGFzIGEgcGxhaW4gc3RyaW5nLCB3ZSBuZWVkIHRvIGVzY2FwZSBpdHNcbiAqIG5ld2xpbmVzLCBzaW5jZSB0aGUgc3RyaW5nIG5lZWRzIHRvIGJlIHByZXNlcnZlZCB3aGVuXG4gKiBnZW5lcmF0aW5nIHRoZSBmdW5jdGlvbiBib2R5LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBpc1N0cmluZyAtIHN0ciBpZiBtYXRjaGVkIGFzIGEgc3RyaW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd9IC0gcGxhY2Vob2xkZXIgd2l0aCBpbmRleFxuICovXG5cbmZ1bmN0aW9uIHNhdmUoc3RyLCBpc1N0cmluZykge1xuICB2YXIgaSA9IHNhdmVkLmxlbmd0aDtcbiAgc2F2ZWRbaV0gPSBpc1N0cmluZyA/IHN0ci5yZXBsYWNlKG5ld2xpbmVSRSwgJ1xcXFxuJykgOiBzdHI7XG4gIHJldHVybiAnXCInICsgaSArICdcIic7XG59XG5cbi8qKlxuICogUGF0aCByZXdyaXRlIHJlcGxhY2VyXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHJhd1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHJld3JpdGUocmF3KSB7XG4gIHZhciBjID0gcmF3LmNoYXJBdCgwKTtcbiAgdmFyIHBhdGggPSByYXcuc2xpY2UoMSk7XG4gIGlmIChhbGxvd2VkS2V5d29yZHNSRS50ZXN0KHBhdGgpKSB7XG4gICAgcmV0dXJuIHJhdztcbiAgfSBlbHNlIHtcbiAgICBwYXRoID0gcGF0aC5pbmRleE9mKCdcIicpID4gLTEgPyBwYXRoLnJlcGxhY2UocmVzdG9yZVJFLCByZXN0b3JlKSA6IHBhdGg7XG4gICAgcmV0dXJuIGMgKyAnc2NvcGUuJyArIHBhdGg7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXN0b3JlIHJlcGxhY2VyXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtTdHJpbmd9IGkgLSBtYXRjaGVkIHNhdmUgaW5kZXhcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiByZXN0b3JlKHN0ciwgaSkge1xuICByZXR1cm4gc2F2ZWRbaV07XG59XG5cbi8qKlxuICogUmV3cml0ZSBhbiBleHByZXNzaW9uLCBwcmVmaXhpbmcgYWxsIHBhdGggYWNjZXNzb3JzIHdpdGhcbiAqIGBzY29wZS5gIGFuZCBnZW5lcmF0ZSBnZXR0ZXIvc2V0dGVyIGZ1bmN0aW9ucy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlR2V0dGVyKGV4cCkge1xuICBpZiAoaW1wcm9wZXJLZXl3b3Jkc1JFLnRlc3QoZXhwKSkge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQXZvaWQgdXNpbmcgcmVzZXJ2ZWQga2V5d29yZHMgaW4gZXhwcmVzc2lvbjogJyArIGV4cCk7XG4gIH1cbiAgLy8gcmVzZXQgc3RhdGVcbiAgc2F2ZWQubGVuZ3RoID0gMDtcbiAgLy8gc2F2ZSBzdHJpbmdzIGFuZCBvYmplY3QgbGl0ZXJhbCBrZXlzXG4gIHZhciBib2R5ID0gZXhwLnJlcGxhY2Uoc2F2ZVJFLCBzYXZlKS5yZXBsYWNlKHdzUkUsICcnKTtcbiAgLy8gcmV3cml0ZSBhbGwgcGF0aHNcbiAgLy8gcGFkIDEgc3BhY2UgaGVyZSBiZWNhdXNlIHRoZSByZWdleCBtYXRjaGVzIDEgZXh0cmEgY2hhclxuICBib2R5ID0gKCcgJyArIGJvZHkpLnJlcGxhY2UoaWRlbnRSRSwgcmV3cml0ZSkucmVwbGFjZShyZXN0b3JlUkUsIHJlc3RvcmUpO1xuICByZXR1cm4gbWFrZUdldHRlckZuKGJvZHkpO1xufVxuXG4vKipcbiAqIEJ1aWxkIGEgZ2V0dGVyIGZ1bmN0aW9uLiBSZXF1aXJlcyBldmFsLlxuICpcbiAqIFdlIGlzb2xhdGUgdGhlIHRyeS9jYXRjaCBzbyBpdCBkb2Vzbid0IGFmZmVjdCB0aGVcbiAqIG9wdGltaXphdGlvbiBvZiB0aGUgcGFyc2UgZnVuY3Rpb24gd2hlbiBpdCBpcyBub3QgY2FsbGVkLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBib2R5XG4gKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gbWFrZUdldHRlckZuKGJvZHkpIHtcbiAgdHJ5IHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1uZXctZnVuYyAqL1xuICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ3Njb3BlJywgJ3JldHVybiAnICsgYm9keSArICc7Jyk7XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1uZXctZnVuYyAqL1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKGUudG9TdHJpbmcoKS5tYXRjaCgvdW5zYWZlLWV2YWx8Q1NQLykpIHtcbiAgICAgICAgd2FybignSXQgc2VlbXMgeW91IGFyZSB1c2luZyB0aGUgZGVmYXVsdCBidWlsZCBvZiBWdWUuanMgaW4gYW4gZW52aXJvbm1lbnQgJyArICd3aXRoIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IHRoYXQgcHJvaGliaXRzIHVuc2FmZS1ldmFsLiAnICsgJ1VzZSB0aGUgQ1NQLWNvbXBsaWFudCBidWlsZCBpbnN0ZWFkOiAnICsgJ2h0dHA6Ly92dWVqcy5vcmcvZ3VpZGUvaW5zdGFsbGF0aW9uLmh0bWwjQ1NQLWNvbXBsaWFudC1idWlsZCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2FybignSW52YWxpZCBleHByZXNzaW9uLiAnICsgJ0dlbmVyYXRlZCBmdW5jdGlvbiBib2R5OiAnICsgYm9keSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBub29wO1xuICB9XG59XG5cbi8qKlxuICogQ29tcGlsZSBhIHNldHRlciBmdW5jdGlvbiBmb3IgdGhlIGV4cHJlc3Npb24uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVTZXR0ZXIoZXhwKSB7XG4gIHZhciBwYXRoID0gcGFyc2VQYXRoKGV4cCk7XG4gIGlmIChwYXRoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgdmFsKSB7XG4gICAgICBzZXRQYXRoKHNjb3BlLCBwYXRoLCB2YWwpO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHNldHRlciBleHByZXNzaW9uOiAnICsgZXhwKTtcbiAgfVxufVxuXG4vKipcbiAqIFBhcnNlIGFuIGV4cHJlc3Npb24gaW50byByZS13cml0dGVuIGdldHRlci9zZXR0ZXJzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gbmVlZFNldFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VFeHByZXNzaW9uKGV4cCwgbmVlZFNldCkge1xuICBleHAgPSBleHAudHJpbSgpO1xuICAvLyB0cnkgY2FjaGVcbiAgdmFyIGhpdCA9IGV4cHJlc3Npb25DYWNoZS5nZXQoZXhwKTtcbiAgaWYgKGhpdCkge1xuICAgIGlmIChuZWVkU2V0ICYmICFoaXQuc2V0KSB7XG4gICAgICBoaXQuc2V0ID0gY29tcGlsZVNldHRlcihoaXQuZXhwKTtcbiAgICB9XG4gICAgcmV0dXJuIGhpdDtcbiAgfVxuICB2YXIgcmVzID0geyBleHA6IGV4cCB9O1xuICByZXMuZ2V0ID0gaXNTaW1wbGVQYXRoKGV4cCkgJiYgZXhwLmluZGV4T2YoJ1snKSA8IDBcbiAgLy8gb3B0aW1pemVkIHN1cGVyIHNpbXBsZSBnZXR0ZXJcbiAgPyBtYWtlR2V0dGVyRm4oJ3Njb3BlLicgKyBleHApXG4gIC8vIGR5bmFtaWMgZ2V0dGVyXG4gIDogY29tcGlsZUdldHRlcihleHApO1xuICBpZiAobmVlZFNldCkge1xuICAgIHJlcy5zZXQgPSBjb21waWxlU2V0dGVyKGV4cCk7XG4gIH1cbiAgZXhwcmVzc2lvbkNhY2hlLnB1dChleHAsIHJlcyk7XG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZXhwcmVzc2lvbiBpcyBhIHNpbXBsZSBwYXRoLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNTaW1wbGVQYXRoKGV4cCkge1xuICByZXR1cm4gcGF0aFRlc3RSRS50ZXN0KGV4cCkgJiZcbiAgLy8gZG9uJ3QgdHJlYXQgbGl0ZXJhbCB2YWx1ZXMgYXMgcGF0aHNcbiAgIWxpdGVyYWxWYWx1ZVJFJDEudGVzdChleHApICYmXG4gIC8vIE1hdGggY29uc3RhbnRzIGUuZy4gTWF0aC5QSSwgTWF0aC5FIGV0Yy5cbiAgZXhwLnNsaWNlKDAsIDUpICE9PSAnTWF0aC4nO1xufVxuXG52YXIgZXhwcmVzc2lvbiA9IE9iamVjdC5mcmVlemUoe1xuICBwYXJzZUV4cHJlc3Npb246IHBhcnNlRXhwcmVzc2lvbixcbiAgaXNTaW1wbGVQYXRoOiBpc1NpbXBsZVBhdGhcbn0pO1xuXG4vLyB3ZSBoYXZlIHR3byBzZXBhcmF0ZSBxdWV1ZXM6IG9uZSBmb3IgZGlyZWN0aXZlIHVwZGF0ZXNcbi8vIGFuZCBvbmUgZm9yIHVzZXIgd2F0Y2hlciByZWdpc3RlcmVkIHZpYSAkd2F0Y2goKS5cbi8vIHdlIHdhbnQgdG8gZ3VhcmFudGVlIGRpcmVjdGl2ZSB1cGRhdGVzIHRvIGJlIGNhbGxlZFxuLy8gYmVmb3JlIHVzZXIgd2F0Y2hlcnMgc28gdGhhdCB3aGVuIHVzZXIgd2F0Y2hlcnMgYXJlXG4vLyB0cmlnZ2VyZWQsIHRoZSBET00gd291bGQgaGF2ZSBhbHJlYWR5IGJlZW4gaW4gdXBkYXRlZFxuLy8gc3RhdGUuXG5cbnZhciBxdWV1ZSA9IFtdO1xudmFyIHVzZXJRdWV1ZSA9IFtdO1xudmFyIGhhcyA9IHt9O1xudmFyIGNpcmN1bGFyID0ge307XG52YXIgd2FpdGluZyA9IGZhbHNlO1xuXG4vKipcbiAqIFJlc2V0IHRoZSBiYXRjaGVyJ3Mgc3RhdGUuXG4gKi9cblxuZnVuY3Rpb24gcmVzZXRCYXRjaGVyU3RhdGUoKSB7XG4gIHF1ZXVlLmxlbmd0aCA9IDA7XG4gIHVzZXJRdWV1ZS5sZW5ndGggPSAwO1xuICBoYXMgPSB7fTtcbiAgY2lyY3VsYXIgPSB7fTtcbiAgd2FpdGluZyA9IGZhbHNlO1xufVxuXG4vKipcbiAqIEZsdXNoIGJvdGggcXVldWVzIGFuZCBydW4gdGhlIHdhdGNoZXJzLlxuICovXG5cbmZ1bmN0aW9uIGZsdXNoQmF0Y2hlclF1ZXVlKCkge1xuICB2YXIgX2FnYWluID0gdHJ1ZTtcblxuICBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHtcbiAgICBfYWdhaW4gPSBmYWxzZTtcblxuICAgIHJ1bkJhdGNoZXJRdWV1ZShxdWV1ZSk7XG4gICAgcnVuQmF0Y2hlclF1ZXVlKHVzZXJRdWV1ZSk7XG4gICAgLy8gdXNlciB3YXRjaGVycyB0cmlnZ2VyZWQgbW9yZSB3YXRjaGVycyxcbiAgICAvLyBrZWVwIGZsdXNoaW5nIHVudGlsIGl0IGRlcGxldGVzXG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgX2FnYWluID0gdHJ1ZTtcbiAgICAgIGNvbnRpbnVlIF9mdW5jdGlvbjtcbiAgICB9XG4gICAgLy8gZGV2IHRvb2wgaG9va1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChkZXZ0b29scyAmJiBjb25maWcuZGV2dG9vbHMpIHtcbiAgICAgIGRldnRvb2xzLmVtaXQoJ2ZsdXNoJyk7XG4gICAgfVxuICAgIHJlc2V0QmF0Y2hlclN0YXRlKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSdW4gdGhlIHdhdGNoZXJzIGluIGEgc2luZ2xlIHF1ZXVlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHF1ZXVlXG4gKi9cblxuZnVuY3Rpb24gcnVuQmF0Y2hlclF1ZXVlKHF1ZXVlKSB7XG4gIC8vIGRvIG5vdCBjYWNoZSBsZW5ndGggYmVjYXVzZSBtb3JlIHdhdGNoZXJzIG1pZ2h0IGJlIHB1c2hlZFxuICAvLyBhcyB3ZSBydW4gZXhpc3Rpbmcgd2F0Y2hlcnNcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgIHZhciB3YXRjaGVyID0gcXVldWVbaV07XG4gICAgdmFyIGlkID0gd2F0Y2hlci5pZDtcbiAgICBoYXNbaWRdID0gbnVsbDtcbiAgICB3YXRjaGVyLnJ1bigpO1xuICAgIC8vIGluIGRldiBidWlsZCwgY2hlY2sgYW5kIHN0b3AgY2lyY3VsYXIgdXBkYXRlcy5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBoYXNbaWRdICE9IG51bGwpIHtcbiAgICAgIGNpcmN1bGFyW2lkXSA9IChjaXJjdWxhcltpZF0gfHwgMCkgKyAxO1xuICAgICAgaWYgKGNpcmN1bGFyW2lkXSA+IGNvbmZpZy5fbWF4VXBkYXRlQ291bnQpIHtcbiAgICAgICAgd2FybignWW91IG1heSBoYXZlIGFuIGluZmluaXRlIHVwZGF0ZSBsb29wIGZvciB3YXRjaGVyICcgKyAnd2l0aCBleHByZXNzaW9uIFwiJyArIHdhdGNoZXIuZXhwcmVzc2lvbiArICdcIicsIHdhdGNoZXIudm0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcXVldWUubGVuZ3RoID0gMDtcbn1cblxuLyoqXG4gKiBQdXNoIGEgd2F0Y2hlciBpbnRvIHRoZSB3YXRjaGVyIHF1ZXVlLlxuICogSm9icyB3aXRoIGR1cGxpY2F0ZSBJRHMgd2lsbCBiZSBza2lwcGVkIHVubGVzcyBpdCdzXG4gKiBwdXNoZWQgd2hlbiB0aGUgcXVldWUgaXMgYmVpbmcgZmx1c2hlZC5cbiAqXG4gKiBAcGFyYW0ge1dhdGNoZXJ9IHdhdGNoZXJcbiAqICAgcHJvcGVydGllczpcbiAqICAgLSB7TnVtYmVyfSBpZFxuICogICAtIHtGdW5jdGlvbn0gcnVuXG4gKi9cblxuZnVuY3Rpb24gcHVzaFdhdGNoZXIod2F0Y2hlcikge1xuICB2YXIgaWQgPSB3YXRjaGVyLmlkO1xuICBpZiAoaGFzW2lkXSA9PSBudWxsKSB7XG4gICAgLy8gcHVzaCB3YXRjaGVyIGludG8gYXBwcm9wcmlhdGUgcXVldWVcbiAgICB2YXIgcSA9IHdhdGNoZXIudXNlciA/IHVzZXJRdWV1ZSA6IHF1ZXVlO1xuICAgIGhhc1tpZF0gPSBxLmxlbmd0aDtcbiAgICBxLnB1c2god2F0Y2hlcik7XG4gICAgLy8gcXVldWUgdGhlIGZsdXNoXG4gICAgaWYgKCF3YWl0aW5nKSB7XG4gICAgICB3YWl0aW5nID0gdHJ1ZTtcbiAgICAgIG5leHRUaWNrKGZsdXNoQmF0Y2hlclF1ZXVlKTtcbiAgICB9XG4gIH1cbn1cblxudmFyIHVpZCQyID0gMDtcblxuLyoqXG4gKiBBIHdhdGNoZXIgcGFyc2VzIGFuIGV4cHJlc3Npb24sIGNvbGxlY3RzIGRlcGVuZGVuY2llcyxcbiAqIGFuZCBmaXJlcyBjYWxsYmFjayB3aGVuIHRoZSBleHByZXNzaW9uIHZhbHVlIGNoYW5nZXMuXG4gKiBUaGlzIGlzIHVzZWQgZm9yIGJvdGggdGhlICR3YXRjaCgpIGFwaSBhbmQgZGlyZWN0aXZlcy5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBleHBPckZuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqICAgICAgICAgICAgICAgICAtIHtBcnJheX0gZmlsdGVyc1xuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHR3b1dheVxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGRlZXBcbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSB1c2VyXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gc3luY1xuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGxhenlcbiAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW3ByZVByb2Nlc3NdXG4gKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtwb3N0UHJvY2Vzc11cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwgb3B0aW9ucykge1xuICAvLyBtaXggaW4gb3B0aW9uc1xuICBpZiAob3B0aW9ucykge1xuICAgIGV4dGVuZCh0aGlzLCBvcHRpb25zKTtcbiAgfVxuICB2YXIgaXNGbiA9IHR5cGVvZiBleHBPckZuID09PSAnZnVuY3Rpb24nO1xuICB0aGlzLnZtID0gdm07XG4gIHZtLl93YXRjaGVycy5wdXNoKHRoaXMpO1xuICB0aGlzLmV4cHJlc3Npb24gPSBleHBPckZuO1xuICB0aGlzLmNiID0gY2I7XG4gIHRoaXMuaWQgPSArK3VpZCQyOyAvLyB1aWQgZm9yIGJhdGNoaW5nXG4gIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgdGhpcy5kaXJ0eSA9IHRoaXMubGF6eTsgLy8gZm9yIGxhenkgd2F0Y2hlcnNcbiAgdGhpcy5kZXBzID0gW107XG4gIHRoaXMubmV3RGVwcyA9IFtdO1xuICB0aGlzLmRlcElkcyA9IG5ldyBfU2V0KCk7XG4gIHRoaXMubmV3RGVwSWRzID0gbmV3IF9TZXQoKTtcbiAgdGhpcy5wcmV2RXJyb3IgPSBudWxsOyAvLyBmb3IgYXN5bmMgZXJyb3Igc3RhY2tzXG4gIC8vIHBhcnNlIGV4cHJlc3Npb24gZm9yIGdldHRlci9zZXR0ZXJcbiAgaWYgKGlzRm4pIHtcbiAgICB0aGlzLmdldHRlciA9IGV4cE9yRm47XG4gICAgdGhpcy5zZXR0ZXIgPSB1bmRlZmluZWQ7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHBPckZuLCB0aGlzLnR3b1dheSk7XG4gICAgdGhpcy5nZXR0ZXIgPSByZXMuZ2V0O1xuICAgIHRoaXMuc2V0dGVyID0gcmVzLnNldDtcbiAgfVxuICB0aGlzLnZhbHVlID0gdGhpcy5sYXp5ID8gdW5kZWZpbmVkIDogdGhpcy5nZXQoKTtcbiAgLy8gc3RhdGUgZm9yIGF2b2lkaW5nIGZhbHNlIHRyaWdnZXJzIGZvciBkZWVwIGFuZCBBcnJheVxuICAvLyB3YXRjaGVycyBkdXJpbmcgdm0uX2RpZ2VzdCgpXG4gIHRoaXMucXVldWVkID0gdGhpcy5zaGFsbG93ID0gZmFsc2U7XG59XG5cbi8qKlxuICogRXZhbHVhdGUgdGhlIGdldHRlciwgYW5kIHJlLWNvbGxlY3QgZGVwZW5kZW5jaWVzLlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5iZWZvcmVHZXQoKTtcbiAgdmFyIHNjb3BlID0gdGhpcy5zY29wZSB8fCB0aGlzLnZtO1xuICB2YXIgdmFsdWU7XG4gIHRyeSB7XG4gICAgdmFsdWUgPSB0aGlzLmdldHRlci5jYWxsKHNjb3BlLCBzY29wZSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcud2FybkV4cHJlc3Npb25FcnJvcnMpIHtcbiAgICAgIHdhcm4oJ0Vycm9yIHdoZW4gZXZhbHVhdGluZyBleHByZXNzaW9uICcgKyAnXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiOiAnICsgZS50b1N0cmluZygpLCB0aGlzLnZtKTtcbiAgICB9XG4gIH1cbiAgLy8gXCJ0b3VjaFwiIGV2ZXJ5IHByb3BlcnR5IHNvIHRoZXkgYXJlIGFsbCB0cmFja2VkIGFzXG4gIC8vIGRlcGVuZGVuY2llcyBmb3IgZGVlcCB3YXRjaGluZ1xuICBpZiAodGhpcy5kZWVwKSB7XG4gICAgdHJhdmVyc2UodmFsdWUpO1xuICB9XG4gIGlmICh0aGlzLnByZVByb2Nlc3MpIHtcbiAgICB2YWx1ZSA9IHRoaXMucHJlUHJvY2Vzcyh2YWx1ZSk7XG4gIH1cbiAgaWYgKHRoaXMuZmlsdGVycykge1xuICAgIHZhbHVlID0gc2NvcGUuX2FwcGx5RmlsdGVycyh2YWx1ZSwgbnVsbCwgdGhpcy5maWx0ZXJzLCBmYWxzZSk7XG4gIH1cbiAgaWYgKHRoaXMucG9zdFByb2Nlc3MpIHtcbiAgICB2YWx1ZSA9IHRoaXMucG9zdFByb2Nlc3ModmFsdWUpO1xuICB9XG4gIHRoaXMuYWZ0ZXJHZXQoKTtcbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgd2l0aCB0aGUgc2V0dGVyLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgdmFyIHNjb3BlID0gdGhpcy5zY29wZSB8fCB0aGlzLnZtO1xuICBpZiAodGhpcy5maWx0ZXJzKSB7XG4gICAgdmFsdWUgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKHZhbHVlLCB0aGlzLnZhbHVlLCB0aGlzLmZpbHRlcnMsIHRydWUpO1xuICB9XG4gIHRyeSB7XG4gICAgdGhpcy5zZXR0ZXIuY2FsbChzY29wZSwgc2NvcGUsIHZhbHVlKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy53YXJuRXhwcmVzc2lvbkVycm9ycykge1xuICAgICAgd2FybignRXJyb3Igd2hlbiBldmFsdWF0aW5nIHNldHRlciAnICsgJ1wiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIjogJyArIGUudG9TdHJpbmcoKSwgdGhpcy52bSk7XG4gICAgfVxuICB9XG4gIC8vIHR3by13YXkgc3luYyBmb3Igdi1mb3IgYWxpYXNcbiAgdmFyIGZvckNvbnRleHQgPSBzY29wZS4kZm9yQ29udGV4dDtcbiAgaWYgKGZvckNvbnRleHQgJiYgZm9yQ29udGV4dC5hbGlhcyA9PT0gdGhpcy5leHByZXNzaW9uKSB7XG4gICAgaWYgKGZvckNvbnRleHQuZmlsdGVycykge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHR3by13YXkgYmluZGluZyBvbiAnICsgJ2Egdi1mb3IgYWxpYXMgKCcgKyB0aGlzLmV4cHJlc3Npb24gKyAnKSwgYW5kIHRoZSAnICsgJ3YtZm9yIGhhcyBmaWx0ZXJzLiBUaGlzIHdpbGwgbm90IHdvcmsgcHJvcGVybHkuICcgKyAnRWl0aGVyIHJlbW92ZSB0aGUgZmlsdGVycyBvciB1c2UgYW4gYXJyYXkgb2YgJyArICdvYmplY3RzIGFuZCBiaW5kIHRvIG9iamVjdCBwcm9wZXJ0aWVzIGluc3RlYWQuJywgdGhpcy52bSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvckNvbnRleHQuX3dpdGhMb2NrKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChzY29wZS4ka2V5KSB7XG4gICAgICAgIC8vIG9yaWdpbmFsIGlzIGFuIG9iamVjdFxuICAgICAgICBmb3JDb250ZXh0LnJhd1ZhbHVlW3Njb3BlLiRrZXldID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3JDb250ZXh0LnJhd1ZhbHVlLiRzZXQoc2NvcGUuJGluZGV4LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG5cbi8qKlxuICogUHJlcGFyZSBmb3IgZGVwZW5kZW5jeSBjb2xsZWN0aW9uLlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLmJlZm9yZUdldCA9IGZ1bmN0aW9uICgpIHtcbiAgRGVwLnRhcmdldCA9IHRoaXM7XG59O1xuXG4vKipcbiAqIEFkZCBhIGRlcGVuZGVuY3kgdG8gdGhpcyBkaXJlY3RpdmUuXG4gKlxuICogQHBhcmFtIHtEZXB9IGRlcFxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLmFkZERlcCA9IGZ1bmN0aW9uIChkZXApIHtcbiAgdmFyIGlkID0gZGVwLmlkO1xuICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhpZCkpIHtcbiAgICB0aGlzLm5ld0RlcElkcy5hZGQoaWQpO1xuICAgIHRoaXMubmV3RGVwcy5wdXNoKGRlcCk7XG4gICAgaWYgKCF0aGlzLmRlcElkcy5oYXMoaWQpKSB7XG4gICAgICBkZXAuYWRkU3ViKHRoaXMpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBDbGVhbiB1cCBmb3IgZGVwZW5kZW5jeSBjb2xsZWN0aW9uLlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLmFmdGVyR2V0ID0gZnVuY3Rpb24gKCkge1xuICBEZXAudGFyZ2V0ID0gbnVsbDtcbiAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgdmFyIGRlcCA9IHRoaXMuZGVwc1tpXTtcbiAgICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhkZXAuaWQpKSB7XG4gICAgICBkZXAucmVtb3ZlU3ViKHRoaXMpO1xuICAgIH1cbiAgfVxuICB2YXIgdG1wID0gdGhpcy5kZXBJZHM7XG4gIHRoaXMuZGVwSWRzID0gdGhpcy5uZXdEZXBJZHM7XG4gIHRoaXMubmV3RGVwSWRzID0gdG1wO1xuICB0aGlzLm5ld0RlcElkcy5jbGVhcigpO1xuICB0bXAgPSB0aGlzLmRlcHM7XG4gIHRoaXMuZGVwcyA9IHRoaXMubmV3RGVwcztcbiAgdGhpcy5uZXdEZXBzID0gdG1wO1xuICB0aGlzLm5ld0RlcHMubGVuZ3RoID0gMDtcbn07XG5cbi8qKlxuICogU3Vic2NyaWJlciBpbnRlcmZhY2UuXG4gKiBXaWxsIGJlIGNhbGxlZCB3aGVuIGEgZGVwZW5kZW5jeSBjaGFuZ2VzLlxuICpcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hhbGxvd1xuICovXG5cbldhdGNoZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChzaGFsbG93KSB7XG4gIGlmICh0aGlzLmxhenkpIHtcbiAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgfSBlbHNlIGlmICh0aGlzLnN5bmMgfHwgIWNvbmZpZy5hc3luYykge1xuICAgIHRoaXMucnVuKCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gaWYgcXVldWVkLCBvbmx5IG92ZXJ3cml0ZSBzaGFsbG93IHdpdGggbm9uLXNoYWxsb3csXG4gICAgLy8gYnV0IG5vdCB0aGUgb3RoZXIgd2F5IGFyb3VuZC5cbiAgICB0aGlzLnNoYWxsb3cgPSB0aGlzLnF1ZXVlZCA/IHNoYWxsb3cgPyB0aGlzLnNoYWxsb3cgOiBmYWxzZSA6ICEhc2hhbGxvdztcbiAgICB0aGlzLnF1ZXVlZCA9IHRydWU7XG4gICAgLy8gcmVjb3JkIGJlZm9yZS1wdXNoIGVycm9yIHN0YWNrIGluIGRlYnVnIG1vZGVcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcuZGVidWcpIHtcbiAgICAgIHRoaXMucHJldkVycm9yID0gbmV3IEVycm9yKCdbdnVlXSBhc3luYyBzdGFjayB0cmFjZScpO1xuICAgIH1cbiAgICBwdXNoV2F0Y2hlcih0aGlzKTtcbiAgfVxufTtcblxuLyoqXG4gKiBCYXRjaGVyIGpvYiBpbnRlcmZhY2UuXG4gKiBXaWxsIGJlIGNhbGxlZCBieSB0aGUgYmF0Y2hlci5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgIHZhciB2YWx1ZSA9IHRoaXMuZ2V0KCk7XG4gICAgaWYgKHZhbHVlICE9PSB0aGlzLnZhbHVlIHx8XG4gICAgLy8gRGVlcCB3YXRjaGVycyBhbmQgd2F0Y2hlcnMgb24gT2JqZWN0L0FycmF5cyBzaG91bGQgZmlyZSBldmVuXG4gICAgLy8gd2hlbiB0aGUgdmFsdWUgaXMgdGhlIHNhbWUsIGJlY2F1c2UgdGhlIHZhbHVlIG1heVxuICAgIC8vIGhhdmUgbXV0YXRlZDsgYnV0IG9ubHkgZG8gc28gaWYgdGhpcyBpcyBhXG4gICAgLy8gbm9uLXNoYWxsb3cgdXBkYXRlIChjYXVzZWQgYnkgYSB2bSBkaWdlc3QpLlxuICAgIChpc09iamVjdCh2YWx1ZSkgfHwgdGhpcy5kZWVwKSAmJiAhdGhpcy5zaGFsbG93KSB7XG4gICAgICAvLyBzZXQgbmV3IHZhbHVlXG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgLy8gaW4gZGVidWcgKyBhc3luYyBtb2RlLCB3aGVuIGEgd2F0Y2hlciBjYWxsYmFja3NcbiAgICAgIC8vIHRocm93cywgd2UgYWxzbyB0aHJvdyB0aGUgc2F2ZWQgYmVmb3JlLXB1c2ggZXJyb3JcbiAgICAgIC8vIHNvIHRoZSBmdWxsIGNyb3NzLXRpY2sgc3RhY2sgdHJhY2UgaXMgYXZhaWxhYmxlLlxuICAgICAgdmFyIHByZXZFcnJvciA9IHRoaXMucHJldkVycm9yO1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcuZGVidWcgJiYgcHJldkVycm9yKSB7XG4gICAgICAgIHRoaXMucHJldkVycm9yID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy52bSwgdmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRocm93IHByZXZFcnJvcjtcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy52bSwgdmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5xdWV1ZWQgPSB0aGlzLnNoYWxsb3cgPSBmYWxzZTtcbiAgfVxufTtcblxuLyoqXG4gKiBFdmFsdWF0ZSB0aGUgdmFsdWUgb2YgdGhlIHdhdGNoZXIuXG4gKiBUaGlzIG9ubHkgZ2V0cyBjYWxsZWQgZm9yIGxhenkgd2F0Y2hlcnMuXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIGF2b2lkIG92ZXJ3cml0aW5nIGFub3RoZXIgd2F0Y2hlciB0aGF0IGlzIGJlaW5nXG4gIC8vIGNvbGxlY3RlZC5cbiAgdmFyIGN1cnJlbnQgPSBEZXAudGFyZ2V0O1xuICB0aGlzLnZhbHVlID0gdGhpcy5nZXQoKTtcbiAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuICBEZXAudGFyZ2V0ID0gY3VycmVudDtcbn07XG5cbi8qKlxuICogRGVwZW5kIG9uIGFsbCBkZXBzIGNvbGxlY3RlZCBieSB0aGlzIHdhdGNoZXIuXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gKCkge1xuICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICB0aGlzLmRlcHNbaV0uZGVwZW5kKCk7XG4gIH1cbn07XG5cbi8qKlxuICogUmVtb3ZlIHNlbGYgZnJvbSBhbGwgZGVwZW5kZW5jaWVzJyBzdWJjcmliZXIgbGlzdC5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS50ZWFyZG93biA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSB2bSdzIHdhdGNoZXIgbGlzdFxuICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBleHBlbnNpdmUgb3BlcmF0aW9uIHNvIHdlIHNraXAgaXRcbiAgICAvLyBpZiB0aGUgdm0gaXMgYmVpbmcgZGVzdHJveWVkIG9yIGlzIHBlcmZvcm1pbmcgYSB2LWZvclxuICAgIC8vIHJlLXJlbmRlciAodGhlIHdhdGNoZXIgbGlzdCBpcyB0aGVuIGZpbHRlcmVkIGJ5IHYtZm9yKS5cbiAgICBpZiAoIXRoaXMudm0uX2lzQmVpbmdEZXN0cm95ZWQgJiYgIXRoaXMudm0uX3ZGb3JSZW1vdmluZykge1xuICAgICAgdGhpcy52bS5fd2F0Y2hlcnMuJHJlbW92ZSh0aGlzKTtcbiAgICB9XG4gICAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHRoaXMuZGVwc1tpXS5yZW1vdmVTdWIodGhpcyk7XG4gICAgfVxuICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy52bSA9IHRoaXMuY2IgPSB0aGlzLnZhbHVlID0gbnVsbDtcbiAgfVxufTtcblxuLyoqXG4gKiBSZWNydXNpdmVseSB0cmF2ZXJzZSBhbiBvYmplY3QgdG8gZXZva2UgYWxsIGNvbnZlcnRlZFxuICogZ2V0dGVycywgc28gdGhhdCBldmVyeSBuZXN0ZWQgcHJvcGVydHkgaW5zaWRlIHRoZSBvYmplY3RcbiAqIGlzIGNvbGxlY3RlZCBhcyBhIFwiZGVlcFwiIGRlcGVuZGVuY3kuXG4gKlxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG52YXIgc2Vlbk9iamVjdHMgPSBuZXcgX1NldCgpO1xuZnVuY3Rpb24gdHJhdmVyc2UodmFsLCBzZWVuKSB7XG4gIHZhciBpID0gdW5kZWZpbmVkLFxuICAgICAga2V5cyA9IHVuZGVmaW5lZDtcbiAgaWYgKCFzZWVuKSB7XG4gICAgc2VlbiA9IHNlZW5PYmplY3RzO1xuICAgIHNlZW4uY2xlYXIoKTtcbiAgfVxuICB2YXIgaXNBID0gaXNBcnJheSh2YWwpO1xuICB2YXIgaXNPID0gaXNPYmplY3QodmFsKTtcbiAgaWYgKChpc0EgfHwgaXNPKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHZhbCkpIHtcbiAgICBpZiAodmFsLl9fb2JfXykge1xuICAgICAgdmFyIGRlcElkID0gdmFsLl9fb2JfXy5kZXAuaWQ7XG4gICAgICBpZiAoc2Vlbi5oYXMoZGVwSWQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlZW4uYWRkKGRlcElkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzQSkge1xuICAgICAgaSA9IHZhbC5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB0cmF2ZXJzZSh2YWxbaV0sIHNlZW4pO1xuICAgIH0gZWxzZSBpZiAoaXNPKSB7XG4gICAgICBrZXlzID0gT2JqZWN0LmtleXModmFsKTtcbiAgICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHRyYXZlcnNlKHZhbFtrZXlzW2ldXSwgc2Vlbik7XG4gICAgfVxuICB9XG59XG5cbnZhciB0ZXh0JDEgPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB0aGlzLmF0dHIgPSB0aGlzLmVsLm5vZGVUeXBlID09PSAzID8gJ2RhdGEnIDogJ3RleHRDb250ZW50JztcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIHRoaXMuZWxbdGhpcy5hdHRyXSA9IF90b1N0cmluZyh2YWx1ZSk7XG4gIH1cbn07XG5cbnZhciB0ZW1wbGF0ZUNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xudmFyIGlkU2VsZWN0b3JDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblxudmFyIG1hcCA9IHtcbiAgZWZhdWx0OiBbMCwgJycsICcnXSxcbiAgbGVnZW5kOiBbMSwgJzxmaWVsZHNldD4nLCAnPC9maWVsZHNldD4nXSxcbiAgdHI6IFsyLCAnPHRhYmxlPjx0Ym9keT4nLCAnPC90Ym9keT48L3RhYmxlPiddLFxuICBjb2w6IFsyLCAnPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4nLCAnPC9jb2xncm91cD48L3RhYmxlPiddXG59O1xuXG5tYXAudGQgPSBtYXAudGggPSBbMywgJzx0YWJsZT48dGJvZHk+PHRyPicsICc8L3RyPjwvdGJvZHk+PC90YWJsZT4nXTtcblxubWFwLm9wdGlvbiA9IG1hcC5vcHRncm91cCA9IFsxLCAnPHNlbGVjdCBtdWx0aXBsZT1cIm11bHRpcGxlXCI+JywgJzwvc2VsZWN0PiddO1xuXG5tYXAudGhlYWQgPSBtYXAudGJvZHkgPSBtYXAuY29sZ3JvdXAgPSBtYXAuY2FwdGlvbiA9IG1hcC50Zm9vdCA9IFsxLCAnPHRhYmxlPicsICc8L3RhYmxlPiddO1xuXG5tYXAuZyA9IG1hcC5kZWZzID0gbWFwLnN5bWJvbCA9IG1hcC51c2UgPSBtYXAuaW1hZ2UgPSBtYXAudGV4dCA9IG1hcC5jaXJjbGUgPSBtYXAuZWxsaXBzZSA9IG1hcC5saW5lID0gbWFwLnBhdGggPSBtYXAucG9seWdvbiA9IG1hcC5wb2x5bGluZSA9IG1hcC5yZWN0ID0gWzEsICc8c3ZnICcgKyAneG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiICcgKyAneG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgJyArICd4bWxuczpldj1cImh0dHA6Ly93d3cudzMub3JnLzIwMDEveG1sLWV2ZW50c1wiJyArICd2ZXJzaW9uPVwiMS4xXCI+JywgJzwvc3ZnPiddO1xuXG4vKipcbiAqIENoZWNrIGlmIGEgbm9kZSBpcyBhIHN1cHBvcnRlZCB0ZW1wbGF0ZSBub2RlIHdpdGggYVxuICogRG9jdW1lbnRGcmFnbWVudCBjb250ZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc1JlYWxUZW1wbGF0ZShub2RlKSB7XG4gIHJldHVybiBpc1RlbXBsYXRlKG5vZGUpICYmIGlzRnJhZ21lbnQobm9kZS5jb250ZW50KTtcbn1cblxudmFyIHRhZ1JFJDEgPSAvPChbXFx3Oi1dKykvO1xudmFyIGVudGl0eVJFID0gLyYjP1xcdys/Oy87XG52YXIgY29tbWVudFJFID0gLzwhLS0vO1xuXG4vKipcbiAqIENvbnZlcnQgYSBzdHJpbmcgdGVtcGxhdGUgdG8gYSBEb2N1bWVudEZyYWdtZW50LlxuICogRGV0ZXJtaW5lcyBjb3JyZWN0IHdyYXBwaW5nIGJ5IHRhZyB0eXBlcy4gV3JhcHBpbmdcbiAqIHN0cmF0ZWd5IGZvdW5kIGluIGpRdWVyeSAmIGNvbXBvbmVudC9kb21pZnkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHRlbXBsYXRlU3RyaW5nXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHJhd1xuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBzdHJpbmdUb0ZyYWdtZW50KHRlbXBsYXRlU3RyaW5nLCByYXcpIHtcbiAgLy8gdHJ5IGEgY2FjaGUgaGl0IGZpcnN0XG4gIHZhciBjYWNoZUtleSA9IHJhdyA/IHRlbXBsYXRlU3RyaW5nIDogdGVtcGxhdGVTdHJpbmcudHJpbSgpO1xuICB2YXIgaGl0ID0gdGVtcGxhdGVDYWNoZS5nZXQoY2FjaGVLZXkpO1xuICBpZiAoaGl0KSB7XG4gICAgcmV0dXJuIGhpdDtcbiAgfVxuXG4gIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICB2YXIgdGFnTWF0Y2ggPSB0ZW1wbGF0ZVN0cmluZy5tYXRjaCh0YWdSRSQxKTtcbiAgdmFyIGVudGl0eU1hdGNoID0gZW50aXR5UkUudGVzdCh0ZW1wbGF0ZVN0cmluZyk7XG4gIHZhciBjb21tZW50TWF0Y2ggPSBjb21tZW50UkUudGVzdCh0ZW1wbGF0ZVN0cmluZyk7XG5cbiAgaWYgKCF0YWdNYXRjaCAmJiAhZW50aXR5TWF0Y2ggJiYgIWNvbW1lbnRNYXRjaCkge1xuICAgIC8vIHRleHQgb25seSwgcmV0dXJuIGEgc2luZ2xlIHRleHQgbm9kZS5cbiAgICBmcmFnLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRlbXBsYXRlU3RyaW5nKSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHRhZyA9IHRhZ01hdGNoICYmIHRhZ01hdGNoWzFdO1xuICAgIHZhciB3cmFwID0gbWFwW3RhZ10gfHwgbWFwLmVmYXVsdDtcbiAgICB2YXIgZGVwdGggPSB3cmFwWzBdO1xuICAgIHZhciBwcmVmaXggPSB3cmFwWzFdO1xuICAgIHZhciBzdWZmaXggPSB3cmFwWzJdO1xuICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICBub2RlLmlubmVySFRNTCA9IHByZWZpeCArIHRlbXBsYXRlU3RyaW5nICsgc3VmZml4O1xuICAgIHdoaWxlIChkZXB0aC0tKSB7XG4gICAgICBub2RlID0gbm9kZS5sYXN0Q2hpbGQ7XG4gICAgfVxuXG4gICAgdmFyIGNoaWxkO1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgd2hpbGUgKGNoaWxkID0gbm9kZS5maXJzdENoaWxkKSB7XG4gICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgICBmcmFnLmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFyYXcpIHtcbiAgICB0cmltTm9kZShmcmFnKTtcbiAgfVxuICB0ZW1wbGF0ZUNhY2hlLnB1dChjYWNoZUtleSwgZnJhZyk7XG4gIHJldHVybiBmcmFnO1xufVxuXG4vKipcbiAqIENvbnZlcnQgYSB0ZW1wbGF0ZSBub2RlIHRvIGEgRG9jdW1lbnRGcmFnbWVudC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gbm9kZVRvRnJhZ21lbnQobm9kZSkge1xuICAvLyBpZiBpdHMgYSB0ZW1wbGF0ZSB0YWcgYW5kIHRoZSBicm93c2VyIHN1cHBvcnRzIGl0LFxuICAvLyBpdHMgY29udGVudCBpcyBhbHJlYWR5IGEgZG9jdW1lbnQgZnJhZ21lbnQuIEhvd2V2ZXIsIGlPUyBTYWZhcmkgaGFzXG4gIC8vIGJ1ZyB3aGVuIHVzaW5nIGRpcmVjdGx5IGNsb25lZCB0ZW1wbGF0ZSBjb250ZW50IHdpdGggdG91Y2hcbiAgLy8gZXZlbnRzIGFuZCBjYW4gY2F1c2UgY3Jhc2hlcyB3aGVuIHRoZSBub2RlcyBhcmUgcmVtb3ZlZCBmcm9tIERPTSwgc28gd2VcbiAgLy8gaGF2ZSB0byB0cmVhdCB0ZW1wbGF0ZSBlbGVtZW50cyBhcyBzdHJpbmcgdGVtcGxhdGVzLiAoIzI4MDUpXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaXNSZWFsVGVtcGxhdGUobm9kZSkpIHtcbiAgICByZXR1cm4gc3RyaW5nVG9GcmFnbWVudChub2RlLmlubmVySFRNTCk7XG4gIH1cbiAgLy8gc2NyaXB0IHRlbXBsYXRlXG4gIGlmIChub2RlLnRhZ05hbWUgPT09ICdTQ1JJUFQnKSB7XG4gICAgcmV0dXJuIHN0cmluZ1RvRnJhZ21lbnQobm9kZS50ZXh0Q29udGVudCk7XG4gIH1cbiAgLy8gbm9ybWFsIG5vZGUsIGNsb25lIGl0IHRvIGF2b2lkIG11dGF0aW5nIHRoZSBvcmlnaW5hbFxuICB2YXIgY2xvbmVkTm9kZSA9IGNsb25lTm9kZShub2RlKTtcbiAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIHZhciBjaGlsZDtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgd2hpbGUgKGNoaWxkID0gY2xvbmVkTm9kZS5maXJzdENoaWxkKSB7XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIGZyYWcuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICB9XG4gIHRyaW1Ob2RlKGZyYWcpO1xuICByZXR1cm4gZnJhZztcbn1cblxuLy8gVGVzdCBmb3IgdGhlIHByZXNlbmNlIG9mIHRoZSBTYWZhcmkgdGVtcGxhdGUgY2xvbmluZyBidWdcbi8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3d1Zy5jZ2k/aWQ9MTM3NzU1XG52YXIgaGFzQnJva2VuVGVtcGxhdGUgPSAoZnVuY3Rpb24gKCkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAoaW5Ccm93c2VyKSB7XG4gICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhLmlubmVySFRNTCA9ICc8dGVtcGxhdGU+MTwvdGVtcGxhdGU+JztcbiAgICByZXR1cm4gIWEuY2xvbmVOb2RlKHRydWUpLmZpcnN0Q2hpbGQuaW5uZXJIVE1MO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufSkoKTtcblxuLy8gVGVzdCBmb3IgSUUxMC8xMSB0ZXh0YXJlYSBwbGFjZWhvbGRlciBjbG9uZSBidWdcbnZhciBoYXNUZXh0YXJlYUNsb25lQnVnID0gKGZ1bmN0aW9uICgpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKGluQnJvd3Nlcikge1xuICAgIHZhciB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgICB0LnBsYWNlaG9sZGVyID0gJ3QnO1xuICAgIHJldHVybiB0LmNsb25lTm9kZSh0cnVlKS52YWx1ZSA9PT0gJ3QnO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufSkoKTtcblxuLyoqXG4gKiAxLiBEZWFsIHdpdGggU2FmYXJpIGNsb25pbmcgbmVzdGVkIDx0ZW1wbGF0ZT4gYnVnIGJ5XG4gKiAgICBtYW51YWxseSBjbG9uaW5nIGFsbCB0ZW1wbGF0ZSBpbnN0YW5jZXMuXG4gKiAyLiBEZWFsIHdpdGggSUUxMC8xMSB0ZXh0YXJlYSBwbGFjZWhvbGRlciBidWcgYnkgc2V0dGluZ1xuICogICAgdGhlIGNvcnJlY3QgdmFsdWUgYWZ0ZXIgY2xvbmluZy5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gbm9kZVxuICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIGNsb25lTm9kZShub2RlKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoIW5vZGUucXVlcnlTZWxlY3RvckFsbCkge1xuICAgIHJldHVybiBub2RlLmNsb25lTm9kZSgpO1xuICB9XG4gIHZhciByZXMgPSBub2RlLmNsb25lTm9kZSh0cnVlKTtcbiAgdmFyIGksIG9yaWdpbmFsLCBjbG9uZWQ7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaGFzQnJva2VuVGVtcGxhdGUpIHtcbiAgICB2YXIgdGVtcENsb25lID0gcmVzO1xuICAgIGlmIChpc1JlYWxUZW1wbGF0ZShub2RlKSkge1xuICAgICAgbm9kZSA9IG5vZGUuY29udGVudDtcbiAgICAgIHRlbXBDbG9uZSA9IHJlcy5jb250ZW50O1xuICAgIH1cbiAgICBvcmlnaW5hbCA9IG5vZGUucXVlcnlTZWxlY3RvckFsbCgndGVtcGxhdGUnKTtcbiAgICBpZiAob3JpZ2luYWwubGVuZ3RoKSB7XG4gICAgICBjbG9uZWQgPSB0ZW1wQ2xvbmUucXVlcnlTZWxlY3RvckFsbCgndGVtcGxhdGUnKTtcbiAgICAgIGkgPSBjbG9uZWQubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBjbG9uZWRbaV0ucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoY2xvbmVOb2RlKG9yaWdpbmFsW2ldKSwgY2xvbmVkW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChoYXNUZXh0YXJlYUNsb25lQnVnKSB7XG4gICAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgcmVzLnZhbHVlID0gbm9kZS52YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3JpZ2luYWwgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJyk7XG4gICAgICBpZiAob3JpZ2luYWwubGVuZ3RoKSB7XG4gICAgICAgIGNsb25lZCA9IHJlcy5xdWVyeVNlbGVjdG9yQWxsKCd0ZXh0YXJlYScpO1xuICAgICAgICBpID0gY2xvbmVkLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgIGNsb25lZFtpXS52YWx1ZSA9IG9yaWdpbmFsW2ldLnZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogUHJvY2VzcyB0aGUgdGVtcGxhdGUgb3B0aW9uIGFuZCBub3JtYWxpemVzIGl0IGludG8gYVxuICogYSBEb2N1bWVudEZyYWdtZW50IHRoYXQgY2FuIGJlIHVzZWQgYXMgYSBwYXJ0aWFsIG9yIGFcbiAqIGluc3RhbmNlIHRlbXBsYXRlLlxuICpcbiAqIEBwYXJhbSB7Kn0gdGVtcGxhdGVcbiAqICAgICAgICBQb3NzaWJsZSB2YWx1ZXMgaW5jbHVkZTpcbiAqICAgICAgICAtIERvY3VtZW50RnJhZ21lbnQgb2JqZWN0XG4gKiAgICAgICAgLSBOb2RlIG9iamVjdCBvZiB0eXBlIFRlbXBsYXRlXG4gKiAgICAgICAgLSBpZCBzZWxlY3RvcjogJyNzb21lLXRlbXBsYXRlLWlkJ1xuICogICAgICAgIC0gdGVtcGxhdGUgc3RyaW5nOiAnPGRpdj48c3Bhbj57e21zZ319PC9zcGFuPjwvZGl2PidcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hvdWxkQ2xvbmVcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcmF3XG4gKiAgICAgICAgaW5saW5lIEhUTUwgaW50ZXJwb2xhdGlvbi4gRG8gbm90IGNoZWNrIGZvciBpZFxuICogICAgICAgIHNlbGVjdG9yIGFuZCBrZWVwIHdoaXRlc3BhY2UgaW4gdGhlIHN0cmluZy5cbiAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR8dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlVGVtcGxhdGUodGVtcGxhdGUsIHNob3VsZENsb25lLCByYXcpIHtcbiAgdmFyIG5vZGUsIGZyYWc7XG5cbiAgLy8gaWYgdGhlIHRlbXBsYXRlIGlzIGFscmVhZHkgYSBkb2N1bWVudCBmcmFnbWVudCxcbiAgLy8gZG8gbm90aGluZ1xuICBpZiAoaXNGcmFnbWVudCh0ZW1wbGF0ZSkpIHtcbiAgICB0cmltTm9kZSh0ZW1wbGF0ZSk7XG4gICAgcmV0dXJuIHNob3VsZENsb25lID8gY2xvbmVOb2RlKHRlbXBsYXRlKSA6IHRlbXBsYXRlO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB0ZW1wbGF0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAvLyBpZCBzZWxlY3RvclxuICAgIGlmICghcmF3ICYmIHRlbXBsYXRlLmNoYXJBdCgwKSA9PT0gJyMnKSB7XG4gICAgICAvLyBpZCBzZWxlY3RvciBjYW4gYmUgY2FjaGVkIHRvb1xuICAgICAgZnJhZyA9IGlkU2VsZWN0b3JDYWNoZS5nZXQodGVtcGxhdGUpO1xuICAgICAgaWYgKCFmcmFnKSB7XG4gICAgICAgIG5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0ZW1wbGF0ZS5zbGljZSgxKSk7XG4gICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgZnJhZyA9IG5vZGVUb0ZyYWdtZW50KG5vZGUpO1xuICAgICAgICAgIC8vIHNhdmUgc2VsZWN0b3IgdG8gY2FjaGVcbiAgICAgICAgICBpZFNlbGVjdG9yQ2FjaGUucHV0KHRlbXBsYXRlLCBmcmFnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBub3JtYWwgc3RyaW5nIHRlbXBsYXRlXG4gICAgICBmcmFnID0gc3RyaW5nVG9GcmFnbWVudCh0ZW1wbGF0ZSwgcmF3KTtcbiAgICB9XG4gIH0gZWxzZSBpZiAodGVtcGxhdGUubm9kZVR5cGUpIHtcbiAgICAvLyBhIGRpcmVjdCBub2RlXG4gICAgZnJhZyA9IG5vZGVUb0ZyYWdtZW50KHRlbXBsYXRlKTtcbiAgfVxuXG4gIHJldHVybiBmcmFnICYmIHNob3VsZENsb25lID8gY2xvbmVOb2RlKGZyYWcpIDogZnJhZztcbn1cblxudmFyIHRlbXBsYXRlID0gT2JqZWN0LmZyZWV6ZSh7XG4gIGNsb25lTm9kZTogY2xvbmVOb2RlLFxuICBwYXJzZVRlbXBsYXRlOiBwYXJzZVRlbXBsYXRlXG59KTtcblxudmFyIGh0bWwgPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyBhIGNvbW1lbnQgbm9kZSBtZWFucyB0aGlzIGlzIGEgYmluZGluZyBmb3JcbiAgICAvLyB7e3sgaW5saW5lIHVuZXNjYXBlZCBodG1sIH19fVxuICAgIGlmICh0aGlzLmVsLm5vZGVUeXBlID09PSA4KSB7XG4gICAgICAvLyBob2xkIG5vZGVzXG4gICAgICB0aGlzLm5vZGVzID0gW107XG4gICAgICAvLyByZXBsYWNlIHRoZSBwbGFjZWhvbGRlciB3aXRoIHByb3BlciBhbmNob3JcbiAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWh0bWwnKTtcbiAgICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIHZhbHVlID0gX3RvU3RyaW5nKHZhbHVlKTtcbiAgICBpZiAodGhpcy5ub2Rlcykge1xuICAgICAgdGhpcy5zd2FwKHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbC5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgICB9XG4gIH0sXG5cbiAgc3dhcDogZnVuY3Rpb24gc3dhcCh2YWx1ZSkge1xuICAgIC8vIHJlbW92ZSBvbGQgbm9kZXNcbiAgICB2YXIgaSA9IHRoaXMubm9kZXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHJlbW92ZSh0aGlzLm5vZGVzW2ldKTtcbiAgICB9XG4gICAgLy8gY29udmVydCBuZXcgdmFsdWUgdG8gYSBmcmFnbWVudFxuICAgIC8vIGRvIG5vdCBhdHRlbXB0IHRvIHJldHJpZXZlIGZyb20gaWQgc2VsZWN0b3JcbiAgICB2YXIgZnJhZyA9IHBhcnNlVGVtcGxhdGUodmFsdWUsIHRydWUsIHRydWUpO1xuICAgIC8vIHNhdmUgYSByZWZlcmVuY2UgdG8gdGhlc2Ugbm9kZXMgc28gd2UgY2FuIHJlbW92ZSBsYXRlclxuICAgIHRoaXMubm9kZXMgPSB0b0FycmF5KGZyYWcuY2hpbGROb2Rlcyk7XG4gICAgYmVmb3JlKGZyYWcsIHRoaXMuYW5jaG9yKTtcbiAgfVxufTtcblxuLyoqXG4gKiBBYnN0cmFjdGlvbiBmb3IgYSBwYXJ0aWFsbHktY29tcGlsZWQgZnJhZ21lbnQuXG4gKiBDYW4gb3B0aW9uYWxseSBjb21waWxlIGNvbnRlbnQgd2l0aCBhIGNoaWxkIHNjb3BlLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGxpbmtlclxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcbiAqIEBwYXJhbSB7VnVlfSBbaG9zdF1cbiAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG4gKiBAcGFyYW0ge0ZyYWdtZW50fSBbcGFyZW50RnJhZ11cbiAqL1xuZnVuY3Rpb24gRnJhZ21lbnQobGlua2VyLCB2bSwgZnJhZywgaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpIHtcbiAgdGhpcy5jaGlsZHJlbiA9IFtdO1xuICB0aGlzLmNoaWxkRnJhZ3MgPSBbXTtcbiAgdGhpcy52bSA9IHZtO1xuICB0aGlzLnNjb3BlID0gc2NvcGU7XG4gIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcbiAgdGhpcy5wYXJlbnRGcmFnID0gcGFyZW50RnJhZztcbiAgaWYgKHBhcmVudEZyYWcpIHtcbiAgICBwYXJlbnRGcmFnLmNoaWxkRnJhZ3MucHVzaCh0aGlzKTtcbiAgfVxuICB0aGlzLnVubGluayA9IGxpbmtlcih2bSwgZnJhZywgaG9zdCwgc2NvcGUsIHRoaXMpO1xuICB2YXIgc2luZ2xlID0gdGhpcy5zaW5nbGUgPSBmcmFnLmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICYmXG4gIC8vIGRvIG5vdCBnbyBzaW5nbGUgbW9kZSBpZiB0aGUgb25seSBub2RlIGlzIGFuIGFuY2hvclxuICAhZnJhZy5jaGlsZE5vZGVzWzBdLl9fdl9hbmNob3I7XG4gIGlmIChzaW5nbGUpIHtcbiAgICB0aGlzLm5vZGUgPSBmcmFnLmNoaWxkTm9kZXNbMF07XG4gICAgdGhpcy5iZWZvcmUgPSBzaW5nbGVCZWZvcmU7XG4gICAgdGhpcy5yZW1vdmUgPSBzaW5nbGVSZW1vdmU7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5ub2RlID0gY3JlYXRlQW5jaG9yKCdmcmFnbWVudC1zdGFydCcpO1xuICAgIHRoaXMuZW5kID0gY3JlYXRlQW5jaG9yKCdmcmFnbWVudC1lbmQnKTtcbiAgICB0aGlzLmZyYWcgPSBmcmFnO1xuICAgIHByZXBlbmQodGhpcy5ub2RlLCBmcmFnKTtcbiAgICBmcmFnLmFwcGVuZENoaWxkKHRoaXMuZW5kKTtcbiAgICB0aGlzLmJlZm9yZSA9IG11bHRpQmVmb3JlO1xuICAgIHRoaXMucmVtb3ZlID0gbXVsdGlSZW1vdmU7XG4gIH1cbiAgdGhpcy5ub2RlLl9fdl9mcmFnID0gdGhpcztcbn1cblxuLyoqXG4gKiBDYWxsIGF0dGFjaC9kZXRhY2ggZm9yIGFsbCBjb21wb25lbnRzIGNvbnRhaW5lZCB3aXRoaW5cbiAqIHRoaXMgZnJhZ21lbnQuIEFsc28gZG8gc28gcmVjdXJzaXZlbHkgZm9yIGFsbCBjaGlsZFxuICogZnJhZ21lbnRzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhvb2tcbiAqL1xuXG5GcmFnbWVudC5wcm90b3R5cGUuY2FsbEhvb2sgPSBmdW5jdGlvbiAoaG9vaykge1xuICB2YXIgaSwgbDtcbiAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB0aGlzLmNoaWxkRnJhZ3NbaV0uY2FsbEhvb2soaG9vayk7XG4gIH1cbiAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgaG9vayh0aGlzLmNoaWxkcmVuW2ldKTtcbiAgfVxufTtcblxuLyoqXG4gKiBJbnNlcnQgZnJhZ21lbnQgYmVmb3JlIHRhcmdldCwgc2luZ2xlIG5vZGUgdmVyc2lvblxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gKiBAcGFyYW0ge0Jvb2xlYW59IHdpdGhUcmFuc2l0aW9uXG4gKi9cblxuZnVuY3Rpb24gc2luZ2xlQmVmb3JlKHRhcmdldCwgd2l0aFRyYW5zaXRpb24pIHtcbiAgdGhpcy5pbnNlcnRlZCA9IHRydWU7XG4gIHZhciBtZXRob2QgPSB3aXRoVHJhbnNpdGlvbiAhPT0gZmFsc2UgPyBiZWZvcmVXaXRoVHJhbnNpdGlvbiA6IGJlZm9yZTtcbiAgbWV0aG9kKHRoaXMubm9kZSwgdGFyZ2V0LCB0aGlzLnZtKTtcbiAgaWYgKGluRG9jKHRoaXMubm9kZSkpIHtcbiAgICB0aGlzLmNhbGxIb29rKGF0dGFjaCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgZnJhZ21lbnQsIHNpbmdsZSBub2RlIHZlcnNpb25cbiAqL1xuXG5mdW5jdGlvbiBzaW5nbGVSZW1vdmUoKSB7XG4gIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcbiAgdmFyIHNob3VsZENhbGxSZW1vdmUgPSBpbkRvYyh0aGlzLm5vZGUpO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHRoaXMuYmVmb3JlUmVtb3ZlKCk7XG4gIHJlbW92ZVdpdGhUcmFuc2l0aW9uKHRoaXMubm9kZSwgdGhpcy52bSwgZnVuY3Rpb24gKCkge1xuICAgIGlmIChzaG91bGRDYWxsUmVtb3ZlKSB7XG4gICAgICBzZWxmLmNhbGxIb29rKGRldGFjaCk7XG4gICAgfVxuICAgIHNlbGYuZGVzdHJveSgpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBJbnNlcnQgZnJhZ21lbnQgYmVmb3JlIHRhcmdldCwgbXVsdGktbm9kZXMgdmVyc2lvblxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gKiBAcGFyYW0ge0Jvb2xlYW59IHdpdGhUcmFuc2l0aW9uXG4gKi9cblxuZnVuY3Rpb24gbXVsdGlCZWZvcmUodGFyZ2V0LCB3aXRoVHJhbnNpdGlvbikge1xuICB0aGlzLmluc2VydGVkID0gdHJ1ZTtcbiAgdmFyIHZtID0gdGhpcy52bTtcbiAgdmFyIG1ldGhvZCA9IHdpdGhUcmFuc2l0aW9uICE9PSBmYWxzZSA/IGJlZm9yZVdpdGhUcmFuc2l0aW9uIDogYmVmb3JlO1xuICBtYXBOb2RlUmFuZ2UodGhpcy5ub2RlLCB0aGlzLmVuZCwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICBtZXRob2Qobm9kZSwgdGFyZ2V0LCB2bSk7XG4gIH0pO1xuICBpZiAoaW5Eb2ModGhpcy5ub2RlKSkge1xuICAgIHRoaXMuY2FsbEhvb2soYXR0YWNoKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBmcmFnbWVudCwgbXVsdGktbm9kZXMgdmVyc2lvblxuICovXG5cbmZ1bmN0aW9uIG11bHRpUmVtb3ZlKCkge1xuICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIHNob3VsZENhbGxSZW1vdmUgPSBpbkRvYyh0aGlzLm5vZGUpO1xuICB0aGlzLmJlZm9yZVJlbW92ZSgpO1xuICByZW1vdmVOb2RlUmFuZ2UodGhpcy5ub2RlLCB0aGlzLmVuZCwgdGhpcy52bSwgdGhpcy5mcmFnLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHNob3VsZENhbGxSZW1vdmUpIHtcbiAgICAgIHNlbGYuY2FsbEhvb2soZGV0YWNoKTtcbiAgICB9XG4gICAgc2VsZi5kZXN0cm95KCk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFByZXBhcmUgdGhlIGZyYWdtZW50IGZvciByZW1vdmFsLlxuICovXG5cbkZyYWdtZW50LnByb3RvdHlwZS5iZWZvcmVSZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBpLCBsO1xuICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIC8vIGNhbGwgdGhlIHNhbWUgbWV0aG9kIHJlY3Vyc2l2ZWx5IG9uIGNoaWxkXG4gICAgLy8gZnJhZ21lbnRzLCBkZXB0aC1maXJzdFxuICAgIHRoaXMuY2hpbGRGcmFnc1tpXS5iZWZvcmVSZW1vdmUoZmFsc2UpO1xuICB9XG4gIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIC8vIENhbGwgZGVzdHJveSBmb3IgYWxsIGNvbnRhaW5lZCBpbnN0YW5jZXMsXG4gICAgLy8gd2l0aCByZW1vdmU6ZmFsc2UgYW5kIGRlZmVyOnRydWUuXG4gICAgLy8gRGVmZXIgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugd2UgbmVlZCB0b1xuICAgIC8vIGtlZXAgdGhlIGNoaWxkcmVuIHRvIGNhbGwgZGV0YWNoIGhvb2tzXG4gICAgLy8gb24gdGhlbS5cbiAgICB0aGlzLmNoaWxkcmVuW2ldLiRkZXN0cm95KGZhbHNlLCB0cnVlKTtcbiAgfVxuICB2YXIgZGlycyA9IHRoaXMudW5saW5rLmRpcnM7XG4gIGZvciAoaSA9IDAsIGwgPSBkaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIC8vIGRpc2FibGUgdGhlIHdhdGNoZXJzIG9uIGFsbCB0aGUgZGlyZWN0aXZlc1xuICAgIC8vIHNvIHRoYXQgdGhlIHJlbmRlcmVkIGNvbnRlbnQgc3RheXMgdGhlIHNhbWVcbiAgICAvLyBkdXJpbmcgcmVtb3ZhbC5cbiAgICBkaXJzW2ldLl93YXRjaGVyICYmIGRpcnNbaV0uX3dhdGNoZXIudGVhcmRvd24oKTtcbiAgfVxufTtcblxuLyoqXG4gKiBEZXN0cm95IHRoZSBmcmFnbWVudC5cbiAqL1xuXG5GcmFnbWVudC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMucGFyZW50RnJhZykge1xuICAgIHRoaXMucGFyZW50RnJhZy5jaGlsZEZyYWdzLiRyZW1vdmUodGhpcyk7XG4gIH1cbiAgdGhpcy5ub2RlLl9fdl9mcmFnID0gbnVsbDtcbiAgdGhpcy51bmxpbmsoKTtcbn07XG5cbi8qKlxuICogQ2FsbCBhdHRhY2ggaG9vayBmb3IgYSBWdWUgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHtWdWV9IGNoaWxkXG4gKi9cblxuZnVuY3Rpb24gYXR0YWNoKGNoaWxkKSB7XG4gIGlmICghY2hpbGQuX2lzQXR0YWNoZWQgJiYgaW5Eb2MoY2hpbGQuJGVsKSkge1xuICAgIGNoaWxkLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcbiAgfVxufVxuXG4vKipcbiAqIENhbGwgZGV0YWNoIGhvb2sgZm9yIGEgVnVlIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuICovXG5cbmZ1bmN0aW9uIGRldGFjaChjaGlsZCkge1xuICBpZiAoY2hpbGQuX2lzQXR0YWNoZWQgJiYgIWluRG9jKGNoaWxkLiRlbCkpIHtcbiAgICBjaGlsZC5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XG4gIH1cbn1cblxudmFyIGxpbmtlckNhY2hlID0gbmV3IENhY2hlKDUwMDApO1xuXG4vKipcbiAqIEEgZmFjdG9yeSB0aGF0IGNhbiBiZSB1c2VkIHRvIGNyZWF0ZSBpbnN0YW5jZXMgb2YgYVxuICogZnJhZ21lbnQuIENhY2hlcyB0aGUgY29tcGlsZWQgbGlua2VyIGlmIHBvc3NpYmxlLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtFbGVtZW50fFN0cmluZ30gZWxcbiAqL1xuZnVuY3Rpb24gRnJhZ21lbnRGYWN0b3J5KHZtLCBlbCkge1xuICB0aGlzLnZtID0gdm07XG4gIHZhciB0ZW1wbGF0ZTtcbiAgdmFyIGlzU3RyaW5nID0gdHlwZW9mIGVsID09PSAnc3RyaW5nJztcbiAgaWYgKGlzU3RyaW5nIHx8IGlzVGVtcGxhdGUoZWwpICYmICFlbC5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuICAgIHRlbXBsYXRlID0gcGFyc2VUZW1wbGF0ZShlbCwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgdGVtcGxhdGUuYXBwZW5kQ2hpbGQoZWwpO1xuICB9XG4gIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgLy8gbGlua2VyIGNhbiBiZSBjYWNoZWQsIGJ1dCBvbmx5IGZvciBjb21wb25lbnRzXG4gIHZhciBsaW5rZXI7XG4gIHZhciBjaWQgPSB2bS5jb25zdHJ1Y3Rvci5jaWQ7XG4gIGlmIChjaWQgPiAwKSB7XG4gICAgdmFyIGNhY2hlSWQgPSBjaWQgKyAoaXNTdHJpbmcgPyBlbCA6IGdldE91dGVySFRNTChlbCkpO1xuICAgIGxpbmtlciA9IGxpbmtlckNhY2hlLmdldChjYWNoZUlkKTtcbiAgICBpZiAoIWxpbmtlcikge1xuICAgICAgbGlua2VyID0gY29tcGlsZSh0ZW1wbGF0ZSwgdm0uJG9wdGlvbnMsIHRydWUpO1xuICAgICAgbGlua2VyQ2FjaGUucHV0KGNhY2hlSWQsIGxpbmtlcik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxpbmtlciA9IGNvbXBpbGUodGVtcGxhdGUsIHZtLiRvcHRpb25zLCB0cnVlKTtcbiAgfVxuICB0aGlzLmxpbmtlciA9IGxpbmtlcjtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBmcmFnbWVudCBpbnN0YW5jZSB3aXRoIGdpdmVuIGhvc3QgYW5kIHNjb3BlLlxuICpcbiAqIEBwYXJhbSB7VnVlfSBob3N0XG4gKiBAcGFyYW0ge09iamVjdH0gc2NvcGVcbiAqIEBwYXJhbSB7RnJhZ21lbnR9IHBhcmVudEZyYWdcbiAqL1xuXG5GcmFnbWVudEZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChob3N0LCBzY29wZSwgcGFyZW50RnJhZykge1xuICB2YXIgZnJhZyA9IGNsb25lTm9kZSh0aGlzLnRlbXBsYXRlKTtcbiAgcmV0dXJuIG5ldyBGcmFnbWVudCh0aGlzLmxpbmtlciwgdGhpcy52bSwgZnJhZywgaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpO1xufTtcblxudmFyIE9OID0gNzAwO1xudmFyIE1PREVMID0gODAwO1xudmFyIEJJTkQgPSA4NTA7XG52YXIgVFJBTlNJVElPTiA9IDExMDA7XG52YXIgRUwgPSAxNTAwO1xudmFyIENPTVBPTkVOVCA9IDE1MDA7XG52YXIgUEFSVElBTCA9IDE3NTA7XG52YXIgSUYgPSAyMTAwO1xudmFyIEZPUiA9IDIyMDA7XG52YXIgU0xPVCA9IDIzMDA7XG5cbnZhciB1aWQkMyA9IDA7XG5cbnZhciB2Rm9yID0ge1xuXG4gIHByaW9yaXR5OiBGT1IsXG4gIHRlcm1pbmFsOiB0cnVlLFxuXG4gIHBhcmFtczogWyd0cmFjay1ieScsICdzdGFnZ2VyJywgJ2VudGVyLXN0YWdnZXInLCAnbGVhdmUtc3RhZ2dlciddLFxuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gc3VwcG9ydCBcIml0ZW0gaW4vb2YgaXRlbXNcIiBzeW50YXhcbiAgICB2YXIgaW5NYXRjaCA9IHRoaXMuZXhwcmVzc2lvbi5tYXRjaCgvKC4qKSAoPzppbnxvZikgKC4qKS8pO1xuICAgIGlmIChpbk1hdGNoKSB7XG4gICAgICB2YXIgaXRNYXRjaCA9IGluTWF0Y2hbMV0ubWF0Y2goL1xcKCguKiksKC4qKVxcKS8pO1xuICAgICAgaWYgKGl0TWF0Y2gpIHtcbiAgICAgICAgdGhpcy5pdGVyYXRvciA9IGl0TWF0Y2hbMV0udHJpbSgpO1xuICAgICAgICB0aGlzLmFsaWFzID0gaXRNYXRjaFsyXS50cmltKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmFsaWFzID0gaW5NYXRjaFsxXS50cmltKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmV4cHJlc3Npb24gPSBpbk1hdGNoWzJdO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5hbGlhcykge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHYtZm9yIGV4cHJlc3Npb24gXCInICsgdGhpcy5kZXNjcmlwdG9yLnJhdyArICdcIjogJyArICdhbGlhcyBpcyByZXF1aXJlZC4nLCB0aGlzLnZtKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyB1aWQgYXMgYSBjYWNoZSBpZGVudGlmaWVyXG4gICAgdGhpcy5pZCA9ICdfX3YtZm9yX18nICsgKyt1aWQkMztcblxuICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgYW4gb3B0aW9uIGxpc3QsXG4gICAgLy8gc28gdGhhdCB3ZSBrbm93IGlmIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSA8c2VsZWN0PidzXG4gICAgLy8gdi1tb2RlbCB3aGVuIHRoZSBvcHRpb24gbGlzdCBoYXMgY2hhbmdlZC5cbiAgICAvLyBiZWNhdXNlIHYtbW9kZWwgaGFzIGEgbG93ZXIgcHJpb3JpdHkgdGhhbiB2LWZvcixcbiAgICAvLyB0aGUgdi1tb2RlbCBpcyBub3QgYm91bmQgaGVyZSB5ZXQsIHNvIHdlIGhhdmUgdG9cbiAgICAvLyByZXRyaXZlIGl0IGluIHRoZSBhY3R1YWwgdXBkYXRlTW9kZWwoKSBmdW5jdGlvbi5cbiAgICB2YXIgdGFnID0gdGhpcy5lbC50YWdOYW1lO1xuICAgIHRoaXMuaXNPcHRpb24gPSAodGFnID09PSAnT1BUSU9OJyB8fCB0YWcgPT09ICdPUFRHUk9VUCcpICYmIHRoaXMuZWwucGFyZW50Tm9kZS50YWdOYW1lID09PSAnU0VMRUNUJztcblxuICAgIC8vIHNldHVwIGFuY2hvciBub2Rlc1xuICAgIHRoaXMuc3RhcnQgPSBjcmVhdGVBbmNob3IoJ3YtZm9yLXN0YXJ0Jyk7XG4gICAgdGhpcy5lbmQgPSBjcmVhdGVBbmNob3IoJ3YtZm9yLWVuZCcpO1xuICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5lbmQpO1xuICAgIGJlZm9yZSh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7XG5cbiAgICAvLyBjYWNoZVxuICAgIHRoaXMuY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgLy8gZnJhZ21lbnQgZmFjdG9yeVxuICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgdGhpcy5lbCk7XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoZGF0YSkge1xuICAgIHRoaXMuZGlmZihkYXRhKTtcbiAgICB0aGlzLnVwZGF0ZVJlZigpO1xuICAgIHRoaXMudXBkYXRlTW9kZWwoKTtcbiAgfSxcblxuICAvKipcbiAgICogRGlmZiwgYmFzZWQgb24gbmV3IGRhdGEgYW5kIG9sZCBkYXRhLCBkZXRlcm1pbmUgdGhlXG4gICAqIG1pbmltdW0gYW1vdW50IG9mIERPTSBtYW5pcHVsYXRpb25zIG5lZWRlZCB0byBtYWtlIHRoZVxuICAgKiBET00gcmVmbGVjdCB0aGUgbmV3IGRhdGEgQXJyYXkuXG4gICAqXG4gICAqIFRoZSBhbGdvcml0aG0gZGlmZnMgdGhlIG5ldyBkYXRhIEFycmF5IGJ5IHN0b3JpbmcgYVxuICAgKiBoaWRkZW4gcmVmZXJlbmNlIHRvIGFuIG93bmVyIHZtIGluc3RhbmNlIG9uIHByZXZpb3VzbHlcbiAgICogc2VlbiBkYXRhLiBUaGlzIGFsbG93cyB1cyB0byBhY2hpZXZlIE8obikgd2hpY2ggaXNcbiAgICogYmV0dGVyIHRoYW4gYSBsZXZlbnNodGVpbiBkaXN0YW5jZSBiYXNlZCBhbGdvcml0aG0sXG4gICAqIHdoaWNoIGlzIE8obSAqIG4pLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBkYXRhXG4gICAqL1xuXG4gIGRpZmY6IGZ1bmN0aW9uIGRpZmYoZGF0YSkge1xuICAgIC8vIGNoZWNrIGlmIHRoZSBBcnJheSB3YXMgY29udmVydGVkIGZyb20gYW4gT2JqZWN0XG4gICAgdmFyIGl0ZW0gPSBkYXRhWzBdO1xuICAgIHZhciBjb252ZXJ0ZWRGcm9tT2JqZWN0ID0gdGhpcy5mcm9tT2JqZWN0ID0gaXNPYmplY3QoaXRlbSkgJiYgaGFzT3duKGl0ZW0sICcka2V5JykgJiYgaGFzT3duKGl0ZW0sICckdmFsdWUnKTtcblxuICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcbiAgICB2YXIgb2xkRnJhZ3MgPSB0aGlzLmZyYWdzO1xuICAgIHZhciBmcmFncyA9IHRoaXMuZnJhZ3MgPSBuZXcgQXJyYXkoZGF0YS5sZW5ndGgpO1xuICAgIHZhciBhbGlhcyA9IHRoaXMuYWxpYXM7XG4gICAgdmFyIGl0ZXJhdG9yID0gdGhpcy5pdGVyYXRvcjtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLnN0YXJ0O1xuICAgIHZhciBlbmQgPSB0aGlzLmVuZDtcbiAgICB2YXIgaW5Eb2N1bWVudCA9IGluRG9jKHN0YXJ0KTtcbiAgICB2YXIgaW5pdCA9ICFvbGRGcmFncztcbiAgICB2YXIgaSwgbCwgZnJhZywga2V5LCB2YWx1ZSwgcHJpbWl0aXZlO1xuXG4gICAgLy8gRmlyc3QgcGFzcywgZ28gdGhyb3VnaCB0aGUgbmV3IEFycmF5IGFuZCBmaWxsIHVwXG4gICAgLy8gdGhlIG5ldyBmcmFncyBhcnJheS4gSWYgYSBwaWVjZSBvZiBkYXRhIGhhcyBhIGNhY2hlZFxuICAgIC8vIGluc3RhbmNlIGZvciBpdCwgd2UgcmV1c2UgaXQuIE90aGVyd2lzZSBidWlsZCBhIG5ld1xuICAgIC8vIGluc3RhbmNlLlxuICAgIGZvciAoaSA9IDAsIGwgPSBkYXRhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgaXRlbSA9IGRhdGFbaV07XG4gICAgICBrZXkgPSBjb252ZXJ0ZWRGcm9tT2JqZWN0ID8gaXRlbS4ka2V5IDogbnVsbDtcbiAgICAgIHZhbHVlID0gY29udmVydGVkRnJvbU9iamVjdCA/IGl0ZW0uJHZhbHVlIDogaXRlbTtcbiAgICAgIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG4gICAgICBmcmFnID0gIWluaXQgJiYgdGhpcy5nZXRDYWNoZWRGcmFnKHZhbHVlLCBpLCBrZXkpO1xuICAgICAgaWYgKGZyYWcpIHtcbiAgICAgICAgLy8gcmV1c2FibGUgZnJhZ21lbnRcbiAgICAgICAgZnJhZy5yZXVzZWQgPSB0cnVlO1xuICAgICAgICAvLyB1cGRhdGUgJGluZGV4XG4gICAgICAgIGZyYWcuc2NvcGUuJGluZGV4ID0gaTtcbiAgICAgICAgLy8gdXBkYXRlICRrZXlcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgIGZyYWcuc2NvcGUuJGtleSA9IGtleTtcbiAgICAgICAgfVxuICAgICAgICAvLyB1cGRhdGUgaXRlcmF0b3JcbiAgICAgICAgaWYgKGl0ZXJhdG9yKSB7XG4gICAgICAgICAgZnJhZy5zY29wZVtpdGVyYXRvcl0gPSBrZXkgIT09IG51bGwgPyBrZXkgOiBpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHVwZGF0ZSBkYXRhIGZvciB0cmFjay1ieSwgb2JqZWN0IHJlcGVhdCAmXG4gICAgICAgIC8vIHByaW1pdGl2ZSB2YWx1ZXMuXG4gICAgICAgIGlmICh0cmFja0J5S2V5IHx8IGNvbnZlcnRlZEZyb21PYmplY3QgfHwgcHJpbWl0aXZlKSB7XG4gICAgICAgICAgd2l0aG91dENvbnZlcnNpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnJhZy5zY29wZVthbGlhc10gPSB2YWx1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbmV3IGlzbnRhbmNlXG4gICAgICAgIGZyYWcgPSB0aGlzLmNyZWF0ZSh2YWx1ZSwgYWxpYXMsIGksIGtleSk7XG4gICAgICAgIGZyYWcuZnJlc2ggPSAhaW5pdDtcbiAgICAgIH1cbiAgICAgIGZyYWdzW2ldID0gZnJhZztcbiAgICAgIGlmIChpbml0KSB7XG4gICAgICAgIGZyYWcuYmVmb3JlKGVuZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gd2UncmUgZG9uZSBmb3IgdGhlIGluaXRpYWwgcmVuZGVyLlxuICAgIGlmIChpbml0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU2Vjb25kIHBhc3MsIGdvIHRocm91Z2ggdGhlIG9sZCBmcmFnbWVudHMgYW5kXG4gICAgLy8gZGVzdHJveSB0aG9zZSB3aG8gYXJlIG5vdCByZXVzZWQgKGFuZCByZW1vdmUgdGhlbVxuICAgIC8vIGZyb20gY2FjaGUpXG4gICAgdmFyIHJlbW92YWxJbmRleCA9IDA7XG4gICAgdmFyIHRvdGFsUmVtb3ZlZCA9IG9sZEZyYWdzLmxlbmd0aCAtIGZyYWdzLmxlbmd0aDtcbiAgICAvLyB3aGVuIHJlbW92aW5nIGEgbGFyZ2UgbnVtYmVyIG9mIGZyYWdtZW50cywgd2F0Y2hlciByZW1vdmFsXG4gICAgLy8gdHVybnMgb3V0IHRvIGJlIGEgcGVyZiBib3R0bGVuZWNrLCBzbyB3ZSBiYXRjaCB0aGUgd2F0Y2hlclxuICAgIC8vIHJlbW92YWxzIGludG8gYSBzaW5nbGUgZmlsdGVyIGNhbGwhXG4gICAgdGhpcy52bS5fdkZvclJlbW92aW5nID0gdHJ1ZTtcbiAgICBmb3IgKGkgPSAwLCBsID0gb2xkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmcmFnID0gb2xkRnJhZ3NbaV07XG4gICAgICBpZiAoIWZyYWcucmV1c2VkKSB7XG4gICAgICAgIHRoaXMuZGVsZXRlQ2FjaGVkRnJhZyhmcmFnKTtcbiAgICAgICAgdGhpcy5yZW1vdmUoZnJhZywgcmVtb3ZhbEluZGV4KyssIHRvdGFsUmVtb3ZlZCwgaW5Eb2N1bWVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMudm0uX3ZGb3JSZW1vdmluZyA9IGZhbHNlO1xuICAgIGlmIChyZW1vdmFsSW5kZXgpIHtcbiAgICAgIHRoaXMudm0uX3dhdGNoZXJzID0gdGhpcy52bS5fd2F0Y2hlcnMuZmlsdGVyKGZ1bmN0aW9uICh3KSB7XG4gICAgICAgIHJldHVybiB3LmFjdGl2ZTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEZpbmFsIHBhc3MsIG1vdmUvaW5zZXJ0IG5ldyBmcmFnbWVudHMgaW50byB0aGVcbiAgICAvLyByaWdodCBwbGFjZS5cbiAgICB2YXIgdGFyZ2V0UHJldiwgcHJldkVsLCBjdXJyZW50UHJldjtcbiAgICB2YXIgaW5zZXJ0aW9uSW5kZXggPSAwO1xuICAgIGZvciAoaSA9IDAsIGwgPSBmcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGZyYWcgPSBmcmFnc1tpXTtcbiAgICAgIC8vIHRoaXMgaXMgdGhlIGZyYWcgdGhhdCB3ZSBzaG91bGQgYmUgYWZ0ZXJcbiAgICAgIHRhcmdldFByZXYgPSBmcmFnc1tpIC0gMV07XG4gICAgICBwcmV2RWwgPSB0YXJnZXRQcmV2ID8gdGFyZ2V0UHJldi5zdGFnZ2VyQ2IgPyB0YXJnZXRQcmV2LnN0YWdnZXJBbmNob3IgOiB0YXJnZXRQcmV2LmVuZCB8fCB0YXJnZXRQcmV2Lm5vZGUgOiBzdGFydDtcbiAgICAgIGlmIChmcmFnLnJldXNlZCAmJiAhZnJhZy5zdGFnZ2VyQ2IpIHtcbiAgICAgICAgY3VycmVudFByZXYgPSBmaW5kUHJldkZyYWcoZnJhZywgc3RhcnQsIHRoaXMuaWQpO1xuICAgICAgICBpZiAoY3VycmVudFByZXYgIT09IHRhcmdldFByZXYgJiYgKCFjdXJyZW50UHJldiB8fFxuICAgICAgICAvLyBvcHRpbWl6YXRpb24gZm9yIG1vdmluZyBhIHNpbmdsZSBpdGVtLlxuICAgICAgICAvLyB0aGFua3MgdG8gc3VnZ2VzdGlvbnMgYnkgQGxpdm9yYXMgaW4gIzE4MDdcbiAgICAgICAgZmluZFByZXZGcmFnKGN1cnJlbnRQcmV2LCBzdGFydCwgdGhpcy5pZCkgIT09IHRhcmdldFByZXYpKSB7XG4gICAgICAgICAgdGhpcy5tb3ZlKGZyYWcsIHByZXZFbCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG5ldyBpbnN0YW5jZSwgb3Igc3RpbGwgaW4gc3RhZ2dlci5cbiAgICAgICAgLy8gaW5zZXJ0IHdpdGggdXBkYXRlZCBzdGFnZ2VyIGluZGV4LlxuICAgICAgICB0aGlzLmluc2VydChmcmFnLCBpbnNlcnRpb25JbmRleCsrLCBwcmV2RWwsIGluRG9jdW1lbnQpO1xuICAgICAgfVxuICAgICAgZnJhZy5yZXVzZWQgPSBmcmFnLmZyZXNoID0gZmFsc2U7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgZnJhZ21lbnQgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFsaWFzXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge1N0cmluZ30gW2tleV1cbiAgICogQHJldHVybiB7RnJhZ21lbnR9XG4gICAqL1xuXG4gIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlKHZhbHVlLCBhbGlhcywgaW5kZXgsIGtleSkge1xuICAgIHZhciBob3N0ID0gdGhpcy5faG9zdDtcbiAgICAvLyBjcmVhdGUgaXRlcmF0aW9uIHNjb3BlXG4gICAgdmFyIHBhcmVudFNjb3BlID0gdGhpcy5fc2NvcGUgfHwgdGhpcy52bTtcbiAgICB2YXIgc2NvcGUgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlKTtcbiAgICAvLyByZWYgaG9sZGVyIGZvciB0aGUgc2NvcGVcbiAgICBzY29wZS4kcmVmcyA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUuJHJlZnMpO1xuICAgIHNjb3BlLiRlbHMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlLiRlbHMpO1xuICAgIC8vIG1ha2Ugc3VyZSBwb2ludCAkcGFyZW50IHRvIHBhcmVudCBzY29wZVxuICAgIHNjb3BlLiRwYXJlbnQgPSBwYXJlbnRTY29wZTtcbiAgICAvLyBmb3IgdHdvLXdheSBiaW5kaW5nIG9uIGFsaWFzXG4gICAgc2NvcGUuJGZvckNvbnRleHQgPSB0aGlzO1xuICAgIC8vIGRlZmluZSBzY29wZSBwcm9wZXJ0aWVzXG4gICAgLy8gaW1wb3J0YW50OiBkZWZpbmUgdGhlIHNjb3BlIGFsaWFzIHdpdGhvdXQgZm9yY2VkIGNvbnZlcnNpb25cbiAgICAvLyBzbyB0aGF0IGZyb3plbiBkYXRhIHN0cnVjdHVyZXMgcmVtYWluIG5vbi1yZWFjdGl2ZS5cbiAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG4gICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgYWxpYXMsIHZhbHVlKTtcbiAgICB9KTtcbiAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgJyRpbmRleCcsIGluZGV4KTtcbiAgICBpZiAoa2V5KSB7XG4gICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgJyRrZXknLCBrZXkpO1xuICAgIH0gZWxzZSBpZiAoc2NvcGUuJGtleSkge1xuICAgICAgLy8gYXZvaWQgYWNjaWRlbnRhbCBmYWxsYmFja1xuICAgICAgZGVmKHNjb3BlLCAnJGtleScsIG51bGwpO1xuICAgIH1cbiAgICBpZiAodGhpcy5pdGVyYXRvcikge1xuICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsIHRoaXMuaXRlcmF0b3IsIGtleSAhPT0gbnVsbCA/IGtleSA6IGluZGV4KTtcbiAgICB9XG4gICAgdmFyIGZyYWcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKGhvc3QsIHNjb3BlLCB0aGlzLl9mcmFnKTtcbiAgICBmcmFnLmZvcklkID0gdGhpcy5pZDtcbiAgICB0aGlzLmNhY2hlRnJhZyh2YWx1ZSwgZnJhZywgaW5kZXgsIGtleSk7XG4gICAgcmV0dXJuIGZyYWc7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgdi1yZWYgb24gb3duZXIgdm0uXG4gICAqL1xuXG4gIHVwZGF0ZVJlZjogZnVuY3Rpb24gdXBkYXRlUmVmKCkge1xuICAgIHZhciByZWYgPSB0aGlzLmRlc2NyaXB0b3IucmVmO1xuICAgIGlmICghcmVmKSByZXR1cm47XG4gICAgdmFyIGhhc2ggPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHJlZnM7XG4gICAgdmFyIHJlZnM7XG4gICAgaWYgKCF0aGlzLmZyb21PYmplY3QpIHtcbiAgICAgIHJlZnMgPSB0aGlzLmZyYWdzLm1hcChmaW5kVm1Gcm9tRnJhZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlZnMgPSB7fTtcbiAgICAgIHRoaXMuZnJhZ3MuZm9yRWFjaChmdW5jdGlvbiAoZnJhZykge1xuICAgICAgICByZWZzW2ZyYWcuc2NvcGUuJGtleV0gPSBmaW5kVm1Gcm9tRnJhZyhmcmFnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBoYXNoW3JlZl0gPSByZWZzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBGb3Igb3B0aW9uIGxpc3RzLCB1cGRhdGUgdGhlIGNvbnRhaW5pbmcgdi1tb2RlbCBvblxuICAgKiBwYXJlbnQgPHNlbGVjdD4uXG4gICAqL1xuXG4gIHVwZGF0ZU1vZGVsOiBmdW5jdGlvbiB1cGRhdGVNb2RlbCgpIHtcbiAgICBpZiAodGhpcy5pc09wdGlvbikge1xuICAgICAgdmFyIHBhcmVudCA9IHRoaXMuc3RhcnQucGFyZW50Tm9kZTtcbiAgICAgIHZhciBtb2RlbCA9IHBhcmVudCAmJiBwYXJlbnQuX192X21vZGVsO1xuICAgICAgaWYgKG1vZGVsKSB7XG4gICAgICAgIG1vZGVsLmZvcmNlVXBkYXRlKCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBJbnNlcnQgYSBmcmFnbWVudC4gSGFuZGxlcyBzdGFnZ2VyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge05vZGV9IHByZXZFbFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGluRG9jdW1lbnRcbiAgICovXG5cbiAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoZnJhZywgaW5kZXgsIHByZXZFbCwgaW5Eb2N1bWVudCkge1xuICAgIGlmIChmcmFnLnN0YWdnZXJDYikge1xuICAgICAgZnJhZy5zdGFnZ2VyQ2IuY2FuY2VsKCk7XG4gICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG4gICAgfVxuICAgIHZhciBzdGFnZ2VyQW1vdW50ID0gdGhpcy5nZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCBudWxsLCAnZW50ZXInKTtcbiAgICBpZiAoaW5Eb2N1bWVudCAmJiBzdGFnZ2VyQW1vdW50KSB7XG4gICAgICAvLyBjcmVhdGUgYW4gYW5jaG9yIGFuZCBpbnNlcnQgaXQgc3luY2hyb25vdXNseSxcbiAgICAgIC8vIHNvIHRoYXQgd2UgY2FuIHJlc29sdmUgdGhlIGNvcnJlY3Qgb3JkZXIgd2l0aG91dFxuICAgICAgLy8gd29ycnlpbmcgYWJvdXQgc29tZSBlbGVtZW50cyBub3QgaW5zZXJ0ZWQgeWV0XG4gICAgICB2YXIgYW5jaG9yID0gZnJhZy5zdGFnZ2VyQW5jaG9yO1xuICAgICAgaWYgKCFhbmNob3IpIHtcbiAgICAgICAgYW5jaG9yID0gZnJhZy5zdGFnZ2VyQW5jaG9yID0gY3JlYXRlQW5jaG9yKCdzdGFnZ2VyLWFuY2hvcicpO1xuICAgICAgICBhbmNob3IuX192X2ZyYWcgPSBmcmFnO1xuICAgICAgfVxuICAgICAgYWZ0ZXIoYW5jaG9yLCBwcmV2RWwpO1xuICAgICAgdmFyIG9wID0gZnJhZy5zdGFnZ2VyQ2IgPSBjYW5jZWxsYWJsZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcbiAgICAgICAgZnJhZy5iZWZvcmUoYW5jaG9yKTtcbiAgICAgICAgcmVtb3ZlKGFuY2hvcik7XG4gICAgICB9KTtcbiAgICAgIHNldFRpbWVvdXQob3AsIHN0YWdnZXJBbW91bnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdGFyZ2V0ID0gcHJldkVsLm5leHRTaWJsaW5nO1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAvLyByZXNldCBlbmQgYW5jaG9yIHBvc2l0aW9uIGluIGNhc2UgdGhlIHBvc2l0aW9uIHdhcyBtZXNzZWQgdXBcbiAgICAgICAgLy8gYnkgYW4gZXh0ZXJuYWwgZHJhZy1uLWRyb3AgbGlicmFyeS5cbiAgICAgICAgYWZ0ZXIodGhpcy5lbmQsIHByZXZFbCk7XG4gICAgICAgIHRhcmdldCA9IHRoaXMuZW5kO1xuICAgICAgfVxuICAgICAgZnJhZy5iZWZvcmUodGFyZ2V0KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIGZyYWdtZW50LiBIYW5kbGVzIHN0YWdnZXJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7TnVtYmVyfSB0b3RhbFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGluRG9jdW1lbnRcbiAgICovXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoZnJhZywgaW5kZXgsIHRvdGFsLCBpbkRvY3VtZW50KSB7XG4gICAgaWYgKGZyYWcuc3RhZ2dlckNiKSB7XG4gICAgICBmcmFnLnN0YWdnZXJDYi5jYW5jZWwoKTtcbiAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcbiAgICAgIC8vIGl0J3Mgbm90IHBvc3NpYmxlIGZvciB0aGUgc2FtZSBmcmFnIHRvIGJlIHJlbW92ZWRcbiAgICAgIC8vIHR3aWNlLCBzbyBpZiB3ZSBoYXZlIGEgcGVuZGluZyBzdGFnZ2VyIGNhbGxiYWNrLFxuICAgICAgLy8gaXQgbWVhbnMgdGhpcyBmcmFnIGlzIHF1ZXVlZCBmb3IgZW50ZXIgYnV0IHJlbW92ZWRcbiAgICAgIC8vIGJlZm9yZSBpdHMgdHJhbnNpdGlvbiBzdGFydGVkLiBTaW5jZSBpdCBpcyBhbHJlYWR5XG4gICAgICAvLyBkZXN0cm95ZWQsIHdlIGNhbiBqdXN0IGxlYXZlIGl0IGluIGRldGFjaGVkIHN0YXRlLlxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgc3RhZ2dlckFtb3VudCA9IHRoaXMuZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgdG90YWwsICdsZWF2ZScpO1xuICAgIGlmIChpbkRvY3VtZW50ICYmIHN0YWdnZXJBbW91bnQpIHtcbiAgICAgIHZhciBvcCA9IGZyYWcuc3RhZ2dlckNiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKCkge1xuICAgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG4gICAgICAgIGZyYWcucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICAgIHNldFRpbWVvdXQob3AsIHN0YWdnZXJBbW91bnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmcmFnLnJlbW92ZSgpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogTW92ZSBhIGZyYWdtZW50IHRvIGEgbmV3IHBvc2l0aW9uLlxuICAgKiBGb3JjZSBubyB0cmFuc2l0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7Tm9kZX0gcHJldkVsXG4gICAqL1xuXG4gIG1vdmU6IGZ1bmN0aW9uIG1vdmUoZnJhZywgcHJldkVsKSB7XG4gICAgLy8gZml4IGEgY29tbW9uIGlzc3VlIHdpdGggU29ydGFibGU6XG4gICAgLy8gaWYgcHJldkVsIGRvZXNuJ3QgaGF2ZSBuZXh0U2libGluZywgdGhpcyBtZWFucyBpdCdzXG4gICAgLy8gYmVlbiBkcmFnZ2VkIGFmdGVyIHRoZSBlbmQgYW5jaG9yLiBKdXN0IHJlLXBvc2l0aW9uXG4gICAgLy8gdGhlIGVuZCBhbmNob3IgdG8gdGhlIGVuZCBvZiB0aGUgY29udGFpbmVyLlxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghcHJldkVsLm5leHRTaWJsaW5nKSB7XG4gICAgICB0aGlzLmVuZC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMuZW5kKTtcbiAgICB9XG4gICAgZnJhZy5iZWZvcmUocHJldkVsLm5leHRTaWJsaW5nLCBmYWxzZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENhY2hlIGEgZnJhZ21lbnQgdXNpbmcgdHJhY2stYnkgb3IgdGhlIG9iamVjdCBrZXkuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtrZXldXG4gICAqL1xuXG4gIGNhY2hlRnJhZzogZnVuY3Rpb24gY2FjaGVGcmFnKHZhbHVlLCBmcmFnLCBpbmRleCwga2V5KSB7XG4gICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuICAgIHZhciBjYWNoZSA9IHRoaXMuY2FjaGU7XG4gICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG4gICAgdmFyIGlkO1xuICAgIGlmIChrZXkgfHwgdHJhY2tCeUtleSB8fCBwcmltaXRpdmUpIHtcbiAgICAgIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG4gICAgICBpZiAoIWNhY2hlW2lkXSkge1xuICAgICAgICBjYWNoZVtpZF0gPSBmcmFnO1xuICAgICAgfSBlbHNlIGlmICh0cmFja0J5S2V5ICE9PSAnJGluZGV4Jykge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlkID0gdGhpcy5pZDtcbiAgICAgIGlmIChoYXNPd24odmFsdWUsIGlkKSkge1xuICAgICAgICBpZiAodmFsdWVbaWRdID09PSBudWxsKSB7XG4gICAgICAgICAgdmFsdWVbaWRdID0gZnJhZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWx1ZSkpIHtcbiAgICAgICAgZGVmKHZhbHVlLCBpZCwgZnJhZyk7XG4gICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgd2FybignRnJvemVuIHYtZm9yIG9iamVjdHMgY2Fubm90IGJlIGF1dG9tYXRpY2FsbHkgdHJhY2tlZCwgbWFrZSBzdXJlIHRvICcgKyAncHJvdmlkZSBhIHRyYWNrLWJ5IGtleS4nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnJhZy5yYXcgPSB2YWx1ZTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IGEgY2FjaGVkIGZyYWdtZW50IGZyb20gdGhlIHZhbHVlL2luZGV4L2tleVxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAqIEByZXR1cm4ge0ZyYWdtZW50fVxuICAgKi9cblxuICBnZXRDYWNoZWRGcmFnOiBmdW5jdGlvbiBnZXRDYWNoZWRGcmFnKHZhbHVlLCBpbmRleCwga2V5KSB7XG4gICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuICAgIHZhciBmcmFnO1xuICAgIGlmIChrZXkgfHwgdHJhY2tCeUtleSB8fCBwcmltaXRpdmUpIHtcbiAgICAgIHZhciBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xuICAgICAgZnJhZyA9IHRoaXMuY2FjaGVbaWRdO1xuICAgIH0gZWxzZSB7XG4gICAgICBmcmFnID0gdmFsdWVbdGhpcy5pZF07XG4gICAgfVxuICAgIGlmIChmcmFnICYmIChmcmFnLnJldXNlZCB8fCBmcmFnLmZyZXNoKSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gZnJhZztcbiAgfSxcblxuICAvKipcbiAgICogRGVsZXRlIGEgZnJhZ21lbnQgZnJvbSBjYWNoZS5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKi9cblxuICBkZWxldGVDYWNoZWRGcmFnOiBmdW5jdGlvbiBkZWxldGVDYWNoZWRGcmFnKGZyYWcpIHtcbiAgICB2YXIgdmFsdWUgPSBmcmFnLnJhdztcbiAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG4gICAgdmFyIHNjb3BlID0gZnJhZy5zY29wZTtcbiAgICB2YXIgaW5kZXggPSBzY29wZS4kaW5kZXg7XG4gICAgLy8gZml4ICM5NDg6IGF2b2lkIGFjY2lkZW50YWxseSBmYWxsIHRocm91Z2ggdG9cbiAgICAvLyBhIHBhcmVudCByZXBlYXRlciB3aGljaCBoYXBwZW5zIHRvIGhhdmUgJGtleS5cbiAgICB2YXIga2V5ID0gaGFzT3duKHNjb3BlLCAnJGtleScpICYmIHNjb3BlLiRrZXk7XG4gICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG4gICAgaWYgKHRyYWNrQnlLZXkgfHwga2V5IHx8IHByaW1pdGl2ZSkge1xuICAgICAgdmFyIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG4gICAgICB0aGlzLmNhY2hlW2lkXSA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlW3RoaXMuaWRdID0gbnVsbDtcbiAgICAgIGZyYWcucmF3ID0gbnVsbDtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc3RhZ2dlciBhbW91bnQgZm9yIGFuIGluc2VydGlvbi9yZW1vdmFsLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge051bWJlcn0gdG90YWxcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAgICovXG5cbiAgZ2V0U3RhZ2dlcjogZnVuY3Rpb24gZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgdG90YWwsIHR5cGUpIHtcbiAgICB0eXBlID0gdHlwZSArICdTdGFnZ2VyJztcbiAgICB2YXIgdHJhbnMgPSBmcmFnLm5vZGUuX192X3RyYW5zO1xuICAgIHZhciBob29rcyA9IHRyYW5zICYmIHRyYW5zLmhvb2tzO1xuICAgIHZhciBob29rID0gaG9va3MgJiYgKGhvb2tzW3R5cGVdIHx8IGhvb2tzLnN0YWdnZXIpO1xuICAgIHJldHVybiBob29rID8gaG9vay5jYWxsKGZyYWcsIGluZGV4LCB0b3RhbCkgOiBpbmRleCAqIHBhcnNlSW50KHRoaXMucGFyYW1zW3R5cGVdIHx8IHRoaXMucGFyYW1zLnN0YWdnZXIsIDEwKTtcbiAgfSxcblxuICAvKipcbiAgICogUHJlLXByb2Nlc3MgdGhlIHZhbHVlIGJlZm9yZSBwaXBpbmcgaXQgdGhyb3VnaCB0aGVcbiAgICogZmlsdGVycy4gVGhpcyBpcyBwYXNzZWQgdG8gYW5kIGNhbGxlZCBieSB0aGUgd2F0Y2hlci5cbiAgICovXG5cbiAgX3ByZVByb2Nlc3M6IGZ1bmN0aW9uIF9wcmVQcm9jZXNzKHZhbHVlKSB7XG4gICAgLy8gcmVnYXJkbGVzcyBvZiB0eXBlLCBzdG9yZSB0aGUgdW4tZmlsdGVyZWQgcmF3IHZhbHVlLlxuICAgIHRoaXMucmF3VmFsdWUgPSB2YWx1ZTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBvc3QtcHJvY2VzcyB0aGUgdmFsdWUgYWZ0ZXIgaXQgaGFzIGJlZW4gcGlwZWQgdGhyb3VnaFxuICAgKiB0aGUgZmlsdGVycy4gVGhpcyBpcyBwYXNzZWQgdG8gYW5kIGNhbGxlZCBieSB0aGUgd2F0Y2hlci5cbiAgICpcbiAgICogSXQgaXMgbmVjZXNzYXJ5IGZvciB0aGlzIHRvIGJlIGNhbGxlZCBkdXJpbmcgdGhlXG4gICAqIHdhdGNoZXIncyBkZXBlbmRlbmN5IGNvbGxlY3Rpb24gcGhhc2UgYmVjYXVzZSB3ZSB3YW50XG4gICAqIHRoZSB2LWZvciB0byB1cGRhdGUgd2hlbiB0aGUgc291cmNlIE9iamVjdCBpcyBtdXRhdGVkLlxuICAgKi9cblxuICBfcG9zdFByb2Nlc3M6IGZ1bmN0aW9uIF9wb3N0UHJvY2Vzcyh2YWx1ZSkge1xuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICAgIC8vIGNvbnZlcnQgcGxhaW4gb2JqZWN0IHRvIGFycmF5LlxuICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7XG4gICAgICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuICAgICAgdmFyIHJlcyA9IG5ldyBBcnJheShpKTtcbiAgICAgIHZhciBrZXk7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgIHJlc1tpXSA9IHtcbiAgICAgICAgICAka2V5OiBrZXksXG4gICAgICAgICAgJHZhbHVlOiB2YWx1ZVtrZXldXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiAhaXNOYU4odmFsdWUpKSB7XG4gICAgICAgIHZhbHVlID0gcmFuZ2UodmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlIHx8IFtdO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICBpZiAodGhpcy5kZXNjcmlwdG9yLnJlZikge1xuICAgICAgKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRyZWZzW3RoaXMuZGVzY3JpcHRvci5yZWZdID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuZnJhZ3MpIHtcbiAgICAgIHZhciBpID0gdGhpcy5mcmFncy5sZW5ndGg7XG4gICAgICB2YXIgZnJhZztcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgZnJhZyA9IHRoaXMuZnJhZ3NbaV07XG4gICAgICAgIHRoaXMuZGVsZXRlQ2FjaGVkRnJhZyhmcmFnKTtcbiAgICAgICAgZnJhZy5kZXN0cm95KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEhlbHBlciB0byBmaW5kIHRoZSBwcmV2aW91cyBlbGVtZW50IHRoYXQgaXMgYSBmcmFnbWVudFxuICogYW5jaG9yLiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIGEgZGVzdHJveWVkIGZyYWcnc1xuICogZWxlbWVudCBjb3VsZCBzdGlsbCBiZSBsaW5nZXJpbmcgaW4gdGhlIERPTSBiZWZvcmUgaXRzXG4gKiBsZWF2aW5nIHRyYW5zaXRpb24gZmluaXNoZXMsIGJ1dCBpdHMgaW5zZXJ0ZWQgZmxhZ1xuICogc2hvdWxkIGhhdmUgYmVlbiBzZXQgdG8gZmFsc2Ugc28gd2UgY2FuIHNraXAgdGhlbS5cbiAqXG4gKiBJZiB0aGlzIGlzIGEgYmxvY2sgcmVwZWF0LCB3ZSB3YW50IHRvIG1ha2Ugc3VyZSB3ZSBvbmx5XG4gKiByZXR1cm4gZnJhZyB0aGF0IGlzIGJvdW5kIHRvIHRoaXMgdi1mb3IuIChzZWUgIzkyOSlcbiAqXG4gKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gKiBAcGFyYW0ge0NvbW1lbnR8VGV4dH0gYW5jaG9yXG4gKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAqIEByZXR1cm4ge0ZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIGZpbmRQcmV2RnJhZyhmcmFnLCBhbmNob3IsIGlkKSB7XG4gIHZhciBlbCA9IGZyYWcubm9kZS5wcmV2aW91c1NpYmxpbmc7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoIWVsKSByZXR1cm47XG4gIGZyYWcgPSBlbC5fX3ZfZnJhZztcbiAgd2hpbGUgKCghZnJhZyB8fCBmcmFnLmZvcklkICE9PSBpZCB8fCAhZnJhZy5pbnNlcnRlZCkgJiYgZWwgIT09IGFuY2hvcikge1xuICAgIGVsID0gZWwucHJldmlvdXNTaWJsaW5nO1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghZWwpIHJldHVybjtcbiAgICBmcmFnID0gZWwuX192X2ZyYWc7XG4gIH1cbiAgcmV0dXJuIGZyYWc7XG59XG5cbi8qKlxuICogRmluZCBhIHZtIGZyb20gYSBmcmFnbWVudC5cbiAqXG4gKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gKiBAcmV0dXJuIHtWdWV8dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIGZpbmRWbUZyb21GcmFnKGZyYWcpIHtcbiAgdmFyIG5vZGUgPSBmcmFnLm5vZGU7XG4gIC8vIGhhbmRsZSBtdWx0aS1ub2RlIGZyYWdcbiAgaWYgKGZyYWcuZW5kKSB7XG4gICAgd2hpbGUgKCFub2RlLl9fdnVlX18gJiYgbm9kZSAhPT0gZnJhZy5lbmQgJiYgbm9kZS5uZXh0U2libGluZykge1xuICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgfVxuICB9XG4gIHJldHVybiBub2RlLl9fdnVlX187XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgcmFuZ2UgYXJyYXkgZnJvbSBnaXZlbiBudW1iZXIuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5cbmZ1bmN0aW9uIHJhbmdlKG4pIHtcbiAgdmFyIGkgPSAtMTtcbiAgdmFyIHJldCA9IG5ldyBBcnJheShNYXRoLmZsb29yKG4pKTtcbiAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICByZXRbaV0gPSBpO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogR2V0IHRoZSB0cmFjayBieSBrZXkgZm9yIGFuIGl0ZW0uXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge1N0cmluZ30gW3RyYWNrQnlLZXldXG4gKi9cblxuZnVuY3Rpb24gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSkge1xuICByZXR1cm4gdHJhY2tCeUtleSA/IHRyYWNrQnlLZXkgPT09ICckaW5kZXgnID8gaW5kZXggOiB0cmFja0J5S2V5LmNoYXJBdCgwKS5tYXRjaCgvXFx3LykgPyBnZXRQYXRoKHZhbHVlLCB0cmFja0J5S2V5KSA6IHZhbHVlW3RyYWNrQnlLZXldIDoga2V5IHx8IHZhbHVlO1xufVxuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICB2Rm9yLndhcm5EdXBsaWNhdGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB3YXJuKCdEdXBsaWNhdGUgdmFsdWUgZm91bmQgaW4gdi1mb3I9XCInICsgdGhpcy5kZXNjcmlwdG9yLnJhdyArICdcIjogJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKSArICcuIFVzZSB0cmFjay1ieT1cIiRpbmRleFwiIGlmICcgKyAneW91IGFyZSBleHBlY3RpbmcgZHVwbGljYXRlIHZhbHVlcy4nLCB0aGlzLnZtKTtcbiAgfTtcbn1cblxudmFyIHZJZiA9IHtcblxuICBwcmlvcml0eTogSUYsXG4gIHRlcm1pbmFsOiB0cnVlLFxuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICBpZiAoIWVsLl9fdnVlX18pIHtcbiAgICAgIC8vIGNoZWNrIGVsc2UgYmxvY2tcbiAgICAgIHZhciBuZXh0ID0gZWwubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgaWYgKG5leHQgJiYgZ2V0QXR0cihuZXh0LCAndi1lbHNlJykgIT09IG51bGwpIHtcbiAgICAgICAgcmVtb3ZlKG5leHQpO1xuICAgICAgICB0aGlzLmVsc2VFbCA9IG5leHQ7XG4gICAgICB9XG4gICAgICAvLyBjaGVjayBtYWluIGJsb2NrXG4gICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1pZicpO1xuICAgICAgcmVwbGFjZShlbCwgdGhpcy5hbmNob3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3YtaWY9XCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiIGNhbm5vdCBiZSAnICsgJ3VzZWQgb24gYW4gaW5zdGFuY2Ugcm9vdCBlbGVtZW50LicsIHRoaXMudm0pO1xuICAgICAgdGhpcy5pbnZhbGlkID0gdHJ1ZTtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICBpZiAodGhpcy5pbnZhbGlkKSByZXR1cm47XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICBpZiAoIXRoaXMuZnJhZykge1xuICAgICAgICB0aGlzLmluc2VydCgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZSgpO1xuICAgIH1cbiAgfSxcblxuICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydCgpIHtcbiAgICBpZiAodGhpcy5lbHNlRnJhZykge1xuICAgICAgdGhpcy5lbHNlRnJhZy5yZW1vdmUoKTtcbiAgICAgIHRoaXMuZWxzZUZyYWcgPSBudWxsO1xuICAgIH1cbiAgICAvLyBsYXp5IGluaXQgZmFjdG9yeVxuICAgIGlmICghdGhpcy5mYWN0b3J5KSB7XG4gICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHRoaXMuZWwpO1xuICAgIH1cbiAgICB0aGlzLmZyYWcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKHRoaXMuX2hvc3QsIHRoaXMuX3Njb3BlLCB0aGlzLl9mcmFnKTtcbiAgICB0aGlzLmZyYWcuYmVmb3JlKHRoaXMuYW5jaG9yKTtcbiAgfSxcblxuICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICBpZiAodGhpcy5mcmFnKSB7XG4gICAgICB0aGlzLmZyYWcucmVtb3ZlKCk7XG4gICAgICB0aGlzLmZyYWcgPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5lbHNlRWwgJiYgIXRoaXMuZWxzZUZyYWcpIHtcbiAgICAgIGlmICghdGhpcy5lbHNlRmFjdG9yeSkge1xuICAgICAgICB0aGlzLmVsc2VGYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLmVsc2VFbC5fY29udGV4dCB8fCB0aGlzLnZtLCB0aGlzLmVsc2VFbCk7XG4gICAgICB9XG4gICAgICB0aGlzLmVsc2VGcmFnID0gdGhpcy5lbHNlRmFjdG9yeS5jcmVhdGUodGhpcy5faG9zdCwgdGhpcy5fc2NvcGUsIHRoaXMuX2ZyYWcpO1xuICAgICAgdGhpcy5lbHNlRnJhZy5iZWZvcmUodGhpcy5hbmNob3IpO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICBpZiAodGhpcy5mcmFnKSB7XG4gICAgICB0aGlzLmZyYWcuZGVzdHJveSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5lbHNlRnJhZykge1xuICAgICAgdGhpcy5lbHNlRnJhZy5kZXN0cm95KCk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgc2hvdyA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIGNoZWNrIGVsc2UgYmxvY2tcbiAgICB2YXIgbmV4dCA9IHRoaXMuZWwubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGlmIChuZXh0ICYmIGdldEF0dHIobmV4dCwgJ3YtZWxzZScpICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmVsc2VFbCA9IG5leHQ7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdGhpcy5hcHBseSh0aGlzLmVsLCB2YWx1ZSk7XG4gICAgaWYgKHRoaXMuZWxzZUVsKSB7XG4gICAgICB0aGlzLmFwcGx5KHRoaXMuZWxzZUVsLCAhdmFsdWUpO1xuICAgIH1cbiAgfSxcblxuICBhcHBseTogZnVuY3Rpb24gYXBwbHkoZWwsIHZhbHVlKSB7XG4gICAgaWYgKGluRG9jKGVsKSkge1xuICAgICAgYXBwbHlUcmFuc2l0aW9uKGVsLCB2YWx1ZSA/IDEgOiAtMSwgdG9nZ2xlLCB0aGlzLnZtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdG9nZ2xlKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRvZ2dsZSgpIHtcbiAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZSA/ICcnIDogJ25vbmUnO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHRleHQkMiA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciBpc1JhbmdlID0gZWwudHlwZSA9PT0gJ3JhbmdlJztcbiAgICB2YXIgbGF6eSA9IHRoaXMucGFyYW1zLmxhenk7XG4gICAgdmFyIG51bWJlciA9IHRoaXMucGFyYW1zLm51bWJlcjtcbiAgICB2YXIgZGVib3VuY2UgPSB0aGlzLnBhcmFtcy5kZWJvdW5jZTtcblxuICAgIC8vIGhhbmRsZSBjb21wb3NpdGlvbiBldmVudHMuXG4gICAgLy8gICBodHRwOi8vYmxvZy5ldmFueW91Lm1lLzIwMTQvMDEvMDMvY29tcG9zaXRpb24tZXZlbnQvXG4gICAgLy8gc2tpcCB0aGlzIGZvciBBbmRyb2lkIGJlY2F1c2UgaXQgaGFuZGxlcyBjb21wb3NpdGlvblxuICAgIC8vIGV2ZW50cyBxdWl0ZSBkaWZmZXJlbnRseS4gQW5kcm9pZCBkb2Vzbid0IHRyaWdnZXJcbiAgICAvLyBjb21wb3NpdGlvbiBldmVudHMgZm9yIGxhbmd1YWdlIGlucHV0IG1ldGhvZHMgZS5nLlxuICAgIC8vIENoaW5lc2UsIGJ1dCBpbnN0ZWFkIHRyaWdnZXJzIHRoZW0gZm9yIHNwZWxsaW5nXG4gICAgLy8gc3VnZ2VzdGlvbnMuLi4gKHNlZSBEaXNjdXNzaW9uLyMxNjIpXG4gICAgdmFyIGNvbXBvc2luZyA9IGZhbHNlO1xuICAgIGlmICghaXNBbmRyb2lkICYmICFpc1JhbmdlKSB7XG4gICAgICB0aGlzLm9uKCdjb21wb3NpdGlvbnN0YXJ0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb21wb3NpbmcgPSB0cnVlO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm9uKCdjb21wb3NpdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29tcG9zaW5nID0gZmFsc2U7XG4gICAgICAgIC8vIGluIElFMTEgdGhlIFwiY29tcG9zaXRpb25lbmRcIiBldmVudCBmaXJlcyBBRlRFUlxuICAgICAgICAvLyB0aGUgXCJpbnB1dFwiIGV2ZW50LCBzbyB0aGUgaW5wdXQgaGFuZGxlciBpcyBibG9ja2VkXG4gICAgICAgIC8vIGF0IHRoZSBlbmQuLi4gaGF2ZSB0byBjYWxsIGl0IGhlcmUuXG4gICAgICAgIC8vXG4gICAgICAgIC8vICMxMzI3OiBpbiBsYXp5IG1vZGUgdGhpcyBpcyB1bmVjZXNzYXJ5LlxuICAgICAgICBpZiAoIWxhenkpIHtcbiAgICAgICAgICBzZWxmLmxpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIHByZXZlbnQgbWVzc2luZyB3aXRoIHRoZSBpbnB1dCB3aGVuIHVzZXIgaXMgdHlwaW5nLFxuICAgIC8vIGFuZCBmb3JjZSB1cGRhdGUgb24gYmx1ci5cbiAgICB0aGlzLmZvY3VzZWQgPSBmYWxzZTtcbiAgICBpZiAoIWlzUmFuZ2UgJiYgIWxhenkpIHtcbiAgICAgIHRoaXMub24oJ2ZvY3VzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLmZvY3VzZWQgPSB0cnVlO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm9uKCdibHVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLmZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgLy8gZG8gbm90IHN5bmMgdmFsdWUgYWZ0ZXIgZnJhZ21lbnQgcmVtb3ZhbCAoIzIwMTcpXG4gICAgICAgIGlmICghc2VsZi5fZnJhZyB8fCBzZWxmLl9mcmFnLmluc2VydGVkKSB7XG4gICAgICAgICAgc2VsZi5yYXdMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBOb3cgYXR0YWNoIHRoZSBtYWluIGxpc3RlbmVyXG4gICAgdGhpcy5saXN0ZW5lciA9IHRoaXMucmF3TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoY29tcG9zaW5nIHx8ICFzZWxmLl9ib3VuZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgdmFsID0gbnVtYmVyIHx8IGlzUmFuZ2UgPyB0b051bWJlcihlbC52YWx1ZSkgOiBlbC52YWx1ZTtcbiAgICAgIHNlbGYuc2V0KHZhbCk7XG4gICAgICAvLyBmb3JjZSB1cGRhdGUgb24gbmV4dCB0aWNrIHRvIGF2b2lkIGxvY2sgJiBzYW1lIHZhbHVlXG4gICAgICAvLyBhbHNvIG9ubHkgdXBkYXRlIHdoZW4gdXNlciBpcyBub3QgdHlwaW5nXG4gICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChzZWxmLl9ib3VuZCAmJiAhc2VsZi5mb2N1c2VkKSB7XG4gICAgICAgICAgc2VsZi51cGRhdGUoc2VsZi5fd2F0Y2hlci52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyBhcHBseSBkZWJvdW5jZVxuICAgIGlmIChkZWJvdW5jZSkge1xuICAgICAgdGhpcy5saXN0ZW5lciA9IF9kZWJvdW5jZSh0aGlzLmxpc3RlbmVyLCBkZWJvdW5jZSk7XG4gICAgfVxuXG4gICAgLy8gU3VwcG9ydCBqUXVlcnkgZXZlbnRzLCBzaW5jZSBqUXVlcnkudHJpZ2dlcigpIGRvZXNuJ3RcbiAgICAvLyB0cmlnZ2VyIG5hdGl2ZSBldmVudHMgaW4gc29tZSBjYXNlcyBhbmQgc29tZSBwbHVnaW5zXG4gICAgLy8gcmVseSBvbiAkLnRyaWdnZXIoKVxuICAgIC8vXG4gICAgLy8gV2Ugd2FudCB0byBtYWtlIHN1cmUgaWYgYSBsaXN0ZW5lciBpcyBhdHRhY2hlZCB1c2luZ1xuICAgIC8vIGpRdWVyeSwgaXQgaXMgYWxzbyByZW1vdmVkIHdpdGggalF1ZXJ5LCB0aGF0J3Mgd2h5XG4gICAgLy8gd2UgZG8gdGhlIGNoZWNrIGZvciBlYWNoIGRpcmVjdGl2ZSBpbnN0YW5jZSBhbmRcbiAgICAvLyBzdG9yZSB0aGF0IGNoZWNrIHJlc3VsdCBvbiBpdHNlbGYuIFRoaXMgYWxzbyBhbGxvd3NcbiAgICAvLyBlYXNpZXIgdGVzdCBjb3ZlcmFnZSBjb250cm9sIGJ5IHVuc2V0dGluZyB0aGUgZ2xvYmFsXG4gICAgLy8galF1ZXJ5IHZhcmlhYmxlIGluIHRlc3RzLlxuICAgIHRoaXMuaGFzalF1ZXJ5ID0gdHlwZW9mIGpRdWVyeSA9PT0gJ2Z1bmN0aW9uJztcbiAgICBpZiAodGhpcy5oYXNqUXVlcnkpIHtcbiAgICAgIHZhciBtZXRob2QgPSBqUXVlcnkuZm4ub24gPyAnb24nIDogJ2JpbmQnO1xuICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdjaGFuZ2UnLCB0aGlzLnJhd0xpc3RlbmVyKTtcbiAgICAgIGlmICghbGF6eSkge1xuICAgICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2lucHV0JywgdGhpcy5saXN0ZW5lcik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMucmF3TGlzdGVuZXIpO1xuICAgICAgaWYgKCFsYXp5KSB7XG4gICAgICAgIHRoaXMub24oJ2lucHV0JywgdGhpcy5saXN0ZW5lcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSUU5IGRvZXNuJ3QgZmlyZSBpbnB1dCBldmVudCBvbiBiYWNrc3BhY2UvZGVsL2N1dFxuICAgIGlmICghbGF6eSAmJiBpc0lFOSkge1xuICAgICAgdGhpcy5vbignY3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBuZXh0VGljayhzZWxmLmxpc3RlbmVyKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5vbigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSA0NiB8fCBlLmtleUNvZGUgPT09IDgpIHtcbiAgICAgICAgICBzZWxmLmxpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIHNldCBpbml0aWFsIHZhbHVlIGlmIHByZXNlbnRcbiAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCd2YWx1ZScpIHx8IGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScgJiYgZWwudmFsdWUudHJpbSgpKSB7XG4gICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgLy8gIzMwMjkgb25seSB1cGRhdGUgd2hlbiB0aGUgdmFsdWUgY2hhbmdlcy4gVGhpcyBwcmV2ZW50XG4gICAgLy8gYnJvd3NlcnMgZnJvbSBvdmVyd3JpdGluZyB2YWx1ZXMgbGlrZSBzZWxlY3Rpb25TdGFydFxuICAgIHZhbHVlID0gX3RvU3RyaW5nKHZhbHVlKTtcbiAgICBpZiAodmFsdWUgIT09IHRoaXMuZWwudmFsdWUpIHRoaXMuZWwudmFsdWUgPSB2YWx1ZTtcbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIGlmICh0aGlzLmhhc2pRdWVyeSkge1xuICAgICAgdmFyIG1ldGhvZCA9IGpRdWVyeS5mbi5vZmYgPyAnb2ZmJyA6ICd1bmJpbmQnO1xuICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciByYWRpbyA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXG4gICAgdGhpcy5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIHZhbHVlIG92ZXJ3cml0ZSB2aWEgdi1iaW5kOnZhbHVlXG4gICAgICBpZiAoZWwuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpKSB7XG4gICAgICAgIHJldHVybiBlbC5fdmFsdWU7XG4gICAgICB9XG4gICAgICB2YXIgdmFsID0gZWwudmFsdWU7XG4gICAgICBpZiAoc2VsZi5wYXJhbXMubnVtYmVyKSB7XG4gICAgICAgIHZhbCA9IHRvTnVtYmVyKHZhbCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsO1xuICAgIH07XG5cbiAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgc2VsZi5zZXQoc2VsZi5nZXRWYWx1ZSgpKTtcbiAgICB9O1xuICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXG4gICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgnY2hlY2tlZCcpKSB7XG4gICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdGhpcy5lbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgdGhpcy5nZXRWYWx1ZSgpKTtcbiAgfVxufTtcblxudmFyIHNlbGVjdCA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcblxuICAgIC8vIG1ldGhvZCB0byBmb3JjZSB1cGRhdGUgRE9NIHVzaW5nIGxhdGVzdCB2YWx1ZS5cbiAgICB0aGlzLmZvcmNlVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHNlbGYuX3dhdGNoZXIpIHtcbiAgICAgICAgc2VsZi51cGRhdGUoc2VsZi5fd2F0Y2hlci5nZXQoKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgYSBtdWx0aXBsZSBzZWxlY3RcbiAgICB2YXIgbXVsdGlwbGUgPSB0aGlzLm11bHRpcGxlID0gZWwuaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpO1xuXG4gICAgLy8gYXR0YWNoIGxpc3RlbmVyXG4gICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGdldFZhbHVlKGVsLCBtdWx0aXBsZSk7XG4gICAgICB2YWx1ZSA9IHNlbGYucGFyYW1zLm51bWJlciA/IGlzQXJyYXkodmFsdWUpID8gdmFsdWUubWFwKHRvTnVtYmVyKSA6IHRvTnVtYmVyKHZhbHVlKSA6IHZhbHVlO1xuICAgICAgc2VsZi5zZXQodmFsdWUpO1xuICAgIH07XG4gICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cbiAgICAvLyBpZiBoYXMgaW5pdGlhbCB2YWx1ZSwgc2V0IGFmdGVyQmluZFxuICAgIHZhciBpbml0VmFsdWUgPSBnZXRWYWx1ZShlbCwgbXVsdGlwbGUsIHRydWUpO1xuICAgIGlmIChtdWx0aXBsZSAmJiBpbml0VmFsdWUubGVuZ3RoIHx8ICFtdWx0aXBsZSAmJiBpbml0VmFsdWUgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcbiAgICB9XG5cbiAgICAvLyBBbGwgbWFqb3IgYnJvd3NlcnMgZXhjZXB0IEZpcmVmb3ggcmVzZXRzXG4gICAgLy8gc2VsZWN0ZWRJbmRleCB3aXRoIHZhbHVlIC0xIHRvIDAgd2hlbiB0aGUgZWxlbWVudFxuICAgIC8vIGlzIGFwcGVuZGVkIHRvIGEgbmV3IHBhcmVudCwgdGhlcmVmb3JlIHdlIGhhdmUgdG9cbiAgICAvLyBmb3JjZSBhIERPTSB1cGRhdGUgd2hlbmV2ZXIgdGhhdCBoYXBwZW5zLi4uXG4gICAgdGhpcy52bS4kb24oJ2hvb2s6YXR0YWNoZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBuZXh0VGljayhfdGhpcy5mb3JjZVVwZGF0ZSk7XG4gICAgfSk7XG4gICAgaWYgKCFpbkRvYyhlbCkpIHtcbiAgICAgIG5leHRUaWNrKHRoaXMuZm9yY2VVcGRhdGUpO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgZWwuc2VsZWN0ZWRJbmRleCA9IC0xO1xuICAgIHZhciBtdWx0aSA9IHRoaXMubXVsdGlwbGUgJiYgaXNBcnJheSh2YWx1ZSk7XG4gICAgdmFyIG9wdGlvbnMgPSBlbC5vcHRpb25zO1xuICAgIHZhciBpID0gb3B0aW9ucy5sZW5ndGg7XG4gICAgdmFyIG9wLCB2YWw7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgb3AgPSBvcHRpb25zW2ldO1xuICAgICAgdmFsID0gb3AuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpID8gb3AuX3ZhbHVlIDogb3AudmFsdWU7XG4gICAgICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cbiAgICAgIG9wLnNlbGVjdGVkID0gbXVsdGkgPyBpbmRleE9mJDEodmFsdWUsIHZhbCkgPiAtMSA6IGxvb3NlRXF1YWwodmFsdWUsIHZhbCk7XG4gICAgICAvKiBlc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHRoaXMudm0uJG9mZignaG9vazphdHRhY2hlZCcsIHRoaXMuZm9yY2VVcGRhdGUpO1xuICB9XG59O1xuXG4vKipcbiAqIEdldCBzZWxlY3QgdmFsdWVcbiAqXG4gKiBAcGFyYW0ge1NlbGVjdEVsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0Jvb2xlYW59IG11bHRpXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGluaXRcbiAqIEByZXR1cm4ge0FycmF5fCp9XG4gKi9cblxuZnVuY3Rpb24gZ2V0VmFsdWUoZWwsIG11bHRpLCBpbml0KSB7XG4gIHZhciByZXMgPSBtdWx0aSA/IFtdIDogbnVsbDtcbiAgdmFyIG9wLCB2YWwsIHNlbGVjdGVkO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGVsLm9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgb3AgPSBlbC5vcHRpb25zW2ldO1xuICAgIHNlbGVjdGVkID0gaW5pdCA/IG9wLmhhc0F0dHJpYnV0ZSgnc2VsZWN0ZWQnKSA6IG9wLnNlbGVjdGVkO1xuICAgIGlmIChzZWxlY3RlZCkge1xuICAgICAgdmFsID0gb3AuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpID8gb3AuX3ZhbHVlIDogb3AudmFsdWU7XG4gICAgICBpZiAobXVsdGkpIHtcbiAgICAgICAgcmVzLnB1c2godmFsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogTmF0aXZlIEFycmF5LmluZGV4T2YgdXNlcyBzdHJpY3QgZXF1YWwsIGJ1dCBpbiB0aGlzXG4gKiBjYXNlIHdlIG5lZWQgdG8gbWF0Y2ggc3RyaW5nL251bWJlcnMgd2l0aCBjdXN0b20gZXF1YWwuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJyXG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5cbmZ1bmN0aW9uIGluZGV4T2YkMShhcnIsIHZhbCkge1xuICB2YXIgaSA9IGFyci5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBpZiAobG9vc2VFcXVhbChhcnJbaV0sIHZhbCkpIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gLTE7XG59XG5cbnZhciBjaGVja2JveCA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXG4gICAgdGhpcy5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBlbC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBlbC5fdmFsdWUgOiBzZWxmLnBhcmFtcy5udW1iZXIgPyB0b051bWJlcihlbC52YWx1ZSkgOiBlbC52YWx1ZTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZ2V0Qm9vbGVhblZhbHVlKCkge1xuICAgICAgdmFyIHZhbCA9IGVsLmNoZWNrZWQ7XG4gICAgICBpZiAodmFsICYmIGVsLmhhc093blByb3BlcnR5KCdfdHJ1ZVZhbHVlJykpIHtcbiAgICAgICAgcmV0dXJuIGVsLl90cnVlVmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAoIXZhbCAmJiBlbC5oYXNPd25Qcm9wZXJ0eSgnX2ZhbHNlVmFsdWUnKSkge1xuICAgICAgICByZXR1cm4gZWwuX2ZhbHNlVmFsdWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsO1xuICAgIH1cblxuICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbW9kZWwgPSBzZWxmLl93YXRjaGVyLnZhbHVlO1xuICAgICAgaWYgKGlzQXJyYXkobW9kZWwpKSB7XG4gICAgICAgIHZhciB2YWwgPSBzZWxmLmdldFZhbHVlKCk7XG4gICAgICAgIGlmIChlbC5jaGVja2VkKSB7XG4gICAgICAgICAgaWYgKGluZGV4T2YobW9kZWwsIHZhbCkgPCAwKSB7XG4gICAgICAgICAgICBtb2RlbC5wdXNoKHZhbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1vZGVsLiRyZW1vdmUodmFsKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5zZXQoZ2V0Qm9vbGVhblZhbHVlKCkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdjaGVja2VkJykpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgZWwuY2hlY2tlZCA9IGluZGV4T2YodmFsdWUsIHRoaXMuZ2V0VmFsdWUoKSkgPiAtMTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGVsLmhhc093blByb3BlcnR5KCdfdHJ1ZVZhbHVlJykpIHtcbiAgICAgICAgZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIGVsLl90cnVlVmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWwuY2hlY2tlZCA9ICEhdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG52YXIgaGFuZGxlcnMgPSB7XG4gIHRleHQ6IHRleHQkMixcbiAgcmFkaW86IHJhZGlvLFxuICBzZWxlY3Q6IHNlbGVjdCxcbiAgY2hlY2tib3g6IGNoZWNrYm94XG59O1xuXG52YXIgbW9kZWwgPSB7XG5cbiAgcHJpb3JpdHk6IE1PREVMLFxuICB0d29XYXk6IHRydWUsXG4gIGhhbmRsZXJzOiBoYW5kbGVycyxcbiAgcGFyYW1zOiBbJ2xhenknLCAnbnVtYmVyJywgJ2RlYm91bmNlJ10sXG5cbiAgLyoqXG4gICAqIFBvc3NpYmxlIGVsZW1lbnRzOlxuICAgKiAgIDxzZWxlY3Q+XG4gICAqICAgPHRleHRhcmVhPlxuICAgKiAgIDxpbnB1dCB0eXBlPVwiKlwiPlxuICAgKiAgICAgLSB0ZXh0XG4gICAqICAgICAtIGNoZWNrYm94XG4gICAqICAgICAtIHJhZGlvXG4gICAqICAgICAtIG51bWJlclxuICAgKi9cblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIGZyaWVuZGx5IHdhcm5pbmcuLi5cbiAgICB0aGlzLmNoZWNrRmlsdGVycygpO1xuICAgIGlmICh0aGlzLmhhc1JlYWQgJiYgIXRoaXMuaGFzV3JpdGUpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSXQgc2VlbXMgeW91IGFyZSB1c2luZyBhIHJlYWQtb25seSBmaWx0ZXIgd2l0aCAnICsgJ3YtbW9kZWw9XCInICsgdGhpcy5kZXNjcmlwdG9yLnJhdyArICdcIi4gJyArICdZb3UgbWlnaHQgd2FudCB0byB1c2UgYSB0d28td2F5IGZpbHRlciB0byBlbnN1cmUgY29ycmVjdCBiZWhhdmlvci4nLCB0aGlzLnZtKTtcbiAgICB9XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgdGFnID0gZWwudGFnTmFtZTtcbiAgICB2YXIgaGFuZGxlcjtcbiAgICBpZiAodGFnID09PSAnSU5QVVQnKSB7XG4gICAgICBoYW5kbGVyID0gaGFuZGxlcnNbZWwudHlwZV0gfHwgaGFuZGxlcnMudGV4dDtcbiAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1NFTEVDVCcpIHtcbiAgICAgIGhhbmRsZXIgPSBoYW5kbGVycy5zZWxlY3Q7XG4gICAgfSBlbHNlIGlmICh0YWcgPT09ICdURVhUQVJFQScpIHtcbiAgICAgIGhhbmRsZXIgPSBoYW5kbGVycy50ZXh0O1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3YtbW9kZWwgZG9lcyBub3Qgc3VwcG9ydCBlbGVtZW50IHR5cGU6ICcgKyB0YWcsIHRoaXMudm0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbC5fX3ZfbW9kZWwgPSB0aGlzO1xuICAgIGhhbmRsZXIuYmluZC5jYWxsKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlID0gaGFuZGxlci51cGRhdGU7XG4gICAgdGhpcy5fdW5iaW5kID0gaGFuZGxlci51bmJpbmQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIHJlYWQvd3JpdGUgZmlsdGVyIHN0YXRzLlxuICAgKi9cblxuICBjaGVja0ZpbHRlcnM6IGZ1bmN0aW9uIGNoZWNrRmlsdGVycygpIHtcbiAgICB2YXIgZmlsdGVycyA9IHRoaXMuZmlsdGVycztcbiAgICBpZiAoIWZpbHRlcnMpIHJldHVybjtcbiAgICB2YXIgaSA9IGZpbHRlcnMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciBmaWx0ZXIgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ2ZpbHRlcnMnLCBmaWx0ZXJzW2ldLm5hbWUpO1xuICAgICAgaWYgKHR5cGVvZiBmaWx0ZXIgPT09ICdmdW5jdGlvbicgfHwgZmlsdGVyLnJlYWQpIHtcbiAgICAgICAgdGhpcy5oYXNSZWFkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChmaWx0ZXIud3JpdGUpIHtcbiAgICAgICAgdGhpcy5oYXNXcml0ZSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHRoaXMuZWwuX192X21vZGVsID0gbnVsbDtcbiAgICB0aGlzLl91bmJpbmQgJiYgdGhpcy5fdW5iaW5kKCk7XG4gIH1cbn07XG5cbi8vIGtleUNvZGUgYWxpYXNlc1xudmFyIGtleUNvZGVzID0ge1xuICBlc2M6IDI3LFxuICB0YWI6IDksXG4gIGVudGVyOiAxMyxcbiAgc3BhY2U6IDMyLFxuICAnZGVsZXRlJzogWzgsIDQ2XSxcbiAgdXA6IDM4LFxuICBsZWZ0OiAzNyxcbiAgcmlnaHQ6IDM5LFxuICBkb3duOiA0MFxufTtcblxuZnVuY3Rpb24ga2V5RmlsdGVyKGhhbmRsZXIsIGtleXMpIHtcbiAgdmFyIGNvZGVzID0ga2V5cy5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciBjaGFyQ29kZSA9IGtleS5jaGFyQ29kZUF0KDApO1xuICAgIGlmIChjaGFyQ29kZSA+IDQ3ICYmIGNoYXJDb2RlIDwgNTgpIHtcbiAgICAgIHJldHVybiBwYXJzZUludChrZXksIDEwKTtcbiAgICB9XG4gICAgaWYgKGtleS5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNoYXJDb2RlID0ga2V5LnRvVXBwZXJDYXNlKCkuY2hhckNvZGVBdCgwKTtcbiAgICAgIGlmIChjaGFyQ29kZSA+IDY0ICYmIGNoYXJDb2RlIDwgOTEpIHtcbiAgICAgICAgcmV0dXJuIGNoYXJDb2RlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2V5Q29kZXNba2V5XTtcbiAgfSk7XG4gIGNvZGVzID0gW10uY29uY2F0LmFwcGx5KFtdLCBjb2Rlcyk7XG4gIHJldHVybiBmdW5jdGlvbiBrZXlIYW5kbGVyKGUpIHtcbiAgICBpZiAoY29kZXMuaW5kZXhPZihlLmtleUNvZGUpID4gLTEpIHtcbiAgICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBzdG9wRmlsdGVyKGhhbmRsZXIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHN0b3BIYW5kbGVyKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHByZXZlbnRGaWx0ZXIoaGFuZGxlcikge1xuICByZXR1cm4gZnVuY3Rpb24gcHJldmVudEhhbmRsZXIoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzZWxmRmlsdGVyKGhhbmRsZXIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHNlbGZIYW5kbGVyKGUpIHtcbiAgICBpZiAoZS50YXJnZXQgPT09IGUuY3VycmVudFRhcmdldCkge1xuICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcbiAgICB9XG4gIH07XG59XG5cbnZhciBvbiQxID0ge1xuXG4gIHByaW9yaXR5OiBPTixcbiAgYWNjZXB0U3RhdGVtZW50OiB0cnVlLFxuICBrZXlDb2Rlczoga2V5Q29kZXMsXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyBkZWFsIHdpdGggaWZyYW1lc1xuICAgIGlmICh0aGlzLmVsLnRhZ05hbWUgPT09ICdJRlJBTUUnICYmIHRoaXMuYXJnICE9PSAnbG9hZCcpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHRoaXMuaWZyYW1lQmluZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgb24oc2VsZi5lbC5jb250ZW50V2luZG93LCBzZWxmLmFyZywgc2VsZi5oYW5kbGVyLCBzZWxmLm1vZGlmaWVycy5jYXB0dXJlKTtcbiAgICAgIH07XG4gICAgICB0aGlzLm9uKCdsb2FkJywgdGhpcy5pZnJhbWVCaW5kKTtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoaGFuZGxlcikge1xuICAgIC8vIHN0dWIgYSBub29wIGZvciB2LW9uIHdpdGggbm8gdmFsdWUsXG4gICAgLy8gZS5nLiBAbW91c2Vkb3duLnByZXZlbnRcbiAgICBpZiAoIXRoaXMuZGVzY3JpcHRvci5yYXcpIHtcbiAgICAgIGhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1vbjonICsgdGhpcy5hcmcgKyAnPVwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiBleHBlY3RzIGEgZnVuY3Rpb24gdmFsdWUsICcgKyAnZ290ICcgKyBoYW5kbGVyLCB0aGlzLnZtKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBhcHBseSBtb2RpZmllcnNcbiAgICBpZiAodGhpcy5tb2RpZmllcnMuc3RvcCkge1xuICAgICAgaGFuZGxlciA9IHN0b3BGaWx0ZXIoaGFuZGxlcik7XG4gICAgfVxuICAgIGlmICh0aGlzLm1vZGlmaWVycy5wcmV2ZW50KSB7XG4gICAgICBoYW5kbGVyID0gcHJldmVudEZpbHRlcihoYW5kbGVyKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubW9kaWZpZXJzLnNlbGYpIHtcbiAgICAgIGhhbmRsZXIgPSBzZWxmRmlsdGVyKGhhbmRsZXIpO1xuICAgIH1cbiAgICAvLyBrZXkgZmlsdGVyXG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLm1vZGlmaWVycykuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiBrZXkgIT09ICdzdG9wJyAmJiBrZXkgIT09ICdwcmV2ZW50JyAmJiBrZXkgIT09ICdzZWxmJyAmJiBrZXkgIT09ICdjYXB0dXJlJztcbiAgICB9KTtcbiAgICBpZiAoa2V5cy5sZW5ndGgpIHtcbiAgICAgIGhhbmRsZXIgPSBrZXlGaWx0ZXIoaGFuZGxlciwga2V5cyk7XG4gICAgfVxuXG4gICAgdGhpcy5yZXNldCgpO1xuICAgIHRoaXMuaGFuZGxlciA9IGhhbmRsZXI7XG5cbiAgICBpZiAodGhpcy5pZnJhbWVCaW5kKSB7XG4gICAgICB0aGlzLmlmcmFtZUJpbmQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb24odGhpcy5lbCwgdGhpcy5hcmcsIHRoaXMuaGFuZGxlciwgdGhpcy5tb2RpZmllcnMuY2FwdHVyZSk7XG4gICAgfVxuICB9LFxuXG4gIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmlmcmFtZUJpbmQgPyB0aGlzLmVsLmNvbnRlbnRXaW5kb3cgOiB0aGlzLmVsO1xuICAgIGlmICh0aGlzLmhhbmRsZXIpIHtcbiAgICAgIG9mZihlbCwgdGhpcy5hcmcsIHRoaXMuaGFuZGxlcik7XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHRoaXMucmVzZXQoKTtcbiAgfVxufTtcblxudmFyIHByZWZpeGVzID0gWyctd2Via2l0LScsICctbW96LScsICctbXMtJ107XG52YXIgY2FtZWxQcmVmaXhlcyA9IFsnV2Via2l0JywgJ01veicsICdtcyddO1xudmFyIGltcG9ydGFudFJFID0gLyFpbXBvcnRhbnQ7PyQvO1xudmFyIHByb3BDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbnZhciB0ZXN0RWwgPSBudWxsO1xuXG52YXIgc3R5bGUgPSB7XG5cbiAgZGVlcDogdHJ1ZSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLmVsLnN0eWxlLmNzc1RleHQgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZS5yZWR1Y2UoZXh0ZW5kLCB7fSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZSB8fCB7fSk7XG4gICAgfVxuICB9LFxuXG4gIGhhbmRsZU9iamVjdDogZnVuY3Rpb24gaGFuZGxlT2JqZWN0KHZhbHVlKSB7XG4gICAgLy8gY2FjaGUgb2JqZWN0IHN0eWxlcyBzbyB0aGF0IG9ubHkgY2hhbmdlZCBwcm9wc1xuICAgIC8vIGFyZSBhY3R1YWxseSB1cGRhdGVkLlxuICAgIHZhciBjYWNoZSA9IHRoaXMuY2FjaGUgfHwgKHRoaXMuY2FjaGUgPSB7fSk7XG4gICAgdmFyIG5hbWUsIHZhbDtcbiAgICBmb3IgKG5hbWUgaW4gY2FjaGUpIHtcbiAgICAgIGlmICghKG5hbWUgaW4gdmFsdWUpKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKG5hbWUsIG51bGwpO1xuICAgICAgICBkZWxldGUgY2FjaGVbbmFtZV07XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobmFtZSBpbiB2YWx1ZSkge1xuICAgICAgdmFsID0gdmFsdWVbbmFtZV07XG4gICAgICBpZiAodmFsICE9PSBjYWNoZVtuYW1lXSkge1xuICAgICAgICBjYWNoZVtuYW1lXSA9IHZhbDtcbiAgICAgICAgdGhpcy5oYW5kbGVTaW5nbGUobmFtZSwgdmFsKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgaGFuZGxlU2luZ2xlOiBmdW5jdGlvbiBoYW5kbGVTaW5nbGUocHJvcCwgdmFsdWUpIHtcbiAgICBwcm9wID0gbm9ybWFsaXplKHByb3ApO1xuICAgIGlmICghcHJvcCkgcmV0dXJuOyAvLyB1bnN1cHBvcnRlZCBwcm9wXG4gICAgLy8gY2FzdCBwb3NzaWJsZSBudW1iZXJzL2Jvb2xlYW5zIGludG8gc3RyaW5nc1xuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB2YWx1ZSArPSAnJztcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHZhciBpc0ltcG9ydGFudCA9IGltcG9ydGFudFJFLnRlc3QodmFsdWUpID8gJ2ltcG9ydGFudCcgOiAnJztcbiAgICAgIGlmIChpc0ltcG9ydGFudCkge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICB3YXJuKCdJdFxcJ3MgcHJvYmFibHkgYSBiYWQgaWRlYSB0byB1c2UgIWltcG9ydGFudCB3aXRoIGlubGluZSBydWxlcy4gJyArICdUaGlzIGZlYXR1cmUgd2lsbCBiZSBkZXByZWNhdGVkIGluIGEgZnV0dXJlIHZlcnNpb24gb2YgVnVlLicpO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZShpbXBvcnRhbnRSRSwgJycpLnRyaW0oKTtcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eShwcm9wLmtlYmFiLCB2YWx1ZSwgaXNJbXBvcnRhbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5lbC5zdHlsZVtwcm9wLmNhbWVsXSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsLnN0eWxlW3Byb3AuY2FtZWxdID0gJyc7XG4gICAgfVxuICB9XG5cbn07XG5cbi8qKlxuICogTm9ybWFsaXplIGEgQ1NTIHByb3BlcnR5IG5hbWUuXG4gKiAtIGNhY2hlIHJlc3VsdFxuICogLSBhdXRvIHByZWZpeFxuICogLSBjYW1lbENhc2UgLT4gZGFzaC1jYXNlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBub3JtYWxpemUocHJvcCkge1xuICBpZiAocHJvcENhY2hlW3Byb3BdKSB7XG4gICAgcmV0dXJuIHByb3BDYWNoZVtwcm9wXTtcbiAgfVxuICB2YXIgcmVzID0gcHJlZml4KHByb3ApO1xuICBwcm9wQ2FjaGVbcHJvcF0gPSBwcm9wQ2FjaGVbcmVzXSA9IHJlcztcbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBBdXRvIGRldGVjdCB0aGUgYXBwcm9wcmlhdGUgcHJlZml4IGZvciBhIENTUyBwcm9wZXJ0eS5cbiAqIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3BhdWxpcmlzaC81MjM2OTJcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHByZWZpeChwcm9wKSB7XG4gIHByb3AgPSBoeXBoZW5hdGUocHJvcCk7XG4gIHZhciBjYW1lbCA9IGNhbWVsaXplKHByb3ApO1xuICB2YXIgdXBwZXIgPSBjYW1lbC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbWVsLnNsaWNlKDEpO1xuICBpZiAoIXRlc3RFbCkge1xuICAgIHRlc3RFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB9XG4gIHZhciBpID0gcHJlZml4ZXMubGVuZ3RoO1xuICB2YXIgcHJlZml4ZWQ7XG4gIGlmIChjYW1lbCAhPT0gJ2ZpbHRlcicgJiYgY2FtZWwgaW4gdGVzdEVsLnN0eWxlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtlYmFiOiBwcm9wLFxuICAgICAgY2FtZWw6IGNhbWVsXG4gICAgfTtcbiAgfVxuICB3aGlsZSAoaS0tKSB7XG4gICAgcHJlZml4ZWQgPSBjYW1lbFByZWZpeGVzW2ldICsgdXBwZXI7XG4gICAgaWYgKHByZWZpeGVkIGluIHRlc3RFbC5zdHlsZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2ViYWI6IHByZWZpeGVzW2ldICsgcHJvcCxcbiAgICAgICAgY2FtZWw6IHByZWZpeGVkXG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuXG4vLyB4bGlua1xudmFyIHhsaW5rTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc7XG52YXIgeGxpbmtSRSA9IC9eeGxpbms6LztcblxuLy8gY2hlY2sgZm9yIGF0dHJpYnV0ZXMgdGhhdCBwcm9oaWJpdCBpbnRlcnBvbGF0aW9uc1xudmFyIGRpc2FsbG93ZWRJbnRlcnBBdHRyUkUgPSAvXnYtfF46fF5AfF4oPzppc3x0cmFuc2l0aW9ufHRyYW5zaXRpb24tbW9kZXxkZWJvdW5jZXx0cmFjay1ieXxzdGFnZ2VyfGVudGVyLXN0YWdnZXJ8bGVhdmUtc3RhZ2dlcikkLztcbi8vIHRoZXNlIGF0dHJpYnV0ZXMgc2hvdWxkIGFsc28gc2V0IHRoZWlyIGNvcnJlc3BvbmRpbmcgcHJvcGVydGllc1xuLy8gYmVjYXVzZSB0aGV5IG9ubHkgYWZmZWN0IHRoZSBpbml0aWFsIHN0YXRlIG9mIHRoZSBlbGVtZW50XG52YXIgYXR0cldpdGhQcm9wc1JFID0gL14oPzp2YWx1ZXxjaGVja2VkfHNlbGVjdGVkfG11dGVkKSQvO1xuLy8gdGhlc2UgYXR0cmlidXRlcyBleHBlY3QgZW51bXJhdGVkIHZhbHVlcyBvZiBcInRydWVcIiBvciBcImZhbHNlXCJcbi8vIGJ1dCBhcmUgbm90IGJvb2xlYW4gYXR0cmlidXRlc1xudmFyIGVudW1lcmF0ZWRBdHRyUkUgPSAvXig/OmRyYWdnYWJsZXxjb250ZW50ZWRpdGFibGV8c3BlbGxjaGVjaykkLztcblxuLy8gdGhlc2UgYXR0cmlidXRlcyBzaG91bGQgc2V0IGEgaGlkZGVuIHByb3BlcnR5IGZvclxuLy8gYmluZGluZyB2LW1vZGVsIHRvIG9iamVjdCB2YWx1ZXNcbnZhciBtb2RlbFByb3BzID0ge1xuICB2YWx1ZTogJ192YWx1ZScsXG4gICd0cnVlLXZhbHVlJzogJ190cnVlVmFsdWUnLFxuICAnZmFsc2UtdmFsdWUnOiAnX2ZhbHNlVmFsdWUnXG59O1xuXG52YXIgYmluZCQxID0ge1xuXG4gIHByaW9yaXR5OiBCSU5ELFxuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIGF0dHIgPSB0aGlzLmFyZztcbiAgICB2YXIgdGFnID0gdGhpcy5lbC50YWdOYW1lO1xuICAgIC8vIHNob3VsZCBiZSBkZWVwIHdhdGNoIG9uIG9iamVjdCBtb2RlXG4gICAgaWYgKCFhdHRyKSB7XG4gICAgICB0aGlzLmRlZXAgPSB0cnVlO1xuICAgIH1cbiAgICAvLyBoYW5kbGUgaW50ZXJwb2xhdGlvbiBiaW5kaW5nc1xuICAgIHZhciBkZXNjcmlwdG9yID0gdGhpcy5kZXNjcmlwdG9yO1xuICAgIHZhciB0b2tlbnMgPSBkZXNjcmlwdG9yLmludGVycDtcbiAgICBpZiAodG9rZW5zKSB7XG4gICAgICAvLyBoYW5kbGUgaW50ZXJwb2xhdGlvbnMgd2l0aCBvbmUtdGltZSB0b2tlbnNcbiAgICAgIGlmIChkZXNjcmlwdG9yLmhhc09uZVRpbWUpIHtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uID0gdG9rZW5zVG9FeHAodG9rZW5zLCB0aGlzLl9zY29wZSB8fCB0aGlzLnZtKTtcbiAgICAgIH1cblxuICAgICAgLy8gb25seSBhbGxvdyBiaW5kaW5nIG9uIG5hdGl2ZSBhdHRyaWJ1dGVzXG4gICAgICBpZiAoZGlzYWxsb3dlZEludGVycEF0dHJSRS50ZXN0KGF0dHIpIHx8IGF0dHIgPT09ICduYW1lJyAmJiAodGFnID09PSAnUEFSVElBTCcgfHwgdGFnID09PSAnU0xPVCcpKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihhdHRyICsgJz1cIicgKyBkZXNjcmlwdG9yLnJhdyArICdcIjogJyArICdhdHRyaWJ1dGUgaW50ZXJwb2xhdGlvbiBpcyBub3QgYWxsb3dlZCBpbiBWdWUuanMgJyArICdkaXJlY3RpdmVzIGFuZCBzcGVjaWFsIGF0dHJpYnV0ZXMuJywgdGhpcy52bSk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuICAgICAgICB0aGlzLmludmFsaWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHZhciByYXcgPSBhdHRyICsgJz1cIicgKyBkZXNjcmlwdG9yLnJhdyArICdcIjogJztcbiAgICAgICAgLy8gd2FybiBzcmNcbiAgICAgICAgaWYgKGF0dHIgPT09ICdzcmMnKSB7XG4gICAgICAgICAgd2FybihyYXcgKyAnaW50ZXJwb2xhdGlvbiBpbiBcInNyY1wiIGF0dHJpYnV0ZSB3aWxsIGNhdXNlICcgKyAnYSA0MDQgcmVxdWVzdC4gVXNlIHYtYmluZDpzcmMgaW5zdGVhZC4nLCB0aGlzLnZtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHdhcm4gc3R5bGVcbiAgICAgICAgaWYgKGF0dHIgPT09ICdzdHlsZScpIHtcbiAgICAgICAgICB3YXJuKHJhdyArICdpbnRlcnBvbGF0aW9uIGluIFwic3R5bGVcIiBhdHRyaWJ1dGUgd2lsbCBjYXVzZSAnICsgJ3RoZSBhdHRyaWJ1dGUgdG8gYmUgZGlzY2FyZGVkIGluIEludGVybmV0IEV4cGxvcmVyLiAnICsgJ1VzZSB2LWJpbmQ6c3R5bGUgaW5zdGVhZC4nLCB0aGlzLnZtKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmludmFsaWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGF0dHIgPSB0aGlzLmFyZztcbiAgICBpZiAodGhpcy5hcmcpIHtcbiAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKGF0dHIsIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUgfHwge30pO1xuICAgIH1cbiAgfSxcblxuICAvLyBzaGFyZSBvYmplY3QgaGFuZGxlciB3aXRoIHYtYmluZDpjbGFzc1xuICBoYW5kbGVPYmplY3Q6IHN0eWxlLmhhbmRsZU9iamVjdCxcblxuICBoYW5kbGVTaW5nbGU6IGZ1bmN0aW9uIGhhbmRsZVNpbmdsZShhdHRyLCB2YWx1ZSkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIGludGVycCA9IHRoaXMuZGVzY3JpcHRvci5pbnRlcnA7XG4gICAgaWYgKHRoaXMubW9kaWZpZXJzLmNhbWVsKSB7XG4gICAgICBhdHRyID0gY2FtZWxpemUoYXR0cik7XG4gICAgfVxuICAgIGlmICghaW50ZXJwICYmIGF0dHJXaXRoUHJvcHNSRS50ZXN0KGF0dHIpICYmIGF0dHIgaW4gZWwpIHtcbiAgICAgIHZhciBhdHRyVmFsdWUgPSBhdHRyID09PSAndmFsdWUnID8gdmFsdWUgPT0gbnVsbCAvLyBJRTkgd2lsbCBzZXQgaW5wdXQudmFsdWUgdG8gXCJudWxsXCIgZm9yIG51bGwuLi5cbiAgICAgID8gJycgOiB2YWx1ZSA6IHZhbHVlO1xuXG4gICAgICBpZiAoZWxbYXR0cl0gIT09IGF0dHJWYWx1ZSkge1xuICAgICAgICBlbFthdHRyXSA9IGF0dHJWYWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gc2V0IG1vZGVsIHByb3BzXG4gICAgdmFyIG1vZGVsUHJvcCA9IG1vZGVsUHJvcHNbYXR0cl07XG4gICAgaWYgKCFpbnRlcnAgJiYgbW9kZWxQcm9wKSB7XG4gICAgICBlbFttb2RlbFByb3BdID0gdmFsdWU7XG4gICAgICAvLyB1cGRhdGUgdi1tb2RlbCBpZiBwcmVzZW50XG4gICAgICB2YXIgbW9kZWwgPSBlbC5fX3ZfbW9kZWw7XG4gICAgICBpZiAobW9kZWwpIHtcbiAgICAgICAgbW9kZWwubGlzdGVuZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gZG8gbm90IHNldCB2YWx1ZSBhdHRyaWJ1dGUgZm9yIHRleHRhcmVhXG4gICAgaWYgKGF0dHIgPT09ICd2YWx1ZScgJiYgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyB1cGRhdGUgYXR0cmlidXRlXG4gICAgaWYgKGVudW1lcmF0ZWRBdHRyUkUudGVzdChhdHRyKSkge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlID8gJ3RydWUnIDogJ2ZhbHNlJyk7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSAhPSBudWxsICYmIHZhbHVlICE9PSBmYWxzZSkge1xuICAgICAgaWYgKGF0dHIgPT09ICdjbGFzcycpIHtcbiAgICAgICAgLy8gaGFuZGxlIGVkZ2UgY2FzZSAjMTk2MDpcbiAgICAgICAgLy8gY2xhc3MgaW50ZXJwb2xhdGlvbiBzaG91bGQgbm90IG92ZXJ3cml0ZSBWdWUgdHJhbnNpdGlvbiBjbGFzc1xuICAgICAgICBpZiAoZWwuX192X3RyYW5zKSB7XG4gICAgICAgICAgdmFsdWUgKz0gJyAnICsgZWwuX192X3RyYW5zLmlkICsgJy10cmFuc2l0aW9uJztcbiAgICAgICAgfVxuICAgICAgICBzZXRDbGFzcyhlbCwgdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmICh4bGlua1JFLnRlc3QoYXR0cikpIHtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlTlMoeGxpbmtOUywgYXR0ciwgdmFsdWUgPT09IHRydWUgPyAnJyA6IHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogdmFsdWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgfVxuICB9XG59O1xuXG52YXIgZWwgPSB7XG5cbiAgcHJpb3JpdHk6IEVMLFxuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCF0aGlzLmFyZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaWQgPSB0aGlzLmlkID0gY2FtZWxpemUodGhpcy5hcmcpO1xuICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRlbHM7XG4gICAgaWYgKGhhc093bihyZWZzLCBpZCkpIHtcbiAgICAgIHJlZnNbaWRdID0gdGhpcy5lbDtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVmaW5lUmVhY3RpdmUocmVmcywgaWQsIHRoaXMuZWwpO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kZWxzO1xuICAgIGlmIChyZWZzW3RoaXMuaWRdID09PSB0aGlzLmVsKSB7XG4gICAgICByZWZzW3RoaXMuaWRdID0gbnVsbDtcbiAgICB9XG4gIH1cbn07XG5cbnZhciByZWYgPSB7XG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LXJlZjonICsgdGhpcy5hcmcgKyAnIG11c3QgYmUgdXNlZCBvbiBhIGNoaWxkICcgKyAnY29tcG9uZW50LiBGb3VuZCBvbiA8JyArIHRoaXMuZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICsgJz4uJywgdGhpcy52bSk7XG4gIH1cbn07XG5cbnZhciBjbG9hayA9IHtcbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHRoaXMudm0uJG9uY2UoJ3ByZS1ob29rOmNvbXBpbGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCd2LWNsb2FrJyk7XG4gICAgfSk7XG4gIH1cbn07XG5cbi8vIG11c3QgZXhwb3J0IHBsYWluIG9iamVjdFxudmFyIGRpcmVjdGl2ZXMgPSB7XG4gIHRleHQ6IHRleHQkMSxcbiAgaHRtbDogaHRtbCxcbiAgJ2Zvcic6IHZGb3IsXG4gICdpZic6IHZJZixcbiAgc2hvdzogc2hvdyxcbiAgbW9kZWw6IG1vZGVsLFxuICBvbjogb24kMSxcbiAgYmluZDogYmluZCQxLFxuICBlbDogZWwsXG4gIHJlZjogcmVmLFxuICBjbG9hazogY2xvYWtcbn07XG5cbnZhciB2Q2xhc3MgPSB7XG5cbiAgZGVlcDogdHJ1ZSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHRoaXMuY2xlYW51cCgpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5zZXRDbGFzcyh2YWx1ZS50cmltKCkuc3BsaXQoL1xccysvKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0Q2xhc3Mobm9ybWFsaXplJDEodmFsdWUpKTtcbiAgICB9XG4gIH0sXG5cbiAgc2V0Q2xhc3M6IGZ1bmN0aW9uIHNldENsYXNzKHZhbHVlKSB7XG4gICAgdGhpcy5jbGVhbnVwKHZhbHVlKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIHZhbCA9IHZhbHVlW2ldO1xuICAgICAgaWYgKHZhbCkge1xuICAgICAgICBhcHBseSh0aGlzLmVsLCB2YWwsIGFkZENsYXNzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5wcmV2S2V5cyA9IHZhbHVlO1xuICB9LFxuXG4gIGNsZWFudXA6IGZ1bmN0aW9uIGNsZWFudXAodmFsdWUpIHtcbiAgICB2YXIgcHJldktleXMgPSB0aGlzLnByZXZLZXlzO1xuICAgIGlmICghcHJldktleXMpIHJldHVybjtcbiAgICB2YXIgaSA9IHByZXZLZXlzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YXIga2V5ID0gcHJldktleXNbaV07XG4gICAgICBpZiAoIXZhbHVlIHx8IHZhbHVlLmluZGV4T2Yoa2V5KSA8IDApIHtcbiAgICAgICAgYXBwbHkodGhpcy5lbCwga2V5LCByZW1vdmVDbGFzcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIE5vcm1hbGl6ZSBvYmplY3RzIGFuZCBhcnJheXMgKHBvdGVudGlhbGx5IGNvbnRhaW5pbmcgb2JqZWN0cylcbiAqIGludG8gYXJyYXkgb2Ygc3RyaW5ncy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheTxTdHJpbmd8T2JqZWN0Pn0gdmFsdWVcbiAqIEByZXR1cm4ge0FycmF5PFN0cmluZz59XG4gKi9cblxuZnVuY3Rpb24gbm9ybWFsaXplJDEodmFsdWUpIHtcbiAgdmFyIHJlcyA9IFtdO1xuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIF9rZXkgPSB2YWx1ZVtpXTtcbiAgICAgIGlmIChfa2V5KSB7XG4gICAgICAgIGlmICh0eXBlb2YgX2tleSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICByZXMucHVzaChfa2V5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3IgKHZhciBrIGluIF9rZXkpIHtcbiAgICAgICAgICAgIGlmIChfa2V5W2tdKSByZXMucHVzaChrKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWVba2V5XSkgcmVzLnB1c2goa2V5KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBBZGQgb3IgcmVtb3ZlIGEgY2xhc3MvY2xhc3NlcyBvbiBhbiBlbGVtZW50XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGtleSBUaGUgY2xhc3MgbmFtZS4gVGhpcyBtYXkgb3IgbWF5IG5vdFxuICogICAgICAgICAgICAgICAgICAgICBjb250YWluIGEgc3BhY2UgY2hhcmFjdGVyLCBpbiBzdWNoIGFcbiAqICAgICAgICAgICAgICAgICAgICAgY2FzZSB3ZSdsbCBkZWFsIHdpdGggbXVsdGlwbGUgY2xhc3NcbiAqICAgICAgICAgICAgICAgICAgICAgbmFtZXMgYXQgb25jZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKi9cblxuZnVuY3Rpb24gYXBwbHkoZWwsIGtleSwgZm4pIHtcbiAga2V5ID0ga2V5LnRyaW0oKTtcbiAgaWYgKGtleS5pbmRleE9mKCcgJykgPT09IC0xKSB7XG4gICAgZm4oZWwsIGtleSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIFRoZSBrZXkgY29udGFpbnMgb25lIG9yIG1vcmUgc3BhY2UgY2hhcmFjdGVycy5cbiAgLy8gU2luY2UgYSBjbGFzcyBuYW1lIGRvZXNuJ3QgYWNjZXB0IHN1Y2ggY2hhcmFjdGVycywgd2VcbiAgLy8gdHJlYXQgaXQgYXMgbXVsdGlwbGUgY2xhc3Nlcy5cbiAgdmFyIGtleXMgPSBrZXkuc3BsaXQoL1xccysvKTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGZuKGVsLCBrZXlzW2ldKTtcbiAgfVxufVxuXG52YXIgY29tcG9uZW50ID0ge1xuXG4gIHByaW9yaXR5OiBDT01QT05FTlQsXG5cbiAgcGFyYW1zOiBbJ2tlZXAtYWxpdmUnLCAndHJhbnNpdGlvbi1tb2RlJywgJ2lubGluZS10ZW1wbGF0ZSddLFxuXG4gIC8qKlxuICAgKiBTZXR1cC4gVHdvIHBvc3NpYmxlIHVzYWdlczpcbiAgICpcbiAgICogLSBzdGF0aWM6XG4gICAqICAgPGNvbXA+IG9yIDxkaXYgdi1jb21wb25lbnQ9XCJjb21wXCI+XG4gICAqXG4gICAqIC0gZHluYW1pYzpcbiAgICogICA8Y29tcG9uZW50IDppcz1cInZpZXdcIj5cbiAgICovXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICBpZiAoIXRoaXMuZWwuX192dWVfXykge1xuICAgICAgLy8ga2VlcC1hbGl2ZSBjYWNoZVxuICAgICAgdGhpcy5rZWVwQWxpdmUgPSB0aGlzLnBhcmFtcy5rZWVwQWxpdmU7XG4gICAgICBpZiAodGhpcy5rZWVwQWxpdmUpIHtcbiAgICAgICAgdGhpcy5jYWNoZSA9IHt9O1xuICAgICAgfVxuICAgICAgLy8gY2hlY2sgaW5saW5lLXRlbXBsYXRlXG4gICAgICBpZiAodGhpcy5wYXJhbXMuaW5saW5lVGVtcGxhdGUpIHtcbiAgICAgICAgLy8gZXh0cmFjdCBpbmxpbmUgdGVtcGxhdGUgYXMgYSBEb2N1bWVudEZyYWdtZW50XG4gICAgICAgIHRoaXMuaW5saW5lVGVtcGxhdGUgPSBleHRyYWN0Q29udGVudCh0aGlzLmVsLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIC8vIGNvbXBvbmVudCByZXNvbHV0aW9uIHJlbGF0ZWQgc3RhdGVcbiAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gdGhpcy5Db21wb25lbnQgPSBudWxsO1xuICAgICAgLy8gdHJhbnNpdGlvbiByZWxhdGVkIHN0YXRlXG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmFscyA9IDA7XG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsQ2IgPSBudWxsO1xuICAgICAgLy8gY3JlYXRlIGEgcmVmIGFuY2hvclxuICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtY29tcG9uZW50Jyk7XG4gICAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcbiAgICAgIC8vIHJlbW92ZSBpcyBhdHRyaWJ1dGUuXG4gICAgICAvLyB0aGlzIGlzIHJlbW92ZWQgZHVyaW5nIGNvbXBpbGF0aW9uLCBidXQgYmVjYXVzZSBjb21waWxhdGlvbiBpc1xuICAgICAgLy8gY2FjaGVkLCB3aGVuIHRoZSBjb21wb25lbnQgaXMgdXNlZCBlbHNld2hlcmUgdGhpcyBhdHRyaWJ1dGVcbiAgICAgIC8vIHdpbGwgcmVtYWluIGF0IGxpbmsgdGltZS5cbiAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCdpcycpO1xuICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJzppcycpO1xuICAgICAgLy8gcmVtb3ZlIHJlZiwgc2FtZSBhcyBhYm92ZVxuICAgICAgaWYgKHRoaXMuZGVzY3JpcHRvci5yZWYpIHtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ3YtcmVmOicgKyBoeXBoZW5hdGUodGhpcy5kZXNjcmlwdG9yLnJlZikpO1xuICAgICAgfVxuICAgICAgLy8gaWYgc3RhdGljLCBidWlsZCByaWdodCBub3cuXG4gICAgICBpZiAodGhpcy5saXRlcmFsKSB7XG4gICAgICAgIHRoaXMuc2V0Q29tcG9uZW50KHRoaXMuZXhwcmVzc2lvbik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignY2Fubm90IG1vdW50IGNvbXBvbmVudCBcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgJyArICdvbiBhbHJlYWR5IG1vdW50ZWQgZWxlbWVudDogJyArIHRoaXMuZWwpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUHVibGljIHVwZGF0ZSwgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyIGluIHRoZSBkeW5hbWljXG4gICAqIGxpdGVyYWwgc2NlbmFyaW8sIGUuZy4gPGNvbXBvbmVudCA6aXM9XCJ2aWV3XCI+XG4gICAqL1xuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKCF0aGlzLmxpdGVyYWwpIHtcbiAgICAgIHRoaXMuc2V0Q29tcG9uZW50KHZhbHVlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFN3aXRjaCBkeW5hbWljIGNvbXBvbmVudHMuIE1heSByZXNvbHZlIHRoZSBjb21wb25lbnRcbiAgICogYXN5bmNocm9ub3VzbHksIGFuZCBwZXJmb3JtIHRyYW5zaXRpb24gYmFzZWQgb25cbiAgICogc3BlY2lmaWVkIHRyYW5zaXRpb24gbW9kZS4gQWNjZXB0cyBhIGZldyBhZGRpdGlvbmFsXG4gICAqIGFyZ3VtZW50cyBzcGVjaWZpY2FsbHkgZm9yIHZ1ZS1yb3V0ZXIuXG4gICAqXG4gICAqIFRoZSBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiB0aGUgZnVsbCB0cmFuc2l0aW9uIGlzXG4gICAqIGZpbmlzaGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBzZXRDb21wb25lbnQ6IGZ1bmN0aW9uIHNldENvbXBvbmVudCh2YWx1ZSwgY2IpIHtcbiAgICB0aGlzLmludmFsaWRhdGVQZW5kaW5nKCk7XG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgLy8ganVzdCByZW1vdmUgY3VycmVudFxuICAgICAgdGhpcy51bmJ1aWxkKHRydWUpO1xuICAgICAgdGhpcy5yZW1vdmUodGhpcy5jaGlsZFZNLCBjYik7XG4gICAgICB0aGlzLmNoaWxkVk0gPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB0aGlzLnJlc29sdmVDb21wb25lbnQodmFsdWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5tb3VudENvbXBvbmVudChjYik7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlc29sdmUgdGhlIGNvbXBvbmVudCBjb25zdHJ1Y3RvciB0byB1c2Ugd2hlbiBjcmVhdGluZ1xuICAgKiB0aGUgY2hpbGQgdm0uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSB2YWx1ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgKi9cblxuICByZXNvbHZlQ29tcG9uZW50OiBmdW5jdGlvbiByZXNvbHZlQ29tcG9uZW50KHZhbHVlLCBjYikge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uIChDb21wb25lbnQpIHtcbiAgICAgIHNlbGYuQ29tcG9uZW50TmFtZSA9IENvbXBvbmVudC5vcHRpb25zLm5hbWUgfHwgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyB2YWx1ZSA6IG51bGwpO1xuICAgICAgc2VsZi5Db21wb25lbnQgPSBDb21wb25lbnQ7XG4gICAgICBjYigpO1xuICAgIH0pO1xuICAgIHRoaXMudm0uX3Jlc29sdmVDb21wb25lbnQodmFsdWUsIHRoaXMucGVuZGluZ0NvbXBvbmVudENiKTtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIHVzaW5nIHRoZSBjdXJyZW50IGNvbnN0cnVjdG9yIGFuZFxuICAgKiByZXBsYWNlIHRoZSBleGlzdGluZyBpbnN0YW5jZS4gVGhpcyBtZXRob2QgZG9lc24ndCBjYXJlXG4gICAqIHdoZXRoZXIgdGhlIG5ldyBjb21wb25lbnQgYW5kIHRoZSBvbGQgb25lIGFyZSBhY3R1YWxseVxuICAgKiB0aGUgc2FtZS5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBtb3VudENvbXBvbmVudDogZnVuY3Rpb24gbW91bnRDb21wb25lbnQoY2IpIHtcbiAgICAvLyBhY3R1YWwgbW91bnRcbiAgICB0aGlzLnVuYnVpbGQodHJ1ZSk7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBhY3RpdmF0ZUhvb2tzID0gdGhpcy5Db21wb25lbnQub3B0aW9ucy5hY3RpdmF0ZTtcbiAgICB2YXIgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWQoKTtcbiAgICB2YXIgbmV3Q29tcG9uZW50ID0gdGhpcy5idWlsZCgpO1xuICAgIGlmIChhY3RpdmF0ZUhvb2tzICYmICFjYWNoZWQpIHtcbiAgICAgIHRoaXMud2FpdGluZ0ZvciA9IG5ld0NvbXBvbmVudDtcbiAgICAgIGNhbGxBY3RpdmF0ZUhvb2tzKGFjdGl2YXRlSG9va3MsIG5ld0NvbXBvbmVudCwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoc2VsZi53YWl0aW5nRm9yICE9PSBuZXdDb21wb25lbnQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi53YWl0aW5nRm9yID0gbnVsbDtcbiAgICAgICAgc2VsZi50cmFuc2l0aW9uKG5ld0NvbXBvbmVudCwgY2IpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVwZGF0ZSByZWYgZm9yIGtlcHQtYWxpdmUgY29tcG9uZW50XG4gICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgIG5ld0NvbXBvbmVudC5fdXBkYXRlUmVmKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnRyYW5zaXRpb24obmV3Q29tcG9uZW50LCBjYik7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSBjb21wb25lbnQgY2hhbmdlcyBvciB1bmJpbmRzIGJlZm9yZSBhbiBhc3luY1xuICAgKiBjb25zdHJ1Y3RvciBpcyByZXNvbHZlZCwgd2UgbmVlZCB0byBpbnZhbGlkYXRlIGl0c1xuICAgKiBwZW5kaW5nIGNhbGxiYWNrLlxuICAgKi9cblxuICBpbnZhbGlkYXRlUGVuZGluZzogZnVuY3Rpb24gaW52YWxpZGF0ZVBlbmRpbmcoKSB7XG4gICAgaWYgKHRoaXMucGVuZGluZ0NvbXBvbmVudENiKSB7XG4gICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYi5jYW5jZWwoKTtcbiAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gbnVsbDtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEluc3RhbnRpYXRlL2luc2VydCBhIG5ldyBjaGlsZCB2bS5cbiAgICogSWYga2VlcCBhbGl2ZSBhbmQgaGFzIGNhY2hlZCBpbnN0YW5jZSwgaW5zZXJ0IHRoYXRcbiAgICogaW5zdGFuY2U7IG90aGVyd2lzZSBidWlsZCBhIG5ldyBvbmUgYW5kIGNhY2hlIGl0LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW2V4dHJhT3B0aW9uc11cbiAgICogQHJldHVybiB7VnVlfSAtIHRoZSBjcmVhdGVkIGluc3RhbmNlXG4gICAqL1xuXG4gIGJ1aWxkOiBmdW5jdGlvbiBidWlsZChleHRyYU9wdGlvbnMpIHtcbiAgICB2YXIgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWQoKTtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICByZXR1cm4gY2FjaGVkO1xuICAgIH1cbiAgICBpZiAodGhpcy5Db21wb25lbnQpIHtcbiAgICAgIC8vIGRlZmF1bHQgb3B0aW9uc1xuICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgIG5hbWU6IHRoaXMuQ29tcG9uZW50TmFtZSxcbiAgICAgICAgZWw6IGNsb25lTm9kZSh0aGlzLmVsKSxcbiAgICAgICAgdGVtcGxhdGU6IHRoaXMuaW5saW5lVGVtcGxhdGUsXG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0byBhZGQgdGhlIGNoaWxkIHdpdGggY29ycmVjdCBwYXJlbnRcbiAgICAgICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgaXRzIHBhcmVudFxuICAgICAgICAvLyBzaG91bGQgYmUgdGhlIHRyYW5zY2x1c2lvbiBob3N0LlxuICAgICAgICBwYXJlbnQ6IHRoaXMuX2hvc3QgfHwgdGhpcy52bSxcbiAgICAgICAgLy8gaWYgbm8gaW5saW5lLXRlbXBsYXRlLCB0aGVuIHRoZSBjb21waWxlZFxuICAgICAgICAvLyBsaW5rZXIgY2FuIGJlIGNhY2hlZCBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLlxuICAgICAgICBfbGlua2VyQ2FjaGFibGU6ICF0aGlzLmlubGluZVRlbXBsYXRlLFxuICAgICAgICBfcmVmOiB0aGlzLmRlc2NyaXB0b3IucmVmLFxuICAgICAgICBfYXNDb21wb25lbnQ6IHRydWUsXG4gICAgICAgIF9pc1JvdXRlclZpZXc6IHRoaXMuX2lzUm91dGVyVmlldyxcbiAgICAgICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgY29udGV4dFxuICAgICAgICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2VcbiAgICAgICAgLy8gYW5kIGl0cyBob3N0LlxuICAgICAgICBfY29udGV4dDogdGhpcy52bSxcbiAgICAgICAgLy8gaWYgdGhpcyBpcyBpbnNpZGUgYW4gaW5saW5lIHYtZm9yLCB0aGUgc2NvcGVcbiAgICAgICAgLy8gd2lsbCBiZSB0aGUgaW50ZXJtZWRpYXRlIHNjb3BlIGNyZWF0ZWQgZm9yIHRoaXNcbiAgICAgICAgLy8gcmVwZWF0IGZyYWdtZW50LiB0aGlzIGlzIHVzZWQgZm9yIGxpbmtpbmcgcHJvcHNcbiAgICAgICAgLy8gYW5kIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuICAgICAgICBfc2NvcGU6IHRoaXMuX3Njb3BlLFxuICAgICAgICAvLyBwYXNzIGluIHRoZSBvd25lciBmcmFnbWVudCBvZiB0aGlzIGNvbXBvbmVudC5cbiAgICAgICAgLy8gdGhpcyBpcyBuZWNlc3Nhcnkgc28gdGhhdCB0aGUgZnJhZ21lbnQgY2FuIGtlZXBcbiAgICAgICAgLy8gdHJhY2sgb2YgaXRzIGNvbnRhaW5lZCBjb21wb25lbnRzIGluIG9yZGVyIHRvXG4gICAgICAgIC8vIGNhbGwgYXR0YWNoL2RldGFjaCBob29rcyBmb3IgdGhlbS5cbiAgICAgICAgX2ZyYWc6IHRoaXMuX2ZyYWdcbiAgICAgIH07XG4gICAgICAvLyBleHRyYSBvcHRpb25zXG4gICAgICAvLyBpbiAxLjAuMCB0aGlzIGlzIHVzZWQgYnkgdnVlLXJvdXRlciBvbmx5XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChleHRyYU9wdGlvbnMpIHtcbiAgICAgICAgZXh0ZW5kKG9wdGlvbnMsIGV4dHJhT3B0aW9ucyk7XG4gICAgICB9XG4gICAgICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5Db21wb25lbnQob3B0aW9ucyk7XG4gICAgICBpZiAodGhpcy5rZWVwQWxpdmUpIHtcbiAgICAgICAgdGhpcy5jYWNoZVt0aGlzLkNvbXBvbmVudC5jaWRdID0gY2hpbGQ7XG4gICAgICB9XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwuaGFzQXR0cmlidXRlKCd0cmFuc2l0aW9uJykgJiYgY2hpbGQuX2lzRnJhZ21lbnQpIHtcbiAgICAgICAgd2FybignVHJhbnNpdGlvbnMgd2lsbCBub3Qgd29yayBvbiBhIGZyYWdtZW50IGluc3RhbmNlLiAnICsgJ1RlbXBsYXRlOiAnICsgY2hpbGQuJG9wdGlvbnMudGVtcGxhdGUsIGNoaWxkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRyeSB0byBnZXQgYSBjYWNoZWQgaW5zdGFuY2Ugb2YgdGhlIGN1cnJlbnQgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcmV0dXJuIHtWdWV8dW5kZWZpbmVkfVxuICAgKi9cblxuICBnZXRDYWNoZWQ6IGZ1bmN0aW9uIGdldENhY2hlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5rZWVwQWxpdmUgJiYgdGhpcy5jYWNoZVt0aGlzLkNvbXBvbmVudC5jaWRdO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUZWFyZG93biB0aGUgY3VycmVudCBjaGlsZCwgYnV0IGRlZmVycyBjbGVhbnVwIHNvXG4gICAqIHRoYXQgd2UgY2FuIHNlcGFyYXRlIHRoZSBkZXN0cm95IGFuZCByZW1vdmFsIHN0ZXBzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyXG4gICAqL1xuXG4gIHVuYnVpbGQ6IGZ1bmN0aW9uIHVuYnVpbGQoZGVmZXIpIHtcbiAgICBpZiAodGhpcy53YWl0aW5nRm9yKSB7XG4gICAgICBpZiAoIXRoaXMua2VlcEFsaXZlKSB7XG4gICAgICAgIHRoaXMud2FpdGluZ0Zvci4kZGVzdHJveSgpO1xuICAgICAgfVxuICAgICAgdGhpcy53YWl0aW5nRm9yID0gbnVsbDtcbiAgICB9XG4gICAgdmFyIGNoaWxkID0gdGhpcy5jaGlsZFZNO1xuICAgIGlmICghY2hpbGQgfHwgdGhpcy5rZWVwQWxpdmUpIHtcbiAgICAgIGlmIChjaGlsZCkge1xuICAgICAgICAvLyByZW1vdmUgcmVmXG4gICAgICAgIGNoaWxkLl9pbmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIGNoaWxkLl91cGRhdGVSZWYodHJ1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHRoZSBzb2xlIHB1cnBvc2Ugb2YgYGRlZmVyQ2xlYW51cGAgaXMgc28gdGhhdCB3ZSBjYW5cbiAgICAvLyBcImRlYWN0aXZhdGVcIiB0aGUgdm0gcmlnaHQgbm93IGFuZCBwZXJmb3JtIERPTSByZW1vdmFsXG4gICAgLy8gbGF0ZXIuXG4gICAgY2hpbGQuJGRlc3Ryb3koZmFsc2UsIGRlZmVyKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlIGN1cnJlbnQgZGVzdHJveWVkIGNoaWxkIGFuZCBtYW51YWxseSBkb1xuICAgKiB0aGUgY2xlYW51cCBhZnRlciByZW1vdmFsLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgKi9cblxuICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShjaGlsZCwgY2IpIHtcbiAgICB2YXIga2VlcEFsaXZlID0gdGhpcy5rZWVwQWxpdmU7XG4gICAgaWYgKGNoaWxkKSB7XG4gICAgICAvLyB3ZSBtYXkgaGF2ZSBhIGNvbXBvbmVudCBzd2l0Y2ggd2hlbiBhIHByZXZpb3VzXG4gICAgICAvLyBjb21wb25lbnQgaXMgc3RpbGwgYmVpbmcgdHJhbnNpdGlvbmVkIG91dC5cbiAgICAgIC8vIHdlIHdhbnQgdG8gdHJpZ2dlciBvbmx5IG9uZSBsYXN0ZXN0IGluc2VydGlvbiBjYlxuICAgICAgLy8gd2hlbiB0aGUgZXhpc3RpbmcgdHJhbnNpdGlvbiBmaW5pc2hlcy4gKCMxMTE5KVxuICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbHMrKztcbiAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxDYiA9IGNiO1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgY2hpbGQuJHJlbW92ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxzLS07XG4gICAgICAgIGlmICgha2VlcEFsaXZlKSBjaGlsZC5fY2xlYW51cCgpO1xuICAgICAgICBpZiAoIXNlbGYucGVuZGluZ1JlbW92YWxzICYmIHNlbGYucGVuZGluZ1JlbW92YWxDYikge1xuICAgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxDYigpO1xuICAgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxDYiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoY2IpIHtcbiAgICAgIGNiKCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBBY3R1YWxseSBzd2FwIHRoZSBjb21wb25lbnRzLCBkZXBlbmRpbmcgb24gdGhlXG4gICAqIHRyYW5zaXRpb24gbW9kZS4gRGVmYXVsdHMgdG8gc2ltdWx0YW5lb3VzLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgdHJhbnNpdGlvbjogZnVuY3Rpb24gdHJhbnNpdGlvbih0YXJnZXQsIGNiKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBjdXJyZW50ID0gdGhpcy5jaGlsZFZNO1xuICAgIC8vIGZvciBkZXZ0b29sIGluc3BlY3Rpb25cbiAgICBpZiAoY3VycmVudCkgY3VycmVudC5faW5hY3RpdmUgPSB0cnVlO1xuICAgIHRhcmdldC5faW5hY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLmNoaWxkVk0gPSB0YXJnZXQ7XG4gICAgc3dpdGNoIChzZWxmLnBhcmFtcy50cmFuc2l0aW9uTW9kZSkge1xuICAgICAgY2FzZSAnaW4tb3V0JzpcbiAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50LCBjYik7XG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ291dC1pbic6XG4gICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgY2IpO1xuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50KTtcbiAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGNiKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVuYmluZC5cbiAgICovXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdGhpcy5pbnZhbGlkYXRlUGVuZGluZygpO1xuICAgIC8vIERvIG5vdCBkZWZlciBjbGVhbnVwIHdoZW4gdW5iaW5kaW5nXG4gICAgdGhpcy51bmJ1aWxkKCk7XG4gICAgLy8gZGVzdHJveSBhbGwga2VlcC1hbGl2ZSBjYWNoZWQgaW5zdGFuY2VzXG4gICAgaWYgKHRoaXMuY2FjaGUpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmNhY2hlKSB7XG4gICAgICAgIHRoaXMuY2FjaGVba2V5XS4kZGVzdHJveSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5jYWNoZSA9IG51bGw7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIENhbGwgYWN0aXZhdGUgaG9va3MgaW4gb3JkZXIgKGFzeW5jaHJvbm91cylcbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBob29rc1xuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICovXG5cbmZ1bmN0aW9uIGNhbGxBY3RpdmF0ZUhvb2tzKGhvb2tzLCB2bSwgY2IpIHtcbiAgdmFyIHRvdGFsID0gaG9va3MubGVuZ3RoO1xuICB2YXIgY2FsbGVkID0gMDtcbiAgaG9va3NbMF0uY2FsbCh2bSwgbmV4dCk7XG4gIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgaWYgKCsrY2FsbGVkID49IHRvdGFsKSB7XG4gICAgICBjYigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBob29rc1tjYWxsZWRdLmNhbGwodm0sIG5leHQpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgcHJvcEJpbmRpbmdNb2RlcyA9IGNvbmZpZy5fcHJvcEJpbmRpbmdNb2RlcztcbnZhciBlbXB0eSA9IHt9O1xuXG4vLyByZWdleGVzXG52YXIgaWRlbnRSRSQxID0gL15bJF9hLXpBLVpdK1tcXHckXSokLztcbnZhciBzZXR0YWJsZVBhdGhSRSA9IC9eW0EtWmEtel8kXVtcXHckXSooXFwuW0EtWmEtel8kXVtcXHckXSp8XFxbW15cXFtcXF1dK1xcXSkqJC87XG5cbi8qKlxuICogQ29tcGlsZSBwcm9wcyBvbiBhIHJvb3QgZWxlbWVudCBhbmQgcmV0dXJuXG4gKiBhIHByb3BzIGxpbmsgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG4gKiBAcGFyYW0ge0FycmF5fSBwcm9wT3B0aW9uc1xuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gcHJvcHNMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlUHJvcHMoZWwsIHByb3BPcHRpb25zLCB2bSkge1xuICB2YXIgcHJvcHMgPSBbXTtcbiAgdmFyIG5hbWVzID0gT2JqZWN0LmtleXMocHJvcE9wdGlvbnMpO1xuICB2YXIgaSA9IG5hbWVzLmxlbmd0aDtcbiAgdmFyIG9wdGlvbnMsIG5hbWUsIGF0dHIsIHZhbHVlLCBwYXRoLCBwYXJzZWQsIHByb3A7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBuYW1lID0gbmFtZXNbaV07XG4gICAgb3B0aW9ucyA9IHByb3BPcHRpb25zW25hbWVdIHx8IGVtcHR5O1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgbmFtZSA9PT0gJyRkYXRhJykge1xuICAgICAgd2FybignRG8gbm90IHVzZSAkZGF0YSBhcyBwcm9wLicsIHZtKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIHByb3BzIGNvdWxkIGNvbnRhaW4gZGFzaGVzLCB3aGljaCB3aWxsIGJlXG4gICAgLy8gaW50ZXJwcmV0ZWQgYXMgbWludXMgY2FsY3VsYXRpb25zIGJ5IHRoZSBwYXJzZXJcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIGNhbWVsaXplIHRoZSBwYXRoIGhlcmVcbiAgICBwYXRoID0gY2FtZWxpemUobmFtZSk7XG4gICAgaWYgKCFpZGVudFJFJDEudGVzdChwYXRoKSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHByb3Aga2V5OiBcIicgKyBuYW1lICsgJ1wiLiBQcm9wIGtleXMgJyArICdtdXN0IGJlIHZhbGlkIGlkZW50aWZpZXJzLicsIHZtKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHByb3AgPSB7XG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgcGF0aDogcGF0aCxcbiAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICBtb2RlOiBwcm9wQmluZGluZ01vZGVzLk9ORV9XQVksXG4gICAgICByYXc6IG51bGxcbiAgICB9O1xuXG4gICAgYXR0ciA9IGh5cGhlbmF0ZShuYW1lKTtcbiAgICAvLyBmaXJzdCBjaGVjayBkeW5hbWljIHZlcnNpb25cbiAgICBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIpKSA9PT0gbnVsbCkge1xuICAgICAgaWYgKCh2YWx1ZSA9IGdldEJpbmRBdHRyKGVsLCBhdHRyICsgJy5zeW5jJykpICE9PSBudWxsKSB7XG4gICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWTtcbiAgICAgIH0gZWxzZSBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIgKyAnLm9uY2UnKSkgIT09IG51bGwpIHtcbiAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfVElNRTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAvLyBoYXMgZHluYW1pYyBiaW5kaW5nIVxuICAgICAgcHJvcC5yYXcgPSB2YWx1ZTtcbiAgICAgIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcbiAgICAgIHZhbHVlID0gcGFyc2VkLmV4cHJlc3Npb247XG4gICAgICBwcm9wLmZpbHRlcnMgPSBwYXJzZWQuZmlsdGVycztcbiAgICAgIC8vIGNoZWNrIGJpbmRpbmcgdHlwZVxuICAgICAgaWYgKGlzTGl0ZXJhbCh2YWx1ZSkgJiYgIXBhcnNlZC5maWx0ZXJzKSB7XG4gICAgICAgIC8vIGZvciBleHByZXNzaW9ucyBjb250YWluaW5nIGxpdGVyYWwgbnVtYmVycyBhbmRcbiAgICAgICAgLy8gYm9vbGVhbnMsIHRoZXJlJ3Mgbm8gbmVlZCB0byBzZXR1cCBhIHByb3AgYmluZGluZyxcbiAgICAgICAgLy8gc28gd2UgY2FuIG9wdGltaXplIHRoZW0gYXMgYSBvbmUtdGltZSBzZXQuXG4gICAgICAgIHByb3Aub3B0aW1pemVkTGl0ZXJhbCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9wLmR5bmFtaWMgPSB0cnVlO1xuICAgICAgICAvLyBjaGVjayBub24tc2V0dGFibGUgcGF0aCBmb3IgdHdvLXdheSBiaW5kaW5nc1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBwcm9wLm1vZGUgPT09IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWSAmJiAhc2V0dGFibGVQYXRoUkUudGVzdCh2YWx1ZSkpIHtcbiAgICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLk9ORV9XQVk7XG4gICAgICAgICAgd2FybignQ2Fubm90IGJpbmQgdHdvLXdheSBwcm9wIHdpdGggbm9uLXNldHRhYmxlICcgKyAncGFyZW50IHBhdGg6ICcgKyB2YWx1ZSwgdm0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBwcm9wLnBhcmVudFBhdGggPSB2YWx1ZTtcblxuICAgICAgLy8gd2FybiByZXF1aXJlZCB0d28td2F5XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBvcHRpb25zLnR3b1dheSAmJiBwcm9wLm1vZGUgIT09IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWSkge1xuICAgICAgICB3YXJuKCdQcm9wIFwiJyArIG5hbWUgKyAnXCIgZXhwZWN0cyBhIHR3by13YXkgYmluZGluZyB0eXBlLicsIHZtKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCh2YWx1ZSA9IGdldEF0dHIoZWwsIGF0dHIpKSAhPT0gbnVsbCkge1xuICAgICAgLy8gaGFzIGxpdGVyYWwgYmluZGluZyFcbiAgICAgIHByb3AucmF3ID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvLyBjaGVjayBwb3NzaWJsZSBjYW1lbENhc2UgcHJvcCB1c2FnZVxuICAgICAgdmFyIGxvd2VyQ2FzZU5hbWUgPSBwYXRoLnRvTG93ZXJDYXNlKCk7XG4gICAgICB2YWx1ZSA9IC9bQS1aXFwtXS8udGVzdChuYW1lKSAmJiAoZWwuZ2V0QXR0cmlidXRlKGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLm9uY2UnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSArICcub25jZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lICsgJy5zeW5jJykgfHwgZWwuZ2V0QXR0cmlidXRlKCd2LWJpbmQ6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLnN5bmMnKSk7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgd2FybignUG9zc2libGUgdXNhZ2UgZXJyb3IgZm9yIHByb3AgYCcgKyBsb3dlckNhc2VOYW1lICsgJ2AgLSAnICsgJ2RpZCB5b3UgbWVhbiBgJyArIGF0dHIgKyAnYD8gSFRNTCBpcyBjYXNlLWluc2Vuc2l0aXZlLCByZW1lbWJlciB0byB1c2UgJyArICdrZWJhYi1jYXNlIGZvciBwcm9wcyBpbiB0ZW1wbGF0ZXMuJywgdm0pO1xuICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJlcXVpcmVkKSB7XG4gICAgICAgIC8vIHdhcm4gbWlzc2luZyByZXF1aXJlZFxuICAgICAgICB3YXJuKCdNaXNzaW5nIHJlcXVpcmVkIHByb3A6ICcgKyBuYW1lLCB2bSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIHB1c2ggcHJvcFxuICAgIHByb3BzLnB1c2gocHJvcCk7XG4gIH1cbiAgcmV0dXJuIG1ha2VQcm9wc0xpbmtGbihwcm9wcyk7XG59XG5cbi8qKlxuICogQnVpbGQgYSBmdW5jdGlvbiB0aGF0IGFwcGxpZXMgcHJvcHMgdG8gYSB2bS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBwcm9wc1xuICogQHJldHVybiB7RnVuY3Rpb259IHByb3BzTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gbWFrZVByb3BzTGlua0ZuKHByb3BzKSB7XG4gIHJldHVybiBmdW5jdGlvbiBwcm9wc0xpbmtGbih2bSwgc2NvcGUpIHtcbiAgICAvLyBzdG9yZSByZXNvbHZlZCBwcm9wcyBpbmZvXG4gICAgdm0uX3Byb3BzID0ge307XG4gICAgdmFyIGlubGluZVByb3BzID0gdm0uJG9wdGlvbnMucHJvcHNEYXRhO1xuICAgIHZhciBpID0gcHJvcHMubGVuZ3RoO1xuICAgIHZhciBwcm9wLCBwYXRoLCBvcHRpb25zLCB2YWx1ZSwgcmF3O1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHByb3AgPSBwcm9wc1tpXTtcbiAgICAgIHJhdyA9IHByb3AucmF3O1xuICAgICAgcGF0aCA9IHByb3AucGF0aDtcbiAgICAgIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG4gICAgICB2bS5fcHJvcHNbcGF0aF0gPSBwcm9wO1xuICAgICAgaWYgKGlubGluZVByb3BzICYmIGhhc093bihpbmxpbmVQcm9wcywgcGF0aCkpIHtcbiAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIGlubGluZVByb3BzW3BhdGhdKTtcbiAgICAgIH1pZiAocmF3ID09PSBudWxsKSB7XG4gICAgICAgIC8vIGluaXRpYWxpemUgYWJzZW50IHByb3BcbiAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHVuZGVmaW5lZCk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AuZHluYW1pYykge1xuICAgICAgICAvLyBkeW5hbWljIHByb3BcbiAgICAgICAgaWYgKHByb3AubW9kZSA9PT0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfVElNRSkge1xuICAgICAgICAgIC8vIG9uZSB0aW1lIGJpbmRpbmdcbiAgICAgICAgICB2YWx1ZSA9IChzY29wZSB8fCB2bS5fY29udGV4dCB8fCB2bSkuJGdldChwcm9wLnBhcmVudFBhdGgpO1xuICAgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHZtLl9jb250ZXh0KSB7XG4gICAgICAgICAgICAvLyBkeW5hbWljIGJpbmRpbmdcbiAgICAgICAgICAgIHZtLl9iaW5kRGlyKHtcbiAgICAgICAgICAgICAgbmFtZTogJ3Byb3AnLFxuICAgICAgICAgICAgICBkZWY6IHByb3BEZWYsXG4gICAgICAgICAgICAgIHByb3A6IHByb3BcbiAgICAgICAgICAgIH0sIG51bGwsIG51bGwsIHNjb3BlKTsgLy8gZWwsIGhvc3QsIHNjb3BlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gcm9vdCBpbnN0YW5jZVxuICAgICAgICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdm0uJGdldChwcm9wLnBhcmVudFBhdGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChwcm9wLm9wdGltaXplZExpdGVyYWwpIHtcbiAgICAgICAgLy8gb3B0aW1pemVkIGxpdGVyYWwsIGNhc3QgaXQgYW5kIGp1c3Qgc2V0IG9uY2VcbiAgICAgICAgdmFyIHN0cmlwcGVkID0gc3RyaXBRdW90ZXMocmF3KTtcbiAgICAgICAgdmFsdWUgPSBzdHJpcHBlZCA9PT0gcmF3ID8gdG9Cb29sZWFuKHRvTnVtYmVyKHJhdykpIDogc3RyaXBwZWQ7XG4gICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzdHJpbmcgbGl0ZXJhbCwgYnV0IHdlIG5lZWQgdG8gY2F0ZXIgZm9yXG4gICAgICAgIC8vIEJvb2xlYW4gcHJvcHMgd2l0aCBubyB2YWx1ZSwgb3Igd2l0aCBzYW1lXG4gICAgICAgIC8vIGxpdGVyYWwgdmFsdWUgKGUuZy4gZGlzYWJsZWQ9XCJkaXNhYmxlZFwiKVxuICAgICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1sb2FkZXIvaXNzdWVzLzE4MlxuICAgICAgICB2YWx1ZSA9IG9wdGlvbnMudHlwZSA9PT0gQm9vbGVhbiAmJiAocmF3ID09PSAnJyB8fCByYXcgPT09IGh5cGhlbmF0ZShwcm9wLm5hbWUpKSA/IHRydWUgOiByYXc7XG4gICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIFByb2Nlc3MgYSBwcm9wIHdpdGggYSByYXdWYWx1ZSwgYXBwbHlpbmcgbmVjZXNzYXJ5IGNvZXJzaW9ucyxcbiAqIGRlZmF1bHQgdmFsdWVzICYgYXNzZXJ0aW9ucyBhbmQgY2FsbCB0aGUgZ2l2ZW4gY2FsbGJhY2sgd2l0aFxuICogcHJvY2Vzc2VkIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BcbiAqIEBwYXJhbSB7Kn0gcmF3VmFsdWVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKi9cblxuZnVuY3Rpb24gcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgcmF3VmFsdWUsIGZuKSB7XG4gIHZhciBpc1NpbXBsZSA9IHByb3AuZHluYW1pYyAmJiBpc1NpbXBsZVBhdGgocHJvcC5wYXJlbnRQYXRoKTtcbiAgdmFyIHZhbHVlID0gcmF3VmFsdWU7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdmFsdWUgPSBnZXRQcm9wRGVmYXVsdFZhbHVlKHZtLCBwcm9wKTtcbiAgfVxuICB2YWx1ZSA9IGNvZXJjZVByb3AocHJvcCwgdmFsdWUsIHZtKTtcbiAgdmFyIGNvZXJjZWQgPSB2YWx1ZSAhPT0gcmF3VmFsdWU7XG4gIGlmICghYXNzZXJ0UHJvcChwcm9wLCB2YWx1ZSwgdm0pKSB7XG4gICAgdmFsdWUgPSB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKGlzU2ltcGxlICYmICFjb2VyY2VkKSB7XG4gICAgd2l0aG91dENvbnZlcnNpb24oZnVuY3Rpb24gKCkge1xuICAgICAgZm4odmFsdWUpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGZuKHZhbHVlKTtcbiAgfVxufVxuXG4vKipcbiAqIFNldCBhIHByb3AncyBpbml0aWFsIHZhbHVlIG9uIGEgdm0gYW5kIGl0cyBkYXRhIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKi9cblxuZnVuY3Rpb24gaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKSB7XG4gIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHZhbHVlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBkZWZpbmVSZWFjdGl2ZSh2bSwgcHJvcC5wYXRoLCB2YWx1ZSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFVwZGF0ZSBhIHByb3AncyB2YWx1ZSBvbiBhIHZtLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqL1xuXG5mdW5jdGlvbiB1cGRhdGVQcm9wKHZtLCBwcm9wLCB2YWx1ZSkge1xuICBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCB2YWx1ZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdm1bcHJvcC5wYXRoXSA9IHZhbHVlO1xuICB9KTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGRlZmF1bHQgdmFsdWUgb2YgYSBwcm9wLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BcbiAqIEByZXR1cm4geyp9XG4gKi9cblxuZnVuY3Rpb24gZ2V0UHJvcERlZmF1bHRWYWx1ZSh2bSwgcHJvcCkge1xuICAvLyBubyBkZWZhdWx0LCByZXR1cm4gdW5kZWZpbmVkXG4gIHZhciBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xuICBpZiAoIWhhc093bihvcHRpb25zLCAnZGVmYXVsdCcpKSB7XG4gICAgLy8gYWJzZW50IGJvb2xlYW4gdmFsdWUgZGVmYXVsdHMgdG8gZmFsc2VcbiAgICByZXR1cm4gb3B0aW9ucy50eXBlID09PSBCb29sZWFuID8gZmFsc2UgOiB1bmRlZmluZWQ7XG4gIH1cbiAgdmFyIGRlZiA9IG9wdGlvbnNbJ2RlZmF1bHQnXTtcbiAgLy8gd2FybiBhZ2FpbnN0IG5vbi1mYWN0b3J5IGRlZmF1bHRzIGZvciBPYmplY3QgJiBBcnJheVxuICBpZiAoaXNPYmplY3QoZGVmKSkge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBkZWZhdWx0IHZhbHVlIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIjogJyArICdQcm9wcyB3aXRoIHR5cGUgT2JqZWN0L0FycmF5IG11c3QgdXNlIGEgZmFjdG9yeSBmdW5jdGlvbiAnICsgJ3RvIHJldHVybiB0aGUgZGVmYXVsdCB2YWx1ZS4nLCB2bSk7XG4gIH1cbiAgLy8gY2FsbCBmYWN0b3J5IGZ1bmN0aW9uIGZvciBub24tRnVuY3Rpb24gdHlwZXNcbiAgcmV0dXJuIHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicgJiYgb3B0aW9ucy50eXBlICE9PSBGdW5jdGlvbiA/IGRlZi5jYWxsKHZtKSA6IGRlZjtcbn1cblxuLyoqXG4gKiBBc3NlcnQgd2hldGhlciBhIHByb3AgaXMgdmFsaWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHByb3BcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICovXG5cbmZ1bmN0aW9uIGFzc2VydFByb3AocHJvcCwgdmFsdWUsIHZtKSB7XG4gIGlmICghcHJvcC5vcHRpb25zLnJlcXVpcmVkICYmICggLy8gbm9uLXJlcXVpcmVkXG4gIHByb3AucmF3ID09PSBudWxsIHx8IC8vIGFic2NlbnRcbiAgdmFsdWUgPT0gbnVsbCkgLy8gbnVsbCBvciB1bmRlZmluZWRcbiAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIHZhciBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xuICB2YXIgdHlwZSA9IG9wdGlvbnMudHlwZTtcbiAgdmFyIHZhbGlkID0gIXR5cGU7XG4gIHZhciBleHBlY3RlZFR5cGVzID0gW107XG4gIGlmICh0eXBlKSB7XG4gICAgaWYgKCFpc0FycmF5KHR5cGUpKSB7XG4gICAgICB0eXBlID0gW3R5cGVdO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR5cGUubGVuZ3RoICYmICF2YWxpZDsgaSsrKSB7XG4gICAgICB2YXIgYXNzZXJ0ZWRUeXBlID0gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZVtpXSk7XG4gICAgICBleHBlY3RlZFR5cGVzLnB1c2goYXNzZXJ0ZWRUeXBlLmV4cGVjdGVkVHlwZSk7XG4gICAgICB2YWxpZCA9IGFzc2VydGVkVHlwZS52YWxpZDtcbiAgICB9XG4gIH1cbiAgaWYgKCF2YWxpZCkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB3YXJuKCdJbnZhbGlkIHByb3A6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIi4nICsgJyBFeHBlY3RlZCAnICsgZXhwZWN0ZWRUeXBlcy5tYXAoZm9ybWF0VHlwZSkuam9pbignLCAnKSArICcsIGdvdCAnICsgZm9ybWF0VmFsdWUodmFsdWUpICsgJy4nLCB2bSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgdmFsaWRhdG9yID0gb3B0aW9ucy52YWxpZGF0b3I7XG4gIGlmICh2YWxpZGF0b3IpIHtcbiAgICBpZiAoIXZhbGlkYXRvcih2YWx1ZSkpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBwcm9wOiBjdXN0b20gdmFsaWRhdG9yIGNoZWNrIGZhaWxlZCBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCIuJywgdm0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBGb3JjZSBwYXJzaW5nIHZhbHVlIHdpdGggY29lcmNlIG9wdGlvbi5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7Kn1cbiAqL1xuXG5mdW5jdGlvbiBjb2VyY2VQcm9wKHByb3AsIHZhbHVlLCB2bSkge1xuICB2YXIgY29lcmNlID0gcHJvcC5vcHRpb25zLmNvZXJjZTtcbiAgaWYgKCFjb2VyY2UpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKHR5cGVvZiBjb2VyY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gY29lcmNlKHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgY29lcmNlIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIjogZXhwZWN0ZWQgZnVuY3Rpb24sIGdvdCAnICsgdHlwZW9mIGNvZXJjZSArICcuJywgdm0pO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxufVxuXG4vKipcbiAqIEFzc2VydCB0aGUgdHlwZSBvZiBhIHZhbHVlXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gdHlwZVxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIGFzc2VydFR5cGUodmFsdWUsIHR5cGUpIHtcbiAgdmFyIHZhbGlkO1xuICB2YXIgZXhwZWN0ZWRUeXBlO1xuICBpZiAodHlwZSA9PT0gU3RyaW5nKSB7XG4gICAgZXhwZWN0ZWRUeXBlID0gJ3N0cmluZyc7XG4gICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBOdW1iZXIpIHtcbiAgICBleHBlY3RlZFR5cGUgPSAnbnVtYmVyJztcbiAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IEJvb2xlYW4pIHtcbiAgICBleHBlY3RlZFR5cGUgPSAnYm9vbGVhbic7XG4gICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBGdW5jdGlvbikge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdmdW5jdGlvbic7XG4gICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBPYmplY3QpIHtcbiAgICBleHBlY3RlZFR5cGUgPSAnb2JqZWN0JztcbiAgICB2YWxpZCA9IGlzUGxhaW5PYmplY3QodmFsdWUpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IEFycmF5KSB7XG4gICAgZXhwZWN0ZWRUeXBlID0gJ2FycmF5JztcbiAgICB2YWxpZCA9IGlzQXJyYXkodmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHZhbGlkID0gdmFsdWUgaW5zdGFuY2VvZiB0eXBlO1xuICB9XG4gIHJldHVybiB7XG4gICAgdmFsaWQ6IHZhbGlkLFxuICAgIGV4cGVjdGVkVHlwZTogZXhwZWN0ZWRUeXBlXG4gIH07XG59XG5cbi8qKlxuICogRm9ybWF0IHR5cGUgZm9yIG91dHB1dFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0VHlwZSh0eXBlKSB7XG4gIHJldHVybiB0eXBlID8gdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR5cGUuc2xpY2UoMSkgOiAnY3VzdG9tIHR5cGUnO1xufVxuXG4vKipcbiAqIEZvcm1hdCB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRWYWx1ZSh2YWwpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpLnNsaWNlKDgsIC0xKTtcbn1cblxudmFyIGJpbmRpbmdNb2RlcyA9IGNvbmZpZy5fcHJvcEJpbmRpbmdNb2RlcztcblxudmFyIHByb3BEZWYgPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgY2hpbGQgPSB0aGlzLnZtO1xuICAgIHZhciBwYXJlbnQgPSBjaGlsZC5fY29udGV4dDtcbiAgICAvLyBwYXNzZWQgaW4gZnJvbSBjb21waWxlciBkaXJlY3RseVxuICAgIHZhciBwcm9wID0gdGhpcy5kZXNjcmlwdG9yLnByb3A7XG4gICAgdmFyIGNoaWxkS2V5ID0gcHJvcC5wYXRoO1xuICAgIHZhciBwYXJlbnRLZXkgPSBwcm9wLnBhcmVudFBhdGg7XG4gICAgdmFyIHR3b1dheSA9IHByb3AubW9kZSA9PT0gYmluZGluZ01vZGVzLlRXT19XQVk7XG5cbiAgICB2YXIgcGFyZW50V2F0Y2hlciA9IHRoaXMucGFyZW50V2F0Y2hlciA9IG5ldyBXYXRjaGVyKHBhcmVudCwgcGFyZW50S2V5LCBmdW5jdGlvbiAodmFsKSB7XG4gICAgICB1cGRhdGVQcm9wKGNoaWxkLCBwcm9wLCB2YWwpO1xuICAgIH0sIHtcbiAgICAgIHR3b1dheTogdHdvV2F5LFxuICAgICAgZmlsdGVyczogcHJvcC5maWx0ZXJzLFxuICAgICAgLy8gaW1wb3J0YW50OiBwcm9wcyBuZWVkIHRvIGJlIG9ic2VydmVkIG9uIHRoZVxuICAgICAgLy8gdi1mb3Igc2NvcGUgaWYgcHJlc2VudFxuICAgICAgc2NvcGU6IHRoaXMuX3Njb3BlXG4gICAgfSk7XG5cbiAgICAvLyBzZXQgdGhlIGNoaWxkIGluaXRpYWwgdmFsdWUuXG4gICAgaW5pdFByb3AoY2hpbGQsIHByb3AsIHBhcmVudFdhdGNoZXIudmFsdWUpO1xuXG4gICAgLy8gc2V0dXAgdHdvLXdheSBiaW5kaW5nXG4gICAgaWYgKHR3b1dheSkge1xuICAgICAgLy8gaW1wb3J0YW50OiBkZWZlciB0aGUgY2hpbGQgd2F0Y2hlciBjcmVhdGlvbiB1bnRpbFxuICAgICAgLy8gdGhlIGNyZWF0ZWQgaG9vayAoYWZ0ZXIgZGF0YSBvYnNlcnZhdGlvbilcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIGNoaWxkLiRvbmNlKCdwcmUtaG9vazpjcmVhdGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLmNoaWxkV2F0Y2hlciA9IG5ldyBXYXRjaGVyKGNoaWxkLCBjaGlsZEtleSwgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgIHBhcmVudFdhdGNoZXIuc2V0KHZhbCk7XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAvLyBlbnN1cmUgc3luYyB1cHdhcmQgYmVmb3JlIHBhcmVudCBzeW5jIGRvd24uXG4gICAgICAgICAgLy8gdGhpcyBpcyBuZWNlc3NhcnkgaW4gY2FzZXMgZS5nLiB0aGUgY2hpbGRcbiAgICAgICAgICAvLyBtdXRhdGVzIGEgcHJvcCBhcnJheSwgdGhlbiByZXBsYWNlcyBpdC4gKCMxNjgzKVxuICAgICAgICAgIHN5bmM6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdGhpcy5wYXJlbnRXYXRjaGVyLnRlYXJkb3duKCk7XG4gICAgaWYgKHRoaXMuY2hpbGRXYXRjaGVyKSB7XG4gICAgICB0aGlzLmNoaWxkV2F0Y2hlci50ZWFyZG93bigpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHF1ZXVlJDEgPSBbXTtcbnZhciBxdWV1ZWQgPSBmYWxzZTtcblxuLyoqXG4gKiBQdXNoIGEgam9iIGludG8gdGhlIHF1ZXVlLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGpvYlxuICovXG5cbmZ1bmN0aW9uIHB1c2hKb2Ioam9iKSB7XG4gIHF1ZXVlJDEucHVzaChqb2IpO1xuICBpZiAoIXF1ZXVlZCkge1xuICAgIHF1ZXVlZCA9IHRydWU7XG4gICAgbmV4dFRpY2soZmx1c2gpO1xuICB9XG59XG5cbi8qKlxuICogRmx1c2ggdGhlIHF1ZXVlLCBhbmQgZG8gb25lIGZvcmNlZCByZWZsb3cgYmVmb3JlXG4gKiB0cmlnZ2VyaW5nIHRyYW5zaXRpb25zLlxuICovXG5cbmZ1bmN0aW9uIGZsdXNoKCkge1xuICAvLyBGb3JjZSBsYXlvdXRcbiAgdmFyIGYgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlJDEubGVuZ3RoOyBpKyspIHtcbiAgICBxdWV1ZSQxW2ldKCk7XG4gIH1cbiAgcXVldWUkMSA9IFtdO1xuICBxdWV1ZWQgPSBmYWxzZTtcbiAgLy8gZHVtbXkgcmV0dXJuLCBzbyBqcyBsaW50ZXJzIGRvbid0IGNvbXBsYWluIGFib3V0XG4gIC8vIHVudXNlZCB2YXJpYWJsZSBmXG4gIHJldHVybiBmO1xufVxuXG52YXIgVFlQRV9UUkFOU0lUSU9OID0gJ3RyYW5zaXRpb24nO1xudmFyIFRZUEVfQU5JTUFUSU9OID0gJ2FuaW1hdGlvbic7XG52YXIgdHJhbnNEdXJhdGlvblByb3AgPSB0cmFuc2l0aW9uUHJvcCArICdEdXJhdGlvbic7XG52YXIgYW5pbUR1cmF0aW9uUHJvcCA9IGFuaW1hdGlvblByb3AgKyAnRHVyYXRpb24nO1xuXG4vKipcbiAqIElmIGEganVzdC1lbnRlcmVkIGVsZW1lbnQgaXMgYXBwbGllZCB0aGVcbiAqIGxlYXZlIGNsYXNzIHdoaWxlIGl0cyBlbnRlciB0cmFuc2l0aW9uIGhhc24ndCBzdGFydGVkIHlldCxcbiAqIGFuZCB0aGUgdHJhbnNpdGlvbmVkIHByb3BlcnR5IGhhcyB0aGUgc2FtZSB2YWx1ZSBmb3IgYm90aFxuICogZW50ZXIvbGVhdmUsIHRoZW4gdGhlIGxlYXZlIHRyYW5zaXRpb24gd2lsbCBiZSBza2lwcGVkIGFuZFxuICogdGhlIHRyYW5zaXRpb25lbmQgZXZlbnQgbmV2ZXIgZmlyZXMuIFRoaXMgZnVuY3Rpb24gZW5zdXJlc1xuICogaXRzIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBhZnRlciBhIHRyYW5zaXRpb24gaGFzIHN0YXJ0ZWRcbiAqIGJ5IHdhaXRpbmcgZm9yIGRvdWJsZSByYWYuXG4gKlxuICogSXQgZmFsbHMgYmFjayB0byBzZXRUaW1lb3V0IG9uIGRldmljZXMgdGhhdCBzdXBwb3J0IENTU1xuICogdHJhbnNpdGlvbnMgYnV0IG5vdCByYWYgKGUuZy4gQW5kcm9pZCA0LjIgYnJvd3NlcikgLSBzaW5jZVxuICogdGhlc2UgZW52aXJvbm1lbnRzIGFyZSB1c3VhbGx5IHNsb3csIHdlIGFyZSBnaXZpbmcgaXQgYVxuICogcmVsYXRpdmVseSBsYXJnZSB0aW1lb3V0LlxuICovXG5cbnZhciByYWYgPSBpbkJyb3dzZXIgJiYgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTtcbnZhciB3YWl0Rm9yVHJhbnNpdGlvblN0YXJ0ID0gcmFmXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuPyBmdW5jdGlvbiAoZm4pIHtcbiAgcmFmKGZ1bmN0aW9uICgpIHtcbiAgICByYWYoZm4pO1xuICB9KTtcbn0gOiBmdW5jdGlvbiAoZm4pIHtcbiAgc2V0VGltZW91dChmbiwgNTApO1xufTtcblxuLyoqXG4gKiBBIFRyYW5zaXRpb24gb2JqZWN0IHRoYXQgZW5jYXBzdWxhdGVzIHRoZSBzdGF0ZSBhbmQgbG9naWNcbiAqIG9mIHRoZSB0cmFuc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICogQHBhcmFtIHtPYmplY3R9IGhvb2tzXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuZnVuY3Rpb24gVHJhbnNpdGlvbihlbCwgaWQsIGhvb2tzLCB2bSkge1xuICB0aGlzLmlkID0gaWQ7XG4gIHRoaXMuZWwgPSBlbDtcbiAgdGhpcy5lbnRlckNsYXNzID0gaG9va3MgJiYgaG9va3MuZW50ZXJDbGFzcyB8fCBpZCArICctZW50ZXInO1xuICB0aGlzLmxlYXZlQ2xhc3MgPSBob29rcyAmJiBob29rcy5sZWF2ZUNsYXNzIHx8IGlkICsgJy1sZWF2ZSc7XG4gIHRoaXMuaG9va3MgPSBob29rcztcbiAgdGhpcy52bSA9IHZtO1xuICAvLyBhc3luYyBzdGF0ZVxuICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gdGhpcy5vcCA9IHRoaXMuY2IgPSBudWxsO1xuICB0aGlzLmp1c3RFbnRlcmVkID0gZmFsc2U7XG4gIHRoaXMuZW50ZXJlZCA9IHRoaXMubGVmdCA9IGZhbHNlO1xuICB0aGlzLnR5cGVDYWNoZSA9IHt9O1xuICAvLyBjaGVjayBjc3MgdHJhbnNpdGlvbiB0eXBlXG4gIHRoaXMudHlwZSA9IGhvb2tzICYmIGhvb2tzLnR5cGU7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmICh0aGlzLnR5cGUgJiYgdGhpcy50eXBlICE9PSBUWVBFX1RSQU5TSVRJT04gJiYgdGhpcy50eXBlICE9PSBUWVBFX0FOSU1BVElPTikge1xuICAgICAgd2FybignaW52YWxpZCBDU1MgdHJhbnNpdGlvbiB0eXBlIGZvciB0cmFuc2l0aW9uPVwiJyArIHRoaXMuaWQgKyAnXCI6ICcgKyB0aGlzLnR5cGUsIHZtKTtcbiAgICB9XG4gIH1cbiAgLy8gYmluZFxuICB2YXIgc2VsZiA9IHRoaXM7WydlbnRlck5leHRUaWNrJywgJ2VudGVyRG9uZScsICdsZWF2ZU5leHRUaWNrJywgJ2xlYXZlRG9uZSddLmZvckVhY2goZnVuY3Rpb24gKG0pIHtcbiAgICBzZWxmW21dID0gYmluZChzZWxmW21dLCBzZWxmKTtcbiAgfSk7XG59XG5cbnZhciBwJDEgPSBUcmFuc2l0aW9uLnByb3RvdHlwZTtcblxuLyoqXG4gKiBTdGFydCBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLlxuICpcbiAqIDEuIGVudGVyIHRyYW5zaXRpb24gdHJpZ2dlcmVkXG4gKiAyLiBjYWxsIGJlZm9yZUVudGVyIGhvb2tcbiAqIDMuIGFkZCBlbnRlciBjbGFzc1xuICogNC4gaW5zZXJ0L3Nob3cgZWxlbWVudFxuICogNS4gY2FsbCBlbnRlciBob29rICh3aXRoIHBvc3NpYmxlIGV4cGxpY2l0IGpzIGNhbGxiYWNrKVxuICogNi4gcmVmbG93XG4gKiA3LiBiYXNlZCBvbiB0cmFuc2l0aW9uIHR5cGU6XG4gKiAgICAtIHRyYW5zaXRpb246XG4gKiAgICAgICAgcmVtb3ZlIGNsYXNzIG5vdywgd2FpdCBmb3IgdHJhbnNpdGlvbmVuZCxcbiAqICAgICAgICB0aGVuIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAqICAgIC0gYW5pbWF0aW9uOlxuICogICAgICAgIHdhaXQgZm9yIGFuaW1hdGlvbmVuZCwgcmVtb3ZlIGNsYXNzLFxuICogICAgICAgIHRoZW4gZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogICAgLSBubyBjc3MgdHJhbnNpdGlvbjpcbiAqICAgICAgICBkb25lIG5vdyBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogOC4gd2FpdCBmb3IgZWl0aGVyIGRvbmUgb3IganMgY2FsbGJhY2ssIHRoZW4gY2FsbFxuICogICAgYWZ0ZXJFbnRlciBob29rLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gaW5zZXJ0L3Nob3cgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5wJDEuZW50ZXIgPSBmdW5jdGlvbiAob3AsIGNiKSB7XG4gIHRoaXMuY2FuY2VsUGVuZGluZygpO1xuICB0aGlzLmNhbGxIb29rKCdiZWZvcmVFbnRlcicpO1xuICB0aGlzLmNiID0gY2I7XG4gIGFkZENsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG4gIG9wKCk7XG4gIHRoaXMuZW50ZXJlZCA9IGZhbHNlO1xuICB0aGlzLmNhbGxIb29rV2l0aENiKCdlbnRlcicpO1xuICBpZiAodGhpcy5lbnRlcmVkKSB7XG4gICAgcmV0dXJuOyAvLyB1c2VyIGNhbGxlZCBkb25lIHN5bmNocm9ub3VzbHkuXG4gIH1cbiAgdGhpcy5jYW5jZWwgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MuZW50ZXJDYW5jZWxsZWQ7XG4gIHB1c2hKb2IodGhpcy5lbnRlck5leHRUaWNrKTtcbn07XG5cbi8qKlxuICogVGhlIFwibmV4dFRpY2tcIiBwaGFzZSBvZiBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLCB3aGljaCBpc1xuICogdG8gYmUgcHVzaGVkIGludG8gYSBxdWV1ZSBhbmQgZXhlY3V0ZWQgYWZ0ZXIgYSByZWZsb3cgc29cbiAqIHRoYXQgcmVtb3ZpbmcgdGhlIGNsYXNzIGNhbiB0cmlnZ2VyIGEgQ1NTIHRyYW5zaXRpb24uXG4gKi9cblxucCQxLmVudGVyTmV4dFRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgLy8gcHJldmVudCB0cmFuc2l0aW9uIHNraXBwaW5nXG4gIHRoaXMuanVzdEVudGVyZWQgPSB0cnVlO1xuICB3YWl0Rm9yVHJhbnNpdGlvblN0YXJ0KGZ1bmN0aW9uICgpIHtcbiAgICBfdGhpcy5qdXN0RW50ZXJlZCA9IGZhbHNlO1xuICB9KTtcbiAgdmFyIGVudGVyRG9uZSA9IHRoaXMuZW50ZXJEb25lO1xuICB2YXIgdHlwZSA9IHRoaXMuZ2V0Q3NzVHJhbnNpdGlvblR5cGUodGhpcy5lbnRlckNsYXNzKTtcbiAgaWYgKCF0aGlzLnBlbmRpbmdKc0NiKSB7XG4gICAgaWYgKHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTikge1xuICAgICAgLy8gdHJpZ2dlciB0cmFuc2l0aW9uIGJ5IHJlbW92aW5nIGVudGVyIGNsYXNzIG5vd1xuICAgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcbiAgICAgIHRoaXMuc2V0dXBDc3NDYih0cmFuc2l0aW9uRW5kRXZlbnQsIGVudGVyRG9uZSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBUWVBFX0FOSU1BVElPTikge1xuICAgICAgdGhpcy5zZXR1cENzc0NiKGFuaW1hdGlvbkVuZEV2ZW50LCBlbnRlckRvbmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbnRlckRvbmUoKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OKSB7XG4gICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcbiAgfVxufTtcblxuLyoqXG4gKiBUaGUgXCJjbGVhbnVwXCIgcGhhc2Ugb2YgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEuZW50ZXJEb25lID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmVudGVyZWQgPSB0cnVlO1xuICB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsO1xuICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICB0aGlzLmNhbGxIb29rKCdhZnRlckVudGVyJyk7XG4gIGlmICh0aGlzLmNiKSB0aGlzLmNiKCk7XG59O1xuXG4vKipcbiAqIFN0YXJ0IGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuICpcbiAqIDEuIGxlYXZlIHRyYW5zaXRpb24gdHJpZ2dlcmVkLlxuICogMi4gY2FsbCBiZWZvcmVMZWF2ZSBob29rXG4gKiAzLiBhZGQgbGVhdmUgY2xhc3MgKHRyaWdnZXIgY3NzIHRyYW5zaXRpb24pXG4gKiA0LiBjYWxsIGxlYXZlIGhvb2sgKHdpdGggcG9zc2libGUgZXhwbGljaXQganMgY2FsbGJhY2spXG4gKiA1LiByZWZsb3cgaWYgbm8gZXhwbGljaXQganMgY2FsbGJhY2sgaXMgcHJvdmlkZWRcbiAqIDYuIGJhc2VkIG9uIHRyYW5zaXRpb24gdHlwZTpcbiAqICAgIC0gdHJhbnNpdGlvbiBvciBhbmltYXRpb246XG4gKiAgICAgICAgd2FpdCBmb3IgZW5kIGV2ZW50LCByZW1vdmUgY2xhc3MsIHRoZW4gZG9uZSBpZlxuICogICAgICAgIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiAgICAtIG5vIGNzcyB0cmFuc2l0aW9uOlxuICogICAgICAgIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAqIDcuIHdhaXQgZm9yIGVpdGhlciBkb25lIG9yIGpzIGNhbGxiYWNrLCB0aGVuIGNhbGxcbiAqICAgIGFmdGVyTGVhdmUgaG9vay5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIHJlbW92ZS9oaWRlIHRoZSBlbGVtZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxucCQxLmxlYXZlID0gZnVuY3Rpb24gKG9wLCBjYikge1xuICB0aGlzLmNhbmNlbFBlbmRpbmcoKTtcbiAgdGhpcy5jYWxsSG9vaygnYmVmb3JlTGVhdmUnKTtcbiAgdGhpcy5vcCA9IG9wO1xuICB0aGlzLmNiID0gY2I7XG4gIGFkZENsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG4gIHRoaXMubGVmdCA9IGZhbHNlO1xuICB0aGlzLmNhbGxIb29rV2l0aENiKCdsZWF2ZScpO1xuICBpZiAodGhpcy5sZWZ0KSB7XG4gICAgcmV0dXJuOyAvLyB1c2VyIGNhbGxlZCBkb25lIHN5bmNocm9ub3VzbHkuXG4gIH1cbiAgdGhpcy5jYW5jZWwgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MubGVhdmVDYW5jZWxsZWQ7XG4gIC8vIG9ubHkgbmVlZCB0byBoYW5kbGUgbGVhdmVEb25lIGlmXG4gIC8vIDEuIHRoZSB0cmFuc2l0aW9uIGlzIGFscmVhZHkgZG9uZSAoc3luY2hyb25vdXNseSBjYWxsZWRcbiAgLy8gICAgYnkgdGhlIHVzZXIsIHdoaWNoIGNhdXNlcyB0aGlzLm9wIHNldCB0byBudWxsKVxuICAvLyAyLiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrXG4gIGlmICh0aGlzLm9wICYmICF0aGlzLnBlbmRpbmdKc0NiKSB7XG4gICAgLy8gaWYgYSBDU1MgdHJhbnNpdGlvbiBsZWF2ZXMgaW1tZWRpYXRlbHkgYWZ0ZXIgZW50ZXIsXG4gICAgLy8gdGhlIHRyYW5zaXRpb25lbmQgZXZlbnQgbmV2ZXIgZmlyZXMuIHRoZXJlZm9yZSB3ZVxuICAgIC8vIGRldGVjdCBzdWNoIGNhc2VzIGFuZCBlbmQgdGhlIGxlYXZlIGltbWVkaWF0ZWx5LlxuICAgIGlmICh0aGlzLmp1c3RFbnRlcmVkKSB7XG4gICAgICB0aGlzLmxlYXZlRG9uZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwdXNoSm9iKHRoaXMubGVhdmVOZXh0VGljayk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIFRoZSBcIm5leHRUaWNrXCIgcGhhc2Ugb2YgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG4gKi9cblxucCQxLmxlYXZlTmV4dFRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB0eXBlID0gdGhpcy5nZXRDc3NUcmFuc2l0aW9uVHlwZSh0aGlzLmxlYXZlQ2xhc3MpO1xuICBpZiAodHlwZSkge1xuICAgIHZhciBldmVudCA9IHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTiA/IHRyYW5zaXRpb25FbmRFdmVudCA6IGFuaW1hdGlvbkVuZEV2ZW50O1xuICAgIHRoaXMuc2V0dXBDc3NDYihldmVudCwgdGhpcy5sZWF2ZURvbmUpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMubGVhdmVEb25lKCk7XG4gIH1cbn07XG5cbi8qKlxuICogVGhlIFwiY2xlYW51cFwiIHBoYXNlIG9mIGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuICovXG5cbnAkMS5sZWF2ZURvbmUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMubGVmdCA9IHRydWU7XG4gIHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG4gIHRoaXMub3AoKTtcbiAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcbiAgdGhpcy5jYWxsSG9vaygnYWZ0ZXJMZWF2ZScpO1xuICBpZiAodGhpcy5jYikgdGhpcy5jYigpO1xuICB0aGlzLm9wID0gbnVsbDtcbn07XG5cbi8qKlxuICogQ2FuY2VsIGFueSBwZW5kaW5nIGNhbGxiYWNrcyBmcm9tIGEgcHJldmlvdXNseSBydW5uaW5nXG4gKiBidXQgbm90IGZpbmlzaGVkIHRyYW5zaXRpb24uXG4gKi9cblxucCQxLmNhbmNlbFBlbmRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMub3AgPSB0aGlzLmNiID0gbnVsbDtcbiAgdmFyIGhhc1BlbmRpbmcgPSBmYWxzZTtcbiAgaWYgKHRoaXMucGVuZGluZ0Nzc0NiKSB7XG4gICAgaGFzUGVuZGluZyA9IHRydWU7XG4gICAgb2ZmKHRoaXMuZWwsIHRoaXMucGVuZGluZ0Nzc0V2ZW50LCB0aGlzLnBlbmRpbmdDc3NDYik7XG4gICAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IG51bGw7XG4gIH1cbiAgaWYgKHRoaXMucGVuZGluZ0pzQ2IpIHtcbiAgICBoYXNQZW5kaW5nID0gdHJ1ZTtcbiAgICB0aGlzLnBlbmRpbmdKc0NiLmNhbmNlbCgpO1xuICAgIHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsO1xuICB9XG4gIGlmIChoYXNQZW5kaW5nKSB7XG4gICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcbiAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuICB9XG4gIGlmICh0aGlzLmNhbmNlbCkge1xuICAgIHRoaXMuY2FuY2VsLmNhbGwodGhpcy52bSwgdGhpcy5lbCk7XG4gICAgdGhpcy5jYW5jZWwgPSBudWxsO1xuICB9XG59O1xuXG4vKipcbiAqIENhbGwgYSB1c2VyLXByb3ZpZGVkIHN5bmNocm9ub3VzIGhvb2sgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqL1xuXG5wJDEuY2FsbEhvb2sgPSBmdW5jdGlvbiAodHlwZSkge1xuICBpZiAodGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzW3R5cGVdKSB7XG4gICAgdGhpcy5ob29rc1t0eXBlXS5jYWxsKHRoaXMudm0sIHRoaXMuZWwpO1xuICB9XG59O1xuXG4vKipcbiAqIENhbGwgYSB1c2VyLXByb3ZpZGVkLCBwb3RlbnRpYWxseS1hc3luYyBob29rIGZ1bmN0aW9uLlxuICogV2UgY2hlY2sgZm9yIHRoZSBsZW5ndGggb2YgYXJndW1lbnRzIHRvIHNlZSBpZiB0aGUgaG9va1xuICogZXhwZWN0cyBhIGBkb25lYCBjYWxsYmFjay4gSWYgdHJ1ZSwgdGhlIHRyYW5zaXRpb24ncyBlbmRcbiAqIHdpbGwgYmUgZGV0ZXJtaW5lZCBieSB3aGVuIHRoZSB1c2VyIGNhbGxzIHRoYXQgY2FsbGJhY2s7XG4gKiBvdGhlcndpc2UsIHRoZSBlbmQgaXMgZGV0ZXJtaW5lZCBieSB0aGUgQ1NTIHRyYW5zaXRpb24gb3JcbiAqIGFuaW1hdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5cbnAkMS5jYWxsSG9va1dpdGhDYiA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gIHZhciBob29rID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzW3R5cGVdO1xuICBpZiAoaG9vaykge1xuICAgIGlmIChob29rLmxlbmd0aCA+IDEpIHtcbiAgICAgIHRoaXMucGVuZGluZ0pzQ2IgPSBjYW5jZWxsYWJsZSh0aGlzW3R5cGUgKyAnRG9uZSddKTtcbiAgICB9XG4gICAgaG9vay5jYWxsKHRoaXMudm0sIHRoaXMuZWwsIHRoaXMucGVuZGluZ0pzQ2IpO1xuICB9XG59O1xuXG4vKipcbiAqIEdldCBhbiBlbGVtZW50J3MgdHJhbnNpdGlvbiB0eXBlIGJhc2VkIG9uIHRoZVxuICogY2FsY3VsYXRlZCBzdHlsZXMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGNsYXNzTmFtZVxuICogQHJldHVybiB7TnVtYmVyfVxuICovXG5cbnAkMS5nZXRDc3NUcmFuc2l0aW9uVHlwZSA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICghdHJhbnNpdGlvbkVuZEV2ZW50IHx8XG4gIC8vIHNraXAgQ1NTIHRyYW5zaXRpb25zIGlmIHBhZ2UgaXMgbm90IHZpc2libGUgLVxuICAvLyB0aGlzIHNvbHZlcyB0aGUgaXNzdWUgb2YgdHJhbnNpdGlvbmVuZCBldmVudHMgbm90XG4gIC8vIGZpcmluZyB1bnRpbCB0aGUgcGFnZSBpcyB2aXNpYmxlIGFnYWluLlxuICAvLyBwYWdlVmlzaWJpbGl0eSBBUEkgaXMgc3VwcG9ydGVkIGluIElFMTArLCBzYW1lIGFzXG4gIC8vIENTUyB0cmFuc2l0aW9ucy5cbiAgZG9jdW1lbnQuaGlkZGVuIHx8XG4gIC8vIGV4cGxpY2l0IGpzLW9ubHkgdHJhbnNpdGlvblxuICB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MuY3NzID09PSBmYWxzZSB8fFxuICAvLyBlbGVtZW50IGlzIGhpZGRlblxuICBpc0hpZGRlbih0aGlzLmVsKSkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgdHlwZSA9IHRoaXMudHlwZSB8fCB0aGlzLnR5cGVDYWNoZVtjbGFzc05hbWVdO1xuICBpZiAodHlwZSkgcmV0dXJuIHR5cGU7XG4gIHZhciBpbmxpbmVTdHlsZXMgPSB0aGlzLmVsLnN0eWxlO1xuICB2YXIgY29tcHV0ZWRTdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKTtcbiAgdmFyIHRyYW5zRHVyYXRpb24gPSBpbmxpbmVTdHlsZXNbdHJhbnNEdXJhdGlvblByb3BdIHx8IGNvbXB1dGVkU3R5bGVzW3RyYW5zRHVyYXRpb25Qcm9wXTtcbiAgaWYgKHRyYW5zRHVyYXRpb24gJiYgdHJhbnNEdXJhdGlvbiAhPT0gJzBzJykge1xuICAgIHR5cGUgPSBUWVBFX1RSQU5TSVRJT047XG4gIH0gZWxzZSB7XG4gICAgdmFyIGFuaW1EdXJhdGlvbiA9IGlubGluZVN0eWxlc1thbmltRHVyYXRpb25Qcm9wXSB8fCBjb21wdXRlZFN0eWxlc1thbmltRHVyYXRpb25Qcm9wXTtcbiAgICBpZiAoYW5pbUR1cmF0aW9uICYmIGFuaW1EdXJhdGlvbiAhPT0gJzBzJykge1xuICAgICAgdHlwZSA9IFRZUEVfQU5JTUFUSU9OO1xuICAgIH1cbiAgfVxuICBpZiAodHlwZSkge1xuICAgIHRoaXMudHlwZUNhY2hlW2NsYXNzTmFtZV0gPSB0eXBlO1xuICB9XG4gIHJldHVybiB0eXBlO1xufTtcblxuLyoqXG4gKiBTZXR1cCBhIENTUyB0cmFuc2l0aW9uZW5kL2FuaW1hdGlvbmVuZCBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKi9cblxucCQxLnNldHVwQ3NzQ2IgPSBmdW5jdGlvbiAoZXZlbnQsIGNiKSB7XG4gIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gZXZlbnQ7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIGVsID0gdGhpcy5lbDtcbiAgdmFyIG9uRW5kID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSBmdW5jdGlvbiAoZSkge1xuICAgIGlmIChlLnRhcmdldCA9PT0gZWwpIHtcbiAgICAgIG9mZihlbCwgZXZlbnQsIG9uRW5kKTtcbiAgICAgIHNlbGYucGVuZGluZ0Nzc0V2ZW50ID0gc2VsZi5wZW5kaW5nQ3NzQ2IgPSBudWxsO1xuICAgICAgaWYgKCFzZWxmLnBlbmRpbmdKc0NiICYmIGNiKSB7XG4gICAgICAgIGNiKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBvbihlbCwgZXZlbnQsIG9uRW5kKTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBoaWRkZW4gLSBpbiB0aGF0IGNhc2Ugd2UgY2FuIGp1c3RcbiAqIHNraXAgdGhlIHRyYW5zaXRpb24gYWxsdG9nZXRoZXIuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc0hpZGRlbihlbCkge1xuICBpZiAoL3N2ZyQvLnRlc3QoZWwubmFtZXNwYWNlVVJJKSkge1xuICAgIC8vIFNWRyBlbGVtZW50cyBkbyBub3QgaGF2ZSBvZmZzZXQoV2lkdGh8SGVpZ2h0KVxuICAgIC8vIHNvIHdlIG5lZWQgdG8gY2hlY2sgdGhlIGNsaWVudCByZWN0XG4gICAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4gIShyZWN0LndpZHRoIHx8IHJlY3QuaGVpZ2h0KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gIShlbC5vZmZzZXRXaWR0aCB8fCBlbC5vZmZzZXRIZWlnaHQgfHwgZWwuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpO1xuICB9XG59XG5cbnZhciB0cmFuc2l0aW9uJDEgPSB7XG5cbiAgcHJpb3JpdHk6IFRSQU5TSVRJT04sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoaWQsIG9sZElkKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICAvLyByZXNvbHZlIG9uIG93bmVyIHZtXG4gICAgdmFyIGhvb2tzID0gcmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICd0cmFuc2l0aW9ucycsIGlkKTtcbiAgICBpZCA9IGlkIHx8ICd2JztcbiAgICBvbGRJZCA9IG9sZElkIHx8ICd2JztcbiAgICBlbC5fX3ZfdHJhbnMgPSBuZXcgVHJhbnNpdGlvbihlbCwgaWQsIGhvb2tzLCB0aGlzLnZtKTtcbiAgICByZW1vdmVDbGFzcyhlbCwgb2xkSWQgKyAnLXRyYW5zaXRpb24nKTtcbiAgICBhZGRDbGFzcyhlbCwgaWQgKyAnLXRyYW5zaXRpb24nKTtcbiAgfVxufTtcblxudmFyIGludGVybmFsRGlyZWN0aXZlcyA9IHtcbiAgc3R5bGU6IHN0eWxlLFxuICAnY2xhc3MnOiB2Q2xhc3MsXG4gIGNvbXBvbmVudDogY29tcG9uZW50LFxuICBwcm9wOiBwcm9wRGVmLFxuICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uJDFcbn07XG5cbi8vIHNwZWNpYWwgYmluZGluZyBwcmVmaXhlc1xudmFyIGJpbmRSRSA9IC9edi1iaW5kOnxeOi87XG52YXIgb25SRSA9IC9edi1vbjp8XkAvO1xudmFyIGRpckF0dHJSRSA9IC9edi0oW146XSspKD86JHw6KC4qKSQpLztcbnZhciBtb2RpZmllclJFID0gL1xcLlteXFwuXSsvZztcbnZhciB0cmFuc2l0aW9uUkUgPSAvXih2LWJpbmQ6fDopP3RyYW5zaXRpb24kLztcblxuLy8gZGVmYXVsdCBkaXJlY3RpdmUgcHJpb3JpdHlcbnZhciBERUZBVUxUX1BSSU9SSVRZID0gMTAwMDtcbnZhciBERUZBVUxUX1RFUk1JTkFMX1BSSU9SSVRZID0gMjAwMDtcblxuLyoqXG4gKiBDb21waWxlIGEgdGVtcGxhdGUgYW5kIHJldHVybiBhIHJldXNhYmxlIGNvbXBvc2l0ZSBsaW5rXG4gKiBmdW5jdGlvbiwgd2hpY2ggcmVjdXJzaXZlbHkgY29udGFpbnMgbW9yZSBsaW5rIGZ1bmN0aW9uc1xuICogaW5zaWRlLiBUaGlzIHRvcCBsZXZlbCBjb21waWxlIGZ1bmN0aW9uIHdvdWxkIG5vcm1hbGx5XG4gKiBiZSBjYWxsZWQgb24gaW5zdGFuY2Ugcm9vdCBub2RlcywgYnV0IGNhbiBhbHNvIGJlIHVzZWRcbiAqIGZvciBwYXJ0aWFsIGNvbXBpbGF0aW9uIGlmIHRoZSBwYXJ0aWFsIGFyZ3VtZW50IGlzIHRydWUuXG4gKlxuICogVGhlIHJldHVybmVkIGNvbXBvc2l0ZSBsaW5rIGZ1bmN0aW9uLCB3aGVuIGNhbGxlZCwgd2lsbFxuICogcmV0dXJuIGFuIHVubGluayBmdW5jdGlvbiB0aGF0IHRlYXJzZG93biBhbGwgZGlyZWN0aXZlc1xuICogY3JlYXRlZCBkdXJpbmcgdGhlIGxpbmtpbmcgcGhhc2UuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtCb29sZWFufSBwYXJ0aWFsXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlKGVsLCBvcHRpb25zLCBwYXJ0aWFsKSB7XG4gIC8vIGxpbmsgZnVuY3Rpb24gZm9yIHRoZSBub2RlIGl0c2VsZi5cbiAgdmFyIG5vZGVMaW5rRm4gPSBwYXJ0aWFsIHx8ICFvcHRpb25zLl9hc0NvbXBvbmVudCA/IGNvbXBpbGVOb2RlKGVsLCBvcHRpb25zKSA6IG51bGw7XG4gIC8vIGxpbmsgZnVuY3Rpb24gZm9yIHRoZSBjaGlsZE5vZGVzXG4gIHZhciBjaGlsZExpbmtGbiA9ICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJiAhaXNTY3JpcHQoZWwpICYmIGVsLmhhc0NoaWxkTm9kZXMoKSA/IGNvbXBpbGVOb2RlTGlzdChlbC5jaGlsZE5vZGVzLCBvcHRpb25zKSA6IG51bGw7XG5cbiAgLyoqXG4gICAqIEEgY29tcG9zaXRlIGxpbmtlciBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gYSBhbHJlYWR5XG4gICAqIGNvbXBpbGVkIHBpZWNlIG9mIERPTSwgd2hpY2ggaW5zdGFudGlhdGVzIGFsbCBkaXJlY3RpdmVcbiAgICogaW5zdGFuY2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG4gICAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSBob3N0IHZtIG9mIHRyYW5zY2x1ZGVkIGNvbnRlbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBsaW5rIGNvbnRleHQgZnJhZ21lbnRcbiAgICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICAgKi9cblxuICByZXR1cm4gZnVuY3Rpb24gY29tcG9zaXRlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICAvLyBjYWNoZSBjaGlsZE5vZGVzIGJlZm9yZSBsaW5raW5nIHBhcmVudCwgZml4ICM2NTdcbiAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkoZWwuY2hpbGROb2Rlcyk7XG4gICAgLy8gbGlua1xuICAgIHZhciBkaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gY29tcG9zaXRlTGlua0NhcHR1cmVyKCkge1xuICAgICAgaWYgKG5vZGVMaW5rRm4pIG5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgICBpZiAoY2hpbGRMaW5rRm4pIGNoaWxkTGlua0ZuKHZtLCBjaGlsZE5vZGVzLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgfSwgdm0pO1xuICAgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIGRpcnMpO1xuICB9O1xufVxuXG4vKipcbiAqIEFwcGx5IGEgbGlua2VyIHRvIGEgdm0vZWxlbWVudCBwYWlyIGFuZCBjYXB0dXJlIHRoZVxuICogZGlyZWN0aXZlcyBjcmVhdGVkIGR1cmluZyB0aGUgcHJvY2Vzcy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaW5rZXJcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICovXG5cbmZ1bmN0aW9uIGxpbmtBbmRDYXB0dXJlKGxpbmtlciwgdm0pIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgLy8gcmVzZXQgZGlyZWN0aXZlcyBiZWZvcmUgZXZlcnkgY2FwdHVyZSBpbiBwcm9kdWN0aW9uXG4gICAgLy8gbW9kZSwgc28gdGhhdCB3aGVuIHVubGlua2luZyB3ZSBkb24ndCBuZWVkIHRvIHNwbGljZVxuICAgIC8vIHRoZW0gb3V0ICh3aGljaCB0dXJucyBvdXQgdG8gYmUgYSBwZXJmIGhpdCkuXG4gICAgLy8gdGhleSBhcmUga2VwdCBpbiBkZXZlbG9wbWVudCBtb2RlIGJlY2F1c2UgdGhleSBhcmVcbiAgICAvLyB1c2VmdWwgZm9yIFZ1ZSdzIG93biB0ZXN0cy5cbiAgICB2bS5fZGlyZWN0aXZlcyA9IFtdO1xuICB9XG4gIHZhciBvcmlnaW5hbERpckNvdW50ID0gdm0uX2RpcmVjdGl2ZXMubGVuZ3RoO1xuICBsaW5rZXIoKTtcbiAgdmFyIGRpcnMgPSB2bS5fZGlyZWN0aXZlcy5zbGljZShvcmlnaW5hbERpckNvdW50KTtcbiAgZGlycy5zb3J0KGRpcmVjdGl2ZUNvbXBhcmF0b3IpO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZGlyc1tpXS5fYmluZCgpO1xuICB9XG4gIHJldHVybiBkaXJzO1xufVxuXG4vKipcbiAqIERpcmVjdGl2ZSBwcmlvcml0eSBzb3J0IGNvbXBhcmF0b3JcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYVxuICogQHBhcmFtIHtPYmplY3R9IGJcbiAqL1xuXG5mdW5jdGlvbiBkaXJlY3RpdmVDb21wYXJhdG9yKGEsIGIpIHtcbiAgYSA9IGEuZGVzY3JpcHRvci5kZWYucHJpb3JpdHkgfHwgREVGQVVMVF9QUklPUklUWTtcbiAgYiA9IGIuZGVzY3JpcHRvci5kZWYucHJpb3JpdHkgfHwgREVGQVVMVF9QUklPUklUWTtcbiAgcmV0dXJuIGEgPiBiID8gLTEgOiBhID09PSBiID8gMCA6IDE7XG59XG5cbi8qKlxuICogTGlua2VyIGZ1bmN0aW9ucyByZXR1cm4gYW4gdW5saW5rIGZ1bmN0aW9uIHRoYXRcbiAqIHRlYXJzZG93biBhbGwgZGlyZWN0aXZlcyBpbnN0YW5jZXMgZ2VuZXJhdGVkIGR1cmluZ1xuICogdGhlIHByb2Nlc3MuXG4gKlxuICogV2UgY3JlYXRlIHVubGluayBmdW5jdGlvbnMgd2l0aCBvbmx5IHRoZSBuZWNlc3NhcnlcbiAqIGluZm9ybWF0aW9uIHRvIGF2b2lkIHJldGFpbmluZyBhZGRpdGlvbmFsIGNsb3N1cmVzLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtBcnJheX0gZGlyc1xuICogQHBhcmFtIHtWdWV9IFtjb250ZXh0XVxuICogQHBhcmFtIHtBcnJheX0gW2NvbnRleHREaXJzXVxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gbWFrZVVubGlua0ZuKHZtLCBkaXJzLCBjb250ZXh0LCBjb250ZXh0RGlycykge1xuICBmdW5jdGlvbiB1bmxpbmsoZGVzdHJveWluZykge1xuICAgIHRlYXJkb3duRGlycyh2bSwgZGlycywgZGVzdHJveWluZyk7XG4gICAgaWYgKGNvbnRleHQgJiYgY29udGV4dERpcnMpIHtcbiAgICAgIHRlYXJkb3duRGlycyhjb250ZXh0LCBjb250ZXh0RGlycyk7XG4gICAgfVxuICB9XG4gIC8vIGV4cG9zZSBsaW5rZWQgZGlyZWN0aXZlc1xuICB1bmxpbmsuZGlycyA9IGRpcnM7XG4gIHJldHVybiB1bmxpbms7XG59XG5cbi8qKlxuICogVGVhcmRvd24gcGFydGlhbCBsaW5rZWQgZGlyZWN0aXZlcy5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7QXJyYXl9IGRpcnNcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVzdHJveWluZ1xuICovXG5cbmZ1bmN0aW9uIHRlYXJkb3duRGlycyh2bSwgZGlycywgZGVzdHJveWluZykge1xuICB2YXIgaSA9IGRpcnMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgZGlyc1tpXS5fdGVhcmRvd24oKTtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhZGVzdHJveWluZykge1xuICAgICAgdm0uX2RpcmVjdGl2ZXMuJHJlbW92ZShkaXJzW2ldKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDb21waWxlIGxpbmsgcHJvcHMgb24gYW4gaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlQW5kTGlua1Byb3BzKHZtLCBlbCwgcHJvcHMsIHNjb3BlKSB7XG4gIHZhciBwcm9wc0xpbmtGbiA9IGNvbXBpbGVQcm9wcyhlbCwgcHJvcHMsIHZtKTtcbiAgdmFyIHByb3BEaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuICAgIHByb3BzTGlua0ZuKHZtLCBzY29wZSk7XG4gIH0sIHZtKTtcbiAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgcHJvcERpcnMpO1xufVxuXG4vKipcbiAqIENvbXBpbGUgdGhlIHJvb3QgZWxlbWVudCBvZiBhbiBpbnN0YW5jZS5cbiAqXG4gKiAxLiBhdHRycyBvbiBjb250ZXh0IGNvbnRhaW5lciAoY29udGV4dCBzY29wZSlcbiAqIDIuIGF0dHJzIG9uIHRoZSBjb21wb25lbnQgdGVtcGxhdGUgcm9vdCBub2RlLCBpZlxuICogICAgcmVwbGFjZTp0cnVlIChjaGlsZCBzY29wZSlcbiAqXG4gKiBJZiB0aGlzIGlzIGEgZnJhZ21lbnQgaW5zdGFuY2UsIHdlIG9ubHkgbmVlZCB0byBjb21waWxlIDEuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0T3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZVJvb3QoZWwsIG9wdGlvbnMsIGNvbnRleHRPcHRpb25zKSB7XG4gIHZhciBjb250YWluZXJBdHRycyA9IG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzO1xuICB2YXIgcmVwbGFjZXJBdHRycyA9IG9wdGlvbnMuX3JlcGxhY2VyQXR0cnM7XG4gIHZhciBjb250ZXh0TGlua0ZuLCByZXBsYWNlckxpbmtGbjtcblxuICAvLyBvbmx5IG5lZWQgdG8gY29tcGlsZSBvdGhlciBhdHRyaWJ1dGVzIGZvclxuICAvLyBub24tZnJhZ21lbnQgaW5zdGFuY2VzXG4gIGlmIChlbC5ub2RlVHlwZSAhPT0gMTEpIHtcbiAgICAvLyBmb3IgY29tcG9uZW50cywgY29udGFpbmVyIGFuZCByZXBsYWNlciBuZWVkIHRvIGJlXG4gICAgLy8gY29tcGlsZWQgc2VwYXJhdGVseSBhbmQgbGlua2VkIGluIGRpZmZlcmVudCBzY29wZXMuXG4gICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50KSB7XG4gICAgICAvLyAyLiBjb250YWluZXIgYXR0cmlidXRlc1xuICAgICAgaWYgKGNvbnRhaW5lckF0dHJzICYmIGNvbnRleHRPcHRpb25zKSB7XG4gICAgICAgIGNvbnRleHRMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhjb250YWluZXJBdHRycywgY29udGV4dE9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgaWYgKHJlcGxhY2VyQXR0cnMpIHtcbiAgICAgICAgLy8gMy4gcmVwbGFjZXIgYXR0cmlidXRlc1xuICAgICAgICByZXBsYWNlckxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKHJlcGxhY2VyQXR0cnMsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBub24tY29tcG9uZW50LCBqdXN0IGNvbXBpbGUgYXMgYSBub3JtYWwgZWxlbWVudC5cbiAgICAgIHJlcGxhY2VyTGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoZWwuYXR0cmlidXRlcywgb3B0aW9ucyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29udGFpbmVyQXR0cnMpIHtcbiAgICAvLyB3YXJuIGNvbnRhaW5lciBkaXJlY3RpdmVzIGZvciBmcmFnbWVudCBpbnN0YW5jZXNcbiAgICB2YXIgbmFtZXMgPSBjb250YWluZXJBdHRycy5maWx0ZXIoZnVuY3Rpb24gKGF0dHIpIHtcbiAgICAgIC8vIGFsbG93IHZ1ZS1sb2FkZXIvdnVlaWZ5IHNjb3BlZCBjc3MgYXR0cmlidXRlc1xuICAgICAgcmV0dXJuIGF0dHIubmFtZS5pbmRleE9mKCdfdi0nKSA8IDAgJiZcbiAgICAgIC8vIGFsbG93IGV2ZW50IGxpc3RlbmVyc1xuICAgICAgIW9uUkUudGVzdChhdHRyLm5hbWUpICYmXG4gICAgICAvLyBhbGxvdyBzbG90c1xuICAgICAgYXR0ci5uYW1lICE9PSAnc2xvdCc7XG4gICAgfSkubWFwKGZ1bmN0aW9uIChhdHRyKSB7XG4gICAgICByZXR1cm4gJ1wiJyArIGF0dHIubmFtZSArICdcIic7XG4gICAgfSk7XG4gICAgaWYgKG5hbWVzLmxlbmd0aCkge1xuICAgICAgdmFyIHBsdXJhbCA9IG5hbWVzLmxlbmd0aCA+IDE7XG4gICAgICB3YXJuKCdBdHRyaWJ1dGUnICsgKHBsdXJhbCA/ICdzICcgOiAnICcpICsgbmFtZXMuam9pbignLCAnKSArIChwbHVyYWwgPyAnIGFyZScgOiAnIGlzJykgKyAnIGlnbm9yZWQgb24gY29tcG9uZW50ICcgKyAnPCcgKyBvcHRpb25zLmVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICc+IGJlY2F1c2UgJyArICd0aGUgY29tcG9uZW50IGlzIGEgZnJhZ21lbnQgaW5zdGFuY2U6ICcgKyAnaHR0cDovL3Z1ZWpzLm9yZy9ndWlkZS9jb21wb25lbnRzLmh0bWwjRnJhZ21lbnQtSW5zdGFuY2UnKTtcbiAgICB9XG4gIH1cblxuICBvcHRpb25zLl9jb250YWluZXJBdHRycyA9IG9wdGlvbnMuX3JlcGxhY2VyQXR0cnMgPSBudWxsO1xuICByZXR1cm4gZnVuY3Rpb24gcm9vdExpbmtGbih2bSwgZWwsIHNjb3BlKSB7XG4gICAgLy8gbGluayBjb250ZXh0IHNjb3BlIGRpcnNcbiAgICB2YXIgY29udGV4dCA9IHZtLl9jb250ZXh0O1xuICAgIHZhciBjb250ZXh0RGlycztcbiAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0TGlua0ZuKSB7XG4gICAgICBjb250ZXh0RGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29udGV4dExpbmtGbihjb250ZXh0LCBlbCwgbnVsbCwgc2NvcGUpO1xuICAgICAgfSwgY29udGV4dCk7XG4gICAgfVxuXG4gICAgLy8gbGluayBzZWxmXG4gICAgdmFyIHNlbGZEaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHJlcGxhY2VyTGlua0ZuKSByZXBsYWNlckxpbmtGbih2bSwgZWwpO1xuICAgIH0sIHZtKTtcblxuICAgIC8vIHJldHVybiB0aGUgdW5saW5rIGZ1bmN0aW9uIHRoYXQgdGVhcnNkb3duIGNvbnRleHRcbiAgICAvLyBjb250YWluZXIgZGlyZWN0aXZlcy5cbiAgICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBzZWxmRGlycywgY29udGV4dCwgY29udGV4dERpcnMpO1xuICB9O1xufVxuXG4vKipcbiAqIENvbXBpbGUgYSBub2RlIGFuZCByZXR1cm4gYSBub2RlTGlua0ZuIGJhc2VkIG9uIHRoZVxuICogbm9kZSB0eXBlLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZU5vZGUobm9kZSwgb3B0aW9ucykge1xuICB2YXIgdHlwZSA9IG5vZGUubm9kZVR5cGU7XG4gIGlmICh0eXBlID09PSAxICYmICFpc1NjcmlwdChub2RlKSkge1xuICAgIHJldHVybiBjb21waWxlRWxlbWVudChub2RlLCBvcHRpb25zKTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSAzICYmIG5vZGUuZGF0YS50cmltKCkpIHtcbiAgICByZXR1cm4gY29tcGlsZVRleHROb2RlKG5vZGUsIG9wdGlvbnMpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogQ29tcGlsZSBhbiBlbGVtZW50IGFuZCByZXR1cm4gYSBub2RlTGlua0ZuLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVFbGVtZW50KGVsLCBvcHRpb25zKSB7XG4gIC8vIHByZXByb2Nlc3MgdGV4dGFyZWFzLlxuICAvLyB0ZXh0YXJlYSB0cmVhdHMgaXRzIHRleHQgY29udGVudCBhcyB0aGUgaW5pdGlhbCB2YWx1ZS5cbiAgLy8ganVzdCBiaW5kIGl0IGFzIGFuIGF0dHIgZGlyZWN0aXZlIGZvciB2YWx1ZS5cbiAgaWYgKGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcbiAgICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KGVsLnZhbHVlKTtcbiAgICBpZiAodG9rZW5zKSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJzp2YWx1ZScsIHRva2Vuc1RvRXhwKHRva2VucykpO1xuICAgICAgZWwudmFsdWUgPSAnJztcbiAgICB9XG4gIH1cbiAgdmFyIGxpbmtGbjtcbiAgdmFyIGhhc0F0dHJzID0gZWwuaGFzQXR0cmlidXRlcygpO1xuICB2YXIgYXR0cnMgPSBoYXNBdHRycyAmJiB0b0FycmF5KGVsLmF0dHJpYnV0ZXMpO1xuICAvLyBjaGVjayB0ZXJtaW5hbCBkaXJlY3RpdmVzIChmb3IgJiBpZilcbiAgaWYgKGhhc0F0dHJzKSB7XG4gICAgbGlua0ZuID0gY2hlY2tUZXJtaW5hbERpcmVjdGl2ZXMoZWwsIGF0dHJzLCBvcHRpb25zKTtcbiAgfVxuICAvLyBjaGVjayBlbGVtZW50IGRpcmVjdGl2ZXNcbiAgaWYgKCFsaW5rRm4pIHtcbiAgICBsaW5rRm4gPSBjaGVja0VsZW1lbnREaXJlY3RpdmVzKGVsLCBvcHRpb25zKTtcbiAgfVxuICAvLyBjaGVjayBjb21wb25lbnRcbiAgaWYgKCFsaW5rRm4pIHtcbiAgICBsaW5rRm4gPSBjaGVja0NvbXBvbmVudChlbCwgb3B0aW9ucyk7XG4gIH1cbiAgLy8gbm9ybWFsIGRpcmVjdGl2ZXNcbiAgaWYgKCFsaW5rRm4gJiYgaGFzQXR0cnMpIHtcbiAgICBsaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhhdHRycywgb3B0aW9ucyk7XG4gIH1cbiAgcmV0dXJuIGxpbmtGbjtcbn1cblxuLyoqXG4gKiBDb21waWxlIGEgdGV4dE5vZGUgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4uXG4gKlxuICogQHBhcmFtIHtUZXh0Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9IHRleHROb2RlTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZVRleHROb2RlKG5vZGUsIG9wdGlvbnMpIHtcbiAgLy8gc2tpcCBtYXJrZWQgdGV4dCBub2Rlc1xuICBpZiAobm9kZS5fc2tpcCkge1xuICAgIHJldHVybiByZW1vdmVUZXh0O1xuICB9XG5cbiAgdmFyIHRva2VucyA9IHBhcnNlVGV4dChub2RlLndob2xlVGV4dCk7XG4gIGlmICghdG9rZW5zKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBtYXJrIGFkamFjZW50IHRleHQgbm9kZXMgYXMgc2tpcHBlZCxcbiAgLy8gYmVjYXVzZSB3ZSBhcmUgdXNpbmcgbm9kZS53aG9sZVRleHQgdG8gY29tcGlsZVxuICAvLyBhbGwgYWRqYWNlbnQgdGV4dCBub2RlcyB0b2dldGhlci4gVGhpcyBmaXhlc1xuICAvLyBpc3N1ZXMgaW4gSUUgd2hlcmUgc29tZXRpbWVzIGl0IHNwbGl0cyB1cCBhIHNpbmdsZVxuICAvLyB0ZXh0IG5vZGUgaW50byBtdWx0aXBsZSBvbmVzLlxuICB2YXIgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG4gIHdoaWxlIChuZXh0ICYmIG5leHQubm9kZVR5cGUgPT09IDMpIHtcbiAgICBuZXh0Ll9za2lwID0gdHJ1ZTtcbiAgICBuZXh0ID0gbmV4dC5uZXh0U2libGluZztcbiAgfVxuXG4gIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICB2YXIgZWwsIHRva2VuO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHRva2Vucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB0b2tlbiA9IHRva2Vuc1tpXTtcbiAgICBlbCA9IHRva2VuLnRhZyA/IHByb2Nlc3NUZXh0VG9rZW4odG9rZW4sIG9wdGlvbnMpIDogZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodG9rZW4udmFsdWUpO1xuICAgIGZyYWcuYXBwZW5kQ2hpbGQoZWwpO1xuICB9XG4gIHJldHVybiBtYWtlVGV4dE5vZGVMaW5rRm4odG9rZW5zLCBmcmFnLCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBMaW5rZXIgZm9yIGFuIHNraXBwZWQgdGV4dCBub2RlLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtUZXh0fSBub2RlXG4gKi9cblxuZnVuY3Rpb24gcmVtb3ZlVGV4dCh2bSwgbm9kZSkge1xuICByZW1vdmUobm9kZSk7XG59XG5cbi8qKlxuICogUHJvY2VzcyBhIHNpbmdsZSB0ZXh0IHRva2VuLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0b2tlblxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge05vZGV9XG4gKi9cblxuZnVuY3Rpb24gcHJvY2Vzc1RleHRUb2tlbih0b2tlbiwgb3B0aW9ucykge1xuICB2YXIgZWw7XG4gIGlmICh0b2tlbi5vbmVUaW1lKSB7XG4gICAgZWwgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0b2tlbi52YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHRva2VuLmh0bWwpIHtcbiAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgndi1odG1sJyk7XG4gICAgICBzZXRUb2tlblR5cGUoJ2h0bWwnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSUUgd2lsbCBjbGVhbiB1cCBlbXB0eSB0ZXh0Tm9kZXMgZHVyaW5nXG4gICAgICAvLyBmcmFnLmNsb25lTm9kZSh0cnVlKSwgc28gd2UgaGF2ZSB0byBnaXZlIGl0XG4gICAgICAvLyBzb21ldGhpbmcgaGVyZS4uLlxuICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnICcpO1xuICAgICAgc2V0VG9rZW5UeXBlKCd0ZXh0Jyk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIHNldFRva2VuVHlwZSh0eXBlKSB7XG4gICAgaWYgKHRva2VuLmRlc2NyaXB0b3IpIHJldHVybjtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodG9rZW4udmFsdWUpO1xuICAgIHRva2VuLmRlc2NyaXB0b3IgPSB7XG4gICAgICBuYW1lOiB0eXBlLFxuICAgICAgZGVmOiBkaXJlY3RpdmVzW3R5cGVdLFxuICAgICAgZXhwcmVzc2lvbjogcGFyc2VkLmV4cHJlc3Npb24sXG4gICAgICBmaWx0ZXJzOiBwYXJzZWQuZmlsdGVyc1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIGVsO1xufVxuXG4vKipcbiAqIEJ1aWxkIGEgZnVuY3Rpb24gdGhhdCBwcm9jZXNzZXMgYSB0ZXh0Tm9kZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IHRva2Vuc1xuICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG4gKi9cblxuZnVuY3Rpb24gbWFrZVRleHROb2RlTGlua0ZuKHRva2VucywgZnJhZykge1xuICByZXR1cm4gZnVuY3Rpb24gdGV4dE5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSkge1xuICAgIHZhciBmcmFnQ2xvbmUgPSBmcmFnLmNsb25lTm9kZSh0cnVlKTtcbiAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkoZnJhZ0Nsb25lLmNoaWxkTm9kZXMpO1xuICAgIHZhciB0b2tlbiwgdmFsdWUsIG5vZGU7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0b2tlbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB0b2tlbiA9IHRva2Vuc1tpXTtcbiAgICAgIHZhbHVlID0gdG9rZW4udmFsdWU7XG4gICAgICBpZiAodG9rZW4udGFnKSB7XG4gICAgICAgIG5vZGUgPSBjaGlsZE5vZGVzW2ldO1xuICAgICAgICBpZiAodG9rZW4ub25lVGltZSkge1xuICAgICAgICAgIHZhbHVlID0gKHNjb3BlIHx8IHZtKS4kZXZhbCh2YWx1ZSk7XG4gICAgICAgICAgaWYgKHRva2VuLmh0bWwpIHtcbiAgICAgICAgICAgIHJlcGxhY2Uobm9kZSwgcGFyc2VUZW1wbGF0ZSh2YWx1ZSwgdHJ1ZSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBub2RlLmRhdGEgPSBfdG9TdHJpbmcodmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2bS5fYmluZERpcih0b2tlbi5kZXNjcmlwdG9yLCBub2RlLCBob3N0LCBzY29wZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmVwbGFjZShlbCwgZnJhZ0Nsb25lKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDb21waWxlIGEgbm9kZSBsaXN0IGFuZCByZXR1cm4gYSBjaGlsZExpbmtGbi5cbiAqXG4gKiBAcGFyYW0ge05vZGVMaXN0fSBub2RlTGlzdFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlTm9kZUxpc3Qobm9kZUxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGxpbmtGbnMgPSBbXTtcbiAgdmFyIG5vZGVMaW5rRm4sIGNoaWxkTGlua0ZuLCBub2RlO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVMaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIG5vZGUgPSBub2RlTGlzdFtpXTtcbiAgICBub2RlTGlua0ZuID0gY29tcGlsZU5vZGUobm9kZSwgb3B0aW9ucyk7XG4gICAgY2hpbGRMaW5rRm4gPSAhKG5vZGVMaW5rRm4gJiYgbm9kZUxpbmtGbi50ZXJtaW5hbCkgJiYgbm9kZS50YWdOYW1lICE9PSAnU0NSSVBUJyAmJiBub2RlLmhhc0NoaWxkTm9kZXMoKSA/IGNvbXBpbGVOb2RlTGlzdChub2RlLmNoaWxkTm9kZXMsIG9wdGlvbnMpIDogbnVsbDtcbiAgICBsaW5rRm5zLnB1c2gobm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4pO1xuICB9XG4gIHJldHVybiBsaW5rRm5zLmxlbmd0aCA/IG1ha2VDaGlsZExpbmtGbihsaW5rRm5zKSA6IG51bGw7XG59XG5cbi8qKlxuICogTWFrZSBhIGNoaWxkIGxpbmsgZnVuY3Rpb24gZm9yIGEgbm9kZSdzIGNoaWxkTm9kZXMuXG4gKlxuICogQHBhcmFtIHtBcnJheTxGdW5jdGlvbj59IGxpbmtGbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBjaGlsZExpbmtGblxuICovXG5cbmZ1bmN0aW9uIG1ha2VDaGlsZExpbmtGbihsaW5rRm5zKSB7XG4gIHJldHVybiBmdW5jdGlvbiBjaGlsZExpbmtGbih2bSwgbm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgdmFyIG5vZGUsIG5vZGVMaW5rRm4sIGNoaWxkcmVuTGlua0ZuO1xuICAgIGZvciAodmFyIGkgPSAwLCBuID0gMCwgbCA9IGxpbmtGbnMubGVuZ3RoOyBpIDwgbDsgbisrKSB7XG4gICAgICBub2RlID0gbm9kZXNbbl07XG4gICAgICBub2RlTGlua0ZuID0gbGlua0Zuc1tpKytdO1xuICAgICAgY2hpbGRyZW5MaW5rRm4gPSBsaW5rRm5zW2krK107XG4gICAgICAvLyBjYWNoZSBjaGlsZE5vZGVzIGJlZm9yZSBsaW5raW5nIHBhcmVudCwgZml4ICM2NTdcbiAgICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShub2RlLmNoaWxkTm9kZXMpO1xuICAgICAgaWYgKG5vZGVMaW5rRm4pIHtcbiAgICAgICAgbm9kZUxpbmtGbih2bSwgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgICAgfVxuICAgICAgaWYgKGNoaWxkcmVuTGlua0ZuKSB7XG4gICAgICAgIGNoaWxkcmVuTGlua0ZuKHZtLCBjaGlsZE5vZGVzLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIENoZWNrIGZvciBlbGVtZW50IGRpcmVjdGl2ZXMgKGN1c3RvbSBlbGVtZW50cyB0aGF0IHNob3VsZFxuICogYmUgcmVzb3ZsZWQgYXMgdGVybWluYWwgZGlyZWN0aXZlcykuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuXG5mdW5jdGlvbiBjaGVja0VsZW1lbnREaXJlY3RpdmVzKGVsLCBvcHRpb25zKSB7XG4gIHZhciB0YWcgPSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIGlmIChjb21tb25UYWdSRS50ZXN0KHRhZykpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZWxlbWVudERpcmVjdGl2ZXMnLCB0YWcpO1xuICBpZiAoZGVmKSB7XG4gICAgcmV0dXJuIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIHRhZywgJycsIG9wdGlvbnMsIGRlZik7XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgY29tcG9uZW50LiBJZiB5ZXMsIHJldHVyblxuICogYSBjb21wb25lbnQgbGluayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIGNoZWNrQ29tcG9uZW50KGVsLCBvcHRpb25zKSB7XG4gIHZhciBjb21wb25lbnQgPSBjaGVja0NvbXBvbmVudEF0dHIoZWwsIG9wdGlvbnMpO1xuICBpZiAoY29tcG9uZW50KSB7XG4gICAgdmFyIHJlZiA9IGZpbmRSZWYoZWwpO1xuICAgIHZhciBkZXNjcmlwdG9yID0ge1xuICAgICAgbmFtZTogJ2NvbXBvbmVudCcsXG4gICAgICByZWY6IHJlZixcbiAgICAgIGV4cHJlc3Npb246IGNvbXBvbmVudC5pZCxcbiAgICAgIGRlZjogaW50ZXJuYWxEaXJlY3RpdmVzLmNvbXBvbmVudCxcbiAgICAgIG1vZGlmaWVyczoge1xuICAgICAgICBsaXRlcmFsOiAhY29tcG9uZW50LmR5bmFtaWNcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBjb21wb25lbnRMaW5rRm4gPSBmdW5jdGlvbiBjb21wb25lbnRMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgICAgaWYgKHJlZikge1xuICAgICAgICBkZWZpbmVSZWFjdGl2ZSgoc2NvcGUgfHwgdm0pLiRyZWZzLCByZWYsIG51bGwpO1xuICAgICAgfVxuICAgICAgdm0uX2JpbmREaXIoZGVzY3JpcHRvciwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICB9O1xuICAgIGNvbXBvbmVudExpbmtGbi50ZXJtaW5hbCA9IHRydWU7XG4gICAgcmV0dXJuIGNvbXBvbmVudExpbmtGbjtcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGFuIGVsZW1lbnQgZm9yIHRlcm1pbmFsIGRpcmVjdGl2ZXMgaW4gZml4ZWQgb3JkZXIuXG4gKiBJZiBpdCBmaW5kcyBvbmUsIHJldHVybiBhIHRlcm1pbmFsIGxpbmsgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtBcnJheX0gYXR0cnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGVybWluYWxMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyhlbCwgYXR0cnMsIG9wdGlvbnMpIHtcbiAgLy8gc2tpcCB2LXByZVxuICBpZiAoZ2V0QXR0cihlbCwgJ3YtcHJlJykgIT09IG51bGwpIHtcbiAgICByZXR1cm4gc2tpcDtcbiAgfVxuICAvLyBza2lwIHYtZWxzZSBibG9jaywgYnV0IG9ubHkgaWYgZm9sbG93aW5nIHYtaWZcbiAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgndi1lbHNlJykpIHtcbiAgICB2YXIgcHJldiA9IGVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgaWYgKHByZXYgJiYgcHJldi5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuICAgICAgcmV0dXJuIHNraXA7XG4gICAgfVxuICB9XG5cbiAgdmFyIGF0dHIsIG5hbWUsIHZhbHVlLCBtb2RpZmllcnMsIG1hdGNoZWQsIGRpck5hbWUsIHJhd05hbWUsIGFyZywgZGVmLCB0ZXJtRGVmO1xuICBmb3IgKHZhciBpID0gMCwgaiA9IGF0dHJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgIGF0dHIgPSBhdHRyc1tpXTtcbiAgICBuYW1lID0gYXR0ci5uYW1lLnJlcGxhY2UobW9kaWZpZXJSRSwgJycpO1xuICAgIGlmIChtYXRjaGVkID0gbmFtZS5tYXRjaChkaXJBdHRyUkUpKSB7XG4gICAgICBkZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBtYXRjaGVkWzFdKTtcbiAgICAgIGlmIChkZWYgJiYgZGVmLnRlcm1pbmFsKSB7XG4gICAgICAgIGlmICghdGVybURlZiB8fCAoZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfVEVSTUlOQUxfUFJJT1JJVFkpID4gdGVybURlZi5wcmlvcml0eSkge1xuICAgICAgICAgIHRlcm1EZWYgPSBkZWY7XG4gICAgICAgICAgcmF3TmFtZSA9IGF0dHIubmFtZTtcbiAgICAgICAgICBtb2RpZmllcnMgPSBwYXJzZU1vZGlmaWVycyhhdHRyLm5hbWUpO1xuICAgICAgICAgIHZhbHVlID0gYXR0ci52YWx1ZTtcbiAgICAgICAgICBkaXJOYW1lID0gbWF0Y2hlZFsxXTtcbiAgICAgICAgICBhcmcgPSBtYXRjaGVkWzJdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKHRlcm1EZWYpIHtcbiAgICByZXR1cm4gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgZGlyTmFtZSwgdmFsdWUsIG9wdGlvbnMsIHRlcm1EZWYsIHJhd05hbWUsIGFyZywgbW9kaWZpZXJzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBza2lwKCkge31cbnNraXAudGVybWluYWwgPSB0cnVlO1xuXG4vKipcbiAqIEJ1aWxkIGEgbm9kZSBsaW5rIGZ1bmN0aW9uIGZvciBhIHRlcm1pbmFsIGRpcmVjdGl2ZS5cbiAqIEEgdGVybWluYWwgbGluayBmdW5jdGlvbiB0ZXJtaW5hdGVzIHRoZSBjdXJyZW50XG4gKiBjb21waWxhdGlvbiByZWN1cnNpb24gYW5kIGhhbmRsZXMgY29tcGlsYXRpb24gb2YgdGhlXG4gKiBzdWJ0cmVlIGluIHRoZSBkaXJlY3RpdmUuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGRpck5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZcbiAqIEBwYXJhbSB7U3RyaW5nfSBbcmF3TmFtZV1cbiAqIEBwYXJhbSB7U3RyaW5nfSBbYXJnXVxuICogQHBhcmFtIHtPYmplY3R9IFttb2RpZmllcnNdXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGVybWluYWxMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCBkaXJOYW1lLCB2YWx1ZSwgb3B0aW9ucywgZGVmLCByYXdOYW1lLCBhcmcsIG1vZGlmaWVycykge1xuICB2YXIgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuICB2YXIgZGVzY3JpcHRvciA9IHtcbiAgICBuYW1lOiBkaXJOYW1lLFxuICAgIGFyZzogYXJnLFxuICAgIGV4cHJlc3Npb246IHBhcnNlZC5leHByZXNzaW9uLFxuICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzLFxuICAgIHJhdzogdmFsdWUsXG4gICAgYXR0cjogcmF3TmFtZSxcbiAgICBtb2RpZmllcnM6IG1vZGlmaWVycyxcbiAgICBkZWY6IGRlZlxuICB9O1xuICAvLyBjaGVjayByZWYgZm9yIHYtZm9yIGFuZCByb3V0ZXItdmlld1xuICBpZiAoZGlyTmFtZSA9PT0gJ2ZvcicgfHwgZGlyTmFtZSA9PT0gJ3JvdXRlci12aWV3Jykge1xuICAgIGRlc2NyaXB0b3IucmVmID0gZmluZFJlZihlbCk7XG4gIH1cbiAgdmFyIGZuID0gZnVuY3Rpb24gdGVybWluYWxOb2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICBpZiAoZGVzY3JpcHRvci5yZWYpIHtcbiAgICAgIGRlZmluZVJlYWN0aXZlKChzY29wZSB8fCB2bSkuJHJlZnMsIGRlc2NyaXB0b3IucmVmLCBudWxsKTtcbiAgICB9XG4gICAgdm0uX2JpbmREaXIoZGVzY3JpcHRvciwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgfTtcbiAgZm4udGVybWluYWwgPSB0cnVlO1xuICByZXR1cm4gZm47XG59XG5cbi8qKlxuICogQ29tcGlsZSB0aGUgZGlyZWN0aXZlcyBvbiBhbiBlbGVtZW50IGFuZCByZXR1cm4gYSBsaW5rZXIuXG4gKlxuICogQHBhcmFtIHtBcnJheXxOYW1lZE5vZGVNYXB9IGF0dHJzXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZURpcmVjdGl2ZXMoYXR0cnMsIG9wdGlvbnMpIHtcbiAgdmFyIGkgPSBhdHRycy5sZW5ndGg7XG4gIHZhciBkaXJzID0gW107XG4gIHZhciBhdHRyLCBuYW1lLCB2YWx1ZSwgcmF3TmFtZSwgcmF3VmFsdWUsIGRpck5hbWUsIGFyZywgbW9kaWZpZXJzLCBkaXJEZWYsIHRva2VucywgbWF0Y2hlZDtcbiAgd2hpbGUgKGktLSkge1xuICAgIGF0dHIgPSBhdHRyc1tpXTtcbiAgICBuYW1lID0gcmF3TmFtZSA9IGF0dHIubmFtZTtcbiAgICB2YWx1ZSA9IHJhd1ZhbHVlID0gYXR0ci52YWx1ZTtcbiAgICB0b2tlbnMgPSBwYXJzZVRleHQodmFsdWUpO1xuICAgIC8vIHJlc2V0IGFyZ1xuICAgIGFyZyA9IG51bGw7XG4gICAgLy8gY2hlY2sgbW9kaWZpZXJzXG4gICAgbW9kaWZpZXJzID0gcGFyc2VNb2RpZmllcnMobmFtZSk7XG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZShtb2RpZmllclJFLCAnJyk7XG5cbiAgICAvLyBhdHRyaWJ1dGUgaW50ZXJwb2xhdGlvbnNcbiAgICBpZiAodG9rZW5zKSB7XG4gICAgICB2YWx1ZSA9IHRva2Vuc1RvRXhwKHRva2Vucyk7XG4gICAgICBhcmcgPSBuYW1lO1xuICAgICAgcHVzaERpcignYmluZCcsIGRpcmVjdGl2ZXMuYmluZCwgdG9rZW5zKTtcbiAgICAgIC8vIHdhcm4gYWdhaW5zdCBtaXhpbmcgbXVzdGFjaGVzIHdpdGggdi1iaW5kXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAobmFtZSA9PT0gJ2NsYXNzJyAmJiBBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGF0dHJzLCBmdW5jdGlvbiAoYXR0cikge1xuICAgICAgICAgIHJldHVybiBhdHRyLm5hbWUgPT09ICc6Y2xhc3MnIHx8IGF0dHIubmFtZSA9PT0gJ3YtYmluZDpjbGFzcyc7XG4gICAgICAgIH0pKSB7XG4gICAgICAgICAgd2FybignY2xhc3M9XCInICsgcmF3VmFsdWUgKyAnXCI6IERvIG5vdCBtaXggbXVzdGFjaGUgaW50ZXJwb2xhdGlvbiAnICsgJ2FuZCB2LWJpbmQgZm9yIFwiY2xhc3NcIiBvbiB0aGUgc2FtZSBlbGVtZW50LiBVc2Ugb25lIG9yIHRoZSBvdGhlci4nLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZVxuXG4gICAgICAvLyBzcGVjaWFsIGF0dHJpYnV0ZTogdHJhbnNpdGlvblxuICAgICAgaWYgKHRyYW5zaXRpb25SRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIG1vZGlmaWVycy5saXRlcmFsID0gIWJpbmRSRS50ZXN0KG5hbWUpO1xuICAgICAgICBwdXNoRGlyKCd0cmFuc2l0aW9uJywgaW50ZXJuYWxEaXJlY3RpdmVzLnRyYW5zaXRpb24pO1xuICAgICAgfSBlbHNlXG5cbiAgICAgICAgLy8gZXZlbnQgaGFuZGxlcnNcbiAgICAgICAgaWYgKG9uUkUudGVzdChuYW1lKSkge1xuICAgICAgICAgIGFyZyA9IG5hbWUucmVwbGFjZShvblJFLCAnJyk7XG4gICAgICAgICAgcHVzaERpcignb24nLCBkaXJlY3RpdmVzLm9uKTtcbiAgICAgICAgfSBlbHNlXG5cbiAgICAgICAgICAvLyBhdHRyaWJ1dGUgYmluZGluZ3NcbiAgICAgICAgICBpZiAoYmluZFJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgICAgIGRpck5hbWUgPSBuYW1lLnJlcGxhY2UoYmluZFJFLCAnJyk7XG4gICAgICAgICAgICBpZiAoZGlyTmFtZSA9PT0gJ3N0eWxlJyB8fCBkaXJOYW1lID09PSAnY2xhc3MnKSB7XG4gICAgICAgICAgICAgIHB1c2hEaXIoZGlyTmFtZSwgaW50ZXJuYWxEaXJlY3RpdmVzW2Rpck5hbWVdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFyZyA9IGRpck5hbWU7XG4gICAgICAgICAgICAgIHB1c2hEaXIoJ2JpbmQnLCBkaXJlY3RpdmVzLmJpbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZVxuXG4gICAgICAgICAgICAvLyBub3JtYWwgZGlyZWN0aXZlc1xuICAgICAgICAgICAgaWYgKG1hdGNoZWQgPSBuYW1lLm1hdGNoKGRpckF0dHJSRSkpIHtcbiAgICAgICAgICAgICAgZGlyTmFtZSA9IG1hdGNoZWRbMV07XG4gICAgICAgICAgICAgIGFyZyA9IG1hdGNoZWRbMl07XG5cbiAgICAgICAgICAgICAgLy8gc2tpcCB2LWVsc2UgKHdoZW4gdXNlZCB3aXRoIHYtc2hvdylcbiAgICAgICAgICAgICAgaWYgKGRpck5hbWUgPT09ICdlbHNlJykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgZGlyRGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdkaXJlY3RpdmVzJywgZGlyTmFtZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgIGlmIChkaXJEZWYpIHtcbiAgICAgICAgICAgICAgICBwdXNoRGlyKGRpck5hbWUsIGRpckRlZik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQdXNoIGEgZGlyZWN0aXZlLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZGlyTmFtZVxuICAgKiBAcGFyYW0ge09iamVjdHxGdW5jdGlvbn0gZGVmXG4gICAqIEBwYXJhbSB7QXJyYXl9IFtpbnRlcnBUb2tlbnNdXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHB1c2hEaXIoZGlyTmFtZSwgZGVmLCBpbnRlcnBUb2tlbnMpIHtcbiAgICB2YXIgaGFzT25lVGltZVRva2VuID0gaW50ZXJwVG9rZW5zICYmIGhhc09uZVRpbWUoaW50ZXJwVG9rZW5zKTtcbiAgICB2YXIgcGFyc2VkID0gIWhhc09uZVRpbWVUb2tlbiAmJiBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG4gICAgZGlycy5wdXNoKHtcbiAgICAgIG5hbWU6IGRpck5hbWUsXG4gICAgICBhdHRyOiByYXdOYW1lLFxuICAgICAgcmF3OiByYXdWYWx1ZSxcbiAgICAgIGRlZjogZGVmLFxuICAgICAgYXJnOiBhcmcsXG4gICAgICBtb2RpZmllcnM6IG1vZGlmaWVycyxcbiAgICAgIC8vIGNvbnZlcnNpb24gZnJvbSBpbnRlcnBvbGF0aW9uIHN0cmluZ3Mgd2l0aCBvbmUtdGltZSB0b2tlblxuICAgICAgLy8gdG8gZXhwcmVzc2lvbiBpcyBkaWZmZXJlZCB1bnRpbCBkaXJlY3RpdmUgYmluZCB0aW1lIHNvIHRoYXQgd2VcbiAgICAgIC8vIGhhdmUgYWNjZXNzIHRvIHRoZSBhY3R1YWwgdm0gY29udGV4dCBmb3Igb25lLXRpbWUgYmluZGluZ3MuXG4gICAgICBleHByZXNzaW9uOiBwYXJzZWQgJiYgcGFyc2VkLmV4cHJlc3Npb24sXG4gICAgICBmaWx0ZXJzOiBwYXJzZWQgJiYgcGFyc2VkLmZpbHRlcnMsXG4gICAgICBpbnRlcnA6IGludGVycFRva2VucyxcbiAgICAgIGhhc09uZVRpbWU6IGhhc09uZVRpbWVUb2tlblxuICAgIH0pO1xuICB9XG5cbiAgaWYgKGRpcnMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIG1ha2VOb2RlTGlua0ZuKGRpcnMpO1xuICB9XG59XG5cbi8qKlxuICogUGFyc2UgbW9kaWZpZXJzIGZyb20gZGlyZWN0aXZlIGF0dHJpYnV0ZSBuYW1lLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VNb2RpZmllcnMobmFtZSkge1xuICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdmFyIG1hdGNoID0gbmFtZS5tYXRjaChtb2RpZmllclJFKTtcbiAgaWYgKG1hdGNoKSB7XG4gICAgdmFyIGkgPSBtYXRjaC5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgcmVzW21hdGNoW2ldLnNsaWNlKDEpXSA9IHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogQnVpbGQgYSBsaW5rIGZ1bmN0aW9uIGZvciBhbGwgZGlyZWN0aXZlcyBvbiBhIHNpbmdsZSBub2RlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGRpcmVjdGl2ZXNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBkaXJlY3RpdmVzTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gbWFrZU5vZGVMaW5rRm4oZGlyZWN0aXZlcykge1xuICByZXR1cm4gZnVuY3Rpb24gbm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgLy8gcmV2ZXJzZSBhcHBseSBiZWNhdXNlIGl0J3Mgc29ydGVkIGxvdyB0byBoaWdoXG4gICAgdmFyIGkgPSBkaXJlY3RpdmVzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2bS5fYmluZERpcihkaXJlY3RpdmVzW2ldLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBpbnRlcnBvbGF0aW9uIHN0cmluZyBjb250YWlucyBvbmUtdGltZSB0b2tlbnMuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gdG9rZW5zXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGhhc09uZVRpbWUodG9rZW5zKSB7XG4gIHZhciBpID0gdG9rZW5zLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIGlmICh0b2tlbnNbaV0ub25lVGltZSkgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNTY3JpcHQoZWwpIHtcbiAgcmV0dXJuIGVsLnRhZ05hbWUgPT09ICdTQ1JJUFQnICYmICghZWwuaGFzQXR0cmlidXRlKCd0eXBlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCd0eXBlJykgPT09ICd0ZXh0L2phdmFzY3JpcHQnKTtcbn1cblxudmFyIHNwZWNpYWxDaGFyUkUgPSAvW15cXHdcXC06XFwuXS87XG5cbi8qKlxuICogUHJvY2VzcyBhbiBlbGVtZW50IG9yIGEgRG9jdW1lbnRGcmFnbWVudCBiYXNlZCBvbiBhXG4gKiBpbnN0YW5jZSBvcHRpb24gb2JqZWN0LiBUaGlzIGFsbG93cyB1cyB0byB0cmFuc2NsdWRlXG4gKiBhIHRlbXBsYXRlIG5vZGUvZnJhZ21lbnQgYmVmb3JlIHRoZSBpbnN0YW5jZSBpcyBjcmVhdGVkLFxuICogc28gdGhlIHByb2Nlc3NlZCBmcmFnbWVudCBjYW4gdGhlbiBiZSBjbG9uZWQgYW5kIHJldXNlZFxuICogaW4gdi1mb3IuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiB0cmFuc2NsdWRlKGVsLCBvcHRpb25zKSB7XG4gIC8vIGV4dHJhY3QgY29udGFpbmVyIGF0dHJpYnV0ZXMgdG8gcGFzcyB0aGVtIGRvd25cbiAgLy8gdG8gY29tcGlsZXIsIGJlY2F1c2UgdGhleSBuZWVkIHRvIGJlIGNvbXBpbGVkIGluXG4gIC8vIHBhcmVudCBzY29wZS4gd2UgYXJlIG11dGF0aW5nIHRoZSBvcHRpb25zIG9iamVjdCBoZXJlXG4gIC8vIGFzc3VtaW5nIHRoZSBzYW1lIG9iamVjdCB3aWxsIGJlIHVzZWQgZm9yIGNvbXBpbGVcbiAgLy8gcmlnaHQgYWZ0ZXIgdGhpcy5cbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zLl9jb250YWluZXJBdHRycyA9IGV4dHJhY3RBdHRycyhlbCk7XG4gIH1cbiAgLy8gZm9yIHRlbXBsYXRlIHRhZ3MsIHdoYXQgd2Ugd2FudCBpcyBpdHMgY29udGVudCBhc1xuICAvLyBhIGRvY3VtZW50RnJhZ21lbnQgKGZvciBmcmFnbWVudCBpbnN0YW5jZXMpXG4gIGlmIChpc1RlbXBsYXRlKGVsKSkge1xuICAgIGVsID0gcGFyc2VUZW1wbGF0ZShlbCk7XG4gIH1cbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQgJiYgIW9wdGlvbnMudGVtcGxhdGUpIHtcbiAgICAgIG9wdGlvbnMudGVtcGxhdGUgPSAnPHNsb3Q+PC9zbG90Pic7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnRlbXBsYXRlKSB7XG4gICAgICBvcHRpb25zLl9jb250ZW50ID0gZXh0cmFjdENvbnRlbnQoZWwpO1xuICAgICAgZWwgPSB0cmFuc2NsdWRlVGVtcGxhdGUoZWwsIG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuICBpZiAoaXNGcmFnbWVudChlbCkpIHtcbiAgICAvLyBhbmNob3JzIGZvciBmcmFnbWVudCBpbnN0YW5jZVxuICAgIC8vIHBhc3NpbmcgaW4gYHBlcnNpc3Q6IHRydWVgIHRvIGF2b2lkIHRoZW0gYmVpbmdcbiAgICAvLyBkaXNjYXJkZWQgYnkgSUUgZHVyaW5nIHRlbXBsYXRlIGNsb25pbmdcbiAgICBwcmVwZW5kKGNyZWF0ZUFuY2hvcigndi1zdGFydCcsIHRydWUpLCBlbCk7XG4gICAgZWwuYXBwZW5kQ2hpbGQoY3JlYXRlQW5jaG9yKCd2LWVuZCcsIHRydWUpKTtcbiAgfVxuICByZXR1cm4gZWw7XG59XG5cbi8qKlxuICogUHJvY2VzcyB0aGUgdGVtcGxhdGUgb3B0aW9uLlxuICogSWYgdGhlIHJlcGxhY2Ugb3B0aW9uIGlzIHRydWUgdGhpcyB3aWxsIHN3YXAgdGhlICRlbC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIHRyYW5zY2x1ZGVUZW1wbGF0ZShlbCwgb3B0aW9ucykge1xuICB2YXIgdGVtcGxhdGUgPSBvcHRpb25zLnRlbXBsYXRlO1xuICB2YXIgZnJhZyA9IHBhcnNlVGVtcGxhdGUodGVtcGxhdGUsIHRydWUpO1xuICBpZiAoZnJhZykge1xuICAgIHZhciByZXBsYWNlciA9IGZyYWcuZmlyc3RDaGlsZDtcbiAgICB2YXIgdGFnID0gcmVwbGFjZXIudGFnTmFtZSAmJiByZXBsYWNlci50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKG9wdGlvbnMucmVwbGFjZSkge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoZWwgPT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdZb3UgYXJlIG1vdW50aW5nIGFuIGluc3RhbmNlIHdpdGggYSB0ZW1wbGF0ZSB0byAnICsgJzxib2R5Pi4gVGhpcyB3aWxsIHJlcGxhY2UgPGJvZHk+IGVudGlyZWx5LiBZb3UgJyArICdzaG91bGQgcHJvYmFibHkgdXNlIGByZXBsYWNlOiBmYWxzZWAgaGVyZS4nKTtcbiAgICAgIH1cbiAgICAgIC8vIHRoZXJlIGFyZSBtYW55IGNhc2VzIHdoZXJlIHRoZSBpbnN0YW5jZSBtdXN0XG4gICAgICAvLyBiZWNvbWUgYSBmcmFnbWVudCBpbnN0YW5jZTogYmFzaWNhbGx5IGFueXRoaW5nIHRoYXRcbiAgICAgIC8vIGNhbiBjcmVhdGUgbW9yZSB0aGFuIDEgcm9vdCBub2Rlcy5cbiAgICAgIGlmIChcbiAgICAgIC8vIG11bHRpLWNoaWxkcmVuIHRlbXBsYXRlXG4gICAgICBmcmFnLmNoaWxkTm9kZXMubGVuZ3RoID4gMSB8fFxuICAgICAgLy8gbm9uLWVsZW1lbnQgdGVtcGxhdGVcbiAgICAgIHJlcGxhY2VyLm5vZGVUeXBlICE9PSAxIHx8XG4gICAgICAvLyBzaW5nbGUgbmVzdGVkIGNvbXBvbmVudFxuICAgICAgdGFnID09PSAnY29tcG9uZW50JyB8fCByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCB0YWcpIHx8IGhhc0JpbmRBdHRyKHJlcGxhY2VyLCAnaXMnKSB8fFxuICAgICAgLy8gZWxlbWVudCBkaXJlY3RpdmVcbiAgICAgIHJlc29sdmVBc3NldChvcHRpb25zLCAnZWxlbWVudERpcmVjdGl2ZXMnLCB0YWcpIHx8XG4gICAgICAvLyBmb3IgYmxvY2tcbiAgICAgIHJlcGxhY2VyLmhhc0F0dHJpYnV0ZSgndi1mb3InKSB8fFxuICAgICAgLy8gaWYgYmxvY2tcbiAgICAgIHJlcGxhY2VyLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG4gICAgICAgIHJldHVybiBmcmFnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3B0aW9ucy5fcmVwbGFjZXJBdHRycyA9IGV4dHJhY3RBdHRycyhyZXBsYWNlcik7XG4gICAgICAgIG1lcmdlQXR0cnMoZWwsIHJlcGxhY2VyKTtcbiAgICAgICAgcmV0dXJuIHJlcGxhY2VyO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBlbC5hcHBlbmRDaGlsZChmcmFnKTtcbiAgICAgIHJldHVybiBlbDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHRlbXBsYXRlIG9wdGlvbjogJyArIHRlbXBsYXRlKTtcbiAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBleHRyYWN0IGEgY29tcG9uZW50IGNvbnRhaW5lcidzIGF0dHJpYnV0ZXNcbiAqIGludG8gYSBwbGFpbiBvYmplY3QgYXJyYXkuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHJldHVybiB7QXJyYXl9XG4gKi9cblxuZnVuY3Rpb24gZXh0cmFjdEF0dHJzKGVsKSB7XG4gIGlmIChlbC5ub2RlVHlwZSA9PT0gMSAmJiBlbC5oYXNBdHRyaWJ1dGVzKCkpIHtcbiAgICByZXR1cm4gdG9BcnJheShlbC5hdHRyaWJ1dGVzKTtcbiAgfVxufVxuXG4vKipcbiAqIE1lcmdlIHRoZSBhdHRyaWJ1dGVzIG9mIHR3byBlbGVtZW50cywgYW5kIG1ha2Ugc3VyZVxuICogdGhlIGNsYXNzIG5hbWVzIGFyZSBtZXJnZWQgcHJvcGVybHkuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBmcm9tXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRvXG4gKi9cblxuZnVuY3Rpb24gbWVyZ2VBdHRycyhmcm9tLCB0bykge1xuICB2YXIgYXR0cnMgPSBmcm9tLmF0dHJpYnV0ZXM7XG4gIHZhciBpID0gYXR0cnMubGVuZ3RoO1xuICB2YXIgbmFtZSwgdmFsdWU7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBuYW1lID0gYXR0cnNbaV0ubmFtZTtcbiAgICB2YWx1ZSA9IGF0dHJzW2ldLnZhbHVlO1xuICAgIGlmICghdG8uaGFzQXR0cmlidXRlKG5hbWUpICYmICFzcGVjaWFsQ2hhclJFLnRlc3QobmFtZSkpIHtcbiAgICAgIHRvLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChuYW1lID09PSAnY2xhc3MnICYmICFwYXJzZVRleHQodmFsdWUpICYmICh2YWx1ZSA9IHZhbHVlLnRyaW0oKSkpIHtcbiAgICAgIHZhbHVlLnNwbGl0KC9cXHMrLykuZm9yRWFjaChmdW5jdGlvbiAoY2xzKSB7XG4gICAgICAgIGFkZENsYXNzKHRvLCBjbHMpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU2NhbiBhbmQgZGV0ZXJtaW5lIHNsb3QgY29udGVudCBkaXN0cmlidXRpb24uXG4gKiBXZSBkbyB0aGlzIGR1cmluZyB0cmFuc2NsdXNpb24gaW5zdGVhZCBhdCBjb21waWxlIHRpbWUgc28gdGhhdFxuICogdGhlIGRpc3RyaWJ1dGlvbiBpcyBkZWNvdXBsZWQgZnJvbSB0aGUgY29tcGlsYXRpb24gb3JkZXIgb2ZcbiAqIHRoZSBzbG90cy5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gdGVtcGxhdGVcbiAqIEBwYXJhbSB7RWxlbWVudH0gY29udGVudFxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuZnVuY3Rpb24gcmVzb2x2ZVNsb3RzKHZtLCBjb250ZW50KSB7XG4gIGlmICghY29udGVudCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgY29udGVudHMgPSB2bS5fc2xvdENvbnRlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdmFyIGVsLCBuYW1lO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGNvbnRlbnQuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZWwgPSBjb250ZW50LmNoaWxkcmVuW2ldO1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgaWYgKG5hbWUgPSBlbC5nZXRBdHRyaWJ1dGUoJ3Nsb3QnKSkge1xuICAgICAgKGNvbnRlbnRzW25hbWVdIHx8IChjb250ZW50c1tuYW1lXSA9IFtdKSkucHVzaChlbCk7XG4gICAgfVxuICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBnZXRCaW5kQXR0cihlbCwgJ3Nsb3QnKSkge1xuICAgICAgd2FybignVGhlIFwic2xvdFwiIGF0dHJpYnV0ZSBtdXN0IGJlIHN0YXRpYy4nLCB2bS4kcGFyZW50KTtcbiAgICB9XG4gIH1cbiAgZm9yIChuYW1lIGluIGNvbnRlbnRzKSB7XG4gICAgY29udGVudHNbbmFtZV0gPSBleHRyYWN0RnJhZ21lbnQoY29udGVudHNbbmFtZV0sIGNvbnRlbnQpO1xuICB9XG4gIGlmIChjb250ZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xuICAgIHZhciBub2RlcyA9IGNvbnRlbnQuY2hpbGROb2RlcztcbiAgICBpZiAobm9kZXMubGVuZ3RoID09PSAxICYmIG5vZGVzWzBdLm5vZGVUeXBlID09PSAzICYmICFub2Rlc1swXS5kYXRhLnRyaW0oKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb250ZW50c1snZGVmYXVsdCddID0gZXh0cmFjdEZyYWdtZW50KGNvbnRlbnQuY2hpbGROb2RlcywgY29udGVudCk7XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRyYWN0IHF1YWxpZmllZCBjb250ZW50IG5vZGVzIGZyb20gYSBub2RlIGxpc3QuXG4gKlxuICogQHBhcmFtIHtOb2RlTGlzdH0gbm9kZXNcbiAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gZXh0cmFjdEZyYWdtZW50KG5vZGVzLCBwYXJlbnQpIHtcbiAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIG5vZGVzID0gdG9BcnJheShub2Rlcyk7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdmFyIG5vZGUgPSBub2Rlc1tpXTtcbiAgICBpZiAoaXNUZW1wbGF0ZShub2RlKSAmJiAhbm9kZS5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSAmJiAhbm9kZS5oYXNBdHRyaWJ1dGUoJ3YtZm9yJykpIHtcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgIG5vZGUgPSBwYXJzZVRlbXBsYXRlKG5vZGUsIHRydWUpO1xuICAgIH1cbiAgICBmcmFnLmFwcGVuZENoaWxkKG5vZGUpO1xuICB9XG4gIHJldHVybiBmcmFnO1xufVxuXG5cblxudmFyIGNvbXBpbGVyID0gT2JqZWN0LmZyZWV6ZSh7XG5cdGNvbXBpbGU6IGNvbXBpbGUsXG5cdGNvbXBpbGVBbmRMaW5rUHJvcHM6IGNvbXBpbGVBbmRMaW5rUHJvcHMsXG5cdGNvbXBpbGVSb290OiBjb21waWxlUm9vdCxcblx0dHJhbnNjbHVkZTogdHJhbnNjbHVkZSxcblx0cmVzb2x2ZVNsb3RzOiByZXNvbHZlU2xvdHNcbn0pO1xuXG5mdW5jdGlvbiBzdGF0ZU1peGluIChWdWUpIHtcbiAgLyoqXG4gICAqIEFjY2Vzc29yIGZvciBgJGRhdGFgIHByb3BlcnR5LCBzaW5jZSBzZXR0aW5nICRkYXRhXG4gICAqIHJlcXVpcmVzIG9ic2VydmluZyB0aGUgbmV3IG9iamVjdCBhbmQgdXBkYXRpbmdcbiAgICogcHJveGllZCBwcm9wZXJ0aWVzLlxuICAgKi9cblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRkYXRhJywge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXdEYXRhKSB7XG4gICAgICBpZiAobmV3RGF0YSAhPT0gdGhpcy5fZGF0YSkge1xuICAgICAgICB0aGlzLl9zZXREYXRhKG5ld0RhdGEpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIFNldHVwIHRoZSBzY29wZSBvZiBhbiBpbnN0YW5jZSwgd2hpY2ggY29udGFpbnM6XG4gICAqIC0gb2JzZXJ2ZWQgZGF0YVxuICAgKiAtIGNvbXB1dGVkIHByb3BlcnRpZXNcbiAgICogLSB1c2VyIG1ldGhvZHNcbiAgICogLSBtZXRhIHByb3BlcnRpZXNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2luaXRQcm9wcygpO1xuICAgIHRoaXMuX2luaXRNZXRhKCk7XG4gICAgdGhpcy5faW5pdE1ldGhvZHMoKTtcbiAgICB0aGlzLl9pbml0RGF0YSgpO1xuICAgIHRoaXMuX2luaXRDb21wdXRlZCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHByb3BzLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0UHJvcHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuICAgIHZhciBlbCA9IG9wdGlvbnMuZWw7XG4gICAgdmFyIHByb3BzID0gb3B0aW9ucy5wcm9wcztcbiAgICBpZiAocHJvcHMgJiYgIWVsKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1Byb3BzIHdpbGwgbm90IGJlIGNvbXBpbGVkIGlmIG5vIGBlbGAgb3B0aW9uIGlzICcgKyAncHJvdmlkZWQgYXQgaW5zdGFudGlhdGlvbi4nLCB0aGlzKTtcbiAgICB9XG4gICAgLy8gbWFrZSBzdXJlIHRvIGNvbnZlcnQgc3RyaW5nIHNlbGVjdG9ycyBpbnRvIGVsZW1lbnQgbm93XG4gICAgZWwgPSBvcHRpb25zLmVsID0gcXVlcnkoZWwpO1xuICAgIHRoaXMuX3Byb3BzVW5saW5rRm4gPSBlbCAmJiBlbC5ub2RlVHlwZSA9PT0gMSAmJiBwcm9wc1xuICAgIC8vIHByb3BzIG11c3QgYmUgbGlua2VkIGluIHByb3BlciBzY29wZSBpZiBpbnNpZGUgdi1mb3JcbiAgICA/IGNvbXBpbGVBbmRMaW5rUHJvcHModGhpcywgZWwsIHByb3BzLCB0aGlzLl9zY29wZSkgOiBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSBkYXRhLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZGF0YUZuID0gdGhpcy4kb3B0aW9ucy5kYXRhO1xuICAgIHZhciBkYXRhID0gdGhpcy5fZGF0YSA9IGRhdGFGbiA/IGRhdGFGbigpIDoge307XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG4gICAgICBkYXRhID0ge307XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ2RhdGEgZnVuY3Rpb25zIHNob3VsZCByZXR1cm4gYW4gb2JqZWN0LicsIHRoaXMpO1xuICAgIH1cbiAgICB2YXIgcHJvcHMgPSB0aGlzLl9wcm9wcztcbiAgICAvLyBwcm94eSBkYXRhIG9uIGluc3RhbmNlXG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKTtcbiAgICB2YXIgaSwga2V5O1xuICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgLy8gdGhlcmUgYXJlIHR3byBzY2VuYXJpb3Mgd2hlcmUgd2UgY2FuIHByb3h5IGEgZGF0YSBrZXk6XG4gICAgICAvLyAxLiBpdCdzIG5vdCBhbHJlYWR5IGRlZmluZWQgYXMgYSBwcm9wXG4gICAgICAvLyAyLiBpdCdzIHByb3ZpZGVkIHZpYSBhIGluc3RhbnRpYXRpb24gb3B0aW9uIEFORCB0aGVyZSBhcmUgbm9cbiAgICAgIC8vICAgIHRlbXBsYXRlIHByb3AgcHJlc2VudFxuICAgICAgaWYgKCFwcm9wcyB8fCAhaGFzT3duKHByb3BzLCBrZXkpKSB7XG4gICAgICAgIHRoaXMuX3Byb3h5KGtleSk7XG4gICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgd2FybignRGF0YSBmaWVsZCBcIicgKyBrZXkgKyAnXCIgaXMgYWxyZWFkeSBkZWZpbmVkICcgKyAnYXMgYSBwcm9wLiBUbyBwcm92aWRlIGRlZmF1bHQgdmFsdWUgZm9yIGEgcHJvcCwgdXNlIHRoZSBcImRlZmF1bHRcIiAnICsgJ3Byb3Agb3B0aW9uOyBpZiB5b3Ugd2FudCB0byBwYXNzIHByb3AgdmFsdWVzIHRvIGFuIGluc3RhbnRpYXRpb24gJyArICdjYWxsLCB1c2UgdGhlIFwicHJvcHNEYXRhXCIgb3B0aW9uLicsIHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBvYnNlcnZlIGRhdGFcbiAgICBvYnNlcnZlKGRhdGEsIHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTd2FwIHRoZSBpbnN0YW5jZSdzICRkYXRhLiBDYWxsZWQgaW4gJGRhdGEncyBzZXR0ZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBuZXdEYXRhXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX3NldERhdGEgPSBmdW5jdGlvbiAobmV3RGF0YSkge1xuICAgIG5ld0RhdGEgPSBuZXdEYXRhIHx8IHt9O1xuICAgIHZhciBvbGREYXRhID0gdGhpcy5fZGF0YTtcbiAgICB0aGlzLl9kYXRhID0gbmV3RGF0YTtcbiAgICB2YXIga2V5cywga2V5LCBpO1xuICAgIC8vIHVucHJveHkga2V5cyBub3QgcHJlc2VudCBpbiBuZXcgZGF0YVxuICAgIGtleXMgPSBPYmplY3Qua2V5cyhvbGREYXRhKTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgIGlmICghKGtleSBpbiBuZXdEYXRhKSkge1xuICAgICAgICB0aGlzLl91bnByb3h5KGtleSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIHByb3h5IGtleXMgbm90IGFscmVhZHkgcHJveGllZCxcbiAgICAvLyBhbmQgdHJpZ2dlciBjaGFuZ2UgZm9yIGNoYW5nZWQgdmFsdWVzXG4gICAga2V5cyA9IE9iamVjdC5rZXlzKG5ld0RhdGEpO1xuICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYgKCFoYXNPd24odGhpcywga2V5KSkge1xuICAgICAgICAvLyBuZXcgcHJvcGVydHlcbiAgICAgICAgdGhpcy5fcHJveHkoa2V5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgb2xkRGF0YS5fX29iX18ucmVtb3ZlVm0odGhpcyk7XG4gICAgb2JzZXJ2ZShuZXdEYXRhLCB0aGlzKTtcbiAgICB0aGlzLl9kaWdlc3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogUHJveHkgYSBwcm9wZXJ0eSwgc28gdGhhdFxuICAgKiB2bS5wcm9wID09PSB2bS5fZGF0YS5wcm9wXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fcHJveHkgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgaWYgKCFpc1Jlc2VydmVkKGtleSkpIHtcbiAgICAgIC8vIG5lZWQgdG8gc3RvcmUgcmVmIHRvIHNlbGYgaGVyZVxuICAgICAgLy8gYmVjYXVzZSB0aGVzZSBnZXR0ZXIvc2V0dGVycyBtaWdodFxuICAgICAgLy8gYmUgY2FsbGVkIGJ5IGNoaWxkIHNjb3BlcyB2aWFcbiAgICAgIC8vIHByb3RvdHlwZSBpbmhlcml0YW5jZS5cbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCBrZXksIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIHByb3h5R2V0dGVyKCkge1xuICAgICAgICAgIHJldHVybiBzZWxmLl9kYXRhW2tleV07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gcHJveHlTZXR0ZXIodmFsKSB7XG4gICAgICAgICAgc2VsZi5fZGF0YVtrZXldID0gdmFsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFVucHJveHkgYSBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl91bnByb3h5ID0gZnVuY3Rpb24gKGtleSkge1xuICAgIGlmICghaXNSZXNlcnZlZChrZXkpKSB7XG4gICAgICBkZWxldGUgdGhpc1trZXldO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRm9yY2UgdXBkYXRlIG9uIGV2ZXJ5IHdhdGNoZXIgaW4gc2NvcGUuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMuX3dhdGNoZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdGhpcy5fd2F0Y2hlcnNbaV0udXBkYXRlKHRydWUpOyAvLyBzaGFsbG93IHVwZGF0ZXNcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHVwIGNvbXB1dGVkIHByb3BlcnRpZXMuIFRoZXkgYXJlIGVzc2VudGlhbGx5XG4gICAqIHNwZWNpYWwgZ2V0dGVyL3NldHRlcnNcbiAgICovXG5cbiAgZnVuY3Rpb24gbm9vcCgpIHt9XG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRDb21wdXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY29tcHV0ZWQgPSB0aGlzLiRvcHRpb25zLmNvbXB1dGVkO1xuICAgIGlmIChjb21wdXRlZCkge1xuICAgICAgZm9yICh2YXIga2V5IGluIGNvbXB1dGVkKSB7XG4gICAgICAgIHZhciB1c2VyRGVmID0gY29tcHV0ZWRba2V5XTtcbiAgICAgICAgdmFyIGRlZiA9IHtcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIHVzZXJEZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBkZWYuZ2V0ID0gbWFrZUNvbXB1dGVkR2V0dGVyKHVzZXJEZWYsIHRoaXMpO1xuICAgICAgICAgIGRlZi5zZXQgPSBub29wO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlZi5nZXQgPSB1c2VyRGVmLmdldCA/IHVzZXJEZWYuY2FjaGUgIT09IGZhbHNlID8gbWFrZUNvbXB1dGVkR2V0dGVyKHVzZXJEZWYuZ2V0LCB0aGlzKSA6IGJpbmQodXNlckRlZi5nZXQsIHRoaXMpIDogbm9vcDtcbiAgICAgICAgICBkZWYuc2V0ID0gdXNlckRlZi5zZXQgPyBiaW5kKHVzZXJEZWYuc2V0LCB0aGlzKSA6IG5vb3A7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGtleSwgZGVmKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gbWFrZUNvbXB1dGVkR2V0dGVyKGdldHRlciwgb3duZXIpIHtcbiAgICB2YXIgd2F0Y2hlciA9IG5ldyBXYXRjaGVyKG93bmVyLCBnZXR0ZXIsIG51bGwsIHtcbiAgICAgIGxhenk6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gY29tcHV0ZWRHZXR0ZXIoKSB7XG4gICAgICBpZiAod2F0Y2hlci5kaXJ0eSkge1xuICAgICAgICB3YXRjaGVyLmV2YWx1YXRlKCk7XG4gICAgICB9XG4gICAgICBpZiAoRGVwLnRhcmdldCkge1xuICAgICAgICB3YXRjaGVyLmRlcGVuZCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdhdGNoZXIudmFsdWU7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBpbnN0YW5jZSBtZXRob2RzLiBNZXRob2RzIG11c3QgYmUgYm91bmQgdG8gdGhlXG4gICAqIGluc3RhbmNlIHNpbmNlIHRoZXkgbWlnaHQgYmUgcGFzc2VkIGRvd24gYXMgYSBwcm9wIHRvXG4gICAqIGNoaWxkIGNvbXBvbmVudHMuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRNZXRob2RzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBtZXRob2RzID0gdGhpcy4kb3B0aW9ucy5tZXRob2RzO1xuICAgIGlmIChtZXRob2RzKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gbWV0aG9kcykge1xuICAgICAgICB0aGlzW2tleV0gPSBiaW5kKG1ldGhvZHNba2V5XSwgdGhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIG1ldGEgaW5mb3JtYXRpb24gbGlrZSAkaW5kZXgsICRrZXkgJiAkdmFsdWUuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRNZXRhID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBtZXRhcyA9IHRoaXMuJG9wdGlvbnMuX21ldGE7XG4gICAgaWYgKG1ldGFzKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gbWV0YXMpIHtcbiAgICAgICAgZGVmaW5lUmVhY3RpdmUodGhpcywga2V5LCBtZXRhc1trZXldKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbnZhciBldmVudFJFID0gL152LW9uOnxeQC87XG5cbmZ1bmN0aW9uIGV2ZW50c01peGluIChWdWUpIHtcbiAgLyoqXG4gICAqIFNldHVwIHRoZSBpbnN0YW5jZSdzIG9wdGlvbiBldmVudHMgJiB3YXRjaGVycy5cbiAgICogSWYgdGhlIHZhbHVlIGlzIGEgc3RyaW5nLCB3ZSBwdWxsIGl0IGZyb20gdGhlXG4gICAqIGluc3RhbmNlJ3MgbWV0aG9kcyBieSBuYW1lLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0RXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcbiAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQpIHtcbiAgICAgIHJlZ2lzdGVyQ29tcG9uZW50RXZlbnRzKHRoaXMsIG9wdGlvbnMuZWwpO1xuICAgIH1cbiAgICByZWdpc3RlckNhbGxiYWNrcyh0aGlzLCAnJG9uJywgb3B0aW9ucy5ldmVudHMpO1xuICAgIHJlZ2lzdGVyQ2FsbGJhY2tzKHRoaXMsICckd2F0Y2gnLCBvcHRpb25zLndhdGNoKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVnaXN0ZXIgdi1vbiBldmVudHMgb24gYSBjaGlsZCBjb21wb25lbnRcbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICovXG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnRFdmVudHModm0sIGVsKSB7XG4gICAgdmFyIGF0dHJzID0gZWwuYXR0cmlidXRlcztcbiAgICB2YXIgbmFtZSwgdmFsdWUsIGhhbmRsZXI7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuICAgICAgaWYgKGV2ZW50UkUudGVzdChuYW1lKSkge1xuICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKGV2ZW50UkUsICcnKTtcbiAgICAgICAgLy8gZm9yY2UgdGhlIGV4cHJlc3Npb24gaW50byBhIHN0YXRlbWVudCBzbyB0aGF0XG4gICAgICAgIC8vIGl0IGFsd2F5cyBkeW5hbWljYWxseSByZXNvbHZlcyB0aGUgbWV0aG9kIHRvIGNhbGwgKCMyNjcwKVxuICAgICAgICAvLyBraW5kYSB1Z2x5IGhhY2ssIGJ1dCBkb2VzIHRoZSBqb2IuXG4gICAgICAgIHZhbHVlID0gYXR0cnNbaV0udmFsdWU7XG4gICAgICAgIGlmIChpc1NpbXBsZVBhdGgodmFsdWUpKSB7XG4gICAgICAgICAgdmFsdWUgKz0gJy5hcHBseSh0aGlzLCAkYXJndW1lbnRzKSc7XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlciA9ICh2bS5fc2NvcGUgfHwgdm0uX2NvbnRleHQpLiRldmFsKHZhbHVlLCB0cnVlKTtcbiAgICAgICAgaGFuZGxlci5fZnJvbVBhcmVudCA9IHRydWU7XG4gICAgICAgIHZtLiRvbihuYW1lLnJlcGxhY2UoZXZlbnRSRSksIGhhbmRsZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBjYWxsYmFja3MgZm9yIG9wdGlvbiBldmVudHMgYW5kIHdhdGNoZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gaGFzaFxuICAgKi9cblxuICBmdW5jdGlvbiByZWdpc3RlckNhbGxiYWNrcyh2bSwgYWN0aW9uLCBoYXNoKSB7XG4gICAgaWYgKCFoYXNoKSByZXR1cm47XG4gICAgdmFyIGhhbmRsZXJzLCBrZXksIGksIGo7XG4gICAgZm9yIChrZXkgaW4gaGFzaCkge1xuICAgICAgaGFuZGxlcnMgPSBoYXNoW2tleV07XG4gICAgICBpZiAoaXNBcnJheShoYW5kbGVycykpIHtcbiAgICAgICAgZm9yIChpID0gMCwgaiA9IGhhbmRsZXJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlcnNbaV0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXJzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIHRvIHJlZ2lzdGVyIGFuIGV2ZW50L3dhdGNoIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvblxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAqIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfE9iamVjdH0gaGFuZGxlclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlciwgb3B0aW9ucykge1xuICAgIHZhciB0eXBlID0gdHlwZW9mIGhhbmRsZXI7XG4gICAgaWYgKHR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHZtW2FjdGlvbl0oa2V5LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB2YXIgbWV0aG9kcyA9IHZtLiRvcHRpb25zLm1ldGhvZHM7XG4gICAgICB2YXIgbWV0aG9kID0gbWV0aG9kcyAmJiBtZXRob2RzW2hhbmRsZXJdO1xuICAgICAgaWYgKG1ldGhvZCkge1xuICAgICAgICB2bVthY3Rpb25dKGtleSwgbWV0aG9kLCBvcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVW5rbm93biBtZXRob2Q6IFwiJyArIGhhbmRsZXIgKyAnXCIgd2hlbiAnICsgJ3JlZ2lzdGVyaW5nIGNhbGxiYWNrIGZvciAnICsgYWN0aW9uICsgJzogXCInICsga2V5ICsgJ1wiLicsIHZtKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGhhbmRsZXIgJiYgdHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlci5oYW5kbGVyLCBoYW5kbGVyKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgcmVjdXJzaXZlIGF0dGFjaGVkL2RldGFjaGVkIGNhbGxzXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRET01Ib29rcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLiRvbignaG9vazphdHRhY2hlZCcsIG9uQXR0YWNoZWQpO1xuICAgIHRoaXMuJG9uKCdob29rOmRldGFjaGVkJywgb25EZXRhY2hlZCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIHRvIHJlY3Vyc2l2ZWx5IGNhbGwgYXR0YWNoZWQgaG9vayBvbiBjaGlsZHJlblxuICAgKi9cblxuICBmdW5jdGlvbiBvbkF0dGFjaGVkKCkge1xuICAgIGlmICghdGhpcy5faXNBdHRhY2hlZCkge1xuICAgICAgdGhpcy5faXNBdHRhY2hlZCA9IHRydWU7XG4gICAgICB0aGlzLiRjaGlsZHJlbi5mb3JFYWNoKGNhbGxBdHRhY2gpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJdGVyYXRvciB0byBjYWxsIGF0dGFjaGVkIGhvb2tcbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IGNoaWxkXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNhbGxBdHRhY2goY2hpbGQpIHtcbiAgICBpZiAoIWNoaWxkLl9pc0F0dGFjaGVkICYmIGluRG9jKGNoaWxkLiRlbCkpIHtcbiAgICAgIGNoaWxkLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGJhY2sgdG8gcmVjdXJzaXZlbHkgY2FsbCBkZXRhY2hlZCBob29rIG9uIGNoaWxkcmVuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIG9uRGV0YWNoZWQoKSB7XG4gICAgaWYgKHRoaXMuX2lzQXR0YWNoZWQpIHtcbiAgICAgIHRoaXMuX2lzQXR0YWNoZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuJGNoaWxkcmVuLmZvckVhY2goY2FsbERldGFjaCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEl0ZXJhdG9yIHRvIGNhbGwgZGV0YWNoZWQgaG9va1xuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcbiAgICovXG5cbiAgZnVuY3Rpb24gY2FsbERldGFjaChjaGlsZCkge1xuICAgIGlmIChjaGlsZC5faXNBdHRhY2hlZCAmJiAhaW5Eb2MoY2hpbGQuJGVsKSkge1xuICAgICAgY2hpbGQuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyIGFsbCBoYW5kbGVycyBmb3IgYSBob29rXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBob29rXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2NhbGxIb29rID0gZnVuY3Rpb24gKGhvb2spIHtcbiAgICB0aGlzLiRlbWl0KCdwcmUtaG9vazonICsgaG9vayk7XG4gICAgdmFyIGhhbmRsZXJzID0gdGhpcy4kb3B0aW9uc1tob29rXTtcbiAgICBpZiAoaGFuZGxlcnMpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgIGhhbmRsZXJzW2ldLmNhbGwodGhpcyk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuJGVtaXQoJ2hvb2s6JyArIGhvb2spO1xuICB9O1xufVxuXG5mdW5jdGlvbiBub29wJDEoKSB7fVxuXG4vKipcbiAqIEEgZGlyZWN0aXZlIGxpbmtzIGEgRE9NIGVsZW1lbnQgd2l0aCBhIHBpZWNlIG9mIGRhdGEsXG4gKiB3aGljaCBpcyB0aGUgcmVzdWx0IG9mIGV2YWx1YXRpbmcgYW4gZXhwcmVzc2lvbi5cbiAqIEl0IHJlZ2lzdGVycyBhIHdhdGNoZXIgd2l0aCB0aGUgZXhwcmVzc2lvbiBhbmQgY2FsbHNcbiAqIHRoZSBET00gdXBkYXRlIGZ1bmN0aW9uIHdoZW4gYSBjaGFuZ2UgaXMgdHJpZ2dlcmVkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZXNjcmlwdG9yXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBuYW1lXG4gKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBkZWZcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGV4cHJlc3Npb25cbiAqICAgICAgICAgICAgICAgICAtIHtBcnJheTxPYmplY3Q+fSBbZmlsdGVyc11cbiAqICAgICAgICAgICAgICAgICAtIHtPYmplY3R9IFttb2RpZmllcnNdXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gbGl0ZXJhbFxuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gYXR0clxuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gYXJnXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSByYXdcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IFtyZWZdXG4gKiAgICAgICAgICAgICAgICAgLSB7QXJyYXk8T2JqZWN0Pn0gW2ludGVycF1cbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBbaGFzT25lVGltZV1cbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtOb2RlfSBlbFxuICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIHRyYW5zY2x1c2lvbiBob3N0IGNvbXBvbmVudFxuICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddIC0gb3duZXIgZnJhZ21lbnRcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBEaXJlY3RpdmUoZGVzY3JpcHRvciwgdm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICB0aGlzLnZtID0gdm07XG4gIHRoaXMuZWwgPSBlbDtcbiAgLy8gY29weSBkZXNjcmlwdG9yIHByb3BlcnRpZXNcbiAgdGhpcy5kZXNjcmlwdG9yID0gZGVzY3JpcHRvcjtcbiAgdGhpcy5uYW1lID0gZGVzY3JpcHRvci5uYW1lO1xuICB0aGlzLmV4cHJlc3Npb24gPSBkZXNjcmlwdG9yLmV4cHJlc3Npb247XG4gIHRoaXMuYXJnID0gZGVzY3JpcHRvci5hcmc7XG4gIHRoaXMubW9kaWZpZXJzID0gZGVzY3JpcHRvci5tb2RpZmllcnM7XG4gIHRoaXMuZmlsdGVycyA9IGRlc2NyaXB0b3IuZmlsdGVycztcbiAgdGhpcy5saXRlcmFsID0gdGhpcy5tb2RpZmllcnMgJiYgdGhpcy5tb2RpZmllcnMubGl0ZXJhbDtcbiAgLy8gcHJpdmF0ZVxuICB0aGlzLl9sb2NrZWQgPSBmYWxzZTtcbiAgdGhpcy5fYm91bmQgPSBmYWxzZTtcbiAgdGhpcy5fbGlzdGVuZXJzID0gbnVsbDtcbiAgLy8gbGluayBjb250ZXh0XG4gIHRoaXMuX2hvc3QgPSBob3N0O1xuICB0aGlzLl9zY29wZSA9IHNjb3BlO1xuICB0aGlzLl9mcmFnID0gZnJhZztcbiAgLy8gc3RvcmUgZGlyZWN0aXZlcyBvbiBub2RlIGluIGRldiBtb2RlXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwpIHtcbiAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcyA9IHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzIHx8IFtdO1xuICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzLnB1c2godGhpcyk7XG4gIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplIHRoZSBkaXJlY3RpdmUsIG1peGluIGRlZmluaXRpb24gcHJvcGVydGllcyxcbiAqIHNldHVwIHRoZSB3YXRjaGVyLCBjYWxsIGRlZmluaXRpb24gYmluZCgpIGFuZCB1cGRhdGUoKVxuICogaWYgcHJlc2VudC5cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl9iaW5kID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbmFtZSA9IHRoaXMubmFtZTtcbiAgdmFyIGRlc2NyaXB0b3IgPSB0aGlzLmRlc2NyaXB0b3I7XG5cbiAgLy8gcmVtb3ZlIGF0dHJpYnV0ZVxuICBpZiAoKG5hbWUgIT09ICdjbG9haycgfHwgdGhpcy52bS5faXNDb21waWxlZCkgJiYgdGhpcy5lbCAmJiB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSkge1xuICAgIHZhciBhdHRyID0gZGVzY3JpcHRvci5hdHRyIHx8ICd2LScgKyBuYW1lO1xuICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuICB9XG5cbiAgLy8gY29weSBkZWYgcHJvcGVydGllc1xuICB2YXIgZGVmID0gZGVzY3JpcHRvci5kZWY7XG4gIGlmICh0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhpcy51cGRhdGUgPSBkZWY7XG4gIH0gZWxzZSB7XG4gICAgZXh0ZW5kKHRoaXMsIGRlZik7XG4gIH1cblxuICAvLyBzZXR1cCBkaXJlY3RpdmUgcGFyYW1zXG4gIHRoaXMuX3NldHVwUGFyYW1zKCk7XG5cbiAgLy8gaW5pdGlhbCBiaW5kXG4gIGlmICh0aGlzLmJpbmQpIHtcbiAgICB0aGlzLmJpbmQoKTtcbiAgfVxuICB0aGlzLl9ib3VuZCA9IHRydWU7XG5cbiAgaWYgKHRoaXMubGl0ZXJhbCkge1xuICAgIHRoaXMudXBkYXRlICYmIHRoaXMudXBkYXRlKGRlc2NyaXB0b3IucmF3KTtcbiAgfSBlbHNlIGlmICgodGhpcy5leHByZXNzaW9uIHx8IHRoaXMubW9kaWZpZXJzKSAmJiAodGhpcy51cGRhdGUgfHwgdGhpcy50d29XYXkpICYmICF0aGlzLl9jaGVja1N0YXRlbWVudCgpKSB7XG4gICAgLy8gd3JhcHBlZCB1cGRhdGVyIGZvciBjb250ZXh0XG4gICAgdmFyIGRpciA9IHRoaXM7XG4gICAgaWYgKHRoaXMudXBkYXRlKSB7XG4gICAgICB0aGlzLl91cGRhdGUgPSBmdW5jdGlvbiAodmFsLCBvbGRWYWwpIHtcbiAgICAgICAgaWYgKCFkaXIuX2xvY2tlZCkge1xuICAgICAgICAgIGRpci51cGRhdGUodmFsLCBvbGRWYWwpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl91cGRhdGUgPSBub29wJDE7XG4gICAgfVxuICAgIHZhciBwcmVQcm9jZXNzID0gdGhpcy5fcHJlUHJvY2VzcyA/IGJpbmQodGhpcy5fcHJlUHJvY2VzcywgdGhpcykgOiBudWxsO1xuICAgIHZhciBwb3N0UHJvY2VzcyA9IHRoaXMuX3Bvc3RQcm9jZXNzID8gYmluZCh0aGlzLl9wb3N0UHJvY2VzcywgdGhpcykgOiBudWxsO1xuICAgIHZhciB3YXRjaGVyID0gdGhpcy5fd2F0Y2hlciA9IG5ldyBXYXRjaGVyKHRoaXMudm0sIHRoaXMuZXhwcmVzc2lvbiwgdGhpcy5fdXBkYXRlLCAvLyBjYWxsYmFja1xuICAgIHtcbiAgICAgIGZpbHRlcnM6IHRoaXMuZmlsdGVycyxcbiAgICAgIHR3b1dheTogdGhpcy50d29XYXksXG4gICAgICBkZWVwOiB0aGlzLmRlZXAsXG4gICAgICBwcmVQcm9jZXNzOiBwcmVQcm9jZXNzLFxuICAgICAgcG9zdFByb2Nlc3M6IHBvc3RQcm9jZXNzLFxuICAgICAgc2NvcGU6IHRoaXMuX3Njb3BlXG4gICAgfSk7XG4gICAgLy8gdi1tb2RlbCB3aXRoIGluaXRhbCBpbmxpbmUgdmFsdWUgbmVlZCB0byBzeW5jIGJhY2sgdG9cbiAgICAvLyBtb2RlbCBpbnN0ZWFkIG9mIHVwZGF0ZSB0byBET00gb24gaW5pdC4gVGhleSB3b3VsZFxuICAgIC8vIHNldCB0aGUgYWZ0ZXJCaW5kIGhvb2sgdG8gaW5kaWNhdGUgdGhhdC5cbiAgICBpZiAodGhpcy5hZnRlckJpbmQpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnVwZGF0ZSkge1xuICAgICAgdGhpcy51cGRhdGUod2F0Y2hlci52YWx1ZSk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIFNldHVwIGFsbCBwYXJhbSBhdHRyaWJ1dGVzLCBlLmcuIHRyYWNrLWJ5LFxuICogdHJhbnNpdGlvbi1tb2RlLCBldGMuLi5cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl9zZXR1cFBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKCF0aGlzLnBhcmFtcykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgcGFyYW1zID0gdGhpcy5wYXJhbXM7XG4gIC8vIHN3YXAgdGhlIHBhcmFtcyBhcnJheSB3aXRoIGEgZnJlc2ggb2JqZWN0LlxuICB0aGlzLnBhcmFtcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHZhciBpID0gcGFyYW1zLmxlbmd0aDtcbiAgdmFyIGtleSwgdmFsLCBtYXBwZWRLZXk7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBrZXkgPSBoeXBoZW5hdGUocGFyYW1zW2ldKTtcbiAgICBtYXBwZWRLZXkgPSBjYW1lbGl6ZShrZXkpO1xuICAgIHZhbCA9IGdldEJpbmRBdHRyKHRoaXMuZWwsIGtleSk7XG4gICAgaWYgKHZhbCAhPSBudWxsKSB7XG4gICAgICAvLyBkeW5hbWljXG4gICAgICB0aGlzLl9zZXR1cFBhcmFtV2F0Y2hlcihtYXBwZWRLZXksIHZhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHN0YXRpY1xuICAgICAgdmFsID0gZ2V0QXR0cih0aGlzLmVsLCBrZXkpO1xuICAgICAgaWYgKHZhbCAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMucGFyYW1zW21hcHBlZEtleV0gPSB2YWwgPT09ICcnID8gdHJ1ZSA6IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogU2V0dXAgYSB3YXRjaGVyIGZvciBhIGR5bmFtaWMgcGFyYW0uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHtTdHJpbmd9IGV4cHJlc3Npb25cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl9zZXR1cFBhcmFtV2F0Y2hlciA9IGZ1bmN0aW9uIChrZXksIGV4cHJlc3Npb24pIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gIHZhciB1bndhdGNoID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiR3YXRjaChleHByZXNzaW9uLCBmdW5jdGlvbiAodmFsLCBvbGRWYWwpIHtcbiAgICBzZWxmLnBhcmFtc1trZXldID0gdmFsO1xuICAgIC8vIHNpbmNlIHdlIGFyZSBpbiBpbW1lZGlhdGUgbW9kZSxcbiAgICAvLyBvbmx5IGNhbGwgdGhlIHBhcmFtIGNoYW5nZSBjYWxsYmFja3MgaWYgdGhpcyBpcyBub3QgdGhlIGZpcnN0IHVwZGF0ZS5cbiAgICBpZiAoY2FsbGVkKSB7XG4gICAgICB2YXIgY2IgPSBzZWxmLnBhcmFtV2F0Y2hlcnMgJiYgc2VsZi5wYXJhbVdhdGNoZXJzW2tleV07XG4gICAgICBpZiAoY2IpIHtcbiAgICAgICAgY2IuY2FsbChzZWxmLCB2YWwsIG9sZFZhbCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgfVxuICB9LCB7XG4gICAgaW1tZWRpYXRlOiB0cnVlLFxuICAgIHVzZXI6IGZhbHNlXG4gIH0pOyh0aGlzLl9wYXJhbVVud2F0Y2hGbnMgfHwgKHRoaXMuX3BhcmFtVW53YXRjaEZucyA9IFtdKSkucHVzaCh1bndhdGNoKTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGRpcmVjdGl2ZSBpcyBhIGZ1bmN0aW9uIGNhbGxlclxuICogYW5kIGlmIHRoZSBleHByZXNzaW9uIGlzIGEgY2FsbGFibGUgb25lLiBJZiBib3RoIHRydWUsXG4gKiB3ZSB3cmFwIHVwIHRoZSBleHByZXNzaW9uIGFuZCB1c2UgaXQgYXMgdGhlIGV2ZW50XG4gKiBoYW5kbGVyLlxuICpcbiAqIGUuZy4gb24tY2xpY2s9XCJhKytcIlxuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fY2hlY2tTdGF0ZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBleHByZXNzaW9uID0gdGhpcy5leHByZXNzaW9uO1xuICBpZiAoZXhwcmVzc2lvbiAmJiB0aGlzLmFjY2VwdFN0YXRlbWVudCAmJiAhaXNTaW1wbGVQYXRoKGV4cHJlc3Npb24pKSB7XG4gICAgdmFyIGZuID0gcGFyc2VFeHByZXNzaW9uKGV4cHJlc3Npb24pLmdldDtcbiAgICB2YXIgc2NvcGUgPSB0aGlzLl9zY29wZSB8fCB0aGlzLnZtO1xuICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gaGFuZGxlcihlKSB7XG4gICAgICBzY29wZS4kZXZlbnQgPSBlO1xuICAgICAgZm4uY2FsbChzY29wZSwgc2NvcGUpO1xuICAgICAgc2NvcGUuJGV2ZW50ID0gbnVsbDtcbiAgICB9O1xuICAgIGlmICh0aGlzLmZpbHRlcnMpIHtcbiAgICAgIGhhbmRsZXIgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKGhhbmRsZXIsIG51bGwsIHRoaXMuZmlsdGVycyk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlKGhhbmRsZXIpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuXG4vKipcbiAqIFNldCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSB3aXRoIHRoZSBzZXR0ZXIuXG4gKiBUaGlzIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gdHdvLXdheSBkaXJlY3RpdmVzXG4gKiBlLmcuIHYtbW9kZWwuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHB1YmxpY1xuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmICh0aGlzLnR3b1dheSkge1xuICAgIHRoaXMuX3dpdGhMb2NrKGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3dhdGNoZXIuc2V0KHZhbHVlKTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgd2FybignRGlyZWN0aXZlLnNldCgpIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHR3b1dheScgKyAnZGlyZWN0aXZlcy4nKTtcbiAgfVxufTtcblxuLyoqXG4gKiBFeGVjdXRlIGEgZnVuY3Rpb24gd2hpbGUgcHJldmVudGluZyB0aGF0IGZ1bmN0aW9uIGZyb21cbiAqIHRyaWdnZXJpbmcgdXBkYXRlcyBvbiB0aGlzIGRpcmVjdGl2ZSBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3dpdGhMb2NrID0gZnVuY3Rpb24gKGZuKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgc2VsZi5fbG9ja2VkID0gdHJ1ZTtcbiAgZm4uY2FsbChzZWxmKTtcbiAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgIHNlbGYuX2xvY2tlZCA9IGZhbHNlO1xuICB9KTtcbn07XG5cbi8qKlxuICogQ29udmVuaWVuY2UgbWV0aG9kIHRoYXQgYXR0YWNoZXMgYSBET00gZXZlbnQgbGlzdGVuZXJcbiAqIHRvIHRoZSBkaXJlY3RpdmUgZWxlbWVudCBhbmQgYXV0b21ldGljYWxseSB0ZWFycyBpdCBkb3duXG4gKiBkdXJpbmcgdW5iaW5kLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuICogQHBhcmFtIHtCb29sZWFufSBbdXNlQ2FwdHVyZV1cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2ZW50LCBoYW5kbGVyLCB1c2VDYXB0dXJlKSB7XG4gIG9uKHRoaXMuZWwsIGV2ZW50LCBoYW5kbGVyLCB1c2VDYXB0dXJlKTsodGhpcy5fbGlzdGVuZXJzIHx8ICh0aGlzLl9saXN0ZW5lcnMgPSBbXSkpLnB1c2goW2V2ZW50LCBoYW5kbGVyXSk7XG59O1xuXG4vKipcbiAqIFRlYXJkb3duIHRoZSB3YXRjaGVyIGFuZCBjYWxsIHVuYmluZC5cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl90ZWFyZG93biA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuX2JvdW5kKSB7XG4gICAgdGhpcy5fYm91bmQgPSBmYWxzZTtcbiAgICBpZiAodGhpcy51bmJpbmQpIHtcbiAgICAgIHRoaXMudW5iaW5kKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLl93YXRjaGVyKSB7XG4gICAgICB0aGlzLl93YXRjaGVyLnRlYXJkb3duKCk7XG4gICAgfVxuICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgdmFyIGk7XG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgaSA9IGxpc3RlbmVycy5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIG9mZih0aGlzLmVsLCBsaXN0ZW5lcnNbaV1bMF0sIGxpc3RlbmVyc1tpXVsxXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciB1bndhdGNoRm5zID0gdGhpcy5fcGFyYW1VbndhdGNoRm5zO1xuICAgIGlmICh1bndhdGNoRm5zKSB7XG4gICAgICBpID0gdW53YXRjaEZucy5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIHVud2F0Y2hGbnNbaV0oKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbCkge1xuICAgICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMuJHJlbW92ZSh0aGlzKTtcbiAgICB9XG4gICAgdGhpcy52bSA9IHRoaXMuZWwgPSB0aGlzLl93YXRjaGVyID0gdGhpcy5fbGlzdGVuZXJzID0gbnVsbDtcbiAgfVxufTtcblxuZnVuY3Rpb24gbGlmZWN5Y2xlTWl4aW4gKFZ1ZSkge1xuICAvKipcbiAgICogVXBkYXRlIHYtcmVmIGZvciBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX3VwZGF0ZVJlZiA9IGZ1bmN0aW9uIChyZW1vdmUpIHtcbiAgICB2YXIgcmVmID0gdGhpcy4kb3B0aW9ucy5fcmVmO1xuICAgIGlmIChyZWYpIHtcbiAgICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMuX2NvbnRleHQpLiRyZWZzO1xuICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICBpZiAocmVmc1tyZWZdID09PSB0aGlzKSB7XG4gICAgICAgICAgcmVmc1tyZWZdID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVmc1tyZWZdID0gdGhpcztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFRyYW5zY2x1ZGUsIGNvbXBpbGUgYW5kIGxpbmsgZWxlbWVudC5cbiAgICpcbiAgICogSWYgYSBwcmUtY29tcGlsZWQgbGlua2VyIGlzIGF2YWlsYWJsZSwgdGhhdCBtZWFucyB0aGVcbiAgICogcGFzc2VkIGluIGVsZW1lbnQgd2lsbCBiZSBwcmUtdHJhbnNjbHVkZWQgYW5kIGNvbXBpbGVkXG4gICAqIGFzIHdlbGwgLSBhbGwgd2UgbmVlZCB0byBkbyBpcyB0byBjYWxsIHRoZSBsaW5rZXIuXG4gICAqXG4gICAqIE90aGVyd2lzZSB3ZSBuZWVkIHRvIGNhbGwgdHJhbnNjbHVkZS9jb21waWxlL2xpbmsgaGVyZS5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9jb21waWxlID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuXG4gICAgLy8gdHJhbnNjbHVkZSBhbmQgaW5pdCBlbGVtZW50XG4gICAgLy8gdHJhbnNjbHVkZSBjYW4gcG90ZW50aWFsbHkgcmVwbGFjZSBvcmlnaW5hbFxuICAgIC8vIHNvIHdlIG5lZWQgdG8ga2VlcCByZWZlcmVuY2U7IHRoaXMgc3RlcCBhbHNvIGluamVjdHNcbiAgICAvLyB0aGUgdGVtcGxhdGUgYW5kIGNhY2hlcyB0aGUgb3JpZ2luYWwgYXR0cmlidXRlc1xuICAgIC8vIG9uIHRoZSBjb250YWluZXIgbm9kZSBhbmQgcmVwbGFjZXIgbm9kZS5cbiAgICB2YXIgb3JpZ2luYWwgPSBlbDtcbiAgICBlbCA9IHRyYW5zY2x1ZGUoZWwsIG9wdGlvbnMpO1xuICAgIHRoaXMuX2luaXRFbGVtZW50KGVsKTtcblxuICAgIC8vIGhhbmRsZSB2LXByZSBvbiByb290IG5vZGUgKCMyMDI2KVxuICAgIGlmIChlbC5ub2RlVHlwZSA9PT0gMSAmJiBnZXRBdHRyKGVsLCAndi1wcmUnKSAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHJvb3QgaXMgYWx3YXlzIGNvbXBpbGVkIHBlci1pbnN0YW5jZSwgYmVjYXVzZVxuICAgIC8vIGNvbnRhaW5lciBhdHRycyBhbmQgcHJvcHMgY2FuIGJlIGRpZmZlcmVudCBldmVyeSB0aW1lLlxuICAgIHZhciBjb250ZXh0T3B0aW9ucyA9IHRoaXMuX2NvbnRleHQgJiYgdGhpcy5fY29udGV4dC4kb3B0aW9ucztcbiAgICB2YXIgcm9vdExpbmtlciA9IGNvbXBpbGVSb290KGVsLCBvcHRpb25zLCBjb250ZXh0T3B0aW9ucyk7XG5cbiAgICAvLyByZXNvbHZlIHNsb3QgZGlzdHJpYnV0aW9uXG4gICAgcmVzb2x2ZVNsb3RzKHRoaXMsIG9wdGlvbnMuX2NvbnRlbnQpO1xuXG4gICAgLy8gY29tcGlsZSBhbmQgbGluayB0aGUgcmVzdFxuICAgIHZhciBjb250ZW50TGlua0ZuO1xuICAgIHZhciBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAvLyBjb21wb25lbnQgY29tcGlsYXRpb24gY2FuIGJlIGNhY2hlZFxuICAgIC8vIGFzIGxvbmcgYXMgaXQncyBub3QgdXNpbmcgaW5saW5lLXRlbXBsYXRlXG4gICAgaWYgKG9wdGlvbnMuX2xpbmtlckNhY2hhYmxlKSB7XG4gICAgICBjb250ZW50TGlua0ZuID0gY3Rvci5saW5rZXI7XG4gICAgICBpZiAoIWNvbnRlbnRMaW5rRm4pIHtcbiAgICAgICAgY29udGVudExpbmtGbiA9IGN0b3IubGlua2VyID0gY29tcGlsZShlbCwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gbGluayBwaGFzZVxuICAgIC8vIG1ha2Ugc3VyZSB0byBsaW5rIHJvb3Qgd2l0aCBwcm9wIHNjb3BlIVxuICAgIHZhciByb290VW5saW5rRm4gPSByb290TGlua2VyKHRoaXMsIGVsLCB0aGlzLl9zY29wZSk7XG4gICAgdmFyIGNvbnRlbnRVbmxpbmtGbiA9IGNvbnRlbnRMaW5rRm4gPyBjb250ZW50TGlua0ZuKHRoaXMsIGVsKSA6IGNvbXBpbGUoZWwsIG9wdGlvbnMpKHRoaXMsIGVsKTtcblxuICAgIC8vIHJlZ2lzdGVyIGNvbXBvc2l0ZSB1bmxpbmsgZnVuY3Rpb25cbiAgICAvLyB0byBiZSBjYWxsZWQgZHVyaW5nIGluc3RhbmNlIGRlc3RydWN0aW9uXG4gICAgdGhpcy5fdW5saW5rRm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByb290VW5saW5rRm4oKTtcbiAgICAgIC8vIHBhc3NpbmcgZGVzdHJveWluZzogdHJ1ZSB0byBhdm9pZCBzZWFyY2hpbmcgYW5kXG4gICAgICAvLyBzcGxpY2luZyB0aGUgZGlyZWN0aXZlc1xuICAgICAgY29udGVudFVubGlua0ZuKHRydWUpO1xuICAgIH07XG5cbiAgICAvLyBmaW5hbGx5IHJlcGxhY2Ugb3JpZ2luYWxcbiAgICBpZiAob3B0aW9ucy5yZXBsYWNlKSB7XG4gICAgICByZXBsYWNlKG9yaWdpbmFsLCBlbCk7XG4gICAgfVxuXG4gICAgdGhpcy5faXNDb21waWxlZCA9IHRydWU7XG4gICAgdGhpcy5fY2FsbEhvb2soJ2NvbXBpbGVkJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgaW5zdGFuY2UgZWxlbWVudC4gQ2FsbGVkIGluIHRoZSBwdWJsaWNcbiAgICogJG1vdW50KCkgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRFbGVtZW50ID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgaWYgKGlzRnJhZ21lbnQoZWwpKSB7XG4gICAgICB0aGlzLl9pc0ZyYWdtZW50ID0gdHJ1ZTtcbiAgICAgIHRoaXMuJGVsID0gdGhpcy5fZnJhZ21lbnRTdGFydCA9IGVsLmZpcnN0Q2hpbGQ7XG4gICAgICB0aGlzLl9mcmFnbWVudEVuZCA9IGVsLmxhc3RDaGlsZDtcbiAgICAgIC8vIHNldCBwZXJzaXN0ZWQgdGV4dCBhbmNob3JzIHRvIGVtcHR5XG4gICAgICBpZiAodGhpcy5fZnJhZ21lbnRTdGFydC5ub2RlVHlwZSA9PT0gMykge1xuICAgICAgICB0aGlzLl9mcmFnbWVudFN0YXJ0LmRhdGEgPSB0aGlzLl9mcmFnbWVudEVuZC5kYXRhID0gJyc7XG4gICAgICB9XG4gICAgICB0aGlzLl9mcmFnbWVudCA9IGVsO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRlbCA9IGVsO1xuICAgIH1cbiAgICB0aGlzLiRlbC5fX3Z1ZV9fID0gdGhpcztcbiAgICB0aGlzLl9jYWxsSG9vaygnYmVmb3JlQ29tcGlsZScpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW5kIGJpbmQgYSBkaXJlY3RpdmUgdG8gYW4gZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3IgLSBwYXJzZWQgZGlyZWN0aXZlIGRlc2NyaXB0b3JcbiAgICogQHBhcmFtIHtOb2RlfSBub2RlICAgLSB0YXJnZXQgbm9kZVxuICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gdHJhbnNjbHVzaW9uIGhvc3QgY29tcG9uZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddIC0gb3duZXIgZnJhZ21lbnRcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fYmluZERpciA9IGZ1bmN0aW9uIChkZXNjcmlwdG9yLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIHRoaXMuX2RpcmVjdGl2ZXMucHVzaChuZXcgRGlyZWN0aXZlKGRlc2NyaXB0b3IsIHRoaXMsIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRlYXJkb3duIGFuIGluc3RhbmNlLCB1bm9ic2VydmVzIHRoZSBkYXRhLCB1bmJpbmQgYWxsIHRoZVxuICAgKiBkaXJlY3RpdmVzLCB0dXJuIG9mZiBhbGwgdGhlIGV2ZW50IGxpc3RlbmVycywgZXRjLlxuICAgKlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZSAtIHdoZXRoZXIgdG8gcmVtb3ZlIHRoZSBET00gbm9kZS5cbiAgICogQHBhcmFtIHtCb29sZWFufSBkZWZlckNsZWFudXAgLSBpZiB0cnVlLCBkZWZlciBjbGVhbnVwIHRvXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmUgY2FsbGVkIGxhdGVyXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAocmVtb3ZlLCBkZWZlckNsZWFudXApIHtcbiAgICBpZiAodGhpcy5faXNCZWluZ0Rlc3Ryb3llZCkge1xuICAgICAgaWYgKCFkZWZlckNsZWFudXApIHtcbiAgICAgICAgdGhpcy5fY2xlYW51cCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBkZXN0cm95UmVhZHk7XG4gICAgdmFyIHBlbmRpbmdSZW1vdmFsO1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vIENsZWFudXAgc2hvdWxkIGJlIGNhbGxlZCBlaXRoZXIgc3luY2hyb25vdXNseSBvciBhc3luY2hyb25veXNseSBhc1xuICAgIC8vIGNhbGxiYWNrIG9mIHRoaXMuJHJlbW92ZSgpLCBvciBpZiByZW1vdmUgYW5kIGRlZmVyQ2xlYW51cCBhcmUgZmFsc2UuXG4gICAgLy8gSW4gYW55IGNhc2UgaXQgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciBhbGwgb3RoZXIgcmVtb3ZpbmcsIHVuYmluZGluZyBhbmRcbiAgICAvLyB0dXJuaW5nIG9mIGlzIGRvbmVcbiAgICB2YXIgY2xlYW51cElmUG9zc2libGUgPSBmdW5jdGlvbiBjbGVhbnVwSWZQb3NzaWJsZSgpIHtcbiAgICAgIGlmIChkZXN0cm95UmVhZHkgJiYgIXBlbmRpbmdSZW1vdmFsICYmICFkZWZlckNsZWFudXApIHtcbiAgICAgICAgc2VsZi5fY2xlYW51cCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyByZW1vdmUgRE9NIGVsZW1lbnRcbiAgICBpZiAocmVtb3ZlICYmIHRoaXMuJGVsKSB7XG4gICAgICBwZW5kaW5nUmVtb3ZhbCA9IHRydWU7XG4gICAgICB0aGlzLiRyZW1vdmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBwZW5kaW5nUmVtb3ZhbCA9IGZhbHNlO1xuICAgICAgICBjbGVhbnVwSWZQb3NzaWJsZSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5fY2FsbEhvb2soJ2JlZm9yZURlc3Ryb3knKTtcbiAgICB0aGlzLl9pc0JlaW5nRGVzdHJveWVkID0gdHJ1ZTtcbiAgICB2YXIgaTtcbiAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHBhcmVudC4gb25seSBuZWNlc3NhcnlcbiAgICAvLyBpZiBwYXJlbnQgaXMgbm90IGJlaW5nIGRlc3Ryb3llZCBhcyB3ZWxsLlxuICAgIHZhciBwYXJlbnQgPSB0aGlzLiRwYXJlbnQ7XG4gICAgaWYgKHBhcmVudCAmJiAhcGFyZW50Ll9pc0JlaW5nRGVzdHJveWVkKSB7XG4gICAgICBwYXJlbnQuJGNoaWxkcmVuLiRyZW1vdmUodGhpcyk7XG4gICAgICAvLyB1bnJlZ2lzdGVyIHJlZiAocmVtb3ZlOiB0cnVlKVxuICAgICAgdGhpcy5fdXBkYXRlUmVmKHRydWUpO1xuICAgIH1cbiAgICAvLyBkZXN0cm95IGFsbCBjaGlsZHJlbi5cbiAgICBpID0gdGhpcy4kY2hpbGRyZW4ubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHRoaXMuJGNoaWxkcmVuW2ldLiRkZXN0cm95KCk7XG4gICAgfVxuICAgIC8vIHRlYXJkb3duIHByb3BzXG4gICAgaWYgKHRoaXMuX3Byb3BzVW5saW5rRm4pIHtcbiAgICAgIHRoaXMuX3Byb3BzVW5saW5rRm4oKTtcbiAgICB9XG4gICAgLy8gdGVhcmRvd24gYWxsIGRpcmVjdGl2ZXMuIHRoaXMgYWxzbyB0ZWFyc2Rvd24gYWxsXG4gICAgLy8gZGlyZWN0aXZlLW93bmVkIHdhdGNoZXJzLlxuICAgIGlmICh0aGlzLl91bmxpbmtGbikge1xuICAgICAgdGhpcy5fdW5saW5rRm4oKTtcbiAgICB9XG4gICAgaSA9IHRoaXMuX3dhdGNoZXJzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB0aGlzLl93YXRjaGVyc1tpXS50ZWFyZG93bigpO1xuICAgIH1cbiAgICAvLyByZW1vdmUgcmVmZXJlbmNlIHRvIHNlbGYgb24gJGVsXG4gICAgaWYgKHRoaXMuJGVsKSB7XG4gICAgICB0aGlzLiRlbC5fX3Z1ZV9fID0gbnVsbDtcbiAgICB9XG5cbiAgICBkZXN0cm95UmVhZHkgPSB0cnVlO1xuICAgIGNsZWFudXBJZlBvc3NpYmxlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENsZWFuIHVwIHRvIGVuc3VyZSBnYXJiYWdlIGNvbGxlY3Rpb24uXG4gICAqIFRoaXMgaXMgY2FsbGVkIGFmdGVyIHRoZSBsZWF2ZSB0cmFuc2l0aW9uIGlmIHRoZXJlXG4gICAqIGlzIGFueS5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5faXNEZXN0cm95ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSBvd25lciBmcmFnbWVudFxuICAgIC8vIGRvIGl0IGluIGNsZWFudXAgc28gdGhhdCB3ZSBjYW4gY2FsbCAkZGVzdHJveSB3aXRoXG4gICAgLy8gZGVmZXIgcmlnaHQgd2hlbiBhIGZyYWdtZW50IGlzIGFib3V0IHRvIGJlIHJlbW92ZWQuXG4gICAgaWYgKHRoaXMuX2ZyYWcpIHtcbiAgICAgIHRoaXMuX2ZyYWcuY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcbiAgICB9XG4gICAgLy8gcmVtb3ZlIHJlZmVyZW5jZSBmcm9tIGRhdGEgb2JcbiAgICAvLyBmcm96ZW4gb2JqZWN0IG1heSBub3QgaGF2ZSBvYnNlcnZlci5cbiAgICBpZiAodGhpcy5fZGF0YSAmJiB0aGlzLl9kYXRhLl9fb2JfXykge1xuICAgICAgdGhpcy5fZGF0YS5fX29iX18ucmVtb3ZlVm0odGhpcyk7XG4gICAgfVxuICAgIC8vIENsZWFuIHVwIHJlZmVyZW5jZXMgdG8gcHJpdmF0ZSBwcm9wZXJ0aWVzIGFuZCBvdGhlclxuICAgIC8vIGluc3RhbmNlcy4gcHJlc2VydmUgcmVmZXJlbmNlIHRvIF9kYXRhIHNvIHRoYXQgcHJveHlcbiAgICAvLyBhY2Nlc3NvcnMgc3RpbGwgd29yay4gVGhlIG9ubHkgcG90ZW50aWFsIHNpZGUgZWZmZWN0XG4gICAgLy8gaGVyZSBpcyB0aGF0IG11dGF0aW5nIHRoZSBpbnN0YW5jZSBhZnRlciBpdCdzIGRlc3Ryb3llZFxuICAgIC8vIG1heSBhZmZlY3QgdGhlIHN0YXRlIG9mIG90aGVyIGNvbXBvbmVudHMgdGhhdCBhcmUgc3RpbGxcbiAgICAvLyBvYnNlcnZpbmcgdGhlIHNhbWUgb2JqZWN0LCBidXQgdGhhdCBzZWVtcyB0byBiZSBhXG4gICAgLy8gcmVhc29uYWJsZSByZXNwb25zaWJpbGl0eSBmb3IgdGhlIHVzZXIgcmF0aGVyIHRoYW5cbiAgICAvLyBhbHdheXMgdGhyb3dpbmcgYW4gZXJyb3Igb24gdGhlbS5cbiAgICB0aGlzLiRlbCA9IHRoaXMuJHBhcmVudCA9IHRoaXMuJHJvb3QgPSB0aGlzLiRjaGlsZHJlbiA9IHRoaXMuX3dhdGNoZXJzID0gdGhpcy5fY29udGV4dCA9IHRoaXMuX3Njb3BlID0gdGhpcy5fZGlyZWN0aXZlcyA9IG51bGw7XG4gICAgLy8gY2FsbCB0aGUgbGFzdCBob29rLi4uXG4gICAgdGhpcy5faXNEZXN0cm95ZWQgPSB0cnVlO1xuICAgIHRoaXMuX2NhbGxIb29rKCdkZXN0cm95ZWQnKTtcbiAgICAvLyB0dXJuIG9mZiBhbGwgaW5zdGFuY2UgbGlzdGVuZXJzLlxuICAgIHRoaXMuJG9mZigpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBtaXNjTWl4aW4gKFZ1ZSkge1xuICAvKipcbiAgICogQXBwbHkgYSBsaXN0IG9mIGZpbHRlciAoZGVzY3JpcHRvcnMpIHRvIGEgdmFsdWUuXG4gICAqIFVzaW5nIHBsYWluIGZvciBsb29wcyBoZXJlIGJlY2F1c2UgdGhpcyB3aWxsIGJlIGNhbGxlZCBpblxuICAgKiB0aGUgZ2V0dGVyIG9mIGFueSB3YXRjaGVyIHdpdGggZmlsdGVycyBzbyBpdCBpcyB2ZXJ5XG4gICAqIHBlcmZvcm1hbmNlIHNlbnNpdGl2ZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0geyp9IFtvbGRWYWx1ZV1cbiAgICogQHBhcmFtIHtBcnJheX0gZmlsdGVyc1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHdyaXRlXG4gICAqIEByZXR1cm4geyp9XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2FwcGx5RmlsdGVycyA9IGZ1bmN0aW9uICh2YWx1ZSwgb2xkVmFsdWUsIGZpbHRlcnMsIHdyaXRlKSB7XG4gICAgdmFyIGZpbHRlciwgZm4sIGFyZ3MsIGFyZywgb2Zmc2V0LCBpLCBsLCBqLCBrO1xuICAgIGZvciAoaSA9IDAsIGwgPSBmaWx0ZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZmlsdGVyID0gZmlsdGVyc1t3cml0ZSA/IGwgLSBpIC0gMSA6IGldO1xuICAgICAgZm4gPSByZXNvbHZlQXNzZXQodGhpcy4kb3B0aW9ucywgJ2ZpbHRlcnMnLCBmaWx0ZXIubmFtZSwgdHJ1ZSk7XG4gICAgICBpZiAoIWZuKSBjb250aW51ZTtcbiAgICAgIGZuID0gd3JpdGUgPyBmbi53cml0ZSA6IGZuLnJlYWQgfHwgZm47XG4gICAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSBjb250aW51ZTtcbiAgICAgIGFyZ3MgPSB3cml0ZSA/IFt2YWx1ZSwgb2xkVmFsdWVdIDogW3ZhbHVlXTtcbiAgICAgIG9mZnNldCA9IHdyaXRlID8gMiA6IDE7XG4gICAgICBpZiAoZmlsdGVyLmFyZ3MpIHtcbiAgICAgICAgZm9yIChqID0gMCwgayA9IGZpbHRlci5hcmdzLmxlbmd0aDsgaiA8IGs7IGorKykge1xuICAgICAgICAgIGFyZyA9IGZpbHRlci5hcmdzW2pdO1xuICAgICAgICAgIGFyZ3NbaiArIG9mZnNldF0gPSBhcmcuZHluYW1pYyA/IHRoaXMuJGdldChhcmcudmFsdWUpIDogYXJnLnZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YWx1ZSA9IGZuLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlc29sdmUgYSBjb21wb25lbnQsIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBjb21wb25lbnRcbiAgICogaXMgZGVmaW5lZCBub3JtYWxseSBvciB1c2luZyBhbiBhc3luYyBmYWN0b3J5IGZ1bmN0aW9uLlxuICAgKiBSZXNvbHZlcyBzeW5jaHJvbm91c2x5IGlmIGFscmVhZHkgcmVzb2x2ZWQsIG90aGVyd2lzZVxuICAgKiByZXNvbHZlcyBhc3luY2hyb25vdXNseSBhbmQgY2FjaGVzIHRoZSByZXNvbHZlZFxuICAgKiBjb25zdHJ1Y3RvciBvbiB0aGUgZmFjdG9yeS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHZhbHVlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX3Jlc29sdmVDb21wb25lbnQgPSBmdW5jdGlvbiAodmFsdWUsIGNiKSB7XG4gICAgdmFyIGZhY3Rvcnk7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgZmFjdG9yeSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBmYWN0b3J5ID0gcmVzb2x2ZUFzc2V0KHRoaXMuJG9wdGlvbnMsICdjb21wb25lbnRzJywgdmFsdWUsIHRydWUpO1xuICAgIH1cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIWZhY3RvcnkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gYXN5bmMgY29tcG9uZW50IGZhY3RvcnlcbiAgICBpZiAoIWZhY3Rvcnkub3B0aW9ucykge1xuICAgICAgaWYgKGZhY3RvcnkucmVzb2x2ZWQpIHtcbiAgICAgICAgLy8gY2FjaGVkXG4gICAgICAgIGNiKGZhY3RvcnkucmVzb2x2ZWQpO1xuICAgICAgfSBlbHNlIGlmIChmYWN0b3J5LnJlcXVlc3RlZCkge1xuICAgICAgICAvLyBwb29sIGNhbGxiYWNrc1xuICAgICAgICBmYWN0b3J5LnBlbmRpbmdDYWxsYmFja3MucHVzaChjYik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmYWN0b3J5LnJlcXVlc3RlZCA9IHRydWU7XG4gICAgICAgIHZhciBjYnMgPSBmYWN0b3J5LnBlbmRpbmdDYWxsYmFja3MgPSBbY2JdO1xuICAgICAgICBmYWN0b3J5LmNhbGwodGhpcywgZnVuY3Rpb24gcmVzb2x2ZShyZXMpIHtcbiAgICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChyZXMpKSB7XG4gICAgICAgICAgICByZXMgPSBWdWUuZXh0ZW5kKHJlcyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNhY2hlIHJlc29sdmVkXG4gICAgICAgICAgZmFjdG9yeS5yZXNvbHZlZCA9IHJlcztcbiAgICAgICAgICAvLyBpbnZva2UgY2FsbGJhY2tzXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjYnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBjYnNbaV0ocmVzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcbiAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ZhaWxlZCB0byByZXNvbHZlIGFzeW5jIGNvbXBvbmVudCcgKyAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/ICc6ICcgKyB2YWx1ZSA6ICcnKSArICcuICcgKyAocmVhc29uID8gJ1xcblJlYXNvbjogJyArIHJlYXNvbiA6ICcnKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBub3JtYWwgY29tcG9uZW50XG4gICAgICBjYihmYWN0b3J5KTtcbiAgICB9XG4gIH07XG59XG5cbnZhciBmaWx0ZXJSRSQxID0gL1tefF1cXHxbXnxdLztcblxuZnVuY3Rpb24gZGF0YUFQSSAoVnVlKSB7XG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIGZyb20gYW4gZXhwcmVzc2lvbiBvbiB0aGlzIHZtLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FzU3RhdGVtZW50XVxuICAgKiBAcmV0dXJuIHsqfVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRnZXQgPSBmdW5jdGlvbiAoZXhwLCBhc1N0YXRlbWVudCkge1xuICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwKTtcbiAgICBpZiAocmVzKSB7XG4gICAgICBpZiAoYXNTdGF0ZW1lbnQpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gc3RhdGVtZW50SGFuZGxlcigpIHtcbiAgICAgICAgICBzZWxmLiRhcmd1bWVudHMgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IHJlcy5nZXQuY2FsbChzZWxmLCBzZWxmKTtcbiAgICAgICAgICBzZWxmLiRhcmd1bWVudHMgPSBudWxsO1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiByZXMuZ2V0LmNhbGwodGhpcywgdGhpcyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHZhbHVlIGZyb20gYW4gZXhwcmVzc2lvbiBvbiB0aGlzIHZtLlxuICAgKiBUaGUgZXhwcmVzc2lvbiBtdXN0IGJlIGEgdmFsaWQgbGVmdC1oYW5kXG4gICAqIGV4cHJlc3Npb24gaW4gYW4gYXNzaWdubWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICAgKiBAcGFyYW0geyp9IHZhbFxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRzZXQgPSBmdW5jdGlvbiAoZXhwLCB2YWwpIHtcbiAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cCwgdHJ1ZSk7XG4gICAgaWYgKHJlcyAmJiByZXMuc2V0KSB7XG4gICAgICByZXMuc2V0LmNhbGwodGhpcywgdGhpcywgdmFsKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIHByb3BlcnR5IG9uIHRoZSBWTVxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICBkZWwodGhpcy5fZGF0YSwga2V5KTtcbiAgfTtcblxuICAvKipcbiAgICogV2F0Y2ggYW4gZXhwcmVzc2lvbiwgdHJpZ2dlciBjYWxsYmFjayB3aGVuIGl0c1xuICAgKiB2YWx1ZSBjaGFuZ2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gZXhwT3JGblxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBkZWVwXG4gICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBpbW1lZGlhdGVcbiAgICogQHJldHVybiB7RnVuY3Rpb259IC0gdW53YXRjaEZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJHdhdGNoID0gZnVuY3Rpb24gKGV4cE9yRm4sIGNiLCBvcHRpb25zKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2YXIgcGFyc2VkO1xuICAgIGlmICh0eXBlb2YgZXhwT3JGbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKGV4cE9yRm4pO1xuICAgICAgZXhwT3JGbiA9IHBhcnNlZC5leHByZXNzaW9uO1xuICAgIH1cbiAgICB2YXIgd2F0Y2hlciA9IG5ldyBXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwge1xuICAgICAgZGVlcDogb3B0aW9ucyAmJiBvcHRpb25zLmRlZXAsXG4gICAgICBzeW5jOiBvcHRpb25zICYmIG9wdGlvbnMuc3luYyxcbiAgICAgIGZpbHRlcnM6IHBhcnNlZCAmJiBwYXJzZWQuZmlsdGVycyxcbiAgICAgIHVzZXI6ICFvcHRpb25zIHx8IG9wdGlvbnMudXNlciAhPT0gZmFsc2VcbiAgICB9KTtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmltbWVkaWF0ZSkge1xuICAgICAgY2IuY2FsbCh2bSwgd2F0Y2hlci52YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiB1bndhdGNoRm4oKSB7XG4gICAgICB3YXRjaGVyLnRlYXJkb3duKCk7XG4gICAgfTtcbiAgfTtcblxuICAvKipcbiAgICogRXZhbHVhdGUgYSB0ZXh0IGRpcmVjdGl2ZSwgaW5jbHVkaW5nIGZpbHRlcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FzU3RhdGVtZW50XVxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGV2YWwgPSBmdW5jdGlvbiAodGV4dCwgYXNTdGF0ZW1lbnQpIHtcbiAgICAvLyBjaGVjayBmb3IgZmlsdGVycy5cbiAgICBpZiAoZmlsdGVyUkUkMS50ZXN0KHRleHQpKSB7XG4gICAgICB2YXIgZGlyID0gcGFyc2VEaXJlY3RpdmUodGV4dCk7XG4gICAgICAvLyB0aGUgZmlsdGVyIHJlZ2V4IGNoZWNrIG1pZ2h0IGdpdmUgZmFsc2UgcG9zaXRpdmVcbiAgICAgIC8vIGZvciBwaXBlcyBpbnNpZGUgc3RyaW5ncywgc28gaXQncyBwb3NzaWJsZSB0aGF0XG4gICAgICAvLyB3ZSBkb24ndCBnZXQgYW55IGZpbHRlcnMgaGVyZVxuICAgICAgdmFyIHZhbCA9IHRoaXMuJGdldChkaXIuZXhwcmVzc2lvbiwgYXNTdGF0ZW1lbnQpO1xuICAgICAgcmV0dXJuIGRpci5maWx0ZXJzID8gdGhpcy5fYXBwbHlGaWx0ZXJzKHZhbCwgbnVsbCwgZGlyLmZpbHRlcnMpIDogdmFsO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBubyBmaWx0ZXJcbiAgICAgIHJldHVybiB0aGlzLiRnZXQodGV4dCwgYXNTdGF0ZW1lbnQpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogSW50ZXJwb2xhdGUgYSBwaWVjZSBvZiB0ZW1wbGF0ZSB0ZXh0LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGludGVycG9sYXRlID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KHRleHQpO1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgaWYgKHRva2Vucykge1xuICAgICAgaWYgKHRva2Vucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHZtLiRldmFsKHRva2Vuc1swXS52YWx1ZSkgKyAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0b2tlbnMubWFwKGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAgIHJldHVybiB0b2tlbi50YWcgPyB2bS4kZXZhbCh0b2tlbi52YWx1ZSkgOiB0b2tlbi52YWx1ZTtcbiAgICAgICAgfSkuam9pbignJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0ZXh0O1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogTG9nIGluc3RhbmNlIGRhdGEgYXMgYSBwbGFpbiBKUyBvYmplY3RcbiAgICogc28gdGhhdCBpdCBpcyBlYXNpZXIgdG8gaW5zcGVjdCBpbiBjb25zb2xlLlxuICAgKiBUaGlzIG1ldGhvZCBhc3N1bWVzIGNvbnNvbGUgaXMgYXZhaWxhYmxlLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gW3BhdGhdXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGxvZyA9IGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgdmFyIGRhdGEgPSBwYXRoID8gZ2V0UGF0aCh0aGlzLl9kYXRhLCBwYXRoKSA6IHRoaXMuX2RhdGE7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIGRhdGEgPSBjbGVhbihkYXRhKTtcbiAgICB9XG4gICAgLy8gaW5jbHVkZSBjb21wdXRlZCBmaWVsZHNcbiAgICBpZiAoIXBhdGgpIHtcbiAgICAgIHZhciBrZXk7XG4gICAgICBmb3IgKGtleSBpbiB0aGlzLiRvcHRpb25zLmNvbXB1dGVkKSB7XG4gICAgICAgIGRhdGFba2V5XSA9IGNsZWFuKHRoaXNba2V5XSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5fcHJvcHMpIHtcbiAgICAgICAgZm9yIChrZXkgaW4gdGhpcy5fcHJvcHMpIHtcbiAgICAgICAgICBkYXRhW2tleV0gPSBjbGVhbih0aGlzW2tleV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBcImNsZWFuXCIgYSBnZXR0ZXIvc2V0dGVyIGNvbnZlcnRlZCBvYmplY3QgaW50byBhIHBsYWluXG4gICAqIG9iamVjdCBjb3B5LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gLSBvYmpcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cblxuICBmdW5jdGlvbiBjbGVhbihvYmopIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkb21BUEkgKFZ1ZSkge1xuICAvKipcbiAgICogQ29udmVuaWVuY2Ugb24taW5zdGFuY2UgbmV4dFRpY2suIFRoZSBjYWxsYmFjayBpc1xuICAgKiBhdXRvLWJvdW5kIHRvIHRoZSBpbnN0YW5jZSwgYW5kIHRoaXMgYXZvaWRzIGNvbXBvbmVudFxuICAgKiBtb2R1bGVzIGhhdmluZyB0byByZWx5IG9uIHRoZSBnbG9iYWwgVnVlLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRuZXh0VGljayA9IGZ1bmN0aW9uIChmbikge1xuICAgIG5leHRUaWNrKGZuLCB0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogQXBwZW5kIGluc3RhbmNlIHRvIHRhcmdldFxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kYXBwZW5kVG8gPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcbiAgICByZXR1cm4gaW5zZXJ0KHRoaXMsIHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uLCBhcHBlbmQsIGFwcGVuZFdpdGhUcmFuc2l0aW9uKTtcbiAgfTtcblxuICAvKipcbiAgICogUHJlcGVuZCBpbnN0YW5jZSB0byB0YXJnZXRcbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJHByZXBlbmRUbyA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XG4gICAgaWYgKHRhcmdldC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgIHRoaXMuJGJlZm9yZSh0YXJnZXQuZmlyc3RDaGlsZCwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kYXBwZW5kVG8odGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogSW5zZXJ0IGluc3RhbmNlIGJlZm9yZSB0YXJnZXRcbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGJlZm9yZSA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICAgIHJldHVybiBpbnNlcnQodGhpcywgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIGJlZm9yZVdpdGhDYiwgYmVmb3JlV2l0aFRyYW5zaXRpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbnNlcnQgaW5zdGFuY2UgYWZ0ZXIgdGFyZ2V0XG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRhZnRlciA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XG4gICAgaWYgKHRhcmdldC5uZXh0U2libGluZykge1xuICAgICAgdGhpcy4kYmVmb3JlKHRhcmdldC5uZXh0U2libGluZywgY2IsIHdpdGhUcmFuc2l0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kYXBwZW5kVG8odGFyZ2V0LnBhcmVudE5vZGUsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgaW5zdGFuY2UgZnJvbSBET01cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJHJlbW92ZSA9IGZ1bmN0aW9uIChjYiwgd2l0aFRyYW5zaXRpb24pIHtcbiAgICBpZiAoIXRoaXMuJGVsLnBhcmVudE5vZGUpIHtcbiAgICAgIHJldHVybiBjYiAmJiBjYigpO1xuICAgIH1cbiAgICB2YXIgaW5Eb2N1bWVudCA9IHRoaXMuX2lzQXR0YWNoZWQgJiYgaW5Eb2ModGhpcy4kZWwpO1xuICAgIC8vIGlmIHdlIGFyZSBub3QgaW4gZG9jdW1lbnQsIG5vIG5lZWQgdG8gY2hlY2tcbiAgICAvLyBmb3IgdHJhbnNpdGlvbnNcbiAgICBpZiAoIWluRG9jdW1lbnQpIHdpdGhUcmFuc2l0aW9uID0gZmFsc2U7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciByZWFsQ2IgPSBmdW5jdGlvbiByZWFsQ2IoKSB7XG4gICAgICBpZiAoaW5Eb2N1bWVudCkgc2VsZi5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XG4gICAgICBpZiAoY2IpIGNiKCk7XG4gICAgfTtcbiAgICBpZiAodGhpcy5faXNGcmFnbWVudCkge1xuICAgICAgcmVtb3ZlTm9kZVJhbmdlKHRoaXMuX2ZyYWdtZW50U3RhcnQsIHRoaXMuX2ZyYWdtZW50RW5kLCB0aGlzLCB0aGlzLl9mcmFnbWVudCwgcmVhbENiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG9wID0gd2l0aFRyYW5zaXRpb24gPT09IGZhbHNlID8gcmVtb3ZlV2l0aENiIDogcmVtb3ZlV2l0aFRyYW5zaXRpb247XG4gICAgICBvcCh0aGlzLiRlbCwgdGhpcywgcmVhbENiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNoYXJlZCBET00gaW5zZXJ0aW9uIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl1cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3AxIC0gb3AgZm9yIG5vbi10cmFuc2l0aW9uIGluc2VydFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcDIgLSBvcCBmb3IgdHJhbnNpdGlvbiBpbnNlcnRcbiAgICogQHJldHVybiB2bVxuICAgKi9cblxuICBmdW5jdGlvbiBpbnNlcnQodm0sIHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uLCBvcDEsIG9wMikge1xuICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XG4gICAgdmFyIHRhcmdldElzRGV0YWNoZWQgPSAhaW5Eb2ModGFyZ2V0KTtcbiAgICB2YXIgb3AgPSB3aXRoVHJhbnNpdGlvbiA9PT0gZmFsc2UgfHwgdGFyZ2V0SXNEZXRhY2hlZCA/IG9wMSA6IG9wMjtcbiAgICB2YXIgc2hvdWxkQ2FsbEhvb2sgPSAhdGFyZ2V0SXNEZXRhY2hlZCAmJiAhdm0uX2lzQXR0YWNoZWQgJiYgIWluRG9jKHZtLiRlbCk7XG4gICAgaWYgKHZtLl9pc0ZyYWdtZW50KSB7XG4gICAgICBtYXBOb2RlUmFuZ2Uodm0uX2ZyYWdtZW50U3RhcnQsIHZtLl9mcmFnbWVudEVuZCwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgb3Aobm9kZSwgdGFyZ2V0LCB2bSk7XG4gICAgICB9KTtcbiAgICAgIGNiICYmIGNiKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wKHZtLiRlbCwgdGFyZ2V0LCB2bSwgY2IpO1xuICAgIH1cbiAgICBpZiAoc2hvdWxkQ2FsbEhvb2spIHtcbiAgICAgIHZtLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHZtO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGZvciBzZWxlY3RvcnNcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gZWxcbiAgICovXG5cbiAgZnVuY3Rpb24gcXVlcnkoZWwpIHtcbiAgICByZXR1cm4gdHlwZW9mIGVsID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpIDogZWw7XG4gIH1cblxuICAvKipcbiAgICogQXBwZW5kIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgZnVuY3Rpb24gYXBwZW5kKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XG4gICAgaWYgKGNiKSBjYigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluc2VydEJlZm9yZSBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IGVsXG4gICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGJlZm9yZVdpdGhDYihlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcbiAgICBiZWZvcmUoZWwsIHRhcmdldCk7XG4gICAgaWYgKGNiKSBjYigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IGVsXG4gICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlbW92ZVdpdGhDYihlbCwgdm0sIGNiKSB7XG4gICAgcmVtb3ZlKGVsKTtcbiAgICBpZiAoY2IpIGNiKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZXZlbnRzQVBJIChWdWUpIHtcbiAgLyoqXG4gICAqIExpc3RlbiBvbiB0aGUgZ2l2ZW4gYGV2ZW50YCB3aXRoIGBmbmAuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRvbiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICAodGhpcy5fZXZlbnRzW2V2ZW50XSB8fCAodGhpcy5fZXZlbnRzW2V2ZW50XSA9IFtdKSkucHVzaChmbik7XG4gICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgMSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZHMgYW4gYGV2ZW50YCBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgaW52b2tlZCBhIHNpbmdsZVxuICAgKiB0aW1lIHRoZW4gYXV0b21hdGljYWxseSByZW1vdmVkLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kb25jZSA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgZnVuY3Rpb24gb24oKSB7XG4gICAgICBzZWxmLiRvZmYoZXZlbnQsIG9uKTtcbiAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIG9uLmZuID0gZm47XG4gICAgdGhpcy4kb24oZXZlbnQsIG9uKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBnaXZlbiBjYWxsYmFjayBmb3IgYGV2ZW50YCBvciBhbGxcbiAgICogcmVnaXN0ZXJlZCBjYWxsYmFja3MuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRvZmYgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG4gICAgdmFyIGNicztcbiAgICAvLyBhbGxcbiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIGlmICh0aGlzLiRwYXJlbnQpIHtcbiAgICAgICAgZm9yIChldmVudCBpbiB0aGlzLl9ldmVudHMpIHtcbiAgICAgICAgICBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuICAgICAgICAgIGlmIChjYnMpIHtcbiAgICAgICAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC1jYnMubGVuZ3RoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIHNwZWNpZmljIGV2ZW50XG4gICAgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcbiAgICBpZiAoIWNicykge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtY2JzLmxlbmd0aCk7XG4gICAgICB0aGlzLl9ldmVudHNbZXZlbnRdID0gbnVsbDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvLyBzcGVjaWZpYyBoYW5kbGVyXG4gICAgdmFyIGNiO1xuICAgIHZhciBpID0gY2JzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBjYiA9IGNic1tpXTtcbiAgICAgIGlmIChjYiA9PT0gZm4gfHwgY2IuZm4gPT09IGZuKSB7XG4gICAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC0xKTtcbiAgICAgICAgY2JzLnNwbGljZShpLCAxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUcmlnZ2VyIGFuIGV2ZW50IG9uIHNlbGYuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gZXZlbnRcbiAgICogQHJldHVybiB7Qm9vbGVhbn0gc2hvdWxkUHJvcGFnYXRlXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGVtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgaXNTb3VyY2UgPSB0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnO1xuICAgIGV2ZW50ID0gaXNTb3VyY2UgPyBldmVudCA6IGV2ZW50Lm5hbWU7XG4gICAgdmFyIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF07XG4gICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IGlzU291cmNlIHx8ICFjYnM7XG4gICAgaWYgKGNicykge1xuICAgICAgY2JzID0gY2JzLmxlbmd0aCA+IDEgPyB0b0FycmF5KGNicykgOiBjYnM7XG4gICAgICAvLyB0aGlzIGlzIGEgc29tZXdoYXQgaGFja3kgc29sdXRpb24gdG8gdGhlIHF1ZXN0aW9uIHJhaXNlZFxuICAgICAgLy8gaW4gIzIxMDI6IGZvciBhbiBpbmxpbmUgY29tcG9uZW50IGxpc3RlbmVyIGxpa2UgPGNvbXAgQHRlc3Q9XCJkb1RoaXNcIj4sXG4gICAgICAvLyB0aGUgcHJvcGFnYXRpb24gaGFuZGxpbmcgaXMgc29tZXdoYXQgYnJva2VuLiBUaGVyZWZvcmUgd2VcbiAgICAgIC8vIG5lZWQgdG8gdHJlYXQgdGhlc2UgaW5saW5lIGNhbGxiYWNrcyBkaWZmZXJlbnRseS5cbiAgICAgIHZhciBoYXNQYXJlbnRDYnMgPSBpc1NvdXJjZSAmJiBjYnMuc29tZShmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgcmV0dXJuIGNiLl9mcm9tUGFyZW50O1xuICAgICAgfSk7XG4gICAgICBpZiAoaGFzUGFyZW50Q2JzKSB7XG4gICAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdmFyIGNiID0gY2JzW2ldO1xuICAgICAgICB2YXIgcmVzID0gY2IuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIGlmIChyZXMgPT09IHRydWUgJiYgKCFoYXNQYXJlbnRDYnMgfHwgY2IuX2Zyb21QYXJlbnQpKSB7XG4gICAgICAgICAgc2hvdWxkUHJvcGFnYXRlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2hvdWxkUHJvcGFnYXRlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZWN1cnNpdmVseSBicm9hZGNhc3QgYW4gZXZlbnQgdG8gYWxsIGNoaWxkcmVuIGluc3RhbmNlcy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBldmVudFxuICAgKiBAcGFyYW0gey4uLip9IGFkZGl0aW9uYWwgYXJndW1lbnRzXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGJyb2FkY2FzdCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBpc1NvdXJjZSA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZyc7XG4gICAgZXZlbnQgPSBpc1NvdXJjZSA/IGV2ZW50IDogZXZlbnQubmFtZTtcbiAgICAvLyBpZiBubyBjaGlsZCBoYXMgcmVnaXN0ZXJlZCBmb3IgdGhpcyBldmVudCxcbiAgICAvLyB0aGVuIHRoZXJlJ3Mgbm8gbmVlZCB0byBicm9hZGNhc3QuXG4gICAgaWYgKCF0aGlzLl9ldmVudHNDb3VudFtldmVudF0pIHJldHVybjtcbiAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLiRjaGlsZHJlbjtcbiAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcbiAgICBpZiAoaXNTb3VyY2UpIHtcbiAgICAgIC8vIHVzZSBvYmplY3QgZXZlbnQgdG8gaW5kaWNhdGUgbm9uLXNvdXJjZSBlbWl0XG4gICAgICAvLyBvbiBjaGlsZHJlblxuICAgICAgYXJnc1swXSA9IHsgbmFtZTogZXZlbnQsIHNvdXJjZTogdGhpcyB9O1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gY2hpbGQuJGVtaXQuYXBwbHkoY2hpbGQsIGFyZ3MpO1xuICAgICAgaWYgKHNob3VsZFByb3BhZ2F0ZSkge1xuICAgICAgICBjaGlsZC4kYnJvYWRjYXN0LmFwcGx5KGNoaWxkLCBhcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlY3Vyc2l2ZWx5IHByb3BhZ2F0ZSBhbiBldmVudCB1cCB0aGUgcGFyZW50IGNoYWluLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHsuLi4qfSBhZGRpdGlvbmFsIGFyZ3VtZW50c1xuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRkaXNwYXRjaCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSB0aGlzLiRlbWl0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKCFzaG91bGRQcm9wYWdhdGUpIHJldHVybjtcbiAgICB2YXIgcGFyZW50ID0gdGhpcy4kcGFyZW50O1xuICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO1xuICAgIC8vIHVzZSBvYmplY3QgZXZlbnQgdG8gaW5kaWNhdGUgbm9uLXNvdXJjZSBlbWl0XG4gICAgLy8gb24gcGFyZW50c1xuICAgIGFyZ3NbMF0gPSB7IG5hbWU6IGV2ZW50LCBzb3VyY2U6IHRoaXMgfTtcbiAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICBzaG91bGRQcm9wYWdhdGUgPSBwYXJlbnQuJGVtaXQuYXBwbHkocGFyZW50LCBhcmdzKTtcbiAgICAgIHBhcmVudCA9IHNob3VsZFByb3BhZ2F0ZSA/IHBhcmVudC4kcGFyZW50IDogbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1vZGlmeSB0aGUgbGlzdGVuZXIgY291bnRzIG9uIGFsbCBwYXJlbnRzLlxuICAgKiBUaGlzIGJvb2trZWVwaW5nIGFsbG93cyAkYnJvYWRjYXN0IHRvIHJldHVybiBlYXJseSB3aGVuXG4gICAqIG5vIGNoaWxkIGhhcyBsaXN0ZW5lZCB0byBhIGNlcnRhaW4gZXZlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50XG4gICAqL1xuXG4gIHZhciBob29rUkUgPSAvXmhvb2s6LztcbiAgZnVuY3Rpb24gbW9kaWZ5TGlzdGVuZXJDb3VudCh2bSwgZXZlbnQsIGNvdW50KSB7XG4gICAgdmFyIHBhcmVudCA9IHZtLiRwYXJlbnQ7XG4gICAgLy8gaG9va3MgZG8gbm90IGdldCBicm9hZGNhc3RlZCBzbyBubyBuZWVkXG4gICAgLy8gdG8gZG8gYm9va2tlZXBpbmcgZm9yIHRoZW1cbiAgICBpZiAoIXBhcmVudCB8fCAhY291bnQgfHwgaG9va1JFLnRlc3QoZXZlbnQpKSByZXR1cm47XG4gICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgcGFyZW50Ll9ldmVudHNDb3VudFtldmVudF0gPSAocGFyZW50Ll9ldmVudHNDb3VudFtldmVudF0gfHwgMCkgKyBjb3VudDtcbiAgICAgIHBhcmVudCA9IHBhcmVudC4kcGFyZW50O1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBsaWZlY3ljbGVBUEkgKFZ1ZSkge1xuICAvKipcbiAgICogU2V0IGluc3RhbmNlIHRhcmdldCBlbGVtZW50IGFuZCBraWNrIG9mZiB0aGUgY29tcGlsYXRpb25cbiAgICogcHJvY2Vzcy4gVGhlIHBhc3NlZCBpbiBgZWxgIGNhbiBiZSBhIHNlbGVjdG9yIHN0cmluZywgYW5cbiAgICogZXhpc3RpbmcgRWxlbWVudCwgb3IgYSBEb2N1bWVudEZyYWdtZW50IChmb3IgYmxvY2tcbiAgICogaW5zdGFuY2VzKS5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR8c3RyaW5nfSBlbFxuICAgKiBAcHVibGljXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG1vdW50ID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgaWYgKHRoaXMuX2lzQ29tcGlsZWQpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignJG1vdW50KCkgc2hvdWxkIGJlIGNhbGxlZCBvbmx5IG9uY2UuJywgdGhpcyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGVsID0gcXVlcnkoZWwpO1xuICAgIGlmICghZWwpIHtcbiAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgfVxuICAgIHRoaXMuX2NvbXBpbGUoZWwpO1xuICAgIHRoaXMuX2luaXRET01Ib29rcygpO1xuICAgIGlmIChpbkRvYyh0aGlzLiRlbCkpIHtcbiAgICAgIHRoaXMuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuICAgICAgcmVhZHkuY2FsbCh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kb25jZSgnaG9vazphdHRhY2hlZCcsIHJlYWR5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1hcmsgYW4gaW5zdGFuY2UgYXMgcmVhZHkuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlYWR5KCkge1xuICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlO1xuICAgIHRoaXMuX2lzUmVhZHkgPSB0cnVlO1xuICAgIHRoaXMuX2NhbGxIb29rKCdyZWFkeScpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRlYXJkb3duIHRoZSBpbnN0YW5jZSwgc2ltcGx5IGRlbGVnYXRlIHRvIHRoZSBpbnRlcm5hbFxuICAgKiBfZGVzdHJveS5cbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmVcbiAgICogQHBhcmFtIHtCb29sZWFufSBkZWZlckNsZWFudXBcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZGVzdHJveSA9IGZ1bmN0aW9uIChyZW1vdmUsIGRlZmVyQ2xlYW51cCkge1xuICAgIHRoaXMuX2Rlc3Ryb3kocmVtb3ZlLCBkZWZlckNsZWFudXApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQYXJ0aWFsbHkgY29tcGlsZSBhIHBpZWNlIG9mIERPTSBhbmQgcmV0dXJuIGFcbiAgICogZGVjb21waWxlIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAgICogQHBhcmFtIHtWdWV9IFtob3N0XVxuICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ11cbiAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGNvbXBpbGUgPSBmdW5jdGlvbiAoZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgcmV0dXJuIGNvbXBpbGUoZWwsIHRoaXMuJG9wdGlvbnMsIHRydWUpKHRoaXMsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gIH07XG59XG5cbi8qKlxuICogVGhlIGV4cG9zZWQgVnVlIGNvbnN0cnVjdG9yLlxuICpcbiAqIEFQSSBjb252ZW50aW9uczpcbiAqIC0gcHVibGljIEFQSSBtZXRob2RzL3Byb3BlcnRpZXMgYXJlIHByZWZpeGVkIHdpdGggYCRgXG4gKiAtIGludGVybmFsIG1ldGhvZHMvcHJvcGVydGllcyBhcmUgcHJlZml4ZWQgd2l0aCBgX2BcbiAqIC0gbm9uLXByZWZpeGVkIHByb3BlcnRpZXMgYXJlIGFzc3VtZWQgdG8gYmUgcHJveGllZCB1c2VyXG4gKiAgIGRhdGEuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiBAcHVibGljXG4gKi9cblxuZnVuY3Rpb24gVnVlKG9wdGlvbnMpIHtcbiAgdGhpcy5faW5pdChvcHRpb25zKTtcbn1cblxuLy8gaW5zdGFsbCBpbnRlcm5hbHNcbmluaXRNaXhpbihWdWUpO1xuc3RhdGVNaXhpbihWdWUpO1xuZXZlbnRzTWl4aW4oVnVlKTtcbmxpZmVjeWNsZU1peGluKFZ1ZSk7XG5taXNjTWl4aW4oVnVlKTtcblxuLy8gaW5zdGFsbCBpbnN0YW5jZSBBUElzXG5kYXRhQVBJKFZ1ZSk7XG5kb21BUEkoVnVlKTtcbmV2ZW50c0FQSShWdWUpO1xubGlmZWN5Y2xlQVBJKFZ1ZSk7XG5cbnZhciBzbG90ID0ge1xuXG4gIHByaW9yaXR5OiBTTE9ULFxuICBwYXJhbXM6IFsnbmFtZSddLFxuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gdGhpcyB3YXMgcmVzb2x2ZWQgZHVyaW5nIGNvbXBvbmVudCB0cmFuc2NsdXNpb25cbiAgICB2YXIgbmFtZSA9IHRoaXMucGFyYW1zLm5hbWUgfHwgJ2RlZmF1bHQnO1xuICAgIHZhciBjb250ZW50ID0gdGhpcy52bS5fc2xvdENvbnRlbnRzICYmIHRoaXMudm0uX3Nsb3RDb250ZW50c1tuYW1lXTtcbiAgICBpZiAoIWNvbnRlbnQgfHwgIWNvbnRlbnQuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICB0aGlzLmZhbGxiYWNrKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29tcGlsZShjb250ZW50LmNsb25lTm9kZSh0cnVlKSwgdGhpcy52bS5fY29udGV4dCwgdGhpcy52bSk7XG4gICAgfVxuICB9LFxuXG4gIGNvbXBpbGU6IGZ1bmN0aW9uIGNvbXBpbGUoY29udGVudCwgY29udGV4dCwgaG9zdCkge1xuICAgIGlmIChjb250ZW50ICYmIGNvbnRleHQpIHtcbiAgICAgIGlmICh0aGlzLmVsLmhhc0NoaWxkTm9kZXMoKSAmJiBjb250ZW50LmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICYmIGNvbnRlbnQuY2hpbGROb2Rlc1swXS5ub2RlVHlwZSA9PT0gMSAmJiBjb250ZW50LmNoaWxkTm9kZXNbMF0uaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcbiAgICAgICAgLy8gaWYgdGhlIGluc2VydGVkIHNsb3QgaGFzIHYtaWZcbiAgICAgICAgLy8gaW5qZWN0IGZhbGxiYWNrIGNvbnRlbnQgYXMgdGhlIHYtZWxzZVxuICAgICAgICB2YXIgZWxzZUJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbiAgICAgICAgZWxzZUJsb2NrLnNldEF0dHJpYnV0ZSgndi1lbHNlJywgJycpO1xuICAgICAgICBlbHNlQmxvY2suaW5uZXJIVE1MID0gdGhpcy5lbC5pbm5lckhUTUw7XG4gICAgICAgIC8vIHRoZSBlbHNlIGJsb2NrIHNob3VsZCBiZSBjb21waWxlZCBpbiBjaGlsZCBzY29wZVxuICAgICAgICBlbHNlQmxvY2suX2NvbnRleHQgPSB0aGlzLnZtO1xuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGVsc2VCbG9jayk7XG4gICAgICB9XG4gICAgICB2YXIgc2NvcGUgPSBob3N0ID8gaG9zdC5fc2NvcGUgOiB0aGlzLl9zY29wZTtcbiAgICAgIHRoaXMudW5saW5rID0gY29udGV4dC4kY29tcGlsZShjb250ZW50LCBob3N0LCBzY29wZSwgdGhpcy5fZnJhZyk7XG4gICAgfVxuICAgIGlmIChjb250ZW50KSB7XG4gICAgICByZXBsYWNlKHRoaXMuZWwsIGNvbnRlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmUodGhpcy5lbCk7XG4gICAgfVxuICB9LFxuXG4gIGZhbGxiYWNrOiBmdW5jdGlvbiBmYWxsYmFjaygpIHtcbiAgICB0aGlzLmNvbXBpbGUoZXh0cmFjdENvbnRlbnQodGhpcy5lbCwgdHJ1ZSksIHRoaXMudm0pO1xuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIGlmICh0aGlzLnVubGluaykge1xuICAgICAgdGhpcy51bmxpbmsoKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBwYXJ0aWFsID0ge1xuXG4gIHByaW9yaXR5OiBQQVJUSUFMLFxuXG4gIHBhcmFtczogWyduYW1lJ10sXG5cbiAgLy8gd2F0Y2ggY2hhbmdlcyB0byBuYW1lIGZvciBkeW5hbWljIHBhcnRpYWxzXG4gIHBhcmFtV2F0Y2hlcnM6IHtcbiAgICBuYW1lOiBmdW5jdGlvbiBuYW1lKHZhbHVlKSB7XG4gICAgICB2SWYucmVtb3ZlLmNhbGwodGhpcyk7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5pbnNlcnQodmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LXBhcnRpYWwnKTtcbiAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcbiAgICB0aGlzLmluc2VydCh0aGlzLnBhcmFtcy5uYW1lKTtcbiAgfSxcblxuICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydChpZCkge1xuICAgIHZhciBwYXJ0aWFsID0gcmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICdwYXJ0aWFscycsIGlkLCB0cnVlKTtcbiAgICBpZiAocGFydGlhbCkge1xuICAgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCBwYXJ0aWFsKTtcbiAgICAgIHZJZi5pbnNlcnQuY2FsbCh0aGlzKTtcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgaWYgKHRoaXMuZnJhZykge1xuICAgICAgdGhpcy5mcmFnLmRlc3Ryb3koKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBlbGVtZW50RGlyZWN0aXZlcyA9IHtcbiAgc2xvdDogc2xvdCxcbiAgcGFydGlhbDogcGFydGlhbFxufTtcblxudmFyIGNvbnZlcnRBcnJheSA9IHZGb3IuX3Bvc3RQcm9jZXNzO1xuXG4vKipcbiAqIExpbWl0IGZpbHRlciBmb3IgYXJyYXlzXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgKERlY2ltYWwgZXhwZWN0ZWQpXG4gKi9cblxuZnVuY3Rpb24gbGltaXRCeShhcnIsIG4sIG9mZnNldCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPyBwYXJzZUludChvZmZzZXQsIDEwKSA6IDA7XG4gIG4gPSB0b051bWJlcihuKTtcbiAgcmV0dXJuIHR5cGVvZiBuID09PSAnbnVtYmVyJyA/IGFyci5zbGljZShvZmZzZXQsIG9mZnNldCArIG4pIDogYXJyO1xufVxuXG4vKipcbiAqIEZpbHRlciBmaWx0ZXIgZm9yIGFycmF5c1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcbiAqIEBwYXJhbSB7U3RyaW5nfSBbZGVsaW1pdGVyXVxuICogQHBhcmFtIHtTdHJpbmd9IC4uLmRhdGFLZXlzXG4gKi9cblxuZnVuY3Rpb24gZmlsdGVyQnkoYXJyLCBzZWFyY2gsIGRlbGltaXRlcikge1xuICBhcnIgPSBjb252ZXJ0QXJyYXkoYXJyKTtcbiAgaWYgKHNlYXJjaCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuICBpZiAodHlwZW9mIHNlYXJjaCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBhcnIuZmlsdGVyKHNlYXJjaCk7XG4gIH1cbiAgLy8gY2FzdCB0byBsb3dlcmNhc2Ugc3RyaW5nXG4gIHNlYXJjaCA9ICgnJyArIHNlYXJjaCkudG9Mb3dlckNhc2UoKTtcbiAgLy8gYWxsb3cgb3B0aW9uYWwgYGluYCBkZWxpbWl0ZXJcbiAgLy8gYmVjYXVzZSB3aHkgbm90XG4gIHZhciBuID0gZGVsaW1pdGVyID09PSAnaW4nID8gMyA6IDI7XG4gIC8vIGV4dHJhY3QgYW5kIGZsYXR0ZW4ga2V5c1xuICB2YXIga2V5cyA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIHRvQXJyYXkoYXJndW1lbnRzLCBuKSk7XG4gIHZhciByZXMgPSBbXTtcbiAgdmFyIGl0ZW0sIGtleSwgdmFsLCBqO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGFyci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBpdGVtID0gYXJyW2ldO1xuICAgIHZhbCA9IGl0ZW0gJiYgaXRlbS4kdmFsdWUgfHwgaXRlbTtcbiAgICBqID0ga2V5cy5sZW5ndGg7XG4gICAgaWYgKGopIHtcbiAgICAgIHdoaWxlIChqLS0pIHtcbiAgICAgICAga2V5ID0ga2V5c1tqXTtcbiAgICAgICAgaWYgKGtleSA9PT0gJyRrZXknICYmIGNvbnRhaW5zKGl0ZW0uJGtleSwgc2VhcmNoKSB8fCBjb250YWlucyhnZXRQYXRoKHZhbCwga2V5KSwgc2VhcmNoKSkge1xuICAgICAgICAgIHJlcy5wdXNoKGl0ZW0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjb250YWlucyhpdGVtLCBzZWFyY2gpKSB7XG4gICAgICByZXMucHVzaChpdGVtKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBGaWx0ZXIgZmlsdGVyIGZvciBhcnJheXNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xBcnJheTxTdHJpbmc+fEZ1bmN0aW9ufSAuLi5zb3J0S2V5c1xuICogQHBhcmFtIHtOdW1iZXJ9IFtvcmRlcl1cbiAqL1xuXG5mdW5jdGlvbiBvcmRlckJ5KGFycikge1xuICB2YXIgY29tcGFyYXRvciA9IG51bGw7XG4gIHZhciBzb3J0S2V5cyA9IHVuZGVmaW5lZDtcbiAgYXJyID0gY29udmVydEFycmF5KGFycik7XG5cbiAgLy8gZGV0ZXJtaW5lIG9yZGVyIChsYXN0IGFyZ3VtZW50KVxuICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcbiAgdmFyIG9yZGVyID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuICBpZiAodHlwZW9mIG9yZGVyID09PSAnbnVtYmVyJykge1xuICAgIG9yZGVyID0gb3JkZXIgPCAwID8gLTEgOiAxO1xuICAgIGFyZ3MgPSBhcmdzLmxlbmd0aCA+IDEgPyBhcmdzLnNsaWNlKDAsIC0xKSA6IGFyZ3M7XG4gIH0gZWxzZSB7XG4gICAgb3JkZXIgPSAxO1xuICB9XG5cbiAgLy8gZGV0ZXJtaW5lIHNvcnRLZXlzICYgY29tcGFyYXRvclxuICB2YXIgZmlyc3RBcmcgPSBhcmdzWzBdO1xuICBpZiAoIWZpcnN0QXJnKSB7XG4gICAgcmV0dXJuIGFycjtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZmlyc3RBcmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBjdXN0b20gY29tcGFyYXRvclxuICAgIGNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgcmV0dXJuIGZpcnN0QXJnKGEsIGIpICogb3JkZXI7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICAvLyBzdHJpbmcga2V5cy4gZmxhdHRlbiBmaXJzdFxuICAgIHNvcnRLZXlzID0gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgYXJncyk7XG4gICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uIChhLCBiLCBpKSB7XG4gICAgICBpID0gaSB8fCAwO1xuICAgICAgcmV0dXJuIGkgPj0gc29ydEtleXMubGVuZ3RoIC0gMSA/IGJhc2VDb21wYXJlKGEsIGIsIGkpIDogYmFzZUNvbXBhcmUoYSwgYiwgaSkgfHwgY29tcGFyYXRvcihhLCBiLCBpICsgMSk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJhc2VDb21wYXJlKGEsIGIsIHNvcnRLZXlJbmRleCkge1xuICAgIHZhciBzb3J0S2V5ID0gc29ydEtleXNbc29ydEtleUluZGV4XTtcbiAgICBpZiAoc29ydEtleSkge1xuICAgICAgaWYgKHNvcnRLZXkgIT09ICcka2V5Jykge1xuICAgICAgICBpZiAoaXNPYmplY3QoYSkgJiYgJyR2YWx1ZScgaW4gYSkgYSA9IGEuJHZhbHVlO1xuICAgICAgICBpZiAoaXNPYmplY3QoYikgJiYgJyR2YWx1ZScgaW4gYikgYiA9IGIuJHZhbHVlO1xuICAgICAgfVxuICAgICAgYSA9IGlzT2JqZWN0KGEpID8gZ2V0UGF0aChhLCBzb3J0S2V5KSA6IGE7XG4gICAgICBiID0gaXNPYmplY3QoYikgPyBnZXRQYXRoKGIsIHNvcnRLZXkpIDogYjtcbiAgICB9XG4gICAgcmV0dXJuIGEgPT09IGIgPyAwIDogYSA+IGIgPyBvcmRlciA6IC1vcmRlcjtcbiAgfVxuXG4gIC8vIHNvcnQgb24gYSBjb3B5IHRvIGF2b2lkIG11dGF0aW5nIG9yaWdpbmFsIGFycmF5XG4gIHJldHVybiBhcnIuc2xpY2UoKS5zb3J0KGNvbXBhcmF0b3IpO1xufVxuXG4vKipcbiAqIFN0cmluZyBjb250YWluIGhlbHBlclxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoXG4gKi9cblxuZnVuY3Rpb24gY29udGFpbnModmFsLCBzZWFyY2gpIHtcbiAgdmFyIGk7XG4gIGlmIChpc1BsYWluT2JqZWN0KHZhbCkpIHtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7XG4gICAgaSA9IGtleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGlmIChjb250YWlucyh2YWxba2V5c1tpXV0sIHNlYXJjaCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsKSkge1xuICAgIGkgPSB2YWwubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGlmIChjb250YWlucyh2YWxbaV0sIHNlYXJjaCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKHZhbCAhPSBudWxsKSB7XG4gICAgcmV0dXJuIHZhbC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzZWFyY2gpID4gLTE7XG4gIH1cbn1cblxudmFyIGRpZ2l0c1JFID0gLyhcXGR7M30pKD89XFxkKS9nO1xuXG4vLyBhc3NldCBjb2xsZWN0aW9ucyBtdXN0IGJlIGEgcGxhaW4gb2JqZWN0LlxudmFyIGZpbHRlcnMgPSB7XG5cbiAgb3JkZXJCeTogb3JkZXJCeSxcbiAgZmlsdGVyQnk6IGZpbHRlckJ5LFxuICBsaW1pdEJ5OiBsaW1pdEJ5LFxuXG4gIC8qKlxuICAgKiBTdHJpbmdpZnkgdmFsdWUuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRlbnRcbiAgICovXG5cbiAganNvbjoge1xuICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQodmFsdWUsIGluZGVudCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyB2YWx1ZSA6IEpTT04uc3RyaW5naWZ5KHZhbHVlLCBudWxsLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGluZGVudCA6IDIpO1xuICAgIH0sXG4gICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKHZhbHVlKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh2YWx1ZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqICdhYmMnID0+ICdBYmMnXG4gICAqL1xuXG4gIGNhcGl0YWxpemU6IGZ1bmN0aW9uIGNhcGl0YWxpemUodmFsdWUpIHtcbiAgICBpZiAoIXZhbHVlICYmIHZhbHVlICE9PSAwKSByZXR1cm4gJyc7XG4gICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgIHJldHVybiB2YWx1ZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHZhbHVlLnNsaWNlKDEpO1xuICB9LFxuXG4gIC8qKlxuICAgKiAnYWJjJyA9PiAnQUJDJ1xuICAgKi9cblxuICB1cHBlcmNhc2U6IGZ1bmN0aW9uIHVwcGVyY2FzZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSB8fCB2YWx1ZSA9PT0gMCA/IHZhbHVlLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKSA6ICcnO1xuICB9LFxuXG4gIC8qKlxuICAgKiAnQWJDJyA9PiAnYWJjJ1xuICAgKi9cblxuICBsb3dlcmNhc2U6IGZ1bmN0aW9uIGxvd2VyY2FzZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSB8fCB2YWx1ZSA9PT0gMCA/IHZhbHVlLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSA6ICcnO1xuICB9LFxuXG4gIC8qKlxuICAgKiAxMjM0NSA9PiAkMTIsMzQ1LjAwXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzaWduXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkZWNpbWFscyBEZWNpbWFsIHBsYWNlc1xuICAgKi9cblxuICBjdXJyZW5jeTogZnVuY3Rpb24gY3VycmVuY3kodmFsdWUsIF9jdXJyZW5jeSwgZGVjaW1hbHMpIHtcbiAgICB2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpO1xuICAgIGlmICghaXNGaW5pdGUodmFsdWUpIHx8ICF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkgcmV0dXJuICcnO1xuICAgIF9jdXJyZW5jeSA9IF9jdXJyZW5jeSAhPSBudWxsID8gX2N1cnJlbmN5IDogJyQnO1xuICAgIGRlY2ltYWxzID0gZGVjaW1hbHMgIT0gbnVsbCA/IGRlY2ltYWxzIDogMjtcbiAgICB2YXIgc3RyaW5naWZpZWQgPSBNYXRoLmFicyh2YWx1ZSkudG9GaXhlZChkZWNpbWFscyk7XG4gICAgdmFyIF9pbnQgPSBkZWNpbWFscyA/IHN0cmluZ2lmaWVkLnNsaWNlKDAsIC0xIC0gZGVjaW1hbHMpIDogc3RyaW5naWZpZWQ7XG4gICAgdmFyIGkgPSBfaW50Lmxlbmd0aCAlIDM7XG4gICAgdmFyIGhlYWQgPSBpID4gMCA/IF9pbnQuc2xpY2UoMCwgaSkgKyAoX2ludC5sZW5ndGggPiAzID8gJywnIDogJycpIDogJyc7XG4gICAgdmFyIF9mbG9hdCA9IGRlY2ltYWxzID8gc3RyaW5naWZpZWQuc2xpY2UoLTEgLSBkZWNpbWFscykgOiAnJztcbiAgICB2YXIgc2lnbiA9IHZhbHVlIDwgMCA/ICctJyA6ICcnO1xuICAgIHJldHVybiBzaWduICsgX2N1cnJlbmN5ICsgaGVhZCArIF9pbnQuc2xpY2UoaSkucmVwbGFjZShkaWdpdHNSRSwgJyQxLCcpICsgX2Zsb2F0O1xuICB9LFxuXG4gIC8qKlxuICAgKiAnaXRlbScgPT4gJ2l0ZW1zJ1xuICAgKlxuICAgKiBAcGFyYW1zXG4gICAqICBhbiBhcnJheSBvZiBzdHJpbmdzIGNvcnJlc3BvbmRpbmcgdG9cbiAgICogIHRoZSBzaW5nbGUsIGRvdWJsZSwgdHJpcGxlIC4uLiBmb3JtcyBvZiB0aGUgd29yZCB0b1xuICAgKiAgYmUgcGx1cmFsaXplZC4gV2hlbiB0aGUgbnVtYmVyIHRvIGJlIHBsdXJhbGl6ZWRcbiAgICogIGV4Y2VlZHMgdGhlIGxlbmd0aCBvZiB0aGUgYXJncywgaXQgd2lsbCB1c2UgdGhlIGxhc3RcbiAgICogIGVudHJ5IGluIHRoZSBhcnJheS5cbiAgICpcbiAgICogIGUuZy4gWydzaW5nbGUnLCAnZG91YmxlJywgJ3RyaXBsZScsICdtdWx0aXBsZSddXG4gICAqL1xuXG4gIHBsdXJhbGl6ZTogZnVuY3Rpb24gcGx1cmFsaXplKHZhbHVlKSB7XG4gICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG4gICAgdmFyIGxlbmd0aCA9IGFyZ3MubGVuZ3RoO1xuICAgIGlmIChsZW5ndGggPiAxKSB7XG4gICAgICB2YXIgaW5kZXggPSB2YWx1ZSAlIDEwIC0gMTtcbiAgICAgIHJldHVybiBpbmRleCBpbiBhcmdzID8gYXJnc1tpbmRleF0gOiBhcmdzW2xlbmd0aCAtIDFdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYXJnc1swXSArICh2YWx1ZSA9PT0gMSA/ICcnIDogJ3MnKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIERlYm91bmNlIGEgaGFuZGxlciBmdW5jdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuICAgKiBAcGFyYW0ge051bWJlcn0gZGVsYXkgPSAzMDBcbiAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAqL1xuXG4gIGRlYm91bmNlOiBmdW5jdGlvbiBkZWJvdW5jZShoYW5kbGVyLCBkZWxheSkge1xuICAgIGlmICghaGFuZGxlcikgcmV0dXJuO1xuICAgIGlmICghZGVsYXkpIHtcbiAgICAgIGRlbGF5ID0gMzAwO1xuICAgIH1cbiAgICByZXR1cm4gX2RlYm91bmNlKGhhbmRsZXIsIGRlbGF5KTtcbiAgfVxufTtcblxuZnVuY3Rpb24gaW5zdGFsbEdsb2JhbEFQSSAoVnVlKSB7XG4gIC8qKlxuICAgKiBWdWUgYW5kIGV2ZXJ5IGNvbnN0cnVjdG9yIHRoYXQgZXh0ZW5kcyBWdWUgaGFzIGFuXG4gICAqIGFzc29jaWF0ZWQgb3B0aW9ucyBvYmplY3QsIHdoaWNoIGNhbiBiZSBhY2Nlc3NlZCBkdXJpbmdcbiAgICogY29tcGlsYXRpb24gc3RlcHMgYXMgYHRoaXMuY29uc3RydWN0b3Iub3B0aW9uc2AuXG4gICAqXG4gICAqIFRoZXNlIGNhbiBiZSBzZWVuIGFzIHRoZSBkZWZhdWx0IG9wdGlvbnMgb2YgZXZlcnlcbiAgICogVnVlIGluc3RhbmNlLlxuICAgKi9cblxuICBWdWUub3B0aW9ucyA9IHtcbiAgICBkaXJlY3RpdmVzOiBkaXJlY3RpdmVzLFxuICAgIGVsZW1lbnREaXJlY3RpdmVzOiBlbGVtZW50RGlyZWN0aXZlcyxcbiAgICBmaWx0ZXJzOiBmaWx0ZXJzLFxuICAgIHRyYW5zaXRpb25zOiB7fSxcbiAgICBjb21wb25lbnRzOiB7fSxcbiAgICBwYXJ0aWFsczoge30sXG4gICAgcmVwbGFjZTogdHJ1ZVxuICB9O1xuXG4gIC8qKlxuICAgKiBFeHBvc2UgdXNlZnVsIGludGVybmFsc1xuICAgKi9cblxuICBWdWUudXRpbCA9IHV0aWw7XG4gIFZ1ZS5jb25maWcgPSBjb25maWc7XG4gIFZ1ZS5zZXQgPSBzZXQ7XG4gIFZ1ZVsnZGVsZXRlJ10gPSBkZWw7XG4gIFZ1ZS5uZXh0VGljayA9IG5leHRUaWNrO1xuXG4gIC8qKlxuICAgKiBUaGUgZm9sbG93aW5nIGFyZSBleHBvc2VkIGZvciBhZHZhbmNlZCB1c2FnZSAvIHBsdWdpbnNcbiAgICovXG5cbiAgVnVlLmNvbXBpbGVyID0gY29tcGlsZXI7XG4gIFZ1ZS5GcmFnbWVudEZhY3RvcnkgPSBGcmFnbWVudEZhY3Rvcnk7XG4gIFZ1ZS5pbnRlcm5hbERpcmVjdGl2ZXMgPSBpbnRlcm5hbERpcmVjdGl2ZXM7XG4gIFZ1ZS5wYXJzZXJzID0ge1xuICAgIHBhdGg6IHBhdGgsXG4gICAgdGV4dDogdGV4dCxcbiAgICB0ZW1wbGF0ZTogdGVtcGxhdGUsXG4gICAgZGlyZWN0aXZlOiBkaXJlY3RpdmUsXG4gICAgZXhwcmVzc2lvbjogZXhwcmVzc2lvblxuICB9O1xuXG4gIC8qKlxuICAgKiBFYWNoIGluc3RhbmNlIGNvbnN0cnVjdG9yLCBpbmNsdWRpbmcgVnVlLCBoYXMgYSB1bmlxdWVcbiAgICogY2lkLiBUaGlzIGVuYWJsZXMgdXMgdG8gY3JlYXRlIHdyYXBwZWQgXCJjaGlsZFxuICAgKiBjb25zdHJ1Y3RvcnNcIiBmb3IgcHJvdG90eXBhbCBpbmhlcml0YW5jZSBhbmQgY2FjaGUgdGhlbS5cbiAgICovXG5cbiAgVnVlLmNpZCA9IDA7XG4gIHZhciBjaWQgPSAxO1xuXG4gIC8qKlxuICAgKiBDbGFzcyBpbmhlcml0YW5jZVxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZXh0ZW5kT3B0aW9uc1xuICAgKi9cblxuICBWdWUuZXh0ZW5kID0gZnVuY3Rpb24gKGV4dGVuZE9wdGlvbnMpIHtcbiAgICBleHRlbmRPcHRpb25zID0gZXh0ZW5kT3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgU3VwZXIgPSB0aGlzO1xuICAgIHZhciBpc0ZpcnN0RXh0ZW5kID0gU3VwZXIuY2lkID09PSAwO1xuICAgIGlmIChpc0ZpcnN0RXh0ZW5kICYmIGV4dGVuZE9wdGlvbnMuX0N0b3IpIHtcbiAgICAgIHJldHVybiBleHRlbmRPcHRpb25zLl9DdG9yO1xuICAgIH1cbiAgICB2YXIgbmFtZSA9IGV4dGVuZE9wdGlvbnMubmFtZSB8fCBTdXBlci5vcHRpb25zLm5hbWU7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGlmICghL15bYS16QS1aXVtcXHctXSokLy50ZXN0KG5hbWUpKSB7XG4gICAgICAgIHdhcm4oJ0ludmFsaWQgY29tcG9uZW50IG5hbWU6IFwiJyArIG5hbWUgKyAnXCIuIENvbXBvbmVudCBuYW1lcyAnICsgJ2NhbiBvbmx5IGNvbnRhaW4gYWxwaGFudW1lcmljIGNoYXJhY2F0ZXJzIGFuZCB0aGUgaHlwaGVuLicpO1xuICAgICAgICBuYW1lID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIFN1YiA9IGNyZWF0ZUNsYXNzKG5hbWUgfHwgJ1Z1ZUNvbXBvbmVudCcpO1xuICAgIFN1Yi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN1cGVyLnByb3RvdHlwZSk7XG4gICAgU3ViLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN1YjtcbiAgICBTdWIuY2lkID0gY2lkKys7XG4gICAgU3ViLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoU3VwZXIub3B0aW9ucywgZXh0ZW5kT3B0aW9ucyk7XG4gICAgU3ViWydzdXBlciddID0gU3VwZXI7XG4gICAgLy8gYWxsb3cgZnVydGhlciBleHRlbnNpb25cbiAgICBTdWIuZXh0ZW5kID0gU3VwZXIuZXh0ZW5kO1xuICAgIC8vIGNyZWF0ZSBhc3NldCByZWdpc3RlcnMsIHNvIGV4dGVuZGVkIGNsYXNzZXNcbiAgICAvLyBjYW4gaGF2ZSB0aGVpciBwcml2YXRlIGFzc2V0cyB0b28uXG4gICAgY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgIFN1Ylt0eXBlXSA9IFN1cGVyW3R5cGVdO1xuICAgIH0pO1xuICAgIC8vIGVuYWJsZSByZWN1cnNpdmUgc2VsZi1sb29rdXBcbiAgICBpZiAobmFtZSkge1xuICAgICAgU3ViLm9wdGlvbnMuY29tcG9uZW50c1tuYW1lXSA9IFN1YjtcbiAgICB9XG4gICAgLy8gY2FjaGUgY29uc3RydWN0b3JcbiAgICBpZiAoaXNGaXJzdEV4dGVuZCkge1xuICAgICAgZXh0ZW5kT3B0aW9ucy5fQ3RvciA9IFN1YjtcbiAgICB9XG4gICAgcmV0dXJuIFN1YjtcbiAgfTtcblxuICAvKipcbiAgICogQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBzdWItY2xhc3MgY29uc3RydWN0b3Igd2l0aCB0aGVcbiAgICogZ2l2ZW4gbmFtZS4gVGhpcyBnaXZlcyB1cyBtdWNoIG5pY2VyIG91dHB1dCB3aGVuXG4gICAqIGxvZ2dpbmcgaW5zdGFuY2VzIGluIHRoZSBjb25zb2xlLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gY3JlYXRlQ2xhc3MobmFtZSkge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jICovXG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbigncmV0dXJuIGZ1bmN0aW9uICcgKyBjbGFzc2lmeShuYW1lKSArICcgKG9wdGlvbnMpIHsgdGhpcy5faW5pdChvcHRpb25zKSB9JykoKTtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLW5ldy1mdW5jICovXG4gIH1cblxuICAvKipcbiAgICogUGx1Z2luIHN5c3RlbVxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gcGx1Z2luXG4gICAqL1xuXG4gIFZ1ZS51c2UgPSBmdW5jdGlvbiAocGx1Z2luKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKHBsdWdpbi5pbnN0YWxsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gYWRkaXRpb25hbCBwYXJhbWV0ZXJzXG4gICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG4gICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuICAgIGlmICh0eXBlb2YgcGx1Z2luLmluc3RhbGwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHBsdWdpbi5pbnN0YWxsLmFwcGx5KHBsdWdpbiwgYXJncyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBsdWdpbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICB9XG4gICAgcGx1Z2luLmluc3RhbGxlZCA9IHRydWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFwcGx5IGEgZ2xvYmFsIG1peGluIGJ5IG1lcmdpbmcgaXQgaW50byB0aGUgZGVmYXVsdFxuICAgKiBvcHRpb25zLlxuICAgKi9cblxuICBWdWUubWl4aW4gPSBmdW5jdGlvbiAobWl4aW4pIHtcbiAgICBWdWUub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhWdWUub3B0aW9ucywgbWl4aW4pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYXNzZXQgcmVnaXN0cmF0aW9uIG1ldGhvZHMgd2l0aCB0aGUgZm9sbG93aW5nXG4gICAqIHNpZ25hdHVyZTpcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gICAqIEBwYXJhbSB7Kn0gZGVmaW5pdGlvblxuICAgKi9cblxuICBjb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgIFZ1ZVt0eXBlXSA9IGZ1bmN0aW9uIChpZCwgZGVmaW5pdGlvbikge1xuICAgICAgaWYgKCFkZWZpbml0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgaWYgKHR5cGUgPT09ICdjb21wb25lbnQnICYmIChjb21tb25UYWdSRS50ZXN0KGlkKSB8fCByZXNlcnZlZFRhZ1JFLnRlc3QoaWQpKSkge1xuICAgICAgICAgICAgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCAnICsgJ2lkOiAnICsgaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgaXNQbGFpbk9iamVjdChkZWZpbml0aW9uKSkge1xuICAgICAgICAgIGlmICghZGVmaW5pdGlvbi5uYW1lKSB7XG4gICAgICAgICAgICBkZWZpbml0aW9uLm5hbWUgPSBpZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmaW5pdGlvbiA9IFZ1ZS5leHRlbmQoZGVmaW5pdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXSA9IGRlZmluaXRpb247XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9uO1xuICAgICAgfVxuICAgIH07XG4gIH0pO1xuXG4gIC8vIGV4cG9zZSBpbnRlcm5hbCB0cmFuc2l0aW9uIEFQSVxuICBleHRlbmQoVnVlLnRyYW5zaXRpb24sIHRyYW5zaXRpb24pO1xufVxuXG5pbnN0YWxsR2xvYmFsQVBJKFZ1ZSk7XG5cblZ1ZS52ZXJzaW9uID0gJzEuMC4yNic7XG5cbi8vIGRldnRvb2xzIGdsb2JhbCBob29rXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gIGlmIChjb25maWcuZGV2dG9vbHMpIHtcbiAgICBpZiAoZGV2dG9vbHMpIHtcbiAgICAgIGRldnRvb2xzLmVtaXQoJ2luaXQnLCBWdWUpO1xuICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBpbkJyb3dzZXIgJiYgL0Nocm9tZVxcL1xcZCsvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG4gICAgICBjb25zb2xlLmxvZygnRG93bmxvYWQgdGhlIFZ1ZSBEZXZ0b29scyBmb3IgYSBiZXR0ZXIgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZTpcXG4nICsgJ2h0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtZGV2dG9vbHMnKTtcbiAgICB9XG4gIH1cbn0sIDApO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZ1ZTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9WdWUvZGlzdC92dWUuY29tbW9uLmpzXG4gKiogbW9kdWxlIGlkID0gNDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL2NvbXBvbmVudHMvdWkvaWNvbic7XG4gICAgQGltcG9ydCAnLi9hcGktdGFibGUnO1xuPC9zdHlsZT5cblxuPHRlbXBsYXRlIHNyYz1cIi4vYXBpLXRhYmxlLmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuZXhwb3J0IGRlZmF1bHQge1xuICBwcm9wczoge1xuICAgIGl0ZW1zOiB7XG4gICAgICB0eXBlOiBBcnJheVxuICAgIH1cbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogYXBpLXRhYmxlLnZ1ZT81ZGRlNTEwY1xuICoqLyIsIjx0ZW1wbGF0ZT5cbiAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cbiAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cbiAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5BbGVydDwvaDI+XG4gICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG4gICAgICAgICAgIDxhbGVydCB0eXBlPVwiZXJyb3JcIj5UaGlzIGlzIGFuIGVycm9yIGFsZXJ0LjwvYWxlcnQ+XG4gICAgICAgICAgIDxhbGVydCB0eXBlPVwiaW5mb1wiPlRoaXMgaXMgYW4gaW5mbyBhbGVydC48L2FsZXJ0PlxuICAgICAgICAgICA8YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIj5UaGlzIGlzIGEgc3VjY2VzcyBhbGVydC48L2FsZXJ0PlxuICAgICAgICAgICA8YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIiA6ZGlzbWlzc2libGU9XCJmYWxzZVwiPlRoaXMgaXMgbm90IGEgZGlzbWlzc2libGUgYWxlcnQuPC9hbGVydD5cbiAgICAgICAgICAgPGFsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOm9uLWNsb3NlZD1cImRpc21pc3NDYWxsQmFja1wiPlRoaXMgaXMgYW4gYWxlcnQgd2l0aCBjYWxsYmFjay48L2FsZXJ0PlxuICAgICAgICAgICA8YWxlcnQgdHlwZT1cImluZm9cIiA6dGltZW91dD1cIjUwMDBcIj5UaGlzIGFsZXJ0IHNob3VsZCB0aW1lb3V0IGluIDUgc2Vjb25kcy48L2FsZXJ0PlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG4gICAgICAgICAgIDxwcmU+XG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG4gICAgICAgICAgICZsdDthbGVydCB0eXBlPVwiZXJyb3JcIiZndDtUaGlzIGlzIGFuIGVycm9yIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XG4gICAgICAgICAgICZsdDthbGVydCB0eXBlPVwiaW5mb1wiJmd0O1RoaXMgaXMgYW4gaW5mbyBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xuICAgICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIiZndDtUaGlzIGlzIGEgc3VjY2VzcyBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xuICAgICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIiA6ZGlzbWlzc2libGU9XCJmYWxzZVwiJmd0O1RoaXMgaXMgbm90IGEgZGlzbWlzc2libGUgYWxlcnQuJmx0Oy9hbGVydCZndDtcbiAgICAgICAgICAgJmx0O2FsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOm9uLWNsb3NlZD1cImRpc21pc3NDYWxsQmFja1wiJmd0O1RoaXMgaXMgYW4gYWxlcnQgd2l0aCBjYWxsYmFjay4mbHQ7L2FsZXJ0Jmd0O1xuICAgICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIiA6dGltZW91dD1cIjUwMDBcIiZndDtUaGlzIGFsZXJ0IHNob3VsZCB0aW1lb3V0IGluIDUgc2Vjb25kcy4mbHQ7L2FsZXJ0Jmd0O1xuICAgICAgICAgICAgIDwvY29kZT5cbiAgICAgICAgICAgPC9wcmU+XG4gICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuICAgICAgPC9kaXY+XG4gICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG4gICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cbiAgICAgIDwvZGl2PlxuXG4gICA8L2Rpdj5cbiAgPC9zZWN0aW9uPlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmltcG9ydCBBcGlUYWJsZSBmcm9tICcuLi9jb21wb25lbnRzL2FwaS10YWJsZS52dWUnO1xuZXhwb3J0IGRlZmF1bHQge1xuICBjb21wb25lbnRzOiB7XG4gICAgQXBpVGFibGVcbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGlzbWlzc0NhbGxCYWNrKCkge1xuICAgICAgICB3aW5kb3cuYWxlcnQoJ2FsZXJ0IGRpc21pc3NlZC4nKTtcbiAgICAgIH0sXG4gICAgICBhcGlJdGVtczogW3tcbiAgICAgICAgbmFtZTogJ3R5cGUnLFxuICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICdUaGUgdHlwZSBvZiBhbGVydCAoZXJyb3IsIGluZm8sIHN1Y2Nlc3MpJ1xuICAgICAgfSwge1xuICAgICAgICBuYW1lOiAnZGlzbWlzc2libGUnLFxuICAgICAgICB0eXBlOiAnQm9vbGVhbicsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0OiB0cnVlLFxuICAgICAgICBkZXNjOiAnSXMgdGhlIGFsZXJ0IGRpc21pc3NpYmxlPydcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ3RpbWVvdXQnLFxuICAgICAgICB0eXBlOiAnTnVtYmVyJyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHQ6IC0xLFxuICAgICAgICBkZXNjOiAnVGhlIGR1cmF0aW9uIGFsZXJ0IHN0YXlzIG9uIHNjcmVlbiBpbiBtcydcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ29uQ2xvc2VkJyxcbiAgICAgICAgdHlwZTogJ0Z1bmN0aW9uJyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAnQ2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gYWxlcnQgaXMgY2xvc2VkLidcbiAgICAgIH1dXG4gICAgfTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogYWxlcnQtcGFnZS52dWU/MTIyYjgyMDJcbiAqKi8iLCI8dGVtcGxhdGU+XG4gIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG4gICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG4gICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+Q29sbGFwc2FibGUgUGFuZWw8L2gyPlxuICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cbiAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuICAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJQYW5lbCAxXCIgOmlzLW9wZW49XCJ0cnVlXCI+XG4gICAgICAgICAgICBQYW5lbCAxIGNvbnRlbnRcbiAgICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cblxuICAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJQYW5lbCAyXCI+XG4gICAgICAgICAgICBQYW5lbCAyIGNvbnRlbnRcbiAgICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiSFRNTFwiPlxuICAgICAgICAgICA8cHJlPlxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuICAgICAgICAgICAgICAgJmx0O2NvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiUGFuZWwgMVwiIDppcy1vcGVuPVwidHJ1ZVwiJmd0O1xuICAgICAgICAgICAgICAgICBQYW5lbCAxIGNvbnRlbnRcbiAgICAgICAgICAgICAgICZsdDsvY29sbGFwc2FibGUtcGFuZWwmZ3Q7XG4gICAgICAgICAgICAgICAmbHQ7Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJQYW5lbCAyXCImZ3Q7XG4gICAgICAgICAgICAgICAgIFBhbmVsIDIgY29udGVudFxuICAgICAgICAgICAgICAgJmx0Oy9jb2xsYXBzYWJsZS1wYW5lbCZndDtcbiAgICAgICAgICAgICA8L2NvZGU+XG4gICAgICAgICAgIDwvcHJlPlxuICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk8L2gzPlxuICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG4gICAgICA8L2Rpdj5cblxuICAgPC9kaXY+XG4gIDwvc2VjdGlvbj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5pbXBvcnQgQXBpVGFibGUgZnJvbSAnLi4vY29tcG9uZW50cy9hcGktdGFibGUudnVlJztcbmV4cG9ydCBkZWZhdWx0IHtcbiAgY29tcG9uZW50czoge1xuICAgIEFwaVRhYmxlXG4gIH0sXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFwaUl0ZW1zOiBbe1xuICAgICAgICBuYW1lOiAnbGFiZWwnLFxuICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICdUaGUgbGFibGUgb2YgdGhlIHBhbmVsJ1xuICAgICAgfSwge1xuICAgICAgICBuYW1lOiAnaXNPcGVuJyxcbiAgICAgICAgdHlwZTogJ0Jvb2xlYW4nLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgICAgIGRlc2M6ICdJcyB0aGUgcGFuZWwgb3Blbi4nXG4gICAgICB9XVxuICAgIH07XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGNvbGxhcHNhYmxlLXBhbmVsLXBhZ2UudnVlPzZjODNiYzU0XG4gKiovIiwiPHRlbXBsYXRlPlxuICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuICAgPGRpdiBjbGFzcz1cImh5X28td3JhcHBlclwiPlxuICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPkxlZ2FsIFN5c3RlbTwvaDI+XG4gICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG4gICAgICAgICAgIDxwIGNsYXNzPVwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcIj5cbiAgICAgICAgICAgICBMb3JlbSBpcHN1bTxsZWdhbC1jb3VudGVyXG4gICAgICAgICAgICAgICB2LW92ZXJsYXktb3BlbmVyPVwibGVnYWwtb3ZlcmxheVwiXG4gICAgICAgICAgICAgICBsZWdhbC1rZXk9XCJocy1yZWZlcnJhbC10ZXJtc1wiXG4gICAgICAgICAgICAgICBsZWdhbC1sYW5nPVwiZW5cIiBsZWdhbC1yZWdpb249XCJiY1wiXG4gICAgICAgICAgICAgICA+PC9sZWdhbC1jb3VudGVyPiBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0LFxuICAgICAgICAgICAgIHNlZCBkbyBlaXVzbW9kIHRlbXBvciBpbmNpZGlkdW50IHV0IGxhYm9yZSBldCBkb2xvcmUgbWFnbmEgYWxpcXVhLlxuICAgICAgICAgICAgIDxsZWdhbC1jb3VudGVyXG4gICAgICAgICAgICAgICB2LW92ZXJsYXktb3BlbmVyPVwibGVnYWwtb3ZlcmxheVwiXG4gICAgICAgICAgICAgICBsZWdhbC1rZXk9XCIxLXllYXItb2ZmZXItc3RpbVwiXG4gICAgICAgICAgICAgICBsZWdhbC1sYW5nPVwiZW5cIiBsZWdhbC1yZWdpb249XCJiY1wiXG4gICAgICAgICAgICAgICA+PC9sZWdhbC1jb3VudGVyPlxuICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGxlZ2FsLWNvbnRhaW5lcj48L2xlZ2FsLWNvbnRhaW5lcj5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiSFRNTFwiPlxuICAgICAgICAgICA8cHJlPlxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuICAgICAgICAgICAgICAgJmx0O2xlZ2FsLWNvdW50ZXImZ3Q7XG4gICAgICAgICAgICAgICAgICBsZWdhbC1rZXk9XCJocy1yZWZlcnJhbC10ZXJtc1wiXG4gICAgICAgICAgICAgICAgICBsZWdhbC1sYW5nPVwiZW5cIlxuICAgICAgICAgICAgICAgICAgbGVnYWwtcmVnaW9uPVwiYmNcIlxuICAgICAgICAgICAgICAgJmx0Oy9sZWdhbC1jb3VudGVyJmd0O1xuICAgICAgICAgICAgICAgJmx0O2xlZ2FsLWNvbnRhaW5lciZndDsmbHQ7L2xlZ2FsLWNvbnRhaW5lciZndDtcbiAgICAgICAgICAgICA8L2NvZGU+XG4gICAgICAgICAgIDwvcHJlPlxuICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cbiAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cImphdmFzY3JpcHRcIj5cbiAgICAgICAgICAgPHByZT5cbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWphdmFzY3JpcHRcIj5cbiAgICAgICAgICAgICAgIGxldCB2bSA9IG5ldyBWdWUoe1xuICAgICAgICAgICAgICAgICBlbDogJ2JvZHknLFxuICAgICAgICAgICAgICAgICBkYXRhKCkge1xuICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICBsaWdlckVuZFBvaW50OiAnaHR0cHM6Ly9hcGkuY21zLnRlbHVzLmNvbS9sZWdhbHMnLFxuICAgICAgICAgICAgICAgICAgICAgbGlnZXJBcHBsaWNhdGlvbktleTogJ2I5NzM4ZDY3Yjg5ZGZjNzgyNzQ2ZDRhOWNmNGExMDkzJ1xuICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IHtcbiAgICAgICAgICAgICAgICAgICBMZWdhbENvdW50ZXIsXG4gICAgICAgICAgICAgICAgICAgTGVnYWxDb250YWluZXJcbiAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgPC9jb2RlPlxuICAgICAgICAgICA8L3ByZT5cbiAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJOiBMZWdhbCBDb3VudGVyPC9oMz5cbiAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuICAgICAgPC9kaXY+XG4gICA8L2Rpdj5cbiAgPC9zZWN0aW9uPlxuXG5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5pbXBvcnQgQXBpVGFibGUgZnJvbSAnLi4vY29tcG9uZW50cy9hcGktdGFibGUudnVlJztcbmV4cG9ydCBkZWZhdWx0IHtcbiAgY29tcG9uZW50czoge1xuICAgIEFwaVRhYmxlXG4gIH0sXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFwaUl0ZW1zOiBbe1xuICAgICAgICBuYW1lOiAnbGVnYWxLZXknLFxuICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICd0aGUga2V5IG9mIGxlZ2FsIGluIGNtcydcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ2xlZ2FsTGFuZycsXG4gICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ3RoZSBsYW5ndWFnZSBvZiBsZWdhbCBpbiBjbXMnXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdsZWdhbFJlZ2lvbicsXG4gICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ3RoZSByZWdpb24gb2YgbGVnYWwgaW4gY21zJ1xuICAgICAgfV1cbiAgICB9O1xuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBsZWdhbC1wYWdlLnZ1ZT81NmI4NzNlNFxuICoqLyIsIjx0ZW1wbGF0ZT5cbiAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cbiAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cbiAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5PdmVybGF5IFN5c3RlbTwvaDI+XG4gICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG4gICAgICAgICAgIDxwPlxuICAgICAgICAgICAgIDxidXR0b24gdi1vdmVybGF5LW9wZW5lcj1cIm92ZXJsYXktMVwiIGNsYXNzPVwiaHlfYy1idXR0b24gaHlfYy1idXR0b24tLWxpbmsgaHlfdC1wdXJwbGVcIiB0eXBlPVwiYnV0dG9uXCIgcm9sZT1cImJ1dHRvblwiPlxuICAgICAgICAgICAgICAgT3BlbiBvdmVybGF5ICMxIDxpIGNsYXNzPVwiaHlfYy1pY29uIGh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZCBoeV9jLWJ1dHRvbl9faWNvblwiPjwvaT5cbiAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgPC9wPlxuICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICA8YnV0dG9uIHYtb3ZlcmxheS1vcGVuZXI9XCJvdmVybGF5LTJcIiBjbGFzcz1cImh5X2MtYnV0dG9uIGh5X2MtYnV0dG9uLS1saW5rIGh5X3QtcHVycGxlXCIgdHlwZT1cImJ1dHRvblwiIHJvbGU9XCJidXR0b25cIj5cbiAgICAgICAgICAgICAgIE9wZW4gb3ZlcmxheSAjMiA8aSBjbGFzcz1cImh5X2MtaWNvbiBoeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQgaHlfYy1idXR0b25fX2ljb25cIj48L2k+XG4gICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgPG92ZXJsYXktY29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgPG92ZXJsYXkgb3ZlcmxheS1rZXk9XCJvdmVybGF5LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFwiIHNsb3Q9XCJvdmVybGF5LWhlYWRlclwiPlRoaXMgaXMgb3ZlcmxheSAjMTwvaDQ+XG4gICAgICAgICAgICAgICAgICAgIDxhcnRpY2xlIHNsb3Q9XCJvdmVybGF5LWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIE92ZXJsYXkgIzEgYm9keVxuICAgICAgICAgICAgICAgICAgICA8L2FydGljbGU+XG4gICAgICAgICAgICAgICAgICA8L292ZXJsYXk+XG4gICAgICAgICAgICAgICAgICA8b3ZlcmxheSBvdmVybGF5LWtleT1cIm92ZXJsYXktMlwiPlxuICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XCIgc2xvdD1cIm92ZXJsYXktaGVhZGVyXCI+VGhpcyBpcyBvdmVybGF5ICMyPC9oND5cbiAgICAgICAgICAgICAgICAgICAgPGFydGljbGUgc2xvdD1cIm92ZXJsYXktYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgT3ZlcmxheSAjMiBib2R5XG4gICAgICAgICAgICAgICAgICAgIDwvYXJ0aWNsZT5cbiAgICAgICAgICAgICAgICAgIDwvb3ZlcmxheT5cbiAgICAgICAgICA8L292ZXJsYXktY29udGFpbmVyPlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG4gICAgICAgICAgIDxwcmU+XG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG4gICAgICAgICAgICAgICAmbHQ7b3ZlcmxheS1jb250YWluZXImZ3Q7XG4gICAgICAgICAgICAgICAgICZsdDtvdmVybGF5IG92ZXJsYXkta2V5PVwib3ZlcmxheS0xXCImZ3Q7XG4gICAgICAgICAgICAgICAgICAgJmx0O2g0ICBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcIiBzbG90PVwib3ZlcmxheS1oZWFkZXJcIiZndDtcbiAgICAgICAgICAgICAgICAgICBUaGlzIGlzIG92ZXJsYXkgIzFcbiAgICAgICAgICAgICAgICAgICAmbHQ7L2g0Jmd0O1xuICAgICAgICAgICAgICAgICAgICZsdDthcnRpY2xlIHNsb3Q9XCJvdmVybGF5LWJvZHlcIiZndDtcbiAgICAgICAgICAgICAgICAgICAgIE92ZXJsYXkgIzEgYm9keVxuICAgICAgICAgICAgICAgICAgICZsdDsvYXJ0aWNsZSZndDtcbiAgICAgICAgICAgICAgICAgJmx0Oy9vdmVybGF5Jmd0O1xuICAgICAgICAgICAgICAgICAmbHQ7b3ZlcmxheSBvdmVybGF5LWtleT1cIm92ZXJsYXktMlwiJmd0O1xuICAgICAgICAgICAgICAgICAgICZsdDtoNCAgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XCIgc2xvdD1cIm92ZXJsYXktaGVhZGVyXCImZ3Q7XG4gICAgICAgICAgICAgICAgICAgVGhpcyBpcyBvdmVybGF5ICMxXG4gICAgICAgICAgICAgICAgICAgJmx0Oy9oNCZndDtcbiAgICAgICAgICAgICAgICAgICAmbHQ7YXJ0aWNsZSBzbG90PVwib3ZlcmxheS1ib2R5XCImZ3Q7XG4gICAgICAgICAgICAgICAgICAgICBPdmVybGF5ICMyIGJvZHlcbiAgICAgICAgICAgICAgICAgICAmbHQ7L2FydGljbGUmZ3Q7XG4gICAgICAgICAgICAgICAgICZsdDsvb3ZlcmxheSZndDtcbiAgICAgICAgICAgICAgICZsdDsvb3ZlcmxheS1jb250YWluZXImZ3Q7XG4gICAgICAgICAgICAgPC9jb2RlPlxuICAgICAgICAgICA8L3ByZT5cbiAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJPC9oMz5cbiAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuICAgICAgPC9kaXY+XG4gICA8L2Rpdj5cbiAgPC9zZWN0aW9uPlxuXG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuaW1wb3J0IEFwaVRhYmxlIGZyb20gJy4uL2NvbXBvbmVudHMvYXBpLXRhYmxlLnZ1ZSc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIGNvbXBvbmVudHM6IHtcbiAgICBBcGlUYWJsZVxuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhcGlJdGVtczogW3tcbiAgICAgICAgbmFtZTogJ292ZXJsYXlLZXknLFxuICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICdUaGUga2V5IG9mIHRoZSBvdmVybGF5LiBVc2VkIGJ5IHRoZSBvdmVybGF5IG9wZW5lciBkaXJlY3RpdmUgdG8gdGFyZ2V0IHRoZSBvdmVybGV5LidcbiAgICAgIH1dXG4gICAgfTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogb3ZlcmxheS1wYWdlLnZ1ZT8yZDE0MDRmMFxuICoqLyIsIjx0ZW1wbGF0ZT5cbiAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cbiAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cbiAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5TdGVwIFRyYWNrZXI8L2gyPlxuICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cbiAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuICAgICAgICAgICA8c3RlcC10cmFja2VyIDpjdXJyZW50LXN0ZXA9XCJzdGVwVHJhY2tlckN1cnJlbnRTdGVwXCIgOmNvbmZpZz1cInN0ZXBUcmFja2VyQ29uZmlnXCI+PC9zdGVwLXRyYWNrZXI+XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cbiAgICAgICA8cHJlPlxuICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG4gICAgICAgICAgJmx0O3N0ZXAtdHJhY2tlclxuICAgICAgICAgIDpjdXJyZW50LXN0ZXA9XCJzdGVwVHJhY2tlckN1cnJlbnRTdGVwXCJcbiAgICAgICAgICA6Y29uZmlnPVwic3RlcFRyYWNrZXJDb25maWdcIiZndDtcbiAgICAgICAgICAmbHQ7L3N0ZXAtdHJhY2tlciZndDtcbiAgICAgICAgIDwvY29kZT5cbiAgICAgICA8L3ByZT5cbiAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJqYXZhc2NyaXB0XCI+XG4gICAgICAgICAgIDxwcmU+XG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1qc1wiPlxuICAgICAgICAgICAgICBsZXQgc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDI7XG4gICAgICAgICAgICAgIGxldCBzdGVwVHJhY2tlckNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICBpc0NsaWNrYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzdGVwczogW1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQScsXG4gICAgICAgICAgICAgICAgICAgIGxpbms6ICcnLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQicsXG4gICAgICAgICAgICAgICAgICAgIGxpbms6ICcnLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQycsXG4gICAgICAgICAgICAgICAgICAgIGxpbms6ICcnLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgbGV0IHZtID0gbmV3IFZ1ZSh7XG4gICAgICAgICAgICAgICAgZWw6ICdib2R5JyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBzdGVwVHJhY2tlckNvbmZpZyxcbiAgICAgICAgICAgICAgICAgIHN0ZXBUcmFja2VyQ3VycmVudFN0ZXBcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiB7XG4gICAgICAgICAgICAgICAgICBTdGVwVHJhY2tlclxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgPC9jb2RlPlxuICAgICAgICAgICA8L3ByZT5cbiAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJPC9oMz5cbiAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuICAgICAgPC9kaXY+XG4gICA8L2Rpdj5cbiAgPC9zZWN0aW9uPlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmltcG9ydCBBcGlUYWJsZSBmcm9tICcuLi9jb21wb25lbnRzL2FwaS10YWJsZS52dWUnO1xuZXhwb3J0IGRlZmF1bHQge1xuICBjb21wb25lbnRzOiB7XG4gICAgQXBpVGFibGVcbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RlcFRyYWNrZXJDdXJyZW50U3RlcDogMixcbiAgICAgIHN0ZXBUcmFja2VyQ29uZmlnOiB7XG4gICAgICAgIGlzQ2xpY2thYmxlOiB0cnVlLFxuICAgICAgICBzdGVwczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiAnU3RlcCBBJyxcbiAgICAgICAgICAgIGxpbms6ICcnLFxuICAgICAgICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGl0bGU6ICdTdGVwIEInLFxuICAgICAgICAgICAgbGluazogJycsXG4gICAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQycsXG4gICAgICAgICAgICBsaW5rOiAnJyxcbiAgICAgICAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICBhcGlJdGVtczogW3tcbiAgICAgICAgbmFtZTogJ2N1cnJlbnRTdGVwJyxcbiAgICAgICAgdHlwZTogJ0ludGVnZXInLFxuICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAwLFxuICAgICAgICBkZXNjOiAndG9kbydcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ2NvbmZpZycsXG4gICAgICAgIHR5cGU6ICdPYmplY3QnLFxuICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ3RvZG8nXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdjb25maWcudGl0bGUnLFxuICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICdUaGUgdGl0bGUgb2YgdGhlIHN0ZXAnXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdjb25maWcubGluaycsXG4gICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICdUaGUgbGluayBvZiB0aGUgc3RlcC4gJ1xuICAgICAgfSwge1xuICAgICAgICBuYW1lOiAnY29uZmlnLm9uQ2xpY2tIYW5kbGVyJyxcbiAgICAgICAgdHlwZTogJ0Z1bmN0aW9uJyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAnVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gc3RlcCBpcyBjbGlja2VkLidcbiAgICAgIH1dXG4gICAgfTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3RlcC10cmFja2VyLXBhZ2UudnVlPzEzMmM5NGZhXG4gKiovIiwiPHRlbXBsYXRlPlxuICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuICAgPGRpdiBjbGFzcz1cImh5X28td3JhcHBlclwiPlxuICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPlRhYjwvaDI+XG4gICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG4gICAgICAgICAgIDx0YWJzIGNsYXNzPVwiYy1wcmljZS1sb29rdXAgaHlfby1sYXlvdXRfX2l0ZW0gIGh5X3Utc2l6ZS0zb2YzQHNtIGh5X3Utc2l6ZS0zb2Y0QG1kIGh5X3Utc2l6ZS00b2YxMkBsZ1wiPlxuICAgICAgICAgICAgIDx0YWIgbGFiZWw9XCJUYWIgMVwiPlxuICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICBUYWIgMSBjb250ZW50XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICA8L3RhYj5cbiAgICAgICAgICAgICA8dGFiIGxhYmVsPVwiVGFiIDJcIj5cbiAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICBUYWIgMiBjb250ZW50XG4gICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgPC90YWI+XG4gICAgICAgICAgICAgPHRhYiBsYWJlbD1cIlRhYiAzXCIgOmlzLWRpc2FibGVkPVwidHJ1ZVwiPlxuICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgIFRhYiAzIGNvbnRlbnRcbiAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICA8L3RhYj5cbiAgICAgICAgICAgPC90YWJzPlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG4gICAgICAgICAgIDxwcmU+XG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG4gICAgICAgICAgICAgICAmbHQ7dGFicyZndDtcbiAgICAgICAgICAgICAgICAgJmx0O3RhYiBsYWJlbD1cIlRhYiAxXCImZ3Q7XG4gICAgICAgICAgICAgICAgICAgJmx0O3AmZ3Q7XG4gICAgICAgICAgICAgICAgICAgICBUYWIgMSBjb250ZW50XG4gICAgICAgICAgICAgICAgICAgJmx0Oy9wJmd0O1xuICAgICAgICAgICAgICAgICAmbHQ7L3RhYiZndDtcbiAgICAgICAgICAgICAgICAgJmx0O3RhYiBsYWJlbD1cIlRhYiAyXCImZ3Q7XG4gICAgICAgICAgICAgICAgICAgJmx0O3AmZ3Q7XG4gICAgICAgICAgICAgICAgICAgICBUYWIgMiBjb250ZW50XG4gICAgICAgICAgICAgICAgICAgJmx0Oy9wJmd0O1xuICAgICAgICAgICAgICAgICAmbHQ7L3RhYiZndDtcbiAgICAgICAgICAgICAgICAgJmx0O3RhYiBsYWJlbD1cIlRhYiAzXCIgOmlzLWRpc2FibGVkPVwidHJ1ZVwiJmd0O1xuICAgICAgICAgICAgICAgICAgICZsdDtwJmd0O1xuICAgICAgICAgICAgICAgICAgICAgVGFiIDMgY29udGVudFxuICAgICAgICAgICAgICAgICAgICZsdDsvcCZndDtcbiAgICAgICAgICAgICAgICAgJmx0Oy90YWImZ3Q7XG4gICAgICAgICAgICAgICAmbHQ7L3RhYnMmZ3Q7XG4gICAgICAgICAgICAgPC9jb2RlPlxuICAgICAgICAgICA8L3ByZT5cbiAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJPC9oMz5cbiAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuICAgICAgPC9kaXY+XG5cbiAgIDwvZGl2PlxuICA8L3NlY3Rpb24+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuaW1wb3J0IEFwaVRhYmxlIGZyb20gJy4uL2NvbXBvbmVudHMvYXBpLXRhYmxlLnZ1ZSc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIGNvbXBvbmVudHM6IHtcbiAgICBBcGlUYWJsZVxuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhcGlJdGVtczogW3tcbiAgICAgICAgbmFtZTogJ2xhYmVsJyxcbiAgICAgICAgdHlwZTogJ1N0cmluZycsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAnVGhlIGxhYmxlIG9mIHRoZSB0YWInXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdpc0Rpc2FibGVkJyxcbiAgICAgICAgdHlwZTogJ0Jvb2xlYW4nLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgICAgIGRlc2M6ICdJcyB0aGUgdGFiIGRpc2FibGVkIG9yIG5vdC4gV2hlbiBzZXQgdG8gdHJ1ZSwgdGhlIHRhYiBpcyBub3QgY2xpY2thYmxlLidcbiAgICAgIH1dXG4gICAgfTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogdGFicy1wYWdlLnZ1ZT80OTE2OTBkMVxuICoqLyIsIjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL2NvbXBvbmVudHMvdWkvaWNvbic7XG4gICAgQGltcG9ydCAnLi4vLi4vdHJhbnNpdGlvbnMvZmFkZS5zY3NzJztcbiAgICBAaW1wb3J0ICcuL2FsZXJ0LnNjc3MnO1xuPC9zdHlsZT5cblxuPHRlbXBsYXRlIHNyYz1cIi4vYWxlcnQuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5leHBvcnQgZGVmYXVsdCB7XG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmlzaWJsZTogdHJ1ZVxuICAgIH07XG4gIH0sXG4gIHByb3BzOiB7XG4gICAgdHlwZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9LFxuICAgIGRpc21pc3NpYmxlOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogdHJ1ZVxuICAgIH0sXG4gICAgdGltZW91dDoge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogLTFcbiAgICB9LFxuICAgIG9uQ2xvc2VkOiB7XG4gICAgICB0eXBlOiBGdW5jdGlvblxuICAgIH1cbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIGRpc21pc3MoKSB7XG4gICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICghIXRoaXMub25DbG9zZWQpIHtcbiAgICAgICAgICAgIHRoaXMub25DbG9zZWQuYXBwbHkodGhpcyk7XG4gICAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICByZWFkeSgpIHtcbiAgICBpZiAodGhpcy50aW1lb3V0ID49IDApIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmRpc21pc3MoKTtcbiAgICAgIH0sIHRoaXMudGltZW91dCk7XG4gICAgfVxuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBpbmRleC52dWU/NDk5ZmJlYWZcbiAqKi8iLCI8c3R5bGUgbGFuZz1cInNhc3NcIj5cbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9jb21wb25lbnRzL3VpL2ljb24nO1xuICAgIEBpbXBvcnQgJy4vY29sbGFwc2FibGUtcGFuZWwuc2Nzcyc7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9jb2xsYXBzYWJsZS1wYW5lbC5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgcHJvcHM6IHtcbiAgICBpc09wZW46IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZVxuICAgIH0sXG4gICAgbGFiZWw6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfVxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgdG9nZ2xlT3BlbigkZXZlbnQpIHtcbiAgICAgIHRoaXMuaXNPcGVuID0gIXRoaXMuaXNPcGVuO1xuICAgIH1cbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogaW5kZXgudnVlPzA1YzIyODcwXG4gKiovIiwiXG48c3R5bGUgbGFuZz1cInNhc3NcIj5cbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuICAgIEBpbXBvcnQgJy4vbGVnYWwtY29udGFpbmVyLnNjc3MnO1xuPC9zdHlsZT5cblxuPHRlbXBsYXRlIHNyYz1cIi4vbGVnYWwtY29udGFpbmVyLmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuIC8qXG4gICogQVBJOiA8bGVnYWwtY29udGFpbmVyPjwvbGVnYWwtY29udGFpbmVyPlxuICovXG5cbmltcG9ydCBtaXhpbnMgZnJvbSAnLi4vLi4vbWl4aW5zJztcbmltcG9ydCBmaW5kSW5kZXggZnJvbSAnbG9kYXNoL2ZpbmRJbmRleCc7XG5pbXBvcnQgZGVib3VuY2UgZnJvbSAnbG9kYXNoL2RlYm91bmNlJztcbmltcG9ydCBzZXRGb2N1cyBmcm9tICcuLi8uLi9kaXJlY3RpdmVzL3NldC1mb2N1cyc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbWl4aW5zLFxuICBkaXJlY3RpdmVzOiB7XG4gICAgc2V0Rm9jdXNcbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaW5kZXhlZExlZ2FsczogW10sXG4gICAgICBub25JbmRleGVkTGVnYWxzOiBbXSxcbiAgICAgIGFwaUxhbmc6IG51bGwsXG4gICAgICBhcGlSZWdpb246IG51bGxcbiAgICB9O1xuICB9LFxuICBtZXRob2RzOiB7XG4gICAgZmV0Y2hMZWdhbHMoa2V5cykge1xuICAgICAgcmV0dXJuIGZldGNoKGBcbiAgICAgICAgICAke3RoaXMuJHJvb3QubGlnZXJFbmRQb2ludH0/bGFuZz0ke3RoaXMuYXBpTGFuZ30mcmVnaW9uPSR7dGhpcy5hcGlSZWdpb259Jmh0bWw9dHJ1ZVxuICAgICAgICBgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICBhcHBsaWNhdGlvbktleTogdGhpcy4kcm9vdC5saWdlckFwcGxpY2F0aW9uS2V5XG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBrZXlzOiBrZXlzXG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFwcGVuZFJlc3BvbnNlVG9MZWdhbENvbnRhaW5lcih0eXBlLCBkYXRhKSB7XG4gICAgICBsZXQgcHJvY2VzcyA9ICh0YXJnZXQsIGRhdGFBcnkpID0+IHtcbiAgICAgICAgZGF0YUFyeS5mb3JFYWNoKGxlZ2FsUmVzcG9uc2UgPT4ge1xuICAgICAgICAgIGxldCBpbmRleCA9IHRhcmdldC5maW5kSW5kZXgobCA9PiBsLmtleSA9PT0gbGVnYWxSZXNwb25zZS5rZXkpO1xuICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICB0YXJnZXQuJHNldChpbmRleCwge1xuICAgICAgICAgICAgICBjb250ZW50OiBsZWdhbFJlc3BvbnNlLmNvbnRlbnQsXG4gICAgICAgICAgICAgIGtleTogbGVnYWxSZXNwb25zZS5rZXlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgaWYgKHR5cGUgPT09ICdpbmRleGVkJykge1xuICAgICAgICBwcm9jZXNzKHRoaXMuaW5kZXhlZExlZ2FscywgZGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9jZXNzKHRoaXMubm9uSW5kZXhlZExlZ2FscywgZGF0YSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBnZXRMZWdhbHM6IChmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBkZWJvdW5jZS5jYWxsKHRoaXMsIGZ1bmN0aW9uKCkge1xuICAgICAgICBsZXQgaW5kZXhlZEtleXMgPSB0aGlzLmluZGV4ZWRMZWdhbHMubWFwKGxlZ2FsID0+IGxlZ2FsLmtleSk7XG4gICAgICAgIGxldCBub25JbmRleGVkS2V5cyA9IHRoaXMubm9uSW5kZXhlZExlZ2Fscy5tYXAobGVnYWwgPT4gbGVnYWwua2V5KTtcblxuICAgICAgICBpZiAoaW5kZXhlZEtleXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuZmV0Y2hMZWdhbHMoaW5kZXhlZEtleXMpXG4gICAgICAgICAgLnRoZW4odGhpcy5wYXJzZUpTT04pXG4gICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFwcGVuZFJlc3BvbnNlVG9MZWdhbENvbnRhaW5lcignaW5kZXhlZCcsIGRhdGEpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub25JbmRleGVkS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5mZXRjaExlZ2Fscyhub25JbmRleGVkS2V5cylcbiAgICAgICAgICAudGhlbih0aGlzLnBhcnNlSlNPTilcbiAgICAgICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kUmVzcG9uc2VUb0xlZ2FsQ29udGFpbmVyKCdub25JbmRleGVkJywgZGF0YSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sIDEwKTtcbiAgICB9KSgpXG4gIH0sXG4gIGV2ZW50czoge1xuICAgICdsZWdhbDo6Y2xpY2snKGxlZ2FsS2V5KSB7XG4gICAgICBsZXQgdGFyZ2V0TGVnYWxJbmRleCA9IHRoaXMuaW5kZXhlZExlZ2Fscy5maW5kSW5kZXgobCA9PiBsLmtleSA9PT0gbGVnYWxLZXkpO1xuICAgICAgaWYgKHRhcmdldExlZ2FsSW5kZXggPiAtMSkge1xuICAgICAgICB0aGlzLmluZGV4ZWRMZWdhbHMuZm9yRWFjaCgobCwgaSkgPT4ge1xuICAgICAgICAgIGlmIChpICE9PSB0YXJnZXRMZWdhbEluZGV4KSB7XG4gICAgICAgICAgICBsLmlzU2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbmRleGVkTGVnYWxzXG4gICAgICAgICAgICAuJHNldChcbiAgICAgICAgICAgICAgaSxcbiAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICAgICAgICB7fSxcbiAgICAgICAgICAgICAgICB0aGlzLmluZGV4ZWRMZWdhbHNbaV0sXG4gICAgICAgICAgICAgICAgeyBpc1NlbGVjdGVkOiB0cnVlIH1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgJ2xlZ2FsOjppbml0JyhsZWdhbEluaXREZXRhaWwpIHtcbiAgICAgIHRoaXMuYXBpTGFuZyA9IGxlZ2FsSW5pdERldGFpbC5sYW5nO1xuICAgICAgdGhpcy5hcGlSZWdpb24gPSBsZWdhbEluaXREZXRhaWwucmVnaW9uO1xuICAgICAgLy8gY2hlY2sgaWYgbG9hZGVkIGFscmVhZHlcbiAgICAgIGxldCBjb250YWluZXJSZWYgPSBsZWdhbEluaXREZXRhaWwuaXNOb25JbmRleGVkID8gdGhpcy5ub25JbmRleGVkTGVnYWxzIDogdGhpcy5pbmRleGVkTGVnYWxzO1xuICAgICAgbGV0IGluZGV4ID0gZmluZEluZGV4KGNvbnRhaW5lclJlZiwgbGVnYWwgPT4gbGVnYWwua2V5ID09PSBsZWdhbEluaXREZXRhaWwua2V5KTtcbiAgICAgIC8vIGlmIG5vdCBmb3VuZFxuICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICBpbmRleCA9IGNvbnRhaW5lclJlZi5wdXNoKGxlZ2FsSW5pdERldGFpbCkgLSAxO1xuICAgICAgICB0aGlzLmdldExlZ2FscygpO1xuICAgICAgfVxuICAgICAgaWYgKCFsZWdhbEluaXREZXRhaWwuaXNOb25JbmRleGVkKSB7XG4gICAgICAgIHRoaXMucm9vdEJyb2FkY2FzdCgnbGVnYWw6OnVkcGF0ZScsIHtcbiAgICAgICAgICBrZXk6IGxlZ2FsSW5pdERldGFpbC5rZXksXG4gICAgICAgICAgaXNOb25JbmRleGVkOiBsZWdhbEluaXREZXRhaWwuaXNOb25JbmRleGVkLFxuICAgICAgICAgIGluZGV4OiBpbmRleFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGxlZ2FsLWNvbnRhaW5lci52dWU/YTUxZWUyZDZcbiAqKi8iLCI8c3R5bGUgbGFuZz1cInNhc3NcIj5cbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuICAgIEBpbXBvcnQgJy4vbGVnYWwtY291bnRlci5zY3NzJztcbjwvc3R5bGU+XG5cbjx0ZW1wbGF0ZSBzcmM9XCIuL2xlZ2FsLWNvdW50ZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG4vKlxuICogQVBJOiA8bGVnYWwtY291bnRlclxuICogICAgICAgIGxlZ2FsLWtleT1cIihTdHJpbmcpIGtleVwiXG4gKiAgICAgICAgbGVnYWwtbGFuZz1cIihTdHJpbmcpIGxhbmdcIlxuICogICAgICAgIGxlZ2FsLXJlZ2lvbj1cIihTdHJpbmcpIHJlZ2lvblwiXG4gKiAgICAgICAgaXMtbm9uLWluZGV4ZWQ9XCIoQm9vbGVhbikgaXNOb25JbmRleGVkXCJcbiAqICAgICAgPjwvbGVnYWwtY291bnRlcj5cbiovXG5cbmltcG9ydCBtaXhpbnMgZnJvbSAnLi4vLi4vbWl4aW5zJztcbmltcG9ydCBkZWZlciBmcm9tICdsb2Rhc2gvZGVmZXInO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG1peGluczogbWl4aW5zLFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBsZWdhbENvdW50ZXI6IG51bGxcbiAgICB9O1xuICB9LFxuICBwcm9wczoge1xuICAgIGxlZ2FsS2V5OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH0sXG4gICAgaXNOb25JbmRleGVkOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogZmFsc2VcbiAgICB9LFxuICAgIGxlZ2FsTGFuZzoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9LFxuICAgIGxlZ2FsUmVnaW9uOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH1cbiAgfSxcbiAgZXZlbnRzOiB7XG4gICAgJ2xlZ2FsOjp1ZHBhdGUnKHVwZGF0ZURldGFpbCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNOb25JbmRleGVkICYmIHVwZGF0ZURldGFpbC5rZXkgPT09IHRoaXMubGVnYWxLZXkpIHtcbiAgICAgICAgICB0aGlzLmxlZ2FsQ291bnRlciA9IHVwZGF0ZURldGFpbC5pbmRleCArIDE7XG4gICAgICAgIH1cbiAgICB9XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBjbGlja0hhbmRsZXIoKSB7XG4gICAgICB0aGlzLnJvb3RCcm9hZGNhc3QoJ2xlZ2FsOjpjbGljaycsIHRoaXMubGVnYWxLZXkpO1xuICAgIH1cbiAgfSxcbiAgYmVmb3JlQ29tcGlsZSgpIHtcbiAgfSxcbiAgcmVhZHkoKSB7XG4gICAgZGVmZXIoKCkgPT4ge1xuICAgICAgdGhpcy5yb290QnJvYWRjYXN0KCdsZWdhbDo6aW5pdCcsIHtcbiAgICAgICAga2V5OiB0aGlzLmxlZ2FsS2V5LFxuICAgICAgICBsYW5nOiB0aGlzLmxlZ2FsTGFuZyxcbiAgICAgICAgcmVnaW9uOiB0aGlzLmxlZ2FsUmVnaW9uLFxuICAgICAgICBpc05vbkluZGV4ZWQ6IHRoaXMuaXNOb25JbmRleGVkXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogbGVnYWwtY291bnRlci52dWU/NGZlMGRjOGVcbiAqKi8iLCI8c3R5bGUgbGFuZz1cInNhc3NcIj5cbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuICAgIEBpbXBvcnQgJy4vb3ZlcmxheS1jb250YWluZXIuc2Nzcyc7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9vdmVybGF5LWNvbnRhaW5lci5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbi8qXG4qIEV4OiA8b3ZlcmxheS1jb250YWluZXIgaXMtdmlzaWJsZT1cIihCb29sZWFuKSBmYWxzZVwiPlxuICAgICAgPC9vdmVybGF5LWNvbnRhaW5lcj5cbiovXG5jb25zdCBFU0MgPSAyNztcbmV4cG9ydCBkZWZhdWx0IHtcbiAgcHJvcHM6IHtcbiAgICBpc1Zpc2libGU6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZVxuICAgIH1cbiAgfSxcbiAgd2F0Y2g6IHtcbiAgICBpc1Zpc2libGUoaXNWaXNpYmxlKSB7XG4gICAgICBsZXQgZWwgPSB3aW5kb3cuZG9jdW1lbnQuYm9keTtcbiAgICAgIGxldCBjbGFzc05hbWUgPSAnbm8tc2Nyb2xsJztcbiAgICAgIGlmIChpc1Zpc2libGUpIHtcbiAgICAgICAgaWYgKCEhZWwuY2xhc3NMaXN0KSB7XG4gICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsLmNsYXNzTmFtZSArPSAnICcgKyBjbGFzc05hbWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChlbC5jbGFzc0xpc3QpIHtcbiAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWwuY2xhc3NOYW1lID0gZWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzTmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUmVnRXhwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyhefFxcXFxiKScgKyBjbGFzc05hbWUuc3BsaXQoJyAnKS5qb2luKCd8JykgKyAnKFxcXFxifCQpJywgJ2dpJyksICcgJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBldmVudHM6IHtcbiAgICAnb3ZlcmxheUNvbnRhaW5lcjo6b3BlbicoKSB7XG4gICAgICB0aGlzLmlzVmlzaWJsZSA9IHRydWU7XG4gICAgfSxcbiAgICAnb3ZlcmxheUNvbnRhaW5lcjo6Y2xvc2UnKCkge1xuICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcbiAgICB9XG4gICAgfSxcbiAgcmVhZHkoKSB7XG4gICAgd2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgICBldnQgPSBldnQgfHwgd2luZG93LmV2ZW50O1xuICAgICAgaWYgKGV2dC5rZXlDb2RlID09PSBFU0MpIHtcbiAgICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogb3ZlcmxheS1jb250YWluZXIudnVlPzNmYzIzMDU4XG4gKiovIiwiPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcbiAgICBAaW1wb3J0ICcuL292ZXJsYXkuc2Nzcyc7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9vdmVybGF5Lmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuLypcbiAqIEV4OiA8b3ZlcmxheSBvdmVybGF5LWtleT1cIihTdHJpbmcpIGtleVwiPlxuICogICAgICAgIEFueSBjb250ZW50XG4gKiAgICAgIDwvb3ZlcmxheT5cbiovXG5leHBvcnQgZGVmYXVsdCB7XG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmlzaWJsZTogZmFsc2VcbiAgICB9O1xuICB9LFxuICBwcm9wczoge1xuICAgIG92ZXJsYXlLZXk6IHtcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH1cbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIGNsb3NlT3ZlcmxheSgpIHtcbiAgICAgICAgdGhpcy4kZGlzcGF0Y2goJ292ZXJsYXlDb250YWluZXI6OmNsb3NlJyk7XG4gICAgfVxuICB9LFxuICBldmVudHM6IHtcbiAgICAnb3ZlcmxheTo6b3Blbicob3ZlcmxheUtleSkge1xuICAgICAgaWYgKG92ZXJsYXlLZXkgPT09IHRoaXMub3ZlcmxheUtleSkge1xuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IHRydWU7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG4gICAgfVxuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBvdmVybGF5LnZ1ZT8xZjM3ZmQ0YVxuICoqLyIsIjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL2NvbXBvbmVudHMvdWkvaWNvbic7XG4gICAgQGltcG9ydCAnLi9zdGVwLXRyYWNrZXIuc2Nzcyc7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9zdGVwLXRyYWNrZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5leHBvcnQgZGVmYXVsdCB7XG4gIHByb3BzOiB7XG4gICAgY29uZmlnOiB7XG4gICAgICB0eXBlOiBPYmplY3RcbiAgICB9LFxuICAgIGN1cnJlbnRTdGVwOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBkZWZhdWx0OiAwXG4gICAgfSxcbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIGNsaWNrSGFuZGxlcigkZXZlbnQsIHN0ZXAsIGluZGV4KSB7XG4gICAgICBpZiAoISFzdGVwLm9uQ2xpY2tIYW5kbGVyKSB7XG4gICAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50U3RlcCA+IGluZGV4KSB7XG4gICAgICAgICAgc3RlcC5vbkNsaWNrSGFuZGxlcigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBpbmRleC52dWU/MzVjMDViZGJcbiAqKi8iLCI8dGVtcGxhdGUgc3JjPVwiLi90YWIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5leHBvcnQgZGVmYXVsdCB7XG4gIHByb3BzOiB7XG4gICAgbGFiZWw6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICB9LFxuICAgIGlzRGlzYWJsZWQ6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB9LFxuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0YWJJbmRleDogMCxcbiAgICAgIGlzVmlzaWJsZTogZmFsc2UsXG4gICAgfTtcbiAgfSxcbiAgY29tcHV0ZWQ6IHtcbiAgICBpc1Zpc2libGUoKSB7XG4gICAgICByZXR1cm4gKHRoaXMuJHBhcmVudC5hY3RpdmVUYWJJbmRleCA9PT0gdGhpcy50YWJJbmRleCk7XG4gICAgfSxcbiAgfSxcbiAgY3JlYXRlZCgpIHtcbiAgICB0aGlzLiRwYXJlbnQudGFicy5wdXNoKHtcbiAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgaXNEaXNhYmxlZDogdGhpcy5pc0Rpc2FibGVkLFxuICAgIH0pO1xuICB9LFxuICByZWFkeSgpIHtcbiAgICB0aGlzLiRwYXJlbnQuJGNoaWxkcmVuLmZvckVhY2goKGMsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoYy4kZWwgPT09IHRoaXMuJGVsKSB7XG4gICAgICAgIHRoaXMudGFiSW5kZXggPSBpbmRleDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgYmVmb3JlRGVzdHJveSgpIHtcbiAgICB0aGlzLiRwYXJlbnQudGFicy5zcGxpY2UodGhpcy50YWJJbmRleCwgMSk7XG4gIH0sXG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB0YWIudnVlPzBjOGMyMWJmXG4gKiovIiwiPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcbiAgICBAaW1wb3J0ICcuL3RhYnMuc2Nzcyc7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi90YWJzLmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuLypcbiAqICBFeDogPHRhYnMgYWN0aXZlLXRhYi1pbmRleD1cIihJbnRlZ2VyKSAwXCI+XG4gKiAgICAgICAgPHRhYiBsYWJlbD1cIlRhYiBBXCI+XG4gKiAgICAgICAgICBBbnkgY29udGVudFxuICogICAgICAgIDwvdGFiPlxuICogICAgICAgIDx0YWIgbGFiZWw9XCJUYWIgQlwiIGlzLWRpc2FibGVkPVwiKEJvb2xlYW4pIGZhbHNlXCI+XG4gKiAgICAgICAgICBBbnkgY29udGVudFxuICogICAgICAgIDwvdGFiPlxuICogICAgICAgPHRhYnM+XG4qL1xuZXhwb3J0IGRlZmF1bHQge1xuICBwcm9wczoge1xuICAgIGFjdGl2ZVRhYkluZGV4OiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBkZWZhdWx0OiAwXG4gICAgfVxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgaXNBY3RpdmUoaW5kZXgpIHtcbiAgICAgIHJldHVybiBhY3RpdmVUYWJJbmRleCA9PT0gaW5kZXg7XG4gICAgfVxuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0YWJzOiBbXVxuICAgIH07XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICAgIGhhbmRsZVRhYkxpc3RDbGljayhpbmRleCwgdGFiKSB7XG4gICAgICAgICAgaWYgKCF0YWIuaXNEaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVUYWJJbmRleCA9IGluZGV4O1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogdGFicy52dWU/ZWM2NjI3YzRcbiAqKi8iLCJpbXBvcnQgSW5kZXggZnJvbSAnLi92aWV3cy9pbmRleC52dWUnO1xuaW1wb3J0IFN0ZXBUcmFja2VyUGFnZSBmcm9tICcuL3ZpZXdzL3N0ZXAtdHJhY2tlci1wYWdlLnZ1ZSc7XG5pbXBvcnQgVGFic1BhZ2UgZnJvbSAnLi92aWV3cy90YWJzLXBhZ2UudnVlJztcbmltcG9ydCBMZWdhbFBhZ2UgZnJvbSAnLi92aWV3cy9sZWdhbC1wYWdlLnZ1ZSc7XG5pbXBvcnQgT3ZlcmxheVBhZ2UgZnJvbSAnLi92aWV3cy9vdmVybGF5LXBhZ2UudnVlJztcbmltcG9ydCBDb2xsYXBzYWJsZVBhbmVsUGFnZSBmcm9tICcuL3ZpZXdzL2NvbGxhcHNhYmxlLXBhbmVsLXBhZ2UudnVlJztcbmltcG9ydCBBbGVydFBhZ2UgZnJvbSAnLi92aWV3cy9hbGVydC1wYWdlLnZ1ZSc7XG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICAnLyc6IHtcbiAgICBjb21wb25lbnQ6IEluZGV4XG4gIH0sXG4gICcvYWxlcnQnOiB7XG4gICAgY29tcG9uZW50OiB7XG4gICAgICB0ZW1wbGF0ZTogJzxhbGVydC1wYWdlPjwvYWxlcnQtcGFnZT4nLFxuICAgICAgY29tcG9uZW50czogeyBBbGVydFBhZ2UgfVxuICAgIH1cbiAgfSxcbiAgJy9zdGVwLXRyYWNrZXInOiB7XG4gICAgY29tcG9uZW50OiB7XG4gICAgICB0ZW1wbGF0ZTogJzxzdGVwLXRyYWNrZXItcGFnZT48L3N0ZXAtdHJhY2tlci1wYWdlPicsXG4gICAgICBjb21wb25lbnRzOiB7IFN0ZXBUcmFja2VyUGFnZSB9XG4gICAgfVxuICB9LFxuICAnL3RhYnMnOiB7XG4gICAgY29tcG9uZW50OiB7XG4gICAgICB0ZW1wbGF0ZTogJzx0YWJzLXBhZ2U+PC90YWJzLXBhZ2U+JyxcbiAgICAgIGNvbXBvbmVudHM6IHsgVGFic1BhZ2UgfVxuICAgIH1cbiAgfSxcbiAgJy9sZWdhbCc6IHtcbiAgICBjb21wb25lbnQ6IHtcbiAgICAgIHRlbXBsYXRlOiAnPGxlZ2FsLXBhZ2U+PC9sZWdhbC1wYWdlPicsXG4gICAgICBjb21wb25lbnRzOiB7IExlZ2FsUGFnZSB9XG4gICAgfVxuICB9LFxuICAnL292ZXJsYXknOiB7XG4gICAgY29tcG9uZW50OiB7XG4gICAgICB0ZW1wbGF0ZTogJzxvdmVybGF5LXBhZ2U+PC9vdmVybGF5LXBhZ2U+JyxcbiAgICAgIGNvbXBvbmVudHM6IHsgT3ZlcmxheVBhZ2UgfVxuICAgIH1cbiAgfSxcbiAgJy9jb2xsYXBzYWJsZS1wYW5lbCc6IHtcbiAgICBjb21wb25lbnQ6IHtcbiAgICAgIHRlbXBsYXRlOiAnPGNvbGxhcHNhYmxlLXBhbmVsLXBhZ2U+PC9jb2xsYXBzYWJsZS1wYW5lbC1wYWdlPicsXG4gICAgICBjb21wb25lbnRzOiB7IENvbGxhcHNhYmxlUGFuZWxQYWdlIH1cbiAgICB9XG4gIH1cbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2Rldi9zcmMvcm91dGVzLmpzXG4gKiovIiwiLypcbiAgQGRlc2MgQWRkIGJlaGF2aW9yIHRvIGFueSBlbGVtZW50LiBXaGVuIGNsaWNrZWQsIGl0IHdpbGwgb3BlbiB0aGUgY29ycmVzcG9uZGluZyBvdmVybGF5XG4gIEV4YW1wbGU6IDxidXR0b24gb3ZlcmxheS1vcGVuZXI9XCJteS1vdmVybGF5XCI+PC9idXR0b24+XG4qL1xuZXhwb3J0IGRlZmF1bHQge1xuICBpc0xpdGVyYWw6IHRydWUsXG4gIGV2ZW50SGFuZGxlcihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMudm0uJHJvb3QuJGJyb2FkY2FzdCgnb3ZlcmxheTo6b3BlbicsIHRoaXMuZXhwcmVzc2lvbik7XG4gICAgdGhpcy52bS4kcm9vdC4kYnJvYWRjYXN0KCdvdmVybGF5Q29udGFpbmVyOjpvcGVuJyk7XG4gIH0sXG4gIGJpbmQoKSB7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZXZlbnRIYW5kbGVyLmJpbmQodGhpcykpO1xuICB9LFxuICB1bmJpbmQoKSB7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZXZlbnRIYW5kbGVyLmJpbmQodGhpcykpO1xuICB9LFxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2RpcmVjdGl2ZXMvb3ZlcmxheS1vcGVuZXIuanNcbiAqKi8iLCJpbXBvcnQgb3ZlcmxheU9wZW5lciBmcm9tICcuL2RpcmVjdGl2ZXMvb3ZlcmxheS1vcGVuZXInO1xuaW1wb3J0IHNldEZvY3VzIGZyb20gJy4vZGlyZWN0aXZlcy9zZXQtZm9jdXMnO1xuaW1wb3J0IFN0ZXBUcmFja2VyIGZyb20gJy4vY29tcG9uZW50cy9zdGVwLXRyYWNrZXIvaW5kZXgudnVlJztcbmltcG9ydCBPdmVybGF5Q29udGFpbmVyIGZyb20gJy4vY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXktY29udGFpbmVyLnZ1ZSc7XG5pbXBvcnQgT3ZlcmxheSBmcm9tICcuL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LnZ1ZSc7XG5pbXBvcnQgTGVnYWxDb3VudGVyIGZyb20gJy4vY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb3VudGVyLnZ1ZSc7XG5pbXBvcnQgTGVnYWxDb250YWluZXIgZnJvbSAnLi9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci52dWUnO1xuaW1wb3J0IFRhYnMgZnJvbSAnLi9jb21wb25lbnRzL3RhYi90YWJzLnZ1ZSc7XG5pbXBvcnQgVGFiIGZyb20gJy4vY29tcG9uZW50cy90YWIvdGFiLnZ1ZSc7XG5pbXBvcnQgQ29sbGFwc2FibGVQYW5lbCBmcm9tICcuL2NvbXBvbmVudHMvY29sbGFwc2FibGUtcGFuZWwvaW5kZXgudnVlJztcbmltcG9ydCBBbGVydCBmcm9tICcuL2NvbXBvbmVudHMvYWxlcnQvaW5kZXgudnVlJztcblxuXG5sZXQgY29tcG9uZW50cyA9IHtcbiAgU3RlcFRyYWNrZXIsXG4gIE92ZXJsYXlDb250YWluZXIsXG4gIE92ZXJsYXksXG4gIExlZ2FsQ291bnRlcixcbiAgTGVnYWxDb250YWluZXIsXG4gIFRhYnMsXG4gIFRhYixcbiAgQ29sbGFwc2FibGVQYW5lbCxcbiAgQWxlcnRcbn07XG5sZXQgZGlyZWN0aXZlcyA9IHtcbiAgb3ZlcmxheU9wZW5lcixcbiAgc2V0Rm9jdXNcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5zdGFsbChWdWUpIHtcbiAgZm9yIChsZXQgbmFtZSBpbiBjb21wb25lbnRzKSB7XG4gICAgVnVlLmNvbXBvbmVudChuYW1lLCBjb21wb25lbnRzW25hbWVdKTtcbiAgfVxuICBmb3IgKGxldCBuYW1lIGluIGRpcmVjdGl2ZXMpIHtcbiAgICBWdWUuZGlyZWN0aXZlKG5hbWUsIGRpcmVjdGl2ZXNbbmFtZV0pO1xuICB9XG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvbWFpbi5qc1xuICoqLyIsImV4cG9ydCBkZWZhdWx0IHtcbiAgbWV0aG9kczoge1xuICAgIHJvb3RCcm9hZGNhc3QoLi4uYXJncykge1xuICAgICAgdGhpcy4kYnJvYWRjYXN0LmFwcGx5KHRoaXMuJHJvb3QsIGFyZ3MpO1xuICAgIH0sXG4gIH0sXG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvbWl4aW5zL2V2ZW50cy5qc1xuICoqLyIsImV4cG9ydCBkZWZhdWx0IHtcbiAgbWV0aG9kczoge1xuICAgIHBhcnNlSlNPTihyZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9LFxuICB9LFxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL21peGlucy94aHItcmVzcG9uc2UuanNcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5oeV9jLWljb257Zm9udC1mYW1pbHk6VGVsdXMgSWNvbixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjt0ZXh0LWRlY29yYXRpb246bm9uZTt0ZXh0LXJlbmRlcmluZzpvcHRpbWl6ZUxlZ2liaWxpdHk7Y29sb3I6aW5oZXJpdDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Zm9udC1zaXplOmluaGVyaXQ7bGluZS1oZWlnaHQ6aW5oZXJpdH0uaHlfYy1pY29uX19zcXVhcmV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjIuNXJlbTtsaW5lLWhlaWdodDozcmVtO3dpZHRoOjNyZW07aGVpZ2h0OjNyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tMnh7Zm9udC1zaXplOjJlbX0uaHlfYy1pY29uLS0zeHtmb250LXNpemU6M2VtfS5oeV9jLWljb24tLTR4e2ZvbnQtc2l6ZTo0ZW19Lmh5X2MtaWNvbl9fc3R5bGVndWlkZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6MnJlbTtsaW5lLWhlaWdodDo0cmVtO3dpZHRoOjRyZW07aGVpZ2h0OjRyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXRoaWNrLW91dGxpbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uaHlfYy1pY29uLS1jaXJjbGUtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA1XFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDZcXFwifS5oeV9jLWljb24tLXRlbHVzLWxvZ286YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA5XFxcIn0uaHlfYy1pY29uLS1iYXItY2hhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEwXFxcIn0uaHlfYy1pY29uLS1waWN0dXJlLWZyYW1lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMVxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEyXFxcIn0uaHlfYy1pY29uLS1wYXBlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTNcXFwifS5oeV9jLWljb24tLWZvbGRlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTRcXFwifS5oeV9jLWljb24tLXNoYXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNVxcXCJ9Lmh5X2MtaWNvbi0tbWFnbmlmeS1nbGFzczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTZcXFwifS5oeV9jLWljb24tLXdhcm5pbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE4XFxcIn0uaHlfYy1pY29uLS1zdGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOVxcXCJ9Lmh5X2MtaWNvbi0tc3RhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjBcXFwifS5oeV9jLWljb24tLWhlYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMVxcXCJ9Lmh5X2MtaWNvbi0tbGlmZXNhdmVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMlxcXCJ9Lmh5X2MtaWNvbi0taGFtYnVyZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNFxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI1XFxcIn0uaHlfYy1pY29uLS1ncmlkLWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI2XFxcIn0uaHlfYy1pY29uLS1saWdodGJ1bGI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI3XFxcIn0uaHlfYy1pY29uLS1zcGVlZG9tZXRlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjhcXFwifS5oeV9jLWljb24tLWFkZC1yZW1vdmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI5XFxcIn0uaHlfYy1pY29uLS1jYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMFxcXCJ9Lmh5X2MtaWNvbi0tdHdpdHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzFcXFwifS5oeV9jLWljb24tLWZhY2Vib29rOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMlxcXCJ9Lmh5X2MtaWNvbi0teW91dHViZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzNcXFwifS5oeV9jLWljb24tLWdvb2dsZS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNFxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzVcXFwifS5oeV9jLWljb24tLXBsYXktYnV0dG9uLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNlxcXCJ9Lmh5X2MtaWNvbi0tdmlkZW8taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM3XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM5XFxcIn0uaHlfYy1pY29uLS1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDBcXFwifS5oeV9jLWljb24tLWNsb2NrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MVxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDJcXFwifS5oeV9jLWljb24tLXRhYmxldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDNcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDRcXFwifS5oeV9jLWljb24tLW1vdXNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NVxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ2XFxcIn0uaHlfYy1pY29uLS1wYXBlci1ub3Rlcy1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDdcXFwifS5oeV9jLWljb24tLXR2OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OFxcXCJ9Lmh5X2MtaWNvbi0tZmlsbTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDlcXFwifS5oeV9jLWljb24tLWVudmVsb3BlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MFxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MVxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTJcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUzXFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU1XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTZcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTdcXFwifS5oeV9jLWljb24tLXVzZXJzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1OVxcXCJ9Lmh5X2MtaWNvbi0tdXNlcnMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjBcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYyXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWJveGVkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2M1xcXCJ9Lmh5X2MtaWNvbi0tZ2VhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjRcXFwifS5oeV9jLWljb24tLWdlYXItY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjVcXFwifS5oeV9jLWljb24tLWdlYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY2XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OFxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jay1pbnZlcmV0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY5XFxcIn0uaHlfYy1pY29uLS1zdGFja2VkLXBhcGVycy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzFcXFwifS5oeV9jLWljb24tLW11c2ljLW5vdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcyXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3M1xcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NVxcXCJ9Lmh5X2MtaWNvbi0tbW91c2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc2XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzdcXFwifS5oeV9jLWljb24tLXBhcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OFxcXCJ9Lmh5X2MtaWNvbi0tdHYtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc5XFxcIn0uaHlfYy1pY29uLS1maWxtLWNsYXBwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgwXFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODFcXFwifS5oeV9jLWljb24tLXBob25lLWhhbmRzZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgyXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgzXFxcIn0uaHlfYy1pY29uLS1ob21lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NVxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODZcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTNcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTVcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24tY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTZcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTdcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDBcXFwifS5oeV9jLWljb24tLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAyXFxcIn0uaHlfYy1pY29uLS14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNFxcXCJ9Lmh5X2MtaWNvbi0teC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNVxcXCJ9Lmh5X2MtaWNvbi0teC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDZcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDhcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOVxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTExXFxcIn0uaHlfYy1pY29uLS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMlxcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExM1xcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTRcXFwifS5oeV9jLWljb24tLW1pbnVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNVxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTZcXFwifS5oeV9jLWljb24tLW1pbnVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExN1xcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1idWJibGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE5XFxcIn0uaHlfYy1pY29uLS1jaGF0LWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIwXFxcIn0uaHlfYy1pY29uLS1jaGF0LWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMlxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjNcXFwifS5oeV9jLWljb24tLXNpbS1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNVxcXCJ9Lmh5X2MtaWNvbi0tY2FsY3VsYXRvcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjZcXFwifS5oeV9jLWljb24tLWJsdWV0b290aC1oZWFkc2V0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyN1xcXCJ9Lmh5X2MtaWNvbi0tb3V0Z29pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjlcXFwifS5oeV9jLWljb24tLWluY29taW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMwXFxcIn0uaHlfYy1pY29uLS1jYXV0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzJcXFwifS5oeV9jLWljb24tLXdpZmk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMzXFxcIn0uaHlfYy1pY29uLS10aGluLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzVcXFwifS5oeV9jLWljb24tLWluZm8taW52ZXJ0ZWQ6YmVmb3JlLC5oeV9jLWljb24tLWluZm86YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM2XFxcIn0uaHlfYy1pY29uLS10cmVuZC11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzhcXFwifS5oeV9jLWljb24tLWdsb2JlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MlxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NFxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDVcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NlxcXCJ9Lmh5X2MtaWNvbi0tb3ZlcnZpZXctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ3XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1jaXJjbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ4XFxcIn0uaHlfYy1pY29uLS1wdWxzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDlcXFwifS5oeV9jLWljb24tLW1pa2UtbW9iaWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MFxcXCJ9Lmh5X2MtaWNvbi0tcmV3YXJkcy1iYWRnZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTFcXFwifS5oeV9jLWljb24tLWZpbHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTJcXFwifS5oeV9jLWljb24tLXNjaGVkdWxlLXRhbGs6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUzXFxcIn0uaHlfYy1pY29uLS13YXJuaW5nOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NVxcXCJ9Lmh5X2MtaWNvbi0tY2FydC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTZcXFwifS5oeV9jLWljb24tLWxpdmUtY2hhdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTdcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3QtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU4XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OVxcXCJ9Lmh5X2MtaWNvbi0tY2xvdWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYwXFxcIn0uaHlfYy1pY29uLS1kYXRhOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MVxcXCJ9Lmh5X2MtaWNvbi0tZGVsaXZlcnktdHJ1Y2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYyXFxcIn0uaHlfYy1pY29uLS1wcm90ZWN0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2M1xcXCJ9Lmh5X2MtaWNvbi0tY29sb3VyLXBpY2tlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjRcXFwifS5oeV9jLWljb24tLW11bHRpLWFjY291bnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY1XFxcIn0uaHlfYy1pY29uLS1hY2Nlc3Nvcmllcy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjZcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2N1xcXCJ9Lmh5X2MtaWNvbi0tZG9sbGFyLXNpZ246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY4XFxcIn0uaHlfYy1pY29uLS1saW5rLWFjY291bnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY5XFxcIn0uaHlfYy1pY29uLS1kYXRhLW1hbmFnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcwXFxcIn0uaHlfYy1pY29uLS1hY2Nlc3NvcmllczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzFcXFwifS5oeV9jLWljb24tLXRvb2xzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MlxcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTczXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzRcXFwifS5oeV9jLWljb24tLWlwLWZheDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzVcXFwifS5oeV9jLWljb24tLWlwLWZheC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzZcXFwifS5oeV9jLWljb24tLWxpbmtlZC1pbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzdcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OFxcXCJ9Lmh5X2MtaWNvbi0tbWljcm9waG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzlcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MFxcXCJ9Lmh5X2MtaWNvbi0tbmV0d29ya2luZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODFcXFwifS5oeV9jLWljb24tLWN5Y2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MlxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4M1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NFxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1hZGQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg1XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODZcXFwifS5zZ19jLWFwaS10YWJsZXt3aWR0aDoxMDAlfS5zZ19jLWFwaS10YWJsZSB0cnstd2Via2l0LWJveC1mbGV4OjE7LW1zLWZsZXg6MTtmbGV4OjF9LnNnX2MtYXBpLXRhYmxlIHRoe2JhY2tncm91bmQtY29sb3I6I2VlZX0uc2dfYy1hcGktdGFibGUgdGR7dGV4dC1hbGlnbjpjZW50ZXJ9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9kZXYvc3JjL2NvbXBvbmVudHMvYXBpLXRhYmxlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDY2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5zZ19jLW5hdntkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmZpeGVkO2xlZnQ6MDt3aWR0aDoyNXJlbTtoZWlnaHQ6MTAwJTtib3JkZXItcmlnaHQ6LjFyZW0gc29saWQgI2UyZTJlMjtwYWRkaW5nOjJyZW07b3ZlcmZsb3cteDpoaWRkZW47b3ZlcmZsb3cteTphdXRvO2JhY2tncm91bmQtY29sb3I6I2ZmZn0uc2dfYy1uYXZfX3NlY3Rpb257Zm9udC1mYW1pbHk6VGVsdXMgTWVkaXVtLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2ZvbnQtc2l6ZToxLjJyZW07Ym9yZGVyLWJvdHRvbTouMXJlbSBzb2xpZCAjZTJlMmUyO3BhZGRpbmctdG9wOjFyZW07cGFkZGluZy1ib3R0b206LjVyZW07bWFyZ2luOjFyZW0gMH0uc2dfYy1uYXZfX2xpc3QtaXRlbXtwYWRkaW5nOjVweCAwfS5zZ19jLW5hdl9fbGluazpob3Zlcntjb2xvcjojOGM2OGE2fS5zZ19jLW5hdl9fbGluay0tYWN0aXZle2NvbG9yOiM1N2E3MDh9Ym9keXtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY2Zjd9LnNnX2Mtc2l0ZV9fbWFpbnttYXJnaW4tbGVmdDoyNXJlbX0uc2dfYy1kZW1ve21hcmdpbjoyMHB4IDB9LnNnX2MtZGVtb19fY29udGFpbmVye2JhY2tncm91bmQtY29sb3I6I2ZmZjtvdmVyZmxvdzpoaWRkZW47Ym9yZGVyLXJhZGl1czo1cHg7Ym9yZGVyOjFweCBzb2xpZCAjZWVlO3BhZGRpbmc6MjVweDttYXJnaW46MjBweCAwfWNvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de2NvbG9yOiMwMDA7YmFja2dyb3VuZDpub25lO3RleHQtc2hhZG93OjAgMXB4ICNmZmY7Zm9udC1mYW1pbHk6Q29uc29sYXMsTW9uYWNvLEFuZGFsZSBNb25vLFVidW50dSBNb25vLG1vbm9zcGFjZTt0ZXh0LWFsaWduOmxlZnQ7d2hpdGUtc3BhY2U6cHJlO3dvcmQtc3BhY2luZzpub3JtYWw7d29yZC1icmVhazpub3JtYWw7d29yZC13cmFwOm5vcm1hbDtsaW5lLWhlaWdodDoxLjU7LW1vei10YWItc2l6ZTo0Oy1vLXRhYi1zaXplOjQ7dGFiLXNpemU6NDstd2Via2l0LWh5cGhlbnM6bm9uZTstbXMtaHlwaGVuczpub25lO2h5cGhlbnM6bm9uZX1jb2RlW2NsYXNzKj1sYW5ndWFnZS1dOjotbW96LXNlbGVjdGlvbixjb2RlW2NsYXNzKj1sYW5ndWFnZS1dIDo6LW1vei1zZWxlY3Rpb24scHJlW2NsYXNzKj1sYW5ndWFnZS1dOjotbW96LXNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV0gOjotbW96LXNlbGVjdGlvbnt0ZXh0LXNoYWRvdzpub25lO2JhY2tncm91bmQ6I2IzZDRmY31jb2RlW2NsYXNzKj1sYW5ndWFnZS1dOjpzZWxlY3Rpb24sY29kZVtjbGFzcyo9bGFuZ3VhZ2UtXSA6OnNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV06OnNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV0gOjpzZWxlY3Rpb257dGV4dC1zaGFkb3c6bm9uZTtiYWNrZ3JvdW5kOiNiM2Q0ZmN9QG1lZGlhIHByaW50e2NvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de3RleHQtc2hhZG93Om5vbmV9fXByZVtjbGFzcyo9bGFuZ3VhZ2UtXXtwYWRkaW5nOjFlbTttYXJnaW46LjVlbSAwO292ZXJmbG93OmF1dG99Om5vdChwcmUpPmNvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de2JhY2tncm91bmQ6I2Y1ZjJmMH06bm90KHByZSk+Y29kZVtjbGFzcyo9bGFuZ3VhZ2UtXXtwYWRkaW5nOi4xZW07Ym9yZGVyLXJhZGl1czouM2VtO3doaXRlLXNwYWNlOm5vcm1hbH0udG9rZW4uY2RhdGEsLnRva2VuLmNvbW1lbnQsLnRva2VuLmRvY3R5cGUsLnRva2VuLnByb2xvZ3tjb2xvcjojNzA4MDkwfS50b2tlbi5wdW5jdHVhdGlvbntjb2xvcjojOTk5fS5uYW1lc3BhY2V7b3BhY2l0eTouN30udG9rZW4uYm9vbGVhbiwudG9rZW4uY29uc3RhbnQsLnRva2VuLmRlbGV0ZWQsLnRva2VuLm51bWJlciwudG9rZW4ucHJvcGVydHksLnRva2VuLnN5bWJvbCwudG9rZW4udGFne2NvbG9yOiM5MDV9LnRva2VuLmF0dHItbmFtZSwudG9rZW4uYnVpbHRpbiwudG9rZW4uY2hhciwudG9rZW4uaW5zZXJ0ZWQsLnRva2VuLnNlbGVjdG9yLC50b2tlbi5zdHJpbmd7Y29sb3I6IzY5MH0ubGFuZ3VhZ2UtY3NzIC50b2tlbi5zdHJpbmcsLnN0eWxlIC50b2tlbi5zdHJpbmcsLnRva2VuLmVudGl0eSwudG9rZW4ub3BlcmF0b3IsLnRva2VuLnVybHtjb2xvcjojYTY3ZjU5O2JhY2tncm91bmQ6aHNsYSgwLDAlLDEwMCUsLjUpfS50b2tlbi5hdHJ1bGUsLnRva2VuLmF0dHItdmFsdWUsLnRva2VuLmtleXdvcmR7Y29sb3I6IzA3YX0udG9rZW4uZnVuY3Rpb257Y29sb3I6I2RkNGE2OH0udG9rZW4uaW1wb3J0YW50LC50b2tlbi5yZWdleCwudG9rZW4udmFyaWFibGV7Y29sb3I6I2U5MH0udG9rZW4uYm9sZCwudG9rZW4uaW1wb3J0YW50e2ZvbnQtd2VpZ2h0OjcwMH0udG9rZW4uaXRhbGlje2ZvbnQtc3R5bGU6aXRhbGljfS50b2tlbi5lbnRpdHl7Y3Vyc29yOmhlbHB9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDY3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5oeV9jLWljb257Zm9udC1mYW1pbHk6VGVsdXMgSWNvbixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjt0ZXh0LWRlY29yYXRpb246bm9uZTt0ZXh0LXJlbmRlcmluZzpvcHRpbWl6ZUxlZ2liaWxpdHk7Y29sb3I6aW5oZXJpdDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Zm9udC1zaXplOmluaGVyaXQ7bGluZS1oZWlnaHQ6aW5oZXJpdH0uaHlfYy1pY29uX19zcXVhcmV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjIuNXJlbTtsaW5lLWhlaWdodDozcmVtO3dpZHRoOjNyZW07aGVpZ2h0OjNyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tMnh7Zm9udC1zaXplOjJlbX0uaHlfYy1pY29uLS0zeHtmb250LXNpemU6M2VtfS5oeV9jLWljb24tLTR4e2ZvbnQtc2l6ZTo0ZW19Lmh5X2MtaWNvbl9fc3R5bGVndWlkZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6MnJlbTtsaW5lLWhlaWdodDo0cmVtO3dpZHRoOjRyZW07aGVpZ2h0OjRyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXRoaWNrLW91dGxpbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uaHlfYy1pY29uLS1jaXJjbGUtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA1XFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDZcXFwifS5oeV9jLWljb24tLXRlbHVzLWxvZ286YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA5XFxcIn0uaHlfYy1pY29uLS1iYXItY2hhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEwXFxcIn0uaHlfYy1pY29uLS1waWN0dXJlLWZyYW1lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMVxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEyXFxcIn0uaHlfYy1pY29uLS1wYXBlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTNcXFwifS5oeV9jLWljb24tLWZvbGRlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTRcXFwifS5oeV9jLWljb24tLXNoYXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNVxcXCJ9Lmh5X2MtaWNvbi0tbWFnbmlmeS1nbGFzczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTZcXFwifS5oeV9jLWljb24tLXdhcm5pbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE4XFxcIn0uaHlfYy1pY29uLS1zdGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOVxcXCJ9Lmh5X2MtaWNvbi0tc3RhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjBcXFwifS5oeV9jLWljb24tLWhlYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMVxcXCJ9Lmh5X2MtaWNvbi0tbGlmZXNhdmVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMlxcXCJ9Lmh5X2MtaWNvbi0taGFtYnVyZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNFxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI1XFxcIn0uaHlfYy1pY29uLS1ncmlkLWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI2XFxcIn0uaHlfYy1pY29uLS1saWdodGJ1bGI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI3XFxcIn0uaHlfYy1pY29uLS1zcGVlZG9tZXRlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjhcXFwifS5oeV9jLWljb24tLWFkZC1yZW1vdmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI5XFxcIn0uaHlfYy1pY29uLS1jYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMFxcXCJ9Lmh5X2MtaWNvbi0tdHdpdHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzFcXFwifS5oeV9jLWljb24tLWZhY2Vib29rOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMlxcXCJ9Lmh5X2MtaWNvbi0teW91dHViZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzNcXFwifS5oeV9jLWljb24tLWdvb2dsZS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNFxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzVcXFwifS5oeV9jLWljb24tLXBsYXktYnV0dG9uLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNlxcXCJ9Lmh5X2MtaWNvbi0tdmlkZW8taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM3XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM5XFxcIn0uaHlfYy1pY29uLS1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDBcXFwifS5oeV9jLWljb24tLWNsb2NrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MVxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDJcXFwifS5oeV9jLWljb24tLXRhYmxldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDNcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDRcXFwifS5oeV9jLWljb24tLW1vdXNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NVxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ2XFxcIn0uaHlfYy1pY29uLS1wYXBlci1ub3Rlcy1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDdcXFwifS5oeV9jLWljb24tLXR2OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OFxcXCJ9Lmh5X2MtaWNvbi0tZmlsbTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDlcXFwifS5oeV9jLWljb24tLWVudmVsb3BlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MFxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MVxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTJcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUzXFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU1XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTZcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTdcXFwifS5oeV9jLWljb24tLXVzZXJzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1OVxcXCJ9Lmh5X2MtaWNvbi0tdXNlcnMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjBcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYyXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWJveGVkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2M1xcXCJ9Lmh5X2MtaWNvbi0tZ2VhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjRcXFwifS5oeV9jLWljb24tLWdlYXItY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjVcXFwifS5oeV9jLWljb24tLWdlYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY2XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OFxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jay1pbnZlcmV0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY5XFxcIn0uaHlfYy1pY29uLS1zdGFja2VkLXBhcGVycy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzFcXFwifS5oeV9jLWljb24tLW11c2ljLW5vdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcyXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3M1xcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NVxcXCJ9Lmh5X2MtaWNvbi0tbW91c2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc2XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzdcXFwifS5oeV9jLWljb24tLXBhcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OFxcXCJ9Lmh5X2MtaWNvbi0tdHYtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc5XFxcIn0uaHlfYy1pY29uLS1maWxtLWNsYXBwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgwXFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODFcXFwifS5oeV9jLWljb24tLXBob25lLWhhbmRzZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgyXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgzXFxcIn0uaHlfYy1pY29uLS1ob21lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NVxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODZcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTNcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTVcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24tY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTZcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTdcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDBcXFwifS5oeV9jLWljb24tLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAyXFxcIn0uaHlfYy1pY29uLS14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNFxcXCJ9Lmh5X2MtaWNvbi0teC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNVxcXCJ9Lmh5X2MtaWNvbi0teC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDZcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDhcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOVxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTExXFxcIn0uaHlfYy1pY29uLS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMlxcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExM1xcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTRcXFwifS5oeV9jLWljb24tLW1pbnVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNVxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTZcXFwifS5oeV9jLWljb24tLW1pbnVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExN1xcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1idWJibGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE5XFxcIn0uaHlfYy1pY29uLS1jaGF0LWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIwXFxcIn0uaHlfYy1pY29uLS1jaGF0LWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMlxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjNcXFwifS5oeV9jLWljb24tLXNpbS1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNVxcXCJ9Lmh5X2MtaWNvbi0tY2FsY3VsYXRvcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjZcXFwifS5oeV9jLWljb24tLWJsdWV0b290aC1oZWFkc2V0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyN1xcXCJ9Lmh5X2MtaWNvbi0tb3V0Z29pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjlcXFwifS5oeV9jLWljb24tLWluY29taW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMwXFxcIn0uaHlfYy1pY29uLS1jYXV0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzJcXFwifS5oeV9jLWljb24tLXdpZmk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMzXFxcIn0uaHlfYy1pY29uLS10aGluLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzVcXFwifS5oeV9jLWljb24tLWluZm8taW52ZXJ0ZWQ6YmVmb3JlLC5oeV9jLWljb24tLWluZm86YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM2XFxcIn0uaHlfYy1pY29uLS10cmVuZC11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzhcXFwifS5oeV9jLWljb24tLWdsb2JlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MlxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NFxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDVcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NlxcXCJ9Lmh5X2MtaWNvbi0tb3ZlcnZpZXctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ3XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1jaXJjbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ4XFxcIn0uaHlfYy1pY29uLS1wdWxzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDlcXFwifS5oeV9jLWljb24tLW1pa2UtbW9iaWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MFxcXCJ9Lmh5X2MtaWNvbi0tcmV3YXJkcy1iYWRnZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTFcXFwifS5oeV9jLWljb24tLWZpbHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTJcXFwifS5oeV9jLWljb24tLXNjaGVkdWxlLXRhbGs6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUzXFxcIn0uaHlfYy1pY29uLS13YXJuaW5nOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NVxcXCJ9Lmh5X2MtaWNvbi0tY2FydC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTZcXFwifS5oeV9jLWljb24tLWxpdmUtY2hhdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTdcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3QtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU4XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OVxcXCJ9Lmh5X2MtaWNvbi0tY2xvdWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYwXFxcIn0uaHlfYy1pY29uLS1kYXRhOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MVxcXCJ9Lmh5X2MtaWNvbi0tZGVsaXZlcnktdHJ1Y2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYyXFxcIn0uaHlfYy1pY29uLS1wcm90ZWN0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2M1xcXCJ9Lmh5X2MtaWNvbi0tY29sb3VyLXBpY2tlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjRcXFwifS5oeV9jLWljb24tLW11bHRpLWFjY291bnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY1XFxcIn0uaHlfYy1pY29uLS1hY2Nlc3Nvcmllcy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjZcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2N1xcXCJ9Lmh5X2MtaWNvbi0tZG9sbGFyLXNpZ246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY4XFxcIn0uaHlfYy1pY29uLS1saW5rLWFjY291bnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY5XFxcIn0uaHlfYy1pY29uLS1kYXRhLW1hbmFnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcwXFxcIn0uaHlfYy1pY29uLS1hY2Nlc3NvcmllczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzFcXFwifS5oeV9jLWljb24tLXRvb2xzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MlxcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTczXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzRcXFwifS5oeV9jLWljb24tLWlwLWZheDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzVcXFwifS5oeV9jLWljb24tLWlwLWZheC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzZcXFwifS5oeV9jLWljb24tLWxpbmtlZC1pbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzdcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OFxcXCJ9Lmh5X2MtaWNvbi0tbWljcm9waG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzlcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MFxcXCJ9Lmh5X2MtaWNvbi0tbmV0d29ya2luZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODFcXFwifS5oeV9jLWljb24tLWN5Y2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MlxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4M1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NFxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1hZGQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg1XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODZcXFwifS5mYWRlLXRyYW5zaXRpb257LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZX0uZmFkZS1lbnRlciwuZmFkZS1sZWF2ZXtvcGFjaXR5OjB9LmMtYWxlcnR7cG9zaXRpb246cmVsYXRpdmU7cGFkZGluZzo3cHggMTVweDttYXJnaW4tYm90dG9tOjFyZW07Ym9yZGVyOjFweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItcmFkaXVzOi4yNXJlbX0uYy1hbGVydC0taW5mb3tiYWNrZ3JvdW5kLWNvbG9yOiMzMzM7Ym9yZGVyLWNvbG9yOiMwMDA7Y29sb3I6I2ZmZn0uYy1hbGVydC0taW5mbyBidXR0b257Y29sb3I6I2ZmZn0uYy1hbGVydC0tc3VjY2Vzc3tiYWNrZ3JvdW5kLWNvbG9yOiNlNmZmY2M7Ym9yZGVyLWNvbG9yOiM5ZjM7Y29sb3I6IzQwODAwMH0uYy1hbGVydC0tZXJyb3J7YmFja2dyb3VuZC1jb2xvcjojZjhkZGUzO2JvcmRlci1jb2xvcjojZjJjMGNhO2NvbG9yOiNjODEyMzV9LmMtYWxlcnRfX2Nsb3NlLWJ1dHRvbntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDoxMHB4Oy13ZWJraXQtYXBwZWFyYW5jZTpub25lO3BhZGRpbmc6MDtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kOjAgMDtib3JkZXI6MDtmb250LXNpemU6Mi41cmVtO29wYWNpdHk6LjJ9LmMtYWxlcnRfX2Nsb3NlLWJ1dHRvbjpob3ZlcntvcGFjaXR5Oi4zfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvYWxlcnQvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gNjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmh5X2MtaWNvbntmb250LWZhbWlseTpUZWx1cyBJY29uLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO3RleHQtZGVjb3JhdGlvbjpub25lO3RleHQtcmVuZGVyaW5nOm9wdGltaXplTGVnaWJpbGl0eTtjb2xvcjppbmhlcml0O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtmb250LXNpemU6aW5oZXJpdDtsaW5lLWhlaWdodDppbmhlcml0fS5oeV9jLWljb25fX3NxdWFyZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6Mi41cmVtO2xpbmUtaGVpZ2h0OjNyZW07d2lkdGg6M3JlbTtoZWlnaHQ6M3JlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS0yeHtmb250LXNpemU6MmVtfS5oeV9jLWljb24tLTN4e2ZvbnQtc2l6ZTozZW19Lmh5X2MtaWNvbi0tNHh7Zm9udC1zaXplOjRlbX0uaHlfYy1pY29uX19zdHlsZWd1aWRle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToycmVtO2xpbmUtaGVpZ2h0OjRyZW07d2lkdGg6NHJlbTtoZWlnaHQ6NHJlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS1jaXJjbGUtdGhpY2stb3V0bGluZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDFcXFwifS5oeV9jLWljb24tLWNpcmNsZS1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDJcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDVcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtbG9nbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDlcXFwifS5oeV9jLWljb24tLWJhci1jaGFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTBcXFwifS5oeV9jLWljb24tLXBpY3R1cmUtZnJhbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDExXFxcIn0uaHlfYy1pY29uLS1wYXBlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTJcXFwifS5oeV9jLWljb24tLXBhcGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxM1xcXCJ9Lmh5X2MtaWNvbi0tZm9sZGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNFxcXCJ9Lmh5X2MtaWNvbi0tc2hhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE1XFxcIn0uaHlfYy1pY29uLS1tYWduaWZ5LWdsYXNzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNlxcXCJ9Lmh5X2MtaWNvbi0td2FybmluZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMThcXFwifS5oeV9jLWljb24tLXN0YXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE5XFxcIn0uaHlfYy1pY29uLS1zdGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMFxcXCJ9Lmh5X2MtaWNvbi0taGVhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIxXFxcIn0uaHlfYy1pY29uLS1saWZlc2F2ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIyXFxcIn0uaHlfYy1pY29uLS1oYW1idXJnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI0XFxcIn0uaHlfYy1pY29uLS1ncmlkLXNxdWFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjVcXFwifS5oeV9jLWljb24tLWdyaWQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjZcXFwifS5oeV9jLWljb24tLWxpZ2h0YnVsYjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjdcXFwifS5oeV9jLWljb24tLXNwZWVkb21ldGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOFxcXCJ9Lmh5X2MtaWNvbi0tYWRkLXJlbW92ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjlcXFwifS5oeV9jLWljb24tLWNhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMwXFxcIn0uaHlfYy1pY29uLS10d2l0dGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMVxcXCJ9Lmh5X2MtaWNvbi0tZmFjZWJvb2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMyXFxcIn0uaHlfYy1pY29uLS15b3V0dWJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzM1xcXCJ9Lmh5X2MtaWNvbi0tZ29vZ2xlLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM0XFxcIn0uaHlfYy1pY29uLS10cmVuZC1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNVxcXCJ9Lmh5X2MtaWNvbi0tcGxheS1idXR0b24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM2XFxcIn0uaHlfYy1pY29uLS12aWRlby1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzdcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM4XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzlcXFwifS5oeV9jLWljb24tLWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MFxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQxXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MlxcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NFxcXCJ9Lmh5X2MtaWNvbi0tbW91c2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ1XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDZcXFwifS5oeV9jLWljb24tLXBhcGVyLW5vdGVzLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0N1xcXCJ9Lmh5X2MtaWNvbi0tdHY6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ4XFxcIn0uaHlfYy1pY29uLS1maWxtOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OVxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUwXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUxXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MlxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTNcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTVcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NlxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1N1xcXCJ9Lmh5X2MtaWNvbi0tdXNlcnM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU5XFxcIn0uaHlfYy1pY29uLS11c2Vycy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MFxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjJcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtYm94ZWQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYzXFxcIn0uaHlfYy1pY29uLS1nZWFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NFxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NVxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjZcXFwifS5oeV9jLWljb24tLXBhZGxvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY4XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrLWludmVyZXRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjlcXFwifS5oeV9jLWljb24tLXN0YWNrZWQtcGFwZXJzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MVxcXCJ9Lmh5X2MtaWNvbi0tbXVzaWMtbm90ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzJcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDczXFxcIn0uaHlfYy1pY29uLS10YWJsZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc0XFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc1XFxcIn0uaHlfYy1pY29uLS1tb3VzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzZcXFwifS5oeV9jLWljb24tLXByaWNldGFnLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3N1xcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc4XFxcIn0uaHlfYy1pY29uLS10di1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzlcXFwifS5oeV9jLWljb24tLWZpbG0tY2xhcHBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODBcXFwifS5oeV9jLWljb24tLWVudmVsb3BlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MVxcXCJ9Lmh5X2MtaWNvbi0tcGhvbmUtaGFuZHNldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODJcXFwifS5oeV9jLWljb24tLXVzYi1zdGljay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODNcXFwifS5oeV9jLWljb24tLWhvbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg0XFxcIn0uaHlfYy1pY29uLS1ob21lLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg1XFxcIn0uaHlfYy1pY29uLS1ob21lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NlxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTFcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkyXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5M1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk0XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5N1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOThcXFwifS5oeV9jLWljb24tLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk5XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDJcXFwifS5oeV9jLWljb24tLXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA0XFxcIn0uaHlfYy1pY29uLS14LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA1XFxcIn0uaHlfYy1pY29uLS14LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNlxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOFxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA5XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEwXFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTFcXFwifS5oeV9jLWljb24tLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEyXFxcIn0uaHlfYy1pY29uLS1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEzXFxcIn0uaHlfYy1pY29uLS1wbHVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNFxcXCJ9Lmh5X2MtaWNvbi0tbWludXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE1XFxcIn0uaHlfYy1pY29uLS1taW51cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNlxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE3XFxcIn0uaHlfYy1pY29uLS1jaGF0LWJ1YmJsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTlcXFwifS5oeV9jLWljb24tLWNoYXQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjBcXFwifS5oeV9jLWljb24tLWNoYXQtY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIxXFxcIn0uaHlfYy1pY29uLS1jaGF0LXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIyXFxcIn0uaHlfYy1pY29uLS1jaGF0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyM1xcXCJ9Lmh5X2MtaWNvbi0tc2ltLWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI1XFxcIn0uaHlfYy1pY29uLS1jYWxjdWxhdG9yOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNlxcXCJ9Lmh5X2MtaWNvbi0tYmx1ZXRvb3RoLWhlYWRzZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI3XFxcIn0uaHlfYy1pY29uLS1vdXRnb2luZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyOVxcXCJ9Lmh5X2MtaWNvbi0taW5jb21pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzBcXFwifS5oeV9jLWljb24tLWNhdXRpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMxXFxcIn0uaHlfYy1pY29uLS13aWZpLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMlxcXCJ9Lmh5X2MtaWNvbi0td2lmaTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzNcXFwifS5oeV9jLWljb24tLXRoaW4tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNVxcXCJ9Lmh5X2MtaWNvbi0taW5mby1pbnZlcnRlZDpiZWZvcmUsLmh5X2MtaWNvbi0taW5mbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzZcXFwifS5oeV9jLWljb24tLXRyZW5kLXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzOFxcXCJ9Lmh5X2MtaWNvbi0tZ2xvYmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQwXFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQyXFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ0XFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NVxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ2XFxcIn0uaHlfYy1pY29uLS1vdmVydmlldy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDdcXFwifS5oeV9jLWljb24tLXRlbHVzLWNpcmNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDhcXFwifS5oeV9jLWljb24tLXB1bHNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OVxcXCJ9Lmh5X2MtaWNvbi0tbWlrZS1tb2JpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUwXFxcIn0uaHlfYy1pY29uLS1yZXdhcmRzLWJhZGdlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MVxcXCJ9Lmh5X2MtaWNvbi0tZmlsdGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MlxcXCJ9Lmh5X2MtaWNvbi0tc2NoZWR1bGUtdGFsazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTNcXFwifS5oeV9jLWljb24tLXdhcm5pbmc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU0XFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU1XFxcIn0uaHlfYy1pY29uLS1jYXJ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NlxcXCJ9Lmh5X2MtaWNvbi0tbGl2ZS1jaGF0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1N1xcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNThcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3Q6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU5XFxcIn0uaHlfYy1pY29uLS1jbG91ZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjBcXFwifS5oeV9jLWljb24tLWRhdGE6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYxXFxcIn0uaHlfYy1pY29uLS1kZWxpdmVyeS10cnVjazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjJcXFwifS5oeV9jLWljb24tLXByb3RlY3Rpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYzXFxcIn0uaHlfYy1pY29uLS1jb2xvdXItcGlja2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NFxcXCJ9Lmh5X2MtaWNvbi0tbXVsdGktYWNjb3VudC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjVcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NlxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY3XFxcIn0uaHlfYy1pY29uLS1kb2xsYXItc2lnbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjhcXFwifS5oeV9jLWljb24tLWxpbmstYWNjb3VudDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjlcXFwifS5oeV9jLWljb24tLWRhdGEtbWFuYWdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzBcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MVxcXCJ9Lmh5X2MtaWNvbi0tdG9vbHMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcyXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzNcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NFxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NVxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NlxcXCJ9Lmh5X2MtaWNvbi0tbGlua2VkLWluLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3N1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc4XFxcIn0uaHlfYy1pY29uLS1taWNyb3Bob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgwXFxcIn0uaHlfYy1pY29uLS1uZXR3b3JraW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MVxcXCJ9Lmh5X2MtaWNvbi0tY3ljbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgyXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgzXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg0XFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWFkZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODVcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NlxcXCJ9LmMtY29sbGFwc2FibGUtcGFuZWx7Ym9yZGVyOjFweCBzb2xpZCAjZTJlMmUyO2JveC1zaGFkb3c6MCAxcHggM3B4IDFweCAjZTJlMmUyfS5jLWNvbGxhcHNhYmxlLXBhbmVsX19oZWFkZXJ7Y3Vyc29yOnBvaW50ZXI7cGFkZGluZzoxMHB4IDE1cHg7cG9zaXRpb246cmVsYXRpdmV9LmMtY29sbGFwc2FibGUtcGFuZWxfX2hlYWRlcjphZnRlcntwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDoxZW07dG9wOi43NWVtO2ZvbnQtc2l6ZTouNzVlbTtmb250LWZhbWlseTpUZWx1cyBJY29uO2NvbnRlbnQ6J1xcXFxFMTE0Jztjb2xvcjojNTdhNzA4fS5jLWNvbGxhcHNhYmxlLXBhbmVsX19oZWFkZXItLW9wZW46YWZ0ZXJ7Y29udGVudDonXFxcXEUxMTcnfS5jLWNvbGxhcHNhYmxlLXBhbmVsX19ib2R5e2JvcmRlci10b3A6MXB4IHNvbGlkICNlMmUyZTI7bWF4LWhlaWdodDowO3BhZGRpbmc6MCAxNXB4Oy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2UtaW4tb3V0O3RyYW5zaXRpb246YWxsIC4zcyBlYXNlLWluLW91dDtvdmVyZmxvdzpoaWRkZW47b3BhY2l0eTowfS5jLWNvbGxhcHNhYmxlLXBhbmVsX19ib2R5LS1vcGVue29wYWNpdHk6MTtwYWRkaW5nOjE1cHg7bWF4LWhlaWdodDo5OTk5cHh9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9jb2xsYXBzYWJsZS1wYW5lbC9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSA2OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYy1sZWdhbC1jb250YWluZXJfX29yZGVyZWQtbGlzdHttYXJnaW4tdG9wOjEwcHg7bWFyZ2luLWJvdHRvbToyMHB4O2xpc3Qtc3R5bGU6ZGVjaW1hbDtsaXN0LXN0eWxlLXR5cGU6ZGVjaW1hbDtwYWRkaW5nLWxlZnQ6MjBweH0uYy1sZWdhbC1jb250YWluZXJfX3Vub3JkZXJlZC1saXN0e21hcmdpbi10b3A6MTBweDttYXJnaW4tYm90dG9tOjIwcHg7cGFkZGluZy1sZWZ0OjIwcHg7bGlzdC1zdHlsZTpub25lO2xpc3Qtc3R5bGUtdHlwZTpub25lfS5jLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVte2xpbmUtaGVpZ2h0OjE5cHg7bWFyZ2luLWJvdHRvbToxMHB4O3BhZGRpbmc6MTBweH0uYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbS0tYWN0aXZle2JhY2tncm91bmQtY29sb3I6I2Y5ZjFmZn0uYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbSBhe2NvbG9yOiM0OTE2NmQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Ym9yZGVyLWJvdHRvbToxcHggZG90dGVkO3BhZGRpbmctYm90dG9tOjFweH0uYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbSBhOmhvdmVye2NvbG9yOiM4YzY4YTZ9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb250YWluZXIudnVlXG4gKiogbW9kdWxlIGlkID0gNzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtbGVnYWwtc3Vwe2ZvbnQtc2l6ZTouNzVlbTtsaW5lLWhlaWdodDowO3ZlcnRpY2FsLWFsaWduOnN1cGVyO3RleHQtZGVjb3JhdGlvbjpub25lO3RvcDowIWltcG9ydGFudDtjdXJzb3I6cG9pbnRlcn0uYy1sZWdhbC1zdXAgYXtjb2xvcjojNDkxNjZkfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY291bnRlci52dWVcbiAqKiBtb2R1bGUgaWQgPSA3MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIubm8tc2Nyb2xse292ZXJmbG93LXg6aGlkZGVuO292ZXJmbG93OmhpZGRlbjtvdmVyZmxvdy15OmhpZGRlbjtwb3NpdGlvbjpyZWxhdGl2ZTtoZWlnaHQ6MTAwJX0uYy1vdmVybGF5LWNvbnRhaW5lcl9fY3VydGFpbntvcGFjaXR5OjA7LXdlYmtpdC10cmFuc2l0aW9uOm9wYWNpdHkgMS4zcyBlYXNlLWluLW91dDt0cmFuc2l0aW9uOm9wYWNpdHkgMS4zcyBlYXNlLWluLW91dH0uYy1vdmVybGF5LWNvbnRhaW5lcl9fY3VydGFpbi0tYWN0aXZle29wYWNpdHk6MTtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjU1KTtwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7cmlnaHQ6MDtib3R0b206MH0uYy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXN7cG9zaXRpb246Zml4ZWQ7cmlnaHQ6MDt0b3A6MDtib3R0b206MDtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjUpOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoMTAwJSk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoMTAwJSk7LXdlYmtpdC10cmFuc2l0aW9uOjFzIGVhc2UtaW4tb3V0O3RyYW5zaXRpb246MXMgZWFzZS1pbi1vdXR9QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDo1OTlweCl7LmMtb3ZlcmxheS1jb250YWluZXJfX292ZXJsYXlze3dpZHRoOjEwMCV9fUBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6NjAwcHgpey5jLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5c3t3aWR0aDo2NiV9fS5jLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5cy0tYWN0aXZley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoMCk7ei1pbmRleDo5OTk5OX1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS1jb250YWluZXIudnVlXG4gKiogbW9kdWxlIGlkID0gNzJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtb3ZlcmxheXtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO2JhY2tncm91bmQtY29sb3I6I2ZmZn0uYy1vdmVybGF5X19oZWFkZXJ7cGFkZGluZzoyMHB4O3Bvc2l0aW9uOmZpeGVkO3RvcDowO2hlaWdodDo3NXB4O3dpZHRoOjEwMCU7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2UyZTJlMjtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY2Zjd9LmMtb3ZlcmxheV9fY2xvc2UtYnV0dG9ue2N1cnNvcjpwb2ludGVyO2JhY2tncm91bmQ6MDtib3JkZXI6MDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MjBweDtyaWdodDoyMHB4O2ZvbnQtZmFtaWx5OlRlbHVzIEljb247Zm9udC1zaXplOjJlbTtjb2xvcjojNDkxNjZkfS5jLW92ZXJsYXlfX2Nsb3NlLWJ1dHRvbjpiZWZvcmV7Y29udGVudDonXFxcXEUxMDYnfS5jLW92ZXJsYXlfX2JvZHl7cG9zaXRpb246Zml4ZWQ7LXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2g7b3ZlcmZsb3cteTpzY3JvbGw7dG9wOjc1cHg7Ym90dG9tOjA7d2lkdGg6MTAwJTtwYWRkaW5nOjIwcHggMjBweCA1MHB4fVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDczXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5jLXN0ZXAtdHJhY2tlcl9faWNvbiwuaHlfYy1pY29ue2ZvbnQtZmFtaWx5OlRlbHVzIEljb24sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7dGV4dC1kZWNvcmF0aW9uOm5vbmU7dGV4dC1yZW5kZXJpbmc6b3B0aW1pemVMZWdpYmlsaXR5O2NvbG9yOmluaGVyaXQ7dmVydGljYWwtYWxpZ246bWlkZGxlO2ZvbnQtc2l6ZTppbmhlcml0O2xpbmUtaGVpZ2h0OmluaGVyaXR9Lmh5X2MtaWNvbl9fc3F1YXJle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToyLjVyZW07bGluZS1oZWlnaHQ6M3JlbTt3aWR0aDozcmVtO2hlaWdodDozcmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLTJ4e2ZvbnQtc2l6ZToyZW19Lmh5X2MtaWNvbi0tM3h7Zm9udC1zaXplOjNlbX0uaHlfYy1pY29uLS00eHtmb250LXNpemU6NGVtfS5oeV9jLWljb25fX3N0eWxlZ3VpZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjJyZW07bGluZS1oZWlnaHQ6NHJlbTt3aWR0aDo0cmVtO2hlaWdodDo0cmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLWNpcmNsZS10aGljay1vdXRsaW5lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMVxcXCJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMlxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNVxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA2XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1sb2dvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwOVxcXCJ9Lmh5X2MtaWNvbi0tYmFyLWNoYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMFxcXCJ9Lmh5X2MtaWNvbi0tcGljdHVyZS1mcmFtZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTFcXFwifS5oeV9jLWljb24tLXBhcGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEzXFxcIn0uaHlfYy1pY29uLS1mb2xkZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE0XFxcIn0uaHlfYy1pY29uLS1zaGFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTVcXFwifS5oeV9jLWljb24tLW1hZ25pZnktZ2xhc3M6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE2XFxcIn0uaHlfYy1pY29uLS13YXJuaW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOFxcXCJ9Lmh5X2MtaWNvbi0tc3Rhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTlcXFwifS5oeV9jLWljb24tLXN0YXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIwXFxcIn0uaHlfYy1pY29uLS1oZWFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjFcXFwifS5oeV9jLWljb24tLWxpZmVzYXZlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjJcXFwifS5oeV9jLWljb24tLWhhbWJ1cmdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjRcXFwifS5oeV9jLWljb24tLWdyaWQtc3F1YXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNVxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNlxcXCJ9Lmh5X2MtaWNvbi0tbGlnaHRidWxiOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyN1xcXCJ9Lmh5X2MtaWNvbi0tc3BlZWRvbWV0ZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI4XFxcIn0uaHlfYy1pY29uLS1hZGQtcmVtb3ZlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOVxcXCJ9Lmh5X2MtaWNvbi0tY2FydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzBcXFwifS5oeV9jLWljb24tLXR3aXR0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMxXFxcIn0uaHlfYy1pY29uLS1mYWNlYm9vazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzJcXFwifS5oeV9jLWljb24tLXlvdXR1YmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMzXFxcIn0uaHlfYy1pY29uLS1nb29nbGUtcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzRcXFwifS5oeV9jLWljb24tLXRyZW5kLWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM1XFxcIn0uaHlfYy1pY29uLS1wbGF5LWJ1dHRvbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzZcXFwifS5oeV9jLWljb24tLXZpZGVvLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzN1xcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzhcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOVxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQwXFxcIn0uaHlfYy1pY29uLS1jbG9jay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDFcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQyXFxcIn0uaHlfYy1pY29uLS10YWJsZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQzXFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ0XFxcIn0uaHlfYy1pY29uLS1tb3VzZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDVcXFwifS5oeV9jLWljb24tLXByaWNldGFnOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItbm90ZXMtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ3XFxcIn0uaHlfYy1pY29uLS10djpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDhcXFwifS5oeV9jLWljb24tLWZpbG06YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ5XFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTBcXFwifS5oeV9jLWljb24tLXVzYi1zdGljazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTFcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUyXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1M1xcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NVxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU2XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU3XFxcIn0uaHlfYy1pY29uLS11c2VyczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTlcXFwifS5oeV9jLWljb24tLXVzZXJzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYwXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1ib3hlZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjNcXFwifS5oeV9jLWljb24tLWdlYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY0XFxcIn0uaHlfYy1pY29uLS1nZWFyLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY1XFxcIn0uaHlfYy1pY29uLS1nZWFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NlxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjhcXFwifS5oeV9jLWljb24tLXBhZGxvY2staW52ZXJldGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OVxcXCJ9Lmh5X2MtaWNvbi0tc3RhY2tlZC1wYXBlcnMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcxXFxcIn0uaHlfYy1pY29uLS1tdXNpYy1ub3RlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MlxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzNcXFwifS5oeV9jLWljb24tLXRhYmxldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzRcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzVcXFwifS5oeV9jLWljb24tLW1vdXNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NlxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc3XFxcIn0uaHlfYy1pY29uLS1wYXBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzhcXFwifS5oeV9jLWljb24tLXR2LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OVxcXCJ9Lmh5X2MtaWNvbi0tZmlsbS1jbGFwcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MFxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgxXFxcIn0uaHlfYy1pY29uLS1waG9uZS1oYW5kc2V0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MlxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODRcXFwifS5oeV9jLWljb24tLWhvbWUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODVcXFwifS5oeV9jLWljb24tLWhvbWUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg2XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODhcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTJcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkzXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTRcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk1XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk2XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk3XFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTlcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAwXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDFcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMlxcXCJ9Lmh5X2MtaWNvbi0teDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDRcXFwifS5oeV9jLWljb24tLXgtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDVcXFwifS5oeV9jLWljb24tLXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA2XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcms6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA4XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDlcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTBcXFwifS5oeV9jLWljb24tLWluZmluaXR5OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMVxcXCJ9Lmh5X2MtaWNvbi0tcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTJcXFwifS5oeV9jLWljb24tLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTNcXFwifS5oeV9jLWljb24tLXBsdXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE0XFxcIn0uaHlfYy1pY29uLS1taW51czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTVcXFwifS5oeV9jLWljb24tLW1pbnVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE2XFxcIn0uaHlfYy1pY29uLS1taW51cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTdcXFwifS5oeV9jLWljb24tLWNoYXQtYnViYmxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExOVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMFxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjFcXFwifS5oeV9jLWljb24tLWNoYXQteDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjJcXFwifS5oeV9jLWljb24tLWNoYXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIzXFxcIn0uaHlfYy1pY29uLS1zaW0tY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjVcXFwifS5oeV9jLWljb24tLWNhbGN1bGF0b3I6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI2XFxcIn0uaHlfYy1pY29uLS1ibHVldG9vdGgtaGVhZHNldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjdcXFwifS5oeV9jLWljb24tLW91dGdvaW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI5XFxcIn0uaHlfYy1pY29uLS1pbmNvbWluZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMFxcXCJ9Lmh5X2MtaWNvbi0tY2F1dGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzFcXFwifS5oeV9jLWljb24tLXdpZmktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMyXFxcIn0uaHlfYy1pY29uLS13aWZpOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzM1xcXCJ9Lmh5X2MtaWNvbi0tdGhpbi1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM1XFxcIn0uaHlfYy1pY29uLS1pbmZvLWludmVydGVkOmJlZm9yZSwuaHlfYy1pY29uLS1pbmZvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNlxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM4XFxcIn0uaHlfYy1pY29uLS1nbG9iZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDBcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDJcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDRcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ1XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDZcXFwifS5oeV9jLWljb24tLW92ZXJ2aWV3LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0N1xcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtY2lyY2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OFxcXCJ9Lmh5X2MtaWNvbi0tcHVsc2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ5XFxcIn0uaHlfYy1pY29uLS1taWtlLW1vYmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTBcXFwifS5oeV9jLWljb24tLXJld2FyZHMtYmFkZ2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUxXFxcIn0uaHlfYy1pY29uLS1maWx0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUyXFxcIn0uaHlfYy1pY29uLS1zY2hlZHVsZS10YWxrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1M1xcXCJ9Lmh5X2MtaWNvbi0td2FybmluZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTRcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTVcXFwifS5oeV9jLWljb24tLWNhcnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU2XFxcIn0uaHlfYy1pY29uLS1saXZlLWNoYXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU3XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OFxcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTlcXFwifS5oeV9jLWljb24tLWNsb3VkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MFxcXCJ9Lmh5X2MtaWNvbi0tZGF0YTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjFcXFwifS5oeV9jLWljb24tLWRlbGl2ZXJ5LXRydWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MlxcXCJ9Lmh5X2MtaWNvbi0tcHJvdGVjdGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjNcXFwifS5oeV9jLWljb24tLWNvbG91ci1waWNrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY0XFxcIn0uaHlfYy1pY29uLS1tdWx0aS1hY2NvdW50LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NVxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY2XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjdcXFwifS5oeV9jLWljb24tLWRvbGxhci1zaWduOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OFxcXCJ9Lmh5X2MtaWNvbi0tbGluay1hY2NvdW50OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OVxcXCJ9Lmh5X2MtaWNvbi0tZGF0YS1tYW5hZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MFxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcxXFxcIn0uaHlfYy1pY29uLS10b29scy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzJcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3M1xcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc0XFxcIn0uaHlfYy1pY29uLS1pcC1mYXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc1XFxcIn0uaHlfYy1pY29uLS1pcC1mYXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc2XFxcIn0uaHlfYy1pY29uLS1saW5rZWQtaW4taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc3XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzhcXFwifS5oeV9jLWljb24tLW1pY3JvcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc5XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODBcXFwifS5oeV9jLWljb24tLW5ldHdvcmtpbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgxXFxcIn0uaHlfYy1pY29uLS1jeWNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODJcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODNcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODRcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtYWRkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NVxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg2XFxcIn0uYy1zdGVwLXRyYWNrZXJ7bGlzdC1zdHlsZTpub25lO3BhZGRpbmc6MDtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5Oi13ZWJraXQtYm94O2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy13ZWJraXQtYm94LXBhY2s6anVzdGlmeTstbXMtZmxleC1wYWNrOmp1c3RpZnk7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47bWFyZ2luOjFyZW0gLTEuNXJlbX1AbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOjYwMHB4KXsuYy1zdGVwLXRyYWNrZXJ7cGFkZGluZy1ib3R0b206Mi41cmVtO21hcmdpbjoxcmVtIDB9fS5jLXN0ZXAtdHJhY2tlcl9fc3RlcHt3aWR0aDoxMDAlO3Bvc2l0aW9uOnJlbGF0aXZlO3RleHQtYWxpZ246Y2VudGVyfS5jLXN0ZXAtdHJhY2tlcl9fc3RlcDphZnRlciwuYy1zdGVwLXRyYWNrZXJfX3N0ZXA6YmVmb3Jle3Bvc2l0aW9uOmFic29sdXRlO3RvcDo1MCU7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKTt3aWR0aDpjYWxjKDUwJSAtIDEuNHJlbSk7Y29udGVudDonICc7Ym9yZGVyLWJvdHRvbTouNnJlbSBzb2xpZCAjYWVhZWFlfS5jLXN0ZXAtdHJhY2tlcl9fc3RlcDpiZWZvcmV7bGVmdDowfS5jLXN0ZXAtdHJhY2tlcl9fc3RlcDphZnRlcntyaWdodDowfS5jLXN0ZXAtdHJhY2tlciAuYy1zdGVwLXRyYWNrZXJfX3N0ZXA6Zmlyc3QtY2hpbGQ6YmVmb3JlLC5jLXN0ZXAtdHJhY2tlciAuYy1zdGVwLXRyYWNrZXJfX3N0ZXA6bGFzdC1jaGlsZDphZnRlcntjb250ZW50Om5vbmV9LmMtc3RlcC10cmFja2VyX19sYWJlbHtwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206LTNyZW07bGVmdDowO2ZvbnQtc2l6ZToxLjdyZW07d2lkdGg6MTAwJTtoZWlnaHQ6Mi41cmVtO2ZvbnQtZmFtaWx5OlRlbHVzIFJlZ3VsYXIsSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7Y29sb3I6IzY2Nn1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjU5OXB4KXsuYy1zdGVwLXRyYWNrZXJfX2xhYmVse2Rpc3BsYXk6bm9uZX19LmMtc3RlcC10cmFja2VyX19zdGVwLS1hY3RpdmUgLmMtc3RlcC10cmFja2VyX19sYWJlbHtmb250LWZhbWlseTpUZWx1cyBNZWRpdW0sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7Y29sb3I6IzQwODAwMH0uYy1zdGVwLXRyYWNrZXJfX2ljb257Zm9udC1zaXplOjNyZW07Y29sb3I6I2FlYWVhZX0uYy1zdGVwLXRyYWNrZXJfX2ljb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWFjdGl2ZSAuYy1zdGVwLXRyYWNrZXJfX2ljb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uYy1zdGVwLXRyYWNrZXJfX3NldHAtLWNsaWNrYWJsZSBhe2N1cnNvcjpwb2ludGVyfS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGU6YWZ0ZXJ7Ym9yZGVyLWJvdHRvbTouNnJlbSBzb2xpZCAjNTdhNzA4fS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGUgLmMtc3RlcC10cmFja2VyX19pY29uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9LmMtc3RlcC10cmFja2VyX19zdGVwLS1hY3RpdmUgLmMtc3RlcC10cmFja2VyX19pY29uOmJlZm9yZSwuYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlIC5jLXN0ZXAtdHJhY2tlcl9faWNvbjpiZWZvcmV7Y29sb3I6IzU3YTcwOH0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlKy5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tYWN0aXZlOmJlZm9yZSwuYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlKy5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGU6YmVmb3Jle2JvcmRlci1ib3R0b206LjZyZW0gc29saWQgIzU3YTcwOH0uYy1zdGVwLXRyYWNrZXItbW9iaWxlLWxhYmVse2ZvbnQtc2l6ZToxLjdyZW07dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1mYW1pbHk6VGVsdXMgUmVndWxhcixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjojNjY2fUBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6NjAwcHgpey5jLXN0ZXAtdHJhY2tlci1tb2JpbGUtbGFiZWx7ZGlzcGxheTpub25lfX0uYy1zdGVwLXRyYWNrZXItbW9iaWxlLWxhYmVsX19zdGVwe2ZvbnQtZmFtaWx5OlRlbHVzIE1lZGl1bSxIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjojNDA4MDAwfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvc3RlcC10cmFja2VyL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDc0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5jLXRhYnNfX2hlYWRlcntsaXN0LXN0eWxlOm5vbmU7cGFkZGluZzowO21hcmdpbjowO2Rpc3BsYXk6LXdlYmtpdC1ib3g7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXh9LmMtdGFic19faGVhZGVyLWl0ZW17bWFyZ2luLXRvcDoycHg7aGVpZ2h0OjQ1cHg7cGFkZGluZzowIDJweDstd2Via2l0LWJveC1mbGV4OjE7LW1zLWZsZXg6MTtmbGV4OjF9LmMtdGFic19faGVhZGVyLWl0ZW0gYXtiYWNrZ3JvdW5kLWNvbG9yOiNlMmUyZTI7dGV4dC1kZWNvcmF0aW9uOm5vbmU7cGFkZGluZzoxM3B4IDIwcHg7Y29sb3I6IzQ5MTY2ZDtkaXNwbGF5OmJsb2NrfS5jLXRhYnNfX2hlYWRlci1pdGVtLS1hY3RpdmV7bWFyZ2luLXRvcDoxcHg7aGVpZ2h0OjQ2cHg7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JvcmRlci10b3A6MXB4IHNvbGlkICNlMmUyZTI7Ym9yZGVyLWxlZnQ6MXB4IHNvbGlkICNlMmUyZTI7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjZTJlMmUyfS5jLXRhYnNfX2hlYWRlci1pdGVtLS1hY3RpdmUgYXtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Y29sb3I6IzMzM30uYy10YWJzX19oZWFkZXItaXRlbS0tZGlzYWJsZWQgYXtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY2Zjc7Y29sb3I6I2FlYWVhZTtjdXJzb3I6bm90LWFsbG93ZWR9LmMtdGFic19fYm9keXtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym9yZGVyOjFweCBzb2xpZCAjZTJlMmUyO21hcmdpbi10b3A6LTFweDtwYWRkaW5nOjIwcHh9LmMtdGFic19fcGFuZXtkaXNwbGF5OmJsb2NrO2JvcmRlci10b3A6bm9uZTtvcGFjaXR5OjA7aGVpZ2h0OjA7b3ZlcmZsb3c6aGlkZGVuO3BhZGRpbmc6MCA1cHg7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuNXMgZWFzZS1vdXQ7dHJhbnNpdGlvbjphbGwgLjVzIGVhc2Utb3V0fS5jLXRhYnNfX3BhbmUtLWFjdGl2ZXtvcGFjaXR5OjE7cGFkZGluZzo1cHg7aGVpZ2h0OmF1dG99XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy90YWIvdGFicy52dWVcbiAqKiBtb2R1bGUgaWQgPSA3NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNCBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9ycyAoQ29udmVyc2lvbiB0byBFUzYgQVBJIGJ5IEpha2UgQXJjaGliYWxkKVxuICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2pha2VhcmNoaWJhbGQvZXM2LXByb21pc2UvbWFzdGVyL0xJQ0VOU0VcbiAqIEB2ZXJzaW9uICAgMy4yLjFcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRvYmplY3RPckZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJyB8fCAodHlwZW9mIHggPT09ICdvYmplY3QnICYmIHggIT09IG51bGwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc01heWJlVGhlbmFibGUoeCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiB4ICE9PSBudWxsO1xuICAgIH1cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkdXRpbHMkJF9pc0FycmF5O1xuICAgIGlmICghQXJyYXkuaXNBcnJheSkge1xuICAgICAgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkdXRpbHMkJF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbiAgICB9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0FycmF5ID0gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheTtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiA9IDA7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR2ZXJ0eE5leHQ7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRjdXN0b21TY2hlZHVsZXJGbjtcblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2xpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW5dID0gY2FsbGJhY2s7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiArIDFdID0gYXJnO1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiArPSAyO1xuICAgICAgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gPT09IDIpIHtcbiAgICAgICAgLy8gSWYgbGVuIGlzIDIsIHRoYXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHNjaGVkdWxlIGFuIGFzeW5jIGZsdXNoLlxuICAgICAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleVxuICAgICAgICAvLyB3aWxsIGJlIHByb2Nlc3NlZCBieSB0aGlzIGZsdXNoIHRoYXQgd2UgYXJlIHNjaGVkdWxpbmcuXG4gICAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm4pIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm4obGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHNldFNjaGVkdWxlcihzY2hlZHVsZUZuKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm4gPSBzY2hlZHVsZUZuO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzZXRBc2FwKGFzYXBGbikge1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAgPSBhc2FwRm47XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93ID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSA/IHdpbmRvdyA6IHVuZGVmaW5lZDtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJHbG9iYWwgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3NlcldpbmRvdyB8fCB7fTtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJHbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3Nlckdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNOb2RlID0gdHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG5cbiAgICAvLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNXb3JrZXIgPSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCc7XG5cbiAgICAvLyBub2RlXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU5leHRUaWNrKCkge1xuICAgICAgLy8gbm9kZSB2ZXJzaW9uIDAuMTAueCBkaXNwbGF5cyBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2hlbiBuZXh0VGljayBpcyB1c2VkIHJlY3Vyc2l2ZWx5XG4gICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHNcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyB2ZXJ0eFxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VWZXJ0eFRpbWVyKCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0KGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNdXRhdGlvbk9ic2VydmVyKCkge1xuICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICAgICAgdmFyIG9ic2VydmVyID0gbmV3IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRCcm93c2VyTXV0YXRpb25PYnNlcnZlcihsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuICAgICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gICAgICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHsgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9KTtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBub2RlLmRhdGEgPSAoaXRlcmF0aW9ucyA9ICsraXRlcmF0aW9ucyAlIDIpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyB3ZWIgd29ya2VyXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU1lc3NhZ2VDaGFubmVsKCkge1xuICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVNldFRpbWVvdXQoKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldFRpbWVvdXQobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoLCAxKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZSA9IG5ldyBBcnJheSgxMDAwKTtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2goKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW47IGkrPTIpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2ldO1xuICAgICAgICB2YXIgYXJnID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2krMV07XG5cbiAgICAgICAgY2FsbGJhY2soYXJnKTtcblxuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaV0gPSB1bmRlZmluZWQ7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpKzFdID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuID0gMDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXR0ZW1wdFZlcnR4KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHIgPSByZXF1aXJlO1xuICAgICAgICB2YXIgdmVydHggPSByKCd2ZXJ0eCcpO1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcbiAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VWZXJ0eFRpbWVyKCk7XG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoO1xuICAgIC8vIERlY2lkZSB3aGF0IGFzeW5jIG1ldGhvZCB0byB1c2UgdG8gdHJpZ2dlcmluZyBwcm9jZXNzaW5nIG9mIHF1ZXVlZCBjYWxsYmFja3M6XG4gICAgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc05vZGUpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU5leHRUaWNrKCk7XG4gICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTtcbiAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc1dvcmtlcikge1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTWVzc2FnZUNoYW5uZWwoKTtcbiAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGF0dGVtcHRWZXJ0eCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0KCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSR0aGVuJCR0aGVuKG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gICAgICB2YXIgcGFyZW50ID0gdGhpcztcblxuICAgICAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG5cbiAgICAgIGlmIChjaGlsZFtsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG1ha2VQcm9taXNlKGNoaWxkKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHN0YXRlID0gcGFyZW50Ll9zdGF0ZTtcblxuICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50c1tzdGF0ZSAtIDFdO1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChmdW5jdGlvbigpe1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGludm9rZUNhbGxiYWNrKHN0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfVxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkdGhlbiQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSR0aGVuJCR0aGVuO1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJHJlc29sdmUob2JqZWN0KSB7XG4gICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICAgICAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICAgICAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICB9XG5cbiAgICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCBvYmplY3QpO1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkcmVzb2x2ZTtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUFJPTUlTRV9JRCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygxNik7XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKCkge31cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HICAgPSB2b2lkIDA7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCA9IDE7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEICA9IDI7XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1IgPSBuZXcgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRXJyb3JPYmplY3QoKTtcblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHNlbGZGdWxmaWxsbWVudCgpIHtcbiAgICAgIHJldHVybiBuZXcgVHlwZUVycm9yKFwiWW91IGNhbm5vdCByZXNvbHZlIGEgcHJvbWlzZSB3aXRoIGl0c2VsZlwiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRjYW5ub3RSZXR1cm5Pd24oKSB7XG4gICAgICByZXR1cm4gbmV3IFR5cGVFcnJvcignQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLicpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGdldFRoZW4ocHJvbWlzZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbjtcbiAgICAgIH0gY2F0Y2goZXJyb3IpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1IuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeVRoZW4odGhlbiwgdmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpO1xuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiBlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSwgdGhlbikge1xuICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGZ1bmN0aW9uKHByb21pc2UpIHtcbiAgICAgICAgdmFyIHNlYWxlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgZXJyb3IgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlUaGVuKHRoZW4sIHRoZW5hYmxlLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIGlmIChzZWFsZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgICAgICBpZiAodGhlbmFibGUgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgICBpZiAoc2VhbGVkKSB7IHJldHVybjsgfVxuICAgICAgICAgIHNlYWxlZCA9IHRydWU7XG5cbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICAgICAgfSwgJ1NldHRsZTogJyArIChwcm9taXNlLl9sYWJlbCB8fCAnIHVua25vd24gcHJvbWlzZScpKTtcblxuICAgICAgICBpZiAoIXNlYWxlZCAmJiBlcnJvcikge1xuICAgICAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSwgcHJvbWlzZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUpIHtcbiAgICAgIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICAgICAgfSBlbHNlIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZSh0aGVuYWJsZSwgdW5kZWZpbmVkLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuKSB7XG4gICAgICBpZiAobWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3RvciA9PT0gcHJvbWlzZS5jb25zdHJ1Y3RvciAmJlxuICAgICAgICAgIHRoZW4gPT09IGxpYiRlczYkcHJvbWlzZSR0aGVuJCRkZWZhdWx0ICYmXG4gICAgICAgICAgY29uc3RydWN0b3IucmVzb2x2ZSA9PT0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGVuID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUikge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUi5lcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAodGhlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICAgICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24odGhlbikpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcbiAgICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc2VsZkZ1bGZpbGxtZW50KCkpO1xuICAgICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGdldFRoZW4odmFsdWUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2hSZWplY3Rpb24ocHJvbWlzZSkge1xuICAgICAgaWYgKHByb21pc2UuX29uZXJyb3IpIHtcbiAgICAgICAgcHJvbWlzZS5fb25lcnJvcihwcm9taXNlLl9yZXN1bHQpO1xuICAgICAgfVxuXG4gICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoKHByb21pc2UpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpIHtcbiAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykgeyByZXR1cm47IH1cblxuICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gdmFsdWU7XG4gICAgICBwcm9taXNlLl9zdGF0ZSA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRDtcblxuICAgICAgaWYgKHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoLCBwcm9taXNlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKSB7XG4gICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHsgcmV0dXJuOyB9XG4gICAgICBwcm9taXNlLl9zdGF0ZSA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEO1xuICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gcmVhc29uO1xuXG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoUmVqZWN0aW9uLCBwcm9taXNlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgICAgIHZhciBzdWJzY3JpYmVycyA9IHBhcmVudC5fc3Vic2NyaWJlcnM7XG4gICAgICB2YXIgbGVuZ3RoID0gc3Vic2NyaWJlcnMubGVuZ3RoO1xuXG4gICAgICBwYXJlbnQuX29uZXJyb3IgPSBudWxsO1xuXG4gICAgICBzdWJzY3JpYmVyc1tsZW5ndGhdID0gY2hpbGQ7XG4gICAgICBzdWJzY3JpYmVyc1tsZW5ndGggKyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRURdID0gb25GdWxmaWxsbWVudDtcbiAgICAgIHN1YnNjcmliZXJzW2xlbmd0aCArIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEXSAgPSBvblJlamVjdGlvbjtcblxuICAgICAgaWYgKGxlbmd0aCA9PT0gMCAmJiBwYXJlbnQuX3N0YXRlKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gsIHBhcmVudCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaChwcm9taXNlKSB7XG4gICAgICB2YXIgc3Vic2NyaWJlcnMgPSBwcm9taXNlLl9zdWJzY3JpYmVycztcbiAgICAgIHZhciBzZXR0bGVkID0gcHJvbWlzZS5fc3RhdGU7XG5cbiAgICAgIGlmIChzdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHsgcmV0dXJuOyB9XG5cbiAgICAgIHZhciBjaGlsZCwgY2FsbGJhY2ssIGRldGFpbCA9IHByb21pc2UuX3Jlc3VsdDtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkgKz0gMykge1xuICAgICAgICBjaGlsZCA9IHN1YnNjcmliZXJzW2ldO1xuICAgICAgICBjYWxsYmFjayA9IHN1YnNjcmliZXJzW2kgKyBzZXR0bGVkXTtcblxuICAgICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBjaGlsZCwgY2FsbGJhY2ssIGRldGFpbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FsbGJhY2soZGV0YWlsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggPSAwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEVycm9yT2JqZWN0KCkge1xuICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFRSWV9DQVRDSF9FUlJPUiA9IG5ldyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRFcnJvck9iamVjdCgpO1xuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGRldGFpbCk7XG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SLmVycm9yID0gZTtcbiAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFRSWV9DQVRDSF9FUlJPUjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBwcm9taXNlLCBjYWxsYmFjaywgZGV0YWlsKSB7XG4gICAgICB2YXIgaGFzQ2FsbGJhY2sgPSBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24oY2FsbGJhY2spLFxuICAgICAgICAgIHZhbHVlLCBlcnJvciwgc3VjY2VlZGVkLCBmYWlsZWQ7XG5cbiAgICAgIGlmIChoYXNDYWxsYmFjaykge1xuICAgICAgICB2YWx1ZSA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpO1xuXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SKSB7XG4gICAgICAgICAgZmFpbGVkID0gdHJ1ZTtcbiAgICAgICAgICBlcnJvciA9IHZhbHVlLmVycm9yO1xuICAgICAgICAgIHZhbHVlID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGNhbm5vdFJldHVybk93bigpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSBkZXRhaWw7XG4gICAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuICAgICAgICAvLyBub29wXG4gICAgICB9IGVsc2UgaWYgKGhhc0NhbGxiYWNrICYmIHN1Y2NlZWRlZCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoZmFpbGVkKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbml0aWFsaXplUHJvbWlzZShwcm9taXNlLCByZXNvbHZlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVzb2x2ZXIoZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UodmFsdWUpe1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgICB9LCBmdW5jdGlvbiByZWplY3RQcm9taXNlKHJlYXNvbikge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGlkID0gMDtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRuZXh0SWQoKSB7XG4gICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaWQrKztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRtYWtlUHJvbWlzZShwcm9taXNlKSB7XG4gICAgICBwcm9taXNlW2xpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBST01JU0VfSURdID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaWQrKztcbiAgICAgIHByb21pc2UuX3N0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gdW5kZWZpbmVkO1xuICAgICAgcHJvbWlzZS5fc3Vic2NyaWJlcnMgPSBbXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGFsbChlbnRyaWVzKSB7XG4gICAgICByZXR1cm4gbmV3IGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRkZWZhdWx0KHRoaXMsIGVudHJpZXMpLnByb21pc2U7XG4gICAgfVxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGFsbDtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRyYWNlKGVudHJpZXMpIHtcbiAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXG4gICAgICBpZiAoIWxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNBcnJheShlbnRyaWVzKSkge1xuICAgICAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuJykpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgdmFyIGxlbmd0aCA9IGVudHJpZXMubGVuZ3RoO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkcmFjZTtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZWplY3QkJHJlamVjdChyZWFzb24pIHtcbiAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICAgICAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG4gICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRyZWplY3Q7XG5cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc1Jlc29sdmVyKCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc05ldygpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi5cIik7XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2U7XG4gICAgLyoqXG4gICAgICBQcm9taXNlIG9iamVjdHMgcmVwcmVzZW50IHRoZSBldmVudHVhbCByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi4gVGhlXG4gICAgICBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLCB3aGljaFxuICAgICAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uXG4gICAgICB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblxuICAgICAgVGVybWlub2xvZ3lcbiAgICAgIC0tLS0tLS0tLS0tXG5cbiAgICAgIC0gYHByb21pc2VgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB3aXRoIGEgYHRoZW5gIG1ldGhvZCB3aG9zZSBiZWhhdmlvciBjb25mb3JtcyB0byB0aGlzIHNwZWNpZmljYXRpb24uXG4gICAgICAtIGB0aGVuYWJsZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHRoYXQgZGVmaW5lcyBhIGB0aGVuYCBtZXRob2QuXG4gICAgICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuXG4gICAgICAtIGBleGNlcHRpb25gIGlzIGEgdmFsdWUgdGhhdCBpcyB0aHJvd24gdXNpbmcgdGhlIHRocm93IHN0YXRlbWVudC5cbiAgICAgIC0gYHJlYXNvbmAgaXMgYSB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aHkgYSBwcm9taXNlIHdhcyByZWplY3RlZC5cbiAgICAgIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxuXG4gICAgICBBIHByb21pc2UgY2FuIGJlIGluIG9uZSBvZiB0aHJlZSBzdGF0ZXM6IHBlbmRpbmcsIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQuXG5cbiAgICAgIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXG4gICAgICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXG4gICAgICByZWplY3RlZCBzdGF0ZS4gIEEgZnVsZmlsbG1lbnQgdmFsdWUgaXMgbmV2ZXIgYSB0aGVuYWJsZS5cblxuICAgICAgUHJvbWlzZXMgY2FuIGFsc28gYmUgc2FpZCB0byAqcmVzb2x2ZSogYSB2YWx1ZS4gIElmIHRoaXMgdmFsdWUgaXMgYWxzbyBhXG4gICAgICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzXG4gICAgICBzZXR0bGVkIHN0YXRlLiAgU28gYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCByZWplY3RzIHdpbGxcbiAgICAgIGl0c2VsZiByZWplY3QsIGFuZCBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdpbGxcbiAgICAgIGl0c2VsZiBmdWxmaWxsLlxuXG5cbiAgICAgIEJhc2ljIFVzYWdlOlxuICAgICAgLS0tLS0tLS0tLS0tXG5cbiAgICAgIGBgYGpzXG4gICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvLyBvbiBzdWNjZXNzXG4gICAgICAgIHJlc29sdmUodmFsdWUpO1xuXG4gICAgICAgIC8vIG9uIGZhaWx1cmVcbiAgICAgICAgcmVqZWN0KHJlYXNvbik7XG4gICAgICB9KTtcblxuICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgLy8gb24gcmVqZWN0aW9uXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBBZHZhbmNlZCBVc2FnZTpcbiAgICAgIC0tLS0tLS0tLS0tLS0tLVxuXG4gICAgICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzXG4gICAgICBgWE1MSHR0cFJlcXVlc3Rgcy5cblxuICAgICAgYGBganNcbiAgICAgIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyO1xuICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgICAgeGhyLnNlbmQoKTtcblxuICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ2dldEpTT046IGAnICsgdXJsICsgJ2AgZmFpbGVkIHdpdGggc3RhdHVzOiBbJyArIHRoaXMuc3RhdHVzICsgJ10nKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZ2V0SlNPTignL3Bvc3RzLmpzb24nKS50aGVuKGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICAvLyBvbiByZWplY3Rpb25cbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIFVubGlrZSBjYWxsYmFja3MsIHByb21pc2VzIGFyZSBncmVhdCBjb21wb3NhYmxlIHByaW1pdGl2ZXMuXG5cbiAgICAgIGBgYGpzXG4gICAgICBQcm9taXNlLmFsbChbXG4gICAgICAgIGdldEpTT04oJy9wb3N0cycpLFxuICAgICAgICBnZXRKU09OKCcvY29tbWVudHMnKVxuICAgICAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpe1xuICAgICAgICB2YWx1ZXNbMF0gLy8gPT4gcG9zdHNKU09OXG4gICAgICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT05cblxuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgQGNsYXNzIFByb21pc2VcbiAgICAgIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmVyXG4gICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gICAgICBAY29uc3RydWN0b3JcbiAgICAqL1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlKHJlc29sdmVyKSB7XG4gICAgICB0aGlzW2xpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBST01JU0VfSURdID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbmV4dElkKCk7XG4gICAgICB0aGlzLl9yZXN1bHQgPSB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG5cbiAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wICE9PSByZXNvbHZlcikge1xuICAgICAgICB0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicgJiYgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzUmVzb2x2ZXIoKTtcbiAgICAgICAgdGhpcyBpbnN0YW5jZW9mIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlID8gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpIDogbGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzTmV3KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuYWxsID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRkZWZhdWx0O1xuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnJhY2UgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRkZWZhdWx0O1xuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnJlc29sdmUgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRkZWZhdWx0O1xuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnJlamVjdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkZGVmYXVsdDtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5fc2V0U2NoZWR1bGVyID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHNldFNjaGVkdWxlcjtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5fc2V0QXNhcCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzZXRBc2FwO1xuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLl9hc2FwID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXA7XG5cbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5wcm90b3R5cGUgPSB7XG4gICAgICBjb25zdHJ1Y3RvcjogbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UsXG5cbiAgICAvKipcbiAgICAgIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLFxuICAgICAgd2hpY2ggcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGVcbiAgICAgIHJlYXNvbiB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblxuICAgICAgYGBganNcbiAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbih1c2VyKXtcbiAgICAgICAgLy8gdXNlciBpcyBhdmFpbGFibGVcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAgIC8vIHVzZXIgaXMgdW5hdmFpbGFibGUsIGFuZCB5b3UgYXJlIGdpdmVuIHRoZSByZWFzb24gd2h5XG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBDaGFpbmluZ1xuICAgICAgLS0tLS0tLS1cblxuICAgICAgVGhlIHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4gIFRoaXMgc2Vjb25kLCAnZG93bnN0cmVhbSdcbiAgICAgIHByb21pc2UgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmaXJzdCBwcm9taXNlJ3MgZnVsZmlsbG1lbnRcbiAgICAgIG9yIHJlamVjdGlvbiBoYW5kbGVyLCBvciByZWplY3RlZCBpZiB0aGUgaGFuZGxlciB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuXG4gICAgICBgYGBqc1xuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHJldHVybiB1c2VyLm5hbWU7XG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIHJldHVybiAnZGVmYXVsdCBuYW1lJztcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7XG4gICAgICAgIC8vIElmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgdXNlck5hbWVgIHdpbGwgYmUgdGhlIHVzZXIncyBuYW1lLCBvdGhlcndpc2UgaXRcbiAgICAgICAgLy8gd2lsbCBiZSBgJ2RlZmF1bHQgbmFtZSdgXG4gICAgICB9KTtcblxuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknKTtcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jyk7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIC8vIGlmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgcmVhc29uYCB3aWxsIGJlICdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScuXG4gICAgICAgIC8vIElmIGBmaW5kVXNlcmAgcmVqZWN0ZWQsIGByZWFzb25gIHdpbGwgYmUgJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknLlxuICAgICAgfSk7XG4gICAgICBgYGBcbiAgICAgIElmIHRoZSBkb3duc3RyZWFtIHByb21pc2UgZG9lcyBub3Qgc3BlY2lmeSBhIHJlamVjdGlvbiBoYW5kbGVyLCByZWplY3Rpb24gcmVhc29ucyB3aWxsIGJlIHByb3BhZ2F0ZWQgZnVydGhlciBkb3duc3RyZWFtLlxuXG4gICAgICBgYGBqc1xuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBQZWRhZ29naWNhbEV4Y2VwdGlvbignVXBzdHJlYW0gZXJyb3InKTtcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgLy8gVGhlIGBQZWRnYWdvY2lhbEV4Y2VwdGlvbmAgaXMgcHJvcGFnYXRlZCBhbGwgdGhlIHdheSBkb3duIHRvIGhlcmVcbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIEFzc2ltaWxhdGlvblxuICAgICAgLS0tLS0tLS0tLS0tXG5cbiAgICAgIFNvbWV0aW1lcyB0aGUgdmFsdWUgeW91IHdhbnQgdG8gcHJvcGFnYXRlIHRvIGEgZG93bnN0cmVhbSBwcm9taXNlIGNhbiBvbmx5IGJlXG4gICAgICByZXRyaWV2ZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJldHVybmluZyBhIHByb21pc2UgaW4gdGhlXG4gICAgICBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gaGFuZGxlci4gVGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIHRoZW4gYmUgcGVuZGluZ1xuICAgICAgdW50aWwgdGhlIHJldHVybmVkIHByb21pc2UgaXMgc2V0dGxlZC4gVGhpcyBpcyBjYWxsZWQgKmFzc2ltaWxhdGlvbiouXG5cbiAgICAgIGBgYGpzXG4gICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAgICAgLy8gVGhlIHVzZXIncyBjb21tZW50cyBhcmUgbm93IGF2YWlsYWJsZVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgSWYgdGhlIGFzc2ltbGlhdGVkIHByb21pc2UgcmVqZWN0cywgdGhlbiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgYWxzbyByZWplY3QuXG5cbiAgICAgIGBgYGpzXG4gICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCBmdWxmaWxscywgd2UnbGwgaGF2ZSB0aGUgdmFsdWUgaGVyZVxuICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIHJlamVjdHMsIHdlJ2xsIGhhdmUgdGhlIHJlYXNvbiBoZXJlXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBTaW1wbGUgRXhhbXBsZVxuICAgICAgLS0tLS0tLS0tLS0tLS1cblxuICAgICAgU3luY2hyb25vdXMgRXhhbXBsZVxuXG4gICAgICBgYGBqYXZhc2NyaXB0XG4gICAgICB2YXIgcmVzdWx0O1xuXG4gICAgICB0cnkge1xuICAgICAgICByZXN1bHQgPSBmaW5kUmVzdWx0KCk7XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH1cbiAgICAgIGBgYFxuXG4gICAgICBFcnJiYWNrIEV4YW1wbGVcblxuICAgICAgYGBganNcbiAgICAgIGZpbmRSZXN1bHQoZnVuY3Rpb24ocmVzdWx0LCBlcnIpe1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgUHJvbWlzZSBFeGFtcGxlO1xuXG4gICAgICBgYGBqYXZhc2NyaXB0XG4gICAgICBmaW5kUmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBBZHZhbmNlZCBFeGFtcGxlXG4gICAgICAtLS0tLS0tLS0tLS0tLVxuXG4gICAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG5cbiAgICAgIGBgYGphdmFzY3JpcHRcbiAgICAgIHZhciBhdXRob3IsIGJvb2tzO1xuXG4gICAgICB0cnkge1xuICAgICAgICBhdXRob3IgPSBmaW5kQXV0aG9yKCk7XG4gICAgICAgIGJvb2tzICA9IGZpbmRCb29rc0J5QXV0aG9yKGF1dGhvcik7XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH1cbiAgICAgIGBgYFxuXG4gICAgICBFcnJiYWNrIEV4YW1wbGVcblxuICAgICAgYGBganNcblxuICAgICAgZnVuY3Rpb24gZm91bmRCb29rcyhib29rcykge1xuXG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGZhaWx1cmUocmVhc29uKSB7XG5cbiAgICAgIH1cblxuICAgICAgZmluZEF1dGhvcihmdW5jdGlvbihhdXRob3IsIGVycil7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmaW5kQm9vb2tzQnlBdXRob3IoYXV0aG9yLCBmdW5jdGlvbihib29rcywgZXJyKSB7XG4gICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIGZvdW5kQm9va3MoYm9va3MpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICBmYWlsdXJlKHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgUHJvbWlzZSBFeGFtcGxlO1xuXG4gICAgICBgYGBqYXZhc2NyaXB0XG4gICAgICBmaW5kQXV0aG9yKCkuXG4gICAgICAgIHRoZW4oZmluZEJvb2tzQnlBdXRob3IpLlxuICAgICAgICB0aGVuKGZ1bmN0aW9uKGJvb2tzKXtcbiAgICAgICAgICAvLyBmb3VuZCBib29rc1xuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIEBtZXRob2QgdGhlblxuICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gb25GdWxmaWxsZWRcbiAgICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0ZWRcbiAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICAgKi9cbiAgICAgIHRoZW46IGxpYiRlczYkcHJvbWlzZSR0aGVuJCRkZWZhdWx0LFxuXG4gICAgLyoqXG4gICAgICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXG4gICAgICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LlxuXG4gICAgICBgYGBqc1xuICAgICAgZnVuY3Rpb24gZmluZEF1dGhvcigpe1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkbid0IGZpbmQgdGhhdCBhdXRob3InKTtcbiAgICAgIH1cblxuICAgICAgLy8gc3luY2hyb25vdXNcbiAgICAgIHRyeSB7XG4gICAgICAgIGZpbmRBdXRob3IoKTtcbiAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgICB9XG5cbiAgICAgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcbiAgICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgQG1ldGhvZCBjYXRjaFxuICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3Rpb25cbiAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICAgKi9cbiAgICAgICdjYXRjaCc6IGZ1bmN0aW9uKG9uUmVqZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24pO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3I7XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IoQ29uc3RydWN0b3IsIGlucHV0KSB7XG4gICAgICB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG4gICAgICB0aGlzLnByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG5cbiAgICAgIGlmICghdGhpcy5wcm9taXNlW2xpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBST01JU0VfSURdKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG1ha2VQcm9taXNlKHRoaXMucHJvbWlzZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICAgIHRoaXMuX2lucHV0ICAgICA9IGlucHV0O1xuICAgICAgICB0aGlzLmxlbmd0aCAgICAgPSBpbnB1dC5sZW5ndGg7XG4gICAgICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcblxuICAgICAgICB0aGlzLl9yZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpO1xuXG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5sZW5ndGggfHwgMDtcbiAgICAgICAgICB0aGlzLl9lbnVtZXJhdGUoKTtcbiAgICAgICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdCh0aGlzLnByb21pc2UsIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCR2YWxpZGF0aW9uRXJyb3IoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJHZhbGlkYXRpb25FcnJvcigpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpO1xuICAgIH1cblxuICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fZW51bWVyYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbGVuZ3RoICA9IHRoaXMubGVuZ3RoO1xuICAgICAgdmFyIGlucHV0ICAgPSB0aGlzLl9pbnB1dDtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IHRoaXMuX3N0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HICYmIGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLl9lYWNoRW50cnkoaW5wdXRbaV0sIGkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX2VhY2hFbnRyeSA9IGZ1bmN0aW9uKGVudHJ5LCBpKSB7XG4gICAgICB2YXIgYyA9IHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3I7XG4gICAgICB2YXIgcmVzb2x2ZSA9IGMucmVzb2x2ZTtcblxuICAgICAgaWYgKHJlc29sdmUgPT09IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJGRlZmF1bHQpIHtcbiAgICAgICAgdmFyIHRoZW4gPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRnZXRUaGVuKGVudHJ5KTtcblxuICAgICAgICBpZiAodGhlbiA9PT0gbGliJGVzNiRwcm9taXNlJHRoZW4kJGRlZmF1bHQgJiZcbiAgICAgICAgICAgIGVudHJ5Ll9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuICAgICAgICAgIHRoaXMuX3NldHRsZWRBdChlbnRyeS5fc3RhdGUsIGksIGVudHJ5Ll9yZXN1bHQpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGVuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG4gICAgICAgICAgdGhpcy5fcmVzdWx0W2ldID0gZW50cnk7XG4gICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGRlZmF1bHQpIHtcbiAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBjKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgZW50cnksIHRoZW4pO1xuICAgICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChwcm9taXNlLCBpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQobmV3IGMoZnVuY3Rpb24ocmVzb2x2ZSkgeyByZXNvbHZlKGVudHJ5KTsgfSksIGkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQocmVzb2x2ZShlbnRyeSksIGkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX3NldHRsZWRBdCA9IGZ1bmN0aW9uKHN0YXRlLCBpLCB2YWx1ZSkge1xuICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG5cbiAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuICAgICAgICB0aGlzLl9yZW1haW5pbmctLTtcblxuICAgICAgICBpZiAoc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9yZXN1bHRbaV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbihwcm9taXNlLCBpKSB7XG4gICAgICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cbiAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShwcm9taXNlLCB1bmRlZmluZWQsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGVudW1lcmF0b3IuX3NldHRsZWRBdChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQsIGksIHZhbHVlKTtcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICBlbnVtZXJhdG9yLl9zZXR0bGVkQXQobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQsIGksIHJlYXNvbik7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkcG9seWZpbGwoKSB7XG4gICAgICB2YXIgbG9jYWw7XG5cbiAgICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGxvY2FsID0gZ2xvYmFsO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBsb2NhbCA9IHNlbGY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGxvY2FsID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncG9seWZpbGwgZmFpbGVkIGJlY2F1c2UgZ2xvYmFsIG9iamVjdCBpcyB1bmF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gICAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgUCA9IGxvY2FsLlByb21pc2U7XG5cbiAgICAgIGlmIChQICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChQLnJlc29sdmUoKSkgPT09ICdbb2JqZWN0IFByb21pc2VdJyAmJiAhUC5jYXN0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbG9jYWwuUHJvbWlzZSA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0O1xuICAgIH1cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRwb2x5ZmlsbDtcblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlID0ge1xuICAgICAgJ1Byb21pc2UnOiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdCxcbiAgICAgICdwb2x5ZmlsbCc6IGxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkZGVmYXVsdFxuICAgIH07XG5cbiAgICAvKiBnbG9iYWwgZGVmaW5lOnRydWUgbW9kdWxlOnRydWUgd2luZG93OiB0cnVlICovXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lWydhbWQnXSkge1xuICAgICAgZGVmaW5lKGZ1bmN0aW9uKCkgeyByZXR1cm4gbGliJGVzNiRwcm9taXNlJHVtZCQkRVM2UHJvbWlzZTsgfSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGVbJ2V4cG9ydHMnXSkge1xuICAgICAgbW9kdWxlWydleHBvcnRzJ10gPSBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzWydFUzZQcm9taXNlJ10gPSBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlO1xuICAgIH1cblxuICAgIGxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkZGVmYXVsdCgpO1xufSkuY2FsbCh0aGlzKTtcblxuXG5cbi8qKiogRVhQT1JUUyBGUk9NIGV4cG9ydHMtbG9hZGVyICoqKi9cbm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsLlByb21pc2U7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vZXhwb3J0cy1sb2FkZXI/Z2xvYmFsLlByb21pc2UhLi9+L2VzNi1wcm9taXNlL2Rpc3QvZXM2LXByb21pc2UuanNcbiAqKiBtb2R1bGUgaWQgPSA3NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiKGZ1bmN0aW9uKHNlbGYpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGlmIChzZWxmLmZldGNoKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB2YXIgc3VwcG9ydCA9IHtcbiAgICBzZWFyY2hQYXJhbXM6ICdVUkxTZWFyY2hQYXJhbXMnIGluIHNlbGYsXG4gICAgaXRlcmFibGU6ICdTeW1ib2wnIGluIHNlbGYgJiYgJ2l0ZXJhdG9yJyBpbiBTeW1ib2wsXG4gICAgYmxvYjogJ0ZpbGVSZWFkZXInIGluIHNlbGYgJiYgJ0Jsb2InIGluIHNlbGYgJiYgKGZ1bmN0aW9uKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbmV3IEJsb2IoKVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH0pKCksXG4gICAgZm9ybURhdGE6ICdGb3JtRGF0YScgaW4gc2VsZixcbiAgICBhcnJheUJ1ZmZlcjogJ0FycmF5QnVmZmVyJyBpbiBzZWxmXG4gIH1cblxuICBmdW5jdGlvbiBub3JtYWxpemVOYW1lKG5hbWUpIHtcbiAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICBuYW1lID0gU3RyaW5nKG5hbWUpXG4gICAgfVxuICAgIGlmICgvW15hLXowLTlcXC0jJCUmJyorLlxcXl9gfH5dL2kudGVzdChuYW1lKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBjaGFyYWN0ZXIgaW4gaGVhZGVyIGZpZWxkIG5hbWUnKVxuICAgIH1cbiAgICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpXG4gIH1cblxuICBmdW5jdGlvbiBub3JtYWxpemVWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICB2YWx1ZSA9IFN0cmluZyh2YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cblxuICAvLyBCdWlsZCBhIGRlc3RydWN0aXZlIGl0ZXJhdG9yIGZvciB0aGUgdmFsdWUgbGlzdFxuICBmdW5jdGlvbiBpdGVyYXRvckZvcihpdGVtcykge1xuICAgIHZhciBpdGVyYXRvciA9IHtcbiAgICAgIG5leHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBpdGVtcy5zaGlmdCgpXG4gICAgICAgIHJldHVybiB7ZG9uZTogdmFsdWUgPT09IHVuZGVmaW5lZCwgdmFsdWU6IHZhbHVlfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gICAgICBpdGVyYXRvcltTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvclxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpdGVyYXRvclxuICB9XG5cbiAgZnVuY3Rpb24gSGVhZGVycyhoZWFkZXJzKSB7XG4gICAgdGhpcy5tYXAgPSB7fVxuXG4gICAgaWYgKGhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzKSB7XG4gICAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgdmFsdWUpXG4gICAgICB9LCB0aGlzKVxuXG4gICAgfSBlbHNlIGlmIChoZWFkZXJzKSB7XG4gICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhoZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgaGVhZGVyc1tuYW1lXSlcbiAgICAgIH0sIHRoaXMpXG4gICAgfVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICBuYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKVxuICAgIHZhbHVlID0gbm9ybWFsaXplVmFsdWUodmFsdWUpXG4gICAgdmFyIGxpc3QgPSB0aGlzLm1hcFtuYW1lXVxuICAgIGlmICghbGlzdCkge1xuICAgICAgbGlzdCA9IFtdXG4gICAgICB0aGlzLm1hcFtuYW1lXSA9IGxpc3RcbiAgICB9XG4gICAgbGlzdC5wdXNoKHZhbHVlKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGVbJ2RlbGV0ZSddID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGRlbGV0ZSB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciB2YWx1ZXMgPSB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXVxuICAgIHJldHVybiB2YWx1ZXMgPyB2YWx1ZXNbMF0gOiBudWxsXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldIHx8IFtdXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwLmhhc093blByb3BlcnR5KG5vcm1hbGl6ZU5hbWUobmFtZSkpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldID0gW25vcm1hbGl6ZVZhbHVlKHZhbHVlKV1cbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMubWFwKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHRoaXMubWFwW25hbWVdLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB2YWx1ZSwgbmFtZSwgdGhpcylcbiAgICAgIH0sIHRoaXMpXG4gICAgfSwgdGhpcylcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaXRlbXMgPSBbXVxuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkgeyBpdGVtcy5wdXNoKG5hbWUpIH0pXG4gICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUudmFsdWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW11cbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHsgaXRlbXMucHVzaCh2YWx1ZSkgfSlcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW11cbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHsgaXRlbXMucHVzaChbbmFtZSwgdmFsdWVdKSB9KVxuICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcbiAgfVxuXG4gIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gICAgSGVhZGVycy5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXNcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnN1bWVkKGJvZHkpIHtcbiAgICBpZiAoYm9keS5ib2R5VXNlZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpKVxuICAgIH1cbiAgICBib2R5LmJvZHlVc2VkID0gdHJ1ZVxuICB9XG5cbiAgZnVuY3Rpb24gZmlsZVJlYWRlclJlYWR5KHJlYWRlcikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzb2x2ZShyZWFkZXIucmVzdWx0KVxuICAgICAgfVxuICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KHJlYWRlci5lcnJvcilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc0FycmF5QnVmZmVyKGJsb2IpIHtcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iKVxuICAgIHJldHVybiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gICAgcmVhZGVyLnJlYWRBc1RleHQoYmxvYilcbiAgICByZXR1cm4gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcbiAgfVxuXG4gIGZ1bmN0aW9uIEJvZHkoKSB7XG4gICAgdGhpcy5ib2R5VXNlZCA9IGZhbHNlXG5cbiAgICB0aGlzLl9pbml0Qm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcbiAgICAgIHRoaXMuX2JvZHlJbml0ID0gYm9keVxuICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHlcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5ibG9iICYmIEJsb2IucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUJsb2IgPSBib2R5XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuZm9ybURhdGEgJiYgRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUZvcm1EYXRhID0gYm9keVxuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5LnRvU3RyaW5nKClcbiAgICAgIH0gZWxzZSBpZiAoIWJvZHkpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSAnJ1xuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyICYmIEFycmF5QnVmZmVyLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIC8vIE9ubHkgc3VwcG9ydCBBcnJheUJ1ZmZlcnMgZm9yIFBPU1QgbWV0aG9kLlxuICAgICAgICAvLyBSZWNlaXZpbmcgQXJyYXlCdWZmZXJzIGhhcHBlbnMgdmlhIEJsb2JzLCBpbnN0ZWFkLlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bnN1cHBvcnRlZCBCb2R5SW5pdCB0eXBlJylcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSkge1xuICAgICAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ3RleHQvcGxhaW47Y2hhcnNldD1VVEYtOCcpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUJsb2IgJiYgdGhpcy5fYm9keUJsb2IudHlwZSkge1xuICAgICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsIHRoaXMuX2JvZHlCbG9iLnR5cGUpXG4gICAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04JylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdXBwb3J0LmJsb2IpIHtcbiAgICAgIHRoaXMuYmxvYiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0ZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUJsb2IpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIGJsb2InKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ibG9iKCkudGhlbihyZWFkQmxvYkFzQXJyYXlCdWZmZXIpXG4gICAgICB9XG5cbiAgICAgIHRoaXMudGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0ZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICAgIHJldHVybiByZWFkQmxvYkFzVGV4dCh0aGlzLl9ib2R5QmxvYilcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgdGV4dCcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcbiAgICAgICAgcmV0dXJuIHJlamVjdGVkID8gcmVqZWN0ZWQgOiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keVRleHQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnQuZm9ybURhdGEpIHtcbiAgICAgIHRoaXMuZm9ybURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oZGVjb2RlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuanNvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oSlNPTi5wYXJzZSlcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLy8gSFRUUCBtZXRob2RzIHdob3NlIGNhcGl0YWxpemF0aW9uIHNob3VsZCBiZSBub3JtYWxpemVkXG4gIHZhciBtZXRob2RzID0gWydERUxFVEUnLCAnR0VUJywgJ0hFQUQnLCAnT1BUSU9OUycsICdQT1NUJywgJ1BVVCddXG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kKG1ldGhvZCkge1xuICAgIHZhciB1cGNhc2VkID0gbWV0aG9kLnRvVXBwZXJDYXNlKClcbiAgICByZXR1cm4gKG1ldGhvZHMuaW5kZXhPZih1cGNhc2VkKSA+IC0xKSA/IHVwY2FzZWQgOiBtZXRob2RcbiAgfVxuXG4gIGZ1bmN0aW9uIFJlcXVlc3QoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgIHZhciBib2R5ID0gb3B0aW9ucy5ib2R5XG4gICAgaWYgKFJlcXVlc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoaW5wdXQpKSB7XG4gICAgICBpZiAoaW5wdXQuYm9keVVzZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQWxyZWFkeSByZWFkJylcbiAgICAgIH1cbiAgICAgIHRoaXMudXJsID0gaW5wdXQudXJsXG4gICAgICB0aGlzLmNyZWRlbnRpYWxzID0gaW5wdXQuY3JlZGVudGlhbHNcbiAgICAgIGlmICghb3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKGlucHV0LmhlYWRlcnMpXG4gICAgICB9XG4gICAgICB0aGlzLm1ldGhvZCA9IGlucHV0Lm1ldGhvZFxuICAgICAgdGhpcy5tb2RlID0gaW5wdXQubW9kZVxuICAgICAgaWYgKCFib2R5KSB7XG4gICAgICAgIGJvZHkgPSBpbnB1dC5fYm9keUluaXRcbiAgICAgICAgaW5wdXQuYm9keVVzZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudXJsID0gaW5wdXRcbiAgICB9XG5cbiAgICB0aGlzLmNyZWRlbnRpYWxzID0gb3B0aW9ucy5jcmVkZW50aWFscyB8fCB0aGlzLmNyZWRlbnRpYWxzIHx8ICdvbWl0J1xuICAgIGlmIChvcHRpb25zLmhlYWRlcnMgfHwgIXRoaXMuaGVhZGVycykge1xuICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuICAgIH1cbiAgICB0aGlzLm1ldGhvZCA9IG5vcm1hbGl6ZU1ldGhvZChvcHRpb25zLm1ldGhvZCB8fCB0aGlzLm1ldGhvZCB8fCAnR0VUJylcbiAgICB0aGlzLm1vZGUgPSBvcHRpb25zLm1vZGUgfHwgdGhpcy5tb2RlIHx8IG51bGxcbiAgICB0aGlzLnJlZmVycmVyID0gbnVsbFxuXG4gICAgaWYgKCh0aGlzLm1ldGhvZCA9PT0gJ0dFVCcgfHwgdGhpcy5tZXRob2QgPT09ICdIRUFEJykgJiYgYm9keSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm9keSBub3QgYWxsb3dlZCBmb3IgR0VUIG9yIEhFQUQgcmVxdWVzdHMnKVxuICAgIH1cbiAgICB0aGlzLl9pbml0Qm9keShib2R5KVxuICB9XG5cbiAgUmVxdWVzdC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFJlcXVlc3QodGhpcylcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlY29kZShib2R5KSB7XG4gICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKVxuICAgIGJvZHkudHJpbSgpLnNwbGl0KCcmJykuZm9yRWFjaChmdW5jdGlvbihieXRlcykge1xuICAgICAgaWYgKGJ5dGVzKSB7XG4gICAgICAgIHZhciBzcGxpdCA9IGJ5dGVzLnNwbGl0KCc9JylcbiAgICAgICAgdmFyIG5hbWUgPSBzcGxpdC5zaGlmdCgpLnJlcGxhY2UoL1xcKy9nLCAnICcpXG4gICAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJz0nKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuICAgICAgICBmb3JtLmFwcGVuZChkZWNvZGVVUklDb21wb25lbnQobmFtZSksIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gZm9ybVxuICB9XG5cbiAgZnVuY3Rpb24gaGVhZGVycyh4aHIpIHtcbiAgICB2YXIgaGVhZCA9IG5ldyBIZWFkZXJzKClcbiAgICB2YXIgcGFpcnMgPSAoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpIHx8ICcnKS50cmltKCkuc3BsaXQoJ1xcbicpXG4gICAgcGFpcnMuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIpIHtcbiAgICAgIHZhciBzcGxpdCA9IGhlYWRlci50cmltKCkuc3BsaXQoJzonKVxuICAgICAgdmFyIGtleSA9IHNwbGl0LnNoaWZ0KCkudHJpbSgpXG4gICAgICB2YXIgdmFsdWUgPSBzcGxpdC5qb2luKCc6JykudHJpbSgpXG4gICAgICBoZWFkLmFwcGVuZChrZXksIHZhbHVlKVxuICAgIH0pXG4gICAgcmV0dXJuIGhlYWRcbiAgfVxuXG4gIEJvZHkuY2FsbChSZXF1ZXN0LnByb3RvdHlwZSlcblxuICBmdW5jdGlvbiBSZXNwb25zZShib2R5SW5pdCwgb3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHt9XG4gICAgfVxuXG4gICAgdGhpcy50eXBlID0gJ2RlZmF1bHQnXG4gICAgdGhpcy5zdGF0dXMgPSBvcHRpb25zLnN0YXR1c1xuICAgIHRoaXMub2sgPSB0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDBcbiAgICB0aGlzLnN0YXR1c1RleHQgPSBvcHRpb25zLnN0YXR1c1RleHRcbiAgICB0aGlzLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzID8gb3B0aW9ucy5oZWFkZXJzIDogbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuICAgIHRoaXMudXJsID0gb3B0aW9ucy51cmwgfHwgJydcbiAgICB0aGlzLl9pbml0Qm9keShib2R5SW5pdClcbiAgfVxuXG4gIEJvZHkuY2FsbChSZXNwb25zZS5wcm90b3R5cGUpXG5cbiAgUmVzcG9uc2UucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZSh0aGlzLl9ib2R5SW5pdCwge1xuICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcbiAgICAgIHN0YXR1c1RleHQ6IHRoaXMuc3RhdHVzVGV4dCxcbiAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHRoaXMuaGVhZGVycyksXG4gICAgICB1cmw6IHRoaXMudXJsXG4gICAgfSlcbiAgfVxuXG4gIFJlc3BvbnNlLmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IDAsIHN0YXR1c1RleHQ6ICcnfSlcbiAgICByZXNwb25zZS50eXBlID0gJ2Vycm9yJ1xuICAgIHJldHVybiByZXNwb25zZVxuICB9XG5cbiAgdmFyIHJlZGlyZWN0U3RhdHVzZXMgPSBbMzAxLCAzMDIsIDMwMywgMzA3LCAzMDhdXG5cbiAgUmVzcG9uc2UucmVkaXJlY3QgPSBmdW5jdGlvbih1cmwsIHN0YXR1cykge1xuICAgIGlmIChyZWRpcmVjdFN0YXR1c2VzLmluZGV4T2Yoc3RhdHVzKSA9PT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHN0YXR1cyBjb2RlJylcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IHN0YXR1cywgaGVhZGVyczoge2xvY2F0aW9uOiB1cmx9fSlcbiAgfVxuXG4gIHNlbGYuSGVhZGVycyA9IEhlYWRlcnNcbiAgc2VsZi5SZXF1ZXN0ID0gUmVxdWVzdFxuICBzZWxmLlJlc3BvbnNlID0gUmVzcG9uc2VcblxuICBzZWxmLmZldGNoID0gZnVuY3Rpb24oaW5wdXQsIGluaXQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcmVxdWVzdFxuICAgICAgaWYgKFJlcXVlc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoaW5wdXQpICYmICFpbml0KSB7XG4gICAgICAgIHJlcXVlc3QgPSBpbnB1dFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KGlucHV0LCBpbml0KVxuICAgICAgfVxuXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcblxuICAgICAgZnVuY3Rpb24gcmVzcG9uc2VVUkwoKSB7XG4gICAgICAgIGlmICgncmVzcG9uc2VVUkwnIGluIHhocikge1xuICAgICAgICAgIHJldHVybiB4aHIucmVzcG9uc2VVUkxcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEF2b2lkIHNlY3VyaXR5IHdhcm5pbmdzIG9uIGdldFJlc3BvbnNlSGVhZGVyIHdoZW4gbm90IGFsbG93ZWQgYnkgQ09SU1xuICAgICAgICBpZiAoL15YLVJlcXVlc3QtVVJMOi9tLnRlc3QoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSkge1xuICAgICAgICAgIHJldHVybiB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ1gtUmVxdWVzdC1VUkwnKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgc3RhdHVzOiB4aHIuc3RhdHVzLFxuICAgICAgICAgIHN0YXR1c1RleHQ6IHhoci5zdGF0dXNUZXh0LFxuICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoeGhyKSxcbiAgICAgICAgICB1cmw6IHJlc3BvbnNlVVJMKClcbiAgICAgICAgfVxuICAgICAgICB2YXIgYm9keSA9ICdyZXNwb25zZScgaW4geGhyID8geGhyLnJlc3BvbnNlIDogeGhyLnJlc3BvbnNlVGV4dFxuICAgICAgICByZXNvbHZlKG5ldyBSZXNwb25zZShib2R5LCBvcHRpb25zKSlcbiAgICAgIH1cblxuICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcbiAgICAgIH1cblxuICAgICAgeGhyLm9udGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IGZhaWxlZCcpKVxuICAgICAgfVxuXG4gICAgICB4aHIub3BlbihyZXF1ZXN0Lm1ldGhvZCwgcmVxdWVzdC51cmwsIHRydWUpXG5cbiAgICAgIGlmIChyZXF1ZXN0LmNyZWRlbnRpYWxzID09PSAnaW5jbHVkZScpIHtcbiAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKCdyZXNwb25zZVR5cGUnIGluIHhociAmJiBzdXBwb3J0LmJsb2IpIHtcbiAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJ1xuICAgICAgfVxuXG4gICAgICByZXF1ZXN0LmhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihuYW1lLCB2YWx1ZSlcbiAgICAgIH0pXG5cbiAgICAgIHhoci5zZW5kKHR5cGVvZiByZXF1ZXN0Ll9ib2R5SW5pdCA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogcmVxdWVzdC5fYm9keUluaXQpXG4gICAgfSlcbiAgfVxuICBzZWxmLmZldGNoLnBvbHlmaWxsID0gdHJ1ZVxufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMpO1xuXG5cbi8qKiogRVhQT1JUUyBGUk9NIGV4cG9ydHMtbG9hZGVyICoqKi9cbm1vZHVsZS5leHBvcnRzID0gc2VsZi5mZXRjaDtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9leHBvcnRzLWxvYWRlcj9zZWxmLmZldGNoIS4vfi93aGF0d2ctZmV0Y2gvZmV0Y2guanNcbiAqKiBtb2R1bGUgaWQgPSA3N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdldE5hdGl2ZSA9IHJlcXVpcmUoJy4vX2dldE5hdGl2ZScpLFxuICAgIHJvb3QgPSByZXF1aXJlKCcuL19yb290Jyk7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cbnZhciBEYXRhVmlldyA9IGdldE5hdGl2ZShyb290LCAnRGF0YVZpZXcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBEYXRhVmlldztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fRGF0YVZpZXcuanNcbiAqKiBtb2R1bGUgaWQgPSA3OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGhhc2hDbGVhciA9IHJlcXVpcmUoJy4vX2hhc2hDbGVhcicpLFxuICAgIGhhc2hEZWxldGUgPSByZXF1aXJlKCcuL19oYXNoRGVsZXRlJyksXG4gICAgaGFzaEdldCA9IHJlcXVpcmUoJy4vX2hhc2hHZXQnKSxcbiAgICBoYXNoSGFzID0gcmVxdWlyZSgnLi9faGFzaEhhcycpLFxuICAgIGhhc2hTZXQgPSByZXF1aXJlKCcuL19oYXNoU2V0Jyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGhhc2ggb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBIYXNoKGVudHJpZXMpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBlbnRyaWVzID8gZW50cmllcy5sZW5ndGggOiAwO1xuXG4gIHRoaXMuY2xlYXIoKTtcbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcbiAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pO1xuICB9XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBIYXNoYC5cbkhhc2gucHJvdG90eXBlLmNsZWFyID0gaGFzaENsZWFyO1xuSGFzaC5wcm90b3R5cGVbJ2RlbGV0ZSddID0gaGFzaERlbGV0ZTtcbkhhc2gucHJvdG90eXBlLmdldCA9IGhhc2hHZXQ7XG5IYXNoLnByb3RvdHlwZS5oYXMgPSBoYXNoSGFzO1xuSGFzaC5wcm90b3R5cGUuc2V0ID0gaGFzaFNldDtcblxubW9kdWxlLmV4cG9ydHMgPSBIYXNoO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19IYXNoLmpzXG4gKiogbW9kdWxlIGlkID0gNzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnZXROYXRpdmUgPSByZXF1aXJlKCcuL19nZXROYXRpdmUnKSxcbiAgICByb290ID0gcmVxdWlyZSgnLi9fcm9vdCcpO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG52YXIgUHJvbWlzZSA9IGdldE5hdGl2ZShyb290LCAnUHJvbWlzZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFByb21pc2U7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX1Byb21pc2UuanNcbiAqKiBtb2R1bGUgaWQgPSA4MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdldE5hdGl2ZSA9IHJlcXVpcmUoJy4vX2dldE5hdGl2ZScpLFxuICAgIHJvb3QgPSByZXF1aXJlKCcuL19yb290Jyk7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cbnZhciBTZXQgPSBnZXROYXRpdmUocm9vdCwgJ1NldCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fU2V0LmpzXG4gKiogbW9kdWxlIGlkID0gODFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBNYXBDYWNoZSA9IHJlcXVpcmUoJy4vX01hcENhY2hlJyksXG4gICAgc2V0Q2FjaGVBZGQgPSByZXF1aXJlKCcuL19zZXRDYWNoZUFkZCcpLFxuICAgIHNldENhY2hlSGFzID0gcmVxdWlyZSgnLi9fc2V0Q2FjaGVIYXMnKTtcblxuLyoqXG4gKlxuICogQ3JlYXRlcyBhbiBhcnJheSBjYWNoZSBvYmplY3QgdG8gc3RvcmUgdW5pcXVlIHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0FycmF5fSBbdmFsdWVzXSBUaGUgdmFsdWVzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBTZXRDYWNoZSh2YWx1ZXMpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSB2YWx1ZXMgPyB2YWx1ZXMubGVuZ3RoIDogMDtcblxuICB0aGlzLl9fZGF0YV9fID0gbmV3IE1hcENhY2hlO1xuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHRoaXMuYWRkKHZhbHVlc1tpbmRleF0pO1xuICB9XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBTZXRDYWNoZWAuXG5TZXRDYWNoZS5wcm90b3R5cGUuYWRkID0gU2V0Q2FjaGUucHJvdG90eXBlLnB1c2ggPSBzZXRDYWNoZUFkZDtcblNldENhY2hlLnByb3RvdHlwZS5oYXMgPSBzZXRDYWNoZUhhcztcblxubW9kdWxlLmV4cG9ydHMgPSBTZXRDYWNoZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fU2V0Q2FjaGUuanNcbiAqKiBtb2R1bGUgaWQgPSA4MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIHJvb3QgPSByZXF1aXJlKCcuL19yb290Jyk7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIFVpbnQ4QXJyYXkgPSByb290LlVpbnQ4QXJyYXk7XG5cbm1vZHVsZS5leHBvcnRzID0gVWludDhBcnJheTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fVWludDhBcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDgzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi9fZ2V0TmF0aXZlJyksXG4gICAgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xudmFyIFdlYWtNYXAgPSBnZXROYXRpdmUocm9vdCwgJ1dlYWtNYXAnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBXZWFrTWFwO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19XZWFrTWFwLmpzXG4gKiogbW9kdWxlIGlkID0gODRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQSBmYXN0ZXIgYWx0ZXJuYXRpdmUgdG8gYEZ1bmN0aW9uI2FwcGx5YCwgdGhpcyBmdW5jdGlvbiBpbnZva2VzIGBmdW5jYFxuICogd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgYHRoaXNBcmdgIGFuZCB0aGUgYXJndW1lbnRzIG9mIGBhcmdzYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gaW52b2tlLlxuICogQHBhcmFtIHsqfSB0aGlzQXJnIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG4gKiBAcGFyYW0ge0FycmF5fSBhcmdzIFRoZSBhcmd1bWVudHMgdG8gaW52b2tlIGBmdW5jYCB3aXRoLlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc3VsdCBvZiBgZnVuY2AuXG4gKi9cbmZ1bmN0aW9uIGFwcGx5KGZ1bmMsIHRoaXNBcmcsIGFyZ3MpIHtcbiAgdmFyIGxlbmd0aCA9IGFyZ3MubGVuZ3RoO1xuICBzd2l0Y2ggKGxlbmd0aCkge1xuICAgIGNhc2UgMDogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnKTtcbiAgICBjYXNlIDE6IHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYXJnc1swXSk7XG4gICAgY2FzZSAyOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgIGNhc2UgMzogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgfVxuICByZXR1cm4gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhcHBseTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYXBwbHkuanNcbiAqKiBtb2R1bGUgaWQgPSA4NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uc29tZWAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlXG4gKiBzaG9ydGhhbmRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBbYXJyYXldIFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBwYXNzZXMgdGhlIHByZWRpY2F0ZSBjaGVjayxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGFycmF5U29tZShhcnJheSwgcHJlZGljYXRlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYXJyYXlTb21lO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19hcnJheVNvbWUuanNcbiAqKiBtb2R1bGUgaWQgPSA4NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZGVsYXlgIGFuZCBgXy5kZWZlcmAgd2hpY2ggYWNjZXB0cyBhbiBhcnJheVxuICogb2YgYGZ1bmNgIGFyZ3VtZW50cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVsYXkuXG4gKiBAcGFyYW0ge251bWJlcn0gd2FpdCBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheSBpbnZvY2F0aW9uLlxuICogQHBhcmFtIHtPYmplY3R9IGFyZ3MgVGhlIGFyZ3VtZW50cyB0byBwcm92aWRlIHRvIGBmdW5jYC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVyIGlkLlxuICovXG5mdW5jdGlvbiBiYXNlRGVsYXkoZnVuYywgd2FpdCwgYXJncykge1xuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHsgZnVuYy5hcHBseSh1bmRlZmluZWQsIGFyZ3MpOyB9LCB3YWl0KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlRGVsYXk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VEZWxheS5qc1xuICoqIG1vZHVsZSBpZCA9IDg3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZpbmRJbmRleGAgYW5kIGBfLmZpbmRMYXN0SW5kZXhgIHdpdGhvdXRcbiAqIHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmcm9tSW5kZXggVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxuICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSwgZWxzZSBgLTFgLlxuICovXG5mdW5jdGlvbiBiYXNlRmluZEluZGV4KGFycmF5LCBwcmVkaWNhdGUsIGZyb21JbmRleCwgZnJvbVJpZ2h0KSB7XG4gIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICBpbmRleCA9IGZyb21JbmRleCArIChmcm9tUmlnaHQgPyAxIDogLTEpO1xuXG4gIHdoaWxlICgoZnJvbVJpZ2h0ID8gaW5kZXgtLSA6ICsraW5kZXggPCBsZW5ndGgpKSB7XG4gICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgIHJldHVybiBpbmRleDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VGaW5kSW5kZXg7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VGaW5kSW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA4OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5oYXNJbmAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBrZXkgVGhlIGtleSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUhhc0luKG9iamVjdCwga2V5KSB7XG4gIHJldHVybiBvYmplY3QgIT0gbnVsbCAmJiBrZXkgaW4gT2JqZWN0KG9iamVjdCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUhhc0luO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlSGFzSW4uanNcbiAqKiBtb2R1bGUgaWQgPSA4OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIFN0YWNrID0gcmVxdWlyZSgnLi9fU3RhY2snKSxcbiAgICBlcXVhbEFycmF5cyA9IHJlcXVpcmUoJy4vX2VxdWFsQXJyYXlzJyksXG4gICAgZXF1YWxCeVRhZyA9IHJlcXVpcmUoJy4vX2VxdWFsQnlUYWcnKSxcbiAgICBlcXVhbE9iamVjdHMgPSByZXF1aXJlKCcuL19lcXVhbE9iamVjdHMnKSxcbiAgICBnZXRUYWcgPSByZXF1aXJlKCcuL19nZXRUYWcnKSxcbiAgICBpc0FycmF5ID0gcmVxdWlyZSgnLi9pc0FycmF5JyksXG4gICAgaXNIb3N0T2JqZWN0ID0gcmVxdWlyZSgnLi9faXNIb3N0T2JqZWN0JyksXG4gICAgaXNUeXBlZEFycmF5ID0gcmVxdWlyZSgnLi9pc1R5cGVkQXJyYXknKTtcblxuLyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG52YXIgUEFSVElBTF9DT01QQVJFX0ZMQUcgPSAyO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuICAgIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcbiAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJztcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsYCBmb3IgYXJyYXlzIGFuZCBvYmplY3RzIHdoaWNoIHBlcmZvcm1zXG4gKiBkZWVwIGNvbXBhcmlzb25zIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMgZW5hYmxpbmcgb2JqZWN0cyB3aXRoIGNpcmN1bGFyXG4gKiByZWZlcmVuY2VzIHRvIGJlIGNvbXBhcmVkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbYml0bWFza10gVGhlIGJpdG1hc2sgb2YgY29tcGFyaXNvbiBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGBcbiAqICBmb3IgbW9yZSBkZXRhaWxzLlxuICogQHBhcmFtIHtPYmplY3R9IFtzdGFja10gVHJhY2tzIHRyYXZlcnNlZCBgb2JqZWN0YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc0VxdWFsRGVlcChvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSB7XG4gIHZhciBvYmpJc0FyciA9IGlzQXJyYXkob2JqZWN0KSxcbiAgICAgIG90aElzQXJyID0gaXNBcnJheShvdGhlciksXG4gICAgICBvYmpUYWcgPSBhcnJheVRhZyxcbiAgICAgIG90aFRhZyA9IGFycmF5VGFnO1xuXG4gIGlmICghb2JqSXNBcnIpIHtcbiAgICBvYmpUYWcgPSBnZXRUYWcob2JqZWN0KTtcbiAgICBvYmpUYWcgPSBvYmpUYWcgPT0gYXJnc1RhZyA/IG9iamVjdFRhZyA6IG9ialRhZztcbiAgfVxuICBpZiAoIW90aElzQXJyKSB7XG4gICAgb3RoVGFnID0gZ2V0VGFnKG90aGVyKTtcbiAgICBvdGhUYWcgPSBvdGhUYWcgPT0gYXJnc1RhZyA/IG9iamVjdFRhZyA6IG90aFRhZztcbiAgfVxuICB2YXIgb2JqSXNPYmogPSBvYmpUYWcgPT0gb2JqZWN0VGFnICYmICFpc0hvc3RPYmplY3Qob2JqZWN0KSxcbiAgICAgIG90aElzT2JqID0gb3RoVGFnID09IG9iamVjdFRhZyAmJiAhaXNIb3N0T2JqZWN0KG90aGVyKSxcbiAgICAgIGlzU2FtZVRhZyA9IG9ialRhZyA9PSBvdGhUYWc7XG5cbiAgaWYgKGlzU2FtZVRhZyAmJiAhb2JqSXNPYmopIHtcbiAgICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2spO1xuICAgIHJldHVybiAob2JqSXNBcnIgfHwgaXNUeXBlZEFycmF5KG9iamVjdCkpXG4gICAgICA/IGVxdWFsQXJyYXlzKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spXG4gICAgICA6IGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgb2JqVGFnLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKTtcbiAgfVxuICBpZiAoIShiaXRtYXNrICYgUEFSVElBTF9DT01QQVJFX0ZMQUcpKSB7XG4gICAgdmFyIG9iaklzV3JhcHBlZCA9IG9iaklzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCAnX193cmFwcGVkX18nKSxcbiAgICAgICAgb3RoSXNXcmFwcGVkID0gb3RoSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwgJ19fd3JhcHBlZF9fJyk7XG5cbiAgICBpZiAob2JqSXNXcmFwcGVkIHx8IG90aElzV3JhcHBlZCkge1xuICAgICAgdmFyIG9ialVud3JhcHBlZCA9IG9iaklzV3JhcHBlZCA/IG9iamVjdC52YWx1ZSgpIDogb2JqZWN0LFxuICAgICAgICAgIG90aFVud3JhcHBlZCA9IG90aElzV3JhcHBlZCA/IG90aGVyLnZhbHVlKCkgOiBvdGhlcjtcblxuICAgICAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcbiAgICAgIHJldHVybiBlcXVhbEZ1bmMob2JqVW53cmFwcGVkLCBvdGhVbndyYXBwZWQsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFpc1NhbWVUYWcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcbiAgcmV0dXJuIGVxdWFsT2JqZWN0cyhvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlSXNFcXVhbERlZXA7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VJc0VxdWFsRGVlcC5qc1xuICoqIG1vZHVsZSBpZCA9IDkwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgU3RhY2sgPSByZXF1aXJlKCcuL19TdGFjaycpLFxuICAgIGJhc2VJc0VxdWFsID0gcmVxdWlyZSgnLi9fYmFzZUlzRXF1YWwnKTtcblxuLyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG52YXIgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyA9IDEsXG4gICAgUEFSVElBTF9DT01QQVJFX0ZMQUcgPSAyO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzTWF0Y2hgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIG1hdGNoLlxuICogQHBhcmFtIHtBcnJheX0gbWF0Y2hEYXRhIFRoZSBwcm9wZXJ0eSBuYW1lcywgdmFsdWVzLCBhbmQgY29tcGFyZSBmbGFncyB0byBtYXRjaC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBvYmplY3RgIGlzIGEgbWF0Y2gsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzTWF0Y2gob2JqZWN0LCBzb3VyY2UsIG1hdGNoRGF0YSwgY3VzdG9taXplcikge1xuICB2YXIgaW5kZXggPSBtYXRjaERhdGEubGVuZ3RoLFxuICAgICAgbGVuZ3RoID0gaW5kZXgsXG4gICAgICBub0N1c3RvbWl6ZXIgPSAhY3VzdG9taXplcjtcblxuICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICByZXR1cm4gIWxlbmd0aDtcbiAgfVxuICBvYmplY3QgPSBPYmplY3Qob2JqZWN0KTtcbiAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICB2YXIgZGF0YSA9IG1hdGNoRGF0YVtpbmRleF07XG4gICAgaWYgKChub0N1c3RvbWl6ZXIgJiYgZGF0YVsyXSlcbiAgICAgICAgICA/IGRhdGFbMV0gIT09IG9iamVjdFtkYXRhWzBdXVxuICAgICAgICAgIDogIShkYXRhWzBdIGluIG9iamVjdClcbiAgICAgICAgKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgZGF0YSA9IG1hdGNoRGF0YVtpbmRleF07XG4gICAgdmFyIGtleSA9IGRhdGFbMF0sXG4gICAgICAgIG9ialZhbHVlID0gb2JqZWN0W2tleV0sXG4gICAgICAgIHNyY1ZhbHVlID0gZGF0YVsxXTtcblxuICAgIGlmIChub0N1c3RvbWl6ZXIgJiYgZGF0YVsyXSkge1xuICAgICAgaWYgKG9ialZhbHVlID09PSB1bmRlZmluZWQgJiYgIShrZXkgaW4gb2JqZWN0KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBzdGFjayA9IG5ldyBTdGFjaztcbiAgICAgIGlmIChjdXN0b21pemVyKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBjdXN0b21pemVyKG9ialZhbHVlLCBzcmNWYWx1ZSwga2V5LCBvYmplY3QsIHNvdXJjZSwgc3RhY2spO1xuICAgICAgfVxuICAgICAgaWYgKCEocmVzdWx0ID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gYmFzZUlzRXF1YWwoc3JjVmFsdWUsIG9ialZhbHVlLCBjdXN0b21pemVyLCBVTk9SREVSRURfQ09NUEFSRV9GTEFHIHwgUEFSVElBTF9DT01QQVJFX0ZMQUcsIHN0YWNrKVxuICAgICAgICAgICAgOiByZXN1bHRcbiAgICAgICAgICApKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUlzTWF0Y2g7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VJc01hdGNoLmpzXG4gKiogbW9kdWxlIGlkID0gOTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnLi9pc0Z1bmN0aW9uJyksXG4gICAgaXNIb3N0T2JqZWN0ID0gcmVxdWlyZSgnLi9faXNIb3N0T2JqZWN0JyksXG4gICAgaXNNYXNrZWQgPSByZXF1aXJlKCcuL19pc01hc2tlZCcpLFxuICAgIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pc09iamVjdCcpLFxuICAgIHRvU291cmNlID0gcmVxdWlyZSgnLi9fdG9Tb3VyY2UnKTtcblxuLyoqXG4gKiBVc2VkIHRvIG1hdGNoIGBSZWdFeHBgXG4gKiBbc3ludGF4IGNoYXJhY3RlcnNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXBhdHRlcm5zKS5cbiAqL1xudmFyIHJlUmVnRXhwQ2hhciA9IC9bXFxcXF4kLiorPygpW1xcXXt9fF0vZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGhvc3QgY29uc3RydWN0b3JzIChTYWZhcmkpLiAqL1xudmFyIHJlSXNIb3N0Q3RvciA9IC9eXFxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXFxdJC87XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGRlY29tcGlsZWQgc291cmNlIG9mIGZ1bmN0aW9ucy4gKi9cbnZhciBmdW5jVG9TdHJpbmcgPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBpZiBhIG1ldGhvZCBpcyBuYXRpdmUuICovXG52YXIgcmVJc05hdGl2ZSA9IFJlZ0V4cCgnXicgK1xuICBmdW5jVG9TdHJpbmcuY2FsbChoYXNPd25Qcm9wZXJ0eSkucmVwbGFjZShyZVJlZ0V4cENoYXIsICdcXFxcJCYnKVxuICAucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZywgJyQxLio/JykgKyAnJCdcbik7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNOYXRpdmVgIHdpdGhvdXQgYmFkIHNoaW0gY2hlY2tzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzTmF0aXZlKHZhbHVlKSB7XG4gIGlmICghaXNPYmplY3QodmFsdWUpIHx8IGlzTWFza2VkKHZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgcGF0dGVybiA9IChpc0Z1bmN0aW9uKHZhbHVlKSB8fCBpc0hvc3RPYmplY3QodmFsdWUpKSA/IHJlSXNOYXRpdmUgOiByZUlzSG9zdEN0b3I7XG4gIHJldHVybiBwYXR0ZXJuLnRlc3QodG9Tb3VyY2UodmFsdWUpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlSXNOYXRpdmU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VJc05hdGl2ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDkyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZU1hdGNoZXMgPSByZXF1aXJlKCcuL19iYXNlTWF0Y2hlcycpLFxuICAgIGJhc2VNYXRjaGVzUHJvcGVydHkgPSByZXF1aXJlKCcuL19iYXNlTWF0Y2hlc1Byb3BlcnR5JyksXG4gICAgaWRlbnRpdHkgPSByZXF1aXJlKCcuL2lkZW50aXR5JyksXG4gICAgaXNBcnJheSA9IHJlcXVpcmUoJy4vaXNBcnJheScpLFxuICAgIHByb3BlcnR5ID0gcmVxdWlyZSgnLi9wcm9wZXJ0eScpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLml0ZXJhdGVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSBbdmFsdWU9Xy5pZGVudGl0eV0gVGhlIHZhbHVlIHRvIGNvbnZlcnQgdG8gYW4gaXRlcmF0ZWUuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGl0ZXJhdGVlLlxuICovXG5mdW5jdGlvbiBiYXNlSXRlcmF0ZWUodmFsdWUpIHtcbiAgLy8gRG9uJ3Qgc3RvcmUgdGhlIGB0eXBlb2ZgIHJlc3VsdCBpbiBhIHZhcmlhYmxlIHRvIGF2b2lkIGEgSklUIGJ1ZyBpbiBTYWZhcmkgOS5cbiAgLy8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNTYwMzQgZm9yIG1vcmUgZGV0YWlscy5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGlkZW50aXR5O1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gaXNBcnJheSh2YWx1ZSlcbiAgICAgID8gYmFzZU1hdGNoZXNQcm9wZXJ0eSh2YWx1ZVswXSwgdmFsdWVbMV0pXG4gICAgICA6IGJhc2VNYXRjaGVzKHZhbHVlKTtcbiAgfVxuICByZXR1cm4gcHJvcGVydHkodmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VJdGVyYXRlZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUl0ZXJhdGVlLmpzXG4gKiogbW9kdWxlIGlkID0gOTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVLZXlzID0gT2JqZWN0LmtleXM7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ua2V5c2Agd2hpY2ggZG9lc24ndCBza2lwIHRoZSBjb25zdHJ1Y3RvclxuICogcHJvcGVydHkgb2YgcHJvdG90eXBlcyBvciB0cmVhdCBzcGFyc2UgYXJyYXlzIGFzIGRlbnNlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICovXG5mdW5jdGlvbiBiYXNlS2V5cyhvYmplY3QpIHtcbiAgcmV0dXJuIG5hdGl2ZUtleXMoT2JqZWN0KG9iamVjdCkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VLZXlzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlS2V5cy5qc1xuICoqIG1vZHVsZSBpZCA9IDk0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZUlzTWF0Y2ggPSByZXF1aXJlKCcuL19iYXNlSXNNYXRjaCcpLFxuICAgIGdldE1hdGNoRGF0YSA9IHJlcXVpcmUoJy4vX2dldE1hdGNoRGF0YScpLFxuICAgIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlID0gcmVxdWlyZSgnLi9fbWF0Y2hlc1N0cmljdENvbXBhcmFibGUnKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tYXRjaGVzYCB3aGljaCBkb2Vzbid0IGNsb25lIGBzb3VyY2VgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIG1hdGNoLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgc3BlYyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZU1hdGNoZXMoc291cmNlKSB7XG4gIHZhciBtYXRjaERhdGEgPSBnZXRNYXRjaERhdGEoc291cmNlKTtcbiAgaWYgKG1hdGNoRGF0YS5sZW5ndGggPT0gMSAmJiBtYXRjaERhdGFbMF1bMl0pIHtcbiAgICByZXR1cm4gbWF0Y2hlc1N0cmljdENvbXBhcmFibGUobWF0Y2hEYXRhWzBdWzBdLCBtYXRjaERhdGFbMF1bMV0pO1xuICB9XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0ID09PSBzb3VyY2UgfHwgYmFzZUlzTWF0Y2gob2JqZWN0LCBzb3VyY2UsIG1hdGNoRGF0YSk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZU1hdGNoZXM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VNYXRjaGVzLmpzXG4gKiogbW9kdWxlIGlkID0gOTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlSXNFcXVhbCA9IHJlcXVpcmUoJy4vX2Jhc2VJc0VxdWFsJyksXG4gICAgZ2V0ID0gcmVxdWlyZSgnLi9nZXQnKSxcbiAgICBoYXNJbiA9IHJlcXVpcmUoJy4vaGFzSW4nKSxcbiAgICBpc0tleSA9IHJlcXVpcmUoJy4vX2lzS2V5JyksXG4gICAgaXNTdHJpY3RDb21wYXJhYmxlID0gcmVxdWlyZSgnLi9faXNTdHJpY3RDb21wYXJhYmxlJyksXG4gICAgbWF0Y2hlc1N0cmljdENvbXBhcmFibGUgPSByZXF1aXJlKCcuL19tYXRjaGVzU3RyaWN0Q29tcGFyYWJsZScpLFxuICAgIHRvS2V5ID0gcmVxdWlyZSgnLi9fdG9LZXknKTtcblxuLyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG52YXIgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyA9IDEsXG4gICAgUEFSVElBTF9DT01QQVJFX0ZMQUcgPSAyO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1hdGNoZXNQcm9wZXJ0eWAgd2hpY2ggZG9lc24ndCBjbG9uZSBgc3JjVmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHBhcmFtIHsqfSBzcmNWYWx1ZSBUaGUgdmFsdWUgdG8gbWF0Y2guXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzcGVjIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlTWF0Y2hlc1Byb3BlcnR5KHBhdGgsIHNyY1ZhbHVlKSB7XG4gIGlmIChpc0tleShwYXRoKSAmJiBpc1N0cmljdENvbXBhcmFibGUoc3JjVmFsdWUpKSB7XG4gICAgcmV0dXJuIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlKHRvS2V5KHBhdGgpLCBzcmNWYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHZhciBvYmpWYWx1ZSA9IGdldChvYmplY3QsIHBhdGgpO1xuICAgIHJldHVybiAob2JqVmFsdWUgPT09IHVuZGVmaW5lZCAmJiBvYmpWYWx1ZSA9PT0gc3JjVmFsdWUpXG4gICAgICA/IGhhc0luKG9iamVjdCwgcGF0aClcbiAgICAgIDogYmFzZUlzRXF1YWwoc3JjVmFsdWUsIG9ialZhbHVlLCB1bmRlZmluZWQsIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgfCBQQVJUSUFMX0NPTVBBUkVfRkxBRyk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZU1hdGNoZXNQcm9wZXJ0eTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZU1hdGNoZXNQcm9wZXJ0eS5qc1xuICoqIG1vZHVsZSBpZCA9IDk2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZUdldCA9IHJlcXVpcmUoJy4vX2Jhc2VHZXQnKTtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VQcm9wZXJ0eWAgd2hpY2ggc3VwcG9ydHMgZGVlcCBwYXRocy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlUHJvcGVydHlEZWVwKHBhdGgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHJldHVybiBiYXNlR2V0KG9iamVjdCwgcGF0aCk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZVByb3BlcnR5RGVlcDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZVByb3BlcnR5RGVlcC5qc1xuICoqIG1vZHVsZSBpZCA9IDk3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRpbWVzYCB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHNcbiAqIG9yIG1heCBhcnJheSBsZW5ndGggY2hlY2tzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRvIGludm9rZSBgaXRlcmF0ZWVgLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzdWx0cy5cbiAqL1xuZnVuY3Rpb24gYmFzZVRpbWVzKG4sIGl0ZXJhdGVlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcmVzdWx0ID0gQXJyYXkobik7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBuKSB7XG4gICAgcmVzdWx0W2luZGV4XSA9IGl0ZXJhdGVlKGluZGV4KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VUaW1lcztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZVRpbWVzLmpzXG4gKiogbW9kdWxlIGlkID0gOThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBTeW1ib2wgPSByZXF1aXJlKCcuL19TeW1ib2wnKSxcbiAgICBpc1N5bWJvbCA9IHJlcXVpcmUoJy4vaXNTeW1ib2wnKTtcblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgSU5GSU5JVFkgPSAxIC8gMDtcblxuLyoqIFVzZWQgdG8gY29udmVydCBzeW1ib2xzIHRvIHByaW1pdGl2ZXMgYW5kIHN0cmluZ3MuICovXG52YXIgc3ltYm9sUHJvdG8gPSBTeW1ib2wgPyBTeW1ib2wucHJvdG90eXBlIDogdW5kZWZpbmVkLFxuICAgIHN5bWJvbFRvU3RyaW5nID0gc3ltYm9sUHJvdG8gPyBzeW1ib2xQcm90by50b1N0cmluZyA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50b1N0cmluZ2Agd2hpY2ggZG9lc24ndCBjb252ZXJ0IG51bGxpc2hcbiAqIHZhbHVlcyB0byBlbXB0eSBzdHJpbmdzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBiYXNlVG9TdHJpbmcodmFsdWUpIHtcbiAgLy8gRXhpdCBlYXJseSBmb3Igc3RyaW5ncyB0byBhdm9pZCBhIHBlcmZvcm1hbmNlIGhpdCBpbiBzb21lIGVudmlyb25tZW50cy5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIHN5bWJvbFRvU3RyaW5nID8gc3ltYm9sVG9TdHJpbmcuY2FsbCh2YWx1ZSkgOiAnJztcbiAgfVxuICB2YXIgcmVzdWx0ID0gKHZhbHVlICsgJycpO1xuICByZXR1cm4gKHJlc3VsdCA9PSAnMCcgJiYgKDEgLyB2YWx1ZSkgPT0gLUlORklOSVRZKSA/ICctMCcgOiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZVRvU3RyaW5nO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlVG9TdHJpbmcuanNcbiAqKiBtb2R1bGUgaWQgPSA5OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIGdsb2JhbCBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge251bGx8T2JqZWN0fSBSZXR1cm5zIGB2YWx1ZWAgaWYgaXQncyBhIGdsb2JhbCBvYmplY3QsIGVsc2UgYG51bGxgLlxuICovXG5mdW5jdGlvbiBjaGVja0dsb2JhbCh2YWx1ZSkge1xuICByZXR1cm4gKHZhbHVlICYmIHZhbHVlLk9iamVjdCA9PT0gT2JqZWN0KSA/IHZhbHVlIDogbnVsbDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjaGVja0dsb2JhbDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fY2hlY2tHbG9iYWwuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciByb290ID0gcmVxdWlyZSgnLi9fcm9vdCcpO1xuXG4vKiogVXNlZCB0byBkZXRlY3Qgb3ZlcnJlYWNoaW5nIGNvcmUtanMgc2hpbXMuICovXG52YXIgY29yZUpzRGF0YSA9IHJvb3RbJ19fY29yZS1qc19zaGFyZWRfXyddO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNvcmVKc0RhdGE7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2NvcmVKc0RhdGEuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBTeW1ib2wgPSByZXF1aXJlKCcuL19TeW1ib2wnKSxcbiAgICBVaW50OEFycmF5ID0gcmVxdWlyZSgnLi9fVWludDhBcnJheScpLFxuICAgIGVxdWFsQXJyYXlzID0gcmVxdWlyZSgnLi9fZXF1YWxBcnJheXMnKSxcbiAgICBtYXBUb0FycmF5ID0gcmVxdWlyZSgnLi9fbWFwVG9BcnJheScpLFxuICAgIHNldFRvQXJyYXkgPSByZXF1aXJlKCcuL19zZXRUb0FycmF5Jyk7XG5cbi8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNvbXBhcmlzb24gc3R5bGVzLiAqL1xudmFyIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgPSAxLFxuICAgIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsXG4gICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcbiAgICBlcnJvclRhZyA9ICdbb2JqZWN0IEVycm9yXScsXG4gICAgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG4gICAgbnVtYmVyVGFnID0gJ1tvYmplY3QgTnVtYmVyXScsXG4gICAgcmVnZXhwVGFnID0gJ1tvYmplY3QgUmVnRXhwXScsXG4gICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG4gICAgc3RyaW5nVGFnID0gJ1tvYmplY3QgU3RyaW5nXScsXG4gICAgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbnZhciBhcnJheUJ1ZmZlclRhZyA9ICdbb2JqZWN0IEFycmF5QnVmZmVyXScsXG4gICAgZGF0YVZpZXdUYWcgPSAnW29iamVjdCBEYXRhVmlld10nO1xuXG4vKiogVXNlZCB0byBjb252ZXJ0IHN5bWJvbHMgdG8gcHJpbWl0aXZlcyBhbmQgc3RyaW5ncy4gKi9cbnZhciBzeW1ib2xQcm90byA9IFN5bWJvbCA/IFN5bWJvbC5wcm90b3R5cGUgOiB1bmRlZmluZWQsXG4gICAgc3ltYm9sVmFsdWVPZiA9IHN5bWJvbFByb3RvID8gc3ltYm9sUHJvdG8udmFsdWVPZiA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGNvbXBhcmluZyBvYmplY3RzIG9mXG4gKiB0aGUgc2FtZSBgdG9TdHJpbmdUYWdgLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIG9ubHkgc3VwcG9ydHMgY29tcGFyaW5nIHZhbHVlcyB3aXRoIHRhZ3Mgb2ZcbiAqIGBCb29sZWFuYCwgYERhdGVgLCBgRXJyb3JgLCBgTnVtYmVyYCwgYFJlZ0V4cGAsIG9yIGBTdHJpbmdgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnIFRoZSBgdG9TdHJpbmdUYWdgIG9mIHRoZSBvYmplY3RzIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYFxuICogIGZvciBtb3JlIGRldGFpbHMuXG4gKiBAcGFyYW0ge09iamVjdH0gc3RhY2sgVHJhY2tzIHRyYXZlcnNlZCBgb2JqZWN0YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgdGFnLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSB7XG4gIHN3aXRjaCAodGFnKSB7XG4gICAgY2FzZSBkYXRhVmlld1RhZzpcbiAgICAgIGlmICgob2JqZWN0LmJ5dGVMZW5ndGggIT0gb3RoZXIuYnl0ZUxlbmd0aCkgfHxcbiAgICAgICAgICAob2JqZWN0LmJ5dGVPZmZzZXQgIT0gb3RoZXIuYnl0ZU9mZnNldCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgb2JqZWN0ID0gb2JqZWN0LmJ1ZmZlcjtcbiAgICAgIG90aGVyID0gb3RoZXIuYnVmZmVyO1xuXG4gICAgY2FzZSBhcnJheUJ1ZmZlclRhZzpcbiAgICAgIGlmICgob2JqZWN0LmJ5dGVMZW5ndGggIT0gb3RoZXIuYnl0ZUxlbmd0aCkgfHxcbiAgICAgICAgICAhZXF1YWxGdW5jKG5ldyBVaW50OEFycmF5KG9iamVjdCksIG5ldyBVaW50OEFycmF5KG90aGVyKSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICBjYXNlIGJvb2xUYWc6XG4gICAgY2FzZSBkYXRlVGFnOlxuICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1iZXJzLCBkYXRlcyB0byBtaWxsaXNlY29uZHMgYW5kXG4gICAgICAvLyBib29sZWFucyB0byBgMWAgb3IgYDBgIHRyZWF0aW5nIGludmFsaWQgZGF0ZXMgY29lcmNlZCB0byBgTmFOYCBhc1xuICAgICAgLy8gbm90IGVxdWFsLlxuICAgICAgcmV0dXJuICtvYmplY3QgPT0gK290aGVyO1xuXG4gICAgY2FzZSBlcnJvclRhZzpcbiAgICAgIHJldHVybiBvYmplY3QubmFtZSA9PSBvdGhlci5uYW1lICYmIG9iamVjdC5tZXNzYWdlID09IG90aGVyLm1lc3NhZ2U7XG5cbiAgICBjYXNlIG51bWJlclRhZzpcbiAgICAgIC8vIFRyZWF0IGBOYU5gIHZzLiBgTmFOYCBhcyBlcXVhbC5cbiAgICAgIHJldHVybiAob2JqZWN0ICE9ICtvYmplY3QpID8gb3RoZXIgIT0gK290aGVyIDogb2JqZWN0ID09ICtvdGhlcjtcblxuICAgIGNhc2UgcmVnZXhwVGFnOlxuICAgIGNhc2Ugc3RyaW5nVGFnOlxuICAgICAgLy8gQ29lcmNlIHJlZ2V4ZXMgdG8gc3RyaW5ncyBhbmQgdHJlYXQgc3RyaW5ncywgcHJpbWl0aXZlcyBhbmQgb2JqZWN0cyxcbiAgICAgIC8vIGFzIGVxdWFsLiBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXJlZ2V4cC5wcm90b3R5cGUudG9zdHJpbmdcbiAgICAgIC8vIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICByZXR1cm4gb2JqZWN0ID09IChvdGhlciArICcnKTtcblxuICAgIGNhc2UgbWFwVGFnOlxuICAgICAgdmFyIGNvbnZlcnQgPSBtYXBUb0FycmF5O1xuXG4gICAgY2FzZSBzZXRUYWc6XG4gICAgICB2YXIgaXNQYXJ0aWFsID0gYml0bWFzayAmIFBBUlRJQUxfQ09NUEFSRV9GTEFHO1xuICAgICAgY29udmVydCB8fCAoY29udmVydCA9IHNldFRvQXJyYXkpO1xuXG4gICAgICBpZiAob2JqZWN0LnNpemUgIT0gb3RoZXIuc2l6ZSAmJiAhaXNQYXJ0aWFsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cbiAgICAgIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KG9iamVjdCk7XG4gICAgICBpZiAoc3RhY2tlZCkge1xuICAgICAgICByZXR1cm4gc3RhY2tlZCA9PSBvdGhlcjtcbiAgICAgIH1cbiAgICAgIGJpdG1hc2sgfD0gVU5PUkRFUkVEX0NPTVBBUkVfRkxBRztcbiAgICAgIHN0YWNrLnNldChvYmplY3QsIG90aGVyKTtcblxuICAgICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgICByZXR1cm4gZXF1YWxBcnJheXMoY29udmVydChvYmplY3QpLCBjb252ZXJ0KG90aGVyKSwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG5cbiAgICBjYXNlIHN5bWJvbFRhZzpcbiAgICAgIGlmIChzeW1ib2xWYWx1ZU9mKSB7XG4gICAgICAgIHJldHVybiBzeW1ib2xWYWx1ZU9mLmNhbGwob2JqZWN0KSA9PSBzeW1ib2xWYWx1ZU9mLmNhbGwob3RoZXIpO1xuICAgICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlcXVhbEJ5VGFnO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19lcXVhbEJ5VGFnLmpzXG4gKiogbW9kdWxlIGlkID0gMTAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZUhhcyA9IHJlcXVpcmUoJy4vX2Jhc2VIYXMnKSxcbiAgICBrZXlzID0gcmVxdWlyZSgnLi9rZXlzJyk7XG5cbi8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNvbXBhcmlzb24gc3R5bGVzLiAqL1xudmFyIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIG9iamVjdHMgd2l0aCBzdXBwb3J0IGZvclxuICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYFxuICogIGZvciBtb3JlIGRldGFpbHMuXG4gKiBAcGFyYW0ge09iamVjdH0gc3RhY2sgVHJhY2tzIHRyYXZlcnNlZCBgb2JqZWN0YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGVxdWFsT2JqZWN0cyhvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSB7XG4gIHZhciBpc1BhcnRpYWwgPSBiaXRtYXNrICYgUEFSVElBTF9DT01QQVJFX0ZMQUcsXG4gICAgICBvYmpQcm9wcyA9IGtleXMob2JqZWN0KSxcbiAgICAgIG9iakxlbmd0aCA9IG9ialByb3BzLmxlbmd0aCxcbiAgICAgIG90aFByb3BzID0ga2V5cyhvdGhlciksXG4gICAgICBvdGhMZW5ndGggPSBvdGhQcm9wcy5sZW5ndGg7XG5cbiAgaWYgKG9iakxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIWlzUGFydGlhbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgaW5kZXggPSBvYmpMZW5ndGg7XG4gIHdoaWxlIChpbmRleC0tKSB7XG4gICAgdmFyIGtleSA9IG9ialByb3BzW2luZGV4XTtcbiAgICBpZiAoIShpc1BhcnRpYWwgPyBrZXkgaW4gb3RoZXIgOiBiYXNlSGFzKG90aGVyLCBrZXkpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG4gIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KG9iamVjdCk7XG4gIGlmIChzdGFja2VkKSB7XG4gICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG4gIH1cbiAgdmFyIHJlc3VsdCA9IHRydWU7XG4gIHN0YWNrLnNldChvYmplY3QsIG90aGVyKTtcblxuICB2YXIgc2tpcEN0b3IgPSBpc1BhcnRpYWw7XG4gIHdoaWxlICgrK2luZGV4IDwgb2JqTGVuZ3RoKSB7XG4gICAga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuICAgIHZhciBvYmpWYWx1ZSA9IG9iamVjdFtrZXldLFxuICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2tleV07XG5cbiAgICBpZiAoY3VzdG9taXplcikge1xuICAgICAgdmFyIGNvbXBhcmVkID0gaXNQYXJ0aWFsXG4gICAgICAgID8gY3VzdG9taXplcihvdGhWYWx1ZSwgb2JqVmFsdWUsIGtleSwgb3RoZXIsIG9iamVjdCwgc3RhY2spXG4gICAgICAgIDogY3VzdG9taXplcihvYmpWYWx1ZSwgb3RoVmFsdWUsIGtleSwgb2JqZWN0LCBvdGhlciwgc3RhY2spO1xuICAgIH1cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICBpZiAoIShjb21wYXJlZCA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgPyAob2JqVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhvYmpWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSlcbiAgICAgICAgICA6IGNvbXBhcmVkXG4gICAgICAgICkpIHtcbiAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHNraXBDdG9yIHx8IChza2lwQ3RvciA9IGtleSA9PSAnY29uc3RydWN0b3InKTtcbiAgfVxuICBpZiAocmVzdWx0ICYmICFza2lwQ3Rvcikge1xuICAgIHZhciBvYmpDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yLFxuICAgICAgICBvdGhDdG9yID0gb3RoZXIuY29uc3RydWN0b3I7XG5cbiAgICAvLyBOb24gYE9iamVjdGAgb2JqZWN0IGluc3RhbmNlcyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVhbC5cbiAgICBpZiAob2JqQ3RvciAhPSBvdGhDdG9yICYmXG4gICAgICAgICgnY29uc3RydWN0b3InIGluIG9iamVjdCAmJiAnY29uc3RydWN0b3InIGluIG90aGVyKSAmJlxuICAgICAgICAhKHR5cGVvZiBvYmpDdG9yID09ICdmdW5jdGlvbicgJiYgb2JqQ3RvciBpbnN0YW5jZW9mIG9iakN0b3IgJiZcbiAgICAgICAgICB0eXBlb2Ygb3RoQ3RvciA9PSAnZnVuY3Rpb24nICYmIG90aEN0b3IgaW5zdGFuY2VvZiBvdGhDdG9yKSkge1xuICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIHN0YWNrWydkZWxldGUnXShvYmplY3QpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVxdWFsT2JqZWN0cztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fZXF1YWxPYmplY3RzLmpzXG4gKiogbW9kdWxlIGlkID0gMTAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9fYmFzZVByb3BlcnR5Jyk7XG5cbi8qKlxuICogR2V0cyB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSB2YWx1ZSBvZiBgb2JqZWN0YC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGF2b2lkIGFcbiAqIFtKSVQgYnVnXShodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTQyNzkyKSB0aGF0IGFmZmVjdHNcbiAqIFNhZmFyaSBvbiBhdCBsZWFzdCBpT1MgOC4xLTguMyBBUk02NC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIFwibGVuZ3RoXCIgdmFsdWUuXG4gKi9cbnZhciBnZXRMZW5ndGggPSBiYXNlUHJvcGVydHkoJ2xlbmd0aCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGdldExlbmd0aDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fZ2V0TGVuZ3RoLmpzXG4gKiogbW9kdWxlIGlkID0gMTA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNTdHJpY3RDb21wYXJhYmxlID0gcmVxdWlyZSgnLi9faXNTdHJpY3RDb21wYXJhYmxlJyksXG4gICAga2V5cyA9IHJlcXVpcmUoJy4va2V5cycpO1xuXG4vKipcbiAqIEdldHMgdGhlIHByb3BlcnR5IG5hbWVzLCB2YWx1ZXMsIGFuZCBjb21wYXJlIGZsYWdzIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG1hdGNoIGRhdGEgb2YgYG9iamVjdGAuXG4gKi9cbmZ1bmN0aW9uIGdldE1hdGNoRGF0YShvYmplY3QpIHtcbiAgdmFyIHJlc3VsdCA9IGtleXMob2JqZWN0KSxcbiAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG5cbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgdmFyIGtleSA9IHJlc3VsdFtsZW5ndGhdLFxuICAgICAgICB2YWx1ZSA9IG9iamVjdFtrZXldO1xuXG4gICAgcmVzdWx0W2xlbmd0aF0gPSBba2V5LCB2YWx1ZSwgaXNTdHJpY3RDb21wYXJhYmxlKHZhbHVlKV07XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRNYXRjaERhdGE7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2dldE1hdGNoRGF0YS5qc1xuICoqIG1vZHVsZSBpZCA9IDEwNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZUdldFByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcblxuLyoqXG4gKiBHZXRzIHRoZSBgW1tQcm90b3R5cGVdXWAgb2YgYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7bnVsbHxPYmplY3R9IFJldHVybnMgdGhlIGBbW1Byb3RvdHlwZV1dYC5cbiAqL1xuZnVuY3Rpb24gZ2V0UHJvdG90eXBlKHZhbHVlKSB7XG4gIHJldHVybiBuYXRpdmVHZXRQcm90b3R5cGUoT2JqZWN0KHZhbHVlKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0UHJvdG90eXBlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19nZXRQcm90b3R5cGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBEYXRhVmlldyA9IHJlcXVpcmUoJy4vX0RhdGFWaWV3JyksXG4gICAgTWFwID0gcmVxdWlyZSgnLi9fTWFwJyksXG4gICAgUHJvbWlzZSA9IHJlcXVpcmUoJy4vX1Byb21pc2UnKSxcbiAgICBTZXQgPSByZXF1aXJlKCcuL19TZXQnKSxcbiAgICBXZWFrTWFwID0gcmVxdWlyZSgnLi9fV2Vha01hcCcpLFxuICAgIHRvU291cmNlID0gcmVxdWlyZSgnLi9fdG9Tb3VyY2UnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nLFxuICAgIHByb21pc2VUYWcgPSAnW29iamVjdCBQcm9taXNlXScsXG4gICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG4gICAgd2Vha01hcFRhZyA9ICdbb2JqZWN0IFdlYWtNYXBdJztcblxudmFyIGRhdGFWaWV3VGFnID0gJ1tvYmplY3QgRGF0YVZpZXddJztcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBtYXBzLCBzZXRzLCBhbmQgd2Vha21hcHMuICovXG52YXIgZGF0YVZpZXdDdG9yU3RyaW5nID0gdG9Tb3VyY2UoRGF0YVZpZXcpLFxuICAgIG1hcEN0b3JTdHJpbmcgPSB0b1NvdXJjZShNYXApLFxuICAgIHByb21pc2VDdG9yU3RyaW5nID0gdG9Tb3VyY2UoUHJvbWlzZSksXG4gICAgc2V0Q3RvclN0cmluZyA9IHRvU291cmNlKFNldCksXG4gICAgd2Vha01hcEN0b3JTdHJpbmcgPSB0b1NvdXJjZShXZWFrTWFwKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBgdG9TdHJpbmdUYWdgIG9mIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgYHRvU3RyaW5nVGFnYC5cbiAqL1xuZnVuY3Rpb24gZ2V0VGFnKHZhbHVlKSB7XG4gIHJldHVybiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIGRhdGEgdmlld3MsIG1hcHMsIHNldHMsIGFuZCB3ZWFrIG1hcHMgaW4gSUUgMTEsXG4vLyBmb3IgZGF0YSB2aWV3cyBpbiBFZGdlLCBhbmQgcHJvbWlzZXMgaW4gTm9kZS5qcy5cbmlmICgoRGF0YVZpZXcgJiYgZ2V0VGFnKG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoMSkpKSAhPSBkYXRhVmlld1RhZykgfHxcbiAgICAoTWFwICYmIGdldFRhZyhuZXcgTWFwKSAhPSBtYXBUYWcpIHx8XG4gICAgKFByb21pc2UgJiYgZ2V0VGFnKFByb21pc2UucmVzb2x2ZSgpKSAhPSBwcm9taXNlVGFnKSB8fFxuICAgIChTZXQgJiYgZ2V0VGFnKG5ldyBTZXQpICE9IHNldFRhZykgfHxcbiAgICAoV2Vha01hcCAmJiBnZXRUYWcobmV3IFdlYWtNYXApICE9IHdlYWtNYXBUYWcpKSB7XG4gIGdldFRhZyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdmFyIHJlc3VsdCA9IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpLFxuICAgICAgICBDdG9yID0gcmVzdWx0ID09IG9iamVjdFRhZyA/IHZhbHVlLmNvbnN0cnVjdG9yIDogdW5kZWZpbmVkLFxuICAgICAgICBjdG9yU3RyaW5nID0gQ3RvciA/IHRvU291cmNlKEN0b3IpIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKGN0b3JTdHJpbmcpIHtcbiAgICAgIHN3aXRjaCAoY3RvclN0cmluZykge1xuICAgICAgICBjYXNlIGRhdGFWaWV3Q3RvclN0cmluZzogcmV0dXJuIGRhdGFWaWV3VGFnO1xuICAgICAgICBjYXNlIG1hcEN0b3JTdHJpbmc6IHJldHVybiBtYXBUYWc7XG4gICAgICAgIGNhc2UgcHJvbWlzZUN0b3JTdHJpbmc6IHJldHVybiBwcm9taXNlVGFnO1xuICAgICAgICBjYXNlIHNldEN0b3JTdHJpbmc6IHJldHVybiBzZXRUYWc7XG4gICAgICAgIGNhc2Ugd2Vha01hcEN0b3JTdHJpbmc6IHJldHVybiB3ZWFrTWFwVGFnO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFRhZztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fZ2V0VGFnLmpzXG4gKiogbW9kdWxlIGlkID0gMTA3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIEdldHMgdGhlIHZhbHVlIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBnZXRWYWx1ZShvYmplY3QsIGtleSkge1xuICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRWYWx1ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fZ2V0VmFsdWUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBjYXN0UGF0aCA9IHJlcXVpcmUoJy4vX2Nhc3RQYXRoJyksXG4gICAgaXNBcmd1bWVudHMgPSByZXF1aXJlKCcuL2lzQXJndW1lbnRzJyksXG4gICAgaXNBcnJheSA9IHJlcXVpcmUoJy4vaXNBcnJheScpLFxuICAgIGlzSW5kZXggPSByZXF1aXJlKCcuL19pc0luZGV4JyksXG4gICAgaXNLZXkgPSByZXF1aXJlKCcuL19pc0tleScpLFxuICAgIGlzTGVuZ3RoID0gcmVxdWlyZSgnLi9pc0xlbmd0aCcpLFxuICAgIGlzU3RyaW5nID0gcmVxdWlyZSgnLi9pc1N0cmluZycpLFxuICAgIHRvS2V5ID0gcmVxdWlyZSgnLi9fdG9LZXknKTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHBhdGhgIGV4aXN0cyBvbiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggdG8gY2hlY2suXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYXNGdW5jIFRoZSBmdW5jdGlvbiB0byBjaGVjayBwcm9wZXJ0aWVzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBwYXRoYCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaGFzUGF0aChvYmplY3QsIHBhdGgsIGhhc0Z1bmMpIHtcbiAgcGF0aCA9IGlzS2V5KHBhdGgsIG9iamVjdCkgPyBbcGF0aF0gOiBjYXN0UGF0aChwYXRoKTtcblxuICB2YXIgcmVzdWx0LFxuICAgICAgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGtleSA9IHRvS2V5KHBhdGhbaW5kZXhdKTtcbiAgICBpZiAoIShyZXN1bHQgPSBvYmplY3QgIT0gbnVsbCAmJiBoYXNGdW5jKG9iamVjdCwga2V5KSkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBvYmplY3QgPSBvYmplY3Rba2V5XTtcbiAgfVxuICBpZiAocmVzdWx0KSB7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICB2YXIgbGVuZ3RoID0gb2JqZWN0ID8gb2JqZWN0Lmxlbmd0aCA6IDA7XG4gIHJldHVybiAhIWxlbmd0aCAmJiBpc0xlbmd0aChsZW5ndGgpICYmIGlzSW5kZXgoa2V5LCBsZW5ndGgpICYmXG4gICAgKGlzQXJyYXkob2JqZWN0KSB8fCBpc1N0cmluZyhvYmplY3QpIHx8IGlzQXJndW1lbnRzKG9iamVjdCkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGhhc1BhdGg7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2hhc1BhdGguanNcbiAqKiBtb2R1bGUgaWQgPSAxMDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBuYXRpdmVDcmVhdGUgPSByZXF1aXJlKCcuL19uYXRpdmVDcmVhdGUnKTtcblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBoYXNoLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBjbGVhclxuICogQG1lbWJlck9mIEhhc2hcbiAqL1xuZnVuY3Rpb24gaGFzaENsZWFyKCkge1xuICB0aGlzLl9fZGF0YV9fID0gbmF0aXZlQ3JlYXRlID8gbmF0aXZlQ3JlYXRlKG51bGwpIDoge307XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaGFzaENsZWFyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19oYXNoQ2xlYXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxMTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGhhc2guXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGRlbGV0ZVxuICogQG1lbWJlck9mIEhhc2hcbiAqIEBwYXJhbSB7T2JqZWN0fSBoYXNoIFRoZSBoYXNoIHRvIG1vZGlmeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBoYXNoRGVsZXRlKGtleSkge1xuICByZXR1cm4gdGhpcy5oYXMoa2V5KSAmJiBkZWxldGUgdGhpcy5fX2RhdGFfX1trZXldO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGhhc2hEZWxldGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2hhc2hEZWxldGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBuYXRpdmVDcmVhdGUgPSByZXF1aXJlKCcuL19uYXRpdmVDcmVhdGUnKTtcblxuLyoqIFVzZWQgdG8gc3RhbmQtaW4gZm9yIGB1bmRlZmluZWRgIGhhc2ggdmFsdWVzLiAqL1xudmFyIEhBU0hfVU5ERUZJTkVEID0gJ19fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18nO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIEdldHMgdGhlIGhhc2ggdmFsdWUgZm9yIGBrZXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBnZXRcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gaGFzaEdldChrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICBpZiAobmF0aXZlQ3JlYXRlKSB7XG4gICAgdmFyIHJlc3VsdCA9IGRhdGFba2V5XTtcbiAgICByZXR1cm4gcmVzdWx0ID09PSBIQVNIX1VOREVGSU5FRCA/IHVuZGVmaW5lZCA6IHJlc3VsdDtcbiAgfVxuICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLCBrZXkpID8gZGF0YVtrZXldIDogdW5kZWZpbmVkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGhhc2hHZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2hhc2hHZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBuYXRpdmVDcmVhdGUgPSByZXF1aXJlKCcuL19uYXRpdmVDcmVhdGUnKTtcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYSBoYXNoIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIEhhc2hcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBoYXNoSGFzKGtleSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG4gIHJldHVybiBuYXRpdmVDcmVhdGUgPyBkYXRhW2tleV0gIT09IHVuZGVmaW5lZCA6IGhhc093blByb3BlcnR5LmNhbGwoZGF0YSwga2V5KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBoYXNoSGFzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19oYXNoSGFzLmpzXG4gKiogbW9kdWxlIGlkID0gMTEzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgbmF0aXZlQ3JlYXRlID0gcmVxdWlyZSgnLi9fbmF0aXZlQ3JlYXRlJyk7XG5cbi8qKiBVc2VkIHRvIHN0YW5kLWluIGZvciBgdW5kZWZpbmVkYCBoYXNoIHZhbHVlcy4gKi9cbnZhciBIQVNIX1VOREVGSU5FRCA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJztcblxuLyoqXG4gKiBTZXRzIHRoZSBoYXNoIGBrZXlgIHRvIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIHNldFxuICogQG1lbWJlck9mIEhhc2hcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgaGFzaCBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gaGFzaFNldChrZXksIHZhbHVlKSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcbiAgZGF0YVtrZXldID0gKG5hdGl2ZUNyZWF0ZSAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkKSA/IEhBU0hfVU5ERUZJTkVEIDogdmFsdWU7XG4gIHJldHVybiB0aGlzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGhhc2hTZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2hhc2hTZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlVGltZXMgPSByZXF1aXJlKCcuL19iYXNlVGltZXMnKSxcbiAgICBpc0FyZ3VtZW50cyA9IHJlcXVpcmUoJy4vaXNBcmd1bWVudHMnKSxcbiAgICBpc0FycmF5ID0gcmVxdWlyZSgnLi9pc0FycmF5JyksXG4gICAgaXNMZW5ndGggPSByZXF1aXJlKCcuL2lzTGVuZ3RoJyksXG4gICAgaXNTdHJpbmcgPSByZXF1aXJlKCcuL2lzU3RyaW5nJyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiBpbmRleCBrZXlzIGZvciBgb2JqZWN0YCB2YWx1ZXMgb2YgYXJyYXlzLFxuICogYGFyZ3VtZW50c2Agb2JqZWN0cywgYW5kIHN0cmluZ3MsIG90aGVyd2lzZSBgbnVsbGAgaXMgcmV0dXJuZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheXxudWxsfSBSZXR1cm5zIGluZGV4IGtleXMsIGVsc2UgYG51bGxgLlxuICovXG5mdW5jdGlvbiBpbmRleEtleXMob2JqZWN0KSB7XG4gIHZhciBsZW5ndGggPSBvYmplY3QgPyBvYmplY3QubGVuZ3RoIDogdW5kZWZpbmVkO1xuICBpZiAoaXNMZW5ndGgobGVuZ3RoKSAmJlxuICAgICAgKGlzQXJyYXkob2JqZWN0KSB8fCBpc1N0cmluZyhvYmplY3QpIHx8IGlzQXJndW1lbnRzKG9iamVjdCkpKSB7XG4gICAgcmV0dXJuIGJhc2VUaW1lcyhsZW5ndGgsIFN0cmluZyk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW5kZXhLZXlzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19pbmRleEtleXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgc3VpdGFibGUgZm9yIHVzZSBhcyB1bmlxdWUgb2JqZWN0IGtleS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0tleWFibGUodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAodHlwZSA9PSAnc3RyaW5nJyB8fCB0eXBlID09ICdudW1iZXInIHx8IHR5cGUgPT0gJ3N5bWJvbCcgfHwgdHlwZSA9PSAnYm9vbGVhbicpXG4gICAgPyAodmFsdWUgIT09ICdfX3Byb3RvX18nKVxuICAgIDogKHZhbHVlID09PSBudWxsKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0tleWFibGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2lzS2V5YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDExNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGNvcmVKc0RhdGEgPSByZXF1aXJlKCcuL19jb3JlSnNEYXRhJyk7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBtZXRob2RzIG1hc3F1ZXJhZGluZyBhcyBuYXRpdmUuICovXG52YXIgbWFza1NyY0tleSA9IChmdW5jdGlvbigpIHtcbiAgdmFyIHVpZCA9IC9bXi5dKyQvLmV4ZWMoY29yZUpzRGF0YSAmJiBjb3JlSnNEYXRhLmtleXMgJiYgY29yZUpzRGF0YS5rZXlzLklFX1BST1RPIHx8ICcnKTtcbiAgcmV0dXJuIHVpZCA/ICgnU3ltYm9sKHNyYylfMS4nICsgdWlkKSA6ICcnO1xufSgpKTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYGZ1bmNgIGhhcyBpdHMgc291cmNlIG1hc2tlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYGZ1bmNgIGlzIG1hc2tlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc01hc2tlZChmdW5jKSB7XG4gIHJldHVybiAhIW1hc2tTcmNLZXkgJiYgKG1hc2tTcmNLZXkgaW4gZnVuYyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNNYXNrZWQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2lzTWFza2VkLmpzXG4gKiogbW9kdWxlIGlkID0gMTE3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxpa2VseSBhIHByb3RvdHlwZSBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwcm90b3R5cGUsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNQcm90b3R5cGUodmFsdWUpIHtcbiAgdmFyIEN0b3IgPSB2YWx1ZSAmJiB2YWx1ZS5jb25zdHJ1Y3RvcixcbiAgICAgIHByb3RvID0gKHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUpIHx8IG9iamVjdFByb3RvO1xuXG4gIHJldHVybiB2YWx1ZSA9PT0gcHJvdG87XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNQcm90b3R5cGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2lzUHJvdG90eXBlLmpzXG4gKiogbW9kdWxlIGlkID0gMTE4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIGxpc3QgY2FjaGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGNsZWFyXG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZUNsZWFyKCkge1xuICB0aGlzLl9fZGF0YV9fID0gW107XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbGlzdENhY2hlQ2xlYXI7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2xpc3RDYWNoZUNsZWFyLmpzXG4gKiogbW9kdWxlIGlkID0gMTE5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYXNzb2NJbmRleE9mID0gcmVxdWlyZSgnLi9fYXNzb2NJbmRleE9mJyk7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBzcGxpY2UgPSBhcnJheVByb3RvLnNwbGljZTtcblxuLyoqXG4gKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgbGlzdCBjYWNoZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZGVsZXRlXG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gbGlzdENhY2hlRGVsZXRlKGtleSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG4gICAgICBpbmRleCA9IGFzc29jSW5kZXhPZihkYXRhLCBrZXkpO1xuXG4gIGlmIChpbmRleCA8IDApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIGxhc3RJbmRleCA9IGRhdGEubGVuZ3RoIC0gMTtcbiAgaWYgKGluZGV4ID09IGxhc3RJbmRleCkge1xuICAgIGRhdGEucG9wKCk7XG4gIH0gZWxzZSB7XG4gICAgc3BsaWNlLmNhbGwoZGF0YSwgaW5kZXgsIDEpO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGxpc3RDYWNoZURlbGV0ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbGlzdENhY2hlRGVsZXRlLmpzXG4gKiogbW9kdWxlIGlkID0gMTIwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYXNzb2NJbmRleE9mID0gcmVxdWlyZSgnLi9fYXNzb2NJbmRleE9mJyk7XG5cbi8qKlxuICogR2V0cyB0aGUgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGdldFxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZUdldChrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblxuICByZXR1cm4gaW5kZXggPCAwID8gdW5kZWZpbmVkIDogZGF0YVtpbmRleF1bMV07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbGlzdENhY2hlR2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19saXN0Q2FjaGVHZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMjFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBhc3NvY0luZGV4T2YgPSByZXF1aXJlKCcuL19hc3NvY0luZGV4T2YnKTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYSBsaXN0IGNhY2hlIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZUhhcyhrZXkpIHtcbiAgcmV0dXJuIGFzc29jSW5kZXhPZih0aGlzLl9fZGF0YV9fLCBrZXkpID4gLTE7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbGlzdENhY2hlSGFzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19saXN0Q2FjaGVIYXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBhc3NvY0luZGV4T2YgPSByZXF1aXJlKCcuL19hc3NvY0luZGV4T2YnKTtcblxuLyoqXG4gKiBTZXRzIHRoZSBsaXN0IGNhY2hlIGBrZXlgIHRvIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIHNldFxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBsaXN0IGNhY2hlIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVTZXQoa2V5LCB2YWx1ZSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG4gICAgICBpbmRleCA9IGFzc29jSW5kZXhPZihkYXRhLCBrZXkpO1xuXG4gIGlmIChpbmRleCA8IDApIHtcbiAgICBkYXRhLnB1c2goW2tleSwgdmFsdWVdKTtcbiAgfSBlbHNlIHtcbiAgICBkYXRhW2luZGV4XVsxXSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiB0aGlzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGxpc3RDYWNoZVNldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbGlzdENhY2hlU2V0LmpzXG4gKiogbW9kdWxlIGlkID0gMTIzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgSGFzaCA9IHJlcXVpcmUoJy4vX0hhc2gnKSxcbiAgICBMaXN0Q2FjaGUgPSByZXF1aXJlKCcuL19MaXN0Q2FjaGUnKSxcbiAgICBNYXAgPSByZXF1aXJlKCcuL19NYXAnKTtcblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBtYXAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGNsZWFyXG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqL1xuZnVuY3Rpb24gbWFwQ2FjaGVDbGVhcigpIHtcbiAgdGhpcy5fX2RhdGFfXyA9IHtcbiAgICAnaGFzaCc6IG5ldyBIYXNoLFxuICAgICdtYXAnOiBuZXcgKE1hcCB8fCBMaXN0Q2FjaGUpLFxuICAgICdzdHJpbmcnOiBuZXcgSGFzaFxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG1hcENhY2hlQ2xlYXI7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX21hcENhY2hlQ2xlYXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxMjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnZXRNYXBEYXRhID0gcmVxdWlyZSgnLi9fZ2V0TWFwRGF0YScpO1xuXG4vKipcbiAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBtYXAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGRlbGV0ZVxuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gbWFwQ2FjaGVEZWxldGUoa2V5KSB7XG4gIHJldHVybiBnZXRNYXBEYXRhKHRoaXMsIGtleSlbJ2RlbGV0ZSddKGtleSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbWFwQ2FjaGVEZWxldGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX21hcENhY2hlRGVsZXRlLmpzXG4gKiogbW9kdWxlIGlkID0gMTI1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0TWFwRGF0YSA9IHJlcXVpcmUoJy4vX2dldE1hcERhdGEnKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBtYXAgdmFsdWUgZm9yIGBrZXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBnZXRcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlR2V0KGtleSkge1xuICByZXR1cm4gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLmdldChrZXkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG1hcENhY2hlR2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19tYXBDYWNoZUdldC5qc1xuICoqIG1vZHVsZSBpZCA9IDEyNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdldE1hcERhdGEgPSByZXF1aXJlKCcuL19nZXRNYXBEYXRhJyk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgbWFwIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gbWFwQ2FjaGVIYXMoa2V5KSB7XG4gIHJldHVybiBnZXRNYXBEYXRhKHRoaXMsIGtleSkuaGFzKGtleSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbWFwQ2FjaGVIYXM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX21hcENhY2hlSGFzLmpzXG4gKiogbW9kdWxlIGlkID0gMTI3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0TWFwRGF0YSA9IHJlcXVpcmUoJy4vX2dldE1hcERhdGEnKTtcblxuLyoqXG4gKiBTZXRzIHRoZSBtYXAgYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbWFwIGNhY2hlIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBtYXBDYWNoZVNldChrZXksIHZhbHVlKSB7XG4gIGdldE1hcERhdGEodGhpcywga2V5KS5zZXQoa2V5LCB2YWx1ZSk7XG4gIHJldHVybiB0aGlzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG1hcENhY2hlU2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19tYXBDYWNoZVNldC5qc1xuICoqIG1vZHVsZSBpZCA9IDEyOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDb252ZXJ0cyBgbWFwYCB0byBpdHMga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUga2V5LXZhbHVlIHBhaXJzLlxuICovXG5mdW5jdGlvbiBtYXBUb0FycmF5KG1hcCkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIHJlc3VsdCA9IEFycmF5KG1hcC5zaXplKTtcblxuICBtYXAuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgcmVzdWx0WysraW5kZXhdID0gW2tleSwgdmFsdWVdO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtYXBUb0FycmF5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19tYXBUb0FycmF5LmpzXG4gKiogbW9kdWxlIGlkID0gMTI5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiogVXNlZCB0byBzdGFuZC1pbiBmb3IgYHVuZGVmaW5lZGAgaGFzaCB2YWx1ZXMuICovXG52YXIgSEFTSF9VTkRFRklORUQgPSAnX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyc7XG5cbi8qKlxuICogQWRkcyBgdmFsdWVgIHRvIHRoZSBhcnJheSBjYWNoZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgYWRkXG4gKiBAbWVtYmVyT2YgU2V0Q2FjaGVcbiAqIEBhbGlhcyBwdXNoXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjYWNoZS5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNhY2hlIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBzZXRDYWNoZUFkZCh2YWx1ZSkge1xuICB0aGlzLl9fZGF0YV9fLnNldCh2YWx1ZSwgSEFTSF9VTkRFRklORUQpO1xuICByZXR1cm4gdGhpcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXRDYWNoZUFkZDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fc2V0Q2FjaGVBZGQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgaW4gdGhlIGFycmF5IGNhY2hlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBTZXRDYWNoZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgZm91bmQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gc2V0Q2FjaGVIYXModmFsdWUpIHtcbiAgcmV0dXJuIHRoaXMuX19kYXRhX18uaGFzKHZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXRDYWNoZUhhcztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fc2V0Q2FjaGVIYXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ29udmVydHMgYHNldGAgdG8gYW4gYXJyYXkgb2YgaXRzIHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IHNldCBUaGUgc2V0IHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHZhbHVlcy5cbiAqL1xuZnVuY3Rpb24gc2V0VG9BcnJheShzZXQpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSBBcnJheShzZXQuc2l6ZSk7XG5cbiAgc2V0LmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXN1bHRbKytpbmRleF0gPSB2YWx1ZTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0VG9BcnJheTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fc2V0VG9BcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDEzMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIExpc3RDYWNoZSA9IHJlcXVpcmUoJy4vX0xpc3RDYWNoZScpO1xuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIHN0YWNrLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBjbGVhclxuICogQG1lbWJlck9mIFN0YWNrXG4gKi9cbmZ1bmN0aW9uIHN0YWNrQ2xlYXIoKSB7XG4gIHRoaXMuX19kYXRhX18gPSBuZXcgTGlzdENhY2hlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN0YWNrQ2xlYXI7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3N0YWNrQ2xlYXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIHN0YWNrLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBTdGFja1xuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIHN0YWNrRGVsZXRlKGtleSkge1xuICByZXR1cm4gdGhpcy5fX2RhdGFfX1snZGVsZXRlJ10oa2V5KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzdGFja0RlbGV0ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fc3RhY2tEZWxldGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogR2V0cyB0aGUgc3RhY2sgdmFsdWUgZm9yIGBrZXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBnZXRcbiAqIEBtZW1iZXJPZiBTdGFja1xuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIHN0YWNrR2V0KGtleSkge1xuICByZXR1cm4gdGhpcy5fX2RhdGFfXy5nZXQoa2V5KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzdGFja0dldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fc3RhY2tHZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ2hlY2tzIGlmIGEgc3RhY2sgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBzdGFja0hhcyhrZXkpIHtcbiAgcmV0dXJuIHRoaXMuX19kYXRhX18uaGFzKGtleSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc3RhY2tIYXM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3N0YWNrSGFzLmpzXG4gKiogbW9kdWxlIGlkID0gMTM2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgTGlzdENhY2hlID0gcmVxdWlyZSgnLi9fTGlzdENhY2hlJyksXG4gICAgTWFwQ2FjaGUgPSByZXF1aXJlKCcuL19NYXBDYWNoZScpO1xuXG4vKiogVXNlZCBhcyB0aGUgc2l6ZSB0byBlbmFibGUgbGFyZ2UgYXJyYXkgb3B0aW1pemF0aW9ucy4gKi9cbnZhciBMQVJHRV9BUlJBWV9TSVpFID0gMjAwO1xuXG4vKipcbiAqIFNldHMgdGhlIHN0YWNrIGBrZXlgIHRvIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIHNldFxuICogQG1lbWJlck9mIFN0YWNrXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIHN0YWNrIGNhY2hlIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBzdGFja1NldChrZXksIHZhbHVlKSB7XG4gIHZhciBjYWNoZSA9IHRoaXMuX19kYXRhX187XG4gIGlmIChjYWNoZSBpbnN0YW5jZW9mIExpc3RDYWNoZSAmJiBjYWNoZS5fX2RhdGFfXy5sZW5ndGggPT0gTEFSR0VfQVJSQVlfU0laRSkge1xuICAgIGNhY2hlID0gdGhpcy5fX2RhdGFfXyA9IG5ldyBNYXBDYWNoZShjYWNoZS5fX2RhdGFfXyk7XG4gIH1cbiAgY2FjaGUuc2V0KGtleSwgdmFsdWUpO1xuICByZXR1cm4gdGhpcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzdGFja1NldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fc3RhY2tTZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBtZW1vaXplID0gcmVxdWlyZSgnLi9tZW1vaXplJyksXG4gICAgdG9TdHJpbmcgPSByZXF1aXJlKCcuL3RvU3RyaW5nJyk7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cbnZhciByZVByb3BOYW1lID0gL1teLltcXF1dK3xcXFsoPzooLT9cXGQrKD86XFwuXFxkKyk/KXwoW1wiJ10pKCg/Oig/IVxcMilbXlxcXFxdfFxcXFwuKSo/KVxcMilcXF18KD89KFxcLnxcXFtcXF0pKD86XFw0fCQpKS9nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBiYWNrc2xhc2hlcyBpbiBwcm9wZXJ0eSBwYXRocy4gKi9cbnZhciByZUVzY2FwZUNoYXIgPSAvXFxcXChcXFxcKT8vZztcblxuLyoqXG4gKiBDb252ZXJ0cyBgc3RyaW5nYCB0byBhIHByb3BlcnR5IHBhdGggYXJyYXkuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBjb252ZXJ0LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBwcm9wZXJ0eSBwYXRoIGFycmF5LlxuICovXG52YXIgc3RyaW5nVG9QYXRoID0gbWVtb2l6ZShmdW5jdGlvbihzdHJpbmcpIHtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuICB0b1N0cmluZyhzdHJpbmcpLnJlcGxhY2UocmVQcm9wTmFtZSwgZnVuY3Rpb24obWF0Y2gsIG51bWJlciwgcXVvdGUsIHN0cmluZykge1xuICAgIHJlc3VsdC5wdXNoKHF1b3RlID8gc3RyaW5nLnJlcGxhY2UocmVFc2NhcGVDaGFyLCAnJDEnKSA6IChudW1iZXIgfHwgbWF0Y2gpKTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBzdHJpbmdUb1BhdGg7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3N0cmluZ1RvUGF0aC5qc1xuICoqIG1vZHVsZSBpZCA9IDEzOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pc09iamVjdCcpLFxuICAgIG5vdyA9IHJlcXVpcmUoJy4vbm93JyksXG4gICAgdG9OdW1iZXIgPSByZXF1aXJlKCcuL3RvTnVtYmVyJyk7XG5cbi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG4gICAgbmF0aXZlTWluID0gTWF0aC5taW47XG5cbi8qKlxuICogQ3JlYXRlcyBhIGRlYm91bmNlZCBmdW5jdGlvbiB0aGF0IGRlbGF5cyBpbnZva2luZyBgZnVuY2AgdW50aWwgYWZ0ZXIgYHdhaXRgXG4gKiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3YXNcbiAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWxcbiAqIGRlbGF5ZWQgYGZ1bmNgIGludm9jYXRpb25zIGFuZCBhIGBmbHVzaGAgbWV0aG9kIHRvIGltbWVkaWF0ZWx5IGludm9rZSB0aGVtLlxuICogUHJvdmlkZSBhbiBvcHRpb25zIG9iamVjdCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvblxuICogdGhlIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcbiAqIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnQgY2FsbHNcbiAqIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgIGludm9jYXRpb24uXG4gKlxuICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpcyBpbnZva2VkXG4gKiBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gaXNcbiAqIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAqXG4gKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9kZWJvdW5jaW5nLXRocm90dGxpbmctZXhwbGFpbmVkLWV4YW1wbGVzLylcbiAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XVxuICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG4gKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuICpcbiAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuICogICAnbGVhZGluZyc6IHRydWUsXG4gKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gKiB9KSk7XG4gKlxuICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cbiAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pO1xuICogdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL3N0cmVhbScpO1xuICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuICpcbiAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgZGVib3VuY2VkIGludm9jYXRpb24uXG4gKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcbiAqL1xuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgbGFzdEFyZ3MsXG4gICAgICBsYXN0VGhpcyxcbiAgICAgIG1heFdhaXQsXG4gICAgICByZXN1bHQsXG4gICAgICB0aW1lcklkLFxuICAgICAgbGFzdENhbGxUaW1lLFxuICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuICAgICAgbGVhZGluZyA9IGZhbHNlLFxuICAgICAgbWF4aW5nID0gZmFsc2UsXG4gICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG4gIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZztcbiAgICBtYXhpbmcgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucztcbiAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcbiAgICB2YXIgYXJncyA9IGxhc3RBcmdzLFxuICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG4gICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgLy8gU3RhcnQgdGhlIHRpbWVyIGZvciB0aGUgdHJhaWxpbmcgZWRnZS5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLlxuICAgIHJldHVybiBsZWFkaW5nID8gaW52b2tlRnVuYyh0aW1lKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbWFpbmluZ1dhaXQodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsXG4gICAgICAgIHJlc3VsdCA9IHdhaXQgLSB0aW1lU2luY2VMYXN0Q2FsbDtcblxuICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0LCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cbiAgICAvLyBFaXRoZXIgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgYWN0aXZpdHkgaGFzIHN0b3BwZWQgYW5kIHdlJ3JlIGF0IHRoZVxuICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG4gICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuICAgIHJldHVybiAobGFzdENhbGxUaW1lID09PSB1bmRlZmluZWQgfHwgKHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQpIHx8XG4gICAgICAodGltZVNpbmNlTGFzdENhbGwgPCAwKSB8fCAobWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCk7XG4gICAgaWYgKHNob3VsZEludm9rZSh0aW1lKSkge1xuICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcbiAgICB9XG4gICAgLy8gUmVzdGFydCB0aGUgdGltZXIuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG4gICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cbiAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cbiAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcbiAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuICAgIH1cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgbGFzdEludm9rZVRpbWUgPSAwO1xuICAgIGxhc3RBcmdzID0gbGFzdENhbGxUaW1lID0gbGFzdFRoaXMgPSB0aW1lcklkID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgdmFyIHRpbWUgPSBub3coKSxcbiAgICAgICAgaXNJbnZva2luZyA9IHNob3VsZEludm9rZSh0aW1lKTtcblxuICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuICAgIGxhc3RUaGlzID0gdGhpcztcbiAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuXG4gICAgaWYgKGlzSW52b2tpbmcpIHtcbiAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGxlYWRpbmdFZGdlKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgICBpZiAobWF4aW5nKSB7XG4gICAgICAgIC8vIEhhbmRsZSBpbnZvY2F0aW9ucyBpbiBhIHRpZ2h0IGxvb3AuXG4gICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcbiAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG4gIHJldHVybiBkZWJvdW5jZWQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvZGVib3VuY2UuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogUGVyZm9ybXMgYVxuICogW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAqIGNvbXBhcmlzb24gYmV0d2VlbiB0d28gdmFsdWVzIHRvIGRldGVybWluZSBpZiB0aGV5IGFyZSBlcXVpdmFsZW50LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG4gKiB2YXIgb3RoZXIgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG4gKlxuICogXy5lcShvYmplY3QsIG9iamVjdCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5lcShvYmplY3QsIG90aGVyKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5lcSgnYScsICdhJyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5lcSgnYScsIE9iamVjdCgnYScpKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5lcShOYU4sIE5hTik7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGVxKHZhbHVlLCBvdGhlcikge1xuICByZXR1cm4gdmFsdWUgPT09IG90aGVyIHx8ICh2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlcTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9lcS5qc1xuICoqIG1vZHVsZSBpZCA9IDE0MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VGaW5kSW5kZXggPSByZXF1aXJlKCcuL19iYXNlRmluZEluZGV4JyksXG4gICAgYmFzZUl0ZXJhdGVlID0gcmVxdWlyZSgnLi9fYmFzZUl0ZXJhdGVlJyksXG4gICAgdG9JbnRlZ2VyID0gcmVxdWlyZSgnLi90b0ludGVnZXInKTtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4O1xuXG4vKipcbiAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZGAgZXhjZXB0IHRoYXQgaXQgcmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0XG4gKiBlbGVtZW50IGBwcmVkaWNhdGVgIHJldHVybnMgdHJ1dGh5IGZvciBpbnN0ZWFkIG9mIHRoZSBlbGVtZW50IGl0c2VsZi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDEuMS4wXG4gKiBAY2F0ZWdvcnkgQXJyYXlcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG4gKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV1cbiAqICBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IFtmcm9tSW5kZXg9MF0gVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZvdW5kIGVsZW1lbnQsIGVsc2UgYC0xYC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIHVzZXJzID0gW1xuICogICB7ICd1c2VyJzogJ2Jhcm5leScsICAnYWN0aXZlJzogZmFsc2UgfSxcbiAqICAgeyAndXNlcic6ICdmcmVkJywgICAgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gKiAgIHsgJ3VzZXInOiAncGViYmxlcycsICdhY3RpdmUnOiB0cnVlIH1cbiAqIF07XG4gKlxuICogXy5maW5kSW5kZXgodXNlcnMsIGZ1bmN0aW9uKG8pIHsgcmV0dXJuIG8udXNlciA9PSAnYmFybmV5JzsgfSk7XG4gKiAvLyA9PiAwXG4gKlxuICogLy8gVGhlIGBfLm1hdGNoZXNgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAqIF8uZmluZEluZGV4KHVzZXJzLCB7ICd1c2VyJzogJ2ZyZWQnLCAnYWN0aXZlJzogZmFsc2UgfSk7XG4gKiAvLyA9PiAxXG4gKlxuICogLy8gVGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICogXy5maW5kSW5kZXgodXNlcnMsIFsnYWN0aXZlJywgZmFsc2VdKTtcbiAqIC8vID0+IDBcbiAqXG4gKiAvLyBUaGUgYF8ucHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAqIF8uZmluZEluZGV4KHVzZXJzLCAnYWN0aXZlJyk7XG4gKiAvLyA9PiAyXG4gKi9cbmZ1bmN0aW9uIGZpbmRJbmRleChhcnJheSwgcHJlZGljYXRlLCBmcm9tSW5kZXgpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcbiAgaWYgKCFsZW5ndGgpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgdmFyIGluZGV4ID0gZnJvbUluZGV4ID09IG51bGwgPyAwIDogdG9JbnRlZ2VyKGZyb21JbmRleCk7XG4gIGlmIChpbmRleCA8IDApIHtcbiAgICBpbmRleCA9IG5hdGl2ZU1heChsZW5ndGggKyBpbmRleCwgMCk7XG4gIH1cbiAgcmV0dXJuIGJhc2VGaW5kSW5kZXgoYXJyYXksIGJhc2VJdGVyYXRlZShwcmVkaWNhdGUsIDMpLCBpbmRleCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZmluZEluZGV4O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2ZpbmRJbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDE0MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VHZXQgPSByZXF1aXJlKCcuL19iYXNlR2V0Jyk7XG5cbi8qKlxuICogR2V0cyB0aGUgdmFsdWUgYXQgYHBhdGhgIG9mIGBvYmplY3RgLiBJZiB0aGUgcmVzb2x2ZWQgdmFsdWUgaXNcbiAqIGB1bmRlZmluZWRgLCB0aGUgYGRlZmF1bHRWYWx1ZWAgaXMgdXNlZCBpbiBpdHMgcGxhY2UuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAzLjcuMFxuICogQGNhdGVnb3J5IE9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEBwYXJhbSB7Kn0gW2RlZmF1bHRWYWx1ZV0gVGhlIHZhbHVlIHJldHVybmVkIGZvciBgdW5kZWZpbmVkYCByZXNvbHZlZCB2YWx1ZXMuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICdhJzogW3sgJ2InOiB7ICdjJzogMyB9IH1dIH07XG4gKlxuICogXy5nZXQob2JqZWN0LCAnYVswXS5iLmMnKTtcbiAqIC8vID0+IDNcbiAqXG4gKiBfLmdldChvYmplY3QsIFsnYScsICcwJywgJ2InLCAnYyddKTtcbiAqIC8vID0+IDNcbiAqXG4gKiBfLmdldChvYmplY3QsICdhLmIuYycsICdkZWZhdWx0Jyk7XG4gKiAvLyA9PiAnZGVmYXVsdCdcbiAqL1xuZnVuY3Rpb24gZ2V0KG9iamVjdCwgcGF0aCwgZGVmYXVsdFZhbHVlKSB7XG4gIHZhciByZXN1bHQgPSBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGJhc2VHZXQob2JqZWN0LCBwYXRoKTtcbiAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdFZhbHVlIDogcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9nZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAxNDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlSGFzSW4gPSByZXF1aXJlKCcuL19iYXNlSGFzSW4nKSxcbiAgICBoYXNQYXRoID0gcmVxdWlyZSgnLi9faGFzUGF0aCcpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgcGF0aGAgaXMgYSBkaXJlY3Qgb3IgaW5oZXJpdGVkIHByb3BlcnR5IG9mIGBvYmplY3RgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBwYXRoYCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IF8uY3JlYXRlKHsgJ2EnOiBfLmNyZWF0ZSh7ICdiJzogMiB9KSB9KTtcbiAqXG4gKiBfLmhhc0luKG9iamVjdCwgJ2EnKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmhhc0luKG9iamVjdCwgJ2EuYicpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaGFzSW4ob2JqZWN0LCBbJ2EnLCAnYiddKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmhhc0luKG9iamVjdCwgJ2InKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGhhc0luKG9iamVjdCwgcGF0aCkge1xuICByZXR1cm4gb2JqZWN0ICE9IG51bGwgJiYgaGFzUGF0aChvYmplY3QsIHBhdGgsIGJhc2VIYXNJbik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaGFzSW47XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaGFzSW4uanNcbiAqKiBtb2R1bGUgaWQgPSAxNDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3QgYXJndW1lbnQgZ2l2ZW4gdG8gaXQuXG4gKlxuICogQHN0YXRpY1xuICogQHNpbmNlIDAuMS4wXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IFV0aWxcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgQW55IHZhbHVlLlxuICogQHJldHVybnMgeyp9IFJldHVybnMgYHZhbHVlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcbiAqXG4gKiBjb25zb2xlLmxvZyhfLmlkZW50aXR5KG9iamVjdCkgPT09IG9iamVjdCk7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGlkZW50aXR5KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpZGVudGl0eTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9pZGVudGl0eS5qc1xuICoqIG1vZHVsZSBpZCA9IDE0NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzQXJyYXlMaWtlID0gcmVxdWlyZSgnLi9pc0FycmF5TGlrZScpLFxuICAgIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4vaXNPYmplY3RMaWtlJyk7XG5cbi8qKlxuICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5pc0FycmF5TGlrZWAgZXhjZXB0IHRoYXQgaXQgYWxzbyBjaGVja3MgaWYgYHZhbHVlYFxuICogaXMgYW4gb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGFycmF5LWxpa2Ugb2JqZWN0LFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzQXJyYXlMaWtlKHZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0FycmF5TGlrZU9iamVjdDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9pc0FycmF5TGlrZU9iamVjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDE0NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzTGVuZ3RoID0gcmVxdWlyZSgnLi9pc0xlbmd0aCcpLFxuICAgIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4vaXNPYmplY3RMaWtlJyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG4gICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuICAgIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsXG4gICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcbiAgICBlcnJvclRhZyA9ICdbb2JqZWN0IEVycm9yXScsXG4gICAgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG4gICAgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG4gICAgbnVtYmVyVGFnID0gJ1tvYmplY3QgTnVtYmVyXScsXG4gICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XScsXG4gICAgcmVnZXhwVGFnID0gJ1tvYmplY3QgUmVnRXhwXScsXG4gICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG4gICAgc3RyaW5nVGFnID0gJ1tvYmplY3QgU3RyaW5nXScsXG4gICAgd2Vha01hcFRhZyA9ICdbb2JqZWN0IFdlYWtNYXBdJztcblxudmFyIGFycmF5QnVmZmVyVGFnID0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJyxcbiAgICBkYXRhVmlld1RhZyA9ICdbb2JqZWN0IERhdGFWaWV3XScsXG4gICAgZmxvYXQzMlRhZyA9ICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nLFxuICAgIGZsb2F0NjRUYWcgPSAnW29iamVjdCBGbG9hdDY0QXJyYXldJyxcbiAgICBpbnQ4VGFnID0gJ1tvYmplY3QgSW50OEFycmF5XScsXG4gICAgaW50MTZUYWcgPSAnW29iamVjdCBJbnQxNkFycmF5XScsXG4gICAgaW50MzJUYWcgPSAnW29iamVjdCBJbnQzMkFycmF5XScsXG4gICAgdWludDhUYWcgPSAnW29iamVjdCBVaW50OEFycmF5XScsXG4gICAgdWludDhDbGFtcGVkVGFnID0gJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJyxcbiAgICB1aW50MTZUYWcgPSAnW29iamVjdCBVaW50MTZBcnJheV0nLFxuICAgIHVpbnQzMlRhZyA9ICdbb2JqZWN0IFVpbnQzMkFycmF5XSc7XG5cbi8qKiBVc2VkIHRvIGlkZW50aWZ5IGB0b1N0cmluZ1RhZ2AgdmFsdWVzIG9mIHR5cGVkIGFycmF5cy4gKi9cbnZhciB0eXBlZEFycmF5VGFncyA9IHt9O1xudHlwZWRBcnJheVRhZ3NbZmxvYXQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1tmbG9hdDY0VGFnXSA9XG50eXBlZEFycmF5VGFnc1tpbnQ4VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2ludDE2VGFnXSA9XG50eXBlZEFycmF5VGFnc1tpbnQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50OFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbdWludDhDbGFtcGVkVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQxNlRhZ10gPVxudHlwZWRBcnJheVRhZ3NbdWludDMyVGFnXSA9IHRydWU7XG50eXBlZEFycmF5VGFnc1thcmdzVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2FycmF5VGFnXSA9XG50eXBlZEFycmF5VGFnc1thcnJheUJ1ZmZlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tib29sVGFnXSA9XG50eXBlZEFycmF5VGFnc1tkYXRhVmlld1RhZ10gPSB0eXBlZEFycmF5VGFnc1tkYXRlVGFnXSA9XG50eXBlZEFycmF5VGFnc1tlcnJvclRhZ10gPSB0eXBlZEFycmF5VGFnc1tmdW5jVGFnXSA9XG50eXBlZEFycmF5VGFnc1ttYXBUYWddID0gdHlwZWRBcnJheVRhZ3NbbnVtYmVyVGFnXSA9XG50eXBlZEFycmF5VGFnc1tvYmplY3RUYWddID0gdHlwZWRBcnJheVRhZ3NbcmVnZXhwVGFnXSA9XG50eXBlZEFycmF5VGFnc1tzZXRUYWddID0gdHlwZWRBcnJheVRhZ3Nbc3RyaW5nVGFnXSA9XG50eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgdHlwZWQgYXJyYXkuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAzLjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzVHlwZWRBcnJheShuZXcgVWludDhBcnJheSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1R5cGVkQXJyYXkoW10pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNUeXBlZEFycmF5KHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmXG4gICAgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhIXR5cGVkQXJyYXlUYWdzW29iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1R5cGVkQXJyYXk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaXNUeXBlZEFycmF5LmpzXG4gKiogbW9kdWxlIGlkID0gMTQ2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgTWFwQ2FjaGUgPSByZXF1aXJlKCcuL19NYXBDYWNoZScpO1xuXG4vKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBtZW1vaXplcyB0aGUgcmVzdWx0IG9mIGBmdW5jYC4gSWYgYHJlc29sdmVyYCBpc1xuICogcHJvdmlkZWQsIGl0IGRldGVybWluZXMgdGhlIGNhY2hlIGtleSBmb3Igc3RvcmluZyB0aGUgcmVzdWx0IGJhc2VkIG9uIHRoZVxuICogYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBtZW1vaXplZCBmdW5jdGlvbi4gQnkgZGVmYXVsdCwgdGhlIGZpcnN0IGFyZ3VtZW50XG4gKiBwcm92aWRlZCB0byB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24gaXMgdXNlZCBhcyB0aGUgbWFwIGNhY2hlIGtleS4gVGhlIGBmdW5jYFxuICogaXMgaW52b2tlZCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24uXG4gKlxuICogKipOb3RlOioqIFRoZSBjYWNoZSBpcyBleHBvc2VkIGFzIHRoZSBgY2FjaGVgIHByb3BlcnR5IG9uIHRoZSBtZW1vaXplZFxuICogZnVuY3Rpb24uIEl0cyBjcmVhdGlvbiBtYXkgYmUgY3VzdG9taXplZCBieSByZXBsYWNpbmcgdGhlIGBfLm1lbW9pemUuQ2FjaGVgXG4gKiBjb25zdHJ1Y3RvciB3aXRoIG9uZSB3aG9zZSBpbnN0YW5jZXMgaW1wbGVtZW50IHRoZVxuICogW2BNYXBgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1wcm9wZXJ0aWVzLW9mLXRoZS1tYXAtcHJvdG90eXBlLW9iamVjdClcbiAqIG1ldGhvZCBpbnRlcmZhY2Ugb2YgYGRlbGV0ZWAsIGBnZXRgLCBgaGFzYCwgYW5kIGBzZXRgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gaGF2ZSBpdHMgb3V0cHV0IG1lbW9pemVkLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW3Jlc29sdmVyXSBUaGUgZnVuY3Rpb24gdG8gcmVzb2x2ZSB0aGUgY2FjaGUga2V5LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgbWVtb2l6ZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICdhJzogMSwgJ2InOiAyIH07XG4gKiB2YXIgb3RoZXIgPSB7ICdjJzogMywgJ2QnOiA0IH07XG4gKlxuICogdmFyIHZhbHVlcyA9IF8ubWVtb2l6ZShfLnZhbHVlcyk7XG4gKiB2YWx1ZXMob2JqZWN0KTtcbiAqIC8vID0+IFsxLCAyXVxuICpcbiAqIHZhbHVlcyhvdGhlcik7XG4gKiAvLyA9PiBbMywgNF1cbiAqXG4gKiBvYmplY3QuYSA9IDI7XG4gKiB2YWx1ZXMob2JqZWN0KTtcbiAqIC8vID0+IFsxLCAyXVxuICpcbiAqIC8vIE1vZGlmeSB0aGUgcmVzdWx0IGNhY2hlLlxuICogdmFsdWVzLmNhY2hlLnNldChvYmplY3QsIFsnYScsICdiJ10pO1xuICogdmFsdWVzKG9iamVjdCk7XG4gKiAvLyA9PiBbJ2EnLCAnYiddXG4gKlxuICogLy8gUmVwbGFjZSBgXy5tZW1vaXplLkNhY2hlYC5cbiAqIF8ubWVtb2l6ZS5DYWNoZSA9IFdlYWtNYXA7XG4gKi9cbmZ1bmN0aW9uIG1lbW9pemUoZnVuYywgcmVzb2x2ZXIpIHtcbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicgfHwgKHJlc29sdmVyICYmIHR5cGVvZiByZXNvbHZlciAhPSAnZnVuY3Rpb24nKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICB2YXIgbWVtb2l6ZWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAga2V5ID0gcmVzb2x2ZXIgPyByZXNvbHZlci5hcHBseSh0aGlzLCBhcmdzKSA6IGFyZ3NbMF0sXG4gICAgICAgIGNhY2hlID0gbWVtb2l6ZWQuY2FjaGU7XG5cbiAgICBpZiAoY2FjaGUuaGFzKGtleSkpIHtcbiAgICAgIHJldHVybiBjYWNoZS5nZXQoa2V5KTtcbiAgICB9XG4gICAgdmFyIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG4gICAgbWVtb2l6ZWQuY2FjaGUgPSBjYWNoZS5zZXQoa2V5LCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG4gIG1lbW9pemVkLmNhY2hlID0gbmV3IChtZW1vaXplLkNhY2hlIHx8IE1hcENhY2hlKTtcbiAgcmV0dXJuIG1lbW9pemVkO1xufVxuXG4vLyBBc3NpZ24gY2FjaGUgdG8gYF8ubWVtb2l6ZWAuXG5tZW1vaXplLkNhY2hlID0gTWFwQ2FjaGU7XG5cbm1vZHVsZS5leHBvcnRzID0gbWVtb2l6ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9tZW1vaXplLmpzXG4gKiogbW9kdWxlIGlkID0gMTQ3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuICogdGhlIFVuaXggZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAyLjQuMFxuICogQGNhdGVnb3J5IERhdGVcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVzdGFtcC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuICogfSwgXy5ub3coKSk7XG4gKiAvLyA9PiBMb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBpbnZvY2F0aW9uLlxuICovXG5mdW5jdGlvbiBub3coKSB7XG4gIHJldHVybiBEYXRlLm5vdygpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5vdztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9ub3cuanNcbiAqKiBtb2R1bGUgaWQgPSAxNDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlUHJvcGVydHkgPSByZXF1aXJlKCcuL19iYXNlUHJvcGVydHknKSxcbiAgICBiYXNlUHJvcGVydHlEZWVwID0gcmVxdWlyZSgnLi9fYmFzZVByb3BlcnR5RGVlcCcpLFxuICAgIGlzS2V5ID0gcmVxdWlyZSgnLi9faXNLZXknKSxcbiAgICB0b0tleSA9IHJlcXVpcmUoJy4vX3RvS2V5Jyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgdmFsdWUgYXQgYHBhdGhgIG9mIGEgZ2l2ZW4gb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMi40LjBcbiAqIEBjYXRlZ29yeSBVdGlsXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYWNjZXNzb3IgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3RzID0gW1xuICogICB7ICdhJzogeyAnYic6IDIgfSB9LFxuICogICB7ICdhJzogeyAnYic6IDEgfSB9XG4gKiBdO1xuICpcbiAqIF8ubWFwKG9iamVjdHMsIF8ucHJvcGVydHkoJ2EuYicpKTtcbiAqIC8vID0+IFsyLCAxXVxuICpcbiAqIF8ubWFwKF8uc29ydEJ5KG9iamVjdHMsIF8ucHJvcGVydHkoWydhJywgJ2InXSkpLCAnYS5iJyk7XG4gKiAvLyA9PiBbMSwgMl1cbiAqL1xuZnVuY3Rpb24gcHJvcGVydHkocGF0aCkge1xuICByZXR1cm4gaXNLZXkocGF0aCkgPyBiYXNlUHJvcGVydHkodG9LZXkocGF0aCkpIDogYmFzZVByb3BlcnR5RGVlcChwYXRoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBwcm9wZXJ0eTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9wcm9wZXJ0eS5qc1xuICoqIG1vZHVsZSBpZCA9IDE0OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGFwcGx5ID0gcmVxdWlyZSgnLi9fYXBwbHknKSxcbiAgICB0b0ludGVnZXIgPSByZXF1aXJlKCcuL3RvSW50ZWdlcicpO1xuXG4vKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZVxuICogY3JlYXRlZCBmdW5jdGlvbiBhbmQgYXJndW1lbnRzIGZyb20gYHN0YXJ0YCBhbmQgYmV5b25kIHByb3ZpZGVkIGFzXG4gKiBhbiBhcnJheS5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgYmFzZWQgb24gdGhlXG4gKiBbcmVzdCBwYXJhbWV0ZXJdKGh0dHBzOi8vbWRuLmlvL3Jlc3RfcGFyYW1ldGVycykuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBhcHBseSBhIHJlc3QgcGFyYW1ldGVyIHRvLlxuICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD1mdW5jLmxlbmd0aC0xXSBUaGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIHJlc3QgcGFyYW1ldGVyLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBzYXkgPSBfLnJlc3QoZnVuY3Rpb24od2hhdCwgbmFtZXMpIHtcbiAqICAgcmV0dXJuIHdoYXQgKyAnICcgKyBfLmluaXRpYWwobmFtZXMpLmpvaW4oJywgJykgK1xuICogICAgIChfLnNpemUobmFtZXMpID4gMSA/ICcsICYgJyA6ICcnKSArIF8ubGFzdChuYW1lcyk7XG4gKiB9KTtcbiAqXG4gKiBzYXkoJ2hlbGxvJywgJ2ZyZWQnLCAnYmFybmV5JywgJ3BlYmJsZXMnKTtcbiAqIC8vID0+ICdoZWxsbyBmcmVkLCBiYXJuZXksICYgcGViYmxlcydcbiAqL1xuZnVuY3Rpb24gcmVzdChmdW5jLCBzdGFydCkge1xuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICBzdGFydCA9IG5hdGl2ZU1heChzdGFydCA9PT0gdW5kZWZpbmVkID8gKGZ1bmMubGVuZ3RoIC0gMSkgOiB0b0ludGVnZXIoc3RhcnQpLCAwKTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBuYXRpdmVNYXgoYXJncy5sZW5ndGggLSBzdGFydCwgMCksXG4gICAgICAgIGFycmF5ID0gQXJyYXkobGVuZ3RoKTtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICBhcnJheVtpbmRleF0gPSBhcmdzW3N0YXJ0ICsgaW5kZXhdO1xuICAgIH1cbiAgICBzd2l0Y2ggKHN0YXJ0KSB7XG4gICAgICBjYXNlIDA6IHJldHVybiBmdW5jLmNhbGwodGhpcywgYXJyYXkpO1xuICAgICAgY2FzZSAxOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3NbMF0sIGFycmF5KTtcbiAgICAgIGNhc2UgMjogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzLCBhcmdzWzBdLCBhcmdzWzFdLCBhcnJheSk7XG4gICAgfVxuICAgIHZhciBvdGhlckFyZ3MgPSBBcnJheShzdGFydCArIDEpO1xuICAgIGluZGV4ID0gLTE7XG4gICAgd2hpbGUgKCsraW5kZXggPCBzdGFydCkge1xuICAgICAgb3RoZXJBcmdzW2luZGV4XSA9IGFyZ3NbaW5kZXhdO1xuICAgIH1cbiAgICBvdGhlckFyZ3Nbc3RhcnRdID0gYXJyYXk7XG4gICAgcmV0dXJuIGFwcGx5KGZ1bmMsIHRoaXMsIG90aGVyQXJncyk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVzdDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9yZXN0LmpzXG4gKiogbW9kdWxlIGlkID0gMTUwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgdG9OdW1iZXIgPSByZXF1aXJlKCcuL3RvTnVtYmVyJyk7XG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIElORklOSVRZID0gMSAvIDAsXG4gICAgTUFYX0lOVEVHRVIgPSAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwODtcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgZmluaXRlIG51bWJlci5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMTIuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgbnVtYmVyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvRmluaXRlKDMuMik7XG4gKiAvLyA9PiAzLjJcbiAqXG4gKiBfLnRvRmluaXRlKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gNWUtMzI0XG4gKlxuICogXy50b0Zpbml0ZShJbmZpbml0eSk7XG4gKiAvLyA9PiAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOFxuICpcbiAqIF8udG9GaW5pdGUoJzMuMicpO1xuICogLy8gPT4gMy4yXG4gKi9cbmZ1bmN0aW9uIHRvRmluaXRlKHZhbHVlKSB7XG4gIGlmICghdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6IDA7XG4gIH1cbiAgdmFsdWUgPSB0b051bWJlcih2YWx1ZSk7XG4gIGlmICh2YWx1ZSA9PT0gSU5GSU5JVFkgfHwgdmFsdWUgPT09IC1JTkZJTklUWSkge1xuICAgIHZhciBzaWduID0gKHZhbHVlIDwgMCA/IC0xIDogMSk7XG4gICAgcmV0dXJuIHNpZ24gKiBNQVhfSU5URUdFUjtcbiAgfVxuICByZXR1cm4gdmFsdWUgPT09IHZhbHVlID8gdmFsdWUgOiAwO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRvRmluaXRlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL3RvRmluaXRlLmpzXG4gKiogbW9kdWxlIGlkID0gMTUxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZVRvU3RyaW5nID0gcmVxdWlyZSgnLi9fYmFzZVRvU3RyaW5nJyk7XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZy4gQW4gZW1wdHkgc3RyaW5nIGlzIHJldHVybmVkIGZvciBgbnVsbGBcbiAqIGFuZCBgdW5kZWZpbmVkYCB2YWx1ZXMuIFRoZSBzaWduIG9mIGAtMGAgaXMgcHJlc2VydmVkLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvU3RyaW5nKG51bGwpO1xuICogLy8gPT4gJydcbiAqXG4gKiBfLnRvU3RyaW5nKC0wKTtcbiAqIC8vID0+ICctMCdcbiAqXG4gKiBfLnRvU3RyaW5nKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiAnMSwyLDMnXG4gKi9cbmZ1bmN0aW9uIHRvU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiBiYXNlVG9TdHJpbmcodmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRvU3RyaW5nO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL3RvU3RyaW5nLmpzXG4gKiogbW9kdWxlIGlkID0gMTUyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcbi8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgQmVnaW4gcHJpc20tY29yZS5qc1xuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG52YXIgX3NlbGYgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpXG5cdD8gd2luZG93ICAgLy8gaWYgaW4gYnJvd3NlclxuXHQ6IChcblx0XHQodHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAndW5kZWZpbmVkJyAmJiBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGUpXG5cdFx0PyBzZWxmIC8vIGlmIGluIHdvcmtlclxuXHRcdDoge30gICAvLyBpZiBpbiBub2RlIGpzXG5cdCk7XG5cbi8qKlxuICogUHJpc206IExpZ2h0d2VpZ2h0LCByb2J1c3QsIGVsZWdhbnQgc3ludGF4IGhpZ2hsaWdodGluZ1xuICogTUlUIGxpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHAvXG4gKiBAYXV0aG9yIExlYSBWZXJvdSBodHRwOi8vbGVhLnZlcm91Lm1lXG4gKi9cblxudmFyIFByaXNtID0gKGZ1bmN0aW9uKCl7XG5cbi8vIFByaXZhdGUgaGVscGVyIHZhcnNcbnZhciBsYW5nID0gL1xcYmxhbmcoPzp1YWdlKT8tKFxcdyspXFxiL2k7XG52YXIgdW5pcXVlSWQgPSAwO1xuXG52YXIgXyA9IF9zZWxmLlByaXNtID0ge1xuXHR1dGlsOiB7XG5cdFx0ZW5jb2RlOiBmdW5jdGlvbiAodG9rZW5zKSB7XG5cdFx0XHRpZiAodG9rZW5zIGluc3RhbmNlb2YgVG9rZW4pIHtcblx0XHRcdFx0cmV0dXJuIG5ldyBUb2tlbih0b2tlbnMudHlwZSwgXy51dGlsLmVuY29kZSh0b2tlbnMuY29udGVudCksIHRva2Vucy5hbGlhcyk7XG5cdFx0XHR9IGVsc2UgaWYgKF8udXRpbC50eXBlKHRva2VucykgPT09ICdBcnJheScpIHtcblx0XHRcdFx0cmV0dXJuIHRva2Vucy5tYXAoXy51dGlsLmVuY29kZSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gdG9rZW5zLnJlcGxhY2UoLyYvZywgJyZhbXA7JykucmVwbGFjZSgvPC9nLCAnJmx0OycpLnJlcGxhY2UoL1xcdTAwYTAvZywgJyAnKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0dHlwZTogZnVuY3Rpb24gKG8pIHtcblx0XHRcdHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykubWF0Y2goL1xcW29iamVjdCAoXFx3KylcXF0vKVsxXTtcblx0XHR9LFxuXG5cdFx0b2JqSWQ6IGZ1bmN0aW9uIChvYmopIHtcblx0XHRcdGlmICghb2JqWydfX2lkJ10pIHtcblx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgJ19faWQnLCB7IHZhbHVlOiArK3VuaXF1ZUlkIH0pO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG9ialsnX19pZCddO1xuXHRcdH0sXG5cblx0XHQvLyBEZWVwIGNsb25lIGEgbGFuZ3VhZ2UgZGVmaW5pdGlvbiAoZS5nLiB0byBleHRlbmQgaXQpXG5cdFx0Y2xvbmU6IGZ1bmN0aW9uIChvKSB7XG5cdFx0XHR2YXIgdHlwZSA9IF8udXRpbC50eXBlKG8pO1xuXG5cdFx0XHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRcdFx0Y2FzZSAnT2JqZWN0Jzpcblx0XHRcdFx0XHR2YXIgY2xvbmUgPSB7fTtcblxuXHRcdFx0XHRcdGZvciAodmFyIGtleSBpbiBvKSB7XG5cdFx0XHRcdFx0XHRpZiAoby5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdFx0XHRcdFx0XHRcdGNsb25lW2tleV0gPSBfLnV0aWwuY2xvbmUob1trZXldKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gY2xvbmU7XG5cblx0XHRcdFx0Y2FzZSAnQXJyYXknOlxuXHRcdFx0XHRcdC8vIENoZWNrIGZvciBleGlzdGVuY2UgZm9yIElFOFxuXHRcdFx0XHRcdHJldHVybiBvLm1hcCAmJiBvLm1hcChmdW5jdGlvbih2KSB7IHJldHVybiBfLnV0aWwuY2xvbmUodik7IH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbztcblx0XHR9XG5cdH0sXG5cblx0bGFuZ3VhZ2VzOiB7XG5cdFx0ZXh0ZW5kOiBmdW5jdGlvbiAoaWQsIHJlZGVmKSB7XG5cdFx0XHR2YXIgbGFuZyA9IF8udXRpbC5jbG9uZShfLmxhbmd1YWdlc1tpZF0pO1xuXG5cdFx0XHRmb3IgKHZhciBrZXkgaW4gcmVkZWYpIHtcblx0XHRcdFx0bGFuZ1trZXldID0gcmVkZWZba2V5XTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGxhbmc7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEluc2VydCBhIHRva2VuIGJlZm9yZSBhbm90aGVyIHRva2VuIGluIGEgbGFuZ3VhZ2UgbGl0ZXJhbFxuXHRcdCAqIEFzIHRoaXMgbmVlZHMgdG8gcmVjcmVhdGUgdGhlIG9iamVjdCAod2UgY2Fubm90IGFjdHVhbGx5IGluc2VydCBiZWZvcmUga2V5cyBpbiBvYmplY3QgbGl0ZXJhbHMpLFxuXHRcdCAqIHdlIGNhbm5vdCBqdXN0IHByb3ZpZGUgYW4gb2JqZWN0LCB3ZSBuZWVkIGFub2JqZWN0IGFuZCBhIGtleS5cblx0XHQgKiBAcGFyYW0gaW5zaWRlIFRoZSBrZXkgKG9yIGxhbmd1YWdlIGlkKSBvZiB0aGUgcGFyZW50XG5cdFx0ICogQHBhcmFtIGJlZm9yZSBUaGUga2V5IHRvIGluc2VydCBiZWZvcmUuIElmIG5vdCBwcm92aWRlZCwgdGhlIGZ1bmN0aW9uIGFwcGVuZHMgaW5zdGVhZC5cblx0XHQgKiBAcGFyYW0gaW5zZXJ0IE9iamVjdCB3aXRoIHRoZSBrZXkvdmFsdWUgcGFpcnMgdG8gaW5zZXJ0XG5cdFx0ICogQHBhcmFtIHJvb3QgVGhlIG9iamVjdCB0aGF0IGNvbnRhaW5zIGBpbnNpZGVgLiBJZiBlcXVhbCB0byBQcmlzbS5sYW5ndWFnZXMsIGl0IGNhbiBiZSBvbWl0dGVkLlxuXHRcdCAqL1xuXHRcdGluc2VydEJlZm9yZTogZnVuY3Rpb24gKGluc2lkZSwgYmVmb3JlLCBpbnNlcnQsIHJvb3QpIHtcblx0XHRcdHJvb3QgPSByb290IHx8IF8ubGFuZ3VhZ2VzO1xuXHRcdFx0dmFyIGdyYW1tYXIgPSByb290W2luc2lkZV07XG5cblx0XHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID09IDIpIHtcblx0XHRcdFx0aW5zZXJ0ID0gYXJndW1lbnRzWzFdO1xuXG5cdFx0XHRcdGZvciAodmFyIG5ld1Rva2VuIGluIGluc2VydCkge1xuXHRcdFx0XHRcdGlmIChpbnNlcnQuaGFzT3duUHJvcGVydHkobmV3VG9rZW4pKSB7XG5cdFx0XHRcdFx0XHRncmFtbWFyW25ld1Rva2VuXSA9IGluc2VydFtuZXdUb2tlbl07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGdyYW1tYXI7XG5cdFx0XHR9XG5cblx0XHRcdHZhciByZXQgPSB7fTtcblxuXHRcdFx0Zm9yICh2YXIgdG9rZW4gaW4gZ3JhbW1hcikge1xuXG5cdFx0XHRcdGlmIChncmFtbWFyLmhhc093blByb3BlcnR5KHRva2VuKSkge1xuXG5cdFx0XHRcdFx0aWYgKHRva2VuID09IGJlZm9yZSkge1xuXG5cdFx0XHRcdFx0XHRmb3IgKHZhciBuZXdUb2tlbiBpbiBpbnNlcnQpIHtcblxuXHRcdFx0XHRcdFx0XHRpZiAoaW5zZXJ0Lmhhc093blByb3BlcnR5KG5ld1Rva2VuKSkge1xuXHRcdFx0XHRcdFx0XHRcdHJldFtuZXdUb2tlbl0gPSBpbnNlcnRbbmV3VG9rZW5dO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0W3Rva2VuXSA9IGdyYW1tYXJbdG9rZW5dO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFVwZGF0ZSByZWZlcmVuY2VzIGluIG90aGVyIGxhbmd1YWdlIGRlZmluaXRpb25zXG5cdFx0XHRfLmxhbmd1YWdlcy5ERlMoXy5sYW5ndWFnZXMsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcblx0XHRcdFx0aWYgKHZhbHVlID09PSByb290W2luc2lkZV0gJiYga2V5ICE9IGluc2lkZSkge1xuXHRcdFx0XHRcdHRoaXNba2V5XSA9IHJldDtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiByb290W2luc2lkZV0gPSByZXQ7XG5cdFx0fSxcblxuXHRcdC8vIFRyYXZlcnNlIGEgbGFuZ3VhZ2UgZGVmaW5pdGlvbiB3aXRoIERlcHRoIEZpcnN0IFNlYXJjaFxuXHRcdERGUzogZnVuY3Rpb24obywgY2FsbGJhY2ssIHR5cGUsIHZpc2l0ZWQpIHtcblx0XHRcdHZpc2l0ZWQgPSB2aXNpdGVkIHx8IHt9O1xuXHRcdFx0Zm9yICh2YXIgaSBpbiBvKSB7XG5cdFx0XHRcdGlmIChvLmhhc093blByb3BlcnR5KGkpKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2suY2FsbChvLCBpLCBvW2ldLCB0eXBlIHx8IGkpO1xuXG5cdFx0XHRcdFx0aWYgKF8udXRpbC50eXBlKG9baV0pID09PSAnT2JqZWN0JyAmJiAhdmlzaXRlZFtfLnV0aWwub2JqSWQob1tpXSldKSB7XG5cdFx0XHRcdFx0XHR2aXNpdGVkW18udXRpbC5vYmpJZChvW2ldKV0gPSB0cnVlO1xuXHRcdFx0XHRcdFx0Xy5sYW5ndWFnZXMuREZTKG9baV0sIGNhbGxiYWNrLCBudWxsLCB2aXNpdGVkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSBpZiAoXy51dGlsLnR5cGUob1tpXSkgPT09ICdBcnJheScgJiYgIXZpc2l0ZWRbXy51dGlsLm9iaklkKG9baV0pXSkge1xuXHRcdFx0XHRcdFx0dmlzaXRlZFtfLnV0aWwub2JqSWQob1tpXSldID0gdHJ1ZTtcblx0XHRcdFx0XHRcdF8ubGFuZ3VhZ2VzLkRGUyhvW2ldLCBjYWxsYmFjaywgaSwgdmlzaXRlZCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXHRwbHVnaW5zOiB7fSxcblxuXHRoaWdobGlnaHRBbGw6IGZ1bmN0aW9uKGFzeW5jLCBjYWxsYmFjaykge1xuXHRcdHZhciBlbnYgPSB7XG5cdFx0XHRjYWxsYmFjazogY2FsbGJhY2ssXG5cdFx0XHRzZWxlY3RvcjogJ2NvZGVbY2xhc3MqPVwibGFuZ3VhZ2UtXCJdLCBbY2xhc3MqPVwibGFuZ3VhZ2UtXCJdIGNvZGUsIGNvZGVbY2xhc3MqPVwibGFuZy1cIl0sIFtjbGFzcyo9XCJsYW5nLVwiXSBjb2RlJ1xuXHRcdH07XG5cblx0XHRfLmhvb2tzLnJ1bihcImJlZm9yZS1oaWdobGlnaHRhbGxcIiwgZW52KTtcblxuXHRcdHZhciBlbGVtZW50cyA9IGVudi5lbGVtZW50cyB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVudi5zZWxlY3Rvcik7XG5cblx0XHRmb3IgKHZhciBpPTAsIGVsZW1lbnQ7IGVsZW1lbnQgPSBlbGVtZW50c1tpKytdOykge1xuXHRcdFx0Xy5oaWdobGlnaHRFbGVtZW50KGVsZW1lbnQsIGFzeW5jID09PSB0cnVlLCBlbnYuY2FsbGJhY2spO1xuXHRcdH1cblx0fSxcblxuXHRoaWdobGlnaHRFbGVtZW50OiBmdW5jdGlvbihlbGVtZW50LCBhc3luYywgY2FsbGJhY2spIHtcblx0XHQvLyBGaW5kIGxhbmd1YWdlXG5cdFx0dmFyIGxhbmd1YWdlLCBncmFtbWFyLCBwYXJlbnQgPSBlbGVtZW50O1xuXG5cdFx0d2hpbGUgKHBhcmVudCAmJiAhbGFuZy50ZXN0KHBhcmVudC5jbGFzc05hbWUpKSB7XG5cdFx0XHRwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcblx0XHR9XG5cblx0XHRpZiAocGFyZW50KSB7XG5cdFx0XHRsYW5ndWFnZSA9IChwYXJlbnQuY2xhc3NOYW1lLm1hdGNoKGxhbmcpIHx8IFssJyddKVsxXS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0Z3JhbW1hciA9IF8ubGFuZ3VhZ2VzW2xhbmd1YWdlXTtcblx0XHR9XG5cblx0XHQvLyBTZXQgbGFuZ3VhZ2Ugb24gdGhlIGVsZW1lbnQsIGlmIG5vdCBwcmVzZW50XG5cdFx0ZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKGxhbmcsICcnKS5yZXBsYWNlKC9cXHMrL2csICcgJykgKyAnIGxhbmd1YWdlLScgKyBsYW5ndWFnZTtcblxuXHRcdC8vIFNldCBsYW5ndWFnZSBvbiB0aGUgcGFyZW50LCBmb3Igc3R5bGluZ1xuXHRcdHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcblxuXHRcdGlmICgvcHJlL2kudGVzdChwYXJlbnQubm9kZU5hbWUpKSB7XG5cdFx0XHRwYXJlbnQuY2xhc3NOYW1lID0gcGFyZW50LmNsYXNzTmFtZS5yZXBsYWNlKGxhbmcsICcnKS5yZXBsYWNlKC9cXHMrL2csICcgJykgKyAnIGxhbmd1YWdlLScgKyBsYW5ndWFnZTtcblx0XHR9XG5cblx0XHR2YXIgY29kZSA9IGVsZW1lbnQudGV4dENvbnRlbnQ7XG5cblx0XHR2YXIgZW52ID0ge1xuXHRcdFx0ZWxlbWVudDogZWxlbWVudCxcblx0XHRcdGxhbmd1YWdlOiBsYW5ndWFnZSxcblx0XHRcdGdyYW1tYXI6IGdyYW1tYXIsXG5cdFx0XHRjb2RlOiBjb2RlXG5cdFx0fTtcblxuXHRcdF8uaG9va3MucnVuKCdiZWZvcmUtc2FuaXR5LWNoZWNrJywgZW52KTtcblxuXHRcdGlmICghZW52LmNvZGUgfHwgIWVudi5ncmFtbWFyKSB7XG5cdFx0XHRfLmhvb2tzLnJ1bignY29tcGxldGUnLCBlbnYpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdF8uaG9va3MucnVuKCdiZWZvcmUtaGlnaGxpZ2h0JywgZW52KTtcblxuXHRcdGlmIChhc3luYyAmJiBfc2VsZi5Xb3JrZXIpIHtcblx0XHRcdHZhciB3b3JrZXIgPSBuZXcgV29ya2VyKF8uZmlsZW5hbWUpO1xuXG5cdFx0XHR3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24oZXZ0KSB7XG5cdFx0XHRcdGVudi5oaWdobGlnaHRlZENvZGUgPSBldnQuZGF0YTtcblxuXHRcdFx0XHRfLmhvb2tzLnJ1bignYmVmb3JlLWluc2VydCcsIGVudik7XG5cblx0XHRcdFx0ZW52LmVsZW1lbnQuaW5uZXJIVE1MID0gZW52LmhpZ2hsaWdodGVkQ29kZTtcblxuXHRcdFx0XHRjYWxsYmFjayAmJiBjYWxsYmFjay5jYWxsKGVudi5lbGVtZW50KTtcblx0XHRcdFx0Xy5ob29rcy5ydW4oJ2FmdGVyLWhpZ2hsaWdodCcsIGVudik7XG5cdFx0XHRcdF8uaG9va3MucnVuKCdjb21wbGV0ZScsIGVudik7XG5cdFx0XHR9O1xuXG5cdFx0XHR3b3JrZXIucG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0XHRsYW5ndWFnZTogZW52Lmxhbmd1YWdlLFxuXHRcdFx0XHRjb2RlOiBlbnYuY29kZSxcblx0XHRcdFx0aW1tZWRpYXRlQ2xvc2U6IHRydWVcblx0XHRcdH0pKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRlbnYuaGlnaGxpZ2h0ZWRDb2RlID0gXy5oaWdobGlnaHQoZW52LmNvZGUsIGVudi5ncmFtbWFyLCBlbnYubGFuZ3VhZ2UpO1xuXG5cdFx0XHRfLmhvb2tzLnJ1bignYmVmb3JlLWluc2VydCcsIGVudik7XG5cblx0XHRcdGVudi5lbGVtZW50LmlubmVySFRNTCA9IGVudi5oaWdobGlnaHRlZENvZGU7XG5cblx0XHRcdGNhbGxiYWNrICYmIGNhbGxiYWNrLmNhbGwoZWxlbWVudCk7XG5cblx0XHRcdF8uaG9va3MucnVuKCdhZnRlci1oaWdobGlnaHQnLCBlbnYpO1xuXHRcdFx0Xy5ob29rcy5ydW4oJ2NvbXBsZXRlJywgZW52KTtcblx0XHR9XG5cdH0sXG5cblx0aGlnaGxpZ2h0OiBmdW5jdGlvbiAodGV4dCwgZ3JhbW1hciwgbGFuZ3VhZ2UpIHtcblx0XHR2YXIgdG9rZW5zID0gXy50b2tlbml6ZSh0ZXh0LCBncmFtbWFyKTtcblx0XHRyZXR1cm4gVG9rZW4uc3RyaW5naWZ5KF8udXRpbC5lbmNvZGUodG9rZW5zKSwgbGFuZ3VhZ2UpO1xuXHR9LFxuXG5cdHRva2VuaXplOiBmdW5jdGlvbih0ZXh0LCBncmFtbWFyLCBsYW5ndWFnZSkge1xuXHRcdHZhciBUb2tlbiA9IF8uVG9rZW47XG5cblx0XHR2YXIgc3RyYXJyID0gW3RleHRdO1xuXG5cdFx0dmFyIHJlc3QgPSBncmFtbWFyLnJlc3Q7XG5cblx0XHRpZiAocmVzdCkge1xuXHRcdFx0Zm9yICh2YXIgdG9rZW4gaW4gcmVzdCkge1xuXHRcdFx0XHRncmFtbWFyW3Rva2VuXSA9IHJlc3RbdG9rZW5dO1xuXHRcdFx0fVxuXG5cdFx0XHRkZWxldGUgZ3JhbW1hci5yZXN0O1xuXHRcdH1cblxuXHRcdHRva2VubG9vcDogZm9yICh2YXIgdG9rZW4gaW4gZ3JhbW1hcikge1xuXHRcdFx0aWYoIWdyYW1tYXIuaGFzT3duUHJvcGVydHkodG9rZW4pIHx8ICFncmFtbWFyW3Rva2VuXSkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIHBhdHRlcm5zID0gZ3JhbW1hclt0b2tlbl07XG5cdFx0XHRwYXR0ZXJucyA9IChfLnV0aWwudHlwZShwYXR0ZXJucykgPT09IFwiQXJyYXlcIikgPyBwYXR0ZXJucyA6IFtwYXR0ZXJuc107XG5cblx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgcGF0dGVybnMubGVuZ3RoOyArK2opIHtcblx0XHRcdFx0dmFyIHBhdHRlcm4gPSBwYXR0ZXJuc1tqXSxcblx0XHRcdFx0XHRpbnNpZGUgPSBwYXR0ZXJuLmluc2lkZSxcblx0XHRcdFx0XHRsb29rYmVoaW5kID0gISFwYXR0ZXJuLmxvb2tiZWhpbmQsXG5cdFx0XHRcdFx0Z3JlZWR5ID0gISFwYXR0ZXJuLmdyZWVkeSxcblx0XHRcdFx0XHRsb29rYmVoaW5kTGVuZ3RoID0gMCxcblx0XHRcdFx0XHRhbGlhcyA9IHBhdHRlcm4uYWxpYXM7XG5cblx0XHRcdFx0cGF0dGVybiA9IHBhdHRlcm4ucGF0dGVybiB8fCBwYXR0ZXJuO1xuXG5cdFx0XHRcdGZvciAodmFyIGk9MDsgaTxzdHJhcnIubGVuZ3RoOyBpKyspIHsgLy8gRG9u4oCZdCBjYWNoZSBsZW5ndGggYXMgaXQgY2hhbmdlcyBkdXJpbmcgdGhlIGxvb3BcblxuXHRcdFx0XHRcdHZhciBzdHIgPSBzdHJhcnJbaV07XG5cblx0XHRcdFx0XHRpZiAoc3RyYXJyLmxlbmd0aCA+IHRleHQubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHQvLyBTb21ldGhpbmcgd2VudCB0ZXJyaWJseSB3cm9uZywgQUJPUlQsIEFCT1JUIVxuXHRcdFx0XHRcdFx0YnJlYWsgdG9rZW5sb29wO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChzdHIgaW5zdGFuY2VvZiBUb2tlbikge1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cGF0dGVybi5sYXN0SW5kZXggPSAwO1xuXG5cdFx0XHRcdFx0dmFyIG1hdGNoID0gcGF0dGVybi5leGVjKHN0ciksXG5cdFx0XHRcdFx0ICAgIGRlbE51bSA9IDE7XG5cblx0XHRcdFx0XHQvLyBHcmVlZHkgcGF0dGVybnMgY2FuIG92ZXJyaWRlL3JlbW92ZSB1cCB0byB0d28gcHJldmlvdXNseSBtYXRjaGVkIHRva2Vuc1xuXHRcdFx0XHRcdGlmICghbWF0Y2ggJiYgZ3JlZWR5ICYmIGkgIT0gc3RyYXJyLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0XHRcdC8vIFJlY29uc3RydWN0IHRoZSBvcmlnaW5hbCB0ZXh0IHVzaW5nIHRoZSBuZXh0IHR3byB0b2tlbnNcblx0XHRcdFx0XHRcdHZhciBuZXh0VG9rZW4gPSBzdHJhcnJbaSArIDFdLm1hdGNoZWRTdHIgfHwgc3RyYXJyW2kgKyAxXSxcblx0XHRcdFx0XHRcdCAgICBjb21iU3RyID0gc3RyICsgbmV4dFRva2VuO1xuXG5cdFx0XHRcdFx0XHRpZiAoaSA8IHN0cmFyci5sZW5ndGggLSAyKSB7XG5cdFx0XHRcdFx0XHRcdGNvbWJTdHIgKz0gc3RyYXJyW2kgKyAyXS5tYXRjaGVkU3RyIHx8IHN0cmFycltpICsgMl07XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIFRyeSB0aGUgcGF0dGVybiBhZ2FpbiBvbiB0aGUgcmVjb25zdHJ1Y3RlZCB0ZXh0XG5cdFx0XHRcdFx0XHRwYXR0ZXJuLmxhc3RJbmRleCA9IDA7XG5cdFx0XHRcdFx0XHRtYXRjaCA9IHBhdHRlcm4uZXhlYyhjb21iU3RyKTtcblx0XHRcdFx0XHRcdGlmICghbWF0Y2gpIHtcblx0XHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHZhciBmcm9tID0gbWF0Y2guaW5kZXggKyAobG9va2JlaGluZCA/IG1hdGNoWzFdLmxlbmd0aCA6IDApO1xuXHRcdFx0XHRcdFx0Ly8gVG8gYmUgYSB2YWxpZCBjYW5kaWRhdGUsIHRoZSBuZXcgbWF0Y2ggaGFzIHRvIHN0YXJ0IGluc2lkZSBvZiBzdHJcblx0XHRcdFx0XHRcdGlmIChmcm9tID49IHN0ci5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR2YXIgdG8gPSBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCxcblx0XHRcdFx0XHRcdCAgICBsZW4gPSBzdHIubGVuZ3RoICsgbmV4dFRva2VuLmxlbmd0aDtcblxuXHRcdFx0XHRcdFx0Ly8gTnVtYmVyIG9mIHRva2VucyB0byBkZWxldGUgYW5kIHJlcGxhY2Ugd2l0aCB0aGUgbmV3IG1hdGNoXG5cdFx0XHRcdFx0XHRkZWxOdW0gPSAzO1xuXG5cdFx0XHRcdFx0XHRpZiAodG8gPD0gbGVuKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChzdHJhcnJbaSArIDFdLmdyZWVkeSkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGRlbE51bSA9IDI7XG5cdFx0XHRcdFx0XHRcdGNvbWJTdHIgPSBjb21iU3RyLnNsaWNlKDAsIGxlbik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRzdHIgPSBjb21iU3RyO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICghbWF0Y2gpIHtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmKGxvb2tiZWhpbmQpIHtcblx0XHRcdFx0XHRcdGxvb2tiZWhpbmRMZW5ndGggPSBtYXRjaFsxXS5sZW5ndGg7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dmFyIGZyb20gPSBtYXRjaC5pbmRleCArIGxvb2tiZWhpbmRMZW5ndGgsXG5cdFx0XHRcdFx0ICAgIG1hdGNoID0gbWF0Y2hbMF0uc2xpY2UobG9va2JlaGluZExlbmd0aCksXG5cdFx0XHRcdFx0ICAgIHRvID0gZnJvbSArIG1hdGNoLmxlbmd0aCxcblx0XHRcdFx0XHQgICAgYmVmb3JlID0gc3RyLnNsaWNlKDAsIGZyb20pLFxuXHRcdFx0XHRcdCAgICBhZnRlciA9IHN0ci5zbGljZSh0byk7XG5cblx0XHRcdFx0XHR2YXIgYXJncyA9IFtpLCBkZWxOdW1dO1xuXG5cdFx0XHRcdFx0aWYgKGJlZm9yZSkge1xuXHRcdFx0XHRcdFx0YXJncy5wdXNoKGJlZm9yZSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dmFyIHdyYXBwZWQgPSBuZXcgVG9rZW4odG9rZW4sIGluc2lkZT8gXy50b2tlbml6ZShtYXRjaCwgaW5zaWRlKSA6IG1hdGNoLCBhbGlhcywgbWF0Y2gsIGdyZWVkeSk7XG5cblx0XHRcdFx0XHRhcmdzLnB1c2god3JhcHBlZCk7XG5cblx0XHRcdFx0XHRpZiAoYWZ0ZXIpIHtcblx0XHRcdFx0XHRcdGFyZ3MucHVzaChhZnRlcik7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0QXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShzdHJhcnIsIGFyZ3MpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHN0cmFycjtcblx0fSxcblxuXHRob29rczoge1xuXHRcdGFsbDoge30sXG5cblx0XHRhZGQ6IGZ1bmN0aW9uIChuYW1lLCBjYWxsYmFjaykge1xuXHRcdFx0dmFyIGhvb2tzID0gXy5ob29rcy5hbGw7XG5cblx0XHRcdGhvb2tzW25hbWVdID0gaG9va3NbbmFtZV0gfHwgW107XG5cblx0XHRcdGhvb2tzW25hbWVdLnB1c2goY2FsbGJhY2spO1xuXHRcdH0sXG5cblx0XHRydW46IGZ1bmN0aW9uIChuYW1lLCBlbnYpIHtcblx0XHRcdHZhciBjYWxsYmFja3MgPSBfLmhvb2tzLmFsbFtuYW1lXTtcblxuXHRcdFx0aWYgKCFjYWxsYmFja3MgfHwgIWNhbGxiYWNrcy5sZW5ndGgpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3IgKHZhciBpPTAsIGNhbGxiYWNrOyBjYWxsYmFjayA9IGNhbGxiYWNrc1tpKytdOykge1xuXHRcdFx0XHRjYWxsYmFjayhlbnYpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxudmFyIFRva2VuID0gXy5Ub2tlbiA9IGZ1bmN0aW9uKHR5cGUsIGNvbnRlbnQsIGFsaWFzLCBtYXRjaGVkU3RyLCBncmVlZHkpIHtcblx0dGhpcy50eXBlID0gdHlwZTtcblx0dGhpcy5jb250ZW50ID0gY29udGVudDtcblx0dGhpcy5hbGlhcyA9IGFsaWFzO1xuXHQvLyBDb3B5IG9mIHRoZSBmdWxsIHN0cmluZyB0aGlzIHRva2VuIHdhcyBjcmVhdGVkIGZyb21cblx0dGhpcy5tYXRjaGVkU3RyID0gbWF0Y2hlZFN0ciB8fCBudWxsO1xuXHR0aGlzLmdyZWVkeSA9ICEhZ3JlZWR5O1xufTtcblxuVG9rZW4uc3RyaW5naWZ5ID0gZnVuY3Rpb24obywgbGFuZ3VhZ2UsIHBhcmVudCkge1xuXHRpZiAodHlwZW9mIG8gPT0gJ3N0cmluZycpIHtcblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdGlmIChfLnV0aWwudHlwZShvKSA9PT0gJ0FycmF5Jykge1xuXHRcdHJldHVybiBvLm1hcChmdW5jdGlvbihlbGVtZW50KSB7XG5cdFx0XHRyZXR1cm4gVG9rZW4uc3RyaW5naWZ5KGVsZW1lbnQsIGxhbmd1YWdlLCBvKTtcblx0XHR9KS5qb2luKCcnKTtcblx0fVxuXG5cdHZhciBlbnYgPSB7XG5cdFx0dHlwZTogby50eXBlLFxuXHRcdGNvbnRlbnQ6IFRva2VuLnN0cmluZ2lmeShvLmNvbnRlbnQsIGxhbmd1YWdlLCBwYXJlbnQpLFxuXHRcdHRhZzogJ3NwYW4nLFxuXHRcdGNsYXNzZXM6IFsndG9rZW4nLCBvLnR5cGVdLFxuXHRcdGF0dHJpYnV0ZXM6IHt9LFxuXHRcdGxhbmd1YWdlOiBsYW5ndWFnZSxcblx0XHRwYXJlbnQ6IHBhcmVudFxuXHR9O1xuXG5cdGlmIChlbnYudHlwZSA9PSAnY29tbWVudCcpIHtcblx0XHRlbnYuYXR0cmlidXRlc1snc3BlbGxjaGVjayddID0gJ3RydWUnO1xuXHR9XG5cblx0aWYgKG8uYWxpYXMpIHtcblx0XHR2YXIgYWxpYXNlcyA9IF8udXRpbC50eXBlKG8uYWxpYXMpID09PSAnQXJyYXknID8gby5hbGlhcyA6IFtvLmFsaWFzXTtcblx0XHRBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShlbnYuY2xhc3NlcywgYWxpYXNlcyk7XG5cdH1cblxuXHRfLmhvb2tzLnJ1bignd3JhcCcsIGVudik7XG5cblx0dmFyIGF0dHJpYnV0ZXMgPSAnJztcblxuXHRmb3IgKHZhciBuYW1lIGluIGVudi5hdHRyaWJ1dGVzKSB7XG5cdFx0YXR0cmlidXRlcyArPSAoYXR0cmlidXRlcyA/ICcgJyA6ICcnKSArIG5hbWUgKyAnPVwiJyArIChlbnYuYXR0cmlidXRlc1tuYW1lXSB8fCAnJykgKyAnXCInO1xuXHR9XG5cblx0cmV0dXJuICc8JyArIGVudi50YWcgKyAnIGNsYXNzPVwiJyArIGVudi5jbGFzc2VzLmpvaW4oJyAnKSArICdcIiAnICsgYXR0cmlidXRlcyArICc+JyArIGVudi5jb250ZW50ICsgJzwvJyArIGVudi50YWcgKyAnPic7XG5cbn07XG5cbmlmICghX3NlbGYuZG9jdW1lbnQpIHtcblx0aWYgKCFfc2VsZi5hZGRFdmVudExpc3RlbmVyKSB7XG5cdFx0Ly8gaW4gTm9kZS5qc1xuXHRcdHJldHVybiBfc2VsZi5QcmlzbTtcblx0fVxuIFx0Ly8gSW4gd29ya2VyXG5cdF9zZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihldnQpIHtcblx0XHR2YXIgbWVzc2FnZSA9IEpTT04ucGFyc2UoZXZ0LmRhdGEpLFxuXHRcdCAgICBsYW5nID0gbWVzc2FnZS5sYW5ndWFnZSxcblx0XHQgICAgY29kZSA9IG1lc3NhZ2UuY29kZSxcblx0XHQgICAgaW1tZWRpYXRlQ2xvc2UgPSBtZXNzYWdlLmltbWVkaWF0ZUNsb3NlO1xuXG5cdFx0X3NlbGYucG9zdE1lc3NhZ2UoXy5oaWdobGlnaHQoY29kZSwgXy5sYW5ndWFnZXNbbGFuZ10sIGxhbmcpKTtcblx0XHRpZiAoaW1tZWRpYXRlQ2xvc2UpIHtcblx0XHRcdF9zZWxmLmNsb3NlKCk7XG5cdFx0fVxuXHR9LCBmYWxzZSk7XG5cblx0cmV0dXJuIF9zZWxmLlByaXNtO1xufVxuXG4vL0dldCBjdXJyZW50IHNjcmlwdCBhbmQgaGlnaGxpZ2h0XG52YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdCB8fCBbXS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpKS5wb3AoKTtcblxuaWYgKHNjcmlwdCkge1xuXHRfLmZpbGVuYW1lID0gc2NyaXB0LnNyYztcblxuXHRpZiAoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAmJiAhc2NyaXB0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1tYW51YWwnKSkge1xuXHRcdGlmKGRvY3VtZW50LnJlYWR5U3RhdGUgIT09IFwibG9hZGluZ1wiKSB7XG5cdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoXy5oaWdobGlnaHRBbGwsIDApO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBfLmhpZ2hsaWdodEFsbCk7XG5cdFx0fVxuXHR9XG59XG5cbnJldHVybiBfc2VsZi5QcmlzbTtcblxufSkoKTtcblxuaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdG1vZHVsZS5leHBvcnRzID0gUHJpc207XG59XG5cbi8vIGhhY2sgZm9yIGNvbXBvbmVudHMgdG8gd29yayBjb3JyZWN0bHkgaW4gbm9kZS5qc1xuaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG5cdGdsb2JhbC5QcmlzbSA9IFByaXNtO1xufVxuXG5cbi8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgQmVnaW4gcHJpc20tbWFya3VwLmpzXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cblByaXNtLmxhbmd1YWdlcy5tYXJrdXAgPSB7XG5cdCdjb21tZW50JzogLzwhLS1bXFx3XFxXXSo/LS0+Lyxcblx0J3Byb2xvZyc6IC88XFw/W1xcd1xcV10rP1xcPz4vLFxuXHQnZG9jdHlwZSc6IC88IURPQ1RZUEVbXFx3XFxXXSs/Pi8sXG5cdCdjZGF0YSc6IC88IVxcW0NEQVRBXFxbW1xcd1xcV10qP11dPi9pLFxuXHQndGFnJzoge1xuXHRcdHBhdHRlcm46IC88XFwvPyg/IVxcZClbXlxccz5cXC89LiQ8XSsoPzpcXHMrW15cXHM+XFwvPV0rKD86PSg/OihcInwnKSg/OlxcXFxcXDF8XFxcXD8oPyFcXDEpW1xcd1xcV10pKlxcMXxbXlxccydcIj49XSspKT8pKlxccypcXC8/Pi9pLFxuXHRcdGluc2lkZToge1xuXHRcdFx0J3RhZyc6IHtcblx0XHRcdFx0cGF0dGVybjogL148XFwvP1teXFxzPlxcL10rL2ksXG5cdFx0XHRcdGluc2lkZToge1xuXHRcdFx0XHRcdCdwdW5jdHVhdGlvbic6IC9ePFxcLz8vLFxuXHRcdFx0XHRcdCduYW1lc3BhY2UnOiAvXlteXFxzPlxcLzpdKzovXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHQnYXR0ci12YWx1ZSc6IHtcblx0XHRcdFx0cGF0dGVybjogLz0oPzooJ3xcIilbXFx3XFxXXSo/KFxcMSl8W15cXHM+XSspL2ksXG5cdFx0XHRcdGluc2lkZToge1xuXHRcdFx0XHRcdCdwdW5jdHVhdGlvbic6IC9bPT5cIiddL1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0J3B1bmN0dWF0aW9uJzogL1xcLz8+Lyxcblx0XHRcdCdhdHRyLW5hbWUnOiB7XG5cdFx0XHRcdHBhdHRlcm46IC9bXlxccz5cXC9dKy8sXG5cdFx0XHRcdGluc2lkZToge1xuXHRcdFx0XHRcdCduYW1lc3BhY2UnOiAvXlteXFxzPlxcLzpdKzovXG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdH1cblx0fSxcblx0J2VudGl0eSc6IC8mIz9bXFxkYS16XXsxLDh9Oy9pXG59O1xuXG4vLyBQbHVnaW4gdG8gbWFrZSBlbnRpdHkgdGl0bGUgc2hvdyB0aGUgcmVhbCBlbnRpdHksIGlkZWEgYnkgUm9tYW4gS29tYXJvdlxuUHJpc20uaG9va3MuYWRkKCd3cmFwJywgZnVuY3Rpb24oZW52KSB7XG5cblx0aWYgKGVudi50eXBlID09PSAnZW50aXR5Jykge1xuXHRcdGVudi5hdHRyaWJ1dGVzWyd0aXRsZSddID0gZW52LmNvbnRlbnQucmVwbGFjZSgvJmFtcDsvLCAnJicpO1xuXHR9XG59KTtcblxuUHJpc20ubGFuZ3VhZ2VzLnhtbCA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5QcmlzbS5sYW5ndWFnZXMuaHRtbCA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5QcmlzbS5sYW5ndWFnZXMubWF0aG1sID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblByaXNtLmxhbmd1YWdlcy5zdmcgPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwO1xuXG5cbi8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgQmVnaW4gcHJpc20tY3NzLmpzXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cblByaXNtLmxhbmd1YWdlcy5jc3MgPSB7XG5cdCdjb21tZW50JzogL1xcL1xcKltcXHdcXFddKj9cXCpcXC8vLFxuXHQnYXRydWxlJzoge1xuXHRcdHBhdHRlcm46IC9AW1xcdy1dKz8uKj8oO3woPz1cXHMqXFx7KSkvaSxcblx0XHRpbnNpZGU6IHtcblx0XHRcdCdydWxlJzogL0BbXFx3LV0rL1xuXHRcdFx0Ly8gU2VlIHJlc3QgYmVsb3dcblx0XHR9XG5cdH0sXG5cdCd1cmwnOiAvdXJsXFwoKD86KFtcIiddKShcXFxcKD86XFxyXFxufFtcXHdcXFddKXwoPyFcXDEpW15cXFxcXFxyXFxuXSkqXFwxfC4qPylcXCkvaSxcblx0J3NlbGVjdG9yJzogL1teXFx7XFx9XFxzXVteXFx7XFx9O10qPyg/PVxccypcXHspLyxcblx0J3N0cmluZyc6IC8oXCJ8JykoXFxcXCg/OlxcclxcbnxbXFx3XFxXXSl8KD8hXFwxKVteXFxcXFxcclxcbl0pKlxcMS8sXG5cdCdwcm9wZXJ0eSc6IC8oXFxifFxcQilbXFx3LV0rKD89XFxzKjopL2ksXG5cdCdpbXBvcnRhbnQnOiAvXFxCIWltcG9ydGFudFxcYi9pLFxuXHQnZnVuY3Rpb24nOiAvWy1hLXowLTldKyg/PVxcKCkvaSxcblx0J3B1bmN0dWF0aW9uJzogL1soKXt9OzpdL1xufTtcblxuUHJpc20ubGFuZ3VhZ2VzLmNzc1snYXRydWxlJ10uaW5zaWRlLnJlc3QgPSBQcmlzbS51dGlsLmNsb25lKFByaXNtLmxhbmd1YWdlcy5jc3MpO1xuXG5pZiAoUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cCkge1xuXHRQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdtYXJrdXAnLCAndGFnJywge1xuXHRcdCdzdHlsZSc6IHtcblx0XHRcdHBhdHRlcm46IC8oPHN0eWxlW1xcd1xcV10qPz4pW1xcd1xcV10qPyg/PTxcXC9zdHlsZT4pL2ksXG5cdFx0XHRsb29rYmVoaW5kOiB0cnVlLFxuXHRcdFx0aW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuY3NzLFxuXHRcdFx0YWxpYXM6ICdsYW5ndWFnZS1jc3MnXG5cdFx0fVxuXHR9KTtcblx0XG5cdFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2luc2lkZScsICdhdHRyLXZhbHVlJywge1xuXHRcdCdzdHlsZS1hdHRyJzoge1xuXHRcdFx0cGF0dGVybjogL1xccypzdHlsZT0oXCJ8JykuKj9cXDEvaSxcblx0XHRcdGluc2lkZToge1xuXHRcdFx0XHQnYXR0ci1uYW1lJzoge1xuXHRcdFx0XHRcdHBhdHRlcm46IC9eXFxzKnN0eWxlL2ksXG5cdFx0XHRcdFx0aW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMubWFya3VwLnRhZy5pbnNpZGVcblx0XHRcdFx0fSxcblx0XHRcdFx0J3B1bmN0dWF0aW9uJzogL15cXHMqPVxccypbJ1wiXXxbJ1wiXVxccyokLyxcblx0XHRcdFx0J2F0dHItdmFsdWUnOiB7XG5cdFx0XHRcdFx0cGF0dGVybjogLy4rL2ksXG5cdFx0XHRcdFx0aW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuY3NzXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRhbGlhczogJ2xhbmd1YWdlLWNzcydcblx0XHR9XG5cdH0sIFByaXNtLmxhbmd1YWdlcy5tYXJrdXAudGFnKTtcbn1cblxuLyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICBCZWdpbiBwcmlzbS1jbGlrZS5qc1xuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG5QcmlzbS5sYW5ndWFnZXMuY2xpa2UgPSB7XG5cdCdjb21tZW50JzogW1xuXHRcdHtcblx0XHRcdHBhdHRlcm46IC8oXnxbXlxcXFxdKVxcL1xcKltcXHdcXFddKj9cXCpcXC8vLFxuXHRcdFx0bG9va2JlaGluZDogdHJ1ZVxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0cGF0dGVybjogLyhefFteXFxcXDpdKVxcL1xcLy4qLyxcblx0XHRcdGxvb2tiZWhpbmQ6IHRydWVcblx0XHR9XG5cdF0sXG5cdCdzdHJpbmcnOiB7XG5cdFx0cGF0dGVybjogLyhbXCInXSkoXFxcXCg/OlxcclxcbnxbXFxzXFxTXSl8KD8hXFwxKVteXFxcXFxcclxcbl0pKlxcMS8sXG5cdFx0Z3JlZWR5OiB0cnVlXG5cdH0sXG5cdCdjbGFzcy1uYW1lJzoge1xuXHRcdHBhdHRlcm46IC8oKD86XFxiKD86Y2xhc3N8aW50ZXJmYWNlfGV4dGVuZHN8aW1wbGVtZW50c3x0cmFpdHxpbnN0YW5jZW9mfG5ldylcXHMrKXwoPzpjYXRjaFxccytcXCgpKVthLXowLTlfXFwuXFxcXF0rL2ksXG5cdFx0bG9va2JlaGluZDogdHJ1ZSxcblx0XHRpbnNpZGU6IHtcblx0XHRcdHB1bmN0dWF0aW9uOiAvKFxcLnxcXFxcKS9cblx0XHR9XG5cdH0sXG5cdCdrZXl3b3JkJzogL1xcYihpZnxlbHNlfHdoaWxlfGRvfGZvcnxyZXR1cm58aW58aW5zdGFuY2VvZnxmdW5jdGlvbnxuZXd8dHJ5fHRocm93fGNhdGNofGZpbmFsbHl8bnVsbHxicmVha3xjb250aW51ZSlcXGIvLFxuXHQnYm9vbGVhbic6IC9cXGIodHJ1ZXxmYWxzZSlcXGIvLFxuXHQnZnVuY3Rpb24nOiAvW2EtejAtOV9dKyg/PVxcKCkvaSxcblx0J251bWJlcic6IC9cXGItPyg/OjB4W1xcZGEtZl0rfFxcZCpcXC4/XFxkKyg/OmVbKy1dP1xcZCspPylcXGIvaSxcblx0J29wZXJhdG9yJzogLy0tP3xcXCtcXCs/fCE9Pz0/fDw9P3w+PT98PT0/PT98JiY/fFxcfFxcfD98XFw/fFxcKnxcXC98fnxcXF58JS8sXG5cdCdwdW5jdHVhdGlvbic6IC9be31bXFxdOygpLC46XS9cbn07XG5cblxuLyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICBCZWdpbiBwcmlzbS1qYXZhc2NyaXB0LmpzXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cblByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0ID0gUHJpc20ubGFuZ3VhZ2VzLmV4dGVuZCgnY2xpa2UnLCB7XG5cdCdrZXl3b3JkJzogL1xcYihhc3xhc3luY3xhd2FpdHxicmVha3xjYXNlfGNhdGNofGNsYXNzfGNvbnN0fGNvbnRpbnVlfGRlYnVnZ2VyfGRlZmF1bHR8ZGVsZXRlfGRvfGVsc2V8ZW51bXxleHBvcnR8ZXh0ZW5kc3xmaW5hbGx5fGZvcnxmcm9tfGZ1bmN0aW9ufGdldHxpZnxpbXBsZW1lbnRzfGltcG9ydHxpbnxpbnN0YW5jZW9mfGludGVyZmFjZXxsZXR8bmV3fG51bGx8b2Z8cGFja2FnZXxwcml2YXRlfHByb3RlY3RlZHxwdWJsaWN8cmV0dXJufHNldHxzdGF0aWN8c3VwZXJ8c3dpdGNofHRoaXN8dGhyb3d8dHJ5fHR5cGVvZnx2YXJ8dm9pZHx3aGlsZXx3aXRofHlpZWxkKVxcYi8sXG5cdCdudW1iZXInOiAvXFxiLT8oMHhbXFxkQS1GYS1mXSt8MGJbMDFdK3wwb1swLTddK3xcXGQqXFwuP1xcZCsoW0VlXVsrLV0/XFxkKyk/fE5hTnxJbmZpbml0eSlcXGIvLFxuXHQvLyBBbGxvdyBmb3IgYWxsIG5vbi1BU0NJSSBjaGFyYWN0ZXJzIChTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjAwODQ0NClcblx0J2Z1bmN0aW9uJzogL1tfJGEtekEtWlxceEEwLVxcdUZGRkZdW18kYS16QS1aMC05XFx4QTAtXFx1RkZGRl0qKD89XFwoKS9pXG59KTtcblxuUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnamF2YXNjcmlwdCcsICdrZXl3b3JkJywge1xuXHQncmVnZXgnOiB7XG5cdFx0cGF0dGVybjogLyhefFteL10pXFwvKD8hXFwvKShcXFsuKz9dfFxcXFwufFteL1xcXFxcXHJcXG5dKStcXC9bZ2lteXVdezAsNX0oPz1cXHMqKCR8W1xcclxcbiwuO30pXSkpLyxcblx0XHRsb29rYmVoaW5kOiB0cnVlLFxuXHRcdGdyZWVkeTogdHJ1ZVxuXHR9XG59KTtcblxuUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnamF2YXNjcmlwdCcsICdzdHJpbmcnLCB7XG5cdCd0ZW1wbGF0ZS1zdHJpbmcnOiB7XG5cdFx0cGF0dGVybjogL2AoPzpcXFxcXFxcXHxcXFxcP1teXFxcXF0pKj9gLyxcblx0XHRncmVlZHk6IHRydWUsXG5cdFx0aW5zaWRlOiB7XG5cdFx0XHQnaW50ZXJwb2xhdGlvbic6IHtcblx0XHRcdFx0cGF0dGVybjogL1xcJFxce1tefV0rXFx9Lyxcblx0XHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdFx0J2ludGVycG9sYXRpb24tcHVuY3R1YXRpb24nOiB7XG5cdFx0XHRcdFx0XHRwYXR0ZXJuOiAvXlxcJFxce3xcXH0kLyxcblx0XHRcdFx0XHRcdGFsaWFzOiAncHVuY3R1YXRpb24nXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRyZXN0OiBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdFxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0J3N0cmluZyc6IC9bXFxzXFxTXSsvXG5cdFx0fVxuXHR9XG59KTtcblxuaWYgKFByaXNtLmxhbmd1YWdlcy5tYXJrdXApIHtcblx0UHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnbWFya3VwJywgJ3RhZycsIHtcblx0XHQnc2NyaXB0Jzoge1xuXHRcdFx0cGF0dGVybjogLyg8c2NyaXB0W1xcd1xcV10qPz4pW1xcd1xcV10qPyg/PTxcXC9zY3JpcHQ+KS9pLFxuXHRcdFx0bG9va2JlaGluZDogdHJ1ZSxcblx0XHRcdGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHQsXG5cdFx0XHRhbGlhczogJ2xhbmd1YWdlLWphdmFzY3JpcHQnXG5cdFx0fVxuXHR9KTtcbn1cblxuUHJpc20ubGFuZ3VhZ2VzLmpzID0gUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHQ7XG5cbi8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgQmVnaW4gcHJpc20tZmlsZS1oaWdobGlnaHQuanNcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0aWYgKHR5cGVvZiBzZWxmID09PSAndW5kZWZpbmVkJyB8fCAhc2VsZi5QcmlzbSB8fCAhc2VsZi5kb2N1bWVudCB8fCAhZG9jdW1lbnQucXVlcnlTZWxlY3Rvcikge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdHNlbGYuUHJpc20uZmlsZUhpZ2hsaWdodCA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIEV4dGVuc2lvbnMgPSB7XG5cdFx0XHQnanMnOiAnamF2YXNjcmlwdCcsXG5cdFx0XHQncHknOiAncHl0aG9uJyxcblx0XHRcdCdyYic6ICdydWJ5Jyxcblx0XHRcdCdwczEnOiAncG93ZXJzaGVsbCcsXG5cdFx0XHQncHNtMSc6ICdwb3dlcnNoZWxsJyxcblx0XHRcdCdzaCc6ICdiYXNoJyxcblx0XHRcdCdiYXQnOiAnYmF0Y2gnLFxuXHRcdFx0J2gnOiAnYycsXG5cdFx0XHQndGV4JzogJ2xhdGV4J1xuXHRcdH07XG5cblx0XHRpZihBcnJheS5wcm90b3R5cGUuZm9yRWFjaCkgeyAvLyBDaGVjayB0byBwcmV2ZW50IGVycm9yIGluIElFOFxuXHRcdFx0QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgncHJlW2RhdGEtc3JjXScpKS5mb3JFYWNoKGZ1bmN0aW9uIChwcmUpIHtcblx0XHRcdFx0dmFyIHNyYyA9IHByZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3JjJyk7XG5cblx0XHRcdFx0dmFyIGxhbmd1YWdlLCBwYXJlbnQgPSBwcmU7XG5cdFx0XHRcdHZhciBsYW5nID0gL1xcYmxhbmcoPzp1YWdlKT8tKD8hXFwqKShcXHcrKVxcYi9pO1xuXHRcdFx0XHR3aGlsZSAocGFyZW50ICYmICFsYW5nLnRlc3QocGFyZW50LmNsYXNzTmFtZSkpIHtcblx0XHRcdFx0XHRwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChwYXJlbnQpIHtcblx0XHRcdFx0XHRsYW5ndWFnZSA9IChwcmUuY2xhc3NOYW1lLm1hdGNoKGxhbmcpIHx8IFssICcnXSlbMV07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIWxhbmd1YWdlKSB7XG5cdFx0XHRcdFx0dmFyIGV4dGVuc2lvbiA9IChzcmMubWF0Y2goL1xcLihcXHcrKSQvKSB8fCBbLCAnJ10pWzFdO1xuXHRcdFx0XHRcdGxhbmd1YWdlID0gRXh0ZW5zaW9uc1tleHRlbnNpb25dIHx8IGV4dGVuc2lvbjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBjb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY29kZScpO1xuXHRcdFx0XHRjb2RlLmNsYXNzTmFtZSA9ICdsYW5ndWFnZS0nICsgbGFuZ3VhZ2U7XG5cblx0XHRcdFx0cHJlLnRleHRDb250ZW50ID0gJyc7XG5cblx0XHRcdFx0Y29kZS50ZXh0Q29udGVudCA9ICdMb2FkaW5n4oCmJztcblxuXHRcdFx0XHRwcmUuYXBwZW5kQ2hpbGQoY29kZSk7XG5cblx0XHRcdFx0dmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG5cdFx0XHRcdHhoci5vcGVuKCdHRVQnLCBzcmMsIHRydWUpO1xuXG5cdFx0XHRcdHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0aWYgKHhoci5yZWFkeVN0YXRlID09IDQpIHtcblxuXHRcdFx0XHRcdFx0aWYgKHhoci5zdGF0dXMgPCA0MDAgJiYgeGhyLnJlc3BvbnNlVGV4dCkge1xuXHRcdFx0XHRcdFx0XHRjb2RlLnRleHRDb250ZW50ID0geGhyLnJlc3BvbnNlVGV4dDtcblxuXHRcdFx0XHRcdFx0XHRQcmlzbS5oaWdobGlnaHRFbGVtZW50KGNvZGUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoeGhyLnN0YXR1cyA+PSA0MDApIHtcblx0XHRcdFx0XHRcdFx0Y29kZS50ZXh0Q29udGVudCA9ICfinJYgRXJyb3IgJyArIHhoci5zdGF0dXMgKyAnIHdoaWxlIGZldGNoaW5nIGZpbGU6ICcgKyB4aHIuc3RhdHVzVGV4dDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjb2RlLnRleHRDb250ZW50ID0gJ+KcliBFcnJvcjogRmlsZSBkb2VzIG5vdCBleGlzdCBvciBpcyBlbXB0eSc7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdHhoci5zZW5kKG51bGwpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdH07XG5cblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHNlbGYuUHJpc20uZmlsZUhpZ2hsaWdodCk7XG5cbn0pKCk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9wcmlzbWpzL3ByaXNtLmpzXG4gKiogbW9kdWxlIGlkID0gMTUzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHRhYmxlIGNsYXNzPXNnX2MtYXBpLXRhYmxlPiA8dHI+IDx0aD4gTmFtZSA8L3RoPiA8dGg+IFR5cGUgPC90aD4gPHRoPiBSZXF1aXJlZCA8L3RoPiA8dGg+IERlZmF1bHQgPC90aD4gPHRoPiBEZXNjcmlwdGlvbiA8L3RoPiA8L3RyPiA8dHIgdi1mb3I9XFxcIml0ZW0gaW4gaXRlbXNcXFwiPiA8dGQ+e3tpdGVtLm5hbWV9fTwvdGQ+IDx0ZD57e2l0ZW0udHlwZX19PC90ZD4gPHRkPnt7aXRlbS5pc1JlcXVpcmVkfX08L3RkPiA8dGQ+e3tpdGVtLmRlZmF1bHR9fTwvdGQ+IDx0ZD57e2l0ZW0uZGVzY319PC90ZD4gPC90cj4gPC90YWJsZT4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9kZXYvc3JjL2NvbXBvbmVudHMvYXBpLXRhYmxlLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxNTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5BbGVydDwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8YWxlcnQgdHlwZT1lcnJvcj5UaGlzIGlzIGFuIGVycm9yIGFsZXJ0LjwvYWxlcnQ+IDxhbGVydCB0eXBlPWluZm8+VGhpcyBpcyBhbiBpbmZvIGFsZXJ0LjwvYWxlcnQ+IDxhbGVydCB0eXBlPXN1Y2Nlc3M+VGhpcyBpcyBhIHN1Y2Nlc3MgYWxlcnQuPC9hbGVydD4gPGFsZXJ0IHR5cGU9c3VjY2VzcyA6ZGlzbWlzc2libGU9ZmFsc2U+VGhpcyBpcyBub3QgYSBkaXNtaXNzaWJsZSBhbGVydC48L2FsZXJ0PiA8YWxlcnQgdHlwZT1zdWNjZXNzIDpvbi1jbG9zZWQ9ZGlzbWlzc0NhbGxCYWNrPlRoaXMgaXMgYW4gYWxlcnQgd2l0aCBjYWxsYmFjay48L2FsZXJ0PiA8YWxlcnQgdHlwZT1pbmZvIDp0aW1lb3V0PTUwMDA+VGhpcyBhbGVydCBzaG91bGQgdGltZW91dCBpbiA1IHNlY29uZHMuPC9hbGVydD4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4gICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cXFwiZXJyb3JcXFwiJmd0O1RoaXMgaXMgYW4gZXJyb3IgYWxlcnQuJmx0Oy9hbGVydCZndDtcXG4gICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cXFwiaW5mb1xcXCImZ3Q7VGhpcyBpcyBhbiBpbmZvIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuICAgICAgICAgJmx0O2FsZXJ0IHR5cGU9XFxcInN1Y2Nlc3NcXFwiJmd0O1RoaXMgaXMgYSBzdWNjZXNzIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuICAgICAgICAgJmx0O2FsZXJ0IHR5cGU9XFxcInN1Y2Nlc3NcXFwiIDpkaXNtaXNzaWJsZT1cXFwiZmFsc2VcXFwiJmd0O1RoaXMgaXMgbm90IGEgZGlzbWlzc2libGUgYWxlcnQuJmx0Oy9hbGVydCZndDtcXG4gICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cXFwic3VjY2Vzc1xcXCIgOm9uLWNsb3NlZD1cXFwiZGlzbWlzc0NhbGxCYWNrXFxcIiZndDtUaGlzIGlzIGFuIGFsZXJ0IHdpdGggY2FsbGJhY2suJmx0Oy9hbGVydCZndDtcXG4gICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cXFwic3VjY2Vzc1xcXCIgOnRpbWVvdXQ9XFxcIjUwMDBcXFwiJmd0O1RoaXMgYWxlcnQgc2hvdWxkIHRpbWVvdXQgaW4gNSBzZWNvbmRzLiZsdDsvYWxlcnQmZ3Q7XFxuICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL2FsZXJ0LXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTU1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+Q29sbGFwc2FibGUgUGFuZWw8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVxcXCJQYW5lbCAxXFxcIiA6aXMtb3Blbj10cnVlPiBQYW5lbCAxIGNvbnRlbnQgPC9jb2xsYXBzYWJsZS1wYW5lbD4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVxcXCJQYW5lbCAyXFxcIj4gUGFuZWwgMiBjb250ZW50IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuICAgICAgICAgICAgICZsdDtjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cXFwiUGFuZWwgMVxcXCIgOmlzLW9wZW49XFxcInRydWVcXFwiJmd0O1xcbiAgICAgICAgICAgICAgIFBhbmVsIDEgY29udGVudFxcbiAgICAgICAgICAgICAmbHQ7L2NvbGxhcHNhYmxlLXBhbmVsJmd0O1xcbiAgICAgICAgICAgICAmbHQ7Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XFxcIlBhbmVsIDJcXFwiJmd0O1xcbiAgICAgICAgICAgICAgIFBhbmVsIDIgY29udGVudFxcbiAgICAgICAgICAgICAmbHQ7L2NvbGxhcHNhYmxlLXBhbmVsJmd0O1xcbiAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vZGV2L3NyYy92aWV3cy9jb2xsYXBzYWJsZS1wYW5lbC1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE1NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPkdldHRpbmcgU3RhcnRlZDwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS01IGh5X3QtZ3JleVxcXCI+Q0ROPC9oMz4gPHA+IC4uLiA8L3A+IDwvZGl2PiA8L2Rpdj48L3NlY3Rpb24+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE1N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPkxlZ2FsIFN5c3RlbTwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8cCBjbGFzcz1cXFwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcXFwiPiBMb3JlbSBpcHN1bTxsZWdhbC1jb3VudGVyIHYtb3ZlcmxheS1vcGVuZXI9bGVnYWwtb3ZlcmxheSBsZWdhbC1rZXk9aHMtcmVmZXJyYWwtdGVybXMgbGVnYWwtbGFuZz1lbiBsZWdhbC1yZWdpb249YmM+PC9sZWdhbC1jb3VudGVyPiBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0LCBzZWQgZG8gZWl1c21vZCB0ZW1wb3IgaW5jaWRpZHVudCB1dCBsYWJvcmUgZXQgZG9sb3JlIG1hZ25hIGFsaXF1YS4gPGxlZ2FsLWNvdW50ZXIgdi1vdmVybGF5LW9wZW5lcj1sZWdhbC1vdmVybGF5IGxlZ2FsLWtleT0xLXllYXItb2ZmZXItc3RpbSBsZWdhbC1sYW5nPWVuIGxlZ2FsLXJlZ2lvbj1iYz48L2xlZ2FsLWNvdW50ZXI+IDwvcD4gPC9kaXY+IDxkaXYgY2xhc3M9c2dfYy1kZW1vX19jb250YWluZXI+IDxsZWdhbC1jb250YWluZXI+PC9sZWdhbC1jb250YWluZXI+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuICAgICAgICAgICAgICZsdDtsZWdhbC1jb3VudGVyJmd0O1xcbiAgICAgICAgICAgICAgICBsZWdhbC1rZXk9XFxcImhzLXJlZmVycmFsLXRlcm1zXFxcIlxcbiAgICAgICAgICAgICAgICBsZWdhbC1sYW5nPVxcXCJlblxcXCJcXG4gICAgICAgICAgICAgICAgbGVnYWwtcmVnaW9uPVxcXCJiY1xcXCJcXG4gICAgICAgICAgICAgJmx0Oy9sZWdhbC1jb3VudGVyJmd0O1xcbiAgICAgICAgICAgICAmbHQ7bGVnYWwtY29udGFpbmVyJmd0OyZsdDsvbGVnYWwtY29udGFpbmVyJmd0O1xcbiAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9amF2YXNjcmlwdD4gPHByZT5cXG4gICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWphdmFzY3JpcHQ+XFxuICAgICAgICAgICAgIGxldCB2bSA9IG5ldyBWdWUoe1xcbiAgICAgICAgICAgICAgIGVsOiAnYm9keScsXFxuICAgICAgICAgICAgICAgZGF0YSgpIHtcXG4gICAgICAgICAgICAgICAgIHJldHVybiB7XFxuICAgICAgICAgICAgICAgICAgIGxpZ2VyRW5kUG9pbnQ6ICdodHRwczovL2FwaS5jbXMudGVsdXMuY29tL2xlZ2FscycsXFxuICAgICAgICAgICAgICAgICAgIGxpZ2VyQXBwbGljYXRpb25LZXk6ICdiOTczOGQ2N2I4OWRmYzc4Mjc0NmQ0YTljZjRhMTA5MydcXG4gICAgICAgICAgICAgICAgIH07XFxuICAgICAgICAgICAgICAgfSxcXG4gICAgICAgICAgICAgICBjb21wb25lbnRzOiB7XFxuICAgICAgICAgICAgICAgICBMZWdhbENvdW50ZXIsXFxuICAgICAgICAgICAgICAgICBMZWdhbENvbnRhaW5lclxcbiAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgfSk7XFxuICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk6IExlZ2FsIENvdW50ZXI8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL2xlZ2FsLXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTU4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+T3ZlcmxheSBTeXN0ZW08L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPHA+IDxidXR0b24gdi1vdmVybGF5LW9wZW5lcj1vdmVybGF5LTEgY2xhc3M9XFxcImh5X2MtYnV0dG9uIGh5X2MtYnV0dG9uLS1saW5rIGh5X3QtcHVycGxlXFxcIiB0eXBlPWJ1dHRvbiByb2xlPWJ1dHRvbj4gT3BlbiBvdmVybGF5ICMxIDxpIGNsYXNzPVxcXCJoeV9jLWljb24gaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkIGh5X2MtYnV0dG9uX19pY29uXFxcIj48L2k+IDwvYnV0dG9uPiA8L3A+IDxwPiA8YnV0dG9uIHYtb3ZlcmxheS1vcGVuZXI9b3ZlcmxheS0yIGNsYXNzPVxcXCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tbGluayBoeV90LXB1cnBsZVxcXCIgdHlwZT1idXR0b24gcm9sZT1idXR0b24+IE9wZW4gb3ZlcmxheSAjMiA8aSBjbGFzcz1cXFwiaHlfYy1pY29uIGh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZCBoeV9jLWJ1dHRvbl9faWNvblxcXCI+PC9pPiA8L2J1dHRvbj4gPC9wPiA8b3ZlcmxheS1jb250YWluZXI+IDxvdmVybGF5IG92ZXJsYXkta2V5PW92ZXJsYXktMT4gPGg0IGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XFxcIiBzbG90PW92ZXJsYXktaGVhZGVyPlRoaXMgaXMgb3ZlcmxheSAjMTwvaDQ+IDxhcnRpY2xlIHNsb3Q9b3ZlcmxheS1ib2R5PiBPdmVybGF5ICMxIGJvZHkgPC9hcnRpY2xlPiA8L292ZXJsYXk+IDxvdmVybGF5IG92ZXJsYXkta2V5PW92ZXJsYXktMj4gPGg0IGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XFxcIiBzbG90PW92ZXJsYXktaGVhZGVyPlRoaXMgaXMgb3ZlcmxheSAjMjwvaDQ+IDxhcnRpY2xlIHNsb3Q9b3ZlcmxheS1ib2R5PiBPdmVybGF5ICMyIGJvZHkgPC9hcnRpY2xlPiA8L292ZXJsYXk+IDwvb3ZlcmxheS1jb250YWluZXI+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuICAgICAgICAgICAgICZsdDtvdmVybGF5LWNvbnRhaW5lciZndDtcXG4gICAgICAgICAgICAgICAmbHQ7b3ZlcmxheSBvdmVybGF5LWtleT1cXFwib3ZlcmxheS0xXFxcIiZndDtcXG4gICAgICAgICAgICAgICAgICZsdDtoNCAgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcXFwiIHNsb3Q9XFxcIm92ZXJsYXktaGVhZGVyXFxcIiZndDtcXG4gICAgICAgICAgICAgICAgIFRoaXMgaXMgb3ZlcmxheSAjMVxcbiAgICAgICAgICAgICAgICAgJmx0Oy9oNCZndDtcXG4gICAgICAgICAgICAgICAgICZsdDthcnRpY2xlIHNsb3Q9XFxcIm92ZXJsYXktYm9keVxcXCImZ3Q7XFxuICAgICAgICAgICAgICAgICAgIE92ZXJsYXkgIzEgYm9keVxcbiAgICAgICAgICAgICAgICAgJmx0Oy9hcnRpY2xlJmd0O1xcbiAgICAgICAgICAgICAgICZsdDsvb3ZlcmxheSZndDtcXG4gICAgICAgICAgICAgICAmbHQ7b3ZlcmxheSBvdmVybGF5LWtleT1cXFwib3ZlcmxheS0yXFxcIiZndDtcXG4gICAgICAgICAgICAgICAgICZsdDtoNCAgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcXFwiIHNsb3Q9XFxcIm92ZXJsYXktaGVhZGVyXFxcIiZndDtcXG4gICAgICAgICAgICAgICAgIFRoaXMgaXMgb3ZlcmxheSAjMVxcbiAgICAgICAgICAgICAgICAgJmx0Oy9oNCZndDtcXG4gICAgICAgICAgICAgICAgICZsdDthcnRpY2xlIHNsb3Q9XFxcIm92ZXJsYXktYm9keVxcXCImZ3Q7XFxuICAgICAgICAgICAgICAgICAgIE92ZXJsYXkgIzIgYm9keVxcbiAgICAgICAgICAgICAgICAgJmx0Oy9hcnRpY2xlJmd0O1xcbiAgICAgICAgICAgICAgICZsdDsvb3ZlcmxheSZndDtcXG4gICAgICAgICAgICAgJmx0Oy9vdmVybGF5LWNvbnRhaW5lciZndDtcXG4gICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiPkFQSTwvaDM+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxhcGktdGFibGUgOml0ZW1zPWFwaUl0ZW1zPjwvYXBpLXRhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2Rldi9zcmMvdmlld3Mvb3ZlcmxheS1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE1OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPlN0ZXAgVHJhY2tlcjwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8c3RlcC10cmFja2VyIDpjdXJyZW50LXN0ZXA9c3RlcFRyYWNrZXJDdXJyZW50U3RlcCA6Y29uZmlnPXN0ZXBUcmFja2VyQ29uZmlnPjwvc3RlcC10cmFja2VyPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuICAgICAgICAmbHQ7c3RlcC10cmFja2VyXFxuICAgICAgICA6Y3VycmVudC1zdGVwPVxcXCJzdGVwVHJhY2tlckN1cnJlbnRTdGVwXFxcIlxcbiAgICAgICAgOmNvbmZpZz1cXFwic3RlcFRyYWNrZXJDb25maWdcXFwiJmd0O1xcbiAgICAgICAgJmx0Oy9zdGVwLXRyYWNrZXImZ3Q7XFxuICAgICAgIDwvY29kZT5cXG4gICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9amF2YXNjcmlwdD4gPHByZT5cXG4gICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWpzPlxcbiAgICAgICAgICAgIGxldCBzdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMjtcXG4gICAgICAgICAgICBsZXQgc3RlcFRyYWNrZXJDb25maWcgPSB7XFxuICAgICAgICAgICAgICBpc0NsaWNrYWJsZTogdHJ1ZSxcXG4gICAgICAgICAgICAgIHN0ZXBzOiBbXFxuICAgICAgICAgICAgICAgIHtcXG4gICAgICAgICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQScsXFxuICAgICAgICAgICAgICAgICAgbGluazogJycsXFxuICAgICAgICAgICAgICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMDtcXG4gICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIH0sIHtcXG4gICAgICAgICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQicsXFxuICAgICAgICAgICAgICAgICAgbGluazogJycsXFxuICAgICAgICAgICAgICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMTtcXG4gICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIH0sIHtcXG4gICAgICAgICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQycsXFxuICAgICAgICAgICAgICAgICAgbGluazogJycsXFxuICAgICAgICAgICAgICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMjtcXG4gICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgIF1cXG4gICAgICAgICAgICB9O1xcbiAgICAgICAgICAgIGxldCB2bSA9IG5ldyBWdWUoe1xcbiAgICAgICAgICAgICAgZWw6ICdib2R5JyxcXG4gICAgICAgICAgICAgIGRhdGE6IHtcXG4gICAgICAgICAgICAgICAgc3RlcFRyYWNrZXJDb25maWcsXFxuICAgICAgICAgICAgICAgIHN0ZXBUcmFja2VyQ3VycmVudFN0ZXBcXG4gICAgICAgICAgICB9LFxcbiAgICAgICAgICAgICAgY29tcG9uZW50czoge1xcbiAgICAgICAgICAgICAgICBTdGVwVHJhY2tlclxcbiAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH0pO1xcbiAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vZGV2L3NyYy92aWV3cy9zdGVwLXRyYWNrZXItcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxNjBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5UYWI8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPHRhYnMgY2xhc3M9XFxcImMtcHJpY2UtbG9va3VwIGh5X28tbGF5b3V0X19pdGVtIGh5X3Utc2l6ZS0zb2YzQHNtIGh5X3Utc2l6ZS0zb2Y0QG1kIGh5X3Utc2l6ZS00b2YxMkBsZ1xcXCI+IDx0YWIgbGFiZWw9XFxcIlRhYiAxXFxcIj4gPHA+IFRhYiAxIGNvbnRlbnQgPC9wPiA8L3RhYj4gPHRhYiBsYWJlbD1cXFwiVGFiIDJcXFwiPiA8cD4gVGFiIDIgY29udGVudCA8L3A+IDwvdGFiPiA8dGFiIGxhYmVsPVxcXCJUYWIgM1xcXCIgOmlzLWRpc2FibGVkPXRydWU+IDxwPiBUYWIgMyBjb250ZW50IDwvcD4gPC90YWI+IDwvdGFicz4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4gICAgICAgICAgICAgJmx0O3RhYnMmZ3Q7XFxuICAgICAgICAgICAgICAgJmx0O3RhYiBsYWJlbD1cXFwiVGFiIDFcXFwiJmd0O1xcbiAgICAgICAgICAgICAgICAgJmx0O3AmZ3Q7XFxuICAgICAgICAgICAgICAgICAgIFRhYiAxIGNvbnRlbnRcXG4gICAgICAgICAgICAgICAgICZsdDsvcCZndDtcXG4gICAgICAgICAgICAgICAmbHQ7L3RhYiZndDtcXG4gICAgICAgICAgICAgICAmbHQ7dGFiIGxhYmVsPVxcXCJUYWIgMlxcXCImZ3Q7XFxuICAgICAgICAgICAgICAgICAmbHQ7cCZndDtcXG4gICAgICAgICAgICAgICAgICAgVGFiIDIgY29udGVudFxcbiAgICAgICAgICAgICAgICAgJmx0Oy9wJmd0O1xcbiAgICAgICAgICAgICAgICZsdDsvdGFiJmd0O1xcbiAgICAgICAgICAgICAgICZsdDt0YWIgbGFiZWw9XFxcIlRhYiAzXFxcIiA6aXMtZGlzYWJsZWQ9XFxcInRydWVcXFwiJmd0O1xcbiAgICAgICAgICAgICAgICAgJmx0O3AmZ3Q7XFxuICAgICAgICAgICAgICAgICAgIFRhYiAzIGNvbnRlbnRcXG4gICAgICAgICAgICAgICAgICZsdDsvcCZndDtcXG4gICAgICAgICAgICAgICAmbHQ7L3RhYiZndDtcXG4gICAgICAgICAgICAgJmx0Oy90YWJzJmd0O1xcbiAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vZGV2L3NyYy92aWV3cy90YWJzLXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTYxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiB2LWlmPWlzVmlzaWJsZSB0cmFuc2l0aW9uPWZhZGUgY2xhc3M9Yy1hbGVydCA6Y2xhc3M9XFxcIidjLWFsZXJ0LS0nICsgdHlwZVxcXCIgOmNsYXNzPVxcXCJ7ICdjLWFsZXJ0LS1kaXNtaXNzaWJsZSc6IGRpc21pc3NpYmxlIH1cXFwiIHJvbGU9YWxlcnQ+IDxidXR0b24gdi1pZj1kaXNtaXNzaWJsZSBAY2xpY2s9ZGlzbWlzcyB0eXBlPWJ1dHRvbiBjbGFzcz1jLWFsZXJ0X19jbG9zZS1idXR0b24gYXJpYS1sYWJlbD1DbG9zZT4gPHNwYW4gYXJpYS1oaWRkZW49dHJ1ZT4mdGltZXM7PC9zcGFuPiA8c3BhbiBjbGFzcz1oeV91LWludmlzaWJsZT5DbG9zZTwvc3Bhbj4gPC9idXR0b24+IDxzbG90Pjwvc2xvdD4gPC9kaXY+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3JjL2NvbXBvbmVudHMvYWxlcnQvYWxlcnQuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE2MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy1jb2xsYXBzYWJsZS1wYW5lbD4gPGgzIEBjbGljay5wcmV2ZW50PXRvZ2dsZU9wZW4gOmNsYXNzPVxcXCJ7XFxuICAgICAgJ2MtY29sbGFwc2FibGUtcGFuZWxfX2hlYWRlci0tb3Blbic6IGlzT3BlblxcbiAgICB9XFxcIiBjbGFzcz1cXFwiYy1jb2xsYXBzYWJsZS1wYW5lbF9faGVhZGVyIGh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIiB2LWh0bWw9bGFiZWw+IDwvaDM+IDxkaXYgY2xhc3M9Yy1jb2xsYXBzYWJsZS1wYW5lbF9fYm9keSA6Y2xhc3M9XFxcIntcXG4gICAgJ2MtY29sbGFwc2FibGUtcGFuZWxfX2JvZHktLW9wZW4nOiBpc09wZW5cXG4gIH1cXFwiPiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiA8L2Rpdj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zcmMvY29tcG9uZW50cy9jb2xsYXBzYWJsZS1wYW5lbC9jb2xsYXBzYWJsZS1wYW5lbC5odG1sXG4gKiogbW9kdWxlIGlkID0gMTYzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLWxlZ2FsLWNvbnRhaW5lcj4gPG9sIGNsYXNzPWMtbGVnYWwtY29udGFpbmVyX19vcmRlcmVkLWxpc3Q+IDxsaSB2LXNldC1mb2N1cz1sZWdhbC5pc1NlbGVjdGVkIGNsYXNzPWMtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0gOmNsYXNzPVxcXCJ7XFxuICAgICAgJ2MtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0tLWFjdGl2ZSc6IGxlZ2FsLmlzU2VsZWN0ZWRcXG4gICAgfVxcXCIgdi1mb3I9XFxcImxlZ2FsIGluIGluZGV4ZWRMZWdhbHNcXFwiIHYtaHRtbD1sZWdhbC5jb250ZW50PiA8L2xpPiA8L29sPiA8dWwgY2xhc3M9Yy1sZWdhbC1jb250YWluZXJfX3Vub3JkZXJlZC1saXN0PiA8bGkgY2xhc3M9Yy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbSB2LWZvcj1cXFwibGVnYWwgaW4gbm9uSW5kZXhlZExlZ2Fsc1xcXCIgdi1odG1sPWxlZ2FsLmNvbnRlbnQ+IDwvbGk+IDwvdWw+IDwvZGl2PiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci5odG1sXG4gKiogbW9kdWxlIGlkID0gMTY0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN1cCBjbGFzcz1jLWxlZ2FsLXN1cD4gPGEgaHJlZj0jIEBjbGljay5wcmV2ZW50PWNsaWNrSGFuZGxlcj4ge3tsZWdhbENvdW50ZXJ9fSA8L2E+IDwvc3VwPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvdW50ZXIuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE2NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy1vdmVybGF5LWNvbnRhaW5lcj4gPGRpdiBjbGFzcz1jLW92ZXJsYXktY29udGFpbmVyX19jdXJ0YWluIDpjbGFzcz1cXFwie1xcbiAgICAgICAgJ2Mtb3ZlcmxheS1jb250YWluZXJfX2N1cnRhaW4tLWFjdGl2ZSc6IGlzVmlzaWJsZVxcbiAgICB9XFxcIiBAY2xpY2sucHJldmVudD1cXFwiaXNWaXNpYmxlPWZhbHNlXFxcIj4gPC9kaXY+IDxkaXYgY2xhc3M9Yy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXMgOmNsYXNzPVxcXCJ7XFxuICAgICAgICAnYy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXMtLWFjdGl2ZSc6IGlzVmlzaWJsZVxcbiAgICB9XFxcIj4gPHNsb3Q+PC9zbG90PiA8L2Rpdj4gPC9kaXY+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LWNvbnRhaW5lci5odG1sXG4gKiogbW9kdWxlIGlkID0gMTY2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGFydGljbGUgY2xhc3M9Yy1vdmVybGF5IHYtc2hvdz1pc1Zpc2libGU+IDxkaXYgY2xhc3M9Yy1vdmVybGF5X19ib2R5PiA8c2xvdCBuYW1lPW92ZXJsYXktYm9keT48L3Nsb3Q+IDwvZGl2PiA8aGVhZGVyIGNsYXNzPWMtb3ZlcmxheV9faGVhZGVyPiA8c2xvdCBuYW1lPW92ZXJsYXktaGVhZGVyPjwvc2xvdD4gPGJ1dHRvbiB0eXBlPWJ1dHRvbiBjbGFzcz1jLW92ZXJsYXlfX2Nsb3NlLWJ1dHRvbiBhcmlhLWxhYmVsPUNsb3NlIHRhYmluZGV4PTAgQGNsaWNrLnByZXZlbnQ9Y2xvc2VPdmVybGF5PjwvYnV0dG9uPiA8L2hlYWRlcj4gPC9hcnRpY2xlPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS5odG1sXG4gKiogbW9kdWxlIGlkID0gMTY3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHVsIGNsYXNzPWMtc3RlcC10cmFja2VyPiA8bGkgY2xhc3M9Yy1zdGVwLXRyYWNrZXJfX3N0ZXAgOmNsYXNzPVxcXCJ7XFxuICAgICAgJ2Mtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZSc6IGN1cnJlbnRTdGVwID4gJGluZGV4LFxcbiAgICAgICdjLXN0ZXAtdHJhY2tlcl9fc3RlcC0tYWN0aXZlJzogY3VycmVudFN0ZXAgPT09ICRpbmRleCxcXG4gICAgICAnYy1zdGVwLXRyYWNrZXJfX3NldHAtLWNsaWNrYWJsZSc6IChjdXJyZW50U3RlcCA+ICRpbmRleCAmJiBjb25maWcuaXNDbGlja2FibGUpXFxuICB9XFxcIiB2LWZvcj1cXFwic3RlcCBpbiBjb25maWcuc3RlcHNcXFwiPiA8YSA6aHJlZj1cXFwic3RlcC5saW5rIHx8IGZhbHNlXFxcIiBAY2xpY2s9XFxcImNsaWNrSGFuZGxlcigkZXZlbnQsIHN0ZXAsICRpbmRleClcXFwiIHYtaWY9Y29uZmlnLmlzQ2xpY2thYmxlPiA8c3BhbiBjbGFzcz1jLXN0ZXAtdHJhY2tlcl9faWNvbj48L3NwYW4+IDxzcGFuIGNsYXNzPWMtc3RlcC10cmFja2VyX19sYWJlbD57eyRpbmRleCArIDF9fS4ge3tzdGVwLnRpdGxlfX08L3NwYW4+IDwvYT4gPHNwYW4gdi1lbHNlIGNsYXNzPWMtc3RlcC10cmFja2VyX19pY29uPjwvc3Bhbj4gPHNwYW4gdi1lbHNlIGNsYXNzPWMtc3RlcC10cmFja2VyX19sYWJlbD57eyRpbmRleCArIDF9fS4ge3tzdGVwLnRpdGxlfX08L3NwYW4+IDwvbGk+IDwvdWw+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3JjL2NvbXBvbmVudHMvc3RlcC10cmFja2VyL3N0ZXAtdHJhY2tlci5odG1sXG4gKiogbW9kdWxlIGlkID0gMTY4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLXRhYnNfX3BhbmUgOmNsYXNzPVxcXCJ7XFxuICAgICdjLXRhYnNfX3BhbmUtLWFjdGl2ZSc6IGlzVmlzaWJsZVxcbiAgfVxcXCI+IDxzbG90Pjwvc2xvdD4gPC9kaXY+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYi5odG1sXG4gKiogbW9kdWxlIGlkID0gMTY5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLXRhYnM+IDx1bCBjbGFzcz1jLXRhYnNfX2hlYWRlcj4gPGxpIHYtZm9yPVxcXCJ0YWIgaW4gdGFic1xcXCIgY2xhc3M9Yy10YWJzX19oZWFkZXItaXRlbSA6Y2xhc3M9XFxcIntcXG4gICAgICAgICAgICAgICAgJ2MtdGFic19faGVhZGVyLWl0ZW0tLWFjdGl2ZSc6ICgkaW5kZXggPT09IGFjdGl2ZVRhYkluZGV4KSxcXG4gICAgICAgICAgICAgICAgJ2MtdGFic19faGVhZGVyLWl0ZW0tLWRpc2FibGVkJzogdGFiLmlzRGlzYWJsZWRcXG4gICAgICAgICAgICAgIH1cXFwiIDpkaXNhYmxlZD10YWIuZGlzYWJsZWQ+IDxhIGhyZWY9IyBAY2xpY2sucHJldmVudD1cXFwiaGFuZGxlVGFiTGlzdENsaWNrKCRpbmRleCwgdGFiKVxcXCIgdi1odG1sPXRhYi5sYWJlbD48L2E+IDwvbGk+IDwvdWw+IDxkaXYgY2xhc3M9Yy10YWJzX19ib2R5PiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiA8L2Rpdj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zcmMvY29tcG9uZW50cy90YWIvdGFicy5odG1sXG4gKiogbW9kdWxlIGlkID0gMTcwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2FsZXJ0LXBhZ2UudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9hbGVydC1wYWdlLnZ1ZVwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9kZXYvc3JjL3ZpZXdzL2FsZXJ0LXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTcxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2NvbGxhcHNhYmxlLXBhbmVsLXBhZ2UudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9jb2xsYXBzYWJsZS1wYW5lbC1wYWdlLnZ1ZVwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9kZXYvc3JjL3ZpZXdzL2NvbGxhcHNhYmxlLXBhbmVsLXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTcyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9pbmRleC52dWVcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vZGV2L3NyYy92aWV3cy9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAxNzNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vbGVnYWwtcGFnZS52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2xlZ2FsLXBhZ2UudnVlXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvdmlld3MvbGVnYWwtcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxNzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vb3ZlcmxheS1wYWdlLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vb3ZlcmxheS1wYWdlLnZ1ZVwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9kZXYvc3JjL3ZpZXdzL292ZXJsYXktcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxNzVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vc3RlcC10cmFja2VyLXBhZ2UudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9zdGVwLXRyYWNrZXItcGFnZS52dWVcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vZGV2L3NyYy92aWV3cy9zdGVwLXRyYWNrZXItcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxNzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vdGFicy1wYWdlLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vdGFicy1wYWdlLnZ1ZVwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9kZXYvc3JjL3ZpZXdzL3RhYnMtcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxNzdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vYWxlcnQuaHRtbFwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvY29tcG9uZW50cy9hbGVydC9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAxNzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vY29sbGFwc2FibGUtcGFuZWwuaHRtbFwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvY29tcG9uZW50cy9jb2xsYXBzYWJsZS1wYW5lbC9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAxNzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY29udGFpbmVyLnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vbGVnYWwtY29udGFpbmVyLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9sZWdhbC1jb250YWluZXIuaHRtbFwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb250YWluZXIudnVlXG4gKiogbW9kdWxlIGlkID0gMTgwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2xlZ2FsLWNvdW50ZXIudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9sZWdhbC1jb3VudGVyLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9sZWdhbC1jb3VudGVyLmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY291bnRlci52dWVcbiAqKiBtb2R1bGUgaWQgPSAxODFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vb3ZlcmxheS1jb250YWluZXIudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9vdmVybGF5LWNvbnRhaW5lci52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vb3ZlcmxheS1jb250YWluZXIuaHRtbFwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXktY29udGFpbmVyLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE4MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhc2FzcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vb3ZlcmxheS52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vb3ZlcmxheS5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxODNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3RlcC10cmFja2VyLmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2NvbXBvbmVudHMvc3RlcC10cmFja2VyL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE4NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi90YWIudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3RhYi5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL3RhYi90YWIudnVlXG4gKiogbW9kdWxlIGlkID0gMTg1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3RhYnMudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi90YWJzLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi90YWJzLmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYnMudnVlXG4gKiogbW9kdWxlIGlkID0gMTg2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIHZ1ZS1yb3V0ZXIgdjAuNy4xM1xuICogKGMpIDIwMTYgRXZhbiBZb3VcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICBnbG9iYWwuVnVlUm91dGVyID0gZmFjdG9yeSgpO1xufSh0aGlzLCBmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuICB2YXIgYmFiZWxIZWxwZXJzID0ge307XG5cbiAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICAgIH1cbiAgfTtcbiAgZnVuY3Rpb24gVGFyZ2V0KHBhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKSB7XG4gICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICB0aGlzLm1hdGNoZXIgPSBtYXRjaGVyO1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgfVxuXG4gIFRhcmdldC5wcm90b3R5cGUgPSB7XG4gICAgdG86IGZ1bmN0aW9uIHRvKHRhcmdldCwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBkZWxlZ2F0ZSA9IHRoaXMuZGVsZWdhdGU7XG5cbiAgICAgIGlmIChkZWxlZ2F0ZSAmJiBkZWxlZ2F0ZS53aWxsQWRkUm91dGUpIHtcbiAgICAgICAgdGFyZ2V0ID0gZGVsZWdhdGUud2lsbEFkZFJvdXRlKHRoaXMubWF0Y2hlci50YXJnZXQsIHRhcmdldCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMubWF0Y2hlci5hZGQodGhpcy5wYXRoLCB0YXJnZXQpO1xuXG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBtdXN0IGhhdmUgYW4gYXJndW1lbnQgaW4gdGhlIGZ1bmN0aW9uIHBhc3NlZCB0byBgdG9gXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWF0Y2hlci5hZGRDaGlsZCh0aGlzLnBhdGgsIHRhcmdldCwgY2FsbGJhY2ssIHRoaXMuZGVsZWdhdGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIE1hdGNoZXIodGFyZ2V0KSB7XG4gICAgdGhpcy5yb3V0ZXMgPSB7fTtcbiAgICB0aGlzLmNoaWxkcmVuID0ge307XG4gICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gIH1cblxuICBNYXRjaGVyLnByb3RvdHlwZSA9IHtcbiAgICBhZGQ6IGZ1bmN0aW9uIGFkZChwYXRoLCBoYW5kbGVyKSB7XG4gICAgICB0aGlzLnJvdXRlc1twYXRoXSA9IGhhbmRsZXI7XG4gICAgfSxcblxuICAgIGFkZENoaWxkOiBmdW5jdGlvbiBhZGRDaGlsZChwYXRoLCB0YXJnZXQsIGNhbGxiYWNrLCBkZWxlZ2F0ZSkge1xuICAgICAgdmFyIG1hdGNoZXIgPSBuZXcgTWF0Y2hlcih0YXJnZXQpO1xuICAgICAgdGhpcy5jaGlsZHJlbltwYXRoXSA9IG1hdGNoZXI7XG5cbiAgICAgIHZhciBtYXRjaCA9IGdlbmVyYXRlTWF0Y2gocGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpO1xuXG4gICAgICBpZiAoZGVsZWdhdGUgJiYgZGVsZWdhdGUuY29udGV4dEVudGVyZWQpIHtcbiAgICAgICAgZGVsZWdhdGUuY29udGV4dEVudGVyZWQodGFyZ2V0LCBtYXRjaCk7XG4gICAgICB9XG5cbiAgICAgIGNhbGxiYWNrKG1hdGNoKTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2VuZXJhdGVNYXRjaChzdGFydGluZ1BhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChwYXRoLCBuZXN0ZWRDYWxsYmFjaykge1xuICAgICAgdmFyIGZ1bGxQYXRoID0gc3RhcnRpbmdQYXRoICsgcGF0aDtcblxuICAgICAgaWYgKG5lc3RlZENhbGxiYWNrKSB7XG4gICAgICAgIG5lc3RlZENhbGxiYWNrKGdlbmVyYXRlTWF0Y2goZnVsbFBhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IFRhcmdldChzdGFydGluZ1BhdGggKyBwYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFJvdXRlKHJvdXRlQXJyYXksIHBhdGgsIGhhbmRsZXIpIHtcbiAgICB2YXIgbGVuID0gMDtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHJvdXRlQXJyYXkubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBsZW4gKz0gcm91dGVBcnJheVtpXS5wYXRoLmxlbmd0aDtcbiAgICB9XG5cbiAgICBwYXRoID0gcGF0aC5zdWJzdHIobGVuKTtcbiAgICB2YXIgcm91dGUgPSB7IHBhdGg6IHBhdGgsIGhhbmRsZXI6IGhhbmRsZXIgfTtcbiAgICByb3V0ZUFycmF5LnB1c2gocm91dGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZWFjaFJvdXRlKGJhc2VSb3V0ZSwgbWF0Y2hlciwgY2FsbGJhY2ssIGJpbmRpbmcpIHtcbiAgICB2YXIgcm91dGVzID0gbWF0Y2hlci5yb3V0ZXM7XG5cbiAgICBmb3IgKHZhciBwYXRoIGluIHJvdXRlcykge1xuICAgICAgaWYgKHJvdXRlcy5oYXNPd25Qcm9wZXJ0eShwYXRoKSkge1xuICAgICAgICB2YXIgcm91dGVBcnJheSA9IGJhc2VSb3V0ZS5zbGljZSgpO1xuICAgICAgICBhZGRSb3V0ZShyb3V0ZUFycmF5LCBwYXRoLCByb3V0ZXNbcGF0aF0pO1xuXG4gICAgICAgIGlmIChtYXRjaGVyLmNoaWxkcmVuW3BhdGhdKSB7XG4gICAgICAgICAgZWFjaFJvdXRlKHJvdXRlQXJyYXksIG1hdGNoZXIuY2hpbGRyZW5bcGF0aF0sIGNhbGxiYWNrLCBiaW5kaW5nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYWxsYmFjay5jYWxsKGJpbmRpbmcsIHJvdXRlQXJyYXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbWFwIChjYWxsYmFjaywgYWRkUm91dGVDYWxsYmFjaykge1xuICAgIHZhciBtYXRjaGVyID0gbmV3IE1hdGNoZXIoKTtcblxuICAgIGNhbGxiYWNrKGdlbmVyYXRlTWF0Y2goXCJcIiwgbWF0Y2hlciwgdGhpcy5kZWxlZ2F0ZSkpO1xuXG4gICAgZWFjaFJvdXRlKFtdLCBtYXRjaGVyLCBmdW5jdGlvbiAocm91dGUpIHtcbiAgICAgIGlmIChhZGRSb3V0ZUNhbGxiYWNrKSB7XG4gICAgICAgIGFkZFJvdXRlQ2FsbGJhY2sodGhpcywgcm91dGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hZGQocm91dGUpO1xuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuICB9XG5cbiAgdmFyIHNwZWNpYWxzID0gWycvJywgJy4nLCAnKicsICcrJywgJz8nLCAnfCcsICcoJywgJyknLCAnWycsICddJywgJ3snLCAnfScsICdcXFxcJ107XG5cbiAgdmFyIGVzY2FwZVJlZ2V4ID0gbmV3IFJlZ0V4cCgnKFxcXFwnICsgc3BlY2lhbHMuam9pbignfFxcXFwnKSArICcpJywgJ2cnKTtcblxuICB2YXIgbm9XYXJuaW5nID0gZmFsc2U7XG4gIGZ1bmN0aW9uIHdhcm4obXNnKSB7XG4gICAgaWYgKCFub1dhcm5pbmcgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbdnVlLXJvdXRlcl0gJyArIG1zZyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdHJ5RGVjb2RlKHVyaSwgYXNDb21wb25lbnQpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGFzQ29tcG9uZW50ID8gZGVjb2RlVVJJQ29tcG9uZW50KHVyaSkgOiBkZWNvZGVVUkkodXJpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB3YXJuKCdtYWxmb3JtZWQgVVJJJyArIChhc0NvbXBvbmVudCA/ICcgY29tcG9uZW50OiAnIDogJzogJykgKyB1cmkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGlzQXJyYXkodGVzdCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGVzdCkgPT09IFwiW29iamVjdCBBcnJheV1cIjtcbiAgfVxuXG4gIC8vIEEgU2VnbWVudCByZXByZXNlbnRzIGEgc2VnbWVudCBpbiB0aGUgb3JpZ2luYWwgcm91dGUgZGVzY3JpcHRpb24uXG4gIC8vIEVhY2ggU2VnbWVudCB0eXBlIHByb3ZpZGVzIGFuIGBlYWNoQ2hhcmAgYW5kIGByZWdleGAgbWV0aG9kLlxuICAvL1xuICAvLyBUaGUgYGVhY2hDaGFyYCBtZXRob2QgaW52b2tlcyB0aGUgY2FsbGJhY2sgd2l0aCBvbmUgb3IgbW9yZSBjaGFyYWN0ZXJcbiAgLy8gc3BlY2lmaWNhdGlvbnMuIEEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gY29uc3VtZXMgb25lIG9yIG1vcmUgaW5wdXRcbiAgLy8gY2hhcmFjdGVycy5cbiAgLy9cbiAgLy8gVGhlIGByZWdleGAgbWV0aG9kIHJldHVybnMgYSByZWdleCBmcmFnbWVudCBmb3IgdGhlIHNlZ21lbnQuIElmIHRoZVxuICAvLyBzZWdtZW50IGlzIGEgZHluYW1pYyBvZiBzdGFyIHNlZ21lbnQsIHRoZSByZWdleCBmcmFnbWVudCBhbHNvIGluY2x1ZGVzXG4gIC8vIGEgY2FwdHVyZS5cbiAgLy9cbiAgLy8gQSBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiBjb250YWluczpcbiAgLy9cbiAgLy8gKiBgdmFsaWRDaGFyc2A6IGEgU3RyaW5nIHdpdGggYSBsaXN0IG9mIGFsbCB2YWxpZCBjaGFyYWN0ZXJzLCBvclxuICAvLyAqIGBpbnZhbGlkQ2hhcnNgOiBhIFN0cmluZyB3aXRoIGEgbGlzdCBvZiBhbGwgaW52YWxpZCBjaGFyYWN0ZXJzXG4gIC8vICogYHJlcGVhdGA6IHRydWUgaWYgdGhlIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGNhbiByZXBlYXRcblxuICBmdW5jdGlvbiBTdGF0aWNTZWdtZW50KHN0cmluZykge1xuICAgIHRoaXMuc3RyaW5nID0gc3RyaW5nO1xuICB9XG4gIFN0YXRpY1NlZ21lbnQucHJvdG90eXBlID0ge1xuICAgIGVhY2hDaGFyOiBmdW5jdGlvbiBlYWNoQ2hhcihjYWxsYmFjaykge1xuICAgICAgdmFyIHN0cmluZyA9IHRoaXMuc3RyaW5nLFxuICAgICAgICAgIGNoO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0cmluZy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgY2ggPSBzdHJpbmcuY2hhckF0KGkpO1xuICAgICAgICBjYWxsYmFjayh7IHZhbGlkQ2hhcnM6IGNoIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICByZWdleDogZnVuY3Rpb24gcmVnZXgoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdHJpbmcucmVwbGFjZShlc2NhcGVSZWdleCwgJ1xcXFwkMScpO1xuICAgIH0sXG5cbiAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdHJpbmc7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIER5bmFtaWNTZWdtZW50KG5hbWUpIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICB9XG4gIER5bmFtaWNTZWdtZW50LnByb3RvdHlwZSA9IHtcbiAgICBlYWNoQ2hhcjogZnVuY3Rpb24gZWFjaENoYXIoY2FsbGJhY2spIHtcbiAgICAgIGNhbGxiYWNrKHsgaW52YWxpZENoYXJzOiBcIi9cIiwgcmVwZWF0OiB0cnVlIH0pO1xuICAgIH0sXG5cbiAgICByZWdleDogZnVuY3Rpb24gcmVnZXgoKSB7XG4gICAgICByZXR1cm4gXCIoW14vXSspXCI7XG4gICAgfSxcblxuICAgIGdlbmVyYXRlOiBmdW5jdGlvbiBnZW5lcmF0ZShwYXJhbXMpIHtcbiAgICAgIHZhciB2YWwgPSBwYXJhbXNbdGhpcy5uYW1lXTtcbiAgICAgIHJldHVybiB2YWwgPT0gbnVsbCA/IFwiOlwiICsgdGhpcy5uYW1lIDogdmFsO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBTdGFyU2VnbWVudChuYW1lKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgfVxuICBTdGFyU2VnbWVudC5wcm90b3R5cGUgPSB7XG4gICAgZWFjaENoYXI6IGZ1bmN0aW9uIGVhY2hDaGFyKGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjayh7IGludmFsaWRDaGFyczogXCJcIiwgcmVwZWF0OiB0cnVlIH0pO1xuICAgIH0sXG5cbiAgICByZWdleDogZnVuY3Rpb24gcmVnZXgoKSB7XG4gICAgICByZXR1cm4gXCIoLispXCI7XG4gICAgfSxcblxuICAgIGdlbmVyYXRlOiBmdW5jdGlvbiBnZW5lcmF0ZShwYXJhbXMpIHtcbiAgICAgIHZhciB2YWwgPSBwYXJhbXNbdGhpcy5uYW1lXTtcbiAgICAgIHJldHVybiB2YWwgPT0gbnVsbCA/IFwiOlwiICsgdGhpcy5uYW1lIDogdmFsO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBFcHNpbG9uU2VnbWVudCgpIHt9XG4gIEVwc2lsb25TZWdtZW50LnByb3RvdHlwZSA9IHtcbiAgICBlYWNoQ2hhcjogZnVuY3Rpb24gZWFjaENoYXIoKSB7fSxcbiAgICByZWdleDogZnVuY3Rpb24gcmVnZXgoKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9LFxuICAgIGdlbmVyYXRlOiBmdW5jdGlvbiBnZW5lcmF0ZSgpIHtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBwYXJzZShyb3V0ZSwgbmFtZXMsIHNwZWNpZmljaXR5KSB7XG4gICAgLy8gbm9ybWFsaXplIHJvdXRlIGFzIG5vdCBzdGFydGluZyB3aXRoIGEgXCIvXCIuIFJlY29nbml0aW9uIHdpbGxcbiAgICAvLyBhbHNvIG5vcm1hbGl6ZS5cbiAgICBpZiAocm91dGUuY2hhckF0KDApID09PSBcIi9cIikge1xuICAgICAgcm91dGUgPSByb3V0ZS5zdWJzdHIoMSk7XG4gICAgfVxuXG4gICAgdmFyIHNlZ21lbnRzID0gcm91dGUuc3BsaXQoXCIvXCIpLFxuICAgICAgICByZXN1bHRzID0gW107XG5cbiAgICAvLyBBIHJvdXRlcyBoYXMgc3BlY2lmaWNpdHkgZGV0ZXJtaW5lZCBieSB0aGUgb3JkZXIgdGhhdCBpdHMgZGlmZmVyZW50IHNlZ21lbnRzXG4gICAgLy8gYXBwZWFyIGluLiBUaGlzIHN5c3RlbSBtaXJyb3JzIGhvdyB0aGUgbWFnbml0dWRlIG9mIG51bWJlcnMgd3JpdHRlbiBhcyBzdHJpbmdzXG4gICAgLy8gd29ya3MuXG4gICAgLy8gQ29uc2lkZXIgYSBudW1iZXIgd3JpdHRlbiBhczogXCJhYmNcIi4gQW4gZXhhbXBsZSB3b3VsZCBiZSBcIjIwMFwiLiBBbnkgb3RoZXIgbnVtYmVyIHdyaXR0ZW5cbiAgICAvLyBcInh5elwiIHdpbGwgYmUgc21hbGxlciB0aGFuIFwiYWJjXCIgc28gbG9uZyBhcyBgYSA+IHpgLiBGb3IgaW5zdGFuY2UsIFwiMTk5XCIgaXMgc21hbGxlclxuICAgIC8vIHRoZW4gXCIyMDBcIiwgZXZlbiB0aG91Z2ggXCJ5XCIgYW5kIFwielwiICh3aGljaCBhcmUgYm90aCA5KSBhcmUgbGFyZ2VyIHRoYW4gXCIwXCIgKHRoZSB2YWx1ZVxuICAgIC8vIG9mIChgYmAgYW5kIGBjYCkuIFRoaXMgaXMgYmVjYXVzZSB0aGUgbGVhZGluZyBzeW1ib2wsIFwiMlwiLCBpcyBsYXJnZXIgdGhhbiB0aGUgb3RoZXJcbiAgICAvLyBsZWFkaW5nIHN5bWJvbCwgXCIxXCIuXG4gICAgLy8gVGhlIHJ1bGUgaXMgdGhhdCBzeW1ib2xzIHRvIHRoZSBsZWZ0IGNhcnJ5IG1vcmUgd2VpZ2h0IHRoYW4gc3ltYm9scyB0byB0aGUgcmlnaHRcbiAgICAvLyB3aGVuIGEgbnVtYmVyIGlzIHdyaXR0ZW4gb3V0IGFzIGEgc3RyaW5nLiBJbiB0aGUgYWJvdmUgc3RyaW5ncywgdGhlIGxlYWRpbmcgZGlnaXRcbiAgICAvLyByZXByZXNlbnRzIGhvdyBtYW55IDEwMCdzIGFyZSBpbiB0aGUgbnVtYmVyLCBhbmQgaXQgY2FycmllcyBtb3JlIHdlaWdodCB0aGFuIHRoZSBtaWRkbGVcbiAgICAvLyBudW1iZXIgd2hpY2ggcmVwcmVzZW50cyBob3cgbWFueSAxMCdzIGFyZSBpbiB0aGUgbnVtYmVyLlxuICAgIC8vIFRoaXMgc3lzdGVtIG9mIG51bWJlciBtYWduaXR1ZGUgd29ya3Mgd2VsbCBmb3Igcm91dGUgc3BlY2lmaWNpdHksIHRvby4gQSByb3V0ZSB3cml0dGVuIGFzXG4gICAgLy8gYGEvYi9jYCB3aWxsIGJlIG1vcmUgc3BlY2lmaWMgdGhhbiBgeC95L3pgIGFzIGxvbmcgYXMgYGFgIGlzIG1vcmUgc3BlY2lmaWMgdGhhblxuICAgIC8vIGB4YCwgaXJyZXNwZWN0aXZlIG9mIHRoZSBvdGhlciBwYXJ0cy5cbiAgICAvLyBCZWNhdXNlIG9mIHRoaXMgc2ltaWxhcml0eSwgd2UgYXNzaWduIGVhY2ggdHlwZSBvZiBzZWdtZW50IGEgbnVtYmVyIHZhbHVlIHdyaXR0ZW4gYXMgYVxuICAgIC8vIHN0cmluZy4gV2UgY2FuIGZpbmQgdGhlIHNwZWNpZmljaXR5IG9mIGNvbXBvdW5kIHJvdXRlcyBieSBjb25jYXRlbmF0aW5nIHRoZXNlIHN0cmluZ3NcbiAgICAvLyB0b2dldGhlciwgZnJvbSBsZWZ0IHRvIHJpZ2h0LiBBZnRlciB3ZSBoYXZlIGxvb3BlZCB0aHJvdWdoIGFsbCBvZiB0aGUgc2VnbWVudHMsXG4gICAgLy8gd2UgY29udmVydCB0aGUgc3RyaW5nIHRvIGEgbnVtYmVyLlxuICAgIHNwZWNpZmljaXR5LnZhbCA9ICcnO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzZWdtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbaV0sXG4gICAgICAgICAgbWF0Y2g7XG5cbiAgICAgIGlmIChtYXRjaCA9IHNlZ21lbnQubWF0Y2goL146KFteXFwvXSspJC8pKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgRHluYW1pY1NlZ21lbnQobWF0Y2hbMV0pKTtcbiAgICAgICAgbmFtZXMucHVzaChtYXRjaFsxXSk7XG4gICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnMyc7XG4gICAgICB9IGVsc2UgaWYgKG1hdGNoID0gc2VnbWVudC5tYXRjaCgvXlxcKihbXlxcL10rKSQvKSkge1xuICAgICAgICByZXN1bHRzLnB1c2gobmV3IFN0YXJTZWdtZW50KG1hdGNoWzFdKSk7XG4gICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnMic7XG4gICAgICAgIG5hbWVzLnB1c2gobWF0Y2hbMV0pO1xuICAgICAgfSBlbHNlIGlmIChzZWdtZW50ID09PSBcIlwiKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgRXBzaWxvblNlZ21lbnQoKSk7XG4gICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnMSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHRzLnB1c2gobmV3IFN0YXRpY1NlZ21lbnQoc2VnbWVudCkpO1xuICAgICAgICBzcGVjaWZpY2l0eS52YWwgKz0gJzQnO1xuICAgICAgfVxuICAgIH1cblxuICAgIHNwZWNpZmljaXR5LnZhbCA9ICtzcGVjaWZpY2l0eS52YWw7XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIC8vIEEgU3RhdGUgaGFzIGEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gYW5kIChgY2hhclNwZWNgKSBhbmQgYSBsaXN0IG9mIHBvc3NpYmxlXG4gIC8vIHN1YnNlcXVlbnQgc3RhdGVzIChgbmV4dFN0YXRlc2ApLlxuICAvL1xuICAvLyBJZiBhIFN0YXRlIGlzIGFuIGFjY2VwdGluZyBzdGF0ZSwgaXQgd2lsbCBhbHNvIGhhdmUgc2V2ZXJhbCBhZGRpdGlvbmFsXG4gIC8vIHByb3BlcnRpZXM6XG4gIC8vXG4gIC8vICogYHJlZ2V4YDogQSByZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBpcyB1c2VkIHRvIGV4dHJhY3QgcGFyYW1ldGVycyBmcm9tIHBhdGhzXG4gIC8vICAgdGhhdCByZWFjaGVkIHRoaXMgYWNjZXB0aW5nIHN0YXRlLlxuICAvLyAqIGBoYW5kbGVyc2A6IEluZm9ybWF0aW9uIG9uIGhvdyB0byBjb252ZXJ0IHRoZSBsaXN0IG9mIGNhcHR1cmVzIGludG8gY2FsbHNcbiAgLy8gICB0byByZWdpc3RlcmVkIGhhbmRsZXJzIHdpdGggdGhlIHNwZWNpZmllZCBwYXJhbWV0ZXJzXG4gIC8vICogYHR5cGVzYDogSG93IG1hbnkgc3RhdGljLCBkeW5hbWljIG9yIHN0YXIgc2VnbWVudHMgaW4gdGhpcyByb3V0ZS4gVXNlZCB0b1xuICAvLyAgIGRlY2lkZSB3aGljaCByb3V0ZSB0byB1c2UgaWYgbXVsdGlwbGUgcmVnaXN0ZXJlZCByb3V0ZXMgbWF0Y2ggYSBwYXRoLlxuICAvL1xuICAvLyBDdXJyZW50bHksIFN0YXRlIGlzIGltcGxlbWVudGVkIG5haXZlbHkgYnkgbG9vcGluZyBvdmVyIGBuZXh0U3RhdGVzYCBhbmRcbiAgLy8gY29tcGFyaW5nIGEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gYWdhaW5zdCBhIGNoYXJhY3Rlci4gQSBtb3JlIGVmZmljaWVudFxuICAvLyBpbXBsZW1lbnRhdGlvbiB3b3VsZCB1c2UgYSBoYXNoIG9mIGtleXMgcG9pbnRpbmcgYXQgb25lIG9yIG1vcmUgbmV4dCBzdGF0ZXMuXG5cbiAgZnVuY3Rpb24gU3RhdGUoY2hhclNwZWMpIHtcbiAgICB0aGlzLmNoYXJTcGVjID0gY2hhclNwZWM7XG4gICAgdGhpcy5uZXh0U3RhdGVzID0gW107XG4gIH1cblxuICBTdGF0ZS5wcm90b3R5cGUgPSB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoY2hhclNwZWMpIHtcbiAgICAgIHZhciBuZXh0U3RhdGVzID0gdGhpcy5uZXh0U3RhdGVzO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5leHRTdGF0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBjaGlsZCA9IG5leHRTdGF0ZXNbaV07XG5cbiAgICAgICAgdmFyIGlzRXF1YWwgPSBjaGlsZC5jaGFyU3BlYy52YWxpZENoYXJzID09PSBjaGFyU3BlYy52YWxpZENoYXJzO1xuICAgICAgICBpc0VxdWFsID0gaXNFcXVhbCAmJiBjaGlsZC5jaGFyU3BlYy5pbnZhbGlkQ2hhcnMgPT09IGNoYXJTcGVjLmludmFsaWRDaGFycztcblxuICAgICAgICBpZiAoaXNFcXVhbCkge1xuICAgICAgICAgIHJldHVybiBjaGlsZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBwdXQ6IGZ1bmN0aW9uIHB1dChjaGFyU3BlYykge1xuICAgICAgdmFyIHN0YXRlO1xuXG4gICAgICAvLyBJZiB0aGUgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gYWxyZWFkeSBleGlzdHMgaW4gYSBjaGlsZCBvZiB0aGUgY3VycmVudFxuICAgICAgLy8gc3RhdGUsIGp1c3QgcmV0dXJuIHRoYXQgc3RhdGUuXG4gICAgICBpZiAoc3RhdGUgPSB0aGlzLmdldChjaGFyU3BlYykpIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIGEgbmV3IHN0YXRlIGZvciB0aGUgY2hhcmFjdGVyIHNwZWNcbiAgICAgIHN0YXRlID0gbmV3IFN0YXRlKGNoYXJTcGVjKTtcblxuICAgICAgLy8gSW5zZXJ0IHRoZSBuZXcgc3RhdGUgYXMgYSBjaGlsZCBvZiB0aGUgY3VycmVudCBzdGF0ZVxuICAgICAgdGhpcy5uZXh0U3RhdGVzLnB1c2goc3RhdGUpO1xuXG4gICAgICAvLyBJZiB0aGlzIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIHJlcGVhdHMsIGluc2VydCB0aGUgbmV3IHN0YXRlIGFzIGEgY2hpbGRcbiAgICAgIC8vIG9mIGl0c2VsZi4gTm90ZSB0aGF0IHRoaXMgd2lsbCBub3QgdHJpZ2dlciBhbiBpbmZpbml0ZSBsb29wIGJlY2F1c2UgZWFjaFxuICAgICAgLy8gdHJhbnNpdGlvbiBkdXJpbmcgcmVjb2duaXRpb24gY29uc3VtZXMgYSBjaGFyYWN0ZXIuXG4gICAgICBpZiAoY2hhclNwZWMucmVwZWF0KSB7XG4gICAgICAgIHN0YXRlLm5leHRTdGF0ZXMucHVzaChzdGF0ZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJldHVybiB0aGUgbmV3IHN0YXRlXG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfSxcblxuICAgIC8vIEZpbmQgYSBsaXN0IG9mIGNoaWxkIHN0YXRlcyBtYXRjaGluZyB0aGUgbmV4dCBjaGFyYWN0ZXJcbiAgICBtYXRjaDogZnVuY3Rpb24gbWF0Y2goY2gpIHtcbiAgICAgIC8vIERFQlVHIFwiUHJvY2Vzc2luZyBgXCIgKyBjaCArIFwiYDpcIlxuICAgICAgdmFyIG5leHRTdGF0ZXMgPSB0aGlzLm5leHRTdGF0ZXMsXG4gICAgICAgICAgY2hpbGQsXG4gICAgICAgICAgY2hhclNwZWMsXG4gICAgICAgICAgY2hhcnM7XG5cbiAgICAgIC8vIERFQlVHIFwiICBcIiArIGRlYnVnU3RhdGUodGhpcylcbiAgICAgIHZhciByZXR1cm5lZCA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5leHRTdGF0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGNoaWxkID0gbmV4dFN0YXRlc1tpXTtcblxuICAgICAgICBjaGFyU3BlYyA9IGNoaWxkLmNoYXJTcGVjO1xuXG4gICAgICAgIGlmICh0eXBlb2YgKGNoYXJzID0gY2hhclNwZWMudmFsaWRDaGFycykgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaWYgKGNoYXJzLmluZGV4T2YoY2gpICE9PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuZWQucHVzaChjaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiAoY2hhcnMgPSBjaGFyU3BlYy5pbnZhbGlkQ2hhcnMpICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGlmIChjaGFycy5pbmRleE9mKGNoKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybmVkLnB1c2goY2hpbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmV0dXJuZWQ7XG4gICAgfVxuXG4gICAgLyoqIElGIERFQlVHXG4gICAgLCBkZWJ1ZzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY2hhclNwZWMgPSB0aGlzLmNoYXJTcGVjLFxuICAgICAgICAgIGRlYnVnID0gXCJbXCIsXG4gICAgICAgICAgY2hhcnMgPSBjaGFyU3BlYy52YWxpZENoYXJzIHx8IGNoYXJTcGVjLmludmFsaWRDaGFycztcbiAgICAgICBpZiAoY2hhclNwZWMuaW52YWxpZENoYXJzKSB7IGRlYnVnICs9IFwiXlwiOyB9XG4gICAgICBkZWJ1ZyArPSBjaGFycztcbiAgICAgIGRlYnVnICs9IFwiXVwiO1xuICAgICAgIGlmIChjaGFyU3BlYy5yZXBlYXQpIHsgZGVidWcgKz0gXCIrXCI7IH1cbiAgICAgICByZXR1cm4gZGVidWc7XG4gICAgfVxuICAgIEVORCBJRiAqKi9cbiAgfTtcblxuICAvKiogSUYgREVCVUdcbiAgZnVuY3Rpb24gZGVidWcobG9nKSB7XG4gICAgY29uc29sZS5sb2cobG9nKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlYnVnU3RhdGUoc3RhdGUpIHtcbiAgICByZXR1cm4gc3RhdGUubmV4dFN0YXRlcy5tYXAoZnVuY3Rpb24obikge1xuICAgICAgaWYgKG4ubmV4dFN0YXRlcy5sZW5ndGggPT09IDApIHsgcmV0dXJuIFwiKCBcIiArIG4uZGVidWcoKSArIFwiIFthY2NlcHRpbmddIClcIjsgfVxuICAgICAgcmV0dXJuIFwiKCBcIiArIG4uZGVidWcoKSArIFwiIDx0aGVuPiBcIiArIG4ubmV4dFN0YXRlcy5tYXAoZnVuY3Rpb24ocykgeyByZXR1cm4gcy5kZWJ1ZygpIH0pLmpvaW4oXCIgb3IgXCIpICsgXCIgKVwiO1xuICAgIH0pLmpvaW4oXCIsIFwiKVxuICB9XG4gIEVORCBJRiAqKi9cblxuICAvLyBTb3J0IHRoZSByb3V0ZXMgYnkgc3BlY2lmaWNpdHlcbiAgZnVuY3Rpb24gc29ydFNvbHV0aW9ucyhzdGF0ZXMpIHtcbiAgICByZXR1cm4gc3RhdGVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiBiLnNwZWNpZmljaXR5LnZhbCAtIGEuc3BlY2lmaWNpdHkudmFsO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVjb2duaXplQ2hhcihzdGF0ZXMsIGNoKSB7XG4gICAgdmFyIG5leHRTdGF0ZXMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gc3RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIHN0YXRlID0gc3RhdGVzW2ldO1xuXG4gICAgICBuZXh0U3RhdGVzID0gbmV4dFN0YXRlcy5jb25jYXQoc3RhdGUubWF0Y2goY2gpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV4dFN0YXRlcztcbiAgfVxuXG4gIHZhciBvQ3JlYXRlID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbiAocHJvdG8pIHtcbiAgICBmdW5jdGlvbiBGKCkge31cbiAgICBGLnByb3RvdHlwZSA9IHByb3RvO1xuICAgIHJldHVybiBuZXcgRigpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIFJlY29nbml6ZVJlc3VsdHMocXVlcnlQYXJhbXMpIHtcbiAgICB0aGlzLnF1ZXJ5UGFyYW1zID0gcXVlcnlQYXJhbXMgfHwge307XG4gIH1cbiAgUmVjb2duaXplUmVzdWx0cy5wcm90b3R5cGUgPSBvQ3JlYXRlKHtcbiAgICBzcGxpY2U6IEFycmF5LnByb3RvdHlwZS5zcGxpY2UsXG4gICAgc2xpY2U6IEFycmF5LnByb3RvdHlwZS5zbGljZSxcbiAgICBwdXNoOiBBcnJheS5wcm90b3R5cGUucHVzaCxcbiAgICBsZW5ndGg6IDAsXG4gICAgcXVlcnlQYXJhbXM6IG51bGxcbiAgfSk7XG5cbiAgZnVuY3Rpb24gZmluZEhhbmRsZXIoc3RhdGUsIHBhdGgsIHF1ZXJ5UGFyYW1zKSB7XG4gICAgdmFyIGhhbmRsZXJzID0gc3RhdGUuaGFuZGxlcnMsXG4gICAgICAgIHJlZ2V4ID0gc3RhdGUucmVnZXg7XG4gICAgdmFyIGNhcHR1cmVzID0gcGF0aC5tYXRjaChyZWdleCksXG4gICAgICAgIGN1cnJlbnRDYXB0dXJlID0gMTtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IFJlY29nbml6ZVJlc3VsdHMocXVlcnlQYXJhbXMpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBoYW5kbGVyID0gaGFuZGxlcnNbaV0sXG4gICAgICAgICAgbmFtZXMgPSBoYW5kbGVyLm5hbWVzLFxuICAgICAgICAgIHBhcmFtcyA9IHt9O1xuXG4gICAgICBmb3IgKHZhciBqID0gMCwgbSA9IG5hbWVzLmxlbmd0aDsgaiA8IG07IGorKykge1xuICAgICAgICBwYXJhbXNbbmFtZXNbal1dID0gY2FwdHVyZXNbY3VycmVudENhcHR1cmUrK107XG4gICAgICB9XG5cbiAgICAgIHJlc3VsdC5wdXNoKHsgaGFuZGxlcjogaGFuZGxlci5oYW5kbGVyLCBwYXJhbXM6IHBhcmFtcywgaXNEeW5hbWljOiAhIW5hbWVzLmxlbmd0aCB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkU2VnbWVudChjdXJyZW50U3RhdGUsIHNlZ21lbnQpIHtcbiAgICBzZWdtZW50LmVhY2hDaGFyKGZ1bmN0aW9uIChjaCkge1xuICAgICAgdmFyIHN0YXRlO1xuXG4gICAgICBjdXJyZW50U3RhdGUgPSBjdXJyZW50U3RhdGUucHV0KGNoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBjdXJyZW50U3RhdGU7XG4gIH1cblxuICBmdW5jdGlvbiBkZWNvZGVRdWVyeVBhcmFtUGFydChwYXJ0KSB7XG4gICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDQwMS9pbnRlcmFjdC9mb3Jtcy5odG1sI2gtMTcuMTMuNC4xXG4gICAgcGFydCA9IHBhcnQucmVwbGFjZSgvXFwrL2dtLCAnJTIwJyk7XG4gICAgcmV0dXJuIHRyeURlY29kZShwYXJ0LCB0cnVlKTtcbiAgfVxuXG4gIC8vIFRoZSBtYWluIGludGVyZmFjZVxuXG4gIHZhciBSb3V0ZVJlY29nbml6ZXIgPSBmdW5jdGlvbiBSb3V0ZVJlY29nbml6ZXIoKSB7XG4gICAgdGhpcy5yb290U3RhdGUgPSBuZXcgU3RhdGUoKTtcbiAgICB0aGlzLm5hbWVzID0ge307XG4gIH07XG5cbiAgUm91dGVSZWNvZ25pemVyLnByb3RvdHlwZSA9IHtcbiAgICBhZGQ6IGZ1bmN0aW9uIGFkZChyb3V0ZXMsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBjdXJyZW50U3RhdGUgPSB0aGlzLnJvb3RTdGF0ZSxcbiAgICAgICAgICByZWdleCA9IFwiXlwiLFxuICAgICAgICAgIHNwZWNpZmljaXR5ID0ge30sXG4gICAgICAgICAgaGFuZGxlcnMgPSBbXSxcbiAgICAgICAgICBhbGxTZWdtZW50cyA9IFtdLFxuICAgICAgICAgIG5hbWU7XG5cbiAgICAgIHZhciBpc0VtcHR5ID0gdHJ1ZTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSByb3V0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciByb3V0ZSA9IHJvdXRlc1tpXSxcbiAgICAgICAgICAgIG5hbWVzID0gW107XG5cbiAgICAgICAgdmFyIHNlZ21lbnRzID0gcGFyc2Uocm91dGUucGF0aCwgbmFtZXMsIHNwZWNpZmljaXR5KTtcblxuICAgICAgICBhbGxTZWdtZW50cyA9IGFsbFNlZ21lbnRzLmNvbmNhdChzZWdtZW50cyk7XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IDAsIG0gPSBzZWdtZW50cy5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICAgICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2pdO1xuXG4gICAgICAgICAgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBFcHNpbG9uU2VnbWVudCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuXG4gICAgICAgICAgLy8gQWRkIGEgXCIvXCIgZm9yIHRoZSBuZXcgc2VnbWVudFxuICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRTdGF0ZS5wdXQoeyB2YWxpZENoYXJzOiBcIi9cIiB9KTtcbiAgICAgICAgICByZWdleCArPSBcIi9cIjtcblxuICAgICAgICAgIC8vIEFkZCBhIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBzZWdtZW50IHRvIHRoZSBORkEgYW5kIHJlZ2V4XG4gICAgICAgICAgY3VycmVudFN0YXRlID0gYWRkU2VnbWVudChjdXJyZW50U3RhdGUsIHNlZ21lbnQpO1xuICAgICAgICAgIHJlZ2V4ICs9IHNlZ21lbnQucmVnZXgoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoYW5kbGVyID0geyBoYW5kbGVyOiByb3V0ZS5oYW5kbGVyLCBuYW1lczogbmFtZXMgfTtcbiAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzRW1wdHkpIHtcbiAgICAgICAgY3VycmVudFN0YXRlID0gY3VycmVudFN0YXRlLnB1dCh7IHZhbGlkQ2hhcnM6IFwiL1wiIH0pO1xuICAgICAgICByZWdleCArPSBcIi9cIjtcbiAgICAgIH1cblxuICAgICAgY3VycmVudFN0YXRlLmhhbmRsZXJzID0gaGFuZGxlcnM7XG4gICAgICBjdXJyZW50U3RhdGUucmVnZXggPSBuZXcgUmVnRXhwKHJlZ2V4ICsgXCIkXCIpO1xuICAgICAgY3VycmVudFN0YXRlLnNwZWNpZmljaXR5ID0gc3BlY2lmaWNpdHk7XG5cbiAgICAgIGlmIChuYW1lID0gb3B0aW9ucyAmJiBvcHRpb25zLmFzKSB7XG4gICAgICAgIHRoaXMubmFtZXNbbmFtZV0gPSB7XG4gICAgICAgICAgc2VnbWVudHM6IGFsbFNlZ21lbnRzLFxuICAgICAgICAgIGhhbmRsZXJzOiBoYW5kbGVyc1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBoYW5kbGVyc0ZvcjogZnVuY3Rpb24gaGFuZGxlcnNGb3IobmFtZSkge1xuICAgICAgdmFyIHJvdXRlID0gdGhpcy5uYW1lc1tuYW1lXSxcbiAgICAgICAgICByZXN1bHQgPSBbXTtcbiAgICAgIGlmICghcm91dGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgbm8gcm91dGUgbmFtZWQgXCIgKyBuYW1lKTtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSByb3V0ZS5oYW5kbGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgcmVzdWx0LnB1c2gocm91dGUuaGFuZGxlcnNbaV0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICBoYXNSb3V0ZTogZnVuY3Rpb24gaGFzUm91dGUobmFtZSkge1xuICAgICAgcmV0dXJuICEhdGhpcy5uYW1lc1tuYW1lXTtcbiAgICB9LFxuXG4gICAgZ2VuZXJhdGU6IGZ1bmN0aW9uIGdlbmVyYXRlKG5hbWUsIHBhcmFtcykge1xuICAgICAgdmFyIHJvdXRlID0gdGhpcy5uYW1lc1tuYW1lXSxcbiAgICAgICAgICBvdXRwdXQgPSBcIlwiO1xuICAgICAgaWYgKCFyb3V0ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGVyZSBpcyBubyByb3V0ZSBuYW1lZCBcIiArIG5hbWUpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2VnbWVudHMgPSByb3V0ZS5zZWdtZW50cztcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzZWdtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50c1tpXTtcblxuICAgICAgICBpZiAoc2VnbWVudCBpbnN0YW5jZW9mIEVwc2lsb25TZWdtZW50KSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBvdXRwdXQgKz0gXCIvXCI7XG4gICAgICAgIG91dHB1dCArPSBzZWdtZW50LmdlbmVyYXRlKHBhcmFtcyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvdXRwdXQuY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgICAgb3V0cHV0ID0gJy8nICsgb3V0cHV0O1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5xdWVyeVBhcmFtcykge1xuICAgICAgICBvdXRwdXQgKz0gdGhpcy5nZW5lcmF0ZVF1ZXJ5U3RyaW5nKHBhcmFtcy5xdWVyeVBhcmFtcyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfSxcblxuICAgIGdlbmVyYXRlUXVlcnlTdHJpbmc6IGZ1bmN0aW9uIGdlbmVyYXRlUXVlcnlTdHJpbmcocGFyYW1zKSB7XG4gICAgICB2YXIgcGFpcnMgPSBbXTtcbiAgICAgIHZhciBrZXlzID0gW107XG4gICAgICBmb3IgKHZhciBrZXkgaW4gcGFyYW1zKSB7XG4gICAgICAgIGlmIChwYXJhbXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBrZXlzLnNvcnQoKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBrZXlzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgIHZhciB2YWx1ZSA9IHBhcmFtc1trZXldO1xuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYWlyID0gZW5jb2RlVVJJQ29tcG9uZW50KGtleSk7XG4gICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgIGZvciAodmFyIGogPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBqIDwgbDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgYXJyYXlQYWlyID0ga2V5ICsgJ1tdJyArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZVtqXSk7XG4gICAgICAgICAgICBwYWlycy5wdXNoKGFycmF5UGFpcik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhaXIgKz0gXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuICAgICAgICAgIHBhaXJzLnB1c2gocGFpcik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHBhaXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBcIj9cIiArIHBhaXJzLmpvaW4oXCImXCIpO1xuICAgIH0sXG5cbiAgICBwYXJzZVF1ZXJ5U3RyaW5nOiBmdW5jdGlvbiBwYXJzZVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nKSB7XG4gICAgICB2YXIgcGFpcnMgPSBxdWVyeVN0cmluZy5zcGxpdChcIiZcIiksXG4gICAgICAgICAgcXVlcnlQYXJhbXMgPSB7fTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFpcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHBhaXIgPSBwYWlyc1tpXS5zcGxpdCgnPScpLFxuICAgICAgICAgICAga2V5ID0gZGVjb2RlUXVlcnlQYXJhbVBhcnQocGFpclswXSksXG4gICAgICAgICAgICBrZXlMZW5ndGggPSBrZXkubGVuZ3RoLFxuICAgICAgICAgICAgaXNBcnJheSA9IGZhbHNlLFxuICAgICAgICAgICAgdmFsdWU7XG4gICAgICAgIGlmIChwYWlyLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIHZhbHVlID0gJ3RydWUnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vSGFuZGxlIGFycmF5c1xuICAgICAgICAgIGlmIChrZXlMZW5ndGggPiAyICYmIGtleS5zbGljZShrZXlMZW5ndGggLSAyKSA9PT0gJ1tdJykge1xuICAgICAgICAgICAgaXNBcnJheSA9IHRydWU7XG4gICAgICAgICAgICBrZXkgPSBrZXkuc2xpY2UoMCwga2V5TGVuZ3RoIC0gMik7XG4gICAgICAgICAgICBpZiAoIXF1ZXJ5UGFyYW1zW2tleV0pIHtcbiAgICAgICAgICAgICAgcXVlcnlQYXJhbXNba2V5XSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB2YWx1ZSA9IHBhaXJbMV0gPyBkZWNvZGVRdWVyeVBhcmFtUGFydChwYWlyWzFdKSA6ICcnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FycmF5KSB7XG4gICAgICAgICAgcXVlcnlQYXJhbXNba2V5XS5wdXNoKHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBxdWVyeVBhcmFtc1trZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBxdWVyeVBhcmFtcztcbiAgICB9LFxuXG4gICAgcmVjb2duaXplOiBmdW5jdGlvbiByZWNvZ25pemUocGF0aCwgc2lsZW50KSB7XG4gICAgICBub1dhcm5pbmcgPSBzaWxlbnQ7XG4gICAgICB2YXIgc3RhdGVzID0gW3RoaXMucm9vdFN0YXRlXSxcbiAgICAgICAgICBwYXRoTGVuLFxuICAgICAgICAgIGksXG4gICAgICAgICAgbCxcbiAgICAgICAgICBxdWVyeVN0YXJ0LFxuICAgICAgICAgIHF1ZXJ5UGFyYW1zID0ge30sXG4gICAgICAgICAgaXNTbGFzaERyb3BwZWQgPSBmYWxzZTtcblxuICAgICAgcXVlcnlTdGFydCA9IHBhdGguaW5kZXhPZignPycpO1xuICAgICAgaWYgKHF1ZXJ5U3RhcnQgIT09IC0xKSB7XG4gICAgICAgIHZhciBxdWVyeVN0cmluZyA9IHBhdGguc3Vic3RyKHF1ZXJ5U3RhcnQgKyAxLCBwYXRoLmxlbmd0aCk7XG4gICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cigwLCBxdWVyeVN0YXJ0KTtcbiAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbXMgPSB0aGlzLnBhcnNlUXVlcnlTdHJpbmcocXVlcnlTdHJpbmcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHBhdGggPSB0cnlEZWNvZGUocGF0aCk7XG4gICAgICBpZiAoIXBhdGgpIHJldHVybjtcblxuICAgICAgLy8gREVCVUcgR1JPVVAgcGF0aFxuXG4gICAgICBpZiAocGF0aC5jaGFyQXQoMCkgIT09IFwiL1wiKSB7XG4gICAgICAgIHBhdGggPSBcIi9cIiArIHBhdGg7XG4gICAgICB9XG5cbiAgICAgIHBhdGhMZW4gPSBwYXRoLmxlbmd0aDtcbiAgICAgIGlmIChwYXRoTGVuID4gMSAmJiBwYXRoLmNoYXJBdChwYXRoTGVuIC0gMSkgPT09IFwiL1wiKSB7XG4gICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cigwLCBwYXRoTGVuIC0gMSk7XG4gICAgICAgIGlzU2xhc2hEcm9wcGVkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgZm9yIChpID0gMCwgbCA9IHBhdGgubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHN0YXRlcyA9IHJlY29nbml6ZUNoYXIoc3RhdGVzLCBwYXRoLmNoYXJBdChpKSk7XG4gICAgICAgIGlmICghc3RhdGVzLmxlbmd0aCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEVORCBERUJVRyBHUk9VUFxuXG4gICAgICB2YXIgc29sdXRpb25zID0gW107XG4gICAgICBmb3IgKGkgPSAwLCBsID0gc3RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoc3RhdGVzW2ldLmhhbmRsZXJzKSB7XG4gICAgICAgICAgc29sdXRpb25zLnB1c2goc3RhdGVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzdGF0ZXMgPSBzb3J0U29sdXRpb25zKHNvbHV0aW9ucyk7XG5cbiAgICAgIHZhciBzdGF0ZSA9IHNvbHV0aW9uc1swXTtcblxuICAgICAgaWYgKHN0YXRlICYmIHN0YXRlLmhhbmRsZXJzKSB7XG4gICAgICAgIC8vIGlmIGEgdHJhaWxpbmcgc2xhc2ggd2FzIGRyb3BwZWQgYW5kIGEgc3RhciBzZWdtZW50IGlzIHRoZSBsYXN0IHNlZ21lbnRcbiAgICAgICAgLy8gc3BlY2lmaWVkLCBwdXQgdGhlIHRyYWlsaW5nIHNsYXNoIGJhY2tcbiAgICAgICAgaWYgKGlzU2xhc2hEcm9wcGVkICYmIHN0YXRlLnJlZ2V4LnNvdXJjZS5zbGljZSgtNSkgPT09IFwiKC4rKSRcIikge1xuICAgICAgICAgIHBhdGggPSBwYXRoICsgXCIvXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbmRIYW5kbGVyKHN0YXRlLCBwYXRoLCBxdWVyeVBhcmFtcyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIFJvdXRlUmVjb2duaXplci5wcm90b3R5cGUubWFwID0gbWFwO1xuXG4gIHZhciBnZW5RdWVyeSA9IFJvdXRlUmVjb2duaXplci5wcm90b3R5cGUuZ2VuZXJhdGVRdWVyeVN0cmluZztcblxuICAvLyBleHBvcnQgZGVmYXVsdCBmb3IgaG9sZGluZyB0aGUgVnVlIHJlZmVyZW5jZVxuICB2YXIgZXhwb3J0cyQxID0ge307XG4gIC8qKlxuICAgKiBXYXJuIHN0dWZmLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbXNnXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHdhcm4kMShtc2cpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1t2dWUtcm91dGVyXSAnICsgbXNnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzb2x2ZSBhIHJlbGF0aXZlIHBhdGguXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBiYXNlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSByZWxhdGl2ZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGFwcGVuZFxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlc29sdmVQYXRoKGJhc2UsIHJlbGF0aXZlLCBhcHBlbmQpIHtcbiAgICB2YXIgcXVlcnkgPSBiYXNlLm1hdGNoKC8oXFw/LiopJC8pO1xuICAgIGlmIChxdWVyeSkge1xuICAgICAgcXVlcnkgPSBxdWVyeVsxXTtcbiAgICAgIGJhc2UgPSBiYXNlLnNsaWNlKDAsIC1xdWVyeS5sZW5ndGgpO1xuICAgIH1cbiAgICAvLyBhIHF1ZXJ5IVxuICAgIGlmIChyZWxhdGl2ZS5jaGFyQXQoMCkgPT09ICc/Jykge1xuICAgICAgcmV0dXJuIGJhc2UgKyByZWxhdGl2ZTtcbiAgICB9XG4gICAgdmFyIHN0YWNrID0gYmFzZS5zcGxpdCgnLycpO1xuICAgIC8vIHJlbW92ZSB0cmFpbGluZyBzZWdtZW50IGlmOlxuICAgIC8vIC0gbm90IGFwcGVuZGluZ1xuICAgIC8vIC0gYXBwZW5kaW5nIHRvIHRyYWlsaW5nIHNsYXNoIChsYXN0IHNlZ21lbnQgaXMgZW1wdHkpXG4gICAgaWYgKCFhcHBlbmQgfHwgIXN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdKSB7XG4gICAgICBzdGFjay5wb3AoKTtcbiAgICB9XG4gICAgLy8gcmVzb2x2ZSByZWxhdGl2ZSBwYXRoXG4gICAgdmFyIHNlZ21lbnRzID0gcmVsYXRpdmUucmVwbGFjZSgvXlxcLy8sICcnKS5zcGxpdCgnLycpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbaV07XG4gICAgICBpZiAoc2VnbWVudCA9PT0gJy4nKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIGlmIChzZWdtZW50ID09PSAnLi4nKSB7XG4gICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhY2sucHVzaChzZWdtZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gZW5zdXJlIGxlYWRpbmcgc2xhc2hcbiAgICBpZiAoc3RhY2tbMF0gIT09ICcnKSB7XG4gICAgICBzdGFjay51bnNoaWZ0KCcnKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YWNrLmpvaW4oJy8nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JnaXZpbmcgY2hlY2sgZm9yIGEgcHJvbWlzZVxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gcFxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cblxuICBmdW5jdGlvbiBpc1Byb21pc2UocCkge1xuICAgIHJldHVybiBwICYmIHR5cGVvZiBwLnRoZW4gPT09ICdmdW5jdGlvbic7XG4gIH1cblxuICAvKipcbiAgICogUmV0cml2ZSBhIHJvdXRlIGNvbmZpZyBmaWVsZCBmcm9tIGEgY29tcG9uZW50IGluc3RhbmNlXG4gICAqIE9SIGEgY29tcG9uZW50IGNvbnRydWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb258VnVlfSBjb21wb25lbnRcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7Kn1cbiAgICovXG5cbiAgZnVuY3Rpb24gZ2V0Um91dGVDb25maWcoY29tcG9uZW50LCBuYW1lKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBjb21wb25lbnQgJiYgKGNvbXBvbmVudC4kb3B0aW9ucyB8fCBjb21wb25lbnQub3B0aW9ucyk7XG4gICAgcmV0dXJuIG9wdGlvbnMgJiYgb3B0aW9ucy5yb3V0ZSAmJiBvcHRpb25zLnJvdXRlW25hbWVdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc29sdmUgYW4gYXN5bmMgY29tcG9uZW50IGZhY3RvcnkuIEhhdmUgdG8gZG8gYSBkaXJ0eVxuICAgKiBtb2NrIGhlcmUgYmVjYXVzZSBvZiBWdWUgY29yZSdzIGludGVybmFsIEFQSSBkZXBlbmRzIG9uXG4gICAqIGFuIElEIGNoZWNrLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgKi9cblxuICB2YXIgcmVzb2x2ZXIgPSB1bmRlZmluZWQ7XG5cbiAgZnVuY3Rpb24gcmVzb2x2ZUFzeW5jQ29tcG9uZW50KGhhbmRsZXIsIGNiKSB7XG4gICAgaWYgKCFyZXNvbHZlcikge1xuICAgICAgcmVzb2x2ZXIgPSB7XG4gICAgICAgIHJlc29sdmU6IGV4cG9ydHMkMS5WdWUucHJvdG90eXBlLl9yZXNvbHZlQ29tcG9uZW50LFxuICAgICAgICAkb3B0aW9uczoge1xuICAgICAgICAgIGNvbXBvbmVudHM6IHtcbiAgICAgICAgICAgIF86IGhhbmRsZXIuY29tcG9uZW50XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNvbHZlci4kb3B0aW9ucy5jb21wb25lbnRzLl8gPSBoYW5kbGVyLmNvbXBvbmVudDtcbiAgICB9XG4gICAgcmVzb2x2ZXIucmVzb2x2ZSgnXycsIGZ1bmN0aW9uIChDb21wb25lbnQpIHtcbiAgICAgIGhhbmRsZXIuY29tcG9uZW50ID0gQ29tcG9uZW50O1xuICAgICAgY2IoQ29tcG9uZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXAgdGhlIGR5bmFtaWMgc2VnbWVudHMgaW4gYSBwYXRoIHRvIHBhcmFtcy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtc1xuICAgKiBAcGFyYW0ge09iamVjdH0gcXVlcnlcbiAgICovXG5cbiAgZnVuY3Rpb24gbWFwUGFyYW1zKHBhdGgsIHBhcmFtcywgcXVlcnkpIHtcbiAgICBpZiAocGFyYW1zID09PSB1bmRlZmluZWQpIHBhcmFtcyA9IHt9O1xuXG4gICAgcGF0aCA9IHBhdGgucmVwbGFjZSgvOihbXlxcL10rKS9nLCBmdW5jdGlvbiAoXywga2V5KSB7XG4gICAgICB2YXIgdmFsID0gcGFyYW1zW2tleV07XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICghdmFsKSB7XG4gICAgICAgIHdhcm4kMSgncGFyYW0gXCInICsga2V5ICsgJ1wiIG5vdCBmb3VuZCB3aGVuIGdlbmVyYXRpbmcgJyArICdwYXRoIGZvciBcIicgKyBwYXRoICsgJ1wiIHdpdGggcGFyYW1zICcgKyBKU09OLnN0cmluZ2lmeShwYXJhbXMpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWwgfHwgJyc7XG4gICAgfSk7XG4gICAgaWYgKHF1ZXJ5KSB7XG4gICAgICBwYXRoICs9IGdlblF1ZXJ5KHF1ZXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGg7XG4gIH1cblxuICB2YXIgaGFzaFJFID0gLyMuKiQvO1xuXG4gIHZhciBIVE1MNUhpc3RvcnkgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEhUTUw1SGlzdG9yeShfcmVmKSB7XG4gICAgICB2YXIgcm9vdCA9IF9yZWYucm9vdDtcbiAgICAgIHZhciBvbkNoYW5nZSA9IF9yZWYub25DaGFuZ2U7XG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgSFRNTDVIaXN0b3J5KTtcblxuICAgICAgaWYgKHJvb3QgJiYgcm9vdCAhPT0gJy8nKSB7XG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0aGVyZSdzIHRoZSBzdGFydGluZyBzbGFzaFxuICAgICAgICBpZiAocm9vdC5jaGFyQXQoMCkgIT09ICcvJykge1xuICAgICAgICAgIHJvb3QgPSAnLycgKyByb290O1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlbW92ZSB0cmFpbGluZyBzbGFzaFxuICAgICAgICB0aGlzLnJvb3QgPSByb290LnJlcGxhY2UoL1xcLyQvLCAnJyk7XG4gICAgICAgIHRoaXMucm9vdFJFID0gbmV3IFJlZ0V4cCgnXlxcXFwnICsgdGhpcy5yb290KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucm9vdCA9IG51bGw7XG4gICAgICB9XG4gICAgICB0aGlzLm9uQ2hhbmdlID0gb25DaGFuZ2U7XG4gICAgICAvLyBjaGVjayBiYXNlIHRhZ1xuICAgICAgdmFyIGJhc2VFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Jhc2UnKTtcbiAgICAgIHRoaXMuYmFzZSA9IGJhc2VFbCAmJiBiYXNlRWwuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG4gICAgfVxuXG4gICAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciB1cmwgPSBsb2NhdGlvbi5wYXRobmFtZSArIGxvY2F0aW9uLnNlYXJjaDtcbiAgICAgICAgaWYgKF90aGlzLnJvb3QpIHtcbiAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZShfdGhpcy5yb290UkUsICcnKTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5vbkNoYW5nZSh1cmwsIGUgJiYgZS5zdGF0ZSwgbG9jYXRpb24uaGFzaCk7XG4gICAgICB9O1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5saXN0ZW5lcik7XG4gICAgICB0aGlzLmxpc3RlbmVyKCk7XG4gICAgfTtcblxuICAgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICB9O1xuXG4gICAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvKHBhdGgsIHJlcGxhY2UsIGFwcGVuZCkge1xuICAgICAgdmFyIHVybCA9IHRoaXMuZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpO1xuICAgICAgaWYgKHJlcGxhY2UpIHtcbiAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sICcnLCB1cmwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcmVjb3JkIHNjcm9sbCBwb3NpdGlvbiBieSByZXBsYWNpbmcgY3VycmVudCBzdGF0ZVxuICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZSh7XG4gICAgICAgICAgcG9zOiB7XG4gICAgICAgICAgICB4OiB3aW5kb3cucGFnZVhPZmZzZXQsXG4gICAgICAgICAgICB5OiB3aW5kb3cucGFnZVlPZmZzZXRcbiAgICAgICAgICB9XG4gICAgICAgIH0sICcnLCBsb2NhdGlvbi5ocmVmKTtcbiAgICAgICAgLy8gdGhlbiBwdXNoIG5ldyBzdGF0ZVxuICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZSh7fSwgJycsIHVybCk7XG4gICAgICB9XG4gICAgICB2YXIgaGFzaE1hdGNoID0gcGF0aC5tYXRjaChoYXNoUkUpO1xuICAgICAgdmFyIGhhc2ggPSBoYXNoTWF0Y2ggJiYgaGFzaE1hdGNoWzBdO1xuICAgICAgcGF0aCA9IHVybFxuICAgICAgLy8gc3RyaXAgaGFzaCBzbyBpdCBkb2Vzbid0IG1lc3MgdXAgcGFyYW1zXG4gICAgICAucmVwbGFjZShoYXNoUkUsICcnKVxuICAgICAgLy8gcmVtb3ZlIHJvb3QgYmVmb3JlIG1hdGNoaW5nXG4gICAgICAucmVwbGFjZSh0aGlzLnJvb3RSRSwgJycpO1xuICAgICAgdGhpcy5vbkNoYW5nZShwYXRoLCBudWxsLCBoYXNoKTtcbiAgICB9O1xuXG4gICAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5mb3JtYXRQYXRoID0gZnVuY3Rpb24gZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpIHtcbiAgICAgIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nXG4gICAgICAvLyBhYnNvbHV0ZSBwYXRoXG4gICAgICA/IHRoaXMucm9vdCA/IHRoaXMucm9vdCArICcvJyArIHBhdGgucmVwbGFjZSgvXlxcLy8sICcnKSA6IHBhdGggOiByZXNvbHZlUGF0aCh0aGlzLmJhc2UgfHwgbG9jYXRpb24ucGF0aG5hbWUsIHBhdGgsIGFwcGVuZCk7XG4gICAgfTtcblxuICAgIHJldHVybiBIVE1MNUhpc3Rvcnk7XG4gIH0pKCk7XG5cbiAgdmFyIEhhc2hIaXN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIYXNoSGlzdG9yeShfcmVmKSB7XG4gICAgICB2YXIgaGFzaGJhbmcgPSBfcmVmLmhhc2hiYW5nO1xuICAgICAgdmFyIG9uQ2hhbmdlID0gX3JlZi5vbkNoYW5nZTtcbiAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBIYXNoSGlzdG9yeSk7XG5cbiAgICAgIHRoaXMuaGFzaGJhbmcgPSBoYXNoYmFuZztcbiAgICAgIHRoaXMub25DaGFuZ2UgPSBvbkNoYW5nZTtcbiAgICB9XG5cbiAgICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwYXRoID0gbG9jYXRpb24uaGFzaDtcbiAgICAgICAgdmFyIHJhdyA9IHBhdGgucmVwbGFjZSgvXiMhPy8sICcnKTtcbiAgICAgICAgLy8gYWx3YXlzXG4gICAgICAgIGlmIChyYXcuY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgICAgICByYXcgPSAnLycgKyByYXc7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZvcm1hdHRlZFBhdGggPSBzZWxmLmZvcm1hdFBhdGgocmF3KTtcbiAgICAgICAgaWYgKGZvcm1hdHRlZFBhdGggIT09IHBhdGgpIHtcbiAgICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKGZvcm1hdHRlZFBhdGgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBkZXRlcm1pbmUgcXVlcnlcbiAgICAgICAgLy8gbm90ZSBpdCdzIHBvc3NpYmxlIHRvIGhhdmUgcXVlcmllcyBpbiBib3RoIHRoZSBhY3R1YWwgVVJMXG4gICAgICAgIC8vIGFuZCB0aGUgaGFzaCBmcmFnbWVudCBpdHNlbGYuXG4gICAgICAgIHZhciBxdWVyeSA9IGxvY2F0aW9uLnNlYXJjaCAmJiBwYXRoLmluZGV4T2YoJz8nKSA+IC0xID8gJyYnICsgbG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpIDogbG9jYXRpb24uc2VhcmNoO1xuICAgICAgICBzZWxmLm9uQ2hhbmdlKHBhdGgucmVwbGFjZSgvXiMhPy8sICcnKSArIHF1ZXJ5KTtcbiAgICAgIH07XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuICAgICAgdGhpcy5saXN0ZW5lcigpO1xuICAgIH07XG5cbiAgICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuICAgIH07XG5cbiAgICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyhwYXRoLCByZXBsYWNlLCBhcHBlbmQpIHtcbiAgICAgIHBhdGggPSB0aGlzLmZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKTtcbiAgICAgIGlmIChyZXBsYWNlKSB7XG4gICAgICAgIGxvY2F0aW9uLnJlcGxhY2UocGF0aCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2NhdGlvbi5oYXNoID0gcGF0aDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLmZvcm1hdFBhdGggPSBmdW5jdGlvbiBmb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCkge1xuICAgICAgdmFyIGlzQWJzb2xvdXRlID0gcGF0aC5jaGFyQXQoMCkgPT09ICcvJztcbiAgICAgIHZhciBwcmVmaXggPSAnIycgKyAodGhpcy5oYXNoYmFuZyA/ICchJyA6ICcnKTtcbiAgICAgIHJldHVybiBpc0Fic29sb3V0ZSA/IHByZWZpeCArIHBhdGggOiBwcmVmaXggKyByZXNvbHZlUGF0aChsb2NhdGlvbi5oYXNoLnJlcGxhY2UoL14jIT8vLCAnJyksIHBhdGgsIGFwcGVuZCk7XG4gICAgfTtcblxuICAgIHJldHVybiBIYXNoSGlzdG9yeTtcbiAgfSkoKTtcblxuICB2YXIgQWJzdHJhY3RIaXN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBYnN0cmFjdEhpc3RvcnkoX3JlZikge1xuICAgICAgdmFyIG9uQ2hhbmdlID0gX3JlZi5vbkNoYW5nZTtcbiAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBBYnN0cmFjdEhpc3RvcnkpO1xuXG4gICAgICB0aGlzLm9uQ2hhbmdlID0gb25DaGFuZ2U7XG4gICAgICB0aGlzLmN1cnJlbnRQYXRoID0gJy8nO1xuICAgIH1cblxuICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgIHRoaXMub25DaGFuZ2UoJy8nKTtcbiAgICB9O1xuXG4gICAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gc3RvcCgpIHtcbiAgICAgIC8vIG5vb3BcbiAgICB9O1xuXG4gICAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvKHBhdGgsIHJlcGxhY2UsIGFwcGVuZCkge1xuICAgICAgcGF0aCA9IHRoaXMuY3VycmVudFBhdGggPSB0aGlzLmZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKTtcbiAgICAgIHRoaXMub25DaGFuZ2UocGF0aCk7XG4gICAgfTtcblxuICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuZm9ybWF0UGF0aCA9IGZ1bmN0aW9uIGZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKSB7XG4gICAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJyA/IHBhdGggOiByZXNvbHZlUGF0aCh0aGlzLmN1cnJlbnRQYXRoLCBwYXRoLCBhcHBlbmQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQWJzdHJhY3RIaXN0b3J5O1xuICB9KSgpO1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgdGhlIHJldXNhYmlsaXR5IG9mIGFuIGV4aXN0aW5nIHJvdXRlciB2aWV3LlxuICAgKlxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICovXG5cbiAgZnVuY3Rpb24gY2FuUmV1c2UodmlldywgaGFuZGxlciwgdHJhbnNpdGlvbikge1xuICAgIHZhciBjb21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG4gICAgaWYgKCFjb21wb25lbnQgfHwgIWhhbmRsZXIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gaW1wb3J0YW50OiBjaGVjayB2aWV3LkNvbXBvbmVudCBoZXJlIGJlY2F1c2UgaXQgbWF5XG4gICAgLy8gaGF2ZSBiZWVuIGNoYW5nZWQgaW4gYWN0aXZhdGUgaG9va1xuICAgIGlmICh2aWV3LkNvbXBvbmVudCAhPT0gaGFuZGxlci5jb21wb25lbnQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIGNhblJldXNlRm4gPSBnZXRSb3V0ZUNvbmZpZyhjb21wb25lbnQsICdjYW5SZXVzZScpO1xuICAgIHJldHVybiB0eXBlb2YgY2FuUmV1c2VGbiA9PT0gJ2Jvb2xlYW4nID8gY2FuUmV1c2VGbiA6IGNhblJldXNlRm4gPyBjYW5SZXVzZUZuLmNhbGwoY29tcG9uZW50LCB7XG4gICAgICB0bzogdHJhbnNpdGlvbi50byxcbiAgICAgIGZyb206IHRyYW5zaXRpb24uZnJvbVxuICAgIH0pIDogdHJ1ZTsgLy8gZGVmYXVsdHMgdG8gdHJ1ZVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgY29tcG9uZW50IGNhbiBkZWFjdGl2YXRlLlxuICAgKlxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dFxuICAgKi9cblxuICBmdW5jdGlvbiBjYW5EZWFjdGl2YXRlKHZpZXcsIHRyYW5zaXRpb24sIG5leHQpIHtcbiAgICB2YXIgZnJvbUNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcbiAgICB2YXIgaG9vayA9IGdldFJvdXRlQ29uZmlnKGZyb21Db21wb25lbnQsICdjYW5EZWFjdGl2YXRlJyk7XG4gICAgaWYgKCFob29rKSB7XG4gICAgICBuZXh0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyYW5zaXRpb24uY2FsbEhvb2soaG9vaywgZnJvbUNvbXBvbmVudCwgbmV4dCwge1xuICAgICAgICBleHBlY3RCb29sZWFuOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBjb21wb25lbnQgY2FuIGFjdGl2YXRlLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dFxuICAgKi9cblxuICBmdW5jdGlvbiBjYW5BY3RpdmF0ZShoYW5kbGVyLCB0cmFuc2l0aW9uLCBuZXh0KSB7XG4gICAgcmVzb2x2ZUFzeW5jQ29tcG9uZW50KGhhbmRsZXIsIGZ1bmN0aW9uIChDb21wb25lbnQpIHtcbiAgICAgIC8vIGhhdmUgdG8gY2hlY2sgZHVlIHRvIGFzeW5jLW5lc3NcbiAgICAgIGlmICh0cmFuc2l0aW9uLmFib3J0ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gZGV0ZXJtaW5lIGlmIHRoaXMgY29tcG9uZW50IGNhbiBiZSBhY3RpdmF0ZWRcbiAgICAgIHZhciBob29rID0gZ2V0Um91dGVDb25maWcoQ29tcG9uZW50LCAnY2FuQWN0aXZhdGUnKTtcbiAgICAgIGlmICghaG9vaykge1xuICAgICAgICBuZXh0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cmFuc2l0aW9uLmNhbGxIb29rKGhvb2ssIG51bGwsIG5leHQsIHtcbiAgICAgICAgICBleHBlY3RCb29sZWFuOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGwgZGVhY3RpdmF0ZSBob29rcyBmb3IgZXhpc3Rpbmcgcm91dGVyLXZpZXdzLlxuICAgKlxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dFxuICAgKi9cblxuICBmdW5jdGlvbiBkZWFjdGl2YXRlKHZpZXcsIHRyYW5zaXRpb24sIG5leHQpIHtcbiAgICB2YXIgY29tcG9uZW50ID0gdmlldy5jaGlsZFZNO1xuICAgIHZhciBob29rID0gZ2V0Um91dGVDb25maWcoY29tcG9uZW50LCAnZGVhY3RpdmF0ZScpO1xuICAgIGlmICghaG9vaykge1xuICAgICAgbmV4dCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cmFuc2l0aW9uLmNhbGxIb29rcyhob29rLCBjb21wb25lbnQsIG5leHQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZSAvIHN3aXRjaCBjb21wb25lbnQgZm9yIGEgcm91dGVyLXZpZXcuXG4gICAqXG4gICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XG4gICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuICAgKiBAcGFyYW0ge051bWJlcn0gZGVwdGhcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBmdW5jdGlvbiBhY3RpdmF0ZSh2aWV3LCB0cmFuc2l0aW9uLCBkZXB0aCwgY2IsIHJldXNlKSB7XG4gICAgdmFyIGhhbmRsZXIgPSB0cmFuc2l0aW9uLmFjdGl2YXRlUXVldWVbZGVwdGhdO1xuICAgIGlmICghaGFuZGxlcikge1xuICAgICAgc2F2ZUNoaWxkVmlldyh2aWV3KTtcbiAgICAgIGlmICh2aWV3Ll9ib3VuZCkge1xuICAgICAgICB2aWV3LnNldENvbXBvbmVudChudWxsKTtcbiAgICAgIH1cbiAgICAgIGNiICYmIGNiKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIENvbXBvbmVudCA9IHZpZXcuQ29tcG9uZW50ID0gaGFuZGxlci5jb21wb25lbnQ7XG4gICAgdmFyIGFjdGl2YXRlSG9vayA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ2FjdGl2YXRlJyk7XG4gICAgdmFyIGRhdGFIb29rID0gZ2V0Um91dGVDb25maWcoQ29tcG9uZW50LCAnZGF0YScpO1xuICAgIHZhciB3YWl0Rm9yRGF0YSA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ3dhaXRGb3JEYXRhJyk7XG5cbiAgICB2aWV3LmRlcHRoID0gZGVwdGg7XG4gICAgdmlldy5hY3RpdmF0ZWQgPSBmYWxzZTtcblxuICAgIHZhciBjb21wb25lbnQgPSB1bmRlZmluZWQ7XG4gICAgdmFyIGxvYWRpbmcgPSAhIShkYXRhSG9vayAmJiAhd2FpdEZvckRhdGEpO1xuXG4gICAgLy8gXCJyZXVzZVwiIGlzIGEgZmxhZyBwYXNzZWQgZG93biB3aGVuIHRoZSBwYXJlbnQgdmlldyBpc1xuICAgIC8vIGVpdGhlciByZXVzZWQgdmlhIGtlZXAtYWxpdmUgb3IgYXMgYSBjaGlsZCBvZiBhIGtlcHQtYWxpdmUgdmlldy5cbiAgICAvLyBvZiBjb3Vyc2Ugd2UgY2FuIG9ubHkgcmV1c2UgaWYgdGhlIGN1cnJlbnQga2VwdC1hbGl2ZSBpbnN0YW5jZVxuICAgIC8vIGlzIG9mIHRoZSBjb3JyZWN0IHR5cGUuXG4gICAgcmV1c2UgPSByZXVzZSAmJiB2aWV3LmNoaWxkVk0gJiYgdmlldy5jaGlsZFZNLmNvbnN0cnVjdG9yID09PSBDb21wb25lbnQ7XG5cbiAgICBpZiAocmV1c2UpIHtcbiAgICAgIC8vIGp1c3QgcmV1c2VcbiAgICAgIGNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcbiAgICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IGxvYWRpbmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNhdmVDaGlsZFZpZXcodmlldyk7XG5cbiAgICAgIC8vIHVuYnVpbGQgY3VycmVudCBjb21wb25lbnQuIHRoaXMgc3RlcCBhbHNvIGRlc3Ryb3lzXG4gICAgICAvLyBhbmQgcmVtb3ZlcyBhbGwgbmVzdGVkIGNoaWxkIHZpZXdzLlxuICAgICAgdmlldy51bmJ1aWxkKHRydWUpO1xuXG4gICAgICAvLyBidWlsZCB0aGUgbmV3IGNvbXBvbmVudC4gdGhpcyB3aWxsIGFsc28gY3JlYXRlIHRoZVxuICAgICAgLy8gZGlyZWN0IGNoaWxkIHZpZXcgb2YgdGhlIGN1cnJlbnQgb25lLiBpdCB3aWxsIHJlZ2lzdGVyXG4gICAgICAvLyBpdHNlbGYgYXMgdmlldy5jaGlsZFZpZXcuXG4gICAgICBjb21wb25lbnQgPSB2aWV3LmJ1aWxkKHtcbiAgICAgICAgX21ldGE6IHtcbiAgICAgICAgICAkbG9hZGluZ1JvdXRlRGF0YTogbG9hZGluZ1xuICAgICAgICB9LFxuICAgICAgICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge1xuICAgICAgICAgIHRoaXMuX3JvdXRlclZpZXcgPSB2aWV3O1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gaGFuZGxlIGtlZXAtYWxpdmUuXG4gICAgICAvLyB3aGVuIGEga2VwdC1hbGl2ZSBjaGlsZCB2bSBpcyByZXN0b3JlZCwgd2UgbmVlZCB0b1xuICAgICAgLy8gYWRkIGl0cyBjYWNoZWQgY2hpbGQgdmlld3MgaW50byB0aGUgcm91dGVyJ3MgdmlldyBsaXN0LFxuICAgICAgLy8gYW5kIGFsc28gcHJvcGVybHkgdXBkYXRlIGN1cnJlbnQgdmlldydzIGNoaWxkIHZpZXcuXG4gICAgICBpZiAodmlldy5rZWVwQWxpdmUpIHtcbiAgICAgICAgY29tcG9uZW50LiRsb2FkaW5nUm91dGVEYXRhID0gbG9hZGluZztcbiAgICAgICAgdmFyIGNhY2hlZENoaWxkVmlldyA9IGNvbXBvbmVudC5fa2VlcEFsaXZlUm91dGVyVmlldztcbiAgICAgICAgaWYgKGNhY2hlZENoaWxkVmlldykge1xuICAgICAgICAgIHZpZXcuY2hpbGRWaWV3ID0gY2FjaGVkQ2hpbGRWaWV3O1xuICAgICAgICAgIGNvbXBvbmVudC5fa2VlcEFsaXZlUm91dGVyVmlldyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjbGVhbnVwIHRoZSBjb21wb25lbnQgaW4gY2FzZSB0aGUgdHJhbnNpdGlvbiBpcyBhYm9ydGVkXG4gICAgLy8gYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgZXZlciBpbnNlcnRlZC5cbiAgICB2YXIgY2xlYW51cCA9IGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgICBjb21wb25lbnQuJGRlc3Ryb3koKTtcbiAgICB9O1xuXG4gICAgLy8gYWN0dWFsbHkgaW5zZXJ0IHRoZSBjb21wb25lbnQgYW5kIHRyaWdnZXIgdHJhbnNpdGlvblxuICAgIHZhciBpbnNlcnQgPSBmdW5jdGlvbiBpbnNlcnQoKSB7XG4gICAgICBpZiAocmV1c2UpIHtcbiAgICAgICAgY2IgJiYgY2IoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIHJvdXRlciA9IHRyYW5zaXRpb24ucm91dGVyO1xuICAgICAgaWYgKHJvdXRlci5fcmVuZGVyZWQgfHwgcm91dGVyLl90cmFuc2l0aW9uT25Mb2FkKSB7XG4gICAgICAgIHZpZXcudHJhbnNpdGlvbihjb21wb25lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbm8gdHJhbnNpdGlvbiBvbiBmaXJzdCByZW5kZXIsIG1hbnVhbCB0cmFuc2l0aW9uXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAodmlldy5zZXRDdXJyZW50KSB7XG4gICAgICAgICAgLy8gMC4xMiBjb21wYXRcbiAgICAgICAgICB2aWV3LnNldEN1cnJlbnQoY29tcG9uZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyAxLjBcbiAgICAgICAgICB2aWV3LmNoaWxkVk0gPSBjb21wb25lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgY29tcG9uZW50LiRiZWZvcmUodmlldy5hbmNob3IsIG51bGwsIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIGNiICYmIGNiKCk7XG4gICAgfTtcblxuICAgIHZhciBhZnRlckRhdGEgPSBmdW5jdGlvbiBhZnRlckRhdGEoKSB7XG4gICAgICAvLyBhY3RpdmF0ZSB0aGUgY2hpbGQgdmlld1xuICAgICAgaWYgKHZpZXcuY2hpbGRWaWV3KSB7XG4gICAgICAgIGFjdGl2YXRlKHZpZXcuY2hpbGRWaWV3LCB0cmFuc2l0aW9uLCBkZXB0aCArIDEsIG51bGwsIHJldXNlIHx8IHZpZXcua2VlcEFsaXZlKTtcbiAgICAgIH1cbiAgICAgIGluc2VydCgpO1xuICAgIH07XG5cbiAgICAvLyBjYWxsZWQgYWZ0ZXIgYWN0aXZhdGlvbiBob29rIGlzIHJlc29sdmVkXG4gICAgdmFyIGFmdGVyQWN0aXZhdGUgPSBmdW5jdGlvbiBhZnRlckFjdGl2YXRlKCkge1xuICAgICAgdmlldy5hY3RpdmF0ZWQgPSB0cnVlO1xuICAgICAgaWYgKGRhdGFIb29rICYmIHdhaXRGb3JEYXRhKSB7XG4gICAgICAgIC8vIHdhaXQgdW50aWwgZGF0YSBsb2FkZWQgdG8gaW5zZXJ0XG4gICAgICAgIGxvYWREYXRhKGNvbXBvbmVudCwgdHJhbnNpdGlvbiwgZGF0YUhvb2ssIGFmdGVyRGF0YSwgY2xlYW51cCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBsb2FkIGRhdGEgYW5kIGluc2VydCBhdCB0aGUgc2FtZSB0aW1lXG4gICAgICAgIGlmIChkYXRhSG9vaykge1xuICAgICAgICAgIGxvYWREYXRhKGNvbXBvbmVudCwgdHJhbnNpdGlvbiwgZGF0YUhvb2spO1xuICAgICAgICB9XG4gICAgICAgIGFmdGVyRGF0YSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoYWN0aXZhdGVIb29rKSB7XG4gICAgICB0cmFuc2l0aW9uLmNhbGxIb29rcyhhY3RpdmF0ZUhvb2ssIGNvbXBvbmVudCwgYWZ0ZXJBY3RpdmF0ZSwge1xuICAgICAgICBjbGVhbnVwOiBjbGVhbnVwLFxuICAgICAgICBwb3N0QWN0aXZhdGU6IHRydWVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBhZnRlckFjdGl2YXRlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldXNlIGEgdmlldywganVzdCByZWxvYWQgZGF0YSBpZiBuZWNlc3NhcnkuXG4gICAqXG4gICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XG4gICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuICAgKi9cblxuICBmdW5jdGlvbiByZXVzZSh2aWV3LCB0cmFuc2l0aW9uKSB7XG4gICAgdmFyIGNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcbiAgICB2YXIgZGF0YUhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhjb21wb25lbnQsICdkYXRhJyk7XG4gICAgaWYgKGRhdGFIb29rKSB7XG4gICAgICBsb2FkRGF0YShjb21wb25lbnQsIHRyYW5zaXRpb24sIGRhdGFIb29rKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQXN5bmNocm9ub3VzbHkgbG9hZCBhbmQgYXBwbHkgZGF0YSB0byBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSBjb21wb25lbnRcbiAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGhvb2tcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2xlYW51cFxuICAgKi9cblxuICBmdW5jdGlvbiBsb2FkRGF0YShjb21wb25lbnQsIHRyYW5zaXRpb24sIGhvb2ssIGNiLCBjbGVhbnVwKSB7XG4gICAgY29tcG9uZW50LiRsb2FkaW5nUm91dGVEYXRhID0gdHJ1ZTtcbiAgICB0cmFuc2l0aW9uLmNhbGxIb29rcyhob29rLCBjb21wb25lbnQsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IGZhbHNlO1xuICAgICAgY29tcG9uZW50LiRlbWl0KCdyb3V0ZS1kYXRhLWxvYWRlZCcsIGNvbXBvbmVudCk7XG4gICAgICBjYiAmJiBjYigpO1xuICAgIH0sIHtcbiAgICAgIGNsZWFudXA6IGNsZWFudXAsXG4gICAgICBwb3N0QWN0aXZhdGU6IHRydWUsXG4gICAgICBwcm9jZXNzRGF0YTogZnVuY3Rpb24gcHJvY2Vzc0RhdGEoZGF0YSkge1xuICAgICAgICAvLyBoYW5kbGUgcHJvbWlzZSBzdWdhciBzeW50YXhcbiAgICAgICAgdmFyIHByb21pc2VzID0gW107XG4gICAgICAgIGlmIChpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG4gICAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICB2YXIgdmFsID0gZGF0YVtrZXldO1xuICAgICAgICAgICAgaWYgKGlzUHJvbWlzZSh2YWwpKSB7XG4gICAgICAgICAgICAgIHByb21pc2VzLnB1c2godmFsLnRoZW4oZnVuY3Rpb24gKHJlc29sdmVkVmFsKSB7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50LiRzZXQoa2V5LCByZXNvbHZlZFZhbCk7XG4gICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbXBvbmVudC4kc2V0KGtleSwgdmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvbWlzZXMubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHByb21pc2VzWzBdLmNvbnN0cnVjdG9yLmFsbChwcm9taXNlcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTYXZlIHRoZSBjaGlsZCB2aWV3IGZvciBhIGtlcHQtYWxpdmUgdmlldyBzbyB0aGF0XG4gICAqIHdlIGNhbiByZXN0b3JlIGl0IHdoZW4gaXQgaXMgc3dpdGNoZWQgYmFjayB0by5cbiAgICpcbiAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcbiAgICovXG5cbiAgZnVuY3Rpb24gc2F2ZUNoaWxkVmlldyh2aWV3KSB7XG4gICAgaWYgKHZpZXcua2VlcEFsaXZlICYmIHZpZXcuY2hpbGRWTSAmJiB2aWV3LmNoaWxkVmlldykge1xuICAgICAgdmlldy5jaGlsZFZNLl9rZWVwQWxpdmVSb3V0ZXJWaWV3ID0gdmlldy5jaGlsZFZpZXc7XG4gICAgfVxuICAgIHZpZXcuY2hpbGRWaWV3ID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBwbGFpbiBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsKSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBPYmplY3RdJztcbiAgfVxuXG4gIC8qKlxuICAgKiBBIFJvdXRlVHJhbnNpdGlvbiBvYmplY3QgbWFuYWdlcyB0aGUgcGlwZWxpbmUgb2YgYVxuICAgKiByb3V0ZXItdmlldyBzd2l0Y2hpbmcgcHJvY2Vzcy4gVGhpcyBpcyBhbHNvIHRoZSBvYmplY3RcbiAgICogcGFzc2VkIGludG8gdXNlciByb3V0ZSBob29rcy5cbiAgICpcbiAgICogQHBhcmFtIHtSb3V0ZXJ9IHJvdXRlclxuICAgKiBAcGFyYW0ge1JvdXRlfSB0b1xuICAgKiBAcGFyYW0ge1JvdXRlfSBmcm9tXG4gICAqL1xuXG4gIHZhciBSb3V0ZVRyYW5zaXRpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJvdXRlVHJhbnNpdGlvbihyb3V0ZXIsIHRvLCBmcm9tKSB7XG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgUm91dGVUcmFuc2l0aW9uKTtcblxuICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG4gICAgICB0aGlzLnRvID0gdG87XG4gICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgdGhpcy5uZXh0ID0gbnVsbDtcbiAgICAgIHRoaXMuYWJvcnRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWJvcnQgY3VycmVudCB0cmFuc2l0aW9uIGFuZCByZXR1cm4gdG8gcHJldmlvdXMgbG9jYXRpb24uXG4gICAgICovXG5cbiAgICBSb3V0ZVRyYW5zaXRpb24ucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24gYWJvcnQoKSB7XG4gICAgICBpZiAoIXRoaXMuYWJvcnRlZCkge1xuICAgICAgICB0aGlzLmFib3J0ZWQgPSB0cnVlO1xuICAgICAgICAvLyBpZiB0aGUgcm9vdCBwYXRoIHRocm93cyBhbiBlcnJvciBkdXJpbmcgdmFsaWRhdGlvblxuICAgICAgICAvLyBvbiBpbml0aWFsIGxvYWQsIGl0IGdldHMgY2F1Z2h0IGluIGFuIGluZmluaXRlIGxvb3AuXG4gICAgICAgIHZhciBhYm9ydGluZ09uTG9hZCA9ICF0aGlzLmZyb20ucGF0aCAmJiB0aGlzLnRvLnBhdGggPT09ICcvJztcbiAgICAgICAgaWYgKCFhYm9ydGluZ09uTG9hZCkge1xuICAgICAgICAgIHRoaXMucm91dGVyLnJlcGxhY2UodGhpcy5mcm9tLnBhdGggfHwgJy8nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBYm9ydCBjdXJyZW50IHRyYW5zaXRpb24gYW5kIHJlZGlyZWN0IHRvIGEgbmV3IGxvY2F0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKi9cblxuICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUucmVkaXJlY3QgPSBmdW5jdGlvbiByZWRpcmVjdChwYXRoKSB7XG4gICAgICBpZiAoIXRoaXMuYWJvcnRlZCkge1xuICAgICAgICB0aGlzLmFib3J0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcGF0aCA9IG1hcFBhcmFtcyhwYXRoLCB0aGlzLnRvLnBhcmFtcywgdGhpcy50by5xdWVyeSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGF0aC5wYXJhbXMgPSBwYXRoLnBhcmFtcyB8fCB0aGlzLnRvLnBhcmFtcztcbiAgICAgICAgICBwYXRoLnF1ZXJ5ID0gcGF0aC5xdWVyeSB8fCB0aGlzLnRvLnF1ZXJ5O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucm91dGVyLnJlcGxhY2UocGF0aCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEEgcm91dGVyIHZpZXcgdHJhbnNpdGlvbidzIHBpcGVsaW5lIGNhbiBiZSBkZXNjcmliZWQgYXNcbiAgICAgKiBmb2xsb3dzLCBhc3N1bWluZyB3ZSBhcmUgdHJhbnNpdGlvbmluZyBmcm9tIGFuIGV4aXN0aW5nXG4gICAgICogPHJvdXRlci12aWV3PiBjaGFpbiBbQ29tcG9uZW50IEEsIENvbXBvbmVudCBCXSB0byBhIG5ld1xuICAgICAqIGNoYWluIFtDb21wb25lbnQgQSwgQ29tcG9uZW50IENdOlxuICAgICAqXG4gICAgICogIEEgICAgQVxuICAgICAqICB8ID0+IHxcbiAgICAgKiAgQiAgICBDXG4gICAgICpcbiAgICAgKiAxLiBSZXVzYWJsaXR5IHBoYXNlOlxuICAgICAqICAgLT4gY2FuUmV1c2UoQSwgQSlcbiAgICAgKiAgIC0+IGNhblJldXNlKEIsIEMpXG4gICAgICogICAtPiBkZXRlcm1pbmUgbmV3IHF1ZXVlczpcbiAgICAgKiAgICAgIC0gZGVhY3RpdmF0aW9uOiBbQl1cbiAgICAgKiAgICAgIC0gYWN0aXZhdGlvbjogW0NdXG4gICAgICpcbiAgICAgKiAyLiBWYWxpZGF0aW9uIHBoYXNlOlxuICAgICAqICAgLT4gY2FuRGVhY3RpdmF0ZShCKVxuICAgICAqICAgLT4gY2FuQWN0aXZhdGUoQylcbiAgICAgKlxuICAgICAqIDMuIEFjdGl2YXRpb24gcGhhc2U6XG4gICAgICogICAtPiBkZWFjdGl2YXRlKEIpXG4gICAgICogICAtPiBhY3RpdmF0ZShDKVxuICAgICAqXG4gICAgICogRWFjaCBvZiB0aGVzZSBzdGVwcyBjYW4gYmUgYXN5bmNocm9ub3VzLCBhbmQgYW55XG4gICAgICogc3RlcCBjYW4gcG90ZW50aWFsbHkgYWJvcnQgdGhlIHRyYW5zaXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgICAqL1xuXG4gICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KGNiKSB7XG4gICAgICB2YXIgdHJhbnNpdGlvbiA9IHRoaXM7XG5cbiAgICAgIC8vIGRldGVybWluZSB0aGUgcXVldWUgb2Ygdmlld3MgdG8gZGVhY3RpdmF0ZVxuICAgICAgdmFyIGRlYWN0aXZhdGVRdWV1ZSA9IFtdO1xuICAgICAgdmFyIHZpZXcgPSB0aGlzLnJvdXRlci5fcm9vdFZpZXc7XG4gICAgICB3aGlsZSAodmlldykge1xuICAgICAgICBkZWFjdGl2YXRlUXVldWUudW5zaGlmdCh2aWV3KTtcbiAgICAgICAgdmlldyA9IHZpZXcuY2hpbGRWaWV3O1xuICAgICAgfVxuICAgICAgdmFyIHJldmVyc2VEZWFjdGl2YXRlUXVldWUgPSBkZWFjdGl2YXRlUXVldWUuc2xpY2UoKS5yZXZlcnNlKCk7XG5cbiAgICAgIC8vIGRldGVybWluZSB0aGUgcXVldWUgb2Ygcm91dGUgaGFuZGxlcnMgdG8gYWN0aXZhdGVcbiAgICAgIHZhciBhY3RpdmF0ZVF1ZXVlID0gdGhpcy5hY3RpdmF0ZVF1ZXVlID0gdG9BcnJheSh0aGlzLnRvLm1hdGNoZWQpLm1hcChmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoLmhhbmRsZXI7XG4gICAgICB9KTtcblxuICAgICAgLy8gMS4gUmV1c2FiaWxpdHkgcGhhc2VcbiAgICAgIHZhciBpID0gdW5kZWZpbmVkLFxuICAgICAgICAgIHJldXNlUXVldWUgPSB1bmRlZmluZWQ7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgcmV2ZXJzZURlYWN0aXZhdGVRdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIWNhblJldXNlKHJldmVyc2VEZWFjdGl2YXRlUXVldWVbaV0sIGFjdGl2YXRlUXVldWVbaV0sIHRyYW5zaXRpb24pKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpID4gMCkge1xuICAgICAgICByZXVzZVF1ZXVlID0gcmV2ZXJzZURlYWN0aXZhdGVRdWV1ZS5zbGljZSgwLCBpKTtcbiAgICAgICAgZGVhY3RpdmF0ZVF1ZXVlID0gcmV2ZXJzZURlYWN0aXZhdGVRdWV1ZS5zbGljZShpKS5yZXZlcnNlKCk7XG4gICAgICAgIGFjdGl2YXRlUXVldWUgPSBhY3RpdmF0ZVF1ZXVlLnNsaWNlKGkpO1xuICAgICAgfVxuXG4gICAgICAvLyAyLiBWYWxpZGF0aW9uIHBoYXNlXG4gICAgICB0cmFuc2l0aW9uLnJ1blF1ZXVlKGRlYWN0aXZhdGVRdWV1ZSwgY2FuRGVhY3RpdmF0ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICB0cmFuc2l0aW9uLnJ1blF1ZXVlKGFjdGl2YXRlUXVldWUsIGNhbkFjdGl2YXRlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShkZWFjdGl2YXRlUXVldWUsIGRlYWN0aXZhdGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIDMuIEFjdGl2YXRpb24gcGhhc2VcblxuICAgICAgICAgICAgLy8gVXBkYXRlIHJvdXRlciBjdXJyZW50IHJvdXRlXG4gICAgICAgICAgICB0cmFuc2l0aW9uLnJvdXRlci5fb25UcmFuc2l0aW9uVmFsaWRhdGVkKHRyYW5zaXRpb24pO1xuXG4gICAgICAgICAgICAvLyB0cmlnZ2VyIHJldXNlIGZvciBhbGwgcmV1c2VkIHZpZXdzXG4gICAgICAgICAgICByZXVzZVF1ZXVlICYmIHJldXNlUXVldWUuZm9yRWFjaChmdW5jdGlvbiAodmlldykge1xuICAgICAgICAgICAgICByZXR1cm4gcmV1c2UodmlldywgdHJhbnNpdGlvbik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gdGhlIHJvb3Qgb2YgdGhlIGNoYWluIHRoYXQgbmVlZHMgdG8gYmUgcmVwbGFjZWRcbiAgICAgICAgICAgIC8vIGlzIHRoZSB0b3AtbW9zdCBub24tcmV1c2FibGUgdmlldy5cbiAgICAgICAgICAgIGlmIChkZWFjdGl2YXRlUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHZhciBfdmlldyA9IGRlYWN0aXZhdGVRdWV1ZVtkZWFjdGl2YXRlUXVldWUubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgIHZhciBkZXB0aCA9IHJldXNlUXVldWUgPyByZXVzZVF1ZXVlLmxlbmd0aCA6IDA7XG4gICAgICAgICAgICAgIGFjdGl2YXRlKF92aWV3LCB0cmFuc2l0aW9uLCBkZXB0aCwgY2IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQXN5bmNocm9ub3VzbHkgYW5kIHNlcXVlbnRpYWxseSBhcHBseSBhIGZ1bmN0aW9uIHRvIGFcbiAgICAgKiBxdWV1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHF1ZXVlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgICAqL1xuXG4gICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5ydW5RdWV1ZSA9IGZ1bmN0aW9uIHJ1blF1ZXVlKHF1ZXVlLCBmbiwgY2IpIHtcbiAgICAgIHZhciB0cmFuc2l0aW9uID0gdGhpcztcbiAgICAgIHN0ZXAoMCk7XG4gICAgICBmdW5jdGlvbiBzdGVwKGluZGV4KSB7XG4gICAgICAgIGlmIChpbmRleCA+PSBxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICBjYigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZuKHF1ZXVlW2luZGV4XSwgdHJhbnNpdGlvbiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc3RlcChpbmRleCArIDEpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENhbGwgYSB1c2VyIHByb3ZpZGVkIHJvdXRlIHRyYW5zaXRpb24gaG9vayBhbmQgaGFuZGxlXG4gICAgICogdGhlIHJlc3BvbnNlIChlLmcuIGlmIHRoZSB1c2VyIHJldHVybnMgYSBwcm9taXNlKS5cbiAgICAgKlxuICAgICAqIElmIHRoZSB1c2VyIG5laXRoZXIgZXhwZWN0cyBhbiBhcmd1bWVudCBub3IgcmV0dXJucyBhXG4gICAgICogcHJvbWlzZSwgdGhlIGhvb2sgaXMgYXNzdW1lZCB0byBiZSBzeW5jaHJvbm91cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhvb2tcbiAgICAgKiBAcGFyYW0geyp9IFtjb250ZXh0XVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGV4cGVjdEJvb2xlYW5cbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gcG9zdEFjdGl2ZVxuICAgICAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gcHJvY2Vzc0RhdGFcbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IGNsZWFudXBcbiAgICAgKi9cblxuICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuY2FsbEhvb2sgPSBmdW5jdGlvbiBjYWxsSG9vayhob29rLCBjb250ZXh0LCBjYikge1xuICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1szXTtcblxuICAgICAgdmFyIF9yZWYkZXhwZWN0Qm9vbGVhbiA9IF9yZWYuZXhwZWN0Qm9vbGVhbjtcbiAgICAgIHZhciBleHBlY3RCb29sZWFuID0gX3JlZiRleHBlY3RCb29sZWFuID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkZXhwZWN0Qm9vbGVhbjtcbiAgICAgIHZhciBfcmVmJHBvc3RBY3RpdmF0ZSA9IF9yZWYucG9zdEFjdGl2YXRlO1xuICAgICAgdmFyIHBvc3RBY3RpdmF0ZSA9IF9yZWYkcG9zdEFjdGl2YXRlID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkcG9zdEFjdGl2YXRlO1xuICAgICAgdmFyIHByb2Nlc3NEYXRhID0gX3JlZi5wcm9jZXNzRGF0YTtcbiAgICAgIHZhciBjbGVhbnVwID0gX3JlZi5jbGVhbnVwO1xuXG4gICAgICB2YXIgdHJhbnNpdGlvbiA9IHRoaXM7XG4gICAgICB2YXIgbmV4dENhbGxlZCA9IGZhbHNlO1xuXG4gICAgICAvLyBhYm9ydCB0aGUgdHJhbnNpdGlvblxuICAgICAgdmFyIGFib3J0ID0gZnVuY3Rpb24gYWJvcnQoKSB7XG4gICAgICAgIGNsZWFudXAgJiYgY2xlYW51cCgpO1xuICAgICAgICB0cmFuc2l0aW9uLmFib3J0KCk7XG4gICAgICB9O1xuXG4gICAgICAvLyBoYW5kbGUgZXJyb3JzXG4gICAgICB2YXIgb25FcnJvciA9IGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7XG4gICAgICAgIHBvc3RBY3RpdmF0ZSA/IG5leHQoKSA6IGFib3J0KCk7XG4gICAgICAgIGlmIChlcnIgJiYgIXRyYW5zaXRpb24ucm91dGVyLl9zdXBwcmVzcykge1xuICAgICAgICAgIHdhcm4kMSgnVW5jYXVnaHQgZXJyb3IgZHVyaW5nIHRyYW5zaXRpb246ICcpO1xuICAgICAgICAgIHRocm93IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyIDogbmV3IEVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIHNpbmNlIHByb21pc2Ugc3dhbGxvd3MgZXJyb3JzLCB3ZSBoYXZlIHRvXG4gICAgICAvLyB0aHJvdyBpdCBpbiB0aGUgbmV4dCB0aWNrLi4uXG4gICAgICB2YXIgb25Qcm9taXNlRXJyb3IgPSBmdW5jdGlvbiBvblByb21pc2VFcnJvcihlcnIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBvbkVycm9yKGVycik7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIGFkdmFuY2UgdGhlIHRyYW5zaXRpb24gdG8gdGhlIG5leHQgc3RlcFxuICAgICAgdmFyIG5leHQgPSBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICBpZiAobmV4dENhbGxlZCkge1xuICAgICAgICAgIHdhcm4kMSgndHJhbnNpdGlvbi5uZXh0KCkgc2hvdWxkIGJlIGNhbGxlZCBvbmx5IG9uY2UuJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIG5leHRDYWxsZWQgPSB0cnVlO1xuICAgICAgICBpZiAodHJhbnNpdGlvbi5hYm9ydGVkKSB7XG4gICAgICAgICAgY2xlYW51cCAmJiBjbGVhbnVwKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNiICYmIGNiKCk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgbmV4dFdpdGhCb29sZWFuID0gZnVuY3Rpb24gbmV4dFdpdGhCb29sZWFuKHJlcykge1xuICAgICAgICBpZiAodHlwZW9mIHJlcyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgcmVzID8gbmV4dCgpIDogYWJvcnQoKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1Byb21pc2UocmVzKSkge1xuICAgICAgICAgIHJlcy50aGVuKGZ1bmN0aW9uIChvaykge1xuICAgICAgICAgICAgb2sgPyBuZXh0KCkgOiBhYm9ydCgpO1xuICAgICAgICAgIH0sIG9uUHJvbWlzZUVycm9yKTtcbiAgICAgICAgfSBlbHNlIGlmICghaG9vay5sZW5ndGgpIHtcbiAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHZhciBuZXh0V2l0aERhdGEgPSBmdW5jdGlvbiBuZXh0V2l0aERhdGEoZGF0YSkge1xuICAgICAgICB2YXIgcmVzID0gdW5kZWZpbmVkO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJlcyA9IHByb2Nlc3NEYXRhKGRhdGEpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gb25FcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1Byb21pc2UocmVzKSkge1xuICAgICAgICAgIHJlcy50aGVuKG5leHQsIG9uUHJvbWlzZUVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIGV4cG9zZSBhIGNsb25lIG9mIHRoZSB0cmFuc2l0aW9uIG9iamVjdCwgc28gdGhhdCBlYWNoXG4gICAgICAvLyBob29rIGdldHMgYSBjbGVhbiBjb3B5IGFuZCBwcmV2ZW50IHRoZSB1c2VyIGZyb21cbiAgICAgIC8vIG1lc3Npbmcgd2l0aCB0aGUgaW50ZXJuYWxzLlxuICAgICAgdmFyIGV4cG9zZWQgPSB7XG4gICAgICAgIHRvOiB0cmFuc2l0aW9uLnRvLFxuICAgICAgICBmcm9tOiB0cmFuc2l0aW9uLmZyb20sXG4gICAgICAgIGFib3J0OiBhYm9ydCxcbiAgICAgICAgbmV4dDogcHJvY2Vzc0RhdGEgPyBuZXh0V2l0aERhdGEgOiBuZXh0LFxuICAgICAgICByZWRpcmVjdDogZnVuY3Rpb24gcmVkaXJlY3QoKSB7XG4gICAgICAgICAgdHJhbnNpdGlvbi5yZWRpcmVjdC5hcHBseSh0cmFuc2l0aW9uLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBhY3R1YWxseSBjYWxsIHRoZSBob29rXG4gICAgICB2YXIgcmVzID0gdW5kZWZpbmVkO1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVzID0gaG9vay5jYWxsKGNvbnRleHQsIGV4cG9zZWQpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJldHVybiBvbkVycm9yKGVycik7XG4gICAgICB9XG5cbiAgICAgIGlmIChleHBlY3RCb29sZWFuKSB7XG4gICAgICAgIC8vIGJvb2xlYW4gaG9va3NcbiAgICAgICAgbmV4dFdpdGhCb29sZWFuKHJlcyk7XG4gICAgICB9IGVsc2UgaWYgKGlzUHJvbWlzZShyZXMpKSB7XG4gICAgICAgIC8vIHByb21pc2VcbiAgICAgICAgaWYgKHByb2Nlc3NEYXRhKSB7XG4gICAgICAgICAgcmVzLnRoZW4obmV4dFdpdGhEYXRhLCBvblByb21pc2VFcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzLnRoZW4obmV4dCwgb25Qcm9taXNlRXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHByb2Nlc3NEYXRhICYmIGlzUGxhaW5PamJlY3QocmVzKSkge1xuICAgICAgICAvLyBkYXRhIHByb21pc2Ugc3VnYXJcbiAgICAgICAgbmV4dFdpdGhEYXRhKHJlcyk7XG4gICAgICB9IGVsc2UgaWYgKCFob29rLmxlbmd0aCkge1xuICAgICAgICBuZXh0KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENhbGwgYSBzaW5nbGUgaG9vayBvciBhbiBhcnJheSBvZiBhc3luYyBob29rcyBpbiBzZXJpZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBob29rc1xuICAgICAqIEBwYXJhbSB7Kn0gY29udGV4dFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqL1xuXG4gICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5jYWxsSG9va3MgPSBmdW5jdGlvbiBjYWxsSG9va3MoaG9va3MsIGNvbnRleHQsIGNiLCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShob29rcykpIHtcbiAgICAgICAgdGhpcy5ydW5RdWV1ZShob29rcywgZnVuY3Rpb24gKGhvb2ssIF8sIG5leHQpIHtcbiAgICAgICAgICBpZiAoIV90aGlzLmFib3J0ZWQpIHtcbiAgICAgICAgICAgIF90aGlzLmNhbGxIb29rKGhvb2ssIGNvbnRleHQsIG5leHQsIG9wdGlvbnMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgY2IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jYWxsSG9vayhob29rcywgY29udGV4dCwgY2IsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gUm91dGVUcmFuc2l0aW9uO1xuICB9KSgpO1xuXG4gIGZ1bmN0aW9uIGlzUGxhaW5PamJlY3QodmFsKSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBPYmplY3RdJztcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvQXJyYXkodmFsKSB7XG4gICAgcmV0dXJuIHZhbCA/IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHZhbCkgOiBbXTtcbiAgfVxuXG4gIHZhciBpbnRlcm5hbEtleXNSRSA9IC9eKGNvbXBvbmVudHxzdWJSb3V0ZXN8ZnVsbFBhdGgpJC87XG5cbiAgLyoqXG4gICAqIFJvdXRlIENvbnRleHQgT2JqZWN0XG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAqIEBwYXJhbSB7Um91dGVyfSByb3V0ZXJcbiAgICovXG5cbiAgdmFyIFJvdXRlID0gZnVuY3Rpb24gUm91dGUocGF0aCwgcm91dGVyKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBSb3V0ZSk7XG5cbiAgICB2YXIgbWF0Y2hlZCA9IHJvdXRlci5fcmVjb2duaXplci5yZWNvZ25pemUocGF0aCk7XG4gICAgaWYgKG1hdGNoZWQpIHtcbiAgICAgIC8vIGNvcHkgYWxsIGN1c3RvbSBmaWVsZHMgZnJvbSByb3V0ZSBjb25maWdzXG4gICAgICBbXS5mb3JFYWNoLmNhbGwobWF0Y2hlZCwgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBtYXRjaC5oYW5kbGVyKSB7XG4gICAgICAgICAgaWYgKCFpbnRlcm5hbEtleXNSRS50ZXN0KGtleSkpIHtcbiAgICAgICAgICAgIF90aGlzW2tleV0gPSBtYXRjaC5oYW5kbGVyW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vIHNldCBxdWVyeSBhbmQgcGFyYW1zXG4gICAgICB0aGlzLnF1ZXJ5ID0gbWF0Y2hlZC5xdWVyeVBhcmFtcztcbiAgICAgIHRoaXMucGFyYW1zID0gW10ucmVkdWNlLmNhbGwobWF0Y2hlZCwgZnVuY3Rpb24gKHByZXYsIGN1cikge1xuICAgICAgICBpZiAoY3VyLnBhcmFtcykge1xuICAgICAgICAgIGZvciAodmFyIGtleSBpbiBjdXIucGFyYW1zKSB7XG4gICAgICAgICAgICBwcmV2W2tleV0gPSBjdXIucGFyYW1zW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgfSwge30pO1xuICAgIH1cbiAgICAvLyBleHBvc2UgcGF0aCBhbmQgcm91dGVyXG4gICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICAvLyBmb3IgaW50ZXJuYWwgdXNlXG4gICAgdGhpcy5tYXRjaGVkID0gbWF0Y2hlZCB8fCByb3V0ZXIuX25vdEZvdW5kSGFuZGxlcjtcbiAgICAvLyBpbnRlcm5hbCByZWZlcmVuY2UgdG8gcm91dGVyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdyb3V0ZXInLCB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIHZhbHVlOiByb3V0ZXJcbiAgICB9KTtcbiAgICAvLyBJbXBvcnRhbnQ6IGZyZWV6ZSBzZWxmIHRvIHByZXZlbnQgb2JzZXJ2YXRpb25cbiAgICBPYmplY3QuZnJlZXplKHRoaXMpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGFwcGx5T3ZlcnJpZGUgKFZ1ZSkge1xuICAgIHZhciBfVnVlJHV0aWwgPSBWdWUudXRpbDtcbiAgICB2YXIgZXh0ZW5kID0gX1Z1ZSR1dGlsLmV4dGVuZDtcbiAgICB2YXIgaXNBcnJheSA9IF9WdWUkdXRpbC5pc0FycmF5O1xuICAgIHZhciBkZWZpbmVSZWFjdGl2ZSA9IF9WdWUkdXRpbC5kZWZpbmVSZWFjdGl2ZTtcblxuICAgIC8vIG92ZXJyaWRlIFZ1ZSdzIGluaXQgYW5kIGRlc3Ryb3kgcHJvY2VzcyB0byBrZWVwIHRyYWNrIG9mIHJvdXRlciBpbnN0YW5jZXNcbiAgICB2YXIgaW5pdCA9IFZ1ZS5wcm90b3R5cGUuX2luaXQ7XG4gICAgVnVlLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgIHZhciByb290ID0gb3B0aW9ucy5fcGFyZW50IHx8IG9wdGlvbnMucGFyZW50IHx8IHRoaXM7XG4gICAgICB2YXIgcm91dGVyID0gcm9vdC4kcm91dGVyO1xuICAgICAgdmFyIHJvdXRlID0gcm9vdC4kcm91dGU7XG4gICAgICBpZiAocm91dGVyKSB7XG4gICAgICAgIC8vIGV4cG9zZSByb3V0ZXJcbiAgICAgICAgdGhpcy4kcm91dGVyID0gcm91dGVyO1xuICAgICAgICByb3V0ZXIuX2NoaWxkcmVuLnB1c2godGhpcyk7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAodGhpcy5fZGVmaW5lTWV0YSkge1xuICAgICAgICAgIC8vIDAuMTJcbiAgICAgICAgICB0aGlzLl9kZWZpbmVNZXRhKCckcm91dGUnLCByb3V0ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gMS4wXG4gICAgICAgICAgZGVmaW5lUmVhY3RpdmUodGhpcywgJyRyb3V0ZScsIHJvdXRlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaW5pdC5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuICAgIH07XG5cbiAgICB2YXIgZGVzdHJveSA9IFZ1ZS5wcm90b3R5cGUuX2Rlc3Ryb3k7XG4gICAgVnVlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCAmJiB0aGlzLiRyb3V0ZXIpIHtcbiAgICAgICAgdGhpcy4kcm91dGVyLl9jaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xuICAgICAgfVxuICAgICAgZGVzdHJveS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICAvLyAxLjAgb25seTogZW5hYmxlIHJvdXRlIG1peGluc1xuICAgIHZhciBzdHJhdHMgPSBWdWUuY29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llcztcbiAgICB2YXIgaG9va3NUb01lcmdlUkUgPSAvXihkYXRhfGFjdGl2YXRlfGRlYWN0aXZhdGUpJC87XG5cbiAgICBpZiAoc3RyYXRzKSB7XG4gICAgICBzdHJhdHMucm91dGUgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuICAgICAgICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsO1xuICAgICAgICBpZiAoIXBhcmVudFZhbCkgcmV0dXJuIGNoaWxkVmFsO1xuICAgICAgICB2YXIgcmV0ID0ge307XG4gICAgICAgIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBjaGlsZFZhbCkge1xuICAgICAgICAgIHZhciBhID0gcmV0W2tleV07XG4gICAgICAgICAgdmFyIGIgPSBjaGlsZFZhbFtrZXldO1xuICAgICAgICAgIC8vIGZvciBkYXRhLCBhY3RpdmF0ZSBhbmQgZGVhY3RpdmF0ZSwgd2UgbmVlZCB0byBtZXJnZSB0aGVtIGludG9cbiAgICAgICAgICAvLyBhcnJheXMgc2ltaWxhciB0byBsaWZlY3ljbGUgaG9va3MuXG4gICAgICAgICAgaWYgKGEgJiYgaG9va3NUb01lcmdlUkUudGVzdChrZXkpKSB7XG4gICAgICAgICAgICByZXRba2V5XSA9IChpc0FycmF5KGEpID8gYSA6IFthXSkuY29uY2F0KGIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRba2V5XSA9IGI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIFZpZXcgKFZ1ZSkge1xuXG4gICAgdmFyIF8gPSBWdWUudXRpbDtcbiAgICB2YXIgY29tcG9uZW50RGVmID1cbiAgICAvLyAwLjEyXG4gICAgVnVlLmRpcmVjdGl2ZSgnX2NvbXBvbmVudCcpIHx8XG4gICAgLy8gMS4wXG4gICAgVnVlLmludGVybmFsRGlyZWN0aXZlcy5jb21wb25lbnQ7XG4gICAgLy8gPHJvdXRlci12aWV3PiBleHRlbmRzIHRoZSBpbnRlcm5hbCBjb21wb25lbnQgZGlyZWN0aXZlXG4gICAgdmFyIHZpZXdEZWYgPSBfLmV4dGVuZCh7fSwgY29tcG9uZW50RGVmKTtcblxuICAgIC8vIHdpdGggc29tZSBvdmVycmlkZXNcbiAgICBfLmV4dGVuZCh2aWV3RGVmLCB7XG5cbiAgICAgIF9pc1JvdXRlclZpZXc6IHRydWUsXG5cbiAgICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgICAgIHZhciByb3V0ZSA9IHRoaXMudm0uJHJvdXRlO1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKCFyb3V0ZSkge1xuICAgICAgICAgIHdhcm4kMSgnPHJvdXRlci12aWV3PiBjYW4gb25seSBiZSB1c2VkIGluc2lkZSBhICcgKyAncm91dGVyLWVuYWJsZWQgYXBwLicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBmb3JjZSBkeW5hbWljIGRpcmVjdGl2ZSBzbyB2LWNvbXBvbmVudCBkb2Vzbid0XG4gICAgICAgIC8vIGF0dGVtcHQgdG8gYnVpbGQgcmlnaHQgbm93XG4gICAgICAgIHRoaXMuX2lzRHluYW1pY0xpdGVyYWwgPSB0cnVlO1xuICAgICAgICAvLyBmaW5hbGx5LCBpbml0IGJ5IGRlbGVnYXRpbmcgdG8gdi1jb21wb25lbnRcbiAgICAgICAgY29tcG9uZW50RGVmLmJpbmQuY2FsbCh0aGlzKTtcblxuICAgICAgICAvLyBsb2NhdGUgdGhlIHBhcmVudCB2aWV3XG4gICAgICAgIHZhciBwYXJlbnRWaWV3ID0gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy52bTtcbiAgICAgICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICAgIGlmIChwYXJlbnQuX3JvdXRlclZpZXcpIHtcbiAgICAgICAgICAgIHBhcmVudFZpZXcgPSBwYXJlbnQuX3JvdXRlclZpZXc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmVudFZpZXcpIHtcbiAgICAgICAgICAvLyByZWdpc3RlciBzZWxmIGFzIGEgY2hpbGQgb2YgdGhlIHBhcmVudCB2aWV3LFxuICAgICAgICAgIC8vIGluc3RlYWQgb2YgYWN0aXZhdGluZyBub3cuIFRoaXMgaXMgc28gdGhhdCB0aGVcbiAgICAgICAgICAvLyBjaGlsZCdzIGFjdGl2YXRlIGhvb2sgaXMgY2FsbGVkIGFmdGVyIHRoZVxuICAgICAgICAgIC8vIHBhcmVudCdzIGhhcyByZXNvbHZlZC5cbiAgICAgICAgICB0aGlzLnBhcmVudFZpZXcgPSBwYXJlbnRWaWV3O1xuICAgICAgICAgIHBhcmVudFZpZXcuY2hpbGRWaWV3ID0gdGhpcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyB0aGlzIGlzIHRoZSByb290IHZpZXchXG4gICAgICAgICAgdmFyIHJvdXRlciA9IHJvdXRlLnJvdXRlcjtcbiAgICAgICAgICByb3V0ZXIuX3Jvb3RWaWV3ID0gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGhhbmRsZSBsYXRlLXJlbmRlcmVkIHZpZXdcbiAgICAgICAgLy8gdHdvIHBvc3NpYmlsaXRpZXM6XG4gICAgICAgIC8vIDEuIHJvb3QgdmlldyByZW5kZXJlZCBhZnRlciB0cmFuc2l0aW9uIGhhcyBiZWVuXG4gICAgICAgIC8vICAgIHZhbGlkYXRlZDtcbiAgICAgICAgLy8gMi4gY2hpbGQgdmlldyByZW5kZXJlZCBhZnRlciBwYXJlbnQgdmlldyBoYXMgYmVlblxuICAgICAgICAvLyAgICBhY3RpdmF0ZWQuXG4gICAgICAgIHZhciB0cmFuc2l0aW9uID0gcm91dGUucm91dGVyLl9jdXJyZW50VHJhbnNpdGlvbjtcbiAgICAgICAgaWYgKCFwYXJlbnRWaWV3ICYmIHRyYW5zaXRpb24uZG9uZSB8fCBwYXJlbnRWaWV3ICYmIHBhcmVudFZpZXcuYWN0aXZhdGVkKSB7XG4gICAgICAgICAgdmFyIGRlcHRoID0gcGFyZW50VmlldyA/IHBhcmVudFZpZXcuZGVwdGggKyAxIDogMDtcbiAgICAgICAgICBhY3RpdmF0ZSh0aGlzLCB0cmFuc2l0aW9uLCBkZXB0aCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgICAgICBpZiAodGhpcy5wYXJlbnRWaWV3KSB7XG4gICAgICAgICAgdGhpcy5wYXJlbnRWaWV3LmNoaWxkVmlldyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29tcG9uZW50RGVmLnVuYmluZC5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgVnVlLmVsZW1lbnREaXJlY3RpdmUoJ3JvdXRlci12aWV3Jywgdmlld0RlZik7XG4gIH1cblxuICB2YXIgdHJhaWxpbmdTbGFzaFJFID0gL1xcLyQvO1xuICB2YXIgcmVnZXhFc2NhcGVSRSA9IC9bLS4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2c7XG4gIHZhciBxdWVyeVN0cmluZ1JFID0gL1xcPy4qJC87XG5cbiAgLy8gaW5zdGFsbCB2LWxpbmssIHdoaWNoIHByb3ZpZGVzIG5hdmlnYXRpb24gc3VwcG9ydCBmb3JcbiAgLy8gSFRNTDUgaGlzdG9yeSBtb2RlXG4gIGZ1bmN0aW9uIExpbmsgKFZ1ZSkge1xuICAgIHZhciBfVnVlJHV0aWwgPSBWdWUudXRpbDtcbiAgICB2YXIgX2JpbmQgPSBfVnVlJHV0aWwuYmluZDtcbiAgICB2YXIgaXNPYmplY3QgPSBfVnVlJHV0aWwuaXNPYmplY3Q7XG4gICAgdmFyIGFkZENsYXNzID0gX1Z1ZSR1dGlsLmFkZENsYXNzO1xuICAgIHZhciByZW1vdmVDbGFzcyA9IF9WdWUkdXRpbC5yZW1vdmVDbGFzcztcblxuICAgIHZhciBvblByaW9yaXR5ID0gVnVlLmRpcmVjdGl2ZSgnb24nKS5wcmlvcml0eTtcbiAgICB2YXIgTElOS19VUERBVEUgPSAnX192dWUtcm91dGVyLWxpbmstdXBkYXRlX18nO1xuXG4gICAgdmFyIGFjdGl2ZUlkID0gMDtcblxuICAgIFZ1ZS5kaXJlY3RpdmUoJ2xpbmstYWN0aXZlJywge1xuICAgICAgcHJpb3JpdHk6IDk5OTksXG4gICAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIHZhciBpZCA9IFN0cmluZyhhY3RpdmVJZCsrKTtcbiAgICAgICAgLy8gY29sbGVjdCB2LWxpbmtzIGNvbnRhaW5lZCB3aXRoaW4gdGhpcyBlbGVtZW50LlxuICAgICAgICAvLyB3ZSBuZWVkIGRvIHRoaXMgaGVyZSBiZWZvcmUgdGhlIHBhcmVudC1jaGlsZCByZWxhdGlvbnNoaXBcbiAgICAgICAgLy8gZ2V0cyBtZXNzZWQgdXAgYnkgdGVybWluYWwgZGlyZWN0aXZlcyAoaWYsIGZvciwgY29tcG9uZW50cylcbiAgICAgICAgdmFyIGNoaWxkTGlua3MgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1t2LWxpbmtdJyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGRMaW5rcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICB2YXIgbGluayA9IGNoaWxkTGlua3NbaV07XG4gICAgICAgICAgdmFyIGV4aXN0aW5nSWQgPSBsaW5rLmdldEF0dHJpYnV0ZShMSU5LX1VQREFURSk7XG4gICAgICAgICAgdmFyIHZhbHVlID0gZXhpc3RpbmdJZCA/IGV4aXN0aW5nSWQgKyAnLCcgKyBpZCA6IGlkO1xuICAgICAgICAgIC8vIGxlYXZlIGEgbWFyayBvbiB0aGUgbGluayBlbGVtZW50IHdoaWNoIGNhbiBiZSBwZXJzaXN0ZWRcbiAgICAgICAgICAvLyB0aHJvdWdoIGZyYWdtZW50IGNsb25lcy5cbiAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShMSU5LX1VQREFURSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudm0uJG9uKExJTktfVVBEQVRFLCB0aGlzLmNiID0gZnVuY3Rpb24gKGxpbmssIHBhdGgpIHtcbiAgICAgICAgICBpZiAobGluay5hY3RpdmVJZHMuaW5kZXhPZihpZCkgPiAtMSkge1xuICAgICAgICAgICAgbGluay51cGRhdGVDbGFzc2VzKHBhdGgsIF90aGlzLmVsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgICAgICB0aGlzLnZtLiRvZmYoTElOS19VUERBVEUsIHRoaXMuY2IpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgVnVlLmRpcmVjdGl2ZSgnbGluaycsIHtcbiAgICAgIHByaW9yaXR5OiBvblByaW9yaXR5IC0gMixcblxuICAgICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcy52bTtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmICghdm0uJHJvdXRlKSB7XG4gICAgICAgICAgd2FybiQxKCd2LWxpbmsgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgYSByb3V0ZXItZW5hYmxlZCBhcHAuJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucm91dGVyID0gdm0uJHJvdXRlLnJvdXRlcjtcbiAgICAgICAgLy8gdXBkYXRlIHRoaW5ncyB3aGVuIHRoZSByb3V0ZSBjaGFuZ2VzXG4gICAgICAgIHRoaXMudW53YXRjaCA9IHZtLiR3YXRjaCgnJHJvdXRlJywgX2JpbmQodGhpcy5vblJvdXRlVXBkYXRlLCB0aGlzKSk7XG4gICAgICAgIC8vIGNoZWNrIHYtbGluay1hY3RpdmUgaWRzXG4gICAgICAgIHZhciBhY3RpdmVJZHMgPSB0aGlzLmVsLmdldEF0dHJpYnV0ZShMSU5LX1VQREFURSk7XG4gICAgICAgIGlmIChhY3RpdmVJZHMpIHtcbiAgICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShMSU5LX1VQREFURSk7XG4gICAgICAgICAgdGhpcy5hY3RpdmVJZHMgPSBhY3RpdmVJZHMuc3BsaXQoJywnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBubyBuZWVkIHRvIGhhbmRsZSBjbGljayBpZiBsaW5rIGV4cGVjdHMgdG8gYmUgb3BlbmVkXG4gICAgICAgIC8vIGluIGEgbmV3IHdpbmRvdy90YWIuXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAodGhpcy5lbC50YWdOYW1lID09PSAnQScgJiYgdGhpcy5lbC5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpID09PSAnX2JsYW5rJykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBoYW5kbGUgY2xpY2tcbiAgICAgICAgdGhpcy5oYW5kbGVyID0gX2JpbmQodGhpcy5vbkNsaWNrLCB0aGlzKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlcik7XG4gICAgICB9LFxuXG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh0YXJnZXQpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIGlmIChpc09iamVjdCh0YXJnZXQpKSB7XG4gICAgICAgICAgdGhpcy5hcHBlbmQgPSB0YXJnZXQuYXBwZW5kO1xuICAgICAgICAgIHRoaXMuZXhhY3QgPSB0YXJnZXQuZXhhY3Q7XG4gICAgICAgICAgdGhpcy5wcmV2QWN0aXZlQ2xhc3MgPSB0aGlzLmFjdGl2ZUNsYXNzO1xuICAgICAgICAgIHRoaXMuYWN0aXZlQ2xhc3MgPSB0YXJnZXQuYWN0aXZlQ2xhc3M7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vblJvdXRlVXBkYXRlKHRoaXMudm0uJHJvdXRlKTtcbiAgICAgIH0sXG5cbiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAvLyBkb24ndCByZWRpcmVjdCB3aXRoIGNvbnRyb2wga2V5c1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKGUubWV0YUtleSB8fCBlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSkgcmV0dXJuO1xuICAgICAgICAvLyBkb24ndCByZWRpcmVjdCB3aGVuIHByZXZlbnREZWZhdWx0IGNhbGxlZFxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuICAgICAgICAvLyBkb24ndCByZWRpcmVjdCBvbiByaWdodCBjbGlja1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKGUuYnV0dG9uICE9PSAwKSByZXR1cm47XG5cbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMudGFyZ2V0O1xuICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgLy8gdi1saW5rIHdpdGggZXhwcmVzc2lvbiwganVzdCBnb1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzLnJvdXRlci5nbyh0YXJnZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG5vIGV4cHJlc3Npb24sIGRlbGVnYXRlIGZvciBhbiA8YT4gaW5zaWRlXG4gICAgICAgICAgdmFyIGVsID0gZS50YXJnZXQ7XG4gICAgICAgICAgd2hpbGUgKGVsLnRhZ05hbWUgIT09ICdBJyAmJiBlbCAhPT0gdGhpcy5lbCkge1xuICAgICAgICAgICAgZWwgPSBlbC5wYXJlbnROb2RlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZWwudGFnTmFtZSA9PT0gJ0EnICYmIHNhbWVPcmlnaW4oZWwpKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgcGF0aCA9IGVsLnBhdGhuYW1lO1xuICAgICAgICAgICAgaWYgKHRoaXMucm91dGVyLmhpc3Rvcnkucm9vdCkge1xuICAgICAgICAgICAgICBwYXRoID0gcGF0aC5yZXBsYWNlKHRoaXMucm91dGVyLmhpc3Rvcnkucm9vdFJFLCAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJvdXRlci5nbyh7XG4gICAgICAgICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgICAgICAgIHJlcGxhY2U6IHRhcmdldCAmJiB0YXJnZXQucmVwbGFjZSxcbiAgICAgICAgICAgICAgYXBwZW5kOiB0YXJnZXQgJiYgdGFyZ2V0LmFwcGVuZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBvblJvdXRlVXBkYXRlOiBmdW5jdGlvbiBvblJvdXRlVXBkYXRlKHJvdXRlKSB7XG4gICAgICAgIC8vIHJvdXRlci5zdHJpbmdpZnlQYXRoIGlzIGRlcGVuZGVudCBvbiBjdXJyZW50IHJvdXRlXG4gICAgICAgIC8vIGFuZCBuZWVkcyB0byBiZSBjYWxsZWQgYWdhaW4gd2hlbnZlciByb3V0ZSBjaGFuZ2VzLlxuICAgICAgICB2YXIgbmV3UGF0aCA9IHRoaXMucm91dGVyLnN0cmluZ2lmeVBhdGgodGhpcy50YXJnZXQpO1xuICAgICAgICBpZiAodGhpcy5wYXRoICE9PSBuZXdQYXRoKSB7XG4gICAgICAgICAgdGhpcy5wYXRoID0gbmV3UGF0aDtcbiAgICAgICAgICB0aGlzLnVwZGF0ZUFjdGl2ZU1hdGNoKCk7XG4gICAgICAgICAgdGhpcy51cGRhdGVIcmVmKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlSWRzKSB7XG4gICAgICAgICAgdGhpcy52bS4kZW1pdChMSU5LX1VQREFURSwgdGhpcywgcm91dGUucGF0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy51cGRhdGVDbGFzc2VzKHJvdXRlLnBhdGgsIHRoaXMuZWwpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICB1cGRhdGVBY3RpdmVNYXRjaDogZnVuY3Rpb24gdXBkYXRlQWN0aXZlTWF0Y2goKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlUkUgPSB0aGlzLnBhdGggJiYgIXRoaXMuZXhhY3QgPyBuZXcgUmVnRXhwKCdeJyArIHRoaXMucGF0aC5yZXBsYWNlKC9cXC8kLywgJycpLnJlcGxhY2UocXVlcnlTdHJpbmdSRSwgJycpLnJlcGxhY2UocmVnZXhFc2NhcGVSRSwgJ1xcXFwkJicpICsgJyhcXFxcL3wkKScpIDogbnVsbDtcbiAgICAgIH0sXG5cbiAgICAgIHVwZGF0ZUhyZWY6IGZ1bmN0aW9uIHVwZGF0ZUhyZWYoKSB7XG4gICAgICAgIGlmICh0aGlzLmVsLnRhZ05hbWUgIT09ICdBJykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGF0aCA9IHRoaXMucGF0aDtcbiAgICAgICAgdmFyIHJvdXRlciA9IHRoaXMucm91dGVyO1xuICAgICAgICB2YXIgaXNBYnNvbHV0ZSA9IHBhdGguY2hhckF0KDApID09PSAnLyc7XG4gICAgICAgIC8vIGRvIG5vdCBmb3JtYXQgbm9uLWhhc2ggcmVsYXRpdmUgcGF0aHNcbiAgICAgICAgdmFyIGhyZWYgPSBwYXRoICYmIChyb3V0ZXIubW9kZSA9PT0gJ2hhc2gnIHx8IGlzQWJzb2x1dGUpID8gcm91dGVyLmhpc3RvcnkuZm9ybWF0UGF0aChwYXRoLCB0aGlzLmFwcGVuZCkgOiBwYXRoO1xuICAgICAgICBpZiAoaHJlZikge1xuICAgICAgICAgIHRoaXMuZWwuaHJlZiA9IGhyZWY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ2hyZWYnKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgdXBkYXRlQ2xhc3NlczogZnVuY3Rpb24gdXBkYXRlQ2xhc3NlcyhwYXRoLCBlbCkge1xuICAgICAgICB2YXIgYWN0aXZlQ2xhc3MgPSB0aGlzLmFjdGl2ZUNsYXNzIHx8IHRoaXMucm91dGVyLl9saW5rQWN0aXZlQ2xhc3M7XG4gICAgICAgIC8vIGNsZWFyIG9sZCBjbGFzc1xuICAgICAgICBpZiAodGhpcy5wcmV2QWN0aXZlQ2xhc3MgJiYgdGhpcy5wcmV2QWN0aXZlQ2xhc3MgIT09IGFjdGl2ZUNsYXNzKSB7XG4gICAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgdGhpcy5wcmV2QWN0aXZlQ2xhc3MsIHJlbW92ZUNsYXNzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZW1vdmUgcXVlcnkgc3RyaW5nIGJlZm9yZSBtYXRjaGluZ1xuICAgICAgICB2YXIgZGVzdCA9IHRoaXMucGF0aC5yZXBsYWNlKHF1ZXJ5U3RyaW5nUkUsICcnKTtcbiAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZShxdWVyeVN0cmluZ1JFLCAnJyk7XG4gICAgICAgIC8vIGFkZCBuZXcgY2xhc3NcbiAgICAgICAgaWYgKHRoaXMuZXhhY3QpIHtcbiAgICAgICAgICBpZiAoZGVzdCA9PT0gcGF0aCB8fFxuICAgICAgICAgIC8vIGFsc28gYWxsb3cgYWRkaXRpb25hbCB0cmFpbGluZyBzbGFzaFxuICAgICAgICAgIGRlc3QuY2hhckF0KGRlc3QubGVuZ3RoIC0gMSkgIT09ICcvJyAmJiBkZXN0ID09PSBwYXRoLnJlcGxhY2UodHJhaWxpbmdTbGFzaFJFLCAnJykpIHtcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGFjdGl2ZUNsYXNzLCBhZGRDbGFzcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGFjdGl2ZUNsYXNzLCByZW1vdmVDbGFzcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVJFICYmIHRoaXMuYWN0aXZlUkUudGVzdChwYXRoKSkge1xuICAgICAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgYWN0aXZlQ2xhc3MsIGFkZENsYXNzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgYWN0aXZlQ2xhc3MsIHJlbW92ZUNsYXNzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVyKTtcbiAgICAgICAgdGhpcy51bndhdGNoICYmIHRoaXMudW53YXRjaCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gc2FtZU9yaWdpbihsaW5rKSB7XG4gICAgICByZXR1cm4gbGluay5wcm90b2NvbCA9PT0gbG9jYXRpb24ucHJvdG9jb2wgJiYgbGluay5ob3N0bmFtZSA9PT0gbG9jYXRpb24uaG9zdG5hbWUgJiYgbGluay5wb3J0ID09PSBsb2NhdGlvbi5wb3J0O1xuICAgIH1cblxuICAgIC8vIHRoaXMgZnVuY3Rpb24gaXMgY29waWVkIGZyb20gdi1iaW5kOmNsYXNzIGltcGxlbWVudGF0aW9uIHVudGlsXG4gICAgLy8gd2UgcHJvcGVybHkgZXhwb3NlIGl0Li4uXG4gICAgZnVuY3Rpb24gdG9nZ2xlQ2xhc3NlcyhlbCwga2V5LCBmbikge1xuICAgICAga2V5ID0ga2V5LnRyaW0oKTtcbiAgICAgIGlmIChrZXkuaW5kZXhPZignICcpID09PSAtMSkge1xuICAgICAgICBmbihlbCwga2V5KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIGtleXMgPSBrZXkuc3BsaXQoL1xccysvKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgZm4oZWwsIGtleXNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBoaXN0b3J5QmFja2VuZHMgPSB7XG4gICAgYWJzdHJhY3Q6IEFic3RyYWN0SGlzdG9yeSxcbiAgICBoYXNoOiBIYXNoSGlzdG9yeSxcbiAgICBodG1sNTogSFRNTDVIaXN0b3J5XG4gIH07XG5cbiAgLy8gbGF0ZSBiaW5kIGR1cmluZyBpbnN0YWxsXG4gIHZhciBWdWUgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFJvdXRlciBjb25zdHJ1Y3RvclxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqL1xuXG4gIHZhciBSb3V0ZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJvdXRlcigpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMF07XG5cbiAgICAgIHZhciBfcmVmJGhhc2hiYW5nID0gX3JlZi5oYXNoYmFuZztcbiAgICAgIHZhciBoYXNoYmFuZyA9IF9yZWYkaGFzaGJhbmcgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBfcmVmJGhhc2hiYW5nO1xuICAgICAgdmFyIF9yZWYkYWJzdHJhY3QgPSBfcmVmLmFic3RyYWN0O1xuICAgICAgdmFyIGFic3RyYWN0ID0gX3JlZiRhYnN0cmFjdCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJGFic3RyYWN0O1xuICAgICAgdmFyIF9yZWYkaGlzdG9yeSA9IF9yZWYuaGlzdG9yeTtcbiAgICAgIHZhciBoaXN0b3J5ID0gX3JlZiRoaXN0b3J5ID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkaGlzdG9yeTtcbiAgICAgIHZhciBfcmVmJHNhdmVTY3JvbGxQb3NpdGlvbiA9IF9yZWYuc2F2ZVNjcm9sbFBvc2l0aW9uO1xuICAgICAgdmFyIHNhdmVTY3JvbGxQb3NpdGlvbiA9IF9yZWYkc2F2ZVNjcm9sbFBvc2l0aW9uID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkc2F2ZVNjcm9sbFBvc2l0aW9uO1xuICAgICAgdmFyIF9yZWYkdHJhbnNpdGlvbk9uTG9hZCA9IF9yZWYudHJhbnNpdGlvbk9uTG9hZDtcbiAgICAgIHZhciB0cmFuc2l0aW9uT25Mb2FkID0gX3JlZiR0cmFuc2l0aW9uT25Mb2FkID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkdHJhbnNpdGlvbk9uTG9hZDtcbiAgICAgIHZhciBfcmVmJHN1cHByZXNzVHJhbnNpdGlvbkVycm9yID0gX3JlZi5zdXBwcmVzc1RyYW5zaXRpb25FcnJvcjtcbiAgICAgIHZhciBzdXBwcmVzc1RyYW5zaXRpb25FcnJvciA9IF9yZWYkc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3IgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRzdXBwcmVzc1RyYW5zaXRpb25FcnJvcjtcbiAgICAgIHZhciBfcmVmJHJvb3QgPSBfcmVmLnJvb3Q7XG4gICAgICB2YXIgcm9vdCA9IF9yZWYkcm9vdCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IF9yZWYkcm9vdDtcbiAgICAgIHZhciBfcmVmJGxpbmtBY3RpdmVDbGFzcyA9IF9yZWYubGlua0FjdGl2ZUNsYXNzO1xuICAgICAgdmFyIGxpbmtBY3RpdmVDbGFzcyA9IF9yZWYkbGlua0FjdGl2ZUNsYXNzID09PSB1bmRlZmluZWQgPyAndi1saW5rLWFjdGl2ZScgOiBfcmVmJGxpbmtBY3RpdmVDbGFzcztcbiAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBSb3V0ZXIpO1xuXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICghUm91dGVyLmluc3RhbGxlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBpbnN0YWxsIHRoZSBSb3V0ZXIgd2l0aCBWdWUudXNlKCkgYmVmb3JlICcgKyAnY3JlYXRpbmcgYW4gaW5zdGFuY2UuJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFZ1ZSBpbnN0YW5jZXNcbiAgICAgIHRoaXMuYXBwID0gbnVsbDtcbiAgICAgIHRoaXMuX2NoaWxkcmVuID0gW107XG5cbiAgICAgIC8vIHJvdXRlIHJlY29nbml6ZXJcbiAgICAgIHRoaXMuX3JlY29nbml6ZXIgPSBuZXcgUm91dGVSZWNvZ25pemVyKCk7XG4gICAgICB0aGlzLl9ndWFyZFJlY29nbml6ZXIgPSBuZXcgUm91dGVSZWNvZ25pemVyKCk7XG5cbiAgICAgIC8vIHN0YXRlXG4gICAgICB0aGlzLl9zdGFydGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9zdGFydENiID0gbnVsbDtcbiAgICAgIHRoaXMuX2N1cnJlbnRSb3V0ZSA9IHt9O1xuICAgICAgdGhpcy5fY3VycmVudFRyYW5zaXRpb24gPSBudWxsO1xuICAgICAgdGhpcy5fcHJldmlvdXNUcmFuc2l0aW9uID0gbnVsbDtcbiAgICAgIHRoaXMuX25vdEZvdW5kSGFuZGxlciA9IG51bGw7XG4gICAgICB0aGlzLl9ub3RGb3VuZFJlZGlyZWN0ID0gbnVsbDtcbiAgICAgIHRoaXMuX2JlZm9yZUVhY2hIb29rcyA9IFtdO1xuICAgICAgdGhpcy5fYWZ0ZXJFYWNoSG9va3MgPSBbXTtcblxuICAgICAgLy8gdHJpZ2dlciB0cmFuc2l0aW9uIG9uIGluaXRpYWwgcmVuZGVyP1xuICAgICAgdGhpcy5fcmVuZGVyZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3RyYW5zaXRpb25PbkxvYWQgPSB0cmFuc2l0aW9uT25Mb2FkO1xuXG4gICAgICAvLyBoaXN0b3J5IG1vZGVcbiAgICAgIHRoaXMuX3Jvb3QgPSByb290O1xuICAgICAgdGhpcy5fYWJzdHJhY3QgPSBhYnN0cmFjdDtcbiAgICAgIHRoaXMuX2hhc2hiYW5nID0gaGFzaGJhbmc7XG5cbiAgICAgIC8vIGNoZWNrIGlmIEhUTUw1IGhpc3RvcnkgaXMgYXZhaWxhYmxlXG4gICAgICB2YXIgaGFzUHVzaFN0YXRlID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lmhpc3RvcnkgJiYgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlO1xuICAgICAgdGhpcy5faGlzdG9yeSA9IGhpc3RvcnkgJiYgaGFzUHVzaFN0YXRlO1xuICAgICAgdGhpcy5faGlzdG9yeUZhbGxiYWNrID0gaGlzdG9yeSAmJiAhaGFzUHVzaFN0YXRlO1xuXG4gICAgICAvLyBjcmVhdGUgaGlzdG9yeSBvYmplY3RcbiAgICAgIHZhciBpbkJyb3dzZXIgPSBWdWUudXRpbC5pbkJyb3dzZXI7XG4gICAgICB0aGlzLm1vZGUgPSAhaW5Ccm93c2VyIHx8IHRoaXMuX2Fic3RyYWN0ID8gJ2Fic3RyYWN0JyA6IHRoaXMuX2hpc3RvcnkgPyAnaHRtbDUnIDogJ2hhc2gnO1xuXG4gICAgICB2YXIgSGlzdG9yeSA9IGhpc3RvcnlCYWNrZW5kc1t0aGlzLm1vZGVdO1xuICAgICAgdGhpcy5oaXN0b3J5ID0gbmV3IEhpc3Rvcnkoe1xuICAgICAgICByb290OiByb290LFxuICAgICAgICBoYXNoYmFuZzogdGhpcy5faGFzaGJhbmcsXG4gICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShwYXRoLCBzdGF0ZSwgYW5jaG9yKSB7XG4gICAgICAgICAgX3RoaXMuX21hdGNoKHBhdGgsIHN0YXRlLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gb3RoZXIgb3B0aW9uc1xuICAgICAgdGhpcy5fc2F2ZVNjcm9sbFBvc2l0aW9uID0gc2F2ZVNjcm9sbFBvc2l0aW9uO1xuICAgICAgdGhpcy5fbGlua0FjdGl2ZUNsYXNzID0gbGlua0FjdGl2ZUNsYXNzO1xuICAgICAgdGhpcy5fc3VwcHJlc3MgPSBzdXBwcmVzc1RyYW5zaXRpb25FcnJvcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbGxvdyBkaXJlY3RseSBwYXNzaW5nIGNvbXBvbmVudHMgdG8gYSByb3V0ZVxuICAgICAqIGRlZmluaXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG4gICAgICovXG5cbiAgICAvLyBBUEkgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAvKipcbiAgICAqIFJlZ2lzdGVyIGEgbWFwIG9mIHRvcC1sZXZlbCBwYXRocy5cbiAgICAqXG4gICAgKiBAcGFyYW0ge09iamVjdH0gbWFwXG4gICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24gbWFwKF9tYXApIHtcbiAgICAgIGZvciAodmFyIHJvdXRlIGluIF9tYXApIHtcbiAgICAgICAgdGhpcy5vbihyb3V0ZSwgX21hcFtyb3V0ZV0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGEgc2luZ2xlIHJvb3QtbGV2ZWwgcGF0aFxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHJvb3RQYXRoXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBjb21wb25lbnRcbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBbc3ViUm91dGVzXVxuICAgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBbZm9yY2VSZWZyZXNoXVxuICAgICAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW2JlZm9yZV1cbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFthZnRlcl1cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihyb290UGF0aCwgaGFuZGxlcikge1xuICAgICAgaWYgKHJvb3RQYXRoID09PSAnKicpIHtcbiAgICAgICAgdGhpcy5fbm90Rm91bmQoaGFuZGxlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9hZGRSb3V0ZShyb290UGF0aCwgaGFuZGxlciwgW10pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNldCByZWRpcmVjdHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFwXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLnJlZGlyZWN0ID0gZnVuY3Rpb24gcmVkaXJlY3QobWFwKSB7XG4gICAgICBmb3IgKHZhciBwYXRoIGluIG1hcCkge1xuICAgICAgICB0aGlzLl9hZGRSZWRpcmVjdChwYXRoLCBtYXBbcGF0aF0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNldCBhbGlhc2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1hcFxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5hbGlhcyA9IGZ1bmN0aW9uIGFsaWFzKG1hcCkge1xuICAgICAgZm9yICh2YXIgcGF0aCBpbiBtYXApIHtcbiAgICAgICAgdGhpcy5fYWRkQWxpYXMocGF0aCwgbWFwW3BhdGhdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXQgZ2xvYmFsIGJlZm9yZSBob29rLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuYmVmb3JlRWFjaCA9IGZ1bmN0aW9uIGJlZm9yZUVhY2goZm4pIHtcbiAgICAgIHRoaXMuX2JlZm9yZUVhY2hIb29rcy5wdXNoKGZuKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXQgZ2xvYmFsIGFmdGVyIGhvb2suXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5hZnRlckVhY2ggPSBmdW5jdGlvbiBhZnRlckVhY2goZm4pIHtcbiAgICAgIHRoaXMuX2FmdGVyRWFjaEhvb2tzLnB1c2goZm4pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE5hdmlnYXRlIHRvIGEgZ2l2ZW4gcGF0aC5cbiAgICAgKiBUaGUgcGF0aCBjYW4gYmUgYW4gb2JqZWN0IGRlc2NyaWJpbmcgYSBuYW1lZCBwYXRoIGluXG4gICAgICogdGhlIGZvcm1hdCBvZiB7IG5hbWU6ICcuLi4nLCBwYXJhbXM6IHt9LCBxdWVyeToge319XG4gICAgICogVGhlIHBhdGggaXMgYXNzdW1lZCB0byBiZSBhbHJlYWR5IGRlY29kZWQsIGFuZCB3aWxsXG4gICAgICogYmUgcmVzb2x2ZWQgYWdhaW5zdCByb290IChpZiBwcm92aWRlZClcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gcGF0aFxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3JlcGxhY2VdXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gZ28ocGF0aCkge1xuICAgICAgdmFyIHJlcGxhY2UgPSBmYWxzZTtcbiAgICAgIHZhciBhcHBlbmQgPSBmYWxzZTtcbiAgICAgIGlmIChWdWUudXRpbC5pc09iamVjdChwYXRoKSkge1xuICAgICAgICByZXBsYWNlID0gcGF0aC5yZXBsYWNlO1xuICAgICAgICBhcHBlbmQgPSBwYXRoLmFwcGVuZDtcbiAgICAgIH1cbiAgICAgIHBhdGggPSB0aGlzLnN0cmluZ2lmeVBhdGgocGF0aCk7XG4gICAgICBpZiAocGF0aCkge1xuICAgICAgICB0aGlzLmhpc3RvcnkuZ28ocGF0aCwgcmVwbGFjZSwgYXBwZW5kKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2hvcnQgaGFuZCBmb3IgcmVwbGFjaW5nIGN1cnJlbnQgcGF0aFxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUucmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UocGF0aCkge1xuICAgICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgICAgICBwYXRoID0geyBwYXRoOiBwYXRoIH07XG4gICAgICB9XG4gICAgICBwYXRoLnJlcGxhY2UgPSB0cnVlO1xuICAgICAgdGhpcy5nbyhwYXRoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3RhcnQgdGhlIHJvdXRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VnVlQ29uc3RydWN0b3J9IEFwcFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGNvbnRhaW5lclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydChBcHAsIGNvbnRhaW5lciwgY2IpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHRoaXMuX3N0YXJ0ZWQpIHtcbiAgICAgICAgd2FybiQxKCdhbHJlYWR5IHN0YXJ0ZWQuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fc3RhcnRDYiA9IGNiO1xuICAgICAgaWYgKCF0aGlzLmFwcCkge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKCFBcHAgfHwgIWNvbnRhaW5lcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTXVzdCBzdGFydCB2dWUtcm91dGVyIHdpdGggYSBjb21wb25lbnQgYW5kIGEgJyArICdyb290IGNvbnRhaW5lci4nKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKEFwcCBpbnN0YW5jZW9mIFZ1ZSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTXVzdCBzdGFydCB2dWUtcm91dGVyIHdpdGggYSBjb21wb25lbnQsIG5vdCBhICcgKyAnVnVlIGluc3RhbmNlLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2FwcENvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdmFyIEN0b3IgPSB0aGlzLl9hcHBDb25zdHJ1Y3RvciA9IHR5cGVvZiBBcHAgPT09ICdmdW5jdGlvbicgPyBBcHAgOiBWdWUuZXh0ZW5kKEFwcCk7XG4gICAgICAgIC8vIGdpdmUgaXQgYSBuYW1lIGZvciBiZXR0ZXIgZGVidWdnaW5nXG4gICAgICAgIEN0b3Iub3B0aW9ucy5uYW1lID0gQ3Rvci5vcHRpb25zLm5hbWUgfHwgJ1JvdXRlckFwcCc7XG4gICAgICB9XG5cbiAgICAgIC8vIGhhbmRsZSBoaXN0b3J5IGZhbGxiYWNrIGluIGJyb3dzZXJzIHRoYXQgZG8gbm90XG4gICAgICAvLyBzdXBwb3J0IEhUTUw1IGhpc3RvcnkgQVBJXG4gICAgICBpZiAodGhpcy5faGlzdG9yeUZhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG4gICAgICAgIHZhciBfaGlzdG9yeSA9IG5ldyBIVE1MNUhpc3RvcnkoeyByb290OiB0aGlzLl9yb290IH0pO1xuICAgICAgICB2YXIgcGF0aCA9IF9oaXN0b3J5LnJvb3QgPyBfbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZShfaGlzdG9yeS5yb290UkUsICcnKSA6IF9sb2NhdGlvbi5wYXRobmFtZTtcbiAgICAgICAgaWYgKHBhdGggJiYgcGF0aCAhPT0gJy8nKSB7XG4gICAgICAgICAgX2xvY2F0aW9uLmFzc2lnbigoX2hpc3Rvcnkucm9vdCB8fCAnJykgKyAnLycgKyB0aGlzLmhpc3RvcnkuZm9ybWF0UGF0aChwYXRoKSArIF9sb2NhdGlvbi5zZWFyY2gpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmhpc3Rvcnkuc3RhcnQoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3RvcCBsaXN0ZW5pbmcgdG8gcm91dGUgY2hhbmdlcy5cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICB0aGlzLmhpc3Rvcnkuc3RvcCgpO1xuICAgICAgdGhpcy5fc3RhcnRlZCA9IGZhbHNlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBOb3JtYWxpemUgbmFtZWQgcm91dGUgb2JqZWN0IC8gc3RyaW5nIHBhdGhzIGludG9cbiAgICAgKiBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ3xOdW1iZXJ9IHBhdGhcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLnN0cmluZ2lmeVBhdGggPSBmdW5jdGlvbiBzdHJpbmdpZnlQYXRoKHBhdGgpIHtcbiAgICAgIHZhciBnZW5lcmF0ZWRQYXRoID0gJyc7XG4gICAgICBpZiAocGF0aCAmJiB0eXBlb2YgcGF0aCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgaWYgKHBhdGgubmFtZSkge1xuICAgICAgICAgIHZhciBleHRlbmQgPSBWdWUudXRpbC5leHRlbmQ7XG4gICAgICAgICAgdmFyIGN1cnJlbnRQYXJhbXMgPSB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbiAmJiB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbi50by5wYXJhbXM7XG4gICAgICAgICAgdmFyIHRhcmdldFBhcmFtcyA9IHBhdGgucGFyYW1zIHx8IHt9O1xuICAgICAgICAgIHZhciBwYXJhbXMgPSBjdXJyZW50UGFyYW1zID8gZXh0ZW5kKGV4dGVuZCh7fSwgY3VycmVudFBhcmFtcyksIHRhcmdldFBhcmFtcykgOiB0YXJnZXRQYXJhbXM7XG4gICAgICAgICAgZ2VuZXJhdGVkUGF0aCA9IGVuY29kZVVSSSh0aGlzLl9yZWNvZ25pemVyLmdlbmVyYXRlKHBhdGgubmFtZSwgcGFyYW1zKSk7XG4gICAgICAgIH0gZWxzZSBpZiAocGF0aC5wYXRoKSB7XG4gICAgICAgICAgZ2VuZXJhdGVkUGF0aCA9IGVuY29kZVVSSShwYXRoLnBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXRoLnF1ZXJ5KSB7XG4gICAgICAgICAgLy8gbm90ZTogdGhlIGdlbmVyYXRlZCBxdWVyeSBzdHJpbmcgaXMgcHJlLVVSTC1lbmNvZGVkIGJ5IHRoZSByZWNvZ25pemVyXG4gICAgICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5fcmVjb2duaXplci5nZW5lcmF0ZVF1ZXJ5U3RyaW5nKHBhdGgucXVlcnkpO1xuICAgICAgICAgIGlmIChnZW5lcmF0ZWRQYXRoLmluZGV4T2YoJz8nKSA+IC0xKSB7XG4gICAgICAgICAgICBnZW5lcmF0ZWRQYXRoICs9ICcmJyArIHF1ZXJ5LnNsaWNlKDEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnZW5lcmF0ZWRQYXRoICs9IHF1ZXJ5O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2VuZXJhdGVkUGF0aCA9IGVuY29kZVVSSShwYXRoID8gcGF0aCArICcnIDogJycpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGdlbmVyYXRlZFBhdGg7XG4gICAgfTtcblxuICAgIC8vIEludGVybmFsIG1ldGhvZHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIC8qKlxuICAgICogQWRkIGEgcm91dGUgY29udGFpbmluZyBhIGxpc3Qgb2Ygc2VnbWVudHMgdG8gdGhlIGludGVybmFsXG4gICAgKiByb3V0ZSByZWNvZ25pemVyLiBXaWxsIGJlIGNhbGxlZCByZWN1cnNpdmVseSB0byBhZGQgYWxsXG4gICAgKiBwb3NzaWJsZSBzdWItcm91dGVzLlxuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuICAgICogQHBhcmFtIHtBcnJheX0gc2VnbWVudHNcbiAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5fYWRkUm91dGUgPSBmdW5jdGlvbiBfYWRkUm91dGUocGF0aCwgaGFuZGxlciwgc2VnbWVudHMpIHtcbiAgICAgIGd1YXJkQ29tcG9uZW50KHBhdGgsIGhhbmRsZXIpO1xuICAgICAgaGFuZGxlci5wYXRoID0gcGF0aDtcbiAgICAgIGhhbmRsZXIuZnVsbFBhdGggPSAoc2VnbWVudHMucmVkdWNlKGZ1bmN0aW9uIChwYXRoLCBzZWdtZW50KSB7XG4gICAgICAgIHJldHVybiBwYXRoICsgc2VnbWVudC5wYXRoO1xuICAgICAgfSwgJycpICsgcGF0aCkucmVwbGFjZSgnLy8nLCAnLycpO1xuICAgICAgc2VnbWVudHMucHVzaCh7XG4gICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgIGhhbmRsZXI6IGhhbmRsZXJcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fcmVjb2duaXplci5hZGQoc2VnbWVudHMsIHtcbiAgICAgICAgYXM6IGhhbmRsZXIubmFtZVxuICAgICAgfSk7XG4gICAgICAvLyBhZGQgc3ViIHJvdXRlc1xuICAgICAgaWYgKGhhbmRsZXIuc3ViUm91dGVzKSB7XG4gICAgICAgIGZvciAodmFyIHN1YlBhdGggaW4gaGFuZGxlci5zdWJSb3V0ZXMpIHtcbiAgICAgICAgICAvLyByZWN1cnNpdmVseSB3YWxrIGFsbCBzdWIgcm91dGVzXG4gICAgICAgICAgdGhpcy5fYWRkUm91dGUoc3ViUGF0aCwgaGFuZGxlci5zdWJSb3V0ZXNbc3ViUGF0aF0sXG4gICAgICAgICAgLy8gcGFzcyBhIGNvcHkgaW4gcmVjdXJzaW9uIHRvIGF2b2lkIG11dGF0aW5nXG4gICAgICAgICAgLy8gYWNyb3NzIGJyYW5jaGVzXG4gICAgICAgICAgc2VnbWVudHMuc2xpY2UoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBub3RGb3VuZCByb3V0ZSBoYW5kbGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuX25vdEZvdW5kID0gZnVuY3Rpb24gX25vdEZvdW5kKGhhbmRsZXIpIHtcbiAgICAgIGd1YXJkQ29tcG9uZW50KCcqJywgaGFuZGxlcik7XG4gICAgICB0aGlzLl9ub3RGb3VuZEhhbmRsZXIgPSBbeyBoYW5kbGVyOiBoYW5kbGVyIH1dO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSByZWRpcmVjdCByZWNvcmQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSByZWRpcmVjdFBhdGhcbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuX2FkZFJlZGlyZWN0ID0gZnVuY3Rpb24gX2FkZFJlZGlyZWN0KHBhdGgsIHJlZGlyZWN0UGF0aCkge1xuICAgICAgaWYgKHBhdGggPT09ICcqJykge1xuICAgICAgICB0aGlzLl9ub3RGb3VuZFJlZGlyZWN0ID0gcmVkaXJlY3RQYXRoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYWRkR3VhcmQocGF0aCwgcmVkaXJlY3RQYXRoLCB0aGlzLnJlcGxhY2UpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gYWxpYXMgcmVjb3JkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYWxpYXNQYXRoXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLl9hZGRBbGlhcyA9IGZ1bmN0aW9uIF9hZGRBbGlhcyhwYXRoLCBhbGlhc1BhdGgpIHtcbiAgICAgIHRoaXMuX2FkZEd1YXJkKHBhdGgsIGFsaWFzUGF0aCwgdGhpcy5fbWF0Y2gpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBwYXRoIGd1YXJkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWFwcGVkUGF0aFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuX2FkZEd1YXJkID0gZnVuY3Rpb24gX2FkZEd1YXJkKHBhdGgsIG1hcHBlZFBhdGgsIF9oYW5kbGVyKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdGhpcy5fZ3VhcmRSZWNvZ25pemVyLmFkZChbe1xuICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG1hdGNoLCBxdWVyeSkge1xuICAgICAgICAgIHZhciByZWFsUGF0aCA9IG1hcFBhcmFtcyhtYXBwZWRQYXRoLCBtYXRjaC5wYXJhbXMsIHF1ZXJ5KTtcbiAgICAgICAgICBfaGFuZGxlci5jYWxsKF90aGlzMiwgcmVhbFBhdGgpO1xuICAgICAgICB9XG4gICAgICB9XSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGEgcGF0aCBtYXRjaGVzIGFueSByZWRpcmVjdCByZWNvcmRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSAtIGlmIHRydWUsIHdpbGwgc2tpcCBub3JtYWwgbWF0Y2guXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLl9jaGVja0d1YXJkID0gZnVuY3Rpb24gX2NoZWNrR3VhcmQocGF0aCkge1xuICAgICAgdmFyIG1hdGNoZWQgPSB0aGlzLl9ndWFyZFJlY29nbml6ZXIucmVjb2duaXplKHBhdGgsIHRydWUpO1xuICAgICAgaWYgKG1hdGNoZWQpIHtcbiAgICAgICAgbWF0Y2hlZFswXS5oYW5kbGVyKG1hdGNoZWRbMF0sIG1hdGNoZWQucXVlcnlQYXJhbXMpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fbm90Rm91bmRSZWRpcmVjdCkge1xuICAgICAgICBtYXRjaGVkID0gdGhpcy5fcmVjb2duaXplci5yZWNvZ25pemUocGF0aCk7XG4gICAgICAgIGlmICghbWF0Y2hlZCkge1xuICAgICAgICAgIHRoaXMucmVwbGFjZSh0aGlzLl9ub3RGb3VuZFJlZGlyZWN0KTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBNYXRjaCBhIFVSTCBwYXRoIGFuZCBzZXQgdGhlIHJvdXRlIGNvbnRleHQgb24gdm0sXG4gICAgICogdHJpZ2dlcmluZyB2aWV3IHVwZGF0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhdGVdXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFthbmNob3JdXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLl9tYXRjaCA9IGZ1bmN0aW9uIF9tYXRjaChwYXRoLCBzdGF0ZSwgYW5jaG9yKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMuX2NoZWNrR3VhcmQocGF0aCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgY3VycmVudFJvdXRlID0gdGhpcy5fY3VycmVudFJvdXRlO1xuICAgICAgdmFyIGN1cnJlbnRUcmFuc2l0aW9uID0gdGhpcy5fY3VycmVudFRyYW5zaXRpb247XG5cbiAgICAgIGlmIChjdXJyZW50VHJhbnNpdGlvbikge1xuICAgICAgICBpZiAoY3VycmVudFRyYW5zaXRpb24udG8ucGF0aCA9PT0gcGF0aCkge1xuICAgICAgICAgIC8vIGRvIG5vdGhpbmcgaWYgd2UgaGF2ZSBhbiBhY3RpdmUgdHJhbnNpdGlvbiBnb2luZyB0byB0aGUgc2FtZSBwYXRoXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRSb3V0ZS5wYXRoID09PSBwYXRoKSB7XG4gICAgICAgICAgLy8gV2UgYXJlIGdvaW5nIHRvIHRoZSBzYW1lIHBhdGgsIGJ1dCB3ZSBhbHNvIGhhdmUgYW4gb25nb2luZyBidXRcbiAgICAgICAgICAvLyBub3QteWV0LXZhbGlkYXRlZCB0cmFuc2l0aW9uLiBBYm9ydCB0aGF0IHRyYW5zaXRpb24gYW5kIHJlc2V0IHRvXG4gICAgICAgICAgLy8gcHJldiB0cmFuc2l0aW9uLlxuICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uLmFib3J0ZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uID0gdGhpcy5fcHJldlRyYW5zaXRpb247XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGdvaW5nIHRvIGEgdG90YWxseSBkaWZmZXJlbnQgcGF0aC4gYWJvcnQgb25nb2luZyB0cmFuc2l0aW9uLlxuICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uLmFib3J0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGNvbnN0cnVjdCBuZXcgcm91dGUgYW5kIHRyYW5zaXRpb24gY29udGV4dFxuICAgICAgdmFyIHJvdXRlID0gbmV3IFJvdXRlKHBhdGgsIHRoaXMpO1xuICAgICAgdmFyIHRyYW5zaXRpb24gPSBuZXcgUm91dGVUcmFuc2l0aW9uKHRoaXMsIHJvdXRlLCBjdXJyZW50Um91dGUpO1xuXG4gICAgICAvLyBjdXJyZW50IHRyYW5zaXRpb24gaXMgdXBkYXRlZCByaWdodCBub3cuXG4gICAgICAvLyBob3dldmVyLCBjdXJyZW50IHJvdXRlIHdpbGwgb25seSBiZSB1cGRhdGVkIGFmdGVyIHRoZSB0cmFuc2l0aW9uIGhhc1xuICAgICAgLy8gYmVlbiB2YWxpZGF0ZWQuXG4gICAgICB0aGlzLl9wcmV2VHJhbnNpdGlvbiA9IGN1cnJlbnRUcmFuc2l0aW9uO1xuICAgICAgdGhpcy5fY3VycmVudFRyYW5zaXRpb24gPSB0cmFuc2l0aW9uO1xuXG4gICAgICBpZiAoIXRoaXMuYXBwKSB7XG4gICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gaW5pdGlhbCByZW5kZXJcbiAgICAgICAgICB2YXIgcm91dGVyID0gX3RoaXMzO1xuICAgICAgICAgIF90aGlzMy5hcHAgPSBuZXcgX3RoaXMzLl9hcHBDb25zdHJ1Y3Rvcih7XG4gICAgICAgICAgICBlbDogX3RoaXMzLl9hcHBDb250YWluZXIsXG4gICAgICAgICAgICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge1xuICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIgPSByb3V0ZXI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX21ldGE6IHtcbiAgICAgICAgICAgICAgJHJvdXRlOiByb3V0ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBjaGVjayBnbG9iYWwgYmVmb3JlIGhvb2tcbiAgICAgIHZhciBiZWZvcmVIb29rcyA9IHRoaXMuX2JlZm9yZUVhY2hIb29rcztcbiAgICAgIHZhciBzdGFydFRyYW5zaXRpb24gPSBmdW5jdGlvbiBzdGFydFRyYW5zaXRpb24oKSB7XG4gICAgICAgIHRyYW5zaXRpb24uc3RhcnQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzMy5fcG9zdFRyYW5zaXRpb24ocm91dGUsIHN0YXRlLCBhbmNob3IpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIGlmIChiZWZvcmVIb29rcy5sZW5ndGgpIHtcbiAgICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShiZWZvcmVIb29rcywgZnVuY3Rpb24gKGhvb2ssIF8sIG5leHQpIHtcbiAgICAgICAgICBpZiAodHJhbnNpdGlvbiA9PT0gX3RoaXMzLl9jdXJyZW50VHJhbnNpdGlvbikge1xuICAgICAgICAgICAgdHJhbnNpdGlvbi5jYWxsSG9vayhob29rLCBudWxsLCBuZXh0LCB7XG4gICAgICAgICAgICAgIGV4cGVjdEJvb2xlYW46IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgc3RhcnRUcmFuc2l0aW9uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXJ0VHJhbnNpdGlvbigpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuX3JlbmRlcmVkICYmIHRoaXMuX3N0YXJ0Q2IpIHtcbiAgICAgICAgdGhpcy5fc3RhcnRDYi5jYWxsKG51bGwpO1xuICAgICAgfVxuXG4gICAgICAvLyBIQUNLOlxuICAgICAgLy8gc2V0IHJlbmRlcmVkIHRvIHRydWUgYWZ0ZXIgdGhlIHRyYW5zaXRpb24gc3RhcnQsIHNvXG4gICAgICAvLyB0aGF0IGNvbXBvbmVudHMgdGhhdCBhcmUgYWNpdHZhdGVkIHN5bmNocm9ub3VzbHkga25vd1xuICAgICAgLy8gd2hldGhlciBpdCBpcyB0aGUgaW5pdGlhbCByZW5kZXIuXG4gICAgICB0aGlzLl9yZW5kZXJlZCA9IHRydWU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNldCBjdXJyZW50IHRvIHRoZSBuZXcgdHJhbnNpdGlvbi5cbiAgICAgKiBUaGlzIGlzIGNhbGxlZCBieSB0aGUgdHJhbnNpdGlvbiBvYmplY3Qgd2hlbiB0aGVcbiAgICAgKiB2YWxpZGF0aW9uIG9mIGEgcm91dGUgaGFzIHN1Y2NlZWRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5fb25UcmFuc2l0aW9uVmFsaWRhdGVkID0gZnVuY3Rpb24gX29uVHJhbnNpdGlvblZhbGlkYXRlZCh0cmFuc2l0aW9uKSB7XG4gICAgICAvLyBzZXQgY3VycmVudCByb3V0ZVxuICAgICAgdmFyIHJvdXRlID0gdGhpcy5fY3VycmVudFJvdXRlID0gdHJhbnNpdGlvbi50bztcbiAgICAgIC8vIHVwZGF0ZSByb3V0ZSBjb250ZXh0IGZvciBhbGwgY2hpbGRyZW5cbiAgICAgIGlmICh0aGlzLmFwcC4kcm91dGUgIT09IHJvdXRlKSB7XG4gICAgICAgIHRoaXMuYXBwLiRyb3V0ZSA9IHJvdXRlO1xuICAgICAgICB0aGlzLl9jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgIGNoaWxkLiRyb3V0ZSA9IHJvdXRlO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIGNhbGwgZ2xvYmFsIGFmdGVyIGhvb2tcbiAgICAgIGlmICh0aGlzLl9hZnRlckVhY2hIb29rcy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5fYWZ0ZXJFYWNoSG9va3MuZm9yRWFjaChmdW5jdGlvbiAoaG9vaykge1xuICAgICAgICAgIHJldHVybiBob29rLmNhbGwobnVsbCwge1xuICAgICAgICAgICAgdG86IHRyYW5zaXRpb24udG8sXG4gICAgICAgICAgICBmcm9tOiB0cmFuc2l0aW9uLmZyb21cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbi5kb25lID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIHN0dWZmIGFmdGVyIHRoZSB0cmFuc2l0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSb3V0ZX0gcm91dGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3N0YXRlXVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbYW5jaG9yXVxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5fcG9zdFRyYW5zaXRpb24gPSBmdW5jdGlvbiBfcG9zdFRyYW5zaXRpb24ocm91dGUsIHN0YXRlLCBhbmNob3IpIHtcbiAgICAgIC8vIGhhbmRsZSBzY3JvbGwgcG9zaXRpb25zXG4gICAgICAvLyBzYXZlZCBzY3JvbGwgcG9zaXRpb25zIHRha2UgcHJpb3JpdHlcbiAgICAgIC8vIHRoZW4gd2UgY2hlY2sgaWYgdGhlIHBhdGggaGFzIGFuIGFuY2hvclxuICAgICAgdmFyIHBvcyA9IHN0YXRlICYmIHN0YXRlLnBvcztcbiAgICAgIGlmIChwb3MgJiYgdGhpcy5fc2F2ZVNjcm9sbFBvc2l0aW9uKSB7XG4gICAgICAgIFZ1ZS5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgd2luZG93LnNjcm9sbFRvKHBvcy54LCBwb3MueSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChhbmNob3IpIHtcbiAgICAgICAgVnVlLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhbmNob3Iuc2xpY2UoMSkpO1xuICAgICAgICAgIGlmIChlbCkge1xuICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKHdpbmRvdy5zY3JvbGxYLCBlbC5vZmZzZXRUb3ApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBSb3V0ZXI7XG4gIH0pKCk7XG5cbiAgZnVuY3Rpb24gZ3VhcmRDb21wb25lbnQocGF0aCwgaGFuZGxlcikge1xuICAgIHZhciBjb21wID0gaGFuZGxlci5jb21wb25lbnQ7XG4gICAgaWYgKFZ1ZS51dGlsLmlzUGxhaW5PYmplY3QoY29tcCkpIHtcbiAgICAgIGNvbXAgPSBoYW5kbGVyLmNvbXBvbmVudCA9IFZ1ZS5leHRlbmQoY29tcCk7XG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICh0eXBlb2YgY29tcCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaGFuZGxlci5jb21wb25lbnQgPSBudWxsO1xuICAgICAgd2FybiQxKCdpbnZhbGlkIGNvbXBvbmVudCBmb3Igcm91dGUgXCInICsgcGF0aCArICdcIi4nKTtcbiAgICB9XG4gIH1cblxuICAvKiBJbnN0YWxsYXRpb24gKi9cblxuICBSb3V0ZXIuaW5zdGFsbGVkID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIEluc3RhbGxhdGlvbiBpbnRlcmZhY2UuXG4gICAqIEluc3RhbGwgdGhlIG5lY2Vzc2FyeSBkaXJlY3RpdmVzLlxuICAgKi9cblxuICBSb3V0ZXIuaW5zdGFsbCA9IGZ1bmN0aW9uIChleHRlcm5hbFZ1ZSkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChSb3V0ZXIuaW5zdGFsbGVkKSB7XG4gICAgICB3YXJuJDEoJ2FscmVhZHkgaW5zdGFsbGVkLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBWdWUgPSBleHRlcm5hbFZ1ZTtcbiAgICBhcHBseU92ZXJyaWRlKFZ1ZSk7XG4gICAgVmlldyhWdWUpO1xuICAgIExpbmsoVnVlKTtcbiAgICBleHBvcnRzJDEuVnVlID0gVnVlO1xuICAgIFJvdXRlci5pbnN0YWxsZWQgPSB0cnVlO1xuICB9O1xuXG4gIC8vIGF1dG8gaW5zdGFsbFxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5WdWUpIHtcbiAgICB3aW5kb3cuVnVlLnVzZShSb3V0ZXIpO1xuICB9XG5cbiAgcmV0dXJuIFJvdXRlcjtcblxufSkpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1yb3V0ZXIvZGlzdC92dWUtcm91dGVyLmpzXG4gKiogbW9kdWxlIGlkID0gMTg3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9hcGktdGFibGUudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vYXBpLXRhYmxlLnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9hcGktdGFibGUudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2Rldi9zcmMvY29tcG9uZW50cy9hcGktdGFibGUudnVlXG4gKiogbW9kdWxlIGlkID0gMTg4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2Rldi9zcmMvdmlld3MvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMTg5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL2FsZXJ0L2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9jb2xsYXBzYWJsZS1wYW5lbC9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAxOTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2xlZ2FsLWNvbnRhaW5lci52dWVcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9sZWdhbC1jb250YWluZXIudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2xlZ2FsLWNvbnRhaW5lci52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY29udGFpbmVyLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY291bnRlci52dWVcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9sZWdhbC1jb3VudGVyLnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9sZWdhbC1jb3VudGVyLnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb3VudGVyLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vb3ZlcmxheS1jb250YWluZXIudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vb3ZlcmxheS1jb250YWluZXIudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXktY29udGFpbmVyLnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXktY29udGFpbmVyLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vb3ZlcmxheS52dWVcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXkudnVlXG4gKiogbW9kdWxlIGlkID0gMTk1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL3N0ZXAtdHJhY2tlci9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAxOTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3RhYnMudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vdGFicy52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vdGFicy52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYnMudnVlXG4gKiogbW9kdWxlIGlkID0gMTk3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIFZ1ZS5qcyB2MS4wLjI2XG4gKiAoYykgMjAxNiBFdmFuIFlvdVxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIHNldChvYmosIGtleSwgdmFsKSB7XG4gIGlmIChoYXNPd24ob2JqLCBrZXkpKSB7XG4gICAgb2JqW2tleV0gPSB2YWw7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChvYmouX2lzVnVlKSB7XG4gICAgc2V0KG9iai5fZGF0YSwga2V5LCB2YWwpO1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgb2IgPSBvYmouX19vYl9fO1xuICBpZiAoIW9iKSB7XG4gICAgb2JqW2tleV0gPSB2YWw7XG4gICAgcmV0dXJuO1xuICB9XG4gIG9iLmNvbnZlcnQoa2V5LCB2YWwpO1xuICBvYi5kZXAubm90aWZ5KCk7XG4gIGlmIChvYi52bXMpIHtcbiAgICB2YXIgaSA9IG9iLnZtcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFyIHZtID0gb2Iudm1zW2ldO1xuICAgICAgdm0uX3Byb3h5KGtleSk7XG4gICAgICB2bS5fZGlnZXN0KCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB2YWw7XG59XG5cbi8qKlxuICogRGVsZXRlIGEgcHJvcGVydHkgYW5kIHRyaWdnZXIgY2hhbmdlIGlmIG5lY2Vzc2FyeS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKi9cblxuZnVuY3Rpb24gZGVsKG9iaiwga2V5KSB7XG4gIGlmICghaGFzT3duKG9iaiwga2V5KSkge1xuICAgIHJldHVybjtcbiAgfVxuICBkZWxldGUgb2JqW2tleV07XG4gIHZhciBvYiA9IG9iai5fX29iX187XG4gIGlmICghb2IpIHtcbiAgICBpZiAob2JqLl9pc1Z1ZSkge1xuICAgICAgZGVsZXRlIG9iai5fZGF0YVtrZXldO1xuICAgICAgb2JqLl9kaWdlc3QoKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG4gIG9iLmRlcC5ub3RpZnkoKTtcbiAgaWYgKG9iLnZtcykge1xuICAgIHZhciBpID0gb2Iudm1zLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YXIgdm0gPSBvYi52bXNbaV07XG4gICAgICB2bS5fdW5wcm94eShrZXkpO1xuICAgICAgdm0uX2RpZ2VzdCgpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHRoZSBvYmplY3QgaGFzIHRoZSBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGhhc093bihvYmosIGtleSkge1xuICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZXhwcmVzc2lvbiBpcyBhIGxpdGVyYWwgdmFsdWUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG52YXIgbGl0ZXJhbFZhbHVlUkUgPSAvXlxccz8odHJ1ZXxmYWxzZXwtP1tcXGRcXC5dK3wnW14nXSonfFwiW15cIl0qXCIpXFxzPyQvO1xuXG5mdW5jdGlvbiBpc0xpdGVyYWwoZXhwKSB7XG4gIHJldHVybiBsaXRlcmFsVmFsdWVSRS50ZXN0KGV4cCk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBzdHJpbmcgc3RhcnRzIHdpdGggJCBvciBfXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc1Jlc2VydmVkKHN0cikge1xuICB2YXIgYyA9IChzdHIgKyAnJykuY2hhckNvZGVBdCgwKTtcbiAgcmV0dXJuIGMgPT09IDB4MjQgfHwgYyA9PT0gMHg1Rjtcbn1cblxuLyoqXG4gKiBHdWFyZCB0ZXh0IG91dHB1dCwgbWFrZSBzdXJlIHVuZGVmaW5lZCBvdXRwdXRzXG4gKiBlbXB0eSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gX3RvU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZS50b1N0cmluZygpO1xufVxuXG4vKipcbiAqIENoZWNrIGFuZCBjb252ZXJ0IHBvc3NpYmxlIG51bWVyaWMgc3RyaW5ncyB0byBudW1iZXJzXG4gKiBiZWZvcmUgc2V0dGluZyBiYWNrIHRvIGRhdGFcbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHsqfE51bWJlcn1cbiAqL1xuXG5mdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcGFyc2VkID0gTnVtYmVyKHZhbHVlKTtcbiAgICByZXR1cm4gaXNOYU4ocGFyc2VkKSA/IHZhbHVlIDogcGFyc2VkO1xuICB9XG59XG5cbi8qKlxuICogQ29udmVydCBzdHJpbmcgYm9vbGVhbiBsaXRlcmFscyBpbnRvIHJlYWwgYm9vbGVhbnMuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7KnxCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIHRvQm9vbGVhbih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT09ICd0cnVlJyA/IHRydWUgOiB2YWx1ZSA9PT0gJ2ZhbHNlJyA/IGZhbHNlIDogdmFsdWU7XG59XG5cbi8qKlxuICogU3RyaXAgcXVvdGVzIGZyb20gYSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmcgfCBmYWxzZX1cbiAqL1xuXG5mdW5jdGlvbiBzdHJpcFF1b3RlcyhzdHIpIHtcbiAgdmFyIGEgPSBzdHIuY2hhckNvZGVBdCgwKTtcbiAgdmFyIGIgPSBzdHIuY2hhckNvZGVBdChzdHIubGVuZ3RoIC0gMSk7XG4gIHJldHVybiBhID09PSBiICYmIChhID09PSAweDIyIHx8IGEgPT09IDB4MjcpID8gc3RyLnNsaWNlKDEsIC0xKSA6IHN0cjtcbn1cblxuLyoqXG4gKiBDYW1lbGl6ZSBhIGh5cGhlbi1kZWxtaXRlZCBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbnZhciBjYW1lbGl6ZVJFID0gLy0oXFx3KS9nO1xuXG5mdW5jdGlvbiBjYW1lbGl6ZShzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKGNhbWVsaXplUkUsIHRvVXBwZXIpO1xufVxuXG5mdW5jdGlvbiB0b1VwcGVyKF8sIGMpIHtcbiAgcmV0dXJuIGMgPyBjLnRvVXBwZXJDYXNlKCkgOiAnJztcbn1cblxuLyoqXG4gKiBIeXBoZW5hdGUgYSBjYW1lbENhc2Ugc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG52YXIgaHlwaGVuYXRlUkUgPSAvKFthLXpcXGRdKShbQS1aXSkvZztcblxuZnVuY3Rpb24gaHlwaGVuYXRlKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoaHlwaGVuYXRlUkUsICckMS0kMicpLnRvTG93ZXJDYXNlKCk7XG59XG5cbi8qKlxuICogQ29udmVydHMgaHlwaGVuL3VuZGVyc2NvcmUvc2xhc2ggZGVsaW1pdGVyZWQgbmFtZXMgaW50b1xuICogY2FtZWxpemVkIGNsYXNzTmFtZXMuXG4gKlxuICogZS5nLiBteS1jb21wb25lbnQgPT4gTXlDb21wb25lbnRcbiAqICAgICAgc29tZV9lbHNlICAgID0+IFNvbWVFbHNlXG4gKiAgICAgIHNvbWUvY29tcCAgICA9PiBTb21lQ29tcFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG52YXIgY2xhc3NpZnlSRSA9IC8oPzpefFstX1xcL10pKFxcdykvZztcblxuZnVuY3Rpb24gY2xhc3NpZnkoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShjbGFzc2lmeVJFLCB0b1VwcGVyKTtcbn1cblxuLyoqXG4gKiBTaW1wbGUgYmluZCwgZmFzdGVyIHRoYW4gbmF0aXZlXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjdHhcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGJpbmQoZm4sIGN0eCkge1xuICByZXR1cm4gZnVuY3Rpb24gKGEpIHtcbiAgICB2YXIgbCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgcmV0dXJuIGwgPyBsID4gMSA/IGZuLmFwcGx5KGN0eCwgYXJndW1lbnRzKSA6IGZuLmNhbGwoY3R4LCBhKSA6IGZuLmNhbGwoY3R4KTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGFuIEFycmF5LWxpa2Ugb2JqZWN0IHRvIGEgcmVhbCBBcnJheS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5LWxpa2V9IGxpc3RcbiAqIEBwYXJhbSB7TnVtYmVyfSBbc3RhcnRdIC0gc3RhcnQgaW5kZXhcbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5cbmZ1bmN0aW9uIHRvQXJyYXkobGlzdCwgc3RhcnQpIHtcbiAgc3RhcnQgPSBzdGFydCB8fCAwO1xuICB2YXIgaSA9IGxpc3QubGVuZ3RoIC0gc3RhcnQ7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoaSk7XG4gIHdoaWxlIChpLS0pIHtcbiAgICByZXRbaV0gPSBsaXN0W2kgKyBzdGFydF07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBNaXggcHJvcGVydGllcyBpbnRvIHRhcmdldCBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRvXG4gKiBAcGFyYW0ge09iamVjdH0gZnJvbVxuICovXG5cbmZ1bmN0aW9uIGV4dGVuZCh0bywgZnJvbSkge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGZyb20pO1xuICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgdG9ba2V5c1tpXV0gPSBmcm9tW2tleXNbaV1dO1xuICB9XG4gIHJldHVybiB0bztcbn1cblxuLyoqXG4gKiBRdWljayBvYmplY3QgY2hlY2sgLSB0aGlzIGlzIHByaW1hcmlseSB1c2VkIHRvIHRlbGxcbiAqIE9iamVjdHMgZnJvbSBwcmltaXRpdmUgdmFsdWVzIHdoZW4gd2Uga25vdyB0aGUgdmFsdWVcbiAqIGlzIGEgSlNPTi1jb21wbGlhbnQgdHlwZS5cbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc09iamVjdChvYmopIHtcbiAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBTdHJpY3Qgb2JqZWN0IHR5cGUgY2hlY2suIE9ubHkgcmV0dXJucyB0cnVlXG4gKiBmb3IgcGxhaW4gSmF2YVNjcmlwdCBvYmplY3RzLlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG52YXIgT0JKRUNUX1NUUklORyA9ICdbb2JqZWN0IE9iamVjdF0nO1xuXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iaikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSBPQkpFQ1RfU1RSSU5HO1xufVxuXG4vKipcbiAqIEFycmF5IHR5cGUgY2hlY2suXG4gKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG4vKipcbiAqIERlZmluZSBhIHByb3BlcnR5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtlbnVtZXJhYmxlXVxuICovXG5cbmZ1bmN0aW9uIGRlZihvYmosIGtleSwgdmFsLCBlbnVtZXJhYmxlKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgIHZhbHVlOiB2YWwsXG4gICAgZW51bWVyYWJsZTogISFlbnVtZXJhYmxlLFxuICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn1cblxuLyoqXG4gKiBEZWJvdW5jZSBhIGZ1bmN0aW9uIHNvIGl0IG9ubHkgZ2V0cyBjYWxsZWQgYWZ0ZXIgdGhlXG4gKiBpbnB1dCBzdG9wcyBhcnJpdmluZyBhZnRlciB0aGUgZ2l2ZW4gd2FpdCBwZXJpb2QuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuY1xuICogQHBhcmFtIHtOdW1iZXJ9IHdhaXRcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSAtIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cbiAqL1xuXG5mdW5jdGlvbiBfZGVib3VuY2UoZnVuYywgd2FpdCkge1xuICB2YXIgdGltZW91dCwgYXJncywgY29udGV4dCwgdGltZXN0YW1wLCByZXN1bHQ7XG4gIHZhciBsYXRlciA9IGZ1bmN0aW9uIGxhdGVyKCkge1xuICAgIHZhciBsYXN0ID0gRGF0ZS5ub3coKSAtIHRpbWVzdGFtcDtcbiAgICBpZiAobGFzdCA8IHdhaXQgJiYgbGFzdCA+PSAwKSB7XG4gICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICB9XG4gIH07XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgY29udGV4dCA9IHRoaXM7XG4gICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgIGlmICghdGltZW91dCkge1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxuXG4vKipcbiAqIE1hbnVhbCBpbmRleE9mIGJlY2F1c2UgaXQncyBzbGlnaHRseSBmYXN0ZXIgdGhhblxuICogbmF0aXZlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGFyclxuICogQHBhcmFtIHsqfSBvYmpcbiAqL1xuXG5mdW5jdGlvbiBpbmRleE9mKGFyciwgb2JqKSB7XG4gIHZhciBpID0gYXJyLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIGlmIChhcnJbaV0gPT09IG9iaikgcmV0dXJuIGk7XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG4vKipcbiAqIE1ha2UgYSBjYW5jZWxsYWJsZSB2ZXJzaW9uIG9mIGFuIGFzeW5jIGNhbGxiYWNrLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjYW5jZWxsYWJsZShmbikge1xuICB2YXIgY2IgPSBmdW5jdGlvbiBjYigpIHtcbiAgICBpZiAoIWNiLmNhbmNlbGxlZCkge1xuICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9O1xuICBjYi5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgY2IuY2FuY2VsbGVkID0gdHJ1ZTtcbiAgfTtcbiAgcmV0dXJuIGNiO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHR3byB2YWx1ZXMgYXJlIGxvb3NlbHkgZXF1YWwgLSB0aGF0IGlzLFxuICogaWYgdGhleSBhcmUgcGxhaW4gb2JqZWN0cywgZG8gdGhleSBoYXZlIHRoZSBzYW1lIHNoYXBlP1xuICpcbiAqIEBwYXJhbSB7Kn0gYVxuICogQHBhcmFtIHsqfSBiXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGxvb3NlRXF1YWwoYSwgYikge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cbiAgcmV0dXJuIGEgPT0gYiB8fCAoaXNPYmplY3QoYSkgJiYgaXNPYmplY3QoYikgPyBKU09OLnN0cmluZ2lmeShhKSA9PT0gSlNPTi5zdHJpbmdpZnkoYikgOiBmYWxzZSk7XG4gIC8qIGVzbGludC1lbmFibGUgZXFlcWVxICovXG59XG5cbnZhciBoYXNQcm90byA9ICgnX19wcm90b19fJyBpbiB7fSk7XG5cbi8vIEJyb3dzZXIgZW52aXJvbm1lbnQgc25pZmZpbmdcbnZhciBpbkJyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwod2luZG93KSAhPT0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cbi8vIGRldGVjdCBkZXZ0b29sc1xudmFyIGRldnRvb2xzID0gaW5Ccm93c2VyICYmIHdpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO1xuXG4vLyBVQSBzbmlmZmluZyBmb3Igd29ya2luZyBhcm91bmQgYnJvd3Nlci1zcGVjaWZpYyBxdWlya3NcbnZhciBVQSA9IGluQnJvd3NlciAmJiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xudmFyIGlzSUUgPSBVQSAmJiBVQS5pbmRleE9mKCd0cmlkZW50JykgPiAwO1xudmFyIGlzSUU5ID0gVUEgJiYgVUEuaW5kZXhPZignbXNpZSA5LjAnKSA+IDA7XG52YXIgaXNBbmRyb2lkID0gVUEgJiYgVUEuaW5kZXhPZignYW5kcm9pZCcpID4gMDtcbnZhciBpc0lvcyA9IFVBICYmIC8oaXBob25lfGlwYWR8aXBvZHxpb3MpL2kudGVzdChVQSk7XG52YXIgaW9zVmVyc2lvbk1hdGNoID0gaXNJb3MgJiYgVUEubWF0Y2goL29zIChbXFxkX10rKS8pO1xudmFyIGlvc1ZlcnNpb24gPSBpb3NWZXJzaW9uTWF0Y2ggJiYgaW9zVmVyc2lvbk1hdGNoWzFdLnNwbGl0KCdfJyk7XG5cbi8vIGRldGVjdGluZyBpT1MgVUlXZWJWaWV3IGJ5IGluZGV4ZWREQlxudmFyIGhhc011dGF0aW9uT2JzZXJ2ZXJCdWcgPSBpb3NWZXJzaW9uICYmIE51bWJlcihpb3NWZXJzaW9uWzBdKSA+PSA5ICYmIE51bWJlcihpb3NWZXJzaW9uWzFdKSA+PSAzICYmICF3aW5kb3cuaW5kZXhlZERCO1xuXG52YXIgdHJhbnNpdGlvblByb3AgPSB1bmRlZmluZWQ7XG52YXIgdHJhbnNpdGlvbkVuZEV2ZW50ID0gdW5kZWZpbmVkO1xudmFyIGFuaW1hdGlvblByb3AgPSB1bmRlZmluZWQ7XG52YXIgYW5pbWF0aW9uRW5kRXZlbnQgPSB1bmRlZmluZWQ7XG5cbi8vIFRyYW5zaXRpb24gcHJvcGVydHkvZXZlbnQgc25pZmZpbmdcbmlmIChpbkJyb3dzZXIgJiYgIWlzSUU5KSB7XG4gIHZhciBpc1dlYmtpdFRyYW5zID0gd2luZG93Lm9udHJhbnNpdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmIHdpbmRvdy5vbndlYmtpdHRyYW5zaXRpb25lbmQgIT09IHVuZGVmaW5lZDtcbiAgdmFyIGlzV2Via2l0QW5pbSA9IHdpbmRvdy5vbmFuaW1hdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmIHdpbmRvdy5vbndlYmtpdGFuaW1hdGlvbmVuZCAhPT0gdW5kZWZpbmVkO1xuICB0cmFuc2l0aW9uUHJvcCA9IGlzV2Via2l0VHJhbnMgPyAnV2Via2l0VHJhbnNpdGlvbicgOiAndHJhbnNpdGlvbic7XG4gIHRyYW5zaXRpb25FbmRFdmVudCA9IGlzV2Via2l0VHJhbnMgPyAnd2Via2l0VHJhbnNpdGlvbkVuZCcgOiAndHJhbnNpdGlvbmVuZCc7XG4gIGFuaW1hdGlvblByb3AgPSBpc1dlYmtpdEFuaW0gPyAnV2Via2l0QW5pbWF0aW9uJyA6ICdhbmltYXRpb24nO1xuICBhbmltYXRpb25FbmRFdmVudCA9IGlzV2Via2l0QW5pbSA/ICd3ZWJraXRBbmltYXRpb25FbmQnIDogJ2FuaW1hdGlvbmVuZCc7XG59XG5cbi8qKlxuICogRGVmZXIgYSB0YXNrIHRvIGV4ZWN1dGUgaXQgYXN5bmNocm9ub3VzbHkuIElkZWFsbHkgdGhpc1xuICogc2hvdWxkIGJlIGV4ZWN1dGVkIGFzIGEgbWljcm90YXNrLCBzbyB3ZSBsZXZlcmFnZVxuICogTXV0YXRpb25PYnNlcnZlciBpZiBpdCdzIGF2YWlsYWJsZSwgYW5kIGZhbGxiYWNrIHRvXG4gKiBzZXRUaW1lb3V0KDApLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKiBAcGFyYW0ge09iamVjdH0gY3R4XG4gKi9cblxudmFyIG5leHRUaWNrID0gKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNhbGxiYWNrcyA9IFtdO1xuICB2YXIgcGVuZGluZyA9IGZhbHNlO1xuICB2YXIgdGltZXJGdW5jO1xuICBmdW5jdGlvbiBuZXh0VGlja0hhbmRsZXIoKSB7XG4gICAgcGVuZGluZyA9IGZhbHNlO1xuICAgIHZhciBjb3BpZXMgPSBjYWxsYmFja3Muc2xpY2UoMCk7XG4gICAgY2FsbGJhY2tzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3BpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvcGllc1tpXSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnICYmICFoYXNNdXRhdGlvbk9ic2VydmVyQnVnKSB7XG4gICAgdmFyIGNvdW50ZXIgPSAxO1xuICAgIHZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKG5leHRUaWNrSGFuZGxlcik7XG4gICAgdmFyIHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY291bnRlcik7XG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0ZXh0Tm9kZSwge1xuICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZVxuICAgIH0pO1xuICAgIHRpbWVyRnVuYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvdW50ZXIgPSAoY291bnRlciArIDEpICUgMjtcbiAgICAgIHRleHROb2RlLmRhdGEgPSBjb3VudGVyO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgLy8gd2VicGFjayBhdHRlbXB0cyB0byBpbmplY3QgYSBzaGltIGZvciBzZXRJbW1lZGlhdGVcbiAgICAvLyBpZiBpdCBpcyB1c2VkIGFzIGEgZ2xvYmFsLCBzbyB3ZSBoYXZlIHRvIHdvcmsgYXJvdW5kIHRoYXQgdG9cbiAgICAvLyBhdm9pZCBidW5kbGluZyB1bm5lY2Vzc2FyeSBjb2RlLlxuICAgIHZhciBjb250ZXh0ID0gaW5Ccm93c2VyID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB7fTtcbiAgICB0aW1lckZ1bmMgPSBjb250ZXh0LnNldEltbWVkaWF0ZSB8fCBzZXRUaW1lb3V0O1xuICB9XG4gIHJldHVybiBmdW5jdGlvbiAoY2IsIGN0eCkge1xuICAgIHZhciBmdW5jID0gY3R4ID8gZnVuY3Rpb24gKCkge1xuICAgICAgY2IuY2FsbChjdHgpO1xuICAgIH0gOiBjYjtcbiAgICBjYWxsYmFja3MucHVzaChmdW5jKTtcbiAgICBpZiAocGVuZGluZykgcmV0dXJuO1xuICAgIHBlbmRpbmcgPSB0cnVlO1xuICAgIHRpbWVyRnVuYyhuZXh0VGlja0hhbmRsZXIsIDApO1xuICB9O1xufSkoKTtcblxudmFyIF9TZXQgPSB1bmRlZmluZWQ7XG4vKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbmlmICh0eXBlb2YgU2V0ICE9PSAndW5kZWZpbmVkJyAmJiBTZXQudG9TdHJpbmcoKS5tYXRjaCgvbmF0aXZlIGNvZGUvKSkge1xuICAvLyB1c2UgbmF0aXZlIFNldCB3aGVuIGF2YWlsYWJsZS5cbiAgX1NldCA9IFNldDtcbn0gZWxzZSB7XG4gIC8vIGEgbm9uLXN0YW5kYXJkIFNldCBwb2x5ZmlsbCB0aGF0IG9ubHkgd29ya3Mgd2l0aCBwcmltaXRpdmUga2V5cy5cbiAgX1NldCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH07XG4gIF9TZXQucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5zZXRba2V5XSAhPT0gdW5kZWZpbmVkO1xuICB9O1xuICBfU2V0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgdGhpcy5zZXRba2V5XSA9IDE7XG4gIH07XG4gIF9TZXQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc2V0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gQ2FjaGUobGltaXQpIHtcbiAgdGhpcy5zaXplID0gMDtcbiAgdGhpcy5saW1pdCA9IGxpbWl0O1xuICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2tleW1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG59XG5cbnZhciBwID0gQ2FjaGUucHJvdG90eXBlO1xuXG4vKipcbiAqIFB1dCA8dmFsdWU+IGludG8gdGhlIGNhY2hlIGFzc29jaWF0ZWQgd2l0aCA8a2V5Pi5cbiAqIFJldHVybnMgdGhlIGVudHJ5IHdoaWNoIHdhcyByZW1vdmVkIHRvIG1ha2Ugcm9vbSBmb3JcbiAqIHRoZSBuZXcgZW50cnkuIE90aGVyd2lzZSB1bmRlZmluZWQgaXMgcmV0dXJuZWQuXG4gKiAoaS5lLiBpZiB0aGVyZSB3YXMgZW5vdWdoIHJvb20gYWxyZWFkeSkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7RW50cnl8dW5kZWZpbmVkfVxuICovXG5cbnAucHV0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgdmFyIHJlbW92ZWQ7XG5cbiAgdmFyIGVudHJ5ID0gdGhpcy5nZXQoa2V5LCB0cnVlKTtcbiAgaWYgKCFlbnRyeSkge1xuICAgIGlmICh0aGlzLnNpemUgPT09IHRoaXMubGltaXQpIHtcbiAgICAgIHJlbW92ZWQgPSB0aGlzLnNoaWZ0KCk7XG4gICAgfVxuICAgIGVudHJ5ID0ge1xuICAgICAga2V5OiBrZXlcbiAgICB9O1xuICAgIHRoaXMuX2tleW1hcFtrZXldID0gZW50cnk7XG4gICAgaWYgKHRoaXMudGFpbCkge1xuICAgICAgdGhpcy50YWlsLm5ld2VyID0gZW50cnk7XG4gICAgICBlbnRyeS5vbGRlciA9IHRoaXMudGFpbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oZWFkID0gZW50cnk7XG4gICAgfVxuICAgIHRoaXMudGFpbCA9IGVudHJ5O1xuICAgIHRoaXMuc2l6ZSsrO1xuICB9XG4gIGVudHJ5LnZhbHVlID0gdmFsdWU7XG5cbiAgcmV0dXJuIHJlbW92ZWQ7XG59O1xuXG4vKipcbiAqIFB1cmdlIHRoZSBsZWFzdCByZWNlbnRseSB1c2VkIChvbGRlc3QpIGVudHJ5IGZyb20gdGhlXG4gKiBjYWNoZS4gUmV0dXJucyB0aGUgcmVtb3ZlZCBlbnRyeSBvciB1bmRlZmluZWQgaWYgdGhlXG4gKiBjYWNoZSB3YXMgZW1wdHkuXG4gKi9cblxucC5zaGlmdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGVudHJ5ID0gdGhpcy5oZWFkO1xuICBpZiAoZW50cnkpIHtcbiAgICB0aGlzLmhlYWQgPSB0aGlzLmhlYWQubmV3ZXI7XG4gICAgdGhpcy5oZWFkLm9sZGVyID0gdW5kZWZpbmVkO1xuICAgIGVudHJ5Lm5ld2VyID0gZW50cnkub2xkZXIgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fa2V5bWFwW2VudHJ5LmtleV0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zaXplLS07XG4gIH1cbiAgcmV0dXJuIGVudHJ5O1xufTtcblxuLyoqXG4gKiBHZXQgYW5kIHJlZ2lzdGVyIHJlY2VudCB1c2Ugb2YgPGtleT4uIFJldHVybnMgdGhlIHZhbHVlXG4gKiBhc3NvY2lhdGVkIHdpdGggPGtleT4gb3IgdW5kZWZpbmVkIGlmIG5vdCBpbiBjYWNoZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge0Jvb2xlYW59IHJldHVybkVudHJ5XG4gKiBAcmV0dXJuIHtFbnRyeXwqfVxuICovXG5cbnAuZ2V0ID0gZnVuY3Rpb24gKGtleSwgcmV0dXJuRW50cnkpIHtcbiAgdmFyIGVudHJ5ID0gdGhpcy5fa2V5bWFwW2tleV07XG4gIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gIGlmIChlbnRyeSA9PT0gdGhpcy50YWlsKSB7XG4gICAgcmV0dXJuIHJldHVybkVudHJ5ID8gZW50cnkgOiBlbnRyeS52YWx1ZTtcbiAgfVxuICAvLyBIRUFELS0tLS0tLS0tLS0tLS1UQUlMXG4gIC8vICAgPC5vbGRlciAgIC5uZXdlcj5cbiAgLy8gIDwtLS0gYWRkIGRpcmVjdGlvbiAtLVxuICAvLyAgIEEgIEIgIEMgIDxEPiAgRVxuICBpZiAoZW50cnkubmV3ZXIpIHtcbiAgICBpZiAoZW50cnkgPT09IHRoaXMuaGVhZCkge1xuICAgICAgdGhpcy5oZWFkID0gZW50cnkubmV3ZXI7XG4gICAgfVxuICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gZW50cnkub2xkZXI7IC8vIEMgPC0tIEUuXG4gIH1cbiAgaWYgKGVudHJ5Lm9sZGVyKSB7XG4gICAgZW50cnkub2xkZXIubmV3ZXIgPSBlbnRyeS5uZXdlcjsgLy8gQy4gLS0+IEVcbiAgfVxuICBlbnRyeS5uZXdlciA9IHVuZGVmaW5lZDsgLy8gRCAtLXhcbiAgZW50cnkub2xkZXIgPSB0aGlzLnRhaWw7IC8vIEQuIC0tPiBFXG4gIGlmICh0aGlzLnRhaWwpIHtcbiAgICB0aGlzLnRhaWwubmV3ZXIgPSBlbnRyeTsgLy8gRS4gPC0tIERcbiAgfVxuICB0aGlzLnRhaWwgPSBlbnRyeTtcbiAgcmV0dXJuIHJldHVybkVudHJ5ID8gZW50cnkgOiBlbnRyeS52YWx1ZTtcbn07XG5cbnZhciBjYWNoZSQxID0gbmV3IENhY2hlKDEwMDApO1xudmFyIGZpbHRlclRva2VuUkUgPSAvW15cXHMnXCJdK3wnW14nXSonfFwiW15cIl0qXCIvZztcbnZhciByZXNlcnZlZEFyZ1JFID0gL15pbiR8Xi0/XFxkKy87XG5cbi8qKlxuICogUGFyc2VyIHN0YXRlXG4gKi9cblxudmFyIHN0cjtcbnZhciBkaXI7XG52YXIgYztcbnZhciBwcmV2O1xudmFyIGk7XG52YXIgbDtcbnZhciBsYXN0RmlsdGVySW5kZXg7XG52YXIgaW5TaW5nbGU7XG52YXIgaW5Eb3VibGU7XG52YXIgY3VybHk7XG52YXIgc3F1YXJlO1xudmFyIHBhcmVuO1xuLyoqXG4gKiBQdXNoIGEgZmlsdGVyIHRvIHRoZSBjdXJyZW50IGRpcmVjdGl2ZSBvYmplY3RcbiAqL1xuXG5mdW5jdGlvbiBwdXNoRmlsdGVyKCkge1xuICB2YXIgZXhwID0gc3RyLnNsaWNlKGxhc3RGaWx0ZXJJbmRleCwgaSkudHJpbSgpO1xuICB2YXIgZmlsdGVyO1xuICBpZiAoZXhwKSB7XG4gICAgZmlsdGVyID0ge307XG4gICAgdmFyIHRva2VucyA9IGV4cC5tYXRjaChmaWx0ZXJUb2tlblJFKTtcbiAgICBmaWx0ZXIubmFtZSA9IHRva2Vuc1swXTtcbiAgICBpZiAodG9rZW5zLmxlbmd0aCA+IDEpIHtcbiAgICAgIGZpbHRlci5hcmdzID0gdG9rZW5zLnNsaWNlKDEpLm1hcChwcm9jZXNzRmlsdGVyQXJnKTtcbiAgICB9XG4gIH1cbiAgaWYgKGZpbHRlcikge1xuICAgIChkaXIuZmlsdGVycyA9IGRpci5maWx0ZXJzIHx8IFtdKS5wdXNoKGZpbHRlcik7XG4gIH1cbiAgbGFzdEZpbHRlckluZGV4ID0gaSArIDE7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gYXJndW1lbnQgaXMgZHluYW1pYyBhbmQgc3RyaXAgcXVvdGVzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBhcmdcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBwcm9jZXNzRmlsdGVyQXJnKGFyZykge1xuICBpZiAocmVzZXJ2ZWRBcmdSRS50ZXN0KGFyZykpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWU6IHRvTnVtYmVyKGFyZyksXG4gICAgICBkeW5hbWljOiBmYWxzZVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgdmFyIHN0cmlwcGVkID0gc3RyaXBRdW90ZXMoYXJnKTtcbiAgICB2YXIgZHluYW1pYyA9IHN0cmlwcGVkID09PSBhcmc7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiBkeW5hbWljID8gYXJnIDogc3RyaXBwZWQsXG4gICAgICBkeW5hbWljOiBkeW5hbWljXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIFBhcnNlIGEgZGlyZWN0aXZlIHZhbHVlIGFuZCBleHRyYWN0IHRoZSBleHByZXNzaW9uXG4gKiBhbmQgaXRzIGZpbHRlcnMgaW50byBhIGRlc2NyaXB0b3IuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBcImEgKyAxIHwgdXBwZXJjYXNlXCIgd2lsbCB5aWVsZDpcbiAqIHtcbiAqICAgZXhwcmVzc2lvbjogJ2EgKyAxJyxcbiAqICAgZmlsdGVyczogW1xuICogICAgIHsgbmFtZTogJ3VwcGVyY2FzZScsIGFyZ3M6IG51bGwgfVxuICogICBdXG4gKiB9XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZURpcmVjdGl2ZShzKSB7XG4gIHZhciBoaXQgPSBjYWNoZSQxLmdldChzKTtcbiAgaWYgKGhpdCkge1xuICAgIHJldHVybiBoaXQ7XG4gIH1cblxuICAvLyByZXNldCBwYXJzZXIgc3RhdGVcbiAgc3RyID0gcztcbiAgaW5TaW5nbGUgPSBpbkRvdWJsZSA9IGZhbHNlO1xuICBjdXJseSA9IHNxdWFyZSA9IHBhcmVuID0gMDtcbiAgbGFzdEZpbHRlckluZGV4ID0gMDtcbiAgZGlyID0ge307XG5cbiAgZm9yIChpID0gMCwgbCA9IHN0ci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBwcmV2ID0gYztcbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgaWYgKGluU2luZ2xlKSB7XG4gICAgICAvLyBjaGVjayBzaW5nbGUgcXVvdGVcbiAgICAgIGlmIChjID09PSAweDI3ICYmIHByZXYgIT09IDB4NUMpIGluU2luZ2xlID0gIWluU2luZ2xlO1xuICAgIH0gZWxzZSBpZiAoaW5Eb3VibGUpIHtcbiAgICAgIC8vIGNoZWNrIGRvdWJsZSBxdW90ZVxuICAgICAgaWYgKGMgPT09IDB4MjIgJiYgcHJldiAhPT0gMHg1QykgaW5Eb3VibGUgPSAhaW5Eb3VibGU7XG4gICAgfSBlbHNlIGlmIChjID09PSAweDdDICYmIC8vIHBpcGVcbiAgICBzdHIuY2hhckNvZGVBdChpICsgMSkgIT09IDB4N0MgJiYgc3RyLmNoYXJDb2RlQXQoaSAtIDEpICE9PSAweDdDKSB7XG4gICAgICBpZiAoZGlyLmV4cHJlc3Npb24gPT0gbnVsbCkge1xuICAgICAgICAvLyBmaXJzdCBmaWx0ZXIsIGVuZCBvZiBleHByZXNzaW9uXG4gICAgICAgIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxO1xuICAgICAgICBkaXIuZXhwcmVzc2lvbiA9IHN0ci5zbGljZSgwLCBpKS50cmltKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBhbHJlYWR5IGhhcyBmaWx0ZXJcbiAgICAgICAgcHVzaEZpbHRlcigpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzd2l0Y2ggKGMpIHtcbiAgICAgICAgY2FzZSAweDIyOlxuICAgICAgICAgIGluRG91YmxlID0gdHJ1ZTticmVhazsgLy8gXCJcbiAgICAgICAgY2FzZSAweDI3OlxuICAgICAgICAgIGluU2luZ2xlID0gdHJ1ZTticmVhazsgLy8gJ1xuICAgICAgICBjYXNlIDB4Mjg6XG4gICAgICAgICAgcGFyZW4rKzticmVhazsgLy8gKFxuICAgICAgICBjYXNlIDB4Mjk6XG4gICAgICAgICAgcGFyZW4tLTticmVhazsgLy8gKVxuICAgICAgICBjYXNlIDB4NUI6XG4gICAgICAgICAgc3F1YXJlKys7YnJlYWs7IC8vIFtcbiAgICAgICAgY2FzZSAweDVEOlxuICAgICAgICAgIHNxdWFyZS0tO2JyZWFrOyAvLyBdXG4gICAgICAgIGNhc2UgMHg3QjpcbiAgICAgICAgICBjdXJseSsrO2JyZWFrOyAvLyB7XG4gICAgICAgIGNhc2UgMHg3RDpcbiAgICAgICAgICBjdXJseS0tO2JyZWFrOyAvLyB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGRpci5leHByZXNzaW9uID09IG51bGwpIHtcbiAgICBkaXIuZXhwcmVzc2lvbiA9IHN0ci5zbGljZSgwLCBpKS50cmltKCk7XG4gIH0gZWxzZSBpZiAobGFzdEZpbHRlckluZGV4ICE9PSAwKSB7XG4gICAgcHVzaEZpbHRlcigpO1xuICB9XG5cbiAgY2FjaGUkMS5wdXQocywgZGlyKTtcbiAgcmV0dXJuIGRpcjtcbn1cblxudmFyIGRpcmVjdGl2ZSA9IE9iamVjdC5mcmVlemUoe1xuICBwYXJzZURpcmVjdGl2ZTogcGFyc2VEaXJlY3RpdmVcbn0pO1xuXG52YXIgcmVnZXhFc2NhcGVSRSA9IC9bLS4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2c7XG52YXIgY2FjaGUgPSB1bmRlZmluZWQ7XG52YXIgdGFnUkUgPSB1bmRlZmluZWQ7XG52YXIgaHRtbFJFID0gdW5kZWZpbmVkO1xuLyoqXG4gKiBFc2NhcGUgYSBzdHJpbmcgc28gaXQgY2FuIGJlIHVzZWQgaW4gYSBSZWdFeHBcbiAqIGNvbnN0cnVjdG9yLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqL1xuXG5mdW5jdGlvbiBlc2NhcGVSZWdleChzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXFxcJCYnKTtcbn1cblxuZnVuY3Rpb24gY29tcGlsZVJlZ2V4KCkge1xuICB2YXIgb3BlbiA9IGVzY2FwZVJlZ2V4KGNvbmZpZy5kZWxpbWl0ZXJzWzBdKTtcbiAgdmFyIGNsb3NlID0gZXNjYXBlUmVnZXgoY29uZmlnLmRlbGltaXRlcnNbMV0pO1xuICB2YXIgdW5zYWZlT3BlbiA9IGVzY2FwZVJlZ2V4KGNvbmZpZy51bnNhZmVEZWxpbWl0ZXJzWzBdKTtcbiAgdmFyIHVuc2FmZUNsb3NlID0gZXNjYXBlUmVnZXgoY29uZmlnLnVuc2FmZURlbGltaXRlcnNbMV0pO1xuICB0YWdSRSA9IG5ldyBSZWdFeHAodW5zYWZlT3BlbiArICcoKD86LnxcXFxcbikrPyknICsgdW5zYWZlQ2xvc2UgKyAnfCcgKyBvcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyBjbG9zZSwgJ2cnKTtcbiAgaHRtbFJFID0gbmV3IFJlZ0V4cCgnXicgKyB1bnNhZmVPcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyB1bnNhZmVDbG9zZSArICckJyk7XG4gIC8vIHJlc2V0IGNhY2hlXG4gIGNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xufVxuXG4vKipcbiAqIFBhcnNlIGEgdGVtcGxhdGUgdGV4dCBzdHJpbmcgaW50byBhbiBhcnJheSBvZiB0b2tlbnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAqIEByZXR1cm4ge0FycmF5PE9iamVjdD4gfCBudWxsfVxuICogICAgICAgICAgICAgICAtIHtTdHJpbmd9IHR5cGVcbiAqICAgICAgICAgICAgICAgLSB7U3RyaW5nfSB2YWx1ZVxuICogICAgICAgICAgICAgICAtIHtCb29sZWFufSBbaHRtbF1cbiAqICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW29uZVRpbWVdXG4gKi9cblxuZnVuY3Rpb24gcGFyc2VUZXh0KHRleHQpIHtcbiAgaWYgKCFjYWNoZSkge1xuICAgIGNvbXBpbGVSZWdleCgpO1xuICB9XG4gIHZhciBoaXQgPSBjYWNoZS5nZXQodGV4dCk7XG4gIGlmIChoaXQpIHtcbiAgICByZXR1cm4gaGl0O1xuICB9XG4gIGlmICghdGFnUkUudGVzdCh0ZXh0KSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHZhciB0b2tlbnMgPSBbXTtcbiAgdmFyIGxhc3RJbmRleCA9IHRhZ1JFLmxhc3RJbmRleCA9IDA7XG4gIHZhciBtYXRjaCwgaW5kZXgsIGh0bWwsIHZhbHVlLCBmaXJzdCwgb25lVGltZTtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgd2hpbGUgKG1hdGNoID0gdGFnUkUuZXhlYyh0ZXh0KSkge1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICBpbmRleCA9IG1hdGNoLmluZGV4O1xuICAgIC8vIHB1c2ggdGV4dCB0b2tlblxuICAgIGlmIChpbmRleCA+IGxhc3RJbmRleCkge1xuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB2YWx1ZTogdGV4dC5zbGljZShsYXN0SW5kZXgsIGluZGV4KVxuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIHRhZyB0b2tlblxuICAgIGh0bWwgPSBodG1sUkUudGVzdChtYXRjaFswXSk7XG4gICAgdmFsdWUgPSBodG1sID8gbWF0Y2hbMV0gOiBtYXRjaFsyXTtcbiAgICBmaXJzdCA9IHZhbHVlLmNoYXJDb2RlQXQoMCk7XG4gICAgb25lVGltZSA9IGZpcnN0ID09PSA0MjsgLy8gKlxuICAgIHZhbHVlID0gb25lVGltZSA/IHZhbHVlLnNsaWNlKDEpIDogdmFsdWU7XG4gICAgdG9rZW5zLnB1c2goe1xuICAgICAgdGFnOiB0cnVlLFxuICAgICAgdmFsdWU6IHZhbHVlLnRyaW0oKSxcbiAgICAgIGh0bWw6IGh0bWwsXG4gICAgICBvbmVUaW1lOiBvbmVUaW1lXG4gICAgfSk7XG4gICAgbGFzdEluZGV4ID0gaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7XG4gIH1cbiAgaWYgKGxhc3RJbmRleCA8IHRleHQubGVuZ3RoKSB7XG4gICAgdG9rZW5zLnB1c2goe1xuICAgICAgdmFsdWU6IHRleHQuc2xpY2UobGFzdEluZGV4KVxuICAgIH0pO1xuICB9XG4gIGNhY2hlLnB1dCh0ZXh0LCB0b2tlbnMpO1xuICByZXR1cm4gdG9rZW5zO1xufVxuXG4vKipcbiAqIEZvcm1hdCBhIGxpc3Qgb2YgdG9rZW5zIGludG8gYW4gZXhwcmVzc2lvbi5cbiAqIGUuZy4gdG9rZW5zIHBhcnNlZCBmcm9tICdhIHt7Yn19IGMnIGNhbiBiZSBzZXJpYWxpemVkXG4gKiBpbnRvIG9uZSBzaW5nbGUgZXhwcmVzc2lvbiBhcyAnXCJhIFwiICsgYiArIFwiIGNcIicuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gdG9rZW5zXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHRva2Vuc1RvRXhwKHRva2Vucywgdm0pIHtcbiAgaWYgKHRva2Vucy5sZW5ndGggPiAxKSB7XG4gICAgcmV0dXJuIHRva2Vucy5tYXAoZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICByZXR1cm4gZm9ybWF0VG9rZW4odG9rZW4sIHZtKTtcbiAgICB9KS5qb2luKCcrJyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZvcm1hdFRva2VuKHRva2Vuc1swXSwgdm0sIHRydWUpO1xuICB9XG59XG5cbi8qKlxuICogRm9ybWF0IGEgc2luZ2xlIHRva2VuLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0b2tlblxuICogQHBhcmFtIHtWdWV9IFt2bV1cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW3NpbmdsZV1cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRUb2tlbih0b2tlbiwgdm0sIHNpbmdsZSkge1xuICByZXR1cm4gdG9rZW4udGFnID8gdG9rZW4ub25lVGltZSAmJiB2bSA/ICdcIicgKyB2bS4kZXZhbCh0b2tlbi52YWx1ZSkgKyAnXCInIDogaW5saW5lRmlsdGVycyh0b2tlbi52YWx1ZSwgc2luZ2xlKSA6ICdcIicgKyB0b2tlbi52YWx1ZSArICdcIic7XG59XG5cbi8qKlxuICogRm9yIGFuIGF0dHJpYnV0ZSB3aXRoIG11bHRpcGxlIGludGVycG9sYXRpb24gdGFncyxcbiAqIGUuZy4gYXR0cj1cInNvbWUte3t0aGluZyB8IGZpbHRlcn19XCIsIGluIG9yZGVyIHRvIGNvbWJpbmVcbiAqIHRoZSB3aG9sZSB0aGluZyBpbnRvIGEgc2luZ2xlIHdhdGNoYWJsZSBleHByZXNzaW9uLCB3ZVxuICogaGF2ZSB0byBpbmxpbmUgdGhvc2UgZmlsdGVycy4gVGhpcyBmdW5jdGlvbiBkb2VzIGV4YWN0bHlcbiAqIHRoYXQuIFRoaXMgaXMgYSBiaXQgaGFja3kgYnV0IGl0IGF2b2lkcyBoZWF2eSBjaGFuZ2VzXG4gKiB0byBkaXJlY3RpdmUgcGFyc2VyIGFuZCB3YXRjaGVyIG1lY2hhbmlzbS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHNpbmdsZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbnZhciBmaWx0ZXJSRSA9IC9bXnxdXFx8W158XS87XG5mdW5jdGlvbiBpbmxpbmVGaWx0ZXJzKGV4cCwgc2luZ2xlKSB7XG4gIGlmICghZmlsdGVyUkUudGVzdChleHApKSB7XG4gICAgcmV0dXJuIHNpbmdsZSA/IGV4cCA6ICcoJyArIGV4cCArICcpJztcbiAgfSBlbHNlIHtcbiAgICB2YXIgZGlyID0gcGFyc2VEaXJlY3RpdmUoZXhwKTtcbiAgICBpZiAoIWRpci5maWx0ZXJzKSB7XG4gICAgICByZXR1cm4gJygnICsgZXhwICsgJyknO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ3RoaXMuX2FwcGx5RmlsdGVycygnICsgZGlyLmV4cHJlc3Npb24gKyAvLyB2YWx1ZVxuICAgICAgJyxudWxsLCcgKyAvLyBvbGRWYWx1ZSAobnVsbCBmb3IgcmVhZClcbiAgICAgIEpTT04uc3RyaW5naWZ5KGRpci5maWx0ZXJzKSArIC8vIGZpbHRlciBkZXNjcmlwdG9yc1xuICAgICAgJyxmYWxzZSknOyAvLyB3cml0ZT9cbiAgICB9XG4gIH1cbn1cblxudmFyIHRleHQgPSBPYmplY3QuZnJlZXplKHtcbiAgY29tcGlsZVJlZ2V4OiBjb21waWxlUmVnZXgsXG4gIHBhcnNlVGV4dDogcGFyc2VUZXh0LFxuICB0b2tlbnNUb0V4cDogdG9rZW5zVG9FeHBcbn0pO1xuXG52YXIgZGVsaW1pdGVycyA9IFsne3snLCAnfX0nXTtcbnZhciB1bnNhZmVEZWxpbWl0ZXJzID0gWyd7e3snLCAnfX19J107XG5cbnZhciBjb25maWcgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gcHJpbnQgZGVidWcgbWVzc2FnZXMuXG4gICAqIEFsc28gZW5hYmxlcyBzdGFjayB0cmFjZSBmb3Igd2FybmluZ3MuXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cblxuICBkZWJ1ZzogZmFsc2UsXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gc3VwcHJlc3Mgd2FybmluZ3MuXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cblxuICBzaWxlbnQ6IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHVzZSBhc3luYyByZW5kZXJpbmcuXG4gICAqL1xuXG4gIGFzeW5jOiB0cnVlLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHdhcm4gYWdhaW5zdCBlcnJvcnMgY2F1Z2h0IHdoZW4gZXZhbHVhdGluZ1xuICAgKiBleHByZXNzaW9ucy5cbiAgICovXG5cbiAgd2FybkV4cHJlc3Npb25FcnJvcnM6IHRydWUsXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gYWxsb3cgZGV2dG9vbHMgaW5zcGVjdGlvbi5cbiAgICogRGlzYWJsZWQgYnkgZGVmYXVsdCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cbiAgICovXG5cbiAgZGV2dG9vbHM6IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicsXG5cbiAgLyoqXG4gICAqIEludGVybmFsIGZsYWcgdG8gaW5kaWNhdGUgdGhlIGRlbGltaXRlcnMgaGF2ZSBiZWVuXG4gICAqIGNoYW5nZWQuXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cblxuICBfZGVsaW1pdGVyc0NoYW5nZWQ6IHRydWUsXG5cbiAgLyoqXG4gICAqIExpc3Qgb2YgYXNzZXQgdHlwZXMgdGhhdCBhIGNvbXBvbmVudCBjYW4gb3duLlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXl9XG4gICAqL1xuXG4gIF9hc3NldFR5cGVzOiBbJ2NvbXBvbmVudCcsICdkaXJlY3RpdmUnLCAnZWxlbWVudERpcmVjdGl2ZScsICdmaWx0ZXInLCAndHJhbnNpdGlvbicsICdwYXJ0aWFsJ10sXG5cbiAgLyoqXG4gICAqIHByb3AgYmluZGluZyBtb2Rlc1xuICAgKi9cblxuICBfcHJvcEJpbmRpbmdNb2Rlczoge1xuICAgIE9ORV9XQVk6IDAsXG4gICAgVFdPX1dBWTogMSxcbiAgICBPTkVfVElNRTogMlxuICB9LFxuXG4gIC8qKlxuICAgKiBNYXggY2lyY3VsYXIgdXBkYXRlcyBhbGxvd2VkIGluIGEgYmF0Y2hlciBmbHVzaCBjeWNsZS5cbiAgICovXG5cbiAgX21heFVwZGF0ZUNvdW50OiAxMDBcblxufSwge1xuICBkZWxpbWl0ZXJzOiB7IC8qKlxuICAgICAgICAgICAgICAgICAqIEludGVycG9sYXRpb24gZGVsaW1pdGVycy4gQ2hhbmdpbmcgdGhlc2Ugd291bGQgdHJpZ2dlclxuICAgICAgICAgICAgICAgICAqIHRoZSB0ZXh0IHBhcnNlciB0byByZS1jb21waWxlIHRoZSByZWd1bGFyIGV4cHJlc3Npb25zLlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQHR5cGUge0FycmF5PFN0cmluZz59XG4gICAgICAgICAgICAgICAgICovXG5cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBkZWxpbWl0ZXJzO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7XG4gICAgICBkZWxpbWl0ZXJzID0gdmFsO1xuICAgICAgY29tcGlsZVJlZ2V4KCk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICB1bnNhZmVEZWxpbWl0ZXJzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdW5zYWZlRGVsaW1pdGVycztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuICAgICAgdW5zYWZlRGVsaW1pdGVycyA9IHZhbDtcbiAgICAgIGNvbXBpbGVSZWdleCgpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfVxufSk7XG5cbnZhciB3YXJuID0gdW5kZWZpbmVkO1xudmFyIGZvcm1hdENvbXBvbmVudE5hbWUgPSB1bmRlZmluZWQ7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGhhc0NvbnNvbGUgPSB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCc7XG5cbiAgICB3YXJuID0gZnVuY3Rpb24gKG1zZywgdm0pIHtcbiAgICAgIGlmIChoYXNDb25zb2xlICYmICFjb25maWcuc2lsZW50KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tWdWUgd2Fybl06ICcgKyBtc2cgKyAodm0gPyBmb3JtYXRDb21wb25lbnROYW1lKHZtKSA6ICcnKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZvcm1hdENvbXBvbmVudE5hbWUgPSBmdW5jdGlvbiAodm0pIHtcbiAgICAgIHZhciBuYW1lID0gdm0uX2lzVnVlID8gdm0uJG9wdGlvbnMubmFtZSA6IHZtLm5hbWU7XG4gICAgICByZXR1cm4gbmFtZSA/ICcgKGZvdW5kIGluIGNvbXBvbmVudDogPCcgKyBoeXBoZW5hdGUobmFtZSkgKyAnPiknIDogJyc7XG4gICAgfTtcbiAgfSkoKTtcbn1cblxuLyoqXG4gKiBBcHBlbmQgd2l0aCB0cmFuc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5mdW5jdGlvbiBhcHBlbmRXaXRoVHJhbnNpdGlvbihlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcbiAgYXBwbHlUcmFuc2l0aW9uKGVsLCAxLCBmdW5jdGlvbiAoKSB7XG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcbiAgfSwgdm0sIGNiKTtcbn1cblxuLyoqXG4gKiBJbnNlcnRCZWZvcmUgd2l0aCB0cmFuc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5mdW5jdGlvbiBiZWZvcmVXaXRoVHJhbnNpdGlvbihlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcbiAgYXBwbHlUcmFuc2l0aW9uKGVsLCAxLCBmdW5jdGlvbiAoKSB7XG4gICAgYmVmb3JlKGVsLCB0YXJnZXQpO1xuICB9LCB2bSwgY2IpO1xufVxuXG4vKipcbiAqIFJlbW92ZSB3aXRoIHRyYW5zaXRpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxuZnVuY3Rpb24gcmVtb3ZlV2l0aFRyYW5zaXRpb24oZWwsIHZtLCBjYikge1xuICBhcHBseVRyYW5zaXRpb24oZWwsIC0xLCBmdW5jdGlvbiAoKSB7XG4gICAgcmVtb3ZlKGVsKTtcbiAgfSwgdm0sIGNiKTtcbn1cblxuLyoqXG4gKiBBcHBseSB0cmFuc2l0aW9ucyB3aXRoIGFuIG9wZXJhdGlvbiBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge051bWJlcn0gZGlyZWN0aW9uXG4gKiAgICAgICAgICAgICAgICAgIDE6IGVudGVyXG4gKiAgICAgICAgICAgICAgICAgLTE6IGxlYXZlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIHRoZSBhY3R1YWwgRE9NIG9wZXJhdGlvblxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxuZnVuY3Rpb24gYXBwbHlUcmFuc2l0aW9uKGVsLCBkaXJlY3Rpb24sIG9wLCB2bSwgY2IpIHtcbiAgdmFyIHRyYW5zaXRpb24gPSBlbC5fX3ZfdHJhbnM7XG4gIGlmICghdHJhbnNpdGlvbiB8fFxuICAvLyBza2lwIGlmIHRoZXJlIGFyZSBubyBqcyBob29rcyBhbmQgQ1NTIHRyYW5zaXRpb24gaXNcbiAgLy8gbm90IHN1cHBvcnRlZFxuICAhdHJhbnNpdGlvbi5ob29rcyAmJiAhdHJhbnNpdGlvbkVuZEV2ZW50IHx8XG4gIC8vIHNraXAgdHJhbnNpdGlvbnMgZm9yIGluaXRpYWwgY29tcGlsZVxuICAhdm0uX2lzQ29tcGlsZWQgfHxcbiAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIG1hbmlwdWxhdGVkIGJ5IGEgcGFyZW50IGRpcmVjdGl2ZVxuICAvLyBkdXJpbmcgdGhlIHBhcmVudCdzIGNvbXBpbGF0aW9uIHBoYXNlLCBza2lwIHRoZVxuICAvLyBhbmltYXRpb24uXG4gIHZtLiRwYXJlbnQgJiYgIXZtLiRwYXJlbnQuX2lzQ29tcGlsZWQpIHtcbiAgICBvcCgpO1xuICAgIGlmIChjYikgY2IoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGFjdGlvbiA9IGRpcmVjdGlvbiA+IDAgPyAnZW50ZXInIDogJ2xlYXZlJztcbiAgdHJhbnNpdGlvblthY3Rpb25dKG9wLCBjYik7XG59XG5cbnZhciB0cmFuc2l0aW9uID0gT2JqZWN0LmZyZWV6ZSh7XG4gIGFwcGVuZFdpdGhUcmFuc2l0aW9uOiBhcHBlbmRXaXRoVHJhbnNpdGlvbixcbiAgYmVmb3JlV2l0aFRyYW5zaXRpb246IGJlZm9yZVdpdGhUcmFuc2l0aW9uLFxuICByZW1vdmVXaXRoVHJhbnNpdGlvbjogcmVtb3ZlV2l0aFRyYW5zaXRpb24sXG4gIGFwcGx5VHJhbnNpdGlvbjogYXBwbHlUcmFuc2l0aW9uXG59KTtcblxuLyoqXG4gKiBRdWVyeSBhbiBlbGVtZW50IHNlbGVjdG9yIGlmIGl0J3Mgbm90IGFuIGVsZW1lbnQgYWxyZWFkeS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBlbFxuICogQHJldHVybiB7RWxlbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBxdWVyeShlbCkge1xuICBpZiAodHlwZW9mIGVsID09PSAnc3RyaW5nJykge1xuICAgIHZhciBzZWxlY3RvciA9IGVsO1xuICAgIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCk7XG4gICAgaWYgKCFlbCkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdDYW5ub3QgZmluZCBlbGVtZW50OiAnICsgc2VsZWN0b3IpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZWw7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBub2RlIGlzIGluIHRoZSBkb2N1bWVudC5cbiAqIE5vdGU6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyBzaG91bGQgd29yayBoZXJlXG4gKiBidXQgYWx3YXlzIHJldHVybnMgZmFsc2UgZm9yIGNvbW1lbnQgbm9kZXMgaW4gcGhhbnRvbWpzLFxuICogbWFraW5nIHVuaXQgdGVzdHMgZGlmZmljdWx0LiBUaGlzIGlzIGZpeGVkIGJ5IGRvaW5nIHRoZVxuICogY29udGFpbnMoKSBjaGVjayBvbiB0aGUgbm9kZSdzIHBhcmVudE5vZGUgaW5zdGVhZCBvZlxuICogdGhlIG5vZGUgaXRzZWxmLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpbkRvYyhub2RlKSB7XG4gIGlmICghbm9kZSkgcmV0dXJuIGZhbHNlO1xuICB2YXIgZG9jID0gbm9kZS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgcmV0dXJuIGRvYyA9PT0gbm9kZSB8fCBkb2MgPT09IHBhcmVudCB8fCAhIShwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlID09PSAxICYmIGRvYy5jb250YWlucyhwYXJlbnQpKTtcbn1cblxuLyoqXG4gKiBHZXQgYW5kIHJlbW92ZSBhbiBhdHRyaWJ1dGUgZnJvbSBhIG5vZGUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gX2F0dHJcbiAqL1xuXG5mdW5jdGlvbiBnZXRBdHRyKG5vZGUsIF9hdHRyKSB7XG4gIHZhciB2YWwgPSBub2RlLmdldEF0dHJpYnV0ZShfYXR0cik7XG4gIGlmICh2YWwgIT09IG51bGwpIHtcbiAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShfYXR0cik7XG4gIH1cbiAgcmV0dXJuIHZhbDtcbn1cblxuLyoqXG4gKiBHZXQgYW4gYXR0cmlidXRlIHdpdGggY29sb24gb3Igdi1iaW5kOiBwcmVmaXguXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7U3RyaW5nfG51bGx9XG4gKi9cblxuZnVuY3Rpb24gZ2V0QmluZEF0dHIobm9kZSwgbmFtZSkge1xuICB2YXIgdmFsID0gZ2V0QXR0cihub2RlLCAnOicgKyBuYW1lKTtcbiAgaWYgKHZhbCA9PT0gbnVsbCkge1xuICAgIHZhbCA9IGdldEF0dHIobm9kZSwgJ3YtYmluZDonICsgbmFtZSk7XG4gIH1cbiAgcmV0dXJuIHZhbDtcbn1cblxuLyoqXG4gKiBDaGVjayB0aGUgcHJlc2VuY2Ugb2YgYSBiaW5kIGF0dHJpYnV0ZS5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGhhc0JpbmRBdHRyKG5vZGUsIG5hbWUpIHtcbiAgcmV0dXJuIG5vZGUuaGFzQXR0cmlidXRlKG5hbWUpIHx8IG5vZGUuaGFzQXR0cmlidXRlKCc6JyArIG5hbWUpIHx8IG5vZGUuaGFzQXR0cmlidXRlKCd2LWJpbmQ6JyArIG5hbWUpO1xufVxuXG4vKipcbiAqIEluc2VydCBlbCBiZWZvcmUgdGFyZ2V0XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqL1xuXG5mdW5jdGlvbiBiZWZvcmUoZWwsIHRhcmdldCkge1xuICB0YXJnZXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWwsIHRhcmdldCk7XG59XG5cbi8qKlxuICogSW5zZXJ0IGVsIGFmdGVyIHRhcmdldFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKi9cblxuZnVuY3Rpb24gYWZ0ZXIoZWwsIHRhcmdldCkge1xuICBpZiAodGFyZ2V0Lm5leHRTaWJsaW5nKSB7XG4gICAgYmVmb3JlKGVsLCB0YXJnZXQubmV4dFNpYmxpbmcpO1xuICB9IGVsc2Uge1xuICAgIHRhcmdldC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGVsKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBlbCBmcm9tIERPTVxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmUoZWwpIHtcbiAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG59XG5cbi8qKlxuICogUHJlcGVuZCBlbCB0byB0YXJnZXRcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICovXG5cbmZ1bmN0aW9uIHByZXBlbmQoZWwsIHRhcmdldCkge1xuICBpZiAodGFyZ2V0LmZpcnN0Q2hpbGQpIHtcbiAgICBiZWZvcmUoZWwsIHRhcmdldC5maXJzdENoaWxkKTtcbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuICB9XG59XG5cbi8qKlxuICogUmVwbGFjZSB0YXJnZXQgd2l0aCBlbFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKi9cblxuZnVuY3Rpb24gcmVwbGFjZSh0YXJnZXQsIGVsKSB7XG4gIHZhciBwYXJlbnQgPSB0YXJnZXQucGFyZW50Tm9kZTtcbiAgaWYgKHBhcmVudCkge1xuICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQoZWwsIHRhcmdldCk7XG4gIH1cbn1cblxuLyoqXG4gKiBBZGQgZXZlbnQgbGlzdGVuZXIgc2hvcnRoYW5kLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW3VzZUNhcHR1cmVdXG4gKi9cblxuZnVuY3Rpb24gb24oZWwsIGV2ZW50LCBjYiwgdXNlQ2FwdHVyZSkge1xuICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBjYiwgdXNlQ2FwdHVyZSk7XG59XG5cbi8qKlxuICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVyIHNob3J0aGFuZC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKi9cblxuZnVuY3Rpb24gb2ZmKGVsLCBldmVudCwgY2IpIHtcbiAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgY2IpO1xufVxuXG4vKipcbiAqIEZvciBJRTkgY29tcGF0OiB3aGVuIGJvdGggY2xhc3MgYW5kIDpjbGFzcyBhcmUgcHJlc2VudFxuICogZ2V0QXR0cmlidXRlKCdjbGFzcycpIHJldHVybnMgd3JvbmcgdmFsdWUuLi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gZ2V0Q2xhc3MoZWwpIHtcbiAgdmFyIGNsYXNzbmFtZSA9IGVsLmNsYXNzTmFtZTtcbiAgaWYgKHR5cGVvZiBjbGFzc25hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgY2xhc3NuYW1lID0gY2xhc3NuYW1lLmJhc2VWYWwgfHwgJyc7XG4gIH1cbiAgcmV0dXJuIGNsYXNzbmFtZTtcbn1cblxuLyoqXG4gKiBJbiBJRTksIHNldEF0dHJpYnV0ZSgnY2xhc3MnKSB3aWxsIHJlc3VsdCBpbiBlbXB0eSBjbGFzc1xuICogaWYgdGhlIGVsZW1lbnQgYWxzbyBoYXMgdGhlIDpjbGFzcyBhdHRyaWJ1dGU7IEhvd2V2ZXIgaW5cbiAqIFBoYW50b21KUywgc2V0dGluZyBgY2xhc3NOYW1lYCBkb2VzIG5vdCB3b3JrIG9uIFNWRyBlbGVtZW50cy4uLlxuICogU28gd2UgaGF2ZSB0byBkbyBhIGNvbmRpdGlvbmFsIGNoZWNrIGhlcmUuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuICovXG5cbmZ1bmN0aW9uIHNldENsYXNzKGVsLCBjbHMpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChpc0lFOSAmJiAhL3N2ZyQvLnRlc3QoZWwubmFtZXNwYWNlVVJJKSkge1xuICAgIGVsLmNsYXNzTmFtZSA9IGNscztcbiAgfSBlbHNlIHtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY2xzKTtcbiAgfVxufVxuXG4vKipcbiAqIEFkZCBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIElFICYgU1ZHXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuICovXG5cbmZ1bmN0aW9uIGFkZENsYXNzKGVsLCBjbHMpIHtcbiAgaWYgKGVsLmNsYXNzTGlzdCkge1xuICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3VyID0gJyAnICsgZ2V0Q2xhc3MoZWwpICsgJyAnO1xuICAgIGlmIChjdXIuaW5kZXhPZignICcgKyBjbHMgKyAnICcpIDwgMCkge1xuICAgICAgc2V0Q2xhc3MoZWwsIChjdXIgKyBjbHMpLnRyaW0oKSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIGNsYXNzIHdpdGggY29tcGF0aWJpbGl0eSBmb3IgSUUgJiBTVkdcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gY2xzXG4gKi9cblxuZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWwsIGNscykge1xuICBpZiAoZWwuY2xhc3NMaXN0KSB7XG4gICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbHMpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjdXIgPSAnICcgKyBnZXRDbGFzcyhlbCkgKyAnICc7XG4gICAgdmFyIHRhciA9ICcgJyArIGNscyArICcgJztcbiAgICB3aGlsZSAoY3VyLmluZGV4T2YodGFyKSA+PSAwKSB7XG4gICAgICBjdXIgPSBjdXIucmVwbGFjZSh0YXIsICcgJyk7XG4gICAgfVxuICAgIHNldENsYXNzKGVsLCBjdXIudHJpbSgpKTtcbiAgfVxuICBpZiAoIWVsLmNsYXNzTmFtZSkge1xuICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKTtcbiAgfVxufVxuXG4vKipcbiAqIEV4dHJhY3QgcmF3IGNvbnRlbnQgaW5zaWRlIGFuIGVsZW1lbnQgaW50byBhIHRlbXBvcmFyeVxuICogY29udGFpbmVyIGRpdlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gYXNGcmFnbWVudFxuICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIGV4dHJhY3RDb250ZW50KGVsLCBhc0ZyYWdtZW50KSB7XG4gIHZhciBjaGlsZDtcbiAgdmFyIHJhd0NvbnRlbnQ7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaXNUZW1wbGF0ZShlbCkgJiYgaXNGcmFnbWVudChlbC5jb250ZW50KSkge1xuICAgIGVsID0gZWwuY29udGVudDtcbiAgfVxuICBpZiAoZWwuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgdHJpbU5vZGUoZWwpO1xuICAgIHJhd0NvbnRlbnQgPSBhc0ZyYWdtZW50ID8gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICB3aGlsZSAoY2hpbGQgPSBlbC5maXJzdENoaWxkKSB7XG4gICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgICByYXdDb250ZW50LmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJhd0NvbnRlbnQ7XG59XG5cbi8qKlxuICogVHJpbSBwb3NzaWJsZSBlbXB0eSBoZWFkL3RhaWwgdGV4dCBhbmQgY29tbWVudFxuICogbm9kZXMgaW5zaWRlIGEgcGFyZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICovXG5cbmZ1bmN0aW9uIHRyaW1Ob2RlKG5vZGUpIHtcbiAgdmFyIGNoaWxkO1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1zZXF1ZW5jZXMgKi9cbiAgd2hpbGUgKChjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZCwgaXNUcmltbWFibGUoY2hpbGQpKSkge1xuICAgIG5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICB9XG4gIHdoaWxlICgoY2hpbGQgPSBub2RlLmxhc3RDaGlsZCwgaXNUcmltbWFibGUoY2hpbGQpKSkge1xuICAgIG5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICB9XG4gIC8qIGVzbGludC1lbmFibGUgbm8tc2VxdWVuY2VzICovXG59XG5cbmZ1bmN0aW9uIGlzVHJpbW1hYmxlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgKG5vZGUubm9kZVR5cGUgPT09IDMgJiYgIW5vZGUuZGF0YS50cmltKCkgfHwgbm9kZS5ub2RlVHlwZSA9PT0gOCk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIHRlbXBsYXRlIHRhZy5cbiAqIE5vdGUgaWYgdGhlIHRlbXBsYXRlIGFwcGVhcnMgaW5zaWRlIGFuIFNWRyBpdHMgdGFnTmFtZVxuICogd2lsbCBiZSBpbiBsb3dlcmNhc2UuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICovXG5cbmZ1bmN0aW9uIGlzVGVtcGxhdGUoZWwpIHtcbiAgcmV0dXJuIGVsLnRhZ05hbWUgJiYgZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAndGVtcGxhdGUnO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhbiBcImFuY2hvclwiIGZvciBwZXJmb3JtaW5nIGRvbSBpbnNlcnRpb24vcmVtb3ZhbHMuXG4gKiBUaGlzIGlzIHVzZWQgaW4gYSBudW1iZXIgb2Ygc2NlbmFyaW9zOlxuICogLSBmcmFnbWVudCBpbnN0YW5jZVxuICogLSB2LWh0bWxcbiAqIC0gdi1pZlxuICogLSB2LWZvclxuICogLSBjb21wb25lbnRcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY29udGVudFxuICogQHBhcmFtIHtCb29sZWFufSBwZXJzaXN0IC0gSUUgdHJhc2hlcyBlbXB0eSB0ZXh0Tm9kZXMgb25cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lTm9kZSh0cnVlKSwgc28gaW4gY2VydGFpblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZXMgdGhlIGFuY2hvciBuZWVkcyB0byBiZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9uLWVtcHR5IHRvIGJlIHBlcnNpc3RlZCBpblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVzLlxuICogQHJldHVybiB7Q29tbWVudHxUZXh0fVxuICovXG5cbmZ1bmN0aW9uIGNyZWF0ZUFuY2hvcihjb250ZW50LCBwZXJzaXN0KSB7XG4gIHZhciBhbmNob3IgPSBjb25maWcuZGVidWcgPyBkb2N1bWVudC5jcmVhdGVDb21tZW50KGNvbnRlbnQpIDogZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocGVyc2lzdCA/ICcgJyA6ICcnKTtcbiAgYW5jaG9yLl9fdl9hbmNob3IgPSB0cnVlO1xuICByZXR1cm4gYW5jaG9yO1xufVxuXG4vKipcbiAqIEZpbmQgYSBjb21wb25lbnQgcmVmIGF0dHJpYnV0ZSB0aGF0IHN0YXJ0cyB3aXRoICQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBub2RlXG4gKiBAcmV0dXJuIHtTdHJpbmd8dW5kZWZpbmVkfVxuICovXG5cbnZhciByZWZSRSA9IC9edi1yZWY6LztcblxuZnVuY3Rpb24gZmluZFJlZihub2RlKSB7XG4gIGlmIChub2RlLmhhc0F0dHJpYnV0ZXMoKSkge1xuICAgIHZhciBhdHRycyA9IG5vZGUuYXR0cmlidXRlcztcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuICAgICAgaWYgKHJlZlJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIGNhbWVsaXplKG5hbWUucmVwbGFjZShyZWZSRSwgJycpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBNYXAgYSBmdW5jdGlvbiB0byBhIHJhbmdlIG9mIG5vZGVzIC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7Tm9kZX0gZW5kXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcFxuICovXG5cbmZ1bmN0aW9uIG1hcE5vZGVSYW5nZShub2RlLCBlbmQsIG9wKSB7XG4gIHZhciBuZXh0O1xuICB3aGlsZSAobm9kZSAhPT0gZW5kKSB7XG4gICAgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgb3Aobm9kZSk7XG4gICAgbm9kZSA9IG5leHQ7XG4gIH1cbiAgb3AoZW5kKTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgYSByYW5nZSBvZiBub2RlcyB3aXRoIHRyYW5zaXRpb24sIHN0b3JlXG4gKiB0aGUgbm9kZXMgaW4gYSBmcmFnbWVudCB3aXRoIGNvcnJlY3Qgb3JkZXJpbmcsXG4gKiBhbmQgY2FsbCBjYWxsYmFjayB3aGVuIGRvbmUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBzdGFydFxuICogQHBhcmFtIHtOb2RlfSBlbmRcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICovXG5cbmZ1bmN0aW9uIHJlbW92ZU5vZGVSYW5nZShzdGFydCwgZW5kLCB2bSwgZnJhZywgY2IpIHtcbiAgdmFyIGRvbmUgPSBmYWxzZTtcbiAgdmFyIHJlbW92ZWQgPSAwO1xuICB2YXIgbm9kZXMgPSBbXTtcbiAgbWFwTm9kZVJhbmdlKHN0YXJ0LCBlbmQsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgaWYgKG5vZGUgPT09IGVuZCkgZG9uZSA9IHRydWU7XG4gICAgbm9kZXMucHVzaChub2RlKTtcbiAgICByZW1vdmVXaXRoVHJhbnNpdGlvbihub2RlLCB2bSwgb25SZW1vdmVkKTtcbiAgfSk7XG4gIGZ1bmN0aW9uIG9uUmVtb3ZlZCgpIHtcbiAgICByZW1vdmVkKys7XG4gICAgaWYgKGRvbmUgJiYgcmVtb3ZlZCA+PSBub2Rlcy5sZW5ndGgpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChub2Rlc1tpXSk7XG4gICAgICB9XG4gICAgICBjYiAmJiBjYigpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgbm9kZSBpcyBhIERvY3VtZW50RnJhZ21lbnQuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzRnJhZ21lbnQobm9kZSkge1xuICByZXR1cm4gbm9kZSAmJiBub2RlLm5vZGVUeXBlID09PSAxMTtcbn1cblxuLyoqXG4gKiBHZXQgb3V0ZXJIVE1MIG9mIGVsZW1lbnRzLCB0YWtpbmcgY2FyZVxuICogb2YgU1ZHIGVsZW1lbnRzIGluIElFIGFzIHdlbGwuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGdldE91dGVySFRNTChlbCkge1xuICBpZiAoZWwub3V0ZXJIVE1MKSB7XG4gICAgcmV0dXJuIGVsLm91dGVySFRNTDtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVsLmNsb25lTm9kZSh0cnVlKSk7XG4gICAgcmV0dXJuIGNvbnRhaW5lci5pbm5lckhUTUw7XG4gIH1cbn1cblxudmFyIGNvbW1vblRhZ1JFID0gL14oZGl2fHB8c3BhbnxpbWd8YXxifGl8YnJ8dWx8b2x8bGl8aDF8aDJ8aDN8aDR8aDV8aDZ8Y29kZXxwcmV8dGFibGV8dGh8dGR8dHJ8Zm9ybXxsYWJlbHxpbnB1dHxzZWxlY3R8b3B0aW9ufG5hdnxhcnRpY2xlfHNlY3Rpb258aGVhZGVyfGZvb3RlcikkL2k7XG52YXIgcmVzZXJ2ZWRUYWdSRSA9IC9eKHNsb3R8cGFydGlhbHxjb21wb25lbnQpJC9pO1xuXG52YXIgaXNVbmtub3duRWxlbWVudCA9IHVuZGVmaW5lZDtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGlzVW5rbm93bkVsZW1lbnQgPSBmdW5jdGlvbiAoZWwsIHRhZykge1xuICAgIGlmICh0YWcuaW5kZXhPZignLScpID4gLTEpIHtcbiAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI4MjEwMzY0LzEwNzAyNDRcbiAgICAgIHJldHVybiBlbC5jb25zdHJ1Y3RvciA9PT0gd2luZG93LkhUTUxVbmtub3duRWxlbWVudCB8fCBlbC5jb25zdHJ1Y3RvciA9PT0gd2luZG93LkhUTUxFbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKC9IVE1MVW5rbm93bkVsZW1lbnQvLnRlc3QoZWwudG9TdHJpbmcoKSkgJiZcbiAgICAgICAgLy8gQ2hyb21lIHJldHVybnMgdW5rbm93biBmb3Igc2V2ZXJhbCBIVE1MNSBlbGVtZW50cy5cbiAgICAgICAgLy8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTU0MDUyNlxuICAgICAgICAvLyBGaXJlZm94IHJldHVybnMgdW5rbm93biBmb3Igc29tZSBcIkludGVyYWN0aXZlIGVsZW1lbnRzLlwiXG4gICAgICAgICEvXihkYXRhfHRpbWV8cnRjfHJifGRldGFpbHN8ZGlhbG9nfHN1bW1hcnkpJC8udGVzdCh0YWcpXG4gICAgICApO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgY29tcG9uZW50LCBpZiB5ZXMgcmV0dXJuIGl0c1xuICogY29tcG9uZW50IGlkLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIGNoZWNrQ29tcG9uZW50QXR0cihlbCwgb3B0aW9ucykge1xuICB2YXIgdGFnID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICB2YXIgaGFzQXR0cnMgPSBlbC5oYXNBdHRyaWJ1dGVzKCk7XG4gIGlmICghY29tbW9uVGFnUkUudGVzdCh0YWcpICYmICFyZXNlcnZlZFRhZ1JFLnRlc3QodGFnKSkge1xuICAgIGlmIChyZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCB0YWcpKSB7XG4gICAgICByZXR1cm4geyBpZDogdGFnIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBpcyA9IGhhc0F0dHJzICYmIGdldElzQmluZGluZyhlbCwgb3B0aW9ucyk7XG4gICAgICBpZiAoaXMpIHtcbiAgICAgICAgcmV0dXJuIGlzO1xuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHZhciBleHBlY3RlZFRhZyA9IG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXAgJiYgb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcFt0YWddO1xuICAgICAgICBpZiAoZXhwZWN0ZWRUYWcpIHtcbiAgICAgICAgICB3YXJuKCdVbmtub3duIGN1c3RvbSBlbGVtZW50OiA8JyArIHRhZyArICc+IC0gJyArICdkaWQgeW91IG1lYW4gPCcgKyBleHBlY3RlZFRhZyArICc+PyAnICsgJ0hUTUwgaXMgY2FzZS1pbnNlbnNpdGl2ZSwgcmVtZW1iZXIgdG8gdXNlIGtlYmFiLWNhc2UgaW4gdGVtcGxhdGVzLicpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzVW5rbm93bkVsZW1lbnQoZWwsIHRhZykpIHtcbiAgICAgICAgICB3YXJuKCdVbmtub3duIGN1c3RvbSBlbGVtZW50OiA8JyArIHRhZyArICc+IC0gZGlkIHlvdSAnICsgJ3JlZ2lzdGVyIHRoZSBjb21wb25lbnQgY29ycmVjdGx5PyBGb3IgcmVjdXJzaXZlIGNvbXBvbmVudHMsICcgKyAnbWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhlIFwibmFtZVwiIG9wdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChoYXNBdHRycykge1xuICAgIHJldHVybiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpO1xuICB9XG59XG5cbi8qKlxuICogR2V0IFwiaXNcIiBiaW5kaW5nIGZyb20gYW4gZWxlbWVudC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpIHtcbiAgLy8gZHluYW1pYyBzeW50YXhcbiAgdmFyIGV4cCA9IGVsLmdldEF0dHJpYnV0ZSgnaXMnKTtcbiAgaWYgKGV4cCAhPSBudWxsKSB7XG4gICAgaWYgKHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIGV4cCkpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnaXMnKTtcbiAgICAgIHJldHVybiB7IGlkOiBleHAgfTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZXhwID0gZ2V0QmluZEF0dHIoZWwsICdpcycpO1xuICAgIGlmIChleHAgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHsgaWQ6IGV4cCwgZHluYW1pYzogdHJ1ZSB9O1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIE9wdGlvbiBvdmVyd3JpdGluZyBzdHJhdGVnaWVzIGFyZSBmdW5jdGlvbnMgdGhhdCBoYW5kbGVcbiAqIGhvdyB0byBtZXJnZSBhIHBhcmVudCBvcHRpb24gdmFsdWUgYW5kIGEgY2hpbGQgb3B0aW9uXG4gKiB2YWx1ZSBpbnRvIHRoZSBmaW5hbCB2YWx1ZS5cbiAqXG4gKiBBbGwgc3RyYXRlZ3kgZnVuY3Rpb25zIGZvbGxvdyB0aGUgc2FtZSBzaWduYXR1cmU6XG4gKlxuICogQHBhcmFtIHsqfSBwYXJlbnRWYWxcbiAqIEBwYXJhbSB7Kn0gY2hpbGRWYWxcbiAqIEBwYXJhbSB7VnVlfSBbdm1dXG4gKi9cblxudmFyIHN0cmF0cyA9IGNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4vKipcbiAqIEhlbHBlciB0aGF0IHJlY3Vyc2l2ZWx5IG1lcmdlcyB0d28gZGF0YSBvYmplY3RzIHRvZ2V0aGVyLlxuICovXG5cbmZ1bmN0aW9uIG1lcmdlRGF0YSh0bywgZnJvbSkge1xuICB2YXIga2V5LCB0b1ZhbCwgZnJvbVZhbDtcbiAgZm9yIChrZXkgaW4gZnJvbSkge1xuICAgIHRvVmFsID0gdG9ba2V5XTtcbiAgICBmcm9tVmFsID0gZnJvbVtrZXldO1xuICAgIGlmICghaGFzT3duKHRvLCBrZXkpKSB7XG4gICAgICBzZXQodG8sIGtleSwgZnJvbVZhbCk7XG4gICAgfSBlbHNlIGlmIChpc09iamVjdCh0b1ZhbCkgJiYgaXNPYmplY3QoZnJvbVZhbCkpIHtcbiAgICAgIG1lcmdlRGF0YSh0b1ZhbCwgZnJvbVZhbCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB0bztcbn1cblxuLyoqXG4gKiBEYXRhXG4gKi9cblxuc3RyYXRzLmRhdGEgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCwgdm0pIHtcbiAgaWYgKCF2bSkge1xuICAgIC8vIGluIGEgVnVlLmV4dGVuZCBtZXJnZSwgYm90aCBzaG91bGQgYmUgZnVuY3Rpb25zXG4gICAgaWYgKCFjaGlsZFZhbCkge1xuICAgICAgcmV0dXJuIHBhcmVudFZhbDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjaGlsZFZhbCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdUaGUgXCJkYXRhXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgKyAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICsgJ2RlZmluaXRpb25zLicsIHZtKTtcbiAgICAgIHJldHVybiBwYXJlbnRWYWw7XG4gICAgfVxuICAgIGlmICghcGFyZW50VmFsKSB7XG4gICAgICByZXR1cm4gY2hpbGRWYWw7XG4gICAgfVxuICAgIC8vIHdoZW4gcGFyZW50VmFsICYgY2hpbGRWYWwgYXJlIGJvdGggcHJlc2VudCxcbiAgICAvLyB3ZSBuZWVkIHRvIHJldHVybiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGVcbiAgICAvLyBtZXJnZWQgcmVzdWx0IG9mIGJvdGggZnVuY3Rpb25zLi4uIG5vIG5lZWQgdG9cbiAgICAvLyBjaGVjayBpZiBwYXJlbnRWYWwgaXMgYSBmdW5jdGlvbiBoZXJlIGJlY2F1c2VcbiAgICAvLyBpdCBoYXMgdG8gYmUgYSBmdW5jdGlvbiB0byBwYXNzIHByZXZpb3VzIG1lcmdlcy5cbiAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkRGF0YUZuKCkge1xuICAgICAgcmV0dXJuIG1lcmdlRGF0YShjaGlsZFZhbC5jYWxsKHRoaXMpLCBwYXJlbnRWYWwuY2FsbCh0aGlzKSk7XG4gICAgfTtcbiAgfSBlbHNlIGlmIChwYXJlbnRWYWwgfHwgY2hpbGRWYWwpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkSW5zdGFuY2VEYXRhRm4oKSB7XG4gICAgICAvLyBpbnN0YW5jZSBtZXJnZVxuICAgICAgdmFyIGluc3RhbmNlRGF0YSA9IHR5cGVvZiBjaGlsZFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IGNoaWxkVmFsLmNhbGwodm0pIDogY2hpbGRWYWw7XG4gICAgICB2YXIgZGVmYXVsdERhdGEgPSB0eXBlb2YgcGFyZW50VmFsID09PSAnZnVuY3Rpb24nID8gcGFyZW50VmFsLmNhbGwodm0pIDogdW5kZWZpbmVkO1xuICAgICAgaWYgKGluc3RhbmNlRGF0YSkge1xuICAgICAgICByZXR1cm4gbWVyZ2VEYXRhKGluc3RhbmNlRGF0YSwgZGVmYXVsdERhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHREYXRhO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn07XG5cbi8qKlxuICogRWxcbiAqL1xuXG5zdHJhdHMuZWwgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCwgdm0pIHtcbiAgaWYgKCF2bSAmJiBjaGlsZFZhbCAmJiB0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1RoZSBcImVsXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgKyAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICsgJ2RlZmluaXRpb25zLicsIHZtKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHJldCA9IGNoaWxkVmFsIHx8IHBhcmVudFZhbDtcbiAgLy8gaW52b2tlIHRoZSBlbGVtZW50IGZhY3RvcnkgaWYgdGhpcyBpcyBpbnN0YW5jZSBtZXJnZVxuICByZXR1cm4gdm0gJiYgdHlwZW9mIHJldCA9PT0gJ2Z1bmN0aW9uJyA/IHJldC5jYWxsKHZtKSA6IHJldDtcbn07XG5cbi8qKlxuICogSG9va3MgYW5kIHBhcmFtIGF0dHJpYnV0ZXMgYXJlIG1lcmdlZCBhcyBhcnJheXMuXG4gKi9cblxuc3RyYXRzLmluaXQgPSBzdHJhdHMuY3JlYXRlZCA9IHN0cmF0cy5yZWFkeSA9IHN0cmF0cy5hdHRhY2hlZCA9IHN0cmF0cy5kZXRhY2hlZCA9IHN0cmF0cy5iZWZvcmVDb21waWxlID0gc3RyYXRzLmNvbXBpbGVkID0gc3RyYXRzLmJlZm9yZURlc3Ryb3kgPSBzdHJhdHMuZGVzdHJveWVkID0gc3RyYXRzLmFjdGl2YXRlID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgcmV0dXJuIGNoaWxkVmFsID8gcGFyZW50VmFsID8gcGFyZW50VmFsLmNvbmNhdChjaGlsZFZhbCkgOiBpc0FycmF5KGNoaWxkVmFsKSA/IGNoaWxkVmFsIDogW2NoaWxkVmFsXSA6IHBhcmVudFZhbDtcbn07XG5cbi8qKlxuICogQXNzZXRzXG4gKlxuICogV2hlbiBhIHZtIGlzIHByZXNlbnQgKGluc3RhbmNlIGNyZWF0aW9uKSwgd2UgbmVlZCB0byBkb1xuICogYSB0aHJlZS13YXkgbWVyZ2UgYmV0d2VlbiBjb25zdHJ1Y3RvciBvcHRpb25zLCBpbnN0YW5jZVxuICogb3B0aW9ucyBhbmQgcGFyZW50IG9wdGlvbnMuXG4gKi9cblxuZnVuY3Rpb24gbWVyZ2VBc3NldHMocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRWYWwgfHwgbnVsbCk7XG4gIHJldHVybiBjaGlsZFZhbCA/IGV4dGVuZChyZXMsIGd1YXJkQXJyYXlBc3NldHMoY2hpbGRWYWwpKSA6IHJlcztcbn1cblxuY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgc3RyYXRzW3R5cGUgKyAncyddID0gbWVyZ2VBc3NldHM7XG59KTtcblxuLyoqXG4gKiBFdmVudHMgJiBXYXRjaGVycy5cbiAqXG4gKiBFdmVudHMgJiB3YXRjaGVycyBoYXNoZXMgc2hvdWxkIG5vdCBvdmVyd3JpdGUgb25lXG4gKiBhbm90aGVyLCBzbyB3ZSBtZXJnZSB0aGVtIGFzIGFycmF5cy5cbiAqL1xuXG5zdHJhdHMud2F0Y2ggPSBzdHJhdHMuZXZlbnRzID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgaWYgKCFjaGlsZFZhbCkgcmV0dXJuIHBhcmVudFZhbDtcbiAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbDtcbiAgdmFyIHJldCA9IHt9O1xuICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuICBmb3IgKHZhciBrZXkgaW4gY2hpbGRWYWwpIHtcbiAgICB2YXIgcGFyZW50ID0gcmV0W2tleV07XG4gICAgdmFyIGNoaWxkID0gY2hpbGRWYWxba2V5XTtcbiAgICBpZiAocGFyZW50ICYmICFpc0FycmF5KHBhcmVudCkpIHtcbiAgICAgIHBhcmVudCA9IFtwYXJlbnRdO1xuICAgIH1cbiAgICByZXRba2V5XSA9IHBhcmVudCA/IHBhcmVudC5jb25jYXQoY2hpbGQpIDogW2NoaWxkXTtcbiAgfVxuICByZXR1cm4gcmV0O1xufTtcblxuLyoqXG4gKiBPdGhlciBvYmplY3QgaGFzaGVzLlxuICovXG5cbnN0cmF0cy5wcm9wcyA9IHN0cmF0cy5tZXRob2RzID0gc3RyYXRzLmNvbXB1dGVkID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgaWYgKCFjaGlsZFZhbCkgcmV0dXJuIHBhcmVudFZhbDtcbiAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbDtcbiAgdmFyIHJldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG4gIGV4dGVuZChyZXQsIGNoaWxkVmFsKTtcbiAgcmV0dXJuIHJldDtcbn07XG5cbi8qKlxuICogRGVmYXVsdCBzdHJhdGVneS5cbiAqL1xuXG52YXIgZGVmYXVsdFN0cmF0ID0gZnVuY3Rpb24gZGVmYXVsdFN0cmF0KHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgcmV0dXJuIGNoaWxkVmFsID09PSB1bmRlZmluZWQgPyBwYXJlbnRWYWwgOiBjaGlsZFZhbDtcbn07XG5cbi8qKlxuICogTWFrZSBzdXJlIGNvbXBvbmVudCBvcHRpb25zIGdldCBjb252ZXJ0ZWQgdG8gYWN0dWFsXG4gKiBjb25zdHJ1Y3RvcnMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuXG5mdW5jdGlvbiBndWFyZENvbXBvbmVudHMob3B0aW9ucykge1xuICBpZiAob3B0aW9ucy5jb21wb25lbnRzKSB7XG4gICAgdmFyIGNvbXBvbmVudHMgPSBvcHRpb25zLmNvbXBvbmVudHMgPSBndWFyZEFycmF5QXNzZXRzKG9wdGlvbnMuY29tcG9uZW50cyk7XG4gICAgdmFyIGlkcyA9IE9iamVjdC5rZXlzKGNvbXBvbmVudHMpO1xuICAgIHZhciBkZWY7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciBtYXAgPSBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwID0ge307XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gaWRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGtleSA9IGlkc1tpXTtcbiAgICAgIGlmIChjb21tb25UYWdSRS50ZXN0KGtleSkgfHwgcmVzZXJ2ZWRUYWdSRS50ZXN0KGtleSkpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgKyAnaWQ6ICcgKyBrZXkpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIC8vIHJlY29yZCBhIGFsbCBsb3dlcmNhc2UgPC0+IGtlYmFiLWNhc2UgbWFwcGluZyBmb3JcbiAgICAgIC8vIHBvc3NpYmxlIGN1c3RvbSBlbGVtZW50IGNhc2UgZXJyb3Igd2FybmluZ1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgbWFwW2tleS5yZXBsYWNlKC8tL2csICcnKS50b0xvd2VyQ2FzZSgpXSA9IGh5cGhlbmF0ZShrZXkpO1xuICAgICAgfVxuICAgICAgZGVmID0gY29tcG9uZW50c1trZXldO1xuICAgICAgaWYgKGlzUGxhaW5PYmplY3QoZGVmKSkge1xuICAgICAgICBjb21wb25lbnRzW2tleV0gPSBWdWUuZXh0ZW5kKGRlZik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRW5zdXJlIGFsbCBwcm9wcyBvcHRpb24gc3ludGF4IGFyZSBub3JtYWxpemVkIGludG8gdGhlXG4gKiBPYmplY3QtYmFzZWQgZm9ybWF0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cblxuZnVuY3Rpb24gZ3VhcmRQcm9wcyhvcHRpb25zKSB7XG4gIHZhciBwcm9wcyA9IG9wdGlvbnMucHJvcHM7XG4gIHZhciBpLCB2YWw7XG4gIGlmIChpc0FycmF5KHByb3BzKSkge1xuICAgIG9wdGlvbnMucHJvcHMgPSB7fTtcbiAgICBpID0gcHJvcHMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhbCA9IHByb3BzW2ldO1xuICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIG9wdGlvbnMucHJvcHNbdmFsXSA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHZhbC5uYW1lKSB7XG4gICAgICAgIG9wdGlvbnMucHJvcHNbdmFsLm5hbWVdID0gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHByb3BzKSkge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcHMpO1xuICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YWwgPSBwcm9wc1trZXlzW2ldXTtcbiAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHByb3BzW2tleXNbaV1dID0geyB0eXBlOiB2YWwgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBHdWFyZCBhbiBBcnJheS1mb3JtYXQgYXNzZXRzIG9wdGlvbiBhbmQgY29udmVydGVkIGl0XG4gKiBpbnRvIHRoZSBrZXktdmFsdWUgT2JqZWN0IGZvcm1hdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gYXNzZXRzXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gZ3VhcmRBcnJheUFzc2V0cyhhc3NldHMpIHtcbiAgaWYgKGlzQXJyYXkoYXNzZXRzKSkge1xuICAgIHZhciByZXMgPSB7fTtcbiAgICB2YXIgaSA9IGFzc2V0cy5sZW5ndGg7XG4gICAgdmFyIGFzc2V0O1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGFzc2V0ID0gYXNzZXRzW2ldO1xuICAgICAgdmFyIGlkID0gdHlwZW9mIGFzc2V0ID09PSAnZnVuY3Rpb24nID8gYXNzZXQub3B0aW9ucyAmJiBhc3NldC5vcHRpb25zLm5hbWUgfHwgYXNzZXQuaWQgOiBhc3NldC5uYW1lIHx8IGFzc2V0LmlkO1xuICAgICAgaWYgKCFpZCkge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0FycmF5LXN5bnRheCBhc3NldHMgbXVzdCBwcm92aWRlIGEgXCJuYW1lXCIgb3IgXCJpZFwiIGZpZWxkLicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzW2lkXSA9IGFzc2V0O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG4gIHJldHVybiBhc3NldHM7XG59XG5cbi8qKlxuICogTWVyZ2UgdHdvIG9wdGlvbiBvYmplY3RzIGludG8gYSBuZXcgb25lLlxuICogQ29yZSB1dGlsaXR5IHVzZWQgaW4gYm90aCBpbnN0YW50aWF0aW9uIGFuZCBpbmhlcml0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFyZW50XG4gKiBAcGFyYW0ge09iamVjdH0gY2hpbGRcbiAqIEBwYXJhbSB7VnVlfSBbdm1dIC0gaWYgdm0gaXMgcHJlc2VudCwgaW5kaWNhdGVzIHRoaXMgaXNcbiAqICAgICAgICAgICAgICAgICAgICAgYW4gaW5zdGFudGlhdGlvbiBtZXJnZS5cbiAqL1xuXG5mdW5jdGlvbiBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZCwgdm0pIHtcbiAgZ3VhcmRDb21wb25lbnRzKGNoaWxkKTtcbiAgZ3VhcmRQcm9wcyhjaGlsZCk7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKGNoaWxkLnByb3BzRGF0YSAmJiAhdm0pIHtcbiAgICAgIHdhcm4oJ3Byb3BzRGF0YSBjYW4gb25seSBiZSB1c2VkIGFzIGFuIGluc3RhbnRpYXRpb24gb3B0aW9uLicpO1xuICAgIH1cbiAgfVxuICB2YXIgb3B0aW9ucyA9IHt9O1xuICB2YXIga2V5O1xuICBpZiAoY2hpbGRbJ2V4dGVuZHMnXSkge1xuICAgIHBhcmVudCA9IHR5cGVvZiBjaGlsZFsnZXh0ZW5kcyddID09PSAnZnVuY3Rpb24nID8gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGRbJ2V4dGVuZHMnXS5vcHRpb25zLCB2bSkgOiBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZFsnZXh0ZW5kcyddLCB2bSk7XG4gIH1cbiAgaWYgKGNoaWxkLm1peGlucykge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGQubWl4aW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIG1peGluID0gY2hpbGQubWl4aW5zW2ldO1xuICAgICAgdmFyIG1peGluT3B0aW9ucyA9IG1peGluLnByb3RvdHlwZSBpbnN0YW5jZW9mIFZ1ZSA/IG1peGluLm9wdGlvbnMgOiBtaXhpbjtcbiAgICAgIHBhcmVudCA9IG1lcmdlT3B0aW9ucyhwYXJlbnQsIG1peGluT3B0aW9ucywgdm0pO1xuICAgIH1cbiAgfVxuICBmb3IgKGtleSBpbiBwYXJlbnQpIHtcbiAgICBtZXJnZUZpZWxkKGtleSk7XG4gIH1cbiAgZm9yIChrZXkgaW4gY2hpbGQpIHtcbiAgICBpZiAoIWhhc093bihwYXJlbnQsIGtleSkpIHtcbiAgICAgIG1lcmdlRmllbGQoa2V5KTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gbWVyZ2VGaWVsZChrZXkpIHtcbiAgICB2YXIgc3RyYXQgPSBzdHJhdHNba2V5XSB8fCBkZWZhdWx0U3RyYXQ7XG4gICAgb3B0aW9uc1trZXldID0gc3RyYXQocGFyZW50W2tleV0sIGNoaWxkW2tleV0sIHZtLCBrZXkpO1xuICB9XG4gIHJldHVybiBvcHRpb25zO1xufVxuXG4vKipcbiAqIFJlc29sdmUgYW4gYXNzZXQuXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYmVjYXVzZSBjaGlsZCBpbnN0YW5jZXMgbmVlZCBhY2Nlc3NcbiAqIHRvIGFzc2V0cyBkZWZpbmVkIGluIGl0cyBhbmNlc3RvciBjaGFpbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICogQHBhcmFtIHtCb29sZWFufSB3YXJuTWlzc2luZ1xuICogQHJldHVybiB7T2JqZWN0fEZ1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIHJlc29sdmVBc3NldChvcHRpb25zLCB0eXBlLCBpZCwgd2Fybk1pc3NpbmcpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICh0eXBlb2YgaWQgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBhc3NldHMgPSBvcHRpb25zW3R5cGVdO1xuICB2YXIgY2FtZWxpemVkSWQ7XG4gIHZhciByZXMgPSBhc3NldHNbaWRdIHx8XG4gIC8vIGNhbWVsQ2FzZSBJRFxuICBhc3NldHNbY2FtZWxpemVkSWQgPSBjYW1lbGl6ZShpZCldIHx8XG4gIC8vIFBhc2NhbCBDYXNlIElEXG4gIGFzc2V0c1tjYW1lbGl6ZWRJZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbWVsaXplZElkLnNsaWNlKDEpXTtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybk1pc3NpbmcgJiYgIXJlcykge1xuICAgIHdhcm4oJ0ZhaWxlZCB0byByZXNvbHZlICcgKyB0eXBlLnNsaWNlKDAsIC0xKSArICc6ICcgKyBpZCwgb3B0aW9ucyk7XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxudmFyIHVpZCQxID0gMDtcblxuLyoqXG4gKiBBIGRlcCBpcyBhbiBvYnNlcnZhYmxlIHRoYXQgY2FuIGhhdmUgbXVsdGlwbGVcbiAqIGRpcmVjdGl2ZXMgc3Vic2NyaWJpbmcgdG8gaXQuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIERlcCgpIHtcbiAgdGhpcy5pZCA9IHVpZCQxKys7XG4gIHRoaXMuc3VicyA9IFtdO1xufVxuXG4vLyB0aGUgY3VycmVudCB0YXJnZXQgd2F0Y2hlciBiZWluZyBldmFsdWF0ZWQuXG4vLyB0aGlzIGlzIGdsb2JhbGx5IHVuaXF1ZSBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG9ubHkgb25lXG4vLyB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZCBhdCBhbnkgdGltZS5cbkRlcC50YXJnZXQgPSBudWxsO1xuXG4vKipcbiAqIEFkZCBhIGRpcmVjdGl2ZSBzdWJzY3JpYmVyLlxuICpcbiAqIEBwYXJhbSB7RGlyZWN0aXZlfSBzdWJcbiAqL1xuXG5EZXAucHJvdG90eXBlLmFkZFN1YiA9IGZ1bmN0aW9uIChzdWIpIHtcbiAgdGhpcy5zdWJzLnB1c2goc3ViKTtcbn07XG5cbi8qKlxuICogUmVtb3ZlIGEgZGlyZWN0aXZlIHN1YnNjcmliZXIuXG4gKlxuICogQHBhcmFtIHtEaXJlY3RpdmV9IHN1YlxuICovXG5cbkRlcC5wcm90b3R5cGUucmVtb3ZlU3ViID0gZnVuY3Rpb24gKHN1Yikge1xuICB0aGlzLnN1YnMuJHJlbW92ZShzdWIpO1xufTtcblxuLyoqXG4gKiBBZGQgc2VsZiBhcyBhIGRlcGVuZGVuY3kgdG8gdGhlIHRhcmdldCB3YXRjaGVyLlxuICovXG5cbkRlcC5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gKCkge1xuICBEZXAudGFyZ2V0LmFkZERlcCh0aGlzKTtcbn07XG5cbi8qKlxuICogTm90aWZ5IGFsbCBzdWJzY3JpYmVycyBvZiBhIG5ldyB2YWx1ZS5cbiAqL1xuXG5EZXAucHJvdG90eXBlLm5vdGlmeSA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gc3RhYmxpemUgdGhlIHN1YnNjcmliZXIgbGlzdCBmaXJzdFxuICB2YXIgc3VicyA9IHRvQXJyYXkodGhpcy5zdWJzKTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdWJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHN1YnNbaV0udXBkYXRlKCk7XG4gIH1cbn07XG5cbnZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xudmFyIGFycmF5TWV0aG9kcyA9IE9iamVjdC5jcmVhdGUoYXJyYXlQcm90bylcblxuLyoqXG4gKiBJbnRlcmNlcHQgbXV0YXRpbmcgbWV0aG9kcyBhbmQgZW1pdCBldmVudHNcbiAqL1xuXG47WydwdXNoJywgJ3BvcCcsICdzaGlmdCcsICd1bnNoaWZ0JywgJ3NwbGljZScsICdzb3J0JywgJ3JldmVyc2UnXS5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHtcbiAgLy8gY2FjaGUgb3JpZ2luYWwgbWV0aG9kXG4gIHZhciBvcmlnaW5hbCA9IGFycmF5UHJvdG9bbWV0aG9kXTtcbiAgZGVmKGFycmF5TWV0aG9kcywgbWV0aG9kLCBmdW5jdGlvbiBtdXRhdG9yKCkge1xuICAgIC8vIGF2b2lkIGxlYWtpbmcgYXJndW1lbnRzOlxuICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL2Nsb3N1cmUtd2l0aC1hcmd1bWVudHNcbiAgICB2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoaSk7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgICB9XG4gICAgdmFyIHJlc3VsdCA9IG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIHZhciBvYiA9IHRoaXMuX19vYl9fO1xuICAgIHZhciBpbnNlcnRlZDtcbiAgICBzd2l0Y2ggKG1ldGhvZCkge1xuICAgICAgY2FzZSAncHVzaCc6XG4gICAgICAgIGluc2VydGVkID0gYXJncztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd1bnNoaWZ0JzpcbiAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NwbGljZSc6XG4gICAgICAgIGluc2VydGVkID0gYXJncy5zbGljZSgyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmIChpbnNlcnRlZCkgb2Iub2JzZXJ2ZUFycmF5KGluc2VydGVkKTtcbiAgICAvLyBub3RpZnkgY2hhbmdlXG4gICAgb2IuZGVwLm5vdGlmeSgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0pO1xufSk7XG5cbi8qKlxuICogU3dhcCB0aGUgZWxlbWVudCBhdCB0aGUgZ2l2ZW4gaW5kZXggd2l0aCBhIG5ldyB2YWx1ZVxuICogYW5kIGVtaXRzIGNvcnJlc3BvbmRpbmcgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gKiBAcGFyYW0geyp9IHZhbFxuICogQHJldHVybiB7Kn0gLSByZXBsYWNlZCBlbGVtZW50XG4gKi9cblxuZGVmKGFycmF5UHJvdG8sICckc2V0JywgZnVuY3Rpb24gJHNldChpbmRleCwgdmFsKSB7XG4gIGlmIChpbmRleCA+PSB0aGlzLmxlbmd0aCkge1xuICAgIHRoaXMubGVuZ3RoID0gTnVtYmVyKGluZGV4KSArIDE7XG4gIH1cbiAgcmV0dXJuIHRoaXMuc3BsaWNlKGluZGV4LCAxLCB2YWwpWzBdO1xufSk7XG5cbi8qKlxuICogQ29udmVuaWVuY2UgbWV0aG9kIHRvIHJlbW92ZSB0aGUgZWxlbWVudCBhdCBnaXZlbiBpbmRleCBvciB0YXJnZXQgZWxlbWVudCByZWZlcmVuY2UuXG4gKlxuICogQHBhcmFtIHsqfSBpdGVtXG4gKi9cblxuZGVmKGFycmF5UHJvdG8sICckcmVtb3ZlJywgZnVuY3Rpb24gJHJlbW92ZShpdGVtKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoIXRoaXMubGVuZ3RoKSByZXR1cm47XG4gIHZhciBpbmRleCA9IGluZGV4T2YodGhpcywgaXRlbSk7XG4gIGlmIChpbmRleCA+IC0xKSB7XG4gICAgcmV0dXJuIHRoaXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxufSk7XG5cbnZhciBhcnJheUtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhcnJheU1ldGhvZHMpO1xuXG4vKipcbiAqIEJ5IGRlZmF1bHQsIHdoZW4gYSByZWFjdGl2ZSBwcm9wZXJ0eSBpcyBzZXQsIHRoZSBuZXcgdmFsdWUgaXNcbiAqIGFsc28gY29udmVydGVkIHRvIGJlY29tZSByZWFjdGl2ZS4gSG93ZXZlciBpbiBjZXJ0YWluIGNhc2VzLCBlLmcuXG4gKiB2LWZvciBzY29wZSBhbGlhcyBhbmQgcHJvcHMsIHdlIGRvbid0IHdhbnQgdG8gZm9yY2UgY29udmVyc2lvblxuICogYmVjYXVzZSB0aGUgdmFsdWUgbWF5IGJlIGEgbmVzdGVkIHZhbHVlIHVuZGVyIGEgZnJvemVuIGRhdGEgc3RydWN0dXJlLlxuICpcbiAqIFNvIHdoZW5ldmVyIHdlIHdhbnQgdG8gc2V0IGEgcmVhY3RpdmUgcHJvcGVydHkgd2l0aG91dCBmb3JjaW5nXG4gKiBjb252ZXJzaW9uIG9uIHRoZSBuZXcgdmFsdWUsIHdlIHdyYXAgdGhhdCBjYWxsIGluc2lkZSB0aGlzIGZ1bmN0aW9uLlxuICovXG5cbnZhciBzaG91bGRDb252ZXJ0ID0gdHJ1ZTtcblxuZnVuY3Rpb24gd2l0aG91dENvbnZlcnNpb24oZm4pIHtcbiAgc2hvdWxkQ29udmVydCA9IGZhbHNlO1xuICBmbigpO1xuICBzaG91bGRDb252ZXJ0ID0gdHJ1ZTtcbn1cblxuLyoqXG4gKiBPYnNlcnZlciBjbGFzcyB0aGF0IGFyZSBhdHRhY2hlZCB0byBlYWNoIG9ic2VydmVkXG4gKiBvYmplY3QuIE9uY2UgYXR0YWNoZWQsIHRoZSBvYnNlcnZlciBjb252ZXJ0cyB0YXJnZXRcbiAqIG9iamVjdCdzIHByb3BlcnR5IGtleXMgaW50byBnZXR0ZXIvc2V0dGVycyB0aGF0XG4gKiBjb2xsZWN0IGRlcGVuZGVuY2llcyBhbmQgZGlzcGF0Y2hlcyB1cGRhdGVzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSB2YWx1ZVxuICogQGNvbnN0cnVjdG9yXG4gKi9cblxuZnVuY3Rpb24gT2JzZXJ2ZXIodmFsdWUpIHtcbiAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB0aGlzLmRlcCA9IG5ldyBEZXAoKTtcbiAgZGVmKHZhbHVlLCAnX19vYl9fJywgdGhpcyk7XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIHZhciBhdWdtZW50ID0gaGFzUHJvdG8gPyBwcm90b0F1Z21lbnQgOiBjb3B5QXVnbWVudDtcbiAgICBhdWdtZW50KHZhbHVlLCBhcnJheU1ldGhvZHMsIGFycmF5S2V5cyk7XG4gICAgdGhpcy5vYnNlcnZlQXJyYXkodmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMud2Fsayh2YWx1ZSk7XG4gIH1cbn1cblxuLy8gSW5zdGFuY2UgbWV0aG9kc1xuXG4vKipcbiAqIFdhbGsgdGhyb3VnaCBlYWNoIHByb3BlcnR5IGFuZCBjb252ZXJ0IHRoZW0gaW50b1xuICogZ2V0dGVyL3NldHRlcnMuIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCB3aGVuXG4gKiB2YWx1ZSB0eXBlIGlzIE9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLndhbGsgPSBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHRoaXMuY29udmVydChrZXlzW2ldLCBvYmpba2V5c1tpXV0pO1xuICB9XG59O1xuXG4vKipcbiAqIE9ic2VydmUgYSBsaXN0IG9mIEFycmF5IGl0ZW1zLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGl0ZW1zXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLm9ic2VydmVBcnJheSA9IGZ1bmN0aW9uIChpdGVtcykge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGl0ZW1zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIG9ic2VydmUoaXRlbXNbaV0pO1xuICB9XG59O1xuXG4vKipcbiAqIENvbnZlcnQgYSBwcm9wZXJ0eSBpbnRvIGdldHRlci9zZXR0ZXIgc28gd2UgY2FuIGVtaXRcbiAqIHRoZSBldmVudHMgd2hlbiB0aGUgcHJvcGVydHkgaXMgYWNjZXNzZWQvY2hhbmdlZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5cbk9ic2VydmVyLnByb3RvdHlwZS5jb252ZXJ0ID0gZnVuY3Rpb24gKGtleSwgdmFsKSB7XG4gIGRlZmluZVJlYWN0aXZlKHRoaXMudmFsdWUsIGtleSwgdmFsKTtcbn07XG5cbi8qKlxuICogQWRkIGFuIG93bmVyIHZtLCBzbyB0aGF0IHdoZW4gJHNldC8kZGVsZXRlIG11dGF0aW9uc1xuICogaGFwcGVuIHdlIGNhbiBub3RpZnkgb3duZXIgdm1zIHRvIHByb3h5IHRoZSBrZXlzIGFuZFxuICogZGlnZXN0IHRoZSB3YXRjaGVycy4gVGhpcyBpcyBvbmx5IGNhbGxlZCB3aGVuIHRoZSBvYmplY3RcbiAqIGlzIG9ic2VydmVkIGFzIGFuIGluc3RhbmNlJ3Mgcm9vdCAkZGF0YS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5PYnNlcnZlci5wcm90b3R5cGUuYWRkVm0gPSBmdW5jdGlvbiAodm0pIHtcbiAgKHRoaXMudm1zIHx8ICh0aGlzLnZtcyA9IFtdKSkucHVzaCh2bSk7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhbiBvd25lciB2bS4gVGhpcyBpcyBjYWxsZWQgd2hlbiB0aGUgb2JqZWN0IGlzXG4gKiBzd2FwcGVkIG91dCBhcyBhbiBpbnN0YW5jZSdzICRkYXRhIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5PYnNlcnZlci5wcm90b3R5cGUucmVtb3ZlVm0gPSBmdW5jdGlvbiAodm0pIHtcbiAgdGhpcy52bXMuJHJlbW92ZSh2bSk7XG59O1xuXG4vLyBoZWxwZXJzXG5cbi8qKlxuICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGludGVyY2VwdGluZ1xuICogdGhlIHByb3RvdHlwZSBjaGFpbiB1c2luZyBfX3Byb3RvX19cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gdGFyZ2V0XG4gKiBAcGFyYW0ge09iamVjdH0gc3JjXG4gKi9cblxuZnVuY3Rpb24gcHJvdG9BdWdtZW50KHRhcmdldCwgc3JjKSB7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG4gIHRhcmdldC5fX3Byb3RvX18gPSBzcmM7XG4gIC8qIGVzbGludC1lbmFibGUgbm8tcHJvdG8gKi9cbn1cblxuLyoqXG4gKiBBdWdtZW50IGFuIHRhcmdldCBPYmplY3Qgb3IgQXJyYXkgYnkgZGVmaW5pbmdcbiAqIGhpZGRlbiBwcm9wZXJ0aWVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSB0YXJnZXRcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm90b1xuICovXG5cbmZ1bmN0aW9uIGNvcHlBdWdtZW50KHRhcmdldCwgc3JjLCBrZXlzKSB7XG4gIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICBkZWYodGFyZ2V0LCBrZXksIHNyY1trZXldKTtcbiAgfVxufVxuXG4vKipcbiAqIEF0dGVtcHQgdG8gY3JlYXRlIGFuIG9ic2VydmVyIGluc3RhbmNlIGZvciBhIHZhbHVlLFxuICogcmV0dXJucyB0aGUgbmV3IG9ic2VydmVyIGlmIHN1Y2Nlc3NmdWxseSBvYnNlcnZlZCxcbiAqIG9yIHRoZSBleGlzdGluZyBvYnNlcnZlciBpZiB0aGUgdmFsdWUgYWxyZWFkeSBoYXMgb25lLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7VnVlfSBbdm1dXG4gKiBAcmV0dXJuIHtPYnNlcnZlcnx1bmRlZmluZWR9XG4gKiBAc3RhdGljXG4gKi9cblxuZnVuY3Rpb24gb2JzZXJ2ZSh2YWx1ZSwgdm0pIHtcbiAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBvYjtcbiAgaWYgKGhhc093bih2YWx1ZSwgJ19fb2JfXycpICYmIHZhbHVlLl9fb2JfXyBpbnN0YW5jZW9mIE9ic2VydmVyKSB7XG4gICAgb2IgPSB2YWx1ZS5fX29iX187XG4gIH0gZWxzZSBpZiAoc2hvdWxkQ29udmVydCAmJiAoaXNBcnJheSh2YWx1ZSkgfHwgaXNQbGFpbk9iamVjdCh2YWx1ZSkpICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpICYmICF2YWx1ZS5faXNWdWUpIHtcbiAgICBvYiA9IG5ldyBPYnNlcnZlcih2YWx1ZSk7XG4gIH1cbiAgaWYgKG9iICYmIHZtKSB7XG4gICAgb2IuYWRkVm0odm0pO1xuICB9XG4gIHJldHVybiBvYjtcbn1cblxuLyoqXG4gKiBEZWZpbmUgYSByZWFjdGl2ZSBwcm9wZXJ0eSBvbiBhbiBPYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5mdW5jdGlvbiBkZWZpbmVSZWFjdGl2ZShvYmosIGtleSwgdmFsKSB7XG4gIHZhciBkZXAgPSBuZXcgRGVwKCk7XG5cbiAgdmFyIHByb3BlcnR5ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG4gIGlmIChwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5jb25maWd1cmFibGUgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gY2F0ZXIgZm9yIHByZS1kZWZpbmVkIGdldHRlci9zZXR0ZXJzXG4gIHZhciBnZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5nZXQ7XG4gIHZhciBzZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5zZXQ7XG5cbiAgdmFyIGNoaWxkT2IgPSBvYnNlcnZlKHZhbCk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gcmVhY3RpdmVHZXR0ZXIoKSB7XG4gICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogdmFsO1xuICAgICAgaWYgKERlcC50YXJnZXQpIHtcbiAgICAgICAgZGVwLmRlcGVuZCgpO1xuICAgICAgICBpZiAoY2hpbGRPYikge1xuICAgICAgICAgIGNoaWxkT2IuZGVwLmRlcGVuZCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgIGZvciAodmFyIGUsIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBlID0gdmFsdWVbaV07XG4gICAgICAgICAgICBlICYmIGUuX19vYl9fICYmIGUuX19vYl9fLmRlcC5kZXBlbmQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gcmVhY3RpdmVTZXR0ZXIobmV3VmFsKSB7XG4gICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogdmFsO1xuICAgICAgaWYgKG5ld1ZhbCA9PT0gdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHNldHRlcikge1xuICAgICAgICBzZXR0ZXIuY2FsbChvYmosIG5ld1ZhbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWwgPSBuZXdWYWw7XG4gICAgICB9XG4gICAgICBjaGlsZE9iID0gb2JzZXJ2ZShuZXdWYWwpO1xuICAgICAgZGVwLm5vdGlmeSgpO1xuICAgIH1cbiAgfSk7XG59XG5cblxuXG52YXIgdXRpbCA9IE9iamVjdC5mcmVlemUoe1xuXHRkZWZpbmVSZWFjdGl2ZTogZGVmaW5lUmVhY3RpdmUsXG5cdHNldDogc2V0LFxuXHRkZWw6IGRlbCxcblx0aGFzT3duOiBoYXNPd24sXG5cdGlzTGl0ZXJhbDogaXNMaXRlcmFsLFxuXHRpc1Jlc2VydmVkOiBpc1Jlc2VydmVkLFxuXHRfdG9TdHJpbmc6IF90b1N0cmluZyxcblx0dG9OdW1iZXI6IHRvTnVtYmVyLFxuXHR0b0Jvb2xlYW46IHRvQm9vbGVhbixcblx0c3RyaXBRdW90ZXM6IHN0cmlwUXVvdGVzLFxuXHRjYW1lbGl6ZTogY2FtZWxpemUsXG5cdGh5cGhlbmF0ZTogaHlwaGVuYXRlLFxuXHRjbGFzc2lmeTogY2xhc3NpZnksXG5cdGJpbmQ6IGJpbmQsXG5cdHRvQXJyYXk6IHRvQXJyYXksXG5cdGV4dGVuZDogZXh0ZW5kLFxuXHRpc09iamVjdDogaXNPYmplY3QsXG5cdGlzUGxhaW5PYmplY3Q6IGlzUGxhaW5PYmplY3QsXG5cdGRlZjogZGVmLFxuXHRkZWJvdW5jZTogX2RlYm91bmNlLFxuXHRpbmRleE9mOiBpbmRleE9mLFxuXHRjYW5jZWxsYWJsZTogY2FuY2VsbGFibGUsXG5cdGxvb3NlRXF1YWw6IGxvb3NlRXF1YWwsXG5cdGlzQXJyYXk6IGlzQXJyYXksXG5cdGhhc1Byb3RvOiBoYXNQcm90byxcblx0aW5Ccm93c2VyOiBpbkJyb3dzZXIsXG5cdGRldnRvb2xzOiBkZXZ0b29scyxcblx0aXNJRTogaXNJRSxcblx0aXNJRTk6IGlzSUU5LFxuXHRpc0FuZHJvaWQ6IGlzQW5kcm9pZCxcblx0aXNJb3M6IGlzSW9zLFxuXHRpb3NWZXJzaW9uTWF0Y2g6IGlvc1ZlcnNpb25NYXRjaCxcblx0aW9zVmVyc2lvbjogaW9zVmVyc2lvbixcblx0aGFzTXV0YXRpb25PYnNlcnZlckJ1ZzogaGFzTXV0YXRpb25PYnNlcnZlckJ1Zyxcblx0Z2V0IHRyYW5zaXRpb25Qcm9wICgpIHsgcmV0dXJuIHRyYW5zaXRpb25Qcm9wOyB9LFxuXHRnZXQgdHJhbnNpdGlvbkVuZEV2ZW50ICgpIHsgcmV0dXJuIHRyYW5zaXRpb25FbmRFdmVudDsgfSxcblx0Z2V0IGFuaW1hdGlvblByb3AgKCkgeyByZXR1cm4gYW5pbWF0aW9uUHJvcDsgfSxcblx0Z2V0IGFuaW1hdGlvbkVuZEV2ZW50ICgpIHsgcmV0dXJuIGFuaW1hdGlvbkVuZEV2ZW50OyB9LFxuXHRuZXh0VGljazogbmV4dFRpY2ssXG5cdGdldCBfU2V0ICgpIHsgcmV0dXJuIF9TZXQ7IH0sXG5cdHF1ZXJ5OiBxdWVyeSxcblx0aW5Eb2M6IGluRG9jLFxuXHRnZXRBdHRyOiBnZXRBdHRyLFxuXHRnZXRCaW5kQXR0cjogZ2V0QmluZEF0dHIsXG5cdGhhc0JpbmRBdHRyOiBoYXNCaW5kQXR0cixcblx0YmVmb3JlOiBiZWZvcmUsXG5cdGFmdGVyOiBhZnRlcixcblx0cmVtb3ZlOiByZW1vdmUsXG5cdHByZXBlbmQ6IHByZXBlbmQsXG5cdHJlcGxhY2U6IHJlcGxhY2UsXG5cdG9uOiBvbixcblx0b2ZmOiBvZmYsXG5cdHNldENsYXNzOiBzZXRDbGFzcyxcblx0YWRkQ2xhc3M6IGFkZENsYXNzLFxuXHRyZW1vdmVDbGFzczogcmVtb3ZlQ2xhc3MsXG5cdGV4dHJhY3RDb250ZW50OiBleHRyYWN0Q29udGVudCxcblx0dHJpbU5vZGU6IHRyaW1Ob2RlLFxuXHRpc1RlbXBsYXRlOiBpc1RlbXBsYXRlLFxuXHRjcmVhdGVBbmNob3I6IGNyZWF0ZUFuY2hvcixcblx0ZmluZFJlZjogZmluZFJlZixcblx0bWFwTm9kZVJhbmdlOiBtYXBOb2RlUmFuZ2UsXG5cdHJlbW92ZU5vZGVSYW5nZTogcmVtb3ZlTm9kZVJhbmdlLFxuXHRpc0ZyYWdtZW50OiBpc0ZyYWdtZW50LFxuXHRnZXRPdXRlckhUTUw6IGdldE91dGVySFRNTCxcblx0bWVyZ2VPcHRpb25zOiBtZXJnZU9wdGlvbnMsXG5cdHJlc29sdmVBc3NldDogcmVzb2x2ZUFzc2V0LFxuXHRjaGVja0NvbXBvbmVudEF0dHI6IGNoZWNrQ29tcG9uZW50QXR0cixcblx0Y29tbW9uVGFnUkU6IGNvbW1vblRhZ1JFLFxuXHRyZXNlcnZlZFRhZ1JFOiByZXNlcnZlZFRhZ1JFLFxuXHRnZXQgd2FybiAoKSB7IHJldHVybiB3YXJuOyB9XG59KTtcblxudmFyIHVpZCA9IDA7XG5cbmZ1bmN0aW9uIGluaXRNaXhpbiAoVnVlKSB7XG4gIC8qKlxuICAgKiBUaGUgbWFpbiBpbml0IHNlcXVlbmNlLiBUaGlzIGlzIGNhbGxlZCBmb3IgZXZlcnlcbiAgICogaW5zdGFuY2UsIGluY2x1ZGluZyBvbmVzIHRoYXQgYXJlIGNyZWF0ZWQgZnJvbSBleHRlbmRlZFxuICAgKiBjb25zdHJ1Y3RvcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gdGhpcyBvcHRpb25zIG9iamVjdCBzaG91bGQgYmVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgcmVzdWx0IG9mIG1lcmdpbmcgY2xhc3NcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zIGFuZCB0aGUgb3B0aW9ucyBwYXNzZWRcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBpbiB0byB0aGUgY29uc3RydWN0b3IuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgdGhpcy4kZWwgPSBudWxsO1xuICAgIHRoaXMuJHBhcmVudCA9IG9wdGlvbnMucGFyZW50O1xuICAgIHRoaXMuJHJvb3QgPSB0aGlzLiRwYXJlbnQgPyB0aGlzLiRwYXJlbnQuJHJvb3QgOiB0aGlzO1xuICAgIHRoaXMuJGNoaWxkcmVuID0gW107XG4gICAgdGhpcy4kcmVmcyA9IHt9OyAvLyBjaGlsZCB2bSByZWZlcmVuY2VzXG4gICAgdGhpcy4kZWxzID0ge307IC8vIGVsZW1lbnQgcmVmZXJlbmNlc1xuICAgIHRoaXMuX3dhdGNoZXJzID0gW107IC8vIGFsbCB3YXRjaGVycyBhcyBhbiBhcnJheVxuICAgIHRoaXMuX2RpcmVjdGl2ZXMgPSBbXTsgLy8gYWxsIGRpcmVjdGl2ZXNcblxuICAgIC8vIGEgdWlkXG4gICAgdGhpcy5fdWlkID0gdWlkKys7XG5cbiAgICAvLyBhIGZsYWcgdG8gYXZvaWQgdGhpcyBiZWluZyBvYnNlcnZlZFxuICAgIHRoaXMuX2lzVnVlID0gdHJ1ZTtcblxuICAgIC8vIGV2ZW50cyBib29ra2VlcGluZ1xuICAgIHRoaXMuX2V2ZW50cyA9IHt9OyAvLyByZWdpc3RlcmVkIGNhbGxiYWNrc1xuICAgIHRoaXMuX2V2ZW50c0NvdW50ID0ge307IC8vIGZvciAkYnJvYWRjYXN0IG9wdGltaXphdGlvblxuXG4gICAgLy8gZnJhZ21lbnQgaW5zdGFuY2UgcHJvcGVydGllc1xuICAgIHRoaXMuX2lzRnJhZ21lbnQgPSBmYWxzZTtcbiAgICB0aGlzLl9mcmFnbWVudCA9IC8vIEB0eXBlIHtEb2N1bWVudEZyYWdtZW50fVxuICAgIHRoaXMuX2ZyYWdtZW50U3RhcnQgPSAvLyBAdHlwZSB7VGV4dHxDb21tZW50fVxuICAgIHRoaXMuX2ZyYWdtZW50RW5kID0gbnVsbDsgLy8gQHR5cGUge1RleHR8Q29tbWVudH1cblxuICAgIC8vIGxpZmVjeWNsZSBzdGF0ZVxuICAgIHRoaXMuX2lzQ29tcGlsZWQgPSB0aGlzLl9pc0Rlc3Ryb3llZCA9IHRoaXMuX2lzUmVhZHkgPSB0aGlzLl9pc0F0dGFjaGVkID0gdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCA9IHRoaXMuX3ZGb3JSZW1vdmluZyA9IGZhbHNlO1xuICAgIHRoaXMuX3VubGlua0ZuID0gbnVsbDtcblxuICAgIC8vIGNvbnRleHQ6XG4gICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgY29udGV4dFxuICAgIC8vIHdpbGwgYmUgdGhlIGNvbW1vbiBwYXJlbnQgdm0gb2YgdGhpcyBpbnN0YW5jZVxuICAgIC8vIGFuZCBpdHMgaG9zdC5cbiAgICB0aGlzLl9jb250ZXh0ID0gb3B0aW9ucy5fY29udGV4dCB8fCB0aGlzLiRwYXJlbnQ7XG5cbiAgICAvLyBzY29wZTpcbiAgICAvLyBpZiB0aGlzIGlzIGluc2lkZSBhbiBpbmxpbmUgdi1mb3IsIHRoZSBzY29wZVxuICAgIC8vIHdpbGwgYmUgdGhlIGludGVybWVkaWF0ZSBzY29wZSBjcmVhdGVkIGZvciB0aGlzXG4gICAgLy8gcmVwZWF0IGZyYWdtZW50LiB0aGlzIGlzIHVzZWQgZm9yIGxpbmtpbmcgcHJvcHNcbiAgICAvLyBhbmQgY29udGFpbmVyIGRpcmVjdGl2ZXMuXG4gICAgdGhpcy5fc2NvcGUgPSBvcHRpb25zLl9zY29wZTtcblxuICAgIC8vIGZyYWdtZW50OlxuICAgIC8vIGlmIHRoaXMgaW5zdGFuY2UgaXMgY29tcGlsZWQgaW5zaWRlIGEgRnJhZ21lbnQsIGl0XG4gICAgLy8gbmVlZHMgdG8gcmVpZ3N0ZXIgaXRzZWxmIGFzIGEgY2hpbGQgb2YgdGhhdCBmcmFnbWVudFxuICAgIC8vIGZvciBhdHRhY2gvZGV0YWNoIHRvIHdvcmsgcHJvcGVybHkuXG4gICAgdGhpcy5fZnJhZyA9IG9wdGlvbnMuX2ZyYWc7XG4gICAgaWYgKHRoaXMuX2ZyYWcpIHtcbiAgICAgIHRoaXMuX2ZyYWcuY2hpbGRyZW4ucHVzaCh0aGlzKTtcbiAgICB9XG5cbiAgICAvLyBwdXNoIHNlbGYgaW50byBwYXJlbnQgLyB0cmFuc2NsdXNpb24gaG9zdFxuICAgIGlmICh0aGlzLiRwYXJlbnQpIHtcbiAgICAgIHRoaXMuJHBhcmVudC4kY2hpbGRyZW4ucHVzaCh0aGlzKTtcbiAgICB9XG5cbiAgICAvLyBtZXJnZSBvcHRpb25zLlxuICAgIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zID0gbWVyZ2VPcHRpb25zKHRoaXMuY29uc3RydWN0b3Iub3B0aW9ucywgb3B0aW9ucywgdGhpcyk7XG5cbiAgICAvLyBzZXQgcmVmXG4gICAgdGhpcy5fdXBkYXRlUmVmKCk7XG5cbiAgICAvLyBpbml0aWFsaXplIGRhdGEgYXMgZW1wdHkgb2JqZWN0LlxuICAgIC8vIGl0IHdpbGwgYmUgZmlsbGVkIHVwIGluIF9pbml0RGF0YSgpLlxuICAgIHRoaXMuX2RhdGEgPSB7fTtcblxuICAgIC8vIGNhbGwgaW5pdCBob29rXG4gICAgdGhpcy5fY2FsbEhvb2soJ2luaXQnKTtcblxuICAgIC8vIGluaXRpYWxpemUgZGF0YSBvYnNlcnZhdGlvbiBhbmQgc2NvcGUgaW5oZXJpdGFuY2UuXG4gICAgdGhpcy5faW5pdFN0YXRlKCk7XG5cbiAgICAvLyBzZXR1cCBldmVudCBzeXN0ZW0gYW5kIG9wdGlvbiBldmVudHMuXG4gICAgdGhpcy5faW5pdEV2ZW50cygpO1xuXG4gICAgLy8gY2FsbCBjcmVhdGVkIGhvb2tcbiAgICB0aGlzLl9jYWxsSG9vaygnY3JlYXRlZCcpO1xuXG4gICAgLy8gaWYgYGVsYCBvcHRpb24gaXMgcGFzc2VkLCBzdGFydCBjb21waWxhdGlvbi5cbiAgICBpZiAob3B0aW9ucy5lbCkge1xuICAgICAgdGhpcy4kbW91bnQob3B0aW9ucy5lbCk7XG4gICAgfVxuICB9O1xufVxuXG52YXIgcGF0aENhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXG4vLyBhY3Rpb25zXG52YXIgQVBQRU5EID0gMDtcbnZhciBQVVNIID0gMTtcbnZhciBJTkNfU1VCX1BBVEhfREVQVEggPSAyO1xudmFyIFBVU0hfU1VCX1BBVEggPSAzO1xuXG4vLyBzdGF0ZXNcbnZhciBCRUZPUkVfUEFUSCA9IDA7XG52YXIgSU5fUEFUSCA9IDE7XG52YXIgQkVGT1JFX0lERU5UID0gMjtcbnZhciBJTl9JREVOVCA9IDM7XG52YXIgSU5fU1VCX1BBVEggPSA0O1xudmFyIElOX1NJTkdMRV9RVU9URSA9IDU7XG52YXIgSU5fRE9VQkxFX1FVT1RFID0gNjtcbnZhciBBRlRFUl9QQVRIID0gNztcbnZhciBFUlJPUiA9IDg7XG5cbnZhciBwYXRoU3RhdGVNYWNoaW5lID0gW107XG5cbnBhdGhTdGF0ZU1hY2hpbmVbQkVGT1JFX1BBVEhdID0ge1xuICAnd3MnOiBbQkVGT1JFX1BBVEhdLFxuICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sXG4gICdbJzogW0lOX1NVQl9QQVRIXSxcbiAgJ2VvZic6IFtBRlRFUl9QQVRIXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtJTl9QQVRIXSA9IHtcbiAgJ3dzJzogW0lOX1BBVEhdLFxuICAnLic6IFtCRUZPUkVfSURFTlRdLFxuICAnWyc6IFtJTl9TVUJfUEFUSF0sXG4gICdlb2YnOiBbQUZURVJfUEFUSF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbQkVGT1JFX0lERU5UXSA9IHtcbiAgJ3dzJzogW0JFRk9SRV9JREVOVF0sXG4gICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtJTl9JREVOVF0gPSB7XG4gICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcbiAgJzAnOiBbSU5fSURFTlQsIEFQUEVORF0sXG4gICdudW1iZXInOiBbSU5fSURFTlQsIEFQUEVORF0sXG4gICd3cyc6IFtJTl9QQVRILCBQVVNIXSxcbiAgJy4nOiBbQkVGT1JFX0lERU5ULCBQVVNIXSxcbiAgJ1snOiBbSU5fU1VCX1BBVEgsIFBVU0hdLFxuICAnZW9mJzogW0FGVEVSX1BBVEgsIFBVU0hdXG59O1xuXG5wYXRoU3RhdGVNYWNoaW5lW0lOX1NVQl9QQVRIXSA9IHtcbiAgXCInXCI6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF0sXG4gICdcIic6IFtJTl9ET1VCTEVfUVVPVEUsIEFQUEVORF0sXG4gICdbJzogW0lOX1NVQl9QQVRILCBJTkNfU1VCX1BBVEhfREVQVEhdLFxuICAnXSc6IFtJTl9QQVRILCBQVVNIX1NVQl9QQVRIXSxcbiAgJ2VvZic6IEVSUk9SLFxuICAnZWxzZSc6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtJTl9TSU5HTEVfUVVPVEVdID0ge1xuICBcIidcIjogW0lOX1NVQl9QQVRILCBBUFBFTkRdLFxuICAnZW9mJzogRVJST1IsXG4gICdlbHNlJzogW0lOX1NJTkdMRV9RVU9URSwgQVBQRU5EXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtJTl9ET1VCTEVfUVVPVEVdID0ge1xuICAnXCInOiBbSU5fU1VCX1BBVEgsIEFQUEVORF0sXG4gICdlb2YnOiBFUlJPUixcbiAgJ2Vsc2UnOiBbSU5fRE9VQkxFX1FVT1RFLCBBUFBFTkRdXG59O1xuXG4vKipcbiAqIERldGVybWluZSB0aGUgdHlwZSBvZiBhIGNoYXJhY3RlciBpbiBhIGtleXBhdGguXG4gKlxuICogQHBhcmFtIHtDaGFyfSBjaFxuICogQHJldHVybiB7U3RyaW5nfSB0eXBlXG4gKi9cblxuZnVuY3Rpb24gZ2V0UGF0aENoYXJUeXBlKGNoKSB7XG4gIGlmIChjaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuICdlb2YnO1xuICB9XG5cbiAgdmFyIGNvZGUgPSBjaC5jaGFyQ29kZUF0KDApO1xuXG4gIHN3aXRjaCAoY29kZSkge1xuICAgIGNhc2UgMHg1QjogLy8gW1xuICAgIGNhc2UgMHg1RDogLy8gXVxuICAgIGNhc2UgMHgyRTogLy8gLlxuICAgIGNhc2UgMHgyMjogLy8gXCJcbiAgICBjYXNlIDB4Mjc6IC8vICdcbiAgICBjYXNlIDB4MzA6XG4gICAgICAvLyAwXG4gICAgICByZXR1cm4gY2g7XG5cbiAgICBjYXNlIDB4NUY6IC8vIF9cbiAgICBjYXNlIDB4MjQ6XG4gICAgICAvLyAkXG4gICAgICByZXR1cm4gJ2lkZW50JztcblxuICAgIGNhc2UgMHgyMDogLy8gU3BhY2VcbiAgICBjYXNlIDB4MDk6IC8vIFRhYlxuICAgIGNhc2UgMHgwQTogLy8gTmV3bGluZVxuICAgIGNhc2UgMHgwRDogLy8gUmV0dXJuXG4gICAgY2FzZSAweEEwOiAvLyBOby1icmVhayBzcGFjZVxuICAgIGNhc2UgMHhGRUZGOiAvLyBCeXRlIE9yZGVyIE1hcmtcbiAgICBjYXNlIDB4MjAyODogLy8gTGluZSBTZXBhcmF0b3JcbiAgICBjYXNlIDB4MjAyOTpcbiAgICAgIC8vIFBhcmFncmFwaCBTZXBhcmF0b3JcbiAgICAgIHJldHVybiAnd3MnO1xuICB9XG5cbiAgLy8gYS16LCBBLVpcbiAgaWYgKGNvZGUgPj0gMHg2MSAmJiBjb2RlIDw9IDB4N0EgfHwgY29kZSA+PSAweDQxICYmIGNvZGUgPD0gMHg1QSkge1xuICAgIHJldHVybiAnaWRlbnQnO1xuICB9XG5cbiAgLy8gMS05XG4gIGlmIChjb2RlID49IDB4MzEgJiYgY29kZSA8PSAweDM5KSB7XG4gICAgcmV0dXJuICdudW1iZXInO1xuICB9XG5cbiAgcmV0dXJuICdlbHNlJztcbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBzdWJQYXRoLCByZXR1cm4gaXRzIHBsYWluIGZvcm0gaWYgaXQgaXNcbiAqIGEgbGl0ZXJhbCBzdHJpbmcgb3IgbnVtYmVyLiBPdGhlcndpc2UgcHJlcGVuZCB0aGVcbiAqIGR5bmFtaWMgaW5kaWNhdG9yICgqKS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGZvcm1hdFN1YlBhdGgocGF0aCkge1xuICB2YXIgdHJpbW1lZCA9IHBhdGgudHJpbSgpO1xuICAvLyBpbnZhbGlkIGxlYWRpbmcgMFxuICBpZiAocGF0aC5jaGFyQXQoMCkgPT09ICcwJyAmJiBpc05hTihwYXRoKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gaXNMaXRlcmFsKHRyaW1tZWQpID8gc3RyaXBRdW90ZXModHJpbW1lZCkgOiAnKicgKyB0cmltbWVkO1xufVxuXG4vKipcbiAqIFBhcnNlIGEgc3RyaW5nIHBhdGggaW50byBhbiBhcnJheSBvZiBzZWdtZW50c1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2UocGF0aCkge1xuICB2YXIga2V5cyA9IFtdO1xuICB2YXIgaW5kZXggPSAtMTtcbiAgdmFyIG1vZGUgPSBCRUZPUkVfUEFUSDtcbiAgdmFyIHN1YlBhdGhEZXB0aCA9IDA7XG4gIHZhciBjLCBuZXdDaGFyLCBrZXksIHR5cGUsIHRyYW5zaXRpb24sIGFjdGlvbiwgdHlwZU1hcDtcblxuICB2YXIgYWN0aW9ucyA9IFtdO1xuXG4gIGFjdGlvbnNbUFVTSF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgIGtleSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH07XG5cbiAgYWN0aW9uc1tBUFBFTkRdID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAga2V5ID0gbmV3Q2hhcjtcbiAgICB9IGVsc2Uge1xuICAgICAga2V5ICs9IG5ld0NoYXI7XG4gICAgfVxuICB9O1xuXG4gIGFjdGlvbnNbSU5DX1NVQl9QQVRIX0RFUFRIXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBhY3Rpb25zW0FQUEVORF0oKTtcbiAgICBzdWJQYXRoRGVwdGgrKztcbiAgfTtcblxuICBhY3Rpb25zW1BVU0hfU1VCX1BBVEhdID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChzdWJQYXRoRGVwdGggPiAwKSB7XG4gICAgICBzdWJQYXRoRGVwdGgtLTtcbiAgICAgIG1vZGUgPSBJTl9TVUJfUEFUSDtcbiAgICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdWJQYXRoRGVwdGggPSAwO1xuICAgICAga2V5ID0gZm9ybWF0U3ViUGF0aChrZXkpO1xuICAgICAgaWYgKGtleSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aW9uc1tQVVNIXSgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBtYXliZVVuZXNjYXBlUXVvdGUoKSB7XG4gICAgdmFyIG5leHRDaGFyID0gcGF0aFtpbmRleCArIDFdO1xuICAgIGlmIChtb2RlID09PSBJTl9TSU5HTEVfUVVPVEUgJiYgbmV4dENoYXIgPT09IFwiJ1wiIHx8IG1vZGUgPT09IElOX0RPVUJMRV9RVU9URSAmJiBuZXh0Q2hhciA9PT0gJ1wiJykge1xuICAgICAgaW5kZXgrKztcbiAgICAgIG5ld0NoYXIgPSAnXFxcXCcgKyBuZXh0Q2hhcjtcbiAgICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgd2hpbGUgKG1vZGUgIT0gbnVsbCkge1xuICAgIGluZGV4Kys7XG4gICAgYyA9IHBhdGhbaW5kZXhdO1xuXG4gICAgaWYgKGMgPT09ICdcXFxcJyAmJiBtYXliZVVuZXNjYXBlUXVvdGUoKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgdHlwZSA9IGdldFBhdGhDaGFyVHlwZShjKTtcbiAgICB0eXBlTWFwID0gcGF0aFN0YXRlTWFjaGluZVttb2RlXTtcbiAgICB0cmFuc2l0aW9uID0gdHlwZU1hcFt0eXBlXSB8fCB0eXBlTWFwWydlbHNlJ10gfHwgRVJST1I7XG5cbiAgICBpZiAodHJhbnNpdGlvbiA9PT0gRVJST1IpIHtcbiAgICAgIHJldHVybjsgLy8gcGFyc2UgZXJyb3JcbiAgICB9XG5cbiAgICBtb2RlID0gdHJhbnNpdGlvblswXTtcbiAgICBhY3Rpb24gPSBhY3Rpb25zW3RyYW5zaXRpb25bMV1dO1xuICAgIGlmIChhY3Rpb24pIHtcbiAgICAgIG5ld0NoYXIgPSB0cmFuc2l0aW9uWzJdO1xuICAgICAgbmV3Q2hhciA9IG5ld0NoYXIgPT09IHVuZGVmaW5lZCA/IGMgOiBuZXdDaGFyO1xuICAgICAgaWYgKGFjdGlvbigpID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1vZGUgPT09IEFGVEVSX1BBVEgpIHtcbiAgICAgIGtleXMucmF3ID0gcGF0aDtcbiAgICAgIHJldHVybiBrZXlzO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEV4dGVybmFsIHBhcnNlIHRoYXQgY2hlY2sgZm9yIGEgY2FjaGUgaGl0IGZpcnN0XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEByZXR1cm4ge0FycmF5fHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZVBhdGgocGF0aCkge1xuICB2YXIgaGl0ID0gcGF0aENhY2hlLmdldChwYXRoKTtcbiAgaWYgKCFoaXQpIHtcbiAgICBoaXQgPSBwYXJzZShwYXRoKTtcbiAgICBpZiAoaGl0KSB7XG4gICAgICBwYXRoQ2FjaGUucHV0KHBhdGgsIGhpdCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBoaXQ7XG59XG5cbi8qKlxuICogR2V0IGZyb20gYW4gb2JqZWN0IGZyb20gYSBwYXRoIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKi9cblxuZnVuY3Rpb24gZ2V0UGF0aChvYmosIHBhdGgpIHtcbiAgcmV0dXJuIHBhcnNlRXhwcmVzc2lvbihwYXRoKS5nZXQob2JqKTtcbn1cblxuLyoqXG4gKiBXYXJuIGFnYWluc3Qgc2V0dGluZyBub24tZXhpc3RlbnQgcm9vdCBwYXRoIG9uIGEgdm0uXG4gKi9cblxudmFyIHdhcm5Ob25FeGlzdGVudDtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHdhcm5Ob25FeGlzdGVudCA9IGZ1bmN0aW9uIChwYXRoLCB2bSkge1xuICAgIHdhcm4oJ1lvdSBhcmUgc2V0dGluZyBhIG5vbi1leGlzdGVudCBwYXRoIFwiJyArIHBhdGgucmF3ICsgJ1wiICcgKyAnb24gYSB2bSBpbnN0YW5jZS4gQ29uc2lkZXIgcHJlLWluaXRpYWxpemluZyB0aGUgcHJvcGVydHkgJyArICd3aXRoIHRoZSBcImRhdGFcIiBvcHRpb24gZm9yIG1vcmUgcmVsaWFibGUgcmVhY3Rpdml0eSAnICsgJ2FuZCBiZXR0ZXIgcGVyZm9ybWFuY2UuJywgdm0pO1xuICB9O1xufVxuXG4vKipcbiAqIFNldCBvbiBhbiBvYmplY3QgZnJvbSBhIHBhdGhcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZyB8IEFycmF5fSBwYXRoXG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5cbmZ1bmN0aW9uIHNldFBhdGgob2JqLCBwYXRoLCB2YWwpIHtcbiAgdmFyIG9yaWdpbmFsID0gb2JqO1xuICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG4gICAgcGF0aCA9IHBhcnNlKHBhdGgpO1xuICB9XG4gIGlmICghcGF0aCB8fCAhaXNPYmplY3Qob2JqKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgbGFzdCwga2V5O1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHBhdGgubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgbGFzdCA9IG9iajtcbiAgICBrZXkgPSBwYXRoW2ldO1xuICAgIGlmIChrZXkuY2hhckF0KDApID09PSAnKicpIHtcbiAgICAgIGtleSA9IHBhcnNlRXhwcmVzc2lvbihrZXkuc2xpY2UoMSkpLmdldC5jYWxsKG9yaWdpbmFsLCBvcmlnaW5hbCk7XG4gICAgfVxuICAgIGlmIChpIDwgbCAtIDEpIHtcbiAgICAgIG9iaiA9IG9ialtrZXldO1xuICAgICAgaWYgKCFpc09iamVjdChvYmopKSB7XG4gICAgICAgIG9iaiA9IHt9O1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBsYXN0Ll9pc1Z1ZSkge1xuICAgICAgICAgIHdhcm5Ob25FeGlzdGVudChwYXRoLCBsYXN0KTtcbiAgICAgICAgfVxuICAgICAgICBzZXQobGFzdCwga2V5LCBvYmopO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaXNBcnJheShvYmopKSB7XG4gICAgICAgIG9iai4kc2V0KGtleSwgdmFsKTtcbiAgICAgIH0gZWxzZSBpZiAoa2V5IGluIG9iaikge1xuICAgICAgICBvYmpba2V5XSA9IHZhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG9iai5faXNWdWUpIHtcbiAgICAgICAgICB3YXJuTm9uRXhpc3RlbnQocGF0aCwgb2JqKTtcbiAgICAgICAgfVxuICAgICAgICBzZXQob2JqLCBrZXksIHZhbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG52YXIgcGF0aCA9IE9iamVjdC5mcmVlemUoe1xuICBwYXJzZVBhdGg6IHBhcnNlUGF0aCxcbiAgZ2V0UGF0aDogZ2V0UGF0aCxcbiAgc2V0UGF0aDogc2V0UGF0aFxufSk7XG5cbnZhciBleHByZXNzaW9uQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cbnZhciBhbGxvd2VkS2V5d29yZHMgPSAnTWF0aCxEYXRlLHRoaXMsdHJ1ZSxmYWxzZSxudWxsLHVuZGVmaW5lZCxJbmZpbml0eSxOYU4sJyArICdpc05hTixpc0Zpbml0ZSxkZWNvZGVVUkksZGVjb2RlVVJJQ29tcG9uZW50LGVuY29kZVVSSSwnICsgJ2VuY29kZVVSSUNvbXBvbmVudCxwYXJzZUludCxwYXJzZUZsb2F0JztcbnZhciBhbGxvd2VkS2V5d29yZHNSRSA9IG5ldyBSZWdFeHAoJ14oJyArIGFsbG93ZWRLZXl3b3Jkcy5yZXBsYWNlKC8sL2csICdcXFxcYnwnKSArICdcXFxcYiknKTtcblxuLy8ga2V5d29yZHMgdGhhdCBkb24ndCBtYWtlIHNlbnNlIGluc2lkZSBleHByZXNzaW9uc1xudmFyIGltcHJvcGVyS2V5d29yZHMgPSAnYnJlYWssY2FzZSxjbGFzcyxjYXRjaCxjb25zdCxjb250aW51ZSxkZWJ1Z2dlcixkZWZhdWx0LCcgKyAnZGVsZXRlLGRvLGVsc2UsZXhwb3J0LGV4dGVuZHMsZmluYWxseSxmb3IsZnVuY3Rpb24saWYsJyArICdpbXBvcnQsaW4saW5zdGFuY2VvZixsZXQscmV0dXJuLHN1cGVyLHN3aXRjaCx0aHJvdyx0cnksJyArICd2YXIsd2hpbGUsd2l0aCx5aWVsZCxlbnVtLGF3YWl0LGltcGxlbWVudHMscGFja2FnZSwnICsgJ3Byb3RlY3RlZCxzdGF0aWMsaW50ZXJmYWNlLHByaXZhdGUscHVibGljJztcbnZhciBpbXByb3BlcktleXdvcmRzUkUgPSBuZXcgUmVnRXhwKCdeKCcgKyBpbXByb3BlcktleXdvcmRzLnJlcGxhY2UoLywvZywgJ1xcXFxifCcpICsgJ1xcXFxiKScpO1xuXG52YXIgd3NSRSA9IC9cXHMvZztcbnZhciBuZXdsaW5lUkUgPSAvXFxuL2c7XG52YXIgc2F2ZVJFID0gL1tcXHssXVxccypbXFx3XFwkX10rXFxzKjp8KCcoPzpbXidcXFxcXXxcXFxcLikqJ3xcIig/OlteXCJcXFxcXXxcXFxcLikqXCJ8YCg/OlteYFxcXFxdfFxcXFwuKSpcXCRcXHt8XFx9KD86W15gXFxcXF18XFxcXC4pKmB8YCg/OlteYFxcXFxdfFxcXFwuKSpgKXxuZXcgfHR5cGVvZiB8dm9pZCAvZztcbnZhciByZXN0b3JlUkUgPSAvXCIoXFxkKylcIi9nO1xudmFyIHBhdGhUZXN0UkUgPSAvXltBLVphLXpfJF1bXFx3JF0qKD86XFwuW0EtWmEtel8kXVtcXHckXSp8XFxbJy4qPydcXF18XFxbXCIuKj9cIlxcXXxcXFtcXGQrXFxdfFxcW1tBLVphLXpfJF1bXFx3JF0qXFxdKSokLztcbnZhciBpZGVudFJFID0gL1teXFx3JFxcLl0oPzpbQS1aYS16XyRdW1xcdyRdKikvZztcbnZhciBsaXRlcmFsVmFsdWVSRSQxID0gL14oPzp0cnVlfGZhbHNlfG51bGx8dW5kZWZpbmVkfEluZmluaXR5fE5hTikkLztcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbi8qKlxuICogU2F2ZSAvIFJld3JpdGUgLyBSZXN0b3JlXG4gKlxuICogV2hlbiByZXdyaXRpbmcgcGF0aHMgZm91bmQgaW4gYW4gZXhwcmVzc2lvbiwgaXQgaXNcbiAqIHBvc3NpYmxlIGZvciB0aGUgc2FtZSBsZXR0ZXIgc2VxdWVuY2VzIHRvIGJlIGZvdW5kIGluXG4gKiBzdHJpbmdzIGFuZCBPYmplY3QgbGl0ZXJhbCBwcm9wZXJ0eSBrZXlzLiBUaGVyZWZvcmUgd2VcbiAqIHJlbW92ZSBhbmQgc3RvcmUgdGhlc2UgcGFydHMgaW4gYSB0ZW1wb3JhcnkgYXJyYXksIGFuZFxuICogcmVzdG9yZSB0aGVtIGFmdGVyIHRoZSBwYXRoIHJld3JpdGUuXG4gKi9cblxudmFyIHNhdmVkID0gW107XG5cbi8qKlxuICogU2F2ZSByZXBsYWNlclxuICpcbiAqIFRoZSBzYXZlIHJlZ2V4IGNhbiBtYXRjaCB0d28gcG9zc2libGUgY2FzZXM6XG4gKiAxLiBBbiBvcGVuaW5nIG9iamVjdCBsaXRlcmFsXG4gKiAyLiBBIHN0cmluZ1xuICogSWYgbWF0Y2hlZCBhcyBhIHBsYWluIHN0cmluZywgd2UgbmVlZCB0byBlc2NhcGUgaXRzXG4gKiBuZXdsaW5lcywgc2luY2UgdGhlIHN0cmluZyBuZWVkcyB0byBiZSBwcmVzZXJ2ZWQgd2hlblxuICogZ2VuZXJhdGluZyB0aGUgZnVuY3Rpb24gYm9keS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge1N0cmluZ30gaXNTdHJpbmcgLSBzdHIgaWYgbWF0Y2hlZCBhcyBhIHN0cmluZ1xuICogQHJldHVybiB7U3RyaW5nfSAtIHBsYWNlaG9sZGVyIHdpdGggaW5kZXhcbiAqL1xuXG5mdW5jdGlvbiBzYXZlKHN0ciwgaXNTdHJpbmcpIHtcbiAgdmFyIGkgPSBzYXZlZC5sZW5ndGg7XG4gIHNhdmVkW2ldID0gaXNTdHJpbmcgPyBzdHIucmVwbGFjZShuZXdsaW5lUkUsICdcXFxcbicpIDogc3RyO1xuICByZXR1cm4gJ1wiJyArIGkgKyAnXCInO1xufVxuXG4vKipcbiAqIFBhdGggcmV3cml0ZSByZXBsYWNlclxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSByYXdcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiByZXdyaXRlKHJhdykge1xuICB2YXIgYyA9IHJhdy5jaGFyQXQoMCk7XG4gIHZhciBwYXRoID0gcmF3LnNsaWNlKDEpO1xuICBpZiAoYWxsb3dlZEtleXdvcmRzUkUudGVzdChwYXRoKSkge1xuICAgIHJldHVybiByYXc7XG4gIH0gZWxzZSB7XG4gICAgcGF0aCA9IHBhdGguaW5kZXhPZignXCInKSA+IC0xID8gcGF0aC5yZXBsYWNlKHJlc3RvcmVSRSwgcmVzdG9yZSkgOiBwYXRoO1xuICAgIHJldHVybiBjICsgJ3Njb3BlLicgKyBwYXRoO1xuICB9XG59XG5cbi8qKlxuICogUmVzdG9yZSByZXBsYWNlclxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBpIC0gbWF0Y2hlZCBzYXZlIGluZGV4XG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gcmVzdG9yZShzdHIsIGkpIHtcbiAgcmV0dXJuIHNhdmVkW2ldO1xufVxuXG4vKipcbiAqIFJld3JpdGUgYW4gZXhwcmVzc2lvbiwgcHJlZml4aW5nIGFsbCBwYXRoIGFjY2Vzc29ycyB3aXRoXG4gKiBgc2NvcGUuYCBhbmQgZ2VuZXJhdGUgZ2V0dGVyL3NldHRlciBmdW5jdGlvbnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZUdldHRlcihleHApIHtcbiAgaWYgKGltcHJvcGVyS2V5d29yZHNSRS50ZXN0KGV4cCkpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0F2b2lkIHVzaW5nIHJlc2VydmVkIGtleXdvcmRzIGluIGV4cHJlc3Npb246ICcgKyBleHApO1xuICB9XG4gIC8vIHJlc2V0IHN0YXRlXG4gIHNhdmVkLmxlbmd0aCA9IDA7XG4gIC8vIHNhdmUgc3RyaW5ncyBhbmQgb2JqZWN0IGxpdGVyYWwga2V5c1xuICB2YXIgYm9keSA9IGV4cC5yZXBsYWNlKHNhdmVSRSwgc2F2ZSkucmVwbGFjZSh3c1JFLCAnJyk7XG4gIC8vIHJld3JpdGUgYWxsIHBhdGhzXG4gIC8vIHBhZCAxIHNwYWNlIGhlcmUgYmVjYXVzZSB0aGUgcmVnZXggbWF0Y2hlcyAxIGV4dHJhIGNoYXJcbiAgYm9keSA9ICgnICcgKyBib2R5KS5yZXBsYWNlKGlkZW50UkUsIHJld3JpdGUpLnJlcGxhY2UocmVzdG9yZVJFLCByZXN0b3JlKTtcbiAgcmV0dXJuIG1ha2VHZXR0ZXJGbihib2R5KTtcbn1cblxuLyoqXG4gKiBCdWlsZCBhIGdldHRlciBmdW5jdGlvbi4gUmVxdWlyZXMgZXZhbC5cbiAqXG4gKiBXZSBpc29sYXRlIHRoZSB0cnkvY2F0Y2ggc28gaXQgZG9lc24ndCBhZmZlY3QgdGhlXG4gKiBvcHRpbWl6YXRpb24gb2YgdGhlIHBhcnNlIGZ1bmN0aW9uIHdoZW4gaXQgaXMgbm90IGNhbGxlZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYm9keVxuICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIG1ha2VHZXR0ZXJGbihib2R5KSB7XG4gIHRyeSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tbmV3LWZ1bmMgKi9cbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdzY29wZScsICdyZXR1cm4gJyArIGJvZHkgKyAnOycpO1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tbmV3LWZ1bmMgKi9cbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChlLnRvU3RyaW5nKCkubWF0Y2goL3Vuc2FmZS1ldmFsfENTUC8pKSB7XG4gICAgICAgIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgdGhlIGRlZmF1bHQgYnVpbGQgb2YgVnVlLmpzIGluIGFuIGVudmlyb25tZW50ICcgKyAnd2l0aCBDb250ZW50IFNlY3VyaXR5IFBvbGljeSB0aGF0IHByb2hpYml0cyB1bnNhZmUtZXZhbC4gJyArICdVc2UgdGhlIENTUC1jb21wbGlhbnQgYnVpbGQgaW5zdGVhZDogJyArICdodHRwOi8vdnVlanMub3JnL2d1aWRlL2luc3RhbGxhdGlvbi5odG1sI0NTUC1jb21wbGlhbnQtYnVpbGQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdhcm4oJ0ludmFsaWQgZXhwcmVzc2lvbi4gJyArICdHZW5lcmF0ZWQgZnVuY3Rpb24gYm9keTogJyArIGJvZHkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm9vcDtcbiAgfVxufVxuXG4vKipcbiAqIENvbXBpbGUgYSBzZXR0ZXIgZnVuY3Rpb24gZm9yIHRoZSBleHByZXNzaW9uLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlU2V0dGVyKGV4cCkge1xuICB2YXIgcGF0aCA9IHBhcnNlUGF0aChleHApO1xuICBpZiAocGF0aCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIHZhbCkge1xuICAgICAgc2V0UGF0aChzY29wZSwgcGF0aCwgdmFsKTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBzZXR0ZXIgZXhwcmVzc2lvbjogJyArIGV4cCk7XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZSBhbiBleHByZXNzaW9uIGludG8gcmUtd3JpdHRlbiBnZXR0ZXIvc2V0dGVycy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcGFyYW0ge0Jvb2xlYW59IG5lZWRTZXRcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlRXhwcmVzc2lvbihleHAsIG5lZWRTZXQpIHtcbiAgZXhwID0gZXhwLnRyaW0oKTtcbiAgLy8gdHJ5IGNhY2hlXG4gIHZhciBoaXQgPSBleHByZXNzaW9uQ2FjaGUuZ2V0KGV4cCk7XG4gIGlmIChoaXQpIHtcbiAgICBpZiAobmVlZFNldCAmJiAhaGl0LnNldCkge1xuICAgICAgaGl0LnNldCA9IGNvbXBpbGVTZXR0ZXIoaGl0LmV4cCk7XG4gICAgfVxuICAgIHJldHVybiBoaXQ7XG4gIH1cbiAgdmFyIHJlcyA9IHsgZXhwOiBleHAgfTtcbiAgcmVzLmdldCA9IGlzU2ltcGxlUGF0aChleHApICYmIGV4cC5pbmRleE9mKCdbJykgPCAwXG4gIC8vIG9wdGltaXplZCBzdXBlciBzaW1wbGUgZ2V0dGVyXG4gID8gbWFrZUdldHRlckZuKCdzY29wZS4nICsgZXhwKVxuICAvLyBkeW5hbWljIGdldHRlclxuICA6IGNvbXBpbGVHZXR0ZXIoZXhwKTtcbiAgaWYgKG5lZWRTZXQpIHtcbiAgICByZXMuc2V0ID0gY29tcGlsZVNldHRlcihleHApO1xuICB9XG4gIGV4cHJlc3Npb25DYWNoZS5wdXQoZXhwLCByZXMpO1xuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBzaW1wbGUgcGF0aC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzU2ltcGxlUGF0aChleHApIHtcbiAgcmV0dXJuIHBhdGhUZXN0UkUudGVzdChleHApICYmXG4gIC8vIGRvbid0IHRyZWF0IGxpdGVyYWwgdmFsdWVzIGFzIHBhdGhzXG4gICFsaXRlcmFsVmFsdWVSRSQxLnRlc3QoZXhwKSAmJlxuICAvLyBNYXRoIGNvbnN0YW50cyBlLmcuIE1hdGguUEksIE1hdGguRSBldGMuXG4gIGV4cC5zbGljZSgwLCA1KSAhPT0gJ01hdGguJztcbn1cblxudmFyIGV4cHJlc3Npb24gPSBPYmplY3QuZnJlZXplKHtcbiAgcGFyc2VFeHByZXNzaW9uOiBwYXJzZUV4cHJlc3Npb24sXG4gIGlzU2ltcGxlUGF0aDogaXNTaW1wbGVQYXRoXG59KTtcblxuLy8gd2UgaGF2ZSB0d28gc2VwYXJhdGUgcXVldWVzOiBvbmUgZm9yIGRpcmVjdGl2ZSB1cGRhdGVzXG4vLyBhbmQgb25lIGZvciB1c2VyIHdhdGNoZXIgcmVnaXN0ZXJlZCB2aWEgJHdhdGNoKCkuXG4vLyB3ZSB3YW50IHRvIGd1YXJhbnRlZSBkaXJlY3RpdmUgdXBkYXRlcyB0byBiZSBjYWxsZWRcbi8vIGJlZm9yZSB1c2VyIHdhdGNoZXJzIHNvIHRoYXQgd2hlbiB1c2VyIHdhdGNoZXJzIGFyZVxuLy8gdHJpZ2dlcmVkLCB0aGUgRE9NIHdvdWxkIGhhdmUgYWxyZWFkeSBiZWVuIGluIHVwZGF0ZWRcbi8vIHN0YXRlLlxuXG52YXIgcXVldWUgPSBbXTtcbnZhciB1c2VyUXVldWUgPSBbXTtcbnZhciBoYXMgPSB7fTtcbnZhciBjaXJjdWxhciA9IHt9O1xudmFyIHdhaXRpbmcgPSBmYWxzZTtcblxuLyoqXG4gKiBSZXNldCB0aGUgYmF0Y2hlcidzIHN0YXRlLlxuICovXG5cbmZ1bmN0aW9uIHJlc2V0QmF0Y2hlclN0YXRlKCkge1xuICBxdWV1ZS5sZW5ndGggPSAwO1xuICB1c2VyUXVldWUubGVuZ3RoID0gMDtcbiAgaGFzID0ge307XG4gIGNpcmN1bGFyID0ge307XG4gIHdhaXRpbmcgPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBGbHVzaCBib3RoIHF1ZXVlcyBhbmQgcnVuIHRoZSB3YXRjaGVycy5cbiAqL1xuXG5mdW5jdGlvbiBmbHVzaEJhdGNoZXJRdWV1ZSgpIHtcbiAgdmFyIF9hZ2FpbiA9IHRydWU7XG5cbiAgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7XG4gICAgX2FnYWluID0gZmFsc2U7XG5cbiAgICBydW5CYXRjaGVyUXVldWUocXVldWUpO1xuICAgIHJ1bkJhdGNoZXJRdWV1ZSh1c2VyUXVldWUpO1xuICAgIC8vIHVzZXIgd2F0Y2hlcnMgdHJpZ2dlcmVkIG1vcmUgd2F0Y2hlcnMsXG4gICAgLy8ga2VlcCBmbHVzaGluZyB1bnRpbCBpdCBkZXBsZXRlc1xuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgIF9hZ2FpbiA9IHRydWU7XG4gICAgICBjb250aW51ZSBfZnVuY3Rpb247XG4gICAgfVxuICAgIC8vIGRldiB0b29sIGhvb2tcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoZGV2dG9vbHMgJiYgY29uZmlnLmRldnRvb2xzKSB7XG4gICAgICBkZXZ0b29scy5lbWl0KCdmbHVzaCcpO1xuICAgIH1cbiAgICByZXNldEJhdGNoZXJTdGF0ZSgpO1xuICB9XG59XG5cbi8qKlxuICogUnVuIHRoZSB3YXRjaGVycyBpbiBhIHNpbmdsZSBxdWV1ZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBxdWV1ZVxuICovXG5cbmZ1bmN0aW9uIHJ1bkJhdGNoZXJRdWV1ZShxdWV1ZSkge1xuICAvLyBkbyBub3QgY2FjaGUgbGVuZ3RoIGJlY2F1c2UgbW9yZSB3YXRjaGVycyBtaWdodCBiZSBwdXNoZWRcbiAgLy8gYXMgd2UgcnVuIGV4aXN0aW5nIHdhdGNoZXJzXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgd2F0Y2hlciA9IHF1ZXVlW2ldO1xuICAgIHZhciBpZCA9IHdhdGNoZXIuaWQ7XG4gICAgaGFzW2lkXSA9IG51bGw7XG4gICAgd2F0Y2hlci5ydW4oKTtcbiAgICAvLyBpbiBkZXYgYnVpbGQsIGNoZWNrIGFuZCBzdG9wIGNpcmN1bGFyIHVwZGF0ZXMuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgaGFzW2lkXSAhPSBudWxsKSB7XG4gICAgICBjaXJjdWxhcltpZF0gPSAoY2lyY3VsYXJbaWRdIHx8IDApICsgMTtcbiAgICAgIGlmIChjaXJjdWxhcltpZF0gPiBjb25maWcuX21heFVwZGF0ZUNvdW50KSB7XG4gICAgICAgIHdhcm4oJ1lvdSBtYXkgaGF2ZSBhbiBpbmZpbml0ZSB1cGRhdGUgbG9vcCBmb3Igd2F0Y2hlciAnICsgJ3dpdGggZXhwcmVzc2lvbiBcIicgKyB3YXRjaGVyLmV4cHJlc3Npb24gKyAnXCInLCB3YXRjaGVyLnZtKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHF1ZXVlLmxlbmd0aCA9IDA7XG59XG5cbi8qKlxuICogUHVzaCBhIHdhdGNoZXIgaW50byB0aGUgd2F0Y2hlciBxdWV1ZS5cbiAqIEpvYnMgd2l0aCBkdXBsaWNhdGUgSURzIHdpbGwgYmUgc2tpcHBlZCB1bmxlc3MgaXQnc1xuICogcHVzaGVkIHdoZW4gdGhlIHF1ZXVlIGlzIGJlaW5nIGZsdXNoZWQuXG4gKlxuICogQHBhcmFtIHtXYXRjaGVyfSB3YXRjaGVyXG4gKiAgIHByb3BlcnRpZXM6XG4gKiAgIC0ge051bWJlcn0gaWRcbiAqICAgLSB7RnVuY3Rpb259IHJ1blxuICovXG5cbmZ1bmN0aW9uIHB1c2hXYXRjaGVyKHdhdGNoZXIpIHtcbiAgdmFyIGlkID0gd2F0Y2hlci5pZDtcbiAgaWYgKGhhc1tpZF0gPT0gbnVsbCkge1xuICAgIC8vIHB1c2ggd2F0Y2hlciBpbnRvIGFwcHJvcHJpYXRlIHF1ZXVlXG4gICAgdmFyIHEgPSB3YXRjaGVyLnVzZXIgPyB1c2VyUXVldWUgOiBxdWV1ZTtcbiAgICBoYXNbaWRdID0gcS5sZW5ndGg7XG4gICAgcS5wdXNoKHdhdGNoZXIpO1xuICAgIC8vIHF1ZXVlIHRoZSBmbHVzaFxuICAgIGlmICghd2FpdGluZykge1xuICAgICAgd2FpdGluZyA9IHRydWU7XG4gICAgICBuZXh0VGljayhmbHVzaEJhdGNoZXJRdWV1ZSk7XG4gICAgfVxuICB9XG59XG5cbnZhciB1aWQkMiA9IDA7XG5cbi8qKlxuICogQSB3YXRjaGVyIHBhcnNlcyBhbiBleHByZXNzaW9uLCBjb2xsZWN0cyBkZXBlbmRlbmNpZXMsXG4gKiBhbmQgZmlyZXMgY2FsbGJhY2sgd2hlbiB0aGUgZXhwcmVzc2lvbiB2YWx1ZSBjaGFuZ2VzLlxuICogVGhpcyBpcyB1c2VkIGZvciBib3RoIHRoZSAkd2F0Y2goKSBhcGkgYW5kIGRpcmVjdGl2ZXMuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gZXhwT3JGblxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiAgICAgICAgICAgICAgICAgLSB7QXJyYXl9IGZpbHRlcnNcbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSB0d29XYXlcbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBkZWVwXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gdXNlclxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHN5bmNcbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBsYXp5XG4gKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtwcmVQcm9jZXNzXVxuICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbcG9zdFByb2Nlc3NdXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIG9wdGlvbnMpIHtcbiAgLy8gbWl4IGluIG9wdGlvbnNcbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBleHRlbmQodGhpcywgb3B0aW9ucyk7XG4gIH1cbiAgdmFyIGlzRm4gPSB0eXBlb2YgZXhwT3JGbiA9PT0gJ2Z1bmN0aW9uJztcbiAgdGhpcy52bSA9IHZtO1xuICB2bS5fd2F0Y2hlcnMucHVzaCh0aGlzKTtcbiAgdGhpcy5leHByZXNzaW9uID0gZXhwT3JGbjtcbiAgdGhpcy5jYiA9IGNiO1xuICB0aGlzLmlkID0gKyt1aWQkMjsgLy8gdWlkIGZvciBiYXRjaGluZ1xuICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gIHRoaXMuZGlydHkgPSB0aGlzLmxhenk7IC8vIGZvciBsYXp5IHdhdGNoZXJzXG4gIHRoaXMuZGVwcyA9IFtdO1xuICB0aGlzLm5ld0RlcHMgPSBbXTtcbiAgdGhpcy5kZXBJZHMgPSBuZXcgX1NldCgpO1xuICB0aGlzLm5ld0RlcElkcyA9IG5ldyBfU2V0KCk7XG4gIHRoaXMucHJldkVycm9yID0gbnVsbDsgLy8gZm9yIGFzeW5jIGVycm9yIHN0YWNrc1xuICAvLyBwYXJzZSBleHByZXNzaW9uIGZvciBnZXR0ZXIvc2V0dGVyXG4gIGlmIChpc0ZuKSB7XG4gICAgdGhpcy5nZXR0ZXIgPSBleHBPckZuO1xuICAgIHRoaXMuc2V0dGVyID0gdW5kZWZpbmVkO1xuICB9IGVsc2Uge1xuICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwT3JGbiwgdGhpcy50d29XYXkpO1xuICAgIHRoaXMuZ2V0dGVyID0gcmVzLmdldDtcbiAgICB0aGlzLnNldHRlciA9IHJlcy5zZXQ7XG4gIH1cbiAgdGhpcy52YWx1ZSA9IHRoaXMubGF6eSA/IHVuZGVmaW5lZCA6IHRoaXMuZ2V0KCk7XG4gIC8vIHN0YXRlIGZvciBhdm9pZGluZyBmYWxzZSB0cmlnZ2VycyBmb3IgZGVlcCBhbmQgQXJyYXlcbiAgLy8gd2F0Y2hlcnMgZHVyaW5nIHZtLl9kaWdlc3QoKVxuICB0aGlzLnF1ZXVlZCA9IHRoaXMuc2hhbGxvdyA9IGZhbHNlO1xufVxuXG4vKipcbiAqIEV2YWx1YXRlIHRoZSBnZXR0ZXIsIGFuZCByZS1jb2xsZWN0IGRlcGVuZGVuY2llcy5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuYmVmb3JlR2V0KCk7XG4gIHZhciBzY29wZSA9IHRoaXMuc2NvcGUgfHwgdGhpcy52bTtcbiAgdmFyIHZhbHVlO1xuICB0cnkge1xuICAgIHZhbHVlID0gdGhpcy5nZXR0ZXIuY2FsbChzY29wZSwgc2NvcGUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLndhcm5FeHByZXNzaW9uRXJyb3JzKSB7XG4gICAgICB3YXJuKCdFcnJvciB3aGVuIGV2YWx1YXRpbmcgZXhwcmVzc2lvbiAnICsgJ1wiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIjogJyArIGUudG9TdHJpbmcoKSwgdGhpcy52bSk7XG4gICAgfVxuICB9XG4gIC8vIFwidG91Y2hcIiBldmVyeSBwcm9wZXJ0eSBzbyB0aGV5IGFyZSBhbGwgdHJhY2tlZCBhc1xuICAvLyBkZXBlbmRlbmNpZXMgZm9yIGRlZXAgd2F0Y2hpbmdcbiAgaWYgKHRoaXMuZGVlcCkge1xuICAgIHRyYXZlcnNlKHZhbHVlKTtcbiAgfVxuICBpZiAodGhpcy5wcmVQcm9jZXNzKSB7XG4gICAgdmFsdWUgPSB0aGlzLnByZVByb2Nlc3ModmFsdWUpO1xuICB9XG4gIGlmICh0aGlzLmZpbHRlcnMpIHtcbiAgICB2YWx1ZSA9IHNjb3BlLl9hcHBseUZpbHRlcnModmFsdWUsIG51bGwsIHRoaXMuZmlsdGVycywgZmFsc2UpO1xuICB9XG4gIGlmICh0aGlzLnBvc3RQcm9jZXNzKSB7XG4gICAgdmFsdWUgPSB0aGlzLnBvc3RQcm9jZXNzKHZhbHVlKTtcbiAgfVxuICB0aGlzLmFmdGVyR2V0KCk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG5cbi8qKlxuICogU2V0IHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIHdpdGggdGhlIHNldHRlci5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIHZhciBzY29wZSA9IHRoaXMuc2NvcGUgfHwgdGhpcy52bTtcbiAgaWYgKHRoaXMuZmlsdGVycykge1xuICAgIHZhbHVlID0gc2NvcGUuX2FwcGx5RmlsdGVycyh2YWx1ZSwgdGhpcy52YWx1ZSwgdGhpcy5maWx0ZXJzLCB0cnVlKTtcbiAgfVxuICB0cnkge1xuICAgIHRoaXMuc2V0dGVyLmNhbGwoc2NvcGUsIHNjb3BlLCB2YWx1ZSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcud2FybkV4cHJlc3Npb25FcnJvcnMpIHtcbiAgICAgIHdhcm4oJ0Vycm9yIHdoZW4gZXZhbHVhdGluZyBzZXR0ZXIgJyArICdcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCI6ICcgKyBlLnRvU3RyaW5nKCksIHRoaXMudm0pO1xuICAgIH1cbiAgfVxuICAvLyB0d28td2F5IHN5bmMgZm9yIHYtZm9yIGFsaWFzXG4gIHZhciBmb3JDb250ZXh0ID0gc2NvcGUuJGZvckNvbnRleHQ7XG4gIGlmIChmb3JDb250ZXh0ICYmIGZvckNvbnRleHQuYWxpYXMgPT09IHRoaXMuZXhwcmVzc2lvbikge1xuICAgIGlmIChmb3JDb250ZXh0LmZpbHRlcnMpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSXQgc2VlbXMgeW91IGFyZSB1c2luZyB0d28td2F5IGJpbmRpbmcgb24gJyArICdhIHYtZm9yIGFsaWFzICgnICsgdGhpcy5leHByZXNzaW9uICsgJyksIGFuZCB0aGUgJyArICd2LWZvciBoYXMgZmlsdGVycy4gVGhpcyB3aWxsIG5vdCB3b3JrIHByb3Blcmx5LiAnICsgJ0VpdGhlciByZW1vdmUgdGhlIGZpbHRlcnMgb3IgdXNlIGFuIGFycmF5IG9mICcgKyAnb2JqZWN0cyBhbmQgYmluZCB0byBvYmplY3QgcHJvcGVydGllcyBpbnN0ZWFkLicsIHRoaXMudm0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3JDb250ZXh0Ll93aXRoTG9jayhmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoc2NvcGUuJGtleSkge1xuICAgICAgICAvLyBvcmlnaW5hbCBpcyBhbiBvYmplY3RcbiAgICAgICAgZm9yQ29udGV4dC5yYXdWYWx1ZVtzY29wZS4ka2V5XSA9IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yQ29udGV4dC5yYXdWYWx1ZS4kc2V0KHNjb3BlLiRpbmRleCwgdmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xuXG4vKipcbiAqIFByZXBhcmUgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5iZWZvcmVHZXQgPSBmdW5jdGlvbiAoKSB7XG4gIERlcC50YXJnZXQgPSB0aGlzO1xufTtcblxuLyoqXG4gKiBBZGQgYSBkZXBlbmRlbmN5IHRvIHRoaXMgZGlyZWN0aXZlLlxuICpcbiAqIEBwYXJhbSB7RGVwfSBkZXBcbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5hZGREZXAgPSBmdW5jdGlvbiAoZGVwKSB7XG4gIHZhciBpZCA9IGRlcC5pZDtcbiAgaWYgKCF0aGlzLm5ld0RlcElkcy5oYXMoaWQpKSB7XG4gICAgdGhpcy5uZXdEZXBJZHMuYWRkKGlkKTtcbiAgICB0aGlzLm5ld0RlcHMucHVzaChkZXApO1xuICAgIGlmICghdGhpcy5kZXBJZHMuaGFzKGlkKSkge1xuICAgICAgZGVwLmFkZFN1Yih0aGlzKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQ2xlYW4gdXAgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5hZnRlckdldCA9IGZ1bmN0aW9uICgpIHtcbiAgRGVwLnRhcmdldCA9IG51bGw7XG4gIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIHZhciBkZXAgPSB0aGlzLmRlcHNbaV07XG4gICAgaWYgKCF0aGlzLm5ld0RlcElkcy5oYXMoZGVwLmlkKSkge1xuICAgICAgZGVwLnJlbW92ZVN1Yih0aGlzKTtcbiAgICB9XG4gIH1cbiAgdmFyIHRtcCA9IHRoaXMuZGVwSWRzO1xuICB0aGlzLmRlcElkcyA9IHRoaXMubmV3RGVwSWRzO1xuICB0aGlzLm5ld0RlcElkcyA9IHRtcDtcbiAgdGhpcy5uZXdEZXBJZHMuY2xlYXIoKTtcbiAgdG1wID0gdGhpcy5kZXBzO1xuICB0aGlzLmRlcHMgPSB0aGlzLm5ld0RlcHM7XG4gIHRoaXMubmV3RGVwcyA9IHRtcDtcbiAgdGhpcy5uZXdEZXBzLmxlbmd0aCA9IDA7XG59O1xuXG4vKipcbiAqIFN1YnNjcmliZXIgaW50ZXJmYWNlLlxuICogV2lsbCBiZSBjYWxsZWQgd2hlbiBhIGRlcGVuZGVuY3kgY2hhbmdlcy5cbiAqXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHNoYWxsb3dcbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoc2hhbGxvdykge1xuICBpZiAodGhpcy5sYXp5KSB7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gIH0gZWxzZSBpZiAodGhpcy5zeW5jIHx8ICFjb25maWcuYXN5bmMpIHtcbiAgICB0aGlzLnJ1bigpO1xuICB9IGVsc2Uge1xuICAgIC8vIGlmIHF1ZXVlZCwgb25seSBvdmVyd3JpdGUgc2hhbGxvdyB3aXRoIG5vbi1zaGFsbG93LFxuICAgIC8vIGJ1dCBub3QgdGhlIG90aGVyIHdheSBhcm91bmQuXG4gICAgdGhpcy5zaGFsbG93ID0gdGhpcy5xdWV1ZWQgPyBzaGFsbG93ID8gdGhpcy5zaGFsbG93IDogZmFsc2UgOiAhIXNoYWxsb3c7XG4gICAgdGhpcy5xdWV1ZWQgPSB0cnVlO1xuICAgIC8vIHJlY29yZCBiZWZvcmUtcHVzaCBlcnJvciBzdGFjayBpbiBkZWJ1ZyBtb2RlXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLmRlYnVnKSB7XG4gICAgICB0aGlzLnByZXZFcnJvciA9IG5ldyBFcnJvcignW3Z1ZV0gYXN5bmMgc3RhY2sgdHJhY2UnKTtcbiAgICB9XG4gICAgcHVzaFdhdGNoZXIodGhpcyk7XG4gIH1cbn07XG5cbi8qKlxuICogQmF0Y2hlciBqb2IgaW50ZXJmYWNlLlxuICogV2lsbCBiZSBjYWxsZWQgYnkgdGhlIGJhdGNoZXIuXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLmdldCgpO1xuICAgIGlmICh2YWx1ZSAhPT0gdGhpcy52YWx1ZSB8fFxuICAgIC8vIERlZXAgd2F0Y2hlcnMgYW5kIHdhdGNoZXJzIG9uIE9iamVjdC9BcnJheXMgc2hvdWxkIGZpcmUgZXZlblxuICAgIC8vIHdoZW4gdGhlIHZhbHVlIGlzIHRoZSBzYW1lLCBiZWNhdXNlIHRoZSB2YWx1ZSBtYXlcbiAgICAvLyBoYXZlIG11dGF0ZWQ7IGJ1dCBvbmx5IGRvIHNvIGlmIHRoaXMgaXMgYVxuICAgIC8vIG5vbi1zaGFsbG93IHVwZGF0ZSAoY2F1c2VkIGJ5IGEgdm0gZGlnZXN0KS5cbiAgICAoaXNPYmplY3QodmFsdWUpIHx8IHRoaXMuZGVlcCkgJiYgIXRoaXMuc2hhbGxvdykge1xuICAgICAgLy8gc2V0IG5ldyB2YWx1ZVxuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgIC8vIGluIGRlYnVnICsgYXN5bmMgbW9kZSwgd2hlbiBhIHdhdGNoZXIgY2FsbGJhY2tzXG4gICAgICAvLyB0aHJvd3MsIHdlIGFsc28gdGhyb3cgdGhlIHNhdmVkIGJlZm9yZS1wdXNoIGVycm9yXG4gICAgICAvLyBzbyB0aGUgZnVsbCBjcm9zcy10aWNrIHN0YWNrIHRyYWNlIGlzIGF2YWlsYWJsZS5cbiAgICAgIHZhciBwcmV2RXJyb3IgPSB0aGlzLnByZXZFcnJvcjtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLmRlYnVnICYmIHByZXZFcnJvcikge1xuICAgICAgICB0aGlzLnByZXZFcnJvciA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aHJvdyBwcmV2RXJyb3I7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucXVldWVkID0gdGhpcy5zaGFsbG93ID0gZmFsc2U7XG4gIH1cbn07XG5cbi8qKlxuICogRXZhbHVhdGUgdGhlIHZhbHVlIG9mIHRoZSB3YXRjaGVyLlxuICogVGhpcyBvbmx5IGdldHMgY2FsbGVkIGZvciBsYXp5IHdhdGNoZXJzLlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gKCkge1xuICAvLyBhdm9pZCBvdmVyd3JpdGluZyBhbm90aGVyIHdhdGNoZXIgdGhhdCBpcyBiZWluZ1xuICAvLyBjb2xsZWN0ZWQuXG4gIHZhciBjdXJyZW50ID0gRGVwLnRhcmdldDtcbiAgdGhpcy52YWx1ZSA9IHRoaXMuZ2V0KCk7XG4gIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgRGVwLnRhcmdldCA9IGN1cnJlbnQ7XG59O1xuXG4vKipcbiAqIERlcGVuZCBvbiBhbGwgZGVwcyBjb2xsZWN0ZWQgYnkgdGhpcyB3YXRjaGVyLlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgdGhpcy5kZXBzW2ldLmRlcGVuZCgpO1xuICB9XG59O1xuXG4vKipcbiAqIFJlbW92ZSBzZWxmIGZyb20gYWxsIGRlcGVuZGVuY2llcycgc3ViY3JpYmVyIGxpc3QuXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUudGVhcmRvd24gPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gdm0ncyB3YXRjaGVyIGxpc3RcbiAgICAvLyB0aGlzIGlzIGEgc29tZXdoYXQgZXhwZW5zaXZlIG9wZXJhdGlvbiBzbyB3ZSBza2lwIGl0XG4gICAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIGRlc3Ryb3llZCBvciBpcyBwZXJmb3JtaW5nIGEgdi1mb3JcbiAgICAvLyByZS1yZW5kZXIgKHRoZSB3YXRjaGVyIGxpc3QgaXMgdGhlbiBmaWx0ZXJlZCBieSB2LWZvcikuXG4gICAgaWYgKCF0aGlzLnZtLl9pc0JlaW5nRGVzdHJveWVkICYmICF0aGlzLnZtLl92Rm9yUmVtb3ZpbmcpIHtcbiAgICAgIHRoaXMudm0uX3dhdGNoZXJzLiRyZW1vdmUodGhpcyk7XG4gICAgfVxuICAgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB0aGlzLmRlcHNbaV0ucmVtb3ZlU3ViKHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMudm0gPSB0aGlzLmNiID0gdGhpcy52YWx1ZSA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogUmVjcnVzaXZlbHkgdHJhdmVyc2UgYW4gb2JqZWN0IHRvIGV2b2tlIGFsbCBjb252ZXJ0ZWRcbiAqIGdldHRlcnMsIHNvIHRoYXQgZXZlcnkgbmVzdGVkIHByb3BlcnR5IGluc2lkZSB0aGUgb2JqZWN0XG4gKiBpcyBjb2xsZWN0ZWQgYXMgYSBcImRlZXBcIiBkZXBlbmRlbmN5LlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxudmFyIHNlZW5PYmplY3RzID0gbmV3IF9TZXQoKTtcbmZ1bmN0aW9uIHRyYXZlcnNlKHZhbCwgc2Vlbikge1xuICB2YXIgaSA9IHVuZGVmaW5lZCxcbiAgICAgIGtleXMgPSB1bmRlZmluZWQ7XG4gIGlmICghc2Vlbikge1xuICAgIHNlZW4gPSBzZWVuT2JqZWN0cztcbiAgICBzZWVuLmNsZWFyKCk7XG4gIH1cbiAgdmFyIGlzQSA9IGlzQXJyYXkodmFsKTtcbiAgdmFyIGlzTyA9IGlzT2JqZWN0KHZhbCk7XG4gIGlmICgoaXNBIHx8IGlzTykgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWwpKSB7XG4gICAgaWYgKHZhbC5fX29iX18pIHtcbiAgICAgIHZhciBkZXBJZCA9IHZhbC5fX29iX18uZGVwLmlkO1xuICAgICAgaWYgKHNlZW4uaGFzKGRlcElkKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWVuLmFkZChkZXBJZCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpc0EpIHtcbiAgICAgIGkgPSB2YWwubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkgdHJhdmVyc2UodmFsW2ldLCBzZWVuKTtcbiAgICB9IGVsc2UgaWYgKGlzTykge1xuICAgICAga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7XG4gICAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB0cmF2ZXJzZSh2YWxba2V5c1tpXV0sIHNlZW4pO1xuICAgIH1cbiAgfVxufVxuXG52YXIgdGV4dCQxID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdGhpcy5hdHRyID0gdGhpcy5lbC5ub2RlVHlwZSA9PT0gMyA/ICdkYXRhJyA6ICd0ZXh0Q29udGVudCc7XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB0aGlzLmVsW3RoaXMuYXR0cl0gPSBfdG9TdHJpbmcodmFsdWUpO1xuICB9XG59O1xuXG52YXIgdGVtcGxhdGVDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcbnZhciBpZFNlbGVjdG9yQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cbnZhciBtYXAgPSB7XG4gIGVmYXVsdDogWzAsICcnLCAnJ10sXG4gIGxlZ2VuZDogWzEsICc8ZmllbGRzZXQ+JywgJzwvZmllbGRzZXQ+J10sXG4gIHRyOiBbMiwgJzx0YWJsZT48dGJvZHk+JywgJzwvdGJvZHk+PC90YWJsZT4nXSxcbiAgY29sOiBbMiwgJzx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+JywgJzwvY29sZ3JvdXA+PC90YWJsZT4nXVxufTtcblxubWFwLnRkID0gbWFwLnRoID0gWzMsICc8dGFibGU+PHRib2R5Pjx0cj4nLCAnPC90cj48L3Rib2R5PjwvdGFibGU+J107XG5cbm1hcC5vcHRpb24gPSBtYXAub3B0Z3JvdXAgPSBbMSwgJzxzZWxlY3QgbXVsdGlwbGU9XCJtdWx0aXBsZVwiPicsICc8L3NlbGVjdD4nXTtcblxubWFwLnRoZWFkID0gbWFwLnRib2R5ID0gbWFwLmNvbGdyb3VwID0gbWFwLmNhcHRpb24gPSBtYXAudGZvb3QgPSBbMSwgJzx0YWJsZT4nLCAnPC90YWJsZT4nXTtcblxubWFwLmcgPSBtYXAuZGVmcyA9IG1hcC5zeW1ib2wgPSBtYXAudXNlID0gbWFwLmltYWdlID0gbWFwLnRleHQgPSBtYXAuY2lyY2xlID0gbWFwLmVsbGlwc2UgPSBtYXAubGluZSA9IG1hcC5wYXRoID0gbWFwLnBvbHlnb24gPSBtYXAucG9seWxpbmUgPSBtYXAucmVjdCA9IFsxLCAnPHN2ZyAnICsgJ3htbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiAnICsgJ3htbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiICcgKyAneG1sbnM6ZXY9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAxL3htbC1ldmVudHNcIicgKyAndmVyc2lvbj1cIjEuMVwiPicsICc8L3N2Zz4nXTtcblxuLyoqXG4gKiBDaGVjayBpZiBhIG5vZGUgaXMgYSBzdXBwb3J0ZWQgdGVtcGxhdGUgbm9kZSB3aXRoIGFcbiAqIERvY3VtZW50RnJhZ21lbnQgY29udGVudC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNSZWFsVGVtcGxhdGUobm9kZSkge1xuICByZXR1cm4gaXNUZW1wbGF0ZShub2RlKSAmJiBpc0ZyYWdtZW50KG5vZGUuY29udGVudCk7XG59XG5cbnZhciB0YWdSRSQxID0gLzwoW1xcdzotXSspLztcbnZhciBlbnRpdHlSRSA9IC8mIz9cXHcrPzsvO1xudmFyIGNvbW1lbnRSRSA9IC88IS0tLztcblxuLyoqXG4gKiBDb252ZXJ0IGEgc3RyaW5nIHRlbXBsYXRlIHRvIGEgRG9jdW1lbnRGcmFnbWVudC5cbiAqIERldGVybWluZXMgY29ycmVjdCB3cmFwcGluZyBieSB0YWcgdHlwZXMuIFdyYXBwaW5nXG4gKiBzdHJhdGVneSBmb3VuZCBpbiBqUXVlcnkgJiBjb21wb25lbnQvZG9taWZ5LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0ZW1wbGF0ZVN0cmluZ1xuICogQHBhcmFtIHtCb29sZWFufSByYXdcbiAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gc3RyaW5nVG9GcmFnbWVudCh0ZW1wbGF0ZVN0cmluZywgcmF3KSB7XG4gIC8vIHRyeSBhIGNhY2hlIGhpdCBmaXJzdFxuICB2YXIgY2FjaGVLZXkgPSByYXcgPyB0ZW1wbGF0ZVN0cmluZyA6IHRlbXBsYXRlU3RyaW5nLnRyaW0oKTtcbiAgdmFyIGhpdCA9IHRlbXBsYXRlQ2FjaGUuZ2V0KGNhY2hlS2V5KTtcbiAgaWYgKGhpdCkge1xuICAgIHJldHVybiBoaXQ7XG4gIH1cblxuICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgdmFyIHRhZ01hdGNoID0gdGVtcGxhdGVTdHJpbmcubWF0Y2godGFnUkUkMSk7XG4gIHZhciBlbnRpdHlNYXRjaCA9IGVudGl0eVJFLnRlc3QodGVtcGxhdGVTdHJpbmcpO1xuICB2YXIgY29tbWVudE1hdGNoID0gY29tbWVudFJFLnRlc3QodGVtcGxhdGVTdHJpbmcpO1xuXG4gIGlmICghdGFnTWF0Y2ggJiYgIWVudGl0eU1hdGNoICYmICFjb21tZW50TWF0Y2gpIHtcbiAgICAvLyB0ZXh0IG9ubHksIHJldHVybiBhIHNpbmdsZSB0ZXh0IG5vZGUuXG4gICAgZnJhZy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZW1wbGF0ZVN0cmluZykpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YWcgPSB0YWdNYXRjaCAmJiB0YWdNYXRjaFsxXTtcbiAgICB2YXIgd3JhcCA9IG1hcFt0YWddIHx8IG1hcC5lZmF1bHQ7XG4gICAgdmFyIGRlcHRoID0gd3JhcFswXTtcbiAgICB2YXIgcHJlZml4ID0gd3JhcFsxXTtcbiAgICB2YXIgc3VmZml4ID0gd3JhcFsyXTtcbiAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgbm9kZS5pbm5lckhUTUwgPSBwcmVmaXggKyB0ZW1wbGF0ZVN0cmluZyArIHN1ZmZpeDtcbiAgICB3aGlsZSAoZGVwdGgtLSkge1xuICAgICAgbm9kZSA9IG5vZGUubGFzdENoaWxkO1xuICAgIH1cblxuICAgIHZhciBjaGlsZDtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIHdoaWxlIChjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZCkge1xuICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgICAgZnJhZy5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgfVxuICB9XG4gIGlmICghcmF3KSB7XG4gICAgdHJpbU5vZGUoZnJhZyk7XG4gIH1cbiAgdGVtcGxhdGVDYWNoZS5wdXQoY2FjaGVLZXksIGZyYWcpO1xuICByZXR1cm4gZnJhZztcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgdGVtcGxhdGUgbm9kZSB0byBhIERvY3VtZW50RnJhZ21lbnQuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIG5vZGVUb0ZyYWdtZW50KG5vZGUpIHtcbiAgLy8gaWYgaXRzIGEgdGVtcGxhdGUgdGFnIGFuZCB0aGUgYnJvd3NlciBzdXBwb3J0cyBpdCxcbiAgLy8gaXRzIGNvbnRlbnQgaXMgYWxyZWFkeSBhIGRvY3VtZW50IGZyYWdtZW50LiBIb3dldmVyLCBpT1MgU2FmYXJpIGhhc1xuICAvLyBidWcgd2hlbiB1c2luZyBkaXJlY3RseSBjbG9uZWQgdGVtcGxhdGUgY29udGVudCB3aXRoIHRvdWNoXG4gIC8vIGV2ZW50cyBhbmQgY2FuIGNhdXNlIGNyYXNoZXMgd2hlbiB0aGUgbm9kZXMgYXJlIHJlbW92ZWQgZnJvbSBET00sIHNvIHdlXG4gIC8vIGhhdmUgdG8gdHJlYXQgdGVtcGxhdGUgZWxlbWVudHMgYXMgc3RyaW5nIHRlbXBsYXRlcy4gKCMyODA1KVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGlzUmVhbFRlbXBsYXRlKG5vZGUpKSB7XG4gICAgcmV0dXJuIHN0cmluZ1RvRnJhZ21lbnQobm9kZS5pbm5lckhUTUwpO1xuICB9XG4gIC8vIHNjcmlwdCB0ZW1wbGF0ZVxuICBpZiAobm9kZS50YWdOYW1lID09PSAnU0NSSVBUJykge1xuICAgIHJldHVybiBzdHJpbmdUb0ZyYWdtZW50KG5vZGUudGV4dENvbnRlbnQpO1xuICB9XG4gIC8vIG5vcm1hbCBub2RlLCBjbG9uZSBpdCB0byBhdm9pZCBtdXRhdGluZyB0aGUgb3JpZ2luYWxcbiAgdmFyIGNsb25lZE5vZGUgPSBjbG9uZU5vZGUobm9kZSk7XG4gIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICB2YXIgY2hpbGQ7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gIHdoaWxlIChjaGlsZCA9IGNsb25lZE5vZGUuZmlyc3RDaGlsZCkge1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICBmcmFnLmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgfVxuICB0cmltTm9kZShmcmFnKTtcbiAgcmV0dXJuIGZyYWc7XG59XG5cbi8vIFRlc3QgZm9yIHRoZSBwcmVzZW5jZSBvZiB0aGUgU2FmYXJpIHRlbXBsYXRlIGNsb25pbmcgYnVnXG4vLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93dWcuY2dpP2lkPTEzNzc1NVxudmFyIGhhc0Jyb2tlblRlbXBsYXRlID0gKGZ1bmN0aW9uICgpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKGluQnJvd3Nlcikge1xuICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYS5pbm5lckhUTUwgPSAnPHRlbXBsYXRlPjE8L3RlbXBsYXRlPic7XG4gICAgcmV0dXJuICFhLmNsb25lTm9kZSh0cnVlKS5maXJzdENoaWxkLmlubmVySFRNTDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn0pKCk7XG5cbi8vIFRlc3QgZm9yIElFMTAvMTEgdGV4dGFyZWEgcGxhY2Vob2xkZXIgY2xvbmUgYnVnXG52YXIgaGFzVGV4dGFyZWFDbG9uZUJ1ZyA9IChmdW5jdGlvbiAoKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChpbkJyb3dzZXIpIHtcbiAgICB2YXIgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG4gICAgdC5wbGFjZWhvbGRlciA9ICd0JztcbiAgICByZXR1cm4gdC5jbG9uZU5vZGUodHJ1ZSkudmFsdWUgPT09ICd0JztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn0pKCk7XG5cbi8qKlxuICogMS4gRGVhbCB3aXRoIFNhZmFyaSBjbG9uaW5nIG5lc3RlZCA8dGVtcGxhdGU+IGJ1ZyBieVxuICogICAgbWFudWFsbHkgY2xvbmluZyBhbGwgdGVtcGxhdGUgaW5zdGFuY2VzLlxuICogMi4gRGVhbCB3aXRoIElFMTAvMTEgdGV4dGFyZWEgcGxhY2Vob2xkZXIgYnVnIGJ5IHNldHRpbmdcbiAqICAgIHRoZSBjb3JyZWN0IHZhbHVlIGFmdGVyIGNsb25pbmcuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IG5vZGVcbiAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBjbG9uZU5vZGUobm9kZSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCFub2RlLnF1ZXJ5U2VsZWN0b3JBbGwpIHtcbiAgICByZXR1cm4gbm9kZS5jbG9uZU5vZGUoKTtcbiAgfVxuICB2YXIgcmVzID0gbm9kZS5jbG9uZU5vZGUodHJ1ZSk7XG4gIHZhciBpLCBvcmlnaW5hbCwgY2xvbmVkO1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGhhc0Jyb2tlblRlbXBsYXRlKSB7XG4gICAgdmFyIHRlbXBDbG9uZSA9IHJlcztcbiAgICBpZiAoaXNSZWFsVGVtcGxhdGUobm9kZSkpIHtcbiAgICAgIG5vZGUgPSBub2RlLmNvbnRlbnQ7XG4gICAgICB0ZW1wQ2xvbmUgPSByZXMuY29udGVudDtcbiAgICB9XG4gICAgb3JpZ2luYWwgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RlbXBsYXRlJyk7XG4gICAgaWYgKG9yaWdpbmFsLmxlbmd0aCkge1xuICAgICAgY2xvbmVkID0gdGVtcENsb25lLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RlbXBsYXRlJyk7XG4gICAgICBpID0gY2xvbmVkLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgY2xvbmVkW2ldLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGNsb25lTm9kZShvcmlnaW5hbFtpXSksIGNsb25lZFtpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaGFzVGV4dGFyZWFDbG9uZUJ1Zykge1xuICAgIGlmIChub2RlLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcbiAgICAgIHJlcy52YWx1ZSA9IG5vZGUudmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9yaWdpbmFsID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZXh0YXJlYScpO1xuICAgICAgaWYgKG9yaWdpbmFsLmxlbmd0aCkge1xuICAgICAgICBjbG9uZWQgPSByZXMucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKTtcbiAgICAgICAgaSA9IGNsb25lZC5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICBjbG9uZWRbaV0udmFsdWUgPSBvcmlnaW5hbFtpXS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIFByb2Nlc3MgdGhlIHRlbXBsYXRlIG9wdGlvbiBhbmQgbm9ybWFsaXplcyBpdCBpbnRvIGFcbiAqIGEgRG9jdW1lbnRGcmFnbWVudCB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgcGFydGlhbCBvciBhXG4gKiBpbnN0YW5jZSB0ZW1wbGF0ZS5cbiAqXG4gKiBAcGFyYW0geyp9IHRlbXBsYXRlXG4gKiAgICAgICAgUG9zc2libGUgdmFsdWVzIGluY2x1ZGU6XG4gKiAgICAgICAgLSBEb2N1bWVudEZyYWdtZW50IG9iamVjdFxuICogICAgICAgIC0gTm9kZSBvYmplY3Qgb2YgdHlwZSBUZW1wbGF0ZVxuICogICAgICAgIC0gaWQgc2VsZWN0b3I6ICcjc29tZS10ZW1wbGF0ZS1pZCdcbiAqICAgICAgICAtIHRlbXBsYXRlIHN0cmluZzogJzxkaXY+PHNwYW4+e3ttc2d9fTwvc3Bhbj48L2Rpdj4nXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHNob3VsZENsb25lXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHJhd1xuICogICAgICAgIGlubGluZSBIVE1MIGludGVycG9sYXRpb24uIERvIG5vdCBjaGVjayBmb3IgaWRcbiAqICAgICAgICBzZWxlY3RvciBhbmQga2VlcCB3aGl0ZXNwYWNlIGluIHRoZSBzdHJpbmcuXG4gKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZVRlbXBsYXRlKHRlbXBsYXRlLCBzaG91bGRDbG9uZSwgcmF3KSB7XG4gIHZhciBub2RlLCBmcmFnO1xuXG4gIC8vIGlmIHRoZSB0ZW1wbGF0ZSBpcyBhbHJlYWR5IGEgZG9jdW1lbnQgZnJhZ21lbnQsXG4gIC8vIGRvIG5vdGhpbmdcbiAgaWYgKGlzRnJhZ21lbnQodGVtcGxhdGUpKSB7XG4gICAgdHJpbU5vZGUodGVtcGxhdGUpO1xuICAgIHJldHVybiBzaG91bGRDbG9uZSA/IGNsb25lTm9kZSh0ZW1wbGF0ZSkgOiB0ZW1wbGF0ZTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgdGVtcGxhdGUgPT09ICdzdHJpbmcnKSB7XG4gICAgLy8gaWQgc2VsZWN0b3JcbiAgICBpZiAoIXJhdyAmJiB0ZW1wbGF0ZS5jaGFyQXQoMCkgPT09ICcjJykge1xuICAgICAgLy8gaWQgc2VsZWN0b3IgY2FuIGJlIGNhY2hlZCB0b29cbiAgICAgIGZyYWcgPSBpZFNlbGVjdG9yQ2FjaGUuZ2V0KHRlbXBsYXRlKTtcbiAgICAgIGlmICghZnJhZykge1xuICAgICAgICBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGVtcGxhdGUuc2xpY2UoMSkpO1xuICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgIGZyYWcgPSBub2RlVG9GcmFnbWVudChub2RlKTtcbiAgICAgICAgICAvLyBzYXZlIHNlbGVjdG9yIHRvIGNhY2hlXG4gICAgICAgICAgaWRTZWxlY3RvckNhY2hlLnB1dCh0ZW1wbGF0ZSwgZnJhZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9ybWFsIHN0cmluZyB0ZW1wbGF0ZVxuICAgICAgZnJhZyA9IHN0cmluZ1RvRnJhZ21lbnQodGVtcGxhdGUsIHJhdyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHRlbXBsYXRlLm5vZGVUeXBlKSB7XG4gICAgLy8gYSBkaXJlY3Qgbm9kZVxuICAgIGZyYWcgPSBub2RlVG9GcmFnbWVudCh0ZW1wbGF0ZSk7XG4gIH1cblxuICByZXR1cm4gZnJhZyAmJiBzaG91bGRDbG9uZSA/IGNsb25lTm9kZShmcmFnKSA6IGZyYWc7XG59XG5cbnZhciB0ZW1wbGF0ZSA9IE9iamVjdC5mcmVlemUoe1xuICBjbG9uZU5vZGU6IGNsb25lTm9kZSxcbiAgcGFyc2VUZW1wbGF0ZTogcGFyc2VUZW1wbGF0ZVxufSk7XG5cbnZhciBodG1sID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gYSBjb21tZW50IG5vZGUgbWVhbnMgdGhpcyBpcyBhIGJpbmRpbmcgZm9yXG4gICAgLy8ge3t7IGlubGluZSB1bmVzY2FwZWQgaHRtbCB9fX1cbiAgICBpZiAodGhpcy5lbC5ub2RlVHlwZSA9PT0gOCkge1xuICAgICAgLy8gaG9sZCBub2Rlc1xuICAgICAgdGhpcy5ub2RlcyA9IFtdO1xuICAgICAgLy8gcmVwbGFjZSB0aGUgcGxhY2Vob2xkZXIgd2l0aCBwcm9wZXIgYW5jaG9yXG4gICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1odG1sJyk7XG4gICAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB2YWx1ZSA9IF90b1N0cmluZyh2YWx1ZSk7XG4gICAgaWYgKHRoaXMubm9kZXMpIHtcbiAgICAgIHRoaXMuc3dhcCh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWwuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgfVxuICB9LFxuXG4gIHN3YXA6IGZ1bmN0aW9uIHN3YXAodmFsdWUpIHtcbiAgICAvLyByZW1vdmUgb2xkIG5vZGVzXG4gICAgdmFyIGkgPSB0aGlzLm5vZGVzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICByZW1vdmUodGhpcy5ub2Rlc1tpXSk7XG4gICAgfVxuICAgIC8vIGNvbnZlcnQgbmV3IHZhbHVlIHRvIGEgZnJhZ21lbnRcbiAgICAvLyBkbyBub3QgYXR0ZW1wdCB0byByZXRyaWV2ZSBmcm9tIGlkIHNlbGVjdG9yXG4gICAgdmFyIGZyYWcgPSBwYXJzZVRlbXBsYXRlKHZhbHVlLCB0cnVlLCB0cnVlKTtcbiAgICAvLyBzYXZlIGEgcmVmZXJlbmNlIHRvIHRoZXNlIG5vZGVzIHNvIHdlIGNhbiByZW1vdmUgbGF0ZXJcbiAgICB0aGlzLm5vZGVzID0gdG9BcnJheShmcmFnLmNoaWxkTm9kZXMpO1xuICAgIGJlZm9yZShmcmFnLCB0aGlzLmFuY2hvcik7XG4gIH1cbn07XG5cbi8qKlxuICogQWJzdHJhY3Rpb24gZm9yIGEgcGFydGlhbGx5LWNvbXBpbGVkIGZyYWdtZW50LlxuICogQ2FuIG9wdGlvbmFsbHkgY29tcGlsZSBjb250ZW50IHdpdGggYSBjaGlsZCBzY29wZS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaW5rZXJcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG4gKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG4gKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuICogQHBhcmFtIHtGcmFnbWVudH0gW3BhcmVudEZyYWddXG4gKi9cbmZ1bmN0aW9uIEZyYWdtZW50KGxpbmtlciwgdm0sIGZyYWcsIGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKSB7XG4gIHRoaXMuY2hpbGRyZW4gPSBbXTtcbiAgdGhpcy5jaGlsZEZyYWdzID0gW107XG4gIHRoaXMudm0gPSB2bTtcbiAgdGhpcy5zY29wZSA9IHNjb3BlO1xuICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG4gIHRoaXMucGFyZW50RnJhZyA9IHBhcmVudEZyYWc7XG4gIGlmIChwYXJlbnRGcmFnKSB7XG4gICAgcGFyZW50RnJhZy5jaGlsZEZyYWdzLnB1c2godGhpcyk7XG4gIH1cbiAgdGhpcy51bmxpbmsgPSBsaW5rZXIodm0sIGZyYWcsIGhvc3QsIHNjb3BlLCB0aGlzKTtcbiAgdmFyIHNpbmdsZSA9IHRoaXMuc2luZ2xlID0gZnJhZy5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSAmJlxuICAvLyBkbyBub3QgZ28gc2luZ2xlIG1vZGUgaWYgdGhlIG9ubHkgbm9kZSBpcyBhbiBhbmNob3JcbiAgIWZyYWcuY2hpbGROb2Rlc1swXS5fX3ZfYW5jaG9yO1xuICBpZiAoc2luZ2xlKSB7XG4gICAgdGhpcy5ub2RlID0gZnJhZy5jaGlsZE5vZGVzWzBdO1xuICAgIHRoaXMuYmVmb3JlID0gc2luZ2xlQmVmb3JlO1xuICAgIHRoaXMucmVtb3ZlID0gc2luZ2xlUmVtb3ZlO1xuICB9IGVsc2Uge1xuICAgIHRoaXMubm9kZSA9IGNyZWF0ZUFuY2hvcignZnJhZ21lbnQtc3RhcnQnKTtcbiAgICB0aGlzLmVuZCA9IGNyZWF0ZUFuY2hvcignZnJhZ21lbnQtZW5kJyk7XG4gICAgdGhpcy5mcmFnID0gZnJhZztcbiAgICBwcmVwZW5kKHRoaXMubm9kZSwgZnJhZyk7XG4gICAgZnJhZy5hcHBlbmRDaGlsZCh0aGlzLmVuZCk7XG4gICAgdGhpcy5iZWZvcmUgPSBtdWx0aUJlZm9yZTtcbiAgICB0aGlzLnJlbW92ZSA9IG11bHRpUmVtb3ZlO1xuICB9XG4gIHRoaXMubm9kZS5fX3ZfZnJhZyA9IHRoaXM7XG59XG5cbi8qKlxuICogQ2FsbCBhdHRhY2gvZGV0YWNoIGZvciBhbGwgY29tcG9uZW50cyBjb250YWluZWQgd2l0aGluXG4gKiB0aGlzIGZyYWdtZW50LiBBbHNvIGRvIHNvIHJlY3Vyc2l2ZWx5IGZvciBhbGwgY2hpbGRcbiAqIGZyYWdtZW50cy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rXG4gKi9cblxuRnJhZ21lbnQucHJvdG90eXBlLmNhbGxIb29rID0gZnVuY3Rpb24gKGhvb2spIHtcbiAgdmFyIGksIGw7XG4gIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdGhpcy5jaGlsZEZyYWdzW2ldLmNhbGxIb29rKGhvb2spO1xuICB9XG4gIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGhvb2sodGhpcy5jaGlsZHJlbltpXSk7XG4gIH1cbn07XG5cbi8qKlxuICogSW5zZXJ0IGZyYWdtZW50IGJlZm9yZSB0YXJnZXQsIHNpbmdsZSBub2RlIHZlcnNpb25cbiAqXG4gKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICogQHBhcmFtIHtCb29sZWFufSB3aXRoVHJhbnNpdGlvblxuICovXG5cbmZ1bmN0aW9uIHNpbmdsZUJlZm9yZSh0YXJnZXQsIHdpdGhUcmFuc2l0aW9uKSB7XG4gIHRoaXMuaW5zZXJ0ZWQgPSB0cnVlO1xuICB2YXIgbWV0aG9kID0gd2l0aFRyYW5zaXRpb24gIT09IGZhbHNlID8gYmVmb3JlV2l0aFRyYW5zaXRpb24gOiBiZWZvcmU7XG4gIG1ldGhvZCh0aGlzLm5vZGUsIHRhcmdldCwgdGhpcy52bSk7XG4gIGlmIChpbkRvYyh0aGlzLm5vZGUpKSB7XG4gICAgdGhpcy5jYWxsSG9vayhhdHRhY2gpO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIGZyYWdtZW50LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG4gKi9cblxuZnVuY3Rpb24gc2luZ2xlUmVtb3ZlKCkge1xuICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG4gIHZhciBzaG91bGRDYWxsUmVtb3ZlID0gaW5Eb2ModGhpcy5ub2RlKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB0aGlzLmJlZm9yZVJlbW92ZSgpO1xuICByZW1vdmVXaXRoVHJhbnNpdGlvbih0aGlzLm5vZGUsIHRoaXMudm0sIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc2hvdWxkQ2FsbFJlbW92ZSkge1xuICAgICAgc2VsZi5jYWxsSG9vayhkZXRhY2gpO1xuICAgIH1cbiAgICBzZWxmLmRlc3Ryb3koKTtcbiAgfSk7XG59XG5cbi8qKlxuICogSW5zZXJ0IGZyYWdtZW50IGJlZm9yZSB0YXJnZXQsIG11bHRpLW5vZGVzIHZlcnNpb25cbiAqXG4gKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICogQHBhcmFtIHtCb29sZWFufSB3aXRoVHJhbnNpdGlvblxuICovXG5cbmZ1bmN0aW9uIG11bHRpQmVmb3JlKHRhcmdldCwgd2l0aFRyYW5zaXRpb24pIHtcbiAgdGhpcy5pbnNlcnRlZCA9IHRydWU7XG4gIHZhciB2bSA9IHRoaXMudm07XG4gIHZhciBtZXRob2QgPSB3aXRoVHJhbnNpdGlvbiAhPT0gZmFsc2UgPyBiZWZvcmVXaXRoVHJhbnNpdGlvbiA6IGJlZm9yZTtcbiAgbWFwTm9kZVJhbmdlKHRoaXMubm9kZSwgdGhpcy5lbmQsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgbWV0aG9kKG5vZGUsIHRhcmdldCwgdm0pO1xuICB9KTtcbiAgaWYgKGluRG9jKHRoaXMubm9kZSkpIHtcbiAgICB0aGlzLmNhbGxIb29rKGF0dGFjaCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgZnJhZ21lbnQsIG11bHRpLW5vZGVzIHZlcnNpb25cbiAqL1xuXG5mdW5jdGlvbiBtdWx0aVJlbW92ZSgpIHtcbiAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBzaG91bGRDYWxsUmVtb3ZlID0gaW5Eb2ModGhpcy5ub2RlKTtcbiAgdGhpcy5iZWZvcmVSZW1vdmUoKTtcbiAgcmVtb3ZlTm9kZVJhbmdlKHRoaXMubm9kZSwgdGhpcy5lbmQsIHRoaXMudm0sIHRoaXMuZnJhZywgZnVuY3Rpb24gKCkge1xuICAgIGlmIChzaG91bGRDYWxsUmVtb3ZlKSB7XG4gICAgICBzZWxmLmNhbGxIb29rKGRldGFjaCk7XG4gICAgfVxuICAgIHNlbGYuZGVzdHJveSgpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBQcmVwYXJlIHRoZSBmcmFnbWVudCBmb3IgcmVtb3ZhbC5cbiAqL1xuXG5GcmFnbWVudC5wcm90b3R5cGUuYmVmb3JlUmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgaSwgbDtcbiAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAvLyBjYWxsIHRoZSBzYW1lIG1ldGhvZCByZWN1cnNpdmVseSBvbiBjaGlsZFxuICAgIC8vIGZyYWdtZW50cywgZGVwdGgtZmlyc3RcbiAgICB0aGlzLmNoaWxkRnJhZ3NbaV0uYmVmb3JlUmVtb3ZlKGZhbHNlKTtcbiAgfVxuICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAvLyBDYWxsIGRlc3Ryb3kgZm9yIGFsbCBjb250YWluZWQgaW5zdGFuY2VzLFxuICAgIC8vIHdpdGggcmVtb3ZlOmZhbHNlIGFuZCBkZWZlcjp0cnVlLlxuICAgIC8vIERlZmVyIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHdlIG5lZWQgdG9cbiAgICAvLyBrZWVwIHRoZSBjaGlsZHJlbiB0byBjYWxsIGRldGFjaCBob29rc1xuICAgIC8vIG9uIHRoZW0uXG4gICAgdGhpcy5jaGlsZHJlbltpXS4kZGVzdHJveShmYWxzZSwgdHJ1ZSk7XG4gIH1cbiAgdmFyIGRpcnMgPSB0aGlzLnVubGluay5kaXJzO1xuICBmb3IgKGkgPSAwLCBsID0gZGlycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAvLyBkaXNhYmxlIHRoZSB3YXRjaGVycyBvbiBhbGwgdGhlIGRpcmVjdGl2ZXNcbiAgICAvLyBzbyB0aGF0IHRoZSByZW5kZXJlZCBjb250ZW50IHN0YXlzIHRoZSBzYW1lXG4gICAgLy8gZHVyaW5nIHJlbW92YWwuXG4gICAgZGlyc1tpXS5fd2F0Y2hlciAmJiBkaXJzW2ldLl93YXRjaGVyLnRlYXJkb3duKCk7XG4gIH1cbn07XG5cbi8qKlxuICogRGVzdHJveSB0aGUgZnJhZ21lbnQuXG4gKi9cblxuRnJhZ21lbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLnBhcmVudEZyYWcpIHtcbiAgICB0aGlzLnBhcmVudEZyYWcuY2hpbGRGcmFncy4kcmVtb3ZlKHRoaXMpO1xuICB9XG4gIHRoaXMubm9kZS5fX3ZfZnJhZyA9IG51bGw7XG4gIHRoaXMudW5saW5rKCk7XG59O1xuXG4vKipcbiAqIENhbGwgYXR0YWNoIGhvb2sgZm9yIGEgVnVlIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuICovXG5cbmZ1bmN0aW9uIGF0dGFjaChjaGlsZCkge1xuICBpZiAoIWNoaWxkLl9pc0F0dGFjaGVkICYmIGluRG9jKGNoaWxkLiRlbCkpIHtcbiAgICBjaGlsZC5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBDYWxsIGRldGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcbiAqL1xuXG5mdW5jdGlvbiBkZXRhY2goY2hpbGQpIHtcbiAgaWYgKGNoaWxkLl9pc0F0dGFjaGVkICYmICFpbkRvYyhjaGlsZC4kZWwpKSB7XG4gICAgY2hpbGQuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuICB9XG59XG5cbnZhciBsaW5rZXJDYWNoZSA9IG5ldyBDYWNoZSg1MDAwKTtcblxuLyoqXG4gKiBBIGZhY3RvcnkgdGhhdCBjYW4gYmUgdXNlZCB0byBjcmVhdGUgaW5zdGFuY2VzIG9mIGFcbiAqIGZyYWdtZW50LiBDYWNoZXMgdGhlIGNvbXBpbGVkIGxpbmtlciBpZiBwb3NzaWJsZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RWxlbWVudHxTdHJpbmd9IGVsXG4gKi9cbmZ1bmN0aW9uIEZyYWdtZW50RmFjdG9yeSh2bSwgZWwpIHtcbiAgdGhpcy52bSA9IHZtO1xuICB2YXIgdGVtcGxhdGU7XG4gIHZhciBpc1N0cmluZyA9IHR5cGVvZiBlbCA9PT0gJ3N0cmluZyc7XG4gIGlmIChpc1N0cmluZyB8fCBpc1RlbXBsYXRlKGVsKSAmJiAhZWwuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcbiAgICB0ZW1wbGF0ZSA9IHBhcnNlVGVtcGxhdGUoZWwsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIHRlbXBsYXRlLmFwcGVuZENoaWxkKGVsKTtcbiAgfVxuICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gIC8vIGxpbmtlciBjYW4gYmUgY2FjaGVkLCBidXQgb25seSBmb3IgY29tcG9uZW50c1xuICB2YXIgbGlua2VyO1xuICB2YXIgY2lkID0gdm0uY29uc3RydWN0b3IuY2lkO1xuICBpZiAoY2lkID4gMCkge1xuICAgIHZhciBjYWNoZUlkID0gY2lkICsgKGlzU3RyaW5nID8gZWwgOiBnZXRPdXRlckhUTUwoZWwpKTtcbiAgICBsaW5rZXIgPSBsaW5rZXJDYWNoZS5nZXQoY2FjaGVJZCk7XG4gICAgaWYgKCFsaW5rZXIpIHtcbiAgICAgIGxpbmtlciA9IGNvbXBpbGUodGVtcGxhdGUsIHZtLiRvcHRpb25zLCB0cnVlKTtcbiAgICAgIGxpbmtlckNhY2hlLnB1dChjYWNoZUlkLCBsaW5rZXIpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsaW5rZXIgPSBjb21waWxlKHRlbXBsYXRlLCB2bS4kb3B0aW9ucywgdHJ1ZSk7XG4gIH1cbiAgdGhpcy5saW5rZXIgPSBsaW5rZXI7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgZnJhZ21lbnQgaW5zdGFuY2Ugd2l0aCBnaXZlbiBob3N0IGFuZCBzY29wZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gaG9zdFxuICogQHBhcmFtIHtPYmplY3R9IHNjb3BlXG4gKiBAcGFyYW0ge0ZyYWdtZW50fSBwYXJlbnRGcmFnXG4gKi9cblxuRnJhZ21lbnRGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpIHtcbiAgdmFyIGZyYWcgPSBjbG9uZU5vZGUodGhpcy50ZW1wbGF0ZSk7XG4gIHJldHVybiBuZXcgRnJhZ21lbnQodGhpcy5saW5rZXIsIHRoaXMudm0sIGZyYWcsIGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKTtcbn07XG5cbnZhciBPTiA9IDcwMDtcbnZhciBNT0RFTCA9IDgwMDtcbnZhciBCSU5EID0gODUwO1xudmFyIFRSQU5TSVRJT04gPSAxMTAwO1xudmFyIEVMID0gMTUwMDtcbnZhciBDT01QT05FTlQgPSAxNTAwO1xudmFyIFBBUlRJQUwgPSAxNzUwO1xudmFyIElGID0gMjEwMDtcbnZhciBGT1IgPSAyMjAwO1xudmFyIFNMT1QgPSAyMzAwO1xuXG52YXIgdWlkJDMgPSAwO1xuXG52YXIgdkZvciA9IHtcblxuICBwcmlvcml0eTogRk9SLFxuICB0ZXJtaW5hbDogdHJ1ZSxcblxuICBwYXJhbXM6IFsndHJhY2stYnknLCAnc3RhZ2dlcicsICdlbnRlci1zdGFnZ2VyJywgJ2xlYXZlLXN0YWdnZXInXSxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIHN1cHBvcnQgXCJpdGVtIGluL29mIGl0ZW1zXCIgc3ludGF4XG4gICAgdmFyIGluTWF0Y2ggPSB0aGlzLmV4cHJlc3Npb24ubWF0Y2goLyguKikgKD86aW58b2YpICguKikvKTtcbiAgICBpZiAoaW5NYXRjaCkge1xuICAgICAgdmFyIGl0TWF0Y2ggPSBpbk1hdGNoWzFdLm1hdGNoKC9cXCgoLiopLCguKilcXCkvKTtcbiAgICAgIGlmIChpdE1hdGNoKSB7XG4gICAgICAgIHRoaXMuaXRlcmF0b3IgPSBpdE1hdGNoWzFdLnRyaW0oKTtcbiAgICAgICAgdGhpcy5hbGlhcyA9IGl0TWF0Y2hbMl0udHJpbSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hbGlhcyA9IGluTWF0Y2hbMV0udHJpbSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5leHByZXNzaW9uID0gaW5NYXRjaFsyXTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuYWxpYXMpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCB2LWZvciBleHByZXNzaW9uIFwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyAnYWxpYXMgaXMgcmVxdWlyZWQuJywgdGhpcy52bSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gdWlkIGFzIGEgY2FjaGUgaWRlbnRpZmllclxuICAgIHRoaXMuaWQgPSAnX192LWZvcl9fJyArICsrdWlkJDM7XG5cbiAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGFuIG9wdGlvbiBsaXN0LFxuICAgIC8vIHNvIHRoYXQgd2Uga25vdyBpZiB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgPHNlbGVjdD4nc1xuICAgIC8vIHYtbW9kZWwgd2hlbiB0aGUgb3B0aW9uIGxpc3QgaGFzIGNoYW5nZWQuXG4gICAgLy8gYmVjYXVzZSB2LW1vZGVsIGhhcyBhIGxvd2VyIHByaW9yaXR5IHRoYW4gdi1mb3IsXG4gICAgLy8gdGhlIHYtbW9kZWwgaXMgbm90IGJvdW5kIGhlcmUgeWV0LCBzbyB3ZSBoYXZlIHRvXG4gICAgLy8gcmV0cml2ZSBpdCBpbiB0aGUgYWN0dWFsIHVwZGF0ZU1vZGVsKCkgZnVuY3Rpb24uXG4gICAgdmFyIHRhZyA9IHRoaXMuZWwudGFnTmFtZTtcbiAgICB0aGlzLmlzT3B0aW9uID0gKHRhZyA9PT0gJ09QVElPTicgfHwgdGFnID09PSAnT1BUR1JPVVAnKSAmJiB0aGlzLmVsLnBhcmVudE5vZGUudGFnTmFtZSA9PT0gJ1NFTEVDVCc7XG5cbiAgICAvLyBzZXR1cCBhbmNob3Igbm9kZXNcbiAgICB0aGlzLnN0YXJ0ID0gY3JlYXRlQW5jaG9yKCd2LWZvci1zdGFydCcpO1xuICAgIHRoaXMuZW5kID0gY3JlYXRlQW5jaG9yKCd2LWZvci1lbmQnKTtcbiAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuZW5kKTtcbiAgICBiZWZvcmUodGhpcy5zdGFydCwgdGhpcy5lbmQpO1xuXG4gICAgLy8gY2FjaGVcbiAgICB0aGlzLmNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIC8vIGZyYWdtZW50IGZhY3RvcnlcbiAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHRoaXMuZWwpO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGRhdGEpIHtcbiAgICB0aGlzLmRpZmYoZGF0YSk7XG4gICAgdGhpcy51cGRhdGVSZWYoKTtcbiAgICB0aGlzLnVwZGF0ZU1vZGVsKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERpZmYsIGJhc2VkIG9uIG5ldyBkYXRhIGFuZCBvbGQgZGF0YSwgZGV0ZXJtaW5lIHRoZVxuICAgKiBtaW5pbXVtIGFtb3VudCBvZiBET00gbWFuaXB1bGF0aW9ucyBuZWVkZWQgdG8gbWFrZSB0aGVcbiAgICogRE9NIHJlZmxlY3QgdGhlIG5ldyBkYXRhIEFycmF5LlxuICAgKlxuICAgKiBUaGUgYWxnb3JpdGhtIGRpZmZzIHRoZSBuZXcgZGF0YSBBcnJheSBieSBzdG9yaW5nIGFcbiAgICogaGlkZGVuIHJlZmVyZW5jZSB0byBhbiBvd25lciB2bSBpbnN0YW5jZSBvbiBwcmV2aW91c2x5XG4gICAqIHNlZW4gZGF0YS4gVGhpcyBhbGxvd3MgdXMgdG8gYWNoaWV2ZSBPKG4pIHdoaWNoIGlzXG4gICAqIGJldHRlciB0aGFuIGEgbGV2ZW5zaHRlaW4gZGlzdGFuY2UgYmFzZWQgYWxnb3JpdGhtLFxuICAgKiB3aGljaCBpcyBPKG0gKiBuKS5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gZGF0YVxuICAgKi9cblxuICBkaWZmOiBmdW5jdGlvbiBkaWZmKGRhdGEpIHtcbiAgICAvLyBjaGVjayBpZiB0aGUgQXJyYXkgd2FzIGNvbnZlcnRlZCBmcm9tIGFuIE9iamVjdFxuICAgIHZhciBpdGVtID0gZGF0YVswXTtcbiAgICB2YXIgY29udmVydGVkRnJvbU9iamVjdCA9IHRoaXMuZnJvbU9iamVjdCA9IGlzT2JqZWN0KGl0ZW0pICYmIGhhc093bihpdGVtLCAnJGtleScpICYmIGhhc093bihpdGVtLCAnJHZhbHVlJyk7XG5cbiAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG4gICAgdmFyIG9sZEZyYWdzID0gdGhpcy5mcmFncztcbiAgICB2YXIgZnJhZ3MgPSB0aGlzLmZyYWdzID0gbmV3IEFycmF5KGRhdGEubGVuZ3RoKTtcbiAgICB2YXIgYWxpYXMgPSB0aGlzLmFsaWFzO1xuICAgIHZhciBpdGVyYXRvciA9IHRoaXMuaXRlcmF0b3I7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5zdGFydDtcbiAgICB2YXIgZW5kID0gdGhpcy5lbmQ7XG4gICAgdmFyIGluRG9jdW1lbnQgPSBpbkRvYyhzdGFydCk7XG4gICAgdmFyIGluaXQgPSAhb2xkRnJhZ3M7XG4gICAgdmFyIGksIGwsIGZyYWcsIGtleSwgdmFsdWUsIHByaW1pdGl2ZTtcblxuICAgIC8vIEZpcnN0IHBhc3MsIGdvIHRocm91Z2ggdGhlIG5ldyBBcnJheSBhbmQgZmlsbCB1cFxuICAgIC8vIHRoZSBuZXcgZnJhZ3MgYXJyYXkuIElmIGEgcGllY2Ugb2YgZGF0YSBoYXMgYSBjYWNoZWRcbiAgICAvLyBpbnN0YW5jZSBmb3IgaXQsIHdlIHJldXNlIGl0LiBPdGhlcndpc2UgYnVpbGQgYSBuZXdcbiAgICAvLyBpbnN0YW5jZS5cbiAgICBmb3IgKGkgPSAwLCBsID0gZGF0YS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGl0ZW0gPSBkYXRhW2ldO1xuICAgICAga2V5ID0gY29udmVydGVkRnJvbU9iamVjdCA/IGl0ZW0uJGtleSA6IG51bGw7XG4gICAgICB2YWx1ZSA9IGNvbnZlcnRlZEZyb21PYmplY3QgPyBpdGVtLiR2YWx1ZSA6IGl0ZW07XG4gICAgICBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuICAgICAgZnJhZyA9ICFpbml0ICYmIHRoaXMuZ2V0Q2FjaGVkRnJhZyh2YWx1ZSwgaSwga2V5KTtcbiAgICAgIGlmIChmcmFnKSB7XG4gICAgICAgIC8vIHJldXNhYmxlIGZyYWdtZW50XG4gICAgICAgIGZyYWcucmV1c2VkID0gdHJ1ZTtcbiAgICAgICAgLy8gdXBkYXRlICRpbmRleFxuICAgICAgICBmcmFnLnNjb3BlLiRpbmRleCA9IGk7XG4gICAgICAgIC8vIHVwZGF0ZSAka2V5XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICBmcmFnLnNjb3BlLiRrZXkgPSBrZXk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdXBkYXRlIGl0ZXJhdG9yXG4gICAgICAgIGlmIChpdGVyYXRvcikge1xuICAgICAgICAgIGZyYWcuc2NvcGVbaXRlcmF0b3JdID0ga2V5ICE9PSBudWxsID8ga2V5IDogaTtcbiAgICAgICAgfVxuICAgICAgICAvLyB1cGRhdGUgZGF0YSBmb3IgdHJhY2stYnksIG9iamVjdCByZXBlYXQgJlxuICAgICAgICAvLyBwcmltaXRpdmUgdmFsdWVzLlxuICAgICAgICBpZiAodHJhY2tCeUtleSB8fCBjb252ZXJ0ZWRGcm9tT2JqZWN0IHx8IHByaW1pdGl2ZSkge1xuICAgICAgICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZyYWcuc2NvcGVbYWxpYXNdID0gdmFsdWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG5ldyBpc250YW5jZVxuICAgICAgICBmcmFnID0gdGhpcy5jcmVhdGUodmFsdWUsIGFsaWFzLCBpLCBrZXkpO1xuICAgICAgICBmcmFnLmZyZXNoID0gIWluaXQ7XG4gICAgICB9XG4gICAgICBmcmFnc1tpXSA9IGZyYWc7XG4gICAgICBpZiAoaW5pdCkge1xuICAgICAgICBmcmFnLmJlZm9yZShlbmQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHdlJ3JlIGRvbmUgZm9yIHRoZSBpbml0aWFsIHJlbmRlci5cbiAgICBpZiAoaW5pdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNlY29uZCBwYXNzLCBnbyB0aHJvdWdoIHRoZSBvbGQgZnJhZ21lbnRzIGFuZFxuICAgIC8vIGRlc3Ryb3kgdGhvc2Ugd2hvIGFyZSBub3QgcmV1c2VkIChhbmQgcmVtb3ZlIHRoZW1cbiAgICAvLyBmcm9tIGNhY2hlKVxuICAgIHZhciByZW1vdmFsSW5kZXggPSAwO1xuICAgIHZhciB0b3RhbFJlbW92ZWQgPSBvbGRGcmFncy5sZW5ndGggLSBmcmFncy5sZW5ndGg7XG4gICAgLy8gd2hlbiByZW1vdmluZyBhIGxhcmdlIG51bWJlciBvZiBmcmFnbWVudHMsIHdhdGNoZXIgcmVtb3ZhbFxuICAgIC8vIHR1cm5zIG91dCB0byBiZSBhIHBlcmYgYm90dGxlbmVjaywgc28gd2UgYmF0Y2ggdGhlIHdhdGNoZXJcbiAgICAvLyByZW1vdmFscyBpbnRvIGEgc2luZ2xlIGZpbHRlciBjYWxsIVxuICAgIHRoaXMudm0uX3ZGb3JSZW1vdmluZyA9IHRydWU7XG4gICAgZm9yIChpID0gMCwgbCA9IG9sZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZnJhZyA9IG9sZEZyYWdzW2ldO1xuICAgICAgaWYgKCFmcmFnLnJldXNlZCkge1xuICAgICAgICB0aGlzLmRlbGV0ZUNhY2hlZEZyYWcoZnJhZyk7XG4gICAgICAgIHRoaXMucmVtb3ZlKGZyYWcsIHJlbW92YWxJbmRleCsrLCB0b3RhbFJlbW92ZWQsIGluRG9jdW1lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnZtLl92Rm9yUmVtb3ZpbmcgPSBmYWxzZTtcbiAgICBpZiAocmVtb3ZhbEluZGV4KSB7XG4gICAgICB0aGlzLnZtLl93YXRjaGVycyA9IHRoaXMudm0uX3dhdGNoZXJzLmZpbHRlcihmdW5jdGlvbiAodykge1xuICAgICAgICByZXR1cm4gdy5hY3RpdmU7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBGaW5hbCBwYXNzLCBtb3ZlL2luc2VydCBuZXcgZnJhZ21lbnRzIGludG8gdGhlXG4gICAgLy8gcmlnaHQgcGxhY2UuXG4gICAgdmFyIHRhcmdldFByZXYsIHByZXZFbCwgY3VycmVudFByZXY7XG4gICAgdmFyIGluc2VydGlvbkluZGV4ID0gMDtcbiAgICBmb3IgKGkgPSAwLCBsID0gZnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmcmFnID0gZnJhZ3NbaV07XG4gICAgICAvLyB0aGlzIGlzIHRoZSBmcmFnIHRoYXQgd2Ugc2hvdWxkIGJlIGFmdGVyXG4gICAgICB0YXJnZXRQcmV2ID0gZnJhZ3NbaSAtIDFdO1xuICAgICAgcHJldkVsID0gdGFyZ2V0UHJldiA/IHRhcmdldFByZXYuc3RhZ2dlckNiID8gdGFyZ2V0UHJldi5zdGFnZ2VyQW5jaG9yIDogdGFyZ2V0UHJldi5lbmQgfHwgdGFyZ2V0UHJldi5ub2RlIDogc3RhcnQ7XG4gICAgICBpZiAoZnJhZy5yZXVzZWQgJiYgIWZyYWcuc3RhZ2dlckNiKSB7XG4gICAgICAgIGN1cnJlbnRQcmV2ID0gZmluZFByZXZGcmFnKGZyYWcsIHN0YXJ0LCB0aGlzLmlkKTtcbiAgICAgICAgaWYgKGN1cnJlbnRQcmV2ICE9PSB0YXJnZXRQcmV2ICYmICghY3VycmVudFByZXYgfHxcbiAgICAgICAgLy8gb3B0aW1pemF0aW9uIGZvciBtb3ZpbmcgYSBzaW5nbGUgaXRlbS5cbiAgICAgICAgLy8gdGhhbmtzIHRvIHN1Z2dlc3Rpb25zIGJ5IEBsaXZvcmFzIGluICMxODA3XG4gICAgICAgIGZpbmRQcmV2RnJhZyhjdXJyZW50UHJldiwgc3RhcnQsIHRoaXMuaWQpICE9PSB0YXJnZXRQcmV2KSkge1xuICAgICAgICAgIHRoaXMubW92ZShmcmFnLCBwcmV2RWwpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBuZXcgaW5zdGFuY2UsIG9yIHN0aWxsIGluIHN0YWdnZXIuXG4gICAgICAgIC8vIGluc2VydCB3aXRoIHVwZGF0ZWQgc3RhZ2dlciBpbmRleC5cbiAgICAgICAgdGhpcy5pbnNlcnQoZnJhZywgaW5zZXJ0aW9uSW5kZXgrKywgcHJldkVsLCBpbkRvY3VtZW50KTtcbiAgICAgIH1cbiAgICAgIGZyYWcucmV1c2VkID0gZnJhZy5mcmVzaCA9IGZhbHNlO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGZyYWdtZW50IGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhbGlhc1xuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtrZXldXG4gICAqIEByZXR1cm4ge0ZyYWdtZW50fVxuICAgKi9cblxuICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZSh2YWx1ZSwgYWxpYXMsIGluZGV4LCBrZXkpIHtcbiAgICB2YXIgaG9zdCA9IHRoaXMuX2hvc3Q7XG4gICAgLy8gY3JlYXRlIGl0ZXJhdGlvbiBzY29wZVxuICAgIHZhciBwYXJlbnRTY29wZSA9IHRoaXMuX3Njb3BlIHx8IHRoaXMudm07XG4gICAgdmFyIHNjb3BlID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZSk7XG4gICAgLy8gcmVmIGhvbGRlciBmb3IgdGhlIHNjb3BlXG4gICAgc2NvcGUuJHJlZnMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlLiRyZWZzKTtcbiAgICBzY29wZS4kZWxzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZS4kZWxzKTtcbiAgICAvLyBtYWtlIHN1cmUgcG9pbnQgJHBhcmVudCB0byBwYXJlbnQgc2NvcGVcbiAgICBzY29wZS4kcGFyZW50ID0gcGFyZW50U2NvcGU7XG4gICAgLy8gZm9yIHR3by13YXkgYmluZGluZyBvbiBhbGlhc1xuICAgIHNjb3BlLiRmb3JDb250ZXh0ID0gdGhpcztcbiAgICAvLyBkZWZpbmUgc2NvcGUgcHJvcGVydGllc1xuICAgIC8vIGltcG9ydGFudDogZGVmaW5lIHRoZSBzY29wZSBhbGlhcyB3aXRob3V0IGZvcmNlZCBjb252ZXJzaW9uXG4gICAgLy8gc28gdGhhdCBmcm96ZW4gZGF0YSBzdHJ1Y3R1cmVzIHJlbWFpbiBub24tcmVhY3RpdmUuXG4gICAgd2l0aG91dENvbnZlcnNpb24oZnVuY3Rpb24gKCkge1xuICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsIGFsaWFzLCB2YWx1ZSk7XG4gICAgfSk7XG4gICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsICckaW5kZXgnLCBpbmRleCk7XG4gICAgaWYgKGtleSkge1xuICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsICcka2V5Jywga2V5KTtcbiAgICB9IGVsc2UgaWYgKHNjb3BlLiRrZXkpIHtcbiAgICAgIC8vIGF2b2lkIGFjY2lkZW50YWwgZmFsbGJhY2tcbiAgICAgIGRlZihzY29wZSwgJyRrZXknLCBudWxsKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXRlcmF0b3IpIHtcbiAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCB0aGlzLml0ZXJhdG9yLCBrZXkgIT09IG51bGwgPyBrZXkgOiBpbmRleCk7XG4gICAgfVxuICAgIHZhciBmcmFnID0gdGhpcy5mYWN0b3J5LmNyZWF0ZShob3N0LCBzY29wZSwgdGhpcy5fZnJhZyk7XG4gICAgZnJhZy5mb3JJZCA9IHRoaXMuaWQ7XG4gICAgdGhpcy5jYWNoZUZyYWcodmFsdWUsIGZyYWcsIGluZGV4LCBrZXkpO1xuICAgIHJldHVybiBmcmFnO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHYtcmVmIG9uIG93bmVyIHZtLlxuICAgKi9cblxuICB1cGRhdGVSZWY6IGZ1bmN0aW9uIHVwZGF0ZVJlZigpIHtcbiAgICB2YXIgcmVmID0gdGhpcy5kZXNjcmlwdG9yLnJlZjtcbiAgICBpZiAoIXJlZikgcmV0dXJuO1xuICAgIHZhciBoYXNoID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRyZWZzO1xuICAgIHZhciByZWZzO1xuICAgIGlmICghdGhpcy5mcm9tT2JqZWN0KSB7XG4gICAgICByZWZzID0gdGhpcy5mcmFncy5tYXAoZmluZFZtRnJvbUZyYWcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZWZzID0ge307XG4gICAgICB0aGlzLmZyYWdzLmZvckVhY2goZnVuY3Rpb24gKGZyYWcpIHtcbiAgICAgICAgcmVmc1tmcmFnLnNjb3BlLiRrZXldID0gZmluZFZtRnJvbUZyYWcoZnJhZyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaGFzaFtyZWZdID0gcmVmcztcbiAgfSxcblxuICAvKipcbiAgICogRm9yIG9wdGlvbiBsaXN0cywgdXBkYXRlIHRoZSBjb250YWluaW5nIHYtbW9kZWwgb25cbiAgICogcGFyZW50IDxzZWxlY3Q+LlxuICAgKi9cblxuICB1cGRhdGVNb2RlbDogZnVuY3Rpb24gdXBkYXRlTW9kZWwoKSB7XG4gICAgaWYgKHRoaXMuaXNPcHRpb24pIHtcbiAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnN0YXJ0LnBhcmVudE5vZGU7XG4gICAgICB2YXIgbW9kZWwgPSBwYXJlbnQgJiYgcGFyZW50Ll9fdl9tb2RlbDtcbiAgICAgIGlmIChtb2RlbCkge1xuICAgICAgICBtb2RlbC5mb3JjZVVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSW5zZXJ0IGEgZnJhZ21lbnQuIEhhbmRsZXMgc3RhZ2dlcmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtOb2RlfSBwcmV2RWxcbiAgICogQHBhcmFtIHtCb29sZWFufSBpbkRvY3VtZW50XG4gICAqL1xuXG4gIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KGZyYWcsIGluZGV4LCBwcmV2RWwsIGluRG9jdW1lbnQpIHtcbiAgICBpZiAoZnJhZy5zdGFnZ2VyQ2IpIHtcbiAgICAgIGZyYWcuc3RhZ2dlckNiLmNhbmNlbCgpO1xuICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuICAgIH1cbiAgICB2YXIgc3RhZ2dlckFtb3VudCA9IHRoaXMuZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgbnVsbCwgJ2VudGVyJyk7XG4gICAgaWYgKGluRG9jdW1lbnQgJiYgc3RhZ2dlckFtb3VudCkge1xuICAgICAgLy8gY3JlYXRlIGFuIGFuY2hvciBhbmQgaW5zZXJ0IGl0IHN5bmNocm9ub3VzbHksXG4gICAgICAvLyBzbyB0aGF0IHdlIGNhbiByZXNvbHZlIHRoZSBjb3JyZWN0IG9yZGVyIHdpdGhvdXRcbiAgICAgIC8vIHdvcnJ5aW5nIGFib3V0IHNvbWUgZWxlbWVudHMgbm90IGluc2VydGVkIHlldFxuICAgICAgdmFyIGFuY2hvciA9IGZyYWcuc3RhZ2dlckFuY2hvcjtcbiAgICAgIGlmICghYW5jaG9yKSB7XG4gICAgICAgIGFuY2hvciA9IGZyYWcuc3RhZ2dlckFuY2hvciA9IGNyZWF0ZUFuY2hvcignc3RhZ2dlci1hbmNob3InKTtcbiAgICAgICAgYW5jaG9yLl9fdl9mcmFnID0gZnJhZztcbiAgICAgIH1cbiAgICAgIGFmdGVyKGFuY2hvciwgcHJldkVsKTtcbiAgICAgIHZhciBvcCA9IGZyYWcuc3RhZ2dlckNiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKCkge1xuICAgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG4gICAgICAgIGZyYWcuYmVmb3JlKGFuY2hvcik7XG4gICAgICAgIHJlbW92ZShhbmNob3IpO1xuICAgICAgfSk7XG4gICAgICBzZXRUaW1lb3V0KG9wLCBzdGFnZ2VyQW1vdW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHRhcmdldCA9IHByZXZFbC5uZXh0U2libGluZztcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgLy8gcmVzZXQgZW5kIGFuY2hvciBwb3NpdGlvbiBpbiBjYXNlIHRoZSBwb3NpdGlvbiB3YXMgbWVzc2VkIHVwXG4gICAgICAgIC8vIGJ5IGFuIGV4dGVybmFsIGRyYWctbi1kcm9wIGxpYnJhcnkuXG4gICAgICAgIGFmdGVyKHRoaXMuZW5kLCBwcmV2RWwpO1xuICAgICAgICB0YXJnZXQgPSB0aGlzLmVuZDtcbiAgICAgIH1cbiAgICAgIGZyYWcuYmVmb3JlKHRhcmdldCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBmcmFnbWVudC4gSGFuZGxlcyBzdGFnZ2VyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge051bWJlcn0gdG90YWxcbiAgICogQHBhcmFtIHtCb29sZWFufSBpbkRvY3VtZW50XG4gICAqL1xuXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGZyYWcsIGluZGV4LCB0b3RhbCwgaW5Eb2N1bWVudCkge1xuICAgIGlmIChmcmFnLnN0YWdnZXJDYikge1xuICAgICAgZnJhZy5zdGFnZ2VyQ2IuY2FuY2VsKCk7XG4gICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG4gICAgICAvLyBpdCdzIG5vdCBwb3NzaWJsZSBmb3IgdGhlIHNhbWUgZnJhZyB0byBiZSByZW1vdmVkXG4gICAgICAvLyB0d2ljZSwgc28gaWYgd2UgaGF2ZSBhIHBlbmRpbmcgc3RhZ2dlciBjYWxsYmFjayxcbiAgICAgIC8vIGl0IG1lYW5zIHRoaXMgZnJhZyBpcyBxdWV1ZWQgZm9yIGVudGVyIGJ1dCByZW1vdmVkXG4gICAgICAvLyBiZWZvcmUgaXRzIHRyYW5zaXRpb24gc3RhcnRlZC4gU2luY2UgaXQgaXMgYWxyZWFkeVxuICAgICAgLy8gZGVzdHJveWVkLCB3ZSBjYW4ganVzdCBsZWF2ZSBpdCBpbiBkZXRhY2hlZCBzdGF0ZS5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHN0YWdnZXJBbW91bnQgPSB0aGlzLmdldFN0YWdnZXIoZnJhZywgaW5kZXgsIHRvdGFsLCAnbGVhdmUnKTtcbiAgICBpZiAoaW5Eb2N1bWVudCAmJiBzdGFnZ2VyQW1vdW50KSB7XG4gICAgICB2YXIgb3AgPSBmcmFnLnN0YWdnZXJDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuICAgICAgICBmcmFnLnJlbW92ZSgpO1xuICAgICAgfSk7XG4gICAgICBzZXRUaW1lb3V0KG9wLCBzdGFnZ2VyQW1vdW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZnJhZy5yZW1vdmUoKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIE1vdmUgYSBmcmFnbWVudCB0byBhIG5ldyBwb3NpdGlvbi5cbiAgICogRm9yY2Ugbm8gdHJhbnNpdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKiBAcGFyYW0ge05vZGV9IHByZXZFbFxuICAgKi9cblxuICBtb3ZlOiBmdW5jdGlvbiBtb3ZlKGZyYWcsIHByZXZFbCkge1xuICAgIC8vIGZpeCBhIGNvbW1vbiBpc3N1ZSB3aXRoIFNvcnRhYmxlOlxuICAgIC8vIGlmIHByZXZFbCBkb2Vzbid0IGhhdmUgbmV4dFNpYmxpbmcsIHRoaXMgbWVhbnMgaXQnc1xuICAgIC8vIGJlZW4gZHJhZ2dlZCBhZnRlciB0aGUgZW5kIGFuY2hvci4gSnVzdCByZS1wb3NpdGlvblxuICAgIC8vIHRoZSBlbmQgYW5jaG9yIHRvIHRoZSBlbmQgb2YgdGhlIGNvbnRhaW5lci5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIXByZXZFbC5uZXh0U2libGluZykge1xuICAgICAgdGhpcy5lbmQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0aGlzLmVuZCk7XG4gICAgfVxuICAgIGZyYWcuYmVmb3JlKHByZXZFbC5uZXh0U2libGluZywgZmFsc2UpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDYWNoZSBhIGZyYWdtZW50IHVzaW5nIHRyYWNrLWJ5IG9yIHRoZSBvYmplY3Qga2V5LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuICAgKi9cblxuICBjYWNoZUZyYWc6IGZ1bmN0aW9uIGNhY2hlRnJhZyh2YWx1ZSwgZnJhZywgaW5kZXgsIGtleSkge1xuICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcbiAgICB2YXIgY2FjaGUgPSB0aGlzLmNhY2hlO1xuICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuICAgIHZhciBpZDtcbiAgICBpZiAoa2V5IHx8IHRyYWNrQnlLZXkgfHwgcHJpbWl0aXZlKSB7XG4gICAgICBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xuICAgICAgaWYgKCFjYWNoZVtpZF0pIHtcbiAgICAgICAgY2FjaGVbaWRdID0gZnJhZztcbiAgICAgIH0gZWxzZSBpZiAodHJhY2tCeUtleSAhPT0gJyRpbmRleCcpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZCA9IHRoaXMuaWQ7XG4gICAgICBpZiAoaGFzT3duKHZhbHVlLCBpZCkpIHtcbiAgICAgICAgaWYgKHZhbHVlW2lkXSA9PT0gbnVsbCkge1xuICAgICAgICAgIHZhbHVlW2lkXSA9IGZyYWc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpKSB7XG4gICAgICAgIGRlZih2YWx1ZSwgaWQsIGZyYWcpO1xuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHdhcm4oJ0Zyb3plbiB2LWZvciBvYmplY3RzIGNhbm5vdCBiZSBhdXRvbWF0aWNhbGx5IHRyYWNrZWQsIG1ha2Ugc3VyZSB0byAnICsgJ3Byb3ZpZGUgYSB0cmFjay1ieSBrZXkuJyk7XG4gICAgICB9XG4gICAgfVxuICAgIGZyYWcucmF3ID0gdmFsdWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBhIGNhY2hlZCBmcmFnbWVudCBmcm9tIHRoZSB2YWx1ZS9pbmRleC9rZXlcbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cbiAgICovXG5cbiAgZ2V0Q2FjaGVkRnJhZzogZnVuY3Rpb24gZ2V0Q2FjaGVkRnJhZyh2YWx1ZSwgaW5kZXgsIGtleSkge1xuICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcbiAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcbiAgICB2YXIgZnJhZztcbiAgICBpZiAoa2V5IHx8IHRyYWNrQnlLZXkgfHwgcHJpbWl0aXZlKSB7XG4gICAgICB2YXIgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcbiAgICAgIGZyYWcgPSB0aGlzLmNhY2hlW2lkXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZnJhZyA9IHZhbHVlW3RoaXMuaWRdO1xuICAgIH1cbiAgICBpZiAoZnJhZyAmJiAoZnJhZy5yZXVzZWQgfHwgZnJhZy5mcmVzaCkpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZyYWc7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIGZyYWdtZW50IGZyb20gY2FjaGUuXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICovXG5cbiAgZGVsZXRlQ2FjaGVkRnJhZzogZnVuY3Rpb24gZGVsZXRlQ2FjaGVkRnJhZyhmcmFnKSB7XG4gICAgdmFyIHZhbHVlID0gZnJhZy5yYXc7XG4gICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuICAgIHZhciBzY29wZSA9IGZyYWcuc2NvcGU7XG4gICAgdmFyIGluZGV4ID0gc2NvcGUuJGluZGV4O1xuICAgIC8vIGZpeCAjOTQ4OiBhdm9pZCBhY2NpZGVudGFsbHkgZmFsbCB0aHJvdWdoIHRvXG4gICAgLy8gYSBwYXJlbnQgcmVwZWF0ZXIgd2hpY2ggaGFwcGVucyB0byBoYXZlICRrZXkuXG4gICAgdmFyIGtleSA9IGhhc093bihzY29wZSwgJyRrZXknKSAmJiBzY29wZS4ka2V5O1xuICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuICAgIGlmICh0cmFja0J5S2V5IHx8IGtleSB8fCBwcmltaXRpdmUpIHtcbiAgICAgIHZhciBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xuICAgICAgdGhpcy5jYWNoZVtpZF0gPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZVt0aGlzLmlkXSA9IG51bGw7XG4gICAgICBmcmFnLnJhdyA9IG51bGw7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHN0YWdnZXIgYW1vdW50IGZvciBhbiBpbnNlcnRpb24vcmVtb3ZhbC5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gICAqL1xuXG4gIGdldFN0YWdnZXI6IGZ1bmN0aW9uIGdldFN0YWdnZXIoZnJhZywgaW5kZXgsIHRvdGFsLCB0eXBlKSB7XG4gICAgdHlwZSA9IHR5cGUgKyAnU3RhZ2dlcic7XG4gICAgdmFyIHRyYW5zID0gZnJhZy5ub2RlLl9fdl90cmFucztcbiAgICB2YXIgaG9va3MgPSB0cmFucyAmJiB0cmFucy5ob29rcztcbiAgICB2YXIgaG9vayA9IGhvb2tzICYmIChob29rc1t0eXBlXSB8fCBob29rcy5zdGFnZ2VyKTtcbiAgICByZXR1cm4gaG9vayA/IGhvb2suY2FsbChmcmFnLCBpbmRleCwgdG90YWwpIDogaW5kZXggKiBwYXJzZUludCh0aGlzLnBhcmFtc1t0eXBlXSB8fCB0aGlzLnBhcmFtcy5zdGFnZ2VyLCAxMCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFByZS1wcm9jZXNzIHRoZSB2YWx1ZSBiZWZvcmUgcGlwaW5nIGl0IHRocm91Z2ggdGhlXG4gICAqIGZpbHRlcnMuIFRoaXMgaXMgcGFzc2VkIHRvIGFuZCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIuXG4gICAqL1xuXG4gIF9wcmVQcm9jZXNzOiBmdW5jdGlvbiBfcHJlUHJvY2Vzcyh2YWx1ZSkge1xuICAgIC8vIHJlZ2FyZGxlc3Mgb2YgdHlwZSwgc3RvcmUgdGhlIHVuLWZpbHRlcmVkIHJhdyB2YWx1ZS5cbiAgICB0aGlzLnJhd1ZhbHVlID0gdmFsdWU7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQb3N0LXByb2Nlc3MgdGhlIHZhbHVlIGFmdGVyIGl0IGhhcyBiZWVuIHBpcGVkIHRocm91Z2hcbiAgICogdGhlIGZpbHRlcnMuIFRoaXMgaXMgcGFzc2VkIHRvIGFuZCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIuXG4gICAqXG4gICAqIEl0IGlzIG5lY2Vzc2FyeSBmb3IgdGhpcyB0byBiZSBjYWxsZWQgZHVyaW5nIHRoZVxuICAgKiB3YXRjaGVyJ3MgZGVwZW5kZW5jeSBjb2xsZWN0aW9uIHBoYXNlIGJlY2F1c2Ugd2Ugd2FudFxuICAgKiB0aGUgdi1mb3IgdG8gdXBkYXRlIHdoZW4gdGhlIHNvdXJjZSBPYmplY3QgaXMgbXV0YXRlZC5cbiAgICovXG5cbiAgX3Bvc3RQcm9jZXNzOiBmdW5jdGlvbiBfcG9zdFByb2Nlc3ModmFsdWUpIHtcbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgICAvLyBjb252ZXJ0IHBsYWluIG9iamVjdCB0byBhcnJheS5cbiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuICAgICAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcbiAgICAgIHZhciByZXMgPSBuZXcgQXJyYXkoaSk7XG4gICAgICB2YXIga2V5O1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICByZXNbaV0gPSB7XG4gICAgICAgICAgJGtleToga2V5LFxuICAgICAgICAgICR2YWx1ZTogdmFsdWVba2V5XVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcztcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9IHJhbmdlKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZSB8fCBbXTtcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgaWYgKHRoaXMuZGVzY3JpcHRvci5yZWYpIHtcbiAgICAgICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kcmVmc1t0aGlzLmRlc2NyaXB0b3IucmVmXSA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLmZyYWdzKSB7XG4gICAgICB2YXIgaSA9IHRoaXMuZnJhZ3MubGVuZ3RoO1xuICAgICAgdmFyIGZyYWc7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGZyYWcgPSB0aGlzLmZyYWdzW2ldO1xuICAgICAgICB0aGlzLmRlbGV0ZUNhY2hlZEZyYWcoZnJhZyk7XG4gICAgICAgIGZyYWcuZGVzdHJveSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBIZWxwZXIgdG8gZmluZCB0aGUgcHJldmlvdXMgZWxlbWVudCB0aGF0IGlzIGEgZnJhZ21lbnRcbiAqIGFuY2hvci4gVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBhIGRlc3Ryb3llZCBmcmFnJ3NcbiAqIGVsZW1lbnQgY291bGQgc3RpbGwgYmUgbGluZ2VyaW5nIGluIHRoZSBET00gYmVmb3JlIGl0c1xuICogbGVhdmluZyB0cmFuc2l0aW9uIGZpbmlzaGVzLCBidXQgaXRzIGluc2VydGVkIGZsYWdcbiAqIHNob3VsZCBoYXZlIGJlZW4gc2V0IHRvIGZhbHNlIHNvIHdlIGNhbiBza2lwIHRoZW0uXG4gKlxuICogSWYgdGhpcyBpcyBhIGJsb2NrIHJlcGVhdCwgd2Ugd2FudCB0byBtYWtlIHN1cmUgd2Ugb25seVxuICogcmV0dXJuIGZyYWcgdGhhdCBpcyBib3VuZCB0byB0aGlzIHYtZm9yLiAoc2VlICM5MjkpXG4gKlxuICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICogQHBhcmFtIHtDb21tZW50fFRleHR9IGFuY2hvclxuICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gKiBAcmV0dXJuIHtGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBmaW5kUHJldkZyYWcoZnJhZywgYW5jaG9yLCBpZCkge1xuICB2YXIgZWwgPSBmcmFnLm5vZGUucHJldmlvdXNTaWJsaW5nO1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCFlbCkgcmV0dXJuO1xuICBmcmFnID0gZWwuX192X2ZyYWc7XG4gIHdoaWxlICgoIWZyYWcgfHwgZnJhZy5mb3JJZCAhPT0gaWQgfHwgIWZyYWcuaW5zZXJ0ZWQpICYmIGVsICE9PSBhbmNob3IpIHtcbiAgICBlbCA9IGVsLnByZXZpb3VzU2libGluZztcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIWVsKSByZXR1cm47XG4gICAgZnJhZyA9IGVsLl9fdl9mcmFnO1xuICB9XG4gIHJldHVybiBmcmFnO1xufVxuXG4vKipcbiAqIEZpbmQgYSB2bSBmcm9tIGEgZnJhZ21lbnQuXG4gKlxuICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICogQHJldHVybiB7VnVlfHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBmaW5kVm1Gcm9tRnJhZyhmcmFnKSB7XG4gIHZhciBub2RlID0gZnJhZy5ub2RlO1xuICAvLyBoYW5kbGUgbXVsdGktbm9kZSBmcmFnXG4gIGlmIChmcmFnLmVuZCkge1xuICAgIHdoaWxlICghbm9kZS5fX3Z1ZV9fICYmIG5vZGUgIT09IGZyYWcuZW5kICYmIG5vZGUubmV4dFNpYmxpbmcpIHtcbiAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbm9kZS5fX3Z1ZV9fO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHJhbmdlIGFycmF5IGZyb20gZ2l2ZW4gbnVtYmVyLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBuXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuXG5mdW5jdGlvbiByYW5nZShuKSB7XG4gIHZhciBpID0gLTE7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoTWF0aC5mbG9vcihuKSk7XG4gIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgcmV0W2ldID0gaTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG4vKipcbiAqIEdldCB0aGUgdHJhY2sgYnkga2V5IGZvciBhbiBpdGVtLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtTdHJpbmd9IFt0cmFja0J5S2V5XVxuICovXG5cbmZ1bmN0aW9uIGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpIHtcbiAgcmV0dXJuIHRyYWNrQnlLZXkgPyB0cmFja0J5S2V5ID09PSAnJGluZGV4JyA/IGluZGV4IDogdHJhY2tCeUtleS5jaGFyQXQoMCkubWF0Y2goL1xcdy8pID8gZ2V0UGF0aCh2YWx1ZSwgdHJhY2tCeUtleSkgOiB2YWx1ZVt0cmFja0J5S2V5XSA6IGtleSB8fCB2YWx1ZTtcbn1cblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgdkZvci53YXJuRHVwbGljYXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgd2FybignRHVwbGljYXRlIHZhbHVlIGZvdW5kIGluIHYtZm9yPVwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgKyAnLiBVc2UgdHJhY2stYnk9XCIkaW5kZXhcIiBpZiAnICsgJ3lvdSBhcmUgZXhwZWN0aW5nIGR1cGxpY2F0ZSB2YWx1ZXMuJywgdGhpcy52bSk7XG4gIH07XG59XG5cbnZhciB2SWYgPSB7XG5cbiAgcHJpb3JpdHk6IElGLFxuICB0ZXJtaW5hbDogdHJ1ZSxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgaWYgKCFlbC5fX3Z1ZV9fKSB7XG4gICAgICAvLyBjaGVjayBlbHNlIGJsb2NrXG4gICAgICB2YXIgbmV4dCA9IGVsLm5leHRFbGVtZW50U2libGluZztcbiAgICAgIGlmIChuZXh0ICYmIGdldEF0dHIobmV4dCwgJ3YtZWxzZScpICE9PSBudWxsKSB7XG4gICAgICAgIHJlbW92ZShuZXh0KTtcbiAgICAgICAgdGhpcy5lbHNlRWwgPSBuZXh0O1xuICAgICAgfVxuICAgICAgLy8gY2hlY2sgbWFpbiBibG9ja1xuICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtaWYnKTtcbiAgICAgIHJlcGxhY2UoZWwsIHRoaXMuYW5jaG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LWlmPVwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiBjYW5ub3QgYmUgJyArICd1c2VkIG9uIGFuIGluc3RhbmNlIHJvb3QgZWxlbWVudC4nLCB0aGlzLnZtKTtcbiAgICAgIHRoaXMuaW52YWxpZCA9IHRydWU7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuaW52YWxpZCkgcmV0dXJuO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgaWYgKCF0aGlzLmZyYWcpIHtcbiAgICAgICAgdGhpcy5pbnNlcnQoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmUoKTtcbiAgICB9XG4gIH0sXG5cbiAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoKSB7XG4gICAgaWYgKHRoaXMuZWxzZUZyYWcpIHtcbiAgICAgIHRoaXMuZWxzZUZyYWcucmVtb3ZlKCk7XG4gICAgICB0aGlzLmVsc2VGcmFnID0gbnVsbDtcbiAgICB9XG4gICAgLy8gbGF6eSBpbml0IGZhY3RvcnlcbiAgICBpZiAoIXRoaXMuZmFjdG9yeSkge1xuICAgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCB0aGlzLmVsKTtcbiAgICB9XG4gICAgdGhpcy5mcmFnID0gdGhpcy5mYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZyk7XG4gICAgdGhpcy5mcmFnLmJlZm9yZSh0aGlzLmFuY2hvcik7XG4gIH0sXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgaWYgKHRoaXMuZnJhZykge1xuICAgICAgdGhpcy5mcmFnLnJlbW92ZSgpO1xuICAgICAgdGhpcy5mcmFnID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuZWxzZUVsICYmICF0aGlzLmVsc2VGcmFnKSB7XG4gICAgICBpZiAoIXRoaXMuZWxzZUZhY3RvcnkpIHtcbiAgICAgICAgdGhpcy5lbHNlRmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy5lbHNlRWwuX2NvbnRleHQgfHwgdGhpcy52bSwgdGhpcy5lbHNlRWwpO1xuICAgICAgfVxuICAgICAgdGhpcy5lbHNlRnJhZyA9IHRoaXMuZWxzZUZhY3RvcnkuY3JlYXRlKHRoaXMuX2hvc3QsIHRoaXMuX3Njb3BlLCB0aGlzLl9mcmFnKTtcbiAgICAgIHRoaXMuZWxzZUZyYWcuYmVmb3JlKHRoaXMuYW5jaG9yKTtcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgaWYgKHRoaXMuZnJhZykge1xuICAgICAgdGhpcy5mcmFnLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZWxzZUZyYWcpIHtcbiAgICAgIHRoaXMuZWxzZUZyYWcuZGVzdHJveSgpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHNob3cgPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyBjaGVjayBlbHNlIGJsb2NrXG4gICAgdmFyIG5leHQgPSB0aGlzLmVsLm5leHRFbGVtZW50U2libGluZztcbiAgICBpZiAobmV4dCAmJiBnZXRBdHRyKG5leHQsICd2LWVsc2UnKSAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5lbHNlRWwgPSBuZXh0O1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIHRoaXMuYXBwbHkodGhpcy5lbCwgdmFsdWUpO1xuICAgIGlmICh0aGlzLmVsc2VFbCkge1xuICAgICAgdGhpcy5hcHBseSh0aGlzLmVsc2VFbCwgIXZhbHVlKTtcbiAgICB9XG4gIH0sXG5cbiAgYXBwbHk6IGZ1bmN0aW9uIGFwcGx5KGVsLCB2YWx1ZSkge1xuICAgIGlmIChpbkRvYyhlbCkpIHtcbiAgICAgIGFwcGx5VHJhbnNpdGlvbihlbCwgdmFsdWUgPyAxIDogLTEsIHRvZ2dsZSwgdGhpcy52bSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvZ2dsZSgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0b2dnbGUoKSB7XG4gICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPyAnJyA6ICdub25lJztcbiAgICB9XG4gIH1cbn07XG5cbnZhciB0ZXh0JDIgPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgaXNSYW5nZSA9IGVsLnR5cGUgPT09ICdyYW5nZSc7XG4gICAgdmFyIGxhenkgPSB0aGlzLnBhcmFtcy5sYXp5O1xuICAgIHZhciBudW1iZXIgPSB0aGlzLnBhcmFtcy5udW1iZXI7XG4gICAgdmFyIGRlYm91bmNlID0gdGhpcy5wYXJhbXMuZGVib3VuY2U7XG5cbiAgICAvLyBoYW5kbGUgY29tcG9zaXRpb24gZXZlbnRzLlxuICAgIC8vICAgaHR0cDovL2Jsb2cuZXZhbnlvdS5tZS8yMDE0LzAxLzAzL2NvbXBvc2l0aW9uLWV2ZW50L1xuICAgIC8vIHNraXAgdGhpcyBmb3IgQW5kcm9pZCBiZWNhdXNlIGl0IGhhbmRsZXMgY29tcG9zaXRpb25cbiAgICAvLyBldmVudHMgcXVpdGUgZGlmZmVyZW50bHkuIEFuZHJvaWQgZG9lc24ndCB0cmlnZ2VyXG4gICAgLy8gY29tcG9zaXRpb24gZXZlbnRzIGZvciBsYW5ndWFnZSBpbnB1dCBtZXRob2RzIGUuZy5cbiAgICAvLyBDaGluZXNlLCBidXQgaW5zdGVhZCB0cmlnZ2VycyB0aGVtIGZvciBzcGVsbGluZ1xuICAgIC8vIHN1Z2dlc3Rpb25zLi4uIChzZWUgRGlzY3Vzc2lvbi8jMTYyKVxuICAgIHZhciBjb21wb3NpbmcgPSBmYWxzZTtcbiAgICBpZiAoIWlzQW5kcm9pZCAmJiAhaXNSYW5nZSkge1xuICAgICAgdGhpcy5vbignY29tcG9zaXRpb25zdGFydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29tcG9zaW5nID0gdHJ1ZTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5vbignY29tcG9zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbXBvc2luZyA9IGZhbHNlO1xuICAgICAgICAvLyBpbiBJRTExIHRoZSBcImNvbXBvc2l0aW9uZW5kXCIgZXZlbnQgZmlyZXMgQUZURVJcbiAgICAgICAgLy8gdGhlIFwiaW5wdXRcIiBldmVudCwgc28gdGhlIGlucHV0IGhhbmRsZXIgaXMgYmxvY2tlZFxuICAgICAgICAvLyBhdCB0aGUgZW5kLi4uIGhhdmUgdG8gY2FsbCBpdCBoZXJlLlxuICAgICAgICAvL1xuICAgICAgICAvLyAjMTMyNzogaW4gbGF6eSBtb2RlIHRoaXMgaXMgdW5lY2Vzc2FyeS5cbiAgICAgICAgaWYgKCFsYXp5KSB7XG4gICAgICAgICAgc2VsZi5saXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBwcmV2ZW50IG1lc3Npbmcgd2l0aCB0aGUgaW5wdXQgd2hlbiB1c2VyIGlzIHR5cGluZyxcbiAgICAvLyBhbmQgZm9yY2UgdXBkYXRlIG9uIGJsdXIuXG4gICAgdGhpcy5mb2N1c2VkID0gZmFsc2U7XG4gICAgaWYgKCFpc1JhbmdlICYmICFsYXp5KSB7XG4gICAgICB0aGlzLm9uKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5mb2N1c2VkID0gdHJ1ZTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5vbignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5mb2N1c2VkID0gZmFsc2U7XG4gICAgICAgIC8vIGRvIG5vdCBzeW5jIHZhbHVlIGFmdGVyIGZyYWdtZW50IHJlbW92YWwgKCMyMDE3KVxuICAgICAgICBpZiAoIXNlbGYuX2ZyYWcgfHwgc2VsZi5fZnJhZy5pbnNlcnRlZCkge1xuICAgICAgICAgIHNlbGYucmF3TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTm93IGF0dGFjaCB0aGUgbWFpbiBsaXN0ZW5lclxuICAgIHRoaXMubGlzdGVuZXIgPSB0aGlzLnJhd0xpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGNvbXBvc2luZyB8fCAhc2VsZi5fYm91bmQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIHZhbCA9IG51bWJlciB8fCBpc1JhbmdlID8gdG9OdW1iZXIoZWwudmFsdWUpIDogZWwudmFsdWU7XG4gICAgICBzZWxmLnNldCh2YWwpO1xuICAgICAgLy8gZm9yY2UgdXBkYXRlIG9uIG5leHQgdGljayB0byBhdm9pZCBsb2NrICYgc2FtZSB2YWx1ZVxuICAgICAgLy8gYWxzbyBvbmx5IHVwZGF0ZSB3aGVuIHVzZXIgaXMgbm90IHR5cGluZ1xuICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoc2VsZi5fYm91bmQgJiYgIXNlbGYuZm9jdXNlZCkge1xuICAgICAgICAgIHNlbGYudXBkYXRlKHNlbGYuX3dhdGNoZXIudmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gYXBwbHkgZGVib3VuY2VcbiAgICBpZiAoZGVib3VuY2UpIHtcbiAgICAgIHRoaXMubGlzdGVuZXIgPSBfZGVib3VuY2UodGhpcy5saXN0ZW5lciwgZGVib3VuY2UpO1xuICAgIH1cblxuICAgIC8vIFN1cHBvcnQgalF1ZXJ5IGV2ZW50cywgc2luY2UgalF1ZXJ5LnRyaWdnZXIoKSBkb2Vzbid0XG4gICAgLy8gdHJpZ2dlciBuYXRpdmUgZXZlbnRzIGluIHNvbWUgY2FzZXMgYW5kIHNvbWUgcGx1Z2luc1xuICAgIC8vIHJlbHkgb24gJC50cmlnZ2VyKClcbiAgICAvL1xuICAgIC8vIFdlIHdhbnQgdG8gbWFrZSBzdXJlIGlmIGEgbGlzdGVuZXIgaXMgYXR0YWNoZWQgdXNpbmdcbiAgICAvLyBqUXVlcnksIGl0IGlzIGFsc28gcmVtb3ZlZCB3aXRoIGpRdWVyeSwgdGhhdCdzIHdoeVxuICAgIC8vIHdlIGRvIHRoZSBjaGVjayBmb3IgZWFjaCBkaXJlY3RpdmUgaW5zdGFuY2UgYW5kXG4gICAgLy8gc3RvcmUgdGhhdCBjaGVjayByZXN1bHQgb24gaXRzZWxmLiBUaGlzIGFsc28gYWxsb3dzXG4gICAgLy8gZWFzaWVyIHRlc3QgY292ZXJhZ2UgY29udHJvbCBieSB1bnNldHRpbmcgdGhlIGdsb2JhbFxuICAgIC8vIGpRdWVyeSB2YXJpYWJsZSBpbiB0ZXN0cy5cbiAgICB0aGlzLmhhc2pRdWVyeSA9IHR5cGVvZiBqUXVlcnkgPT09ICdmdW5jdGlvbic7XG4gICAgaWYgKHRoaXMuaGFzalF1ZXJ5KSB7XG4gICAgICB2YXIgbWV0aG9kID0galF1ZXJ5LmZuLm9uID8gJ29uJyA6ICdiaW5kJztcbiAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnY2hhbmdlJywgdGhpcy5yYXdMaXN0ZW5lcik7XG4gICAgICBpZiAoIWxhenkpIHtcbiAgICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLnJhd0xpc3RlbmVyKTtcbiAgICAgIGlmICghbGF6eSkge1xuICAgICAgICB0aGlzLm9uKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElFOSBkb2Vzbid0IGZpcmUgaW5wdXQgZXZlbnQgb24gYmFja3NwYWNlL2RlbC9jdXRcbiAgICBpZiAoIWxhenkgJiYgaXNJRTkpIHtcbiAgICAgIHRoaXMub24oJ2N1dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbmV4dFRpY2soc2VsZi5saXN0ZW5lcik7XG4gICAgICB9KTtcbiAgICAgIHRoaXMub24oJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gNDYgfHwgZS5rZXlDb2RlID09PSA4KSB7XG4gICAgICAgICAgc2VsZi5saXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBzZXQgaW5pdGlhbCB2YWx1ZSBpZiBwcmVzZW50XG4gICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgndmFsdWUnKSB8fCBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnICYmIGVsLnZhbHVlLnRyaW0oKSkge1xuICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIC8vICMzMDI5IG9ubHkgdXBkYXRlIHdoZW4gdGhlIHZhbHVlIGNoYW5nZXMuIFRoaXMgcHJldmVudFxuICAgIC8vIGJyb3dzZXJzIGZyb20gb3ZlcndyaXRpbmcgdmFsdWVzIGxpa2Ugc2VsZWN0aW9uU3RhcnRcbiAgICB2YWx1ZSA9IF90b1N0cmluZyh2YWx1ZSk7XG4gICAgaWYgKHZhbHVlICE9PSB0aGlzLmVsLnZhbHVlKSB0aGlzLmVsLnZhbHVlID0gdmFsdWU7XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICBpZiAodGhpcy5oYXNqUXVlcnkpIHtcbiAgICAgIHZhciBtZXRob2QgPSBqUXVlcnkuZm4ub2ZmID8gJ29mZicgOiAndW5iaW5kJztcbiAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG4gICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2lucHV0JywgdGhpcy5saXN0ZW5lcik7XG4gICAgfVxuICB9XG59O1xuXG52YXIgcmFkaW8gPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcblxuICAgIHRoaXMuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyB2YWx1ZSBvdmVyd3JpdGUgdmlhIHYtYmluZDp2YWx1ZVxuICAgICAgaWYgKGVsLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSkge1xuICAgICAgICByZXR1cm4gZWwuX3ZhbHVlO1xuICAgICAgfVxuICAgICAgdmFyIHZhbCA9IGVsLnZhbHVlO1xuICAgICAgaWYgKHNlbGYucGFyYW1zLm51bWJlcikge1xuICAgICAgICB2YWwgPSB0b051bWJlcih2YWwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbDtcbiAgICB9O1xuXG4gICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlbGYuc2V0KHNlbGYuZ2V0VmFsdWUoKSk7XG4gICAgfTtcbiAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblxuICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkge1xuICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIHRoaXMuZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIHRoaXMuZ2V0VmFsdWUoKSk7XG4gIH1cbn07XG5cbnZhciBzZWxlY3QgPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cbiAgICAvLyBtZXRob2QgdG8gZm9yY2UgdXBkYXRlIERPTSB1c2luZyBsYXRlc3QgdmFsdWUuXG4gICAgdGhpcy5mb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChzZWxmLl93YXRjaGVyKSB7XG4gICAgICAgIHNlbGYudXBkYXRlKHNlbGYuX3dhdGNoZXIuZ2V0KCkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGEgbXVsdGlwbGUgc2VsZWN0XG4gICAgdmFyIG11bHRpcGxlID0gdGhpcy5tdWx0aXBsZSA9IGVsLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKTtcblxuICAgIC8vIGF0dGFjaCBsaXN0ZW5lclxuICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdmFsdWUgPSBnZXRWYWx1ZShlbCwgbXVsdGlwbGUpO1xuICAgICAgdmFsdWUgPSBzZWxmLnBhcmFtcy5udW1iZXIgPyBpc0FycmF5KHZhbHVlKSA/IHZhbHVlLm1hcCh0b051bWJlcikgOiB0b051bWJlcih2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgIHNlbGYuc2V0KHZhbHVlKTtcbiAgICB9O1xuICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXG4gICAgLy8gaWYgaGFzIGluaXRpYWwgdmFsdWUsIHNldCBhZnRlckJpbmRcbiAgICB2YXIgaW5pdFZhbHVlID0gZ2V0VmFsdWUoZWwsIG11bHRpcGxlLCB0cnVlKTtcbiAgICBpZiAobXVsdGlwbGUgJiYgaW5pdFZhbHVlLmxlbmd0aCB8fCAhbXVsdGlwbGUgJiYgaW5pdFZhbHVlICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG4gICAgfVxuXG4gICAgLy8gQWxsIG1ham9yIGJyb3dzZXJzIGV4Y2VwdCBGaXJlZm94IHJlc2V0c1xuICAgIC8vIHNlbGVjdGVkSW5kZXggd2l0aCB2YWx1ZSAtMSB0byAwIHdoZW4gdGhlIGVsZW1lbnRcbiAgICAvLyBpcyBhcHBlbmRlZCB0byBhIG5ldyBwYXJlbnQsIHRoZXJlZm9yZSB3ZSBoYXZlIHRvXG4gICAgLy8gZm9yY2UgYSBET00gdXBkYXRlIHdoZW5ldmVyIHRoYXQgaGFwcGVucy4uLlxuICAgIHRoaXMudm0uJG9uKCdob29rOmF0dGFjaGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgbmV4dFRpY2soX3RoaXMuZm9yY2VVcGRhdGUpO1xuICAgIH0pO1xuICAgIGlmICghaW5Eb2MoZWwpKSB7XG4gICAgICBuZXh0VGljayh0aGlzLmZvcmNlVXBkYXRlKTtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIGVsLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICB2YXIgbXVsdGkgPSB0aGlzLm11bHRpcGxlICYmIGlzQXJyYXkodmFsdWUpO1xuICAgIHZhciBvcHRpb25zID0gZWwub3B0aW9ucztcbiAgICB2YXIgaSA9IG9wdGlvbnMubGVuZ3RoO1xuICAgIHZhciBvcCwgdmFsO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIG9wID0gb3B0aW9uc1tpXTtcbiAgICAgIHZhbCA9IG9wLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IG9wLl92YWx1ZSA6IG9wLnZhbHVlO1xuICAgICAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gICAgICBvcC5zZWxlY3RlZCA9IG11bHRpID8gaW5kZXhPZiQxKHZhbHVlLCB2YWwpID4gLTEgOiBsb29zZUVxdWFsKHZhbHVlLCB2YWwpO1xuICAgICAgLyogZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICB0aGlzLnZtLiRvZmYoJ2hvb2s6YXR0YWNoZWQnLCB0aGlzLmZvcmNlVXBkYXRlKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgc2VsZWN0IHZhbHVlXG4gKlxuICogQHBhcmFtIHtTZWxlY3RFbGVtZW50fSBlbFxuICogQHBhcmFtIHtCb29sZWFufSBtdWx0aVxuICogQHBhcmFtIHtCb29sZWFufSBpbml0XG4gKiBAcmV0dXJuIHtBcnJheXwqfVxuICovXG5cbmZ1bmN0aW9uIGdldFZhbHVlKGVsLCBtdWx0aSwgaW5pdCkge1xuICB2YXIgcmVzID0gbXVsdGkgPyBbXSA6IG51bGw7XG4gIHZhciBvcCwgdmFsLCBzZWxlY3RlZDtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBlbC5vcHRpb25zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIG9wID0gZWwub3B0aW9uc1tpXTtcbiAgICBzZWxlY3RlZCA9IGluaXQgPyBvcC5oYXNBdHRyaWJ1dGUoJ3NlbGVjdGVkJykgOiBvcC5zZWxlY3RlZDtcbiAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgIHZhbCA9IG9wLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IG9wLl92YWx1ZSA6IG9wLnZhbHVlO1xuICAgICAgaWYgKG11bHRpKSB7XG4gICAgICAgIHJlcy5wdXNoKHZhbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIE5hdGl2ZSBBcnJheS5pbmRleE9mIHVzZXMgc3RyaWN0IGVxdWFsLCBidXQgaW4gdGhpc1xuICogY2FzZSB3ZSBuZWVkIHRvIG1hdGNoIHN0cmluZy9udW1iZXJzIHdpdGggY3VzdG9tIGVxdWFsLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGFyclxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5mdW5jdGlvbiBpbmRleE9mJDEoYXJyLCB2YWwpIHtcbiAgdmFyIGkgPSBhcnIubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgaWYgKGxvb3NlRXF1YWwoYXJyW2ldLCB2YWwpKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG52YXIgY2hlY2tib3ggPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcblxuICAgIHRoaXMuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZWwuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpID8gZWwuX3ZhbHVlIDogc2VsZi5wYXJhbXMubnVtYmVyID8gdG9OdW1iZXIoZWwudmFsdWUpIDogZWwudmFsdWU7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGdldEJvb2xlYW5WYWx1ZSgpIHtcbiAgICAgIHZhciB2YWwgPSBlbC5jaGVja2VkO1xuICAgICAgaWYgKHZhbCAmJiBlbC5oYXNPd25Qcm9wZXJ0eSgnX3RydWVWYWx1ZScpKSB7XG4gICAgICAgIHJldHVybiBlbC5fdHJ1ZVZhbHVlO1xuICAgICAgfVxuICAgICAgaWYgKCF2YWwgJiYgZWwuaGFzT3duUHJvcGVydHkoJ19mYWxzZVZhbHVlJykpIHtcbiAgICAgICAgcmV0dXJuIGVsLl9mYWxzZVZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG5cbiAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG1vZGVsID0gc2VsZi5fd2F0Y2hlci52YWx1ZTtcbiAgICAgIGlmIChpc0FycmF5KG1vZGVsKSkge1xuICAgICAgICB2YXIgdmFsID0gc2VsZi5nZXRWYWx1ZSgpO1xuICAgICAgICBpZiAoZWwuY2hlY2tlZCkge1xuICAgICAgICAgIGlmIChpbmRleE9mKG1vZGVsLCB2YWwpIDwgMCkge1xuICAgICAgICAgICAgbW9kZWwucHVzaCh2YWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtb2RlbC4kcmVtb3ZlKHZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuc2V0KGdldEJvb2xlYW5WYWx1ZSgpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG4gICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgnY2hlY2tlZCcpKSB7XG4gICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIGVsLmNoZWNrZWQgPSBpbmRleE9mKHZhbHVlLCB0aGlzLmdldFZhbHVlKCkpID4gLTE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChlbC5oYXNPd25Qcm9wZXJ0eSgnX3RydWVWYWx1ZScpKSB7XG4gICAgICAgIGVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCBlbC5fdHJ1ZVZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLmNoZWNrZWQgPSAhIXZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxudmFyIGhhbmRsZXJzID0ge1xuICB0ZXh0OiB0ZXh0JDIsXG4gIHJhZGlvOiByYWRpbyxcbiAgc2VsZWN0OiBzZWxlY3QsXG4gIGNoZWNrYm94OiBjaGVja2JveFxufTtcblxudmFyIG1vZGVsID0ge1xuXG4gIHByaW9yaXR5OiBNT0RFTCxcbiAgdHdvV2F5OiB0cnVlLFxuICBoYW5kbGVyczogaGFuZGxlcnMsXG4gIHBhcmFtczogWydsYXp5JywgJ251bWJlcicsICdkZWJvdW5jZSddLFxuXG4gIC8qKlxuICAgKiBQb3NzaWJsZSBlbGVtZW50czpcbiAgICogICA8c2VsZWN0PlxuICAgKiAgIDx0ZXh0YXJlYT5cbiAgICogICA8aW5wdXQgdHlwZT1cIipcIj5cbiAgICogICAgIC0gdGV4dFxuICAgKiAgICAgLSBjaGVja2JveFxuICAgKiAgICAgLSByYWRpb1xuICAgKiAgICAgLSBudW1iZXJcbiAgICovXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyBmcmllbmRseSB3YXJuaW5nLi4uXG4gICAgdGhpcy5jaGVja0ZpbHRlcnMoKTtcbiAgICBpZiAodGhpcy5oYXNSZWFkICYmICF0aGlzLmhhc1dyaXRlKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgYSByZWFkLW9ubHkgZmlsdGVyIHdpdGggJyArICd2LW1vZGVsPVwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCIuICcgKyAnWW91IG1pZ2h0IHdhbnQgdG8gdXNlIGEgdHdvLXdheSBmaWx0ZXIgdG8gZW5zdXJlIGNvcnJlY3QgYmVoYXZpb3IuJywgdGhpcy52bSk7XG4gICAgfVxuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIHRhZyA9IGVsLnRhZ05hbWU7XG4gICAgdmFyIGhhbmRsZXI7XG4gICAgaWYgKHRhZyA9PT0gJ0lOUFVUJykge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXJzW2VsLnR5cGVdIHx8IGhhbmRsZXJzLnRleHQ7XG4gICAgfSBlbHNlIGlmICh0YWcgPT09ICdTRUxFQ1QnKSB7XG4gICAgICBoYW5kbGVyID0gaGFuZGxlcnMuc2VsZWN0O1xuICAgIH0gZWxzZSBpZiAodGFnID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICBoYW5kbGVyID0gaGFuZGxlcnMudGV4dDtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LW1vZGVsIGRvZXMgbm90IHN1cHBvcnQgZWxlbWVudCB0eXBlOiAnICsgdGFnLCB0aGlzLnZtKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWwuX192X21vZGVsID0gdGhpcztcbiAgICBoYW5kbGVyLmJpbmQuY2FsbCh0aGlzKTtcbiAgICB0aGlzLnVwZGF0ZSA9IGhhbmRsZXIudXBkYXRlO1xuICAgIHRoaXMuX3VuYmluZCA9IGhhbmRsZXIudW5iaW5kO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayByZWFkL3dyaXRlIGZpbHRlciBzdGF0cy5cbiAgICovXG5cbiAgY2hlY2tGaWx0ZXJzOiBmdW5jdGlvbiBjaGVja0ZpbHRlcnMoKSB7XG4gICAgdmFyIGZpbHRlcnMgPSB0aGlzLmZpbHRlcnM7XG4gICAgaWYgKCFmaWx0ZXJzKSByZXR1cm47XG4gICAgdmFyIGkgPSBmaWx0ZXJzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YXIgZmlsdGVyID0gcmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICdmaWx0ZXJzJywgZmlsdGVyc1tpXS5uYW1lKTtcbiAgICAgIGlmICh0eXBlb2YgZmlsdGVyID09PSAnZnVuY3Rpb24nIHx8IGZpbHRlci5yZWFkKSB7XG4gICAgICAgIHRoaXMuaGFzUmVhZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoZmlsdGVyLndyaXRlKSB7XG4gICAgICAgIHRoaXMuaGFzV3JpdGUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB0aGlzLmVsLl9fdl9tb2RlbCA9IG51bGw7XG4gICAgdGhpcy5fdW5iaW5kICYmIHRoaXMuX3VuYmluZCgpO1xuICB9XG59O1xuXG4vLyBrZXlDb2RlIGFsaWFzZXNcbnZhciBrZXlDb2RlcyA9IHtcbiAgZXNjOiAyNyxcbiAgdGFiOiA5LFxuICBlbnRlcjogMTMsXG4gIHNwYWNlOiAzMixcbiAgJ2RlbGV0ZSc6IFs4LCA0Nl0sXG4gIHVwOiAzOCxcbiAgbGVmdDogMzcsXG4gIHJpZ2h0OiAzOSxcbiAgZG93bjogNDBcbn07XG5cbmZ1bmN0aW9uIGtleUZpbHRlcihoYW5kbGVyLCBrZXlzKSB7XG4gIHZhciBjb2RlcyA9IGtleXMubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICB2YXIgY2hhckNvZGUgPSBrZXkuY2hhckNvZGVBdCgwKTtcbiAgICBpZiAoY2hhckNvZGUgPiA0NyAmJiBjaGFyQ29kZSA8IDU4KSB7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoa2V5LCAxMCk7XG4gICAgfVxuICAgIGlmIChrZXkubGVuZ3RoID09PSAxKSB7XG4gICAgICBjaGFyQ29kZSA9IGtleS50b1VwcGVyQ2FzZSgpLmNoYXJDb2RlQXQoMCk7XG4gICAgICBpZiAoY2hhckNvZGUgPiA2NCAmJiBjaGFyQ29kZSA8IDkxKSB7XG4gICAgICAgIHJldHVybiBjaGFyQ29kZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGtleUNvZGVzW2tleV07XG4gIH0pO1xuICBjb2RlcyA9IFtdLmNvbmNhdC5hcHBseShbXSwgY29kZXMpO1xuICByZXR1cm4gZnVuY3Rpb24ga2V5SGFuZGxlcihlKSB7XG4gICAgaWYgKGNvZGVzLmluZGV4T2YoZS5rZXlDb2RlKSA+IC0xKSB7XG4gICAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gc3RvcEZpbHRlcihoYW5kbGVyKSB7XG4gIHJldHVybiBmdW5jdGlvbiBzdG9wSGFuZGxlcihlKSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHByZXZlbnRIYW5kbGVyKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc2VsZkZpbHRlcihoYW5kbGVyKSB7XG4gIHJldHVybiBmdW5jdGlvbiBzZWxmSGFuZGxlcihlKSB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG4gICAgfVxuICB9O1xufVxuXG52YXIgb24kMSA9IHtcblxuICBwcmlvcml0eTogT04sXG4gIGFjY2VwdFN0YXRlbWVudDogdHJ1ZSxcbiAga2V5Q29kZXM6IGtleUNvZGVzLFxuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gZGVhbCB3aXRoIGlmcmFtZXNcbiAgICBpZiAodGhpcy5lbC50YWdOYW1lID09PSAnSUZSQU1FJyAmJiB0aGlzLmFyZyAhPT0gJ2xvYWQnKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB0aGlzLmlmcmFtZUJpbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG9uKHNlbGYuZWwuY29udGVudFdpbmRvdywgc2VsZi5hcmcsIHNlbGYuaGFuZGxlciwgc2VsZi5tb2RpZmllcnMuY2FwdHVyZSk7XG4gICAgICB9O1xuICAgICAgdGhpcy5vbignbG9hZCcsIHRoaXMuaWZyYW1lQmluZCk7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGhhbmRsZXIpIHtcbiAgICAvLyBzdHViIGEgbm9vcCBmb3Igdi1vbiB3aXRoIG5vIHZhbHVlLFxuICAgIC8vIGUuZy4gQG1vdXNlZG93bi5wcmV2ZW50XG4gICAgaWYgKCF0aGlzLmRlc2NyaXB0b3IucmF3KSB7XG4gICAgICBoYW5kbGVyID0gZnVuY3Rpb24gKCkge307XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3Ytb246JyArIHRoaXMuYXJnICsgJz1cIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgZXhwZWN0cyBhIGZ1bmN0aW9uIHZhbHVlLCAnICsgJ2dvdCAnICsgaGFuZGxlciwgdGhpcy52bSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gYXBwbHkgbW9kaWZpZXJzXG4gICAgaWYgKHRoaXMubW9kaWZpZXJzLnN0b3ApIHtcbiAgICAgIGhhbmRsZXIgPSBzdG9wRmlsdGVyKGhhbmRsZXIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5tb2RpZmllcnMucHJldmVudCkge1xuICAgICAgaGFuZGxlciA9IHByZXZlbnRGaWx0ZXIoaGFuZGxlcik7XG4gICAgfVxuICAgIGlmICh0aGlzLm1vZGlmaWVycy5zZWxmKSB7XG4gICAgICBoYW5kbGVyID0gc2VsZkZpbHRlcihoYW5kbGVyKTtcbiAgICB9XG4gICAgLy8ga2V5IGZpbHRlclxuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModGhpcy5tb2RpZmllcnMpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gICAgICByZXR1cm4ga2V5ICE9PSAnc3RvcCcgJiYga2V5ICE9PSAncHJldmVudCcgJiYga2V5ICE9PSAnc2VsZicgJiYga2V5ICE9PSAnY2FwdHVyZSc7XG4gICAgfSk7XG4gICAgaWYgKGtleXMubGVuZ3RoKSB7XG4gICAgICBoYW5kbGVyID0ga2V5RmlsdGVyKGhhbmRsZXIsIGtleXMpO1xuICAgIH1cblxuICAgIHRoaXMucmVzZXQoKTtcbiAgICB0aGlzLmhhbmRsZXIgPSBoYW5kbGVyO1xuXG4gICAgaWYgKHRoaXMuaWZyYW1lQmluZCkge1xuICAgICAgdGhpcy5pZnJhbWVCaW5kKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9uKHRoaXMuZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIsIHRoaXMubW9kaWZpZXJzLmNhcHR1cmUpO1xuICAgIH1cbiAgfSxcblxuICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5pZnJhbWVCaW5kID8gdGhpcy5lbC5jb250ZW50V2luZG93IDogdGhpcy5lbDtcbiAgICBpZiAodGhpcy5oYW5kbGVyKSB7XG4gICAgICBvZmYoZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIpO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB0aGlzLnJlc2V0KCk7XG4gIH1cbn07XG5cbnZhciBwcmVmaXhlcyA9IFsnLXdlYmtpdC0nLCAnLW1vei0nLCAnLW1zLSddO1xudmFyIGNhbWVsUHJlZml4ZXMgPSBbJ1dlYmtpdCcsICdNb3onLCAnbXMnXTtcbnZhciBpbXBvcnRhbnRSRSA9IC8haW1wb3J0YW50Oz8kLztcbnZhciBwcm9wQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG52YXIgdGVzdEVsID0gbnVsbDtcblxudmFyIHN0eWxlID0ge1xuXG4gIGRlZXA6IHRydWUsXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5lbC5zdHlsZS5jc3NUZXh0ID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUucmVkdWNlKGV4dGVuZCwge30pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUgfHwge30pO1xuICAgIH1cbiAgfSxcblxuICBoYW5kbGVPYmplY3Q6IGZ1bmN0aW9uIGhhbmRsZU9iamVjdCh2YWx1ZSkge1xuICAgIC8vIGNhY2hlIG9iamVjdCBzdHlsZXMgc28gdGhhdCBvbmx5IGNoYW5nZWQgcHJvcHNcbiAgICAvLyBhcmUgYWN0dWFsbHkgdXBkYXRlZC5cbiAgICB2YXIgY2FjaGUgPSB0aGlzLmNhY2hlIHx8ICh0aGlzLmNhY2hlID0ge30pO1xuICAgIHZhciBuYW1lLCB2YWw7XG4gICAgZm9yIChuYW1lIGluIGNhY2hlKSB7XG4gICAgICBpZiAoIShuYW1lIGluIHZhbHVlKSkge1xuICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShuYW1lLCBudWxsKTtcbiAgICAgICAgZGVsZXRlIGNhY2hlW25hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKG5hbWUgaW4gdmFsdWUpIHtcbiAgICAgIHZhbCA9IHZhbHVlW25hbWVdO1xuICAgICAgaWYgKHZhbCAhPT0gY2FjaGVbbmFtZV0pIHtcbiAgICAgICAgY2FjaGVbbmFtZV0gPSB2YWw7XG4gICAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKG5hbWUsIHZhbCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGhhbmRsZVNpbmdsZTogZnVuY3Rpb24gaGFuZGxlU2luZ2xlKHByb3AsIHZhbHVlKSB7XG4gICAgcHJvcCA9IG5vcm1hbGl6ZShwcm9wKTtcbiAgICBpZiAoIXByb3ApIHJldHVybjsgLy8gdW5zdXBwb3J0ZWQgcHJvcFxuICAgIC8vIGNhc3QgcG9zc2libGUgbnVtYmVycy9ib29sZWFucyBpbnRvIHN0cmluZ3NcbiAgICBpZiAodmFsdWUgIT0gbnVsbCkgdmFsdWUgKz0gJyc7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB2YXIgaXNJbXBvcnRhbnQgPSBpbXBvcnRhbnRSRS50ZXN0KHZhbHVlKSA/ICdpbXBvcnRhbnQnIDogJyc7XG4gICAgICBpZiAoaXNJbXBvcnRhbnQpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgd2FybignSXRcXCdzIHByb2JhYmx5IGEgYmFkIGlkZWEgdG8gdXNlICFpbXBvcnRhbnQgd2l0aCBpbmxpbmUgcnVsZXMuICcgKyAnVGhpcyBmZWF0dXJlIHdpbGwgYmUgZGVwcmVjYXRlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uIG9mIFZ1ZS4nKTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoaW1wb3J0YW50UkUsICcnKS50cmltKCk7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkocHJvcC5rZWJhYiwgdmFsdWUsIGlzSW1wb3J0YW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWwuc3R5bGVbcHJvcC5jYW1lbF0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbC5zdHlsZVtwcm9wLmNhbWVsXSA9ICcnO1xuICAgIH1cbiAgfVxuXG59O1xuXG4vKipcbiAqIE5vcm1hbGl6ZSBhIENTUyBwcm9wZXJ0eSBuYW1lLlxuICogLSBjYWNoZSByZXN1bHRcbiAqIC0gYXV0byBwcmVmaXhcbiAqIC0gY2FtZWxDYXNlIC0+IGRhc2gtY2FzZVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gbm9ybWFsaXplKHByb3ApIHtcbiAgaWYgKHByb3BDYWNoZVtwcm9wXSkge1xuICAgIHJldHVybiBwcm9wQ2FjaGVbcHJvcF07XG4gIH1cbiAgdmFyIHJlcyA9IHByZWZpeChwcm9wKTtcbiAgcHJvcENhY2hlW3Byb3BdID0gcHJvcENhY2hlW3Jlc10gPSByZXM7XG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogQXV0byBkZXRlY3QgdGhlIGFwcHJvcHJpYXRlIHByZWZpeCBmb3IgYSBDU1MgcHJvcGVydHkuXG4gKiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9wYXVsaXJpc2gvNTIzNjkyXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBwcmVmaXgocHJvcCkge1xuICBwcm9wID0gaHlwaGVuYXRlKHByb3ApO1xuICB2YXIgY2FtZWwgPSBjYW1lbGl6ZShwcm9wKTtcbiAgdmFyIHVwcGVyID0gY2FtZWwuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbC5zbGljZSgxKTtcbiAgaWYgKCF0ZXN0RWwpIHtcbiAgICB0ZXN0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgfVxuICB2YXIgaSA9IHByZWZpeGVzLmxlbmd0aDtcbiAgdmFyIHByZWZpeGVkO1xuICBpZiAoY2FtZWwgIT09ICdmaWx0ZXInICYmIGNhbWVsIGluIHRlc3RFbC5zdHlsZSkge1xuICAgIHJldHVybiB7XG4gICAgICBrZWJhYjogcHJvcCxcbiAgICAgIGNhbWVsOiBjYW1lbFxuICAgIH07XG4gIH1cbiAgd2hpbGUgKGktLSkge1xuICAgIHByZWZpeGVkID0gY2FtZWxQcmVmaXhlc1tpXSArIHVwcGVyO1xuICAgIGlmIChwcmVmaXhlZCBpbiB0ZXN0RWwuc3R5bGUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtlYmFiOiBwcmVmaXhlc1tpXSArIHByb3AsXG4gICAgICAgIGNhbWVsOiBwcmVmaXhlZFxuICAgICAgfTtcbiAgICB9XG4gIH1cbn1cblxuLy8geGxpbmtcbnZhciB4bGlua05TID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnO1xudmFyIHhsaW5rUkUgPSAvXnhsaW5rOi87XG5cbi8vIGNoZWNrIGZvciBhdHRyaWJ1dGVzIHRoYXQgcHJvaGliaXQgaW50ZXJwb2xhdGlvbnNcbnZhciBkaXNhbGxvd2VkSW50ZXJwQXR0clJFID0gL152LXxeOnxeQHxeKD86aXN8dHJhbnNpdGlvbnx0cmFuc2l0aW9uLW1vZGV8ZGVib3VuY2V8dHJhY2stYnl8c3RhZ2dlcnxlbnRlci1zdGFnZ2VyfGxlYXZlLXN0YWdnZXIpJC87XG4vLyB0aGVzZSBhdHRyaWJ1dGVzIHNob3VsZCBhbHNvIHNldCB0aGVpciBjb3JyZXNwb25kaW5nIHByb3BlcnRpZXNcbi8vIGJlY2F1c2UgdGhleSBvbmx5IGFmZmVjdCB0aGUgaW5pdGlhbCBzdGF0ZSBvZiB0aGUgZWxlbWVudFxudmFyIGF0dHJXaXRoUHJvcHNSRSA9IC9eKD86dmFsdWV8Y2hlY2tlZHxzZWxlY3RlZHxtdXRlZCkkLztcbi8vIHRoZXNlIGF0dHJpYnV0ZXMgZXhwZWN0IGVudW1yYXRlZCB2YWx1ZXMgb2YgXCJ0cnVlXCIgb3IgXCJmYWxzZVwiXG4vLyBidXQgYXJlIG5vdCBib29sZWFuIGF0dHJpYnV0ZXNcbnZhciBlbnVtZXJhdGVkQXR0clJFID0gL14oPzpkcmFnZ2FibGV8Y29udGVudGVkaXRhYmxlfHNwZWxsY2hlY2spJC87XG5cbi8vIHRoZXNlIGF0dHJpYnV0ZXMgc2hvdWxkIHNldCBhIGhpZGRlbiBwcm9wZXJ0eSBmb3Jcbi8vIGJpbmRpbmcgdi1tb2RlbCB0byBvYmplY3QgdmFsdWVzXG52YXIgbW9kZWxQcm9wcyA9IHtcbiAgdmFsdWU6ICdfdmFsdWUnLFxuICAndHJ1ZS12YWx1ZSc6ICdfdHJ1ZVZhbHVlJyxcbiAgJ2ZhbHNlLXZhbHVlJzogJ19mYWxzZVZhbHVlJ1xufTtcblxudmFyIGJpbmQkMSA9IHtcblxuICBwcmlvcml0eTogQklORCxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBhdHRyID0gdGhpcy5hcmc7XG4gICAgdmFyIHRhZyA9IHRoaXMuZWwudGFnTmFtZTtcbiAgICAvLyBzaG91bGQgYmUgZGVlcCB3YXRjaCBvbiBvYmplY3QgbW9kZVxuICAgIGlmICghYXR0cikge1xuICAgICAgdGhpcy5kZWVwID0gdHJ1ZTtcbiAgICB9XG4gICAgLy8gaGFuZGxlIGludGVycG9sYXRpb24gYmluZGluZ3NcbiAgICB2YXIgZGVzY3JpcHRvciA9IHRoaXMuZGVzY3JpcHRvcjtcbiAgICB2YXIgdG9rZW5zID0gZGVzY3JpcHRvci5pbnRlcnA7XG4gICAgaWYgKHRva2Vucykge1xuICAgICAgLy8gaGFuZGxlIGludGVycG9sYXRpb25zIHdpdGggb25lLXRpbWUgdG9rZW5zXG4gICAgICBpZiAoZGVzY3JpcHRvci5oYXNPbmVUaW1lKSB7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IHRva2Vuc1RvRXhwKHRva2VucywgdGhpcy5fc2NvcGUgfHwgdGhpcy52bSk7XG4gICAgICB9XG5cbiAgICAgIC8vIG9ubHkgYWxsb3cgYmluZGluZyBvbiBuYXRpdmUgYXR0cmlidXRlc1xuICAgICAgaWYgKGRpc2FsbG93ZWRJbnRlcnBBdHRyUkUudGVzdChhdHRyKSB8fCBhdHRyID09PSAnbmFtZScgJiYgKHRhZyA9PT0gJ1BBUlRJQUwnIHx8IHRhZyA9PT0gJ1NMT1QnKSkge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oYXR0ciArICc9XCInICsgZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyAnYXR0cmlidXRlIGludGVycG9sYXRpb24gaXMgbm90IGFsbG93ZWQgaW4gVnVlLmpzICcgKyAnZGlyZWN0aXZlcyBhbmQgc3BlY2lhbCBhdHRyaWJ1dGVzLicsIHRoaXMudm0pO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICAgICAgdGhpcy5pbnZhbGlkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YXIgcmF3ID0gYXR0ciArICc9XCInICsgZGVzY3JpcHRvci5yYXcgKyAnXCI6ICc7XG4gICAgICAgIC8vIHdhcm4gc3JjXG4gICAgICAgIGlmIChhdHRyID09PSAnc3JjJykge1xuICAgICAgICAgIHdhcm4ocmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzcmNcIiBhdHRyaWJ1dGUgd2lsbCBjYXVzZSAnICsgJ2EgNDA0IHJlcXVlc3QuIFVzZSB2LWJpbmQ6c3JjIGluc3RlYWQuJywgdGhpcy52bSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB3YXJuIHN0eWxlXG4gICAgICAgIGlmIChhdHRyID09PSAnc3R5bGUnKSB7XG4gICAgICAgICAgd2FybihyYXcgKyAnaW50ZXJwb2xhdGlvbiBpbiBcInN0eWxlXCIgYXR0cmlidXRlIHdpbGwgY2F1c2UgJyArICd0aGUgYXR0cmlidXRlIHRvIGJlIGRpc2NhcmRlZCBpbiBJbnRlcm5ldCBFeHBsb3Jlci4gJyArICdVc2Ugdi1iaW5kOnN0eWxlIGluc3RlYWQuJywgdGhpcy52bSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICBpZiAodGhpcy5pbnZhbGlkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBhdHRyID0gdGhpcy5hcmc7XG4gICAgaWYgKHRoaXMuYXJnKSB7XG4gICAgICB0aGlzLmhhbmRsZVNpbmdsZShhdHRyLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlIHx8IHt9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gc2hhcmUgb2JqZWN0IGhhbmRsZXIgd2l0aCB2LWJpbmQ6Y2xhc3NcbiAgaGFuZGxlT2JqZWN0OiBzdHlsZS5oYW5kbGVPYmplY3QsXG5cbiAgaGFuZGxlU2luZ2xlOiBmdW5jdGlvbiBoYW5kbGVTaW5nbGUoYXR0ciwgdmFsdWUpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciBpbnRlcnAgPSB0aGlzLmRlc2NyaXB0b3IuaW50ZXJwO1xuICAgIGlmICh0aGlzLm1vZGlmaWVycy5jYW1lbCkge1xuICAgICAgYXR0ciA9IGNhbWVsaXplKGF0dHIpO1xuICAgIH1cbiAgICBpZiAoIWludGVycCAmJiBhdHRyV2l0aFByb3BzUkUudGVzdChhdHRyKSAmJiBhdHRyIGluIGVsKSB7XG4gICAgICB2YXIgYXR0clZhbHVlID0gYXR0ciA9PT0gJ3ZhbHVlJyA/IHZhbHVlID09IG51bGwgLy8gSUU5IHdpbGwgc2V0IGlucHV0LnZhbHVlIHRvIFwibnVsbFwiIGZvciBudWxsLi4uXG4gICAgICA/ICcnIDogdmFsdWUgOiB2YWx1ZTtcblxuICAgICAgaWYgKGVsW2F0dHJdICE9PSBhdHRyVmFsdWUpIHtcbiAgICAgICAgZWxbYXR0cl0gPSBhdHRyVmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIHNldCBtb2RlbCBwcm9wc1xuICAgIHZhciBtb2RlbFByb3AgPSBtb2RlbFByb3BzW2F0dHJdO1xuICAgIGlmICghaW50ZXJwICYmIG1vZGVsUHJvcCkge1xuICAgICAgZWxbbW9kZWxQcm9wXSA9IHZhbHVlO1xuICAgICAgLy8gdXBkYXRlIHYtbW9kZWwgaWYgcHJlc2VudFxuICAgICAgdmFyIG1vZGVsID0gZWwuX192X21vZGVsO1xuICAgICAgaWYgKG1vZGVsKSB7XG4gICAgICAgIG1vZGVsLmxpc3RlbmVyKCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGRvIG5vdCBzZXQgdmFsdWUgYXR0cmlidXRlIGZvciB0ZXh0YXJlYVxuICAgIGlmIChhdHRyID09PSAndmFsdWUnICYmIGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gdXBkYXRlIGF0dHJpYnV0ZVxuICAgIGlmIChlbnVtZXJhdGVkQXR0clJFLnRlc3QoYXR0cikpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSA/ICd0cnVlJyA6ICdmYWxzZScpO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSAhPT0gZmFsc2UpIHtcbiAgICAgIGlmIChhdHRyID09PSAnY2xhc3MnKSB7XG4gICAgICAgIC8vIGhhbmRsZSBlZGdlIGNhc2UgIzE5NjA6XG4gICAgICAgIC8vIGNsYXNzIGludGVycG9sYXRpb24gc2hvdWxkIG5vdCBvdmVyd3JpdGUgVnVlIHRyYW5zaXRpb24gY2xhc3NcbiAgICAgICAgaWYgKGVsLl9fdl90cmFucykge1xuICAgICAgICAgIHZhbHVlICs9ICcgJyArIGVsLl9fdl90cmFucy5pZCArICctdHJhbnNpdGlvbic7XG4gICAgICAgIH1cbiAgICAgICAgc2V0Q2xhc3MoZWwsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoeGxpbmtSRS50ZXN0KGF0dHIpKSB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZU5TKHhsaW5rTlMsIGF0dHIsIHZhbHVlID09PSB0cnVlID8gJycgOiB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUgPT09IHRydWUgPyAnJyA6IHZhbHVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIGVsID0ge1xuXG4gIHByaW9yaXR5OiBFTCxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghdGhpcy5hcmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGlkID0gdGhpcy5pZCA9IGNhbWVsaXplKHRoaXMuYXJnKTtcbiAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kZWxzO1xuICAgIGlmIChoYXNPd24ocmVmcywgaWQpKSB7XG4gICAgICByZWZzW2lkXSA9IHRoaXMuZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlZmluZVJlYWN0aXZlKHJlZnMsIGlkLCB0aGlzLmVsKTtcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJGVscztcbiAgICBpZiAocmVmc1t0aGlzLmlkXSA9PT0gdGhpcy5lbCkge1xuICAgICAgcmVmc1t0aGlzLmlkXSA9IG51bGw7XG4gICAgfVxuICB9XG59O1xuXG52YXIgcmVmID0ge1xuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1yZWY6JyArIHRoaXMuYXJnICsgJyBtdXN0IGJlIHVzZWQgb24gYSBjaGlsZCAnICsgJ2NvbXBvbmVudC4gRm91bmQgb24gPCcgKyB0aGlzLmVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICc+LicsIHRoaXMudm0pO1xuICB9XG59O1xuXG52YXIgY2xvYWsgPSB7XG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB0aGlzLnZtLiRvbmNlKCdwcmUtaG9vazpjb21waWxlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgndi1jbG9haycpO1xuICAgIH0pO1xuICB9XG59O1xuXG4vLyBtdXN0IGV4cG9ydCBwbGFpbiBvYmplY3RcbnZhciBkaXJlY3RpdmVzID0ge1xuICB0ZXh0OiB0ZXh0JDEsXG4gIGh0bWw6IGh0bWwsXG4gICdmb3InOiB2Rm9yLFxuICAnaWYnOiB2SWYsXG4gIHNob3c6IHNob3csXG4gIG1vZGVsOiBtb2RlbCxcbiAgb246IG9uJDEsXG4gIGJpbmQ6IGJpbmQkMSxcbiAgZWw6IGVsLFxuICByZWY6IHJlZixcbiAgY2xvYWs6IGNsb2FrXG59O1xuXG52YXIgdkNsYXNzID0ge1xuXG4gIGRlZXA6IHRydWUsXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICB0aGlzLmNsZWFudXAoKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuc2V0Q2xhc3ModmFsdWUudHJpbSgpLnNwbGl0KC9cXHMrLykpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldENsYXNzKG5vcm1hbGl6ZSQxKHZhbHVlKSk7XG4gICAgfVxuICB9LFxuXG4gIHNldENsYXNzOiBmdW5jdGlvbiBzZXRDbGFzcyh2YWx1ZSkge1xuICAgIHRoaXMuY2xlYW51cCh2YWx1ZSk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciB2YWwgPSB2YWx1ZVtpXTtcbiAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgYXBwbHkodGhpcy5lbCwgdmFsLCBhZGRDbGFzcyk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucHJldktleXMgPSB2YWx1ZTtcbiAgfSxcblxuICBjbGVhbnVwOiBmdW5jdGlvbiBjbGVhbnVwKHZhbHVlKSB7XG4gICAgdmFyIHByZXZLZXlzID0gdGhpcy5wcmV2S2V5cztcbiAgICBpZiAoIXByZXZLZXlzKSByZXR1cm47XG4gICAgdmFyIGkgPSBwcmV2S2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFyIGtleSA9IHByZXZLZXlzW2ldO1xuICAgICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZS5pbmRleE9mKGtleSkgPCAwKSB7XG4gICAgICAgIGFwcGx5KHRoaXMuZWwsIGtleSwgcmVtb3ZlQ2xhc3MpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBOb3JtYWxpemUgb2JqZWN0cyBhbmQgYXJyYXlzIChwb3RlbnRpYWxseSBjb250YWluaW5nIG9iamVjdHMpXG4gKiBpbnRvIGFycmF5IG9mIHN0cmluZ3MuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXk8U3RyaW5nfE9iamVjdD59IHZhbHVlXG4gKiBAcmV0dXJuIHtBcnJheTxTdHJpbmc+fVxuICovXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZSQxKHZhbHVlKSB7XG4gIHZhciByZXMgPSBbXTtcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBfa2V5ID0gdmFsdWVbaV07XG4gICAgICBpZiAoX2tleSkge1xuICAgICAgICBpZiAodHlwZW9mIF9rZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcmVzLnB1c2goX2tleSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yICh2YXIgayBpbiBfa2V5KSB7XG4gICAgICAgICAgICBpZiAoX2tleVtrXSkgcmVzLnB1c2goayk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlW2tleV0pIHJlcy5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogQWRkIG9yIHJlbW92ZSBhIGNsYXNzL2NsYXNzZXMgb24gYW4gZWxlbWVudFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgVGhlIGNsYXNzIG5hbWUuIFRoaXMgbWF5IG9yIG1heSBub3RcbiAqICAgICAgICAgICAgICAgICAgICAgY29udGFpbiBhIHNwYWNlIGNoYXJhY3RlciwgaW4gc3VjaCBhXG4gKiAgICAgICAgICAgICAgICAgICAgIGNhc2Ugd2UnbGwgZGVhbCB3aXRoIG11bHRpcGxlIGNsYXNzXG4gKiAgICAgICAgICAgICAgICAgICAgIG5hbWVzIGF0IG9uY2UuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5cbmZ1bmN0aW9uIGFwcGx5KGVsLCBrZXksIGZuKSB7XG4gIGtleSA9IGtleS50cmltKCk7XG4gIGlmIChrZXkuaW5kZXhPZignICcpID09PSAtMSkge1xuICAgIGZuKGVsLCBrZXkpO1xuICAgIHJldHVybjtcbiAgfVxuICAvLyBUaGUga2V5IGNvbnRhaW5zIG9uZSBvciBtb3JlIHNwYWNlIGNoYXJhY3RlcnMuXG4gIC8vIFNpbmNlIGEgY2xhc3MgbmFtZSBkb2Vzbid0IGFjY2VwdCBzdWNoIGNoYXJhY3RlcnMsIHdlXG4gIC8vIHRyZWF0IGl0IGFzIG11bHRpcGxlIGNsYXNzZXMuXG4gIHZhciBrZXlzID0ga2V5LnNwbGl0KC9cXHMrLyk7XG4gIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBmbihlbCwga2V5c1tpXSk7XG4gIH1cbn1cblxudmFyIGNvbXBvbmVudCA9IHtcblxuICBwcmlvcml0eTogQ09NUE9ORU5ULFxuXG4gIHBhcmFtczogWydrZWVwLWFsaXZlJywgJ3RyYW5zaXRpb24tbW9kZScsICdpbmxpbmUtdGVtcGxhdGUnXSxcblxuICAvKipcbiAgICogU2V0dXAuIFR3byBwb3NzaWJsZSB1c2FnZXM6XG4gICAqXG4gICAqIC0gc3RhdGljOlxuICAgKiAgIDxjb21wPiBvciA8ZGl2IHYtY29tcG9uZW50PVwiY29tcFwiPlxuICAgKlxuICAgKiAtIGR5bmFtaWM6XG4gICAqICAgPGNvbXBvbmVudCA6aXM9XCJ2aWV3XCI+XG4gICAqL1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgaWYgKCF0aGlzLmVsLl9fdnVlX18pIHtcbiAgICAgIC8vIGtlZXAtYWxpdmUgY2FjaGVcbiAgICAgIHRoaXMua2VlcEFsaXZlID0gdGhpcy5wYXJhbXMua2VlcEFsaXZlO1xuICAgICAgaWYgKHRoaXMua2VlcEFsaXZlKSB7XG4gICAgICAgIHRoaXMuY2FjaGUgPSB7fTtcbiAgICAgIH1cbiAgICAgIC8vIGNoZWNrIGlubGluZS10ZW1wbGF0ZVxuICAgICAgaWYgKHRoaXMucGFyYW1zLmlubGluZVRlbXBsYXRlKSB7XG4gICAgICAgIC8vIGV4dHJhY3QgaW5saW5lIHRlbXBsYXRlIGFzIGEgRG9jdW1lbnRGcmFnbWVudFxuICAgICAgICB0aGlzLmlubGluZVRlbXBsYXRlID0gZXh0cmFjdENvbnRlbnQodGhpcy5lbCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgICAvLyBjb21wb25lbnQgcmVzb2x1dGlvbiByZWxhdGVkIHN0YXRlXG4gICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IHRoaXMuQ29tcG9uZW50ID0gbnVsbDtcbiAgICAgIC8vIHRyYW5zaXRpb24gcmVsYXRlZCBzdGF0ZVxuICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbHMgPSAwO1xuICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbENiID0gbnVsbDtcbiAgICAgIC8vIGNyZWF0ZSBhIHJlZiBhbmNob3JcbiAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWNvbXBvbmVudCcpO1xuICAgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG4gICAgICAvLyByZW1vdmUgaXMgYXR0cmlidXRlLlxuICAgICAgLy8gdGhpcyBpcyByZW1vdmVkIGR1cmluZyBjb21waWxhdGlvbiwgYnV0IGJlY2F1c2UgY29tcGlsYXRpb24gaXNcbiAgICAgIC8vIGNhY2hlZCwgd2hlbiB0aGUgY29tcG9uZW50IGlzIHVzZWQgZWxzZXdoZXJlIHRoaXMgYXR0cmlidXRlXG4gICAgICAvLyB3aWxsIHJlbWFpbiBhdCBsaW5rIHRpbWUuXG4gICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnaXMnKTtcbiAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCc6aXMnKTtcbiAgICAgIC8vIHJlbW92ZSByZWYsIHNhbWUgYXMgYWJvdmVcbiAgICAgIGlmICh0aGlzLmRlc2NyaXB0b3IucmVmKSB7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCd2LXJlZjonICsgaHlwaGVuYXRlKHRoaXMuZGVzY3JpcHRvci5yZWYpKTtcbiAgICAgIH1cbiAgICAgIC8vIGlmIHN0YXRpYywgYnVpbGQgcmlnaHQgbm93LlxuICAgICAgaWYgKHRoaXMubGl0ZXJhbCkge1xuICAgICAgICB0aGlzLnNldENvbXBvbmVudCh0aGlzLmV4cHJlc3Npb24pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ2Nhbm5vdCBtb3VudCBjb21wb25lbnQgXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiICcgKyAnb24gYWxyZWFkeSBtb3VudGVkIGVsZW1lbnQ6ICcgKyB0aGlzLmVsKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFB1YmxpYyB1cGRhdGUsIGNhbGxlZCBieSB0aGUgd2F0Y2hlciBpbiB0aGUgZHluYW1pY1xuICAgKiBsaXRlcmFsIHNjZW5hcmlvLCBlLmcuIDxjb21wb25lbnQgOmlzPVwidmlld1wiPlxuICAgKi9cblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIGlmICghdGhpcy5saXRlcmFsKSB7XG4gICAgICB0aGlzLnNldENvbXBvbmVudCh2YWx1ZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBTd2l0Y2ggZHluYW1pYyBjb21wb25lbnRzLiBNYXkgcmVzb2x2ZSB0aGUgY29tcG9uZW50XG4gICAqIGFzeW5jaHJvbm91c2x5LCBhbmQgcGVyZm9ybSB0cmFuc2l0aW9uIGJhc2VkIG9uXG4gICAqIHNwZWNpZmllZCB0cmFuc2l0aW9uIG1vZGUuIEFjY2VwdHMgYSBmZXcgYWRkaXRpb25hbFxuICAgKiBhcmd1bWVudHMgc3BlY2lmaWNhbGx5IGZvciB2dWUtcm91dGVyLlxuICAgKlxuICAgKiBUaGUgY2FsbGJhY2sgaXMgY2FsbGVkIHdoZW4gdGhlIGZ1bGwgdHJhbnNpdGlvbiBpc1xuICAgKiBmaW5pc2hlZC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgc2V0Q29tcG9uZW50OiBmdW5jdGlvbiBzZXRDb21wb25lbnQodmFsdWUsIGNiKSB7XG4gICAgdGhpcy5pbnZhbGlkYXRlUGVuZGluZygpO1xuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIC8vIGp1c3QgcmVtb3ZlIGN1cnJlbnRcbiAgICAgIHRoaXMudW5idWlsZCh0cnVlKTtcbiAgICAgIHRoaXMucmVtb3ZlKHRoaXMuY2hpbGRWTSwgY2IpO1xuICAgICAgdGhpcy5jaGlsZFZNID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdGhpcy5yZXNvbHZlQ29tcG9uZW50KHZhbHVlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYubW91bnRDb21wb25lbnQoY2IpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZXNvbHZlIHRoZSBjb21wb25lbnQgY29uc3RydWN0b3IgdG8gdXNlIHdoZW4gY3JlYXRpbmdcbiAgICogdGhlIGNoaWxkIHZtLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gdmFsdWVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICovXG5cbiAgcmVzb2x2ZUNvbXBvbmVudDogZnVuY3Rpb24gcmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgY2IpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSBjYW5jZWxsYWJsZShmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gICAgICBzZWxmLkNvbXBvbmVudE5hbWUgPSBDb21wb25lbnQub3B0aW9ucy5uYW1lIHx8ICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBudWxsKTtcbiAgICAgIHNlbGYuQ29tcG9uZW50ID0gQ29tcG9uZW50O1xuICAgICAgY2IoKTtcbiAgICB9KTtcbiAgICB0aGlzLnZtLl9yZXNvbHZlQ29tcG9uZW50KHZhbHVlLCB0aGlzLnBlbmRpbmdDb21wb25lbnRDYik7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSB1c2luZyB0aGUgY3VycmVudCBjb25zdHJ1Y3RvciBhbmRcbiAgICogcmVwbGFjZSB0aGUgZXhpc3RpbmcgaW5zdGFuY2UuIFRoaXMgbWV0aG9kIGRvZXNuJ3QgY2FyZVxuICAgKiB3aGV0aGVyIHRoZSBuZXcgY29tcG9uZW50IGFuZCB0aGUgb2xkIG9uZSBhcmUgYWN0dWFsbHlcbiAgICogdGhlIHNhbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIG1vdW50Q29tcG9uZW50KGNiKSB7XG4gICAgLy8gYWN0dWFsIG1vdW50XG4gICAgdGhpcy51bmJ1aWxkKHRydWUpO1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgYWN0aXZhdGVIb29rcyA9IHRoaXMuQ29tcG9uZW50Lm9wdGlvbnMuYWN0aXZhdGU7XG4gICAgdmFyIGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkKCk7XG4gICAgdmFyIG5ld0NvbXBvbmVudCA9IHRoaXMuYnVpbGQoKTtcbiAgICBpZiAoYWN0aXZhdGVIb29rcyAmJiAhY2FjaGVkKSB7XG4gICAgICB0aGlzLndhaXRpbmdGb3IgPSBuZXdDb21wb25lbnQ7XG4gICAgICBjYWxsQWN0aXZhdGVIb29rcyhhY3RpdmF0ZUhvb2tzLCBuZXdDb21wb25lbnQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlbGYud2FpdGluZ0ZvciAhPT0gbmV3Q29tcG9uZW50KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYud2FpdGluZ0ZvciA9IG51bGw7XG4gICAgICAgIHNlbGYudHJhbnNpdGlvbihuZXdDb21wb25lbnQsIGNiKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB1cGRhdGUgcmVmIGZvciBrZXB0LWFsaXZlIGNvbXBvbmVudFxuICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICBuZXdDb21wb25lbnQuX3VwZGF0ZVJlZigpO1xuICAgICAgfVxuICAgICAgdGhpcy50cmFuc2l0aW9uKG5ld0NvbXBvbmVudCwgY2IpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogV2hlbiB0aGUgY29tcG9uZW50IGNoYW5nZXMgb3IgdW5iaW5kcyBiZWZvcmUgYW4gYXN5bmNcbiAgICogY29uc3RydWN0b3IgaXMgcmVzb2x2ZWQsIHdlIG5lZWQgdG8gaW52YWxpZGF0ZSBpdHNcbiAgICogcGVuZGluZyBjYWxsYmFjay5cbiAgICovXG5cbiAgaW52YWxpZGF0ZVBlbmRpbmc6IGZ1bmN0aW9uIGludmFsaWRhdGVQZW5kaW5nKCkge1xuICAgIGlmICh0aGlzLnBlbmRpbmdDb21wb25lbnRDYikge1xuICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IuY2FuY2VsKCk7XG4gICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IG51bGw7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBJbnN0YW50aWF0ZS9pbnNlcnQgYSBuZXcgY2hpbGQgdm0uXG4gICAqIElmIGtlZXAgYWxpdmUgYW5kIGhhcyBjYWNoZWQgaW5zdGFuY2UsIGluc2VydCB0aGF0XG4gICAqIGluc3RhbmNlOyBvdGhlcndpc2UgYnVpbGQgYSBuZXcgb25lIGFuZCBjYWNoZSBpdC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtleHRyYU9wdGlvbnNdXG4gICAqIEByZXR1cm4ge1Z1ZX0gLSB0aGUgY3JlYXRlZCBpbnN0YW5jZVxuICAgKi9cblxuICBidWlsZDogZnVuY3Rpb24gYnVpbGQoZXh0cmFPcHRpb25zKSB7XG4gICAgdmFyIGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkKCk7XG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICB9XG4gICAgaWYgKHRoaXMuQ29tcG9uZW50KSB7XG4gICAgICAvLyBkZWZhdWx0IG9wdGlvbnNcbiAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICBuYW1lOiB0aGlzLkNvbXBvbmVudE5hbWUsXG4gICAgICAgIGVsOiBjbG9uZU5vZGUodGhpcy5lbCksXG4gICAgICAgIHRlbXBsYXRlOiB0aGlzLmlubGluZVRlbXBsYXRlLFxuICAgICAgICAvLyBtYWtlIHN1cmUgdG8gYWRkIHRoZSBjaGlsZCB3aXRoIGNvcnJlY3QgcGFyZW50XG4gICAgICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGl0cyBwYXJlbnRcbiAgICAgICAgLy8gc2hvdWxkIGJlIHRoZSB0cmFuc2NsdXNpb24gaG9zdC5cbiAgICAgICAgcGFyZW50OiB0aGlzLl9ob3N0IHx8IHRoaXMudm0sXG4gICAgICAgIC8vIGlmIG5vIGlubGluZS10ZW1wbGF0ZSwgdGhlbiB0aGUgY29tcGlsZWRcbiAgICAgICAgLy8gbGlua2VyIGNhbiBiZSBjYWNoZWQgZm9yIGJldHRlciBwZXJmb3JtYW5jZS5cbiAgICAgICAgX2xpbmtlckNhY2hhYmxlOiAhdGhpcy5pbmxpbmVUZW1wbGF0ZSxcbiAgICAgICAgX3JlZjogdGhpcy5kZXNjcmlwdG9yLnJlZixcbiAgICAgICAgX2FzQ29tcG9uZW50OiB0cnVlLFxuICAgICAgICBfaXNSb3V0ZXJWaWV3OiB0aGlzLl9pc1JvdXRlclZpZXcsXG4gICAgICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGNvbnRleHRcbiAgICAgICAgLy8gd2lsbCBiZSB0aGUgY29tbW9uIHBhcmVudCB2bSBvZiB0aGlzIGluc3RhbmNlXG4gICAgICAgIC8vIGFuZCBpdHMgaG9zdC5cbiAgICAgICAgX2NvbnRleHQ6IHRoaXMudm0sXG4gICAgICAgIC8vIGlmIHRoaXMgaXMgaW5zaWRlIGFuIGlubGluZSB2LWZvciwgdGhlIHNjb3BlXG4gICAgICAgIC8vIHdpbGwgYmUgdGhlIGludGVybWVkaWF0ZSBzY29wZSBjcmVhdGVkIGZvciB0aGlzXG4gICAgICAgIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXG4gICAgICAgIC8vIGFuZCBjb250YWluZXIgZGlyZWN0aXZlcy5cbiAgICAgICAgX3Njb3BlOiB0aGlzLl9zY29wZSxcbiAgICAgICAgLy8gcGFzcyBpbiB0aGUgb3duZXIgZnJhZ21lbnQgb2YgdGhpcyBjb21wb25lbnQuXG4gICAgICAgIC8vIHRoaXMgaXMgbmVjZXNzYXJ5IHNvIHRoYXQgdGhlIGZyYWdtZW50IGNhbiBrZWVwXG4gICAgICAgIC8vIHRyYWNrIG9mIGl0cyBjb250YWluZWQgY29tcG9uZW50cyBpbiBvcmRlciB0b1xuICAgICAgICAvLyBjYWxsIGF0dGFjaC9kZXRhY2ggaG9va3MgZm9yIHRoZW0uXG4gICAgICAgIF9mcmFnOiB0aGlzLl9mcmFnXG4gICAgICB9O1xuICAgICAgLy8gZXh0cmEgb3B0aW9uc1xuICAgICAgLy8gaW4gMS4wLjAgdGhpcyBpcyB1c2VkIGJ5IHZ1ZS1yb3V0ZXIgb25seVxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoZXh0cmFPcHRpb25zKSB7XG4gICAgICAgIGV4dGVuZChvcHRpb25zLCBleHRyYU9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgdmFyIGNoaWxkID0gbmV3IHRoaXMuQ29tcG9uZW50KG9wdGlvbnMpO1xuICAgICAgaWYgKHRoaXMua2VlcEFsaXZlKSB7XG4gICAgICAgIHRoaXMuY2FjaGVbdGhpcy5Db21wb25lbnQuY2lkXSA9IGNoaWxkO1xuICAgICAgfVxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsLmhhc0F0dHJpYnV0ZSgndHJhbnNpdGlvbicpICYmIGNoaWxkLl9pc0ZyYWdtZW50KSB7XG4gICAgICAgIHdhcm4oJ1RyYW5zaXRpb25zIHdpbGwgbm90IHdvcmsgb24gYSBmcmFnbWVudCBpbnN0YW5jZS4gJyArICdUZW1wbGF0ZTogJyArIGNoaWxkLiRvcHRpb25zLnRlbXBsYXRlLCBjaGlsZCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBUcnkgdG8gZ2V0IGEgY2FjaGVkIGluc3RhbmNlIG9mIHRoZSBjdXJyZW50IGNvbXBvbmVudC5cbiAgICpcbiAgICogQHJldHVybiB7VnVlfHVuZGVmaW5lZH1cbiAgICovXG5cbiAgZ2V0Q2FjaGVkOiBmdW5jdGlvbiBnZXRDYWNoZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMua2VlcEFsaXZlICYmIHRoaXMuY2FjaGVbdGhpcy5Db21wb25lbnQuY2lkXTtcbiAgfSxcblxuICAvKipcbiAgICogVGVhcmRvd24gdGhlIGN1cnJlbnQgY2hpbGQsIGJ1dCBkZWZlcnMgY2xlYW51cCBzb1xuICAgKiB0aGF0IHdlIGNhbiBzZXBhcmF0ZSB0aGUgZGVzdHJveSBhbmQgcmVtb3ZhbCBzdGVwcy5cbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSBkZWZlclxuICAgKi9cblxuICB1bmJ1aWxkOiBmdW5jdGlvbiB1bmJ1aWxkKGRlZmVyKSB7XG4gICAgaWYgKHRoaXMud2FpdGluZ0Zvcikge1xuICAgICAgaWYgKCF0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgICB0aGlzLndhaXRpbmdGb3IuJGRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICAgIHRoaXMud2FpdGluZ0ZvciA9IG51bGw7XG4gICAgfVxuICAgIHZhciBjaGlsZCA9IHRoaXMuY2hpbGRWTTtcbiAgICBpZiAoIWNoaWxkIHx8IHRoaXMua2VlcEFsaXZlKSB7XG4gICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgLy8gcmVtb3ZlIHJlZlxuICAgICAgICBjaGlsZC5faW5hY3RpdmUgPSB0cnVlO1xuICAgICAgICBjaGlsZC5fdXBkYXRlUmVmKHRydWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyB0aGUgc29sZSBwdXJwb3NlIG9mIGBkZWZlckNsZWFudXBgIGlzIHNvIHRoYXQgd2UgY2FuXG4gICAgLy8gXCJkZWFjdGl2YXRlXCIgdGhlIHZtIHJpZ2h0IG5vdyBhbmQgcGVyZm9ybSBET00gcmVtb3ZhbFxuICAgIC8vIGxhdGVyLlxuICAgIGNoaWxkLiRkZXN0cm95KGZhbHNlLCBkZWZlcik7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZSBjdXJyZW50IGRlc3Ryb3llZCBjaGlsZCBhbmQgbWFudWFsbHkgZG9cbiAgICogdGhlIGNsZWFudXAgYWZ0ZXIgcmVtb3ZhbC5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICovXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoY2hpbGQsIGNiKSB7XG4gICAgdmFyIGtlZXBBbGl2ZSA9IHRoaXMua2VlcEFsaXZlO1xuICAgIGlmIChjaGlsZCkge1xuICAgICAgLy8gd2UgbWF5IGhhdmUgYSBjb21wb25lbnQgc3dpdGNoIHdoZW4gYSBwcmV2aW91c1xuICAgICAgLy8gY29tcG9uZW50IGlzIHN0aWxsIGJlaW5nIHRyYW5zaXRpb25lZCBvdXQuXG4gICAgICAvLyB3ZSB3YW50IHRvIHRyaWdnZXIgb25seSBvbmUgbGFzdGVzdCBpbnNlcnRpb24gY2JcbiAgICAgIC8vIHdoZW4gdGhlIGV4aXN0aW5nIHRyYW5zaXRpb24gZmluaXNoZXMuICgjMTExOSlcbiAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxzKys7XG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsQ2IgPSBjYjtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIGNoaWxkLiRyZW1vdmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFscy0tO1xuICAgICAgICBpZiAoIWtlZXBBbGl2ZSkgY2hpbGQuX2NsZWFudXAoKTtcbiAgICAgICAgaWYgKCFzZWxmLnBlbmRpbmdSZW1vdmFscyAmJiBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IpIHtcbiAgICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IoKTtcbiAgICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGNiKSB7XG4gICAgICBjYigpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQWN0dWFsbHkgc3dhcCB0aGUgY29tcG9uZW50cywgZGVwZW5kaW5nIG9uIHRoZVxuICAgKiB0cmFuc2l0aW9uIG1vZGUuIERlZmF1bHRzIHRvIHNpbXVsdGFuZW91cy5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIHRyYW5zaXRpb246IGZ1bmN0aW9uIHRyYW5zaXRpb24odGFyZ2V0LCBjYikge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgY3VycmVudCA9IHRoaXMuY2hpbGRWTTtcbiAgICAvLyBmb3IgZGV2dG9vbCBpbnNwZWN0aW9uXG4gICAgaWYgKGN1cnJlbnQpIGN1cnJlbnQuX2luYWN0aXZlID0gdHJ1ZTtcbiAgICB0YXJnZXQuX2luYWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5jaGlsZFZNID0gdGFyZ2V0O1xuICAgIHN3aXRjaCAoc2VsZi5wYXJhbXMudHJhbnNpdGlvbk1vZGUpIHtcbiAgICAgIGNhc2UgJ2luLW91dCc6XG4gICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCwgY2IpO1xuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdvdXQtaW4nOlxuICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGNiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCk7XG4gICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBjYik7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBVbmJpbmQuXG4gICAqL1xuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHRoaXMuaW52YWxpZGF0ZVBlbmRpbmcoKTtcbiAgICAvLyBEbyBub3QgZGVmZXIgY2xlYW51cCB3aGVuIHVuYmluZGluZ1xuICAgIHRoaXMudW5idWlsZCgpO1xuICAgIC8vIGRlc3Ryb3kgYWxsIGtlZXAtYWxpdmUgY2FjaGVkIGluc3RhbmNlc1xuICAgIGlmICh0aGlzLmNhY2hlKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jYWNoZSkge1xuICAgICAgICB0aGlzLmNhY2hlW2tleV0uJGRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2FjaGUgPSBudWxsO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBDYWxsIGFjdGl2YXRlIGhvb2tzIGluIG9yZGVyIChhc3luY2hyb25vdXMpXG4gKlxuICogQHBhcmFtIHtBcnJheX0gaG9va3NcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuXG5mdW5jdGlvbiBjYWxsQWN0aXZhdGVIb29rcyhob29rcywgdm0sIGNiKSB7XG4gIHZhciB0b3RhbCA9IGhvb2tzLmxlbmd0aDtcbiAgdmFyIGNhbGxlZCA9IDA7XG4gIGhvb2tzWzBdLmNhbGwodm0sIG5leHQpO1xuICBmdW5jdGlvbiBuZXh0KCkge1xuICAgIGlmICgrK2NhbGxlZCA+PSB0b3RhbCkge1xuICAgICAgY2IoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaG9va3NbY2FsbGVkXS5jYWxsKHZtLCBuZXh0KTtcbiAgICB9XG4gIH1cbn1cblxudmFyIHByb3BCaW5kaW5nTW9kZXMgPSBjb25maWcuX3Byb3BCaW5kaW5nTW9kZXM7XG52YXIgZW1wdHkgPSB7fTtcblxuLy8gcmVnZXhlc1xudmFyIGlkZW50UkUkMSA9IC9eWyRfYS16QS1aXStbXFx3JF0qJC87XG52YXIgc2V0dGFibGVQYXRoUkUgPSAvXltBLVphLXpfJF1bXFx3JF0qKFxcLltBLVphLXpfJF1bXFx3JF0qfFxcW1teXFxbXFxdXStcXF0pKiQvO1xuXG4vKipcbiAqIENvbXBpbGUgcHJvcHMgb24gYSByb290IGVsZW1lbnQgYW5kIHJldHVyblxuICogYSBwcm9wcyBsaW5rIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuICogQHBhcmFtIHtBcnJheX0gcHJvcE9wdGlvbnNcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHJldHVybiB7RnVuY3Rpb259IHByb3BzTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZVByb3BzKGVsLCBwcm9wT3B0aW9ucywgdm0pIHtcbiAgdmFyIHByb3BzID0gW107XG4gIHZhciBuYW1lcyA9IE9iamVjdC5rZXlzKHByb3BPcHRpb25zKTtcbiAgdmFyIGkgPSBuYW1lcy5sZW5ndGg7XG4gIHZhciBvcHRpb25zLCBuYW1lLCBhdHRyLCB2YWx1ZSwgcGF0aCwgcGFyc2VkLCBwcm9wO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgbmFtZSA9IG5hbWVzW2ldO1xuICAgIG9wdGlvbnMgPSBwcm9wT3B0aW9uc1tuYW1lXSB8fCBlbXB0eTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG5hbWUgPT09ICckZGF0YScpIHtcbiAgICAgIHdhcm4oJ0RvIG5vdCB1c2UgJGRhdGEgYXMgcHJvcC4nLCB2bSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBwcm9wcyBjb3VsZCBjb250YWluIGRhc2hlcywgd2hpY2ggd2lsbCBiZVxuICAgIC8vIGludGVycHJldGVkIGFzIG1pbnVzIGNhbGN1bGF0aW9ucyBieSB0aGUgcGFyc2VyXG4gICAgLy8gc28gd2UgbmVlZCB0byBjYW1lbGl6ZSB0aGUgcGF0aCBoZXJlXG4gICAgcGF0aCA9IGNhbWVsaXplKG5hbWUpO1xuICAgIGlmICghaWRlbnRSRSQxLnRlc3QocGF0aCkpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBwcm9wIGtleTogXCInICsgbmFtZSArICdcIi4gUHJvcCBrZXlzICcgKyAnbXVzdCBiZSB2YWxpZCBpZGVudGlmaWVycy4nLCB2bSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBwcm9wID0ge1xuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIHBhdGg6IHBhdGgsXG4gICAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgICAgbW9kZTogcHJvcEJpbmRpbmdNb2Rlcy5PTkVfV0FZLFxuICAgICAgcmF3OiBudWxsXG4gICAgfTtcblxuICAgIGF0dHIgPSBoeXBoZW5hdGUobmFtZSk7XG4gICAgLy8gZmlyc3QgY2hlY2sgZHluYW1pYyB2ZXJzaW9uXG4gICAgaWYgKCh2YWx1ZSA9IGdldEJpbmRBdHRyKGVsLCBhdHRyKSkgPT09IG51bGwpIHtcbiAgICAgIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0ciArICcuc3luYycpKSAhPT0gbnVsbCkge1xuICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVk7XG4gICAgICB9IGVsc2UgaWYgKCh2YWx1ZSA9IGdldEJpbmRBdHRyKGVsLCBhdHRyICsgJy5vbmNlJykpICE9PSBudWxsKSB7XG4gICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuT05FX1RJTUU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgLy8gaGFzIGR5bmFtaWMgYmluZGluZyFcbiAgICAgIHByb3AucmF3ID0gdmFsdWU7XG4gICAgICBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG4gICAgICB2YWx1ZSA9IHBhcnNlZC5leHByZXNzaW9uO1xuICAgICAgcHJvcC5maWx0ZXJzID0gcGFyc2VkLmZpbHRlcnM7XG4gICAgICAvLyBjaGVjayBiaW5kaW5nIHR5cGVcbiAgICAgIGlmIChpc0xpdGVyYWwodmFsdWUpICYmICFwYXJzZWQuZmlsdGVycykge1xuICAgICAgICAvLyBmb3IgZXhwcmVzc2lvbnMgY29udGFpbmluZyBsaXRlcmFsIG51bWJlcnMgYW5kXG4gICAgICAgIC8vIGJvb2xlYW5zLCB0aGVyZSdzIG5vIG5lZWQgdG8gc2V0dXAgYSBwcm9wIGJpbmRpbmcsXG4gICAgICAgIC8vIHNvIHdlIGNhbiBvcHRpbWl6ZSB0aGVtIGFzIGEgb25lLXRpbWUgc2V0LlxuICAgICAgICBwcm9wLm9wdGltaXplZExpdGVyYWwgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvcC5keW5hbWljID0gdHJ1ZTtcbiAgICAgICAgLy8gY2hlY2sgbm9uLXNldHRhYmxlIHBhdGggZm9yIHR3by13YXkgYmluZGluZ3NcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgcHJvcC5tb2RlID09PSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVkgJiYgIXNldHRhYmxlUGF0aFJFLnRlc3QodmFsdWUpKSB7XG4gICAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfV0FZO1xuICAgICAgICAgIHdhcm4oJ0Nhbm5vdCBiaW5kIHR3by13YXkgcHJvcCB3aXRoIG5vbi1zZXR0YWJsZSAnICsgJ3BhcmVudCBwYXRoOiAnICsgdmFsdWUsIHZtKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcHJvcC5wYXJlbnRQYXRoID0gdmFsdWU7XG5cbiAgICAgIC8vIHdhcm4gcmVxdWlyZWQgdHdvLXdheVxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgb3B0aW9ucy50d29XYXkgJiYgcHJvcC5tb2RlICE9PSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVkpIHtcbiAgICAgICAgd2FybignUHJvcCBcIicgKyBuYW1lICsgJ1wiIGV4cGVjdHMgYSB0d28td2F5IGJpbmRpbmcgdHlwZS4nLCB2bSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgodmFsdWUgPSBnZXRBdHRyKGVsLCBhdHRyKSkgIT09IG51bGwpIHtcbiAgICAgIC8vIGhhcyBsaXRlcmFsIGJpbmRpbmchXG4gICAgICBwcm9wLnJhdyA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gY2hlY2sgcG9zc2libGUgY2FtZWxDYXNlIHByb3AgdXNhZ2VcbiAgICAgIHZhciBsb3dlckNhc2VOYW1lID0gcGF0aC50b0xvd2VyQ2FzZSgpO1xuICAgICAgdmFsdWUgPSAvW0EtWlxcLV0vLnRlc3QobmFtZSkgJiYgKGVsLmdldEF0dHJpYnV0ZShsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCd2LWJpbmQ6JyArIGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lICsgJy5vbmNlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCd2LWJpbmQ6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLm9uY2UnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSArICcuc3luYycpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lICsgJy5zeW5jJykpO1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHdhcm4oJ1Bvc3NpYmxlIHVzYWdlIGVycm9yIGZvciBwcm9wIGAnICsgbG93ZXJDYXNlTmFtZSArICdgIC0gJyArICdkaWQgeW91IG1lYW4gYCcgKyBhdHRyICsgJ2A/IEhUTUwgaXMgY2FzZS1pbnNlbnNpdGl2ZSwgcmVtZW1iZXIgdG8gdXNlICcgKyAna2ViYWItY2FzZSBmb3IgcHJvcHMgaW4gdGVtcGxhdGVzLicsIHZtKTtcbiAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5yZXF1aXJlZCkge1xuICAgICAgICAvLyB3YXJuIG1pc3NpbmcgcmVxdWlyZWRcbiAgICAgICAgd2FybignTWlzc2luZyByZXF1aXJlZCBwcm9wOiAnICsgbmFtZSwgdm0pO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBwdXNoIHByb3BcbiAgICBwcm9wcy5wdXNoKHByb3ApO1xuICB9XG4gIHJldHVybiBtYWtlUHJvcHNMaW5rRm4ocHJvcHMpO1xufVxuXG4vKipcbiAqIEJ1aWxkIGEgZnVuY3Rpb24gdGhhdCBhcHBsaWVzIHByb3BzIHRvIGEgdm0uXG4gKlxuICogQHBhcmFtIHtBcnJheX0gcHJvcHNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBwcm9wc0xpbmtGblxuICovXG5cbmZ1bmN0aW9uIG1ha2VQcm9wc0xpbmtGbihwcm9wcykge1xuICByZXR1cm4gZnVuY3Rpb24gcHJvcHNMaW5rRm4odm0sIHNjb3BlKSB7XG4gICAgLy8gc3RvcmUgcmVzb2x2ZWQgcHJvcHMgaW5mb1xuICAgIHZtLl9wcm9wcyA9IHt9O1xuICAgIHZhciBpbmxpbmVQcm9wcyA9IHZtLiRvcHRpb25zLnByb3BzRGF0YTtcbiAgICB2YXIgaSA9IHByb3BzLmxlbmd0aDtcbiAgICB2YXIgcHJvcCwgcGF0aCwgb3B0aW9ucywgdmFsdWUsIHJhdztcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBwcm9wID0gcHJvcHNbaV07XG4gICAgICByYXcgPSBwcm9wLnJhdztcbiAgICAgIHBhdGggPSBwcm9wLnBhdGg7XG4gICAgICBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xuICAgICAgdm0uX3Byb3BzW3BhdGhdID0gcHJvcDtcbiAgICAgIGlmIChpbmxpbmVQcm9wcyAmJiBoYXNPd24oaW5saW5lUHJvcHMsIHBhdGgpKSB7XG4gICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCBpbmxpbmVQcm9wc1twYXRoXSk7XG4gICAgICB9aWYgKHJhdyA9PT0gbnVsbCkge1xuICAgICAgICAvLyBpbml0aWFsaXplIGFic2VudCBwcm9wXG4gICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB1bmRlZmluZWQpO1xuICAgICAgfSBlbHNlIGlmIChwcm9wLmR5bmFtaWMpIHtcbiAgICAgICAgLy8gZHluYW1pYyBwcm9wXG4gICAgICAgIGlmIChwcm9wLm1vZGUgPT09IHByb3BCaW5kaW5nTW9kZXMuT05FX1RJTUUpIHtcbiAgICAgICAgICAvLyBvbmUgdGltZSBiaW5kaW5nXG4gICAgICAgICAgdmFsdWUgPSAoc2NvcGUgfHwgdm0uX2NvbnRleHQgfHwgdm0pLiRnZXQocHJvcC5wYXJlbnRQYXRoKTtcbiAgICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh2bS5fY29udGV4dCkge1xuICAgICAgICAgICAgLy8gZHluYW1pYyBiaW5kaW5nXG4gICAgICAgICAgICB2bS5fYmluZERpcih7XG4gICAgICAgICAgICAgIG5hbWU6ICdwcm9wJyxcbiAgICAgICAgICAgICAgZGVmOiBwcm9wRGVmLFxuICAgICAgICAgICAgICBwcm9wOiBwcm9wXG4gICAgICAgICAgICB9LCBudWxsLCBudWxsLCBzY29wZSk7IC8vIGVsLCBob3N0LCBzY29wZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIHJvb3QgaW5zdGFuY2VcbiAgICAgICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZtLiRnZXQocHJvcC5wYXJlbnRQYXRoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocHJvcC5vcHRpbWl6ZWRMaXRlcmFsKSB7XG4gICAgICAgIC8vIG9wdGltaXplZCBsaXRlcmFsLCBjYXN0IGl0IGFuZCBqdXN0IHNldCBvbmNlXG4gICAgICAgIHZhciBzdHJpcHBlZCA9IHN0cmlwUXVvdGVzKHJhdyk7XG4gICAgICAgIHZhbHVlID0gc3RyaXBwZWQgPT09IHJhdyA/IHRvQm9vbGVhbih0b051bWJlcihyYXcpKSA6IHN0cmlwcGVkO1xuICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc3RyaW5nIGxpdGVyYWwsIGJ1dCB3ZSBuZWVkIHRvIGNhdGVyIGZvclxuICAgICAgICAvLyBCb29sZWFuIHByb3BzIHdpdGggbm8gdmFsdWUsIG9yIHdpdGggc2FtZVxuICAgICAgICAvLyBsaXRlcmFsIHZhbHVlIChlLmcuIGRpc2FibGVkPVwiZGlzYWJsZWRcIilcbiAgICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtbG9hZGVyL2lzc3Vlcy8xODJcbiAgICAgICAgdmFsdWUgPSBvcHRpb25zLnR5cGUgPT09IEJvb2xlYW4gJiYgKHJhdyA9PT0gJycgfHwgcmF3ID09PSBoeXBoZW5hdGUocHJvcC5uYW1lKSkgPyB0cnVlIDogcmF3O1xuICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBQcm9jZXNzIGEgcHJvcCB3aXRoIGEgcmF3VmFsdWUsIGFwcGx5aW5nIG5lY2Vzc2FyeSBjb2Vyc2lvbnMsXG4gKiBkZWZhdWx0IHZhbHVlcyAmIGFzc2VydGlvbnMgYW5kIGNhbGwgdGhlIGdpdmVuIGNhbGxiYWNrIHdpdGhcbiAqIHByb2Nlc3NlZCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG4gKiBAcGFyYW0geyp9IHJhd1ZhbHVlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5cbmZ1bmN0aW9uIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHJhd1ZhbHVlLCBmbikge1xuICB2YXIgaXNTaW1wbGUgPSBwcm9wLmR5bmFtaWMgJiYgaXNTaW1wbGVQYXRoKHByb3AucGFyZW50UGF0aCk7XG4gIHZhciB2YWx1ZSA9IHJhd1ZhbHVlO1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHZhbHVlID0gZ2V0UHJvcERlZmF1bHRWYWx1ZSh2bSwgcHJvcCk7XG4gIH1cbiAgdmFsdWUgPSBjb2VyY2VQcm9wKHByb3AsIHZhbHVlLCB2bSk7XG4gIHZhciBjb2VyY2VkID0gdmFsdWUgIT09IHJhd1ZhbHVlO1xuICBpZiAoIWFzc2VydFByb3AocHJvcCwgdmFsdWUsIHZtKSkge1xuICAgIHZhbHVlID0gdW5kZWZpbmVkO1xuICB9XG4gIGlmIChpc1NpbXBsZSAmJiAhY29lcmNlZCkge1xuICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIGZuKHZhbHVlKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBmbih2YWx1ZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBTZXQgYSBwcm9wJ3MgaW5pdGlhbCB2YWx1ZSBvbiBhIHZtIGFuZCBpdHMgZGF0YSBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICovXG5cbmZ1bmN0aW9uIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSkge1xuICBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCB2YWx1ZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgZGVmaW5lUmVhY3RpdmUodm0sIHByb3AucGF0aCwgdmFsdWUpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBVcGRhdGUgYSBwcm9wJ3MgdmFsdWUgb24gYSB2bS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKi9cblxuZnVuY3Rpb24gdXBkYXRlUHJvcCh2bSwgcHJvcCwgdmFsdWUpIHtcbiAgcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgdmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZtW3Byb3AucGF0aF0gPSB2YWx1ZTtcbiAgfSk7XG59XG5cbi8qKlxuICogR2V0IHRoZSBkZWZhdWx0IHZhbHVlIG9mIGEgcHJvcC5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG4gKiBAcmV0dXJuIHsqfVxuICovXG5cbmZ1bmN0aW9uIGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3ApIHtcbiAgLy8gbm8gZGVmYXVsdCwgcmV0dXJuIHVuZGVmaW5lZFxuICB2YXIgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcbiAgaWYgKCFoYXNPd24ob3B0aW9ucywgJ2RlZmF1bHQnKSkge1xuICAgIC8vIGFic2VudCBib29sZWFuIHZhbHVlIGRlZmF1bHRzIHRvIGZhbHNlXG4gICAgcmV0dXJuIG9wdGlvbnMudHlwZSA9PT0gQm9vbGVhbiA/IGZhbHNlIDogdW5kZWZpbmVkO1xuICB9XG4gIHZhciBkZWYgPSBvcHRpb25zWydkZWZhdWx0J107XG4gIC8vIHdhcm4gYWdhaW5zdCBub24tZmFjdG9yeSBkZWZhdWx0cyBmb3IgT2JqZWN0ICYgQXJyYXlcbiAgaWYgKGlzT2JqZWN0KGRlZikpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgZGVmYXVsdCB2YWx1ZSBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCI6ICcgKyAnUHJvcHMgd2l0aCB0eXBlIE9iamVjdC9BcnJheSBtdXN0IHVzZSBhIGZhY3RvcnkgZnVuY3Rpb24gJyArICd0byByZXR1cm4gdGhlIGRlZmF1bHQgdmFsdWUuJywgdm0pO1xuICB9XG4gIC8vIGNhbGwgZmFjdG9yeSBmdW5jdGlvbiBmb3Igbm9uLUZ1bmN0aW9uIHR5cGVzXG4gIHJldHVybiB0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nICYmIG9wdGlvbnMudHlwZSAhPT0gRnVuY3Rpb24gPyBkZWYuY2FsbCh2bSkgOiBkZWY7XG59XG5cbi8qKlxuICogQXNzZXJ0IHdoZXRoZXIgYSBwcm9wIGlzIHZhbGlkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5mdW5jdGlvbiBhc3NlcnRQcm9wKHByb3AsIHZhbHVlLCB2bSkge1xuICBpZiAoIXByb3Aub3B0aW9ucy5yZXF1aXJlZCAmJiAoIC8vIG5vbi1yZXF1aXJlZFxuICBwcm9wLnJhdyA9PT0gbnVsbCB8fCAvLyBhYnNjZW50XG4gIHZhbHVlID09IG51bGwpIC8vIG51bGwgb3IgdW5kZWZpbmVkXG4gICkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB2YXIgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcbiAgdmFyIHR5cGUgPSBvcHRpb25zLnR5cGU7XG4gIHZhciB2YWxpZCA9ICF0eXBlO1xuICB2YXIgZXhwZWN0ZWRUeXBlcyA9IFtdO1xuICBpZiAodHlwZSkge1xuICAgIGlmICghaXNBcnJheSh0eXBlKSkge1xuICAgICAgdHlwZSA9IFt0eXBlXTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0eXBlLmxlbmd0aCAmJiAhdmFsaWQ7IGkrKykge1xuICAgICAgdmFyIGFzc2VydGVkVHlwZSA9IGFzc2VydFR5cGUodmFsdWUsIHR5cGVbaV0pO1xuICAgICAgZXhwZWN0ZWRUeXBlcy5wdXNoKGFzc2VydGVkVHlwZS5leHBlY3RlZFR5cGUpO1xuICAgICAgdmFsaWQgPSBhc3NlcnRlZFR5cGUudmFsaWQ7XG4gICAgfVxuICB9XG4gIGlmICghdmFsaWQpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FybignSW52YWxpZCBwcm9wOiB0eXBlIGNoZWNrIGZhaWxlZCBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCIuJyArICcgRXhwZWN0ZWQgJyArIGV4cGVjdGVkVHlwZXMubWFwKGZvcm1hdFR5cGUpLmpvaW4oJywgJykgKyAnLCBnb3QgJyArIGZvcm1hdFZhbHVlKHZhbHVlKSArICcuJywgdm0pO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIHZhbGlkYXRvciA9IG9wdGlvbnMudmFsaWRhdG9yO1xuICBpZiAodmFsaWRhdG9yKSB7XG4gICAgaWYgKCF2YWxpZGF0b3IodmFsdWUpKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgcHJvcDogY3VzdG9tIHZhbGlkYXRvciBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiLicsIHZtKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogRm9yY2UgcGFyc2luZyB2YWx1ZSB3aXRoIGNvZXJjZSBvcHRpb24uXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4geyp9XG4gKi9cblxuZnVuY3Rpb24gY29lcmNlUHJvcChwcm9wLCB2YWx1ZSwgdm0pIHtcbiAgdmFyIGNvZXJjZSA9IHByb3Aub3B0aW9ucy5jb2VyY2U7XG4gIGlmICghY29lcmNlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmICh0eXBlb2YgY29lcmNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGNvZXJjZSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIGNvZXJjZSBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCI6IGV4cGVjdGVkIGZ1bmN0aW9uLCBnb3QgJyArIHR5cGVvZiBjb2VyY2UgKyAnLicsIHZtKTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn1cblxuLyoqXG4gKiBBc3NlcnQgdGhlIHR5cGUgb2YgYSB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHR5cGVcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlKSB7XG4gIHZhciB2YWxpZDtcbiAgdmFyIGV4cGVjdGVkVHlwZTtcbiAgaWYgKHR5cGUgPT09IFN0cmluZykge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdzdHJpbmcnO1xuICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gTnVtYmVyKSB7XG4gICAgZXhwZWN0ZWRUeXBlID0gJ251bWJlcic7XG4gICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBCb29sZWFuKSB7XG4gICAgZXhwZWN0ZWRUeXBlID0gJ2Jvb2xlYW4nO1xuICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gRnVuY3Rpb24pIHtcbiAgICBleHBlY3RlZFR5cGUgPSAnZnVuY3Rpb24nO1xuICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gT2JqZWN0KSB7XG4gICAgZXhwZWN0ZWRUeXBlID0gJ29iamVjdCc7XG4gICAgdmFsaWQgPSBpc1BsYWluT2JqZWN0KHZhbHVlKTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBBcnJheSkge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdhcnJheSc7XG4gICAgdmFsaWQgPSBpc0FycmF5KHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICB2YWxpZCA9IHZhbHVlIGluc3RhbmNlb2YgdHlwZTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHZhbGlkOiB2YWxpZCxcbiAgICBleHBlY3RlZFR5cGU6IGV4cGVjdGVkVHlwZVxuICB9O1xufVxuXG4vKipcbiAqIEZvcm1hdCB0eXBlIGZvciBvdXRwdXRcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGZvcm1hdFR5cGUodHlwZSkge1xuICByZXR1cm4gdHlwZSA/IHR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0eXBlLnNsaWNlKDEpIDogJ2N1c3RvbSB0eXBlJztcbn1cblxuLyoqXG4gKiBGb3JtYXQgdmFsdWVcbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0VmFsdWUodmFsKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKS5zbGljZSg4LCAtMSk7XG59XG5cbnZhciBiaW5kaW5nTW9kZXMgPSBjb25maWcuX3Byb3BCaW5kaW5nTW9kZXM7XG5cbnZhciBwcm9wRGVmID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIGNoaWxkID0gdGhpcy52bTtcbiAgICB2YXIgcGFyZW50ID0gY2hpbGQuX2NvbnRleHQ7XG4gICAgLy8gcGFzc2VkIGluIGZyb20gY29tcGlsZXIgZGlyZWN0bHlcbiAgICB2YXIgcHJvcCA9IHRoaXMuZGVzY3JpcHRvci5wcm9wO1xuICAgIHZhciBjaGlsZEtleSA9IHByb3AucGF0aDtcbiAgICB2YXIgcGFyZW50S2V5ID0gcHJvcC5wYXJlbnRQYXRoO1xuICAgIHZhciB0d29XYXkgPSBwcm9wLm1vZGUgPT09IGJpbmRpbmdNb2Rlcy5UV09fV0FZO1xuXG4gICAgdmFyIHBhcmVudFdhdGNoZXIgPSB0aGlzLnBhcmVudFdhdGNoZXIgPSBuZXcgV2F0Y2hlcihwYXJlbnQsIHBhcmVudEtleSwgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgdXBkYXRlUHJvcChjaGlsZCwgcHJvcCwgdmFsKTtcbiAgICB9LCB7XG4gICAgICB0d29XYXk6IHR3b1dheSxcbiAgICAgIGZpbHRlcnM6IHByb3AuZmlsdGVycyxcbiAgICAgIC8vIGltcG9ydGFudDogcHJvcHMgbmVlZCB0byBiZSBvYnNlcnZlZCBvbiB0aGVcbiAgICAgIC8vIHYtZm9yIHNjb3BlIGlmIHByZXNlbnRcbiAgICAgIHNjb3BlOiB0aGlzLl9zY29wZVxuICAgIH0pO1xuXG4gICAgLy8gc2V0IHRoZSBjaGlsZCBpbml0aWFsIHZhbHVlLlxuICAgIGluaXRQcm9wKGNoaWxkLCBwcm9wLCBwYXJlbnRXYXRjaGVyLnZhbHVlKTtcblxuICAgIC8vIHNldHVwIHR3by13YXkgYmluZGluZ1xuICAgIGlmICh0d29XYXkpIHtcbiAgICAgIC8vIGltcG9ydGFudDogZGVmZXIgdGhlIGNoaWxkIHdhdGNoZXIgY3JlYXRpb24gdW50aWxcbiAgICAgIC8vIHRoZSBjcmVhdGVkIGhvb2sgKGFmdGVyIGRhdGEgb2JzZXJ2YXRpb24pXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBjaGlsZC4kb25jZSgncHJlLWhvb2s6Y3JlYXRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5jaGlsZFdhdGNoZXIgPSBuZXcgV2F0Y2hlcihjaGlsZCwgY2hpbGRLZXksIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICBwYXJlbnRXYXRjaGVyLnNldCh2YWwpO1xuICAgICAgICB9LCB7XG4gICAgICAgICAgLy8gZW5zdXJlIHN5bmMgdXB3YXJkIGJlZm9yZSBwYXJlbnQgc3luYyBkb3duLlxuICAgICAgICAgIC8vIHRoaXMgaXMgbmVjZXNzYXJ5IGluIGNhc2VzIGUuZy4gdGhlIGNoaWxkXG4gICAgICAgICAgLy8gbXV0YXRlcyBhIHByb3AgYXJyYXksIHRoZW4gcmVwbGFjZXMgaXQuICgjMTY4MylcbiAgICAgICAgICBzeW5jOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHRoaXMucGFyZW50V2F0Y2hlci50ZWFyZG93bigpO1xuICAgIGlmICh0aGlzLmNoaWxkV2F0Y2hlcikge1xuICAgICAgdGhpcy5jaGlsZFdhdGNoZXIudGVhcmRvd24oKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBxdWV1ZSQxID0gW107XG52YXIgcXVldWVkID0gZmFsc2U7XG5cbi8qKlxuICogUHVzaCBhIGpvYiBpbnRvIHRoZSBxdWV1ZS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBqb2JcbiAqL1xuXG5mdW5jdGlvbiBwdXNoSm9iKGpvYikge1xuICBxdWV1ZSQxLnB1c2goam9iKTtcbiAgaWYgKCFxdWV1ZWQpIHtcbiAgICBxdWV1ZWQgPSB0cnVlO1xuICAgIG5leHRUaWNrKGZsdXNoKTtcbiAgfVxufVxuXG4vKipcbiAqIEZsdXNoIHRoZSBxdWV1ZSwgYW5kIGRvIG9uZSBmb3JjZWQgcmVmbG93IGJlZm9yZVxuICogdHJpZ2dlcmluZyB0cmFuc2l0aW9ucy5cbiAqL1xuXG5mdW5jdGlvbiBmbHVzaCgpIHtcbiAgLy8gRm9yY2UgbGF5b3V0XG4gIHZhciBmID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZSQxLmxlbmd0aDsgaSsrKSB7XG4gICAgcXVldWUkMVtpXSgpO1xuICB9XG4gIHF1ZXVlJDEgPSBbXTtcbiAgcXVldWVkID0gZmFsc2U7XG4gIC8vIGR1bW15IHJldHVybiwgc28ganMgbGludGVycyBkb24ndCBjb21wbGFpbiBhYm91dFxuICAvLyB1bnVzZWQgdmFyaWFibGUgZlxuICByZXR1cm4gZjtcbn1cblxudmFyIFRZUEVfVFJBTlNJVElPTiA9ICd0cmFuc2l0aW9uJztcbnZhciBUWVBFX0FOSU1BVElPTiA9ICdhbmltYXRpb24nO1xudmFyIHRyYW5zRHVyYXRpb25Qcm9wID0gdHJhbnNpdGlvblByb3AgKyAnRHVyYXRpb24nO1xudmFyIGFuaW1EdXJhdGlvblByb3AgPSBhbmltYXRpb25Qcm9wICsgJ0R1cmF0aW9uJztcblxuLyoqXG4gKiBJZiBhIGp1c3QtZW50ZXJlZCBlbGVtZW50IGlzIGFwcGxpZWQgdGhlXG4gKiBsZWF2ZSBjbGFzcyB3aGlsZSBpdHMgZW50ZXIgdHJhbnNpdGlvbiBoYXNuJ3Qgc3RhcnRlZCB5ZXQsXG4gKiBhbmQgdGhlIHRyYW5zaXRpb25lZCBwcm9wZXJ0eSBoYXMgdGhlIHNhbWUgdmFsdWUgZm9yIGJvdGhcbiAqIGVudGVyL2xlYXZlLCB0aGVuIHRoZSBsZWF2ZSB0cmFuc2l0aW9uIHdpbGwgYmUgc2tpcHBlZCBhbmRcbiAqIHRoZSB0cmFuc2l0aW9uZW5kIGV2ZW50IG5ldmVyIGZpcmVzLiBUaGlzIGZ1bmN0aW9uIGVuc3VyZXNcbiAqIGl0cyBjYWxsYmFjayB0byBiZSBjYWxsZWQgYWZ0ZXIgYSB0cmFuc2l0aW9uIGhhcyBzdGFydGVkXG4gKiBieSB3YWl0aW5nIGZvciBkb3VibGUgcmFmLlxuICpcbiAqIEl0IGZhbGxzIGJhY2sgdG8gc2V0VGltZW91dCBvbiBkZXZpY2VzIHRoYXQgc3VwcG9ydCBDU1NcbiAqIHRyYW5zaXRpb25zIGJ1dCBub3QgcmFmIChlLmcuIEFuZHJvaWQgNC4yIGJyb3dzZXIpIC0gc2luY2VcbiAqIHRoZXNlIGVudmlyb25tZW50cyBhcmUgdXN1YWxseSBzbG93LCB3ZSBhcmUgZ2l2aW5nIGl0IGFcbiAqIHJlbGF0aXZlbHkgbGFyZ2UgdGltZW91dC5cbiAqL1xuXG52YXIgcmFmID0gaW5Ccm93c2VyICYmIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG52YXIgd2FpdEZvclRyYW5zaXRpb25TdGFydCA9IHJhZlxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbj8gZnVuY3Rpb24gKGZuKSB7XG4gIHJhZihmdW5jdGlvbiAoKSB7XG4gICAgcmFmKGZuKTtcbiAgfSk7XG59IDogZnVuY3Rpb24gKGZuKSB7XG4gIHNldFRpbWVvdXQoZm4sIDUwKTtcbn07XG5cbi8qKlxuICogQSBUcmFuc2l0aW9uIG9iamVjdCB0aGF0IGVuY2Fwc3VsYXRlcyB0aGUgc3RhdGUgYW5kIGxvZ2ljXG4gKiBvZiB0aGUgdHJhbnNpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBob29rc1xuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cbmZ1bmN0aW9uIFRyYW5zaXRpb24oZWwsIGlkLCBob29rcywgdm0pIHtcbiAgdGhpcy5pZCA9IGlkO1xuICB0aGlzLmVsID0gZWw7XG4gIHRoaXMuZW50ZXJDbGFzcyA9IGhvb2tzICYmIGhvb2tzLmVudGVyQ2xhc3MgfHwgaWQgKyAnLWVudGVyJztcbiAgdGhpcy5sZWF2ZUNsYXNzID0gaG9va3MgJiYgaG9va3MubGVhdmVDbGFzcyB8fCBpZCArICctbGVhdmUnO1xuICB0aGlzLmhvb2tzID0gaG9va3M7XG4gIHRoaXMudm0gPSB2bTtcbiAgLy8gYXN5bmMgc3RhdGVcbiAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IHRoaXMub3AgPSB0aGlzLmNiID0gbnVsbDtcbiAgdGhpcy5qdXN0RW50ZXJlZCA9IGZhbHNlO1xuICB0aGlzLmVudGVyZWQgPSB0aGlzLmxlZnQgPSBmYWxzZTtcbiAgdGhpcy50eXBlQ2FjaGUgPSB7fTtcbiAgLy8gY2hlY2sgY3NzIHRyYW5zaXRpb24gdHlwZVxuICB0aGlzLnR5cGUgPSBob29rcyAmJiBob29rcy50eXBlO1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAodGhpcy50eXBlICYmIHRoaXMudHlwZSAhPT0gVFlQRV9UUkFOU0lUSU9OICYmIHRoaXMudHlwZSAhPT0gVFlQRV9BTklNQVRJT04pIHtcbiAgICAgIHdhcm4oJ2ludmFsaWQgQ1NTIHRyYW5zaXRpb24gdHlwZSBmb3IgdHJhbnNpdGlvbj1cIicgKyB0aGlzLmlkICsgJ1wiOiAnICsgdGhpcy50eXBlLCB2bSk7XG4gICAgfVxuICB9XG4gIC8vIGJpbmRcbiAgdmFyIHNlbGYgPSB0aGlzO1snZW50ZXJOZXh0VGljaycsICdlbnRlckRvbmUnLCAnbGVhdmVOZXh0VGljaycsICdsZWF2ZURvbmUnXS5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7XG4gICAgc2VsZlttXSA9IGJpbmQoc2VsZlttXSwgc2VsZik7XG4gIH0pO1xufVxuXG52YXIgcCQxID0gVHJhbnNpdGlvbi5wcm90b3R5cGU7XG5cbi8qKlxuICogU3RhcnQgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbi5cbiAqXG4gKiAxLiBlbnRlciB0cmFuc2l0aW9uIHRyaWdnZXJlZFxuICogMi4gY2FsbCBiZWZvcmVFbnRlciBob29rXG4gKiAzLiBhZGQgZW50ZXIgY2xhc3NcbiAqIDQuIGluc2VydC9zaG93IGVsZW1lbnRcbiAqIDUuIGNhbGwgZW50ZXIgaG9vayAod2l0aCBwb3NzaWJsZSBleHBsaWNpdCBqcyBjYWxsYmFjaylcbiAqIDYuIHJlZmxvd1xuICogNy4gYmFzZWQgb24gdHJhbnNpdGlvbiB0eXBlOlxuICogICAgLSB0cmFuc2l0aW9uOlxuICogICAgICAgIHJlbW92ZSBjbGFzcyBub3csIHdhaXQgZm9yIHRyYW5zaXRpb25lbmQsXG4gKiAgICAgICAgdGhlbiBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiAgICAtIGFuaW1hdGlvbjpcbiAqICAgICAgICB3YWl0IGZvciBhbmltYXRpb25lbmQsIHJlbW92ZSBjbGFzcyxcbiAqICAgICAgICB0aGVuIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAqICAgIC0gbm8gY3NzIHRyYW5zaXRpb246XG4gKiAgICAgICAgZG9uZSBub3cgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAqIDguIHdhaXQgZm9yIGVpdGhlciBkb25lIG9yIGpzIGNhbGxiYWNrLCB0aGVuIGNhbGxcbiAqICAgIGFmdGVyRW50ZXIgaG9vay5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIGluc2VydC9zaG93IHRoZSBlbGVtZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxucCQxLmVudGVyID0gZnVuY3Rpb24gKG9wLCBjYikge1xuICB0aGlzLmNhbmNlbFBlbmRpbmcoKTtcbiAgdGhpcy5jYWxsSG9vaygnYmVmb3JlRW50ZXInKTtcbiAgdGhpcy5jYiA9IGNiO1xuICBhZGRDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICBvcCgpO1xuICB0aGlzLmVudGVyZWQgPSBmYWxzZTtcbiAgdGhpcy5jYWxsSG9va1dpdGhDYignZW50ZXInKTtcbiAgaWYgKHRoaXMuZW50ZXJlZCkge1xuICAgIHJldHVybjsgLy8gdXNlciBjYWxsZWQgZG9uZSBzeW5jaHJvbm91c2x5LlxuICB9XG4gIHRoaXMuY2FuY2VsID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmVudGVyQ2FuY2VsbGVkO1xuICBwdXNoSm9iKHRoaXMuZW50ZXJOZXh0VGljayk7XG59O1xuXG4vKipcbiAqIFRoZSBcIm5leHRUaWNrXCIgcGhhc2Ugb2YgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbiwgd2hpY2ggaXNcbiAqIHRvIGJlIHB1c2hlZCBpbnRvIGEgcXVldWUgYW5kIGV4ZWN1dGVkIGFmdGVyIGEgcmVmbG93IHNvXG4gKiB0aGF0IHJlbW92aW5nIHRoZSBjbGFzcyBjYW4gdHJpZ2dlciBhIENTUyB0cmFuc2l0aW9uLlxuICovXG5cbnAkMS5lbnRlck5leHRUaWNrID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIC8vIHByZXZlbnQgdHJhbnNpdGlvbiBza2lwcGluZ1xuICB0aGlzLmp1c3RFbnRlcmVkID0gdHJ1ZTtcbiAgd2FpdEZvclRyYW5zaXRpb25TdGFydChmdW5jdGlvbiAoKSB7XG4gICAgX3RoaXMuanVzdEVudGVyZWQgPSBmYWxzZTtcbiAgfSk7XG4gIHZhciBlbnRlckRvbmUgPSB0aGlzLmVudGVyRG9uZTtcbiAgdmFyIHR5cGUgPSB0aGlzLmdldENzc1RyYW5zaXRpb25UeXBlKHRoaXMuZW50ZXJDbGFzcyk7XG4gIGlmICghdGhpcy5wZW5kaW5nSnNDYikge1xuICAgIGlmICh0eXBlID09PSBUWVBFX1RSQU5TSVRJT04pIHtcbiAgICAgIC8vIHRyaWdnZXIgdHJhbnNpdGlvbiBieSByZW1vdmluZyBlbnRlciBjbGFzcyBub3dcbiAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG4gICAgICB0aGlzLnNldHVwQ3NzQ2IodHJhbnNpdGlvbkVuZEV2ZW50LCBlbnRlckRvbmUpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gVFlQRV9BTklNQVRJT04pIHtcbiAgICAgIHRoaXMuc2V0dXBDc3NDYihhbmltYXRpb25FbmRFdmVudCwgZW50ZXJEb25lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW50ZXJEb25lKCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTikge1xuICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG4gIH1cbn07XG5cbi8qKlxuICogVGhlIFwiY2xlYW51cFwiIHBoYXNlIG9mIGFuIGVudGVyaW5nIHRyYW5zaXRpb24uXG4gKi9cblxucCQxLmVudGVyRG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5lbnRlcmVkID0gdHJ1ZTtcbiAgdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcbiAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcbiAgdGhpcy5jYWxsSG9vaygnYWZ0ZXJFbnRlcicpO1xuICBpZiAodGhpcy5jYikgdGhpcy5jYigpO1xufTtcblxuLyoqXG4gKiBTdGFydCBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cbiAqXG4gKiAxLiBsZWF2ZSB0cmFuc2l0aW9uIHRyaWdnZXJlZC5cbiAqIDIuIGNhbGwgYmVmb3JlTGVhdmUgaG9va1xuICogMy4gYWRkIGxlYXZlIGNsYXNzICh0cmlnZ2VyIGNzcyB0cmFuc2l0aW9uKVxuICogNC4gY2FsbCBsZWF2ZSBob29rICh3aXRoIHBvc3NpYmxlIGV4cGxpY2l0IGpzIGNhbGxiYWNrKVxuICogNS4gcmVmbG93IGlmIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrIGlzIHByb3ZpZGVkXG4gKiA2LiBiYXNlZCBvbiB0cmFuc2l0aW9uIHR5cGU6XG4gKiAgICAtIHRyYW5zaXRpb24gb3IgYW5pbWF0aW9uOlxuICogICAgICAgIHdhaXQgZm9yIGVuZCBldmVudCwgcmVtb3ZlIGNsYXNzLCB0aGVuIGRvbmUgaWZcbiAqICAgICAgICB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogICAgLSBubyBjc3MgdHJhbnNpdGlvbjpcbiAqICAgICAgICBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiA3LiB3YWl0IGZvciBlaXRoZXIgZG9uZSBvciBqcyBjYWxsYmFjaywgdGhlbiBjYWxsXG4gKiAgICBhZnRlckxlYXZlIGhvb2suXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSByZW1vdmUvaGlkZSB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbnAkMS5sZWF2ZSA9IGZ1bmN0aW9uIChvcCwgY2IpIHtcbiAgdGhpcy5jYW5jZWxQZW5kaW5nKCk7XG4gIHRoaXMuY2FsbEhvb2soJ2JlZm9yZUxlYXZlJyk7XG4gIHRoaXMub3AgPSBvcDtcbiAgdGhpcy5jYiA9IGNiO1xuICBhZGRDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuICB0aGlzLmxlZnQgPSBmYWxzZTtcbiAgdGhpcy5jYWxsSG9va1dpdGhDYignbGVhdmUnKTtcbiAgaWYgKHRoaXMubGVmdCkge1xuICAgIHJldHVybjsgLy8gdXNlciBjYWxsZWQgZG9uZSBzeW5jaHJvbm91c2x5LlxuICB9XG4gIHRoaXMuY2FuY2VsID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmxlYXZlQ2FuY2VsbGVkO1xuICAvLyBvbmx5IG5lZWQgdG8gaGFuZGxlIGxlYXZlRG9uZSBpZlxuICAvLyAxLiB0aGUgdHJhbnNpdGlvbiBpcyBhbHJlYWR5IGRvbmUgKHN5bmNocm9ub3VzbHkgY2FsbGVkXG4gIC8vICAgIGJ5IHRoZSB1c2VyLCB3aGljaCBjYXVzZXMgdGhpcy5vcCBzZXQgdG8gbnVsbClcbiAgLy8gMi4gdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFja1xuICBpZiAodGhpcy5vcCAmJiAhdGhpcy5wZW5kaW5nSnNDYikge1xuICAgIC8vIGlmIGEgQ1NTIHRyYW5zaXRpb24gbGVhdmVzIGltbWVkaWF0ZWx5IGFmdGVyIGVudGVyLFxuICAgIC8vIHRoZSB0cmFuc2l0aW9uZW5kIGV2ZW50IG5ldmVyIGZpcmVzLiB0aGVyZWZvcmUgd2VcbiAgICAvLyBkZXRlY3Qgc3VjaCBjYXNlcyBhbmQgZW5kIHRoZSBsZWF2ZSBpbW1lZGlhdGVseS5cbiAgICBpZiAodGhpcy5qdXN0RW50ZXJlZCkge1xuICAgICAgdGhpcy5sZWF2ZURvbmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHVzaEpvYih0aGlzLmxlYXZlTmV4dFRpY2spO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBUaGUgXCJuZXh0VGlja1wiIHBoYXNlIG9mIGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuICovXG5cbnAkMS5sZWF2ZU5leHRUaWNrID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdHlwZSA9IHRoaXMuZ2V0Q3NzVHJhbnNpdGlvblR5cGUodGhpcy5sZWF2ZUNsYXNzKTtcbiAgaWYgKHR5cGUpIHtcbiAgICB2YXIgZXZlbnQgPSB0eXBlID09PSBUWVBFX1RSQU5TSVRJT04gPyB0cmFuc2l0aW9uRW5kRXZlbnQgOiBhbmltYXRpb25FbmRFdmVudDtcbiAgICB0aGlzLnNldHVwQ3NzQ2IoZXZlbnQsIHRoaXMubGVhdmVEb25lKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmxlYXZlRG9uZSgpO1xuICB9XG59O1xuXG4vKipcbiAqIFRoZSBcImNsZWFudXBcIiBwaGFzZSBvZiBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEubGVhdmVEb25lID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmxlZnQgPSB0cnVlO1xuICB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsO1xuICB0aGlzLm9wKCk7XG4gIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG4gIHRoaXMuY2FsbEhvb2soJ2FmdGVyTGVhdmUnKTtcbiAgaWYgKHRoaXMuY2IpIHRoaXMuY2IoKTtcbiAgdGhpcy5vcCA9IG51bGw7XG59O1xuXG4vKipcbiAqIENhbmNlbCBhbnkgcGVuZGluZyBjYWxsYmFja3MgZnJvbSBhIHByZXZpb3VzbHkgcnVubmluZ1xuICogYnV0IG5vdCBmaW5pc2hlZCB0cmFuc2l0aW9uLlxuICovXG5cbnAkMS5jYW5jZWxQZW5kaW5nID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLm9wID0gdGhpcy5jYiA9IG51bGw7XG4gIHZhciBoYXNQZW5kaW5nID0gZmFsc2U7XG4gIGlmICh0aGlzLnBlbmRpbmdDc3NDYikge1xuICAgIGhhc1BlbmRpbmcgPSB0cnVlO1xuICAgIG9mZih0aGlzLmVsLCB0aGlzLnBlbmRpbmdDc3NFdmVudCwgdGhpcy5wZW5kaW5nQ3NzQ2IpO1xuICAgIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSBudWxsO1xuICB9XG4gIGlmICh0aGlzLnBlbmRpbmdKc0NiKSB7XG4gICAgaGFzUGVuZGluZyA9IHRydWU7XG4gICAgdGhpcy5wZW5kaW5nSnNDYi5jYW5jZWwoKTtcbiAgICB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcbiAgfVxuICBpZiAoaGFzUGVuZGluZykge1xuICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG4gICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcbiAgfVxuICBpZiAodGhpcy5jYW5jZWwpIHtcbiAgICB0aGlzLmNhbmNlbC5jYWxsKHRoaXMudm0sIHRoaXMuZWwpO1xuICAgIHRoaXMuY2FuY2VsID0gbnVsbDtcbiAgfVxufTtcblxuLyoqXG4gKiBDYWxsIGEgdXNlci1wcm92aWRlZCBzeW5jaHJvbm91cyBob29rIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cblxucCQxLmNhbGxIb29rID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgaWYgKHRoaXMuaG9va3MgJiYgdGhpcy5ob29rc1t0eXBlXSkge1xuICAgIHRoaXMuaG9va3NbdHlwZV0uY2FsbCh0aGlzLnZtLCB0aGlzLmVsKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDYWxsIGEgdXNlci1wcm92aWRlZCwgcG90ZW50aWFsbHktYXN5bmMgaG9vayBmdW5jdGlvbi5cbiAqIFdlIGNoZWNrIGZvciB0aGUgbGVuZ3RoIG9mIGFyZ3VtZW50cyB0byBzZWUgaWYgdGhlIGhvb2tcbiAqIGV4cGVjdHMgYSBgZG9uZWAgY2FsbGJhY2suIElmIHRydWUsIHRoZSB0cmFuc2l0aW9uJ3MgZW5kXG4gKiB3aWxsIGJlIGRldGVybWluZWQgYnkgd2hlbiB0aGUgdXNlciBjYWxscyB0aGF0IGNhbGxiYWNrO1xuICogb3RoZXJ3aXNlLCB0aGUgZW5kIGlzIGRldGVybWluZWQgYnkgdGhlIENTUyB0cmFuc2l0aW9uIG9yXG4gKiBhbmltYXRpb24uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqL1xuXG5wJDEuY2FsbEhvb2tXaXRoQ2IgPSBmdW5jdGlvbiAodHlwZSkge1xuICB2YXIgaG9vayA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rc1t0eXBlXTtcbiAgaWYgKGhvb2spIHtcbiAgICBpZiAoaG9vay5sZW5ndGggPiAxKSB7XG4gICAgICB0aGlzLnBlbmRpbmdKc0NiID0gY2FuY2VsbGFibGUodGhpc1t0eXBlICsgJ0RvbmUnXSk7XG4gICAgfVxuICAgIGhvb2suY2FsbCh0aGlzLnZtLCB0aGlzLmVsLCB0aGlzLnBlbmRpbmdKc0NiKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgYW4gZWxlbWVudCdzIHRyYW5zaXRpb24gdHlwZSBiYXNlZCBvbiB0aGVcbiAqIGNhbGN1bGF0ZWQgc3R5bGVzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBjbGFzc05hbWVcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqL1xuXG5wJDEuZ2V0Q3NzVHJhbnNpdGlvblR5cGUgPSBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoIXRyYW5zaXRpb25FbmRFdmVudCB8fFxuICAvLyBza2lwIENTUyB0cmFuc2l0aW9ucyBpZiBwYWdlIGlzIG5vdCB2aXNpYmxlIC1cbiAgLy8gdGhpcyBzb2x2ZXMgdGhlIGlzc3VlIG9mIHRyYW5zaXRpb25lbmQgZXZlbnRzIG5vdFxuICAvLyBmaXJpbmcgdW50aWwgdGhlIHBhZ2UgaXMgdmlzaWJsZSBhZ2Fpbi5cbiAgLy8gcGFnZVZpc2liaWxpdHkgQVBJIGlzIHN1cHBvcnRlZCBpbiBJRTEwKywgc2FtZSBhc1xuICAvLyBDU1MgdHJhbnNpdGlvbnMuXG4gIGRvY3VtZW50LmhpZGRlbiB8fFxuICAvLyBleHBsaWNpdCBqcy1vbmx5IHRyYW5zaXRpb25cbiAgdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmNzcyA9PT0gZmFsc2UgfHxcbiAgLy8gZWxlbWVudCBpcyBoaWRkZW5cbiAgaXNIaWRkZW4odGhpcy5lbCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHR5cGUgPSB0aGlzLnR5cGUgfHwgdGhpcy50eXBlQ2FjaGVbY2xhc3NOYW1lXTtcbiAgaWYgKHR5cGUpIHJldHVybiB0eXBlO1xuICB2YXIgaW5saW5lU3R5bGVzID0gdGhpcy5lbC5zdHlsZTtcbiAgdmFyIGNvbXB1dGVkU3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbCk7XG4gIHZhciB0cmFuc0R1cmF0aW9uID0gaW5saW5lU3R5bGVzW3RyYW5zRHVyYXRpb25Qcm9wXSB8fCBjb21wdXRlZFN0eWxlc1t0cmFuc0R1cmF0aW9uUHJvcF07XG4gIGlmICh0cmFuc0R1cmF0aW9uICYmIHRyYW5zRHVyYXRpb24gIT09ICcwcycpIHtcbiAgICB0eXBlID0gVFlQRV9UUkFOU0lUSU9OO1xuICB9IGVsc2Uge1xuICAgIHZhciBhbmltRHVyYXRpb24gPSBpbmxpbmVTdHlsZXNbYW5pbUR1cmF0aW9uUHJvcF0gfHwgY29tcHV0ZWRTdHlsZXNbYW5pbUR1cmF0aW9uUHJvcF07XG4gICAgaWYgKGFuaW1EdXJhdGlvbiAmJiBhbmltRHVyYXRpb24gIT09ICcwcycpIHtcbiAgICAgIHR5cGUgPSBUWVBFX0FOSU1BVElPTjtcbiAgICB9XG4gIH1cbiAgaWYgKHR5cGUpIHtcbiAgICB0aGlzLnR5cGVDYWNoZVtjbGFzc05hbWVdID0gdHlwZTtcbiAgfVxuICByZXR1cm4gdHlwZTtcbn07XG5cbi8qKlxuICogU2V0dXAgYSBDU1MgdHJhbnNpdGlvbmVuZC9hbmltYXRpb25lbmQgY2FsbGJhY2suXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICovXG5cbnAkMS5zZXR1cENzc0NiID0gZnVuY3Rpb24gKGV2ZW50LCBjYikge1xuICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IGV2ZW50O1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBlbCA9IHRoaXMuZWw7XG4gIHZhciBvbkVuZCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoZS50YXJnZXQgPT09IGVsKSB7XG4gICAgICBvZmYoZWwsIGV2ZW50LCBvbkVuZCk7XG4gICAgICBzZWxmLnBlbmRpbmdDc3NFdmVudCA9IHNlbGYucGVuZGluZ0Nzc0NiID0gbnVsbDtcbiAgICAgIGlmICghc2VsZi5wZW5kaW5nSnNDYiAmJiBjYikge1xuICAgICAgICBjYigpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgb24oZWwsIGV2ZW50LCBvbkVuZCk7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgaGlkZGVuIC0gaW4gdGhhdCBjYXNlIHdlIGNhbiBqdXN0XG4gKiBza2lwIHRoZSB0cmFuc2l0aW9uIGFsbHRvZ2V0aGVyLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNIaWRkZW4oZWwpIHtcbiAgaWYgKC9zdmckLy50ZXN0KGVsLm5hbWVzcGFjZVVSSSkpIHtcbiAgICAvLyBTVkcgZWxlbWVudHMgZG8gbm90IGhhdmUgb2Zmc2V0KFdpZHRofEhlaWdodClcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIGNoZWNrIHRoZSBjbGllbnQgcmVjdFxuICAgIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuICEocmVjdC53aWR0aCB8fCByZWN0LmhlaWdodCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICEoZWwub2Zmc2V0V2lkdGggfHwgZWwub2Zmc2V0SGVpZ2h0IHx8IGVsLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKTtcbiAgfVxufVxuXG52YXIgdHJhbnNpdGlvbiQxID0ge1xuXG4gIHByaW9yaXR5OiBUUkFOU0lUSU9OLFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGlkLCBvbGRJZCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgLy8gcmVzb2x2ZSBvbiBvd25lciB2bVxuICAgIHZhciBob29rcyA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAndHJhbnNpdGlvbnMnLCBpZCk7XG4gICAgaWQgPSBpZCB8fCAndic7XG4gICAgb2xkSWQgPSBvbGRJZCB8fCAndic7XG4gICAgZWwuX192X3RyYW5zID0gbmV3IFRyYW5zaXRpb24oZWwsIGlkLCBob29rcywgdGhpcy52bSk7XG4gICAgcmVtb3ZlQ2xhc3MoZWwsIG9sZElkICsgJy10cmFuc2l0aW9uJyk7XG4gICAgYWRkQ2xhc3MoZWwsIGlkICsgJy10cmFuc2l0aW9uJyk7XG4gIH1cbn07XG5cbnZhciBpbnRlcm5hbERpcmVjdGl2ZXMgPSB7XG4gIHN0eWxlOiBzdHlsZSxcbiAgJ2NsYXNzJzogdkNsYXNzLFxuICBjb21wb25lbnQ6IGNvbXBvbmVudCxcbiAgcHJvcDogcHJvcERlZixcbiAgdHJhbnNpdGlvbjogdHJhbnNpdGlvbiQxXG59O1xuXG4vLyBzcGVjaWFsIGJpbmRpbmcgcHJlZml4ZXNcbnZhciBiaW5kUkUgPSAvXnYtYmluZDp8XjovO1xudmFyIG9uUkUgPSAvXnYtb246fF5ALztcbnZhciBkaXJBdHRyUkUgPSAvXnYtKFteOl0rKSg/OiR8OiguKikkKS87XG52YXIgbW9kaWZpZXJSRSA9IC9cXC5bXlxcLl0rL2c7XG52YXIgdHJhbnNpdGlvblJFID0gL14odi1iaW5kOnw6KT90cmFuc2l0aW9uJC87XG5cbi8vIGRlZmF1bHQgZGlyZWN0aXZlIHByaW9yaXR5XG52YXIgREVGQVVMVF9QUklPUklUWSA9IDEwMDA7XG52YXIgREVGQVVMVF9URVJNSU5BTF9QUklPUklUWSA9IDIwMDA7XG5cbi8qKlxuICogQ29tcGlsZSBhIHRlbXBsYXRlIGFuZCByZXR1cm4gYSByZXVzYWJsZSBjb21wb3NpdGUgbGlua1xuICogZnVuY3Rpb24sIHdoaWNoIHJlY3Vyc2l2ZWx5IGNvbnRhaW5zIG1vcmUgbGluayBmdW5jdGlvbnNcbiAqIGluc2lkZS4gVGhpcyB0b3AgbGV2ZWwgY29tcGlsZSBmdW5jdGlvbiB3b3VsZCBub3JtYWxseVxuICogYmUgY2FsbGVkIG9uIGluc3RhbmNlIHJvb3Qgbm9kZXMsIGJ1dCBjYW4gYWxzbyBiZSB1c2VkXG4gKiBmb3IgcGFydGlhbCBjb21waWxhdGlvbiBpZiB0aGUgcGFydGlhbCBhcmd1bWVudCBpcyB0cnVlLlxuICpcbiAqIFRoZSByZXR1cm5lZCBjb21wb3NpdGUgbGluayBmdW5jdGlvbiwgd2hlbiBjYWxsZWQsIHdpbGxcbiAqIHJldHVybiBhbiB1bmxpbmsgZnVuY3Rpb24gdGhhdCB0ZWFyc2Rvd24gYWxsIGRpcmVjdGl2ZXNcbiAqIGNyZWF0ZWQgZHVyaW5nIHRoZSBsaW5raW5nIHBoYXNlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcGFydGlhbFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZShlbCwgb3B0aW9ucywgcGFydGlhbCkge1xuICAvLyBsaW5rIGZ1bmN0aW9uIGZvciB0aGUgbm9kZSBpdHNlbGYuXG4gIHZhciBub2RlTGlua0ZuID0gcGFydGlhbCB8fCAhb3B0aW9ucy5fYXNDb21wb25lbnQgPyBjb21waWxlTm9kZShlbCwgb3B0aW9ucykgOiBudWxsO1xuICAvLyBsaW5rIGZ1bmN0aW9uIGZvciB0aGUgY2hpbGROb2Rlc1xuICB2YXIgY2hpbGRMaW5rRm4gPSAhKG5vZGVMaW5rRm4gJiYgbm9kZUxpbmtGbi50ZXJtaW5hbCkgJiYgIWlzU2NyaXB0KGVsKSAmJiBlbC5oYXNDaGlsZE5vZGVzKCkgPyBjb21waWxlTm9kZUxpc3QoZWwuY2hpbGROb2Rlcywgb3B0aW9ucykgOiBudWxsO1xuXG4gIC8qKlxuICAgKiBBIGNvbXBvc2l0ZSBsaW5rZXIgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGEgYWxyZWFkeVxuICAgKiBjb21waWxlZCBwaWVjZSBvZiBET00sIHdoaWNoIGluc3RhbnRpYXRlcyBhbGwgZGlyZWN0aXZlXG4gICAqIGluc3RhbmNlcy5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gaG9zdCB2bSBvZiB0cmFuc2NsdWRlZCBjb250ZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddIC0gbGluayBjb250ZXh0IGZyYWdtZW50XG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAgICovXG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGNvbXBvc2l0ZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgLy8gY2FjaGUgY2hpbGROb2RlcyBiZWZvcmUgbGlua2luZyBwYXJlbnQsIGZpeCAjNjU3XG4gICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KGVsLmNoaWxkTm9kZXMpO1xuICAgIC8vIGxpbmtcbiAgICB2YXIgZGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uIGNvbXBvc2l0ZUxpbmtDYXB0dXJlcigpIHtcbiAgICAgIGlmIChub2RlTGlua0ZuKSBub2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgICAgaWYgKGNoaWxkTGlua0ZuKSBjaGlsZExpbmtGbih2bSwgY2hpbGROb2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgIH0sIHZtKTtcbiAgICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBkaXJzKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBBcHBseSBhIGxpbmtlciB0byBhIHZtL2VsZW1lbnQgcGFpciBhbmQgY2FwdHVyZSB0aGVcbiAqIGRpcmVjdGl2ZXMgY3JlYXRlZCBkdXJpbmcgdGhlIHByb2Nlc3MuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gbGlua2VyXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5mdW5jdGlvbiBsaW5rQW5kQ2FwdHVyZShsaW5rZXIsIHZtKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICAgIC8vIHJlc2V0IGRpcmVjdGl2ZXMgYmVmb3JlIGV2ZXJ5IGNhcHR1cmUgaW4gcHJvZHVjdGlvblxuICAgIC8vIG1vZGUsIHNvIHRoYXQgd2hlbiB1bmxpbmtpbmcgd2UgZG9uJ3QgbmVlZCB0byBzcGxpY2VcbiAgICAvLyB0aGVtIG91dCAod2hpY2ggdHVybnMgb3V0IHRvIGJlIGEgcGVyZiBoaXQpLlxuICAgIC8vIHRoZXkgYXJlIGtlcHQgaW4gZGV2ZWxvcG1lbnQgbW9kZSBiZWNhdXNlIHRoZXkgYXJlXG4gICAgLy8gdXNlZnVsIGZvciBWdWUncyBvd24gdGVzdHMuXG4gICAgdm0uX2RpcmVjdGl2ZXMgPSBbXTtcbiAgfVxuICB2YXIgb3JpZ2luYWxEaXJDb3VudCA9IHZtLl9kaXJlY3RpdmVzLmxlbmd0aDtcbiAgbGlua2VyKCk7XG4gIHZhciBkaXJzID0gdm0uX2RpcmVjdGl2ZXMuc2xpY2Uob3JpZ2luYWxEaXJDb3VudCk7XG4gIGRpcnMuc29ydChkaXJlY3RpdmVDb21wYXJhdG9yKTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBkaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGRpcnNbaV0uX2JpbmQoKTtcbiAgfVxuICByZXR1cm4gZGlycztcbn1cblxuLyoqXG4gKiBEaXJlY3RpdmUgcHJpb3JpdHkgc29ydCBjb21wYXJhdG9yXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGFcbiAqIEBwYXJhbSB7T2JqZWN0fSBiXG4gKi9cblxuZnVuY3Rpb24gZGlyZWN0aXZlQ29tcGFyYXRvcihhLCBiKSB7XG4gIGEgPSBhLmRlc2NyaXB0b3IuZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfUFJJT1JJVFk7XG4gIGIgPSBiLmRlc2NyaXB0b3IuZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfUFJJT1JJVFk7XG4gIHJldHVybiBhID4gYiA/IC0xIDogYSA9PT0gYiA/IDAgOiAxO1xufVxuXG4vKipcbiAqIExpbmtlciBmdW5jdGlvbnMgcmV0dXJuIGFuIHVubGluayBmdW5jdGlvbiB0aGF0XG4gKiB0ZWFyc2Rvd24gYWxsIGRpcmVjdGl2ZXMgaW5zdGFuY2VzIGdlbmVyYXRlZCBkdXJpbmdcbiAqIHRoZSBwcm9jZXNzLlxuICpcbiAqIFdlIGNyZWF0ZSB1bmxpbmsgZnVuY3Rpb25zIHdpdGggb25seSB0aGUgbmVjZXNzYXJ5XG4gKiBpbmZvcm1hdGlvbiB0byBhdm9pZCByZXRhaW5pbmcgYWRkaXRpb25hbCBjbG9zdXJlcy5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7QXJyYXl9IGRpcnNcbiAqIEBwYXJhbSB7VnVlfSBbY29udGV4dF1cbiAqIEBwYXJhbSB7QXJyYXl9IFtjb250ZXh0RGlyc11cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIG1ha2VVbmxpbmtGbih2bSwgZGlycywgY29udGV4dCwgY29udGV4dERpcnMpIHtcbiAgZnVuY3Rpb24gdW5saW5rKGRlc3Ryb3lpbmcpIHtcbiAgICB0ZWFyZG93bkRpcnModm0sIGRpcnMsIGRlc3Ryb3lpbmcpO1xuICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHREaXJzKSB7XG4gICAgICB0ZWFyZG93bkRpcnMoY29udGV4dCwgY29udGV4dERpcnMpO1xuICAgIH1cbiAgfVxuICAvLyBleHBvc2UgbGlua2VkIGRpcmVjdGl2ZXNcbiAgdW5saW5rLmRpcnMgPSBkaXJzO1xuICByZXR1cm4gdW5saW5rO1xufVxuXG4vKipcbiAqIFRlYXJkb3duIHBhcnRpYWwgbGlua2VkIGRpcmVjdGl2ZXMuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0FycmF5fSBkaXJzXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGRlc3Ryb3lpbmdcbiAqL1xuXG5mdW5jdGlvbiB0ZWFyZG93bkRpcnModm0sIGRpcnMsIGRlc3Ryb3lpbmcpIHtcbiAgdmFyIGkgPSBkaXJzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIGRpcnNbaV0uX3RlYXJkb3duKCk7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIWRlc3Ryb3lpbmcpIHtcbiAgICAgIHZtLl9kaXJlY3RpdmVzLiRyZW1vdmUoZGlyc1tpXSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ29tcGlsZSBsaW5rIHByb3BzIG9uIGFuIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzXG4gKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZUFuZExpbmtQcm9wcyh2bSwgZWwsIHByb3BzLCBzY29wZSkge1xuICB2YXIgcHJvcHNMaW5rRm4gPSBjb21waWxlUHJvcHMoZWwsIHByb3BzLCB2bSk7XG4gIHZhciBwcm9wRGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uICgpIHtcbiAgICBwcm9wc0xpbmtGbih2bSwgc2NvcGUpO1xuICB9LCB2bSk7XG4gIHJldHVybiBtYWtlVW5saW5rRm4odm0sIHByb3BEaXJzKTtcbn1cblxuLyoqXG4gKiBDb21waWxlIHRoZSByb290IGVsZW1lbnQgb2YgYW4gaW5zdGFuY2UuXG4gKlxuICogMS4gYXR0cnMgb24gY29udGV4dCBjb250YWluZXIgKGNvbnRleHQgc2NvcGUpXG4gKiAyLiBhdHRycyBvbiB0aGUgY29tcG9uZW50IHRlbXBsYXRlIHJvb3Qgbm9kZSwgaWZcbiAqICAgIHJlcGxhY2U6dHJ1ZSAoY2hpbGQgc2NvcGUpXG4gKlxuICogSWYgdGhpcyBpcyBhIGZyYWdtZW50IGluc3RhbmNlLCB3ZSBvbmx5IG5lZWQgdG8gY29tcGlsZSAxLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dE9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVSb290KGVsLCBvcHRpb25zLCBjb250ZXh0T3B0aW9ucykge1xuICB2YXIgY29udGFpbmVyQXR0cnMgPSBvcHRpb25zLl9jb250YWluZXJBdHRycztcbiAgdmFyIHJlcGxhY2VyQXR0cnMgPSBvcHRpb25zLl9yZXBsYWNlckF0dHJzO1xuICB2YXIgY29udGV4dExpbmtGbiwgcmVwbGFjZXJMaW5rRm47XG5cbiAgLy8gb25seSBuZWVkIHRvIGNvbXBpbGUgb3RoZXIgYXR0cmlidXRlcyBmb3JcbiAgLy8gbm9uLWZyYWdtZW50IGluc3RhbmNlc1xuICBpZiAoZWwubm9kZVR5cGUgIT09IDExKSB7XG4gICAgLy8gZm9yIGNvbXBvbmVudHMsIGNvbnRhaW5lciBhbmQgcmVwbGFjZXIgbmVlZCB0byBiZVxuICAgIC8vIGNvbXBpbGVkIHNlcGFyYXRlbHkgYW5kIGxpbmtlZCBpbiBkaWZmZXJlbnQgc2NvcGVzLlxuICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCkge1xuICAgICAgLy8gMi4gY29udGFpbmVyIGF0dHJpYnV0ZXNcbiAgICAgIGlmIChjb250YWluZXJBdHRycyAmJiBjb250ZXh0T3B0aW9ucykge1xuICAgICAgICBjb250ZXh0TGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoY29udGFpbmVyQXR0cnMsIGNvbnRleHRPcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXBsYWNlckF0dHJzKSB7XG4gICAgICAgIC8vIDMuIHJlcGxhY2VyIGF0dHJpYnV0ZXNcbiAgICAgICAgcmVwbGFjZXJMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhyZXBsYWNlckF0dHJzLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9uLWNvbXBvbmVudCwganVzdCBjb21waWxlIGFzIGEgbm9ybWFsIGVsZW1lbnQuXG4gICAgICByZXBsYWNlckxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGVsLmF0dHJpYnV0ZXMsIG9wdGlvbnMpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbnRhaW5lckF0dHJzKSB7XG4gICAgLy8gd2FybiBjb250YWluZXIgZGlyZWN0aXZlcyBmb3IgZnJhZ21lbnQgaW5zdGFuY2VzXG4gICAgdmFyIG5hbWVzID0gY29udGFpbmVyQXR0cnMuZmlsdGVyKGZ1bmN0aW9uIChhdHRyKSB7XG4gICAgICAvLyBhbGxvdyB2dWUtbG9hZGVyL3Z1ZWlmeSBzY29wZWQgY3NzIGF0dHJpYnV0ZXNcbiAgICAgIHJldHVybiBhdHRyLm5hbWUuaW5kZXhPZignX3YtJykgPCAwICYmXG4gICAgICAvLyBhbGxvdyBldmVudCBsaXN0ZW5lcnNcbiAgICAgICFvblJFLnRlc3QoYXR0ci5uYW1lKSAmJlxuICAgICAgLy8gYWxsb3cgc2xvdHNcbiAgICAgIGF0dHIubmFtZSAhPT0gJ3Nsb3QnO1xuICAgIH0pLm1hcChmdW5jdGlvbiAoYXR0cikge1xuICAgICAgcmV0dXJuICdcIicgKyBhdHRyLm5hbWUgKyAnXCInO1xuICAgIH0pO1xuICAgIGlmIChuYW1lcy5sZW5ndGgpIHtcbiAgICAgIHZhciBwbHVyYWwgPSBuYW1lcy5sZW5ndGggPiAxO1xuICAgICAgd2FybignQXR0cmlidXRlJyArIChwbHVyYWwgPyAncyAnIDogJyAnKSArIG5hbWVzLmpvaW4oJywgJykgKyAocGx1cmFsID8gJyBhcmUnIDogJyBpcycpICsgJyBpZ25vcmVkIG9uIGNvbXBvbmVudCAnICsgJzwnICsgb3B0aW9ucy5lbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyAnPiBiZWNhdXNlICcgKyAndGhlIGNvbXBvbmVudCBpcyBhIGZyYWdtZW50IGluc3RhbmNlOiAnICsgJ2h0dHA6Ly92dWVqcy5vcmcvZ3VpZGUvY29tcG9uZW50cy5odG1sI0ZyYWdtZW50LUluc3RhbmNlJyk7XG4gICAgfVxuICB9XG5cbiAgb3B0aW9ucy5fY29udGFpbmVyQXR0cnMgPSBvcHRpb25zLl9yZXBsYWNlckF0dHJzID0gbnVsbDtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJvb3RMaW5rRm4odm0sIGVsLCBzY29wZSkge1xuICAgIC8vIGxpbmsgY29udGV4dCBzY29wZSBkaXJzXG4gICAgdmFyIGNvbnRleHQgPSB2bS5fY29udGV4dDtcbiAgICB2YXIgY29udGV4dERpcnM7XG4gICAgaWYgKGNvbnRleHQgJiYgY29udGV4dExpbmtGbikge1xuICAgICAgY29udGV4dERpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnRleHRMaW5rRm4oY29udGV4dCwgZWwsIG51bGwsIHNjb3BlKTtcbiAgICAgIH0sIGNvbnRleHQpO1xuICAgIH1cblxuICAgIC8vIGxpbmsgc2VsZlxuICAgIHZhciBzZWxmRGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChyZXBsYWNlckxpbmtGbikgcmVwbGFjZXJMaW5rRm4odm0sIGVsKTtcbiAgICB9LCB2bSk7XG5cbiAgICAvLyByZXR1cm4gdGhlIHVubGluayBmdW5jdGlvbiB0aGF0IHRlYXJzZG93biBjb250ZXh0XG4gICAgLy8gY29udGFpbmVyIGRpcmVjdGl2ZXMuXG4gICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgc2VsZkRpcnMsIGNvbnRleHQsIGNvbnRleHREaXJzKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDb21waWxlIGEgbm9kZSBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbiBiYXNlZCBvbiB0aGVcbiAqIG5vZGUgdHlwZS5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVOb2RlKG5vZGUsIG9wdGlvbnMpIHtcbiAgdmFyIHR5cGUgPSBub2RlLm5vZGVUeXBlO1xuICBpZiAodHlwZSA9PT0gMSAmJiAhaXNTY3JpcHQobm9kZSkpIHtcbiAgICByZXR1cm4gY29tcGlsZUVsZW1lbnQobm9kZSwgb3B0aW9ucyk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gMyAmJiBub2RlLmRhdGEudHJpbSgpKSB7XG4gICAgcmV0dXJuIGNvbXBpbGVUZXh0Tm9kZShub2RlLCBvcHRpb25zKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIENvbXBpbGUgYW4gZWxlbWVudCBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258bnVsbH1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlRWxlbWVudChlbCwgb3B0aW9ucykge1xuICAvLyBwcmVwcm9jZXNzIHRleHRhcmVhcy5cbiAgLy8gdGV4dGFyZWEgdHJlYXRzIGl0cyB0ZXh0IGNvbnRlbnQgYXMgdGhlIGluaXRpYWwgdmFsdWUuXG4gIC8vIGp1c3QgYmluZCBpdCBhcyBhbiBhdHRyIGRpcmVjdGl2ZSBmb3IgdmFsdWUuXG4gIGlmIChlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgdmFyIHRva2VucyA9IHBhcnNlVGV4dChlbC52YWx1ZSk7XG4gICAgaWYgKHRva2Vucykge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCc6dmFsdWUnLCB0b2tlbnNUb0V4cCh0b2tlbnMpKTtcbiAgICAgIGVsLnZhbHVlID0gJyc7XG4gICAgfVxuICB9XG4gIHZhciBsaW5rRm47XG4gIHZhciBoYXNBdHRycyA9IGVsLmhhc0F0dHJpYnV0ZXMoKTtcbiAgdmFyIGF0dHJzID0gaGFzQXR0cnMgJiYgdG9BcnJheShlbC5hdHRyaWJ1dGVzKTtcbiAgLy8gY2hlY2sgdGVybWluYWwgZGlyZWN0aXZlcyAoZm9yICYgaWYpXG4gIGlmIChoYXNBdHRycykge1xuICAgIGxpbmtGbiA9IGNoZWNrVGVybWluYWxEaXJlY3RpdmVzKGVsLCBhdHRycywgb3B0aW9ucyk7XG4gIH1cbiAgLy8gY2hlY2sgZWxlbWVudCBkaXJlY3RpdmVzXG4gIGlmICghbGlua0ZuKSB7XG4gICAgbGlua0ZuID0gY2hlY2tFbGVtZW50RGlyZWN0aXZlcyhlbCwgb3B0aW9ucyk7XG4gIH1cbiAgLy8gY2hlY2sgY29tcG9uZW50XG4gIGlmICghbGlua0ZuKSB7XG4gICAgbGlua0ZuID0gY2hlY2tDb21wb25lbnQoZWwsIG9wdGlvbnMpO1xuICB9XG4gIC8vIG5vcm1hbCBkaXJlY3RpdmVzXG4gIGlmICghbGlua0ZuICYmIGhhc0F0dHJzKSB7XG4gICAgbGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoYXR0cnMsIG9wdGlvbnMpO1xuICB9XG4gIHJldHVybiBsaW5rRm47XG59XG5cbi8qKlxuICogQ29tcGlsZSBhIHRleHROb2RlIGFuZCByZXR1cm4gYSBub2RlTGlua0ZuLlxuICpcbiAqIEBwYXJhbSB7VGV4dE5vZGV9IG5vZGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfSB0ZXh0Tm9kZUxpbmtGblxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVUZXh0Tm9kZShub2RlLCBvcHRpb25zKSB7XG4gIC8vIHNraXAgbWFya2VkIHRleHQgbm9kZXNcbiAgaWYgKG5vZGUuX3NraXApIHtcbiAgICByZXR1cm4gcmVtb3ZlVGV4dDtcbiAgfVxuXG4gIHZhciB0b2tlbnMgPSBwYXJzZVRleHQobm9kZS53aG9sZVRleHQpO1xuICBpZiAoIXRva2Vucykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gbWFyayBhZGphY2VudCB0ZXh0IG5vZGVzIGFzIHNraXBwZWQsXG4gIC8vIGJlY2F1c2Ugd2UgYXJlIHVzaW5nIG5vZGUud2hvbGVUZXh0IHRvIGNvbXBpbGVcbiAgLy8gYWxsIGFkamFjZW50IHRleHQgbm9kZXMgdG9nZXRoZXIuIFRoaXMgZml4ZXNcbiAgLy8gaXNzdWVzIGluIElFIHdoZXJlIHNvbWV0aW1lcyBpdCBzcGxpdHMgdXAgYSBzaW5nbGVcbiAgLy8gdGV4dCBub2RlIGludG8gbXVsdGlwbGUgb25lcy5cbiAgdmFyIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuICB3aGlsZSAobmV4dCAmJiBuZXh0Lm5vZGVUeXBlID09PSAzKSB7XG4gICAgbmV4dC5fc2tpcCA9IHRydWU7XG4gICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmc7XG4gIH1cblxuICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgdmFyIGVsLCB0b2tlbjtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB0b2tlbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdG9rZW4gPSB0b2tlbnNbaV07XG4gICAgZWwgPSB0b2tlbi50YWcgPyBwcm9jZXNzVGV4dFRva2VuKHRva2VuLCBvcHRpb25zKSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRva2VuLnZhbHVlKTtcbiAgICBmcmFnLmFwcGVuZENoaWxkKGVsKTtcbiAgfVxuICByZXR1cm4gbWFrZVRleHROb2RlTGlua0ZuKHRva2VucywgZnJhZywgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogTGlua2VyIGZvciBhbiBza2lwcGVkIHRleHQgbm9kZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7VGV4dH0gbm9kZVxuICovXG5cbmZ1bmN0aW9uIHJlbW92ZVRleHQodm0sIG5vZGUpIHtcbiAgcmVtb3ZlKG5vZGUpO1xufVxuXG4vKipcbiAqIFByb2Nlc3MgYSBzaW5nbGUgdGV4dCB0b2tlbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtOb2RlfVxuICovXG5cbmZ1bmN0aW9uIHByb2Nlc3NUZXh0VG9rZW4odG9rZW4sIG9wdGlvbnMpIHtcbiAgdmFyIGVsO1xuICBpZiAodG9rZW4ub25lVGltZSkge1xuICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodG9rZW4udmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIGlmICh0b2tlbi5odG1sKSB7XG4gICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJ3YtaHRtbCcpO1xuICAgICAgc2V0VG9rZW5UeXBlKCdodG1sJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElFIHdpbGwgY2xlYW4gdXAgZW1wdHkgdGV4dE5vZGVzIGR1cmluZ1xuICAgICAgLy8gZnJhZy5jbG9uZU5vZGUodHJ1ZSksIHNvIHdlIGhhdmUgdG8gZ2l2ZSBpdFxuICAgICAgLy8gc29tZXRoaW5nIGhlcmUuLi5cbiAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJyAnKTtcbiAgICAgIHNldFRva2VuVHlwZSgndGV4dCcpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBzZXRUb2tlblR5cGUodHlwZSkge1xuICAgIGlmICh0b2tlbi5kZXNjcmlwdG9yKSByZXR1cm47XG4gICAgdmFyIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKHRva2VuLnZhbHVlKTtcbiAgICB0b2tlbi5kZXNjcmlwdG9yID0ge1xuICAgICAgbmFtZTogdHlwZSxcbiAgICAgIGRlZjogZGlyZWN0aXZlc1t0eXBlXSxcbiAgICAgIGV4cHJlc3Npb246IHBhcnNlZC5leHByZXNzaW9uLFxuICAgICAgZmlsdGVyczogcGFyc2VkLmZpbHRlcnNcbiAgICB9O1xuICB9XG4gIHJldHVybiBlbDtcbn1cblxuLyoqXG4gKiBCdWlsZCBhIGZ1bmN0aW9uIHRoYXQgcHJvY2Vzc2VzIGEgdGV4dE5vZGUuXG4gKlxuICogQHBhcmFtIHtBcnJheTxPYmplY3Q+fSB0b2tlbnNcbiAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuICovXG5cbmZ1bmN0aW9uIG1ha2VUZXh0Tm9kZUxpbmtGbih0b2tlbnMsIGZyYWcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHRleHROb2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUpIHtcbiAgICB2YXIgZnJhZ0Nsb25lID0gZnJhZy5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KGZyYWdDbG9uZS5jaGlsZE5vZGVzKTtcbiAgICB2YXIgdG9rZW4sIHZhbHVlLCBub2RlO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdG9rZW4gPSB0b2tlbnNbaV07XG4gICAgICB2YWx1ZSA9IHRva2VuLnZhbHVlO1xuICAgICAgaWYgKHRva2VuLnRhZykge1xuICAgICAgICBub2RlID0gY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgaWYgKHRva2VuLm9uZVRpbWUpIHtcbiAgICAgICAgICB2YWx1ZSA9IChzY29wZSB8fCB2bSkuJGV2YWwodmFsdWUpO1xuICAgICAgICAgIGlmICh0b2tlbi5odG1sKSB7XG4gICAgICAgICAgICByZXBsYWNlKG5vZGUsIHBhcnNlVGVtcGxhdGUodmFsdWUsIHRydWUpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbm9kZS5kYXRhID0gX3RvU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm0uX2JpbmREaXIodG9rZW4uZGVzY3JpcHRvciwgbm9kZSwgaG9zdCwgc2NvcGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJlcGxhY2UoZWwsIGZyYWdDbG9uZSk7XG4gIH07XG59XG5cbi8qKlxuICogQ29tcGlsZSBhIG5vZGUgbGlzdCBhbmQgcmV0dXJuIGEgY2hpbGRMaW5rRm4uXG4gKlxuICogQHBhcmFtIHtOb2RlTGlzdH0gbm9kZUxpc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZU5vZGVMaXN0KG5vZGVMaXN0LCBvcHRpb25zKSB7XG4gIHZhciBsaW5rRm5zID0gW107XG4gIHZhciBub2RlTGlua0ZuLCBjaGlsZExpbmtGbiwgbm9kZTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2RlTGlzdC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBub2RlID0gbm9kZUxpc3RbaV07XG4gICAgbm9kZUxpbmtGbiA9IGNvbXBpbGVOb2RlKG5vZGUsIG9wdGlvbnMpO1xuICAgIGNoaWxkTGlua0ZuID0gIShub2RlTGlua0ZuICYmIG5vZGVMaW5rRm4udGVybWluYWwpICYmIG5vZGUudGFnTmFtZSAhPT0gJ1NDUklQVCcgJiYgbm9kZS5oYXNDaGlsZE5vZGVzKCkgPyBjb21waWxlTm9kZUxpc3Qobm9kZS5jaGlsZE5vZGVzLCBvcHRpb25zKSA6IG51bGw7XG4gICAgbGlua0Zucy5wdXNoKG5vZGVMaW5rRm4sIGNoaWxkTGlua0ZuKTtcbiAgfVxuICByZXR1cm4gbGlua0Zucy5sZW5ndGggPyBtYWtlQ2hpbGRMaW5rRm4obGlua0ZucykgOiBudWxsO1xufVxuXG4vKipcbiAqIE1ha2UgYSBjaGlsZCBsaW5rIGZ1bmN0aW9uIGZvciBhIG5vZGUncyBjaGlsZE5vZGVzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8RnVuY3Rpb24+fSBsaW5rRm5zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gY2hpbGRMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlQ2hpbGRMaW5rRm4obGlua0Zucykge1xuICByZXR1cm4gZnVuY3Rpb24gY2hpbGRMaW5rRm4odm0sIG5vZGVzLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIHZhciBub2RlLCBub2RlTGlua0ZuLCBjaGlsZHJlbkxpbmtGbjtcbiAgICBmb3IgKHZhciBpID0gMCwgbiA9IDAsIGwgPSBsaW5rRm5zLmxlbmd0aDsgaSA8IGw7IG4rKykge1xuICAgICAgbm9kZSA9IG5vZGVzW25dO1xuICAgICAgbm9kZUxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcbiAgICAgIGNoaWxkcmVuTGlua0ZuID0gbGlua0Zuc1tpKytdO1xuICAgICAgLy8gY2FjaGUgY2hpbGROb2RlcyBiZWZvcmUgbGlua2luZyBwYXJlbnQsIGZpeCAjNjU3XG4gICAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkobm9kZS5jaGlsZE5vZGVzKTtcbiAgICAgIGlmIChub2RlTGlua0ZuKSB7XG4gICAgICAgIG5vZGVMaW5rRm4odm0sIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICAgIH1cbiAgICAgIGlmIChjaGlsZHJlbkxpbmtGbikge1xuICAgICAgICBjaGlsZHJlbkxpbmtGbih2bSwgY2hpbGROb2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBDaGVjayBmb3IgZWxlbWVudCBkaXJlY3RpdmVzIChjdXN0b20gZWxlbWVudHMgdGhhdCBzaG91bGRcbiAqIGJlIHJlc292bGVkIGFzIHRlcm1pbmFsIGRpcmVjdGl2ZXMpLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cblxuZnVuY3Rpb24gY2hlY2tFbGVtZW50RGlyZWN0aXZlcyhlbCwgb3B0aW9ucykge1xuICB2YXIgdGFnID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICBpZiAoY29tbW9uVGFnUkUudGVzdCh0YWcpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBkZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2VsZW1lbnREaXJlY3RpdmVzJywgdGFnKTtcbiAgaWYgKGRlZikge1xuICAgIHJldHVybiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCB0YWcsICcnLCBvcHRpb25zLCBkZWYpO1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIGNvbXBvbmVudC4gSWYgeWVzLCByZXR1cm5cbiAqIGEgY29tcG9uZW50IGxpbmsgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBjaGVja0NvbXBvbmVudChlbCwgb3B0aW9ucykge1xuICB2YXIgY29tcG9uZW50ID0gY2hlY2tDb21wb25lbnRBdHRyKGVsLCBvcHRpb25zKTtcbiAgaWYgKGNvbXBvbmVudCkge1xuICAgIHZhciByZWYgPSBmaW5kUmVmKGVsKTtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHtcbiAgICAgIG5hbWU6ICdjb21wb25lbnQnLFxuICAgICAgcmVmOiByZWYsXG4gICAgICBleHByZXNzaW9uOiBjb21wb25lbnQuaWQsXG4gICAgICBkZWY6IGludGVybmFsRGlyZWN0aXZlcy5jb21wb25lbnQsXG4gICAgICBtb2RpZmllcnM6IHtcbiAgICAgICAgbGl0ZXJhbDogIWNvbXBvbmVudC5keW5hbWljXG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgY29tcG9uZW50TGlua0ZuID0gZnVuY3Rpb24gY29tcG9uZW50TGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICAgIGlmIChyZWYpIHtcbiAgICAgICAgZGVmaW5lUmVhY3RpdmUoKHNjb3BlIHx8IHZtKS4kcmVmcywgcmVmLCBudWxsKTtcbiAgICAgIH1cbiAgICAgIHZtLl9iaW5kRGlyKGRlc2NyaXB0b3IsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgfTtcbiAgICBjb21wb25lbnRMaW5rRm4udGVybWluYWwgPSB0cnVlO1xuICAgIHJldHVybiBjb21wb25lbnRMaW5rRm47XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBhbiBlbGVtZW50IGZvciB0ZXJtaW5hbCBkaXJlY3RpdmVzIGluIGZpeGVkIG9yZGVyLlxuICogSWYgaXQgZmluZHMgb25lLCByZXR1cm4gYSB0ZXJtaW5hbCBsaW5rIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7QXJyYXl9IGF0dHJzXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb259IHRlcm1pbmFsTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gY2hlY2tUZXJtaW5hbERpcmVjdGl2ZXMoZWwsIGF0dHJzLCBvcHRpb25zKSB7XG4gIC8vIHNraXAgdi1wcmVcbiAgaWYgKGdldEF0dHIoZWwsICd2LXByZScpICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIHNraXA7XG4gIH1cbiAgLy8gc2tpcCB2LWVsc2UgYmxvY2ssIGJ1dCBvbmx5IGlmIGZvbGxvd2luZyB2LWlmXG4gIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3YtZWxzZScpKSB7XG4gICAgdmFyIHByZXYgPSBlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgIGlmIChwcmV2ICYmIHByZXYuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcbiAgICAgIHJldHVybiBza2lwO1xuICAgIH1cbiAgfVxuXG4gIHZhciBhdHRyLCBuYW1lLCB2YWx1ZSwgbW9kaWZpZXJzLCBtYXRjaGVkLCBkaXJOYW1lLCByYXdOYW1lLCBhcmcsIGRlZiwgdGVybURlZjtcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBhdHRycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICBhdHRyID0gYXR0cnNbaV07XG4gICAgbmFtZSA9IGF0dHIubmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKTtcbiAgICBpZiAobWF0Y2hlZCA9IG5hbWUubWF0Y2goZGlyQXR0clJFKSkge1xuICAgICAgZGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdkaXJlY3RpdmVzJywgbWF0Y2hlZFsxXSk7XG4gICAgICBpZiAoZGVmICYmIGRlZi50ZXJtaW5hbCkge1xuICAgICAgICBpZiAoIXRlcm1EZWYgfHwgKGRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1RFUk1JTkFMX1BSSU9SSVRZKSA+IHRlcm1EZWYucHJpb3JpdHkpIHtcbiAgICAgICAgICB0ZXJtRGVmID0gZGVmO1xuICAgICAgICAgIHJhd05hbWUgPSBhdHRyLm5hbWU7XG4gICAgICAgICAgbW9kaWZpZXJzID0gcGFyc2VNb2RpZmllcnMoYXR0ci5uYW1lKTtcbiAgICAgICAgICB2YWx1ZSA9IGF0dHIudmFsdWU7XG4gICAgICAgICAgZGlyTmFtZSA9IG1hdGNoZWRbMV07XG4gICAgICAgICAgYXJnID0gbWF0Y2hlZFsyXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmICh0ZXJtRGVmKSB7XG4gICAgcmV0dXJuIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIGRpck5hbWUsIHZhbHVlLCBvcHRpb25zLCB0ZXJtRGVmLCByYXdOYW1lLCBhcmcsIG1vZGlmaWVycyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2tpcCgpIHt9XG5za2lwLnRlcm1pbmFsID0gdHJ1ZTtcblxuLyoqXG4gKiBCdWlsZCBhIG5vZGUgbGluayBmdW5jdGlvbiBmb3IgYSB0ZXJtaW5hbCBkaXJlY3RpdmUuXG4gKiBBIHRlcm1pbmFsIGxpbmsgZnVuY3Rpb24gdGVybWluYXRlcyB0aGUgY3VycmVudFxuICogY29tcGlsYXRpb24gcmVjdXJzaW9uIGFuZCBoYW5kbGVzIGNvbXBpbGF0aW9uIG9mIHRoZVxuICogc3VidHJlZSBpbiB0aGUgZGlyZWN0aXZlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBkaXJOYW1lXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gZGVmXG4gKiBAcGFyYW0ge1N0cmluZ30gW3Jhd05hbWVdXG4gKiBAcGFyYW0ge1N0cmluZ30gW2FyZ11cbiAqIEBwYXJhbSB7T2JqZWN0fSBbbW9kaWZpZXJzXVxuICogQHJldHVybiB7RnVuY3Rpb259IHRlcm1pbmFsTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgZGlyTmFtZSwgdmFsdWUsIG9wdGlvbnMsIGRlZiwgcmF3TmFtZSwgYXJnLCBtb2RpZmllcnMpIHtcbiAgdmFyIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcbiAgdmFyIGRlc2NyaXB0b3IgPSB7XG4gICAgbmFtZTogZGlyTmFtZSxcbiAgICBhcmc6IGFyZyxcbiAgICBleHByZXNzaW9uOiBwYXJzZWQuZXhwcmVzc2lvbixcbiAgICBmaWx0ZXJzOiBwYXJzZWQuZmlsdGVycyxcbiAgICByYXc6IHZhbHVlLFxuICAgIGF0dHI6IHJhd05hbWUsXG4gICAgbW9kaWZpZXJzOiBtb2RpZmllcnMsXG4gICAgZGVmOiBkZWZcbiAgfTtcbiAgLy8gY2hlY2sgcmVmIGZvciB2LWZvciBhbmQgcm91dGVyLXZpZXdcbiAgaWYgKGRpck5hbWUgPT09ICdmb3InIHx8IGRpck5hbWUgPT09ICdyb3V0ZXItdmlldycpIHtcbiAgICBkZXNjcmlwdG9yLnJlZiA9IGZpbmRSZWYoZWwpO1xuICB9XG4gIHZhciBmbiA9IGZ1bmN0aW9uIHRlcm1pbmFsTm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgaWYgKGRlc2NyaXB0b3IucmVmKSB7XG4gICAgICBkZWZpbmVSZWFjdGl2ZSgoc2NvcGUgfHwgdm0pLiRyZWZzLCBkZXNjcmlwdG9yLnJlZiwgbnVsbCk7XG4gICAgfVxuICAgIHZtLl9iaW5kRGlyKGRlc2NyaXB0b3IsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gIH07XG4gIGZuLnRlcm1pbmFsID0gdHJ1ZTtcbiAgcmV0dXJuIGZuO1xufVxuXG4vKipcbiAqIENvbXBpbGUgdGhlIGRpcmVjdGl2ZXMgb24gYW4gZWxlbWVudCBhbmQgcmV0dXJuIGEgbGlua2VyLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl8TmFtZWROb2RlTWFwfSBhdHRyc1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVEaXJlY3RpdmVzKGF0dHJzLCBvcHRpb25zKSB7XG4gIHZhciBpID0gYXR0cnMubGVuZ3RoO1xuICB2YXIgZGlycyA9IFtdO1xuICB2YXIgYXR0ciwgbmFtZSwgdmFsdWUsIHJhd05hbWUsIHJhd1ZhbHVlLCBkaXJOYW1lLCBhcmcsIG1vZGlmaWVycywgZGlyRGVmLCB0b2tlbnMsIG1hdGNoZWQ7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBhdHRyID0gYXR0cnNbaV07XG4gICAgbmFtZSA9IHJhd05hbWUgPSBhdHRyLm5hbWU7XG4gICAgdmFsdWUgPSByYXdWYWx1ZSA9IGF0dHIudmFsdWU7XG4gICAgdG9rZW5zID0gcGFyc2VUZXh0KHZhbHVlKTtcbiAgICAvLyByZXNldCBhcmdcbiAgICBhcmcgPSBudWxsO1xuICAgIC8vIGNoZWNrIG1vZGlmaWVyc1xuICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKG5hbWUpO1xuICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UobW9kaWZpZXJSRSwgJycpO1xuXG4gICAgLy8gYXR0cmlidXRlIGludGVycG9sYXRpb25zXG4gICAgaWYgKHRva2Vucykge1xuICAgICAgdmFsdWUgPSB0b2tlbnNUb0V4cCh0b2tlbnMpO1xuICAgICAgYXJnID0gbmFtZTtcbiAgICAgIHB1c2hEaXIoJ2JpbmQnLCBkaXJlY3RpdmVzLmJpbmQsIHRva2Vucyk7XG4gICAgICAvLyB3YXJuIGFnYWluc3QgbWl4aW5nIG11c3RhY2hlcyB3aXRoIHYtYmluZFxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgQXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChhdHRycywgZnVuY3Rpb24gKGF0dHIpIHtcbiAgICAgICAgICByZXR1cm4gYXR0ci5uYW1lID09PSAnOmNsYXNzJyB8fCBhdHRyLm5hbWUgPT09ICd2LWJpbmQ6Y2xhc3MnO1xuICAgICAgICB9KSkge1xuICAgICAgICAgIHdhcm4oJ2NsYXNzPVwiJyArIHJhd1ZhbHVlICsgJ1wiOiBEbyBub3QgbWl4IG11c3RhY2hlIGludGVycG9sYXRpb24gJyArICdhbmQgdi1iaW5kIGZvciBcImNsYXNzXCIgb24gdGhlIHNhbWUgZWxlbWVudC4gVXNlIG9uZSBvciB0aGUgb3RoZXIuJywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2VcblxuICAgICAgLy8gc3BlY2lhbCBhdHRyaWJ1dGU6IHRyYW5zaXRpb25cbiAgICAgIGlmICh0cmFuc2l0aW9uUkUudGVzdChuYW1lKSkge1xuICAgICAgICBtb2RpZmllcnMubGl0ZXJhbCA9ICFiaW5kUkUudGVzdChuYW1lKTtcbiAgICAgICAgcHVzaERpcigndHJhbnNpdGlvbicsIGludGVybmFsRGlyZWN0aXZlcy50cmFuc2l0aW9uKTtcbiAgICAgIH0gZWxzZVxuXG4gICAgICAgIC8vIGV2ZW50IGhhbmRsZXJzXG4gICAgICAgIGlmIChvblJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgICBhcmcgPSBuYW1lLnJlcGxhY2Uob25SRSwgJycpO1xuICAgICAgICAgIHB1c2hEaXIoJ29uJywgZGlyZWN0aXZlcy5vbik7XG4gICAgICAgIH0gZWxzZVxuXG4gICAgICAgICAgLy8gYXR0cmlidXRlIGJpbmRpbmdzXG4gICAgICAgICAgaWYgKGJpbmRSRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgICAgICBkaXJOYW1lID0gbmFtZS5yZXBsYWNlKGJpbmRSRSwgJycpO1xuICAgICAgICAgICAgaWYgKGRpck5hbWUgPT09ICdzdHlsZScgfHwgZGlyTmFtZSA9PT0gJ2NsYXNzJykge1xuICAgICAgICAgICAgICBwdXNoRGlyKGRpck5hbWUsIGludGVybmFsRGlyZWN0aXZlc1tkaXJOYW1lXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhcmcgPSBkaXJOYW1lO1xuICAgICAgICAgICAgICBwdXNoRGlyKCdiaW5kJywgZGlyZWN0aXZlcy5iaW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2VcblxuICAgICAgICAgICAgLy8gbm9ybWFsIGRpcmVjdGl2ZXNcbiAgICAgICAgICAgIGlmIChtYXRjaGVkID0gbmFtZS5tYXRjaChkaXJBdHRyUkUpKSB7XG4gICAgICAgICAgICAgIGRpck5hbWUgPSBtYXRjaGVkWzFdO1xuICAgICAgICAgICAgICBhcmcgPSBtYXRjaGVkWzJdO1xuXG4gICAgICAgICAgICAgIC8vIHNraXAgdi1lbHNlICh3aGVuIHVzZWQgd2l0aCB2LXNob3cpXG4gICAgICAgICAgICAgIGlmIChkaXJOYW1lID09PSAnZWxzZScpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGRpckRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZGlyZWN0aXZlcycsIGRpck5hbWUsIHRydWUpO1xuICAgICAgICAgICAgICBpZiAoZGlyRGVmKSB7XG4gICAgICAgICAgICAgICAgcHVzaERpcihkaXJOYW1lLCBkaXJEZWYpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHVzaCBhIGRpcmVjdGl2ZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGRpck5hbWVcbiAgICogQHBhcmFtIHtPYmplY3R8RnVuY3Rpb259IGRlZlxuICAgKiBAcGFyYW0ge0FycmF5fSBbaW50ZXJwVG9rZW5zXVxuICAgKi9cblxuICBmdW5jdGlvbiBwdXNoRGlyKGRpck5hbWUsIGRlZiwgaW50ZXJwVG9rZW5zKSB7XG4gICAgdmFyIGhhc09uZVRpbWVUb2tlbiA9IGludGVycFRva2VucyAmJiBoYXNPbmVUaW1lKGludGVycFRva2Vucyk7XG4gICAgdmFyIHBhcnNlZCA9ICFoYXNPbmVUaW1lVG9rZW4gJiYgcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuICAgIGRpcnMucHVzaCh7XG4gICAgICBuYW1lOiBkaXJOYW1lLFxuICAgICAgYXR0cjogcmF3TmFtZSxcbiAgICAgIHJhdzogcmF3VmFsdWUsXG4gICAgICBkZWY6IGRlZixcbiAgICAgIGFyZzogYXJnLFxuICAgICAgbW9kaWZpZXJzOiBtb2RpZmllcnMsXG4gICAgICAvLyBjb252ZXJzaW9uIGZyb20gaW50ZXJwb2xhdGlvbiBzdHJpbmdzIHdpdGggb25lLXRpbWUgdG9rZW5cbiAgICAgIC8vIHRvIGV4cHJlc3Npb24gaXMgZGlmZmVyZWQgdW50aWwgZGlyZWN0aXZlIGJpbmQgdGltZSBzbyB0aGF0IHdlXG4gICAgICAvLyBoYXZlIGFjY2VzcyB0byB0aGUgYWN0dWFsIHZtIGNvbnRleHQgZm9yIG9uZS10aW1lIGJpbmRpbmdzLlxuICAgICAgZXhwcmVzc2lvbjogcGFyc2VkICYmIHBhcnNlZC5leHByZXNzaW9uLFxuICAgICAgZmlsdGVyczogcGFyc2VkICYmIHBhcnNlZC5maWx0ZXJzLFxuICAgICAgaW50ZXJwOiBpbnRlcnBUb2tlbnMsXG4gICAgICBoYXNPbmVUaW1lOiBoYXNPbmVUaW1lVG9rZW5cbiAgICB9KTtcbiAgfVxuXG4gIGlmIChkaXJzLmxlbmd0aCkge1xuICAgIHJldHVybiBtYWtlTm9kZUxpbmtGbihkaXJzKTtcbiAgfVxufVxuXG4vKipcbiAqIFBhcnNlIG1vZGlmaWVycyBmcm9tIGRpcmVjdGl2ZSBhdHRyaWJ1dGUgbmFtZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlTW9kaWZpZXJzKG5hbWUpIHtcbiAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHZhciBtYXRjaCA9IG5hbWUubWF0Y2gobW9kaWZpZXJSRSk7XG4gIGlmIChtYXRjaCkge1xuICAgIHZhciBpID0gbWF0Y2gubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHJlc1ttYXRjaFtpXS5zbGljZSgxKV0gPSB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEJ1aWxkIGEgbGluayBmdW5jdGlvbiBmb3IgYWxsIGRpcmVjdGl2ZXMgb24gYSBzaW5nbGUgbm9kZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBkaXJlY3RpdmVzXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gZGlyZWN0aXZlc0xpbmtGblxuICovXG5cbmZ1bmN0aW9uIG1ha2VOb2RlTGlua0ZuKGRpcmVjdGl2ZXMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIG5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIC8vIHJldmVyc2UgYXBwbHkgYmVjYXVzZSBpdCdzIHNvcnRlZCBsb3cgdG8gaGlnaFxuICAgIHZhciBpID0gZGlyZWN0aXZlcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdm0uX2JpbmREaXIoZGlyZWN0aXZlc1tpXSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gaW50ZXJwb2xhdGlvbiBzdHJpbmcgY29udGFpbnMgb25lLXRpbWUgdG9rZW5zLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBoYXNPbmVUaW1lKHRva2Vucykge1xuICB2YXIgaSA9IHRva2Vucy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBpZiAodG9rZW5zW2ldLm9uZVRpbWUpIHJldHVybiB0cnVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzU2NyaXB0KGVsKSB7XG4gIHJldHVybiBlbC50YWdOYW1lID09PSAnU0NSSVBUJyAmJiAoIWVsLmhhc0F0dHJpYnV0ZSgndHlwZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAndGV4dC9qYXZhc2NyaXB0Jyk7XG59XG5cbnZhciBzcGVjaWFsQ2hhclJFID0gL1teXFx3XFwtOlxcLl0vO1xuXG4vKipcbiAqIFByb2Nlc3MgYW4gZWxlbWVudCBvciBhIERvY3VtZW50RnJhZ21lbnQgYmFzZWQgb24gYVxuICogaW5zdGFuY2Ugb3B0aW9uIG9iamVjdC4gVGhpcyBhbGxvd3MgdXMgdG8gdHJhbnNjbHVkZVxuICogYSB0ZW1wbGF0ZSBub2RlL2ZyYWdtZW50IGJlZm9yZSB0aGUgaW5zdGFuY2UgaXMgY3JlYXRlZCxcbiAqIHNvIHRoZSBwcm9jZXNzZWQgZnJhZ21lbnQgY2FuIHRoZW4gYmUgY2xvbmVkIGFuZCByZXVzZWRcbiAqIGluIHYtZm9yLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gdHJhbnNjbHVkZShlbCwgb3B0aW9ucykge1xuICAvLyBleHRyYWN0IGNvbnRhaW5lciBhdHRyaWJ1dGVzIHRvIHBhc3MgdGhlbSBkb3duXG4gIC8vIHRvIGNvbXBpbGVyLCBiZWNhdXNlIHRoZXkgbmVlZCB0byBiZSBjb21waWxlZCBpblxuICAvLyBwYXJlbnQgc2NvcGUuIHdlIGFyZSBtdXRhdGluZyB0aGUgb3B0aW9ucyBvYmplY3QgaGVyZVxuICAvLyBhc3N1bWluZyB0aGUgc2FtZSBvYmplY3Qgd2lsbCBiZSB1c2VkIGZvciBjb21waWxlXG4gIC8vIHJpZ2h0IGFmdGVyIHRoaXMuXG4gIGlmIChvcHRpb25zKSB7XG4gICAgb3B0aW9ucy5fY29udGFpbmVyQXR0cnMgPSBleHRyYWN0QXR0cnMoZWwpO1xuICB9XG4gIC8vIGZvciB0ZW1wbGF0ZSB0YWdzLCB3aGF0IHdlIHdhbnQgaXMgaXRzIGNvbnRlbnQgYXNcbiAgLy8gYSBkb2N1bWVudEZyYWdtZW50IChmb3IgZnJhZ21lbnQgaW5zdGFuY2VzKVxuICBpZiAoaXNUZW1wbGF0ZShlbCkpIHtcbiAgICBlbCA9IHBhcnNlVGVtcGxhdGUoZWwpO1xuICB9XG4gIGlmIChvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50ICYmICFvcHRpb25zLnRlbXBsYXRlKSB7XG4gICAgICBvcHRpb25zLnRlbXBsYXRlID0gJzxzbG90Pjwvc2xvdD4nO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy50ZW1wbGF0ZSkge1xuICAgICAgb3B0aW9ucy5fY29udGVudCA9IGV4dHJhY3RDb250ZW50KGVsKTtcbiAgICAgIGVsID0gdHJhbnNjbHVkZVRlbXBsYXRlKGVsLCBvcHRpb25zKTtcbiAgICB9XG4gIH1cbiAgaWYgKGlzRnJhZ21lbnQoZWwpKSB7XG4gICAgLy8gYW5jaG9ycyBmb3IgZnJhZ21lbnQgaW5zdGFuY2VcbiAgICAvLyBwYXNzaW5nIGluIGBwZXJzaXN0OiB0cnVlYCB0byBhdm9pZCB0aGVtIGJlaW5nXG4gICAgLy8gZGlzY2FyZGVkIGJ5IElFIGR1cmluZyB0ZW1wbGF0ZSBjbG9uaW5nXG4gICAgcHJlcGVuZChjcmVhdGVBbmNob3IoJ3Ytc3RhcnQnLCB0cnVlKSwgZWwpO1xuICAgIGVsLmFwcGVuZENoaWxkKGNyZWF0ZUFuY2hvcigndi1lbmQnLCB0cnVlKSk7XG4gIH1cbiAgcmV0dXJuIGVsO1xufVxuXG4vKipcbiAqIFByb2Nlc3MgdGhlIHRlbXBsYXRlIG9wdGlvbi5cbiAqIElmIHRoZSByZXBsYWNlIG9wdGlvbiBpcyB0cnVlIHRoaXMgd2lsbCBzd2FwIHRoZSAkZWwuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiB0cmFuc2NsdWRlVGVtcGxhdGUoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIHRlbXBsYXRlID0gb3B0aW9ucy50ZW1wbGF0ZTtcbiAgdmFyIGZyYWcgPSBwYXJzZVRlbXBsYXRlKHRlbXBsYXRlLCB0cnVlKTtcbiAgaWYgKGZyYWcpIHtcbiAgICB2YXIgcmVwbGFjZXIgPSBmcmFnLmZpcnN0Q2hpbGQ7XG4gICAgdmFyIHRhZyA9IHJlcGxhY2VyLnRhZ05hbWUgJiYgcmVwbGFjZXIudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChvcHRpb25zLnJlcGxhY2UpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKGVsID09PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignWW91IGFyZSBtb3VudGluZyBhbiBpbnN0YW5jZSB3aXRoIGEgdGVtcGxhdGUgdG8gJyArICc8Ym9keT4uIFRoaXMgd2lsbCByZXBsYWNlIDxib2R5PiBlbnRpcmVseS4gWW91ICcgKyAnc2hvdWxkIHByb2JhYmx5IHVzZSBgcmVwbGFjZTogZmFsc2VgIGhlcmUuJyk7XG4gICAgICB9XG4gICAgICAvLyB0aGVyZSBhcmUgbWFueSBjYXNlcyB3aGVyZSB0aGUgaW5zdGFuY2UgbXVzdFxuICAgICAgLy8gYmVjb21lIGEgZnJhZ21lbnQgaW5zdGFuY2U6IGJhc2ljYWxseSBhbnl0aGluZyB0aGF0XG4gICAgICAvLyBjYW4gY3JlYXRlIG1vcmUgdGhhbiAxIHJvb3Qgbm9kZXMuXG4gICAgICBpZiAoXG4gICAgICAvLyBtdWx0aS1jaGlsZHJlbiB0ZW1wbGF0ZVxuICAgICAgZnJhZy5jaGlsZE5vZGVzLmxlbmd0aCA+IDEgfHxcbiAgICAgIC8vIG5vbi1lbGVtZW50IHRlbXBsYXRlXG4gICAgICByZXBsYWNlci5ub2RlVHlwZSAhPT0gMSB8fFxuICAgICAgLy8gc2luZ2xlIG5lc3RlZCBjb21wb25lbnRcbiAgICAgIHRhZyA9PT0gJ2NvbXBvbmVudCcgfHwgcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgdGFnKSB8fCBoYXNCaW5kQXR0cihyZXBsYWNlciwgJ2lzJykgfHxcbiAgICAgIC8vIGVsZW1lbnQgZGlyZWN0aXZlXG4gICAgICByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2VsZW1lbnREaXJlY3RpdmVzJywgdGFnKSB8fFxuICAgICAgLy8gZm9yIGJsb2NrXG4gICAgICByZXBsYWNlci5oYXNBdHRyaWJ1dGUoJ3YtZm9yJykgfHxcbiAgICAgIC8vIGlmIGJsb2NrXG4gICAgICByZXBsYWNlci5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuICAgICAgICByZXR1cm4gZnJhZztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdGlvbnMuX3JlcGxhY2VyQXR0cnMgPSBleHRyYWN0QXR0cnMocmVwbGFjZXIpO1xuICAgICAgICBtZXJnZUF0dHJzKGVsLCByZXBsYWNlcik7XG4gICAgICAgIHJldHVybiByZXBsYWNlcjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWwuYXBwZW5kQ2hpbGQoZnJhZyk7XG4gICAgICByZXR1cm4gZWw7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCB0ZW1wbGF0ZSBvcHRpb246ICcgKyB0ZW1wbGF0ZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZXh0cmFjdCBhIGNvbXBvbmVudCBjb250YWluZXIncyBhdHRyaWJ1dGVzXG4gKiBpbnRvIGEgcGxhaW4gb2JqZWN0IGFycmF5LlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5cbmZ1bmN0aW9uIGV4dHJhY3RBdHRycyhlbCkge1xuICBpZiAoZWwubm9kZVR5cGUgPT09IDEgJiYgZWwuaGFzQXR0cmlidXRlcygpKSB7XG4gICAgcmV0dXJuIHRvQXJyYXkoZWwuYXR0cmlidXRlcyk7XG4gIH1cbn1cblxuLyoqXG4gKiBNZXJnZSB0aGUgYXR0cmlidXRlcyBvZiB0d28gZWxlbWVudHMsIGFuZCBtYWtlIHN1cmVcbiAqIHRoZSBjbGFzcyBuYW1lcyBhcmUgbWVyZ2VkIHByb3Blcmx5LlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZnJvbVxuICogQHBhcmFtIHtFbGVtZW50fSB0b1xuICovXG5cbmZ1bmN0aW9uIG1lcmdlQXR0cnMoZnJvbSwgdG8pIHtcbiAgdmFyIGF0dHJzID0gZnJvbS5hdHRyaWJ1dGVzO1xuICB2YXIgaSA9IGF0dHJzLmxlbmd0aDtcbiAgdmFyIG5hbWUsIHZhbHVlO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG4gICAgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZTtcbiAgICBpZiAoIXRvLmhhc0F0dHJpYnV0ZShuYW1lKSAmJiAhc3BlY2lhbENoYXJSRS50ZXN0KG5hbWUpKSB7XG4gICAgICB0by5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ2NsYXNzJyAmJiAhcGFyc2VUZXh0KHZhbHVlKSAmJiAodmFsdWUgPSB2YWx1ZS50cmltKCkpKSB7XG4gICAgICB2YWx1ZS5zcGxpdCgvXFxzKy8pLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuICAgICAgICBhZGRDbGFzcyh0bywgY2xzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFNjYW4gYW5kIGRldGVybWluZSBzbG90IGNvbnRlbnQgZGlzdHJpYnV0aW9uLlxuICogV2UgZG8gdGhpcyBkdXJpbmcgdHJhbnNjbHVzaW9uIGluc3RlYWQgYXQgY29tcGlsZSB0aW1lIHNvIHRoYXRcbiAqIHRoZSBkaXN0cmlidXRpb24gaXMgZGVjb3VwbGVkIGZyb20gdGhlIGNvbXBpbGF0aW9uIG9yZGVyIG9mXG4gKiB0aGUgc2xvdHMuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IHRlbXBsYXRlXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRlbnRcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICovXG5cbmZ1bmN0aW9uIHJlc29sdmVTbG90cyh2bSwgY29udGVudCkge1xuICBpZiAoIWNvbnRlbnQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGNvbnRlbnRzID0gdm0uX3Nsb3RDb250ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHZhciBlbCwgbmFtZTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb250ZW50LmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGVsID0gY29udGVudC5jaGlsZHJlbltpXTtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIGlmIChuYW1lID0gZWwuZ2V0QXR0cmlidXRlKCdzbG90JykpIHtcbiAgICAgIChjb250ZW50c1tuYW1lXSB8fCAoY29udGVudHNbbmFtZV0gPSBbXSkpLnB1c2goZWwpO1xuICAgIH1cbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgZ2V0QmluZEF0dHIoZWwsICdzbG90JykpIHtcbiAgICAgIHdhcm4oJ1RoZSBcInNsb3RcIiBhdHRyaWJ1dGUgbXVzdCBiZSBzdGF0aWMuJywgdm0uJHBhcmVudCk7XG4gICAgfVxuICB9XG4gIGZvciAobmFtZSBpbiBjb250ZW50cykge1xuICAgIGNvbnRlbnRzW25hbWVdID0gZXh0cmFjdEZyYWdtZW50KGNvbnRlbnRzW25hbWVdLCBjb250ZW50KTtcbiAgfVxuICBpZiAoY29udGVudC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICB2YXIgbm9kZXMgPSBjb250ZW50LmNoaWxkTm9kZXM7XG4gICAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gMSAmJiBub2Rlc1swXS5ub2RlVHlwZSA9PT0gMyAmJiAhbm9kZXNbMF0uZGF0YS50cmltKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29udGVudHNbJ2RlZmF1bHQnXSA9IGV4dHJhY3RGcmFnbWVudChjb250ZW50LmNoaWxkTm9kZXMsIGNvbnRlbnQpO1xuICB9XG59XG5cbi8qKlxuICogRXh0cmFjdCBxdWFsaWZpZWQgY29udGVudCBub2RlcyBmcm9tIGEgbm9kZSBsaXN0LlxuICpcbiAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVzXG4gKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIGV4dHJhY3RGcmFnbWVudChub2RlcywgcGFyZW50KSB7XG4gIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICBub2RlcyA9IHRvQXJyYXkobm9kZXMpO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHZhciBub2RlID0gbm9kZXNbaV07XG4gICAgaWYgKGlzVGVtcGxhdGUobm9kZSkgJiYgIW5vZGUuaGFzQXR0cmlidXRlKCd2LWlmJykgJiYgIW5vZGUuaGFzQXR0cmlidXRlKCd2LWZvcicpKSB7XG4gICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICBub2RlID0gcGFyc2VUZW1wbGF0ZShub2RlLCB0cnVlKTtcbiAgICB9XG4gICAgZnJhZy5hcHBlbmRDaGlsZChub2RlKTtcbiAgfVxuICByZXR1cm4gZnJhZztcbn1cblxuXG5cbnZhciBjb21waWxlciA9IE9iamVjdC5mcmVlemUoe1xuXHRjb21waWxlOiBjb21waWxlLFxuXHRjb21waWxlQW5kTGlua1Byb3BzOiBjb21waWxlQW5kTGlua1Byb3BzLFxuXHRjb21waWxlUm9vdDogY29tcGlsZVJvb3QsXG5cdHRyYW5zY2x1ZGU6IHRyYW5zY2x1ZGUsXG5cdHJlc29sdmVTbG90czogcmVzb2x2ZVNsb3RzXG59KTtcblxuZnVuY3Rpb24gc3RhdGVNaXhpbiAoVnVlKSB7XG4gIC8qKlxuICAgKiBBY2Nlc3NvciBmb3IgYCRkYXRhYCBwcm9wZXJ0eSwgc2luY2Ugc2V0dGluZyAkZGF0YVxuICAgKiByZXF1aXJlcyBvYnNlcnZpbmcgdGhlIG5ldyBvYmplY3QgYW5kIHVwZGF0aW5nXG4gICAqIHByb3hpZWQgcHJvcGVydGllcy5cbiAgICovXG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckZGF0YScsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQobmV3RGF0YSkge1xuICAgICAgaWYgKG5ld0RhdGEgIT09IHRoaXMuX2RhdGEpIHtcbiAgICAgICAgdGhpcy5fc2V0RGF0YShuZXdEYXRhKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgc2NvcGUgb2YgYW4gaW5zdGFuY2UsIHdoaWNoIGNvbnRhaW5zOlxuICAgKiAtIG9ic2VydmVkIGRhdGFcbiAgICogLSBjb21wdXRlZCBwcm9wZXJ0aWVzXG4gICAqIC0gdXNlciBtZXRob2RzXG4gICAqIC0gbWV0YSBwcm9wZXJ0aWVzXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9pbml0UHJvcHMoKTtcbiAgICB0aGlzLl9pbml0TWV0YSgpO1xuICAgIHRoaXMuX2luaXRNZXRob2RzKCk7XG4gICAgdGhpcy5faW5pdERhdGEoKTtcbiAgICB0aGlzLl9pbml0Q29tcHV0ZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBwcm9wcy5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdFByb3BzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcbiAgICB2YXIgZWwgPSBvcHRpb25zLmVsO1xuICAgIHZhciBwcm9wcyA9IG9wdGlvbnMucHJvcHM7XG4gICAgaWYgKHByb3BzICYmICFlbCkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdQcm9wcyB3aWxsIG5vdCBiZSBjb21waWxlZCBpZiBubyBgZWxgIG9wdGlvbiBpcyAnICsgJ3Byb3ZpZGVkIGF0IGluc3RhbnRpYXRpb24uJywgdGhpcyk7XG4gICAgfVxuICAgIC8vIG1ha2Ugc3VyZSB0byBjb252ZXJ0IHN0cmluZyBzZWxlY3RvcnMgaW50byBlbGVtZW50IG5vd1xuICAgIGVsID0gb3B0aW9ucy5lbCA9IHF1ZXJ5KGVsKTtcbiAgICB0aGlzLl9wcm9wc1VubGlua0ZuID0gZWwgJiYgZWwubm9kZVR5cGUgPT09IDEgJiYgcHJvcHNcbiAgICAvLyBwcm9wcyBtdXN0IGJlIGxpbmtlZCBpbiBwcm9wZXIgc2NvcGUgaWYgaW5zaWRlIHYtZm9yXG4gICAgPyBjb21waWxlQW5kTGlua1Byb3BzKHRoaXMsIGVsLCBwcm9wcywgdGhpcy5fc2NvcGUpIDogbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSB0aGUgZGF0YS5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGRhdGFGbiA9IHRoaXMuJG9wdGlvbnMuZGF0YTtcbiAgICB2YXIgZGF0YSA9IHRoaXMuX2RhdGEgPSBkYXRhRm4gPyBkYXRhRm4oKSA6IHt9O1xuICAgIGlmICghaXNQbGFpbk9iamVjdChkYXRhKSkge1xuICAgICAgZGF0YSA9IHt9O1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdkYXRhIGZ1bmN0aW9ucyBzaG91bGQgcmV0dXJuIGFuIG9iamVjdC4nLCB0aGlzKTtcbiAgICB9XG4gICAgdmFyIHByb3BzID0gdGhpcy5fcHJvcHM7XG4gICAgLy8gcHJveHkgZGF0YSBvbiBpbnN0YW5jZVxuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XG4gICAgdmFyIGksIGtleTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgIC8vIHRoZXJlIGFyZSB0d28gc2NlbmFyaW9zIHdoZXJlIHdlIGNhbiBwcm94eSBhIGRhdGEga2V5OlxuICAgICAgLy8gMS4gaXQncyBub3QgYWxyZWFkeSBkZWZpbmVkIGFzIGEgcHJvcFxuICAgICAgLy8gMi4gaXQncyBwcm92aWRlZCB2aWEgYSBpbnN0YW50aWF0aW9uIG9wdGlvbiBBTkQgdGhlcmUgYXJlIG5vXG4gICAgICAvLyAgICB0ZW1wbGF0ZSBwcm9wIHByZXNlbnRcbiAgICAgIGlmICghcHJvcHMgfHwgIWhhc093bihwcm9wcywga2V5KSkge1xuICAgICAgICB0aGlzLl9wcm94eShrZXkpO1xuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHdhcm4oJ0RhdGEgZmllbGQgXCInICsga2V5ICsgJ1wiIGlzIGFscmVhZHkgZGVmaW5lZCAnICsgJ2FzIGEgcHJvcC4gVG8gcHJvdmlkZSBkZWZhdWx0IHZhbHVlIGZvciBhIHByb3AsIHVzZSB0aGUgXCJkZWZhdWx0XCIgJyArICdwcm9wIG9wdGlvbjsgaWYgeW91IHdhbnQgdG8gcGFzcyBwcm9wIHZhbHVlcyB0byBhbiBpbnN0YW50aWF0aW9uICcgKyAnY2FsbCwgdXNlIHRoZSBcInByb3BzRGF0YVwiIG9wdGlvbi4nLCB0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gb2JzZXJ2ZSBkYXRhXG4gICAgb2JzZXJ2ZShkYXRhLCB0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogU3dhcCB0aGUgaW5zdGFuY2UncyAkZGF0YS4gQ2FsbGVkIGluICRkYXRhJ3Mgc2V0dGVyLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gbmV3RGF0YVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9zZXREYXRhID0gZnVuY3Rpb24gKG5ld0RhdGEpIHtcbiAgICBuZXdEYXRhID0gbmV3RGF0YSB8fCB7fTtcbiAgICB2YXIgb2xkRGF0YSA9IHRoaXMuX2RhdGE7XG4gICAgdGhpcy5fZGF0YSA9IG5ld0RhdGE7XG4gICAgdmFyIGtleXMsIGtleSwgaTtcbiAgICAvLyB1bnByb3h5IGtleXMgbm90IHByZXNlbnQgaW4gbmV3IGRhdGFcbiAgICBrZXlzID0gT2JqZWN0LmtleXMob2xkRGF0YSk7XG4gICAgaSA9IGtleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICBpZiAoIShrZXkgaW4gbmV3RGF0YSkpIHtcbiAgICAgICAgdGhpcy5fdW5wcm94eShrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBwcm94eSBrZXlzIG5vdCBhbHJlYWR5IHByb3hpZWQsXG4gICAgLy8gYW5kIHRyaWdnZXIgY2hhbmdlIGZvciBjaGFuZ2VkIHZhbHVlc1xuICAgIGtleXMgPSBPYmplY3Qua2V5cyhuZXdEYXRhKTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgIGlmICghaGFzT3duKHRoaXMsIGtleSkpIHtcbiAgICAgICAgLy8gbmV3IHByb3BlcnR5XG4gICAgICAgIHRoaXMuX3Byb3h5KGtleSk7XG4gICAgICB9XG4gICAgfVxuICAgIG9sZERhdGEuX19vYl9fLnJlbW92ZVZtKHRoaXMpO1xuICAgIG9ic2VydmUobmV3RGF0YSwgdGhpcyk7XG4gICAgdGhpcy5fZGlnZXN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFByb3h5IGEgcHJvcGVydHksIHNvIHRoYXRcbiAgICogdm0ucHJvcCA9PT0gdm0uX2RhdGEucHJvcFxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX3Byb3h5ID0gZnVuY3Rpb24gKGtleSkge1xuICAgIGlmICghaXNSZXNlcnZlZChrZXkpKSB7XG4gICAgICAvLyBuZWVkIHRvIHN0b3JlIHJlZiB0byBzZWxmIGhlcmVcbiAgICAgIC8vIGJlY2F1c2UgdGhlc2UgZ2V0dGVyL3NldHRlcnMgbWlnaHRcbiAgICAgIC8vIGJlIGNhbGxlZCBieSBjaGlsZCBzY29wZXMgdmlhXG4gICAgICAvLyBwcm90b3R5cGUgaW5oZXJpdGFuY2UuXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwga2V5LCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBwcm94eUdldHRlcigpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5fZGF0YVtrZXldO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHByb3h5U2V0dGVyKHZhbCkge1xuICAgICAgICAgIHNlbGYuX2RhdGFba2V5XSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBVbnByb3h5IGEgcHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fdW5wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICBpZiAoIWlzUmVzZXJ2ZWQoa2V5KSkge1xuICAgICAgZGVsZXRlIHRoaXNba2V5XTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEZvcmNlIHVwZGF0ZSBvbiBldmVyeSB3YXRjaGVyIGluIHNjb3BlLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9kaWdlc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLl93YXRjaGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHRoaXMuX3dhdGNoZXJzW2ldLnVwZGF0ZSh0cnVlKTsgLy8gc2hhbGxvdyB1cGRhdGVzXG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXR1cCBjb21wdXRlZCBwcm9wZXJ0aWVzLiBUaGV5IGFyZSBlc3NlbnRpYWxseVxuICAgKiBzcGVjaWFsIGdldHRlci9zZXR0ZXJzXG4gICAqL1xuXG4gIGZ1bmN0aW9uIG5vb3AoKSB7fVxuICBWdWUucHJvdG90eXBlLl9pbml0Q29tcHV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNvbXB1dGVkID0gdGhpcy4kb3B0aW9ucy5jb21wdXRlZDtcbiAgICBpZiAoY29tcHV0ZWQpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBjb21wdXRlZCkge1xuICAgICAgICB2YXIgdXNlckRlZiA9IGNvbXB1dGVkW2tleV07XG4gICAgICAgIHZhciBkZWYgPSB7XG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHR5cGVvZiB1c2VyRGVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgZGVmLmdldCA9IG1ha2VDb21wdXRlZEdldHRlcih1c2VyRGVmLCB0aGlzKTtcbiAgICAgICAgICBkZWYuc2V0ID0gbm9vcDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWYuZ2V0ID0gdXNlckRlZi5nZXQgPyB1c2VyRGVmLmNhY2hlICE9PSBmYWxzZSA/IG1ha2VDb21wdXRlZEdldHRlcih1c2VyRGVmLmdldCwgdGhpcykgOiBiaW5kKHVzZXJEZWYuZ2V0LCB0aGlzKSA6IG5vb3A7XG4gICAgICAgICAgZGVmLnNldCA9IHVzZXJEZWYuc2V0ID8gYmluZCh1c2VyRGVmLnNldCwgdGhpcykgOiBub29wO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrZXksIGRlZik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIG1ha2VDb21wdXRlZEdldHRlcihnZXR0ZXIsIG93bmVyKSB7XG4gICAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcihvd25lciwgZ2V0dGVyLCBudWxsLCB7XG4gICAgICBsYXp5OiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGNvbXB1dGVkR2V0dGVyKCkge1xuICAgICAgaWYgKHdhdGNoZXIuZGlydHkpIHtcbiAgICAgICAgd2F0Y2hlci5ldmFsdWF0ZSgpO1xuICAgICAgfVxuICAgICAgaWYgKERlcC50YXJnZXQpIHtcbiAgICAgICAgd2F0Y2hlci5kZXBlbmQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3YXRjaGVyLnZhbHVlO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgaW5zdGFuY2UgbWV0aG9kcy4gTWV0aG9kcyBtdXN0IGJlIGJvdW5kIHRvIHRoZVxuICAgKiBpbnN0YW5jZSBzaW5jZSB0aGV5IG1pZ2h0IGJlIHBhc3NlZCBkb3duIGFzIGEgcHJvcCB0b1xuICAgKiBjaGlsZCBjb21wb25lbnRzLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0TWV0aG9kcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbWV0aG9kcyA9IHRoaXMuJG9wdGlvbnMubWV0aG9kcztcbiAgICBpZiAobWV0aG9kcykge1xuICAgICAgZm9yICh2YXIga2V5IGluIG1ldGhvZHMpIHtcbiAgICAgICAgdGhpc1trZXldID0gYmluZChtZXRob2RzW2tleV0sIHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBtZXRhIGluZm9ybWF0aW9uIGxpa2UgJGluZGV4LCAka2V5ICYgJHZhbHVlLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0TWV0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbWV0YXMgPSB0aGlzLiRvcHRpb25zLl9tZXRhO1xuICAgIGlmIChtZXRhcykge1xuICAgICAgZm9yICh2YXIga2V5IGluIG1ldGFzKSB7XG4gICAgICAgIGRlZmluZVJlYWN0aXZlKHRoaXMsIGtleSwgbWV0YXNba2V5XSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG52YXIgZXZlbnRSRSA9IC9edi1vbjp8XkAvO1xuXG5mdW5jdGlvbiBldmVudHNNaXhpbiAoVnVlKSB7XG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgaW5zdGFuY2UncyBvcHRpb24gZXZlbnRzICYgd2F0Y2hlcnMuXG4gICAqIElmIHRoZSB2YWx1ZSBpcyBhIHN0cmluZywgd2UgcHVsbCBpdCBmcm9tIHRoZVxuICAgKiBpbnN0YW5jZSdzIG1ldGhvZHMgYnkgbmFtZS5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG4gICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50KSB7XG4gICAgICByZWdpc3RlckNvbXBvbmVudEV2ZW50cyh0aGlzLCBvcHRpb25zLmVsKTtcbiAgICB9XG4gICAgcmVnaXN0ZXJDYWxsYmFja3ModGhpcywgJyRvbicsIG9wdGlvbnMuZXZlbnRzKTtcbiAgICByZWdpc3RlckNhbGxiYWNrcyh0aGlzLCAnJHdhdGNoJywgb3B0aW9ucy53YXRjaCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIHYtb24gZXZlbnRzIG9uIGEgY2hpbGQgY29tcG9uZW50XG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyQ29tcG9uZW50RXZlbnRzKHZtLCBlbCkge1xuICAgIHZhciBhdHRycyA9IGVsLmF0dHJpYnV0ZXM7XG4gICAgdmFyIG5hbWUsIHZhbHVlLCBoYW5kbGVyO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBuYW1lID0gYXR0cnNbaV0ubmFtZTtcbiAgICAgIGlmIChldmVudFJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShldmVudFJFLCAnJyk7XG4gICAgICAgIC8vIGZvcmNlIHRoZSBleHByZXNzaW9uIGludG8gYSBzdGF0ZW1lbnQgc28gdGhhdFxuICAgICAgICAvLyBpdCBhbHdheXMgZHluYW1pY2FsbHkgcmVzb2x2ZXMgdGhlIG1ldGhvZCB0byBjYWxsICgjMjY3MClcbiAgICAgICAgLy8ga2luZGEgdWdseSBoYWNrLCBidXQgZG9lcyB0aGUgam9iLlxuICAgICAgICB2YWx1ZSA9IGF0dHJzW2ldLnZhbHVlO1xuICAgICAgICBpZiAoaXNTaW1wbGVQYXRoKHZhbHVlKSkge1xuICAgICAgICAgIHZhbHVlICs9ICcuYXBwbHkodGhpcywgJGFyZ3VtZW50cyknO1xuICAgICAgICB9XG4gICAgICAgIGhhbmRsZXIgPSAodm0uX3Njb3BlIHx8IHZtLl9jb250ZXh0KS4kZXZhbCh2YWx1ZSwgdHJ1ZSk7XG4gICAgICAgIGhhbmRsZXIuX2Zyb21QYXJlbnQgPSB0cnVlO1xuICAgICAgICB2bS4kb24obmFtZS5yZXBsYWNlKGV2ZW50UkUpLCBoYW5kbGVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgY2FsbGJhY2tzIGZvciBvcHRpb24gZXZlbnRzIGFuZCB3YXRjaGVycy5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25cbiAgICogQHBhcmFtIHtPYmplY3R9IGhhc2hcbiAgICovXG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXJDYWxsYmFja3Modm0sIGFjdGlvbiwgaGFzaCkge1xuICAgIGlmICghaGFzaCkgcmV0dXJuO1xuICAgIHZhciBoYW5kbGVycywga2V5LCBpLCBqO1xuICAgIGZvciAoa2V5IGluIGhhc2gpIHtcbiAgICAgIGhhbmRsZXJzID0gaGFzaFtrZXldO1xuICAgICAgaWYgKGlzQXJyYXkoaGFuZGxlcnMpKSB7XG4gICAgICAgIGZvciAoaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXJzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVycyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byByZWdpc3RlciBhbiBldmVudC93YXRjaCBjYWxsYmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25cbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ3xPYmplY3R9IGhhbmRsZXJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKi9cblxuICBmdW5jdGlvbiByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiBoYW5kbGVyO1xuICAgIGlmICh0eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB2bVthY3Rpb25dKGtleSwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgdmFyIG1ldGhvZHMgPSB2bS4kb3B0aW9ucy5tZXRob2RzO1xuICAgICAgdmFyIG1ldGhvZCA9IG1ldGhvZHMgJiYgbWV0aG9kc1toYW5kbGVyXTtcbiAgICAgIGlmIChtZXRob2QpIHtcbiAgICAgICAgdm1bYWN0aW9uXShrZXksIG1ldGhvZCwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1Vua25vd24gbWV0aG9kOiBcIicgKyBoYW5kbGVyICsgJ1wiIHdoZW4gJyArICdyZWdpc3RlcmluZyBjYWxsYmFjayBmb3IgJyArIGFjdGlvbiArICc6IFwiJyArIGtleSArICdcIi4nLCB2bSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChoYW5kbGVyICYmIHR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXIuaGFuZGxlciwgaGFuZGxlcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIHJlY3Vyc2l2ZSBhdHRhY2hlZC9kZXRhY2hlZCBjYWxsc1xuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0RE9NSG9va3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy4kb24oJ2hvb2s6YXR0YWNoZWQnLCBvbkF0dGFjaGVkKTtcbiAgICB0aGlzLiRvbignaG9vazpkZXRhY2hlZCcsIG9uRGV0YWNoZWQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0byByZWN1cnNpdmVseSBjYWxsIGF0dGFjaGVkIGhvb2sgb24gY2hpbGRyZW5cbiAgICovXG5cbiAgZnVuY3Rpb24gb25BdHRhY2hlZCgpIHtcbiAgICBpZiAoIXRoaXMuX2lzQXR0YWNoZWQpIHtcbiAgICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlO1xuICAgICAgdGhpcy4kY2hpbGRyZW4uZm9yRWFjaChjYWxsQXR0YWNoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSXRlcmF0b3IgdG8gY2FsbCBhdHRhY2hlZCBob29rXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuICAgKi9cblxuICBmdW5jdGlvbiBjYWxsQXR0YWNoKGNoaWxkKSB7XG4gICAgaWYgKCFjaGlsZC5faXNBdHRhY2hlZCAmJiBpbkRvYyhjaGlsZC4kZWwpKSB7XG4gICAgICBjaGlsZC5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIHRvIHJlY3Vyc2l2ZWx5IGNhbGwgZGV0YWNoZWQgaG9vayBvbiBjaGlsZHJlblxuICAgKi9cblxuICBmdW5jdGlvbiBvbkRldGFjaGVkKCkge1xuICAgIGlmICh0aGlzLl9pc0F0dGFjaGVkKSB7XG4gICAgICB0aGlzLl9pc0F0dGFjaGVkID0gZmFsc2U7XG4gICAgICB0aGlzLiRjaGlsZHJlbi5mb3JFYWNoKGNhbGxEZXRhY2gpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJdGVyYXRvciB0byBjYWxsIGRldGFjaGVkIGhvb2tcbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IGNoaWxkXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNhbGxEZXRhY2goY2hpbGQpIHtcbiAgICBpZiAoY2hpbGQuX2lzQXR0YWNoZWQgJiYgIWluRG9jKGNoaWxkLiRlbCkpIHtcbiAgICAgIGNoaWxkLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlciBhbGwgaGFuZGxlcnMgZm9yIGEgaG9va1xuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gaG9va1xuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9jYWxsSG9vayA9IGZ1bmN0aW9uIChob29rKSB7XG4gICAgdGhpcy4kZW1pdCgncHJlLWhvb2s6JyArIGhvb2spO1xuICAgIHZhciBoYW5kbGVycyA9IHRoaXMuJG9wdGlvbnNbaG9va107XG4gICAgaWYgKGhhbmRsZXJzKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgaiA9IGhhbmRsZXJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICBoYW5kbGVyc1tpXS5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLiRlbWl0KCdob29rOicgKyBob29rKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gbm9vcCQxKCkge31cblxuLyoqXG4gKiBBIGRpcmVjdGl2ZSBsaW5rcyBhIERPTSBlbGVtZW50IHdpdGggYSBwaWVjZSBvZiBkYXRhLFxuICogd2hpY2ggaXMgdGhlIHJlc3VsdCBvZiBldmFsdWF0aW5nIGFuIGV4cHJlc3Npb24uXG4gKiBJdCByZWdpc3RlcnMgYSB3YXRjaGVyIHdpdGggdGhlIGV4cHJlc3Npb24gYW5kIGNhbGxzXG4gKiB0aGUgRE9NIHVwZGF0ZSBmdW5jdGlvbiB3aGVuIGEgY2hhbmdlIGlzIHRyaWdnZXJlZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZGVzY3JpcHRvclxuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gbmFtZVxuICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gZGVmXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBleHByZXNzaW9uXG4gKiAgICAgICAgICAgICAgICAgLSB7QXJyYXk8T2JqZWN0Pn0gW2ZpbHRlcnNdXG4gKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBbbW9kaWZpZXJzXVxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGxpdGVyYWxcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGF0dHJcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGFyZ1xuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gcmF3XG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBbcmVmXVxuICogICAgICAgICAgICAgICAgIC0ge0FycmF5PE9iamVjdD59IFtpbnRlcnBdXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW2hhc09uZVRpbWVdXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSB0cmFuc2NsdXNpb24gaG9zdCBjb21wb25lbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcbiAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIG93bmVyIGZyYWdtZW50XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gRGlyZWN0aXZlKGRlc2NyaXB0b3IsIHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgdGhpcy52bSA9IHZtO1xuICB0aGlzLmVsID0gZWw7XG4gIC8vIGNvcHkgZGVzY3JpcHRvciBwcm9wZXJ0aWVzXG4gIHRoaXMuZGVzY3JpcHRvciA9IGRlc2NyaXB0b3I7XG4gIHRoaXMubmFtZSA9IGRlc2NyaXB0b3IubmFtZTtcbiAgdGhpcy5leHByZXNzaW9uID0gZGVzY3JpcHRvci5leHByZXNzaW9uO1xuICB0aGlzLmFyZyA9IGRlc2NyaXB0b3IuYXJnO1xuICB0aGlzLm1vZGlmaWVycyA9IGRlc2NyaXB0b3IubW9kaWZpZXJzO1xuICB0aGlzLmZpbHRlcnMgPSBkZXNjcmlwdG9yLmZpbHRlcnM7XG4gIHRoaXMubGl0ZXJhbCA9IHRoaXMubW9kaWZpZXJzICYmIHRoaXMubW9kaWZpZXJzLmxpdGVyYWw7XG4gIC8vIHByaXZhdGVcbiAgdGhpcy5fbG9ja2VkID0gZmFsc2U7XG4gIHRoaXMuX2JvdW5kID0gZmFsc2U7XG4gIHRoaXMuX2xpc3RlbmVycyA9IG51bGw7XG4gIC8vIGxpbmsgY29udGV4dFxuICB0aGlzLl9ob3N0ID0gaG9zdDtcbiAgdGhpcy5fc2NvcGUgPSBzY29wZTtcbiAgdGhpcy5fZnJhZyA9IGZyYWc7XG4gIC8vIHN0b3JlIGRpcmVjdGl2ZXMgb24gbm9kZSBpbiBkZXYgbW9kZVxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsKSB7XG4gICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMgPSB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcyB8fCBbXTtcbiAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcy5wdXNoKHRoaXMpO1xuICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZSB0aGUgZGlyZWN0aXZlLCBtaXhpbiBkZWZpbml0aW9uIHByb3BlcnRpZXMsXG4gKiBzZXR1cCB0aGUgd2F0Y2hlciwgY2FsbCBkZWZpbml0aW9uIGJpbmQoKSBhbmQgdXBkYXRlKClcbiAqIGlmIHByZXNlbnQuXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fYmluZCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIG5hbWUgPSB0aGlzLm5hbWU7XG4gIHZhciBkZXNjcmlwdG9yID0gdGhpcy5kZXNjcmlwdG9yO1xuXG4gIC8vIHJlbW92ZSBhdHRyaWJ1dGVcbiAgaWYgKChuYW1lICE9PSAnY2xvYWsnIHx8IHRoaXMudm0uX2lzQ29tcGlsZWQpICYmIHRoaXMuZWwgJiYgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUpIHtcbiAgICB2YXIgYXR0ciA9IGRlc2NyaXB0b3IuYXR0ciB8fCAndi0nICsgbmFtZTtcbiAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgfVxuXG4gIC8vIGNvcHkgZGVmIHByb3BlcnRpZXNcbiAgdmFyIGRlZiA9IGRlc2NyaXB0b3IuZGVmO1xuICBpZiAodHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHRoaXMudXBkYXRlID0gZGVmO1xuICB9IGVsc2Uge1xuICAgIGV4dGVuZCh0aGlzLCBkZWYpO1xuICB9XG5cbiAgLy8gc2V0dXAgZGlyZWN0aXZlIHBhcmFtc1xuICB0aGlzLl9zZXR1cFBhcmFtcygpO1xuXG4gIC8vIGluaXRpYWwgYmluZFxuICBpZiAodGhpcy5iaW5kKSB7XG4gICAgdGhpcy5iaW5kKCk7XG4gIH1cbiAgdGhpcy5fYm91bmQgPSB0cnVlO1xuXG4gIGlmICh0aGlzLmxpdGVyYWwpIHtcbiAgICB0aGlzLnVwZGF0ZSAmJiB0aGlzLnVwZGF0ZShkZXNjcmlwdG9yLnJhdyk7XG4gIH0gZWxzZSBpZiAoKHRoaXMuZXhwcmVzc2lvbiB8fCB0aGlzLm1vZGlmaWVycykgJiYgKHRoaXMudXBkYXRlIHx8IHRoaXMudHdvV2F5KSAmJiAhdGhpcy5fY2hlY2tTdGF0ZW1lbnQoKSkge1xuICAgIC8vIHdyYXBwZWQgdXBkYXRlciBmb3IgY29udGV4dFxuICAgIHZhciBkaXIgPSB0aGlzO1xuICAgIGlmICh0aGlzLnVwZGF0ZSkge1xuICAgICAgdGhpcy5fdXBkYXRlID0gZnVuY3Rpb24gKHZhbCwgb2xkVmFsKSB7XG4gICAgICAgIGlmICghZGlyLl9sb2NrZWQpIHtcbiAgICAgICAgICBkaXIudXBkYXRlKHZhbCwgb2xkVmFsKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fdXBkYXRlID0gbm9vcCQxO1xuICAgIH1cbiAgICB2YXIgcHJlUHJvY2VzcyA9IHRoaXMuX3ByZVByb2Nlc3MgPyBiaW5kKHRoaXMuX3ByZVByb2Nlc3MsIHRoaXMpIDogbnVsbDtcbiAgICB2YXIgcG9zdFByb2Nlc3MgPSB0aGlzLl9wb3N0UHJvY2VzcyA/IGJpbmQodGhpcy5fcG9zdFByb2Nlc3MsIHRoaXMpIDogbnVsbDtcbiAgICB2YXIgd2F0Y2hlciA9IHRoaXMuX3dhdGNoZXIgPSBuZXcgV2F0Y2hlcih0aGlzLnZtLCB0aGlzLmV4cHJlc3Npb24sIHRoaXMuX3VwZGF0ZSwgLy8gY2FsbGJhY2tcbiAgICB7XG4gICAgICBmaWx0ZXJzOiB0aGlzLmZpbHRlcnMsXG4gICAgICB0d29XYXk6IHRoaXMudHdvV2F5LFxuICAgICAgZGVlcDogdGhpcy5kZWVwLFxuICAgICAgcHJlUHJvY2VzczogcHJlUHJvY2VzcyxcbiAgICAgIHBvc3RQcm9jZXNzOiBwb3N0UHJvY2VzcyxcbiAgICAgIHNjb3BlOiB0aGlzLl9zY29wZVxuICAgIH0pO1xuICAgIC8vIHYtbW9kZWwgd2l0aCBpbml0YWwgaW5saW5lIHZhbHVlIG5lZWQgdG8gc3luYyBiYWNrIHRvXG4gICAgLy8gbW9kZWwgaW5zdGVhZCBvZiB1cGRhdGUgdG8gRE9NIG9uIGluaXQuIFRoZXkgd291bGRcbiAgICAvLyBzZXQgdGhlIGFmdGVyQmluZCBob29rIHRvIGluZGljYXRlIHRoYXQuXG4gICAgaWYgKHRoaXMuYWZ0ZXJCaW5kKSB7XG4gICAgICB0aGlzLmFmdGVyQmluZCgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy51cGRhdGUpIHtcbiAgICAgIHRoaXMudXBkYXRlKHdhdGNoZXIudmFsdWUpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBTZXR1cCBhbGwgcGFyYW0gYXR0cmlidXRlcywgZS5nLiB0cmFjay1ieSxcbiAqIHRyYW5zaXRpb24tbW9kZSwgZXRjLi4uXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fc2V0dXBQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy5wYXJhbXMpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHBhcmFtcyA9IHRoaXMucGFyYW1zO1xuICAvLyBzd2FwIHRoZSBwYXJhbXMgYXJyYXkgd2l0aCBhIGZyZXNoIG9iamVjdC5cbiAgdGhpcy5wYXJhbXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB2YXIgaSA9IHBhcmFtcy5sZW5ndGg7XG4gIHZhciBrZXksIHZhbCwgbWFwcGVkS2V5O1xuICB3aGlsZSAoaS0tKSB7XG4gICAga2V5ID0gaHlwaGVuYXRlKHBhcmFtc1tpXSk7XG4gICAgbWFwcGVkS2V5ID0gY2FtZWxpemUoa2V5KTtcbiAgICB2YWwgPSBnZXRCaW5kQXR0cih0aGlzLmVsLCBrZXkpO1xuICAgIGlmICh2YWwgIT0gbnVsbCkge1xuICAgICAgLy8gZHluYW1pY1xuICAgICAgdGhpcy5fc2V0dXBQYXJhbVdhdGNoZXIobWFwcGVkS2V5LCB2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBzdGF0aWNcbiAgICAgIHZhbCA9IGdldEF0dHIodGhpcy5lbCwga2V5KTtcbiAgICAgIGlmICh2YWwgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhcmFtc1ttYXBwZWRLZXldID0gdmFsID09PSAnJyA/IHRydWUgOiB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIFNldHVwIGEgd2F0Y2hlciBmb3IgYSBkeW5hbWljIHBhcmFtLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHByZXNzaW9uXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fc2V0dXBQYXJhbVdhdGNoZXIgPSBmdW5jdGlvbiAoa2V5LCBleHByZXNzaW9uKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuICB2YXIgdW53YXRjaCA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kd2F0Y2goZXhwcmVzc2lvbiwgZnVuY3Rpb24gKHZhbCwgb2xkVmFsKSB7XG4gICAgc2VsZi5wYXJhbXNba2V5XSA9IHZhbDtcbiAgICAvLyBzaW5jZSB3ZSBhcmUgaW4gaW1tZWRpYXRlIG1vZGUsXG4gICAgLy8gb25seSBjYWxsIHRoZSBwYXJhbSBjaGFuZ2UgY2FsbGJhY2tzIGlmIHRoaXMgaXMgbm90IHRoZSBmaXJzdCB1cGRhdGUuXG4gICAgaWYgKGNhbGxlZCkge1xuICAgICAgdmFyIGNiID0gc2VsZi5wYXJhbVdhdGNoZXJzICYmIHNlbGYucGFyYW1XYXRjaGVyc1trZXldO1xuICAgICAgaWYgKGNiKSB7XG4gICAgICAgIGNiLmNhbGwoc2VsZiwgdmFsLCBvbGRWYWwpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsZWQgPSB0cnVlO1xuICAgIH1cbiAgfSwge1xuICAgIGltbWVkaWF0ZTogdHJ1ZSxcbiAgICB1c2VyOiBmYWxzZVxuICB9KTsodGhpcy5fcGFyYW1VbndhdGNoRm5zIHx8ICh0aGlzLl9wYXJhbVVud2F0Y2hGbnMgPSBbXSkpLnB1c2godW53YXRjaCk7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBkaXJlY3RpdmUgaXMgYSBmdW5jdGlvbiBjYWxsZXJcbiAqIGFuZCBpZiB0aGUgZXhwcmVzc2lvbiBpcyBhIGNhbGxhYmxlIG9uZS4gSWYgYm90aCB0cnVlLFxuICogd2Ugd3JhcCB1cCB0aGUgZXhwcmVzc2lvbiBhbmQgdXNlIGl0IGFzIHRoZSBldmVudFxuICogaGFuZGxlci5cbiAqXG4gKiBlLmcuIG9uLWNsaWNrPVwiYSsrXCJcbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX2NoZWNrU3RhdGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZXhwcmVzc2lvbiA9IHRoaXMuZXhwcmVzc2lvbjtcbiAgaWYgKGV4cHJlc3Npb24gJiYgdGhpcy5hY2NlcHRTdGF0ZW1lbnQgJiYgIWlzU2ltcGxlUGF0aChleHByZXNzaW9uKSkge1xuICAgIHZhciBmbiA9IHBhcnNlRXhwcmVzc2lvbihleHByZXNzaW9uKS5nZXQ7XG4gICAgdmFyIHNjb3BlID0gdGhpcy5fc2NvcGUgfHwgdGhpcy52bTtcbiAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXIoZSkge1xuICAgICAgc2NvcGUuJGV2ZW50ID0gZTtcbiAgICAgIGZuLmNhbGwoc2NvcGUsIHNjb3BlKTtcbiAgICAgIHNjb3BlLiRldmVudCA9IG51bGw7XG4gICAgfTtcbiAgICBpZiAodGhpcy5maWx0ZXJzKSB7XG4gICAgICBoYW5kbGVyID0gc2NvcGUuX2FwcGx5RmlsdGVycyhoYW5kbGVyLCBudWxsLCB0aGlzLmZpbHRlcnMpO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZShoYW5kbGVyKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTtcblxuLyoqXG4gKiBTZXQgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgd2l0aCB0aGUgc2V0dGVyLlxuICogVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIGluIHR3by13YXkgZGlyZWN0aXZlc1xuICogZS5nLiB2LW1vZGVsLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwdWJsaWNcbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAodGhpcy50d29XYXkpIHtcbiAgICB0aGlzLl93aXRoTG9jayhmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl93YXRjaGVyLnNldCh2YWx1ZSk7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHdhcm4oJ0RpcmVjdGl2ZS5zZXQoKSBjYW4gb25seSBiZSB1c2VkIGluc2lkZSB0d29XYXknICsgJ2RpcmVjdGl2ZXMuJyk7XG4gIH1cbn07XG5cbi8qKlxuICogRXhlY3V0ZSBhIGZ1bmN0aW9uIHdoaWxlIHByZXZlbnRpbmcgdGhhdCBmdW5jdGlvbiBmcm9tXG4gKiB0cmlnZ2VyaW5nIHVwZGF0ZXMgb24gdGhpcyBkaXJlY3RpdmUgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl93aXRoTG9jayA9IGZ1bmN0aW9uIChmbikge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHNlbGYuX2xvY2tlZCA9IHRydWU7XG4gIGZuLmNhbGwoc2VsZik7XG4gIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICBzZWxmLl9sb2NrZWQgPSBmYWxzZTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIENvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGF0dGFjaGVzIGEgRE9NIGV2ZW50IGxpc3RlbmVyXG4gKiB0byB0aGUgZGlyZWN0aXZlIGVsZW1lbnQgYW5kIGF1dG9tZXRpY2FsbHkgdGVhcnMgaXQgZG93blxuICogZHVyaW5nIHVuYmluZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW3VzZUNhcHR1cmVdXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudCwgaGFuZGxlciwgdXNlQ2FwdHVyZSkge1xuICBvbih0aGlzLmVsLCBldmVudCwgaGFuZGxlciwgdXNlQ2FwdHVyZSk7KHRoaXMuX2xpc3RlbmVycyB8fCAodGhpcy5fbGlzdGVuZXJzID0gW10pKS5wdXNoKFtldmVudCwgaGFuZGxlcl0pO1xufTtcblxuLyoqXG4gKiBUZWFyZG93biB0aGUgd2F0Y2hlciBhbmQgY2FsbCB1bmJpbmQuXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fdGVhcmRvd24gPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLl9ib3VuZCkge1xuICAgIHRoaXMuX2JvdW5kID0gZmFsc2U7XG4gICAgaWYgKHRoaXMudW5iaW5kKSB7XG4gICAgICB0aGlzLnVuYmluZCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fd2F0Y2hlcikge1xuICAgICAgdGhpcy5fd2F0Y2hlci50ZWFyZG93bigpO1xuICAgIH1cbiAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xuICAgIHZhciBpO1xuICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgIGkgPSBsaXN0ZW5lcnMubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBvZmYodGhpcy5lbCwgbGlzdGVuZXJzW2ldWzBdLCBsaXN0ZW5lcnNbaV1bMV0pO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgdW53YXRjaEZucyA9IHRoaXMuX3BhcmFtVW53YXRjaEZucztcbiAgICBpZiAodW53YXRjaEZucykge1xuICAgICAgaSA9IHVud2F0Y2hGbnMubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICB1bndhdGNoRm5zW2ldKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwpIHtcbiAgICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzLiRyZW1vdmUodGhpcyk7XG4gICAgfVxuICAgIHRoaXMudm0gPSB0aGlzLmVsID0gdGhpcy5fd2F0Y2hlciA9IHRoaXMuX2xpc3RlbmVycyA9IG51bGw7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGxpZmVjeWNsZU1peGluIChWdWUpIHtcbiAgLyoqXG4gICAqIFVwZGF0ZSB2LXJlZiBmb3IgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl91cGRhdGVSZWYgPSBmdW5jdGlvbiAocmVtb3ZlKSB7XG4gICAgdmFyIHJlZiA9IHRoaXMuJG9wdGlvbnMuX3JlZjtcbiAgICBpZiAocmVmKSB7XG4gICAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLl9jb250ZXh0KS4kcmVmcztcbiAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgaWYgKHJlZnNbcmVmXSA9PT0gdGhpcykge1xuICAgICAgICAgIHJlZnNbcmVmXSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlZnNbcmVmXSA9IHRoaXM7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBUcmFuc2NsdWRlLCBjb21waWxlIGFuZCBsaW5rIGVsZW1lbnQuXG4gICAqXG4gICAqIElmIGEgcHJlLWNvbXBpbGVkIGxpbmtlciBpcyBhdmFpbGFibGUsIHRoYXQgbWVhbnMgdGhlXG4gICAqIHBhc3NlZCBpbiBlbGVtZW50IHdpbGwgYmUgcHJlLXRyYW5zY2x1ZGVkIGFuZCBjb21waWxlZFxuICAgKiBhcyB3ZWxsIC0gYWxsIHdlIG5lZWQgdG8gZG8gaXMgdG8gY2FsbCB0aGUgbGlua2VyLlxuICAgKlxuICAgKiBPdGhlcndpc2Ugd2UgbmVlZCB0byBjYWxsIHRyYW5zY2x1ZGUvY29tcGlsZS9saW5rIGhlcmUuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fY29tcGlsZSA9IGZ1bmN0aW9uIChlbCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcblxuICAgIC8vIHRyYW5zY2x1ZGUgYW5kIGluaXQgZWxlbWVudFxuICAgIC8vIHRyYW5zY2x1ZGUgY2FuIHBvdGVudGlhbGx5IHJlcGxhY2Ugb3JpZ2luYWxcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIGtlZXAgcmVmZXJlbmNlOyB0aGlzIHN0ZXAgYWxzbyBpbmplY3RzXG4gICAgLy8gdGhlIHRlbXBsYXRlIGFuZCBjYWNoZXMgdGhlIG9yaWdpbmFsIGF0dHJpYnV0ZXNcbiAgICAvLyBvbiB0aGUgY29udGFpbmVyIG5vZGUgYW5kIHJlcGxhY2VyIG5vZGUuXG4gICAgdmFyIG9yaWdpbmFsID0gZWw7XG4gICAgZWwgPSB0cmFuc2NsdWRlKGVsLCBvcHRpb25zKTtcbiAgICB0aGlzLl9pbml0RWxlbWVudChlbCk7XG5cbiAgICAvLyBoYW5kbGUgdi1wcmUgb24gcm9vdCBub2RlICgjMjAyNilcbiAgICBpZiAoZWwubm9kZVR5cGUgPT09IDEgJiYgZ2V0QXR0cihlbCwgJ3YtcHJlJykgIT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyByb290IGlzIGFsd2F5cyBjb21waWxlZCBwZXItaW5zdGFuY2UsIGJlY2F1c2VcbiAgICAvLyBjb250YWluZXIgYXR0cnMgYW5kIHByb3BzIGNhbiBiZSBkaWZmZXJlbnQgZXZlcnkgdGltZS5cbiAgICB2YXIgY29udGV4dE9wdGlvbnMgPSB0aGlzLl9jb250ZXh0ICYmIHRoaXMuX2NvbnRleHQuJG9wdGlvbnM7XG4gICAgdmFyIHJvb3RMaW5rZXIgPSBjb21waWxlUm9vdChlbCwgb3B0aW9ucywgY29udGV4dE9wdGlvbnMpO1xuXG4gICAgLy8gcmVzb2x2ZSBzbG90IGRpc3RyaWJ1dGlvblxuICAgIHJlc29sdmVTbG90cyh0aGlzLCBvcHRpb25zLl9jb250ZW50KTtcblxuICAgIC8vIGNvbXBpbGUgYW5kIGxpbmsgdGhlIHJlc3RcbiAgICB2YXIgY29udGVudExpbmtGbjtcbiAgICB2YXIgY3RvciA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgLy8gY29tcG9uZW50IGNvbXBpbGF0aW9uIGNhbiBiZSBjYWNoZWRcbiAgICAvLyBhcyBsb25nIGFzIGl0J3Mgbm90IHVzaW5nIGlubGluZS10ZW1wbGF0ZVxuICAgIGlmIChvcHRpb25zLl9saW5rZXJDYWNoYWJsZSkge1xuICAgICAgY29udGVudExpbmtGbiA9IGN0b3IubGlua2VyO1xuICAgICAgaWYgKCFjb250ZW50TGlua0ZuKSB7XG4gICAgICAgIGNvbnRlbnRMaW5rRm4gPSBjdG9yLmxpbmtlciA9IGNvbXBpbGUoZWwsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGxpbmsgcGhhc2VcbiAgICAvLyBtYWtlIHN1cmUgdG8gbGluayByb290IHdpdGggcHJvcCBzY29wZSFcbiAgICB2YXIgcm9vdFVubGlua0ZuID0gcm9vdExpbmtlcih0aGlzLCBlbCwgdGhpcy5fc2NvcGUpO1xuICAgIHZhciBjb250ZW50VW5saW5rRm4gPSBjb250ZW50TGlua0ZuID8gY29udGVudExpbmtGbih0aGlzLCBlbCkgOiBjb21waWxlKGVsLCBvcHRpb25zKSh0aGlzLCBlbCk7XG5cbiAgICAvLyByZWdpc3RlciBjb21wb3NpdGUgdW5saW5rIGZ1bmN0aW9uXG4gICAgLy8gdG8gYmUgY2FsbGVkIGR1cmluZyBpbnN0YW5jZSBkZXN0cnVjdGlvblxuICAgIHRoaXMuX3VubGlua0ZuID0gZnVuY3Rpb24gKCkge1xuICAgICAgcm9vdFVubGlua0ZuKCk7XG4gICAgICAvLyBwYXNzaW5nIGRlc3Ryb3lpbmc6IHRydWUgdG8gYXZvaWQgc2VhcmNoaW5nIGFuZFxuICAgICAgLy8gc3BsaWNpbmcgdGhlIGRpcmVjdGl2ZXNcbiAgICAgIGNvbnRlbnRVbmxpbmtGbih0cnVlKTtcbiAgICB9O1xuXG4gICAgLy8gZmluYWxseSByZXBsYWNlIG9yaWdpbmFsXG4gICAgaWYgKG9wdGlvbnMucmVwbGFjZSkge1xuICAgICAgcmVwbGFjZShvcmlnaW5hbCwgZWwpO1xuICAgIH1cblxuICAgIHRoaXMuX2lzQ29tcGlsZWQgPSB0cnVlO1xuICAgIHRoaXMuX2NhbGxIb29rKCdjb21waWxlZCcpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGluc3RhbmNlIGVsZW1lbnQuIENhbGxlZCBpbiB0aGUgcHVibGljXG4gICAqICRtb3VudCgpIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0RWxlbWVudCA9IGZ1bmN0aW9uIChlbCkge1xuICAgIGlmIChpc0ZyYWdtZW50KGVsKSkge1xuICAgICAgdGhpcy5faXNGcmFnbWVudCA9IHRydWU7XG4gICAgICB0aGlzLiRlbCA9IHRoaXMuX2ZyYWdtZW50U3RhcnQgPSBlbC5maXJzdENoaWxkO1xuICAgICAgdGhpcy5fZnJhZ21lbnRFbmQgPSBlbC5sYXN0Q2hpbGQ7XG4gICAgICAvLyBzZXQgcGVyc2lzdGVkIHRleHQgYW5jaG9ycyB0byBlbXB0eVxuICAgICAgaWYgKHRoaXMuX2ZyYWdtZW50U3RhcnQubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgICAgdGhpcy5fZnJhZ21lbnRTdGFydC5kYXRhID0gdGhpcy5fZnJhZ21lbnRFbmQuZGF0YSA9ICcnO1xuICAgICAgfVxuICAgICAgdGhpcy5fZnJhZ21lbnQgPSBlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kZWwgPSBlbDtcbiAgICB9XG4gICAgdGhpcy4kZWwuX192dWVfXyA9IHRoaXM7XG4gICAgdGhpcy5fY2FsbEhvb2soJ2JlZm9yZUNvbXBpbGUnKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIGFuZCBiaW5kIGEgZGlyZWN0aXZlIHRvIGFuIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkZXNjcmlwdG9yIC0gcGFyc2VkIGRpcmVjdGl2ZSBkZXNjcmlwdG9yXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAgIC0gdGFyZ2V0IG5vZGVcbiAgICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIHRyYW5zY2x1c2lvbiBob3N0IGNvbXBvbmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIG93bmVyIGZyYWdtZW50XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2JpbmREaXIgPSBmdW5jdGlvbiAoZGVzY3JpcHRvciwgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICB0aGlzLl9kaXJlY3RpdmVzLnB1c2gobmV3IERpcmVjdGl2ZShkZXNjcmlwdG9yLCB0aGlzLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZykpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUZWFyZG93biBhbiBpbnN0YW5jZSwgdW5vYnNlcnZlcyB0aGUgZGF0YSwgdW5iaW5kIGFsbCB0aGVcbiAgICogZGlyZWN0aXZlcywgdHVybiBvZmYgYWxsIHRoZSBldmVudCBsaXN0ZW5lcnMsIGV0Yy5cbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmUgLSB3aGV0aGVyIHRvIHJlbW92ZSB0aGUgRE9NIG5vZGUuXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJDbGVhbnVwIC0gaWYgdHJ1ZSwgZGVmZXIgY2xlYW51cCB0b1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlIGNhbGxlZCBsYXRlclxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9kZXN0cm95ID0gZnVuY3Rpb24gKHJlbW92ZSwgZGVmZXJDbGVhbnVwKSB7XG4gICAgaWYgKHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQpIHtcbiAgICAgIGlmICghZGVmZXJDbGVhbnVwKSB7XG4gICAgICAgIHRoaXMuX2NsZWFudXAoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZGVzdHJveVJlYWR5O1xuICAgIHZhciBwZW5kaW5nUmVtb3ZhbDtcblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvLyBDbGVhbnVwIHNob3VsZCBiZSBjYWxsZWQgZWl0aGVyIHN5bmNocm9ub3VzbHkgb3IgYXN5bmNocm9ub3lzbHkgYXNcbiAgICAvLyBjYWxsYmFjayBvZiB0aGlzLiRyZW1vdmUoKSwgb3IgaWYgcmVtb3ZlIGFuZCBkZWZlckNsZWFudXAgYXJlIGZhbHNlLlxuICAgIC8vIEluIGFueSBjYXNlIGl0IHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgYWxsIG90aGVyIHJlbW92aW5nLCB1bmJpbmRpbmcgYW5kXG4gICAgLy8gdHVybmluZyBvZiBpcyBkb25lXG4gICAgdmFyIGNsZWFudXBJZlBvc3NpYmxlID0gZnVuY3Rpb24gY2xlYW51cElmUG9zc2libGUoKSB7XG4gICAgICBpZiAoZGVzdHJveVJlYWR5ICYmICFwZW5kaW5nUmVtb3ZhbCAmJiAhZGVmZXJDbGVhbnVwKSB7XG4gICAgICAgIHNlbGYuX2NsZWFudXAoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gcmVtb3ZlIERPTSBlbGVtZW50XG4gICAgaWYgKHJlbW92ZSAmJiB0aGlzLiRlbCkge1xuICAgICAgcGVuZGluZ1JlbW92YWwgPSB0cnVlO1xuICAgICAgdGhpcy4kcmVtb3ZlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcGVuZGluZ1JlbW92YWwgPSBmYWxzZTtcbiAgICAgICAgY2xlYW51cElmUG9zc2libGUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuX2NhbGxIb29rKCdiZWZvcmVEZXN0cm95Jyk7XG4gICAgdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCA9IHRydWU7XG4gICAgdmFyIGk7XG4gICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSBwYXJlbnQuIG9ubHkgbmVjZXNzYXJ5XG4gICAgLy8gaWYgcGFyZW50IGlzIG5vdCBiZWluZyBkZXN0cm95ZWQgYXMgd2VsbC5cbiAgICB2YXIgcGFyZW50ID0gdGhpcy4kcGFyZW50O1xuICAgIGlmIChwYXJlbnQgJiYgIXBhcmVudC5faXNCZWluZ0Rlc3Ryb3llZCkge1xuICAgICAgcGFyZW50LiRjaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xuICAgICAgLy8gdW5yZWdpc3RlciByZWYgKHJlbW92ZTogdHJ1ZSlcbiAgICAgIHRoaXMuX3VwZGF0ZVJlZih0cnVlKTtcbiAgICB9XG4gICAgLy8gZGVzdHJveSBhbGwgY2hpbGRyZW4uXG4gICAgaSA9IHRoaXMuJGNoaWxkcmVuLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB0aGlzLiRjaGlsZHJlbltpXS4kZGVzdHJveSgpO1xuICAgIH1cbiAgICAvLyB0ZWFyZG93biBwcm9wc1xuICAgIGlmICh0aGlzLl9wcm9wc1VubGlua0ZuKSB7XG4gICAgICB0aGlzLl9wcm9wc1VubGlua0ZuKCk7XG4gICAgfVxuICAgIC8vIHRlYXJkb3duIGFsbCBkaXJlY3RpdmVzLiB0aGlzIGFsc28gdGVhcnNkb3duIGFsbFxuICAgIC8vIGRpcmVjdGl2ZS1vd25lZCB3YXRjaGVycy5cbiAgICBpZiAodGhpcy5fdW5saW5rRm4pIHtcbiAgICAgIHRoaXMuX3VubGlua0ZuKCk7XG4gICAgfVxuICAgIGkgPSB0aGlzLl93YXRjaGVycy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdGhpcy5fd2F0Y2hlcnNbaV0udGVhcmRvd24oKTtcbiAgICB9XG4gICAgLy8gcmVtb3ZlIHJlZmVyZW5jZSB0byBzZWxmIG9uICRlbFxuICAgIGlmICh0aGlzLiRlbCkge1xuICAgICAgdGhpcy4kZWwuX192dWVfXyA9IG51bGw7XG4gICAgfVxuXG4gICAgZGVzdHJveVJlYWR5ID0gdHJ1ZTtcbiAgICBjbGVhbnVwSWZQb3NzaWJsZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDbGVhbiB1cCB0byBlbnN1cmUgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICAgKiBUaGlzIGlzIGNhbGxlZCBhZnRlciB0aGUgbGVhdmUgdHJhbnNpdGlvbiBpZiB0aGVyZVxuICAgKiBpcyBhbnkuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX2lzRGVzdHJveWVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gb3duZXIgZnJhZ21lbnRcbiAgICAvLyBkbyBpdCBpbiBjbGVhbnVwIHNvIHRoYXQgd2UgY2FuIGNhbGwgJGRlc3Ryb3kgd2l0aFxuICAgIC8vIGRlZmVyIHJpZ2h0IHdoZW4gYSBmcmFnbWVudCBpcyBhYm91dCB0byBiZSByZW1vdmVkLlxuICAgIGlmICh0aGlzLl9mcmFnKSB7XG4gICAgICB0aGlzLl9mcmFnLmNoaWxkcmVuLiRyZW1vdmUodGhpcyk7XG4gICAgfVxuICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgZnJvbSBkYXRhIG9iXG4gICAgLy8gZnJvemVuIG9iamVjdCBtYXkgbm90IGhhdmUgb2JzZXJ2ZXIuXG4gICAgaWYgKHRoaXMuX2RhdGEgJiYgdGhpcy5fZGF0YS5fX29iX18pIHtcbiAgICAgIHRoaXMuX2RhdGEuX19vYl9fLnJlbW92ZVZtKHRoaXMpO1xuICAgIH1cbiAgICAvLyBDbGVhbiB1cCByZWZlcmVuY2VzIHRvIHByaXZhdGUgcHJvcGVydGllcyBhbmQgb3RoZXJcbiAgICAvLyBpbnN0YW5jZXMuIHByZXNlcnZlIHJlZmVyZW5jZSB0byBfZGF0YSBzbyB0aGF0IHByb3h5XG4gICAgLy8gYWNjZXNzb3JzIHN0aWxsIHdvcmsuIFRoZSBvbmx5IHBvdGVudGlhbCBzaWRlIGVmZmVjdFxuICAgIC8vIGhlcmUgaXMgdGhhdCBtdXRhdGluZyB0aGUgaW5zdGFuY2UgYWZ0ZXIgaXQncyBkZXN0cm95ZWRcbiAgICAvLyBtYXkgYWZmZWN0IHRoZSBzdGF0ZSBvZiBvdGhlciBjb21wb25lbnRzIHRoYXQgYXJlIHN0aWxsXG4gICAgLy8gb2JzZXJ2aW5nIHRoZSBzYW1lIG9iamVjdCwgYnV0IHRoYXQgc2VlbXMgdG8gYmUgYVxuICAgIC8vIHJlYXNvbmFibGUgcmVzcG9uc2liaWxpdHkgZm9yIHRoZSB1c2VyIHJhdGhlciB0aGFuXG4gICAgLy8gYWx3YXlzIHRocm93aW5nIGFuIGVycm9yIG9uIHRoZW0uXG4gICAgdGhpcy4kZWwgPSB0aGlzLiRwYXJlbnQgPSB0aGlzLiRyb290ID0gdGhpcy4kY2hpbGRyZW4gPSB0aGlzLl93YXRjaGVycyA9IHRoaXMuX2NvbnRleHQgPSB0aGlzLl9zY29wZSA9IHRoaXMuX2RpcmVjdGl2ZXMgPSBudWxsO1xuICAgIC8vIGNhbGwgdGhlIGxhc3QgaG9vay4uLlxuICAgIHRoaXMuX2lzRGVzdHJveWVkID0gdHJ1ZTtcbiAgICB0aGlzLl9jYWxsSG9vaygnZGVzdHJveWVkJyk7XG4gICAgLy8gdHVybiBvZmYgYWxsIGluc3RhbmNlIGxpc3RlbmVycy5cbiAgICB0aGlzLiRvZmYoKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gbWlzY01peGluIChWdWUpIHtcbiAgLyoqXG4gICAqIEFwcGx5IGEgbGlzdCBvZiBmaWx0ZXIgKGRlc2NyaXB0b3JzKSB0byBhIHZhbHVlLlxuICAgKiBVc2luZyBwbGFpbiBmb3IgbG9vcHMgaGVyZSBiZWNhdXNlIHRoaXMgd2lsbCBiZSBjYWxsZWQgaW5cbiAgICogdGhlIGdldHRlciBvZiBhbnkgd2F0Y2hlciB3aXRoIGZpbHRlcnMgc28gaXQgaXMgdmVyeVxuICAgKiBwZXJmb3JtYW5jZSBzZW5zaXRpdmUuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHsqfSBbb2xkVmFsdWVdXG4gICAqIEBwYXJhbSB7QXJyYXl9IGZpbHRlcnNcbiAgICogQHBhcmFtIHtCb29sZWFufSB3cml0ZVxuICAgKiBAcmV0dXJuIHsqfVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9hcHBseUZpbHRlcnMgPSBmdW5jdGlvbiAodmFsdWUsIG9sZFZhbHVlLCBmaWx0ZXJzLCB3cml0ZSkge1xuICAgIHZhciBmaWx0ZXIsIGZuLCBhcmdzLCBhcmcsIG9mZnNldCwgaSwgbCwgaiwgaztcbiAgICBmb3IgKGkgPSAwLCBsID0gZmlsdGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGZpbHRlciA9IGZpbHRlcnNbd3JpdGUgPyBsIC0gaSAtIDEgOiBpXTtcbiAgICAgIGZuID0gcmVzb2x2ZUFzc2V0KHRoaXMuJG9wdGlvbnMsICdmaWx0ZXJzJywgZmlsdGVyLm5hbWUsIHRydWUpO1xuICAgICAgaWYgKCFmbikgY29udGludWU7XG4gICAgICBmbiA9IHdyaXRlID8gZm4ud3JpdGUgOiBmbi5yZWFkIHx8IGZuO1xuICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgY29udGludWU7XG4gICAgICBhcmdzID0gd3JpdGUgPyBbdmFsdWUsIG9sZFZhbHVlXSA6IFt2YWx1ZV07XG4gICAgICBvZmZzZXQgPSB3cml0ZSA/IDIgOiAxO1xuICAgICAgaWYgKGZpbHRlci5hcmdzKSB7XG4gICAgICAgIGZvciAoaiA9IDAsIGsgPSBmaWx0ZXIuYXJncy5sZW5ndGg7IGogPCBrOyBqKyspIHtcbiAgICAgICAgICBhcmcgPSBmaWx0ZXIuYXJnc1tqXTtcbiAgICAgICAgICBhcmdzW2ogKyBvZmZzZXRdID0gYXJnLmR5bmFtaWMgPyB0aGlzLiRnZXQoYXJnLnZhbHVlKSA6IGFyZy52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFsdWUgPSBmbi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXNvbHZlIGEgY29tcG9uZW50LCBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgY29tcG9uZW50XG4gICAqIGlzIGRlZmluZWQgbm9ybWFsbHkgb3IgdXNpbmcgYW4gYXN5bmMgZmFjdG9yeSBmdW5jdGlvbi5cbiAgICogUmVzb2x2ZXMgc3luY2hyb25vdXNseSBpZiBhbHJlYWR5IHJlc29sdmVkLCBvdGhlcndpc2VcbiAgICogcmVzb2x2ZXMgYXN5bmNocm9ub3VzbHkgYW5kIGNhY2hlcyB0aGUgcmVzb2x2ZWRcbiAgICogY29uc3RydWN0b3Igb24gdGhlIGZhY3RvcnkuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSB2YWx1ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9yZXNvbHZlQ29tcG9uZW50ID0gZnVuY3Rpb24gKHZhbHVlLCBjYikge1xuICAgIHZhciBmYWN0b3J5O1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGZhY3RvcnkgPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZmFjdG9yeSA9IHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnY29tcG9uZW50cycsIHZhbHVlLCB0cnVlKTtcbiAgICB9XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFmYWN0b3J5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGFzeW5jIGNvbXBvbmVudCBmYWN0b3J5XG4gICAgaWYgKCFmYWN0b3J5Lm9wdGlvbnMpIHtcbiAgICAgIGlmIChmYWN0b3J5LnJlc29sdmVkKSB7XG4gICAgICAgIC8vIGNhY2hlZFxuICAgICAgICBjYihmYWN0b3J5LnJlc29sdmVkKTtcbiAgICAgIH0gZWxzZSBpZiAoZmFjdG9yeS5yZXF1ZXN0ZWQpIHtcbiAgICAgICAgLy8gcG9vbCBjYWxsYmFja3NcbiAgICAgICAgZmFjdG9yeS5wZW5kaW5nQ2FsbGJhY2tzLnB1c2goY2IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmFjdG9yeS5yZXF1ZXN0ZWQgPSB0cnVlO1xuICAgICAgICB2YXIgY2JzID0gZmFjdG9yeS5wZW5kaW5nQ2FsbGJhY2tzID0gW2NiXTtcbiAgICAgICAgZmFjdG9yeS5jYWxsKHRoaXMsIGZ1bmN0aW9uIHJlc29sdmUocmVzKSB7XG4gICAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QocmVzKSkge1xuICAgICAgICAgICAgcmVzID0gVnVlLmV4dGVuZChyZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBjYWNoZSByZXNvbHZlZFxuICAgICAgICAgIGZhY3RvcnkucmVzb2x2ZWQgPSByZXM7XG4gICAgICAgICAgLy8gaW52b2tlIGNhbGxiYWNrc1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgY2JzW2ldKHJlcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdGYWlsZWQgdG8gcmVzb2x2ZSBhc3luYyBjb21wb25lbnQnICsgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyAnOiAnICsgdmFsdWUgOiAnJykgKyAnLiAnICsgKHJlYXNvbiA/ICdcXG5SZWFzb246ICcgKyByZWFzb24gOiAnJykpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9ybWFsIGNvbXBvbmVudFxuICAgICAgY2IoZmFjdG9yeSk7XG4gICAgfVxuICB9O1xufVxuXG52YXIgZmlsdGVyUkUkMSA9IC9bXnxdXFx8W158XS87XG5cbmZ1bmN0aW9uIGRhdGFBUEkgKFZ1ZSkge1xuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBmcm9tIGFuIGV4cHJlc3Npb24gb24gdGhpcyB2bS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFthc1N0YXRlbWVudF1cbiAgICogQHJldHVybiB7Kn1cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZ2V0ID0gZnVuY3Rpb24gKGV4cCwgYXNTdGF0ZW1lbnQpIHtcbiAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cCk7XG4gICAgaWYgKHJlcykge1xuICAgICAgaWYgKGFzU3RhdGVtZW50KSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN0YXRlbWVudEhhbmRsZXIoKSB7XG4gICAgICAgICAgc2VsZi4kYXJndW1lbnRzID0gdG9BcnJheShhcmd1bWVudHMpO1xuICAgICAgICAgIHZhciByZXN1bHQgPSByZXMuZ2V0LmNhbGwoc2VsZiwgc2VsZik7XG4gICAgICAgICAgc2VsZi4kYXJndW1lbnRzID0gbnVsbDtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gcmVzLmdldC5jYWxsKHRoaXMsIHRoaXMpO1xuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSB2YWx1ZSBmcm9tIGFuIGV4cHJlc3Npb24gb24gdGhpcyB2bS5cbiAgICogVGhlIGV4cHJlc3Npb24gbXVzdCBiZSBhIHZhbGlkIGxlZnQtaGFuZFxuICAgKiBleHByZXNzaW9uIGluIGFuIGFzc2lnbm1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAgICogQHBhcmFtIHsqfSB2YWxcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kc2V0ID0gZnVuY3Rpb24gKGV4cCwgdmFsKSB7XG4gICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHAsIHRydWUpO1xuICAgIGlmIChyZXMgJiYgcmVzLnNldCkge1xuICAgICAgcmVzLnNldC5jYWxsKHRoaXMsIHRoaXMsIHZhbCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBwcm9wZXJ0eSBvbiB0aGUgVk1cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRkZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgZGVsKHRoaXMuX2RhdGEsIGtleSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdhdGNoIGFuIGV4cHJlc3Npb24sIHRyaWdnZXIgY2FsbGJhY2sgd2hlbiBpdHNcbiAgICogdmFsdWUgY2hhbmdlcy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IGV4cE9yRm5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gZGVlcFxuICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gaW1tZWRpYXRlXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufSAtIHVud2F0Y2hGblxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiR3YXRjaCA9IGZ1bmN0aW9uIChleHBPckZuLCBjYiwgb3B0aW9ucykge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdmFyIHBhcnNlZDtcbiAgICBpZiAodHlwZW9mIGV4cE9yRm4gPT09ICdzdHJpbmcnKSB7XG4gICAgICBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZShleHBPckZuKTtcbiAgICAgIGV4cE9yRm4gPSBwYXJzZWQuZXhwcmVzc2lvbjtcbiAgICB9XG4gICAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIHtcbiAgICAgIGRlZXA6IG9wdGlvbnMgJiYgb3B0aW9ucy5kZWVwLFxuICAgICAgc3luYzogb3B0aW9ucyAmJiBvcHRpb25zLnN5bmMsXG4gICAgICBmaWx0ZXJzOiBwYXJzZWQgJiYgcGFyc2VkLmZpbHRlcnMsXG4gICAgICB1c2VyOiAhb3B0aW9ucyB8fCBvcHRpb25zLnVzZXIgIT09IGZhbHNlXG4gICAgfSk7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5pbW1lZGlhdGUpIHtcbiAgICAgIGNiLmNhbGwodm0sIHdhdGNoZXIudmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gdW53YXRjaEZuKCkge1xuICAgICAgd2F0Y2hlci50ZWFyZG93bigpO1xuICAgIH07XG4gIH07XG5cbiAgLyoqXG4gICAqIEV2YWx1YXRlIGEgdGV4dCBkaXJlY3RpdmUsIGluY2x1ZGluZyBmaWx0ZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFthc1N0YXRlbWVudF1cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRldmFsID0gZnVuY3Rpb24gKHRleHQsIGFzU3RhdGVtZW50KSB7XG4gICAgLy8gY2hlY2sgZm9yIGZpbHRlcnMuXG4gICAgaWYgKGZpbHRlclJFJDEudGVzdCh0ZXh0KSkge1xuICAgICAgdmFyIGRpciA9IHBhcnNlRGlyZWN0aXZlKHRleHQpO1xuICAgICAgLy8gdGhlIGZpbHRlciByZWdleCBjaGVjayBtaWdodCBnaXZlIGZhbHNlIHBvc2l0aXZlXG4gICAgICAvLyBmb3IgcGlwZXMgaW5zaWRlIHN0cmluZ3MsIHNvIGl0J3MgcG9zc2libGUgdGhhdFxuICAgICAgLy8gd2UgZG9uJ3QgZ2V0IGFueSBmaWx0ZXJzIGhlcmVcbiAgICAgIHZhciB2YWwgPSB0aGlzLiRnZXQoZGlyLmV4cHJlc3Npb24sIGFzU3RhdGVtZW50KTtcbiAgICAgIHJldHVybiBkaXIuZmlsdGVycyA/IHRoaXMuX2FwcGx5RmlsdGVycyh2YWwsIG51bGwsIGRpci5maWx0ZXJzKSA6IHZhbDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm8gZmlsdGVyXG4gICAgICByZXR1cm4gdGhpcy4kZ2V0KHRleHQsIGFzU3RhdGVtZW50KTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEludGVycG9sYXRlIGEgcGllY2Ugb2YgdGVtcGxhdGUgdGV4dC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRpbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgdmFyIHRva2VucyA9IHBhcnNlVGV4dCh0ZXh0KTtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIGlmICh0b2tlbnMpIHtcbiAgICAgIGlmICh0b2tlbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiB2bS4kZXZhbCh0b2tlbnNbMF0udmFsdWUpICsgJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdG9rZW5zLm1hcChmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgICByZXR1cm4gdG9rZW4udGFnID8gdm0uJGV2YWwodG9rZW4udmFsdWUpIDogdG9rZW4udmFsdWU7XG4gICAgICAgIH0pLmpvaW4oJycpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGV4dDtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIExvZyBpbnN0YW5jZSBkYXRhIGFzIGEgcGxhaW4gSlMgb2JqZWN0XG4gICAqIHNvIHRoYXQgaXQgaXMgZWFzaWVyIHRvIGluc3BlY3QgaW4gY29uc29sZS5cbiAgICogVGhpcyBtZXRob2QgYXNzdW1lcyBjb25zb2xlIGlzIGF2YWlsYWJsZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtwYXRoXVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRsb2cgPSBmdW5jdGlvbiAocGF0aCkge1xuICAgIHZhciBkYXRhID0gcGF0aCA/IGdldFBhdGgodGhpcy5fZGF0YSwgcGF0aCkgOiB0aGlzLl9kYXRhO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICBkYXRhID0gY2xlYW4oZGF0YSk7XG4gICAgfVxuICAgIC8vIGluY2x1ZGUgY29tcHV0ZWQgZmllbGRzXG4gICAgaWYgKCFwYXRoKSB7XG4gICAgICB2YXIga2V5O1xuICAgICAgZm9yIChrZXkgaW4gdGhpcy4kb3B0aW9ucy5jb21wdXRlZCkge1xuICAgICAgICBkYXRhW2tleV0gPSBjbGVhbih0aGlzW2tleV0pO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX3Byb3BzKSB7XG4gICAgICAgIGZvciAoa2V5IGluIHRoaXMuX3Byb3BzKSB7XG4gICAgICAgICAgZGF0YVtrZXldID0gY2xlYW4odGhpc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgfTtcblxuICAvKipcbiAgICogXCJjbGVhblwiIGEgZ2V0dGVyL3NldHRlciBjb252ZXJ0ZWQgb2JqZWN0IGludG8gYSBwbGFpblxuICAgKiBvYmplY3QgY29weS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IC0gb2JqXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG5cbiAgZnVuY3Rpb24gY2xlYW4ob2JqKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZG9tQVBJIChWdWUpIHtcbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIG9uLWluc3RhbmNlIG5leHRUaWNrLiBUaGUgY2FsbGJhY2sgaXNcbiAgICogYXV0by1ib3VuZCB0byB0aGUgaW5zdGFuY2UsIGFuZCB0aGlzIGF2b2lkcyBjb21wb25lbnRcbiAgICogbW9kdWxlcyBoYXZpbmcgdG8gcmVseSBvbiB0aGUgZ2xvYmFsIFZ1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kbmV4dFRpY2sgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICBuZXh0VGljayhmbiwgdGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFwcGVuZCBpbnN0YW5jZSB0byB0YXJnZXRcbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGFwcGVuZFRvID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgcmV0dXJuIGluc2VydCh0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgYXBwZW5kLCBhcHBlbmRXaXRoVHJhbnNpdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFByZXBlbmQgaW5zdGFuY2UgdG8gdGFyZ2V0XG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRwcmVwZW5kVG8gPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcbiAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xuICAgIGlmICh0YXJnZXQuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICB0aGlzLiRiZWZvcmUodGFyZ2V0LmZpcnN0Q2hpbGQsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJGFwcGVuZFRvKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluc2VydCBpbnN0YW5jZSBiZWZvcmUgdGFyZ2V0XG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRiZWZvcmUgPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcbiAgICByZXR1cm4gaW5zZXJ0KHRoaXMsIHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uLCBiZWZvcmVXaXRoQ2IsIGJlZm9yZVdpdGhUcmFuc2l0aW9uKTtcbiAgfTtcblxuICAvKipcbiAgICogSW5zZXJ0IGluc3RhbmNlIGFmdGVyIHRhcmdldFxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kYWZ0ZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcbiAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xuICAgIGlmICh0YXJnZXQubmV4dFNpYmxpbmcpIHtcbiAgICAgIHRoaXMuJGJlZm9yZSh0YXJnZXQubmV4dFNpYmxpbmcsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJGFwcGVuZFRvKHRhcmdldC5wYXJlbnROb2RlLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIGluc3RhbmNlIGZyb20gRE9NXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRyZW1vdmUgPSBmdW5jdGlvbiAoY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgaWYgKCF0aGlzLiRlbC5wYXJlbnROb2RlKSB7XG4gICAgICByZXR1cm4gY2IgJiYgY2IoKTtcbiAgICB9XG4gICAgdmFyIGluRG9jdW1lbnQgPSB0aGlzLl9pc0F0dGFjaGVkICYmIGluRG9jKHRoaXMuJGVsKTtcbiAgICAvLyBpZiB3ZSBhcmUgbm90IGluIGRvY3VtZW50LCBubyBuZWVkIHRvIGNoZWNrXG4gICAgLy8gZm9yIHRyYW5zaXRpb25zXG4gICAgaWYgKCFpbkRvY3VtZW50KSB3aXRoVHJhbnNpdGlvbiA9IGZhbHNlO1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcmVhbENiID0gZnVuY3Rpb24gcmVhbENiKCkge1xuICAgICAgaWYgKGluRG9jdW1lbnQpIHNlbGYuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuICAgICAgaWYgKGNiKSBjYigpO1xuICAgIH07XG4gICAgaWYgKHRoaXMuX2lzRnJhZ21lbnQpIHtcbiAgICAgIHJlbW92ZU5vZGVSYW5nZSh0aGlzLl9mcmFnbWVudFN0YXJ0LCB0aGlzLl9mcmFnbWVudEVuZCwgdGhpcywgdGhpcy5fZnJhZ21lbnQsIHJlYWxDYik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBvcCA9IHdpdGhUcmFuc2l0aW9uID09PSBmYWxzZSA/IHJlbW92ZVdpdGhDYiA6IHJlbW92ZVdpdGhUcmFuc2l0aW9uO1xuICAgICAgb3AodGhpcy4kZWwsIHRoaXMsIHJlYWxDYik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTaGFyZWQgRE9NIGluc2VydGlvbiBmdW5jdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMSAtIG9wIGZvciBub24tdHJhbnNpdGlvbiBpbnNlcnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3AyIC0gb3AgZm9yIHRyYW5zaXRpb24gaW5zZXJ0XG4gICAqIEByZXR1cm4gdm1cbiAgICovXG5cbiAgZnVuY3Rpb24gaW5zZXJ0KHZtLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgb3AxLCBvcDIpIHtcbiAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xuICAgIHZhciB0YXJnZXRJc0RldGFjaGVkID0gIWluRG9jKHRhcmdldCk7XG4gICAgdmFyIG9wID0gd2l0aFRyYW5zaXRpb24gPT09IGZhbHNlIHx8IHRhcmdldElzRGV0YWNoZWQgPyBvcDEgOiBvcDI7XG4gICAgdmFyIHNob3VsZENhbGxIb29rID0gIXRhcmdldElzRGV0YWNoZWQgJiYgIXZtLl9pc0F0dGFjaGVkICYmICFpbkRvYyh2bS4kZWwpO1xuICAgIGlmICh2bS5faXNGcmFnbWVudCkge1xuICAgICAgbWFwTm9kZVJhbmdlKHZtLl9mcmFnbWVudFN0YXJ0LCB2bS5fZnJhZ21lbnRFbmQsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIG9wKG5vZGUsIHRhcmdldCwgdm0pO1xuICAgICAgfSk7XG4gICAgICBjYiAmJiBjYigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcCh2bS4kZWwsIHRhcmdldCwgdm0sIGNiKTtcbiAgICB9XG4gICAgaWYgKHNob3VsZENhbGxIb29rKSB7XG4gICAgICB2bS5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG4gICAgfVxuICAgIHJldHVybiB2bTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBmb3Igc2VsZWN0b3JzXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGVsXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHF1ZXJ5KGVsKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBlbCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsKSA6IGVsO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGVuZCBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IGVsXG4gICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGFwcGVuZChlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuICAgIGlmIChjYikgY2IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnNlcnRCZWZvcmUgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBlbFxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBmdW5jdGlvbiBiZWZvcmVXaXRoQ2IoZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gICAgYmVmb3JlKGVsLCB0YXJnZXQpO1xuICAgIGlmIChjYikgY2IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBlbFxuICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBmdW5jdGlvbiByZW1vdmVXaXRoQ2IoZWwsIHZtLCBjYikge1xuICAgIHJlbW92ZShlbCk7XG4gICAgaWYgKGNiKSBjYigpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGV2ZW50c0FQSSAoVnVlKSB7XG4gIC8qKlxuICAgKiBMaXN0ZW4gb24gdGhlIGdpdmVuIGBldmVudGAgd2l0aCBgZm5gLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kb24gPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG4gICAgKHRoaXMuX2V2ZW50c1tldmVudF0gfHwgKHRoaXMuX2V2ZW50c1tldmVudF0gPSBbXSkpLnB1c2goZm4pO1xuICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIDEpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGRzIGFuIGBldmVudGAgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGludm9rZWQgYSBzaW5nbGVcbiAgICogdGltZSB0aGVuIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGZ1bmN0aW9uIG9uKCkge1xuICAgICAgc2VsZi4kb2ZmKGV2ZW50LCBvbik7XG4gICAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBvbi5mbiA9IGZuO1xuICAgIHRoaXMuJG9uKGV2ZW50LCBvbik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgZm9yIGBldmVudGAgb3IgYWxsXG4gICAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kb2ZmID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuICAgIHZhciBjYnM7XG4gICAgLy8gYWxsXG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICBpZiAodGhpcy4kcGFyZW50KSB7XG4gICAgICAgIGZvciAoZXZlbnQgaW4gdGhpcy5fZXZlbnRzKSB7XG4gICAgICAgICAgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcbiAgICAgICAgICBpZiAoY2JzKSB7XG4gICAgICAgICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtY2JzLmxlbmd0aCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvLyBzcGVjaWZpYyBldmVudFxuICAgIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF07XG4gICAgaWYgKCFjYnMpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLWNicy5sZW5ndGgpO1xuICAgICAgdGhpcy5fZXZlbnRzW2V2ZW50XSA9IG51bGw7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8gc3BlY2lmaWMgaGFuZGxlclxuICAgIHZhciBjYjtcbiAgICB2YXIgaSA9IGNicy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgY2IgPSBjYnNbaV07XG4gICAgICBpZiAoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbikge1xuICAgICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtMSk7XG4gICAgICAgIGNicy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogVHJpZ2dlciBhbiBldmVudCBvbiBzZWxmLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGV2ZW50XG4gICAqIEByZXR1cm4ge0Jvb2xlYW59IHNob3VsZFByb3BhZ2F0ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRlbWl0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIGlzU291cmNlID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJztcbiAgICBldmVudCA9IGlzU291cmNlID8gZXZlbnQgOiBldmVudC5uYW1lO1xuICAgIHZhciBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSBpc1NvdXJjZSB8fCAhY2JzO1xuICAgIGlmIChjYnMpIHtcbiAgICAgIGNicyA9IGNicy5sZW5ndGggPiAxID8gdG9BcnJheShjYnMpIDogY2JzO1xuICAgICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGhhY2t5IHNvbHV0aW9uIHRvIHRoZSBxdWVzdGlvbiByYWlzZWRcbiAgICAgIC8vIGluICMyMTAyOiBmb3IgYW4gaW5saW5lIGNvbXBvbmVudCBsaXN0ZW5lciBsaWtlIDxjb21wIEB0ZXN0PVwiZG9UaGlzXCI+LFxuICAgICAgLy8gdGhlIHByb3BhZ2F0aW9uIGhhbmRsaW5nIGlzIHNvbWV3aGF0IGJyb2tlbi4gVGhlcmVmb3JlIHdlXG4gICAgICAvLyBuZWVkIHRvIHRyZWF0IHRoZXNlIGlubGluZSBjYWxsYmFja3MgZGlmZmVyZW50bHkuXG4gICAgICB2YXIgaGFzUGFyZW50Q2JzID0gaXNTb3VyY2UgJiYgY2JzLnNvbWUoZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgIHJldHVybiBjYi5fZnJvbVBhcmVudDtcbiAgICAgIH0pO1xuICAgICAgaWYgKGhhc1BhcmVudENicykge1xuICAgICAgICBzaG91bGRQcm9wYWdhdGUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjYnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBjYiA9IGNic1tpXTtcbiAgICAgICAgdmFyIHJlcyA9IGNiLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICBpZiAocmVzID09PSB0cnVlICYmICghaGFzUGFyZW50Q2JzIHx8IGNiLl9mcm9tUGFyZW50KSkge1xuICAgICAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNob3VsZFByb3BhZ2F0ZTtcbiAgfTtcblxuICAvKipcbiAgICogUmVjdXJzaXZlbHkgYnJvYWRjYXN0IGFuIGV2ZW50IHRvIGFsbCBjaGlsZHJlbiBpbnN0YW5jZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gZXZlbnRcbiAgICogQHBhcmFtIHsuLi4qfSBhZGRpdGlvbmFsIGFyZ3VtZW50c1xuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRicm9hZGNhc3QgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgaXNTb3VyY2UgPSB0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnO1xuICAgIGV2ZW50ID0gaXNTb3VyY2UgPyBldmVudCA6IGV2ZW50Lm5hbWU7XG4gICAgLy8gaWYgbm8gY2hpbGQgaGFzIHJlZ2lzdGVyZWQgZm9yIHRoaXMgZXZlbnQsXG4gICAgLy8gdGhlbiB0aGVyZSdzIG5vIG5lZWQgdG8gYnJvYWRjYXN0LlxuICAgIGlmICghdGhpcy5fZXZlbnRzQ291bnRbZXZlbnRdKSByZXR1cm47XG4gICAgdmFyIGNoaWxkcmVuID0gdGhpcy4kY2hpbGRyZW47XG4gICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG4gICAgaWYgKGlzU291cmNlKSB7XG4gICAgICAvLyB1c2Ugb2JqZWN0IGV2ZW50IHRvIGluZGljYXRlIG5vbi1zb3VyY2UgZW1pdFxuICAgICAgLy8gb24gY2hpbGRyZW5cbiAgICAgIGFyZ3NbMF0gPSB7IG5hbWU6IGV2ZW50LCBzb3VyY2U6IHRoaXMgfTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IGNoaWxkLiRlbWl0LmFwcGx5KGNoaWxkLCBhcmdzKTtcbiAgICAgIGlmIChzaG91bGRQcm9wYWdhdGUpIHtcbiAgICAgICAgY2hpbGQuJGJyb2FkY2FzdC5hcHBseShjaGlsZCwgYXJncyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZWN1cnNpdmVseSBwcm9wYWdhdGUgYW4gZXZlbnQgdXAgdGhlIHBhcmVudCBjaGFpbi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7Li4uKn0gYWRkaXRpb25hbCBhcmd1bWVudHNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZGlzcGF0Y2ggPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gdGhpcy4kZW1pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICghc2hvdWxkUHJvcGFnYXRlKSByZXR1cm47XG4gICAgdmFyIHBhcmVudCA9IHRoaXMuJHBhcmVudDtcbiAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcbiAgICAvLyB1c2Ugb2JqZWN0IGV2ZW50IHRvIGluZGljYXRlIG5vbi1zb3VyY2UgZW1pdFxuICAgIC8vIG9uIHBhcmVudHNcbiAgICBhcmdzWzBdID0geyBuYW1lOiBldmVudCwgc291cmNlOiB0aGlzIH07XG4gICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgc2hvdWxkUHJvcGFnYXRlID0gcGFyZW50LiRlbWl0LmFwcGx5KHBhcmVudCwgYXJncyk7XG4gICAgICBwYXJlbnQgPSBzaG91bGRQcm9wYWdhdGUgPyBwYXJlbnQuJHBhcmVudCA6IG51bGw7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNb2RpZnkgdGhlIGxpc3RlbmVyIGNvdW50cyBvbiBhbGwgcGFyZW50cy5cbiAgICogVGhpcyBib29ra2VlcGluZyBhbGxvd3MgJGJyb2FkY2FzdCB0byByZXR1cm4gZWFybHkgd2hlblxuICAgKiBubyBjaGlsZCBoYXMgbGlzdGVuZWQgdG8gYSBjZXJ0YWluIGV2ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudFxuICAgKi9cblxuICB2YXIgaG9va1JFID0gL15ob29rOi87XG4gIGZ1bmN0aW9uIG1vZGlmeUxpc3RlbmVyQ291bnQodm0sIGV2ZW50LCBjb3VudCkge1xuICAgIHZhciBwYXJlbnQgPSB2bS4kcGFyZW50O1xuICAgIC8vIGhvb2tzIGRvIG5vdCBnZXQgYnJvYWRjYXN0ZWQgc28gbm8gbmVlZFxuICAgIC8vIHRvIGRvIGJvb2trZWVwaW5nIGZvciB0aGVtXG4gICAgaWYgKCFwYXJlbnQgfHwgIWNvdW50IHx8IGhvb2tSRS50ZXN0KGV2ZW50KSkgcmV0dXJuO1xuICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgIHBhcmVudC5fZXZlbnRzQ291bnRbZXZlbnRdID0gKHBhcmVudC5fZXZlbnRzQ291bnRbZXZlbnRdIHx8IDApICsgY291bnQ7XG4gICAgICBwYXJlbnQgPSBwYXJlbnQuJHBhcmVudDtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gbGlmZWN5Y2xlQVBJIChWdWUpIHtcbiAgLyoqXG4gICAqIFNldCBpbnN0YW5jZSB0YXJnZXQgZWxlbWVudCBhbmQga2ljayBvZmYgdGhlIGNvbXBpbGF0aW9uXG4gICAqIHByb2Nlc3MuIFRoZSBwYXNzZWQgaW4gYGVsYCBjYW4gYmUgYSBzZWxlY3RvciBzdHJpbmcsIGFuXG4gICAqIGV4aXN0aW5nIEVsZW1lbnQsIG9yIGEgRG9jdW1lbnRGcmFnbWVudCAoZm9yIGJsb2NrXG4gICAqIGluc3RhbmNlcykuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fHN0cmluZ30gZWxcbiAgICogQHB1YmxpY1xuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRtb3VudCA9IGZ1bmN0aW9uIChlbCkge1xuICAgIGlmICh0aGlzLl9pc0NvbXBpbGVkKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJyRtb3VudCgpIHNob3VsZCBiZSBjYWxsZWQgb25seSBvbmNlLicsIHRoaXMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbCA9IHF1ZXJ5KGVsKTtcbiAgICBpZiAoIWVsKSB7XG4gICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIH1cbiAgICB0aGlzLl9jb21waWxlKGVsKTtcbiAgICB0aGlzLl9pbml0RE9NSG9va3MoKTtcbiAgICBpZiAoaW5Eb2ModGhpcy4kZWwpKSB7XG4gICAgICB0aGlzLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcbiAgICAgIHJlYWR5LmNhbGwodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJG9uY2UoJ2hvb2s6YXR0YWNoZWQnLCByZWFkeSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNYXJrIGFuIGluc3RhbmNlIGFzIHJlYWR5LlxuICAgKi9cblxuICBmdW5jdGlvbiByZWFkeSgpIHtcbiAgICB0aGlzLl9pc0F0dGFjaGVkID0gdHJ1ZTtcbiAgICB0aGlzLl9pc1JlYWR5ID0gdHJ1ZTtcbiAgICB0aGlzLl9jYWxsSG9vaygncmVhZHknKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUZWFyZG93biB0aGUgaW5zdGFuY2UsIHNpbXBseSBkZWxlZ2F0ZSB0byB0aGUgaW50ZXJuYWxcbiAgICogX2Rlc3Ryb3kuXG4gICAqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJDbGVhbnVwXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGRlc3Ryb3kgPSBmdW5jdGlvbiAocmVtb3ZlLCBkZWZlckNsZWFudXApIHtcbiAgICB0aGlzLl9kZXN0cm95KHJlbW92ZSwgZGVmZXJDbGVhbnVwKTtcbiAgfTtcblxuICAvKipcbiAgICogUGFydGlhbGx5IGNvbXBpbGUgYSBwaWVjZSBvZiBET00gYW5kIHJldHVybiBhXG4gICAqIGRlY29tcGlsZSBmdW5jdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG4gICAqIEBwYXJhbSB7VnVlfSBbaG9zdF1cbiAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cbiAgICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRjb21waWxlID0gZnVuY3Rpb24gKGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIHJldHVybiBjb21waWxlKGVsLCB0aGlzLiRvcHRpb25zLCB0cnVlKSh0aGlzLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICB9O1xufVxuXG4vKipcbiAqIFRoZSBleHBvc2VkIFZ1ZSBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBBUEkgY29udmVudGlvbnM6XG4gKiAtIHB1YmxpYyBBUEkgbWV0aG9kcy9wcm9wZXJ0aWVzIGFyZSBwcmVmaXhlZCB3aXRoIGAkYFxuICogLSBpbnRlcm5hbCBtZXRob2RzL3Byb3BlcnRpZXMgYXJlIHByZWZpeGVkIHdpdGggYF9gXG4gKiAtIG5vbi1wcmVmaXhlZCBwcm9wZXJ0aWVzIGFyZSBhc3N1bWVkIHRvIGJlIHByb3hpZWQgdXNlclxuICogICBkYXRhLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIFZ1ZShvcHRpb25zKSB7XG4gIHRoaXMuX2luaXQob3B0aW9ucyk7XG59XG5cbi8vIGluc3RhbGwgaW50ZXJuYWxzXG5pbml0TWl4aW4oVnVlKTtcbnN0YXRlTWl4aW4oVnVlKTtcbmV2ZW50c01peGluKFZ1ZSk7XG5saWZlY3ljbGVNaXhpbihWdWUpO1xubWlzY01peGluKFZ1ZSk7XG5cbi8vIGluc3RhbGwgaW5zdGFuY2UgQVBJc1xuZGF0YUFQSShWdWUpO1xuZG9tQVBJKFZ1ZSk7XG5ldmVudHNBUEkoVnVlKTtcbmxpZmVjeWNsZUFQSShWdWUpO1xuXG52YXIgc2xvdCA9IHtcblxuICBwcmlvcml0eTogU0xPVCxcbiAgcGFyYW1zOiBbJ25hbWUnXSxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIHRoaXMgd2FzIHJlc29sdmVkIGR1cmluZyBjb21wb25lbnQgdHJhbnNjbHVzaW9uXG4gICAgdmFyIG5hbWUgPSB0aGlzLnBhcmFtcy5uYW1lIHx8ICdkZWZhdWx0JztcbiAgICB2YXIgY29udGVudCA9IHRoaXMudm0uX3Nsb3RDb250ZW50cyAmJiB0aGlzLnZtLl9zbG90Q29udGVudHNbbmFtZV07XG4gICAgaWYgKCFjb250ZW50IHx8ICFjb250ZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgdGhpcy5mYWxsYmFjaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbXBpbGUoY29udGVudC5jbG9uZU5vZGUodHJ1ZSksIHRoaXMudm0uX2NvbnRleHQsIHRoaXMudm0pO1xuICAgIH1cbiAgfSxcblxuICBjb21waWxlOiBmdW5jdGlvbiBjb21waWxlKGNvbnRlbnQsIGNvbnRleHQsIGhvc3QpIHtcbiAgICBpZiAoY29udGVudCAmJiBjb250ZXh0KSB7XG4gICAgICBpZiAodGhpcy5lbC5oYXNDaGlsZE5vZGVzKCkgJiYgY29udGVudC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSAmJiBjb250ZW50LmNoaWxkTm9kZXNbMF0ubm9kZVR5cGUgPT09IDEgJiYgY29udGVudC5jaGlsZE5vZGVzWzBdLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG4gICAgICAgIC8vIGlmIHRoZSBpbnNlcnRlZCBzbG90IGhhcyB2LWlmXG4gICAgICAgIC8vIGluamVjdCBmYWxsYmFjayBjb250ZW50IGFzIHRoZSB2LWVsc2VcbiAgICAgICAgdmFyIGVsc2VCbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgICAgIGVsc2VCbG9jay5zZXRBdHRyaWJ1dGUoJ3YtZWxzZScsICcnKTtcbiAgICAgICAgZWxzZUJsb2NrLmlubmVySFRNTCA9IHRoaXMuZWwuaW5uZXJIVE1MO1xuICAgICAgICAvLyB0aGUgZWxzZSBibG9jayBzaG91bGQgYmUgY29tcGlsZWQgaW4gY2hpbGQgc2NvcGVcbiAgICAgICAgZWxzZUJsb2NrLl9jb250ZXh0ID0gdGhpcy52bTtcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChlbHNlQmxvY2spO1xuICAgICAgfVxuICAgICAgdmFyIHNjb3BlID0gaG9zdCA/IGhvc3QuX3Njb3BlIDogdGhpcy5fc2NvcGU7XG4gICAgICB0aGlzLnVubGluayA9IGNvbnRleHQuJGNvbXBpbGUoY29udGVudCwgaG9zdCwgc2NvcGUsIHRoaXMuX2ZyYWcpO1xuICAgIH1cbiAgICBpZiAoY29udGVudCkge1xuICAgICAgcmVwbGFjZSh0aGlzLmVsLCBjb250ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKHRoaXMuZWwpO1xuICAgIH1cbiAgfSxcblxuICBmYWxsYmFjazogZnVuY3Rpb24gZmFsbGJhY2soKSB7XG4gICAgdGhpcy5jb21waWxlKGV4dHJhY3RDb250ZW50KHRoaXMuZWwsIHRydWUpLCB0aGlzLnZtKTtcbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICBpZiAodGhpcy51bmxpbmspIHtcbiAgICAgIHRoaXMudW5saW5rKCk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgcGFydGlhbCA9IHtcblxuICBwcmlvcml0eTogUEFSVElBTCxcblxuICBwYXJhbXM6IFsnbmFtZSddLFxuXG4gIC8vIHdhdGNoIGNoYW5nZXMgdG8gbmFtZSBmb3IgZHluYW1pYyBwYXJ0aWFsc1xuICBwYXJhbVdhdGNoZXJzOiB7XG4gICAgbmFtZTogZnVuY3Rpb24gbmFtZSh2YWx1ZSkge1xuICAgICAgdklmLnJlbW92ZS5jYWxsKHRoaXMpO1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0KHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1wYXJ0aWFsJyk7XG4gICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG4gICAgdGhpcy5pbnNlcnQodGhpcy5wYXJhbXMubmFtZSk7XG4gIH0sXG5cbiAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoaWQpIHtcbiAgICB2YXIgcGFydGlhbCA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAncGFydGlhbHMnLCBpZCwgdHJ1ZSk7XG4gICAgaWYgKHBhcnRpYWwpIHtcbiAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgcGFydGlhbCk7XG4gICAgICB2SWYuaW5zZXJ0LmNhbGwodGhpcyk7XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIGlmICh0aGlzLmZyYWcpIHtcbiAgICAgIHRoaXMuZnJhZy5kZXN0cm95KCk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgZWxlbWVudERpcmVjdGl2ZXMgPSB7XG4gIHNsb3Q6IHNsb3QsXG4gIHBhcnRpYWw6IHBhcnRpYWxcbn07XG5cbnZhciBjb252ZXJ0QXJyYXkgPSB2Rm9yLl9wb3N0UHJvY2VzcztcblxuLyoqXG4gKiBMaW1pdCBmaWx0ZXIgZm9yIGFycmF5c1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBuXG4gKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IChEZWNpbWFsIGV4cGVjdGVkKVxuICovXG5cbmZ1bmN0aW9uIGxpbWl0QnkoYXJyLCBuLCBvZmZzZXQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID8gcGFyc2VJbnQob2Zmc2V0LCAxMCkgOiAwO1xuICBuID0gdG9OdW1iZXIobik7XG4gIHJldHVybiB0eXBlb2YgbiA9PT0gJ251bWJlcicgPyBhcnIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBuKSA6IGFycjtcbn1cblxuLyoqXG4gKiBGaWx0ZXIgZmlsdGVyIGZvciBhcnJheXNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoXG4gKiBAcGFyYW0ge1N0cmluZ30gW2RlbGltaXRlcl1cbiAqIEBwYXJhbSB7U3RyaW5nfSAuLi5kYXRhS2V5c1xuICovXG5cbmZ1bmN0aW9uIGZpbHRlckJ5KGFyciwgc2VhcmNoLCBkZWxpbWl0ZXIpIHtcbiAgYXJyID0gY29udmVydEFycmF5KGFycik7XG4gIGlmIChzZWFyY2ggPT0gbnVsbCkge1xuICAgIHJldHVybiBhcnI7XG4gIH1cbiAgaWYgKHR5cGVvZiBzZWFyY2ggPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gYXJyLmZpbHRlcihzZWFyY2gpO1xuICB9XG4gIC8vIGNhc3QgdG8gbG93ZXJjYXNlIHN0cmluZ1xuICBzZWFyY2ggPSAoJycgKyBzZWFyY2gpLnRvTG93ZXJDYXNlKCk7XG4gIC8vIGFsbG93IG9wdGlvbmFsIGBpbmAgZGVsaW1pdGVyXG4gIC8vIGJlY2F1c2Ugd2h5IG5vdFxuICB2YXIgbiA9IGRlbGltaXRlciA9PT0gJ2luJyA/IDMgOiAyO1xuICAvLyBleHRyYWN0IGFuZCBmbGF0dGVuIGtleXNcbiAgdmFyIGtleXMgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCB0b0FycmF5KGFyZ3VtZW50cywgbikpO1xuICB2YXIgcmVzID0gW107XG4gIHZhciBpdGVtLCBrZXksIHZhbCwgajtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcnIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgaXRlbSA9IGFycltpXTtcbiAgICB2YWwgPSBpdGVtICYmIGl0ZW0uJHZhbHVlIHx8IGl0ZW07XG4gICAgaiA9IGtleXMubGVuZ3RoO1xuICAgIGlmIChqKSB7XG4gICAgICB3aGlsZSAoai0tKSB7XG4gICAgICAgIGtleSA9IGtleXNbal07XG4gICAgICAgIGlmIChrZXkgPT09ICcka2V5JyAmJiBjb250YWlucyhpdGVtLiRrZXksIHNlYXJjaCkgfHwgY29udGFpbnMoZ2V0UGF0aCh2YWwsIGtleSksIHNlYXJjaCkpIHtcbiAgICAgICAgICByZXMucHVzaChpdGVtKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY29udGFpbnMoaXRlbSwgc2VhcmNoKSkge1xuICAgICAgcmVzLnB1c2goaXRlbSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogRmlsdGVyIGZpbHRlciBmb3IgYXJyYXlzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8QXJyYXk8U3RyaW5nPnxGdW5jdGlvbn0gLi4uc29ydEtleXNcbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3JkZXJdXG4gKi9cblxuZnVuY3Rpb24gb3JkZXJCeShhcnIpIHtcbiAgdmFyIGNvbXBhcmF0b3IgPSBudWxsO1xuICB2YXIgc29ydEtleXMgPSB1bmRlZmluZWQ7XG4gIGFyciA9IGNvbnZlcnRBcnJheShhcnIpO1xuXG4gIC8vIGRldGVybWluZSBvcmRlciAobGFzdCBhcmd1bWVudClcbiAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG4gIHZhciBvcmRlciA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcbiAgaWYgKHR5cGVvZiBvcmRlciA9PT0gJ251bWJlcicpIHtcbiAgICBvcmRlciA9IG9yZGVyIDwgMCA/IC0xIDogMTtcbiAgICBhcmdzID0gYXJncy5sZW5ndGggPiAxID8gYXJncy5zbGljZSgwLCAtMSkgOiBhcmdzO1xuICB9IGVsc2Uge1xuICAgIG9yZGVyID0gMTtcbiAgfVxuXG4gIC8vIGRldGVybWluZSBzb3J0S2V5cyAmIGNvbXBhcmF0b3JcbiAgdmFyIGZpcnN0QXJnID0gYXJnc1swXTtcbiAgaWYgKCFmaXJzdEFyZykge1xuICAgIHJldHVybiBhcnI7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGZpcnN0QXJnID09PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gY3VzdG9tIGNvbXBhcmF0b3JcbiAgICBjb21wYXJhdG9yID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiBmaXJzdEFyZyhhLCBiKSAqIG9yZGVyO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgLy8gc3RyaW5nIGtleXMuIGZsYXR0ZW4gZmlyc3RcbiAgICBzb3J0S2V5cyA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIGFyZ3MpO1xuICAgIGNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYiwgaSkge1xuICAgICAgaSA9IGkgfHwgMDtcbiAgICAgIHJldHVybiBpID49IHNvcnRLZXlzLmxlbmd0aCAtIDEgPyBiYXNlQ29tcGFyZShhLCBiLCBpKSA6IGJhc2VDb21wYXJlKGEsIGIsIGkpIHx8IGNvbXBhcmF0b3IoYSwgYiwgaSArIDEpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBiYXNlQ29tcGFyZShhLCBiLCBzb3J0S2V5SW5kZXgpIHtcbiAgICB2YXIgc29ydEtleSA9IHNvcnRLZXlzW3NvcnRLZXlJbmRleF07XG4gICAgaWYgKHNvcnRLZXkpIHtcbiAgICAgIGlmIChzb3J0S2V5ICE9PSAnJGtleScpIHtcbiAgICAgICAgaWYgKGlzT2JqZWN0KGEpICYmICckdmFsdWUnIGluIGEpIGEgPSBhLiR2YWx1ZTtcbiAgICAgICAgaWYgKGlzT2JqZWN0KGIpICYmICckdmFsdWUnIGluIGIpIGIgPSBiLiR2YWx1ZTtcbiAgICAgIH1cbiAgICAgIGEgPSBpc09iamVjdChhKSA/IGdldFBhdGgoYSwgc29ydEtleSkgOiBhO1xuICAgICAgYiA9IGlzT2JqZWN0KGIpID8gZ2V0UGF0aChiLCBzb3J0S2V5KSA6IGI7XG4gICAgfVxuICAgIHJldHVybiBhID09PSBiID8gMCA6IGEgPiBiID8gb3JkZXIgOiAtb3JkZXI7XG4gIH1cblxuICAvLyBzb3J0IG9uIGEgY29weSB0byBhdm9pZCBtdXRhdGluZyBvcmlnaW5hbCBhcnJheVxuICByZXR1cm4gYXJyLnNsaWNlKCkuc29ydChjb21wYXJhdG9yKTtcbn1cblxuLyoqXG4gKiBTdHJpbmcgY29udGFpbiBoZWxwZXJcbiAqXG4gKiBAcGFyYW0geyp9IHZhbFxuICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuICovXG5cbmZ1bmN0aW9uIGNvbnRhaW5zKHZhbCwgc2VhcmNoKSB7XG4gIHZhciBpO1xuICBpZiAoaXNQbGFpbk9iamVjdCh2YWwpKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xuICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBpZiAoY29udGFpbnModmFsW2tleXNbaV1dLCBzZWFyY2gpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChpc0FycmF5KHZhbCkpIHtcbiAgICBpID0gdmFsLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBpZiAoY29udGFpbnModmFsW2ldLCBzZWFyY2gpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmICh2YWwgIT0gbnVsbCkge1xuICAgIHJldHVybiB2YWwudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2VhcmNoKSA+IC0xO1xuICB9XG59XG5cbnZhciBkaWdpdHNSRSA9IC8oXFxkezN9KSg/PVxcZCkvZztcblxuLy8gYXNzZXQgY29sbGVjdGlvbnMgbXVzdCBiZSBhIHBsYWluIG9iamVjdC5cbnZhciBmaWx0ZXJzID0ge1xuXG4gIG9yZGVyQnk6IG9yZGVyQnksXG4gIGZpbHRlckJ5OiBmaWx0ZXJCeSxcbiAgbGltaXRCeTogbGltaXRCeSxcblxuICAvKipcbiAgICogU3RyaW5naWZ5IHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZW50XG4gICAqL1xuXG4gIGpzb246IHtcbiAgICByZWFkOiBmdW5jdGlvbiByZWFkKHZhbHVlLCBpbmRlbnQpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSwgbnVsbCwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBpbmRlbnQgOiAyKTtcbiAgICB9LFxuICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZSh2YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiAnYWJjJyA9PiAnQWJjJ1xuICAgKi9cblxuICBjYXBpdGFsaXplOiBmdW5jdGlvbiBjYXBpdGFsaXplKHZhbHVlKSB7XG4gICAgaWYgKCF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkgcmV0dXJuICcnO1xuICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICByZXR1cm4gdmFsdWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2YWx1ZS5zbGljZSgxKTtcbiAgfSxcblxuICAvKipcbiAgICogJ2FiYycgPT4gJ0FCQydcbiAgICovXG5cbiAgdXBwZXJjYXNlOiBmdW5jdGlvbiB1cHBlcmNhc2UodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgfHwgdmFsdWUgPT09IDAgPyB2YWx1ZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgOiAnJztcbiAgfSxcblxuICAvKipcbiAgICogJ0FiQycgPT4gJ2FiYydcbiAgICovXG5cbiAgbG93ZXJjYXNlOiBmdW5jdGlvbiBsb3dlcmNhc2UodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgfHwgdmFsdWUgPT09IDAgPyB2YWx1ZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkgOiAnJztcbiAgfSxcblxuICAvKipcbiAgICogMTIzNDUgPT4gJDEyLDM0NS4wMFxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gc2lnblxuICAgKiBAcGFyYW0ge051bWJlcn0gZGVjaW1hbHMgRGVjaW1hbCBwbGFjZXNcbiAgICovXG5cbiAgY3VycmVuY3k6IGZ1bmN0aW9uIGN1cnJlbmN5KHZhbHVlLCBfY3VycmVuY3ksIGRlY2ltYWxzKSB7XG4gICAgdmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICBpZiAoIWlzRmluaXRlKHZhbHVlKSB8fCAhdmFsdWUgJiYgdmFsdWUgIT09IDApIHJldHVybiAnJztcbiAgICBfY3VycmVuY3kgPSBfY3VycmVuY3kgIT0gbnVsbCA/IF9jdXJyZW5jeSA6ICckJztcbiAgICBkZWNpbWFscyA9IGRlY2ltYWxzICE9IG51bGwgPyBkZWNpbWFscyA6IDI7XG4gICAgdmFyIHN0cmluZ2lmaWVkID0gTWF0aC5hYnModmFsdWUpLnRvRml4ZWQoZGVjaW1hbHMpO1xuICAgIHZhciBfaW50ID0gZGVjaW1hbHMgPyBzdHJpbmdpZmllZC5zbGljZSgwLCAtMSAtIGRlY2ltYWxzKSA6IHN0cmluZ2lmaWVkO1xuICAgIHZhciBpID0gX2ludC5sZW5ndGggJSAzO1xuICAgIHZhciBoZWFkID0gaSA+IDAgPyBfaW50LnNsaWNlKDAsIGkpICsgKF9pbnQubGVuZ3RoID4gMyA/ICcsJyA6ICcnKSA6ICcnO1xuICAgIHZhciBfZmxvYXQgPSBkZWNpbWFscyA/IHN0cmluZ2lmaWVkLnNsaWNlKC0xIC0gZGVjaW1hbHMpIDogJyc7XG4gICAgdmFyIHNpZ24gPSB2YWx1ZSA8IDAgPyAnLScgOiAnJztcbiAgICByZXR1cm4gc2lnbiArIF9jdXJyZW5jeSArIGhlYWQgKyBfaW50LnNsaWNlKGkpLnJlcGxhY2UoZGlnaXRzUkUsICckMSwnKSArIF9mbG9hdDtcbiAgfSxcblxuICAvKipcbiAgICogJ2l0ZW0nID0+ICdpdGVtcydcbiAgICpcbiAgICogQHBhcmFtc1xuICAgKiAgYW4gYXJyYXkgb2Ygc3RyaW5ncyBjb3JyZXNwb25kaW5nIHRvXG4gICAqICB0aGUgc2luZ2xlLCBkb3VibGUsIHRyaXBsZSAuLi4gZm9ybXMgb2YgdGhlIHdvcmQgdG9cbiAgICogIGJlIHBsdXJhbGl6ZWQuIFdoZW4gdGhlIG51bWJlciB0byBiZSBwbHVyYWxpemVkXG4gICAqICBleGNlZWRzIHRoZSBsZW5ndGggb2YgdGhlIGFyZ3MsIGl0IHdpbGwgdXNlIHRoZSBsYXN0XG4gICAqICBlbnRyeSBpbiB0aGUgYXJyYXkuXG4gICAqXG4gICAqICBlLmcuIFsnc2luZ2xlJywgJ2RvdWJsZScsICd0cmlwbGUnLCAnbXVsdGlwbGUnXVxuICAgKi9cblxuICBwbHVyYWxpemU6IGZ1bmN0aW9uIHBsdXJhbGl6ZSh2YWx1ZSkge1xuICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuICAgIHZhciBsZW5ndGggPSBhcmdzLmxlbmd0aDtcbiAgICBpZiAobGVuZ3RoID4gMSkge1xuICAgICAgdmFyIGluZGV4ID0gdmFsdWUgJSAxMCAtIDE7XG4gICAgICByZXR1cm4gaW5kZXggaW4gYXJncyA/IGFyZ3NbaW5kZXhdIDogYXJnc1tsZW5ndGggLSAxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGFyZ3NbMF0gKyAodmFsdWUgPT09IDEgPyAnJyA6ICdzJyk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBEZWJvdW5jZSBhIGhhbmRsZXIgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRlbGF5ID0gMzAwXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgKi9cblxuICBkZWJvdW5jZTogZnVuY3Rpb24gZGVib3VuY2UoaGFuZGxlciwgZGVsYXkpIHtcbiAgICBpZiAoIWhhbmRsZXIpIHJldHVybjtcbiAgICBpZiAoIWRlbGF5KSB7XG4gICAgICBkZWxheSA9IDMwMDtcbiAgICB9XG4gICAgcmV0dXJuIF9kZWJvdW5jZShoYW5kbGVyLCBkZWxheSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGluc3RhbGxHbG9iYWxBUEkgKFZ1ZSkge1xuICAvKipcbiAgICogVnVlIGFuZCBldmVyeSBjb25zdHJ1Y3RvciB0aGF0IGV4dGVuZHMgVnVlIGhhcyBhblxuICAgKiBhc3NvY2lhdGVkIG9wdGlvbnMgb2JqZWN0LCB3aGljaCBjYW4gYmUgYWNjZXNzZWQgZHVyaW5nXG4gICAqIGNvbXBpbGF0aW9uIHN0ZXBzIGFzIGB0aGlzLmNvbnN0cnVjdG9yLm9wdGlvbnNgLlxuICAgKlxuICAgKiBUaGVzZSBjYW4gYmUgc2VlbiBhcyB0aGUgZGVmYXVsdCBvcHRpb25zIG9mIGV2ZXJ5XG4gICAqIFZ1ZSBpbnN0YW5jZS5cbiAgICovXG5cbiAgVnVlLm9wdGlvbnMgPSB7XG4gICAgZGlyZWN0aXZlczogZGlyZWN0aXZlcyxcbiAgICBlbGVtZW50RGlyZWN0aXZlczogZWxlbWVudERpcmVjdGl2ZXMsXG4gICAgZmlsdGVyczogZmlsdGVycyxcbiAgICB0cmFuc2l0aW9uczoge30sXG4gICAgY29tcG9uZW50czoge30sXG4gICAgcGFydGlhbHM6IHt9LFxuICAgIHJlcGxhY2U6IHRydWVcbiAgfTtcblxuICAvKipcbiAgICogRXhwb3NlIHVzZWZ1bCBpbnRlcm5hbHNcbiAgICovXG5cbiAgVnVlLnV0aWwgPSB1dGlsO1xuICBWdWUuY29uZmlnID0gY29uZmlnO1xuICBWdWUuc2V0ID0gc2V0O1xuICBWdWVbJ2RlbGV0ZSddID0gZGVsO1xuICBWdWUubmV4dFRpY2sgPSBuZXh0VGljaztcblxuICAvKipcbiAgICogVGhlIGZvbGxvd2luZyBhcmUgZXhwb3NlZCBmb3IgYWR2YW5jZWQgdXNhZ2UgLyBwbHVnaW5zXG4gICAqL1xuXG4gIFZ1ZS5jb21waWxlciA9IGNvbXBpbGVyO1xuICBWdWUuRnJhZ21lbnRGYWN0b3J5ID0gRnJhZ21lbnRGYWN0b3J5O1xuICBWdWUuaW50ZXJuYWxEaXJlY3RpdmVzID0gaW50ZXJuYWxEaXJlY3RpdmVzO1xuICBWdWUucGFyc2VycyA9IHtcbiAgICBwYXRoOiBwYXRoLFxuICAgIHRleHQ6IHRleHQsXG4gICAgdGVtcGxhdGU6IHRlbXBsYXRlLFxuICAgIGRpcmVjdGl2ZTogZGlyZWN0aXZlLFxuICAgIGV4cHJlc3Npb246IGV4cHJlc3Npb25cbiAgfTtcblxuICAvKipcbiAgICogRWFjaCBpbnN0YW5jZSBjb25zdHJ1Y3RvciwgaW5jbHVkaW5nIFZ1ZSwgaGFzIGEgdW5pcXVlXG4gICAqIGNpZC4gVGhpcyBlbmFibGVzIHVzIHRvIGNyZWF0ZSB3cmFwcGVkIFwiY2hpbGRcbiAgICogY29uc3RydWN0b3JzXCIgZm9yIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UgYW5kIGNhY2hlIHRoZW0uXG4gICAqL1xuXG4gIFZ1ZS5jaWQgPSAwO1xuICB2YXIgY2lkID0gMTtcblxuICAvKipcbiAgICogQ2xhc3MgaW5oZXJpdGFuY2VcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGV4dGVuZE9wdGlvbnNcbiAgICovXG5cbiAgVnVlLmV4dGVuZCA9IGZ1bmN0aW9uIChleHRlbmRPcHRpb25zKSB7XG4gICAgZXh0ZW5kT3B0aW9ucyA9IGV4dGVuZE9wdGlvbnMgfHwge307XG4gICAgdmFyIFN1cGVyID0gdGhpcztcbiAgICB2YXIgaXNGaXJzdEV4dGVuZCA9IFN1cGVyLmNpZCA9PT0gMDtcbiAgICBpZiAoaXNGaXJzdEV4dGVuZCAmJiBleHRlbmRPcHRpb25zLl9DdG9yKSB7XG4gICAgICByZXR1cm4gZXh0ZW5kT3B0aW9ucy5fQ3RvcjtcbiAgICB9XG4gICAgdmFyIG5hbWUgPSBleHRlbmRPcHRpb25zLm5hbWUgfHwgU3VwZXIub3B0aW9ucy5uYW1lO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoIS9eW2EtekEtWl1bXFx3LV0qJC8udGVzdChuYW1lKSkge1xuICAgICAgICB3YXJuKCdJbnZhbGlkIGNvbXBvbmVudCBuYW1lOiBcIicgKyBuYW1lICsgJ1wiLiBDb21wb25lbnQgbmFtZXMgJyArICdjYW4gb25seSBjb250YWluIGFscGhhbnVtZXJpYyBjaGFyYWNhdGVycyBhbmQgdGhlIGh5cGhlbi4nKTtcbiAgICAgICAgbmFtZSA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBTdWIgPSBjcmVhdGVDbGFzcyhuYW1lIHx8ICdWdWVDb21wb25lbnQnKTtcbiAgICBTdWIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdXBlci5wcm90b3R5cGUpO1xuICAgIFN1Yi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdWI7XG4gICAgU3ViLmNpZCA9IGNpZCsrO1xuICAgIFN1Yi5vcHRpb25zID0gbWVyZ2VPcHRpb25zKFN1cGVyLm9wdGlvbnMsIGV4dGVuZE9wdGlvbnMpO1xuICAgIFN1Ylsnc3VwZXInXSA9IFN1cGVyO1xuICAgIC8vIGFsbG93IGZ1cnRoZXIgZXh0ZW5zaW9uXG4gICAgU3ViLmV4dGVuZCA9IFN1cGVyLmV4dGVuZDtcbiAgICAvLyBjcmVhdGUgYXNzZXQgcmVnaXN0ZXJzLCBzbyBleHRlbmRlZCBjbGFzc2VzXG4gICAgLy8gY2FuIGhhdmUgdGhlaXIgcHJpdmF0ZSBhc3NldHMgdG9vLlxuICAgIGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICBTdWJbdHlwZV0gPSBTdXBlclt0eXBlXTtcbiAgICB9KTtcbiAgICAvLyBlbmFibGUgcmVjdXJzaXZlIHNlbGYtbG9va3VwXG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIFN1Yi5vcHRpb25zLmNvbXBvbmVudHNbbmFtZV0gPSBTdWI7XG4gICAgfVxuICAgIC8vIGNhY2hlIGNvbnN0cnVjdG9yXG4gICAgaWYgKGlzRmlyc3RFeHRlbmQpIHtcbiAgICAgIGV4dGVuZE9wdGlvbnMuX0N0b3IgPSBTdWI7XG4gICAgfVxuICAgIHJldHVybiBTdWI7XG4gIH07XG5cbiAgLyoqXG4gICAqIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3ViLWNsYXNzIGNvbnN0cnVjdG9yIHdpdGggdGhlXG4gICAqIGdpdmVuIG5hbWUuIFRoaXMgZ2l2ZXMgdXMgbXVjaCBuaWNlciBvdXRwdXQgd2hlblxuICAgKiBsb2dnaW5nIGluc3RhbmNlcyBpbiB0aGUgY29uc29sZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZUNsYXNzKG5hbWUpIHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1uZXctZnVuYyAqL1xuICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ3JldHVybiBmdW5jdGlvbiAnICsgY2xhc3NpZnkobmFtZSkgKyAnIChvcHRpb25zKSB7IHRoaXMuX2luaXQob3B0aW9ucykgfScpKCk7XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1uZXctZnVuYyAqL1xuICB9XG5cbiAgLyoqXG4gICAqIFBsdWdpbiBzeXN0ZW1cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHBsdWdpblxuICAgKi9cblxuICBWdWUudXNlID0gZnVuY3Rpb24gKHBsdWdpbikge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChwbHVnaW4uaW5zdGFsbGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGFkZGl0aW9uYWwgcGFyYW1ldGVyc1xuICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuICAgIGFyZ3MudW5zaGlmdCh0aGlzKTtcbiAgICBpZiAodHlwZW9mIHBsdWdpbi5pbnN0YWxsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBwbHVnaW4uaW5zdGFsbC5hcHBseShwbHVnaW4sIGFyZ3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwbHVnaW4uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfVxuICAgIHBsdWdpbi5pbnN0YWxsZWQgPSB0cnVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBcHBseSBhIGdsb2JhbCBtaXhpbiBieSBtZXJnaW5nIGl0IGludG8gdGhlIGRlZmF1bHRcbiAgICogb3B0aW9ucy5cbiAgICovXG5cbiAgVnVlLm1peGluID0gZnVuY3Rpb24gKG1peGluKSB7XG4gICAgVnVlLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoVnVlLm9wdGlvbnMsIG1peGluKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIGFzc2V0IHJlZ2lzdHJhdGlvbiBtZXRob2RzIHdpdGggdGhlIGZvbGxvd2luZ1xuICAgKiBzaWduYXR1cmU6XG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICAgKiBAcGFyYW0geyp9IGRlZmluaXRpb25cbiAgICovXG5cbiAgY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICBWdWVbdHlwZV0gPSBmdW5jdGlvbiAoaWQsIGRlZmluaXRpb24pIHtcbiAgICAgIGlmICghZGVmaW5pdGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiAoY29tbW9uVGFnUkUudGVzdChpZCkgfHwgcmVzZXJ2ZWRUYWdSRS50ZXN0KGlkKSkpIHtcbiAgICAgICAgICAgIHdhcm4oJ0RvIG5vdCB1c2UgYnVpbHQtaW4gb3IgcmVzZXJ2ZWQgSFRNTCBlbGVtZW50cyBhcyBjb21wb25lbnQgJyArICdpZDogJyArIGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT09ICdjb21wb25lbnQnICYmIGlzUGxhaW5PYmplY3QoZGVmaW5pdGlvbikpIHtcbiAgICAgICAgICBpZiAoIWRlZmluaXRpb24ubmFtZSkge1xuICAgICAgICAgICAgZGVmaW5pdGlvbi5uYW1lID0gaWQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmluaXRpb24gPSBWdWUuZXh0ZW5kKGRlZmluaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF0gPSBkZWZpbml0aW9uO1xuICAgICAgICByZXR1cm4gZGVmaW5pdGlvbjtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcblxuICAvLyBleHBvc2UgaW50ZXJuYWwgdHJhbnNpdGlvbiBBUElcbiAgZXh0ZW5kKFZ1ZS50cmFuc2l0aW9uLCB0cmFuc2l0aW9uKTtcbn1cblxuaW5zdGFsbEdsb2JhbEFQSShWdWUpO1xuXG5WdWUudmVyc2lvbiA9ICcxLjAuMjYnO1xuXG4vLyBkZXZ0b29scyBnbG9iYWwgaG9va1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICBpZiAoY29uZmlnLmRldnRvb2xzKSB7XG4gICAgaWYgKGRldnRvb2xzKSB7XG4gICAgICBkZXZ0b29scy5lbWl0KCdpbml0JywgVnVlKTtcbiAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgaW5Ccm93c2VyICYmIC9DaHJvbWVcXC9cXGQrLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSkge1xuICAgICAgY29uc29sZS5sb2coJ0Rvd25sb2FkIHRoZSBWdWUgRGV2dG9vbHMgZm9yIGEgYmV0dGVyIGRldmVsb3BtZW50IGV4cGVyaWVuY2U6XFxuJyArICdodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWRldnRvb2xzJyk7XG4gICAgfVxuICB9XG59LCAwKTtcblxubW9kdWxlLmV4cG9ydHMgPSBWdWU7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlL2Rpc3QvdnVlLmNvbW1vbi5qc1xuICoqIG1vZHVsZSBpZCA9IDE5OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHsgdGhyb3cgbmV3IEVycm9yKFwiZGVmaW5lIGNhbm5vdCBiZSB1c2VkIGluZGlyZWN0XCIpOyB9O1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqICh3ZWJwYWNrKS9idWlsZGluL2FtZC1kZWZpbmUuanNcbiAqKiBtb2R1bGUgaWQgPSAxOTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obW9kdWxlKSB7XHJcblx0aWYoIW1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcclxuXHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xyXG5cdFx0bW9kdWxlLnBhdGhzID0gW107XHJcblx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcclxuXHRcdG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xyXG5cdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XHJcblx0fVxyXG5cdHJldHVybiBtb2R1bGU7XHJcbn1cclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAod2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanNcbiAqKiBtb2R1bGUgaWQgPSAyMDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=