!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n=window.webpackJsonp;window.webpackJsonp=function(i,r){for(var s,a,c=0,l=[];c<i.length;c++)a=i[c],o[a]&&l.push.apply(l,o[a]),o[a]=0;for(s in r)e[s]=r[s];for(n&&n(i,r);l.length;)l.shift().call(null,t)};var i={},o={0:0,1:0,2:0};return t.e=function(e,n){if(0===o[e])return n.call(null,t);if(void 0!==o[e])o[e].push(n);else{o[e]=[n];var i=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0,r.src=t.p+""+e+".app.js",i.appendChild(r)}},t.m=e,t.c=i,t.p="/hybrid-thorium/dev/app/",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var o=n(43),r=i(o),s=n(203),a=i(s),c=n(65),l=i(c),h=n(67),u=i(h),f=n(161),p=i(f),d=n(183),v=i(d),_=n(184),y=i(_);r["default"].config.debug=!0,r["default"].use(a["default"]),r["default"].use(u["default"]);var b=new a["default"],m=r["default"].extend({components:{SideNav:v["default"],SiteHeader:y["default"]},data:function(){return{ligerEndPoint:"https://api.cms.telus.com/legals",ligerApplicationKey:"b9738d67b89dfc782746d4a9cf4a1093"}}});b.map(l["default"]),b.afterEach(function(){setTimeout(function(){p["default"].highlightAll()},0)}),b.start(m,"#app-main")},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=u[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(c(i.parts[r],t))}else{for(var s=[],r=0;r<i.parts.length;r++)s.push(c(i.parts[r],t));u[i.id]={id:i.id,refs:1,parts:s}}}}function o(e){for(var t=[],n={},i=0;i<e.length;i++){var o=e[i],r=o[0],s=o[1],a=o[2],c=o[3],l={css:s,media:a,sourceMap:c};n[r]?n[r].parts.push(l):t.push(n[r]={id:r,parts:[l]})}return t}function r(e,t){var n=d(),i=y[y.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),y.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function s(e){e.parentNode.removeChild(e);var t=y.indexOf(e);t>=0&&y.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",r(e,t),t}function c(e,t){var n,i,o;if(t.singleton){var r=_++;n=v||(v=a(t)),i=l.bind(null,n,r,!1),o=l.bind(null,n,r,!0)}else n=a(t),i=h.bind(null,n),o=function(){s(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}function l(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,o);else{var r=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function h(e,t){var n=t.css,i=t.media,o=t.sourceMap;if(i&&e.setAttribute("media",i),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var u={},f=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},p=f(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),d=f(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,_=0,y=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=p()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=o(e);return i(n,t),function(e){for(var r=[],s=0;s<n.length;s++){var a=n[s],c=u[a.id];c.refs--,r.push(c)}if(e){var l=o(e);i(l,t)}for(var s=0;s<r.length;s++){var c=r[s];if(0===c.refs){for(var h=0;h<c.parts.length;h++)c.parts[h]();delete u[c.id]}}}};var b=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){(function(t){var i=n(108),o=i("object"==typeof t&&t),r=i("object"==typeof self&&self),s=i("object"==typeof this&&this),a=o||r||s||Function("return this")();e.exports=a}).call(t,function(){return this}())},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var i,o;n(204),i=n(44),o=n(162),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){function i(e,t){var n=r(e,t);return o(n)?n:void 0}var o=n(100),r=n(116);e.exports=i},function(e,t){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(127),r=n(128),s=n(129),a=n(130),c=n(131);i.prototype.clear=o,i.prototype["delete"]=r,i.prototype.get=s,i.prototype.has=a,i.prototype.set=c,e.exports=i},function(e,t,n){function i(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1}var o=n(148);e.exports=i},function(e,t,n){function i(e,t){var n=e.__data__;return o(t)?n["string"==typeof t?"string":"hash"]:n.map}var o=n(124);e.exports=i},function(e,t,n){function i(e,t){if(o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!r(e))||(a.test(e)||!s.test(e)||null!=t&&e in Object(t))}var o=n(4),r=n(16),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=i},function(e,t,n){var i=n(6),o=i(Object,"create");e.exports=o},function(e,t,n){function i(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}var o=n(16),r=1/0;e.exports=i},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}var i=9007199254740991;e.exports=n},function(e,t,n){function i(e){return"symbol"==typeof e||o(e)&&a.call(e)==r}var o=n(8),r="[object Symbol]",s=Object.prototype,a=s.toString;e.exports=i},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(132),r=n(133),s=n(134),a=n(135),c=n(136);i.prototype.clear=o,i.prototype["delete"]=r,i.prototype.get=s,i.prototype.has=a,i.prototype.set=c,e.exports=i},function(e,t,n){function i(e){var t=o(e)?c.call(e):"";return t==r||t==s}var o=n(7),r="[object Function]",s="[object GeneratorFunction]",a=Object.prototype,c=a.toString;e.exports=i},function(e,t){function n(){u&&l&&(u=!1,l.length?h=l.concat(h):f=-1,h.length&&i())}function i(){if(!u){var e=s(n);u=!0;for(var t=h.length;t;){for(l=h,h=[];++f<t;)l&&l[f].run();f=-1,t=h.length}l=null,u=!1,a(e)}}function o(e,t){this.fun=e,this.array=t}function r(){}var s,a,c=e.exports={};!function(){try{s=setTimeout}catch(e){s=function(){throw new Error("setTimeout is not defined")}}try{a=clearTimeout}catch(e){a=function(){throw new Error("clearTimeout is not defined")}}}();var l,h=[],u=!1,f=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new o(e,t)),1!==h.length||u||s(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=r,c.addListener=r,c.once=r,c.off=r,c.removeListener=r,c.removeAllListeners=r,c.emit=r,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(36),r=i(o);t["default"]={update:function(e){var t=this;e===!0&&(0,r["default"])(function(){t.el.tabIndex=0,t.el.focus()})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(68),r=i(o),s=n(69),a=i(s);t["default"]=[r["default"],a["default"]]},function(e,t,n){var i=n(6),o=n(3),r=i(o,"Map");e.exports=r},function(e,t,n){function i(e){this.__data__=new o(e)}var o=n(9),r=n(141),s=n(142),a=n(143),c=n(144),l=n(145);i.prototype.clear=r,i.prototype["delete"]=s,i.prototype.get=a,i.prototype.has=c,i.prototype.set=l,e.exports=i},function(e,t,n){var i=n(3),o=i.Symbol;e.exports=o},function(e,t,n){function i(e,t){t=r(t,e)?[t]:o(t);for(var n=0,i=t.length;null!=e&&n<i;)e=e[s(t[n++])];return n&&n==i?e:void 0}var o=n(29),r=n(12),s=n(14);e.exports=i},function(e,t,n){function i(e,t){return null!=e&&(s.call(e,t)||"object"==typeof e&&t in e&&null===o(e))}var o=n(114),r=Object.prototype,s=r.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t,n,a,c){return e===t||(null==e||null==t||!r(e)&&!s(t)?e!==e&&t!==t:o(e,t,i,n,a,c))}var o=n(98),r=n(7),s=n(8);e.exports=i},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function i(e){return o(e)?e:r(e)}var o=n(4),r=n(146);e.exports=i},function(e,t,n){function i(e,t,n,i,c,l){var h=c&a,u=e.length,f=t.length;if(u!=f&&!(h&&f>u))return!1;var p=l.get(e);if(p)return p==t;var d=-1,v=!0,_=c&s?new o:void 0;for(l.set(e,t);++d<u;){var y=e[d],b=t[d];if(i)var m=h?i(b,y,d,t,e,l):i(y,b,d,e,t,l);if(void 0!==m){if(m)continue;v=!1;break}if(_){if(!r(t,function(e,t){if(!_.has(t)&&(y===e||n(y,e,i,c,l)))return _.add(t)})){v=!1;break}}else if(y!==b&&!n(y,b,i,c,l)){v=!1;break}}return l["delete"](e),v}var o=n(90),r=n(94),s=1,a=2;e.exports=i},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}e.exports=n},function(e,t){function n(e,t){return t=null==t?i:t,!!t&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){function i(e){return e===e&&!o(e)}var o=n(7);e.exports=i},function(e,t){function n(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}e.exports=n},function(e,t){function n(e){if(null!=e){try{return i.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var i=Function.prototype.toString;e.exports=n},function(e,t,n){var i=n(95),o=n(158),r=o(function(e,t){return i(e,1,t)});e.exports=r},function(e,t,n){function i(e){return o(e)&&a.call(e,"callee")&&(!l.call(e,"callee")||c.call(e)==r)}var o=n(153),r="[object Arguments]",s=Object.prototype,a=s.hasOwnProperty,c=s.toString,l=s.propertyIsEnumerable;e.exports=i},function(e,t,n){function i(e){return null!=e&&s(o(e))&&!r(e)}var o=n(112),r=n(18),s=n(15);e.exports=i},function(e,t,n){function i(e){return"string"==typeof e||!o(e)&&r(e)&&c.call(e)==s}var o=n(4),r=n(8),s="[object String]",a=Object.prototype,c=a.toString;e.exports=i},function(e,t,n){function i(e){var t=l(e);if(!t&&!a(e))return r(e);var n=s(e),i=!!n,h=n||[],u=h.length;for(var f in e)!o(e,f)||i&&("length"==f||c(f,u))||t&&"constructor"==f||h.push(f);return h}var o=n(26),r=n(102),s=n(123),a=n(38),c=n(32),l=n(126);e.exports=i},function(e,t,n){function i(e){var t=o(e),n=t%1;return t===t?n?t-n:t:0}var o=n(159);e.exports=i},function(e,t,n){function i(e){if("number"==typeof e)return e;if(s(e))return a;if(r(e)){var t=o(e.valueOf)?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var n=h.test(e);return n||u.test(e)?f(e.slice(2),n?2:8):l.test(e)?a:+e}var o=n(18),r=n(7),s=n(16),a=NaN,c=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,u=/^0o[0-7]+$/i,f=parseInt;e.exports=i},function(e,t,n){(function(t,n){/*!
	 * Vue.js v1.0.26
	 * (c) 2016 Evan You
	 * Released under the MIT License.
	 */
"use strict";function i(e,t,n){if(r(e,t))return void(e[t]=n);if(e._isVue)return void i(e._data,t,n);var o=e.__ob__;if(!o)return void(e[t]=n);if(o.convert(t,n),o.dep.notify(),o.vms)for(var s=o.vms.length;s--;){var a=o.vms[s];a._proxy(t),a._digest()}return n}function o(e,t){if(r(e,t)){delete e[t];var n=e.__ob__;if(!n)return void(e._isVue&&(delete e._data[t],e._digest()));if(n.dep.notify(),n.vms)for(var i=n.vms.length;i--;){var o=n.vms[i];o._unproxy(t),o._digest()}}}function r(e,t){return Sn.call(e,t)}function s(e){return Vn.test(e)}function a(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function c(e){return null==e?"":e.toString()}function l(e){if("string"!=typeof e)return e;var t=Number(e);return isNaN(t)?e:t}function h(e){return"true"===e||"false"!==e&&e}function u(e){var t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t!==n||34!==t&&39!==t?e:e.slice(1,-1)}function f(e){return e.replace(Pn,p)}function p(e,t){return t?t.toUpperCase():""}function d(e){return e.replace(Rn,"$1-$2").toLowerCase()}function v(e){return e.replace(Fn,p)}function _(e,t){return function(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}}function y(e,t){t=t||0;for(var n=e.length-t,i=new Array(n);n--;)i[n]=e[n+t];return i}function b(e,t){for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}function m(e){return null!==e&&"object"==typeof e}function g(e){return Mn.call(e)===In}function E(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}function w(e,t){var n,i,o,r,s,a=function c(){var a=Date.now()-r;a<t&&a>=0?n=setTimeout(c,t-a):(n=null,s=e.apply(o,i),n||(o=i=null))};return function(){return o=this,i=arguments,r=Date.now(),n||(n=setTimeout(a,t)),s}}function x(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function k(e){var t=function n(){if(!n.cancelled)return e.apply(this,arguments)};return t.cancel=function(){t.cancelled=!0},t}function C(e,t){return e==t||!(!m(e)||!m(t))&&JSON.stringify(e)===JSON.stringify(t)}function $(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap=Object.create(null)}function N(){var e,t=ai.slice(pi,ui).trim();if(t){e={};var n=t.match(gi);e.name=n[0],n.length>1&&(e.args=n.slice(1).map(O))}e&&(ci.filters=ci.filters||[]).push(e),pi=ui+1}function O(e){if(Ei.test(e))return{value:l(e),dynamic:!1};var t=u(e),n=t===e;return{value:n?e:t,dynamic:n}}function A(e){var t=mi.get(e);if(t)return t;for(ai=e,di=vi=!1,_i=yi=bi=0,pi=0,ci={},ui=0,fi=ai.length;ui<fi;ui++)if(hi=li,li=ai.charCodeAt(ui),di)39===li&&92!==hi&&(di=!di);else if(vi)34===li&&92!==hi&&(vi=!vi);else if(124===li&&124!==ai.charCodeAt(ui+1)&&124!==ai.charCodeAt(ui-1))null==ci.expression?(pi=ui+1,ci.expression=ai.slice(0,ui).trim()):N();else switch(li){case 34:vi=!0;break;case 39:di=!0;break;case 40:bi++;break;case 41:bi--;break;case 91:yi++;break;case 93:yi--;break;case 123:_i++;break;case 125:_i--}return null==ci.expression?ci.expression=ai.slice(0,ui).trim():0!==pi&&N(),mi.put(e,ci),ci}function T(e){return e.replace(xi,"\\$&")}function j(){var e=T(ji.delimiters[0]),t=T(ji.delimiters[1]),n=T(ji.unsafeDelimiters[0]),i=T(ji.unsafeDelimiters[1]);Ci=new RegExp(n+"((?:.|\\n)+?)"+i+"|"+e+"((?:.|\\n)+?)"+t,"g"),$i=new RegExp("^"+n+"((?:.|\\n)+?)"+i+"$"),ki=new $(1e3)}function D(e){ki||j();var t=ki.get(e);if(t)return t;if(!Ci.test(e))return null;for(var n,i,o,r,s,a,c=[],l=Ci.lastIndex=0;n=Ci.exec(e);)i=n.index,i>l&&c.push({value:e.slice(l,i)}),o=$i.test(n[0]),r=o?n[1]:n[2],s=r.charCodeAt(0),a=42===s,r=a?r.slice(1):r,c.push({tag:!0,value:r.trim(),html:o,oneTime:a}),l=i+n[0].length;return l<e.length&&c.push({value:e.slice(l)}),ki.put(e,c),c}function S(e,t){return e.length>1?e.map(function(e){return V(e,t)}).join("+"):V(e[0],t,!0)}function V(e,t,n){return e.tag?e.oneTime&&t?'"'+t.$eval(e.value)+'"':P(e.value,n):'"'+e.value+'"'}function P(e,t){if(Ni.test(e)){var n=A(e);return n.filters?"this._applyFilters("+n.expression+",null,"+JSON.stringify(n.filters)+",false)":"("+e+")"}return t?e:"("+e+")"}function R(e,t,n,i){I(e,1,function(){t.appendChild(e)},n,i)}function F(e,t,n,i){I(e,1,function(){W(e,t)},n,i)}function M(e,t,n){I(e,-1,function(){J(e)},t,n)}function I(e,t,n,i,o){var r=e.__v_trans;if(!r||!r.hooks&&!Xn||!i._isCompiled||i.$parent&&!i.$parent._isCompiled)return n(),void(o&&o());var s=t>0?"enter":"leave";r[s](n,o)}function L(e){if("string"==typeof e){var t=e;e=document.querySelector(e),e||"production"!==n.env.NODE_ENV&&Di("Cannot find element: "+t)}return e}function H(e){if(!e)return!1;var t=e.ownerDocument.documentElement,n=e.parentNode;return t===e||t===n||!(!n||1!==n.nodeType||!t.contains(n))}function z(e,t){var n=e.getAttribute(t);return null!==n&&e.removeAttribute(t),n}function B(e,t){var n=z(e,":"+t);return null===n&&(n=z(e,"v-bind:"+t)),n}function U(e,t){return e.hasAttribute(t)||e.hasAttribute(":"+t)||e.hasAttribute("v-bind:"+t)}function W(e,t){t.parentNode.insertBefore(e,t)}function q(e,t){t.nextSibling?W(e,t.nextSibling):t.parentNode.appendChild(e)}function J(e){e.parentNode.removeChild(e)}function Q(e,t){t.firstChild?W(e,t.firstChild):t.appendChild(e)}function Y(e,t){var n=e.parentNode;n&&n.replaceChild(t,e)}function G(e,t,n,i){e.addEventListener(t,n,i)}function K(e,t,n){e.removeEventListener(t,n)}function Z(e){var t=e.className;return"object"==typeof t&&(t=t.baseVal||""),t}function X(e,t){qn&&!/svg$/.test(e.namespaceURI)?e.className=t:e.setAttribute("class",t)}function ee(e,t){if(e.classList)e.classList.add(t);else{var n=" "+Z(e)+" ";n.indexOf(" "+t+" ")<0&&X(e,(n+t).trim())}}function te(e,t){if(e.classList)e.classList.remove(t);else{for(var n=" "+Z(e)+" ",i=" "+t+" ";n.indexOf(i)>=0;)n=n.replace(i," ");X(e,n.trim())}e.className||e.removeAttribute("class")}function ne(e,t){var n,i;if(re(e)&&he(e.content)&&(e=e.content),e.hasChildNodes())for(ie(e),i=t?document.createDocumentFragment():document.createElement("div");n=e.firstChild;)i.appendChild(n);return i}function ie(e){for(var t;t=e.firstChild,oe(t);)e.removeChild(t);for(;t=e.lastChild,oe(t);)e.removeChild(t)}function oe(e){return e&&(3===e.nodeType&&!e.data.trim()||8===e.nodeType)}function re(e){return e.tagName&&"template"===e.tagName.toLowerCase()}function se(e,t){var n=ji.debug?document.createComment(e):document.createTextNode(t?" ":"");return n.__v_anchor=!0,n}function ae(e){if(e.hasAttributes())for(var t=e.attributes,n=0,i=t.length;n<i;n++){var o=t[n].name;if(Pi.test(o))return f(o.replace(Pi,""))}}function ce(e,t,n){for(var i;e!==t;)i=e.nextSibling,n(e),e=i;n(t)}function le(e,t,n,i,o){function r(){if(a++,s&&a>=c.length){for(var e=0;e<c.length;e++)i.appendChild(c[e]);o&&o()}}var s=!1,a=0,c=[];ce(e,t,function(e){e===t&&(s=!0),c.push(e),M(e,n,r)})}function he(e){return e&&11===e.nodeType}function ue(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function fe(e,t){var i=e.tagName.toLowerCase(),o=e.hasAttributes();if(Ri.test(i)||Fi.test(i)){if(o)return pe(e,t)}else{if(ge(t,"components",i))return{id:i};var r=o&&pe(e,t);if(r)return r;if("production"!==n.env.NODE_ENV){var s=t._componentNameMap&&t._componentNameMap[i];s?Di("Unknown custom element: <"+i+"> - did you mean <"+s+">? HTML is case-insensitive, remember to use kebab-case in templates."):Mi(e,i)&&Di("Unknown custom element: <"+i+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.')}}}function pe(e,t){var n=e.getAttribute("is");if(null!=n){if(ge(t,"components",n))return e.removeAttribute("is"),{id:n}}else if(n=B(e,"is"),null!=n)return{id:n,dynamic:!0}}function de(e,t){var n,o,s;for(n in t)o=e[n],s=t[n],r(e,n)?m(o)&&m(s)&&de(o,s):i(e,n,s);return e}function ve(e,t){var n=Object.create(e||null);return t?b(n,be(t)):n}function _e(e){if(e.components){var t,i=e.components=be(e.components),o=Object.keys(i);if("production"!==n.env.NODE_ENV)var r=e._componentNameMap={};for(var s=0,a=o.length;s<a;s++){var c=o[s];Ri.test(c)||Fi.test(c)?"production"!==n.env.NODE_ENV&&Di("Do not use built-in or reserved HTML elements as component id: "+c):("production"!==n.env.NODE_ENV&&(r[c.replace(/-/g,"").toLowerCase()]=d(c)),t=i[c],g(t)&&(i[c]=Nn.extend(t)))}}}function ye(e){var t,n,i=e.props;if(Ln(i))for(e.props={},t=i.length;t--;)n=i[t],"string"==typeof n?e.props[n]=null:n.name&&(e.props[n.name]=n);else if(g(i)){var o=Object.keys(i);for(t=o.length;t--;)n=i[o[t]],"function"==typeof n&&(i[o[t]]={type:n})}}function be(e){if(Ln(e)){for(var t,i={},o=e.length;o--;){t=e[o];var r="function"==typeof t?t.options&&t.options.name||t.id:t.name||t.id;r?i[r]=t:"production"!==n.env.NODE_ENV&&Di('Array-syntax assets must provide a "name" or "id" field.')}return i}return e}function me(e,t,i){function o(n){var o=Ii[n]||Li;a[n]=o(e[n],t[n],i,n)}_e(t),ye(t),"production"!==n.env.NODE_ENV&&t.propsData&&!i&&Di("propsData can only be used as an instantiation option.");var s,a={};if(t["extends"]&&(e="function"==typeof t["extends"]?me(e,t["extends"].options,i):me(e,t["extends"],i)),t.mixins)for(var c=0,l=t.mixins.length;c<l;c++){var h=t.mixins[c],u=h.prototype instanceof Nn?h.options:h;e=me(e,u,i)}for(s in e)o(s);for(s in t)r(e,s)||o(s);return a}function ge(e,t,i,o){if("string"==typeof i){var r,s=e[t],a=s[i]||s[r=f(i)]||s[r.charAt(0).toUpperCase()+r.slice(1)];return"production"!==n.env.NODE_ENV&&o&&!a&&Di("Failed to resolve "+t.slice(0,-1)+": "+i,e),a}}function Ee(){this.id=Hi++,this.subs=[]}function we(e){Wi=!1,e(),Wi=!0}function xe(e){if(this.value=e,this.dep=new Ee,E(e,"__ob__",this),Ln(e)){var t=Hn?ke:Ce;t(e,Bi,Ui),this.observeArray(e)}else this.walk(e)}function ke(e,t){e.__proto__=t}function Ce(e,t,n){for(var i=0,o=n.length;i<o;i++){var r=n[i];E(e,r,t[r])}}function $e(e,t){if(e&&"object"==typeof e){var n;return r(e,"__ob__")&&e.__ob__ instanceof xe?n=e.__ob__:Wi&&(Ln(e)||g(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new xe(e)),n&&t&&n.addVm(t),n}}function Ne(e,t,n){var i=new Ee,o=Object.getOwnPropertyDescriptor(e,t);if(!o||o.configurable!==!1){var r=o&&o.get,s=o&&o.set,a=$e(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=r?r.call(e):n;if(Ee.target&&(i.depend(),a&&a.dep.depend(),Ln(t)))for(var o,s=0,c=t.length;s<c;s++)o=t[s],o&&o.__ob__&&o.__ob__.dep.depend();return t},set:function(t){var o=r?r.call(e):n;t!==o&&(s?s.call(e,t):n=t,a=$e(t),i.notify())}})}}function Oe(e){e.prototype._init=function(e){e=e||{},this.$el=null,this.$parent=e.parent,this.$root=this.$parent?this.$parent.$root:this,this.$children=[],this.$refs={},this.$els={},this._watchers=[],this._directives=[],this._uid=Ji++,this._isVue=!0,this._events={},this._eventsCount={},this._isFragment=!1,this._fragment=this._fragmentStart=this._fragmentEnd=null,this._isCompiled=this._isDestroyed=this._isReady=this._isAttached=this._isBeingDestroyed=this._vForRemoving=!1,this._unlinkFn=null,this._context=e._context||this.$parent,this._scope=e._scope,this._frag=e._frag,this._frag&&this._frag.children.push(this),this.$parent&&this.$parent.$children.push(this),e=this.$options=me(this.constructor.options,e,this),this._updateRef(),this._data={},this._callHook("init"),this._initState(),this._initEvents(),this._callHook("created"),e.el&&this.$mount(e.el)}}function Ae(e){if(void 0===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:case 48:return e;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return t>=97&&t<=122||t>=65&&t<=90?"ident":t>=49&&t<=57?"number":"else"}function Te(e){var t=e.trim();return("0"!==e.charAt(0)||!isNaN(e))&&(s(t)?u(t):"*"+t)}function je(e){function t(){var t=e[h+1];if(u===oo&&"'"===t||u===ro&&'"'===t)return h++,i="\\"+t,p[Yi](),!0}var n,i,o,r,s,a,c,l=[],h=-1,u=Xi,f=0,p=[];for(p[Gi]=function(){void 0!==o&&(l.push(o),o=void 0)},p[Yi]=function(){void 0===o?o=i:o+=i},p[Ki]=function(){p[Yi](),f++},p[Zi]=function(){if(f>0)f--,u=io,p[Yi]();else{if(f=0,o=Te(o),o===!1)return!1;p[Gi]()}};null!=u;)if(h++,n=e[h],"\\"!==n||!t()){if(r=Ae(n),c=co[u],s=c[r]||c["else"]||ao,s===ao)return;if(u=s[0],a=p[s[1]],a&&(i=s[2],i=void 0===i?n:i,a()===!1))return;if(u===so)return l.raw=e,l}}function De(e){var t=Qi.get(e);return t||(t=je(e),t&&Qi.put(e,t)),t}function Se(e,t){return ze(t).get(e)}function Ve(e,t,o){var r=e;if("string"==typeof t&&(t=je(t)),!t||!m(e))return!1;for(var s,a,c=0,l=t.length;c<l;c++)s=e,a=t[c],"*"===a.charAt(0)&&(a=ze(a.slice(1)).get.call(r,r)),c<l-1?(e=e[a],m(e)||(e={},"production"!==n.env.NODE_ENV&&s._isVue&&lo(t,s),i(s,a,e))):Ln(e)?e.$set(a,o):a in e?e[a]=o:("production"!==n.env.NODE_ENV&&e._isVue&&lo(t,e),i(e,a,o));return!0}function Pe(){}function Re(e,t){var n=ko.length;return ko[n]=t?e.replace(bo,"\\n"):e,'"'+n+'"'}function Fe(e){var t=e.charAt(0),n=e.slice(1);return po.test(n)?e:(n=n.indexOf('"')>-1?n.replace(go,Me):n,t+"scope."+n)}function Me(e,t){return ko[t]}function Ie(e){_o.test(e)&&"production"!==n.env.NODE_ENV&&Di("Avoid using reserved keywords in expression: "+e),ko.length=0;var t=e.replace(mo,Re).replace(yo,"");return t=(" "+t).replace(wo,Fe).replace(go,Me),Le(t)}function Le(e){try{return new Function("scope","return "+e+";")}catch(t){return"production"!==n.env.NODE_ENV&&Di(t.toString().match(/unsafe-eval|CSP/)?"It seems you are using the default build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. Use the CSP-compliant build instead: http://vuejs.org/guide/installation.html#CSP-compliant-build":"Invalid expression. Generated function body: "+e),Pe}}function He(e){var t=De(e);return t?function(e,n){Ve(e,t,n)}:void("production"!==n.env.NODE_ENV&&Di("Invalid setter expression: "+e))}function ze(e,t){e=e.trim();var n=uo.get(e);if(n)return t&&!n.set&&(n.set=He(n.exp)),n;var i={exp:e};return i.get=Be(e)&&e.indexOf("[")<0?Le("scope."+e):Ie(e),t&&(i.set=He(e)),uo.put(e,i),i}function Be(e){return Eo.test(e)&&!xo.test(e)&&"Math."!==e.slice(0,5)}function Ue(){$o.length=0,No.length=0,Oo={},Ao={},To=!1}function We(){for(var e=!0;e;)e=!1,qe($o),qe(No),$o.length?e=!0:(Bn&&ji.devtools&&Bn.emit("flush"),Ue())}function qe(e){for(var t=0;t<e.length;t++){var i=e[t],o=i.id;if(Oo[o]=null,i.run(),"production"!==n.env.NODE_ENV&&null!=Oo[o]&&(Ao[o]=(Ao[o]||0)+1,Ao[o]>ji._maxUpdateCount)){Di('You may have an infinite update loop for watcher with expression "'+i.expression+'"',i.vm);break}}e.length=0}function Je(e){var t=e.id;if(null==Oo[t]){var n=e.user?No:$o;Oo[t]=n.length,n.push(e),To||(To=!0,oi(We))}}function Qe(e,t,n,i){i&&b(this,i);var o="function"==typeof t;if(this.vm=e,e._watchers.push(this),this.expression=t,this.cb=n,this.id=++jo,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ri,this.newDepIds=new ri,this.prevError=null,o)this.getter=t,this.setter=void 0;else{var r=ze(t,this.twoWay);this.getter=r.get,this.setter=r.set}this.value=this.lazy?void 0:this.get(),this.queued=this.shallow=!1}function Ye(e,t){var n=void 0,i=void 0;t||(t=Do,t.clear());var o=Ln(e),r=m(e);if((o||r)&&Object.isExtensible(e)){if(e.__ob__){var s=e.__ob__.dep.id;if(t.has(s))return;t.add(s)}if(o)for(n=e.length;n--;)Ye(e[n],t);else if(r)for(i=Object.keys(e),n=i.length;n--;)Ye(e[i[n]],t)}}function Ge(e){return re(e)&&he(e.content)}function Ke(e,t){var n=t?e:e.trim(),i=Vo.get(n);if(i)return i;var o=document.createDocumentFragment(),r=e.match(Fo),s=Mo.test(e),a=Io.test(e);if(r||s||a){var c=r&&r[1],l=Ro[c]||Ro.efault,h=l[0],u=l[1],f=l[2],p=document.createElement("div");for(p.innerHTML=u+e+f;h--;)p=p.lastChild;for(var d;d=p.firstChild;)o.appendChild(d)}else o.appendChild(document.createTextNode(e));return t||ie(o),Vo.put(n,o),o}function Ze(e){if(Ge(e))return Ke(e.innerHTML);if("SCRIPT"===e.tagName)return Ke(e.textContent);for(var t,n=Xe(e),i=document.createDocumentFragment();t=n.firstChild;)i.appendChild(t);return ie(i),i}function Xe(e){if(!e.querySelectorAll)return e.cloneNode();var t,n,i,o=e.cloneNode(!0);if(Lo){var r=o;if(Ge(e)&&(e=e.content,r=o.content),n=e.querySelectorAll("template"),n.length)for(i=r.querySelectorAll("template"),t=i.length;t--;)i[t].parentNode.replaceChild(Xe(n[t]),i[t])}if(Ho)if("TEXTAREA"===e.tagName)o.value=e.value;else if(n=e.querySelectorAll("textarea"),n.length)for(i=o.querySelectorAll("textarea"),t=i.length;t--;)i[t].value=n[t].value;return o}function et(e,t,n){var i,o;return he(e)?(ie(e),t?Xe(e):e):("string"==typeof e?n||"#"!==e.charAt(0)?o=Ke(e,n):(o=Po.get(e),o||(i=document.getElementById(e.slice(1)),i&&(o=Ze(i),Po.put(e,o)))):e.nodeType&&(o=Ze(e)),o&&t?Xe(o):o)}function tt(e,t,n,i,o,r){this.children=[],this.childFrags=[],this.vm=t,this.scope=o,this.inserted=!1,this.parentFrag=r,r&&r.childFrags.push(this),this.unlink=e(t,n,i,o,this);var s=this.single=1===n.childNodes.length&&!n.childNodes[0].__v_anchor;s?(this.node=n.childNodes[0],this.before=nt,this.remove=it):(this.node=se("fragment-start"),this.end=se("fragment-end"),this.frag=n,Q(this.node,n),n.appendChild(this.end),this.before=ot,this.remove=rt),this.node.__v_frag=this}function nt(e,t){this.inserted=!0;var n=t!==!1?F:W;n(this.node,e,this.vm),H(this.node)&&this.callHook(st)}function it(){this.inserted=!1;var e=H(this.node),t=this;this.beforeRemove(),M(this.node,this.vm,function(){e&&t.callHook(at),t.destroy()})}function ot(e,t){this.inserted=!0;var n=this.vm,i=t!==!1?F:W;ce(this.node,this.end,function(t){i(t,e,n)}),H(this.node)&&this.callHook(st)}function rt(){this.inserted=!1;var e=this,t=H(this.node);this.beforeRemove(),le(this.node,this.end,this.vm,this.frag,function(){t&&e.callHook(at),e.destroy()})}function st(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function at(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}function ct(e,t){this.vm=e;var n,i="string"==typeof t;i||re(t)&&!t.hasAttribute("v-if")?n=et(t,!0):(n=document.createDocumentFragment(),n.appendChild(t)),this.template=n;var o,r=e.constructor.cid;if(r>0){var s=r+(i?t:ue(t));o=Uo.get(s),o||(o=It(n,e.$options,!0),Uo.put(s,o))}else o=It(n,e.$options,!0);this.linker=o}function lt(e,t,n){var i=e.node.previousSibling;if(i){for(e=i.__v_frag;!(e&&e.forId===n&&e.inserted||i===t);){if(i=i.previousSibling,!i)return;e=i.__v_frag}return e}}function ht(e){var t=e.node;if(e.end)for(;!t.__vue__&&t!==e.end&&t.nextSibling;)t=t.nextSibling;return t.__vue__}function ut(e){for(var t=-1,n=new Array(Math.floor(e));++t<e;)n[t]=t;return n}function ft(e,t,n,i){return i?"$index"===i?e:i.charAt(0).match(/\w/)?Se(n,i):n[i]:t||n}function pt(e,t,n){for(var i,o,r,s=t?[]:null,a=0,c=e.options.length;a<c;a++)if(i=e.options[a],r=n?i.hasAttribute("selected"):i.selected){if(o=i.hasOwnProperty("_value")?i._value:i.value,!t)return o;s.push(o)}return s}function dt(e,t){for(var n=e.length;n--;)if(C(e[n],t))return n;return-1}function vt(e,t){var n=t.map(function(e){var t=e.charCodeAt(0);return t>47&&t<58?parseInt(e,10):1===e.length&&(t=e.toUpperCase().charCodeAt(0),t>64&&t<91)?t:ur[e]});return n=[].concat.apply([],n),function(t){if(n.indexOf(t.keyCode)>-1)return e.call(this,t)}}function _t(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function yt(e){return function(t){return t.preventDefault(),e.call(this,t)}}function bt(e){return function(t){if(t.target===t.currentTarget)return e.call(this,t)}}function mt(e){if(_r[e])return _r[e];var t=gt(e);return _r[e]=_r[t]=t,t}function gt(e){e=d(e);var t=f(e),n=t.charAt(0).toUpperCase()+t.slice(1);yr||(yr=document.createElement("div"));var i,o=pr.length;if("filter"!==t&&t in yr.style)return{kebab:e,camel:t};for(;o--;)if(i=dr[o]+n,i in yr.style)return{kebab:pr[o]+e,camel:i}}function Et(e){var t=[];if(Ln(e))for(var n=0,i=e.length;n<i;n++){var o=e[n];if(o)if("string"==typeof o)t.push(o);else for(var r in o)o[r]&&t.push(r)}else if(m(e))for(var s in e)e[s]&&t.push(s);return t}function wt(e,t,n){if(t=t.trim(),t.indexOf(" ")===-1)return void n(e,t);for(var i=t.split(/\s+/),o=0,r=i.length;o<r;o++)n(e,i[o])}function xt(e,t,n){function i(){++r>=o?n():e[r].call(t,i)}var o=e.length,r=0;e[0].call(t,i)}function kt(e,t,i){for(var o,r,a,c,l,h,u,p=[],v=Object.keys(t),_=v.length;_--;)if(r=v[_],o=t[r]||Sr,"production"===n.env.NODE_ENV||"$data"!==r)if(l=f(r),Vr.test(l)){if(u={name:r,path:l,options:o,mode:Dr.ONE_WAY,raw:null},a=d(r),null===(c=B(e,a))&&(null!==(c=B(e,a+".sync"))?u.mode=Dr.TWO_WAY:null!==(c=B(e,a+".once"))&&(u.mode=Dr.ONE_TIME)),null!==c)u.raw=c,h=A(c),c=h.expression,u.filters=h.filters,s(c)&&!h.filters?u.optimizedLiteral=!0:(u.dynamic=!0,"production"===n.env.NODE_ENV||u.mode!==Dr.TWO_WAY||Pr.test(c)||(u.mode=Dr.ONE_WAY,Di("Cannot bind two-way prop with non-settable parent path: "+c,i))),u.parentPath=c,"production"!==n.env.NODE_ENV&&o.twoWay&&u.mode!==Dr.TWO_WAY&&Di('Prop "'+r+'" expects a two-way binding type.',i);else if(null!==(c=z(e,a)))u.raw=c;else if("production"!==n.env.NODE_ENV){var y=l.toLowerCase();c=/[A-Z\-]/.test(r)&&(e.getAttribute(y)||e.getAttribute(":"+y)||e.getAttribute("v-bind:"+y)||e.getAttribute(":"+y+".once")||e.getAttribute("v-bind:"+y+".once")||e.getAttribute(":"+y+".sync")||e.getAttribute("v-bind:"+y+".sync")),c?Di("Possible usage error for prop `"+y+"` - did you mean `"+a+"`? HTML is case-insensitive, remember to use kebab-case for props in templates.",i):o.required&&Di("Missing required prop: "+r,i)}p.push(u)}else"production"!==n.env.NODE_ENV&&Di('Invalid prop key: "'+r+'". Prop keys must be valid identifiers.',i);else Di("Do not use $data as prop.",i);return Ct(p)}function Ct(e){return function(t,n){t._props={};for(var i,o,s,a,c,f=t.$options.propsData,p=e.length;p--;)if(i=e[p],c=i.raw,o=i.path,s=i.options,t._props[o]=i,f&&r(f,o)&&Nt(t,i,f[o]),null===c)Nt(t,i,void 0);else if(i.dynamic)i.mode===Dr.ONE_TIME?(a=(n||t._context||t).$get(i.parentPath),Nt(t,i,a)):t._context?t._bindDir({name:"prop",def:Fr,prop:i},null,null,n):Nt(t,i,t.$get(i.parentPath));else if(i.optimizedLiteral){var v=u(c);a=v===c?h(l(c)):v,Nt(t,i,a)}else a=s.type===Boolean&&(""===c||c===d(i.name))||c,Nt(t,i,a)}}function $t(e,t,n,i){var o=t.dynamic&&Be(t.parentPath),r=n;void 0===r&&(r=At(e,t)),r=jt(t,r,e);var s=r!==n;Tt(t,r,e)||(r=void 0),o&&!s?we(function(){i(r)}):i(r)}function Nt(e,t,n){$t(e,t,n,function(n){Ne(e,t.path,n)})}function Ot(e,t,n){$t(e,t,n,function(n){e[t.path]=n})}function At(e,t){var i=t.options;if(!r(i,"default"))return i.type!==Boolean&&void 0;var o=i["default"];return m(o)&&"production"!==n.env.NODE_ENV&&Di('Invalid default value for prop "'+t.name+'": Props with type Object/Array must use a factory function to return the default value.',e),"function"==typeof o&&i.type!==Function?o.call(e):o}function Tt(e,t,i){if(!e.options.required&&(null===e.raw||null==t))return!0;var o=e.options,r=o.type,s=!r,a=[];if(r){Ln(r)||(r=[r]);for(var c=0;c<r.length&&!s;c++){var l=Dt(t,r[c]);a.push(l.expectedType),s=l.valid}}if(!s)return"production"!==n.env.NODE_ENV&&Di('Invalid prop: type check failed for prop "'+e.name+'". Expected '+a.map(St).join(", ")+", got "+Vt(t)+".",i),!1;var h=o.validator;return!(h&&!h(t))||("production"!==n.env.NODE_ENV&&Di('Invalid prop: custom validator check failed for prop "'+e.name+'".',i),!1)}function jt(e,t,i){var o=e.options.coerce;return o?"function"==typeof o?o(t):("production"!==n.env.NODE_ENV&&Di('Invalid coerce for prop "'+e.name+'": expected function, got '+typeof o+".",i),t):t}function Dt(e,t){var n,i;return t===String?(i="string",n=typeof e===i):t===Number?(i="number",n=typeof e===i):t===Boolean?(i="boolean",n=typeof e===i):t===Function?(i="function",n=typeof e===i):t===Object?(i="object",n=g(e)):t===Array?(i="array",n=Ln(e)):n=e instanceof t,{valid:n,expectedType:i}}function St(e){return e?e.charAt(0).toUpperCase()+e.slice(1):"custom type"}function Vt(e){return Object.prototype.toString.call(e).slice(8,-1)}function Pt(e){Mr.push(e),Ir||(Ir=!0,oi(Rt))}function Rt(){for(var e=document.documentElement.offsetHeight,t=0;t<Mr.length;t++)Mr[t]();return Mr=[],Ir=!1,e}function Ft(e,t,i,o){this.id=t,this.el=e,this.enterClass=i&&i.enterClass||t+"-enter",this.leaveClass=i&&i.leaveClass||t+"-leave",this.hooks=i,this.vm=o,this.pendingCssEvent=this.pendingCssCb=this.cancel=this.pendingJsCb=this.op=this.cb=null,this.justEntered=!1,this.entered=this.left=!1,this.typeCache={},this.type=i&&i.type,"production"!==n.env.NODE_ENV&&this.type&&this.type!==Lr&&this.type!==Hr&&Di('invalid CSS transition type for transition="'+this.id+'": '+this.type,o);var r=this;["enterNextTick","enterDone","leaveNextTick","leaveDone"].forEach(function(e){r[e]=_(r[e],r)})}function Mt(e){if(/svg$/.test(e.namespaceURI)){var t=e.getBoundingClientRect();return!(t.width||t.height)}return!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function It(e,t,n){var i=n||!t._asComponent?qt(e,t):null,o=i&&i.terminal||hn(e)||!e.hasChildNodes()?null:Zt(e.childNodes,t);return function(e,t,n,r,s){var a=y(t.childNodes),c=Lt(function(){i&&i(e,t,n,r,s),o&&o(e,a,n,r,s)},e);return zt(e,c)}}function Lt(e,t){"production"===n.env.NODE_ENV&&(t._directives=[]);var i=t._directives.length;e();var o=t._directives.slice(i);o.sort(Ht);for(var r=0,s=o.length;r<s;r++)o[r]._bind();return o}function Ht(e,t){return e=e.descriptor.def.priority||es,t=t.descriptor.def.priority||es,e>t?-1:e===t?0:1}function zt(e,t,n,i){function o(o){Bt(e,t,o),n&&i&&Bt(n,i)}return o.dirs=t,o}function Bt(e,t,i){for(var o=t.length;o--;)t[o]._teardown(),"production"===n.env.NODE_ENV||i||e._directives.$remove(t[o])}function Ut(e,t,n,i){var o=kt(t,n,e),r=Lt(function(){o(e,i)},e);return zt(e,r)}function Wt(e,t,i){var o,r,s=t._containerAttrs,a=t._replacerAttrs;if(11!==e.nodeType)t._asComponent?(s&&i&&(o=sn(s,i)),a&&(r=sn(a,t))):r=sn(e.attributes,t);else if("production"!==n.env.NODE_ENV&&s){var c=s.filter(function(e){return e.name.indexOf("_v-")<0&&!Gr.test(e.name)&&"slot"!==e.name}).map(function(e){return'"'+e.name+'"'});if(c.length){var l=c.length>1;Di("Attribute"+(l?"s ":" ")+c.join(", ")+(l?" are":" is")+" ignored on component <"+t.el.tagName.toLowerCase()+"> because the component is a fragment instance: http://vuejs.org/guide/components.html#Fragment-Instance")}}return t._containerAttrs=t._replacerAttrs=null,function(e,t,n){var i,s=e._context;s&&o&&(i=Lt(function(){o(s,t,null,n)},s));var a=Lt(function(){r&&r(e,t)},e);return zt(e,a,s,i)}}function qt(e,t){var n=e.nodeType;return 1!==n||hn(e)?3===n&&e.data.trim()?Qt(e,t):null:Jt(e,t)}function Jt(e,t){if("TEXTAREA"===e.tagName){var n=D(e.value);n&&(e.setAttribute(":value",S(n)),e.value="")}var i,o=e.hasAttributes(),r=o&&y(e.attributes);return o&&(i=nn(e,r,t)),i||(i=en(e,t)),i||(i=tn(e,t)),!i&&o&&(i=sn(r,t)),i}function Qt(e,t){if(e._skip)return Yt;var n=D(e.wholeText);if(!n)return null;for(var i=e.nextSibling;i&&3===i.nodeType;)i._skip=!0,i=i.nextSibling;for(var o,r,s=document.createDocumentFragment(),a=0,c=n.length;a<c;a++)r=n[a],o=r.tag?Gt(r,t):document.createTextNode(r.value),s.appendChild(o);return Kt(n,s,t)}function Yt(e,t){J(t)}function Gt(e,t){function n(t){if(!e.descriptor){var n=A(e.value);e.descriptor={name:t,def:Ar[t],expression:n.expression,filters:n.filters}}}var i;return e.oneTime?i=document.createTextNode(e.value):e.html?(i=document.createComment("v-html"),n("html")):(i=document.createTextNode(" "),n("text")),i}function Kt(e,t){return function(n,i,o,r){for(var s,a,l,h=t.cloneNode(!0),u=y(h.childNodes),f=0,p=e.length;f<p;f++)s=e[f],a=s.value,s.tag&&(l=u[f],s.oneTime?(a=(r||n).$eval(a),s.html?Y(l,et(a,!0)):l.data=c(a)):n._bindDir(s.descriptor,l,o,r));Y(i,h)}}function Zt(e,t){for(var n,i,o,r=[],s=0,a=e.length;s<a;s++)o=e[s],n=qt(o,t),i=n&&n.terminal||"SCRIPT"===o.tagName||!o.hasChildNodes()?null:Zt(o.childNodes,t),r.push(n,i);return r.length?Xt(r):null}function Xt(e){return function(t,n,i,o,r){for(var s,a,c,l=0,h=0,u=e.length;l<u;h++){s=n[h],a=e[l++],c=e[l++];var f=y(s.childNodes);a&&a(t,s,i,o,r),c&&c(t,f,i,o,r)}}}function en(e,t){var n=e.tagName.toLowerCase();if(!Ri.test(n)){var i=ge(t,"elementDirectives",n);return i?rn(e,n,"",t,i):void 0}}function tn(e,t){var n=fe(e,t);if(n){var i=ae(e),o={name:"component",ref:i,expression:n.id,def:Qr.component,modifiers:{literal:!n.dynamic}},r=function(e,t,n,r,s){i&&Ne((r||e).$refs,i,null),e._bindDir(o,t,n,r,s)};return r.terminal=!0,r}}function nn(e,t,n){if(null!==z(e,"v-pre"))return on;if(e.hasAttribute("v-else")){var i=e.previousElementSibling;if(i&&i.hasAttribute("v-if"))return on}for(var o,r,s,a,c,l,h,u,f,p,d=0,v=t.length;d<v;d++)o=t[d],r=o.name.replace(Zr,""),(c=r.match(Kr))&&(f=ge(n,"directives",c[1]),f&&f.terminal&&(!p||(f.priority||ts)>p.priority)&&(p=f,h=o.name,a=an(o.name),s=o.value,l=c[1],u=c[2]));return p?rn(e,l,s,n,p,h,u,a):void 0}function on(){}function rn(e,t,n,i,o,r,s,a){var c=A(n),l={name:t,arg:s,expression:c.expression,filters:c.filters,raw:n,attr:r,modifiers:a,def:o};"for"!==t&&"router-view"!==t||(l.ref=ae(e));var h=function(e,t,n,i,o){l.ref&&Ne((i||e).$refs,l.ref,null),e._bindDir(l,t,n,i,o)};return h.terminal=!0,h}function sn(e,t){function i(e,t,n){var i=n&&ln(n),o=!i&&A(s);_.push({name:e,attr:a,raw:c,def:t,arg:h,modifiers:u,expression:o&&o.expression,filters:o&&o.filters,interp:n,hasOneTime:i})}for(var o,r,s,a,c,l,h,u,f,p,d,v=e.length,_=[];v--;)if(o=e[v],r=a=o.name,s=c=o.value,p=D(s),h=null,u=an(r),r=r.replace(Zr,""),p)s=S(p),h=r,i("bind",Ar.bind,p),"production"!==n.env.NODE_ENV&&"class"===r&&Array.prototype.some.call(e,function(e){return":class"===e.name||"v-bind:class"===e.name})&&Di('class="'+c+'": Do not mix mustache interpolation and v-bind for "class" on the same element. Use one or the other.',t);else if(Xr.test(r))u.literal=!Yr.test(r),i("transition",Qr.transition);else if(Gr.test(r))h=r.replace(Gr,""),i("on",Ar.on);else if(Yr.test(r))l=r.replace(Yr,""),"style"===l||"class"===l?i(l,Qr[l]):(h=l,i("bind",Ar.bind));else if(d=r.match(Kr)){if(l=d[1],h=d[2],"else"===l)continue;f=ge(t,"directives",l,!0),f&&i(l,f)}if(_.length)return cn(_)}function an(e){var t=Object.create(null),n=e.match(Zr);if(n)for(var i=n.length;i--;)t[n[i].slice(1)]=!0;return t}function cn(e){return function(t,n,i,o,r){for(var s=e.length;s--;)t._bindDir(e[s],n,i,o,r)}}function ln(e){for(var t=e.length;t--;)if(e[t].oneTime)return!0}function hn(e){return"SCRIPT"===e.tagName&&(!e.hasAttribute("type")||"text/javascript"===e.getAttribute("type"))}function un(e,t){return t&&(t._containerAttrs=pn(e)),re(e)&&(e=et(e)),t&&(t._asComponent&&!t.template&&(t.template="<slot></slot>"),t.template&&(t._content=ne(e),e=fn(e,t))),he(e)&&(Q(se("v-start",!0),e),e.appendChild(se("v-end",!0))),e}function fn(e,t){var i=t.template,o=et(i,!0);if(o){var r=o.firstChild,s=r.tagName&&r.tagName.toLowerCase();return t.replace?(e===document.body&&"production"!==n.env.NODE_ENV&&Di("You are mounting an instance with a template to <body>. This will replace <body> entirely. You should probably use `replace: false` here."),o.childNodes.length>1||1!==r.nodeType||"component"===s||ge(t,"components",s)||U(r,"is")||ge(t,"elementDirectives",s)||r.hasAttribute("v-for")||r.hasAttribute("v-if")?o:(t._replacerAttrs=pn(r),dn(e,r),r)):(e.appendChild(o),e)}"production"!==n.env.NODE_ENV&&Di("Invalid template option: "+i)}function pn(e){if(1===e.nodeType&&e.hasAttributes())return y(e.attributes)}function dn(e,t){for(var n,i,o=e.attributes,r=o.length;r--;)n=o[r].name,i=o[r].value,t.hasAttribute(n)||ns.test(n)?"class"===n&&!D(i)&&(i=i.trim())&&i.split(/\s+/).forEach(function(e){ee(t,e)}):t.setAttribute(n,i)}function vn(e,t){if(t){for(var i,o,r=e._slotContents=Object.create(null),s=0,a=t.children.length;s<a;s++)i=t.children[s],(o=i.getAttribute("slot"))&&(r[o]||(r[o]=[])).push(i),"production"!==n.env.NODE_ENV&&B(i,"slot")&&Di('The "slot" attribute must be static.',e.$parent);for(o in r)r[o]=_n(r[o],t);if(t.hasChildNodes()){var c=t.childNodes;if(1===c.length&&3===c[0].nodeType&&!c[0].data.trim())return;r["default"]=_n(t.childNodes,t)}}}function _n(e,t){var n=document.createDocumentFragment();e=y(e);for(var i=0,o=e.length;i<o;i++){var r=e[i];!re(r)||r.hasAttribute("v-if")||r.hasAttribute("v-for")||(t.removeChild(r),r=et(r,!0)),n.appendChild(r)}return n}function yn(e){function t(){}function i(e,t){var n=new Qe(t,e,null,{lazy:!0});return function(){return n.dirty&&n.evaluate(),
Ee.target&&n.depend(),n.value}}Object.defineProperty(e.prototype,"$data",{get:function(){return this._data},set:function(e){e!==this._data&&this._setData(e)}}),e.prototype._initState=function(){this._initProps(),this._initMeta(),this._initMethods(),this._initData(),this._initComputed()},e.prototype._initProps=function(){var e=this.$options,t=e.el,i=e.props;i&&!t&&"production"!==n.env.NODE_ENV&&Di("Props will not be compiled if no `el` option is provided at instantiation.",this),t=e.el=L(t),this._propsUnlinkFn=t&&1===t.nodeType&&i?Ut(this,t,i,this._scope):null},e.prototype._initData=function(){var e=this.$options.data,t=this._data=e?e():{};g(t)||(t={},"production"!==n.env.NODE_ENV&&Di("data functions should return an object.",this));var i,o,s=this._props,a=Object.keys(t);for(i=a.length;i--;)o=a[i],s&&r(s,o)?"production"!==n.env.NODE_ENV&&Di('Data field "'+o+'" is already defined as a prop. To provide default value for a prop, use the "default" prop option; if you want to pass prop values to an instantiation call, use the "propsData" option.',this):this._proxy(o);$e(t,this)},e.prototype._setData=function(e){e=e||{};var t=this._data;this._data=e;var n,i,o;for(n=Object.keys(t),o=n.length;o--;)i=n[o],i in e||this._unproxy(i);for(n=Object.keys(e),o=n.length;o--;)i=n[o],r(this,i)||this._proxy(i);t.__ob__.removeVm(this),$e(e,this),this._digest()},e.prototype._proxy=function(e){if(!a(e)){var t=this;Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return t._data[e]},set:function(n){t._data[e]=n}})}},e.prototype._unproxy=function(e){a(e)||delete this[e]},e.prototype._digest=function(){for(var e=0,t=this._watchers.length;e<t;e++)this._watchers[e].update(!0)},e.prototype._initComputed=function(){var e=this.$options.computed;if(e)for(var n in e){var o=e[n],r={enumerable:!0,configurable:!0};"function"==typeof o?(r.get=i(o,this),r.set=t):(r.get=o.get?o.cache!==!1?i(o.get,this):_(o.get,this):t,r.set=o.set?_(o.set,this):t),Object.defineProperty(this,n,r)}},e.prototype._initMethods=function(){var e=this.$options.methods;if(e)for(var t in e)this[t]=_(e[t],this)},e.prototype._initMeta=function(){var e=this.$options._meta;if(e)for(var t in e)Ne(this,t,e[t])}}function bn(e){function t(e,t){for(var n,i,o,r=t.attributes,s=0,a=r.length;s<a;s++)n=r[s].name,os.test(n)&&(n=n.replace(os,""),i=r[s].value,Be(i)&&(i+=".apply(this, $arguments)"),o=(e._scope||e._context).$eval(i,!0),o._fromParent=!0,e.$on(n.replace(os),o))}function i(e,t,n){if(n){var i,r,s,a;for(r in n)if(i=n[r],Ln(i))for(s=0,a=i.length;s<a;s++)o(e,t,r,i[s]);else o(e,t,r,i)}}function o(e,t,i,r,s){var a=typeof r;if("function"===a)e[t](i,r,s);else if("string"===a){var c=e.$options.methods,l=c&&c[r];l?e[t](i,l,s):"production"!==n.env.NODE_ENV&&Di('Unknown method: "'+r+'" when registering callback for '+t+': "'+i+'".',e)}else r&&"object"===a&&o(e,t,i,r.handler,r)}function r(){this._isAttached||(this._isAttached=!0,this.$children.forEach(s))}function s(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function a(){this._isAttached&&(this._isAttached=!1,this.$children.forEach(c))}function c(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}e.prototype._initEvents=function(){var e=this.$options;e._asComponent&&t(this,e.el),i(this,"$on",e.events),i(this,"$watch",e.watch)},e.prototype._initDOMHooks=function(){this.$on("hook:attached",r),this.$on("hook:detached",a)},e.prototype._callHook=function(e){this.$emit("pre-hook:"+e);var t=this.$options[e];if(t)for(var n=0,i=t.length;n<i;n++)t[n].call(this);this.$emit("hook:"+e)}}function mn(){}function gn(e,t,i,o,r,s){this.vm=t,this.el=i,this.descriptor=e,this.name=e.name,this.expression=e.expression,this.arg=e.arg,this.modifiers=e.modifiers,this.filters=e.filters,this.literal=this.modifiers&&this.modifiers.literal,this._locked=!1,this._bound=!1,this._listeners=null,this._host=o,this._scope=r,this._frag=s,"production"!==n.env.NODE_ENV&&this.el&&(this.el._vue_directives=this.el._vue_directives||[],this.el._vue_directives.push(this))}function En(e){e.prototype._updateRef=function(e){var t=this.$options._ref;if(t){var n=(this._scope||this._context).$refs;e?n[t]===this&&(n[t]=null):n[t]=this}},e.prototype._compile=function(e){var t=this.$options,n=e;if(e=un(e,t),this._initElement(e),1!==e.nodeType||null===z(e,"v-pre")){var i=this._context&&this._context.$options,o=Wt(e,t,i);vn(this,t._content);var r,s=this.constructor;t._linkerCachable&&(r=s.linker,r||(r=s.linker=It(e,t)));var a=o(this,e,this._scope),c=r?r(this,e):It(e,t)(this,e);this._unlinkFn=function(){a(),c(!0)},t.replace&&Y(n,e),this._isCompiled=!0,this._callHook("compiled")}},e.prototype._initElement=function(e){he(e)?(this._isFragment=!0,this.$el=this._fragmentStart=e.firstChild,this._fragmentEnd=e.lastChild,3===this._fragmentStart.nodeType&&(this._fragmentStart.data=this._fragmentEnd.data=""),this._fragment=e):this.$el=e,this.$el.__vue__=this,this._callHook("beforeCompile")},e.prototype._bindDir=function(e,t,n,i,o){this._directives.push(new gn(e,this,t,n,i,o))},e.prototype._destroy=function(e,t){if(this._isBeingDestroyed)return void(t||this._cleanup());var n,i,o=this,r=function(){!n||i||t||o._cleanup()};e&&this.$el&&(i=!0,this.$remove(function(){i=!1,r()})),this._callHook("beforeDestroy"),this._isBeingDestroyed=!0;var s,a=this.$parent;for(a&&!a._isBeingDestroyed&&(a.$children.$remove(this),this._updateRef(!0)),s=this.$children.length;s--;)this.$children[s].$destroy();for(this._propsUnlinkFn&&this._propsUnlinkFn(),this._unlinkFn&&this._unlinkFn(),s=this._watchers.length;s--;)this._watchers[s].teardown();this.$el&&(this.$el.__vue__=null),n=!0,r()},e.prototype._cleanup=function(){this._isDestroyed||(this._frag&&this._frag.children.$remove(this),this._data&&this._data.__ob__&&this._data.__ob__.removeVm(this),this.$el=this.$parent=this.$root=this.$children=this._watchers=this._context=this._scope=this._directives=null,this._isDestroyed=!0,this._callHook("destroyed"),this.$off())}}function wn(e){e.prototype._applyFilters=function(e,t,n,i){var o,r,s,a,c,l,h,u,f;for(l=0,h=n.length;l<h;l++)if(o=n[i?h-l-1:l],r=ge(this.$options,"filters",o.name,!0),r&&(r=i?r.write:r.read||r,"function"==typeof r)){if(s=i?[e,t]:[e],c=i?2:1,o.args)for(u=0,f=o.args.length;u<f;u++)a=o.args[u],s[u+c]=a.dynamic?this.$get(a.value):a.value;e=r.apply(this,s)}return e},e.prototype._resolveComponent=function(t,i){var o;if(o="function"==typeof t?t:ge(this.$options,"components",t,!0))if(o.options)i(o);else if(o.resolved)i(o.resolved);else if(o.requested)o.pendingCallbacks.push(i);else{o.requested=!0;var r=o.pendingCallbacks=[i];o.call(this,function(t){g(t)&&(t=e.extend(t)),o.resolved=t;for(var n=0,i=r.length;n<i;n++)r[n](t)},function(e){"production"!==n.env.NODE_ENV&&Di("Failed to resolve async component"+("string"==typeof t?": "+t:"")+". "+(e?"\nReason: "+e:""))})}}}function xn(e){function t(e){return JSON.parse(JSON.stringify(e))}e.prototype.$get=function(e,t){var n=ze(e);if(n){if(t){var i=this;return function(){i.$arguments=y(arguments);var e=n.get.call(i,i);return i.$arguments=null,e}}try{return n.get.call(this,this)}catch(o){}}},e.prototype.$set=function(e,t){var n=ze(e,!0);n&&n.set&&n.set.call(this,this,t)},e.prototype.$delete=function(e){o(this._data,e)},e.prototype.$watch=function(e,t,n){var i,o=this;"string"==typeof e&&(i=A(e),e=i.expression);var r=new Qe(o,e,t,{deep:n&&n.deep,sync:n&&n.sync,filters:i&&i.filters,user:!n||n.user!==!1});return n&&n.immediate&&t.call(o,r.value),function(){r.teardown()}},e.prototype.$eval=function(e,t){if(rs.test(e)){var n=A(e),i=this.$get(n.expression,t);return n.filters?this._applyFilters(i,null,n.filters):i}return this.$get(e,t)},e.prototype.$interpolate=function(e){var t=D(e),n=this;return t?1===t.length?n.$eval(t[0].value)+"":t.map(function(e){return e.tag?n.$eval(e.value):e.value}).join(""):e},e.prototype.$log=function(e){var n=e?Se(this._data,e):this._data;if(n&&(n=t(n)),!e){var i;for(i in this.$options.computed)n[i]=t(this[i]);if(this._props)for(i in this._props)n[i]=t(this[i])}console.log(n)}}function kn(e){function t(e,t,i,o,r,s){t=n(t);var a=!H(t),c=o===!1||a?r:s,l=!a&&!e._isAttached&&!H(e.$el);return e._isFragment?(ce(e._fragmentStart,e._fragmentEnd,function(n){c(n,t,e)}),i&&i()):c(e.$el,t,e,i),l&&e._callHook("attached"),e}function n(e){return"string"==typeof e?document.querySelector(e):e}function i(e,t,n,i){t.appendChild(e),i&&i()}function o(e,t,n,i){W(e,t),i&&i()}function r(e,t,n){J(e),n&&n()}e.prototype.$nextTick=function(e){oi(e,this)},e.prototype.$appendTo=function(e,n,o){return t(this,e,n,o,i,R)},e.prototype.$prependTo=function(e,t,i){return e=n(e),e.hasChildNodes()?this.$before(e.firstChild,t,i):this.$appendTo(e,t,i),this},e.prototype.$before=function(e,n,i){return t(this,e,n,i,o,F)},e.prototype.$after=function(e,t,i){return e=n(e),e.nextSibling?this.$before(e.nextSibling,t,i):this.$appendTo(e.parentNode,t,i),this},e.prototype.$remove=function(e,t){if(!this.$el.parentNode)return e&&e();var n=this._isAttached&&H(this.$el);n||(t=!1);var i=this,o=function(){n&&i._callHook("detached"),e&&e()};if(this._isFragment)le(this._fragmentStart,this._fragmentEnd,this,this._fragment,o);else{var s=t===!1?r:M;s(this.$el,this,o)}return this}}function Cn(e){function t(e,t,i){var o=e.$parent;if(o&&i&&!n.test(t))for(;o;)o._eventsCount[t]=(o._eventsCount[t]||0)+i,o=o.$parent}e.prototype.$on=function(e,n){return(this._events[e]||(this._events[e]=[])).push(n),t(this,e,1),this},e.prototype.$once=function(e,t){function n(){i.$off(e,n),t.apply(this,arguments)}var i=this;return n.fn=t,this.$on(e,n),this},e.prototype.$off=function(e,n){var i;if(!arguments.length){if(this.$parent)for(e in this._events)i=this._events[e],i&&t(this,e,-i.length);return this._events={},this}if(i=this._events[e],!i)return this;if(1===arguments.length)return t(this,e,-i.length),this._events[e]=null,this;for(var o,r=i.length;r--;)if(o=i[r],o===n||o.fn===n){t(this,e,-1),i.splice(r,1);break}return this},e.prototype.$emit=function(e){var t="string"==typeof e;e=t?e:e.name;var n=this._events[e],i=t||!n;if(n){n=n.length>1?y(n):n;var o=t&&n.some(function(e){return e._fromParent});o&&(i=!1);for(var r=y(arguments,1),s=0,a=n.length;s<a;s++){var c=n[s],l=c.apply(this,r);l!==!0||o&&!c._fromParent||(i=!0)}}return i},e.prototype.$broadcast=function(e){var t="string"==typeof e;if(e=t?e:e.name,this._eventsCount[e]){var n=this.$children,i=y(arguments);t&&(i[0]={name:e,source:this});for(var o=0,r=n.length;o<r;o++){var s=n[o],a=s.$emit.apply(s,i);a&&s.$broadcast.apply(s,i)}return this}},e.prototype.$dispatch=function(e){var t=this.$emit.apply(this,arguments);if(t){var n=this.$parent,i=y(arguments);for(i[0]={name:e,source:this};n;)t=n.$emit.apply(n,i),n=t?n.$parent:null;return this}};var n=/^hook:/}function $n(e){function t(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")}e.prototype.$mount=function(e){return this._isCompiled?void("production"!==n.env.NODE_ENV&&Di("$mount() should be called only once.",this)):(e=L(e),e||(e=document.createElement("div")),this._compile(e),this._initDOMHooks(),H(this.$el)?(this._callHook("attached"),t.call(this)):this.$once("hook:attached",t),this)},e.prototype.$destroy=function(e,t){this._destroy(e,t)},e.prototype.$compile=function(e,t,n,i){return It(e,this.$options,!0)(this,e,t,n,i)}}function Nn(e){this._init(e)}function On(e,t,n){return n=n?parseInt(n,10):0,t=l(t),"number"==typeof t?e.slice(n,n+t):e}function An(e,t,n){if(e=ls(e),null==t)return e;if("function"==typeof t)return e.filter(t);t=(""+t).toLowerCase();for(var i,o,r,s,a="in"===n?3:2,c=Array.prototype.concat.apply([],y(arguments,a)),l=[],h=0,u=e.length;h<u;h++)if(i=e[h],r=i&&i.$value||i,s=c.length){for(;s--;)if(o=c[s],"$key"===o&&jn(i.$key,t)||jn(Se(r,o),t)){l.push(i);break}}else jn(i,t)&&l.push(i);return l}function Tn(e){function t(e,t,n){var o=i[n];return o&&("$key"!==o&&(m(e)&&"$value"in e&&(e=e.$value),m(t)&&"$value"in t&&(t=t.$value)),e=m(e)?Se(e,o):e,t=m(t)?Se(t,o):t),e===t?0:e>t?r:-r}var n=null,i=void 0;e=ls(e);var o=y(arguments,1),r=o[o.length-1];"number"==typeof r?(r=r<0?-1:1,o=o.length>1?o.slice(0,-1):o):r=1;var s=o[0];return s?("function"==typeof s?n=function(e,t){return s(e,t)*r}:(i=Array.prototype.concat.apply([],o),n=function(e,o,r){return r=r||0,r>=i.length-1?t(e,o,r):t(e,o,r)||n(e,o,r+1)}),e.slice().sort(n)):e}function jn(e,t){var n;if(g(e)){var i=Object.keys(e);for(n=i.length;n--;)if(jn(e[i[n]],t))return!0}else if(Ln(e)){for(n=e.length;n--;)if(jn(e[n],t))return!0}else if(null!=e)return e.toString().toLowerCase().indexOf(t)>-1}function Dn(e){function t(e){return new Function("return function "+v(e)+" (options) { this._init(options) }")()}e.options={directives:Ar,elementDirectives:cs,filters:us,transitions:{},components:{},partials:{},replace:!0},e.util=qi,e.config=ji,e.set=i,e["delete"]=o,e.nextTick=oi,e.compiler=is,e.FragmentFactory=ct,e.internalDirectives=Qr,e.parsers={path:ho,text:Oi,template:zo,directive:wi,expression:Co},e.cid=0;var r=1;e.extend=function(e){e=e||{};var i=this,o=0===i.cid;if(o&&e._Ctor)return e._Ctor;var s=e.name||i.options.name;"production"!==n.env.NODE_ENV&&(/^[a-zA-Z][\w-]*$/.test(s)||(Di('Invalid component name: "'+s+'". Component names can only contain alphanumeric characaters and the hyphen.'),s=null));var a=t(s||"VueComponent");return a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.cid=r++,a.options=me(i.options,e),a["super"]=i,a.extend=i.extend,ji._assetTypes.forEach(function(e){a[e]=i[e]}),s&&(a.options.components[s]=a),o&&(e._Ctor=a),a},e.use=function(e){if(!e.installed){var t=y(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):e.apply(null,t),e.installed=!0,this}},e.mixin=function(t){e.options=me(e.options,t)},ji._assetTypes.forEach(function(t){e[t]=function(i,o){return o?("production"!==n.env.NODE_ENV&&"component"===t&&(Ri.test(i)||Fi.test(i))&&Di("Do not use built-in or reserved HTML elements as component id: "+i),"component"===t&&g(o)&&(o.name||(o.name=i),o=e.extend(o)),this.options[t+"s"][i]=o,o):this.options[t+"s"][i]}}),b(e.transition,Vi)}var Sn=Object.prototype.hasOwnProperty,Vn=/^\s?(true|false|-?[\d\.]+|'[^']*'|"[^"]*")\s?$/,Pn=/-(\w)/g,Rn=/([a-z\d])([A-Z])/g,Fn=/(?:^|[-_\/])(\w)/g,Mn=Object.prototype.toString,In="[object Object]",Ln=Array.isArray,Hn="__proto__"in{},zn="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),Bn=zn&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,Un=zn&&window.navigator.userAgent.toLowerCase(),Wn=Un&&Un.indexOf("trident")>0,qn=Un&&Un.indexOf("msie 9.0")>0,Jn=Un&&Un.indexOf("android")>0,Qn=Un&&/(iphone|ipad|ipod|ios)/i.test(Un),Yn=Qn&&Un.match(/os ([\d_]+)/),Gn=Yn&&Yn[1].split("_"),Kn=Gn&&Number(Gn[0])>=9&&Number(Gn[1])>=3&&!window.indexedDB,Zn=void 0,Xn=void 0,ei=void 0,ti=void 0;if(zn&&!qn){var ni=void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend,ii=void 0===window.onanimationend&&void 0!==window.onwebkitanimationend;Zn=ni?"WebkitTransition":"transition",Xn=ni?"webkitTransitionEnd":"transitionend",ei=ii?"WebkitAnimation":"animation",ti=ii?"webkitAnimationEnd":"animationend"}var oi=function(){function e(){o=!1;var e=i.slice(0);i=[];for(var t=0;t<e.length;t++)e[t]()}var n,i=[],o=!1;if("undefined"==typeof MutationObserver||Kn){var r=zn?window:"undefined"!=typeof t?t:{};n=r.setImmediate||setTimeout}else{var s=1,a=new MutationObserver(e),c=document.createTextNode(s);a.observe(c,{characterData:!0}),n=function(){s=(s+1)%2,c.data=s}}return function(t,r){var s=r?function(){t.call(r)}:t;i.push(s),o||(o=!0,n(e,0))}}(),ri=void 0;"undefined"!=typeof Set&&Set.toString().match(/native code/)?ri=Set:(ri=function(){this.set=Object.create(null)},ri.prototype.has=function(e){return void 0!==this.set[e]},ri.prototype.add=function(e){this.set[e]=1},ri.prototype.clear=function(){this.set=Object.create(null)});var si=$.prototype;si.put=function(e,t){var n,i=this.get(e,!0);return i||(this.size===this.limit&&(n=this.shift()),i={key:e},this._keymap[e]=i,this.tail?(this.tail.newer=i,i.older=this.tail):this.head=i,this.tail=i,this.size++),i.value=t,n},si.shift=function(){var e=this.head;return e&&(this.head=this.head.newer,this.head.older=void 0,e.newer=e.older=void 0,this._keymap[e.key]=void 0,this.size--),e},si.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return n===this.tail?t?n:n.value:(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n,t?n:n.value)};var ai,ci,li,hi,ui,fi,pi,di,vi,_i,yi,bi,mi=new $(1e3),gi=/[^\s'"]+|'[^']*'|"[^"]*"/g,Ei=/^in$|^-?\d+/,wi=Object.freeze({parseDirective:A}),xi=/[-.*+?^${}()|[\]\/\\]/g,ki=void 0,Ci=void 0,$i=void 0,Ni=/[^|]\|[^|]/,Oi=Object.freeze({compileRegex:j,parseText:D,tokensToExp:S}),Ai=["{{","}}"],Ti=["{{{","}}}"],ji=Object.defineProperties({debug:!1,silent:!1,async:!0,warnExpressionErrors:!0,devtools:"production"!==n.env.NODE_ENV,_delimitersChanged:!0,_assetTypes:["component","directive","elementDirective","filter","transition","partial"],_propBindingModes:{ONE_WAY:0,TWO_WAY:1,ONE_TIME:2},_maxUpdateCount:100},{delimiters:{get:function(){return Ai},set:function(e){Ai=e,j()},configurable:!0,enumerable:!0},unsafeDelimiters:{get:function(){return Ti},set:function(e){Ti=e,j()},configurable:!0,enumerable:!0}}),Di=void 0,Si=void 0;"production"!==n.env.NODE_ENV&&!function(){var e="undefined"!=typeof console;Di=function(t,n){e&&!ji.silent&&console.error("[Vue warn]: "+t+(n?Si(n):""))},Si=function(e){var t=e._isVue?e.$options.name:e.name;return t?" (found in component: <"+d(t)+">)":""}}();var Vi=Object.freeze({appendWithTransition:R,beforeWithTransition:F,removeWithTransition:M,applyTransition:I}),Pi=/^v-ref:/,Ri=/^(div|p|span|img|a|b|i|br|ul|ol|li|h1|h2|h3|h4|h5|h6|code|pre|table|th|td|tr|form|label|input|select|option|nav|article|section|header|footer)$/i,Fi=/^(slot|partial|component)$/i,Mi=void 0;"production"!==n.env.NODE_ENV&&(Mi=function(e,t){return t.indexOf("-")>-1?e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:/HTMLUnknownElement/.test(e.toString())&&!/^(data|time|rtc|rb|details|dialog|summary)$/.test(t)});var Ii=ji.optionMergeStrategies=Object.create(null);Ii.data=function(e,t,i){return i?e||t?function(){var n="function"==typeof t?t.call(i):t,o="function"==typeof e?e.call(i):void 0;return n?de(n,o):o}:void 0:t?"function"!=typeof t?("production"!==n.env.NODE_ENV&&Di('The "data" option should be a function that returns a per-instance value in component definitions.',i),e):e?function(){return de(t.call(this),e.call(this))}:t:e},Ii.el=function(e,t,i){if(!i&&t&&"function"!=typeof t)return void("production"!==n.env.NODE_ENV&&Di('The "el" option should be a function that returns a per-instance value in component definitions.',i));var o=t||e;return i&&"function"==typeof o?o.call(i):o},Ii.init=Ii.created=Ii.ready=Ii.attached=Ii.detached=Ii.beforeCompile=Ii.compiled=Ii.beforeDestroy=Ii.destroyed=Ii.activate=function(e,t){return t?e?e.concat(t):Ln(t)?t:[t]:e},ji._assetTypes.forEach(function(e){Ii[e+"s"]=ve}),Ii.watch=Ii.events=function(e,t){if(!t)return e;if(!e)return t;var n={};b(n,e);for(var i in t){var o=n[i],r=t[i];o&&!Ln(o)&&(o=[o]),n[i]=o?o.concat(r):[r]}return n},Ii.props=Ii.methods=Ii.computed=function(e,t){if(!t)return e;if(!e)return t;var n=Object.create(null);return b(n,e),b(n,t),n};var Li=function(e,t){return void 0===t?e:t},Hi=0;Ee.target=null,Ee.prototype.addSub=function(e){this.subs.push(e)},Ee.prototype.removeSub=function(e){this.subs.$remove(e)},Ee.prototype.depend=function(){Ee.target.addDep(this)},Ee.prototype.notify=function(){for(var e=y(this.subs),t=0,n=e.length;t<n;t++)e[t].update()};var zi=Array.prototype,Bi=Object.create(zi);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=zi[e];E(Bi,e,function(){for(var n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];var o,r=t.apply(this,i),s=this.__ob__;switch(e){case"push":o=i;break;case"unshift":o=i;break;case"splice":o=i.slice(2)}return o&&s.observeArray(o),s.dep.notify(),r})}),E(zi,"$set",function(e,t){return e>=this.length&&(this.length=Number(e)+1),this.splice(e,1,t)[0]}),E(zi,"$remove",function(e){if(this.length){var t=x(this,e);return t>-1?this.splice(t,1):void 0}});var Ui=Object.getOwnPropertyNames(Bi),Wi=!0;xe.prototype.walk=function(e){for(var t=Object.keys(e),n=0,i=t.length;n<i;n++)this.convert(t[n],e[t[n]])},xe.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)$e(e[t])},xe.prototype.convert=function(e,t){Ne(this.value,e,t)},xe.prototype.addVm=function(e){(this.vms||(this.vms=[])).push(e)},xe.prototype.removeVm=function(e){this.vms.$remove(e)};var qi=Object.freeze({defineReactive:Ne,set:i,del:o,hasOwn:r,isLiteral:s,isReserved:a,_toString:c,toNumber:l,toBoolean:h,stripQuotes:u,camelize:f,hyphenate:d,classify:v,bind:_,toArray:y,extend:b,isObject:m,isPlainObject:g,def:E,debounce:w,indexOf:x,cancellable:k,looseEqual:C,isArray:Ln,hasProto:Hn,inBrowser:zn,devtools:Bn,isIE:Wn,isIE9:qn,isAndroid:Jn,isIos:Qn,iosVersionMatch:Yn,iosVersion:Gn,hasMutationObserverBug:Kn,get transitionProp(){return Zn},get transitionEndEvent(){return Xn},get animationProp(){return ei},get animationEndEvent(){return ti},nextTick:oi,get _Set(){return ri},query:L,inDoc:H,getAttr:z,getBindAttr:B,hasBindAttr:U,before:W,after:q,remove:J,prepend:Q,replace:Y,on:G,off:K,setClass:X,addClass:ee,removeClass:te,extractContent:ne,trimNode:ie,isTemplate:re,createAnchor:se,findRef:ae,mapNodeRange:ce,removeNodeRange:le,isFragment:he,getOuterHTML:ue,mergeOptions:me,resolveAsset:ge,checkComponentAttr:fe,commonTagRE:Ri,reservedTagRE:Fi,get warn(){return Di}}),Ji=0,Qi=new $(1e3),Yi=0,Gi=1,Ki=2,Zi=3,Xi=0,eo=1,to=2,no=3,io=4,oo=5,ro=6,so=7,ao=8,co=[];co[Xi]={ws:[Xi],ident:[no,Yi],"[":[io],eof:[so]},co[eo]={ws:[eo],".":[to],"[":[io],eof:[so]},co[to]={ws:[to],ident:[no,Yi]},co[no]={ident:[no,Yi],0:[no,Yi],number:[no,Yi],ws:[eo,Gi],".":[to,Gi],"[":[io,Gi],eof:[so,Gi]},co[io]={"'":[oo,Yi],'"':[ro,Yi],"[":[io,Ki],"]":[eo,Zi],eof:ao,"else":[io,Yi]},co[oo]={"'":[io,Yi],eof:ao,"else":[oo,Yi]},co[ro]={'"':[io,Yi],eof:ao,"else":[ro,Yi]};var lo;"production"!==n.env.NODE_ENV&&(lo=function(e,t){Di('You are setting a non-existent path "'+e.raw+'" on a vm instance. Consider pre-initializing the property with the "data" option for more reliable reactivity and better performance.',t)});var ho=Object.freeze({parsePath:De,getPath:Se,setPath:Ve}),uo=new $(1e3),fo="Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat",po=new RegExp("^("+fo.replace(/,/g,"\\b|")+"\\b)"),vo="break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,return,super,switch,throw,try,var,while,with,yield,enum,await,implements,package,protected,static,interface,private,public",_o=new RegExp("^("+vo.replace(/,/g,"\\b|")+"\\b)"),yo=/\s/g,bo=/\n/g,mo=/[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`)|new |typeof |void /g,go=/"(\d+)"/g,Eo=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,wo=/[^\w$\.](?:[A-Za-z_$][\w$]*)/g,xo=/^(?:true|false|null|undefined|Infinity|NaN)$/,ko=[],Co=Object.freeze({parseExpression:ze,isSimplePath:Be}),$o=[],No=[],Oo={},Ao={},To=!1,jo=0;Qe.prototype.get=function(){this.beforeGet();var e,t=this.scope||this.vm;try{e=this.getter.call(t,t)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating expression "'+this.expression+'": '+i.toString(),this.vm)}return this.deep&&Ye(e),this.preProcess&&(e=this.preProcess(e)),this.filters&&(e=t._applyFilters(e,null,this.filters,!1)),this.postProcess&&(e=this.postProcess(e)),this.afterGet(),e},Qe.prototype.set=function(e){var t=this.scope||this.vm;this.filters&&(e=t._applyFilters(e,this.value,this.filters,!0));try{this.setter.call(t,t,e)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating setter "'+this.expression+'": '+i.toString(),this.vm)}var o=t.$forContext;if(o&&o.alias===this.expression){if(o.filters)return void("production"!==n.env.NODE_ENV&&Di("It seems you are using two-way binding on a v-for alias ("+this.expression+"), and the v-for has filters. This will not work properly. Either remove the filters or use an array of objects and bind to object properties instead.",this.vm));o._withLock(function(){t.$key?o.rawValue[t.$key]=e:o.rawValue.$set(t.$index,e)})}},Qe.prototype.beforeGet=function(){Ee.target=this},Qe.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},Qe.prototype.afterGet=function(){Ee.target=null;for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Qe.prototype.update=function(e){this.lazy?this.dirty=!0:this.sync||!ji.async?this.run():(this.shallow=this.queued?!!e&&this.shallow:!!e,this.queued=!0,"production"!==n.env.NODE_ENV&&ji.debug&&(this.prevError=new Error("[vue] async stack trace")),Je(this))},Qe.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||(m(e)||this.deep)&&!this.shallow){var t=this.value;this.value=e;var i=this.prevError;if("production"!==n.env.NODE_ENV&&ji.debug&&i){this.prevError=null;try{this.cb.call(this.vm,e,t)}catch(o){throw oi(function(){throw i},0),o}}else this.cb.call(this.vm,e,t)}this.queued=this.shallow=!1}},Qe.prototype.evaluate=function(){var e=Ee.target;this.value=this.get(),this.dirty=!1,Ee.target=e},Qe.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},Qe.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||this.vm._vForRemoving||this.vm._watchers.$remove(this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1,this.vm=this.cb=this.value=null}};var Do=new ri,So={bind:function(){this.attr=3===this.el.nodeType?"data":"textContent"},update:function(e){this.el[this.attr]=c(e)}},Vo=new $(1e3),Po=new $(1e3),Ro={efault:[0,"",""],legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]};Ro.td=Ro.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Ro.option=Ro.optgroup=[1,'<select multiple="multiple">',"</select>"],Ro.thead=Ro.tbody=Ro.colgroup=Ro.caption=Ro.tfoot=[1,"<table>","</table>"],Ro.g=Ro.defs=Ro.symbol=Ro.use=Ro.image=Ro.text=Ro.circle=Ro.ellipse=Ro.line=Ro.path=Ro.polygon=Ro.polyline=Ro.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events"version="1.1">',"</svg>"];var Fo=/<([\w:-]+)/,Mo=/&#?\w+?;/,Io=/<!--/,Lo=function(){if(zn){var e=document.createElement("div");return e.innerHTML="<template>1</template>",!e.cloneNode(!0).firstChild.innerHTML}return!1}(),Ho=function(){if(zn){var e=document.createElement("textarea");return e.placeholder="t","t"===e.cloneNode(!0).value}return!1}(),zo=Object.freeze({cloneNode:Xe,parseTemplate:et}),Bo={bind:function(){8===this.el.nodeType&&(this.nodes=[],this.anchor=se("v-html"),Y(this.el,this.anchor))},update:function(e){e=c(e),this.nodes?this.swap(e):this.el.innerHTML=e},swap:function(e){for(var t=this.nodes.length;t--;)J(this.nodes[t]);var n=et(e,!0,!0);this.nodes=y(n.childNodes),W(n,this.anchor)}};tt.prototype.callHook=function(e){var t,n;for(t=0,n=this.childFrags.length;t<n;t++)this.childFrags[t].callHook(e);for(t=0,n=this.children.length;t<n;t++)e(this.children[t])},tt.prototype.beforeRemove=function(){var e,t;for(e=0,t=this.childFrags.length;e<t;e++)this.childFrags[e].beforeRemove(!1);for(e=0,t=this.children.length;e<t;e++)this.children[e].$destroy(!1,!0);var n=this.unlink.dirs;for(e=0,t=n.length;e<t;e++)n[e]._watcher&&n[e]._watcher.teardown()},tt.prototype.destroy=function(){this.parentFrag&&this.parentFrag.childFrags.$remove(this),this.node.__v_frag=null,this.unlink()};var Uo=new $(5e3);ct.prototype.create=function(e,t,n){var i=Xe(this.template);return new tt(this.linker,this.vm,i,e,t,n)};var Wo=700,qo=800,Jo=850,Qo=1100,Yo=1500,Go=1500,Ko=1750,Zo=2100,Xo=2200,er=2300,tr=0,nr={priority:Xo,terminal:!0,params:["track-by","stagger","enter-stagger","leave-stagger"],bind:function(){var e=this.expression.match(/(.*) (?:in|of) (.*)/);if(e){var t=e[1].match(/\((.*),(.*)\)/);t?(this.iterator=t[1].trim(),this.alias=t[2].trim()):this.alias=e[1].trim(),this.expression=e[2]}if(!this.alias)return void("production"!==n.env.NODE_ENV&&Di('Invalid v-for expression "'+this.descriptor.raw+'": alias is required.',this.vm));this.id="__v-for__"+ ++tr;var i=this.el.tagName;this.isOption=("OPTION"===i||"OPTGROUP"===i)&&"SELECT"===this.el.parentNode.tagName,this.start=se("v-for-start"),this.end=se("v-for-end"),Y(this.el,this.end),W(this.start,this.end),this.cache=Object.create(null),this.factory=new ct(this.vm,this.el)},update:function(e){this.diff(e),this.updateRef(),this.updateModel()},diff:function(e){var t,n,i,o,s,a,c=e[0],l=this.fromObject=m(c)&&r(c,"$key")&&r(c,"$value"),h=this.params.trackBy,u=this.frags,f=this.frags=new Array(e.length),p=this.alias,d=this.iterator,v=this.start,_=this.end,y=H(v),b=!u;for(t=0,n=e.length;t<n;t++)c=e[t],o=l?c.$key:null,s=l?c.$value:c,a=!m(s),i=!b&&this.getCachedFrag(s,t,o),i?(i.reused=!0,i.scope.$index=t,o&&(i.scope.$key=o),d&&(i.scope[d]=null!==o?o:t),(h||l||a)&&we(function(){i.scope[p]=s})):(i=this.create(s,p,t,o),i.fresh=!b),f[t]=i,b&&i.before(_);if(!b){var g=0,E=u.length-f.length;for(this.vm._vForRemoving=!0,t=0,n=u.length;t<n;t++)i=u[t],i.reused||(this.deleteCachedFrag(i),this.remove(i,g++,E,y));this.vm._vForRemoving=!1,g&&(this.vm._watchers=this.vm._watchers.filter(function(e){return e.active}));var w,x,k,C=0;for(t=0,n=f.length;t<n;t++)i=f[t],w=f[t-1],x=w?w.staggerCb?w.staggerAnchor:w.end||w.node:v,i.reused&&!i.staggerCb?(k=lt(i,v,this.id),k===w||k&&lt(k,v,this.id)===w||this.move(i,x)):this.insert(i,C++,x,y),i.reused=i.fresh=!1}},create:function(e,t,n,i){var o=this._host,r=this._scope||this.vm,s=Object.create(r);s.$refs=Object.create(r.$refs),s.$els=Object.create(r.$els),s.$parent=r,s.$forContext=this,we(function(){Ne(s,t,e)}),Ne(s,"$index",n),i?Ne(s,"$key",i):s.$key&&E(s,"$key",null),this.iterator&&Ne(s,this.iterator,null!==i?i:n);var a=this.factory.create(o,s,this._frag);return a.forId=this.id,this.cacheFrag(e,a,n,i),a},updateRef:function(){var e=this.descriptor.ref;if(e){var t,n=(this._scope||this.vm).$refs;this.fromObject?(t={},this.frags.forEach(function(e){t[e.scope.$key]=ht(e)})):t=this.frags.map(ht),n[e]=t}},updateModel:function(){if(this.isOption){var e=this.start.parentNode,t=e&&e.__v_model;t&&t.forceUpdate()}},insert:function(e,t,n,i){e.staggerCb&&(e.staggerCb.cancel(),e.staggerCb=null);var o=this.getStagger(e,t,null,"enter");if(i&&o){var r=e.staggerAnchor;r||(r=e.staggerAnchor=se("stagger-anchor"),r.__v_frag=e),q(r,n);var s=e.staggerCb=k(function(){e.staggerCb=null,e.before(r),J(r)});setTimeout(s,o)}else{var a=n.nextSibling;a||(q(this.end,n),a=this.end),e.before(a)}},remove:function(e,t,n,i){if(e.staggerCb)return e.staggerCb.cancel(),void(e.staggerCb=null);var o=this.getStagger(e,t,n,"leave");if(i&&o){var r=e.staggerCb=k(function(){e.staggerCb=null,e.remove()});setTimeout(r,o)}else e.remove()},move:function(e,t){t.nextSibling||this.end.parentNode.appendChild(this.end),e.before(t.nextSibling,!1)},cacheFrag:function(e,t,i,o){var s,a=this.params.trackBy,c=this.cache,l=!m(e);o||a||l?(s=ft(i,o,e,a),c[s]?"$index"!==a&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):c[s]=t):(s=this.id,r(e,s)?null===e[s]?e[s]=t:"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):Object.isExtensible(e)?E(e,s,t):"production"!==n.env.NODE_ENV&&Di("Frozen v-for objects cannot be automatically tracked, make sure to provide a track-by key.")),t.raw=e;
},getCachedFrag:function(e,t,i){var o,r=this.params.trackBy,s=!m(e);if(i||r||s){var a=ft(t,i,e,r);o=this.cache[a]}else o=e[this.id];return o&&(o.reused||o.fresh)&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e),o},deleteCachedFrag:function(e){var t=e.raw,n=this.params.trackBy,i=e.scope,o=i.$index,s=r(i,"$key")&&i.$key,a=!m(t);if(n||s||a){var c=ft(o,s,t,n);this.cache[c]=null}else t[this.id]=null,e.raw=null},getStagger:function(e,t,n,i){i+="Stagger";var o=e.node.__v_trans,r=o&&o.hooks,s=r&&(r[i]||r.stagger);return s?s.call(e,t,n):t*parseInt(this.params[i]||this.params.stagger,10)},_preProcess:function(e){return this.rawValue=e,e},_postProcess:function(e){if(Ln(e))return e;if(g(e)){for(var t,n=Object.keys(e),i=n.length,o=new Array(i);i--;)t=n[i],o[i]={$key:t,$value:e[t]};return o}return"number"!=typeof e||isNaN(e)||(e=ut(e)),e||[]},unbind:function(){if(this.descriptor.ref&&((this._scope||this.vm).$refs[this.descriptor.ref]=null),this.frags)for(var e,t=this.frags.length;t--;)e=this.frags[t],this.deleteCachedFrag(e),e.destroy()}};"production"!==n.env.NODE_ENV&&(nr.warnDuplicate=function(e){Di('Duplicate value found in v-for="'+this.descriptor.raw+'": '+JSON.stringify(e)+'. Use track-by="$index" if you are expecting duplicate values.',this.vm)});var ir={priority:Zo,terminal:!0,bind:function(){var e=this.el;if(e.__vue__)"production"!==n.env.NODE_ENV&&Di('v-if="'+this.expression+'" cannot be used on an instance root element.',this.vm),this.invalid=!0;else{var t=e.nextElementSibling;t&&null!==z(t,"v-else")&&(J(t),this.elseEl=t),this.anchor=se("v-if"),Y(e,this.anchor)}},update:function(e){this.invalid||(e?this.frag||this.insert():this.remove())},insert:function(){this.elseFrag&&(this.elseFrag.remove(),this.elseFrag=null),this.factory||(this.factory=new ct(this.vm,this.el)),this.frag=this.factory.create(this._host,this._scope,this._frag),this.frag.before(this.anchor)},remove:function(){this.frag&&(this.frag.remove(),this.frag=null),this.elseEl&&!this.elseFrag&&(this.elseFactory||(this.elseFactory=new ct(this.elseEl._context||this.vm,this.elseEl)),this.elseFrag=this.elseFactory.create(this._host,this._scope,this._frag),this.elseFrag.before(this.anchor))},unbind:function(){this.frag&&this.frag.destroy(),this.elseFrag&&this.elseFrag.destroy()}},or={bind:function(){var e=this.el.nextElementSibling;e&&null!==z(e,"v-else")&&(this.elseEl=e)},update:function(e){this.apply(this.el,e),this.elseEl&&this.apply(this.elseEl,!e)},apply:function(e,t){function n(){e.style.display=t?"":"none"}H(e)?I(e,t?1:-1,n,this.vm):n()}},rr={bind:function(){var e=this,t=this.el,n="range"===t.type,i=this.params.lazy,o=this.params.number,r=this.params.debounce,s=!1;if(Jn||n||(this.on("compositionstart",function(){s=!0}),this.on("compositionend",function(){s=!1,i||e.listener()})),this.focused=!1,n||i||(this.on("focus",function(){e.focused=!0}),this.on("blur",function(){e.focused=!1,e._frag&&!e._frag.inserted||e.rawListener()})),this.listener=this.rawListener=function(){if(!s&&e._bound){var i=o||n?l(t.value):t.value;e.set(i),oi(function(){e._bound&&!e.focused&&e.update(e._watcher.value)})}},r&&(this.listener=w(this.listener,r)),this.hasjQuery="function"==typeof jQuery,this.hasjQuery){var a=jQuery.fn.on?"on":"bind";jQuery(t)[a]("change",this.rawListener),i||jQuery(t)[a]("input",this.listener)}else this.on("change",this.rawListener),i||this.on("input",this.listener);!i&&qn&&(this.on("cut",function(){oi(e.listener)}),this.on("keyup",function(t){46!==t.keyCode&&8!==t.keyCode||e.listener()})),(t.hasAttribute("value")||"TEXTAREA"===t.tagName&&t.value.trim())&&(this.afterBind=this.listener)},update:function(e){e=c(e),e!==this.el.value&&(this.el.value=e)},unbind:function(){var e=this.el;if(this.hasjQuery){var t=jQuery.fn.off?"off":"unbind";jQuery(e)[t]("change",this.listener),jQuery(e)[t]("input",this.listener)}}},sr={bind:function(){var e=this,t=this.el;this.getValue=function(){if(t.hasOwnProperty("_value"))return t._value;var n=t.value;return e.params.number&&(n=l(n)),n},this.listener=function(){e.set(e.getValue())},this.on("change",this.listener),t.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){this.el.checked=C(e,this.getValue())}},ar={bind:function(){var e=this,t=this,n=this.el;this.forceUpdate=function(){t._watcher&&t.update(t._watcher.get())};var i=this.multiple=n.hasAttribute("multiple");this.listener=function(){var e=pt(n,i);e=t.params.number?Ln(e)?e.map(l):l(e):e,t.set(e)},this.on("change",this.listener);var o=pt(n,i,!0);(i&&o.length||!i&&null!==o)&&(this.afterBind=this.listener),this.vm.$on("hook:attached",function(){oi(e.forceUpdate)}),H(n)||oi(this.forceUpdate)},update:function(e){var t=this.el;t.selectedIndex=-1;for(var n,i,o=this.multiple&&Ln(e),r=t.options,s=r.length;s--;)n=r[s],i=n.hasOwnProperty("_value")?n._value:n.value,n.selected=o?dt(e,i)>-1:C(e,i)},unbind:function(){this.vm.$off("hook:attached",this.forceUpdate)}},cr={bind:function(){function e(){var e=n.checked;return e&&n.hasOwnProperty("_trueValue")?n._trueValue:!e&&n.hasOwnProperty("_falseValue")?n._falseValue:e}var t=this,n=this.el;this.getValue=function(){return n.hasOwnProperty("_value")?n._value:t.params.number?l(n.value):n.value},this.listener=function(){var i=t._watcher.value;if(Ln(i)){var o=t.getValue();n.checked?x(i,o)<0&&i.push(o):i.$remove(o)}else t.set(e())},this.on("change",this.listener),n.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){var t=this.el;Ln(e)?t.checked=x(e,this.getValue())>-1:t.hasOwnProperty("_trueValue")?t.checked=C(e,t._trueValue):t.checked=!!e}},lr={text:rr,radio:sr,select:ar,checkbox:cr},hr={priority:qo,twoWay:!0,handlers:lr,params:["lazy","number","debounce"],bind:function(){this.checkFilters(),this.hasRead&&!this.hasWrite&&"production"!==n.env.NODE_ENV&&Di('It seems you are using a read-only filter with v-model="'+this.descriptor.raw+'". You might want to use a two-way filter to ensure correct behavior.',this.vm);var e,t=this.el,i=t.tagName;if("INPUT"===i)e=lr[t.type]||lr.text;else if("SELECT"===i)e=lr.select;else{if("TEXTAREA"!==i)return void("production"!==n.env.NODE_ENV&&Di("v-model does not support element type: "+i,this.vm));e=lr.text}t.__v_model=this,e.bind.call(this),this.update=e.update,this._unbind=e.unbind},checkFilters:function(){var e=this.filters;if(e)for(var t=e.length;t--;){var n=ge(this.vm.$options,"filters",e[t].name);("function"==typeof n||n.read)&&(this.hasRead=!0),n.write&&(this.hasWrite=!0)}},unbind:function(){this.el.__v_model=null,this._unbind&&this._unbind()}},ur={esc:27,tab:9,enter:13,space:32,"delete":[8,46],up:38,left:37,right:39,down:40},fr={priority:Wo,acceptStatement:!0,keyCodes:ur,bind:function(){if("IFRAME"===this.el.tagName&&"load"!==this.arg){var e=this;this.iframeBind=function(){G(e.el.contentWindow,e.arg,e.handler,e.modifiers.capture)},this.on("load",this.iframeBind)}},update:function(e){if(this.descriptor.raw||(e=function(){}),"function"!=typeof e)return void("production"!==n.env.NODE_ENV&&Di("v-on:"+this.arg+'="'+this.expression+'" expects a function value, got '+e,this.vm));this.modifiers.stop&&(e=_t(e)),this.modifiers.prevent&&(e=yt(e)),this.modifiers.self&&(e=bt(e));var t=Object.keys(this.modifiers).filter(function(e){return"stop"!==e&&"prevent"!==e&&"self"!==e&&"capture"!==e});t.length&&(e=vt(e,t)),this.reset(),this.handler=e,this.iframeBind?this.iframeBind():G(this.el,this.arg,this.handler,this.modifiers.capture)},reset:function(){var e=this.iframeBind?this.el.contentWindow:this.el;this.handler&&K(e,this.arg,this.handler)},unbind:function(){this.reset()}},pr=["-webkit-","-moz-","-ms-"],dr=["Webkit","Moz","ms"],vr=/!important;?$/,_r=Object.create(null),yr=null,br={deep:!0,update:function(e){"string"==typeof e?this.el.style.cssText=e:Ln(e)?this.handleObject(e.reduce(b,{})):this.handleObject(e||{})},handleObject:function(e){var t,n,i=this.cache||(this.cache={});for(t in i)t in e||(this.handleSingle(t,null),delete i[t]);for(t in e)n=e[t],n!==i[t]&&(i[t]=n,this.handleSingle(t,n))},handleSingle:function(e,t){if(e=mt(e))if(null!=t&&(t+=""),t){var i=vr.test(t)?"important":"";i?("production"!==n.env.NODE_ENV&&Di("It's probably a bad idea to use !important with inline rules. This feature will be deprecated in a future version of Vue."),t=t.replace(vr,"").trim(),this.el.style.setProperty(e.kebab,t,i)):this.el.style[e.camel]=t}else this.el.style[e.camel]=""}},mr="http://www.w3.org/1999/xlink",gr=/^xlink:/,Er=/^v-|^:|^@|^(?:is|transition|transition-mode|debounce|track-by|stagger|enter-stagger|leave-stagger)$/,wr=/^(?:value|checked|selected|muted)$/,xr=/^(?:draggable|contenteditable|spellcheck)$/,kr={value:"_value","true-value":"_trueValue","false-value":"_falseValue"},Cr={priority:Jo,bind:function(){var e=this.arg,t=this.el.tagName;e||(this.deep=!0);var i=this.descriptor,o=i.interp;if(o&&(i.hasOneTime&&(this.expression=S(o,this._scope||this.vm)),(Er.test(e)||"name"===e&&("PARTIAL"===t||"SLOT"===t))&&("production"!==n.env.NODE_ENV&&Di(e+'="'+i.raw+'": attribute interpolation is not allowed in Vue.js directives and special attributes.',this.vm),this.el.removeAttribute(e),this.invalid=!0),"production"!==n.env.NODE_ENV)){var r=e+'="'+i.raw+'": ';"src"===e&&Di(r+'interpolation in "src" attribute will cause a 404 request. Use v-bind:src instead.',this.vm),"style"===e&&Di(r+'interpolation in "style" attribute will cause the attribute to be discarded in Internet Explorer. Use v-bind:style instead.',this.vm)}},update:function(e){if(!this.invalid){var t=this.arg;this.arg?this.handleSingle(t,e):this.handleObject(e||{})}},handleObject:br.handleObject,handleSingle:function(e,t){var n=this.el,i=this.descriptor.interp;if(this.modifiers.camel&&(e=f(e)),!i&&wr.test(e)&&e in n){var o="value"===e&&null==t?"":t;n[e]!==o&&(n[e]=o)}var r=kr[e];if(!i&&r){n[r]=t;var s=n.__v_model;s&&s.listener()}return"value"===e&&"TEXTAREA"===n.tagName?void n.removeAttribute(e):void(xr.test(e)?n.setAttribute(e,t?"true":"false"):null!=t&&t!==!1?"class"===e?(n.__v_trans&&(t+=" "+n.__v_trans.id+"-transition"),X(n,t)):gr.test(e)?n.setAttributeNS(mr,e,t===!0?"":t):n.setAttribute(e,t===!0?"":t):n.removeAttribute(e))}},$r={priority:Yo,bind:function(){if(this.arg){var e=this.id=f(this.arg),t=(this._scope||this.vm).$els;r(t,e)?t[e]=this.el:Ne(t,e,this.el)}},unbind:function(){var e=(this._scope||this.vm).$els;e[this.id]===this.el&&(e[this.id]=null)}},Nr={bind:function(){"production"!==n.env.NODE_ENV&&Di("v-ref:"+this.arg+" must be used on a child component. Found on <"+this.el.tagName.toLowerCase()+">.",this.vm)}},Or={bind:function(){var e=this.el;this.vm.$once("pre-hook:compiled",function(){e.removeAttribute("v-cloak")})}},Ar={text:So,html:Bo,"for":nr,"if":ir,show:or,model:hr,on:fr,bind:Cr,el:$r,ref:Nr,cloak:Or},Tr={deep:!0,update:function(e){e?"string"==typeof e?this.setClass(e.trim().split(/\s+/)):this.setClass(Et(e)):this.cleanup()},setClass:function(e){this.cleanup(e);for(var t=0,n=e.length;t<n;t++){var i=e[t];i&&wt(this.el,i,ee)}this.prevKeys=e},cleanup:function(e){var t=this.prevKeys;if(t)for(var n=t.length;n--;){var i=t[n];(!e||e.indexOf(i)<0)&&wt(this.el,i,te)}}},jr={priority:Go,params:["keep-alive","transition-mode","inline-template"],bind:function(){this.el.__vue__?"production"!==n.env.NODE_ENV&&Di('cannot mount component "'+this.expression+'" on already mounted element: '+this.el):(this.keepAlive=this.params.keepAlive,this.keepAlive&&(this.cache={}),this.params.inlineTemplate&&(this.inlineTemplate=ne(this.el,!0)),this.pendingComponentCb=this.Component=null,this.pendingRemovals=0,this.pendingRemovalCb=null,this.anchor=se("v-component"),Y(this.el,this.anchor),this.el.removeAttribute("is"),this.el.removeAttribute(":is"),this.descriptor.ref&&this.el.removeAttribute("v-ref:"+d(this.descriptor.ref)),this.literal&&this.setComponent(this.expression))},update:function(e){this.literal||this.setComponent(e)},setComponent:function(e,t){if(this.invalidatePending(),e){var n=this;this.resolveComponent(e,function(){n.mountComponent(t)})}else this.unbuild(!0),this.remove(this.childVM,t),this.childVM=null},resolveComponent:function(e,t){var n=this;this.pendingComponentCb=k(function(i){n.ComponentName=i.options.name||("string"==typeof e?e:null),n.Component=i,t()}),this.vm._resolveComponent(e,this.pendingComponentCb)},mountComponent:function(e){this.unbuild(!0);var t=this,n=this.Component.options.activate,i=this.getCached(),o=this.build();n&&!i?(this.waitingFor=o,xt(n,o,function(){t.waitingFor===o&&(t.waitingFor=null,t.transition(o,e))})):(i&&o._updateRef(),this.transition(o,e))},invalidatePending:function(){this.pendingComponentCb&&(this.pendingComponentCb.cancel(),this.pendingComponentCb=null)},build:function(e){var t=this.getCached();if(t)return t;if(this.Component){var i={name:this.ComponentName,el:Xe(this.el),template:this.inlineTemplate,parent:this._host||this.vm,_linkerCachable:!this.inlineTemplate,_ref:this.descriptor.ref,_asComponent:!0,_isRouterView:this._isRouterView,_context:this.vm,_scope:this._scope,_frag:this._frag};e&&b(i,e);var o=new this.Component(i);return this.keepAlive&&(this.cache[this.Component.cid]=o),"production"!==n.env.NODE_ENV&&this.el.hasAttribute("transition")&&o._isFragment&&Di("Transitions will not work on a fragment instance. Template: "+o.$options.template,o),o}},getCached:function(){return this.keepAlive&&this.cache[this.Component.cid]},unbuild:function(e){this.waitingFor&&(this.keepAlive||this.waitingFor.$destroy(),this.waitingFor=null);var t=this.childVM;return!t||this.keepAlive?void(t&&(t._inactive=!0,t._updateRef(!0))):void t.$destroy(!1,e)},remove:function(e,t){var n=this.keepAlive;if(e){this.pendingRemovals++,this.pendingRemovalCb=t;var i=this;e.$remove(function(){i.pendingRemovals--,n||e._cleanup(),!i.pendingRemovals&&i.pendingRemovalCb&&(i.pendingRemovalCb(),i.pendingRemovalCb=null)})}else t&&t()},transition:function(e,t){var n=this,i=this.childVM;switch(i&&(i._inactive=!0),e._inactive=!1,this.childVM=e,n.params.transitionMode){case"in-out":e.$before(n.anchor,function(){n.remove(i,t)});break;case"out-in":n.remove(i,function(){e.$before(n.anchor,t)});break;default:n.remove(i),e.$before(n.anchor,t)}},unbind:function(){if(this.invalidatePending(),this.unbuild(),this.cache){for(var e in this.cache)this.cache[e].$destroy();this.cache=null}}},Dr=ji._propBindingModes,Sr={},Vr=/^[$_a-zA-Z]+[\w$]*$/,Pr=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\[[^\[\]]+\])*$/,Rr=ji._propBindingModes,Fr={bind:function(){var e=this.vm,t=e._context,n=this.descriptor.prop,i=n.path,o=n.parentPath,r=n.mode===Rr.TWO_WAY,s=this.parentWatcher=new Qe(t,o,function(t){Ot(e,n,t)},{twoWay:r,filters:n.filters,scope:this._scope});if(Nt(e,n,s.value),r){var a=this;e.$once("pre-hook:created",function(){a.childWatcher=new Qe(e,i,function(e){s.set(e)},{sync:!0})})}},unbind:function(){this.parentWatcher.teardown(),this.childWatcher&&this.childWatcher.teardown()}},Mr=[],Ir=!1,Lr="transition",Hr="animation",zr=Zn+"Duration",Br=ei+"Duration",Ur=zn&&window.requestAnimationFrame,Wr=Ur?function(e){Ur(function(){Ur(e)})}:function(e){setTimeout(e,50)},qr=Ft.prototype;qr.enter=function(e,t){this.cancelPending(),this.callHook("beforeEnter"),this.cb=t,ee(this.el,this.enterClass),e(),this.entered=!1,this.callHookWithCb("enter"),this.entered||(this.cancel=this.hooks&&this.hooks.enterCancelled,Pt(this.enterNextTick))},qr.enterNextTick=function(){var e=this;this.justEntered=!0,Wr(function(){e.justEntered=!1});var t=this.enterDone,n=this.getCssTransitionType(this.enterClass);this.pendingJsCb?n===Lr&&te(this.el,this.enterClass):n===Lr?(te(this.el,this.enterClass),this.setupCssCb(Xn,t)):n===Hr?this.setupCssCb(ti,t):t()},qr.enterDone=function(){this.entered=!0,this.cancel=this.pendingJsCb=null,te(this.el,this.enterClass),this.callHook("afterEnter"),this.cb&&this.cb()},qr.leave=function(e,t){this.cancelPending(),this.callHook("beforeLeave"),this.op=e,this.cb=t,ee(this.el,this.leaveClass),this.left=!1,this.callHookWithCb("leave"),this.left||(this.cancel=this.hooks&&this.hooks.leaveCancelled,this.op&&!this.pendingJsCb&&(this.justEntered?this.leaveDone():Pt(this.leaveNextTick)))},qr.leaveNextTick=function(){var e=this.getCssTransitionType(this.leaveClass);if(e){var t=e===Lr?Xn:ti;this.setupCssCb(t,this.leaveDone)}else this.leaveDone()},qr.leaveDone=function(){this.left=!0,this.cancel=this.pendingJsCb=null,this.op(),te(this.el,this.leaveClass),this.callHook("afterLeave"),this.cb&&this.cb(),this.op=null},qr.cancelPending=function(){this.op=this.cb=null;var e=!1;this.pendingCssCb&&(e=!0,K(this.el,this.pendingCssEvent,this.pendingCssCb),this.pendingCssEvent=this.pendingCssCb=null),this.pendingJsCb&&(e=!0,this.pendingJsCb.cancel(),this.pendingJsCb=null),e&&(te(this.el,this.enterClass),te(this.el,this.leaveClass)),this.cancel&&(this.cancel.call(this.vm,this.el),this.cancel=null)},qr.callHook=function(e){this.hooks&&this.hooks[e]&&this.hooks[e].call(this.vm,this.el)},qr.callHookWithCb=function(e){var t=this.hooks&&this.hooks[e];t&&(t.length>1&&(this.pendingJsCb=k(this[e+"Done"])),t.call(this.vm,this.el,this.pendingJsCb))},qr.getCssTransitionType=function(e){if(!(!Xn||document.hidden||this.hooks&&this.hooks.css===!1||Mt(this.el))){var t=this.type||this.typeCache[e];if(t)return t;var n=this.el.style,i=window.getComputedStyle(this.el),o=n[zr]||i[zr];if(o&&"0s"!==o)t=Lr;else{var r=n[Br]||i[Br];r&&"0s"!==r&&(t=Hr)}return t&&(this.typeCache[e]=t),t}},qr.setupCssCb=function(e,t){this.pendingCssEvent=e;var n=this,i=this.el,o=this.pendingCssCb=function(r){r.target===i&&(K(i,e,o),n.pendingCssEvent=n.pendingCssCb=null,!n.pendingJsCb&&t&&t())};G(i,e,o)};var Jr={priority:Qo,update:function(e,t){var n=this.el,i=ge(this.vm.$options,"transitions",e);e=e||"v",t=t||"v",n.__v_trans=new Ft(n,e,i,this.vm),te(n,t+"-transition"),ee(n,e+"-transition")}},Qr={style:br,"class":Tr,component:jr,prop:Fr,transition:Jr},Yr=/^v-bind:|^:/,Gr=/^v-on:|^@/,Kr=/^v-([^:]+)(?:$|:(.*)$)/,Zr=/\.[^\.]+/g,Xr=/^(v-bind:|:)?transition$/,es=1e3,ts=2e3;on.terminal=!0;var ns=/[^\w\-:\.]/,is=Object.freeze({compile:It,compileAndLinkProps:Ut,compileRoot:Wt,transclude:un,resolveSlots:vn}),os=/^v-on:|^@/;gn.prototype._bind=function(){var e=this.name,t=this.descriptor;if(("cloak"!==e||this.vm._isCompiled)&&this.el&&this.el.removeAttribute){var n=t.attr||"v-"+e;this.el.removeAttribute(n)}var i=t.def;if("function"==typeof i?this.update=i:b(this,i),this._setupParams(),this.bind&&this.bind(),this._bound=!0,this.literal)this.update&&this.update(t.raw);else if((this.expression||this.modifiers)&&(this.update||this.twoWay)&&!this._checkStatement()){var o=this;this.update?this._update=function(e,t){o._locked||o.update(e,t)}:this._update=mn;var r=this._preProcess?_(this._preProcess,this):null,s=this._postProcess?_(this._postProcess,this):null,a=this._watcher=new Qe(this.vm,this.expression,this._update,{filters:this.filters,twoWay:this.twoWay,deep:this.deep,preProcess:r,postProcess:s,scope:this._scope});this.afterBind?this.afterBind():this.update&&this.update(a.value)}},gn.prototype._setupParams=function(){if(this.params){var e=this.params;this.params=Object.create(null);for(var t,n,i,o=e.length;o--;)t=d(e[o]),i=f(t),n=B(this.el,t),null!=n?this._setupParamWatcher(i,n):(n=z(this.el,t),null!=n&&(this.params[i]=""===n||n))}},gn.prototype._setupParamWatcher=function(e,t){var n=this,i=!1,o=(this._scope||this.vm).$watch(t,function(t,o){if(n.params[e]=t,i){var r=n.paramWatchers&&n.paramWatchers[e];r&&r.call(n,t,o)}else i=!0},{immediate:!0,user:!1});(this._paramUnwatchFns||(this._paramUnwatchFns=[])).push(o)},gn.prototype._checkStatement=function(){var e=this.expression;if(e&&this.acceptStatement&&!Be(e)){var t=ze(e).get,n=this._scope||this.vm,i=function(e){n.$event=e,t.call(n,n),n.$event=null};return this.filters&&(i=n._applyFilters(i,null,this.filters)),this.update(i),!0}},gn.prototype.set=function(e){this.twoWay?this._withLock(function(){this._watcher.set(e)}):"production"!==n.env.NODE_ENV&&Di("Directive.set() can only be used inside twoWaydirectives.")},gn.prototype._withLock=function(e){var t=this;t._locked=!0,e.call(t),oi(function(){t._locked=!1})},gn.prototype.on=function(e,t,n){G(this.el,e,t,n),(this._listeners||(this._listeners=[])).push([e,t])},gn.prototype._teardown=function(){if(this._bound){this._bound=!1,this.unbind&&this.unbind(),this._watcher&&this._watcher.teardown();var e,t=this._listeners;if(t)for(e=t.length;e--;)K(this.el,t[e][0],t[e][1]);var i=this._paramUnwatchFns;if(i)for(e=i.length;e--;)i[e]();"production"!==n.env.NODE_ENV&&this.el&&this.el._vue_directives.$remove(this),this.vm=this.el=this._watcher=this._listeners=null}};var rs=/[^|]\|[^|]/;Oe(Nn),yn(Nn),bn(Nn),En(Nn),wn(Nn),xn(Nn),kn(Nn),Cn(Nn),$n(Nn);var ss={priority:er,params:["name"],bind:function(){var e=this.params.name||"default",t=this.vm._slotContents&&this.vm._slotContents[e];t&&t.hasChildNodes()?this.compile(t.cloneNode(!0),this.vm._context,this.vm):this.fallback()},compile:function(e,t,n){if(e&&t){if(this.el.hasChildNodes()&&1===e.childNodes.length&&1===e.childNodes[0].nodeType&&e.childNodes[0].hasAttribute("v-if")){var i=document.createElement("template");i.setAttribute("v-else",""),i.innerHTML=this.el.innerHTML,i._context=this.vm,e.appendChild(i)}var o=n?n._scope:this._scope;this.unlink=t.$compile(e,n,o,this._frag)}e?Y(this.el,e):J(this.el)},fallback:function(){this.compile(ne(this.el,!0),this.vm)},unbind:function(){this.unlink&&this.unlink()}},as={priority:Ko,params:["name"],paramWatchers:{name:function(e){ir.remove.call(this),e&&this.insert(e)}},bind:function(){this.anchor=se("v-partial"),Y(this.el,this.anchor),this.insert(this.params.name)},insert:function(e){var t=ge(this.vm.$options,"partials",e,!0);t&&(this.factory=new ct(this.vm,t),ir.insert.call(this))},unbind:function(){this.frag&&this.frag.destroy()}},cs={slot:ss,partial:as},ls=nr._postProcess,hs=/(\d{3})(?=\d)/g,us={orderBy:Tn,filterBy:An,limitBy:On,json:{read:function(e,t){return"string"==typeof e?e:JSON.stringify(e,null,arguments.length>1?t:2)},write:function(e){try{return JSON.parse(e)}catch(t){return e}}},capitalize:function(e){return e||0===e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""},uppercase:function(e){return e||0===e?e.toString().toUpperCase():""},lowercase:function(e){return e||0===e?e.toString().toLowerCase():""},currency:function(e,t,n){if(e=parseFloat(e),!isFinite(e)||!e&&0!==e)return"";t=null!=t?t:"$",n=null!=n?n:2;var i=Math.abs(e).toFixed(n),o=n?i.slice(0,-1-n):i,r=o.length%3,s=r>0?o.slice(0,r)+(o.length>3?",":""):"",a=n?i.slice(-1-n):"",c=e<0?"-":"";return c+t+s+o.slice(r).replace(hs,"$1,")+a},pluralize:function(e){var t=y(arguments,1),n=t.length;if(n>1){var i=e%10-1;return i in t?t[i]:t[n-1]}return t[0]+(1===e?"":"s")},debounce:function(e,t){if(e)return t||(t=300),w(e,t)}};Dn(Nn),Nn.version="1.0.26",setTimeout(function(){ji.devtools&&(Bn?Bn.emit("init",Nn):"production"!==n.env.NODE_ENV&&zn&&/Chrome\/\d+/.test(window.navigator.userAgent)&&console.log("Download the Vue Devtools for a better development experience:\nhttps://github.com/vuejs/vue-devtools"))},0),e.exports=Nn}).call(t,function(){return this}(),n(19))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{items:{type:Array}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="hy_u-hide";t["default"]={methods:{showNav:function(){this.$el.classList.remove(n)},hideNav:function(){var e=this.$el.className.split(" ");e.push(n),this.$el.className=e.join(" ")}},events:{"toggle::siteNav":function(){this.$el.classList.contains(n)?this.showNav():this.hideNav()}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={methods:{toggleNav:function(){this.$root.$broadcast("toggle::siteNav")}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{dismissCallBack:function(){console.log("alert!!!")},apiItems:[{name:"type",type:"String",isRequired:!0,"default":"n/a",desc:"The type of alert (error, info, success)"},{name:"dismissible",type:"Boolean",isRequired:!1,"default":!0,desc:"Is the alert dismissible?"},{name:"timeout",type:"Number",isRequired:!1,"default":-1,desc:"The duration alert stays on screen in ms"},{name:"onClosed",type:"Function",isRequired:!1,"default":"n/a",desc:"Callback function to be called when alert is closed."}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"label",type:"String",isRequired:!0,"default":"n/a",desc:"The lable of the panel"},{name:"isOpen",type:"Boolean",isRequired:!1,"default":!1,desc:"Is the panel open."}]}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"legalKey",type:"String",isRequired:!0,"default":"n/a",desc:"the key of legal in cms"},{name:"legalLang",type:"String",isRequired:!0,"default":"n/a",desc:"the language of legal in cms"},{name:"legalRegion",type:"String",isRequired:!0,"default":"n/a",desc:"the region of legal in cms"}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"overlayKey",type:"String",isRequired:!0,"default":"n/a",desc:"The key of the overlay. Used by the overlay opener directive to target the overley."}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},methods:{showSpinner:function(){var e=this;this._resetMsg(),this.$root.$broadcast("show::spinner"),setTimeout(function(){e.$root.$broadcast("hide::spinner")},3e3)},_resetMsg:function(){var e=this,t=3,n=setInterval(function(){t>0?(t--,e.msg="I will close in "+t+" seconds"):clearInterval(n)},1e3);this.msg="I will close in "+t+" seconds"}},data:function(){return{msg:"",isFullScreen:!1,apiItems:[{name:"fullScreen",type:"Boolean",isRequired:!1,"default":!1,desc:"Should the spinner take full screen"},{name:"text",type:"String",isRequired:!1,"default":"''",desc:"The text of the spinner. Default empty"},{name:"show::spinner",type:"Event",isRequired:!1,"default":"n/a",desc:"Active the spinner"},{name:"hide::spinner",type:"Event",isRequired:!1,"default":"n/a",desc:"Hide the spinner"}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){var e=this;return{stepTrackerCurrentStep:2,stepTrackerConfig:{isClickable:!0,steps:[{title:"Step A",link:"",onClickHandler:function(t){e.stepTrackerCurrentStep=0}},{title:"Step B",link:"",onClickHandler:function(t){e.stepTrackerCurrentStep=1}},{title:"Step C",link:"",onClickHandler:function(t){e.stepTrackerCurrentStep=2}}]},apiItems:[{name:"currentStep",type:"Integer",isRequired:!0,"default":0,desc:"todo"},{name:"config",type:"Object",isRequired:!0,"default":"n/a",desc:"todo"},{name:"config.title",type:"String",isRequired:!0,"default":"n/a",desc:"The title of the step"},{name:"config.link",type:"String",isRequired:!1,"default":"n/a",desc:"The link of the step. "},{name:"config.onClickHandler",type:"Function",isRequired:!1,"default":"n/a",desc:"The callback function when step is clicked."}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"label",type:"String",isRequired:!0,"default":"n/a",desc:"The lable of the tab"},{name:"isDisabled",type:"Boolean",isRequired:!1,"default":!1,desc:"Is the tab disabled or not. When set to true, the tab is not clickable."}]}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={data:function(){return{isVisible:!0}},props:{type:{type:String,required:!0},dismissible:{type:Boolean,"default":!0},timeout:{type:Number,"default":-1},onClosed:{type:Function}},methods:{dismiss:function(){var e=this;this.isVisible=!1,setTimeout(function(){e.onClosed&&e.onClosed.apply(e)})}},ready:function(){var e=this;this.timeout>=0&&setTimeout(function(){e.dismiss()},this.timeout)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{isOpen:{type:Boolean,"default":!1},label:{type:String,required:!0}},methods:{toggleOpen:function(e){this.isOpen=!this.isOpen}}}},function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),r=i(o),s=n(149),a=i(s),c=n(147),l=i(c),h=n(20),u=i(h);t["default"]={mixins:r["default"],directives:{setFocus:u["default"]},data:function(){return{indexedLegals:[],nonIndexedLegals:[],apiLang:null,apiRegion:null}},methods:{fetchLegals:function(t){return e("\n          "+this.$root.ligerEndPoint+"?lang="+this.apiLang+"&region="+this.apiRegion+"&html=true\n        ",{method:"POST",headers:{"Content-Type":"application/json",applicationKey:this.$root.ligerApplicationKey},body:JSON.stringify({keys:t})})},appendResponseToLegalContainer:function(e,t){var n=function(e,t){t.forEach(function(t){var n=e.findIndex(function(e){return e.key===t.key});n>-1&&e.$set(n,{content:t.content,key:t.key})})};"indexed"===e?n(this.indexedLegals,t):n(this.nonIndexedLegals,t)},getLegals:function(){return l["default"].call(this,function(){var e=this,t=this.indexedLegals.map(function(e){return e.key}),n=this.nonIndexedLegals.map(function(e){return e.key});t.length>0&&this.fetchLegals(t).then(this.parseJSON).then(function(t){e.appendResponseToLegalContainer("indexed",t)}),n.length>0&&this.fetchLegals(n).then(this.parseJSON).then(function(t){e.appendResponseToLegalContainer("nonIndexed",t)})},10)}()},events:{"legal::click":function(e){var t=this,n=this.indexedLegals.findIndex(function(t){return t.key===e});n>-1&&this.indexedLegals.forEach(function(e,i){i!==n?e.isSelected=!1:t.indexedLegals.$set(i,Object.assign({},t.indexedLegals[i],{isSelected:!0}))})},"legal::init":function(e){this.apiLang=e.lang,this.apiRegion=e.region;var t=e.isNonIndexed?this.nonIndexedLegals:this.indexedLegals,n=(0,a["default"])(t,function(t){return t.key===e.key});n<0&&(n=t.push(e)-1,this.getLegals()),e.isNonIndexed||this.rootBroadcast("legal::udpate",{key:e.key,isNonIndexed:e.isNonIndexed,index:n})}}}}).call(t,n(84))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),r=i(o),s=n(36),a=i(s);t["default"]={mixins:r["default"],data:function(){return{legalCounter:null}},props:{legalKey:{type:String,required:!0},isNonIndexed:{type:Boolean,"default":!1},legalLang:{type:String,required:!0},legalRegion:{type:String,required:!0}},events:{"legal::udpate":function(e){this.isNonIndexed||e.key!==this.legalKey||(this.legalCounter=e.index+1)}},methods:{clickHandler:function(){this.rootBroadcast("legal::click",this.legalKey)}},beforeCompile:function(){},ready:function(){var e=this;(0,a["default"])(function(){e.rootBroadcast("legal::init",{key:e.legalKey,lang:e.legalLang,region:e.legalRegion,isNonIndexed:e.isNonIndexed})})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=27;t["default"]={props:{isVisible:{type:Boolean,"default":!1}},watch:{isVisible:function(e){var t=window.document.body,n="no-scroll";e?t.classList?t.classList.add(n):t.className+=" "+n:t.classList?t.classList.remove(n):t.className=t.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ");
}},events:{"overlayContainer::open":function(){this.isVisible=!0},"overlayContainer::close":function(){this.isVisible=!1}},ready:function(){var e=this;window.document.addEventListener("keydown",function(t){t=t||window.event,t.keyCode===n&&(e.isVisible=!1)})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={data:function(){return{isVisible:!1}},props:{overlayKey:{type:String}},methods:{closeOverlay:function(){this.$dispatch("overlayContainer::close")}},events:{"overlay::open":function(e){return e===this.overlayKey?void(this.isVisible=!0):void(this.isVisible=!1)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={replace:!0,data:function(){return{active:!1}},props:{text:{type:String,"default":""},fullScreen:{type:Boolean,"default":!1}},methods:{show:function(){this.active=!0,this.$root.$broadcast("shown::spinner")},hide:function(){this.active=!1,this.$root.$broadcast("hidden::spinner")}},events:{"show::spinner":function(){this.show()},"hide::spinner":function(){this.hide()}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{config:{type:Object},currentStep:{type:Number,"default":0}},methods:{clickHandler:function(e,t,n){t.onClickHandler&&(e.preventDefault(),this.currentStep>n&&t.onClickHandler())}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{label:{type:String},isDisabled:{type:Boolean,"default":!1}},data:function(){return{tabIndex:0,isVisible:!1}},computed:{isVisible:function(){return this.$parent.activeTabIndex===this.tabIndex}},created:function(){this.$parent.tabs.push({label:this.label,isDisabled:this.isDisabled})},ready:function(){var e=this;this.$parent.$children.forEach(function(t,n){t.$el===e.$el&&(e.tabIndex=n)})},beforeDestroy:function(){this.$parent.tabs.splice(this.tabIndex,1)}}},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n({props:{activeTabIndex:{type:Number,"default":0}},methods:{isActive:function(e){return activeTabIndex===e}},data:function(){return{tabs:[]}}},"methods",{handleTabListClick:function(e,t){t.isDisabled||(this.activeTabIndex=e)}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(187),r=i(o),s=n(191),a=i(s),c=n(192),l=i(c),h=n(188),u=i(h),f=n(189),p=i(f),d=n(186),v=i(d),_=n(185),y=i(_),b=n(190),m=i(b);t["default"]={"/":{component:r["default"]},"/alert":{component:{template:"<alert-page></alert-page>",components:{AlertPage:y["default"]}}},"/spinner":{component:{template:"<spinner-page></spinner-page>",components:{SpinnerPage:m["default"]}}},"/step-tracker":{component:{template:"<step-tracker-page></step-tracker-page>",components:{StepTrackerPage:a["default"]}}},"/tabs":{component:{template:"<tabs-page></tabs-page>",components:{TabsPage:l["default"]}}},"/legal":{component:{template:"<legal-page></legal-page>",components:{LegalPage:u["default"]}}},"/overlay":{component:{template:"<overlay-page></overlay-page>",components:{OverlayPage:p["default"]}}},"/collapsable-panel":{component:{template:"<collapsable-panel-page></collapsable-panel-page>",components:{CollapsablePanelPage:v["default"]}}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={isLiteral:!0,eventHandler:function(e){e.preventDefault(),this.vm.$root.$broadcast("overlay::open",this.expression),this.vm.$root.$broadcast("overlayContainer::open")},bind:function(){this.el.addEventListener("click",this.eventHandler.bind(this))},unbind:function(){this.el.removeEventListener("click",this.eventHandler.bind(this))}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var o=n(66),r=i(o),s=n(20),a=i(s),c=n(200),l=i(c),h=n(197),u=i(h),f=n(198),p=i(f),d=n(196),v=i(d),_=n(195),y=i(_),b=n(202),m=i(b),g=n(201),E=i(g),w=n(194),x=i(w),k=n(193),C=i(k),$=n(199),N=i($),O={StepTracker:l["default"],OverlayContainer:u["default"],Overlay:p["default"],LegalCounter:v["default"],LegalContainer:y["default"],Tabs:m["default"],Tab:E["default"],CollapsablePanel:x["default"],Alert:C["default"],Spinner:N["default"]},A={overlayOpener:r["default"],setFocus:a["default"]};e.exports=function(e){for(var t in O)e.component(t,O[t]);for(var n in A)e.directive(n,A[n])}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={methods:{rootBroadcast:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.$broadcast.apply(this.$root,t)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={methods:{parseJSON:function(e){return e.json()}}}},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.sg_c-api-table{border-spacing:0 10px;width:100%}.sg_c-api-table tr{-webkit-box-flex:1;-ms-flex:1;flex:1}.sg_c-api-table th,.sg_c-api-table tr:hover{background-color:#eee}.sg_c-api-table td{text-align:center}',""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".sg_c-nav{display:block;position:fixed;left:0;width:25rem;height:100%;border-right:.1rem solid #e2e2e2;padding:2rem;padding-top:68px;overflow-x:hidden;overflow-y:auto;background-color:#fff;z-index:999}.sg_c-nav__section{font-family:Telus Medium,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:1.2rem;border-bottom:.1rem solid #e2e2e2;padding-top:1rem;padding-bottom:.5rem;margin:1rem 0}.sg_c-nav__list-item{padding:5px 0}.sg_c-nav__link:hover{color:#8c68a6}.sg_c-nav__link--active{color:#57a708}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,"header.sg_c-site-header{background-color:#4b286d;height:68px;text-align:left;position:fixed;width:100%;z-index:9999}header.sg_c-site-header .sg_c-site-header__container{height:100%;width:100%}header.sg_c-site-header .sg_c-site-header__container img.logo{height:100%;padding:20px;display:inline-block;max-width:100%}header.sg_c-site-header .sg_c-site-header__togglebtn{color:#fff;font-size:2rem;margin:0;background:hsla(0,0%,100%,.1);padding:1.5rem;float:left;cursor:pointer;border:0;height:100%;display:inline-block}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,"body{background-color:#f5f6f7}.sg_c-site__main{padding-top:68px;margin-left:25rem}@media screen and (max-width:599px){.sg_c-site__main{margin-left:0}}.sg_c-demo{margin:20px 0}.sg_c-demo__container{background-color:#fff;overflow:hidden;border-radius:5px;border:1px solid #eee;padding:25px;margin:20px 0}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.fade-transition{-webkit-transition:all .3s ease;transition:all .3s ease}.fade-enter,.fade-leave{opacity:0}.c-alert{position:relative;padding:7px 15px;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.c-alert--info{background-color:#333;border-color:#000;color:#fff}.c-alert--info button{color:#fff}.c-alert--success{background-color:#e6ffcc;border-color:#9f3;color:#408000}.c-alert--error{background-color:#f8dde3;border-color:#f2c0ca;color:#c81235}.c-alert__close-button{position:absolute;top:0;right:10px;-webkit-appearance:none;padding:0;cursor:pointer;background:0 0;border:0;font-size:2.5rem;opacity:.2}.c-alert__close-button:hover{opacity:.3}',""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.c-collapsable-panel{border:1px solid #e2e2e2;box-shadow:0 1px 3px 1px #e2e2e2}.c-collapsable-panel__header{cursor:pointer;padding:10px 15px;position:relative}.c-collapsable-panel__header:after{position:absolute;right:1em;top:.75em;font-size:.75em;font-family:Telus Icon;content:\'\\E114\';color:#57a708}.c-collapsable-panel__header--open:after{content:\'\\E117\'}.c-collapsable-panel__body{border-top:1px solid #e2e2e2;max-height:0;padding:0 15px;-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out;overflow:hidden;opacity:0}.c-collapsable-panel__body--open{opacity:1;padding:15px;max-height:9999px}',""]);
},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-legal-container__ordered-list{margin-top:10px;margin-bottom:20px;list-style:decimal;list-style-type:decimal;padding-left:20px}.c-legal-container__unordered-list{margin-top:10px;margin-bottom:20px;padding-left:20px;list-style:none;list-style-type:none}.c-legal-container__list-item{line-height:19px;margin-bottom:10px;padding:10px}.c-legal-container__list-item--active{background-color:#f9f1ff}.c-legal-container__list-item a{color:#49166d;text-decoration:none;border-bottom:1px dotted;padding-bottom:1px}.c-legal-container__list-item a:hover{color:#8c68a6}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-legal-sup{font-size:.75em;line-height:0;vertical-align:super;text-decoration:none;top:0!important;cursor:pointer}.c-legal-sup a{color:#49166d}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".no-scroll{overflow-x:hidden;overflow:hidden;overflow-y:hidden;position:relative;height:100%}.c-overlay-container__curtain{opacity:0;-webkit-transition:opacity 1.3s ease-in-out;transition:opacity 1.3s ease-in-out}.c-overlay-container__curtain--active{opacity:1;background:rgba(0,0,0,.55);position:fixed;top:0;left:0;right:0;bottom:0}.c-overlay-container__overlays{position:fixed;right:0;top:0;bottom:0;background-color:rgba(0,0,0,.5);-webkit-transform:translateX(100%);transform:translateX(100%);-webkit-transition:1s ease-in-out;transition:1s ease-in-out}@media screen and (max-width:599px){.c-overlay-container__overlays{width:100%}}@media screen and (min-width:600px){.c-overlay-container__overlays{width:66%}}.c-overlay-container__overlays--active{-webkit-transform:translateX(0);transform:translateX(0);z-index:99999}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-overlay{height:100%;width:100%;background-color:#fff}.c-overlay__header{padding:20px;position:fixed;top:0;height:75px;width:100%;border-bottom:1px solid #e2e2e2;background-color:#f5f6f7}.c-overlay__close-button{cursor:pointer;background:0;border:0;position:absolute;top:20px;right:20px;font-family:Telus Icon;font-size:2em;color:#49166d}.c-overlay__close-button:before{content:'\\E106'}.c-overlay__body{position:fixed;-webkit-overflow-scrolling:touch;overflow-y:scroll;top:75px;bottom:0;width:100%;padding:20px 20px 50px}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,"@-webkit-keyframes rotate{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotate{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35}to{stroke-dasharray:89,200;stroke-dashoffset:-124}}@keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35}to{stroke-dasharray:89,200;stroke-dashoffset:-124}}@-webkit-keyframes spinner-color{0%,to{stroke:#6c0}25%{stroke:#6c0}50%{stroke:#57a708}75%{stroke:#57a708}}@keyframes spinner-color{0%,to{stroke:#6c0}25%{stroke:#6c0}50%{stroke:#57a708}75%{stroke:#57a708}}.c-spinner{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-flex;-webkit-align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin:auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.c-spinner--fullscreen{position:fixed;top:0;left:0;right:0;bottom:0;z-index:9998;width:100%;height:100%;background:hsla(0,0%,100%,.8)}.c-spinner svg{animation-name:rotate;-webkit-animation-name:rotate;-moz-animation-name:rotate;animation-duration:1.8s;-webkit-animation-duration:1.8s;-moz-animation-duration:1.8s;animation-iteration-count:infinite;-webkit-animation-iteration-count:infinite;-moz-animation-iteration-count:infinite;animation-timing-function:linear;-webkit-animation-timing-function:linear;-moz-animation-timing-function:linear;height:100px;width:100px}.c-spinner circle{animation:dash 1.7s ease-in-out infinite 0s,spinner-color 6s ease-in-out infinite -.75s;-webkit-animation:dash 1.7s ease-in-out infinite 0s,spinner-color 6s ease-in-out infinite -.75s;-moz-animation:dash 1.7s ease-in-out infinite 0s,spinner-color 6s ease-in-out infinite -.75s}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.c-step-tracker__icon,.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.c-step-tracker{list-style:none;padding:0;position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin:1rem -1.5rem}@media screen and (min-width:600px){.c-step-tracker{padding-bottom:2.5rem;margin:1rem 0}}.c-step-tracker__step{width:100%;position:relative;text-align:center}.c-step-tracker__step:after,.c-step-tracker__step:before{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:calc(50% - 1.4rem);content:\' \';border-bottom:.6rem solid #aeaeae}.c-step-tracker__step:before{left:0}.c-step-tracker__step:after{right:0}.c-step-tracker .c-step-tracker__step:first-child:before,.c-step-tracker .c-step-tracker__step:last-child:after{content:none}.c-step-tracker__label{position:absolute;bottom:-3rem;left:0;font-size:1.7rem;width:100%;height:2.5rem;font-family:Telus Regular,Helvetica Neue,Helvetica,Arial,sans-serif;color:#666}@media screen and (max-width:599px){.c-step-tracker__label{display:none}}.c-step-tracker__step--active .c-step-tracker__label{font-family:Telus Medium,Helvetica Neue,Helvetica,Arial,sans-serif;color:#408000}.c-step-tracker__icon{font-size:3rem;color:#aeaeae}.c-step-tracker__icon:before{content:"\\E001"}.c-step-tracker__step--active .c-step-tracker__icon:before{content:"\\E002"}.c-step-tracker__setp--clickable a{cursor:pointer}.c-step-tracker__step--complete:after{border-bottom:.6rem solid #57a708}.c-step-tracker__step--complete .c-step-tracker__icon:before{content:"\\E110"}.c-step-tracker__step--active .c-step-tracker__icon:before,.c-step-tracker__step--complete .c-step-tracker__icon:before{color:#57a708}.c-step-tracker__step--complete+.c-step-tracker__step--active:before,.c-step-tracker__step--complete+.c-step-tracker__step--complete:before{border-bottom:.6rem solid #57a708}.c-step-tracker-mobile-label{font-size:1.7rem;text-align:center;font-family:Telus Regular,Helvetica Neue,Helvetica,Arial,sans-serif;color:#666}@media screen and (min-width:600px){.c-step-tracker-mobile-label{display:none}}.c-step-tracker-mobile-label__step{font-family:Telus Medium,Helvetica Neue,Helvetica,Arial,sans-serif;color:#408000}',""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-tabs__header{list-style:none;padding:0;margin:0;display:-webkit-box;display:-ms-flexbox;display:flex}.c-tabs__header-item{margin-top:2px;height:45px;padding:0 2px;-webkit-box-flex:1;-ms-flex:1;flex:1}.c-tabs__header-item a{background-color:#e2e2e2;text-decoration:none;padding:13px 20px;color:#49166d;display:block}.c-tabs__header-item--active{margin-top:1px;height:46px;background-color:#fff;border-top:1px solid #e2e2e2;border-left:1px solid #e2e2e2;border-right:1px solid #e2e2e2}.c-tabs__header-item--active a{background-color:#fff;color:#333}.c-tabs__header-item--disabled a{background-color:#f5f6f7;color:#aeaeae;cursor:not-allowed}.c-tabs__body{background-color:#fff;border:1px solid #e2e2e2;margin-top:-1px;padding:20px}.c-tabs__pane{display:block;border-top:none;opacity:0;height:0;overflow:hidden;padding:0 5px;-webkit-transition:all .5s ease-out;transition:all .5s ease-out}.c-tabs__pane--active{opacity:1;padding:5px;height:auto}",""])},function(e,t,n){var i;(function(e,o,r){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
	 * @version   3.2.1
	 */
(function(){"use strict";function s(e){return"function"==typeof e||"object"==typeof e&&null!==e}function a(e){return"function"==typeof e}function c(e){G=e}function l(e){ee=e}function h(){return function(){e.nextTick(v)}}function u(){return function(){Y(v)}}function f(){var e=0,t=new ie(v),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function p(){var e=new MessageChannel;return e.port1.onmessage=v,function(){e.port2.postMessage(0)}}function d(){return function(){setTimeout(v,1)}}function v(){for(var e=0;e<X;e+=2){var t=se[e],n=se[e+1];t(n),se[e]=void 0,se[e+1]=void 0}X=0}function _(){try{var e=n(220);return Y=e.runOnLoop||e.runOnContext,u()}catch(t){return d()}}function y(e,t){var n=this,i=new this.constructor(m);void 0===i[le]&&M(i);var o=n._state;if(o){var r=arguments[o-1];ee(function(){P(o,i,r,n._result)})}else j(n,i,e,t);return i}function b(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(m);return N(n,e),n}function m(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function E(){return new TypeError("A promises callback cannot return that same promise.")}function w(e){try{return e.then}catch(t){return pe.error=t,pe}}function x(e,t,n,i){try{e.call(t,n,i)}catch(o){return o}}function k(e,t,n){ee(function(e){var i=!1,o=x(n,t,function(n){i||(i=!0,t!==n?N(e,n):A(e,n))},function(t){i||(i=!0,T(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&o&&(i=!0,T(e,o))},e)}function C(e,t){t._state===ue?A(e,t._result):t._state===fe?T(e,t._result):j(t,void 0,function(t){N(e,t)},function(t){T(e,t)})}function $(e,t,n){t.constructor===e.constructor&&n===ae&&constructor.resolve===ce?C(e,t):n===pe?T(e,pe.error):void 0===n?A(e,t):a(n)?k(e,t,n):A(e,t)}function N(e,t){e===t?T(e,g()):s(t)?$(e,t,w(t)):A(e,t)}function O(e){e._onerror&&e._onerror(e._result),D(e)}function A(e,t){e._state===he&&(e._result=t,e._state=ue,0!==e._subscribers.length&&ee(D,e))}function T(e,t){e._state===he&&(e._state=fe,e._result=t,ee(O,e))}function j(e,t,n,i){var o=e._subscribers,r=o.length;e._onerror=null,o[r]=t,o[r+ue]=n,o[r+fe]=i,0===r&&e._state&&ee(D,e)}function D(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i,o,r=e._result,s=0;s<t.length;s+=3)i=t[s],o=t[s+n],i?P(n,i,o,r):o(r);e._subscribers.length=0}}function S(){this.error=null}function V(e,t){try{return e(t)}catch(n){return de.error=n,de}}function P(e,t,n,i){var o,r,s,c,l=a(n);if(l){if(o=V(n,i),o===de?(c=!0,r=o.error,o=null):s=!0,t===o)return void T(t,E())}else o=i,s=!0;t._state!==he||(l&&s?N(t,o):c?T(t,r):e===ue?A(t,o):e===fe&&T(t,o))}function R(e,t){try{t(function(t){N(e,t)},function(t){T(e,t)})}catch(n){T(e,n)}}function F(){return ve++}function M(e){e[le]=ve++,e._state=void 0,e._result=void 0,e._subscribers=[]}function I(e){return new ge(this,e).promise}function L(e){var t=this;return new t(Z(e)?function(n,i){for(var o=e.length,r=0;r<o;r++)t.resolve(e[r]).then(n,i)}:function(e,t){t(new TypeError("You must pass an array to race."))})}function H(e){var t=this,n=new t(m);return T(n,e),n}function z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function B(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(e){this[le]=F(),this._result=this._state=void 0,this._subscribers=[],m!==e&&("function"!=typeof e&&z(),this instanceof U?R(this,e):B())}function W(e,t){this._instanceConstructor=e,this.promise=new e(m),this.promise[le]||M(this.promise),Z(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&A(this.promise,this._result))):T(this.promise,q())}function q(){return new Error("Array Methods must be provided an Array")}function J(){var e;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(e.Promise=me)}var Q;Q=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y,G,K,Z=Q,X=0,ee=function(e,t){se[X]=e,se[X+1]=t,X+=2,2===X&&(G?G(v):K())},te="undefined"!=typeof window?window:void 0,ne=te||{},ie=ne.MutationObserver||ne.WebKitMutationObserver,oe="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),re="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,se=new Array(1e3);K=oe?h():ie?f():re?p():void 0===te?_():d();var ae=y,ce=b,le=Math.random().toString(36).substring(16),he=void 0,ue=1,fe=2,pe=new S,de=new S,ve=0,_e=I,ye=L,be=H,me=U;U.all=_e,U.race=ye,U.resolve=ce,U.reject=be,U._setScheduler=c,U._setAsap=l,U._asap=ee,U.prototype={constructor:U,then:ae,"catch":function(e){return this.then(null,e)}};var ge=W;W.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===he&&n<e;n++)this._eachEntry(t[n],n)},W.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===ce){var o=w(e);if(o===ae&&e._state!==he)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===me){var r=new n(m);$(r,e,o),this._willSettleAt(r,t)}else this._willSettleAt(new n(function(t){t(e)}),t)}else this._willSettleAt(i(e),t)},W.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===he&&(this._remaining--,e===fe?T(i,n):this._result[t]=n),0===this._remaining&&A(i,this._result)},W.prototype._willSettleAt=function(e,t){var n=this;j(e,void 0,function(e){n._settledAt(ue,t,e)},function(e){n._settledAt(fe,t,e)})};var Ee=J,we={Promise:me,polyfill:Ee};n(218).amd?(i=function(){return we}.call(t,n,t,r),!(void 0!==i&&(r.exports=i))):"undefined"!=typeof r&&r.exports?r.exports=we:"undefined"!=typeof this&&(this.ES6Promise=we),Ee()}).call(this),r.exports=o.Promise}).call(t,n(19),function(){return this}(),n(219)(e))},function(e,t,n){(function(t){!function(e){"use strict";function n(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function o(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return _.iterable&&(t[Symbol.iterator]=function(){return t}),t}function r(e){this.map={},e instanceof r?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(e){return e.bodyUsed?t.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new t(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function c(e){var t=new FileReader;return t.readAsArrayBuffer(e),a(t)}function l(e){var t=new FileReader;return t.readAsText(e),a(t)}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(_.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(_.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!_.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_.blob?(this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return t.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return t.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return t.resolve(this._bodyText)}):this.text=function(){var e=s(this);return e?e:t.resolve(this._bodyText)},_.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(e){var t=e.toUpperCase();return y.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var n=t.body;if(f.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new r(e.headers)),this.method=e.method,this.mode=e.mode,n||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new r(t.headers)),this.method=u(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(o))}}),t}function d(e){var t=new r,n=(e.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(e){var n=e.trim().split(":"),i=n.shift().trim(),o=n.join(":").trim();t.append(i,o)}),t}function v(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof r?t.headers:new r(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var _={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};r.prototype.append=function(e,t){e=n(e),t=i(t);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(t)},r.prototype["delete"]=function(e){delete this.map[n(e)]},r.prototype.get=function(e){var t=this.map[n(e)];return t?t[0]:null},r.prototype.getAll=function(e){return this.map[n(e)]||[]},r.prototype.has=function(e){return this.map.hasOwnProperty(n(e))},r.prototype.set=function(e,t){this.map[n(e)]=[i(t)]},r.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(i){e.call(t,i,n,this)},this)},this)},r.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),o(e)},r.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),o(e)},r.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),o(e)},_.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},h.call(f.prototype),h.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308];v.redirect=function(e,t){if(b.indexOf(t)===-1)throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=r,e.Request=f,e.Response=v,e.fetch=function(e,n){return new t(function(t,i){function o(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var r;r=f.prototype.isPrototypeOf(e)&&!n?e:new f(e,n);var s=new XMLHttpRequest;s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:d(s),url:o()},n="response"in s?s.response:s.responseText;t(new v(n,e))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.open(r.method,r.url,!0),"include"===r.credentials&&(s.withCredentials=!0),"responseType"in s&&_.blob&&(s.responseType="blob"),r.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send("undefined"==typeof r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),e.exports=self.fetch}).call(t,n(83))},function(e,t,n){e.exports=n.p+"b4de29fe43ac85ef0b66f9c7dfc474d3.png"},function(e,t,n){var i=n(6),o=n(3),r=i(o,"DataView");e.exports=r},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(118),r=n(119),s=n(120),a=n(121),c=n(122);i.prototype.clear=o,i.prototype["delete"]=r,i.prototype.get=s,i.prototype.has=a,i.prototype.set=c,e.exports=i},function(e,t,n){var i=n(6),o=n(3),r=i(o,"Promise");e.exports=r},function(e,t,n){var i=n(6),o=n(3),r=i(o,"Set");e.exports=r},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.__data__=new o;++t<n;)this.add(e[t])}var o=n(17),r=n(138),s=n(139);i.prototype.add=i.prototype.push=r,i.prototype.has=s,e.exports=i},function(e,t,n){var i=n(3),o=i.Uint8Array;e.exports=o},function(e,t,n){var i=n(6),o=n(3),r=i(o,"WeakMap");e.exports=r},function(e,t){function n(e,t,n){var i=n.length;switch(i){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t){function n(e,t){for(var n=-1,i=e?e.length:0;++n<i;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t){function n(e,t,n){if("function"!=typeof e)throw new TypeError(i);return setTimeout(function(){e.apply(void 0,n)},t)}var i="Expected a function";e.exports=n},function(e,t){function n(e,t,n,i){for(var o=e.length,r=n+(i?1:-1);i?r--:++r<o;)if(t(e[r],r,e))return r;return-1}e.exports=n},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function i(e,t,n,i,_,b){var m=l(e),g=l(t),E=d,w=d;m||(E=c(e),E=E==p?v:E),g||(w=c(t),w=w==p?v:w);var x=E==v&&!h(e),k=w==v&&!h(t),C=E==w;if(C&&!x)return b||(b=new o),m||u(e)?r(e,t,n,i,_,b):s(e,t,E,n,i,_,b);if(!(_&f)){var $=x&&y.call(e,"__wrapped__"),N=k&&y.call(t,"__wrapped__");if($||N){var O=$?e.value():e,A=N?t.value():t;return b||(b=new o),n(O,A,i,_,b)}}return!!C&&(b||(b=new o),a(e,t,n,i,_,b))}var o=n(23),r=n(30),s=n(110),a=n(111),c=n(115),l=n(4),h=n(31),u=n(154),f=2,p="[object Arguments]",d="[object Array]",v="[object Object]",_=Object.prototype,y=_.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t,n,i){var c=n.length,l=c,h=!i;if(null==e)return!l;for(e=Object(e);c--;){var u=n[c];if(h&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++c<l;){u=n[c];var f=u[0],p=e[f],d=u[1];if(h&&u[2]){if(void 0===p&&!(f in e))return!1}else{var v=new o;if(i)var _=i(p,d,f,e,t,v);if(!(void 0===_?r(d,p,i,s|a,v):_))return!1}}return!0}var o=n(23),r=n(27),s=1,a=2;e.exports=i},function(e,t,n){function i(e){if(!a(e)||s(e))return!1;var t=o(e)||r(e)?d:h;return t.test(c(e))}var o=n(18),r=n(31),s=n(125),a=n(7),c=n(35),l=/[\\^$.*+?()[\]{}|]/g,h=/^\[object .+?Constructor\]$/,u=Object.prototype,f=Function.prototype.toString,p=u.hasOwnProperty,d=RegExp("^"+f.call(p).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t,n){function i(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?a(e)?r(e[0],e[1]):o(e):c(e)}var o=n(103),r=n(104),s=n(152),a=n(4),c=n(157);e.exports=i},function(e,t){function n(e){return i(Object(e))}var i=Object.keys;e.exports=n},function(e,t,n){function i(e){var t=r(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(n){return n===e||o(n,e,t)}}var o=n(99),r=n(113),s=n(34);e.exports=i},function(e,t,n){function i(e,t){return a(e)&&c(t)?l(h(e),t):function(n){var i=r(n,e);return void 0===i&&i===t?s(n,e):o(t,i,void 0,u|f)}}var o=n(27),r=n(150),s=n(151),a=n(12),c=n(33),l=n(34),h=n(14),u=1,f=2;e.exports=i},function(e,t,n){function i(e){return function(t){return o(t,e)}}var o=n(25);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}e.exports=n},function(e,t,n){function i(e){if("string"==typeof e)return e;if(r(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}var o=n(24),r=n(16),s=1/0,a=o?o.prototype:void 0,c=a?a.toString:void 0;e.exports=i},function(e,t){function n(e){return e&&e.Object===Object?e:null}e.exports=n},function(e,t,n){var i=n(3),o=i["__core-js_shared__"];e.exports=o},function(e,t,n){function i(e,t,n,i,o,w,k){switch(n){case E:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case g:return!(e.byteLength!=t.byteLength||!i(new r(e),new r(t)));case u:case f:return+e==+t;case p:return e.name==t.name&&e.message==t.message;case v:return e!=+e?t!=+t:e==+t;case _:case b:return e==t+"";case d:var C=a;case y:var $=w&h;if(C||(C=c),e.size!=t.size&&!$)return!1;var N=k.get(e);return N?N==t:(w|=l,k.set(e,t),s(C(e),C(t),i,o,w,k));case m:if(x)return x.call(e)==x.call(t)}return!1}var o=n(24),r=n(91),s=n(30),a=n(137),c=n(140),l=1,h=2,u="[object Boolean]",f="[object Date]",p="[object Error]",d="[object Map]",v="[object Number]",_="[object RegExp]",y="[object Set]",b="[object String]",m="[object Symbol]",g="[object ArrayBuffer]",E="[object DataView]",w=o?o.prototype:void 0,x=w?w.valueOf:void 0;e.exports=i},function(e,t,n){function i(e,t,n,i,a,c){var l=a&s,h=r(e),u=h.length,f=r(t),p=f.length;if(u!=p&&!l)return!1;for(var d=u;d--;){var v=h[d];if(!(l?v in t:o(t,v)))return!1}var _=c.get(e);if(_)return _==t;var y=!0;c.set(e,t);for(var b=l;++d<u;){v=h[d];var m=e[v],g=t[v];if(i)var E=l?i(g,m,v,t,e,c):i(m,g,v,e,t,c);if(!(void 0===E?m===g||n(m,g,i,a,c):E)){y=!1;break}b||(b="constructor"==v)}if(y&&!b){var w=e.constructor,x=t.constructor;w!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x)&&(y=!1)}return c["delete"](e),y}var o=n(26),r=n(40),s=2;e.exports=i},function(e,t,n){var i=n(28),o=i("length");e.exports=o},function(e,t,n){function i(e){for(var t=r(e),n=t.length;n--;){var i=t[n],s=e[i];t[n]=[i,s,o(s)]}return t}var o=n(33),r=n(40);e.exports=i},function(e,t){function n(e){return i(Object(e))}var i=Object.getPrototypeOf;e.exports=n},function(e,t,n){function i(e){return y.call(e)}var o=n(86),r=n(22),s=n(88),a=n(89),c=n(92),l=n(35),h="[object Map]",u="[object Object]",f="[object Promise]",p="[object Set]",d="[object WeakMap]",v="[object DataView]",_=Object.prototype,y=_.toString,b=l(o),m=l(r),g=l(s),E=l(a),w=l(c);(o&&i(new o(new ArrayBuffer(1)))!=v||r&&i(new r)!=h||s&&i(s.resolve())!=f||a&&i(new a)!=p||c&&i(new c)!=d)&&(i=function(e){var t=y.call(e),n=t==u?e.constructor:void 0,i=n?l(n):void 0;if(i)switch(i){case b:return v;case m:return h;case g:return f;case E:return p;case w:return d}return t}),e.exports=i},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function i(e,t,n){t=c(t,e)?[t]:o(t);for(var i,f=-1,p=t.length;++f<p;){var d=u(t[f]);if(!(i=null!=e&&n(e,d)))break;e=e[d]}if(i)return i;var p=e?e.length:0;return!!p&&l(p)&&a(d,p)&&(s(e)||h(e)||r(e))}var o=n(29),r=n(37),s=n(4),a=n(32),c=n(12),l=n(15),h=n(39),u=n(14);e.exports=i},function(e,t,n){function i(){this.__data__=o?o(null):{}}var o=n(13);e.exports=i},function(e,t){function n(e){return this.has(e)&&delete this.__data__[e]}e.exports=n},function(e,t,n){function i(e){var t=this.__data__;if(o){var n=t[e];return n===r?void 0:n}return a.call(t,e)?t[e]:void 0}var o=n(13),r="__lodash_hash_undefined__",s=Object.prototype,a=s.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){var t=this.__data__;return o?void 0!==t[e]:s.call(t,e)}var o=n(13),r=Object.prototype,s=r.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__;return n[e]=o&&void 0===t?r:t,this}var o=n(13),r="__lodash_hash_undefined__";e.exports=i},function(e,t,n){function i(e){var t=e?e.length:void 0;return a(t)&&(s(e)||c(e)||r(e))?o(t,String):null}var o=n(106),r=n(37),s=n(4),a=n(15),c=n(39);e.exports=i},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function i(e){return!!r&&r in e}var o=n(109),r=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=i},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||i;return e===n}var i=Object.prototype;e.exports=n},function(e,t){function n(){this.__data__=[]}e.exports=n},function(e,t,n){function i(e){var t=this.__data__,n=o(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():s.call(t,n,1),!0}var o=n(10),r=Array.prototype,s=r.splice;e.exports=i},function(e,t,n){function i(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]}var o=n(10);e.exports=i},function(e,t,n){function i(e){return o(this.__data__,e)>-1}var o=n(10);e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__,i=o(n,e);return i<0?n.push([e,t]):n[i][1]=t,this}var o=n(10);e.exports=i},function(e,t,n){function i(){this.__data__={hash:new o,map:new(s||r),string:new o}}var o=n(87),r=n(9),s=n(22);e.exports=i},function(e,t,n){function i(e){return o(this,e)["delete"](e)}var o=n(11);e.exports=i},function(e,t,n){function i(e){return o(this,e).get(e)}var o=n(11);e.exports=i},function(e,t,n){function i(e){return o(this,e).has(e)}var o=n(11);e.exports=i},function(e,t,n){function i(e,t){return o(this,e).set(e,t),this}var o=n(11);e.exports=i},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}e.exports=n},function(e,t){function n(e){return this.__data__.set(e,i),this}var i="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function i(){this.__data__=new o}var o=n(9);e.exports=i},function(e,t){function n(e){return this.__data__["delete"](e)}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function i(e,t){var n=this.__data__;return n instanceof o&&n.__data__.length==s&&(n=this.__data__=new r(n.__data__)),n.set(e,t),this}var o=n(9),r=n(17),s=200;e.exports=i},function(e,t,n){var i=n(155),o=n(160),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(\.|\[\])(?:\4|$))/g,s=/\\(\\)?/g,a=i(function(e){var t=[];return o(e).replace(r,function(e,n,i,o){t.push(i?o.replace(s,"$1"):n||e)}),t});e.exports=a},function(e,t,n){function i(e,t,n){function i(t){var n=b,i=m;return b=m=void 0,k=t,E=e.apply(i,n)}function h(e){return k=e,w=setTimeout(p,t),C?i(e):E}function u(e){var n=e-x,i=e-k,o=t-n;return $?l(o,g-i):o}function f(e){var n=e-x,i=e-k;return void 0===x||n>=t||n<0||$&&i>=g}function p(){var e=r();return f(e)?d(e):void(w=setTimeout(p,u(e)))}function d(e){return w=void 0,N&&b?i(e):(b=m=void 0,E)}function v(){k=0,b=x=m=w=void 0}function _(){return void 0===w?E:d(r())}function y(){var e=r(),n=f(e);if(b=arguments,m=this,x=e,n){if(void 0===w)return h(x);if($)return w=setTimeout(p,t),i(x)}return void 0===w&&(w=setTimeout(p,t)),E}var b,m,g,E,w,x,k=0,C=!1,$=!1,N=!0;if("function"!=typeof e)throw new TypeError(a);return t=s(t)||0,o(n)&&(C=!!n.leading,$="maxWait"in n,g=$?c(s(n.maxWait)||0,t):g,N="trailing"in n?!!n.trailing:N),y.cancel=v,y.flush=_,y}var o=n(7),r=n(156),s=n(42),a="Expected a function",c=Math.max,l=Math.min;e.exports=i},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function i(e,t,n){var i=e?e.length:0;if(!i)return-1;var c=null==n?0:s(n);return c<0&&(c=a(i+c,0)),o(e,r(t,3),c)}var o=n(96),r=n(101),s=n(41),a=Math.max;e.exports=i},function(e,t,n){function i(e,t,n){var i=null==e?void 0:o(e,t);return void 0===i?n:i}var o=n(25);e.exports=i},function(e,t,n){function i(e,t){return null!=e&&r(e,t,o)}var o=n(97),r=n(117);e.exports=i},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function i(e){return r(e)&&o(e)}var o=n(38),r=n(8);e.exports=i},function(e,t,n){function i(e){return r(e)&&o(e.length)&&!!T[D.call(e)]}var o=n(15),r=n(8),s="[object Arguments]",a="[object Array]",c="[object Boolean]",l="[object Date]",h="[object Error]",u="[object Function]",f="[object Map]",p="[object Number]",d="[object Object]",v="[object RegExp]",_="[object Set]",y="[object String]",b="[object WeakMap]",m="[object ArrayBuffer]",g="[object DataView]",E="[object Float32Array]",w="[object Float64Array]",x="[object Int8Array]",k="[object Int16Array]",C="[object Int32Array]",$="[object Uint8Array]",N="[object Uint8ClampedArray]",O="[object Uint16Array]",A="[object Uint32Array]",T={};T[E]=T[w]=T[x]=T[k]=T[C]=T[$]=T[N]=T[O]=T[A]=!0,T[s]=T[a]=T[m]=T[c]=T[g]=T[l]=T[h]=T[u]=T[f]=T[p]=T[d]=T[v]=T[_]=T[y]=T[b]=!1;var j=Object.prototype,D=j.toString;e.exports=i},function(e,t,n){function i(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(r);var n=function(){var i=arguments,o=t?t.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var s=e.apply(this,i);return n.cache=r.set(o,s),s};return n.cache=new(i.Cache||o),n}var o=n(17),r="Expected a function";i.Cache=o,e.exports=i},function(e,t){function n(){return Date.now()}e.exports=n},function(e,t,n){function i(e){return s(e)?o(a(e)):r(e)}var o=n(28),r=n(105),s=n(12),a=n(14);e.exports=i},function(e,t,n){function i(e,t){if("function"!=typeof e)throw new TypeError(s);return t=a(void 0===t?e.length-1:r(t),0),function(){for(var n=arguments,i=-1,r=a(n.length-t,0),s=Array(r);++i<r;)s[i]=n[t+i];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}var c=Array(t+1);for(i=-1;++i<t;)c[i]=n[i];return c[t]=s,o(e,this,c)}}var o=n(93),r=n(41),s="Expected a function",a=Math.max;e.exports=i},function(e,t,n){function i(e){if(!e)return 0===e?e:0;if(e=o(e),e===r||e===-r){var t=e<0?-1:1;return t*s}return e===e?e:0}var o=n(42),r=1/0,s=1.7976931348623157e308;e.exports=i},function(e,t,n){function i(e){return null==e?"":o(e)}var o=n(107);e.exports=i},function(e,t){(function(t){var n="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},i=function(){var e=/\blang(?:uage)?-(\w+)\b/i,t=0,i=n.Prism={util:{encode:function(e){return e instanceof o?new o(e.type,i.util.encode(e.content),e.alias):"Array"===i.util.type(e)?e.map(i.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function(e){var t=i.util.type(e);switch(t){case"Object":var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=i.util.clone(e[o]));return n;case"Array":return e.map&&e.map(function(e){return i.util.clone(e)})}return e}},languages:{extend:function(e,t){var n=i.util.clone(i.languages[e]);for(var o in t)n[o]=t[o];return n},insertBefore:function(e,t,n,o){o=o||i.languages;var r=o[e];if(2==arguments.length){n=arguments[1];for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s]);return r}var a={};for(var c in r)if(r.hasOwnProperty(c)){if(c==t)for(var s in n)n.hasOwnProperty(s)&&(a[s]=n[s]);a[c]=r[c]}return i.languages.DFS(i.languages,function(t,n){n===o[e]&&t!=e&&(this[t]=a)}),o[e]=a},DFS:function(e,t,n,o){o=o||{};for(var r in e)e.hasOwnProperty(r)&&(t.call(e,r,e[r],n||r),"Object"!==i.util.type(e[r])||o[i.util.objId(e[r])]?"Array"!==i.util.type(e[r])||o[i.util.objId(e[r])]||(o[i.util.objId(e[r])]=!0,i.languages.DFS(e[r],t,r,o)):(o[i.util.objId(e[r])]=!0,i.languages.DFS(e[r],t,null,o)))}},plugins:{},highlightAll:function(e,t){var n={callback:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",n);for(var o,r=n.elements||document.querySelectorAll(n.selector),s=0;o=r[s++];)i.highlightElement(o,e===!0,n.callback)},highlightElement:function(t,o,r){for(var s,a,c=t;c&&!e.test(c.className);)c=c.parentNode;c&&(s=(c.className.match(e)||[,""])[1].toLowerCase(),a=i.languages[s]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+s,c=t.parentNode,/pre/i.test(c.nodeName)&&(c.className=c.className.replace(e,"").replace(/\s+/g," ")+" language-"+s);var l=t.textContent,h={element:t,language:s,grammar:a,code:l};if(i.hooks.run("before-sanity-check",h),!h.code||!h.grammar)return void i.hooks.run("complete",h);if(i.hooks.run("before-highlight",h),o&&n.Worker){var u=new Worker(i.filename);u.onmessage=function(e){h.highlightedCode=e.data,i.hooks.run("before-insert",h),h.element.innerHTML=h.highlightedCode,r&&r.call(h.element),i.hooks.run("after-highlight",h),i.hooks.run("complete",h)},u.postMessage(JSON.stringify({language:h.language,code:h.code,immediateClose:!0}))}else h.highlightedCode=i.highlight(h.code,h.grammar,h.language),i.hooks.run("before-insert",h),h.element.innerHTML=h.highlightedCode,r&&r.call(t),i.hooks.run("after-highlight",h),i.hooks.run("complete",h)},highlight:function(e,t,n){var r=i.tokenize(e,t);return o.stringify(i.util.encode(r),n)},tokenize:function(e,t,n){var o=i.Token,r=[e],s=t.rest;if(s){for(var a in s)t[a]=s[a];delete t.rest}e:for(var a in t)if(t.hasOwnProperty(a)&&t[a]){var c=t[a];c="Array"===i.util.type(c)?c:[c];for(var l=0;l<c.length;++l){var h=c[l],u=h.inside,f=!!h.lookbehind,p=!!h.greedy,d=0,v=h.alias;h=h.pattern||h;for(var _=0;_<r.length;_++){var y=r[_];if(r.length>e.length)break e;if(!(y instanceof o)){h.lastIndex=0;var b=h.exec(y),m=1;if(!b&&p&&_!=r.length-1){var g=r[_+1].matchedStr||r[_+1],E=y+g;if(_<r.length-2&&(E+=r[_+2].matchedStr||r[_+2]),h.lastIndex=0,b=h.exec(E),!b)continue;var w=b.index+(f?b[1].length:0);if(w>=y.length)continue;var x=b.index+b[0].length,k=y.length+g.length;if(m=3,x<=k){if(r[_+1].greedy)continue;m=2,E=E.slice(0,k)}y=E}if(b){f&&(d=b[1].length);var w=b.index+d,b=b[0].slice(d),x=w+b.length,C=y.slice(0,w),$=y.slice(x),N=[_,m];C&&N.push(C);var O=new o(a,u?i.tokenize(b,u):b,v,b,p);N.push(O),$&&N.push($),Array.prototype.splice.apply(r,N)}}}}}return r},hooks:{all:{},add:function(e,t){var n=i.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=i.hooks.all[e];if(n&&n.length)for(var o,r=0;o=n[r++];)o(t)}}},o=i.Token=function(e,t,n,i,o){this.type=e,this.content=t,this.alias=n,this.matchedStr=i||null,this.greedy=!!o};if(o.stringify=function(e,t,n){if("string"==typeof e)return e;if("Array"===i.util.type(e))return e.map(function(n){return o.stringify(n,t,e)}).join("");var r={type:e.type,content:o.stringify(e.content,t,n),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:n};if("comment"==r.type&&(r.attributes.spellcheck="true"),e.alias){var s="Array"===i.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(r.classes,s)}i.hooks.run("wrap",r);var a="";for(var c in r.attributes)a+=(a?" ":"")+c+'="'+(r.attributes[c]||"")+'"';return"<"+r.tag+' class="'+r.classes.join(" ")+'" '+a+">"+r.content+"</"+r.tag+">"},!n.document)return n.addEventListener?(n.addEventListener("message",function(e){var t=JSON.parse(e.data),o=t.language,r=t.code,s=t.immediateClose;n.postMessage(i.highlight(r,i.languages[o],o)),s&&n.close()},!1),n.Prism):n.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return r&&(i.filename=r.src,document.addEventListener&&!r.hasAttribute("data-manual")&&("loading"!==document.readyState?requestAnimationFrame(i.highlightAll,0):document.addEventListener("DOMContentLoaded",i.highlightAll))),n.Prism}();"undefined"!=typeof e&&e.exports&&(e.exports=i),
"undefined"!=typeof t&&(t.Prism=i),i.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=.$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},i.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),i.languages.xml=i.languages.markup,i.languages.html=i.languages.markup,i.languages.mathml=i.languages.markup,i.languages.svg=i.languages.markup,i.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,"function":/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},i.languages.css.atrule.inside.rest=i.util.clone(i.languages.css),i.languages.markup&&(i.languages.insertBefore("markup","tag",{style:{pattern:/(<style[\w\W]*?>)[\w\W]*?(?=<\/style>)/i,lookbehind:!0,inside:i.languages.css,alias:"language-css"}}),i.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:i.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:i.languages.css}},alias:"language-css"}},i.languages.markup.tag)),i.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,"boolean":/\b(true|false)\b/,"function":/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},i.languages.javascript=i.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,"function":/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),i.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}}),i.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\\\|\\?[^\\])*?`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:i.languages.javascript}},string:/[\s\S]+/}}}),i.languages.markup&&i.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\w\W]*?>)[\w\W]*?(?=<\/script>)/i,lookbehind:!0,inside:i.languages.javascript,alias:"language-javascript"}}),i.languages.js=i.languages.javascript,function(){"undefined"!=typeof self&&self.Prism&&self.document&&document.querySelector&&(self.Prism.fileHighlight=function(){var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"};Array.prototype.forEach&&Array.prototype.slice.call(document.querySelectorAll("pre[data-src]")).forEach(function(t){for(var n,o=t.getAttribute("data-src"),r=t,s=/\blang(?:uage)?-(?!\*)(\w+)\b/i;r&&!s.test(r.className);)r=r.parentNode;if(r&&(n=(t.className.match(s)||[,""])[1]),!n){var a=(o.match(/\.(\w+)$/)||[,""])[1];n=e[a]||a}var c=document.createElement("code");c.className="language-"+n,t.textContent="",c.textContent="Loading…",t.appendChild(c);var l=new XMLHttpRequest;l.open("GET",o,!0),l.onreadystatechange=function(){4==l.readyState&&(l.status<400&&l.responseText?(c.textContent=l.responseText,i.highlightElement(c)):l.status>=400?c.textContent="✖ Error "+l.status+" while fetching file: "+l.statusText:c.textContent="✖ Error: File does not exist or is empty")},l.send(null)})},document.addEventListener("DOMContentLoaded",self.Prism.fileHighlight))}()}).call(t,function(){return this}())},function(e,t){e.exports='<table class=sg_c-api-table> <tr> <th> Name </th> <th> Type </th> <th> Required </th> <th> Default </th> <th> Description </th> </tr> <tr v-for="item in items"> <td>{{item.name}}</td> <td>{{item.type}}</td> <td>{{item.isRequired}}</td> <td>{{item.default}}</td> <td>{{item.desc}}</td> </tr> </table> '},function(e,t){e.exports="<nav class=\"sg_c-nav hy_u-hide hy_u-show@md\"> <h2 class=sg_c-nav__section>COMPONENTS</h2> <ul class=hy_o-list @click=hideNav> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/', activeClass: 'sg_c-nav__link--active'}\"> Get Started </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/alert', activeClass: 'sg_c-nav__link--active'}\"> Alert </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/spinner', activeClass: 'sg_c-nav__link--active'}\"> Spinner </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/step-tracker', activeClass: 'sg_c-nav__link--active'}\"> Step Tracker </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/tabs', activeClass: 'sg_c-nav__link--active'}\"> Tabs </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/overlay', activeClass: 'sg_c-nav__link--active'}\"> Overlay </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/legal', activeClass: 'sg_c-nav__link--active'}\"> Legal </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/collapsable-panel', activeClass: 'sg_c-nav__link--active'}\"> Collapsable Panel </a> </li> </ul> <h2 class=sg_c-nav__section>DIRECTIVES</h2> <ul class=hy_o-list> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/overlay-opener', activeClass: 'sg_c-nav__link--active'}\"> Overlay Opener </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/set-focus', activeClass: 'sg_c-nav__link--active'}\"> Set Focus </a> </li> </ul> </nav> "},function(e,t,n){e.exports='<header class=sg_c-site-header> <div class=sg_c-site-header__container> <button @click=toggleNav class="hy_u-hide@md js-active sg_c-site-header__togglebtn" type=button role=button> <span class=""><i class="hy_c-icon hy_c-icon--hamburger"></i></span> </button> <a href=/ > <img class=logo src='+n(85)+" alt=Logo> </a> </div> </header> "},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Alert</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <alert type=error>This is an error alert.</alert> <alert type=info>This is an info alert.</alert> <alert type=success>This is a success alert.</alert> <alert type=success :dismissible=false>This is not a dismissible alert.</alert> <alert type=success :on-closed=dismissCallBack>This is an alert with callback.</alert> <alert type=info :timeout=5000>This alert should timeout in 5 seconds.</alert> </div> <collapsable-panel label=HTML> <pre>\n             <code class=language-html>\n&lt;alert type="error"&gt;This is an error alert.&lt;/alert&gt;\n&lt;alert type="info"&gt;This is an info alert.&lt;/alert&gt;\n&lt;alert type="success"&gt;This is a success alert.&lt;/alert&gt;\n&lt;alert type="success" :dismissible="false"&gt;This is not a dismissible alert.&lt;/alert&gt;\n&lt;alert type="success" :on-closed="dismissCallBack"&gt;This is an alert with callback.&lt;/alert&gt;\n&lt;alert type="success" :timeout="5000"&gt;This alert should timeout in 5 seconds.&lt;/alert&gt;\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Collapsable Panel</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <collapsable-panel label="Panel 1" :is-open=true> Panel 1 content </collapsable-panel> <collapsable-panel label="Panel 2"> Panel 2 content </collapsable-panel> </div> <collapsable-panel label=HTML> <pre>\n             <code class=language-html>\n&lt;collapsable-panel label="Panel 1" :is-open="true"&gt;\n Panel 1 content\n&lt;/collapsable-panel&gt;\n&lt;collapsable-panel label="Panel 2"&gt;\n Panel 2 content\n&lt;/collapsable-panel&gt;\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Getting Started</h2> <hr class=hy_u-space-mb-2> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <h3 class="hy_c-headline hy_c-headline--5 hy_t-grey">CDN</h3> <p> ... </p> </div> </div></section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Legal System</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <p class="hy_c-copy hy_c-copy--body hy_t-grey"> Lorem ipsum<legal-counter v-overlay-opener=legal-overlay legal-key=hs-referral-terms legal-lang=en legal-region=bc></legal-counter> dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. <legal-counter v-overlay-opener=legal-overlay legal-key=1-year-offer-stim legal-lang=en legal-region=bc></legal-counter> </p> </div> <div class=sg_c-demo__container> <legal-container></legal-container> </div> <collapsable-panel label=HTML> <pre>\n             <code class=language-html>\n&lt;legal-counter\n  legal-key="hs-referral-terms"\n  legal-lang="en"\n  legal-region="bc"\n&lt;/legal-counter&gt;\n&lt;legal-container&gt;&lt;/legal-container&gt;\n             </code>\n           </pre> </collapsable-panel> <collapsable-panel label=javascript> <pre>\n             <code class=language-javascript>\nlet vm = new Vue({\n el: \'body\',\n data() {\n   return {\n     ligerEndPoint: \'https://api.cms.telus.com/legals\',\n     ligerApplicationKey: \'b9738d67b89dfc782746d4a9cf4a1093\'\n   };\n },\n components: {\n   LegalCounter,\n   LegalContainer\n }\n});\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API: Legal Counter</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Overlay System</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <p> <button v-overlay-opener=overlay-1 class="hy_c-button hy_c-button--link hy_t-purple" type=button role=button> Open overlay #1 <i class="hy_c-icon hy_c-icon--arrow-right-circled hy_c-button__icon"></i> </button> </p> <p> <button v-overlay-opener=overlay-2 class="hy_c-button hy_c-button--link hy_t-purple" type=button role=button> Open overlay #2 <i class="hy_c-icon hy_c-icon--arrow-right-circled hy_c-button__icon"></i> </button> </p> <overlay-container> <overlay overlay-key=overlay-1> <h4 class="hy_c-headline hy_c-headline--h4" slot=overlay-header>This is overlay #1</h4> <article slot=overlay-body> Overlay #1 body </article> </overlay> <overlay overlay-key=overlay-2> <h4 class="hy_c-headline hy_c-headline--h4" slot=overlay-header>This is overlay #2</h4> <article slot=overlay-body> Overlay #2 body </article> </overlay> </overlay-container> </div> <collapsable-panel label=HTML> <pre>\n             <code class=language-html>\n&lt;overlay-container&gt;\n &lt;overlay overlay-key="overlay-1"&gt;\n   &lt;h4  class="hy_c-headline hy_c-headline--h4" slot="overlay-header"&gt;\n   This is overlay #1\n   &lt;/h4&gt;\n   &lt;article slot="overlay-body"&gt;\n     Overlay #1 body\n   &lt;/article&gt;\n &lt;/overlay&gt;\n &lt;overlay overlay-key="overlay-2"&gt;\n   &lt;h4  class="hy_c-headline hy_c-headline--h4" slot="overlay-header"&gt;\n   This is overlay #1\n   &lt;/h4&gt;\n   &lt;article slot="overlay-body"&gt;\n     Overlay #2 body\n   &lt;/article&gt;\n &lt;/overlay&gt;\n&lt;/overlay-container&gt;\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Spinner</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <label class="hy_c-control hy_c-control--checkbox"> <span class=hy_c-control__label-text>Full Screen</span> <input type=checkbox v-model=isFullScreen /> <div class=hy_c-control__indicator></div> </label> <button @click=showSpinner class="hy_c-button hy_c-button--raised hy_t-green" type=button> Show Spinner </button> <spinner :full-screen=isFullScreen :text=msg></spinner> </div> <collapsable-panel label=HTML> <pre>\n             <code class=language-html>\n&lt;spinner text="I will close in 3 seconds" :full-screen="true"&gt;&lt;/spinner&gt;\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=" <section class=\"hy_c-module hy_t-grey\"> <div class=hy_o-wrapper> <h2 class=\"hy_c-headline hy_c-headline--h4 hy_t-grey\">Step Tracker</h2> <hr class=hy_u-space-mb-2> <div class=\"sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed\"> <div class=sg_c-demo__container> <step-tracker :current-step=stepTrackerCurrentStep :config=stepTrackerConfig></step-tracker> </div> <collapsable-panel label=HTML> <pre>\n         <code class=language-html>\n&lt;step-tracker\n:current-step=\"stepTrackerCurrentStep\"\n:config=\"stepTrackerConfig\"&gt;\n&lt;/step-tracker&gt;\n         </code>\n       </pre> </collapsable-panel> <collapsable-panel label=javascript> <pre>\n             <code class=language-js>\nlet stepTrackerCurrentStep = 2;\nlet stepTrackerConfig = {\n  isClickable: true,\n  steps: [\n    {\n      title: 'Step A',\n      link: '',\n      onClickHandler: (event) => {\n        this.stepTrackerCurrentStep = 0;\n      }\n    }, {\n      title: 'Step B',\n      link: '',\n      onClickHandler: (event) => {\n        this.stepTrackerCurrentStep = 1;\n      }\n    }, {\n      title: 'Step C',\n      link: '',\n      onClickHandler: (event) => {\n        this.stepTrackerCurrentStep = 2;\n      }\n    }\n  ]\n};\nlet vm = new Vue({\n  el: 'body',\n  data: {\n    stepTrackerConfig,\n    stepTrackerCurrentStep\n},\n  components: {\n    StepTracker\n  }\n});\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class=\"hy_c-headline hy_c-headline--h5 hy_t-grey\">API</h3> <div class=\"hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed\"> <api-table :items=apiItems></api-table> </div> </div> </section> "},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Tab</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <tabs> <tab label="Tab 1"> <p> Tab 1 content </p> </tab> <tab label="Tab 2"> <p> Tab 2 content </p> </tab> <tab label="Tab 3" :is-disabled=true> <p> Tab 3 content </p> </tab> </tabs> </div> <collapsable-panel label=HTML> <pre>\n             <code class=language-html>\n&lt;tabs&gt;\n &lt;tab label="Tab 1"&gt;\n   &lt;p&gt;\n     Tab 1 content\n   &lt;/p&gt;\n &lt;/tab&gt;\n &lt;tab label="Tab 2"&gt;\n   &lt;p&gt;\n     Tab 2 content\n   &lt;/p&gt;\n &lt;/tab&gt;\n &lt;tab label="Tab 3" :is-disabled="true"&gt;\n   &lt;p&gt;\n     Tab 3 content\n   &lt;/p&gt;\n &lt;/tab&gt;\n&lt;/tabs&gt;\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports="<div v-if=isVisible transition=fade class=c-alert :class=\"'c-alert--' + type\" :class=\"{ 'c-alert--dismissible': dismissible }\" role=alert> <button v-if=dismissible @click=dismiss type=button class=c-alert__close-button aria-label=Close> <span aria-hidden=true>&times;</span> <span class=hy_u-invisible>Close</span> </button> <slot></slot> </div> "},function(e,t){e.exports='<div class=c-collapsable-panel> <h3 @click.prevent=toggleOpen :class="{\n      \'c-collapsable-panel__header--open\': isOpen\n    }" class="c-collapsable-panel__header hy_c-headline hy_c-headline--h5 hy_t-grey" v-html=label> </h3> <div class=c-collapsable-panel__body :class="{\n    \'c-collapsable-panel__body--open\': isOpen\n  }"> <slot></slot> </div> </div> '},function(e,t){e.exports='<div class=c-legal-container> <ol class=c-legal-container__ordered-list> <li v-set-focus=legal.isSelected class=c-legal-container__list-item :class="{\n      \'c-legal-container__list-item--active\': legal.isSelected\n    }" v-for="legal in indexedLegals" v-html=legal.content> </li> </ol> <ul class=c-legal-container__unordered-list> <li class=c-legal-container__list-item v-for="legal in nonIndexedLegals" v-html=legal.content> </li> </ul> </div> '},function(e,t){e.exports="<sup class=c-legal-sup> <a href=# @click.prevent=clickHandler> {{legalCounter}} </a> </sup> "},function(e,t){e.exports='<div class=c-overlay-container> <div class=c-overlay-container__curtain :class="{\n        \'c-overlay-container__curtain--active\': isVisible\n    }" @click.prevent="isVisible=false"> </div> <div class=c-overlay-container__overlays :class="{\n        \'c-overlay-container__overlays--active\': isVisible\n    }"> <slot></slot> </div> </div> '},function(e,t){e.exports="<article class=c-overlay v-show=isVisible> <div class=c-overlay__body> <slot name=overlay-body></slot> </div> <header class=c-overlay__header> <slot name=overlay-header></slot> <button type=button class=c-overlay__close-button aria-label=Close tabindex=0 @click.prevent=closeOverlay></button> </header> </article> "},function(e,t){e.exports='<div v-show=active class=c-spinner :class="{ \'c-spinner--fullscreen\': fullScreen }"> <svg viewBox="0 0 100 100" width=0 height=0> <circle stroke-width=4 fill=none stroke-linecap=round stroke-dashoffset=0 cx=50 cy=50 r=20></circle> </svg> <p class="c-spinner__text hy_c-copy hy_u-font-weight--medium" v-if=!!text>{{text}}</p> </div> '},function(e,t){e.exports='<ul class=c-step-tracker> <li class=c-step-tracker__step :class="{\n      \'c-step-tracker__step--complete\': currentStep > $index,\n      \'c-step-tracker__step--active\': currentStep === $index,\n      \'c-step-tracker__setp--clickable\': (currentStep > $index && config.isClickable)\n  }" v-for="step in config.steps"> <a :href="step.link || false" @click="clickHandler($event, step, $index)" v-if=config.isClickable> <span class=c-step-tracker__icon></span> <span class=c-step-tracker__label>{{$index + 1}}. {{step.title}}</span> </a> <span v-else class=c-step-tracker__icon></span> <span v-else class=c-step-tracker__label>{{$index + 1}}. {{step.title}}</span> </li> </ul> '},function(e,t){e.exports="<div class=c-tabs__pane :class=\"{\n    'c-tabs__pane--active': isVisible\n  }\"> <slot></slot> </div> "},function(e,t){e.exports='<div class=c-tabs> <ul class=c-tabs__header> <li v-for="tab in tabs" class=c-tabs__header-item :class="{\n                \'c-tabs__header-item--active\': ($index === activeTabIndex),\n                \'c-tabs__header-item--disabled\': tab.isDisabled\n              }" :disabled=tab.disabled> <a href=# @click.prevent="handleTabListClick($index, tab)" v-html=tab.label></a> </li> </ul> <div class=c-tabs__body> <slot></slot> </div> </div> '},function(e,t,n){var i,o;n(205),i=n(45),o=n(163),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(206),i=n(46),o=n(164),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(47),o=n(165),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(48),o=n(166),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(207),i=n(49),o=n(167),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(50),o=n(168),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(51),o=n(169),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(52),o=n(170),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(53),o=n(171),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(54),o=n(172),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(208),i=n(55),o=n(173),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(209),i=n(56),o=n(174),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(210),i=n(57),o=n(175),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(211),i=n(58),o=n(176),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(212),i=n(59),o=n(177),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(213),i=n(60),o=n(178),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(214),i=n(61),o=n(179),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(215),i=n(62),o=n(180),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(63),o=n(181),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(216),i=n(64),o=n(182),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){/*!
	 * vue-router v0.7.13
	 * (c) 2016 Evan You
	 * Released under the MIT License.
	 */
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t,n){this.path=e,this.matcher=t,this.delegate=n}function t(e){this.routes={},this.children={},this.target=e}function n(t,i,o){return function(r,s){var a=t+r;return s?void s(n(a,i,o)):new e(t+r,i,o)}}function i(e,t,n){for(var i=0,o=0,r=e.length;o<r;o++)i+=e[o].path.length;t=t.substr(i);var s={path:t,handler:n};e.push(s)}function o(e,t,n,r){var s=t.routes;for(var a in s)if(s.hasOwnProperty(a)){var c=e.slice();i(c,a,s[a]),t.children[a]?o(c,t.children[a],n,r):n.call(r,c)}}function r(e,i){var r=new t;e(n("",r,this.delegate)),o([],r,function(e){i?i(this,e):this.add(e)},this)}function s(e){W||"undefined"==typeof console||console.error("[vue-router] "+e)}function a(e,t){try{return t?decodeURIComponent(e):decodeURI(e)}catch(n){s("malformed URI"+(t?" component: ":": ")+e)}}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function l(e){this.string=e}function h(e){this.name=e}function u(e){this.name=e}function f(){}function p(e,t,n){"/"===e.charAt(0)&&(e=e.substr(1));var i=e.split("/"),o=[];n.val="";for(var r=0,s=i.length;r<s;r++){var a,c=i[r];(a=c.match(/^:([^\/]+)$/))?(o.push(new h(a[1])),t.push(a[1]),n.val+="3"):(a=c.match(/^\*([^\/]+)$/))?(o.push(new u(a[1])),n.val+="2",t.push(a[1])):""===c?(o.push(new f),n.val+="1"):(o.push(new l(c)),n.val+="4")}return n.val=+n.val,o}function d(e){this.charSpec=e,this.nextStates=[]}function v(e){return e.sort(function(e,t){return t.specificity.val-e.specificity.val})}function _(e,t){for(var n=[],i=0,o=e.length;i<o;i++){var r=e[i];n=n.concat(r.match(t))}return n}function y(e){this.queryParams=e||{}}function b(e,t,n){for(var i=e.handlers,o=e.regex,r=t.match(o),s=1,a=new y(n),c=0,l=i.length;c<l;c++){for(var h=i[c],u=h.names,f={},p=0,d=u.length;p<d;p++)f[u[p]]=r[s++];a.push({handler:h.handler,params:f,isDynamic:!!u.length})}return a}function m(e,t){return t.eachChar(function(t){e=e.put(t)}),e}function g(e){return e=e.replace(/\+/gm,"%20"),a(e,!0)}function E(e){"undefined"!=typeof console&&console.error("[vue-router] "+e)}function w(e,t,n){var i=e.match(/(\?.*)$/);if(i&&(i=i[1],e=e.slice(0,-i.length)),"?"===t.charAt(0))return e+t;var o=e.split("/");n&&o[o.length-1]||o.pop();for(var r=t.replace(/^\//,"").split("/"),s=0;s<r.length;s++){var a=r[s];"."!==a&&(".."===a?o.pop():o.push(a))}return""!==o[0]&&o.unshift(""),o.join("/")}function x(e){return e&&"function"==typeof e.then}function k(e,t){var n=e&&(e.$options||e.options);return n&&n.route&&n.route[t]}function C(e,t){G?G.$options.components._=e.component:G={resolve:Y.Vue.prototype._resolveComponent,$options:{components:{_:e.component}}},G.resolve("_",function(n){e.component=n,t(n)})}function $(e,t,n){return void 0===t&&(t={}),e=e.replace(/:([^\/]+)/g,function(n,i){var o=t[i];return o||E('param "'+i+'" not found when generating path for "'+e+'" with params '+JSON.stringify(t)),o||""}),n&&(e+=Q(n)),e}function N(e,t,n){var i=e.childVM;if(!i||!t)return!1;if(e.Component!==t.component)return!1;var o=k(i,"canReuse");return"boolean"==typeof o?o:!o||o.call(i,{to:n.to,from:n.from})}function O(e,t,n){var i=e.childVM,o=k(i,"canDeactivate");o?t.callHook(o,i,n,{expectBoolean:!0}):n()}function A(e,t,n){C(e,function(e){if(!t.aborted){var i=k(e,"canActivate");i?t.callHook(i,null,n,{expectBoolean:!0}):n()}})}function T(e,t,n){var i=e.childVM,o=k(i,"deactivate");o?t.callHooks(o,i,n):n()}function j(e,t,n,i,o){var r=t.activateQueue[n];if(!r)return V(e),e._bound&&e.setComponent(null),void(i&&i());var s=e.Component=r.component,a=k(s,"activate"),c=k(s,"data"),l=k(s,"waitForData");e.depth=n,e.activated=!1;var h=void 0,u=!(!c||l);if(o=o&&e.childVM&&e.childVM.constructor===s)h=e.childVM,h.$loadingRouteData=u;else if(V(e),e.unbuild(!0),h=e.build({_meta:{$loadingRouteData:u},created:function(){this._routerView=e}}),e.keepAlive){h.$loadingRouteData=u;var f=h._keepAliveRouterView;f&&(e.childView=f,h._keepAliveRouterView=null)}var p=function(){h.$destroy()},d=function(){if(o)return void(i&&i());var n=t.router;n._rendered||n._transitionOnLoad?e.transition(h):(e.setCurrent?e.setCurrent(h):e.childVM=h,h.$before(e.anchor,null,!1)),i&&i()},v=function(){e.childView&&j(e.childView,t,n+1,null,o||e.keepAlive),d()},_=function(){e.activated=!0,c&&l?S(h,t,c,v,p):(c&&S(h,t,c),v())};a?t.callHooks(a,h,_,{cleanup:p,postActivate:!0}):_()}function D(e,t){var n=e.childVM,i=k(n,"data");i&&S(n,t,i)}function S(e,t,n,i,o){e.$loadingRouteData=!0,t.callHooks(n,e,function(){e.$loadingRouteData=!1,e.$emit("route-data-loaded",e),i&&i()},{cleanup:o,postActivate:!0,processData:function(t){var n=[];if(P(t)&&Object.keys(t).forEach(function(i){var o=t[i];x(o)?n.push(o.then(function(t){e.$set(i,t)})):e.$set(i,o)}),n.length)return n[0].constructor.all(n)}})}function V(e){e.keepAlive&&e.childVM&&e.childView&&(e.childVM._keepAliveRouterView=e.childView),e.childView=null}function P(e){return"[object Object]"===Object.prototype.toString.call(e)}function R(e){return"[object Object]"===Object.prototype.toString.call(e)}function F(e){return e?Array.prototype.slice.call(e):[]}function M(e){var t=e.util,n=t.extend,i=t.isArray,o=t.defineReactive,r=e.prototype._init;e.prototype._init=function(e){e=e||{};var t=e._parent||e.parent||this,n=t.$router,i=t.$route;n&&(this.$router=n,n._children.push(this),this._defineMeta?this._defineMeta("$route",i):o(this,"$route",i)),r.call(this,e)};var s=e.prototype._destroy;e.prototype._destroy=function(){!this._isBeingDestroyed&&this.$router&&this.$router._children.$remove(this),s.apply(this,arguments)};var a=e.config.optionMergeStrategies,c=/^(data|activate|deactivate)$/;a&&(a.route=function(e,t){if(!t)return e;if(!e)return t;var o={};n(o,e);for(var r in t){var s=o[r],a=t[r];s&&c.test(r)?o[r]=(i(s)?s:[s]).concat(a):o[r]=a}return o})}function I(e){var t=e.util,n=e.directive("_component")||e.internalDirectives.component,i=t.extend({},n);t.extend(i,{_isRouterView:!0,bind:function(){var e=this.vm.$route;if(!e)return void E("<router-view> can only be used inside a router-enabled app.");this._isDynamicLiteral=!0,n.bind.call(this);for(var t=void 0,i=this.vm;i;){if(i._routerView){t=i._routerView;break}i=i.$parent}if(t)this.parentView=t,t.childView=this;else{var o=e.router;o._rootView=this}var r=e.router._currentTransition;if(!t&&r.done||t&&t.activated){var s=t?t.depth+1:0;j(this,r,s)}},unbind:function(){this.parentView&&(this.parentView.childView=null),n.unbind.call(this)}}),e.elementDirective("router-view",i)}function L(e){function t(e){return e.protocol===location.protocol&&e.hostname===location.hostname&&e.port===location.port}function n(e,t,n){if(t=t.trim(),t.indexOf(" ")===-1)return void n(e,t);for(var i=t.split(/\s+/),o=0,r=i.length;o<r;o++)n(e,i[o])}var i=e.util,o=i.bind,r=i.isObject,s=i.addClass,a=i.removeClass,c=e.directive("on").priority,l="__vue-router-link-update__",h=0;e.directive("link-active",{priority:9999,bind:function(){for(var e=this,t=String(h++),n=this.el.querySelectorAll("[v-link]"),i=0,o=n.length;i<o;i++){var r=n[i],s=r.getAttribute(l),a=s?s+","+t:t;r.setAttribute(l,a)}this.vm.$on(l,this.cb=function(n,i){n.activeIds.indexOf(t)>-1&&n.updateClasses(i,e.el)})},unbind:function(){this.vm.$off(l,this.cb)}}),e.directive("link",{priority:c-2,bind:function(){var e=this.vm;if(!e.$route)return void E("v-link can only be used inside a router-enabled app.");this.router=e.$route.router,this.unwatch=e.$watch("$route",o(this.onRouteUpdate,this));var t=this.el.getAttribute(l);t&&(this.el.removeAttribute(l),this.activeIds=t.split(",")),"A"===this.el.tagName&&"_blank"===this.el.getAttribute("target")||(this.handler=o(this.onClick,this),this.el.addEventListener("click",this.handler))},update:function(e){this.target=e,r(e)&&(this.append=e.append,this.exact=e.exact,this.prevActiveClass=this.activeClass,this.activeClass=e.activeClass),this.onRouteUpdate(this.vm.$route)},onClick:function(e){if(!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||0!==e.button)){var n=this.target;if(n)e.preventDefault(),this.router.go(n);else{for(var i=e.target;"A"!==i.tagName&&i!==this.el;)i=i.parentNode;if("A"===i.tagName&&t(i)){e.preventDefault();var o=i.pathname;this.router.history.root&&(o=o.replace(this.router.history.rootRE,"")),this.router.go({path:o,replace:n&&n.replace,append:n&&n.append})}}}},onRouteUpdate:function(e){var t=this.router.stringifyPath(this.target);this.path!==t&&(this.path=t,this.updateActiveMatch(),this.updateHref()),this.activeIds?this.vm.$emit(l,this,e.path):this.updateClasses(e.path,this.el)},updateActiveMatch:function(){this.activeRE=this.path&&!this.exact?new RegExp("^"+this.path.replace(/\/$/,"").replace(se,"").replace(re,"\\$&")+"(\\/|$)"):null},updateHref:function(){if("A"===this.el.tagName){var e=this.path,t=this.router,n="/"===e.charAt(0),i=e&&("hash"===t.mode||n)?t.history.formatPath(e,this.append):e;i?this.el.href=i:this.el.removeAttribute("href")}},updateClasses:function(e,t){var i=this.activeClass||this.router._linkActiveClass;this.prevActiveClass&&this.prevActiveClass!==i&&n(t,this.prevActiveClass,a);var o=this.path.replace(se,"");e=e.replace(se,""),this.exact?o===e||"/"!==o.charAt(o.length-1)&&o===e.replace(oe,"")?n(t,i,s):n(t,i,a):this.activeRE&&this.activeRE.test(e)?n(t,i,s):n(t,i,a)},unbind:function(){this.el.removeEventListener("click",this.handler),this.unwatch&&this.unwatch()}})}function H(e,t){var n=t.component;ce.util.isPlainObject(n)&&(n=t.component=ce.extend(n)),"function"!=typeof n&&(t.component=null,E('invalid component for route "'+e+'".'))}var z={};z.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.prototype={to:function(e,t){var n=this.delegate;if(n&&n.willAddRoute&&(e=n.willAddRoute(this.matcher.target,e)),this.matcher.add(this.path,e),t){if(0===t.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,e,t,this.delegate)}return this}},t.prototype={add:function(e,t){this.routes[e]=t},addChild:function(e,i,o,r){var s=new t(i);this.children[e]=s;var a=n(e,s,r);r&&r.contextEntered&&r.contextEntered(i,a),o(a)}};var B=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],U=new RegExp("(\\"+B.join("|\\")+")","g"),W=!1;l.prototype={eachChar:function(e){for(var t,n=this.string,i=0,o=n.length;i<o;i++)t=n.charAt(i),e({validChars:t})},regex:function(){return this.string.replace(U,"\\$1")},generate:function(){return this.string}},h.prototype={eachChar:function(e){e({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(e){var t=e[this.name];return null==t?":"+this.name:t}},u.prototype={eachChar:function(e){e({invalidChars:"",repeat:!0})},regex:function(){return"(.+)"},generate:function(e){var t=e[this.name];return null==t?":"+this.name:t}},f.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},d.prototype={get:function(e){for(var t=this.nextStates,n=0,i=t.length;n<i;n++){var o=t[n],r=o.charSpec.validChars===e.validChars;if(r=r&&o.charSpec.invalidChars===e.invalidChars)return o}},put:function(e){var t;return(t=this.get(e))?t:(t=new d(e),this.nextStates.push(t),e.repeat&&t.nextStates.push(t),t)},match:function(e){for(var t,n,i,o=this.nextStates,r=[],s=0,a=o.length;s<a;s++)t=o[s],n=t.charSpec,"undefined"!=typeof(i=n.validChars)?i.indexOf(e)!==-1&&r.push(t):"undefined"!=typeof(i=n.invalidChars)&&i.indexOf(e)===-1&&r.push(t);return r}};var q=Object.create||function(e){function t(){}return t.prototype=e,new t};y.prototype=q({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});var J=function(){this.rootState=new d,this.names={}};J.prototype={add:function(e,t){for(var n,i=this.rootState,o="^",r={},s=[],a=[],c=!0,l=0,h=e.length;l<h;l++){var u=e[l],d=[],v=p(u.path,d,r);a=a.concat(v);for(var _=0,y=v.length;_<y;_++){var b=v[_];b instanceof f||(c=!1,i=i.put({validChars:"/"}),o+="/",i=m(i,b),o+=b.regex())}var g={handler:u.handler,names:d};s.push(g)}c&&(i=i.put({validChars:"/"}),o+="/"),i.handlers=s,i.regex=new RegExp(o+"$"),i.specificity=r,(n=t&&t.as)&&(this.names[n]={segments:a,handlers:s})},handlersFor:function(e){var t=this.names[e],n=[];if(!t)throw new Error("There is no route named "+e);for(var i=0,o=t.handlers.length;i<o;i++)n.push(t.handlers[i]);return n},hasRoute:function(e){return!!this.names[e]},generate:function(e,t){var n=this.names[e],i="";if(!n)throw new Error("There is no route named "+e);for(var o=n.segments,r=0,s=o.length;r<s;r++){var a=o[r];a instanceof f||(i+="/",i+=a.generate(t))}return"/"!==i.charAt(0)&&(i="/"+i),t&&t.queryParams&&(i+=this.generateQueryString(t.queryParams)),i},generateQueryString:function(e){var t=[],n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(i);n.sort();for(var o=0,r=n.length;o<r;o++){i=n[o];var s=e[i];if(null!=s){var a=encodeURIComponent(i);if(c(s))for(var l=0,h=s.length;l<h;l++){var u=i+"[]="+encodeURIComponent(s[l]);t.push(u)}else a+="="+encodeURIComponent(s),t.push(a)}}return 0===t.length?"":"?"+t.join("&")},parseQueryString:function(e){for(var t=e.split("&"),n={},i=0;i<t.length;i++){var o,r=t[i].split("="),s=g(r[0]),a=s.length,c=!1;1===r.length?o="true":(a>2&&"[]"===s.slice(a-2)&&(c=!0,s=s.slice(0,a-2),n[s]||(n[s]=[])),o=r[1]?g(r[1]):""),c?n[s].push(o):n[s]=o}return n},recognize:function(e,t){W=t;var n,i,o,r,s=[this.rootState],c={},l=!1;if(r=e.indexOf("?"),r!==-1){var h=e.substr(r+1,e.length);e=e.substr(0,r),h&&(c=this.parseQueryString(h))}if(e=a(e)){for("/"!==e.charAt(0)&&(e="/"+e),n=e.length,n>1&&"/"===e.charAt(n-1)&&(e=e.substr(0,n-1),l=!0),i=0,o=e.length;i<o&&(s=_(s,e.charAt(i)),s.length);i++);var u=[];for(i=0,o=s.length;i<o;i++)s[i].handlers&&u.push(s[i]);s=v(u);var f=u[0];return f&&f.handlers?(l&&"(.+)$"===f.regex.source.slice(-5)&&(e+="/"),b(f,e,c)):void 0}}},J.prototype.map=r;var Q=J.prototype.generateQueryString,Y={},G=void 0,K=/#.*$/,Z=function(){function e(t){var n=t.root,i=t.onChange;z.classCallCheck(this,e),n&&"/"!==n?("/"!==n.charAt(0)&&(n="/"+n),this.root=n.replace(/\/$/,""),this.rootRE=new RegExp("^\\"+this.root)):this.root=null,this.onChange=i;var o=document.querySelector("base");this.base=o&&o.getAttribute("href")}return e.prototype.start=function(){var e=this;this.listener=function(t){var n=location.pathname+location.search;e.root&&(n=n.replace(e.rootRE,"")),e.onChange(n,t&&t.state,location.hash)},window.addEventListener("popstate",this.listener),this.listener()},e.prototype.stop=function(){window.removeEventListener("popstate",this.listener)},e.prototype.go=function(e,t,n){var i=this.formatPath(e,n);t?history.replaceState({},"",i):(history.replaceState({pos:{x:window.pageXOffset,y:window.pageYOffset}},"",location.href),history.pushState({},"",i));var o=e.match(K),r=o&&o[0];e=i.replace(K,"").replace(this.rootRE,""),this.onChange(e,null,r)},e.prototype.formatPath=function(e,t){return"/"===e.charAt(0)?this.root?this.root+"/"+e.replace(/^\//,""):e:w(this.base||location.pathname,e,t)},e}(),X=function(){function e(t){var n=t.hashbang,i=t.onChange;z.classCallCheck(this,e),this.hashbang=n,this.onChange=i}return e.prototype.start=function(){var e=this;this.listener=function(){var t=location.hash,n=t.replace(/^#!?/,"");"/"!==n.charAt(0)&&(n="/"+n);var i=e.formatPath(n);if(i!==t)return void location.replace(i);var o=location.search&&t.indexOf("?")>-1?"&"+location.search.slice(1):location.search;e.onChange(t.replace(/^#!?/,"")+o)},window.addEventListener("hashchange",this.listener),this.listener()},e.prototype.stop=function(){window.removeEventListener("hashchange",this.listener)},e.prototype.go=function(e,t,n){e=this.formatPath(e,n),t?location.replace(e):location.hash=e},e.prototype.formatPath=function(e,t){var n="/"===e.charAt(0),i="#"+(this.hashbang?"!":"");return n?i+e:i+w(location.hash.replace(/^#!?/,""),e,t)},e}(),ee=function(){function e(t){var n=t.onChange;z.classCallCheck(this,e),this.onChange=n,this.currentPath="/"}return e.prototype.start=function(){this.onChange("/")},e.prototype.stop=function(){},e.prototype.go=function(e,t,n){e=this.currentPath=this.formatPath(e,n),this.onChange(e)},e.prototype.formatPath=function(e,t){return"/"===e.charAt(0)?e:w(this.currentPath,e,t)},e}(),te=function(){function e(t,n,i){z.classCallCheck(this,e),this.router=t,this.to=n,this.from=i,this.next=null,this.aborted=!1,this.done=!1}return e.prototype.abort=function(){if(!this.aborted){this.aborted=!0;var e=!this.from.path&&"/"===this.to.path;e||this.router.replace(this.from.path||"/")}},e.prototype.redirect=function(e){this.aborted||(this.aborted=!0,"string"==typeof e?e=$(e,this.to.params,this.to.query):(e.params=e.params||this.to.params,e.query=e.query||this.to.query),this.router.replace(e))},e.prototype.start=function(e){for(var t=this,n=[],i=this.router._rootView;i;)n.unshift(i),i=i.childView;var o=n.slice().reverse(),r=this.activateQueue=F(this.to.matched).map(function(e){return e.handler}),s=void 0,a=void 0;for(s=0;s<o.length&&N(o[s],r[s],t);s++);s>0&&(a=o.slice(0,s),n=o.slice(s).reverse(),r=r.slice(s)),t.runQueue(n,O,function(){t.runQueue(r,A,function(){t.runQueue(n,T,function(){if(t.router._onTransitionValidated(t),a&&a.forEach(function(e){return D(e,t)}),n.length){var i=n[n.length-1],o=a?a.length:0;j(i,t,o,e)}else e()})})})},e.prototype.runQueue=function(e,t,n){function i(r){r>=e.length?n():t(e[r],o,function(){i(r+1)})}var o=this;i(0)},e.prototype.callHook=function(e,t,n){var i=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],o=i.expectBoolean,r=void 0!==o&&o,s=i.postActivate,a=void 0!==s&&s,c=i.processData,l=i.cleanup,h=this,u=!1,f=function(){l&&l(),h.abort()},p=function(e){if(a?v():f(),e&&!h.router._suppress)throw E("Uncaught error during transition: "),e instanceof Error?e:new Error(e)},d=function(e){try{p(e)}catch(t){setTimeout(function(){throw t},0)}},v=function(){return u?void E("transition.next() should be called only once."):(u=!0,h.aborted?void(l&&l()):void(n&&n()))},_=function(t){"boolean"==typeof t?t?v():f():x(t)?t.then(function(e){e?v():f()},d):e.length||v()},y=function(e){var t=void 0;try{t=c(e)}catch(n){return p(n)}x(t)?t.then(v,d):v()},b={to:h.to,from:h.from,abort:f,next:c?y:v,redirect:function(){h.redirect.apply(h,arguments)}},m=void 0;try{m=e.call(t,b)}catch(g){return p(g)}r?_(m):x(m)?c?m.then(y,d):m.then(v,d):c&&R(m)?y(m):e.length||v()},e.prototype.callHooks=function(e,t,n,i){var o=this;Array.isArray(e)?this.runQueue(e,function(e,n,r){o.aborted||o.callHook(e,t,r,i)},n):this.callHook(e,t,n,i)},e}(),ne=/^(component|subRoutes|fullPath)$/,ie=function he(e,t){var n=this;z.classCallCheck(this,he);var i=t._recognizer.recognize(e);i&&([].forEach.call(i,function(e){for(var t in e.handler)ne.test(t)||(n[t]=e.handler[t])}),this.query=i.queryParams,this.params=[].reduce.call(i,function(e,t){if(t.params)for(var n in t.params)e[n]=t.params[n];return e},{})),this.path=e,this.matched=i||t._notFoundHandler,Object.defineProperty(this,"router",{enumerable:!1,value:t}),Object.freeze(this)},oe=/\/$/,re=/[-.*+?^${}()|[\]\/\\]/g,se=/\?.*$/,ae={"abstract":ee,hash:X,html5:Z},ce=void 0,le=function(){function e(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=n.hashbang,o=void 0===i||i,r=n["abstract"],s=void 0!==r&&r,a=n.history,c=void 0!==a&&a,l=n.saveScrollPosition,h=void 0!==l&&l,u=n.transitionOnLoad,f=void 0!==u&&u,p=n.suppressTransitionError,d=void 0!==p&&p,v=n.root,_=void 0===v?null:v,y=n.linkActiveClass,b=void 0===y?"v-link-active":y;if(z.classCallCheck(this,e),!e.installed)throw new Error("Please install the Router with Vue.use() before creating an instance.");this.app=null,this._children=[],this._recognizer=new J,this._guardRecognizer=new J,this._started=!1,this._startCb=null,this._currentRoute={},this._currentTransition=null,this._previousTransition=null,this._notFoundHandler=null,this._notFoundRedirect=null,this._beforeEachHooks=[],this._afterEachHooks=[],this._rendered=!1,this._transitionOnLoad=f,this._root=_,this._abstract=s,this._hashbang=o;var m="undefined"!=typeof window&&window.history&&window.history.pushState;this._history=c&&m,this._historyFallback=c&&!m;var g=ce.util.inBrowser;this.mode=!g||this._abstract?"abstract":this._history?"html5":"hash";var E=ae[this.mode];this.history=new E({root:_,hashbang:this._hashbang,onChange:function(e,n,i){t._match(e,n,i)}}),this._saveScrollPosition=h,this._linkActiveClass=b,this._suppress=d}return e.prototype.map=function(e){for(var t in e)this.on(t,e[t]);return this},e.prototype.on=function(e,t){return"*"===e?this._notFound(t):this._addRoute(e,t,[]),this},e.prototype.redirect=function(e){for(var t in e)this._addRedirect(t,e[t]);return this},e.prototype.alias=function(e){for(var t in e)this._addAlias(t,e[t]);return this},e.prototype.beforeEach=function(e){return this._beforeEachHooks.push(e),this},e.prototype.afterEach=function(e){return this._afterEachHooks.push(e),this},e.prototype.go=function(e){var t=!1,n=!1;ce.util.isObject(e)&&(t=e.replace,n=e.append),e=this.stringifyPath(e),e&&this.history.go(e,t,n)},e.prototype.replace=function(e){"string"==typeof e&&(e={path:e}),e.replace=!0,this.go(e)},e.prototype.start=function(e,t,n){if(this._started)return void E("already started.");if(this._started=!0,this._startCb=n,!this.app){if(!e||!t)throw new Error("Must start vue-router with a component and a root container.");if(e instanceof ce)throw new Error("Must start vue-router with a component, not a Vue instance.");this._appContainer=t;var i=this._appConstructor="function"==typeof e?e:ce.extend(e);i.options.name=i.options.name||"RouterApp"}if(this._historyFallback){var o=window.location,r=new Z({root:this._root}),s=r.root?o.pathname.replace(r.rootRE,""):o.pathname;if(s&&"/"!==s)return void o.assign((r.root||"")+"/"+this.history.formatPath(s)+o.search)}this.history.start()},e.prototype.stop=function(){this.history.stop(),this._started=!1},e.prototype.stringifyPath=function(e){var t="";if(e&&"object"==typeof e){if(e.name){var n=ce.util.extend,i=this._currentTransition&&this._currentTransition.to.params,o=e.params||{},r=i?n(n({},i),o):o;t=encodeURI(this._recognizer.generate(e.name,r))}else e.path&&(t=encodeURI(e.path));if(e.query){var s=this._recognizer.generateQueryString(e.query);t+=t.indexOf("?")>-1?"&"+s.slice(1):s}}else t=encodeURI(e?e+"":"");return t},e.prototype._addRoute=function(e,t,n){if(H(e,t),t.path=e,t.fullPath=(n.reduce(function(e,t){return e+t.path},"")+e).replace("//","/"),n.push({path:e,handler:t}),this._recognizer.add(n,{as:t.name}),t.subRoutes)for(var i in t.subRoutes)this._addRoute(i,t.subRoutes[i],n.slice())},e.prototype._notFound=function(e){H("*",e),this._notFoundHandler=[{handler:e}]},e.prototype._addRedirect=function(e,t){"*"===e?this._notFoundRedirect=t:this._addGuard(e,t,this.replace)},e.prototype._addAlias=function(e,t){this._addGuard(e,t,this._match)},e.prototype._addGuard=function(e,t,n){var i=this;this._guardRecognizer.add([{path:e,handler:function(e,o){var r=$(t,e.params,o);n.call(i,r)}}])},e.prototype._checkGuard=function(e){var t=this._guardRecognizer.recognize(e,!0);return t?(t[0].handler(t[0],t.queryParams),!0):this._notFoundRedirect&&(t=this._recognizer.recognize(e),!t)?(this.replace(this._notFoundRedirect),!0):void 0},e.prototype._match=function(e,t,n){var i=this;if(!this._checkGuard(e)){var o=this._currentRoute,r=this._currentTransition;if(r){if(r.to.path===e)return;if(o.path===e)return r.aborted=!0,void(this._currentTransition=this._prevTransition);r.aborted=!0}var s=new ie(e,this),a=new te(this,s,o);this._prevTransition=r,this._currentTransition=a,this.app||!function(){var e=i;i.app=new i._appConstructor({el:i._appContainer,created:function(){this.$router=e},_meta:{$route:s}})}();var c=this._beforeEachHooks,l=function(){a.start(function(){i._postTransition(s,t,n)})};c.length?a.runQueue(c,function(e,t,n){a===i._currentTransition&&a.callHook(e,null,n,{expectBoolean:!0})},l):l(),!this._rendered&&this._startCb&&this._startCb.call(null),this._rendered=!0}},e.prototype._onTransitionValidated=function(e){var t=this._currentRoute=e.to;this.app.$route!==t&&(this.app.$route=t,this._children.forEach(function(e){e.$route=t})),this._afterEachHooks.length&&this._afterEachHooks.forEach(function(t){return t.call(null,{to:e.to,from:e.from})}),this._currentTransition.done=!0},e.prototype._postTransition=function(e,t,n){var i=t&&t.pos;i&&this._saveScrollPosition?ce.nextTick(function(){window.scrollTo(i.x,i.y)}):n&&ce.nextTick(function(){var e=document.getElementById(n.slice(1));e&&window.scrollTo(window.scrollX,e.offsetTop)})},e}();return le.installed=!1,le.install=function(e){return le.installed?void E("already installed."):(ce=e,M(ce),I(ce),L(ce),Y.Vue=ce,void(le.installed=!0))},"undefined"!=typeof window&&window.Vue&&window.Vue.use(le),le})},function(e,t,n){var i=n(70);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(71);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(72);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(73);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(74);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(75);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(76);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(77);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(78);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(79);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(80);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(81);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(82);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){(function(t,n){/*!
	 * Vue.js v1.0.26
	 * (c) 2016 Evan You
	 * Released under the MIT License.
	 */
"use strict";function i(e,t,n){if(r(e,t))return void(e[t]=n);if(e._isVue)return void i(e._data,t,n);var o=e.__ob__;if(!o)return void(e[t]=n);if(o.convert(t,n),o.dep.notify(),o.vms)for(var s=o.vms.length;s--;){var a=o.vms[s];a._proxy(t),a._digest()}return n}function o(e,t){if(r(e,t)){delete e[t];var n=e.__ob__;if(!n)return void(e._isVue&&(delete e._data[t],e._digest()));if(n.dep.notify(),n.vms)for(var i=n.vms.length;i--;){var o=n.vms[i];o._unproxy(t),o._digest()}}}function r(e,t){return Sn.call(e,t)}function s(e){return Vn.test(e)}function a(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function c(e){return null==e?"":e.toString()}function l(e){if("string"!=typeof e)return e;var t=Number(e);return isNaN(t)?e:t}function h(e){return"true"===e||"false"!==e&&e}function u(e){var t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t!==n||34!==t&&39!==t?e:e.slice(1,-1)}function f(e){return e.replace(Pn,p)}function p(e,t){return t?t.toUpperCase():""}function d(e){return e.replace(Rn,"$1-$2").toLowerCase()}function v(e){return e.replace(Fn,p)}function _(e,t){return function(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}}function y(e,t){t=t||0;for(var n=e.length-t,i=new Array(n);n--;)i[n]=e[n+t];return i}function b(e,t){for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}function m(e){return null!==e&&"object"==typeof e}function g(e){return Mn.call(e)===In}function E(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}function w(e,t){var n,i,o,r,s,a=function c(){var a=Date.now()-r;a<t&&a>=0?n=setTimeout(c,t-a):(n=null,s=e.apply(o,i),n||(o=i=null))};return function(){return o=this,i=arguments,r=Date.now(),n||(n=setTimeout(a,t)),s}}function x(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function k(e){var t=function n(){if(!n.cancelled)return e.apply(this,arguments)};return t.cancel=function(){t.cancelled=!0},t}function C(e,t){return e==t||!(!m(e)||!m(t))&&JSON.stringify(e)===JSON.stringify(t)}function $(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap=Object.create(null)}function N(){var e,t=ai.slice(pi,ui).trim();if(t){e={};var n=t.match(gi);e.name=n[0],n.length>1&&(e.args=n.slice(1).map(O))}e&&(ci.filters=ci.filters||[]).push(e),pi=ui+1}function O(e){if(Ei.test(e))return{value:l(e),dynamic:!1};var t=u(e),n=t===e;return{value:n?e:t,dynamic:n}}function A(e){var t=mi.get(e);if(t)return t;for(ai=e,di=vi=!1,_i=yi=bi=0,pi=0,ci={},ui=0,fi=ai.length;ui<fi;ui++)if(hi=li,li=ai.charCodeAt(ui),di)39===li&&92!==hi&&(di=!di);else if(vi)34===li&&92!==hi&&(vi=!vi);else if(124===li&&124!==ai.charCodeAt(ui+1)&&124!==ai.charCodeAt(ui-1))null==ci.expression?(pi=ui+1,ci.expression=ai.slice(0,ui).trim()):N();else switch(li){case 34:vi=!0;break;case 39:di=!0;break;case 40:bi++;break;case 41:bi--;break;case 91:yi++;break;case 93:yi--;break;case 123:_i++;break;case 125:_i--}return null==ci.expression?ci.expression=ai.slice(0,ui).trim():0!==pi&&N(),mi.put(e,ci),ci}function T(e){return e.replace(xi,"\\$&")}function j(){var e=T(ji.delimiters[0]),t=T(ji.delimiters[1]),n=T(ji.unsafeDelimiters[0]),i=T(ji.unsafeDelimiters[1]);Ci=new RegExp(n+"((?:.|\\n)+?)"+i+"|"+e+"((?:.|\\n)+?)"+t,"g"),$i=new RegExp("^"+n+"((?:.|\\n)+?)"+i+"$"),ki=new $(1e3)}function D(e){ki||j();var t=ki.get(e);if(t)return t;if(!Ci.test(e))return null;for(var n,i,o,r,s,a,c=[],l=Ci.lastIndex=0;n=Ci.exec(e);)i=n.index,i>l&&c.push({value:e.slice(l,i)}),o=$i.test(n[0]),r=o?n[1]:n[2],s=r.charCodeAt(0),a=42===s,r=a?r.slice(1):r,c.push({tag:!0,value:r.trim(),html:o,oneTime:a}),l=i+n[0].length;return l<e.length&&c.push({value:e.slice(l)}),ki.put(e,c),c}function S(e,t){return e.length>1?e.map(function(e){return V(e,t)}).join("+"):V(e[0],t,!0)}function V(e,t,n){return e.tag?e.oneTime&&t?'"'+t.$eval(e.value)+'"':P(e.value,n):'"'+e.value+'"'}function P(e,t){if(Ni.test(e)){var n=A(e);return n.filters?"this._applyFilters("+n.expression+",null,"+JSON.stringify(n.filters)+",false)":"("+e+")"}return t?e:"("+e+")"}function R(e,t,n,i){I(e,1,function(){t.appendChild(e)},n,i)}function F(e,t,n,i){I(e,1,function(){W(e,t)},n,i)}function M(e,t,n){I(e,-1,function(){J(e)},t,n)}function I(e,t,n,i,o){var r=e.__v_trans;if(!r||!r.hooks&&!Xn||!i._isCompiled||i.$parent&&!i.$parent._isCompiled)return n(),void(o&&o());var s=t>0?"enter":"leave";r[s](n,o)}function L(e){if("string"==typeof e){var t=e;e=document.querySelector(e),e||"production"!==n.env.NODE_ENV&&Di("Cannot find element: "+t)}return e}function H(e){if(!e)return!1;var t=e.ownerDocument.documentElement,n=e.parentNode;return t===e||t===n||!(!n||1!==n.nodeType||!t.contains(n))}function z(e,t){var n=e.getAttribute(t);return null!==n&&e.removeAttribute(t),n}function B(e,t){var n=z(e,":"+t);return null===n&&(n=z(e,"v-bind:"+t)),n}function U(e,t){return e.hasAttribute(t)||e.hasAttribute(":"+t)||e.hasAttribute("v-bind:"+t)}function W(e,t){t.parentNode.insertBefore(e,t)}function q(e,t){t.nextSibling?W(e,t.nextSibling):t.parentNode.appendChild(e)}function J(e){e.parentNode.removeChild(e)}function Q(e,t){t.firstChild?W(e,t.firstChild):t.appendChild(e)}function Y(e,t){var n=e.parentNode;n&&n.replaceChild(t,e)}function G(e,t,n,i){e.addEventListener(t,n,i)}function K(e,t,n){e.removeEventListener(t,n)}function Z(e){var t=e.className;return"object"==typeof t&&(t=t.baseVal||""),t}function X(e,t){qn&&!/svg$/.test(e.namespaceURI)?e.className=t:e.setAttribute("class",t)}function ee(e,t){if(e.classList)e.classList.add(t);else{var n=" "+Z(e)+" ";n.indexOf(" "+t+" ")<0&&X(e,(n+t).trim())}}function te(e,t){if(e.classList)e.classList.remove(t);else{for(var n=" "+Z(e)+" ",i=" "+t+" ";n.indexOf(i)>=0;)n=n.replace(i," ");X(e,n.trim())}e.className||e.removeAttribute("class")}function ne(e,t){var n,i;if(re(e)&&he(e.content)&&(e=e.content),e.hasChildNodes())for(ie(e),i=t?document.createDocumentFragment():document.createElement("div");n=e.firstChild;)i.appendChild(n);return i}function ie(e){for(var t;t=e.firstChild,oe(t);)e.removeChild(t);for(;t=e.lastChild,oe(t);)e.removeChild(t)}function oe(e){return e&&(3===e.nodeType&&!e.data.trim()||8===e.nodeType)}function re(e){return e.tagName&&"template"===e.tagName.toLowerCase()}function se(e,t){var n=ji.debug?document.createComment(e):document.createTextNode(t?" ":"");return n.__v_anchor=!0,n}function ae(e){if(e.hasAttributes())for(var t=e.attributes,n=0,i=t.length;n<i;n++){var o=t[n].name;if(Pi.test(o))return f(o.replace(Pi,""))}}function ce(e,t,n){for(var i;e!==t;)i=e.nextSibling,n(e),e=i;n(t)}function le(e,t,n,i,o){function r(){if(a++,s&&a>=c.length){for(var e=0;e<c.length;e++)i.appendChild(c[e]);o&&o()}}var s=!1,a=0,c=[];ce(e,t,function(e){e===t&&(s=!0),c.push(e),M(e,n,r)})}function he(e){return e&&11===e.nodeType}function ue(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function fe(e,t){var i=e.tagName.toLowerCase(),o=e.hasAttributes();if(Ri.test(i)||Fi.test(i)){if(o)return pe(e,t)}else{if(ge(t,"components",i))return{id:i};var r=o&&pe(e,t);if(r)return r;if("production"!==n.env.NODE_ENV){var s=t._componentNameMap&&t._componentNameMap[i];s?Di("Unknown custom element: <"+i+"> - did you mean <"+s+">? HTML is case-insensitive, remember to use kebab-case in templates."):Mi(e,i)&&Di("Unknown custom element: <"+i+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.')}}}function pe(e,t){var n=e.getAttribute("is");if(null!=n){if(ge(t,"components",n))return e.removeAttribute("is"),{id:n}}else if(n=B(e,"is"),null!=n)return{id:n,dynamic:!0}}function de(e,t){var n,o,s;for(n in t)o=e[n],s=t[n],r(e,n)?m(o)&&m(s)&&de(o,s):i(e,n,s);return e}function ve(e,t){var n=Object.create(e||null);return t?b(n,be(t)):n}function _e(e){if(e.components){var t,i=e.components=be(e.components),o=Object.keys(i);if("production"!==n.env.NODE_ENV)var r=e._componentNameMap={};for(var s=0,a=o.length;s<a;s++){var c=o[s];Ri.test(c)||Fi.test(c)?"production"!==n.env.NODE_ENV&&Di("Do not use built-in or reserved HTML elements as component id: "+c):("production"!==n.env.NODE_ENV&&(r[c.replace(/-/g,"").toLowerCase()]=d(c)),t=i[c],g(t)&&(i[c]=Nn.extend(t)))}}}function ye(e){var t,n,i=e.props;if(Ln(i))for(e.props={},t=i.length;t--;)n=i[t],"string"==typeof n?e.props[n]=null:n.name&&(e.props[n.name]=n);else if(g(i)){var o=Object.keys(i);for(t=o.length;t--;)n=i[o[t]],"function"==typeof n&&(i[o[t]]={type:n})}}function be(e){if(Ln(e)){for(var t,i={},o=e.length;o--;){t=e[o];var r="function"==typeof t?t.options&&t.options.name||t.id:t.name||t.id;r?i[r]=t:"production"!==n.env.NODE_ENV&&Di('Array-syntax assets must provide a "name" or "id" field.')}return i}return e}function me(e,t,i){function o(n){var o=Ii[n]||Li;a[n]=o(e[n],t[n],i,n)}_e(t),ye(t),"production"!==n.env.NODE_ENV&&t.propsData&&!i&&Di("propsData can only be used as an instantiation option.");var s,a={};if(t["extends"]&&(e="function"==typeof t["extends"]?me(e,t["extends"].options,i):me(e,t["extends"],i)),t.mixins)for(var c=0,l=t.mixins.length;c<l;c++){var h=t.mixins[c],u=h.prototype instanceof Nn?h.options:h;e=me(e,u,i)}for(s in e)o(s);for(s in t)r(e,s)||o(s);return a}function ge(e,t,i,o){if("string"==typeof i){var r,s=e[t],a=s[i]||s[r=f(i)]||s[r.charAt(0).toUpperCase()+r.slice(1)];return"production"!==n.env.NODE_ENV&&o&&!a&&Di("Failed to resolve "+t.slice(0,-1)+": "+i,e),a}}function Ee(){this.id=Hi++,this.subs=[]}function we(e){Wi=!1,e(),Wi=!0}function xe(e){if(this.value=e,this.dep=new Ee,E(e,"__ob__",this),Ln(e)){var t=Hn?ke:Ce;t(e,Bi,Ui),this.observeArray(e)}else this.walk(e)}function ke(e,t){e.__proto__=t}function Ce(e,t,n){for(var i=0,o=n.length;i<o;i++){var r=n[i];E(e,r,t[r])}}function $e(e,t){if(e&&"object"==typeof e){var n;return r(e,"__ob__")&&e.__ob__ instanceof xe?n=e.__ob__:Wi&&(Ln(e)||g(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new xe(e)),n&&t&&n.addVm(t),n}}function Ne(e,t,n){var i=new Ee,o=Object.getOwnPropertyDescriptor(e,t);if(!o||o.configurable!==!1){var r=o&&o.get,s=o&&o.set,a=$e(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=r?r.call(e):n;if(Ee.target&&(i.depend(),a&&a.dep.depend(),Ln(t)))for(var o,s=0,c=t.length;s<c;s++)o=t[s],o&&o.__ob__&&o.__ob__.dep.depend();return t},set:function(t){var o=r?r.call(e):n;t!==o&&(s?s.call(e,t):n=t,a=$e(t),i.notify())}})}}function Oe(e){e.prototype._init=function(e){e=e||{},this.$el=null,this.$parent=e.parent,this.$root=this.$parent?this.$parent.$root:this,this.$children=[],this.$refs={},this.$els={},this._watchers=[],this._directives=[],this._uid=Ji++,this._isVue=!0,this._events={},this._eventsCount={},this._isFragment=!1,this._fragment=this._fragmentStart=this._fragmentEnd=null,this._isCompiled=this._isDestroyed=this._isReady=this._isAttached=this._isBeingDestroyed=this._vForRemoving=!1,this._unlinkFn=null,this._context=e._context||this.$parent,this._scope=e._scope,this._frag=e._frag,this._frag&&this._frag.children.push(this),this.$parent&&this.$parent.$children.push(this),e=this.$options=me(this.constructor.options,e,this),this._updateRef(),this._data={},this._callHook("init"),this._initState(),this._initEvents(),this._callHook("created"),e.el&&this.$mount(e.el)}}function Ae(e){if(void 0===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:case 48:return e;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return t>=97&&t<=122||t>=65&&t<=90?"ident":t>=49&&t<=57?"number":"else"}function Te(e){var t=e.trim();return("0"!==e.charAt(0)||!isNaN(e))&&(s(t)?u(t):"*"+t)}function je(e){function t(){var t=e[h+1];if(u===oo&&"'"===t||u===ro&&'"'===t)return h++,i="\\"+t,p[Yi](),!0}var n,i,o,r,s,a,c,l=[],h=-1,u=Xi,f=0,p=[];for(p[Gi]=function(){void 0!==o&&(l.push(o),o=void 0)},p[Yi]=function(){void 0===o?o=i:o+=i},p[Ki]=function(){p[Yi](),f++},p[Zi]=function(){if(f>0)f--,u=io,p[Yi]();else{if(f=0,o=Te(o),o===!1)return!1;p[Gi]()}};null!=u;)if(h++,n=e[h],"\\"!==n||!t()){if(r=Ae(n),c=co[u],s=c[r]||c["else"]||ao,s===ao)return;if(u=s[0],a=p[s[1]],a&&(i=s[2],i=void 0===i?n:i,a()===!1))return;if(u===so)return l.raw=e,l}}function De(e){var t=Qi.get(e);return t||(t=je(e),t&&Qi.put(e,t)),t}function Se(e,t){return ze(t).get(e)}function Ve(e,t,o){var r=e;if("string"==typeof t&&(t=je(t)),!t||!m(e))return!1;for(var s,a,c=0,l=t.length;c<l;c++)s=e,a=t[c],"*"===a.charAt(0)&&(a=ze(a.slice(1)).get.call(r,r)),c<l-1?(e=e[a],m(e)||(e={},"production"!==n.env.NODE_ENV&&s._isVue&&lo(t,s),i(s,a,e))):Ln(e)?e.$set(a,o):a in e?e[a]=o:("production"!==n.env.NODE_ENV&&e._isVue&&lo(t,e),i(e,a,o));return!0}function Pe(){}function Re(e,t){var n=ko.length;return ko[n]=t?e.replace(bo,"\\n"):e,'"'+n+'"'}function Fe(e){var t=e.charAt(0),n=e.slice(1);return po.test(n)?e:(n=n.indexOf('"')>-1?n.replace(go,Me):n,t+"scope."+n)}function Me(e,t){return ko[t]}function Ie(e){_o.test(e)&&"production"!==n.env.NODE_ENV&&Di("Avoid using reserved keywords in expression: "+e),ko.length=0;var t=e.replace(mo,Re).replace(yo,"");return t=(" "+t).replace(wo,Fe).replace(go,Me),Le(t)}function Le(e){try{return new Function("scope","return "+e+";")}catch(t){return"production"!==n.env.NODE_ENV&&Di(t.toString().match(/unsafe-eval|CSP/)?"It seems you are using the default build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. Use the CSP-compliant build instead: http://vuejs.org/guide/installation.html#CSP-compliant-build":"Invalid expression. Generated function body: "+e),Pe}}function He(e){var t=De(e);return t?function(e,n){Ve(e,t,n)}:void("production"!==n.env.NODE_ENV&&Di("Invalid setter expression: "+e))}function ze(e,t){e=e.trim();var n=uo.get(e);if(n)return t&&!n.set&&(n.set=He(n.exp)),n;var i={exp:e};return i.get=Be(e)&&e.indexOf("[")<0?Le("scope."+e):Ie(e),t&&(i.set=He(e)),uo.put(e,i),i}function Be(e){return Eo.test(e)&&!xo.test(e)&&"Math."!==e.slice(0,5)}function Ue(){$o.length=0,No.length=0,Oo={},Ao={},To=!1}function We(){for(var e=!0;e;)e=!1,qe($o),qe(No),$o.length?e=!0:(Bn&&ji.devtools&&Bn.emit("flush"),Ue())}function qe(e){for(var t=0;t<e.length;t++){var i=e[t],o=i.id;if(Oo[o]=null,i.run(),"production"!==n.env.NODE_ENV&&null!=Oo[o]&&(Ao[o]=(Ao[o]||0)+1,Ao[o]>ji._maxUpdateCount)){Di('You may have an infinite update loop for watcher with expression "'+i.expression+'"',i.vm);break}}e.length=0}function Je(e){var t=e.id;if(null==Oo[t]){var n=e.user?No:$o;Oo[t]=n.length,n.push(e),To||(To=!0,oi(We))}}function Qe(e,t,n,i){i&&b(this,i);var o="function"==typeof t;if(this.vm=e,e._watchers.push(this),this.expression=t,this.cb=n,this.id=++jo,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ri,this.newDepIds=new ri,this.prevError=null,o)this.getter=t,this.setter=void 0;else{var r=ze(t,this.twoWay);this.getter=r.get,this.setter=r.set}this.value=this.lazy?void 0:this.get(),this.queued=this.shallow=!1}function Ye(e,t){var n=void 0,i=void 0;t||(t=Do,t.clear());var o=Ln(e),r=m(e);if((o||r)&&Object.isExtensible(e)){if(e.__ob__){var s=e.__ob__.dep.id;if(t.has(s))return;t.add(s)}if(o)for(n=e.length;n--;)Ye(e[n],t);else if(r)for(i=Object.keys(e),n=i.length;n--;)Ye(e[i[n]],t)}}function Ge(e){return re(e)&&he(e.content)}function Ke(e,t){var n=t?e:e.trim(),i=Vo.get(n);if(i)return i;var o=document.createDocumentFragment(),r=e.match(Fo),s=Mo.test(e),a=Io.test(e);if(r||s||a){var c=r&&r[1],l=Ro[c]||Ro.efault,h=l[0],u=l[1],f=l[2],p=document.createElement("div");for(p.innerHTML=u+e+f;h--;)p=p.lastChild;for(var d;d=p.firstChild;)o.appendChild(d)}else o.appendChild(document.createTextNode(e));return t||ie(o),Vo.put(n,o),o}function Ze(e){if(Ge(e))return Ke(e.innerHTML);if("SCRIPT"===e.tagName)return Ke(e.textContent);for(var t,n=Xe(e),i=document.createDocumentFragment();t=n.firstChild;)i.appendChild(t);return ie(i),i}function Xe(e){if(!e.querySelectorAll)return e.cloneNode();var t,n,i,o=e.cloneNode(!0);if(Lo){var r=o;if(Ge(e)&&(e=e.content,r=o.content),n=e.querySelectorAll("template"),n.length)for(i=r.querySelectorAll("template"),t=i.length;t--;)i[t].parentNode.replaceChild(Xe(n[t]),i[t])}if(Ho)if("TEXTAREA"===e.tagName)o.value=e.value;else if(n=e.querySelectorAll("textarea"),n.length)for(i=o.querySelectorAll("textarea"),t=i.length;t--;)i[t].value=n[t].value;return o}function et(e,t,n){var i,o;return he(e)?(ie(e),t?Xe(e):e):("string"==typeof e?n||"#"!==e.charAt(0)?o=Ke(e,n):(o=Po.get(e),o||(i=document.getElementById(e.slice(1)),i&&(o=Ze(i),Po.put(e,o)))):e.nodeType&&(o=Ze(e)),o&&t?Xe(o):o)}function tt(e,t,n,i,o,r){this.children=[],this.childFrags=[],this.vm=t,this.scope=o,this.inserted=!1,this.parentFrag=r,r&&r.childFrags.push(this),this.unlink=e(t,n,i,o,this);var s=this.single=1===n.childNodes.length&&!n.childNodes[0].__v_anchor;s?(this.node=n.childNodes[0],this.before=nt,this.remove=it):(this.node=se("fragment-start"),this.end=se("fragment-end"),this.frag=n,Q(this.node,n),n.appendChild(this.end),this.before=ot,this.remove=rt),this.node.__v_frag=this}function nt(e,t){this.inserted=!0;var n=t!==!1?F:W;n(this.node,e,this.vm),H(this.node)&&this.callHook(st)}function it(){this.inserted=!1;var e=H(this.node),t=this;this.beforeRemove(),M(this.node,this.vm,function(){e&&t.callHook(at),t.destroy()})}function ot(e,t){this.inserted=!0;var n=this.vm,i=t!==!1?F:W;ce(this.node,this.end,function(t){i(t,e,n)}),H(this.node)&&this.callHook(st)}function rt(){this.inserted=!1;var e=this,t=H(this.node);this.beforeRemove(),le(this.node,this.end,this.vm,this.frag,function(){t&&e.callHook(at),e.destroy()})}function st(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function at(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}function ct(e,t){this.vm=e;var n,i="string"==typeof t;i||re(t)&&!t.hasAttribute("v-if")?n=et(t,!0):(n=document.createDocumentFragment(),n.appendChild(t)),this.template=n;var o,r=e.constructor.cid;if(r>0){var s=r+(i?t:ue(t));o=Uo.get(s),o||(o=It(n,e.$options,!0),Uo.put(s,o))}else o=It(n,e.$options,!0);this.linker=o}function lt(e,t,n){var i=e.node.previousSibling;if(i){for(e=i.__v_frag;!(e&&e.forId===n&&e.inserted||i===t);){if(i=i.previousSibling,!i)return;e=i.__v_frag}return e}}function ht(e){var t=e.node;if(e.end)for(;!t.__vue__&&t!==e.end&&t.nextSibling;)t=t.nextSibling;return t.__vue__}function ut(e){for(var t=-1,n=new Array(Math.floor(e));++t<e;)n[t]=t;return n}function ft(e,t,n,i){return i?"$index"===i?e:i.charAt(0).match(/\w/)?Se(n,i):n[i]:t||n}function pt(e,t,n){for(var i,o,r,s=t?[]:null,a=0,c=e.options.length;a<c;a++)if(i=e.options[a],r=n?i.hasAttribute("selected"):i.selected){if(o=i.hasOwnProperty("_value")?i._value:i.value,!t)return o;s.push(o)}return s}function dt(e,t){for(var n=e.length;n--;)if(C(e[n],t))return n;return-1}function vt(e,t){var n=t.map(function(e){var t=e.charCodeAt(0);return t>47&&t<58?parseInt(e,10):1===e.length&&(t=e.toUpperCase().charCodeAt(0),t>64&&t<91)?t:ur[e]});return n=[].concat.apply([],n),function(t){if(n.indexOf(t.keyCode)>-1)return e.call(this,t)}}function _t(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function yt(e){return function(t){return t.preventDefault(),e.call(this,t)}}function bt(e){return function(t){if(t.target===t.currentTarget)return e.call(this,t)}}function mt(e){if(_r[e])return _r[e];var t=gt(e);return _r[e]=_r[t]=t,t}function gt(e){e=d(e);var t=f(e),n=t.charAt(0).toUpperCase()+t.slice(1);yr||(yr=document.createElement("div"));var i,o=pr.length;if("filter"!==t&&t in yr.style)return{kebab:e,camel:t};for(;o--;)if(i=dr[o]+n,i in yr.style)return{kebab:pr[o]+e,camel:i}}function Et(e){var t=[];if(Ln(e))for(var n=0,i=e.length;n<i;n++){var o=e[n];if(o)if("string"==typeof o)t.push(o);else for(var r in o)o[r]&&t.push(r)}else if(m(e))for(var s in e)e[s]&&t.push(s);return t}function wt(e,t,n){if(t=t.trim(),t.indexOf(" ")===-1)return void n(e,t);for(var i=t.split(/\s+/),o=0,r=i.length;o<r;o++)n(e,i[o])}function xt(e,t,n){function i(){++r>=o?n():e[r].call(t,i)}var o=e.length,r=0;e[0].call(t,i)}function kt(e,t,i){for(var o,r,a,c,l,h,u,p=[],v=Object.keys(t),_=v.length;_--;)if(r=v[_],o=t[r]||Sr,"production"===n.env.NODE_ENV||"$data"!==r)if(l=f(r),Vr.test(l)){if(u={name:r,path:l,options:o,mode:Dr.ONE_WAY,raw:null},a=d(r),null===(c=B(e,a))&&(null!==(c=B(e,a+".sync"))?u.mode=Dr.TWO_WAY:null!==(c=B(e,a+".once"))&&(u.mode=Dr.ONE_TIME)),null!==c)u.raw=c,h=A(c),c=h.expression,u.filters=h.filters,s(c)&&!h.filters?u.optimizedLiteral=!0:(u.dynamic=!0,"production"===n.env.NODE_ENV||u.mode!==Dr.TWO_WAY||Pr.test(c)||(u.mode=Dr.ONE_WAY,Di("Cannot bind two-way prop with non-settable parent path: "+c,i))),u.parentPath=c,"production"!==n.env.NODE_ENV&&o.twoWay&&u.mode!==Dr.TWO_WAY&&Di('Prop "'+r+'" expects a two-way binding type.',i);else if(null!==(c=z(e,a)))u.raw=c;else if("production"!==n.env.NODE_ENV){var y=l.toLowerCase();c=/[A-Z\-]/.test(r)&&(e.getAttribute(y)||e.getAttribute(":"+y)||e.getAttribute("v-bind:"+y)||e.getAttribute(":"+y+".once")||e.getAttribute("v-bind:"+y+".once")||e.getAttribute(":"+y+".sync")||e.getAttribute("v-bind:"+y+".sync")),c?Di("Possible usage error for prop `"+y+"` - did you mean `"+a+"`? HTML is case-insensitive, remember to use kebab-case for props in templates.",i):o.required&&Di("Missing required prop: "+r,i)}p.push(u)}else"production"!==n.env.NODE_ENV&&Di('Invalid prop key: "'+r+'". Prop keys must be valid identifiers.',i);else Di("Do not use $data as prop.",i);return Ct(p)}function Ct(e){return function(t,n){t._props={};for(var i,o,s,a,c,f=t.$options.propsData,p=e.length;p--;)if(i=e[p],c=i.raw,o=i.path,s=i.options,t._props[o]=i,f&&r(f,o)&&Nt(t,i,f[o]),null===c)Nt(t,i,void 0);else if(i.dynamic)i.mode===Dr.ONE_TIME?(a=(n||t._context||t).$get(i.parentPath),Nt(t,i,a)):t._context?t._bindDir({name:"prop",def:Fr,prop:i},null,null,n):Nt(t,i,t.$get(i.parentPath));else if(i.optimizedLiteral){var v=u(c);a=v===c?h(l(c)):v,Nt(t,i,a)}else a=s.type===Boolean&&(""===c||c===d(i.name))||c,Nt(t,i,a)}}function $t(e,t,n,i){var o=t.dynamic&&Be(t.parentPath),r=n;void 0===r&&(r=At(e,t)),r=jt(t,r,e);var s=r!==n;Tt(t,r,e)||(r=void 0),o&&!s?we(function(){i(r)}):i(r)}function Nt(e,t,n){$t(e,t,n,function(n){Ne(e,t.path,n)})}function Ot(e,t,n){$t(e,t,n,function(n){e[t.path]=n})}function At(e,t){var i=t.options;if(!r(i,"default"))return i.type!==Boolean&&void 0;var o=i["default"];return m(o)&&"production"!==n.env.NODE_ENV&&Di('Invalid default value for prop "'+t.name+'": Props with type Object/Array must use a factory function to return the default value.',e),"function"==typeof o&&i.type!==Function?o.call(e):o}function Tt(e,t,i){if(!e.options.required&&(null===e.raw||null==t))return!0;var o=e.options,r=o.type,s=!r,a=[];if(r){Ln(r)||(r=[r]);for(var c=0;c<r.length&&!s;c++){var l=Dt(t,r[c]);a.push(l.expectedType),s=l.valid}}if(!s)return"production"!==n.env.NODE_ENV&&Di('Invalid prop: type check failed for prop "'+e.name+'". Expected '+a.map(St).join(", ")+", got "+Vt(t)+".",i),!1;var h=o.validator;return!(h&&!h(t))||("production"!==n.env.NODE_ENV&&Di('Invalid prop: custom validator check failed for prop "'+e.name+'".',i),!1)}function jt(e,t,i){var o=e.options.coerce;return o?"function"==typeof o?o(t):("production"!==n.env.NODE_ENV&&Di('Invalid coerce for prop "'+e.name+'": expected function, got '+typeof o+".",i),t):t}function Dt(e,t){var n,i;return t===String?(i="string",n=typeof e===i):t===Number?(i="number",n=typeof e===i):t===Boolean?(i="boolean",n=typeof e===i):t===Function?(i="function",n=typeof e===i):t===Object?(i="object",n=g(e)):t===Array?(i="array",n=Ln(e)):n=e instanceof t,{valid:n,expectedType:i}}function St(e){return e?e.charAt(0).toUpperCase()+e.slice(1):"custom type"}function Vt(e){return Object.prototype.toString.call(e).slice(8,-1)}function Pt(e){Mr.push(e),Ir||(Ir=!0,oi(Rt))}function Rt(){for(var e=document.documentElement.offsetHeight,t=0;t<Mr.length;t++)Mr[t]();return Mr=[],Ir=!1,e}function Ft(e,t,i,o){this.id=t,this.el=e,this.enterClass=i&&i.enterClass||t+"-enter",this.leaveClass=i&&i.leaveClass||t+"-leave",this.hooks=i,this.vm=o,this.pendingCssEvent=this.pendingCssCb=this.cancel=this.pendingJsCb=this.op=this.cb=null,this.justEntered=!1,this.entered=this.left=!1,this.typeCache={},this.type=i&&i.type,"production"!==n.env.NODE_ENV&&this.type&&this.type!==Lr&&this.type!==Hr&&Di('invalid CSS transition type for transition="'+this.id+'": '+this.type,o);var r=this;["enterNextTick","enterDone","leaveNextTick","leaveDone"].forEach(function(e){r[e]=_(r[e],r)})}function Mt(e){if(/svg$/.test(e.namespaceURI)){var t=e.getBoundingClientRect();return!(t.width||t.height)}return!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function It(e,t,n){var i=n||!t._asComponent?qt(e,t):null,o=i&&i.terminal||hn(e)||!e.hasChildNodes()?null:Zt(e.childNodes,t);return function(e,t,n,r,s){var a=y(t.childNodes),c=Lt(function(){i&&i(e,t,n,r,s),o&&o(e,a,n,r,s)},e);return zt(e,c)}}function Lt(e,t){"production"===n.env.NODE_ENV&&(t._directives=[]);var i=t._directives.length;e();var o=t._directives.slice(i);o.sort(Ht);for(var r=0,s=o.length;r<s;r++)o[r]._bind();return o}function Ht(e,t){return e=e.descriptor.def.priority||es,t=t.descriptor.def.priority||es,e>t?-1:e===t?0:1}function zt(e,t,n,i){function o(o){Bt(e,t,o),n&&i&&Bt(n,i)}return o.dirs=t,o}function Bt(e,t,i){for(var o=t.length;o--;)t[o]._teardown(),"production"===n.env.NODE_ENV||i||e._directives.$remove(t[o])}function Ut(e,t,n,i){var o=kt(t,n,e),r=Lt(function(){o(e,i)},e);return zt(e,r)}function Wt(e,t,i){var o,r,s=t._containerAttrs,a=t._replacerAttrs;if(11!==e.nodeType)t._asComponent?(s&&i&&(o=sn(s,i)),a&&(r=sn(a,t))):r=sn(e.attributes,t);else if("production"!==n.env.NODE_ENV&&s){var c=s.filter(function(e){return e.name.indexOf("_v-")<0&&!Gr.test(e.name)&&"slot"!==e.name}).map(function(e){return'"'+e.name+'"'});if(c.length){var l=c.length>1;Di("Attribute"+(l?"s ":" ")+c.join(", ")+(l?" are":" is")+" ignored on component <"+t.el.tagName.toLowerCase()+"> because the component is a fragment instance: http://vuejs.org/guide/components.html#Fragment-Instance")}}return t._containerAttrs=t._replacerAttrs=null,function(e,t,n){var i,s=e._context;s&&o&&(i=Lt(function(){o(s,t,null,n)},s));var a=Lt(function(){r&&r(e,t)},e);return zt(e,a,s,i)}}function qt(e,t){var n=e.nodeType;return 1!==n||hn(e)?3===n&&e.data.trim()?Qt(e,t):null:Jt(e,t)}function Jt(e,t){if("TEXTAREA"===e.tagName){var n=D(e.value);n&&(e.setAttribute(":value",S(n)),e.value="")}var i,o=e.hasAttributes(),r=o&&y(e.attributes);return o&&(i=nn(e,r,t)),i||(i=en(e,t)),i||(i=tn(e,t)),!i&&o&&(i=sn(r,t)),i}function Qt(e,t){if(e._skip)return Yt;var n=D(e.wholeText);if(!n)return null;for(var i=e.nextSibling;i&&3===i.nodeType;)i._skip=!0,i=i.nextSibling;for(var o,r,s=document.createDocumentFragment(),a=0,c=n.length;a<c;a++)r=n[a],o=r.tag?Gt(r,t):document.createTextNode(r.value),s.appendChild(o);return Kt(n,s,t)}function Yt(e,t){J(t)}function Gt(e,t){function n(t){if(!e.descriptor){var n=A(e.value);e.descriptor={name:t,def:Ar[t],expression:n.expression,filters:n.filters}}}var i;return e.oneTime?i=document.createTextNode(e.value):e.html?(i=document.createComment("v-html"),n("html")):(i=document.createTextNode(" "),n("text")),i}function Kt(e,t){return function(n,i,o,r){for(var s,a,l,h=t.cloneNode(!0),u=y(h.childNodes),f=0,p=e.length;f<p;f++)s=e[f],a=s.value,s.tag&&(l=u[f],s.oneTime?(a=(r||n).$eval(a),s.html?Y(l,et(a,!0)):l.data=c(a)):n._bindDir(s.descriptor,l,o,r));Y(i,h)}}function Zt(e,t){for(var n,i,o,r=[],s=0,a=e.length;s<a;s++)o=e[s],n=qt(o,t),i=n&&n.terminal||"SCRIPT"===o.tagName||!o.hasChildNodes()?null:Zt(o.childNodes,t),r.push(n,i);return r.length?Xt(r):null}function Xt(e){return function(t,n,i,o,r){for(var s,a,c,l=0,h=0,u=e.length;l<u;h++){s=n[h],a=e[l++],c=e[l++];var f=y(s.childNodes);a&&a(t,s,i,o,r),c&&c(t,f,i,o,r)}}}function en(e,t){var n=e.tagName.toLowerCase();if(!Ri.test(n)){var i=ge(t,"elementDirectives",n);return i?rn(e,n,"",t,i):void 0}}function tn(e,t){var n=fe(e,t);if(n){var i=ae(e),o={name:"component",ref:i,expression:n.id,def:Qr.component,modifiers:{literal:!n.dynamic}},r=function(e,t,n,r,s){i&&Ne((r||e).$refs,i,null),e._bindDir(o,t,n,r,s)};return r.terminal=!0,r}}function nn(e,t,n){if(null!==z(e,"v-pre"))return on;if(e.hasAttribute("v-else")){var i=e.previousElementSibling;if(i&&i.hasAttribute("v-if"))return on}for(var o,r,s,a,c,l,h,u,f,p,d=0,v=t.length;d<v;d++)o=t[d],r=o.name.replace(Zr,""),(c=r.match(Kr))&&(f=ge(n,"directives",c[1]),f&&f.terminal&&(!p||(f.priority||ts)>p.priority)&&(p=f,h=o.name,a=an(o.name),s=o.value,l=c[1],u=c[2]));return p?rn(e,l,s,n,p,h,u,a):void 0}function on(){}function rn(e,t,n,i,o,r,s,a){var c=A(n),l={name:t,arg:s,expression:c.expression,filters:c.filters,raw:n,attr:r,modifiers:a,def:o};"for"!==t&&"router-view"!==t||(l.ref=ae(e));var h=function(e,t,n,i,o){l.ref&&Ne((i||e).$refs,l.ref,null),e._bindDir(l,t,n,i,o)};return h.terminal=!0,h}function sn(e,t){function i(e,t,n){var i=n&&ln(n),o=!i&&A(s);_.push({name:e,attr:a,raw:c,def:t,arg:h,modifiers:u,expression:o&&o.expression,filters:o&&o.filters,interp:n,hasOneTime:i})}for(var o,r,s,a,c,l,h,u,f,p,d,v=e.length,_=[];v--;)if(o=e[v],r=a=o.name,s=c=o.value,p=D(s),h=null,u=an(r),r=r.replace(Zr,""),p)s=S(p),h=r,i("bind",Ar.bind,p),"production"!==n.env.NODE_ENV&&"class"===r&&Array.prototype.some.call(e,function(e){return":class"===e.name||"v-bind:class"===e.name})&&Di('class="'+c+'": Do not mix mustache interpolation and v-bind for "class" on the same element. Use one or the other.',t);else if(Xr.test(r))u.literal=!Yr.test(r),i("transition",Qr.transition);else if(Gr.test(r))h=r.replace(Gr,""),i("on",Ar.on);else if(Yr.test(r))l=r.replace(Yr,""),"style"===l||"class"===l?i(l,Qr[l]):(h=l,i("bind",Ar.bind));else if(d=r.match(Kr)){if(l=d[1],h=d[2],"else"===l)continue;f=ge(t,"directives",l,!0),f&&i(l,f)}if(_.length)return cn(_)}function an(e){var t=Object.create(null),n=e.match(Zr);if(n)for(var i=n.length;i--;)t[n[i].slice(1)]=!0;return t}function cn(e){return function(t,n,i,o,r){for(var s=e.length;s--;)t._bindDir(e[s],n,i,o,r)}}function ln(e){for(var t=e.length;t--;)if(e[t].oneTime)return!0}function hn(e){return"SCRIPT"===e.tagName&&(!e.hasAttribute("type")||"text/javascript"===e.getAttribute("type"))}function un(e,t){return t&&(t._containerAttrs=pn(e)),re(e)&&(e=et(e)),t&&(t._asComponent&&!t.template&&(t.template="<slot></slot>"),t.template&&(t._content=ne(e),e=fn(e,t))),he(e)&&(Q(se("v-start",!0),e),e.appendChild(se("v-end",!0))),e}function fn(e,t){var i=t.template,o=et(i,!0);if(o){var r=o.firstChild,s=r.tagName&&r.tagName.toLowerCase();return t.replace?(e===document.body&&"production"!==n.env.NODE_ENV&&Di("You are mounting an instance with a template to <body>. This will replace <body> entirely. You should probably use `replace: false` here."),o.childNodes.length>1||1!==r.nodeType||"component"===s||ge(t,"components",s)||U(r,"is")||ge(t,"elementDirectives",s)||r.hasAttribute("v-for")||r.hasAttribute("v-if")?o:(t._replacerAttrs=pn(r),dn(e,r),r)):(e.appendChild(o),e)}"production"!==n.env.NODE_ENV&&Di("Invalid template option: "+i)}function pn(e){if(1===e.nodeType&&e.hasAttributes())return y(e.attributes)}function dn(e,t){for(var n,i,o=e.attributes,r=o.length;r--;)n=o[r].name,i=o[r].value,t.hasAttribute(n)||ns.test(n)?"class"===n&&!D(i)&&(i=i.trim())&&i.split(/\s+/).forEach(function(e){ee(t,e)}):t.setAttribute(n,i)}function vn(e,t){if(t){for(var i,o,r=e._slotContents=Object.create(null),s=0,a=t.children.length;s<a;s++)i=t.children[s],(o=i.getAttribute("slot"))&&(r[o]||(r[o]=[])).push(i),"production"!==n.env.NODE_ENV&&B(i,"slot")&&Di('The "slot" attribute must be static.',e.$parent);for(o in r)r[o]=_n(r[o],t);if(t.hasChildNodes()){var c=t.childNodes;if(1===c.length&&3===c[0].nodeType&&!c[0].data.trim())return;r["default"]=_n(t.childNodes,t)}}}function _n(e,t){var n=document.createDocumentFragment();e=y(e);for(var i=0,o=e.length;i<o;i++){var r=e[i];!re(r)||r.hasAttribute("v-if")||r.hasAttribute("v-for")||(t.removeChild(r),r=et(r,!0)),n.appendChild(r)}return n}function yn(e){function t(){}function i(e,t){var n=new Qe(t,e,null,{lazy:!0});return function(){return n.dirty&&n.evaluate(),
Ee.target&&n.depend(),n.value}}Object.defineProperty(e.prototype,"$data",{get:function(){return this._data},set:function(e){e!==this._data&&this._setData(e)}}),e.prototype._initState=function(){this._initProps(),this._initMeta(),this._initMethods(),this._initData(),this._initComputed()},e.prototype._initProps=function(){var e=this.$options,t=e.el,i=e.props;i&&!t&&"production"!==n.env.NODE_ENV&&Di("Props will not be compiled if no `el` option is provided at instantiation.",this),t=e.el=L(t),this._propsUnlinkFn=t&&1===t.nodeType&&i?Ut(this,t,i,this._scope):null},e.prototype._initData=function(){var e=this.$options.data,t=this._data=e?e():{};g(t)||(t={},"production"!==n.env.NODE_ENV&&Di("data functions should return an object.",this));var i,o,s=this._props,a=Object.keys(t);for(i=a.length;i--;)o=a[i],s&&r(s,o)?"production"!==n.env.NODE_ENV&&Di('Data field "'+o+'" is already defined as a prop. To provide default value for a prop, use the "default" prop option; if you want to pass prop values to an instantiation call, use the "propsData" option.',this):this._proxy(o);$e(t,this)},e.prototype._setData=function(e){e=e||{};var t=this._data;this._data=e;var n,i,o;for(n=Object.keys(t),o=n.length;o--;)i=n[o],i in e||this._unproxy(i);for(n=Object.keys(e),o=n.length;o--;)i=n[o],r(this,i)||this._proxy(i);t.__ob__.removeVm(this),$e(e,this),this._digest()},e.prototype._proxy=function(e){if(!a(e)){var t=this;Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return t._data[e]},set:function(n){t._data[e]=n}})}},e.prototype._unproxy=function(e){a(e)||delete this[e]},e.prototype._digest=function(){for(var e=0,t=this._watchers.length;e<t;e++)this._watchers[e].update(!0)},e.prototype._initComputed=function(){var e=this.$options.computed;if(e)for(var n in e){var o=e[n],r={enumerable:!0,configurable:!0};"function"==typeof o?(r.get=i(o,this),r.set=t):(r.get=o.get?o.cache!==!1?i(o.get,this):_(o.get,this):t,r.set=o.set?_(o.set,this):t),Object.defineProperty(this,n,r)}},e.prototype._initMethods=function(){var e=this.$options.methods;if(e)for(var t in e)this[t]=_(e[t],this)},e.prototype._initMeta=function(){var e=this.$options._meta;if(e)for(var t in e)Ne(this,t,e[t])}}function bn(e){function t(e,t){for(var n,i,o,r=t.attributes,s=0,a=r.length;s<a;s++)n=r[s].name,os.test(n)&&(n=n.replace(os,""),i=r[s].value,Be(i)&&(i+=".apply(this, $arguments)"),o=(e._scope||e._context).$eval(i,!0),o._fromParent=!0,e.$on(n.replace(os),o))}function i(e,t,n){if(n){var i,r,s,a;for(r in n)if(i=n[r],Ln(i))for(s=0,a=i.length;s<a;s++)o(e,t,r,i[s]);else o(e,t,r,i)}}function o(e,t,i,r,s){var a=typeof r;if("function"===a)e[t](i,r,s);else if("string"===a){var c=e.$options.methods,l=c&&c[r];l?e[t](i,l,s):"production"!==n.env.NODE_ENV&&Di('Unknown method: "'+r+'" when registering callback for '+t+': "'+i+'".',e)}else r&&"object"===a&&o(e,t,i,r.handler,r)}function r(){this._isAttached||(this._isAttached=!0,this.$children.forEach(s))}function s(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function a(){this._isAttached&&(this._isAttached=!1,this.$children.forEach(c))}function c(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}e.prototype._initEvents=function(){var e=this.$options;e._asComponent&&t(this,e.el),i(this,"$on",e.events),i(this,"$watch",e.watch)},e.prototype._initDOMHooks=function(){this.$on("hook:attached",r),this.$on("hook:detached",a)},e.prototype._callHook=function(e){this.$emit("pre-hook:"+e);var t=this.$options[e];if(t)for(var n=0,i=t.length;n<i;n++)t[n].call(this);this.$emit("hook:"+e)}}function mn(){}function gn(e,t,i,o,r,s){this.vm=t,this.el=i,this.descriptor=e,this.name=e.name,this.expression=e.expression,this.arg=e.arg,this.modifiers=e.modifiers,this.filters=e.filters,this.literal=this.modifiers&&this.modifiers.literal,this._locked=!1,this._bound=!1,this._listeners=null,this._host=o,this._scope=r,this._frag=s,"production"!==n.env.NODE_ENV&&this.el&&(this.el._vue_directives=this.el._vue_directives||[],this.el._vue_directives.push(this))}function En(e){e.prototype._updateRef=function(e){var t=this.$options._ref;if(t){var n=(this._scope||this._context).$refs;e?n[t]===this&&(n[t]=null):n[t]=this}},e.prototype._compile=function(e){var t=this.$options,n=e;if(e=un(e,t),this._initElement(e),1!==e.nodeType||null===z(e,"v-pre")){var i=this._context&&this._context.$options,o=Wt(e,t,i);vn(this,t._content);var r,s=this.constructor;t._linkerCachable&&(r=s.linker,r||(r=s.linker=It(e,t)));var a=o(this,e,this._scope),c=r?r(this,e):It(e,t)(this,e);this._unlinkFn=function(){a(),c(!0)},t.replace&&Y(n,e),this._isCompiled=!0,this._callHook("compiled")}},e.prototype._initElement=function(e){he(e)?(this._isFragment=!0,this.$el=this._fragmentStart=e.firstChild,this._fragmentEnd=e.lastChild,3===this._fragmentStart.nodeType&&(this._fragmentStart.data=this._fragmentEnd.data=""),this._fragment=e):this.$el=e,this.$el.__vue__=this,this._callHook("beforeCompile")},e.prototype._bindDir=function(e,t,n,i,o){this._directives.push(new gn(e,this,t,n,i,o))},e.prototype._destroy=function(e,t){if(this._isBeingDestroyed)return void(t||this._cleanup());var n,i,o=this,r=function(){!n||i||t||o._cleanup()};e&&this.$el&&(i=!0,this.$remove(function(){i=!1,r()})),this._callHook("beforeDestroy"),this._isBeingDestroyed=!0;var s,a=this.$parent;for(a&&!a._isBeingDestroyed&&(a.$children.$remove(this),this._updateRef(!0)),s=this.$children.length;s--;)this.$children[s].$destroy();for(this._propsUnlinkFn&&this._propsUnlinkFn(),this._unlinkFn&&this._unlinkFn(),s=this._watchers.length;s--;)this._watchers[s].teardown();this.$el&&(this.$el.__vue__=null),n=!0,r()},e.prototype._cleanup=function(){this._isDestroyed||(this._frag&&this._frag.children.$remove(this),this._data&&this._data.__ob__&&this._data.__ob__.removeVm(this),this.$el=this.$parent=this.$root=this.$children=this._watchers=this._context=this._scope=this._directives=null,this._isDestroyed=!0,this._callHook("destroyed"),this.$off())}}function wn(e){e.prototype._applyFilters=function(e,t,n,i){var o,r,s,a,c,l,h,u,f;for(l=0,h=n.length;l<h;l++)if(o=n[i?h-l-1:l],r=ge(this.$options,"filters",o.name,!0),r&&(r=i?r.write:r.read||r,"function"==typeof r)){if(s=i?[e,t]:[e],c=i?2:1,o.args)for(u=0,f=o.args.length;u<f;u++)a=o.args[u],s[u+c]=a.dynamic?this.$get(a.value):a.value;e=r.apply(this,s)}return e},e.prototype._resolveComponent=function(t,i){var o;if(o="function"==typeof t?t:ge(this.$options,"components",t,!0))if(o.options)i(o);else if(o.resolved)i(o.resolved);else if(o.requested)o.pendingCallbacks.push(i);else{o.requested=!0;var r=o.pendingCallbacks=[i];o.call(this,function(t){g(t)&&(t=e.extend(t)),o.resolved=t;for(var n=0,i=r.length;n<i;n++)r[n](t)},function(e){"production"!==n.env.NODE_ENV&&Di("Failed to resolve async component"+("string"==typeof t?": "+t:"")+". "+(e?"\nReason: "+e:""))})}}}function xn(e){function t(e){return JSON.parse(JSON.stringify(e))}e.prototype.$get=function(e,t){var n=ze(e);if(n){if(t){var i=this;return function(){i.$arguments=y(arguments);var e=n.get.call(i,i);return i.$arguments=null,e}}try{return n.get.call(this,this)}catch(o){}}},e.prototype.$set=function(e,t){var n=ze(e,!0);n&&n.set&&n.set.call(this,this,t)},e.prototype.$delete=function(e){o(this._data,e)},e.prototype.$watch=function(e,t,n){var i,o=this;"string"==typeof e&&(i=A(e),e=i.expression);var r=new Qe(o,e,t,{deep:n&&n.deep,sync:n&&n.sync,filters:i&&i.filters,user:!n||n.user!==!1});return n&&n.immediate&&t.call(o,r.value),function(){r.teardown()}},e.prototype.$eval=function(e,t){if(rs.test(e)){var n=A(e),i=this.$get(n.expression,t);return n.filters?this._applyFilters(i,null,n.filters):i}return this.$get(e,t)},e.prototype.$interpolate=function(e){var t=D(e),n=this;return t?1===t.length?n.$eval(t[0].value)+"":t.map(function(e){return e.tag?n.$eval(e.value):e.value}).join(""):e},e.prototype.$log=function(e){var n=e?Se(this._data,e):this._data;if(n&&(n=t(n)),!e){var i;for(i in this.$options.computed)n[i]=t(this[i]);if(this._props)for(i in this._props)n[i]=t(this[i])}console.log(n)}}function kn(e){function t(e,t,i,o,r,s){t=n(t);var a=!H(t),c=o===!1||a?r:s,l=!a&&!e._isAttached&&!H(e.$el);return e._isFragment?(ce(e._fragmentStart,e._fragmentEnd,function(n){c(n,t,e)}),i&&i()):c(e.$el,t,e,i),l&&e._callHook("attached"),e}function n(e){return"string"==typeof e?document.querySelector(e):e}function i(e,t,n,i){t.appendChild(e),i&&i()}function o(e,t,n,i){W(e,t),i&&i()}function r(e,t,n){J(e),n&&n()}e.prototype.$nextTick=function(e){oi(e,this)},e.prototype.$appendTo=function(e,n,o){return t(this,e,n,o,i,R)},e.prototype.$prependTo=function(e,t,i){return e=n(e),e.hasChildNodes()?this.$before(e.firstChild,t,i):this.$appendTo(e,t,i),this},e.prototype.$before=function(e,n,i){return t(this,e,n,i,o,F)},e.prototype.$after=function(e,t,i){return e=n(e),e.nextSibling?this.$before(e.nextSibling,t,i):this.$appendTo(e.parentNode,t,i),this},e.prototype.$remove=function(e,t){if(!this.$el.parentNode)return e&&e();var n=this._isAttached&&H(this.$el);n||(t=!1);var i=this,o=function(){n&&i._callHook("detached"),e&&e()};if(this._isFragment)le(this._fragmentStart,this._fragmentEnd,this,this._fragment,o);else{var s=t===!1?r:M;s(this.$el,this,o)}return this}}function Cn(e){function t(e,t,i){var o=e.$parent;if(o&&i&&!n.test(t))for(;o;)o._eventsCount[t]=(o._eventsCount[t]||0)+i,o=o.$parent}e.prototype.$on=function(e,n){return(this._events[e]||(this._events[e]=[])).push(n),t(this,e,1),this},e.prototype.$once=function(e,t){function n(){i.$off(e,n),t.apply(this,arguments)}var i=this;return n.fn=t,this.$on(e,n),this},e.prototype.$off=function(e,n){var i;if(!arguments.length){if(this.$parent)for(e in this._events)i=this._events[e],i&&t(this,e,-i.length);return this._events={},this}if(i=this._events[e],!i)return this;if(1===arguments.length)return t(this,e,-i.length),this._events[e]=null,this;for(var o,r=i.length;r--;)if(o=i[r],o===n||o.fn===n){t(this,e,-1),i.splice(r,1);break}return this},e.prototype.$emit=function(e){var t="string"==typeof e;e=t?e:e.name;var n=this._events[e],i=t||!n;if(n){n=n.length>1?y(n):n;var o=t&&n.some(function(e){return e._fromParent});o&&(i=!1);for(var r=y(arguments,1),s=0,a=n.length;s<a;s++){var c=n[s],l=c.apply(this,r);l!==!0||o&&!c._fromParent||(i=!0)}}return i},e.prototype.$broadcast=function(e){var t="string"==typeof e;if(e=t?e:e.name,this._eventsCount[e]){var n=this.$children,i=y(arguments);t&&(i[0]={name:e,source:this});for(var o=0,r=n.length;o<r;o++){var s=n[o],a=s.$emit.apply(s,i);a&&s.$broadcast.apply(s,i)}return this}},e.prototype.$dispatch=function(e){var t=this.$emit.apply(this,arguments);if(t){var n=this.$parent,i=y(arguments);for(i[0]={name:e,source:this};n;)t=n.$emit.apply(n,i),n=t?n.$parent:null;return this}};var n=/^hook:/}function $n(e){function t(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")}e.prototype.$mount=function(e){return this._isCompiled?void("production"!==n.env.NODE_ENV&&Di("$mount() should be called only once.",this)):(e=L(e),e||(e=document.createElement("div")),this._compile(e),this._initDOMHooks(),H(this.$el)?(this._callHook("attached"),t.call(this)):this.$once("hook:attached",t),this)},e.prototype.$destroy=function(e,t){this._destroy(e,t)},e.prototype.$compile=function(e,t,n,i){return It(e,this.$options,!0)(this,e,t,n,i)}}function Nn(e){this._init(e)}function On(e,t,n){return n=n?parseInt(n,10):0,t=l(t),"number"==typeof t?e.slice(n,n+t):e}function An(e,t,n){if(e=ls(e),null==t)return e;if("function"==typeof t)return e.filter(t);t=(""+t).toLowerCase();for(var i,o,r,s,a="in"===n?3:2,c=Array.prototype.concat.apply([],y(arguments,a)),l=[],h=0,u=e.length;h<u;h++)if(i=e[h],r=i&&i.$value||i,s=c.length){for(;s--;)if(o=c[s],"$key"===o&&jn(i.$key,t)||jn(Se(r,o),t)){l.push(i);break}}else jn(i,t)&&l.push(i);return l}function Tn(e){function t(e,t,n){var o=i[n];return o&&("$key"!==o&&(m(e)&&"$value"in e&&(e=e.$value),m(t)&&"$value"in t&&(t=t.$value)),e=m(e)?Se(e,o):e,t=m(t)?Se(t,o):t),e===t?0:e>t?r:-r}var n=null,i=void 0;e=ls(e);var o=y(arguments,1),r=o[o.length-1];"number"==typeof r?(r=r<0?-1:1,o=o.length>1?o.slice(0,-1):o):r=1;var s=o[0];return s?("function"==typeof s?n=function(e,t){return s(e,t)*r}:(i=Array.prototype.concat.apply([],o),n=function(e,o,r){return r=r||0,r>=i.length-1?t(e,o,r):t(e,o,r)||n(e,o,r+1)}),e.slice().sort(n)):e}function jn(e,t){var n;if(g(e)){var i=Object.keys(e);for(n=i.length;n--;)if(jn(e[i[n]],t))return!0}else if(Ln(e)){for(n=e.length;n--;)if(jn(e[n],t))return!0}else if(null!=e)return e.toString().toLowerCase().indexOf(t)>-1}function Dn(e){function t(e){return new Function("return function "+v(e)+" (options) { this._init(options) }")()}e.options={directives:Ar,elementDirectives:cs,filters:us,transitions:{},components:{},partials:{},replace:!0},e.util=qi,e.config=ji,e.set=i,e["delete"]=o,e.nextTick=oi,e.compiler=is,e.FragmentFactory=ct,e.internalDirectives=Qr,e.parsers={path:ho,text:Oi,template:zo,directive:wi,expression:Co},e.cid=0;var r=1;e.extend=function(e){e=e||{};var i=this,o=0===i.cid;if(o&&e._Ctor)return e._Ctor;var s=e.name||i.options.name;"production"!==n.env.NODE_ENV&&(/^[a-zA-Z][\w-]*$/.test(s)||(Di('Invalid component name: "'+s+'". Component names can only contain alphanumeric characaters and the hyphen.'),s=null));var a=t(s||"VueComponent");return a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.cid=r++,a.options=me(i.options,e),a["super"]=i,a.extend=i.extend,ji._assetTypes.forEach(function(e){a[e]=i[e]}),s&&(a.options.components[s]=a),o&&(e._Ctor=a),a},e.use=function(e){if(!e.installed){var t=y(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):e.apply(null,t),e.installed=!0,this}},e.mixin=function(t){e.options=me(e.options,t)},ji._assetTypes.forEach(function(t){e[t]=function(i,o){return o?("production"!==n.env.NODE_ENV&&"component"===t&&(Ri.test(i)||Fi.test(i))&&Di("Do not use built-in or reserved HTML elements as component id: "+i),"component"===t&&g(o)&&(o.name||(o.name=i),o=e.extend(o)),this.options[t+"s"][i]=o,o):this.options[t+"s"][i]}}),b(e.transition,Vi)}var Sn=Object.prototype.hasOwnProperty,Vn=/^\s?(true|false|-?[\d\.]+|'[^']*'|"[^"]*")\s?$/,Pn=/-(\w)/g,Rn=/([a-z\d])([A-Z])/g,Fn=/(?:^|[-_\/])(\w)/g,Mn=Object.prototype.toString,In="[object Object]",Ln=Array.isArray,Hn="__proto__"in{},zn="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),Bn=zn&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,Un=zn&&window.navigator.userAgent.toLowerCase(),Wn=Un&&Un.indexOf("trident")>0,qn=Un&&Un.indexOf("msie 9.0")>0,Jn=Un&&Un.indexOf("android")>0,Qn=Un&&/(iphone|ipad|ipod|ios)/i.test(Un),Yn=Qn&&Un.match(/os ([\d_]+)/),Gn=Yn&&Yn[1].split("_"),Kn=Gn&&Number(Gn[0])>=9&&Number(Gn[1])>=3&&!window.indexedDB,Zn=void 0,Xn=void 0,ei=void 0,ti=void 0;if(zn&&!qn){var ni=void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend,ii=void 0===window.onanimationend&&void 0!==window.onwebkitanimationend;Zn=ni?"WebkitTransition":"transition",Xn=ni?"webkitTransitionEnd":"transitionend",ei=ii?"WebkitAnimation":"animation",ti=ii?"webkitAnimationEnd":"animationend"}var oi=function(){function e(){o=!1;var e=i.slice(0);i=[];for(var t=0;t<e.length;t++)e[t]()}var n,i=[],o=!1;if("undefined"==typeof MutationObserver||Kn){var r=zn?window:"undefined"!=typeof t?t:{};n=r.setImmediate||setTimeout}else{var s=1,a=new MutationObserver(e),c=document.createTextNode(s);a.observe(c,{characterData:!0}),n=function(){s=(s+1)%2,c.data=s}}return function(t,r){var s=r?function(){t.call(r)}:t;i.push(s),o||(o=!0,n(e,0))}}(),ri=void 0;"undefined"!=typeof Set&&Set.toString().match(/native code/)?ri=Set:(ri=function(){this.set=Object.create(null)},ri.prototype.has=function(e){return void 0!==this.set[e]},ri.prototype.add=function(e){this.set[e]=1},ri.prototype.clear=function(){this.set=Object.create(null)});var si=$.prototype;si.put=function(e,t){var n,i=this.get(e,!0);return i||(this.size===this.limit&&(n=this.shift()),i={key:e},this._keymap[e]=i,this.tail?(this.tail.newer=i,i.older=this.tail):this.head=i,this.tail=i,this.size++),i.value=t,n},si.shift=function(){var e=this.head;return e&&(this.head=this.head.newer,this.head.older=void 0,e.newer=e.older=void 0,this._keymap[e.key]=void 0,this.size--),e},si.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return n===this.tail?t?n:n.value:(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n,t?n:n.value)};var ai,ci,li,hi,ui,fi,pi,di,vi,_i,yi,bi,mi=new $(1e3),gi=/[^\s'"]+|'[^']*'|"[^"]*"/g,Ei=/^in$|^-?\d+/,wi=Object.freeze({parseDirective:A}),xi=/[-.*+?^${}()|[\]\/\\]/g,ki=void 0,Ci=void 0,$i=void 0,Ni=/[^|]\|[^|]/,Oi=Object.freeze({compileRegex:j,parseText:D,tokensToExp:S}),Ai=["{{","}}"],Ti=["{{{","}}}"],ji=Object.defineProperties({debug:!1,silent:!1,async:!0,warnExpressionErrors:!0,devtools:"production"!==n.env.NODE_ENV,_delimitersChanged:!0,_assetTypes:["component","directive","elementDirective","filter","transition","partial"],_propBindingModes:{ONE_WAY:0,TWO_WAY:1,ONE_TIME:2},_maxUpdateCount:100},{delimiters:{get:function(){return Ai},set:function(e){Ai=e,j()},configurable:!0,enumerable:!0},unsafeDelimiters:{get:function(){return Ti},set:function(e){Ti=e,j()},configurable:!0,enumerable:!0}}),Di=void 0,Si=void 0;"production"!==n.env.NODE_ENV&&!function(){var e="undefined"!=typeof console;Di=function(t,n){e&&!ji.silent&&console.error("[Vue warn]: "+t+(n?Si(n):""))},Si=function(e){var t=e._isVue?e.$options.name:e.name;return t?" (found in component: <"+d(t)+">)":""}}();var Vi=Object.freeze({appendWithTransition:R,beforeWithTransition:F,removeWithTransition:M,applyTransition:I}),Pi=/^v-ref:/,Ri=/^(div|p|span|img|a|b|i|br|ul|ol|li|h1|h2|h3|h4|h5|h6|code|pre|table|th|td|tr|form|label|input|select|option|nav|article|section|header|footer)$/i,Fi=/^(slot|partial|component)$/i,Mi=void 0;"production"!==n.env.NODE_ENV&&(Mi=function(e,t){return t.indexOf("-")>-1?e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:/HTMLUnknownElement/.test(e.toString())&&!/^(data|time|rtc|rb|details|dialog|summary)$/.test(t)});var Ii=ji.optionMergeStrategies=Object.create(null);Ii.data=function(e,t,i){return i?e||t?function(){var n="function"==typeof t?t.call(i):t,o="function"==typeof e?e.call(i):void 0;return n?de(n,o):o}:void 0:t?"function"!=typeof t?("production"!==n.env.NODE_ENV&&Di('The "data" option should be a function that returns a per-instance value in component definitions.',i),e):e?function(){return de(t.call(this),e.call(this))}:t:e},Ii.el=function(e,t,i){if(!i&&t&&"function"!=typeof t)return void("production"!==n.env.NODE_ENV&&Di('The "el" option should be a function that returns a per-instance value in component definitions.',i));var o=t||e;return i&&"function"==typeof o?o.call(i):o},Ii.init=Ii.created=Ii.ready=Ii.attached=Ii.detached=Ii.beforeCompile=Ii.compiled=Ii.beforeDestroy=Ii.destroyed=Ii.activate=function(e,t){return t?e?e.concat(t):Ln(t)?t:[t]:e},ji._assetTypes.forEach(function(e){Ii[e+"s"]=ve}),Ii.watch=Ii.events=function(e,t){if(!t)return e;if(!e)return t;var n={};b(n,e);for(var i in t){var o=n[i],r=t[i];o&&!Ln(o)&&(o=[o]),n[i]=o?o.concat(r):[r]}return n},Ii.props=Ii.methods=Ii.computed=function(e,t){if(!t)return e;if(!e)return t;var n=Object.create(null);return b(n,e),b(n,t),n};var Li=function(e,t){return void 0===t?e:t},Hi=0;Ee.target=null,Ee.prototype.addSub=function(e){this.subs.push(e)},Ee.prototype.removeSub=function(e){this.subs.$remove(e)},Ee.prototype.depend=function(){Ee.target.addDep(this)},Ee.prototype.notify=function(){for(var e=y(this.subs),t=0,n=e.length;t<n;t++)e[t].update()};var zi=Array.prototype,Bi=Object.create(zi);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=zi[e];E(Bi,e,function(){for(var n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];var o,r=t.apply(this,i),s=this.__ob__;switch(e){case"push":o=i;break;case"unshift":o=i;break;case"splice":o=i.slice(2)}return o&&s.observeArray(o),s.dep.notify(),r})}),E(zi,"$set",function(e,t){return e>=this.length&&(this.length=Number(e)+1),this.splice(e,1,t)[0]}),E(zi,"$remove",function(e){if(this.length){var t=x(this,e);return t>-1?this.splice(t,1):void 0}});var Ui=Object.getOwnPropertyNames(Bi),Wi=!0;xe.prototype.walk=function(e){for(var t=Object.keys(e),n=0,i=t.length;n<i;n++)this.convert(t[n],e[t[n]])},xe.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)$e(e[t])},xe.prototype.convert=function(e,t){Ne(this.value,e,t)},xe.prototype.addVm=function(e){(this.vms||(this.vms=[])).push(e)},xe.prototype.removeVm=function(e){this.vms.$remove(e)};var qi=Object.freeze({defineReactive:Ne,set:i,del:o,hasOwn:r,isLiteral:s,isReserved:a,_toString:c,toNumber:l,toBoolean:h,stripQuotes:u,camelize:f,hyphenate:d,classify:v,bind:_,toArray:y,extend:b,isObject:m,isPlainObject:g,def:E,debounce:w,indexOf:x,cancellable:k,looseEqual:C,isArray:Ln,hasProto:Hn,inBrowser:zn,devtools:Bn,isIE:Wn,isIE9:qn,isAndroid:Jn,isIos:Qn,iosVersionMatch:Yn,iosVersion:Gn,hasMutationObserverBug:Kn,get transitionProp(){return Zn},get transitionEndEvent(){return Xn},get animationProp(){return ei},get animationEndEvent(){return ti},nextTick:oi,get _Set(){return ri},query:L,inDoc:H,getAttr:z,getBindAttr:B,hasBindAttr:U,before:W,after:q,remove:J,prepend:Q,replace:Y,on:G,off:K,setClass:X,addClass:ee,removeClass:te,extractContent:ne,trimNode:ie,isTemplate:re,createAnchor:se,findRef:ae,mapNodeRange:ce,removeNodeRange:le,isFragment:he,getOuterHTML:ue,mergeOptions:me,resolveAsset:ge,checkComponentAttr:fe,commonTagRE:Ri,reservedTagRE:Fi,get warn(){return Di}}),Ji=0,Qi=new $(1e3),Yi=0,Gi=1,Ki=2,Zi=3,Xi=0,eo=1,to=2,no=3,io=4,oo=5,ro=6,so=7,ao=8,co=[];co[Xi]={ws:[Xi],ident:[no,Yi],"[":[io],eof:[so]},co[eo]={ws:[eo],".":[to],"[":[io],eof:[so]},co[to]={ws:[to],ident:[no,Yi]},co[no]={ident:[no,Yi],0:[no,Yi],number:[no,Yi],ws:[eo,Gi],".":[to,Gi],"[":[io,Gi],eof:[so,Gi]},co[io]={"'":[oo,Yi],'"':[ro,Yi],"[":[io,Ki],"]":[eo,Zi],eof:ao,"else":[io,Yi]},co[oo]={"'":[io,Yi],eof:ao,"else":[oo,Yi]},co[ro]={'"':[io,Yi],eof:ao,"else":[ro,Yi]};var lo;"production"!==n.env.NODE_ENV&&(lo=function(e,t){Di('You are setting a non-existent path "'+e.raw+'" on a vm instance. Consider pre-initializing the property with the "data" option for more reliable reactivity and better performance.',t)});var ho=Object.freeze({parsePath:De,getPath:Se,setPath:Ve}),uo=new $(1e3),fo="Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat",po=new RegExp("^("+fo.replace(/,/g,"\\b|")+"\\b)"),vo="break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,return,super,switch,throw,try,var,while,with,yield,enum,await,implements,package,protected,static,interface,private,public",_o=new RegExp("^("+vo.replace(/,/g,"\\b|")+"\\b)"),yo=/\s/g,bo=/\n/g,mo=/[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`)|new |typeof |void /g,go=/"(\d+)"/g,Eo=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,wo=/[^\w$\.](?:[A-Za-z_$][\w$]*)/g,xo=/^(?:true|false|null|undefined|Infinity|NaN)$/,ko=[],Co=Object.freeze({parseExpression:ze,isSimplePath:Be}),$o=[],No=[],Oo={},Ao={},To=!1,jo=0;Qe.prototype.get=function(){this.beforeGet();var e,t=this.scope||this.vm;try{e=this.getter.call(t,t)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating expression "'+this.expression+'": '+i.toString(),this.vm)}return this.deep&&Ye(e),this.preProcess&&(e=this.preProcess(e)),this.filters&&(e=t._applyFilters(e,null,this.filters,!1)),this.postProcess&&(e=this.postProcess(e)),this.afterGet(),e},Qe.prototype.set=function(e){var t=this.scope||this.vm;this.filters&&(e=t._applyFilters(e,this.value,this.filters,!0));try{this.setter.call(t,t,e)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating setter "'+this.expression+'": '+i.toString(),this.vm)}var o=t.$forContext;if(o&&o.alias===this.expression){if(o.filters)return void("production"!==n.env.NODE_ENV&&Di("It seems you are using two-way binding on a v-for alias ("+this.expression+"), and the v-for has filters. This will not work properly. Either remove the filters or use an array of objects and bind to object properties instead.",this.vm));o._withLock(function(){t.$key?o.rawValue[t.$key]=e:o.rawValue.$set(t.$index,e)})}},Qe.prototype.beforeGet=function(){Ee.target=this},Qe.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},Qe.prototype.afterGet=function(){Ee.target=null;for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Qe.prototype.update=function(e){this.lazy?this.dirty=!0:this.sync||!ji.async?this.run():(this.shallow=this.queued?!!e&&this.shallow:!!e,this.queued=!0,"production"!==n.env.NODE_ENV&&ji.debug&&(this.prevError=new Error("[vue] async stack trace")),Je(this))},Qe.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||(m(e)||this.deep)&&!this.shallow){var t=this.value;this.value=e;var i=this.prevError;if("production"!==n.env.NODE_ENV&&ji.debug&&i){this.prevError=null;try{this.cb.call(this.vm,e,t)}catch(o){throw oi(function(){throw i},0),o}}else this.cb.call(this.vm,e,t)}this.queued=this.shallow=!1}},Qe.prototype.evaluate=function(){var e=Ee.target;this.value=this.get(),this.dirty=!1,Ee.target=e},Qe.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},Qe.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||this.vm._vForRemoving||this.vm._watchers.$remove(this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1,this.vm=this.cb=this.value=null}};var Do=new ri,So={bind:function(){this.attr=3===this.el.nodeType?"data":"textContent"},update:function(e){this.el[this.attr]=c(e)}},Vo=new $(1e3),Po=new $(1e3),Ro={efault:[0,"",""],legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]};Ro.td=Ro.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Ro.option=Ro.optgroup=[1,'<select multiple="multiple">',"</select>"],Ro.thead=Ro.tbody=Ro.colgroup=Ro.caption=Ro.tfoot=[1,"<table>","</table>"],Ro.g=Ro.defs=Ro.symbol=Ro.use=Ro.image=Ro.text=Ro.circle=Ro.ellipse=Ro.line=Ro.path=Ro.polygon=Ro.polyline=Ro.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events"version="1.1">',"</svg>"];var Fo=/<([\w:-]+)/,Mo=/&#?\w+?;/,Io=/<!--/,Lo=function(){if(zn){var e=document.createElement("div");return e.innerHTML="<template>1</template>",!e.cloneNode(!0).firstChild.innerHTML}return!1}(),Ho=function(){if(zn){var e=document.createElement("textarea");return e.placeholder="t","t"===e.cloneNode(!0).value}return!1}(),zo=Object.freeze({cloneNode:Xe,parseTemplate:et}),Bo={bind:function(){8===this.el.nodeType&&(this.nodes=[],this.anchor=se("v-html"),Y(this.el,this.anchor))},update:function(e){e=c(e),this.nodes?this.swap(e):this.el.innerHTML=e},swap:function(e){for(var t=this.nodes.length;t--;)J(this.nodes[t]);var n=et(e,!0,!0);this.nodes=y(n.childNodes),W(n,this.anchor)}};tt.prototype.callHook=function(e){var t,n;for(t=0,n=this.childFrags.length;t<n;t++)this.childFrags[t].callHook(e);for(t=0,n=this.children.length;t<n;t++)e(this.children[t])},tt.prototype.beforeRemove=function(){var e,t;for(e=0,t=this.childFrags.length;e<t;e++)this.childFrags[e].beforeRemove(!1);for(e=0,t=this.children.length;e<t;e++)this.children[e].$destroy(!1,!0);var n=this.unlink.dirs;for(e=0,t=n.length;e<t;e++)n[e]._watcher&&n[e]._watcher.teardown()},tt.prototype.destroy=function(){this.parentFrag&&this.parentFrag.childFrags.$remove(this),this.node.__v_frag=null,this.unlink()};var Uo=new $(5e3);ct.prototype.create=function(e,t,n){var i=Xe(this.template);return new tt(this.linker,this.vm,i,e,t,n)};var Wo=700,qo=800,Jo=850,Qo=1100,Yo=1500,Go=1500,Ko=1750,Zo=2100,Xo=2200,er=2300,tr=0,nr={priority:Xo,terminal:!0,params:["track-by","stagger","enter-stagger","leave-stagger"],bind:function(){var e=this.expression.match(/(.*) (?:in|of) (.*)/);if(e){var t=e[1].match(/\((.*),(.*)\)/);t?(this.iterator=t[1].trim(),this.alias=t[2].trim()):this.alias=e[1].trim(),this.expression=e[2]}if(!this.alias)return void("production"!==n.env.NODE_ENV&&Di('Invalid v-for expression "'+this.descriptor.raw+'": alias is required.',this.vm));this.id="__v-for__"+ ++tr;var i=this.el.tagName;this.isOption=("OPTION"===i||"OPTGROUP"===i)&&"SELECT"===this.el.parentNode.tagName,this.start=se("v-for-start"),this.end=se("v-for-end"),Y(this.el,this.end),W(this.start,this.end),this.cache=Object.create(null),this.factory=new ct(this.vm,this.el)},update:function(e){this.diff(e),this.updateRef(),this.updateModel()},diff:function(e){var t,n,i,o,s,a,c=e[0],l=this.fromObject=m(c)&&r(c,"$key")&&r(c,"$value"),h=this.params.trackBy,u=this.frags,f=this.frags=new Array(e.length),p=this.alias,d=this.iterator,v=this.start,_=this.end,y=H(v),b=!u;for(t=0,n=e.length;t<n;t++)c=e[t],o=l?c.$key:null,s=l?c.$value:c,a=!m(s),i=!b&&this.getCachedFrag(s,t,o),i?(i.reused=!0,i.scope.$index=t,o&&(i.scope.$key=o),d&&(i.scope[d]=null!==o?o:t),(h||l||a)&&we(function(){i.scope[p]=s})):(i=this.create(s,p,t,o),i.fresh=!b),f[t]=i,b&&i.before(_);if(!b){var g=0,E=u.length-f.length;for(this.vm._vForRemoving=!0,t=0,n=u.length;t<n;t++)i=u[t],i.reused||(this.deleteCachedFrag(i),this.remove(i,g++,E,y));this.vm._vForRemoving=!1,g&&(this.vm._watchers=this.vm._watchers.filter(function(e){return e.active}));var w,x,k,C=0;for(t=0,n=f.length;t<n;t++)i=f[t],w=f[t-1],x=w?w.staggerCb?w.staggerAnchor:w.end||w.node:v,i.reused&&!i.staggerCb?(k=lt(i,v,this.id),k===w||k&&lt(k,v,this.id)===w||this.move(i,x)):this.insert(i,C++,x,y),i.reused=i.fresh=!1}},create:function(e,t,n,i){var o=this._host,r=this._scope||this.vm,s=Object.create(r);s.$refs=Object.create(r.$refs),s.$els=Object.create(r.$els),s.$parent=r,s.$forContext=this,we(function(){Ne(s,t,e)}),Ne(s,"$index",n),i?Ne(s,"$key",i):s.$key&&E(s,"$key",null),this.iterator&&Ne(s,this.iterator,null!==i?i:n);var a=this.factory.create(o,s,this._frag);return a.forId=this.id,this.cacheFrag(e,a,n,i),a},updateRef:function(){var e=this.descriptor.ref;if(e){var t,n=(this._scope||this.vm).$refs;this.fromObject?(t={},this.frags.forEach(function(e){t[e.scope.$key]=ht(e)})):t=this.frags.map(ht),n[e]=t}},updateModel:function(){if(this.isOption){var e=this.start.parentNode,t=e&&e.__v_model;t&&t.forceUpdate()}},insert:function(e,t,n,i){e.staggerCb&&(e.staggerCb.cancel(),e.staggerCb=null);var o=this.getStagger(e,t,null,"enter");if(i&&o){var r=e.staggerAnchor;r||(r=e.staggerAnchor=se("stagger-anchor"),r.__v_frag=e),q(r,n);var s=e.staggerCb=k(function(){e.staggerCb=null,e.before(r),J(r)});setTimeout(s,o)}else{var a=n.nextSibling;a||(q(this.end,n),a=this.end),e.before(a)}},remove:function(e,t,n,i){if(e.staggerCb)return e.staggerCb.cancel(),void(e.staggerCb=null);var o=this.getStagger(e,t,n,"leave");if(i&&o){var r=e.staggerCb=k(function(){e.staggerCb=null,e.remove()});setTimeout(r,o)}else e.remove()},move:function(e,t){t.nextSibling||this.end.parentNode.appendChild(this.end),e.before(t.nextSibling,!1)},cacheFrag:function(e,t,i,o){var s,a=this.params.trackBy,c=this.cache,l=!m(e);o||a||l?(s=ft(i,o,e,a),c[s]?"$index"!==a&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):c[s]=t):(s=this.id,r(e,s)?null===e[s]?e[s]=t:"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):Object.isExtensible(e)?E(e,s,t):"production"!==n.env.NODE_ENV&&Di("Frozen v-for objects cannot be automatically tracked, make sure to provide a track-by key.")),t.raw=e;
},getCachedFrag:function(e,t,i){var o,r=this.params.trackBy,s=!m(e);if(i||r||s){var a=ft(t,i,e,r);o=this.cache[a]}else o=e[this.id];return o&&(o.reused||o.fresh)&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e),o},deleteCachedFrag:function(e){var t=e.raw,n=this.params.trackBy,i=e.scope,o=i.$index,s=r(i,"$key")&&i.$key,a=!m(t);if(n||s||a){var c=ft(o,s,t,n);this.cache[c]=null}else t[this.id]=null,e.raw=null},getStagger:function(e,t,n,i){i+="Stagger";var o=e.node.__v_trans,r=o&&o.hooks,s=r&&(r[i]||r.stagger);return s?s.call(e,t,n):t*parseInt(this.params[i]||this.params.stagger,10)},_preProcess:function(e){return this.rawValue=e,e},_postProcess:function(e){if(Ln(e))return e;if(g(e)){for(var t,n=Object.keys(e),i=n.length,o=new Array(i);i--;)t=n[i],o[i]={$key:t,$value:e[t]};return o}return"number"!=typeof e||isNaN(e)||(e=ut(e)),e||[]},unbind:function(){if(this.descriptor.ref&&((this._scope||this.vm).$refs[this.descriptor.ref]=null),this.frags)for(var e,t=this.frags.length;t--;)e=this.frags[t],this.deleteCachedFrag(e),e.destroy()}};"production"!==n.env.NODE_ENV&&(nr.warnDuplicate=function(e){Di('Duplicate value found in v-for="'+this.descriptor.raw+'": '+JSON.stringify(e)+'. Use track-by="$index" if you are expecting duplicate values.',this.vm)});var ir={priority:Zo,terminal:!0,bind:function(){var e=this.el;if(e.__vue__)"production"!==n.env.NODE_ENV&&Di('v-if="'+this.expression+'" cannot be used on an instance root element.',this.vm),this.invalid=!0;else{var t=e.nextElementSibling;t&&null!==z(t,"v-else")&&(J(t),this.elseEl=t),this.anchor=se("v-if"),Y(e,this.anchor)}},update:function(e){this.invalid||(e?this.frag||this.insert():this.remove())},insert:function(){this.elseFrag&&(this.elseFrag.remove(),this.elseFrag=null),this.factory||(this.factory=new ct(this.vm,this.el)),this.frag=this.factory.create(this._host,this._scope,this._frag),this.frag.before(this.anchor)},remove:function(){this.frag&&(this.frag.remove(),this.frag=null),this.elseEl&&!this.elseFrag&&(this.elseFactory||(this.elseFactory=new ct(this.elseEl._context||this.vm,this.elseEl)),this.elseFrag=this.elseFactory.create(this._host,this._scope,this._frag),this.elseFrag.before(this.anchor))},unbind:function(){this.frag&&this.frag.destroy(),this.elseFrag&&this.elseFrag.destroy()}},or={bind:function(){var e=this.el.nextElementSibling;e&&null!==z(e,"v-else")&&(this.elseEl=e)},update:function(e){this.apply(this.el,e),this.elseEl&&this.apply(this.elseEl,!e)},apply:function(e,t){function n(){e.style.display=t?"":"none"}H(e)?I(e,t?1:-1,n,this.vm):n()}},rr={bind:function(){var e=this,t=this.el,n="range"===t.type,i=this.params.lazy,o=this.params.number,r=this.params.debounce,s=!1;if(Jn||n||(this.on("compositionstart",function(){s=!0}),this.on("compositionend",function(){s=!1,i||e.listener()})),this.focused=!1,n||i||(this.on("focus",function(){e.focused=!0}),this.on("blur",function(){e.focused=!1,e._frag&&!e._frag.inserted||e.rawListener()})),this.listener=this.rawListener=function(){if(!s&&e._bound){var i=o||n?l(t.value):t.value;e.set(i),oi(function(){e._bound&&!e.focused&&e.update(e._watcher.value)})}},r&&(this.listener=w(this.listener,r)),this.hasjQuery="function"==typeof jQuery,this.hasjQuery){var a=jQuery.fn.on?"on":"bind";jQuery(t)[a]("change",this.rawListener),i||jQuery(t)[a]("input",this.listener)}else this.on("change",this.rawListener),i||this.on("input",this.listener);!i&&qn&&(this.on("cut",function(){oi(e.listener)}),this.on("keyup",function(t){46!==t.keyCode&&8!==t.keyCode||e.listener()})),(t.hasAttribute("value")||"TEXTAREA"===t.tagName&&t.value.trim())&&(this.afterBind=this.listener)},update:function(e){e=c(e),e!==this.el.value&&(this.el.value=e)},unbind:function(){var e=this.el;if(this.hasjQuery){var t=jQuery.fn.off?"off":"unbind";jQuery(e)[t]("change",this.listener),jQuery(e)[t]("input",this.listener)}}},sr={bind:function(){var e=this,t=this.el;this.getValue=function(){if(t.hasOwnProperty("_value"))return t._value;var n=t.value;return e.params.number&&(n=l(n)),n},this.listener=function(){e.set(e.getValue())},this.on("change",this.listener),t.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){this.el.checked=C(e,this.getValue())}},ar={bind:function(){var e=this,t=this,n=this.el;this.forceUpdate=function(){t._watcher&&t.update(t._watcher.get())};var i=this.multiple=n.hasAttribute("multiple");this.listener=function(){var e=pt(n,i);e=t.params.number?Ln(e)?e.map(l):l(e):e,t.set(e)},this.on("change",this.listener);var o=pt(n,i,!0);(i&&o.length||!i&&null!==o)&&(this.afterBind=this.listener),this.vm.$on("hook:attached",function(){oi(e.forceUpdate)}),H(n)||oi(this.forceUpdate)},update:function(e){var t=this.el;t.selectedIndex=-1;for(var n,i,o=this.multiple&&Ln(e),r=t.options,s=r.length;s--;)n=r[s],i=n.hasOwnProperty("_value")?n._value:n.value,n.selected=o?dt(e,i)>-1:C(e,i)},unbind:function(){this.vm.$off("hook:attached",this.forceUpdate)}},cr={bind:function(){function e(){var e=n.checked;return e&&n.hasOwnProperty("_trueValue")?n._trueValue:!e&&n.hasOwnProperty("_falseValue")?n._falseValue:e}var t=this,n=this.el;this.getValue=function(){return n.hasOwnProperty("_value")?n._value:t.params.number?l(n.value):n.value},this.listener=function(){var i=t._watcher.value;if(Ln(i)){var o=t.getValue();n.checked?x(i,o)<0&&i.push(o):i.$remove(o)}else t.set(e())},this.on("change",this.listener),n.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){var t=this.el;Ln(e)?t.checked=x(e,this.getValue())>-1:t.hasOwnProperty("_trueValue")?t.checked=C(e,t._trueValue):t.checked=!!e}},lr={text:rr,radio:sr,select:ar,checkbox:cr},hr={priority:qo,twoWay:!0,handlers:lr,params:["lazy","number","debounce"],bind:function(){this.checkFilters(),this.hasRead&&!this.hasWrite&&"production"!==n.env.NODE_ENV&&Di('It seems you are using a read-only filter with v-model="'+this.descriptor.raw+'". You might want to use a two-way filter to ensure correct behavior.',this.vm);var e,t=this.el,i=t.tagName;if("INPUT"===i)e=lr[t.type]||lr.text;else if("SELECT"===i)e=lr.select;else{if("TEXTAREA"!==i)return void("production"!==n.env.NODE_ENV&&Di("v-model does not support element type: "+i,this.vm));e=lr.text}t.__v_model=this,e.bind.call(this),this.update=e.update,this._unbind=e.unbind},checkFilters:function(){var e=this.filters;if(e)for(var t=e.length;t--;){var n=ge(this.vm.$options,"filters",e[t].name);("function"==typeof n||n.read)&&(this.hasRead=!0),n.write&&(this.hasWrite=!0)}},unbind:function(){this.el.__v_model=null,this._unbind&&this._unbind()}},ur={esc:27,tab:9,enter:13,space:32,"delete":[8,46],up:38,left:37,right:39,down:40},fr={priority:Wo,acceptStatement:!0,keyCodes:ur,bind:function(){if("IFRAME"===this.el.tagName&&"load"!==this.arg){var e=this;this.iframeBind=function(){G(e.el.contentWindow,e.arg,e.handler,e.modifiers.capture)},this.on("load",this.iframeBind)}},update:function(e){if(this.descriptor.raw||(e=function(){}),"function"!=typeof e)return void("production"!==n.env.NODE_ENV&&Di("v-on:"+this.arg+'="'+this.expression+'" expects a function value, got '+e,this.vm));this.modifiers.stop&&(e=_t(e)),this.modifiers.prevent&&(e=yt(e)),this.modifiers.self&&(e=bt(e));var t=Object.keys(this.modifiers).filter(function(e){return"stop"!==e&&"prevent"!==e&&"self"!==e&&"capture"!==e});t.length&&(e=vt(e,t)),this.reset(),this.handler=e,this.iframeBind?this.iframeBind():G(this.el,this.arg,this.handler,this.modifiers.capture)},reset:function(){var e=this.iframeBind?this.el.contentWindow:this.el;this.handler&&K(e,this.arg,this.handler)},unbind:function(){this.reset()}},pr=["-webkit-","-moz-","-ms-"],dr=["Webkit","Moz","ms"],vr=/!important;?$/,_r=Object.create(null),yr=null,br={deep:!0,update:function(e){"string"==typeof e?this.el.style.cssText=e:Ln(e)?this.handleObject(e.reduce(b,{})):this.handleObject(e||{})},handleObject:function(e){var t,n,i=this.cache||(this.cache={});for(t in i)t in e||(this.handleSingle(t,null),delete i[t]);for(t in e)n=e[t],n!==i[t]&&(i[t]=n,this.handleSingle(t,n))},handleSingle:function(e,t){if(e=mt(e))if(null!=t&&(t+=""),t){var i=vr.test(t)?"important":"";i?("production"!==n.env.NODE_ENV&&Di("It's probably a bad idea to use !important with inline rules. This feature will be deprecated in a future version of Vue."),t=t.replace(vr,"").trim(),this.el.style.setProperty(e.kebab,t,i)):this.el.style[e.camel]=t}else this.el.style[e.camel]=""}},mr="http://www.w3.org/1999/xlink",gr=/^xlink:/,Er=/^v-|^:|^@|^(?:is|transition|transition-mode|debounce|track-by|stagger|enter-stagger|leave-stagger)$/,wr=/^(?:value|checked|selected|muted)$/,xr=/^(?:draggable|contenteditable|spellcheck)$/,kr={value:"_value","true-value":"_trueValue","false-value":"_falseValue"},Cr={priority:Jo,bind:function(){var e=this.arg,t=this.el.tagName;e||(this.deep=!0);var i=this.descriptor,o=i.interp;if(o&&(i.hasOneTime&&(this.expression=S(o,this._scope||this.vm)),(Er.test(e)||"name"===e&&("PARTIAL"===t||"SLOT"===t))&&("production"!==n.env.NODE_ENV&&Di(e+'="'+i.raw+'": attribute interpolation is not allowed in Vue.js directives and special attributes.',this.vm),this.el.removeAttribute(e),this.invalid=!0),"production"!==n.env.NODE_ENV)){var r=e+'="'+i.raw+'": ';"src"===e&&Di(r+'interpolation in "src" attribute will cause a 404 request. Use v-bind:src instead.',this.vm),"style"===e&&Di(r+'interpolation in "style" attribute will cause the attribute to be discarded in Internet Explorer. Use v-bind:style instead.',this.vm)}},update:function(e){if(!this.invalid){var t=this.arg;this.arg?this.handleSingle(t,e):this.handleObject(e||{})}},handleObject:br.handleObject,handleSingle:function(e,t){var n=this.el,i=this.descriptor.interp;if(this.modifiers.camel&&(e=f(e)),!i&&wr.test(e)&&e in n){var o="value"===e&&null==t?"":t;n[e]!==o&&(n[e]=o)}var r=kr[e];if(!i&&r){n[r]=t;var s=n.__v_model;s&&s.listener()}return"value"===e&&"TEXTAREA"===n.tagName?void n.removeAttribute(e):void(xr.test(e)?n.setAttribute(e,t?"true":"false"):null!=t&&t!==!1?"class"===e?(n.__v_trans&&(t+=" "+n.__v_trans.id+"-transition"),X(n,t)):gr.test(e)?n.setAttributeNS(mr,e,t===!0?"":t):n.setAttribute(e,t===!0?"":t):n.removeAttribute(e))}},$r={priority:Yo,bind:function(){if(this.arg){var e=this.id=f(this.arg),t=(this._scope||this.vm).$els;r(t,e)?t[e]=this.el:Ne(t,e,this.el)}},unbind:function(){var e=(this._scope||this.vm).$els;e[this.id]===this.el&&(e[this.id]=null)}},Nr={bind:function(){"production"!==n.env.NODE_ENV&&Di("v-ref:"+this.arg+" must be used on a child component. Found on <"+this.el.tagName.toLowerCase()+">.",this.vm)}},Or={bind:function(){var e=this.el;this.vm.$once("pre-hook:compiled",function(){e.removeAttribute("v-cloak")})}},Ar={text:So,html:Bo,"for":nr,"if":ir,show:or,model:hr,on:fr,bind:Cr,el:$r,ref:Nr,cloak:Or},Tr={deep:!0,update:function(e){e?"string"==typeof e?this.setClass(e.trim().split(/\s+/)):this.setClass(Et(e)):this.cleanup()},setClass:function(e){this.cleanup(e);for(var t=0,n=e.length;t<n;t++){var i=e[t];i&&wt(this.el,i,ee)}this.prevKeys=e},cleanup:function(e){var t=this.prevKeys;if(t)for(var n=t.length;n--;){var i=t[n];(!e||e.indexOf(i)<0)&&wt(this.el,i,te)}}},jr={priority:Go,params:["keep-alive","transition-mode","inline-template"],bind:function(){this.el.__vue__?"production"!==n.env.NODE_ENV&&Di('cannot mount component "'+this.expression+'" on already mounted element: '+this.el):(this.keepAlive=this.params.keepAlive,this.keepAlive&&(this.cache={}),this.params.inlineTemplate&&(this.inlineTemplate=ne(this.el,!0)),this.pendingComponentCb=this.Component=null,this.pendingRemovals=0,this.pendingRemovalCb=null,this.anchor=se("v-component"),Y(this.el,this.anchor),this.el.removeAttribute("is"),this.el.removeAttribute(":is"),this.descriptor.ref&&this.el.removeAttribute("v-ref:"+d(this.descriptor.ref)),this.literal&&this.setComponent(this.expression))},update:function(e){this.literal||this.setComponent(e)},setComponent:function(e,t){if(this.invalidatePending(),e){var n=this;this.resolveComponent(e,function(){n.mountComponent(t)})}else this.unbuild(!0),this.remove(this.childVM,t),this.childVM=null},resolveComponent:function(e,t){var n=this;this.pendingComponentCb=k(function(i){n.ComponentName=i.options.name||("string"==typeof e?e:null),n.Component=i,t()}),this.vm._resolveComponent(e,this.pendingComponentCb)},mountComponent:function(e){this.unbuild(!0);var t=this,n=this.Component.options.activate,i=this.getCached(),o=this.build();n&&!i?(this.waitingFor=o,xt(n,o,function(){t.waitingFor===o&&(t.waitingFor=null,t.transition(o,e))})):(i&&o._updateRef(),this.transition(o,e))},invalidatePending:function(){this.pendingComponentCb&&(this.pendingComponentCb.cancel(),this.pendingComponentCb=null)},build:function(e){var t=this.getCached();if(t)return t;if(this.Component){var i={name:this.ComponentName,el:Xe(this.el),template:this.inlineTemplate,parent:this._host||this.vm,_linkerCachable:!this.inlineTemplate,_ref:this.descriptor.ref,_asComponent:!0,_isRouterView:this._isRouterView,_context:this.vm,_scope:this._scope,_frag:this._frag};e&&b(i,e);var o=new this.Component(i);return this.keepAlive&&(this.cache[this.Component.cid]=o),"production"!==n.env.NODE_ENV&&this.el.hasAttribute("transition")&&o._isFragment&&Di("Transitions will not work on a fragment instance. Template: "+o.$options.template,o),o}},getCached:function(){return this.keepAlive&&this.cache[this.Component.cid]},unbuild:function(e){this.waitingFor&&(this.keepAlive||this.waitingFor.$destroy(),this.waitingFor=null);var t=this.childVM;return!t||this.keepAlive?void(t&&(t._inactive=!0,t._updateRef(!0))):void t.$destroy(!1,e)},remove:function(e,t){var n=this.keepAlive;if(e){this.pendingRemovals++,this.pendingRemovalCb=t;var i=this;e.$remove(function(){i.pendingRemovals--,n||e._cleanup(),!i.pendingRemovals&&i.pendingRemovalCb&&(i.pendingRemovalCb(),i.pendingRemovalCb=null)})}else t&&t()},transition:function(e,t){var n=this,i=this.childVM;switch(i&&(i._inactive=!0),e._inactive=!1,this.childVM=e,n.params.transitionMode){case"in-out":e.$before(n.anchor,function(){n.remove(i,t)});break;case"out-in":n.remove(i,function(){e.$before(n.anchor,t)});break;default:n.remove(i),e.$before(n.anchor,t)}},unbind:function(){if(this.invalidatePending(),this.unbuild(),this.cache){for(var e in this.cache)this.cache[e].$destroy();this.cache=null}}},Dr=ji._propBindingModes,Sr={},Vr=/^[$_a-zA-Z]+[\w$]*$/,Pr=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\[[^\[\]]+\])*$/,Rr=ji._propBindingModes,Fr={bind:function(){var e=this.vm,t=e._context,n=this.descriptor.prop,i=n.path,o=n.parentPath,r=n.mode===Rr.TWO_WAY,s=this.parentWatcher=new Qe(t,o,function(t){Ot(e,n,t)},{twoWay:r,filters:n.filters,scope:this._scope});if(Nt(e,n,s.value),r){var a=this;e.$once("pre-hook:created",function(){a.childWatcher=new Qe(e,i,function(e){s.set(e)},{sync:!0})})}},unbind:function(){this.parentWatcher.teardown(),this.childWatcher&&this.childWatcher.teardown()}},Mr=[],Ir=!1,Lr="transition",Hr="animation",zr=Zn+"Duration",Br=ei+"Duration",Ur=zn&&window.requestAnimationFrame,Wr=Ur?function(e){Ur(function(){Ur(e)})}:function(e){setTimeout(e,50)},qr=Ft.prototype;qr.enter=function(e,t){this.cancelPending(),this.callHook("beforeEnter"),this.cb=t,ee(this.el,this.enterClass),e(),this.entered=!1,this.callHookWithCb("enter"),this.entered||(this.cancel=this.hooks&&this.hooks.enterCancelled,Pt(this.enterNextTick))},qr.enterNextTick=function(){var e=this;this.justEntered=!0,Wr(function(){e.justEntered=!1});var t=this.enterDone,n=this.getCssTransitionType(this.enterClass);this.pendingJsCb?n===Lr&&te(this.el,this.enterClass):n===Lr?(te(this.el,this.enterClass),this.setupCssCb(Xn,t)):n===Hr?this.setupCssCb(ti,t):t()},qr.enterDone=function(){this.entered=!0,this.cancel=this.pendingJsCb=null,te(this.el,this.enterClass),this.callHook("afterEnter"),this.cb&&this.cb()},qr.leave=function(e,t){this.cancelPending(),this.callHook("beforeLeave"),this.op=e,this.cb=t,ee(this.el,this.leaveClass),this.left=!1,this.callHookWithCb("leave"),this.left||(this.cancel=this.hooks&&this.hooks.leaveCancelled,this.op&&!this.pendingJsCb&&(this.justEntered?this.leaveDone():Pt(this.leaveNextTick)))},qr.leaveNextTick=function(){var e=this.getCssTransitionType(this.leaveClass);if(e){var t=e===Lr?Xn:ti;this.setupCssCb(t,this.leaveDone)}else this.leaveDone()},qr.leaveDone=function(){this.left=!0,this.cancel=this.pendingJsCb=null,this.op(),te(this.el,this.leaveClass),this.callHook("afterLeave"),this.cb&&this.cb(),this.op=null},qr.cancelPending=function(){this.op=this.cb=null;var e=!1;this.pendingCssCb&&(e=!0,K(this.el,this.pendingCssEvent,this.pendingCssCb),this.pendingCssEvent=this.pendingCssCb=null),this.pendingJsCb&&(e=!0,this.pendingJsCb.cancel(),this.pendingJsCb=null),e&&(te(this.el,this.enterClass),te(this.el,this.leaveClass)),this.cancel&&(this.cancel.call(this.vm,this.el),this.cancel=null)},qr.callHook=function(e){this.hooks&&this.hooks[e]&&this.hooks[e].call(this.vm,this.el)},qr.callHookWithCb=function(e){var t=this.hooks&&this.hooks[e];t&&(t.length>1&&(this.pendingJsCb=k(this[e+"Done"])),t.call(this.vm,this.el,this.pendingJsCb))},qr.getCssTransitionType=function(e){if(!(!Xn||document.hidden||this.hooks&&this.hooks.css===!1||Mt(this.el))){var t=this.type||this.typeCache[e];if(t)return t;var n=this.el.style,i=window.getComputedStyle(this.el),o=n[zr]||i[zr];if(o&&"0s"!==o)t=Lr;else{var r=n[Br]||i[Br];r&&"0s"!==r&&(t=Hr)}return t&&(this.typeCache[e]=t),t}},qr.setupCssCb=function(e,t){this.pendingCssEvent=e;var n=this,i=this.el,o=this.pendingCssCb=function(r){r.target===i&&(K(i,e,o),n.pendingCssEvent=n.pendingCssCb=null,!n.pendingJsCb&&t&&t())};G(i,e,o)};var Jr={priority:Qo,update:function(e,t){var n=this.el,i=ge(this.vm.$options,"transitions",e);e=e||"v",t=t||"v",n.__v_trans=new Ft(n,e,i,this.vm),te(n,t+"-transition"),ee(n,e+"-transition")}},Qr={style:br,"class":Tr,component:jr,prop:Fr,transition:Jr},Yr=/^v-bind:|^:/,Gr=/^v-on:|^@/,Kr=/^v-([^:]+)(?:$|:(.*)$)/,Zr=/\.[^\.]+/g,Xr=/^(v-bind:|:)?transition$/,es=1e3,ts=2e3;on.terminal=!0;var ns=/[^\w\-:\.]/,is=Object.freeze({compile:It,compileAndLinkProps:Ut,compileRoot:Wt,transclude:un,resolveSlots:vn}),os=/^v-on:|^@/;gn.prototype._bind=function(){var e=this.name,t=this.descriptor;if(("cloak"!==e||this.vm._isCompiled)&&this.el&&this.el.removeAttribute){var n=t.attr||"v-"+e;this.el.removeAttribute(n)}var i=t.def;if("function"==typeof i?this.update=i:b(this,i),this._setupParams(),this.bind&&this.bind(),this._bound=!0,this.literal)this.update&&this.update(t.raw);else if((this.expression||this.modifiers)&&(this.update||this.twoWay)&&!this._checkStatement()){var o=this;this.update?this._update=function(e,t){o._locked||o.update(e,t)}:this._update=mn;var r=this._preProcess?_(this._preProcess,this):null,s=this._postProcess?_(this._postProcess,this):null,a=this._watcher=new Qe(this.vm,this.expression,this._update,{filters:this.filters,twoWay:this.twoWay,deep:this.deep,preProcess:r,postProcess:s,scope:this._scope});this.afterBind?this.afterBind():this.update&&this.update(a.value)}},gn.prototype._setupParams=function(){if(this.params){var e=this.params;this.params=Object.create(null);for(var t,n,i,o=e.length;o--;)t=d(e[o]),i=f(t),n=B(this.el,t),null!=n?this._setupParamWatcher(i,n):(n=z(this.el,t),null!=n&&(this.params[i]=""===n||n))}},gn.prototype._setupParamWatcher=function(e,t){var n=this,i=!1,o=(this._scope||this.vm).$watch(t,function(t,o){if(n.params[e]=t,i){var r=n.paramWatchers&&n.paramWatchers[e];r&&r.call(n,t,o)}else i=!0},{immediate:!0,user:!1});(this._paramUnwatchFns||(this._paramUnwatchFns=[])).push(o)},gn.prototype._checkStatement=function(){var e=this.expression;if(e&&this.acceptStatement&&!Be(e)){var t=ze(e).get,n=this._scope||this.vm,i=function(e){n.$event=e,t.call(n,n),n.$event=null};return this.filters&&(i=n._applyFilters(i,null,this.filters)),this.update(i),!0}},gn.prototype.set=function(e){this.twoWay?this._withLock(function(){this._watcher.set(e)}):"production"!==n.env.NODE_ENV&&Di("Directive.set() can only be used inside twoWaydirectives.")},gn.prototype._withLock=function(e){var t=this;t._locked=!0,e.call(t),oi(function(){t._locked=!1})},gn.prototype.on=function(e,t,n){G(this.el,e,t,n),(this._listeners||(this._listeners=[])).push([e,t])},gn.prototype._teardown=function(){if(this._bound){this._bound=!1,this.unbind&&this.unbind(),this._watcher&&this._watcher.teardown();var e,t=this._listeners;if(t)for(e=t.length;e--;)K(this.el,t[e][0],t[e][1]);var i=this._paramUnwatchFns;if(i)for(e=i.length;e--;)i[e]();"production"!==n.env.NODE_ENV&&this.el&&this.el._vue_directives.$remove(this),this.vm=this.el=this._watcher=this._listeners=null}};var rs=/[^|]\|[^|]/;Oe(Nn),yn(Nn),bn(Nn),En(Nn),wn(Nn),xn(Nn),kn(Nn),Cn(Nn),$n(Nn);var ss={priority:er,params:["name"],bind:function(){var e=this.params.name||"default",t=this.vm._slotContents&&this.vm._slotContents[e];t&&t.hasChildNodes()?this.compile(t.cloneNode(!0),this.vm._context,this.vm):this.fallback()},compile:function(e,t,n){if(e&&t){if(this.el.hasChildNodes()&&1===e.childNodes.length&&1===e.childNodes[0].nodeType&&e.childNodes[0].hasAttribute("v-if")){var i=document.createElement("template");i.setAttribute("v-else",""),i.innerHTML=this.el.innerHTML,i._context=this.vm,e.appendChild(i)}var o=n?n._scope:this._scope;this.unlink=t.$compile(e,n,o,this._frag)}e?Y(this.el,e):J(this.el)},fallback:function(){this.compile(ne(this.el,!0),this.vm)},unbind:function(){this.unlink&&this.unlink()}},as={priority:Ko,params:["name"],paramWatchers:{name:function(e){ir.remove.call(this),e&&this.insert(e)}},bind:function(){this.anchor=se("v-partial"),Y(this.el,this.anchor),this.insert(this.params.name)},insert:function(e){var t=ge(this.vm.$options,"partials",e,!0);t&&(this.factory=new ct(this.vm,t),ir.insert.call(this))},unbind:function(){this.frag&&this.frag.destroy()}},cs={slot:ss,partial:as},ls=nr._postProcess,hs=/(\d{3})(?=\d)/g,us={orderBy:Tn,filterBy:An,limitBy:On,json:{read:function(e,t){return"string"==typeof e?e:JSON.stringify(e,null,arguments.length>1?t:2)},write:function(e){try{return JSON.parse(e)}catch(t){return e}}},capitalize:function(e){return e||0===e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""},uppercase:function(e){return e||0===e?e.toString().toUpperCase():""},lowercase:function(e){return e||0===e?e.toString().toLowerCase():""},currency:function(e,t,n){if(e=parseFloat(e),!isFinite(e)||!e&&0!==e)return"";t=null!=t?t:"$",n=null!=n?n:2;var i=Math.abs(e).toFixed(n),o=n?i.slice(0,-1-n):i,r=o.length%3,s=r>0?o.slice(0,r)+(o.length>3?",":""):"",a=n?i.slice(-1-n):"",c=e<0?"-":"";return c+t+s+o.slice(r).replace(hs,"$1,")+a},pluralize:function(e){var t=y(arguments,1),n=t.length;if(n>1){var i=e%10-1;return i in t?t[i]:t[n-1]}return t[0]+(1===e?"":"s")},debounce:function(e,t){if(e)return t||(t=300),w(e,t)}};Dn(Nn),Nn.version="1.0.26",setTimeout(function(){ji.devtools&&(Bn?Bn.emit("init",Nn):"production"!==n.env.NODE_ENV&&zn&&/Chrome\/\d+/.test(window.navigator.userAgent)&&console.log("Download the Vue Devtools for a better development experience:\nhttps://github.com/vuejs/vue-devtools"))},0),e.exports=Nn}).call(t,function(){return this}(),n(19))},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vdnVlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA2NjQ3MzQ0MTQyZjlmMDI5NmJjMyIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19yb290LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2lzQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL2FwaS10YWJsZS9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2dldE5hdGl2ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc09iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc09iamVjdExpa2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX0xpc3RDYWNoZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYXNzb2NJbmRleE9mLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19nZXRNYXBEYXRhLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19pc0tleS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbmF0aXZlQ3JlYXRlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL190b0tleS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc0xlbmd0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc1N5bWJvbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fTWFwQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNGdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGlyZWN0aXZlcy9zZXQtZm9jdXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21peGlucy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fTWFwLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19TdGFjay5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fU3ltYm9sLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlR2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlSGFzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlSXNFcXVhbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZVByb3BlcnR5LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19jYXN0UGF0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fZXF1YWxBcnJheXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2lzSG9zdE9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faXNJbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faXNTdHJpY3RDb21wYXJhYmxlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19tYXRjaGVzU3RyaWN0Q29tcGFyYWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fdG9Tb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvZGVmZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNBcmd1bWVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNBcnJheUxpa2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNTdHJpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gva2V5cy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC90b0ludGVnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvdG9OdW1iZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9WdWUvZGlzdC92dWUuY29tbW9uLmpzIiwid2VicGFjazovLy9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vL2luZGV4LnZ1ZT82MWU2Iiwid2VicGFjazovLy9pbmRleC52dWU/MjkxNyIsIndlYnBhY2s6Ly8vYWxlcnQtcGFnZS52dWUiLCJ3ZWJwYWNrOi8vL2NvbGxhcHNhYmxlLXBhbmVsLXBhZ2UudnVlIiwid2VicGFjazovLy9sZWdhbC1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vb3ZlcmxheS1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vc3Bpbm5lci1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vc3RlcC10cmFja2VyLXBhZ2UudnVlIiwid2VicGFjazovLy90YWJzLXBhZ2UudnVlIiwid2VicGFjazovLy9pbmRleC52dWU/OWU4MiIsIndlYnBhY2s6Ly8vaW5kZXgudnVlPzlhOTUiLCJ3ZWJwYWNrOi8vL2xlZ2FsLWNvbnRhaW5lci52dWUiLCJ3ZWJwYWNrOi8vL2xlZ2FsLWNvdW50ZXIudnVlIiwid2VicGFjazovLy9vdmVybGF5LWNvbnRhaW5lci52dWUiLCJ3ZWJwYWNrOi8vL292ZXJsYXkudnVlIiwid2VicGFjazovLy9pbmRleC52dWU/ZGFiYiIsIndlYnBhY2s6Ly8vaW5kZXgudnVlPzMxZWIiLCJ3ZWJwYWNrOi8vL3RhYi52dWUiLCJ3ZWJwYWNrOi8vL3RhYnMudnVlIiwid2VicGFjazovLy8uL2Rldi9zcmMvcm91dGVzLmpzIiwid2VicGFjazovLy8uL3NyYy9kaXJlY3RpdmVzL292ZXJsYXktb3BlbmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9tYWluLmpzIiwid2VicGFjazovLy8uL3NyYy9taXhpbnMvZXZlbnRzLmpzIiwid2VicGFjazovLy8uL3NyYy9taXhpbnMveGhyLXJlc3BvbnNlLmpzIiwid2VicGFjazovLy8uL2Rldi9zcmMvY29tcG9uZW50cy9hcGktdGFibGUvaW5kZXgudnVlPzgzZDQiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL3NpZGUtbmF2L2luZGV4LnZ1ZT9kOWVhIiwid2VicGFjazovLy8uL2Rldi9zcmMvY29tcG9uZW50cy9zaXRlLWhlYWRlci9pbmRleC52dWU/NWJlNSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2luZGV4LnZ1ZT81YzhiIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2FsZXJ0L2luZGV4LnZ1ZT9jOTk0Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2NvbGxhcHNhYmxlLXBhbmVsL2luZGV4LnZ1ZT82NWM3Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci52dWU/NDQ2ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb3VudGVyLnZ1ZT9lMDMxIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS1jb250YWluZXIudnVlPzNlODMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LnZ1ZT9iNTc0Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3NwaW5uZXIvaW5kZXgudnVlPzdmMjMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc3RlcC10cmFja2VyL2luZGV4LnZ1ZT9kZWZkIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3RhYi90YWJzLnZ1ZT9iNjRmIiwid2VicGFjazovLy8uL34vZXM2LXByb21pc2UvZGlzdC9lczYtcHJvbWlzZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3doYXR3Zy1mZXRjaC9mZXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL2NvbXBvbmVudHMvc2l0ZS1oZWFkZXIvbG9nby5wbmciLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX0RhdGFWaWV3LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19IYXNoLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19Qcm9taXNlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19TZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX1NldENhY2hlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19VaW50OEFycmF5LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19XZWFrTWFwLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19hcHBseS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYXJyYXlTb21lLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlRGVsYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2Jhc2VGaW5kSW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2Jhc2VIYXNJbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZUlzRXF1YWxEZWVwLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlSXNNYXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZUlzTmF0aXZlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlSXRlcmF0ZWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2Jhc2VLZXlzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlTWF0Y2hlcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZU1hdGNoZXNQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZVByb3BlcnR5RGVlcC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZVRpbWVzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlVG9TdHJpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2NoZWNrR2xvYmFsLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19jb3JlSnNEYXRhLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19lcXVhbEJ5VGFnLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19lcXVhbE9iamVjdHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2dldExlbmd0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fZ2V0TWF0Y2hEYXRhLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19nZXRQcm90b3R5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2dldFRhZy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fZ2V0VmFsdWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2hhc1BhdGguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2hhc2hDbGVhci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faGFzaERlbGV0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faGFzaEdldC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faGFzaEhhcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faGFzaFNldC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faW5kZXhLZXlzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19pc0tleWFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2lzTWFza2VkLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19pc1Byb3RvdHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbGlzdENhY2hlQ2xlYXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2xpc3RDYWNoZURlbGV0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbGlzdENhY2hlR2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19saXN0Q2FjaGVIYXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2xpc3RDYWNoZVNldC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbWFwQ2FjaGVDbGVhci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbWFwQ2FjaGVEZWxldGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX21hcENhY2hlR2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19tYXBDYWNoZUhhcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbWFwQ2FjaGVTZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX21hcFRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX3NldENhY2hlQWRkLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19zZXRDYWNoZUhhcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fc2V0VG9BcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fc3RhY2tDbGVhci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fc3RhY2tEZWxldGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX3N0YWNrR2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19zdGFja0hhcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fc3RhY2tTZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX3N0cmluZ1RvUGF0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9kZWJvdW5jZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9lcS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9maW5kSW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvZ2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2hhc0luLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2lkZW50aXR5LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2lzQXJyYXlMaWtlT2JqZWN0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2lzVHlwZWRBcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9tZW1vaXplLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL25vdy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9wcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9yZXN0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL3RvRmluaXRlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL3RvU3RyaW5nLmpzIiwid2VicGFjazovLy8uL34vcHJpc21qcy9wcmlzbS5qcyIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL2NvbXBvbmVudHMvYXBpLXRhYmxlL2FwaS10YWJsZS5odG1sIiwid2VicGFjazovLy8uL2Rldi9zcmMvY29tcG9uZW50cy9zaWRlLW5hdi9zaWRlLW5hdi5odG1sIiwid2VicGFjazovLy8uL2Rldi9zcmMvY29tcG9uZW50cy9zaXRlLWhlYWRlci9zaXRlLWhlYWRlci5odG1sIiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3MvYWxlcnQtcGFnZS52dWU/OTFmMyIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2NvbGxhcHNhYmxlLXBhbmVsLXBhZ2UudnVlPzAwYzUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9pbmRleC52dWU/NmM0NSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2xlZ2FsLXBhZ2UudnVlPzc2OGUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9vdmVybGF5LXBhZ2UudnVlPzc4ZjciLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9zcGlubmVyLXBhZ2UudnVlPzBmNTIiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9zdGVwLXRyYWNrZXItcGFnZS52dWU/ZjBlZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL3RhYnMtcGFnZS52dWU/YTdmMiIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9hbGVydC9hbGVydC5odG1sIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2NvbGxhcHNhYmxlLXBhbmVsL2NvbGxhcHNhYmxlLXBhbmVsLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY29udGFpbmVyLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY291bnRlci5odG1sIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS1jb250YWluZXIuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXkuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9zcGlubmVyL3NwaW5uZXIuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9zdGVwLXRyYWNrZXIvc3RlcC10cmFja2VyLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYi5odG1sIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3RhYi90YWJzLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL3NpZGUtbmF2L2luZGV4LnZ1ZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL2NvbXBvbmVudHMvc2l0ZS1oZWFkZXIvaW5kZXgudnVlIiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3MvYWxlcnQtcGFnZS52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9jb2xsYXBzYWJsZS1wYW5lbC1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2luZGV4LnZ1ZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2xlZ2FsLXBhZ2UudnVlIiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3Mvb3ZlcmxheS1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL3NwaW5uZXItcGFnZS52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9zdGVwLXRyYWNrZXItcGFnZS52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy90YWJzLXBhZ2UudnVlIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2FsZXJ0L2luZGV4LnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9jb2xsYXBzYWJsZS1wYW5lbC9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY29udGFpbmVyLnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb3VudGVyLnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXktY29udGFpbmVyLnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXkudnVlIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3NwaW5uZXIvaW5kZXgudnVlIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3N0ZXAtdHJhY2tlci9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYi52dWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYnMudnVlIiwid2VicGFjazovLy8uL34vdnVlLXJvdXRlci9kaXN0L3Z1ZS1yb3V0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL2FwaS10YWJsZS9pbmRleC52dWU/NzkyNiIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL2NvbXBvbmVudHMvc2lkZS1uYXYvaW5kZXgudnVlPzRhNDciLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL3NpdGUtaGVhZGVyL2luZGV4LnZ1ZT81NTY5Iiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3MvaW5kZXgudnVlPzUyMTgiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvYWxlcnQvaW5kZXgudnVlPzAyNzUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvY29sbGFwc2FibGUtcGFuZWwvaW5kZXgudnVlP2QxYzQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY29udGFpbmVyLnZ1ZT8zNTc2Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvdW50ZXIudnVlP2ViMzkiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LWNvbnRhaW5lci52dWU/MTk3MiIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXkudnVlP2MzODMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc3Bpbm5lci9pbmRleC52dWU/NjMzNSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9zdGVwLXRyYWNrZXIvaW5kZXgudnVlPzAxZTMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYnMudnVlP2Y5MWYiLCJ3ZWJwYWNrOi8vLy4vfi92dWUvZGlzdC92dWUuY29tbW9uLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9hbWQtZGVmaW5lLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwicGFyZW50SnNvbnBGdW5jdGlvbiIsIndpbmRvdyIsImNodW5rSWRzIiwibW9yZU1vZHVsZXMiLCJjaHVua0lkIiwiaSIsImNhbGxiYWNrcyIsImxlbmd0aCIsImluc3RhbGxlZENodW5rcyIsInB1c2giLCJhcHBseSIsInNoaWZ0IiwiMCIsIjEiLCIyIiwiZSIsImNhbGxiYWNrIiwidW5kZWZpbmVkIiwiaGVhZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzY3JpcHQiLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsImNoYXJzZXQiLCJhc3luYyIsInNyYyIsInAiLCJhcHBlbmRDaGlsZCIsIm0iLCJjIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX1Z1ZSIsIl9WdWUyIiwiX3Z1ZVJvdXRlciIsIl92dWVSb3V0ZXIyIiwiX3JvdXRlcyIsIl9yb3V0ZXMyIiwiX2h5YnJpZFRob3JpdW0iLCJfaHlicmlkVGhvcml1bTIiLCJfcHJpc21qcyIsIl9wcmlzbWpzMiIsIl9pbmRleCIsIl9pbmRleDIiLCJfaW5kZXgzIiwiX2luZGV4NCIsImNvbmZpZyIsImRlYnVnIiwidXNlIiwicm91dGVyIiwiQXBwIiwiZXh0ZW5kIiwiY29tcG9uZW50cyIsIlNpZGVOYXYiLCJTaXRlSGVhZGVyIiwiZGF0YSIsImxpZ2VyRW5kUG9pbnQiLCJsaWdlckFwcGxpY2F0aW9uS2V5IiwibWFwIiwiYWZ0ZXJFYWNoIiwic2V0VGltZW91dCIsImhpZ2hsaWdodEFsbCIsInN0YXJ0IiwibGlzdCIsInRvU3RyaW5nIiwicmVzdWx0IiwidGhpcyIsIml0ZW0iLCJqb2luIiwibWVkaWFRdWVyeSIsImFscmVhZHlJbXBvcnRlZE1vZHVsZXMiLCJhZGRTdHlsZXNUb0RvbSIsInN0eWxlcyIsIm9wdGlvbnMiLCJkb21TdHlsZSIsInN0eWxlc0luRG9tIiwicmVmcyIsImoiLCJwYXJ0cyIsImFkZFN0eWxlIiwibGlzdFRvU3R5bGVzIiwibmV3U3R5bGVzIiwiY3NzIiwibWVkaWEiLCJzb3VyY2VNYXAiLCJwYXJ0IiwiaW5zZXJ0U3R5bGVFbGVtZW50Iiwic3R5bGVFbGVtZW50IiwiZ2V0SGVhZEVsZW1lbnQiLCJsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCIsInN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wIiwiaW5zZXJ0QXQiLCJuZXh0U2libGluZyIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJFcnJvciIsInJlbW92ZVN0eWxlRWxlbWVudCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImlkeCIsImluZGV4T2YiLCJzcGxpY2UiLCJjcmVhdGVTdHlsZUVsZW1lbnQiLCJ1cGRhdGUiLCJyZW1vdmUiLCJzaW5nbGV0b24iLCJzdHlsZUluZGV4Iiwic2luZ2xldG9uQ291bnRlciIsInNpbmdsZXRvbkVsZW1lbnQiLCJhcHBseVRvU2luZ2xldG9uVGFnIiwiYmluZCIsImFwcGx5VG9UYWciLCJuZXdPYmoiLCJpbmRleCIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwicmVwbGFjZVRleHQiLCJjc3NOb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJjaGlsZE5vZGVzIiwic2V0QXR0cmlidXRlIiwic291cmNlcyIsImJ0b2EiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJtZW1vaXplIiwiZm4iLCJtZW1vIiwiYXJndW1lbnRzIiwiaXNPbGRJRSIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ0b0xvd2VyQ2FzZSIsIm5ld0xpc3QiLCJtYXlSZW1vdmUiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlbWVudCIsImZpbHRlciIsIkJvb2xlYW4iLCJnbG9iYWwiLCJjaGVja0dsb2JhbCIsImZyZWVHbG9iYWwiLCJmcmVlU2VsZiIsInNlbGYiLCJ0aGlzR2xvYmFsIiwicm9vdCIsIkZ1bmN0aW9uIiwiaXNBcnJheSIsIkFycmF5IiwiX192dWVfc2NyaXB0X18iLCJfX3Z1ZV90ZW1wbGF0ZV9fIiwidGVtcGxhdGUiLCJnZXROYXRpdmUiLCJvYmplY3QiLCJrZXkiLCJ2YWx1ZSIsImdldFZhbHVlIiwiYmFzZUlzTmF0aXZlIiwiaXNPYmplY3QiLCJpc09iamVjdExpa2UiLCJMaXN0Q2FjaGUiLCJlbnRyaWVzIiwiY2xlYXIiLCJlbnRyeSIsInNldCIsImxpc3RDYWNoZUNsZWFyIiwibGlzdENhY2hlRGVsZXRlIiwibGlzdENhY2hlR2V0IiwibGlzdENhY2hlSGFzIiwibGlzdENhY2hlU2V0IiwicHJvdG90eXBlIiwiZ2V0IiwiaGFzIiwiYXNzb2NJbmRleE9mIiwiYXJyYXkiLCJlcSIsImdldE1hcERhdGEiLCJfX2RhdGFfXyIsImlzS2V5YWJsZSIsImlzS2V5IiwiaXNTeW1ib2wiLCJyZUlzUGxhaW5Qcm9wIiwicmVJc0RlZXBQcm9wIiwiT2JqZWN0IiwibmF0aXZlQ3JlYXRlIiwidG9LZXkiLCJJTkZJTklUWSIsImlzTGVuZ3RoIiwiTUFYX1NBRkVfSU5URUdFUiIsIm9iamVjdFRvU3RyaW5nIiwic3ltYm9sVGFnIiwib2JqZWN0UHJvdG8iLCJNYXBDYWNoZSIsIm1hcENhY2hlQ2xlYXIiLCJtYXBDYWNoZURlbGV0ZSIsIm1hcENhY2hlR2V0IiwibWFwQ2FjaGVIYXMiLCJtYXBDYWNoZVNldCIsImlzRnVuY3Rpb24iLCJ0YWciLCJmdW5jVGFnIiwiZ2VuVGFnIiwiY2xlYW5VcE5leHRUaWNrIiwiZHJhaW5pbmciLCJjdXJyZW50UXVldWUiLCJxdWV1ZSIsImNvbmNhdCIsInF1ZXVlSW5kZXgiLCJkcmFpblF1ZXVlIiwidGltZW91dCIsImNhY2hlZFNldFRpbWVvdXQiLCJsZW4iLCJydW4iLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJJdGVtIiwiZnVuIiwibm9vcCIsInByb2Nlc3MiLCJjbGVhclRpbWVvdXQiLCJuZXh0VGljayIsImFyZ3MiLCJ0aXRsZSIsImJyb3dzZXIiLCJlbnYiLCJhcmd2IiwidmVyc2lvbiIsInZlcnNpb25zIiwib24iLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJiaW5kaW5nIiwibmFtZSIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJkZWZpbmVQcm9wZXJ0eSIsIl9kZWZlciIsIl9kZWZlcjIiLCJuZXdWYWwiLCJfdGhpcyIsImVsIiwidGFiSW5kZXgiLCJmb2N1cyIsIl9ldmVudHMiLCJfZXZlbnRzMiIsIl94aHJSZXNwb25zZSIsIl94aHJSZXNwb25zZTIiLCJNYXAiLCJTdGFjayIsInN0YWNrQ2xlYXIiLCJzdGFja0RlbGV0ZSIsInN0YWNrR2V0Iiwic3RhY2tIYXMiLCJzdGFja1NldCIsIlN5bWJvbCIsImJhc2VHZXQiLCJwYXRoIiwiY2FzdFBhdGgiLCJiYXNlSGFzIiwiaGFzT3duUHJvcGVydHkiLCJnZXRQcm90b3R5cGUiLCJiYXNlSXNFcXVhbCIsIm90aGVyIiwiY3VzdG9taXplciIsImJpdG1hc2siLCJzdGFjayIsImJhc2VJc0VxdWFsRGVlcCIsImJhc2VQcm9wZXJ0eSIsInN0cmluZ1RvUGF0aCIsImVxdWFsQXJyYXlzIiwiZXF1YWxGdW5jIiwiaXNQYXJ0aWFsIiwiUEFSVElBTF9DT01QQVJFX0ZMQUciLCJhcnJMZW5ndGgiLCJvdGhMZW5ndGgiLCJzdGFja2VkIiwic2VlbiIsIlVOT1JERVJFRF9DT01QQVJFX0ZMQUciLCJTZXRDYWNoZSIsImFyclZhbHVlIiwib3RoVmFsdWUiLCJjb21wYXJlZCIsImFycmF5U29tZSIsIm90aEluZGV4IiwiYWRkIiwiaXNIb3N0T2JqZWN0IiwiaXNJbmRleCIsInJlSXNVaW50IiwiaXNTdHJpY3RDb21wYXJhYmxlIiwibWF0Y2hlc1N0cmljdENvbXBhcmFibGUiLCJzcmNWYWx1ZSIsInRvU291cmNlIiwiZnVuYyIsImZ1bmNUb1N0cmluZyIsImJhc2VEZWxheSIsInJlc3QiLCJkZWZlciIsImlzQXJndW1lbnRzIiwiaXNBcnJheUxpa2VPYmplY3QiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImFyZ3NUYWciLCJpc0FycmF5TGlrZSIsImdldExlbmd0aCIsImlzU3RyaW5nIiwic3RyaW5nVGFnIiwia2V5cyIsImlzUHJvdG8iLCJpc1Byb3RvdHlwZSIsImJhc2VLZXlzIiwiaW5kZXhlcyIsImluZGV4S2V5cyIsInNraXBJbmRleGVzIiwidG9JbnRlZ2VyIiwidG9GaW5pdGUiLCJyZW1haW5kZXIiLCJ0b051bWJlciIsIk5BTiIsInZhbHVlT2YiLCJyZXBsYWNlIiwicmVUcmltIiwiaXNCaW5hcnkiLCJyZUlzQmluYXJ5IiwicmVJc09jdGFsIiwiZnJlZVBhcnNlSW50Iiwic2xpY2UiLCJyZUlzQmFkSGV4IiwicGFyc2VJbnQiLCJ2YWwiLCJoYXNPd24iLCJfaXNWdWUiLCJfZGF0YSIsIm9iIiwiX19vYl9fIiwiY29udmVydCIsImRlcCIsIm5vdGlmeSIsInZtcyIsInZtIiwiX3Byb3h5IiwiX2RpZ2VzdCIsImRlbCIsIl91bnByb3h5IiwiaXNMaXRlcmFsIiwiZXhwIiwibGl0ZXJhbFZhbHVlUkUiLCJpc1Jlc2VydmVkIiwic3RyIiwiY2hhckNvZGVBdCIsIl90b1N0cmluZyIsInBhcnNlZCIsIk51bWJlciIsImlzTmFOIiwidG9Cb29sZWFuIiwic3RyaXBRdW90ZXMiLCJhIiwiYiIsImNhbWVsaXplIiwiY2FtZWxpemVSRSIsInRvVXBwZXIiLCJfIiwidG9VcHBlckNhc2UiLCJoeXBoZW5hdGUiLCJoeXBoZW5hdGVSRSIsImNsYXNzaWZ5IiwiY2xhc3NpZnlSRSIsImN0eCIsImwiLCJ0b0FycmF5IiwicmV0IiwidG8iLCJmcm9tIiwiaXNQbGFpbk9iamVjdCIsIk9CSkVDVF9TVFJJTkciLCJkZWYiLCJlbnVtZXJhYmxlIiwid3JpdGFibGUiLCJjb25maWd1cmFibGUiLCJfZGVib3VuY2UiLCJ3YWl0IiwiY29udGV4dCIsInRpbWVzdGFtcCIsImxhdGVyIiwibGFzdCIsIkRhdGUiLCJub3ciLCJhcnIiLCJjYW5jZWxsYWJsZSIsImNiIiwiY2FuY2VsbGVkIiwiY2FuY2VsIiwibG9vc2VFcXVhbCIsIkNhY2hlIiwibGltaXQiLCJzaXplIiwidGFpbCIsIl9rZXltYXAiLCJjcmVhdGUiLCJwdXNoRmlsdGVyIiwibGFzdEZpbHRlckluZGV4IiwidHJpbSIsInRva2VucyIsIm1hdGNoIiwiZmlsdGVyVG9rZW5SRSIsInByb2Nlc3NGaWx0ZXJBcmciLCJmaWx0ZXJzIiwiYXJnIiwicmVzZXJ2ZWRBcmdSRSIsImR5bmFtaWMiLCJzdHJpcHBlZCIsInBhcnNlRGlyZWN0aXZlIiwicyIsImhpdCIsImNhY2hlJDEiLCJpblNpbmdsZSIsImluRG91YmxlIiwiY3VybHkiLCJzcXVhcmUiLCJwYXJlbiIsInByZXYiLCJleHByZXNzaW9uIiwicHV0IiwiZXNjYXBlUmVnZXgiLCJyZWdleEVzY2FwZVJFIiwiY29tcGlsZVJlZ2V4Iiwib3BlbiIsImRlbGltaXRlcnMiLCJjbG9zZSIsInVuc2FmZU9wZW4iLCJ1bnNhZmVEZWxpbWl0ZXJzIiwidW5zYWZlQ2xvc2UiLCJ0YWdSRSIsIlJlZ0V4cCIsImh0bWxSRSIsImNhY2hlIiwicGFyc2VUZXh0IiwidGV4dCIsImh0bWwiLCJmaXJzdCIsIm9uZVRpbWUiLCJsYXN0SW5kZXgiLCJleGVjIiwidG9rZW5zVG9FeHAiLCJ0b2tlbiIsImZvcm1hdFRva2VuIiwic2luZ2xlIiwiJGV2YWwiLCJpbmxpbmVGaWx0ZXJzIiwiZmlsdGVyUkUiLCJhcHBlbmRXaXRoVHJhbnNpdGlvbiIsInRhcmdldCIsImFwcGx5VHJhbnNpdGlvbiIsImJlZm9yZVdpdGhUcmFuc2l0aW9uIiwiYmVmb3JlIiwicmVtb3ZlV2l0aFRyYW5zaXRpb24iLCJkaXJlY3Rpb24iLCJvcCIsInRyYW5zaXRpb24iLCJfX3ZfdHJhbnMiLCJob29rcyIsInRyYW5zaXRpb25FbmRFdmVudCIsIl9pc0NvbXBpbGVkIiwiJHBhcmVudCIsImFjdGlvbiIsInF1ZXJ5Iiwic2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yIiwiTk9ERV9FTlYiLCJ3YXJuIiwiaW5Eb2MiLCJub2RlIiwiZG9jIiwib3duZXJEb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsInBhcmVudCIsIm5vZGVUeXBlIiwiY29udGFpbnMiLCJnZXRBdHRyIiwiX2F0dHIiLCJnZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJnZXRCaW5kQXR0ciIsImhhc0JpbmRBdHRyIiwiaGFzQXR0cmlidXRlIiwiYWZ0ZXIiLCJwcmVwZW5kIiwicmVwbGFjZUNoaWxkIiwiZXZlbnQiLCJ1c2VDYXB0dXJlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJnZXRDbGFzcyIsImNsYXNzbmFtZSIsImNsYXNzTmFtZSIsImJhc2VWYWwiLCJzZXRDbGFzcyIsImNscyIsImlzSUU5IiwibmFtZXNwYWNlVVJJIiwiYWRkQ2xhc3MiLCJjbGFzc0xpc3QiLCJjdXIiLCJyZW1vdmVDbGFzcyIsInRhciIsImV4dHJhY3RDb250ZW50IiwiYXNGcmFnbWVudCIsImNoaWxkIiwicmF3Q29udGVudCIsImlzVGVtcGxhdGUiLCJpc0ZyYWdtZW50IiwiY29udGVudCIsImhhc0NoaWxkTm9kZXMiLCJ0cmltTm9kZSIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJpc1RyaW1tYWJsZSIsImxhc3RDaGlsZCIsInRhZ05hbWUiLCJjcmVhdGVBbmNob3IiLCJwZXJzaXN0IiwiYW5jaG9yIiwiY3JlYXRlQ29tbWVudCIsIl9fdl9hbmNob3IiLCJmaW5kUmVmIiwiaGFzQXR0cmlidXRlcyIsImF0dHJzIiwiYXR0cmlidXRlcyIsInJlZlJFIiwibWFwTm9kZVJhbmdlIiwiZW5kIiwibmV4dCIsInJlbW92ZU5vZGVSYW5nZSIsImZyYWciLCJvblJlbW92ZWQiLCJyZW1vdmVkIiwiZG9uZSIsIm5vZGVzIiwiZ2V0T3V0ZXJIVE1MIiwib3V0ZXJIVE1MIiwiY29udGFpbmVyIiwiY2xvbmVOb2RlIiwiaW5uZXJIVE1MIiwiY2hlY2tDb21wb25lbnRBdHRyIiwiaGFzQXR0cnMiLCJjb21tb25UYWdSRSIsInJlc2VydmVkVGFnUkUiLCJnZXRJc0JpbmRpbmciLCJyZXNvbHZlQXNzZXQiLCJpcyIsImV4cGVjdGVkVGFnIiwiX2NvbXBvbmVudE5hbWVNYXAiLCJpc1Vua25vd25FbGVtZW50IiwibWVyZ2VEYXRhIiwidG9WYWwiLCJmcm9tVmFsIiwibWVyZ2VBc3NldHMiLCJwYXJlbnRWYWwiLCJjaGlsZFZhbCIsInJlcyIsImd1YXJkQXJyYXlBc3NldHMiLCJndWFyZENvbXBvbmVudHMiLCJpZHMiLCJWdWUiLCJndWFyZFByb3BzIiwicHJvcHMiLCJhc3NldHMiLCJhc3NldCIsIm1lcmdlT3B0aW9ucyIsIm1lcmdlRmllbGQiLCJzdHJhdCIsInN0cmF0cyIsImRlZmF1bHRTdHJhdCIsInByb3BzRGF0YSIsIm1peGlucyIsIm1peGluIiwibWl4aW5PcHRpb25zIiwid2Fybk1pc3NpbmciLCJjYW1lbGl6ZWRJZCIsImNoYXJBdCIsIkRlcCIsInVpZCQxIiwic3VicyIsIndpdGhvdXRDb252ZXJzaW9uIiwic2hvdWxkQ29udmVydCIsIk9ic2VydmVyIiwiYXVnbWVudCIsImhhc1Byb3RvIiwicHJvdG9BdWdtZW50IiwiY29weUF1Z21lbnQiLCJhcnJheU1ldGhvZHMiLCJhcnJheUtleXMiLCJvYnNlcnZlQXJyYXkiLCJ3YWxrIiwiX19wcm90b19fIiwib2JzZXJ2ZSIsImlzRXh0ZW5zaWJsZSIsImFkZFZtIiwiZGVmaW5lUmVhY3RpdmUiLCJwcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImdldHRlciIsInNldHRlciIsImNoaWxkT2IiLCJkZXBlbmQiLCJpbml0TWl4aW4iLCJfaW5pdCIsIiRlbCIsIiRyb290IiwiJGNoaWxkcmVuIiwiJHJlZnMiLCIkZWxzIiwiX3dhdGNoZXJzIiwiX2RpcmVjdGl2ZXMiLCJfdWlkIiwidWlkIiwiX2V2ZW50c0NvdW50IiwiX2lzRnJhZ21lbnQiLCJfZnJhZ21lbnQiLCJfZnJhZ21lbnRTdGFydCIsIl9mcmFnbWVudEVuZCIsIl9pc0Rlc3Ryb3llZCIsIl9pc1JlYWR5IiwiX2lzQXR0YWNoZWQiLCJfaXNCZWluZ0Rlc3Ryb3llZCIsIl92Rm9yUmVtb3ZpbmciLCJfdW5saW5rRm4iLCJfY29udGV4dCIsIl9zY29wZSIsIl9mcmFnIiwiY2hpbGRyZW4iLCIkb3B0aW9ucyIsImNvbnN0cnVjdG9yIiwiX3VwZGF0ZVJlZiIsIl9jYWxsSG9vayIsIl9pbml0U3RhdGUiLCJfaW5pdEV2ZW50cyIsIiRtb3VudCIsImdldFBhdGhDaGFyVHlwZSIsImNoIiwiY29kZSIsImZvcm1hdFN1YlBhdGgiLCJ0cmltbWVkIiwicGFyc2UiLCJtYXliZVVuZXNjYXBlUXVvdGUiLCJuZXh0Q2hhciIsIm1vZGUiLCJJTl9TSU5HTEVfUVVPVEUiLCJJTl9ET1VCTEVfUVVPVEUiLCJuZXdDaGFyIiwiYWN0aW9ucyIsIkFQUEVORCIsInR5cGVNYXAiLCJCRUZPUkVfUEFUSCIsInN1YlBhdGhEZXB0aCIsIlBVU0giLCJJTkNfU1VCX1BBVEhfREVQVEgiLCJQVVNIX1NVQl9QQVRIIiwiSU5fU1VCX1BBVEgiLCJwYXRoU3RhdGVNYWNoaW5lIiwiRVJST1IiLCJBRlRFUl9QQVRIIiwicmF3IiwicGFyc2VQYXRoIiwicGF0aENhY2hlIiwiZ2V0UGF0aCIsInBhcnNlRXhwcmVzc2lvbiIsInNldFBhdGgiLCJvcmlnaW5hbCIsIndhcm5Ob25FeGlzdGVudCIsIiRzZXQiLCJzYXZlIiwic2F2ZWQiLCJuZXdsaW5lUkUiLCJyZXdyaXRlIiwiYWxsb3dlZEtleXdvcmRzUkUiLCJyZXN0b3JlUkUiLCJyZXN0b3JlIiwiY29tcGlsZUdldHRlciIsImltcHJvcGVyS2V5d29yZHNSRSIsImJvZHkiLCJzYXZlUkUiLCJ3c1JFIiwiaWRlbnRSRSIsIm1ha2VHZXR0ZXJGbiIsImNvbXBpbGVTZXR0ZXIiLCJzY29wZSIsIm5lZWRTZXQiLCJleHByZXNzaW9uQ2FjaGUiLCJpc1NpbXBsZVBhdGgiLCJwYXRoVGVzdFJFIiwibGl0ZXJhbFZhbHVlUkUkMSIsInJlc2V0QmF0Y2hlclN0YXRlIiwidXNlclF1ZXVlIiwiY2lyY3VsYXIiLCJ3YWl0aW5nIiwiZmx1c2hCYXRjaGVyUXVldWUiLCJfYWdhaW4iLCJydW5CYXRjaGVyUXVldWUiLCJkZXZ0b29scyIsIndhdGNoZXIiLCJfbWF4VXBkYXRlQ291bnQiLCJwdXNoV2F0Y2hlciIsInEiLCJ1c2VyIiwiV2F0Y2hlciIsImV4cE9yRm4iLCJpc0ZuIiwidWlkJDIiLCJhY3RpdmUiLCJkaXJ0eSIsImxhenkiLCJkZXBzIiwibmV3RGVwcyIsImRlcElkcyIsIl9TZXQiLCJuZXdEZXBJZHMiLCJwcmV2RXJyb3IiLCJ0d29XYXkiLCJxdWV1ZWQiLCJzaGFsbG93IiwidHJhdmVyc2UiLCJzZWVuT2JqZWN0cyIsImlzQSIsImlzTyIsImRlcElkIiwiaXNSZWFsVGVtcGxhdGUiLCJzdHJpbmdUb0ZyYWdtZW50IiwidGVtcGxhdGVTdHJpbmciLCJjYWNoZUtleSIsInRlbXBsYXRlQ2FjaGUiLCJ0YWdNYXRjaCIsInRhZ1JFJDEiLCJlbnRpdHlNYXRjaCIsImVudGl0eVJFIiwiY29tbWVudE1hdGNoIiwiY29tbWVudFJFIiwid3JhcCIsImVmYXVsdCIsImRlcHRoIiwicHJlZml4Iiwic3VmZml4Iiwibm9kZVRvRnJhZ21lbnQiLCJ0ZXh0Q29udGVudCIsImNsb25lZE5vZGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2xvbmVkIiwiaGFzQnJva2VuVGVtcGxhdGUiLCJ0ZW1wQ2xvbmUiLCJoYXNUZXh0YXJlYUNsb25lQnVnIiwicGFyc2VUZW1wbGF0ZSIsInNob3VsZENsb25lIiwiaWRTZWxlY3RvckNhY2hlIiwiZ2V0RWxlbWVudEJ5SWQiLCJGcmFnbWVudCIsImxpbmtlciIsImhvc3QiLCJwYXJlbnRGcmFnIiwiY2hpbGRGcmFncyIsImluc2VydGVkIiwidW5saW5rIiwic2luZ2xlQmVmb3JlIiwic2luZ2xlUmVtb3ZlIiwibXVsdGlCZWZvcmUiLCJtdWx0aVJlbW92ZSIsIl9fdl9mcmFnIiwid2l0aFRyYW5zaXRpb24iLCJtZXRob2QiLCJjYWxsSG9vayIsImF0dGFjaCIsInNob3VsZENhbGxSZW1vdmUiLCJiZWZvcmVSZW1vdmUiLCJkZXRhY2giLCJkZXN0cm95IiwiRnJhZ21lbnRGYWN0b3J5IiwiY2lkIiwiY2FjaGVJZCIsImxpbmtlckNhY2hlIiwiY29tcGlsZSIsImZpbmRQcmV2RnJhZyIsInByZXZpb3VzU2libGluZyIsImZvcklkIiwiZmluZFZtRnJvbUZyYWciLCJfX3Z1ZV9fIiwicmFuZ2UiLCJuIiwiTWF0aCIsImZsb29yIiwiZ2V0VHJhY2tCeUtleSIsInRyYWNrQnlLZXkiLCJtdWx0aSIsImluaXQiLCJzZWxlY3RlZCIsIl92YWx1ZSIsImluZGV4T2YkMSIsImtleUZpbHRlciIsImhhbmRsZXIiLCJjb2RlcyIsImNoYXJDb2RlIiwia2V5Q29kZXMiLCJrZXlDb2RlIiwic3RvcEZpbHRlciIsInN0b3BQcm9wYWdhdGlvbiIsInByZXZlbnRGaWx0ZXIiLCJwcmV2ZW50RGVmYXVsdCIsInNlbGZGaWx0ZXIiLCJjdXJyZW50VGFyZ2V0Iiwibm9ybWFsaXplIiwicHJvcCIsInByb3BDYWNoZSIsImNhbWVsIiwidXBwZXIiLCJ0ZXN0RWwiLCJwcmVmaXhlZCIsInByZWZpeGVzIiwic3R5bGUiLCJrZWJhYiIsImNhbWVsUHJlZml4ZXMiLCJub3JtYWxpemUkMSIsIl9rZXkiLCJrIiwic3BsaXQiLCJjYWxsQWN0aXZhdGVIb29rcyIsImNhbGxlZCIsInRvdGFsIiwiY29tcGlsZVByb3BzIiwicHJvcE9wdGlvbnMiLCJhdHRyIiwibmFtZXMiLCJlbXB0eSIsImlkZW50UkUkMSIsInByb3BCaW5kaW5nTW9kZXMiLCJPTkVfV0FZIiwiVFdPX1dBWSIsIk9ORV9USU1FIiwib3B0aW1pemVkTGl0ZXJhbCIsInNldHRhYmxlUGF0aFJFIiwicGFyZW50UGF0aCIsImxvd2VyQ2FzZU5hbWUiLCJyZXF1aXJlZCIsIm1ha2VQcm9wc0xpbmtGbiIsIl9wcm9wcyIsImlubGluZVByb3BzIiwiaW5pdFByb3AiLCIkZ2V0IiwiX2JpbmREaXIiLCJwcm9wRGVmIiwicHJvY2Vzc1Byb3BWYWx1ZSIsInJhd1ZhbHVlIiwiaXNTaW1wbGUiLCJnZXRQcm9wRGVmYXVsdFZhbHVlIiwiY29lcmNlUHJvcCIsImNvZXJjZWQiLCJhc3NlcnRQcm9wIiwidXBkYXRlUHJvcCIsInZhbGlkIiwiZXhwZWN0ZWRUeXBlcyIsImFzc2VydGVkVHlwZSIsImFzc2VydFR5cGUiLCJleHBlY3RlZFR5cGUiLCJmb3JtYXRUeXBlIiwiZm9ybWF0VmFsdWUiLCJ2YWxpZGF0b3IiLCJjb2VyY2UiLCJTdHJpbmciLCJwdXNoSm9iIiwiam9iIiwicXVldWUkMSIsImZsdXNoIiwiZiIsIm9mZnNldEhlaWdodCIsIlRyYW5zaXRpb24iLCJlbnRlckNsYXNzIiwibGVhdmVDbGFzcyIsInBlbmRpbmdDc3NFdmVudCIsInBlbmRpbmdDc3NDYiIsInBlbmRpbmdKc0NiIiwianVzdEVudGVyZWQiLCJlbnRlcmVkIiwibGVmdCIsInR5cGVDYWNoZSIsIlRZUEVfVFJBTlNJVElPTiIsIlRZUEVfQU5JTUFUSU9OIiwiZm9yRWFjaCIsImlzSGlkZGVuIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIndpZHRoIiwiaGVpZ2h0Iiwib2Zmc2V0V2lkdGgiLCJnZXRDbGllbnRSZWN0cyIsInBhcnRpYWwiLCJub2RlTGlua0ZuIiwiX2FzQ29tcG9uZW50IiwiY29tcGlsZU5vZGUiLCJjaGlsZExpbmtGbiIsInRlcm1pbmFsIiwiaXNTY3JpcHQiLCJjb21waWxlTm9kZUxpc3QiLCJkaXJzIiwibGlua0FuZENhcHR1cmUiLCJtYWtlVW5saW5rRm4iLCJvcmlnaW5hbERpckNvdW50Iiwic29ydCIsImRpcmVjdGl2ZUNvbXBhcmF0b3IiLCJfYmluZCIsImRlc2NyaXB0b3IiLCJwcmlvcml0eSIsIkRFRkFVTFRfUFJJT1JJVFkiLCJjb250ZXh0RGlycyIsImRlc3Ryb3lpbmciLCJ0ZWFyZG93bkRpcnMiLCJfdGVhcmRvd24iLCIkcmVtb3ZlIiwiY29tcGlsZUFuZExpbmtQcm9wcyIsInByb3BzTGlua0ZuIiwicHJvcERpcnMiLCJjb21waWxlUm9vdCIsImNvbnRleHRPcHRpb25zIiwiY29udGV4dExpbmtGbiIsInJlcGxhY2VyTGlua0ZuIiwiY29udGFpbmVyQXR0cnMiLCJfY29udGFpbmVyQXR0cnMiLCJyZXBsYWNlckF0dHJzIiwiX3JlcGxhY2VyQXR0cnMiLCJjb21waWxlRGlyZWN0aXZlcyIsIm9uUkUiLCJwbHVyYWwiLCJzZWxmRGlycyIsImNvbXBpbGVUZXh0Tm9kZSIsImNvbXBpbGVFbGVtZW50IiwibGlua0ZuIiwiY2hlY2tUZXJtaW5hbERpcmVjdGl2ZXMiLCJjaGVja0VsZW1lbnREaXJlY3RpdmVzIiwiY2hlY2tDb21wb25lbnQiLCJfc2tpcCIsInJlbW92ZVRleHQiLCJ3aG9sZVRleHQiLCJwcm9jZXNzVGV4dFRva2VuIiwibWFrZVRleHROb2RlTGlua0ZuIiwic2V0VG9rZW5UeXBlIiwiZGlyZWN0aXZlcyIsImZyYWdDbG9uZSIsIm5vZGVMaXN0IiwibGlua0ZucyIsIm1ha2VDaGlsZExpbmtGbiIsImNoaWxkcmVuTGlua0ZuIiwibWFrZVRlcm1pbmFsTm9kZUxpbmtGbiIsImNvbXBvbmVudCIsInJlZiIsImludGVybmFsRGlyZWN0aXZlcyIsIm1vZGlmaWVycyIsImxpdGVyYWwiLCJjb21wb25lbnRMaW5rRm4iLCJza2lwIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsIm1hdGNoZWQiLCJkaXJOYW1lIiwicmF3TmFtZSIsInRlcm1EZWYiLCJtb2RpZmllclJFIiwiZGlyQXR0clJFIiwiREVGQVVMVF9URVJNSU5BTF9QUklPUklUWSIsInBhcnNlTW9kaWZpZXJzIiwicHVzaERpciIsImludGVycFRva2VucyIsImhhc09uZVRpbWVUb2tlbiIsImhhc09uZVRpbWUiLCJpbnRlcnAiLCJkaXJEZWYiLCJzb21lIiwidHJhbnNpdGlvblJFIiwiYmluZFJFIiwibWFrZU5vZGVMaW5rRm4iLCJ0cmFuc2NsdWRlIiwiZXh0cmFjdEF0dHJzIiwiX2NvbnRlbnQiLCJ0cmFuc2NsdWRlVGVtcGxhdGUiLCJyZXBsYWNlciIsIm1lcmdlQXR0cnMiLCJzcGVjaWFsQ2hhclJFIiwicmVzb2x2ZVNsb3RzIiwiY29udGVudHMiLCJfc2xvdENvbnRlbnRzIiwiZXh0cmFjdEZyYWdtZW50Iiwic3RhdGVNaXhpbiIsIm1ha2VDb21wdXRlZEdldHRlciIsIm93bmVyIiwiZXZhbHVhdGUiLCJuZXdEYXRhIiwiX3NldERhdGEiLCJfaW5pdFByb3BzIiwiX2luaXRNZXRhIiwiX2luaXRNZXRob2RzIiwiX2luaXREYXRhIiwiX2luaXRDb21wdXRlZCIsIl9wcm9wc1VubGlua0ZuIiwiZGF0YUZuIiwib2xkRGF0YSIsInJlbW92ZVZtIiwiY29tcHV0ZWQiLCJ1c2VyRGVmIiwibWV0aG9kcyIsIm1ldGFzIiwiX21ldGEiLCJldmVudHNNaXhpbiIsInJlZ2lzdGVyQ29tcG9uZW50RXZlbnRzIiwiZXZlbnRSRSIsIl9mcm9tUGFyZW50IiwiJG9uIiwicmVnaXN0ZXJDYWxsYmFja3MiLCJoYXNoIiwiaGFuZGxlcnMiLCJyZWdpc3RlciIsIm9uQXR0YWNoZWQiLCJjYWxsQXR0YWNoIiwib25EZXRhY2hlZCIsImNhbGxEZXRhY2giLCJldmVudHMiLCJ3YXRjaCIsIl9pbml0RE9NSG9va3MiLCJob29rIiwiJGVtaXQiLCJub29wJDEiLCJEaXJlY3RpdmUiLCJfbG9ja2VkIiwiX2JvdW5kIiwiX2xpc3RlbmVycyIsIl9ob3N0IiwiX3Z1ZV9kaXJlY3RpdmVzIiwibGlmZWN5Y2xlTWl4aW4iLCJfcmVmIiwiX2NvbXBpbGUiLCJfaW5pdEVsZW1lbnQiLCJyb290TGlua2VyIiwiY29udGVudExpbmtGbiIsImN0b3IiLCJfbGlua2VyQ2FjaGFibGUiLCJyb290VW5saW5rRm4iLCJjb250ZW50VW5saW5rRm4iLCJfZGVzdHJveSIsImRlZmVyQ2xlYW51cCIsIl9jbGVhbnVwIiwiZGVzdHJveVJlYWR5IiwicGVuZGluZ1JlbW92YWwiLCJjbGVhbnVwSWZQb3NzaWJsZSIsIiRkZXN0cm95IiwidGVhcmRvd24iLCIkb2ZmIiwibWlzY01peGluIiwiX2FwcGx5RmlsdGVycyIsIm9sZFZhbHVlIiwid3JpdGUiLCJvZmZzZXQiLCJyZWFkIiwiX3Jlc29sdmVDb21wb25lbnQiLCJmYWN0b3J5IiwicmVzb2x2ZWQiLCJyZXF1ZXN0ZWQiLCJwZW5kaW5nQ2FsbGJhY2tzIiwiY2JzIiwicmVhc29uIiwiZGF0YUFQSSIsImNsZWFuIiwiYXNTdGF0ZW1lbnQiLCIkYXJndW1lbnRzIiwiJGRlbGV0ZSIsIiR3YXRjaCIsImRlZXAiLCJzeW5jIiwiaW1tZWRpYXRlIiwiZmlsdGVyUkUkMSIsIiRpbnRlcnBvbGF0ZSIsIiRsb2ciLCJjb25zb2xlIiwibG9nIiwiZG9tQVBJIiwiaW5zZXJ0Iiwib3AxIiwib3AyIiwidGFyZ2V0SXNEZXRhY2hlZCIsInNob3VsZENhbGxIb29rIiwiYXBwZW5kIiwiYmVmb3JlV2l0aENiIiwicmVtb3ZlV2l0aENiIiwiJG5leHRUaWNrIiwiJGFwcGVuZFRvIiwiJHByZXBlbmRUbyIsIiRiZWZvcmUiLCIkYWZ0ZXIiLCJpbkRvY3VtZW50IiwicmVhbENiIiwiZXZlbnRzQVBJIiwibW9kaWZ5TGlzdGVuZXJDb3VudCIsImNvdW50IiwiaG9va1JFIiwiJG9uY2UiLCJpc1NvdXJjZSIsInNob3VsZFByb3BhZ2F0ZSIsImhhc1BhcmVudENicyIsIiRicm9hZGNhc3QiLCJzb3VyY2UiLCIkZGlzcGF0Y2giLCJsaWZlY3ljbGVBUEkiLCJyZWFkeSIsIiRjb21waWxlIiwibGltaXRCeSIsImZpbHRlckJ5Iiwic2VhcmNoIiwiZGVsaW1pdGVyIiwiY29udmVydEFycmF5IiwiJHZhbHVlIiwiJGtleSIsIm9yZGVyQnkiLCJiYXNlQ29tcGFyZSIsInNvcnRLZXlJbmRleCIsInNvcnRLZXkiLCJzb3J0S2V5cyIsIm9yZGVyIiwiY29tcGFyYXRvciIsImZpcnN0QXJnIiwiaW5zdGFsbEdsb2JhbEFQSSIsImNyZWF0ZUNsYXNzIiwiZWxlbWVudERpcmVjdGl2ZXMiLCJ0cmFuc2l0aW9ucyIsInBhcnRpYWxzIiwidXRpbCIsImNvbXBpbGVyIiwicGFyc2VycyIsImRpcmVjdGl2ZSIsImV4dGVuZE9wdGlvbnMiLCJTdXBlciIsImlzRmlyc3RFeHRlbmQiLCJfQ3RvciIsIlN1YiIsIl9hc3NldFR5cGVzIiwicGx1Z2luIiwiaW5zdGFsbGVkIiwidW5zaGlmdCIsImluc3RhbGwiLCJkZWZpbml0aW9uIiwiaW5Ccm93c2VyIiwiX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyIsIlVBIiwiaXNJRSIsImlzQW5kcm9pZCIsImlzSW9zIiwiaW9zVmVyc2lvbk1hdGNoIiwiaW9zVmVyc2lvbiIsImhhc011dGF0aW9uT2JzZXJ2ZXJCdWciLCJpbmRleGVkREIiLCJ0cmFuc2l0aW9uUHJvcCIsImFuaW1hdGlvblByb3AiLCJhbmltYXRpb25FbmRFdmVudCIsImlzV2Via2l0VHJhbnMiLCJvbnRyYW5zaXRpb25lbmQiLCJvbndlYmtpdHRyYW5zaXRpb25lbmQiLCJpc1dlYmtpdEFuaW0iLCJvbmFuaW1hdGlvbmVuZCIsIm9ud2Via2l0YW5pbWF0aW9uZW5kIiwibmV4dFRpY2tIYW5kbGVyIiwicGVuZGluZyIsImNvcGllcyIsInRpbWVyRnVuYyIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJzZXRJbW1lZGlhdGUiLCJjb3VudGVyIiwib2JzZXJ2ZXIiLCJ0ZXh0Tm9kZSIsImNoYXJhY3RlckRhdGEiLCJTZXQiLCJuZXdlciIsIm9sZGVyIiwicmV0dXJuRW50cnkiLCJmcmVlemUiLCJkZWZpbmVQcm9wZXJ0aWVzIiwic2lsZW50Iiwid2FybkV4cHJlc3Npb25FcnJvcnMiLCJfZGVsaW1pdGVyc0NoYW5nZWQiLCJfcHJvcEJpbmRpbmdNb2RlcyIsImZvcm1hdENvbXBvbmVudE5hbWUiLCJoYXNDb25zb2xlIiwibXNnIiwiZXJyb3IiLCJIVE1MVW5rbm93bkVsZW1lbnQiLCJIVE1MRWxlbWVudCIsIm9wdGlvbk1lcmdlU3RyYXRlZ2llcyIsImluc3RhbmNlRGF0YSIsImRlZmF1bHREYXRhIiwiY3JlYXRlZCIsImF0dGFjaGVkIiwiZGV0YWNoZWQiLCJiZWZvcmVDb21waWxlIiwiY29tcGlsZWQiLCJiZWZvcmVEZXN0cm95IiwiZGVzdHJveWVkIiwiYWN0aXZhdGUiLCJhZGRTdWIiLCJzdWIiLCJyZW1vdmVTdWIiLCJhZGREZXAiLCJhcnJheVByb3RvIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsIml0ZW1zIiwiZGVib3VuY2UiLCJJTl9QQVRIIiwiQkVGT1JFX0lERU5UIiwiSU5fSURFTlQiLCJ3cyIsImlkZW50IiwiWyIsImVvZiIsIi4iLCJudW1iZXIiLCInIiwiXCIiLCJdIiwiZWxzZSIsImFsbG93ZWRLZXl3b3JkcyIsImltcHJvcGVyS2V5d29yZHMiLCJiZWZvcmVHZXQiLCJwcmVQcm9jZXNzIiwicG9zdFByb2Nlc3MiLCJhZnRlckdldCIsImZvckNvbnRleHQiLCIkZm9yQ29udGV4dCIsImFsaWFzIiwiX3dpdGhMb2NrIiwiJGluZGV4IiwidG1wIiwiY3VycmVudCIsInRleHQkMSIsImxlZ2VuZCIsInRyIiwiY29sIiwidGQiLCJ0aCIsIm9wdGlvbiIsIm9wdGdyb3VwIiwidGhlYWQiLCJ0Ym9keSIsImNvbGdyb3VwIiwiY2FwdGlvbiIsInRmb290IiwiZyIsImRlZnMiLCJzeW1ib2wiLCJpbWFnZSIsImNpcmNsZSIsImVsbGlwc2UiLCJsaW5lIiwicG9seWdvbiIsInBvbHlsaW5lIiwidCIsInBsYWNlaG9sZGVyIiwic3dhcCIsIl93YXRjaGVyIiwiT04iLCJNT0RFTCIsIkJJTkQiLCJUUkFOU0lUSU9OIiwiRUwiLCJDT01QT05FTlQiLCJQQVJUSUFMIiwiSUYiLCJGT1IiLCJTTE9UIiwidWlkJDMiLCJ2Rm9yIiwicGFyYW1zIiwiaW5NYXRjaCIsIml0TWF0Y2giLCJpdGVyYXRvciIsImlzT3B0aW9uIiwiZGlmZiIsInVwZGF0ZVJlZiIsInVwZGF0ZU1vZGVsIiwicHJpbWl0aXZlIiwiY29udmVydGVkRnJvbU9iamVjdCIsImZyb21PYmplY3QiLCJ0cmFja0J5Iiwib2xkRnJhZ3MiLCJmcmFncyIsImdldENhY2hlZEZyYWciLCJyZXVzZWQiLCJmcmVzaCIsInJlbW92YWxJbmRleCIsInRvdGFsUmVtb3ZlZCIsImRlbGV0ZUNhY2hlZEZyYWciLCJ3IiwidGFyZ2V0UHJldiIsInByZXZFbCIsImN1cnJlbnRQcmV2IiwiaW5zZXJ0aW9uSW5kZXgiLCJzdGFnZ2VyQ2IiLCJzdGFnZ2VyQW5jaG9yIiwibW92ZSIsInBhcmVudFNjb3BlIiwiY2FjaGVGcmFnIiwibW9kZWwiLCJfX3ZfbW9kZWwiLCJmb3JjZVVwZGF0ZSIsInN0YWdnZXJBbW91bnQiLCJnZXRTdGFnZ2VyIiwid2FybkR1cGxpY2F0ZSIsInRyYW5zIiwic3RhZ2dlciIsIl9wcmVQcm9jZXNzIiwiX3Bvc3RQcm9jZXNzIiwidW5iaW5kIiwidklmIiwiaW52YWxpZCIsIm5leHRFbGVtZW50U2libGluZyIsImVsc2VFbCIsImVsc2VGcmFnIiwiZWxzZUZhY3RvcnkiLCJzaG93IiwidG9nZ2xlIiwiZGlzcGxheSIsInRleHQkMiIsImlzUmFuZ2UiLCJjb21wb3NpbmciLCJsaXN0ZW5lciIsImZvY3VzZWQiLCJyYXdMaXN0ZW5lciIsImhhc2pRdWVyeSIsImpRdWVyeSIsImFmdGVyQmluZCIsInJhZGlvIiwiY2hlY2tlZCIsInNlbGVjdCIsIm11bHRpcGxlIiwiaW5pdFZhbHVlIiwic2VsZWN0ZWRJbmRleCIsImNoZWNrYm94IiwiZ2V0Qm9vbGVhblZhbHVlIiwiX3RydWVWYWx1ZSIsIl9mYWxzZVZhbHVlIiwiY2hlY2tGaWx0ZXJzIiwiaGFzUmVhZCIsImhhc1dyaXRlIiwiX3VuYmluZCIsImVzYyIsInRhYiIsImVudGVyIiwic3BhY2UiLCJkZWxldGUiLCJ1cCIsInJpZ2h0IiwiZG93biIsIm9uJDEiLCJhY2NlcHRTdGF0ZW1lbnQiLCJpZnJhbWVCaW5kIiwiY29udGVudFdpbmRvdyIsImNhcHR1cmUiLCJzdG9wIiwicHJldmVudCIsInJlc2V0IiwiaW1wb3J0YW50UkUiLCJoYW5kbGVPYmplY3QiLCJyZWR1Y2UiLCJoYW5kbGVTaW5nbGUiLCJpc0ltcG9ydGFudCIsInNldFByb3BlcnR5IiwieGxpbmtOUyIsInhsaW5rUkUiLCJkaXNhbGxvd2VkSW50ZXJwQXR0clJFIiwiYXR0cldpdGhQcm9wc1JFIiwiZW51bWVyYXRlZEF0dHJSRSIsIm1vZGVsUHJvcHMiLCJ0cnVlLXZhbHVlIiwiZmFsc2UtdmFsdWUiLCJiaW5kJDEiLCJhdHRyVmFsdWUiLCJtb2RlbFByb3AiLCJzZXRBdHRyaWJ1dGVOUyIsImNsb2FrIiwiZm9yIiwiaWYiLCJ2Q2xhc3MiLCJjbGVhbnVwIiwicHJldktleXMiLCJrZWVwQWxpdmUiLCJpbmxpbmVUZW1wbGF0ZSIsInBlbmRpbmdDb21wb25lbnRDYiIsIkNvbXBvbmVudCIsInBlbmRpbmdSZW1vdmFscyIsInBlbmRpbmdSZW1vdmFsQ2IiLCJzZXRDb21wb25lbnQiLCJpbnZhbGlkYXRlUGVuZGluZyIsInJlc29sdmVDb21wb25lbnQiLCJtb3VudENvbXBvbmVudCIsInVuYnVpbGQiLCJjaGlsZFZNIiwiQ29tcG9uZW50TmFtZSIsImFjdGl2YXRlSG9va3MiLCJjYWNoZWQiLCJnZXRDYWNoZWQiLCJuZXdDb21wb25lbnQiLCJidWlsZCIsIndhaXRpbmdGb3IiLCJleHRyYU9wdGlvbnMiLCJfaXNSb3V0ZXJWaWV3IiwiX2luYWN0aXZlIiwidHJhbnNpdGlvbk1vZGUiLCJiaW5kaW5nTW9kZXMiLCJjaGlsZEtleSIsInBhcmVudEtleSIsInBhcmVudFdhdGNoZXIiLCJjaGlsZFdhdGNoZXIiLCJ0cmFuc0R1cmF0aW9uUHJvcCIsImFuaW1EdXJhdGlvblByb3AiLCJyYWYiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3YWl0Rm9yVHJhbnNpdGlvblN0YXJ0IiwicCQxIiwiY2FuY2VsUGVuZGluZyIsImNhbGxIb29rV2l0aENiIiwiZW50ZXJDYW5jZWxsZWQiLCJlbnRlck5leHRUaWNrIiwiZW50ZXJEb25lIiwiZ2V0Q3NzVHJhbnNpdGlvblR5cGUiLCJzZXR1cENzc0NiIiwibGVhdmUiLCJsZWF2ZUNhbmNlbGxlZCIsImxlYXZlRG9uZSIsImxlYXZlTmV4dFRpY2siLCJoYXNQZW5kaW5nIiwiaGlkZGVuIiwiaW5saW5lU3R5bGVzIiwiY29tcHV0ZWRTdHlsZXMiLCJnZXRDb21wdXRlZFN0eWxlIiwidHJhbnNEdXJhdGlvbiIsImFuaW1EdXJhdGlvbiIsIm9uRW5kIiwidHJhbnNpdGlvbiQxIiwib2xkSWQiLCJjbGFzcyIsIl9zZXR1cFBhcmFtcyIsIl9jaGVja1N0YXRlbWVudCIsIl91cGRhdGUiLCJvbGRWYWwiLCJtYXBwZWRLZXkiLCJfc2V0dXBQYXJhbVdhdGNoZXIiLCJ1bndhdGNoIiwicGFyYW1XYXRjaGVycyIsIl9wYXJhbVVud2F0Y2hGbnMiLCIkZXZlbnQiLCJsaXN0ZW5lcnMiLCJ1bndhdGNoRm5zIiwic2xvdCIsImZhbGxiYWNrIiwiZWxzZUJsb2NrIiwiZGlnaXRzUkUiLCJqc29uIiwiaW5kZW50IiwiY2FwaXRhbGl6ZSIsInVwcGVyY2FzZSIsImxvd2VyY2FzZSIsImN1cnJlbmN5IiwiX2N1cnJlbmN5IiwiZGVjaW1hbHMiLCJwYXJzZUZsb2F0IiwiaXNGaW5pdGUiLCJzdHJpbmdpZmllZCIsImFicyIsInRvRml4ZWQiLCJfaW50IiwiX2Zsb2F0Iiwic2lnbiIsInBsdXJhbGl6ZSIsImRlbGF5Iiwic2hvd05hdiIsImhpZGVOYXYiLCJjbGFzc2VzIiwidG9nZ2xlOjpzaXRlTmF2IiwidG9nZ2xlTmF2IiwiQXBpVGFibGUiLCJkaXNtaXNzQ2FsbEJhY2siLCJhcGlJdGVtcyIsImlzUmVxdWlyZWQiLCJkZXNjIiwic2hvd1NwaW5uZXIiLCJfcmVzZXRNc2ciLCJfdGhpczIiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImlzRnVsbFNjcmVlbiIsInN0ZXBUcmFja2VyQ3VycmVudFN0ZXAiLCJzdGVwVHJhY2tlckNvbmZpZyIsImlzQ2xpY2thYmxlIiwic3RlcHMiLCJsaW5rIiwib25DbGlja0hhbmRsZXIiLCJpc1Zpc2libGUiLCJkaXNtaXNzaWJsZSIsIm9uQ2xvc2VkIiwiZGlzbWlzcyIsImlzT3BlbiIsImxhYmVsIiwidG9nZ2xlT3BlbiIsImZldGNoIiwiX21peGlucyIsIl9taXhpbnMyIiwiX2ZpbmRJbmRleCIsIl9maW5kSW5kZXgyIiwiX2RlYm91bmNlMiIsIl9zZXRGb2N1cyIsIl9zZXRGb2N1czIiLCJzZXRGb2N1cyIsImluZGV4ZWRMZWdhbHMiLCJub25JbmRleGVkTGVnYWxzIiwiYXBpTGFuZyIsImFwaVJlZ2lvbiIsImZldGNoTGVnYWxzIiwiaGVhZGVycyIsIkNvbnRlbnQtVHlwZSIsImFwcGxpY2F0aW9uS2V5IiwiYXBwZW5kUmVzcG9uc2VUb0xlZ2FsQ29udGFpbmVyIiwiZGF0YUFyeSIsImxlZ2FsUmVzcG9uc2UiLCJmaW5kSW5kZXgiLCJnZXRMZWdhbHMiLCJpbmRleGVkS2V5cyIsImxlZ2FsIiwibm9uSW5kZXhlZEtleXMiLCJ0aGVuIiwicGFyc2VKU09OIiwibGVnYWw6OmNsaWNrIiwibGVnYWxLZXkiLCJ0YXJnZXRMZWdhbEluZGV4IiwiaXNTZWxlY3RlZCIsImFzc2lnbiIsImxlZ2FsOjppbml0IiwibGVnYWxJbml0RGV0YWlsIiwibGFuZyIsInJlZ2lvbiIsImNvbnRhaW5lclJlZiIsImlzTm9uSW5kZXhlZCIsInJvb3RCcm9hZGNhc3QiLCJsZWdhbENvdW50ZXIiLCJsZWdhbExhbmciLCJsZWdhbFJlZ2lvbiIsImxlZ2FsOjp1ZHBhdGUiLCJ1cGRhdGVEZXRhaWwiLCJjbGlja0hhbmRsZXIiLCJFU0MiLCJfaXNWaXNpYmxlIiwib3ZlcmxheUNvbnRhaW5lcjo6b3BlbiIsIm92ZXJsYXlDb250YWluZXI6OmNsb3NlIiwiZXZ0Iiwib3ZlcmxheUtleSIsImNsb3NlT3ZlcmxheSIsIm92ZXJsYXk6Om9wZW4iLCJmdWxsU2NyZWVuIiwiaGlkZSIsInNob3c6OnNwaW5uZXIiLCJoaWRlOjpzcGlubmVyIiwiY3VycmVudFN0ZXAiLCJzdGVwIiwiaXNEaXNhYmxlZCIsImFjdGl2ZVRhYkluZGV4IiwidGFicyIsIl9kZWZpbmVQcm9wZXJ0eSIsImlzQWN0aXZlIiwiaGFuZGxlVGFiTGlzdENsaWNrIiwiX3N0ZXBUcmFja2VyUGFnZSIsIl9zdGVwVHJhY2tlclBhZ2UyIiwiX3RhYnNQYWdlIiwiX3RhYnNQYWdlMiIsIl9sZWdhbFBhZ2UiLCJfbGVnYWxQYWdlMiIsIl9vdmVybGF5UGFnZSIsIl9vdmVybGF5UGFnZTIiLCJfY29sbGFwc2FibGVQYW5lbFBhZ2UiLCJfY29sbGFwc2FibGVQYW5lbFBhZ2UyIiwiX2FsZXJ0UGFnZSIsIl9hbGVydFBhZ2UyIiwiX3NwaW5uZXJQYWdlIiwiX3NwaW5uZXJQYWdlMiIsIi8iLCIvYWxlcnQiLCJBbGVydFBhZ2UiLCIvc3Bpbm5lciIsIlNwaW5uZXJQYWdlIiwiL3N0ZXAtdHJhY2tlciIsIlN0ZXBUcmFja2VyUGFnZSIsIi90YWJzIiwiVGFic1BhZ2UiLCIvbGVnYWwiLCJMZWdhbFBhZ2UiLCIvb3ZlcmxheSIsIk92ZXJsYXlQYWdlIiwiL2NvbGxhcHNhYmxlLXBhbmVsIiwiQ29sbGFwc2FibGVQYW5lbFBhZ2UiLCJldmVudEhhbmRsZXIiLCJfb3ZlcmxheU9wZW5lciIsIl9vdmVybGF5T3BlbmVyMiIsIl9vdmVybGF5Q29udGFpbmVyIiwiX292ZXJsYXlDb250YWluZXIyIiwiX292ZXJsYXkiLCJfb3ZlcmxheTIiLCJfbGVnYWxDb3VudGVyIiwiX2xlZ2FsQ291bnRlcjIiLCJfbGVnYWxDb250YWluZXIiLCJfbGVnYWxDb250YWluZXIyIiwiX3RhYnMiLCJfdGFiczIiLCJfdGFiIiwiX3RhYjIiLCJfaW5kZXg1IiwiX2luZGV4NiIsIl9pbmRleDciLCJfaW5kZXg4IiwiU3RlcFRyYWNrZXIiLCJPdmVybGF5Q29udGFpbmVyIiwiT3ZlcmxheSIsIkxlZ2FsQ291bnRlciIsIkxlZ2FsQ29udGFpbmVyIiwiVGFicyIsIlRhYiIsIkNvbGxhcHNhYmxlUGFuZWwiLCJBbGVydCIsIlNwaW5uZXIiLCJvdmVybGF5T3BlbmVyIiwiX25hbWUiLCJfbGVuIiwicmVzcG9uc2UiLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsImxpYiRlczYkcHJvbWlzZSR1dGlscyQkb2JqZWN0T3JGdW5jdGlvbiIsIngiLCJsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24iLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0U2NoZWR1bGVyIiwic2NoZWR1bGVGbiIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRjdXN0b21TY2hlZHVsZXJGbiIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRzZXRBc2FwIiwiYXNhcEZuIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAiLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTmV4dFRpY2siLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2giLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlVmVydHhUaW1lciIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCR2ZXJ0eE5leHQiLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTXV0YXRpb25PYnNlcnZlciIsIml0ZXJhdGlvbnMiLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIiLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTWVzc2FnZUNoYW5uZWwiLCJjaGFubmVsIiwiTWVzc2FnZUNoYW5uZWwiLCJwb3J0MSIsIm9ubWVzc2FnZSIsInBvcnQyIiwicG9zdE1lc3NhZ2UiLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlU2V0VGltZW91dCIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4iLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWUiLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkYXR0ZW1wdFZlcnR4IiwidmVydHgiLCJydW5Pbkxvb3AiLCJydW5PbkNvbnRleHQiLCJsaWIkZXM2JHByb21pc2UkdGhlbiQkdGhlbiIsIm9uRnVsZmlsbG1lbnQiLCJvblJlamVjdGlvbiIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3AiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbWFrZVByb21pc2UiLCJzdGF0ZSIsIl9zdGF0ZSIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGludm9rZUNhbGxiYWNrIiwiX3Jlc3VsdCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZSIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJHJlc29sdmUiLCJDb25zdHJ1Y3RvciIsInByb21pc2UiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc2VsZkZ1bGZpbGxtZW50IiwiVHlwZUVycm9yIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkY2Fubm90UmV0dXJuT3duIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZ2V0VGhlbiIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5VGhlbiIsImZ1bGZpbGxtZW50SGFuZGxlciIsInJlamVjdGlvbkhhbmRsZXIiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVGb3JlaWduVGhlbmFibGUiLCJ0aGVuYWJsZSIsInNlYWxlZCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QiLCJfbGFiZWwiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVPd25UaGVuYWJsZSIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlTWF5YmVUaGVuYWJsZSIsIm1heWJlVGhlbmFibGUiLCJsaWIkZXM2JHByb21pc2UkdGhlbiQkZGVmYXVsdCIsInJlc29sdmUiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRkZWZhdWx0IiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaFJlamVjdGlvbiIsIl9vbmVycm9yIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkciLCJfc3Vic2NyaWJlcnMiLCJzdWJzY3JpYmVycyIsInNldHRsZWQiLCJkZXRhaWwiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRFcnJvck9iamVjdCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeUNhdGNoIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SIiwic3VjY2VlZGVkIiwiZmFpbGVkIiwiaGFzQ2FsbGJhY2siLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbml0aWFsaXplUHJvbWlzZSIsInJlc29sdmVyIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbmV4dElkIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaWQiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGFsbCIsImxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRkZWZhdWx0IiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkcmFjZSIsImxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNBcnJheSIsInJlamVjdCIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkcmVqZWN0IiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzUmVzb2x2ZXIiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkbmVlZHNOZXciLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZSIsImxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yIiwiaW5wdXQiLCJfaW5zdGFuY2VDb25zdHJ1Y3RvciIsIl9pbnB1dCIsIl9yZW1haW5pbmciLCJfZW51bWVyYXRlIiwibGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJHZhbGlkYXRpb25FcnJvciIsImxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkcG9seWZpbGwiLCJsb2NhbCIsIlAiLCJQcm9taXNlIiwiY2FzdCIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0IiwibGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheSIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJXaW5kb3ciLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3Nlckdsb2JhbCIsIldlYktpdE11dGF0aW9uT2JzZXJ2ZXIiLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNOb2RlIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJGlzV29ya2VyIiwiVWludDhDbGFtcGVkQXJyYXkiLCJpbXBvcnRTY3JpcHRzIiwicmFuZG9tIiwic3Vic3RyaW5nIiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRkZWZhdWx0IiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkZGVmYXVsdCIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkZGVmYXVsdCIsImFsbCIsInJhY2UiLCJfc2V0U2NoZWR1bGVyIiwiX3NldEFzYXAiLCJfYXNhcCIsImNhdGNoIiwiX2VhY2hFbnRyeSIsIl9zZXR0bGVkQXQiLCJfd2lsbFNldHRsZUF0IiwiZW51bWVyYXRvciIsImxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkZGVmYXVsdCIsImxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2UiLCJwb2x5ZmlsbCIsIm5vcm1hbGl6ZU5hbWUiLCJub3JtYWxpemVWYWx1ZSIsIml0ZXJhdG9yRm9yIiwic3VwcG9ydCIsIml0ZXJhYmxlIiwiSGVhZGVycyIsImNvbnN1bWVkIiwiYm9keVVzZWQiLCJmaWxlUmVhZGVyUmVhZHkiLCJyZWFkZXIiLCJvbmxvYWQiLCJvbmVycm9yIiwicmVhZEJsb2JBc0FycmF5QnVmZmVyIiwiYmxvYiIsIkZpbGVSZWFkZXIiLCJyZWFkQXNBcnJheUJ1ZmZlciIsInJlYWRCbG9iQXNUZXh0IiwicmVhZEFzVGV4dCIsIkJvZHkiLCJfaW5pdEJvZHkiLCJfYm9keUluaXQiLCJfYm9keVRleHQiLCJCbG9iIiwiaXNQcm90b3R5cGVPZiIsIl9ib2R5QmxvYiIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJfYm9keUZvcm1EYXRhIiwic2VhcmNoUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiYXJyYXlCdWZmZXIiLCJBcnJheUJ1ZmZlciIsInJlamVjdGVkIiwiZGVjb2RlIiwibm9ybWFsaXplTWV0aG9kIiwidXBjYXNlZCIsIlJlcXVlc3QiLCJ1cmwiLCJjcmVkZW50aWFscyIsInJlZmVycmVyIiwiZm9ybSIsImJ5dGVzIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwieGhyIiwicGFpcnMiLCJnZXRBbGxSZXNwb25zZUhlYWRlcnMiLCJoZWFkZXIiLCJSZXNwb25zZSIsImJvZHlJbml0Iiwic3RhdHVzIiwib2siLCJzdGF0dXNUZXh0IiwidmFsdWVzIiwiZ2V0QWxsIiwidGhpc0FyZyIsImNsb25lIiwicmVkaXJlY3RTdGF0dXNlcyIsInJlZGlyZWN0IiwiUmFuZ2VFcnJvciIsImxvY2F0aW9uIiwicmVzcG9uc2VVUkwiLCJnZXRSZXNwb25zZUhlYWRlciIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsInJlc3BvbnNlVGV4dCIsIm9udGltZW91dCIsIndpdGhDcmVkZW50aWFscyIsInJlc3BvbnNlVHlwZSIsInNldFJlcXVlc3RIZWFkZXIiLCJzZW5kIiwiRGF0YVZpZXciLCJIYXNoIiwiaGFzaENsZWFyIiwiaGFzaERlbGV0ZSIsImhhc2hHZXQiLCJoYXNoSGFzIiwiaGFzaFNldCIsInNldENhY2hlQWRkIiwic2V0Q2FjaGVIYXMiLCJVaW50OEFycmF5IiwiV2Vha01hcCIsInByZWRpY2F0ZSIsIkZVTkNfRVJST1JfVEVYVCIsImJhc2VGaW5kSW5kZXgiLCJmcm9tSW5kZXgiLCJmcm9tUmlnaHQiLCJiYXNlSGFzSW4iLCJvYmpJc0FyciIsIm90aElzQXJyIiwib2JqVGFnIiwiYXJyYXlUYWciLCJvdGhUYWciLCJnZXRUYWciLCJvYmplY3RUYWciLCJvYmpJc09iaiIsIm90aElzT2JqIiwiaXNTYW1lVGFnIiwiaXNUeXBlZEFycmF5IiwiZXF1YWxCeVRhZyIsIm9iaklzV3JhcHBlZCIsIm90aElzV3JhcHBlZCIsIm9ialVud3JhcHBlZCIsIm90aFVud3JhcHBlZCIsImVxdWFsT2JqZWN0cyIsImJhc2VJc01hdGNoIiwibWF0Y2hEYXRhIiwibm9DdXN0b21pemVyIiwib2JqVmFsdWUiLCJpc01hc2tlZCIsInBhdHRlcm4iLCJyZUlzTmF0aXZlIiwicmVJc0hvc3RDdG9yIiwicmVSZWdFeHBDaGFyIiwiYmFzZUl0ZXJhdGVlIiwiaWRlbnRpdHkiLCJiYXNlTWF0Y2hlc1Byb3BlcnR5IiwiYmFzZU1hdGNoZXMiLCJuYXRpdmVLZXlzIiwiZ2V0TWF0Y2hEYXRhIiwiaGFzSW4iLCJiYXNlUHJvcGVydHlEZWVwIiwiYmFzZVRpbWVzIiwiaXRlcmF0ZWUiLCJiYXNlVG9TdHJpbmciLCJzeW1ib2xUb1N0cmluZyIsInN5bWJvbFByb3RvIiwiY29yZUpzRGF0YSIsImRhdGFWaWV3VGFnIiwiYnl0ZUxlbmd0aCIsImJ5dGVPZmZzZXQiLCJidWZmZXIiLCJhcnJheUJ1ZmZlclRhZyIsImJvb2xUYWciLCJkYXRlVGFnIiwiZXJyb3JUYWciLCJtZXNzYWdlIiwibnVtYmVyVGFnIiwicmVnZXhwVGFnIiwibWFwVGFnIiwibWFwVG9BcnJheSIsInNldFRhZyIsInNldFRvQXJyYXkiLCJzeW1ib2xWYWx1ZU9mIiwib2JqUHJvcHMiLCJvYmpMZW5ndGgiLCJvdGhQcm9wcyIsInNraXBDdG9yIiwib2JqQ3RvciIsIm90aEN0b3IiLCJuYXRpdmVHZXRQcm90b3R5cGUiLCJnZXRQcm90b3R5cGVPZiIsInByb21pc2VUYWciLCJ3ZWFrTWFwVGFnIiwiZGF0YVZpZXdDdG9yU3RyaW5nIiwibWFwQ3RvclN0cmluZyIsInByb21pc2VDdG9yU3RyaW5nIiwic2V0Q3RvclN0cmluZyIsIndlYWtNYXBDdG9yU3RyaW5nIiwiQ3RvciIsImN0b3JTdHJpbmciLCJoYXNQYXRoIiwiaGFzRnVuYyIsIkhBU0hfVU5ERUZJTkVEIiwibWFza1NyY0tleSIsIklFX1BST1RPIiwicHJvdG8iLCJwb3AiLCJzdHJpbmciLCJMQVJHRV9BUlJBWV9TSVpFIiwicmVQcm9wTmFtZSIsInJlRXNjYXBlQ2hhciIsInF1b3RlIiwiaW52b2tlRnVuYyIsInRpbWUiLCJsYXN0QXJncyIsImxhc3RUaGlzIiwibGFzdEludm9rZVRpbWUiLCJsZWFkaW5nRWRnZSIsInRpbWVySWQiLCJ0aW1lckV4cGlyZWQiLCJsZWFkaW5nIiwicmVtYWluaW5nV2FpdCIsInRpbWVTaW5jZUxhc3RDYWxsIiwibGFzdENhbGxUaW1lIiwidGltZVNpbmNlTGFzdEludm9rZSIsIm1heGluZyIsIm5hdGl2ZU1pbiIsIm1heFdhaXQiLCJzaG91bGRJbnZva2UiLCJ0cmFpbGluZ0VkZ2UiLCJ0cmFpbGluZyIsImRlYm91bmNlZCIsImlzSW52b2tpbmciLCJuYXRpdmVNYXgiLCJtYXgiLCJtaW4iLCJkZWZhdWx0VmFsdWUiLCJ0eXBlZEFycmF5VGFncyIsImZsb2F0MzJUYWciLCJmbG9hdDY0VGFnIiwiaW50OFRhZyIsImludDE2VGFnIiwiaW50MzJUYWciLCJ1aW50OFRhZyIsInVpbnQ4Q2xhbXBlZFRhZyIsInVpbnQxNlRhZyIsInVpbnQzMlRhZyIsIm1lbW9pemVkIiwib3RoZXJBcmdzIiwiTUFYX0lOVEVHRVIiLCJfc2VsZiIsIldvcmtlckdsb2JhbFNjb3BlIiwiUHJpc20iLCJ1bmlxdWVJZCIsImVuY29kZSIsIlRva2VuIiwibyIsIm9iaklkIiwidiIsImxhbmd1YWdlcyIsInJlZGVmIiwiaW5zaWRlIiwiZ3JhbW1hciIsIm5ld1Rva2VuIiwiREZTIiwidmlzaXRlZCIsInBsdWdpbnMiLCJlbGVtZW50IiwiZWxlbWVudHMiLCJoaWdobGlnaHRFbGVtZW50IiwibGFuZ3VhZ2UiLCJub2RlTmFtZSIsIldvcmtlciIsIndvcmtlciIsImZpbGVuYW1lIiwiaGlnaGxpZ2h0ZWRDb2RlIiwiaW1tZWRpYXRlQ2xvc2UiLCJoaWdobGlnaHQiLCJ0b2tlbml6ZSIsInN0cmFyciIsInRva2VubG9vcCIsInBhdHRlcm5zIiwibG9va2JlaGluZCIsImdyZWVkeSIsImxvb2tiZWhpbmRMZW5ndGgiLCJkZWxOdW0iLCJuZXh0VG9rZW4iLCJtYXRjaGVkU3RyIiwiY29tYlN0ciIsIndyYXBwZWQiLCJhbGlhc2VzIiwiY3VycmVudFNjcmlwdCIsInJlYWR5U3RhdGUiLCJtYXJrdXAiLCJjb21tZW50IiwicHJvbG9nIiwiZG9jdHlwZSIsImNkYXRhIiwicHVuY3R1YXRpb24iLCJuYW1lc3BhY2UiLCJhdHRyLXZhbHVlIiwiYXR0ci1uYW1lIiwiZW50aXR5IiwieG1sIiwibWF0aG1sIiwic3ZnIiwiYXRydWxlIiwicnVsZSIsImltcG9ydGFudCIsImZ1bmN0aW9uIiwic3R5bGUtYXR0ciIsImNsaWtlIiwiY2xhc3MtbmFtZSIsImtleXdvcmQiLCJib29sZWFuIiwib3BlcmF0b3IiLCJqYXZhc2NyaXB0IiwicmVnZXgiLCJ0ZW1wbGF0ZS1zdHJpbmciLCJpbnRlcnBvbGF0aW9uIiwiaW50ZXJwb2xhdGlvbi1wdW5jdHVhdGlvbiIsImpzIiwiZmlsZUhpZ2hsaWdodCIsIkV4dGVuc2lvbnMiLCJweSIsInJiIiwicHMxIiwicHNtMSIsInNoIiwiYmF0IiwiaCIsInRleCIsInByZSIsImV4dGVuc2lvbiIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsIlRhcmdldCIsIm1hdGNoZXIiLCJkZWxlZ2F0ZSIsIk1hdGNoZXIiLCJyb3V0ZXMiLCJnZW5lcmF0ZU1hdGNoIiwic3RhcnRpbmdQYXRoIiwibmVzdGVkQ2FsbGJhY2siLCJmdWxsUGF0aCIsImFkZFJvdXRlIiwicm91dGVBcnJheSIsInN1YnN0ciIsInJvdXRlIiwiZWFjaFJvdXRlIiwiYmFzZVJvdXRlIiwiYWRkUm91dGVDYWxsYmFjayIsIm5vV2FybmluZyIsInRyeURlY29kZSIsInVyaSIsImFzQ29tcG9uZW50IiwiZGVjb2RlVVJJIiwiU3RhdGljU2VnbWVudCIsIkR5bmFtaWNTZWdtZW50IiwiU3RhclNlZ21lbnQiLCJFcHNpbG9uU2VnbWVudCIsInNwZWNpZmljaXR5Iiwic2VnbWVudHMiLCJyZXN1bHRzIiwic2VnbWVudCIsIlN0YXRlIiwiY2hhclNwZWMiLCJuZXh0U3RhdGVzIiwic29ydFNvbHV0aW9ucyIsInN0YXRlcyIsInJlY29nbml6ZUNoYXIiLCJSZWNvZ25pemVSZXN1bHRzIiwicXVlcnlQYXJhbXMiLCJmaW5kSGFuZGxlciIsImNhcHR1cmVzIiwiY3VycmVudENhcHR1cmUiLCJpc0R5bmFtaWMiLCJhZGRTZWdtZW50IiwiY3VycmVudFN0YXRlIiwiZWFjaENoYXIiLCJkZWNvZGVRdWVyeVBhcmFtUGFydCIsIndhcm4kMSIsInJlc29sdmVQYXRoIiwiYmFzZSIsInJlbGF0aXZlIiwiaXNQcm9taXNlIiwiZ2V0Um91dGVDb25maWciLCJyZXNvbHZlQXN5bmNDb21wb25lbnQiLCJleHBvcnRzJDEiLCJtYXBQYXJhbXMiLCJnZW5RdWVyeSIsImNhblJldXNlIiwidmlldyIsImNhblJldXNlRm4iLCJjYW5EZWFjdGl2YXRlIiwiZnJvbUNvbXBvbmVudCIsImV4cGVjdEJvb2xlYW4iLCJjYW5BY3RpdmF0ZSIsImFib3J0ZWQiLCJkZWFjdGl2YXRlIiwiY2FsbEhvb2tzIiwicmV1c2UiLCJhY3RpdmF0ZVF1ZXVlIiwic2F2ZUNoaWxkVmlldyIsImFjdGl2YXRlSG9vayIsImRhdGFIb29rIiwid2FpdEZvckRhdGEiLCJhY3RpdmF0ZWQiLCJsb2FkaW5nIiwiJGxvYWRpbmdSb3V0ZURhdGEiLCJfcm91dGVyVmlldyIsImNhY2hlZENoaWxkVmlldyIsIl9rZWVwQWxpdmVSb3V0ZXJWaWV3IiwiY2hpbGRWaWV3IiwiX3JlbmRlcmVkIiwiX3RyYW5zaXRpb25PbkxvYWQiLCJzZXRDdXJyZW50IiwiYWZ0ZXJEYXRhIiwiYWZ0ZXJBY3RpdmF0ZSIsImxvYWREYXRhIiwicG9zdEFjdGl2YXRlIiwicHJvY2Vzc0RhdGEiLCJwcm9taXNlcyIsInJlc29sdmVkVmFsIiwiaXNQbGFpbk9qYmVjdCIsImFwcGx5T3ZlcnJpZGUiLCJfVnVlJHV0aWwiLCJfcGFyZW50IiwiJHJvdXRlciIsIiRyb3V0ZSIsIl9jaGlsZHJlbiIsIl9kZWZpbmVNZXRhIiwiaG9va3NUb01lcmdlUkUiLCJWaWV3IiwiY29tcG9uZW50RGVmIiwidmlld0RlZiIsIl9pc0R5bmFtaWNMaXRlcmFsIiwicGFyZW50VmlldyIsIl9yb290VmlldyIsIl9jdXJyZW50VHJhbnNpdGlvbiIsImVsZW1lbnREaXJlY3RpdmUiLCJMaW5rIiwic2FtZU9yaWdpbiIsInByb3RvY29sIiwiaG9zdG5hbWUiLCJwb3J0IiwidG9nZ2xlQ2xhc3NlcyIsIm9uUHJpb3JpdHkiLCJMSU5LX1VQREFURSIsImFjdGl2ZUlkIiwiY2hpbGRMaW5rcyIsImV4aXN0aW5nSWQiLCJhY3RpdmVJZHMiLCJ1cGRhdGVDbGFzc2VzIiwib25Sb3V0ZVVwZGF0ZSIsIm9uQ2xpY2siLCJleGFjdCIsInByZXZBY3RpdmVDbGFzcyIsImFjdGl2ZUNsYXNzIiwibWV0YUtleSIsImN0cmxLZXkiLCJzaGlmdEtleSIsImRlZmF1bHRQcmV2ZW50ZWQiLCJidXR0b24iLCJnbyIsInBhdGhuYW1lIiwiaGlzdG9yeSIsInJvb3RSRSIsIm5ld1BhdGgiLCJzdHJpbmdpZnlQYXRoIiwidXBkYXRlQWN0aXZlTWF0Y2giLCJ1cGRhdGVIcmVmIiwiYWN0aXZlUkUiLCJxdWVyeVN0cmluZ1JFIiwiaXNBYnNvbHV0ZSIsImhyZWYiLCJmb3JtYXRQYXRoIiwiX2xpbmtBY3RpdmVDbGFzcyIsImRlc3QiLCJ0cmFpbGluZ1NsYXNoUkUiLCJndWFyZENvbXBvbmVudCIsImNvbXAiLCJiYWJlbEhlbHBlcnMiLCJjbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwid2lsbEFkZFJvdXRlIiwiYWRkQ2hpbGQiLCJjb250ZXh0RW50ZXJlZCIsInNwZWNpYWxzIiwidmFsaWRDaGFycyIsImdlbmVyYXRlIiwiaW52YWxpZENoYXJzIiwicmVwZWF0IiwiaXNFcXVhbCIsImNoYXJzIiwicmV0dXJuZWQiLCJvQ3JlYXRlIiwiRiIsIlJvdXRlUmVjb2duaXplciIsInJvb3RTdGF0ZSIsImFsbFNlZ21lbnRzIiwiaXNFbXB0eSIsImFzIiwiaGFuZGxlcnNGb3IiLCJoYXNSb3V0ZSIsIm91dHB1dCIsImdlbmVyYXRlUXVlcnlTdHJpbmciLCJwYWlyIiwiYXJyYXlQYWlyIiwicGFyc2VRdWVyeVN0cmluZyIsInF1ZXJ5U3RyaW5nIiwia2V5TGVuZ3RoIiwicmVjb2duaXplIiwicGF0aExlbiIsInF1ZXJ5U3RhcnQiLCJpc1NsYXNoRHJvcHBlZCIsInNvbHV0aW9ucyIsImhhc2hSRSIsIkhUTUw1SGlzdG9yeSIsIm9uQ2hhbmdlIiwiYmFzZUVsIiwicmVwbGFjZVN0YXRlIiwicG9zIiwicGFnZVhPZmZzZXQiLCJ5IiwicGFnZVlPZmZzZXQiLCJwdXNoU3RhdGUiLCJoYXNoTWF0Y2giLCJIYXNoSGlzdG9yeSIsImhhc2hiYW5nIiwiZm9ybWF0dGVkUGF0aCIsImlzQWJzb2xvdXRlIiwiQWJzdHJhY3RIaXN0b3J5IiwiY3VycmVudFBhdGgiLCJSb3V0ZVRyYW5zaXRpb24iLCJhYm9ydCIsImFib3J0aW5nT25Mb2FkIiwiZGVhY3RpdmF0ZVF1ZXVlIiwicmV2ZXJzZURlYWN0aXZhdGVRdWV1ZSIsInJldmVyc2UiLCJyZXVzZVF1ZXVlIiwicnVuUXVldWUiLCJfb25UcmFuc2l0aW9uVmFsaWRhdGVkIiwiX3ZpZXciLCJfcmVmJGV4cGVjdEJvb2xlYW4iLCJfcmVmJHBvc3RBY3RpdmF0ZSIsIm5leHRDYWxsZWQiLCJvbkVycm9yIiwiZXJyIiwiX3N1cHByZXNzIiwib25Qcm9taXNlRXJyb3IiLCJuZXh0V2l0aEJvb2xlYW4iLCJuZXh0V2l0aERhdGEiLCJleHBvc2VkIiwiaW50ZXJuYWxLZXlzUkUiLCJSb3V0ZSIsIl9yZWNvZ25pemVyIiwiX25vdEZvdW5kSGFuZGxlciIsImhpc3RvcnlCYWNrZW5kcyIsImFic3RyYWN0IiwiaHRtbDUiLCJSb3V0ZXIiLCJfcmVmJGhhc2hiYW5nIiwiX3JlZiRhYnN0cmFjdCIsIl9yZWYkaGlzdG9yeSIsIl9yZWYkc2F2ZVNjcm9sbFBvc2l0aW9uIiwic2F2ZVNjcm9sbFBvc2l0aW9uIiwiX3JlZiR0cmFuc2l0aW9uT25Mb2FkIiwidHJhbnNpdGlvbk9uTG9hZCIsIl9yZWYkc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3IiLCJzdXBwcmVzc1RyYW5zaXRpb25FcnJvciIsIl9yZWYkcm9vdCIsIl9yZWYkbGlua0FjdGl2ZUNsYXNzIiwibGlua0FjdGl2ZUNsYXNzIiwiYXBwIiwiX2d1YXJkUmVjb2duaXplciIsIl9zdGFydGVkIiwiX3N0YXJ0Q2IiLCJfY3VycmVudFJvdXRlIiwiX3ByZXZpb3VzVHJhbnNpdGlvbiIsIl9ub3RGb3VuZFJlZGlyZWN0IiwiX2JlZm9yZUVhY2hIb29rcyIsIl9hZnRlckVhY2hIb29rcyIsIl9yb290IiwiX2Fic3RyYWN0IiwiX2hhc2hiYW5nIiwiaGFzUHVzaFN0YXRlIiwiX2hpc3RvcnkiLCJfaGlzdG9yeUZhbGxiYWNrIiwiSGlzdG9yeSIsIl9tYXRjaCIsIl9zYXZlU2Nyb2xsUG9zaXRpb24iLCJfbWFwIiwicm9vdFBhdGgiLCJfbm90Rm91bmQiLCJfYWRkUm91dGUiLCJfYWRkUmVkaXJlY3QiLCJfYWRkQWxpYXMiLCJiZWZvcmVFYWNoIiwiX2FwcENvbnRhaW5lciIsIl9hcHBDb25zdHJ1Y3RvciIsIl9sb2NhdGlvbiIsImdlbmVyYXRlZFBhdGgiLCJjdXJyZW50UGFyYW1zIiwidGFyZ2V0UGFyYW1zIiwiZW5jb2RlVVJJIiwic3ViUm91dGVzIiwic3ViUGF0aCIsInJlZGlyZWN0UGF0aCIsIl9hZGRHdWFyZCIsImFsaWFzUGF0aCIsIm1hcHBlZFBhdGgiLCJfaGFuZGxlciIsInJlYWxQYXRoIiwiX2NoZWNrR3VhcmQiLCJfdGhpczMiLCJjdXJyZW50Um91dGUiLCJjdXJyZW50VHJhbnNpdGlvbiIsIl9wcmV2VHJhbnNpdGlvbiIsImJlZm9yZUhvb2tzIiwic3RhcnRUcmFuc2l0aW9uIiwiX3Bvc3RUcmFuc2l0aW9uIiwic2Nyb2xsVG8iLCJzY3JvbGxYIiwib2Zmc2V0VG9wIiwiZXh0ZXJuYWxWdWUiLCJsb2NhbHMiLCJ3ZWJwYWNrUG9seWZpbGwiLCJkZXByZWNhdGUiLCJwYXRocyJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NrQ25CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FFLFdBQ0FFLEdBQUFKLEVBQ0FLLFFBQUEsRUFVQSxPQU5BUCxHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxRQUFBLEVBR0FGLEVBQUFELFFBckRBLEdBQUFLLEdBQUFDLE9BQUEsWUFDQUEsUUFBQSxzQkFBQUMsRUFBQUMsR0FJQSxJQURBLEdBQUFWLEdBQUFXLEVBQUFDLEVBQUEsRUFBQUMsS0FDUUQsRUFBQUgsRUFBQUssT0FBb0JGLElBQzVCRCxFQUFBRixFQUFBRyxHQUNBRyxFQUFBSixJQUNBRSxFQUFBRyxLQUFBQyxNQUFBSixF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QUttaUIsTUFBTTRlLFdxRC9xWWxCLGlCckRncllPcmhDLFdBQVcsV0FDVDJMLEVBQU04VyxNQUFNNGUsV3FEL3FZckIsa0JBQ0EsTXJEaXJZSytYLFVBQVcsV3FEL3FZaEIsR0FBQUMsR0FBQS80QyxLckRrcllXaWxDLEVxRGpyWVgsRXJEa3JZVytULEVBQVdDLFlBQVksV0FDckJoVSxFQUFVLEdxRGhyWXZCQSxJckRrcllXOFQsRUFBTzlTLElBQU0sbUJxRGpyWXhCaEIsRUFBQSxZckRtcllXaVUsY3FEanJZWEYsSUFFQSxJckRrcllPaDVDLE1BQUtpbUMsSUFBTSxtQnFEanJZbEJoQixFQUFBLGFyRG9yWUc1bEMsS0FBTSxXQUNKLE9BQ0U0bUMsSXFEanJZUCxHckRrcllPa1QsY3FEanJZUCxFckRrcllPVCxXQUNFOXRDLEtxRGpyWVQsYXJEa3JZUzFOLEtxRGpyWVQsVXJEa3JZU3k3QyxZcURqcllULEVyRGtyWVM5NkMsV3FEanJZVCxFckRrcllTKzZDLEtxRGpyWVQsd0NyRG1yWVNodUMsS3FEanJZVCxPckRrcllTMU4sS3FEanJZVCxTckRrcllTeTdDLFlxRGpyWVQsRXJEa3JZUzk2QyxVcURqcllULEtyRGtyWVMrNkMsS3FEanJZVCwyQ3JEbXJZU2h1QyxLcURqcllULGdCckRrcllTMU4sS3FEanJZVCxRckRrcllTeTdDLFlxRGpyWVQsRXJEa3JZUzk2QyxVcURqcllULE1yRGtyWVMrNkMsS3FEanJZVCx1QnJEbXJZU2h1QyxLcURqcllULGdCckRrcllTMU4sS3FEanJZVCxRckRrcllTeTdDLFlxRGpyWVQsRXJEa3JZUzk2QyxVcURqcllULE1yRGtyWVMrNkMsS3FEL3FZVCx5QnJEaXVZTSxTQUFTcjlDLEVBQVFELEVBQVNILEdBRS9CLFlBVUEsU0FBU3VDLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFVBQVNGLEdBUnZGNkosT0FBT3lELGVBQWUzUCxFQUFTLGNBQzdCc0ssT0FBTyxHc0Q5dllWLElBQUFwSCxHQUFBckQsRUFBQSxHdERtd1lLc0QsRUFBVWYsRUFBdUJjLEVBSXJDbEQsZUFDRTRELFlzRHB3WUhzNUMsU0FBQS81QyxjdER1d1lHWSxLQUFNLFdzRHR3WVQsR0FBQWdNLEdBQUFyTCxJdER5d1lLLFFBQ0VvNUMsdUJzRHh3WVAsRXREeXdZT0MsbUJBQ0VDLGFzRHh3WVQsRXREeXdZU0MsUUFDRXp2QyxNc0R2d1lYLFN0RHd3WVcwdkMsS3NEdndZWCxHdER3d1lXQyxlQUFnQixTQUF3QjcrQixHQUN0Q3ZQLEVBQU0rdEMsdUJzRHZ3WW5CLEt0RDB3WVd0dkMsTXNEdHdZWCxTdER1d1lXMHZDLEtzRHR3WVgsR3REdXdZV0MsZUFBZ0IsU0FBd0I3K0IsR0FDdEN2UCxFQUFNK3RDLHVCc0R0d1luQixLdER5d1lXdHZDLE1zRHJ3WVgsU3REc3dZVzB2QyxLc0Ryd1lYLEd0RHN3WVdDLGVBQWdCLFNBQXdCNytCLEdBQ3RDdlAsRUFBTSt0Qyx1QnNEcndZbkIsTXREeXdZT1YsV0FDRTl0QyxLc0Rwd1lULGN0RHF3WVMxTixLc0Rwd1lULFV0RHF3WVN5N0MsWXNEcHdZVCxFdERxd1lTOTZDLFVzRHB3WVQsRXREcXdZUys2QyxLc0Rwd1lULFN0RHN3WVNodUMsS3NEcHdZVCxTdERxd1lTMU4sS3NEcHdZVCxTdERxd1lTeTdDLFlzRHB3WVQsRXREcXdZUzk2QyxVc0Rwd1lULE10RHF3WVMrNkMsS3NEcHdZVCxTdERzd1lTaHVDLEtzRHB3WVQsZXREcXdZUzFOLEtzRHB3WVQsU3REcXdZU3k3QyxZc0Rwd1lULEV0RHF3WVM5NkMsVXNEcHdZVCxNdERxd1lTKzZDLEtzRHB3WVQsMEJ0RHN3WVNodUMsS3NEcHdZVCxjdERxd1lTMU4sS3NEcHdZVCxTdERxd1lTeTdDLFlzRHB3WVQsRXREcXdZUzk2QyxVc0Rwd1lULE10RHF3WVMrNkMsS3NEcHdZVCwyQnREc3dZU2h1QyxLc0Rwd1lULHdCdERxd1lTMU4sS3NEcHdZVCxXdERxd1lTeTdDLFlzRHB3WVQsRXREcXdZUzk2QyxVc0Rwd1lULE10RHF3WVMrNkMsS3NEbHdZVCxvRHREbTFZTSxTQUFTcjlDLEVBQVFELEVB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U0EsRUFBUUQiLCJmaWxlIjoidnVlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbi8qKioqKiovIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl07XG4vKioqKioqLyBcdHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSA9IGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGNodW5rSWRzLCBtb3JlTW9kdWxlcykge1xuLyoqKioqKi8gXHRcdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuLyoqKioqKi8gXHRcdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuLyoqKioqKi8gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIGNhbGxiYWNrcyA9IFtdO1xuLyoqKioqKi8gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4vKioqKioqLyBcdFx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG4vKioqKioqLyBcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pXG4vKioqKioqLyBcdFx0XHRcdGNhbGxiYWNrcy5wdXNoLmFwcGx5KGNhbGxiYWNrcywgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKTtcbi8qKioqKiovIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuLyoqKioqKi8gXHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdGlmKHBhcmVudEpzb25wRnVuY3Rpb24pIHBhcmVudEpzb25wRnVuY3Rpb24oY2h1bmtJZHMsIG1vcmVNb2R1bGVzKTtcbi8qKioqKiovIFx0XHR3aGlsZShjYWxsYmFja3MubGVuZ3RoKVxuLyoqKioqKi8gXHRcdFx0Y2FsbGJhY2tzLnNoaWZ0KCkuY2FsbChudWxsLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLyoqKioqKi8gXHQvLyBcIjBcIiBtZWFucyBcImFscmVhZHkgbG9hZGVkXCJcbi8qKioqKiovIFx0Ly8gQXJyYXkgbWVhbnMgXCJsb2FkaW5nXCIsIGFycmF5IGNvbnRhaW5zIGNhbGxiYWNrc1xuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuLyoqKioqKi8gXHRcdDA6MCxcbi8qKioqKiovIFx0XHQxOjAsXG4vKioqKioqLyBcdFx0MjowXG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoaXMgZmlsZSBjb250YWlucyBvbmx5IHRoZSBlbnRyeSBjaHVuay5cbi8qKioqKiovIFx0Ly8gVGhlIGNodW5rIGxvYWRpbmcgZnVuY3Rpb24gZm9yIGFkZGl0aW9uYWwgY2h1bmtzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZSA9IGZ1bmN0aW9uIHJlcXVpcmVFbnN1cmUoY2h1bmtJZCwgY2FsbGJhY2spIHtcbi8qKioqKiovIFx0XHQvLyBcIjBcIiBpcyB0aGUgc2lnbmFsIGZvciBcImFscmVhZHkgbG9hZGVkXCJcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDApXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gY2FsbGJhY2suY2FsbChudWxsLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gYW4gYXJyYXkgbWVhbnMgXCJjdXJyZW50bHkgbG9hZGluZ1wiLlxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSAhPT0gdW5kZWZpbmVkKSB7XG4vKioqKioqLyBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0ucHVzaChjYWxsYmFjayk7XG4vKioqKioqLyBcdFx0fSBlbHNlIHtcbi8qKioqKiovIFx0XHRcdC8vIHN0YXJ0IGNodW5rIGxvYWRpbmdcbi8qKioqKiovIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IFtjYWxsYmFja107XG4vKioqKioqLyBcdFx0XHR2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4vKioqKioqLyBcdFx0XHR2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4vKioqKioqLyBcdFx0XHRzY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuLyoqKioqKi8gXHRcdFx0c2NyaXB0LmNoYXJzZXQgPSAndXRmLTgnO1xuLyoqKioqKi8gXHRcdFx0c2NyaXB0LmFzeW5jID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0XHRzY3JpcHQuc3JjID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArIGNodW5rSWQgKyBcIi5hcHAuanNcIjtcbi8qKioqKiovIFx0XHRcdGhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL2h5YnJpZC10aG9yaXVtL2Rldi9hcHAvXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX1Z1ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNDMpO1xuXHRcblx0dmFyIF9WdWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfVnVlKTtcblx0XG5cdHZhciBfdnVlUm91dGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDMpO1xuXHRcblx0dmFyIF92dWVSb3V0ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdnVlUm91dGVyKTtcblx0XG5cdHZhciBfcm91dGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NSk7XG5cdFxuXHR2YXIgX3JvdXRlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yb3V0ZXMpO1xuXHRcblx0dmFyIF9oeWJyaWRUaG9yaXVtID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nyk7XG5cdFxuXHR2YXIgX2h5YnJpZFRob3JpdW0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaHlicmlkVGhvcml1bSk7XG5cdFxuXHR2YXIgX3ByaXNtanMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2MSk7XG5cdFxuXHR2YXIgX3ByaXNtanMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJpc21qcyk7XG5cdFxuXHR2YXIgX2luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODMpO1xuXHRcblx0dmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cdFxuXHR2YXIgX2luZGV4MyA9IF9fd2VicGFja19yZXF1aXJlX18oMTg0KTtcblx0XG5cdHZhciBfaW5kZXg0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgzKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRfVnVlMi5kZWZhdWx0LmNvbmZpZy5kZWJ1ZyA9IHRydWU7XG5cdFxuXHRfVnVlMi5kZWZhdWx0LnVzZShfdnVlUm91dGVyMi5kZWZhdWx0KTtcblx0X1Z1ZTIuZGVmYXVsdC51c2UoX2h5YnJpZFRob3JpdW0yLmRlZmF1bHQpO1xuXHRcblx0dmFyIHJvdXRlciA9IG5ldyBfdnVlUm91dGVyMi5kZWZhdWx0KCk7XG5cdHZhciBBcHAgPSBfVnVlMi5kZWZhdWx0LmV4dGVuZCh7XG5cdCAgY29tcG9uZW50czoge1xuXHQgICAgU2lkZU5hdjogX2luZGV4Mi5kZWZhdWx0LFxuXHQgICAgU2l0ZUhlYWRlcjogX2luZGV4NC5kZWZhdWx0XG5cdCAgfSxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgbGlnZXJFbmRQb2ludDogJ2h0dHBzOi8vYXBpLmNtcy50ZWx1cy5jb20vbGVnYWxzJyxcblx0ICAgICAgbGlnZXJBcHBsaWNhdGlvbktleTogJ2I5NzM4ZDY3Yjg5ZGZjNzgyNzQ2ZDRhOWNmNGExMDkzJ1xuXHQgICAgfTtcblx0ICB9XG5cdH0pO1xuXHRyb3V0ZXIubWFwKF9yb3V0ZXMyLmRlZmF1bHQpO1xuXHRyb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uICgpIHtcblx0ICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgIF9wcmlzbWpzMi5kZWZhdWx0LmhpZ2hsaWdodEFsbCgpO1xuXHQgIH0sIDApO1xuXHR9KTtcblx0cm91dGVyLnN0YXJ0KEFwcCwgJyNhcHAtbWFpbicpO1xuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LypcclxuXHRcdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcblx0XHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXHJcblx0Ki9cclxuXHQvLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxyXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgbGlzdCA9IFtdO1xyXG5cdFxyXG5cdFx0Ly8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xyXG5cdFx0bGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xyXG5cdFx0XHR2YXIgcmVzdWx0ID0gW107XHJcblx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0dmFyIGl0ZW0gPSB0aGlzW2ldO1xyXG5cdFx0XHRcdGlmKGl0ZW1bMl0pIHtcclxuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKFwiQG1lZGlhIFwiICsgaXRlbVsyXSArIFwie1wiICsgaXRlbVsxXSArIFwifVwiKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0cmVzdWx0LnB1c2goaXRlbVsxXSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiByZXN1bHQuam9pbihcIlwiKTtcclxuXHRcdH07XHJcblx0XHJcblx0XHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxyXG5cdFx0bGlzdC5pID0gZnVuY3Rpb24obW9kdWxlcywgbWVkaWFRdWVyeSkge1xyXG5cdFx0XHRpZih0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIilcclxuXHRcdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XHJcblx0XHRcdHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XHJcblx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcclxuXHRcdFx0XHRpZih0eXBlb2YgaWQgPT09IFwibnVtYmVyXCIpXHJcblx0XHRcdFx0XHRhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0Zm9yKGkgPSAwOyBpIDwgbW9kdWxlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBpdGVtID0gbW9kdWxlc1tpXTtcclxuXHRcdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXHJcblx0XHRcdFx0Ly8gdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBub3QgMTAwJSBwZXJmZWN0IGZvciB3ZWlyZCBtZWRpYSBxdWVyeSBjb21iaW5hdGlvbnNcclxuXHRcdFx0XHQvLyAgd2hlbiBhIG1vZHVsZSBpcyBpbXBvcnRlZCBtdWx0aXBsZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBtZWRpYSBxdWVyaWVzLlxyXG5cdFx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXHJcblx0XHRcdFx0aWYodHlwZW9mIGl0ZW1bMF0gIT09IFwibnVtYmVyXCIgfHwgIWFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcclxuXHRcdFx0XHRcdGlmKG1lZGlhUXVlcnkgJiYgIWl0ZW1bMl0pIHtcclxuXHRcdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYobWVkaWFRdWVyeSkge1xyXG5cdFx0XHRcdFx0XHRpdGVtWzJdID0gXCIoXCIgKyBpdGVtWzJdICsgXCIpIGFuZCAoXCIgKyBtZWRpYVF1ZXJ5ICsgXCIpXCI7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRsaXN0LnB1c2goaXRlbSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdFx0cmV0dXJuIGxpc3Q7XHJcblx0fTtcclxuXG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHRcdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdFx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuXHQqL1xuXHR2YXIgc3R5bGVzSW5Eb20gPSB7fSxcblx0XHRtZW1vaXplID0gZnVuY3Rpb24oZm4pIHtcblx0XHRcdHZhciBtZW1vO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0aWYgKHR5cGVvZiBtZW1vID09PSBcInVuZGVmaW5lZFwiKSBtZW1vID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdFx0cmV0dXJuIG1lbW87XG5cdFx0XHR9O1xuXHRcdH0sXG5cdFx0aXNPbGRJRSA9IG1lbW9pemUoZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gL21zaWUgWzYtOV1cXGIvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XG5cdFx0fSksXG5cdFx0Z2V0SGVhZEVsZW1lbnQgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcblx0XHR9KSxcblx0XHRzaW5nbGV0b25FbGVtZW50ID0gbnVsbCxcblx0XHRzaW5nbGV0b25Db3VudGVyID0gMCxcblx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XG5cdFx0aWYoZmFsc2UpIHtcblx0XHRcdGlmKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHN0eWxlLWxvYWRlciBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xuXHRcdH1cblx0XG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFx0Ly8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG5cdFx0Ly8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuXHRcblx0XHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSBib3R0b20gb2YgPGhlYWQ+LlxuXHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ1bmRlZmluZWRcIikgb3B0aW9ucy5pbnNlcnRBdCA9IFwiYm90dG9tXCI7XG5cdFxuXHRcdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCk7XG5cdFx0YWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcblx0XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG5cdFx0XHR2YXIgbWF5UmVtb3ZlID0gW107XG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblx0XHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xuXHRcdFx0XHRtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XG5cdFx0XHR9XG5cdFx0XHRpZihuZXdMaXN0KSB7XG5cdFx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCk7XG5cdFx0XHRcdGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XG5cdFx0XHR9XG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBkb21TdHlsZSA9IG1heVJlbW92ZVtpXTtcblx0XHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xuXHRcdFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKylcblx0XHRcdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKCk7XG5cdFx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucykge1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cdFx0XHRpZihkb21TdHlsZSkge1xuXHRcdFx0XHRkb21TdHlsZS5yZWZzKys7XG5cdFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdFx0ZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhciBwYXJ0cyA9IFtdO1xuXHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbGlzdFRvU3R5bGVzKGxpc3QpIHtcblx0XHR2YXIgc3R5bGVzID0gW107XG5cdFx0dmFyIG5ld1N0eWxlcyA9IHt9O1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XG5cdFx0XHR2YXIgaWQgPSBpdGVtWzBdO1xuXHRcdFx0dmFyIGNzcyA9IGl0ZW1bMV07XG5cdFx0XHR2YXIgbWVkaWEgPSBpdGVtWzJdO1xuXHRcdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG5cdFx0XHR2YXIgcGFydCA9IHtjc3M6IGNzcywgbWVkaWE6IG1lZGlhLCBzb3VyY2VNYXA6IHNvdXJjZU1hcH07XG5cdFx0XHRpZighbmV3U3R5bGVzW2lkXSlcblx0XHRcdFx0c3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcblx0XHRcdGVsc2Vcblx0XHRcdFx0bmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xuXHRcdH1cblx0XHRyZXR1cm4gc3R5bGVzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGVFbGVtZW50KSB7XG5cdFx0dmFyIGhlYWQgPSBnZXRIZWFkRWxlbWVudCgpO1xuXHRcdHZhciBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCA9IHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wW3N0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xuXHRcdGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcInRvcFwiKSB7XG5cdFx0XHRpZighbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3ApIHtcblx0XHRcdFx0aGVhZC5pbnNlcnRCZWZvcmUoc3R5bGVFbGVtZW50LCBoZWFkLmZpcnN0Q2hpbGQpO1xuXHRcdFx0fSBlbHNlIGlmKGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKSB7XG5cdFx0XHRcdGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlRWxlbWVudCwgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuXHRcdFx0fVxuXHRcdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AucHVzaChzdHlsZUVsZW1lbnQpO1xuXHRcdH0gZWxzZSBpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJib3R0b21cIikge1xuXHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgJ2luc2VydEF0Jy4gTXVzdCBiZSAndG9wJyBvciAnYm90dG9tJy5cIik7XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KSB7XG5cdFx0c3R5bGVFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0XHR2YXIgaWR4ID0gc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZUVsZW1lbnQpO1xuXHRcdGlmKGlkeCA+PSAwKSB7XG5cdFx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSB7XG5cdFx0dmFyIHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcblx0XHRzdHlsZUVsZW1lbnQudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0XHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGVFbGVtZW50KTtcblx0XHRyZXR1cm4gc3R5bGVFbGVtZW50O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcblx0XHR2YXIgc3R5bGVFbGVtZW50LCB1cGRhdGUsIHJlbW92ZTtcblx0XG5cdFx0aWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG5cdFx0XHR2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcblx0XHRcdHN0eWxlRWxlbWVudCA9IHNpbmdsZXRvbkVsZW1lbnQgfHwgKHNpbmdsZXRvbkVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuXHRcdFx0dXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCwgc3R5bGVJbmRleCwgZmFsc2UpO1xuXHRcdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCwgc3R5bGVJbmRleCwgdHJ1ZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0eWxlRWxlbWVudCA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKTtcblx0XHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQpO1xuXHRcdFx0cmVtb3ZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpO1xuXHRcdFx0fTtcblx0XHR9XG5cdFxuXHRcdHVwZGF0ZShvYmopO1xuXHRcblx0XHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG5cdFx0XHRpZihuZXdPYmopIHtcblx0XHRcdFx0aWYobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKVxuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZW1vdmUoKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cdFxuXHR2YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHRcdHZhciB0ZXh0U3RvcmUgPSBbXTtcblx0XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHRcdHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcblx0XHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuXHRcdH07XG5cdH0pKCk7XG5cdFxuXHRmdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlRWxlbWVudCwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG5cdFx0dmFyIGNzcyA9IHJlbW92ZSA/IFwiXCIgOiBvYmouY3NzO1xuXHRcblx0XHRpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcblx0XHRcdHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdFx0dmFyIGNoaWxkTm9kZXMgPSBzdHlsZUVsZW1lbnQuY2hpbGROb2Rlcztcblx0XHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0XHRzdHlsZUVsZW1lbnQuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGVFbGVtZW50LCBvYmopIHtcblx0XHR2YXIgY3NzID0gb2JqLmNzcztcblx0XHR2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG5cdFx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cdFxuXHRcdGlmIChtZWRpYSkge1xuXHRcdFx0c3R5bGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsIG1lZGlhKTtcblx0XHR9XG5cdFxuXHRcdGlmIChzb3VyY2VNYXApIHtcblx0XHRcdC8vIGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vZGV2dG9vbHMvZG9jcy9qYXZhc2NyaXB0LWRlYnVnZ2luZ1xuXHRcdFx0Ly8gdGhpcyBtYWtlcyBzb3VyY2UgbWFwcyBpbnNpZGUgc3R5bGUgdGFncyB3b3JrIHByb3Blcmx5IGluIENocm9tZVxuXHRcdFx0Y3NzICs9ICdcXG4vKiMgc291cmNlVVJMPScgKyBzb3VyY2VNYXAuc291cmNlc1swXSArICcgKi8nO1xuXHRcdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY2MDM4NzVcblx0XHRcdGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpICsgXCIgKi9cIjtcblx0XHR9XG5cdFxuXHRcdGlmIChzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xuXHRcdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcblx0XHR9IGVsc2Uge1xuXHRcdFx0d2hpbGUoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcblx0XHRcdFx0c3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcblx0XHRcdH1cblx0XHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcblx0XHR9XG5cdH1cblxuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge3ZhciBjaGVja0dsb2JhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTA4KTtcblx0XG5cdC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG5cdHZhciBmcmVlR2xvYmFsID0gY2hlY2tHbG9iYWwodHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwpO1xuXHRcblx0LyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cblx0dmFyIGZyZWVTZWxmID0gY2hlY2tHbG9iYWwodHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZik7XG5cdFxuXHQvKiogRGV0ZWN0IGB0aGlzYCBhcyB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cblx0dmFyIHRoaXNHbG9iYWwgPSBjaGVja0dsb2JhbCh0eXBlb2YgdGhpcyA9PSAnb2JqZWN0JyAmJiB0aGlzKTtcblx0XG5cdC8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xuXHR2YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgdGhpc0dsb2JhbCB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSByb290O1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYW4gYEFycmF5YCBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEB0eXBlIHtGdW5jdGlvbn1cblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXkoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqXG5cdCAqIF8uaXNBcnJheSgnYWJjJyk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqXG5cdCAqIF8uaXNBcnJheShfLm5vb3ApO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0dmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0FycmF5O1xuXG5cbi8qKiovIH0sXG4vKiA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMDQpXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NClcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYyKVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlSXNOYXRpdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMCksXG5cdCAgICBnZXRWYWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTE2KTtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBuYXRpdmUgZnVuY3Rpb24gYXQgYGtleWAgb2YgYG9iamVjdGAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBtZXRob2QgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZnVuY3Rpb24gaWYgaXQncyBuYXRpdmUsIGVsc2UgYHVuZGVmaW5lZGAuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXROYXRpdmUob2JqZWN0LCBrZXkpIHtcblx0ICB2YXIgdmFsdWUgPSBnZXRWYWx1ZShvYmplY3QsIGtleSk7XG5cdCAgcmV0dXJuIGJhc2VJc05hdGl2ZSh2YWx1ZSkgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXROYXRpdmU7XG5cblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcblx0ICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuXHQgKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc09iamVjdCh7fSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoXy5ub29wKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KG51bGwpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcblx0ICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblx0ICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzT2JqZWN0O1xuXG5cbi8qKiovIH0sXG4vKiA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG5cdCAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKHt9KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzT2JqZWN0TGlrZTtcblxuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGxpc3RDYWNoZUNsZWFyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjcpLFxuXHQgICAgbGlzdENhY2hlRGVsZXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjgpLFxuXHQgICAgbGlzdENhY2hlR2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjkpLFxuXHQgICAgbGlzdENhY2hlSGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzApLFxuXHQgICAgbGlzdENhY2hlU2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzEpO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYW4gbGlzdCBjYWNoZSBvYmplY3QuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cblx0ICovXG5cdGZ1bmN0aW9uIExpc3RDYWNoZShlbnRyaWVzKSB7XG5cdCAgdmFyIGluZGV4ID0gLTEsXG5cdCAgICAgIGxlbmd0aCA9IGVudHJpZXMgPyBlbnRyaWVzLmxlbmd0aCA6IDA7XG5cdFxuXHQgIHRoaXMuY2xlYXIoKTtcblx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG5cdCAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pO1xuXHQgIH1cblx0fVxuXHRcblx0Ly8gQWRkIG1ldGhvZHMgdG8gYExpc3RDYWNoZWAuXG5cdExpc3RDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBsaXN0Q2FjaGVDbGVhcjtcblx0TGlzdENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBsaXN0Q2FjaGVEZWxldGU7XG5cdExpc3RDYWNoZS5wcm90b3R5cGUuZ2V0ID0gbGlzdENhY2hlR2V0O1xuXHRMaXN0Q2FjaGUucHJvdG90eXBlLmhhcyA9IGxpc3RDYWNoZUhhcztcblx0TGlzdENhY2hlLnByb3RvdHlwZS5zZXQgPSBsaXN0Q2FjaGVTZXQ7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IExpc3RDYWNoZTtcblxuXG4vKioqLyB9LFxuLyogMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBlcSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ4KTtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBpbmRleCBhdCB3aGljaCB0aGUgYGtleWAgaXMgZm91bmQgaW4gYGFycmF5YCBvZiBrZXktdmFsdWUgcGFpcnMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG5cdCAqIEBwYXJhbSB7Kn0ga2V5IFRoZSBrZXkgdG8gc2VhcmNoIGZvci5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cblx0ICovXG5cdGZ1bmN0aW9uIGFzc29jSW5kZXhPZihhcnJheSwga2V5KSB7XG5cdCAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblx0ICB3aGlsZSAobGVuZ3RoLS0pIHtcblx0ICAgIGlmIChlcShhcnJheVtsZW5ndGhdWzBdLCBrZXkpKSB7XG5cdCAgICAgIHJldHVybiBsZW5ndGg7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiAtMTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBhc3NvY0luZGV4T2Y7XG5cblxuLyoqKi8gfSxcbi8qIDExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNLZXlhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjQpO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIGRhdGEgZm9yIGBtYXBgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIHJlZmVyZW5jZSBrZXkuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtYXAgZGF0YS5cblx0ICovXG5cdGZ1bmN0aW9uIGdldE1hcERhdGEobWFwLCBrZXkpIHtcblx0ICB2YXIgZGF0YSA9IG1hcC5fX2RhdGFfXztcblx0ICByZXR1cm4gaXNLZXlhYmxlKGtleSlcblx0ICAgID8gZGF0YVt0eXBlb2Yga2V5ID09ICdzdHJpbmcnID8gJ3N0cmluZycgOiAnaGFzaCddXG5cdCAgICA6IGRhdGEubWFwO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGdldE1hcERhdGE7XG5cblxuLyoqKi8gfSxcbi8qIDEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNCksXG5cdCAgICBpc1N5bWJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHRcblx0LyoqIFVzZWQgdG8gbWF0Y2ggcHJvcGVydHkgbmFtZXMgd2l0aGluIHByb3BlcnR5IHBhdGhzLiAqL1xuXHR2YXIgcmVJc0RlZXBQcm9wID0gL1xcLnxcXFsoPzpbXltcXF1dKnwoW1wiJ10pKD86KD8hXFwxKVteXFxcXF18XFxcXC4pKj9cXDEpXFxdLyxcblx0ICAgIHJlSXNQbGFpblByb3AgPSAvXlxcdyokLztcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUgYW5kIG5vdCBhIHByb3BlcnR5IHBhdGguXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeSBrZXlzIG9uLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzS2V5KHZhbHVlLCBvYmplY3QpIHtcblx0ICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdCAgaWYgKHR5cGUgPT0gJ251bWJlcicgfHwgdHlwZSA9PSAnc3ltYm9sJyB8fCB0eXBlID09ICdib29sZWFuJyB8fFxuXHQgICAgICB2YWx1ZSA9PSBudWxsIHx8IGlzU3ltYm9sKHZhbHVlKSkge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHQgIHJldHVybiByZUlzUGxhaW5Qcm9wLnRlc3QodmFsdWUpIHx8ICFyZUlzRGVlcFByb3AudGVzdCh2YWx1ZSkgfHxcblx0ICAgIChvYmplY3QgIT0gbnVsbCAmJiB2YWx1ZSBpbiBPYmplY3Qob2JqZWN0KSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNLZXk7XG5cblxuLyoqKi8gfSxcbi8qIDEzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2V0TmF0aXZlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cblx0dmFyIG5hdGl2ZUNyZWF0ZSA9IGdldE5hdGl2ZShPYmplY3QsICdjcmVhdGUnKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbmF0aXZlQ3JlYXRlO1xuXG5cbi8qKiovIH0sXG4vKiAxNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzU3ltYm9sID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdFxuXHQvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cblx0dmFyIElORklOSVRZID0gMSAvIDA7XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZyBrZXkgaWYgaXQncyBub3QgYSBzdHJpbmcgb3Igc3ltYm9sLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBpbnNwZWN0LlxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfHN5bWJvbH0gUmV0dXJucyB0aGUga2V5LlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9LZXkodmFsdWUpIHtcblx0ICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnIHx8IGlzU3ltYm9sKHZhbHVlKSkge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICB2YXIgcmVzdWx0ID0gKHZhbHVlICsgJycpO1xuXHQgIHJldHVybiAocmVzdWx0ID09ICcwJyAmJiAoMSAvIHZhbHVlKSA9PSAtSU5GSU5JVFkpID8gJy0wJyA6IHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB0b0tleTtcblxuXG4vKioqLyB9LFxuLyogMTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xuXHR2YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cblx0ICpcblx0ICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgbG9vc2VseSBiYXNlZCBvblxuXHQgKiBbYFRvTGVuZ3RoYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtdG9sZW5ndGgpLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsXG5cdCAqICBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNMZW5ndGgoMyk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0xlbmd0aChOdW1iZXIuTUlOX1ZBTFVFKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICpcblx0ICogXy5pc0xlbmd0aChJbmZpbml0eSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqXG5cdCAqIF8uaXNMZW5ndGgoJzMnKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJlxuXHQgICAgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzTGVuZ3RoO1xuXG5cbi8qKiovIH0sXG4vKiAxNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzT2JqZWN0TGlrZSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHQvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG5cdHZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlXG5cdCAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc1N5bWJvbCgnYWJjJyk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuXHQgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcblx0ICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZyk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNTeW1ib2w7XG5cblxuLyoqKi8gfSxcbi8qIDE3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgbWFwQ2FjaGVDbGVhciA9IF9fd2VicGFja19yZXF1aXJlX18oMTMyKSxcblx0ICAgIG1hcENhY2hlRGVsZXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzMpLFxuXHQgICAgbWFwQ2FjaGVHZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNCksXG5cdCAgICBtYXBDYWNoZUhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTM1KSxcblx0ICAgIG1hcENhY2hlU2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzYpO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBtYXAgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIGtleS12YWx1ZSBwYWlycy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuXHQgKi9cblx0ZnVuY3Rpb24gTWFwQ2FjaGUoZW50cmllcykge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICBsZW5ndGggPSBlbnRyaWVzID8gZW50cmllcy5sZW5ndGggOiAwO1xuXHRcblx0ICB0aGlzLmNsZWFyKCk7XG5cdCAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuXHQgICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIEFkZCBtZXRob2RzIHRvIGBNYXBDYWNoZWAuXG5cdE1hcENhY2hlLnByb3RvdHlwZS5jbGVhciA9IG1hcENhY2hlQ2xlYXI7XG5cdE1hcENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBtYXBDYWNoZURlbGV0ZTtcblx0TWFwQ2FjaGUucHJvdG90eXBlLmdldCA9IG1hcENhY2hlR2V0O1xuXHRNYXBDYWNoZS5wcm90b3R5cGUuaGFzID0gbWFwQ2FjaGVIYXM7XG5cdE1hcENhY2hlLnByb3RvdHlwZS5zZXQgPSBtYXBDYWNoZVNldDtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gTWFwQ2FjaGU7XG5cblxuLyoqKi8gfSxcbi8qIDE4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG5cdCAgICBnZW5UYWcgPSAnW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0nO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcblx0ICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG5cdCAqIG9mIHZhbHVlcy5cblx0ICovXG5cdHZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgRnVuY3Rpb25gIG9iamVjdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMC4xLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzRnVuY3Rpb24oXyk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0Z1bmN0aW9uKC9hYmMvKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcblx0ICAvLyBUaGUgdXNlIG9mIGBPYmplY3QjdG9TdHJpbmdgIGF2b2lkcyBpc3N1ZXMgd2l0aCB0aGUgYHR5cGVvZmAgb3BlcmF0b3Jcblx0ICAvLyBpbiBTYWZhcmkgOCB3aGljaCByZXR1cm5zICdvYmplY3QnIGZvciB0eXBlZCBhcnJheSBhbmQgd2VhayBtYXAgY29uc3RydWN0b3JzLFxuXHQgIC8vIGFuZCBQaGFudG9tSlMgMS45IHdoaWNoIHJldHVybnMgJ2Z1bmN0aW9uJyBmb3IgYE5vZGVMaXN0YCBpbnN0YW5jZXMuXG5cdCAgdmFyIHRhZyA9IGlzT2JqZWN0KHZhbHVlKSA/IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpIDogJyc7XG5cdCAgcmV0dXJuIHRhZyA9PSBmdW5jVGFnIHx8IHRhZyA9PSBnZW5UYWc7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNGdW5jdGlvbjtcblxuXG4vKioqLyB9LFxuLyogMTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXHRcblx0dmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXHRcblx0Ly8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG5cdC8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuXHQvLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG5cdC8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cdFxuXHR2YXIgY2FjaGVkU2V0VGltZW91dDtcblx0dmFyIGNhY2hlZENsZWFyVGltZW91dDtcblx0XG5cdChmdW5jdGlvbiAoKSB7XG5cdCAgdHJ5IHtcblx0ICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGNhY2hlZFNldFRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBpcyBub3QgZGVmaW5lZCcpO1xuXHQgICAgfVxuXHQgIH1cblx0ICB0cnkge1xuXHQgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaXMgbm90IGRlZmluZWQnKTtcblx0ICAgIH1cblx0ICB9XG5cdH0gKCkpXG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgZHJhaW5pbmcgPSBmYWxzZTtcblx0dmFyIGN1cnJlbnRRdWV1ZTtcblx0dmFyIHF1ZXVlSW5kZXggPSAtMTtcblx0XG5cdGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcblx0ICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgIH1cblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBkcmFpblF1ZXVlKCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG5cdCAgICBpZiAoZHJhaW5pbmcpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgdGltZW91dCA9IGNhY2hlZFNldFRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcblx0ICAgIGRyYWluaW5nID0gdHJ1ZTtcblx0XG5cdCAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgd2hpbGUobGVuKSB7XG5cdCAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG5cdCAgICAgICAgcXVldWUgPSBbXTtcblx0ICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgfVxuXHQgICAgY3VycmVudFF1ZXVlID0gbnVsbDtcblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBjYWNoZWRDbGVhclRpbWVvdXQodGltZW91dCk7XG5cdH1cblx0XG5cdHByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcblx0ICAgICAgICBjYWNoZWRTZXRUaW1lb3V0KGRyYWluUXVldWUsIDApO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0Ly8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuXHRmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcblx0ICAgIHRoaXMuZnVuID0gZnVuO1xuXHQgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuXHR9XG5cdEl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xuXHR9O1xuXHRwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xuXHRwcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xuXHRwcm9jZXNzLmVudiA9IHt9O1xuXHRwcm9jZXNzLmFyZ3YgPSBbXTtcblx0cHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5cdHByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHRcblx0cHJvY2Vzcy5vbiA9IG5vb3A7XG5cdHByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLm9uY2UgPSBub29wO1xuXHRwcm9jZXNzLm9mZiA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5cdHByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cdFxuXHRwcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRcblx0cHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcblx0cHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdHByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuLyoqKi8gfSxcbi8qIDIwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZGVmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblx0XG5cdHZhciBfZGVmZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShuZXdWYWwpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgaWYgKG5ld1ZhbCA9PT0gdHJ1ZSkge1xuXHQgICAgICAoMCwgX2RlZmVyMi5kZWZhdWx0KShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgX3RoaXMuZWwudGFiSW5kZXggPSAwO1xuXHQgICAgICAgIF90aGlzLmVsLmZvY3VzKCk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1cblx0fTsgLypcblx0ICAgICBAZGVzYyBBZGQgYmVoYXZpb3IgdG8gYW55IGVsZW1lbnQuXG5cdCAgICAgV2hlbiBldmFsIHRvIHRydWUsIGl0IHdpbGwgc2V0IGVsZW1lbnQgdGFiIGluZGV4IHRvIDAgYW5kIGZvY3VzIG9uIGl0LlxuXHQgICAgIEV4YW1wbGU6IDxkaXYgc2V0LWZvY3VzPVwid2lsbEZvY3VzV2hlblRydWVcIj48L2Rpdj5cblx0ICAgKi9cblxuLyoqKi8gfSxcbi8qIDIxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZXZlbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OCk7XG5cdFxuXHR2YXIgX2V2ZW50czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ldmVudHMpO1xuXHRcblx0dmFyIF94aHJSZXNwb25zZSA9IF9fd2VicGFja19yZXF1aXJlX18oNjkpO1xuXHRcblx0dmFyIF94aHJSZXNwb25zZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF94aHJSZXNwb25zZSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gW19ldmVudHMyLmRlZmF1bHQsIF94aHJSZXNwb25zZTIuZGVmYXVsdF07XG5cbi8qKiovIH0sXG4vKiAyMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldE5hdGl2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNiksXG5cdCAgICByb290ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cblx0dmFyIE1hcCA9IGdldE5hdGl2ZShyb290LCAnTWFwJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IE1hcDtcblxuXG4vKioqLyB9LFxuLyogMjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBMaXN0Q2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpLFxuXHQgICAgc3RhY2tDbGVhciA9IF9fd2VicGFja19yZXF1aXJlX18oMTQxKSxcblx0ICAgIHN0YWNrRGVsZXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDIpLFxuXHQgICAgc3RhY2tHZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MyksXG5cdCAgICBzdGFja0hhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ0KSxcblx0ICAgIHN0YWNrU2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDUpO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBzdGFjayBjYWNoZSBvYmplY3QgdG8gc3RvcmUga2V5LXZhbHVlIHBhaXJzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG5cdCAqL1xuXHRmdW5jdGlvbiBTdGFjayhlbnRyaWVzKSB7XG5cdCAgdGhpcy5fX2RhdGFfXyA9IG5ldyBMaXN0Q2FjaGUoZW50cmllcyk7XG5cdH1cblx0XG5cdC8vIEFkZCBtZXRob2RzIHRvIGBTdGFja2AuXG5cdFN0YWNrLnByb3RvdHlwZS5jbGVhciA9IHN0YWNrQ2xlYXI7XG5cdFN0YWNrLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBzdGFja0RlbGV0ZTtcblx0U3RhY2sucHJvdG90eXBlLmdldCA9IHN0YWNrR2V0O1xuXHRTdGFjay5wcm90b3R5cGUuaGFzID0gc3RhY2tIYXM7XG5cdFN0YWNrLnByb3RvdHlwZS5zZXQgPSBzdGFja1NldDtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gU3RhY2s7XG5cblxuLyoqKi8gfSxcbi8qIDI0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgcm9vdCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cblx0dmFyIFN5bWJvbCA9IHJvb3QuU3ltYm9sO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTeW1ib2w7XG5cblxuLyoqKi8gfSxcbi8qIDI1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgY2FzdFBhdGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KSxcblx0ICAgIGlzS2V5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMiksXG5cdCAgICB0b0tleSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmdldGAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWZhdWx0IHZhbHVlcy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlR2V0KG9iamVjdCwgcGF0aCkge1xuXHQgIHBhdGggPSBpc0tleShwYXRoLCBvYmplY3QpID8gW3BhdGhdIDogY2FzdFBhdGgocGF0aCk7XG5cdFxuXHQgIHZhciBpbmRleCA9IDAsXG5cdCAgICAgIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xuXHRcblx0ICB3aGlsZSAob2JqZWN0ICE9IG51bGwgJiYgaW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIG9iamVjdCA9IG9iamVjdFt0b0tleShwYXRoW2luZGV4KytdKV07XG5cdCAgfVxuXHQgIHJldHVybiAoaW5kZXggJiYgaW5kZXggPT0gbGVuZ3RoKSA/IG9iamVjdCA6IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlR2V0O1xuXG5cbi8qKiovIH0sXG4vKiAyNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldFByb3RvdHlwZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTE0KTtcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5oYXNgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBrZXkgVGhlIGtleSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUhhcyhvYmplY3QsIGtleSkge1xuXHQgIC8vIEF2b2lkIGEgYnVnIGluIElFIDEwLTExIHdoZXJlIG9iamVjdHMgd2l0aCBhIFtbUHJvdG90eXBlXV0gb2YgYG51bGxgLFxuXHQgIC8vIHRoYXQgYXJlIGNvbXBvc2VkIGVudGlyZWx5IG9mIGluZGV4IHByb3BlcnRpZXMsIHJldHVybiBgZmFsc2VgIGZvclxuXHQgIC8vIGBoYXNPd25Qcm9wZXJ0eWAgY2hlY2tzIG9mIHRoZW0uXG5cdCAgcmV0dXJuIG9iamVjdCAhPSBudWxsICYmXG5cdCAgICAoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkgfHxcblx0ICAgICAgKHR5cGVvZiBvYmplY3QgPT0gJ29iamVjdCcgJiYga2V5IGluIG9iamVjdCAmJiBnZXRQcm90b3R5cGUob2JqZWN0KSA9PT0gbnVsbCkpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VIYXM7XG5cblxuLyoqKi8gfSxcbi8qIDI3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZUlzRXF1YWxEZWVwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OCksXG5cdCAgICBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNyksXG5cdCAgICBpc09iamVjdExpa2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzRXF1YWxgIHdoaWNoIHN1cHBvcnRzIHBhcnRpYWwgY29tcGFyaXNvbnNcblx0ICogYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gW2JpdG1hc2tdIFRoZSBiaXRtYXNrIG9mIGNvbXBhcmlzb24gZmxhZ3MuXG5cdCAqICBUaGUgYml0bWFzayBtYXkgYmUgY29tcG9zZWQgb2YgdGhlIGZvbGxvd2luZyBmbGFnczpcblx0ICogICAgIDEgLSBVbm9yZGVyZWQgY29tcGFyaXNvblxuXHQgKiAgICAgMiAtIFBhcnRpYWwgY29tcGFyaXNvblxuXHQgKiBAcGFyYW0ge09iamVjdH0gW3N0YWNrXSBUcmFja3MgdHJhdmVyc2VkIGB2YWx1ZWAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlciwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcblx0ICBpZiAodmFsdWUgPT09IG90aGVyKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdCAgaWYgKHZhbHVlID09IG51bGwgfHwgb3RoZXIgPT0gbnVsbCB8fCAoIWlzT2JqZWN0KHZhbHVlKSAmJiAhaXNPYmplY3RMaWtlKG90aGVyKSkpIHtcblx0ICAgIHJldHVybiB2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyO1xuXHQgIH1cblx0ICByZXR1cm4gYmFzZUlzRXF1YWxEZWVwKHZhbHVlLCBvdGhlciwgYmFzZUlzRXF1YWwsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlSXNFcXVhbDtcblxuXG4vKioqLyB9LFxuLyogMjggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eWAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYWNjZXNzb3IgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlUHJvcGVydHkoa2V5KSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuXHQgICAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG5cdCAgfTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlUHJvcGVydHk7XG5cblxuLyoqKi8gfSxcbi8qIDI5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNCksXG5cdCAgICBzdHJpbmdUb1BhdGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Nik7XG5cdFxuXHQvKipcblx0ICogQ2FzdHMgYHZhbHVlYCB0byBhIHBhdGggYXJyYXkgaWYgaXQncyBub3Qgb25lLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBpbnNwZWN0LlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGNhc3QgcHJvcGVydHkgcGF0aCBhcnJheS5cblx0ICovXG5cdGZ1bmN0aW9uIGNhc3RQYXRoKHZhbHVlKSB7XG5cdCAgcmV0dXJuIGlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBzdHJpbmdUb1BhdGgodmFsdWUpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGNhc3RQYXRoO1xuXG5cbi8qKiovIH0sXG4vKiAzMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIFNldENhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MCksXG5cdCAgICBhcnJheVNvbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk0KTtcblx0XG5cdC8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNvbXBhcmlzb24gc3R5bGVzLiAqL1xuXHR2YXIgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyA9IDEsXG5cdCAgICBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cdFxuXHQvKipcblx0ICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBhcnJheXMgd2l0aCBzdXBwb3J0IGZvclxuXHQgKiBwYXJ0aWFsIGRlZXAgY29tcGFyaXNvbnMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge0FycmF5fSBvdGhlciBUaGUgb3RoZXIgYXJyYXkgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIG9mIGNvbXBhcmlzb24gZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgXG5cdCAqICBmb3IgbW9yZSBkZXRhaWxzLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gc3RhY2sgVHJhY2tzIHRyYXZlcnNlZCBgYXJyYXlgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXJyYXlzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBlcXVhbEFycmF5cyhhcnJheSwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcblx0ICB2YXIgaXNQYXJ0aWFsID0gYml0bWFzayAmIFBBUlRJQUxfQ09NUEFSRV9GTEFHLFxuXHQgICAgICBhcnJMZW5ndGggPSBhcnJheS5sZW5ndGgsXG5cdCAgICAgIG90aExlbmd0aCA9IG90aGVyLmxlbmd0aDtcblx0XG5cdCAgaWYgKGFyckxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIShpc1BhcnRpYWwgJiYgb3RoTGVuZ3RoID4gYXJyTGVuZ3RoKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG5cdCAgdmFyIHN0YWNrZWQgPSBzdGFjay5nZXQoYXJyYXkpO1xuXHQgIGlmIChzdGFja2VkKSB7XG5cdCAgICByZXR1cm4gc3RhY2tlZCA9PSBvdGhlcjtcblx0ICB9XG5cdCAgdmFyIGluZGV4ID0gLTEsXG5cdCAgICAgIHJlc3VsdCA9IHRydWUsXG5cdCAgICAgIHNlZW4gPSAoYml0bWFzayAmIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcpID8gbmV3IFNldENhY2hlIDogdW5kZWZpbmVkO1xuXHRcblx0ICBzdGFjay5zZXQoYXJyYXksIG90aGVyKTtcblx0XG5cdCAgLy8gSWdub3JlIG5vbi1pbmRleCBwcm9wZXJ0aWVzLlxuXHQgIHdoaWxlICgrK2luZGV4IDwgYXJyTGVuZ3RoKSB7XG5cdCAgICB2YXIgYXJyVmFsdWUgPSBhcnJheVtpbmRleF0sXG5cdCAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltpbmRleF07XG5cdFxuXHQgICAgaWYgKGN1c3RvbWl6ZXIpIHtcblx0ICAgICAgdmFyIGNvbXBhcmVkID0gaXNQYXJ0aWFsXG5cdCAgICAgICAgPyBjdXN0b21pemVyKG90aFZhbHVlLCBhcnJWYWx1ZSwgaW5kZXgsIG90aGVyLCBhcnJheSwgc3RhY2spXG5cdCAgICAgICAgOiBjdXN0b21pemVyKGFyclZhbHVlLCBvdGhWYWx1ZSwgaW5kZXgsIGFycmF5LCBvdGhlciwgc3RhY2spO1xuXHQgICAgfVxuXHQgICAgaWYgKGNvbXBhcmVkICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAgaWYgKGNvbXBhcmVkKSB7XG5cdCAgICAgICAgY29udGludWU7XG5cdCAgICAgIH1cblx0ICAgICAgcmVzdWx0ID0gZmFsc2U7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHQgICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cblx0ICAgIGlmIChzZWVuKSB7XG5cdCAgICAgIGlmICghYXJyYXlTb21lKG90aGVyLCBmdW5jdGlvbihvdGhWYWx1ZSwgb3RoSW5kZXgpIHtcblx0ICAgICAgICAgICAgaWYgKCFzZWVuLmhhcyhvdGhJbmRleCkgJiZcblx0ICAgICAgICAgICAgICAgIChhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spKSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBzZWVuLmFkZChvdGhJbmRleCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0pKSB7XG5cdCAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoIShcblx0ICAgICAgICAgIGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fFxuXHQgICAgICAgICAgICBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaylcblx0ICAgICAgICApKSB7XG5cdCAgICAgIHJlc3VsdCA9IGZhbHNlO1xuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICB9XG5cdCAgc3RhY2tbJ2RlbGV0ZSddKGFycmF5KTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGVxdWFsQXJyYXlzO1xuXG5cbi8qKiovIH0sXG4vKiAzMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgaG9zdCBvYmplY3QgaW4gSUUgPCA5LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBob3N0IG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNIb3N0T2JqZWN0KHZhbHVlKSB7XG5cdCAgLy8gTWFueSBob3N0IG9iamVjdHMgYXJlIGBPYmplY3RgIG9iamVjdHMgdGhhdCBjYW4gY29lcmNlIHRvIHN0cmluZ3Ncblx0ICAvLyBkZXNwaXRlIGhhdmluZyBpbXByb3Blcmx5IGRlZmluZWQgYHRvU3RyaW5nYCBtZXRob2RzLlxuXHQgIHZhciByZXN1bHQgPSBmYWxzZTtcblx0ICBpZiAodmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUudG9TdHJpbmcgIT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmVzdWx0ID0gISEodmFsdWUgKyAnJyk7XG5cdCAgICB9IGNhdGNoIChlKSB7fVxuXHQgIH1cblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzSG9zdE9iamVjdDtcblxuXG4vKioqLyB9LFxuLyogMzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xuXHR2YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgdW5zaWduZWQgaW50ZWdlciB2YWx1ZXMuICovXG5cdHZhciByZUlzVWludCA9IC9eKD86MHxbMS05XVxcZCopJC87XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGluZGV4LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHtcblx0ICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIgOiBsZW5ndGg7XG5cdCAgcmV0dXJuICEhbGVuZ3RoICYmXG5cdCAgICAodHlwZW9mIHZhbHVlID09ICdudW1iZXInIHx8IHJlSXNVaW50LnRlc3QodmFsdWUpKSAmJlxuXHQgICAgKHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPCBsZW5ndGgpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzSW5kZXg7XG5cblxuLyoqKi8gfSxcbi8qIDMzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciBzdHJpY3QgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpZiBzdWl0YWJsZSBmb3Igc3RyaWN0XG5cdCAqICBlcXVhbGl0eSBjb21wYXJpc29ucywgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNTdHJpY3RDb21wYXJhYmxlKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSAmJiAhaXNPYmplY3QodmFsdWUpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzU3RyaWN0Q29tcGFyYWJsZTtcblxuXG4vKioqLyB9LFxuLyogMzQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYG1hdGNoZXNQcm9wZXJ0eWAgZm9yIHNvdXJjZSB2YWx1ZXMgc3VpdGFibGVcblx0ICogZm9yIHN0cmljdCBlcXVhbGl0eSBjb21wYXJpc29ucywgaS5lLiBgPT09YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdCAqIEBwYXJhbSB7Kn0gc3JjVmFsdWUgVGhlIHZhbHVlIHRvIG1hdGNoLlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzcGVjIGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWF0Y2hlc1N0cmljdENvbXBhcmFibGUoa2V5LCBzcmNWYWx1ZSkge1xuXHQgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcblx0ICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gb2JqZWN0W2tleV0gPT09IHNyY1ZhbHVlICYmXG5cdCAgICAgIChzcmNWYWx1ZSAhPT0gdW5kZWZpbmVkIHx8IChrZXkgaW4gT2JqZWN0KG9iamVjdCkpKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlO1xuXG5cbi8qKiovIH0sXG4vKiAzNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xuXHR2YXIgZnVuY1RvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGBmdW5jYCB0byBpdHMgc291cmNlIGNvZGUuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHNvdXJjZSBjb2RlLlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9Tb3VyY2UoZnVuYykge1xuXHQgIGlmIChmdW5jICE9IG51bGwpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJldHVybiBmdW5jVG9TdHJpbmcuY2FsbChmdW5jKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgICB0cnkge1xuXHQgICAgICByZXR1cm4gKGZ1bmMgKyAnJyk7XG5cdCAgICB9IGNhdGNoIChlKSB7fVxuXHQgIH1cblx0ICByZXR1cm4gJyc7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gdG9Tb3VyY2U7XG5cblxuLyoqKi8gfSxcbi8qIDM2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZURlbGF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NSksXG5cdCAgICByZXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTgpO1xuXHRcblx0LyoqXG5cdCAqIERlZmVycyBpbnZva2luZyB0aGUgYGZ1bmNgIHVudGlsIHRoZSBjdXJyZW50IGNhbGwgc3RhY2sgaGFzIGNsZWFyZWQuIEFueVxuXHQgKiBhZGRpdGlvbmFsIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgdG8gYGZ1bmNgIHdoZW4gaXQncyBpbnZva2VkLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVmZXIuXG5cdCAqIEBwYXJhbSB7Li4uKn0gW2FyZ3NdIFRoZSBhcmd1bWVudHMgdG8gaW52b2tlIGBmdW5jYCB3aXRoLlxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lciBpZC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5kZWZlcihmdW5jdGlvbih0ZXh0KSB7XG5cdCAqICAgY29uc29sZS5sb2codGV4dCk7XG5cdCAqIH0sICdkZWZlcnJlZCcpO1xuXHQgKiAvLyA9PiBMb2dzICdkZWZlcnJlZCcgYWZ0ZXIgb25lIG9yIG1vcmUgbWlsbGlzZWNvbmRzLlxuXHQgKi9cblx0dmFyIGRlZmVyID0gcmVzdChmdW5jdGlvbihmdW5jLCBhcmdzKSB7XG5cdCAgcmV0dXJuIGJhc2VEZWxheShmdW5jLCAxLCBhcmdzKTtcblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGRlZmVyO1xuXG5cbi8qKiovIH0sXG4vKiAzNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzQXJyYXlMaWtlT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTMpO1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcblx0ICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG5cdCAqIG9mIHZhbHVlcy5cblx0ICovXG5cdHZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXHRcblx0LyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG5cdHZhciBwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IG9iamVjdFByb3RvLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxpa2VseSBhbiBgYXJndW1lbnRzYCBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc0FyZ3VtZW50cyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzQXJndW1lbnRzKFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0FyZ3VtZW50cyh2YWx1ZSkge1xuXHQgIC8vIFNhZmFyaSA4LjEgaW5jb3JyZWN0bHkgbWFrZXMgYGFyZ3VtZW50cy5jYWxsZWVgIGVudW1lcmFibGUgaW4gc3RyaWN0IG1vZGUuXG5cdCAgcmV0dXJuIGlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKSAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCAnY2FsbGVlJykgJiZcblx0ICAgICghcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpIHx8IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IGFyZ3NUYWcpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzQXJndW1lbnRzO1xuXG5cbi8qKiovIH0sXG4vKiAzOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldExlbmd0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEyKSxcblx0ICAgIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KSxcblx0ICAgIGlzTGVuZ3RoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZS4gQSB2YWx1ZSBpcyBjb25zaWRlcmVkIGFycmF5LWxpa2UgaWYgaXQnc1xuXHQgKiBub3QgYSBmdW5jdGlvbiBhbmQgaGFzIGEgYHZhbHVlLmxlbmd0aGAgdGhhdCdzIGFuIGludGVnZXIgZ3JlYXRlciB0aGFuIG9yXG5cdCAqIGVxdWFsIHRvIGAwYCBhbmQgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUmAuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNBcnJheUxpa2UoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXlMaWtlKGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNBcnJheUxpa2UoJ2FiYycpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNBcnJheUxpa2UoXy5ub29wKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgaXNMZW5ndGgoZ2V0TGVuZ3RoKHZhbHVlKSkgJiYgIWlzRnVuY3Rpb24odmFsdWUpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzQXJyYXlMaWtlO1xuXG5cbi8qKiovIH0sXG4vKiAzOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuXHQgICAgaXNPYmplY3RMaWtlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcblx0ICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG5cdCAqIG9mIHZhbHVlcy5cblx0ICovXG5cdHZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3RyaW5nYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsXG5cdCAqICBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNTdHJpbmcoJ2FiYycpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNTdHJpbmcoMSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge1xuXHQgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgfHxcblx0ICAgICghaXNBcnJheSh2YWx1ZSkgJiYgaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzdHJpbmdUYWcpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzU3RyaW5nO1xuXG5cbi8qKiovIH0sXG4vKiA0MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VIYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KSxcblx0ICAgIGJhc2VLZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDIpLFxuXHQgICAgaW5kZXhLZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjMpLFxuXHQgICAgaXNBcnJheUxpa2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KSxcblx0ICAgIGlzSW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKSxcblx0ICAgIGlzUHJvdG90eXBlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjYpO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogTm9uLW9iamVjdCB2YWx1ZXMgYXJlIGNvZXJjZWQgdG8gb2JqZWN0cy4gU2VlIHRoZVxuXHQgKiBbRVMgc3BlY10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LmtleXMpXG5cdCAqIGZvciBtb3JlIGRldGFpbHMuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBPYmplY3Rcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBmdW5jdGlvbiBGb28oKSB7XG5cdCAqICAgdGhpcy5hID0gMTtcblx0ICogICB0aGlzLmIgPSAyO1xuXHQgKiB9XG5cdCAqXG5cdCAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG5cdCAqXG5cdCAqIF8ua2V5cyhuZXcgRm9vKTtcblx0ICogLy8gPT4gWydhJywgJ2InXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuXHQgKlxuXHQgKiBfLmtleXMoJ2hpJyk7XG5cdCAqIC8vID0+IFsnMCcsICcxJ11cblx0ICovXG5cdGZ1bmN0aW9uIGtleXMob2JqZWN0KSB7XG5cdCAgdmFyIGlzUHJvdG8gPSBpc1Byb3RvdHlwZShvYmplY3QpO1xuXHQgIGlmICghKGlzUHJvdG8gfHwgaXNBcnJheUxpa2Uob2JqZWN0KSkpIHtcblx0ICAgIHJldHVybiBiYXNlS2V5cyhvYmplY3QpO1xuXHQgIH1cblx0ICB2YXIgaW5kZXhlcyA9IGluZGV4S2V5cyhvYmplY3QpLFxuXHQgICAgICBza2lwSW5kZXhlcyA9ICEhaW5kZXhlcyxcblx0ICAgICAgcmVzdWx0ID0gaW5kZXhlcyB8fCBbXSxcblx0ICAgICAgbGVuZ3RoID0gcmVzdWx0Lmxlbmd0aDtcblx0XG5cdCAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuXHQgICAgaWYgKGJhc2VIYXMob2JqZWN0LCBrZXkpICYmXG5cdCAgICAgICAgIShza2lwSW5kZXhlcyAmJiAoa2V5ID09ICdsZW5ndGgnIHx8IGlzSW5kZXgoa2V5LCBsZW5ndGgpKSkgJiZcblx0ICAgICAgICAhKGlzUHJvdG8gJiYga2V5ID09ICdjb25zdHJ1Y3RvcicpKSB7XG5cdCAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0ga2V5cztcblxuXG4vKioqLyB9LFxuLyogNDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciB0b0Zpbml0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTU5KTtcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGFuIGludGVnZXIuXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uXG5cdCAqIFtgVG9JbnRlZ2VyYF0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXRvaW50ZWdlcikuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBpbnRlZ2VyLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLnRvSW50ZWdlcigzLjIpO1xuXHQgKiAvLyA9PiAzXG5cdCAqXG5cdCAqIF8udG9JbnRlZ2VyKE51bWJlci5NSU5fVkFMVUUpO1xuXHQgKiAvLyA9PiAwXG5cdCAqXG5cdCAqIF8udG9JbnRlZ2VyKEluZmluaXR5KTtcblx0ICogLy8gPT4gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDhcblx0ICpcblx0ICogXy50b0ludGVnZXIoJzMuMicpO1xuXHQgKiAvLyA9PiAzXG5cdCAqL1xuXHRmdW5jdGlvbiB0b0ludGVnZXIodmFsdWUpIHtcblx0ICB2YXIgcmVzdWx0ID0gdG9GaW5pdGUodmFsdWUpLFxuXHQgICAgICByZW1haW5kZXIgPSByZXN1bHQgJSAxO1xuXHRcblx0ICByZXR1cm4gcmVzdWx0ID09PSByZXN1bHQgPyAocmVtYWluZGVyID8gcmVzdWx0IC0gcmVtYWluZGVyIDogcmVzdWx0KSA6IDA7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gdG9JbnRlZ2VyO1xuXG5cbi8qKiovIH0sXG4vKiA0MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KSxcblx0ICAgIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KSxcblx0ICAgIGlzU3ltYm9sID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdFxuXHQvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cblx0dmFyIE5BTiA9IDAgLyAwO1xuXHRcblx0LyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS4gKi9cblx0dmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IGJhZCBzaWduZWQgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cblx0dmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBiaW5hcnkgc3RyaW5nIHZhbHVlcy4gKi9cblx0dmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3Qgb2N0YWwgc3RyaW5nIHZhbHVlcy4gKi9cblx0dmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG5cdFxuXHQvKiogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgd2l0aG91dCBhIGRlcGVuZGVuY3kgb24gYHJvb3RgLiAqL1xuXHR2YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYHZhbHVlYCB0byBhIG51bWJlci5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKDMuMik7XG5cdCAqIC8vID0+IDMuMlxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuXHQgKiAvLyA9PiA1ZS0zMjRcblx0ICpcblx0ICogXy50b051bWJlcihJbmZpbml0eSk7XG5cdCAqIC8vID0+IEluZmluaXR5XG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoJzMuMicpO1xuXHQgKiAvLyA9PiAzLjJcblx0ICovXG5cdGZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG5cdCAgICByZXR1cm4gTkFOO1xuXHQgIH1cblx0ICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG5cdCAgICB2YXIgb3RoZXIgPSBpc0Z1bmN0aW9uKHZhbHVlLnZhbHVlT2YpID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG5cdCAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IChvdGhlciArICcnKSA6IG90aGVyO1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTtcblx0ICB9XG5cdCAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSwgJycpO1xuXHQgIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG5cdCAgcmV0dXJuIChpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkpXG5cdCAgICA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOClcblx0ICAgIDogKHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWUpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHRvTnVtYmVyO1xuXG5cbi8qKiovIH0sXG4vKiA0MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCwgcHJvY2Vzcykgey8qIVxuXHQgKiBWdWUuanMgdjEuMC4yNlxuXHQgKiAoYykgMjAxNiBFdmFuIFlvdVxuXHQgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRmdW5jdGlvbiBzZXQob2JqLCBrZXksIHZhbCkge1xuXHQgIGlmIChoYXNPd24ob2JqLCBrZXkpKSB7XG5cdCAgICBvYmpba2V5XSA9IHZhbDtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgaWYgKG9iai5faXNWdWUpIHtcblx0ICAgIHNldChvYmouX2RhdGEsIGtleSwgdmFsKTtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIG9iID0gb2JqLl9fb2JfXztcblx0ICBpZiAoIW9iKSB7XG5cdCAgICBvYmpba2V5XSA9IHZhbDtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgb2IuY29udmVydChrZXksIHZhbCk7XG5cdCAgb2IuZGVwLm5vdGlmeSgpO1xuXHQgIGlmIChvYi52bXMpIHtcblx0ICAgIHZhciBpID0gb2Iudm1zLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdmFyIHZtID0gb2Iudm1zW2ldO1xuXHQgICAgICB2bS5fcHJveHkoa2V5KTtcblx0ICAgICAgdm0uX2RpZ2VzdCgpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdmFsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGVsZXRlIGEgcHJvcGVydHkgYW5kIHRyaWdnZXIgY2hhbmdlIGlmIG5lY2Vzc2FyeS5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGVsKG9iaiwga2V5KSB7XG5cdCAgaWYgKCFoYXNPd24ob2JqLCBrZXkpKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIGRlbGV0ZSBvYmpba2V5XTtcblx0ICB2YXIgb2IgPSBvYmouX19vYl9fO1xuXHQgIGlmICghb2IpIHtcblx0ICAgIGlmIChvYmouX2lzVnVlKSB7XG5cdCAgICAgIGRlbGV0ZSBvYmouX2RhdGFba2V5XTtcblx0ICAgICAgb2JqLl9kaWdlc3QoKTtcblx0ICAgIH1cblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgb2IuZGVwLm5vdGlmeSgpO1xuXHQgIGlmIChvYi52bXMpIHtcblx0ICAgIHZhciBpID0gb2Iudm1zLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdmFyIHZtID0gb2Iudm1zW2ldO1xuXHQgICAgICB2bS5fdW5wcm94eShrZXkpO1xuXHQgICAgICB2bS5fZGlnZXN0KCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXHQvKipcblx0ICogQ2hlY2sgd2hldGhlciB0aGUgb2JqZWN0IGhhcyB0aGUgcHJvcGVydHkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGhhc093bihvYmosIGtleSkge1xuXHQgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBsaXRlcmFsIHZhbHVlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0dmFyIGxpdGVyYWxWYWx1ZVJFID0gL15cXHM/KHRydWV8ZmFsc2V8LT9bXFxkXFwuXSt8J1teJ10qJ3xcIlteXCJdKlwiKVxccz8kLztcblx0XG5cdGZ1bmN0aW9uIGlzTGl0ZXJhbChleHApIHtcblx0ICByZXR1cm4gbGl0ZXJhbFZhbHVlUkUudGVzdChleHApO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYSBzdHJpbmcgc3RhcnRzIHdpdGggJCBvciBfXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc1Jlc2VydmVkKHN0cikge1xuXHQgIHZhciBjID0gKHN0ciArICcnKS5jaGFyQ29kZUF0KDApO1xuXHQgIHJldHVybiBjID09PSAweDI0IHx8IGMgPT09IDB4NUY7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHdWFyZCB0ZXh0IG91dHB1dCwgbWFrZSBzdXJlIHVuZGVmaW5lZCBvdXRwdXRzXG5cdCAqIGVtcHR5IHN0cmluZ1xuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBfdG9TdHJpbmcodmFsdWUpIHtcblx0ICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWUudG9TdHJpbmcoKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGFuZCBjb252ZXJ0IHBvc3NpYmxlIG51bWVyaWMgc3RyaW5ncyB0byBudW1iZXJzXG5cdCAqIGJlZm9yZSBzZXR0aW5nIGJhY2sgdG8gZGF0YVxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEByZXR1cm4geyp8TnVtYmVyfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHBhcnNlZCA9IE51bWJlcih2YWx1ZSk7XG5cdCAgICByZXR1cm4gaXNOYU4ocGFyc2VkKSA/IHZhbHVlIDogcGFyc2VkO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgc3RyaW5nIGJvb2xlYW4gbGl0ZXJhbHMgaW50byByZWFsIGJvb2xlYW5zLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEByZXR1cm4geyp8Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0b0Jvb2xlYW4odmFsdWUpIHtcblx0ICByZXR1cm4gdmFsdWUgPT09ICd0cnVlJyA/IHRydWUgOiB2YWx1ZSA9PT0gJ2ZhbHNlJyA/IGZhbHNlIDogdmFsdWU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTdHJpcCBxdW90ZXMgZnJvbSBhIHN0cmluZ1xuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm4ge1N0cmluZyB8IGZhbHNlfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHN0cmlwUXVvdGVzKHN0cikge1xuXHQgIHZhciBhID0gc3RyLmNoYXJDb2RlQXQoMCk7XG5cdCAgdmFyIGIgPSBzdHIuY2hhckNvZGVBdChzdHIubGVuZ3RoIC0gMSk7XG5cdCAgcmV0dXJuIGEgPT09IGIgJiYgKGEgPT09IDB4MjIgfHwgYSA9PT0gMHgyNykgPyBzdHIuc2xpY2UoMSwgLTEpIDogc3RyO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2FtZWxpemUgYSBoeXBoZW4tZGVsbWl0ZWQgc3RyaW5nLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHR2YXIgY2FtZWxpemVSRSA9IC8tKFxcdykvZztcblx0XG5cdGZ1bmN0aW9uIGNhbWVsaXplKHN0cikge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZShjYW1lbGl6ZVJFLCB0b1VwcGVyKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdG9VcHBlcihfLCBjKSB7XG5cdCAgcmV0dXJuIGMgPyBjLnRvVXBwZXJDYXNlKCkgOiAnJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEh5cGhlbmF0ZSBhIGNhbWVsQ2FzZSBzdHJpbmcuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdHZhciBoeXBoZW5hdGVSRSA9IC8oW2EtelxcZF0pKFtBLVpdKS9nO1xuXHRcblx0ZnVuY3Rpb24gaHlwaGVuYXRlKHN0cikge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZShoeXBoZW5hdGVSRSwgJyQxLSQyJykudG9Mb3dlckNhc2UoKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGh5cGhlbi91bmRlcnNjb3JlL3NsYXNoIGRlbGltaXRlcmVkIG5hbWVzIGludG9cblx0ICogY2FtZWxpemVkIGNsYXNzTmFtZXMuXG5cdCAqXG5cdCAqIGUuZy4gbXktY29tcG9uZW50ID0+IE15Q29tcG9uZW50XG5cdCAqICAgICAgc29tZV9lbHNlICAgID0+IFNvbWVFbHNlXG5cdCAqICAgICAgc29tZS9jb21wICAgID0+IFNvbWVDb21wXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdHZhciBjbGFzc2lmeVJFID0gLyg/Ol58Wy1fXFwvXSkoXFx3KS9nO1xuXHRcblx0ZnVuY3Rpb24gY2xhc3NpZnkoc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKGNsYXNzaWZ5UkUsIHRvVXBwZXIpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU2ltcGxlIGJpbmQsIGZhc3RlciB0aGFuIG5hdGl2ZVxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgKiBAcGFyYW0ge09iamVjdH0gY3R4XG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGJpbmQoZm4sIGN0eCkge1xuXHQgIHJldHVybiBmdW5jdGlvbiAoYSkge1xuXHQgICAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoO1xuXHQgICAgcmV0dXJuIGwgPyBsID4gMSA/IGZuLmFwcGx5KGN0eCwgYXJndW1lbnRzKSA6IGZuLmNhbGwoY3R4LCBhKSA6IGZuLmNhbGwoY3R4KTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBhbiBBcnJheS1saWtlIG9iamVjdCB0byBhIHJlYWwgQXJyYXkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXktbGlrZX0gbGlzdFxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3N0YXJ0XSAtIHN0YXJ0IGluZGV4XG5cdCAqIEByZXR1cm4ge0FycmF5fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRvQXJyYXkobGlzdCwgc3RhcnQpIHtcblx0ICBzdGFydCA9IHN0YXJ0IHx8IDA7XG5cdCAgdmFyIGkgPSBsaXN0Lmxlbmd0aCAtIHN0YXJ0O1xuXHQgIHZhciByZXQgPSBuZXcgQXJyYXkoaSk7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgcmV0W2ldID0gbGlzdFtpICsgc3RhcnRdO1xuXHQgIH1cblx0ICByZXR1cm4gcmV0O1xuXHR9XG5cdFxuXHQvKipcblx0ICogTWl4IHByb3BlcnRpZXMgaW50byB0YXJnZXQgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdG9cblx0ICogQHBhcmFtIHtPYmplY3R9IGZyb21cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBleHRlbmQodG8sIGZyb20pIHtcblx0ICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGZyb20pO1xuXHQgIHZhciBpID0ga2V5cy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgdG9ba2V5c1tpXV0gPSBmcm9tW2tleXNbaV1dO1xuXHQgIH1cblx0ICByZXR1cm4gdG87XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBRdWljayBvYmplY3QgY2hlY2sgLSB0aGlzIGlzIHByaW1hcmlseSB1c2VkIHRvIHRlbGxcblx0ICogT2JqZWN0cyBmcm9tIHByaW1pdGl2ZSB2YWx1ZXMgd2hlbiB3ZSBrbm93IHRoZSB2YWx1ZVxuXHQgKiBpcyBhIEpTT04tY29tcGxpYW50IHR5cGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gb2JqXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFN0cmljdCBvYmplY3QgdHlwZSBjaGVjay4gT25seSByZXR1cm5zIHRydWVcblx0ICogZm9yIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cy5cblx0ICpcblx0ICogQHBhcmFtIHsqfSBvYmpcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHR2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXHR2YXIgT0JKRUNUX1NUUklORyA9ICdbb2JqZWN0IE9iamVjdF0nO1xuXHRcblx0ZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcblx0ICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSBPQkpFQ1RfU1RSSU5HO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXJyYXkgdHlwZSBjaGVjay5cblx0ICpcblx0ICogQHBhcmFtIHsqfSBvYmpcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHR2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5cdFxuXHQvKipcblx0ICogRGVmaW5lIGEgcHJvcGVydHkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFtlbnVtZXJhYmxlXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGRlZihvYmosIGtleSwgdmFsLCBlbnVtZXJhYmxlKSB7XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG5cdCAgICB2YWx1ZTogdmFsLFxuXHQgICAgZW51bWVyYWJsZTogISFlbnVtZXJhYmxlLFxuXHQgICAgd3JpdGFibGU6IHRydWUsXG5cdCAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIERlYm91bmNlIGEgZnVuY3Rpb24gc28gaXQgb25seSBnZXRzIGNhbGxlZCBhZnRlciB0aGVcblx0ICogaW5wdXQgc3RvcHMgYXJyaXZpbmcgYWZ0ZXIgdGhlIGdpdmVuIHdhaXQgcGVyaW9kLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB3YWl0XG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSAtIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBfZGVib3VuY2UoZnVuYywgd2FpdCkge1xuXHQgIHZhciB0aW1lb3V0LCBhcmdzLCBjb250ZXh0LCB0aW1lc3RhbXAsIHJlc3VsdDtcblx0ICB2YXIgbGF0ZXIgPSBmdW5jdGlvbiBsYXRlcigpIHtcblx0ICAgIHZhciBsYXN0ID0gRGF0ZS5ub3coKSAtIHRpbWVzdGFtcDtcblx0ICAgIGlmIChsYXN0IDwgd2FpdCAmJiBsYXN0ID49IDApIHtcblx0ICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRpbWVvdXQgPSBudWxsO1xuXHQgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHQgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcblx0ICAgIH1cblx0ICB9O1xuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICBjb250ZXh0ID0gdGhpcztcblx0ICAgIGFyZ3MgPSBhcmd1bWVudHM7XG5cdCAgICB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuXHQgICAgaWYgKCF0aW1lb3V0KSB7XG5cdCAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIE1hbnVhbCBpbmRleE9mIGJlY2F1c2UgaXQncyBzbGlnaHRseSBmYXN0ZXIgdGhhblxuXHQgKiBuYXRpdmUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFyclxuXHQgKiBAcGFyYW0geyp9IG9ialxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGluZGV4T2YoYXJyLCBvYmopIHtcblx0ICB2YXIgaSA9IGFyci5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgaWYgKGFycltpXSA9PT0gb2JqKSByZXR1cm4gaTtcblx0ICB9XG5cdCAgcmV0dXJuIC0xO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTWFrZSBhIGNhbmNlbGxhYmxlIHZlcnNpb24gb2YgYW4gYXN5bmMgY2FsbGJhY2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNhbmNlbGxhYmxlKGZuKSB7XG5cdCAgdmFyIGNiID0gZnVuY3Rpb24gY2IoKSB7XG5cdCAgICBpZiAoIWNiLmNhbmNlbGxlZCkge1xuXHQgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0ICB9O1xuXHQgIGNiLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGNiLmNhbmNlbGxlZCA9IHRydWU7XG5cdCAgfTtcblx0ICByZXR1cm4gY2I7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiB0d28gdmFsdWVzIGFyZSBsb29zZWx5IGVxdWFsIC0gdGhhdCBpcyxcblx0ICogaWYgdGhleSBhcmUgcGxhaW4gb2JqZWN0cywgZG8gdGhleSBoYXZlIHRoZSBzYW1lIHNoYXBlP1xuXHQgKlxuXHQgKiBAcGFyYW0geyp9IGFcblx0ICogQHBhcmFtIHsqfSBiXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbG9vc2VFcXVhbChhLCBiKSB7XG5cdCAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG5cdCAgcmV0dXJuIGEgPT0gYiB8fCAoaXNPYmplY3QoYSkgJiYgaXNPYmplY3QoYikgPyBKU09OLnN0cmluZ2lmeShhKSA9PT0gSlNPTi5zdHJpbmdpZnkoYikgOiBmYWxzZSk7XG5cdCAgLyogZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cblx0fVxuXHRcblx0dmFyIGhhc1Byb3RvID0gKCdfX3Byb3RvX18nIGluIHt9KTtcblx0XG5cdC8vIEJyb3dzZXIgZW52aXJvbm1lbnQgc25pZmZpbmdcblx0dmFyIGluQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh3aW5kb3cpICE9PSAnW29iamVjdCBPYmplY3RdJztcblx0XG5cdC8vIGRldGVjdCBkZXZ0b29sc1xuXHR2YXIgZGV2dG9vbHMgPSBpbkJyb3dzZXIgJiYgd2luZG93Ll9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX187XG5cdFxuXHQvLyBVQSBzbmlmZmluZyBmb3Igd29ya2luZyBhcm91bmQgYnJvd3Nlci1zcGVjaWZpYyBxdWlya3Ncblx0dmFyIFVBID0gaW5Ccm93c2VyICYmIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG5cdHZhciBpc0lFID0gVUEgJiYgVUEuaW5kZXhPZigndHJpZGVudCcpID4gMDtcblx0dmFyIGlzSUU5ID0gVUEgJiYgVUEuaW5kZXhPZignbXNpZSA5LjAnKSA+IDA7XG5cdHZhciBpc0FuZHJvaWQgPSBVQSAmJiBVQS5pbmRleE9mKCdhbmRyb2lkJykgPiAwO1xuXHR2YXIgaXNJb3MgPSBVQSAmJiAvKGlwaG9uZXxpcGFkfGlwb2R8aW9zKS9pLnRlc3QoVUEpO1xuXHR2YXIgaW9zVmVyc2lvbk1hdGNoID0gaXNJb3MgJiYgVUEubWF0Y2goL29zIChbXFxkX10rKS8pO1xuXHR2YXIgaW9zVmVyc2lvbiA9IGlvc1ZlcnNpb25NYXRjaCAmJiBpb3NWZXJzaW9uTWF0Y2hbMV0uc3BsaXQoJ18nKTtcblx0XG5cdC8vIGRldGVjdGluZyBpT1MgVUlXZWJWaWV3IGJ5IGluZGV4ZWREQlxuXHR2YXIgaGFzTXV0YXRpb25PYnNlcnZlckJ1ZyA9IGlvc1ZlcnNpb24gJiYgTnVtYmVyKGlvc1ZlcnNpb25bMF0pID49IDkgJiYgTnVtYmVyKGlvc1ZlcnNpb25bMV0pID49IDMgJiYgIXdpbmRvdy5pbmRleGVkREI7XG5cdFxuXHR2YXIgdHJhbnNpdGlvblByb3AgPSB1bmRlZmluZWQ7XG5cdHZhciB0cmFuc2l0aW9uRW5kRXZlbnQgPSB1bmRlZmluZWQ7XG5cdHZhciBhbmltYXRpb25Qcm9wID0gdW5kZWZpbmVkO1xuXHR2YXIgYW5pbWF0aW9uRW5kRXZlbnQgPSB1bmRlZmluZWQ7XG5cdFxuXHQvLyBUcmFuc2l0aW9uIHByb3BlcnR5L2V2ZW50IHNuaWZmaW5nXG5cdGlmIChpbkJyb3dzZXIgJiYgIWlzSUU5KSB7XG5cdCAgdmFyIGlzV2Via2l0VHJhbnMgPSB3aW5kb3cub250cmFuc2l0aW9uZW5kID09PSB1bmRlZmluZWQgJiYgd2luZG93Lm9ud2Via2l0dHJhbnNpdGlvbmVuZCAhPT0gdW5kZWZpbmVkO1xuXHQgIHZhciBpc1dlYmtpdEFuaW0gPSB3aW5kb3cub25hbmltYXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQgIT09IHVuZGVmaW5lZDtcblx0ICB0cmFuc2l0aW9uUHJvcCA9IGlzV2Via2l0VHJhbnMgPyAnV2Via2l0VHJhbnNpdGlvbicgOiAndHJhbnNpdGlvbic7XG5cdCAgdHJhbnNpdGlvbkVuZEV2ZW50ID0gaXNXZWJraXRUcmFucyA/ICd3ZWJraXRUcmFuc2l0aW9uRW5kJyA6ICd0cmFuc2l0aW9uZW5kJztcblx0ICBhbmltYXRpb25Qcm9wID0gaXNXZWJraXRBbmltID8gJ1dlYmtpdEFuaW1hdGlvbicgOiAnYW5pbWF0aW9uJztcblx0ICBhbmltYXRpb25FbmRFdmVudCA9IGlzV2Via2l0QW5pbSA/ICd3ZWJraXRBbmltYXRpb25FbmQnIDogJ2FuaW1hdGlvbmVuZCc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZWZlciBhIHRhc2sgdG8gZXhlY3V0ZSBpdCBhc3luY2hyb25vdXNseS4gSWRlYWxseSB0aGlzXG5cdCAqIHNob3VsZCBiZSBleGVjdXRlZCBhcyBhIG1pY3JvdGFzaywgc28gd2UgbGV2ZXJhZ2Vcblx0ICogTXV0YXRpb25PYnNlcnZlciBpZiBpdCdzIGF2YWlsYWJsZSwgYW5kIGZhbGxiYWNrIHRvXG5cdCAqIHNldFRpbWVvdXQoMCkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjdHhcblx0ICovXG5cdFxuXHR2YXIgbmV4dFRpY2sgPSAoZnVuY3Rpb24gKCkge1xuXHQgIHZhciBjYWxsYmFja3MgPSBbXTtcblx0ICB2YXIgcGVuZGluZyA9IGZhbHNlO1xuXHQgIHZhciB0aW1lckZ1bmM7XG5cdCAgZnVuY3Rpb24gbmV4dFRpY2tIYW5kbGVyKCkge1xuXHQgICAgcGVuZGluZyA9IGZhbHNlO1xuXHQgICAgdmFyIGNvcGllcyA9IGNhbGxiYWNrcy5zbGljZSgwKTtcblx0ICAgIGNhbGxiYWNrcyA9IFtdO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3BpZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgY29waWVzW2ldKCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnICYmICFoYXNNdXRhdGlvbk9ic2VydmVyQnVnKSB7XG5cdCAgICB2YXIgY291bnRlciA9IDE7XG5cdCAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihuZXh0VGlja0hhbmRsZXIpO1xuXHQgICAgdmFyIHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY291bnRlcik7XG5cdCAgICBvYnNlcnZlci5vYnNlcnZlKHRleHROb2RlLCB7XG5cdCAgICAgIGNoYXJhY3RlckRhdGE6IHRydWVcblx0ICAgIH0pO1xuXHQgICAgdGltZXJGdW5jID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBjb3VudGVyID0gKGNvdW50ZXIgKyAxKSAlIDI7XG5cdCAgICAgIHRleHROb2RlLmRhdGEgPSBjb3VudGVyO1xuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gd2VicGFjayBhdHRlbXB0cyB0byBpbmplY3QgYSBzaGltIGZvciBzZXRJbW1lZGlhdGVcblx0ICAgIC8vIGlmIGl0IGlzIHVzZWQgYXMgYSBnbG9iYWwsIHNvIHdlIGhhdmUgdG8gd29yayBhcm91bmQgdGhhdCB0b1xuXHQgICAgLy8gYXZvaWQgYnVuZGxpbmcgdW5uZWNlc3NhcnkgY29kZS5cblx0ICAgIHZhciBjb250ZXh0ID0gaW5Ccm93c2VyID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB7fTtcblx0ICAgIHRpbWVyRnVuYyA9IGNvbnRleHQuc2V0SW1tZWRpYXRlIHx8IHNldFRpbWVvdXQ7XG5cdCAgfVxuXHQgIHJldHVybiBmdW5jdGlvbiAoY2IsIGN0eCkge1xuXHQgICAgdmFyIGZ1bmMgPSBjdHggPyBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGNiLmNhbGwoY3R4KTtcblx0ICAgIH0gOiBjYjtcblx0ICAgIGNhbGxiYWNrcy5wdXNoKGZ1bmMpO1xuXHQgICAgaWYgKHBlbmRpbmcpIHJldHVybjtcblx0ICAgIHBlbmRpbmcgPSB0cnVlO1xuXHQgICAgdGltZXJGdW5jKG5leHRUaWNrSGFuZGxlciwgMCk7XG5cdCAgfTtcblx0fSkoKTtcblx0XG5cdHZhciBfU2V0ID0gdW5kZWZpbmVkO1xuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0aWYgKHR5cGVvZiBTZXQgIT09ICd1bmRlZmluZWQnICYmIFNldC50b1N0cmluZygpLm1hdGNoKC9uYXRpdmUgY29kZS8pKSB7XG5cdCAgLy8gdXNlIG5hdGl2ZSBTZXQgd2hlbiBhdmFpbGFibGUuXG5cdCAgX1NldCA9IFNldDtcblx0fSBlbHNlIHtcblx0ICAvLyBhIG5vbi1zdGFuZGFyZCBTZXQgcG9seWZpbGwgdGhhdCBvbmx5IHdvcmtzIHdpdGggcHJpbWl0aXZlIGtleXMuXG5cdCAgX1NldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuc2V0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB9O1xuXHQgIF9TZXQucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIHJldHVybiB0aGlzLnNldFtrZXldICE9PSB1bmRlZmluZWQ7XG5cdCAgfTtcblx0ICBfU2V0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICB0aGlzLnNldFtrZXldID0gMTtcblx0ICB9O1xuXHQgIF9TZXQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5zZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIENhY2hlKGxpbWl0KSB7XG5cdCAgdGhpcy5zaXplID0gMDtcblx0ICB0aGlzLmxpbWl0ID0gbGltaXQ7XG5cdCAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gdW5kZWZpbmVkO1xuXHQgIHRoaXMuX2tleW1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdH1cblx0XG5cdHZhciBwID0gQ2FjaGUucHJvdG90eXBlO1xuXHRcblx0LyoqXG5cdCAqIFB1dCA8dmFsdWU+IGludG8gdGhlIGNhY2hlIGFzc29jaWF0ZWQgd2l0aCA8a2V5Pi5cblx0ICogUmV0dXJucyB0aGUgZW50cnkgd2hpY2ggd2FzIHJlbW92ZWQgdG8gbWFrZSByb29tIGZvclxuXHQgKiB0aGUgbmV3IGVudHJ5LiBPdGhlcndpc2UgdW5kZWZpbmVkIGlzIHJldHVybmVkLlxuXHQgKiAoaS5lLiBpZiB0aGVyZSB3YXMgZW5vdWdoIHJvb20gYWxyZWFkeSkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHtFbnRyeXx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0cC5wdXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHQgIHZhciByZW1vdmVkO1xuXHRcblx0ICB2YXIgZW50cnkgPSB0aGlzLmdldChrZXksIHRydWUpO1xuXHQgIGlmICghZW50cnkpIHtcblx0ICAgIGlmICh0aGlzLnNpemUgPT09IHRoaXMubGltaXQpIHtcblx0ICAgICAgcmVtb3ZlZCA9IHRoaXMuc2hpZnQoKTtcblx0ICAgIH1cblx0ICAgIGVudHJ5ID0ge1xuXHQgICAgICBrZXk6IGtleVxuXHQgICAgfTtcblx0ICAgIHRoaXMuX2tleW1hcFtrZXldID0gZW50cnk7XG5cdCAgICBpZiAodGhpcy50YWlsKSB7XG5cdCAgICAgIHRoaXMudGFpbC5uZXdlciA9IGVudHJ5O1xuXHQgICAgICBlbnRyeS5vbGRlciA9IHRoaXMudGFpbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuaGVhZCA9IGVudHJ5O1xuXHQgICAgfVxuXHQgICAgdGhpcy50YWlsID0gZW50cnk7XG5cdCAgICB0aGlzLnNpemUrKztcblx0ICB9XG5cdCAgZW50cnkudmFsdWUgPSB2YWx1ZTtcblx0XG5cdCAgcmV0dXJuIHJlbW92ZWQ7XG5cdH07XG5cdFxuXHQvKipcblx0ICogUHVyZ2UgdGhlIGxlYXN0IHJlY2VudGx5IHVzZWQgKG9sZGVzdCkgZW50cnkgZnJvbSB0aGVcblx0ICogY2FjaGUuIFJldHVybnMgdGhlIHJlbW92ZWQgZW50cnkgb3IgdW5kZWZpbmVkIGlmIHRoZVxuXHQgKiBjYWNoZSB3YXMgZW1wdHkuXG5cdCAqL1xuXHRcblx0cC5zaGlmdCA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgZW50cnkgPSB0aGlzLmhlYWQ7XG5cdCAgaWYgKGVudHJ5KSB7XG5cdCAgICB0aGlzLmhlYWQgPSB0aGlzLmhlYWQubmV3ZXI7XG5cdCAgICB0aGlzLmhlYWQub2xkZXIgPSB1bmRlZmluZWQ7XG5cdCAgICBlbnRyeS5uZXdlciA9IGVudHJ5Lm9sZGVyID0gdW5kZWZpbmVkO1xuXHQgICAgdGhpcy5fa2V5bWFwW2VudHJ5LmtleV0gPSB1bmRlZmluZWQ7XG5cdCAgICB0aGlzLnNpemUtLTtcblx0ICB9XG5cdCAgcmV0dXJuIGVudHJ5O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEdldCBhbmQgcmVnaXN0ZXIgcmVjZW50IHVzZSBvZiA8a2V5Pi4gUmV0dXJucyB0aGUgdmFsdWVcblx0ICogYXNzb2NpYXRlZCB3aXRoIDxrZXk+IG9yIHVuZGVmaW5lZCBpZiBub3QgaW4gY2FjaGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHtCb29sZWFufSByZXR1cm5FbnRyeVxuXHQgKiBAcmV0dXJuIHtFbnRyeXwqfVxuXHQgKi9cblx0XG5cdHAuZ2V0ID0gZnVuY3Rpb24gKGtleSwgcmV0dXJuRW50cnkpIHtcblx0ICB2YXIgZW50cnkgPSB0aGlzLl9rZXltYXBba2V5XTtcblx0ICBpZiAoZW50cnkgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXHQgIGlmIChlbnRyeSA9PT0gdGhpcy50YWlsKSB7XG5cdCAgICByZXR1cm4gcmV0dXJuRW50cnkgPyBlbnRyeSA6IGVudHJ5LnZhbHVlO1xuXHQgIH1cblx0ICAvLyBIRUFELS0tLS0tLS0tLS0tLS1UQUlMXG5cdCAgLy8gICA8Lm9sZGVyICAgLm5ld2VyPlxuXHQgIC8vICA8LS0tIGFkZCBkaXJlY3Rpb24gLS1cblx0ICAvLyAgIEEgIEIgIEMgIDxEPiAgRVxuXHQgIGlmIChlbnRyeS5uZXdlcikge1xuXHQgICAgaWYgKGVudHJ5ID09PSB0aGlzLmhlYWQpIHtcblx0ICAgICAgdGhpcy5oZWFkID0gZW50cnkubmV3ZXI7XG5cdCAgICB9XG5cdCAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyOyAvLyBDIDwtLSBFLlxuXHQgIH1cblx0ICBpZiAoZW50cnkub2xkZXIpIHtcblx0ICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gZW50cnkubmV3ZXI7IC8vIEMuIC0tPiBFXG5cdCAgfVxuXHQgIGVudHJ5Lm5ld2VyID0gdW5kZWZpbmVkOyAvLyBEIC0teFxuXHQgIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsOyAvLyBELiAtLT4gRVxuXHQgIGlmICh0aGlzLnRhaWwpIHtcblx0ICAgIHRoaXMudGFpbC5uZXdlciA9IGVudHJ5OyAvLyBFLiA8LS0gRFxuXHQgIH1cblx0ICB0aGlzLnRhaWwgPSBlbnRyeTtcblx0ICByZXR1cm4gcmV0dXJuRW50cnkgPyBlbnRyeSA6IGVudHJ5LnZhbHVlO1xuXHR9O1xuXHRcblx0dmFyIGNhY2hlJDEgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cdHZhciBmaWx0ZXJUb2tlblJFID0gL1teXFxzJ1wiXSt8J1teJ10qJ3xcIlteXCJdKlwiL2c7XG5cdHZhciByZXNlcnZlZEFyZ1JFID0gL15pbiR8Xi0/XFxkKy87XG5cdFxuXHQvKipcblx0ICogUGFyc2VyIHN0YXRlXG5cdCAqL1xuXHRcblx0dmFyIHN0cjtcblx0dmFyIGRpcjtcblx0dmFyIGM7XG5cdHZhciBwcmV2O1xuXHR2YXIgaTtcblx0dmFyIGw7XG5cdHZhciBsYXN0RmlsdGVySW5kZXg7XG5cdHZhciBpblNpbmdsZTtcblx0dmFyIGluRG91YmxlO1xuXHR2YXIgY3VybHk7XG5cdHZhciBzcXVhcmU7XG5cdHZhciBwYXJlbjtcblx0LyoqXG5cdCAqIFB1c2ggYSBmaWx0ZXIgdG8gdGhlIGN1cnJlbnQgZGlyZWN0aXZlIG9iamVjdFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHB1c2hGaWx0ZXIoKSB7XG5cdCAgdmFyIGV4cCA9IHN0ci5zbGljZShsYXN0RmlsdGVySW5kZXgsIGkpLnRyaW0oKTtcblx0ICB2YXIgZmlsdGVyO1xuXHQgIGlmIChleHApIHtcblx0ICAgIGZpbHRlciA9IHt9O1xuXHQgICAgdmFyIHRva2VucyA9IGV4cC5tYXRjaChmaWx0ZXJUb2tlblJFKTtcblx0ICAgIGZpbHRlci5uYW1lID0gdG9rZW5zWzBdO1xuXHQgICAgaWYgKHRva2Vucy5sZW5ndGggPiAxKSB7XG5cdCAgICAgIGZpbHRlci5hcmdzID0gdG9rZW5zLnNsaWNlKDEpLm1hcChwcm9jZXNzRmlsdGVyQXJnKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKGZpbHRlcikge1xuXHQgICAgKGRpci5maWx0ZXJzID0gZGlyLmZpbHRlcnMgfHwgW10pLnB1c2goZmlsdGVyKTtcblx0ICB9XG5cdCAgbGFzdEZpbHRlckluZGV4ID0gaSArIDE7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBhcmd1bWVudCBpcyBkeW5hbWljIGFuZCBzdHJpcCBxdW90ZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBhcmdcblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NGaWx0ZXJBcmcoYXJnKSB7XG5cdCAgaWYgKHJlc2VydmVkQXJnUkUudGVzdChhcmcpKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICB2YWx1ZTogdG9OdW1iZXIoYXJnKSxcblx0ICAgICAgZHluYW1pYzogZmFsc2Vcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBzdHJpcHBlZCA9IHN0cmlwUXVvdGVzKGFyZyk7XG5cdCAgICB2YXIgZHluYW1pYyA9IHN0cmlwcGVkID09PSBhcmc7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICB2YWx1ZTogZHluYW1pYyA/IGFyZyA6IHN0cmlwcGVkLFxuXHQgICAgICBkeW5hbWljOiBkeW5hbWljXG5cdCAgICB9O1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhcnNlIGEgZGlyZWN0aXZlIHZhbHVlIGFuZCBleHRyYWN0IHRoZSBleHByZXNzaW9uXG5cdCAqIGFuZCBpdHMgZmlsdGVycyBpbnRvIGEgZGVzY3JpcHRvci5cblx0ICpcblx0ICogRXhhbXBsZTpcblx0ICpcblx0ICogXCJhICsgMSB8IHVwcGVyY2FzZVwiIHdpbGwgeWllbGQ6XG5cdCAqIHtcblx0ICogICBleHByZXNzaW9uOiAnYSArIDEnLFxuXHQgKiAgIGZpbHRlcnM6IFtcblx0ICogICAgIHsgbmFtZTogJ3VwcGVyY2FzZScsIGFyZ3M6IG51bGwgfVxuXHQgKiAgIF1cblx0ICogfVxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc1xuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VEaXJlY3RpdmUocykge1xuXHQgIHZhciBoaXQgPSBjYWNoZSQxLmdldChzKTtcblx0ICBpZiAoaGl0KSB7XG5cdCAgICByZXR1cm4gaGl0O1xuXHQgIH1cblx0XG5cdCAgLy8gcmVzZXQgcGFyc2VyIHN0YXRlXG5cdCAgc3RyID0gcztcblx0ICBpblNpbmdsZSA9IGluRG91YmxlID0gZmFsc2U7XG5cdCAgY3VybHkgPSBzcXVhcmUgPSBwYXJlbiA9IDA7XG5cdCAgbGFzdEZpbHRlckluZGV4ID0gMDtcblx0ICBkaXIgPSB7fTtcblx0XG5cdCAgZm9yIChpID0gMCwgbCA9IHN0ci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHByZXYgPSBjO1xuXHQgICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuXHQgICAgaWYgKGluU2luZ2xlKSB7XG5cdCAgICAgIC8vIGNoZWNrIHNpbmdsZSBxdW90ZVxuXHQgICAgICBpZiAoYyA9PT0gMHgyNyAmJiBwcmV2ICE9PSAweDVDKSBpblNpbmdsZSA9ICFpblNpbmdsZTtcblx0ICAgIH0gZWxzZSBpZiAoaW5Eb3VibGUpIHtcblx0ICAgICAgLy8gY2hlY2sgZG91YmxlIHF1b3RlXG5cdCAgICAgIGlmIChjID09PSAweDIyICYmIHByZXYgIT09IDB4NUMpIGluRG91YmxlID0gIWluRG91YmxlO1xuXHQgICAgfSBlbHNlIGlmIChjID09PSAweDdDICYmIC8vIHBpcGVcblx0ICAgIHN0ci5jaGFyQ29kZUF0KGkgKyAxKSAhPT0gMHg3QyAmJiBzdHIuY2hhckNvZGVBdChpIC0gMSkgIT09IDB4N0MpIHtcblx0ICAgICAgaWYgKGRpci5leHByZXNzaW9uID09IG51bGwpIHtcblx0ICAgICAgICAvLyBmaXJzdCBmaWx0ZXIsIGVuZCBvZiBleHByZXNzaW9uXG5cdCAgICAgICAgbGFzdEZpbHRlckluZGV4ID0gaSArIDE7XG5cdCAgICAgICAgZGlyLmV4cHJlc3Npb24gPSBzdHIuc2xpY2UoMCwgaSkudHJpbSgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIGFscmVhZHkgaGFzIGZpbHRlclxuXHQgICAgICAgIHB1c2hGaWx0ZXIoKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc3dpdGNoIChjKSB7XG5cdCAgICAgICAgY2FzZSAweDIyOlxuXHQgICAgICAgICAgaW5Eb3VibGUgPSB0cnVlO2JyZWFrOyAvLyBcIlxuXHQgICAgICAgIGNhc2UgMHgyNzpcblx0ICAgICAgICAgIGluU2luZ2xlID0gdHJ1ZTticmVhazsgLy8gJ1xuXHQgICAgICAgIGNhc2UgMHgyODpcblx0ICAgICAgICAgIHBhcmVuKys7YnJlYWs7IC8vIChcblx0ICAgICAgICBjYXNlIDB4Mjk6XG5cdCAgICAgICAgICBwYXJlbi0tO2JyZWFrOyAvLyApXG5cdCAgICAgICAgY2FzZSAweDVCOlxuXHQgICAgICAgICAgc3F1YXJlKys7YnJlYWs7IC8vIFtcblx0ICAgICAgICBjYXNlIDB4NUQ6XG5cdCAgICAgICAgICBzcXVhcmUtLTticmVhazsgLy8gXVxuXHQgICAgICAgIGNhc2UgMHg3Qjpcblx0ICAgICAgICAgIGN1cmx5Kys7YnJlYWs7IC8vIHtcblx0ICAgICAgICBjYXNlIDB4N0Q6XG5cdCAgICAgICAgICBjdXJseS0tO2JyZWFrOyAvLyB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGlmIChkaXIuZXhwcmVzc2lvbiA9PSBudWxsKSB7XG5cdCAgICBkaXIuZXhwcmVzc2lvbiA9IHN0ci5zbGljZSgwLCBpKS50cmltKCk7XG5cdCAgfSBlbHNlIGlmIChsYXN0RmlsdGVySW5kZXggIT09IDApIHtcblx0ICAgIHB1c2hGaWx0ZXIoKTtcblx0ICB9XG5cdFxuXHQgIGNhY2hlJDEucHV0KHMsIGRpcik7XG5cdCAgcmV0dXJuIGRpcjtcblx0fVxuXHRcblx0dmFyIGRpcmVjdGl2ZSA9IE9iamVjdC5mcmVlemUoe1xuXHQgIHBhcnNlRGlyZWN0aXZlOiBwYXJzZURpcmVjdGl2ZVxuXHR9KTtcblx0XG5cdHZhciByZWdleEVzY2FwZVJFID0gL1stLiorP14ke30oKXxbXFxdXFwvXFxcXF0vZztcblx0dmFyIGNhY2hlID0gdW5kZWZpbmVkO1xuXHR2YXIgdGFnUkUgPSB1bmRlZmluZWQ7XG5cdHZhciBodG1sUkUgPSB1bmRlZmluZWQ7XG5cdC8qKlxuXHQgKiBFc2NhcGUgYSBzdHJpbmcgc28gaXQgY2FuIGJlIHVzZWQgaW4gYSBSZWdFeHBcblx0ICogY29uc3RydWN0b3IuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBlc2NhcGVSZWdleChzdHIpIHtcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UocmVnZXhFc2NhcGVSRSwgJ1xcXFwkJicpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjb21waWxlUmVnZXgoKSB7XG5cdCAgdmFyIG9wZW4gPSBlc2NhcGVSZWdleChjb25maWcuZGVsaW1pdGVyc1swXSk7XG5cdCAgdmFyIGNsb3NlID0gZXNjYXBlUmVnZXgoY29uZmlnLmRlbGltaXRlcnNbMV0pO1xuXHQgIHZhciB1bnNhZmVPcGVuID0gZXNjYXBlUmVnZXgoY29uZmlnLnVuc2FmZURlbGltaXRlcnNbMF0pO1xuXHQgIHZhciB1bnNhZmVDbG9zZSA9IGVzY2FwZVJlZ2V4KGNvbmZpZy51bnNhZmVEZWxpbWl0ZXJzWzFdKTtcblx0ICB0YWdSRSA9IG5ldyBSZWdFeHAodW5zYWZlT3BlbiArICcoKD86LnxcXFxcbikrPyknICsgdW5zYWZlQ2xvc2UgKyAnfCcgKyBvcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyBjbG9zZSwgJ2cnKTtcblx0ICBodG1sUkUgPSBuZXcgUmVnRXhwKCdeJyArIHVuc2FmZU9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIHVuc2FmZUNsb3NlICsgJyQnKTtcblx0ICAvLyByZXNldCBjYWNoZVxuXHQgIGNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2UgYSB0ZW1wbGF0ZSB0ZXh0IHN0cmluZyBpbnRvIGFuIGFycmF5IG9mIHRva2Vucy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHRcblx0ICogQHJldHVybiB7QXJyYXk8T2JqZWN0PiB8IG51bGx9XG5cdCAqICAgICAgICAgICAgICAgLSB7U3RyaW5nfSB0eXBlXG5cdCAqICAgICAgICAgICAgICAgLSB7U3RyaW5nfSB2YWx1ZVxuXHQgKiAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtodG1sXVxuXHQgKiAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtvbmVUaW1lXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlVGV4dCh0ZXh0KSB7XG5cdCAgaWYgKCFjYWNoZSkge1xuXHQgICAgY29tcGlsZVJlZ2V4KCk7XG5cdCAgfVxuXHQgIHZhciBoaXQgPSBjYWNoZS5nZXQodGV4dCk7XG5cdCAgaWYgKGhpdCkge1xuXHQgICAgcmV0dXJuIGhpdDtcblx0ICB9XG5cdCAgaWYgKCF0YWdSRS50ZXN0KHRleHQpKSB7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdCAgdmFyIHRva2VucyA9IFtdO1xuXHQgIHZhciBsYXN0SW5kZXggPSB0YWdSRS5sYXN0SW5kZXggPSAwO1xuXHQgIHZhciBtYXRjaCwgaW5kZXgsIGh0bWwsIHZhbHVlLCBmaXJzdCwgb25lVGltZTtcblx0ICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgIHdoaWxlIChtYXRjaCA9IHRhZ1JFLmV4ZWModGV4dCkpIHtcblx0ICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIGluZGV4ID0gbWF0Y2guaW5kZXg7XG5cdCAgICAvLyBwdXNoIHRleHQgdG9rZW5cblx0ICAgIGlmIChpbmRleCA+IGxhc3RJbmRleCkge1xuXHQgICAgICB0b2tlbnMucHVzaCh7XG5cdCAgICAgICAgdmFsdWU6IHRleHQuc2xpY2UobGFzdEluZGV4LCBpbmRleClcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgICAvLyB0YWcgdG9rZW5cblx0ICAgIGh0bWwgPSBodG1sUkUudGVzdChtYXRjaFswXSk7XG5cdCAgICB2YWx1ZSA9IGh0bWwgPyBtYXRjaFsxXSA6IG1hdGNoWzJdO1xuXHQgICAgZmlyc3QgPSB2YWx1ZS5jaGFyQ29kZUF0KDApO1xuXHQgICAgb25lVGltZSA9IGZpcnN0ID09PSA0MjsgLy8gKlxuXHQgICAgdmFsdWUgPSBvbmVUaW1lID8gdmFsdWUuc2xpY2UoMSkgOiB2YWx1ZTtcblx0ICAgIHRva2Vucy5wdXNoKHtcblx0ICAgICAgdGFnOiB0cnVlLFxuXHQgICAgICB2YWx1ZTogdmFsdWUudHJpbSgpLFxuXHQgICAgICBodG1sOiBodG1sLFxuXHQgICAgICBvbmVUaW1lOiBvbmVUaW1lXG5cdCAgICB9KTtcblx0ICAgIGxhc3RJbmRleCA9IGluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuXHQgIH1cblx0ICBpZiAobGFzdEluZGV4IDwgdGV4dC5sZW5ndGgpIHtcblx0ICAgIHRva2Vucy5wdXNoKHtcblx0ICAgICAgdmFsdWU6IHRleHQuc2xpY2UobGFzdEluZGV4KVxuXHQgICAgfSk7XG5cdCAgfVxuXHQgIGNhY2hlLnB1dCh0ZXh0LCB0b2tlbnMpO1xuXHQgIHJldHVybiB0b2tlbnM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JtYXQgYSBsaXN0IG9mIHRva2VucyBpbnRvIGFuIGV4cHJlc3Npb24uXG5cdCAqIGUuZy4gdG9rZW5zIHBhcnNlZCBmcm9tICdhIHt7Yn19IGMnIGNhbiBiZSBzZXJpYWxpemVkXG5cdCAqIGludG8gb25lIHNpbmdsZSBleHByZXNzaW9uIGFzICdcImEgXCIgKyBiICsgXCIgY1wiJy5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gdG9rZW5zXG5cdCAqIEBwYXJhbSB7VnVlfSBbdm1dXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0b2tlbnNUb0V4cCh0b2tlbnMsIHZtKSB7XG5cdCAgaWYgKHRva2Vucy5sZW5ndGggPiAxKSB7XG5cdCAgICByZXR1cm4gdG9rZW5zLm1hcChmdW5jdGlvbiAodG9rZW4pIHtcblx0ICAgICAgcmV0dXJuIGZvcm1hdFRva2VuKHRva2VuLCB2bSk7XG5cdCAgICB9KS5qb2luKCcrJyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBmb3JtYXRUb2tlbih0b2tlbnNbMF0sIHZtLCB0cnVlKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JtYXQgYSBzaW5nbGUgdG9rZW4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB0b2tlblxuXHQgKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFtzaW5nbGVdXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRUb2tlbih0b2tlbiwgdm0sIHNpbmdsZSkge1xuXHQgIHJldHVybiB0b2tlbi50YWcgPyB0b2tlbi5vbmVUaW1lICYmIHZtID8gJ1wiJyArIHZtLiRldmFsKHRva2VuLnZhbHVlKSArICdcIicgOiBpbmxpbmVGaWx0ZXJzKHRva2VuLnZhbHVlLCBzaW5nbGUpIDogJ1wiJyArIHRva2VuLnZhbHVlICsgJ1wiJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvciBhbiBhdHRyaWJ1dGUgd2l0aCBtdWx0aXBsZSBpbnRlcnBvbGF0aW9uIHRhZ3MsXG5cdCAqIGUuZy4gYXR0cj1cInNvbWUte3t0aGluZyB8IGZpbHRlcn19XCIsIGluIG9yZGVyIHRvIGNvbWJpbmVcblx0ICogdGhlIHdob2xlIHRoaW5nIGludG8gYSBzaW5nbGUgd2F0Y2hhYmxlIGV4cHJlc3Npb24sIHdlXG5cdCAqIGhhdmUgdG8gaW5saW5lIHRob3NlIGZpbHRlcnMuIFRoaXMgZnVuY3Rpb24gZG9lcyBleGFjdGx5XG5cdCAqIHRoYXQuIFRoaXMgaXMgYSBiaXQgaGFja3kgYnV0IGl0IGF2b2lkcyBoZWF2eSBjaGFuZ2VzXG5cdCAqIHRvIGRpcmVjdGl2ZSBwYXJzZXIgYW5kIHdhdGNoZXIgbWVjaGFuaXNtLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gc2luZ2xlXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHR2YXIgZmlsdGVyUkUgPSAvW158XVxcfFtefF0vO1xuXHRmdW5jdGlvbiBpbmxpbmVGaWx0ZXJzKGV4cCwgc2luZ2xlKSB7XG5cdCAgaWYgKCFmaWx0ZXJSRS50ZXN0KGV4cCkpIHtcblx0ICAgIHJldHVybiBzaW5nbGUgPyBleHAgOiAnKCcgKyBleHAgKyAnKSc7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBkaXIgPSBwYXJzZURpcmVjdGl2ZShleHApO1xuXHQgICAgaWYgKCFkaXIuZmlsdGVycykge1xuXHQgICAgICByZXR1cm4gJygnICsgZXhwICsgJyknO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd0aGlzLl9hcHBseUZpbHRlcnMoJyArIGRpci5leHByZXNzaW9uICsgLy8gdmFsdWVcblx0ICAgICAgJyxudWxsLCcgKyAvLyBvbGRWYWx1ZSAobnVsbCBmb3IgcmVhZClcblx0ICAgICAgSlNPTi5zdHJpbmdpZnkoZGlyLmZpbHRlcnMpICsgLy8gZmlsdGVyIGRlc2NyaXB0b3JzXG5cdCAgICAgICcsZmFsc2UpJzsgLy8gd3JpdGU/XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgdGV4dCA9IE9iamVjdC5mcmVlemUoe1xuXHQgIGNvbXBpbGVSZWdleDogY29tcGlsZVJlZ2V4LFxuXHQgIHBhcnNlVGV4dDogcGFyc2VUZXh0LFxuXHQgIHRva2Vuc1RvRXhwOiB0b2tlbnNUb0V4cFxuXHR9KTtcblx0XG5cdHZhciBkZWxpbWl0ZXJzID0gWyd7eycsICd9fSddO1xuXHR2YXIgdW5zYWZlRGVsaW1pdGVycyA9IFsne3t7JywgJ319fSddO1xuXHRcblx0dmFyIGNvbmZpZyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHtcblx0XG5cdCAgLyoqXG5cdCAgICogV2hldGhlciB0byBwcmludCBkZWJ1ZyBtZXNzYWdlcy5cblx0ICAgKiBBbHNvIGVuYWJsZXMgc3RhY2sgdHJhY2UgZm9yIHdhcm5pbmdzLlxuXHQgICAqXG5cdCAgICogQHR5cGUge0Jvb2xlYW59XG5cdCAgICovXG5cdFxuXHQgIGRlYnVnOiBmYWxzZSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hldGhlciB0byBzdXBwcmVzcyB3YXJuaW5ncy5cblx0ICAgKlxuXHQgICAqIEB0eXBlIHtCb29sZWFufVxuXHQgICAqL1xuXHRcblx0ICBzaWxlbnQ6IGZhbHNlLFxuXHRcblx0ICAvKipcblx0ICAgKiBXaGV0aGVyIHRvIHVzZSBhc3luYyByZW5kZXJpbmcuXG5cdCAgICovXG5cdFxuXHQgIGFzeW5jOiB0cnVlLFxuXHRcblx0ICAvKipcblx0ICAgKiBXaGV0aGVyIHRvIHdhcm4gYWdhaW5zdCBlcnJvcnMgY2F1Z2h0IHdoZW4gZXZhbHVhdGluZ1xuXHQgICAqIGV4cHJlc3Npb25zLlxuXHQgICAqL1xuXHRcblx0ICB3YXJuRXhwcmVzc2lvbkVycm9yczogdHJ1ZSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hldGhlciB0byBhbGxvdyBkZXZ0b29scyBpbnNwZWN0aW9uLlxuXHQgICAqIERpc2FibGVkIGJ5IGRlZmF1bHQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG5cdCAgICovXG5cdFxuXHQgIGRldnRvb2xzOiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nLFxuXHRcblx0ICAvKipcblx0ICAgKiBJbnRlcm5hbCBmbGFnIHRvIGluZGljYXRlIHRoZSBkZWxpbWl0ZXJzIGhhdmUgYmVlblxuXHQgICAqIGNoYW5nZWQuXG5cdCAgICpcblx0ICAgKiBAdHlwZSB7Qm9vbGVhbn1cblx0ICAgKi9cblx0XG5cdCAgX2RlbGltaXRlcnNDaGFuZ2VkOiB0cnVlLFxuXHRcblx0ICAvKipcblx0ICAgKiBMaXN0IG9mIGFzc2V0IHR5cGVzIHRoYXQgYSBjb21wb25lbnQgY2FuIG93bi5cblx0ICAgKlxuXHQgICAqIEB0eXBlIHtBcnJheX1cblx0ICAgKi9cblx0XG5cdCAgX2Fzc2V0VHlwZXM6IFsnY29tcG9uZW50JywgJ2RpcmVjdGl2ZScsICdlbGVtZW50RGlyZWN0aXZlJywgJ2ZpbHRlcicsICd0cmFuc2l0aW9uJywgJ3BhcnRpYWwnXSxcblx0XG5cdCAgLyoqXG5cdCAgICogcHJvcCBiaW5kaW5nIG1vZGVzXG5cdCAgICovXG5cdFxuXHQgIF9wcm9wQmluZGluZ01vZGVzOiB7XG5cdCAgICBPTkVfV0FZOiAwLFxuXHQgICAgVFdPX1dBWTogMSxcblx0ICAgIE9ORV9USU1FOiAyXG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogTWF4IGNpcmN1bGFyIHVwZGF0ZXMgYWxsb3dlZCBpbiBhIGJhdGNoZXIgZmx1c2ggY3ljbGUuXG5cdCAgICovXG5cdFxuXHQgIF9tYXhVcGRhdGVDb3VudDogMTAwXG5cdFxuXHR9LCB7XG5cdCAgZGVsaW1pdGVyczogeyAvKipcblx0ICAgICAgICAgICAgICAgICAqIEludGVycG9sYXRpb24gZGVsaW1pdGVycy4gQ2hhbmdpbmcgdGhlc2Ugd291bGQgdHJpZ2dlclxuXHQgICAgICAgICAgICAgICAgICogdGhlIHRleHQgcGFyc2VyIHRvIHJlLWNvbXBpbGUgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbnMuXG5cdCAgICAgICAgICAgICAgICAgKlxuXHQgICAgICAgICAgICAgICAgICogQHR5cGUge0FycmF5PFN0cmluZz59XG5cdCAgICAgICAgICAgICAgICAgKi9cblx0XG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgcmV0dXJuIGRlbGltaXRlcnM7XG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7XG5cdCAgICAgIGRlbGltaXRlcnMgPSB2YWw7XG5cdCAgICAgIGNvbXBpbGVSZWdleCgpO1xuXHQgICAgfSxcblx0ICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0ICAgIGVudW1lcmFibGU6IHRydWVcblx0ICB9LFxuXHQgIHVuc2FmZURlbGltaXRlcnM6IHtcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICByZXR1cm4gdW5zYWZlRGVsaW1pdGVycztcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcblx0ICAgICAgdW5zYWZlRGVsaW1pdGVycyA9IHZhbDtcblx0ICAgICAgY29tcGlsZVJlZ2V4KCk7XG5cdCAgICB9LFxuXHQgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgZW51bWVyYWJsZTogdHJ1ZVxuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgd2FybiA9IHVuZGVmaW5lZDtcblx0dmFyIGZvcm1hdENvbXBvbmVudE5hbWUgPSB1bmRlZmluZWQ7XG5cdFxuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIChmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgaGFzQ29uc29sZSA9IHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJztcblx0XG5cdCAgICB3YXJuID0gZnVuY3Rpb24gKG1zZywgdm0pIHtcblx0ICAgICAgaWYgKGhhc0NvbnNvbGUgJiYgIWNvbmZpZy5zaWxlbnQpIHtcblx0ICAgICAgICBjb25zb2xlLmVycm9yKCdbVnVlIHdhcm5dOiAnICsgbXNnICsgKHZtID8gZm9ybWF0Q29tcG9uZW50TmFtZSh2bSkgOiAnJykpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIGZvcm1hdENvbXBvbmVudE5hbWUgPSBmdW5jdGlvbiAodm0pIHtcblx0ICAgICAgdmFyIG5hbWUgPSB2bS5faXNWdWUgPyB2bS4kb3B0aW9ucy5uYW1lIDogdm0ubmFtZTtcblx0ICAgICAgcmV0dXJuIG5hbWUgPyAnIChmb3VuZCBpbiBjb21wb25lbnQ6IDwnICsgaHlwaGVuYXRlKG5hbWUpICsgJz4pJyA6ICcnO1xuXHQgICAgfTtcblx0ICB9KSgpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXBwZW5kIHdpdGggdHJhbnNpdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFwcGVuZFdpdGhUcmFuc2l0aW9uKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuXHQgIGFwcGx5VHJhbnNpdGlvbihlbCwgMSwgZnVuY3Rpb24gKCkge1xuXHQgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcblx0ICB9LCB2bSwgY2IpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSW5zZXJ0QmVmb3JlIHdpdGggdHJhbnNpdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGJlZm9yZVdpdGhUcmFuc2l0aW9uKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuXHQgIGFwcGx5VHJhbnNpdGlvbihlbCwgMSwgZnVuY3Rpb24gKCkge1xuXHQgICAgYmVmb3JlKGVsLCB0YXJnZXQpO1xuXHQgIH0sIHZtLCBjYik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgd2l0aCB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlV2l0aFRyYW5zaXRpb24oZWwsIHZtLCBjYikge1xuXHQgIGFwcGx5VHJhbnNpdGlvbihlbCwgLTEsIGZ1bmN0aW9uICgpIHtcblx0ICAgIHJlbW92ZShlbCk7XG5cdCAgfSwgdm0sIGNiKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFwcGx5IHRyYW5zaXRpb25zIHdpdGggYW4gb3BlcmF0aW9uIGNhbGxiYWNrLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBkaXJlY3Rpb25cblx0ICogICAgICAgICAgICAgICAgICAxOiBlbnRlclxuXHQgKiAgICAgICAgICAgICAgICAgLTE6IGxlYXZlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gdGhlIGFjdHVhbCBET00gb3BlcmF0aW9uXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXBwbHlUcmFuc2l0aW9uKGVsLCBkaXJlY3Rpb24sIG9wLCB2bSwgY2IpIHtcblx0ICB2YXIgdHJhbnNpdGlvbiA9IGVsLl9fdl90cmFucztcblx0ICBpZiAoIXRyYW5zaXRpb24gfHxcblx0ICAvLyBza2lwIGlmIHRoZXJlIGFyZSBubyBqcyBob29rcyBhbmQgQ1NTIHRyYW5zaXRpb24gaXNcblx0ICAvLyBub3Qgc3VwcG9ydGVkXG5cdCAgIXRyYW5zaXRpb24uaG9va3MgJiYgIXRyYW5zaXRpb25FbmRFdmVudCB8fFxuXHQgIC8vIHNraXAgdHJhbnNpdGlvbnMgZm9yIGluaXRpYWwgY29tcGlsZVxuXHQgICF2bS5faXNDb21waWxlZCB8fFxuXHQgIC8vIGlmIHRoZSB2bSBpcyBiZWluZyBtYW5pcHVsYXRlZCBieSBhIHBhcmVudCBkaXJlY3RpdmVcblx0ICAvLyBkdXJpbmcgdGhlIHBhcmVudCdzIGNvbXBpbGF0aW9uIHBoYXNlLCBza2lwIHRoZVxuXHQgIC8vIGFuaW1hdGlvbi5cblx0ICB2bS4kcGFyZW50ICYmICF2bS4kcGFyZW50Ll9pc0NvbXBpbGVkKSB7XG5cdCAgICBvcCgpO1xuXHQgICAgaWYgKGNiKSBjYigpO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgYWN0aW9uID0gZGlyZWN0aW9uID4gMCA/ICdlbnRlcicgOiAnbGVhdmUnO1xuXHQgIHRyYW5zaXRpb25bYWN0aW9uXShvcCwgY2IpO1xuXHR9XG5cdFxuXHR2YXIgdHJhbnNpdGlvbiA9IE9iamVjdC5mcmVlemUoe1xuXHQgIGFwcGVuZFdpdGhUcmFuc2l0aW9uOiBhcHBlbmRXaXRoVHJhbnNpdGlvbixcblx0ICBiZWZvcmVXaXRoVHJhbnNpdGlvbjogYmVmb3JlV2l0aFRyYW5zaXRpb24sXG5cdCAgcmVtb3ZlV2l0aFRyYW5zaXRpb246IHJlbW92ZVdpdGhUcmFuc2l0aW9uLFxuXHQgIGFwcGx5VHJhbnNpdGlvbjogYXBwbHlUcmFuc2l0aW9uXG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIFF1ZXJ5IGFuIGVsZW1lbnQgc2VsZWN0b3IgaWYgaXQncyBub3QgYW4gZWxlbWVudCBhbHJlYWR5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBlbFxuXHQgKiBAcmV0dXJuIHtFbGVtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHF1ZXJ5KGVsKSB7XG5cdCAgaWYgKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHtcblx0ICAgIHZhciBzZWxlY3RvciA9IGVsO1xuXHQgICAgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsKTtcblx0ICAgIGlmICghZWwpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdDYW5ub3QgZmluZCBlbGVtZW50OiAnICsgc2VsZWN0b3IpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gZWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhIG5vZGUgaXMgaW4gdGhlIGRvY3VtZW50LlxuXHQgKiBOb3RlOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMgc2hvdWxkIHdvcmsgaGVyZVxuXHQgKiBidXQgYWx3YXlzIHJldHVybnMgZmFsc2UgZm9yIGNvbW1lbnQgbm9kZXMgaW4gcGhhbnRvbWpzLFxuXHQgKiBtYWtpbmcgdW5pdCB0ZXN0cyBkaWZmaWN1bHQuIFRoaXMgaXMgZml4ZWQgYnkgZG9pbmcgdGhlXG5cdCAqIGNvbnRhaW5zKCkgY2hlY2sgb24gdGhlIG5vZGUncyBwYXJlbnROb2RlIGluc3RlYWQgb2Zcblx0ICogdGhlIG5vZGUgaXRzZWxmLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpbkRvYyhub2RlKSB7XG5cdCAgaWYgKCFub2RlKSByZXR1cm4gZmFsc2U7XG5cdCAgdmFyIGRvYyA9IG5vZGUub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdCAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcblx0ICByZXR1cm4gZG9jID09PSBub2RlIHx8IGRvYyA9PT0gcGFyZW50IHx8ICEhKHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgPT09IDEgJiYgZG9jLmNvbnRhaW5zKHBhcmVudCkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IGFuZCByZW1vdmUgYW4gYXR0cmlidXRlIGZyb20gYSBub2RlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IF9hdHRyXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0QXR0cihub2RlLCBfYXR0cikge1xuXHQgIHZhciB2YWwgPSBub2RlLmdldEF0dHJpYnV0ZShfYXR0cik7XG5cdCAgaWYgKHZhbCAhPT0gbnVsbCkge1xuXHQgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoX2F0dHIpO1xuXHQgIH1cblx0ICByZXR1cm4gdmFsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IGFuIGF0dHJpYnV0ZSB3aXRoIGNvbG9uIG9yIHYtYmluZDogcHJlZml4LlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICogQHJldHVybiB7U3RyaW5nfG51bGx9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0QmluZEF0dHIobm9kZSwgbmFtZSkge1xuXHQgIHZhciB2YWwgPSBnZXRBdHRyKG5vZGUsICc6JyArIG5hbWUpO1xuXHQgIGlmICh2YWwgPT09IG51bGwpIHtcblx0ICAgIHZhbCA9IGdldEF0dHIobm9kZSwgJ3YtYmluZDonICsgbmFtZSk7XG5cdCAgfVxuXHQgIHJldHVybiB2YWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayB0aGUgcHJlc2VuY2Ugb2YgYSBiaW5kIGF0dHJpYnV0ZS5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaGFzQmluZEF0dHIobm9kZSwgbmFtZSkge1xuXHQgIHJldHVybiBub2RlLmhhc0F0dHJpYnV0ZShuYW1lKSB8fCBub2RlLmhhc0F0dHJpYnV0ZSgnOicgKyBuYW1lKSB8fCBub2RlLmhhc0F0dHJpYnV0ZSgndi1iaW5kOicgKyBuYW1lKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEluc2VydCBlbCBiZWZvcmUgdGFyZ2V0XG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBiZWZvcmUoZWwsIHRhcmdldCkge1xuXHQgIHRhcmdldC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlbCwgdGFyZ2V0KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEluc2VydCBlbCBhZnRlciB0YXJnZXRcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFmdGVyKGVsLCB0YXJnZXQpIHtcblx0ICBpZiAodGFyZ2V0Lm5leHRTaWJsaW5nKSB7XG5cdCAgICBiZWZvcmUoZWwsIHRhcmdldC5uZXh0U2libGluZyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRhcmdldC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGVsKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgZWwgZnJvbSBET01cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZShlbCkge1xuXHQgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJlcGVuZCBlbCB0byB0YXJnZXRcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByZXBlbmQoZWwsIHRhcmdldCkge1xuXHQgIGlmICh0YXJnZXQuZmlyc3RDaGlsZCkge1xuXHQgICAgYmVmb3JlKGVsLCB0YXJnZXQuZmlyc3RDaGlsZCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVwbGFjZSB0YXJnZXQgd2l0aCBlbFxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVwbGFjZSh0YXJnZXQsIGVsKSB7XG5cdCAgdmFyIHBhcmVudCA9IHRhcmdldC5wYXJlbnROb2RlO1xuXHQgIGlmIChwYXJlbnQpIHtcblx0ICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQoZWwsIHRhcmdldCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQWRkIGV2ZW50IGxpc3RlbmVyIHNob3J0aGFuZC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICogQHBhcmFtIHtCb29sZWFufSBbdXNlQ2FwdHVyZV1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBvbihlbCwgZXZlbnQsIGNiLCB1c2VDYXB0dXJlKSB7XG5cdCAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2IsIHVzZUNhcHR1cmUpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVyIHNob3J0aGFuZC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBvZmYoZWwsIGV2ZW50LCBjYikge1xuXHQgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGNiKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvciBJRTkgY29tcGF0OiB3aGVuIGJvdGggY2xhc3MgYW5kIDpjbGFzcyBhcmUgcHJlc2VudFxuXHQgKiBnZXRBdHRyaWJ1dGUoJ2NsYXNzJykgcmV0dXJucyB3cm9uZyB2YWx1ZS4uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRDbGFzcyhlbCkge1xuXHQgIHZhciBjbGFzc25hbWUgPSBlbC5jbGFzc05hbWU7XG5cdCAgaWYgKHR5cGVvZiBjbGFzc25hbWUgPT09ICdvYmplY3QnKSB7XG5cdCAgICBjbGFzc25hbWUgPSBjbGFzc25hbWUuYmFzZVZhbCB8fCAnJztcblx0ICB9XG5cdCAgcmV0dXJuIGNsYXNzbmFtZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEluIElFOSwgc2V0QXR0cmlidXRlKCdjbGFzcycpIHdpbGwgcmVzdWx0IGluIGVtcHR5IGNsYXNzXG5cdCAqIGlmIHRoZSBlbGVtZW50IGFsc28gaGFzIHRoZSA6Y2xhc3MgYXR0cmlidXRlOyBIb3dldmVyIGluXG5cdCAqIFBoYW50b21KUywgc2V0dGluZyBgY2xhc3NOYW1lYCBkb2VzIG5vdCB3b3JrIG9uIFNWRyBlbGVtZW50cy4uLlxuXHQgKiBTbyB3ZSBoYXZlIHRvIGRvIGEgY29uZGl0aW9uYWwgY2hlY2sgaGVyZS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY2xzXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2V0Q2xhc3MoZWwsIGNscykge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChpc0lFOSAmJiAhL3N2ZyQvLnRlc3QoZWwubmFtZXNwYWNlVVJJKSkge1xuXHQgICAgZWwuY2xhc3NOYW1lID0gY2xzO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY2xzKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBZGQgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBJRSAmIFNWR1xuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhZGRDbGFzcyhlbCwgY2xzKSB7XG5cdCAgaWYgKGVsLmNsYXNzTGlzdCkge1xuXHQgICAgZWwuY2xhc3NMaXN0LmFkZChjbHMpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgY3VyID0gJyAnICsgZ2V0Q2xhc3MoZWwpICsgJyAnO1xuXHQgICAgaWYgKGN1ci5pbmRleE9mKCcgJyArIGNscyArICcgJykgPCAwKSB7XG5cdCAgICAgIHNldENsYXNzKGVsLCAoY3VyICsgY2xzKS50cmltKCkpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIElFICYgU1ZHXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsLCBjbHMpIHtcblx0ICBpZiAoZWwuY2xhc3NMaXN0KSB7XG5cdCAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNscyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBjdXIgPSAnICcgKyBnZXRDbGFzcyhlbCkgKyAnICc7XG5cdCAgICB2YXIgdGFyID0gJyAnICsgY2xzICsgJyAnO1xuXHQgICAgd2hpbGUgKGN1ci5pbmRleE9mKHRhcikgPj0gMCkge1xuXHQgICAgICBjdXIgPSBjdXIucmVwbGFjZSh0YXIsICcgJyk7XG5cdCAgICB9XG5cdCAgICBzZXRDbGFzcyhlbCwgY3VyLnRyaW0oKSk7XG5cdCAgfVxuXHQgIGlmICghZWwuY2xhc3NOYW1lKSB7XG5cdCAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRXh0cmFjdCByYXcgY29udGVudCBpbnNpZGUgYW4gZWxlbWVudCBpbnRvIGEgdGVtcG9yYXJ5XG5cdCAqIGNvbnRhaW5lciBkaXZcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IGFzRnJhZ21lbnRcblx0ICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGV4dHJhY3RDb250ZW50KGVsLCBhc0ZyYWdtZW50KSB7XG5cdCAgdmFyIGNoaWxkO1xuXHQgIHZhciByYXdDb250ZW50O1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChpc1RlbXBsYXRlKGVsKSAmJiBpc0ZyYWdtZW50KGVsLmNvbnRlbnQpKSB7XG5cdCAgICBlbCA9IGVsLmNvbnRlbnQ7XG5cdCAgfVxuXHQgIGlmIChlbC5oYXNDaGlsZE5vZGVzKCkpIHtcblx0ICAgIHRyaW1Ob2RlKGVsKTtcblx0ICAgIHJhd0NvbnRlbnQgPSBhc0ZyYWdtZW50ID8gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgd2hpbGUgKGNoaWxkID0gZWwuZmlyc3RDaGlsZCkge1xuXHQgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICAgIHJhd0NvbnRlbnQuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmF3Q29udGVudDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRyaW0gcG9zc2libGUgZW1wdHkgaGVhZC90YWlsIHRleHQgYW5kIGNvbW1lbnRcblx0ICogbm9kZXMgaW5zaWRlIGEgcGFyZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0cmltTm9kZShub2RlKSB7XG5cdCAgdmFyIGNoaWxkO1xuXHQgIC8qIGVzbGludC1kaXNhYmxlIG5vLXNlcXVlbmNlcyAqL1xuXHQgIHdoaWxlICgoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcblx0ICAgIG5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuXHQgIH1cblx0ICB3aGlsZSAoKGNoaWxkID0gbm9kZS5sYXN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcblx0ICAgIG5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuXHQgIH1cblx0ICAvKiBlc2xpbnQtZW5hYmxlIG5vLXNlcXVlbmNlcyAqL1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1RyaW1tYWJsZShub2RlKSB7XG5cdCAgcmV0dXJuIG5vZGUgJiYgKG5vZGUubm9kZVR5cGUgPT09IDMgJiYgIW5vZGUuZGF0YS50cmltKCkgfHwgbm9kZS5ub2RlVHlwZSA9PT0gOCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgdGVtcGxhdGUgdGFnLlxuXHQgKiBOb3RlIGlmIHRoZSB0ZW1wbGF0ZSBhcHBlYXJzIGluc2lkZSBhbiBTVkcgaXRzIHRhZ05hbWVcblx0ICogd2lsbCBiZSBpbiBsb3dlcmNhc2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc1RlbXBsYXRlKGVsKSB7XG5cdCAgcmV0dXJuIGVsLnRhZ05hbWUgJiYgZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAndGVtcGxhdGUnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlIGFuIFwiYW5jaG9yXCIgZm9yIHBlcmZvcm1pbmcgZG9tIGluc2VydGlvbi9yZW1vdmFscy5cblx0ICogVGhpcyBpcyB1c2VkIGluIGEgbnVtYmVyIG9mIHNjZW5hcmlvczpcblx0ICogLSBmcmFnbWVudCBpbnN0YW5jZVxuXHQgKiAtIHYtaHRtbFxuXHQgKiAtIHYtaWZcblx0ICogLSB2LWZvclxuXHQgKiAtIGNvbXBvbmVudFxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY29udGVudFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHBlcnNpc3QgLSBJRSB0cmFzaGVzIGVtcHR5IHRleHROb2RlcyBvblxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZU5vZGUodHJ1ZSksIHNvIGluIGNlcnRhaW5cblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZXMgdGhlIGFuY2hvciBuZWVkcyB0byBiZVxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub24tZW1wdHkgdG8gYmUgcGVyc2lzdGVkIGluXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlcy5cblx0ICogQHJldHVybiB7Q29tbWVudHxUZXh0fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUFuY2hvcihjb250ZW50LCBwZXJzaXN0KSB7XG5cdCAgdmFyIGFuY2hvciA9IGNvbmZpZy5kZWJ1ZyA/IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoY29udGVudCkgOiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShwZXJzaXN0ID8gJyAnIDogJycpO1xuXHQgIGFuY2hvci5fX3ZfYW5jaG9yID0gdHJ1ZTtcblx0ICByZXR1cm4gYW5jaG9yO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRmluZCBhIGNvbXBvbmVudCByZWYgYXR0cmlidXRlIHRoYXQgc3RhcnRzIHdpdGggJC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBub2RlXG5cdCAqIEByZXR1cm4ge1N0cmluZ3x1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0dmFyIHJlZlJFID0gL152LXJlZjovO1xuXHRcblx0ZnVuY3Rpb24gZmluZFJlZihub2RlKSB7XG5cdCAgaWYgKG5vZGUuaGFzQXR0cmlidXRlcygpKSB7XG5cdCAgICB2YXIgYXR0cnMgPSBub2RlLmF0dHJpYnV0ZXM7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG5cdCAgICAgIGlmIChyZWZSRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgcmV0dXJuIGNhbWVsaXplKG5hbWUucmVwbGFjZShyZWZSRSwgJycpKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIE1hcCBhIGZ1bmN0aW9uIHRvIGEgcmFuZ2Ugb2Ygbm9kZXMgLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtOb2RlfSBlbmRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gb3Bcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYXBOb2RlUmFuZ2Uobm9kZSwgZW5kLCBvcCkge1xuXHQgIHZhciBuZXh0O1xuXHQgIHdoaWxlIChub2RlICE9PSBlbmQpIHtcblx0ICAgIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuXHQgICAgb3Aobm9kZSk7XG5cdCAgICBub2RlID0gbmV4dDtcblx0ICB9XG5cdCAgb3AoZW5kKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBhIHJhbmdlIG9mIG5vZGVzIHdpdGggdHJhbnNpdGlvbiwgc3RvcmVcblx0ICogdGhlIG5vZGVzIGluIGEgZnJhZ21lbnQgd2l0aCBjb3JyZWN0IG9yZGVyaW5nLFxuXHQgKiBhbmQgY2FsbCBjYWxsYmFjayB3aGVuIGRvbmUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gc3RhcnRcblx0ICogQHBhcmFtIHtOb2RlfSBlbmRcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZU5vZGVSYW5nZShzdGFydCwgZW5kLCB2bSwgZnJhZywgY2IpIHtcblx0ICB2YXIgZG9uZSA9IGZhbHNlO1xuXHQgIHZhciByZW1vdmVkID0gMDtcblx0ICB2YXIgbm9kZXMgPSBbXTtcblx0ICBtYXBOb2RlUmFuZ2Uoc3RhcnQsIGVuZCwgZnVuY3Rpb24gKG5vZGUpIHtcblx0ICAgIGlmIChub2RlID09PSBlbmQpIGRvbmUgPSB0cnVlO1xuXHQgICAgbm9kZXMucHVzaChub2RlKTtcblx0ICAgIHJlbW92ZVdpdGhUcmFuc2l0aW9uKG5vZGUsIHZtLCBvblJlbW92ZWQpO1xuXHQgIH0pO1xuXHQgIGZ1bmN0aW9uIG9uUmVtb3ZlZCgpIHtcblx0ICAgIHJlbW92ZWQrKztcblx0ICAgIGlmIChkb25lICYmIHJlbW92ZWQgPj0gbm9kZXMubGVuZ3RoKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBmcmFnLmFwcGVuZENoaWxkKG5vZGVzW2ldKTtcblx0ICAgICAgfVxuXHQgICAgICBjYiAmJiBjYigpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGEgbm9kZSBpcyBhIERvY3VtZW50RnJhZ21lbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzRnJhZ21lbnQobm9kZSkge1xuXHQgIHJldHVybiBub2RlICYmIG5vZGUubm9kZVR5cGUgPT09IDExO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IG91dGVySFRNTCBvZiBlbGVtZW50cywgdGFraW5nIGNhcmVcblx0ICogb2YgU1ZHIGVsZW1lbnRzIGluIElFIGFzIHdlbGwuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldE91dGVySFRNTChlbCkge1xuXHQgIGlmIChlbC5vdXRlckhUTUwpIHtcblx0ICAgIHJldHVybiBlbC5vdXRlckhUTUw7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChlbC5jbG9uZU5vZGUodHJ1ZSkpO1xuXHQgICAgcmV0dXJuIGNvbnRhaW5lci5pbm5lckhUTUw7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgY29tbW9uVGFnUkUgPSAvXihkaXZ8cHxzcGFufGltZ3xhfGJ8aXxicnx1bHxvbHxsaXxoMXxoMnxoM3xoNHxoNXxoNnxjb2RlfHByZXx0YWJsZXx0aHx0ZHx0cnxmb3JtfGxhYmVsfGlucHV0fHNlbGVjdHxvcHRpb258bmF2fGFydGljbGV8c2VjdGlvbnxoZWFkZXJ8Zm9vdGVyKSQvaTtcblx0dmFyIHJlc2VydmVkVGFnUkUgPSAvXihzbG90fHBhcnRpYWx8Y29tcG9uZW50KSQvaTtcblx0XG5cdHZhciBpc1Vua25vd25FbGVtZW50ID0gdW5kZWZpbmVkO1xuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIGlzVW5rbm93bkVsZW1lbnQgPSBmdW5jdGlvbiAoZWwsIHRhZykge1xuXHQgICAgaWYgKHRhZy5pbmRleE9mKCctJykgPiAtMSkge1xuXHQgICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yODIxMDM2NC8xMDcwMjQ0XG5cdCAgICAgIHJldHVybiBlbC5jb25zdHJ1Y3RvciA9PT0gd2luZG93LkhUTUxVbmtub3duRWxlbWVudCB8fCBlbC5jb25zdHJ1Y3RvciA9PT0gd2luZG93LkhUTUxFbGVtZW50O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICgvSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KGVsLnRvU3RyaW5nKCkpICYmXG5cdCAgICAgICAgLy8gQ2hyb21lIHJldHVybnMgdW5rbm93biBmb3Igc2V2ZXJhbCBIVE1MNSBlbGVtZW50cy5cblx0ICAgICAgICAvLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NTQwNTI2XG5cdCAgICAgICAgLy8gRmlyZWZveCByZXR1cm5zIHVua25vd24gZm9yIHNvbWUgXCJJbnRlcmFjdGl2ZSBlbGVtZW50cy5cIlxuXHQgICAgICAgICEvXihkYXRhfHRpbWV8cnRjfHJifGRldGFpbHN8ZGlhbG9nfHN1bW1hcnkpJC8udGVzdCh0YWcpXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSBjb21wb25lbnQsIGlmIHllcyByZXR1cm4gaXRzXG5cdCAqIGNvbXBvbmVudCBpZC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNoZWNrQ29tcG9uZW50QXR0cihlbCwgb3B0aW9ucykge1xuXHQgIHZhciB0YWcgPSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdCAgdmFyIGhhc0F0dHJzID0gZWwuaGFzQXR0cmlidXRlcygpO1xuXHQgIGlmICghY29tbW9uVGFnUkUudGVzdCh0YWcpICYmICFyZXNlcnZlZFRhZ1JFLnRlc3QodGFnKSkge1xuXHQgICAgaWYgKHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykpIHtcblx0ICAgICAgcmV0dXJuIHsgaWQ6IHRhZyB9O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIGlzID0gaGFzQXR0cnMgJiYgZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKTtcblx0ICAgICAgaWYgKGlzKSB7XG5cdCAgICAgICAgcmV0dXJuIGlzO1xuXHQgICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICB2YXIgZXhwZWN0ZWRUYWcgPSBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwICYmIG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXBbdGFnXTtcblx0ICAgICAgICBpZiAoZXhwZWN0ZWRUYWcpIHtcblx0ICAgICAgICAgIHdhcm4oJ1Vua25vd24gY3VzdG9tIGVsZW1lbnQ6IDwnICsgdGFnICsgJz4gLSAnICsgJ2RpZCB5b3UgbWVhbiA8JyArIGV4cGVjdGVkVGFnICsgJz4/ICcgKyAnSFRNTCBpcyBjYXNlLWluc2Vuc2l0aXZlLCByZW1lbWJlciB0byB1c2Uga2ViYWItY2FzZSBpbiB0ZW1wbGF0ZXMuJyk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChpc1Vua25vd25FbGVtZW50KGVsLCB0YWcpKSB7XG5cdCAgICAgICAgICB3YXJuKCdVbmtub3duIGN1c3RvbSBlbGVtZW50OiA8JyArIHRhZyArICc+IC0gZGlkIHlvdSAnICsgJ3JlZ2lzdGVyIHRoZSBjb21wb25lbnQgY29ycmVjdGx5PyBGb3IgcmVjdXJzaXZlIGNvbXBvbmVudHMsICcgKyAnbWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhlIFwibmFtZVwiIG9wdGlvbi4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGhhc0F0dHJzKSB7XG5cdCAgICByZXR1cm4gZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgXCJpc1wiIGJpbmRpbmcgZnJvbSBhbiBlbGVtZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKSB7XG5cdCAgLy8gZHluYW1pYyBzeW50YXhcblx0ICB2YXIgZXhwID0gZWwuZ2V0QXR0cmlidXRlKCdpcycpO1xuXHQgIGlmIChleHAgIT0gbnVsbCkge1xuXHQgICAgaWYgKHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIGV4cCkpIHtcblx0ICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdpcycpO1xuXHQgICAgICByZXR1cm4geyBpZDogZXhwIH07XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIGV4cCA9IGdldEJpbmRBdHRyKGVsLCAnaXMnKTtcblx0ICAgIGlmIChleHAgIT0gbnVsbCkge1xuXHQgICAgICByZXR1cm4geyBpZDogZXhwLCBkeW5hbWljOiB0cnVlIH07XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogT3B0aW9uIG92ZXJ3cml0aW5nIHN0cmF0ZWdpZXMgYXJlIGZ1bmN0aW9ucyB0aGF0IGhhbmRsZVxuXHQgKiBob3cgdG8gbWVyZ2UgYSBwYXJlbnQgb3B0aW9uIHZhbHVlIGFuZCBhIGNoaWxkIG9wdGlvblxuXHQgKiB2YWx1ZSBpbnRvIHRoZSBmaW5hbCB2YWx1ZS5cblx0ICpcblx0ICogQWxsIHN0cmF0ZWd5IGZ1bmN0aW9ucyBmb2xsb3cgdGhlIHNhbWUgc2lnbmF0dXJlOlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHBhcmVudFZhbFxuXHQgKiBAcGFyYW0geyp9IGNoaWxkVmFsXG5cdCAqIEBwYXJhbSB7VnVlfSBbdm1dXG5cdCAqL1xuXHRcblx0dmFyIHN0cmF0cyA9IGNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRcblx0LyoqXG5cdCAqIEhlbHBlciB0aGF0IHJlY3Vyc2l2ZWx5IG1lcmdlcyB0d28gZGF0YSBvYmplY3RzIHRvZ2V0aGVyLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1lcmdlRGF0YSh0bywgZnJvbSkge1xuXHQgIHZhciBrZXksIHRvVmFsLCBmcm9tVmFsO1xuXHQgIGZvciAoa2V5IGluIGZyb20pIHtcblx0ICAgIHRvVmFsID0gdG9ba2V5XTtcblx0ICAgIGZyb21WYWwgPSBmcm9tW2tleV07XG5cdCAgICBpZiAoIWhhc093bih0bywga2V5KSkge1xuXHQgICAgICBzZXQodG8sIGtleSwgZnJvbVZhbCk7XG5cdCAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHRvVmFsKSAmJiBpc09iamVjdChmcm9tVmFsKSkge1xuXHQgICAgICBtZXJnZURhdGEodG9WYWwsIGZyb21WYWwpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdG87XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEYXRhXG5cdCAqL1xuXHRcblx0c3RyYXRzLmRhdGEgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCwgdm0pIHtcblx0ICBpZiAoIXZtKSB7XG5cdCAgICAvLyBpbiBhIFZ1ZS5leHRlbmQgbWVyZ2UsIGJvdGggc2hvdWxkIGJlIGZ1bmN0aW9uc1xuXHQgICAgaWYgKCFjaGlsZFZhbCkge1xuXHQgICAgICByZXR1cm4gcGFyZW50VmFsO1xuXHQgICAgfVxuXHQgICAgaWYgKHR5cGVvZiBjaGlsZFZhbCAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1RoZSBcImRhdGFcIiBvcHRpb24gc2hvdWxkIGJlIGEgZnVuY3Rpb24gJyArICd0aGF0IHJldHVybnMgYSBwZXItaW5zdGFuY2UgdmFsdWUgaW4gY29tcG9uZW50ICcgKyAnZGVmaW5pdGlvbnMuJywgdm0pO1xuXHQgICAgICByZXR1cm4gcGFyZW50VmFsO1xuXHQgICAgfVxuXHQgICAgaWYgKCFwYXJlbnRWYWwpIHtcblx0ICAgICAgcmV0dXJuIGNoaWxkVmFsO1xuXHQgICAgfVxuXHQgICAgLy8gd2hlbiBwYXJlbnRWYWwgJiBjaGlsZFZhbCBhcmUgYm90aCBwcmVzZW50LFxuXHQgICAgLy8gd2UgbmVlZCB0byByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlXG5cdCAgICAvLyBtZXJnZWQgcmVzdWx0IG9mIGJvdGggZnVuY3Rpb25zLi4uIG5vIG5lZWQgdG9cblx0ICAgIC8vIGNoZWNrIGlmIHBhcmVudFZhbCBpcyBhIGZ1bmN0aW9uIGhlcmUgYmVjYXVzZVxuXHQgICAgLy8gaXQgaGFzIHRvIGJlIGEgZnVuY3Rpb24gdG8gcGFzcyBwcmV2aW91cyBtZXJnZXMuXG5cdCAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkRGF0YUZuKCkge1xuXHQgICAgICByZXR1cm4gbWVyZ2VEYXRhKGNoaWxkVmFsLmNhbGwodGhpcyksIHBhcmVudFZhbC5jYWxsKHRoaXMpKTtcblx0ICAgIH07XG5cdCAgfSBlbHNlIGlmIChwYXJlbnRWYWwgfHwgY2hpbGRWYWwpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWRJbnN0YW5jZURhdGFGbigpIHtcblx0ICAgICAgLy8gaW5zdGFuY2UgbWVyZ2Vcblx0ICAgICAgdmFyIGluc3RhbmNlRGF0YSA9IHR5cGVvZiBjaGlsZFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IGNoaWxkVmFsLmNhbGwodm0pIDogY2hpbGRWYWw7XG5cdCAgICAgIHZhciBkZWZhdWx0RGF0YSA9IHR5cGVvZiBwYXJlbnRWYWwgPT09ICdmdW5jdGlvbicgPyBwYXJlbnRWYWwuY2FsbCh2bSkgOiB1bmRlZmluZWQ7XG5cdCAgICAgIGlmIChpbnN0YW5jZURhdGEpIHtcblx0ICAgICAgICByZXR1cm4gbWVyZ2VEYXRhKGluc3RhbmNlRGF0YSwgZGVmYXVsdERhdGEpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBkZWZhdWx0RGF0YTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogRWxcblx0ICovXG5cdFxuXHRzdHJhdHMuZWwgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCwgdm0pIHtcblx0ICBpZiAoIXZtICYmIGNoaWxkVmFsICYmIHR5cGVvZiBjaGlsZFZhbCAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdUaGUgXCJlbFwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICsgJ3RoYXQgcmV0dXJucyBhIHBlci1pbnN0YW5jZSB2YWx1ZSBpbiBjb21wb25lbnQgJyArICdkZWZpbml0aW9ucy4nLCB2bSk7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciByZXQgPSBjaGlsZFZhbCB8fCBwYXJlbnRWYWw7XG5cdCAgLy8gaW52b2tlIHRoZSBlbGVtZW50IGZhY3RvcnkgaWYgdGhpcyBpcyBpbnN0YW5jZSBtZXJnZVxuXHQgIHJldHVybiB2bSAmJiB0eXBlb2YgcmV0ID09PSAnZnVuY3Rpb24nID8gcmV0LmNhbGwodm0pIDogcmV0O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEhvb2tzIGFuZCBwYXJhbSBhdHRyaWJ1dGVzIGFyZSBtZXJnZWQgYXMgYXJyYXlzLlxuXHQgKi9cblx0XG5cdHN0cmF0cy5pbml0ID0gc3RyYXRzLmNyZWF0ZWQgPSBzdHJhdHMucmVhZHkgPSBzdHJhdHMuYXR0YWNoZWQgPSBzdHJhdHMuZGV0YWNoZWQgPSBzdHJhdHMuYmVmb3JlQ29tcGlsZSA9IHN0cmF0cy5jb21waWxlZCA9IHN0cmF0cy5iZWZvcmVEZXN0cm95ID0gc3RyYXRzLmRlc3Ryb3llZCA9IHN0cmF0cy5hY3RpdmF0ZSA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG5cdCAgcmV0dXJuIGNoaWxkVmFsID8gcGFyZW50VmFsID8gcGFyZW50VmFsLmNvbmNhdChjaGlsZFZhbCkgOiBpc0FycmF5KGNoaWxkVmFsKSA/IGNoaWxkVmFsIDogW2NoaWxkVmFsXSA6IHBhcmVudFZhbDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBc3NldHNcblx0ICpcblx0ICogV2hlbiBhIHZtIGlzIHByZXNlbnQgKGluc3RhbmNlIGNyZWF0aW9uKSwgd2UgbmVlZCB0byBkb1xuXHQgKiBhIHRocmVlLXdheSBtZXJnZSBiZXR3ZWVuIGNvbnN0cnVjdG9yIG9wdGlvbnMsIGluc3RhbmNlXG5cdCAqIG9wdGlvbnMgYW5kIHBhcmVudCBvcHRpb25zLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1lcmdlQXNzZXRzKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcblx0ICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRWYWwgfHwgbnVsbCk7XG5cdCAgcmV0dXJuIGNoaWxkVmFsID8gZXh0ZW5kKHJlcywgZ3VhcmRBcnJheUFzc2V0cyhjaGlsZFZhbCkpIDogcmVzO1xuXHR9XG5cdFxuXHRjb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuXHQgIHN0cmF0c1t0eXBlICsgJ3MnXSA9IG1lcmdlQXNzZXRzO1xuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBFdmVudHMgJiBXYXRjaGVycy5cblx0ICpcblx0ICogRXZlbnRzICYgd2F0Y2hlcnMgaGFzaGVzIHNob3VsZCBub3Qgb3ZlcndyaXRlIG9uZVxuXHQgKiBhbm90aGVyLCBzbyB3ZSBtZXJnZSB0aGVtIGFzIGFycmF5cy5cblx0ICovXG5cdFxuXHRzdHJhdHMud2F0Y2ggPSBzdHJhdHMuZXZlbnRzID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcblx0ICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsO1xuXHQgIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG5cdCAgdmFyIHJldCA9IHt9O1xuXHQgIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG5cdCAgZm9yICh2YXIga2V5IGluIGNoaWxkVmFsKSB7XG5cdCAgICB2YXIgcGFyZW50ID0gcmV0W2tleV07XG5cdCAgICB2YXIgY2hpbGQgPSBjaGlsZFZhbFtrZXldO1xuXHQgICAgaWYgKHBhcmVudCAmJiAhaXNBcnJheShwYXJlbnQpKSB7XG5cdCAgICAgIHBhcmVudCA9IFtwYXJlbnRdO1xuXHQgICAgfVxuXHQgICAgcmV0W2tleV0gPSBwYXJlbnQgPyBwYXJlbnQuY29uY2F0KGNoaWxkKSA6IFtjaGlsZF07XG5cdCAgfVxuXHQgIHJldHVybiByZXQ7XG5cdH07XG5cdFxuXHQvKipcblx0ICogT3RoZXIgb2JqZWN0IGhhc2hlcy5cblx0ICovXG5cdFxuXHRzdHJhdHMucHJvcHMgPSBzdHJhdHMubWV0aG9kcyA9IHN0cmF0cy5jb21wdXRlZCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG5cdCAgaWYgKCFjaGlsZFZhbCkgcmV0dXJuIHBhcmVudFZhbDtcblx0ICBpZiAoIXBhcmVudFZhbCkgcmV0dXJuIGNoaWxkVmFsO1xuXHQgIHZhciByZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG5cdCAgZXh0ZW5kKHJldCwgY2hpbGRWYWwpO1xuXHQgIHJldHVybiByZXQ7XG5cdH07XG5cdFxuXHQvKipcblx0ICogRGVmYXVsdCBzdHJhdGVneS5cblx0ICovXG5cdFxuXHR2YXIgZGVmYXVsdFN0cmF0ID0gZnVuY3Rpb24gZGVmYXVsdFN0cmF0KHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcblx0ICByZXR1cm4gY2hpbGRWYWwgPT09IHVuZGVmaW5lZCA/IHBhcmVudFZhbCA6IGNoaWxkVmFsO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE1ha2Ugc3VyZSBjb21wb25lbnQgb3B0aW9ucyBnZXQgY29udmVydGVkIHRvIGFjdHVhbFxuXHQgKiBjb25zdHJ1Y3RvcnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ3VhcmRDb21wb25lbnRzKG9wdGlvbnMpIHtcblx0ICBpZiAob3B0aW9ucy5jb21wb25lbnRzKSB7XG5cdCAgICB2YXIgY29tcG9uZW50cyA9IG9wdGlvbnMuY29tcG9uZW50cyA9IGd1YXJkQXJyYXlBc3NldHMob3B0aW9ucy5jb21wb25lbnRzKTtcblx0ICAgIHZhciBpZHMgPSBPYmplY3Qua2V5cyhjb21wb25lbnRzKTtcblx0ICAgIHZhciBkZWY7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICB2YXIgbWFwID0gb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcCA9IHt9O1xuXHQgICAgfVxuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBpZHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBrZXkgPSBpZHNbaV07XG5cdCAgICAgIGlmIChjb21tb25UYWdSRS50ZXN0KGtleSkgfHwgcmVzZXJ2ZWRUYWdSRS50ZXN0KGtleSkpIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0RvIG5vdCB1c2UgYnVpbHQtaW4gb3IgcmVzZXJ2ZWQgSFRNTCBlbGVtZW50cyBhcyBjb21wb25lbnQgJyArICdpZDogJyArIGtleSk7XG5cdCAgICAgICAgY29udGludWU7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gcmVjb3JkIGEgYWxsIGxvd2VyY2FzZSA8LT4ga2ViYWItY2FzZSBtYXBwaW5nIGZvclxuXHQgICAgICAvLyBwb3NzaWJsZSBjdXN0b20gZWxlbWVudCBjYXNlIGVycm9yIHdhcm5pbmdcblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICBtYXBba2V5LnJlcGxhY2UoLy0vZywgJycpLnRvTG93ZXJDYXNlKCldID0gaHlwaGVuYXRlKGtleSk7XG5cdCAgICAgIH1cblx0ICAgICAgZGVmID0gY29tcG9uZW50c1trZXldO1xuXHQgICAgICBpZiAoaXNQbGFpbk9iamVjdChkZWYpKSB7XG5cdCAgICAgICAgY29tcG9uZW50c1trZXldID0gVnVlLmV4dGVuZChkZWYpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRW5zdXJlIGFsbCBwcm9wcyBvcHRpb24gc3ludGF4IGFyZSBub3JtYWxpemVkIGludG8gdGhlXG5cdCAqIE9iamVjdC1iYXNlZCBmb3JtYXQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ3VhcmRQcm9wcyhvcHRpb25zKSB7XG5cdCAgdmFyIHByb3BzID0gb3B0aW9ucy5wcm9wcztcblx0ICB2YXIgaSwgdmFsO1xuXHQgIGlmIChpc0FycmF5KHByb3BzKSkge1xuXHQgICAgb3B0aW9ucy5wcm9wcyA9IHt9O1xuXHQgICAgaSA9IHByb3BzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdmFsID0gcHJvcHNbaV07XG5cdCAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgIG9wdGlvbnMucHJvcHNbdmFsXSA9IG51bGw7XG5cdCAgICAgIH0gZWxzZSBpZiAodmFsLm5hbWUpIHtcblx0ICAgICAgICBvcHRpb25zLnByb3BzW3ZhbC5uYW1lXSA9IHZhbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChwcm9wcykpIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcHMpO1xuXHQgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YWwgPSBwcm9wc1trZXlzW2ldXTtcblx0ICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICBwcm9wc1trZXlzW2ldXSA9IHsgdHlwZTogdmFsIH07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHdWFyZCBhbiBBcnJheS1mb3JtYXQgYXNzZXRzIG9wdGlvbiBhbmQgY29udmVydGVkIGl0XG5cdCAqIGludG8gdGhlIGtleS12YWx1ZSBPYmplY3QgZm9ybWF0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gYXNzZXRzXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBndWFyZEFycmF5QXNzZXRzKGFzc2V0cykge1xuXHQgIGlmIChpc0FycmF5KGFzc2V0cykpIHtcblx0ICAgIHZhciByZXMgPSB7fTtcblx0ICAgIHZhciBpID0gYXNzZXRzLmxlbmd0aDtcblx0ICAgIHZhciBhc3NldDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgYXNzZXQgPSBhc3NldHNbaV07XG5cdCAgICAgIHZhciBpZCA9IHR5cGVvZiBhc3NldCA9PT0gJ2Z1bmN0aW9uJyA/IGFzc2V0Lm9wdGlvbnMgJiYgYXNzZXQub3B0aW9ucy5uYW1lIHx8IGFzc2V0LmlkIDogYXNzZXQubmFtZSB8fCBhc3NldC5pZDtcblx0ICAgICAgaWYgKCFpZCkge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQXJyYXktc3ludGF4IGFzc2V0cyBtdXN0IHByb3ZpZGUgYSBcIm5hbWVcIiBvciBcImlkXCIgZmllbGQuJyk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVzW2lkXSA9IGFzc2V0O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzO1xuXHQgIH1cblx0ICByZXR1cm4gYXNzZXRzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTWVyZ2UgdHdvIG9wdGlvbiBvYmplY3RzIGludG8gYSBuZXcgb25lLlxuXHQgKiBDb3JlIHV0aWxpdHkgdXNlZCBpbiBib3RoIGluc3RhbnRpYXRpb24gYW5kIGluaGVyaXRhbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gcGFyZW50XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjaGlsZFxuXHQgKiBAcGFyYW0ge1Z1ZX0gW3ZtXSAtIGlmIHZtIGlzIHByZXNlbnQsIGluZGljYXRlcyB0aGlzIGlzXG5cdCAqICAgICAgICAgICAgICAgICAgICAgYW4gaW5zdGFudGlhdGlvbiBtZXJnZS5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZCwgdm0pIHtcblx0ICBndWFyZENvbXBvbmVudHMoY2hpbGQpO1xuXHQgIGd1YXJkUHJvcHMoY2hpbGQpO1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBpZiAoY2hpbGQucHJvcHNEYXRhICYmICF2bSkge1xuXHQgICAgICB3YXJuKCdwcm9wc0RhdGEgY2FuIG9ubHkgYmUgdXNlZCBhcyBhbiBpbnN0YW50aWF0aW9uIG9wdGlvbi4nKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgdmFyIG9wdGlvbnMgPSB7fTtcblx0ICB2YXIga2V5O1xuXHQgIGlmIChjaGlsZFsnZXh0ZW5kcyddKSB7XG5cdCAgICBwYXJlbnQgPSB0eXBlb2YgY2hpbGRbJ2V4dGVuZHMnXSA9PT0gJ2Z1bmN0aW9uJyA/IG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkWydleHRlbmRzJ10ub3B0aW9ucywgdm0pIDogbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGRbJ2V4dGVuZHMnXSwgdm0pO1xuXHQgIH1cblx0ICBpZiAoY2hpbGQubWl4aW5zKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkLm1peGlucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIG1peGluID0gY2hpbGQubWl4aW5zW2ldO1xuXHQgICAgICB2YXIgbWl4aW5PcHRpb25zID0gbWl4aW4ucHJvdG90eXBlIGluc3RhbmNlb2YgVnVlID8gbWl4aW4ub3B0aW9ucyA6IG1peGluO1xuXHQgICAgICBwYXJlbnQgPSBtZXJnZU9wdGlvbnMocGFyZW50LCBtaXhpbk9wdGlvbnMsIHZtKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgZm9yIChrZXkgaW4gcGFyZW50KSB7XG5cdCAgICBtZXJnZUZpZWxkKGtleSk7XG5cdCAgfVxuXHQgIGZvciAoa2V5IGluIGNoaWxkKSB7XG5cdCAgICBpZiAoIWhhc093bihwYXJlbnQsIGtleSkpIHtcblx0ICAgICAgbWVyZ2VGaWVsZChrZXkpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmdW5jdGlvbiBtZXJnZUZpZWxkKGtleSkge1xuXHQgICAgdmFyIHN0cmF0ID0gc3RyYXRzW2tleV0gfHwgZGVmYXVsdFN0cmF0O1xuXHQgICAgb3B0aW9uc1trZXldID0gc3RyYXQocGFyZW50W2tleV0sIGNoaWxkW2tleV0sIHZtLCBrZXkpO1xuXHQgIH1cblx0ICByZXR1cm4gb3B0aW9ucztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlc29sdmUgYW4gYXNzZXQuXG5cdCAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBiZWNhdXNlIGNoaWxkIGluc3RhbmNlcyBuZWVkIGFjY2Vzc1xuXHQgKiB0byBhc3NldHMgZGVmaW5lZCBpbiBpdHMgYW5jZXN0b3IgY2hhaW4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHdhcm5NaXNzaW5nXG5cdCAqIEByZXR1cm4ge09iamVjdHxGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXNvbHZlQXNzZXQob3B0aW9ucywgdHlwZSwgaWQsIHdhcm5NaXNzaW5nKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKHR5cGVvZiBpZCAhPT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIGFzc2V0cyA9IG9wdGlvbnNbdHlwZV07XG5cdCAgdmFyIGNhbWVsaXplZElkO1xuXHQgIHZhciByZXMgPSBhc3NldHNbaWRdIHx8XG5cdCAgLy8gY2FtZWxDYXNlIElEXG5cdCAgYXNzZXRzW2NhbWVsaXplZElkID0gY2FtZWxpemUoaWQpXSB8fFxuXHQgIC8vIFBhc2NhbCBDYXNlIElEXG5cdCAgYXNzZXRzW2NhbWVsaXplZElkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWxpemVkSWQuc2xpY2UoMSldO1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm5NaXNzaW5nICYmICFyZXMpIHtcblx0ICAgIHdhcm4oJ0ZhaWxlZCB0byByZXNvbHZlICcgKyB0eXBlLnNsaWNlKDAsIC0xKSArICc6ICcgKyBpZCwgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdHZhciB1aWQkMSA9IDA7XG5cdFxuXHQvKipcblx0ICogQSBkZXAgaXMgYW4gb2JzZXJ2YWJsZSB0aGF0IGNhbiBoYXZlIG11bHRpcGxlXG5cdCAqIGRpcmVjdGl2ZXMgc3Vic2NyaWJpbmcgdG8gaXQuXG5cdCAqXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0ZnVuY3Rpb24gRGVwKCkge1xuXHQgIHRoaXMuaWQgPSB1aWQkMSsrO1xuXHQgIHRoaXMuc3VicyA9IFtdO1xuXHR9XG5cdFxuXHQvLyB0aGUgY3VycmVudCB0YXJnZXQgd2F0Y2hlciBiZWluZyBldmFsdWF0ZWQuXG5cdC8vIHRoaXMgaXMgZ2xvYmFsbHkgdW5pcXVlIGJlY2F1c2UgdGhlcmUgY291bGQgYmUgb25seSBvbmVcblx0Ly8gd2F0Y2hlciBiZWluZyBldmFsdWF0ZWQgYXQgYW55IHRpbWUuXG5cdERlcC50YXJnZXQgPSBudWxsO1xuXHRcblx0LyoqXG5cdCAqIEFkZCBhIGRpcmVjdGl2ZSBzdWJzY3JpYmVyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gc3ViXG5cdCAqL1xuXHRcblx0RGVwLnByb3RvdHlwZS5hZGRTdWIgPSBmdW5jdGlvbiAoc3ViKSB7XG5cdCAgdGhpcy5zdWJzLnB1c2goc3ViKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgYSBkaXJlY3RpdmUgc3Vic2NyaWJlci5cblx0ICpcblx0ICogQHBhcmFtIHtEaXJlY3RpdmV9IHN1YlxuXHQgKi9cblx0XG5cdERlcC5wcm90b3R5cGUucmVtb3ZlU3ViID0gZnVuY3Rpb24gKHN1Yikge1xuXHQgIHRoaXMuc3Vicy4kcmVtb3ZlKHN1Yik7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQWRkIHNlbGYgYXMgYSBkZXBlbmRlbmN5IHRvIHRoZSB0YXJnZXQgd2F0Y2hlci5cblx0ICovXG5cdFxuXHREZXAucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uICgpIHtcblx0ICBEZXAudGFyZ2V0LmFkZERlcCh0aGlzKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBOb3RpZnkgYWxsIHN1YnNjcmliZXJzIG9mIGEgbmV3IHZhbHVlLlxuXHQgKi9cblx0XG5cdERlcC5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gKCkge1xuXHQgIC8vIHN0YWJsaXplIHRoZSBzdWJzY3JpYmVyIGxpc3QgZmlyc3Rcblx0ICB2YXIgc3VicyA9IHRvQXJyYXkodGhpcy5zdWJzKTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IHN1YnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBzdWJzW2ldLnVwZGF0ZSgpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xuXHR2YXIgYXJyYXlNZXRob2RzID0gT2JqZWN0LmNyZWF0ZShhcnJheVByb3RvKVxuXHRcblx0LyoqXG5cdCAqIEludGVyY2VwdCBtdXRhdGluZyBtZXRob2RzIGFuZCBlbWl0IGV2ZW50c1xuXHQgKi9cblx0XG5cdDtbJ3B1c2gnLCAncG9wJywgJ3NoaWZ0JywgJ3Vuc2hpZnQnLCAnc3BsaWNlJywgJ3NvcnQnLCAncmV2ZXJzZSddLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkge1xuXHQgIC8vIGNhY2hlIG9yaWdpbmFsIG1ldGhvZFxuXHQgIHZhciBvcmlnaW5hbCA9IGFycmF5UHJvdG9bbWV0aG9kXTtcblx0ICBkZWYoYXJyYXlNZXRob2RzLCBtZXRob2QsIGZ1bmN0aW9uIG11dGF0b3IoKSB7XG5cdCAgICAvLyBhdm9pZCBsZWFraW5nIGFyZ3VtZW50czpcblx0ICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL2Nsb3N1cmUtd2l0aC1hcmd1bWVudHNcblx0ICAgIHZhciBpID0gYXJndW1lbnRzLmxlbmd0aDtcblx0ICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGkpO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuXHQgICAgfVxuXHQgICAgdmFyIHJlc3VsdCA9IG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgdmFyIG9iID0gdGhpcy5fX29iX187XG5cdCAgICB2YXIgaW5zZXJ0ZWQ7XG5cdCAgICBzd2l0Y2ggKG1ldGhvZCkge1xuXHQgICAgICBjYXNlICdwdXNoJzpcblx0ICAgICAgICBpbnNlcnRlZCA9IGFyZ3M7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ3Vuc2hpZnQnOlxuXHQgICAgICAgIGluc2VydGVkID0gYXJncztcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAnc3BsaWNlJzpcblx0ICAgICAgICBpbnNlcnRlZCA9IGFyZ3Muc2xpY2UoMik7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdCAgICBpZiAoaW5zZXJ0ZWQpIG9iLm9ic2VydmVBcnJheShpbnNlcnRlZCk7XG5cdCAgICAvLyBub3RpZnkgY2hhbmdlXG5cdCAgICBvYi5kZXAubm90aWZ5KCk7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH0pO1xuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBTd2FwIHRoZSBlbGVtZW50IGF0IHRoZSBnaXZlbiBpbmRleCB3aXRoIGEgbmV3IHZhbHVlXG5cdCAqIGFuZCBlbWl0cyBjb3JyZXNwb25kaW5nIGV2ZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICogQHJldHVybiB7Kn0gLSByZXBsYWNlZCBlbGVtZW50XG5cdCAqL1xuXHRcblx0ZGVmKGFycmF5UHJvdG8sICckc2V0JywgZnVuY3Rpb24gJHNldChpbmRleCwgdmFsKSB7XG5cdCAgaWYgKGluZGV4ID49IHRoaXMubGVuZ3RoKSB7XG5cdCAgICB0aGlzLmxlbmd0aCA9IE51bWJlcihpbmRleCkgKyAxO1xuXHQgIH1cblx0ICByZXR1cm4gdGhpcy5zcGxpY2UoaW5kZXgsIDEsIHZhbClbMF07XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlbmllbmNlIG1ldGhvZCB0byByZW1vdmUgdGhlIGVsZW1lbnQgYXQgZ2l2ZW4gaW5kZXggb3IgdGFyZ2V0IGVsZW1lbnQgcmVmZXJlbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IGl0ZW1cblx0ICovXG5cdFxuXHRkZWYoYXJyYXlQcm90bywgJyRyZW1vdmUnLCBmdW5jdGlvbiAkcmVtb3ZlKGl0ZW0pIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoIXRoaXMubGVuZ3RoKSByZXR1cm47XG5cdCAgdmFyIGluZGV4ID0gaW5kZXhPZih0aGlzLCBpdGVtKTtcblx0ICBpZiAoaW5kZXggPiAtMSkge1xuXHQgICAgcmV0dXJuIHRoaXMuc3BsaWNlKGluZGV4LCAxKTtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIGFycmF5S2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGFycmF5TWV0aG9kcyk7XG5cdFxuXHQvKipcblx0ICogQnkgZGVmYXVsdCwgd2hlbiBhIHJlYWN0aXZlIHByb3BlcnR5IGlzIHNldCwgdGhlIG5ldyB2YWx1ZSBpc1xuXHQgKiBhbHNvIGNvbnZlcnRlZCB0byBiZWNvbWUgcmVhY3RpdmUuIEhvd2V2ZXIgaW4gY2VydGFpbiBjYXNlcywgZS5nLlxuXHQgKiB2LWZvciBzY29wZSBhbGlhcyBhbmQgcHJvcHMsIHdlIGRvbid0IHdhbnQgdG8gZm9yY2UgY29udmVyc2lvblxuXHQgKiBiZWNhdXNlIHRoZSB2YWx1ZSBtYXkgYmUgYSBuZXN0ZWQgdmFsdWUgdW5kZXIgYSBmcm96ZW4gZGF0YSBzdHJ1Y3R1cmUuXG5cdCAqXG5cdCAqIFNvIHdoZW5ldmVyIHdlIHdhbnQgdG8gc2V0IGEgcmVhY3RpdmUgcHJvcGVydHkgd2l0aG91dCBmb3JjaW5nXG5cdCAqIGNvbnZlcnNpb24gb24gdGhlIG5ldyB2YWx1ZSwgd2Ugd3JhcCB0aGF0IGNhbGwgaW5zaWRlIHRoaXMgZnVuY3Rpb24uXG5cdCAqL1xuXHRcblx0dmFyIHNob3VsZENvbnZlcnQgPSB0cnVlO1xuXHRcblx0ZnVuY3Rpb24gd2l0aG91dENvbnZlcnNpb24oZm4pIHtcblx0ICBzaG91bGRDb252ZXJ0ID0gZmFsc2U7XG5cdCAgZm4oKTtcblx0ICBzaG91bGRDb252ZXJ0ID0gdHJ1ZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIE9ic2VydmVyIGNsYXNzIHRoYXQgYXJlIGF0dGFjaGVkIHRvIGVhY2ggb2JzZXJ2ZWRcblx0ICogb2JqZWN0LiBPbmNlIGF0dGFjaGVkLCB0aGUgb2JzZXJ2ZXIgY29udmVydHMgdGFyZ2V0XG5cdCAqIG9iamVjdCdzIHByb3BlcnR5IGtleXMgaW50byBnZXR0ZXIvc2V0dGVycyB0aGF0XG5cdCAqIGNvbGxlY3QgZGVwZW5kZW5jaWVzIGFuZCBkaXNwYXRjaGVzIHVwZGF0ZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSB2YWx1ZVxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBPYnNlcnZlcih2YWx1ZSkge1xuXHQgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICB0aGlzLmRlcCA9IG5ldyBEZXAoKTtcblx0ICBkZWYodmFsdWUsICdfX29iX18nLCB0aGlzKTtcblx0ICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgIHZhciBhdWdtZW50ID0gaGFzUHJvdG8gPyBwcm90b0F1Z21lbnQgOiBjb3B5QXVnbWVudDtcblx0ICAgIGF1Z21lbnQodmFsdWUsIGFycmF5TWV0aG9kcywgYXJyYXlLZXlzKTtcblx0ICAgIHRoaXMub2JzZXJ2ZUFycmF5KHZhbHVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhpcy53YWxrKHZhbHVlKTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIEluc3RhbmNlIG1ldGhvZHNcblx0XG5cdC8qKlxuXHQgKiBXYWxrIHRocm91Z2ggZWFjaCBwcm9wZXJ0eSBhbmQgY29udmVydCB0aGVtIGludG9cblx0ICogZ2V0dGVyL3NldHRlcnMuIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCB3aGVuXG5cdCAqIHZhbHVlIHR5cGUgaXMgT2JqZWN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqL1xuXHRcblx0T2JzZXJ2ZXIucHJvdG90eXBlLndhbGsgPSBmdW5jdGlvbiAob2JqKSB7XG5cdCAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHRoaXMuY29udmVydChrZXlzW2ldLCBvYmpba2V5c1tpXV0pO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBPYnNlcnZlIGEgbGlzdCBvZiBBcnJheSBpdGVtcy5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gaXRlbXNcblx0ICovXG5cdFxuXHRPYnNlcnZlci5wcm90b3R5cGUub2JzZXJ2ZUFycmF5ID0gZnVuY3Rpb24gKGl0ZW1zKSB7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBpdGVtcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIG9ic2VydmUoaXRlbXNbaV0pO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IGEgcHJvcGVydHkgaW50byBnZXR0ZXIvc2V0dGVyIHNvIHdlIGNhbiBlbWl0XG5cdCAqIHRoZSBldmVudHMgd2hlbiB0aGUgcHJvcGVydHkgaXMgYWNjZXNzZWQvY2hhbmdlZC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKi9cblx0XG5cdE9ic2VydmVyLnByb3RvdHlwZS5jb252ZXJ0ID0gZnVuY3Rpb24gKGtleSwgdmFsKSB7XG5cdCAgZGVmaW5lUmVhY3RpdmUodGhpcy52YWx1ZSwga2V5LCB2YWwpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEFkZCBhbiBvd25lciB2bSwgc28gdGhhdCB3aGVuICRzZXQvJGRlbGV0ZSBtdXRhdGlvbnNcblx0ICogaGFwcGVuIHdlIGNhbiBub3RpZnkgb3duZXIgdm1zIHRvIHByb3h5IHRoZSBrZXlzIGFuZFxuXHQgKiBkaWdlc3QgdGhlIHdhdGNoZXJzLiBUaGlzIGlzIG9ubHkgY2FsbGVkIHdoZW4gdGhlIG9iamVjdFxuXHQgKiBpcyBvYnNlcnZlZCBhcyBhbiBpbnN0YW5jZSdzIHJvb3QgJGRhdGEuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0XG5cdE9ic2VydmVyLnByb3RvdHlwZS5hZGRWbSA9IGZ1bmN0aW9uICh2bSkge1xuXHQgICh0aGlzLnZtcyB8fCAodGhpcy52bXMgPSBbXSkpLnB1c2godm0pO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBhbiBvd25lciB2bS4gVGhpcyBpcyBjYWxsZWQgd2hlbiB0aGUgb2JqZWN0IGlzXG5cdCAqIHN3YXBwZWQgb3V0IGFzIGFuIGluc3RhbmNlJ3MgJGRhdGEgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICovXG5cdFxuXHRPYnNlcnZlci5wcm90b3R5cGUucmVtb3ZlVm0gPSBmdW5jdGlvbiAodm0pIHtcblx0ICB0aGlzLnZtcy4kcmVtb3ZlKHZtKTtcblx0fTtcblx0XG5cdC8vIGhlbHBlcnNcblx0XG5cdC8qKlxuXHQgKiBBdWdtZW50IGFuIHRhcmdldCBPYmplY3Qgb3IgQXJyYXkgYnkgaW50ZXJjZXB0aW5nXG5cdCAqIHRoZSBwcm90b3R5cGUgY2hhaW4gdXNpbmcgX19wcm90b19fXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSB0YXJnZXRcblx0ICogQHBhcmFtIHtPYmplY3R9IHNyY1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByb3RvQXVnbWVudCh0YXJnZXQsIHNyYykge1xuXHQgIC8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cdCAgdGFyZ2V0Ll9fcHJvdG9fXyA9IHNyYztcblx0ICAvKiBlc2xpbnQtZW5hYmxlIG5vLXByb3RvICovXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBdWdtZW50IGFuIHRhcmdldCBPYmplY3Qgb3IgQXJyYXkgYnkgZGVmaW5pbmdcblx0ICogaGlkZGVuIHByb3BlcnRpZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSB0YXJnZXRcblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3RvXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29weUF1Z21lbnQodGFyZ2V0LCBzcmMsIGtleXMpIHtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICB2YXIga2V5ID0ga2V5c1tpXTtcblx0ICAgIGRlZih0YXJnZXQsIGtleSwgc3JjW2tleV0pO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEF0dGVtcHQgdG8gY3JlYXRlIGFuIG9ic2VydmVyIGluc3RhbmNlIGZvciBhIHZhbHVlLFxuXHQgKiByZXR1cm5zIHRoZSBuZXcgb2JzZXJ2ZXIgaWYgc3VjY2Vzc2Z1bGx5IG9ic2VydmVkLFxuXHQgKiBvciB0aGUgZXhpc3Rpbmcgb2JzZXJ2ZXIgaWYgdGhlIHZhbHVlIGFscmVhZHkgaGFzIG9uZS5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuXHQgKiBAcmV0dXJuIHtPYnNlcnZlcnx1bmRlZmluZWR9XG5cdCAqIEBzdGF0aWNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBvYnNlcnZlKHZhbHVlLCB2bSkge1xuXHQgIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0Jykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgb2I7XG5cdCAgaWYgKGhhc093bih2YWx1ZSwgJ19fb2JfXycpICYmIHZhbHVlLl9fb2JfXyBpbnN0YW5jZW9mIE9ic2VydmVyKSB7XG5cdCAgICBvYiA9IHZhbHVlLl9fb2JfXztcblx0ICB9IGVsc2UgaWYgKHNob3VsZENvbnZlcnQgJiYgKGlzQXJyYXkodmFsdWUpIHx8IGlzUGxhaW5PYmplY3QodmFsdWUpKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSAmJiAhdmFsdWUuX2lzVnVlKSB7XG5cdCAgICBvYiA9IG5ldyBPYnNlcnZlcih2YWx1ZSk7XG5cdCAgfVxuXHQgIGlmIChvYiAmJiB2bSkge1xuXHQgICAgb2IuYWRkVm0odm0pO1xuXHQgIH1cblx0ICByZXR1cm4gb2I7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZWZpbmUgYSByZWFjdGl2ZSBwcm9wZXJ0eSBvbiBhbiBPYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGRlZmluZVJlYWN0aXZlKG9iaiwga2V5LCB2YWwpIHtcblx0ICB2YXIgZGVwID0gbmV3IERlcCgpO1xuXHRcblx0ICB2YXIgcHJvcGVydHkgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KTtcblx0ICBpZiAocHJvcGVydHkgJiYgcHJvcGVydHkuY29uZmlndXJhYmxlID09PSBmYWxzZSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0XG5cdCAgLy8gY2F0ZXIgZm9yIHByZS1kZWZpbmVkIGdldHRlci9zZXR0ZXJzXG5cdCAgdmFyIGdldHRlciA9IHByb3BlcnR5ICYmIHByb3BlcnR5LmdldDtcblx0ICB2YXIgc2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuc2V0O1xuXHRcblx0ICB2YXIgY2hpbGRPYiA9IG9ic2VydmUodmFsKTtcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcblx0ICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlR2V0dGVyKCkge1xuXHQgICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogdmFsO1xuXHQgICAgICBpZiAoRGVwLnRhcmdldCkge1xuXHQgICAgICAgIGRlcC5kZXBlbmQoKTtcblx0ICAgICAgICBpZiAoY2hpbGRPYikge1xuXHQgICAgICAgICAgY2hpbGRPYi5kZXAuZGVwZW5kKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgICAgICAgZm9yICh2YXIgZSwgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICAgICAgZSA9IHZhbHVlW2ldO1xuXHQgICAgICAgICAgICBlICYmIGUuX19vYl9fICYmIGUuX19vYl9fLmRlcC5kZXBlbmQoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHZhbHVlO1xuXHQgICAgfSxcblx0ICAgIHNldDogZnVuY3Rpb24gcmVhY3RpdmVTZXR0ZXIobmV3VmFsKSB7XG5cdCAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7XG5cdCAgICAgIGlmIChuZXdWYWwgPT09IHZhbHVlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChzZXR0ZXIpIHtcblx0ICAgICAgICBzZXR0ZXIuY2FsbChvYmosIG5ld1ZhbCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdmFsID0gbmV3VmFsO1xuXHQgICAgICB9XG5cdCAgICAgIGNoaWxkT2IgPSBvYnNlcnZlKG5ld1ZhbCk7XG5cdCAgICAgIGRlcC5ub3RpZnkoKTtcblx0ICAgIH1cblx0ICB9KTtcblx0fVxuXHRcblx0XG5cdFxuXHR2YXIgdXRpbCA9IE9iamVjdC5mcmVlemUoe1xuXHRcdGRlZmluZVJlYWN0aXZlOiBkZWZpbmVSZWFjdGl2ZSxcblx0XHRzZXQ6IHNldCxcblx0XHRkZWw6IGRlbCxcblx0XHRoYXNPd246IGhhc093bixcblx0XHRpc0xpdGVyYWw6IGlzTGl0ZXJhbCxcblx0XHRpc1Jlc2VydmVkOiBpc1Jlc2VydmVkLFxuXHRcdF90b1N0cmluZzogX3RvU3RyaW5nLFxuXHRcdHRvTnVtYmVyOiB0b051bWJlcixcblx0XHR0b0Jvb2xlYW46IHRvQm9vbGVhbixcblx0XHRzdHJpcFF1b3Rlczogc3RyaXBRdW90ZXMsXG5cdFx0Y2FtZWxpemU6IGNhbWVsaXplLFxuXHRcdGh5cGhlbmF0ZTogaHlwaGVuYXRlLFxuXHRcdGNsYXNzaWZ5OiBjbGFzc2lmeSxcblx0XHRiaW5kOiBiaW5kLFxuXHRcdHRvQXJyYXk6IHRvQXJyYXksXG5cdFx0ZXh0ZW5kOiBleHRlbmQsXG5cdFx0aXNPYmplY3Q6IGlzT2JqZWN0LFxuXHRcdGlzUGxhaW5PYmplY3Q6IGlzUGxhaW5PYmplY3QsXG5cdFx0ZGVmOiBkZWYsXG5cdFx0ZGVib3VuY2U6IF9kZWJvdW5jZSxcblx0XHRpbmRleE9mOiBpbmRleE9mLFxuXHRcdGNhbmNlbGxhYmxlOiBjYW5jZWxsYWJsZSxcblx0XHRsb29zZUVxdWFsOiBsb29zZUVxdWFsLFxuXHRcdGlzQXJyYXk6IGlzQXJyYXksXG5cdFx0aGFzUHJvdG86IGhhc1Byb3RvLFxuXHRcdGluQnJvd3NlcjogaW5Ccm93c2VyLFxuXHRcdGRldnRvb2xzOiBkZXZ0b29scyxcblx0XHRpc0lFOiBpc0lFLFxuXHRcdGlzSUU5OiBpc0lFOSxcblx0XHRpc0FuZHJvaWQ6IGlzQW5kcm9pZCxcblx0XHRpc0lvczogaXNJb3MsXG5cdFx0aW9zVmVyc2lvbk1hdGNoOiBpb3NWZXJzaW9uTWF0Y2gsXG5cdFx0aW9zVmVyc2lvbjogaW9zVmVyc2lvbixcblx0XHRoYXNNdXRhdGlvbk9ic2VydmVyQnVnOiBoYXNNdXRhdGlvbk9ic2VydmVyQnVnLFxuXHRcdGdldCB0cmFuc2l0aW9uUHJvcCAoKSB7IHJldHVybiB0cmFuc2l0aW9uUHJvcDsgfSxcblx0XHRnZXQgdHJhbnNpdGlvbkVuZEV2ZW50ICgpIHsgcmV0dXJuIHRyYW5zaXRpb25FbmRFdmVudDsgfSxcblx0XHRnZXQgYW5pbWF0aW9uUHJvcCAoKSB7IHJldHVybiBhbmltYXRpb25Qcm9wOyB9LFxuXHRcdGdldCBhbmltYXRpb25FbmRFdmVudCAoKSB7IHJldHVybiBhbmltYXRpb25FbmRFdmVudDsgfSxcblx0XHRuZXh0VGljazogbmV4dFRpY2ssXG5cdFx0Z2V0IF9TZXQgKCkgeyByZXR1cm4gX1NldDsgfSxcblx0XHRxdWVyeTogcXVlcnksXG5cdFx0aW5Eb2M6IGluRG9jLFxuXHRcdGdldEF0dHI6IGdldEF0dHIsXG5cdFx0Z2V0QmluZEF0dHI6IGdldEJpbmRBdHRyLFxuXHRcdGhhc0JpbmRBdHRyOiBoYXNCaW5kQXR0cixcblx0XHRiZWZvcmU6IGJlZm9yZSxcblx0XHRhZnRlcjogYWZ0ZXIsXG5cdFx0cmVtb3ZlOiByZW1vdmUsXG5cdFx0cHJlcGVuZDogcHJlcGVuZCxcblx0XHRyZXBsYWNlOiByZXBsYWNlLFxuXHRcdG9uOiBvbixcblx0XHRvZmY6IG9mZixcblx0XHRzZXRDbGFzczogc2V0Q2xhc3MsXG5cdFx0YWRkQ2xhc3M6IGFkZENsYXNzLFxuXHRcdHJlbW92ZUNsYXNzOiByZW1vdmVDbGFzcyxcblx0XHRleHRyYWN0Q29udGVudDogZXh0cmFjdENvbnRlbnQsXG5cdFx0dHJpbU5vZGU6IHRyaW1Ob2RlLFxuXHRcdGlzVGVtcGxhdGU6IGlzVGVtcGxhdGUsXG5cdFx0Y3JlYXRlQW5jaG9yOiBjcmVhdGVBbmNob3IsXG5cdFx0ZmluZFJlZjogZmluZFJlZixcblx0XHRtYXBOb2RlUmFuZ2U6IG1hcE5vZGVSYW5nZSxcblx0XHRyZW1vdmVOb2RlUmFuZ2U6IHJlbW92ZU5vZGVSYW5nZSxcblx0XHRpc0ZyYWdtZW50OiBpc0ZyYWdtZW50LFxuXHRcdGdldE91dGVySFRNTDogZ2V0T3V0ZXJIVE1MLFxuXHRcdG1lcmdlT3B0aW9uczogbWVyZ2VPcHRpb25zLFxuXHRcdHJlc29sdmVBc3NldDogcmVzb2x2ZUFzc2V0LFxuXHRcdGNoZWNrQ29tcG9uZW50QXR0cjogY2hlY2tDb21wb25lbnRBdHRyLFxuXHRcdGNvbW1vblRhZ1JFOiBjb21tb25UYWdSRSxcblx0XHRyZXNlcnZlZFRhZ1JFOiByZXNlcnZlZFRhZ1JFLFxuXHRcdGdldCB3YXJuICgpIHsgcmV0dXJuIHdhcm47IH1cblx0fSk7XG5cdFxuXHR2YXIgdWlkID0gMDtcblx0XG5cdGZ1bmN0aW9uIGluaXRNaXhpbiAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogVGhlIG1haW4gaW5pdCBzZXF1ZW5jZS4gVGhpcyBpcyBjYWxsZWQgZm9yIGV2ZXJ5XG5cdCAgICogaW5zdGFuY2UsIGluY2x1ZGluZyBvbmVzIHRoYXQgYXJlIGNyZWF0ZWQgZnJvbSBleHRlbmRlZFxuXHQgICAqIGNvbnN0cnVjdG9ycy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gdGhpcyBvcHRpb25zIG9iamVjdCBzaG91bGQgYmVcblx0ICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSByZXN1bHQgb2YgbWVyZ2luZyBjbGFzc1xuXHQgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyBhbmQgdGhlIG9wdGlvbnMgcGFzc2VkXG5cdCAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBpbiB0byB0aGUgY29uc3RydWN0b3IuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuXHQgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFxuXHQgICAgdGhpcy4kZWwgPSBudWxsO1xuXHQgICAgdGhpcy4kcGFyZW50ID0gb3B0aW9ucy5wYXJlbnQ7XG5cdCAgICB0aGlzLiRyb290ID0gdGhpcy4kcGFyZW50ID8gdGhpcy4kcGFyZW50LiRyb290IDogdGhpcztcblx0ICAgIHRoaXMuJGNoaWxkcmVuID0gW107XG5cdCAgICB0aGlzLiRyZWZzID0ge307IC8vIGNoaWxkIHZtIHJlZmVyZW5jZXNcblx0ICAgIHRoaXMuJGVscyA9IHt9OyAvLyBlbGVtZW50IHJlZmVyZW5jZXNcblx0ICAgIHRoaXMuX3dhdGNoZXJzID0gW107IC8vIGFsbCB3YXRjaGVycyBhcyBhbiBhcnJheVxuXHQgICAgdGhpcy5fZGlyZWN0aXZlcyA9IFtdOyAvLyBhbGwgZGlyZWN0aXZlc1xuXHRcblx0ICAgIC8vIGEgdWlkXG5cdCAgICB0aGlzLl91aWQgPSB1aWQrKztcblx0XG5cdCAgICAvLyBhIGZsYWcgdG8gYXZvaWQgdGhpcyBiZWluZyBvYnNlcnZlZFxuXHQgICAgdGhpcy5faXNWdWUgPSB0cnVlO1xuXHRcblx0ICAgIC8vIGV2ZW50cyBib29ra2VlcGluZ1xuXHQgICAgdGhpcy5fZXZlbnRzID0ge307IC8vIHJlZ2lzdGVyZWQgY2FsbGJhY2tzXG5cdCAgICB0aGlzLl9ldmVudHNDb3VudCA9IHt9OyAvLyBmb3IgJGJyb2FkY2FzdCBvcHRpbWl6YXRpb25cblx0XG5cdCAgICAvLyBmcmFnbWVudCBpbnN0YW5jZSBwcm9wZXJ0aWVzXG5cdCAgICB0aGlzLl9pc0ZyYWdtZW50ID0gZmFsc2U7XG5cdCAgICB0aGlzLl9mcmFnbWVudCA9IC8vIEB0eXBlIHtEb2N1bWVudEZyYWdtZW50fVxuXHQgICAgdGhpcy5fZnJhZ21lbnRTdGFydCA9IC8vIEB0eXBlIHtUZXh0fENvbW1lbnR9XG5cdCAgICB0aGlzLl9mcmFnbWVudEVuZCA9IG51bGw7IC8vIEB0eXBlIHtUZXh0fENvbW1lbnR9XG5cdFxuXHQgICAgLy8gbGlmZWN5Y2xlIHN0YXRlXG5cdCAgICB0aGlzLl9pc0NvbXBpbGVkID0gdGhpcy5faXNEZXN0cm95ZWQgPSB0aGlzLl9pc1JlYWR5ID0gdGhpcy5faXNBdHRhY2hlZCA9IHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgPSB0aGlzLl92Rm9yUmVtb3ZpbmcgPSBmYWxzZTtcblx0ICAgIHRoaXMuX3VubGlua0ZuID0gbnVsbDtcblx0XG5cdCAgICAvLyBjb250ZXh0OlxuXHQgICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgY29udGV4dFxuXHQgICAgLy8gd2lsbCBiZSB0aGUgY29tbW9uIHBhcmVudCB2bSBvZiB0aGlzIGluc3RhbmNlXG5cdCAgICAvLyBhbmQgaXRzIGhvc3QuXG5cdCAgICB0aGlzLl9jb250ZXh0ID0gb3B0aW9ucy5fY29udGV4dCB8fCB0aGlzLiRwYXJlbnQ7XG5cdFxuXHQgICAgLy8gc2NvcGU6XG5cdCAgICAvLyBpZiB0aGlzIGlzIGluc2lkZSBhbiBpbmxpbmUgdi1mb3IsIHRoZSBzY29wZVxuXHQgICAgLy8gd2lsbCBiZSB0aGUgaW50ZXJtZWRpYXRlIHNjb3BlIGNyZWF0ZWQgZm9yIHRoaXNcblx0ICAgIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXG5cdCAgICAvLyBhbmQgY29udGFpbmVyIGRpcmVjdGl2ZXMuXG5cdCAgICB0aGlzLl9zY29wZSA9IG9wdGlvbnMuX3Njb3BlO1xuXHRcblx0ICAgIC8vIGZyYWdtZW50OlxuXHQgICAgLy8gaWYgdGhpcyBpbnN0YW5jZSBpcyBjb21waWxlZCBpbnNpZGUgYSBGcmFnbWVudCwgaXRcblx0ICAgIC8vIG5lZWRzIHRvIHJlaWdzdGVyIGl0c2VsZiBhcyBhIGNoaWxkIG9mIHRoYXQgZnJhZ21lbnRcblx0ICAgIC8vIGZvciBhdHRhY2gvZGV0YWNoIHRvIHdvcmsgcHJvcGVybHkuXG5cdCAgICB0aGlzLl9mcmFnID0gb3B0aW9ucy5fZnJhZztcblx0ICAgIGlmICh0aGlzLl9mcmFnKSB7XG5cdCAgICAgIHRoaXMuX2ZyYWcuY2hpbGRyZW4ucHVzaCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBwdXNoIHNlbGYgaW50byBwYXJlbnQgLyB0cmFuc2NsdXNpb24gaG9zdFxuXHQgICAgaWYgKHRoaXMuJHBhcmVudCkge1xuXHQgICAgICB0aGlzLiRwYXJlbnQuJGNoaWxkcmVuLnB1c2godGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gbWVyZ2Ugb3B0aW9ucy5cblx0ICAgIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zID0gbWVyZ2VPcHRpb25zKHRoaXMuY29uc3RydWN0b3Iub3B0aW9ucywgb3B0aW9ucywgdGhpcyk7XG5cdFxuXHQgICAgLy8gc2V0IHJlZlxuXHQgICAgdGhpcy5fdXBkYXRlUmVmKCk7XG5cdFxuXHQgICAgLy8gaW5pdGlhbGl6ZSBkYXRhIGFzIGVtcHR5IG9iamVjdC5cblx0ICAgIC8vIGl0IHdpbGwgYmUgZmlsbGVkIHVwIGluIF9pbml0RGF0YSgpLlxuXHQgICAgdGhpcy5fZGF0YSA9IHt9O1xuXHRcblx0ICAgIC8vIGNhbGwgaW5pdCBob29rXG5cdCAgICB0aGlzLl9jYWxsSG9vaygnaW5pdCcpO1xuXHRcblx0ICAgIC8vIGluaXRpYWxpemUgZGF0YSBvYnNlcnZhdGlvbiBhbmQgc2NvcGUgaW5oZXJpdGFuY2UuXG5cdCAgICB0aGlzLl9pbml0U3RhdGUoKTtcblx0XG5cdCAgICAvLyBzZXR1cCBldmVudCBzeXN0ZW0gYW5kIG9wdGlvbiBldmVudHMuXG5cdCAgICB0aGlzLl9pbml0RXZlbnRzKCk7XG5cdFxuXHQgICAgLy8gY2FsbCBjcmVhdGVkIGhvb2tcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdjcmVhdGVkJyk7XG5cdFxuXHQgICAgLy8gaWYgYGVsYCBvcHRpb24gaXMgcGFzc2VkLCBzdGFydCBjb21waWxhdGlvbi5cblx0ICAgIGlmIChvcHRpb25zLmVsKSB7XG5cdCAgICAgIHRoaXMuJG1vdW50KG9wdGlvbnMuZWwpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdHZhciBwYXRoQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cdFxuXHQvLyBhY3Rpb25zXG5cdHZhciBBUFBFTkQgPSAwO1xuXHR2YXIgUFVTSCA9IDE7XG5cdHZhciBJTkNfU1VCX1BBVEhfREVQVEggPSAyO1xuXHR2YXIgUFVTSF9TVUJfUEFUSCA9IDM7XG5cdFxuXHQvLyBzdGF0ZXNcblx0dmFyIEJFRk9SRV9QQVRIID0gMDtcblx0dmFyIElOX1BBVEggPSAxO1xuXHR2YXIgQkVGT1JFX0lERU5UID0gMjtcblx0dmFyIElOX0lERU5UID0gMztcblx0dmFyIElOX1NVQl9QQVRIID0gNDtcblx0dmFyIElOX1NJTkdMRV9RVU9URSA9IDU7XG5cdHZhciBJTl9ET1VCTEVfUVVPVEUgPSA2O1xuXHR2YXIgQUZURVJfUEFUSCA9IDc7XG5cdHZhciBFUlJPUiA9IDg7XG5cdFxuXHR2YXIgcGF0aFN0YXRlTWFjaGluZSA9IFtdO1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtCRUZPUkVfUEFUSF0gPSB7XG5cdCAgJ3dzJzogW0JFRk9SRV9QQVRIXSxcblx0ICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sXG5cdCAgJ1snOiBbSU5fU1VCX1BBVEhdLFxuXHQgICdlb2YnOiBbQUZURVJfUEFUSF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbSU5fUEFUSF0gPSB7XG5cdCAgJ3dzJzogW0lOX1BBVEhdLFxuXHQgICcuJzogW0JFRk9SRV9JREVOVF0sXG5cdCAgJ1snOiBbSU5fU1VCX1BBVEhdLFxuXHQgICdlb2YnOiBbQUZURVJfUEFUSF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbQkVGT1JFX0lERU5UXSA9IHtcblx0ICAnd3MnOiBbQkVGT1JFX0lERU5UXSxcblx0ICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbSU5fSURFTlRdID0ge1xuXHQgICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcblx0ICAnMCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcblx0ICAnbnVtYmVyJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuXHQgICd3cyc6IFtJTl9QQVRILCBQVVNIXSxcblx0ICAnLic6IFtCRUZPUkVfSURFTlQsIFBVU0hdLFxuXHQgICdbJzogW0lOX1NVQl9QQVRILCBQVVNIXSxcblx0ICAnZW9mJzogW0FGVEVSX1BBVEgsIFBVU0hdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0lOX1NVQl9QQVRIXSA9IHtcblx0ICBcIidcIjogW0lOX1NJTkdMRV9RVU9URSwgQVBQRU5EXSxcblx0ICAnXCInOiBbSU5fRE9VQkxFX1FVT1RFLCBBUFBFTkRdLFxuXHQgICdbJzogW0lOX1NVQl9QQVRILCBJTkNfU1VCX1BBVEhfREVQVEhdLFxuXHQgICddJzogW0lOX1BBVEgsIFBVU0hfU1VCX1BBVEhdLFxuXHQgICdlb2YnOiBFUlJPUixcblx0ICAnZWxzZSc6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtJTl9TSU5HTEVfUVVPVEVdID0ge1xuXHQgIFwiJ1wiOiBbSU5fU1VCX1BBVEgsIEFQUEVORF0sXG5cdCAgJ2VvZic6IEVSUk9SLFxuXHQgICdlbHNlJzogW0lOX1NJTkdMRV9RVU9URSwgQVBQRU5EXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtJTl9ET1VCTEVfUVVPVEVdID0ge1xuXHQgICdcIic6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXSxcblx0ICAnZW9mJzogRVJST1IsXG5cdCAgJ2Vsc2UnOiBbSU5fRE9VQkxFX1FVT1RFLCBBUFBFTkRdXG5cdH07XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIHRoZSB0eXBlIG9mIGEgY2hhcmFjdGVyIGluIGEga2V5cGF0aC5cblx0ICpcblx0ICogQHBhcmFtIHtDaGFyfSBjaFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9IHR5cGVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRQYXRoQ2hhclR5cGUoY2gpIHtcblx0ICBpZiAoY2ggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICdlb2YnO1xuXHQgIH1cblx0XG5cdCAgdmFyIGNvZGUgPSBjaC5jaGFyQ29kZUF0KDApO1xuXHRcblx0ICBzd2l0Y2ggKGNvZGUpIHtcblx0ICAgIGNhc2UgMHg1QjogLy8gW1xuXHQgICAgY2FzZSAweDVEOiAvLyBdXG5cdCAgICBjYXNlIDB4MkU6IC8vIC5cblx0ICAgIGNhc2UgMHgyMjogLy8gXCJcblx0ICAgIGNhc2UgMHgyNzogLy8gJ1xuXHQgICAgY2FzZSAweDMwOlxuXHQgICAgICAvLyAwXG5cdCAgICAgIHJldHVybiBjaDtcblx0XG5cdCAgICBjYXNlIDB4NUY6IC8vIF9cblx0ICAgIGNhc2UgMHgyNDpcblx0ICAgICAgLy8gJFxuXHQgICAgICByZXR1cm4gJ2lkZW50Jztcblx0XG5cdCAgICBjYXNlIDB4MjA6IC8vIFNwYWNlXG5cdCAgICBjYXNlIDB4MDk6IC8vIFRhYlxuXHQgICAgY2FzZSAweDBBOiAvLyBOZXdsaW5lXG5cdCAgICBjYXNlIDB4MEQ6IC8vIFJldHVyblxuXHQgICAgY2FzZSAweEEwOiAvLyBOby1icmVhayBzcGFjZVxuXHQgICAgY2FzZSAweEZFRkY6IC8vIEJ5dGUgT3JkZXIgTWFya1xuXHQgICAgY2FzZSAweDIwMjg6IC8vIExpbmUgU2VwYXJhdG9yXG5cdCAgICBjYXNlIDB4MjAyOTpcblx0ICAgICAgLy8gUGFyYWdyYXBoIFNlcGFyYXRvclxuXHQgICAgICByZXR1cm4gJ3dzJztcblx0ICB9XG5cdFxuXHQgIC8vIGEteiwgQS1aXG5cdCAgaWYgKGNvZGUgPj0gMHg2MSAmJiBjb2RlIDw9IDB4N0EgfHwgY29kZSA+PSAweDQxICYmIGNvZGUgPD0gMHg1QSkge1xuXHQgICAgcmV0dXJuICdpZGVudCc7XG5cdCAgfVxuXHRcblx0ICAvLyAxLTlcblx0ICBpZiAoY29kZSA+PSAweDMxICYmIGNvZGUgPD0gMHgzOSkge1xuXHQgICAgcmV0dXJuICdudW1iZXInO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuICdlbHNlJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcm1hdCBhIHN1YlBhdGgsIHJldHVybiBpdHMgcGxhaW4gZm9ybSBpZiBpdCBpc1xuXHQgKiBhIGxpdGVyYWwgc3RyaW5nIG9yIG51bWJlci4gT3RoZXJ3aXNlIHByZXBlbmQgdGhlXG5cdCAqIGR5bmFtaWMgaW5kaWNhdG9yICgqKS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFN1YlBhdGgocGF0aCkge1xuXHQgIHZhciB0cmltbWVkID0gcGF0aC50cmltKCk7XG5cdCAgLy8gaW52YWxpZCBsZWFkaW5nIDBcblx0ICBpZiAocGF0aC5jaGFyQXQoMCkgPT09ICcwJyAmJiBpc05hTihwYXRoKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICByZXR1cm4gaXNMaXRlcmFsKHRyaW1tZWQpID8gc3RyaXBRdW90ZXModHJpbW1lZCkgOiAnKicgKyB0cmltbWVkO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2UgYSBzdHJpbmcgcGF0aCBpbnRvIGFuIGFycmF5IG9mIHNlZ21lbnRzXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAqIEByZXR1cm4ge0FycmF5fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZShwYXRoKSB7XG5cdCAgdmFyIGtleXMgPSBbXTtcblx0ICB2YXIgaW5kZXggPSAtMTtcblx0ICB2YXIgbW9kZSA9IEJFRk9SRV9QQVRIO1xuXHQgIHZhciBzdWJQYXRoRGVwdGggPSAwO1xuXHQgIHZhciBjLCBuZXdDaGFyLCBrZXksIHR5cGUsIHRyYW5zaXRpb24sIGFjdGlvbiwgdHlwZU1hcDtcblx0XG5cdCAgdmFyIGFjdGlvbnMgPSBbXTtcblx0XG5cdCAgYWN0aW9uc1tQVVNIXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBrZXlzLnB1c2goa2V5KTtcblx0ICAgICAga2V5ID0gdW5kZWZpbmVkO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGFjdGlvbnNbQVBQRU5EXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBrZXkgPSBuZXdDaGFyO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAga2V5ICs9IG5ld0NoYXI7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgYWN0aW9uc1tJTkNfU1VCX1BBVEhfREVQVEhdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgYWN0aW9uc1tBUFBFTkRdKCk7XG5cdCAgICBzdWJQYXRoRGVwdGgrKztcblx0ICB9O1xuXHRcblx0ICBhY3Rpb25zW1BVU0hfU1VCX1BBVEhdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKHN1YlBhdGhEZXB0aCA+IDApIHtcblx0ICAgICAgc3ViUGF0aERlcHRoLS07XG5cdCAgICAgIG1vZGUgPSBJTl9TVUJfUEFUSDtcblx0ICAgICAgYWN0aW9uc1tBUFBFTkRdKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzdWJQYXRoRGVwdGggPSAwO1xuXHQgICAgICBrZXkgPSBmb3JtYXRTdWJQYXRoKGtleSk7XG5cdCAgICAgIGlmIChrZXkgPT09IGZhbHNlKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGFjdGlvbnNbUFVTSF0oKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIG1heWJlVW5lc2NhcGVRdW90ZSgpIHtcblx0ICAgIHZhciBuZXh0Q2hhciA9IHBhdGhbaW5kZXggKyAxXTtcblx0ICAgIGlmIChtb2RlID09PSBJTl9TSU5HTEVfUVVPVEUgJiYgbmV4dENoYXIgPT09IFwiJ1wiIHx8IG1vZGUgPT09IElOX0RPVUJMRV9RVU9URSAmJiBuZXh0Q2hhciA9PT0gJ1wiJykge1xuXHQgICAgICBpbmRleCsrO1xuXHQgICAgICBuZXdDaGFyID0gJ1xcXFwnICsgbmV4dENoYXI7XG5cdCAgICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHdoaWxlIChtb2RlICE9IG51bGwpIHtcblx0ICAgIGluZGV4Kys7XG5cdCAgICBjID0gcGF0aFtpbmRleF07XG5cdFxuXHQgICAgaWYgKGMgPT09ICdcXFxcJyAmJiBtYXliZVVuZXNjYXBlUXVvdGUoKSkge1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0XG5cdCAgICB0eXBlID0gZ2V0UGF0aENoYXJUeXBlKGMpO1xuXHQgICAgdHlwZU1hcCA9IHBhdGhTdGF0ZU1hY2hpbmVbbW9kZV07XG5cdCAgICB0cmFuc2l0aW9uID0gdHlwZU1hcFt0eXBlXSB8fCB0eXBlTWFwWydlbHNlJ10gfHwgRVJST1I7XG5cdFxuXHQgICAgaWYgKHRyYW5zaXRpb24gPT09IEVSUk9SKSB7XG5cdCAgICAgIHJldHVybjsgLy8gcGFyc2UgZXJyb3Jcblx0ICAgIH1cblx0XG5cdCAgICBtb2RlID0gdHJhbnNpdGlvblswXTtcblx0ICAgIGFjdGlvbiA9IGFjdGlvbnNbdHJhbnNpdGlvblsxXV07XG5cdCAgICBpZiAoYWN0aW9uKSB7XG5cdCAgICAgIG5ld0NoYXIgPSB0cmFuc2l0aW9uWzJdO1xuXHQgICAgICBuZXdDaGFyID0gbmV3Q2hhciA9PT0gdW5kZWZpbmVkID8gYyA6IG5ld0NoYXI7XG5cdCAgICAgIGlmIChhY3Rpb24oKSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAobW9kZSA9PT0gQUZURVJfUEFUSCkge1xuXHQgICAgICBrZXlzLnJhdyA9IHBhdGg7XG5cdCAgICAgIHJldHVybiBrZXlzO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEV4dGVybmFsIHBhcnNlIHRoYXQgY2hlY2sgZm9yIGEgY2FjaGUgaGl0IGZpcnN0XG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAqIEByZXR1cm4ge0FycmF5fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZVBhdGgocGF0aCkge1xuXHQgIHZhciBoaXQgPSBwYXRoQ2FjaGUuZ2V0KHBhdGgpO1xuXHQgIGlmICghaGl0KSB7XG5cdCAgICBoaXQgPSBwYXJzZShwYXRoKTtcblx0ICAgIGlmIChoaXQpIHtcblx0ICAgICAgcGF0aENhY2hlLnB1dChwYXRoLCBoaXQpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gaGl0O1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IGZyb20gYW4gb2JqZWN0IGZyb20gYSBwYXRoIHN0cmluZ1xuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0UGF0aChvYmosIHBhdGgpIHtcblx0ICByZXR1cm4gcGFyc2VFeHByZXNzaW9uKHBhdGgpLmdldChvYmopO1xuXHR9XG5cdFxuXHQvKipcblx0ICogV2FybiBhZ2FpbnN0IHNldHRpbmcgbm9uLWV4aXN0ZW50IHJvb3QgcGF0aCBvbiBhIHZtLlxuXHQgKi9cblx0XG5cdHZhciB3YXJuTm9uRXhpc3RlbnQ7XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgd2Fybk5vbkV4aXN0ZW50ID0gZnVuY3Rpb24gKHBhdGgsIHZtKSB7XG5cdCAgICB3YXJuKCdZb3UgYXJlIHNldHRpbmcgYSBub24tZXhpc3RlbnQgcGF0aCBcIicgKyBwYXRoLnJhdyArICdcIiAnICsgJ29uIGEgdm0gaW5zdGFuY2UuIENvbnNpZGVyIHByZS1pbml0aWFsaXppbmcgdGhlIHByb3BlcnR5ICcgKyAnd2l0aCB0aGUgXCJkYXRhXCIgb3B0aW9uIGZvciBtb3JlIHJlbGlhYmxlIHJlYWN0aXZpdHkgJyArICdhbmQgYmV0dGVyIHBlcmZvcm1hbmNlLicsIHZtKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogU2V0IG9uIGFuIG9iamVjdCBmcm9tIGEgcGF0aFxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nIHwgQXJyYXl9IHBhdGhcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzZXRQYXRoKG9iaiwgcGF0aCwgdmFsKSB7XG5cdCAgdmFyIG9yaWdpbmFsID0gb2JqO1xuXHQgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcblx0ICAgIHBhdGggPSBwYXJzZShwYXRoKTtcblx0ICB9XG5cdCAgaWYgKCFwYXRoIHx8ICFpc09iamVjdChvYmopKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciBsYXN0LCBrZXk7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBwYXRoLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgbGFzdCA9IG9iajtcblx0ICAgIGtleSA9IHBhdGhbaV07XG5cdCAgICBpZiAoa2V5LmNoYXJBdCgwKSA9PT0gJyonKSB7XG5cdCAgICAgIGtleSA9IHBhcnNlRXhwcmVzc2lvbihrZXkuc2xpY2UoMSkpLmdldC5jYWxsKG9yaWdpbmFsLCBvcmlnaW5hbCk7XG5cdCAgICB9XG5cdCAgICBpZiAoaSA8IGwgLSAxKSB7XG5cdCAgICAgIG9iaiA9IG9ialtrZXldO1xuXHQgICAgICBpZiAoIWlzT2JqZWN0KG9iaikpIHtcblx0ICAgICAgICBvYmogPSB7fTtcblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBsYXN0Ll9pc1Z1ZSkge1xuXHQgICAgICAgICAgd2Fybk5vbkV4aXN0ZW50KHBhdGgsIGxhc3QpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzZXQobGFzdCwga2V5LCBvYmopO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAoaXNBcnJheShvYmopKSB7XG5cdCAgICAgICAgb2JqLiRzZXQoa2V5LCB2YWwpO1xuXHQgICAgICB9IGVsc2UgaWYgKGtleSBpbiBvYmopIHtcblx0ICAgICAgICBvYmpba2V5XSA9IHZhbDtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBvYmouX2lzVnVlKSB7XG5cdCAgICAgICAgICB3YXJuTm9uRXhpc3RlbnQocGF0aCwgb2JqKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc2V0KG9iaiwga2V5LCB2YWwpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlO1xuXHR9XG5cdFxuXHR2YXIgcGF0aCA9IE9iamVjdC5mcmVlemUoe1xuXHQgIHBhcnNlUGF0aDogcGFyc2VQYXRoLFxuXHQgIGdldFBhdGg6IGdldFBhdGgsXG5cdCAgc2V0UGF0aDogc2V0UGF0aFxuXHR9KTtcblx0XG5cdHZhciBleHByZXNzaW9uQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cdFxuXHR2YXIgYWxsb3dlZEtleXdvcmRzID0gJ01hdGgsRGF0ZSx0aGlzLHRydWUsZmFsc2UsbnVsbCx1bmRlZmluZWQsSW5maW5pdHksTmFOLCcgKyAnaXNOYU4saXNGaW5pdGUsZGVjb2RlVVJJLGRlY29kZVVSSUNvbXBvbmVudCxlbmNvZGVVUkksJyArICdlbmNvZGVVUklDb21wb25lbnQscGFyc2VJbnQscGFyc2VGbG9hdCc7XG5cdHZhciBhbGxvd2VkS2V5d29yZHNSRSA9IG5ldyBSZWdFeHAoJ14oJyArIGFsbG93ZWRLZXl3b3Jkcy5yZXBsYWNlKC8sL2csICdcXFxcYnwnKSArICdcXFxcYiknKTtcblx0XG5cdC8vIGtleXdvcmRzIHRoYXQgZG9uJ3QgbWFrZSBzZW5zZSBpbnNpZGUgZXhwcmVzc2lvbnNcblx0dmFyIGltcHJvcGVyS2V5d29yZHMgPSAnYnJlYWssY2FzZSxjbGFzcyxjYXRjaCxjb25zdCxjb250aW51ZSxkZWJ1Z2dlcixkZWZhdWx0LCcgKyAnZGVsZXRlLGRvLGVsc2UsZXhwb3J0LGV4dGVuZHMsZmluYWxseSxmb3IsZnVuY3Rpb24saWYsJyArICdpbXBvcnQsaW4saW5zdGFuY2VvZixsZXQscmV0dXJuLHN1cGVyLHN3aXRjaCx0aHJvdyx0cnksJyArICd2YXIsd2hpbGUsd2l0aCx5aWVsZCxlbnVtLGF3YWl0LGltcGxlbWVudHMscGFja2FnZSwnICsgJ3Byb3RlY3RlZCxzdGF0aWMsaW50ZXJmYWNlLHByaXZhdGUscHVibGljJztcblx0dmFyIGltcHJvcGVyS2V5d29yZHNSRSA9IG5ldyBSZWdFeHAoJ14oJyArIGltcHJvcGVyS2V5d29yZHMucmVwbGFjZSgvLC9nLCAnXFxcXGJ8JykgKyAnXFxcXGIpJyk7XG5cdFxuXHR2YXIgd3NSRSA9IC9cXHMvZztcblx0dmFyIG5ld2xpbmVSRSA9IC9cXG4vZztcblx0dmFyIHNhdmVSRSA9IC9bXFx7LF1cXHMqW1xcd1xcJF9dK1xccyo6fCgnKD86W14nXFxcXF18XFxcXC4pKid8XCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifGAoPzpbXmBcXFxcXXxcXFxcLikqXFwkXFx7fFxcfSg/OlteYFxcXFxdfFxcXFwuKSpgfGAoPzpbXmBcXFxcXXxcXFxcLikqYCl8bmV3IHx0eXBlb2YgfHZvaWQgL2c7XG5cdHZhciByZXN0b3JlUkUgPSAvXCIoXFxkKylcIi9nO1xuXHR2YXIgcGF0aFRlc3RSRSA9IC9eW0EtWmEtel8kXVtcXHckXSooPzpcXC5bQS1aYS16XyRdW1xcdyRdKnxcXFsnLio/J1xcXXxcXFtcIi4qP1wiXFxdfFxcW1xcZCtcXF18XFxbW0EtWmEtel8kXVtcXHckXSpcXF0pKiQvO1xuXHR2YXIgaWRlbnRSRSA9IC9bXlxcdyRcXC5dKD86W0EtWmEtel8kXVtcXHckXSopL2c7XG5cdHZhciBsaXRlcmFsVmFsdWVSRSQxID0gL14oPzp0cnVlfGZhbHNlfG51bGx8dW5kZWZpbmVkfEluZmluaXR5fE5hTikkLztcblx0XG5cdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHRcblx0LyoqXG5cdCAqIFNhdmUgLyBSZXdyaXRlIC8gUmVzdG9yZVxuXHQgKlxuXHQgKiBXaGVuIHJld3JpdGluZyBwYXRocyBmb3VuZCBpbiBhbiBleHByZXNzaW9uLCBpdCBpc1xuXHQgKiBwb3NzaWJsZSBmb3IgdGhlIHNhbWUgbGV0dGVyIHNlcXVlbmNlcyB0byBiZSBmb3VuZCBpblxuXHQgKiBzdHJpbmdzIGFuZCBPYmplY3QgbGl0ZXJhbCBwcm9wZXJ0eSBrZXlzLiBUaGVyZWZvcmUgd2Vcblx0ICogcmVtb3ZlIGFuZCBzdG9yZSB0aGVzZSBwYXJ0cyBpbiBhIHRlbXBvcmFyeSBhcnJheSwgYW5kXG5cdCAqIHJlc3RvcmUgdGhlbSBhZnRlciB0aGUgcGF0aCByZXdyaXRlLlxuXHQgKi9cblx0XG5cdHZhciBzYXZlZCA9IFtdO1xuXHRcblx0LyoqXG5cdCAqIFNhdmUgcmVwbGFjZXJcblx0ICpcblx0ICogVGhlIHNhdmUgcmVnZXggY2FuIG1hdGNoIHR3byBwb3NzaWJsZSBjYXNlczpcblx0ICogMS4gQW4gb3BlbmluZyBvYmplY3QgbGl0ZXJhbFxuXHQgKiAyLiBBIHN0cmluZ1xuXHQgKiBJZiBtYXRjaGVkIGFzIGEgcGxhaW4gc3RyaW5nLCB3ZSBuZWVkIHRvIGVzY2FwZSBpdHNcblx0ICogbmV3bGluZXMsIHNpbmNlIHRoZSBzdHJpbmcgbmVlZHMgdG8gYmUgcHJlc2VydmVkIHdoZW5cblx0ICogZ2VuZXJhdGluZyB0aGUgZnVuY3Rpb24gYm9keS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaXNTdHJpbmcgLSBzdHIgaWYgbWF0Y2hlZCBhcyBhIHN0cmluZ1xuXHQgKiBAcmV0dXJuIHtTdHJpbmd9IC0gcGxhY2Vob2xkZXIgd2l0aCBpbmRleFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHNhdmUoc3RyLCBpc1N0cmluZykge1xuXHQgIHZhciBpID0gc2F2ZWQubGVuZ3RoO1xuXHQgIHNhdmVkW2ldID0gaXNTdHJpbmcgPyBzdHIucmVwbGFjZShuZXdsaW5lUkUsICdcXFxcbicpIDogc3RyO1xuXHQgIHJldHVybiAnXCInICsgaSArICdcIic7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXRoIHJld3JpdGUgcmVwbGFjZXJcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHJhd1xuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmV3cml0ZShyYXcpIHtcblx0ICB2YXIgYyA9IHJhdy5jaGFyQXQoMCk7XG5cdCAgdmFyIHBhdGggPSByYXcuc2xpY2UoMSk7XG5cdCAgaWYgKGFsbG93ZWRLZXl3b3Jkc1JFLnRlc3QocGF0aCkpIHtcblx0ICAgIHJldHVybiByYXc7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHBhdGggPSBwYXRoLmluZGV4T2YoJ1wiJykgPiAtMSA/IHBhdGgucmVwbGFjZShyZXN0b3JlUkUsIHJlc3RvcmUpIDogcGF0aDtcblx0ICAgIHJldHVybiBjICsgJ3Njb3BlLicgKyBwYXRoO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlc3RvcmUgcmVwbGFjZXJcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaSAtIG1hdGNoZWQgc2F2ZSBpbmRleFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVzdG9yZShzdHIsIGkpIHtcblx0ICByZXR1cm4gc2F2ZWRbaV07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZXdyaXRlIGFuIGV4cHJlc3Npb24sIHByZWZpeGluZyBhbGwgcGF0aCBhY2Nlc3NvcnMgd2l0aFxuXHQgKiBgc2NvcGUuYCBhbmQgZ2VuZXJhdGUgZ2V0dGVyL3NldHRlciBmdW5jdGlvbnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZUdldHRlcihleHApIHtcblx0ICBpZiAoaW1wcm9wZXJLZXl3b3Jkc1JFLnRlc3QoZXhwKSkge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdBdm9pZCB1c2luZyByZXNlcnZlZCBrZXl3b3JkcyBpbiBleHByZXNzaW9uOiAnICsgZXhwKTtcblx0ICB9XG5cdCAgLy8gcmVzZXQgc3RhdGVcblx0ICBzYXZlZC5sZW5ndGggPSAwO1xuXHQgIC8vIHNhdmUgc3RyaW5ncyBhbmQgb2JqZWN0IGxpdGVyYWwga2V5c1xuXHQgIHZhciBib2R5ID0gZXhwLnJlcGxhY2Uoc2F2ZVJFLCBzYXZlKS5yZXBsYWNlKHdzUkUsICcnKTtcblx0ICAvLyByZXdyaXRlIGFsbCBwYXRoc1xuXHQgIC8vIHBhZCAxIHNwYWNlIGhlcmUgYmVjYXVzZSB0aGUgcmVnZXggbWF0Y2hlcyAxIGV4dHJhIGNoYXJcblx0ICBib2R5ID0gKCcgJyArIGJvZHkpLnJlcGxhY2UoaWRlbnRSRSwgcmV3cml0ZSkucmVwbGFjZShyZXN0b3JlUkUsIHJlc3RvcmUpO1xuXHQgIHJldHVybiBtYWtlR2V0dGVyRm4oYm9keSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBCdWlsZCBhIGdldHRlciBmdW5jdGlvbi4gUmVxdWlyZXMgZXZhbC5cblx0ICpcblx0ICogV2UgaXNvbGF0ZSB0aGUgdHJ5L2NhdGNoIHNvIGl0IGRvZXNuJ3QgYWZmZWN0IHRoZVxuXHQgKiBvcHRpbWl6YXRpb24gb2YgdGhlIHBhcnNlIGZ1bmN0aW9uIHdoZW4gaXQgaXMgbm90IGNhbGxlZC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGJvZHlcblx0ICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VHZXR0ZXJGbihib2R5KSB7XG5cdCAgdHJ5IHtcblx0ICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jICovXG5cdCAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdzY29wZScsICdyZXR1cm4gJyArIGJvZHkgKyAnOycpO1xuXHQgICAgLyogZXNsaW50LWVuYWJsZSBuby1uZXctZnVuYyAqL1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoZS50b1N0cmluZygpLm1hdGNoKC91bnNhZmUtZXZhbHxDU1AvKSkge1xuXHQgICAgICAgIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgdGhlIGRlZmF1bHQgYnVpbGQgb2YgVnVlLmpzIGluIGFuIGVudmlyb25tZW50ICcgKyAnd2l0aCBDb250ZW50IFNlY3VyaXR5IFBvbGljeSB0aGF0IHByb2hpYml0cyB1bnNhZmUtZXZhbC4gJyArICdVc2UgdGhlIENTUC1jb21wbGlhbnQgYnVpbGQgaW5zdGVhZDogJyArICdodHRwOi8vdnVlanMub3JnL2d1aWRlL2luc3RhbGxhdGlvbi5odG1sI0NTUC1jb21wbGlhbnQtYnVpbGQnKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB3YXJuKCdJbnZhbGlkIGV4cHJlc3Npb24uICcgKyAnR2VuZXJhdGVkIGZ1bmN0aW9uIGJvZHk6ICcgKyBib2R5KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5vb3A7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBhIHNldHRlciBmdW5jdGlvbiBmb3IgdGhlIGV4cHJlc3Npb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVTZXR0ZXIoZXhwKSB7XG5cdCAgdmFyIHBhdGggPSBwYXJzZVBhdGgoZXhwKTtcblx0ICBpZiAocGF0aCkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgdmFsKSB7XG5cdCAgICAgIHNldFBhdGgoc2NvcGUsIHBhdGgsIHZhbCk7XG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgc2V0dGVyIGV4cHJlc3Npb246ICcgKyBleHApO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhcnNlIGFuIGV4cHJlc3Npb24gaW50byByZS13cml0dGVuIGdldHRlci9zZXR0ZXJzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gbmVlZFNldFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZUV4cHJlc3Npb24oZXhwLCBuZWVkU2V0KSB7XG5cdCAgZXhwID0gZXhwLnRyaW0oKTtcblx0ICAvLyB0cnkgY2FjaGVcblx0ICB2YXIgaGl0ID0gZXhwcmVzc2lvbkNhY2hlLmdldChleHApO1xuXHQgIGlmIChoaXQpIHtcblx0ICAgIGlmIChuZWVkU2V0ICYmICFoaXQuc2V0KSB7XG5cdCAgICAgIGhpdC5zZXQgPSBjb21waWxlU2V0dGVyKGhpdC5leHApO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGhpdDtcblx0ICB9XG5cdCAgdmFyIHJlcyA9IHsgZXhwOiBleHAgfTtcblx0ICByZXMuZ2V0ID0gaXNTaW1wbGVQYXRoKGV4cCkgJiYgZXhwLmluZGV4T2YoJ1snKSA8IDBcblx0ICAvLyBvcHRpbWl6ZWQgc3VwZXIgc2ltcGxlIGdldHRlclxuXHQgID8gbWFrZUdldHRlckZuKCdzY29wZS4nICsgZXhwKVxuXHQgIC8vIGR5bmFtaWMgZ2V0dGVyXG5cdCAgOiBjb21waWxlR2V0dGVyKGV4cCk7XG5cdCAgaWYgKG5lZWRTZXQpIHtcblx0ICAgIHJlcy5zZXQgPSBjb21waWxlU2V0dGVyKGV4cCk7XG5cdCAgfVxuXHQgIGV4cHJlc3Npb25DYWNoZS5wdXQoZXhwLCByZXMpO1xuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBleHByZXNzaW9uIGlzIGEgc2ltcGxlIHBhdGguXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc1NpbXBsZVBhdGgoZXhwKSB7XG5cdCAgcmV0dXJuIHBhdGhUZXN0UkUudGVzdChleHApICYmXG5cdCAgLy8gZG9uJ3QgdHJlYXQgbGl0ZXJhbCB2YWx1ZXMgYXMgcGF0aHNcblx0ICAhbGl0ZXJhbFZhbHVlUkUkMS50ZXN0KGV4cCkgJiZcblx0ICAvLyBNYXRoIGNvbnN0YW50cyBlLmcuIE1hdGguUEksIE1hdGguRSBldGMuXG5cdCAgZXhwLnNsaWNlKDAsIDUpICE9PSAnTWF0aC4nO1xuXHR9XG5cdFxuXHR2YXIgZXhwcmVzc2lvbiA9IE9iamVjdC5mcmVlemUoe1xuXHQgIHBhcnNlRXhwcmVzc2lvbjogcGFyc2VFeHByZXNzaW9uLFxuXHQgIGlzU2ltcGxlUGF0aDogaXNTaW1wbGVQYXRoXG5cdH0pO1xuXHRcblx0Ly8gd2UgaGF2ZSB0d28gc2VwYXJhdGUgcXVldWVzOiBvbmUgZm9yIGRpcmVjdGl2ZSB1cGRhdGVzXG5cdC8vIGFuZCBvbmUgZm9yIHVzZXIgd2F0Y2hlciByZWdpc3RlcmVkIHZpYSAkd2F0Y2goKS5cblx0Ly8gd2Ugd2FudCB0byBndWFyYW50ZWUgZGlyZWN0aXZlIHVwZGF0ZXMgdG8gYmUgY2FsbGVkXG5cdC8vIGJlZm9yZSB1c2VyIHdhdGNoZXJzIHNvIHRoYXQgd2hlbiB1c2VyIHdhdGNoZXJzIGFyZVxuXHQvLyB0cmlnZ2VyZWQsIHRoZSBET00gd291bGQgaGF2ZSBhbHJlYWR5IGJlZW4gaW4gdXBkYXRlZFxuXHQvLyBzdGF0ZS5cblx0XG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgdXNlclF1ZXVlID0gW107XG5cdHZhciBoYXMgPSB7fTtcblx0dmFyIGNpcmN1bGFyID0ge307XG5cdHZhciB3YWl0aW5nID0gZmFsc2U7XG5cdFxuXHQvKipcblx0ICogUmVzZXQgdGhlIGJhdGNoZXIncyBzdGF0ZS5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXNldEJhdGNoZXJTdGF0ZSgpIHtcblx0ICBxdWV1ZS5sZW5ndGggPSAwO1xuXHQgIHVzZXJRdWV1ZS5sZW5ndGggPSAwO1xuXHQgIGhhcyA9IHt9O1xuXHQgIGNpcmN1bGFyID0ge307XG5cdCAgd2FpdGluZyA9IGZhbHNlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRmx1c2ggYm90aCBxdWV1ZXMgYW5kIHJ1biB0aGUgd2F0Y2hlcnMuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZmx1c2hCYXRjaGVyUXVldWUoKSB7XG5cdCAgdmFyIF9hZ2FpbiA9IHRydWU7XG5cdFxuXHQgIF9mdW5jdGlvbjogd2hpbGUgKF9hZ2Fpbikge1xuXHQgICAgX2FnYWluID0gZmFsc2U7XG5cdFxuXHQgICAgcnVuQmF0Y2hlclF1ZXVlKHF1ZXVlKTtcblx0ICAgIHJ1bkJhdGNoZXJRdWV1ZSh1c2VyUXVldWUpO1xuXHQgICAgLy8gdXNlciB3YXRjaGVycyB0cmlnZ2VyZWQgbW9yZSB3YXRjaGVycyxcblx0ICAgIC8vIGtlZXAgZmx1c2hpbmcgdW50aWwgaXQgZGVwbGV0ZXNcblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgX2FnYWluID0gdHJ1ZTtcblx0ICAgICAgY29udGludWUgX2Z1bmN0aW9uO1xuXHQgICAgfVxuXHQgICAgLy8gZGV2IHRvb2wgaG9va1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoZGV2dG9vbHMgJiYgY29uZmlnLmRldnRvb2xzKSB7XG5cdCAgICAgIGRldnRvb2xzLmVtaXQoJ2ZsdXNoJyk7XG5cdCAgICB9XG5cdCAgICByZXNldEJhdGNoZXJTdGF0ZSgpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJ1biB0aGUgd2F0Y2hlcnMgaW4gYSBzaW5nbGUgcXVldWUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHF1ZXVlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcnVuQmF0Y2hlclF1ZXVlKHF1ZXVlKSB7XG5cdCAgLy8gZG8gbm90IGNhY2hlIGxlbmd0aCBiZWNhdXNlIG1vcmUgd2F0Y2hlcnMgbWlnaHQgYmUgcHVzaGVkXG5cdCAgLy8gYXMgd2UgcnVuIGV4aXN0aW5nIHdhdGNoZXJzXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHdhdGNoZXIgPSBxdWV1ZVtpXTtcblx0ICAgIHZhciBpZCA9IHdhdGNoZXIuaWQ7XG5cdCAgICBoYXNbaWRdID0gbnVsbDtcblx0ICAgIHdhdGNoZXIucnVuKCk7XG5cdCAgICAvLyBpbiBkZXYgYnVpbGQsIGNoZWNrIGFuZCBzdG9wIGNpcmN1bGFyIHVwZGF0ZXMuXG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBoYXNbaWRdICE9IG51bGwpIHtcblx0ICAgICAgY2lyY3VsYXJbaWRdID0gKGNpcmN1bGFyW2lkXSB8fCAwKSArIDE7XG5cdCAgICAgIGlmIChjaXJjdWxhcltpZF0gPiBjb25maWcuX21heFVwZGF0ZUNvdW50KSB7XG5cdCAgICAgICAgd2FybignWW91IG1heSBoYXZlIGFuIGluZmluaXRlIHVwZGF0ZSBsb29wIGZvciB3YXRjaGVyICcgKyAnd2l0aCBleHByZXNzaW9uIFwiJyArIHdhdGNoZXIuZXhwcmVzc2lvbiArICdcIicsIHdhdGNoZXIudm0pO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHF1ZXVlLmxlbmd0aCA9IDA7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQdXNoIGEgd2F0Y2hlciBpbnRvIHRoZSB3YXRjaGVyIHF1ZXVlLlxuXHQgKiBKb2JzIHdpdGggZHVwbGljYXRlIElEcyB3aWxsIGJlIHNraXBwZWQgdW5sZXNzIGl0J3Ncblx0ICogcHVzaGVkIHdoZW4gdGhlIHF1ZXVlIGlzIGJlaW5nIGZsdXNoZWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7V2F0Y2hlcn0gd2F0Y2hlclxuXHQgKiAgIHByb3BlcnRpZXM6XG5cdCAqICAgLSB7TnVtYmVyfSBpZFxuXHQgKiAgIC0ge0Z1bmN0aW9ufSBydW5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwdXNoV2F0Y2hlcih3YXRjaGVyKSB7XG5cdCAgdmFyIGlkID0gd2F0Y2hlci5pZDtcblx0ICBpZiAoaGFzW2lkXSA9PSBudWxsKSB7XG5cdCAgICAvLyBwdXNoIHdhdGNoZXIgaW50byBhcHByb3ByaWF0ZSBxdWV1ZVxuXHQgICAgdmFyIHEgPSB3YXRjaGVyLnVzZXIgPyB1c2VyUXVldWUgOiBxdWV1ZTtcblx0ICAgIGhhc1tpZF0gPSBxLmxlbmd0aDtcblx0ICAgIHEucHVzaCh3YXRjaGVyKTtcblx0ICAgIC8vIHF1ZXVlIHRoZSBmbHVzaFxuXHQgICAgaWYgKCF3YWl0aW5nKSB7XG5cdCAgICAgIHdhaXRpbmcgPSB0cnVlO1xuXHQgICAgICBuZXh0VGljayhmbHVzaEJhdGNoZXJRdWV1ZSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgdWlkJDIgPSAwO1xuXHRcblx0LyoqXG5cdCAqIEEgd2F0Y2hlciBwYXJzZXMgYW4gZXhwcmVzc2lvbiwgY29sbGVjdHMgZGVwZW5kZW5jaWVzLFxuXHQgKiBhbmQgZmlyZXMgY2FsbGJhY2sgd2hlbiB0aGUgZXhwcmVzc2lvbiB2YWx1ZSBjaGFuZ2VzLlxuXHQgKiBUaGlzIGlzIHVzZWQgZm9yIGJvdGggdGhlICR3YXRjaCgpIGFwaSBhbmQgZGlyZWN0aXZlcy5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBleHBPckZuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqICAgICAgICAgICAgICAgICAtIHtBcnJheX0gZmlsdGVyc1xuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gdHdvV2F5XG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBkZWVwXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSB1c2VyXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBzeW5jXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBsYXp5XG5cdCAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW3ByZVByb2Nlc3NdXG5cdCAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW3Bvc3RQcm9jZXNzXVxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICovXG5cdGZ1bmN0aW9uIFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCBvcHRpb25zKSB7XG5cdCAgLy8gbWl4IGluIG9wdGlvbnNcblx0ICBpZiAob3B0aW9ucykge1xuXHQgICAgZXh0ZW5kKHRoaXMsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICB2YXIgaXNGbiA9IHR5cGVvZiBleHBPckZuID09PSAnZnVuY3Rpb24nO1xuXHQgIHRoaXMudm0gPSB2bTtcblx0ICB2bS5fd2F0Y2hlcnMucHVzaCh0aGlzKTtcblx0ICB0aGlzLmV4cHJlc3Npb24gPSBleHBPckZuO1xuXHQgIHRoaXMuY2IgPSBjYjtcblx0ICB0aGlzLmlkID0gKyt1aWQkMjsgLy8gdWlkIGZvciBiYXRjaGluZ1xuXHQgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcblx0ICB0aGlzLmRpcnR5ID0gdGhpcy5sYXp5OyAvLyBmb3IgbGF6eSB3YXRjaGVyc1xuXHQgIHRoaXMuZGVwcyA9IFtdO1xuXHQgIHRoaXMubmV3RGVwcyA9IFtdO1xuXHQgIHRoaXMuZGVwSWRzID0gbmV3IF9TZXQoKTtcblx0ICB0aGlzLm5ld0RlcElkcyA9IG5ldyBfU2V0KCk7XG5cdCAgdGhpcy5wcmV2RXJyb3IgPSBudWxsOyAvLyBmb3IgYXN5bmMgZXJyb3Igc3RhY2tzXG5cdCAgLy8gcGFyc2UgZXhwcmVzc2lvbiBmb3IgZ2V0dGVyL3NldHRlclxuXHQgIGlmIChpc0ZuKSB7XG5cdCAgICB0aGlzLmdldHRlciA9IGV4cE9yRm47XG5cdCAgICB0aGlzLnNldHRlciA9IHVuZGVmaW5lZDtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHBPckZuLCB0aGlzLnR3b1dheSk7XG5cdCAgICB0aGlzLmdldHRlciA9IHJlcy5nZXQ7XG5cdCAgICB0aGlzLnNldHRlciA9IHJlcy5zZXQ7XG5cdCAgfVxuXHQgIHRoaXMudmFsdWUgPSB0aGlzLmxhenkgPyB1bmRlZmluZWQgOiB0aGlzLmdldCgpO1xuXHQgIC8vIHN0YXRlIGZvciBhdm9pZGluZyBmYWxzZSB0cmlnZ2VycyBmb3IgZGVlcCBhbmQgQXJyYXlcblx0ICAvLyB3YXRjaGVycyBkdXJpbmcgdm0uX2RpZ2VzdCgpXG5cdCAgdGhpcy5xdWV1ZWQgPSB0aGlzLnNoYWxsb3cgPSBmYWxzZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEV2YWx1YXRlIHRoZSBnZXR0ZXIsIGFuZCByZS1jb2xsZWN0IGRlcGVuZGVuY2llcy5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdGhpcy5iZWZvcmVHZXQoKTtcblx0ICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm07XG5cdCAgdmFyIHZhbHVlO1xuXHQgIHRyeSB7XG5cdCAgICB2YWx1ZSA9IHRoaXMuZ2V0dGVyLmNhbGwoc2NvcGUsIHNjb3BlKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcud2FybkV4cHJlc3Npb25FcnJvcnMpIHtcblx0ICAgICAgd2FybignRXJyb3Igd2hlbiBldmFsdWF0aW5nIGV4cHJlc3Npb24gJyArICdcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCI6ICcgKyBlLnRvU3RyaW5nKCksIHRoaXMudm0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyBcInRvdWNoXCIgZXZlcnkgcHJvcGVydHkgc28gdGhleSBhcmUgYWxsIHRyYWNrZWQgYXNcblx0ICAvLyBkZXBlbmRlbmNpZXMgZm9yIGRlZXAgd2F0Y2hpbmdcblx0ICBpZiAodGhpcy5kZWVwKSB7XG5cdCAgICB0cmF2ZXJzZSh2YWx1ZSk7XG5cdCAgfVxuXHQgIGlmICh0aGlzLnByZVByb2Nlc3MpIHtcblx0ICAgIHZhbHVlID0gdGhpcy5wcmVQcm9jZXNzKHZhbHVlKTtcblx0ICB9XG5cdCAgaWYgKHRoaXMuZmlsdGVycykge1xuXHQgICAgdmFsdWUgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKHZhbHVlLCBudWxsLCB0aGlzLmZpbHRlcnMsIGZhbHNlKTtcblx0ICB9XG5cdCAgaWYgKHRoaXMucG9zdFByb2Nlc3MpIHtcblx0ICAgIHZhbHVlID0gdGhpcy5wb3N0UHJvY2Vzcyh2YWx1ZSk7XG5cdCAgfVxuXHQgIHRoaXMuYWZ0ZXJHZXQoKTtcblx0ICByZXR1cm4gdmFsdWU7XG5cdH07XG5cdFxuXHQvKipcblx0ICogU2V0IHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIHdpdGggdGhlIHNldHRlci5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgIHZhciBzY29wZSA9IHRoaXMuc2NvcGUgfHwgdGhpcy52bTtcblx0ICBpZiAodGhpcy5maWx0ZXJzKSB7XG5cdCAgICB2YWx1ZSA9IHNjb3BlLl9hcHBseUZpbHRlcnModmFsdWUsIHRoaXMudmFsdWUsIHRoaXMuZmlsdGVycywgdHJ1ZSk7XG5cdCAgfVxuXHQgIHRyeSB7XG5cdCAgICB0aGlzLnNldHRlci5jYWxsKHNjb3BlLCBzY29wZSwgdmFsdWUpO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy53YXJuRXhwcmVzc2lvbkVycm9ycykge1xuXHQgICAgICB3YXJuKCdFcnJvciB3aGVuIGV2YWx1YXRpbmcgc2V0dGVyICcgKyAnXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiOiAnICsgZS50b1N0cmluZygpLCB0aGlzLnZtKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gdHdvLXdheSBzeW5jIGZvciB2LWZvciBhbGlhc1xuXHQgIHZhciBmb3JDb250ZXh0ID0gc2NvcGUuJGZvckNvbnRleHQ7XG5cdCAgaWYgKGZvckNvbnRleHQgJiYgZm9yQ29udGV4dC5hbGlhcyA9PT0gdGhpcy5leHByZXNzaW9uKSB7XG5cdCAgICBpZiAoZm9yQ29udGV4dC5maWx0ZXJzKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSXQgc2VlbXMgeW91IGFyZSB1c2luZyB0d28td2F5IGJpbmRpbmcgb24gJyArICdhIHYtZm9yIGFsaWFzICgnICsgdGhpcy5leHByZXNzaW9uICsgJyksIGFuZCB0aGUgJyArICd2LWZvciBoYXMgZmlsdGVycy4gVGhpcyB3aWxsIG5vdCB3b3JrIHByb3Blcmx5LiAnICsgJ0VpdGhlciByZW1vdmUgdGhlIGZpbHRlcnMgb3IgdXNlIGFuIGFycmF5IG9mICcgKyAnb2JqZWN0cyBhbmQgYmluZCB0byBvYmplY3QgcHJvcGVydGllcyBpbnN0ZWFkLicsIHRoaXMudm0pO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBmb3JDb250ZXh0Ll93aXRoTG9jayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChzY29wZS4ka2V5KSB7XG5cdCAgICAgICAgLy8gb3JpZ2luYWwgaXMgYW4gb2JqZWN0XG5cdCAgICAgICAgZm9yQ29udGV4dC5yYXdWYWx1ZVtzY29wZS4ka2V5XSA9IHZhbHVlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGZvckNvbnRleHQucmF3VmFsdWUuJHNldChzY29wZS4kaW5kZXgsIHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFByZXBhcmUgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5iZWZvcmVHZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgRGVwLnRhcmdldCA9IHRoaXM7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQWRkIGEgZGVwZW5kZW5jeSB0byB0aGlzIGRpcmVjdGl2ZS5cblx0ICpcblx0ICogQHBhcmFtIHtEZXB9IGRlcFxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmFkZERlcCA9IGZ1bmN0aW9uIChkZXApIHtcblx0ICB2YXIgaWQgPSBkZXAuaWQ7XG5cdCAgaWYgKCF0aGlzLm5ld0RlcElkcy5oYXMoaWQpKSB7XG5cdCAgICB0aGlzLm5ld0RlcElkcy5hZGQoaWQpO1xuXHQgICAgdGhpcy5uZXdEZXBzLnB1c2goZGVwKTtcblx0ICAgIGlmICghdGhpcy5kZXBJZHMuaGFzKGlkKSkge1xuXHQgICAgICBkZXAuYWRkU3ViKHRoaXMpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDbGVhbiB1cCBmb3IgZGVwZW5kZW5jeSBjb2xsZWN0aW9uLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmFmdGVyR2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIERlcC50YXJnZXQgPSBudWxsO1xuXHQgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICB2YXIgZGVwID0gdGhpcy5kZXBzW2ldO1xuXHQgICAgaWYgKCF0aGlzLm5ld0RlcElkcy5oYXMoZGVwLmlkKSkge1xuXHQgICAgICBkZXAucmVtb3ZlU3ViKHRoaXMpO1xuXHQgICAgfVxuXHQgIH1cblx0ICB2YXIgdG1wID0gdGhpcy5kZXBJZHM7XG5cdCAgdGhpcy5kZXBJZHMgPSB0aGlzLm5ld0RlcElkcztcblx0ICB0aGlzLm5ld0RlcElkcyA9IHRtcDtcblx0ICB0aGlzLm5ld0RlcElkcy5jbGVhcigpO1xuXHQgIHRtcCA9IHRoaXMuZGVwcztcblx0ICB0aGlzLmRlcHMgPSB0aGlzLm5ld0RlcHM7XG5cdCAgdGhpcy5uZXdEZXBzID0gdG1wO1xuXHQgIHRoaXMubmV3RGVwcy5sZW5ndGggPSAwO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFN1YnNjcmliZXIgaW50ZXJmYWNlLlxuXHQgKiBXaWxsIGJlIGNhbGxlZCB3aGVuIGEgZGVwZW5kZW5jeSBjaGFuZ2VzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHNoYWxsb3dcblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoc2hhbGxvdykge1xuXHQgIGlmICh0aGlzLmxhenkpIHtcblx0ICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuXHQgIH0gZWxzZSBpZiAodGhpcy5zeW5jIHx8ICFjb25maWcuYXN5bmMpIHtcblx0ICAgIHRoaXMucnVuKCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIGlmIHF1ZXVlZCwgb25seSBvdmVyd3JpdGUgc2hhbGxvdyB3aXRoIG5vbi1zaGFsbG93LFxuXHQgICAgLy8gYnV0IG5vdCB0aGUgb3RoZXIgd2F5IGFyb3VuZC5cblx0ICAgIHRoaXMuc2hhbGxvdyA9IHRoaXMucXVldWVkID8gc2hhbGxvdyA/IHRoaXMuc2hhbGxvdyA6IGZhbHNlIDogISFzaGFsbG93O1xuXHQgICAgdGhpcy5xdWV1ZWQgPSB0cnVlO1xuXHQgICAgLy8gcmVjb3JkIGJlZm9yZS1wdXNoIGVycm9yIHN0YWNrIGluIGRlYnVnIG1vZGVcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLmRlYnVnKSB7XG5cdCAgICAgIHRoaXMucHJldkVycm9yID0gbmV3IEVycm9yKCdbdnVlXSBhc3luYyBzdGFjayB0cmFjZScpO1xuXHQgICAgfVxuXHQgICAgcHVzaFdhdGNoZXIodGhpcyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEJhdGNoZXIgam9iIGludGVyZmFjZS5cblx0ICogV2lsbCBiZSBjYWxsZWQgYnkgdGhlIGJhdGNoZXIuXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuXHQgIGlmICh0aGlzLmFjdGl2ZSkge1xuXHQgICAgdmFyIHZhbHVlID0gdGhpcy5nZXQoKTtcblx0ICAgIGlmICh2YWx1ZSAhPT0gdGhpcy52YWx1ZSB8fFxuXHQgICAgLy8gRGVlcCB3YXRjaGVycyBhbmQgd2F0Y2hlcnMgb24gT2JqZWN0L0FycmF5cyBzaG91bGQgZmlyZSBldmVuXG5cdCAgICAvLyB3aGVuIHRoZSB2YWx1ZSBpcyB0aGUgc2FtZSwgYmVjYXVzZSB0aGUgdmFsdWUgbWF5XG5cdCAgICAvLyBoYXZlIG11dGF0ZWQ7IGJ1dCBvbmx5IGRvIHNvIGlmIHRoaXMgaXMgYVxuXHQgICAgLy8gbm9uLXNoYWxsb3cgdXBkYXRlIChjYXVzZWQgYnkgYSB2bSBkaWdlc3QpLlxuXHQgICAgKGlzT2JqZWN0KHZhbHVlKSB8fCB0aGlzLmRlZXApICYmICF0aGlzLnNoYWxsb3cpIHtcblx0ICAgICAgLy8gc2V0IG5ldyB2YWx1ZVxuXHQgICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlO1xuXHQgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cdCAgICAgIC8vIGluIGRlYnVnICsgYXN5bmMgbW9kZSwgd2hlbiBhIHdhdGNoZXIgY2FsbGJhY2tzXG5cdCAgICAgIC8vIHRocm93cywgd2UgYWxzbyB0aHJvdyB0aGUgc2F2ZWQgYmVmb3JlLXB1c2ggZXJyb3Jcblx0ICAgICAgLy8gc28gdGhlIGZ1bGwgY3Jvc3MtdGljayBzdGFjayB0cmFjZSBpcyBhdmFpbGFibGUuXG5cdCAgICAgIHZhciBwcmV2RXJyb3IgPSB0aGlzLnByZXZFcnJvcjtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5kZWJ1ZyAmJiBwcmV2RXJyb3IpIHtcblx0ICAgICAgICB0aGlzLnByZXZFcnJvciA9IG51bGw7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgdGhyb3cgcHJldkVycm9yO1xuXHQgICAgICAgICAgfSwgMCk7XG5cdCAgICAgICAgICB0aHJvdyBlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy52bSwgdmFsdWUsIG9sZFZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdGhpcy5xdWV1ZWQgPSB0aGlzLnNoYWxsb3cgPSBmYWxzZTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogRXZhbHVhdGUgdGhlIHZhbHVlIG9mIHRoZSB3YXRjaGVyLlxuXHQgKiBUaGlzIG9ubHkgZ2V0cyBjYWxsZWQgZm9yIGxhenkgd2F0Y2hlcnMuXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgLy8gYXZvaWQgb3ZlcndyaXRpbmcgYW5vdGhlciB3YXRjaGVyIHRoYXQgaXMgYmVpbmdcblx0ICAvLyBjb2xsZWN0ZWQuXG5cdCAgdmFyIGN1cnJlbnQgPSBEZXAudGFyZ2V0O1xuXHQgIHRoaXMudmFsdWUgPSB0aGlzLmdldCgpO1xuXHQgIHRoaXMuZGlydHkgPSBmYWxzZTtcblx0ICBEZXAudGFyZ2V0ID0gY3VycmVudDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBEZXBlbmQgb24gYWxsIGRlcHMgY29sbGVjdGVkIGJ5IHRoaXMgd2F0Y2hlci5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5kZXBlbmQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHRoaXMuZGVwc1tpXS5kZXBlbmQoKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIHNlbGYgZnJvbSBhbGwgZGVwZW5kZW5jaWVzJyBzdWJjcmliZXIgbGlzdC5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS50ZWFyZG93biA9IGZ1bmN0aW9uICgpIHtcblx0ICBpZiAodGhpcy5hY3RpdmUpIHtcblx0ICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gdm0ncyB3YXRjaGVyIGxpc3Rcblx0ICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBleHBlbnNpdmUgb3BlcmF0aW9uIHNvIHdlIHNraXAgaXRcblx0ICAgIC8vIGlmIHRoZSB2bSBpcyBiZWluZyBkZXN0cm95ZWQgb3IgaXMgcGVyZm9ybWluZyBhIHYtZm9yXG5cdCAgICAvLyByZS1yZW5kZXIgKHRoZSB3YXRjaGVyIGxpc3QgaXMgdGhlbiBmaWx0ZXJlZCBieSB2LWZvcikuXG5cdCAgICBpZiAoIXRoaXMudm0uX2lzQmVpbmdEZXN0cm95ZWQgJiYgIXRoaXMudm0uX3ZGb3JSZW1vdmluZykge1xuXHQgICAgICB0aGlzLnZtLl93YXRjaGVycy4kcmVtb3ZlKHRoaXMpO1xuXHQgICAgfVxuXHQgICAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB0aGlzLmRlcHNbaV0ucmVtb3ZlU3ViKHRoaXMpO1xuXHQgICAgfVxuXHQgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcblx0ICAgIHRoaXMudm0gPSB0aGlzLmNiID0gdGhpcy52YWx1ZSA9IG51bGw7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFJlY3J1c2l2ZWx5IHRyYXZlcnNlIGFuIG9iamVjdCB0byBldm9rZSBhbGwgY29udmVydGVkXG5cdCAqIGdldHRlcnMsIHNvIHRoYXQgZXZlcnkgbmVzdGVkIHByb3BlcnR5IGluc2lkZSB0aGUgb2JqZWN0XG5cdCAqIGlzIGNvbGxlY3RlZCBhcyBhIFwiZGVlcFwiIGRlcGVuZGVuY3kuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqL1xuXHRcblx0dmFyIHNlZW5PYmplY3RzID0gbmV3IF9TZXQoKTtcblx0ZnVuY3Rpb24gdHJhdmVyc2UodmFsLCBzZWVuKSB7XG5cdCAgdmFyIGkgPSB1bmRlZmluZWQsXG5cdCAgICAgIGtleXMgPSB1bmRlZmluZWQ7XG5cdCAgaWYgKCFzZWVuKSB7XG5cdCAgICBzZWVuID0gc2Vlbk9iamVjdHM7XG5cdCAgICBzZWVuLmNsZWFyKCk7XG5cdCAgfVxuXHQgIHZhciBpc0EgPSBpc0FycmF5KHZhbCk7XG5cdCAgdmFyIGlzTyA9IGlzT2JqZWN0KHZhbCk7XG5cdCAgaWYgKChpc0EgfHwgaXNPKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHZhbCkpIHtcblx0ICAgIGlmICh2YWwuX19vYl9fKSB7XG5cdCAgICAgIHZhciBkZXBJZCA9IHZhbC5fX29iX18uZGVwLmlkO1xuXHQgICAgICBpZiAoc2Vlbi5oYXMoZGVwSWQpKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHNlZW4uYWRkKGRlcElkKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKGlzQSkge1xuXHQgICAgICBpID0gdmFsLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKGktLSkgdHJhdmVyc2UodmFsW2ldLCBzZWVuKTtcblx0ICAgIH0gZWxzZSBpZiAoaXNPKSB7XG5cdCAgICAgIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xuXHQgICAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICAgIHdoaWxlIChpLS0pIHRyYXZlcnNlKHZhbFtrZXlzW2ldXSwgc2Vlbik7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgdGV4dCQxID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdGhpcy5hdHRyID0gdGhpcy5lbC5ub2RlVHlwZSA9PT0gMyA/ICdkYXRhJyA6ICd0ZXh0Q29udGVudCc7XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIHRoaXMuZWxbdGhpcy5hdHRyXSA9IF90b1N0cmluZyh2YWx1ZSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHRlbXBsYXRlQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cdHZhciBpZFNlbGVjdG9yQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cdFxuXHR2YXIgbWFwID0ge1xuXHQgIGVmYXVsdDogWzAsICcnLCAnJ10sXG5cdCAgbGVnZW5kOiBbMSwgJzxmaWVsZHNldD4nLCAnPC9maWVsZHNldD4nXSxcblx0ICB0cjogWzIsICc8dGFibGU+PHRib2R5PicsICc8L3Rib2R5PjwvdGFibGU+J10sXG5cdCAgY29sOiBbMiwgJzx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+JywgJzwvY29sZ3JvdXA+PC90YWJsZT4nXVxuXHR9O1xuXHRcblx0bWFwLnRkID0gbWFwLnRoID0gWzMsICc8dGFibGU+PHRib2R5Pjx0cj4nLCAnPC90cj48L3Rib2R5PjwvdGFibGU+J107XG5cdFxuXHRtYXAub3B0aW9uID0gbWFwLm9wdGdyb3VwID0gWzEsICc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLCAnPC9zZWxlY3Q+J107XG5cdFxuXHRtYXAudGhlYWQgPSBtYXAudGJvZHkgPSBtYXAuY29sZ3JvdXAgPSBtYXAuY2FwdGlvbiA9IG1hcC50Zm9vdCA9IFsxLCAnPHRhYmxlPicsICc8L3RhYmxlPiddO1xuXHRcblx0bWFwLmcgPSBtYXAuZGVmcyA9IG1hcC5zeW1ib2wgPSBtYXAudXNlID0gbWFwLmltYWdlID0gbWFwLnRleHQgPSBtYXAuY2lyY2xlID0gbWFwLmVsbGlwc2UgPSBtYXAubGluZSA9IG1hcC5wYXRoID0gbWFwLnBvbHlnb24gPSBtYXAucG9seWxpbmUgPSBtYXAucmVjdCA9IFsxLCAnPHN2ZyAnICsgJ3htbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiAnICsgJ3htbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiICcgKyAneG1sbnM6ZXY9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAxL3htbC1ldmVudHNcIicgKyAndmVyc2lvbj1cIjEuMVwiPicsICc8L3N2Zz4nXTtcblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhIG5vZGUgaXMgYSBzdXBwb3J0ZWQgdGVtcGxhdGUgbm9kZSB3aXRoIGFcblx0ICogRG9jdW1lbnRGcmFnbWVudCBjb250ZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc1JlYWxUZW1wbGF0ZShub2RlKSB7XG5cdCAgcmV0dXJuIGlzVGVtcGxhdGUobm9kZSkgJiYgaXNGcmFnbWVudChub2RlLmNvbnRlbnQpO1xuXHR9XG5cdFxuXHR2YXIgdGFnUkUkMSA9IC88KFtcXHc6LV0rKS87XG5cdHZhciBlbnRpdHlSRSA9IC8mIz9cXHcrPzsvO1xuXHR2YXIgY29tbWVudFJFID0gLzwhLS0vO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgYSBzdHJpbmcgdGVtcGxhdGUgdG8gYSBEb2N1bWVudEZyYWdtZW50LlxuXHQgKiBEZXRlcm1pbmVzIGNvcnJlY3Qgd3JhcHBpbmcgYnkgdGFnIHR5cGVzLiBXcmFwcGluZ1xuXHQgKiBzdHJhdGVneSBmb3VuZCBpbiBqUXVlcnkgJiBjb21wb25lbnQvZG9taWZ5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdGVtcGxhdGVTdHJpbmdcblx0ICogQHBhcmFtIHtCb29sZWFufSByYXdcblx0ICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzdHJpbmdUb0ZyYWdtZW50KHRlbXBsYXRlU3RyaW5nLCByYXcpIHtcblx0ICAvLyB0cnkgYSBjYWNoZSBoaXQgZmlyc3Rcblx0ICB2YXIgY2FjaGVLZXkgPSByYXcgPyB0ZW1wbGF0ZVN0cmluZyA6IHRlbXBsYXRlU3RyaW5nLnRyaW0oKTtcblx0ICB2YXIgaGl0ID0gdGVtcGxhdGVDYWNoZS5nZXQoY2FjaGVLZXkpO1xuXHQgIGlmIChoaXQpIHtcblx0ICAgIHJldHVybiBoaXQ7XG5cdCAgfVxuXHRcblx0ICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0ICB2YXIgdGFnTWF0Y2ggPSB0ZW1wbGF0ZVN0cmluZy5tYXRjaCh0YWdSRSQxKTtcblx0ICB2YXIgZW50aXR5TWF0Y2ggPSBlbnRpdHlSRS50ZXN0KHRlbXBsYXRlU3RyaW5nKTtcblx0ICB2YXIgY29tbWVudE1hdGNoID0gY29tbWVudFJFLnRlc3QodGVtcGxhdGVTdHJpbmcpO1xuXHRcblx0ICBpZiAoIXRhZ01hdGNoICYmICFlbnRpdHlNYXRjaCAmJiAhY29tbWVudE1hdGNoKSB7XG5cdCAgICAvLyB0ZXh0IG9ubHksIHJldHVybiBhIHNpbmdsZSB0ZXh0IG5vZGUuXG5cdCAgICBmcmFnLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRlbXBsYXRlU3RyaW5nKSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciB0YWcgPSB0YWdNYXRjaCAmJiB0YWdNYXRjaFsxXTtcblx0ICAgIHZhciB3cmFwID0gbWFwW3RhZ10gfHwgbWFwLmVmYXVsdDtcblx0ICAgIHZhciBkZXB0aCA9IHdyYXBbMF07XG5cdCAgICB2YXIgcHJlZml4ID0gd3JhcFsxXTtcblx0ICAgIHZhciBzdWZmaXggPSB3cmFwWzJdO1xuXHQgICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XG5cdCAgICBub2RlLmlubmVySFRNTCA9IHByZWZpeCArIHRlbXBsYXRlU3RyaW5nICsgc3VmZml4O1xuXHQgICAgd2hpbGUgKGRlcHRoLS0pIHtcblx0ICAgICAgbm9kZSA9IG5vZGUubGFzdENoaWxkO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBjaGlsZDtcblx0ICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICB3aGlsZSAoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQpIHtcblx0ICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgICBmcmFnLmFwcGVuZENoaWxkKGNoaWxkKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKCFyYXcpIHtcblx0ICAgIHRyaW1Ob2RlKGZyYWcpO1xuXHQgIH1cblx0ICB0ZW1wbGF0ZUNhY2hlLnB1dChjYWNoZUtleSwgZnJhZyk7XG5cdCAgcmV0dXJuIGZyYWc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IGEgdGVtcGxhdGUgbm9kZSB0byBhIERvY3VtZW50RnJhZ21lbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG5vZGVUb0ZyYWdtZW50KG5vZGUpIHtcblx0ICAvLyBpZiBpdHMgYSB0ZW1wbGF0ZSB0YWcgYW5kIHRoZSBicm93c2VyIHN1cHBvcnRzIGl0LFxuXHQgIC8vIGl0cyBjb250ZW50IGlzIGFscmVhZHkgYSBkb2N1bWVudCBmcmFnbWVudC4gSG93ZXZlciwgaU9TIFNhZmFyaSBoYXNcblx0ICAvLyBidWcgd2hlbiB1c2luZyBkaXJlY3RseSBjbG9uZWQgdGVtcGxhdGUgY29udGVudCB3aXRoIHRvdWNoXG5cdCAgLy8gZXZlbnRzIGFuZCBjYW4gY2F1c2UgY3Jhc2hlcyB3aGVuIHRoZSBub2RlcyBhcmUgcmVtb3ZlZCBmcm9tIERPTSwgc28gd2Vcblx0ICAvLyBoYXZlIHRvIHRyZWF0IHRlbXBsYXRlIGVsZW1lbnRzIGFzIHN0cmluZyB0ZW1wbGF0ZXMuICgjMjgwNSlcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaXNSZWFsVGVtcGxhdGUobm9kZSkpIHtcblx0ICAgIHJldHVybiBzdHJpbmdUb0ZyYWdtZW50KG5vZGUuaW5uZXJIVE1MKTtcblx0ICB9XG5cdCAgLy8gc2NyaXB0IHRlbXBsYXRlXG5cdCAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ1NDUklQVCcpIHtcblx0ICAgIHJldHVybiBzdHJpbmdUb0ZyYWdtZW50KG5vZGUudGV4dENvbnRlbnQpO1xuXHQgIH1cblx0ICAvLyBub3JtYWwgbm9kZSwgY2xvbmUgaXQgdG8gYXZvaWQgbXV0YXRpbmcgdGhlIG9yaWdpbmFsXG5cdCAgdmFyIGNsb25lZE5vZGUgPSBjbG9uZU5vZGUobm9kZSk7XG5cdCAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdCAgdmFyIGNoaWxkO1xuXHQgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgd2hpbGUgKGNoaWxkID0gY2xvbmVkTm9kZS5maXJzdENoaWxkKSB7XG5cdCAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICBmcmFnLmFwcGVuZENoaWxkKGNoaWxkKTtcblx0ICB9XG5cdCAgdHJpbU5vZGUoZnJhZyk7XG5cdCAgcmV0dXJuIGZyYWc7XG5cdH1cblx0XG5cdC8vIFRlc3QgZm9yIHRoZSBwcmVzZW5jZSBvZiB0aGUgU2FmYXJpIHRlbXBsYXRlIGNsb25pbmcgYnVnXG5cdC8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3d1Zy5jZ2k/aWQ9MTM3NzU1XG5cdHZhciBoYXNCcm9rZW5UZW1wbGF0ZSA9IChmdW5jdGlvbiAoKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICBpZiAoaW5Ccm93c2VyKSB7XG5cdCAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgYS5pbm5lckhUTUwgPSAnPHRlbXBsYXRlPjE8L3RlbXBsYXRlPic7XG5cdCAgICByZXR1cm4gIWEuY2xvbmVOb2RlKHRydWUpLmZpcnN0Q2hpbGQuaW5uZXJIVE1MO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHR9KSgpO1xuXHRcblx0Ly8gVGVzdCBmb3IgSUUxMC8xMSB0ZXh0YXJlYSBwbGFjZWhvbGRlciBjbG9uZSBidWdcblx0dmFyIGhhc1RleHRhcmVhQ2xvbmVCdWcgPSAoZnVuY3Rpb24gKCkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgaWYgKGluQnJvd3Nlcikge1xuXHQgICAgdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuXHQgICAgdC5wbGFjZWhvbGRlciA9ICd0Jztcblx0ICAgIHJldHVybiB0LmNsb25lTm9kZSh0cnVlKS52YWx1ZSA9PT0gJ3QnO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHR9KSgpO1xuXHRcblx0LyoqXG5cdCAqIDEuIERlYWwgd2l0aCBTYWZhcmkgY2xvbmluZyBuZXN0ZWQgPHRlbXBsYXRlPiBidWcgYnlcblx0ICogICAgbWFudWFsbHkgY2xvbmluZyBhbGwgdGVtcGxhdGUgaW5zdGFuY2VzLlxuXHQgKiAyLiBEZWFsIHdpdGggSUUxMC8xMSB0ZXh0YXJlYSBwbGFjZWhvbGRlciBidWcgYnkgc2V0dGluZ1xuXHQgKiAgICB0aGUgY29ycmVjdCB2YWx1ZSBhZnRlciBjbG9uaW5nLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gbm9kZVxuXHQgKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2xvbmVOb2RlKG5vZGUpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoIW5vZGUucXVlcnlTZWxlY3RvckFsbCkge1xuXHQgICAgcmV0dXJuIG5vZGUuY2xvbmVOb2RlKCk7XG5cdCAgfVxuXHQgIHZhciByZXMgPSBub2RlLmNsb25lTm9kZSh0cnVlKTtcblx0ICB2YXIgaSwgb3JpZ2luYWwsIGNsb25lZDtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaGFzQnJva2VuVGVtcGxhdGUpIHtcblx0ICAgIHZhciB0ZW1wQ2xvbmUgPSByZXM7XG5cdCAgICBpZiAoaXNSZWFsVGVtcGxhdGUobm9kZSkpIHtcblx0ICAgICAgbm9kZSA9IG5vZGUuY29udGVudDtcblx0ICAgICAgdGVtcENsb25lID0gcmVzLmNvbnRlbnQ7XG5cdCAgICB9XG5cdCAgICBvcmlnaW5hbCA9IG5vZGUucXVlcnlTZWxlY3RvckFsbCgndGVtcGxhdGUnKTtcblx0ICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcblx0ICAgICAgY2xvbmVkID0gdGVtcENsb25lLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RlbXBsYXRlJyk7XG5cdCAgICAgIGkgPSBjbG9uZWQubGVuZ3RoO1xuXHQgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAgY2xvbmVkW2ldLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGNsb25lTm9kZShvcmlnaW5hbFtpXSksIGNsb25lZFtpXSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGhhc1RleHRhcmVhQ2xvbmVCdWcpIHtcblx0ICAgIGlmIChub2RlLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcblx0ICAgICAgcmVzLnZhbHVlID0gbm9kZS52YWx1ZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG9yaWdpbmFsID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZXh0YXJlYScpO1xuXHQgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoKSB7XG5cdCAgICAgICAgY2xvbmVkID0gcmVzLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJyk7XG5cdCAgICAgICAgaSA9IGNsb25lZC5sZW5ndGg7XG5cdCAgICAgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICAgICAgY2xvbmVkW2ldLnZhbHVlID0gb3JpZ2luYWxbaV0udmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcm9jZXNzIHRoZSB0ZW1wbGF0ZSBvcHRpb24gYW5kIG5vcm1hbGl6ZXMgaXQgaW50byBhXG5cdCAqIGEgRG9jdW1lbnRGcmFnbWVudCB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgcGFydGlhbCBvciBhXG5cdCAqIGluc3RhbmNlIHRlbXBsYXRlLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHRlbXBsYXRlXG5cdCAqICAgICAgICBQb3NzaWJsZSB2YWx1ZXMgaW5jbHVkZTpcblx0ICogICAgICAgIC0gRG9jdW1lbnRGcmFnbWVudCBvYmplY3Rcblx0ICogICAgICAgIC0gTm9kZSBvYmplY3Qgb2YgdHlwZSBUZW1wbGF0ZVxuXHQgKiAgICAgICAgLSBpZCBzZWxlY3RvcjogJyNzb21lLXRlbXBsYXRlLWlkJ1xuXHQgKiAgICAgICAgLSB0ZW1wbGF0ZSBzdHJpbmc6ICc8ZGl2PjxzcGFuPnt7bXNnfX08L3NwYW4+PC9kaXY+J1xuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHNob3VsZENsb25lXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gcmF3XG5cdCAqICAgICAgICBpbmxpbmUgSFRNTCBpbnRlcnBvbGF0aW9uLiBEbyBub3QgY2hlY2sgZm9yIGlkXG5cdCAqICAgICAgICBzZWxlY3RvciBhbmQga2VlcCB3aGl0ZXNwYWNlIGluIHRoZSBzdHJpbmcuXG5cdCAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlVGVtcGxhdGUodGVtcGxhdGUsIHNob3VsZENsb25lLCByYXcpIHtcblx0ICB2YXIgbm9kZSwgZnJhZztcblx0XG5cdCAgLy8gaWYgdGhlIHRlbXBsYXRlIGlzIGFscmVhZHkgYSBkb2N1bWVudCBmcmFnbWVudCxcblx0ICAvLyBkbyBub3RoaW5nXG5cdCAgaWYgKGlzRnJhZ21lbnQodGVtcGxhdGUpKSB7XG5cdCAgICB0cmltTm9kZSh0ZW1wbGF0ZSk7XG5cdCAgICByZXR1cm4gc2hvdWxkQ2xvbmUgPyBjbG9uZU5vZGUodGVtcGxhdGUpIDogdGVtcGxhdGU7XG5cdCAgfVxuXHRcblx0ICBpZiAodHlwZW9mIHRlbXBsYXRlID09PSAnc3RyaW5nJykge1xuXHQgICAgLy8gaWQgc2VsZWN0b3Jcblx0ICAgIGlmICghcmF3ICYmIHRlbXBsYXRlLmNoYXJBdCgwKSA9PT0gJyMnKSB7XG5cdCAgICAgIC8vIGlkIHNlbGVjdG9yIGNhbiBiZSBjYWNoZWQgdG9vXG5cdCAgICAgIGZyYWcgPSBpZFNlbGVjdG9yQ2FjaGUuZ2V0KHRlbXBsYXRlKTtcblx0ICAgICAgaWYgKCFmcmFnKSB7XG5cdCAgICAgICAgbm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRlbXBsYXRlLnNsaWNlKDEpKTtcblx0ICAgICAgICBpZiAobm9kZSkge1xuXHQgICAgICAgICAgZnJhZyA9IG5vZGVUb0ZyYWdtZW50KG5vZGUpO1xuXHQgICAgICAgICAgLy8gc2F2ZSBzZWxlY3RvciB0byBjYWNoZVxuXHQgICAgICAgICAgaWRTZWxlY3RvckNhY2hlLnB1dCh0ZW1wbGF0ZSwgZnJhZyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBub3JtYWwgc3RyaW5nIHRlbXBsYXRlXG5cdCAgICAgIGZyYWcgPSBzdHJpbmdUb0ZyYWdtZW50KHRlbXBsYXRlLCByYXcpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAodGVtcGxhdGUubm9kZVR5cGUpIHtcblx0ICAgIC8vIGEgZGlyZWN0IG5vZGVcblx0ICAgIGZyYWcgPSBub2RlVG9GcmFnbWVudCh0ZW1wbGF0ZSk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnJhZyAmJiBzaG91bGRDbG9uZSA/IGNsb25lTm9kZShmcmFnKSA6IGZyYWc7XG5cdH1cblx0XG5cdHZhciB0ZW1wbGF0ZSA9IE9iamVjdC5mcmVlemUoe1xuXHQgIGNsb25lTm9kZTogY2xvbmVOb2RlLFxuXHQgIHBhcnNlVGVtcGxhdGU6IHBhcnNlVGVtcGxhdGVcblx0fSk7XG5cdFxuXHR2YXIgaHRtbCA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8vIGEgY29tbWVudCBub2RlIG1lYW5zIHRoaXMgaXMgYSBiaW5kaW5nIGZvclxuXHQgICAgLy8ge3t7IGlubGluZSB1bmVzY2FwZWQgaHRtbCB9fX1cblx0ICAgIGlmICh0aGlzLmVsLm5vZGVUeXBlID09PSA4KSB7XG5cdCAgICAgIC8vIGhvbGQgbm9kZXNcblx0ICAgICAgdGhpcy5ub2RlcyA9IFtdO1xuXHQgICAgICAvLyByZXBsYWNlIHRoZSBwbGFjZWhvbGRlciB3aXRoIHByb3BlciBhbmNob3Jcblx0ICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtaHRtbCcpO1xuXHQgICAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdmFsdWUgPSBfdG9TdHJpbmcodmFsdWUpO1xuXHQgICAgaWYgKHRoaXMubm9kZXMpIHtcblx0ICAgICAgdGhpcy5zd2FwKHZhbHVlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuZWwuaW5uZXJIVE1MID0gdmFsdWU7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgc3dhcDogZnVuY3Rpb24gc3dhcCh2YWx1ZSkge1xuXHQgICAgLy8gcmVtb3ZlIG9sZCBub2Rlc1xuXHQgICAgdmFyIGkgPSB0aGlzLm5vZGVzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgcmVtb3ZlKHRoaXMubm9kZXNbaV0pO1xuXHQgICAgfVxuXHQgICAgLy8gY29udmVydCBuZXcgdmFsdWUgdG8gYSBmcmFnbWVudFxuXHQgICAgLy8gZG8gbm90IGF0dGVtcHQgdG8gcmV0cmlldmUgZnJvbSBpZCBzZWxlY3RvclxuXHQgICAgdmFyIGZyYWcgPSBwYXJzZVRlbXBsYXRlKHZhbHVlLCB0cnVlLCB0cnVlKTtcblx0ICAgIC8vIHNhdmUgYSByZWZlcmVuY2UgdG8gdGhlc2Ugbm9kZXMgc28gd2UgY2FuIHJlbW92ZSBsYXRlclxuXHQgICAgdGhpcy5ub2RlcyA9IHRvQXJyYXkoZnJhZy5jaGlsZE5vZGVzKTtcblx0ICAgIGJlZm9yZShmcmFnLCB0aGlzLmFuY2hvcik7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEFic3RyYWN0aW9uIGZvciBhIHBhcnRpYWxseS1jb21waWxlZCBmcmFnbWVudC5cblx0ICogQ2FuIG9wdGlvbmFsbHkgY29tcGlsZSBjb250ZW50IHdpdGggYSBjaGlsZCBzY29wZS5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gbGlua2VyXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcblx0ICogQHBhcmFtIHtWdWV9IFtob3N0XVxuXHQgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuXHQgKiBAcGFyYW0ge0ZyYWdtZW50fSBbcGFyZW50RnJhZ11cblx0ICovXG5cdGZ1bmN0aW9uIEZyYWdtZW50KGxpbmtlciwgdm0sIGZyYWcsIGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKSB7XG5cdCAgdGhpcy5jaGlsZHJlbiA9IFtdO1xuXHQgIHRoaXMuY2hpbGRGcmFncyA9IFtdO1xuXHQgIHRoaXMudm0gPSB2bTtcblx0ICB0aGlzLnNjb3BlID0gc2NvcGU7XG5cdCAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuXHQgIHRoaXMucGFyZW50RnJhZyA9IHBhcmVudEZyYWc7XG5cdCAgaWYgKHBhcmVudEZyYWcpIHtcblx0ICAgIHBhcmVudEZyYWcuY2hpbGRGcmFncy5wdXNoKHRoaXMpO1xuXHQgIH1cblx0ICB0aGlzLnVubGluayA9IGxpbmtlcih2bSwgZnJhZywgaG9zdCwgc2NvcGUsIHRoaXMpO1xuXHQgIHZhciBzaW5nbGUgPSB0aGlzLnNpbmdsZSA9IGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiZcblx0ICAvLyBkbyBub3QgZ28gc2luZ2xlIG1vZGUgaWYgdGhlIG9ubHkgbm9kZSBpcyBhbiBhbmNob3Jcblx0ICAhZnJhZy5jaGlsZE5vZGVzWzBdLl9fdl9hbmNob3I7XG5cdCAgaWYgKHNpbmdsZSkge1xuXHQgICAgdGhpcy5ub2RlID0gZnJhZy5jaGlsZE5vZGVzWzBdO1xuXHQgICAgdGhpcy5iZWZvcmUgPSBzaW5nbGVCZWZvcmU7XG5cdCAgICB0aGlzLnJlbW92ZSA9IHNpbmdsZVJlbW92ZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhpcy5ub2RlID0gY3JlYXRlQW5jaG9yKCdmcmFnbWVudC1zdGFydCcpO1xuXHQgICAgdGhpcy5lbmQgPSBjcmVhdGVBbmNob3IoJ2ZyYWdtZW50LWVuZCcpO1xuXHQgICAgdGhpcy5mcmFnID0gZnJhZztcblx0ICAgIHByZXBlbmQodGhpcy5ub2RlLCBmcmFnKTtcblx0ICAgIGZyYWcuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xuXHQgICAgdGhpcy5iZWZvcmUgPSBtdWx0aUJlZm9yZTtcblx0ICAgIHRoaXMucmVtb3ZlID0gbXVsdGlSZW1vdmU7XG5cdCAgfVxuXHQgIHRoaXMubm9kZS5fX3ZfZnJhZyA9IHRoaXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDYWxsIGF0dGFjaC9kZXRhY2ggZm9yIGFsbCBjb21wb25lbnRzIGNvbnRhaW5lZCB3aXRoaW5cblx0ICogdGhpcyBmcmFnbWVudC4gQWxzbyBkbyBzbyByZWN1cnNpdmVseSBmb3IgYWxsIGNoaWxkXG5cdCAqIGZyYWdtZW50cy5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaG9va1xuXHQgKi9cblx0XG5cdEZyYWdtZW50LnByb3RvdHlwZS5jYWxsSG9vayA9IGZ1bmN0aW9uIChob29rKSB7XG5cdCAgdmFyIGksIGw7XG5cdCAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHRoaXMuY2hpbGRGcmFnc1tpXS5jYWxsSG9vayhob29rKTtcblx0ICB9XG5cdCAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBob29rKHRoaXMuY2hpbGRyZW5baV0pO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBJbnNlcnQgZnJhZ21lbnQgYmVmb3JlIHRhcmdldCwgc2luZ2xlIG5vZGUgdmVyc2lvblxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHdpdGhUcmFuc2l0aW9uXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2luZ2xlQmVmb3JlKHRhcmdldCwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICB0aGlzLmluc2VydGVkID0gdHJ1ZTtcblx0ICB2YXIgbWV0aG9kID0gd2l0aFRyYW5zaXRpb24gIT09IGZhbHNlID8gYmVmb3JlV2l0aFRyYW5zaXRpb24gOiBiZWZvcmU7XG5cdCAgbWV0aG9kKHRoaXMubm9kZSwgdGFyZ2V0LCB0aGlzLnZtKTtcblx0ICBpZiAoaW5Eb2ModGhpcy5ub2RlKSkge1xuXHQgICAgdGhpcy5jYWxsSG9vayhhdHRhY2gpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBmcmFnbWVudCwgc2luZ2xlIG5vZGUgdmVyc2lvblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHNpbmdsZVJlbW92ZSgpIHtcblx0ICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG5cdCAgdmFyIHNob3VsZENhbGxSZW1vdmUgPSBpbkRvYyh0aGlzLm5vZGUpO1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICB0aGlzLmJlZm9yZVJlbW92ZSgpO1xuXHQgIHJlbW92ZVdpdGhUcmFuc2l0aW9uKHRoaXMubm9kZSwgdGhpcy52bSwgZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKHNob3VsZENhbGxSZW1vdmUpIHtcblx0ICAgICAgc2VsZi5jYWxsSG9vayhkZXRhY2gpO1xuXHQgICAgfVxuXHQgICAgc2VsZi5kZXN0cm95KCk7XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbnNlcnQgZnJhZ21lbnQgYmVmb3JlIHRhcmdldCwgbXVsdGktbm9kZXMgdmVyc2lvblxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHdpdGhUcmFuc2l0aW9uXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbXVsdGlCZWZvcmUodGFyZ2V0LCB3aXRoVHJhbnNpdGlvbikge1xuXHQgIHRoaXMuaW5zZXJ0ZWQgPSB0cnVlO1xuXHQgIHZhciB2bSA9IHRoaXMudm07XG5cdCAgdmFyIG1ldGhvZCA9IHdpdGhUcmFuc2l0aW9uICE9PSBmYWxzZSA/IGJlZm9yZVdpdGhUcmFuc2l0aW9uIDogYmVmb3JlO1xuXHQgIG1hcE5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCBmdW5jdGlvbiAobm9kZSkge1xuXHQgICAgbWV0aG9kKG5vZGUsIHRhcmdldCwgdm0pO1xuXHQgIH0pO1xuXHQgIGlmIChpbkRvYyh0aGlzLm5vZGUpKSB7XG5cdCAgICB0aGlzLmNhbGxIb29rKGF0dGFjaCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGZyYWdtZW50LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbXVsdGlSZW1vdmUoKSB7XG5cdCAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICB2YXIgc2hvdWxkQ2FsbFJlbW92ZSA9IGluRG9jKHRoaXMubm9kZSk7XG5cdCAgdGhpcy5iZWZvcmVSZW1vdmUoKTtcblx0ICByZW1vdmVOb2RlUmFuZ2UodGhpcy5ub2RlLCB0aGlzLmVuZCwgdGhpcy52bSwgdGhpcy5mcmFnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoc2hvdWxkQ2FsbFJlbW92ZSkge1xuXHQgICAgICBzZWxmLmNhbGxIb29rKGRldGFjaCk7XG5cdCAgICB9XG5cdCAgICBzZWxmLmRlc3Ryb3koKTtcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByZXBhcmUgdGhlIGZyYWdtZW50IGZvciByZW1vdmFsLlxuXHQgKi9cblx0XG5cdEZyYWdtZW50LnByb3RvdHlwZS5iZWZvcmVSZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGksIGw7XG5cdCAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIC8vIGNhbGwgdGhlIHNhbWUgbWV0aG9kIHJlY3Vyc2l2ZWx5IG9uIGNoaWxkXG5cdCAgICAvLyBmcmFnbWVudHMsIGRlcHRoLWZpcnN0XG5cdCAgICB0aGlzLmNoaWxkRnJhZ3NbaV0uYmVmb3JlUmVtb3ZlKGZhbHNlKTtcblx0ICB9XG5cdCAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAvLyBDYWxsIGRlc3Ryb3kgZm9yIGFsbCBjb250YWluZWQgaW5zdGFuY2VzLFxuXHQgICAgLy8gd2l0aCByZW1vdmU6ZmFsc2UgYW5kIGRlZmVyOnRydWUuXG5cdCAgICAvLyBEZWZlciBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZSBuZWVkIHRvXG5cdCAgICAvLyBrZWVwIHRoZSBjaGlsZHJlbiB0byBjYWxsIGRldGFjaCBob29rc1xuXHQgICAgLy8gb24gdGhlbS5cblx0ICAgIHRoaXMuY2hpbGRyZW5baV0uJGRlc3Ryb3koZmFsc2UsIHRydWUpO1xuXHQgIH1cblx0ICB2YXIgZGlycyA9IHRoaXMudW5saW5rLmRpcnM7XG5cdCAgZm9yIChpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAvLyBkaXNhYmxlIHRoZSB3YXRjaGVycyBvbiBhbGwgdGhlIGRpcmVjdGl2ZXNcblx0ICAgIC8vIHNvIHRoYXQgdGhlIHJlbmRlcmVkIGNvbnRlbnQgc3RheXMgdGhlIHNhbWVcblx0ICAgIC8vIGR1cmluZyByZW1vdmFsLlxuXHQgICAgZGlyc1tpXS5fd2F0Y2hlciAmJiBkaXJzW2ldLl93YXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIERlc3Ryb3kgdGhlIGZyYWdtZW50LlxuXHQgKi9cblx0XG5cdEZyYWdtZW50LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuXHQgIGlmICh0aGlzLnBhcmVudEZyYWcpIHtcblx0ICAgIHRoaXMucGFyZW50RnJhZy5jaGlsZEZyYWdzLiRyZW1vdmUodGhpcyk7XG5cdCAgfVxuXHQgIHRoaXMubm9kZS5fX3ZfZnJhZyA9IG51bGw7XG5cdCAgdGhpcy51bmxpbmsoKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDYWxsIGF0dGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IGNoaWxkXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXR0YWNoKGNoaWxkKSB7XG5cdCAgaWYgKCFjaGlsZC5faXNBdHRhY2hlZCAmJiBpbkRvYyhjaGlsZC4kZWwpKSB7XG5cdCAgICBjaGlsZC5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ2FsbCBkZXRhY2ggaG9vayBmb3IgYSBWdWUgaW5zdGFuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGRldGFjaChjaGlsZCkge1xuXHQgIGlmIChjaGlsZC5faXNBdHRhY2hlZCAmJiAhaW5Eb2MoY2hpbGQuJGVsKSkge1xuXHQgICAgY2hpbGQuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGxpbmtlckNhY2hlID0gbmV3IENhY2hlKDUwMDApO1xuXHRcblx0LyoqXG5cdCAqIEEgZmFjdG9yeSB0aGF0IGNhbiBiZSB1c2VkIHRvIGNyZWF0ZSBpbnN0YW5jZXMgb2YgYVxuXHQgKiBmcmFnbWVudC4gQ2FjaGVzIHRoZSBjb21waWxlZCBsaW5rZXIgaWYgcG9zc2libGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0VsZW1lbnR8U3RyaW5nfSBlbFxuXHQgKi9cblx0ZnVuY3Rpb24gRnJhZ21lbnRGYWN0b3J5KHZtLCBlbCkge1xuXHQgIHRoaXMudm0gPSB2bTtcblx0ICB2YXIgdGVtcGxhdGU7XG5cdCAgdmFyIGlzU3RyaW5nID0gdHlwZW9mIGVsID09PSAnc3RyaW5nJztcblx0ICBpZiAoaXNTdHJpbmcgfHwgaXNUZW1wbGF0ZShlbCkgJiYgIWVsLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG5cdCAgICB0ZW1wbGF0ZSA9IHBhcnNlVGVtcGxhdGUoZWwsIHRydWUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0ICAgIHRlbXBsYXRlLmFwcGVuZENoaWxkKGVsKTtcblx0ICB9XG5cdCAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuXHQgIC8vIGxpbmtlciBjYW4gYmUgY2FjaGVkLCBidXQgb25seSBmb3IgY29tcG9uZW50c1xuXHQgIHZhciBsaW5rZXI7XG5cdCAgdmFyIGNpZCA9IHZtLmNvbnN0cnVjdG9yLmNpZDtcblx0ICBpZiAoY2lkID4gMCkge1xuXHQgICAgdmFyIGNhY2hlSWQgPSBjaWQgKyAoaXNTdHJpbmcgPyBlbCA6IGdldE91dGVySFRNTChlbCkpO1xuXHQgICAgbGlua2VyID0gbGlua2VyQ2FjaGUuZ2V0KGNhY2hlSWQpO1xuXHQgICAgaWYgKCFsaW5rZXIpIHtcblx0ICAgICAgbGlua2VyID0gY29tcGlsZSh0ZW1wbGF0ZSwgdm0uJG9wdGlvbnMsIHRydWUpO1xuXHQgICAgICBsaW5rZXJDYWNoZS5wdXQoY2FjaGVJZCwgbGlua2VyKTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgbGlua2VyID0gY29tcGlsZSh0ZW1wbGF0ZSwgdm0uJG9wdGlvbnMsIHRydWUpO1xuXHQgIH1cblx0ICB0aGlzLmxpbmtlciA9IGxpbmtlcjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZSBhIGZyYWdtZW50IGluc3RhbmNlIHdpdGggZ2l2ZW4gaG9zdCBhbmQgc2NvcGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSBob3N0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzY29wZVxuXHQgKiBAcGFyYW0ge0ZyYWdtZW50fSBwYXJlbnRGcmFnXG5cdCAqL1xuXHRcblx0RnJhZ21lbnRGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpIHtcblx0ICB2YXIgZnJhZyA9IGNsb25lTm9kZSh0aGlzLnRlbXBsYXRlKTtcblx0ICByZXR1cm4gbmV3IEZyYWdtZW50KHRoaXMubGlua2VyLCB0aGlzLnZtLCBmcmFnLCBob3N0LCBzY29wZSwgcGFyZW50RnJhZyk7XG5cdH07XG5cdFxuXHR2YXIgT04gPSA3MDA7XG5cdHZhciBNT0RFTCA9IDgwMDtcblx0dmFyIEJJTkQgPSA4NTA7XG5cdHZhciBUUkFOU0lUSU9OID0gMTEwMDtcblx0dmFyIEVMID0gMTUwMDtcblx0dmFyIENPTVBPTkVOVCA9IDE1MDA7XG5cdHZhciBQQVJUSUFMID0gMTc1MDtcblx0dmFyIElGID0gMjEwMDtcblx0dmFyIEZPUiA9IDIyMDA7XG5cdHZhciBTTE9UID0gMjMwMDtcblx0XG5cdHZhciB1aWQkMyA9IDA7XG5cdFxuXHR2YXIgdkZvciA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IEZPUixcblx0ICB0ZXJtaW5hbDogdHJ1ZSxcblx0XG5cdCAgcGFyYW1zOiBbJ3RyYWNrLWJ5JywgJ3N0YWdnZXInLCAnZW50ZXItc3RhZ2dlcicsICdsZWF2ZS1zdGFnZ2VyJ10sXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyBzdXBwb3J0IFwiaXRlbSBpbi9vZiBpdGVtc1wiIHN5bnRheFxuXHQgICAgdmFyIGluTWF0Y2ggPSB0aGlzLmV4cHJlc3Npb24ubWF0Y2goLyguKikgKD86aW58b2YpICguKikvKTtcblx0ICAgIGlmIChpbk1hdGNoKSB7XG5cdCAgICAgIHZhciBpdE1hdGNoID0gaW5NYXRjaFsxXS5tYXRjaCgvXFwoKC4qKSwoLiopXFwpLyk7XG5cdCAgICAgIGlmIChpdE1hdGNoKSB7XG5cdCAgICAgICAgdGhpcy5pdGVyYXRvciA9IGl0TWF0Y2hbMV0udHJpbSgpO1xuXHQgICAgICAgIHRoaXMuYWxpYXMgPSBpdE1hdGNoWzJdLnRyaW0oKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmFsaWFzID0gaW5NYXRjaFsxXS50cmltKCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5leHByZXNzaW9uID0gaW5NYXRjaFsyXTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoIXRoaXMuYWxpYXMpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHYtZm9yIGV4cHJlc3Npb24gXCInICsgdGhpcy5kZXNjcmlwdG9yLnJhdyArICdcIjogJyArICdhbGlhcyBpcyByZXF1aXJlZC4nLCB0aGlzLnZtKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHVpZCBhcyBhIGNhY2hlIGlkZW50aWZpZXJcblx0ICAgIHRoaXMuaWQgPSAnX192LWZvcl9fJyArICsrdWlkJDM7XG5cdFxuXHQgICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhbiBvcHRpb24gbGlzdCxcblx0ICAgIC8vIHNvIHRoYXQgd2Uga25vdyBpZiB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgPHNlbGVjdD4nc1xuXHQgICAgLy8gdi1tb2RlbCB3aGVuIHRoZSBvcHRpb24gbGlzdCBoYXMgY2hhbmdlZC5cblx0ICAgIC8vIGJlY2F1c2Ugdi1tb2RlbCBoYXMgYSBsb3dlciBwcmlvcml0eSB0aGFuIHYtZm9yLFxuXHQgICAgLy8gdGhlIHYtbW9kZWwgaXMgbm90IGJvdW5kIGhlcmUgeWV0LCBzbyB3ZSBoYXZlIHRvXG5cdCAgICAvLyByZXRyaXZlIGl0IGluIHRoZSBhY3R1YWwgdXBkYXRlTW9kZWwoKSBmdW5jdGlvbi5cblx0ICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWU7XG5cdCAgICB0aGlzLmlzT3B0aW9uID0gKHRhZyA9PT0gJ09QVElPTicgfHwgdGFnID09PSAnT1BUR1JPVVAnKSAmJiB0aGlzLmVsLnBhcmVudE5vZGUudGFnTmFtZSA9PT0gJ1NFTEVDVCc7XG5cdFxuXHQgICAgLy8gc2V0dXAgYW5jaG9yIG5vZGVzXG5cdCAgICB0aGlzLnN0YXJ0ID0gY3JlYXRlQW5jaG9yKCd2LWZvci1zdGFydCcpO1xuXHQgICAgdGhpcy5lbmQgPSBjcmVhdGVBbmNob3IoJ3YtZm9yLWVuZCcpO1xuXHQgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmVuZCk7XG5cdCAgICBiZWZvcmUodGhpcy5zdGFydCwgdGhpcy5lbmQpO1xuXHRcblx0ICAgIC8vIGNhY2hlXG5cdCAgICB0aGlzLmNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0XG5cdCAgICAvLyBmcmFnbWVudCBmYWN0b3J5XG5cdCAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHRoaXMuZWwpO1xuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGRhdGEpIHtcblx0ICAgIHRoaXMuZGlmZihkYXRhKTtcblx0ICAgIHRoaXMudXBkYXRlUmVmKCk7XG5cdCAgICB0aGlzLnVwZGF0ZU1vZGVsKCk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRGlmZiwgYmFzZWQgb24gbmV3IGRhdGEgYW5kIG9sZCBkYXRhLCBkZXRlcm1pbmUgdGhlXG5cdCAgICogbWluaW11bSBhbW91bnQgb2YgRE9NIG1hbmlwdWxhdGlvbnMgbmVlZGVkIHRvIG1ha2UgdGhlXG5cdCAgICogRE9NIHJlZmxlY3QgdGhlIG5ldyBkYXRhIEFycmF5LlxuXHQgICAqXG5cdCAgICogVGhlIGFsZ29yaXRobSBkaWZmcyB0aGUgbmV3IGRhdGEgQXJyYXkgYnkgc3RvcmluZyBhXG5cdCAgICogaGlkZGVuIHJlZmVyZW5jZSB0byBhbiBvd25lciB2bSBpbnN0YW5jZSBvbiBwcmV2aW91c2x5XG5cdCAgICogc2VlbiBkYXRhLiBUaGlzIGFsbG93cyB1cyB0byBhY2hpZXZlIE8obikgd2hpY2ggaXNcblx0ICAgKiBiZXR0ZXIgdGhhbiBhIGxldmVuc2h0ZWluIGRpc3RhbmNlIGJhc2VkIGFsZ29yaXRobSxcblx0ICAgKiB3aGljaCBpcyBPKG0gKiBuKS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7QXJyYXl9IGRhdGFcblx0ICAgKi9cblx0XG5cdCAgZGlmZjogZnVuY3Rpb24gZGlmZihkYXRhKSB7XG5cdCAgICAvLyBjaGVjayBpZiB0aGUgQXJyYXkgd2FzIGNvbnZlcnRlZCBmcm9tIGFuIE9iamVjdFxuXHQgICAgdmFyIGl0ZW0gPSBkYXRhWzBdO1xuXHQgICAgdmFyIGNvbnZlcnRlZEZyb21PYmplY3QgPSB0aGlzLmZyb21PYmplY3QgPSBpc09iamVjdChpdGVtKSAmJiBoYXNPd24oaXRlbSwgJyRrZXknKSAmJiBoYXNPd24oaXRlbSwgJyR2YWx1ZScpO1xuXHRcblx0ICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcblx0ICAgIHZhciBvbGRGcmFncyA9IHRoaXMuZnJhZ3M7XG5cdCAgICB2YXIgZnJhZ3MgPSB0aGlzLmZyYWdzID0gbmV3IEFycmF5KGRhdGEubGVuZ3RoKTtcblx0ICAgIHZhciBhbGlhcyA9IHRoaXMuYWxpYXM7XG5cdCAgICB2YXIgaXRlcmF0b3IgPSB0aGlzLml0ZXJhdG9yO1xuXHQgICAgdmFyIHN0YXJ0ID0gdGhpcy5zdGFydDtcblx0ICAgIHZhciBlbmQgPSB0aGlzLmVuZDtcblx0ICAgIHZhciBpbkRvY3VtZW50ID0gaW5Eb2Moc3RhcnQpO1xuXHQgICAgdmFyIGluaXQgPSAhb2xkRnJhZ3M7XG5cdCAgICB2YXIgaSwgbCwgZnJhZywga2V5LCB2YWx1ZSwgcHJpbWl0aXZlO1xuXHRcblx0ICAgIC8vIEZpcnN0IHBhc3MsIGdvIHRocm91Z2ggdGhlIG5ldyBBcnJheSBhbmQgZmlsbCB1cFxuXHQgICAgLy8gdGhlIG5ldyBmcmFncyBhcnJheS4gSWYgYSBwaWVjZSBvZiBkYXRhIGhhcyBhIGNhY2hlZFxuXHQgICAgLy8gaW5zdGFuY2UgZm9yIGl0LCB3ZSByZXVzZSBpdC4gT3RoZXJ3aXNlIGJ1aWxkIGEgbmV3XG5cdCAgICAvLyBpbnN0YW5jZS5cblx0ICAgIGZvciAoaSA9IDAsIGwgPSBkYXRhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBpdGVtID0gZGF0YVtpXTtcblx0ICAgICAga2V5ID0gY29udmVydGVkRnJvbU9iamVjdCA/IGl0ZW0uJGtleSA6IG51bGw7XG5cdCAgICAgIHZhbHVlID0gY29udmVydGVkRnJvbU9iamVjdCA/IGl0ZW0uJHZhbHVlIDogaXRlbTtcblx0ICAgICAgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcblx0ICAgICAgZnJhZyA9ICFpbml0ICYmIHRoaXMuZ2V0Q2FjaGVkRnJhZyh2YWx1ZSwgaSwga2V5KTtcblx0ICAgICAgaWYgKGZyYWcpIHtcblx0ICAgICAgICAvLyByZXVzYWJsZSBmcmFnbWVudFxuXHQgICAgICAgIGZyYWcucmV1c2VkID0gdHJ1ZTtcblx0ICAgICAgICAvLyB1cGRhdGUgJGluZGV4XG5cdCAgICAgICAgZnJhZy5zY29wZS4kaW5kZXggPSBpO1xuXHQgICAgICAgIC8vIHVwZGF0ZSAka2V5XG5cdCAgICAgICAgaWYgKGtleSkge1xuXHQgICAgICAgICAgZnJhZy5zY29wZS4ka2V5ID0ga2V5O1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyB1cGRhdGUgaXRlcmF0b3Jcblx0ICAgICAgICBpZiAoaXRlcmF0b3IpIHtcblx0ICAgICAgICAgIGZyYWcuc2NvcGVbaXRlcmF0b3JdID0ga2V5ICE9PSBudWxsID8ga2V5IDogaTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gdXBkYXRlIGRhdGEgZm9yIHRyYWNrLWJ5LCBvYmplY3QgcmVwZWF0ICZcblx0ICAgICAgICAvLyBwcmltaXRpdmUgdmFsdWVzLlxuXHQgICAgICAgIGlmICh0cmFja0J5S2V5IHx8IGNvbnZlcnRlZEZyb21PYmplY3QgfHwgcHJpbWl0aXZlKSB7XG5cdCAgICAgICAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIGZyYWcuc2NvcGVbYWxpYXNdID0gdmFsdWU7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gbmV3IGlzbnRhbmNlXG5cdCAgICAgICAgZnJhZyA9IHRoaXMuY3JlYXRlKHZhbHVlLCBhbGlhcywgaSwga2V5KTtcblx0ICAgICAgICBmcmFnLmZyZXNoID0gIWluaXQ7XG5cdCAgICAgIH1cblx0ICAgICAgZnJhZ3NbaV0gPSBmcmFnO1xuXHQgICAgICBpZiAoaW5pdCkge1xuXHQgICAgICAgIGZyYWcuYmVmb3JlKGVuZCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyB3ZSdyZSBkb25lIGZvciB0aGUgaW5pdGlhbCByZW5kZXIuXG5cdCAgICBpZiAoaW5pdCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gU2Vjb25kIHBhc3MsIGdvIHRocm91Z2ggdGhlIG9sZCBmcmFnbWVudHMgYW5kXG5cdCAgICAvLyBkZXN0cm95IHRob3NlIHdobyBhcmUgbm90IHJldXNlZCAoYW5kIHJlbW92ZSB0aGVtXG5cdCAgICAvLyBmcm9tIGNhY2hlKVxuXHQgICAgdmFyIHJlbW92YWxJbmRleCA9IDA7XG5cdCAgICB2YXIgdG90YWxSZW1vdmVkID0gb2xkRnJhZ3MubGVuZ3RoIC0gZnJhZ3MubGVuZ3RoO1xuXHQgICAgLy8gd2hlbiByZW1vdmluZyBhIGxhcmdlIG51bWJlciBvZiBmcmFnbWVudHMsIHdhdGNoZXIgcmVtb3ZhbFxuXHQgICAgLy8gdHVybnMgb3V0IHRvIGJlIGEgcGVyZiBib3R0bGVuZWNrLCBzbyB3ZSBiYXRjaCB0aGUgd2F0Y2hlclxuXHQgICAgLy8gcmVtb3ZhbHMgaW50byBhIHNpbmdsZSBmaWx0ZXIgY2FsbCFcblx0ICAgIHRoaXMudm0uX3ZGb3JSZW1vdmluZyA9IHRydWU7XG5cdCAgICBmb3IgKGkgPSAwLCBsID0gb2xkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGZyYWcgPSBvbGRGcmFnc1tpXTtcblx0ICAgICAgaWYgKCFmcmFnLnJldXNlZCkge1xuXHQgICAgICAgIHRoaXMuZGVsZXRlQ2FjaGVkRnJhZyhmcmFnKTtcblx0ICAgICAgICB0aGlzLnJlbW92ZShmcmFnLCByZW1vdmFsSW5kZXgrKywgdG90YWxSZW1vdmVkLCBpbkRvY3VtZW50KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdGhpcy52bS5fdkZvclJlbW92aW5nID0gZmFsc2U7XG5cdCAgICBpZiAocmVtb3ZhbEluZGV4KSB7XG5cdCAgICAgIHRoaXMudm0uX3dhdGNoZXJzID0gdGhpcy52bS5fd2F0Y2hlcnMuZmlsdGVyKGZ1bmN0aW9uICh3KSB7XG5cdCAgICAgICAgcmV0dXJuIHcuYWN0aXZlO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBGaW5hbCBwYXNzLCBtb3ZlL2luc2VydCBuZXcgZnJhZ21lbnRzIGludG8gdGhlXG5cdCAgICAvLyByaWdodCBwbGFjZS5cblx0ICAgIHZhciB0YXJnZXRQcmV2LCBwcmV2RWwsIGN1cnJlbnRQcmV2O1xuXHQgICAgdmFyIGluc2VydGlvbkluZGV4ID0gMDtcblx0ICAgIGZvciAoaSA9IDAsIGwgPSBmcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgZnJhZyA9IGZyYWdzW2ldO1xuXHQgICAgICAvLyB0aGlzIGlzIHRoZSBmcmFnIHRoYXQgd2Ugc2hvdWxkIGJlIGFmdGVyXG5cdCAgICAgIHRhcmdldFByZXYgPSBmcmFnc1tpIC0gMV07XG5cdCAgICAgIHByZXZFbCA9IHRhcmdldFByZXYgPyB0YXJnZXRQcmV2LnN0YWdnZXJDYiA/IHRhcmdldFByZXYuc3RhZ2dlckFuY2hvciA6IHRhcmdldFByZXYuZW5kIHx8IHRhcmdldFByZXYubm9kZSA6IHN0YXJ0O1xuXHQgICAgICBpZiAoZnJhZy5yZXVzZWQgJiYgIWZyYWcuc3RhZ2dlckNiKSB7XG5cdCAgICAgICAgY3VycmVudFByZXYgPSBmaW5kUHJldkZyYWcoZnJhZywgc3RhcnQsIHRoaXMuaWQpO1xuXHQgICAgICAgIGlmIChjdXJyZW50UHJldiAhPT0gdGFyZ2V0UHJldiAmJiAoIWN1cnJlbnRQcmV2IHx8XG5cdCAgICAgICAgLy8gb3B0aW1pemF0aW9uIGZvciBtb3ZpbmcgYSBzaW5nbGUgaXRlbS5cblx0ICAgICAgICAvLyB0aGFua3MgdG8gc3VnZ2VzdGlvbnMgYnkgQGxpdm9yYXMgaW4gIzE4MDdcblx0ICAgICAgICBmaW5kUHJldkZyYWcoY3VycmVudFByZXYsIHN0YXJ0LCB0aGlzLmlkKSAhPT0gdGFyZ2V0UHJldikpIHtcblx0ICAgICAgICAgIHRoaXMubW92ZShmcmFnLCBwcmV2RWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBuZXcgaW5zdGFuY2UsIG9yIHN0aWxsIGluIHN0YWdnZXIuXG5cdCAgICAgICAgLy8gaW5zZXJ0IHdpdGggdXBkYXRlZCBzdGFnZ2VyIGluZGV4LlxuXHQgICAgICAgIHRoaXMuaW5zZXJ0KGZyYWcsIGluc2VydGlvbkluZGV4KyssIHByZXZFbCwgaW5Eb2N1bWVudCk7XG5cdCAgICAgIH1cblx0ICAgICAgZnJhZy5yZXVzZWQgPSBmcmFnLmZyZXNoID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ3JlYXRlIGEgbmV3IGZyYWdtZW50IGluc3RhbmNlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBhbGlhc1xuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuXHQgICAqIEByZXR1cm4ge0ZyYWdtZW50fVxuXHQgICAqL1xuXHRcblx0ICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZSh2YWx1ZSwgYWxpYXMsIGluZGV4LCBrZXkpIHtcblx0ICAgIHZhciBob3N0ID0gdGhpcy5faG9zdDtcblx0ICAgIC8vIGNyZWF0ZSBpdGVyYXRpb24gc2NvcGVcblx0ICAgIHZhciBwYXJlbnRTY29wZSA9IHRoaXMuX3Njb3BlIHx8IHRoaXMudm07XG5cdCAgICB2YXIgc2NvcGUgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlKTtcblx0ICAgIC8vIHJlZiBob2xkZXIgZm9yIHRoZSBzY29wZVxuXHQgICAgc2NvcGUuJHJlZnMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlLiRyZWZzKTtcblx0ICAgIHNjb3BlLiRlbHMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlLiRlbHMpO1xuXHQgICAgLy8gbWFrZSBzdXJlIHBvaW50ICRwYXJlbnQgdG8gcGFyZW50IHNjb3BlXG5cdCAgICBzY29wZS4kcGFyZW50ID0gcGFyZW50U2NvcGU7XG5cdCAgICAvLyBmb3IgdHdvLXdheSBiaW5kaW5nIG9uIGFsaWFzXG5cdCAgICBzY29wZS4kZm9yQ29udGV4dCA9IHRoaXM7XG5cdCAgICAvLyBkZWZpbmUgc2NvcGUgcHJvcGVydGllc1xuXHQgICAgLy8gaW1wb3J0YW50OiBkZWZpbmUgdGhlIHNjb3BlIGFsaWFzIHdpdGhvdXQgZm9yY2VkIGNvbnZlcnNpb25cblx0ICAgIC8vIHNvIHRoYXQgZnJvemVuIGRhdGEgc3RydWN0dXJlcyByZW1haW4gbm9uLXJlYWN0aXZlLlxuXHQgICAgd2l0aG91dENvbnZlcnNpb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgYWxpYXMsIHZhbHVlKTtcblx0ICAgIH0pO1xuXHQgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsICckaW5kZXgnLCBpbmRleCk7XG5cdCAgICBpZiAoa2V5KSB7XG5cdCAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCAnJGtleScsIGtleSk7XG5cdCAgICB9IGVsc2UgaWYgKHNjb3BlLiRrZXkpIHtcblx0ICAgICAgLy8gYXZvaWQgYWNjaWRlbnRhbCBmYWxsYmFja1xuXHQgICAgICBkZWYoc2NvcGUsICcka2V5JywgbnVsbCk7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5pdGVyYXRvcikge1xuXHQgICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgdGhpcy5pdGVyYXRvciwga2V5ICE9PSBudWxsID8ga2V5IDogaW5kZXgpO1xuXHQgICAgfVxuXHQgICAgdmFyIGZyYWcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKGhvc3QsIHNjb3BlLCB0aGlzLl9mcmFnKTtcblx0ICAgIGZyYWcuZm9ySWQgPSB0aGlzLmlkO1xuXHQgICAgdGhpcy5jYWNoZUZyYWcodmFsdWUsIGZyYWcsIGluZGV4LCBrZXkpO1xuXHQgICAgcmV0dXJuIGZyYWc7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogVXBkYXRlIHRoZSB2LXJlZiBvbiBvd25lciB2bS5cblx0ICAgKi9cblx0XG5cdCAgdXBkYXRlUmVmOiBmdW5jdGlvbiB1cGRhdGVSZWYoKSB7XG5cdCAgICB2YXIgcmVmID0gdGhpcy5kZXNjcmlwdG9yLnJlZjtcblx0ICAgIGlmICghcmVmKSByZXR1cm47XG5cdCAgICB2YXIgaGFzaCA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kcmVmcztcblx0ICAgIHZhciByZWZzO1xuXHQgICAgaWYgKCF0aGlzLmZyb21PYmplY3QpIHtcblx0ICAgICAgcmVmcyA9IHRoaXMuZnJhZ3MubWFwKGZpbmRWbUZyb21GcmFnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJlZnMgPSB7fTtcblx0ICAgICAgdGhpcy5mcmFncy5mb3JFYWNoKGZ1bmN0aW9uIChmcmFnKSB7XG5cdCAgICAgICAgcmVmc1tmcmFnLnNjb3BlLiRrZXldID0gZmluZFZtRnJvbUZyYWcoZnJhZyk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgICAgaGFzaFtyZWZdID0gcmVmcztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBGb3Igb3B0aW9uIGxpc3RzLCB1cGRhdGUgdGhlIGNvbnRhaW5pbmcgdi1tb2RlbCBvblxuXHQgICAqIHBhcmVudCA8c2VsZWN0Pi5cblx0ICAgKi9cblx0XG5cdCAgdXBkYXRlTW9kZWw6IGZ1bmN0aW9uIHVwZGF0ZU1vZGVsKCkge1xuXHQgICAgaWYgKHRoaXMuaXNPcHRpb24pIHtcblx0ICAgICAgdmFyIHBhcmVudCA9IHRoaXMuc3RhcnQucGFyZW50Tm9kZTtcblx0ICAgICAgdmFyIG1vZGVsID0gcGFyZW50ICYmIHBhcmVudC5fX3ZfbW9kZWw7XG5cdCAgICAgIGlmIChtb2RlbCkge1xuXHQgICAgICAgIG1vZGVsLmZvcmNlVXBkYXRlKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBJbnNlcnQgYSBmcmFnbWVudC4gSGFuZGxlcyBzdGFnZ2VyaW5nLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gcHJldkVsXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBpbkRvY3VtZW50XG5cdCAgICovXG5cdFxuXHQgIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KGZyYWcsIGluZGV4LCBwcmV2RWwsIGluRG9jdW1lbnQpIHtcblx0ICAgIGlmIChmcmFnLnN0YWdnZXJDYikge1xuXHQgICAgICBmcmFnLnN0YWdnZXJDYi5jYW5jZWwoKTtcblx0ICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgdmFyIHN0YWdnZXJBbW91bnQgPSB0aGlzLmdldFN0YWdnZXIoZnJhZywgaW5kZXgsIG51bGwsICdlbnRlcicpO1xuXHQgICAgaWYgKGluRG9jdW1lbnQgJiYgc3RhZ2dlckFtb3VudCkge1xuXHQgICAgICAvLyBjcmVhdGUgYW4gYW5jaG9yIGFuZCBpbnNlcnQgaXQgc3luY2hyb25vdXNseSxcblx0ICAgICAgLy8gc28gdGhhdCB3ZSBjYW4gcmVzb2x2ZSB0aGUgY29ycmVjdCBvcmRlciB3aXRob3V0XG5cdCAgICAgIC8vIHdvcnJ5aW5nIGFib3V0IHNvbWUgZWxlbWVudHMgbm90IGluc2VydGVkIHlldFxuXHQgICAgICB2YXIgYW5jaG9yID0gZnJhZy5zdGFnZ2VyQW5jaG9yO1xuXHQgICAgICBpZiAoIWFuY2hvcikge1xuXHQgICAgICAgIGFuY2hvciA9IGZyYWcuc3RhZ2dlckFuY2hvciA9IGNyZWF0ZUFuY2hvcignc3RhZ2dlci1hbmNob3InKTtcblx0ICAgICAgICBhbmNob3IuX192X2ZyYWcgPSBmcmFnO1xuXHQgICAgICB9XG5cdCAgICAgIGFmdGVyKGFuY2hvciwgcHJldkVsKTtcblx0ICAgICAgdmFyIG9wID0gZnJhZy5zdGFnZ2VyQ2IgPSBjYW5jZWxsYWJsZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuXHQgICAgICAgIGZyYWcuYmVmb3JlKGFuY2hvcik7XG5cdCAgICAgICAgcmVtb3ZlKGFuY2hvcik7XG5cdCAgICAgIH0pO1xuXHQgICAgICBzZXRUaW1lb3V0KG9wLCBzdGFnZ2VyQW1vdW50KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciB0YXJnZXQgPSBwcmV2RWwubmV4dFNpYmxpbmc7XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoIXRhcmdldCkge1xuXHQgICAgICAgIC8vIHJlc2V0IGVuZCBhbmNob3IgcG9zaXRpb24gaW4gY2FzZSB0aGUgcG9zaXRpb24gd2FzIG1lc3NlZCB1cFxuXHQgICAgICAgIC8vIGJ5IGFuIGV4dGVybmFsIGRyYWctbi1kcm9wIGxpYnJhcnkuXG5cdCAgICAgICAgYWZ0ZXIodGhpcy5lbmQsIHByZXZFbCk7XG5cdCAgICAgICAgdGFyZ2V0ID0gdGhpcy5lbmQ7XG5cdCAgICAgIH1cblx0ICAgICAgZnJhZy5iZWZvcmUodGFyZ2V0KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBSZW1vdmUgYSBmcmFnbWVudC4gSGFuZGxlcyBzdGFnZ2VyaW5nLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSB0b3RhbFxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5Eb2N1bWVudFxuXHQgICAqL1xuXHRcblx0ICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShmcmFnLCBpbmRleCwgdG90YWwsIGluRG9jdW1lbnQpIHtcblx0ICAgIGlmIChmcmFnLnN0YWdnZXJDYikge1xuXHQgICAgICBmcmFnLnN0YWdnZXJDYi5jYW5jZWwoKTtcblx0ICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuXHQgICAgICAvLyBpdCdzIG5vdCBwb3NzaWJsZSBmb3IgdGhlIHNhbWUgZnJhZyB0byBiZSByZW1vdmVkXG5cdCAgICAgIC8vIHR3aWNlLCBzbyBpZiB3ZSBoYXZlIGEgcGVuZGluZyBzdGFnZ2VyIGNhbGxiYWNrLFxuXHQgICAgICAvLyBpdCBtZWFucyB0aGlzIGZyYWcgaXMgcXVldWVkIGZvciBlbnRlciBidXQgcmVtb3ZlZFxuXHQgICAgICAvLyBiZWZvcmUgaXRzIHRyYW5zaXRpb24gc3RhcnRlZC4gU2luY2UgaXQgaXMgYWxyZWFkeVxuXHQgICAgICAvLyBkZXN0cm95ZWQsIHdlIGNhbiBqdXN0IGxlYXZlIGl0IGluIGRldGFjaGVkIHN0YXRlLlxuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgc3RhZ2dlckFtb3VudCA9IHRoaXMuZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgdG90YWwsICdsZWF2ZScpO1xuXHQgICAgaWYgKGluRG9jdW1lbnQgJiYgc3RhZ2dlckFtb3VudCkge1xuXHQgICAgICB2YXIgb3AgPSBmcmFnLnN0YWdnZXJDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG5cdCAgICAgICAgZnJhZy5yZW1vdmUoKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHNldFRpbWVvdXQob3AsIHN0YWdnZXJBbW91bnQpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZnJhZy5yZW1vdmUoKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBNb3ZlIGEgZnJhZ21lbnQgdG8gYSBuZXcgcG9zaXRpb24uXG5cdCAgICogRm9yY2Ugbm8gdHJhbnNpdGlvbi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICAgKiBAcGFyYW0ge05vZGV9IHByZXZFbFxuXHQgICAqL1xuXHRcblx0ICBtb3ZlOiBmdW5jdGlvbiBtb3ZlKGZyYWcsIHByZXZFbCkge1xuXHQgICAgLy8gZml4IGEgY29tbW9uIGlzc3VlIHdpdGggU29ydGFibGU6XG5cdCAgICAvLyBpZiBwcmV2RWwgZG9lc24ndCBoYXZlIG5leHRTaWJsaW5nLCB0aGlzIG1lYW5zIGl0J3Ncblx0ICAgIC8vIGJlZW4gZHJhZ2dlZCBhZnRlciB0aGUgZW5kIGFuY2hvci4gSnVzdCByZS1wb3NpdGlvblxuXHQgICAgLy8gdGhlIGVuZCBhbmNob3IgdG8gdGhlIGVuZCBvZiB0aGUgY29udGFpbmVyLlxuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoIXByZXZFbC5uZXh0U2libGluZykge1xuXHQgICAgICB0aGlzLmVuZC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMuZW5kKTtcblx0ICAgIH1cblx0ICAgIGZyYWcuYmVmb3JlKHByZXZFbC5uZXh0U2libGluZywgZmFsc2UpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENhY2hlIGEgZnJhZ21lbnQgdXNpbmcgdHJhY2stYnkgb3IgdGhlIG9iamVjdCBrZXkuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuXHQgICAqL1xuXHRcblx0ICBjYWNoZUZyYWc6IGZ1bmN0aW9uIGNhY2hlRnJhZyh2YWx1ZSwgZnJhZywgaW5kZXgsIGtleSkge1xuXHQgICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuXHQgICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZTtcblx0ICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuXHQgICAgdmFyIGlkO1xuXHQgICAgaWYgKGtleSB8fCB0cmFja0J5S2V5IHx8IHByaW1pdGl2ZSkge1xuXHQgICAgICBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xuXHQgICAgICBpZiAoIWNhY2hlW2lkXSkge1xuXHQgICAgICAgIGNhY2hlW2lkXSA9IGZyYWc7XG5cdCAgICAgIH0gZWxzZSBpZiAodHJhY2tCeUtleSAhPT0gJyRpbmRleCcpIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlkID0gdGhpcy5pZDtcblx0ICAgICAgaWYgKGhhc093bih2YWx1ZSwgaWQpKSB7XG5cdCAgICAgICAgaWYgKHZhbHVlW2lkXSA9PT0gbnVsbCkge1xuXHQgICAgICAgICAgdmFsdWVbaWRdID0gZnJhZztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmIChPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSkge1xuXHQgICAgICAgIGRlZih2YWx1ZSwgaWQsIGZyYWcpO1xuXHQgICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICB3YXJuKCdGcm96ZW4gdi1mb3Igb2JqZWN0cyBjYW5ub3QgYmUgYXV0b21hdGljYWxseSB0cmFja2VkLCBtYWtlIHN1cmUgdG8gJyArICdwcm92aWRlIGEgdHJhY2stYnkga2V5LicpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBmcmFnLnJhdyA9IHZhbHVlO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEdldCBhIGNhY2hlZCBmcmFnbWVudCBmcm9tIHRoZSB2YWx1ZS9pbmRleC9rZXlcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAgICogQHJldHVybiB7RnJhZ21lbnR9XG5cdCAgICovXG5cdFxuXHQgIGdldENhY2hlZEZyYWc6IGZ1bmN0aW9uIGdldENhY2hlZEZyYWcodmFsdWUsIGluZGV4LCBrZXkpIHtcblx0ICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcblx0ICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuXHQgICAgdmFyIGZyYWc7XG5cdCAgICBpZiAoa2V5IHx8IHRyYWNrQnlLZXkgfHwgcHJpbWl0aXZlKSB7XG5cdCAgICAgIHZhciBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xuXHQgICAgICBmcmFnID0gdGhpcy5jYWNoZVtpZF07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBmcmFnID0gdmFsdWVbdGhpcy5pZF07XG5cdCAgICB9XG5cdCAgICBpZiAoZnJhZyAmJiAoZnJhZy5yZXVzZWQgfHwgZnJhZy5mcmVzaCkpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZyYWc7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRGVsZXRlIGEgZnJhZ21lbnQgZnJvbSBjYWNoZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICAgKi9cblx0XG5cdCAgZGVsZXRlQ2FjaGVkRnJhZzogZnVuY3Rpb24gZGVsZXRlQ2FjaGVkRnJhZyhmcmFnKSB7XG5cdCAgICB2YXIgdmFsdWUgPSBmcmFnLnJhdztcblx0ICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcblx0ICAgIHZhciBzY29wZSA9IGZyYWcuc2NvcGU7XG5cdCAgICB2YXIgaW5kZXggPSBzY29wZS4kaW5kZXg7XG5cdCAgICAvLyBmaXggIzk0ODogYXZvaWQgYWNjaWRlbnRhbGx5IGZhbGwgdGhyb3VnaCB0b1xuXHQgICAgLy8gYSBwYXJlbnQgcmVwZWF0ZXIgd2hpY2ggaGFwcGVucyB0byBoYXZlICRrZXkuXG5cdCAgICB2YXIga2V5ID0gaGFzT3duKHNjb3BlLCAnJGtleScpICYmIHNjb3BlLiRrZXk7XG5cdCAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcblx0ICAgIGlmICh0cmFja0J5S2V5IHx8IGtleSB8fCBwcmltaXRpdmUpIHtcblx0ICAgICAgdmFyIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG5cdCAgICAgIHRoaXMuY2FjaGVbaWRdID0gbnVsbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhbHVlW3RoaXMuaWRdID0gbnVsbDtcblx0ICAgICAgZnJhZy5yYXcgPSBudWxsO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEdldCB0aGUgc3RhZ2dlciBhbW91bnQgZm9yIGFuIGluc2VydGlvbi9yZW1vdmFsLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSB0b3RhbFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG5cdCAgICovXG5cdFxuXHQgIGdldFN0YWdnZXI6IGZ1bmN0aW9uIGdldFN0YWdnZXIoZnJhZywgaW5kZXgsIHRvdGFsLCB0eXBlKSB7XG5cdCAgICB0eXBlID0gdHlwZSArICdTdGFnZ2VyJztcblx0ICAgIHZhciB0cmFucyA9IGZyYWcubm9kZS5fX3ZfdHJhbnM7XG5cdCAgICB2YXIgaG9va3MgPSB0cmFucyAmJiB0cmFucy5ob29rcztcblx0ICAgIHZhciBob29rID0gaG9va3MgJiYgKGhvb2tzW3R5cGVdIHx8IGhvb2tzLnN0YWdnZXIpO1xuXHQgICAgcmV0dXJuIGhvb2sgPyBob29rLmNhbGwoZnJhZywgaW5kZXgsIHRvdGFsKSA6IGluZGV4ICogcGFyc2VJbnQodGhpcy5wYXJhbXNbdHlwZV0gfHwgdGhpcy5wYXJhbXMuc3RhZ2dlciwgMTApO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFByZS1wcm9jZXNzIHRoZSB2YWx1ZSBiZWZvcmUgcGlwaW5nIGl0IHRocm91Z2ggdGhlXG5cdCAgICogZmlsdGVycy4gVGhpcyBpcyBwYXNzZWQgdG8gYW5kIGNhbGxlZCBieSB0aGUgd2F0Y2hlci5cblx0ICAgKi9cblx0XG5cdCAgX3ByZVByb2Nlc3M6IGZ1bmN0aW9uIF9wcmVQcm9jZXNzKHZhbHVlKSB7XG5cdCAgICAvLyByZWdhcmRsZXNzIG9mIHR5cGUsIHN0b3JlIHRoZSB1bi1maWx0ZXJlZCByYXcgdmFsdWUuXG5cdCAgICB0aGlzLnJhd1ZhbHVlID0gdmFsdWU7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUG9zdC1wcm9jZXNzIHRoZSB2YWx1ZSBhZnRlciBpdCBoYXMgYmVlbiBwaXBlZCB0aHJvdWdoXG5cdCAgICogdGhlIGZpbHRlcnMuIFRoaXMgaXMgcGFzc2VkIHRvIGFuZCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIuXG5cdCAgICpcblx0ICAgKiBJdCBpcyBuZWNlc3NhcnkgZm9yIHRoaXMgdG8gYmUgY2FsbGVkIGR1cmluZyB0aGVcblx0ICAgKiB3YXRjaGVyJ3MgZGVwZW5kZW5jeSBjb2xsZWN0aW9uIHBoYXNlIGJlY2F1c2Ugd2Ugd2FudFxuXHQgICAqIHRoZSB2LWZvciB0byB1cGRhdGUgd2hlbiB0aGUgc291cmNlIE9iamVjdCBpcyBtdXRhdGVkLlxuXHQgICAqL1xuXHRcblx0ICBfcG9zdFByb2Nlc3M6IGZ1bmN0aW9uIF9wb3N0UHJvY2Vzcyh2YWx1ZSkge1xuXHQgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcblx0ICAgICAgLy8gY29udmVydCBwbGFpbiBvYmplY3QgdG8gYXJyYXkuXG5cdCAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuXHQgICAgICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgICB2YXIgcmVzID0gbmV3IEFycmF5KGkpO1xuXHQgICAgICB2YXIga2V5O1xuXHQgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgICByZXNbaV0gPSB7XG5cdCAgICAgICAgICAka2V5OiBrZXksXG5cdCAgICAgICAgICAkdmFsdWU6IHZhbHVlW2tleV1cblx0ICAgICAgICB9O1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiByZXM7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiAhaXNOYU4odmFsdWUpKSB7XG5cdCAgICAgICAgdmFsdWUgPSByYW5nZSh2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHZhbHVlIHx8IFtdO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgaWYgKHRoaXMuZGVzY3JpcHRvci5yZWYpIHtcblx0ICAgICAgKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRyZWZzW3RoaXMuZGVzY3JpcHRvci5yZWZdID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLmZyYWdzKSB7XG5cdCAgICAgIHZhciBpID0gdGhpcy5mcmFncy5sZW5ndGg7XG5cdCAgICAgIHZhciBmcmFnO1xuXHQgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAgZnJhZyA9IHRoaXMuZnJhZ3NbaV07XG5cdCAgICAgICAgdGhpcy5kZWxldGVDYWNoZWRGcmFnKGZyYWcpO1xuXHQgICAgICAgIGZyYWcuZGVzdHJveSgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEhlbHBlciB0byBmaW5kIHRoZSBwcmV2aW91cyBlbGVtZW50IHRoYXQgaXMgYSBmcmFnbWVudFxuXHQgKiBhbmNob3IuIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYSBkZXN0cm95ZWQgZnJhZydzXG5cdCAqIGVsZW1lbnQgY291bGQgc3RpbGwgYmUgbGluZ2VyaW5nIGluIHRoZSBET00gYmVmb3JlIGl0c1xuXHQgKiBsZWF2aW5nIHRyYW5zaXRpb24gZmluaXNoZXMsIGJ1dCBpdHMgaW5zZXJ0ZWQgZmxhZ1xuXHQgKiBzaG91bGQgaGF2ZSBiZWVuIHNldCB0byBmYWxzZSBzbyB3ZSBjYW4gc2tpcCB0aGVtLlxuXHQgKlxuXHQgKiBJZiB0aGlzIGlzIGEgYmxvY2sgcmVwZWF0LCB3ZSB3YW50IHRvIG1ha2Ugc3VyZSB3ZSBvbmx5XG5cdCAqIHJldHVybiBmcmFnIHRoYXQgaXMgYm91bmQgdG8gdGhpcyB2LWZvci4gKHNlZSAjOTI5KVxuXHQgKlxuXHQgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAqIEBwYXJhbSB7Q29tbWVudHxUZXh0fSBhbmNob3Jcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlkXG5cdCAqIEByZXR1cm4ge0ZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZpbmRQcmV2RnJhZyhmcmFnLCBhbmNob3IsIGlkKSB7XG5cdCAgdmFyIGVsID0gZnJhZy5ub2RlLnByZXZpb3VzU2libGluZztcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoIWVsKSByZXR1cm47XG5cdCAgZnJhZyA9IGVsLl9fdl9mcmFnO1xuXHQgIHdoaWxlICgoIWZyYWcgfHwgZnJhZy5mb3JJZCAhPT0gaWQgfHwgIWZyYWcuaW5zZXJ0ZWQpICYmIGVsICE9PSBhbmNob3IpIHtcblx0ICAgIGVsID0gZWwucHJldmlvdXNTaWJsaW5nO1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoIWVsKSByZXR1cm47XG5cdCAgICBmcmFnID0gZWwuX192X2ZyYWc7XG5cdCAgfVxuXHQgIHJldHVybiBmcmFnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRmluZCBhIHZtIGZyb20gYSBmcmFnbWVudC5cblx0ICpcblx0ICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgKiBAcmV0dXJuIHtWdWV8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZpbmRWbUZyb21GcmFnKGZyYWcpIHtcblx0ICB2YXIgbm9kZSA9IGZyYWcubm9kZTtcblx0ICAvLyBoYW5kbGUgbXVsdGktbm9kZSBmcmFnXG5cdCAgaWYgKGZyYWcuZW5kKSB7XG5cdCAgICB3aGlsZSAoIW5vZGUuX192dWVfXyAmJiBub2RlICE9PSBmcmFnLmVuZCAmJiBub2RlLm5leHRTaWJsaW5nKSB7XG5cdCAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gbm9kZS5fX3Z1ZV9fO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlIGEgcmFuZ2UgYXJyYXkgZnJvbSBnaXZlbiBudW1iZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBuXG5cdCAqIEByZXR1cm4ge0FycmF5fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJhbmdlKG4pIHtcblx0ICB2YXIgaSA9IC0xO1xuXHQgIHZhciByZXQgPSBuZXcgQXJyYXkoTWF0aC5mbG9vcihuKSk7XG5cdCAgd2hpbGUgKCsraSA8IG4pIHtcblx0ICAgIHJldFtpXSA9IGk7XG5cdCAgfVxuXHQgIHJldHVybiByZXQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgdGhlIHRyYWNrIGJ5IGtleSBmb3IgYW4gaXRlbS5cblx0ICpcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW3RyYWNrQnlLZXldXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSkge1xuXHQgIHJldHVybiB0cmFja0J5S2V5ID8gdHJhY2tCeUtleSA9PT0gJyRpbmRleCcgPyBpbmRleCA6IHRyYWNrQnlLZXkuY2hhckF0KDApLm1hdGNoKC9cXHcvKSA/IGdldFBhdGgodmFsdWUsIHRyYWNrQnlLZXkpIDogdmFsdWVbdHJhY2tCeUtleV0gOiBrZXkgfHwgdmFsdWU7XG5cdH1cblx0XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgdkZvci53YXJuRHVwbGljYXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICB3YXJuKCdEdXBsaWNhdGUgdmFsdWUgZm91bmQgaW4gdi1mb3I9XCInICsgdGhpcy5kZXNjcmlwdG9yLnJhdyArICdcIjogJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKSArICcuIFVzZSB0cmFjay1ieT1cIiRpbmRleFwiIGlmICcgKyAneW91IGFyZSBleHBlY3RpbmcgZHVwbGljYXRlIHZhbHVlcy4nLCB0aGlzLnZtKTtcblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgdklmID0ge1xuXHRcblx0ICBwcmlvcml0eTogSUYsXG5cdCAgdGVybWluYWw6IHRydWUsXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgaWYgKCFlbC5fX3Z1ZV9fKSB7XG5cdCAgICAgIC8vIGNoZWNrIGVsc2UgYmxvY2tcblx0ICAgICAgdmFyIG5leHQgPSBlbC5uZXh0RWxlbWVudFNpYmxpbmc7XG5cdCAgICAgIGlmIChuZXh0ICYmIGdldEF0dHIobmV4dCwgJ3YtZWxzZScpICE9PSBudWxsKSB7XG5cdCAgICAgICAgcmVtb3ZlKG5leHQpO1xuXHQgICAgICAgIHRoaXMuZWxzZUVsID0gbmV4dDtcblx0ICAgICAgfVxuXHQgICAgICAvLyBjaGVjayBtYWluIGJsb2NrXG5cdCAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWlmJyk7XG5cdCAgICAgIHJlcGxhY2UoZWwsIHRoaXMuYW5jaG9yKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1pZj1cIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgY2Fubm90IGJlICcgKyAndXNlZCBvbiBhbiBpbnN0YW5jZSByb290IGVsZW1lbnQuJywgdGhpcy52bSk7XG5cdCAgICAgIHRoaXMuaW52YWxpZCA9IHRydWU7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIGlmICh0aGlzLmludmFsaWQpIHJldHVybjtcblx0ICAgIGlmICh2YWx1ZSkge1xuXHQgICAgICBpZiAoIXRoaXMuZnJhZykge1xuXHQgICAgICAgIHRoaXMuaW5zZXJ0KCk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMucmVtb3ZlKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoKSB7XG5cdCAgICBpZiAodGhpcy5lbHNlRnJhZykge1xuXHQgICAgICB0aGlzLmVsc2VGcmFnLnJlbW92ZSgpO1xuXHQgICAgICB0aGlzLmVsc2VGcmFnID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIC8vIGxhenkgaW5pdCBmYWN0b3J5XG5cdCAgICBpZiAoIXRoaXMuZmFjdG9yeSkge1xuXHQgICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHRoaXMuZWwpO1xuXHQgICAgfVxuXHQgICAgdGhpcy5mcmFnID0gdGhpcy5mYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZyk7XG5cdCAgICB0aGlzLmZyYWcuYmVmb3JlKHRoaXMuYW5jaG9yKTtcblx0ICB9LFxuXHRcblx0ICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcblx0ICAgIGlmICh0aGlzLmZyYWcpIHtcblx0ICAgICAgdGhpcy5mcmFnLnJlbW92ZSgpO1xuXHQgICAgICB0aGlzLmZyYWcgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuZWxzZUVsICYmICF0aGlzLmVsc2VGcmFnKSB7XG5cdCAgICAgIGlmICghdGhpcy5lbHNlRmFjdG9yeSkge1xuXHQgICAgICAgIHRoaXMuZWxzZUZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMuZWxzZUVsLl9jb250ZXh0IHx8IHRoaXMudm0sIHRoaXMuZWxzZUVsKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLmVsc2VGcmFnID0gdGhpcy5lbHNlRmFjdG9yeS5jcmVhdGUodGhpcy5faG9zdCwgdGhpcy5fc2NvcGUsIHRoaXMuX2ZyYWcpO1xuXHQgICAgICB0aGlzLmVsc2VGcmFnLmJlZm9yZSh0aGlzLmFuY2hvcik7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICBpZiAodGhpcy5mcmFnKSB7XG5cdCAgICAgIHRoaXMuZnJhZy5kZXN0cm95KCk7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5lbHNlRnJhZykge1xuXHQgICAgICB0aGlzLmVsc2VGcmFnLmRlc3Ryb3koKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgc2hvdyA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8vIGNoZWNrIGVsc2UgYmxvY2tcblx0ICAgIHZhciBuZXh0ID0gdGhpcy5lbC5uZXh0RWxlbWVudFNpYmxpbmc7XG5cdCAgICBpZiAobmV4dCAmJiBnZXRBdHRyKG5leHQsICd2LWVsc2UnKSAhPT0gbnVsbCkge1xuXHQgICAgICB0aGlzLmVsc2VFbCA9IG5leHQ7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIHRoaXMuYXBwbHkodGhpcy5lbCwgdmFsdWUpO1xuXHQgICAgaWYgKHRoaXMuZWxzZUVsKSB7XG5cdCAgICAgIHRoaXMuYXBwbHkodGhpcy5lbHNlRWwsICF2YWx1ZSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgYXBwbHk6IGZ1bmN0aW9uIGFwcGx5KGVsLCB2YWx1ZSkge1xuXHQgICAgaWYgKGluRG9jKGVsKSkge1xuXHQgICAgICBhcHBseVRyYW5zaXRpb24oZWwsIHZhbHVlID8gMSA6IC0xLCB0b2dnbGUsIHRoaXMudm0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdG9nZ2xlKCk7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiB0b2dnbGUoKSB7XG5cdCAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZSA/ICcnIDogJ25vbmUnO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciB0ZXh0JDIgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgdmFyIGlzUmFuZ2UgPSBlbC50eXBlID09PSAncmFuZ2UnO1xuXHQgICAgdmFyIGxhenkgPSB0aGlzLnBhcmFtcy5sYXp5O1xuXHQgICAgdmFyIG51bWJlciA9IHRoaXMucGFyYW1zLm51bWJlcjtcblx0ICAgIHZhciBkZWJvdW5jZSA9IHRoaXMucGFyYW1zLmRlYm91bmNlO1xuXHRcblx0ICAgIC8vIGhhbmRsZSBjb21wb3NpdGlvbiBldmVudHMuXG5cdCAgICAvLyAgIGh0dHA6Ly9ibG9nLmV2YW55b3UubWUvMjAxNC8wMS8wMy9jb21wb3NpdGlvbi1ldmVudC9cblx0ICAgIC8vIHNraXAgdGhpcyBmb3IgQW5kcm9pZCBiZWNhdXNlIGl0IGhhbmRsZXMgY29tcG9zaXRpb25cblx0ICAgIC8vIGV2ZW50cyBxdWl0ZSBkaWZmZXJlbnRseS4gQW5kcm9pZCBkb2Vzbid0IHRyaWdnZXJcblx0ICAgIC8vIGNvbXBvc2l0aW9uIGV2ZW50cyBmb3IgbGFuZ3VhZ2UgaW5wdXQgbWV0aG9kcyBlLmcuXG5cdCAgICAvLyBDaGluZXNlLCBidXQgaW5zdGVhZCB0cmlnZ2VycyB0aGVtIGZvciBzcGVsbGluZ1xuXHQgICAgLy8gc3VnZ2VzdGlvbnMuLi4gKHNlZSBEaXNjdXNzaW9uLyMxNjIpXG5cdCAgICB2YXIgY29tcG9zaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoIWlzQW5kcm9pZCAmJiAhaXNSYW5nZSkge1xuXHQgICAgICB0aGlzLm9uKCdjb21wb3NpdGlvbnN0YXJ0JywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGNvbXBvc2luZyA9IHRydWU7XG5cdCAgICAgIH0pO1xuXHQgICAgICB0aGlzLm9uKCdjb21wb3NpdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBjb21wb3NpbmcgPSBmYWxzZTtcblx0ICAgICAgICAvLyBpbiBJRTExIHRoZSBcImNvbXBvc2l0aW9uZW5kXCIgZXZlbnQgZmlyZXMgQUZURVJcblx0ICAgICAgICAvLyB0aGUgXCJpbnB1dFwiIGV2ZW50LCBzbyB0aGUgaW5wdXQgaGFuZGxlciBpcyBibG9ja2VkXG5cdCAgICAgICAgLy8gYXQgdGhlIGVuZC4uLiBoYXZlIHRvIGNhbGwgaXQgaGVyZS5cblx0ICAgICAgICAvL1xuXHQgICAgICAgIC8vICMxMzI3OiBpbiBsYXp5IG1vZGUgdGhpcyBpcyB1bmVjZXNzYXJ5LlxuXHQgICAgICAgIGlmICghbGF6eSkge1xuXHQgICAgICAgICAgc2VsZi5saXN0ZW5lcigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gcHJldmVudCBtZXNzaW5nIHdpdGggdGhlIGlucHV0IHdoZW4gdXNlciBpcyB0eXBpbmcsXG5cdCAgICAvLyBhbmQgZm9yY2UgdXBkYXRlIG9uIGJsdXIuXG5cdCAgICB0aGlzLmZvY3VzZWQgPSBmYWxzZTtcblx0ICAgIGlmICghaXNSYW5nZSAmJiAhbGF6eSkge1xuXHQgICAgICB0aGlzLm9uKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzZWxmLmZvY3VzZWQgPSB0cnVlO1xuXHQgICAgICB9KTtcblx0ICAgICAgdGhpcy5vbignYmx1cicsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzZWxmLmZvY3VzZWQgPSBmYWxzZTtcblx0ICAgICAgICAvLyBkbyBub3Qgc3luYyB2YWx1ZSBhZnRlciBmcmFnbWVudCByZW1vdmFsICgjMjAxNylcblx0ICAgICAgICBpZiAoIXNlbGYuX2ZyYWcgfHwgc2VsZi5fZnJhZy5pbnNlcnRlZCkge1xuXHQgICAgICAgICAgc2VsZi5yYXdMaXN0ZW5lcigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gTm93IGF0dGFjaCB0aGUgbWFpbiBsaXN0ZW5lclxuXHQgICAgdGhpcy5saXN0ZW5lciA9IHRoaXMucmF3TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChjb21wb3NpbmcgfHwgIXNlbGYuX2JvdW5kKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciB2YWwgPSBudW1iZXIgfHwgaXNSYW5nZSA/IHRvTnVtYmVyKGVsLnZhbHVlKSA6IGVsLnZhbHVlO1xuXHQgICAgICBzZWxmLnNldCh2YWwpO1xuXHQgICAgICAvLyBmb3JjZSB1cGRhdGUgb24gbmV4dCB0aWNrIHRvIGF2b2lkIGxvY2sgJiBzYW1lIHZhbHVlXG5cdCAgICAgIC8vIGFsc28gb25seSB1cGRhdGUgd2hlbiB1c2VyIGlzIG5vdCB0eXBpbmdcblx0ICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChzZWxmLl9ib3VuZCAmJiAhc2VsZi5mb2N1c2VkKSB7XG5cdCAgICAgICAgICBzZWxmLnVwZGF0ZShzZWxmLl93YXRjaGVyLnZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBhcHBseSBkZWJvdW5jZVxuXHQgICAgaWYgKGRlYm91bmNlKSB7XG5cdCAgICAgIHRoaXMubGlzdGVuZXIgPSBfZGVib3VuY2UodGhpcy5saXN0ZW5lciwgZGVib3VuY2UpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIFN1cHBvcnQgalF1ZXJ5IGV2ZW50cywgc2luY2UgalF1ZXJ5LnRyaWdnZXIoKSBkb2Vzbid0XG5cdCAgICAvLyB0cmlnZ2VyIG5hdGl2ZSBldmVudHMgaW4gc29tZSBjYXNlcyBhbmQgc29tZSBwbHVnaW5zXG5cdCAgICAvLyByZWx5IG9uICQudHJpZ2dlcigpXG5cdCAgICAvL1xuXHQgICAgLy8gV2Ugd2FudCB0byBtYWtlIHN1cmUgaWYgYSBsaXN0ZW5lciBpcyBhdHRhY2hlZCB1c2luZ1xuXHQgICAgLy8galF1ZXJ5LCBpdCBpcyBhbHNvIHJlbW92ZWQgd2l0aCBqUXVlcnksIHRoYXQncyB3aHlcblx0ICAgIC8vIHdlIGRvIHRoZSBjaGVjayBmb3IgZWFjaCBkaXJlY3RpdmUgaW5zdGFuY2UgYW5kXG5cdCAgICAvLyBzdG9yZSB0aGF0IGNoZWNrIHJlc3VsdCBvbiBpdHNlbGYuIFRoaXMgYWxzbyBhbGxvd3Ncblx0ICAgIC8vIGVhc2llciB0ZXN0IGNvdmVyYWdlIGNvbnRyb2wgYnkgdW5zZXR0aW5nIHRoZSBnbG9iYWxcblx0ICAgIC8vIGpRdWVyeSB2YXJpYWJsZSBpbiB0ZXN0cy5cblx0ICAgIHRoaXMuaGFzalF1ZXJ5ID0gdHlwZW9mIGpRdWVyeSA9PT0gJ2Z1bmN0aW9uJztcblx0ICAgIGlmICh0aGlzLmhhc2pRdWVyeSkge1xuXHQgICAgICB2YXIgbWV0aG9kID0galF1ZXJ5LmZuLm9uID8gJ29uJyA6ICdiaW5kJztcblx0ICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdjaGFuZ2UnLCB0aGlzLnJhd0xpc3RlbmVyKTtcblx0ICAgICAgaWYgKCFsYXp5KSB7XG5cdCAgICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLnJhd0xpc3RlbmVyKTtcblx0ICAgICAgaWYgKCFsYXp5KSB7XG5cdCAgICAgICAgdGhpcy5vbignaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIElFOSBkb2Vzbid0IGZpcmUgaW5wdXQgZXZlbnQgb24gYmFja3NwYWNlL2RlbC9jdXRcblx0ICAgIGlmICghbGF6eSAmJiBpc0lFOSkge1xuXHQgICAgICB0aGlzLm9uKCdjdXQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgbmV4dFRpY2soc2VsZi5saXN0ZW5lcik7XG5cdCAgICAgIH0pO1xuXHQgICAgICB0aGlzLm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gNDYgfHwgZS5rZXlDb2RlID09PSA4KSB7XG5cdCAgICAgICAgICBzZWxmLmxpc3RlbmVyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBzZXQgaW5pdGlhbCB2YWx1ZSBpZiBwcmVzZW50XG5cdCAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCd2YWx1ZScpIHx8IGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScgJiYgZWwudmFsdWUudHJpbSgpKSB7XG5cdCAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgLy8gIzMwMjkgb25seSB1cGRhdGUgd2hlbiB0aGUgdmFsdWUgY2hhbmdlcy4gVGhpcyBwcmV2ZW50XG5cdCAgICAvLyBicm93c2VycyBmcm9tIG92ZXJ3cml0aW5nIHZhbHVlcyBsaWtlIHNlbGVjdGlvblN0YXJ0XG5cdCAgICB2YWx1ZSA9IF90b1N0cmluZyh2YWx1ZSk7XG5cdCAgICBpZiAodmFsdWUgIT09IHRoaXMuZWwudmFsdWUpIHRoaXMuZWwudmFsdWUgPSB2YWx1ZTtcblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICBpZiAodGhpcy5oYXNqUXVlcnkpIHtcblx0ICAgICAgdmFyIG1ldGhvZCA9IGpRdWVyeS5mbi5vZmYgPyAnb2ZmJyA6ICd1bmJpbmQnO1xuXHQgICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2lucHV0JywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHJhZGlvID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0XG5cdCAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAvLyB2YWx1ZSBvdmVyd3JpdGUgdmlhIHYtYmluZDp2YWx1ZVxuXHQgICAgICBpZiAoZWwuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpKSB7XG5cdCAgICAgICAgcmV0dXJuIGVsLl92YWx1ZTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgdmFsID0gZWwudmFsdWU7XG5cdCAgICAgIGlmIChzZWxmLnBhcmFtcy5udW1iZXIpIHtcblx0ICAgICAgICB2YWwgPSB0b051bWJlcih2YWwpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2YWw7XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHNlbGYuc2V0KHNlbGYuZ2V0VmFsdWUoKSk7XG5cdCAgICB9O1xuXHQgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cdFxuXHQgICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgnY2hlY2tlZCcpKSB7XG5cdCAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdGhpcy5lbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgdGhpcy5nZXRWYWx1ZSgpKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgc2VsZWN0ID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHRcblx0ICAgIC8vIG1ldGhvZCB0byBmb3JjZSB1cGRhdGUgRE9NIHVzaW5nIGxhdGVzdCB2YWx1ZS5cblx0ICAgIHRoaXMuZm9yY2VVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChzZWxmLl93YXRjaGVyKSB7XG5cdCAgICAgICAgc2VsZi51cGRhdGUoc2VsZi5fd2F0Y2hlci5nZXQoKSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhIG11bHRpcGxlIHNlbGVjdFxuXHQgICAgdmFyIG11bHRpcGxlID0gdGhpcy5tdWx0aXBsZSA9IGVsLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKTtcblx0XG5cdCAgICAvLyBhdHRhY2ggbGlzdGVuZXJcblx0ICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciB2YWx1ZSA9IGdldFZhbHVlKGVsLCBtdWx0aXBsZSk7XG5cdCAgICAgIHZhbHVlID0gc2VsZi5wYXJhbXMubnVtYmVyID8gaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5tYXAodG9OdW1iZXIpIDogdG9OdW1iZXIodmFsdWUpIDogdmFsdWU7XG5cdCAgICAgIHNlbGYuc2V0KHZhbHVlKTtcblx0ICAgIH07XG5cdCAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblx0XG5cdCAgICAvLyBpZiBoYXMgaW5pdGlhbCB2YWx1ZSwgc2V0IGFmdGVyQmluZFxuXHQgICAgdmFyIGluaXRWYWx1ZSA9IGdldFZhbHVlKGVsLCBtdWx0aXBsZSwgdHJ1ZSk7XG5cdCAgICBpZiAobXVsdGlwbGUgJiYgaW5pdFZhbHVlLmxlbmd0aCB8fCAhbXVsdGlwbGUgJiYgaW5pdFZhbHVlICE9PSBudWxsKSB7XG5cdCAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBBbGwgbWFqb3IgYnJvd3NlcnMgZXhjZXB0IEZpcmVmb3ggcmVzZXRzXG5cdCAgICAvLyBzZWxlY3RlZEluZGV4IHdpdGggdmFsdWUgLTEgdG8gMCB3aGVuIHRoZSBlbGVtZW50XG5cdCAgICAvLyBpcyBhcHBlbmRlZCB0byBhIG5ldyBwYXJlbnQsIHRoZXJlZm9yZSB3ZSBoYXZlIHRvXG5cdCAgICAvLyBmb3JjZSBhIERPTSB1cGRhdGUgd2hlbmV2ZXIgdGhhdCBoYXBwZW5zLi4uXG5cdCAgICB0aGlzLnZtLiRvbignaG9vazphdHRhY2hlZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgbmV4dFRpY2soX3RoaXMuZm9yY2VVcGRhdGUpO1xuXHQgICAgfSk7XG5cdCAgICBpZiAoIWluRG9jKGVsKSkge1xuXHQgICAgICBuZXh0VGljayh0aGlzLmZvcmNlVXBkYXRlKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIGVsLnNlbGVjdGVkSW5kZXggPSAtMTtcblx0ICAgIHZhciBtdWx0aSA9IHRoaXMubXVsdGlwbGUgJiYgaXNBcnJheSh2YWx1ZSk7XG5cdCAgICB2YXIgb3B0aW9ucyA9IGVsLm9wdGlvbnM7XG5cdCAgICB2YXIgaSA9IG9wdGlvbnMubGVuZ3RoO1xuXHQgICAgdmFyIG9wLCB2YWw7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIG9wID0gb3B0aW9uc1tpXTtcblx0ICAgICAgdmFsID0gb3AuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpID8gb3AuX3ZhbHVlIDogb3AudmFsdWU7XG5cdCAgICAgIC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuXHQgICAgICBvcC5zZWxlY3RlZCA9IG11bHRpID8gaW5kZXhPZiQxKHZhbHVlLCB2YWwpID4gLTEgOiBsb29zZUVxdWFsKHZhbHVlLCB2YWwpO1xuXHQgICAgICAvKiBlc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0ICAgIHRoaXMudm0uJG9mZignaG9vazphdHRhY2hlZCcsIHRoaXMuZm9yY2VVcGRhdGUpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBHZXQgc2VsZWN0IHZhbHVlXG5cdCAqXG5cdCAqIEBwYXJhbSB7U2VsZWN0RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtCb29sZWFufSBtdWx0aVxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IGluaXRcblx0ICogQHJldHVybiB7QXJyYXl8Kn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRWYWx1ZShlbCwgbXVsdGksIGluaXQpIHtcblx0ICB2YXIgcmVzID0gbXVsdGkgPyBbXSA6IG51bGw7XG5cdCAgdmFyIG9wLCB2YWwsIHNlbGVjdGVkO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gZWwub3B0aW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIG9wID0gZWwub3B0aW9uc1tpXTtcblx0ICAgIHNlbGVjdGVkID0gaW5pdCA/IG9wLmhhc0F0dHJpYnV0ZSgnc2VsZWN0ZWQnKSA6IG9wLnNlbGVjdGVkO1xuXHQgICAgaWYgKHNlbGVjdGVkKSB7XG5cdCAgICAgIHZhbCA9IG9wLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IG9wLl92YWx1ZSA6IG9wLnZhbHVlO1xuXHQgICAgICBpZiAobXVsdGkpIHtcblx0ICAgICAgICByZXMucHVzaCh2YWwpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiB2YWw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIE5hdGl2ZSBBcnJheS5pbmRleE9mIHVzZXMgc3RyaWN0IGVxdWFsLCBidXQgaW4gdGhpc1xuXHQgKiBjYXNlIHdlIG5lZWQgdG8gbWF0Y2ggc3RyaW5nL251bWJlcnMgd2l0aCBjdXN0b20gZXF1YWwuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFyclxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGluZGV4T2YkMShhcnIsIHZhbCkge1xuXHQgIHZhciBpID0gYXJyLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBpZiAobG9vc2VFcXVhbChhcnJbaV0sIHZhbCkpIHtcblx0ICAgICAgcmV0dXJuIGk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiAtMTtcblx0fVxuXHRcblx0dmFyIGNoZWNrYm94ID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0XG5cdCAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gZWwuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpID8gZWwuX3ZhbHVlIDogc2VsZi5wYXJhbXMubnVtYmVyID8gdG9OdW1iZXIoZWwudmFsdWUpIDogZWwudmFsdWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIGZ1bmN0aW9uIGdldEJvb2xlYW5WYWx1ZSgpIHtcblx0ICAgICAgdmFyIHZhbCA9IGVsLmNoZWNrZWQ7XG5cdCAgICAgIGlmICh2YWwgJiYgZWwuaGFzT3duUHJvcGVydHkoJ190cnVlVmFsdWUnKSkge1xuXHQgICAgICAgIHJldHVybiBlbC5fdHJ1ZVZhbHVlO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICghdmFsICYmIGVsLmhhc093blByb3BlcnR5KCdfZmFsc2VWYWx1ZScpKSB7XG5cdCAgICAgICAgcmV0dXJuIGVsLl9mYWxzZVZhbHVlO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2YWw7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIG1vZGVsID0gc2VsZi5fd2F0Y2hlci52YWx1ZTtcblx0ICAgICAgaWYgKGlzQXJyYXkobW9kZWwpKSB7XG5cdCAgICAgICAgdmFyIHZhbCA9IHNlbGYuZ2V0VmFsdWUoKTtcblx0ICAgICAgICBpZiAoZWwuY2hlY2tlZCkge1xuXHQgICAgICAgICAgaWYgKGluZGV4T2YobW9kZWwsIHZhbCkgPCAwKSB7XG5cdCAgICAgICAgICAgIG1vZGVsLnB1c2godmFsKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgbW9kZWwuJHJlbW92ZSh2YWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzZWxmLnNldChnZXRCb29sZWFuVmFsdWUoKSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdjaGVja2VkJykpIHtcblx0ICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICAgIGVsLmNoZWNrZWQgPSBpbmRleE9mKHZhbHVlLCB0aGlzLmdldFZhbHVlKCkpID4gLTE7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAoZWwuaGFzT3duUHJvcGVydHkoJ190cnVlVmFsdWUnKSkge1xuXHQgICAgICAgIGVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCBlbC5fdHJ1ZVZhbHVlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBlbC5jaGVja2VkID0gISF2YWx1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBoYW5kbGVycyA9IHtcblx0ICB0ZXh0OiB0ZXh0JDIsXG5cdCAgcmFkaW86IHJhZGlvLFxuXHQgIHNlbGVjdDogc2VsZWN0LFxuXHQgIGNoZWNrYm94OiBjaGVja2JveFxuXHR9O1xuXHRcblx0dmFyIG1vZGVsID0ge1xuXHRcblx0ICBwcmlvcml0eTogTU9ERUwsXG5cdCAgdHdvV2F5OiB0cnVlLFxuXHQgIGhhbmRsZXJzOiBoYW5kbGVycyxcblx0ICBwYXJhbXM6IFsnbGF6eScsICdudW1iZXInLCAnZGVib3VuY2UnXSxcblx0XG5cdCAgLyoqXG5cdCAgICogUG9zc2libGUgZWxlbWVudHM6XG5cdCAgICogICA8c2VsZWN0PlxuXHQgICAqICAgPHRleHRhcmVhPlxuXHQgICAqICAgPGlucHV0IHR5cGU9XCIqXCI+XG5cdCAgICogICAgIC0gdGV4dFxuXHQgICAqICAgICAtIGNoZWNrYm94XG5cdCAgICogICAgIC0gcmFkaW9cblx0ICAgKiAgICAgLSBudW1iZXJcblx0ICAgKi9cblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8vIGZyaWVuZGx5IHdhcm5pbmcuLi5cblx0ICAgIHRoaXMuY2hlY2tGaWx0ZXJzKCk7XG5cdCAgICBpZiAodGhpcy5oYXNSZWFkICYmICF0aGlzLmhhc1dyaXRlKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSXQgc2VlbXMgeW91IGFyZSB1c2luZyBhIHJlYWQtb25seSBmaWx0ZXIgd2l0aCAnICsgJ3YtbW9kZWw9XCInICsgdGhpcy5kZXNjcmlwdG9yLnJhdyArICdcIi4gJyArICdZb3UgbWlnaHQgd2FudCB0byB1c2UgYSB0d28td2F5IGZpbHRlciB0byBlbnN1cmUgY29ycmVjdCBiZWhhdmlvci4nLCB0aGlzLnZtKTtcblx0ICAgIH1cblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICB2YXIgdGFnID0gZWwudGFnTmFtZTtcblx0ICAgIHZhciBoYW5kbGVyO1xuXHQgICAgaWYgKHRhZyA9PT0gJ0lOUFVUJykge1xuXHQgICAgICBoYW5kbGVyID0gaGFuZGxlcnNbZWwudHlwZV0gfHwgaGFuZGxlcnMudGV4dDtcblx0ICAgIH0gZWxzZSBpZiAodGFnID09PSAnU0VMRUNUJykge1xuXHQgICAgICBoYW5kbGVyID0gaGFuZGxlcnMuc2VsZWN0O1xuXHQgICAgfSBlbHNlIGlmICh0YWcgPT09ICdURVhUQVJFQScpIHtcblx0ICAgICAgaGFuZGxlciA9IGhhbmRsZXJzLnRleHQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3YtbW9kZWwgZG9lcyBub3Qgc3VwcG9ydCBlbGVtZW50IHR5cGU6ICcgKyB0YWcsIHRoaXMudm0pO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBlbC5fX3ZfbW9kZWwgPSB0aGlzO1xuXHQgICAgaGFuZGxlci5iaW5kLmNhbGwodGhpcyk7XG5cdCAgICB0aGlzLnVwZGF0ZSA9IGhhbmRsZXIudXBkYXRlO1xuXHQgICAgdGhpcy5fdW5iaW5kID0gaGFuZGxlci51bmJpbmQ7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgcmVhZC93cml0ZSBmaWx0ZXIgc3RhdHMuXG5cdCAgICovXG5cdFxuXHQgIGNoZWNrRmlsdGVyczogZnVuY3Rpb24gY2hlY2tGaWx0ZXJzKCkge1xuXHQgICAgdmFyIGZpbHRlcnMgPSB0aGlzLmZpbHRlcnM7XG5cdCAgICBpZiAoIWZpbHRlcnMpIHJldHVybjtcblx0ICAgIHZhciBpID0gZmlsdGVycy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhciBmaWx0ZXIgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ2ZpbHRlcnMnLCBmaWx0ZXJzW2ldLm5hbWUpO1xuXHQgICAgICBpZiAodHlwZW9mIGZpbHRlciA9PT0gJ2Z1bmN0aW9uJyB8fCBmaWx0ZXIucmVhZCkge1xuXHQgICAgICAgIHRoaXMuaGFzUmVhZCA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGZpbHRlci53cml0ZSkge1xuXHQgICAgICAgIHRoaXMuaGFzV3JpdGUgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB0aGlzLmVsLl9fdl9tb2RlbCA9IG51bGw7XG5cdCAgICB0aGlzLl91bmJpbmQgJiYgdGhpcy5fdW5iaW5kKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8ga2V5Q29kZSBhbGlhc2VzXG5cdHZhciBrZXlDb2RlcyA9IHtcblx0ICBlc2M6IDI3LFxuXHQgIHRhYjogOSxcblx0ICBlbnRlcjogMTMsXG5cdCAgc3BhY2U6IDMyLFxuXHQgICdkZWxldGUnOiBbOCwgNDZdLFxuXHQgIHVwOiAzOCxcblx0ICBsZWZ0OiAzNyxcblx0ICByaWdodDogMzksXG5cdCAgZG93bjogNDBcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGtleUZpbHRlcihoYW5kbGVyLCBrZXlzKSB7XG5cdCAgdmFyIGNvZGVzID0ga2V5cy5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgdmFyIGNoYXJDb2RlID0ga2V5LmNoYXJDb2RlQXQoMCk7XG5cdCAgICBpZiAoY2hhckNvZGUgPiA0NyAmJiBjaGFyQ29kZSA8IDU4KSB7XG5cdCAgICAgIHJldHVybiBwYXJzZUludChrZXksIDEwKTtcblx0ICAgIH1cblx0ICAgIGlmIChrZXkubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgIGNoYXJDb2RlID0ga2V5LnRvVXBwZXJDYXNlKCkuY2hhckNvZGVBdCgwKTtcblx0ICAgICAgaWYgKGNoYXJDb2RlID4gNjQgJiYgY2hhckNvZGUgPCA5MSkge1xuXHQgICAgICAgIHJldHVybiBjaGFyQ29kZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGtleUNvZGVzW2tleV07XG5cdCAgfSk7XG5cdCAgY29kZXMgPSBbXS5jb25jYXQuYXBwbHkoW10sIGNvZGVzKTtcblx0ICByZXR1cm4gZnVuY3Rpb24ga2V5SGFuZGxlcihlKSB7XG5cdCAgICBpZiAoY29kZXMuaW5kZXhPZihlLmtleUNvZGUpID4gLTEpIHtcblx0ICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzdG9wRmlsdGVyKGhhbmRsZXIpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gc3RvcEhhbmRsZXIoZSkge1xuXHQgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0ICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcHJldmVudEZpbHRlcihoYW5kbGVyKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHByZXZlbnRIYW5kbGVyKGUpIHtcblx0ICAgIGUucHJldmVudERlZmF1bHQoKTtcblx0ICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2VsZkZpbHRlcihoYW5kbGVyKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHNlbGZIYW5kbGVyKGUpIHtcblx0ICAgIGlmIChlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0KSB7XG5cdCAgICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0dmFyIG9uJDEgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBPTixcblx0ICBhY2NlcHRTdGF0ZW1lbnQ6IHRydWUsXG5cdCAga2V5Q29kZXM6IGtleUNvZGVzLFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gZGVhbCB3aXRoIGlmcmFtZXNcblx0ICAgIGlmICh0aGlzLmVsLnRhZ05hbWUgPT09ICdJRlJBTUUnICYmIHRoaXMuYXJnICE9PSAnbG9hZCcpIHtcblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICB0aGlzLmlmcmFtZUJpbmQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgb24oc2VsZi5lbC5jb250ZW50V2luZG93LCBzZWxmLmFyZywgc2VsZi5oYW5kbGVyLCBzZWxmLm1vZGlmaWVycy5jYXB0dXJlKTtcblx0ICAgICAgfTtcblx0ICAgICAgdGhpcy5vbignbG9hZCcsIHRoaXMuaWZyYW1lQmluZCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoaGFuZGxlcikge1xuXHQgICAgLy8gc3R1YiBhIG5vb3AgZm9yIHYtb24gd2l0aCBubyB2YWx1ZSxcblx0ICAgIC8vIGUuZy4gQG1vdXNlZG93bi5wcmV2ZW50XG5cdCAgICBpZiAoIXRoaXMuZGVzY3JpcHRvci5yYXcpIHtcblx0ICAgICAgaGFuZGxlciA9IGZ1bmN0aW9uICgpIHt9O1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICh0eXBlb2YgaGFuZGxlciAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3Ytb246JyArIHRoaXMuYXJnICsgJz1cIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgZXhwZWN0cyBhIGZ1bmN0aW9uIHZhbHVlLCAnICsgJ2dvdCAnICsgaGFuZGxlciwgdGhpcy52bSk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBhcHBseSBtb2RpZmllcnNcblx0ICAgIGlmICh0aGlzLm1vZGlmaWVycy5zdG9wKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBzdG9wRmlsdGVyKGhhbmRsZXIpO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMubW9kaWZpZXJzLnByZXZlbnQpIHtcblx0ICAgICAgaGFuZGxlciA9IHByZXZlbnRGaWx0ZXIoaGFuZGxlcik7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5tb2RpZmllcnMuc2VsZikge1xuXHQgICAgICBoYW5kbGVyID0gc2VsZkZpbHRlcihoYW5kbGVyKTtcblx0ICAgIH1cblx0ICAgIC8vIGtleSBmaWx0ZXJcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModGhpcy5tb2RpZmllcnMpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiBrZXkgIT09ICdzdG9wJyAmJiBrZXkgIT09ICdwcmV2ZW50JyAmJiBrZXkgIT09ICdzZWxmJyAmJiBrZXkgIT09ICdjYXB0dXJlJztcblx0ICAgIH0pO1xuXHQgICAgaWYgKGtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBrZXlGaWx0ZXIoaGFuZGxlciwga2V5cyk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5yZXNldCgpO1xuXHQgICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlcjtcblx0XG5cdCAgICBpZiAodGhpcy5pZnJhbWVCaW5kKSB7XG5cdCAgICAgIHRoaXMuaWZyYW1lQmluZCgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb24odGhpcy5lbCwgdGhpcy5hcmcsIHRoaXMuaGFuZGxlciwgdGhpcy5tb2RpZmllcnMuY2FwdHVyZSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5pZnJhbWVCaW5kID8gdGhpcy5lbC5jb250ZW50V2luZG93IDogdGhpcy5lbDtcblx0ICAgIGlmICh0aGlzLmhhbmRsZXIpIHtcblx0ICAgICAgb2ZmKGVsLCB0aGlzLmFyZywgdGhpcy5oYW5kbGVyKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHRoaXMucmVzZXQoKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcHJlZml4ZXMgPSBbJy13ZWJraXQtJywgJy1tb3otJywgJy1tcy0nXTtcblx0dmFyIGNhbWVsUHJlZml4ZXMgPSBbJ1dlYmtpdCcsICdNb3onLCAnbXMnXTtcblx0dmFyIGltcG9ydGFudFJFID0gLyFpbXBvcnRhbnQ7PyQvO1xuXHR2YXIgcHJvcENhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0XG5cdHZhciB0ZXN0RWwgPSBudWxsO1xuXHRcblx0dmFyIHN0eWxlID0ge1xuXHRcblx0ICBkZWVwOiB0cnVlLFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgdGhpcy5lbC5zdHlsZS5jc3NUZXh0ID0gdmFsdWU7XG5cdCAgICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlLnJlZHVjZShleHRlbmQsIHt9KSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZSB8fCB7fSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgaGFuZGxlT2JqZWN0OiBmdW5jdGlvbiBoYW5kbGVPYmplY3QodmFsdWUpIHtcblx0ICAgIC8vIGNhY2hlIG9iamVjdCBzdHlsZXMgc28gdGhhdCBvbmx5IGNoYW5nZWQgcHJvcHNcblx0ICAgIC8vIGFyZSBhY3R1YWxseSB1cGRhdGVkLlxuXHQgICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZSB8fCAodGhpcy5jYWNoZSA9IHt9KTtcblx0ICAgIHZhciBuYW1lLCB2YWw7XG5cdCAgICBmb3IgKG5hbWUgaW4gY2FjaGUpIHtcblx0ICAgICAgaWYgKCEobmFtZSBpbiB2YWx1ZSkpIHtcblx0ICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShuYW1lLCBudWxsKTtcblx0ICAgICAgICBkZWxldGUgY2FjaGVbbmFtZV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGZvciAobmFtZSBpbiB2YWx1ZSkge1xuXHQgICAgICB2YWwgPSB2YWx1ZVtuYW1lXTtcblx0ICAgICAgaWYgKHZhbCAhPT0gY2FjaGVbbmFtZV0pIHtcblx0ICAgICAgICBjYWNoZVtuYW1lXSA9IHZhbDtcblx0ICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShuYW1lLCB2YWwpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgaGFuZGxlU2luZ2xlOiBmdW5jdGlvbiBoYW5kbGVTaW5nbGUocHJvcCwgdmFsdWUpIHtcblx0ICAgIHByb3AgPSBub3JtYWxpemUocHJvcCk7XG5cdCAgICBpZiAoIXByb3ApIHJldHVybjsgLy8gdW5zdXBwb3J0ZWQgcHJvcFxuXHQgICAgLy8gY2FzdCBwb3NzaWJsZSBudW1iZXJzL2Jvb2xlYW5zIGludG8gc3RyaW5nc1xuXHQgICAgaWYgKHZhbHVlICE9IG51bGwpIHZhbHVlICs9ICcnO1xuXHQgICAgaWYgKHZhbHVlKSB7XG5cdCAgICAgIHZhciBpc0ltcG9ydGFudCA9IGltcG9ydGFudFJFLnRlc3QodmFsdWUpID8gJ2ltcG9ydGFudCcgOiAnJztcblx0ICAgICAgaWYgKGlzSW1wb3J0YW50KSB7XG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICAgIHdhcm4oJ0l0XFwncyBwcm9iYWJseSBhIGJhZCBpZGVhIHRvIHVzZSAhaW1wb3J0YW50IHdpdGggaW5saW5lIHJ1bGVzLiAnICsgJ1RoaXMgZmVhdHVyZSB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiBvZiBWdWUuJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZShpbXBvcnRhbnRSRSwgJycpLnRyaW0oKTtcblx0ICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KHByb3Aua2ViYWIsIHZhbHVlLCBpc0ltcG9ydGFudCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5lbC5zdHlsZVtwcm9wLmNhbWVsXSA9IHZhbHVlO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmVsLnN0eWxlW3Byb3AuY2FtZWxdID0gJyc7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBOb3JtYWxpemUgYSBDU1MgcHJvcGVydHkgbmFtZS5cblx0ICogLSBjYWNoZSByZXN1bHRcblx0ICogLSBhdXRvIHByZWZpeFxuXHQgKiAtIGNhbWVsQ2FzZSAtPiBkYXNoLWNhc2Vcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHByb3Bcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZShwcm9wKSB7XG5cdCAgaWYgKHByb3BDYWNoZVtwcm9wXSkge1xuXHQgICAgcmV0dXJuIHByb3BDYWNoZVtwcm9wXTtcblx0ICB9XG5cdCAgdmFyIHJlcyA9IHByZWZpeChwcm9wKTtcblx0ICBwcm9wQ2FjaGVbcHJvcF0gPSBwcm9wQ2FjaGVbcmVzXSA9IHJlcztcblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXV0byBkZXRlY3QgdGhlIGFwcHJvcHJpYXRlIHByZWZpeCBmb3IgYSBDU1MgcHJvcGVydHkuXG5cdCAqIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3BhdWxpcmlzaC81MjM2OTJcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHByb3Bcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByZWZpeChwcm9wKSB7XG5cdCAgcHJvcCA9IGh5cGhlbmF0ZShwcm9wKTtcblx0ICB2YXIgY2FtZWwgPSBjYW1lbGl6ZShwcm9wKTtcblx0ICB2YXIgdXBwZXIgPSBjYW1lbC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbWVsLnNsaWNlKDEpO1xuXHQgIGlmICghdGVzdEVsKSB7XG5cdCAgICB0ZXN0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICB9XG5cdCAgdmFyIGkgPSBwcmVmaXhlcy5sZW5ndGg7XG5cdCAgdmFyIHByZWZpeGVkO1xuXHQgIGlmIChjYW1lbCAhPT0gJ2ZpbHRlcicgJiYgY2FtZWwgaW4gdGVzdEVsLnN0eWxlKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBrZWJhYjogcHJvcCxcblx0ICAgICAgY2FtZWw6IGNhbWVsXG5cdCAgICB9O1xuXHQgIH1cblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBwcmVmaXhlZCA9IGNhbWVsUHJlZml4ZXNbaV0gKyB1cHBlcjtcblx0ICAgIGlmIChwcmVmaXhlZCBpbiB0ZXN0RWwuc3R5bGUpIHtcblx0ICAgICAgcmV0dXJuIHtcblx0ICAgICAgICBrZWJhYjogcHJlZml4ZXNbaV0gKyBwcm9wLFxuXHQgICAgICAgIGNhbWVsOiBwcmVmaXhlZFxuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0Ly8geGxpbmtcblx0dmFyIHhsaW5rTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc7XG5cdHZhciB4bGlua1JFID0gL154bGluazovO1xuXHRcblx0Ly8gY2hlY2sgZm9yIGF0dHJpYnV0ZXMgdGhhdCBwcm9oaWJpdCBpbnRlcnBvbGF0aW9uc1xuXHR2YXIgZGlzYWxsb3dlZEludGVycEF0dHJSRSA9IC9edi18Xjp8XkB8Xig/OmlzfHRyYW5zaXRpb258dHJhbnNpdGlvbi1tb2RlfGRlYm91bmNlfHRyYWNrLWJ5fHN0YWdnZXJ8ZW50ZXItc3RhZ2dlcnxsZWF2ZS1zdGFnZ2VyKSQvO1xuXHQvLyB0aGVzZSBhdHRyaWJ1dGVzIHNob3VsZCBhbHNvIHNldCB0aGVpciBjb3JyZXNwb25kaW5nIHByb3BlcnRpZXNcblx0Ly8gYmVjYXVzZSB0aGV5IG9ubHkgYWZmZWN0IHRoZSBpbml0aWFsIHN0YXRlIG9mIHRoZSBlbGVtZW50XG5cdHZhciBhdHRyV2l0aFByb3BzUkUgPSAvXig/OnZhbHVlfGNoZWNrZWR8c2VsZWN0ZWR8bXV0ZWQpJC87XG5cdC8vIHRoZXNlIGF0dHJpYnV0ZXMgZXhwZWN0IGVudW1yYXRlZCB2YWx1ZXMgb2YgXCJ0cnVlXCIgb3IgXCJmYWxzZVwiXG5cdC8vIGJ1dCBhcmUgbm90IGJvb2xlYW4gYXR0cmlidXRlc1xuXHR2YXIgZW51bWVyYXRlZEF0dHJSRSA9IC9eKD86ZHJhZ2dhYmxlfGNvbnRlbnRlZGl0YWJsZXxzcGVsbGNoZWNrKSQvO1xuXHRcblx0Ly8gdGhlc2UgYXR0cmlidXRlcyBzaG91bGQgc2V0IGEgaGlkZGVuIHByb3BlcnR5IGZvclxuXHQvLyBiaW5kaW5nIHYtbW9kZWwgdG8gb2JqZWN0IHZhbHVlc1xuXHR2YXIgbW9kZWxQcm9wcyA9IHtcblx0ICB2YWx1ZTogJ192YWx1ZScsXG5cdCAgJ3RydWUtdmFsdWUnOiAnX3RydWVWYWx1ZScsXG5cdCAgJ2ZhbHNlLXZhbHVlJzogJ19mYWxzZVZhbHVlJ1xuXHR9O1xuXHRcblx0dmFyIGJpbmQkMSA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IEJJTkQsXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgYXR0ciA9IHRoaXMuYXJnO1xuXHQgICAgdmFyIHRhZyA9IHRoaXMuZWwudGFnTmFtZTtcblx0ICAgIC8vIHNob3VsZCBiZSBkZWVwIHdhdGNoIG9uIG9iamVjdCBtb2RlXG5cdCAgICBpZiAoIWF0dHIpIHtcblx0ICAgICAgdGhpcy5kZWVwID0gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIC8vIGhhbmRsZSBpbnRlcnBvbGF0aW9uIGJpbmRpbmdzXG5cdCAgICB2YXIgZGVzY3JpcHRvciA9IHRoaXMuZGVzY3JpcHRvcjtcblx0ICAgIHZhciB0b2tlbnMgPSBkZXNjcmlwdG9yLmludGVycDtcblx0ICAgIGlmICh0b2tlbnMpIHtcblx0ICAgICAgLy8gaGFuZGxlIGludGVycG9sYXRpb25zIHdpdGggb25lLXRpbWUgdG9rZW5zXG5cdCAgICAgIGlmIChkZXNjcmlwdG9yLmhhc09uZVRpbWUpIHtcblx0ICAgICAgICB0aGlzLmV4cHJlc3Npb24gPSB0b2tlbnNUb0V4cCh0b2tlbnMsIHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBvbmx5IGFsbG93IGJpbmRpbmcgb24gbmF0aXZlIGF0dHJpYnV0ZXNcblx0ICAgICAgaWYgKGRpc2FsbG93ZWRJbnRlcnBBdHRyUkUudGVzdChhdHRyKSB8fCBhdHRyID09PSAnbmFtZScgJiYgKHRhZyA9PT0gJ1BBUlRJQUwnIHx8IHRhZyA9PT0gJ1NMT1QnKSkge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihhdHRyICsgJz1cIicgKyBkZXNjcmlwdG9yLnJhdyArICdcIjogJyArICdhdHRyaWJ1dGUgaW50ZXJwb2xhdGlvbiBpcyBub3QgYWxsb3dlZCBpbiBWdWUuanMgJyArICdkaXJlY3RpdmVzIGFuZCBzcGVjaWFsIGF0dHJpYnV0ZXMuJywgdGhpcy52bSk7XG5cdCAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG5cdCAgICAgICAgdGhpcy5pbnZhbGlkID0gdHJ1ZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgdmFyIHJhdyA9IGF0dHIgKyAnPVwiJyArIGRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnO1xuXHQgICAgICAgIC8vIHdhcm4gc3JjXG5cdCAgICAgICAgaWYgKGF0dHIgPT09ICdzcmMnKSB7XG5cdCAgICAgICAgICB3YXJuKHJhdyArICdpbnRlcnBvbGF0aW9uIGluIFwic3JjXCIgYXR0cmlidXRlIHdpbGwgY2F1c2UgJyArICdhIDQwNCByZXF1ZXN0LiBVc2Ugdi1iaW5kOnNyYyBpbnN0ZWFkLicsIHRoaXMudm0pO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gd2FybiBzdHlsZVxuXHQgICAgICAgIGlmIChhdHRyID09PSAnc3R5bGUnKSB7XG5cdCAgICAgICAgICB3YXJuKHJhdyArICdpbnRlcnBvbGF0aW9uIGluIFwic3R5bGVcIiBhdHRyaWJ1dGUgd2lsbCBjYXVzZSAnICsgJ3RoZSBhdHRyaWJ1dGUgdG8gYmUgZGlzY2FyZGVkIGluIEludGVybmV0IEV4cGxvcmVyLiAnICsgJ1VzZSB2LWJpbmQ6c3R5bGUgaW5zdGVhZC4nLCB0aGlzLnZtKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgaWYgKHRoaXMuaW52YWxpZCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgYXR0ciA9IHRoaXMuYXJnO1xuXHQgICAgaWYgKHRoaXMuYXJnKSB7XG5cdCAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKGF0dHIsIHZhbHVlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlIHx8IHt9KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvLyBzaGFyZSBvYmplY3QgaGFuZGxlciB3aXRoIHYtYmluZDpjbGFzc1xuXHQgIGhhbmRsZU9iamVjdDogc3R5bGUuaGFuZGxlT2JqZWN0LFxuXHRcblx0ICBoYW5kbGVTaW5nbGU6IGZ1bmN0aW9uIGhhbmRsZVNpbmdsZShhdHRyLCB2YWx1ZSkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIHZhciBpbnRlcnAgPSB0aGlzLmRlc2NyaXB0b3IuaW50ZXJwO1xuXHQgICAgaWYgKHRoaXMubW9kaWZpZXJzLmNhbWVsKSB7XG5cdCAgICAgIGF0dHIgPSBjYW1lbGl6ZShhdHRyKTtcblx0ICAgIH1cblx0ICAgIGlmICghaW50ZXJwICYmIGF0dHJXaXRoUHJvcHNSRS50ZXN0KGF0dHIpICYmIGF0dHIgaW4gZWwpIHtcblx0ICAgICAgdmFyIGF0dHJWYWx1ZSA9IGF0dHIgPT09ICd2YWx1ZScgPyB2YWx1ZSA9PSBudWxsIC8vIElFOSB3aWxsIHNldCBpbnB1dC52YWx1ZSB0byBcIm51bGxcIiBmb3IgbnVsbC4uLlxuXHQgICAgICA/ICcnIDogdmFsdWUgOiB2YWx1ZTtcblx0XG5cdCAgICAgIGlmIChlbFthdHRyXSAhPT0gYXR0clZhbHVlKSB7XG5cdCAgICAgICAgZWxbYXR0cl0gPSBhdHRyVmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIHNldCBtb2RlbCBwcm9wc1xuXHQgICAgdmFyIG1vZGVsUHJvcCA9IG1vZGVsUHJvcHNbYXR0cl07XG5cdCAgICBpZiAoIWludGVycCAmJiBtb2RlbFByb3ApIHtcblx0ICAgICAgZWxbbW9kZWxQcm9wXSA9IHZhbHVlO1xuXHQgICAgICAvLyB1cGRhdGUgdi1tb2RlbCBpZiBwcmVzZW50XG5cdCAgICAgIHZhciBtb2RlbCA9IGVsLl9fdl9tb2RlbDtcblx0ICAgICAgaWYgKG1vZGVsKSB7XG5cdCAgICAgICAgbW9kZWwubGlzdGVuZXIoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gZG8gbm90IHNldCB2YWx1ZSBhdHRyaWJ1dGUgZm9yIHRleHRhcmVhXG5cdCAgICBpZiAoYXR0ciA9PT0gJ3ZhbHVlJyAmJiBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG5cdCAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gdXBkYXRlIGF0dHJpYnV0ZVxuXHQgICAgaWYgKGVudW1lcmF0ZWRBdHRyUkUudGVzdChhdHRyKSkge1xuXHQgICAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUgPyAndHJ1ZScgOiAnZmFsc2UnKTtcblx0ICAgIH0gZWxzZSBpZiAodmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSAhPT0gZmFsc2UpIHtcblx0ICAgICAgaWYgKGF0dHIgPT09ICdjbGFzcycpIHtcblx0ICAgICAgICAvLyBoYW5kbGUgZWRnZSBjYXNlICMxOTYwOlxuXHQgICAgICAgIC8vIGNsYXNzIGludGVycG9sYXRpb24gc2hvdWxkIG5vdCBvdmVyd3JpdGUgVnVlIHRyYW5zaXRpb24gY2xhc3Ncblx0ICAgICAgICBpZiAoZWwuX192X3RyYW5zKSB7XG5cdCAgICAgICAgICB2YWx1ZSArPSAnICcgKyBlbC5fX3ZfdHJhbnMuaWQgKyAnLXRyYW5zaXRpb24nO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzZXRDbGFzcyhlbCwgdmFsdWUpO1xuXHQgICAgICB9IGVsc2UgaWYgKHhsaW5rUkUudGVzdChhdHRyKSkge1xuXHQgICAgICAgIGVsLnNldEF0dHJpYnV0ZU5TKHhsaW5rTlMsIGF0dHIsIHZhbHVlID09PSB0cnVlID8gJycgOiB2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlID09PSB0cnVlID8gJycgOiB2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgZWwgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBFTCxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKCF0aGlzLmFyZykge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgaWQgPSB0aGlzLmlkID0gY2FtZWxpemUodGhpcy5hcmcpO1xuXHQgICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJGVscztcblx0ICAgIGlmIChoYXNPd24ocmVmcywgaWQpKSB7XG5cdCAgICAgIHJlZnNbaWRdID0gdGhpcy5lbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGRlZmluZVJlYWN0aXZlKHJlZnMsIGlkLCB0aGlzLmVsKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRlbHM7XG5cdCAgICBpZiAocmVmc1t0aGlzLmlkXSA9PT0gdGhpcy5lbCkge1xuXHQgICAgICByZWZzW3RoaXMuaWRdID0gbnVsbDtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcmVmID0ge1xuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3YtcmVmOicgKyB0aGlzLmFyZyArICcgbXVzdCBiZSB1c2VkIG9uIGEgY2hpbGQgJyArICdjb21wb25lbnQuIEZvdW5kIG9uIDwnICsgdGhpcy5lbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyAnPi4nLCB0aGlzLnZtKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgY2xvYWsgPSB7XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICB0aGlzLnZtLiRvbmNlKCdwcmUtaG9vazpjb21waWxlZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCd2LWNsb2FrJyk7XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyBtdXN0IGV4cG9ydCBwbGFpbiBvYmplY3Rcblx0dmFyIGRpcmVjdGl2ZXMgPSB7XG5cdCAgdGV4dDogdGV4dCQxLFxuXHQgIGh0bWw6IGh0bWwsXG5cdCAgJ2Zvcic6IHZGb3IsXG5cdCAgJ2lmJzogdklmLFxuXHQgIHNob3c6IHNob3csXG5cdCAgbW9kZWw6IG1vZGVsLFxuXHQgIG9uOiBvbiQxLFxuXHQgIGJpbmQ6IGJpbmQkMSxcblx0ICBlbDogZWwsXG5cdCAgcmVmOiByZWYsXG5cdCAgY2xvYWs6IGNsb2FrXG5cdH07XG5cdFxuXHR2YXIgdkNsYXNzID0ge1xuXHRcblx0ICBkZWVwOiB0cnVlLFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgaWYgKCF2YWx1ZSkge1xuXHQgICAgICB0aGlzLmNsZWFudXAoKTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuXHQgICAgICB0aGlzLnNldENsYXNzKHZhbHVlLnRyaW0oKS5zcGxpdCgvXFxzKy8pKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuc2V0Q2xhc3Mobm9ybWFsaXplJDEodmFsdWUpKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBzZXRDbGFzczogZnVuY3Rpb24gc2V0Q2xhc3ModmFsdWUpIHtcblx0ICAgIHRoaXMuY2xlYW51cCh2YWx1ZSk7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgdmFsID0gdmFsdWVbaV07XG5cdCAgICAgIGlmICh2YWwpIHtcblx0ICAgICAgICBhcHBseSh0aGlzLmVsLCB2YWwsIGFkZENsYXNzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdGhpcy5wcmV2S2V5cyA9IHZhbHVlO1xuXHQgIH0sXG5cdFxuXHQgIGNsZWFudXA6IGZ1bmN0aW9uIGNsZWFudXAodmFsdWUpIHtcblx0ICAgIHZhciBwcmV2S2V5cyA9IHRoaXMucHJldktleXM7XG5cdCAgICBpZiAoIXByZXZLZXlzKSByZXR1cm47XG5cdCAgICB2YXIgaSA9IHByZXZLZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdmFyIGtleSA9IHByZXZLZXlzW2ldO1xuXHQgICAgICBpZiAoIXZhbHVlIHx8IHZhbHVlLmluZGV4T2Yoa2V5KSA8IDApIHtcblx0ICAgICAgICBhcHBseSh0aGlzLmVsLCBrZXksIHJlbW92ZUNsYXNzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBOb3JtYWxpemUgb2JqZWN0cyBhbmQgYXJyYXlzIChwb3RlbnRpYWxseSBjb250YWluaW5nIG9iamVjdHMpXG5cdCAqIGludG8gYXJyYXkgb2Ygc3RyaW5ncy5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R8QXJyYXk8U3RyaW5nfE9iamVjdD59IHZhbHVlXG5cdCAqIEByZXR1cm4ge0FycmF5PFN0cmluZz59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbm9ybWFsaXplJDEodmFsdWUpIHtcblx0ICB2YXIgcmVzID0gW107XG5cdCAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgX2tleSA9IHZhbHVlW2ldO1xuXHQgICAgICBpZiAoX2tleSkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgX2tleSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgIHJlcy5wdXNoKF9rZXkpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBmb3IgKHZhciBrIGluIF9rZXkpIHtcblx0ICAgICAgICAgICAgaWYgKF9rZXlba10pIHJlcy5wdXNoKGspO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcblx0ICAgICAgaWYgKHZhbHVlW2tleV0pIHJlcy5wdXNoKGtleSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBZGQgb3IgcmVtb3ZlIGEgY2xhc3MvY2xhc3NlcyBvbiBhbiBlbGVtZW50XG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleSBUaGUgY2xhc3MgbmFtZS4gVGhpcyBtYXkgb3IgbWF5IG5vdFxuXHQgKiAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW4gYSBzcGFjZSBjaGFyYWN0ZXIsIGluIHN1Y2ggYVxuXHQgKiAgICAgICAgICAgICAgICAgICAgIGNhc2Ugd2UnbGwgZGVhbCB3aXRoIG11bHRpcGxlIGNsYXNzXG5cdCAqICAgICAgICAgICAgICAgICAgICAgbmFtZXMgYXQgb25jZS5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhcHBseShlbCwga2V5LCBmbikge1xuXHQgIGtleSA9IGtleS50cmltKCk7XG5cdCAgaWYgKGtleS5pbmRleE9mKCcgJykgPT09IC0xKSB7XG5cdCAgICBmbihlbCwga2V5KTtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgLy8gVGhlIGtleSBjb250YWlucyBvbmUgb3IgbW9yZSBzcGFjZSBjaGFyYWN0ZXJzLlxuXHQgIC8vIFNpbmNlIGEgY2xhc3MgbmFtZSBkb2Vzbid0IGFjY2VwdCBzdWNoIGNoYXJhY3RlcnMsIHdlXG5cdCAgLy8gdHJlYXQgaXQgYXMgbXVsdGlwbGUgY2xhc3Nlcy5cblx0ICB2YXIga2V5cyA9IGtleS5zcGxpdCgvXFxzKy8pO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGZuKGVsLCBrZXlzW2ldKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBjb21wb25lbnQgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBDT01QT05FTlQsXG5cdFxuXHQgIHBhcmFtczogWydrZWVwLWFsaXZlJywgJ3RyYW5zaXRpb24tbW9kZScsICdpbmxpbmUtdGVtcGxhdGUnXSxcblx0XG5cdCAgLyoqXG5cdCAgICogU2V0dXAuIFR3byBwb3NzaWJsZSB1c2FnZXM6XG5cdCAgICpcblx0ICAgKiAtIHN0YXRpYzpcblx0ICAgKiAgIDxjb21wPiBvciA8ZGl2IHYtY29tcG9uZW50PVwiY29tcFwiPlxuXHQgICAqXG5cdCAgICogLSBkeW5hbWljOlxuXHQgICAqICAgPGNvbXBvbmVudCA6aXM9XCJ2aWV3XCI+XG5cdCAgICovXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICBpZiAoIXRoaXMuZWwuX192dWVfXykge1xuXHQgICAgICAvLyBrZWVwLWFsaXZlIGNhY2hlXG5cdCAgICAgIHRoaXMua2VlcEFsaXZlID0gdGhpcy5wYXJhbXMua2VlcEFsaXZlO1xuXHQgICAgICBpZiAodGhpcy5rZWVwQWxpdmUpIHtcblx0ICAgICAgICB0aGlzLmNhY2hlID0ge307XG5cdCAgICAgIH1cblx0ICAgICAgLy8gY2hlY2sgaW5saW5lLXRlbXBsYXRlXG5cdCAgICAgIGlmICh0aGlzLnBhcmFtcy5pbmxpbmVUZW1wbGF0ZSkge1xuXHQgICAgICAgIC8vIGV4dHJhY3QgaW5saW5lIHRlbXBsYXRlIGFzIGEgRG9jdW1lbnRGcmFnbWVudFxuXHQgICAgICAgIHRoaXMuaW5saW5lVGVtcGxhdGUgPSBleHRyYWN0Q29udGVudCh0aGlzLmVsLCB0cnVlKTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBjb21wb25lbnQgcmVzb2x1dGlvbiByZWxhdGVkIHN0YXRlXG5cdCAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gdGhpcy5Db21wb25lbnQgPSBudWxsO1xuXHQgICAgICAvLyB0cmFuc2l0aW9uIHJlbGF0ZWQgc3RhdGVcblx0ICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbHMgPSAwO1xuXHQgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsQ2IgPSBudWxsO1xuXHQgICAgICAvLyBjcmVhdGUgYSByZWYgYW5jaG9yXG5cdCAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWNvbXBvbmVudCcpO1xuXHQgICAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcblx0ICAgICAgLy8gcmVtb3ZlIGlzIGF0dHJpYnV0ZS5cblx0ICAgICAgLy8gdGhpcyBpcyByZW1vdmVkIGR1cmluZyBjb21waWxhdGlvbiwgYnV0IGJlY2F1c2UgY29tcGlsYXRpb24gaXNcblx0ICAgICAgLy8gY2FjaGVkLCB3aGVuIHRoZSBjb21wb25lbnQgaXMgdXNlZCBlbHNld2hlcmUgdGhpcyBhdHRyaWJ1dGVcblx0ICAgICAgLy8gd2lsbCByZW1haW4gYXQgbGluayB0aW1lLlxuXHQgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnaXMnKTtcblx0ICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJzppcycpO1xuXHQgICAgICAvLyByZW1vdmUgcmVmLCBzYW1lIGFzIGFib3ZlXG5cdCAgICAgIGlmICh0aGlzLmRlc2NyaXB0b3IucmVmKSB7XG5cdCAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ3YtcmVmOicgKyBoeXBoZW5hdGUodGhpcy5kZXNjcmlwdG9yLnJlZikpO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGlmIHN0YXRpYywgYnVpbGQgcmlnaHQgbm93LlxuXHQgICAgICBpZiAodGhpcy5saXRlcmFsKSB7XG5cdCAgICAgICAgdGhpcy5zZXRDb21wb25lbnQodGhpcy5leHByZXNzaW9uKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdjYW5ub3QgbW91bnQgY29tcG9uZW50IFwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiAnICsgJ29uIGFscmVhZHkgbW91bnRlZCBlbGVtZW50OiAnICsgdGhpcy5lbCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUHVibGljIHVwZGF0ZSwgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyIGluIHRoZSBkeW5hbWljXG5cdCAgICogbGl0ZXJhbCBzY2VuYXJpbywgZS5nLiA8Y29tcG9uZW50IDppcz1cInZpZXdcIj5cblx0ICAgKi9cblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIGlmICghdGhpcy5saXRlcmFsKSB7XG5cdCAgICAgIHRoaXMuc2V0Q29tcG9uZW50KHZhbHVlKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBTd2l0Y2ggZHluYW1pYyBjb21wb25lbnRzLiBNYXkgcmVzb2x2ZSB0aGUgY29tcG9uZW50XG5cdCAgICogYXN5bmNocm9ub3VzbHksIGFuZCBwZXJmb3JtIHRyYW5zaXRpb24gYmFzZWQgb25cblx0ICAgKiBzcGVjaWZpZWQgdHJhbnNpdGlvbiBtb2RlLiBBY2NlcHRzIGEgZmV3IGFkZGl0aW9uYWxcblx0ICAgKiBhcmd1bWVudHMgc3BlY2lmaWNhbGx5IGZvciB2dWUtcm91dGVyLlxuXHQgICAqXG5cdCAgICogVGhlIGNhbGxiYWNrIGlzIGNhbGxlZCB3aGVuIHRoZSBmdWxsIHRyYW5zaXRpb24gaXNcblx0ICAgKiBmaW5pc2hlZC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgc2V0Q29tcG9uZW50OiBmdW5jdGlvbiBzZXRDb21wb25lbnQodmFsdWUsIGNiKSB7XG5cdCAgICB0aGlzLmludmFsaWRhdGVQZW5kaW5nKCk7XG5cdCAgICBpZiAoIXZhbHVlKSB7XG5cdCAgICAgIC8vIGp1c3QgcmVtb3ZlIGN1cnJlbnRcblx0ICAgICAgdGhpcy51bmJ1aWxkKHRydWUpO1xuXHQgICAgICB0aGlzLnJlbW92ZSh0aGlzLmNoaWxkVk0sIGNiKTtcblx0ICAgICAgdGhpcy5jaGlsZFZNID0gbnVsbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgdGhpcy5yZXNvbHZlQ29tcG9uZW50KHZhbHVlLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgc2VsZi5tb3VudENvbXBvbmVudChjYik7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlc29sdmUgdGhlIGNvbXBvbmVudCBjb25zdHJ1Y3RvciB0byB1c2Ugd2hlbiBjcmVhdGluZ1xuXHQgICAqIHRoZSBjaGlsZCB2bS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICovXG5cdFxuXHQgIHJlc29sdmVDb21wb25lbnQ6IGZ1bmN0aW9uIHJlc29sdmVDb21wb25lbnQodmFsdWUsIGNiKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uIChDb21wb25lbnQpIHtcblx0ICAgICAgc2VsZi5Db21wb25lbnROYW1lID0gQ29tcG9uZW50Lm9wdGlvbnMubmFtZSB8fCAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogbnVsbCk7XG5cdCAgICAgIHNlbGYuQ29tcG9uZW50ID0gQ29tcG9uZW50O1xuXHQgICAgICBjYigpO1xuXHQgICAgfSk7XG5cdCAgICB0aGlzLnZtLl9yZXNvbHZlQ29tcG9uZW50KHZhbHVlLCB0aGlzLnBlbmRpbmdDb21wb25lbnRDYik7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIHVzaW5nIHRoZSBjdXJyZW50IGNvbnN0cnVjdG9yIGFuZFxuXHQgICAqIHJlcGxhY2UgdGhlIGV4aXN0aW5nIGluc3RhbmNlLiBUaGlzIG1ldGhvZCBkb2Vzbid0IGNhcmVcblx0ICAgKiB3aGV0aGVyIHRoZSBuZXcgY29tcG9uZW50IGFuZCB0aGUgb2xkIG9uZSBhcmUgYWN0dWFsbHlcblx0ICAgKiB0aGUgc2FtZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIG1vdW50Q29tcG9uZW50KGNiKSB7XG5cdCAgICAvLyBhY3R1YWwgbW91bnRcblx0ICAgIHRoaXMudW5idWlsZCh0cnVlKTtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBhY3RpdmF0ZUhvb2tzID0gdGhpcy5Db21wb25lbnQub3B0aW9ucy5hY3RpdmF0ZTtcblx0ICAgIHZhciBjYWNoZWQgPSB0aGlzLmdldENhY2hlZCgpO1xuXHQgICAgdmFyIG5ld0NvbXBvbmVudCA9IHRoaXMuYnVpbGQoKTtcblx0ICAgIGlmIChhY3RpdmF0ZUhvb2tzICYmICFjYWNoZWQpIHtcblx0ICAgICAgdGhpcy53YWl0aW5nRm9yID0gbmV3Q29tcG9uZW50O1xuXHQgICAgICBjYWxsQWN0aXZhdGVIb29rcyhhY3RpdmF0ZUhvb2tzLCBuZXdDb21wb25lbnQsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoc2VsZi53YWl0aW5nRm9yICE9PSBuZXdDb21wb25lbnQpIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc2VsZi53YWl0aW5nRm9yID0gbnVsbDtcblx0ICAgICAgICBzZWxmLnRyYW5zaXRpb24obmV3Q29tcG9uZW50LCBjYik7XG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gdXBkYXRlIHJlZiBmb3Iga2VwdC1hbGl2ZSBjb21wb25lbnRcblx0ICAgICAgaWYgKGNhY2hlZCkge1xuXHQgICAgICAgIG5ld0NvbXBvbmVudC5fdXBkYXRlUmVmKCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy50cmFuc2l0aW9uKG5ld0NvbXBvbmVudCwgY2IpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZW4gdGhlIGNvbXBvbmVudCBjaGFuZ2VzIG9yIHVuYmluZHMgYmVmb3JlIGFuIGFzeW5jXG5cdCAgICogY29uc3RydWN0b3IgaXMgcmVzb2x2ZWQsIHdlIG5lZWQgdG8gaW52YWxpZGF0ZSBpdHNcblx0ICAgKiBwZW5kaW5nIGNhbGxiYWNrLlxuXHQgICAqL1xuXHRcblx0ICBpbnZhbGlkYXRlUGVuZGluZzogZnVuY3Rpb24gaW52YWxpZGF0ZVBlbmRpbmcoKSB7XG5cdCAgICBpZiAodGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpIHtcblx0ICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IuY2FuY2VsKCk7XG5cdCAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gbnVsbDtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBJbnN0YW50aWF0ZS9pbnNlcnQgYSBuZXcgY2hpbGQgdm0uXG5cdCAgICogSWYga2VlcCBhbGl2ZSBhbmQgaGFzIGNhY2hlZCBpbnN0YW5jZSwgaW5zZXJ0IHRoYXRcblx0ICAgKiBpbnN0YW5jZTsgb3RoZXJ3aXNlIGJ1aWxkIGEgbmV3IG9uZSBhbmQgY2FjaGUgaXQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gW2V4dHJhT3B0aW9uc11cblx0ICAgKiBAcmV0dXJuIHtWdWV9IC0gdGhlIGNyZWF0ZWQgaW5zdGFuY2Vcblx0ICAgKi9cblx0XG5cdCAgYnVpbGQ6IGZ1bmN0aW9uIGJ1aWxkKGV4dHJhT3B0aW9ucykge1xuXHQgICAgdmFyIGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkKCk7XG5cdCAgICBpZiAoY2FjaGVkKSB7XG5cdCAgICAgIHJldHVybiBjYWNoZWQ7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5Db21wb25lbnQpIHtcblx0ICAgICAgLy8gZGVmYXVsdCBvcHRpb25zXG5cdCAgICAgIHZhciBvcHRpb25zID0ge1xuXHQgICAgICAgIG5hbWU6IHRoaXMuQ29tcG9uZW50TmFtZSxcblx0ICAgICAgICBlbDogY2xvbmVOb2RlKHRoaXMuZWwpLFxuXHQgICAgICAgIHRlbXBsYXRlOiB0aGlzLmlubGluZVRlbXBsYXRlLFxuXHQgICAgICAgIC8vIG1ha2Ugc3VyZSB0byBhZGQgdGhlIGNoaWxkIHdpdGggY29ycmVjdCBwYXJlbnRcblx0ICAgICAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBpdHMgcGFyZW50XG5cdCAgICAgICAgLy8gc2hvdWxkIGJlIHRoZSB0cmFuc2NsdXNpb24gaG9zdC5cblx0ICAgICAgICBwYXJlbnQ6IHRoaXMuX2hvc3QgfHwgdGhpcy52bSxcblx0ICAgICAgICAvLyBpZiBubyBpbmxpbmUtdGVtcGxhdGUsIHRoZW4gdGhlIGNvbXBpbGVkXG5cdCAgICAgICAgLy8gbGlua2VyIGNhbiBiZSBjYWNoZWQgZm9yIGJldHRlciBwZXJmb3JtYW5jZS5cblx0ICAgICAgICBfbGlua2VyQ2FjaGFibGU6ICF0aGlzLmlubGluZVRlbXBsYXRlLFxuXHQgICAgICAgIF9yZWY6IHRoaXMuZGVzY3JpcHRvci5yZWYsXG5cdCAgICAgICAgX2FzQ29tcG9uZW50OiB0cnVlLFxuXHQgICAgICAgIF9pc1JvdXRlclZpZXc6IHRoaXMuX2lzUm91dGVyVmlldyxcblx0ICAgICAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBjb250ZXh0XG5cdCAgICAgICAgLy8gd2lsbCBiZSB0aGUgY29tbW9uIHBhcmVudCB2bSBvZiB0aGlzIGluc3RhbmNlXG5cdCAgICAgICAgLy8gYW5kIGl0cyBob3N0LlxuXHQgICAgICAgIF9jb250ZXh0OiB0aGlzLnZtLFxuXHQgICAgICAgIC8vIGlmIHRoaXMgaXMgaW5zaWRlIGFuIGlubGluZSB2LWZvciwgdGhlIHNjb3BlXG5cdCAgICAgICAgLy8gd2lsbCBiZSB0aGUgaW50ZXJtZWRpYXRlIHNjb3BlIGNyZWF0ZWQgZm9yIHRoaXNcblx0ICAgICAgICAvLyByZXBlYXQgZnJhZ21lbnQuIHRoaXMgaXMgdXNlZCBmb3IgbGlua2luZyBwcm9wc1xuXHQgICAgICAgIC8vIGFuZCBjb250YWluZXIgZGlyZWN0aXZlcy5cblx0ICAgICAgICBfc2NvcGU6IHRoaXMuX3Njb3BlLFxuXHQgICAgICAgIC8vIHBhc3MgaW4gdGhlIG93bmVyIGZyYWdtZW50IG9mIHRoaXMgY29tcG9uZW50LlxuXHQgICAgICAgIC8vIHRoaXMgaXMgbmVjZXNzYXJ5IHNvIHRoYXQgdGhlIGZyYWdtZW50IGNhbiBrZWVwXG5cdCAgICAgICAgLy8gdHJhY2sgb2YgaXRzIGNvbnRhaW5lZCBjb21wb25lbnRzIGluIG9yZGVyIHRvXG5cdCAgICAgICAgLy8gY2FsbCBhdHRhY2gvZGV0YWNoIGhvb2tzIGZvciB0aGVtLlxuXHQgICAgICAgIF9mcmFnOiB0aGlzLl9mcmFnXG5cdCAgICAgIH07XG5cdCAgICAgIC8vIGV4dHJhIG9wdGlvbnNcblx0ICAgICAgLy8gaW4gMS4wLjAgdGhpcyBpcyB1c2VkIGJ5IHZ1ZS1yb3V0ZXIgb25seVxuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKGV4dHJhT3B0aW9ucykge1xuXHQgICAgICAgIGV4dGVuZChvcHRpb25zLCBleHRyYU9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBjaGlsZCA9IG5ldyB0aGlzLkNvbXBvbmVudChvcHRpb25zKTtcblx0ICAgICAgaWYgKHRoaXMua2VlcEFsaXZlKSB7XG5cdCAgICAgICAgdGhpcy5jYWNoZVt0aGlzLkNvbXBvbmVudC5jaWRdID0gY2hpbGQ7XG5cdCAgICAgIH1cblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwuaGFzQXR0cmlidXRlKCd0cmFuc2l0aW9uJykgJiYgY2hpbGQuX2lzRnJhZ21lbnQpIHtcblx0ICAgICAgICB3YXJuKCdUcmFuc2l0aW9ucyB3aWxsIG5vdCB3b3JrIG9uIGEgZnJhZ21lbnQgaW5zdGFuY2UuICcgKyAnVGVtcGxhdGU6ICcgKyBjaGlsZC4kb3B0aW9ucy50ZW1wbGF0ZSwgY2hpbGQpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBjaGlsZDtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBUcnkgdG8gZ2V0IGEgY2FjaGVkIGluc3RhbmNlIG9mIHRoZSBjdXJyZW50IGNvbXBvbmVudC5cblx0ICAgKlxuXHQgICAqIEByZXR1cm4ge1Z1ZXx1bmRlZmluZWR9XG5cdCAgICovXG5cdFxuXHQgIGdldENhY2hlZDogZnVuY3Rpb24gZ2V0Q2FjaGVkKCkge1xuXHQgICAgcmV0dXJuIHRoaXMua2VlcEFsaXZlICYmIHRoaXMuY2FjaGVbdGhpcy5Db21wb25lbnQuY2lkXTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBUZWFyZG93biB0aGUgY3VycmVudCBjaGlsZCwgYnV0IGRlZmVycyBjbGVhbnVwIHNvXG5cdCAgICogdGhhdCB3ZSBjYW4gc2VwYXJhdGUgdGhlIGRlc3Ryb3kgYW5kIHJlbW92YWwgc3RlcHMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyXG5cdCAgICovXG5cdFxuXHQgIHVuYnVpbGQ6IGZ1bmN0aW9uIHVuYnVpbGQoZGVmZXIpIHtcblx0ICAgIGlmICh0aGlzLndhaXRpbmdGb3IpIHtcblx0ICAgICAgaWYgKCF0aGlzLmtlZXBBbGl2ZSkge1xuXHQgICAgICAgIHRoaXMud2FpdGluZ0Zvci4kZGVzdHJveSgpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMud2FpdGluZ0ZvciA9IG51bGw7XG5cdCAgICB9XG5cdCAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkVk07XG5cdCAgICBpZiAoIWNoaWxkIHx8IHRoaXMua2VlcEFsaXZlKSB7XG5cdCAgICAgIGlmIChjaGlsZCkge1xuXHQgICAgICAgIC8vIHJlbW92ZSByZWZcblx0ICAgICAgICBjaGlsZC5faW5hY3RpdmUgPSB0cnVlO1xuXHQgICAgICAgIGNoaWxkLl91cGRhdGVSZWYodHJ1ZSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gdGhlIHNvbGUgcHVycG9zZSBvZiBgZGVmZXJDbGVhbnVwYCBpcyBzbyB0aGF0IHdlIGNhblxuXHQgICAgLy8gXCJkZWFjdGl2YXRlXCIgdGhlIHZtIHJpZ2h0IG5vdyBhbmQgcGVyZm9ybSBET00gcmVtb3ZhbFxuXHQgICAgLy8gbGF0ZXIuXG5cdCAgICBjaGlsZC4kZGVzdHJveShmYWxzZSwgZGVmZXIpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZSBjdXJyZW50IGRlc3Ryb3llZCBjaGlsZCBhbmQgbWFudWFsbHkgZG9cblx0ICAgKiB0aGUgY2xlYW51cCBhZnRlciByZW1vdmFsLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgKi9cblx0XG5cdCAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoY2hpbGQsIGNiKSB7XG5cdCAgICB2YXIga2VlcEFsaXZlID0gdGhpcy5rZWVwQWxpdmU7XG5cdCAgICBpZiAoY2hpbGQpIHtcblx0ICAgICAgLy8gd2UgbWF5IGhhdmUgYSBjb21wb25lbnQgc3dpdGNoIHdoZW4gYSBwcmV2aW91c1xuXHQgICAgICAvLyBjb21wb25lbnQgaXMgc3RpbGwgYmVpbmcgdHJhbnNpdGlvbmVkIG91dC5cblx0ICAgICAgLy8gd2Ugd2FudCB0byB0cmlnZ2VyIG9ubHkgb25lIGxhc3Rlc3QgaW5zZXJ0aW9uIGNiXG5cdCAgICAgIC8vIHdoZW4gdGhlIGV4aXN0aW5nIHRyYW5zaXRpb24gZmluaXNoZXMuICgjMTExOSlcblx0ICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbHMrKztcblx0ICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbENiID0gY2I7XG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgY2hpbGQuJHJlbW92ZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbHMtLTtcblx0ICAgICAgICBpZiAoIWtlZXBBbGl2ZSkgY2hpbGQuX2NsZWFudXAoKTtcblx0ICAgICAgICBpZiAoIXNlbGYucGVuZGluZ1JlbW92YWxzICYmIHNlbGYucGVuZGluZ1JlbW92YWxDYikge1xuXHQgICAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbENiKCk7XG5cdCAgICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IgPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9IGVsc2UgaWYgKGNiKSB7XG5cdCAgICAgIGNiKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQWN0dWFsbHkgc3dhcCB0aGUgY29tcG9uZW50cywgZGVwZW5kaW5nIG9uIHRoZVxuXHQgICAqIHRyYW5zaXRpb24gbW9kZS4gRGVmYXVsdHMgdG8gc2ltdWx0YW5lb3VzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgdHJhbnNpdGlvbjogZnVuY3Rpb24gdHJhbnNpdGlvbih0YXJnZXQsIGNiKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgY3VycmVudCA9IHRoaXMuY2hpbGRWTTtcblx0ICAgIC8vIGZvciBkZXZ0b29sIGluc3BlY3Rpb25cblx0ICAgIGlmIChjdXJyZW50KSBjdXJyZW50Ll9pbmFjdGl2ZSA9IHRydWU7XG5cdCAgICB0YXJnZXQuX2luYWN0aXZlID0gZmFsc2U7XG5cdCAgICB0aGlzLmNoaWxkVk0gPSB0YXJnZXQ7XG5cdCAgICBzd2l0Y2ggKHNlbGYucGFyYW1zLnRyYW5zaXRpb25Nb2RlKSB7XG5cdCAgICAgIGNhc2UgJ2luLW91dCc6XG5cdCAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQsIGNiKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAnb3V0LWluJzpcblx0ICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50LCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgY2IpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBkZWZhdWx0OlxuXHQgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQpO1xuXHQgICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBjYik7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogVW5iaW5kLlxuXHQgICAqL1xuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHRoaXMuaW52YWxpZGF0ZVBlbmRpbmcoKTtcblx0ICAgIC8vIERvIG5vdCBkZWZlciBjbGVhbnVwIHdoZW4gdW5iaW5kaW5nXG5cdCAgICB0aGlzLnVuYnVpbGQoKTtcblx0ICAgIC8vIGRlc3Ryb3kgYWxsIGtlZXAtYWxpdmUgY2FjaGVkIGluc3RhbmNlc1xuXHQgICAgaWYgKHRoaXMuY2FjaGUpIHtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuY2FjaGUpIHtcblx0ICAgICAgICB0aGlzLmNhY2hlW2tleV0uJGRlc3Ryb3koKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLmNhY2hlID0gbnVsbDtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2FsbCBhY3RpdmF0ZSBob29rcyBpbiBvcmRlciAoYXN5bmNocm9ub3VzKVxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBob29rc1xuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjYWxsQWN0aXZhdGVIb29rcyhob29rcywgdm0sIGNiKSB7XG5cdCAgdmFyIHRvdGFsID0gaG9va3MubGVuZ3RoO1xuXHQgIHZhciBjYWxsZWQgPSAwO1xuXHQgIGhvb2tzWzBdLmNhbGwodm0sIG5leHQpO1xuXHQgIGZ1bmN0aW9uIG5leHQoKSB7XG5cdCAgICBpZiAoKytjYWxsZWQgPj0gdG90YWwpIHtcblx0ICAgICAgY2IoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGhvb2tzW2NhbGxlZF0uY2FsbCh2bSwgbmV4dCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgcHJvcEJpbmRpbmdNb2RlcyA9IGNvbmZpZy5fcHJvcEJpbmRpbmdNb2Rlcztcblx0dmFyIGVtcHR5ID0ge307XG5cdFxuXHQvLyByZWdleGVzXG5cdHZhciBpZGVudFJFJDEgPSAvXlskX2EtekEtWl0rW1xcdyRdKiQvO1xuXHR2YXIgc2V0dGFibGVQYXRoUkUgPSAvXltBLVphLXpfJF1bXFx3JF0qKFxcLltBLVphLXpfJF1bXFx3JF0qfFxcW1teXFxbXFxdXStcXF0pKiQvO1xuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgcHJvcHMgb24gYSByb290IGVsZW1lbnQgYW5kIHJldHVyblxuXHQgKiBhIHByb3BzIGxpbmsgZnVuY3Rpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0FycmF5fSBwcm9wT3B0aW9uc1xuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHJldHVybiB7RnVuY3Rpb259IHByb3BzTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZVByb3BzKGVsLCBwcm9wT3B0aW9ucywgdm0pIHtcblx0ICB2YXIgcHJvcHMgPSBbXTtcblx0ICB2YXIgbmFtZXMgPSBPYmplY3Qua2V5cyhwcm9wT3B0aW9ucyk7XG5cdCAgdmFyIGkgPSBuYW1lcy5sZW5ndGg7XG5cdCAgdmFyIG9wdGlvbnMsIG5hbWUsIGF0dHIsIHZhbHVlLCBwYXRoLCBwYXJzZWQsIHByb3A7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgbmFtZSA9IG5hbWVzW2ldO1xuXHQgICAgb3B0aW9ucyA9IHByb3BPcHRpb25zW25hbWVdIHx8IGVtcHR5O1xuXHRcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG5hbWUgPT09ICckZGF0YScpIHtcblx0ICAgICAgd2FybignRG8gbm90IHVzZSAkZGF0YSBhcyBwcm9wLicsIHZtKTtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gcHJvcHMgY291bGQgY29udGFpbiBkYXNoZXMsIHdoaWNoIHdpbGwgYmVcblx0ICAgIC8vIGludGVycHJldGVkIGFzIG1pbnVzIGNhbGN1bGF0aW9ucyBieSB0aGUgcGFyc2VyXG5cdCAgICAvLyBzbyB3ZSBuZWVkIHRvIGNhbWVsaXplIHRoZSBwYXRoIGhlcmVcblx0ICAgIHBhdGggPSBjYW1lbGl6ZShuYW1lKTtcblx0ICAgIGlmICghaWRlbnRSRSQxLnRlc3QocGF0aCkpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHByb3Aga2V5OiBcIicgKyBuYW1lICsgJ1wiLiBQcm9wIGtleXMgJyArICdtdXN0IGJlIHZhbGlkIGlkZW50aWZpZXJzLicsIHZtKTtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdFxuXHQgICAgcHJvcCA9IHtcblx0ICAgICAgbmFtZTogbmFtZSxcblx0ICAgICAgcGF0aDogcGF0aCxcblx0ICAgICAgb3B0aW9uczogb3B0aW9ucyxcblx0ICAgICAgbW9kZTogcHJvcEJpbmRpbmdNb2Rlcy5PTkVfV0FZLFxuXHQgICAgICByYXc6IG51bGxcblx0ICAgIH07XG5cdFxuXHQgICAgYXR0ciA9IGh5cGhlbmF0ZShuYW1lKTtcblx0ICAgIC8vIGZpcnN0IGNoZWNrIGR5bmFtaWMgdmVyc2lvblxuXHQgICAgaWYgKCh2YWx1ZSA9IGdldEJpbmRBdHRyKGVsLCBhdHRyKSkgPT09IG51bGwpIHtcblx0ICAgICAgaWYgKCh2YWx1ZSA9IGdldEJpbmRBdHRyKGVsLCBhdHRyICsgJy5zeW5jJykpICE9PSBudWxsKSB7XG5cdCAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZO1xuXHQgICAgICB9IGVsc2UgaWYgKCh2YWx1ZSA9IGdldEJpbmRBdHRyKGVsLCBhdHRyICsgJy5vbmNlJykpICE9PSBudWxsKSB7XG5cdCAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfVElNRTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG5cdCAgICAgIC8vIGhhcyBkeW5hbWljIGJpbmRpbmchXG5cdCAgICAgIHByb3AucmF3ID0gdmFsdWU7XG5cdCAgICAgIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcblx0ICAgICAgdmFsdWUgPSBwYXJzZWQuZXhwcmVzc2lvbjtcblx0ICAgICAgcHJvcC5maWx0ZXJzID0gcGFyc2VkLmZpbHRlcnM7XG5cdCAgICAgIC8vIGNoZWNrIGJpbmRpbmcgdHlwZVxuXHQgICAgICBpZiAoaXNMaXRlcmFsKHZhbHVlKSAmJiAhcGFyc2VkLmZpbHRlcnMpIHtcblx0ICAgICAgICAvLyBmb3IgZXhwcmVzc2lvbnMgY29udGFpbmluZyBsaXRlcmFsIG51bWJlcnMgYW5kXG5cdCAgICAgICAgLy8gYm9vbGVhbnMsIHRoZXJlJ3Mgbm8gbmVlZCB0byBzZXR1cCBhIHByb3AgYmluZGluZyxcblx0ICAgICAgICAvLyBzbyB3ZSBjYW4gb3B0aW1pemUgdGhlbSBhcyBhIG9uZS10aW1lIHNldC5cblx0ICAgICAgICBwcm9wLm9wdGltaXplZExpdGVyYWwgPSB0cnVlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHByb3AuZHluYW1pYyA9IHRydWU7XG5cdCAgICAgICAgLy8gY2hlY2sgbm9uLXNldHRhYmxlIHBhdGggZm9yIHR3by13YXkgYmluZGluZ3Ncblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBwcm9wLm1vZGUgPT09IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWSAmJiAhc2V0dGFibGVQYXRoUkUudGVzdCh2YWx1ZSkpIHtcblx0ICAgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWTtcblx0ICAgICAgICAgIHdhcm4oJ0Nhbm5vdCBiaW5kIHR3by13YXkgcHJvcCB3aXRoIG5vbi1zZXR0YWJsZSAnICsgJ3BhcmVudCBwYXRoOiAnICsgdmFsdWUsIHZtKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcHJvcC5wYXJlbnRQYXRoID0gdmFsdWU7XG5cdFxuXHQgICAgICAvLyB3YXJuIHJlcXVpcmVkIHR3by13YXlcblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgb3B0aW9ucy50d29XYXkgJiYgcHJvcC5tb2RlICE9PSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVkpIHtcblx0ICAgICAgICB3YXJuKCdQcm9wIFwiJyArIG5hbWUgKyAnXCIgZXhwZWN0cyBhIHR3by13YXkgYmluZGluZyB0eXBlLicsIHZtKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmICgodmFsdWUgPSBnZXRBdHRyKGVsLCBhdHRyKSkgIT09IG51bGwpIHtcblx0ICAgICAgLy8gaGFzIGxpdGVyYWwgYmluZGluZyFcblx0ICAgICAgcHJvcC5yYXcgPSB2YWx1ZTtcblx0ICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAvLyBjaGVjayBwb3NzaWJsZSBjYW1lbENhc2UgcHJvcCB1c2FnZVxuXHQgICAgICB2YXIgbG93ZXJDYXNlTmFtZSA9IHBhdGgudG9Mb3dlckNhc2UoKTtcblx0ICAgICAgdmFsdWUgPSAvW0EtWlxcLV0vLnRlc3QobmFtZSkgJiYgKGVsLmdldEF0dHJpYnV0ZShsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCd2LWJpbmQ6JyArIGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lICsgJy5vbmNlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCd2LWJpbmQ6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLm9uY2UnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSArICcuc3luYycpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lICsgJy5zeW5jJykpO1xuXHQgICAgICBpZiAodmFsdWUpIHtcblx0ICAgICAgICB3YXJuKCdQb3NzaWJsZSB1c2FnZSBlcnJvciBmb3IgcHJvcCBgJyArIGxvd2VyQ2FzZU5hbWUgKyAnYCAtICcgKyAnZGlkIHlvdSBtZWFuIGAnICsgYXR0ciArICdgPyBIVE1MIGlzIGNhc2UtaW5zZW5zaXRpdmUsIHJlbWVtYmVyIHRvIHVzZSAnICsgJ2tlYmFiLWNhc2UgZm9yIHByb3BzIGluIHRlbXBsYXRlcy4nLCB2bSk7XG5cdCAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5yZXF1aXJlZCkge1xuXHQgICAgICAgIC8vIHdhcm4gbWlzc2luZyByZXF1aXJlZFxuXHQgICAgICAgIHdhcm4oJ01pc3NpbmcgcmVxdWlyZWQgcHJvcDogJyArIG5hbWUsIHZtKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gcHVzaCBwcm9wXG5cdCAgICBwcm9wcy5wdXNoKHByb3ApO1xuXHQgIH1cblx0ICByZXR1cm4gbWFrZVByb3BzTGlua0ZuKHByb3BzKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEJ1aWxkIGEgZnVuY3Rpb24gdGhhdCBhcHBsaWVzIHByb3BzIHRvIGEgdm0uXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHByb3BzXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSBwcm9wc0xpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VQcm9wc0xpbmtGbihwcm9wcykge1xuXHQgIHJldHVybiBmdW5jdGlvbiBwcm9wc0xpbmtGbih2bSwgc2NvcGUpIHtcblx0ICAgIC8vIHN0b3JlIHJlc29sdmVkIHByb3BzIGluZm9cblx0ICAgIHZtLl9wcm9wcyA9IHt9O1xuXHQgICAgdmFyIGlubGluZVByb3BzID0gdm0uJG9wdGlvbnMucHJvcHNEYXRhO1xuXHQgICAgdmFyIGkgPSBwcm9wcy5sZW5ndGg7XG5cdCAgICB2YXIgcHJvcCwgcGF0aCwgb3B0aW9ucywgdmFsdWUsIHJhdztcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgcHJvcCA9IHByb3BzW2ldO1xuXHQgICAgICByYXcgPSBwcm9wLnJhdztcblx0ICAgICAgcGF0aCA9IHByb3AucGF0aDtcblx0ICAgICAgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcblx0ICAgICAgdm0uX3Byb3BzW3BhdGhdID0gcHJvcDtcblx0ICAgICAgaWYgKGlubGluZVByb3BzICYmIGhhc093bihpbmxpbmVQcm9wcywgcGF0aCkpIHtcblx0ICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgaW5saW5lUHJvcHNbcGF0aF0pO1xuXHQgICAgICB9aWYgKHJhdyA9PT0gbnVsbCkge1xuXHQgICAgICAgIC8vIGluaXRpYWxpemUgYWJzZW50IHByb3Bcblx0ICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdW5kZWZpbmVkKTtcblx0ICAgICAgfSBlbHNlIGlmIChwcm9wLmR5bmFtaWMpIHtcblx0ICAgICAgICAvLyBkeW5hbWljIHByb3Bcblx0ICAgICAgICBpZiAocHJvcC5tb2RlID09PSBwcm9wQmluZGluZ01vZGVzLk9ORV9USU1FKSB7XG5cdCAgICAgICAgICAvLyBvbmUgdGltZSBiaW5kaW5nXG5cdCAgICAgICAgICB2YWx1ZSA9IChzY29wZSB8fCB2bS5fY29udGV4dCB8fCB2bSkuJGdldChwcm9wLnBhcmVudFBhdGgpO1xuXHQgICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgaWYgKHZtLl9jb250ZXh0KSB7XG5cdCAgICAgICAgICAgIC8vIGR5bmFtaWMgYmluZGluZ1xuXHQgICAgICAgICAgICB2bS5fYmluZERpcih7XG5cdCAgICAgICAgICAgICAgbmFtZTogJ3Byb3AnLFxuXHQgICAgICAgICAgICAgIGRlZjogcHJvcERlZixcblx0ICAgICAgICAgICAgICBwcm9wOiBwcm9wXG5cdCAgICAgICAgICAgIH0sIG51bGwsIG51bGwsIHNjb3BlKTsgLy8gZWwsIGhvc3QsIHNjb3BlXG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIC8vIHJvb3QgaW5zdGFuY2Vcblx0ICAgICAgICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdm0uJGdldChwcm9wLnBhcmVudFBhdGgpKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmIChwcm9wLm9wdGltaXplZExpdGVyYWwpIHtcblx0ICAgICAgICAvLyBvcHRpbWl6ZWQgbGl0ZXJhbCwgY2FzdCBpdCBhbmQganVzdCBzZXQgb25jZVxuXHQgICAgICAgIHZhciBzdHJpcHBlZCA9IHN0cmlwUXVvdGVzKHJhdyk7XG5cdCAgICAgICAgdmFsdWUgPSBzdHJpcHBlZCA9PT0gcmF3ID8gdG9Cb29sZWFuKHRvTnVtYmVyKHJhdykpIDogc3RyaXBwZWQ7XG5cdCAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBzdHJpbmcgbGl0ZXJhbCwgYnV0IHdlIG5lZWQgdG8gY2F0ZXIgZm9yXG5cdCAgICAgICAgLy8gQm9vbGVhbiBwcm9wcyB3aXRoIG5vIHZhbHVlLCBvciB3aXRoIHNhbWVcblx0ICAgICAgICAvLyBsaXRlcmFsIHZhbHVlIChlLmcuIGRpc2FibGVkPVwiZGlzYWJsZWRcIilcblx0ICAgICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1sb2FkZXIvaXNzdWVzLzE4MlxuXHQgICAgICAgIHZhbHVlID0gb3B0aW9ucy50eXBlID09PSBCb29sZWFuICYmIChyYXcgPT09ICcnIHx8IHJhdyA9PT0gaHlwaGVuYXRlKHByb3AubmFtZSkpID8gdHJ1ZSA6IHJhdztcblx0ICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByb2Nlc3MgYSBwcm9wIHdpdGggYSByYXdWYWx1ZSwgYXBwbHlpbmcgbmVjZXNzYXJ5IGNvZXJzaW9ucyxcblx0ICogZGVmYXVsdCB2YWx1ZXMgJiBhc3NlcnRpb25zIGFuZCBjYWxsIHRoZSBnaXZlbiBjYWxsYmFjayB3aXRoXG5cdCAqIHByb2Nlc3NlZCB2YWx1ZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG5cdCAqIEBwYXJhbSB7Kn0gcmF3VmFsdWVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCByYXdWYWx1ZSwgZm4pIHtcblx0ICB2YXIgaXNTaW1wbGUgPSBwcm9wLmR5bmFtaWMgJiYgaXNTaW1wbGVQYXRoKHByb3AucGFyZW50UGF0aCk7XG5cdCAgdmFyIHZhbHVlID0gcmF3VmFsdWU7XG5cdCAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHZhbHVlID0gZ2V0UHJvcERlZmF1bHRWYWx1ZSh2bSwgcHJvcCk7XG5cdCAgfVxuXHQgIHZhbHVlID0gY29lcmNlUHJvcChwcm9wLCB2YWx1ZSwgdm0pO1xuXHQgIHZhciBjb2VyY2VkID0gdmFsdWUgIT09IHJhd1ZhbHVlO1xuXHQgIGlmICghYXNzZXJ0UHJvcChwcm9wLCB2YWx1ZSwgdm0pKSB7XG5cdCAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcblx0ICB9XG5cdCAgaWYgKGlzU2ltcGxlICYmICFjb2VyY2VkKSB7XG5cdCAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGZuKHZhbHVlKTtcblx0ICAgIH0pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBmbih2YWx1ZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogU2V0IGEgcHJvcCdzIGluaXRpYWwgdmFsdWUgb24gYSB2bSBhbmQgaXRzIGRhdGEgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3Bcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSkge1xuXHQgIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHZhbHVlLCBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgIGRlZmluZVJlYWN0aXZlKHZtLCBwcm9wLnBhdGgsIHZhbHVlKTtcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFVwZGF0ZSBhIHByb3AncyB2YWx1ZSBvbiBhIHZtLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3Bcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZVByb3Aodm0sIHByb3AsIHZhbHVlKSB7XG5cdCAgcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgdmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgdm1bcHJvcC5wYXRoXSA9IHZhbHVlO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IHRoZSBkZWZhdWx0IHZhbHVlIG9mIGEgcHJvcC5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG5cdCAqIEByZXR1cm4geyp9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0UHJvcERlZmF1bHRWYWx1ZSh2bSwgcHJvcCkge1xuXHQgIC8vIG5vIGRlZmF1bHQsIHJldHVybiB1bmRlZmluZWRcblx0ICB2YXIgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcblx0ICBpZiAoIWhhc093bihvcHRpb25zLCAnZGVmYXVsdCcpKSB7XG5cdCAgICAvLyBhYnNlbnQgYm9vbGVhbiB2YWx1ZSBkZWZhdWx0cyB0byBmYWxzZVxuXHQgICAgcmV0dXJuIG9wdGlvbnMudHlwZSA9PT0gQm9vbGVhbiA/IGZhbHNlIDogdW5kZWZpbmVkO1xuXHQgIH1cblx0ICB2YXIgZGVmID0gb3B0aW9uc1snZGVmYXVsdCddO1xuXHQgIC8vIHdhcm4gYWdhaW5zdCBub24tZmFjdG9yeSBkZWZhdWx0cyBmb3IgT2JqZWN0ICYgQXJyYXlcblx0ICBpZiAoaXNPYmplY3QoZGVmKSkge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIGRlZmF1bHQgdmFsdWUgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiOiAnICsgJ1Byb3BzIHdpdGggdHlwZSBPYmplY3QvQXJyYXkgbXVzdCB1c2UgYSBmYWN0b3J5IGZ1bmN0aW9uICcgKyAndG8gcmV0dXJuIHRoZSBkZWZhdWx0IHZhbHVlLicsIHZtKTtcblx0ICB9XG5cdCAgLy8gY2FsbCBmYWN0b3J5IGZ1bmN0aW9uIGZvciBub24tRnVuY3Rpb24gdHlwZXNcblx0ICByZXR1cm4gdHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJyAmJiBvcHRpb25zLnR5cGUgIT09IEZ1bmN0aW9uID8gZGVmLmNhbGwodm0pIDogZGVmO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXNzZXJ0IHdoZXRoZXIgYSBwcm9wIGlzIHZhbGlkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFzc2VydFByb3AocHJvcCwgdmFsdWUsIHZtKSB7XG5cdCAgaWYgKCFwcm9wLm9wdGlvbnMucmVxdWlyZWQgJiYgKCAvLyBub24tcmVxdWlyZWRcblx0ICBwcm9wLnJhdyA9PT0gbnVsbCB8fCAvLyBhYnNjZW50XG5cdCAgdmFsdWUgPT0gbnVsbCkgLy8gbnVsbCBvciB1bmRlZmluZWRcblx0ICApIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdCAgdmFyIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG5cdCAgdmFyIHR5cGUgPSBvcHRpb25zLnR5cGU7XG5cdCAgdmFyIHZhbGlkID0gIXR5cGU7XG5cdCAgdmFyIGV4cGVjdGVkVHlwZXMgPSBbXTtcblx0ICBpZiAodHlwZSkge1xuXHQgICAgaWYgKCFpc0FycmF5KHR5cGUpKSB7XG5cdCAgICAgIHR5cGUgPSBbdHlwZV07XG5cdCAgICB9XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR5cGUubGVuZ3RoICYmICF2YWxpZDsgaSsrKSB7XG5cdCAgICAgIHZhciBhc3NlcnRlZFR5cGUgPSBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlW2ldKTtcblx0ICAgICAgZXhwZWN0ZWRUeXBlcy5wdXNoKGFzc2VydGVkVHlwZS5leHBlY3RlZFR5cGUpO1xuXHQgICAgICB2YWxpZCA9IGFzc2VydGVkVHlwZS52YWxpZDtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKCF2YWxpZCkge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgd2FybignSW52YWxpZCBwcm9wOiB0eXBlIGNoZWNrIGZhaWxlZCBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCIuJyArICcgRXhwZWN0ZWQgJyArIGV4cGVjdGVkVHlwZXMubWFwKGZvcm1hdFR5cGUpLmpvaW4oJywgJykgKyAnLCBnb3QgJyArIGZvcm1hdFZhbHVlKHZhbHVlKSArICcuJywgdm0pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICB2YXIgdmFsaWRhdG9yID0gb3B0aW9ucy52YWxpZGF0b3I7XG5cdCAgaWYgKHZhbGlkYXRvcikge1xuXHQgICAgaWYgKCF2YWxpZGF0b3IodmFsdWUpKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBwcm9wOiBjdXN0b20gdmFsaWRhdG9yIGNoZWNrIGZhaWxlZCBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCIuJywgdm0pO1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9yY2UgcGFyc2luZyB2YWx1ZSB3aXRoIGNvZXJjZSBvcHRpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7Kn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb2VyY2VQcm9wKHByb3AsIHZhbHVlLCB2bSkge1xuXHQgIHZhciBjb2VyY2UgPSBwcm9wLm9wdGlvbnMuY29lcmNlO1xuXHQgIGlmICghY29lcmNlKSB7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfVxuXHQgIGlmICh0eXBlb2YgY29lcmNlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICByZXR1cm4gY29lcmNlKHZhbHVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIGNvZXJjZSBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCI6IGV4cGVjdGVkIGZ1bmN0aW9uLCBnb3QgJyArIHR5cGVvZiBjb2VyY2UgKyAnLicsIHZtKTtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBc3NlcnQgdGhlIHR5cGUgb2YgYSB2YWx1ZVxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHR5cGVcblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFzc2VydFR5cGUodmFsdWUsIHR5cGUpIHtcblx0ICB2YXIgdmFsaWQ7XG5cdCAgdmFyIGV4cGVjdGVkVHlwZTtcblx0ICBpZiAodHlwZSA9PT0gU3RyaW5nKSB7XG5cdCAgICBleHBlY3RlZFR5cGUgPSAnc3RyaW5nJztcblx0ICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSBOdW1iZXIpIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdudW1iZXInO1xuXHQgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IEJvb2xlYW4pIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdib29sZWFuJztcblx0ICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSBGdW5jdGlvbikge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ2Z1bmN0aW9uJztcblx0ICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSBPYmplY3QpIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdvYmplY3QnO1xuXHQgICAgdmFsaWQgPSBpc1BsYWluT2JqZWN0KHZhbHVlKTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IEFycmF5KSB7XG5cdCAgICBleHBlY3RlZFR5cGUgPSAnYXJyYXknO1xuXHQgICAgdmFsaWQgPSBpc0FycmF5KHZhbHVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG5cdCAgfVxuXHQgIHJldHVybiB7XG5cdCAgICB2YWxpZDogdmFsaWQsXG5cdCAgICBleHBlY3RlZFR5cGU6IGV4cGVjdGVkVHlwZVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JtYXQgdHlwZSBmb3Igb3V0cHV0XG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRUeXBlKHR5cGUpIHtcblx0ICByZXR1cm4gdHlwZSA/IHR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0eXBlLnNsaWNlKDEpIDogJ2N1c3RvbSB0eXBlJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcm1hdCB2YWx1ZVxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRWYWx1ZSh2YWwpIHtcblx0ICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkuc2xpY2UoOCwgLTEpO1xuXHR9XG5cdFxuXHR2YXIgYmluZGluZ01vZGVzID0gY29uZmlnLl9wcm9wQmluZGluZ01vZGVzO1xuXHRcblx0dmFyIHByb3BEZWYgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgY2hpbGQgPSB0aGlzLnZtO1xuXHQgICAgdmFyIHBhcmVudCA9IGNoaWxkLl9jb250ZXh0O1xuXHQgICAgLy8gcGFzc2VkIGluIGZyb20gY29tcGlsZXIgZGlyZWN0bHlcblx0ICAgIHZhciBwcm9wID0gdGhpcy5kZXNjcmlwdG9yLnByb3A7XG5cdCAgICB2YXIgY2hpbGRLZXkgPSBwcm9wLnBhdGg7XG5cdCAgICB2YXIgcGFyZW50S2V5ID0gcHJvcC5wYXJlbnRQYXRoO1xuXHQgICAgdmFyIHR3b1dheSA9IHByb3AubW9kZSA9PT0gYmluZGluZ01vZGVzLlRXT19XQVk7XG5cdFxuXHQgICAgdmFyIHBhcmVudFdhdGNoZXIgPSB0aGlzLnBhcmVudFdhdGNoZXIgPSBuZXcgV2F0Y2hlcihwYXJlbnQsIHBhcmVudEtleSwgZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgICB1cGRhdGVQcm9wKGNoaWxkLCBwcm9wLCB2YWwpO1xuXHQgICAgfSwge1xuXHQgICAgICB0d29XYXk6IHR3b1dheSxcblx0ICAgICAgZmlsdGVyczogcHJvcC5maWx0ZXJzLFxuXHQgICAgICAvLyBpbXBvcnRhbnQ6IHByb3BzIG5lZWQgdG8gYmUgb2JzZXJ2ZWQgb24gdGhlXG5cdCAgICAgIC8vIHYtZm9yIHNjb3BlIGlmIHByZXNlbnRcblx0ICAgICAgc2NvcGU6IHRoaXMuX3Njb3BlXG5cdCAgICB9KTtcblx0XG5cdCAgICAvLyBzZXQgdGhlIGNoaWxkIGluaXRpYWwgdmFsdWUuXG5cdCAgICBpbml0UHJvcChjaGlsZCwgcHJvcCwgcGFyZW50V2F0Y2hlci52YWx1ZSk7XG5cdFxuXHQgICAgLy8gc2V0dXAgdHdvLXdheSBiaW5kaW5nXG5cdCAgICBpZiAodHdvV2F5KSB7XG5cdCAgICAgIC8vIGltcG9ydGFudDogZGVmZXIgdGhlIGNoaWxkIHdhdGNoZXIgY3JlYXRpb24gdW50aWxcblx0ICAgICAgLy8gdGhlIGNyZWF0ZWQgaG9vayAoYWZ0ZXIgZGF0YSBvYnNlcnZhdGlvbilcblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICBjaGlsZC4kb25jZSgncHJlLWhvb2s6Y3JlYXRlZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzZWxmLmNoaWxkV2F0Y2hlciA9IG5ldyBXYXRjaGVyKGNoaWxkLCBjaGlsZEtleSwgZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgICAgICAgcGFyZW50V2F0Y2hlci5zZXQodmFsKTtcblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICAvLyBlbnN1cmUgc3luYyB1cHdhcmQgYmVmb3JlIHBhcmVudCBzeW5jIGRvd24uXG5cdCAgICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBpbiBjYXNlcyBlLmcuIHRoZSBjaGlsZFxuXHQgICAgICAgICAgLy8gbXV0YXRlcyBhIHByb3AgYXJyYXksIHRoZW4gcmVwbGFjZXMgaXQuICgjMTY4Mylcblx0ICAgICAgICAgIHN5bmM6IHRydWVcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB0aGlzLnBhcmVudFdhdGNoZXIudGVhcmRvd24oKTtcblx0ICAgIGlmICh0aGlzLmNoaWxkV2F0Y2hlcikge1xuXHQgICAgICB0aGlzLmNoaWxkV2F0Y2hlci50ZWFyZG93bigpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBxdWV1ZSQxID0gW107XG5cdHZhciBxdWV1ZWQgPSBmYWxzZTtcblx0XG5cdC8qKlxuXHQgKiBQdXNoIGEgam9iIGludG8gdGhlIHF1ZXVlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBqb2Jcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwdXNoSm9iKGpvYikge1xuXHQgIHF1ZXVlJDEucHVzaChqb2IpO1xuXHQgIGlmICghcXVldWVkKSB7XG5cdCAgICBxdWV1ZWQgPSB0cnVlO1xuXHQgICAgbmV4dFRpY2soZmx1c2gpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEZsdXNoIHRoZSBxdWV1ZSwgYW5kIGRvIG9uZSBmb3JjZWQgcmVmbG93IGJlZm9yZVxuXHQgKiB0cmlnZ2VyaW5nIHRyYW5zaXRpb25zLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZsdXNoKCkge1xuXHQgIC8vIEZvcmNlIGxheW91dFxuXHQgIHZhciBmID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldEhlaWdodDtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlJDEubGVuZ3RoOyBpKyspIHtcblx0ICAgIHF1ZXVlJDFbaV0oKTtcblx0ICB9XG5cdCAgcXVldWUkMSA9IFtdO1xuXHQgIHF1ZXVlZCA9IGZhbHNlO1xuXHQgIC8vIGR1bW15IHJldHVybiwgc28ganMgbGludGVycyBkb24ndCBjb21wbGFpbiBhYm91dFxuXHQgIC8vIHVudXNlZCB2YXJpYWJsZSBmXG5cdCAgcmV0dXJuIGY7XG5cdH1cblx0XG5cdHZhciBUWVBFX1RSQU5TSVRJT04gPSAndHJhbnNpdGlvbic7XG5cdHZhciBUWVBFX0FOSU1BVElPTiA9ICdhbmltYXRpb24nO1xuXHR2YXIgdHJhbnNEdXJhdGlvblByb3AgPSB0cmFuc2l0aW9uUHJvcCArICdEdXJhdGlvbic7XG5cdHZhciBhbmltRHVyYXRpb25Qcm9wID0gYW5pbWF0aW9uUHJvcCArICdEdXJhdGlvbic7XG5cdFxuXHQvKipcblx0ICogSWYgYSBqdXN0LWVudGVyZWQgZWxlbWVudCBpcyBhcHBsaWVkIHRoZVxuXHQgKiBsZWF2ZSBjbGFzcyB3aGlsZSBpdHMgZW50ZXIgdHJhbnNpdGlvbiBoYXNuJ3Qgc3RhcnRlZCB5ZXQsXG5cdCAqIGFuZCB0aGUgdHJhbnNpdGlvbmVkIHByb3BlcnR5IGhhcyB0aGUgc2FtZSB2YWx1ZSBmb3IgYm90aFxuXHQgKiBlbnRlci9sZWF2ZSwgdGhlbiB0aGUgbGVhdmUgdHJhbnNpdGlvbiB3aWxsIGJlIHNraXBwZWQgYW5kXG5cdCAqIHRoZSB0cmFuc2l0aW9uZW5kIGV2ZW50IG5ldmVyIGZpcmVzLiBUaGlzIGZ1bmN0aW9uIGVuc3VyZXNcblx0ICogaXRzIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBhZnRlciBhIHRyYW5zaXRpb24gaGFzIHN0YXJ0ZWRcblx0ICogYnkgd2FpdGluZyBmb3IgZG91YmxlIHJhZi5cblx0ICpcblx0ICogSXQgZmFsbHMgYmFjayB0byBzZXRUaW1lb3V0IG9uIGRldmljZXMgdGhhdCBzdXBwb3J0IENTU1xuXHQgKiB0cmFuc2l0aW9ucyBidXQgbm90IHJhZiAoZS5nLiBBbmRyb2lkIDQuMiBicm93c2VyKSAtIHNpbmNlXG5cdCAqIHRoZXNlIGVudmlyb25tZW50cyBhcmUgdXN1YWxseSBzbG93LCB3ZSBhcmUgZ2l2aW5nIGl0IGFcblx0ICogcmVsYXRpdmVseSBsYXJnZSB0aW1lb3V0LlxuXHQgKi9cblx0XG5cdHZhciByYWYgPSBpbkJyb3dzZXIgJiYgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTtcblx0dmFyIHdhaXRGb3JUcmFuc2l0aW9uU3RhcnQgPSByYWZcblx0LyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0PyBmdW5jdGlvbiAoZm4pIHtcblx0ICByYWYoZnVuY3Rpb24gKCkge1xuXHQgICAgcmFmKGZuKTtcblx0ICB9KTtcblx0fSA6IGZ1bmN0aW9uIChmbikge1xuXHQgIHNldFRpbWVvdXQoZm4sIDUwKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBIFRyYW5zaXRpb24gb2JqZWN0IHRoYXQgZW5jYXBzdWxhdGVzIHRoZSBzdGF0ZSBhbmQgbG9naWNcblx0ICogb2YgdGhlIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlkXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBob29rc1xuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICovXG5cdGZ1bmN0aW9uIFRyYW5zaXRpb24oZWwsIGlkLCBob29rcywgdm0pIHtcblx0ICB0aGlzLmlkID0gaWQ7XG5cdCAgdGhpcy5lbCA9IGVsO1xuXHQgIHRoaXMuZW50ZXJDbGFzcyA9IGhvb2tzICYmIGhvb2tzLmVudGVyQ2xhc3MgfHwgaWQgKyAnLWVudGVyJztcblx0ICB0aGlzLmxlYXZlQ2xhc3MgPSBob29rcyAmJiBob29rcy5sZWF2ZUNsYXNzIHx8IGlkICsgJy1sZWF2ZSc7XG5cdCAgdGhpcy5ob29rcyA9IGhvb2tzO1xuXHQgIHRoaXMudm0gPSB2bTtcblx0ICAvLyBhc3luYyBzdGF0ZVxuXHQgIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSB0aGlzLm9wID0gdGhpcy5jYiA9IG51bGw7XG5cdCAgdGhpcy5qdXN0RW50ZXJlZCA9IGZhbHNlO1xuXHQgIHRoaXMuZW50ZXJlZCA9IHRoaXMubGVmdCA9IGZhbHNlO1xuXHQgIHRoaXMudHlwZUNhY2hlID0ge307XG5cdCAgLy8gY2hlY2sgY3NzIHRyYW5zaXRpb24gdHlwZVxuXHQgIHRoaXMudHlwZSA9IGhvb2tzICYmIGhvb2tzLnR5cGU7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGlmICh0aGlzLnR5cGUgJiYgdGhpcy50eXBlICE9PSBUWVBFX1RSQU5TSVRJT04gJiYgdGhpcy50eXBlICE9PSBUWVBFX0FOSU1BVElPTikge1xuXHQgICAgICB3YXJuKCdpbnZhbGlkIENTUyB0cmFuc2l0aW9uIHR5cGUgZm9yIHRyYW5zaXRpb249XCInICsgdGhpcy5pZCArICdcIjogJyArIHRoaXMudHlwZSwgdm0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyBiaW5kXG5cdCAgdmFyIHNlbGYgPSB0aGlzO1snZW50ZXJOZXh0VGljaycsICdlbnRlckRvbmUnLCAnbGVhdmVOZXh0VGljaycsICdsZWF2ZURvbmUnXS5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7XG5cdCAgICBzZWxmW21dID0gYmluZChzZWxmW21dLCBzZWxmKTtcblx0ICB9KTtcblx0fVxuXHRcblx0dmFyIHAkMSA9IFRyYW5zaXRpb24ucHJvdG90eXBlO1xuXHRcblx0LyoqXG5cdCAqIFN0YXJ0IGFuIGVudGVyaW5nIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIDEuIGVudGVyIHRyYW5zaXRpb24gdHJpZ2dlcmVkXG5cdCAqIDIuIGNhbGwgYmVmb3JlRW50ZXIgaG9va1xuXHQgKiAzLiBhZGQgZW50ZXIgY2xhc3Ncblx0ICogNC4gaW5zZXJ0L3Nob3cgZWxlbWVudFxuXHQgKiA1LiBjYWxsIGVudGVyIGhvb2sgKHdpdGggcG9zc2libGUgZXhwbGljaXQganMgY2FsbGJhY2spXG5cdCAqIDYuIHJlZmxvd1xuXHQgKiA3LiBiYXNlZCBvbiB0cmFuc2l0aW9uIHR5cGU6XG5cdCAqICAgIC0gdHJhbnNpdGlvbjpcblx0ICogICAgICAgIHJlbW92ZSBjbGFzcyBub3csIHdhaXQgZm9yIHRyYW5zaXRpb25lbmQsXG5cdCAqICAgICAgICB0aGVuIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cblx0ICogICAgLSBhbmltYXRpb246XG5cdCAqICAgICAgICB3YWl0IGZvciBhbmltYXRpb25lbmQsIHJlbW92ZSBjbGFzcyxcblx0ICogICAgICAgIHRoZW4gZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuXHQgKiAgICAtIG5vIGNzcyB0cmFuc2l0aW9uOlxuXHQgKiAgICAgICAgZG9uZSBub3cgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cblx0ICogOC4gd2FpdCBmb3IgZWl0aGVyIGRvbmUgb3IganMgY2FsbGJhY2ssIHRoZW4gY2FsbFxuXHQgKiAgICBhZnRlckVudGVyIGhvb2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gaW5zZXJ0L3Nob3cgdGhlIGVsZW1lbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgKi9cblx0XG5cdHAkMS5lbnRlciA9IGZ1bmN0aW9uIChvcCwgY2IpIHtcblx0ICB0aGlzLmNhbmNlbFBlbmRpbmcoKTtcblx0ICB0aGlzLmNhbGxIb29rKCdiZWZvcmVFbnRlcicpO1xuXHQgIHRoaXMuY2IgPSBjYjtcblx0ICBhZGRDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuXHQgIG9wKCk7XG5cdCAgdGhpcy5lbnRlcmVkID0gZmFsc2U7XG5cdCAgdGhpcy5jYWxsSG9va1dpdGhDYignZW50ZXInKTtcblx0ICBpZiAodGhpcy5lbnRlcmVkKSB7XG5cdCAgICByZXR1cm47IC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cblx0ICB9XG5cdCAgdGhpcy5jYW5jZWwgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MuZW50ZXJDYW5jZWxsZWQ7XG5cdCAgcHVzaEpvYih0aGlzLmVudGVyTmV4dFRpY2spO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFRoZSBcIm5leHRUaWNrXCIgcGhhc2Ugb2YgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbiwgd2hpY2ggaXNcblx0ICogdG8gYmUgcHVzaGVkIGludG8gYSBxdWV1ZSBhbmQgZXhlY3V0ZWQgYWZ0ZXIgYSByZWZsb3cgc29cblx0ICogdGhhdCByZW1vdmluZyB0aGUgY2xhc3MgY2FuIHRyaWdnZXIgYSBDU1MgdHJhbnNpdGlvbi5cblx0ICovXG5cdFxuXHRwJDEuZW50ZXJOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAvLyBwcmV2ZW50IHRyYW5zaXRpb24gc2tpcHBpbmdcblx0ICB0aGlzLmp1c3RFbnRlcmVkID0gdHJ1ZTtcblx0ICB3YWl0Rm9yVHJhbnNpdGlvblN0YXJ0KGZ1bmN0aW9uICgpIHtcblx0ICAgIF90aGlzLmp1c3RFbnRlcmVkID0gZmFsc2U7XG5cdCAgfSk7XG5cdCAgdmFyIGVudGVyRG9uZSA9IHRoaXMuZW50ZXJEb25lO1xuXHQgIHZhciB0eXBlID0gdGhpcy5nZXRDc3NUcmFuc2l0aW9uVHlwZSh0aGlzLmVudGVyQ2xhc3MpO1xuXHQgIGlmICghdGhpcy5wZW5kaW5nSnNDYikge1xuXHQgICAgaWYgKHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTikge1xuXHQgICAgICAvLyB0cmlnZ2VyIHRyYW5zaXRpb24gYnkgcmVtb3ZpbmcgZW50ZXIgY2xhc3Mgbm93XG5cdCAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgICAgIHRoaXMuc2V0dXBDc3NDYih0cmFuc2l0aW9uRW5kRXZlbnQsIGVudGVyRG9uZSk7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFRZUEVfQU5JTUFUSU9OKSB7XG5cdCAgICAgIHRoaXMuc2V0dXBDc3NDYihhbmltYXRpb25FbmRFdmVudCwgZW50ZXJEb25lKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVudGVyRG9uZSgpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OKSB7XG5cdCAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgXCJjbGVhbnVwXCIgcGhhc2Ugb2YgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbi5cblx0ICovXG5cdFxuXHRwJDEuZW50ZXJEb25lID0gZnVuY3Rpb24gKCkge1xuXHQgIHRoaXMuZW50ZXJlZCA9IHRydWU7XG5cdCAgdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcblx0ICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuXHQgIHRoaXMuY2FsbEhvb2soJ2FmdGVyRW50ZXInKTtcblx0ICBpZiAodGhpcy5jYikgdGhpcy5jYigpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFN0YXJ0IGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiAxLiBsZWF2ZSB0cmFuc2l0aW9uIHRyaWdnZXJlZC5cblx0ICogMi4gY2FsbCBiZWZvcmVMZWF2ZSBob29rXG5cdCAqIDMuIGFkZCBsZWF2ZSBjbGFzcyAodHJpZ2dlciBjc3MgdHJhbnNpdGlvbilcblx0ICogNC4gY2FsbCBsZWF2ZSBob29rICh3aXRoIHBvc3NpYmxlIGV4cGxpY2l0IGpzIGNhbGxiYWNrKVxuXHQgKiA1LiByZWZsb3cgaWYgbm8gZXhwbGljaXQganMgY2FsbGJhY2sgaXMgcHJvdmlkZWRcblx0ICogNi4gYmFzZWQgb24gdHJhbnNpdGlvbiB0eXBlOlxuXHQgKiAgICAtIHRyYW5zaXRpb24gb3IgYW5pbWF0aW9uOlxuXHQgKiAgICAgICAgd2FpdCBmb3IgZW5kIGV2ZW50LCByZW1vdmUgY2xhc3MsIHRoZW4gZG9uZSBpZlxuXHQgKiAgICAgICAgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cblx0ICogICAgLSBubyBjc3MgdHJhbnNpdGlvbjpcblx0ICogICAgICAgIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cblx0ICogNy4gd2FpdCBmb3IgZWl0aGVyIGRvbmUgb3IganMgY2FsbGJhY2ssIHRoZW4gY2FsbFxuXHQgKiAgICBhZnRlckxlYXZlIGhvb2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gcmVtb3ZlL2hpZGUgdGhlIGVsZW1lbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgKi9cblx0XG5cdHAkMS5sZWF2ZSA9IGZ1bmN0aW9uIChvcCwgY2IpIHtcblx0ICB0aGlzLmNhbmNlbFBlbmRpbmcoKTtcblx0ICB0aGlzLmNhbGxIb29rKCdiZWZvcmVMZWF2ZScpO1xuXHQgIHRoaXMub3AgPSBvcDtcblx0ICB0aGlzLmNiID0gY2I7XG5cdCAgYWRkQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcblx0ICB0aGlzLmxlZnQgPSBmYWxzZTtcblx0ICB0aGlzLmNhbGxIb29rV2l0aENiKCdsZWF2ZScpO1xuXHQgIGlmICh0aGlzLmxlZnQpIHtcblx0ICAgIHJldHVybjsgLy8gdXNlciBjYWxsZWQgZG9uZSBzeW5jaHJvbm91c2x5LlxuXHQgIH1cblx0ICB0aGlzLmNhbmNlbCA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5sZWF2ZUNhbmNlbGxlZDtcblx0ICAvLyBvbmx5IG5lZWQgdG8gaGFuZGxlIGxlYXZlRG9uZSBpZlxuXHQgIC8vIDEuIHRoZSB0cmFuc2l0aW9uIGlzIGFscmVhZHkgZG9uZSAoc3luY2hyb25vdXNseSBjYWxsZWRcblx0ICAvLyAgICBieSB0aGUgdXNlciwgd2hpY2ggY2F1c2VzIHRoaXMub3Agc2V0IHRvIG51bGwpXG5cdCAgLy8gMi4gdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFja1xuXHQgIGlmICh0aGlzLm9wICYmICF0aGlzLnBlbmRpbmdKc0NiKSB7XG5cdCAgICAvLyBpZiBhIENTUyB0cmFuc2l0aW9uIGxlYXZlcyBpbW1lZGlhdGVseSBhZnRlciBlbnRlcixcblx0ICAgIC8vIHRoZSB0cmFuc2l0aW9uZW5kIGV2ZW50IG5ldmVyIGZpcmVzLiB0aGVyZWZvcmUgd2Vcblx0ICAgIC8vIGRldGVjdCBzdWNoIGNhc2VzIGFuZCBlbmQgdGhlIGxlYXZlIGltbWVkaWF0ZWx5LlxuXHQgICAgaWYgKHRoaXMuanVzdEVudGVyZWQpIHtcblx0ICAgICAgdGhpcy5sZWF2ZURvbmUoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHB1c2hKb2IodGhpcy5sZWF2ZU5leHRUaWNrKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogVGhlIFwibmV4dFRpY2tcIiBwaGFzZSBvZiBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cblx0ICovXG5cdFxuXHRwJDEubGVhdmVOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgdHlwZSA9IHRoaXMuZ2V0Q3NzVHJhbnNpdGlvblR5cGUodGhpcy5sZWF2ZUNsYXNzKTtcblx0ICBpZiAodHlwZSkge1xuXHQgICAgdmFyIGV2ZW50ID0gdHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OID8gdHJhbnNpdGlvbkVuZEV2ZW50IDogYW5pbWF0aW9uRW5kRXZlbnQ7XG5cdCAgICB0aGlzLnNldHVwQ3NzQ2IoZXZlbnQsIHRoaXMubGVhdmVEb25lKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhpcy5sZWF2ZURvbmUoKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogVGhlIFwiY2xlYW51cFwiIHBoYXNlIG9mIGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuXHQgKi9cblx0XG5cdHAkMS5sZWF2ZURvbmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdGhpcy5sZWZ0ID0gdHJ1ZTtcblx0ICB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsO1xuXHQgIHRoaXMub3AoKTtcblx0ICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuXHQgIHRoaXMuY2FsbEhvb2soJ2FmdGVyTGVhdmUnKTtcblx0ICBpZiAodGhpcy5jYikgdGhpcy5jYigpO1xuXHQgIHRoaXMub3AgPSBudWxsO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENhbmNlbCBhbnkgcGVuZGluZyBjYWxsYmFja3MgZnJvbSBhIHByZXZpb3VzbHkgcnVubmluZ1xuXHQgKiBidXQgbm90IGZpbmlzaGVkIHRyYW5zaXRpb24uXG5cdCAqL1xuXHRcblx0cCQxLmNhbmNlbFBlbmRpbmcgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdGhpcy5vcCA9IHRoaXMuY2IgPSBudWxsO1xuXHQgIHZhciBoYXNQZW5kaW5nID0gZmFsc2U7XG5cdCAgaWYgKHRoaXMucGVuZGluZ0Nzc0NiKSB7XG5cdCAgICBoYXNQZW5kaW5nID0gdHJ1ZTtcblx0ICAgIG9mZih0aGlzLmVsLCB0aGlzLnBlbmRpbmdDc3NFdmVudCwgdGhpcy5wZW5kaW5nQ3NzQ2IpO1xuXHQgICAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IG51bGw7XG5cdCAgfVxuXHQgIGlmICh0aGlzLnBlbmRpbmdKc0NiKSB7XG5cdCAgICBoYXNQZW5kaW5nID0gdHJ1ZTtcblx0ICAgIHRoaXMucGVuZGluZ0pzQ2IuY2FuY2VsKCk7XG5cdCAgICB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcblx0ICB9XG5cdCAgaWYgKGhhc1BlbmRpbmcpIHtcblx0ICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuXHQgIH1cblx0ICBpZiAodGhpcy5jYW5jZWwpIHtcblx0ICAgIHRoaXMuY2FuY2VsLmNhbGwodGhpcy52bSwgdGhpcy5lbCk7XG5cdCAgICB0aGlzLmNhbmNlbCA9IG51bGw7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENhbGwgYSB1c2VyLXByb3ZpZGVkIHN5bmNocm9ub3VzIGhvb2sgZnVuY3Rpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG5cdCAqL1xuXHRcblx0cCQxLmNhbGxIb29rID0gZnVuY3Rpb24gKHR5cGUpIHtcblx0ICBpZiAodGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzW3R5cGVdKSB7XG5cdCAgICB0aGlzLmhvb2tzW3R5cGVdLmNhbGwodGhpcy52bSwgdGhpcy5lbCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENhbGwgYSB1c2VyLXByb3ZpZGVkLCBwb3RlbnRpYWxseS1hc3luYyBob29rIGZ1bmN0aW9uLlxuXHQgKiBXZSBjaGVjayBmb3IgdGhlIGxlbmd0aCBvZiBhcmd1bWVudHMgdG8gc2VlIGlmIHRoZSBob29rXG5cdCAqIGV4cGVjdHMgYSBgZG9uZWAgY2FsbGJhY2suIElmIHRydWUsIHRoZSB0cmFuc2l0aW9uJ3MgZW5kXG5cdCAqIHdpbGwgYmUgZGV0ZXJtaW5lZCBieSB3aGVuIHRoZSB1c2VyIGNhbGxzIHRoYXQgY2FsbGJhY2s7XG5cdCAqIG90aGVyd2lzZSwgdGhlIGVuZCBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBDU1MgdHJhbnNpdGlvbiBvclxuXHQgKiBhbmltYXRpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG5cdCAqL1xuXHRcblx0cCQxLmNhbGxIb29rV2l0aENiID0gZnVuY3Rpb24gKHR5cGUpIHtcblx0ICB2YXIgaG9vayA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rc1t0eXBlXTtcblx0ICBpZiAoaG9vaykge1xuXHQgICAgaWYgKGhvb2subGVuZ3RoID4gMSkge1xuXHQgICAgICB0aGlzLnBlbmRpbmdKc0NiID0gY2FuY2VsbGFibGUodGhpc1t0eXBlICsgJ0RvbmUnXSk7XG5cdCAgICB9XG5cdCAgICBob29rLmNhbGwodGhpcy52bSwgdGhpcy5lbCwgdGhpcy5wZW5kaW5nSnNDYik7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEdldCBhbiBlbGVtZW50J3MgdHJhbnNpdGlvbiB0eXBlIGJhc2VkIG9uIHRoZVxuXHQgKiBjYWxjdWxhdGVkIHN0eWxlcy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGNsYXNzTmFtZVxuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9XG5cdCAqL1xuXHRcblx0cCQxLmdldENzc1RyYW5zaXRpb25UeXBlID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICghdHJhbnNpdGlvbkVuZEV2ZW50IHx8XG5cdCAgLy8gc2tpcCBDU1MgdHJhbnNpdGlvbnMgaWYgcGFnZSBpcyBub3QgdmlzaWJsZSAtXG5cdCAgLy8gdGhpcyBzb2x2ZXMgdGhlIGlzc3VlIG9mIHRyYW5zaXRpb25lbmQgZXZlbnRzIG5vdFxuXHQgIC8vIGZpcmluZyB1bnRpbCB0aGUgcGFnZSBpcyB2aXNpYmxlIGFnYWluLlxuXHQgIC8vIHBhZ2VWaXNpYmlsaXR5IEFQSSBpcyBzdXBwb3J0ZWQgaW4gSUUxMCssIHNhbWUgYXNcblx0ICAvLyBDU1MgdHJhbnNpdGlvbnMuXG5cdCAgZG9jdW1lbnQuaGlkZGVuIHx8XG5cdCAgLy8gZXhwbGljaXQganMtb25seSB0cmFuc2l0aW9uXG5cdCAgdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmNzcyA9PT0gZmFsc2UgfHxcblx0ICAvLyBlbGVtZW50IGlzIGhpZGRlblxuXHQgIGlzSGlkZGVuKHRoaXMuZWwpKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciB0eXBlID0gdGhpcy50eXBlIHx8IHRoaXMudHlwZUNhY2hlW2NsYXNzTmFtZV07XG5cdCAgaWYgKHR5cGUpIHJldHVybiB0eXBlO1xuXHQgIHZhciBpbmxpbmVTdHlsZXMgPSB0aGlzLmVsLnN0eWxlO1xuXHQgIHZhciBjb21wdXRlZFN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWwpO1xuXHQgIHZhciB0cmFuc0R1cmF0aW9uID0gaW5saW5lU3R5bGVzW3RyYW5zRHVyYXRpb25Qcm9wXSB8fCBjb21wdXRlZFN0eWxlc1t0cmFuc0R1cmF0aW9uUHJvcF07XG5cdCAgaWYgKHRyYW5zRHVyYXRpb24gJiYgdHJhbnNEdXJhdGlvbiAhPT0gJzBzJykge1xuXHQgICAgdHlwZSA9IFRZUEVfVFJBTlNJVElPTjtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGFuaW1EdXJhdGlvbiA9IGlubGluZVN0eWxlc1thbmltRHVyYXRpb25Qcm9wXSB8fCBjb21wdXRlZFN0eWxlc1thbmltRHVyYXRpb25Qcm9wXTtcblx0ICAgIGlmIChhbmltRHVyYXRpb24gJiYgYW5pbUR1cmF0aW9uICE9PSAnMHMnKSB7XG5cdCAgICAgIHR5cGUgPSBUWVBFX0FOSU1BVElPTjtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKHR5cGUpIHtcblx0ICAgIHRoaXMudHlwZUNhY2hlW2NsYXNzTmFtZV0gPSB0eXBlO1xuXHQgIH1cblx0ICByZXR1cm4gdHlwZTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTZXR1cCBhIENTUyB0cmFuc2l0aW9uZW5kL2FuaW1hdGlvbmVuZCBjYWxsYmFjay5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqL1xuXHRcblx0cCQxLnNldHVwQ3NzQ2IgPSBmdW5jdGlvbiAoZXZlbnQsIGNiKSB7XG5cdCAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSBldmVudDtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICB2YXIgb25FbmQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICBpZiAoZS50YXJnZXQgPT09IGVsKSB7XG5cdCAgICAgIG9mZihlbCwgZXZlbnQsIG9uRW5kKTtcblx0ICAgICAgc2VsZi5wZW5kaW5nQ3NzRXZlbnQgPSBzZWxmLnBlbmRpbmdDc3NDYiA9IG51bGw7XG5cdCAgICAgIGlmICghc2VsZi5wZW5kaW5nSnNDYiAmJiBjYikge1xuXHQgICAgICAgIGNiKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHQgIG9uKGVsLCBldmVudCwgb25FbmQpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgaGlkZGVuIC0gaW4gdGhhdCBjYXNlIHdlIGNhbiBqdXN0XG5cdCAqIHNraXAgdGhlIHRyYW5zaXRpb24gYWxsdG9nZXRoZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc0hpZGRlbihlbCkge1xuXHQgIGlmICgvc3ZnJC8udGVzdChlbC5uYW1lc3BhY2VVUkkpKSB7XG5cdCAgICAvLyBTVkcgZWxlbWVudHMgZG8gbm90IGhhdmUgb2Zmc2V0KFdpZHRofEhlaWdodClcblx0ICAgIC8vIHNvIHdlIG5lZWQgdG8gY2hlY2sgdGhlIGNsaWVudCByZWN0XG5cdCAgICB2YXIgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHQgICAgcmV0dXJuICEocmVjdC53aWR0aCB8fCByZWN0LmhlaWdodCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiAhKGVsLm9mZnNldFdpZHRoIHx8IGVsLm9mZnNldEhlaWdodCB8fCBlbC5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCk7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgdHJhbnNpdGlvbiQxID0ge1xuXHRcblx0ICBwcmlvcml0eTogVFJBTlNJVElPTixcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoaWQsIG9sZElkKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgLy8gcmVzb2x2ZSBvbiBvd25lciB2bVxuXHQgICAgdmFyIGhvb2tzID0gcmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICd0cmFuc2l0aW9ucycsIGlkKTtcblx0ICAgIGlkID0gaWQgfHwgJ3YnO1xuXHQgICAgb2xkSWQgPSBvbGRJZCB8fCAndic7XG5cdCAgICBlbC5fX3ZfdHJhbnMgPSBuZXcgVHJhbnNpdGlvbihlbCwgaWQsIGhvb2tzLCB0aGlzLnZtKTtcblx0ICAgIHJlbW92ZUNsYXNzKGVsLCBvbGRJZCArICctdHJhbnNpdGlvbicpO1xuXHQgICAgYWRkQ2xhc3MoZWwsIGlkICsgJy10cmFuc2l0aW9uJyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGludGVybmFsRGlyZWN0aXZlcyA9IHtcblx0ICBzdHlsZTogc3R5bGUsXG5cdCAgJ2NsYXNzJzogdkNsYXNzLFxuXHQgIGNvbXBvbmVudDogY29tcG9uZW50LFxuXHQgIHByb3A6IHByb3BEZWYsXG5cdCAgdHJhbnNpdGlvbjogdHJhbnNpdGlvbiQxXG5cdH07XG5cdFxuXHQvLyBzcGVjaWFsIGJpbmRpbmcgcHJlZml4ZXNcblx0dmFyIGJpbmRSRSA9IC9edi1iaW5kOnxeOi87XG5cdHZhciBvblJFID0gL152LW9uOnxeQC87XG5cdHZhciBkaXJBdHRyUkUgPSAvXnYtKFteOl0rKSg/OiR8OiguKikkKS87XG5cdHZhciBtb2RpZmllclJFID0gL1xcLlteXFwuXSsvZztcblx0dmFyIHRyYW5zaXRpb25SRSA9IC9eKHYtYmluZDp8Oik/dHJhbnNpdGlvbiQvO1xuXHRcblx0Ly8gZGVmYXVsdCBkaXJlY3RpdmUgcHJpb3JpdHlcblx0dmFyIERFRkFVTFRfUFJJT1JJVFkgPSAxMDAwO1xuXHR2YXIgREVGQVVMVF9URVJNSU5BTF9QUklPUklUWSA9IDIwMDA7XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBhIHRlbXBsYXRlIGFuZCByZXR1cm4gYSByZXVzYWJsZSBjb21wb3NpdGUgbGlua1xuXHQgKiBmdW5jdGlvbiwgd2hpY2ggcmVjdXJzaXZlbHkgY29udGFpbnMgbW9yZSBsaW5rIGZ1bmN0aW9uc1xuXHQgKiBpbnNpZGUuIFRoaXMgdG9wIGxldmVsIGNvbXBpbGUgZnVuY3Rpb24gd291bGQgbm9ybWFsbHlcblx0ICogYmUgY2FsbGVkIG9uIGluc3RhbmNlIHJvb3Qgbm9kZXMsIGJ1dCBjYW4gYWxzbyBiZSB1c2VkXG5cdCAqIGZvciBwYXJ0aWFsIGNvbXBpbGF0aW9uIGlmIHRoZSBwYXJ0aWFsIGFyZ3VtZW50IGlzIHRydWUuXG5cdCAqXG5cdCAqIFRoZSByZXR1cm5lZCBjb21wb3NpdGUgbGluayBmdW5jdGlvbiwgd2hlbiBjYWxsZWQsIHdpbGxcblx0ICogcmV0dXJuIGFuIHVubGluayBmdW5jdGlvbiB0aGF0IHRlYXJzZG93biBhbGwgZGlyZWN0aXZlc1xuXHQgKiBjcmVhdGVkIGR1cmluZyB0aGUgbGlua2luZyBwaGFzZS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gcGFydGlhbFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlKGVsLCBvcHRpb25zLCBwYXJ0aWFsKSB7XG5cdCAgLy8gbGluayBmdW5jdGlvbiBmb3IgdGhlIG5vZGUgaXRzZWxmLlxuXHQgIHZhciBub2RlTGlua0ZuID0gcGFydGlhbCB8fCAhb3B0aW9ucy5fYXNDb21wb25lbnQgPyBjb21waWxlTm9kZShlbCwgb3B0aW9ucykgOiBudWxsO1xuXHQgIC8vIGxpbmsgZnVuY3Rpb24gZm9yIHRoZSBjaGlsZE5vZGVzXG5cdCAgdmFyIGNoaWxkTGlua0ZuID0gIShub2RlTGlua0ZuICYmIG5vZGVMaW5rRm4udGVybWluYWwpICYmICFpc1NjcmlwdChlbCkgJiYgZWwuaGFzQ2hpbGROb2RlcygpID8gY29tcGlsZU5vZGVMaXN0KGVsLmNoaWxkTm9kZXMsIG9wdGlvbnMpIDogbnVsbDtcblx0XG5cdCAgLyoqXG5cdCAgICogQSBjb21wb3NpdGUgbGlua2VyIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbiBhIGFscmVhZHlcblx0ICAgKiBjb21waWxlZCBwaWVjZSBvZiBET00sIHdoaWNoIGluc3RhbnRpYXRlcyBhbGwgZGlyZWN0aXZlXG5cdCAgICogaW5zdGFuY2VzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG5cdCAgICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIGhvc3Qgdm0gb2YgdHJhbnNjbHVkZWQgY29udGVudFxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBsaW5rIGNvbnRleHQgZnJhZ21lbnRcblx0ICAgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG5cdCAgICovXG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiBjb21wb3NpdGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgLy8gY2FjaGUgY2hpbGROb2RlcyBiZWZvcmUgbGlua2luZyBwYXJlbnQsIGZpeCAjNjU3XG5cdCAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkoZWwuY2hpbGROb2Rlcyk7XG5cdCAgICAvLyBsaW5rXG5cdCAgICB2YXIgZGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uIGNvbXBvc2l0ZUxpbmtDYXB0dXJlcigpIHtcblx0ICAgICAgaWYgKG5vZGVMaW5rRm4pIG5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgICAgIGlmIChjaGlsZExpbmtGbikgY2hpbGRMaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgIH0sIHZtKTtcblx0ICAgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIGRpcnMpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBcHBseSBhIGxpbmtlciB0byBhIHZtL2VsZW1lbnQgcGFpciBhbmQgY2FwdHVyZSB0aGVcblx0ICogZGlyZWN0aXZlcyBjcmVhdGVkIGR1cmluZyB0aGUgcHJvY2Vzcy5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gbGlua2VyXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGxpbmtBbmRDYXB0dXJlKGxpbmtlciwgdm0pIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgLy8gcmVzZXQgZGlyZWN0aXZlcyBiZWZvcmUgZXZlcnkgY2FwdHVyZSBpbiBwcm9kdWN0aW9uXG5cdCAgICAvLyBtb2RlLCBzbyB0aGF0IHdoZW4gdW5saW5raW5nIHdlIGRvbid0IG5lZWQgdG8gc3BsaWNlXG5cdCAgICAvLyB0aGVtIG91dCAod2hpY2ggdHVybnMgb3V0IHRvIGJlIGEgcGVyZiBoaXQpLlxuXHQgICAgLy8gdGhleSBhcmUga2VwdCBpbiBkZXZlbG9wbWVudCBtb2RlIGJlY2F1c2UgdGhleSBhcmVcblx0ICAgIC8vIHVzZWZ1bCBmb3IgVnVlJ3Mgb3duIHRlc3RzLlxuXHQgICAgdm0uX2RpcmVjdGl2ZXMgPSBbXTtcblx0ICB9XG5cdCAgdmFyIG9yaWdpbmFsRGlyQ291bnQgPSB2bS5fZGlyZWN0aXZlcy5sZW5ndGg7XG5cdCAgbGlua2VyKCk7XG5cdCAgdmFyIGRpcnMgPSB2bS5fZGlyZWN0aXZlcy5zbGljZShvcmlnaW5hbERpckNvdW50KTtcblx0ICBkaXJzLnNvcnQoZGlyZWN0aXZlQ29tcGFyYXRvcik7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBkaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgZGlyc1tpXS5fYmluZCgpO1xuXHQgIH1cblx0ICByZXR1cm4gZGlycztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERpcmVjdGl2ZSBwcmlvcml0eSBzb3J0IGNvbXBhcmF0b3Jcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IGFcblx0ICogQHBhcmFtIHtPYmplY3R9IGJcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkaXJlY3RpdmVDb21wYXJhdG9yKGEsIGIpIHtcblx0ICBhID0gYS5kZXNjcmlwdG9yLmRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZO1xuXHQgIGIgPSBiLmRlc2NyaXB0b3IuZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfUFJJT1JJVFk7XG5cdCAgcmV0dXJuIGEgPiBiID8gLTEgOiBhID09PSBiID8gMCA6IDE7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBMaW5rZXIgZnVuY3Rpb25zIHJldHVybiBhbiB1bmxpbmsgZnVuY3Rpb24gdGhhdFxuXHQgKiB0ZWFyc2Rvd24gYWxsIGRpcmVjdGl2ZXMgaW5zdGFuY2VzIGdlbmVyYXRlZCBkdXJpbmdcblx0ICogdGhlIHByb2Nlc3MuXG5cdCAqXG5cdCAqIFdlIGNyZWF0ZSB1bmxpbmsgZnVuY3Rpb25zIHdpdGggb25seSB0aGUgbmVjZXNzYXJ5XG5cdCAqIGluZm9ybWF0aW9uIHRvIGF2b2lkIHJldGFpbmluZyBhZGRpdGlvbmFsIGNsb3N1cmVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtBcnJheX0gZGlyc1xuXHQgKiBAcGFyYW0ge1Z1ZX0gW2NvbnRleHRdXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtjb250ZXh0RGlyc11cblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVVubGlua0ZuKHZtLCBkaXJzLCBjb250ZXh0LCBjb250ZXh0RGlycykge1xuXHQgIGZ1bmN0aW9uIHVubGluayhkZXN0cm95aW5nKSB7XG5cdCAgICB0ZWFyZG93bkRpcnModm0sIGRpcnMsIGRlc3Ryb3lpbmcpO1xuXHQgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dERpcnMpIHtcblx0ICAgICAgdGVhcmRvd25EaXJzKGNvbnRleHQsIGNvbnRleHREaXJzKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gZXhwb3NlIGxpbmtlZCBkaXJlY3RpdmVzXG5cdCAgdW5saW5rLmRpcnMgPSBkaXJzO1xuXHQgIHJldHVybiB1bmxpbms7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUZWFyZG93biBwYXJ0aWFsIGxpbmtlZCBkaXJlY3RpdmVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtBcnJheX0gZGlyc1xuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IGRlc3Ryb3lpbmdcblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0ZWFyZG93bkRpcnModm0sIGRpcnMsIGRlc3Ryb3lpbmcpIHtcblx0ICB2YXIgaSA9IGRpcnMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGRpcnNbaV0uX3RlYXJkb3duKCk7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhZGVzdHJveWluZykge1xuXHQgICAgICB2bS5fZGlyZWN0aXZlcy4kcmVtb3ZlKGRpcnNbaV0pO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgbGluayBwcm9wcyBvbiBhbiBpbnN0YW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3BzXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVBbmRMaW5rUHJvcHModm0sIGVsLCBwcm9wcywgc2NvcGUpIHtcblx0ICB2YXIgcHJvcHNMaW5rRm4gPSBjb21waWxlUHJvcHMoZWwsIHByb3BzLCB2bSk7XG5cdCAgdmFyIHByb3BEaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuXHQgICAgcHJvcHNMaW5rRm4odm0sIHNjb3BlKTtcblx0ICB9LCB2bSk7XG5cdCAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgcHJvcERpcnMpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSB0aGUgcm9vdCBlbGVtZW50IG9mIGFuIGluc3RhbmNlLlxuXHQgKlxuXHQgKiAxLiBhdHRycyBvbiBjb250ZXh0IGNvbnRhaW5lciAoY29udGV4dCBzY29wZSlcblx0ICogMi4gYXR0cnMgb24gdGhlIGNvbXBvbmVudCB0ZW1wbGF0ZSByb290IG5vZGUsIGlmXG5cdCAqICAgIHJlcGxhY2U6dHJ1ZSAoY2hpbGQgc2NvcGUpXG5cdCAqXG5cdCAqIElmIHRoaXMgaXMgYSBmcmFnbWVudCBpbnN0YW5jZSwgd2Ugb25seSBuZWVkIHRvIGNvbXBpbGUgMS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dE9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZVJvb3QoZWwsIG9wdGlvbnMsIGNvbnRleHRPcHRpb25zKSB7XG5cdCAgdmFyIGNvbnRhaW5lckF0dHJzID0gb3B0aW9ucy5fY29udGFpbmVyQXR0cnM7XG5cdCAgdmFyIHJlcGxhY2VyQXR0cnMgPSBvcHRpb25zLl9yZXBsYWNlckF0dHJzO1xuXHQgIHZhciBjb250ZXh0TGlua0ZuLCByZXBsYWNlckxpbmtGbjtcblx0XG5cdCAgLy8gb25seSBuZWVkIHRvIGNvbXBpbGUgb3RoZXIgYXR0cmlidXRlcyBmb3Jcblx0ICAvLyBub24tZnJhZ21lbnQgaW5zdGFuY2VzXG5cdCAgaWYgKGVsLm5vZGVUeXBlICE9PSAxMSkge1xuXHQgICAgLy8gZm9yIGNvbXBvbmVudHMsIGNvbnRhaW5lciBhbmQgcmVwbGFjZXIgbmVlZCB0byBiZVxuXHQgICAgLy8gY29tcGlsZWQgc2VwYXJhdGVseSBhbmQgbGlua2VkIGluIGRpZmZlcmVudCBzY29wZXMuXG5cdCAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQpIHtcblx0ICAgICAgLy8gMi4gY29udGFpbmVyIGF0dHJpYnV0ZXNcblx0ICAgICAgaWYgKGNvbnRhaW5lckF0dHJzICYmIGNvbnRleHRPcHRpb25zKSB7XG5cdCAgICAgICAgY29udGV4dExpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGNvbnRhaW5lckF0dHJzLCBjb250ZXh0T3B0aW9ucyk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHJlcGxhY2VyQXR0cnMpIHtcblx0ICAgICAgICAvLyAzLiByZXBsYWNlciBhdHRyaWJ1dGVzXG5cdCAgICAgICAgcmVwbGFjZXJMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhyZXBsYWNlckF0dHJzLCBvcHRpb25zKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gbm9uLWNvbXBvbmVudCwganVzdCBjb21waWxlIGFzIGEgbm9ybWFsIGVsZW1lbnQuXG5cdCAgICAgIHJlcGxhY2VyTGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoZWwuYXR0cmlidXRlcywgb3B0aW9ucyk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbnRhaW5lckF0dHJzKSB7XG5cdCAgICAvLyB3YXJuIGNvbnRhaW5lciBkaXJlY3RpdmVzIGZvciBmcmFnbWVudCBpbnN0YW5jZXNcblx0ICAgIHZhciBuYW1lcyA9IGNvbnRhaW5lckF0dHJzLmZpbHRlcihmdW5jdGlvbiAoYXR0cikge1xuXHQgICAgICAvLyBhbGxvdyB2dWUtbG9hZGVyL3Z1ZWlmeSBzY29wZWQgY3NzIGF0dHJpYnV0ZXNcblx0ICAgICAgcmV0dXJuIGF0dHIubmFtZS5pbmRleE9mKCdfdi0nKSA8IDAgJiZcblx0ICAgICAgLy8gYWxsb3cgZXZlbnQgbGlzdGVuZXJzXG5cdCAgICAgICFvblJFLnRlc3QoYXR0ci5uYW1lKSAmJlxuXHQgICAgICAvLyBhbGxvdyBzbG90c1xuXHQgICAgICBhdHRyLm5hbWUgIT09ICdzbG90Jztcblx0ICAgIH0pLm1hcChmdW5jdGlvbiAoYXR0cikge1xuXHQgICAgICByZXR1cm4gJ1wiJyArIGF0dHIubmFtZSArICdcIic7XG5cdCAgICB9KTtcblx0ICAgIGlmIChuYW1lcy5sZW5ndGgpIHtcblx0ICAgICAgdmFyIHBsdXJhbCA9IG5hbWVzLmxlbmd0aCA+IDE7XG5cdCAgICAgIHdhcm4oJ0F0dHJpYnV0ZScgKyAocGx1cmFsID8gJ3MgJyA6ICcgJykgKyBuYW1lcy5qb2luKCcsICcpICsgKHBsdXJhbCA/ICcgYXJlJyA6ICcgaXMnKSArICcgaWdub3JlZCBvbiBjb21wb25lbnQgJyArICc8JyArIG9wdGlvbnMuZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICsgJz4gYmVjYXVzZSAnICsgJ3RoZSBjb21wb25lbnQgaXMgYSBmcmFnbWVudCBpbnN0YW5jZTogJyArICdodHRwOi8vdnVlanMub3JnL2d1aWRlL2NvbXBvbmVudHMuaHRtbCNGcmFnbWVudC1JbnN0YW5jZScpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgb3B0aW9ucy5fY29udGFpbmVyQXR0cnMgPSBvcHRpb25zLl9yZXBsYWNlckF0dHJzID0gbnVsbDtcblx0ICByZXR1cm4gZnVuY3Rpb24gcm9vdExpbmtGbih2bSwgZWwsIHNjb3BlKSB7XG5cdCAgICAvLyBsaW5rIGNvbnRleHQgc2NvcGUgZGlyc1xuXHQgICAgdmFyIGNvbnRleHQgPSB2bS5fY29udGV4dDtcblx0ICAgIHZhciBjb250ZXh0RGlycztcblx0ICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHRMaW5rRm4pIHtcblx0ICAgICAgY29udGV4dERpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgY29udGV4dExpbmtGbihjb250ZXh0LCBlbCwgbnVsbCwgc2NvcGUpO1xuXHQgICAgICB9LCBjb250ZXh0KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBsaW5rIHNlbGZcblx0ICAgIHZhciBzZWxmRGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKHJlcGxhY2VyTGlua0ZuKSByZXBsYWNlckxpbmtGbih2bSwgZWwpO1xuXHQgICAgfSwgdm0pO1xuXHRcblx0ICAgIC8vIHJldHVybiB0aGUgdW5saW5rIGZ1bmN0aW9uIHRoYXQgdGVhcnNkb3duIGNvbnRleHRcblx0ICAgIC8vIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuXHQgICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgc2VsZkRpcnMsIGNvbnRleHQsIGNvbnRleHREaXJzKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBhIG5vZGUgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4gYmFzZWQgb24gdGhlXG5cdCAqIG5vZGUgdHlwZS5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZU5vZGUobm9kZSwgb3B0aW9ucykge1xuXHQgIHZhciB0eXBlID0gbm9kZS5ub2RlVHlwZTtcblx0ICBpZiAodHlwZSA9PT0gMSAmJiAhaXNTY3JpcHQobm9kZSkpIHtcblx0ICAgIHJldHVybiBjb21waWxlRWxlbWVudChub2RlLCBvcHRpb25zKTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IDMgJiYgbm9kZS5kYXRhLnRyaW0oKSkge1xuXHQgICAgcmV0dXJuIGNvbXBpbGVUZXh0Tm9kZShub2RlLCBvcHRpb25zKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBhbiBlbGVtZW50IGFuZCByZXR1cm4gYSBub2RlTGlua0ZuLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZUVsZW1lbnQoZWwsIG9wdGlvbnMpIHtcblx0ICAvLyBwcmVwcm9jZXNzIHRleHRhcmVhcy5cblx0ICAvLyB0ZXh0YXJlYSB0cmVhdHMgaXRzIHRleHQgY29udGVudCBhcyB0aGUgaW5pdGlhbCB2YWx1ZS5cblx0ICAvLyBqdXN0IGJpbmQgaXQgYXMgYW4gYXR0ciBkaXJlY3RpdmUgZm9yIHZhbHVlLlxuXHQgIGlmIChlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG5cdCAgICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KGVsLnZhbHVlKTtcblx0ICAgIGlmICh0b2tlbnMpIHtcblx0ICAgICAgZWwuc2V0QXR0cmlidXRlKCc6dmFsdWUnLCB0b2tlbnNUb0V4cCh0b2tlbnMpKTtcblx0ICAgICAgZWwudmFsdWUgPSAnJztcblx0ICAgIH1cblx0ICB9XG5cdCAgdmFyIGxpbmtGbjtcblx0ICB2YXIgaGFzQXR0cnMgPSBlbC5oYXNBdHRyaWJ1dGVzKCk7XG5cdCAgdmFyIGF0dHJzID0gaGFzQXR0cnMgJiYgdG9BcnJheShlbC5hdHRyaWJ1dGVzKTtcblx0ICAvLyBjaGVjayB0ZXJtaW5hbCBkaXJlY3RpdmVzIChmb3IgJiBpZilcblx0ICBpZiAoaGFzQXR0cnMpIHtcblx0ICAgIGxpbmtGbiA9IGNoZWNrVGVybWluYWxEaXJlY3RpdmVzKGVsLCBhdHRycywgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIC8vIGNoZWNrIGVsZW1lbnQgZGlyZWN0aXZlc1xuXHQgIGlmICghbGlua0ZuKSB7XG5cdCAgICBsaW5rRm4gPSBjaGVja0VsZW1lbnREaXJlY3RpdmVzKGVsLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgLy8gY2hlY2sgY29tcG9uZW50XG5cdCAgaWYgKCFsaW5rRm4pIHtcblx0ICAgIGxpbmtGbiA9IGNoZWNrQ29tcG9uZW50KGVsLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgLy8gbm9ybWFsIGRpcmVjdGl2ZXNcblx0ICBpZiAoIWxpbmtGbiAmJiBoYXNBdHRycykge1xuXHQgICAgbGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoYXR0cnMsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICByZXR1cm4gbGlua0ZuO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBhIHRleHROb2RlIGFuZCByZXR1cm4gYSBub2RlTGlua0ZuLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1RleHROb2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9IHRleHROb2RlTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZVRleHROb2RlKG5vZGUsIG9wdGlvbnMpIHtcblx0ICAvLyBza2lwIG1hcmtlZCB0ZXh0IG5vZGVzXG5cdCAgaWYgKG5vZGUuX3NraXApIHtcblx0ICAgIHJldHVybiByZW1vdmVUZXh0O1xuXHQgIH1cblx0XG5cdCAgdmFyIHRva2VucyA9IHBhcnNlVGV4dChub2RlLndob2xlVGV4dCk7XG5cdCAgaWYgKCF0b2tlbnMpIHtcblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0XG5cdCAgLy8gbWFyayBhZGphY2VudCB0ZXh0IG5vZGVzIGFzIHNraXBwZWQsXG5cdCAgLy8gYmVjYXVzZSB3ZSBhcmUgdXNpbmcgbm9kZS53aG9sZVRleHQgdG8gY29tcGlsZVxuXHQgIC8vIGFsbCBhZGphY2VudCB0ZXh0IG5vZGVzIHRvZ2V0aGVyLiBUaGlzIGZpeGVzXG5cdCAgLy8gaXNzdWVzIGluIElFIHdoZXJlIHNvbWV0aW1lcyBpdCBzcGxpdHMgdXAgYSBzaW5nbGVcblx0ICAvLyB0ZXh0IG5vZGUgaW50byBtdWx0aXBsZSBvbmVzLlxuXHQgIHZhciBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcblx0ICB3aGlsZSAobmV4dCAmJiBuZXh0Lm5vZGVUeXBlID09PSAzKSB7XG5cdCAgICBuZXh0Ll9za2lwID0gdHJ1ZTtcblx0ICAgIG5leHQgPSBuZXh0Lm5leHRTaWJsaW5nO1xuXHQgIH1cblx0XG5cdCAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdCAgdmFyIGVsLCB0b2tlbjtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IHRva2Vucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHRva2VuID0gdG9rZW5zW2ldO1xuXHQgICAgZWwgPSB0b2tlbi50YWcgPyBwcm9jZXNzVGV4dFRva2VuKHRva2VuLCBvcHRpb25zKSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRva2VuLnZhbHVlKTtcblx0ICAgIGZyYWcuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH1cblx0ICByZXR1cm4gbWFrZVRleHROb2RlTGlua0ZuKHRva2VucywgZnJhZywgb3B0aW9ucyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBMaW5rZXIgZm9yIGFuIHNraXBwZWQgdGV4dCBub2RlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtUZXh0fSBub2RlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlVGV4dCh2bSwgbm9kZSkge1xuXHQgIHJlbW92ZShub2RlKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByb2Nlc3MgYSBzaW5nbGUgdGV4dCB0b2tlbi5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHRva2VuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge05vZGV9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc1RleHRUb2tlbih0b2tlbiwgb3B0aW9ucykge1xuXHQgIHZhciBlbDtcblx0ICBpZiAodG9rZW4ub25lVGltZSkge1xuXHQgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0b2tlbi52YWx1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGlmICh0b2tlbi5odG1sKSB7XG5cdCAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgndi1odG1sJyk7XG5cdCAgICAgIHNldFRva2VuVHlwZSgnaHRtbCcpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gSUUgd2lsbCBjbGVhbiB1cCBlbXB0eSB0ZXh0Tm9kZXMgZHVyaW5nXG5cdCAgICAgIC8vIGZyYWcuY2xvbmVOb2RlKHRydWUpLCBzbyB3ZSBoYXZlIHRvIGdpdmUgaXRcblx0ICAgICAgLy8gc29tZXRoaW5nIGhlcmUuLi5cblx0ICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnICcpO1xuXHQgICAgICBzZXRUb2tlblR5cGUoJ3RleHQnKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgZnVuY3Rpb24gc2V0VG9rZW5UeXBlKHR5cGUpIHtcblx0ICAgIGlmICh0b2tlbi5kZXNjcmlwdG9yKSByZXR1cm47XG5cdCAgICB2YXIgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodG9rZW4udmFsdWUpO1xuXHQgICAgdG9rZW4uZGVzY3JpcHRvciA9IHtcblx0ICAgICAgbmFtZTogdHlwZSxcblx0ICAgICAgZGVmOiBkaXJlY3RpdmVzW3R5cGVdLFxuXHQgICAgICBleHByZXNzaW9uOiBwYXJzZWQuZXhwcmVzc2lvbixcblx0ICAgICAgZmlsdGVyczogcGFyc2VkLmZpbHRlcnNcblx0ICAgIH07XG5cdCAgfVxuXHQgIHJldHVybiBlbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEJ1aWxkIGEgZnVuY3Rpb24gdGhhdCBwcm9jZXNzZXMgYSB0ZXh0Tm9kZS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheTxPYmplY3Q+fSB0b2tlbnNcblx0ICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVRleHROb2RlTGlua0ZuKHRva2VucywgZnJhZykge1xuXHQgIHJldHVybiBmdW5jdGlvbiB0ZXh0Tm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlKSB7XG5cdCAgICB2YXIgZnJhZ0Nsb25lID0gZnJhZy5jbG9uZU5vZGUodHJ1ZSk7XG5cdCAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkoZnJhZ0Nsb25lLmNoaWxkTm9kZXMpO1xuXHQgICAgdmFyIHRva2VuLCB2YWx1ZSwgbm9kZTtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB0b2tlbiA9IHRva2Vuc1tpXTtcblx0ICAgICAgdmFsdWUgPSB0b2tlbi52YWx1ZTtcblx0ICAgICAgaWYgKHRva2VuLnRhZykge1xuXHQgICAgICAgIG5vZGUgPSBjaGlsZE5vZGVzW2ldO1xuXHQgICAgICAgIGlmICh0b2tlbi5vbmVUaW1lKSB7XG5cdCAgICAgICAgICB2YWx1ZSA9IChzY29wZSB8fCB2bSkuJGV2YWwodmFsdWUpO1xuXHQgICAgICAgICAgaWYgKHRva2VuLmh0bWwpIHtcblx0ICAgICAgICAgICAgcmVwbGFjZShub2RlLCBwYXJzZVRlbXBsYXRlKHZhbHVlLCB0cnVlKSk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBub2RlLmRhdGEgPSBfdG9TdHJpbmcodmFsdWUpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB2bS5fYmluZERpcih0b2tlbi5kZXNjcmlwdG9yLCBub2RlLCBob3N0LCBzY29wZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXBsYWNlKGVsLCBmcmFnQ2xvbmUpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGEgbm9kZSBsaXN0IGFuZCByZXR1cm4gYSBjaGlsZExpbmtGbi5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlTGlzdH0gbm9kZUxpc3Rcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVOb2RlTGlzdChub2RlTGlzdCwgb3B0aW9ucykge1xuXHQgIHZhciBsaW5rRm5zID0gW107XG5cdCAgdmFyIG5vZGVMaW5rRm4sIGNoaWxkTGlua0ZuLCBub2RlO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZUxpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBub2RlID0gbm9kZUxpc3RbaV07XG5cdCAgICBub2RlTGlua0ZuID0gY29tcGlsZU5vZGUobm9kZSwgb3B0aW9ucyk7XG5cdCAgICBjaGlsZExpbmtGbiA9ICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJiBub2RlLnRhZ05hbWUgIT09ICdTQ1JJUFQnICYmIG5vZGUuaGFzQ2hpbGROb2RlcygpID8gY29tcGlsZU5vZGVMaXN0KG5vZGUuY2hpbGROb2Rlcywgb3B0aW9ucykgOiBudWxsO1xuXHQgICAgbGlua0Zucy5wdXNoKG5vZGVMaW5rRm4sIGNoaWxkTGlua0ZuKTtcblx0ICB9XG5cdCAgcmV0dXJuIGxpbmtGbnMubGVuZ3RoID8gbWFrZUNoaWxkTGlua0ZuKGxpbmtGbnMpIDogbnVsbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIE1ha2UgYSBjaGlsZCBsaW5rIGZ1bmN0aW9uIGZvciBhIG5vZGUncyBjaGlsZE5vZGVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5PEZ1bmN0aW9uPn0gbGlua0Zuc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gY2hpbGRMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlQ2hpbGRMaW5rRm4obGlua0Zucykge1xuXHQgIHJldHVybiBmdW5jdGlvbiBjaGlsZExpbmtGbih2bSwgbm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICB2YXIgbm9kZSwgbm9kZUxpbmtGbiwgY2hpbGRyZW5MaW5rRm47XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbiA9IDAsIGwgPSBsaW5rRm5zLmxlbmd0aDsgaSA8IGw7IG4rKykge1xuXHQgICAgICBub2RlID0gbm9kZXNbbl07XG5cdCAgICAgIG5vZGVMaW5rRm4gPSBsaW5rRm5zW2krK107XG5cdCAgICAgIGNoaWxkcmVuTGlua0ZuID0gbGlua0Zuc1tpKytdO1xuXHQgICAgICAvLyBjYWNoZSBjaGlsZE5vZGVzIGJlZm9yZSBsaW5raW5nIHBhcmVudCwgZml4ICM2NTdcblx0ICAgICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KG5vZGUuY2hpbGROb2Rlcyk7XG5cdCAgICAgIGlmIChub2RlTGlua0ZuKSB7XG5cdCAgICAgICAgbm9kZUxpbmtGbih2bSwgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChjaGlsZHJlbkxpbmtGbikge1xuXHQgICAgICAgIGNoaWxkcmVuTGlua0ZuKHZtLCBjaGlsZE5vZGVzLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgZm9yIGVsZW1lbnQgZGlyZWN0aXZlcyAoY3VzdG9tIGVsZW1lbnRzIHRoYXQgc2hvdWxkXG5cdCAqIGJlIHJlc292bGVkIGFzIHRlcm1pbmFsIGRpcmVjdGl2ZXMpLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2hlY2tFbGVtZW50RGlyZWN0aXZlcyhlbCwgb3B0aW9ucykge1xuXHQgIHZhciB0YWcgPSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdCAgaWYgKGNvbW1vblRhZ1JFLnRlc3QodGFnKSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgZGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdlbGVtZW50RGlyZWN0aXZlcycsIHRhZyk7XG5cdCAgaWYgKGRlZikge1xuXHQgICAgcmV0dXJuIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIHRhZywgJycsIG9wdGlvbnMsIGRlZik7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIGNvbXBvbmVudC4gSWYgeWVzLCByZXR1cm5cblx0ICogYSBjb21wb25lbnQgbGluayBmdW5jdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2hlY2tDb21wb25lbnQoZWwsIG9wdGlvbnMpIHtcblx0ICB2YXIgY29tcG9uZW50ID0gY2hlY2tDb21wb25lbnRBdHRyKGVsLCBvcHRpb25zKTtcblx0ICBpZiAoY29tcG9uZW50KSB7XG5cdCAgICB2YXIgcmVmID0gZmluZFJlZihlbCk7XG5cdCAgICB2YXIgZGVzY3JpcHRvciA9IHtcblx0ICAgICAgbmFtZTogJ2NvbXBvbmVudCcsXG5cdCAgICAgIHJlZjogcmVmLFxuXHQgICAgICBleHByZXNzaW9uOiBjb21wb25lbnQuaWQsXG5cdCAgICAgIGRlZjogaW50ZXJuYWxEaXJlY3RpdmVzLmNvbXBvbmVudCxcblx0ICAgICAgbW9kaWZpZXJzOiB7XG5cdCAgICAgICAgbGl0ZXJhbDogIWNvbXBvbmVudC5keW5hbWljXG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICB2YXIgY29tcG9uZW50TGlua0ZuID0gZnVuY3Rpb24gY29tcG9uZW50TGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgICAgaWYgKHJlZikge1xuXHQgICAgICAgIGRlZmluZVJlYWN0aXZlKChzY29wZSB8fCB2bSkuJHJlZnMsIHJlZiwgbnVsbCk7XG5cdCAgICAgIH1cblx0ICAgICAgdm0uX2JpbmREaXIoZGVzY3JpcHRvciwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgIH07XG5cdCAgICBjb21wb25lbnRMaW5rRm4udGVybWluYWwgPSB0cnVlO1xuXHQgICAgcmV0dXJuIGNvbXBvbmVudExpbmtGbjtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBhbiBlbGVtZW50IGZvciB0ZXJtaW5hbCBkaXJlY3RpdmVzIGluIGZpeGVkIG9yZGVyLlxuXHQgKiBJZiBpdCBmaW5kcyBvbmUsIHJldHVybiBhIHRlcm1pbmFsIGxpbmsgZnVuY3Rpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtBcnJheX0gYXR0cnNcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb259IHRlcm1pbmFsTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2hlY2tUZXJtaW5hbERpcmVjdGl2ZXMoZWwsIGF0dHJzLCBvcHRpb25zKSB7XG5cdCAgLy8gc2tpcCB2LXByZVxuXHQgIGlmIChnZXRBdHRyKGVsLCAndi1wcmUnKSAhPT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIHNraXA7XG5cdCAgfVxuXHQgIC8vIHNraXAgdi1lbHNlIGJsb2NrLCBidXQgb25seSBpZiBmb2xsb3dpbmcgdi1pZlxuXHQgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3YtZWxzZScpKSB7XG5cdCAgICB2YXIgcHJldiA9IGVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG5cdCAgICBpZiAocHJldiAmJiBwcmV2Lmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG5cdCAgICAgIHJldHVybiBza2lwO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIGF0dHIsIG5hbWUsIHZhbHVlLCBtb2RpZmllcnMsIG1hdGNoZWQsIGRpck5hbWUsIHJhd05hbWUsIGFyZywgZGVmLCB0ZXJtRGVmO1xuXHQgIGZvciAodmFyIGkgPSAwLCBqID0gYXR0cnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdCAgICBhdHRyID0gYXR0cnNbaV07XG5cdCAgICBuYW1lID0gYXR0ci5uYW1lLnJlcGxhY2UobW9kaWZpZXJSRSwgJycpO1xuXHQgICAgaWYgKG1hdGNoZWQgPSBuYW1lLm1hdGNoKGRpckF0dHJSRSkpIHtcblx0ICAgICAgZGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdkaXJlY3RpdmVzJywgbWF0Y2hlZFsxXSk7XG5cdCAgICAgIGlmIChkZWYgJiYgZGVmLnRlcm1pbmFsKSB7XG5cdCAgICAgICAgaWYgKCF0ZXJtRGVmIHx8IChkZWYucHJpb3JpdHkgfHwgREVGQVVMVF9URVJNSU5BTF9QUklPUklUWSkgPiB0ZXJtRGVmLnByaW9yaXR5KSB7XG5cdCAgICAgICAgICB0ZXJtRGVmID0gZGVmO1xuXHQgICAgICAgICAgcmF3TmFtZSA9IGF0dHIubmFtZTtcblx0ICAgICAgICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKGF0dHIubmFtZSk7XG5cdCAgICAgICAgICB2YWx1ZSA9IGF0dHIudmFsdWU7XG5cdCAgICAgICAgICBkaXJOYW1lID0gbWF0Y2hlZFsxXTtcblx0ICAgICAgICAgIGFyZyA9IG1hdGNoZWRbMl07XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpZiAodGVybURlZikge1xuXHQgICAgcmV0dXJuIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIGRpck5hbWUsIHZhbHVlLCBvcHRpb25zLCB0ZXJtRGVmLCByYXdOYW1lLCBhcmcsIG1vZGlmaWVycyk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBza2lwKCkge31cblx0c2tpcC50ZXJtaW5hbCA9IHRydWU7XG5cdFxuXHQvKipcblx0ICogQnVpbGQgYSBub2RlIGxpbmsgZnVuY3Rpb24gZm9yIGEgdGVybWluYWwgZGlyZWN0aXZlLlxuXHQgKiBBIHRlcm1pbmFsIGxpbmsgZnVuY3Rpb24gdGVybWluYXRlcyB0aGUgY3VycmVudFxuXHQgKiBjb21waWxhdGlvbiByZWN1cnNpb24gYW5kIGhhbmRsZXMgY29tcGlsYXRpb24gb2YgdGhlXG5cdCAqIHN1YnRyZWUgaW4gdGhlIGRpcmVjdGl2ZS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZGlyTmFtZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHBhcmFtIHtPYmplY3R9IGRlZlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW3Jhd05hbWVdXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbYXJnXVxuXHQgKiBAcGFyYW0ge09iamVjdH0gW21vZGlmaWVyc11cblx0ICogQHJldHVybiB7RnVuY3Rpb259IHRlcm1pbmFsTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgZGlyTmFtZSwgdmFsdWUsIG9wdGlvbnMsIGRlZiwgcmF3TmFtZSwgYXJnLCBtb2RpZmllcnMpIHtcblx0ICB2YXIgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuXHQgIHZhciBkZXNjcmlwdG9yID0ge1xuXHQgICAgbmFtZTogZGlyTmFtZSxcblx0ICAgIGFyZzogYXJnLFxuXHQgICAgZXhwcmVzc2lvbjogcGFyc2VkLmV4cHJlc3Npb24sXG5cdCAgICBmaWx0ZXJzOiBwYXJzZWQuZmlsdGVycyxcblx0ICAgIHJhdzogdmFsdWUsXG5cdCAgICBhdHRyOiByYXdOYW1lLFxuXHQgICAgbW9kaWZpZXJzOiBtb2RpZmllcnMsXG5cdCAgICBkZWY6IGRlZlxuXHQgIH07XG5cdCAgLy8gY2hlY2sgcmVmIGZvciB2LWZvciBhbmQgcm91dGVyLXZpZXdcblx0ICBpZiAoZGlyTmFtZSA9PT0gJ2ZvcicgfHwgZGlyTmFtZSA9PT0gJ3JvdXRlci12aWV3Jykge1xuXHQgICAgZGVzY3JpcHRvci5yZWYgPSBmaW5kUmVmKGVsKTtcblx0ICB9XG5cdCAgdmFyIGZuID0gZnVuY3Rpb24gdGVybWluYWxOb2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIGlmIChkZXNjcmlwdG9yLnJlZikge1xuXHQgICAgICBkZWZpbmVSZWFjdGl2ZSgoc2NvcGUgfHwgdm0pLiRyZWZzLCBkZXNjcmlwdG9yLnJlZiwgbnVsbCk7XG5cdCAgICB9XG5cdCAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgIH07XG5cdCAgZm4udGVybWluYWwgPSB0cnVlO1xuXHQgIHJldHVybiBmbjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgdGhlIGRpcmVjdGl2ZXMgb24gYW4gZWxlbWVudCBhbmQgcmV0dXJuIGEgbGlua2VyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fE5hbWVkTm9kZU1hcH0gYXR0cnNcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZURpcmVjdGl2ZXMoYXR0cnMsIG9wdGlvbnMpIHtcblx0ICB2YXIgaSA9IGF0dHJzLmxlbmd0aDtcblx0ICB2YXIgZGlycyA9IFtdO1xuXHQgIHZhciBhdHRyLCBuYW1lLCB2YWx1ZSwgcmF3TmFtZSwgcmF3VmFsdWUsIGRpck5hbWUsIGFyZywgbW9kaWZpZXJzLCBkaXJEZWYsIHRva2VucywgbWF0Y2hlZDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBhdHRyID0gYXR0cnNbaV07XG5cdCAgICBuYW1lID0gcmF3TmFtZSA9IGF0dHIubmFtZTtcblx0ICAgIHZhbHVlID0gcmF3VmFsdWUgPSBhdHRyLnZhbHVlO1xuXHQgICAgdG9rZW5zID0gcGFyc2VUZXh0KHZhbHVlKTtcblx0ICAgIC8vIHJlc2V0IGFyZ1xuXHQgICAgYXJnID0gbnVsbDtcblx0ICAgIC8vIGNoZWNrIG1vZGlmaWVyc1xuXHQgICAgbW9kaWZpZXJzID0gcGFyc2VNb2RpZmllcnMobmFtZSk7XG5cdCAgICBuYW1lID0gbmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKTtcblx0XG5cdCAgICAvLyBhdHRyaWJ1dGUgaW50ZXJwb2xhdGlvbnNcblx0ICAgIGlmICh0b2tlbnMpIHtcblx0ICAgICAgdmFsdWUgPSB0b2tlbnNUb0V4cCh0b2tlbnMpO1xuXHQgICAgICBhcmcgPSBuYW1lO1xuXHQgICAgICBwdXNoRGlyKCdiaW5kJywgZGlyZWN0aXZlcy5iaW5kLCB0b2tlbnMpO1xuXHQgICAgICAvLyB3YXJuIGFnYWluc3QgbWl4aW5nIG11c3RhY2hlcyB3aXRoIHYtYmluZFxuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIGlmIChuYW1lID09PSAnY2xhc3MnICYmIEFycmF5LnByb3RvdHlwZS5zb21lLmNhbGwoYXR0cnMsIGZ1bmN0aW9uIChhdHRyKSB7XG5cdCAgICAgICAgICByZXR1cm4gYXR0ci5uYW1lID09PSAnOmNsYXNzJyB8fCBhdHRyLm5hbWUgPT09ICd2LWJpbmQ6Y2xhc3MnO1xuXHQgICAgICAgIH0pKSB7XG5cdCAgICAgICAgICB3YXJuKCdjbGFzcz1cIicgKyByYXdWYWx1ZSArICdcIjogRG8gbm90IG1peCBtdXN0YWNoZSBpbnRlcnBvbGF0aW9uICcgKyAnYW5kIHYtYmluZCBmb3IgXCJjbGFzc1wiIG9uIHRoZSBzYW1lIGVsZW1lbnQuIFVzZSBvbmUgb3IgdGhlIG90aGVyLicsIG9wdGlvbnMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlXG5cdFxuXHQgICAgICAvLyBzcGVjaWFsIGF0dHJpYnV0ZTogdHJhbnNpdGlvblxuXHQgICAgICBpZiAodHJhbnNpdGlvblJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICBtb2RpZmllcnMubGl0ZXJhbCA9ICFiaW5kUkUudGVzdChuYW1lKTtcblx0ICAgICAgICBwdXNoRGlyKCd0cmFuc2l0aW9uJywgaW50ZXJuYWxEaXJlY3RpdmVzLnRyYW5zaXRpb24pO1xuXHQgICAgICB9IGVsc2Vcblx0XG5cdCAgICAgICAgLy8gZXZlbnQgaGFuZGxlcnNcblx0ICAgICAgICBpZiAob25SRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgICBhcmcgPSBuYW1lLnJlcGxhY2Uob25SRSwgJycpO1xuXHQgICAgICAgICAgcHVzaERpcignb24nLCBkaXJlY3RpdmVzLm9uKTtcblx0ICAgICAgICB9IGVsc2Vcblx0XG5cdCAgICAgICAgICAvLyBhdHRyaWJ1dGUgYmluZGluZ3Ncblx0ICAgICAgICAgIGlmIChiaW5kUkUudGVzdChuYW1lKSkge1xuXHQgICAgICAgICAgICBkaXJOYW1lID0gbmFtZS5yZXBsYWNlKGJpbmRSRSwgJycpO1xuXHQgICAgICAgICAgICBpZiAoZGlyTmFtZSA9PT0gJ3N0eWxlJyB8fCBkaXJOYW1lID09PSAnY2xhc3MnKSB7XG5cdCAgICAgICAgICAgICAgcHVzaERpcihkaXJOYW1lLCBpbnRlcm5hbERpcmVjdGl2ZXNbZGlyTmFtZV0pO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIGFyZyA9IGRpck5hbWU7XG5cdCAgICAgICAgICAgICAgcHVzaERpcignYmluZCcsIGRpcmVjdGl2ZXMuYmluZCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0gZWxzZVxuXHRcblx0ICAgICAgICAgICAgLy8gbm9ybWFsIGRpcmVjdGl2ZXNcblx0ICAgICAgICAgICAgaWYgKG1hdGNoZWQgPSBuYW1lLm1hdGNoKGRpckF0dHJSRSkpIHtcblx0ICAgICAgICAgICAgICBkaXJOYW1lID0gbWF0Y2hlZFsxXTtcblx0ICAgICAgICAgICAgICBhcmcgPSBtYXRjaGVkWzJdO1xuXHRcblx0ICAgICAgICAgICAgICAvLyBza2lwIHYtZWxzZSAod2hlbiB1c2VkIHdpdGggdi1zaG93KVxuXHQgICAgICAgICAgICAgIGlmIChkaXJOYW1lID09PSAnZWxzZScpIHtcblx0ICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgZGlyRGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdkaXJlY3RpdmVzJywgZGlyTmFtZSwgdHJ1ZSk7XG5cdCAgICAgICAgICAgICAgaWYgKGRpckRlZikge1xuXHQgICAgICAgICAgICAgICAgcHVzaERpcihkaXJOYW1lLCBkaXJEZWYpO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUHVzaCBhIGRpcmVjdGl2ZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBkaXJOYW1lXG5cdCAgICogQHBhcmFtIHtPYmplY3R8RnVuY3Rpb259IGRlZlxuXHQgICAqIEBwYXJhbSB7QXJyYXl9IFtpbnRlcnBUb2tlbnNdXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHB1c2hEaXIoZGlyTmFtZSwgZGVmLCBpbnRlcnBUb2tlbnMpIHtcblx0ICAgIHZhciBoYXNPbmVUaW1lVG9rZW4gPSBpbnRlcnBUb2tlbnMgJiYgaGFzT25lVGltZShpbnRlcnBUb2tlbnMpO1xuXHQgICAgdmFyIHBhcnNlZCA9ICFoYXNPbmVUaW1lVG9rZW4gJiYgcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuXHQgICAgZGlycy5wdXNoKHtcblx0ICAgICAgbmFtZTogZGlyTmFtZSxcblx0ICAgICAgYXR0cjogcmF3TmFtZSxcblx0ICAgICAgcmF3OiByYXdWYWx1ZSxcblx0ICAgICAgZGVmOiBkZWYsXG5cdCAgICAgIGFyZzogYXJnLFxuXHQgICAgICBtb2RpZmllcnM6IG1vZGlmaWVycyxcblx0ICAgICAgLy8gY29udmVyc2lvbiBmcm9tIGludGVycG9sYXRpb24gc3RyaW5ncyB3aXRoIG9uZS10aW1lIHRva2VuXG5cdCAgICAgIC8vIHRvIGV4cHJlc3Npb24gaXMgZGlmZmVyZWQgdW50aWwgZGlyZWN0aXZlIGJpbmQgdGltZSBzbyB0aGF0IHdlXG5cdCAgICAgIC8vIGhhdmUgYWNjZXNzIHRvIHRoZSBhY3R1YWwgdm0gY29udGV4dCBmb3Igb25lLXRpbWUgYmluZGluZ3MuXG5cdCAgICAgIGV4cHJlc3Npb246IHBhcnNlZCAmJiBwYXJzZWQuZXhwcmVzc2lvbixcblx0ICAgICAgZmlsdGVyczogcGFyc2VkICYmIHBhcnNlZC5maWx0ZXJzLFxuXHQgICAgICBpbnRlcnA6IGludGVycFRva2Vucyxcblx0ICAgICAgaGFzT25lVGltZTogaGFzT25lVGltZVRva2VuXG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIGlmIChkaXJzLmxlbmd0aCkge1xuXHQgICAgcmV0dXJuIG1ha2VOb2RlTGlua0ZuKGRpcnMpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhcnNlIG1vZGlmaWVycyBmcm9tIGRpcmVjdGl2ZSBhdHRyaWJ1dGUgbmFtZS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlTW9kaWZpZXJzKG5hbWUpIHtcblx0ICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB2YXIgbWF0Y2ggPSBuYW1lLm1hdGNoKG1vZGlmaWVyUkUpO1xuXHQgIGlmIChtYXRjaCkge1xuXHQgICAgdmFyIGkgPSBtYXRjaC5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHJlc1ttYXRjaFtpXS5zbGljZSgxKV0gPSB0cnVlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQnVpbGQgYSBsaW5rIGZ1bmN0aW9uIGZvciBhbGwgZGlyZWN0aXZlcyBvbiBhIHNpbmdsZSBub2RlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBkaXJlY3RpdmVzXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSBkaXJlY3RpdmVzTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZU5vZGVMaW5rRm4oZGlyZWN0aXZlcykge1xuXHQgIHJldHVybiBmdW5jdGlvbiBub2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIC8vIHJldmVyc2UgYXBwbHkgYmVjYXVzZSBpdCdzIHNvcnRlZCBsb3cgdG8gaGlnaFxuXHQgICAgdmFyIGkgPSBkaXJlY3RpdmVzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdm0uX2JpbmREaXIoZGlyZWN0aXZlc1tpXSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gaW50ZXJwb2xhdGlvbiBzdHJpbmcgY29udGFpbnMgb25lLXRpbWUgdG9rZW5zLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSB0b2tlbnNcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBoYXNPbmVUaW1lKHRva2Vucykge1xuXHQgIHZhciBpID0gdG9rZW5zLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBpZiAodG9rZW5zW2ldLm9uZVRpbWUpIHJldHVybiB0cnVlO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNTY3JpcHQoZWwpIHtcblx0ICByZXR1cm4gZWwudGFnTmFtZSA9PT0gJ1NDUklQVCcgJiYgKCFlbC5oYXNBdHRyaWJ1dGUoJ3R5cGUnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PT0gJ3RleHQvamF2YXNjcmlwdCcpO1xuXHR9XG5cdFxuXHR2YXIgc3BlY2lhbENoYXJSRSA9IC9bXlxcd1xcLTpcXC5dLztcblx0XG5cdC8qKlxuXHQgKiBQcm9jZXNzIGFuIGVsZW1lbnQgb3IgYSBEb2N1bWVudEZyYWdtZW50IGJhc2VkIG9uIGFcblx0ICogaW5zdGFuY2Ugb3B0aW9uIG9iamVjdC4gVGhpcyBhbGxvd3MgdXMgdG8gdHJhbnNjbHVkZVxuXHQgKiBhIHRlbXBsYXRlIG5vZGUvZnJhZ21lbnQgYmVmb3JlIHRoZSBpbnN0YW5jZSBpcyBjcmVhdGVkLFxuXHQgKiBzbyB0aGUgcHJvY2Vzc2VkIGZyYWdtZW50IGNhbiB0aGVuIGJlIGNsb25lZCBhbmQgcmV1c2VkXG5cdCAqIGluIHYtZm9yLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0cmFuc2NsdWRlKGVsLCBvcHRpb25zKSB7XG5cdCAgLy8gZXh0cmFjdCBjb250YWluZXIgYXR0cmlidXRlcyB0byBwYXNzIHRoZW0gZG93blxuXHQgIC8vIHRvIGNvbXBpbGVyLCBiZWNhdXNlIHRoZXkgbmVlZCB0byBiZSBjb21waWxlZCBpblxuXHQgIC8vIHBhcmVudCBzY29wZS4gd2UgYXJlIG11dGF0aW5nIHRoZSBvcHRpb25zIG9iamVjdCBoZXJlXG5cdCAgLy8gYXNzdW1pbmcgdGhlIHNhbWUgb2JqZWN0IHdpbGwgYmUgdXNlZCBmb3IgY29tcGlsZVxuXHQgIC8vIHJpZ2h0IGFmdGVyIHRoaXMuXG5cdCAgaWYgKG9wdGlvbnMpIHtcblx0ICAgIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gZXh0cmFjdEF0dHJzKGVsKTtcblx0ICB9XG5cdCAgLy8gZm9yIHRlbXBsYXRlIHRhZ3MsIHdoYXQgd2Ugd2FudCBpcyBpdHMgY29udGVudCBhc1xuXHQgIC8vIGEgZG9jdW1lbnRGcmFnbWVudCAoZm9yIGZyYWdtZW50IGluc3RhbmNlcylcblx0ICBpZiAoaXNUZW1wbGF0ZShlbCkpIHtcblx0ICAgIGVsID0gcGFyc2VUZW1wbGF0ZShlbCk7XG5cdCAgfVxuXHQgIGlmIChvcHRpb25zKSB7XG5cdCAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQgJiYgIW9wdGlvbnMudGVtcGxhdGUpIHtcblx0ICAgICAgb3B0aW9ucy50ZW1wbGF0ZSA9ICc8c2xvdD48L3Nsb3Q+Jztcblx0ICAgIH1cblx0ICAgIGlmIChvcHRpb25zLnRlbXBsYXRlKSB7XG5cdCAgICAgIG9wdGlvbnMuX2NvbnRlbnQgPSBleHRyYWN0Q29udGVudChlbCk7XG5cdCAgICAgIGVsID0gdHJhbnNjbHVkZVRlbXBsYXRlKGVsLCBvcHRpb25zKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKGlzRnJhZ21lbnQoZWwpKSB7XG5cdCAgICAvLyBhbmNob3JzIGZvciBmcmFnbWVudCBpbnN0YW5jZVxuXHQgICAgLy8gcGFzc2luZyBpbiBgcGVyc2lzdDogdHJ1ZWAgdG8gYXZvaWQgdGhlbSBiZWluZ1xuXHQgICAgLy8gZGlzY2FyZGVkIGJ5IElFIGR1cmluZyB0ZW1wbGF0ZSBjbG9uaW5nXG5cdCAgICBwcmVwZW5kKGNyZWF0ZUFuY2hvcigndi1zdGFydCcsIHRydWUpLCBlbCk7XG5cdCAgICBlbC5hcHBlbmRDaGlsZChjcmVhdGVBbmNob3IoJ3YtZW5kJywgdHJ1ZSkpO1xuXHQgIH1cblx0ICByZXR1cm4gZWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcm9jZXNzIHRoZSB0ZW1wbGF0ZSBvcHRpb24uXG5cdCAqIElmIHRoZSByZXBsYWNlIG9wdGlvbiBpcyB0cnVlIHRoaXMgd2lsbCBzd2FwIHRoZSAkZWwuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRyYW5zY2x1ZGVUZW1wbGF0ZShlbCwgb3B0aW9ucykge1xuXHQgIHZhciB0ZW1wbGF0ZSA9IG9wdGlvbnMudGVtcGxhdGU7XG5cdCAgdmFyIGZyYWcgPSBwYXJzZVRlbXBsYXRlKHRlbXBsYXRlLCB0cnVlKTtcblx0ICBpZiAoZnJhZykge1xuXHQgICAgdmFyIHJlcGxhY2VyID0gZnJhZy5maXJzdENoaWxkO1xuXHQgICAgdmFyIHRhZyA9IHJlcGxhY2VyLnRhZ05hbWUgJiYgcmVwbGFjZXIudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHQgICAgaWYgKG9wdGlvbnMucmVwbGFjZSkge1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKGVsID09PSBkb2N1bWVudC5ib2R5KSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdZb3UgYXJlIG1vdW50aW5nIGFuIGluc3RhbmNlIHdpdGggYSB0ZW1wbGF0ZSB0byAnICsgJzxib2R5Pi4gVGhpcyB3aWxsIHJlcGxhY2UgPGJvZHk+IGVudGlyZWx5LiBZb3UgJyArICdzaG91bGQgcHJvYmFibHkgdXNlIGByZXBsYWNlOiBmYWxzZWAgaGVyZS4nKTtcblx0ICAgICAgfVxuXHQgICAgICAvLyB0aGVyZSBhcmUgbWFueSBjYXNlcyB3aGVyZSB0aGUgaW5zdGFuY2UgbXVzdFxuXHQgICAgICAvLyBiZWNvbWUgYSBmcmFnbWVudCBpbnN0YW5jZTogYmFzaWNhbGx5IGFueXRoaW5nIHRoYXRcblx0ICAgICAgLy8gY2FuIGNyZWF0ZSBtb3JlIHRoYW4gMSByb290IG5vZGVzLlxuXHQgICAgICBpZiAoXG5cdCAgICAgIC8vIG11bHRpLWNoaWxkcmVuIHRlbXBsYXRlXG5cdCAgICAgIGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPiAxIHx8XG5cdCAgICAgIC8vIG5vbi1lbGVtZW50IHRlbXBsYXRlXG5cdCAgICAgIHJlcGxhY2VyLm5vZGVUeXBlICE9PSAxIHx8XG5cdCAgICAgIC8vIHNpbmdsZSBuZXN0ZWQgY29tcG9uZW50XG5cdCAgICAgIHRhZyA9PT0gJ2NvbXBvbmVudCcgfHwgcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgdGFnKSB8fCBoYXNCaW5kQXR0cihyZXBsYWNlciwgJ2lzJykgfHxcblx0ICAgICAgLy8gZWxlbWVudCBkaXJlY3RpdmVcblx0ICAgICAgcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdlbGVtZW50RGlyZWN0aXZlcycsIHRhZykgfHxcblx0ICAgICAgLy8gZm9yIGJsb2NrXG5cdCAgICAgIHJlcGxhY2VyLmhhc0F0dHJpYnV0ZSgndi1mb3InKSB8fFxuXHQgICAgICAvLyBpZiBibG9ja1xuXHQgICAgICByZXBsYWNlci5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuXHQgICAgICAgIHJldHVybiBmcmFnO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIG9wdGlvbnMuX3JlcGxhY2VyQXR0cnMgPSBleHRyYWN0QXR0cnMocmVwbGFjZXIpO1xuXHQgICAgICAgIG1lcmdlQXR0cnMoZWwsIHJlcGxhY2VyKTtcblx0ICAgICAgICByZXR1cm4gcmVwbGFjZXI7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVsLmFwcGVuZENoaWxkKGZyYWcpO1xuXHQgICAgICByZXR1cm4gZWw7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCB0ZW1wbGF0ZSBvcHRpb246ICcgKyB0ZW1wbGF0ZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogSGVscGVyIHRvIGV4dHJhY3QgYSBjb21wb25lbnQgY29udGFpbmVyJ3MgYXR0cmlidXRlc1xuXHQgKiBpbnRvIGEgcGxhaW4gb2JqZWN0IGFycmF5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEByZXR1cm4ge0FycmF5fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGV4dHJhY3RBdHRycyhlbCkge1xuXHQgIGlmIChlbC5ub2RlVHlwZSA9PT0gMSAmJiBlbC5oYXNBdHRyaWJ1dGVzKCkpIHtcblx0ICAgIHJldHVybiB0b0FycmF5KGVsLmF0dHJpYnV0ZXMpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIE1lcmdlIHRoZSBhdHRyaWJ1dGVzIG9mIHR3byBlbGVtZW50cywgYW5kIG1ha2Ugc3VyZVxuXHQgKiB0aGUgY2xhc3MgbmFtZXMgYXJlIG1lcmdlZCBwcm9wZXJseS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBmcm9tXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdG9cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtZXJnZUF0dHJzKGZyb20sIHRvKSB7XG5cdCAgdmFyIGF0dHJzID0gZnJvbS5hdHRyaWJ1dGVzO1xuXHQgIHZhciBpID0gYXR0cnMubGVuZ3RoO1xuXHQgIHZhciBuYW1lLCB2YWx1ZTtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBuYW1lID0gYXR0cnNbaV0ubmFtZTtcblx0ICAgIHZhbHVlID0gYXR0cnNbaV0udmFsdWU7XG5cdCAgICBpZiAoIXRvLmhhc0F0dHJpYnV0ZShuYW1lKSAmJiAhc3BlY2lhbENoYXJSRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgIHRvLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG5cdCAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgIXBhcnNlVGV4dCh2YWx1ZSkgJiYgKHZhbHVlID0gdmFsdWUudHJpbSgpKSkge1xuXHQgICAgICB2YWx1ZS5zcGxpdCgvXFxzKy8pLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuXHQgICAgICAgIGFkZENsYXNzKHRvLCBjbHMpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTY2FuIGFuZCBkZXRlcm1pbmUgc2xvdCBjb250ZW50IGRpc3RyaWJ1dGlvbi5cblx0ICogV2UgZG8gdGhpcyBkdXJpbmcgdHJhbnNjbHVzaW9uIGluc3RlYWQgYXQgY29tcGlsZSB0aW1lIHNvIHRoYXRcblx0ICogdGhlIGRpc3RyaWJ1dGlvbiBpcyBkZWNvdXBsZWQgZnJvbSB0aGUgY29tcGlsYXRpb24gb3JkZXIgb2Zcblx0ICogdGhlIHNsb3RzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gdGVtcGxhdGVcblx0ICogQHBhcmFtIHtFbGVtZW50fSBjb250ZW50XG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVTbG90cyh2bSwgY29udGVudCkge1xuXHQgIGlmICghY29udGVudCkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgY29udGVudHMgPSB2bS5fc2xvdENvbnRlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB2YXIgZWwsIG5hbWU7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb250ZW50LmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgZWwgPSBjb250ZW50LmNoaWxkcmVuW2ldO1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIGlmIChuYW1lID0gZWwuZ2V0QXR0cmlidXRlKCdzbG90JykpIHtcblx0ICAgICAgKGNvbnRlbnRzW25hbWVdIHx8IChjb250ZW50c1tuYW1lXSA9IFtdKSkucHVzaChlbCk7XG5cdCAgICB9XG5cdCAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBnZXRCaW5kQXR0cihlbCwgJ3Nsb3QnKSkge1xuXHQgICAgICB3YXJuKCdUaGUgXCJzbG90XCIgYXR0cmlidXRlIG11c3QgYmUgc3RhdGljLicsIHZtLiRwYXJlbnQpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmb3IgKG5hbWUgaW4gY29udGVudHMpIHtcblx0ICAgIGNvbnRlbnRzW25hbWVdID0gZXh0cmFjdEZyYWdtZW50KGNvbnRlbnRzW25hbWVdLCBjb250ZW50KTtcblx0ICB9XG5cdCAgaWYgKGNvbnRlbnQuaGFzQ2hpbGROb2RlcygpKSB7XG5cdCAgICB2YXIgbm9kZXMgPSBjb250ZW50LmNoaWxkTm9kZXM7XG5cdCAgICBpZiAobm9kZXMubGVuZ3RoID09PSAxICYmIG5vZGVzWzBdLm5vZGVUeXBlID09PSAzICYmICFub2Rlc1swXS5kYXRhLnRyaW0oKSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBjb250ZW50c1snZGVmYXVsdCddID0gZXh0cmFjdEZyYWdtZW50KGNvbnRlbnQuY2hpbGROb2RlcywgY29udGVudCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRXh0cmFjdCBxdWFsaWZpZWQgY29udGVudCBub2RlcyBmcm9tIGEgbm9kZSBsaXN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGVMaXN0fSBub2Rlc1xuXHQgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGV4dHJhY3RGcmFnbWVudChub2RlcywgcGFyZW50KSB7XG5cdCAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdCAgbm9kZXMgPSB0b0FycmF5KG5vZGVzKTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdmFyIG5vZGUgPSBub2Rlc1tpXTtcblx0ICAgIGlmIChpc1RlbXBsYXRlKG5vZGUpICYmICFub2RlLmhhc0F0dHJpYnV0ZSgndi1pZicpICYmICFub2RlLmhhc0F0dHJpYnV0ZSgndi1mb3InKSkge1xuXHQgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQobm9kZSk7XG5cdCAgICAgIG5vZGUgPSBwYXJzZVRlbXBsYXRlKG5vZGUsIHRydWUpO1xuXHQgICAgfVxuXHQgICAgZnJhZy5hcHBlbmRDaGlsZChub2RlKTtcblx0ICB9XG5cdCAgcmV0dXJuIGZyYWc7XG5cdH1cblx0XG5cdFxuXHRcblx0dmFyIGNvbXBpbGVyID0gT2JqZWN0LmZyZWV6ZSh7XG5cdFx0Y29tcGlsZTogY29tcGlsZSxcblx0XHRjb21waWxlQW5kTGlua1Byb3BzOiBjb21waWxlQW5kTGlua1Byb3BzLFxuXHRcdGNvbXBpbGVSb290OiBjb21waWxlUm9vdCxcblx0XHR0cmFuc2NsdWRlOiB0cmFuc2NsdWRlLFxuXHRcdHJlc29sdmVTbG90czogcmVzb2x2ZVNsb3RzXG5cdH0pO1xuXHRcblx0ZnVuY3Rpb24gc3RhdGVNaXhpbiAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogQWNjZXNzb3IgZm9yIGAkZGF0YWAgcHJvcGVydHksIHNpbmNlIHNldHRpbmcgJGRhdGFcblx0ICAgKiByZXF1aXJlcyBvYnNlcnZpbmcgdGhlIG5ldyBvYmplY3QgYW5kIHVwZGF0aW5nXG5cdCAgICogcHJveGllZCBwcm9wZXJ0aWVzLlxuXHQgICAqL1xuXHRcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRkYXRhJywge1xuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xuXHQgICAgfSxcblx0ICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld0RhdGEpIHtcblx0ICAgICAgaWYgKG5ld0RhdGEgIT09IHRoaXMuX2RhdGEpIHtcblx0ICAgICAgICB0aGlzLl9zZXREYXRhKG5ld0RhdGEpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHVwIHRoZSBzY29wZSBvZiBhbiBpbnN0YW5jZSwgd2hpY2ggY29udGFpbnM6XG5cdCAgICogLSBvYnNlcnZlZCBkYXRhXG5cdCAgICogLSBjb21wdXRlZCBwcm9wZXJ0aWVzXG5cdCAgICogLSB1c2VyIG1ldGhvZHNcblx0ICAgKiAtIG1ldGEgcHJvcGVydGllc1xuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLl9pbml0UHJvcHMoKTtcblx0ICAgIHRoaXMuX2luaXRNZXRhKCk7XG5cdCAgICB0aGlzLl9pbml0TWV0aG9kcygpO1xuXHQgICAgdGhpcy5faW5pdERhdGEoKTtcblx0ICAgIHRoaXMuX2luaXRDb21wdXRlZCgpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluaXRpYWxpemUgcHJvcHMuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRQcm9wcyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcblx0ICAgIHZhciBlbCA9IG9wdGlvbnMuZWw7XG5cdCAgICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuXHQgICAgaWYgKHByb3BzICYmICFlbCkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1Byb3BzIHdpbGwgbm90IGJlIGNvbXBpbGVkIGlmIG5vIGBlbGAgb3B0aW9uIGlzICcgKyAncHJvdmlkZWQgYXQgaW5zdGFudGlhdGlvbi4nLCB0aGlzKTtcblx0ICAgIH1cblx0ICAgIC8vIG1ha2Ugc3VyZSB0byBjb252ZXJ0IHN0cmluZyBzZWxlY3RvcnMgaW50byBlbGVtZW50IG5vd1xuXHQgICAgZWwgPSBvcHRpb25zLmVsID0gcXVlcnkoZWwpO1xuXHQgICAgdGhpcy5fcHJvcHNVbmxpbmtGbiA9IGVsICYmIGVsLm5vZGVUeXBlID09PSAxICYmIHByb3BzXG5cdCAgICAvLyBwcm9wcyBtdXN0IGJlIGxpbmtlZCBpbiBwcm9wZXIgc2NvcGUgaWYgaW5zaWRlIHYtZm9yXG5cdCAgICA/IGNvbXBpbGVBbmRMaW5rUHJvcHModGhpcywgZWwsIHByb3BzLCB0aGlzLl9zY29wZSkgOiBudWxsO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluaXRpYWxpemUgdGhlIGRhdGEuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXREYXRhID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGRhdGFGbiA9IHRoaXMuJG9wdGlvbnMuZGF0YTtcblx0ICAgIHZhciBkYXRhID0gdGhpcy5fZGF0YSA9IGRhdGFGbiA/IGRhdGFGbigpIDoge307XG5cdCAgICBpZiAoIWlzUGxhaW5PYmplY3QoZGF0YSkpIHtcblx0ICAgICAgZGF0YSA9IHt9O1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ2RhdGEgZnVuY3Rpb25zIHNob3VsZCByZXR1cm4gYW4gb2JqZWN0LicsIHRoaXMpO1xuXHQgICAgfVxuXHQgICAgdmFyIHByb3BzID0gdGhpcy5fcHJvcHM7XG5cdCAgICAvLyBwcm94eSBkYXRhIG9uIGluc3RhbmNlXG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpO1xuXHQgICAgdmFyIGksIGtleTtcblx0ICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgLy8gdGhlcmUgYXJlIHR3byBzY2VuYXJpb3Mgd2hlcmUgd2UgY2FuIHByb3h5IGEgZGF0YSBrZXk6XG5cdCAgICAgIC8vIDEuIGl0J3Mgbm90IGFscmVhZHkgZGVmaW5lZCBhcyBhIHByb3Bcblx0ICAgICAgLy8gMi4gaXQncyBwcm92aWRlZCB2aWEgYSBpbnN0YW50aWF0aW9uIG9wdGlvbiBBTkQgdGhlcmUgYXJlIG5vXG5cdCAgICAgIC8vICAgIHRlbXBsYXRlIHByb3AgcHJlc2VudFxuXHQgICAgICBpZiAoIXByb3BzIHx8ICFoYXNPd24ocHJvcHMsIGtleSkpIHtcblx0ICAgICAgICB0aGlzLl9wcm94eShrZXkpO1xuXHQgICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICB3YXJuKCdEYXRhIGZpZWxkIFwiJyArIGtleSArICdcIiBpcyBhbHJlYWR5IGRlZmluZWQgJyArICdhcyBhIHByb3AuIFRvIHByb3ZpZGUgZGVmYXVsdCB2YWx1ZSBmb3IgYSBwcm9wLCB1c2UgdGhlIFwiZGVmYXVsdFwiICcgKyAncHJvcCBvcHRpb247IGlmIHlvdSB3YW50IHRvIHBhc3MgcHJvcCB2YWx1ZXMgdG8gYW4gaW5zdGFudGlhdGlvbiAnICsgJ2NhbGwsIHVzZSB0aGUgXCJwcm9wc0RhdGFcIiBvcHRpb24uJywgdGhpcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIG9ic2VydmUgZGF0YVxuXHQgICAgb2JzZXJ2ZShkYXRhLCB0aGlzKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBTd2FwIHRoZSBpbnN0YW5jZSdzICRkYXRhLiBDYWxsZWQgaW4gJGRhdGEncyBzZXR0ZXIuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gbmV3RGF0YVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9zZXREYXRhID0gZnVuY3Rpb24gKG5ld0RhdGEpIHtcblx0ICAgIG5ld0RhdGEgPSBuZXdEYXRhIHx8IHt9O1xuXHQgICAgdmFyIG9sZERhdGEgPSB0aGlzLl9kYXRhO1xuXHQgICAgdGhpcy5fZGF0YSA9IG5ld0RhdGE7XG5cdCAgICB2YXIga2V5cywga2V5LCBpO1xuXHQgICAgLy8gdW5wcm94eSBrZXlzIG5vdCBwcmVzZW50IGluIG5ldyBkYXRhXG5cdCAgICBrZXlzID0gT2JqZWN0LmtleXMob2xkRGF0YSk7XG5cdCAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGtleSA9IGtleXNbaV07XG5cdCAgICAgIGlmICghKGtleSBpbiBuZXdEYXRhKSkge1xuXHQgICAgICAgIHRoaXMuX3VucHJveHkoa2V5KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gcHJveHkga2V5cyBub3QgYWxyZWFkeSBwcm94aWVkLFxuXHQgICAgLy8gYW5kIHRyaWdnZXIgY2hhbmdlIGZvciBjaGFuZ2VkIHZhbHVlc1xuXHQgICAga2V5cyA9IE9iamVjdC5rZXlzKG5ld0RhdGEpO1xuXHQgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICBpZiAoIWhhc093bih0aGlzLCBrZXkpKSB7XG5cdCAgICAgICAgLy8gbmV3IHByb3BlcnR5XG5cdCAgICAgICAgdGhpcy5fcHJveHkoa2V5KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgb2xkRGF0YS5fX29iX18ucmVtb3ZlVm0odGhpcyk7XG5cdCAgICBvYnNlcnZlKG5ld0RhdGEsIHRoaXMpO1xuXHQgICAgdGhpcy5fZGlnZXN0KCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUHJveHkgYSBwcm9wZXJ0eSwgc28gdGhhdFxuXHQgICAqIHZtLnByb3AgPT09IHZtLl9kYXRhLnByb3Bcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fcHJveHkgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICBpZiAoIWlzUmVzZXJ2ZWQoa2V5KSkge1xuXHQgICAgICAvLyBuZWVkIHRvIHN0b3JlIHJlZiB0byBzZWxmIGhlcmVcblx0ICAgICAgLy8gYmVjYXVzZSB0aGVzZSBnZXR0ZXIvc2V0dGVycyBtaWdodFxuXHQgICAgICAvLyBiZSBjYWxsZWQgYnkgY2hpbGQgc2NvcGVzIHZpYVxuXHQgICAgICAvLyBwcm90b3R5cGUgaW5oZXJpdGFuY2UuXG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYsIGtleSwge1xuXHQgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0ICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgIGdldDogZnVuY3Rpb24gcHJveHlHZXR0ZXIoKSB7XG5cdCAgICAgICAgICByZXR1cm4gc2VsZi5fZGF0YVtrZXldO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgc2V0OiBmdW5jdGlvbiBwcm94eVNldHRlcih2YWwpIHtcblx0ICAgICAgICAgIHNlbGYuX2RhdGFba2V5XSA9IHZhbDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFVucHJveHkgYSBwcm9wZXJ0eS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fdW5wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIGlmICghaXNSZXNlcnZlZChrZXkpKSB7XG5cdCAgICAgIGRlbGV0ZSB0aGlzW2tleV07XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogRm9yY2UgdXBkYXRlIG9uIGV2ZXJ5IHdhdGNoZXIgaW4gc2NvcGUuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5fd2F0Y2hlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHRoaXMuX3dhdGNoZXJzW2ldLnVwZGF0ZSh0cnVlKTsgLy8gc2hhbGxvdyB1cGRhdGVzXG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogU2V0dXAgY29tcHV0ZWQgcHJvcGVydGllcy4gVGhleSBhcmUgZXNzZW50aWFsbHlcblx0ICAgKiBzcGVjaWFsIGdldHRlci9zZXR0ZXJzXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRDb21wdXRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBjb21wdXRlZCA9IHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQ7XG5cdCAgICBpZiAoY29tcHV0ZWQpIHtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIGNvbXB1dGVkKSB7XG5cdCAgICAgICAgdmFyIHVzZXJEZWYgPSBjb21wdXRlZFtrZXldO1xuXHQgICAgICAgIHZhciBkZWYgPSB7XG5cdCAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICAgICAgfTtcblx0ICAgICAgICBpZiAodHlwZW9mIHVzZXJEZWYgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgIGRlZi5nZXQgPSBtYWtlQ29tcHV0ZWRHZXR0ZXIodXNlckRlZiwgdGhpcyk7XG5cdCAgICAgICAgICBkZWYuc2V0ID0gbm9vcDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgZGVmLmdldCA9IHVzZXJEZWYuZ2V0ID8gdXNlckRlZi5jYWNoZSAhPT0gZmFsc2UgPyBtYWtlQ29tcHV0ZWRHZXR0ZXIodXNlckRlZi5nZXQsIHRoaXMpIDogYmluZCh1c2VyRGVmLmdldCwgdGhpcykgOiBub29wO1xuXHQgICAgICAgICAgZGVmLnNldCA9IHVzZXJEZWYuc2V0ID8gYmluZCh1c2VyRGVmLnNldCwgdGhpcykgOiBub29wO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywga2V5LCBkZWYpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gbWFrZUNvbXB1dGVkR2V0dGVyKGdldHRlciwgb3duZXIpIHtcblx0ICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIob3duZXIsIGdldHRlciwgbnVsbCwge1xuXHQgICAgICBsYXp5OiB0cnVlXG5cdCAgICB9KTtcblx0ICAgIHJldHVybiBmdW5jdGlvbiBjb21wdXRlZEdldHRlcigpIHtcblx0ICAgICAgaWYgKHdhdGNoZXIuZGlydHkpIHtcblx0ICAgICAgICB3YXRjaGVyLmV2YWx1YXRlKCk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKERlcC50YXJnZXQpIHtcblx0ICAgICAgICB3YXRjaGVyLmRlcGVuZCgpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB3YXRjaGVyLnZhbHVlO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHVwIGluc3RhbmNlIG1ldGhvZHMuIE1ldGhvZHMgbXVzdCBiZSBib3VuZCB0byB0aGVcblx0ICAgKiBpbnN0YW5jZSBzaW5jZSB0aGV5IG1pZ2h0IGJlIHBhc3NlZCBkb3duIGFzIGEgcHJvcCB0b1xuXHQgICAqIGNoaWxkIGNvbXBvbmVudHMuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRNZXRob2RzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIG1ldGhvZHMgPSB0aGlzLiRvcHRpb25zLm1ldGhvZHM7XG5cdCAgICBpZiAobWV0aG9kcykge1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gbWV0aG9kcykge1xuXHQgICAgICAgIHRoaXNba2V5XSA9IGJpbmQobWV0aG9kc1trZXldLCB0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluaXRpYWxpemUgbWV0YSBpbmZvcm1hdGlvbiBsaWtlICRpbmRleCwgJGtleSAmICR2YWx1ZS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdE1ldGEgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgbWV0YXMgPSB0aGlzLiRvcHRpb25zLl9tZXRhO1xuXHQgICAgaWYgKG1ldGFzKSB7XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiBtZXRhcykge1xuXHQgICAgICAgIGRlZmluZVJlYWN0aXZlKHRoaXMsIGtleSwgbWV0YXNba2V5XSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgZXZlbnRSRSA9IC9edi1vbjp8XkAvO1xuXHRcblx0ZnVuY3Rpb24gZXZlbnRzTWl4aW4gKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIFNldHVwIHRoZSBpbnN0YW5jZSdzIG9wdGlvbiBldmVudHMgJiB3YXRjaGVycy5cblx0ICAgKiBJZiB0aGUgdmFsdWUgaXMgYSBzdHJpbmcsIHdlIHB1bGwgaXQgZnJvbSB0aGVcblx0ICAgKiBpbnN0YW5jZSdzIG1ldGhvZHMgYnkgbmFtZS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcblx0ICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCkge1xuXHQgICAgICByZWdpc3RlckNvbXBvbmVudEV2ZW50cyh0aGlzLCBvcHRpb25zLmVsKTtcblx0ICAgIH1cblx0ICAgIHJlZ2lzdGVyQ2FsbGJhY2tzKHRoaXMsICckb24nLCBvcHRpb25zLmV2ZW50cyk7XG5cdCAgICByZWdpc3RlckNhbGxiYWNrcyh0aGlzLCAnJHdhdGNoJywgb3B0aW9ucy53YXRjaCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVnaXN0ZXIgdi1vbiBldmVudHMgb24gYSBjaGlsZCBjb21wb25lbnRcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnRFdmVudHModm0sIGVsKSB7XG5cdCAgICB2YXIgYXR0cnMgPSBlbC5hdHRyaWJ1dGVzO1xuXHQgICAgdmFyIG5hbWUsIHZhbHVlLCBoYW5kbGVyO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG5cdCAgICAgIGlmIChldmVudFJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKGV2ZW50UkUsICcnKTtcblx0ICAgICAgICAvLyBmb3JjZSB0aGUgZXhwcmVzc2lvbiBpbnRvIGEgc3RhdGVtZW50IHNvIHRoYXRcblx0ICAgICAgICAvLyBpdCBhbHdheXMgZHluYW1pY2FsbHkgcmVzb2x2ZXMgdGhlIG1ldGhvZCB0byBjYWxsICgjMjY3MClcblx0ICAgICAgICAvLyBraW5kYSB1Z2x5IGhhY2ssIGJ1dCBkb2VzIHRoZSBqb2IuXG5cdCAgICAgICAgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZTtcblx0ICAgICAgICBpZiAoaXNTaW1wbGVQYXRoKHZhbHVlKSkge1xuXHQgICAgICAgICAgdmFsdWUgKz0gJy5hcHBseSh0aGlzLCAkYXJndW1lbnRzKSc7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGhhbmRsZXIgPSAodm0uX3Njb3BlIHx8IHZtLl9jb250ZXh0KS4kZXZhbCh2YWx1ZSwgdHJ1ZSk7XG5cdCAgICAgICAgaGFuZGxlci5fZnJvbVBhcmVudCA9IHRydWU7XG5cdCAgICAgICAgdm0uJG9uKG5hbWUucmVwbGFjZShldmVudFJFKSwgaGFuZGxlcik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlZ2lzdGVyIGNhbGxiYWNrcyBmb3Igb3B0aW9uIGV2ZW50cyBhbmQgd2F0Y2hlcnMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IGhhc2hcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVnaXN0ZXJDYWxsYmFja3Modm0sIGFjdGlvbiwgaGFzaCkge1xuXHQgICAgaWYgKCFoYXNoKSByZXR1cm47XG5cdCAgICB2YXIgaGFuZGxlcnMsIGtleSwgaSwgajtcblx0ICAgIGZvciAoa2V5IGluIGhhc2gpIHtcblx0ICAgICAgaGFuZGxlcnMgPSBoYXNoW2tleV07XG5cdCAgICAgIGlmIChpc0FycmF5KGhhbmRsZXJzKSkge1xuXHQgICAgICAgIGZvciAoaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0ICAgICAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlcnNbaV0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXJzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogSGVscGVyIHRvIHJlZ2lzdGVyIGFuIGV2ZW50L3dhdGNoIGNhbGxiYWNrLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvblxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ3xPYmplY3R9IGhhbmRsZXJcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlciwgb3B0aW9ucykge1xuXHQgICAgdmFyIHR5cGUgPSB0eXBlb2YgaGFuZGxlcjtcblx0ICAgIGlmICh0eXBlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHZtW2FjdGlvbl0oa2V5LCBoYW5kbGVyLCBvcHRpb25zKTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgdmFyIG1ldGhvZHMgPSB2bS4kb3B0aW9ucy5tZXRob2RzO1xuXHQgICAgICB2YXIgbWV0aG9kID0gbWV0aG9kcyAmJiBtZXRob2RzW2hhbmRsZXJdO1xuXHQgICAgICBpZiAobWV0aG9kKSB7XG5cdCAgICAgICAgdm1bYWN0aW9uXShrZXksIG1ldGhvZCwgb3B0aW9ucyk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdVbmtub3duIG1ldGhvZDogXCInICsgaGFuZGxlciArICdcIiB3aGVuICcgKyAncmVnaXN0ZXJpbmcgY2FsbGJhY2sgZm9yICcgKyBhY3Rpb24gKyAnOiBcIicgKyBrZXkgKyAnXCIuJywgdm0pO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKGhhbmRsZXIgJiYgdHlwZSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLmhhbmRsZXIsIGhhbmRsZXIpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogU2V0dXAgcmVjdXJzaXZlIGF0dGFjaGVkL2RldGFjaGVkIGNhbGxzXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRET01Ib29rcyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuJG9uKCdob29rOmF0dGFjaGVkJywgb25BdHRhY2hlZCk7XG5cdCAgICB0aGlzLiRvbignaG9vazpkZXRhY2hlZCcsIG9uRGV0YWNoZWQpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENhbGxiYWNrIHRvIHJlY3Vyc2l2ZWx5IGNhbGwgYXR0YWNoZWQgaG9vayBvbiBjaGlsZHJlblxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBvbkF0dGFjaGVkKCkge1xuXHQgICAgaWYgKCF0aGlzLl9pc0F0dGFjaGVkKSB7XG5cdCAgICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlO1xuXHQgICAgICB0aGlzLiRjaGlsZHJlbi5mb3JFYWNoKGNhbGxBdHRhY2gpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogSXRlcmF0b3IgdG8gY2FsbCBhdHRhY2hlZCBob29rXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gY2FsbEF0dGFjaChjaGlsZCkge1xuXHQgICAgaWYgKCFjaGlsZC5faXNBdHRhY2hlZCAmJiBpbkRvYyhjaGlsZC4kZWwpKSB7XG5cdCAgICAgIGNoaWxkLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIENhbGxiYWNrIHRvIHJlY3Vyc2l2ZWx5IGNhbGwgZGV0YWNoZWQgaG9vayBvbiBjaGlsZHJlblxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBvbkRldGFjaGVkKCkge1xuXHQgICAgaWYgKHRoaXMuX2lzQXR0YWNoZWQpIHtcblx0ICAgICAgdGhpcy5faXNBdHRhY2hlZCA9IGZhbHNlO1xuXHQgICAgICB0aGlzLiRjaGlsZHJlbi5mb3JFYWNoKGNhbGxEZXRhY2gpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogSXRlcmF0b3IgdG8gY2FsbCBkZXRhY2hlZCBob29rXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gY2FsbERldGFjaChjaGlsZCkge1xuXHQgICAgaWYgKGNoaWxkLl9pc0F0dGFjaGVkICYmICFpbkRvYyhjaGlsZC4kZWwpKSB7XG5cdCAgICAgIGNoaWxkLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRyaWdnZXIgYWxsIGhhbmRsZXJzIGZvciBhIGhvb2tcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBob29rXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2NhbGxIb29rID0gZnVuY3Rpb24gKGhvb2spIHtcblx0ICAgIHRoaXMuJGVtaXQoJ3ByZS1ob29rOicgKyBob29rKTtcblx0ICAgIHZhciBoYW5kbGVycyA9IHRoaXMuJG9wdGlvbnNbaG9va107XG5cdCAgICBpZiAoaGFuZGxlcnMpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0ICAgICAgICBoYW5kbGVyc1tpXS5jYWxsKHRoaXMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aGlzLiRlbWl0KCdob29rOicgKyBob29rKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBub29wJDEoKSB7fVxuXHRcblx0LyoqXG5cdCAqIEEgZGlyZWN0aXZlIGxpbmtzIGEgRE9NIGVsZW1lbnQgd2l0aCBhIHBpZWNlIG9mIGRhdGEsXG5cdCAqIHdoaWNoIGlzIHRoZSByZXN1bHQgb2YgZXZhbHVhdGluZyBhbiBleHByZXNzaW9uLlxuXHQgKiBJdCByZWdpc3RlcnMgYSB3YXRjaGVyIHdpdGggdGhlIGV4cHJlc3Npb24gYW5kIGNhbGxzXG5cdCAqIHRoZSBET00gdXBkYXRlIGZ1bmN0aW9uIHdoZW4gYSBjaGFuZ2UgaXMgdHJpZ2dlcmVkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gZGVzY3JpcHRvclxuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBuYW1lXG5cdCAqICAgICAgICAgICAgICAgICAtIHtPYmplY3R9IGRlZlxuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBleHByZXNzaW9uXG5cdCAqICAgICAgICAgICAgICAgICAtIHtBcnJheTxPYmplY3Q+fSBbZmlsdGVyc11cblx0ICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gW21vZGlmaWVyc11cblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGxpdGVyYWxcblx0ICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gYXR0clxuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBhcmdcblx0ICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gcmF3XG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IFtyZWZdXG5cdCAqICAgICAgICAgICAgICAgICAtIHtBcnJheTxPYmplY3Q+fSBbaW50ZXJwXVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW2hhc09uZVRpbWVdXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge05vZGV9IGVsXG5cdCAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSB0cmFuc2NsdXNpb24gaG9zdCBjb21wb25lbnRcblx0ICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuXHQgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBvd25lciBmcmFnbWVudFxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICovXG5cdGZ1bmN0aW9uIERpcmVjdGl2ZShkZXNjcmlwdG9yLCB2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIHRoaXMuZWwgPSBlbDtcblx0ICAvLyBjb3B5IGRlc2NyaXB0b3IgcHJvcGVydGllc1xuXHQgIHRoaXMuZGVzY3JpcHRvciA9IGRlc2NyaXB0b3I7XG5cdCAgdGhpcy5uYW1lID0gZGVzY3JpcHRvci5uYW1lO1xuXHQgIHRoaXMuZXhwcmVzc2lvbiA9IGRlc2NyaXB0b3IuZXhwcmVzc2lvbjtcblx0ICB0aGlzLmFyZyA9IGRlc2NyaXB0b3IuYXJnO1xuXHQgIHRoaXMubW9kaWZpZXJzID0gZGVzY3JpcHRvci5tb2RpZmllcnM7XG5cdCAgdGhpcy5maWx0ZXJzID0gZGVzY3JpcHRvci5maWx0ZXJzO1xuXHQgIHRoaXMubGl0ZXJhbCA9IHRoaXMubW9kaWZpZXJzICYmIHRoaXMubW9kaWZpZXJzLmxpdGVyYWw7XG5cdCAgLy8gcHJpdmF0ZVxuXHQgIHRoaXMuX2xvY2tlZCA9IGZhbHNlO1xuXHQgIHRoaXMuX2JvdW5kID0gZmFsc2U7XG5cdCAgdGhpcy5fbGlzdGVuZXJzID0gbnVsbDtcblx0ICAvLyBsaW5rIGNvbnRleHRcblx0ICB0aGlzLl9ob3N0ID0gaG9zdDtcblx0ICB0aGlzLl9zY29wZSA9IHNjb3BlO1xuXHQgIHRoaXMuX2ZyYWcgPSBmcmFnO1xuXHQgIC8vIHN0b3JlIGRpcmVjdGl2ZXMgb24gbm9kZSBpbiBkZXYgbW9kZVxuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwpIHtcblx0ICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzID0gdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMgfHwgW107XG5cdCAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcy5wdXNoKHRoaXMpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEluaXRpYWxpemUgdGhlIGRpcmVjdGl2ZSwgbWl4aW4gZGVmaW5pdGlvbiBwcm9wZXJ0aWVzLFxuXHQgKiBzZXR1cCB0aGUgd2F0Y2hlciwgY2FsbCBkZWZpbml0aW9uIGJpbmQoKSBhbmQgdXBkYXRlKClcblx0ICogaWYgcHJlc2VudC5cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl9iaW5kID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBuYW1lID0gdGhpcy5uYW1lO1xuXHQgIHZhciBkZXNjcmlwdG9yID0gdGhpcy5kZXNjcmlwdG9yO1xuXHRcblx0ICAvLyByZW1vdmUgYXR0cmlidXRlXG5cdCAgaWYgKChuYW1lICE9PSAnY2xvYWsnIHx8IHRoaXMudm0uX2lzQ29tcGlsZWQpICYmIHRoaXMuZWwgJiYgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUpIHtcblx0ICAgIHZhciBhdHRyID0gZGVzY3JpcHRvci5hdHRyIHx8ICd2LScgKyBuYW1lO1xuXHQgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG5cdCAgfVxuXHRcblx0ICAvLyBjb3B5IGRlZiBwcm9wZXJ0aWVzXG5cdCAgdmFyIGRlZiA9IGRlc2NyaXB0b3IuZGVmO1xuXHQgIGlmICh0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICB0aGlzLnVwZGF0ZSA9IGRlZjtcblx0ICB9IGVsc2Uge1xuXHQgICAgZXh0ZW5kKHRoaXMsIGRlZik7XG5cdCAgfVxuXHRcblx0ICAvLyBzZXR1cCBkaXJlY3RpdmUgcGFyYW1zXG5cdCAgdGhpcy5fc2V0dXBQYXJhbXMoKTtcblx0XG5cdCAgLy8gaW5pdGlhbCBiaW5kXG5cdCAgaWYgKHRoaXMuYmluZCkge1xuXHQgICAgdGhpcy5iaW5kKCk7XG5cdCAgfVxuXHQgIHRoaXMuX2JvdW5kID0gdHJ1ZTtcblx0XG5cdCAgaWYgKHRoaXMubGl0ZXJhbCkge1xuXHQgICAgdGhpcy51cGRhdGUgJiYgdGhpcy51cGRhdGUoZGVzY3JpcHRvci5yYXcpO1xuXHQgIH0gZWxzZSBpZiAoKHRoaXMuZXhwcmVzc2lvbiB8fCB0aGlzLm1vZGlmaWVycykgJiYgKHRoaXMudXBkYXRlIHx8IHRoaXMudHdvV2F5KSAmJiAhdGhpcy5fY2hlY2tTdGF0ZW1lbnQoKSkge1xuXHQgICAgLy8gd3JhcHBlZCB1cGRhdGVyIGZvciBjb250ZXh0XG5cdCAgICB2YXIgZGlyID0gdGhpcztcblx0ICAgIGlmICh0aGlzLnVwZGF0ZSkge1xuXHQgICAgICB0aGlzLl91cGRhdGUgPSBmdW5jdGlvbiAodmFsLCBvbGRWYWwpIHtcblx0ICAgICAgICBpZiAoIWRpci5fbG9ja2VkKSB7XG5cdCAgICAgICAgICBkaXIudXBkYXRlKHZhbCwgb2xkVmFsKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLl91cGRhdGUgPSBub29wJDE7XG5cdCAgICB9XG5cdCAgICB2YXIgcHJlUHJvY2VzcyA9IHRoaXMuX3ByZVByb2Nlc3MgPyBiaW5kKHRoaXMuX3ByZVByb2Nlc3MsIHRoaXMpIDogbnVsbDtcblx0ICAgIHZhciBwb3N0UHJvY2VzcyA9IHRoaXMuX3Bvc3RQcm9jZXNzID8gYmluZCh0aGlzLl9wb3N0UHJvY2VzcywgdGhpcykgOiBudWxsO1xuXHQgICAgdmFyIHdhdGNoZXIgPSB0aGlzLl93YXRjaGVyID0gbmV3IFdhdGNoZXIodGhpcy52bSwgdGhpcy5leHByZXNzaW9uLCB0aGlzLl91cGRhdGUsIC8vIGNhbGxiYWNrXG5cdCAgICB7XG5cdCAgICAgIGZpbHRlcnM6IHRoaXMuZmlsdGVycyxcblx0ICAgICAgdHdvV2F5OiB0aGlzLnR3b1dheSxcblx0ICAgICAgZGVlcDogdGhpcy5kZWVwLFxuXHQgICAgICBwcmVQcm9jZXNzOiBwcmVQcm9jZXNzLFxuXHQgICAgICBwb3N0UHJvY2VzczogcG9zdFByb2Nlc3MsXG5cdCAgICAgIHNjb3BlOiB0aGlzLl9zY29wZVxuXHQgICAgfSk7XG5cdCAgICAvLyB2LW1vZGVsIHdpdGggaW5pdGFsIGlubGluZSB2YWx1ZSBuZWVkIHRvIHN5bmMgYmFjayB0b1xuXHQgICAgLy8gbW9kZWwgaW5zdGVhZCBvZiB1cGRhdGUgdG8gRE9NIG9uIGluaXQuIFRoZXkgd291bGRcblx0ICAgIC8vIHNldCB0aGUgYWZ0ZXJCaW5kIGhvb2sgdG8gaW5kaWNhdGUgdGhhdC5cblx0ICAgIGlmICh0aGlzLmFmdGVyQmluZCkge1xuXHQgICAgICB0aGlzLmFmdGVyQmluZCgpO1xuXHQgICAgfSBlbHNlIGlmICh0aGlzLnVwZGF0ZSkge1xuXHQgICAgICB0aGlzLnVwZGF0ZSh3YXRjaGVyLnZhbHVlKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogU2V0dXAgYWxsIHBhcmFtIGF0dHJpYnV0ZXMsIGUuZy4gdHJhY2stYnksXG5cdCAqIHRyYW5zaXRpb24tbW9kZSwgZXRjLi4uXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5fc2V0dXBQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKCF0aGlzLnBhcmFtcykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgcGFyYW1zID0gdGhpcy5wYXJhbXM7XG5cdCAgLy8gc3dhcCB0aGUgcGFyYW1zIGFycmF5IHdpdGggYSBmcmVzaCBvYmplY3QuXG5cdCAgdGhpcy5wYXJhbXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHZhciBpID0gcGFyYW1zLmxlbmd0aDtcblx0ICB2YXIga2V5LCB2YWwsIG1hcHBlZEtleTtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBrZXkgPSBoeXBoZW5hdGUocGFyYW1zW2ldKTtcblx0ICAgIG1hcHBlZEtleSA9IGNhbWVsaXplKGtleSk7XG5cdCAgICB2YWwgPSBnZXRCaW5kQXR0cih0aGlzLmVsLCBrZXkpO1xuXHQgICAgaWYgKHZhbCAhPSBudWxsKSB7XG5cdCAgICAgIC8vIGR5bmFtaWNcblx0ICAgICAgdGhpcy5fc2V0dXBQYXJhbVdhdGNoZXIobWFwcGVkS2V5LCB2YWwpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gc3RhdGljXG5cdCAgICAgIHZhbCA9IGdldEF0dHIodGhpcy5lbCwga2V5KTtcblx0ICAgICAgaWYgKHZhbCAhPSBudWxsKSB7XG5cdCAgICAgICAgdGhpcy5wYXJhbXNbbWFwcGVkS2V5XSA9IHZhbCA9PT0gJycgPyB0cnVlIDogdmFsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFNldHVwIGEgd2F0Y2hlciBmb3IgYSBkeW5hbWljIHBhcmFtLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHByZXNzaW9uXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5fc2V0dXBQYXJhbVdhdGNoZXIgPSBmdW5jdGlvbiAoa2V5LCBleHByZXNzaW9uKSB7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIHZhciBjYWxsZWQgPSBmYWxzZTtcblx0ICB2YXIgdW53YXRjaCA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kd2F0Y2goZXhwcmVzc2lvbiwgZnVuY3Rpb24gKHZhbCwgb2xkVmFsKSB7XG5cdCAgICBzZWxmLnBhcmFtc1trZXldID0gdmFsO1xuXHQgICAgLy8gc2luY2Ugd2UgYXJlIGluIGltbWVkaWF0ZSBtb2RlLFxuXHQgICAgLy8gb25seSBjYWxsIHRoZSBwYXJhbSBjaGFuZ2UgY2FsbGJhY2tzIGlmIHRoaXMgaXMgbm90IHRoZSBmaXJzdCB1cGRhdGUuXG5cdCAgICBpZiAoY2FsbGVkKSB7XG5cdCAgICAgIHZhciBjYiA9IHNlbGYucGFyYW1XYXRjaGVycyAmJiBzZWxmLnBhcmFtV2F0Y2hlcnNba2V5XTtcblx0ICAgICAgaWYgKGNiKSB7XG5cdCAgICAgICAgY2IuY2FsbChzZWxmLCB2YWwsIG9sZFZhbCk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGNhbGxlZCA9IHRydWU7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAgaW1tZWRpYXRlOiB0cnVlLFxuXHQgICAgdXNlcjogZmFsc2Vcblx0ICB9KTsodGhpcy5fcGFyYW1VbndhdGNoRm5zIHx8ICh0aGlzLl9wYXJhbVVud2F0Y2hGbnMgPSBbXSkpLnB1c2godW53YXRjaCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgdGhlIGRpcmVjdGl2ZSBpcyBhIGZ1bmN0aW9uIGNhbGxlclxuXHQgKiBhbmQgaWYgdGhlIGV4cHJlc3Npb24gaXMgYSBjYWxsYWJsZSBvbmUuIElmIGJvdGggdHJ1ZSxcblx0ICogd2Ugd3JhcCB1cCB0aGUgZXhwcmVzc2lvbiBhbmQgdXNlIGl0IGFzIHRoZSBldmVudFxuXHQgKiBoYW5kbGVyLlxuXHQgKlxuXHQgKiBlLmcuIG9uLWNsaWNrPVwiYSsrXCJcblx0ICpcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl9jaGVja1N0YXRlbWVudCA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgZXhwcmVzc2lvbiA9IHRoaXMuZXhwcmVzc2lvbjtcblx0ICBpZiAoZXhwcmVzc2lvbiAmJiB0aGlzLmFjY2VwdFN0YXRlbWVudCAmJiAhaXNTaW1wbGVQYXRoKGV4cHJlc3Npb24pKSB7XG5cdCAgICB2YXIgZm4gPSBwYXJzZUV4cHJlc3Npb24oZXhwcmVzc2lvbikuZ2V0O1xuXHQgICAgdmFyIHNjb3BlID0gdGhpcy5fc2NvcGUgfHwgdGhpcy52bTtcblx0ICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gaGFuZGxlcihlKSB7XG5cdCAgICAgIHNjb3BlLiRldmVudCA9IGU7XG5cdCAgICAgIGZuLmNhbGwoc2NvcGUsIHNjb3BlKTtcblx0ICAgICAgc2NvcGUuJGV2ZW50ID0gbnVsbDtcblx0ICAgIH07XG5cdCAgICBpZiAodGhpcy5maWx0ZXJzKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKGhhbmRsZXIsIG51bGwsIHRoaXMuZmlsdGVycyk7XG5cdCAgICB9XG5cdCAgICB0aGlzLnVwZGF0ZShoYW5kbGVyKTtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTZXQgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgd2l0aCB0aGUgc2V0dGVyLlxuXHQgKiBUaGlzIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gdHdvLXdheSBkaXJlY3RpdmVzXG5cdCAqIGUuZy4gdi1tb2RlbC5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuXHQgIGlmICh0aGlzLnR3b1dheSkge1xuXHQgICAgdGhpcy5fd2l0aExvY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICB0aGlzLl93YXRjaGVyLnNldCh2YWx1ZSk7XG5cdCAgICB9KTtcblx0ICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIHdhcm4oJ0RpcmVjdGl2ZS5zZXQoKSBjYW4gb25seSBiZSB1c2VkIGluc2lkZSB0d29XYXknICsgJ2RpcmVjdGl2ZXMuJyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEV4ZWN1dGUgYSBmdW5jdGlvbiB3aGlsZSBwcmV2ZW50aW5nIHRoYXQgZnVuY3Rpb24gZnJvbVxuXHQgKiB0cmlnZ2VyaW5nIHVwZGF0ZXMgb24gdGhpcyBkaXJlY3RpdmUgaW5zdGFuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5fd2l0aExvY2sgPSBmdW5jdGlvbiAoZm4pIHtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgc2VsZi5fbG9ja2VkID0gdHJ1ZTtcblx0ICBmbi5jYWxsKHNlbGYpO1xuXHQgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0ICAgIHNlbGYuX2xvY2tlZCA9IGZhbHNlO1xuXHQgIH0pO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGF0dGFjaGVzIGEgRE9NIGV2ZW50IGxpc3RlbmVyXG5cdCAqIHRvIHRoZSBkaXJlY3RpdmUgZWxlbWVudCBhbmQgYXV0b21ldGljYWxseSB0ZWFycyBpdCBkb3duXG5cdCAqIGR1cmluZyB1bmJpbmQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW3VzZUNhcHR1cmVdXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudCwgaGFuZGxlciwgdXNlQ2FwdHVyZSkge1xuXHQgIG9uKHRoaXMuZWwsIGV2ZW50LCBoYW5kbGVyLCB1c2VDYXB0dXJlKTsodGhpcy5fbGlzdGVuZXJzIHx8ICh0aGlzLl9saXN0ZW5lcnMgPSBbXSkpLnB1c2goW2V2ZW50LCBoYW5kbGVyXSk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogVGVhcmRvd24gdGhlIHdhdGNoZXIgYW5kIGNhbGwgdW5iaW5kLlxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX3RlYXJkb3duID0gZnVuY3Rpb24gKCkge1xuXHQgIGlmICh0aGlzLl9ib3VuZCkge1xuXHQgICAgdGhpcy5fYm91bmQgPSBmYWxzZTtcblx0ICAgIGlmICh0aGlzLnVuYmluZCkge1xuXHQgICAgICB0aGlzLnVuYmluZCgpO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuX3dhdGNoZXIpIHtcblx0ICAgICAgdGhpcy5fd2F0Y2hlci50ZWFyZG93bigpO1xuXHQgICAgfVxuXHQgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcblx0ICAgIHZhciBpO1xuXHQgICAgaWYgKGxpc3RlbmVycykge1xuXHQgICAgICBpID0gbGlzdGVuZXJzLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICAgIG9mZih0aGlzLmVsLCBsaXN0ZW5lcnNbaV1bMF0sIGxpc3RlbmVyc1tpXVsxXSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHZhciB1bndhdGNoRm5zID0gdGhpcy5fcGFyYW1VbndhdGNoRm5zO1xuXHQgICAgaWYgKHVud2F0Y2hGbnMpIHtcblx0ICAgICAgaSA9IHVud2F0Y2hGbnMubGVuZ3RoO1xuXHQgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAgdW53YXRjaEZuc1tpXSgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsKSB7XG5cdCAgICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzLiRyZW1vdmUodGhpcyk7XG5cdCAgICB9XG5cdCAgICB0aGlzLnZtID0gdGhpcy5lbCA9IHRoaXMuX3dhdGNoZXIgPSB0aGlzLl9saXN0ZW5lcnMgPSBudWxsO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIGxpZmVjeWNsZU1peGluIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBVcGRhdGUgdi1yZWYgZm9yIGNvbXBvbmVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX3VwZGF0ZVJlZiA9IGZ1bmN0aW9uIChyZW1vdmUpIHtcblx0ICAgIHZhciByZWYgPSB0aGlzLiRvcHRpb25zLl9yZWY7XG5cdCAgICBpZiAocmVmKSB7XG5cdCAgICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMuX2NvbnRleHQpLiRyZWZzO1xuXHQgICAgICBpZiAocmVtb3ZlKSB7XG5cdCAgICAgICAgaWYgKHJlZnNbcmVmXSA9PT0gdGhpcykge1xuXHQgICAgICAgICAgcmVmc1tyZWZdID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVmc1tyZWZdID0gdGhpcztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRyYW5zY2x1ZGUsIGNvbXBpbGUgYW5kIGxpbmsgZWxlbWVudC5cblx0ICAgKlxuXHQgICAqIElmIGEgcHJlLWNvbXBpbGVkIGxpbmtlciBpcyBhdmFpbGFibGUsIHRoYXQgbWVhbnMgdGhlXG5cdCAgICogcGFzc2VkIGluIGVsZW1lbnQgd2lsbCBiZSBwcmUtdHJhbnNjbHVkZWQgYW5kIGNvbXBpbGVkXG5cdCAgICogYXMgd2VsbCAtIGFsbCB3ZSBuZWVkIHRvIGRvIGlzIHRvIGNhbGwgdGhlIGxpbmtlci5cblx0ICAgKlxuXHQgICAqIE90aGVyd2lzZSB3ZSBuZWVkIHRvIGNhbGwgdHJhbnNjbHVkZS9jb21waWxlL2xpbmsgaGVyZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fY29tcGlsZSA9IGZ1bmN0aW9uIChlbCkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuXHRcblx0ICAgIC8vIHRyYW5zY2x1ZGUgYW5kIGluaXQgZWxlbWVudFxuXHQgICAgLy8gdHJhbnNjbHVkZSBjYW4gcG90ZW50aWFsbHkgcmVwbGFjZSBvcmlnaW5hbFxuXHQgICAgLy8gc28gd2UgbmVlZCB0byBrZWVwIHJlZmVyZW5jZTsgdGhpcyBzdGVwIGFsc28gaW5qZWN0c1xuXHQgICAgLy8gdGhlIHRlbXBsYXRlIGFuZCBjYWNoZXMgdGhlIG9yaWdpbmFsIGF0dHJpYnV0ZXNcblx0ICAgIC8vIG9uIHRoZSBjb250YWluZXIgbm9kZSBhbmQgcmVwbGFjZXIgbm9kZS5cblx0ICAgIHZhciBvcmlnaW5hbCA9IGVsO1xuXHQgICAgZWwgPSB0cmFuc2NsdWRlKGVsLCBvcHRpb25zKTtcblx0ICAgIHRoaXMuX2luaXRFbGVtZW50KGVsKTtcblx0XG5cdCAgICAvLyBoYW5kbGUgdi1wcmUgb24gcm9vdCBub2RlICgjMjAyNilcblx0ICAgIGlmIChlbC5ub2RlVHlwZSA9PT0gMSAmJiBnZXRBdHRyKGVsLCAndi1wcmUnKSAhPT0gbnVsbCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gcm9vdCBpcyBhbHdheXMgY29tcGlsZWQgcGVyLWluc3RhbmNlLCBiZWNhdXNlXG5cdCAgICAvLyBjb250YWluZXIgYXR0cnMgYW5kIHByb3BzIGNhbiBiZSBkaWZmZXJlbnQgZXZlcnkgdGltZS5cblx0ICAgIHZhciBjb250ZXh0T3B0aW9ucyA9IHRoaXMuX2NvbnRleHQgJiYgdGhpcy5fY29udGV4dC4kb3B0aW9ucztcblx0ICAgIHZhciByb290TGlua2VyID0gY29tcGlsZVJvb3QoZWwsIG9wdGlvbnMsIGNvbnRleHRPcHRpb25zKTtcblx0XG5cdCAgICAvLyByZXNvbHZlIHNsb3QgZGlzdHJpYnV0aW9uXG5cdCAgICByZXNvbHZlU2xvdHModGhpcywgb3B0aW9ucy5fY29udGVudCk7XG5cdFxuXHQgICAgLy8gY29tcGlsZSBhbmQgbGluayB0aGUgcmVzdFxuXHQgICAgdmFyIGNvbnRlbnRMaW5rRm47XG5cdCAgICB2YXIgY3RvciA9IHRoaXMuY29uc3RydWN0b3I7XG5cdCAgICAvLyBjb21wb25lbnQgY29tcGlsYXRpb24gY2FuIGJlIGNhY2hlZFxuXHQgICAgLy8gYXMgbG9uZyBhcyBpdCdzIG5vdCB1c2luZyBpbmxpbmUtdGVtcGxhdGVcblx0ICAgIGlmIChvcHRpb25zLl9saW5rZXJDYWNoYWJsZSkge1xuXHQgICAgICBjb250ZW50TGlua0ZuID0gY3Rvci5saW5rZXI7XG5cdCAgICAgIGlmICghY29udGVudExpbmtGbikge1xuXHQgICAgICAgIGNvbnRlbnRMaW5rRm4gPSBjdG9yLmxpbmtlciA9IGNvbXBpbGUoZWwsIG9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gbGluayBwaGFzZVxuXHQgICAgLy8gbWFrZSBzdXJlIHRvIGxpbmsgcm9vdCB3aXRoIHByb3Agc2NvcGUhXG5cdCAgICB2YXIgcm9vdFVubGlua0ZuID0gcm9vdExpbmtlcih0aGlzLCBlbCwgdGhpcy5fc2NvcGUpO1xuXHQgICAgdmFyIGNvbnRlbnRVbmxpbmtGbiA9IGNvbnRlbnRMaW5rRm4gPyBjb250ZW50TGlua0ZuKHRoaXMsIGVsKSA6IGNvbXBpbGUoZWwsIG9wdGlvbnMpKHRoaXMsIGVsKTtcblx0XG5cdCAgICAvLyByZWdpc3RlciBjb21wb3NpdGUgdW5saW5rIGZ1bmN0aW9uXG5cdCAgICAvLyB0byBiZSBjYWxsZWQgZHVyaW5nIGluc3RhbmNlIGRlc3RydWN0aW9uXG5cdCAgICB0aGlzLl91bmxpbmtGbiA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgcm9vdFVubGlua0ZuKCk7XG5cdCAgICAgIC8vIHBhc3NpbmcgZGVzdHJveWluZzogdHJ1ZSB0byBhdm9pZCBzZWFyY2hpbmcgYW5kXG5cdCAgICAgIC8vIHNwbGljaW5nIHRoZSBkaXJlY3RpdmVzXG5cdCAgICAgIGNvbnRlbnRVbmxpbmtGbih0cnVlKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gZmluYWxseSByZXBsYWNlIG9yaWdpbmFsXG5cdCAgICBpZiAob3B0aW9ucy5yZXBsYWNlKSB7XG5cdCAgICAgIHJlcGxhY2Uob3JpZ2luYWwsIGVsKTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLl9pc0NvbXBpbGVkID0gdHJ1ZTtcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdjb21waWxlZCcpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluaXRpYWxpemUgaW5zdGFuY2UgZWxlbWVudC4gQ2FsbGVkIGluIHRoZSBwdWJsaWNcblx0ICAgKiAkbW91bnQoKSBtZXRob2QuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRFbGVtZW50ID0gZnVuY3Rpb24gKGVsKSB7XG5cdCAgICBpZiAoaXNGcmFnbWVudChlbCkpIHtcblx0ICAgICAgdGhpcy5faXNGcmFnbWVudCA9IHRydWU7XG5cdCAgICAgIHRoaXMuJGVsID0gdGhpcy5fZnJhZ21lbnRTdGFydCA9IGVsLmZpcnN0Q2hpbGQ7XG5cdCAgICAgIHRoaXMuX2ZyYWdtZW50RW5kID0gZWwubGFzdENoaWxkO1xuXHQgICAgICAvLyBzZXQgcGVyc2lzdGVkIHRleHQgYW5jaG9ycyB0byBlbXB0eVxuXHQgICAgICBpZiAodGhpcy5fZnJhZ21lbnRTdGFydC5ub2RlVHlwZSA9PT0gMykge1xuXHQgICAgICAgIHRoaXMuX2ZyYWdtZW50U3RhcnQuZGF0YSA9IHRoaXMuX2ZyYWdtZW50RW5kLmRhdGEgPSAnJztcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLl9mcmFnbWVudCA9IGVsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy4kZWwgPSBlbDtcblx0ICAgIH1cblx0ICAgIHRoaXMuJGVsLl9fdnVlX18gPSB0aGlzO1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2JlZm9yZUNvbXBpbGUnKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGUgYW5kIGJpbmQgYSBkaXJlY3RpdmUgdG8gYW4gZWxlbWVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBkZXNjcmlwdG9yIC0gcGFyc2VkIGRpcmVjdGl2ZSBkZXNjcmlwdG9yXG5cdCAgICogQHBhcmFtIHtOb2RlfSBub2RlICAgLSB0YXJnZXQgbm9kZVxuXHQgICAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSB0cmFuc2NsdXNpb24gaG9zdCBjb21wb25lbnRcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddIC0gb3duZXIgZnJhZ21lbnRcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fYmluZERpciA9IGZ1bmN0aW9uIChkZXNjcmlwdG9yLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgdGhpcy5fZGlyZWN0aXZlcy5wdXNoKG5ldyBEaXJlY3RpdmUoZGVzY3JpcHRvciwgdGhpcywgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBUZWFyZG93biBhbiBpbnN0YW5jZSwgdW5vYnNlcnZlcyB0aGUgZGF0YSwgdW5iaW5kIGFsbCB0aGVcblx0ICAgKiBkaXJlY3RpdmVzLCB0dXJuIG9mZiBhbGwgdGhlIGV2ZW50IGxpc3RlbmVycywgZXRjLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmUgLSB3aGV0aGVyIHRvIHJlbW92ZSB0aGUgRE9NIG5vZGUuXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBkZWZlckNsZWFudXAgLSBpZiB0cnVlLCBkZWZlciBjbGVhbnVwIHRvXG5cdCAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZSBjYWxsZWQgbGF0ZXJcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChyZW1vdmUsIGRlZmVyQ2xlYW51cCkge1xuXHQgICAgaWYgKHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQpIHtcblx0ICAgICAgaWYgKCFkZWZlckNsZWFudXApIHtcblx0ICAgICAgICB0aGlzLl9jbGVhbnVwKCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBkZXN0cm95UmVhZHk7XG5cdCAgICB2YXIgcGVuZGluZ1JlbW92YWw7XG5cdFxuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgLy8gQ2xlYW51cCBzaG91bGQgYmUgY2FsbGVkIGVpdGhlciBzeW5jaHJvbm91c2x5IG9yIGFzeW5jaHJvbm95c2x5IGFzXG5cdCAgICAvLyBjYWxsYmFjayBvZiB0aGlzLiRyZW1vdmUoKSwgb3IgaWYgcmVtb3ZlIGFuZCBkZWZlckNsZWFudXAgYXJlIGZhbHNlLlxuXHQgICAgLy8gSW4gYW55IGNhc2UgaXQgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciBhbGwgb3RoZXIgcmVtb3ZpbmcsIHVuYmluZGluZyBhbmRcblx0ICAgIC8vIHR1cm5pbmcgb2YgaXMgZG9uZVxuXHQgICAgdmFyIGNsZWFudXBJZlBvc3NpYmxlID0gZnVuY3Rpb24gY2xlYW51cElmUG9zc2libGUoKSB7XG5cdCAgICAgIGlmIChkZXN0cm95UmVhZHkgJiYgIXBlbmRpbmdSZW1vdmFsICYmICFkZWZlckNsZWFudXApIHtcblx0ICAgICAgICBzZWxmLl9jbGVhbnVwKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLy8gcmVtb3ZlIERPTSBlbGVtZW50XG5cdCAgICBpZiAocmVtb3ZlICYmIHRoaXMuJGVsKSB7XG5cdCAgICAgIHBlbmRpbmdSZW1vdmFsID0gdHJ1ZTtcblx0ICAgICAgdGhpcy4kcmVtb3ZlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBwZW5kaW5nUmVtb3ZhbCA9IGZhbHNlO1xuXHQgICAgICAgIGNsZWFudXBJZlBvc3NpYmxlKCk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdiZWZvcmVEZXN0cm95Jyk7XG5cdCAgICB0aGlzLl9pc0JlaW5nRGVzdHJveWVkID0gdHJ1ZTtcblx0ICAgIHZhciBpO1xuXHQgICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSBwYXJlbnQuIG9ubHkgbmVjZXNzYXJ5XG5cdCAgICAvLyBpZiBwYXJlbnQgaXMgbm90IGJlaW5nIGRlc3Ryb3llZCBhcyB3ZWxsLlxuXHQgICAgdmFyIHBhcmVudCA9IHRoaXMuJHBhcmVudDtcblx0ICAgIGlmIChwYXJlbnQgJiYgIXBhcmVudC5faXNCZWluZ0Rlc3Ryb3llZCkge1xuXHQgICAgICBwYXJlbnQuJGNoaWxkcmVuLiRyZW1vdmUodGhpcyk7XG5cdCAgICAgIC8vIHVucmVnaXN0ZXIgcmVmIChyZW1vdmU6IHRydWUpXG5cdCAgICAgIHRoaXMuX3VwZGF0ZVJlZih0cnVlKTtcblx0ICAgIH1cblx0ICAgIC8vIGRlc3Ryb3kgYWxsIGNoaWxkcmVuLlxuXHQgICAgaSA9IHRoaXMuJGNoaWxkcmVuLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdGhpcy4kY2hpbGRyZW5baV0uJGRlc3Ryb3koKTtcblx0ICAgIH1cblx0ICAgIC8vIHRlYXJkb3duIHByb3BzXG5cdCAgICBpZiAodGhpcy5fcHJvcHNVbmxpbmtGbikge1xuXHQgICAgICB0aGlzLl9wcm9wc1VubGlua0ZuKCk7XG5cdCAgICB9XG5cdCAgICAvLyB0ZWFyZG93biBhbGwgZGlyZWN0aXZlcy4gdGhpcyBhbHNvIHRlYXJzZG93biBhbGxcblx0ICAgIC8vIGRpcmVjdGl2ZS1vd25lZCB3YXRjaGVycy5cblx0ICAgIGlmICh0aGlzLl91bmxpbmtGbikge1xuXHQgICAgICB0aGlzLl91bmxpbmtGbigpO1xuXHQgICAgfVxuXHQgICAgaSA9IHRoaXMuX3dhdGNoZXJzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdGhpcy5fd2F0Y2hlcnNbaV0udGVhcmRvd24oKTtcblx0ICAgIH1cblx0ICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgdG8gc2VsZiBvbiAkZWxcblx0ICAgIGlmICh0aGlzLiRlbCkge1xuXHQgICAgICB0aGlzLiRlbC5fX3Z1ZV9fID0gbnVsbDtcblx0ICAgIH1cblx0XG5cdCAgICBkZXN0cm95UmVhZHkgPSB0cnVlO1xuXHQgICAgY2xlYW51cElmUG9zc2libGUoKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBDbGVhbiB1cCB0byBlbnN1cmUgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuXHQgICAqIFRoaXMgaXMgY2FsbGVkIGFmdGVyIHRoZSBsZWF2ZSB0cmFuc2l0aW9uIGlmIHRoZXJlXG5cdCAgICogaXMgYW55LlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKHRoaXMuX2lzRGVzdHJveWVkKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gb3duZXIgZnJhZ21lbnRcblx0ICAgIC8vIGRvIGl0IGluIGNsZWFudXAgc28gdGhhdCB3ZSBjYW4gY2FsbCAkZGVzdHJveSB3aXRoXG5cdCAgICAvLyBkZWZlciByaWdodCB3aGVuIGEgZnJhZ21lbnQgaXMgYWJvdXQgdG8gYmUgcmVtb3ZlZC5cblx0ICAgIGlmICh0aGlzLl9mcmFnKSB7XG5cdCAgICAgIHRoaXMuX2ZyYWcuY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcblx0ICAgIH1cblx0ICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgZnJvbSBkYXRhIG9iXG5cdCAgICAvLyBmcm96ZW4gb2JqZWN0IG1heSBub3QgaGF2ZSBvYnNlcnZlci5cblx0ICAgIGlmICh0aGlzLl9kYXRhICYmIHRoaXMuX2RhdGEuX19vYl9fKSB7XG5cdCAgICAgIHRoaXMuX2RhdGEuX19vYl9fLnJlbW92ZVZtKHRoaXMpO1xuXHQgICAgfVxuXHQgICAgLy8gQ2xlYW4gdXAgcmVmZXJlbmNlcyB0byBwcml2YXRlIHByb3BlcnRpZXMgYW5kIG90aGVyXG5cdCAgICAvLyBpbnN0YW5jZXMuIHByZXNlcnZlIHJlZmVyZW5jZSB0byBfZGF0YSBzbyB0aGF0IHByb3h5XG5cdCAgICAvLyBhY2Nlc3NvcnMgc3RpbGwgd29yay4gVGhlIG9ubHkgcG90ZW50aWFsIHNpZGUgZWZmZWN0XG5cdCAgICAvLyBoZXJlIGlzIHRoYXQgbXV0YXRpbmcgdGhlIGluc3RhbmNlIGFmdGVyIGl0J3MgZGVzdHJveWVkXG5cdCAgICAvLyBtYXkgYWZmZWN0IHRoZSBzdGF0ZSBvZiBvdGhlciBjb21wb25lbnRzIHRoYXQgYXJlIHN0aWxsXG5cdCAgICAvLyBvYnNlcnZpbmcgdGhlIHNhbWUgb2JqZWN0LCBidXQgdGhhdCBzZWVtcyB0byBiZSBhXG5cdCAgICAvLyByZWFzb25hYmxlIHJlc3BvbnNpYmlsaXR5IGZvciB0aGUgdXNlciByYXRoZXIgdGhhblxuXHQgICAgLy8gYWx3YXlzIHRocm93aW5nIGFuIGVycm9yIG9uIHRoZW0uXG5cdCAgICB0aGlzLiRlbCA9IHRoaXMuJHBhcmVudCA9IHRoaXMuJHJvb3QgPSB0aGlzLiRjaGlsZHJlbiA9IHRoaXMuX3dhdGNoZXJzID0gdGhpcy5fY29udGV4dCA9IHRoaXMuX3Njb3BlID0gdGhpcy5fZGlyZWN0aXZlcyA9IG51bGw7XG5cdCAgICAvLyBjYWxsIHRoZSBsYXN0IGhvb2suLi5cblx0ICAgIHRoaXMuX2lzRGVzdHJveWVkID0gdHJ1ZTtcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdkZXN0cm95ZWQnKTtcblx0ICAgIC8vIHR1cm4gb2ZmIGFsbCBpbnN0YW5jZSBsaXN0ZW5lcnMuXG5cdCAgICB0aGlzLiRvZmYoKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtaXNjTWl4aW4gKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIEFwcGx5IGEgbGlzdCBvZiBmaWx0ZXIgKGRlc2NyaXB0b3JzKSB0byBhIHZhbHVlLlxuXHQgICAqIFVzaW5nIHBsYWluIGZvciBsb29wcyBoZXJlIGJlY2F1c2UgdGhpcyB3aWxsIGJlIGNhbGxlZCBpblxuXHQgICAqIHRoZSBnZXR0ZXIgb2YgYW55IHdhdGNoZXIgd2l0aCBmaWx0ZXJzIHNvIGl0IGlzIHZlcnlcblx0ICAgKiBwZXJmb3JtYW5jZSBzZW5zaXRpdmUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICogQHBhcmFtIHsqfSBbb2xkVmFsdWVdXG5cdCAgICogQHBhcmFtIHtBcnJheX0gZmlsdGVyc1xuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gd3JpdGVcblx0ICAgKiBAcmV0dXJuIHsqfVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9hcHBseUZpbHRlcnMgPSBmdW5jdGlvbiAodmFsdWUsIG9sZFZhbHVlLCBmaWx0ZXJzLCB3cml0ZSkge1xuXHQgICAgdmFyIGZpbHRlciwgZm4sIGFyZ3MsIGFyZywgb2Zmc2V0LCBpLCBsLCBqLCBrO1xuXHQgICAgZm9yIChpID0gMCwgbCA9IGZpbHRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGZpbHRlciA9IGZpbHRlcnNbd3JpdGUgPyBsIC0gaSAtIDEgOiBpXTtcblx0ICAgICAgZm4gPSByZXNvbHZlQXNzZXQodGhpcy4kb3B0aW9ucywgJ2ZpbHRlcnMnLCBmaWx0ZXIubmFtZSwgdHJ1ZSk7XG5cdCAgICAgIGlmICghZm4pIGNvbnRpbnVlO1xuXHQgICAgICBmbiA9IHdyaXRlID8gZm4ud3JpdGUgOiBmbi5yZWFkIHx8IGZuO1xuXHQgICAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSBjb250aW51ZTtcblx0ICAgICAgYXJncyA9IHdyaXRlID8gW3ZhbHVlLCBvbGRWYWx1ZV0gOiBbdmFsdWVdO1xuXHQgICAgICBvZmZzZXQgPSB3cml0ZSA/IDIgOiAxO1xuXHQgICAgICBpZiAoZmlsdGVyLmFyZ3MpIHtcblx0ICAgICAgICBmb3IgKGogPSAwLCBrID0gZmlsdGVyLmFyZ3MubGVuZ3RoOyBqIDwgazsgaisrKSB7XG5cdCAgICAgICAgICBhcmcgPSBmaWx0ZXIuYXJnc1tqXTtcblx0ICAgICAgICAgIGFyZ3NbaiArIG9mZnNldF0gPSBhcmcuZHluYW1pYyA/IHRoaXMuJGdldChhcmcudmFsdWUpIDogYXJnLnZhbHVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICB2YWx1ZSA9IGZuLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlc29sdmUgYSBjb21wb25lbnQsIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBjb21wb25lbnRcblx0ICAgKiBpcyBkZWZpbmVkIG5vcm1hbGx5IG9yIHVzaW5nIGFuIGFzeW5jIGZhY3RvcnkgZnVuY3Rpb24uXG5cdCAgICogUmVzb2x2ZXMgc3luY2hyb25vdXNseSBpZiBhbHJlYWR5IHJlc29sdmVkLCBvdGhlcndpc2Vcblx0ICAgKiByZXNvbHZlcyBhc3luY2hyb25vdXNseSBhbmQgY2FjaGVzIHRoZSByZXNvbHZlZFxuXHQgICAqIGNvbnN0cnVjdG9yIG9uIHRoZSBmYWN0b3J5LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHZhbHVlXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fcmVzb2x2ZUNvbXBvbmVudCA9IGZ1bmN0aW9uICh2YWx1ZSwgY2IpIHtcblx0ICAgIHZhciBmYWN0b3J5O1xuXHQgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBmYWN0b3J5ID0gdmFsdWU7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBmYWN0b3J5ID0gcmVzb2x2ZUFzc2V0KHRoaXMuJG9wdGlvbnMsICdjb21wb25lbnRzJywgdmFsdWUsIHRydWUpO1xuXHQgICAgfVxuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoIWZhY3RvcnkpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gYXN5bmMgY29tcG9uZW50IGZhY3Rvcnlcblx0ICAgIGlmICghZmFjdG9yeS5vcHRpb25zKSB7XG5cdCAgICAgIGlmIChmYWN0b3J5LnJlc29sdmVkKSB7XG5cdCAgICAgICAgLy8gY2FjaGVkXG5cdCAgICAgICAgY2IoZmFjdG9yeS5yZXNvbHZlZCk7XG5cdCAgICAgIH0gZWxzZSBpZiAoZmFjdG9yeS5yZXF1ZXN0ZWQpIHtcblx0ICAgICAgICAvLyBwb29sIGNhbGxiYWNrc1xuXHQgICAgICAgIGZhY3RvcnkucGVuZGluZ0NhbGxiYWNrcy5wdXNoKGNiKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBmYWN0b3J5LnJlcXVlc3RlZCA9IHRydWU7XG5cdCAgICAgICAgdmFyIGNicyA9IGZhY3RvcnkucGVuZGluZ0NhbGxiYWNrcyA9IFtjYl07XG5cdCAgICAgICAgZmFjdG9yeS5jYWxsKHRoaXMsIGZ1bmN0aW9uIHJlc29sdmUocmVzKSB7XG5cdCAgICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChyZXMpKSB7XG5cdCAgICAgICAgICAgIHJlcyA9IFZ1ZS5leHRlbmQocmVzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIC8vIGNhY2hlIHJlc29sdmVkXG5cdCAgICAgICAgICBmYWN0b3J5LnJlc29sdmVkID0gcmVzO1xuXHQgICAgICAgICAgLy8gaW52b2tlIGNhbGxiYWNrc1xuXHQgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjYnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGNic1tpXShyZXMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcblx0ICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignRmFpbGVkIHRvIHJlc29sdmUgYXN5bmMgY29tcG9uZW50JyArICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gJzogJyArIHZhbHVlIDogJycpICsgJy4gJyArIChyZWFzb24gPyAnXFxuUmVhc29uOiAnICsgcmVhc29uIDogJycpKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gbm9ybWFsIGNvbXBvbmVudFxuXHQgICAgICBjYihmYWN0b3J5KTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgZmlsdGVyUkUkMSA9IC9bXnxdXFx8W158XS87XG5cdFxuXHRmdW5jdGlvbiBkYXRhQVBJIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBHZXQgdGhlIHZhbHVlIGZyb20gYW4gZXhwcmVzc2lvbiBvbiB0aGlzIHZtLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FzU3RhdGVtZW50XVxuXHQgICAqIEByZXR1cm4geyp9XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGdldCA9IGZ1bmN0aW9uIChleHAsIGFzU3RhdGVtZW50KSB7XG5cdCAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cCk7XG5cdCAgICBpZiAocmVzKSB7XG5cdCAgICAgIGlmIChhc1N0YXRlbWVudCkge1xuXHQgICAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24gc3RhdGVtZW50SGFuZGxlcigpIHtcblx0ICAgICAgICAgIHNlbGYuJGFyZ3VtZW50cyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcblx0ICAgICAgICAgIHZhciByZXN1bHQgPSByZXMuZ2V0LmNhbGwoc2VsZiwgc2VsZik7XG5cdCAgICAgICAgICBzZWxmLiRhcmd1bWVudHMgPSBudWxsO1xuXHQgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgICAgICB9O1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICByZXR1cm4gcmVzLmdldC5jYWxsKHRoaXMsIHRoaXMpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBTZXQgdGhlIHZhbHVlIGZyb20gYW4gZXhwcmVzc2lvbiBvbiB0aGlzIHZtLlxuXHQgICAqIFRoZSBleHByZXNzaW9uIG11c3QgYmUgYSB2YWxpZCBsZWZ0LWhhbmRcblx0ICAgKiBleHByZXNzaW9uIGluIGFuIGFzc2lnbm1lbnQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAgICogQHBhcmFtIHsqfSB2YWxcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kc2V0ID0gZnVuY3Rpb24gKGV4cCwgdmFsKSB7XG5cdCAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cCwgdHJ1ZSk7XG5cdCAgICBpZiAocmVzICYmIHJlcy5zZXQpIHtcblx0ICAgICAgcmVzLnNldC5jYWxsKHRoaXMsIHRoaXMsIHZhbCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogRGVsZXRlIGEgcHJvcGVydHkgb24gdGhlIFZNXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIGRlbCh0aGlzLl9kYXRhLCBrZXkpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFdhdGNoIGFuIGV4cHJlc3Npb24sIHRyaWdnZXIgY2FsbGJhY2sgd2hlbiBpdHNcblx0ICAgKiB2YWx1ZSBjaGFuZ2VzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IGV4cE9yRm5cblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gZGVlcFxuXHQgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBpbW1lZGlhdGVcblx0ICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB1bndhdGNoRm5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kd2F0Y2ggPSBmdW5jdGlvbiAoZXhwT3JGbiwgY2IsIG9wdGlvbnMpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICB2YXIgcGFyc2VkO1xuXHQgICAgaWYgKHR5cGVvZiBleHBPckZuID09PSAnc3RyaW5nJykge1xuXHQgICAgICBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZShleHBPckZuKTtcblx0ICAgICAgZXhwT3JGbiA9IHBhcnNlZC5leHByZXNzaW9uO1xuXHQgICAgfVxuXHQgICAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIHtcblx0ICAgICAgZGVlcDogb3B0aW9ucyAmJiBvcHRpb25zLmRlZXAsXG5cdCAgICAgIHN5bmM6IG9wdGlvbnMgJiYgb3B0aW9ucy5zeW5jLFxuXHQgICAgICBmaWx0ZXJzOiBwYXJzZWQgJiYgcGFyc2VkLmZpbHRlcnMsXG5cdCAgICAgIHVzZXI6ICFvcHRpb25zIHx8IG9wdGlvbnMudXNlciAhPT0gZmFsc2Vcblx0ICAgIH0pO1xuXHQgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5pbW1lZGlhdGUpIHtcblx0ICAgICAgY2IuY2FsbCh2bSwgd2F0Y2hlci52YWx1ZSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gdW53YXRjaEZuKCkge1xuXHQgICAgICB3YXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgICB9O1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEV2YWx1YXRlIGEgdGV4dCBkaXJlY3RpdmUsIGluY2x1ZGluZyBmaWx0ZXJzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFthc1N0YXRlbWVudF1cblx0ICAgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGV2YWwgPSBmdW5jdGlvbiAodGV4dCwgYXNTdGF0ZW1lbnQpIHtcblx0ICAgIC8vIGNoZWNrIGZvciBmaWx0ZXJzLlxuXHQgICAgaWYgKGZpbHRlclJFJDEudGVzdCh0ZXh0KSkge1xuXHQgICAgICB2YXIgZGlyID0gcGFyc2VEaXJlY3RpdmUodGV4dCk7XG5cdCAgICAgIC8vIHRoZSBmaWx0ZXIgcmVnZXggY2hlY2sgbWlnaHQgZ2l2ZSBmYWxzZSBwb3NpdGl2ZVxuXHQgICAgICAvLyBmb3IgcGlwZXMgaW5zaWRlIHN0cmluZ3MsIHNvIGl0J3MgcG9zc2libGUgdGhhdFxuXHQgICAgICAvLyB3ZSBkb24ndCBnZXQgYW55IGZpbHRlcnMgaGVyZVxuXHQgICAgICB2YXIgdmFsID0gdGhpcy4kZ2V0KGRpci5leHByZXNzaW9uLCBhc1N0YXRlbWVudCk7XG5cdCAgICAgIHJldHVybiBkaXIuZmlsdGVycyA/IHRoaXMuX2FwcGx5RmlsdGVycyh2YWwsIG51bGwsIGRpci5maWx0ZXJzKSA6IHZhbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIG5vIGZpbHRlclxuXHQgICAgICByZXR1cm4gdGhpcy4kZ2V0KHRleHQsIGFzU3RhdGVtZW50KTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbnRlcnBvbGF0ZSBhIHBpZWNlIG9mIHRlbXBsYXRlIHRleHQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuXHQgICAqIEByZXR1cm4ge1N0cmluZ31cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kaW50ZXJwb2xhdGUgPSBmdW5jdGlvbiAodGV4dCkge1xuXHQgICAgdmFyIHRva2VucyA9IHBhcnNlVGV4dCh0ZXh0KTtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICBpZiAodG9rZW5zKSB7XG5cdCAgICAgIGlmICh0b2tlbnMubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgICAgcmV0dXJuIHZtLiRldmFsKHRva2Vuc1swXS52YWx1ZSkgKyAnJztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gdG9rZW5zLm1hcChmdW5jdGlvbiAodG9rZW4pIHtcblx0ICAgICAgICAgIHJldHVybiB0b2tlbi50YWcgPyB2bS4kZXZhbCh0b2tlbi52YWx1ZSkgOiB0b2tlbi52YWx1ZTtcblx0ICAgICAgICB9KS5qb2luKCcnKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIHRleHQ7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogTG9nIGluc3RhbmNlIGRhdGEgYXMgYSBwbGFpbiBKUyBvYmplY3Rcblx0ICAgKiBzbyB0aGF0IGl0IGlzIGVhc2llciB0byBpbnNwZWN0IGluIGNvbnNvbGUuXG5cdCAgICogVGhpcyBtZXRob2QgYXNzdW1lcyBjb25zb2xlIGlzIGF2YWlsYWJsZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBbcGF0aF1cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kbG9nID0gZnVuY3Rpb24gKHBhdGgpIHtcblx0ICAgIHZhciBkYXRhID0gcGF0aCA/IGdldFBhdGgodGhpcy5fZGF0YSwgcGF0aCkgOiB0aGlzLl9kYXRhO1xuXHQgICAgaWYgKGRhdGEpIHtcblx0ICAgICAgZGF0YSA9IGNsZWFuKGRhdGEpO1xuXHQgICAgfVxuXHQgICAgLy8gaW5jbHVkZSBjb21wdXRlZCBmaWVsZHNcblx0ICAgIGlmICghcGF0aCkge1xuXHQgICAgICB2YXIga2V5O1xuXHQgICAgICBmb3IgKGtleSBpbiB0aGlzLiRvcHRpb25zLmNvbXB1dGVkKSB7XG5cdCAgICAgICAgZGF0YVtrZXldID0gY2xlYW4odGhpc1trZXldKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAodGhpcy5fcHJvcHMpIHtcblx0ICAgICAgICBmb3IgKGtleSBpbiB0aGlzLl9wcm9wcykge1xuXHQgICAgICAgICAgZGF0YVtrZXldID0gY2xlYW4odGhpc1trZXldKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFwiY2xlYW5cIiBhIGdldHRlci9zZXR0ZXIgY29udmVydGVkIG9iamVjdCBpbnRvIGEgcGxhaW5cblx0ICAgKiBvYmplY3QgY29weS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSAtIG9ialxuXHQgICAqIEByZXR1cm4ge09iamVjdH1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gY2xlYW4ob2JqKSB7XG5cdCAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRvbUFQSSAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogQ29udmVuaWVuY2Ugb24taW5zdGFuY2UgbmV4dFRpY2suIFRoZSBjYWxsYmFjayBpc1xuXHQgICAqIGF1dG8tYm91bmQgdG8gdGhlIGluc3RhbmNlLCBhbmQgdGhpcyBhdm9pZHMgY29tcG9uZW50XG5cdCAgICogbW9kdWxlcyBoYXZpbmcgdG8gcmVseSBvbiB0aGUgZ2xvYmFsIFZ1ZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJG5leHRUaWNrID0gZnVuY3Rpb24gKGZuKSB7XG5cdCAgICBuZXh0VGljayhmbiwgdGhpcyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQXBwZW5kIGluc3RhbmNlIHRvIHRhcmdldFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRhcHBlbmRUbyA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuXHQgICAgcmV0dXJuIGluc2VydCh0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgYXBwZW5kLCBhcHBlbmRXaXRoVHJhbnNpdGlvbik7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUHJlcGVuZCBpbnN0YW5jZSB0byB0YXJnZXRcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kcHJlcGVuZFRvID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xuXHQgICAgaWYgKHRhcmdldC5oYXNDaGlsZE5vZGVzKCkpIHtcblx0ICAgICAgdGhpcy4kYmVmb3JlKHRhcmdldC5maXJzdENoaWxkLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy4kYXBwZW5kVG8odGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5zZXJ0IGluc3RhbmNlIGJlZm9yZSB0YXJnZXRcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kYmVmb3JlID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgICByZXR1cm4gaW5zZXJ0KHRoaXMsIHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uLCBiZWZvcmVXaXRoQ2IsIGJlZm9yZVdpdGhUcmFuc2l0aW9uKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbnNlcnQgaW5zdGFuY2UgYWZ0ZXIgdGFyZ2V0XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGFmdGVyID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xuXHQgICAgaWYgKHRhcmdldC5uZXh0U2libGluZykge1xuXHQgICAgICB0aGlzLiRiZWZvcmUodGFyZ2V0Lm5leHRTaWJsaW5nLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy4kYXBwZW5kVG8odGFyZ2V0LnBhcmVudE5vZGUsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZW1vdmUgaW5zdGFuY2UgZnJvbSBET01cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJHJlbW92ZSA9IGZ1bmN0aW9uIChjYiwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICAgIGlmICghdGhpcy4kZWwucGFyZW50Tm9kZSkge1xuXHQgICAgICByZXR1cm4gY2IgJiYgY2IoKTtcblx0ICAgIH1cblx0ICAgIHZhciBpbkRvY3VtZW50ID0gdGhpcy5faXNBdHRhY2hlZCAmJiBpbkRvYyh0aGlzLiRlbCk7XG5cdCAgICAvLyBpZiB3ZSBhcmUgbm90IGluIGRvY3VtZW50LCBubyBuZWVkIHRvIGNoZWNrXG5cdCAgICAvLyBmb3IgdHJhbnNpdGlvbnNcblx0ICAgIGlmICghaW5Eb2N1bWVudCkgd2l0aFRyYW5zaXRpb24gPSBmYWxzZTtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciByZWFsQ2IgPSBmdW5jdGlvbiByZWFsQ2IoKSB7XG5cdCAgICAgIGlmIChpbkRvY3VtZW50KSBzZWxmLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcblx0ICAgICAgaWYgKGNiKSBjYigpO1xuXHQgICAgfTtcblx0ICAgIGlmICh0aGlzLl9pc0ZyYWdtZW50KSB7XG5cdCAgICAgIHJlbW92ZU5vZGVSYW5nZSh0aGlzLl9mcmFnbWVudFN0YXJ0LCB0aGlzLl9mcmFnbWVudEVuZCwgdGhpcywgdGhpcy5fZnJhZ21lbnQsIHJlYWxDYik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgb3AgPSB3aXRoVHJhbnNpdGlvbiA9PT0gZmFsc2UgPyByZW1vdmVXaXRoQ2IgOiByZW1vdmVXaXRoVHJhbnNpdGlvbjtcblx0ICAgICAgb3AodGhpcy4kZWwsIHRoaXMsIHJlYWxDYik7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBTaGFyZWQgRE9NIGluc2VydGlvbiBmdW5jdGlvbi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXVxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMSAtIG9wIGZvciBub24tdHJhbnNpdGlvbiBpbnNlcnRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcDIgLSBvcCBmb3IgdHJhbnNpdGlvbiBpbnNlcnRcblx0ICAgKiBAcmV0dXJuIHZtXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGluc2VydCh2bSwgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIG9wMSwgb3AyKSB7XG5cdCAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xuXHQgICAgdmFyIHRhcmdldElzRGV0YWNoZWQgPSAhaW5Eb2ModGFyZ2V0KTtcblx0ICAgIHZhciBvcCA9IHdpdGhUcmFuc2l0aW9uID09PSBmYWxzZSB8fCB0YXJnZXRJc0RldGFjaGVkID8gb3AxIDogb3AyO1xuXHQgICAgdmFyIHNob3VsZENhbGxIb29rID0gIXRhcmdldElzRGV0YWNoZWQgJiYgIXZtLl9pc0F0dGFjaGVkICYmICFpbkRvYyh2bS4kZWwpO1xuXHQgICAgaWYgKHZtLl9pc0ZyYWdtZW50KSB7XG5cdCAgICAgIG1hcE5vZGVSYW5nZSh2bS5fZnJhZ21lbnRTdGFydCwgdm0uX2ZyYWdtZW50RW5kLCBmdW5jdGlvbiAobm9kZSkge1xuXHQgICAgICAgIG9wKG5vZGUsIHRhcmdldCwgdm0pO1xuXHQgICAgICB9KTtcblx0ICAgICAgY2IgJiYgY2IoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG9wKHZtLiRlbCwgdGFyZ2V0LCB2bSwgY2IpO1xuXHQgICAgfVxuXHQgICAgaWYgKHNob3VsZENhbGxIb29rKSB7XG5cdCAgICAgIHZtLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB2bTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIENoZWNrIGZvciBzZWxlY3RvcnNcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGVsXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHF1ZXJ5KGVsKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGVsID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpIDogZWw7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBBcHBlbmQgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gZWxcblx0ICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gYXBwZW5kKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuXHQgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcblx0ICAgIGlmIChjYikgY2IoKTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluc2VydEJlZm9yZSBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSBlbFxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBiZWZvcmVXaXRoQ2IoZWwsIHRhcmdldCwgdm0sIGNiKSB7XG5cdCAgICBiZWZvcmUoZWwsIHRhcmdldCk7XG5cdCAgICBpZiAoY2IpIGNiKCk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBSZW1vdmUgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gZWxcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJlbW92ZVdpdGhDYihlbCwgdm0sIGNiKSB7XG5cdCAgICByZW1vdmUoZWwpO1xuXHQgICAgaWYgKGNiKSBjYigpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZXZlbnRzQVBJIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBMaXN0ZW4gb24gdGhlIGdpdmVuIGBldmVudGAgd2l0aCBgZm5gLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kb24gPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG5cdCAgICAodGhpcy5fZXZlbnRzW2V2ZW50XSB8fCAodGhpcy5fZXZlbnRzW2V2ZW50XSA9IFtdKSkucHVzaChmbik7XG5cdCAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAxKTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEFkZHMgYW4gYGV2ZW50YCBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgaW52b2tlZCBhIHNpbmdsZVxuXHQgICAqIHRpbWUgdGhlbiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRvbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgZnVuY3Rpb24gb24oKSB7XG5cdCAgICAgIHNlbGYuJG9mZihldmVudCwgb24pO1xuXHQgICAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHQgICAgb24uZm4gPSBmbjtcblx0ICAgIHRoaXMuJG9uKGV2ZW50LCBvbik7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZW1vdmUgdGhlIGdpdmVuIGNhbGxiYWNrIGZvciBgZXZlbnRgIG9yIGFsbFxuXHQgICAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kb2ZmID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuXHQgICAgdmFyIGNicztcblx0ICAgIC8vIGFsbFxuXHQgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG5cdCAgICAgIGlmICh0aGlzLiRwYXJlbnQpIHtcblx0ICAgICAgICBmb3IgKGV2ZW50IGluIHRoaXMuX2V2ZW50cykge1xuXHQgICAgICAgICAgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcblx0ICAgICAgICAgIGlmIChjYnMpIHtcblx0ICAgICAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLWNicy5sZW5ndGgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICB0aGlzLl9ldmVudHMgPSB7fTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgICAvLyBzcGVjaWZpYyBldmVudFxuXHQgICAgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcblx0ICAgIGlmICghY2JzKSB7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLWNicy5sZW5ndGgpO1xuXHQgICAgICB0aGlzLl9ldmVudHNbZXZlbnRdID0gbnVsbDtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgICAvLyBzcGVjaWZpYyBoYW5kbGVyXG5cdCAgICB2YXIgY2I7XG5cdCAgICB2YXIgaSA9IGNicy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGNiID0gY2JzW2ldO1xuXHQgICAgICBpZiAoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbikge1xuXHQgICAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC0xKTtcblx0ICAgICAgICBjYnMuc3BsaWNlKGksIDEpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBUcmlnZ2VyIGFuIGV2ZW50IG9uIHNlbGYuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGV2ZW50XG5cdCAgICogQHJldHVybiB7Qm9vbGVhbn0gc2hvdWxkUHJvcGFnYXRlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGVtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIHZhciBpc1NvdXJjZSA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZyc7XG5cdCAgICBldmVudCA9IGlzU291cmNlID8gZXZlbnQgOiBldmVudC5uYW1lO1xuXHQgICAgdmFyIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF07XG5cdCAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gaXNTb3VyY2UgfHwgIWNicztcblx0ICAgIGlmIChjYnMpIHtcblx0ICAgICAgY2JzID0gY2JzLmxlbmd0aCA+IDEgPyB0b0FycmF5KGNicykgOiBjYnM7XG5cdCAgICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBoYWNreSBzb2x1dGlvbiB0byB0aGUgcXVlc3Rpb24gcmFpc2VkXG5cdCAgICAgIC8vIGluICMyMTAyOiBmb3IgYW4gaW5saW5lIGNvbXBvbmVudCBsaXN0ZW5lciBsaWtlIDxjb21wIEB0ZXN0PVwiZG9UaGlzXCI+LFxuXHQgICAgICAvLyB0aGUgcHJvcGFnYXRpb24gaGFuZGxpbmcgaXMgc29tZXdoYXQgYnJva2VuLiBUaGVyZWZvcmUgd2Vcblx0ICAgICAgLy8gbmVlZCB0byB0cmVhdCB0aGVzZSBpbmxpbmUgY2FsbGJhY2tzIGRpZmZlcmVudGx5LlxuXHQgICAgICB2YXIgaGFzUGFyZW50Q2JzID0gaXNTb3VyY2UgJiYgY2JzLnNvbWUoZnVuY3Rpb24gKGNiKSB7XG5cdCAgICAgICAgcmV0dXJuIGNiLl9mcm9tUGFyZW50O1xuXHQgICAgICB9KTtcblx0ICAgICAgaWYgKGhhc1BhcmVudENicykge1xuXHQgICAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICB2YXIgY2IgPSBjYnNbaV07XG5cdCAgICAgICAgdmFyIHJlcyA9IGNiLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgICAgIGlmIChyZXMgPT09IHRydWUgJiYgKCFoYXNQYXJlbnRDYnMgfHwgY2IuX2Zyb21QYXJlbnQpKSB7XG5cdCAgICAgICAgICBzaG91bGRQcm9wYWdhdGUgPSB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHNob3VsZFByb3BhZ2F0ZTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZWN1cnNpdmVseSBicm9hZGNhc3QgYW4gZXZlbnQgdG8gYWxsIGNoaWxkcmVuIGluc3RhbmNlcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gZXZlbnRcblx0ICAgKiBAcGFyYW0gey4uLip9IGFkZGl0aW9uYWwgYXJndW1lbnRzXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGJyb2FkY2FzdCA9IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgdmFyIGlzU291cmNlID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJztcblx0ICAgIGV2ZW50ID0gaXNTb3VyY2UgPyBldmVudCA6IGV2ZW50Lm5hbWU7XG5cdCAgICAvLyBpZiBubyBjaGlsZCBoYXMgcmVnaXN0ZXJlZCBmb3IgdGhpcyBldmVudCxcblx0ICAgIC8vIHRoZW4gdGhlcmUncyBubyBuZWVkIHRvIGJyb2FkY2FzdC5cblx0ICAgIGlmICghdGhpcy5fZXZlbnRzQ291bnRbZXZlbnRdKSByZXR1cm47XG5cdCAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLiRjaGlsZHJlbjtcblx0ICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO1xuXHQgICAgaWYgKGlzU291cmNlKSB7XG5cdCAgICAgIC8vIHVzZSBvYmplY3QgZXZlbnQgdG8gaW5kaWNhdGUgbm9uLXNvdXJjZSBlbWl0XG5cdCAgICAgIC8vIG9uIGNoaWxkcmVuXG5cdCAgICAgIGFyZ3NbMF0gPSB7IG5hbWU6IGV2ZW50LCBzb3VyY2U6IHRoaXMgfTtcblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuXHQgICAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gY2hpbGQuJGVtaXQuYXBwbHkoY2hpbGQsIGFyZ3MpO1xuXHQgICAgICBpZiAoc2hvdWxkUHJvcGFnYXRlKSB7XG5cdCAgICAgICAgY2hpbGQuJGJyb2FkY2FzdC5hcHBseShjaGlsZCwgYXJncyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlY3Vyc2l2ZWx5IHByb3BhZ2F0ZSBhbiBldmVudCB1cCB0aGUgcGFyZW50IGNoYWluLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAgICogQHBhcmFtIHsuLi4qfSBhZGRpdGlvbmFsIGFyZ3VtZW50c1xuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRkaXNwYXRjaCA9IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IHRoaXMuJGVtaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIGlmICghc2hvdWxkUHJvcGFnYXRlKSByZXR1cm47XG5cdCAgICB2YXIgcGFyZW50ID0gdGhpcy4kcGFyZW50O1xuXHQgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG5cdCAgICAvLyB1c2Ugb2JqZWN0IGV2ZW50IHRvIGluZGljYXRlIG5vbi1zb3VyY2UgZW1pdFxuXHQgICAgLy8gb24gcGFyZW50c1xuXHQgICAgYXJnc1swXSA9IHsgbmFtZTogZXZlbnQsIHNvdXJjZTogdGhpcyB9O1xuXHQgICAgd2hpbGUgKHBhcmVudCkge1xuXHQgICAgICBzaG91bGRQcm9wYWdhdGUgPSBwYXJlbnQuJGVtaXQuYXBwbHkocGFyZW50LCBhcmdzKTtcblx0ICAgICAgcGFyZW50ID0gc2hvdWxkUHJvcGFnYXRlID8gcGFyZW50LiRwYXJlbnQgOiBudWxsO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogTW9kaWZ5IHRoZSBsaXN0ZW5lciBjb3VudHMgb24gYWxsIHBhcmVudHMuXG5cdCAgICogVGhpcyBib29ra2VlcGluZyBhbGxvd3MgJGJyb2FkY2FzdCB0byByZXR1cm4gZWFybHkgd2hlblxuXHQgICAqIG5vIGNoaWxkIGhhcyBsaXN0ZW5lZCB0byBhIGNlcnRhaW4gZXZlbnQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gY291bnRcblx0ICAgKi9cblx0XG5cdCAgdmFyIGhvb2tSRSA9IC9eaG9vazovO1xuXHQgIGZ1bmN0aW9uIG1vZGlmeUxpc3RlbmVyQ291bnQodm0sIGV2ZW50LCBjb3VudCkge1xuXHQgICAgdmFyIHBhcmVudCA9IHZtLiRwYXJlbnQ7XG5cdCAgICAvLyBob29rcyBkbyBub3QgZ2V0IGJyb2FkY2FzdGVkIHNvIG5vIG5lZWRcblx0ICAgIC8vIHRvIGRvIGJvb2trZWVwaW5nIGZvciB0aGVtXG5cdCAgICBpZiAoIXBhcmVudCB8fCAhY291bnQgfHwgaG9va1JFLnRlc3QoZXZlbnQpKSByZXR1cm47XG5cdCAgICB3aGlsZSAocGFyZW50KSB7XG5cdCAgICAgIHBhcmVudC5fZXZlbnRzQ291bnRbZXZlbnRdID0gKHBhcmVudC5fZXZlbnRzQ291bnRbZXZlbnRdIHx8IDApICsgY291bnQ7XG5cdCAgICAgIHBhcmVudCA9IHBhcmVudC4kcGFyZW50O1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbGlmZWN5Y2xlQVBJIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBTZXQgaW5zdGFuY2UgdGFyZ2V0IGVsZW1lbnQgYW5kIGtpY2sgb2ZmIHRoZSBjb21waWxhdGlvblxuXHQgICAqIHByb2Nlc3MuIFRoZSBwYXNzZWQgaW4gYGVsYCBjYW4gYmUgYSBzZWxlY3RvciBzdHJpbmcsIGFuXG5cdCAgICogZXhpc3RpbmcgRWxlbWVudCwgb3IgYSBEb2N1bWVudEZyYWdtZW50IChmb3IgYmxvY2tcblx0ICAgKiBpbnN0YW5jZXMpLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR8c3RyaW5nfSBlbFxuXHQgICAqIEBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kbW91bnQgPSBmdW5jdGlvbiAoZWwpIHtcblx0ICAgIGlmICh0aGlzLl9pc0NvbXBpbGVkKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignJG1vdW50KCkgc2hvdWxkIGJlIGNhbGxlZCBvbmx5IG9uY2UuJywgdGhpcyk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGVsID0gcXVlcnkoZWwpO1xuXHQgICAgaWYgKCFlbCkge1xuXHQgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgfVxuXHQgICAgdGhpcy5fY29tcGlsZShlbCk7XG5cdCAgICB0aGlzLl9pbml0RE9NSG9va3MoKTtcblx0ICAgIGlmIChpbkRvYyh0aGlzLiRlbCkpIHtcblx0ICAgICAgdGhpcy5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG5cdCAgICAgIHJlYWR5LmNhbGwodGhpcyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLiRvbmNlKCdob29rOmF0dGFjaGVkJywgcmVhZHkpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogTWFyayBhbiBpbnN0YW5jZSBhcyByZWFkeS5cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVhZHkoKSB7XG5cdCAgICB0aGlzLl9pc0F0dGFjaGVkID0gdHJ1ZTtcblx0ICAgIHRoaXMuX2lzUmVhZHkgPSB0cnVlO1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ3JlYWR5Jyk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBUZWFyZG93biB0aGUgaW5zdGFuY2UsIHNpbXBseSBkZWxlZ2F0ZSB0byB0aGUgaW50ZXJuYWxcblx0ICAgKiBfZGVzdHJveS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBkZWZlckNsZWFudXBcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZGVzdHJveSA9IGZ1bmN0aW9uIChyZW1vdmUsIGRlZmVyQ2xlYW51cCkge1xuXHQgICAgdGhpcy5fZGVzdHJveShyZW1vdmUsIGRlZmVyQ2xlYW51cCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUGFydGlhbGx5IGNvbXBpbGUgYSBwaWVjZSBvZiBET00gYW5kIHJldHVybiBhXG5cdCAgICogZGVjb21waWxlIGZ1bmN0aW9uLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG5cdCAgICogQHBhcmFtIHtWdWV9IFtob3N0XVxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddXG5cdCAgICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGNvbXBpbGUgPSBmdW5jdGlvbiAoZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICByZXR1cm4gY29tcGlsZShlbCwgdGhpcy4kb3B0aW9ucywgdHJ1ZSkodGhpcywgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGhlIGV4cG9zZWQgVnVlIGNvbnN0cnVjdG9yLlxuXHQgKlxuXHQgKiBBUEkgY29udmVudGlvbnM6XG5cdCAqIC0gcHVibGljIEFQSSBtZXRob2RzL3Byb3BlcnRpZXMgYXJlIHByZWZpeGVkIHdpdGggYCRgXG5cdCAqIC0gaW50ZXJuYWwgbWV0aG9kcy9wcm9wZXJ0aWVzIGFyZSBwcmVmaXhlZCB3aXRoIGBfYFxuXHQgKiAtIG5vbi1wcmVmaXhlZCBwcm9wZXJ0aWVzIGFyZSBhc3N1bWVkIHRvIGJlIHByb3hpZWQgdXNlclxuXHQgKiAgIGRhdGEuXG5cdCAqXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBWdWUob3B0aW9ucykge1xuXHQgIHRoaXMuX2luaXQob3B0aW9ucyk7XG5cdH1cblx0XG5cdC8vIGluc3RhbGwgaW50ZXJuYWxzXG5cdGluaXRNaXhpbihWdWUpO1xuXHRzdGF0ZU1peGluKFZ1ZSk7XG5cdGV2ZW50c01peGluKFZ1ZSk7XG5cdGxpZmVjeWNsZU1peGluKFZ1ZSk7XG5cdG1pc2NNaXhpbihWdWUpO1xuXHRcblx0Ly8gaW5zdGFsbCBpbnN0YW5jZSBBUElzXG5cdGRhdGFBUEkoVnVlKTtcblx0ZG9tQVBJKFZ1ZSk7XG5cdGV2ZW50c0FQSShWdWUpO1xuXHRsaWZlY3ljbGVBUEkoVnVlKTtcblx0XG5cdHZhciBzbG90ID0ge1xuXHRcblx0ICBwcmlvcml0eTogU0xPVCxcblx0ICBwYXJhbXM6IFsnbmFtZSddLFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gdGhpcyB3YXMgcmVzb2x2ZWQgZHVyaW5nIGNvbXBvbmVudCB0cmFuc2NsdXNpb25cblx0ICAgIHZhciBuYW1lID0gdGhpcy5wYXJhbXMubmFtZSB8fCAnZGVmYXVsdCc7XG5cdCAgICB2YXIgY29udGVudCA9IHRoaXMudm0uX3Nsb3RDb250ZW50cyAmJiB0aGlzLnZtLl9zbG90Q29udGVudHNbbmFtZV07XG5cdCAgICBpZiAoIWNvbnRlbnQgfHwgIWNvbnRlbnQuaGFzQ2hpbGROb2RlcygpKSB7XG5cdCAgICAgIHRoaXMuZmFsbGJhY2soKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuY29tcGlsZShjb250ZW50LmNsb25lTm9kZSh0cnVlKSwgdGhpcy52bS5fY29udGV4dCwgdGhpcy52bSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgY29tcGlsZTogZnVuY3Rpb24gY29tcGlsZShjb250ZW50LCBjb250ZXh0LCBob3N0KSB7XG5cdCAgICBpZiAoY29udGVudCAmJiBjb250ZXh0KSB7XG5cdCAgICAgIGlmICh0aGlzLmVsLmhhc0NoaWxkTm9kZXMoKSAmJiBjb250ZW50LmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICYmIGNvbnRlbnQuY2hpbGROb2Rlc1swXS5ub2RlVHlwZSA9PT0gMSAmJiBjb250ZW50LmNoaWxkTm9kZXNbMF0uaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcblx0ICAgICAgICAvLyBpZiB0aGUgaW5zZXJ0ZWQgc2xvdCBoYXMgdi1pZlxuXHQgICAgICAgIC8vIGluamVjdCBmYWxsYmFjayBjb250ZW50IGFzIHRoZSB2LWVsc2Vcblx0ICAgICAgICB2YXIgZWxzZUJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcblx0ICAgICAgICBlbHNlQmxvY2suc2V0QXR0cmlidXRlKCd2LWVsc2UnLCAnJyk7XG5cdCAgICAgICAgZWxzZUJsb2NrLmlubmVySFRNTCA9IHRoaXMuZWwuaW5uZXJIVE1MO1xuXHQgICAgICAgIC8vIHRoZSBlbHNlIGJsb2NrIHNob3VsZCBiZSBjb21waWxlZCBpbiBjaGlsZCBzY29wZVxuXHQgICAgICAgIGVsc2VCbG9jay5fY29udGV4dCA9IHRoaXMudm07XG5cdCAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChlbHNlQmxvY2spO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBzY29wZSA9IGhvc3QgPyBob3N0Ll9zY29wZSA6IHRoaXMuX3Njb3BlO1xuXHQgICAgICB0aGlzLnVubGluayA9IGNvbnRleHQuJGNvbXBpbGUoY29udGVudCwgaG9zdCwgc2NvcGUsIHRoaXMuX2ZyYWcpO1xuXHQgICAgfVxuXHQgICAgaWYgKGNvbnRlbnQpIHtcblx0ICAgICAgcmVwbGFjZSh0aGlzLmVsLCBjb250ZW50KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJlbW92ZSh0aGlzLmVsKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBmYWxsYmFjazogZnVuY3Rpb24gZmFsbGJhY2soKSB7XG5cdCAgICB0aGlzLmNvbXBpbGUoZXh0cmFjdENvbnRlbnQodGhpcy5lbCwgdHJ1ZSksIHRoaXMudm0pO1xuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgaWYgKHRoaXMudW5saW5rKSB7XG5cdCAgICAgIHRoaXMudW5saW5rKCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHBhcnRpYWwgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBQQVJUSUFMLFxuXHRcblx0ICBwYXJhbXM6IFsnbmFtZSddLFxuXHRcblx0ICAvLyB3YXRjaCBjaGFuZ2VzIHRvIG5hbWUgZm9yIGR5bmFtaWMgcGFydGlhbHNcblx0ICBwYXJhbVdhdGNoZXJzOiB7XG5cdCAgICBuYW1lOiBmdW5jdGlvbiBuYW1lKHZhbHVlKSB7XG5cdCAgICAgIHZJZi5yZW1vdmUuY2FsbCh0aGlzKTtcblx0ICAgICAgaWYgKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5pbnNlcnQodmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LXBhcnRpYWwnKTtcblx0ICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuXHQgICAgdGhpcy5pbnNlcnQodGhpcy5wYXJhbXMubmFtZSk7XG5cdCAgfSxcblx0XG5cdCAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoaWQpIHtcblx0ICAgIHZhciBwYXJ0aWFsID0gcmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICdwYXJ0aWFscycsIGlkLCB0cnVlKTtcblx0ICAgIGlmIChwYXJ0aWFsKSB7XG5cdCAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgcGFydGlhbCk7XG5cdCAgICAgIHZJZi5pbnNlcnQuY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIGlmICh0aGlzLmZyYWcpIHtcblx0ICAgICAgdGhpcy5mcmFnLmRlc3Ryb3koKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgZWxlbWVudERpcmVjdGl2ZXMgPSB7XG5cdCAgc2xvdDogc2xvdCxcblx0ICBwYXJ0aWFsOiBwYXJ0aWFsXG5cdH07XG5cdFxuXHR2YXIgY29udmVydEFycmF5ID0gdkZvci5fcG9zdFByb2Nlc3M7XG5cdFxuXHQvKipcblx0ICogTGltaXQgZmlsdGVyIGZvciBhcnJheXNcblx0ICpcblx0ICogQHBhcmFtIHtOdW1iZXJ9IG5cblx0ICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCAoRGVjaW1hbCBleHBlY3RlZClcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBsaW1pdEJ5KGFyciwgbiwgb2Zmc2V0KSB7XG5cdCAgb2Zmc2V0ID0gb2Zmc2V0ID8gcGFyc2VJbnQob2Zmc2V0LCAxMCkgOiAwO1xuXHQgIG4gPSB0b051bWJlcihuKTtcblx0ICByZXR1cm4gdHlwZW9mIG4gPT09ICdudW1iZXInID8gYXJyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgbikgOiBhcnI7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGaWx0ZXIgZmlsdGVyIGZvciBhcnJheXNcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW2RlbGltaXRlcl1cblx0ICogQHBhcmFtIHtTdHJpbmd9IC4uLmRhdGFLZXlzXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZmlsdGVyQnkoYXJyLCBzZWFyY2gsIGRlbGltaXRlcikge1xuXHQgIGFyciA9IGNvbnZlcnRBcnJheShhcnIpO1xuXHQgIGlmIChzZWFyY2ggPT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIGFycjtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBzZWFyY2ggPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiBhcnIuZmlsdGVyKHNlYXJjaCk7XG5cdCAgfVxuXHQgIC8vIGNhc3QgdG8gbG93ZXJjYXNlIHN0cmluZ1xuXHQgIHNlYXJjaCA9ICgnJyArIHNlYXJjaCkudG9Mb3dlckNhc2UoKTtcblx0ICAvLyBhbGxvdyBvcHRpb25hbCBgaW5gIGRlbGltaXRlclxuXHQgIC8vIGJlY2F1c2Ugd2h5IG5vdFxuXHQgIHZhciBuID0gZGVsaW1pdGVyID09PSAnaW4nID8gMyA6IDI7XG5cdCAgLy8gZXh0cmFjdCBhbmQgZmxhdHRlbiBrZXlzXG5cdCAgdmFyIGtleXMgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCB0b0FycmF5KGFyZ3VtZW50cywgbikpO1xuXHQgIHZhciByZXMgPSBbXTtcblx0ICB2YXIgaXRlbSwga2V5LCB2YWwsIGo7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcnIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBpdGVtID0gYXJyW2ldO1xuXHQgICAgdmFsID0gaXRlbSAmJiBpdGVtLiR2YWx1ZSB8fCBpdGVtO1xuXHQgICAgaiA9IGtleXMubGVuZ3RoO1xuXHQgICAgaWYgKGopIHtcblx0ICAgICAgd2hpbGUgKGotLSkge1xuXHQgICAgICAgIGtleSA9IGtleXNbal07XG5cdCAgICAgICAgaWYgKGtleSA9PT0gJyRrZXknICYmIGNvbnRhaW5zKGl0ZW0uJGtleSwgc2VhcmNoKSB8fCBjb250YWlucyhnZXRQYXRoKHZhbCwga2V5KSwgc2VhcmNoKSkge1xuXHQgICAgICAgICAgcmVzLnB1c2goaXRlbSk7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoY29udGFpbnMoaXRlbSwgc2VhcmNoKSkge1xuXHQgICAgICByZXMucHVzaChpdGVtKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZpbHRlciBmaWx0ZXIgZm9yIGFycmF5c1xuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ3xBcnJheTxTdHJpbmc+fEZ1bmN0aW9ufSAuLi5zb3J0S2V5c1xuXHQgKiBAcGFyYW0ge051bWJlcn0gW29yZGVyXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG9yZGVyQnkoYXJyKSB7XG5cdCAgdmFyIGNvbXBhcmF0b3IgPSBudWxsO1xuXHQgIHZhciBzb3J0S2V5cyA9IHVuZGVmaW5lZDtcblx0ICBhcnIgPSBjb252ZXJ0QXJyYXkoYXJyKTtcblx0XG5cdCAgLy8gZGV0ZXJtaW5lIG9yZGVyIChsYXN0IGFyZ3VtZW50KVxuXHQgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuXHQgIHZhciBvcmRlciA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcblx0ICBpZiAodHlwZW9mIG9yZGVyID09PSAnbnVtYmVyJykge1xuXHQgICAgb3JkZXIgPSBvcmRlciA8IDAgPyAtMSA6IDE7XG5cdCAgICBhcmdzID0gYXJncy5sZW5ndGggPiAxID8gYXJncy5zbGljZSgwLCAtMSkgOiBhcmdzO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBvcmRlciA9IDE7XG5cdCAgfVxuXHRcblx0ICAvLyBkZXRlcm1pbmUgc29ydEtleXMgJiBjb21wYXJhdG9yXG5cdCAgdmFyIGZpcnN0QXJnID0gYXJnc1swXTtcblx0ICBpZiAoIWZpcnN0QXJnKSB7XG5cdCAgICByZXR1cm4gYXJyO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGZpcnN0QXJnID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAvLyBjdXN0b20gY29tcGFyYXRvclxuXHQgICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uIChhLCBiKSB7XG5cdCAgICAgIHJldHVybiBmaXJzdEFyZyhhLCBiKSAqIG9yZGVyO1xuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gc3RyaW5nIGtleXMuIGZsYXR0ZW4gZmlyc3Rcblx0ICAgIHNvcnRLZXlzID0gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgYXJncyk7XG5cdCAgICBjb21wYXJhdG9yID0gZnVuY3Rpb24gKGEsIGIsIGkpIHtcblx0ICAgICAgaSA9IGkgfHwgMDtcblx0ICAgICAgcmV0dXJuIGkgPj0gc29ydEtleXMubGVuZ3RoIC0gMSA/IGJhc2VDb21wYXJlKGEsIGIsIGkpIDogYmFzZUNvbXBhcmUoYSwgYiwgaSkgfHwgY29tcGFyYXRvcihhLCBiLCBpICsgMSk7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gYmFzZUNvbXBhcmUoYSwgYiwgc29ydEtleUluZGV4KSB7XG5cdCAgICB2YXIgc29ydEtleSA9IHNvcnRLZXlzW3NvcnRLZXlJbmRleF07XG5cdCAgICBpZiAoc29ydEtleSkge1xuXHQgICAgICBpZiAoc29ydEtleSAhPT0gJyRrZXknKSB7XG5cdCAgICAgICAgaWYgKGlzT2JqZWN0KGEpICYmICckdmFsdWUnIGluIGEpIGEgPSBhLiR2YWx1ZTtcblx0ICAgICAgICBpZiAoaXNPYmplY3QoYikgJiYgJyR2YWx1ZScgaW4gYikgYiA9IGIuJHZhbHVlO1xuXHQgICAgICB9XG5cdCAgICAgIGEgPSBpc09iamVjdChhKSA/IGdldFBhdGgoYSwgc29ydEtleSkgOiBhO1xuXHQgICAgICBiID0gaXNPYmplY3QoYikgPyBnZXRQYXRoKGIsIHNvcnRLZXkpIDogYjtcblx0ICAgIH1cblx0ICAgIHJldHVybiBhID09PSBiID8gMCA6IGEgPiBiID8gb3JkZXIgOiAtb3JkZXI7XG5cdCAgfVxuXHRcblx0ICAvLyBzb3J0IG9uIGEgY29weSB0byBhdm9pZCBtdXRhdGluZyBvcmlnaW5hbCBhcnJheVxuXHQgIHJldHVybiBhcnIuc2xpY2UoKS5zb3J0KGNvbXBhcmF0b3IpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU3RyaW5nIGNvbnRhaW4gaGVscGVyXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb250YWlucyh2YWwsIHNlYXJjaCkge1xuXHQgIHZhciBpO1xuXHQgIGlmIChpc1BsYWluT2JqZWN0KHZhbCkpIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsKTtcblx0ICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgaWYgKGNvbnRhaW5zKHZhbFtrZXlzW2ldXSwgc2VhcmNoKSkge1xuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChpc0FycmF5KHZhbCkpIHtcblx0ICAgIGkgPSB2YWwubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBpZiAoY29udGFpbnModmFsW2ldLCBzZWFyY2gpKSB7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHZhbCAhPSBudWxsKSB7XG5cdCAgICByZXR1cm4gdmFsLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlYXJjaCkgPiAtMTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBkaWdpdHNSRSA9IC8oXFxkezN9KSg/PVxcZCkvZztcblx0XG5cdC8vIGFzc2V0IGNvbGxlY3Rpb25zIG11c3QgYmUgYSBwbGFpbiBvYmplY3QuXG5cdHZhciBmaWx0ZXJzID0ge1xuXHRcblx0ICBvcmRlckJ5OiBvcmRlckJ5LFxuXHQgIGZpbHRlckJ5OiBmaWx0ZXJCeSxcblx0ICBsaW1pdEJ5OiBsaW1pdEJ5LFxuXHRcblx0ICAvKipcblx0ICAgKiBTdHJpbmdpZnkgdmFsdWUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZW50XG5cdCAgICovXG5cdFxuXHQgIGpzb246IHtcblx0ICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQodmFsdWUsIGluZGVudCkge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogSlNPTi5zdHJpbmdpZnkodmFsdWUsIG51bGwsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gaW5kZW50IDogMik7XG5cdCAgICB9LFxuXHQgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKHZhbHVlKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgcmV0dXJuIHZhbHVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogJ2FiYycgPT4gJ0FiYydcblx0ICAgKi9cblx0XG5cdCAgY2FwaXRhbGl6ZTogZnVuY3Rpb24gY2FwaXRhbGl6ZSh2YWx1ZSkge1xuXHQgICAgaWYgKCF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkgcmV0dXJuICcnO1xuXHQgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuXHQgICAgcmV0dXJuIHZhbHVlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdmFsdWUuc2xpY2UoMSk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogJ2FiYycgPT4gJ0FCQydcblx0ICAgKi9cblx0XG5cdCAgdXBwZXJjYXNlOiBmdW5jdGlvbiB1cHBlcmNhc2UodmFsdWUpIHtcblx0ICAgIHJldHVybiB2YWx1ZSB8fCB2YWx1ZSA9PT0gMCA/IHZhbHVlLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKSA6ICcnO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqICdBYkMnID0+ICdhYmMnXG5cdCAgICovXG5cdFxuXHQgIGxvd2VyY2FzZTogZnVuY3Rpb24gbG93ZXJjYXNlKHZhbHVlKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgfHwgdmFsdWUgPT09IDAgPyB2YWx1ZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkgOiAnJztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiAxMjM0NSA9PiAkMTIsMzQ1LjAwXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gc2lnblxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBkZWNpbWFscyBEZWNpbWFsIHBsYWNlc1xuXHQgICAqL1xuXHRcblx0ICBjdXJyZW5jeTogZnVuY3Rpb24gY3VycmVuY3kodmFsdWUsIF9jdXJyZW5jeSwgZGVjaW1hbHMpIHtcblx0ICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG5cdCAgICBpZiAoIWlzRmluaXRlKHZhbHVlKSB8fCAhdmFsdWUgJiYgdmFsdWUgIT09IDApIHJldHVybiAnJztcblx0ICAgIF9jdXJyZW5jeSA9IF9jdXJyZW5jeSAhPSBudWxsID8gX2N1cnJlbmN5IDogJyQnO1xuXHQgICAgZGVjaW1hbHMgPSBkZWNpbWFscyAhPSBudWxsID8gZGVjaW1hbHMgOiAyO1xuXHQgICAgdmFyIHN0cmluZ2lmaWVkID0gTWF0aC5hYnModmFsdWUpLnRvRml4ZWQoZGVjaW1hbHMpO1xuXHQgICAgdmFyIF9pbnQgPSBkZWNpbWFscyA/IHN0cmluZ2lmaWVkLnNsaWNlKDAsIC0xIC0gZGVjaW1hbHMpIDogc3RyaW5naWZpZWQ7XG5cdCAgICB2YXIgaSA9IF9pbnQubGVuZ3RoICUgMztcblx0ICAgIHZhciBoZWFkID0gaSA+IDAgPyBfaW50LnNsaWNlKDAsIGkpICsgKF9pbnQubGVuZ3RoID4gMyA/ICcsJyA6ICcnKSA6ICcnO1xuXHQgICAgdmFyIF9mbG9hdCA9IGRlY2ltYWxzID8gc3RyaW5naWZpZWQuc2xpY2UoLTEgLSBkZWNpbWFscykgOiAnJztcblx0ICAgIHZhciBzaWduID0gdmFsdWUgPCAwID8gJy0nIDogJyc7XG5cdCAgICByZXR1cm4gc2lnbiArIF9jdXJyZW5jeSArIGhlYWQgKyBfaW50LnNsaWNlKGkpLnJlcGxhY2UoZGlnaXRzUkUsICckMSwnKSArIF9mbG9hdDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiAnaXRlbScgPT4gJ2l0ZW1zJ1xuXHQgICAqXG5cdCAgICogQHBhcmFtc1xuXHQgICAqICBhbiBhcnJheSBvZiBzdHJpbmdzIGNvcnJlc3BvbmRpbmcgdG9cblx0ICAgKiAgdGhlIHNpbmdsZSwgZG91YmxlLCB0cmlwbGUgLi4uIGZvcm1zIG9mIHRoZSB3b3JkIHRvXG5cdCAgICogIGJlIHBsdXJhbGl6ZWQuIFdoZW4gdGhlIG51bWJlciB0byBiZSBwbHVyYWxpemVkXG5cdCAgICogIGV4Y2VlZHMgdGhlIGxlbmd0aCBvZiB0aGUgYXJncywgaXQgd2lsbCB1c2UgdGhlIGxhc3Rcblx0ICAgKiAgZW50cnkgaW4gdGhlIGFycmF5LlxuXHQgICAqXG5cdCAgICogIGUuZy4gWydzaW5nbGUnLCAnZG91YmxlJywgJ3RyaXBsZScsICdtdWx0aXBsZSddXG5cdCAgICovXG5cdFxuXHQgIHBsdXJhbGl6ZTogZnVuY3Rpb24gcGx1cmFsaXplKHZhbHVlKSB7XG5cdCAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcblx0ICAgIHZhciBsZW5ndGggPSBhcmdzLmxlbmd0aDtcblx0ICAgIGlmIChsZW5ndGggPiAxKSB7XG5cdCAgICAgIHZhciBpbmRleCA9IHZhbHVlICUgMTAgLSAxO1xuXHQgICAgICByZXR1cm4gaW5kZXggaW4gYXJncyA/IGFyZ3NbaW5kZXhdIDogYXJnc1tsZW5ndGggLSAxXTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBhcmdzWzBdICsgKHZhbHVlID09PSAxID8gJycgOiAncycpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIERlYm91bmNlIGEgaGFuZGxlciBmdW5jdGlvbi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gZGVsYXkgPSAzMDBcblx0ICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICAgKi9cblx0XG5cdCAgZGVib3VuY2U6IGZ1bmN0aW9uIGRlYm91bmNlKGhhbmRsZXIsIGRlbGF5KSB7XG5cdCAgICBpZiAoIWhhbmRsZXIpIHJldHVybjtcblx0ICAgIGlmICghZGVsYXkpIHtcblx0ICAgICAgZGVsYXkgPSAzMDA7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gX2RlYm91bmNlKGhhbmRsZXIsIGRlbGF5KTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBpbnN0YWxsR2xvYmFsQVBJIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBWdWUgYW5kIGV2ZXJ5IGNvbnN0cnVjdG9yIHRoYXQgZXh0ZW5kcyBWdWUgaGFzIGFuXG5cdCAgICogYXNzb2NpYXRlZCBvcHRpb25zIG9iamVjdCwgd2hpY2ggY2FuIGJlIGFjY2Vzc2VkIGR1cmluZ1xuXHQgICAqIGNvbXBpbGF0aW9uIHN0ZXBzIGFzIGB0aGlzLmNvbnN0cnVjdG9yLm9wdGlvbnNgLlxuXHQgICAqXG5cdCAgICogVGhlc2UgY2FuIGJlIHNlZW4gYXMgdGhlIGRlZmF1bHQgb3B0aW9ucyBvZiBldmVyeVxuXHQgICAqIFZ1ZSBpbnN0YW5jZS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLm9wdGlvbnMgPSB7XG5cdCAgICBkaXJlY3RpdmVzOiBkaXJlY3RpdmVzLFxuXHQgICAgZWxlbWVudERpcmVjdGl2ZXM6IGVsZW1lbnREaXJlY3RpdmVzLFxuXHQgICAgZmlsdGVyczogZmlsdGVycyxcblx0ICAgIHRyYW5zaXRpb25zOiB7fSxcblx0ICAgIGNvbXBvbmVudHM6IHt9LFxuXHQgICAgcGFydGlhbHM6IHt9LFxuXHQgICAgcmVwbGFjZTogdHJ1ZVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEV4cG9zZSB1c2VmdWwgaW50ZXJuYWxzXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS51dGlsID0gdXRpbDtcblx0ICBWdWUuY29uZmlnID0gY29uZmlnO1xuXHQgIFZ1ZS5zZXQgPSBzZXQ7XG5cdCAgVnVlWydkZWxldGUnXSA9IGRlbDtcblx0ICBWdWUubmV4dFRpY2sgPSBuZXh0VGljaztcblx0XG5cdCAgLyoqXG5cdCAgICogVGhlIGZvbGxvd2luZyBhcmUgZXhwb3NlZCBmb3IgYWR2YW5jZWQgdXNhZ2UgLyBwbHVnaW5zXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5jb21waWxlciA9IGNvbXBpbGVyO1xuXHQgIFZ1ZS5GcmFnbWVudEZhY3RvcnkgPSBGcmFnbWVudEZhY3Rvcnk7XG5cdCAgVnVlLmludGVybmFsRGlyZWN0aXZlcyA9IGludGVybmFsRGlyZWN0aXZlcztcblx0ICBWdWUucGFyc2VycyA9IHtcblx0ICAgIHBhdGg6IHBhdGgsXG5cdCAgICB0ZXh0OiB0ZXh0LFxuXHQgICAgdGVtcGxhdGU6IHRlbXBsYXRlLFxuXHQgICAgZGlyZWN0aXZlOiBkaXJlY3RpdmUsXG5cdCAgICBleHByZXNzaW9uOiBleHByZXNzaW9uXG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogRWFjaCBpbnN0YW5jZSBjb25zdHJ1Y3RvciwgaW5jbHVkaW5nIFZ1ZSwgaGFzIGEgdW5pcXVlXG5cdCAgICogY2lkLiBUaGlzIGVuYWJsZXMgdXMgdG8gY3JlYXRlIHdyYXBwZWQgXCJjaGlsZFxuXHQgICAqIGNvbnN0cnVjdG9yc1wiIGZvciBwcm90b3R5cGFsIGluaGVyaXRhbmNlIGFuZCBjYWNoZSB0aGVtLlxuXHQgICAqL1xuXHRcblx0ICBWdWUuY2lkID0gMDtcblx0ICB2YXIgY2lkID0gMTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ2xhc3MgaW5oZXJpdGFuY2Vcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBleHRlbmRPcHRpb25zXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5leHRlbmQgPSBmdW5jdGlvbiAoZXh0ZW5kT3B0aW9ucykge1xuXHQgICAgZXh0ZW5kT3B0aW9ucyA9IGV4dGVuZE9wdGlvbnMgfHwge307XG5cdCAgICB2YXIgU3VwZXIgPSB0aGlzO1xuXHQgICAgdmFyIGlzRmlyc3RFeHRlbmQgPSBTdXBlci5jaWQgPT09IDA7XG5cdCAgICBpZiAoaXNGaXJzdEV4dGVuZCAmJiBleHRlbmRPcHRpb25zLl9DdG9yKSB7XG5cdCAgICAgIHJldHVybiBleHRlbmRPcHRpb25zLl9DdG9yO1xuXHQgICAgfVxuXHQgICAgdmFyIG5hbWUgPSBleHRlbmRPcHRpb25zLm5hbWUgfHwgU3VwZXIub3B0aW9ucy5uYW1lO1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgaWYgKCEvXlthLXpBLVpdW1xcdy1dKiQvLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICB3YXJuKCdJbnZhbGlkIGNvbXBvbmVudCBuYW1lOiBcIicgKyBuYW1lICsgJ1wiLiBDb21wb25lbnQgbmFtZXMgJyArICdjYW4gb25seSBjb250YWluIGFscGhhbnVtZXJpYyBjaGFyYWNhdGVycyBhbmQgdGhlIGh5cGhlbi4nKTtcblx0ICAgICAgICBuYW1lID0gbnVsbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdmFyIFN1YiA9IGNyZWF0ZUNsYXNzKG5hbWUgfHwgJ1Z1ZUNvbXBvbmVudCcpO1xuXHQgICAgU3ViLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3VwZXIucHJvdG90eXBlKTtcblx0ICAgIFN1Yi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdWI7XG5cdCAgICBTdWIuY2lkID0gY2lkKys7XG5cdCAgICBTdWIub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhTdXBlci5vcHRpb25zLCBleHRlbmRPcHRpb25zKTtcblx0ICAgIFN1Ylsnc3VwZXInXSA9IFN1cGVyO1xuXHQgICAgLy8gYWxsb3cgZnVydGhlciBleHRlbnNpb25cblx0ICAgIFN1Yi5leHRlbmQgPSBTdXBlci5leHRlbmQ7XG5cdCAgICAvLyBjcmVhdGUgYXNzZXQgcmVnaXN0ZXJzLCBzbyBleHRlbmRlZCBjbGFzc2VzXG5cdCAgICAvLyBjYW4gaGF2ZSB0aGVpciBwcml2YXRlIGFzc2V0cyB0b28uXG5cdCAgICBjb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuXHQgICAgICBTdWJbdHlwZV0gPSBTdXBlclt0eXBlXTtcblx0ICAgIH0pO1xuXHQgICAgLy8gZW5hYmxlIHJlY3Vyc2l2ZSBzZWxmLWxvb2t1cFxuXHQgICAgaWYgKG5hbWUpIHtcblx0ICAgICAgU3ViLm9wdGlvbnMuY29tcG9uZW50c1tuYW1lXSA9IFN1Yjtcblx0ICAgIH1cblx0ICAgIC8vIGNhY2hlIGNvbnN0cnVjdG9yXG5cdCAgICBpZiAoaXNGaXJzdEV4dGVuZCkge1xuXHQgICAgICBleHRlbmRPcHRpb25zLl9DdG9yID0gU3ViO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIFN1Yjtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHN1Yi1jbGFzcyBjb25zdHJ1Y3RvciB3aXRoIHRoZVxuXHQgICAqIGdpdmVuIG5hbWUuIFRoaXMgZ2l2ZXMgdXMgbXVjaCBuaWNlciBvdXRwdXQgd2hlblxuXHQgICAqIGxvZ2dpbmcgaW5zdGFuY2VzIGluIHRoZSBjb25zb2xlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gY3JlYXRlQ2xhc3MobmFtZSkge1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgbm8tbmV3LWZ1bmMgKi9cblx0ICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ3JldHVybiBmdW5jdGlvbiAnICsgY2xhc3NpZnkobmFtZSkgKyAnIChvcHRpb25zKSB7IHRoaXMuX2luaXQob3B0aW9ucykgfScpKCk7XG5cdCAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLW5ldy1mdW5jICovXG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBQbHVnaW4gc3lzdGVtXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gcGx1Z2luXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS51c2UgPSBmdW5jdGlvbiAocGx1Z2luKSB7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmIChwbHVnaW4uaW5zdGFsbGVkKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIC8vIGFkZGl0aW9uYWwgcGFyYW1ldGVyc1xuXHQgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG5cdCAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG5cdCAgICBpZiAodHlwZW9mIHBsdWdpbi5pbnN0YWxsID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHBsdWdpbi5pbnN0YWxsLmFwcGx5KHBsdWdpbiwgYXJncyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBwbHVnaW4uYXBwbHkobnVsbCwgYXJncyk7XG5cdCAgICB9XG5cdCAgICBwbHVnaW4uaW5zdGFsbGVkID0gdHJ1ZTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEFwcGx5IGEgZ2xvYmFsIG1peGluIGJ5IG1lcmdpbmcgaXQgaW50byB0aGUgZGVmYXVsdFxuXHQgICAqIG9wdGlvbnMuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5taXhpbiA9IGZ1bmN0aW9uIChtaXhpbikge1xuXHQgICAgVnVlLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoVnVlLm9wdGlvbnMsIG1peGluKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGUgYXNzZXQgcmVnaXN0cmF0aW9uIG1ldGhvZHMgd2l0aCB0aGUgZm9sbG93aW5nXG5cdCAgICogc2lnbmF0dXJlOlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGlkXG5cdCAgICogQHBhcmFtIHsqfSBkZWZpbml0aW9uXG5cdCAgICovXG5cdFxuXHQgIGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgICBWdWVbdHlwZV0gPSBmdW5jdGlvbiAoaWQsIGRlZmluaXRpb24pIHtcblx0ICAgICAgaWYgKCFkZWZpbml0aW9uKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF07XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiAoY29tbW9uVGFnUkUudGVzdChpZCkgfHwgcmVzZXJ2ZWRUYWdSRS50ZXN0KGlkKSkpIHtcblx0ICAgICAgICAgICAgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCAnICsgJ2lkOiAnICsgaWQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgaXNQbGFpbk9iamVjdChkZWZpbml0aW9uKSkge1xuXHQgICAgICAgICAgaWYgKCFkZWZpbml0aW9uLm5hbWUpIHtcblx0ICAgICAgICAgICAgZGVmaW5pdGlvbi5uYW1lID0gaWQ7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBkZWZpbml0aW9uID0gVnVlLmV4dGVuZChkZWZpbml0aW9uKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXSA9IGRlZmluaXRpb247XG5cdCAgICAgICAgcmV0dXJuIGRlZmluaXRpb247XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfSk7XG5cdFxuXHQgIC8vIGV4cG9zZSBpbnRlcm5hbCB0cmFuc2l0aW9uIEFQSVxuXHQgIGV4dGVuZChWdWUudHJhbnNpdGlvbiwgdHJhbnNpdGlvbik7XG5cdH1cblx0XG5cdGluc3RhbGxHbG9iYWxBUEkoVnVlKTtcblx0XG5cdFZ1ZS52ZXJzaW9uID0gJzEuMC4yNic7XG5cdFxuXHQvLyBkZXZ0b29scyBnbG9iYWwgaG9va1xuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICBpZiAoY29uZmlnLmRldnRvb2xzKSB7XG5cdCAgICBpZiAoZGV2dG9vbHMpIHtcblx0ICAgICAgZGV2dG9vbHMuZW1pdCgnaW5pdCcsIFZ1ZSk7XG5cdCAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgaW5Ccm93c2VyICYmIC9DaHJvbWVcXC9cXGQrLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSkge1xuXHQgICAgICBjb25zb2xlLmxvZygnRG93bmxvYWQgdGhlIFZ1ZSBEZXZ0b29scyBmb3IgYSBiZXR0ZXIgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZTpcXG4nICsgJ2h0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtZGV2dG9vbHMnKTtcblx0ICAgIH1cblx0ICB9XG5cdH0sIDApO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBWdWU7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KSkpXG5cbi8qKiovIH0sXG4vKiA0NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0Ly8gPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL2NvbXBvbmVudHMvdWkvaWNvbic7XG5cdC8vICAgICBAaW1wb3J0ICcuL2FwaS10YWJsZSc7XG5cdC8vIDwvc3R5bGU+XG5cdC8vXG5cdC8vIDx0ZW1wbGF0ZSBzcmM9XCIuL2FwaS10YWJsZS5odG1sXCI+PC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIHByb3BzOiB7XG5cdCAgICBpdGVtczoge1xuXHQgICAgICB0eXBlOiBBcnJheVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblxuLyoqKi8gfSxcbi8qIDQ1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0Ly8gPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuXHQvLyAgICAgQGltcG9ydCAnLi9zaWRlLW5hdic7XG5cdC8vIDwvc3R5bGU+XG5cdC8vXG5cdC8vIDx0ZW1wbGF0ZSBzcmM9XCIuL3NpZGUtbmF2Lmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHR2YXIgY2xhc3NOYW1lID0gJ2h5X3UtaGlkZSc7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBtZXRob2RzOiB7XG5cdCAgICBzaG93TmF2OiBmdW5jdGlvbiBzaG93TmF2KCkge1xuXHQgICAgICB0aGlzLiRlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG5cdCAgICB9LFxuXHQgICAgaGlkZU5hdjogZnVuY3Rpb24gaGlkZU5hdigpIHtcblx0ICAgICAgdmFyIGNsYXNzZXMgPSB0aGlzLiRlbC5jbGFzc05hbWUuc3BsaXQoJyAnKTtcblx0ICAgICAgY2xhc3Nlcy5wdXNoKGNsYXNzTmFtZSk7XG5cdCAgICAgIHRoaXMuJGVsLmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbignICcpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgZXZlbnRzOiB7XG5cdCAgICAndG9nZ2xlOjpzaXRlTmF2JzogZnVuY3Rpb24gdG9nZ2xlU2l0ZU5hdigpIHtcblx0ICAgICAgaWYgKHRoaXMuJGVsLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG5cdCAgICAgICAgdGhpcy5zaG93TmF2KCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5oaWRlTmF2KCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA0NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vc2l0ZS1oZWFkZXInO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi9zaXRlLWhlYWRlci5odG1sXCI+PC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIG1ldGhvZHM6IHtcblx0ICAgIHRvZ2dsZU5hdjogZnVuY3Rpb24gdG9nZ2xlTmF2KCkge1xuXHQgICAgICB0aGlzLiRyb290LiRicm9hZGNhc3QoJ3RvZ2dsZTo6c2l0ZU5hdicpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblxuLyoqKi8gfSxcbi8qIDQ3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGNvbXBvbmVudHM6IHtcblx0ICAgIEFwaVRhYmxlOiBfaW5kZXgyLmRlZmF1bHRcblx0ICB9LFxuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBkaXNtaXNzQ2FsbEJhY2s6IGZ1bmN0aW9uIGRpc21pc3NDYWxsQmFjaygpIHtcblx0ICAgICAgICBjb25zb2xlLmxvZygnYWxlcnQhISEnKTtcblx0ICAgICAgfSxcblx0XG5cdCAgICAgIGFwaUl0ZW1zOiBbe1xuXHQgICAgICAgIG5hbWU6ICd0eXBlJyxcblx0ICAgICAgICB0eXBlOiAnU3RyaW5nJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICdUaGUgdHlwZSBvZiBhbGVydCAoZXJyb3IsIGluZm8sIHN1Y2Nlc3MpJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ2Rpc21pc3NpYmxlJyxcblx0ICAgICAgICB0eXBlOiAnQm9vbGVhbicsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG5cdCAgICAgICAgZGVmYXVsdDogdHJ1ZSxcblx0ICAgICAgICBkZXNjOiAnSXMgdGhlIGFsZXJ0IGRpc21pc3NpYmxlPydcblx0ICAgICAgfSwge1xuXHQgICAgICAgIG5hbWU6ICd0aW1lb3V0Jyxcblx0ICAgICAgICB0eXBlOiAnTnVtYmVyJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcblx0ICAgICAgICBkZWZhdWx0OiAtMSxcblx0ICAgICAgICBkZXNjOiAnVGhlIGR1cmF0aW9uIGFsZXJ0IHN0YXlzIG9uIHNjcmVlbiBpbiBtcydcblx0ICAgICAgfSwge1xuXHQgICAgICAgIG5hbWU6ICdvbkNsb3NlZCcsXG5cdCAgICAgICAgdHlwZTogJ0Z1bmN0aW9uJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAnQ2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gYWxlcnQgaXMgY2xvc2VkLidcblx0ICAgICAgfV1cblx0ICAgIH07XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXHQvLyA8dGVtcGxhdGU+XG5cdC8vICAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cblx0Ly8gICAgPGRpdiBjbGFzcz1cImh5X28td3JhcHBlclwiPlxuXHQvLyAgICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+QWxlcnQ8L2gyPlxuXHQvLyAgICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuXHQvLyAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuXHQvLyAgICAgICAgICAgIDxhbGVydCB0eXBlPVwiZXJyb3JcIj5UaGlzIGlzIGFuIGVycm9yIGFsZXJ0LjwvYWxlcnQ+XG5cdC8vICAgICAgICAgICAgPGFsZXJ0IHR5cGU9XCJpbmZvXCI+VGhpcyBpcyBhbiBpbmZvIGFsZXJ0LjwvYWxlcnQ+XG5cdC8vICAgICAgICAgICAgPGFsZXJ0IHR5cGU9XCJzdWNjZXNzXCI+VGhpcyBpcyBhIHN1Y2Nlc3MgYWxlcnQuPC9hbGVydD5cblx0Ly8gICAgICAgICAgICA8YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIiA6ZGlzbWlzc2libGU9XCJmYWxzZVwiPlRoaXMgaXMgbm90IGEgZGlzbWlzc2libGUgYWxlcnQuPC9hbGVydD5cblx0Ly8gICAgICAgICAgICA8YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIiA6b24tY2xvc2VkPVwiZGlzbWlzc0NhbGxCYWNrXCI+VGhpcyBpcyBhbiBhbGVydCB3aXRoIGNhbGxiYWNrLjwvYWxlcnQ+XG5cdC8vICAgICAgICAgICAgPGFsZXJ0IHR5cGU9XCJpbmZvXCIgOnRpbWVvdXQ9XCI1MDAwXCI+VGhpcyBhbGVydCBzaG91bGQgdGltZW91dCBpbiA1IHNlY29uZHMuPC9hbGVydD5cblx0Ly8gICAgICAgICAgPC9kaXY+XG5cdC8vICAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cblx0Ly8gICAgICAgICAgICA8cHJlPlxuXHQvLyAgICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG5cdC8vICZsdDthbGVydCB0eXBlPVwiZXJyb3JcIiZndDtUaGlzIGlzIGFuIGVycm9yIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XG5cdC8vICZsdDthbGVydCB0eXBlPVwiaW5mb1wiJmd0O1RoaXMgaXMgYW4gaW5mbyBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xuXHQvLyAmbHQ7YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIiZndDtUaGlzIGlzIGEgc3VjY2VzcyBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xuXHQvLyAmbHQ7YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIiA6ZGlzbWlzc2libGU9XCJmYWxzZVwiJmd0O1RoaXMgaXMgbm90IGEgZGlzbWlzc2libGUgYWxlcnQuJmx0Oy9hbGVydCZndDtcblx0Ly8gJmx0O2FsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOm9uLWNsb3NlZD1cImRpc21pc3NDYWxsQmFja1wiJmd0O1RoaXMgaXMgYW4gYWxlcnQgd2l0aCBjYWxsYmFjay4mbHQ7L2FsZXJ0Jmd0O1xuXHQvLyAmbHQ7YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIiA6dGltZW91dD1cIjUwMDBcIiZndDtUaGlzIGFsZXJ0IHNob3VsZCB0aW1lb3V0IGluIDUgc2Vjb25kcy4mbHQ7L2FsZXJ0Jmd0O1xuXHQvLyAgICAgICAgICAgICAgPC9jb2RlPlxuXHQvLyAgICAgICAgICAgIDwvcHJlPlxuXHQvLyAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk8L2gzPlxuXHQvLyAgICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly9cblx0Ly8gICAgPC9kaXY+XG5cdC8vICAgPC9zZWN0aW9uPlxuXHQvLyA8L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXG4vKioqLyB9LFxuLyogNDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgY29tcG9uZW50czoge1xuXHQgICAgQXBpVGFibGU6IF9pbmRleDIuZGVmYXVsdFxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGFwaUl0ZW1zOiBbe1xuXHQgICAgICAgIG5hbWU6ICdsYWJlbCcsXG5cdCAgICAgICAgdHlwZTogJ1N0cmluZycsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAnVGhlIGxhYmxlIG9mIHRoZSBwYW5lbCdcblx0ICAgICAgfSwge1xuXHQgICAgICAgIG5hbWU6ICdpc09wZW4nLFxuXHQgICAgICAgIHR5cGU6ICdCb29sZWFuJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcblx0ICAgICAgICBkZWZhdWx0OiBmYWxzZSxcblx0ICAgICAgICBkZXNjOiAnSXMgdGhlIHBhbmVsIG9wZW4uJ1xuXHQgICAgICB9XVxuXHQgICAgfTtcblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cdC8vIDx0ZW1wbGF0ZT5cblx0Ly8gICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuXHQvLyAgICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG5cdC8vICAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5Db2xsYXBzYWJsZSBQYW5lbDwvaDI+XG5cdC8vICAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG5cdC8vICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG5cdC8vICAgICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiUGFuZWwgMVwiIDppcy1vcGVuPVwidHJ1ZVwiPlxuXHQvLyAgICAgICAgICAgICBQYW5lbCAxIGNvbnRlbnRcblx0Ly8gICAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvL1xuXHQvLyAgICAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIlBhbmVsIDJcIj5cblx0Ly8gICAgICAgICAgICAgUGFuZWwgMiBjb250ZW50XG5cdC8vICAgICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cblx0Ly8gICAgICAgICAgPC9kaXY+XG5cdC8vICAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cblx0Ly8gICAgICAgICAgICA8cHJlPlxuXHQvLyAgICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG5cdC8vICZsdDtjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIlBhbmVsIDFcIiA6aXMtb3Blbj1cInRydWVcIiZndDtcblx0Ly8gIFBhbmVsIDEgY29udGVudFxuXHQvLyAmbHQ7L2NvbGxhcHNhYmxlLXBhbmVsJmd0O1xuXHQvLyAmbHQ7Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJQYW5lbCAyXCImZ3Q7XG5cdC8vICBQYW5lbCAyIGNvbnRlbnRcblx0Ly8gJmx0Oy9jb2xsYXBzYWJsZS1wYW5lbCZndDtcblx0Ly8gICAgICAgICAgICAgIDwvY29kZT5cblx0Ly8gICAgICAgICAgICA8L3ByZT5cblx0Ly8gICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vICAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJPC9oMz5cblx0Ly8gICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vXG5cdC8vICAgIDwvZGl2PlxuXHQvLyAgIDwvc2VjdGlvbj5cblx0Ly8gPC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblxuLyoqKi8gfSxcbi8qIDQ5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHQvLyA8dGVtcGxhdGU+XG5cdC8vICAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cblx0Ly8gICAgPGRpdiBjbGFzcz1cImh5X28td3JhcHBlclwiPlxuXHQvLyAgICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+R2V0dGluZyBTdGFydGVkPC9oMj5cblx0Ly8gICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cblx0Ly8gICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS01IGh5X3QtZ3JleVwiPkNETjwvaDM+XG5cdC8vICAgICAgPHA+XG5cdC8vICAgICAgICAuLi5cblx0Ly8gICAgICA8L3A+XG5cdC8vICAgIDwvZGl2PlxuXHQvLyAgIDwvc2VjdGlvbj5cblx0Ly8gPC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuXHQvLyAgICAgQGltcG9ydCAnLi4vc2Nzcy9tYWluLnNjc3MnO1xuXHQvLyAgICAgQGltcG9ydCAnLi4vc2Nzcy9wcmlzbS5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly8gPHNjcmlwdD5cblx0ZXhwb3J0cy5kZWZhdWx0ID0ge307XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA1MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBjb21wb25lbnRzOiB7XG5cdCAgICBBcGlUYWJsZTogX2luZGV4Mi5kZWZhdWx0XG5cdCAgfSxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgYXBpSXRlbXM6IFt7XG5cdCAgICAgICAgbmFtZTogJ2xlZ2FsS2V5Jyxcblx0ICAgICAgICB0eXBlOiAnU3RyaW5nJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICd0aGUga2V5IG9mIGxlZ2FsIGluIGNtcydcblx0ICAgICAgfSwge1xuXHQgICAgICAgIG5hbWU6ICdsZWdhbExhbmcnLFxuXHQgICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ3RoZSBsYW5ndWFnZSBvZiBsZWdhbCBpbiBjbXMnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnbGVnYWxSZWdpb24nLFxuXHQgICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ3RoZSByZWdpb24gb2YgbGVnYWwgaW4gY21zJ1xuXHQgICAgICB9XVxuXHQgICAgfTtcblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cdC8vIDx0ZW1wbGF0ZT5cblx0Ly8gICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuXHQvLyAgICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG5cdC8vICAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5MZWdhbCBTeXN0ZW08L2gyPlxuXHQvLyAgICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuXHQvLyAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuXHQvLyAgICAgICAgICAgIDxwIGNsYXNzPVwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcIj5cblx0Ly8gICAgICAgICAgICAgIExvcmVtIGlwc3VtPGxlZ2FsLWNvdW50ZXJcblx0Ly8gICAgICAgICAgICAgICAgdi1vdmVybGF5LW9wZW5lcj1cImxlZ2FsLW92ZXJsYXlcIlxuXHQvLyAgICAgICAgICAgICAgICBsZWdhbC1rZXk9XCJocy1yZWZlcnJhbC10ZXJtc1wiXG5cdC8vICAgICAgICAgICAgICAgIGxlZ2FsLWxhbmc9XCJlblwiIGxlZ2FsLXJlZ2lvbj1cImJjXCJcblx0Ly8gICAgICAgICAgICAgICAgPjwvbGVnYWwtY291bnRlcj4gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdCxcblx0Ly8gICAgICAgICAgICAgIHNlZCBkbyBlaXVzbW9kIHRlbXBvciBpbmNpZGlkdW50IHV0IGxhYm9yZSBldCBkb2xvcmUgbWFnbmEgYWxpcXVhLlxuXHQvLyAgICAgICAgICAgICAgPGxlZ2FsLWNvdW50ZXJcblx0Ly8gICAgICAgICAgICAgICAgdi1vdmVybGF5LW9wZW5lcj1cImxlZ2FsLW92ZXJsYXlcIlxuXHQvLyAgICAgICAgICAgICAgICBsZWdhbC1rZXk9XCIxLXllYXItb2ZmZXItc3RpbVwiXG5cdC8vICAgICAgICAgICAgICAgIGxlZ2FsLWxhbmc9XCJlblwiIGxlZ2FsLXJlZ2lvbj1cImJjXCJcblx0Ly8gICAgICAgICAgICAgICAgPjwvbGVnYWwtY291bnRlcj5cblx0Ly8gICAgICAgICAgICAgIDwvcD5cblx0Ly8gICAgICAgICAgPC9kaXY+XG5cdC8vICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cblx0Ly8gICAgICAgICAgICAgPGxlZ2FsLWNvbnRhaW5lcj48L2xlZ2FsLWNvbnRhaW5lcj5cblx0Ly8gICAgICAgICAgPC9kaXY+XG5cdC8vICAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cblx0Ly8gICAgICAgICAgICA8cHJlPlxuXHQvLyAgICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG5cdC8vICZsdDtsZWdhbC1jb3VudGVyXG5cdC8vICAgbGVnYWwta2V5PVwiaHMtcmVmZXJyYWwtdGVybXNcIlxuXHQvLyAgIGxlZ2FsLWxhbmc9XCJlblwiXG5cdC8vICAgbGVnYWwtcmVnaW9uPVwiYmNcIlxuXHQvLyAmbHQ7L2xlZ2FsLWNvdW50ZXImZ3Q7XG5cdC8vICZsdDtsZWdhbC1jb250YWluZXImZ3Q7Jmx0Oy9sZWdhbC1jb250YWluZXImZ3Q7XG5cdC8vICAgICAgICAgICAgICA8L2NvZGU+XG5cdC8vICAgICAgICAgICAgPC9wcmU+XG5cdC8vICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cdC8vICAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cImphdmFzY3JpcHRcIj5cblx0Ly8gICAgICAgICAgICA8cHJlPlxuXHQvLyAgICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1qYXZhc2NyaXB0XCI+XG5cdC8vIGxldCB2bSA9IG5ldyBWdWUoe1xuXHQvLyAgZWw6ICdib2R5Jyxcblx0Ly8gIGRhdGEoKSB7XG5cdC8vICAgIHJldHVybiB7XG5cdC8vICAgICAgbGlnZXJFbmRQb2ludDogJ2h0dHBzOi8vYXBpLmNtcy50ZWx1cy5jb20vbGVnYWxzJyxcblx0Ly8gICAgICBsaWdlckFwcGxpY2F0aW9uS2V5OiAnYjk3MzhkNjdiODlkZmM3ODI3NDZkNGE5Y2Y0YTEwOTMnXG5cdC8vICAgIH07XG5cdC8vICB9LFxuXHQvLyAgY29tcG9uZW50czoge1xuXHQvLyAgICBMZWdhbENvdW50ZXIsXG5cdC8vICAgIExlZ2FsQ29udGFpbmVyXG5cdC8vICB9XG5cdC8vIH0pO1xuXHQvLyAgICAgICAgICAgICAgPC9jb2RlPlxuXHQvLyAgICAgICAgICAgIDwvcHJlPlxuXHQvLyAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk6IExlZ2FsIENvdW50ZXI8L2gzPlxuXHQvLyAgICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly8gICAgPC9kaXY+XG5cdC8vICAgPC9zZWN0aW9uPlxuXHQvL1xuXHQvL1xuXHQvLyA8L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXG4vKioqLyB9LFxuLyogNTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgY29tcG9uZW50czoge1xuXHQgICAgQXBpVGFibGU6IF9pbmRleDIuZGVmYXVsdFxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGFwaUl0ZW1zOiBbe1xuXHQgICAgICAgIG5hbWU6ICdvdmVybGF5S2V5Jyxcblx0ICAgICAgICB0eXBlOiAnU3RyaW5nJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICdUaGUga2V5IG9mIHRoZSBvdmVybGF5LiBVc2VkIGJ5IHRoZSBvdmVybGF5IG9wZW5lciBkaXJlY3RpdmUgdG8gdGFyZ2V0IHRoZSBvdmVybGV5Lidcblx0ICAgICAgfV1cblx0ICAgIH07XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXHQvLyA8dGVtcGxhdGU+XG5cdC8vICAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cblx0Ly8gICAgPGRpdiBjbGFzcz1cImh5X28td3JhcHBlclwiPlxuXHQvLyAgICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+T3ZlcmxheSBTeXN0ZW08L2gyPlxuXHQvLyAgICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuXHQvLyAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuXHQvLyAgICAgICAgICAgIDxwPlxuXHQvLyAgICAgICAgICAgICAgPGJ1dHRvbiB2LW92ZXJsYXktb3BlbmVyPVwib3ZlcmxheS0xXCIgY2xhc3M9XCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tbGluayBoeV90LXB1cnBsZVwiIHR5cGU9XCJidXR0b25cIiByb2xlPVwiYnV0dG9uXCI+XG5cdC8vICAgICAgICAgICAgICAgIE9wZW4gb3ZlcmxheSAjMSA8aSBjbGFzcz1cImh5X2MtaWNvbiBoeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQgaHlfYy1idXR0b25fX2ljb25cIj48L2k+XG5cdC8vICAgICAgICAgICAgICA8L2J1dHRvbj5cblx0Ly8gICAgICAgICAgICA8L3A+XG5cdC8vICAgICAgICAgICAgPHA+XG5cdC8vICAgICAgICAgICAgICA8YnV0dG9uIHYtb3ZlcmxheS1vcGVuZXI9XCJvdmVybGF5LTJcIiBjbGFzcz1cImh5X2MtYnV0dG9uIGh5X2MtYnV0dG9uLS1saW5rIGh5X3QtcHVycGxlXCIgdHlwZT1cImJ1dHRvblwiIHJvbGU9XCJidXR0b25cIj5cblx0Ly8gICAgICAgICAgICAgICAgT3BlbiBvdmVybGF5ICMyIDxpIGNsYXNzPVwiaHlfYy1pY29uIGh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZCBoeV9jLWJ1dHRvbl9faWNvblwiPjwvaT5cblx0Ly8gICAgICAgICAgICAgIDwvYnV0dG9uPlxuXHQvLyAgICAgICAgICAgIDwvcD5cblx0Ly8gICAgICAgICAgICA8b3ZlcmxheS1jb250YWluZXI+XG5cdC8vICAgICAgICAgICAgICAgICAgIDxvdmVybGF5IG92ZXJsYXkta2V5PVwib3ZlcmxheS0xXCI+XG5cdC8vICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFwiIHNsb3Q9XCJvdmVybGF5LWhlYWRlclwiPlRoaXMgaXMgb3ZlcmxheSAjMTwvaDQ+XG5cdC8vICAgICAgICAgICAgICAgICAgICAgPGFydGljbGUgc2xvdD1cIm92ZXJsYXktYm9keVwiPlxuXHQvLyAgICAgICAgICAgICAgICAgICAgICAgICBPdmVybGF5ICMxIGJvZHlcblx0Ly8gICAgICAgICAgICAgICAgICAgICA8L2FydGljbGU+XG5cdC8vICAgICAgICAgICAgICAgICAgIDwvb3ZlcmxheT5cblx0Ly8gICAgICAgICAgICAgICAgICAgPG92ZXJsYXkgb3ZlcmxheS1rZXk9XCJvdmVybGF5LTJcIj5cblx0Ly8gICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XCIgc2xvdD1cIm92ZXJsYXktaGVhZGVyXCI+VGhpcyBpcyBvdmVybGF5ICMyPC9oND5cblx0Ly8gICAgICAgICAgICAgICAgICAgICA8YXJ0aWNsZSBzbG90PVwib3ZlcmxheS1ib2R5XCI+XG5cdC8vICAgICAgICAgICAgICAgICAgICAgICAgIE92ZXJsYXkgIzIgYm9keVxuXHQvLyAgICAgICAgICAgICAgICAgICAgIDwvYXJ0aWNsZT5cblx0Ly8gICAgICAgICAgICAgICAgICAgPC9vdmVybGF5PlxuXHQvLyAgICAgICAgICAgPC9vdmVybGF5LWNvbnRhaW5lcj5cblx0Ly8gICAgICAgICAgPC9kaXY+XG5cdC8vICAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cblx0Ly8gICAgICAgICAgICA8cHJlPlxuXHQvLyAgICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG5cdC8vICZsdDtvdmVybGF5LWNvbnRhaW5lciZndDtcblx0Ly8gICZsdDtvdmVybGF5IG92ZXJsYXkta2V5PVwib3ZlcmxheS0xXCImZ3Q7XG5cdC8vICAgICZsdDtoNCAgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XCIgc2xvdD1cIm92ZXJsYXktaGVhZGVyXCImZ3Q7XG5cdC8vICAgIFRoaXMgaXMgb3ZlcmxheSAjMVxuXHQvLyAgICAmbHQ7L2g0Jmd0O1xuXHQvLyAgICAmbHQ7YXJ0aWNsZSBzbG90PVwib3ZlcmxheS1ib2R5XCImZ3Q7XG5cdC8vICAgICAgT3ZlcmxheSAjMSBib2R5XG5cdC8vICAgICZsdDsvYXJ0aWNsZSZndDtcblx0Ly8gICZsdDsvb3ZlcmxheSZndDtcblx0Ly8gICZsdDtvdmVybGF5IG92ZXJsYXkta2V5PVwib3ZlcmxheS0yXCImZ3Q7XG5cdC8vICAgICZsdDtoNCAgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XCIgc2xvdD1cIm92ZXJsYXktaGVhZGVyXCImZ3Q7XG5cdC8vICAgIFRoaXMgaXMgb3ZlcmxheSAjMVxuXHQvLyAgICAmbHQ7L2g0Jmd0O1xuXHQvLyAgICAmbHQ7YXJ0aWNsZSBzbG90PVwib3ZlcmxheS1ib2R5XCImZ3Q7XG5cdC8vICAgICAgT3ZlcmxheSAjMiBib2R5XG5cdC8vICAgICZsdDsvYXJ0aWNsZSZndDtcblx0Ly8gICZsdDsvb3ZlcmxheSZndDtcblx0Ly8gJmx0Oy9vdmVybGF5LWNvbnRhaW5lciZndDtcblx0Ly8gICAgICAgICAgICAgIDwvY29kZT5cblx0Ly8gICAgICAgICAgICA8L3ByZT5cblx0Ly8gICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vICAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJPC9oMz5cblx0Ly8gICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vICAgIDwvZGl2PlxuXHQvLyAgIDwvc2VjdGlvbj5cblx0Ly9cblx0Ly8gPC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblxuLyoqKi8gfSxcbi8qIDUyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGNvbXBvbmVudHM6IHtcblx0ICAgIEFwaVRhYmxlOiBfaW5kZXgyLmRlZmF1bHRcblx0ICB9LFxuXHQgIG1ldGhvZHM6IHtcblx0ICAgIHNob3dTcGlubmVyOiBmdW5jdGlvbiBzaG93U3Bpbm5lcigpIHtcblx0ICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgIHRoaXMuX3Jlc2V0TXNnKCk7XG5cdCAgICAgIHRoaXMuJHJvb3QuJGJyb2FkY2FzdCgnc2hvdzo6c3Bpbm5lcicpO1xuXHQgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBfdGhpcy4kcm9vdC4kYnJvYWRjYXN0KCdoaWRlOjpzcGlubmVyJyk7XG5cdCAgICAgIH0sIDMwMDApO1xuXHQgICAgfSxcblx0ICAgIF9yZXNldE1zZzogZnVuY3Rpb24gX3Jlc2V0TXNnKCkge1xuXHQgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblx0XG5cdCAgICAgIHZhciBjb3VudGVyID0gMztcblx0ICAgICAgdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChjb3VudGVyID4gMCkge1xuXHQgICAgICAgICAgY291bnRlci0tO1xuXHQgICAgICAgICAgX3RoaXMyLm1zZyA9ICdJIHdpbGwgY2xvc2UgaW4gJyArIGNvdW50ZXIgKyAnIHNlY29uZHMnO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sIDEwMDApO1xuXHQgICAgICB0aGlzLm1zZyA9ICdJIHdpbGwgY2xvc2UgaW4gJyArIGNvdW50ZXIgKyAnIHNlY29uZHMnO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIG1zZzogJycsXG5cdCAgICAgIGlzRnVsbFNjcmVlbjogZmFsc2UsXG5cdCAgICAgIGFwaUl0ZW1zOiBbe1xuXHQgICAgICAgIG5hbWU6ICdmdWxsU2NyZWVuJyxcblx0ICAgICAgICB0eXBlOiAnQm9vbGVhbicsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG5cdCAgICAgICAgZGVmYXVsdDogZmFsc2UsXG5cdCAgICAgICAgZGVzYzogJ1Nob3VsZCB0aGUgc3Bpbm5lciB0YWtlIGZ1bGwgc2NyZWVuJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ3RleHQnLFxuXHQgICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICdcXCdcXCcnLFxuXHQgICAgICAgIGRlc2M6ICdUaGUgdGV4dCBvZiB0aGUgc3Bpbm5lci4gRGVmYXVsdCBlbXB0eSdcblx0ICAgICAgfSwge1xuXHQgICAgICAgIG5hbWU6ICdzaG93OjpzcGlubmVyJyxcblx0ICAgICAgICB0eXBlOiAnRXZlbnQnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICdBY3RpdmUgdGhlIHNwaW5uZXInXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnaGlkZTo6c3Bpbm5lcicsXG5cdCAgICAgICAgdHlwZTogJ0V2ZW50Jyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAnSGlkZSB0aGUgc3Bpbm5lcidcblx0ICAgICAgfV1cblx0ICAgIH07XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXHQvLyA8dGVtcGxhdGU+XG5cdC8vICAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cblx0Ly8gICAgPGRpdiBjbGFzcz1cImh5X28td3JhcHBlclwiPlxuXHQvLyAgICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+U3Bpbm5lcjwvaDI+XG5cdC8vICAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG5cdC8vICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG5cdC8vICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiaHlfYy1jb250cm9sIGh5X2MtY29udHJvbC0tY2hlY2tib3hcIiA+XG5cdC8vICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaHlfYy1jb250cm9sX19sYWJlbC10ZXh0XCI+RnVsbCBTY3JlZW48L3NwYW4+XG5cdC8vICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiAgdi1tb2RlbD1cImlzRnVsbFNjcmVlblwiIC8+XG5cdC8vICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoeV9jLWNvbnRyb2xfX2luZGljYXRvclwiPjwvZGl2PlxuXHQvLyAgICAgICAgICAgPC9sYWJlbD5cblx0Ly9cblx0Ly8gICAgICAgICAgIDxidXR0b24gQGNsaWNrPVwic2hvd1NwaW5uZXJcIiBjbGFzcz1cImh5X2MtYnV0dG9uIGh5X2MtYnV0dG9uLS1yYWlzZWQgaHlfdC1ncmVlblwiIHR5cGU9XCJidXR0b25cIj5cblx0Ly8gICAgICAgICAgICAgU2hvdyBTcGlubmVyXG5cdC8vICAgICAgICAgICA8L2J1dHRvbj5cblx0Ly9cblx0Ly9cblx0Ly9cblx0Ly8gICAgICAgICAgICA8c3Bpbm5lciA6ZnVsbC1zY3JlZW49XCJpc0Z1bGxTY3JlZW5cIiA6dGV4dD1cIm1zZ1wiPjwvc3Bpbm5lcj5cblx0Ly8gICAgICAgICAgPC9kaXY+XG5cdC8vICAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cblx0Ly8gICAgICAgICAgICA8cHJlPlxuXHQvLyAgICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG5cdC8vICZsdDtzcGlubmVyIHRleHQ9XCJJIHdpbGwgY2xvc2UgaW4gMyBzZWNvbmRzXCIgOmZ1bGwtc2NyZWVuPVwidHJ1ZVwiJmd0OyZsdDsvc3Bpbm5lciZndDtcblx0Ly8gICAgICAgICAgICAgIDwvY29kZT5cblx0Ly8gICAgICAgICAgICA8L3ByZT5cblx0Ly8gICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vICAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJPC9oMz5cblx0Ly8gICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vXG5cdC8vICAgIDwvZGl2PlxuXHQvLyAgIDwvc2VjdGlvbj5cblx0Ly8gPC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblxuLyoqKi8gfSxcbi8qIDUzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGNvbXBvbmVudHM6IHtcblx0ICAgIEFwaVRhYmxlOiBfaW5kZXgyLmRlZmF1bHRcblx0ICB9LFxuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHN0ZXBUcmFja2VyQ3VycmVudFN0ZXA6IDIsXG5cdCAgICAgIHN0ZXBUcmFja2VyQ29uZmlnOiB7XG5cdCAgICAgICAgaXNDbGlja2FibGU6IHRydWUsXG5cdCAgICAgICAgc3RlcHM6IFt7XG5cdCAgICAgICAgICB0aXRsZTogJ1N0ZXAgQScsXG5cdCAgICAgICAgICBsaW5rOiAnJyxcblx0ICAgICAgICAgIG9uQ2xpY2tIYW5kbGVyOiBmdW5jdGlvbiBvbkNsaWNrSGFuZGxlcihldmVudCkge1xuXHQgICAgICAgICAgICBfdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMDtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICB0aXRsZTogJ1N0ZXAgQicsXG5cdCAgICAgICAgICBsaW5rOiAnJyxcblx0ICAgICAgICAgIG9uQ2xpY2tIYW5kbGVyOiBmdW5jdGlvbiBvbkNsaWNrSGFuZGxlcihldmVudCkge1xuXHQgICAgICAgICAgICBfdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICB0aXRsZTogJ1N0ZXAgQycsXG5cdCAgICAgICAgICBsaW5rOiAnJyxcblx0ICAgICAgICAgIG9uQ2xpY2tIYW5kbGVyOiBmdW5jdGlvbiBvbkNsaWNrSGFuZGxlcihldmVudCkge1xuXHQgICAgICAgICAgICBfdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMjtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XVxuXHQgICAgICB9LFxuXHQgICAgICBhcGlJdGVtczogW3tcblx0ICAgICAgICBuYW1lOiAnY3VycmVudFN0ZXAnLFxuXHQgICAgICAgIHR5cGU6ICdJbnRlZ2VyJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuXHQgICAgICAgIGRlZmF1bHQ6IDAsXG5cdCAgICAgICAgZGVzYzogJ3RvZG8nXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnY29uZmlnJyxcblx0ICAgICAgICB0eXBlOiAnT2JqZWN0Jyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICd0b2RvJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ2NvbmZpZy50aXRsZScsXG5cdCAgICAgICAgdHlwZTogJ1N0cmluZycsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAnVGhlIHRpdGxlIG9mIHRoZSBzdGVwJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ2NvbmZpZy5saW5rJyxcblx0ICAgICAgICB0eXBlOiAnU3RyaW5nJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAnVGhlIGxpbmsgb2YgdGhlIHN0ZXAuICdcblx0ICAgICAgfSwge1xuXHQgICAgICAgIG5hbWU6ICdjb25maWcub25DbGlja0hhbmRsZXInLFxuXHQgICAgICAgIHR5cGU6ICdGdW5jdGlvbicsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ1RoZSBjYWxsYmFjayBmdW5jdGlvbiB3aGVuIHN0ZXAgaXMgY2xpY2tlZC4nXG5cdCAgICAgIH1dXG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblx0Ly8gPHRlbXBsYXRlPlxuXHQvLyAgIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG5cdC8vICAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cblx0Ly8gICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPlN0ZXAgVHJhY2tlcjwvaDI+XG5cdC8vICAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG5cdC8vICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG5cdC8vICAgICAgICAgICAgPHN0ZXAtdHJhY2tlciA6Y3VycmVudC1zdGVwPVwic3RlcFRyYWNrZXJDdXJyZW50U3RlcFwiIDpjb25maWc9XCJzdGVwVHJhY2tlckNvbmZpZ1wiPjwvc3RlcC10cmFja2VyPlxuXHQvLyAgICAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiSFRNTFwiPlxuXHQvLyAgICAgICAgPHByZT5cblx0Ly8gICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG5cdC8vICZsdDtzdGVwLXRyYWNrZXJcblx0Ly8gOmN1cnJlbnQtc3RlcD1cInN0ZXBUcmFja2VyQ3VycmVudFN0ZXBcIlxuXHQvLyA6Y29uZmlnPVwic3RlcFRyYWNrZXJDb25maWdcIiZndDtcblx0Ly8gJmx0Oy9zdGVwLXRyYWNrZXImZ3Q7XG5cdC8vICAgICAgICAgIDwvY29kZT5cblx0Ly8gICAgICAgIDwvcHJlPlxuXHQvLyAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJqYXZhc2NyaXB0XCI+XG5cdC8vICAgICAgICAgICAgPHByZT5cblx0Ly8gICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtanNcIj5cblx0Ly8gbGV0IHN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAyO1xuXHQvLyBsZXQgc3RlcFRyYWNrZXJDb25maWcgPSB7XG5cdC8vICAgaXNDbGlja2FibGU6IHRydWUsXG5cdC8vICAgc3RlcHM6IFtcblx0Ly8gICAgIHtcblx0Ly8gICAgICAgdGl0bGU6ICdTdGVwIEEnLFxuXHQvLyAgICAgICBsaW5rOiAnJyxcblx0Ly8gICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xuXHQvLyAgICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDA7XG5cdC8vICAgICAgIH1cblx0Ly8gICAgIH0sIHtcblx0Ly8gICAgICAgdGl0bGU6ICdTdGVwIEInLFxuXHQvLyAgICAgICBsaW5rOiAnJyxcblx0Ly8gICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xuXHQvLyAgICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDE7XG5cdC8vICAgICAgIH1cblx0Ly8gICAgIH0sIHtcblx0Ly8gICAgICAgdGl0bGU6ICdTdGVwIEMnLFxuXHQvLyAgICAgICBsaW5rOiAnJyxcblx0Ly8gICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xuXHQvLyAgICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDI7XG5cdC8vICAgICAgIH1cblx0Ly8gICAgIH1cblx0Ly8gICBdXG5cdC8vIH07XG5cdC8vIGxldCB2bSA9IG5ldyBWdWUoe1xuXHQvLyAgIGVsOiAnYm9keScsXG5cdC8vICAgZGF0YToge1xuXHQvLyAgICAgc3RlcFRyYWNrZXJDb25maWcsXG5cdC8vICAgICBzdGVwVHJhY2tlckN1cnJlbnRTdGVwXG5cdC8vIH0sXG5cdC8vICAgY29tcG9uZW50czoge1xuXHQvLyAgICAgU3RlcFRyYWNrZXJcblx0Ly8gICB9XG5cdC8vIH0pO1xuXHQvLyAgICAgICAgICAgICAgPC9jb2RlPlxuXHQvLyAgICAgICAgICAgIDwvcHJlPlxuXHQvLyAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk8L2gzPlxuXHQvLyAgICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly8gICAgPC9kaXY+XG5cdC8vICAgPC9zZWN0aW9uPlxuXHQvLyA8L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXG4vKioqLyB9LFxuLyogNTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgY29tcG9uZW50czoge1xuXHQgICAgQXBpVGFibGU6IF9pbmRleDIuZGVmYXVsdFxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGFwaUl0ZW1zOiBbe1xuXHQgICAgICAgIG5hbWU6ICdsYWJlbCcsXG5cdCAgICAgICAgdHlwZTogJ1N0cmluZycsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAnVGhlIGxhYmxlIG9mIHRoZSB0YWInXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnaXNEaXNhYmxlZCcsXG5cdCAgICAgICAgdHlwZTogJ0Jvb2xlYW4nLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuXHQgICAgICAgIGRlc2M6ICdJcyB0aGUgdGFiIGRpc2FibGVkIG9yIG5vdC4gV2hlbiBzZXQgdG8gdHJ1ZSwgdGhlIHRhYiBpcyBub3QgY2xpY2thYmxlLidcblx0ICAgICAgfV1cblx0ICAgIH07XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXHQvLyA8dGVtcGxhdGU+XG5cdC8vICAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cblx0Ly8gICAgPGRpdiBjbGFzcz1cImh5X28td3JhcHBlclwiPlxuXHQvLyAgICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+VGFiPC9oMj5cblx0Ly8gICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cblx0Ly8gICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cblx0Ly8gICAgICAgICAgICA8dGFicz5cblx0Ly8gICAgICAgICAgICAgIDx0YWIgbGFiZWw9XCJUYWIgMVwiPlxuXHQvLyAgICAgICAgICAgICAgIDxwPlxuXHQvLyAgICAgICAgICAgICAgICAgVGFiIDEgY29udGVudFxuXHQvLyAgICAgICAgICAgICAgIDwvcD5cblx0Ly8gICAgICAgICAgICAgIDwvdGFiPlxuXHQvLyAgICAgICAgICAgICAgPHRhYiBsYWJlbD1cIlRhYiAyXCI+XG5cdC8vICAgICAgICAgICAgICAgIDxwPlxuXHQvLyAgICAgICAgICAgICAgICAgIFRhYiAyIGNvbnRlbnRcblx0Ly8gICAgICAgICAgICAgICAgPC9wPlxuXHQvLyAgICAgICAgICAgICAgPC90YWI+XG5cdC8vICAgICAgICAgICAgICA8dGFiIGxhYmVsPVwiVGFiIDNcIiA6aXMtZGlzYWJsZWQ9XCJ0cnVlXCI+XG5cdC8vICAgICAgICAgICAgICAgIDxwPlxuXHQvLyAgICAgICAgICAgICAgICAgIFRhYiAzIGNvbnRlbnRcblx0Ly8gICAgICAgICAgICAgICAgPC9wPlxuXHQvLyAgICAgICAgICAgICAgPC90YWI+XG5cdC8vICAgICAgICAgICAgPC90YWJzPlxuXHQvLyAgICAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiSFRNTFwiPlxuXHQvLyAgICAgICAgICAgIDxwcmU+XG5cdC8vICAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cblx0Ly8gJmx0O3RhYnMmZ3Q7XG5cdC8vICAmbHQ7dGFiIGxhYmVsPVwiVGFiIDFcIiZndDtcblx0Ly8gICAgJmx0O3AmZ3Q7XG5cdC8vICAgICAgVGFiIDEgY29udGVudFxuXHQvLyAgICAmbHQ7L3AmZ3Q7XG5cdC8vICAmbHQ7L3RhYiZndDtcblx0Ly8gICZsdDt0YWIgbGFiZWw9XCJUYWIgMlwiJmd0O1xuXHQvLyAgICAmbHQ7cCZndDtcblx0Ly8gICAgICBUYWIgMiBjb250ZW50XG5cdC8vICAgICZsdDsvcCZndDtcblx0Ly8gICZsdDsvdGFiJmd0O1xuXHQvLyAgJmx0O3RhYiBsYWJlbD1cIlRhYiAzXCIgOmlzLWRpc2FibGVkPVwidHJ1ZVwiJmd0O1xuXHQvLyAgICAmbHQ7cCZndDtcblx0Ly8gICAgICBUYWIgMyBjb250ZW50XG5cdC8vICAgICZsdDsvcCZndDtcblx0Ly8gICZsdDsvdGFiJmd0O1xuXHQvLyAmbHQ7L3RhYnMmZ3Q7XG5cdC8vICAgICAgICAgICAgICA8L2NvZGU+XG5cdC8vICAgICAgICAgICAgPC9wcmU+XG5cdC8vICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG5cdC8vICAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvL1xuXHQvLyAgICA8L2Rpdj5cblx0Ly8gICA8L3NlY3Rpb24+XG5cdC8vIDwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cbi8qKiovIH0sXG4vKiA1NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0Ly8gPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL2NvbXBvbmVudHMvdWkvaWNvbic7XG5cdC8vICAgICBAaW1wb3J0ICcuLi8uLi90cmFuc2l0aW9ucy9mYWRlLnNjc3MnO1xuXHQvLyAgICAgQGltcG9ydCAnLi9hbGVydC5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vYWxlcnQuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgaXNWaXNpYmxlOiB0cnVlXG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIHByb3BzOiB7XG5cdCAgICB0eXBlOiB7XG5cdCAgICAgIHR5cGU6IFN0cmluZyxcblx0ICAgICAgcmVxdWlyZWQ6IHRydWVcblx0ICAgIH0sXG5cdCAgICBkaXNtaXNzaWJsZToge1xuXHQgICAgICB0eXBlOiBCb29sZWFuLFxuXHQgICAgICBkZWZhdWx0OiB0cnVlXG5cdCAgICB9LFxuXHQgICAgdGltZW91dDoge1xuXHQgICAgICB0eXBlOiBOdW1iZXIsXG5cdCAgICAgIGRlZmF1bHQ6IC0xXG5cdCAgICB9LFxuXHQgICAgb25DbG9zZWQ6IHtcblx0ICAgICAgdHlwZTogRnVuY3Rpb25cblx0ICAgIH1cblx0ICB9LFxuXHQgIG1ldGhvZHM6IHtcblx0ICAgIGRpc21pc3M6IGZ1bmN0aW9uIGRpc21pc3MoKSB7XG5cdCAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuXHQgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoISFfdGhpcy5vbkNsb3NlZCkge1xuXHQgICAgICAgICAgX3RoaXMub25DbG9zZWQuYXBwbHkoX3RoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICByZWFkeTogZnVuY3Rpb24gcmVhZHkoKSB7XG5cdCAgICB2YXIgX3RoaXMyID0gdGhpcztcblx0XG5cdCAgICBpZiAodGhpcy50aW1lb3V0ID49IDApIHtcblx0ICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgX3RoaXMyLmRpc21pc3MoKTtcblx0ICAgICAgfSwgdGhpcy50aW1lb3V0KTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA1NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0Ly8gPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL2NvbXBvbmVudHMvdWkvaWNvbic7XG5cdC8vICAgICBAaW1wb3J0ICcuL2NvbGxhcHNhYmxlLXBhbmVsLnNjc3MnO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi9jb2xsYXBzYWJsZS1wYW5lbC5odG1sXCI+PC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIHByb3BzOiB7XG5cdCAgICBpc09wZW46IHtcblx0ICAgICAgdHlwZTogQm9vbGVhbixcblx0ICAgICAgZGVmYXVsdDogZmFsc2Vcblx0ICAgIH0sXG5cdCAgICBsYWJlbDoge1xuXHQgICAgICB0eXBlOiBTdHJpbmcsXG5cdCAgICAgIHJlcXVpcmVkOiB0cnVlXG5cdCAgICB9XG5cdCAgfSxcblx0ICBtZXRob2RzOiB7XG5cdCAgICB0b2dnbGVPcGVuOiBmdW5jdGlvbiB0b2dnbGVPcGVuKCRldmVudCkge1xuXHQgICAgICB0aGlzLmlzT3BlbiA9ICF0aGlzLmlzT3Blbjtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA1NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGZldGNoKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX21peGlucyA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHRcblx0dmFyIF9taXhpbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWl4aW5zKTtcblx0XG5cdHZhciBfZmluZEluZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDkpO1xuXHRcblx0dmFyIF9maW5kSW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZmluZEluZGV4KTtcblx0XG5cdHZhciBfZGVib3VuY2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Nyk7XG5cdFxuXHR2YXIgX2RlYm91bmNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlYm91bmNlKTtcblx0XG5cdHZhciBfc2V0Rm9jdXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0XG5cdHZhciBfc2V0Rm9jdXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2V0Rm9jdXMpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdC8vXG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vbGVnYWwtY29udGFpbmVyLnNjc3MnO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi9sZWdhbC1jb250YWluZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdC8qXG5cdCAqIEFQSTogPGxlZ2FsLWNvbnRhaW5lcj48L2xlZ2FsLWNvbnRhaW5lcj5cblx0Ki9cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBtaXhpbnM6IF9taXhpbnMyLmRlZmF1bHQsXG5cdCAgZGlyZWN0aXZlczoge1xuXHQgICAgc2V0Rm9jdXM6IF9zZXRGb2N1czIuZGVmYXVsdFxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGluZGV4ZWRMZWdhbHM6IFtdLFxuXHQgICAgICBub25JbmRleGVkTGVnYWxzOiBbXSxcblx0ICAgICAgYXBpTGFuZzogbnVsbCxcblx0ICAgICAgYXBpUmVnaW9uOiBudWxsXG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIG1ldGhvZHM6IHtcblx0ICAgIGZldGNoTGVnYWxzOiBmdW5jdGlvbiBmZXRjaExlZ2FscyhrZXlzKSB7XG5cdCAgICAgIHJldHVybiBmZXRjaCgnXFxuICAgICAgICAgICcgKyB0aGlzLiRyb290LmxpZ2VyRW5kUG9pbnQgKyAnP2xhbmc9JyArIHRoaXMuYXBpTGFuZyArICcmcmVnaW9uPScgKyB0aGlzLmFwaVJlZ2lvbiArICcmaHRtbD10cnVlXFxuICAgICAgICAnLCB7XG5cdCAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG5cdCAgICAgICAgaGVhZGVyczoge1xuXHQgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcblx0ICAgICAgICAgIGFwcGxpY2F0aW9uS2V5OiB0aGlzLiRyb290LmxpZ2VyQXBwbGljYXRpb25LZXlcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcblx0ICAgICAgICAgIGtleXM6IGtleXNcblx0ICAgICAgICB9KVxuXHQgICAgICB9KTtcblx0ICAgIH0sXG5cdCAgICBhcHBlbmRSZXNwb25zZVRvTGVnYWxDb250YWluZXI6IGZ1bmN0aW9uIGFwcGVuZFJlc3BvbnNlVG9MZWdhbENvbnRhaW5lcih0eXBlLCBkYXRhKSB7XG5cdCAgICAgIHZhciBwcm9jZXNzID0gZnVuY3Rpb24gcHJvY2Vzcyh0YXJnZXQsIGRhdGFBcnkpIHtcblx0ICAgICAgICBkYXRhQXJ5LmZvckVhY2goZnVuY3Rpb24gKGxlZ2FsUmVzcG9uc2UpIHtcblx0ICAgICAgICAgIHZhciBpbmRleCA9IHRhcmdldC5maW5kSW5kZXgoZnVuY3Rpb24gKGwpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGwua2V5ID09PSBsZWdhbFJlc3BvbnNlLmtleTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcblx0ICAgICAgICAgICAgdGFyZ2V0LiRzZXQoaW5kZXgsIHtcblx0ICAgICAgICAgICAgICBjb250ZW50OiBsZWdhbFJlc3BvbnNlLmNvbnRlbnQsXG5cdCAgICAgICAgICAgICAga2V5OiBsZWdhbFJlc3BvbnNlLmtleVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfTtcblx0ICAgICAgaWYgKHR5cGUgPT09ICdpbmRleGVkJykge1xuXHQgICAgICAgIHByb2Nlc3ModGhpcy5pbmRleGVkTGVnYWxzLCBkYXRhKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwcm9jZXNzKHRoaXMubm9uSW5kZXhlZExlZ2FscywgZGF0YSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0TGVnYWxzOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBfZGVib3VuY2UyLmRlZmF1bHQuY2FsbCh0aGlzLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgICAgdmFyIGluZGV4ZWRLZXlzID0gdGhpcy5pbmRleGVkTGVnYWxzLm1hcChmdW5jdGlvbiAobGVnYWwpIHtcblx0ICAgICAgICAgIHJldHVybiBsZWdhbC5rZXk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgdmFyIG5vbkluZGV4ZWRLZXlzID0gdGhpcy5ub25JbmRleGVkTGVnYWxzLm1hcChmdW5jdGlvbiAobGVnYWwpIHtcblx0ICAgICAgICAgIHJldHVybiBsZWdhbC5rZXk7XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIGlmIChpbmRleGVkS2V5cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICB0aGlzLmZldGNoTGVnYWxzKGluZGV4ZWRLZXlzKS50aGVuKHRoaXMucGFyc2VKU09OKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgICAgIF90aGlzLmFwcGVuZFJlc3BvbnNlVG9MZWdhbENvbnRhaW5lcignaW5kZXhlZCcsIGRhdGEpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChub25JbmRleGVkS2V5cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICB0aGlzLmZldGNoTGVnYWxzKG5vbkluZGV4ZWRLZXlzKS50aGVuKHRoaXMucGFyc2VKU09OKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgICAgIF90aGlzLmFwcGVuZFJlc3BvbnNlVG9MZWdhbENvbnRhaW5lcignbm9uSW5kZXhlZCcsIGRhdGEpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LCAxMCk7XG5cdCAgICB9KClcblx0ICB9LFxuXHQgIGV2ZW50czoge1xuXHQgICAgJ2xlZ2FsOjpjbGljayc6IGZ1bmN0aW9uIGxlZ2FsQ2xpY2sobGVnYWxLZXkpIHtcblx0ICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgICB2YXIgdGFyZ2V0TGVnYWxJbmRleCA9IHRoaXMuaW5kZXhlZExlZ2Fscy5maW5kSW5kZXgoZnVuY3Rpb24gKGwpIHtcblx0ICAgICAgICByZXR1cm4gbC5rZXkgPT09IGxlZ2FsS2V5O1xuXHQgICAgICB9KTtcblx0ICAgICAgaWYgKHRhcmdldExlZ2FsSW5kZXggPiAtMSkge1xuXHQgICAgICAgIHRoaXMuaW5kZXhlZExlZ2Fscy5mb3JFYWNoKGZ1bmN0aW9uIChsLCBpKSB7XG5cdCAgICAgICAgICBpZiAoaSAhPT0gdGFyZ2V0TGVnYWxJbmRleCkge1xuXHQgICAgICAgICAgICBsLmlzU2VsZWN0ZWQgPSBmYWxzZTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIF90aGlzMi5pbmRleGVkTGVnYWxzLiRzZXQoaSwgT2JqZWN0LmFzc2lnbih7fSwgX3RoaXMyLmluZGV4ZWRMZWdhbHNbaV0sIHsgaXNTZWxlY3RlZDogdHJ1ZSB9KSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdCAgICAnbGVnYWw6OmluaXQnOiBmdW5jdGlvbiBsZWdhbEluaXQobGVnYWxJbml0RGV0YWlsKSB7XG5cdCAgICAgIHRoaXMuYXBpTGFuZyA9IGxlZ2FsSW5pdERldGFpbC5sYW5nO1xuXHQgICAgICB0aGlzLmFwaVJlZ2lvbiA9IGxlZ2FsSW5pdERldGFpbC5yZWdpb247XG5cdCAgICAgIC8vIGNoZWNrIGlmIGxvYWRlZCBhbHJlYWR5XG5cdCAgICAgIHZhciBjb250YWluZXJSZWYgPSBsZWdhbEluaXREZXRhaWwuaXNOb25JbmRleGVkID8gdGhpcy5ub25JbmRleGVkTGVnYWxzIDogdGhpcy5pbmRleGVkTGVnYWxzO1xuXHQgICAgICB2YXIgaW5kZXggPSAoMCwgX2ZpbmRJbmRleDIuZGVmYXVsdCkoY29udGFpbmVyUmVmLCBmdW5jdGlvbiAobGVnYWwpIHtcblx0ICAgICAgICByZXR1cm4gbGVnYWwua2V5ID09PSBsZWdhbEluaXREZXRhaWwua2V5O1xuXHQgICAgICB9KTtcblx0ICAgICAgLy8gaWYgbm90IGZvdW5kXG5cdCAgICAgIGlmIChpbmRleCA8IDApIHtcblx0ICAgICAgICBpbmRleCA9IGNvbnRhaW5lclJlZi5wdXNoKGxlZ2FsSW5pdERldGFpbCkgLSAxO1xuXHQgICAgICAgIHRoaXMuZ2V0TGVnYWxzKCk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKCFsZWdhbEluaXREZXRhaWwuaXNOb25JbmRleGVkKSB7XG5cdCAgICAgICAgdGhpcy5yb290QnJvYWRjYXN0KCdsZWdhbDo6dWRwYXRlJywge1xuXHQgICAgICAgICAga2V5OiBsZWdhbEluaXREZXRhaWwua2V5LFxuXHQgICAgICAgICAgaXNOb25JbmRleGVkOiBsZWdhbEluaXREZXRhaWwuaXNOb25JbmRleGVkLFxuXHQgICAgICAgICAgaW5kZXg6IGluZGV4XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDg0KSkpXG5cbi8qKiovIH0sXG4vKiA1OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX21peGlucyA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHRcblx0dmFyIF9taXhpbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWl4aW5zKTtcblx0XG5cdHZhciBfZGVmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblx0XG5cdHZhciBfZGVmZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vbGVnYWwtY291bnRlci5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vbGVnYWwtY291bnRlci5odG1sXCI+PC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblx0Lypcblx0ICogQVBJOiA8bGVnYWwtY291bnRlclxuXHQgKiAgICAgICAgbGVnYWwta2V5PVwiKFN0cmluZykga2V5XCJcblx0ICogICAgICAgIGxlZ2FsLWxhbmc9XCIoU3RyaW5nKSBsYW5nXCJcblx0ICogICAgICAgIGxlZ2FsLXJlZ2lvbj1cIihTdHJpbmcpIHJlZ2lvblwiXG5cdCAqICAgICAgICBpcy1ub24taW5kZXhlZD1cIihCb29sZWFuKSBpc05vbkluZGV4ZWRcIlxuXHQgKiAgICAgID48L2xlZ2FsLWNvdW50ZXI+XG5cdCovXG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgbWl4aW5zOiBfbWl4aW5zMi5kZWZhdWx0LFxuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBsZWdhbENvdW50ZXI6IG51bGxcblx0ICAgIH07XG5cdCAgfSxcblx0XG5cdCAgcHJvcHM6IHtcblx0ICAgIGxlZ2FsS2V5OiB7XG5cdCAgICAgIHR5cGU6IFN0cmluZyxcblx0ICAgICAgcmVxdWlyZWQ6IHRydWVcblx0ICAgIH0sXG5cdCAgICBpc05vbkluZGV4ZWQ6IHtcblx0ICAgICAgdHlwZTogQm9vbGVhbixcblx0ICAgICAgZGVmYXVsdDogZmFsc2Vcblx0ICAgIH0sXG5cdCAgICBsZWdhbExhbmc6IHtcblx0ICAgICAgdHlwZTogU3RyaW5nLFxuXHQgICAgICByZXF1aXJlZDogdHJ1ZVxuXHQgICAgfSxcblx0ICAgIGxlZ2FsUmVnaW9uOiB7XG5cdCAgICAgIHR5cGU6IFN0cmluZyxcblx0ICAgICAgcmVxdWlyZWQ6IHRydWVcblx0ICAgIH1cblx0ICB9LFxuXHQgIGV2ZW50czoge1xuXHQgICAgJ2xlZ2FsOjp1ZHBhdGUnOiBmdW5jdGlvbiBsZWdhbFVkcGF0ZSh1cGRhdGVEZXRhaWwpIHtcblx0ICAgICAgaWYgKCF0aGlzLmlzTm9uSW5kZXhlZCAmJiB1cGRhdGVEZXRhaWwua2V5ID09PSB0aGlzLmxlZ2FsS2V5KSB7XG5cdCAgICAgICAgdGhpcy5sZWdhbENvdW50ZXIgPSB1cGRhdGVEZXRhaWwuaW5kZXggKyAxO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0ICBtZXRob2RzOiB7XG5cdCAgICBjbGlja0hhbmRsZXI6IGZ1bmN0aW9uIGNsaWNrSGFuZGxlcigpIHtcblx0ICAgICAgdGhpcy5yb290QnJvYWRjYXN0KCdsZWdhbDo6Y2xpY2snLCB0aGlzLmxlZ2FsS2V5KTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIGJlZm9yZUNvbXBpbGU6IGZ1bmN0aW9uIGJlZm9yZUNvbXBpbGUoKSB7fSxcblx0ICByZWFkeTogZnVuY3Rpb24gcmVhZHkoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICgwLCBfZGVmZXIyLmRlZmF1bHQpKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX3RoaXMucm9vdEJyb2FkY2FzdCgnbGVnYWw6OmluaXQnLCB7XG5cdCAgICAgICAga2V5OiBfdGhpcy5sZWdhbEtleSxcblx0ICAgICAgICBsYW5nOiBfdGhpcy5sZWdhbExhbmcsXG5cdCAgICAgICAgcmVnaW9uOiBfdGhpcy5sZWdhbFJlZ2lvbixcblx0ICAgICAgICBpc05vbkluZGV4ZWQ6IF90aGlzLmlzTm9uSW5kZXhlZFxuXHQgICAgICB9KTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblxuLyoqKi8gfSxcbi8qIDU5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0Ly8gPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuXHQvLyAgICAgQGltcG9ydCAnLi9vdmVybGF5LWNvbnRhaW5lci5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vb3ZlcmxheS1jb250YWluZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdC8qXG5cdCogRXg6IDxvdmVybGF5LWNvbnRhaW5lciBpcy12aXNpYmxlPVwiKEJvb2xlYW4pIGZhbHNlXCI+XG5cdCAgICAgIDwvb3ZlcmxheS1jb250YWluZXI+XG5cdCovXG5cdHZhciBFU0MgPSAyNztcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIHByb3BzOiB7XG5cdCAgICBpc1Zpc2libGU6IHtcblx0ICAgICAgdHlwZTogQm9vbGVhbixcblx0ICAgICAgZGVmYXVsdDogZmFsc2Vcblx0ICAgIH1cblx0ICB9LFxuXHQgIHdhdGNoOiB7XG5cdCAgICBpc1Zpc2libGU6IGZ1bmN0aW9uIGlzVmlzaWJsZShfaXNWaXNpYmxlKSB7XG5cdCAgICAgIHZhciBlbCA9IHdpbmRvdy5kb2N1bWVudC5ib2R5O1xuXHQgICAgICB2YXIgY2xhc3NOYW1lID0gJ25vLXNjcm9sbCc7XG5cdCAgICAgIGlmIChfaXNWaXNpYmxlKSB7XG5cdCAgICAgICAgaWYgKCEhZWwuY2xhc3NMaXN0KSB7XG5cdCAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGVsLmNsYXNzTmFtZSArPSAnICcgKyBjbGFzc05hbWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGlmIChlbC5jbGFzc0xpc3QpIHtcblx0ICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cCgnKF58XFxcXGIpJyArIGNsYXNzTmFtZS5zcGxpdCgnICcpLmpvaW4oJ3wnKSArICcoXFxcXGJ8JCknLCAnZ2knKSwgJyAnKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHQgIGV2ZW50czoge1xuXHQgICAgJ292ZXJsYXlDb250YWluZXI6Om9wZW4nOiBmdW5jdGlvbiBvdmVybGF5Q29udGFpbmVyT3BlbigpIHtcblx0ICAgICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xuXHQgICAgfSxcblx0ICAgICdvdmVybGF5Q29udGFpbmVyOjpjbG9zZSc6IGZ1bmN0aW9uIG92ZXJsYXlDb250YWluZXJDbG9zZSgpIHtcblx0ICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIHJlYWR5OiBmdW5jdGlvbiByZWFkeSgpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgd2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZ0KSB7XG5cdCAgICAgIGV2dCA9IGV2dCB8fCB3aW5kb3cuZXZlbnQ7XG5cdCAgICAgIGlmIChldnQua2V5Q29kZSA9PT0gRVNDKSB7XG5cdCAgICAgICAgX3RoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblxuLyoqKi8gfSxcbi8qIDYwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0Ly8gPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuXHQvLyAgICAgQGltcG9ydCAnLi9vdmVybGF5LnNjc3MnO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi9vdmVybGF5Lmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHQvKlxuXHQgKiBFeDogPG92ZXJsYXkgb3ZlcmxheS1rZXk9XCIoU3RyaW5nKSBrZXlcIj5cblx0ICogICAgICAgIEFueSBjb250ZW50XG5cdCAqICAgICAgPC9vdmVybGF5PlxuXHQqL1xuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGlzVmlzaWJsZTogZmFsc2Vcblx0ICAgIH07XG5cdCAgfSxcblx0XG5cdCAgcHJvcHM6IHtcblx0ICAgIG92ZXJsYXlLZXk6IHtcblx0ICAgICAgdHlwZTogU3RyaW5nXG5cdCAgICB9XG5cdCAgfSxcblx0ICBtZXRob2RzOiB7XG5cdCAgICBjbG9zZU92ZXJsYXk6IGZ1bmN0aW9uIGNsb3NlT3ZlcmxheSgpIHtcblx0ICAgICAgdGhpcy4kZGlzcGF0Y2goJ292ZXJsYXlDb250YWluZXI6OmNsb3NlJyk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBldmVudHM6IHtcblx0ICAgICdvdmVybGF5OjpvcGVuJzogZnVuY3Rpb24gb3ZlcmxheU9wZW4ob3ZlcmxheUtleSkge1xuXHQgICAgICBpZiAob3ZlcmxheUtleSA9PT0gdGhpcy5vdmVybGF5S2V5KSB7XG5cdCAgICAgICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblxuLyoqKi8gfSxcbi8qIDYxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0Ly8gPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuXHQvLyAgICAgQGltcG9ydCAnLi9zcGlubmVyLnNjc3MnO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi9zcGlubmVyLmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgcmVwbGFjZTogdHJ1ZSxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgYWN0aXZlOiBmYWxzZVxuXHQgICAgfTtcblx0ICB9LFxuXHRcblx0ICBwcm9wczoge1xuXHQgICAgdGV4dDoge1xuXHQgICAgICB0eXBlOiBTdHJpbmcsXG5cdCAgICAgIGRlZmF1bHQ6ICcnXG5cdCAgICB9LFxuXHQgICAgZnVsbFNjcmVlbjoge1xuXHQgICAgICB0eXBlOiBCb29sZWFuLFxuXHQgICAgICBkZWZhdWx0OiBmYWxzZVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgc2hvdzogZnVuY3Rpb24gc2hvdygpIHtcblx0ICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuXHQgICAgICB0aGlzLiRyb290LiRicm9hZGNhc3QoJ3Nob3duOjpzcGlubmVyJyk7XG5cdCAgICB9LFxuXHQgICAgaGlkZTogZnVuY3Rpb24gaGlkZSgpIHtcblx0ICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcblx0ICAgICAgdGhpcy4kcm9vdC4kYnJvYWRjYXN0KCdoaWRkZW46OnNwaW5uZXInKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIGV2ZW50czoge1xuXHQgICAgJ3Nob3c6OnNwaW5uZXInOiBmdW5jdGlvbiBzaG93U3Bpbm5lcigpIHtcblx0ICAgICAgdGhpcy5zaG93KCk7XG5cdCAgICB9LFxuXHQgICAgJ2hpZGU6OnNwaW5uZXInOiBmdW5jdGlvbiBoaWRlU3Bpbm5lcigpIHtcblx0ICAgICAgdGhpcy5oaWRlKCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9jb21wb25lbnRzL3VpL2ljb24nO1xuXHQvLyAgICAgQGltcG9ydCAnLi9zdGVwLXRyYWNrZXIuc2Nzcyc7XG5cdC8vIDwvc3R5bGU+XG5cdC8vXG5cdC8vIDx0ZW1wbGF0ZSBzcmM9XCIuL3N0ZXAtdHJhY2tlci5odG1sXCI+PC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIHByb3BzOiB7XG5cdCAgICBjb25maWc6IHtcblx0ICAgICAgdHlwZTogT2JqZWN0XG5cdCAgICB9LFxuXHQgICAgY3VycmVudFN0ZXA6IHtcblx0ICAgICAgdHlwZTogTnVtYmVyLFxuXHQgICAgICBkZWZhdWx0OiAwXG5cdCAgICB9XG5cdCAgfSxcblx0ICBtZXRob2RzOiB7XG5cdCAgICBjbGlja0hhbmRsZXI6IGZ1bmN0aW9uIGNsaWNrSGFuZGxlcigkZXZlbnQsIHN0ZXAsIGluZGV4KSB7XG5cdCAgICAgIGlmICghIXN0ZXAub25DbGlja0hhbmRsZXIpIHtcblx0ICAgICAgICAkZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICBpZiAodGhpcy5jdXJyZW50U3RlcCA+IGluZGV4KSB7XG5cdCAgICAgICAgICBzdGVwLm9uQ2xpY2tIYW5kbGVyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDx0ZW1wbGF0ZSBzcmM9XCIuL3RhYi5odG1sXCI+PC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIHByb3BzOiB7XG5cdCAgICBsYWJlbDoge1xuXHQgICAgICB0eXBlOiBTdHJpbmdcblx0ICAgIH0sXG5cdCAgICBpc0Rpc2FibGVkOiB7XG5cdCAgICAgIHR5cGU6IEJvb2xlYW4sXG5cdCAgICAgIGRlZmF1bHQ6IGZhbHNlXG5cdCAgICB9XG5cdCAgfSxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgdGFiSW5kZXg6IDAsXG5cdCAgICAgIGlzVmlzaWJsZTogZmFsc2Vcblx0ICAgIH07XG5cdCAgfSxcblx0XG5cdCAgY29tcHV0ZWQ6IHtcblx0ICAgIGlzVmlzaWJsZTogZnVuY3Rpb24gaXNWaXNpYmxlKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy4kcGFyZW50LmFjdGl2ZVRhYkluZGV4ID09PSB0aGlzLnRhYkluZGV4O1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHtcblx0ICAgIHRoaXMuJHBhcmVudC50YWJzLnB1c2goe1xuXHQgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcblx0ICAgICAgaXNEaXNhYmxlZDogdGhpcy5pc0Rpc2FibGVkXG5cdCAgICB9KTtcblx0ICB9LFxuXHQgIHJlYWR5OiBmdW5jdGlvbiByZWFkeSgpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdGhpcy4kcGFyZW50LiRjaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjLCBpbmRleCkge1xuXHQgICAgICBpZiAoYy4kZWwgPT09IF90aGlzLiRlbCkge1xuXHQgICAgICAgIF90aGlzLnRhYkluZGV4ID0gaW5kZXg7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH0sXG5cdCAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHtcblx0ICAgIHRoaXMuJHBhcmVudC50YWJzLnNwbGljZSh0aGlzLnRhYkluZGV4LCAxKTtcblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA2NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cdFxuXHQvLyA8c3R5bGUgbGFuZz1cInNhc3NcIj5cblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG5cdC8vICAgICBAaW1wb3J0ICcuL3RhYnMuc2Nzcyc7XG5cdC8vIDwvc3R5bGU+XG5cdC8vXG5cdC8vIDx0ZW1wbGF0ZSBzcmM9XCIuL3RhYnMuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdC8qXG5cdCAqICBFeDogPHRhYnMgYWN0aXZlLXRhYi1pbmRleD1cIihJbnRlZ2VyKSAwXCI+XG5cdCAqICAgICAgICA8dGFiIGxhYmVsPVwiVGFiIEFcIj5cblx0ICogICAgICAgICAgQW55IGNvbnRlbnRcblx0ICogICAgICAgIDwvdGFiPlxuXHQgKiAgICAgICAgPHRhYiBsYWJlbD1cIlRhYiBCXCIgaXMtZGlzYWJsZWQ9XCIoQm9vbGVhbikgZmFsc2VcIj5cblx0ICogICAgICAgICAgQW55IGNvbnRlbnRcblx0ICogICAgICAgIDwvdGFiPlxuXHQgKiAgICAgICA8dGFicz5cblx0Ki9cblx0ZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmluZVByb3BlcnR5KHtcblx0ICBwcm9wczoge1xuXHQgICAgYWN0aXZlVGFiSW5kZXg6IHtcblx0ICAgICAgdHlwZTogTnVtYmVyLFxuXHQgICAgICBkZWZhdWx0OiAwXG5cdCAgICB9XG5cdCAgfSxcblx0ICBtZXRob2RzOiB7XG5cdCAgICBpc0FjdGl2ZTogZnVuY3Rpb24gaXNBY3RpdmUoaW5kZXgpIHtcblx0ICAgICAgcmV0dXJuIGFjdGl2ZVRhYkluZGV4ID09PSBpbmRleDtcblx0ICAgIH1cblx0ICB9LFxuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICB0YWJzOiBbXVxuXHQgICAgfTtcblx0ICB9XG5cdH0sIFwibWV0aG9kc1wiLCB7XG5cdCAgaGFuZGxlVGFiTGlzdENsaWNrOiBmdW5jdGlvbiBoYW5kbGVUYWJMaXN0Q2xpY2soaW5kZXgsIHRhYikge1xuXHQgICAgaWYgKCF0YWIuaXNEaXNhYmxlZCkge1xuXHQgICAgICB0aGlzLmFjdGl2ZVRhYkluZGV4ID0gaW5kZXg7XG5cdCAgICB9XG5cdCAgfVxuXHR9KTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblxuLyoqKi8gfSxcbi8qIDY1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Nyk7XG5cdFxuXHR2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4KTtcblx0XG5cdHZhciBfc3RlcFRyYWNrZXJQYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTEpO1xuXHRcblx0dmFyIF9zdGVwVHJhY2tlclBhZ2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RlcFRyYWNrZXJQYWdlKTtcblx0XG5cdHZhciBfdGFic1BhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5Mik7XG5cdFxuXHR2YXIgX3RhYnNQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RhYnNQYWdlKTtcblx0XG5cdHZhciBfbGVnYWxQYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODgpO1xuXHRcblx0dmFyIF9sZWdhbFBhZ2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGVnYWxQYWdlKTtcblx0XG5cdHZhciBfb3ZlcmxheVBhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4OSk7XG5cdFxuXHR2YXIgX292ZXJsYXlQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX292ZXJsYXlQYWdlKTtcblx0XG5cdHZhciBfY29sbGFwc2FibGVQYW5lbFBhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Nik7XG5cdFxuXHR2YXIgX2NvbGxhcHNhYmxlUGFuZWxQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbGxhcHNhYmxlUGFuZWxQYWdlKTtcblx0XG5cdHZhciBfYWxlcnRQYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODUpO1xuXHRcblx0dmFyIF9hbGVydFBhZ2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYWxlcnRQYWdlKTtcblx0XG5cdHZhciBfc3Bpbm5lclBhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5MCk7XG5cdFxuXHR2YXIgX3NwaW5uZXJQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NwaW5uZXJQYWdlKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgJy8nOiB7XG5cdCAgICBjb21wb25lbnQ6IF9pbmRleDIuZGVmYXVsdFxuXHQgIH0sXG5cdCAgJy9hbGVydCc6IHtcblx0ICAgIGNvbXBvbmVudDoge1xuXHQgICAgICB0ZW1wbGF0ZTogJzxhbGVydC1wYWdlPjwvYWxlcnQtcGFnZT4nLFxuXHQgICAgICBjb21wb25lbnRzOiB7IEFsZXJ0UGFnZTogX2FsZXJ0UGFnZTIuZGVmYXVsdCB9XG5cdCAgICB9XG5cdCAgfSxcblx0ICAnL3NwaW5uZXInOiB7XG5cdCAgICBjb21wb25lbnQ6IHtcblx0ICAgICAgdGVtcGxhdGU6ICc8c3Bpbm5lci1wYWdlPjwvc3Bpbm5lci1wYWdlPicsXG5cdCAgICAgIGNvbXBvbmVudHM6IHsgU3Bpbm5lclBhZ2U6IF9zcGlubmVyUGFnZTIuZGVmYXVsdCB9XG5cdCAgICB9XG5cdCAgfSxcblx0ICAnL3N0ZXAtdHJhY2tlcic6IHtcblx0ICAgIGNvbXBvbmVudDoge1xuXHQgICAgICB0ZW1wbGF0ZTogJzxzdGVwLXRyYWNrZXItcGFnZT48L3N0ZXAtdHJhY2tlci1wYWdlPicsXG5cdCAgICAgIGNvbXBvbmVudHM6IHsgU3RlcFRyYWNrZXJQYWdlOiBfc3RlcFRyYWNrZXJQYWdlMi5kZWZhdWx0IH1cblx0ICAgIH1cblx0ICB9LFxuXHQgICcvdGFicyc6IHtcblx0ICAgIGNvbXBvbmVudDoge1xuXHQgICAgICB0ZW1wbGF0ZTogJzx0YWJzLXBhZ2U+PC90YWJzLXBhZ2U+Jyxcblx0ICAgICAgY29tcG9uZW50czogeyBUYWJzUGFnZTogX3RhYnNQYWdlMi5kZWZhdWx0IH1cblx0ICAgIH1cblx0ICB9LFxuXHQgICcvbGVnYWwnOiB7XG5cdCAgICBjb21wb25lbnQ6IHtcblx0ICAgICAgdGVtcGxhdGU6ICc8bGVnYWwtcGFnZT48L2xlZ2FsLXBhZ2U+Jyxcblx0ICAgICAgY29tcG9uZW50czogeyBMZWdhbFBhZ2U6IF9sZWdhbFBhZ2UyLmRlZmF1bHQgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgJy9vdmVybGF5Jzoge1xuXHQgICAgY29tcG9uZW50OiB7XG5cdCAgICAgIHRlbXBsYXRlOiAnPG92ZXJsYXktcGFnZT48L292ZXJsYXktcGFnZT4nLFxuXHQgICAgICBjb21wb25lbnRzOiB7IE92ZXJsYXlQYWdlOiBfb3ZlcmxheVBhZ2UyLmRlZmF1bHQgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgJy9jb2xsYXBzYWJsZS1wYW5lbCc6IHtcblx0ICAgIGNvbXBvbmVudDoge1xuXHQgICAgICB0ZW1wbGF0ZTogJzxjb2xsYXBzYWJsZS1wYW5lbC1wYWdlPjwvY29sbGFwc2FibGUtcGFuZWwtcGFnZT4nLFxuXHQgICAgICBjb21wb25lbnRzOiB7IENvbGxhcHNhYmxlUGFuZWxQYWdlOiBfY29sbGFwc2FibGVQYW5lbFBhZ2UyLmRlZmF1bHQgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblxuLyoqKi8gfSxcbi8qIDY2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0Lypcblx0ICBAZGVzYyBBZGQgYmVoYXZpb3IgdG8gYW55IGVsZW1lbnQuIFdoZW4gY2xpY2tlZCwgaXQgd2lsbCBvcGVuIHRoZSBjb3JyZXNwb25kaW5nIG92ZXJsYXlcblx0ICBFeGFtcGxlOiA8YnV0dG9uIG92ZXJsYXktb3BlbmVyPVwibXktb3ZlcmxheVwiPjwvYnV0dG9uPlxuXHQqL1xuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgaXNMaXRlcmFsOiB0cnVlLFxuXHQgIGV2ZW50SGFuZGxlcjogZnVuY3Rpb24gZXZlbnRIYW5kbGVyKGUpIHtcblx0ICAgIGUucHJldmVudERlZmF1bHQoKTtcblx0ICAgIHRoaXMudm0uJHJvb3QuJGJyb2FkY2FzdCgnb3ZlcmxheTo6b3BlbicsIHRoaXMuZXhwcmVzc2lvbik7XG5cdCAgICB0aGlzLnZtLiRyb290LiRicm9hZGNhc3QoJ292ZXJsYXlDb250YWluZXI6Om9wZW4nKTtcblx0ICB9LFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5ldmVudEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdCAgfSxcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmV2ZW50SGFuZGxlci5iaW5kKHRoaXMpKTtcblx0ICB9XG5cdH07XG5cbi8qKiovIH0sXG4vKiA2NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9vdmVybGF5T3BlbmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nik7XG5cdFxuXHR2YXIgX292ZXJsYXlPcGVuZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb3ZlcmxheU9wZW5lcik7XG5cdFxuXHR2YXIgX3NldEZvY3VzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdFxuXHR2YXIgX3NldEZvY3VzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NldEZvY3VzKTtcblx0XG5cdHZhciBfaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwMCk7XG5cdFxuXHR2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4KTtcblx0XG5cdHZhciBfb3ZlcmxheUNvbnRhaW5lciA9IF9fd2VicGFja19yZXF1aXJlX18oMTk3KTtcblx0XG5cdHZhciBfb3ZlcmxheUNvbnRhaW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vdmVybGF5Q29udGFpbmVyKTtcblx0XG5cdHZhciBfb3ZlcmxheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTk4KTtcblx0XG5cdHZhciBfb3ZlcmxheTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vdmVybGF5KTtcblx0XG5cdHZhciBfbGVnYWxDb3VudGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTYpO1xuXHRcblx0dmFyIF9sZWdhbENvdW50ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGVnYWxDb3VudGVyKTtcblx0XG5cdHZhciBfbGVnYWxDb250YWluZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5NSk7XG5cdFxuXHR2YXIgX2xlZ2FsQ29udGFpbmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xlZ2FsQ29udGFpbmVyKTtcblx0XG5cdHZhciBfdGFicyA9IF9fd2VicGFja19yZXF1aXJlX18oMjAyKTtcblx0XG5cdHZhciBfdGFiczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90YWJzKTtcblx0XG5cdHZhciBfdGFiID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDEpO1xuXHRcblx0dmFyIF90YWIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdGFiKTtcblx0XG5cdHZhciBfaW5kZXgzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTQpO1xuXHRcblx0dmFyIF9pbmRleDQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleDMpO1xuXHRcblx0dmFyIF9pbmRleDUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5Myk7XG5cdFxuXHR2YXIgX2luZGV4NiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4NSk7XG5cdFxuXHR2YXIgX2luZGV4NyA9IF9fd2VicGFja19yZXF1aXJlX18oMTk5KTtcblx0XG5cdHZhciBfaW5kZXg4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXg3KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHR2YXIgY29tcG9uZW50cyA9IHtcblx0ICBTdGVwVHJhY2tlcjogX2luZGV4Mi5kZWZhdWx0LFxuXHQgIE92ZXJsYXlDb250YWluZXI6IF9vdmVybGF5Q29udGFpbmVyMi5kZWZhdWx0LFxuXHQgIE92ZXJsYXk6IF9vdmVybGF5Mi5kZWZhdWx0LFxuXHQgIExlZ2FsQ291bnRlcjogX2xlZ2FsQ291bnRlcjIuZGVmYXVsdCxcblx0ICBMZWdhbENvbnRhaW5lcjogX2xlZ2FsQ29udGFpbmVyMi5kZWZhdWx0LFxuXHQgIFRhYnM6IF90YWJzMi5kZWZhdWx0LFxuXHQgIFRhYjogX3RhYjIuZGVmYXVsdCxcblx0ICBDb2xsYXBzYWJsZVBhbmVsOiBfaW5kZXg0LmRlZmF1bHQsXG5cdCAgQWxlcnQ6IF9pbmRleDYuZGVmYXVsdCxcblx0ICBTcGlubmVyOiBfaW5kZXg4LmRlZmF1bHRcblx0fTtcblx0dmFyIGRpcmVjdGl2ZXMgPSB7XG5cdCAgb3ZlcmxheU9wZW5lcjogX292ZXJsYXlPcGVuZXIyLmRlZmF1bHQsXG5cdCAgc2V0Rm9jdXM6IF9zZXRGb2N1czIuZGVmYXVsdFxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbnN0YWxsKFZ1ZSkge1xuXHQgIGZvciAodmFyIG5hbWUgaW4gY29tcG9uZW50cykge1xuXHQgICAgVnVlLmNvbXBvbmVudChuYW1lLCBjb21wb25lbnRzW25hbWVdKTtcblx0ICB9XG5cdCAgZm9yICh2YXIgX25hbWUgaW4gZGlyZWN0aXZlcykge1xuXHQgICAgVnVlLmRpcmVjdGl2ZShfbmFtZSwgZGlyZWN0aXZlc1tfbmFtZV0pO1xuXHQgIH1cblx0fTtcblxuLyoqKi8gfSxcbi8qIDY4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgbWV0aG9kczoge1xuXHQgICAgcm9vdEJyb2FkY2FzdDogZnVuY3Rpb24gcm9vdEJyb2FkY2FzdCgpIHtcblx0ICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0ICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLiRicm9hZGNhc3QuYXBwbHkodGhpcy4kcm9vdCwgYXJncyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9LFxuLyogNjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBtZXRob2RzOiB7XG5cdCAgICBwYXJzZUpTT046IGZ1bmN0aW9uIHBhcnNlSlNPTihyZXNwb25zZSkge1xuXHQgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblxuLyoqKi8gfSxcbi8qIDcwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmh5X2MtaWNvbntmb250LWZhbWlseTpUZWx1cyBJY29uLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO3RleHQtZGVjb3JhdGlvbjpub25lO3RleHQtcmVuZGVyaW5nOm9wdGltaXplTGVnaWJpbGl0eTtjb2xvcjppbmhlcml0O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtmb250LXNpemU6aW5oZXJpdDtsaW5lLWhlaWdodDppbmhlcml0fS5oeV9jLWljb25fX3NxdWFyZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6Mi41cmVtO2xpbmUtaGVpZ2h0OjNyZW07d2lkdGg6M3JlbTtoZWlnaHQ6M3JlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS0yeHtmb250LXNpemU6MmVtfS5oeV9jLWljb24tLTN4e2ZvbnQtc2l6ZTozZW19Lmh5X2MtaWNvbi0tNHh7Zm9udC1zaXplOjRlbX0uaHlfYy1pY29uX19zdHlsZWd1aWRle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToycmVtO2xpbmUtaGVpZ2h0OjRyZW07d2lkdGg6NHJlbTtoZWlnaHQ6NHJlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS1jaXJjbGUtdGhpY2stb3V0bGluZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDFcXFwifS5oeV9jLWljb24tLWNpcmNsZS1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDJcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDVcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtbG9nbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDlcXFwifS5oeV9jLWljb24tLWJhci1jaGFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTBcXFwifS5oeV9jLWljb24tLXBpY3R1cmUtZnJhbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDExXFxcIn0uaHlfYy1pY29uLS1wYXBlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTJcXFwifS5oeV9jLWljb24tLXBhcGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxM1xcXCJ9Lmh5X2MtaWNvbi0tZm9sZGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNFxcXCJ9Lmh5X2MtaWNvbi0tc2hhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE1XFxcIn0uaHlfYy1pY29uLS1tYWduaWZ5LWdsYXNzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNlxcXCJ9Lmh5X2MtaWNvbi0td2FybmluZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMThcXFwifS5oeV9jLWljb24tLXN0YXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE5XFxcIn0uaHlfYy1pY29uLS1zdGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMFxcXCJ9Lmh5X2MtaWNvbi0taGVhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIxXFxcIn0uaHlfYy1pY29uLS1saWZlc2F2ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIyXFxcIn0uaHlfYy1pY29uLS1oYW1idXJnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI0XFxcIn0uaHlfYy1pY29uLS1ncmlkLXNxdWFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjVcXFwifS5oeV9jLWljb24tLWdyaWQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjZcXFwifS5oeV9jLWljb24tLWxpZ2h0YnVsYjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjdcXFwifS5oeV9jLWljb24tLXNwZWVkb21ldGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOFxcXCJ9Lmh5X2MtaWNvbi0tYWRkLXJlbW92ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjlcXFwifS5oeV9jLWljb24tLWNhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMwXFxcIn0uaHlfYy1pY29uLS10d2l0dGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMVxcXCJ9Lmh5X2MtaWNvbi0tZmFjZWJvb2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMyXFxcIn0uaHlfYy1pY29uLS15b3V0dWJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzM1xcXCJ9Lmh5X2MtaWNvbi0tZ29vZ2xlLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM0XFxcIn0uaHlfYy1pY29uLS10cmVuZC1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNVxcXCJ9Lmh5X2MtaWNvbi0tcGxheS1idXR0b24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM2XFxcIn0uaHlfYy1pY29uLS12aWRlby1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzdcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM4XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzlcXFwifS5oeV9jLWljb24tLWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MFxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQxXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MlxcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NFxcXCJ9Lmh5X2MtaWNvbi0tbW91c2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ1XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDZcXFwifS5oeV9jLWljb24tLXBhcGVyLW5vdGVzLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0N1xcXCJ9Lmh5X2MtaWNvbi0tdHY6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ4XFxcIn0uaHlfYy1pY29uLS1maWxtOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OVxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUwXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUxXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MlxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTNcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTVcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NlxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1N1xcXCJ9Lmh5X2MtaWNvbi0tdXNlcnM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU5XFxcIn0uaHlfYy1pY29uLS11c2Vycy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MFxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjJcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtYm94ZWQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYzXFxcIn0uaHlfYy1pY29uLS1nZWFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NFxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NVxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjZcXFwifS5oeV9jLWljb24tLXBhZGxvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY4XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrLWludmVyZXRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjlcXFwifS5oeV9jLWljb24tLXN0YWNrZWQtcGFwZXJzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MVxcXCJ9Lmh5X2MtaWNvbi0tbXVzaWMtbm90ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzJcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDczXFxcIn0uaHlfYy1pY29uLS10YWJsZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc0XFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc1XFxcIn0uaHlfYy1pY29uLS1tb3VzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzZcXFwifS5oeV9jLWljb24tLXByaWNldGFnLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3N1xcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc4XFxcIn0uaHlfYy1pY29uLS10di1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzlcXFwifS5oeV9jLWljb24tLWZpbG0tY2xhcHBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODBcXFwifS5oeV9jLWljb24tLWVudmVsb3BlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MVxcXCJ9Lmh5X2MtaWNvbi0tcGhvbmUtaGFuZHNldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODJcXFwifS5oeV9jLWljb24tLXVzYi1zdGljay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODNcXFwifS5oeV9jLWljb24tLWhvbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg0XFxcIn0uaHlfYy1pY29uLS1ob21lLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg1XFxcIn0uaHlfYy1pY29uLS1ob21lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NlxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTFcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkyXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5M1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk0XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5N1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOThcXFwifS5oeV9jLWljb24tLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk5XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDJcXFwifS5oeV9jLWljb24tLXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA0XFxcIn0uaHlfYy1pY29uLS14LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA1XFxcIn0uaHlfYy1pY29uLS14LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNlxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOFxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA5XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEwXFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTFcXFwifS5oeV9jLWljb24tLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEyXFxcIn0uaHlfYy1pY29uLS1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEzXFxcIn0uaHlfYy1pY29uLS1wbHVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNFxcXCJ9Lmh5X2MtaWNvbi0tbWludXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE1XFxcIn0uaHlfYy1pY29uLS1taW51cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNlxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE3XFxcIn0uaHlfYy1pY29uLS1jaGF0LWJ1YmJsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTlcXFwifS5oeV9jLWljb24tLWNoYXQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjBcXFwifS5oeV9jLWljb24tLWNoYXQtY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIxXFxcIn0uaHlfYy1pY29uLS1jaGF0LXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIyXFxcIn0uaHlfYy1pY29uLS1jaGF0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyM1xcXCJ9Lmh5X2MtaWNvbi0tc2ltLWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI1XFxcIn0uaHlfYy1pY29uLS1jYWxjdWxhdG9yOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNlxcXCJ9Lmh5X2MtaWNvbi0tYmx1ZXRvb3RoLWhlYWRzZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI3XFxcIn0uaHlfYy1pY29uLS1vdXRnb2luZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyOVxcXCJ9Lmh5X2MtaWNvbi0taW5jb21pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzBcXFwifS5oeV9jLWljb24tLWNhdXRpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMxXFxcIn0uaHlfYy1pY29uLS13aWZpLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMlxcXCJ9Lmh5X2MtaWNvbi0td2lmaTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzNcXFwifS5oeV9jLWljb24tLXRoaW4tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNVxcXCJ9Lmh5X2MtaWNvbi0taW5mby1pbnZlcnRlZDpiZWZvcmUsLmh5X2MtaWNvbi0taW5mbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzZcXFwifS5oeV9jLWljb24tLXRyZW5kLXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzOFxcXCJ9Lmh5X2MtaWNvbi0tZ2xvYmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQwXFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQyXFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ0XFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NVxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ2XFxcIn0uaHlfYy1pY29uLS1vdmVydmlldy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDdcXFwifS5oeV9jLWljb24tLXRlbHVzLWNpcmNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDhcXFwifS5oeV9jLWljb24tLXB1bHNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OVxcXCJ9Lmh5X2MtaWNvbi0tbWlrZS1tb2JpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUwXFxcIn0uaHlfYy1pY29uLS1yZXdhcmRzLWJhZGdlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MVxcXCJ9Lmh5X2MtaWNvbi0tZmlsdGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MlxcXCJ9Lmh5X2MtaWNvbi0tc2NoZWR1bGUtdGFsazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTNcXFwifS5oeV9jLWljb24tLXdhcm5pbmc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU0XFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU1XFxcIn0uaHlfYy1pY29uLS1jYXJ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NlxcXCJ9Lmh5X2MtaWNvbi0tbGl2ZS1jaGF0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1N1xcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNThcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3Q6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU5XFxcIn0uaHlfYy1pY29uLS1jbG91ZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjBcXFwifS5oeV9jLWljb24tLWRhdGE6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYxXFxcIn0uaHlfYy1pY29uLS1kZWxpdmVyeS10cnVjazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjJcXFwifS5oeV9jLWljb24tLXByb3RlY3Rpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYzXFxcIn0uaHlfYy1pY29uLS1jb2xvdXItcGlja2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NFxcXCJ9Lmh5X2MtaWNvbi0tbXVsdGktYWNjb3VudC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjVcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NlxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY3XFxcIn0uaHlfYy1pY29uLS1kb2xsYXItc2lnbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjhcXFwifS5oeV9jLWljb24tLWxpbmstYWNjb3VudDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjlcXFwifS5oeV9jLWljb24tLWRhdGEtbWFuYWdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzBcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MVxcXCJ9Lmh5X2MtaWNvbi0tdG9vbHMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcyXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzNcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NFxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NVxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NlxcXCJ9Lmh5X2MtaWNvbi0tbGlua2VkLWluLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3N1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc4XFxcIn0uaHlfYy1pY29uLS1taWNyb3Bob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgwXFxcIn0uaHlfYy1pY29uLS1uZXR3b3JraW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MVxcXCJ9Lmh5X2MtaWNvbi0tY3ljbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgyXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgzXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg0XFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWFkZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODVcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NlxcXCJ9LnNnX2MtYXBpLXRhYmxle2JvcmRlci1zcGFjaW5nOjAgMTBweDt3aWR0aDoxMDAlfS5zZ19jLWFwaS10YWJsZSB0cnstd2Via2l0LWJveC1mbGV4OjE7LW1zLWZsZXg6MTtmbGV4OjF9LnNnX2MtYXBpLXRhYmxlIHRoLC5zZ19jLWFwaS10YWJsZSB0cjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNlZWV9LnNnX2MtYXBpLXRhYmxlIHRke3RleHQtYWxpZ246Y2VudGVyfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDcxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLnNnX2MtbmF2e2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246Zml4ZWQ7bGVmdDowO3dpZHRoOjI1cmVtO2hlaWdodDoxMDAlO2JvcmRlci1yaWdodDouMXJlbSBzb2xpZCAjZTJlMmUyO3BhZGRpbmc6MnJlbTtwYWRkaW5nLXRvcDo2OHB4O292ZXJmbG93LXg6aGlkZGVuO292ZXJmbG93LXk6YXV0bztiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7ei1pbmRleDo5OTl9LnNnX2MtbmF2X19zZWN0aW9ue2ZvbnQtZmFtaWx5OlRlbHVzIE1lZGl1bSxIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtmb250LXNpemU6MS4ycmVtO2JvcmRlci1ib3R0b206LjFyZW0gc29saWQgI2UyZTJlMjtwYWRkaW5nLXRvcDoxcmVtO3BhZGRpbmctYm90dG9tOi41cmVtO21hcmdpbjoxcmVtIDB9LnNnX2MtbmF2X19saXN0LWl0ZW17cGFkZGluZzo1cHggMH0uc2dfYy1uYXZfX2xpbms6aG92ZXJ7Y29sb3I6IzhjNjhhNn0uc2dfYy1uYXZfX2xpbmstLWFjdGl2ZXtjb2xvcjojNTdhNzA4fVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDcyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiaGVhZGVyLnNnX2Mtc2l0ZS1oZWFkZXJ7YmFja2dyb3VuZC1jb2xvcjojNGIyODZkO2hlaWdodDo2OHB4O3RleHQtYWxpZ246bGVmdDtwb3NpdGlvbjpmaXhlZDt3aWR0aDoxMDAlO3otaW5kZXg6OTk5OX1oZWFkZXIuc2dfYy1zaXRlLWhlYWRlciAuc2dfYy1zaXRlLWhlYWRlcl9fY29udGFpbmVye2hlaWdodDoxMDAlO3dpZHRoOjEwMCV9aGVhZGVyLnNnX2Mtc2l0ZS1oZWFkZXIgLnNnX2Mtc2l0ZS1oZWFkZXJfX2NvbnRhaW5lciBpbWcubG9nb3toZWlnaHQ6MTAwJTtwYWRkaW5nOjIwcHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7bWF4LXdpZHRoOjEwMCV9aGVhZGVyLnNnX2Mtc2l0ZS1oZWFkZXIgLnNnX2Mtc2l0ZS1oZWFkZXJfX3RvZ2dsZWJ0bntjb2xvcjojZmZmO2ZvbnQtc2l6ZToycmVtO21hcmdpbjowO2JhY2tncm91bmQ6aHNsYSgwLDAlLDEwMCUsLjEpO3BhZGRpbmc6MS41cmVtO2Zsb2F0OmxlZnQ7Y3Vyc29yOnBvaW50ZXI7Ym9yZGVyOjA7aGVpZ2h0OjEwMCU7ZGlzcGxheTppbmxpbmUtYmxvY2t9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogNzMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJib2R5e2JhY2tncm91bmQtY29sb3I6I2Y1ZjZmN30uc2dfYy1zaXRlX19tYWlue3BhZGRpbmctdG9wOjY4cHg7bWFyZ2luLWxlZnQ6MjVyZW19QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDo1OTlweCl7LnNnX2Mtc2l0ZV9fbWFpbnttYXJnaW4tbGVmdDowfX0uc2dfYy1kZW1ve21hcmdpbjoyMHB4IDB9LnNnX2MtZGVtb19fY29udGFpbmVye2JhY2tncm91bmQtY29sb3I6I2ZmZjtvdmVyZmxvdzpoaWRkZW47Ym9yZGVyLXJhZGl1czo1cHg7Ym9yZGVyOjFweCBzb2xpZCAjZWVlO3BhZGRpbmc6MjVweDttYXJnaW46MjBweCAwfWNvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de2NvbG9yOiMwMDA7YmFja2dyb3VuZDpub25lO3RleHQtc2hhZG93OjAgMXB4ICNmZmY7Zm9udC1mYW1pbHk6Q29uc29sYXMsTW9uYWNvLEFuZGFsZSBNb25vLFVidW50dSBNb25vLG1vbm9zcGFjZTt0ZXh0LWFsaWduOmxlZnQ7d2hpdGUtc3BhY2U6cHJlO3dvcmQtc3BhY2luZzpub3JtYWw7d29yZC1icmVhazpub3JtYWw7d29yZC13cmFwOm5vcm1hbDtsaW5lLWhlaWdodDoxLjU7LW1vei10YWItc2l6ZTo0Oy1vLXRhYi1zaXplOjQ7dGFiLXNpemU6NDstd2Via2l0LWh5cGhlbnM6bm9uZTstbXMtaHlwaGVuczpub25lO2h5cGhlbnM6bm9uZX1jb2RlW2NsYXNzKj1sYW5ndWFnZS1dOjotbW96LXNlbGVjdGlvbixjb2RlW2NsYXNzKj1sYW5ndWFnZS1dIDo6LW1vei1zZWxlY3Rpb24scHJlW2NsYXNzKj1sYW5ndWFnZS1dOjotbW96LXNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV0gOjotbW96LXNlbGVjdGlvbnt0ZXh0LXNoYWRvdzpub25lO2JhY2tncm91bmQ6I2IzZDRmY31jb2RlW2NsYXNzKj1sYW5ndWFnZS1dOjpzZWxlY3Rpb24sY29kZVtjbGFzcyo9bGFuZ3VhZ2UtXSA6OnNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV06OnNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV0gOjpzZWxlY3Rpb257dGV4dC1zaGFkb3c6bm9uZTtiYWNrZ3JvdW5kOiNiM2Q0ZmN9QG1lZGlhIHByaW50e2NvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de3RleHQtc2hhZG93Om5vbmV9fXByZVtjbGFzcyo9bGFuZ3VhZ2UtXXtwYWRkaW5nOjFlbTttYXJnaW46LjVlbSAwO292ZXJmbG93OmF1dG99Om5vdChwcmUpPmNvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de2JhY2tncm91bmQ6I2Y1ZjJmMH06bm90KHByZSk+Y29kZVtjbGFzcyo9bGFuZ3VhZ2UtXXtwYWRkaW5nOi4xZW07Ym9yZGVyLXJhZGl1czouM2VtO3doaXRlLXNwYWNlOm5vcm1hbH0udG9rZW4uY2RhdGEsLnRva2VuLmNvbW1lbnQsLnRva2VuLmRvY3R5cGUsLnRva2VuLnByb2xvZ3tjb2xvcjojNzA4MDkwfS50b2tlbi5wdW5jdHVhdGlvbntjb2xvcjojOTk5fS5uYW1lc3BhY2V7b3BhY2l0eTouN30udG9rZW4uYm9vbGVhbiwudG9rZW4uY29uc3RhbnQsLnRva2VuLmRlbGV0ZWQsLnRva2VuLm51bWJlciwudG9rZW4ucHJvcGVydHksLnRva2VuLnN5bWJvbCwudG9rZW4udGFne2NvbG9yOiM5MDV9LnRva2VuLmF0dHItbmFtZSwudG9rZW4uYnVpbHRpbiwudG9rZW4uY2hhciwudG9rZW4uaW5zZXJ0ZWQsLnRva2VuLnNlbGVjdG9yLC50b2tlbi5zdHJpbmd7Y29sb3I6IzY5MH0ubGFuZ3VhZ2UtY3NzIC50b2tlbi5zdHJpbmcsLnN0eWxlIC50b2tlbi5zdHJpbmcsLnRva2VuLmVudGl0eSwudG9rZW4ub3BlcmF0b3IsLnRva2VuLnVybHtjb2xvcjojYTY3ZjU5O2JhY2tncm91bmQ6aHNsYSgwLDAlLDEwMCUsLjUpfS50b2tlbi5hdHJ1bGUsLnRva2VuLmF0dHItdmFsdWUsLnRva2VuLmtleXdvcmR7Y29sb3I6IzA3YX0udG9rZW4uZnVuY3Rpb257Y29sb3I6I2RkNGE2OH0udG9rZW4uaW1wb3J0YW50LC50b2tlbi5yZWdleCwudG9rZW4udmFyaWFibGV7Y29sb3I6I2U5MH0udG9rZW4uYm9sZCwudG9rZW4uaW1wb3J0YW50e2ZvbnQtd2VpZ2h0OjcwMH0udG9rZW4uaXRhbGlje2ZvbnQtc3R5bGU6aXRhbGljfS50b2tlbi5lbnRpdHl7Y3Vyc29yOmhlbHB9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogNzQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuaHlfYy1pY29ue2ZvbnQtZmFtaWx5OlRlbHVzIEljb24sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7dGV4dC1kZWNvcmF0aW9uOm5vbmU7dGV4dC1yZW5kZXJpbmc6b3B0aW1pemVMZWdpYmlsaXR5O2NvbG9yOmluaGVyaXQ7dmVydGljYWwtYWxpZ246bWlkZGxlO2ZvbnQtc2l6ZTppbmhlcml0O2xpbmUtaGVpZ2h0OmluaGVyaXR9Lmh5X2MtaWNvbl9fc3F1YXJle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToyLjVyZW07bGluZS1oZWlnaHQ6M3JlbTt3aWR0aDozcmVtO2hlaWdodDozcmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLTJ4e2ZvbnQtc2l6ZToyZW19Lmh5X2MtaWNvbi0tM3h7Zm9udC1zaXplOjNlbX0uaHlfYy1pY29uLS00eHtmb250LXNpemU6NGVtfS5oeV9jLWljb25fX3N0eWxlZ3VpZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjJyZW07bGluZS1oZWlnaHQ6NHJlbTt3aWR0aDo0cmVtO2hlaWdodDo0cmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLWNpcmNsZS10aGljay1vdXRsaW5lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMVxcXCJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMlxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNVxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA2XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1sb2dvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwOVxcXCJ9Lmh5X2MtaWNvbi0tYmFyLWNoYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMFxcXCJ9Lmh5X2MtaWNvbi0tcGljdHVyZS1mcmFtZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTFcXFwifS5oeV9jLWljb24tLXBhcGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEzXFxcIn0uaHlfYy1pY29uLS1mb2xkZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE0XFxcIn0uaHlfYy1pY29uLS1zaGFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTVcXFwifS5oeV9jLWljb24tLW1hZ25pZnktZ2xhc3M6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE2XFxcIn0uaHlfYy1pY29uLS13YXJuaW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOFxcXCJ9Lmh5X2MtaWNvbi0tc3Rhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTlcXFwifS5oeV9jLWljb24tLXN0YXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIwXFxcIn0uaHlfYy1pY29uLS1oZWFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjFcXFwifS5oeV9jLWljb24tLWxpZmVzYXZlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjJcXFwifS5oeV9jLWljb24tLWhhbWJ1cmdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjRcXFwifS5oeV9jLWljb24tLWdyaWQtc3F1YXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNVxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNlxcXCJ9Lmh5X2MtaWNvbi0tbGlnaHRidWxiOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyN1xcXCJ9Lmh5X2MtaWNvbi0tc3BlZWRvbWV0ZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI4XFxcIn0uaHlfYy1pY29uLS1hZGQtcmVtb3ZlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOVxcXCJ9Lmh5X2MtaWNvbi0tY2FydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzBcXFwifS5oeV9jLWljb24tLXR3aXR0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMxXFxcIn0uaHlfYy1pY29uLS1mYWNlYm9vazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzJcXFwifS5oeV9jLWljb24tLXlvdXR1YmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMzXFxcIn0uaHlfYy1pY29uLS1nb29nbGUtcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzRcXFwifS5oeV9jLWljb24tLXRyZW5kLWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM1XFxcIn0uaHlfYy1pY29uLS1wbGF5LWJ1dHRvbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzZcXFwifS5oeV9jLWljb24tLXZpZGVvLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzN1xcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzhcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOVxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQwXFxcIn0uaHlfYy1pY29uLS1jbG9jay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDFcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQyXFxcIn0uaHlfYy1pY29uLS10YWJsZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQzXFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ0XFxcIn0uaHlfYy1pY29uLS1tb3VzZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDVcXFwifS5oeV9jLWljb24tLXByaWNldGFnOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItbm90ZXMtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ3XFxcIn0uaHlfYy1pY29uLS10djpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDhcXFwifS5oeV9jLWljb24tLWZpbG06YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ5XFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTBcXFwifS5oeV9jLWljb24tLXVzYi1zdGljazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTFcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUyXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1M1xcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NVxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU2XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU3XFxcIn0uaHlfYy1pY29uLS11c2VyczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTlcXFwifS5oeV9jLWljb24tLXVzZXJzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYwXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1ib3hlZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjNcXFwifS5oeV9jLWljb24tLWdlYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY0XFxcIn0uaHlfYy1pY29uLS1nZWFyLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY1XFxcIn0uaHlfYy1pY29uLS1nZWFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NlxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjhcXFwifS5oeV9jLWljb24tLXBhZGxvY2staW52ZXJldGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OVxcXCJ9Lmh5X2MtaWNvbi0tc3RhY2tlZC1wYXBlcnMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcxXFxcIn0uaHlfYy1pY29uLS1tdXNpYy1ub3RlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MlxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzNcXFwifS5oeV9jLWljb24tLXRhYmxldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzRcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzVcXFwifS5oeV9jLWljb24tLW1vdXNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NlxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc3XFxcIn0uaHlfYy1pY29uLS1wYXBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzhcXFwifS5oeV9jLWljb24tLXR2LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OVxcXCJ9Lmh5X2MtaWNvbi0tZmlsbS1jbGFwcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MFxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgxXFxcIn0uaHlfYy1pY29uLS1waG9uZS1oYW5kc2V0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MlxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODRcXFwifS5oeV9jLWljb24tLWhvbWUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODVcXFwifS5oeV9jLWljb24tLWhvbWUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg2XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODhcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTJcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkzXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTRcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk1XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk2XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk3XFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTlcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAwXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDFcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMlxcXCJ9Lmh5X2MtaWNvbi0teDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDRcXFwifS5oeV9jLWljb24tLXgtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDVcXFwifS5oeV9jLWljb24tLXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA2XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcms6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA4XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDlcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTBcXFwifS5oeV9jLWljb24tLWluZmluaXR5OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMVxcXCJ9Lmh5X2MtaWNvbi0tcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTJcXFwifS5oeV9jLWljb24tLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTNcXFwifS5oeV9jLWljb24tLXBsdXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE0XFxcIn0uaHlfYy1pY29uLS1taW51czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTVcXFwifS5oeV9jLWljb24tLW1pbnVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE2XFxcIn0uaHlfYy1pY29uLS1taW51cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTdcXFwifS5oeV9jLWljb24tLWNoYXQtYnViYmxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExOVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMFxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjFcXFwifS5oeV9jLWljb24tLWNoYXQteDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjJcXFwifS5oeV9jLWljb24tLWNoYXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIzXFxcIn0uaHlfYy1pY29uLS1zaW0tY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjVcXFwifS5oeV9jLWljb24tLWNhbGN1bGF0b3I6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI2XFxcIn0uaHlfYy1pY29uLS1ibHVldG9vdGgtaGVhZHNldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjdcXFwifS5oeV9jLWljb24tLW91dGdvaW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI5XFxcIn0uaHlfYy1pY29uLS1pbmNvbWluZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMFxcXCJ9Lmh5X2MtaWNvbi0tY2F1dGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzFcXFwifS5oeV9jLWljb24tLXdpZmktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMyXFxcIn0uaHlfYy1pY29uLS13aWZpOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzM1xcXCJ9Lmh5X2MtaWNvbi0tdGhpbi1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM1XFxcIn0uaHlfYy1pY29uLS1pbmZvLWludmVydGVkOmJlZm9yZSwuaHlfYy1pY29uLS1pbmZvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNlxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM4XFxcIn0uaHlfYy1pY29uLS1nbG9iZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDBcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDJcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDRcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ1XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDZcXFwifS5oeV9jLWljb24tLW92ZXJ2aWV3LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0N1xcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtY2lyY2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OFxcXCJ9Lmh5X2MtaWNvbi0tcHVsc2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ5XFxcIn0uaHlfYy1pY29uLS1taWtlLW1vYmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTBcXFwifS5oeV9jLWljb24tLXJld2FyZHMtYmFkZ2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUxXFxcIn0uaHlfYy1pY29uLS1maWx0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUyXFxcIn0uaHlfYy1pY29uLS1zY2hlZHVsZS10YWxrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1M1xcXCJ9Lmh5X2MtaWNvbi0td2FybmluZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTRcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTVcXFwifS5oeV9jLWljb24tLWNhcnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU2XFxcIn0uaHlfYy1pY29uLS1saXZlLWNoYXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU3XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OFxcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTlcXFwifS5oeV9jLWljb24tLWNsb3VkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MFxcXCJ9Lmh5X2MtaWNvbi0tZGF0YTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjFcXFwifS5oeV9jLWljb24tLWRlbGl2ZXJ5LXRydWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MlxcXCJ9Lmh5X2MtaWNvbi0tcHJvdGVjdGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjNcXFwifS5oeV9jLWljb24tLWNvbG91ci1waWNrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY0XFxcIn0uaHlfYy1pY29uLS1tdWx0aS1hY2NvdW50LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NVxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY2XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjdcXFwifS5oeV9jLWljb24tLWRvbGxhci1zaWduOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OFxcXCJ9Lmh5X2MtaWNvbi0tbGluay1hY2NvdW50OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OVxcXCJ9Lmh5X2MtaWNvbi0tZGF0YS1tYW5hZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MFxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcxXFxcIn0uaHlfYy1pY29uLS10b29scy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzJcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3M1xcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc0XFxcIn0uaHlfYy1pY29uLS1pcC1mYXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc1XFxcIn0uaHlfYy1pY29uLS1pcC1mYXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc2XFxcIn0uaHlfYy1pY29uLS1saW5rZWQtaW4taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc3XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzhcXFwifS5oeV9jLWljb24tLW1pY3JvcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc5XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODBcXFwifS5oeV9jLWljb24tLW5ldHdvcmtpbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgxXFxcIn0uaHlfYy1pY29uLS1jeWNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODJcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODNcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODRcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtYWRkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NVxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg2XFxcIn0uZmFkZS10cmFuc2l0aW9uey13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7dHJhbnNpdGlvbjphbGwgLjNzIGVhc2V9LmZhZGUtZW50ZXIsLmZhZGUtbGVhdmV7b3BhY2l0eTowfS5jLWFsZXJ0e3Bvc2l0aW9uOnJlbGF0aXZlO3BhZGRpbmc6N3B4IDE1cHg7bWFyZ2luLWJvdHRvbToxcmVtO2JvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXJhZGl1czouMjVyZW19LmMtYWxlcnQtLWluZm97YmFja2dyb3VuZC1jb2xvcjojMzMzO2JvcmRlci1jb2xvcjojMDAwO2NvbG9yOiNmZmZ9LmMtYWxlcnQtLWluZm8gYnV0dG9ue2NvbG9yOiNmZmZ9LmMtYWxlcnQtLXN1Y2Nlc3N7YmFja2dyb3VuZC1jb2xvcjojZTZmZmNjO2JvcmRlci1jb2xvcjojOWYzO2NvbG9yOiM0MDgwMDB9LmMtYWxlcnQtLWVycm9ye2JhY2tncm91bmQtY29sb3I6I2Y4ZGRlMztib3JkZXItY29sb3I6I2YyYzBjYTtjb2xvcjojYzgxMjM1fS5jLWFsZXJ0X19jbG9zZS1idXR0b257cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7cmlnaHQ6MTBweDstd2Via2l0LWFwcGVhcmFuY2U6bm9uZTtwYWRkaW5nOjA7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZDowIDA7Ym9yZGVyOjA7Zm9udC1zaXplOjIuNXJlbTtvcGFjaXR5Oi4yfS5jLWFsZXJ0X19jbG9zZS1idXR0b246aG92ZXJ7b3BhY2l0eTouM31cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0sXG4vKiA3NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5oeV9jLWljb257Zm9udC1mYW1pbHk6VGVsdXMgSWNvbixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjt0ZXh0LWRlY29yYXRpb246bm9uZTt0ZXh0LXJlbmRlcmluZzpvcHRpbWl6ZUxlZ2liaWxpdHk7Y29sb3I6aW5oZXJpdDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Zm9udC1zaXplOmluaGVyaXQ7bGluZS1oZWlnaHQ6aW5oZXJpdH0uaHlfYy1pY29uX19zcXVhcmV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjIuNXJlbTtsaW5lLWhlaWdodDozcmVtO3dpZHRoOjNyZW07aGVpZ2h0OjNyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tMnh7Zm9udC1zaXplOjJlbX0uaHlfYy1pY29uLS0zeHtmb250LXNpemU6M2VtfS5oeV9jLWljb24tLTR4e2ZvbnQtc2l6ZTo0ZW19Lmh5X2MtaWNvbl9fc3R5bGVndWlkZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6MnJlbTtsaW5lLWhlaWdodDo0cmVtO3dpZHRoOjRyZW07aGVpZ2h0OjRyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXRoaWNrLW91dGxpbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uaHlfYy1pY29uLS1jaXJjbGUtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA1XFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDZcXFwifS5oeV9jLWljb24tLXRlbHVzLWxvZ286YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA5XFxcIn0uaHlfYy1pY29uLS1iYXItY2hhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEwXFxcIn0uaHlfYy1pY29uLS1waWN0dXJlLWZyYW1lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMVxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEyXFxcIn0uaHlfYy1pY29uLS1wYXBlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTNcXFwifS5oeV9jLWljb24tLWZvbGRlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTRcXFwifS5oeV9jLWljb24tLXNoYXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNVxcXCJ9Lmh5X2MtaWNvbi0tbWFnbmlmeS1nbGFzczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTZcXFwifS5oeV9jLWljb24tLXdhcm5pbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE4XFxcIn0uaHlfYy1pY29uLS1zdGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOVxcXCJ9Lmh5X2MtaWNvbi0tc3RhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjBcXFwifS5oeV9jLWljb24tLWhlYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMVxcXCJ9Lmh5X2MtaWNvbi0tbGlmZXNhdmVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMlxcXCJ9Lmh5X2MtaWNvbi0taGFtYnVyZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNFxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI1XFxcIn0uaHlfYy1pY29uLS1ncmlkLWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI2XFxcIn0uaHlfYy1pY29uLS1saWdodGJ1bGI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI3XFxcIn0uaHlfYy1pY29uLS1zcGVlZG9tZXRlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjhcXFwifS5oeV9jLWljb24tLWFkZC1yZW1vdmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI5XFxcIn0uaHlfYy1pY29uLS1jYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMFxcXCJ9Lmh5X2MtaWNvbi0tdHdpdHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzFcXFwifS5oeV9jLWljb24tLWZhY2Vib29rOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMlxcXCJ9Lmh5X2MtaWNvbi0teW91dHViZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzNcXFwifS5oeV9jLWljb24tLWdvb2dsZS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNFxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzVcXFwifS5oeV9jLWljb24tLXBsYXktYnV0dG9uLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNlxcXCJ9Lmh5X2MtaWNvbi0tdmlkZW8taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM3XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM5XFxcIn0uaHlfYy1pY29uLS1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDBcXFwifS5oeV9jLWljb24tLWNsb2NrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MVxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDJcXFwifS5oeV9jLWljb24tLXRhYmxldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDNcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDRcXFwifS5oeV9jLWljb24tLW1vdXNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NVxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ2XFxcIn0uaHlfYy1pY29uLS1wYXBlci1ub3Rlcy1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDdcXFwifS5oeV9jLWljb24tLXR2OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OFxcXCJ9Lmh5X2MtaWNvbi0tZmlsbTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDlcXFwifS5oeV9jLWljb24tLWVudmVsb3BlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MFxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MVxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTJcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUzXFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU1XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTZcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTdcXFwifS5oeV9jLWljb24tLXVzZXJzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1OVxcXCJ9Lmh5X2MtaWNvbi0tdXNlcnMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjBcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYyXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWJveGVkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2M1xcXCJ9Lmh5X2MtaWNvbi0tZ2VhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjRcXFwifS5oeV9jLWljb24tLWdlYXItY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjVcXFwifS5oeV9jLWljb24tLWdlYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY2XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OFxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jay1pbnZlcmV0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY5XFxcIn0uaHlfYy1pY29uLS1zdGFja2VkLXBhcGVycy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzFcXFwifS5oeV9jLWljb24tLW11c2ljLW5vdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcyXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3M1xcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NVxcXCJ9Lmh5X2MtaWNvbi0tbW91c2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc2XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzdcXFwifS5oeV9jLWljb24tLXBhcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OFxcXCJ9Lmh5X2MtaWNvbi0tdHYtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc5XFxcIn0uaHlfYy1pY29uLS1maWxtLWNsYXBwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgwXFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODFcXFwifS5oeV9jLWljb24tLXBob25lLWhhbmRzZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgyXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgzXFxcIn0uaHlfYy1pY29uLS1ob21lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NVxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODZcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTNcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTVcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24tY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTZcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTdcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDBcXFwifS5oeV9jLWljb24tLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAyXFxcIn0uaHlfYy1pY29uLS14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNFxcXCJ9Lmh5X2MtaWNvbi0teC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNVxcXCJ9Lmh5X2MtaWNvbi0teC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDZcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDhcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOVxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTExXFxcIn0uaHlfYy1pY29uLS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMlxcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExM1xcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTRcXFwifS5oeV9jLWljb24tLW1pbnVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNVxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTZcXFwifS5oeV9jLWljb24tLW1pbnVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExN1xcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1idWJibGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE5XFxcIn0uaHlfYy1pY29uLS1jaGF0LWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIwXFxcIn0uaHlfYy1pY29uLS1jaGF0LWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMlxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjNcXFwifS5oeV9jLWljb24tLXNpbS1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNVxcXCJ9Lmh5X2MtaWNvbi0tY2FsY3VsYXRvcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjZcXFwifS5oeV9jLWljb24tLWJsdWV0b290aC1oZWFkc2V0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyN1xcXCJ9Lmh5X2MtaWNvbi0tb3V0Z29pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjlcXFwifS5oeV9jLWljb24tLWluY29taW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMwXFxcIn0uaHlfYy1pY29uLS1jYXV0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzJcXFwifS5oeV9jLWljb24tLXdpZmk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMzXFxcIn0uaHlfYy1pY29uLS10aGluLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzVcXFwifS5oeV9jLWljb24tLWluZm8taW52ZXJ0ZWQ6YmVmb3JlLC5oeV9jLWljb24tLWluZm86YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM2XFxcIn0uaHlfYy1pY29uLS10cmVuZC11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzhcXFwifS5oeV9jLWljb24tLWdsb2JlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MlxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NFxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDVcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NlxcXCJ9Lmh5X2MtaWNvbi0tb3ZlcnZpZXctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ3XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1jaXJjbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ4XFxcIn0uaHlfYy1pY29uLS1wdWxzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDlcXFwifS5oeV9jLWljb24tLW1pa2UtbW9iaWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MFxcXCJ9Lmh5X2MtaWNvbi0tcmV3YXJkcy1iYWRnZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTFcXFwifS5oeV9jLWljb24tLWZpbHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTJcXFwifS5oeV9jLWljb24tLXNjaGVkdWxlLXRhbGs6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUzXFxcIn0uaHlfYy1pY29uLS13YXJuaW5nOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NVxcXCJ9Lmh5X2MtaWNvbi0tY2FydC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTZcXFwifS5oeV9jLWljb24tLWxpdmUtY2hhdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTdcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3QtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU4XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OVxcXCJ9Lmh5X2MtaWNvbi0tY2xvdWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYwXFxcIn0uaHlfYy1pY29uLS1kYXRhOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MVxcXCJ9Lmh5X2MtaWNvbi0tZGVsaXZlcnktdHJ1Y2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYyXFxcIn0uaHlfYy1pY29uLS1wcm90ZWN0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2M1xcXCJ9Lmh5X2MtaWNvbi0tY29sb3VyLXBpY2tlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjRcXFwifS5oeV9jLWljb24tLW11bHRpLWFjY291bnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY1XFxcIn0uaHlfYy1pY29uLS1hY2Nlc3Nvcmllcy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjZcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2N1xcXCJ9Lmh5X2MtaWNvbi0tZG9sbGFyLXNpZ246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY4XFxcIn0uaHlfYy1pY29uLS1saW5rLWFjY291bnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY5XFxcIn0uaHlfYy1pY29uLS1kYXRhLW1hbmFnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcwXFxcIn0uaHlfYy1pY29uLS1hY2Nlc3NvcmllczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzFcXFwifS5oeV9jLWljb24tLXRvb2xzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MlxcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTczXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzRcXFwifS5oeV9jLWljb24tLWlwLWZheDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzVcXFwifS5oeV9jLWljb24tLWlwLWZheC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzZcXFwifS5oeV9jLWljb24tLWxpbmtlZC1pbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzdcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OFxcXCJ9Lmh5X2MtaWNvbi0tbWljcm9waG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzlcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MFxcXCJ9Lmh5X2MtaWNvbi0tbmV0d29ya2luZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODFcXFwifS5oeV9jLWljb24tLWN5Y2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MlxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4M1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NFxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1hZGQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg1XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODZcXFwifS5jLWNvbGxhcHNhYmxlLXBhbmVse2JvcmRlcjoxcHggc29saWQgI2UyZTJlMjtib3gtc2hhZG93OjAgMXB4IDNweCAxcHggI2UyZTJlMn0uYy1jb2xsYXBzYWJsZS1wYW5lbF9faGVhZGVye2N1cnNvcjpwb2ludGVyO3BhZGRpbmc6MTBweCAxNXB4O3Bvc2l0aW9uOnJlbGF0aXZlfS5jLWNvbGxhcHNhYmxlLXBhbmVsX19oZWFkZXI6YWZ0ZXJ7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MWVtO3RvcDouNzVlbTtmb250LXNpemU6Ljc1ZW07Zm9udC1mYW1pbHk6VGVsdXMgSWNvbjtjb250ZW50OidcXFxcRTExNCc7Y29sb3I6IzU3YTcwOH0uYy1jb2xsYXBzYWJsZS1wYW5lbF9faGVhZGVyLS1vcGVuOmFmdGVye2NvbnRlbnQ6J1xcXFxFMTE3J30uYy1jb2xsYXBzYWJsZS1wYW5lbF9fYm9keXtib3JkZXItdG9wOjFweCBzb2xpZCAjZTJlMmUyO21heC1oZWlnaHQ6MDtwYWRkaW5nOjAgMTVweDstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlLWluLW91dDt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZS1pbi1vdXQ7b3ZlcmZsb3c6aGlkZGVuO29wYWNpdHk6MH0uYy1jb2xsYXBzYWJsZS1wYW5lbF9fYm9keS0tb3BlbntvcGFjaXR5OjE7cGFkZGluZzoxNXB4O21heC1oZWlnaHQ6OTk5OXB4fVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDc2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtbGVnYWwtY29udGFpbmVyX19vcmRlcmVkLWxpc3R7bWFyZ2luLXRvcDoxMHB4O21hcmdpbi1ib3R0b206MjBweDtsaXN0LXN0eWxlOmRlY2ltYWw7bGlzdC1zdHlsZS10eXBlOmRlY2ltYWw7cGFkZGluZy1sZWZ0OjIwcHh9LmMtbGVnYWwtY29udGFpbmVyX191bm9yZGVyZWQtbGlzdHttYXJnaW4tdG9wOjEwcHg7bWFyZ2luLWJvdHRvbToyMHB4O3BhZGRpbmctbGVmdDoyMHB4O2xpc3Qtc3R5bGU6bm9uZTtsaXN0LXN0eWxlLXR5cGU6bm9uZX0uYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbXtsaW5lLWhlaWdodDoxOXB4O21hcmdpbi1ib3R0b206MTBweDtwYWRkaW5nOjEwcHh9LmMtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0tLWFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOiNmOWYxZmZ9LmMtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0gYXtjb2xvcjojNDkxNjZkO3RleHQtZGVjb3JhdGlvbjpub25lO2JvcmRlci1ib3R0b206MXB4IGRvdHRlZDtwYWRkaW5nLWJvdHRvbToxcHh9LmMtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0gYTpob3Zlcntjb2xvcjojOGM2OGE2fVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDc3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtbGVnYWwtc3Vwe2ZvbnQtc2l6ZTouNzVlbTtsaW5lLWhlaWdodDowO3ZlcnRpY2FsLWFsaWduOnN1cGVyO3RleHQtZGVjb3JhdGlvbjpub25lO3RvcDowIWltcG9ydGFudDtjdXJzb3I6cG9pbnRlcn0uYy1sZWdhbC1zdXAgYXtjb2xvcjojNDkxNjZkfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDc4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLm5vLXNjcm9sbHtvdmVyZmxvdy14OmhpZGRlbjtvdmVyZmxvdzpoaWRkZW47b3ZlcmZsb3cteTpoaWRkZW47cG9zaXRpb246cmVsYXRpdmU7aGVpZ2h0OjEwMCV9LmMtb3ZlcmxheS1jb250YWluZXJfX2N1cnRhaW57b3BhY2l0eTowOy13ZWJraXQtdHJhbnNpdGlvbjpvcGFjaXR5IDEuM3MgZWFzZS1pbi1vdXQ7dHJhbnNpdGlvbjpvcGFjaXR5IDEuM3MgZWFzZS1pbi1vdXR9LmMtb3ZlcmxheS1jb250YWluZXJfX2N1cnRhaW4tLWFjdGl2ZXtvcGFjaXR5OjE7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLC41NSk7cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO3JpZ2h0OjA7Ym90dG9tOjB9LmMtb3ZlcmxheS1jb250YWluZXJfX292ZXJsYXlze3Bvc2l0aW9uOmZpeGVkO3JpZ2h0OjA7dG9wOjA7Ym90dG9tOjA7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC41KTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVYKDEwMCUpO3RyYW5zZm9ybTp0cmFuc2xhdGVYKDEwMCUpOy13ZWJraXQtdHJhbnNpdGlvbjoxcyBlYXNlLWluLW91dDt0cmFuc2l0aW9uOjFzIGVhc2UtaW4tb3V0fUBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6NTk5cHgpey5jLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5c3t3aWR0aDoxMDAlfX1AbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOjYwMHB4KXsuYy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXN7d2lkdGg6NjYlfX0uYy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXMtLWFjdGl2ZXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVYKDApO3RyYW5zZm9ybTp0cmFuc2xhdGVYKDApO3otaW5kZXg6OTk5OTl9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogNzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYy1vdmVybGF5e2hlaWdodDoxMDAlO3dpZHRoOjEwMCU7YmFja2dyb3VuZC1jb2xvcjojZmZmfS5jLW92ZXJsYXlfX2hlYWRlcntwYWRkaW5nOjIwcHg7cG9zaXRpb246Zml4ZWQ7dG9wOjA7aGVpZ2h0Ojc1cHg7d2lkdGg6MTAwJTtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZTJlMmUyO2JhY2tncm91bmQtY29sb3I6I2Y1ZjZmN30uYy1vdmVybGF5X19jbG9zZS1idXR0b257Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZDowO2JvcmRlcjowO3Bvc2l0aW9uOmFic29sdXRlO3RvcDoyMHB4O3JpZ2h0OjIwcHg7Zm9udC1mYW1pbHk6VGVsdXMgSWNvbjtmb250LXNpemU6MmVtO2NvbG9yOiM0OTE2NmR9LmMtb3ZlcmxheV9fY2xvc2UtYnV0dG9uOmJlZm9yZXtjb250ZW50OidcXFxcRTEwNid9LmMtb3ZlcmxheV9fYm9keXtwb3NpdGlvbjpmaXhlZDstd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzp0b3VjaDtvdmVyZmxvdy15OnNjcm9sbDt0b3A6NzVweDtib3R0b206MDt3aWR0aDoxMDAlO3BhZGRpbmc6MjBweCAyMHB4IDUwcHh9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogODAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJALXdlYmtpdC1rZXlmcmFtZXMgcm90YXRle3Rvey13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgxdHVybik7dHJhbnNmb3JtOnJvdGF0ZSgxdHVybil9fUBrZXlmcmFtZXMgcm90YXRle3Rvey13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgxdHVybik7dHJhbnNmb3JtOnJvdGF0ZSgxdHVybil9fUAtd2Via2l0LWtleWZyYW1lcyBkYXNoezAle3N0cm9rZS1kYXNoYXJyYXk6MSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6MH01MCV7c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTM1fXRve3N0cm9rZS1kYXNoYXJyYXk6ODksMjAwO3N0cm9rZS1kYXNob2Zmc2V0Oi0xMjR9fUBrZXlmcmFtZXMgZGFzaHswJXtzdHJva2UtZGFzaGFycmF5OjEsMjAwO3N0cm9rZS1kYXNob2Zmc2V0OjB9NTAle3N0cm9rZS1kYXNoYXJyYXk6ODksMjAwO3N0cm9rZS1kYXNob2Zmc2V0Oi0zNX10b3tzdHJva2UtZGFzaGFycmF5Ojg5LDIwMDtzdHJva2UtZGFzaG9mZnNldDotMTI0fX1ALXdlYmtpdC1rZXlmcmFtZXMgc3Bpbm5lci1jb2xvcnswJSx0b3tzdHJva2U6IzZjMH0yNSV7c3Ryb2tlOiM2YzB9NTAle3N0cm9rZTojNTdhNzA4fTc1JXtzdHJva2U6IzU3YTcwOH19QGtleWZyYW1lcyBzcGlubmVyLWNvbG9yezAlLHRve3N0cm9rZTojNmMwfTI1JXtzdHJva2U6IzZjMH01MCV7c3Ryb2tlOiM1N2E3MDh9NzUle3N0cm9rZTojNTdhNzA4fX0uYy1zcGlubmVye2Rpc3BsYXk6LXdlYmtpdC1ib3g7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7LXdlYmtpdC1ib3gtYWxpZ246Y2VudGVyOy1tcy1mbGV4LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7ZGlzcGxheTotd2Via2l0LWZsZXg7LXdlYmtpdC1hbGlnbi1pdGVtczpjZW50ZXI7LXdlYmtpdC1ib3gtcGFjazpjZW50ZXI7LW1zLWZsZXgtcGFjazpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjttYXJnaW46YXV0bzstd2Via2l0LWJveC1vcmllbnQ6dmVydGljYWw7LXdlYmtpdC1ib3gtZGlyZWN0aW9uOm5vcm1hbDstbXMtZmxleC1kaXJlY3Rpb246Y29sdW1uO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn0uYy1zcGlubmVyLS1mdWxsc2NyZWVue3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDtyaWdodDowO2JvdHRvbTowO3otaW5kZXg6OTk5ODt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JhY2tncm91bmQ6aHNsYSgwLDAlLDEwMCUsLjgpfS5jLXNwaW5uZXIgc3Zne2FuaW1hdGlvbi1uYW1lOnJvdGF0ZTstd2Via2l0LWFuaW1hdGlvbi1uYW1lOnJvdGF0ZTstbW96LWFuaW1hdGlvbi1uYW1lOnJvdGF0ZTthbmltYXRpb24tZHVyYXRpb246MS44czstd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjoxLjhzOy1tb3otYW5pbWF0aW9uLWR1cmF0aW9uOjEuOHM7YW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDppbmZpbml0ZTstd2Via2l0LWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6aW5maW5pdGU7LW1vei1hbmltYXRpb24taXRlcmF0aW9uLWNvdW50OmluZmluaXRlO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246bGluZWFyOy13ZWJraXQtYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpsaW5lYXI7LW1vei1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmxpbmVhcjtoZWlnaHQ6MTAwcHg7d2lkdGg6MTAwcHh9LmMtc3Bpbm5lciBjaXJjbGV7YW5pbWF0aW9uOmRhc2ggMS43cyBlYXNlLWluLW91dCBpbmZpbml0ZSAwcyxzcGlubmVyLWNvbG9yIDZzIGVhc2UtaW4tb3V0IGluZmluaXRlIC0uNzVzOy13ZWJraXQtYW5pbWF0aW9uOmRhc2ggMS43cyBlYXNlLWluLW91dCBpbmZpbml0ZSAwcyxzcGlubmVyLWNvbG9yIDZzIGVhc2UtaW4tb3V0IGluZmluaXRlIC0uNzVzOy1tb3otYW5pbWF0aW9uOmRhc2ggMS43cyBlYXNlLWluLW91dCBpbmZpbml0ZSAwcyxzcGlubmVyLWNvbG9yIDZzIGVhc2UtaW4tb3V0IGluZmluaXRlIC0uNzVzfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDgxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtc3RlcC10cmFja2VyX19pY29uLC5oeV9jLWljb257Zm9udC1mYW1pbHk6VGVsdXMgSWNvbixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjt0ZXh0LWRlY29yYXRpb246bm9uZTt0ZXh0LXJlbmRlcmluZzpvcHRpbWl6ZUxlZ2liaWxpdHk7Y29sb3I6aW5oZXJpdDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Zm9udC1zaXplOmluaGVyaXQ7bGluZS1oZWlnaHQ6aW5oZXJpdH0uaHlfYy1pY29uX19zcXVhcmV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjIuNXJlbTtsaW5lLWhlaWdodDozcmVtO3dpZHRoOjNyZW07aGVpZ2h0OjNyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tMnh7Zm9udC1zaXplOjJlbX0uaHlfYy1pY29uLS0zeHtmb250LXNpemU6M2VtfS5oeV9jLWljb24tLTR4e2ZvbnQtc2l6ZTo0ZW19Lmh5X2MtaWNvbl9fc3R5bGVndWlkZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6MnJlbTtsaW5lLWhlaWdodDo0cmVtO3dpZHRoOjRyZW07aGVpZ2h0OjRyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXRoaWNrLW91dGxpbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uaHlfYy1pY29uLS1jaXJjbGUtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA1XFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDZcXFwifS5oeV9jLWljb24tLXRlbHVzLWxvZ286YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA5XFxcIn0uaHlfYy1pY29uLS1iYXItY2hhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEwXFxcIn0uaHlfYy1pY29uLS1waWN0dXJlLWZyYW1lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMVxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEyXFxcIn0uaHlfYy1pY29uLS1wYXBlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTNcXFwifS5oeV9jLWljb24tLWZvbGRlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTRcXFwifS5oeV9jLWljb24tLXNoYXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNVxcXCJ9Lmh5X2MtaWNvbi0tbWFnbmlmeS1nbGFzczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTZcXFwifS5oeV9jLWljb24tLXdhcm5pbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE4XFxcIn0uaHlfYy1pY29uLS1zdGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOVxcXCJ9Lmh5X2MtaWNvbi0tc3RhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjBcXFwifS5oeV9jLWljb24tLWhlYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMVxcXCJ9Lmh5X2MtaWNvbi0tbGlmZXNhdmVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMlxcXCJ9Lmh5X2MtaWNvbi0taGFtYnVyZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNFxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI1XFxcIn0uaHlfYy1pY29uLS1ncmlkLWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI2XFxcIn0uaHlfYy1pY29uLS1saWdodGJ1bGI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI3XFxcIn0uaHlfYy1pY29uLS1zcGVlZG9tZXRlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjhcXFwifS5oeV9jLWljb24tLWFkZC1yZW1vdmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI5XFxcIn0uaHlfYy1pY29uLS1jYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMFxcXCJ9Lmh5X2MtaWNvbi0tdHdpdHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzFcXFwifS5oeV9jLWljb24tLWZhY2Vib29rOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMlxcXCJ9Lmh5X2MtaWNvbi0teW91dHViZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzNcXFwifS5oeV9jLWljb24tLWdvb2dsZS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNFxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzVcXFwifS5oeV9jLWljb24tLXBsYXktYnV0dG9uLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNlxcXCJ9Lmh5X2MtaWNvbi0tdmlkZW8taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM3XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM5XFxcIn0uaHlfYy1pY29uLS1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDBcXFwifS5oeV9jLWljb24tLWNsb2NrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MVxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDJcXFwifS5oeV9jLWljb24tLXRhYmxldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDNcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDRcXFwifS5oeV9jLWljb24tLW1vdXNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NVxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ2XFxcIn0uaHlfYy1pY29uLS1wYXBlci1ub3Rlcy1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDdcXFwifS5oeV9jLWljb24tLXR2OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OFxcXCJ9Lmh5X2MtaWNvbi0tZmlsbTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDlcXFwifS5oeV9jLWljb24tLWVudmVsb3BlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MFxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MVxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTJcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUzXFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU1XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTZcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTdcXFwifS5oeV9jLWljb24tLXVzZXJzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1OVxcXCJ9Lmh5X2MtaWNvbi0tdXNlcnMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjBcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYyXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWJveGVkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2M1xcXCJ9Lmh5X2MtaWNvbi0tZ2VhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjRcXFwifS5oeV9jLWljb24tLWdlYXItY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjVcXFwifS5oeV9jLWljb24tLWdlYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY2XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OFxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jay1pbnZlcmV0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY5XFxcIn0uaHlfYy1pY29uLS1zdGFja2VkLXBhcGVycy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzFcXFwifS5oeV9jLWljb24tLW11c2ljLW5vdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcyXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3M1xcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NVxcXCJ9Lmh5X2MtaWNvbi0tbW91c2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc2XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzdcXFwifS5oeV9jLWljb24tLXBhcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OFxcXCJ9Lmh5X2MtaWNvbi0tdHYtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc5XFxcIn0uaHlfYy1pY29uLS1maWxtLWNsYXBwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgwXFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODFcXFwifS5oeV9jLWljb24tLXBob25lLWhhbmRzZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgyXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgzXFxcIn0uaHlfYy1pY29uLS1ob21lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NVxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODZcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTNcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTVcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24tY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTZcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTdcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDBcXFwifS5oeV9jLWljb24tLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAyXFxcIn0uaHlfYy1pY29uLS14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNFxcXCJ9Lmh5X2MtaWNvbi0teC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNVxcXCJ9Lmh5X2MtaWNvbi0teC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDZcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDhcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOVxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTExXFxcIn0uaHlfYy1pY29uLS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMlxcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExM1xcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTRcXFwifS5oeV9jLWljb24tLW1pbnVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNVxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTZcXFwifS5oeV9jLWljb24tLW1pbnVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExN1xcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1idWJibGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE5XFxcIn0uaHlfYy1pY29uLS1jaGF0LWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIwXFxcIn0uaHlfYy1pY29uLS1jaGF0LWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMlxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjNcXFwifS5oeV9jLWljb24tLXNpbS1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNVxcXCJ9Lmh5X2MtaWNvbi0tY2FsY3VsYXRvcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjZcXFwifS5oeV9jLWljb24tLWJsdWV0b290aC1oZWFkc2V0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyN1xcXCJ9Lmh5X2MtaWNvbi0tb3V0Z29pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjlcXFwifS5oeV9jLWljb24tLWluY29taW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMwXFxcIn0uaHlfYy1pY29uLS1jYXV0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzJcXFwifS5oeV9jLWljb24tLXdpZmk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMzXFxcIn0uaHlfYy1pY29uLS10aGluLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzVcXFwifS5oeV9jLWljb24tLWluZm8taW52ZXJ0ZWQ6YmVmb3JlLC5oeV9jLWljb24tLWluZm86YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM2XFxcIn0uaHlfYy1pY29uLS10cmVuZC11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzhcXFwifS5oeV9jLWljb24tLWdsb2JlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MlxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NFxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDVcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NlxcXCJ9Lmh5X2MtaWNvbi0tb3ZlcnZpZXctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ3XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1jaXJjbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ4XFxcIn0uaHlfYy1pY29uLS1wdWxzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDlcXFwifS5oeV9jLWljb24tLW1pa2UtbW9iaWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MFxcXCJ9Lmh5X2MtaWNvbi0tcmV3YXJkcy1iYWRnZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTFcXFwifS5oeV9jLWljb24tLWZpbHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTJcXFwifS5oeV9jLWljb24tLXNjaGVkdWxlLXRhbGs6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUzXFxcIn0uaHlfYy1pY29uLS13YXJuaW5nOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NVxcXCJ9Lmh5X2MtaWNvbi0tY2FydC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTZcXFwifS5oeV9jLWljb24tLWxpdmUtY2hhdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTdcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3QtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU4XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OVxcXCJ9Lmh5X2MtaWNvbi0tY2xvdWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYwXFxcIn0uaHlfYy1pY29uLS1kYXRhOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MVxcXCJ9Lmh5X2MtaWNvbi0tZGVsaXZlcnktdHJ1Y2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYyXFxcIn0uaHlfYy1pY29uLS1wcm90ZWN0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2M1xcXCJ9Lmh5X2MtaWNvbi0tY29sb3VyLXBpY2tlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjRcXFwifS5oeV9jLWljb24tLW11bHRpLWFjY291bnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY1XFxcIn0uaHlfYy1pY29uLS1hY2Nlc3Nvcmllcy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjZcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2N1xcXCJ9Lmh5X2MtaWNvbi0tZG9sbGFyLXNpZ246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY4XFxcIn0uaHlfYy1pY29uLS1saW5rLWFjY291bnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY5XFxcIn0uaHlfYy1pY29uLS1kYXRhLW1hbmFnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcwXFxcIn0uaHlfYy1pY29uLS1hY2Nlc3NvcmllczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzFcXFwifS5oeV9jLWljb24tLXRvb2xzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MlxcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTczXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzRcXFwifS5oeV9jLWljb24tLWlwLWZheDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzVcXFwifS5oeV9jLWljb24tLWlwLWZheC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzZcXFwifS5oeV9jLWljb24tLWxpbmtlZC1pbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzdcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OFxcXCJ9Lmh5X2MtaWNvbi0tbWljcm9waG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzlcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MFxcXCJ9Lmh5X2MtaWNvbi0tbmV0d29ya2luZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODFcXFwifS5oeV9jLWljb24tLWN5Y2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MlxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4M1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NFxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1hZGQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg1XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODZcXFwifS5jLXN0ZXAtdHJhY2tlcntsaXN0LXN0eWxlOm5vbmU7cGFkZGluZzowO3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6LXdlYmtpdC1ib3g7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7LXdlYmtpdC1ib3gtcGFjazpqdXN0aWZ5Oy1tcy1mbGV4LXBhY2s6anVzdGlmeTtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjttYXJnaW46MXJlbSAtMS41cmVtfUBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6NjAwcHgpey5jLXN0ZXAtdHJhY2tlcntwYWRkaW5nLWJvdHRvbToyLjVyZW07bWFyZ2luOjFyZW0gMH19LmMtc3RlcC10cmFja2VyX19zdGVwe3dpZHRoOjEwMCU7cG9zaXRpb246cmVsYXRpdmU7dGV4dC1hbGlnbjpjZW50ZXJ9LmMtc3RlcC10cmFja2VyX19zdGVwOmFmdGVyLC5jLXN0ZXAtdHJhY2tlcl9fc3RlcDpiZWZvcmV7cG9zaXRpb246YWJzb2x1dGU7dG9wOjUwJTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpO3dpZHRoOmNhbGMoNTAlIC0gMS40cmVtKTtjb250ZW50OicgJztib3JkZXItYm90dG9tOi42cmVtIHNvbGlkICNhZWFlYWV9LmMtc3RlcC10cmFja2VyX19zdGVwOmJlZm9yZXtsZWZ0OjB9LmMtc3RlcC10cmFja2VyX19zdGVwOmFmdGVye3JpZ2h0OjB9LmMtc3RlcC10cmFja2VyIC5jLXN0ZXAtdHJhY2tlcl9fc3RlcDpmaXJzdC1jaGlsZDpiZWZvcmUsLmMtc3RlcC10cmFja2VyIC5jLXN0ZXAtdHJhY2tlcl9fc3RlcDpsYXN0LWNoaWxkOmFmdGVye2NvbnRlbnQ6bm9uZX0uYy1zdGVwLXRyYWNrZXJfX2xhYmVse3Bvc2l0aW9uOmFic29sdXRlO2JvdHRvbTotM3JlbTtsZWZ0OjA7Zm9udC1zaXplOjEuN3JlbTt3aWR0aDoxMDAlO2hlaWdodDoyLjVyZW07Zm9udC1mYW1pbHk6VGVsdXMgUmVndWxhcixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjojNjY2fUBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6NTk5cHgpey5jLXN0ZXAtdHJhY2tlcl9fbGFiZWx7ZGlzcGxheTpub25lfX0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWFjdGl2ZSAuYy1zdGVwLXRyYWNrZXJfX2xhYmVse2ZvbnQtZmFtaWx5OlRlbHVzIE1lZGl1bSxIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjojNDA4MDAwfS5jLXN0ZXAtdHJhY2tlcl9faWNvbntmb250LXNpemU6M3JlbTtjb2xvcjojYWVhZWFlfS5jLXN0ZXAtdHJhY2tlcl9faWNvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDFcXFwifS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tYWN0aXZlIC5jLXN0ZXAtdHJhY2tlcl9faWNvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDJcXFwifS5jLXN0ZXAtdHJhY2tlcl9fc2V0cC0tY2xpY2thYmxlIGF7Y3Vyc29yOnBvaW50ZXJ9LmMtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZTphZnRlcntib3JkZXItYm90dG9tOi42cmVtIHNvbGlkICM1N2E3MDh9LmMtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZSAuYy1zdGVwLXRyYWNrZXJfX2ljb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEwXFxcIn0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWFjdGl2ZSAuYy1zdGVwLXRyYWNrZXJfX2ljb246YmVmb3JlLC5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGUgLmMtc3RlcC10cmFja2VyX19pY29uOmJlZm9yZXtjb2xvcjojNTdhNzA4fS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGUrLmMtc3RlcC10cmFja2VyX19zdGVwLS1hY3RpdmU6YmVmb3JlLC5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGUrLmMtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZTpiZWZvcmV7Ym9yZGVyLWJvdHRvbTouNnJlbSBzb2xpZCAjNTdhNzA4fS5jLXN0ZXAtdHJhY2tlci1tb2JpbGUtbGFiZWx7Zm9udC1zaXplOjEuN3JlbTt0ZXh0LWFsaWduOmNlbnRlcjtmb250LWZhbWlseTpUZWx1cyBSZWd1bGFyLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2NvbG9yOiM2NjZ9QG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDo2MDBweCl7LmMtc3RlcC10cmFja2VyLW1vYmlsZS1sYWJlbHtkaXNwbGF5Om5vbmV9fS5jLXN0ZXAtdHJhY2tlci1tb2JpbGUtbGFiZWxfX3N0ZXB7Zm9udC1mYW1pbHk6VGVsdXMgTWVkaXVtLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2NvbG9yOiM0MDgwMDB9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogODIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYy10YWJzX19oZWFkZXJ7bGlzdC1zdHlsZTpub25lO3BhZGRpbmc6MDttYXJnaW46MDtkaXNwbGF5Oi13ZWJraXQtYm94O2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4fS5jLXRhYnNfX2hlYWRlci1pdGVte21hcmdpbi10b3A6MnB4O2hlaWdodDo0NXB4O3BhZGRpbmc6MCAycHg7LXdlYmtpdC1ib3gtZmxleDoxOy1tcy1mbGV4OjE7ZmxleDoxfS5jLXRhYnNfX2hlYWRlci1pdGVtIGF7YmFja2dyb3VuZC1jb2xvcjojZTJlMmUyO3RleHQtZGVjb3JhdGlvbjpub25lO3BhZGRpbmc6MTNweCAyMHB4O2NvbG9yOiM0OTE2NmQ7ZGlzcGxheTpibG9ja30uYy10YWJzX19oZWFkZXItaXRlbS0tYWN0aXZle21hcmdpbi10b3A6MXB4O2hlaWdodDo0NnB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3JkZXItdG9wOjFweCBzb2xpZCAjZTJlMmUyO2JvcmRlci1sZWZ0OjFweCBzb2xpZCAjZTJlMmUyO2JvcmRlci1yaWdodDoxcHggc29saWQgI2UyZTJlMn0uYy10YWJzX19oZWFkZXItaXRlbS0tYWN0aXZlIGF7YmFja2dyb3VuZC1jb2xvcjojZmZmO2NvbG9yOiMzMzN9LmMtdGFic19faGVhZGVyLWl0ZW0tLWRpc2FibGVkIGF7YmFja2dyb3VuZC1jb2xvcjojZjVmNmY3O2NvbG9yOiNhZWFlYWU7Y3Vyc29yOm5vdC1hbGxvd2VkfS5jLXRhYnNfX2JvZHl7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JvcmRlcjoxcHggc29saWQgI2UyZTJlMjttYXJnaW4tdG9wOi0xcHg7cGFkZGluZzoyMHB4fS5jLXRhYnNfX3BhbmV7ZGlzcGxheTpibG9jaztib3JkZXItdG9wOm5vbmU7b3BhY2l0eTowO2hlaWdodDowO292ZXJmbG93OmhpZGRlbjtwYWRkaW5nOjAgNXB4Oy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjVzIGVhc2Utb3V0O3RyYW5zaXRpb246YWxsIC41cyBlYXNlLW91dH0uYy10YWJzX19wYW5lLS1hY3RpdmV7b3BhY2l0eToxO3BhZGRpbmc6NXB4O2hlaWdodDphdXRvfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDgzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgcmVxdWlyZTt2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MsIGdsb2JhbCwgbW9kdWxlKSB7LyohXG5cdCAqIEBvdmVydmlldyBlczYtcHJvbWlzZSAtIGEgdGlueSBpbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlcy9BKy5cblx0ICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZClcblx0ICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuXHQgKiAgICAgICAgICAgIFNlZSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vamFrZWFyY2hpYmFsZC9lczYtcHJvbWlzZS9tYXN0ZXIvTElDRU5TRVxuXHQgKiBAdmVyc2lvbiAgIDMuMi4xXG5cdCAqL1xuXHRcblx0KGZ1bmN0aW9uKCkge1xuXHQgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkdXRpbHMkJG9iamVjdE9yRnVuY3Rpb24oeCkge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbicgfHwgKHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiB4ICE9PSBudWxsKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24oeCkge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc01heWJlVGhlbmFibGUoeCkge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdvYmplY3QnICYmIHggIT09IG51bGw7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXk7XG5cdCAgICBpZiAoIUFycmF5LmlzQXJyYXkpIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG5cdCAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcblx0ICAgICAgfTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzQXJyYXkgPSBsaWIkZXM2JHByb21pc2UkdXRpbHMkJF9pc0FycmF5O1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gPSAwO1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR2ZXJ0eE5leHQ7XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuO1xuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbl0gPSBjYWxsYmFjaztcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2xpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gKyAxXSA9IGFyZztcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiArPSAyO1xuXHQgICAgICBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiA9PT0gMikge1xuXHQgICAgICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC5cblx0ICAgICAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleVxuXHQgICAgICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cblx0ICAgICAgICBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm4obGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2goKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuID0gc2NoZWR1bGVGbjtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0QXNhcChhc2FwRm4pIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAgPSBhc2FwRm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93ID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSA/IHdpbmRvdyA6IHVuZGVmaW5lZDtcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3Nlckdsb2JhbCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93IHx8IHt9O1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyR2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNOb2RlID0gdHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG5cdFxuXHQgICAgLy8gdGVzdCBmb3Igd2ViIHdvcmtlciBidXQgbm90IGluIElFMTBcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNXb3JrZXIgPSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09ICd1bmRlZmluZWQnICYmXG5cdCAgICAgIHR5cGVvZiBpbXBvcnRTY3JpcHRzICE9PSAndW5kZWZpbmVkJyAmJlxuXHQgICAgICB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnO1xuXHRcblx0ICAgIC8vIG5vZGVcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VOZXh0VGljaygpIHtcblx0ICAgICAgLy8gbm9kZSB2ZXJzaW9uIDAuMTAueCBkaXNwbGF5cyBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2hlbiBuZXh0VGljayBpcyB1c2VkIHJlY3Vyc2l2ZWx5XG5cdCAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY3Vqb2pzL3doZW4vaXNzdWVzLzQxMCBmb3IgZGV0YWlsc1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHZlcnR4XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlVmVydHhUaW1lcigpIHtcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR2ZXJ0eE5leHQobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTXV0YXRpb25PYnNlcnZlcigpIHtcblx0ICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuXHQgICAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgbGliJGVzNiRwcm9taXNlJGFzYXAkJEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCk7XG5cdCAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuXHQgICAgICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHsgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9KTtcblx0XG5cdCAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgICBub2RlLmRhdGEgPSAoaXRlcmF0aW9ucyA9ICsraXRlcmF0aW9ucyAlIDIpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHdlYiB3b3JrZXJcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNZXNzYWdlQ2hhbm5lbCgpIHtcblx0ICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcblx0ICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2g7XG5cdCAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlU2V0VGltZW91dCgpIHtcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHNldFRpbWVvdXQobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoLCAxKTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlID0gbmV3IEFycmF5KDEwMDApO1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKCkge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW47IGkrPTIpIHtcblx0ICAgICAgICB2YXIgY2FsbGJhY2sgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaV07XG5cdCAgICAgICAgdmFyIGFyZyA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpKzFdO1xuXHRcblx0ICAgICAgICBjYWxsYmFjayhhcmcpO1xuXHRcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaV0gPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2krMV0gPSB1bmRlZmluZWQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gPSAwO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhdHRlbXB0VmVydHgoKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdmFyIHIgPSByZXF1aXJlO1xuXHQgICAgICAgIHZhciB2ZXJ0eCA9IF9fd2VicGFja19yZXF1aXJlX18oMjIwKTtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcblx0ICAgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVZlcnR4VGltZXIoKTtcblx0ICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0KCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2g7XG5cdCAgICAvLyBEZWNpZGUgd2hhdCBhc3luYyBtZXRob2QgdG8gdXNlIHRvIHRyaWdnZXJpbmcgcHJvY2Vzc2luZyBvZiBxdWV1ZWQgY2FsbGJhY2tzOlxuXHQgICAgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc05vZGUpIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTmV4dFRpY2soKTtcblx0ICAgIH0gZWxzZSBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTtcblx0ICAgIH0gZWxzZSBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGlzV29ya2VyKSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU1lc3NhZ2VDaGFubmVsKCk7XG5cdCAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgXCJmdW5jdGlvblwiID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGF0dGVtcHRWZXJ0eCgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlU2V0VGltZW91dCgpO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHRoZW4kJHRoZW4ob25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcblx0ICAgICAgdmFyIHBhcmVudCA9IHRoaXM7XG5cdFxuXHQgICAgICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcblx0XG5cdCAgICAgIGlmIChjaGlsZFtsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEXSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbWFrZVByb21pc2UoY2hpbGQpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xuXHRcblx0ICAgICAgaWYgKHN0YXRlKSB7XG5cdCAgICAgICAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzW3N0YXRlIC0gMV07XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAoZnVuY3Rpb24oKXtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGludm9rZUNhbGxiYWNrKHN0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gY2hpbGQ7XG5cdCAgICB9XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJHRoZW4kJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkdGhlbiQkdGhlbjtcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJHJlc29sdmUob2JqZWN0KSB7XG5cdCAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG5cdCAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cdFxuXHQgICAgICBpZiAob2JqZWN0ICYmIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gQ29uc3RydWN0b3IpIHtcblx0ICAgICAgICByZXR1cm4gb2JqZWN0O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCBvYmplY3QpO1xuXHQgICAgICByZXR1cm4gcHJvbWlzZTtcblx0ICAgIH1cblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkcmVzb2x2ZTtcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDE2KTtcblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKCkge31cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORyAgID0gdm9pZCAwO1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCA9IDE7XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQgID0gMjtcblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1IgPSBuZXcgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRXJyb3JPYmplY3QoKTtcblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzZWxmRnVsZmlsbG1lbnQoKSB7XG5cdCAgICAgIHJldHVybiBuZXcgVHlwZUVycm9yKFwiWW91IGNhbm5vdCByZXNvbHZlIGEgcHJvbWlzZSB3aXRoIGl0c2VsZlwiKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRjYW5ub3RSZXR1cm5Pd24oKSB7XG5cdCAgICAgIHJldHVybiBuZXcgVHlwZUVycm9yKCdBIHByb21pc2VzIGNhbGxiYWNrIGNhbm5vdCByZXR1cm4gdGhhdCBzYW1lIHByb21pc2UuJyk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZ2V0VGhlbihwcm9taXNlKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbjtcblx0ICAgICAgfSBjYXRjaChlcnJvcikge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SLmVycm9yID0gZXJyb3I7XG5cdCAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5VGhlbih0aGVuLCB2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpO1xuXHQgICAgICB9IGNhdGNoKGUpIHtcblx0ICAgICAgICByZXR1cm4gZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSwgdGhlbikge1xuXHQgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAoZnVuY3Rpb24ocHJvbWlzZSkge1xuXHQgICAgICAgIHZhciBzZWFsZWQgPSBmYWxzZTtcblx0ICAgICAgICB2YXIgZXJyb3IgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlUaGVuKHRoZW4sIHRoZW5hYmxlLCBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgICAgaWYgKHNlYWxlZCkgeyByZXR1cm47IH1cblx0ICAgICAgICAgIHNlYWxlZCA9IHRydWU7XG5cdCAgICAgICAgICBpZiAodGhlbmFibGUgIT09IHZhbHVlKSB7XG5cdCAgICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG5cdCAgICAgICAgICBpZiAoc2VhbGVkKSB7IHJldHVybjsgfVxuXHQgICAgICAgICAgc2VhbGVkID0gdHJ1ZTtcblx0XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcblx0ICAgICAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpO1xuXHRcblx0ICAgICAgICBpZiAoIXNlYWxlZCAmJiBlcnJvcikge1xuXHQgICAgICAgICAgc2VhbGVkID0gdHJ1ZTtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBlcnJvcik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LCBwcm9taXNlKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSkge1xuXHQgICAgICBpZiAodGhlbmFibGUuX3N0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuXHQgICAgICB9IGVsc2UgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlKHRoZW5hYmxlLCB1bmRlZmluZWQsIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuKSB7XG5cdCAgICAgIGlmIChtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yID09PSBwcm9taXNlLmNvbnN0cnVjdG9yICYmXG5cdCAgICAgICAgICB0aGVuID09PSBsaWIkZXM2JHByb21pc2UkdGhlbiQkZGVmYXVsdCAmJlxuXHQgICAgICAgICAgY29uc3RydWN0b3IucmVzb2x2ZSA9PT0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGlmICh0aGVuID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUikge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SLmVycm9yKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKHRoZW4gPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbih0aGVuKSkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4pO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcblx0ICAgICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHNlbGZGdWxmaWxsbWVudCgpKTtcblx0ICAgICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCB2YWx1ZSwgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZ2V0VGhlbih2YWx1ZSkpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaFJlamVjdGlvbihwcm9taXNlKSB7XG5cdCAgICAgIGlmIChwcm9taXNlLl9vbmVycm9yKSB7XG5cdCAgICAgICAgcHJvbWlzZS5fb25lcnJvcihwcm9taXNlLl9yZXN1bHQpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoKHByb21pc2UpO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpIHtcblx0ICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7IHJldHVybjsgfVxuXHRcblx0ICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gdmFsdWU7XG5cdCAgICAgIHByb21pc2UuX3N0YXRlID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEO1xuXHRcblx0ICAgICAgaWYgKHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCAhPT0gMCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gsIHByb21pc2UpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbikge1xuXHQgICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHsgcmV0dXJuOyB9XG5cdCAgICAgIHByb21pc2UuX3N0YXRlID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQ7XG5cdCAgICAgIHByb21pc2UuX3Jlc3VsdCA9IHJlYXNvbjtcblx0XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2hSZWplY3Rpb24sIHByb21pc2UpO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuXHQgICAgICB2YXIgc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzO1xuXHQgICAgICB2YXIgbGVuZ3RoID0gc3Vic2NyaWJlcnMubGVuZ3RoO1xuXHRcblx0ICAgICAgcGFyZW50Ll9vbmVycm9yID0gbnVsbDtcblx0XG5cdCAgICAgIHN1YnNjcmliZXJzW2xlbmd0aF0gPSBjaGlsZDtcblx0ICAgICAgc3Vic2NyaWJlcnNbbGVuZ3RoICsgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEXSA9IG9uRnVsZmlsbG1lbnQ7XG5cdCAgICAgIHN1YnNjcmliZXJzW2xlbmd0aCArIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEXSAgPSBvblJlamVjdGlvbjtcblx0XG5cdCAgICAgIGlmIChsZW5ndGggPT09IDAgJiYgcGFyZW50Ll9zdGF0ZSkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gsIHBhcmVudCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoKHByb21pc2UpIHtcblx0ICAgICAgdmFyIHN1YnNjcmliZXJzID0gcHJvbWlzZS5fc3Vic2NyaWJlcnM7XG5cdCAgICAgIHZhciBzZXR0bGVkID0gcHJvbWlzZS5fc3RhdGU7XG5cdFxuXHQgICAgICBpZiAoc3Vic2NyaWJlcnMubGVuZ3RoID09PSAwKSB7IHJldHVybjsgfVxuXHRcblx0ICAgICAgdmFyIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsID0gcHJvbWlzZS5fcmVzdWx0O1xuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkgKz0gMykge1xuXHQgICAgICAgIGNoaWxkID0gc3Vic2NyaWJlcnNbaV07XG5cdCAgICAgICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0dGxlZF07XG5cdFxuXHQgICAgICAgIGlmIChjaGlsZCkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBjYWxsYmFjayhkZXRhaWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgcHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoID0gMDtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRFcnJvck9iamVjdCgpIHtcblx0ICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFRSWV9DQVRDSF9FUlJPUiA9IG5ldyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRFcnJvck9iamVjdCgpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlsKTtcblx0ICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SLmVycm9yID0gZTtcblx0ICAgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgcHJvbWlzZSwgY2FsbGJhY2ssIGRldGFpbCkge1xuXHQgICAgICB2YXIgaGFzQ2FsbGJhY2sgPSBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24oY2FsbGJhY2spLFxuXHQgICAgICAgICAgdmFsdWUsIGVycm9yLCBzdWNjZWVkZWQsIGZhaWxlZDtcblx0XG5cdCAgICAgIGlmIChoYXNDYWxsYmFjaykge1xuXHQgICAgICAgIHZhbHVlID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCk7XG5cdFxuXHQgICAgICAgIGlmICh2YWx1ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SKSB7XG5cdCAgICAgICAgICBmYWlsZWQgPSB0cnVlO1xuXHQgICAgICAgICAgZXJyb3IgPSB2YWx1ZS5lcnJvcjtcblx0ICAgICAgICAgIHZhbHVlID0gbnVsbDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGNhbm5vdFJldHVybk93bigpKTtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHZhbHVlID0gZGV0YWlsO1xuXHQgICAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuXHQgICAgICAgIC8vIG5vb3Bcblx0ICAgICAgfSBlbHNlIGlmIChoYXNDYWxsYmFjayAmJiBzdWNjZWVkZWQpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgfSBlbHNlIGlmIChmYWlsZWQpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuXHQgICAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGluaXRpYWxpemVQcm9taXNlKHByb21pc2UsIHJlc29sdmVyKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcmVzb2x2ZXIoZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UodmFsdWUpe1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGNhdGNoKGUpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaWQgPSAwO1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbmV4dElkKCkge1xuXHQgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaWQrKztcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRtYWtlUHJvbWlzZShwcm9taXNlKSB7XG5cdCAgICAgIHByb21pc2VbbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUFJPTUlTRV9JRF0gPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpZCsrO1xuXHQgICAgICBwcm9taXNlLl9zdGF0ZSA9IHVuZGVmaW5lZDtcblx0ICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gdW5kZWZpbmVkO1xuXHQgICAgICBwcm9taXNlLl9zdWJzY3JpYmVycyA9IFtdO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkYWxsKGVudHJpZXMpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkZGVmYXVsdCh0aGlzLCBlbnRyaWVzKS5wcm9taXNlO1xuXHQgICAgfVxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkYWxsO1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkcmFjZShlbnRyaWVzKSB7XG5cdCAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG5cdCAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cdFxuXHQgICAgICBpZiAoIWxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNBcnJheShlbnRyaWVzKSkge1xuXHQgICAgICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLicpKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICAgICAgdmFyIGxlbmd0aCA9IGVudHJpZXMubGVuZ3RoO1xuXHQgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKGVudHJpZXNbaV0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRyYWNlO1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRyZWplY3QocmVhc29uKSB7XG5cdCAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG5cdCAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cdCAgICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcblx0ICAgICAgcmV0dXJuIHByb21pc2U7XG5cdCAgICB9XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRyZWplY3Q7XG5cdFxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc1Jlc29sdmVyKCkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzTmV3KCkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlO1xuXHQgICAgLyoqXG5cdCAgICAgIFByb21pc2Ugb2JqZWN0cyByZXByZXNlbnQgdGhlIGV2ZW50dWFsIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLiBUaGVcblx0ICAgICAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2hcblx0ICAgICAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uXG5cdCAgICAgIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuXHRcblx0ICAgICAgVGVybWlub2xvZ3lcblx0ICAgICAgLS0tLS0tLS0tLS1cblx0XG5cdCAgICAgIC0gYHByb21pc2VgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB3aXRoIGEgYHRoZW5gIG1ldGhvZCB3aG9zZSBiZWhhdmlvciBjb25mb3JtcyB0byB0aGlzIHNwZWNpZmljYXRpb24uXG5cdCAgICAgIC0gYHRoZW5hYmxlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gdGhhdCBkZWZpbmVzIGEgYHRoZW5gIG1ldGhvZC5cblx0ICAgICAgLSBgdmFsdWVgIGlzIGFueSBsZWdhbCBKYXZhU2NyaXB0IHZhbHVlIChpbmNsdWRpbmcgdW5kZWZpbmVkLCBhIHRoZW5hYmxlLCBvciBhIHByb21pc2UpLlxuXHQgICAgICAtIGBleGNlcHRpb25gIGlzIGEgdmFsdWUgdGhhdCBpcyB0aHJvd24gdXNpbmcgdGhlIHRocm93IHN0YXRlbWVudC5cblx0ICAgICAgLSBgcmVhc29uYCBpcyBhIHZhbHVlIHRoYXQgaW5kaWNhdGVzIHdoeSBhIHByb21pc2Ugd2FzIHJlamVjdGVkLlxuXHQgICAgICAtIGBzZXR0bGVkYCB0aGUgZmluYWwgcmVzdGluZyBzdGF0ZSBvZiBhIHByb21pc2UsIGZ1bGZpbGxlZCBvciByZWplY3RlZC5cblx0XG5cdCAgICAgIEEgcHJvbWlzZSBjYW4gYmUgaW4gb25lIG9mIHRocmVlIHN0YXRlczogcGVuZGluZywgZnVsZmlsbGVkLCBvciByZWplY3RlZC5cblx0XG5cdCAgICAgIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXG5cdCAgICAgIHN0YXRlLiAgUHJvbWlzZXMgdGhhdCBhcmUgcmVqZWN0ZWQgaGF2ZSBhIHJlamVjdGlvbiByZWFzb24gYW5kIGFyZSBpbiB0aGVcblx0ICAgICAgcmVqZWN0ZWQgc3RhdGUuICBBIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5ldmVyIGEgdGhlbmFibGUuXG5cdFxuXHQgICAgICBQcm9taXNlcyBjYW4gYWxzbyBiZSBzYWlkIHRvICpyZXNvbHZlKiBhIHZhbHVlLiAgSWYgdGhpcyB2YWx1ZSBpcyBhbHNvIGFcblx0ICAgICAgcHJvbWlzZSwgdGhlbiB0aGUgb3JpZ2luYWwgcHJvbWlzZSdzIHNldHRsZWQgc3RhdGUgd2lsbCBtYXRjaCB0aGUgdmFsdWUnc1xuXHQgICAgICBzZXR0bGVkIHN0YXRlLiAgU28gYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCByZWplY3RzIHdpbGxcblx0ICAgICAgaXRzZWxmIHJlamVjdCwgYW5kIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgd2lsbFxuXHQgICAgICBpdHNlbGYgZnVsZmlsbC5cblx0XG5cdFxuXHQgICAgICBCYXNpYyBVc2FnZTpcblx0ICAgICAgLS0tLS0tLS0tLS0tXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICAgIC8vIG9uIHN1Y2Nlc3Ncblx0ICAgICAgICByZXNvbHZlKHZhbHVlKTtcblx0XG5cdCAgICAgICAgLy8gb24gZmFpbHVyZVxuXHQgICAgICAgIHJlamVjdChyZWFzb24pO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIC8vIG9uIGZ1bGZpbGxtZW50XG5cdCAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuXHQgICAgICAgIC8vIG9uIHJlamVjdGlvblxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBBZHZhbmNlZCBVc2FnZTpcblx0ICAgICAgLS0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgICAgICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzXG5cdCAgICAgIGBYTUxIdHRwUmVxdWVzdGBzLlxuXHRcblx0ICAgICAgYGBganNcblx0ICAgICAgZnVuY3Rpb24gZ2V0SlNPTih1cmwpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcblx0ICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XG5cdCAgICAgICAgICB4aHIub3BlbignR0VUJywgdXJsKTtcblx0ICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyO1xuXHQgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcblx0ICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuXHQgICAgICAgICAgeGhyLnNlbmQoKTtcblx0XG5cdCAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVyKCkge1xuXHQgICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHtcblx0ICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuXHQgICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcblx0ICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignZ2V0SlNPTjogYCcgKyB1cmwgKyAnYCBmYWlsZWQgd2l0aCBzdGF0dXM6IFsnICsgdGhpcy5zdGF0dXMgKyAnXScpKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGdldEpTT04oJy9wb3N0cy5qc29uJykudGhlbihmdW5jdGlvbihqc29uKSB7XG5cdCAgICAgICAgLy8gb24gZnVsZmlsbG1lbnRcblx0ICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG5cdCAgICAgICAgLy8gb24gcmVqZWN0aW9uXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIFVubGlrZSBjYWxsYmFja3MsIHByb21pc2VzIGFyZSBncmVhdCBjb21wb3NhYmxlIHByaW1pdGl2ZXMuXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBQcm9taXNlLmFsbChbXG5cdCAgICAgICAgZ2V0SlNPTignL3Bvc3RzJyksXG5cdCAgICAgICAgZ2V0SlNPTignL2NvbW1lbnRzJylcblx0ICAgICAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpe1xuXHQgICAgICAgIHZhbHVlc1swXSAvLyA9PiBwb3N0c0pTT05cblx0ICAgICAgICB2YWx1ZXNbMV0gLy8gPT4gY29tbWVudHNKU09OXG5cdFxuXHQgICAgICAgIHJldHVybiB2YWx1ZXM7XG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIEBjbGFzcyBQcm9taXNlXG5cdCAgICAgIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmVyXG5cdCAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cblx0ICAgICAgQGNvbnN0cnVjdG9yXG5cdCAgICAqL1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UocmVzb2x2ZXIpIHtcblx0ICAgICAgdGhpc1tsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEXSA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5leHRJZCgpO1xuXHQgICAgICB0aGlzLl9yZXN1bHQgPSB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcblx0ICAgICAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblx0XG5cdCAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wICE9PSByZXNvbHZlcikge1xuXHQgICAgICAgIHR5cGVvZiByZXNvbHZlciAhPT0gJ2Z1bmN0aW9uJyAmJiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkbmVlZHNSZXNvbHZlcigpO1xuXHQgICAgICAgIHRoaXMgaW5zdGFuY2VvZiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZSA/IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGluaXRpYWxpemVQcm9taXNlKHRoaXMsIHJlc29sdmVyKSA6IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc05ldygpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuYWxsID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRkZWZhdWx0O1xuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UucmFjZSA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJGRlZmF1bHQ7XG5cdCAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5yZXNvbHZlID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdDtcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnJlamVjdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkZGVmYXVsdDtcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLl9zZXRTY2hlZHVsZXIgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0U2NoZWR1bGVyO1xuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuX3NldEFzYXAgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0QXNhcDtcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLl9hc2FwID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXA7XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UucHJvdG90eXBlID0ge1xuXHQgICAgICBjb25zdHJ1Y3RvcjogbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UsXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLFxuXHQgICAgICB3aGljaCByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZVxuXHQgICAgICByZWFzb24gd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24odXNlcil7XG5cdCAgICAgICAgLy8gdXNlciBpcyBhdmFpbGFibGVcblx0ICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcblx0ICAgICAgICAvLyB1c2VyIGlzIHVuYXZhaWxhYmxlLCBhbmQgeW91IGFyZSBnaXZlbiB0aGUgcmVhc29uIHdoeVxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBDaGFpbmluZ1xuXHQgICAgICAtLS0tLS0tLVxuXHRcblx0ICAgICAgVGhlIHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4gIFRoaXMgc2Vjb25kLCAnZG93bnN0cmVhbSdcblx0ICAgICAgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZpcnN0IHByb21pc2UncyBmdWxmaWxsbWVudFxuXHQgICAgICBvciByZWplY3Rpb24gaGFuZGxlciwgb3IgcmVqZWN0ZWQgaWYgdGhlIGhhbmRsZXIgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cblx0XG5cdCAgICAgIGBgYGpzXG5cdCAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgICAgIHJldHVybiB1c2VyLm5hbWU7XG5cdCAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgICByZXR1cm4gJ2RlZmF1bHQgbmFtZSc7XG5cdCAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7XG5cdCAgICAgICAgLy8gSWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGB1c2VyTmFtZWAgd2lsbCBiZSB0aGUgdXNlcidzIG5hbWUsIG90aGVyd2lzZSBpdFxuXHQgICAgICAgIC8vIHdpbGwgYmUgYCdkZWZhdWx0IG5hbWUnYFxuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknKTtcblx0ICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpO1xuXHQgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcblx0ICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICAgIC8vIGlmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgcmVhc29uYCB3aWxsIGJlICdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScuXG5cdCAgICAgICAgLy8gSWYgYGZpbmRVc2VyYCByZWplY3RlZCwgYHJlYXNvbmAgd2lsbCBiZSAnYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScuXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0ICAgICAgSWYgdGhlIGRvd25zdHJlYW0gcHJvbWlzZSBkb2VzIG5vdCBzcGVjaWZ5IGEgcmVqZWN0aW9uIGhhbmRsZXIsIHJlamVjdGlvbiByZWFzb25zIHdpbGwgYmUgcHJvcGFnYXRlZCBmdXJ0aGVyIGRvd25zdHJlYW0uXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgUGVkYWdvZ2ljYWxFeGNlcHRpb24oJ1Vwc3RyZWFtIGVycm9yJyk7XG5cdCAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuXHQgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcblx0ICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlzIHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIEFzc2ltaWxhdGlvblxuXHQgICAgICAtLS0tLS0tLS0tLS1cblx0XG5cdCAgICAgIFNvbWV0aW1lcyB0aGUgdmFsdWUgeW91IHdhbnQgdG8gcHJvcGFnYXRlIHRvIGEgZG93bnN0cmVhbSBwcm9taXNlIGNhbiBvbmx5IGJlXG5cdCAgICAgIHJldHJpZXZlZCBhc3luY2hyb25vdXNseS4gVGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcmV0dXJuaW5nIGEgcHJvbWlzZSBpbiB0aGVcblx0ICAgICAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmdcblx0ICAgICAgdW50aWwgdGhlIHJldHVybmVkIHByb21pc2UgaXMgc2V0dGxlZC4gVGhpcyBpcyBjYWxsZWQgKmFzc2ltaWxhdGlvbiouXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcblx0ICAgICAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG5cdCAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG5cdCAgICAgICAgLy8gVGhlIHVzZXIncyBjb21tZW50cyBhcmUgbm93IGF2YWlsYWJsZVxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBJZiB0aGUgYXNzaW1saWF0ZWQgcHJvbWlzZSByZWplY3RzLCB0aGVuIHRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCBhbHNvIHJlamVjdC5cblx0XG5cdCAgICAgIGBgYGpzXG5cdCAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcblx0ICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcblx0ICAgICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIGZ1bGZpbGxzLCB3ZSdsbCBoYXZlIHRoZSB2YWx1ZSBoZXJlXG5cdCAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIHJlamVjdHMsIHdlJ2xsIGhhdmUgdGhlIHJlYXNvbiBoZXJlXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIFNpbXBsZSBFeGFtcGxlXG5cdCAgICAgIC0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgICAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG5cdFxuXHQgICAgICBgYGBqYXZhc2NyaXB0XG5cdCAgICAgIHZhciByZXN1bHQ7XG5cdFxuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHJlc3VsdCA9IGZpbmRSZXN1bHQoKTtcblx0ICAgICAgICAvLyBzdWNjZXNzXG5cdCAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG5cdCAgICAgICAgLy8gZmFpbHVyZVxuXHQgICAgICB9XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgRXJyYmFjayBFeGFtcGxlXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXtcblx0ICAgICAgICBpZiAoZXJyKSB7XG5cdCAgICAgICAgICAvLyBmYWlsdXJlXG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIHN1Y2Nlc3Ncblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIFByb21pc2UgRXhhbXBsZTtcblx0XG5cdCAgICAgIGBgYGphdmFzY3JpcHRcblx0ICAgICAgZmluZFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcblx0ICAgICAgICAvLyBzdWNjZXNzXG5cdCAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgICAgICAgLy8gZmFpbHVyZVxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBBZHZhbmNlZCBFeGFtcGxlXG5cdCAgICAgIC0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgICAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG5cdFxuXHQgICAgICBgYGBqYXZhc2NyaXB0XG5cdCAgICAgIHZhciBhdXRob3IsIGJvb2tzO1xuXHRcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBhdXRob3IgPSBmaW5kQXV0aG9yKCk7XG5cdCAgICAgICAgYm9va3MgID0gZmluZEJvb2tzQnlBdXRob3IoYXV0aG9yKTtcblx0ICAgICAgICAvLyBzdWNjZXNzXG5cdCAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG5cdCAgICAgICAgLy8gZmFpbHVyZVxuXHQgICAgICB9XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgRXJyYmFjayBFeGFtcGxlXG5cdFxuXHQgICAgICBgYGBqc1xuXHRcblx0ICAgICAgZnVuY3Rpb24gZm91bmRCb29rcyhib29rcykge1xuXHRcblx0ICAgICAgfVxuXHRcblx0ICAgICAgZnVuY3Rpb24gZmFpbHVyZShyZWFzb24pIHtcblx0XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0aG9yLCBlcnIpe1xuXHQgICAgICAgIGlmIChlcnIpIHtcblx0ICAgICAgICAgIGZhaWx1cmUoZXJyKTtcblx0ICAgICAgICAgIC8vIGZhaWx1cmVcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgZmluZEJvb29rc0J5QXV0aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikge1xuXHQgICAgICAgICAgICAgIGlmIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgIGZhaWx1cmUoZXJyKTtcblx0ICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgZm91bmRCb29rcyhib29rcyk7XG5cdCAgICAgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikge1xuXHQgICAgICAgICAgICAgICAgICBmYWlsdXJlKHJlYXNvbik7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcblx0ICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgLy8gc3VjY2Vzc1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgUHJvbWlzZSBFeGFtcGxlO1xuXHRcblx0ICAgICAgYGBgamF2YXNjcmlwdFxuXHQgICAgICBmaW5kQXV0aG9yKCkuXG5cdCAgICAgICAgdGhlbihmaW5kQm9va3NCeUF1dGhvcikuXG5cdCAgICAgICAgdGhlbihmdW5jdGlvbihib29rcyl7XG5cdCAgICAgICAgICAvLyBmb3VuZCBib29rc1xuXHQgICAgICB9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuXHQgICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIEBtZXRob2QgdGhlblxuXHQgICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvbkZ1bGZpbGxlZFxuXHQgICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGVkXG5cdCAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cblx0ICAgICAgQHJldHVybiB7UHJvbWlzZX1cblx0ICAgICovXG5cdCAgICAgIHRoZW46IGxpYiRlczYkcHJvbWlzZSR0aGVuJCRkZWZhdWx0LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXG5cdCAgICAgIGFzIHRoZSBjYXRjaCBibG9jayBvZiBhIHRyeS9jYXRjaCBzdGF0ZW1lbnQuXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmdW5jdGlvbiBmaW5kQXV0aG9yKCl7XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG4ndCBmaW5kIHRoYXQgYXV0aG9yJyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIHN5bmNocm9ub3VzXG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgZmluZEF1dGhvcigpO1xuXHQgICAgICB9IGNhdGNoKHJlYXNvbikge1xuXHQgICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcblx0ICAgICAgZmluZEF1dGhvcigpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3Jvbmdcblx0ICAgICAgfSk7XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgQG1ldGhvZCBjYXRjaFxuXHQgICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGlvblxuXHQgICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgICAgIEByZXR1cm4ge1Byb21pc2V9XG5cdCAgICAqL1xuXHQgICAgICAnY2F0Y2gnOiBmdW5jdGlvbihvblJlamVjdGlvbikge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24pO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3I7XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvcihDb25zdHJ1Y3RvciwgaW5wdXQpIHtcblx0ICAgICAgdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvciA9IENvbnN0cnVjdG9yO1xuXHQgICAgICB0aGlzLnByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG5cdFxuXHQgICAgICBpZiAoIXRoaXMucHJvbWlzZVtsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEXSkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG1ha2VQcm9taXNlKHRoaXMucHJvbWlzZSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzQXJyYXkoaW5wdXQpKSB7XG5cdCAgICAgICAgdGhpcy5faW5wdXQgICAgID0gaW5wdXQ7XG5cdCAgICAgICAgdGhpcy5sZW5ndGggICAgID0gaW5wdXQubGVuZ3RoO1xuXHQgICAgICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcblx0XG5cdCAgICAgICAgdGhpcy5fcmVzdWx0ID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTtcblx0XG5cdCAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLmxlbmd0aCB8fCAwO1xuXHQgICAgICAgICAgdGhpcy5fZW51bWVyYXRlKCk7XG5cdCAgICAgICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG5cdCAgICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QodGhpcy5wcm9taXNlLCBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkdmFsaWRhdGlvbkVycm9yKCkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJHZhbGlkYXRpb25FcnJvcigpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBFcnJvcignQXJyYXkgTWV0aG9kcyBtdXN0IGJlIHByb3ZpZGVkIGFuIEFycmF5Jyk7XG5cdCAgICB9XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl9lbnVtZXJhdGUgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGxlbmd0aCAgPSB0aGlzLmxlbmd0aDtcblx0ICAgICAgdmFyIGlucHV0ICAgPSB0aGlzLl9pbnB1dDtcblx0XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyB0aGlzLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORyAmJiBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB0aGlzLl9lYWNoRW50cnkoaW5wdXRbaV0sIGkpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24oZW50cnksIGkpIHtcblx0ICAgICAgdmFyIGMgPSB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yO1xuXHQgICAgICB2YXIgcmVzb2x2ZSA9IGMucmVzb2x2ZTtcblx0XG5cdCAgICAgIGlmIChyZXNvbHZlID09PSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRkZWZhdWx0KSB7XG5cdCAgICAgICAgdmFyIHRoZW4gPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRnZXRUaGVuKGVudHJ5KTtcblx0XG5cdCAgICAgICAgaWYgKHRoZW4gPT09IGxpYiRlczYkcHJvbWlzZSR0aGVuJCRkZWZhdWx0ICYmXG5cdCAgICAgICAgICAgIGVudHJ5Ll9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuXHQgICAgICAgICAgdGhpcy5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7XG5cdCAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhlbiAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG5cdCAgICAgICAgICB0aGlzLl9yZXN1bHRbaV0gPSBlbnRyeTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGMgPT09IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0KSB7XG5cdCAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBjKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBlbnRyeSwgdGhlbik7XG5cdCAgICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChuZXcgYyhmdW5jdGlvbihyZXNvbHZlKSB7IHJlc29sdmUoZW50cnkpOyB9KSwgaSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChyZXNvbHZlKGVudHJ5KSwgaSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbihzdGF0ZSwgaSwgdmFsdWUpIHtcblx0ICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG5cdFxuXHQgICAgICBpZiAocHJvbWlzZS5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHtcblx0ICAgICAgICB0aGlzLl9yZW1haW5pbmctLTtcblx0XG5cdCAgICAgICAgaWYgKHN0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdGhpcy5fcmVzdWx0W2ldID0gdmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fd2lsbFNldHRsZUF0ID0gZnVuY3Rpb24ocHJvbWlzZSwgaSkge1xuXHQgICAgICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cdFxuXHQgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUocHJvbWlzZSwgdW5kZWZpbmVkLCBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIGVudW1lcmF0b3IuX3NldHRsZWRBdChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQsIGksIHZhbHVlKTtcblx0ICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG5cdCAgICAgICAgZW51bWVyYXRvci5fc2V0dGxlZEF0KGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVELCBpLCByZWFzb24pO1xuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJHBvbHlmaWxsKCkge1xuXHQgICAgICB2YXIgbG9jYWw7XG5cdFxuXHQgICAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICAgIGxvY2FsID0gZ2xvYmFsO1xuXHQgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgbG9jYWwgPSBzZWxmO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICBsb2NhbCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdCAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlO1xuXHRcblx0ICAgICAgaWYgKFAgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFAucmVzb2x2ZSgpKSA9PT0gJ1tvYmplY3QgUHJvbWlzZV0nICYmICFQLmNhc3QpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGxvY2FsLlByb21pc2UgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdDtcblx0ICAgIH1cblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJHBvbHlmaWxsO1xuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlID0ge1xuXHQgICAgICAnUHJvbWlzZSc6IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0LFxuXHQgICAgICAncG9seWZpbGwnOiBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHRcblx0ICAgIH07XG5cdFxuXHQgICAgLyogZ2xvYmFsIGRlZmluZTp0cnVlIG1vZHVsZTp0cnVlIHdpbmRvdzogdHJ1ZSAqL1xuXHQgICAgaWYgKFwiZnVuY3Rpb25cIiA9PT0gJ2Z1bmN0aW9uJyAmJiBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxOClbJ2FtZCddKSB7XG5cdCAgICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSBmdW5jdGlvbigpIHsgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2U7IH0uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fLCBleHBvcnRzLCBtb2R1bGUpLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZVsnZXhwb3J0cyddKSB7XG5cdCAgICAgIG1vZHVsZVsnZXhwb3J0cyddID0gbGliJGVzNiRwcm9taXNlJHVtZCQkRVM2UHJvbWlzZTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgIHRoaXNbJ0VTNlByb21pc2UnXSA9IGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2U7XG5cdCAgICB9XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRkZWZhdWx0KCk7XG5cdH0pLmNhbGwodGhpcyk7XG5cdFxuXHRcblx0XG5cdC8qKiogRVhQT1JUUyBGUk9NIGV4cG9ydHMtbG9hZGVyICoqKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwuUHJvbWlzZTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTkpLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxOSkobW9kdWxlKSkpXG5cbi8qKiovIH0sXG4vKiA4NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKFByb21pc2UpIHsoZnVuY3Rpb24oc2VsZikge1xuXHQgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgaWYgKHNlbGYuZmV0Y2gpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0XG5cdCAgdmFyIHN1cHBvcnQgPSB7XG5cdCAgICBzZWFyY2hQYXJhbXM6ICdVUkxTZWFyY2hQYXJhbXMnIGluIHNlbGYsXG5cdCAgICBpdGVyYWJsZTogJ1N5bWJvbCcgaW4gc2VsZiAmJiAnaXRlcmF0b3InIGluIFN5bWJvbCxcblx0ICAgIGJsb2I6ICdGaWxlUmVhZGVyJyBpbiBzZWxmICYmICdCbG9iJyBpbiBzZWxmICYmIChmdW5jdGlvbigpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBuZXcgQmxvYigpXG5cdCAgICAgICAgcmV0dXJuIHRydWVcblx0ICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgICAgIH1cblx0ICAgIH0pKCksXG5cdCAgICBmb3JtRGF0YTogJ0Zvcm1EYXRhJyBpbiBzZWxmLFxuXHQgICAgYXJyYXlCdWZmZXI6ICdBcnJheUJ1ZmZlcicgaW4gc2VsZlxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lKSB7XG5cdCAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIG5hbWUgPSBTdHJpbmcobmFtZSlcblx0ICAgIH1cblx0ICAgIGlmICgvW15hLXowLTlcXC0jJCUmJyorLlxcXl9gfH5dL2kudGVzdChuYW1lKSkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGNoYXJhY3RlciBpbiBoZWFkZXIgZmllbGQgbmFtZScpXG5cdCAgICB9XG5cdCAgICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBub3JtYWxpemVWYWx1ZSh2YWx1ZSkge1xuXHQgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcblx0ICAgICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpXG5cdCAgICB9XG5cdCAgICByZXR1cm4gdmFsdWVcblx0ICB9XG5cdFxuXHQgIC8vIEJ1aWxkIGEgZGVzdHJ1Y3RpdmUgaXRlcmF0b3IgZm9yIHRoZSB2YWx1ZSBsaXN0XG5cdCAgZnVuY3Rpb24gaXRlcmF0b3JGb3IoaXRlbXMpIHtcblx0ICAgIHZhciBpdGVyYXRvciA9IHtcblx0ICAgICAgbmV4dDogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHZhbHVlID0gaXRlbXMuc2hpZnQoKVxuXHQgICAgICAgIHJldHVybiB7ZG9uZTogdmFsdWUgPT09IHVuZGVmaW5lZCwgdmFsdWU6IHZhbHVlfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHN1cHBvcnQuaXRlcmFibGUpIHtcblx0ICAgICAgaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiBpdGVyYXRvclxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGl0ZXJhdG9yXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBIZWFkZXJzKGhlYWRlcnMpIHtcblx0ICAgIHRoaXMubWFwID0ge31cblx0XG5cdCAgICBpZiAoaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMpIHtcblx0ICAgICAgaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG5cdCAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgdmFsdWUpXG5cdCAgICAgIH0sIHRoaXMpXG5cdFxuXHQgICAgfSBlbHNlIGlmIChoZWFkZXJzKSB7XG5cdCAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuXHQgICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIGhlYWRlcnNbbmFtZV0pXG5cdCAgICAgIH0sIHRoaXMpXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuXHQgICAgbmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSlcblx0ICAgIHZhbHVlID0gbm9ybWFsaXplVmFsdWUodmFsdWUpXG5cdCAgICB2YXIgbGlzdCA9IHRoaXMubWFwW25hbWVdXG5cdCAgICBpZiAoIWxpc3QpIHtcblx0ICAgICAgbGlzdCA9IFtdXG5cdCAgICAgIHRoaXMubWFwW25hbWVdID0gbGlzdFxuXHQgICAgfVxuXHQgICAgbGlzdC5wdXNoKHZhbHVlKVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGVbJ2RlbGV0ZSddID0gZnVuY3Rpb24obmFtZSkge1xuXHQgICAgZGVsZXRlIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihuYW1lKSB7XG5cdCAgICB2YXIgdmFsdWVzID0gdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV1cblx0ICAgIHJldHVybiB2YWx1ZXMgPyB2YWx1ZXNbMF0gOiBudWxsXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbihuYW1lKSB7XG5cdCAgICByZXR1cm4gdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV0gfHwgW11cblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgIHJldHVybiB0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShub3JtYWxpemVOYW1lKG5hbWUpKVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcblx0ICAgIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldID0gW25vcm1hbGl6ZVZhbHVlKHZhbHVlKV1cblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaywgdGhpc0FyZykge1xuXHQgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcy5tYXApLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuXHQgICAgICB0aGlzLm1hcFtuYW1lXS5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB2YWx1ZSwgbmFtZSwgdGhpcylcblx0ICAgICAgfSwgdGhpcylcblx0ICAgIH0sIHRoaXMpXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5rZXlzID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgaXRlbXMgPSBbXVxuXHQgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7IGl0ZW1zLnB1c2gobmFtZSkgfSlcblx0ICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGl0ZW1zID0gW11cblx0ICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkgeyBpdGVtcy5wdXNoKHZhbHVlKSB9KVxuXHQgICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUuZW50cmllcyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGl0ZW1zID0gW11cblx0ICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkgeyBpdGVtcy5wdXNoKFtuYW1lLCB2YWx1ZV0pIH0pXG5cdCAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG5cdCAgfVxuXHRcblx0ICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuXHQgICAgSGVhZGVycy5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXNcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGNvbnN1bWVkKGJvZHkpIHtcblx0ICAgIGlmIChib2R5LmJvZHlVc2VkKSB7XG5cdCAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKSlcblx0ICAgIH1cblx0ICAgIGJvZHkuYm9keVVzZWQgPSB0cnVlXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKSB7XG5cdCAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXNvbHZlKHJlYWRlci5yZXN1bHQpXG5cdCAgICAgIH1cblx0ICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZWplY3QocmVhZGVyLmVycm9yKVxuXHQgICAgICB9XG5cdCAgICB9KVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVhZEJsb2JBc0FycmF5QnVmZmVyKGJsb2IpIHtcblx0ICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG5cdCAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYilcblx0ICAgIHJldHVybiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikge1xuXHQgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcblx0ICAgIHJlYWRlci5yZWFkQXNUZXh0KGJsb2IpXG5cdCAgICByZXR1cm4gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIEJvZHkoKSB7XG5cdCAgICB0aGlzLmJvZHlVc2VkID0gZmFsc2Vcblx0XG5cdCAgICB0aGlzLl9pbml0Qm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcblx0ICAgICAgdGhpcy5fYm9keUluaXQgPSBib2R5XG5cdCAgICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHlcblx0ICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmJsb2IgJiYgQmxvYi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuXHQgICAgICAgIHRoaXMuX2JvZHlCbG9iID0gYm9keVxuXHQgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuZm9ybURhdGEgJiYgRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcblx0ICAgICAgICB0aGlzLl9ib2R5Rm9ybURhdGEgPSBib2R5XG5cdCAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG5cdCAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5LnRvU3RyaW5nKClcblx0ICAgICAgfSBlbHNlIGlmICghYm9keSkge1xuXHQgICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gJydcblx0ICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyICYmIEFycmF5QnVmZmVyLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG5cdCAgICAgICAgLy8gT25seSBzdXBwb3J0IEFycmF5QnVmZmVycyBmb3IgUE9TVCBtZXRob2QuXG5cdCAgICAgICAgLy8gUmVjZWl2aW5nIEFycmF5QnVmZmVycyBoYXBwZW5zIHZpYSBCbG9icywgaW5zdGVhZC5cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIEJvZHlJbml0IHR5cGUnKVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIXRoaXMuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ3RleHQvcGxhaW47Y2hhcnNldD1VVEYtOCcpXG5cdCAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QmxvYiAmJiB0aGlzLl9ib2R5QmxvYi50eXBlKSB7XG5cdCAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCB0aGlzLl9ib2R5QmxvYi50eXBlKVxuXHQgICAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG5cdCAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLTgnKVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChzdXBwb3J0LmJsb2IpIHtcblx0ICAgICAgdGhpcy5ibG9iID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcblx0ICAgICAgICBpZiAocmVqZWN0ZWQpIHtcblx0ICAgICAgICAgIHJldHVybiByZWplY3RlZFxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG5cdCAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlCbG9iKVxuXHQgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYicpXG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLmFycmF5QnVmZmVyID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuYmxvYigpLnRoZW4ocmVhZEJsb2JBc0FycmF5QnVmZmVyKVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuXHQgICAgICAgIGlmIChyZWplY3RlZCkge1xuXHQgICAgICAgICAgcmV0dXJuIHJlamVjdGVkXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcblx0ICAgICAgICAgIHJldHVybiByZWFkQmxvYkFzVGV4dCh0aGlzLl9ib2R5QmxvYilcblx0ICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlGb3JtRGF0YSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIHRleHQnKVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlUZXh0KVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy50ZXh0ID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcblx0ICAgICAgICByZXR1cm4gcmVqZWN0ZWQgPyByZWplY3RlZCA6IFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChzdXBwb3J0LmZvcm1EYXRhKSB7XG5cdCAgICAgIHRoaXMuZm9ybURhdGEgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihkZWNvZGUpXG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmpzb24gPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oSlNPTi5wYXJzZSlcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdGhpc1xuXHQgIH1cblx0XG5cdCAgLy8gSFRUUCBtZXRob2RzIHdob3NlIGNhcGl0YWxpemF0aW9uIHNob3VsZCBiZSBub3JtYWxpemVkXG5cdCAgdmFyIG1ldGhvZHMgPSBbJ0RFTEVURScsICdHRVQnLCAnSEVBRCcsICdPUFRJT05TJywgJ1BPU1QnLCAnUFVUJ11cblx0XG5cdCAgZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kKG1ldGhvZCkge1xuXHQgICAgdmFyIHVwY2FzZWQgPSBtZXRob2QudG9VcHBlckNhc2UoKVxuXHQgICAgcmV0dXJuIChtZXRob2RzLmluZGV4T2YodXBjYXNlZCkgPiAtMSkgPyB1cGNhc2VkIDogbWV0aG9kXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBSZXF1ZXN0KGlucHV0LCBvcHRpb25zKSB7XG5cdCAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuXHQgICAgdmFyIGJvZHkgPSBvcHRpb25zLmJvZHlcblx0ICAgIGlmIChSZXF1ZXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGlucHV0KSkge1xuXHQgICAgICBpZiAoaW5wdXQuYm9keVVzZWQpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKVxuXHQgICAgICB9XG5cdCAgICAgIHRoaXMudXJsID0gaW5wdXQudXJsXG5cdCAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBpbnB1dC5jcmVkZW50aWFsc1xuXHQgICAgICBpZiAoIW9wdGlvbnMuaGVhZGVycykge1xuXHQgICAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKGlucHV0LmhlYWRlcnMpXG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5tZXRob2QgPSBpbnB1dC5tZXRob2Rcblx0ICAgICAgdGhpcy5tb2RlID0gaW5wdXQubW9kZVxuXHQgICAgICBpZiAoIWJvZHkpIHtcblx0ICAgICAgICBib2R5ID0gaW5wdXQuX2JvZHlJbml0XG5cdCAgICAgICAgaW5wdXQuYm9keVVzZWQgPSB0cnVlXG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMudXJsID0gaW5wdXRcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmNyZWRlbnRpYWxzID0gb3B0aW9ucy5jcmVkZW50aWFscyB8fCB0aGlzLmNyZWRlbnRpYWxzIHx8ICdvbWl0J1xuXHQgICAgaWYgKG9wdGlvbnMuaGVhZGVycyB8fCAhdGhpcy5oZWFkZXJzKSB7XG5cdCAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcblx0ICAgIH1cblx0ICAgIHRoaXMubWV0aG9kID0gbm9ybWFsaXplTWV0aG9kKG9wdGlvbnMubWV0aG9kIHx8IHRoaXMubWV0aG9kIHx8ICdHRVQnKVxuXHQgICAgdGhpcy5tb2RlID0gb3B0aW9ucy5tb2RlIHx8IHRoaXMubW9kZSB8fCBudWxsXG5cdCAgICB0aGlzLnJlZmVycmVyID0gbnVsbFxuXHRcblx0ICAgIGlmICgodGhpcy5tZXRob2QgPT09ICdHRVQnIHx8IHRoaXMubWV0aG9kID09PSAnSEVBRCcpICYmIGJvZHkpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm9keSBub3QgYWxsb3dlZCBmb3IgR0VUIG9yIEhFQUQgcmVxdWVzdHMnKVxuXHQgICAgfVxuXHQgICAgdGhpcy5faW5pdEJvZHkoYm9keSlcblx0ICB9XG5cdFxuXHQgIFJlcXVlc3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gbmV3IFJlcXVlc3QodGhpcylcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGRlY29kZShib2R5KSB7XG5cdCAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpXG5cdCAgICBib2R5LnRyaW0oKS5zcGxpdCgnJicpLmZvckVhY2goZnVuY3Rpb24oYnl0ZXMpIHtcblx0ICAgICAgaWYgKGJ5dGVzKSB7XG5cdCAgICAgICAgdmFyIHNwbGl0ID0gYnl0ZXMuc3BsaXQoJz0nKVxuXHQgICAgICAgIHZhciBuYW1lID0gc3BsaXQuc2hpZnQoKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuXHQgICAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJz0nKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuXHQgICAgICAgIGZvcm0uYXBwZW5kKGRlY29kZVVSSUNvbXBvbmVudChuYW1lKSwgZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSlcblx0ICAgICAgfVxuXHQgICAgfSlcblx0ICAgIHJldHVybiBmb3JtXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBoZWFkZXJzKHhocikge1xuXHQgICAgdmFyIGhlYWQgPSBuZXcgSGVhZGVycygpXG5cdCAgICB2YXIgcGFpcnMgPSAoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpIHx8ICcnKS50cmltKCkuc3BsaXQoJ1xcbicpXG5cdCAgICBwYWlycy5mb3JFYWNoKGZ1bmN0aW9uKGhlYWRlcikge1xuXHQgICAgICB2YXIgc3BsaXQgPSBoZWFkZXIudHJpbSgpLnNwbGl0KCc6Jylcblx0ICAgICAgdmFyIGtleSA9IHNwbGl0LnNoaWZ0KCkudHJpbSgpXG5cdCAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJzonKS50cmltKClcblx0ICAgICAgaGVhZC5hcHBlbmQoa2V5LCB2YWx1ZSlcblx0ICAgIH0pXG5cdCAgICByZXR1cm4gaGVhZFxuXHQgIH1cblx0XG5cdCAgQm9keS5jYWxsKFJlcXVlc3QucHJvdG90eXBlKVxuXHRcblx0ICBmdW5jdGlvbiBSZXNwb25zZShib2R5SW5pdCwgb3B0aW9ucykge1xuXHQgICAgaWYgKCFvcHRpb25zKSB7XG5cdCAgICAgIG9wdGlvbnMgPSB7fVxuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMudHlwZSA9ICdkZWZhdWx0J1xuXHQgICAgdGhpcy5zdGF0dXMgPSBvcHRpb25zLnN0YXR1c1xuXHQgICAgdGhpcy5vayA9IHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMFxuXHQgICAgdGhpcy5zdGF0dXNUZXh0ID0gb3B0aW9ucy5zdGF0dXNUZXh0XG5cdCAgICB0aGlzLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzID8gb3B0aW9ucy5oZWFkZXJzIDogbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuXHQgICAgdGhpcy51cmwgPSBvcHRpb25zLnVybCB8fCAnJ1xuXHQgICAgdGhpcy5faW5pdEJvZHkoYm9keUluaXQpXG5cdCAgfVxuXHRcblx0ICBCb2R5LmNhbGwoUmVzcG9uc2UucHJvdG90eXBlKVxuXHRcblx0ICBSZXNwb25zZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiBuZXcgUmVzcG9uc2UodGhpcy5fYm9keUluaXQsIHtcblx0ICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcblx0ICAgICAgc3RhdHVzVGV4dDogdGhpcy5zdGF0dXNUZXh0LFxuXHQgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpLFxuXHQgICAgICB1cmw6IHRoaXMudXJsXG5cdCAgICB9KVxuXHQgIH1cblx0XG5cdCAgUmVzcG9uc2UuZXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciByZXNwb25zZSA9IG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiAwLCBzdGF0dXNUZXh0OiAnJ30pXG5cdCAgICByZXNwb25zZS50eXBlID0gJ2Vycm9yJ1xuXHQgICAgcmV0dXJuIHJlc3BvbnNlXG5cdCAgfVxuXHRcblx0ICB2YXIgcmVkaXJlY3RTdGF0dXNlcyA9IFszMDEsIDMwMiwgMzAzLCAzMDcsIDMwOF1cblx0XG5cdCAgUmVzcG9uc2UucmVkaXJlY3QgPSBmdW5jdGlvbih1cmwsIHN0YXR1cykge1xuXHQgICAgaWYgKHJlZGlyZWN0U3RhdHVzZXMuaW5kZXhPZihzdGF0dXMpID09PSAtMSkge1xuXHQgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCBzdGF0dXMgY29kZScpXG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiBzdGF0dXMsIGhlYWRlcnM6IHtsb2NhdGlvbjogdXJsfX0pXG5cdCAgfVxuXHRcblx0ICBzZWxmLkhlYWRlcnMgPSBIZWFkZXJzXG5cdCAgc2VsZi5SZXF1ZXN0ID0gUmVxdWVzdFxuXHQgIHNlbGYuUmVzcG9uc2UgPSBSZXNwb25zZVxuXHRcblx0ICBzZWxmLmZldGNoID0gZnVuY3Rpb24oaW5wdXQsIGluaXQpIHtcblx0ICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgdmFyIHJlcXVlc3Rcblx0ICAgICAgaWYgKFJlcXVlc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoaW5wdXQpICYmICFpbml0KSB7XG5cdCAgICAgICAgcmVxdWVzdCA9IGlucHV0XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KGlucHV0LCBpbml0KVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcblx0XG5cdCAgICAgIGZ1bmN0aW9uIHJlc3BvbnNlVVJMKCkge1xuXHQgICAgICAgIGlmICgncmVzcG9uc2VVUkwnIGluIHhocikge1xuXHQgICAgICAgICAgcmV0dXJuIHhoci5yZXNwb25zZVVSTFxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gQXZvaWQgc2VjdXJpdHkgd2FybmluZ3Mgb24gZ2V0UmVzcG9uc2VIZWFkZXIgd2hlbiBub3QgYWxsb3dlZCBieSBDT1JTXG5cdCAgICAgICAgaWYgKC9eWC1SZXF1ZXN0LVVSTDovbS50ZXN0KHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpIHtcblx0ICAgICAgICAgIHJldHVybiB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ1gtUmVxdWVzdC1VUkwnKVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgb3B0aW9ucyA9IHtcblx0ICAgICAgICAgIHN0YXR1czogeGhyLnN0YXR1cyxcblx0ICAgICAgICAgIHN0YXR1c1RleHQ6IHhoci5zdGF0dXNUZXh0LFxuXHQgICAgICAgICAgaGVhZGVyczogaGVhZGVycyh4aHIpLFxuXHQgICAgICAgICAgdXJsOiByZXNwb25zZVVSTCgpXG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBib2R5ID0gJ3Jlc3BvbnNlJyBpbiB4aHIgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0XG5cdCAgICAgICAgcmVzb2x2ZShuZXcgUmVzcG9uc2UoYm9keSwgb3B0aW9ucykpXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcblx0ICAgICAgfVxuXHRcblx0ICAgICAgeGhyLm9udGltZW91dCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnVybCwgdHJ1ZSlcblx0XG5cdCAgICAgIGlmIChyZXF1ZXN0LmNyZWRlbnRpYWxzID09PSAnaW5jbHVkZScpIHtcblx0ICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoJ3Jlc3BvbnNlVHlwZScgaW4geGhyICYmIHN1cHBvcnQuYmxvYikge1xuXHQgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYidcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmVxdWVzdC5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcblx0ICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihuYW1lLCB2YWx1ZSlcblx0ICAgICAgfSlcblx0XG5cdCAgICAgIHhoci5zZW5kKHR5cGVvZiByZXF1ZXN0Ll9ib2R5SW5pdCA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogcmVxdWVzdC5fYm9keUluaXQpXG5cdCAgICB9KVxuXHQgIH1cblx0ICBzZWxmLmZldGNoLnBvbHlmaWxsID0gdHJ1ZVxuXHR9KSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcyk7XG5cdFxuXHRcblx0LyoqKiBFWFBPUlRTIEZST00gZXhwb3J0cy1sb2FkZXIgKioqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IHNlbGYuZmV0Y2g7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDgzKSkpXG5cbi8qKiovIH0sXG4vKiA4NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcImI0ZGUyOWZlNDNhYzg1ZWYwYjY2ZjljN2RmYzQ3NGQzLnBuZ1wiO1xuXG4vKioqLyB9LFxuLyogODYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXROYXRpdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpLFxuXHQgICAgcm9vdCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG5cdHZhciBEYXRhVmlldyA9IGdldE5hdGl2ZShyb290LCAnRGF0YVZpZXcnKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRGF0YVZpZXc7XG5cblxuLyoqKi8gfSxcbi8qIDg3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaGFzaENsZWFyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTgpLFxuXHQgICAgaGFzaERlbGV0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTE5KSxcblx0ICAgIGhhc2hHZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMCksXG5cdCAgICBoYXNoSGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjEpLFxuXHQgICAgaGFzaFNldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIyKTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgaGFzaCBvYmplY3QuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cblx0ICovXG5cdGZ1bmN0aW9uIEhhc2goZW50cmllcykge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICBsZW5ndGggPSBlbnRyaWVzID8gZW50cmllcy5sZW5ndGggOiAwO1xuXHRcblx0ICB0aGlzLmNsZWFyKCk7XG5cdCAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuXHQgICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIEFkZCBtZXRob2RzIHRvIGBIYXNoYC5cblx0SGFzaC5wcm90b3R5cGUuY2xlYXIgPSBoYXNoQ2xlYXI7XG5cdEhhc2gucHJvdG90eXBlWydkZWxldGUnXSA9IGhhc2hEZWxldGU7XG5cdEhhc2gucHJvdG90eXBlLmdldCA9IGhhc2hHZXQ7XG5cdEhhc2gucHJvdG90eXBlLmhhcyA9IGhhc2hIYXM7XG5cdEhhc2gucHJvdG90eXBlLnNldCA9IGhhc2hTZXQ7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEhhc2g7XG5cblxuLyoqKi8gfSxcbi8qIDg4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2V0TmF0aXZlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KSxcblx0ICAgIHJvb3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xuXHR2YXIgUHJvbWlzZSA9IGdldE5hdGl2ZShyb290LCAnUHJvbWlzZScpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBQcm9taXNlO1xuXG5cbi8qKiovIH0sXG4vKiA4OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldE5hdGl2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNiksXG5cdCAgICByb290ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cblx0dmFyIFNldCA9IGdldE5hdGl2ZShyb290LCAnU2V0Jyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFNldDtcblxuXG4vKioqLyB9LFxuLyogOTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBNYXBDYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpLFxuXHQgICAgc2V0Q2FjaGVBZGQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOCksXG5cdCAgICBzZXRDYWNoZUhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTM5KTtcblx0XG5cdC8qKlxuXHQgKlxuXHQgKiBDcmVhdGVzIGFuIGFycmF5IGNhY2hlIG9iamVjdCB0byBzdG9yZSB1bmlxdWUgdmFsdWVzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQHBhcmFtIHtBcnJheX0gW3ZhbHVlc10gVGhlIHZhbHVlcyB0byBjYWNoZS5cblx0ICovXG5cdGZ1bmN0aW9uIFNldENhY2hlKHZhbHVlcykge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICBsZW5ndGggPSB2YWx1ZXMgPyB2YWx1ZXMubGVuZ3RoIDogMDtcblx0XG5cdCAgdGhpcy5fX2RhdGFfXyA9IG5ldyBNYXBDYWNoZTtcblx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgdGhpcy5hZGQodmFsdWVzW2luZGV4XSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyBBZGQgbWV0aG9kcyB0byBgU2V0Q2FjaGVgLlxuXHRTZXRDYWNoZS5wcm90b3R5cGUuYWRkID0gU2V0Q2FjaGUucHJvdG90eXBlLnB1c2ggPSBzZXRDYWNoZUFkZDtcblx0U2V0Q2FjaGUucHJvdG90eXBlLmhhcyA9IHNldENhY2hlSGFzO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTZXRDYWNoZTtcblxuXG4vKioqLyB9LFxuLyogOTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciByb290ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdC8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xuXHR2YXIgVWludDhBcnJheSA9IHJvb3QuVWludDhBcnJheTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gVWludDhBcnJheTtcblxuXG4vKioqLyB9LFxuLyogOTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXROYXRpdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpLFxuXHQgICAgcm9vdCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG5cdHZhciBXZWFrTWFwID0gZ2V0TmF0aXZlKHJvb3QsICdXZWFrTWFwJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFdlYWtNYXA7XG5cblxuLyoqKi8gfSxcbi8qIDkzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQSBmYXN0ZXIgYWx0ZXJuYXRpdmUgdG8gYEZ1bmN0aW9uI2FwcGx5YCwgdGhpcyBmdW5jdGlvbiBpbnZva2VzIGBmdW5jYFxuXHQgKiB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiBgdGhpc0FyZ2AgYW5kIHRoZSBhcmd1bWVudHMgb2YgYGFyZ3NgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBpbnZva2UuXG5cdCAqIEBwYXJhbSB7Kn0gdGhpc0FyZyBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcmdzIFRoZSBhcmd1bWVudHMgdG8gaW52b2tlIGBmdW5jYCB3aXRoLlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzdWx0IG9mIGBmdW5jYC5cblx0ICovXG5cdGZ1bmN0aW9uIGFwcGx5KGZ1bmMsIHRoaXNBcmcsIGFyZ3MpIHtcblx0ICB2YXIgbGVuZ3RoID0gYXJncy5sZW5ndGg7XG5cdCAgc3dpdGNoIChsZW5ndGgpIHtcblx0ICAgIGNhc2UgMDogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnKTtcblx0ICAgIGNhc2UgMTogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmdzWzBdKTtcblx0ICAgIGNhc2UgMjogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmdzWzBdLCBhcmdzWzFdKTtcblx0ICAgIGNhc2UgMzogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcblx0ICB9XG5cdCAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYXBwbHk7XG5cblxuLyoqKi8gfSxcbi8qIDk0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLnNvbWVgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZVxuXHQgKiBzaG9ydGhhbmRzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBbYXJyYXldIFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW55IGVsZW1lbnQgcGFzc2VzIHRoZSBwcmVkaWNhdGUgY2hlY2ssXG5cdCAqICBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBhcnJheVNvbWUoYXJyYXksIHByZWRpY2F0ZSkge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG5cdFxuXHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGZhbHNlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGFycmF5U29tZTtcblxuXG4vKioqLyB9LFxuLyogOTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG5cdHZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZGVsYXlgIGFuZCBgXy5kZWZlcmAgd2hpY2ggYWNjZXB0cyBhbiBhcnJheVxuXHQgKiBvZiBgZnVuY2AgYXJndW1lbnRzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWxheS5cblx0ICogQHBhcmFtIHtudW1iZXJ9IHdhaXQgVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkgaW52b2NhdGlvbi5cblx0ICogQHBhcmFtIHtPYmplY3R9IGFyZ3MgVGhlIGFyZ3VtZW50cyB0byBwcm92aWRlIHRvIGBmdW5jYC5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXIgaWQuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlRGVsYXkoZnVuYywgd2FpdCwgYXJncykge1xuXHQgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG5cdCAgfVxuXHQgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBmdW5jLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7IH0sIHdhaXQpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VEZWxheTtcblxuXG4vKioqLyB9LFxuLyogOTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5maW5kSW5kZXhgIGFuZCBgXy5maW5kTGFzdEluZGV4YCB3aXRob3V0XG5cdCAqIHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gZnJvbUluZGV4IFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cblx0ICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlRmluZEluZGV4KGFycmF5LCBwcmVkaWNhdGUsIGZyb21JbmRleCwgZnJvbVJpZ2h0KSB7XG5cdCAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcblx0ICAgICAgaW5kZXggPSBmcm9tSW5kZXggKyAoZnJvbVJpZ2h0ID8gMSA6IC0xKTtcblx0XG5cdCAgd2hpbGUgKChmcm9tUmlnaHQgPyBpbmRleC0tIDogKytpbmRleCA8IGxlbmd0aCkpIHtcblx0ICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG5cdCAgICAgIHJldHVybiBpbmRleDtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIC0xO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VGaW5kSW5kZXg7XG5cblxuLyoqKi8gfSxcbi8qIDk3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaGFzSW5gIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBrZXkgVGhlIGtleSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUhhc0luKG9iamVjdCwga2V5KSB7XG5cdCAgcmV0dXJuIG9iamVjdCAhPSBudWxsICYmIGtleSBpbiBPYmplY3Qob2JqZWN0KTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlSGFzSW47XG5cblxuLyoqKi8gfSxcbi8qIDk4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgU3RhY2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKSxcblx0ICAgIGVxdWFsQXJyYXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCksXG5cdCAgICBlcXVhbEJ5VGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTApLFxuXHQgICAgZXF1YWxPYmplY3RzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTEpLFxuXHQgICAgZ2V0VGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTUpLFxuXHQgICAgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNCksXG5cdCAgICBpc0hvc3RPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKSxcblx0ICAgIGlzVHlwZWRBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTU0KTtcblx0XG5cdC8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNvbXBhcmlzb24gc3R5bGVzLiAqL1xuXHR2YXIgUEFSVElBTF9DT01QQVJFX0ZMQUcgPSAyO1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuXHQgICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuXHQgICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cblx0dmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cdFxuXHQvKipcblx0ICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbGAgZm9yIGFycmF5cyBhbmQgb2JqZWN0cyB3aGljaCBwZXJmb3Jtc1xuXHQgKiBkZWVwIGNvbXBhcmlzb25zIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMgZW5hYmxpbmcgb2JqZWN0cyB3aXRoIGNpcmN1bGFyXG5cdCAqIHJlZmVyZW5jZXMgdG8gYmUgY29tcGFyZWQuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2JpdG1hc2tdIFRoZSBiaXRtYXNrIG9mIGNvbXBhcmlzb24gZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgXG5cdCAqICBmb3IgbW9yZSBkZXRhaWxzLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW3N0YWNrXSBUcmFja3MgdHJhdmVyc2VkIGBvYmplY3RgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUlzRXF1YWxEZWVwKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcblx0ICB2YXIgb2JqSXNBcnIgPSBpc0FycmF5KG9iamVjdCksXG5cdCAgICAgIG90aElzQXJyID0gaXNBcnJheShvdGhlciksXG5cdCAgICAgIG9ialRhZyA9IGFycmF5VGFnLFxuXHQgICAgICBvdGhUYWcgPSBhcnJheVRhZztcblx0XG5cdCAgaWYgKCFvYmpJc0Fycikge1xuXHQgICAgb2JqVGFnID0gZ2V0VGFnKG9iamVjdCk7XG5cdCAgICBvYmpUYWcgPSBvYmpUYWcgPT0gYXJnc1RhZyA/IG9iamVjdFRhZyA6IG9ialRhZztcblx0ICB9XG5cdCAgaWYgKCFvdGhJc0Fycikge1xuXHQgICAgb3RoVGFnID0gZ2V0VGFnKG90aGVyKTtcblx0ICAgIG90aFRhZyA9IG90aFRhZyA9PSBhcmdzVGFnID8gb2JqZWN0VGFnIDogb3RoVGFnO1xuXHQgIH1cblx0ICB2YXIgb2JqSXNPYmogPSBvYmpUYWcgPT0gb2JqZWN0VGFnICYmICFpc0hvc3RPYmplY3Qob2JqZWN0KSxcblx0ICAgICAgb3RoSXNPYmogPSBvdGhUYWcgPT0gb2JqZWN0VGFnICYmICFpc0hvc3RPYmplY3Qob3RoZXIpLFxuXHQgICAgICBpc1NhbWVUYWcgPSBvYmpUYWcgPT0gb3RoVGFnO1xuXHRcblx0ICBpZiAoaXNTYW1lVGFnICYmICFvYmpJc09iaikge1xuXHQgICAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcblx0ICAgIHJldHVybiAob2JqSXNBcnIgfHwgaXNUeXBlZEFycmF5KG9iamVjdCkpXG5cdCAgICAgID8gZXF1YWxBcnJheXMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaylcblx0ICAgICAgOiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIG9ialRhZywgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG5cdCAgfVxuXHQgIGlmICghKGJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRykpIHtcblx0ICAgIHZhciBvYmpJc1dyYXBwZWQgPSBvYmpJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgJ19fd3JhcHBlZF9fJyksXG5cdCAgICAgICAgb3RoSXNXcmFwcGVkID0gb3RoSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwgJ19fd3JhcHBlZF9fJyk7XG5cdFxuXHQgICAgaWYgKG9iaklzV3JhcHBlZCB8fCBvdGhJc1dyYXBwZWQpIHtcblx0ICAgICAgdmFyIG9ialVud3JhcHBlZCA9IG9iaklzV3JhcHBlZCA/IG9iamVjdC52YWx1ZSgpIDogb2JqZWN0LFxuXHQgICAgICAgICAgb3RoVW53cmFwcGVkID0gb3RoSXNXcmFwcGVkID8gb3RoZXIudmFsdWUoKSA6IG90aGVyO1xuXHRcblx0ICAgICAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcblx0ICAgICAgcmV0dXJuIGVxdWFsRnVuYyhvYmpVbndyYXBwZWQsIG90aFVud3JhcHBlZCwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoIWlzU2FtZVRhZykge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2spO1xuXHQgIHJldHVybiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZUlzRXF1YWxEZWVwO1xuXG5cbi8qKiovIH0sXG4vKiA5OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIFN0YWNrID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyksXG5cdCAgICBiYXNlSXNFcXVhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHRcblx0LyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG5cdHZhciBVTk9SREVSRURfQ09NUEFSRV9GTEFHID0gMSxcblx0ICAgIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc01hdGNoYCB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuXHQgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIG1hdGNoLlxuXHQgKiBAcGFyYW0ge0FycmF5fSBtYXRjaERhdGEgVGhlIHByb3BlcnR5IG5hbWVzLCB2YWx1ZXMsIGFuZCBjb21wYXJlIGZsYWdzIHRvIG1hdGNoLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBvYmplY3RgIGlzIGEgbWF0Y2gsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VJc01hdGNoKG9iamVjdCwgc291cmNlLCBtYXRjaERhdGEsIGN1c3RvbWl6ZXIpIHtcblx0ICB2YXIgaW5kZXggPSBtYXRjaERhdGEubGVuZ3RoLFxuXHQgICAgICBsZW5ndGggPSBpbmRleCxcblx0ICAgICAgbm9DdXN0b21pemVyID0gIWN1c3RvbWl6ZXI7XG5cdFxuXHQgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuXHQgICAgcmV0dXJuICFsZW5ndGg7XG5cdCAgfVxuXHQgIG9iamVjdCA9IE9iamVjdChvYmplY3QpO1xuXHQgIHdoaWxlIChpbmRleC0tKSB7XG5cdCAgICB2YXIgZGF0YSA9IG1hdGNoRGF0YVtpbmRleF07XG5cdCAgICBpZiAoKG5vQ3VzdG9taXplciAmJiBkYXRhWzJdKVxuXHQgICAgICAgICAgPyBkYXRhWzFdICE9PSBvYmplY3RbZGF0YVswXV1cblx0ICAgICAgICAgIDogIShkYXRhWzBdIGluIG9iamVjdClcblx0ICAgICAgICApIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgZGF0YSA9IG1hdGNoRGF0YVtpbmRleF07XG5cdCAgICB2YXIga2V5ID0gZGF0YVswXSxcblx0ICAgICAgICBvYmpWYWx1ZSA9IG9iamVjdFtrZXldLFxuXHQgICAgICAgIHNyY1ZhbHVlID0gZGF0YVsxXTtcblx0XG5cdCAgICBpZiAobm9DdXN0b21pemVyICYmIGRhdGFbMl0pIHtcblx0ICAgICAgaWYgKG9ialZhbHVlID09PSB1bmRlZmluZWQgJiYgIShrZXkgaW4gb2JqZWN0KSkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIHN0YWNrID0gbmV3IFN0YWNrO1xuXHQgICAgICBpZiAoY3VzdG9taXplcikge1xuXHQgICAgICAgIHZhciByZXN1bHQgPSBjdXN0b21pemVyKG9ialZhbHVlLCBzcmNWYWx1ZSwga2V5LCBvYmplY3QsIHNvdXJjZSwgc3RhY2spO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICghKHJlc3VsdCA9PT0gdW5kZWZpbmVkXG5cdCAgICAgICAgICAgID8gYmFzZUlzRXF1YWwoc3JjVmFsdWUsIG9ialZhbHVlLCBjdXN0b21pemVyLCBVTk9SREVSRURfQ09NUEFSRV9GTEFHIHwgUEFSVElBTF9DT01QQVJFX0ZMQUcsIHN0YWNrKVxuXHQgICAgICAgICAgICA6IHJlc3VsdFxuXHQgICAgICAgICAgKSkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlSXNNYXRjaDtcblxuXG4vKioqLyB9LFxuLyogMTAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpLFxuXHQgICAgaXNIb3N0T2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSksXG5cdCAgICBpc01hc2tlZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTI1KSxcblx0ICAgIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KSxcblx0ICAgIHRvU291cmNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSk7XG5cdFxuXHQvKipcblx0ICogVXNlZCB0byBtYXRjaCBgUmVnRXhwYFxuXHQgKiBbc3ludGF4IGNoYXJhY3RlcnNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXBhdHRlcm5zKS5cblx0ICovXG5cdHZhciByZVJlZ0V4cENoYXIgPSAvW1xcXFxeJC4qKz8oKVtcXF17fXxdL2c7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSkuICovXG5cdHZhciByZUlzSG9zdEN0b3IgPSAvXlxcW29iamVjdCAuKz9Db25zdHJ1Y3RvclxcXSQvO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xuXHR2YXIgZnVuY1RvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xuXHRcblx0LyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IGlmIGEgbWV0aG9kIGlzIG5hdGl2ZS4gKi9cblx0dmFyIHJlSXNOYXRpdmUgPSBSZWdFeHAoJ14nICtcblx0ICBmdW5jVG9TdHJpbmcuY2FsbChoYXNPd25Qcm9wZXJ0eSkucmVwbGFjZShyZVJlZ0V4cENoYXIsICdcXFxcJCYnKVxuXHQgIC5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcXFxcKCl8IGZvciAuKz8oPz1cXFxcXFxdKS9nLCAnJDEuKj8nKSArICckJ1xuXHQpO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzTmF0aXZlYCB3aXRob3V0IGJhZCBzaGltIGNoZWNrcy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUlzTmF0aXZlKHZhbHVlKSB7XG5cdCAgaWYgKCFpc09iamVjdCh2YWx1ZSkgfHwgaXNNYXNrZWQodmFsdWUpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciBwYXR0ZXJuID0gKGlzRnVuY3Rpb24odmFsdWUpIHx8IGlzSG9zdE9iamVjdCh2YWx1ZSkpID8gcmVJc05hdGl2ZSA6IHJlSXNIb3N0Q3Rvcjtcblx0ICByZXR1cm4gcGF0dGVybi50ZXN0KHRvU291cmNlKHZhbHVlKSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZUlzTmF0aXZlO1xuXG5cbi8qKiovIH0sXG4vKiAxMDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlTWF0Y2hlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTAzKSxcblx0ICAgIGJhc2VNYXRjaGVzUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNCksXG5cdCAgICBpZGVudGl0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUyKSxcblx0ICAgIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuXHQgICAgcHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Nyk7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXRlcmF0ZWVgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IFt2YWx1ZT1fLmlkZW50aXR5XSBUaGUgdmFsdWUgdG8gY29udmVydCB0byBhbiBpdGVyYXRlZS5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBpdGVyYXRlZS5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VJdGVyYXRlZSh2YWx1ZSkge1xuXHQgIC8vIERvbid0IHN0b3JlIHRoZSBgdHlwZW9mYCByZXN1bHQgaW4gYSB2YXJpYWJsZSB0byBhdm9pZCBhIEpJVCBidWcgaW4gU2FmYXJpIDkuXG5cdCAgLy8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNTYwMzQgZm9yIG1vcmUgZGV0YWlscy5cblx0ICBpZiAodHlwZW9mIHZhbHVlID09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdCAgaWYgKHZhbHVlID09IG51bGwpIHtcblx0ICAgIHJldHVybiBpZGVudGl0eTtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jykge1xuXHQgICAgcmV0dXJuIGlzQXJyYXkodmFsdWUpXG5cdCAgICAgID8gYmFzZU1hdGNoZXNQcm9wZXJ0eSh2YWx1ZVswXSwgdmFsdWVbMV0pXG5cdCAgICAgIDogYmFzZU1hdGNoZXModmFsdWUpO1xuXHQgIH1cblx0ICByZXR1cm4gcHJvcGVydHkodmFsdWUpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VJdGVyYXRlZTtcblxuXG4vKioqLyB9LFxuLyogMTAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG5cdHZhciBuYXRpdmVLZXlzID0gT2JqZWN0LmtleXM7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ua2V5c2Agd2hpY2ggZG9lc24ndCBza2lwIHRoZSBjb25zdHJ1Y3RvclxuXHQgKiBwcm9wZXJ0eSBvZiBwcm90b3R5cGVzIG9yIHRyZWF0IHNwYXJzZSBhcnJheXMgYXMgZGVuc2UuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VLZXlzKG9iamVjdCkge1xuXHQgIHJldHVybiBuYXRpdmVLZXlzKE9iamVjdChvYmplY3QpKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlS2V5cztcblxuXG4vKioqLyB9LFxuLyogMTAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZUlzTWF0Y2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk5KSxcblx0ICAgIGdldE1hdGNoRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEzKSxcblx0ICAgIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWF0Y2hlc2Agd2hpY2ggZG9lc24ndCBjbG9uZSBgc291cmNlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IG9mIHByb3BlcnR5IHZhbHVlcyB0byBtYXRjaC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgc3BlYyBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VNYXRjaGVzKHNvdXJjZSkge1xuXHQgIHZhciBtYXRjaERhdGEgPSBnZXRNYXRjaERhdGEoc291cmNlKTtcblx0ICBpZiAobWF0Y2hEYXRhLmxlbmd0aCA9PSAxICYmIG1hdGNoRGF0YVswXVsyXSkge1xuXHQgICAgcmV0dXJuIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlKG1hdGNoRGF0YVswXVswXSwgbWF0Y2hEYXRhWzBdWzFdKTtcblx0ICB9XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuXHQgICAgcmV0dXJuIG9iamVjdCA9PT0gc291cmNlIHx8IGJhc2VJc01hdGNoKG9iamVjdCwgc291cmNlLCBtYXRjaERhdGEpO1xuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZU1hdGNoZXM7XG5cblxuLyoqKi8gfSxcbi8qIDEwNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VJc0VxdWFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyksXG5cdCAgICBnZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MCksXG5cdCAgICBoYXNJbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTUxKSxcblx0ICAgIGlzS2V5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMiksXG5cdCAgICBpc1N0cmljdENvbXBhcmFibGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKSxcblx0ICAgIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCksXG5cdCAgICB0b0tleSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0LyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG5cdHZhciBVTk9SREVSRURfQ09NUEFSRV9GTEFHID0gMSxcblx0ICAgIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tYXRjaGVzUHJvcGVydHlgIHdoaWNoIGRvZXNuJ3QgY2xvbmUgYHNyY1ZhbHVlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHBhcmFtIHsqfSBzcmNWYWx1ZSBUaGUgdmFsdWUgdG8gbWF0Y2guXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHNwZWMgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlTWF0Y2hlc1Byb3BlcnR5KHBhdGgsIHNyY1ZhbHVlKSB7XG5cdCAgaWYgKGlzS2V5KHBhdGgpICYmIGlzU3RyaWN0Q29tcGFyYWJsZShzcmNWYWx1ZSkpIHtcblx0ICAgIHJldHVybiBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZSh0b0tleShwYXRoKSwgc3JjVmFsdWUpO1xuXHQgIH1cblx0ICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG5cdCAgICB2YXIgb2JqVmFsdWUgPSBnZXQob2JqZWN0LCBwYXRoKTtcblx0ICAgIHJldHVybiAob2JqVmFsdWUgPT09IHVuZGVmaW5lZCAmJiBvYmpWYWx1ZSA9PT0gc3JjVmFsdWUpXG5cdCAgICAgID8gaGFzSW4ob2JqZWN0LCBwYXRoKVxuXHQgICAgICA6IGJhc2VJc0VxdWFsKHNyY1ZhbHVlLCBvYmpWYWx1ZSwgdW5kZWZpbmVkLCBVTk9SREVSRURfQ09NUEFSRV9GTEFHIHwgUEFSVElBTF9DT01QQVJFX0ZMQUcpO1xuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZU1hdGNoZXNQcm9wZXJ0eTtcblxuXG4vKioqLyB9LFxuLyogMTA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZUdldCA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0LyoqXG5cdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZVByb3BlcnR5YCB3aGljaCBzdXBwb3J0cyBkZWVwIHBhdGhzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhY2Nlc3NvciBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VQcm9wZXJ0eURlZXAocGF0aCkge1xuXHQgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcblx0ICAgIHJldHVybiBiYXNlR2V0KG9iamVjdCwgcGF0aCk7XG5cdCAgfTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlUHJvcGVydHlEZWVwO1xuXG5cbi8qKiovIH0sXG4vKiAxMDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50aW1lc2Agd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzXG5cdCAqIG9yIG1heCBhcnJheSBsZW5ndGggY2hlY2tzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRvIGludm9rZSBgaXRlcmF0ZWVgLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHJlc3VsdHMuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlVGltZXMobiwgaXRlcmF0ZWUpIHtcblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgcmVzdWx0ID0gQXJyYXkobik7XG5cdFxuXHQgIHdoaWxlICgrK2luZGV4IDwgbikge1xuXHQgICAgcmVzdWx0W2luZGV4XSA9IGl0ZXJhdGVlKGluZGV4KTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlVGltZXM7XG5cblxuLyoqKi8gfSxcbi8qIDEwNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIFN5bWJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpLFxuXHQgICAgaXNTeW1ib2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdC8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xuXHR2YXIgSU5GSU5JVFkgPSAxIC8gMDtcblx0XG5cdC8qKiBVc2VkIHRvIGNvbnZlcnQgc3ltYm9scyB0byBwcmltaXRpdmVzIGFuZCBzdHJpbmdzLiAqL1xuXHR2YXIgc3ltYm9sUHJvdG8gPSBTeW1ib2wgPyBTeW1ib2wucHJvdG90eXBlIDogdW5kZWZpbmVkLFxuXHQgICAgc3ltYm9sVG9TdHJpbmcgPSBzeW1ib2xQcm90byA/IHN5bWJvbFByb3RvLnRvU3RyaW5nIDogdW5kZWZpbmVkO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRvU3RyaW5nYCB3aGljaCBkb2Vzbid0IGNvbnZlcnQgbnVsbGlzaFxuXHQgKiB2YWx1ZXMgdG8gZW1wdHkgc3RyaW5ncy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cblx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG5cdCAgLy8gRXhpdCBlYXJseSBmb3Igc3RyaW5ncyB0byBhdm9pZCBhIHBlcmZvcm1hbmNlIGhpdCBpbiBzb21lIGVudmlyb25tZW50cy5cblx0ICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfVxuXHQgIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiBzeW1ib2xUb1N0cmluZyA/IHN5bWJvbFRvU3RyaW5nLmNhbGwodmFsdWUpIDogJyc7XG5cdCAgfVxuXHQgIHZhciByZXN1bHQgPSAodmFsdWUgKyAnJyk7XG5cdCAgcmV0dXJuIChyZXN1bHQgPT0gJzAnICYmICgxIC8gdmFsdWUpID09IC1JTkZJTklUWSkgPyAnLTAnIDogcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VUb1N0cmluZztcblxuXG4vKioqLyB9LFxuLyogMTA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBnbG9iYWwgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge251bGx8T2JqZWN0fSBSZXR1cm5zIGB2YWx1ZWAgaWYgaXQncyBhIGdsb2JhbCBvYmplY3QsIGVsc2UgYG51bGxgLlxuXHQgKi9cblx0ZnVuY3Rpb24gY2hlY2tHbG9iYWwodmFsdWUpIHtcblx0ICByZXR1cm4gKHZhbHVlICYmIHZhbHVlLk9iamVjdCA9PT0gT2JqZWN0KSA/IHZhbHVlIDogbnVsbDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBjaGVja0dsb2JhbDtcblxuXG4vKioqLyB9LFxuLyogMTA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgcm9vdCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3Qgb3ZlcnJlYWNoaW5nIGNvcmUtanMgc2hpbXMuICovXG5cdHZhciBjb3JlSnNEYXRhID0gcm9vdFsnX19jb3JlLWpzX3NoYXJlZF9fJ107XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGNvcmVKc0RhdGE7XG5cblxuLyoqKi8gfSxcbi8qIDExMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIFN5bWJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpLFxuXHQgICAgVWludDhBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oOTEpLFxuXHQgICAgZXF1YWxBcnJheXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKSxcblx0ICAgIG1hcFRvQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNyksXG5cdCAgICBzZXRUb0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDApO1xuXHRcblx0LyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG5cdHZhciBVTk9SREVSRURfQ09NUEFSRV9GTEFHID0gMSxcblx0ICAgIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsXG5cdCAgICBkYXRlVGFnID0gJ1tvYmplY3QgRGF0ZV0nLFxuXHQgICAgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nLFxuXHQgICAgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG5cdCAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcblx0ICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuXHQgICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG5cdCAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcblx0ICAgIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXHRcblx0dmFyIGFycmF5QnVmZmVyVGFnID0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJyxcblx0ICAgIGRhdGFWaWV3VGFnID0gJ1tvYmplY3QgRGF0YVZpZXddJztcblx0XG5cdC8qKiBVc2VkIHRvIGNvbnZlcnQgc3ltYm9scyB0byBwcmltaXRpdmVzIGFuZCBzdHJpbmdzLiAqL1xuXHR2YXIgc3ltYm9sUHJvdG8gPSBTeW1ib2wgPyBTeW1ib2wucHJvdG90eXBlIDogdW5kZWZpbmVkLFxuXHQgICAgc3ltYm9sVmFsdWVPZiA9IHN5bWJvbFByb3RvID8gc3ltYm9sUHJvdG8udmFsdWVPZiA6IHVuZGVmaW5lZDtcblx0XG5cdC8qKlxuXHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGNvbXBhcmluZyBvYmplY3RzIG9mXG5cdCAqIHRoZSBzYW1lIGB0b1N0cmluZ1RhZ2AuXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIG9ubHkgc3VwcG9ydHMgY29tcGFyaW5nIHZhbHVlcyB3aXRoIHRhZ3Mgb2Zcblx0ICogYEJvb2xlYW5gLCBgRGF0ZWAsIGBFcnJvcmAsIGBOdW1iZXJgLCBgUmVnRXhwYCwgb3IgYFN0cmluZ2AuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdGFnIFRoZSBgdG9TdHJpbmdUYWdgIG9mIHRoZSBvYmplY3RzIHRvIGNvbXBhcmUuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYFxuXHQgKiAgZm9yIG1vcmUgZGV0YWlscy5cblx0ICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIHRhZywgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuXHQgIHN3aXRjaCAodGFnKSB7XG5cdCAgICBjYXNlIGRhdGFWaWV3VGFnOlxuXHQgICAgICBpZiAoKG9iamVjdC5ieXRlTGVuZ3RoICE9IG90aGVyLmJ5dGVMZW5ndGgpIHx8XG5cdCAgICAgICAgICAob2JqZWN0LmJ5dGVPZmZzZXQgIT0gb3RoZXIuYnl0ZU9mZnNldCkpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAgb2JqZWN0ID0gb2JqZWN0LmJ1ZmZlcjtcblx0ICAgICAgb3RoZXIgPSBvdGhlci5idWZmZXI7XG5cdFxuXHQgICAgY2FzZSBhcnJheUJ1ZmZlclRhZzpcblx0ICAgICAgaWYgKChvYmplY3QuYnl0ZUxlbmd0aCAhPSBvdGhlci5ieXRlTGVuZ3RoKSB8fFxuXHQgICAgICAgICAgIWVxdWFsRnVuYyhuZXcgVWludDhBcnJheShvYmplY3QpLCBuZXcgVWludDhBcnJheShvdGhlcikpKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHRcblx0ICAgIGNhc2UgYm9vbFRhZzpcblx0ICAgIGNhc2UgZGF0ZVRhZzpcblx0ICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1iZXJzLCBkYXRlcyB0byBtaWxsaXNlY29uZHMgYW5kXG5cdCAgICAgIC8vIGJvb2xlYW5zIHRvIGAxYCBvciBgMGAgdHJlYXRpbmcgaW52YWxpZCBkYXRlcyBjb2VyY2VkIHRvIGBOYU5gIGFzXG5cdCAgICAgIC8vIG5vdCBlcXVhbC5cblx0ICAgICAgcmV0dXJuICtvYmplY3QgPT0gK290aGVyO1xuXHRcblx0ICAgIGNhc2UgZXJyb3JUYWc6XG5cdCAgICAgIHJldHVybiBvYmplY3QubmFtZSA9PSBvdGhlci5uYW1lICYmIG9iamVjdC5tZXNzYWdlID09IG90aGVyLm1lc3NhZ2U7XG5cdFxuXHQgICAgY2FzZSBudW1iZXJUYWc6XG5cdCAgICAgIC8vIFRyZWF0IGBOYU5gIHZzLiBgTmFOYCBhcyBlcXVhbC5cblx0ICAgICAgcmV0dXJuIChvYmplY3QgIT0gK29iamVjdCkgPyBvdGhlciAhPSArb3RoZXIgOiBvYmplY3QgPT0gK290aGVyO1xuXHRcblx0ICAgIGNhc2UgcmVnZXhwVGFnOlxuXHQgICAgY2FzZSBzdHJpbmdUYWc6XG5cdCAgICAgIC8vIENvZXJjZSByZWdleGVzIHRvIHN0cmluZ3MgYW5kIHRyZWF0IHN0cmluZ3MsIHByaW1pdGl2ZXMgYW5kIG9iamVjdHMsXG5cdCAgICAgIC8vIGFzIGVxdWFsLiBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXJlZ2V4cC5wcm90b3R5cGUudG9zdHJpbmdcblx0ICAgICAgLy8gZm9yIG1vcmUgZGV0YWlscy5cblx0ICAgICAgcmV0dXJuIG9iamVjdCA9PSAob3RoZXIgKyAnJyk7XG5cdFxuXHQgICAgY2FzZSBtYXBUYWc6XG5cdCAgICAgIHZhciBjb252ZXJ0ID0gbWFwVG9BcnJheTtcblx0XG5cdCAgICBjYXNlIHNldFRhZzpcblx0ICAgICAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRztcblx0ICAgICAgY29udmVydCB8fCAoY29udmVydCA9IHNldFRvQXJyYXkpO1xuXHRcblx0ICAgICAgaWYgKG9iamVjdC5zaXplICE9IG90aGVyLnNpemUgJiYgIWlzUGFydGlhbCkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG5cdCAgICAgIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KG9iamVjdCk7XG5cdCAgICAgIGlmIChzdGFja2VkKSB7XG5cdCAgICAgICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG5cdCAgICAgIH1cblx0ICAgICAgYml0bWFzayB8PSBVTk9SREVSRURfQ09NUEFSRV9GTEFHO1xuXHQgICAgICBzdGFjay5zZXQob2JqZWN0LCBvdGhlcik7XG5cdFxuXHQgICAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cblx0ICAgICAgcmV0dXJuIGVxdWFsQXJyYXlzKGNvbnZlcnQob2JqZWN0KSwgY29udmVydChvdGhlciksIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xuXHRcblx0ICAgIGNhc2Ugc3ltYm9sVGFnOlxuXHQgICAgICBpZiAoc3ltYm9sVmFsdWVPZikge1xuXHQgICAgICAgIHJldHVybiBzeW1ib2xWYWx1ZU9mLmNhbGwob2JqZWN0KSA9PSBzeW1ib2xWYWx1ZU9mLmNhbGwob3RoZXIpO1xuXHQgICAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBlcXVhbEJ5VGFnO1xuXG5cbi8qKiovIH0sXG4vKiAxMTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlSGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNiksXG5cdCAgICBrZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdFxuXHQvKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cblx0dmFyIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblx0XG5cdC8qKlxuXHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIG9iamVjdHMgd2l0aCBzdXBwb3J0IGZvclxuXHQgKiBwYXJ0aWFsIGRlZXAgY29tcGFyaXNvbnMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cblx0ICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgb2YgY29tcGFyaXNvbiBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGBcblx0ICogIGZvciBtb3JlIGRldGFpbHMuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzdGFjayBUcmFja3MgdHJhdmVyc2VkIGBvYmplY3RgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZXF1YWxPYmplY3RzKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcblx0ICB2YXIgaXNQYXJ0aWFsID0gYml0bWFzayAmIFBBUlRJQUxfQ09NUEFSRV9GTEFHLFxuXHQgICAgICBvYmpQcm9wcyA9IGtleXMob2JqZWN0KSxcblx0ICAgICAgb2JqTGVuZ3RoID0gb2JqUHJvcHMubGVuZ3RoLFxuXHQgICAgICBvdGhQcm9wcyA9IGtleXMob3RoZXIpLFxuXHQgICAgICBvdGhMZW5ndGggPSBvdGhQcm9wcy5sZW5ndGg7XG5cdFxuXHQgIGlmIChvYmpMZW5ndGggIT0gb3RoTGVuZ3RoICYmICFpc1BhcnRpYWwpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgdmFyIGluZGV4ID0gb2JqTGVuZ3RoO1xuXHQgIHdoaWxlIChpbmRleC0tKSB7XG5cdCAgICB2YXIga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuXHQgICAgaWYgKCEoaXNQYXJ0aWFsID8ga2V5IGluIG90aGVyIDogYmFzZUhhcyhvdGhlciwga2V5KSkpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG5cdCAgdmFyIHN0YWNrZWQgPSBzdGFjay5nZXQob2JqZWN0KTtcblx0ICBpZiAoc3RhY2tlZCkge1xuXHQgICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG5cdCAgfVxuXHQgIHZhciByZXN1bHQgPSB0cnVlO1xuXHQgIHN0YWNrLnNldChvYmplY3QsIG90aGVyKTtcblx0XG5cdCAgdmFyIHNraXBDdG9yID0gaXNQYXJ0aWFsO1xuXHQgIHdoaWxlICgrK2luZGV4IDwgb2JqTGVuZ3RoKSB7XG5cdCAgICBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG5cdCAgICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcblx0ICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2tleV07XG5cdFxuXHQgICAgaWYgKGN1c3RvbWl6ZXIpIHtcblx0ICAgICAgdmFyIGNvbXBhcmVkID0gaXNQYXJ0aWFsXG5cdCAgICAgICAgPyBjdXN0b21pemVyKG90aFZhbHVlLCBvYmpWYWx1ZSwga2V5LCBvdGhlciwgb2JqZWN0LCBzdGFjaylcblx0ICAgICAgICA6IGN1c3RvbWl6ZXIob2JqVmFsdWUsIG90aFZhbHVlLCBrZXksIG9iamVjdCwgb3RoZXIsIHN0YWNrKTtcblx0ICAgIH1cblx0ICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuXHQgICAgaWYgKCEoY29tcGFyZWQgPT09IHVuZGVmaW5lZFxuXHQgICAgICAgICAgPyAob2JqVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhvYmpWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSlcblx0ICAgICAgICAgIDogY29tcGFyZWRcblx0ICAgICAgICApKSB7XG5cdCAgICAgIHJlc3VsdCA9IGZhbHNlO1xuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICAgIHNraXBDdG9yIHx8IChza2lwQ3RvciA9IGtleSA9PSAnY29uc3RydWN0b3InKTtcblx0ICB9XG5cdCAgaWYgKHJlc3VsdCAmJiAhc2tpcEN0b3IpIHtcblx0ICAgIHZhciBvYmpDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yLFxuXHQgICAgICAgIG90aEN0b3IgPSBvdGhlci5jb25zdHJ1Y3Rvcjtcblx0XG5cdCAgICAvLyBOb24gYE9iamVjdGAgb2JqZWN0IGluc3RhbmNlcyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVhbC5cblx0ICAgIGlmIChvYmpDdG9yICE9IG90aEN0b3IgJiZcblx0ICAgICAgICAoJ2NvbnN0cnVjdG9yJyBpbiBvYmplY3QgJiYgJ2NvbnN0cnVjdG9yJyBpbiBvdGhlcikgJiZcblx0ICAgICAgICAhKHR5cGVvZiBvYmpDdG9yID09ICdmdW5jdGlvbicgJiYgb2JqQ3RvciBpbnN0YW5jZW9mIG9iakN0b3IgJiZcblx0ICAgICAgICAgIHR5cGVvZiBvdGhDdG9yID09ICdmdW5jdGlvbicgJiYgb3RoQ3RvciBpbnN0YW5jZW9mIG90aEN0b3IpKSB7XG5cdCAgICAgIHJlc3VsdCA9IGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICBzdGFja1snZGVsZXRlJ10ob2JqZWN0KTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGVxdWFsT2JqZWN0cztcblxuXG4vKioqLyB9LFxuLyogMTEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSB2YWx1ZSBvZiBgb2JqZWN0YC5cblx0ICpcblx0ICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBhdm9pZCBhXG5cdCAqIFtKSVQgYnVnXShodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTQyNzkyKSB0aGF0IGFmZmVjdHNcblx0ICogU2FmYXJpIG9uIGF0IGxlYXN0IGlPUyA4LjEtOC4zIEFSTTY0LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBcImxlbmd0aFwiIHZhbHVlLlxuXHQgKi9cblx0dmFyIGdldExlbmd0aCA9IGJhc2VQcm9wZXJ0eSgnbGVuZ3RoJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGdldExlbmd0aDtcblxuXG4vKioqLyB9LFxuLyogMTEzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNTdHJpY3RDb21wYXJhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyksXG5cdCAgICBrZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgcHJvcGVydHkgbmFtZXMsIHZhbHVlcywgYW5kIGNvbXBhcmUgZmxhZ3Mgb2YgYG9iamVjdGAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBtYXRjaCBkYXRhIG9mIGBvYmplY3RgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TWF0Y2hEYXRhKG9iamVjdCkge1xuXHQgIHZhciByZXN1bHQgPSBrZXlzKG9iamVjdCksXG5cdCAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG5cdFxuXHQgIHdoaWxlIChsZW5ndGgtLSkge1xuXHQgICAgdmFyIGtleSA9IHJlc3VsdFtsZW5ndGhdLFxuXHQgICAgICAgIHZhbHVlID0gb2JqZWN0W2tleV07XG5cdFxuXHQgICAgcmVzdWx0W2xlbmd0aF0gPSBba2V5LCB2YWx1ZSwgaXNTdHJpY3RDb21wYXJhYmxlKHZhbHVlKV07XG5cdCAgfVxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZ2V0TWF0Y2hEYXRhO1xuXG5cbi8qKiovIH0sXG4vKiAxMTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cblx0dmFyIG5hdGl2ZUdldFByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBgW1tQcm90b3R5cGVdXWAgb2YgYHZhbHVlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHtudWxsfE9iamVjdH0gUmV0dXJucyB0aGUgYFtbUHJvdG90eXBlXV1gLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0UHJvdG90eXBlKHZhbHVlKSB7XG5cdCAgcmV0dXJuIG5hdGl2ZUdldFByb3RvdHlwZShPYmplY3QodmFsdWUpKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXRQcm90b3R5cGU7XG5cblxuLyoqKi8gfSxcbi8qIDExNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIERhdGFWaWV3ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NiksXG5cdCAgICBNYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKSxcblx0ICAgIFByb21pc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg4KSxcblx0ICAgIFNldCA9IF9fd2VicGFja19yZXF1aXJlX18oODkpLFxuXHQgICAgV2Vha01hcCA9IF9fd2VicGFja19yZXF1aXJlX18oOTIpLFxuXHQgICAgdG9Tb3VyY2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuXHQgICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XScsXG5cdCAgICBwcm9taXNlVGFnID0gJ1tvYmplY3QgUHJvbWlzZV0nLFxuXHQgICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG5cdCAgICB3ZWFrTWFwVGFnID0gJ1tvYmplY3QgV2Vha01hcF0nO1xuXHRcblx0dmFyIGRhdGFWaWV3VGFnID0gJ1tvYmplY3QgRGF0YVZpZXddJztcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlXG5cdCAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBtYXBzLCBzZXRzLCBhbmQgd2Vha21hcHMuICovXG5cdHZhciBkYXRhVmlld0N0b3JTdHJpbmcgPSB0b1NvdXJjZShEYXRhVmlldyksXG5cdCAgICBtYXBDdG9yU3RyaW5nID0gdG9Tb3VyY2UoTWFwKSxcblx0ICAgIHByb21pc2VDdG9yU3RyaW5nID0gdG9Tb3VyY2UoUHJvbWlzZSksXG5cdCAgICBzZXRDdG9yU3RyaW5nID0gdG9Tb3VyY2UoU2V0KSxcblx0ICAgIHdlYWtNYXBDdG9yU3RyaW5nID0gdG9Tb3VyY2UoV2Vha01hcCk7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgYHRvU3RyaW5nVGFnYCBvZiBgdmFsdWVgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cblx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgYHRvU3RyaW5nVGFnYC5cblx0ICovXG5cdGZ1bmN0aW9uIGdldFRhZyh2YWx1ZSkge1xuXHQgIHJldHVybiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcblx0fVxuXHRcblx0Ly8gRmFsbGJhY2sgZm9yIGRhdGEgdmlld3MsIG1hcHMsIHNldHMsIGFuZCB3ZWFrIG1hcHMgaW4gSUUgMTEsXG5cdC8vIGZvciBkYXRhIHZpZXdzIGluIEVkZ2UsIGFuZCBwcm9taXNlcyBpbiBOb2RlLmpzLlxuXHRpZiAoKERhdGFWaWV3ICYmIGdldFRhZyhuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDEpKSkgIT0gZGF0YVZpZXdUYWcpIHx8XG5cdCAgICAoTWFwICYmIGdldFRhZyhuZXcgTWFwKSAhPSBtYXBUYWcpIHx8XG5cdCAgICAoUHJvbWlzZSAmJiBnZXRUYWcoUHJvbWlzZS5yZXNvbHZlKCkpICE9IHByb21pc2VUYWcpIHx8XG5cdCAgICAoU2V0ICYmIGdldFRhZyhuZXcgU2V0KSAhPSBzZXRUYWcpIHx8XG5cdCAgICAoV2Vha01hcCAmJiBnZXRUYWcobmV3IFdlYWtNYXApICE9IHdlYWtNYXBUYWcpKSB7XG5cdCAgZ2V0VGFnID0gZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgIHZhciByZXN1bHQgPSBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSxcblx0ICAgICAgICBDdG9yID0gcmVzdWx0ID09IG9iamVjdFRhZyA/IHZhbHVlLmNvbnN0cnVjdG9yIDogdW5kZWZpbmVkLFxuXHQgICAgICAgIGN0b3JTdHJpbmcgPSBDdG9yID8gdG9Tb3VyY2UoQ3RvcikgOiB1bmRlZmluZWQ7XG5cdFxuXHQgICAgaWYgKGN0b3JTdHJpbmcpIHtcblx0ICAgICAgc3dpdGNoIChjdG9yU3RyaW5nKSB7XG5cdCAgICAgICAgY2FzZSBkYXRhVmlld0N0b3JTdHJpbmc6IHJldHVybiBkYXRhVmlld1RhZztcblx0ICAgICAgICBjYXNlIG1hcEN0b3JTdHJpbmc6IHJldHVybiBtYXBUYWc7XG5cdCAgICAgICAgY2FzZSBwcm9taXNlQ3RvclN0cmluZzogcmV0dXJuIHByb21pc2VUYWc7XG5cdCAgICAgICAgY2FzZSBzZXRDdG9yU3RyaW5nOiByZXR1cm4gc2V0VGFnO1xuXHQgICAgICAgIGNhc2Ugd2Vha01hcEN0b3JTdHJpbmc6IHJldHVybiB3ZWFrTWFwVGFnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZ2V0VGFnO1xuXG5cbi8qKiovIH0sXG4vKiAxMTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBHZXRzIHRoZSB2YWx1ZSBhdCBga2V5YCBvZiBgb2JqZWN0YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRWYWx1ZShvYmplY3QsIGtleSkge1xuXHQgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGdldFZhbHVlO1xuXG5cbi8qKiovIH0sXG4vKiAxMTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBjYXN0UGF0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpLFxuXHQgICAgaXNBcmd1bWVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KSxcblx0ICAgIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuXHQgICAgaXNJbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpLFxuXHQgICAgaXNLZXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKSxcblx0ICAgIGlzTGVuZ3RoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSksXG5cdCAgICBpc1N0cmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpLFxuXHQgICAgdG9LZXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHBhdGhgIGV4aXN0cyBvbiBgb2JqZWN0YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCB0byBjaGVjay5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaGFzRnVuYyBUaGUgZnVuY3Rpb24gdG8gY2hlY2sgcHJvcGVydGllcy5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBwYXRoYCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGhhc1BhdGgob2JqZWN0LCBwYXRoLCBoYXNGdW5jKSB7XG5cdCAgcGF0aCA9IGlzS2V5KHBhdGgsIG9iamVjdCkgPyBbcGF0aF0gOiBjYXN0UGF0aChwYXRoKTtcblx0XG5cdCAgdmFyIHJlc3VsdCxcblx0ICAgICAgaW5kZXggPSAtMSxcblx0ICAgICAgbGVuZ3RoID0gcGF0aC5sZW5ndGg7XG5cdFxuXHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICB2YXIga2V5ID0gdG9LZXkocGF0aFtpbmRleF0pO1xuXHQgICAgaWYgKCEocmVzdWx0ID0gb2JqZWN0ICE9IG51bGwgJiYgaGFzRnVuYyhvYmplY3QsIGtleSkpKSB7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHQgICAgb2JqZWN0ID0gb2JqZWN0W2tleV07XG5cdCAgfVxuXHQgIGlmIChyZXN1bHQpIHtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHQgIHZhciBsZW5ndGggPSBvYmplY3QgPyBvYmplY3QubGVuZ3RoIDogMDtcblx0ICByZXR1cm4gISFsZW5ndGggJiYgaXNMZW5ndGgobGVuZ3RoKSAmJiBpc0luZGV4KGtleSwgbGVuZ3RoKSAmJlxuXHQgICAgKGlzQXJyYXkob2JqZWN0KSB8fCBpc1N0cmluZyhvYmplY3QpIHx8IGlzQXJndW1lbnRzKG9iamVjdCkpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGhhc1BhdGg7XG5cblxuLyoqKi8gfSxcbi8qIDExOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIG5hdGl2ZUNyZWF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0LyoqXG5cdCAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIGhhc2guXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGNsZWFyXG5cdCAqIEBtZW1iZXJPZiBIYXNoXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNoQ2xlYXIoKSB7XG5cdCAgdGhpcy5fX2RhdGFfXyA9IG5hdGl2ZUNyZWF0ZSA/IG5hdGl2ZUNyZWF0ZShudWxsKSA6IHt9O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGhhc2hDbGVhcjtcblxuXG4vKioqLyB9LFxuLyogMTE5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGhhc2guXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGRlbGV0ZVxuXHQgKiBAbWVtYmVyT2YgSGFzaFxuXHQgKiBAcGFyYW0ge09iamVjdH0gaGFzaCBUaGUgaGFzaCB0byBtb2RpZnkuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNoRGVsZXRlKGtleSkge1xuXHQgIHJldHVybiB0aGlzLmhhcyhrZXkpICYmIGRlbGV0ZSB0aGlzLl9fZGF0YV9fW2tleV07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaGFzaERlbGV0ZTtcblxuXG4vKioqLyB9LFxuLyogMTIwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgbmF0aXZlQ3JlYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHQvKiogVXNlZCB0byBzdGFuZC1pbiBmb3IgYHVuZGVmaW5lZGAgaGFzaCB2YWx1ZXMuICovXG5cdHZhciBIQVNIX1VOREVGSU5FRCA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJztcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBoYXNoIHZhbHVlIGZvciBga2V5YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgZ2V0XG5cdCAqIEBtZW1iZXJPZiBIYXNoXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNoR2V0KGtleSkge1xuXHQgIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcblx0ICBpZiAobmF0aXZlQ3JlYXRlKSB7XG5cdCAgICB2YXIgcmVzdWx0ID0gZGF0YVtrZXldO1xuXHQgICAgcmV0dXJuIHJlc3VsdCA9PT0gSEFTSF9VTkRFRklORUQgPyB1bmRlZmluZWQgOiByZXN1bHQ7XG5cdCAgfVxuXHQgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSkgPyBkYXRhW2tleV0gOiB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaGFzaEdldDtcblxuXG4vKioqLyB9LFxuLyogMTIxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgbmF0aXZlQ3JlYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cblx0dmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGEgaGFzaCB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBoYXNcblx0ICogQG1lbWJlck9mIEhhc2hcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGhhc2hIYXMoa2V5KSB7XG5cdCAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuXHQgIHJldHVybiBuYXRpdmVDcmVhdGUgPyBkYXRhW2tleV0gIT09IHVuZGVmaW5lZCA6IGhhc093blByb3BlcnR5LmNhbGwoZGF0YSwga2V5KTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBoYXNoSGFzO1xuXG5cbi8qKiovIH0sXG4vKiAxMjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBuYXRpdmVDcmVhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdC8qKiBVc2VkIHRvIHN0YW5kLWluIGZvciBgdW5kZWZpbmVkYCBoYXNoIHZhbHVlcy4gKi9cblx0dmFyIEhBU0hfVU5ERUZJTkVEID0gJ19fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18nO1xuXHRcblx0LyoqXG5cdCAqIFNldHMgdGhlIGhhc2ggYGtleWAgdG8gYHZhbHVlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgc2V0XG5cdCAqIEBtZW1iZXJPZiBIYXNoXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGhhc2ggaW5zdGFuY2UuXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNoU2V0KGtleSwgdmFsdWUpIHtcblx0ICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG5cdCAgZGF0YVtrZXldID0gKG5hdGl2ZUNyZWF0ZSAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkKSA/IEhBU0hfVU5ERUZJTkVEIDogdmFsdWU7XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaGFzaFNldDtcblxuXG4vKioqLyB9LFxuLyogMTIzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZVRpbWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDYpLFxuXHQgICAgaXNBcmd1bWVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KSxcblx0ICAgIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuXHQgICAgaXNMZW5ndGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KSxcblx0ICAgIGlzU3RyaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBhcnJheSBvZiBpbmRleCBrZXlzIGZvciBgb2JqZWN0YCB2YWx1ZXMgb2YgYXJyYXlzLFxuXHQgKiBgYXJndW1lbnRzYCBvYmplY3RzLCBhbmQgc3RyaW5ncywgb3RoZXJ3aXNlIGBudWxsYCBpcyByZXR1cm5lZC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcmV0dXJucyB7QXJyYXl8bnVsbH0gUmV0dXJucyBpbmRleCBrZXlzLCBlbHNlIGBudWxsYC5cblx0ICovXG5cdGZ1bmN0aW9uIGluZGV4S2V5cyhvYmplY3QpIHtcblx0ICB2YXIgbGVuZ3RoID0gb2JqZWN0ID8gb2JqZWN0Lmxlbmd0aCA6IHVuZGVmaW5lZDtcblx0ICBpZiAoaXNMZW5ndGgobGVuZ3RoKSAmJlxuXHQgICAgICAoaXNBcnJheShvYmplY3QpIHx8IGlzU3RyaW5nKG9iamVjdCkgfHwgaXNBcmd1bWVudHMob2JqZWN0KSkpIHtcblx0ICAgIHJldHVybiBiYXNlVGltZXMobGVuZ3RoLCBTdHJpbmcpO1xuXHQgIH1cblx0ICByZXR1cm4gbnVsbDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpbmRleEtleXM7XG5cblxuLyoqKi8gfSxcbi8qIDEyNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciB1c2UgYXMgdW5pcXVlIG9iamVjdCBrZXkuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNLZXlhYmxlKHZhbHVlKSB7XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdCAgcmV0dXJuICh0eXBlID09ICdzdHJpbmcnIHx8IHR5cGUgPT0gJ251bWJlcicgfHwgdHlwZSA9PSAnc3ltYm9sJyB8fCB0eXBlID09ICdib29sZWFuJylcblx0ICAgID8gKHZhbHVlICE9PSAnX19wcm90b19fJylcblx0ICAgIDogKHZhbHVlID09PSBudWxsKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0tleWFibGU7XG5cblxuLyoqKi8gfSxcbi8qIDEyNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGNvcmVKc0RhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOSk7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgbWV0aG9kcyBtYXNxdWVyYWRpbmcgYXMgbmF0aXZlLiAqL1xuXHR2YXIgbWFza1NyY0tleSA9IChmdW5jdGlvbigpIHtcblx0ICB2YXIgdWlkID0gL1teLl0rJC8uZXhlYyhjb3JlSnNEYXRhICYmIGNvcmVKc0RhdGEua2V5cyAmJiBjb3JlSnNEYXRhLmtleXMuSUVfUFJPVE8gfHwgJycpO1xuXHQgIHJldHVybiB1aWQgPyAoJ1N5bWJvbChzcmMpXzEuJyArIHVpZCkgOiAnJztcblx0fSgpKTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYGZ1bmNgIGhhcyBpdHMgc291cmNlIG1hc2tlZC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgZnVuY2AgaXMgbWFza2VkLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc01hc2tlZChmdW5jKSB7XG5cdCAgcmV0dXJuICEhbWFza1NyY0tleSAmJiAobWFza1NyY0tleSBpbiBmdW5jKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc01hc2tlZDtcblxuXG4vKioqLyB9LFxuLyogMTI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGEgcHJvdG90eXBlIG9iamVjdC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvdG90eXBlLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1Byb3RvdHlwZSh2YWx1ZSkge1xuXHQgIHZhciBDdG9yID0gdmFsdWUgJiYgdmFsdWUuY29uc3RydWN0b3IsXG5cdCAgICAgIHByb3RvID0gKHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUpIHx8IG9iamVjdFByb3RvO1xuXHRcblx0ICByZXR1cm4gdmFsdWUgPT09IHByb3RvO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzUHJvdG90eXBlO1xuXG5cbi8qKiovIH0sXG4vKiAxMjcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBsaXN0IGNhY2hlLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBjbGVhclxuXHQgKiBAbWVtYmVyT2YgTGlzdENhY2hlXG5cdCAqL1xuXHRmdW5jdGlvbiBsaXN0Q2FjaGVDbGVhcigpIHtcblx0ICB0aGlzLl9fZGF0YV9fID0gW107XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbGlzdENhY2hlQ2xlYXI7XG5cblxuLyoqKi8gfSxcbi8qIDEyOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGFzc29jSW5kZXhPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTtcblx0XG5cdC8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xuXHR2YXIgc3BsaWNlID0gYXJyYXlQcm90by5zcGxpY2U7XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGxpc3QgY2FjaGUuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGRlbGV0ZVxuXHQgKiBAbWVtYmVyT2YgTGlzdENhY2hlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBsaXN0Q2FjaGVEZWxldGUoa2V5KSB7XG5cdCAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuXHQgICAgICBpbmRleCA9IGFzc29jSW5kZXhPZihkYXRhLCBrZXkpO1xuXHRcblx0ICBpZiAoaW5kZXggPCAwKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciBsYXN0SW5kZXggPSBkYXRhLmxlbmd0aCAtIDE7XG5cdCAgaWYgKGluZGV4ID09IGxhc3RJbmRleCkge1xuXHQgICAgZGF0YS5wb3AoKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgc3BsaWNlLmNhbGwoZGF0YSwgaW5kZXgsIDEpO1xuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBsaXN0Q2FjaGVEZWxldGU7XG5cblxuLyoqKi8gfSxcbi8qIDEyOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGFzc29jSW5kZXhPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIGxpc3QgY2FjaGUgdmFsdWUgZm9yIGBrZXlgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBnZXRcblx0ICogQG1lbWJlck9mIExpc3RDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gbGlzdENhY2hlR2V0KGtleSkge1xuXHQgIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcblx0ICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblx0XG5cdCAgcmV0dXJuIGluZGV4IDwgMCA/IHVuZGVmaW5lZCA6IGRhdGFbaW5kZXhdWzFdO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGxpc3RDYWNoZUdldDtcblxuXG4vKioqLyB9LFxuLyogMTMwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYXNzb2NJbmRleE9mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGEgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBoYXNcblx0ICogQG1lbWJlck9mIExpc3RDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gbGlzdENhY2hlSGFzKGtleSkge1xuXHQgIHJldHVybiBhc3NvY0luZGV4T2YodGhpcy5fX2RhdGFfXywga2V5KSA+IC0xO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGxpc3RDYWNoZUhhcztcblxuXG4vKioqLyB9LFxuLyogMTMxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYXNzb2NJbmRleE9mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHQvKipcblx0ICogU2V0cyB0aGUgbGlzdCBjYWNoZSBga2V5YCB0byBgdmFsdWVgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBzZXRcblx0ICogQG1lbWJlck9mIExpc3RDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBsaXN0IGNhY2hlIGluc3RhbmNlLlxuXHQgKi9cblx0ZnVuY3Rpb24gbGlzdENhY2hlU2V0KGtleSwgdmFsdWUpIHtcblx0ICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG5cdCAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cdFxuXHQgIGlmIChpbmRleCA8IDApIHtcblx0ICAgIGRhdGEucHVzaChba2V5LCB2YWx1ZV0pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBkYXRhW2luZGV4XVsxXSA9IHZhbHVlO1xuXHQgIH1cblx0ICByZXR1cm4gdGhpcztcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBsaXN0Q2FjaGVTZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDEzMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIEhhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg3KSxcblx0ICAgIExpc3RDYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oOSksXG5cdCAgICBNYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBtYXAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGNsZWFyXG5cdCAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwQ2FjaGVDbGVhcigpIHtcblx0ICB0aGlzLl9fZGF0YV9fID0ge1xuXHQgICAgJ2hhc2gnOiBuZXcgSGFzaCxcblx0ICAgICdtYXAnOiBuZXcgKE1hcCB8fCBMaXN0Q2FjaGUpLFxuXHQgICAgJ3N0cmluZyc6IG5ldyBIYXNoXG5cdCAgfTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZUNsZWFyO1xuXG5cbi8qKiovIH0sXG4vKiAxMzMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXRNYXBEYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIG1hcC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgZGVsZXRlXG5cdCAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwQ2FjaGVEZWxldGUoa2V5KSB7XG5cdCAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KVsnZGVsZXRlJ10oa2V5KTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZURlbGV0ZTtcblxuXG4vKioqLyB9LFxuLyogMTM0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2V0TWFwRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIG1hcCB2YWx1ZSBmb3IgYGtleWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGdldFxuXHQgKiBAbWVtYmVyT2YgTWFwQ2FjaGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcENhY2hlR2V0KGtleSkge1xuXHQgIHJldHVybiBnZXRNYXBEYXRhKHRoaXMsIGtleSkuZ2V0KGtleSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbWFwQ2FjaGVHZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDEzNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldE1hcERhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYSBtYXAgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgaGFzXG5cdCAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwQ2FjaGVIYXMoa2V5KSB7XG5cdCAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KS5oYXMoa2V5KTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZUhhcztcblxuXG4vKioqLyB9LFxuLyogMTM2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2V0TWFwRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0LyoqXG5cdCAqIFNldHMgdGhlIG1hcCBga2V5YCB0byBgdmFsdWVgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBzZXRcblx0ICogQG1lbWJlck9mIE1hcENhY2hlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG1hcCBjYWNoZSBpbnN0YW5jZS5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcENhY2hlU2V0KGtleSwgdmFsdWUpIHtcblx0ICBnZXRNYXBEYXRhKHRoaXMsIGtleSkuc2V0KGtleSwgdmFsdWUpO1xuXHQgIHJldHVybiB0aGlzO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG1hcENhY2hlU2V0O1xuXG5cbi8qKiovIH0sXG4vKiAxMzcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgbWFwYCB0byBpdHMga2V5LXZhbHVlIHBhaXJzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gY29udmVydC5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBrZXktdmFsdWUgcGFpcnMuXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXBUb0FycmF5KG1hcCkge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICByZXN1bHQgPSBBcnJheShtYXAuc2l6ZSk7XG5cdFxuXHQgIG1hcC5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcblx0ICAgIHJlc3VsdFsrK2luZGV4XSA9IFtrZXksIHZhbHVlXTtcblx0ICB9KTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG1hcFRvQXJyYXk7XG5cblxuLyoqKi8gfSxcbi8qIDEzOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqIFVzZWQgdG8gc3RhbmQtaW4gZm9yIGB1bmRlZmluZWRgIGhhc2ggdmFsdWVzLiAqL1xuXHR2YXIgSEFTSF9VTkRFRklORUQgPSAnX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyc7XG5cdFxuXHQvKipcblx0ICogQWRkcyBgdmFsdWVgIHRvIHRoZSBhcnJheSBjYWNoZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgYWRkXG5cdCAqIEBtZW1iZXJPZiBTZXRDYWNoZVxuXHQgKiBAYWxpYXMgcHVzaFxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjYWNoZS5cblx0ICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY2FjaGUgaW5zdGFuY2UuXG5cdCAqL1xuXHRmdW5jdGlvbiBzZXRDYWNoZUFkZCh2YWx1ZSkge1xuXHQgIHRoaXMuX19kYXRhX18uc2V0KHZhbHVlLCBIQVNIX1VOREVGSU5FRCk7XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc2V0Q2FjaGVBZGQ7XG5cblxuLyoqKi8gfSxcbi8qIDEzOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGluIHRoZSBhcnJheSBjYWNoZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgaGFzXG5cdCAqIEBtZW1iZXJPZiBTZXRDYWNoZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGZvdW5kLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBzZXRDYWNoZUhhcyh2YWx1ZSkge1xuXHQgIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyh2YWx1ZSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc2V0Q2FjaGVIYXM7XG5cblxuLyoqKi8gfSxcbi8qIDE0MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGBzZXRgIHRvIGFuIGFycmF5IG9mIGl0cyB2YWx1ZXMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzZXQgVGhlIHNldCB0byBjb252ZXJ0LlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHZhbHVlcy5cblx0ICovXG5cdGZ1bmN0aW9uIHNldFRvQXJyYXkoc2V0KSB7XG5cdCAgdmFyIGluZGV4ID0gLTEsXG5cdCAgICAgIHJlc3VsdCA9IEFycmF5KHNldC5zaXplKTtcblx0XG5cdCAgc2V0LmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgIHJlc3VsdFsrK2luZGV4XSA9IHZhbHVlO1xuXHQgIH0pO1xuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc2V0VG9BcnJheTtcblxuXG4vKioqLyB9LFxuLyogMTQxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgTGlzdENhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBzdGFjay5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgY2xlYXJcblx0ICogQG1lbWJlck9mIFN0YWNrXG5cdCAqL1xuXHRmdW5jdGlvbiBzdGFja0NsZWFyKCkge1xuXHQgIHRoaXMuX19kYXRhX18gPSBuZXcgTGlzdENhY2hlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHN0YWNrQ2xlYXI7XG5cblxuLyoqKi8gfSxcbi8qIDE0MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBzdGFjay5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgZGVsZXRlXG5cdCAqIEBtZW1iZXJPZiBTdGFja1xuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gc3RhY2tEZWxldGUoa2V5KSB7XG5cdCAgcmV0dXJuIHRoaXMuX19kYXRhX19bJ2RlbGV0ZSddKGtleSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc3RhY2tEZWxldGU7XG5cblxuLyoqKi8gfSxcbi8qIDE0MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIEdldHMgdGhlIHN0YWNrIHZhbHVlIGZvciBga2V5YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgZ2V0XG5cdCAqIEBtZW1iZXJPZiBTdGFja1xuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gc3RhY2tHZXQoa2V5KSB7XG5cdCAgcmV0dXJuIHRoaXMuX19kYXRhX18uZ2V0KGtleSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc3RhY2tHZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDE0NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBhIHN0YWNrIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGhhc1xuXHQgKiBAbWVtYmVyT2YgU3RhY2tcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIHN0YWNrSGFzKGtleSkge1xuXHQgIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyhrZXkpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHN0YWNrSGFzO1xuXG5cbi8qKiovIH0sXG4vKiAxNDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBMaXN0Q2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpLFxuXHQgICAgTWFwQ2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0XG5cdC8qKiBVc2VkIGFzIHRoZSBzaXplIHRvIGVuYWJsZSBsYXJnZSBhcnJheSBvcHRpbWl6YXRpb25zLiAqL1xuXHR2YXIgTEFSR0VfQVJSQVlfU0laRSA9IDIwMDtcblx0XG5cdC8qKlxuXHQgKiBTZXRzIHRoZSBzdGFjayBga2V5YCB0byBgdmFsdWVgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBzZXRcblx0ICogQG1lbWJlck9mIFN0YWNrXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIHN0YWNrIGNhY2hlIGluc3RhbmNlLlxuXHQgKi9cblx0ZnVuY3Rpb24gc3RhY2tTZXQoa2V5LCB2YWx1ZSkge1xuXHQgIHZhciBjYWNoZSA9IHRoaXMuX19kYXRhX187XG5cdCAgaWYgKGNhY2hlIGluc3RhbmNlb2YgTGlzdENhY2hlICYmIGNhY2hlLl9fZGF0YV9fLmxlbmd0aCA9PSBMQVJHRV9BUlJBWV9TSVpFKSB7XG5cdCAgICBjYWNoZSA9IHRoaXMuX19kYXRhX18gPSBuZXcgTWFwQ2FjaGUoY2FjaGUuX19kYXRhX18pO1xuXHQgIH1cblx0ICBjYWNoZS5zZXQoa2V5LCB2YWx1ZSk7XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc3RhY2tTZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDE0NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIG1lbW9pemUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1NSksXG5cdCAgICB0b1N0cmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYwKTtcblx0XG5cdC8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cblx0dmFyIHJlUHJvcE5hbWUgPSAvW14uW1xcXV0rfFxcWyg/OigtP1xcZCsoPzpcXC5cXGQrKT8pfChbXCInXSkoKD86KD8hXFwyKVteXFxcXF18XFxcXC4pKj8pXFwyKVxcXXwoPz0oXFwufFxcW1xcXSkoPzpcXDR8JCkpL2c7XG5cdFxuXHQvKiogVXNlZCB0byBtYXRjaCBiYWNrc2xhc2hlcyBpbiBwcm9wZXJ0eSBwYXRocy4gKi9cblx0dmFyIHJlRXNjYXBlQ2hhciA9IC9cXFxcKFxcXFwpPy9nO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGBzdHJpbmdgIHRvIGEgcHJvcGVydHkgcGF0aCBhcnJheS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcHJvcGVydHkgcGF0aCBhcnJheS5cblx0ICovXG5cdHZhciBzdHJpbmdUb1BhdGggPSBtZW1vaXplKGZ1bmN0aW9uKHN0cmluZykge1xuXHQgIHZhciByZXN1bHQgPSBbXTtcblx0ICB0b1N0cmluZyhzdHJpbmcpLnJlcGxhY2UocmVQcm9wTmFtZSwgZnVuY3Rpb24obWF0Y2gsIG51bWJlciwgcXVvdGUsIHN0cmluZykge1xuXHQgICAgcmVzdWx0LnB1c2gocXVvdGUgPyBzdHJpbmcucmVwbGFjZShyZUVzY2FwZUNoYXIsICckMScpIDogKG51bWJlciB8fCBtYXRjaCkpO1xuXHQgIH0pO1xuXHQgIHJldHVybiByZXN1bHQ7XG5cdH0pO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBzdHJpbmdUb1BhdGg7XG5cblxuLyoqKi8gfSxcbi8qIDE0NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KSxcblx0ICAgIG5vdyA9IF9fd2VicGFja19yZXF1aXJlX18oMTU2KSxcblx0ICAgIHRvTnVtYmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdFxuXHQvKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xuXHR2YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXHRcblx0LyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xuXHR2YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG5cdCAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcblx0ICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG5cdCAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWxcblx0ICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uXG5cdCAqIFByb3ZpZGUgYW4gb3B0aW9ucyBvYmplY3QgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb25cblx0ICogdGhlIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcblx0ICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudCBjYWxsc1xuXHQgKiB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYCBpbnZvY2F0aW9uLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzIGludm9rZWRcblx0ICogb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIGlzXG5cdCAqIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cblx0ICpcblx0ICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG5cdCAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBGdW5jdGlvblxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cblx0ICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuXHQgKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cblx0ICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG5cdCAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG5cdCAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKSk7XG5cdCAqXG5cdCAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuXHQgKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG5cdCAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuXHQgKiAgICd0cmFpbGluZyc6IGZhbHNlXG5cdCAqIH0pKTtcblx0ICpcblx0ICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cblx0ICogdmFyIGRlYm91bmNlZCA9IF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwgeyAnbWF4V2FpdCc6IDEwMDAgfSk7XG5cdCAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcblx0ICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuXHQgKlxuXHQgKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuXHQgKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcblx0ICovXG5cdGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcblx0ICB2YXIgbGFzdEFyZ3MsXG5cdCAgICAgIGxhc3RUaGlzLFxuXHQgICAgICBtYXhXYWl0LFxuXHQgICAgICByZXN1bHQsXG5cdCAgICAgIHRpbWVySWQsXG5cdCAgICAgIGxhc3RDYWxsVGltZSxcblx0ICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuXHQgICAgICBsZWFkaW5nID0gZmFsc2UsXG5cdCAgICAgIG1heGluZyA9IGZhbHNlLFxuXHQgICAgICB0cmFpbGluZyA9IHRydWU7XG5cdFxuXHQgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG5cdCAgfVxuXHQgIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuXHQgIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuXHQgICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuXHQgICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG5cdCAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuXHQgICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGludm9rZUZ1bmModGltZSkge1xuXHQgICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcblx0ICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cdFxuXHQgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcblx0ICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcblx0ICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuXHQgICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cblx0ICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcblx0ICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG5cdCAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuXHQgICAgLy8gSW52b2tlIHRoZSBsZWFkaW5nIGVkZ2UuXG5cdCAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcblx0ICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG5cdCAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZSxcblx0ICAgICAgICByZXN1bHQgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cdFxuXHQgICAgcmV0dXJuIG1heGluZyA/IG5hdGl2ZU1pbihyZXN1bHQsIG1heFdhaXQgLSB0aW1lU2luY2VMYXN0SW52b2tlKSA6IHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHNob3VsZEludm9rZSh0aW1lKSB7XG5cdCAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuXHQgICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cdFxuXHQgICAgLy8gRWl0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIGFjdGl2aXR5IGhhcyBzdG9wcGVkIGFuZCB3ZSdyZSBhdCB0aGVcblx0ICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG5cdCAgICAvLyBpdCBhcyB0aGUgdHJhaWxpbmcgZWRnZSwgb3Igd2UndmUgaGl0IHRoZSBgbWF4V2FpdGAgbGltaXQuXG5cdCAgICByZXR1cm4gKGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8ICh0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0KSB8fFxuXHQgICAgICAodGltZVNpbmNlTGFzdENhbGwgPCAwKSB8fCAobWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdCkpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuXHQgICAgdmFyIHRpbWUgPSBub3coKTtcblx0ICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcblx0ICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcblx0ICAgIH1cblx0ICAgIC8vIFJlc3RhcnQgdGhlIHRpbWVyLlxuXHQgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG5cdCAgICB0aW1lcklkID0gdW5kZWZpbmVkO1xuXHRcblx0ICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cblx0ICAgIC8vIGRlYm91bmNlZCBhdCBsZWFzdCBvbmNlLlxuXHQgICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG5cdCAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuXHQgICAgfVxuXHQgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBjYW5jZWwoKSB7XG5cdCAgICBsYXN0SW52b2tlVGltZSA9IDA7XG5cdCAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGZsdXNoKCkge1xuXHQgICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG5cdCAgICB2YXIgdGltZSA9IG5vdygpLFxuXHQgICAgICAgIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7XG5cdFxuXHQgICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG5cdCAgICBsYXN0VGhpcyA9IHRoaXM7XG5cdCAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuXHRcblx0ICAgIGlmIChpc0ludm9raW5nKSB7XG5cdCAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAobWF4aW5nKSB7XG5cdCAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cblx0ICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuXHQgICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHQgIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG5cdCAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG5cdCAgcmV0dXJuIGRlYm91bmNlZDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBkZWJvdW5jZTtcblxuXG4vKioqLyB9LFxuLyogMTQ4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogUGVyZm9ybXMgYVxuXHQgKiBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuXHQgKiBjb21wYXJpc29uIGJldHdlZW4gdHdvIHZhbHVlcyB0byBkZXRlcm1pbmUgaWYgdGhleSBhcmUgZXF1aXZhbGVudC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcblx0ICogdmFyIG90aGVyID0geyAndXNlcic6ICdmcmVkJyB9O1xuXHQgKlxuXHQgKiBfLmVxKG9iamVjdCwgb2JqZWN0KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmVxKG9iamVjdCwgb3RoZXIpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmVxKCdhJywgJ2EnKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmVxKCdhJywgT2JqZWN0KCdhJykpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmVxKE5hTiwgTmFOKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKi9cblx0ZnVuY3Rpb24gZXEodmFsdWUsIG90aGVyKSB7XG5cdCAgcmV0dXJuIHZhbHVlID09PSBvdGhlciB8fCAodmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcik7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZXE7XG5cblxuLyoqKi8gfSxcbi8qIDE0OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VGaW5kSW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2KSxcblx0ICAgIGJhc2VJdGVyYXRlZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTAxKSxcblx0ICAgIHRvSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHRcblx0LyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xuXHR2YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXg7XG5cdFxuXHQvKipcblx0ICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5maW5kYCBleGNlcHQgdGhhdCBpdCByZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3Rcblx0ICogZWxlbWVudCBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3IgaW5zdGVhZCBvZiB0aGUgZWxlbWVudCBpdHNlbGYuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDEuMS4wXG5cdCAqIEBjYXRlZ29yeSBBcnJheVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuXHQgKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV1cblx0ICogIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PTBdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZvdW5kIGVsZW1lbnQsIGVsc2UgYC0xYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIHVzZXJzID0gW1xuXHQgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgICdhY3RpdmUnOiBmYWxzZSB9LFxuXHQgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgICdhY3RpdmUnOiBmYWxzZSB9LFxuXHQgKiAgIHsgJ3VzZXInOiAncGViYmxlcycsICdhY3RpdmUnOiB0cnVlIH1cblx0ICogXTtcblx0ICpcblx0ICogXy5maW5kSW5kZXgodXNlcnMsIGZ1bmN0aW9uKG8pIHsgcmV0dXJuIG8udXNlciA9PSAnYmFybmV5JzsgfSk7XG5cdCAqIC8vID0+IDBcblx0ICpcblx0ICogLy8gVGhlIGBfLm1hdGNoZXNgIGl0ZXJhdGVlIHNob3J0aGFuZC5cblx0ICogXy5maW5kSW5kZXgodXNlcnMsIHsgJ3VzZXInOiAnZnJlZCcsICdhY3RpdmUnOiBmYWxzZSB9KTtcblx0ICogLy8gPT4gMVxuXHQgKlxuXHQgKiAvLyBUaGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG5cdCAqIF8uZmluZEluZGV4KHVzZXJzLCBbJ2FjdGl2ZScsIGZhbHNlXSk7XG5cdCAqIC8vID0+IDBcblx0ICpcblx0ICogLy8gVGhlIGBfLnByb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG5cdCAqIF8uZmluZEluZGV4KHVzZXJzLCAnYWN0aXZlJyk7XG5cdCAqIC8vID0+IDJcblx0ICovXG5cdGZ1bmN0aW9uIGZpbmRJbmRleChhcnJheSwgcHJlZGljYXRlLCBmcm9tSW5kZXgpIHtcblx0ICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuXHQgIGlmICghbGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gLTE7XG5cdCAgfVxuXHQgIHZhciBpbmRleCA9IGZyb21JbmRleCA9PSBudWxsID8gMCA6IHRvSW50ZWdlcihmcm9tSW5kZXgpO1xuXHQgIGlmIChpbmRleCA8IDApIHtcblx0ICAgIGluZGV4ID0gbmF0aXZlTWF4KGxlbmd0aCArIGluZGV4LCAwKTtcblx0ICB9XG5cdCAgcmV0dXJuIGJhc2VGaW5kSW5kZXgoYXJyYXksIGJhc2VJdGVyYXRlZShwcmVkaWNhdGUsIDMpLCBpbmRleCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZmluZEluZGV4O1xuXG5cbi8qKiovIH0sXG4vKiAxNTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlR2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgdmFsdWUgYXQgYHBhdGhgIG9mIGBvYmplY3RgLiBJZiB0aGUgcmVzb2x2ZWQgdmFsdWUgaXNcblx0ICogYHVuZGVmaW5lZGAsIHRoZSBgZGVmYXVsdFZhbHVlYCBpcyB1c2VkIGluIGl0cyBwbGFjZS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMy43LjBcblx0ICogQGNhdGVnb3J5IE9iamVjdFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdCAqIEBwYXJhbSB7Kn0gW2RlZmF1bHRWYWx1ZV0gVGhlIHZhbHVlIHJldHVybmVkIGZvciBgdW5kZWZpbmVkYCByZXNvbHZlZCB2YWx1ZXMuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXNvbHZlZCB2YWx1ZS5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIG9iamVjdCA9IHsgJ2EnOiBbeyAnYic6IHsgJ2MnOiAzIH0gfV0gfTtcblx0ICpcblx0ICogXy5nZXQob2JqZWN0LCAnYVswXS5iLmMnKTtcblx0ICogLy8gPT4gM1xuXHQgKlxuXHQgKiBfLmdldChvYmplY3QsIFsnYScsICcwJywgJ2InLCAnYyddKTtcblx0ICogLy8gPT4gM1xuXHQgKlxuXHQgKiBfLmdldChvYmplY3QsICdhLmIuYycsICdkZWZhdWx0Jyk7XG5cdCAqIC8vID0+ICdkZWZhdWx0J1xuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0KG9iamVjdCwgcGF0aCwgZGVmYXVsdFZhbHVlKSB7XG5cdCAgdmFyIHJlc3VsdCA9IG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogYmFzZUdldChvYmplY3QsIHBhdGgpO1xuXHQgIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRWYWx1ZSA6IHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDE1MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VIYXNJbiA9IF9fd2VicGFja19yZXF1aXJlX18oOTcpLFxuXHQgICAgaGFzUGF0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMTE3KTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHBhdGhgIGlzIGEgZGlyZWN0IG9yIGluaGVyaXRlZCBwcm9wZXJ0eSBvZiBgb2JqZWN0YC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IE9iamVjdFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHBhdGhgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiB2YXIgb2JqZWN0ID0gXy5jcmVhdGUoeyAnYSc6IF8uY3JlYXRlKHsgJ2InOiAyIH0pIH0pO1xuXHQgKlxuXHQgKiBfLmhhc0luKG9iamVjdCwgJ2EnKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmhhc0luKG9iamVjdCwgJ2EuYicpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaGFzSW4ob2JqZWN0LCBbJ2EnLCAnYiddKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmhhc0luKG9iamVjdCwgJ2InKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGhhc0luKG9iamVjdCwgcGF0aCkge1xuXHQgIHJldHVybiBvYmplY3QgIT0gbnVsbCAmJiBoYXNQYXRoKG9iamVjdCwgcGF0aCwgYmFzZUhhc0luKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBoYXNJbjtcblxuXG4vKioqLyB9LFxuLyogMTUyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3QgYXJndW1lbnQgZ2l2ZW4gdG8gaXQuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBVdGlsXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgQW55IHZhbHVlLlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyBgdmFsdWVgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJyB9O1xuXHQgKlxuXHQgKiBjb25zb2xlLmxvZyhfLmlkZW50aXR5KG9iamVjdCkgPT09IG9iamVjdCk7XG5cdCAqIC8vID0+IHRydWVcblx0ICovXG5cdGZ1bmN0aW9uIGlkZW50aXR5KHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlkZW50aXR5O1xuXG5cbi8qKiovIH0sXG4vKiAxNTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc0FycmF5TGlrZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpLFxuXHQgICAgaXNPYmplY3RMaWtlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdC8qKlxuXHQgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmlzQXJyYXlMaWtlYCBleGNlcHQgdGhhdCBpdCBhbHNvIGNoZWNrcyBpZiBgdmFsdWVgXG5cdCAqIGlzIGFuIG9iamVjdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGFycmF5LWxpa2Ugb2JqZWN0LFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXlMaWtlT2JqZWN0KFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0FycmF5TGlrZU9iamVjdChkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXlMaWtlT2JqZWN0KCdhYmMnKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICpcblx0ICogXy5pc0FycmF5TGlrZU9iamVjdChfLm5vb3ApO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpIHtcblx0ICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0FycmF5TGlrZSh2YWx1ZSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNBcnJheUxpa2VPYmplY3Q7XG5cblxuLyoqKi8gfSxcbi8qIDE1NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzTGVuZ3RoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSksXG5cdCAgICBpc09iamVjdExpa2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuXHQgICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuXHQgICAgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJyxcblx0ICAgIGRhdGVUYWcgPSAnW29iamVjdCBEYXRlXScsXG5cdCAgICBlcnJvclRhZyA9ICdbb2JqZWN0IEVycm9yXScsXG5cdCAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJyxcblx0ICAgIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuXHQgICAgbnVtYmVyVGFnID0gJ1tvYmplY3QgTnVtYmVyXScsXG5cdCAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJyxcblx0ICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuXHQgICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG5cdCAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcblx0ICAgIHdlYWtNYXBUYWcgPSAnW29iamVjdCBXZWFrTWFwXSc7XG5cdFxuXHR2YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLFxuXHQgICAgZGF0YVZpZXdUYWcgPSAnW29iamVjdCBEYXRhVmlld10nLFxuXHQgICAgZmxvYXQzMlRhZyA9ICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nLFxuXHQgICAgZmxvYXQ2NFRhZyA9ICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nLFxuXHQgICAgaW50OFRhZyA9ICdbb2JqZWN0IEludDhBcnJheV0nLFxuXHQgICAgaW50MTZUYWcgPSAnW29iamVjdCBJbnQxNkFycmF5XScsXG5cdCAgICBpbnQzMlRhZyA9ICdbb2JqZWN0IEludDMyQXJyYXldJyxcblx0ICAgIHVpbnQ4VGFnID0gJ1tvYmplY3QgVWludDhBcnJheV0nLFxuXHQgICAgdWludDhDbGFtcGVkVGFnID0gJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJyxcblx0ICAgIHVpbnQxNlRhZyA9ICdbb2JqZWN0IFVpbnQxNkFycmF5XScsXG5cdCAgICB1aW50MzJUYWcgPSAnW29iamVjdCBVaW50MzJBcnJheV0nO1xuXHRcblx0LyoqIFVzZWQgdG8gaWRlbnRpZnkgYHRvU3RyaW5nVGFnYCB2YWx1ZXMgb2YgdHlwZWQgYXJyYXlzLiAqL1xuXHR2YXIgdHlwZWRBcnJheVRhZ3MgPSB7fTtcblx0dHlwZWRBcnJheVRhZ3NbZmxvYXQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1tmbG9hdDY0VGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW2ludDhUYWddID0gdHlwZWRBcnJheVRhZ3NbaW50MTZUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbaW50MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDhUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbdWludDhDbGFtcGVkVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQxNlRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1t1aW50MzJUYWddID0gdHJ1ZTtcblx0dHlwZWRBcnJheVRhZ3NbYXJnc1RhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheVRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1thcnJheUJ1ZmZlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tib29sVGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW2RhdGFWaWV3VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2RhdGVUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbZXJyb3JUYWddID0gdHlwZWRBcnJheVRhZ3NbZnVuY1RhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1ttYXBUYWddID0gdHlwZWRBcnJheVRhZ3NbbnVtYmVyVGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW29iamVjdFRhZ10gPSB0eXBlZEFycmF5VGFnc1tyZWdleHBUYWddID1cblx0dHlwZWRBcnJheVRhZ3Nbc2V0VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcblx0ICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG5cdCAqIG9mIHZhbHVlcy5cblx0ICovXG5cdHZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSB0eXBlZCBhcnJheS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMy4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzVHlwZWRBcnJheShuZXcgVWludDhBcnJheSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc1R5cGVkQXJyYXkoW10pO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNUeXBlZEFycmF5KHZhbHVlKSB7XG5cdCAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiZcblx0ICAgIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgISF0eXBlZEFycmF5VGFnc1tvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKV07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNUeXBlZEFycmF5O1xuXG5cbi8qKiovIH0sXG4vKiAxNTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBNYXBDYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXHRcblx0LyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cblx0dmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBtZW1vaXplcyB0aGUgcmVzdWx0IG9mIGBmdW5jYC4gSWYgYHJlc29sdmVyYCBpc1xuXHQgKiBwcm92aWRlZCwgaXQgZGV0ZXJtaW5lcyB0aGUgY2FjaGUga2V5IGZvciBzdG9yaW5nIHRoZSByZXN1bHQgYmFzZWQgb24gdGhlXG5cdCAqIGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24uIEJ5IGRlZmF1bHQsIHRoZSBmaXJzdCBhcmd1bWVudFxuXHQgKiBwcm92aWRlZCB0byB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24gaXMgdXNlZCBhcyB0aGUgbWFwIGNhY2hlIGtleS4gVGhlIGBmdW5jYFxuXHQgKiBpcyBpbnZva2VkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBtZW1vaXplZCBmdW5jdGlvbi5cblx0ICpcblx0ICogKipOb3RlOioqIFRoZSBjYWNoZSBpcyBleHBvc2VkIGFzIHRoZSBgY2FjaGVgIHByb3BlcnR5IG9uIHRoZSBtZW1vaXplZFxuXHQgKiBmdW5jdGlvbi4gSXRzIGNyZWF0aW9uIG1heSBiZSBjdXN0b21pemVkIGJ5IHJlcGxhY2luZyB0aGUgYF8ubWVtb2l6ZS5DYWNoZWBcblx0ICogY29uc3RydWN0b3Igd2l0aCBvbmUgd2hvc2UgaW5zdGFuY2VzIGltcGxlbWVudCB0aGVcblx0ICogW2BNYXBgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1wcm9wZXJ0aWVzLW9mLXRoZS1tYXAtcHJvdG90eXBlLW9iamVjdClcblx0ICogbWV0aG9kIGludGVyZmFjZSBvZiBgZGVsZXRlYCwgYGdldGAsIGBoYXNgLCBhbmQgYHNldGAuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBGdW5jdGlvblxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBoYXZlIGl0cyBvdXRwdXQgbWVtb2l6ZWQuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtyZXNvbHZlcl0gVGhlIGZ1bmN0aW9uIHRvIHJlc29sdmUgdGhlIGNhY2hlIGtleS5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgbWVtb2l6ZWQgZnVuY3Rpb24uXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIHZhciBvYmplY3QgPSB7ICdhJzogMSwgJ2InOiAyIH07XG5cdCAqIHZhciBvdGhlciA9IHsgJ2MnOiAzLCAnZCc6IDQgfTtcblx0ICpcblx0ICogdmFyIHZhbHVlcyA9IF8ubWVtb2l6ZShfLnZhbHVlcyk7XG5cdCAqIHZhbHVlcyhvYmplY3QpO1xuXHQgKiAvLyA9PiBbMSwgMl1cblx0ICpcblx0ICogdmFsdWVzKG90aGVyKTtcblx0ICogLy8gPT4gWzMsIDRdXG5cdCAqXG5cdCAqIG9iamVjdC5hID0gMjtcblx0ICogdmFsdWVzKG9iamVjdCk7XG5cdCAqIC8vID0+IFsxLCAyXVxuXHQgKlxuXHQgKiAvLyBNb2RpZnkgdGhlIHJlc3VsdCBjYWNoZS5cblx0ICogdmFsdWVzLmNhY2hlLnNldChvYmplY3QsIFsnYScsICdiJ10pO1xuXHQgKiB2YWx1ZXMob2JqZWN0KTtcblx0ICogLy8gPT4gWydhJywgJ2InXVxuXHQgKlxuXHQgKiAvLyBSZXBsYWNlIGBfLm1lbW9pemUuQ2FjaGVgLlxuXHQgKiBfLm1lbW9pemUuQ2FjaGUgPSBXZWFrTWFwO1xuXHQgKi9cblx0ZnVuY3Rpb24gbWVtb2l6ZShmdW5jLCByZXNvbHZlcikge1xuXHQgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nIHx8IChyZXNvbHZlciAmJiB0eXBlb2YgcmVzb2x2ZXIgIT0gJ2Z1bmN0aW9uJykpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcblx0ICB9XG5cdCAgdmFyIG1lbW9pemVkID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcblx0ICAgICAgICBrZXkgPSByZXNvbHZlciA/IHJlc29sdmVyLmFwcGx5KHRoaXMsIGFyZ3MpIDogYXJnc1swXSxcblx0ICAgICAgICBjYWNoZSA9IG1lbW9pemVkLmNhY2hlO1xuXHRcblx0ICAgIGlmIChjYWNoZS5oYXMoa2V5KSkge1xuXHQgICAgICByZXR1cm4gY2FjaGUuZ2V0KGtleSk7XG5cdCAgICB9XG5cdCAgICB2YXIgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcblx0ICAgIG1lbW9pemVkLmNhY2hlID0gY2FjaGUuc2V0KGtleSwgcmVzdWx0KTtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfTtcblx0ICBtZW1vaXplZC5jYWNoZSA9IG5ldyAobWVtb2l6ZS5DYWNoZSB8fCBNYXBDYWNoZSk7XG5cdCAgcmV0dXJuIG1lbW9pemVkO1xuXHR9XG5cdFxuXHQvLyBBc3NpZ24gY2FjaGUgdG8gYF8ubWVtb2l6ZWAuXG5cdG1lbW9pemUuQ2FjaGUgPSBNYXBDYWNoZTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbWVtb2l6ZTtcblxuXG4vKioqLyB9LFxuLyogMTU2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogR2V0cyB0aGUgdGltZXN0YW1wIG9mIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlXG5cdCAqIHRoZSBVbml4IGVwb2NoICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAyLjQuMFxuXHQgKiBAY2F0ZWdvcnkgRGF0ZVxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lc3RhbXAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uZGVmZXIoZnVuY3Rpb24oc3RhbXApIHtcblx0ICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuXHQgKiB9LCBfLm5vdygpKTtcblx0ICogLy8gPT4gTG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgaW52b2NhdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIG5vdygpIHtcblx0ICByZXR1cm4gRGF0ZS5ub3coKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBub3c7XG5cblxuLyoqKi8gfSxcbi8qIDE1NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpLFxuXHQgICAgYmFzZVByb3BlcnR5RGVlcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTA1KSxcblx0ICAgIGlzS2V5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMiksXG5cdCAgICB0b0tleSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHZhbHVlIGF0IGBwYXRoYCBvZiBhIGdpdmVuIG9iamVjdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMi40LjBcblx0ICogQGNhdGVnb3J5IFV0aWxcblx0ICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYWNjZXNzb3IgZnVuY3Rpb24uXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIHZhciBvYmplY3RzID0gW1xuXHQgKiAgIHsgJ2EnOiB7ICdiJzogMiB9IH0sXG5cdCAqICAgeyAnYSc6IHsgJ2InOiAxIH0gfVxuXHQgKiBdO1xuXHQgKlxuXHQgKiBfLm1hcChvYmplY3RzLCBfLnByb3BlcnR5KCdhLmInKSk7XG5cdCAqIC8vID0+IFsyLCAxXVxuXHQgKlxuXHQgKiBfLm1hcChfLnNvcnRCeShvYmplY3RzLCBfLnByb3BlcnR5KFsnYScsICdiJ10pKSwgJ2EuYicpO1xuXHQgKiAvLyA9PiBbMSwgMl1cblx0ICovXG5cdGZ1bmN0aW9uIHByb3BlcnR5KHBhdGgpIHtcblx0ICByZXR1cm4gaXNLZXkocGF0aCkgPyBiYXNlUHJvcGVydHkodG9LZXkocGF0aCkpIDogYmFzZVByb3BlcnR5RGVlcChwYXRoKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBwcm9wZXJ0eTtcblxuXG4vKioqLyB9LFxuLyogMTU4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYXBwbHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkzKSxcblx0ICAgIHRvSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHRcblx0LyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cblx0dmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cblx0dmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4O1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZVxuXHQgKiBjcmVhdGVkIGZ1bmN0aW9uIGFuZCBhcmd1bWVudHMgZnJvbSBgc3RhcnRgIGFuZCBiZXlvbmQgcHJvdmlkZWQgYXNcblx0ICogYW4gYXJyYXkuXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBiYXNlZCBvbiB0aGVcblx0ICogW3Jlc3QgcGFyYW1ldGVyXShodHRwczovL21kbi5pby9yZXN0X3BhcmFtZXRlcnMpLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYXBwbHkgYSByZXN0IHBhcmFtZXRlciB0by5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD1mdW5jLmxlbmd0aC0xXSBUaGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIHJlc3QgcGFyYW1ldGVyLlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIHNheSA9IF8ucmVzdChmdW5jdGlvbih3aGF0LCBuYW1lcykge1xuXHQgKiAgIHJldHVybiB3aGF0ICsgJyAnICsgXy5pbml0aWFsKG5hbWVzKS5qb2luKCcsICcpICtcblx0ICogICAgIChfLnNpemUobmFtZXMpID4gMSA/ICcsICYgJyA6ICcnKSArIF8ubGFzdChuYW1lcyk7XG5cdCAqIH0pO1xuXHQgKlxuXHQgKiBzYXkoJ2hlbGxvJywgJ2ZyZWQnLCAnYmFybmV5JywgJ3BlYmJsZXMnKTtcblx0ICogLy8gPT4gJ2hlbGxvIGZyZWQsIGJhcm5leSwgJiBwZWJibGVzJ1xuXHQgKi9cblx0ZnVuY3Rpb24gcmVzdChmdW5jLCBzdGFydCkge1xuXHQgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG5cdCAgfVxuXHQgIHN0YXJ0ID0gbmF0aXZlTWF4KHN0YXJ0ID09PSB1bmRlZmluZWQgPyAoZnVuYy5sZW5ndGggLSAxKSA6IHRvSW50ZWdlcihzdGFydCksIDApO1xuXHQgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuXHQgICAgICAgIGluZGV4ID0gLTEsXG5cdCAgICAgICAgbGVuZ3RoID0gbmF0aXZlTWF4KGFyZ3MubGVuZ3RoIC0gc3RhcnQsIDApLFxuXHQgICAgICAgIGFycmF5ID0gQXJyYXkobGVuZ3RoKTtcblx0XG5cdCAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgICBhcnJheVtpbmRleF0gPSBhcmdzW3N0YXJ0ICsgaW5kZXhdO1xuXHQgICAgfVxuXHQgICAgc3dpdGNoIChzdGFydCkge1xuXHQgICAgICBjYXNlIDA6IHJldHVybiBmdW5jLmNhbGwodGhpcywgYXJyYXkpO1xuXHQgICAgICBjYXNlIDE6IHJldHVybiBmdW5jLmNhbGwodGhpcywgYXJnc1swXSwgYXJyYXkpO1xuXHQgICAgICBjYXNlIDI6IHJldHVybiBmdW5jLmNhbGwodGhpcywgYXJnc1swXSwgYXJnc1sxXSwgYXJyYXkpO1xuXHQgICAgfVxuXHQgICAgdmFyIG90aGVyQXJncyA9IEFycmF5KHN0YXJ0ICsgMSk7XG5cdCAgICBpbmRleCA9IC0xO1xuXHQgICAgd2hpbGUgKCsraW5kZXggPCBzdGFydCkge1xuXHQgICAgICBvdGhlckFyZ3NbaW5kZXhdID0gYXJnc1tpbmRleF07XG5cdCAgICB9XG5cdCAgICBvdGhlckFyZ3Nbc3RhcnRdID0gYXJyYXk7XG5cdCAgICByZXR1cm4gYXBwbHkoZnVuYywgdGhpcywgb3RoZXJBcmdzKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHJlc3Q7XG5cblxuLyoqKi8gfSxcbi8qIDE1OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHRvTnVtYmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdFxuXHQvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cblx0dmFyIElORklOSVRZID0gMSAvIDAsXG5cdCAgICBNQVhfSU5URUdFUiA9IDEuNzk3NjkzMTM0ODYyMzE1N2UrMzA4O1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBmaW5pdGUgbnVtYmVyLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjEyLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29udmVydGVkIG51bWJlci5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy50b0Zpbml0ZSgzLjIpO1xuXHQgKiAvLyA9PiAzLjJcblx0ICpcblx0ICogXy50b0Zpbml0ZShOdW1iZXIuTUlOX1ZBTFVFKTtcblx0ICogLy8gPT4gNWUtMzI0XG5cdCAqXG5cdCAqIF8udG9GaW5pdGUoSW5maW5pdHkpO1xuXHQgKiAvLyA9PiAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOFxuXHQgKlxuXHQgKiBfLnRvRmluaXRlKCczLjInKTtcblx0ICogLy8gPT4gMy4yXG5cdCAqL1xuXHRmdW5jdGlvbiB0b0Zpbml0ZSh2YWx1ZSkge1xuXHQgIGlmICghdmFsdWUpIHtcblx0ICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogMDtcblx0ICB9XG5cdCAgdmFsdWUgPSB0b051bWJlcih2YWx1ZSk7XG5cdCAgaWYgKHZhbHVlID09PSBJTkZJTklUWSB8fCB2YWx1ZSA9PT0gLUlORklOSVRZKSB7XG5cdCAgICB2YXIgc2lnbiA9ICh2YWx1ZSA8IDAgPyAtMSA6IDEpO1xuXHQgICAgcmV0dXJuIHNpZ24gKiBNQVhfSU5URUdFUjtcblx0ICB9XG5cdCAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSA/IHZhbHVlIDogMDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB0b0Zpbml0ZTtcblxuXG4vKioqLyB9LFxuLyogMTYwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZVRvU3RyaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDcpO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZCBmb3IgYG51bGxgXG5cdCAqIGFuZCBgdW5kZWZpbmVkYCB2YWx1ZXMuIFRoZSBzaWduIG9mIGAtMGAgaXMgcHJlc2VydmVkLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8udG9TdHJpbmcobnVsbCk7XG5cdCAqIC8vID0+ICcnXG5cdCAqXG5cdCAqIF8udG9TdHJpbmcoLTApO1xuXHQgKiAvLyA9PiAnLTAnXG5cdCAqXG5cdCAqIF8udG9TdHJpbmcoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gJzEsMiwzJ1xuXHQgKi9cblx0ZnVuY3Rpb24gdG9TdHJpbmcodmFsdWUpIHtcblx0ICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogYmFzZVRvU3RyaW5nKHZhbHVlKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB0b1N0cmluZztcblxuXG4vKioqLyB9LFxuLyogMTYxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cdC8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICBCZWdpbiBwcmlzbS1jb3JlLmpzXG5cdCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblx0XG5cdHZhciBfc2VsZiA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJylcblx0XHQ/IHdpbmRvdyAgIC8vIGlmIGluIGJyb3dzZXJcblx0XHQ6IChcblx0XHRcdCh0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICd1bmRlZmluZWQnICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZSlcblx0XHRcdD8gc2VsZiAvLyBpZiBpbiB3b3JrZXJcblx0XHRcdDoge30gICAvLyBpZiBpbiBub2RlIGpzXG5cdFx0KTtcblx0XG5cdC8qKlxuXHQgKiBQcmlzbTogTGlnaHR3ZWlnaHQsIHJvYnVzdCwgZWxlZ2FudCBzeW50YXggaGlnaGxpZ2h0aW5nXG5cdCAqIE1JVCBsaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwL1xuXHQgKiBAYXV0aG9yIExlYSBWZXJvdSBodHRwOi8vbGVhLnZlcm91Lm1lXG5cdCAqL1xuXHRcblx0dmFyIFByaXNtID0gKGZ1bmN0aW9uKCl7XG5cdFxuXHQvLyBQcml2YXRlIGhlbHBlciB2YXJzXG5cdHZhciBsYW5nID0gL1xcYmxhbmcoPzp1YWdlKT8tKFxcdyspXFxiL2k7XG5cdHZhciB1bmlxdWVJZCA9IDA7XG5cdFxuXHR2YXIgXyA9IF9zZWxmLlByaXNtID0ge1xuXHRcdHV0aWw6IHtcblx0XHRcdGVuY29kZTogZnVuY3Rpb24gKHRva2Vucykge1xuXHRcdFx0XHRpZiAodG9rZW5zIGluc3RhbmNlb2YgVG9rZW4pIHtcblx0XHRcdFx0XHRyZXR1cm4gbmV3IFRva2VuKHRva2Vucy50eXBlLCBfLnV0aWwuZW5jb2RlKHRva2Vucy5jb250ZW50KSwgdG9rZW5zLmFsaWFzKTtcblx0XHRcdFx0fSBlbHNlIGlmIChfLnV0aWwudHlwZSh0b2tlbnMpID09PSAnQXJyYXknKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRva2Vucy5tYXAoXy51dGlsLmVuY29kZSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRva2Vucy5yZXBsYWNlKC8mL2csICcmYW1wOycpLnJlcGxhY2UoLzwvZywgJyZsdDsnKS5yZXBsYWNlKC9cXHUwMGEwL2csICcgJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFxuXHRcdFx0dHlwZTogZnVuY3Rpb24gKG8pIHtcblx0XHRcdFx0cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5tYXRjaCgvXFxbb2JqZWN0IChcXHcrKVxcXS8pWzFdO1xuXHRcdFx0fSxcblx0XG5cdFx0XHRvYmpJZDogZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0XHRpZiAoIW9ialsnX19pZCddKSB7XG5cdFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgJ19faWQnLCB7IHZhbHVlOiArK3VuaXF1ZUlkIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBvYmpbJ19faWQnXTtcblx0XHRcdH0sXG5cdFxuXHRcdFx0Ly8gRGVlcCBjbG9uZSBhIGxhbmd1YWdlIGRlZmluaXRpb24gKGUuZy4gdG8gZXh0ZW5kIGl0KVxuXHRcdFx0Y2xvbmU6IGZ1bmN0aW9uIChvKSB7XG5cdFx0XHRcdHZhciB0eXBlID0gXy51dGlsLnR5cGUobyk7XG5cdFxuXHRcdFx0XHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRcdFx0XHRjYXNlICdPYmplY3QnOlxuXHRcdFx0XHRcdFx0dmFyIGNsb25lID0ge307XG5cdFxuXHRcdFx0XHRcdFx0Zm9yICh2YXIga2V5IGluIG8pIHtcblx0XHRcdFx0XHRcdFx0aWYgKG8uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdFx0XHRcdFx0XHRcdGNsb25lW2tleV0gPSBfLnV0aWwuY2xvbmUob1trZXldKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdHJldHVybiBjbG9uZTtcblx0XG5cdFx0XHRcdFx0Y2FzZSAnQXJyYXknOlxuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgZm9yIGV4aXN0ZW5jZSBmb3IgSUU4XG5cdFx0XHRcdFx0XHRyZXR1cm4gby5tYXAgJiYgby5tYXAoZnVuY3Rpb24odikgeyByZXR1cm4gXy51dGlsLmNsb25lKHYpOyB9KTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0cmV0dXJuIG87XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0bGFuZ3VhZ2VzOiB7XG5cdFx0XHRleHRlbmQ6IGZ1bmN0aW9uIChpZCwgcmVkZWYpIHtcblx0XHRcdFx0dmFyIGxhbmcgPSBfLnV0aWwuY2xvbmUoXy5sYW5ndWFnZXNbaWRdKTtcblx0XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiByZWRlZikge1xuXHRcdFx0XHRcdGxhbmdba2V5XSA9IHJlZGVmW2tleV07XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHJldHVybiBsYW5nO1xuXHRcdFx0fSxcblx0XG5cdFx0XHQvKipcblx0XHRcdCAqIEluc2VydCBhIHRva2VuIGJlZm9yZSBhbm90aGVyIHRva2VuIGluIGEgbGFuZ3VhZ2UgbGl0ZXJhbFxuXHRcdFx0ICogQXMgdGhpcyBuZWVkcyB0byByZWNyZWF0ZSB0aGUgb2JqZWN0ICh3ZSBjYW5ub3QgYWN0dWFsbHkgaW5zZXJ0IGJlZm9yZSBrZXlzIGluIG9iamVjdCBsaXRlcmFscyksXG5cdFx0XHQgKiB3ZSBjYW5ub3QganVzdCBwcm92aWRlIGFuIG9iamVjdCwgd2UgbmVlZCBhbm9iamVjdCBhbmQgYSBrZXkuXG5cdFx0XHQgKiBAcGFyYW0gaW5zaWRlIFRoZSBrZXkgKG9yIGxhbmd1YWdlIGlkKSBvZiB0aGUgcGFyZW50XG5cdFx0XHQgKiBAcGFyYW0gYmVmb3JlIFRoZSBrZXkgdG8gaW5zZXJ0IGJlZm9yZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgZnVuY3Rpb24gYXBwZW5kcyBpbnN0ZWFkLlxuXHRcdFx0ICogQHBhcmFtIGluc2VydCBPYmplY3Qgd2l0aCB0aGUga2V5L3ZhbHVlIHBhaXJzIHRvIGluc2VydFxuXHRcdFx0ICogQHBhcmFtIHJvb3QgVGhlIG9iamVjdCB0aGF0IGNvbnRhaW5zIGBpbnNpZGVgLiBJZiBlcXVhbCB0byBQcmlzbS5sYW5ndWFnZXMsIGl0IGNhbiBiZSBvbWl0dGVkLlxuXHRcdFx0ICovXG5cdFx0XHRpbnNlcnRCZWZvcmU6IGZ1bmN0aW9uIChpbnNpZGUsIGJlZm9yZSwgaW5zZXJ0LCByb290KSB7XG5cdFx0XHRcdHJvb3QgPSByb290IHx8IF8ubGFuZ3VhZ2VzO1xuXHRcdFx0XHR2YXIgZ3JhbW1hciA9IHJvb3RbaW5zaWRlXTtcblx0XG5cdFx0XHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID09IDIpIHtcblx0XHRcdFx0XHRpbnNlcnQgPSBhcmd1bWVudHNbMV07XG5cdFxuXHRcdFx0XHRcdGZvciAodmFyIG5ld1Rva2VuIGluIGluc2VydCkge1xuXHRcdFx0XHRcdFx0aWYgKGluc2VydC5oYXNPd25Qcm9wZXJ0eShuZXdUb2tlbikpIHtcblx0XHRcdFx0XHRcdFx0Z3JhbW1hcltuZXdUb2tlbl0gPSBpbnNlcnRbbmV3VG9rZW5dO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0cmV0dXJuIGdyYW1tYXI7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHZhciByZXQgPSB7fTtcblx0XG5cdFx0XHRcdGZvciAodmFyIHRva2VuIGluIGdyYW1tYXIpIHtcblx0XG5cdFx0XHRcdFx0aWYgKGdyYW1tYXIuaGFzT3duUHJvcGVydHkodG9rZW4pKSB7XG5cdFxuXHRcdFx0XHRcdFx0aWYgKHRva2VuID09IGJlZm9yZSkge1xuXHRcblx0XHRcdFx0XHRcdFx0Zm9yICh2YXIgbmV3VG9rZW4gaW4gaW5zZXJ0KSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdGlmIChpbnNlcnQuaGFzT3duUHJvcGVydHkobmV3VG9rZW4pKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXRbbmV3VG9rZW5dID0gaW5zZXJ0W25ld1Rva2VuXTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRyZXRbdG9rZW5dID0gZ3JhbW1hclt0b2tlbl07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBVcGRhdGUgcmVmZXJlbmNlcyBpbiBvdGhlciBsYW5ndWFnZSBkZWZpbml0aW9uc1xuXHRcdFx0XHRfLmxhbmd1YWdlcy5ERlMoXy5sYW5ndWFnZXMsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcblx0XHRcdFx0XHRpZiAodmFsdWUgPT09IHJvb3RbaW5zaWRlXSAmJiBrZXkgIT0gaW5zaWRlKSB7XG5cdFx0XHRcdFx0XHR0aGlzW2tleV0gPSByZXQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XG5cdFx0XHRcdHJldHVybiByb290W2luc2lkZV0gPSByZXQ7XG5cdFx0XHR9LFxuXHRcblx0XHRcdC8vIFRyYXZlcnNlIGEgbGFuZ3VhZ2UgZGVmaW5pdGlvbiB3aXRoIERlcHRoIEZpcnN0IFNlYXJjaFxuXHRcdFx0REZTOiBmdW5jdGlvbihvLCBjYWxsYmFjaywgdHlwZSwgdmlzaXRlZCkge1xuXHRcdFx0XHR2aXNpdGVkID0gdmlzaXRlZCB8fCB7fTtcblx0XHRcdFx0Zm9yICh2YXIgaSBpbiBvKSB7XG5cdFx0XHRcdFx0aWYgKG8uaGFzT3duUHJvcGVydHkoaSkpIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwobywgaSwgb1tpXSwgdHlwZSB8fCBpKTtcblx0XG5cdFx0XHRcdFx0XHRpZiAoXy51dGlsLnR5cGUob1tpXSkgPT09ICdPYmplY3QnICYmICF2aXNpdGVkW18udXRpbC5vYmpJZChvW2ldKV0pIHtcblx0XHRcdFx0XHRcdFx0dmlzaXRlZFtfLnV0aWwub2JqSWQob1tpXSldID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0Xy5sYW5ndWFnZXMuREZTKG9baV0sIGNhbGxiYWNrLCBudWxsLCB2aXNpdGVkKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2UgaWYgKF8udXRpbC50eXBlKG9baV0pID09PSAnQXJyYXknICYmICF2aXNpdGVkW18udXRpbC5vYmpJZChvW2ldKV0pIHtcblx0XHRcdFx0XHRcdFx0dmlzaXRlZFtfLnV0aWwub2JqSWQob1tpXSldID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0Xy5sYW5ndWFnZXMuREZTKG9baV0sIGNhbGxiYWNrLCBpLCB2aXNpdGVkKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdHBsdWdpbnM6IHt9LFxuXHRcblx0XHRoaWdobGlnaHRBbGw6IGZ1bmN0aW9uKGFzeW5jLCBjYWxsYmFjaykge1xuXHRcdFx0dmFyIGVudiA9IHtcblx0XHRcdFx0Y2FsbGJhY2s6IGNhbGxiYWNrLFxuXHRcdFx0XHRzZWxlY3RvcjogJ2NvZGVbY2xhc3MqPVwibGFuZ3VhZ2UtXCJdLCBbY2xhc3MqPVwibGFuZ3VhZ2UtXCJdIGNvZGUsIGNvZGVbY2xhc3MqPVwibGFuZy1cIl0sIFtjbGFzcyo9XCJsYW5nLVwiXSBjb2RlJ1xuXHRcdFx0fTtcblx0XG5cdFx0XHRfLmhvb2tzLnJ1bihcImJlZm9yZS1oaWdobGlnaHRhbGxcIiwgZW52KTtcblx0XG5cdFx0XHR2YXIgZWxlbWVudHMgPSBlbnYuZWxlbWVudHMgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbnYuc2VsZWN0b3IpO1xuXHRcblx0XHRcdGZvciAodmFyIGk9MCwgZWxlbWVudDsgZWxlbWVudCA9IGVsZW1lbnRzW2krK107KSB7XG5cdFx0XHRcdF8uaGlnaGxpZ2h0RWxlbWVudChlbGVtZW50LCBhc3luYyA9PT0gdHJ1ZSwgZW52LmNhbGxiYWNrKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRoaWdobGlnaHRFbGVtZW50OiBmdW5jdGlvbihlbGVtZW50LCBhc3luYywgY2FsbGJhY2spIHtcblx0XHRcdC8vIEZpbmQgbGFuZ3VhZ2Vcblx0XHRcdHZhciBsYW5ndWFnZSwgZ3JhbW1hciwgcGFyZW50ID0gZWxlbWVudDtcblx0XG5cdFx0XHR3aGlsZSAocGFyZW50ICYmICFsYW5nLnRlc3QocGFyZW50LmNsYXNzTmFtZSkpIHtcblx0XHRcdFx0cGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKHBhcmVudCkge1xuXHRcdFx0XHRsYW5ndWFnZSA9IChwYXJlbnQuY2xhc3NOYW1lLm1hdGNoKGxhbmcpIHx8IFssJyddKVsxXS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRncmFtbWFyID0gXy5sYW5ndWFnZXNbbGFuZ3VhZ2VdO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFNldCBsYW5ndWFnZSBvbiB0aGUgZWxlbWVudCwgaWYgbm90IHByZXNlbnRcblx0XHRcdGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUucmVwbGFjZShsYW5nLCAnJykucmVwbGFjZSgvXFxzKy9nLCAnICcpICsgJyBsYW5ndWFnZS0nICsgbGFuZ3VhZ2U7XG5cdFxuXHRcdFx0Ly8gU2V0IGxhbmd1YWdlIG9uIHRoZSBwYXJlbnQsIGZvciBzdHlsaW5nXG5cdFx0XHRwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG5cdFxuXHRcdFx0aWYgKC9wcmUvaS50ZXN0KHBhcmVudC5ub2RlTmFtZSkpIHtcblx0XHRcdFx0cGFyZW50LmNsYXNzTmFtZSA9IHBhcmVudC5jbGFzc05hbWUucmVwbGFjZShsYW5nLCAnJykucmVwbGFjZSgvXFxzKy9nLCAnICcpICsgJyBsYW5ndWFnZS0nICsgbGFuZ3VhZ2U7XG5cdFx0XHR9XG5cdFxuXHRcdFx0dmFyIGNvZGUgPSBlbGVtZW50LnRleHRDb250ZW50O1xuXHRcblx0XHRcdHZhciBlbnYgPSB7XG5cdFx0XHRcdGVsZW1lbnQ6IGVsZW1lbnQsXG5cdFx0XHRcdGxhbmd1YWdlOiBsYW5ndWFnZSxcblx0XHRcdFx0Z3JhbW1hcjogZ3JhbW1hcixcblx0XHRcdFx0Y29kZTogY29kZVxuXHRcdFx0fTtcblx0XG5cdFx0XHRfLmhvb2tzLnJ1bignYmVmb3JlLXNhbml0eS1jaGVjaycsIGVudik7XG5cdFxuXHRcdFx0aWYgKCFlbnYuY29kZSB8fCAhZW52LmdyYW1tYXIpIHtcblx0XHRcdFx0Xy5ob29rcy5ydW4oJ2NvbXBsZXRlJywgZW52KTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcblx0XHRcdF8uaG9va3MucnVuKCdiZWZvcmUtaGlnaGxpZ2h0JywgZW52KTtcblx0XG5cdFx0XHRpZiAoYXN5bmMgJiYgX3NlbGYuV29ya2VyKSB7XG5cdFx0XHRcdHZhciB3b3JrZXIgPSBuZXcgV29ya2VyKF8uZmlsZW5hbWUpO1xuXHRcblx0XHRcdFx0d29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2dCkge1xuXHRcdFx0XHRcdGVudi5oaWdobGlnaHRlZENvZGUgPSBldnQuZGF0YTtcblx0XG5cdFx0XHRcdFx0Xy5ob29rcy5ydW4oJ2JlZm9yZS1pbnNlcnQnLCBlbnYpO1xuXHRcblx0XHRcdFx0XHRlbnYuZWxlbWVudC5pbm5lckhUTUwgPSBlbnYuaGlnaGxpZ2h0ZWRDb2RlO1xuXHRcblx0XHRcdFx0XHRjYWxsYmFjayAmJiBjYWxsYmFjay5jYWxsKGVudi5lbGVtZW50KTtcblx0XHRcdFx0XHRfLmhvb2tzLnJ1bignYWZ0ZXItaGlnaGxpZ2h0JywgZW52KTtcblx0XHRcdFx0XHRfLmhvb2tzLnJ1bignY29tcGxldGUnLCBlbnYpO1xuXHRcdFx0XHR9O1xuXHRcblx0XHRcdFx0d29ya2VyLnBvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0XHRsYW5ndWFnZTogZW52Lmxhbmd1YWdlLFxuXHRcdFx0XHRcdGNvZGU6IGVudi5jb2RlLFxuXHRcdFx0XHRcdGltbWVkaWF0ZUNsb3NlOiB0cnVlXG5cdFx0XHRcdH0pKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRlbnYuaGlnaGxpZ2h0ZWRDb2RlID0gXy5oaWdobGlnaHQoZW52LmNvZGUsIGVudi5ncmFtbWFyLCBlbnYubGFuZ3VhZ2UpO1xuXHRcblx0XHRcdFx0Xy5ob29rcy5ydW4oJ2JlZm9yZS1pbnNlcnQnLCBlbnYpO1xuXHRcblx0XHRcdFx0ZW52LmVsZW1lbnQuaW5uZXJIVE1MID0gZW52LmhpZ2hsaWdodGVkQ29kZTtcblx0XG5cdFx0XHRcdGNhbGxiYWNrICYmIGNhbGxiYWNrLmNhbGwoZWxlbWVudCk7XG5cdFxuXHRcdFx0XHRfLmhvb2tzLnJ1bignYWZ0ZXItaGlnaGxpZ2h0JywgZW52KTtcblx0XHRcdFx0Xy5ob29rcy5ydW4oJ2NvbXBsZXRlJywgZW52KTtcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRoaWdobGlnaHQ6IGZ1bmN0aW9uICh0ZXh0LCBncmFtbWFyLCBsYW5ndWFnZSkge1xuXHRcdFx0dmFyIHRva2VucyA9IF8udG9rZW5pemUodGV4dCwgZ3JhbW1hcik7XG5cdFx0XHRyZXR1cm4gVG9rZW4uc3RyaW5naWZ5KF8udXRpbC5lbmNvZGUodG9rZW5zKSwgbGFuZ3VhZ2UpO1xuXHRcdH0sXG5cdFxuXHRcdHRva2VuaXplOiBmdW5jdGlvbih0ZXh0LCBncmFtbWFyLCBsYW5ndWFnZSkge1xuXHRcdFx0dmFyIFRva2VuID0gXy5Ub2tlbjtcblx0XG5cdFx0XHR2YXIgc3RyYXJyID0gW3RleHRdO1xuXHRcblx0XHRcdHZhciByZXN0ID0gZ3JhbW1hci5yZXN0O1xuXHRcblx0XHRcdGlmIChyZXN0KSB7XG5cdFx0XHRcdGZvciAodmFyIHRva2VuIGluIHJlc3QpIHtcblx0XHRcdFx0XHRncmFtbWFyW3Rva2VuXSA9IHJlc3RbdG9rZW5dO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRkZWxldGUgZ3JhbW1hci5yZXN0O1xuXHRcdFx0fVxuXHRcblx0XHRcdHRva2VubG9vcDogZm9yICh2YXIgdG9rZW4gaW4gZ3JhbW1hcikge1xuXHRcdFx0XHRpZighZ3JhbW1hci5oYXNPd25Qcm9wZXJ0eSh0b2tlbikgfHwgIWdyYW1tYXJbdG9rZW5dKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHZhciBwYXR0ZXJucyA9IGdyYW1tYXJbdG9rZW5dO1xuXHRcdFx0XHRwYXR0ZXJucyA9IChfLnV0aWwudHlwZShwYXR0ZXJucykgPT09IFwiQXJyYXlcIikgPyBwYXR0ZXJucyA6IFtwYXR0ZXJuc107XG5cdFxuXHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IHBhdHRlcm5zLmxlbmd0aDsgKytqKSB7XG5cdFx0XHRcdFx0dmFyIHBhdHRlcm4gPSBwYXR0ZXJuc1tqXSxcblx0XHRcdFx0XHRcdGluc2lkZSA9IHBhdHRlcm4uaW5zaWRlLFxuXHRcdFx0XHRcdFx0bG9va2JlaGluZCA9ICEhcGF0dGVybi5sb29rYmVoaW5kLFxuXHRcdFx0XHRcdFx0Z3JlZWR5ID0gISFwYXR0ZXJuLmdyZWVkeSxcblx0XHRcdFx0XHRcdGxvb2tiZWhpbmRMZW5ndGggPSAwLFxuXHRcdFx0XHRcdFx0YWxpYXMgPSBwYXR0ZXJuLmFsaWFzO1xuXHRcblx0XHRcdFx0XHRwYXR0ZXJuID0gcGF0dGVybi5wYXR0ZXJuIHx8IHBhdHRlcm47XG5cdFxuXHRcdFx0XHRcdGZvciAodmFyIGk9MDsgaTxzdHJhcnIubGVuZ3RoOyBpKyspIHsgLy8gRG9u4oCZdCBjYWNoZSBsZW5ndGggYXMgaXQgY2hhbmdlcyBkdXJpbmcgdGhlIGxvb3Bcblx0XG5cdFx0XHRcdFx0XHR2YXIgc3RyID0gc3RyYXJyW2ldO1xuXHRcblx0XHRcdFx0XHRcdGlmIChzdHJhcnIubGVuZ3RoID4gdGV4dC5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0Ly8gU29tZXRoaW5nIHdlbnQgdGVycmlibHkgd3JvbmcsIEFCT1JULCBBQk9SVCFcblx0XHRcdFx0XHRcdFx0YnJlYWsgdG9rZW5sb29wO1xuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdGlmIChzdHIgaW5zdGFuY2VvZiBUb2tlbikge1xuXHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRwYXR0ZXJuLmxhc3RJbmRleCA9IDA7XG5cdFxuXHRcdFx0XHRcdFx0dmFyIG1hdGNoID0gcGF0dGVybi5leGVjKHN0ciksXG5cdFx0XHRcdFx0XHQgICAgZGVsTnVtID0gMTtcblx0XG5cdFx0XHRcdFx0XHQvLyBHcmVlZHkgcGF0dGVybnMgY2FuIG92ZXJyaWRlL3JlbW92ZSB1cCB0byB0d28gcHJldmlvdXNseSBtYXRjaGVkIHRva2Vuc1xuXHRcdFx0XHRcdFx0aWYgKCFtYXRjaCAmJiBncmVlZHkgJiYgaSAhPSBzdHJhcnIubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRcdFx0XHQvLyBSZWNvbnN0cnVjdCB0aGUgb3JpZ2luYWwgdGV4dCB1c2luZyB0aGUgbmV4dCB0d28gdG9rZW5zXG5cdFx0XHRcdFx0XHRcdHZhciBuZXh0VG9rZW4gPSBzdHJhcnJbaSArIDFdLm1hdGNoZWRTdHIgfHwgc3RyYXJyW2kgKyAxXSxcblx0XHRcdFx0XHRcdFx0ICAgIGNvbWJTdHIgPSBzdHIgKyBuZXh0VG9rZW47XG5cdFxuXHRcdFx0XHRcdFx0XHRpZiAoaSA8IHN0cmFyci5sZW5ndGggLSAyKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29tYlN0ciArPSBzdHJhcnJbaSArIDJdLm1hdGNoZWRTdHIgfHwgc3RyYXJyW2kgKyAyXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdFx0Ly8gVHJ5IHRoZSBwYXR0ZXJuIGFnYWluIG9uIHRoZSByZWNvbnN0cnVjdGVkIHRleHRcblx0XHRcdFx0XHRcdFx0cGF0dGVybi5sYXN0SW5kZXggPSAwO1xuXHRcdFx0XHRcdFx0XHRtYXRjaCA9IHBhdHRlcm4uZXhlYyhjb21iU3RyKTtcblx0XHRcdFx0XHRcdFx0aWYgKCFtYXRjaCkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0XHR2YXIgZnJvbSA9IG1hdGNoLmluZGV4ICsgKGxvb2tiZWhpbmQgPyBtYXRjaFsxXS5sZW5ndGggOiAwKTtcblx0XHRcdFx0XHRcdFx0Ly8gVG8gYmUgYSB2YWxpZCBjYW5kaWRhdGUsIHRoZSBuZXcgbWF0Y2ggaGFzIHRvIHN0YXJ0IGluc2lkZSBvZiBzdHJcblx0XHRcdFx0XHRcdFx0aWYgKGZyb20gPj0gc3RyLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHZhciB0byA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoLFxuXHRcdFx0XHRcdFx0XHQgICAgbGVuID0gc3RyLmxlbmd0aCArIG5leHRUb2tlbi5sZW5ndGg7XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyBOdW1iZXIgb2YgdG9rZW5zIHRvIGRlbGV0ZSBhbmQgcmVwbGFjZSB3aXRoIHRoZSBuZXcgbWF0Y2hcblx0XHRcdFx0XHRcdFx0ZGVsTnVtID0gMztcblx0XG5cdFx0XHRcdFx0XHRcdGlmICh0byA8PSBsZW4pIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoc3RyYXJyW2kgKyAxXS5ncmVlZHkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRkZWxOdW0gPSAyO1xuXHRcdFx0XHRcdFx0XHRcdGNvbWJTdHIgPSBjb21iU3RyLnNsaWNlKDAsIGxlbik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0c3RyID0gY29tYlN0cjtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRpZiAoIW1hdGNoKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdGlmKGxvb2tiZWhpbmQpIHtcblx0XHRcdFx0XHRcdFx0bG9va2JlaGluZExlbmd0aCA9IG1hdGNoWzFdLmxlbmd0aDtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHR2YXIgZnJvbSA9IG1hdGNoLmluZGV4ICsgbG9va2JlaGluZExlbmd0aCxcblx0XHRcdFx0XHRcdCAgICBtYXRjaCA9IG1hdGNoWzBdLnNsaWNlKGxvb2tiZWhpbmRMZW5ndGgpLFxuXHRcdFx0XHRcdFx0ICAgIHRvID0gZnJvbSArIG1hdGNoLmxlbmd0aCxcblx0XHRcdFx0XHRcdCAgICBiZWZvcmUgPSBzdHIuc2xpY2UoMCwgZnJvbSksXG5cdFx0XHRcdFx0XHQgICAgYWZ0ZXIgPSBzdHIuc2xpY2UodG8pO1xuXHRcblx0XHRcdFx0XHRcdHZhciBhcmdzID0gW2ksIGRlbE51bV07XG5cdFxuXHRcdFx0XHRcdFx0aWYgKGJlZm9yZSkge1xuXHRcdFx0XHRcdFx0XHRhcmdzLnB1c2goYmVmb3JlKTtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHR2YXIgd3JhcHBlZCA9IG5ldyBUb2tlbih0b2tlbiwgaW5zaWRlPyBfLnRva2VuaXplKG1hdGNoLCBpbnNpZGUpIDogbWF0Y2gsIGFsaWFzLCBtYXRjaCwgZ3JlZWR5KTtcblx0XG5cdFx0XHRcdFx0XHRhcmdzLnB1c2god3JhcHBlZCk7XG5cdFxuXHRcdFx0XHRcdFx0aWYgKGFmdGVyKSB7XG5cdFx0XHRcdFx0XHRcdGFyZ3MucHVzaChhZnRlcik7XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0QXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShzdHJhcnIsIGFyZ3MpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiBzdHJhcnI7XG5cdFx0fSxcblx0XG5cdFx0aG9va3M6IHtcblx0XHRcdGFsbDoge30sXG5cdFxuXHRcdFx0YWRkOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2spIHtcblx0XHRcdFx0dmFyIGhvb2tzID0gXy5ob29rcy5hbGw7XG5cdFxuXHRcdFx0XHRob29rc1tuYW1lXSA9IGhvb2tzW25hbWVdIHx8IFtdO1xuXHRcblx0XHRcdFx0aG9va3NbbmFtZV0ucHVzaChjYWxsYmFjayk7XG5cdFx0XHR9LFxuXHRcblx0XHRcdHJ1bjogZnVuY3Rpb24gKG5hbWUsIGVudikge1xuXHRcdFx0XHR2YXIgY2FsbGJhY2tzID0gXy5ob29rcy5hbGxbbmFtZV07XG5cdFxuXHRcdFx0XHRpZiAoIWNhbGxiYWNrcyB8fCAhY2FsbGJhY2tzLmxlbmd0aCkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Zm9yICh2YXIgaT0wLCBjYWxsYmFjazsgY2FsbGJhY2sgPSBjYWxsYmFja3NbaSsrXTspIHtcblx0XHRcdFx0XHRjYWxsYmFjayhlbnYpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRcblx0dmFyIFRva2VuID0gXy5Ub2tlbiA9IGZ1bmN0aW9uKHR5cGUsIGNvbnRlbnQsIGFsaWFzLCBtYXRjaGVkU3RyLCBncmVlZHkpIHtcblx0XHR0aGlzLnR5cGUgPSB0eXBlO1xuXHRcdHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG5cdFx0dGhpcy5hbGlhcyA9IGFsaWFzO1xuXHRcdC8vIENvcHkgb2YgdGhlIGZ1bGwgc3RyaW5nIHRoaXMgdG9rZW4gd2FzIGNyZWF0ZWQgZnJvbVxuXHRcdHRoaXMubWF0Y2hlZFN0ciA9IG1hdGNoZWRTdHIgfHwgbnVsbDtcblx0XHR0aGlzLmdyZWVkeSA9ICEhZ3JlZWR5O1xuXHR9O1xuXHRcblx0VG9rZW4uc3RyaW5naWZ5ID0gZnVuY3Rpb24obywgbGFuZ3VhZ2UsIHBhcmVudCkge1xuXHRcdGlmICh0eXBlb2YgbyA9PSAnc3RyaW5nJykge1xuXHRcdFx0cmV0dXJuIG87XG5cdFx0fVxuXHRcblx0XHRpZiAoXy51dGlsLnR5cGUobykgPT09ICdBcnJheScpIHtcblx0XHRcdHJldHVybiBvLm1hcChmdW5jdGlvbihlbGVtZW50KSB7XG5cdFx0XHRcdHJldHVybiBUb2tlbi5zdHJpbmdpZnkoZWxlbWVudCwgbGFuZ3VhZ2UsIG8pO1xuXHRcdFx0fSkuam9pbignJyk7XG5cdFx0fVxuXHRcblx0XHR2YXIgZW52ID0ge1xuXHRcdFx0dHlwZTogby50eXBlLFxuXHRcdFx0Y29udGVudDogVG9rZW4uc3RyaW5naWZ5KG8uY29udGVudCwgbGFuZ3VhZ2UsIHBhcmVudCksXG5cdFx0XHR0YWc6ICdzcGFuJyxcblx0XHRcdGNsYXNzZXM6IFsndG9rZW4nLCBvLnR5cGVdLFxuXHRcdFx0YXR0cmlidXRlczoge30sXG5cdFx0XHRsYW5ndWFnZTogbGFuZ3VhZ2UsXG5cdFx0XHRwYXJlbnQ6IHBhcmVudFxuXHRcdH07XG5cdFxuXHRcdGlmIChlbnYudHlwZSA9PSAnY29tbWVudCcpIHtcblx0XHRcdGVudi5hdHRyaWJ1dGVzWydzcGVsbGNoZWNrJ10gPSAndHJ1ZSc7XG5cdFx0fVxuXHRcblx0XHRpZiAoby5hbGlhcykge1xuXHRcdFx0dmFyIGFsaWFzZXMgPSBfLnV0aWwudHlwZShvLmFsaWFzKSA9PT0gJ0FycmF5JyA/IG8uYWxpYXMgOiBbby5hbGlhc107XG5cdFx0XHRBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShlbnYuY2xhc3NlcywgYWxpYXNlcyk7XG5cdFx0fVxuXHRcblx0XHRfLmhvb2tzLnJ1bignd3JhcCcsIGVudik7XG5cdFxuXHRcdHZhciBhdHRyaWJ1dGVzID0gJyc7XG5cdFxuXHRcdGZvciAodmFyIG5hbWUgaW4gZW52LmF0dHJpYnV0ZXMpIHtcblx0XHRcdGF0dHJpYnV0ZXMgKz0gKGF0dHJpYnV0ZXMgPyAnICcgOiAnJykgKyBuYW1lICsgJz1cIicgKyAoZW52LmF0dHJpYnV0ZXNbbmFtZV0gfHwgJycpICsgJ1wiJztcblx0XHR9XG5cdFxuXHRcdHJldHVybiAnPCcgKyBlbnYudGFnICsgJyBjbGFzcz1cIicgKyBlbnYuY2xhc3Nlcy5qb2luKCcgJykgKyAnXCIgJyArIGF0dHJpYnV0ZXMgKyAnPicgKyBlbnYuY29udGVudCArICc8LycgKyBlbnYudGFnICsgJz4nO1xuXHRcblx0fTtcblx0XG5cdGlmICghX3NlbGYuZG9jdW1lbnQpIHtcblx0XHRpZiAoIV9zZWxmLmFkZEV2ZW50TGlzdGVuZXIpIHtcblx0XHRcdC8vIGluIE5vZGUuanNcblx0XHRcdHJldHVybiBfc2VsZi5QcmlzbTtcblx0XHR9XG5cdCBcdC8vIEluIHdvcmtlclxuXHRcdF9zZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihldnQpIHtcblx0XHRcdHZhciBtZXNzYWdlID0gSlNPTi5wYXJzZShldnQuZGF0YSksXG5cdFx0XHQgICAgbGFuZyA9IG1lc3NhZ2UubGFuZ3VhZ2UsXG5cdFx0XHQgICAgY29kZSA9IG1lc3NhZ2UuY29kZSxcblx0XHRcdCAgICBpbW1lZGlhdGVDbG9zZSA9IG1lc3NhZ2UuaW1tZWRpYXRlQ2xvc2U7XG5cdFxuXHRcdFx0X3NlbGYucG9zdE1lc3NhZ2UoXy5oaWdobGlnaHQoY29kZSwgXy5sYW5ndWFnZXNbbGFuZ10sIGxhbmcpKTtcblx0XHRcdGlmIChpbW1lZGlhdGVDbG9zZSkge1xuXHRcdFx0XHRfc2VsZi5jbG9zZSgpO1xuXHRcdFx0fVxuXHRcdH0sIGZhbHNlKTtcblx0XG5cdFx0cmV0dXJuIF9zZWxmLlByaXNtO1xuXHR9XG5cdFxuXHQvL0dldCBjdXJyZW50IHNjcmlwdCBhbmQgaGlnaGxpZ2h0XG5cdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0IHx8IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIikpLnBvcCgpO1xuXHRcblx0aWYgKHNjcmlwdCkge1xuXHRcdF8uZmlsZW5hbWUgPSBzY3JpcHQuc3JjO1xuXHRcblx0XHRpZiAoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAmJiAhc2NyaXB0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1tYW51YWwnKSkge1xuXHRcdFx0aWYoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gXCJsb2FkaW5nXCIpIHtcblx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKF8uaGlnaGxpZ2h0QWxsLCAwKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgXy5oaWdobGlnaHRBbGwpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRcblx0cmV0dXJuIF9zZWxmLlByaXNtO1xuXHRcblx0fSkoKTtcblx0XG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gUHJpc207XG5cdH1cblx0XG5cdC8vIGhhY2sgZm9yIGNvbXBvbmVudHMgdG8gd29yayBjb3JyZWN0bHkgaW4gbm9kZS5qc1xuXHRpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRnbG9iYWwuUHJpc20gPSBQcmlzbTtcblx0fVxuXHRcblx0XG5cdC8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICBCZWdpbiBwcmlzbS1tYXJrdXAuanNcblx0KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXHRcblx0UHJpc20ubGFuZ3VhZ2VzLm1hcmt1cCA9IHtcblx0XHQnY29tbWVudCc6IC88IS0tW1xcd1xcV10qPy0tPi8sXG5cdFx0J3Byb2xvZyc6IC88XFw/W1xcd1xcV10rP1xcPz4vLFxuXHRcdCdkb2N0eXBlJzogLzwhRE9DVFlQRVtcXHdcXFddKz8+Lyxcblx0XHQnY2RhdGEnOiAvPCFcXFtDREFUQVxcW1tcXHdcXFddKj9dXT4vaSxcblx0XHQndGFnJzoge1xuXHRcdFx0cGF0dGVybjogLzxcXC8/KD8hXFxkKVteXFxzPlxcLz0uJDxdKyg/OlxccytbXlxccz5cXC89XSsoPzo9KD86KFwifCcpKD86XFxcXFxcMXxcXFxcPyg/IVxcMSlbXFx3XFxXXSkqXFwxfFteXFxzJ1wiPj1dKykpPykqXFxzKlxcLz8+L2ksXG5cdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0J3RhZyc6IHtcblx0XHRcdFx0XHRwYXR0ZXJuOiAvXjxcXC8/W15cXHM+XFwvXSsvaSxcblx0XHRcdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0XHRcdCdwdW5jdHVhdGlvbic6IC9ePFxcLz8vLFxuXHRcdFx0XHRcdFx0J25hbWVzcGFjZSc6IC9eW15cXHM+XFwvOl0rOi9cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdCdhdHRyLXZhbHVlJzoge1xuXHRcdFx0XHRcdHBhdHRlcm46IC89KD86KCd8XCIpW1xcd1xcV10qPyhcXDEpfFteXFxzPl0rKS9pLFxuXHRcdFx0XHRcdGluc2lkZToge1xuXHRcdFx0XHRcdFx0J3B1bmN0dWF0aW9uJzogL1s9PlwiJ10vXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHQncHVuY3R1YXRpb24nOiAvXFwvPz4vLFxuXHRcdFx0XHQnYXR0ci1uYW1lJzoge1xuXHRcdFx0XHRcdHBhdHRlcm46IC9bXlxccz5cXC9dKy8sXG5cdFx0XHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdFx0XHQnbmFtZXNwYWNlJzogL15bXlxccz5cXC86XSs6L1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcblx0XHRcdH1cblx0XHR9LFxuXHRcdCdlbnRpdHknOiAvJiM/W1xcZGEtel17MSw4fTsvaVxuXHR9O1xuXHRcblx0Ly8gUGx1Z2luIHRvIG1ha2UgZW50aXR5IHRpdGxlIHNob3cgdGhlIHJlYWwgZW50aXR5LCBpZGVhIGJ5IFJvbWFuIEtvbWFyb3Zcblx0UHJpc20uaG9va3MuYWRkKCd3cmFwJywgZnVuY3Rpb24oZW52KSB7XG5cdFxuXHRcdGlmIChlbnYudHlwZSA9PT0gJ2VudGl0eScpIHtcblx0XHRcdGVudi5hdHRyaWJ1dGVzWyd0aXRsZSddID0gZW52LmNvbnRlbnQucmVwbGFjZSgvJmFtcDsvLCAnJicpO1xuXHRcdH1cblx0fSk7XG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMueG1sID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblx0UHJpc20ubGFuZ3VhZ2VzLmh0bWwgPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwO1xuXHRQcmlzbS5sYW5ndWFnZXMubWF0aG1sID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblx0UHJpc20ubGFuZ3VhZ2VzLnN2ZyA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5cdFxuXHRcblx0LyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXHQgICAgIEJlZ2luIHByaXNtLWNzcy5qc1xuXHQqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMuY3NzID0ge1xuXHRcdCdjb21tZW50JzogL1xcL1xcKltcXHdcXFddKj9cXCpcXC8vLFxuXHRcdCdhdHJ1bGUnOiB7XG5cdFx0XHRwYXR0ZXJuOiAvQFtcXHctXSs/Lio/KDt8KD89XFxzKlxceykpL2ksXG5cdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0J3J1bGUnOiAvQFtcXHctXSsvXG5cdFx0XHRcdC8vIFNlZSByZXN0IGJlbG93XG5cdFx0XHR9XG5cdFx0fSxcblx0XHQndXJsJzogL3VybFxcKCg/OihbXCInXSkoXFxcXCg/OlxcclxcbnxbXFx3XFxXXSl8KD8hXFwxKVteXFxcXFxcclxcbl0pKlxcMXwuKj8pXFwpL2ksXG5cdFx0J3NlbGVjdG9yJzogL1teXFx7XFx9XFxzXVteXFx7XFx9O10qPyg/PVxccypcXHspLyxcblx0XHQnc3RyaW5nJzogLyhcInwnKShcXFxcKD86XFxyXFxufFtcXHdcXFddKXwoPyFcXDEpW15cXFxcXFxyXFxuXSkqXFwxLyxcblx0XHQncHJvcGVydHknOiAvKFxcYnxcXEIpW1xcdy1dKyg/PVxccyo6KS9pLFxuXHRcdCdpbXBvcnRhbnQnOiAvXFxCIWltcG9ydGFudFxcYi9pLFxuXHRcdCdmdW5jdGlvbic6IC9bLWEtejAtOV0rKD89XFwoKS9pLFxuXHRcdCdwdW5jdHVhdGlvbic6IC9bKCl7fTs6XS9cblx0fTtcblx0XG5cdFByaXNtLmxhbmd1YWdlcy5jc3NbJ2F0cnVsZSddLmluc2lkZS5yZXN0ID0gUHJpc20udXRpbC5jbG9uZShQcmlzbS5sYW5ndWFnZXMuY3NzKTtcblx0XG5cdGlmIChQcmlzbS5sYW5ndWFnZXMubWFya3VwKSB7XG5cdFx0UHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnbWFya3VwJywgJ3RhZycsIHtcblx0XHRcdCdzdHlsZSc6IHtcblx0XHRcdFx0cGF0dGVybjogLyg8c3R5bGVbXFx3XFxXXSo/PilbXFx3XFxXXSo/KD89PFxcL3N0eWxlPikvaSxcblx0XHRcdFx0bG9va2JlaGluZDogdHJ1ZSxcblx0XHRcdFx0aW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuY3NzLFxuXHRcdFx0XHRhbGlhczogJ2xhbmd1YWdlLWNzcydcblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHRQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdpbnNpZGUnLCAnYXR0ci12YWx1ZScsIHtcblx0XHRcdCdzdHlsZS1hdHRyJzoge1xuXHRcdFx0XHRwYXR0ZXJuOiAvXFxzKnN0eWxlPShcInwnKS4qP1xcMS9pLFxuXHRcdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0XHQnYXR0ci1uYW1lJzoge1xuXHRcdFx0XHRcdFx0cGF0dGVybjogL15cXHMqc3R5bGUvaSxcblx0XHRcdFx0XHRcdGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cC50YWcuaW5zaWRlXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQncHVuY3R1YXRpb24nOiAvXlxccyo9XFxzKlsnXCJdfFsnXCJdXFxzKiQvLFxuXHRcdFx0XHRcdCdhdHRyLXZhbHVlJzoge1xuXHRcdFx0XHRcdFx0cGF0dGVybjogLy4rL2ksXG5cdFx0XHRcdFx0XHRpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5jc3Ncblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFsaWFzOiAnbGFuZ3VhZ2UtY3NzJ1xuXHRcdFx0fVxuXHRcdH0sIFByaXNtLmxhbmd1YWdlcy5tYXJrdXAudGFnKTtcblx0fVxuXHRcblx0LyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXHQgICAgIEJlZ2luIHByaXNtLWNsaWtlLmpzXG5cdCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblx0XG5cdFByaXNtLmxhbmd1YWdlcy5jbGlrZSA9IHtcblx0XHQnY29tbWVudCc6IFtcblx0XHRcdHtcblx0XHRcdFx0cGF0dGVybjogLyhefFteXFxcXF0pXFwvXFwqW1xcd1xcV10qP1xcKlxcLy8sXG5cdFx0XHRcdGxvb2tiZWhpbmQ6IHRydWVcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHBhdHRlcm46IC8oXnxbXlxcXFw6XSlcXC9cXC8uKi8sXG5cdFx0XHRcdGxvb2tiZWhpbmQ6IHRydWVcblx0XHRcdH1cblx0XHRdLFxuXHRcdCdzdHJpbmcnOiB7XG5cdFx0XHRwYXR0ZXJuOiAvKFtcIiddKShcXFxcKD86XFxyXFxufFtcXHNcXFNdKXwoPyFcXDEpW15cXFxcXFxyXFxuXSkqXFwxLyxcblx0XHRcdGdyZWVkeTogdHJ1ZVxuXHRcdH0sXG5cdFx0J2NsYXNzLW5hbWUnOiB7XG5cdFx0XHRwYXR0ZXJuOiAvKCg/OlxcYig/OmNsYXNzfGludGVyZmFjZXxleHRlbmRzfGltcGxlbWVudHN8dHJhaXR8aW5zdGFuY2VvZnxuZXcpXFxzKyl8KD86Y2F0Y2hcXHMrXFwoKSlbYS16MC05X1xcLlxcXFxdKy9pLFxuXHRcdFx0bG9va2JlaGluZDogdHJ1ZSxcblx0XHRcdGluc2lkZToge1xuXHRcdFx0XHRwdW5jdHVhdGlvbjogLyhcXC58XFxcXCkvXG5cdFx0XHR9XG5cdFx0fSxcblx0XHQna2V5d29yZCc6IC9cXGIoaWZ8ZWxzZXx3aGlsZXxkb3xmb3J8cmV0dXJufGlufGluc3RhbmNlb2Z8ZnVuY3Rpb258bmV3fHRyeXx0aHJvd3xjYXRjaHxmaW5hbGx5fG51bGx8YnJlYWt8Y29udGludWUpXFxiLyxcblx0XHQnYm9vbGVhbic6IC9cXGIodHJ1ZXxmYWxzZSlcXGIvLFxuXHRcdCdmdW5jdGlvbic6IC9bYS16MC05X10rKD89XFwoKS9pLFxuXHRcdCdudW1iZXInOiAvXFxiLT8oPzoweFtcXGRhLWZdK3xcXGQqXFwuP1xcZCsoPzplWystXT9cXGQrKT8pXFxiL2ksXG5cdFx0J29wZXJhdG9yJzogLy0tP3xcXCtcXCs/fCE9Pz0/fDw9P3w+PT98PT0/PT98JiY/fFxcfFxcfD98XFw/fFxcKnxcXC98fnxcXF58JS8sXG5cdFx0J3B1bmN0dWF0aW9uJzogL1t7fVtcXF07KCksLjpdL1xuXHR9O1xuXHRcblx0XG5cdC8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICBCZWdpbiBwcmlzbS1qYXZhc2NyaXB0LmpzXG5cdCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblx0XG5cdFByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0ID0gUHJpc20ubGFuZ3VhZ2VzLmV4dGVuZCgnY2xpa2UnLCB7XG5cdFx0J2tleXdvcmQnOiAvXFxiKGFzfGFzeW5jfGF3YWl0fGJyZWFrfGNhc2V8Y2F0Y2h8Y2xhc3N8Y29uc3R8Y29udGludWV8ZGVidWdnZXJ8ZGVmYXVsdHxkZWxldGV8ZG98ZWxzZXxlbnVtfGV4cG9ydHxleHRlbmRzfGZpbmFsbHl8Zm9yfGZyb218ZnVuY3Rpb258Z2V0fGlmfGltcGxlbWVudHN8aW1wb3J0fGlufGluc3RhbmNlb2Z8aW50ZXJmYWNlfGxldHxuZXd8bnVsbHxvZnxwYWNrYWdlfHByaXZhdGV8cHJvdGVjdGVkfHB1YmxpY3xyZXR1cm58c2V0fHN0YXRpY3xzdXBlcnxzd2l0Y2h8dGhpc3x0aHJvd3x0cnl8dHlwZW9mfHZhcnx2b2lkfHdoaWxlfHdpdGh8eWllbGQpXFxiLyxcblx0XHQnbnVtYmVyJzogL1xcYi0/KDB4W1xcZEEtRmEtZl0rfDBiWzAxXSt8MG9bMC03XSt8XFxkKlxcLj9cXGQrKFtFZV1bKy1dP1xcZCspP3xOYU58SW5maW5pdHkpXFxiLyxcblx0XHQvLyBBbGxvdyBmb3IgYWxsIG5vbi1BU0NJSSBjaGFyYWN0ZXJzIChTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjAwODQ0NClcblx0XHQnZnVuY3Rpb24nOiAvW18kYS16QS1aXFx4QTAtXFx1RkZGRl1bXyRhLXpBLVowLTlcXHhBMC1cXHVGRkZGXSooPz1cXCgpL2lcblx0fSk7XG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdqYXZhc2NyaXB0JywgJ2tleXdvcmQnLCB7XG5cdFx0J3JlZ2V4Jzoge1xuXHRcdFx0cGF0dGVybjogLyhefFteL10pXFwvKD8hXFwvKShcXFsuKz9dfFxcXFwufFteL1xcXFxcXHJcXG5dKStcXC9bZ2lteXVdezAsNX0oPz1cXHMqKCR8W1xcclxcbiwuO30pXSkpLyxcblx0XHRcdGxvb2tiZWhpbmQ6IHRydWUsXG5cdFx0XHRncmVlZHk6IHRydWVcblx0XHR9XG5cdH0pO1xuXHRcblx0UHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnamF2YXNjcmlwdCcsICdzdHJpbmcnLCB7XG5cdFx0J3RlbXBsYXRlLXN0cmluZyc6IHtcblx0XHRcdHBhdHRlcm46IC9gKD86XFxcXFxcXFx8XFxcXD9bXlxcXFxdKSo/YC8sXG5cdFx0XHRncmVlZHk6IHRydWUsXG5cdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0J2ludGVycG9sYXRpb24nOiB7XG5cdFx0XHRcdFx0cGF0dGVybjogL1xcJFxce1tefV0rXFx9Lyxcblx0XHRcdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0XHRcdCdpbnRlcnBvbGF0aW9uLXB1bmN0dWF0aW9uJzoge1xuXHRcdFx0XHRcdFx0XHRwYXR0ZXJuOiAvXlxcJFxce3xcXH0kLyxcblx0XHRcdFx0XHRcdFx0YWxpYXM6ICdwdW5jdHVhdGlvbidcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyZXN0OiBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0J3N0cmluZyc6IC9bXFxzXFxTXSsvXG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblx0XG5cdGlmIChQcmlzbS5sYW5ndWFnZXMubWFya3VwKSB7XG5cdFx0UHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnbWFya3VwJywgJ3RhZycsIHtcblx0XHRcdCdzY3JpcHQnOiB7XG5cdFx0XHRcdHBhdHRlcm46IC8oPHNjcmlwdFtcXHdcXFddKj8+KVtcXHdcXFddKj8oPz08XFwvc2NyaXB0PikvaSxcblx0XHRcdFx0bG9va2JlaGluZDogdHJ1ZSxcblx0XHRcdFx0aW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdCxcblx0XHRcdFx0YWxpYXM6ICdsYW5ndWFnZS1qYXZhc2NyaXB0J1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMuanMgPSBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdDtcblx0XG5cdC8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICBCZWdpbiBwcmlzbS1maWxlLWhpZ2hsaWdodC5qc1xuXHQqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cdFxuXHQoZnVuY3Rpb24gKCkge1xuXHRcdGlmICh0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgfHwgIXNlbGYuUHJpc20gfHwgIXNlbGYuZG9jdW1lbnQgfHwgIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFxuXHRcdHNlbGYuUHJpc20uZmlsZUhpZ2hsaWdodCA9IGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdHZhciBFeHRlbnNpb25zID0ge1xuXHRcdFx0XHQnanMnOiAnamF2YXNjcmlwdCcsXG5cdFx0XHRcdCdweSc6ICdweXRob24nLFxuXHRcdFx0XHQncmInOiAncnVieScsXG5cdFx0XHRcdCdwczEnOiAncG93ZXJzaGVsbCcsXG5cdFx0XHRcdCdwc20xJzogJ3Bvd2Vyc2hlbGwnLFxuXHRcdFx0XHQnc2gnOiAnYmFzaCcsXG5cdFx0XHRcdCdiYXQnOiAnYmF0Y2gnLFxuXHRcdFx0XHQnaCc6ICdjJyxcblx0XHRcdFx0J3RleCc6ICdsYXRleCdcblx0XHRcdH07XG5cdFxuXHRcdFx0aWYoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpIHsgLy8gQ2hlY2sgdG8gcHJldmVudCBlcnJvciBpbiBJRThcblx0XHRcdFx0QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgncHJlW2RhdGEtc3JjXScpKS5mb3JFYWNoKGZ1bmN0aW9uIChwcmUpIHtcblx0XHRcdFx0XHR2YXIgc3JjID0gcHJlLmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKTtcblx0XG5cdFx0XHRcdFx0dmFyIGxhbmd1YWdlLCBwYXJlbnQgPSBwcmU7XG5cdFx0XHRcdFx0dmFyIGxhbmcgPSAvXFxibGFuZyg/OnVhZ2UpPy0oPyFcXCopKFxcdyspXFxiL2k7XG5cdFx0XHRcdFx0d2hpbGUgKHBhcmVudCAmJiAhbGFuZy50ZXN0KHBhcmVudC5jbGFzc05hbWUpKSB7XG5cdFx0XHRcdFx0XHRwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdGlmIChwYXJlbnQpIHtcblx0XHRcdFx0XHRcdGxhbmd1YWdlID0gKHByZS5jbGFzc05hbWUubWF0Y2gobGFuZykgfHwgWywgJyddKVsxXTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdGlmICghbGFuZ3VhZ2UpIHtcblx0XHRcdFx0XHRcdHZhciBleHRlbnNpb24gPSAoc3JjLm1hdGNoKC9cXC4oXFx3KykkLykgfHwgWywgJyddKVsxXTtcblx0XHRcdFx0XHRcdGxhbmd1YWdlID0gRXh0ZW5zaW9uc1tleHRlbnNpb25dIHx8IGV4dGVuc2lvbjtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdHZhciBjb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY29kZScpO1xuXHRcdFx0XHRcdGNvZGUuY2xhc3NOYW1lID0gJ2xhbmd1YWdlLScgKyBsYW5ndWFnZTtcblx0XG5cdFx0XHRcdFx0cHJlLnRleHRDb250ZW50ID0gJyc7XG5cdFxuXHRcdFx0XHRcdGNvZGUudGV4dENvbnRlbnQgPSAnTG9hZGluZ+KApic7XG5cdFxuXHRcdFx0XHRcdHByZS5hcHBlbmRDaGlsZChjb2RlKTtcblx0XG5cdFx0XHRcdFx0dmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcblx0XHRcdFx0XHR4aHIub3BlbignR0VUJywgc3JjLCB0cnVlKTtcblx0XG5cdFx0XHRcdFx0eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdGlmICh4aHIucmVhZHlTdGF0ZSA9PSA0KSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRpZiAoeGhyLnN0YXR1cyA8IDQwMCAmJiB4aHIucmVzcG9uc2VUZXh0KSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29kZS50ZXh0Q29udGVudCA9IHhoci5yZXNwb25zZVRleHQ7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdFByaXNtLmhpZ2hsaWdodEVsZW1lbnQoY29kZSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAoeGhyLnN0YXR1cyA+PSA0MDApIHtcblx0XHRcdFx0XHRcdFx0XHRjb2RlLnRleHRDb250ZW50ID0gJ+KcliBFcnJvciAnICsgeGhyLnN0YXR1cyArICcgd2hpbGUgZmV0Y2hpbmcgZmlsZTogJyArIHhoci5zdGF0dXNUZXh0O1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGNvZGUudGV4dENvbnRlbnQgPSAn4pyWIEVycm9yOiBGaWxlIGRvZXMgbm90IGV4aXN0IG9yIGlzIGVtcHR5Jztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFxuXHRcdFx0XHRcdHhoci5zZW5kKG51bGwpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XG5cdFx0fTtcblx0XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHNlbGYuUHJpc20uZmlsZUhpZ2hsaWdodCk7XG5cdFxuXHR9KSgpO1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogMTYyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPHRhYmxlIGNsYXNzPXNnX2MtYXBpLXRhYmxlPiA8dHI+IDx0aD4gTmFtZSA8L3RoPiA8dGg+IFR5cGUgPC90aD4gPHRoPiBSZXF1aXJlZCA8L3RoPiA8dGg+IERlZmF1bHQgPC90aD4gPHRoPiBEZXNjcmlwdGlvbiA8L3RoPiA8L3RyPiA8dHIgdi1mb3I9XFxcIml0ZW0gaW4gaXRlbXNcXFwiPiA8dGQ+e3tpdGVtLm5hbWV9fTwvdGQ+IDx0ZD57e2l0ZW0udHlwZX19PC90ZD4gPHRkPnt7aXRlbS5pc1JlcXVpcmVkfX08L3RkPiA8dGQ+e3tpdGVtLmRlZmF1bHR9fTwvdGQ+IDx0ZD57e2l0ZW0uZGVzY319PC90ZD4gPC90cj4gPC90YWJsZT4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8bmF2IGNsYXNzPVxcXCJzZ19jLW5hdiBoeV91LWhpZGUgaHlfdS1zaG93QG1kXFxcIj4gPGgyIGNsYXNzPXNnX2MtbmF2X19zZWN0aW9uPkNPTVBPTkVOVFM8L2gyPiA8dWwgY2xhc3M9aHlfby1saXN0IEBjbGljaz1oaWRlTmF2PiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy8nLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IEdldCBTdGFydGVkIDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvYWxlcnQnLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IEFsZXJ0IDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvc3Bpbm5lcicsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gU3Bpbm5lciA8L2E+IDwvbGk+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL3N0ZXAtdHJhY2tlcicsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gU3RlcCBUcmFja2VyIDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvdGFicycsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gVGFicyA8L2E+IDwvbGk+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL292ZXJsYXknLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IE92ZXJsYXkgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9sZWdhbCcsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gTGVnYWwgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9jb2xsYXBzYWJsZS1wYW5lbCcsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gQ29sbGFwc2FibGUgUGFuZWwgPC9hPiA8L2xpPiA8L3VsPiA8aDIgY2xhc3M9c2dfYy1uYXZfX3NlY3Rpb24+RElSRUNUSVZFUzwvaDI+IDx1bCBjbGFzcz1oeV9vLWxpc3Q+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL292ZXJsYXktb3BlbmVyJywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBPdmVybGF5IE9wZW5lciA8L2E+IDwvbGk+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL3NldC1mb2N1cycsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gU2V0IEZvY3VzIDwvYT4gPC9saT4gPC91bD4gPC9uYXY+IFwiO1xuXG4vKioqLyB9LFxuLyogMTY0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGhlYWRlciBjbGFzcz1zZ19jLXNpdGUtaGVhZGVyPiA8ZGl2IGNsYXNzPXNnX2Mtc2l0ZS1oZWFkZXJfX2NvbnRhaW5lcj4gPGJ1dHRvbiBAY2xpY2s9dG9nZ2xlTmF2IGNsYXNzPVxcXCJoeV91LWhpZGVAbWQganMtYWN0aXZlIHNnX2Mtc2l0ZS1oZWFkZXJfX3RvZ2dsZWJ0blxcXCIgdHlwZT1idXR0b24gcm9sZT1idXR0b24+IDxzcGFuIGNsYXNzPVxcXCJcXFwiPjxpIGNsYXNzPVxcXCJoeV9jLWljb24gaHlfYy1pY29uLS1oYW1idXJnZXJcXFwiPjwvaT48L3NwYW4+IDwvYnV0dG9uPiA8YSBocmVmPS8gPiA8aW1nIGNsYXNzPWxvZ28gc3JjPVwiICsgX193ZWJwYWNrX3JlcXVpcmVfXyg4NSkgKyBcIiBhbHQ9TG9nbz4gPC9hPiA8L2Rpdj4gPC9oZWFkZXI+IFwiO1xuXG4vKioqLyB9LFxuLyogMTY1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+QWxlcnQ8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPGFsZXJ0IHR5cGU9ZXJyb3I+VGhpcyBpcyBhbiBlcnJvciBhbGVydC48L2FsZXJ0PiA8YWxlcnQgdHlwZT1pbmZvPlRoaXMgaXMgYW4gaW5mbyBhbGVydC48L2FsZXJ0PiA8YWxlcnQgdHlwZT1zdWNjZXNzPlRoaXMgaXMgYSBzdWNjZXNzIGFsZXJ0LjwvYWxlcnQ+IDxhbGVydCB0eXBlPXN1Y2Nlc3MgOmRpc21pc3NpYmxlPWZhbHNlPlRoaXMgaXMgbm90IGEgZGlzbWlzc2libGUgYWxlcnQuPC9hbGVydD4gPGFsZXJ0IHR5cGU9c3VjY2VzcyA6b24tY2xvc2VkPWRpc21pc3NDYWxsQmFjaz5UaGlzIGlzIGFuIGFsZXJ0IHdpdGggY2FsbGJhY2suPC9hbGVydD4gPGFsZXJ0IHR5cGU9aW5mbyA6dGltZW91dD01MDAwPlRoaXMgYWxlcnQgc2hvdWxkIHRpbWVvdXQgaW4gNSBzZWNvbmRzLjwvYWxlcnQ+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4mbHQ7YWxlcnQgdHlwZT1cXFwiZXJyb3JcXFwiJmd0O1RoaXMgaXMgYW4gZXJyb3IgYWxlcnQuJmx0Oy9hbGVydCZndDtcXG4mbHQ7YWxlcnQgdHlwZT1cXFwiaW5mb1xcXCImZ3Q7VGhpcyBpcyBhbiBpbmZvIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuJmx0O2FsZXJ0IHR5cGU9XFxcInN1Y2Nlc3NcXFwiJmd0O1RoaXMgaXMgYSBzdWNjZXNzIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuJmx0O2FsZXJ0IHR5cGU9XFxcInN1Y2Nlc3NcXFwiIDpkaXNtaXNzaWJsZT1cXFwiZmFsc2VcXFwiJmd0O1RoaXMgaXMgbm90IGEgZGlzbWlzc2libGUgYWxlcnQuJmx0Oy9hbGVydCZndDtcXG4mbHQ7YWxlcnQgdHlwZT1cXFwic3VjY2Vzc1xcXCIgOm9uLWNsb3NlZD1cXFwiZGlzbWlzc0NhbGxCYWNrXFxcIiZndDtUaGlzIGlzIGFuIGFsZXJ0IHdpdGggY2FsbGJhY2suJmx0Oy9hbGVydCZndDtcXG4mbHQ7YWxlcnQgdHlwZT1cXFwic3VjY2Vzc1xcXCIgOnRpbWVvdXQ9XFxcIjUwMDBcXFwiJmd0O1RoaXMgYWxlcnQgc2hvdWxkIHRpbWVvdXQgaW4gNSBzZWNvbmRzLiZsdDsvYWxlcnQmZ3Q7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE2NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPkNvbGxhcHNhYmxlIFBhbmVsPC9oMj4gPGhyIGNsYXNzPWh5X3Utc3BhY2UtbWItMj4gPGRpdiBjbGFzcz1cXFwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxkaXYgY2xhc3M9c2dfYy1kZW1vX19jb250YWluZXI+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cXFwiUGFuZWwgMVxcXCIgOmlzLW9wZW49dHJ1ZT4gUGFuZWwgMSBjb250ZW50IDwvY29sbGFwc2FibGUtcGFuZWw+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cXFwiUGFuZWwgMlxcXCI+IFBhbmVsIDIgY29udGVudCA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuJmx0O2NvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVxcXCJQYW5lbCAxXFxcIiA6aXMtb3Blbj1cXFwidHJ1ZVxcXCImZ3Q7XFxuIFBhbmVsIDEgY29udGVudFxcbiZsdDsvY29sbGFwc2FibGUtcGFuZWwmZ3Q7XFxuJmx0O2NvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVxcXCJQYW5lbCAyXFxcIiZndDtcXG4gUGFuZWwgMiBjb250ZW50XFxuJmx0Oy9jb2xsYXBzYWJsZS1wYW5lbCZndDtcXG4gICAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG4vKioqLyB9LFxuLyogMTY3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+R2V0dGluZyBTdGFydGVkPC9oMj4gPGhyIGNsYXNzPWh5X3Utc3BhY2UtbWItMj4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLTUgaHlfdC1ncmV5XFxcIj5DRE48L2gzPiA8cD4gLi4uIDwvcD4gPC9kaXY+IDwvZGl2Pjwvc2VjdGlvbj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNjggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5MZWdhbCBTeXN0ZW08L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPHAgY2xhc3M9XFxcImh5X2MtY29weSBoeV9jLWNvcHktLWJvZHkgaHlfdC1ncmV5XFxcIj4gTG9yZW0gaXBzdW08bGVnYWwtY291bnRlciB2LW92ZXJsYXktb3BlbmVyPWxlZ2FsLW92ZXJsYXkgbGVnYWwta2V5PWhzLXJlZmVycmFsLXRlcm1zIGxlZ2FsLWxhbmc9ZW4gbGVnYWwtcmVnaW9uPWJjPjwvbGVnYWwtY291bnRlcj4gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdCwgc2VkIGRvIGVpdXNtb2QgdGVtcG9yIGluY2lkaWR1bnQgdXQgbGFib3JlIGV0IGRvbG9yZSBtYWduYSBhbGlxdWEuIDxsZWdhbC1jb3VudGVyIHYtb3ZlcmxheS1vcGVuZXI9bGVnYWwtb3ZlcmxheSBsZWdhbC1rZXk9MS15ZWFyLW9mZmVyLXN0aW0gbGVnYWwtbGFuZz1lbiBsZWdhbC1yZWdpb249YmM+PC9sZWdhbC1jb3VudGVyPiA8L3A+IDwvZGl2PiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8bGVnYWwtY29udGFpbmVyPjwvbGVnYWwtY29udGFpbmVyPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuJmx0O2xlZ2FsLWNvdW50ZXJcXG4gIGxlZ2FsLWtleT1cXFwiaHMtcmVmZXJyYWwtdGVybXNcXFwiXFxuICBsZWdhbC1sYW5nPVxcXCJlblxcXCJcXG4gIGxlZ2FsLXJlZ2lvbj1cXFwiYmNcXFwiXFxuJmx0Oy9sZWdhbC1jb3VudGVyJmd0O1xcbiZsdDtsZWdhbC1jb250YWluZXImZ3Q7Jmx0Oy9sZWdhbC1jb250YWluZXImZ3Q7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9amF2YXNjcmlwdD4gPHByZT5cXG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtamF2YXNjcmlwdD5cXG5sZXQgdm0gPSBuZXcgVnVlKHtcXG4gZWw6ICdib2R5JyxcXG4gZGF0YSgpIHtcXG4gICByZXR1cm4ge1xcbiAgICAgbGlnZXJFbmRQb2ludDogJ2h0dHBzOi8vYXBpLmNtcy50ZWx1cy5jb20vbGVnYWxzJyxcXG4gICAgIGxpZ2VyQXBwbGljYXRpb25LZXk6ICdiOTczOGQ2N2I4OWRmYzc4Mjc0NmQ0YTljZjRhMTA5MydcXG4gICB9O1xcbiB9LFxcbiBjb21wb25lbnRzOiB7XFxuICAgTGVnYWxDb3VudGVyLFxcbiAgIExlZ2FsQ29udGFpbmVyXFxuIH1cXG59KTtcXG4gICAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk6IExlZ2FsIENvdW50ZXI8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG4vKioqLyB9LFxuLyogMTY5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+T3ZlcmxheSBTeXN0ZW08L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPHA+IDxidXR0b24gdi1vdmVybGF5LW9wZW5lcj1vdmVybGF5LTEgY2xhc3M9XFxcImh5X2MtYnV0dG9uIGh5X2MtYnV0dG9uLS1saW5rIGh5X3QtcHVycGxlXFxcIiB0eXBlPWJ1dHRvbiByb2xlPWJ1dHRvbj4gT3BlbiBvdmVybGF5ICMxIDxpIGNsYXNzPVxcXCJoeV9jLWljb24gaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkIGh5X2MtYnV0dG9uX19pY29uXFxcIj48L2k+IDwvYnV0dG9uPiA8L3A+IDxwPiA8YnV0dG9uIHYtb3ZlcmxheS1vcGVuZXI9b3ZlcmxheS0yIGNsYXNzPVxcXCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tbGluayBoeV90LXB1cnBsZVxcXCIgdHlwZT1idXR0b24gcm9sZT1idXR0b24+IE9wZW4gb3ZlcmxheSAjMiA8aSBjbGFzcz1cXFwiaHlfYy1pY29uIGh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZCBoeV9jLWJ1dHRvbl9faWNvblxcXCI+PC9pPiA8L2J1dHRvbj4gPC9wPiA8b3ZlcmxheS1jb250YWluZXI+IDxvdmVybGF5IG92ZXJsYXkta2V5PW92ZXJsYXktMT4gPGg0IGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XFxcIiBzbG90PW92ZXJsYXktaGVhZGVyPlRoaXMgaXMgb3ZlcmxheSAjMTwvaDQ+IDxhcnRpY2xlIHNsb3Q9b3ZlcmxheS1ib2R5PiBPdmVybGF5ICMxIGJvZHkgPC9hcnRpY2xlPiA8L292ZXJsYXk+IDxvdmVybGF5IG92ZXJsYXkta2V5PW92ZXJsYXktMj4gPGg0IGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XFxcIiBzbG90PW92ZXJsYXktaGVhZGVyPlRoaXMgaXMgb3ZlcmxheSAjMjwvaDQ+IDxhcnRpY2xlIHNsb3Q9b3ZlcmxheS1ib2R5PiBPdmVybGF5ICMyIGJvZHkgPC9hcnRpY2xlPiA8L292ZXJsYXk+IDwvb3ZlcmxheS1jb250YWluZXI+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4mbHQ7b3ZlcmxheS1jb250YWluZXImZ3Q7XFxuICZsdDtvdmVybGF5IG92ZXJsYXkta2V5PVxcXCJvdmVybGF5LTFcXFwiJmd0O1xcbiAgICZsdDtoNCAgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcXFwiIHNsb3Q9XFxcIm92ZXJsYXktaGVhZGVyXFxcIiZndDtcXG4gICBUaGlzIGlzIG92ZXJsYXkgIzFcXG4gICAmbHQ7L2g0Jmd0O1xcbiAgICZsdDthcnRpY2xlIHNsb3Q9XFxcIm92ZXJsYXktYm9keVxcXCImZ3Q7XFxuICAgICBPdmVybGF5ICMxIGJvZHlcXG4gICAmbHQ7L2FydGljbGUmZ3Q7XFxuICZsdDsvb3ZlcmxheSZndDtcXG4gJmx0O292ZXJsYXkgb3ZlcmxheS1rZXk9XFxcIm92ZXJsYXktMlxcXCImZ3Q7XFxuICAgJmx0O2g0ICBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFxcXCIgc2xvdD1cXFwib3ZlcmxheS1oZWFkZXJcXFwiJmd0O1xcbiAgIFRoaXMgaXMgb3ZlcmxheSAjMVxcbiAgICZsdDsvaDQmZ3Q7XFxuICAgJmx0O2FydGljbGUgc2xvdD1cXFwib3ZlcmxheS1ib2R5XFxcIiZndDtcXG4gICAgIE92ZXJsYXkgIzIgYm9keVxcbiAgICZsdDsvYXJ0aWNsZSZndDtcXG4gJmx0Oy9vdmVybGF5Jmd0O1xcbiZsdDsvb3ZlcmxheS1jb250YWluZXImZ3Q7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE3MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPlNwaW5uZXI8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPGxhYmVsIGNsYXNzPVxcXCJoeV9jLWNvbnRyb2wgaHlfYy1jb250cm9sLS1jaGVja2JveFxcXCI+IDxzcGFuIGNsYXNzPWh5X2MtY29udHJvbF9fbGFiZWwtdGV4dD5GdWxsIFNjcmVlbjwvc3Bhbj4gPGlucHV0IHR5cGU9Y2hlY2tib3ggdi1tb2RlbD1pc0Z1bGxTY3JlZW4gLz4gPGRpdiBjbGFzcz1oeV9jLWNvbnRyb2xfX2luZGljYXRvcj48L2Rpdj4gPC9sYWJlbD4gPGJ1dHRvbiBAY2xpY2s9c2hvd1NwaW5uZXIgY2xhc3M9XFxcImh5X2MtYnV0dG9uIGh5X2MtYnV0dG9uLS1yYWlzZWQgaHlfdC1ncmVlblxcXCIgdHlwZT1idXR0b24+IFNob3cgU3Bpbm5lciA8L2J1dHRvbj4gPHNwaW5uZXIgOmZ1bGwtc2NyZWVuPWlzRnVsbFNjcmVlbiA6dGV4dD1tc2c+PC9zcGlubmVyPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuJmx0O3NwaW5uZXIgdGV4dD1cXFwiSSB3aWxsIGNsb3NlIGluIDMgc2Vjb25kc1xcXCIgOmZ1bGwtc2NyZWVuPVxcXCJ0cnVlXFxcIiZndDsmbHQ7L3NwaW5uZXImZ3Q7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE3MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPlN0ZXAgVHJhY2tlcjwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8c3RlcC10cmFja2VyIDpjdXJyZW50LXN0ZXA9c3RlcFRyYWNrZXJDdXJyZW50U3RlcCA6Y29uZmlnPXN0ZXBUcmFja2VyQ29uZmlnPjwvc3RlcC10cmFja2VyPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4mbHQ7c3RlcC10cmFja2VyXFxuOmN1cnJlbnQtc3RlcD1cXFwic3RlcFRyYWNrZXJDdXJyZW50U3RlcFxcXCJcXG46Y29uZmlnPVxcXCJzdGVwVHJhY2tlckNvbmZpZ1xcXCImZ3Q7XFxuJmx0Oy9zdGVwLXRyYWNrZXImZ3Q7XFxuICAgICAgICAgPC9jb2RlPlxcbiAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPWphdmFzY3JpcHQ+IDxwcmU+XFxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWpzPlxcbmxldCBzdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMjtcXG5sZXQgc3RlcFRyYWNrZXJDb25maWcgPSB7XFxuICBpc0NsaWNrYWJsZTogdHJ1ZSxcXG4gIHN0ZXBzOiBbXFxuICAgIHtcXG4gICAgICB0aXRsZTogJ1N0ZXAgQScsXFxuICAgICAgbGluazogJycsXFxuICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xcbiAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMDtcXG4gICAgICB9XFxuICAgIH0sIHtcXG4gICAgICB0aXRsZTogJ1N0ZXAgQicsXFxuICAgICAgbGluazogJycsXFxuICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xcbiAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMTtcXG4gICAgICB9XFxuICAgIH0sIHtcXG4gICAgICB0aXRsZTogJ1N0ZXAgQycsXFxuICAgICAgbGluazogJycsXFxuICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xcbiAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMjtcXG4gICAgICB9XFxuICAgIH1cXG4gIF1cXG59O1xcbmxldCB2bSA9IG5ldyBWdWUoe1xcbiAgZWw6ICdib2R5JyxcXG4gIGRhdGE6IHtcXG4gICAgc3RlcFRyYWNrZXJDb25maWcsXFxuICAgIHN0ZXBUcmFja2VyQ3VycmVudFN0ZXBcXG59LFxcbiAgY29tcG9uZW50czoge1xcbiAgICBTdGVwVHJhY2tlclxcbiAgfVxcbn0pO1xcbiAgICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiPkFQSTwvaDM+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxhcGktdGFibGUgOml0ZW1zPWFwaUl0ZW1zPjwvYXBpLXRhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5UYWI8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPHRhYnM+IDx0YWIgbGFiZWw9XFxcIlRhYiAxXFxcIj4gPHA+IFRhYiAxIGNvbnRlbnQgPC9wPiA8L3RhYj4gPHRhYiBsYWJlbD1cXFwiVGFiIDJcXFwiPiA8cD4gVGFiIDIgY29udGVudCA8L3A+IDwvdGFiPiA8dGFiIGxhYmVsPVxcXCJUYWIgM1xcXCIgOmlzLWRpc2FibGVkPXRydWU+IDxwPiBUYWIgMyBjb250ZW50IDwvcD4gPC90YWI+IDwvdGFicz4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiZsdDt0YWJzJmd0O1xcbiAmbHQ7dGFiIGxhYmVsPVxcXCJUYWIgMVxcXCImZ3Q7XFxuICAgJmx0O3AmZ3Q7XFxuICAgICBUYWIgMSBjb250ZW50XFxuICAgJmx0Oy9wJmd0O1xcbiAmbHQ7L3RhYiZndDtcXG4gJmx0O3RhYiBsYWJlbD1cXFwiVGFiIDJcXFwiJmd0O1xcbiAgICZsdDtwJmd0O1xcbiAgICAgVGFiIDIgY29udGVudFxcbiAgICZsdDsvcCZndDtcXG4gJmx0Oy90YWImZ3Q7XFxuICZsdDt0YWIgbGFiZWw9XFxcIlRhYiAzXFxcIiA6aXMtZGlzYWJsZWQ9XFxcInRydWVcXFwiJmd0O1xcbiAgICZsdDtwJmd0O1xcbiAgICAgVGFiIDMgY29udGVudFxcbiAgICZsdDsvcCZndDtcXG4gJmx0Oy90YWImZ3Q7XFxuJmx0Oy90YWJzJmd0O1xcbiAgICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiPkFQSTwvaDM+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxhcGktdGFibGUgOml0ZW1zPWFwaUl0ZW1zPjwvYXBpLXRhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNzMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IHYtaWY9aXNWaXNpYmxlIHRyYW5zaXRpb249ZmFkZSBjbGFzcz1jLWFsZXJ0IDpjbGFzcz1cXFwiJ2MtYWxlcnQtLScgKyB0eXBlXFxcIiA6Y2xhc3M9XFxcInsgJ2MtYWxlcnQtLWRpc21pc3NpYmxlJzogZGlzbWlzc2libGUgfVxcXCIgcm9sZT1hbGVydD4gPGJ1dHRvbiB2LWlmPWRpc21pc3NpYmxlIEBjbGljaz1kaXNtaXNzIHR5cGU9YnV0dG9uIGNsYXNzPWMtYWxlcnRfX2Nsb3NlLWJ1dHRvbiBhcmlhLWxhYmVsPUNsb3NlPiA8c3BhbiBhcmlhLWhpZGRlbj10cnVlPiZ0aW1lczs8L3NwYW4+IDxzcGFuIGNsYXNzPWh5X3UtaW52aXNpYmxlPkNsb3NlPC9zcGFuPiA8L2J1dHRvbj4gPHNsb3Q+PC9zbG90PiA8L2Rpdj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNzQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPWMtY29sbGFwc2FibGUtcGFuZWw+IDxoMyBAY2xpY2sucHJldmVudD10b2dnbGVPcGVuIDpjbGFzcz1cXFwie1xcbiAgICAgICdjLWNvbGxhcHNhYmxlLXBhbmVsX19oZWFkZXItLW9wZW4nOiBpc09wZW5cXG4gICAgfVxcXCIgY2xhc3M9XFxcImMtY29sbGFwc2FibGUtcGFuZWxfX2hlYWRlciBoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCIgdi1odG1sPWxhYmVsPiA8L2gzPiA8ZGl2IGNsYXNzPWMtY29sbGFwc2FibGUtcGFuZWxfX2JvZHkgOmNsYXNzPVxcXCJ7XFxuICAgICdjLWNvbGxhcHNhYmxlLXBhbmVsX19ib2R5LS1vcGVuJzogaXNPcGVuXFxuICB9XFxcIj4gPHNsb3Q+PC9zbG90PiA8L2Rpdj4gPC9kaXY+IFwiO1xuXG4vKioqLyB9LFxuLyogMTc1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLWxlZ2FsLWNvbnRhaW5lcj4gPG9sIGNsYXNzPWMtbGVnYWwtY29udGFpbmVyX19vcmRlcmVkLWxpc3Q+IDxsaSB2LXNldC1mb2N1cz1sZWdhbC5pc1NlbGVjdGVkIGNsYXNzPWMtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0gOmNsYXNzPVxcXCJ7XFxuICAgICAgJ2MtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0tLWFjdGl2ZSc6IGxlZ2FsLmlzU2VsZWN0ZWRcXG4gICAgfVxcXCIgdi1mb3I9XFxcImxlZ2FsIGluIGluZGV4ZWRMZWdhbHNcXFwiIHYtaHRtbD1sZWdhbC5jb250ZW50PiA8L2xpPiA8L29sPiA8dWwgY2xhc3M9Yy1sZWdhbC1jb250YWluZXJfX3Vub3JkZXJlZC1saXN0PiA8bGkgY2xhc3M9Yy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbSB2LWZvcj1cXFwibGVnYWwgaW4gbm9uSW5kZXhlZExlZ2Fsc1xcXCIgdi1odG1sPWxlZ2FsLmNvbnRlbnQ+IDwvbGk+IDwvdWw+IDwvZGl2PiBcIjtcblxuLyoqKi8gfSxcbi8qIDE3NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxzdXAgY2xhc3M9Yy1sZWdhbC1zdXA+IDxhIGhyZWY9IyBAY2xpY2sucHJldmVudD1jbGlja0hhbmRsZXI+IHt7bGVnYWxDb3VudGVyfX0gPC9hPiA8L3N1cD4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNzcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPWMtb3ZlcmxheS1jb250YWluZXI+IDxkaXYgY2xhc3M9Yy1vdmVybGF5LWNvbnRhaW5lcl9fY3VydGFpbiA6Y2xhc3M9XFxcIntcXG4gICAgICAgICdjLW92ZXJsYXktY29udGFpbmVyX19jdXJ0YWluLS1hY3RpdmUnOiBpc1Zpc2libGVcXG4gICAgfVxcXCIgQGNsaWNrLnByZXZlbnQ9XFxcImlzVmlzaWJsZT1mYWxzZVxcXCI+IDwvZGl2PiA8ZGl2IGNsYXNzPWMtb3ZlcmxheS1jb250YWluZXJfX292ZXJsYXlzIDpjbGFzcz1cXFwie1xcbiAgICAgICAgJ2Mtb3ZlcmxheS1jb250YWluZXJfX292ZXJsYXlzLS1hY3RpdmUnOiBpc1Zpc2libGVcXG4gICAgfVxcXCI+IDxzbG90Pjwvc2xvdD4gPC9kaXY+IDwvZGl2PiBcIjtcblxuLyoqKi8gfSxcbi8qIDE3OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxhcnRpY2xlIGNsYXNzPWMtb3ZlcmxheSB2LXNob3c9aXNWaXNpYmxlPiA8ZGl2IGNsYXNzPWMtb3ZlcmxheV9fYm9keT4gPHNsb3QgbmFtZT1vdmVybGF5LWJvZHk+PC9zbG90PiA8L2Rpdj4gPGhlYWRlciBjbGFzcz1jLW92ZXJsYXlfX2hlYWRlcj4gPHNsb3QgbmFtZT1vdmVybGF5LWhlYWRlcj48L3Nsb3Q+IDxidXR0b24gdHlwZT1idXR0b24gY2xhc3M9Yy1vdmVybGF5X19jbG9zZS1idXR0b24gYXJpYS1sYWJlbD1DbG9zZSB0YWJpbmRleD0wIEBjbGljay5wcmV2ZW50PWNsb3NlT3ZlcmxheT48L2J1dHRvbj4gPC9oZWFkZXI+IDwvYXJ0aWNsZT4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IHYtc2hvdz1hY3RpdmUgY2xhc3M9Yy1zcGlubmVyIDpjbGFzcz1cXFwieyAnYy1zcGlubmVyLS1mdWxsc2NyZWVuJzogZnVsbFNjcmVlbiB9XFxcIj4gPHN2ZyB2aWV3Qm94PVxcXCIwIDAgMTAwIDEwMFxcXCIgd2lkdGg9MCBoZWlnaHQ9MD4gPGNpcmNsZSBzdHJva2Utd2lkdGg9NCBmaWxsPW5vbmUgc3Ryb2tlLWxpbmVjYXA9cm91bmQgc3Ryb2tlLWRhc2hvZmZzZXQ9MCBjeD01MCBjeT01MCByPTIwPjwvY2lyY2xlPiA8L3N2Zz4gPHAgY2xhc3M9XFxcImMtc3Bpbm5lcl9fdGV4dCBoeV9jLWNvcHkgaHlfdS1mb250LXdlaWdodC0tbWVkaXVtXFxcIiB2LWlmPSEhdGV4dD57e3RleHR9fTwvcD4gPC9kaXY+IFwiO1xuXG4vKioqLyB9LFxuLyogMTgwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPHVsIGNsYXNzPWMtc3RlcC10cmFja2VyPiA8bGkgY2xhc3M9Yy1zdGVwLXRyYWNrZXJfX3N0ZXAgOmNsYXNzPVxcXCJ7XFxuICAgICAgJ2Mtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZSc6IGN1cnJlbnRTdGVwID4gJGluZGV4LFxcbiAgICAgICdjLXN0ZXAtdHJhY2tlcl9fc3RlcC0tYWN0aXZlJzogY3VycmVudFN0ZXAgPT09ICRpbmRleCxcXG4gICAgICAnYy1zdGVwLXRyYWNrZXJfX3NldHAtLWNsaWNrYWJsZSc6IChjdXJyZW50U3RlcCA+ICRpbmRleCAmJiBjb25maWcuaXNDbGlja2FibGUpXFxuICB9XFxcIiB2LWZvcj1cXFwic3RlcCBpbiBjb25maWcuc3RlcHNcXFwiPiA8YSA6aHJlZj1cXFwic3RlcC5saW5rIHx8IGZhbHNlXFxcIiBAY2xpY2s9XFxcImNsaWNrSGFuZGxlcigkZXZlbnQsIHN0ZXAsICRpbmRleClcXFwiIHYtaWY9Y29uZmlnLmlzQ2xpY2thYmxlPiA8c3BhbiBjbGFzcz1jLXN0ZXAtdHJhY2tlcl9faWNvbj48L3NwYW4+IDxzcGFuIGNsYXNzPWMtc3RlcC10cmFja2VyX19sYWJlbD57eyRpbmRleCArIDF9fS4ge3tzdGVwLnRpdGxlfX08L3NwYW4+IDwvYT4gPHNwYW4gdi1lbHNlIGNsYXNzPWMtc3RlcC10cmFja2VyX19pY29uPjwvc3Bhbj4gPHNwYW4gdi1lbHNlIGNsYXNzPWMtc3RlcC10cmFja2VyX19sYWJlbD57eyRpbmRleCArIDF9fS4ge3tzdGVwLnRpdGxlfX08L3NwYW4+IDwvbGk+IDwvdWw+IFwiO1xuXG4vKioqLyB9LFxuLyogMTgxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLXRhYnNfX3BhbmUgOmNsYXNzPVxcXCJ7XFxuICAgICdjLXRhYnNfX3BhbmUtLWFjdGl2ZSc6IGlzVmlzaWJsZVxcbiAgfVxcXCI+IDxzbG90Pjwvc2xvdD4gPC9kaXY+IFwiO1xuXG4vKioqLyB9LFxuLyogMTgyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLXRhYnM+IDx1bCBjbGFzcz1jLXRhYnNfX2hlYWRlcj4gPGxpIHYtZm9yPVxcXCJ0YWIgaW4gdGFic1xcXCIgY2xhc3M9Yy10YWJzX19oZWFkZXItaXRlbSA6Y2xhc3M9XFxcIntcXG4gICAgICAgICAgICAgICAgJ2MtdGFic19faGVhZGVyLWl0ZW0tLWFjdGl2ZSc6ICgkaW5kZXggPT09IGFjdGl2ZVRhYkluZGV4KSxcXG4gICAgICAgICAgICAgICAgJ2MtdGFic19faGVhZGVyLWl0ZW0tLWRpc2FibGVkJzogdGFiLmlzRGlzYWJsZWRcXG4gICAgICAgICAgICAgIH1cXFwiIDpkaXNhYmxlZD10YWIuZGlzYWJsZWQ+IDxhIGhyZWY9IyBAY2xpY2sucHJldmVudD1cXFwiaGFuZGxlVGFiTGlzdENsaWNrKCRpbmRleCwgdGFiKVxcXCIgdi1odG1sPXRhYi5sYWJlbD48L2E+IDwvbGk+IDwvdWw+IDxkaXYgY2xhc3M9Yy10YWJzX19ib2R5PiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiA8L2Rpdj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxODMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIwNSlcblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjMpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTg0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMDYpXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nilcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTY0KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE4NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nylcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTY1KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE4NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OClcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTY2KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE4NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjA3KVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Nylcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxODggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OClcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxODkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OSlcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxOTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTIpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3MClcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxOTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3MSlcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxOTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Milcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxOTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIwOClcblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzMpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTk0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMDkpXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nilcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTc0KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE5NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjEwKVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTcpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3NSlcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxOTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIxMSlcblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4KVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzYpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTk3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMTIpXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSlcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTc3KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE5OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjEzKVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjApXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3OClcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxOTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIxNClcblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzkpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMjAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMTUpXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Milcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTgwKVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDIwMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Mylcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTgxKVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDIwMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjE2KVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Milcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAyMDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIVxuXHQgKiB2dWUtcm91dGVyIHYwLjcuMTNcblx0ICogKGMpIDIwMTYgRXZhbiBZb3Vcblx0ICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuXHQgKi9cblx0KGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0ICAgdHJ1ZSA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0ICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuXHQgIGdsb2JhbC5WdWVSb3V0ZXIgPSBmYWN0b3J5KCk7XG5cdH0odGhpcywgZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cdFxuXHQgIHZhciBiYWJlbEhlbHBlcnMgPSB7fTtcblx0XG5cdCAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgICAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICAgIH1cblx0ICB9O1xuXHQgIGZ1bmN0aW9uIFRhcmdldChwYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSkge1xuXHQgICAgdGhpcy5wYXRoID0gcGF0aDtcblx0ICAgIHRoaXMubWF0Y2hlciA9IG1hdGNoZXI7XG5cdCAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG5cdCAgfVxuXHRcblx0ICBUYXJnZXQucHJvdG90eXBlID0ge1xuXHQgICAgdG86IGZ1bmN0aW9uIHRvKHRhcmdldCwgY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIGRlbGVnYXRlID0gdGhpcy5kZWxlZ2F0ZTtcblx0XG5cdCAgICAgIGlmIChkZWxlZ2F0ZSAmJiBkZWxlZ2F0ZS53aWxsQWRkUm91dGUpIHtcblx0ICAgICAgICB0YXJnZXQgPSBkZWxlZ2F0ZS53aWxsQWRkUm91dGUodGhpcy5tYXRjaGVyLnRhcmdldCwgdGFyZ2V0KTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5tYXRjaGVyLmFkZCh0aGlzLnBhdGgsIHRhcmdldCk7XG5cdFxuXHQgICAgICBpZiAoY2FsbGJhY2spIHtcblx0ICAgICAgICBpZiAoY2FsbGJhY2subGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgbXVzdCBoYXZlIGFuIGFyZ3VtZW50IGluIHRoZSBmdW5jdGlvbiBwYXNzZWQgdG8gYHRvYFwiKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5tYXRjaGVyLmFkZENoaWxkKHRoaXMucGF0aCwgdGFyZ2V0LCBjYWxsYmFjaywgdGhpcy5kZWxlZ2F0ZSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gTWF0Y2hlcih0YXJnZXQpIHtcblx0ICAgIHRoaXMucm91dGVzID0ge307XG5cdCAgICB0aGlzLmNoaWxkcmVuID0ge307XG5cdCAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcblx0ICB9XG5cdFxuXHQgIE1hdGNoZXIucHJvdG90eXBlID0ge1xuXHQgICAgYWRkOiBmdW5jdGlvbiBhZGQocGF0aCwgaGFuZGxlcikge1xuXHQgICAgICB0aGlzLnJvdXRlc1twYXRoXSA9IGhhbmRsZXI7XG5cdCAgICB9LFxuXHRcblx0ICAgIGFkZENoaWxkOiBmdW5jdGlvbiBhZGRDaGlsZChwYXRoLCB0YXJnZXQsIGNhbGxiYWNrLCBkZWxlZ2F0ZSkge1xuXHQgICAgICB2YXIgbWF0Y2hlciA9IG5ldyBNYXRjaGVyKHRhcmdldCk7XG5cdCAgICAgIHRoaXMuY2hpbGRyZW5bcGF0aF0gPSBtYXRjaGVyO1xuXHRcblx0ICAgICAgdmFyIG1hdGNoID0gZ2VuZXJhdGVNYXRjaChwYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSk7XG5cdFxuXHQgICAgICBpZiAoZGVsZWdhdGUgJiYgZGVsZWdhdGUuY29udGV4dEVudGVyZWQpIHtcblx0ICAgICAgICBkZWxlZ2F0ZS5jb250ZXh0RW50ZXJlZCh0YXJnZXQsIG1hdGNoKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgY2FsbGJhY2sobWF0Y2gpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIGdlbmVyYXRlTWF0Y2goc3RhcnRpbmdQYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIChwYXRoLCBuZXN0ZWRDYWxsYmFjaykge1xuXHQgICAgICB2YXIgZnVsbFBhdGggPSBzdGFydGluZ1BhdGggKyBwYXRoO1xuXHRcblx0ICAgICAgaWYgKG5lc3RlZENhbGxiYWNrKSB7XG5cdCAgICAgICAgbmVzdGVkQ2FsbGJhY2soZ2VuZXJhdGVNYXRjaChmdWxsUGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gbmV3IFRhcmdldChzdGFydGluZ1BhdGggKyBwYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBhZGRSb3V0ZShyb3V0ZUFycmF5LCBwYXRoLCBoYW5kbGVyKSB7XG5cdCAgICB2YXIgbGVuID0gMDtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gcm91dGVBcnJheS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgbGVuICs9IHJvdXRlQXJyYXlbaV0ucGF0aC5sZW5ndGg7XG5cdCAgICB9XG5cdFxuXHQgICAgcGF0aCA9IHBhdGguc3Vic3RyKGxlbik7XG5cdCAgICB2YXIgcm91dGUgPSB7IHBhdGg6IHBhdGgsIGhhbmRsZXI6IGhhbmRsZXIgfTtcblx0ICAgIHJvdXRlQXJyYXkucHVzaChyb3V0ZSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBlYWNoUm91dGUoYmFzZVJvdXRlLCBtYXRjaGVyLCBjYWxsYmFjaywgYmluZGluZykge1xuXHQgICAgdmFyIHJvdXRlcyA9IG1hdGNoZXIucm91dGVzO1xuXHRcblx0ICAgIGZvciAodmFyIHBhdGggaW4gcm91dGVzKSB7XG5cdCAgICAgIGlmIChyb3V0ZXMuaGFzT3duUHJvcGVydHkocGF0aCkpIHtcblx0ICAgICAgICB2YXIgcm91dGVBcnJheSA9IGJhc2VSb3V0ZS5zbGljZSgpO1xuXHQgICAgICAgIGFkZFJvdXRlKHJvdXRlQXJyYXksIHBhdGgsIHJvdXRlc1twYXRoXSk7XG5cdFxuXHQgICAgICAgIGlmIChtYXRjaGVyLmNoaWxkcmVuW3BhdGhdKSB7XG5cdCAgICAgICAgICBlYWNoUm91dGUocm91dGVBcnJheSwgbWF0Y2hlci5jaGlsZHJlbltwYXRoXSwgY2FsbGJhY2ssIGJpbmRpbmcpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBjYWxsYmFjay5jYWxsKGJpbmRpbmcsIHJvdXRlQXJyYXkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbWFwIChjYWxsYmFjaywgYWRkUm91dGVDYWxsYmFjaykge1xuXHQgICAgdmFyIG1hdGNoZXIgPSBuZXcgTWF0Y2hlcigpO1xuXHRcblx0ICAgIGNhbGxiYWNrKGdlbmVyYXRlTWF0Y2goXCJcIiwgbWF0Y2hlciwgdGhpcy5kZWxlZ2F0ZSkpO1xuXHRcblx0ICAgIGVhY2hSb3V0ZShbXSwgbWF0Y2hlciwgZnVuY3Rpb24gKHJvdXRlKSB7XG5cdCAgICAgIGlmIChhZGRSb3V0ZUNhbGxiYWNrKSB7XG5cdCAgICAgICAgYWRkUm91dGVDYWxsYmFjayh0aGlzLCByb3V0ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5hZGQocm91dGUpO1xuXHQgICAgICB9XG5cdCAgICB9LCB0aGlzKTtcblx0ICB9XG5cdFxuXHQgIHZhciBzcGVjaWFscyA9IFsnLycsICcuJywgJyonLCAnKycsICc/JywgJ3wnLCAnKCcsICcpJywgJ1snLCAnXScsICd7JywgJ30nLCAnXFxcXCddO1xuXHRcblx0ICB2YXIgZXNjYXBlUmVnZXggPSBuZXcgUmVnRXhwKCcoXFxcXCcgKyBzcGVjaWFscy5qb2luKCd8XFxcXCcpICsgJyknLCAnZycpO1xuXHRcblx0ICB2YXIgbm9XYXJuaW5nID0gZmFsc2U7XG5cdCAgZnVuY3Rpb24gd2Fybihtc2cpIHtcblx0ICAgIGlmICghbm9XYXJuaW5nICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICBjb25zb2xlLmVycm9yKCdbdnVlLXJvdXRlcl0gJyArIG1zZyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiB0cnlEZWNvZGUodXJpLCBhc0NvbXBvbmVudCkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmV0dXJuIGFzQ29tcG9uZW50ID8gZGVjb2RlVVJJQ29tcG9uZW50KHVyaSkgOiBkZWNvZGVVUkkodXJpKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgd2FybignbWFsZm9ybWVkIFVSSScgKyAoYXNDb21wb25lbnQgPyAnIGNvbXBvbmVudDogJyA6ICc6ICcpICsgdXJpKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGlzQXJyYXkodGVzdCkge1xuXHQgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0ZXN0KSA9PT0gXCJbb2JqZWN0IEFycmF5XVwiO1xuXHQgIH1cblx0XG5cdCAgLy8gQSBTZWdtZW50IHJlcHJlc2VudHMgYSBzZWdtZW50IGluIHRoZSBvcmlnaW5hbCByb3V0ZSBkZXNjcmlwdGlvbi5cblx0ICAvLyBFYWNoIFNlZ21lbnQgdHlwZSBwcm92aWRlcyBhbiBgZWFjaENoYXJgIGFuZCBgcmVnZXhgIG1ldGhvZC5cblx0ICAvL1xuXHQgIC8vIFRoZSBgZWFjaENoYXJgIG1ldGhvZCBpbnZva2VzIHRoZSBjYWxsYmFjayB3aXRoIG9uZSBvciBtb3JlIGNoYXJhY3RlclxuXHQgIC8vIHNwZWNpZmljYXRpb25zLiBBIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGNvbnN1bWVzIG9uZSBvciBtb3JlIGlucHV0XG5cdCAgLy8gY2hhcmFjdGVycy5cblx0ICAvL1xuXHQgIC8vIFRoZSBgcmVnZXhgIG1ldGhvZCByZXR1cm5zIGEgcmVnZXggZnJhZ21lbnQgZm9yIHRoZSBzZWdtZW50LiBJZiB0aGVcblx0ICAvLyBzZWdtZW50IGlzIGEgZHluYW1pYyBvZiBzdGFyIHNlZ21lbnQsIHRoZSByZWdleCBmcmFnbWVudCBhbHNvIGluY2x1ZGVzXG5cdCAgLy8gYSBjYXB0dXJlLlxuXHQgIC8vXG5cdCAgLy8gQSBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiBjb250YWluczpcblx0ICAvL1xuXHQgIC8vICogYHZhbGlkQ2hhcnNgOiBhIFN0cmluZyB3aXRoIGEgbGlzdCBvZiBhbGwgdmFsaWQgY2hhcmFjdGVycywgb3Jcblx0ICAvLyAqIGBpbnZhbGlkQ2hhcnNgOiBhIFN0cmluZyB3aXRoIGEgbGlzdCBvZiBhbGwgaW52YWxpZCBjaGFyYWN0ZXJzXG5cdCAgLy8gKiBgcmVwZWF0YDogdHJ1ZSBpZiB0aGUgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gY2FuIHJlcGVhdFxuXHRcblx0ICBmdW5jdGlvbiBTdGF0aWNTZWdtZW50KHN0cmluZykge1xuXHQgICAgdGhpcy5zdHJpbmcgPSBzdHJpbmc7XG5cdCAgfVxuXHQgIFN0YXRpY1NlZ21lbnQucHJvdG90eXBlID0ge1xuXHQgICAgZWFjaENoYXI6IGZ1bmN0aW9uIGVhY2hDaGFyKGNhbGxiYWNrKSB7XG5cdCAgICAgIHZhciBzdHJpbmcgPSB0aGlzLnN0cmluZyxcblx0ICAgICAgICAgIGNoO1xuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdHJpbmcubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgY2ggPSBzdHJpbmcuY2hhckF0KGkpO1xuXHQgICAgICAgIGNhbGxiYWNrKHsgdmFsaWRDaGFyczogY2ggfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5zdHJpbmcucmVwbGFjZShlc2NhcGVSZWdleCwgJ1xcXFwkMScpO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnN0cmluZztcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBEeW5hbWljU2VnbWVudChuYW1lKSB7XG5cdCAgICB0aGlzLm5hbWUgPSBuYW1lO1xuXHQgIH1cblx0ICBEeW5hbWljU2VnbWVudC5wcm90b3R5cGUgPSB7XG5cdCAgICBlYWNoQ2hhcjogZnVuY3Rpb24gZWFjaENoYXIoY2FsbGJhY2spIHtcblx0ICAgICAgY2FsbGJhY2soeyBpbnZhbGlkQ2hhcnM6IFwiL1wiLCByZXBlYXQ6IHRydWUgfSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlZ2V4OiBmdW5jdGlvbiByZWdleCgpIHtcblx0ICAgICAgcmV0dXJuIFwiKFteL10rKVwiO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUocGFyYW1zKSB7XG5cdCAgICAgIHZhciB2YWwgPSBwYXJhbXNbdGhpcy5uYW1lXTtcblx0ICAgICAgcmV0dXJuIHZhbCA9PSBudWxsID8gXCI6XCIgKyB0aGlzLm5hbWUgOiB2YWw7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gU3RhclNlZ21lbnQobmFtZSkge1xuXHQgICAgdGhpcy5uYW1lID0gbmFtZTtcblx0ICB9XG5cdCAgU3RhclNlZ21lbnQucHJvdG90eXBlID0ge1xuXHQgICAgZWFjaENoYXI6IGZ1bmN0aW9uIGVhY2hDaGFyKGNhbGxiYWNrKSB7XG5cdCAgICAgIGNhbGxiYWNrKHsgaW52YWxpZENoYXJzOiBcIlwiLCByZXBlYXQ6IHRydWUgfSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlZ2V4OiBmdW5jdGlvbiByZWdleCgpIHtcblx0ICAgICAgcmV0dXJuIFwiKC4rKVwiO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUocGFyYW1zKSB7XG5cdCAgICAgIHZhciB2YWwgPSBwYXJhbXNbdGhpcy5uYW1lXTtcblx0ICAgICAgcmV0dXJuIHZhbCA9PSBudWxsID8gXCI6XCIgKyB0aGlzLm5hbWUgOiB2YWw7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gRXBzaWxvblNlZ21lbnQoKSB7fVxuXHQgIEVwc2lsb25TZWdtZW50LnByb3RvdHlwZSA9IHtcblx0ICAgIGVhY2hDaGFyOiBmdW5jdGlvbiBlYWNoQ2hhcigpIHt9LFxuXHQgICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuXHQgICAgICByZXR1cm4gXCJcIjtcblx0ICAgIH0sXG5cdCAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUoKSB7XG5cdCAgICAgIHJldHVybiBcIlwiO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIHBhcnNlKHJvdXRlLCBuYW1lcywgc3BlY2lmaWNpdHkpIHtcblx0ICAgIC8vIG5vcm1hbGl6ZSByb3V0ZSBhcyBub3Qgc3RhcnRpbmcgd2l0aCBhIFwiL1wiLiBSZWNvZ25pdGlvbiB3aWxsXG5cdCAgICAvLyBhbHNvIG5vcm1hbGl6ZS5cblx0ICAgIGlmIChyb3V0ZS5jaGFyQXQoMCkgPT09IFwiL1wiKSB7XG5cdCAgICAgIHJvdXRlID0gcm91dGUuc3Vic3RyKDEpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBzZWdtZW50cyA9IHJvdXRlLnNwbGl0KFwiL1wiKSxcblx0ICAgICAgICByZXN1bHRzID0gW107XG5cdFxuXHQgICAgLy8gQSByb3V0ZXMgaGFzIHNwZWNpZmljaXR5IGRldGVybWluZWQgYnkgdGhlIG9yZGVyIHRoYXQgaXRzIGRpZmZlcmVudCBzZWdtZW50c1xuXHQgICAgLy8gYXBwZWFyIGluLiBUaGlzIHN5c3RlbSBtaXJyb3JzIGhvdyB0aGUgbWFnbml0dWRlIG9mIG51bWJlcnMgd3JpdHRlbiBhcyBzdHJpbmdzXG5cdCAgICAvLyB3b3Jrcy5cblx0ICAgIC8vIENvbnNpZGVyIGEgbnVtYmVyIHdyaXR0ZW4gYXM6IFwiYWJjXCIuIEFuIGV4YW1wbGUgd291bGQgYmUgXCIyMDBcIi4gQW55IG90aGVyIG51bWJlciB3cml0dGVuXG5cdCAgICAvLyBcInh5elwiIHdpbGwgYmUgc21hbGxlciB0aGFuIFwiYWJjXCIgc28gbG9uZyBhcyBgYSA+IHpgLiBGb3IgaW5zdGFuY2UsIFwiMTk5XCIgaXMgc21hbGxlclxuXHQgICAgLy8gdGhlbiBcIjIwMFwiLCBldmVuIHRob3VnaCBcInlcIiBhbmQgXCJ6XCIgKHdoaWNoIGFyZSBib3RoIDkpIGFyZSBsYXJnZXIgdGhhbiBcIjBcIiAodGhlIHZhbHVlXG5cdCAgICAvLyBvZiAoYGJgIGFuZCBgY2ApLiBUaGlzIGlzIGJlY2F1c2UgdGhlIGxlYWRpbmcgc3ltYm9sLCBcIjJcIiwgaXMgbGFyZ2VyIHRoYW4gdGhlIG90aGVyXG5cdCAgICAvLyBsZWFkaW5nIHN5bWJvbCwgXCIxXCIuXG5cdCAgICAvLyBUaGUgcnVsZSBpcyB0aGF0IHN5bWJvbHMgdG8gdGhlIGxlZnQgY2FycnkgbW9yZSB3ZWlnaHQgdGhhbiBzeW1ib2xzIHRvIHRoZSByaWdodFxuXHQgICAgLy8gd2hlbiBhIG51bWJlciBpcyB3cml0dGVuIG91dCBhcyBhIHN0cmluZy4gSW4gdGhlIGFib3ZlIHN0cmluZ3MsIHRoZSBsZWFkaW5nIGRpZ2l0XG5cdCAgICAvLyByZXByZXNlbnRzIGhvdyBtYW55IDEwMCdzIGFyZSBpbiB0aGUgbnVtYmVyLCBhbmQgaXQgY2FycmllcyBtb3JlIHdlaWdodCB0aGFuIHRoZSBtaWRkbGVcblx0ICAgIC8vIG51bWJlciB3aGljaCByZXByZXNlbnRzIGhvdyBtYW55IDEwJ3MgYXJlIGluIHRoZSBudW1iZXIuXG5cdCAgICAvLyBUaGlzIHN5c3RlbSBvZiBudW1iZXIgbWFnbml0dWRlIHdvcmtzIHdlbGwgZm9yIHJvdXRlIHNwZWNpZmljaXR5LCB0b28uIEEgcm91dGUgd3JpdHRlbiBhc1xuXHQgICAgLy8gYGEvYi9jYCB3aWxsIGJlIG1vcmUgc3BlY2lmaWMgdGhhbiBgeC95L3pgIGFzIGxvbmcgYXMgYGFgIGlzIG1vcmUgc3BlY2lmaWMgdGhhblxuXHQgICAgLy8gYHhgLCBpcnJlc3BlY3RpdmUgb2YgdGhlIG90aGVyIHBhcnRzLlxuXHQgICAgLy8gQmVjYXVzZSBvZiB0aGlzIHNpbWlsYXJpdHksIHdlIGFzc2lnbiBlYWNoIHR5cGUgb2Ygc2VnbWVudCBhIG51bWJlciB2YWx1ZSB3cml0dGVuIGFzIGFcblx0ICAgIC8vIHN0cmluZy4gV2UgY2FuIGZpbmQgdGhlIHNwZWNpZmljaXR5IG9mIGNvbXBvdW5kIHJvdXRlcyBieSBjb25jYXRlbmF0aW5nIHRoZXNlIHN0cmluZ3Ncblx0ICAgIC8vIHRvZ2V0aGVyLCBmcm9tIGxlZnQgdG8gcmlnaHQuIEFmdGVyIHdlIGhhdmUgbG9vcGVkIHRocm91Z2ggYWxsIG9mIHRoZSBzZWdtZW50cyxcblx0ICAgIC8vIHdlIGNvbnZlcnQgdGhlIHN0cmluZyB0byBhIG51bWJlci5cblx0ICAgIHNwZWNpZmljaXR5LnZhbCA9ICcnO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gc2VnbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbaV0sXG5cdCAgICAgICAgICBtYXRjaDtcblx0XG5cdCAgICAgIGlmIChtYXRjaCA9IHNlZ21lbnQubWF0Y2goL146KFteXFwvXSspJC8pKSB7XG5cdCAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBEeW5hbWljU2VnbWVudChtYXRjaFsxXSkpO1xuXHQgICAgICAgIG5hbWVzLnB1c2gobWF0Y2hbMV0pO1xuXHQgICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnMyc7XG5cdCAgICAgIH0gZWxzZSBpZiAobWF0Y2ggPSBzZWdtZW50Lm1hdGNoKC9eXFwqKFteXFwvXSspJC8pKSB7XG5cdCAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBTdGFyU2VnbWVudChtYXRjaFsxXSkpO1xuXHQgICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnMic7XG5cdCAgICAgICAgbmFtZXMucHVzaChtYXRjaFsxXSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoc2VnbWVudCA9PT0gXCJcIikge1xuXHQgICAgICAgIHJlc3VsdHMucHVzaChuZXcgRXBzaWxvblNlZ21lbnQoKSk7XG5cdCAgICAgICAgc3BlY2lmaWNpdHkudmFsICs9ICcxJztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXN1bHRzLnB1c2gobmV3IFN0YXRpY1NlZ21lbnQoc2VnbWVudCkpO1xuXHQgICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnNCc7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBzcGVjaWZpY2l0eS52YWwgPSArc3BlY2lmaWNpdHkudmFsO1xuXHRcblx0ICAgIHJldHVybiByZXN1bHRzO1xuXHQgIH1cblx0XG5cdCAgLy8gQSBTdGF0ZSBoYXMgYSBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiBhbmQgKGBjaGFyU3BlY2ApIGFuZCBhIGxpc3Qgb2YgcG9zc2libGVcblx0ICAvLyBzdWJzZXF1ZW50IHN0YXRlcyAoYG5leHRTdGF0ZXNgKS5cblx0ICAvL1xuXHQgIC8vIElmIGEgU3RhdGUgaXMgYW4gYWNjZXB0aW5nIHN0YXRlLCBpdCB3aWxsIGFsc28gaGF2ZSBzZXZlcmFsIGFkZGl0aW9uYWxcblx0ICAvLyBwcm9wZXJ0aWVzOlxuXHQgIC8vXG5cdCAgLy8gKiBgcmVnZXhgOiBBIHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIHVzZWQgdG8gZXh0cmFjdCBwYXJhbWV0ZXJzIGZyb20gcGF0aHNcblx0ICAvLyAgIHRoYXQgcmVhY2hlZCB0aGlzIGFjY2VwdGluZyBzdGF0ZS5cblx0ICAvLyAqIGBoYW5kbGVyc2A6IEluZm9ybWF0aW9uIG9uIGhvdyB0byBjb252ZXJ0IHRoZSBsaXN0IG9mIGNhcHR1cmVzIGludG8gY2FsbHNcblx0ICAvLyAgIHRvIHJlZ2lzdGVyZWQgaGFuZGxlcnMgd2l0aCB0aGUgc3BlY2lmaWVkIHBhcmFtZXRlcnNcblx0ICAvLyAqIGB0eXBlc2A6IEhvdyBtYW55IHN0YXRpYywgZHluYW1pYyBvciBzdGFyIHNlZ21lbnRzIGluIHRoaXMgcm91dGUuIFVzZWQgdG9cblx0ICAvLyAgIGRlY2lkZSB3aGljaCByb3V0ZSB0byB1c2UgaWYgbXVsdGlwbGUgcmVnaXN0ZXJlZCByb3V0ZXMgbWF0Y2ggYSBwYXRoLlxuXHQgIC8vXG5cdCAgLy8gQ3VycmVudGx5LCBTdGF0ZSBpcyBpbXBsZW1lbnRlZCBuYWl2ZWx5IGJ5IGxvb3Bpbmcgb3ZlciBgbmV4dFN0YXRlc2AgYW5kXG5cdCAgLy8gY29tcGFyaW5nIGEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gYWdhaW5zdCBhIGNoYXJhY3Rlci4gQSBtb3JlIGVmZmljaWVudFxuXHQgIC8vIGltcGxlbWVudGF0aW9uIHdvdWxkIHVzZSBhIGhhc2ggb2Yga2V5cyBwb2ludGluZyBhdCBvbmUgb3IgbW9yZSBuZXh0IHN0YXRlcy5cblx0XG5cdCAgZnVuY3Rpb24gU3RhdGUoY2hhclNwZWMpIHtcblx0ICAgIHRoaXMuY2hhclNwZWMgPSBjaGFyU3BlYztcblx0ICAgIHRoaXMubmV4dFN0YXRlcyA9IFtdO1xuXHQgIH1cblx0XG5cdCAgU3RhdGUucHJvdG90eXBlID0ge1xuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoY2hhclNwZWMpIHtcblx0ICAgICAgdmFyIG5leHRTdGF0ZXMgPSB0aGlzLm5leHRTdGF0ZXM7XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5leHRTdGF0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIGNoaWxkID0gbmV4dFN0YXRlc1tpXTtcblx0XG5cdCAgICAgICAgdmFyIGlzRXF1YWwgPSBjaGlsZC5jaGFyU3BlYy52YWxpZENoYXJzID09PSBjaGFyU3BlYy52YWxpZENoYXJzO1xuXHQgICAgICAgIGlzRXF1YWwgPSBpc0VxdWFsICYmIGNoaWxkLmNoYXJTcGVjLmludmFsaWRDaGFycyA9PT0gY2hhclNwZWMuaW52YWxpZENoYXJzO1xuXHRcblx0ICAgICAgICBpZiAoaXNFcXVhbCkge1xuXHQgICAgICAgICAgcmV0dXJuIGNoaWxkO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICBwdXQ6IGZ1bmN0aW9uIHB1dChjaGFyU3BlYykge1xuXHQgICAgICB2YXIgc3RhdGU7XG5cdFxuXHQgICAgICAvLyBJZiB0aGUgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gYWxyZWFkeSBleGlzdHMgaW4gYSBjaGlsZCBvZiB0aGUgY3VycmVudFxuXHQgICAgICAvLyBzdGF0ZSwganVzdCByZXR1cm4gdGhhdCBzdGF0ZS5cblx0ICAgICAgaWYgKHN0YXRlID0gdGhpcy5nZXQoY2hhclNwZWMpKSB7XG5cdCAgICAgICAgcmV0dXJuIHN0YXRlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBNYWtlIGEgbmV3IHN0YXRlIGZvciB0aGUgY2hhcmFjdGVyIHNwZWNcblx0ICAgICAgc3RhdGUgPSBuZXcgU3RhdGUoY2hhclNwZWMpO1xuXHRcblx0ICAgICAgLy8gSW5zZXJ0IHRoZSBuZXcgc3RhdGUgYXMgYSBjaGlsZCBvZiB0aGUgY3VycmVudCBzdGF0ZVxuXHQgICAgICB0aGlzLm5leHRTdGF0ZXMucHVzaChzdGF0ZSk7XG5cdFxuXHQgICAgICAvLyBJZiB0aGlzIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIHJlcGVhdHMsIGluc2VydCB0aGUgbmV3IHN0YXRlIGFzIGEgY2hpbGRcblx0ICAgICAgLy8gb2YgaXRzZWxmLiBOb3RlIHRoYXQgdGhpcyB3aWxsIG5vdCB0cmlnZ2VyIGFuIGluZmluaXRlIGxvb3AgYmVjYXVzZSBlYWNoXG5cdCAgICAgIC8vIHRyYW5zaXRpb24gZHVyaW5nIHJlY29nbml0aW9uIGNvbnN1bWVzIGEgY2hhcmFjdGVyLlxuXHQgICAgICBpZiAoY2hhclNwZWMucmVwZWF0KSB7XG5cdCAgICAgICAgc3RhdGUubmV4dFN0YXRlcy5wdXNoKHN0YXRlKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gUmV0dXJuIHRoZSBuZXcgc3RhdGVcblx0ICAgICAgcmV0dXJuIHN0YXRlO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBGaW5kIGEgbGlzdCBvZiBjaGlsZCBzdGF0ZXMgbWF0Y2hpbmcgdGhlIG5leHQgY2hhcmFjdGVyXG5cdCAgICBtYXRjaDogZnVuY3Rpb24gbWF0Y2goY2gpIHtcblx0ICAgICAgLy8gREVCVUcgXCJQcm9jZXNzaW5nIGBcIiArIGNoICsgXCJgOlwiXG5cdCAgICAgIHZhciBuZXh0U3RhdGVzID0gdGhpcy5uZXh0U3RhdGVzLFxuXHQgICAgICAgICAgY2hpbGQsXG5cdCAgICAgICAgICBjaGFyU3BlYyxcblx0ICAgICAgICAgIGNoYXJzO1xuXHRcblx0ICAgICAgLy8gREVCVUcgXCIgIFwiICsgZGVidWdTdGF0ZSh0aGlzKVxuXHQgICAgICB2YXIgcmV0dXJuZWQgPSBbXTtcblx0XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbmV4dFN0YXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBjaGlsZCA9IG5leHRTdGF0ZXNbaV07XG5cdFxuXHQgICAgICAgIGNoYXJTcGVjID0gY2hpbGQuY2hhclNwZWM7XG5cdFxuXHQgICAgICAgIGlmICh0eXBlb2YgKGNoYXJzID0gY2hhclNwZWMudmFsaWRDaGFycykgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgICBpZiAoY2hhcnMuaW5kZXhPZihjaCkgIT09IC0xKSB7XG5cdCAgICAgICAgICAgIHJldHVybmVkLnB1c2goY2hpbGQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIChjaGFycyA9IGNoYXJTcGVjLmludmFsaWRDaGFycykgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgICBpZiAoY2hhcnMuaW5kZXhPZihjaCkgPT09IC0xKSB7XG5cdCAgICAgICAgICAgIHJldHVybmVkLnB1c2goY2hpbGQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIHJldHVybmVkO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKiBJRiBERUJVR1xuXHQgICAgLCBkZWJ1ZzogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBjaGFyU3BlYyA9IHRoaXMuY2hhclNwZWMsXG5cdCAgICAgICAgICBkZWJ1ZyA9IFwiW1wiLFxuXHQgICAgICAgICAgY2hhcnMgPSBjaGFyU3BlYy52YWxpZENoYXJzIHx8IGNoYXJTcGVjLmludmFsaWRDaGFycztcblx0ICAgICAgIGlmIChjaGFyU3BlYy5pbnZhbGlkQ2hhcnMpIHsgZGVidWcgKz0gXCJeXCI7IH1cblx0ICAgICAgZGVidWcgKz0gY2hhcnM7XG5cdCAgICAgIGRlYnVnICs9IFwiXVwiO1xuXHQgICAgICAgaWYgKGNoYXJTcGVjLnJlcGVhdCkgeyBkZWJ1ZyArPSBcIitcIjsgfVxuXHQgICAgICAgcmV0dXJuIGRlYnVnO1xuXHQgICAgfVxuXHQgICAgRU5EIElGICoqL1xuXHQgIH07XG5cdFxuXHQgIC8qKiBJRiBERUJVR1xuXHQgIGZ1bmN0aW9uIGRlYnVnKGxvZykge1xuXHQgICAgY29uc29sZS5sb2cobG9nKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGRlYnVnU3RhdGUoc3RhdGUpIHtcblx0ICAgIHJldHVybiBzdGF0ZS5uZXh0U3RhdGVzLm1hcChmdW5jdGlvbihuKSB7XG5cdCAgICAgIGlmIChuLm5leHRTdGF0ZXMubGVuZ3RoID09PSAwKSB7IHJldHVybiBcIiggXCIgKyBuLmRlYnVnKCkgKyBcIiBbYWNjZXB0aW5nXSApXCI7IH1cblx0ICAgICAgcmV0dXJuIFwiKCBcIiArIG4uZGVidWcoKSArIFwiIDx0aGVuPiBcIiArIG4ubmV4dFN0YXRlcy5tYXAoZnVuY3Rpb24ocykgeyByZXR1cm4gcy5kZWJ1ZygpIH0pLmpvaW4oXCIgb3IgXCIpICsgXCIgKVwiO1xuXHQgICAgfSkuam9pbihcIiwgXCIpXG5cdCAgfVxuXHQgIEVORCBJRiAqKi9cblx0XG5cdCAgLy8gU29ydCB0aGUgcm91dGVzIGJ5IHNwZWNpZmljaXR5XG5cdCAgZnVuY3Rpb24gc29ydFNvbHV0aW9ucyhzdGF0ZXMpIHtcblx0ICAgIHJldHVybiBzdGF0ZXMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuXHQgICAgICByZXR1cm4gYi5zcGVjaWZpY2l0eS52YWwgLSBhLnNwZWNpZmljaXR5LnZhbDtcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVjb2duaXplQ2hhcihzdGF0ZXMsIGNoKSB7XG5cdCAgICB2YXIgbmV4dFN0YXRlcyA9IFtdO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gc3RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgc3RhdGUgPSBzdGF0ZXNbaV07XG5cdFxuXHQgICAgICBuZXh0U3RhdGVzID0gbmV4dFN0YXRlcy5jb25jYXQoc3RhdGUubWF0Y2goY2gpKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gbmV4dFN0YXRlcztcblx0ICB9XG5cdFxuXHQgIHZhciBvQ3JlYXRlID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbiAocHJvdG8pIHtcblx0ICAgIGZ1bmN0aW9uIEYoKSB7fVxuXHQgICAgRi5wcm90b3R5cGUgPSBwcm90bztcblx0ICAgIHJldHVybiBuZXcgRigpO1xuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIFJlY29nbml6ZVJlc3VsdHMocXVlcnlQYXJhbXMpIHtcblx0ICAgIHRoaXMucXVlcnlQYXJhbXMgPSBxdWVyeVBhcmFtcyB8fCB7fTtcblx0ICB9XG5cdCAgUmVjb2duaXplUmVzdWx0cy5wcm90b3R5cGUgPSBvQ3JlYXRlKHtcblx0ICAgIHNwbGljZTogQXJyYXkucHJvdG90eXBlLnNwbGljZSxcblx0ICAgIHNsaWNlOiBBcnJheS5wcm90b3R5cGUuc2xpY2UsXG5cdCAgICBwdXNoOiBBcnJheS5wcm90b3R5cGUucHVzaCxcblx0ICAgIGxlbmd0aDogMCxcblx0ICAgIHF1ZXJ5UGFyYW1zOiBudWxsXG5cdCAgfSk7XG5cdFxuXHQgIGZ1bmN0aW9uIGZpbmRIYW5kbGVyKHN0YXRlLCBwYXRoLCBxdWVyeVBhcmFtcykge1xuXHQgICAgdmFyIGhhbmRsZXJzID0gc3RhdGUuaGFuZGxlcnMsXG5cdCAgICAgICAgcmVnZXggPSBzdGF0ZS5yZWdleDtcblx0ICAgIHZhciBjYXB0dXJlcyA9IHBhdGgubWF0Y2gocmVnZXgpLFxuXHQgICAgICAgIGN1cnJlbnRDYXB0dXJlID0gMTtcblx0ICAgIHZhciByZXN1bHQgPSBuZXcgUmVjb2duaXplUmVzdWx0cyhxdWVyeVBhcmFtcyk7XG5cdFxuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIGhhbmRsZXIgPSBoYW5kbGVyc1tpXSxcblx0ICAgICAgICAgIG5hbWVzID0gaGFuZGxlci5uYW1lcyxcblx0ICAgICAgICAgIHBhcmFtcyA9IHt9O1xuXHRcblx0ICAgICAgZm9yICh2YXIgaiA9IDAsIG0gPSBuYW1lcy5sZW5ndGg7IGogPCBtOyBqKyspIHtcblx0ICAgICAgICBwYXJhbXNbbmFtZXNbal1dID0gY2FwdHVyZXNbY3VycmVudENhcHR1cmUrK107XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJlc3VsdC5wdXNoKHsgaGFuZGxlcjogaGFuZGxlci5oYW5kbGVyLCBwYXJhbXM6IHBhcmFtcywgaXNEeW5hbWljOiAhIW5hbWVzLmxlbmd0aCB9KTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gYWRkU2VnbWVudChjdXJyZW50U3RhdGUsIHNlZ21lbnQpIHtcblx0ICAgIHNlZ21lbnQuZWFjaENoYXIoZnVuY3Rpb24gKGNoKSB7XG5cdCAgICAgIHZhciBzdGF0ZTtcblx0XG5cdCAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRTdGF0ZS5wdXQoY2gpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgcmV0dXJuIGN1cnJlbnRTdGF0ZTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGRlY29kZVF1ZXJ5UGFyYW1QYXJ0KHBhcnQpIHtcblx0ICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw0MDEvaW50ZXJhY3QvZm9ybXMuaHRtbCNoLTE3LjEzLjQuMVxuXHQgICAgcGFydCA9IHBhcnQucmVwbGFjZSgvXFwrL2dtLCAnJTIwJyk7XG5cdCAgICByZXR1cm4gdHJ5RGVjb2RlKHBhcnQsIHRydWUpO1xuXHQgIH1cblx0XG5cdCAgLy8gVGhlIG1haW4gaW50ZXJmYWNlXG5cdFxuXHQgIHZhciBSb3V0ZVJlY29nbml6ZXIgPSBmdW5jdGlvbiBSb3V0ZVJlY29nbml6ZXIoKSB7XG5cdCAgICB0aGlzLnJvb3RTdGF0ZSA9IG5ldyBTdGF0ZSgpO1xuXHQgICAgdGhpcy5uYW1lcyA9IHt9O1xuXHQgIH07XG5cdFxuXHQgIFJvdXRlUmVjb2duaXplci5wcm90b3R5cGUgPSB7XG5cdCAgICBhZGQ6IGZ1bmN0aW9uIGFkZChyb3V0ZXMsIG9wdGlvbnMpIHtcblx0ICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IHRoaXMucm9vdFN0YXRlLFxuXHQgICAgICAgICAgcmVnZXggPSBcIl5cIixcblx0ICAgICAgICAgIHNwZWNpZmljaXR5ID0ge30sXG5cdCAgICAgICAgICBoYW5kbGVycyA9IFtdLFxuXHQgICAgICAgICAgYWxsU2VnbWVudHMgPSBbXSxcblx0ICAgICAgICAgIG5hbWU7XG5cdFxuXHQgICAgICB2YXIgaXNFbXB0eSA9IHRydWU7XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHJvdXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICB2YXIgcm91dGUgPSByb3V0ZXNbaV0sXG5cdCAgICAgICAgICAgIG5hbWVzID0gW107XG5cdFxuXHQgICAgICAgIHZhciBzZWdtZW50cyA9IHBhcnNlKHJvdXRlLnBhdGgsIG5hbWVzLCBzcGVjaWZpY2l0eSk7XG5cdFxuXHQgICAgICAgIGFsbFNlZ21lbnRzID0gYWxsU2VnbWVudHMuY29uY2F0KHNlZ21lbnRzKTtcblx0XG5cdCAgICAgICAgZm9yICh2YXIgaiA9IDAsIG0gPSBzZWdtZW50cy5sZW5ndGg7IGogPCBtOyBqKyspIHtcblx0ICAgICAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbal07XG5cdFxuXHQgICAgICAgICAgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBFcHNpbG9uU2VnbWVudCkge1xuXHQgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpc0VtcHR5ID0gZmFsc2U7XG5cdFxuXHQgICAgICAgICAgLy8gQWRkIGEgXCIvXCIgZm9yIHRoZSBuZXcgc2VnbWVudFxuXHQgICAgICAgICAgY3VycmVudFN0YXRlID0gY3VycmVudFN0YXRlLnB1dCh7IHZhbGlkQ2hhcnM6IFwiL1wiIH0pO1xuXHQgICAgICAgICAgcmVnZXggKz0gXCIvXCI7XG5cdFxuXHQgICAgICAgICAgLy8gQWRkIGEgcmVwcmVzZW50YXRpb24gb2YgdGhlIHNlZ21lbnQgdG8gdGhlIE5GQSBhbmQgcmVnZXhcblx0ICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IGFkZFNlZ21lbnQoY3VycmVudFN0YXRlLCBzZWdtZW50KTtcblx0ICAgICAgICAgIHJlZ2V4ICs9IHNlZ21lbnQucmVnZXgoKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciBoYW5kbGVyID0geyBoYW5kbGVyOiByb3V0ZS5oYW5kbGVyLCBuYW1lczogbmFtZXMgfTtcblx0ICAgICAgICBoYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoaXNFbXB0eSkge1xuXHQgICAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRTdGF0ZS5wdXQoeyB2YWxpZENoYXJzOiBcIi9cIiB9KTtcblx0ICAgICAgICByZWdleCArPSBcIi9cIjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgY3VycmVudFN0YXRlLmhhbmRsZXJzID0gaGFuZGxlcnM7XG5cdCAgICAgIGN1cnJlbnRTdGF0ZS5yZWdleCA9IG5ldyBSZWdFeHAocmVnZXggKyBcIiRcIik7XG5cdCAgICAgIGN1cnJlbnRTdGF0ZS5zcGVjaWZpY2l0eSA9IHNwZWNpZmljaXR5O1xuXHRcblx0ICAgICAgaWYgKG5hbWUgPSBvcHRpb25zICYmIG9wdGlvbnMuYXMpIHtcblx0ICAgICAgICB0aGlzLm5hbWVzW25hbWVdID0ge1xuXHQgICAgICAgICAgc2VnbWVudHM6IGFsbFNlZ21lbnRzLFxuXHQgICAgICAgICAgaGFuZGxlcnM6IGhhbmRsZXJzXG5cdCAgICAgICAgfTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICBoYW5kbGVyc0ZvcjogZnVuY3Rpb24gaGFuZGxlcnNGb3IobmFtZSkge1xuXHQgICAgICB2YXIgcm91dGUgPSB0aGlzLm5hbWVzW25hbWVdLFxuXHQgICAgICAgICAgcmVzdWx0ID0gW107XG5cdCAgICAgIGlmICghcm91dGUpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGVyZSBpcyBubyByb3V0ZSBuYW1lZCBcIiArIG5hbWUpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHJvdXRlLmhhbmRsZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHJlc3VsdC5wdXNoKHJvdXRlLmhhbmRsZXJzW2ldKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgIH0sXG5cdFxuXHQgICAgaGFzUm91dGU6IGZ1bmN0aW9uIGhhc1JvdXRlKG5hbWUpIHtcblx0ICAgICAgcmV0dXJuICEhdGhpcy5uYW1lc1tuYW1lXTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2VuZXJhdGU6IGZ1bmN0aW9uIGdlbmVyYXRlKG5hbWUsIHBhcmFtcykge1xuXHQgICAgICB2YXIgcm91dGUgPSB0aGlzLm5hbWVzW25hbWVdLFxuXHQgICAgICAgICAgb3V0cHV0ID0gXCJcIjtcblx0ICAgICAgaWYgKCFyb3V0ZSkge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZXJlIGlzIG5vIHJvdXRlIG5hbWVkIFwiICsgbmFtZSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBzZWdtZW50cyA9IHJvdXRlLnNlZ21lbnRzO1xuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzZWdtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2ldO1xuXHRcblx0ICAgICAgICBpZiAoc2VnbWVudCBpbnN0YW5jZW9mIEVwc2lsb25TZWdtZW50KSB7XG5cdCAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIG91dHB1dCArPSBcIi9cIjtcblx0ICAgICAgICBvdXRwdXQgKz0gc2VnbWVudC5nZW5lcmF0ZShwYXJhbXMpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAob3V0cHV0LmNoYXJBdCgwKSAhPT0gJy8nKSB7XG5cdCAgICAgICAgb3V0cHV0ID0gJy8nICsgb3V0cHV0O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5xdWVyeVBhcmFtcykge1xuXHQgICAgICAgIG91dHB1dCArPSB0aGlzLmdlbmVyYXRlUXVlcnlTdHJpbmcocGFyYW1zLnF1ZXJ5UGFyYW1zKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIG91dHB1dDtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2VuZXJhdGVRdWVyeVN0cmluZzogZnVuY3Rpb24gZ2VuZXJhdGVRdWVyeVN0cmluZyhwYXJhbXMpIHtcblx0ICAgICAgdmFyIHBhaXJzID0gW107XG5cdCAgICAgIHZhciBrZXlzID0gW107XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiBwYXJhbXMpIHtcblx0ICAgICAgICBpZiAocGFyYW1zLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0ICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBrZXlzLnNvcnQoKTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGtleXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICAgIHZhciB2YWx1ZSA9IHBhcmFtc1trZXldO1xuXHQgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG5cdCAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHBhaXIgPSBlbmNvZGVVUklDb21wb25lbnQoa2V5KTtcblx0ICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgICAgIGZvciAodmFyIGogPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBqIDwgbDsgaisrKSB7XG5cdCAgICAgICAgICAgIHZhciBhcnJheVBhaXIgPSBrZXkgKyAnW10nICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlW2pdKTtcblx0ICAgICAgICAgICAgcGFpcnMucHVzaChhcnJheVBhaXIpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBwYWlyICs9IFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcblx0ICAgICAgICAgIHBhaXJzLnB1c2gocGFpcik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAocGFpcnMubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuICcnO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gXCI/XCIgKyBwYWlycy5qb2luKFwiJlwiKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgcGFyc2VRdWVyeVN0cmluZzogZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZyhxdWVyeVN0cmluZykge1xuXHQgICAgICB2YXIgcGFpcnMgPSBxdWVyeVN0cmluZy5zcGxpdChcIiZcIiksXG5cdCAgICAgICAgICBxdWVyeVBhcmFtcyA9IHt9O1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhaXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIHBhaXIgPSBwYWlyc1tpXS5zcGxpdCgnPScpLFxuXHQgICAgICAgICAgICBrZXkgPSBkZWNvZGVRdWVyeVBhcmFtUGFydChwYWlyWzBdKSxcblx0ICAgICAgICAgICAga2V5TGVuZ3RoID0ga2V5Lmxlbmd0aCxcblx0ICAgICAgICAgICAgaXNBcnJheSA9IGZhbHNlLFxuXHQgICAgICAgICAgICB2YWx1ZTtcblx0ICAgICAgICBpZiAocGFpci5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICAgIHZhbHVlID0gJ3RydWUnO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvL0hhbmRsZSBhcnJheXNcblx0ICAgICAgICAgIGlmIChrZXlMZW5ndGggPiAyICYmIGtleS5zbGljZShrZXlMZW5ndGggLSAyKSA9PT0gJ1tdJykge1xuXHQgICAgICAgICAgICBpc0FycmF5ID0gdHJ1ZTtcblx0ICAgICAgICAgICAga2V5ID0ga2V5LnNsaWNlKDAsIGtleUxlbmd0aCAtIDIpO1xuXHQgICAgICAgICAgICBpZiAoIXF1ZXJ5UGFyYW1zW2tleV0pIHtcblx0ICAgICAgICAgICAgICBxdWVyeVBhcmFtc1trZXldID0gW107XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIHZhbHVlID0gcGFpclsxXSA/IGRlY29kZVF1ZXJ5UGFyYW1QYXJ0KHBhaXJbMV0pIDogJyc7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChpc0FycmF5KSB7XG5cdCAgICAgICAgICBxdWVyeVBhcmFtc1trZXldLnB1c2godmFsdWUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBxdWVyeVBhcmFtc1trZXldID0gdmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBxdWVyeVBhcmFtcztcblx0ICAgIH0sXG5cdFxuXHQgICAgcmVjb2duaXplOiBmdW5jdGlvbiByZWNvZ25pemUocGF0aCwgc2lsZW50KSB7XG5cdCAgICAgIG5vV2FybmluZyA9IHNpbGVudDtcblx0ICAgICAgdmFyIHN0YXRlcyA9IFt0aGlzLnJvb3RTdGF0ZV0sXG5cdCAgICAgICAgICBwYXRoTGVuLFxuXHQgICAgICAgICAgaSxcblx0ICAgICAgICAgIGwsXG5cdCAgICAgICAgICBxdWVyeVN0YXJ0LFxuXHQgICAgICAgICAgcXVlcnlQYXJhbXMgPSB7fSxcblx0ICAgICAgICAgIGlzU2xhc2hEcm9wcGVkID0gZmFsc2U7XG5cdFxuXHQgICAgICBxdWVyeVN0YXJ0ID0gcGF0aC5pbmRleE9mKCc/Jyk7XG5cdCAgICAgIGlmIChxdWVyeVN0YXJ0ICE9PSAtMSkge1xuXHQgICAgICAgIHZhciBxdWVyeVN0cmluZyA9IHBhdGguc3Vic3RyKHF1ZXJ5U3RhcnQgKyAxLCBwYXRoLmxlbmd0aCk7XG5cdCAgICAgICAgcGF0aCA9IHBhdGguc3Vic3RyKDAsIHF1ZXJ5U3RhcnQpO1xuXHQgICAgICAgIGlmIChxdWVyeVN0cmluZykge1xuXHQgICAgICAgICAgcXVlcnlQYXJhbXMgPSB0aGlzLnBhcnNlUXVlcnlTdHJpbmcocXVlcnlTdHJpbmcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgcGF0aCA9IHRyeURlY29kZShwYXRoKTtcblx0ICAgICAgaWYgKCFwYXRoKSByZXR1cm47XG5cdFxuXHQgICAgICAvLyBERUJVRyBHUk9VUCBwYXRoXG5cdFxuXHQgICAgICBpZiAocGF0aC5jaGFyQXQoMCkgIT09IFwiL1wiKSB7XG5cdCAgICAgICAgcGF0aCA9IFwiL1wiICsgcGF0aDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcGF0aExlbiA9IHBhdGgubGVuZ3RoO1xuXHQgICAgICBpZiAocGF0aExlbiA+IDEgJiYgcGF0aC5jaGFyQXQocGF0aExlbiAtIDEpID09PSBcIi9cIikge1xuXHQgICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cigwLCBwYXRoTGVuIC0gMSk7XG5cdCAgICAgICAgaXNTbGFzaERyb3BwZWQgPSB0cnVlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBmb3IgKGkgPSAwLCBsID0gcGF0aC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBzdGF0ZXMgPSByZWNvZ25pemVDaGFyKHN0YXRlcywgcGF0aC5jaGFyQXQoaSkpO1xuXHQgICAgICAgIGlmICghc3RhdGVzLmxlbmd0aCkge1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBFTkQgREVCVUcgR1JPVVBcblx0XG5cdCAgICAgIHZhciBzb2x1dGlvbnMgPSBbXTtcblx0ICAgICAgZm9yIChpID0gMCwgbCA9IHN0YXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBpZiAoc3RhdGVzW2ldLmhhbmRsZXJzKSB7XG5cdCAgICAgICAgICBzb2x1dGlvbnMucHVzaChzdGF0ZXNbaV0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgc3RhdGVzID0gc29ydFNvbHV0aW9ucyhzb2x1dGlvbnMpO1xuXHRcblx0ICAgICAgdmFyIHN0YXRlID0gc29sdXRpb25zWzBdO1xuXHRcblx0ICAgICAgaWYgKHN0YXRlICYmIHN0YXRlLmhhbmRsZXJzKSB7XG5cdCAgICAgICAgLy8gaWYgYSB0cmFpbGluZyBzbGFzaCB3YXMgZHJvcHBlZCBhbmQgYSBzdGFyIHNlZ21lbnQgaXMgdGhlIGxhc3Qgc2VnbWVudFxuXHQgICAgICAgIC8vIHNwZWNpZmllZCwgcHV0IHRoZSB0cmFpbGluZyBzbGFzaCBiYWNrXG5cdCAgICAgICAgaWYgKGlzU2xhc2hEcm9wcGVkICYmIHN0YXRlLnJlZ2V4LnNvdXJjZS5zbGljZSgtNSkgPT09IFwiKC4rKSRcIikge1xuXHQgICAgICAgICAgcGF0aCA9IHBhdGggKyBcIi9cIjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIGZpbmRIYW5kbGVyKHN0YXRlLCBwYXRoLCBxdWVyeVBhcmFtcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBSb3V0ZVJlY29nbml6ZXIucHJvdG90eXBlLm1hcCA9IG1hcDtcblx0XG5cdCAgdmFyIGdlblF1ZXJ5ID0gUm91dGVSZWNvZ25pemVyLnByb3RvdHlwZS5nZW5lcmF0ZVF1ZXJ5U3RyaW5nO1xuXHRcblx0ICAvLyBleHBvcnQgZGVmYXVsdCBmb3IgaG9sZGluZyB0aGUgVnVlIHJlZmVyZW5jZVxuXHQgIHZhciBleHBvcnRzJDEgPSB7fTtcblx0ICAvKipcblx0ICAgKiBXYXJuIHN0dWZmLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1zZ1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiB3YXJuJDEobXNnKSB7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHQgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICBjb25zb2xlLmVycm9yKCdbdnVlLXJvdXRlcl0gJyArIG1zZyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBSZXNvbHZlIGEgcmVsYXRpdmUgcGF0aC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBiYXNlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHJlbGF0aXZlXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBhcHBlbmRcblx0ICAgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJlc29sdmVQYXRoKGJhc2UsIHJlbGF0aXZlLCBhcHBlbmQpIHtcblx0ICAgIHZhciBxdWVyeSA9IGJhc2UubWF0Y2goLyhcXD8uKikkLyk7XG5cdCAgICBpZiAocXVlcnkpIHtcblx0ICAgICAgcXVlcnkgPSBxdWVyeVsxXTtcblx0ICAgICAgYmFzZSA9IGJhc2Uuc2xpY2UoMCwgLXF1ZXJ5Lmxlbmd0aCk7XG5cdCAgICB9XG5cdCAgICAvLyBhIHF1ZXJ5IVxuXHQgICAgaWYgKHJlbGF0aXZlLmNoYXJBdCgwKSA9PT0gJz8nKSB7XG5cdCAgICAgIHJldHVybiBiYXNlICsgcmVsYXRpdmU7XG5cdCAgICB9XG5cdCAgICB2YXIgc3RhY2sgPSBiYXNlLnNwbGl0KCcvJyk7XG5cdCAgICAvLyByZW1vdmUgdHJhaWxpbmcgc2VnbWVudCBpZjpcblx0ICAgIC8vIC0gbm90IGFwcGVuZGluZ1xuXHQgICAgLy8gLSBhcHBlbmRpbmcgdG8gdHJhaWxpbmcgc2xhc2ggKGxhc3Qgc2VnbWVudCBpcyBlbXB0eSlcblx0ICAgIGlmICghYXBwZW5kIHx8ICFzdGFja1tzdGFjay5sZW5ndGggLSAxXSkge1xuXHQgICAgICBzdGFjay5wb3AoKTtcblx0ICAgIH1cblx0ICAgIC8vIHJlc29sdmUgcmVsYXRpdmUgcGF0aFxuXHQgICAgdmFyIHNlZ21lbnRzID0gcmVsYXRpdmUucmVwbGFjZSgvXlxcLy8sICcnKS5zcGxpdCgnLycpO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2ldO1xuXHQgICAgICBpZiAoc2VnbWVudCA9PT0gJy4nKSB7XG5cdCAgICAgICAgY29udGludWU7XG5cdCAgICAgIH0gZWxzZSBpZiAoc2VnbWVudCA9PT0gJy4uJykge1xuXHQgICAgICAgIHN0YWNrLnBvcCgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHN0YWNrLnB1c2goc2VnbWVudCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIGVuc3VyZSBsZWFkaW5nIHNsYXNoXG5cdCAgICBpZiAoc3RhY2tbMF0gIT09ICcnKSB7XG5cdCAgICAgIHN0YWNrLnVuc2hpZnQoJycpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHN0YWNrLmpvaW4oJy8nKTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEZvcmdpdmluZyBjaGVjayBmb3IgYSBwcm9taXNlXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gcFxuXHQgICAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGlzUHJvbWlzZShwKSB7XG5cdCAgICByZXR1cm4gcCAmJiB0eXBlb2YgcC50aGVuID09PSAnZnVuY3Rpb24nO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmV0cml2ZSBhIHJvdXRlIGNvbmZpZyBmaWVsZCBmcm9tIGEgY29tcG9uZW50IGluc3RhbmNlXG5cdCAgICogT1IgYSBjb21wb25lbnQgY29udHJ1Y3Rvci5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb258VnVlfSBjb21wb25lbnRcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgICAqIEByZXR1cm4geyp9XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGdldFJvdXRlQ29uZmlnKGNvbXBvbmVudCwgbmFtZSkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSBjb21wb25lbnQgJiYgKGNvbXBvbmVudC4kb3B0aW9ucyB8fCBjb21wb25lbnQub3B0aW9ucyk7XG5cdCAgICByZXR1cm4gb3B0aW9ucyAmJiBvcHRpb25zLnJvdXRlICYmIG9wdGlvbnMucm91dGVbbmFtZV07XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBSZXNvbHZlIGFuIGFzeW5jIGNvbXBvbmVudCBmYWN0b3J5LiBIYXZlIHRvIGRvIGEgZGlydHlcblx0ICAgKiBtb2NrIGhlcmUgYmVjYXVzZSBvZiBWdWUgY29yZSdzIGludGVybmFsIEFQSSBkZXBlbmRzIG9uXG5cdCAgICogYW4gSUQgY2hlY2suXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICovXG5cdFxuXHQgIHZhciByZXNvbHZlciA9IHVuZGVmaW5lZDtcblx0XG5cdCAgZnVuY3Rpb24gcmVzb2x2ZUFzeW5jQ29tcG9uZW50KGhhbmRsZXIsIGNiKSB7XG5cdCAgICBpZiAoIXJlc29sdmVyKSB7XG5cdCAgICAgIHJlc29sdmVyID0ge1xuXHQgICAgICAgIHJlc29sdmU6IGV4cG9ydHMkMS5WdWUucHJvdG90eXBlLl9yZXNvbHZlQ29tcG9uZW50LFxuXHQgICAgICAgICRvcHRpb25zOiB7XG5cdCAgICAgICAgICBjb21wb25lbnRzOiB7XG5cdCAgICAgICAgICAgIF86IGhhbmRsZXIuY29tcG9uZW50XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVzb2x2ZXIuJG9wdGlvbnMuY29tcG9uZW50cy5fID0gaGFuZGxlci5jb21wb25lbnQ7XG5cdCAgICB9XG5cdCAgICByZXNvbHZlci5yZXNvbHZlKCdfJywgZnVuY3Rpb24gKENvbXBvbmVudCkge1xuXHQgICAgICBoYW5kbGVyLmNvbXBvbmVudCA9IENvbXBvbmVudDtcblx0ICAgICAgY2IoQ29tcG9uZW50KTtcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogTWFwIHRoZSBkeW5hbWljIHNlZ21lbnRzIGluIGEgcGF0aCB0byBwYXJhbXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXNcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gcXVlcnlcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gbWFwUGFyYW1zKHBhdGgsIHBhcmFtcywgcXVlcnkpIHtcblx0ICAgIGlmIChwYXJhbXMgPT09IHVuZGVmaW5lZCkgcGFyYW1zID0ge307XG5cdFxuXHQgICAgcGF0aCA9IHBhdGgucmVwbGFjZSgvOihbXlxcL10rKS9nLCBmdW5jdGlvbiAoXywga2V5KSB7XG5cdCAgICAgIHZhciB2YWwgPSBwYXJhbXNba2V5XTtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmICghdmFsKSB7XG5cdCAgICAgICAgd2FybiQxKCdwYXJhbSBcIicgKyBrZXkgKyAnXCIgbm90IGZvdW5kIHdoZW4gZ2VuZXJhdGluZyAnICsgJ3BhdGggZm9yIFwiJyArIHBhdGggKyAnXCIgd2l0aCBwYXJhbXMgJyArIEpTT04uc3RyaW5naWZ5KHBhcmFtcykpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2YWwgfHwgJyc7XG5cdCAgICB9KTtcblx0ICAgIGlmIChxdWVyeSkge1xuXHQgICAgICBwYXRoICs9IGdlblF1ZXJ5KHF1ZXJ5KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBwYXRoO1xuXHQgIH1cblx0XG5cdCAgdmFyIGhhc2hSRSA9IC8jLiokLztcblx0XG5cdCAgdmFyIEhUTUw1SGlzdG9yeSA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBIVE1MNUhpc3RvcnkoX3JlZikge1xuXHQgICAgICB2YXIgcm9vdCA9IF9yZWYucm9vdDtcblx0ICAgICAgdmFyIG9uQ2hhbmdlID0gX3JlZi5vbkNoYW5nZTtcblx0ICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIEhUTUw1SGlzdG9yeSk7XG5cdFxuXHQgICAgICBpZiAocm9vdCAmJiByb290ICE9PSAnLycpIHtcblx0ICAgICAgICAvLyBtYWtlIHN1cmUgdGhlcmUncyB0aGUgc3RhcnRpbmcgc2xhc2hcblx0ICAgICAgICBpZiAocm9vdC5jaGFyQXQoMCkgIT09ICcvJykge1xuXHQgICAgICAgICAgcm9vdCA9ICcvJyArIHJvb3Q7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIHJlbW92ZSB0cmFpbGluZyBzbGFzaFxuXHQgICAgICAgIHRoaXMucm9vdCA9IHJvb3QucmVwbGFjZSgvXFwvJC8sICcnKTtcblx0ICAgICAgICB0aGlzLnJvb3RSRSA9IG5ldyBSZWdFeHAoJ15cXFxcJyArIHRoaXMucm9vdCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5yb290ID0gbnVsbDtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLm9uQ2hhbmdlID0gb25DaGFuZ2U7XG5cdCAgICAgIC8vIGNoZWNrIGJhc2UgdGFnXG5cdCAgICAgIHZhciBiYXNlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdiYXNlJyk7XG5cdCAgICAgIHRoaXMuYmFzZSA9IGJhc2VFbCAmJiBiYXNlRWwuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG5cdCAgICB9XG5cdFxuXHQgICAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KCkge1xuXHQgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgdmFyIHVybCA9IGxvY2F0aW9uLnBhdGhuYW1lICsgbG9jYXRpb24uc2VhcmNoO1xuXHQgICAgICAgIGlmIChfdGhpcy5yb290KSB7XG5cdCAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZShfdGhpcy5yb290UkUsICcnKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgX3RoaXMub25DaGFuZ2UodXJsLCBlICYmIGUuc3RhdGUsIGxvY2F0aW9uLmhhc2gpO1xuXHQgICAgICB9O1xuXHQgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgICAgdGhpcy5saXN0ZW5lcigpO1xuXHQgICAgfTtcblx0XG5cdCAgICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCkge1xuXHQgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgIH07XG5cdFxuXHQgICAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvKHBhdGgsIHJlcGxhY2UsIGFwcGVuZCkge1xuXHQgICAgICB2YXIgdXJsID0gdGhpcy5mb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCk7XG5cdCAgICAgIGlmIChyZXBsYWNlKSB7XG5cdCAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sICcnLCB1cmwpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIHJlY29yZCBzY3JvbGwgcG9zaXRpb24gYnkgcmVwbGFjaW5nIGN1cnJlbnQgc3RhdGVcblx0ICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZSh7XG5cdCAgICAgICAgICBwb3M6IHtcblx0ICAgICAgICAgICAgeDogd2luZG93LnBhZ2VYT2Zmc2V0LFxuXHQgICAgICAgICAgICB5OiB3aW5kb3cucGFnZVlPZmZzZXRcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCAnJywgbG9jYXRpb24uaHJlZik7XG5cdCAgICAgICAgLy8gdGhlbiBwdXNoIG5ldyBzdGF0ZVxuXHQgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKHt9LCAnJywgdXJsKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgaGFzaE1hdGNoID0gcGF0aC5tYXRjaChoYXNoUkUpO1xuXHQgICAgICB2YXIgaGFzaCA9IGhhc2hNYXRjaCAmJiBoYXNoTWF0Y2hbMF07XG5cdCAgICAgIHBhdGggPSB1cmxcblx0ICAgICAgLy8gc3RyaXAgaGFzaCBzbyBpdCBkb2Vzbid0IG1lc3MgdXAgcGFyYW1zXG5cdCAgICAgIC5yZXBsYWNlKGhhc2hSRSwgJycpXG5cdCAgICAgIC8vIHJlbW92ZSByb290IGJlZm9yZSBtYXRjaGluZ1xuXHQgICAgICAucmVwbGFjZSh0aGlzLnJvb3RSRSwgJycpO1xuXHQgICAgICB0aGlzLm9uQ2hhbmdlKHBhdGgsIG51bGwsIGhhc2gpO1xuXHQgICAgfTtcblx0XG5cdCAgICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLmZvcm1hdFBhdGggPSBmdW5jdGlvbiBmb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCkge1xuXHQgICAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJ1xuXHQgICAgICAvLyBhYnNvbHV0ZSBwYXRoXG5cdCAgICAgID8gdGhpcy5yb290ID8gdGhpcy5yb290ICsgJy8nICsgcGF0aC5yZXBsYWNlKC9eXFwvLywgJycpIDogcGF0aCA6IHJlc29sdmVQYXRoKHRoaXMuYmFzZSB8fCBsb2NhdGlvbi5wYXRobmFtZSwgcGF0aCwgYXBwZW5kKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIEhUTUw1SGlzdG9yeTtcblx0ICB9KSgpO1xuXHRcblx0ICB2YXIgSGFzaEhpc3RvcnkgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gSGFzaEhpc3RvcnkoX3JlZikge1xuXHQgICAgICB2YXIgaGFzaGJhbmcgPSBfcmVmLmhhc2hiYW5nO1xuXHQgICAgICB2YXIgb25DaGFuZ2UgPSBfcmVmLm9uQ2hhbmdlO1xuXHQgICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgSGFzaEhpc3RvcnkpO1xuXHRcblx0ICAgICAgdGhpcy5oYXNoYmFuZyA9IGhhc2hiYW5nO1xuXHQgICAgICB0aGlzLm9uQ2hhbmdlID0gb25DaGFuZ2U7XG5cdCAgICB9XG5cdFxuXHQgICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoKSB7XG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgcGF0aCA9IGxvY2F0aW9uLmhhc2g7XG5cdCAgICAgICAgdmFyIHJhdyA9IHBhdGgucmVwbGFjZSgvXiMhPy8sICcnKTtcblx0ICAgICAgICAvLyBhbHdheXNcblx0ICAgICAgICBpZiAocmF3LmNoYXJBdCgwKSAhPT0gJy8nKSB7XG5cdCAgICAgICAgICByYXcgPSAnLycgKyByYXc7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBmb3JtYXR0ZWRQYXRoID0gc2VsZi5mb3JtYXRQYXRoKHJhdyk7XG5cdCAgICAgICAgaWYgKGZvcm1hdHRlZFBhdGggIT09IHBhdGgpIHtcblx0ICAgICAgICAgIGxvY2F0aW9uLnJlcGxhY2UoZm9ybWF0dGVkUGF0aCk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIGRldGVybWluZSBxdWVyeVxuXHQgICAgICAgIC8vIG5vdGUgaXQncyBwb3NzaWJsZSB0byBoYXZlIHF1ZXJpZXMgaW4gYm90aCB0aGUgYWN0dWFsIFVSTFxuXHQgICAgICAgIC8vIGFuZCB0aGUgaGFzaCBmcmFnbWVudCBpdHNlbGYuXG5cdCAgICAgICAgdmFyIHF1ZXJ5ID0gbG9jYXRpb24uc2VhcmNoICYmIHBhdGguaW5kZXhPZignPycpID4gLTEgPyAnJicgKyBsb2NhdGlvbi5zZWFyY2guc2xpY2UoMSkgOiBsb2NhdGlvbi5zZWFyY2g7XG5cdCAgICAgICAgc2VsZi5vbkNoYW5nZShwYXRoLnJlcGxhY2UoL14jIT8vLCAnJykgKyBxdWVyeSk7XG5cdCAgICAgIH07XG5cdCAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICAgIHRoaXMubGlzdGVuZXIoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCkge1xuXHQgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgfTtcblx0XG5cdCAgICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyhwYXRoLCByZXBsYWNlLCBhcHBlbmQpIHtcblx0ICAgICAgcGF0aCA9IHRoaXMuZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpO1xuXHQgICAgICBpZiAocmVwbGFjZSkge1xuXHQgICAgICAgIGxvY2F0aW9uLnJlcGxhY2UocGF0aCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbG9jYXRpb24uaGFzaCA9IHBhdGg7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLmZvcm1hdFBhdGggPSBmdW5jdGlvbiBmb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCkge1xuXHQgICAgICB2YXIgaXNBYnNvbG91dGUgPSBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nO1xuXHQgICAgICB2YXIgcHJlZml4ID0gJyMnICsgKHRoaXMuaGFzaGJhbmcgPyAnIScgOiAnJyk7XG5cdCAgICAgIHJldHVybiBpc0Fic29sb3V0ZSA/IHByZWZpeCArIHBhdGggOiBwcmVmaXggKyByZXNvbHZlUGF0aChsb2NhdGlvbi5oYXNoLnJlcGxhY2UoL14jIT8vLCAnJyksIHBhdGgsIGFwcGVuZCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBIYXNoSGlzdG9yeTtcblx0ICB9KSgpO1xuXHRcblx0ICB2YXIgQWJzdHJhY3RIaXN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEFic3RyYWN0SGlzdG9yeShfcmVmKSB7XG5cdCAgICAgIHZhciBvbkNoYW5nZSA9IF9yZWYub25DaGFuZ2U7XG5cdCAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBBYnN0cmFjdEhpc3RvcnkpO1xuXHRcblx0ICAgICAgdGhpcy5vbkNoYW5nZSA9IG9uQ2hhbmdlO1xuXHQgICAgICB0aGlzLmN1cnJlbnRQYXRoID0gJy8nO1xuXHQgICAgfVxuXHRcblx0ICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydCgpIHtcblx0ICAgICAgdGhpcy5vbkNoYW5nZSgnLycpO1xuXHQgICAgfTtcblx0XG5cdCAgICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCkge1xuXHQgICAgICAvLyBub29wXG5cdCAgICB9O1xuXHRcblx0ICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyhwYXRoLCByZXBsYWNlLCBhcHBlbmQpIHtcblx0ICAgICAgcGF0aCA9IHRoaXMuY3VycmVudFBhdGggPSB0aGlzLmZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKTtcblx0ICAgICAgdGhpcy5vbkNoYW5nZShwYXRoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5mb3JtYXRQYXRoID0gZnVuY3Rpb24gZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpIHtcblx0ICAgICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLycgPyBwYXRoIDogcmVzb2x2ZVBhdGgodGhpcy5jdXJyZW50UGF0aCwgcGF0aCwgYXBwZW5kKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIEFic3RyYWN0SGlzdG9yeTtcblx0ICB9KSgpO1xuXHRcblx0ICAvKipcblx0ICAgKiBEZXRlcm1pbmUgdGhlIHJldXNhYmlsaXR5IG9mIGFuIGV4aXN0aW5nIHJvdXRlciB2aWV3LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuXHQgICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjYW5SZXVzZSh2aWV3LCBoYW5kbGVyLCB0cmFuc2l0aW9uKSB7XG5cdCAgICB2YXIgY29tcG9uZW50ID0gdmlldy5jaGlsZFZNO1xuXHQgICAgaWYgKCFjb21wb25lbnQgfHwgIWhhbmRsZXIpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgICAgLy8gaW1wb3J0YW50OiBjaGVjayB2aWV3LkNvbXBvbmVudCBoZXJlIGJlY2F1c2UgaXQgbWF5XG5cdCAgICAvLyBoYXZlIGJlZW4gY2hhbmdlZCBpbiBhY3RpdmF0ZSBob29rXG5cdCAgICBpZiAodmlldy5Db21wb25lbnQgIT09IGhhbmRsZXIuY29tcG9uZW50KSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICAgIHZhciBjYW5SZXVzZUZuID0gZ2V0Um91dGVDb25maWcoY29tcG9uZW50LCAnY2FuUmV1c2UnKTtcblx0ICAgIHJldHVybiB0eXBlb2YgY2FuUmV1c2VGbiA9PT0gJ2Jvb2xlYW4nID8gY2FuUmV1c2VGbiA6IGNhblJldXNlRm4gPyBjYW5SZXVzZUZuLmNhbGwoY29tcG9uZW50LCB7XG5cdCAgICAgIHRvOiB0cmFuc2l0aW9uLnRvLFxuXHQgICAgICBmcm9tOiB0cmFuc2l0aW9uLmZyb21cblx0ICAgIH0pIDogdHJ1ZTsgLy8gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgaWYgYSBjb21wb25lbnQgY2FuIGRlYWN0aXZhdGUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuXHQgICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gY2FuRGVhY3RpdmF0ZSh2aWV3LCB0cmFuc2l0aW9uLCBuZXh0KSB7XG5cdCAgICB2YXIgZnJvbUNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcblx0ICAgIHZhciBob29rID0gZ2V0Um91dGVDb25maWcoZnJvbUNvbXBvbmVudCwgJ2NhbkRlYWN0aXZhdGUnKTtcblx0ICAgIGlmICghaG9vaykge1xuXHQgICAgICBuZXh0KCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0cmFuc2l0aW9uLmNhbGxIb29rKGhvb2ssIGZyb21Db21wb25lbnQsIG5leHQsIHtcblx0ICAgICAgICBleHBlY3RCb29sZWFuOiB0cnVlXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgaWYgYSBjb21wb25lbnQgY2FuIGFjdGl2YXRlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcblx0ICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXh0XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGNhbkFjdGl2YXRlKGhhbmRsZXIsIHRyYW5zaXRpb24sIG5leHQpIHtcblx0ICAgIHJlc29sdmVBc3luY0NvbXBvbmVudChoYW5kbGVyLCBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG5cdCAgICAgIC8vIGhhdmUgdG8gY2hlY2sgZHVlIHRvIGFzeW5jLW5lc3Ncblx0ICAgICAgaWYgKHRyYW5zaXRpb24uYWJvcnRlZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICAvLyBkZXRlcm1pbmUgaWYgdGhpcyBjb21wb25lbnQgY2FuIGJlIGFjdGl2YXRlZFxuXHQgICAgICB2YXIgaG9vayA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ2NhbkFjdGl2YXRlJyk7XG5cdCAgICAgIGlmICghaG9vaykge1xuXHQgICAgICAgIG5leHQoKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0cmFuc2l0aW9uLmNhbGxIb29rKGhvb2ssIG51bGwsIG5leHQsIHtcblx0ICAgICAgICAgIGV4cGVjdEJvb2xlYW46IHRydWVcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBDYWxsIGRlYWN0aXZhdGUgaG9va3MgZm9yIGV4aXN0aW5nIHJvdXRlci12aWV3cy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XG5cdCAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBkZWFjdGl2YXRlKHZpZXcsIHRyYW5zaXRpb24sIG5leHQpIHtcblx0ICAgIHZhciBjb21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG5cdCAgICB2YXIgaG9vayA9IGdldFJvdXRlQ29uZmlnKGNvbXBvbmVudCwgJ2RlYWN0aXZhdGUnKTtcblx0ICAgIGlmICghaG9vaykge1xuXHQgICAgICBuZXh0KCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0cmFuc2l0aW9uLmNhbGxIb29rcyhob29rLCBjb21wb25lbnQsIG5leHQpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQWN0aXZhdGUgLyBzd2l0Y2ggY29tcG9uZW50IGZvciBhIHJvdXRlci12aWV3LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcblx0ICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cblx0ICAgKiBAcGFyYW0ge051bWJlcn0gZGVwdGhcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGFjdGl2YXRlKHZpZXcsIHRyYW5zaXRpb24sIGRlcHRoLCBjYiwgcmV1c2UpIHtcblx0ICAgIHZhciBoYW5kbGVyID0gdHJhbnNpdGlvbi5hY3RpdmF0ZVF1ZXVlW2RlcHRoXTtcblx0ICAgIGlmICghaGFuZGxlcikge1xuXHQgICAgICBzYXZlQ2hpbGRWaWV3KHZpZXcpO1xuXHQgICAgICBpZiAodmlldy5fYm91bmQpIHtcblx0ICAgICAgICB2aWV3LnNldENvbXBvbmVudChudWxsKTtcblx0ICAgICAgfVxuXHQgICAgICBjYiAmJiBjYigpO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIENvbXBvbmVudCA9IHZpZXcuQ29tcG9uZW50ID0gaGFuZGxlci5jb21wb25lbnQ7XG5cdCAgICB2YXIgYWN0aXZhdGVIb29rID0gZ2V0Um91dGVDb25maWcoQ29tcG9uZW50LCAnYWN0aXZhdGUnKTtcblx0ICAgIHZhciBkYXRhSG9vayA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ2RhdGEnKTtcblx0ICAgIHZhciB3YWl0Rm9yRGF0YSA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ3dhaXRGb3JEYXRhJyk7XG5cdFxuXHQgICAgdmlldy5kZXB0aCA9IGRlcHRoO1xuXHQgICAgdmlldy5hY3RpdmF0ZWQgPSBmYWxzZTtcblx0XG5cdCAgICB2YXIgY29tcG9uZW50ID0gdW5kZWZpbmVkO1xuXHQgICAgdmFyIGxvYWRpbmcgPSAhIShkYXRhSG9vayAmJiAhd2FpdEZvckRhdGEpO1xuXHRcblx0ICAgIC8vIFwicmV1c2VcIiBpcyBhIGZsYWcgcGFzc2VkIGRvd24gd2hlbiB0aGUgcGFyZW50IHZpZXcgaXNcblx0ICAgIC8vIGVpdGhlciByZXVzZWQgdmlhIGtlZXAtYWxpdmUgb3IgYXMgYSBjaGlsZCBvZiBhIGtlcHQtYWxpdmUgdmlldy5cblx0ICAgIC8vIG9mIGNvdXJzZSB3ZSBjYW4gb25seSByZXVzZSBpZiB0aGUgY3VycmVudCBrZXB0LWFsaXZlIGluc3RhbmNlXG5cdCAgICAvLyBpcyBvZiB0aGUgY29ycmVjdCB0eXBlLlxuXHQgICAgcmV1c2UgPSByZXVzZSAmJiB2aWV3LmNoaWxkVk0gJiYgdmlldy5jaGlsZFZNLmNvbnN0cnVjdG9yID09PSBDb21wb25lbnQ7XG5cdFxuXHQgICAgaWYgKHJldXNlKSB7XG5cdCAgICAgIC8vIGp1c3QgcmV1c2Vcblx0ICAgICAgY29tcG9uZW50ID0gdmlldy5jaGlsZFZNO1xuXHQgICAgICBjb21wb25lbnQuJGxvYWRpbmdSb3V0ZURhdGEgPSBsb2FkaW5nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc2F2ZUNoaWxkVmlldyh2aWV3KTtcblx0XG5cdCAgICAgIC8vIHVuYnVpbGQgY3VycmVudCBjb21wb25lbnQuIHRoaXMgc3RlcCBhbHNvIGRlc3Ryb3lzXG5cdCAgICAgIC8vIGFuZCByZW1vdmVzIGFsbCBuZXN0ZWQgY2hpbGQgdmlld3MuXG5cdCAgICAgIHZpZXcudW5idWlsZCh0cnVlKTtcblx0XG5cdCAgICAgIC8vIGJ1aWxkIHRoZSBuZXcgY29tcG9uZW50LiB0aGlzIHdpbGwgYWxzbyBjcmVhdGUgdGhlXG5cdCAgICAgIC8vIGRpcmVjdCBjaGlsZCB2aWV3IG9mIHRoZSBjdXJyZW50IG9uZS4gaXQgd2lsbCByZWdpc3RlclxuXHQgICAgICAvLyBpdHNlbGYgYXMgdmlldy5jaGlsZFZpZXcuXG5cdCAgICAgIGNvbXBvbmVudCA9IHZpZXcuYnVpbGQoe1xuXHQgICAgICAgIF9tZXRhOiB7XG5cdCAgICAgICAgICAkbG9hZGluZ1JvdXRlRGF0YTogbG9hZGluZ1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHtcblx0ICAgICAgICAgIHRoaXMuX3JvdXRlclZpZXcgPSB2aWV3O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICAvLyBoYW5kbGUga2VlcC1hbGl2ZS5cblx0ICAgICAgLy8gd2hlbiBhIGtlcHQtYWxpdmUgY2hpbGQgdm0gaXMgcmVzdG9yZWQsIHdlIG5lZWQgdG9cblx0ICAgICAgLy8gYWRkIGl0cyBjYWNoZWQgY2hpbGQgdmlld3MgaW50byB0aGUgcm91dGVyJ3MgdmlldyBsaXN0LFxuXHQgICAgICAvLyBhbmQgYWxzbyBwcm9wZXJseSB1cGRhdGUgY3VycmVudCB2aWV3J3MgY2hpbGQgdmlldy5cblx0ICAgICAgaWYgKHZpZXcua2VlcEFsaXZlKSB7XG5cdCAgICAgICAgY29tcG9uZW50LiRsb2FkaW5nUm91dGVEYXRhID0gbG9hZGluZztcblx0ICAgICAgICB2YXIgY2FjaGVkQ2hpbGRWaWV3ID0gY29tcG9uZW50Ll9rZWVwQWxpdmVSb3V0ZXJWaWV3O1xuXHQgICAgICAgIGlmIChjYWNoZWRDaGlsZFZpZXcpIHtcblx0ICAgICAgICAgIHZpZXcuY2hpbGRWaWV3ID0gY2FjaGVkQ2hpbGRWaWV3O1xuXHQgICAgICAgICAgY29tcG9uZW50Ll9rZWVwQWxpdmVSb3V0ZXJWaWV3ID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBjbGVhbnVwIHRoZSBjb21wb25lbnQgaW4gY2FzZSB0aGUgdHJhbnNpdGlvbiBpcyBhYm9ydGVkXG5cdCAgICAvLyBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBldmVyIGluc2VydGVkLlxuXHQgICAgdmFyIGNsZWFudXAgPSBmdW5jdGlvbiBjbGVhbnVwKCkge1xuXHQgICAgICBjb21wb25lbnQuJGRlc3Ryb3koKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gYWN0dWFsbHkgaW5zZXJ0IHRoZSBjb21wb25lbnQgYW5kIHRyaWdnZXIgdHJhbnNpdGlvblxuXHQgICAgdmFyIGluc2VydCA9IGZ1bmN0aW9uIGluc2VydCgpIHtcblx0ICAgICAgaWYgKHJldXNlKSB7XG5cdCAgICAgICAgY2IgJiYgY2IoKTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHJvdXRlciA9IHRyYW5zaXRpb24ucm91dGVyO1xuXHQgICAgICBpZiAocm91dGVyLl9yZW5kZXJlZCB8fCByb3V0ZXIuX3RyYW5zaXRpb25PbkxvYWQpIHtcblx0ICAgICAgICB2aWV3LnRyYW5zaXRpb24oY29tcG9uZW50KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBubyB0cmFuc2l0aW9uIG9uIGZpcnN0IHJlbmRlciwgbWFudWFsIHRyYW5zaXRpb25cblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAodmlldy5zZXRDdXJyZW50KSB7XG5cdCAgICAgICAgICAvLyAwLjEyIGNvbXBhdFxuXHQgICAgICAgICAgdmlldy5zZXRDdXJyZW50KGNvbXBvbmVudCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIDEuMFxuXHQgICAgICAgICAgdmlldy5jaGlsZFZNID0gY29tcG9uZW50O1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjb21wb25lbnQuJGJlZm9yZSh2aWV3LmFuY2hvciwgbnVsbCwgZmFsc2UpO1xuXHQgICAgICB9XG5cdCAgICAgIGNiICYmIGNiKCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHZhciBhZnRlckRhdGEgPSBmdW5jdGlvbiBhZnRlckRhdGEoKSB7XG5cdCAgICAgIC8vIGFjdGl2YXRlIHRoZSBjaGlsZCB2aWV3XG5cdCAgICAgIGlmICh2aWV3LmNoaWxkVmlldykge1xuXHQgICAgICAgIGFjdGl2YXRlKHZpZXcuY2hpbGRWaWV3LCB0cmFuc2l0aW9uLCBkZXB0aCArIDEsIG51bGwsIHJldXNlIHx8IHZpZXcua2VlcEFsaXZlKTtcblx0ICAgICAgfVxuXHQgICAgICBpbnNlcnQoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gY2FsbGVkIGFmdGVyIGFjdGl2YXRpb24gaG9vayBpcyByZXNvbHZlZFxuXHQgICAgdmFyIGFmdGVyQWN0aXZhdGUgPSBmdW5jdGlvbiBhZnRlckFjdGl2YXRlKCkge1xuXHQgICAgICB2aWV3LmFjdGl2YXRlZCA9IHRydWU7XG5cdCAgICAgIGlmIChkYXRhSG9vayAmJiB3YWl0Rm9yRGF0YSkge1xuXHQgICAgICAgIC8vIHdhaXQgdW50aWwgZGF0YSBsb2FkZWQgdG8gaW5zZXJ0XG5cdCAgICAgICAgbG9hZERhdGEoY29tcG9uZW50LCB0cmFuc2l0aW9uLCBkYXRhSG9vaywgYWZ0ZXJEYXRhLCBjbGVhbnVwKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBsb2FkIGRhdGEgYW5kIGluc2VydCBhdCB0aGUgc2FtZSB0aW1lXG5cdCAgICAgICAgaWYgKGRhdGFIb29rKSB7XG5cdCAgICAgICAgICBsb2FkRGF0YShjb21wb25lbnQsIHRyYW5zaXRpb24sIGRhdGFIb29rKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgYWZ0ZXJEYXRhKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgaWYgKGFjdGl2YXRlSG9vaykge1xuXHQgICAgICB0cmFuc2l0aW9uLmNhbGxIb29rcyhhY3RpdmF0ZUhvb2ssIGNvbXBvbmVudCwgYWZ0ZXJBY3RpdmF0ZSwge1xuXHQgICAgICAgIGNsZWFudXA6IGNsZWFudXAsXG5cdCAgICAgICAgcG9zdEFjdGl2YXRlOiB0cnVlXG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgYWZ0ZXJBY3RpdmF0ZSgpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmV1c2UgYSB2aWV3LCBqdXN0IHJlbG9hZCBkYXRhIGlmIG5lY2Vzc2FyeS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XG5cdCAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJldXNlKHZpZXcsIHRyYW5zaXRpb24pIHtcblx0ICAgIHZhciBjb21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG5cdCAgICB2YXIgZGF0YUhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhjb21wb25lbnQsICdkYXRhJyk7XG5cdCAgICBpZiAoZGF0YUhvb2spIHtcblx0ICAgICAgbG9hZERhdGEoY29tcG9uZW50LCB0cmFuc2l0aW9uLCBkYXRhSG9vayk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBBc3luY2hyb25vdXNseSBsb2FkIGFuZCBhcHBseSBkYXRhIHRvIGNvbXBvbmVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSBjb21wb25lbnRcblx0ICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjbGVhbnVwXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGxvYWREYXRhKGNvbXBvbmVudCwgdHJhbnNpdGlvbiwgaG9vaywgY2IsIGNsZWFudXApIHtcblx0ICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IHRydWU7XG5cdCAgICB0cmFuc2l0aW9uLmNhbGxIb29rcyhob29rLCBjb21wb25lbnQsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgY29tcG9uZW50LiRsb2FkaW5nUm91dGVEYXRhID0gZmFsc2U7XG5cdCAgICAgIGNvbXBvbmVudC4kZW1pdCgncm91dGUtZGF0YS1sb2FkZWQnLCBjb21wb25lbnQpO1xuXHQgICAgICBjYiAmJiBjYigpO1xuXHQgICAgfSwge1xuXHQgICAgICBjbGVhbnVwOiBjbGVhbnVwLFxuXHQgICAgICBwb3N0QWN0aXZhdGU6IHRydWUsXG5cdCAgICAgIHByb2Nlc3NEYXRhOiBmdW5jdGlvbiBwcm9jZXNzRGF0YShkYXRhKSB7XG5cdCAgICAgICAgLy8gaGFuZGxlIHByb21pc2Ugc3VnYXIgc3ludGF4XG5cdCAgICAgICAgdmFyIHByb21pc2VzID0gW107XG5cdCAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QoZGF0YSkpIHtcblx0ICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgICAgICB2YXIgdmFsID0gZGF0YVtrZXldO1xuXHQgICAgICAgICAgICBpZiAoaXNQcm9taXNlKHZhbCkpIHtcblx0ICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHZhbC50aGVuKGZ1bmN0aW9uIChyZXNvbHZlZFZhbCkge1xuXHQgICAgICAgICAgICAgICAgY29tcG9uZW50LiRzZXQoa2V5LCByZXNvbHZlZFZhbCk7XG5cdCAgICAgICAgICAgICAgfSkpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIGNvbXBvbmVudC4kc2V0KGtleSwgdmFsKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChwcm9taXNlcy5sZW5ndGgpIHtcblx0ICAgICAgICAgIHJldHVybiBwcm9taXNlc1swXS5jb25zdHJ1Y3Rvci5hbGwocHJvbWlzZXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBTYXZlIHRoZSBjaGlsZCB2aWV3IGZvciBhIGtlcHQtYWxpdmUgdmlldyBzbyB0aGF0XG5cdCAgICogd2UgY2FuIHJlc3RvcmUgaXQgd2hlbiBpdCBpcyBzd2l0Y2hlZCBiYWNrIHRvLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gc2F2ZUNoaWxkVmlldyh2aWV3KSB7XG5cdCAgICBpZiAodmlldy5rZWVwQWxpdmUgJiYgdmlldy5jaGlsZFZNICYmIHZpZXcuY2hpbGRWaWV3KSB7XG5cdCAgICAgIHZpZXcuY2hpbGRWTS5fa2VlcEFsaXZlUm91dGVyVmlldyA9IHZpZXcuY2hpbGRWaWV3O1xuXHQgICAgfVxuXHQgICAgdmlldy5jaGlsZFZpZXcgPSBudWxsO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgcGxhaW4gb2JqZWN0LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHsqfSB2YWxcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWwpIHtcblx0ICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBBIFJvdXRlVHJhbnNpdGlvbiBvYmplY3QgbWFuYWdlcyB0aGUgcGlwZWxpbmUgb2YgYVxuXHQgICAqIHJvdXRlci12aWV3IHN3aXRjaGluZyBwcm9jZXNzLiBUaGlzIGlzIGFsc28gdGhlIG9iamVjdFxuXHQgICAqIHBhc3NlZCBpbnRvIHVzZXIgcm91dGUgaG9va3MuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1JvdXRlcn0gcm91dGVyXG5cdCAgICogQHBhcmFtIHtSb3V0ZX0gdG9cblx0ICAgKiBAcGFyYW0ge1JvdXRlfSBmcm9tXG5cdCAgICovXG5cdFxuXHQgIHZhciBSb3V0ZVRyYW5zaXRpb24gPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gUm91dGVUcmFuc2l0aW9uKHJvdXRlciwgdG8sIGZyb20pIHtcblx0ICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIFJvdXRlVHJhbnNpdGlvbik7XG5cdFxuXHQgICAgICB0aGlzLnJvdXRlciA9IHJvdXRlcjtcblx0ICAgICAgdGhpcy50byA9IHRvO1xuXHQgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuXHQgICAgICB0aGlzLm5leHQgPSBudWxsO1xuXHQgICAgICB0aGlzLmFib3J0ZWQgPSBmYWxzZTtcblx0ICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBYm9ydCBjdXJyZW50IHRyYW5zaXRpb24gYW5kIHJldHVybiB0byBwcmV2aW91cyBsb2NhdGlvbi5cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuYWJvcnQgPSBmdW5jdGlvbiBhYm9ydCgpIHtcblx0ICAgICAgaWYgKCF0aGlzLmFib3J0ZWQpIHtcblx0ICAgICAgICB0aGlzLmFib3J0ZWQgPSB0cnVlO1xuXHQgICAgICAgIC8vIGlmIHRoZSByb290IHBhdGggdGhyb3dzIGFuIGVycm9yIGR1cmluZyB2YWxpZGF0aW9uXG5cdCAgICAgICAgLy8gb24gaW5pdGlhbCBsb2FkLCBpdCBnZXRzIGNhdWdodCBpbiBhbiBpbmZpbml0ZSBsb29wLlxuXHQgICAgICAgIHZhciBhYm9ydGluZ09uTG9hZCA9ICF0aGlzLmZyb20ucGF0aCAmJiB0aGlzLnRvLnBhdGggPT09ICcvJztcblx0ICAgICAgICBpZiAoIWFib3J0aW5nT25Mb2FkKSB7XG5cdCAgICAgICAgICB0aGlzLnJvdXRlci5yZXBsYWNlKHRoaXMuZnJvbS5wYXRoIHx8ICcvJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQWJvcnQgY3VycmVudCB0cmFuc2l0aW9uIGFuZCByZWRpcmVjdCB0byBhIG5ldyBsb2NhdGlvbi5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5yZWRpcmVjdCA9IGZ1bmN0aW9uIHJlZGlyZWN0KHBhdGgpIHtcblx0ICAgICAgaWYgKCF0aGlzLmFib3J0ZWQpIHtcblx0ICAgICAgICB0aGlzLmFib3J0ZWQgPSB0cnVlO1xuXHQgICAgICAgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgIHBhdGggPSBtYXBQYXJhbXMocGF0aCwgdGhpcy50by5wYXJhbXMsIHRoaXMudG8ucXVlcnkpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBwYXRoLnBhcmFtcyA9IHBhdGgucGFyYW1zIHx8IHRoaXMudG8ucGFyYW1zO1xuXHQgICAgICAgICAgcGF0aC5xdWVyeSA9IHBhdGgucXVlcnkgfHwgdGhpcy50by5xdWVyeTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5yb3V0ZXIucmVwbGFjZShwYXRoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEEgcm91dGVyIHZpZXcgdHJhbnNpdGlvbidzIHBpcGVsaW5lIGNhbiBiZSBkZXNjcmliZWQgYXNcblx0ICAgICAqIGZvbGxvd3MsIGFzc3VtaW5nIHdlIGFyZSB0cmFuc2l0aW9uaW5nIGZyb20gYW4gZXhpc3Rpbmdcblx0ICAgICAqIDxyb3V0ZXItdmlldz4gY2hhaW4gW0NvbXBvbmVudCBBLCBDb21wb25lbnQgQl0gdG8gYSBuZXdcblx0ICAgICAqIGNoYWluIFtDb21wb25lbnQgQSwgQ29tcG9uZW50IENdOlxuXHQgICAgICpcblx0ICAgICAqICBBICAgIEFcblx0ICAgICAqICB8ID0+IHxcblx0ICAgICAqICBCICAgIENcblx0ICAgICAqXG5cdCAgICAgKiAxLiBSZXVzYWJsaXR5IHBoYXNlOlxuXHQgICAgICogICAtPiBjYW5SZXVzZShBLCBBKVxuXHQgICAgICogICAtPiBjYW5SZXVzZShCLCBDKVxuXHQgICAgICogICAtPiBkZXRlcm1pbmUgbmV3IHF1ZXVlczpcblx0ICAgICAqICAgICAgLSBkZWFjdGl2YXRpb246IFtCXVxuXHQgICAgICogICAgICAtIGFjdGl2YXRpb246IFtDXVxuXHQgICAgICpcblx0ICAgICAqIDIuIFZhbGlkYXRpb24gcGhhc2U6XG5cdCAgICAgKiAgIC0+IGNhbkRlYWN0aXZhdGUoQilcblx0ICAgICAqICAgLT4gY2FuQWN0aXZhdGUoQylcblx0ICAgICAqXG5cdCAgICAgKiAzLiBBY3RpdmF0aW9uIHBoYXNlOlxuXHQgICAgICogICAtPiBkZWFjdGl2YXRlKEIpXG5cdCAgICAgKiAgIC0+IGFjdGl2YXRlKEMpXG5cdCAgICAgKlxuXHQgICAgICogRWFjaCBvZiB0aGVzZSBzdGVwcyBjYW4gYmUgYXN5bmNocm9ub3VzLCBhbmQgYW55XG5cdCAgICAgKiBzdGVwIGNhbiBwb3RlbnRpYWxseSBhYm9ydCB0aGUgdHJhbnNpdGlvbi5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KGNiKSB7XG5cdCAgICAgIHZhciB0cmFuc2l0aW9uID0gdGhpcztcblx0XG5cdCAgICAgIC8vIGRldGVybWluZSB0aGUgcXVldWUgb2Ygdmlld3MgdG8gZGVhY3RpdmF0ZVxuXHQgICAgICB2YXIgZGVhY3RpdmF0ZVF1ZXVlID0gW107XG5cdCAgICAgIHZhciB2aWV3ID0gdGhpcy5yb3V0ZXIuX3Jvb3RWaWV3O1xuXHQgICAgICB3aGlsZSAodmlldykge1xuXHQgICAgICAgIGRlYWN0aXZhdGVRdWV1ZS51bnNoaWZ0KHZpZXcpO1xuXHQgICAgICAgIHZpZXcgPSB2aWV3LmNoaWxkVmlldztcblx0ICAgICAgfVxuXHQgICAgICB2YXIgcmV2ZXJzZURlYWN0aXZhdGVRdWV1ZSA9IGRlYWN0aXZhdGVRdWV1ZS5zbGljZSgpLnJldmVyc2UoKTtcblx0XG5cdCAgICAgIC8vIGRldGVybWluZSB0aGUgcXVldWUgb2Ygcm91dGUgaGFuZGxlcnMgdG8gYWN0aXZhdGVcblx0ICAgICAgdmFyIGFjdGl2YXRlUXVldWUgPSB0aGlzLmFjdGl2YXRlUXVldWUgPSB0b0FycmF5KHRoaXMudG8ubWF0Y2hlZCkubWFwKGZ1bmN0aW9uIChtYXRjaCkge1xuXHQgICAgICAgIHJldHVybiBtYXRjaC5oYW5kbGVyO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIC8vIDEuIFJldXNhYmlsaXR5IHBoYXNlXG5cdCAgICAgIHZhciBpID0gdW5kZWZpbmVkLFxuXHQgICAgICAgICAgcmV1c2VRdWV1ZSA9IHVuZGVmaW5lZDtcblx0ICAgICAgZm9yIChpID0gMDsgaSA8IHJldmVyc2VEZWFjdGl2YXRlUXVldWUubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBpZiAoIWNhblJldXNlKHJldmVyc2VEZWFjdGl2YXRlUXVldWVbaV0sIGFjdGl2YXRlUXVldWVbaV0sIHRyYW5zaXRpb24pKSB7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGkgPiAwKSB7XG5cdCAgICAgICAgcmV1c2VRdWV1ZSA9IHJldmVyc2VEZWFjdGl2YXRlUXVldWUuc2xpY2UoMCwgaSk7XG5cdCAgICAgICAgZGVhY3RpdmF0ZVF1ZXVlID0gcmV2ZXJzZURlYWN0aXZhdGVRdWV1ZS5zbGljZShpKS5yZXZlcnNlKCk7XG5cdCAgICAgICAgYWN0aXZhdGVRdWV1ZSA9IGFjdGl2YXRlUXVldWUuc2xpY2UoaSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIDIuIFZhbGlkYXRpb24gcGhhc2Vcblx0ICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShkZWFjdGl2YXRlUXVldWUsIGNhbkRlYWN0aXZhdGUsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0cmFuc2l0aW9uLnJ1blF1ZXVlKGFjdGl2YXRlUXVldWUsIGNhbkFjdGl2YXRlLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB0cmFuc2l0aW9uLnJ1blF1ZXVlKGRlYWN0aXZhdGVRdWV1ZSwgZGVhY3RpdmF0ZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAvLyAzLiBBY3RpdmF0aW9uIHBoYXNlXG5cdFxuXHQgICAgICAgICAgICAvLyBVcGRhdGUgcm91dGVyIGN1cnJlbnQgcm91dGVcblx0ICAgICAgICAgICAgdHJhbnNpdGlvbi5yb3V0ZXIuX29uVHJhbnNpdGlvblZhbGlkYXRlZCh0cmFuc2l0aW9uKTtcblx0XG5cdCAgICAgICAgICAgIC8vIHRyaWdnZXIgcmV1c2UgZm9yIGFsbCByZXVzZWQgdmlld3Ncblx0ICAgICAgICAgICAgcmV1c2VRdWV1ZSAmJiByZXVzZVF1ZXVlLmZvckVhY2goZnVuY3Rpb24gKHZpZXcpIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gcmV1c2UodmlldywgdHJhbnNpdGlvbik7XG5cdCAgICAgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAgICAgLy8gdGhlIHJvb3Qgb2YgdGhlIGNoYWluIHRoYXQgbmVlZHMgdG8gYmUgcmVwbGFjZWRcblx0ICAgICAgICAgICAgLy8gaXMgdGhlIHRvcC1tb3N0IG5vbi1yZXVzYWJsZSB2aWV3LlxuXHQgICAgICAgICAgICBpZiAoZGVhY3RpdmF0ZVF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgICAgICAgIHZhciBfdmlldyA9IGRlYWN0aXZhdGVRdWV1ZVtkZWFjdGl2YXRlUXVldWUubGVuZ3RoIC0gMV07XG5cdCAgICAgICAgICAgICAgdmFyIGRlcHRoID0gcmV1c2VRdWV1ZSA/IHJldXNlUXVldWUubGVuZ3RoIDogMDtcblx0ICAgICAgICAgICAgICBhY3RpdmF0ZShfdmlldywgdHJhbnNpdGlvbiwgZGVwdGgsIGNiKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICBjYigpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQXN5bmNocm9ub3VzbHkgYW5kIHNlcXVlbnRpYWxseSBhcHBseSBhIGZ1bmN0aW9uIHRvIGFcblx0ICAgICAqIHF1ZXVlLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7QXJyYXl9IHF1ZXVlXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUucnVuUXVldWUgPSBmdW5jdGlvbiBydW5RdWV1ZShxdWV1ZSwgZm4sIGNiKSB7XG5cdCAgICAgIHZhciB0cmFuc2l0aW9uID0gdGhpcztcblx0ICAgICAgc3RlcCgwKTtcblx0ICAgICAgZnVuY3Rpb24gc3RlcChpbmRleCkge1xuXHQgICAgICAgIGlmIChpbmRleCA+PSBxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICAgIGNiKCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGZuKHF1ZXVlW2luZGV4XSwgdHJhbnNpdGlvbiwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBzdGVwKGluZGV4ICsgMSk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBDYWxsIGEgdXNlciBwcm92aWRlZCByb3V0ZSB0cmFuc2l0aW9uIGhvb2sgYW5kIGhhbmRsZVxuXHQgICAgICogdGhlIHJlc3BvbnNlIChlLmcuIGlmIHRoZSB1c2VyIHJldHVybnMgYSBwcm9taXNlKS5cblx0ICAgICAqXG5cdCAgICAgKiBJZiB0aGUgdXNlciBuZWl0aGVyIGV4cGVjdHMgYW4gYXJndW1lbnQgbm9yIHJldHVybnMgYVxuXHQgICAgICogcHJvbWlzZSwgdGhlIGhvb2sgaXMgYXNzdW1lZCB0byBiZSBzeW5jaHJvbm91cy5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rXG5cdCAgICAgKiBAcGFyYW0geyp9IFtjb250ZXh0XVxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuXHQgICAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGV4cGVjdEJvb2xlYW5cblx0ICAgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBwb3N0QWN0aXZlXG5cdCAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IHByb2Nlc3NEYXRhXG5cdCAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IGNsZWFudXBcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuY2FsbEhvb2sgPSBmdW5jdGlvbiBjYWxsSG9vayhob29rLCBjb250ZXh0LCBjYikge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCBhcmd1bWVudHNbM10gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzNdO1xuXHRcblx0ICAgICAgdmFyIF9yZWYkZXhwZWN0Qm9vbGVhbiA9IF9yZWYuZXhwZWN0Qm9vbGVhbjtcblx0ICAgICAgdmFyIGV4cGVjdEJvb2xlYW4gPSBfcmVmJGV4cGVjdEJvb2xlYW4gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRleHBlY3RCb29sZWFuO1xuXHQgICAgICB2YXIgX3JlZiRwb3N0QWN0aXZhdGUgPSBfcmVmLnBvc3RBY3RpdmF0ZTtcblx0ICAgICAgdmFyIHBvc3RBY3RpdmF0ZSA9IF9yZWYkcG9zdEFjdGl2YXRlID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkcG9zdEFjdGl2YXRlO1xuXHQgICAgICB2YXIgcHJvY2Vzc0RhdGEgPSBfcmVmLnByb2Nlc3NEYXRhO1xuXHQgICAgICB2YXIgY2xlYW51cCA9IF9yZWYuY2xlYW51cDtcblx0XG5cdCAgICAgIHZhciB0cmFuc2l0aW9uID0gdGhpcztcblx0ICAgICAgdmFyIG5leHRDYWxsZWQgPSBmYWxzZTtcblx0XG5cdCAgICAgIC8vIGFib3J0IHRoZSB0cmFuc2l0aW9uXG5cdCAgICAgIHZhciBhYm9ydCA9IGZ1bmN0aW9uIGFib3J0KCkge1xuXHQgICAgICAgIGNsZWFudXAgJiYgY2xlYW51cCgpO1xuXHQgICAgICAgIHRyYW5zaXRpb24uYWJvcnQoKTtcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIC8vIGhhbmRsZSBlcnJvcnNcblx0ICAgICAgdmFyIG9uRXJyb3IgPSBmdW5jdGlvbiBvbkVycm9yKGVycikge1xuXHQgICAgICAgIHBvc3RBY3RpdmF0ZSA/IG5leHQoKSA6IGFib3J0KCk7XG5cdCAgICAgICAgaWYgKGVyciAmJiAhdHJhbnNpdGlvbi5yb3V0ZXIuX3N1cHByZXNzKSB7XG5cdCAgICAgICAgICB3YXJuJDEoJ1VuY2F1Z2h0IGVycm9yIGR1cmluZyB0cmFuc2l0aW9uOiAnKTtcblx0ICAgICAgICAgIHRocm93IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyIDogbmV3IEVycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgLy8gc2luY2UgcHJvbWlzZSBzd2FsbG93cyBlcnJvcnMsIHdlIGhhdmUgdG9cblx0ICAgICAgLy8gdGhyb3cgaXQgaW4gdGhlIG5leHQgdGljay4uLlxuXHQgICAgICB2YXIgb25Qcm9taXNlRXJyb3IgPSBmdW5jdGlvbiBvblByb21pc2VFcnJvcihlcnIpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgb25FcnJvcihlcnIpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICB0aHJvdyBlO1xuXHQgICAgICAgICAgfSwgMCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgLy8gYWR2YW5jZSB0aGUgdHJhbnNpdGlvbiB0byB0aGUgbmV4dCBzdGVwXG5cdCAgICAgIHZhciBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcblx0ICAgICAgICBpZiAobmV4dENhbGxlZCkge1xuXHQgICAgICAgICAgd2FybiQxKCd0cmFuc2l0aW9uLm5leHQoKSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZS4nKTtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgbmV4dENhbGxlZCA9IHRydWU7XG5cdCAgICAgICAgaWYgKHRyYW5zaXRpb24uYWJvcnRlZCkge1xuXHQgICAgICAgICAgY2xlYW51cCAmJiBjbGVhbnVwKCk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNiICYmIGNiKCk7XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICB2YXIgbmV4dFdpdGhCb29sZWFuID0gZnVuY3Rpb24gbmV4dFdpdGhCb29sZWFuKHJlcykge1xuXHQgICAgICAgIGlmICh0eXBlb2YgcmVzID09PSAnYm9vbGVhbicpIHtcblx0ICAgICAgICAgIHJlcyA/IG5leHQoKSA6IGFib3J0KCk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChpc1Byb21pc2UocmVzKSkge1xuXHQgICAgICAgICAgcmVzLnRoZW4oZnVuY3Rpb24gKG9rKSB7XG5cdCAgICAgICAgICAgIG9rID8gbmV4dCgpIDogYWJvcnQoKTtcblx0ICAgICAgICAgIH0sIG9uUHJvbWlzZUVycm9yKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKCFob29rLmxlbmd0aCkge1xuXHQgICAgICAgICAgbmV4dCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0XG5cdCAgICAgIHZhciBuZXh0V2l0aERhdGEgPSBmdW5jdGlvbiBuZXh0V2l0aERhdGEoZGF0YSkge1xuXHQgICAgICAgIHZhciByZXMgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHJlcyA9IHByb2Nlc3NEYXRhKGRhdGEpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgcmV0dXJuIG9uRXJyb3IoZXJyKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGlzUHJvbWlzZShyZXMpKSB7XG5cdCAgICAgICAgICByZXMudGhlbihuZXh0LCBvblByb21pc2VFcnJvcik7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIG5leHQoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICAvLyBleHBvc2UgYSBjbG9uZSBvZiB0aGUgdHJhbnNpdGlvbiBvYmplY3QsIHNvIHRoYXQgZWFjaFxuXHQgICAgICAvLyBob29rIGdldHMgYSBjbGVhbiBjb3B5IGFuZCBwcmV2ZW50IHRoZSB1c2VyIGZyb21cblx0ICAgICAgLy8gbWVzc2luZyB3aXRoIHRoZSBpbnRlcm5hbHMuXG5cdCAgICAgIHZhciBleHBvc2VkID0ge1xuXHQgICAgICAgIHRvOiB0cmFuc2l0aW9uLnRvLFxuXHQgICAgICAgIGZyb206IHRyYW5zaXRpb24uZnJvbSxcblx0ICAgICAgICBhYm9ydDogYWJvcnQsXG5cdCAgICAgICAgbmV4dDogcHJvY2Vzc0RhdGEgPyBuZXh0V2l0aERhdGEgOiBuZXh0LFxuXHQgICAgICAgIHJlZGlyZWN0OiBmdW5jdGlvbiByZWRpcmVjdCgpIHtcblx0ICAgICAgICAgIHRyYW5zaXRpb24ucmVkaXJlY3QuYXBwbHkodHJhbnNpdGlvbiwgYXJndW1lbnRzKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICAvLyBhY3R1YWxseSBjYWxsIHRoZSBob29rXG5cdCAgICAgIHZhciByZXMgPSB1bmRlZmluZWQ7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcmVzID0gaG9vay5jYWxsKGNvbnRleHQsIGV4cG9zZWQpO1xuXHQgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICByZXR1cm4gb25FcnJvcihlcnIpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoZXhwZWN0Qm9vbGVhbikge1xuXHQgICAgICAgIC8vIGJvb2xlYW4gaG9va3Ncblx0ICAgICAgICBuZXh0V2l0aEJvb2xlYW4ocmVzKTtcblx0ICAgICAgfSBlbHNlIGlmIChpc1Byb21pc2UocmVzKSkge1xuXHQgICAgICAgIC8vIHByb21pc2Vcblx0ICAgICAgICBpZiAocHJvY2Vzc0RhdGEpIHtcblx0ICAgICAgICAgIHJlcy50aGVuKG5leHRXaXRoRGF0YSwgb25Qcm9taXNlRXJyb3IpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXMudGhlbihuZXh0LCBvblByb21pc2VFcnJvcik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKHByb2Nlc3NEYXRhICYmIGlzUGxhaW5PamJlY3QocmVzKSkge1xuXHQgICAgICAgIC8vIGRhdGEgcHJvbWlzZSBzdWdhclxuXHQgICAgICAgIG5leHRXaXRoRGF0YShyZXMpO1xuXHQgICAgICB9IGVsc2UgaWYgKCFob29rLmxlbmd0aCkge1xuXHQgICAgICAgIG5leHQoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIENhbGwgYSBzaW5nbGUgaG9vayBvciBhbiBhcnJheSBvZiBhc3luYyBob29rcyBpbiBzZXJpZXMuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtBcnJheX0gaG9va3Ncblx0ICAgICAqIEBwYXJhbSB7Kn0gY29udGV4dFxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuY2FsbEhvb2tzID0gZnVuY3Rpb24gY2FsbEhvb2tzKGhvb2tzLCBjb250ZXh0LCBjYiwgb3B0aW9ucykge1xuXHQgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaG9va3MpKSB7XG5cdCAgICAgICAgdGhpcy5ydW5RdWV1ZShob29rcywgZnVuY3Rpb24gKGhvb2ssIF8sIG5leHQpIHtcblx0ICAgICAgICAgIGlmICghX3RoaXMuYWJvcnRlZCkge1xuXHQgICAgICAgICAgICBfdGhpcy5jYWxsSG9vayhob29rLCBjb250ZXh0LCBuZXh0LCBvcHRpb25zKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCBjYik7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5jYWxsSG9vayhob29rcywgY29udGV4dCwgY2IsIG9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBSb3V0ZVRyYW5zaXRpb247XG5cdCAgfSkoKTtcblx0XG5cdCAgZnVuY3Rpb24gaXNQbGFpbk9qYmVjdCh2YWwpIHtcblx0ICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiB0b0FycmF5KHZhbCkge1xuXHQgICAgcmV0dXJuIHZhbCA/IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHZhbCkgOiBbXTtcblx0ICB9XG5cdFxuXHQgIHZhciBpbnRlcm5hbEtleXNSRSA9IC9eKGNvbXBvbmVudHxzdWJSb3V0ZXN8ZnVsbFBhdGgpJC87XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJvdXRlIENvbnRleHQgT2JqZWN0XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAqIEBwYXJhbSB7Um91dGVyfSByb3V0ZXJcblx0ICAgKi9cblx0XG5cdCAgdmFyIFJvdXRlID0gZnVuY3Rpb24gUm91dGUocGF0aCwgcm91dGVyKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBSb3V0ZSk7XG5cdFxuXHQgICAgdmFyIG1hdGNoZWQgPSByb3V0ZXIuX3JlY29nbml6ZXIucmVjb2duaXplKHBhdGgpO1xuXHQgICAgaWYgKG1hdGNoZWQpIHtcblx0ICAgICAgLy8gY29weSBhbGwgY3VzdG9tIGZpZWxkcyBmcm9tIHJvdXRlIGNvbmZpZ3Ncblx0ICAgICAgW10uZm9yRWFjaC5jYWxsKG1hdGNoZWQsIGZ1bmN0aW9uIChtYXRjaCkge1xuXHQgICAgICAgIGZvciAodmFyIGtleSBpbiBtYXRjaC5oYW5kbGVyKSB7XG5cdCAgICAgICAgICBpZiAoIWludGVybmFsS2V5c1JFLnRlc3Qoa2V5KSkge1xuXHQgICAgICAgICAgICBfdGhpc1trZXldID0gbWF0Y2guaGFuZGxlcltrZXldO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIC8vIHNldCBxdWVyeSBhbmQgcGFyYW1zXG5cdCAgICAgIHRoaXMucXVlcnkgPSBtYXRjaGVkLnF1ZXJ5UGFyYW1zO1xuXHQgICAgICB0aGlzLnBhcmFtcyA9IFtdLnJlZHVjZS5jYWxsKG1hdGNoZWQsIGZ1bmN0aW9uIChwcmV2LCBjdXIpIHtcblx0ICAgICAgICBpZiAoY3VyLnBhcmFtcykge1xuXHQgICAgICAgICAgZm9yICh2YXIga2V5IGluIGN1ci5wYXJhbXMpIHtcblx0ICAgICAgICAgICAgcHJldltrZXldID0gY3VyLnBhcmFtc1trZXldO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gcHJldjtcblx0ICAgICAgfSwge30pO1xuXHQgICAgfVxuXHQgICAgLy8gZXhwb3NlIHBhdGggYW5kIHJvdXRlclxuXHQgICAgdGhpcy5wYXRoID0gcGF0aDtcblx0ICAgIC8vIGZvciBpbnRlcm5hbCB1c2Vcblx0ICAgIHRoaXMubWF0Y2hlZCA9IG1hdGNoZWQgfHwgcm91dGVyLl9ub3RGb3VuZEhhbmRsZXI7XG5cdCAgICAvLyBpbnRlcm5hbCByZWZlcmVuY2UgdG8gcm91dGVyXG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3JvdXRlcicsIHtcblx0ICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG5cdCAgICAgIHZhbHVlOiByb3V0ZXJcblx0ICAgIH0pO1xuXHQgICAgLy8gSW1wb3J0YW50OiBmcmVlemUgc2VsZiB0byBwcmV2ZW50IG9ic2VydmF0aW9uXG5cdCAgICBPYmplY3QuZnJlZXplKHRoaXMpO1xuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIGFwcGx5T3ZlcnJpZGUgKFZ1ZSkge1xuXHQgICAgdmFyIF9WdWUkdXRpbCA9IFZ1ZS51dGlsO1xuXHQgICAgdmFyIGV4dGVuZCA9IF9WdWUkdXRpbC5leHRlbmQ7XG5cdCAgICB2YXIgaXNBcnJheSA9IF9WdWUkdXRpbC5pc0FycmF5O1xuXHQgICAgdmFyIGRlZmluZVJlYWN0aXZlID0gX1Z1ZSR1dGlsLmRlZmluZVJlYWN0aXZlO1xuXHRcblx0ICAgIC8vIG92ZXJyaWRlIFZ1ZSdzIGluaXQgYW5kIGRlc3Ryb3kgcHJvY2VzcyB0byBrZWVwIHRyYWNrIG9mIHJvdXRlciBpbnN0YW5jZXNcblx0ICAgIHZhciBpbml0ID0gVnVlLnByb3RvdHlwZS5faW5pdDtcblx0ICAgIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuXHQgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0ICAgICAgdmFyIHJvb3QgPSBvcHRpb25zLl9wYXJlbnQgfHwgb3B0aW9ucy5wYXJlbnQgfHwgdGhpcztcblx0ICAgICAgdmFyIHJvdXRlciA9IHJvb3QuJHJvdXRlcjtcblx0ICAgICAgdmFyIHJvdXRlID0gcm9vdC4kcm91dGU7XG5cdCAgICAgIGlmIChyb3V0ZXIpIHtcblx0ICAgICAgICAvLyBleHBvc2Ugcm91dGVyXG5cdCAgICAgICAgdGhpcy4kcm91dGVyID0gcm91dGVyO1xuXHQgICAgICAgIHJvdXRlci5fY2hpbGRyZW4ucHVzaCh0aGlzKTtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAodGhpcy5fZGVmaW5lTWV0YSkge1xuXHQgICAgICAgICAgLy8gMC4xMlxuXHQgICAgICAgICAgdGhpcy5fZGVmaW5lTWV0YSgnJHJvdXRlJywgcm91dGUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvLyAxLjBcblx0ICAgICAgICAgIGRlZmluZVJlYWN0aXZlKHRoaXMsICckcm91dGUnLCByb3V0ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGluaXQuY2FsbCh0aGlzLCBvcHRpb25zKTtcblx0ICAgIH07XG5cdFxuXHQgICAgdmFyIGRlc3Ryb3kgPSBWdWUucHJvdG90eXBlLl9kZXN0cm95O1xuXHQgICAgVnVlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKCF0aGlzLl9pc0JlaW5nRGVzdHJveWVkICYmIHRoaXMuJHJvdXRlcikge1xuXHQgICAgICAgIHRoaXMuJHJvdXRlci5fY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgICBkZXN0cm95LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIDEuMCBvbmx5OiBlbmFibGUgcm91dGUgbWl4aW5zXG5cdCAgICB2YXIgc3RyYXRzID0gVnVlLmNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXM7XG5cdCAgICB2YXIgaG9va3NUb01lcmdlUkUgPSAvXihkYXRhfGFjdGl2YXRlfGRlYWN0aXZhdGUpJC87XG5cdFxuXHQgICAgaWYgKHN0cmF0cykge1xuXHQgICAgICBzdHJhdHMucm91dGUgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgICAgICAgIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG5cdCAgICAgICAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbDtcblx0ICAgICAgICB2YXIgcmV0ID0ge307XG5cdCAgICAgICAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcblx0ICAgICAgICBmb3IgKHZhciBrZXkgaW4gY2hpbGRWYWwpIHtcblx0ICAgICAgICAgIHZhciBhID0gcmV0W2tleV07XG5cdCAgICAgICAgICB2YXIgYiA9IGNoaWxkVmFsW2tleV07XG5cdCAgICAgICAgICAvLyBmb3IgZGF0YSwgYWN0aXZhdGUgYW5kIGRlYWN0aXZhdGUsIHdlIG5lZWQgdG8gbWVyZ2UgdGhlbSBpbnRvXG5cdCAgICAgICAgICAvLyBhcnJheXMgc2ltaWxhciB0byBsaWZlY3ljbGUgaG9va3MuXG5cdCAgICAgICAgICBpZiAoYSAmJiBob29rc1RvTWVyZ2VSRS50ZXN0KGtleSkpIHtcblx0ICAgICAgICAgICAgcmV0W2tleV0gPSAoaXNBcnJheShhKSA/IGEgOiBbYV0pLmNvbmNhdChiKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHJldFtrZXldID0gYjtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHJldDtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIFZpZXcgKFZ1ZSkge1xuXHRcblx0ICAgIHZhciBfID0gVnVlLnV0aWw7XG5cdCAgICB2YXIgY29tcG9uZW50RGVmID1cblx0ICAgIC8vIDAuMTJcblx0ICAgIFZ1ZS5kaXJlY3RpdmUoJ19jb21wb25lbnQnKSB8fFxuXHQgICAgLy8gMS4wXG5cdCAgICBWdWUuaW50ZXJuYWxEaXJlY3RpdmVzLmNvbXBvbmVudDtcblx0ICAgIC8vIDxyb3V0ZXItdmlldz4gZXh0ZW5kcyB0aGUgaW50ZXJuYWwgY29tcG9uZW50IGRpcmVjdGl2ZVxuXHQgICAgdmFyIHZpZXdEZWYgPSBfLmV4dGVuZCh7fSwgY29tcG9uZW50RGVmKTtcblx0XG5cdCAgICAvLyB3aXRoIHNvbWUgb3ZlcnJpZGVzXG5cdCAgICBfLmV4dGVuZCh2aWV3RGVmLCB7XG5cdFxuXHQgICAgICBfaXNSb3V0ZXJWaWV3OiB0cnVlLFxuXHRcblx0ICAgICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgICAgICB2YXIgcm91dGUgPSB0aGlzLnZtLiRyb3V0ZTtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAoIXJvdXRlKSB7XG5cdCAgICAgICAgICB3YXJuJDEoJzxyb3V0ZXItdmlldz4gY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgYSAnICsgJ3JvdXRlci1lbmFibGVkIGFwcC4nKTtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gZm9yY2UgZHluYW1pYyBkaXJlY3RpdmUgc28gdi1jb21wb25lbnQgZG9lc24ndFxuXHQgICAgICAgIC8vIGF0dGVtcHQgdG8gYnVpbGQgcmlnaHQgbm93XG5cdCAgICAgICAgdGhpcy5faXNEeW5hbWljTGl0ZXJhbCA9IHRydWU7XG5cdCAgICAgICAgLy8gZmluYWxseSwgaW5pdCBieSBkZWxlZ2F0aW5nIHRvIHYtY29tcG9uZW50XG5cdCAgICAgICAgY29tcG9uZW50RGVmLmJpbmQuY2FsbCh0aGlzKTtcblx0XG5cdCAgICAgICAgLy8gbG9jYXRlIHRoZSBwYXJlbnQgdmlld1xuXHQgICAgICAgIHZhciBwYXJlbnRWaWV3ID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnZtO1xuXHQgICAgICAgIHdoaWxlIChwYXJlbnQpIHtcblx0ICAgICAgICAgIGlmIChwYXJlbnQuX3JvdXRlclZpZXcpIHtcblx0ICAgICAgICAgICAgcGFyZW50VmlldyA9IHBhcmVudC5fcm91dGVyVmlldztcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQuJHBhcmVudDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHBhcmVudFZpZXcpIHtcblx0ICAgICAgICAgIC8vIHJlZ2lzdGVyIHNlbGYgYXMgYSBjaGlsZCBvZiB0aGUgcGFyZW50IHZpZXcsXG5cdCAgICAgICAgICAvLyBpbnN0ZWFkIG9mIGFjdGl2YXRpbmcgbm93LiBUaGlzIGlzIHNvIHRoYXQgdGhlXG5cdCAgICAgICAgICAvLyBjaGlsZCdzIGFjdGl2YXRlIGhvb2sgaXMgY2FsbGVkIGFmdGVyIHRoZVxuXHQgICAgICAgICAgLy8gcGFyZW50J3MgaGFzIHJlc29sdmVkLlxuXHQgICAgICAgICAgdGhpcy5wYXJlbnRWaWV3ID0gcGFyZW50Vmlldztcblx0ICAgICAgICAgIHBhcmVudFZpZXcuY2hpbGRWaWV3ID0gdGhpcztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8gdGhpcyBpcyB0aGUgcm9vdCB2aWV3IVxuXHQgICAgICAgICAgdmFyIHJvdXRlciA9IHJvdXRlLnJvdXRlcjtcblx0ICAgICAgICAgIHJvdXRlci5fcm9vdFZpZXcgPSB0aGlzO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gaGFuZGxlIGxhdGUtcmVuZGVyZWQgdmlld1xuXHQgICAgICAgIC8vIHR3byBwb3NzaWJpbGl0aWVzOlxuXHQgICAgICAgIC8vIDEuIHJvb3QgdmlldyByZW5kZXJlZCBhZnRlciB0cmFuc2l0aW9uIGhhcyBiZWVuXG5cdCAgICAgICAgLy8gICAgdmFsaWRhdGVkO1xuXHQgICAgICAgIC8vIDIuIGNoaWxkIHZpZXcgcmVuZGVyZWQgYWZ0ZXIgcGFyZW50IHZpZXcgaGFzIGJlZW5cblx0ICAgICAgICAvLyAgICBhY3RpdmF0ZWQuXG5cdCAgICAgICAgdmFyIHRyYW5zaXRpb24gPSByb3V0ZS5yb3V0ZXIuX2N1cnJlbnRUcmFuc2l0aW9uO1xuXHQgICAgICAgIGlmICghcGFyZW50VmlldyAmJiB0cmFuc2l0aW9uLmRvbmUgfHwgcGFyZW50VmlldyAmJiBwYXJlbnRWaWV3LmFjdGl2YXRlZCkge1xuXHQgICAgICAgICAgdmFyIGRlcHRoID0gcGFyZW50VmlldyA/IHBhcmVudFZpZXcuZGVwdGggKyAxIDogMDtcblx0ICAgICAgICAgIGFjdGl2YXRlKHRoaXMsIHRyYW5zaXRpb24sIGRlcHRoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgICAgICBpZiAodGhpcy5wYXJlbnRWaWV3KSB7XG5cdCAgICAgICAgICB0aGlzLnBhcmVudFZpZXcuY2hpbGRWaWV3ID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY29tcG9uZW50RGVmLnVuYmluZC5jYWxsKHRoaXMpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICBWdWUuZWxlbWVudERpcmVjdGl2ZSgncm91dGVyLXZpZXcnLCB2aWV3RGVmKTtcblx0ICB9XG5cdFxuXHQgIHZhciB0cmFpbGluZ1NsYXNoUkUgPSAvXFwvJC87XG5cdCAgdmFyIHJlZ2V4RXNjYXBlUkUgPSAvWy0uKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nO1xuXHQgIHZhciBxdWVyeVN0cmluZ1JFID0gL1xcPy4qJC87XG5cdFxuXHQgIC8vIGluc3RhbGwgdi1saW5rLCB3aGljaCBwcm92aWRlcyBuYXZpZ2F0aW9uIHN1cHBvcnQgZm9yXG5cdCAgLy8gSFRNTDUgaGlzdG9yeSBtb2RlXG5cdCAgZnVuY3Rpb24gTGluayAoVnVlKSB7XG5cdCAgICB2YXIgX1Z1ZSR1dGlsID0gVnVlLnV0aWw7XG5cdCAgICB2YXIgX2JpbmQgPSBfVnVlJHV0aWwuYmluZDtcblx0ICAgIHZhciBpc09iamVjdCA9IF9WdWUkdXRpbC5pc09iamVjdDtcblx0ICAgIHZhciBhZGRDbGFzcyA9IF9WdWUkdXRpbC5hZGRDbGFzcztcblx0ICAgIHZhciByZW1vdmVDbGFzcyA9IF9WdWUkdXRpbC5yZW1vdmVDbGFzcztcblx0XG5cdCAgICB2YXIgb25Qcmlvcml0eSA9IFZ1ZS5kaXJlY3RpdmUoJ29uJykucHJpb3JpdHk7XG5cdCAgICB2YXIgTElOS19VUERBVEUgPSAnX192dWUtcm91dGVyLWxpbmstdXBkYXRlX18nO1xuXHRcblx0ICAgIHZhciBhY3RpdmVJZCA9IDA7XG5cdFxuXHQgICAgVnVlLmRpcmVjdGl2ZSgnbGluay1hY3RpdmUnLCB7XG5cdCAgICAgIHByaW9yaXR5OiA5OTk5LFxuXHQgICAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICAgIHZhciBpZCA9IFN0cmluZyhhY3RpdmVJZCsrKTtcblx0ICAgICAgICAvLyBjb2xsZWN0IHYtbGlua3MgY29udGFpbmVkIHdpdGhpbiB0aGlzIGVsZW1lbnQuXG5cdCAgICAgICAgLy8gd2UgbmVlZCBkbyB0aGlzIGhlcmUgYmVmb3JlIHRoZSBwYXJlbnQtY2hpbGQgcmVsYXRpb25zaGlwXG5cdCAgICAgICAgLy8gZ2V0cyBtZXNzZWQgdXAgYnkgdGVybWluYWwgZGlyZWN0aXZlcyAoaWYsIGZvciwgY29tcG9uZW50cylcblx0ICAgICAgICB2YXIgY2hpbGRMaW5rcyA9IHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbCgnW3YtbGlua10nKTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkTGlua3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgICB2YXIgbGluayA9IGNoaWxkTGlua3NbaV07XG5cdCAgICAgICAgICB2YXIgZXhpc3RpbmdJZCA9IGxpbmsuZ2V0QXR0cmlidXRlKExJTktfVVBEQVRFKTtcblx0ICAgICAgICAgIHZhciB2YWx1ZSA9IGV4aXN0aW5nSWQgPyBleGlzdGluZ0lkICsgJywnICsgaWQgOiBpZDtcblx0ICAgICAgICAgIC8vIGxlYXZlIGEgbWFyayBvbiB0aGUgbGluayBlbGVtZW50IHdoaWNoIGNhbiBiZSBwZXJzaXN0ZWRcblx0ICAgICAgICAgIC8vIHRocm91Z2ggZnJhZ21lbnQgY2xvbmVzLlxuXHQgICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoTElOS19VUERBVEUsIHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy52bS4kb24oTElOS19VUERBVEUsIHRoaXMuY2IgPSBmdW5jdGlvbiAobGluaywgcGF0aCkge1xuXHQgICAgICAgICAgaWYgKGxpbmsuYWN0aXZlSWRzLmluZGV4T2YoaWQpID4gLTEpIHtcblx0ICAgICAgICAgICAgbGluay51cGRhdGVDbGFzc2VzKHBhdGgsIF90aGlzLmVsKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfSxcblx0ICAgICAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICAgICAgdGhpcy52bS4kb2ZmKExJTktfVVBEQVRFLCB0aGlzLmNiKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgVnVlLmRpcmVjdGl2ZSgnbGluaycsIHtcblx0ICAgICAgcHJpb3JpdHk6IG9uUHJpb3JpdHkgLSAyLFxuXHRcblx0ICAgICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgICAgICB2YXIgdm0gPSB0aGlzLnZtO1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmICghdm0uJHJvdXRlKSB7XG5cdCAgICAgICAgICB3YXJuJDEoJ3YtbGluayBjYW4gb25seSBiZSB1c2VkIGluc2lkZSBhIHJvdXRlci1lbmFibGVkIGFwcC4nKTtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5yb3V0ZXIgPSB2bS4kcm91dGUucm91dGVyO1xuXHQgICAgICAgIC8vIHVwZGF0ZSB0aGluZ3Mgd2hlbiB0aGUgcm91dGUgY2hhbmdlc1xuXHQgICAgICAgIHRoaXMudW53YXRjaCA9IHZtLiR3YXRjaCgnJHJvdXRlJywgX2JpbmQodGhpcy5vblJvdXRlVXBkYXRlLCB0aGlzKSk7XG5cdCAgICAgICAgLy8gY2hlY2sgdi1saW5rLWFjdGl2ZSBpZHNcblx0ICAgICAgICB2YXIgYWN0aXZlSWRzID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoTElOS19VUERBVEUpO1xuXHQgICAgICAgIGlmIChhY3RpdmVJZHMpIHtcblx0ICAgICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKExJTktfVVBEQVRFKTtcblx0ICAgICAgICAgIHRoaXMuYWN0aXZlSWRzID0gYWN0aXZlSWRzLnNwbGl0KCcsJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIG5vIG5lZWQgdG8gaGFuZGxlIGNsaWNrIGlmIGxpbmsgZXhwZWN0cyB0byBiZSBvcGVuZWRcblx0ICAgICAgICAvLyBpbiBhIG5ldyB3aW5kb3cvdGFiLlxuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmICh0aGlzLmVsLnRhZ05hbWUgPT09ICdBJyAmJiB0aGlzLmVsLmdldEF0dHJpYnV0ZSgndGFyZ2V0JykgPT09ICdfYmxhbmsnKSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIGhhbmRsZSBjbGlja1xuXHQgICAgICAgIHRoaXMuaGFuZGxlciA9IF9iaW5kKHRoaXMub25DbGljaywgdGhpcyk7XG5cdCAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlcik7XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh0YXJnZXQpIHtcblx0ICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcblx0ICAgICAgICBpZiAoaXNPYmplY3QodGFyZ2V0KSkge1xuXHQgICAgICAgICAgdGhpcy5hcHBlbmQgPSB0YXJnZXQuYXBwZW5kO1xuXHQgICAgICAgICAgdGhpcy5leGFjdCA9IHRhcmdldC5leGFjdDtcblx0ICAgICAgICAgIHRoaXMucHJldkFjdGl2ZUNsYXNzID0gdGhpcy5hY3RpdmVDbGFzcztcblx0ICAgICAgICAgIHRoaXMuYWN0aXZlQ2xhc3MgPSB0YXJnZXQuYWN0aXZlQ2xhc3M7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMub25Sb3V0ZVVwZGF0ZSh0aGlzLnZtLiRyb3V0ZSk7XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcblx0ICAgICAgICAvLyBkb24ndCByZWRpcmVjdCB3aXRoIGNvbnRyb2wga2V5c1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmIChlLm1ldGFLZXkgfHwgZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkpIHJldHVybjtcblx0ICAgICAgICAvLyBkb24ndCByZWRpcmVjdCB3aGVuIHByZXZlbnREZWZhdWx0IGNhbGxlZFxuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjtcblx0ICAgICAgICAvLyBkb24ndCByZWRpcmVjdCBvbiByaWdodCBjbGlja1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmIChlLmJ1dHRvbiAhPT0gMCkgcmV0dXJuO1xuXHRcblx0ICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy50YXJnZXQ7XG5cdCAgICAgICAgaWYgKHRhcmdldCkge1xuXHQgICAgICAgICAgLy8gdi1saW5rIHdpdGggZXhwcmVzc2lvbiwganVzdCBnb1xuXHQgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgICAgdGhpcy5yb3V0ZXIuZ28odGFyZ2V0KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8gbm8gZXhwcmVzc2lvbiwgZGVsZWdhdGUgZm9yIGFuIDxhPiBpbnNpZGVcblx0ICAgICAgICAgIHZhciBlbCA9IGUudGFyZ2V0O1xuXHQgICAgICAgICAgd2hpbGUgKGVsLnRhZ05hbWUgIT09ICdBJyAmJiBlbCAhPT0gdGhpcy5lbCkge1xuXHQgICAgICAgICAgICBlbCA9IGVsLnBhcmVudE5vZGU7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBpZiAoZWwudGFnTmFtZSA9PT0gJ0EnICYmIHNhbWVPcmlnaW4oZWwpKSB7XG5cdCAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICAgICAgdmFyIHBhdGggPSBlbC5wYXRobmFtZTtcblx0ICAgICAgICAgICAgaWYgKHRoaXMucm91dGVyLmhpc3Rvcnkucm9vdCkge1xuXHQgICAgICAgICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UodGhpcy5yb3V0ZXIuaGlzdG9yeS5yb290UkUsICcnKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLnJvdXRlci5nbyh7XG5cdCAgICAgICAgICAgICAgcGF0aDogcGF0aCxcblx0ICAgICAgICAgICAgICByZXBsYWNlOiB0YXJnZXQgJiYgdGFyZ2V0LnJlcGxhY2UsXG5cdCAgICAgICAgICAgICAgYXBwZW5kOiB0YXJnZXQgJiYgdGFyZ2V0LmFwcGVuZFxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBvblJvdXRlVXBkYXRlOiBmdW5jdGlvbiBvblJvdXRlVXBkYXRlKHJvdXRlKSB7XG5cdCAgICAgICAgLy8gcm91dGVyLnN0cmluZ2lmeVBhdGggaXMgZGVwZW5kZW50IG9uIGN1cnJlbnQgcm91dGVcblx0ICAgICAgICAvLyBhbmQgbmVlZHMgdG8gYmUgY2FsbGVkIGFnYWluIHdoZW52ZXIgcm91dGUgY2hhbmdlcy5cblx0ICAgICAgICB2YXIgbmV3UGF0aCA9IHRoaXMucm91dGVyLnN0cmluZ2lmeVBhdGgodGhpcy50YXJnZXQpO1xuXHQgICAgICAgIGlmICh0aGlzLnBhdGggIT09IG5ld1BhdGgpIHtcblx0ICAgICAgICAgIHRoaXMucGF0aCA9IG5ld1BhdGg7XG5cdCAgICAgICAgICB0aGlzLnVwZGF0ZUFjdGl2ZU1hdGNoKCk7XG5cdCAgICAgICAgICB0aGlzLnVwZGF0ZUhyZWYoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHRoaXMuYWN0aXZlSWRzKSB7XG5cdCAgICAgICAgICB0aGlzLnZtLiRlbWl0KExJTktfVVBEQVRFLCB0aGlzLCByb3V0ZS5wYXRoKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdGhpcy51cGRhdGVDbGFzc2VzKHJvdXRlLnBhdGgsIHRoaXMuZWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0XG5cdCAgICAgIHVwZGF0ZUFjdGl2ZU1hdGNoOiBmdW5jdGlvbiB1cGRhdGVBY3RpdmVNYXRjaCgpIHtcblx0ICAgICAgICB0aGlzLmFjdGl2ZVJFID0gdGhpcy5wYXRoICYmICF0aGlzLmV4YWN0ID8gbmV3IFJlZ0V4cCgnXicgKyB0aGlzLnBhdGgucmVwbGFjZSgvXFwvJC8sICcnKS5yZXBsYWNlKHF1ZXJ5U3RyaW5nUkUsICcnKS5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXFxcJCYnKSArICcoXFxcXC98JCknKSA6IG51bGw7XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICB1cGRhdGVIcmVmOiBmdW5jdGlvbiB1cGRhdGVIcmVmKCkge1xuXHQgICAgICAgIGlmICh0aGlzLmVsLnRhZ05hbWUgIT09ICdBJykge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgcGF0aCA9IHRoaXMucGF0aDtcblx0ICAgICAgICB2YXIgcm91dGVyID0gdGhpcy5yb3V0ZXI7XG5cdCAgICAgICAgdmFyIGlzQWJzb2x1dGUgPSBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nO1xuXHQgICAgICAgIC8vIGRvIG5vdCBmb3JtYXQgbm9uLWhhc2ggcmVsYXRpdmUgcGF0aHNcblx0ICAgICAgICB2YXIgaHJlZiA9IHBhdGggJiYgKHJvdXRlci5tb2RlID09PSAnaGFzaCcgfHwgaXNBYnNvbHV0ZSkgPyByb3V0ZXIuaGlzdG9yeS5mb3JtYXRQYXRoKHBhdGgsIHRoaXMuYXBwZW5kKSA6IHBhdGg7XG5cdCAgICAgICAgaWYgKGhyZWYpIHtcblx0ICAgICAgICAgIHRoaXMuZWwuaHJlZiA9IGhyZWY7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCdocmVmJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHRcblx0ICAgICAgdXBkYXRlQ2xhc3NlczogZnVuY3Rpb24gdXBkYXRlQ2xhc3NlcyhwYXRoLCBlbCkge1xuXHQgICAgICAgIHZhciBhY3RpdmVDbGFzcyA9IHRoaXMuYWN0aXZlQ2xhc3MgfHwgdGhpcy5yb3V0ZXIuX2xpbmtBY3RpdmVDbGFzcztcblx0ICAgICAgICAvLyBjbGVhciBvbGQgY2xhc3Ncblx0ICAgICAgICBpZiAodGhpcy5wcmV2QWN0aXZlQ2xhc3MgJiYgdGhpcy5wcmV2QWN0aXZlQ2xhc3MgIT09IGFjdGl2ZUNsYXNzKSB7XG5cdCAgICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCB0aGlzLnByZXZBY3RpdmVDbGFzcywgcmVtb3ZlQ2xhc3MpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyByZW1vdmUgcXVlcnkgc3RyaW5nIGJlZm9yZSBtYXRjaGluZ1xuXHQgICAgICAgIHZhciBkZXN0ID0gdGhpcy5wYXRoLnJlcGxhY2UocXVlcnlTdHJpbmdSRSwgJycpO1xuXHQgICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UocXVlcnlTdHJpbmdSRSwgJycpO1xuXHQgICAgICAgIC8vIGFkZCBuZXcgY2xhc3Ncblx0ICAgICAgICBpZiAodGhpcy5leGFjdCkge1xuXHQgICAgICAgICAgaWYgKGRlc3QgPT09IHBhdGggfHxcblx0ICAgICAgICAgIC8vIGFsc28gYWxsb3cgYWRkaXRpb25hbCB0cmFpbGluZyBzbGFzaFxuXHQgICAgICAgICAgZGVzdC5jaGFyQXQoZGVzdC5sZW5ndGggLSAxKSAhPT0gJy8nICYmIGRlc3QgPT09IHBhdGgucmVwbGFjZSh0cmFpbGluZ1NsYXNoUkUsICcnKSkge1xuXHQgICAgICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBhY3RpdmVDbGFzcywgYWRkQ2xhc3MpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgYWN0aXZlQ2xhc3MsIHJlbW92ZUNsYXNzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlUkUgJiYgdGhpcy5hY3RpdmVSRS50ZXN0KHBhdGgpKSB7XG5cdCAgICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGFjdGl2ZUNsYXNzLCBhZGRDbGFzcyk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBhY3RpdmVDbGFzcywgcmVtb3ZlQ2xhc3MpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0XG5cdCAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZXIpO1xuXHQgICAgICAgIHRoaXMudW53YXRjaCAmJiB0aGlzLnVud2F0Y2goKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgZnVuY3Rpb24gc2FtZU9yaWdpbihsaW5rKSB7XG5cdCAgICAgIHJldHVybiBsaW5rLnByb3RvY29sID09PSBsb2NhdGlvbi5wcm90b2NvbCAmJiBsaW5rLmhvc3RuYW1lID09PSBsb2NhdGlvbi5ob3N0bmFtZSAmJiBsaW5rLnBvcnQgPT09IGxvY2F0aW9uLnBvcnQ7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gdGhpcyBmdW5jdGlvbiBpcyBjb3BpZWQgZnJvbSB2LWJpbmQ6Y2xhc3MgaW1wbGVtZW50YXRpb24gdW50aWxcblx0ICAgIC8vIHdlIHByb3Blcmx5IGV4cG9zZSBpdC4uLlxuXHQgICAgZnVuY3Rpb24gdG9nZ2xlQ2xhc3NlcyhlbCwga2V5LCBmbikge1xuXHQgICAgICBrZXkgPSBrZXkudHJpbSgpO1xuXHQgICAgICBpZiAoa2V5LmluZGV4T2YoJyAnKSA9PT0gLTEpIHtcblx0ICAgICAgICBmbihlbCwga2V5KTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGtleXMgPSBrZXkuc3BsaXQoL1xccysvKTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIGZuKGVsLCBrZXlzW2ldKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIGhpc3RvcnlCYWNrZW5kcyA9IHtcblx0ICAgIGFic3RyYWN0OiBBYnN0cmFjdEhpc3RvcnksXG5cdCAgICBoYXNoOiBIYXNoSGlzdG9yeSxcblx0ICAgIGh0bWw1OiBIVE1MNUhpc3Rvcnlcblx0ICB9O1xuXHRcblx0ICAvLyBsYXRlIGJpbmQgZHVyaW5nIGluc3RhbGxcblx0ICB2YXIgVnVlID0gdW5kZWZpbmVkO1xuXHRcblx0ICAvKipcblx0ICAgKiBSb3V0ZXIgY29uc3RydWN0b3Jcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgKi9cblx0XG5cdCAgdmFyIFJvdXRlciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBSb3V0ZXIoKSB7XG5cdCAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzBdO1xuXHRcblx0ICAgICAgdmFyIF9yZWYkaGFzaGJhbmcgPSBfcmVmLmhhc2hiYW5nO1xuXHQgICAgICB2YXIgaGFzaGJhbmcgPSBfcmVmJGhhc2hiYW5nID09PSB1bmRlZmluZWQgPyB0cnVlIDogX3JlZiRoYXNoYmFuZztcblx0ICAgICAgdmFyIF9yZWYkYWJzdHJhY3QgPSBfcmVmLmFic3RyYWN0O1xuXHQgICAgICB2YXIgYWJzdHJhY3QgPSBfcmVmJGFic3RyYWN0ID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkYWJzdHJhY3Q7XG5cdCAgICAgIHZhciBfcmVmJGhpc3RvcnkgPSBfcmVmLmhpc3Rvcnk7XG5cdCAgICAgIHZhciBoaXN0b3J5ID0gX3JlZiRoaXN0b3J5ID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkaGlzdG9yeTtcblx0ICAgICAgdmFyIF9yZWYkc2F2ZVNjcm9sbFBvc2l0aW9uID0gX3JlZi5zYXZlU2Nyb2xsUG9zaXRpb247XG5cdCAgICAgIHZhciBzYXZlU2Nyb2xsUG9zaXRpb24gPSBfcmVmJHNhdmVTY3JvbGxQb3NpdGlvbiA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJHNhdmVTY3JvbGxQb3NpdGlvbjtcblx0ICAgICAgdmFyIF9yZWYkdHJhbnNpdGlvbk9uTG9hZCA9IF9yZWYudHJhbnNpdGlvbk9uTG9hZDtcblx0ICAgICAgdmFyIHRyYW5zaXRpb25PbkxvYWQgPSBfcmVmJHRyYW5zaXRpb25PbkxvYWQgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiR0cmFuc2l0aW9uT25Mb2FkO1xuXHQgICAgICB2YXIgX3JlZiRzdXBwcmVzc1RyYW5zaXRpb25FcnJvciA9IF9yZWYuc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3I7XG5cdCAgICAgIHZhciBzdXBwcmVzc1RyYW5zaXRpb25FcnJvciA9IF9yZWYkc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3IgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRzdXBwcmVzc1RyYW5zaXRpb25FcnJvcjtcblx0ICAgICAgdmFyIF9yZWYkcm9vdCA9IF9yZWYucm9vdDtcblx0ICAgICAgdmFyIHJvb3QgPSBfcmVmJHJvb3QgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBfcmVmJHJvb3Q7XG5cdCAgICAgIHZhciBfcmVmJGxpbmtBY3RpdmVDbGFzcyA9IF9yZWYubGlua0FjdGl2ZUNsYXNzO1xuXHQgICAgICB2YXIgbGlua0FjdGl2ZUNsYXNzID0gX3JlZiRsaW5rQWN0aXZlQ2xhc3MgPT09IHVuZGVmaW5lZCA/ICd2LWxpbmstYWN0aXZlJyA6IF9yZWYkbGlua0FjdGl2ZUNsYXNzO1xuXHQgICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgUm91dGVyKTtcblx0XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoIVJvdXRlci5pbnN0YWxsZWQpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBpbnN0YWxsIHRoZSBSb3V0ZXIgd2l0aCBWdWUudXNlKCkgYmVmb3JlICcgKyAnY3JlYXRpbmcgYW4gaW5zdGFuY2UuJyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIFZ1ZSBpbnN0YW5jZXNcblx0ICAgICAgdGhpcy5hcHAgPSBudWxsO1xuXHQgICAgICB0aGlzLl9jaGlsZHJlbiA9IFtdO1xuXHRcblx0ICAgICAgLy8gcm91dGUgcmVjb2duaXplclxuXHQgICAgICB0aGlzLl9yZWNvZ25pemVyID0gbmV3IFJvdXRlUmVjb2duaXplcigpO1xuXHQgICAgICB0aGlzLl9ndWFyZFJlY29nbml6ZXIgPSBuZXcgUm91dGVSZWNvZ25pemVyKCk7XG5cdFxuXHQgICAgICAvLyBzdGF0ZVxuXHQgICAgICB0aGlzLl9zdGFydGVkID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuX3N0YXJ0Q2IgPSBudWxsO1xuXHQgICAgICB0aGlzLl9jdXJyZW50Um91dGUgPSB7fTtcblx0ICAgICAgdGhpcy5fY3VycmVudFRyYW5zaXRpb24gPSBudWxsO1xuXHQgICAgICB0aGlzLl9wcmV2aW91c1RyYW5zaXRpb24gPSBudWxsO1xuXHQgICAgICB0aGlzLl9ub3RGb3VuZEhhbmRsZXIgPSBudWxsO1xuXHQgICAgICB0aGlzLl9ub3RGb3VuZFJlZGlyZWN0ID0gbnVsbDtcblx0ICAgICAgdGhpcy5fYmVmb3JlRWFjaEhvb2tzID0gW107XG5cdCAgICAgIHRoaXMuX2FmdGVyRWFjaEhvb2tzID0gW107XG5cdFxuXHQgICAgICAvLyB0cmlnZ2VyIHRyYW5zaXRpb24gb24gaW5pdGlhbCByZW5kZXI/XG5cdCAgICAgIHRoaXMuX3JlbmRlcmVkID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuX3RyYW5zaXRpb25PbkxvYWQgPSB0cmFuc2l0aW9uT25Mb2FkO1xuXHRcblx0ICAgICAgLy8gaGlzdG9yeSBtb2RlXG5cdCAgICAgIHRoaXMuX3Jvb3QgPSByb290O1xuXHQgICAgICB0aGlzLl9hYnN0cmFjdCA9IGFic3RyYWN0O1xuXHQgICAgICB0aGlzLl9oYXNoYmFuZyA9IGhhc2hiYW5nO1xuXHRcblx0ICAgICAgLy8gY2hlY2sgaWYgSFRNTDUgaGlzdG9yeSBpcyBhdmFpbGFibGVcblx0ICAgICAgdmFyIGhhc1B1c2hTdGF0ZSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5oaXN0b3J5ICYmIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZTtcblx0ICAgICAgdGhpcy5faGlzdG9yeSA9IGhpc3RvcnkgJiYgaGFzUHVzaFN0YXRlO1xuXHQgICAgICB0aGlzLl9oaXN0b3J5RmFsbGJhY2sgPSBoaXN0b3J5ICYmICFoYXNQdXNoU3RhdGU7XG5cdFxuXHQgICAgICAvLyBjcmVhdGUgaGlzdG9yeSBvYmplY3Rcblx0ICAgICAgdmFyIGluQnJvd3NlciA9IFZ1ZS51dGlsLmluQnJvd3Nlcjtcblx0ICAgICAgdGhpcy5tb2RlID0gIWluQnJvd3NlciB8fCB0aGlzLl9hYnN0cmFjdCA/ICdhYnN0cmFjdCcgOiB0aGlzLl9oaXN0b3J5ID8gJ2h0bWw1JyA6ICdoYXNoJztcblx0XG5cdCAgICAgIHZhciBIaXN0b3J5ID0gaGlzdG9yeUJhY2tlbmRzW3RoaXMubW9kZV07XG5cdCAgICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KHtcblx0ICAgICAgICByb290OiByb290LFxuXHQgICAgICAgIGhhc2hiYW5nOiB0aGlzLl9oYXNoYmFuZyxcblx0ICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UocGF0aCwgc3RhdGUsIGFuY2hvcikge1xuXHQgICAgICAgICAgX3RoaXMuX21hdGNoKHBhdGgsIHN0YXRlLCBhbmNob3IpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICAvLyBvdGhlciBvcHRpb25zXG5cdCAgICAgIHRoaXMuX3NhdmVTY3JvbGxQb3NpdGlvbiA9IHNhdmVTY3JvbGxQb3NpdGlvbjtcblx0ICAgICAgdGhpcy5fbGlua0FjdGl2ZUNsYXNzID0gbGlua0FjdGl2ZUNsYXNzO1xuXHQgICAgICB0aGlzLl9zdXBwcmVzcyA9IHN1cHByZXNzVHJhbnNpdGlvbkVycm9yO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQWxsb3cgZGlyZWN0bHkgcGFzc2luZyBjb21wb25lbnRzIHRvIGEgcm91dGVcblx0ICAgICAqIGRlZmluaXRpb24uXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG5cdCAgICAgKi9cblx0XG5cdCAgICAvLyBBUEkgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFxuXHQgICAgLyoqXG5cdCAgICAqIFJlZ2lzdGVyIGEgbWFwIG9mIHRvcC1sZXZlbCBwYXRocy5cblx0ICAgICpcblx0ICAgICogQHBhcmFtIHtPYmplY3R9IG1hcFxuXHQgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uIG1hcChfbWFwKSB7XG5cdCAgICAgIGZvciAodmFyIHJvdXRlIGluIF9tYXApIHtcblx0ICAgICAgICB0aGlzLm9uKHJvdXRlLCBfbWFwW3JvdXRlXSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUmVnaXN0ZXIgYSBzaW5nbGUgcm9vdC1sZXZlbCBwYXRoXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHJvb3RQYXRoXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuXHQgICAgICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gY29tcG9uZW50XG5cdCAgICAgKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBbc3ViUm91dGVzXVxuXHQgICAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtmb3JjZVJlZnJlc2hdXG5cdCAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtiZWZvcmVdXG5cdCAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFthZnRlcl1cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihyb290UGF0aCwgaGFuZGxlcikge1xuXHQgICAgICBpZiAocm9vdFBhdGggPT09ICcqJykge1xuXHQgICAgICAgIHRoaXMuX25vdEZvdW5kKGhhbmRsZXIpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuX2FkZFJvdXRlKHJvb3RQYXRoLCBoYW5kbGVyLCBbXSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0IHJlZGlyZWN0cy5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFwXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLnJlZGlyZWN0ID0gZnVuY3Rpb24gcmVkaXJlY3QobWFwKSB7XG5cdCAgICAgIGZvciAodmFyIHBhdGggaW4gbWFwKSB7XG5cdCAgICAgICAgdGhpcy5fYWRkUmVkaXJlY3QocGF0aCwgbWFwW3BhdGhdKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTZXQgYWxpYXNlcy5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFwXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLmFsaWFzID0gZnVuY3Rpb24gYWxpYXMobWFwKSB7XG5cdCAgICAgIGZvciAodmFyIHBhdGggaW4gbWFwKSB7XG5cdCAgICAgICAgdGhpcy5fYWRkQWxpYXMocGF0aCwgbWFwW3BhdGhdKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTZXQgZ2xvYmFsIGJlZm9yZSBob29rLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLmJlZm9yZUVhY2ggPSBmdW5jdGlvbiBiZWZvcmVFYWNoKGZuKSB7XG5cdCAgICAgIHRoaXMuX2JlZm9yZUVhY2hIb29rcy5wdXNoKGZuKTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0IGdsb2JhbCBhZnRlciBob29rLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLmFmdGVyRWFjaCA9IGZ1bmN0aW9uIGFmdGVyRWFjaChmbikge1xuXHQgICAgICB0aGlzLl9hZnRlckVhY2hIb29rcy5wdXNoKGZuKTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogTmF2aWdhdGUgdG8gYSBnaXZlbiBwYXRoLlxuXHQgICAgICogVGhlIHBhdGggY2FuIGJlIGFuIG9iamVjdCBkZXNjcmliaW5nIGEgbmFtZWQgcGF0aCBpblxuXHQgICAgICogdGhlIGZvcm1hdCBvZiB7IG5hbWU6ICcuLi4nLCBwYXJhbXM6IHt9LCBxdWVyeToge319XG5cdCAgICAgKiBUaGUgcGF0aCBpcyBhc3N1bWVkIHRvIGJlIGFscmVhZHkgZGVjb2RlZCwgYW5kIHdpbGxcblx0ICAgICAqIGJlIHJlc29sdmVkIGFnYWluc3Qgcm9vdCAoaWYgcHJvdmlkZWQpXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBwYXRoXG5cdCAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtyZXBsYWNlXVxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvKHBhdGgpIHtcblx0ICAgICAgdmFyIHJlcGxhY2UgPSBmYWxzZTtcblx0ICAgICAgdmFyIGFwcGVuZCA9IGZhbHNlO1xuXHQgICAgICBpZiAoVnVlLnV0aWwuaXNPYmplY3QocGF0aCkpIHtcblx0ICAgICAgICByZXBsYWNlID0gcGF0aC5yZXBsYWNlO1xuXHQgICAgICAgIGFwcGVuZCA9IHBhdGguYXBwZW5kO1xuXHQgICAgICB9XG5cdCAgICAgIHBhdGggPSB0aGlzLnN0cmluZ2lmeVBhdGgocGF0aCk7XG5cdCAgICAgIGlmIChwYXRoKSB7XG5cdCAgICAgICAgdGhpcy5oaXN0b3J5LmdvKHBhdGgsIHJlcGxhY2UsIGFwcGVuZCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTaG9ydCBoYW5kIGZvciByZXBsYWNpbmcgY3VycmVudCBwYXRoXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUucmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UocGF0aCkge1xuXHQgICAgICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgcGF0aCA9IHsgcGF0aDogcGF0aCB9O1xuXHQgICAgICB9XG5cdCAgICAgIHBhdGgucmVwbGFjZSA9IHRydWU7XG5cdCAgICAgIHRoaXMuZ28ocGF0aCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU3RhcnQgdGhlIHJvdXRlci5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1Z1ZUNvbnN0cnVjdG9yfSBBcHBcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGNvbnRhaW5lclxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KEFwcCwgY29udGFpbmVyLCBjYikge1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKHRoaXMuX3N0YXJ0ZWQpIHtcblx0ICAgICAgICB3YXJuJDEoJ2FscmVhZHkgc3RhcnRlZC4nKTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5fc3RhcnRlZCA9IHRydWU7XG5cdCAgICAgIHRoaXMuX3N0YXJ0Q2IgPSBjYjtcblx0ICAgICAgaWYgKCF0aGlzLmFwcCkge1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmICghQXBwIHx8ICFjb250YWluZXIpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTXVzdCBzdGFydCB2dWUtcm91dGVyIHdpdGggYSBjb21wb25lbnQgYW5kIGEgJyArICdyb290IGNvbnRhaW5lci4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKEFwcCBpbnN0YW5jZW9mIFZ1ZSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXN0IHN0YXJ0IHZ1ZS1yb3V0ZXIgd2l0aCBhIGNvbXBvbmVudCwgbm90IGEgJyArICdWdWUgaW5zdGFuY2UuJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuX2FwcENvbnRhaW5lciA9IGNvbnRhaW5lcjtcblx0ICAgICAgICB2YXIgQ3RvciA9IHRoaXMuX2FwcENvbnN0cnVjdG9yID0gdHlwZW9mIEFwcCA9PT0gJ2Z1bmN0aW9uJyA/IEFwcCA6IFZ1ZS5leHRlbmQoQXBwKTtcblx0ICAgICAgICAvLyBnaXZlIGl0IGEgbmFtZSBmb3IgYmV0dGVyIGRlYnVnZ2luZ1xuXHQgICAgICAgIEN0b3Iub3B0aW9ucy5uYW1lID0gQ3Rvci5vcHRpb25zLm5hbWUgfHwgJ1JvdXRlckFwcCc7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIGhhbmRsZSBoaXN0b3J5IGZhbGxiYWNrIGluIGJyb3dzZXJzIHRoYXQgZG8gbm90XG5cdCAgICAgIC8vIHN1cHBvcnQgSFRNTDUgaGlzdG9yeSBBUElcblx0ICAgICAgaWYgKHRoaXMuX2hpc3RvcnlGYWxsYmFjaykge1xuXHQgICAgICAgIHZhciBfbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG5cdCAgICAgICAgdmFyIF9oaXN0b3J5ID0gbmV3IEhUTUw1SGlzdG9yeSh7IHJvb3Q6IHRoaXMuX3Jvb3QgfSk7XG5cdCAgICAgICAgdmFyIHBhdGggPSBfaGlzdG9yeS5yb290ID8gX2xvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoX2hpc3Rvcnkucm9vdFJFLCAnJykgOiBfbG9jYXRpb24ucGF0aG5hbWU7XG5cdCAgICAgICAgaWYgKHBhdGggJiYgcGF0aCAhPT0gJy8nKSB7XG5cdCAgICAgICAgICBfbG9jYXRpb24uYXNzaWduKChfaGlzdG9yeS5yb290IHx8ICcnKSArICcvJyArIHRoaXMuaGlzdG9yeS5mb3JtYXRQYXRoKHBhdGgpICsgX2xvY2F0aW9uLnNlYXJjaCk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLmhpc3Rvcnkuc3RhcnQoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTdG9wIGxpc3RlbmluZyB0byByb3V0ZSBjaGFuZ2VzLlxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gc3RvcCgpIHtcblx0ICAgICAgdGhpcy5oaXN0b3J5LnN0b3AoKTtcblx0ICAgICAgdGhpcy5fc3RhcnRlZCA9IGZhbHNlO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIE5vcm1hbGl6ZSBuYW1lZCByb3V0ZSBvYmplY3QgLyBzdHJpbmcgcGF0aHMgaW50b1xuXHQgICAgICogYSBzdHJpbmcuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfE51bWJlcn0gcGF0aFxuXHQgICAgICogQHJldHVybiB7U3RyaW5nfVxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5zdHJpbmdpZnlQYXRoID0gZnVuY3Rpb24gc3RyaW5naWZ5UGF0aChwYXRoKSB7XG5cdCAgICAgIHZhciBnZW5lcmF0ZWRQYXRoID0gJyc7XG5cdCAgICAgIGlmIChwYXRoICYmIHR5cGVvZiBwYXRoID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgIGlmIChwYXRoLm5hbWUpIHtcblx0ICAgICAgICAgIHZhciBleHRlbmQgPSBWdWUudXRpbC5leHRlbmQ7XG5cdCAgICAgICAgICB2YXIgY3VycmVudFBhcmFtcyA9IHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uICYmIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uLnRvLnBhcmFtcztcblx0ICAgICAgICAgIHZhciB0YXJnZXRQYXJhbXMgPSBwYXRoLnBhcmFtcyB8fCB7fTtcblx0ICAgICAgICAgIHZhciBwYXJhbXMgPSBjdXJyZW50UGFyYW1zID8gZXh0ZW5kKGV4dGVuZCh7fSwgY3VycmVudFBhcmFtcyksIHRhcmdldFBhcmFtcykgOiB0YXJnZXRQYXJhbXM7XG5cdCAgICAgICAgICBnZW5lcmF0ZWRQYXRoID0gZW5jb2RlVVJJKHRoaXMuX3JlY29nbml6ZXIuZ2VuZXJhdGUocGF0aC5uYW1lLCBwYXJhbXMpKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKHBhdGgucGF0aCkge1xuXHQgICAgICAgICAgZ2VuZXJhdGVkUGF0aCA9IGVuY29kZVVSSShwYXRoLnBhdGgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAocGF0aC5xdWVyeSkge1xuXHQgICAgICAgICAgLy8gbm90ZTogdGhlIGdlbmVyYXRlZCBxdWVyeSBzdHJpbmcgaXMgcHJlLVVSTC1lbmNvZGVkIGJ5IHRoZSByZWNvZ25pemVyXG5cdCAgICAgICAgICB2YXIgcXVlcnkgPSB0aGlzLl9yZWNvZ25pemVyLmdlbmVyYXRlUXVlcnlTdHJpbmcocGF0aC5xdWVyeSk7XG5cdCAgICAgICAgICBpZiAoZ2VuZXJhdGVkUGF0aC5pbmRleE9mKCc/JykgPiAtMSkge1xuXHQgICAgICAgICAgICBnZW5lcmF0ZWRQYXRoICs9ICcmJyArIHF1ZXJ5LnNsaWNlKDEpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgZ2VuZXJhdGVkUGF0aCArPSBxdWVyeTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZ2VuZXJhdGVkUGF0aCA9IGVuY29kZVVSSShwYXRoID8gcGF0aCArICcnIDogJycpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBnZW5lcmF0ZWRQYXRoO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBJbnRlcm5hbCBtZXRob2RzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFxuXHQgICAgLyoqXG5cdCAgICAqIEFkZCBhIHJvdXRlIGNvbnRhaW5pbmcgYSBsaXN0IG9mIHNlZ21lbnRzIHRvIHRoZSBpbnRlcm5hbFxuXHQgICAgKiByb3V0ZSByZWNvZ25pemVyLiBXaWxsIGJlIGNhbGxlZCByZWN1cnNpdmVseSB0byBhZGQgYWxsXG5cdCAgICAqIHBvc3NpYmxlIHN1Yi1yb3V0ZXMuXG5cdCAgICAqXG5cdCAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG5cdCAgICAqIEBwYXJhbSB7QXJyYXl9IHNlZ21lbnRzXG5cdCAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX2FkZFJvdXRlID0gZnVuY3Rpb24gX2FkZFJvdXRlKHBhdGgsIGhhbmRsZXIsIHNlZ21lbnRzKSB7XG5cdCAgICAgIGd1YXJkQ29tcG9uZW50KHBhdGgsIGhhbmRsZXIpO1xuXHQgICAgICBoYW5kbGVyLnBhdGggPSBwYXRoO1xuXHQgICAgICBoYW5kbGVyLmZ1bGxQYXRoID0gKHNlZ21lbnRzLnJlZHVjZShmdW5jdGlvbiAocGF0aCwgc2VnbWVudCkge1xuXHQgICAgICAgIHJldHVybiBwYXRoICsgc2VnbWVudC5wYXRoO1xuXHQgICAgICB9LCAnJykgKyBwYXRoKS5yZXBsYWNlKCcvLycsICcvJyk7XG5cdCAgICAgIHNlZ21lbnRzLnB1c2goe1xuXHQgICAgICAgIHBhdGg6IHBhdGgsXG5cdCAgICAgICAgaGFuZGxlcjogaGFuZGxlclxuXHQgICAgICB9KTtcblx0ICAgICAgdGhpcy5fcmVjb2duaXplci5hZGQoc2VnbWVudHMsIHtcblx0ICAgICAgICBhczogaGFuZGxlci5uYW1lXG5cdCAgICAgIH0pO1xuXHQgICAgICAvLyBhZGQgc3ViIHJvdXRlc1xuXHQgICAgICBpZiAoaGFuZGxlci5zdWJSb3V0ZXMpIHtcblx0ICAgICAgICBmb3IgKHZhciBzdWJQYXRoIGluIGhhbmRsZXIuc3ViUm91dGVzKSB7XG5cdCAgICAgICAgICAvLyByZWN1cnNpdmVseSB3YWxrIGFsbCBzdWIgcm91dGVzXG5cdCAgICAgICAgICB0aGlzLl9hZGRSb3V0ZShzdWJQYXRoLCBoYW5kbGVyLnN1YlJvdXRlc1tzdWJQYXRoXSxcblx0ICAgICAgICAgIC8vIHBhc3MgYSBjb3B5IGluIHJlY3Vyc2lvbiB0byBhdm9pZCBtdXRhdGluZ1xuXHQgICAgICAgICAgLy8gYWNyb3NzIGJyYW5jaGVzXG5cdCAgICAgICAgICBzZWdtZW50cy5zbGljZSgpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTZXQgdGhlIG5vdEZvdW5kIHJvdXRlIGhhbmRsZXIuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX25vdEZvdW5kID0gZnVuY3Rpb24gX25vdEZvdW5kKGhhbmRsZXIpIHtcblx0ICAgICAgZ3VhcmRDb21wb25lbnQoJyonLCBoYW5kbGVyKTtcblx0ICAgICAgdGhpcy5fbm90Rm91bmRIYW5kbGVyID0gW3sgaGFuZGxlcjogaGFuZGxlciB9XTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBZGQgYSByZWRpcmVjdCByZWNvcmQuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSByZWRpcmVjdFBhdGhcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX2FkZFJlZGlyZWN0ID0gZnVuY3Rpb24gX2FkZFJlZGlyZWN0KHBhdGgsIHJlZGlyZWN0UGF0aCkge1xuXHQgICAgICBpZiAocGF0aCA9PT0gJyonKSB7XG5cdCAgICAgICAgdGhpcy5fbm90Rm91bmRSZWRpcmVjdCA9IHJlZGlyZWN0UGF0aDtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLl9hZGRHdWFyZChwYXRoLCByZWRpcmVjdFBhdGgsIHRoaXMucmVwbGFjZSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBZGQgYW4gYWxpYXMgcmVjb3JkLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gYWxpYXNQYXRoXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLl9hZGRBbGlhcyA9IGZ1bmN0aW9uIF9hZGRBbGlhcyhwYXRoLCBhbGlhc1BhdGgpIHtcblx0ICAgICAgdGhpcy5fYWRkR3VhcmQocGF0aCwgYWxpYXNQYXRoLCB0aGlzLl9tYXRjaCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQWRkIGEgcGF0aCBndWFyZC5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IG1hcHBlZFBhdGhcblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX2FkZEd1YXJkID0gZnVuY3Rpb24gX2FkZEd1YXJkKHBhdGgsIG1hcHBlZFBhdGgsIF9oYW5kbGVyKSB7XG5cdCAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgICAgdGhpcy5fZ3VhcmRSZWNvZ25pemVyLmFkZChbe1xuXHQgICAgICAgIHBhdGg6IHBhdGgsXG5cdCAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihtYXRjaCwgcXVlcnkpIHtcblx0ICAgICAgICAgIHZhciByZWFsUGF0aCA9IG1hcFBhcmFtcyhtYXBwZWRQYXRoLCBtYXRjaC5wYXJhbXMsIHF1ZXJ5KTtcblx0ICAgICAgICAgIF9oYW5kbGVyLmNhbGwoX3RoaXMyLCByZWFsUGF0aCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQ2hlY2sgaWYgYSBwYXRoIG1hdGNoZXMgYW55IHJlZGlyZWN0IHJlY29yZHMuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IC0gaWYgdHJ1ZSwgd2lsbCBza2lwIG5vcm1hbCBtYXRjaC5cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX2NoZWNrR3VhcmQgPSBmdW5jdGlvbiBfY2hlY2tHdWFyZChwYXRoKSB7XG5cdCAgICAgIHZhciBtYXRjaGVkID0gdGhpcy5fZ3VhcmRSZWNvZ25pemVyLnJlY29nbml6ZShwYXRoLCB0cnVlKTtcblx0ICAgICAgaWYgKG1hdGNoZWQpIHtcblx0ICAgICAgICBtYXRjaGVkWzBdLmhhbmRsZXIobWF0Y2hlZFswXSwgbWF0Y2hlZC5xdWVyeVBhcmFtcyk7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH0gZWxzZSBpZiAodGhpcy5fbm90Rm91bmRSZWRpcmVjdCkge1xuXHQgICAgICAgIG1hdGNoZWQgPSB0aGlzLl9yZWNvZ25pemVyLnJlY29nbml6ZShwYXRoKTtcblx0ICAgICAgICBpZiAoIW1hdGNoZWQpIHtcblx0ICAgICAgICAgIHRoaXMucmVwbGFjZSh0aGlzLl9ub3RGb3VuZFJlZGlyZWN0KTtcblx0ICAgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIE1hdGNoIGEgVVJMIHBhdGggYW5kIHNldCB0aGUgcm91dGUgY29udGV4dCBvbiB2bSxcblx0ICAgICAqIHRyaWdnZXJpbmcgdmlldyB1cGRhdGVzLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gW3N0YXRlXVxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IFthbmNob3JdXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLl9tYXRjaCA9IGZ1bmN0aW9uIF9tYXRjaChwYXRoLCBzdGF0ZSwgYW5jaG9yKSB7XG5cdCAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXHRcblx0ICAgICAgaWYgKHRoaXMuX2NoZWNrR3VhcmQocGF0aCkpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBjdXJyZW50Um91dGUgPSB0aGlzLl9jdXJyZW50Um91dGU7XG5cdCAgICAgIHZhciBjdXJyZW50VHJhbnNpdGlvbiA9IHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uO1xuXHRcblx0ICAgICAgaWYgKGN1cnJlbnRUcmFuc2l0aW9uKSB7XG5cdCAgICAgICAgaWYgKGN1cnJlbnRUcmFuc2l0aW9uLnRvLnBhdGggPT09IHBhdGgpIHtcblx0ICAgICAgICAgIC8vIGRvIG5vdGhpbmcgaWYgd2UgaGF2ZSBhbiBhY3RpdmUgdHJhbnNpdGlvbiBnb2luZyB0byB0aGUgc2FtZSBwYXRoXG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50Um91dGUucGF0aCA9PT0gcGF0aCkge1xuXHQgICAgICAgICAgLy8gV2UgYXJlIGdvaW5nIHRvIHRoZSBzYW1lIHBhdGgsIGJ1dCB3ZSBhbHNvIGhhdmUgYW4gb25nb2luZyBidXRcblx0ICAgICAgICAgIC8vIG5vdC15ZXQtdmFsaWRhdGVkIHRyYW5zaXRpb24uIEFib3J0IHRoYXQgdHJhbnNpdGlvbiBhbmQgcmVzZXQgdG9cblx0ICAgICAgICAgIC8vIHByZXYgdHJhbnNpdGlvbi5cblx0ICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uLmFib3J0ZWQgPSB0cnVlO1xuXHQgICAgICAgICAgdGhpcy5fY3VycmVudFRyYW5zaXRpb24gPSB0aGlzLl9wcmV2VHJhbnNpdGlvbjtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8gZ29pbmcgdG8gYSB0b3RhbGx5IGRpZmZlcmVudCBwYXRoLiBhYm9ydCBvbmdvaW5nIHRyYW5zaXRpb24uXG5cdCAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbi5hYm9ydGVkID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIGNvbnN0cnVjdCBuZXcgcm91dGUgYW5kIHRyYW5zaXRpb24gY29udGV4dFxuXHQgICAgICB2YXIgcm91dGUgPSBuZXcgUm91dGUocGF0aCwgdGhpcyk7XG5cdCAgICAgIHZhciB0cmFuc2l0aW9uID0gbmV3IFJvdXRlVHJhbnNpdGlvbih0aGlzLCByb3V0ZSwgY3VycmVudFJvdXRlKTtcblx0XG5cdCAgICAgIC8vIGN1cnJlbnQgdHJhbnNpdGlvbiBpcyB1cGRhdGVkIHJpZ2h0IG5vdy5cblx0ICAgICAgLy8gaG93ZXZlciwgY3VycmVudCByb3V0ZSB3aWxsIG9ubHkgYmUgdXBkYXRlZCBhZnRlciB0aGUgdHJhbnNpdGlvbiBoYXNcblx0ICAgICAgLy8gYmVlbiB2YWxpZGF0ZWQuXG5cdCAgICAgIHRoaXMuX3ByZXZUcmFuc2l0aW9uID0gY3VycmVudFRyYW5zaXRpb247XG5cdCAgICAgIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uID0gdHJhbnNpdGlvbjtcblx0XG5cdCAgICAgIGlmICghdGhpcy5hcHApIHtcblx0ICAgICAgICAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgLy8gaW5pdGlhbCByZW5kZXJcblx0ICAgICAgICAgIHZhciByb3V0ZXIgPSBfdGhpczM7XG5cdCAgICAgICAgICBfdGhpczMuYXBwID0gbmV3IF90aGlzMy5fYXBwQ29uc3RydWN0b3Ioe1xuXHQgICAgICAgICAgICBlbDogX3RoaXMzLl9hcHBDb250YWluZXIsXG5cdCAgICAgICAgICAgIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7XG5cdCAgICAgICAgICAgICAgdGhpcy4kcm91dGVyID0gcm91dGVyO1xuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfbWV0YToge1xuXHQgICAgICAgICAgICAgICRyb3V0ZTogcm91dGVcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSkoKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gY2hlY2sgZ2xvYmFsIGJlZm9yZSBob29rXG5cdCAgICAgIHZhciBiZWZvcmVIb29rcyA9IHRoaXMuX2JlZm9yZUVhY2hIb29rcztcblx0ICAgICAgdmFyIHN0YXJ0VHJhbnNpdGlvbiA9IGZ1bmN0aW9uIHN0YXJ0VHJhbnNpdGlvbigpIHtcblx0ICAgICAgICB0cmFuc2l0aW9uLnN0YXJ0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIF90aGlzMy5fcG9zdFRyYW5zaXRpb24ocm91dGUsIHN0YXRlLCBhbmNob3IpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9O1xuXHRcblx0ICAgICAgaWYgKGJlZm9yZUhvb2tzLmxlbmd0aCkge1xuXHQgICAgICAgIHRyYW5zaXRpb24ucnVuUXVldWUoYmVmb3JlSG9va3MsIGZ1bmN0aW9uIChob29rLCBfLCBuZXh0KSB7XG5cdCAgICAgICAgICBpZiAodHJhbnNpdGlvbiA9PT0gX3RoaXMzLl9jdXJyZW50VHJhbnNpdGlvbikge1xuXHQgICAgICAgICAgICB0cmFuc2l0aW9uLmNhbGxIb29rKGhvb2ssIG51bGwsIG5leHQsIHtcblx0ICAgICAgICAgICAgICBleHBlY3RCb29sZWFuOiB0cnVlXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIHN0YXJ0VHJhbnNpdGlvbik7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc3RhcnRUcmFuc2l0aW9uKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghdGhpcy5fcmVuZGVyZWQgJiYgdGhpcy5fc3RhcnRDYikge1xuXHQgICAgICAgIHRoaXMuX3N0YXJ0Q2IuY2FsbChudWxsKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gSEFDSzpcblx0ICAgICAgLy8gc2V0IHJlbmRlcmVkIHRvIHRydWUgYWZ0ZXIgdGhlIHRyYW5zaXRpb24gc3RhcnQsIHNvXG5cdCAgICAgIC8vIHRoYXQgY29tcG9uZW50cyB0aGF0IGFyZSBhY2l0dmF0ZWQgc3luY2hyb25vdXNseSBrbm93XG5cdCAgICAgIC8vIHdoZXRoZXIgaXQgaXMgdGhlIGluaXRpYWwgcmVuZGVyLlxuXHQgICAgICB0aGlzLl9yZW5kZXJlZCA9IHRydWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0IGN1cnJlbnQgdG8gdGhlIG5ldyB0cmFuc2l0aW9uLlxuXHQgICAgICogVGhpcyBpcyBjYWxsZWQgYnkgdGhlIHRyYW5zaXRpb24gb2JqZWN0IHdoZW4gdGhlXG5cdCAgICAgKiB2YWxpZGF0aW9uIG9mIGEgcm91dGUgaGFzIHN1Y2NlZWRlZC5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX29uVHJhbnNpdGlvblZhbGlkYXRlZCA9IGZ1bmN0aW9uIF9vblRyYW5zaXRpb25WYWxpZGF0ZWQodHJhbnNpdGlvbikge1xuXHQgICAgICAvLyBzZXQgY3VycmVudCByb3V0ZVxuXHQgICAgICB2YXIgcm91dGUgPSB0aGlzLl9jdXJyZW50Um91dGUgPSB0cmFuc2l0aW9uLnRvO1xuXHQgICAgICAvLyB1cGRhdGUgcm91dGUgY29udGV4dCBmb3IgYWxsIGNoaWxkcmVuXG5cdCAgICAgIGlmICh0aGlzLmFwcC4kcm91dGUgIT09IHJvdXRlKSB7XG5cdCAgICAgICAgdGhpcy5hcHAuJHJvdXRlID0gcm91dGU7XG5cdCAgICAgICAgdGhpcy5fY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHtcblx0ICAgICAgICAgIGNoaWxkLiRyb3V0ZSA9IHJvdXRlO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGNhbGwgZ2xvYmFsIGFmdGVyIGhvb2tcblx0ICAgICAgaWYgKHRoaXMuX2FmdGVyRWFjaEhvb2tzLmxlbmd0aCkge1xuXHQgICAgICAgIHRoaXMuX2FmdGVyRWFjaEhvb2tzLmZvckVhY2goZnVuY3Rpb24gKGhvb2spIHtcblx0ICAgICAgICAgIHJldHVybiBob29rLmNhbGwobnVsbCwge1xuXHQgICAgICAgICAgICB0bzogdHJhbnNpdGlvbi50byxcblx0ICAgICAgICAgICAgZnJvbTogdHJhbnNpdGlvbi5mcm9tXG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbi5kb25lID0gdHJ1ZTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBIYW5kbGUgc3R1ZmYgYWZ0ZXIgdGhlIHRyYW5zaXRpb24uXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtSb3V0ZX0gcm91dGVcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhdGVdXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gW2FuY2hvcl1cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX3Bvc3RUcmFuc2l0aW9uID0gZnVuY3Rpb24gX3Bvc3RUcmFuc2l0aW9uKHJvdXRlLCBzdGF0ZSwgYW5jaG9yKSB7XG5cdCAgICAgIC8vIGhhbmRsZSBzY3JvbGwgcG9zaXRpb25zXG5cdCAgICAgIC8vIHNhdmVkIHNjcm9sbCBwb3NpdGlvbnMgdGFrZSBwcmlvcml0eVxuXHQgICAgICAvLyB0aGVuIHdlIGNoZWNrIGlmIHRoZSBwYXRoIGhhcyBhbiBhbmNob3Jcblx0ICAgICAgdmFyIHBvcyA9IHN0YXRlICYmIHN0YXRlLnBvcztcblx0ICAgICAgaWYgKHBvcyAmJiB0aGlzLl9zYXZlU2Nyb2xsUG9zaXRpb24pIHtcblx0ICAgICAgICBWdWUubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgd2luZG93LnNjcm9sbFRvKHBvcy54LCBwb3MueSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoYW5jaG9yKSB7XG5cdCAgICAgICAgVnVlLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFuY2hvci5zbGljZSgxKSk7XG5cdCAgICAgICAgICBpZiAoZWwpIHtcblx0ICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKHdpbmRvdy5zY3JvbGxYLCBlbC5vZmZzZXRUb3ApO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBSb3V0ZXI7XG5cdCAgfSkoKTtcblx0XG5cdCAgZnVuY3Rpb24gZ3VhcmRDb21wb25lbnQocGF0aCwgaGFuZGxlcikge1xuXHQgICAgdmFyIGNvbXAgPSBoYW5kbGVyLmNvbXBvbmVudDtcblx0ICAgIGlmIChWdWUudXRpbC5pc1BsYWluT2JqZWN0KGNvbXApKSB7XG5cdCAgICAgIGNvbXAgPSBoYW5kbGVyLmNvbXBvbmVudCA9IFZ1ZS5leHRlbmQoY29tcCk7XG5cdCAgICB9XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICh0eXBlb2YgY29tcCAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBoYW5kbGVyLmNvbXBvbmVudCA9IG51bGw7XG5cdCAgICAgIHdhcm4kMSgnaW52YWxpZCBjb21wb25lbnQgZm9yIHJvdXRlIFwiJyArIHBhdGggKyAnXCIuJyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKiBJbnN0YWxsYXRpb24gKi9cblx0XG5cdCAgUm91dGVyLmluc3RhbGxlZCA9IGZhbHNlO1xuXHRcblx0ICAvKipcblx0ICAgKiBJbnN0YWxsYXRpb24gaW50ZXJmYWNlLlxuXHQgICAqIEluc3RhbGwgdGhlIG5lY2Vzc2FyeSBkaXJlY3RpdmVzLlxuXHQgICAqL1xuXHRcblx0ICBSb3V0ZXIuaW5zdGFsbCA9IGZ1bmN0aW9uIChleHRlcm5hbFZ1ZSkge1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoUm91dGVyLmluc3RhbGxlZCkge1xuXHQgICAgICB3YXJuJDEoJ2FscmVhZHkgaW5zdGFsbGVkLicpO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBWdWUgPSBleHRlcm5hbFZ1ZTtcblx0ICAgIGFwcGx5T3ZlcnJpZGUoVnVlKTtcblx0ICAgIFZpZXcoVnVlKTtcblx0ICAgIExpbmsoVnVlKTtcblx0ICAgIGV4cG9ydHMkMS5WdWUgPSBWdWU7XG5cdCAgICBSb3V0ZXIuaW5zdGFsbGVkID0gdHJ1ZTtcblx0ICB9O1xuXHRcblx0ICAvLyBhdXRvIGluc3RhbGxcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LlZ1ZSkge1xuXHQgICAgd2luZG93LlZ1ZS51c2UoUm91dGVyKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBSb3V0ZXI7XG5cdFxuXHR9KSk7XG5cbi8qKiovIH0sXG4vKiAyMDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcyKTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDczKTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc2KTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9sZWdhbC1jb250YWluZXIudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY29udGFpbmVyLnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNzcpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2xlZ2FsLWNvdW50ZXIudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY291bnRlci52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc4KTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LWNvbnRhaW5lci52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LWNvbnRhaW5lci52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXkudnVlXCIpO1xuXHRcdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MCk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjE1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MSk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjE2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Mik7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vdGFicy52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi90YWJzLnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIxNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCwgcHJvY2Vzcykgey8qIVxuXHQgKiBWdWUuanMgdjEuMC4yNlxuXHQgKiAoYykgMjAxNiBFdmFuIFlvdVxuXHQgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRmdW5jdGlvbiBzZXQob2JqLCBrZXksIHZhbCkge1xuXHQgIGlmIChoYXNPd24ob2JqLCBrZXkpKSB7XG5cdCAgICBvYmpba2V5XSA9IHZhbDtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgaWYgKG9iai5faXNWdWUpIHtcblx0ICAgIHNldChvYmouX2RhdGEsIGtleSwgdmFsKTtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIG9iID0gb2JqLl9fb2JfXztcblx0ICBpZiAoIW9iKSB7XG5cdCAgICBvYmpba2V5XSA9IHZhbDtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgb2IuY29udmVydChrZXksIHZhbCk7XG5cdCAgb2IuZGVwLm5vdGlmeSgpO1xuXHQgIGlmIChvYi52bXMpIHtcblx0ICAgIHZhciBpID0gb2Iudm1zLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdmFyIHZtID0gb2Iudm1zW2ldO1xuXHQgICAgICB2bS5fcHJveHkoa2V5KTtcblx0ICAgICAgdm0uX2RpZ2VzdCgpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdmFsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGVsZXRlIGEgcHJvcGVydHkgYW5kIHRyaWdnZXIgY2hhbmdlIGlmIG5lY2Vzc2FyeS5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGVsKG9iaiwga2V5KSB7XG5cdCAgaWYgKCFoYXNPd24ob2JqLCBrZXkpKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIGRlbGV0ZSBvYmpba2V5XTtcblx0ICB2YXIgb2IgPSBvYmouX19vYl9fO1xuXHQgIGlmICghb2IpIHtcblx0ICAgIGlmIChvYmouX2lzVnVlKSB7XG5cdCAgICAgIGRlbGV0ZSBvYmouX2RhdGFba2V5XTtcblx0ICAgICAgb2JqLl9kaWdlc3QoKTtcblx0ICAgIH1cblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgb2IuZGVwLm5vdGlmeSgpO1xuXHQgIGlmIChvYi52bXMpIHtcblx0ICAgIHZhciBpID0gb2Iudm1zLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdmFyIHZtID0gb2Iudm1zW2ldO1xuXHQgICAgICB2bS5fdW5wcm94eShrZXkpO1xuXHQgICAgICB2bS5fZGlnZXN0KCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXHQvKipcblx0ICogQ2hlY2sgd2hldGhlciB0aGUgb2JqZWN0IGhhcyB0aGUgcHJvcGVydHkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGhhc093bihvYmosIGtleSkge1xuXHQgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBsaXRlcmFsIHZhbHVlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0dmFyIGxpdGVyYWxWYWx1ZVJFID0gL15cXHM/KHRydWV8ZmFsc2V8LT9bXFxkXFwuXSt8J1teJ10qJ3xcIlteXCJdKlwiKVxccz8kLztcblx0XG5cdGZ1bmN0aW9uIGlzTGl0ZXJhbChleHApIHtcblx0ICByZXR1cm4gbGl0ZXJhbFZhbHVlUkUudGVzdChleHApO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYSBzdHJpbmcgc3RhcnRzIHdpdGggJCBvciBfXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc1Jlc2VydmVkKHN0cikge1xuXHQgIHZhciBjID0gKHN0ciArICcnKS5jaGFyQ29kZUF0KDApO1xuXHQgIHJldHVybiBjID09PSAweDI0IHx8IGMgPT09IDB4NUY7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHdWFyZCB0ZXh0IG91dHB1dCwgbWFrZSBzdXJlIHVuZGVmaW5lZCBvdXRwdXRzXG5cdCAqIGVtcHR5IHN0cmluZ1xuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBfdG9TdHJpbmcodmFsdWUpIHtcblx0ICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWUudG9TdHJpbmcoKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGFuZCBjb252ZXJ0IHBvc3NpYmxlIG51bWVyaWMgc3RyaW5ncyB0byBudW1iZXJzXG5cdCAqIGJlZm9yZSBzZXR0aW5nIGJhY2sgdG8gZGF0YVxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEByZXR1cm4geyp8TnVtYmVyfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHBhcnNlZCA9IE51bWJlcih2YWx1ZSk7XG5cdCAgICByZXR1cm4gaXNOYU4ocGFyc2VkKSA/IHZhbHVlIDogcGFyc2VkO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgc3RyaW5nIGJvb2xlYW4gbGl0ZXJhbHMgaW50byByZWFsIGJvb2xlYW5zLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEByZXR1cm4geyp8Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0b0Jvb2xlYW4odmFsdWUpIHtcblx0ICByZXR1cm4gdmFsdWUgPT09ICd0cnVlJyA/IHRydWUgOiB2YWx1ZSA9PT0gJ2ZhbHNlJyA/IGZhbHNlIDogdmFsdWU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTdHJpcCBxdW90ZXMgZnJvbSBhIHN0cmluZ1xuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm4ge1N0cmluZyB8IGZhbHNlfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHN0cmlwUXVvdGVzKHN0cikge1xuXHQgIHZhciBhID0gc3RyLmNoYXJDb2RlQXQoMCk7XG5cdCAgdmFyIGIgPSBzdHIuY2hhckNvZGVBdChzdHIubGVuZ3RoIC0gMSk7XG5cdCAgcmV0dXJuIGEgPT09IGIgJiYgKGEgPT09IDB4MjIgfHwgYSA9PT0gMHgyNykgPyBzdHIuc2xpY2UoMSwgLTEpIDogc3RyO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2FtZWxpemUgYSBoeXBoZW4tZGVsbWl0ZWQgc3RyaW5nLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHR2YXIgY2FtZWxpemVSRSA9IC8tKFxcdykvZztcblx0XG5cdGZ1bmN0aW9uIGNhbWVsaXplKHN0cikge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZShjYW1lbGl6ZVJFLCB0b1VwcGVyKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdG9VcHBlcihfLCBjKSB7XG5cdCAgcmV0dXJuIGMgPyBjLnRvVXBwZXJDYXNlKCkgOiAnJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEh5cGhlbmF0ZSBhIGNhbWVsQ2FzZSBzdHJpbmcuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdHZhciBoeXBoZW5hdGVSRSA9IC8oW2EtelxcZF0pKFtBLVpdKS9nO1xuXHRcblx0ZnVuY3Rpb24gaHlwaGVuYXRlKHN0cikge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZShoeXBoZW5hdGVSRSwgJyQxLSQyJykudG9Mb3dlckNhc2UoKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGh5cGhlbi91bmRlcnNjb3JlL3NsYXNoIGRlbGltaXRlcmVkIG5hbWVzIGludG9cblx0ICogY2FtZWxpemVkIGNsYXNzTmFtZXMuXG5cdCAqXG5cdCAqIGUuZy4gbXktY29tcG9uZW50ID0+IE15Q29tcG9uZW50XG5cdCAqICAgICAgc29tZV9lbHNlICAgID0+IFNvbWVFbHNlXG5cdCAqICAgICAgc29tZS9jb21wICAgID0+IFNvbWVDb21wXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdHZhciBjbGFzc2lmeVJFID0gLyg/Ol58Wy1fXFwvXSkoXFx3KS9nO1xuXHRcblx0ZnVuY3Rpb24gY2xhc3NpZnkoc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKGNsYXNzaWZ5UkUsIHRvVXBwZXIpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU2ltcGxlIGJpbmQsIGZhc3RlciB0aGFuIG5hdGl2ZVxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgKiBAcGFyYW0ge09iamVjdH0gY3R4XG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGJpbmQoZm4sIGN0eCkge1xuXHQgIHJldHVybiBmdW5jdGlvbiAoYSkge1xuXHQgICAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoO1xuXHQgICAgcmV0dXJuIGwgPyBsID4gMSA/IGZuLmFwcGx5KGN0eCwgYXJndW1lbnRzKSA6IGZuLmNhbGwoY3R4LCBhKSA6IGZuLmNhbGwoY3R4KTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBhbiBBcnJheS1saWtlIG9iamVjdCB0byBhIHJlYWwgQXJyYXkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXktbGlrZX0gbGlzdFxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3N0YXJ0XSAtIHN0YXJ0IGluZGV4XG5cdCAqIEByZXR1cm4ge0FycmF5fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRvQXJyYXkobGlzdCwgc3RhcnQpIHtcblx0ICBzdGFydCA9IHN0YXJ0IHx8IDA7XG5cdCAgdmFyIGkgPSBsaXN0Lmxlbmd0aCAtIHN0YXJ0O1xuXHQgIHZhciByZXQgPSBuZXcgQXJyYXkoaSk7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgcmV0W2ldID0gbGlzdFtpICsgc3RhcnRdO1xuXHQgIH1cblx0ICByZXR1cm4gcmV0O1xuXHR9XG5cdFxuXHQvKipcblx0ICogTWl4IHByb3BlcnRpZXMgaW50byB0YXJnZXQgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdG9cblx0ICogQHBhcmFtIHtPYmplY3R9IGZyb21cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBleHRlbmQodG8sIGZyb20pIHtcblx0ICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGZyb20pO1xuXHQgIHZhciBpID0ga2V5cy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgdG9ba2V5c1tpXV0gPSBmcm9tW2tleXNbaV1dO1xuXHQgIH1cblx0ICByZXR1cm4gdG87XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBRdWljayBvYmplY3QgY2hlY2sgLSB0aGlzIGlzIHByaW1hcmlseSB1c2VkIHRvIHRlbGxcblx0ICogT2JqZWN0cyBmcm9tIHByaW1pdGl2ZSB2YWx1ZXMgd2hlbiB3ZSBrbm93IHRoZSB2YWx1ZVxuXHQgKiBpcyBhIEpTT04tY29tcGxpYW50IHR5cGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gb2JqXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFN0cmljdCBvYmplY3QgdHlwZSBjaGVjay4gT25seSByZXR1cm5zIHRydWVcblx0ICogZm9yIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cy5cblx0ICpcblx0ICogQHBhcmFtIHsqfSBvYmpcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHR2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXHR2YXIgT0JKRUNUX1NUUklORyA9ICdbb2JqZWN0IE9iamVjdF0nO1xuXHRcblx0ZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcblx0ICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSBPQkpFQ1RfU1RSSU5HO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXJyYXkgdHlwZSBjaGVjay5cblx0ICpcblx0ICogQHBhcmFtIHsqfSBvYmpcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHR2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5cdFxuXHQvKipcblx0ICogRGVmaW5lIGEgcHJvcGVydHkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFtlbnVtZXJhYmxlXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGRlZihvYmosIGtleSwgdmFsLCBlbnVtZXJhYmxlKSB7XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG5cdCAgICB2YWx1ZTogdmFsLFxuXHQgICAgZW51bWVyYWJsZTogISFlbnVtZXJhYmxlLFxuXHQgICAgd3JpdGFibGU6IHRydWUsXG5cdCAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIERlYm91bmNlIGEgZnVuY3Rpb24gc28gaXQgb25seSBnZXRzIGNhbGxlZCBhZnRlciB0aGVcblx0ICogaW5wdXQgc3RvcHMgYXJyaXZpbmcgYWZ0ZXIgdGhlIGdpdmVuIHdhaXQgcGVyaW9kLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB3YWl0XG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSAtIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBfZGVib3VuY2UoZnVuYywgd2FpdCkge1xuXHQgIHZhciB0aW1lb3V0LCBhcmdzLCBjb250ZXh0LCB0aW1lc3RhbXAsIHJlc3VsdDtcblx0ICB2YXIgbGF0ZXIgPSBmdW5jdGlvbiBsYXRlcigpIHtcblx0ICAgIHZhciBsYXN0ID0gRGF0ZS5ub3coKSAtIHRpbWVzdGFtcDtcblx0ICAgIGlmIChsYXN0IDwgd2FpdCAmJiBsYXN0ID49IDApIHtcblx0ICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRpbWVvdXQgPSBudWxsO1xuXHQgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHQgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcblx0ICAgIH1cblx0ICB9O1xuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICBjb250ZXh0ID0gdGhpcztcblx0ICAgIGFyZ3MgPSBhcmd1bWVudHM7XG5cdCAgICB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuXHQgICAgaWYgKCF0aW1lb3V0KSB7XG5cdCAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIE1hbnVhbCBpbmRleE9mIGJlY2F1c2UgaXQncyBzbGlnaHRseSBmYXN0ZXIgdGhhblxuXHQgKiBuYXRpdmUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFyclxuXHQgKiBAcGFyYW0geyp9IG9ialxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGluZGV4T2YoYXJyLCBvYmopIHtcblx0ICB2YXIgaSA9IGFyci5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgaWYgKGFycltpXSA9PT0gb2JqKSByZXR1cm4gaTtcblx0ICB9XG5cdCAgcmV0dXJuIC0xO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTWFrZSBhIGNhbmNlbGxhYmxlIHZlcnNpb24gb2YgYW4gYXN5bmMgY2FsbGJhY2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNhbmNlbGxhYmxlKGZuKSB7XG5cdCAgdmFyIGNiID0gZnVuY3Rpb24gY2IoKSB7XG5cdCAgICBpZiAoIWNiLmNhbmNlbGxlZCkge1xuXHQgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0ICB9O1xuXHQgIGNiLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGNiLmNhbmNlbGxlZCA9IHRydWU7XG5cdCAgfTtcblx0ICByZXR1cm4gY2I7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiB0d28gdmFsdWVzIGFyZSBsb29zZWx5IGVxdWFsIC0gdGhhdCBpcyxcblx0ICogaWYgdGhleSBhcmUgcGxhaW4gb2JqZWN0cywgZG8gdGhleSBoYXZlIHRoZSBzYW1lIHNoYXBlP1xuXHQgKlxuXHQgKiBAcGFyYW0geyp9IGFcblx0ICogQHBhcmFtIHsqfSBiXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbG9vc2VFcXVhbChhLCBiKSB7XG5cdCAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG5cdCAgcmV0dXJuIGEgPT0gYiB8fCAoaXNPYmplY3QoYSkgJiYgaXNPYmplY3QoYikgPyBKU09OLnN0cmluZ2lmeShhKSA9PT0gSlNPTi5zdHJpbmdpZnkoYikgOiBmYWxzZSk7XG5cdCAgLyogZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cblx0fVxuXHRcblx0dmFyIGhhc1Byb3RvID0gKCdfX3Byb3RvX18nIGluIHt9KTtcblx0XG5cdC8vIEJyb3dzZXIgZW52aXJvbm1lbnQgc25pZmZpbmdcblx0dmFyIGluQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh3aW5kb3cpICE9PSAnW29iamVjdCBPYmplY3RdJztcblx0XG5cdC8vIGRldGVjdCBkZXZ0b29sc1xuXHR2YXIgZGV2dG9vbHMgPSBpbkJyb3dzZXIgJiYgd2luZG93Ll9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX187XG5cdFxuXHQvLyBVQSBzbmlmZmluZyBmb3Igd29ya2luZyBhcm91bmQgYnJvd3Nlci1zcGVjaWZpYyBxdWlya3Ncblx0dmFyIFVBID0gaW5Ccm93c2VyICYmIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG5cdHZhciBpc0lFID0gVUEgJiYgVUEuaW5kZXhPZigndHJpZGVudCcpID4gMDtcblx0dmFyIGlzSUU5ID0gVUEgJiYgVUEuaW5kZXhPZignbXNpZSA5LjAnKSA+IDA7XG5cdHZhciBpc0FuZHJvaWQgPSBVQSAmJiBVQS5pbmRleE9mKCdhbmRyb2lkJykgPiAwO1xuXHR2YXIgaXNJb3MgPSBVQSAmJiAvKGlwaG9uZXxpcGFkfGlwb2R8aW9zKS9pLnRlc3QoVUEpO1xuXHR2YXIgaW9zVmVyc2lvbk1hdGNoID0gaXNJb3MgJiYgVUEubWF0Y2goL29zIChbXFxkX10rKS8pO1xuXHR2YXIgaW9zVmVyc2lvbiA9IGlvc1ZlcnNpb25NYXRjaCAmJiBpb3NWZXJzaW9uTWF0Y2hbMV0uc3BsaXQoJ18nKTtcblx0XG5cdC8vIGRldGVjdGluZyBpT1MgVUlXZWJWaWV3IGJ5IGluZGV4ZWREQlxuXHR2YXIgaGFzTXV0YXRpb25PYnNlcnZlckJ1ZyA9IGlvc1ZlcnNpb24gJiYgTnVtYmVyKGlvc1ZlcnNpb25bMF0pID49IDkgJiYgTnVtYmVyKGlvc1ZlcnNpb25bMV0pID49IDMgJiYgIXdpbmRvdy5pbmRleGVkREI7XG5cdFxuXHR2YXIgdHJhbnNpdGlvblByb3AgPSB1bmRlZmluZWQ7XG5cdHZhciB0cmFuc2l0aW9uRW5kRXZlbnQgPSB1bmRlZmluZWQ7XG5cdHZhciBhbmltYXRpb25Qcm9wID0gdW5kZWZpbmVkO1xuXHR2YXIgYW5pbWF0aW9uRW5kRXZlbnQgPSB1bmRlZmluZWQ7XG5cdFxuXHQvLyBUcmFuc2l0aW9uIHByb3BlcnR5L2V2ZW50IHNuaWZmaW5nXG5cdGlmIChpbkJyb3dzZXIgJiYgIWlzSUU5KSB7XG5cdCAgdmFyIGlzV2Via2l0VHJhbnMgPSB3aW5kb3cub250cmFuc2l0aW9uZW5kID09PSB1bmRlZmluZWQgJiYgd2luZG93Lm9ud2Via2l0dHJhbnNpdGlvbmVuZCAhPT0gdW5kZWZpbmVkO1xuXHQgIHZhciBpc1dlYmtpdEFuaW0gPSB3aW5kb3cub25hbmltYXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQgIT09IHVuZGVmaW5lZDtcblx0ICB0cmFuc2l0aW9uUHJvcCA9IGlzV2Via2l0VHJhbnMgPyAnV2Via2l0VHJhbnNpdGlvbicgOiAndHJhbnNpdGlvbic7XG5cdCAgdHJhbnNpdGlvbkVuZEV2ZW50ID0gaXNXZWJraXRUcmFucyA/ICd3ZWJraXRUcmFuc2l0aW9uRW5kJyA6ICd0cmFuc2l0aW9uZW5kJztcblx0ICBhbmltYXRpb25Qcm9wID0gaXNXZWJraXRBbmltID8gJ1dlYmtpdEFuaW1hdGlvbicgOiAnYW5pbWF0aW9uJztcblx0ICBhbmltYXRpb25FbmRFdmVudCA9IGlzV2Via2l0QW5pbSA/ICd3ZWJraXRBbmltYXRpb25FbmQnIDogJ2FuaW1hdGlvbmVuZCc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZWZlciBhIHRhc2sgdG8gZXhlY3V0ZSBpdCBhc3luY2hyb25vdXNseS4gSWRlYWxseSB0aGlzXG5cdCAqIHNob3VsZCBiZSBleGVjdXRlZCBhcyBhIG1pY3JvdGFzaywgc28gd2UgbGV2ZXJhZ2Vcblx0ICogTXV0YXRpb25PYnNlcnZlciBpZiBpdCdzIGF2YWlsYWJsZSwgYW5kIGZhbGxiYWNrIHRvXG5cdCAqIHNldFRpbWVvdXQoMCkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjdHhcblx0ICovXG5cdFxuXHR2YXIgbmV4dFRpY2sgPSAoZnVuY3Rpb24gKCkge1xuXHQgIHZhciBjYWxsYmFja3MgPSBbXTtcblx0ICB2YXIgcGVuZGluZyA9IGZhbHNlO1xuXHQgIHZhciB0aW1lckZ1bmM7XG5cdCAgZnVuY3Rpb24gbmV4dFRpY2tIYW5kbGVyKCkge1xuXHQgICAgcGVuZGluZyA9IGZhbHNlO1xuXHQgICAgdmFyIGNvcGllcyA9IGNhbGxiYWNrcy5zbGljZSgwKTtcblx0ICAgIGNhbGxiYWNrcyA9IFtdO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3BpZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgY29waWVzW2ldKCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnICYmICFoYXNNdXRhdGlvbk9ic2VydmVyQnVnKSB7XG5cdCAgICB2YXIgY291bnRlciA9IDE7XG5cdCAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihuZXh0VGlja0hhbmRsZXIpO1xuXHQgICAgdmFyIHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY291bnRlcik7XG5cdCAgICBvYnNlcnZlci5vYnNlcnZlKHRleHROb2RlLCB7XG5cdCAgICAgIGNoYXJhY3RlckRhdGE6IHRydWVcblx0ICAgIH0pO1xuXHQgICAgdGltZXJGdW5jID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBjb3VudGVyID0gKGNvdW50ZXIgKyAxKSAlIDI7XG5cdCAgICAgIHRleHROb2RlLmRhdGEgPSBjb3VudGVyO1xuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gd2VicGFjayBhdHRlbXB0cyB0byBpbmplY3QgYSBzaGltIGZvciBzZXRJbW1lZGlhdGVcblx0ICAgIC8vIGlmIGl0IGlzIHVzZWQgYXMgYSBnbG9iYWwsIHNvIHdlIGhhdmUgdG8gd29yayBhcm91bmQgdGhhdCB0b1xuXHQgICAgLy8gYXZvaWQgYnVuZGxpbmcgdW5uZWNlc3NhcnkgY29kZS5cblx0ICAgIHZhciBjb250ZXh0ID0gaW5Ccm93c2VyID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB7fTtcblx0ICAgIHRpbWVyRnVuYyA9IGNvbnRleHQuc2V0SW1tZWRpYXRlIHx8IHNldFRpbWVvdXQ7XG5cdCAgfVxuXHQgIHJldHVybiBmdW5jdGlvbiAoY2IsIGN0eCkge1xuXHQgICAgdmFyIGZ1bmMgPSBjdHggPyBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGNiLmNhbGwoY3R4KTtcblx0ICAgIH0gOiBjYjtcblx0ICAgIGNhbGxiYWNrcy5wdXNoKGZ1bmMpO1xuXHQgICAgaWYgKHBlbmRpbmcpIHJldHVybjtcblx0ICAgIHBlbmRpbmcgPSB0cnVlO1xuXHQgICAgdGltZXJGdW5jKG5leHRUaWNrSGFuZGxlciwgMCk7XG5cdCAgfTtcblx0fSkoKTtcblx0XG5cdHZhciBfU2V0ID0gdW5kZWZpbmVkO1xuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0aWYgKHR5cGVvZiBTZXQgIT09ICd1bmRlZmluZWQnICYmIFNldC50b1N0cmluZygpLm1hdGNoKC9uYXRpdmUgY29kZS8pKSB7XG5cdCAgLy8gdXNlIG5hdGl2ZSBTZXQgd2hlbiBhdmFpbGFibGUuXG5cdCAgX1NldCA9IFNldDtcblx0fSBlbHNlIHtcblx0ICAvLyBhIG5vbi1zdGFuZGFyZCBTZXQgcG9seWZpbGwgdGhhdCBvbmx5IHdvcmtzIHdpdGggcHJpbWl0aXZlIGtleXMuXG5cdCAgX1NldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuc2V0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB9O1xuXHQgIF9TZXQucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIHJldHVybiB0aGlzLnNldFtrZXldICE9PSB1bmRlZmluZWQ7XG5cdCAgfTtcblx0ICBfU2V0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICB0aGlzLnNldFtrZXldID0gMTtcblx0ICB9O1xuXHQgIF9TZXQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5zZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIENhY2hlKGxpbWl0KSB7XG5cdCAgdGhpcy5zaXplID0gMDtcblx0ICB0aGlzLmxpbWl0ID0gbGltaXQ7XG5cdCAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gdW5kZWZpbmVkO1xuXHQgIHRoaXMuX2tleW1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdH1cblx0XG5cdHZhciBwID0gQ2FjaGUucHJvdG90eXBlO1xuXHRcblx0LyoqXG5cdCAqIFB1dCA8dmFsdWU+IGludG8gdGhlIGNhY2hlIGFzc29jaWF0ZWQgd2l0aCA8a2V5Pi5cblx0ICogUmV0dXJucyB0aGUgZW50cnkgd2hpY2ggd2FzIHJlbW92ZWQgdG8gbWFrZSByb29tIGZvclxuXHQgKiB0aGUgbmV3IGVudHJ5LiBPdGhlcndpc2UgdW5kZWZpbmVkIGlzIHJldHVybmVkLlxuXHQgKiAoaS5lLiBpZiB0aGVyZSB3YXMgZW5vdWdoIHJvb20gYWxyZWFkeSkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHtFbnRyeXx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0cC5wdXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHQgIHZhciByZW1vdmVkO1xuXHRcblx0ICB2YXIgZW50cnkgPSB0aGlzLmdldChrZXksIHRydWUpO1xuXHQgIGlmICghZW50cnkpIHtcblx0ICAgIGlmICh0aGlzLnNpemUgPT09IHRoaXMubGltaXQpIHtcblx0ICAgICAgcmVtb3ZlZCA9IHRoaXMuc2hpZnQoKTtcblx0ICAgIH1cblx0ICAgIGVudHJ5ID0ge1xuXHQgICAgICBrZXk6IGtleVxuXHQgICAgfTtcblx0ICAgIHRoaXMuX2tleW1hcFtrZXldID0gZW50cnk7XG5cdCAgICBpZiAodGhpcy50YWlsKSB7XG5cdCAgICAgIHRoaXMudGFpbC5uZXdlciA9IGVudHJ5O1xuXHQgICAgICBlbnRyeS5vbGRlciA9IHRoaXMudGFpbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuaGVhZCA9IGVudHJ5O1xuXHQgICAgfVxuXHQgICAgdGhpcy50YWlsID0gZW50cnk7XG5cdCAgICB0aGlzLnNpemUrKztcblx0ICB9XG5cdCAgZW50cnkudmFsdWUgPSB2YWx1ZTtcblx0XG5cdCAgcmV0dXJuIHJlbW92ZWQ7XG5cdH07XG5cdFxuXHQvKipcblx0ICogUHVyZ2UgdGhlIGxlYXN0IHJlY2VudGx5IHVzZWQgKG9sZGVzdCkgZW50cnkgZnJvbSB0aGVcblx0ICogY2FjaGUuIFJldHVybnMgdGhlIHJlbW92ZWQgZW50cnkgb3IgdW5kZWZpbmVkIGlmIHRoZVxuXHQgKiBjYWNoZSB3YXMgZW1wdHkuXG5cdCAqL1xuXHRcblx0cC5zaGlmdCA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgZW50cnkgPSB0aGlzLmhlYWQ7XG5cdCAgaWYgKGVudHJ5KSB7XG5cdCAgICB0aGlzLmhlYWQgPSB0aGlzLmhlYWQubmV3ZXI7XG5cdCAgICB0aGlzLmhlYWQub2xkZXIgPSB1bmRlZmluZWQ7XG5cdCAgICBlbnRyeS5uZXdlciA9IGVudHJ5Lm9sZGVyID0gdW5kZWZpbmVkO1xuXHQgICAgdGhpcy5fa2V5bWFwW2VudHJ5LmtleV0gPSB1bmRlZmluZWQ7XG5cdCAgICB0aGlzLnNpemUtLTtcblx0ICB9XG5cdCAgcmV0dXJuIGVudHJ5O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEdldCBhbmQgcmVnaXN0ZXIgcmVjZW50IHVzZSBvZiA8a2V5Pi4gUmV0dXJucyB0aGUgdmFsdWVcblx0ICogYXNzb2NpYXRlZCB3aXRoIDxrZXk+IG9yIHVuZGVmaW5lZCBpZiBub3QgaW4gY2FjaGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHtCb29sZWFufSByZXR1cm5FbnRyeVxuXHQgKiBAcmV0dXJuIHtFbnRyeXwqfVxuXHQgKi9cblx0XG5cdHAuZ2V0ID0gZnVuY3Rpb24gKGtleSwgcmV0dXJuRW50cnkpIHtcblx0ICB2YXIgZW50cnkgPSB0aGlzLl9rZXltYXBba2V5XTtcblx0ICBpZiAoZW50cnkgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXHQgIGlmIChlbnRyeSA9PT0gdGhpcy50YWlsKSB7XG5cdCAgICByZXR1cm4gcmV0dXJuRW50cnkgPyBlbnRyeSA6IGVudHJ5LnZhbHVlO1xuXHQgIH1cblx0ICAvLyBIRUFELS0tLS0tLS0tLS0tLS1UQUlMXG5cdCAgLy8gICA8Lm9sZGVyICAgLm5ld2VyPlxuXHQgIC8vICA8LS0tIGFkZCBkaXJlY3Rpb24gLS1cblx0ICAvLyAgIEEgIEIgIEMgIDxEPiAgRVxuXHQgIGlmIChlbnRyeS5uZXdlcikge1xuXHQgICAgaWYgKGVudHJ5ID09PSB0aGlzLmhlYWQpIHtcblx0ICAgICAgdGhpcy5oZWFkID0gZW50cnkubmV3ZXI7XG5cdCAgICB9XG5cdCAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyOyAvLyBDIDwtLSBFLlxuXHQgIH1cblx0ICBpZiAoZW50cnkub2xkZXIpIHtcblx0ICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gZW50cnkubmV3ZXI7IC8vIEMuIC0tPiBFXG5cdCAgfVxuXHQgIGVudHJ5Lm5ld2VyID0gdW5kZWZpbmVkOyAvLyBEIC0teFxuXHQgIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsOyAvLyBELiAtLT4gRVxuXHQgIGlmICh0aGlzLnRhaWwpIHtcblx0ICAgIHRoaXMudGFpbC5uZXdlciA9IGVudHJ5OyAvLyBFLiA8LS0gRFxuXHQgIH1cblx0ICB0aGlzLnRhaWwgPSBlbnRyeTtcblx0ICByZXR1cm4gcmV0dXJuRW50cnkgPyBlbnRyeSA6IGVudHJ5LnZhbHVlO1xuXHR9O1xuXHRcblx0dmFyIGNhY2hlJDEgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cdHZhciBmaWx0ZXJUb2tlblJFID0gL1teXFxzJ1wiXSt8J1teJ10qJ3xcIlteXCJdKlwiL2c7XG5cdHZhciByZXNlcnZlZEFyZ1JFID0gL15pbiR8Xi0/XFxkKy87XG5cdFxuXHQvKipcblx0ICogUGFyc2VyIHN0YXRlXG5cdCAqL1xuXHRcblx0dmFyIHN0cjtcblx0dmFyIGRpcjtcblx0dmFyIGM7XG5cdHZhciBwcmV2O1xuXHR2YXIgaTtcblx0dmFyIGw7XG5cdHZhciBsYXN0RmlsdGVySW5kZXg7XG5cdHZhciBpblNpbmdsZTtcblx0dmFyIGluRG91YmxlO1xuXHR2YXIgY3VybHk7XG5cdHZhciBzcXVhcmU7XG5cdHZhciBwYXJlbjtcblx0LyoqXG5cdCAqIFB1c2ggYSBmaWx0ZXIgdG8gdGhlIGN1cnJlbnQgZGlyZWN0aXZlIG9iamVjdFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHB1c2hGaWx0ZXIoKSB7XG5cdCAgdmFyIGV4cCA9IHN0ci5zbGljZShsYXN0RmlsdGVySW5kZXgsIGkpLnRyaW0oKTtcblx0ICB2YXIgZmlsdGVyO1xuXHQgIGlmIChleHApIHtcblx0ICAgIGZpbHRlciA9IHt9O1xuXHQgICAgdmFyIHRva2VucyA9IGV4cC5tYXRjaChmaWx0ZXJUb2tlblJFKTtcblx0ICAgIGZpbHRlci5uYW1lID0gdG9rZW5zWzBdO1xuXHQgICAgaWYgKHRva2Vucy5sZW5ndGggPiAxKSB7XG5cdCAgICAgIGZpbHRlci5hcmdzID0gdG9rZW5zLnNsaWNlKDEpLm1hcChwcm9jZXNzRmlsdGVyQXJnKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKGZpbHRlcikge1xuXHQgICAgKGRpci5maWx0ZXJzID0gZGlyLmZpbHRlcnMgfHwgW10pLnB1c2goZmlsdGVyKTtcblx0ICB9XG5cdCAgbGFzdEZpbHRlckluZGV4ID0gaSArIDE7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBhcmd1bWVudCBpcyBkeW5hbWljIGFuZCBzdHJpcCBxdW90ZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBhcmdcblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NGaWx0ZXJBcmcoYXJnKSB7XG5cdCAgaWYgKHJlc2VydmVkQXJnUkUudGVzdChhcmcpKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICB2YWx1ZTogdG9OdW1iZXIoYXJnKSxcblx0ICAgICAgZHluYW1pYzogZmFsc2Vcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBzdHJpcHBlZCA9IHN0cmlwUXVvdGVzKGFyZyk7XG5cdCAgICB2YXIgZHluYW1pYyA9IHN0cmlwcGVkID09PSBhcmc7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICB2YWx1ZTogZHluYW1pYyA/IGFyZyA6IHN0cmlwcGVkLFxuXHQgICAgICBkeW5hbWljOiBkeW5hbWljXG5cdCAgICB9O1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhcnNlIGEgZGlyZWN0aXZlIHZhbHVlIGFuZCBleHRyYWN0IHRoZSBleHByZXNzaW9uXG5cdCAqIGFuZCBpdHMgZmlsdGVycyBpbnRvIGEgZGVzY3JpcHRvci5cblx0ICpcblx0ICogRXhhbXBsZTpcblx0ICpcblx0ICogXCJhICsgMSB8IHVwcGVyY2FzZVwiIHdpbGwgeWllbGQ6XG5cdCAqIHtcblx0ICogICBleHByZXNzaW9uOiAnYSArIDEnLFxuXHQgKiAgIGZpbHRlcnM6IFtcblx0ICogICAgIHsgbmFtZTogJ3VwcGVyY2FzZScsIGFyZ3M6IG51bGwgfVxuXHQgKiAgIF1cblx0ICogfVxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc1xuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VEaXJlY3RpdmUocykge1xuXHQgIHZhciBoaXQgPSBjYWNoZSQxLmdldChzKTtcblx0ICBpZiAoaGl0KSB7XG5cdCAgICByZXR1cm4gaGl0O1xuXHQgIH1cblx0XG5cdCAgLy8gcmVzZXQgcGFyc2VyIHN0YXRlXG5cdCAgc3RyID0gcztcblx0ICBpblNpbmdsZSA9IGluRG91YmxlID0gZmFsc2U7XG5cdCAgY3VybHkgPSBzcXVhcmUgPSBwYXJlbiA9IDA7XG5cdCAgbGFzdEZpbHRlckluZGV4ID0gMDtcblx0ICBkaXIgPSB7fTtcblx0XG5cdCAgZm9yIChpID0gMCwgbCA9IHN0ci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHByZXYgPSBjO1xuXHQgICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuXHQgICAgaWYgKGluU2luZ2xlKSB7XG5cdCAgICAgIC8vIGNoZWNrIHNpbmdsZSBxdW90ZVxuXHQgICAgICBpZiAoYyA9PT0gMHgyNyAmJiBwcmV2ICE9PSAweDVDKSBpblNpbmdsZSA9ICFpblNpbmdsZTtcblx0ICAgIH0gZWxzZSBpZiAoaW5Eb3VibGUpIHtcblx0ICAgICAgLy8gY2hlY2sgZG91YmxlIHF1b3RlXG5cdCAgICAgIGlmIChjID09PSAweDIyICYmIHByZXYgIT09IDB4NUMpIGluRG91YmxlID0gIWluRG91YmxlO1xuXHQgICAgfSBlbHNlIGlmIChjID09PSAweDdDICYmIC8vIHBpcGVcblx0ICAgIHN0ci5jaGFyQ29kZUF0KGkgKyAxKSAhPT0gMHg3QyAmJiBzdHIuY2hhckNvZGVBdChpIC0gMSkgIT09IDB4N0MpIHtcblx0ICAgICAgaWYgKGRpci5leHByZXNzaW9uID09IG51bGwpIHtcblx0ICAgICAgICAvLyBmaXJzdCBmaWx0ZXIsIGVuZCBvZiBleHByZXNzaW9uXG5cdCAgICAgICAgbGFzdEZpbHRlckluZGV4ID0gaSArIDE7XG5cdCAgICAgICAgZGlyLmV4cHJlc3Npb24gPSBzdHIuc2xpY2UoMCwgaSkudHJpbSgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIGFscmVhZHkgaGFzIGZpbHRlclxuXHQgICAgICAgIHB1c2hGaWx0ZXIoKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc3dpdGNoIChjKSB7XG5cdCAgICAgICAgY2FzZSAweDIyOlxuXHQgICAgICAgICAgaW5Eb3VibGUgPSB0cnVlO2JyZWFrOyAvLyBcIlxuXHQgICAgICAgIGNhc2UgMHgyNzpcblx0ICAgICAgICAgIGluU2luZ2xlID0gdHJ1ZTticmVhazsgLy8gJ1xuXHQgICAgICAgIGNhc2UgMHgyODpcblx0ICAgICAgICAgIHBhcmVuKys7YnJlYWs7IC8vIChcblx0ICAgICAgICBjYXNlIDB4Mjk6XG5cdCAgICAgICAgICBwYXJlbi0tO2JyZWFrOyAvLyApXG5cdCAgICAgICAgY2FzZSAweDVCOlxuXHQgICAgICAgICAgc3F1YXJlKys7YnJlYWs7IC8vIFtcblx0ICAgICAgICBjYXNlIDB4NUQ6XG5cdCAgICAgICAgICBzcXVhcmUtLTticmVhazsgLy8gXVxuXHQgICAgICAgIGNhc2UgMHg3Qjpcblx0ICAgICAgICAgIGN1cmx5Kys7YnJlYWs7IC8vIHtcblx0ICAgICAgICBjYXNlIDB4N0Q6XG5cdCAgICAgICAgICBjdXJseS0tO2JyZWFrOyAvLyB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGlmIChkaXIuZXhwcmVzc2lvbiA9PSBudWxsKSB7XG5cdCAgICBkaXIuZXhwcmVzc2lvbiA9IHN0ci5zbGljZSgwLCBpKS50cmltKCk7XG5cdCAgfSBlbHNlIGlmIChsYXN0RmlsdGVySW5kZXggIT09IDApIHtcblx0ICAgIHB1c2hGaWx0ZXIoKTtcblx0ICB9XG5cdFxuXHQgIGNhY2hlJDEucHV0KHMsIGRpcik7XG5cdCAgcmV0dXJuIGRpcjtcblx0fVxuXHRcblx0dmFyIGRpcmVjdGl2ZSA9IE9iamVjdC5mcmVlemUoe1xuXHQgIHBhcnNlRGlyZWN0aXZlOiBwYXJzZURpcmVjdGl2ZVxuXHR9KTtcblx0XG5cdHZhciByZWdleEVzY2FwZVJFID0gL1stLiorP14ke30oKXxbXFxdXFwvXFxcXF0vZztcblx0dmFyIGNhY2hlID0gdW5kZWZpbmVkO1xuXHR2YXIgdGFnUkUgPSB1bmRlZmluZWQ7XG5cdHZhciBodG1sUkUgPSB1bmRlZmluZWQ7XG5cdC8qKlxuXHQgKiBFc2NhcGUgYSBzdHJpbmcgc28gaXQgY2FuIGJlIHVzZWQgaW4gYSBSZWdFeHBcblx0ICogY29uc3RydWN0b3IuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBlc2NhcGVSZWdleChzdHIpIHtcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UocmVnZXhFc2NhcGVSRSwgJ1xcXFwkJicpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjb21waWxlUmVnZXgoKSB7XG5cdCAgdmFyIG9wZW4gPSBlc2NhcGVSZWdleChjb25maWcuZGVsaW1pdGVyc1swXSk7XG5cdCAgdmFyIGNsb3NlID0gZXNjYXBlUmVnZXgoY29uZmlnLmRlbGltaXRlcnNbMV0pO1xuXHQgIHZhciB1bnNhZmVPcGVuID0gZXNjYXBlUmVnZXgoY29uZmlnLnVuc2FmZURlbGltaXRlcnNbMF0pO1xuXHQgIHZhciB1bnNhZmVDbG9zZSA9IGVzY2FwZVJlZ2V4KGNvbmZpZy51bnNhZmVEZWxpbWl0ZXJzWzFdKTtcblx0ICB0YWdSRSA9IG5ldyBSZWdFeHAodW5zYWZlT3BlbiArICcoKD86LnxcXFxcbikrPyknICsgdW5zYWZlQ2xvc2UgKyAnfCcgKyBvcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyBjbG9zZSwgJ2cnKTtcblx0ICBodG1sUkUgPSBuZXcgUmVnRXhwKCdeJyArIHVuc2FmZU9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIHVuc2FmZUNsb3NlICsgJyQnKTtcblx0ICAvLyByZXNldCBjYWNoZVxuXHQgIGNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2UgYSB0ZW1wbGF0ZSB0ZXh0IHN0cmluZyBpbnRvIGFuIGFycmF5IG9mIHRva2Vucy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHRcblx0ICogQHJldHVybiB7QXJyYXk8T2JqZWN0PiB8IG51bGx9XG5cdCAqICAgICAgICAgICAgICAgLSB7U3RyaW5nfSB0eXBlXG5cdCAqICAgICAgICAgICAgICAgLSB7U3RyaW5nfSB2YWx1ZVxuXHQgKiAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtodG1sXVxuXHQgKiAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtvbmVUaW1lXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlVGV4dCh0ZXh0KSB7XG5cdCAgaWYgKCFjYWNoZSkge1xuXHQgICAgY29tcGlsZVJlZ2V4KCk7XG5cdCAgfVxuXHQgIHZhciBoaXQgPSBjYWNoZS5nZXQodGV4dCk7XG5cdCAgaWYgKGhpdCkge1xuXHQgICAgcmV0dXJuIGhpdDtcblx0ICB9XG5cdCAgaWYgKCF0YWdSRS50ZXN0KHRleHQpKSB7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdCAgdmFyIHRva2VucyA9IFtdO1xuXHQgIHZhciBsYXN0SW5kZXggPSB0YWdSRS5sYXN0SW5kZXggPSAwO1xuXHQgIHZhciBtYXRjaCwgaW5kZXgsIGh0bWwsIHZhbHVlLCBmaXJzdCwgb25lVGltZTtcblx0ICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgIHdoaWxlIChtYXRjaCA9IHRhZ1JFLmV4ZWModGV4dCkpIHtcblx0ICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIGluZGV4ID0gbWF0Y2guaW5kZXg7XG5cdCAgICAvLyBwdXNoIHRleHQgdG9rZW5cblx0ICAgIGlmIChpbmRleCA+IGxhc3RJbmRleCkge1xuXHQgICAgICB0b2tlbnMucHVzaCh7XG5cdCAgICAgICAgdmFsdWU6IHRleHQuc2xpY2UobGFzdEluZGV4LCBpbmRleClcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgICAvLyB0YWcgdG9rZW5cblx0ICAgIGh0bWwgPSBodG1sUkUudGVzdChtYXRjaFswXSk7XG5cdCAgICB2YWx1ZSA9IGh0bWwgPyBtYXRjaFsxXSA6IG1hdGNoWzJdO1xuXHQgICAgZmlyc3QgPSB2YWx1ZS5jaGFyQ29kZUF0KDApO1xuXHQgICAgb25lVGltZSA9IGZpcnN0ID09PSA0MjsgLy8gKlxuXHQgICAgdmFsdWUgPSBvbmVUaW1lID8gdmFsdWUuc2xpY2UoMSkgOiB2YWx1ZTtcblx0ICAgIHRva2Vucy5wdXNoKHtcblx0ICAgICAgdGFnOiB0cnVlLFxuXHQgICAgICB2YWx1ZTogdmFsdWUudHJpbSgpLFxuXHQgICAgICBodG1sOiBodG1sLFxuXHQgICAgICBvbmVUaW1lOiBvbmVUaW1lXG5cdCAgICB9KTtcblx0ICAgIGxhc3RJbmRleCA9IGluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuXHQgIH1cblx0ICBpZiAobGFzdEluZGV4IDwgdGV4dC5sZW5ndGgpIHtcblx0ICAgIHRva2Vucy5wdXNoKHtcblx0ICAgICAgdmFsdWU6IHRleHQuc2xpY2UobGFzdEluZGV4KVxuXHQgICAgfSk7XG5cdCAgfVxuXHQgIGNhY2hlLnB1dCh0ZXh0LCB0b2tlbnMpO1xuXHQgIHJldHVybiB0b2tlbnM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JtYXQgYSBsaXN0IG9mIHRva2VucyBpbnRvIGFuIGV4cHJlc3Npb24uXG5cdCAqIGUuZy4gdG9rZW5zIHBhcnNlZCBmcm9tICdhIHt7Yn19IGMnIGNhbiBiZSBzZXJpYWxpemVkXG5cdCAqIGludG8gb25lIHNpbmdsZSBleHByZXNzaW9uIGFzICdcImEgXCIgKyBiICsgXCIgY1wiJy5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gdG9rZW5zXG5cdCAqIEBwYXJhbSB7VnVlfSBbdm1dXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0b2tlbnNUb0V4cCh0b2tlbnMsIHZtKSB7XG5cdCAgaWYgKHRva2Vucy5sZW5ndGggPiAxKSB7XG5cdCAgICByZXR1cm4gdG9rZW5zLm1hcChmdW5jdGlvbiAodG9rZW4pIHtcblx0ICAgICAgcmV0dXJuIGZvcm1hdFRva2VuKHRva2VuLCB2bSk7XG5cdCAgICB9KS5qb2luKCcrJyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBmb3JtYXRUb2tlbih0b2tlbnNbMF0sIHZtLCB0cnVlKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JtYXQgYSBzaW5nbGUgdG9rZW4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB0b2tlblxuXHQgKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFtzaW5nbGVdXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRUb2tlbih0b2tlbiwgdm0sIHNpbmdsZSkge1xuXHQgIHJldHVybiB0b2tlbi50YWcgPyB0b2tlbi5vbmVUaW1lICYmIHZtID8gJ1wiJyArIHZtLiRldmFsKHRva2VuLnZhbHVlKSArICdcIicgOiBpbmxpbmVGaWx0ZXJzKHRva2VuLnZhbHVlLCBzaW5nbGUpIDogJ1wiJyArIHRva2VuLnZhbHVlICsgJ1wiJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvciBhbiBhdHRyaWJ1dGUgd2l0aCBtdWx0aXBsZSBpbnRlcnBvbGF0aW9uIHRhZ3MsXG5cdCAqIGUuZy4gYXR0cj1cInNvbWUte3t0aGluZyB8IGZpbHRlcn19XCIsIGluIG9yZGVyIHRvIGNvbWJpbmVcblx0ICogdGhlIHdob2xlIHRoaW5nIGludG8gYSBzaW5nbGUgd2F0Y2hhYmxlIGV4cHJlc3Npb24sIHdlXG5cdCAqIGhhdmUgdG8gaW5saW5lIHRob3NlIGZpbHRlcnMuIFRoaXMgZnVuY3Rpb24gZG9lcyBleGFjdGx5XG5cdCAqIHRoYXQuIFRoaXMgaXMgYSBiaXQgaGFja3kgYnV0IGl0IGF2b2lkcyBoZWF2eSBjaGFuZ2VzXG5cdCAqIHRvIGRpcmVjdGl2ZSBwYXJzZXIgYW5kIHdhdGNoZXIgbWVjaGFuaXNtLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gc2luZ2xlXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHR2YXIgZmlsdGVyUkUgPSAvW158XVxcfFtefF0vO1xuXHRmdW5jdGlvbiBpbmxpbmVGaWx0ZXJzKGV4cCwgc2luZ2xlKSB7XG5cdCAgaWYgKCFmaWx0ZXJSRS50ZXN0KGV4cCkpIHtcblx0ICAgIHJldHVybiBzaW5nbGUgPyBleHAgOiAnKCcgKyBleHAgKyAnKSc7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBkaXIgPSBwYXJzZURpcmVjdGl2ZShleHApO1xuXHQgICAgaWYgKCFkaXIuZmlsdGVycykge1xuXHQgICAgICByZXR1cm4gJygnICsgZXhwICsgJyknO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd0aGlzLl9hcHBseUZpbHRlcnMoJyArIGRpci5leHByZXNzaW9uICsgLy8gdmFsdWVcblx0ICAgICAgJyxudWxsLCcgKyAvLyBvbGRWYWx1ZSAobnVsbCBmb3IgcmVhZClcblx0ICAgICAgSlNPTi5zdHJpbmdpZnkoZGlyLmZpbHRlcnMpICsgLy8gZmlsdGVyIGRlc2NyaXB0b3JzXG5cdCAgICAgICcsZmFsc2UpJzsgLy8gd3JpdGU/XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgdGV4dCA9IE9iamVjdC5mcmVlemUoe1xuXHQgIGNvbXBpbGVSZWdleDogY29tcGlsZVJlZ2V4LFxuXHQgIHBhcnNlVGV4dDogcGFyc2VUZXh0LFxuXHQgIHRva2Vuc1RvRXhwOiB0b2tlbnNUb0V4cFxuXHR9KTtcblx0XG5cdHZhciBkZWxpbWl0ZXJzID0gWyd7eycsICd9fSddO1xuXHR2YXIgdW5zYWZlRGVsaW1pdGVycyA9IFsne3t7JywgJ319fSddO1xuXHRcblx0dmFyIGNvbmZpZyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHtcblx0XG5cdCAgLyoqXG5cdCAgICogV2hldGhlciB0byBwcmludCBkZWJ1ZyBtZXNzYWdlcy5cblx0ICAgKiBBbHNvIGVuYWJsZXMgc3RhY2sgdHJhY2UgZm9yIHdhcm5pbmdzLlxuXHQgICAqXG5cdCAgICogQHR5cGUge0Jvb2xlYW59XG5cdCAgICovXG5cdFxuXHQgIGRlYnVnOiBmYWxzZSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hldGhlciB0byBzdXBwcmVzcyB3YXJuaW5ncy5cblx0ICAgKlxuXHQgICAqIEB0eXBlIHtCb29sZWFufVxuXHQgICAqL1xuXHRcblx0ICBzaWxlbnQ6IGZhbHNlLFxuXHRcblx0ICAvKipcblx0ICAgKiBXaGV0aGVyIHRvIHVzZSBhc3luYyByZW5kZXJpbmcuXG5cdCAgICovXG5cdFxuXHQgIGFzeW5jOiB0cnVlLFxuXHRcblx0ICAvKipcblx0ICAgKiBXaGV0aGVyIHRvIHdhcm4gYWdhaW5zdCBlcnJvcnMgY2F1Z2h0IHdoZW4gZXZhbHVhdGluZ1xuXHQgICAqIGV4cHJlc3Npb25zLlxuXHQgICAqL1xuXHRcblx0ICB3YXJuRXhwcmVzc2lvbkVycm9yczogdHJ1ZSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hldGhlciB0byBhbGxvdyBkZXZ0b29scyBpbnNwZWN0aW9uLlxuXHQgICAqIERpc2FibGVkIGJ5IGRlZmF1bHQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG5cdCAgICovXG5cdFxuXHQgIGRldnRvb2xzOiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nLFxuXHRcblx0ICAvKipcblx0ICAgKiBJbnRlcm5hbCBmbGFnIHRvIGluZGljYXRlIHRoZSBkZWxpbWl0ZXJzIGhhdmUgYmVlblxuXHQgICAqIGNoYW5nZWQuXG5cdCAgICpcblx0ICAgKiBAdHlwZSB7Qm9vbGVhbn1cblx0ICAgKi9cblx0XG5cdCAgX2RlbGltaXRlcnNDaGFuZ2VkOiB0cnVlLFxuXHRcblx0ICAvKipcblx0ICAgKiBMaXN0IG9mIGFzc2V0IHR5cGVzIHRoYXQgYSBjb21wb25lbnQgY2FuIG93bi5cblx0ICAgKlxuXHQgICAqIEB0eXBlIHtBcnJheX1cblx0ICAgKi9cblx0XG5cdCAgX2Fzc2V0VHlwZXM6IFsnY29tcG9uZW50JywgJ2RpcmVjdGl2ZScsICdlbGVtZW50RGlyZWN0aXZlJywgJ2ZpbHRlcicsICd0cmFuc2l0aW9uJywgJ3BhcnRpYWwnXSxcblx0XG5cdCAgLyoqXG5cdCAgICogcHJvcCBiaW5kaW5nIG1vZGVzXG5cdCAgICovXG5cdFxuXHQgIF9wcm9wQmluZGluZ01vZGVzOiB7XG5cdCAgICBPTkVfV0FZOiAwLFxuXHQgICAgVFdPX1dBWTogMSxcblx0ICAgIE9ORV9USU1FOiAyXG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogTWF4IGNpcmN1bGFyIHVwZGF0ZXMgYWxsb3dlZCBpbiBhIGJhdGNoZXIgZmx1c2ggY3ljbGUuXG5cdCAgICovXG5cdFxuXHQgIF9tYXhVcGRhdGVDb3VudDogMTAwXG5cdFxuXHR9LCB7XG5cdCAgZGVsaW1pdGVyczogeyAvKipcblx0ICAgICAgICAgICAgICAgICAqIEludGVycG9sYXRpb24gZGVsaW1pdGVycy4gQ2hhbmdpbmcgdGhlc2Ugd291bGQgdHJpZ2dlclxuXHQgICAgICAgICAgICAgICAgICogdGhlIHRleHQgcGFyc2VyIHRvIHJlLWNvbXBpbGUgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbnMuXG5cdCAgICAgICAgICAgICAgICAgKlxuXHQgICAgICAgICAgICAgICAgICogQHR5cGUge0FycmF5PFN0cmluZz59XG5cdCAgICAgICAgICAgICAgICAgKi9cblx0XG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgcmV0dXJuIGRlbGltaXRlcnM7XG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7XG5cdCAgICAgIGRlbGltaXRlcnMgPSB2YWw7XG5cdCAgICAgIGNvbXBpbGVSZWdleCgpO1xuXHQgICAgfSxcblx0ICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0ICAgIGVudW1lcmFibGU6IHRydWVcblx0ICB9LFxuXHQgIHVuc2FmZURlbGltaXRlcnM6IHtcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICByZXR1cm4gdW5zYWZlRGVsaW1pdGVycztcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcblx0ICAgICAgdW5zYWZlRGVsaW1pdGVycyA9IHZhbDtcblx0ICAgICAgY29tcGlsZVJlZ2V4KCk7XG5cdCAgICB9LFxuXHQgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgZW51bWVyYWJsZTogdHJ1ZVxuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgd2FybiA9IHVuZGVmaW5lZDtcblx0dmFyIGZvcm1hdENvbXBvbmVudE5hbWUgPSB1bmRlZmluZWQ7XG5cdFxuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIChmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgaGFzQ29uc29sZSA9IHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJztcblx0XG5cdCAgICB3YXJuID0gZnVuY3Rpb24gKG1zZywgdm0pIHtcblx0ICAgICAgaWYgKGhhc0NvbnNvbGUgJiYgIWNvbmZpZy5zaWxlbnQpIHtcblx0ICAgICAgICBjb25zb2xlLmVycm9yKCdbVnVlIHdhcm5dOiAnICsgbXNnICsgKHZtID8gZm9ybWF0Q29tcG9uZW50TmFtZSh2bSkgOiAnJykpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIGZvcm1hdENvbXBvbmVudE5hbWUgPSBmdW5jdGlvbiAodm0pIHtcblx0ICAgICAgdmFyIG5hbWUgPSB2bS5faXNWdWUgPyB2bS4kb3B0aW9ucy5uYW1lIDogdm0ubmFtZTtcblx0ICAgICAgcmV0dXJuIG5hbWUgPyAnIChmb3VuZCBpbiBjb21wb25lbnQ6IDwnICsgaHlwaGVuYXRlKG5hbWUpICsgJz4pJyA6ICcnO1xuXHQgICAgfTtcblx0ICB9KSgpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXBwZW5kIHdpdGggdHJhbnNpdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFwcGVuZFdpdGhUcmFuc2l0aW9uKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuXHQgIGFwcGx5VHJhbnNpdGlvbihlbCwgMSwgZnVuY3Rpb24gKCkge1xuXHQgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcblx0ICB9LCB2bSwgY2IpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSW5zZXJ0QmVmb3JlIHdpdGggdHJhbnNpdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGJlZm9yZVdpdGhUcmFuc2l0aW9uKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuXHQgIGFwcGx5VHJhbnNpdGlvbihlbCwgMSwgZnVuY3Rpb24gKCkge1xuXHQgICAgYmVmb3JlKGVsLCB0YXJnZXQpO1xuXHQgIH0sIHZtLCBjYik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgd2l0aCB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlV2l0aFRyYW5zaXRpb24oZWwsIHZtLCBjYikge1xuXHQgIGFwcGx5VHJhbnNpdGlvbihlbCwgLTEsIGZ1bmN0aW9uICgpIHtcblx0ICAgIHJlbW92ZShlbCk7XG5cdCAgfSwgdm0sIGNiKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFwcGx5IHRyYW5zaXRpb25zIHdpdGggYW4gb3BlcmF0aW9uIGNhbGxiYWNrLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBkaXJlY3Rpb25cblx0ICogICAgICAgICAgICAgICAgICAxOiBlbnRlclxuXHQgKiAgICAgICAgICAgICAgICAgLTE6IGxlYXZlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gdGhlIGFjdHVhbCBET00gb3BlcmF0aW9uXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXBwbHlUcmFuc2l0aW9uKGVsLCBkaXJlY3Rpb24sIG9wLCB2bSwgY2IpIHtcblx0ICB2YXIgdHJhbnNpdGlvbiA9IGVsLl9fdl90cmFucztcblx0ICBpZiAoIXRyYW5zaXRpb24gfHxcblx0ICAvLyBza2lwIGlmIHRoZXJlIGFyZSBubyBqcyBob29rcyBhbmQgQ1NTIHRyYW5zaXRpb24gaXNcblx0ICAvLyBub3Qgc3VwcG9ydGVkXG5cdCAgIXRyYW5zaXRpb24uaG9va3MgJiYgIXRyYW5zaXRpb25FbmRFdmVudCB8fFxuXHQgIC8vIHNraXAgdHJhbnNpdGlvbnMgZm9yIGluaXRpYWwgY29tcGlsZVxuXHQgICF2bS5faXNDb21waWxlZCB8fFxuXHQgIC8vIGlmIHRoZSB2bSBpcyBiZWluZyBtYW5pcHVsYXRlZCBieSBhIHBhcmVudCBkaXJlY3RpdmVcblx0ICAvLyBkdXJpbmcgdGhlIHBhcmVudCdzIGNvbXBpbGF0aW9uIHBoYXNlLCBza2lwIHRoZVxuXHQgIC8vIGFuaW1hdGlvbi5cblx0ICB2bS4kcGFyZW50ICYmICF2bS4kcGFyZW50Ll9pc0NvbXBpbGVkKSB7XG5cdCAgICBvcCgpO1xuXHQgICAgaWYgKGNiKSBjYigpO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgYWN0aW9uID0gZGlyZWN0aW9uID4gMCA/ICdlbnRlcicgOiAnbGVhdmUnO1xuXHQgIHRyYW5zaXRpb25bYWN0aW9uXShvcCwgY2IpO1xuXHR9XG5cdFxuXHR2YXIgdHJhbnNpdGlvbiA9IE9iamVjdC5mcmVlemUoe1xuXHQgIGFwcGVuZFdpdGhUcmFuc2l0aW9uOiBhcHBlbmRXaXRoVHJhbnNpdGlvbixcblx0ICBiZWZvcmVXaXRoVHJhbnNpdGlvbjogYmVmb3JlV2l0aFRyYW5zaXRpb24sXG5cdCAgcmVtb3ZlV2l0aFRyYW5zaXRpb246IHJlbW92ZVdpdGhUcmFuc2l0aW9uLFxuXHQgIGFwcGx5VHJhbnNpdGlvbjogYXBwbHlUcmFuc2l0aW9uXG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIFF1ZXJ5IGFuIGVsZW1lbnQgc2VsZWN0b3IgaWYgaXQncyBub3QgYW4gZWxlbWVudCBhbHJlYWR5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBlbFxuXHQgKiBAcmV0dXJuIHtFbGVtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHF1ZXJ5KGVsKSB7XG5cdCAgaWYgKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHtcblx0ICAgIHZhciBzZWxlY3RvciA9IGVsO1xuXHQgICAgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsKTtcblx0ICAgIGlmICghZWwpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdDYW5ub3QgZmluZCBlbGVtZW50OiAnICsgc2VsZWN0b3IpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gZWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhIG5vZGUgaXMgaW4gdGhlIGRvY3VtZW50LlxuXHQgKiBOb3RlOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMgc2hvdWxkIHdvcmsgaGVyZVxuXHQgKiBidXQgYWx3YXlzIHJldHVybnMgZmFsc2UgZm9yIGNvbW1lbnQgbm9kZXMgaW4gcGhhbnRvbWpzLFxuXHQgKiBtYWtpbmcgdW5pdCB0ZXN0cyBkaWZmaWN1bHQuIFRoaXMgaXMgZml4ZWQgYnkgZG9pbmcgdGhlXG5cdCAqIGNvbnRhaW5zKCkgY2hlY2sgb24gdGhlIG5vZGUncyBwYXJlbnROb2RlIGluc3RlYWQgb2Zcblx0ICogdGhlIG5vZGUgaXRzZWxmLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpbkRvYyhub2RlKSB7XG5cdCAgaWYgKCFub2RlKSByZXR1cm4gZmFsc2U7XG5cdCAgdmFyIGRvYyA9IG5vZGUub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdCAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcblx0ICByZXR1cm4gZG9jID09PSBub2RlIHx8IGRvYyA9PT0gcGFyZW50IHx8ICEhKHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgPT09IDEgJiYgZG9jLmNvbnRhaW5zKHBhcmVudCkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IGFuZCByZW1vdmUgYW4gYXR0cmlidXRlIGZyb20gYSBub2RlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IF9hdHRyXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0QXR0cihub2RlLCBfYXR0cikge1xuXHQgIHZhciB2YWwgPSBub2RlLmdldEF0dHJpYnV0ZShfYXR0cik7XG5cdCAgaWYgKHZhbCAhPT0gbnVsbCkge1xuXHQgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoX2F0dHIpO1xuXHQgIH1cblx0ICByZXR1cm4gdmFsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IGFuIGF0dHJpYnV0ZSB3aXRoIGNvbG9uIG9yIHYtYmluZDogcHJlZml4LlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICogQHJldHVybiB7U3RyaW5nfG51bGx9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0QmluZEF0dHIobm9kZSwgbmFtZSkge1xuXHQgIHZhciB2YWwgPSBnZXRBdHRyKG5vZGUsICc6JyArIG5hbWUpO1xuXHQgIGlmICh2YWwgPT09IG51bGwpIHtcblx0ICAgIHZhbCA9IGdldEF0dHIobm9kZSwgJ3YtYmluZDonICsgbmFtZSk7XG5cdCAgfVxuXHQgIHJldHVybiB2YWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayB0aGUgcHJlc2VuY2Ugb2YgYSBiaW5kIGF0dHJpYnV0ZS5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaGFzQmluZEF0dHIobm9kZSwgbmFtZSkge1xuXHQgIHJldHVybiBub2RlLmhhc0F0dHJpYnV0ZShuYW1lKSB8fCBub2RlLmhhc0F0dHJpYnV0ZSgnOicgKyBuYW1lKSB8fCBub2RlLmhhc0F0dHJpYnV0ZSgndi1iaW5kOicgKyBuYW1lKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEluc2VydCBlbCBiZWZvcmUgdGFyZ2V0XG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBiZWZvcmUoZWwsIHRhcmdldCkge1xuXHQgIHRhcmdldC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlbCwgdGFyZ2V0KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEluc2VydCBlbCBhZnRlciB0YXJnZXRcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFmdGVyKGVsLCB0YXJnZXQpIHtcblx0ICBpZiAodGFyZ2V0Lm5leHRTaWJsaW5nKSB7XG5cdCAgICBiZWZvcmUoZWwsIHRhcmdldC5uZXh0U2libGluZyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRhcmdldC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGVsKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgZWwgZnJvbSBET01cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZShlbCkge1xuXHQgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJlcGVuZCBlbCB0byB0YXJnZXRcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByZXBlbmQoZWwsIHRhcmdldCkge1xuXHQgIGlmICh0YXJnZXQuZmlyc3RDaGlsZCkge1xuXHQgICAgYmVmb3JlKGVsLCB0YXJnZXQuZmlyc3RDaGlsZCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVwbGFjZSB0YXJnZXQgd2l0aCBlbFxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVwbGFjZSh0YXJnZXQsIGVsKSB7XG5cdCAgdmFyIHBhcmVudCA9IHRhcmdldC5wYXJlbnROb2RlO1xuXHQgIGlmIChwYXJlbnQpIHtcblx0ICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQoZWwsIHRhcmdldCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQWRkIGV2ZW50IGxpc3RlbmVyIHNob3J0aGFuZC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICogQHBhcmFtIHtCb29sZWFufSBbdXNlQ2FwdHVyZV1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBvbihlbCwgZXZlbnQsIGNiLCB1c2VDYXB0dXJlKSB7XG5cdCAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2IsIHVzZUNhcHR1cmUpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVyIHNob3J0aGFuZC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBvZmYoZWwsIGV2ZW50LCBjYikge1xuXHQgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGNiKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvciBJRTkgY29tcGF0OiB3aGVuIGJvdGggY2xhc3MgYW5kIDpjbGFzcyBhcmUgcHJlc2VudFxuXHQgKiBnZXRBdHRyaWJ1dGUoJ2NsYXNzJykgcmV0dXJucyB3cm9uZyB2YWx1ZS4uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRDbGFzcyhlbCkge1xuXHQgIHZhciBjbGFzc25hbWUgPSBlbC5jbGFzc05hbWU7XG5cdCAgaWYgKHR5cGVvZiBjbGFzc25hbWUgPT09ICdvYmplY3QnKSB7XG5cdCAgICBjbGFzc25hbWUgPSBjbGFzc25hbWUuYmFzZVZhbCB8fCAnJztcblx0ICB9XG5cdCAgcmV0dXJuIGNsYXNzbmFtZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEluIElFOSwgc2V0QXR0cmlidXRlKCdjbGFzcycpIHdpbGwgcmVzdWx0IGluIGVtcHR5IGNsYXNzXG5cdCAqIGlmIHRoZSBlbGVtZW50IGFsc28gaGFzIHRoZSA6Y2xhc3MgYXR0cmlidXRlOyBIb3dldmVyIGluXG5cdCAqIFBoYW50b21KUywgc2V0dGluZyBgY2xhc3NOYW1lYCBkb2VzIG5vdCB3b3JrIG9uIFNWRyBlbGVtZW50cy4uLlxuXHQgKiBTbyB3ZSBoYXZlIHRvIGRvIGEgY29uZGl0aW9uYWwgY2hlY2sgaGVyZS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY2xzXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2V0Q2xhc3MoZWwsIGNscykge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChpc0lFOSAmJiAhL3N2ZyQvLnRlc3QoZWwubmFtZXNwYWNlVVJJKSkge1xuXHQgICAgZWwuY2xhc3NOYW1lID0gY2xzO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY2xzKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBZGQgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBJRSAmIFNWR1xuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhZGRDbGFzcyhlbCwgY2xzKSB7XG5cdCAgaWYgKGVsLmNsYXNzTGlzdCkge1xuXHQgICAgZWwuY2xhc3NMaXN0LmFkZChjbHMpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgY3VyID0gJyAnICsgZ2V0Q2xhc3MoZWwpICsgJyAnO1xuXHQgICAgaWYgKGN1ci5pbmRleE9mKCcgJyArIGNscyArICcgJykgPCAwKSB7XG5cdCAgICAgIHNldENsYXNzKGVsLCAoY3VyICsgY2xzKS50cmltKCkpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIElFICYgU1ZHXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsLCBjbHMpIHtcblx0ICBpZiAoZWwuY2xhc3NMaXN0KSB7XG5cdCAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNscyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBjdXIgPSAnICcgKyBnZXRDbGFzcyhlbCkgKyAnICc7XG5cdCAgICB2YXIgdGFyID0gJyAnICsgY2xzICsgJyAnO1xuXHQgICAgd2hpbGUgKGN1ci5pbmRleE9mKHRhcikgPj0gMCkge1xuXHQgICAgICBjdXIgPSBjdXIucmVwbGFjZSh0YXIsICcgJyk7XG5cdCAgICB9XG5cdCAgICBzZXRDbGFzcyhlbCwgY3VyLnRyaW0oKSk7XG5cdCAgfVxuXHQgIGlmICghZWwuY2xhc3NOYW1lKSB7XG5cdCAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRXh0cmFjdCByYXcgY29udGVudCBpbnNpZGUgYW4gZWxlbWVudCBpbnRvIGEgdGVtcG9yYXJ5XG5cdCAqIGNvbnRhaW5lciBkaXZcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IGFzRnJhZ21lbnRcblx0ICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGV4dHJhY3RDb250ZW50KGVsLCBhc0ZyYWdtZW50KSB7XG5cdCAgdmFyIGNoaWxkO1xuXHQgIHZhciByYXdDb250ZW50O1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChpc1RlbXBsYXRlKGVsKSAmJiBpc0ZyYWdtZW50KGVsLmNvbnRlbnQpKSB7XG5cdCAgICBlbCA9IGVsLmNvbnRlbnQ7XG5cdCAgfVxuXHQgIGlmIChlbC5oYXNDaGlsZE5vZGVzKCkpIHtcblx0ICAgIHRyaW1Ob2RlKGVsKTtcblx0ICAgIHJhd0NvbnRlbnQgPSBhc0ZyYWdtZW50ID8gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgd2hpbGUgKGNoaWxkID0gZWwuZmlyc3RDaGlsZCkge1xuXHQgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICAgIHJhd0NvbnRlbnQuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmF3Q29udGVudDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRyaW0gcG9zc2libGUgZW1wdHkgaGVhZC90YWlsIHRleHQgYW5kIGNvbW1lbnRcblx0ICogbm9kZXMgaW5zaWRlIGEgcGFyZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0cmltTm9kZShub2RlKSB7XG5cdCAgdmFyIGNoaWxkO1xuXHQgIC8qIGVzbGludC1kaXNhYmxlIG5vLXNlcXVlbmNlcyAqL1xuXHQgIHdoaWxlICgoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcblx0ICAgIG5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuXHQgIH1cblx0ICB3aGlsZSAoKGNoaWxkID0gbm9kZS5sYXN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcblx0ICAgIG5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuXHQgIH1cblx0ICAvKiBlc2xpbnQtZW5hYmxlIG5vLXNlcXVlbmNlcyAqL1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1RyaW1tYWJsZShub2RlKSB7XG5cdCAgcmV0dXJuIG5vZGUgJiYgKG5vZGUubm9kZVR5cGUgPT09IDMgJiYgIW5vZGUuZGF0YS50cmltKCkgfHwgbm9kZS5ub2RlVHlwZSA9PT0gOCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgdGVtcGxhdGUgdGFnLlxuXHQgKiBOb3RlIGlmIHRoZSB0ZW1wbGF0ZSBhcHBlYXJzIGluc2lkZSBhbiBTVkcgaXRzIHRhZ05hbWVcblx0ICogd2lsbCBiZSBpbiBsb3dlcmNhc2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc1RlbXBsYXRlKGVsKSB7XG5cdCAgcmV0dXJuIGVsLnRhZ05hbWUgJiYgZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAndGVtcGxhdGUnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlIGFuIFwiYW5jaG9yXCIgZm9yIHBlcmZvcm1pbmcgZG9tIGluc2VydGlvbi9yZW1vdmFscy5cblx0ICogVGhpcyBpcyB1c2VkIGluIGEgbnVtYmVyIG9mIHNjZW5hcmlvczpcblx0ICogLSBmcmFnbWVudCBpbnN0YW5jZVxuXHQgKiAtIHYtaHRtbFxuXHQgKiAtIHYtaWZcblx0ICogLSB2LWZvclxuXHQgKiAtIGNvbXBvbmVudFxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY29udGVudFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHBlcnNpc3QgLSBJRSB0cmFzaGVzIGVtcHR5IHRleHROb2RlcyBvblxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZU5vZGUodHJ1ZSksIHNvIGluIGNlcnRhaW5cblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZXMgdGhlIGFuY2hvciBuZWVkcyB0byBiZVxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub24tZW1wdHkgdG8gYmUgcGVyc2lzdGVkIGluXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlcy5cblx0ICogQHJldHVybiB7Q29tbWVudHxUZXh0fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUFuY2hvcihjb250ZW50LCBwZXJzaXN0KSB7XG5cdCAgdmFyIGFuY2hvciA9IGNvbmZpZy5kZWJ1ZyA/IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoY29udGVudCkgOiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShwZXJzaXN0ID8gJyAnIDogJycpO1xuXHQgIGFuY2hvci5fX3ZfYW5jaG9yID0gdHJ1ZTtcblx0ICByZXR1cm4gYW5jaG9yO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRmluZCBhIGNvbXBvbmVudCByZWYgYXR0cmlidXRlIHRoYXQgc3RhcnRzIHdpdGggJC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBub2RlXG5cdCAqIEByZXR1cm4ge1N0cmluZ3x1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0dmFyIHJlZlJFID0gL152LXJlZjovO1xuXHRcblx0ZnVuY3Rpb24gZmluZFJlZihub2RlKSB7XG5cdCAgaWYgKG5vZGUuaGFzQXR0cmlidXRlcygpKSB7XG5cdCAgICB2YXIgYXR0cnMgPSBub2RlLmF0dHJpYnV0ZXM7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG5cdCAgICAgIGlmIChyZWZSRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgcmV0dXJuIGNhbWVsaXplKG5hbWUucmVwbGFjZShyZWZSRSwgJycpKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIE1hcCBhIGZ1bmN0aW9uIHRvIGEgcmFuZ2Ugb2Ygbm9kZXMgLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtOb2RlfSBlbmRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gb3Bcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYXBOb2RlUmFuZ2Uobm9kZSwgZW5kLCBvcCkge1xuXHQgIHZhciBuZXh0O1xuXHQgIHdoaWxlIChub2RlICE9PSBlbmQpIHtcblx0ICAgIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuXHQgICAgb3Aobm9kZSk7XG5cdCAgICBub2RlID0gbmV4dDtcblx0ICB9XG5cdCAgb3AoZW5kKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBhIHJhbmdlIG9mIG5vZGVzIHdpdGggdHJhbnNpdGlvbiwgc3RvcmVcblx0ICogdGhlIG5vZGVzIGluIGEgZnJhZ21lbnQgd2l0aCBjb3JyZWN0IG9yZGVyaW5nLFxuXHQgKiBhbmQgY2FsbCBjYWxsYmFjayB3aGVuIGRvbmUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gc3RhcnRcblx0ICogQHBhcmFtIHtOb2RlfSBlbmRcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZU5vZGVSYW5nZShzdGFydCwgZW5kLCB2bSwgZnJhZywgY2IpIHtcblx0ICB2YXIgZG9uZSA9IGZhbHNlO1xuXHQgIHZhciByZW1vdmVkID0gMDtcblx0ICB2YXIgbm9kZXMgPSBbXTtcblx0ICBtYXBOb2RlUmFuZ2Uoc3RhcnQsIGVuZCwgZnVuY3Rpb24gKG5vZGUpIHtcblx0ICAgIGlmIChub2RlID09PSBlbmQpIGRvbmUgPSB0cnVlO1xuXHQgICAgbm9kZXMucHVzaChub2RlKTtcblx0ICAgIHJlbW92ZVdpdGhUcmFuc2l0aW9uKG5vZGUsIHZtLCBvblJlbW92ZWQpO1xuXHQgIH0pO1xuXHQgIGZ1bmN0aW9uIG9uUmVtb3ZlZCgpIHtcblx0ICAgIHJlbW92ZWQrKztcblx0ICAgIGlmIChkb25lICYmIHJlbW92ZWQgPj0gbm9kZXMubGVuZ3RoKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBmcmFnLmFwcGVuZENoaWxkKG5vZGVzW2ldKTtcblx0ICAgICAgfVxuXHQgICAgICBjYiAmJiBjYigpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGEgbm9kZSBpcyBhIERvY3VtZW50RnJhZ21lbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzRnJhZ21lbnQobm9kZSkge1xuXHQgIHJldHVybiBub2RlICYmIG5vZGUubm9kZVR5cGUgPT09IDExO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IG91dGVySFRNTCBvZiBlbGVtZW50cywgdGFraW5nIGNhcmVcblx0ICogb2YgU1ZHIGVsZW1lbnRzIGluIElFIGFzIHdlbGwuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldE91dGVySFRNTChlbCkge1xuXHQgIGlmIChlbC5vdXRlckhUTUwpIHtcblx0ICAgIHJldHVybiBlbC5vdXRlckhUTUw7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChlbC5jbG9uZU5vZGUodHJ1ZSkpO1xuXHQgICAgcmV0dXJuIGNvbnRhaW5lci5pbm5lckhUTUw7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgY29tbW9uVGFnUkUgPSAvXihkaXZ8cHxzcGFufGltZ3xhfGJ8aXxicnx1bHxvbHxsaXxoMXxoMnxoM3xoNHxoNXxoNnxjb2RlfHByZXx0YWJsZXx0aHx0ZHx0cnxmb3JtfGxhYmVsfGlucHV0fHNlbGVjdHxvcHRpb258bmF2fGFydGljbGV8c2VjdGlvbnxoZWFkZXJ8Zm9vdGVyKSQvaTtcblx0dmFyIHJlc2VydmVkVGFnUkUgPSAvXihzbG90fHBhcnRpYWx8Y29tcG9uZW50KSQvaTtcblx0XG5cdHZhciBpc1Vua25vd25FbGVtZW50ID0gdW5kZWZpbmVkO1xuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIGlzVW5rbm93bkVsZW1lbnQgPSBmdW5jdGlvbiAoZWwsIHRhZykge1xuXHQgICAgaWYgKHRhZy5pbmRleE9mKCctJykgPiAtMSkge1xuXHQgICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yODIxMDM2NC8xMDcwMjQ0XG5cdCAgICAgIHJldHVybiBlbC5jb25zdHJ1Y3RvciA9PT0gd2luZG93LkhUTUxVbmtub3duRWxlbWVudCB8fCBlbC5jb25zdHJ1Y3RvciA9PT0gd2luZG93LkhUTUxFbGVtZW50O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICgvSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KGVsLnRvU3RyaW5nKCkpICYmXG5cdCAgICAgICAgLy8gQ2hyb21lIHJldHVybnMgdW5rbm93biBmb3Igc2V2ZXJhbCBIVE1MNSBlbGVtZW50cy5cblx0ICAgICAgICAvLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NTQwNTI2XG5cdCAgICAgICAgLy8gRmlyZWZveCByZXR1cm5zIHVua25vd24gZm9yIHNvbWUgXCJJbnRlcmFjdGl2ZSBlbGVtZW50cy5cIlxuXHQgICAgICAgICEvXihkYXRhfHRpbWV8cnRjfHJifGRldGFpbHN8ZGlhbG9nfHN1bW1hcnkpJC8udGVzdCh0YWcpXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSBjb21wb25lbnQsIGlmIHllcyByZXR1cm4gaXRzXG5cdCAqIGNvbXBvbmVudCBpZC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNoZWNrQ29tcG9uZW50QXR0cihlbCwgb3B0aW9ucykge1xuXHQgIHZhciB0YWcgPSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdCAgdmFyIGhhc0F0dHJzID0gZWwuaGFzQXR0cmlidXRlcygpO1xuXHQgIGlmICghY29tbW9uVGFnUkUudGVzdCh0YWcpICYmICFyZXNlcnZlZFRhZ1JFLnRlc3QodGFnKSkge1xuXHQgICAgaWYgKHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykpIHtcblx0ICAgICAgcmV0dXJuIHsgaWQ6IHRhZyB9O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIGlzID0gaGFzQXR0cnMgJiYgZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKTtcblx0ICAgICAgaWYgKGlzKSB7XG5cdCAgICAgICAgcmV0dXJuIGlzO1xuXHQgICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICB2YXIgZXhwZWN0ZWRUYWcgPSBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwICYmIG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXBbdGFnXTtcblx0ICAgICAgICBpZiAoZXhwZWN0ZWRUYWcpIHtcblx0ICAgICAgICAgIHdhcm4oJ1Vua25vd24gY3VzdG9tIGVsZW1lbnQ6IDwnICsgdGFnICsgJz4gLSAnICsgJ2RpZCB5b3UgbWVhbiA8JyArIGV4cGVjdGVkVGFnICsgJz4/ICcgKyAnSFRNTCBpcyBjYXNlLWluc2Vuc2l0aXZlLCByZW1lbWJlciB0byB1c2Uga2ViYWItY2FzZSBpbiB0ZW1wbGF0ZXMuJyk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChpc1Vua25vd25FbGVtZW50KGVsLCB0YWcpKSB7XG5cdCAgICAgICAgICB3YXJuKCdVbmtub3duIGN1c3RvbSBlbGVtZW50OiA8JyArIHRhZyArICc+IC0gZGlkIHlvdSAnICsgJ3JlZ2lzdGVyIHRoZSBjb21wb25lbnQgY29ycmVjdGx5PyBGb3IgcmVjdXJzaXZlIGNvbXBvbmVudHMsICcgKyAnbWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhlIFwibmFtZVwiIG9wdGlvbi4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGhhc0F0dHJzKSB7XG5cdCAgICByZXR1cm4gZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgXCJpc1wiIGJpbmRpbmcgZnJvbSBhbiBlbGVtZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKSB7XG5cdCAgLy8gZHluYW1pYyBzeW50YXhcblx0ICB2YXIgZXhwID0gZWwuZ2V0QXR0cmlidXRlKCdpcycpO1xuXHQgIGlmIChleHAgIT0gbnVsbCkge1xuXHQgICAgaWYgKHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIGV4cCkpIHtcblx0ICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdpcycpO1xuXHQgICAgICByZXR1cm4geyBpZDogZXhwIH07XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIGV4cCA9IGdldEJpbmRBdHRyKGVsLCAnaXMnKTtcblx0ICAgIGlmIChleHAgIT0gbnVsbCkge1xuXHQgICAgICByZXR1cm4geyBpZDogZXhwLCBkeW5hbWljOiB0cnVlIH07XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogT3B0aW9uIG92ZXJ3cml0aW5nIHN0cmF0ZWdpZXMgYXJlIGZ1bmN0aW9ucyB0aGF0IGhhbmRsZVxuXHQgKiBob3cgdG8gbWVyZ2UgYSBwYXJlbnQgb3B0aW9uIHZhbHVlIGFuZCBhIGNoaWxkIG9wdGlvblxuXHQgKiB2YWx1ZSBpbnRvIHRoZSBmaW5hbCB2YWx1ZS5cblx0ICpcblx0ICogQWxsIHN0cmF0ZWd5IGZ1bmN0aW9ucyBmb2xsb3cgdGhlIHNhbWUgc2lnbmF0dXJlOlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHBhcmVudFZhbFxuXHQgKiBAcGFyYW0geyp9IGNoaWxkVmFsXG5cdCAqIEBwYXJhbSB7VnVlfSBbdm1dXG5cdCAqL1xuXHRcblx0dmFyIHN0cmF0cyA9IGNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRcblx0LyoqXG5cdCAqIEhlbHBlciB0aGF0IHJlY3Vyc2l2ZWx5IG1lcmdlcyB0d28gZGF0YSBvYmplY3RzIHRvZ2V0aGVyLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1lcmdlRGF0YSh0bywgZnJvbSkge1xuXHQgIHZhciBrZXksIHRvVmFsLCBmcm9tVmFsO1xuXHQgIGZvciAoa2V5IGluIGZyb20pIHtcblx0ICAgIHRvVmFsID0gdG9ba2V5XTtcblx0ICAgIGZyb21WYWwgPSBmcm9tW2tleV07XG5cdCAgICBpZiAoIWhhc093bih0bywga2V5KSkge1xuXHQgICAgICBzZXQodG8sIGtleSwgZnJvbVZhbCk7XG5cdCAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHRvVmFsKSAmJiBpc09iamVjdChmcm9tVmFsKSkge1xuXHQgICAgICBtZXJnZURhdGEodG9WYWwsIGZyb21WYWwpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdG87XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEYXRhXG5cdCAqL1xuXHRcblx0c3RyYXRzLmRhdGEgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCwgdm0pIHtcblx0ICBpZiAoIXZtKSB7XG5cdCAgICAvLyBpbiBhIFZ1ZS5leHRlbmQgbWVyZ2UsIGJvdGggc2hvdWxkIGJlIGZ1bmN0aW9uc1xuXHQgICAgaWYgKCFjaGlsZFZhbCkge1xuXHQgICAgICByZXR1cm4gcGFyZW50VmFsO1xuXHQgICAgfVxuXHQgICAgaWYgKHR5cGVvZiBjaGlsZFZhbCAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1RoZSBcImRhdGFcIiBvcHRpb24gc2hvdWxkIGJlIGEgZnVuY3Rpb24gJyArICd0aGF0IHJldHVybnMgYSBwZXItaW5zdGFuY2UgdmFsdWUgaW4gY29tcG9uZW50ICcgKyAnZGVmaW5pdGlvbnMuJywgdm0pO1xuXHQgICAgICByZXR1cm4gcGFyZW50VmFsO1xuXHQgICAgfVxuXHQgICAgaWYgKCFwYXJlbnRWYWwpIHtcblx0ICAgICAgcmV0dXJuIGNoaWxkVmFsO1xuXHQgICAgfVxuXHQgICAgLy8gd2hlbiBwYXJlbnRWYWwgJiBjaGlsZFZhbCBhcmUgYm90aCBwcmVzZW50LFxuXHQgICAgLy8gd2UgbmVlZCB0byByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlXG5cdCAgICAvLyBtZXJnZWQgcmVzdWx0IG9mIGJvdGggZnVuY3Rpb25zLi4uIG5vIG5lZWQgdG9cblx0ICAgIC8vIGNoZWNrIGlmIHBhcmVudFZhbCBpcyBhIGZ1bmN0aW9uIGhlcmUgYmVjYXVzZVxuXHQgICAgLy8gaXQgaGFzIHRvIGJlIGEgZnVuY3Rpb24gdG8gcGFzcyBwcmV2aW91cyBtZXJnZXMuXG5cdCAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkRGF0YUZuKCkge1xuXHQgICAgICByZXR1cm4gbWVyZ2VEYXRhKGNoaWxkVmFsLmNhbGwodGhpcyksIHBhcmVudFZhbC5jYWxsKHRoaXMpKTtcblx0ICAgIH07XG5cdCAgfSBlbHNlIGlmIChwYXJlbnRWYWwgfHwgY2hpbGRWYWwpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWRJbnN0YW5jZURhdGFGbigpIHtcblx0ICAgICAgLy8gaW5zdGFuY2UgbWVyZ2Vcblx0ICAgICAgdmFyIGluc3RhbmNlRGF0YSA9IHR5cGVvZiBjaGlsZFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IGNoaWxkVmFsLmNhbGwodm0pIDogY2hpbGRWYWw7XG5cdCAgICAgIHZhciBkZWZhdWx0RGF0YSA9IHR5cGVvZiBwYXJlbnRWYWwgPT09ICdmdW5jdGlvbicgPyBwYXJlbnRWYWwuY2FsbCh2bSkgOiB1bmRlZmluZWQ7XG5cdCAgICAgIGlmIChpbnN0YW5jZURhdGEpIHtcblx0ICAgICAgICByZXR1cm4gbWVyZ2VEYXRhKGluc3RhbmNlRGF0YSwgZGVmYXVsdERhdGEpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBkZWZhdWx0RGF0YTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogRWxcblx0ICovXG5cdFxuXHRzdHJhdHMuZWwgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCwgdm0pIHtcblx0ICBpZiAoIXZtICYmIGNoaWxkVmFsICYmIHR5cGVvZiBjaGlsZFZhbCAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdUaGUgXCJlbFwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICsgJ3RoYXQgcmV0dXJucyBhIHBlci1pbnN0YW5jZSB2YWx1ZSBpbiBjb21wb25lbnQgJyArICdkZWZpbml0aW9ucy4nLCB2bSk7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciByZXQgPSBjaGlsZFZhbCB8fCBwYXJlbnRWYWw7XG5cdCAgLy8gaW52b2tlIHRoZSBlbGVtZW50IGZhY3RvcnkgaWYgdGhpcyBpcyBpbnN0YW5jZSBtZXJnZVxuXHQgIHJldHVybiB2bSAmJiB0eXBlb2YgcmV0ID09PSAnZnVuY3Rpb24nID8gcmV0LmNhbGwodm0pIDogcmV0O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEhvb2tzIGFuZCBwYXJhbSBhdHRyaWJ1dGVzIGFyZSBtZXJnZWQgYXMgYXJyYXlzLlxuXHQgKi9cblx0XG5cdHN0cmF0cy5pbml0ID0gc3RyYXRzLmNyZWF0ZWQgPSBzdHJhdHMucmVhZHkgPSBzdHJhdHMuYXR0YWNoZWQgPSBzdHJhdHMuZGV0YWNoZWQgPSBzdHJhdHMuYmVmb3JlQ29tcGlsZSA9IHN0cmF0cy5jb21waWxlZCA9IHN0cmF0cy5iZWZvcmVEZXN0cm95ID0gc3RyYXRzLmRlc3Ryb3llZCA9IHN0cmF0cy5hY3RpdmF0ZSA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG5cdCAgcmV0dXJuIGNoaWxkVmFsID8gcGFyZW50VmFsID8gcGFyZW50VmFsLmNvbmNhdChjaGlsZFZhbCkgOiBpc0FycmF5KGNoaWxkVmFsKSA/IGNoaWxkVmFsIDogW2NoaWxkVmFsXSA6IHBhcmVudFZhbDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBc3NldHNcblx0ICpcblx0ICogV2hlbiBhIHZtIGlzIHByZXNlbnQgKGluc3RhbmNlIGNyZWF0aW9uKSwgd2UgbmVlZCB0byBkb1xuXHQgKiBhIHRocmVlLXdheSBtZXJnZSBiZXR3ZWVuIGNvbnN0cnVjdG9yIG9wdGlvbnMsIGluc3RhbmNlXG5cdCAqIG9wdGlvbnMgYW5kIHBhcmVudCBvcHRpb25zLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1lcmdlQXNzZXRzKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcblx0ICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRWYWwgfHwgbnVsbCk7XG5cdCAgcmV0dXJuIGNoaWxkVmFsID8gZXh0ZW5kKHJlcywgZ3VhcmRBcnJheUFzc2V0cyhjaGlsZFZhbCkpIDogcmVzO1xuXHR9XG5cdFxuXHRjb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuXHQgIHN0cmF0c1t0eXBlICsgJ3MnXSA9IG1lcmdlQXNzZXRzO1xuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBFdmVudHMgJiBXYXRjaGVycy5cblx0ICpcblx0ICogRXZlbnRzICYgd2F0Y2hlcnMgaGFzaGVzIHNob3VsZCBub3Qgb3ZlcndyaXRlIG9uZVxuXHQgKiBhbm90aGVyLCBzbyB3ZSBtZXJnZSB0aGVtIGFzIGFycmF5cy5cblx0ICovXG5cdFxuXHRzdHJhdHMud2F0Y2ggPSBzdHJhdHMuZXZlbnRzID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcblx0ICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsO1xuXHQgIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG5cdCAgdmFyIHJldCA9IHt9O1xuXHQgIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG5cdCAgZm9yICh2YXIga2V5IGluIGNoaWxkVmFsKSB7XG5cdCAgICB2YXIgcGFyZW50ID0gcmV0W2tleV07XG5cdCAgICB2YXIgY2hpbGQgPSBjaGlsZFZhbFtrZXldO1xuXHQgICAgaWYgKHBhcmVudCAmJiAhaXNBcnJheShwYXJlbnQpKSB7XG5cdCAgICAgIHBhcmVudCA9IFtwYXJlbnRdO1xuXHQgICAgfVxuXHQgICAgcmV0W2tleV0gPSBwYXJlbnQgPyBwYXJlbnQuY29uY2F0KGNoaWxkKSA6IFtjaGlsZF07XG5cdCAgfVxuXHQgIHJldHVybiByZXQ7XG5cdH07XG5cdFxuXHQvKipcblx0ICogT3RoZXIgb2JqZWN0IGhhc2hlcy5cblx0ICovXG5cdFxuXHRzdHJhdHMucHJvcHMgPSBzdHJhdHMubWV0aG9kcyA9IHN0cmF0cy5jb21wdXRlZCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG5cdCAgaWYgKCFjaGlsZFZhbCkgcmV0dXJuIHBhcmVudFZhbDtcblx0ICBpZiAoIXBhcmVudFZhbCkgcmV0dXJuIGNoaWxkVmFsO1xuXHQgIHZhciByZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG5cdCAgZXh0ZW5kKHJldCwgY2hpbGRWYWwpO1xuXHQgIHJldHVybiByZXQ7XG5cdH07XG5cdFxuXHQvKipcblx0ICogRGVmYXVsdCBzdHJhdGVneS5cblx0ICovXG5cdFxuXHR2YXIgZGVmYXVsdFN0cmF0ID0gZnVuY3Rpb24gZGVmYXVsdFN0cmF0KHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcblx0ICByZXR1cm4gY2hpbGRWYWwgPT09IHVuZGVmaW5lZCA/IHBhcmVudFZhbCA6IGNoaWxkVmFsO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE1ha2Ugc3VyZSBjb21wb25lbnQgb3B0aW9ucyBnZXQgY29udmVydGVkIHRvIGFjdHVhbFxuXHQgKiBjb25zdHJ1Y3RvcnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ3VhcmRDb21wb25lbnRzKG9wdGlvbnMpIHtcblx0ICBpZiAob3B0aW9ucy5jb21wb25lbnRzKSB7XG5cdCAgICB2YXIgY29tcG9uZW50cyA9IG9wdGlvbnMuY29tcG9uZW50cyA9IGd1YXJkQXJyYXlBc3NldHMob3B0aW9ucy5jb21wb25lbnRzKTtcblx0ICAgIHZhciBpZHMgPSBPYmplY3Qua2V5cyhjb21wb25lbnRzKTtcblx0ICAgIHZhciBkZWY7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICB2YXIgbWFwID0gb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcCA9IHt9O1xuXHQgICAgfVxuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBpZHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBrZXkgPSBpZHNbaV07XG5cdCAgICAgIGlmIChjb21tb25UYWdSRS50ZXN0KGtleSkgfHwgcmVzZXJ2ZWRUYWdSRS50ZXN0KGtleSkpIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0RvIG5vdCB1c2UgYnVpbHQtaW4gb3IgcmVzZXJ2ZWQgSFRNTCBlbGVtZW50cyBhcyBjb21wb25lbnQgJyArICdpZDogJyArIGtleSk7XG5cdCAgICAgICAgY29udGludWU7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gcmVjb3JkIGEgYWxsIGxvd2VyY2FzZSA8LT4ga2ViYWItY2FzZSBtYXBwaW5nIGZvclxuXHQgICAgICAvLyBwb3NzaWJsZSBjdXN0b20gZWxlbWVudCBjYXNlIGVycm9yIHdhcm5pbmdcblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICBtYXBba2V5LnJlcGxhY2UoLy0vZywgJycpLnRvTG93ZXJDYXNlKCldID0gaHlwaGVuYXRlKGtleSk7XG5cdCAgICAgIH1cblx0ICAgICAgZGVmID0gY29tcG9uZW50c1trZXldO1xuXHQgICAgICBpZiAoaXNQbGFpbk9iamVjdChkZWYpKSB7XG5cdCAgICAgICAgY29tcG9uZW50c1trZXldID0gVnVlLmV4dGVuZChkZWYpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRW5zdXJlIGFsbCBwcm9wcyBvcHRpb24gc3ludGF4IGFyZSBub3JtYWxpemVkIGludG8gdGhlXG5cdCAqIE9iamVjdC1iYXNlZCBmb3JtYXQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ3VhcmRQcm9wcyhvcHRpb25zKSB7XG5cdCAgdmFyIHByb3BzID0gb3B0aW9ucy5wcm9wcztcblx0ICB2YXIgaSwgdmFsO1xuXHQgIGlmIChpc0FycmF5KHByb3BzKSkge1xuXHQgICAgb3B0aW9ucy5wcm9wcyA9IHt9O1xuXHQgICAgaSA9IHByb3BzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdmFsID0gcHJvcHNbaV07XG5cdCAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgIG9wdGlvbnMucHJvcHNbdmFsXSA9IG51bGw7XG5cdCAgICAgIH0gZWxzZSBpZiAodmFsLm5hbWUpIHtcblx0ICAgICAgICBvcHRpb25zLnByb3BzW3ZhbC5uYW1lXSA9IHZhbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChwcm9wcykpIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcHMpO1xuXHQgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YWwgPSBwcm9wc1trZXlzW2ldXTtcblx0ICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICBwcm9wc1trZXlzW2ldXSA9IHsgdHlwZTogdmFsIH07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHdWFyZCBhbiBBcnJheS1mb3JtYXQgYXNzZXRzIG9wdGlvbiBhbmQgY29udmVydGVkIGl0XG5cdCAqIGludG8gdGhlIGtleS12YWx1ZSBPYmplY3QgZm9ybWF0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gYXNzZXRzXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBndWFyZEFycmF5QXNzZXRzKGFzc2V0cykge1xuXHQgIGlmIChpc0FycmF5KGFzc2V0cykpIHtcblx0ICAgIHZhciByZXMgPSB7fTtcblx0ICAgIHZhciBpID0gYXNzZXRzLmxlbmd0aDtcblx0ICAgIHZhciBhc3NldDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgYXNzZXQgPSBhc3NldHNbaV07XG5cdCAgICAgIHZhciBpZCA9IHR5cGVvZiBhc3NldCA9PT0gJ2Z1bmN0aW9uJyA/IGFzc2V0Lm9wdGlvbnMgJiYgYXNzZXQub3B0aW9ucy5uYW1lIHx8IGFzc2V0LmlkIDogYXNzZXQubmFtZSB8fCBhc3NldC5pZDtcblx0ICAgICAgaWYgKCFpZCkge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQXJyYXktc3ludGF4IGFzc2V0cyBtdXN0IHByb3ZpZGUgYSBcIm5hbWVcIiBvciBcImlkXCIgZmllbGQuJyk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVzW2lkXSA9IGFzc2V0O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzO1xuXHQgIH1cblx0ICByZXR1cm4gYXNzZXRzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTWVyZ2UgdHdvIG9wdGlvbiBvYmplY3RzIGludG8gYSBuZXcgb25lLlxuXHQgKiBDb3JlIHV0aWxpdHkgdXNlZCBpbiBib3RoIGluc3RhbnRpYXRpb24gYW5kIGluaGVyaXRhbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gcGFyZW50XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjaGlsZFxuXHQgKiBAcGFyYW0ge1Z1ZX0gW3ZtXSAtIGlmIHZtIGlzIHByZXNlbnQsIGluZGljYXRlcyB0aGlzIGlzXG5cdCAqICAgICAgICAgICAgICAgICAgICAgYW4gaW5zdGFudGlhdGlvbiBtZXJnZS5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZCwgdm0pIHtcblx0ICBndWFyZENvbXBvbmVudHMoY2hpbGQpO1xuXHQgIGd1YXJkUHJvcHMoY2hpbGQpO1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBpZiAoY2hpbGQucHJvcHNEYXRhICYmICF2bSkge1xuXHQgICAgICB3YXJuKCdwcm9wc0RhdGEgY2FuIG9ubHkgYmUgdXNlZCBhcyBhbiBpbnN0YW50aWF0aW9uIG9wdGlvbi4nKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgdmFyIG9wdGlvbnMgPSB7fTtcblx0ICB2YXIga2V5O1xuXHQgIGlmIChjaGlsZFsnZXh0ZW5kcyddKSB7XG5cdCAgICBwYXJlbnQgPSB0eXBlb2YgY2hpbGRbJ2V4dGVuZHMnXSA9PT0gJ2Z1bmN0aW9uJyA/IG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkWydleHRlbmRzJ10ub3B0aW9ucywgdm0pIDogbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGRbJ2V4dGVuZHMnXSwgdm0pO1xuXHQgIH1cblx0ICBpZiAoY2hpbGQubWl4aW5zKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkLm1peGlucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIG1peGluID0gY2hpbGQubWl4aW5zW2ldO1xuXHQgICAgICB2YXIgbWl4aW5PcHRpb25zID0gbWl4aW4ucHJvdG90eXBlIGluc3RhbmNlb2YgVnVlID8gbWl4aW4ub3B0aW9ucyA6IG1peGluO1xuXHQgICAgICBwYXJlbnQgPSBtZXJnZU9wdGlvbnMocGFyZW50LCBtaXhpbk9wdGlvbnMsIHZtKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgZm9yIChrZXkgaW4gcGFyZW50KSB7XG5cdCAgICBtZXJnZUZpZWxkKGtleSk7XG5cdCAgfVxuXHQgIGZvciAoa2V5IGluIGNoaWxkKSB7XG5cdCAgICBpZiAoIWhhc093bihwYXJlbnQsIGtleSkpIHtcblx0ICAgICAgbWVyZ2VGaWVsZChrZXkpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmdW5jdGlvbiBtZXJnZUZpZWxkKGtleSkge1xuXHQgICAgdmFyIHN0cmF0ID0gc3RyYXRzW2tleV0gfHwgZGVmYXVsdFN0cmF0O1xuXHQgICAgb3B0aW9uc1trZXldID0gc3RyYXQocGFyZW50W2tleV0sIGNoaWxkW2tleV0sIHZtLCBrZXkpO1xuXHQgIH1cblx0ICByZXR1cm4gb3B0aW9ucztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlc29sdmUgYW4gYXNzZXQuXG5cdCAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBiZWNhdXNlIGNoaWxkIGluc3RhbmNlcyBuZWVkIGFjY2Vzc1xuXHQgKiB0byBhc3NldHMgZGVmaW5lZCBpbiBpdHMgYW5jZXN0b3IgY2hhaW4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHdhcm5NaXNzaW5nXG5cdCAqIEByZXR1cm4ge09iamVjdHxGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXNvbHZlQXNzZXQob3B0aW9ucywgdHlwZSwgaWQsIHdhcm5NaXNzaW5nKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKHR5cGVvZiBpZCAhPT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIGFzc2V0cyA9IG9wdGlvbnNbdHlwZV07XG5cdCAgdmFyIGNhbWVsaXplZElkO1xuXHQgIHZhciByZXMgPSBhc3NldHNbaWRdIHx8XG5cdCAgLy8gY2FtZWxDYXNlIElEXG5cdCAgYXNzZXRzW2NhbWVsaXplZElkID0gY2FtZWxpemUoaWQpXSB8fFxuXHQgIC8vIFBhc2NhbCBDYXNlIElEXG5cdCAgYXNzZXRzW2NhbWVsaXplZElkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWxpemVkSWQuc2xpY2UoMSldO1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm5NaXNzaW5nICYmICFyZXMpIHtcblx0ICAgIHdhcm4oJ0ZhaWxlZCB0byByZXNvbHZlICcgKyB0eXBlLnNsaWNlKDAsIC0xKSArICc6ICcgKyBpZCwgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdHZhciB1aWQkMSA9IDA7XG5cdFxuXHQvKipcblx0ICogQSBkZXAgaXMgYW4gb2JzZXJ2YWJsZSB0aGF0IGNhbiBoYXZlIG11bHRpcGxlXG5cdCAqIGRpcmVjdGl2ZXMgc3Vic2NyaWJpbmcgdG8gaXQuXG5cdCAqXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0ZnVuY3Rpb24gRGVwKCkge1xuXHQgIHRoaXMuaWQgPSB1aWQkMSsrO1xuXHQgIHRoaXMuc3VicyA9IFtdO1xuXHR9XG5cdFxuXHQvLyB0aGUgY3VycmVudCB0YXJnZXQgd2F0Y2hlciBiZWluZyBldmFsdWF0ZWQuXG5cdC8vIHRoaXMgaXMgZ2xvYmFsbHkgdW5pcXVlIGJlY2F1c2UgdGhlcmUgY291bGQgYmUgb25seSBvbmVcblx0Ly8gd2F0Y2hlciBiZWluZyBldmFsdWF0ZWQgYXQgYW55IHRpbWUuXG5cdERlcC50YXJnZXQgPSBudWxsO1xuXHRcblx0LyoqXG5cdCAqIEFkZCBhIGRpcmVjdGl2ZSBzdWJzY3JpYmVyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gc3ViXG5cdCAqL1xuXHRcblx0RGVwLnByb3RvdHlwZS5hZGRTdWIgPSBmdW5jdGlvbiAoc3ViKSB7XG5cdCAgdGhpcy5zdWJzLnB1c2goc3ViKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgYSBkaXJlY3RpdmUgc3Vic2NyaWJlci5cblx0ICpcblx0ICogQHBhcmFtIHtEaXJlY3RpdmV9IHN1YlxuXHQgKi9cblx0XG5cdERlcC5wcm90b3R5cGUucmVtb3ZlU3ViID0gZnVuY3Rpb24gKHN1Yikge1xuXHQgIHRoaXMuc3Vicy4kcmVtb3ZlKHN1Yik7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQWRkIHNlbGYgYXMgYSBkZXBlbmRlbmN5IHRvIHRoZSB0YXJnZXQgd2F0Y2hlci5cblx0ICovXG5cdFxuXHREZXAucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uICgpIHtcblx0ICBEZXAudGFyZ2V0LmFkZERlcCh0aGlzKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBOb3RpZnkgYWxsIHN1YnNjcmliZXJzIG9mIGEgbmV3IHZhbHVlLlxuXHQgKi9cblx0XG5cdERlcC5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gKCkge1xuXHQgIC8vIHN0YWJsaXplIHRoZSBzdWJzY3JpYmVyIGxpc3QgZmlyc3Rcblx0ICB2YXIgc3VicyA9IHRvQXJyYXkodGhpcy5zdWJzKTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IHN1YnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBzdWJzW2ldLnVwZGF0ZSgpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xuXHR2YXIgYXJyYXlNZXRob2RzID0gT2JqZWN0LmNyZWF0ZShhcnJheVByb3RvKVxuXHRcblx0LyoqXG5cdCAqIEludGVyY2VwdCBtdXRhdGluZyBtZXRob2RzIGFuZCBlbWl0IGV2ZW50c1xuXHQgKi9cblx0XG5cdDtbJ3B1c2gnLCAncG9wJywgJ3NoaWZ0JywgJ3Vuc2hpZnQnLCAnc3BsaWNlJywgJ3NvcnQnLCAncmV2ZXJzZSddLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkge1xuXHQgIC8vIGNhY2hlIG9yaWdpbmFsIG1ldGhvZFxuXHQgIHZhciBvcmlnaW5hbCA9IGFycmF5UHJvdG9bbWV0aG9kXTtcblx0ICBkZWYoYXJyYXlNZXRob2RzLCBtZXRob2QsIGZ1bmN0aW9uIG11dGF0b3IoKSB7XG5cdCAgICAvLyBhdm9pZCBsZWFraW5nIGFyZ3VtZW50czpcblx0ICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL2Nsb3N1cmUtd2l0aC1hcmd1bWVudHNcblx0ICAgIHZhciBpID0gYXJndW1lbnRzLmxlbmd0aDtcblx0ICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGkpO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuXHQgICAgfVxuXHQgICAgdmFyIHJlc3VsdCA9IG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgdmFyIG9iID0gdGhpcy5fX29iX187XG5cdCAgICB2YXIgaW5zZXJ0ZWQ7XG5cdCAgICBzd2l0Y2ggKG1ldGhvZCkge1xuXHQgICAgICBjYXNlICdwdXNoJzpcblx0ICAgICAgICBpbnNlcnRlZCA9IGFyZ3M7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ3Vuc2hpZnQnOlxuXHQgICAgICAgIGluc2VydGVkID0gYXJncztcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAnc3BsaWNlJzpcblx0ICAgICAgICBpbnNlcnRlZCA9IGFyZ3Muc2xpY2UoMik7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdCAgICBpZiAoaW5zZXJ0ZWQpIG9iLm9ic2VydmVBcnJheShpbnNlcnRlZCk7XG5cdCAgICAvLyBub3RpZnkgY2hhbmdlXG5cdCAgICBvYi5kZXAubm90aWZ5KCk7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH0pO1xuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBTd2FwIHRoZSBlbGVtZW50IGF0IHRoZSBnaXZlbiBpbmRleCB3aXRoIGEgbmV3IHZhbHVlXG5cdCAqIGFuZCBlbWl0cyBjb3JyZXNwb25kaW5nIGV2ZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICogQHJldHVybiB7Kn0gLSByZXBsYWNlZCBlbGVtZW50XG5cdCAqL1xuXHRcblx0ZGVmKGFycmF5UHJvdG8sICckc2V0JywgZnVuY3Rpb24gJHNldChpbmRleCwgdmFsKSB7XG5cdCAgaWYgKGluZGV4ID49IHRoaXMubGVuZ3RoKSB7XG5cdCAgICB0aGlzLmxlbmd0aCA9IE51bWJlcihpbmRleCkgKyAxO1xuXHQgIH1cblx0ICByZXR1cm4gdGhpcy5zcGxpY2UoaW5kZXgsIDEsIHZhbClbMF07XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlbmllbmNlIG1ldGhvZCB0byByZW1vdmUgdGhlIGVsZW1lbnQgYXQgZ2l2ZW4gaW5kZXggb3IgdGFyZ2V0IGVsZW1lbnQgcmVmZXJlbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IGl0ZW1cblx0ICovXG5cdFxuXHRkZWYoYXJyYXlQcm90bywgJyRyZW1vdmUnLCBmdW5jdGlvbiAkcmVtb3ZlKGl0ZW0pIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoIXRoaXMubGVuZ3RoKSByZXR1cm47XG5cdCAgdmFyIGluZGV4ID0gaW5kZXhPZih0aGlzLCBpdGVtKTtcblx0ICBpZiAoaW5kZXggPiAtMSkge1xuXHQgICAgcmV0dXJuIHRoaXMuc3BsaWNlKGluZGV4LCAxKTtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIGFycmF5S2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGFycmF5TWV0aG9kcyk7XG5cdFxuXHQvKipcblx0ICogQnkgZGVmYXVsdCwgd2hlbiBhIHJlYWN0aXZlIHByb3BlcnR5IGlzIHNldCwgdGhlIG5ldyB2YWx1ZSBpc1xuXHQgKiBhbHNvIGNvbnZlcnRlZCB0byBiZWNvbWUgcmVhY3RpdmUuIEhvd2V2ZXIgaW4gY2VydGFpbiBjYXNlcywgZS5nLlxuXHQgKiB2LWZvciBzY29wZSBhbGlhcyBhbmQgcHJvcHMsIHdlIGRvbid0IHdhbnQgdG8gZm9yY2UgY29udmVyc2lvblxuXHQgKiBiZWNhdXNlIHRoZSB2YWx1ZSBtYXkgYmUgYSBuZXN0ZWQgdmFsdWUgdW5kZXIgYSBmcm96ZW4gZGF0YSBzdHJ1Y3R1cmUuXG5cdCAqXG5cdCAqIFNvIHdoZW5ldmVyIHdlIHdhbnQgdG8gc2V0IGEgcmVhY3RpdmUgcHJvcGVydHkgd2l0aG91dCBmb3JjaW5nXG5cdCAqIGNvbnZlcnNpb24gb24gdGhlIG5ldyB2YWx1ZSwgd2Ugd3JhcCB0aGF0IGNhbGwgaW5zaWRlIHRoaXMgZnVuY3Rpb24uXG5cdCAqL1xuXHRcblx0dmFyIHNob3VsZENvbnZlcnQgPSB0cnVlO1xuXHRcblx0ZnVuY3Rpb24gd2l0aG91dENvbnZlcnNpb24oZm4pIHtcblx0ICBzaG91bGRDb252ZXJ0ID0gZmFsc2U7XG5cdCAgZm4oKTtcblx0ICBzaG91bGRDb252ZXJ0ID0gdHJ1ZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIE9ic2VydmVyIGNsYXNzIHRoYXQgYXJlIGF0dGFjaGVkIHRvIGVhY2ggb2JzZXJ2ZWRcblx0ICogb2JqZWN0LiBPbmNlIGF0dGFjaGVkLCB0aGUgb2JzZXJ2ZXIgY29udmVydHMgdGFyZ2V0XG5cdCAqIG9iamVjdCdzIHByb3BlcnR5IGtleXMgaW50byBnZXR0ZXIvc2V0dGVycyB0aGF0XG5cdCAqIGNvbGxlY3QgZGVwZW5kZW5jaWVzIGFuZCBkaXNwYXRjaGVzIHVwZGF0ZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSB2YWx1ZVxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBPYnNlcnZlcih2YWx1ZSkge1xuXHQgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICB0aGlzLmRlcCA9IG5ldyBEZXAoKTtcblx0ICBkZWYodmFsdWUsICdfX29iX18nLCB0aGlzKTtcblx0ICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgIHZhciBhdWdtZW50ID0gaGFzUHJvdG8gPyBwcm90b0F1Z21lbnQgOiBjb3B5QXVnbWVudDtcblx0ICAgIGF1Z21lbnQodmFsdWUsIGFycmF5TWV0aG9kcywgYXJyYXlLZXlzKTtcblx0ICAgIHRoaXMub2JzZXJ2ZUFycmF5KHZhbHVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhpcy53YWxrKHZhbHVlKTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIEluc3RhbmNlIG1ldGhvZHNcblx0XG5cdC8qKlxuXHQgKiBXYWxrIHRocm91Z2ggZWFjaCBwcm9wZXJ0eSBhbmQgY29udmVydCB0aGVtIGludG9cblx0ICogZ2V0dGVyL3NldHRlcnMuIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCB3aGVuXG5cdCAqIHZhbHVlIHR5cGUgaXMgT2JqZWN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqL1xuXHRcblx0T2JzZXJ2ZXIucHJvdG90eXBlLndhbGsgPSBmdW5jdGlvbiAob2JqKSB7XG5cdCAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHRoaXMuY29udmVydChrZXlzW2ldLCBvYmpba2V5c1tpXV0pO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBPYnNlcnZlIGEgbGlzdCBvZiBBcnJheSBpdGVtcy5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gaXRlbXNcblx0ICovXG5cdFxuXHRPYnNlcnZlci5wcm90b3R5cGUub2JzZXJ2ZUFycmF5ID0gZnVuY3Rpb24gKGl0ZW1zKSB7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBpdGVtcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIG9ic2VydmUoaXRlbXNbaV0pO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IGEgcHJvcGVydHkgaW50byBnZXR0ZXIvc2V0dGVyIHNvIHdlIGNhbiBlbWl0XG5cdCAqIHRoZSBldmVudHMgd2hlbiB0aGUgcHJvcGVydHkgaXMgYWNjZXNzZWQvY2hhbmdlZC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKi9cblx0XG5cdE9ic2VydmVyLnByb3RvdHlwZS5jb252ZXJ0ID0gZnVuY3Rpb24gKGtleSwgdmFsKSB7XG5cdCAgZGVmaW5lUmVhY3RpdmUodGhpcy52YWx1ZSwga2V5LCB2YWwpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEFkZCBhbiBvd25lciB2bSwgc28gdGhhdCB3aGVuICRzZXQvJGRlbGV0ZSBtdXRhdGlvbnNcblx0ICogaGFwcGVuIHdlIGNhbiBub3RpZnkgb3duZXIgdm1zIHRvIHByb3h5IHRoZSBrZXlzIGFuZFxuXHQgKiBkaWdlc3QgdGhlIHdhdGNoZXJzLiBUaGlzIGlzIG9ubHkgY2FsbGVkIHdoZW4gdGhlIG9iamVjdFxuXHQgKiBpcyBvYnNlcnZlZCBhcyBhbiBpbnN0YW5jZSdzIHJvb3QgJGRhdGEuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0XG5cdE9ic2VydmVyLnByb3RvdHlwZS5hZGRWbSA9IGZ1bmN0aW9uICh2bSkge1xuXHQgICh0aGlzLnZtcyB8fCAodGhpcy52bXMgPSBbXSkpLnB1c2godm0pO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBhbiBvd25lciB2bS4gVGhpcyBpcyBjYWxsZWQgd2hlbiB0aGUgb2JqZWN0IGlzXG5cdCAqIHN3YXBwZWQgb3V0IGFzIGFuIGluc3RhbmNlJ3MgJGRhdGEgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICovXG5cdFxuXHRPYnNlcnZlci5wcm90b3R5cGUucmVtb3ZlVm0gPSBmdW5jdGlvbiAodm0pIHtcblx0ICB0aGlzLnZtcy4kcmVtb3ZlKHZtKTtcblx0fTtcblx0XG5cdC8vIGhlbHBlcnNcblx0XG5cdC8qKlxuXHQgKiBBdWdtZW50IGFuIHRhcmdldCBPYmplY3Qgb3IgQXJyYXkgYnkgaW50ZXJjZXB0aW5nXG5cdCAqIHRoZSBwcm90b3R5cGUgY2hhaW4gdXNpbmcgX19wcm90b19fXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSB0YXJnZXRcblx0ICogQHBhcmFtIHtPYmplY3R9IHNyY1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByb3RvQXVnbWVudCh0YXJnZXQsIHNyYykge1xuXHQgIC8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cdCAgdGFyZ2V0Ll9fcHJvdG9fXyA9IHNyYztcblx0ICAvKiBlc2xpbnQtZW5hYmxlIG5vLXByb3RvICovXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBdWdtZW50IGFuIHRhcmdldCBPYmplY3Qgb3IgQXJyYXkgYnkgZGVmaW5pbmdcblx0ICogaGlkZGVuIHByb3BlcnRpZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSB0YXJnZXRcblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3RvXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29weUF1Z21lbnQodGFyZ2V0LCBzcmMsIGtleXMpIHtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICB2YXIga2V5ID0ga2V5c1tpXTtcblx0ICAgIGRlZih0YXJnZXQsIGtleSwgc3JjW2tleV0pO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEF0dGVtcHQgdG8gY3JlYXRlIGFuIG9ic2VydmVyIGluc3RhbmNlIGZvciBhIHZhbHVlLFxuXHQgKiByZXR1cm5zIHRoZSBuZXcgb2JzZXJ2ZXIgaWYgc3VjY2Vzc2Z1bGx5IG9ic2VydmVkLFxuXHQgKiBvciB0aGUgZXhpc3Rpbmcgb2JzZXJ2ZXIgaWYgdGhlIHZhbHVlIGFscmVhZHkgaGFzIG9uZS5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuXHQgKiBAcmV0dXJuIHtPYnNlcnZlcnx1bmRlZmluZWR9XG5cdCAqIEBzdGF0aWNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBvYnNlcnZlKHZhbHVlLCB2bSkge1xuXHQgIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0Jykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgb2I7XG5cdCAgaWYgKGhhc093bih2YWx1ZSwgJ19fb2JfXycpICYmIHZhbHVlLl9fb2JfXyBpbnN0YW5jZW9mIE9ic2VydmVyKSB7XG5cdCAgICBvYiA9IHZhbHVlLl9fb2JfXztcblx0ICB9IGVsc2UgaWYgKHNob3VsZENvbnZlcnQgJiYgKGlzQXJyYXkodmFsdWUpIHx8IGlzUGxhaW5PYmplY3QodmFsdWUpKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSAmJiAhdmFsdWUuX2lzVnVlKSB7XG5cdCAgICBvYiA9IG5ldyBPYnNlcnZlcih2YWx1ZSk7XG5cdCAgfVxuXHQgIGlmIChvYiAmJiB2bSkge1xuXHQgICAgb2IuYWRkVm0odm0pO1xuXHQgIH1cblx0ICByZXR1cm4gb2I7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZWZpbmUgYSByZWFjdGl2ZSBwcm9wZXJ0eSBvbiBhbiBPYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGRlZmluZVJlYWN0aXZlKG9iaiwga2V5LCB2YWwpIHtcblx0ICB2YXIgZGVwID0gbmV3IERlcCgpO1xuXHRcblx0ICB2YXIgcHJvcGVydHkgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KTtcblx0ICBpZiAocHJvcGVydHkgJiYgcHJvcGVydHkuY29uZmlndXJhYmxlID09PSBmYWxzZSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0XG5cdCAgLy8gY2F0ZXIgZm9yIHByZS1kZWZpbmVkIGdldHRlci9zZXR0ZXJzXG5cdCAgdmFyIGdldHRlciA9IHByb3BlcnR5ICYmIHByb3BlcnR5LmdldDtcblx0ICB2YXIgc2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuc2V0O1xuXHRcblx0ICB2YXIgY2hpbGRPYiA9IG9ic2VydmUodmFsKTtcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcblx0ICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlR2V0dGVyKCkge1xuXHQgICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogdmFsO1xuXHQgICAgICBpZiAoRGVwLnRhcmdldCkge1xuXHQgICAgICAgIGRlcC5kZXBlbmQoKTtcblx0ICAgICAgICBpZiAoY2hpbGRPYikge1xuXHQgICAgICAgICAgY2hpbGRPYi5kZXAuZGVwZW5kKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgICAgICAgZm9yICh2YXIgZSwgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICAgICAgZSA9IHZhbHVlW2ldO1xuXHQgICAgICAgICAgICBlICYmIGUuX19vYl9fICYmIGUuX19vYl9fLmRlcC5kZXBlbmQoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHZhbHVlO1xuXHQgICAgfSxcblx0ICAgIHNldDogZnVuY3Rpb24gcmVhY3RpdmVTZXR0ZXIobmV3VmFsKSB7XG5cdCAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7XG5cdCAgICAgIGlmIChuZXdWYWwgPT09IHZhbHVlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChzZXR0ZXIpIHtcblx0ICAgICAgICBzZXR0ZXIuY2FsbChvYmosIG5ld1ZhbCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdmFsID0gbmV3VmFsO1xuXHQgICAgICB9XG5cdCAgICAgIGNoaWxkT2IgPSBvYnNlcnZlKG5ld1ZhbCk7XG5cdCAgICAgIGRlcC5ub3RpZnkoKTtcblx0ICAgIH1cblx0ICB9KTtcblx0fVxuXHRcblx0XG5cdFxuXHR2YXIgdXRpbCA9IE9iamVjdC5mcmVlemUoe1xuXHRcdGRlZmluZVJlYWN0aXZlOiBkZWZpbmVSZWFjdGl2ZSxcblx0XHRzZXQ6IHNldCxcblx0XHRkZWw6IGRlbCxcblx0XHRoYXNPd246IGhhc093bixcblx0XHRpc0xpdGVyYWw6IGlzTGl0ZXJhbCxcblx0XHRpc1Jlc2VydmVkOiBpc1Jlc2VydmVkLFxuXHRcdF90b1N0cmluZzogX3RvU3RyaW5nLFxuXHRcdHRvTnVtYmVyOiB0b051bWJlcixcblx0XHR0b0Jvb2xlYW46IHRvQm9vbGVhbixcblx0XHRzdHJpcFF1b3Rlczogc3RyaXBRdW90ZXMsXG5cdFx0Y2FtZWxpemU6IGNhbWVsaXplLFxuXHRcdGh5cGhlbmF0ZTogaHlwaGVuYXRlLFxuXHRcdGNsYXNzaWZ5OiBjbGFzc2lmeSxcblx0XHRiaW5kOiBiaW5kLFxuXHRcdHRvQXJyYXk6IHRvQXJyYXksXG5cdFx0ZXh0ZW5kOiBleHRlbmQsXG5cdFx0aXNPYmplY3Q6IGlzT2JqZWN0LFxuXHRcdGlzUGxhaW5PYmplY3Q6IGlzUGxhaW5PYmplY3QsXG5cdFx0ZGVmOiBkZWYsXG5cdFx0ZGVib3VuY2U6IF9kZWJvdW5jZSxcblx0XHRpbmRleE9mOiBpbmRleE9mLFxuXHRcdGNhbmNlbGxhYmxlOiBjYW5jZWxsYWJsZSxcblx0XHRsb29zZUVxdWFsOiBsb29zZUVxdWFsLFxuXHRcdGlzQXJyYXk6IGlzQXJyYXksXG5cdFx0aGFzUHJvdG86IGhhc1Byb3RvLFxuXHRcdGluQnJvd3NlcjogaW5Ccm93c2VyLFxuXHRcdGRldnRvb2xzOiBkZXZ0b29scyxcblx0XHRpc0lFOiBpc0lFLFxuXHRcdGlzSUU5OiBpc0lFOSxcblx0XHRpc0FuZHJvaWQ6IGlzQW5kcm9pZCxcblx0XHRpc0lvczogaXNJb3MsXG5cdFx0aW9zVmVyc2lvbk1hdGNoOiBpb3NWZXJzaW9uTWF0Y2gsXG5cdFx0aW9zVmVyc2lvbjogaW9zVmVyc2lvbixcblx0XHRoYXNNdXRhdGlvbk9ic2VydmVyQnVnOiBoYXNNdXRhdGlvbk9ic2VydmVyQnVnLFxuXHRcdGdldCB0cmFuc2l0aW9uUHJvcCAoKSB7IHJldHVybiB0cmFuc2l0aW9uUHJvcDsgfSxcblx0XHRnZXQgdHJhbnNpdGlvbkVuZEV2ZW50ICgpIHsgcmV0dXJuIHRyYW5zaXRpb25FbmRFdmVudDsgfSxcblx0XHRnZXQgYW5pbWF0aW9uUHJvcCAoKSB7IHJldHVybiBhbmltYXRpb25Qcm9wOyB9LFxuXHRcdGdldCBhbmltYXRpb25FbmRFdmVudCAoKSB7IHJldHVybiBhbmltYXRpb25FbmRFdmVudDsgfSxcblx0XHRuZXh0VGljazogbmV4dFRpY2ssXG5cdFx0Z2V0IF9TZXQgKCkgeyByZXR1cm4gX1NldDsgfSxcblx0XHRxdWVyeTogcXVlcnksXG5cdFx0aW5Eb2M6IGluRG9jLFxuXHRcdGdldEF0dHI6IGdldEF0dHIsXG5cdFx0Z2V0QmluZEF0dHI6IGdldEJpbmRBdHRyLFxuXHRcdGhhc0JpbmRBdHRyOiBoYXNCaW5kQXR0cixcblx0XHRiZWZvcmU6IGJlZm9yZSxcblx0XHRhZnRlcjogYWZ0ZXIsXG5cdFx0cmVtb3ZlOiByZW1vdmUsXG5cdFx0cHJlcGVuZDogcHJlcGVuZCxcblx0XHRyZXBsYWNlOiByZXBsYWNlLFxuXHRcdG9uOiBvbixcblx0XHRvZmY6IG9mZixcblx0XHRzZXRDbGFzczogc2V0Q2xhc3MsXG5cdFx0YWRkQ2xhc3M6IGFkZENsYXNzLFxuXHRcdHJlbW92ZUNsYXNzOiByZW1vdmVDbGFzcyxcblx0XHRleHRyYWN0Q29udGVudDogZXh0cmFjdENvbnRlbnQsXG5cdFx0dHJpbU5vZGU6IHRyaW1Ob2RlLFxuXHRcdGlzVGVtcGxhdGU6IGlzVGVtcGxhdGUsXG5cdFx0Y3JlYXRlQW5jaG9yOiBjcmVhdGVBbmNob3IsXG5cdFx0ZmluZFJlZjogZmluZFJlZixcblx0XHRtYXBOb2RlUmFuZ2U6IG1hcE5vZGVSYW5nZSxcblx0XHRyZW1vdmVOb2RlUmFuZ2U6IHJlbW92ZU5vZGVSYW5nZSxcblx0XHRpc0ZyYWdtZW50OiBpc0ZyYWdtZW50LFxuXHRcdGdldE91dGVySFRNTDogZ2V0T3V0ZXJIVE1MLFxuXHRcdG1lcmdlT3B0aW9uczogbWVyZ2VPcHRpb25zLFxuXHRcdHJlc29sdmVBc3NldDogcmVzb2x2ZUFzc2V0LFxuXHRcdGNoZWNrQ29tcG9uZW50QXR0cjogY2hlY2tDb21wb25lbnRBdHRyLFxuXHRcdGNvbW1vblRhZ1JFOiBjb21tb25UYWdSRSxcblx0XHRyZXNlcnZlZFRhZ1JFOiByZXNlcnZlZFRhZ1JFLFxuXHRcdGdldCB3YXJuICgpIHsgcmV0dXJuIHdhcm47IH1cblx0fSk7XG5cdFxuXHR2YXIgdWlkID0gMDtcblx0XG5cdGZ1bmN0aW9uIGluaXRNaXhpbiAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogVGhlIG1haW4gaW5pdCBzZXF1ZW5jZS4gVGhpcyBpcyBjYWxsZWQgZm9yIGV2ZXJ5XG5cdCAgICogaW5zdGFuY2UsIGluY2x1ZGluZyBvbmVzIHRoYXQgYXJlIGNyZWF0ZWQgZnJvbSBleHRlbmRlZFxuXHQgICAqIGNvbnN0cnVjdG9ycy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gdGhpcyBvcHRpb25zIG9iamVjdCBzaG91bGQgYmVcblx0ICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSByZXN1bHQgb2YgbWVyZ2luZyBjbGFzc1xuXHQgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyBhbmQgdGhlIG9wdGlvbnMgcGFzc2VkXG5cdCAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBpbiB0byB0aGUgY29uc3RydWN0b3IuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuXHQgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFxuXHQgICAgdGhpcy4kZWwgPSBudWxsO1xuXHQgICAgdGhpcy4kcGFyZW50ID0gb3B0aW9ucy5wYXJlbnQ7XG5cdCAgICB0aGlzLiRyb290ID0gdGhpcy4kcGFyZW50ID8gdGhpcy4kcGFyZW50LiRyb290IDogdGhpcztcblx0ICAgIHRoaXMuJGNoaWxkcmVuID0gW107XG5cdCAgICB0aGlzLiRyZWZzID0ge307IC8vIGNoaWxkIHZtIHJlZmVyZW5jZXNcblx0ICAgIHRoaXMuJGVscyA9IHt9OyAvLyBlbGVtZW50IHJlZmVyZW5jZXNcblx0ICAgIHRoaXMuX3dhdGNoZXJzID0gW107IC8vIGFsbCB3YXRjaGVycyBhcyBhbiBhcnJheVxuXHQgICAgdGhpcy5fZGlyZWN0aXZlcyA9IFtdOyAvLyBhbGwgZGlyZWN0aXZlc1xuXHRcblx0ICAgIC8vIGEgdWlkXG5cdCAgICB0aGlzLl91aWQgPSB1aWQrKztcblx0XG5cdCAgICAvLyBhIGZsYWcgdG8gYXZvaWQgdGhpcyBiZWluZyBvYnNlcnZlZFxuXHQgICAgdGhpcy5faXNWdWUgPSB0cnVlO1xuXHRcblx0ICAgIC8vIGV2ZW50cyBib29ra2VlcGluZ1xuXHQgICAgdGhpcy5fZXZlbnRzID0ge307IC8vIHJlZ2lzdGVyZWQgY2FsbGJhY2tzXG5cdCAgICB0aGlzLl9ldmVudHNDb3VudCA9IHt9OyAvLyBmb3IgJGJyb2FkY2FzdCBvcHRpbWl6YXRpb25cblx0XG5cdCAgICAvLyBmcmFnbWVudCBpbnN0YW5jZSBwcm9wZXJ0aWVzXG5cdCAgICB0aGlzLl9pc0ZyYWdtZW50ID0gZmFsc2U7XG5cdCAgICB0aGlzLl9mcmFnbWVudCA9IC8vIEB0eXBlIHtEb2N1bWVudEZyYWdtZW50fVxuXHQgICAgdGhpcy5fZnJhZ21lbnRTdGFydCA9IC8vIEB0eXBlIHtUZXh0fENvbW1lbnR9XG5cdCAgICB0aGlzLl9mcmFnbWVudEVuZCA9IG51bGw7IC8vIEB0eXBlIHtUZXh0fENvbW1lbnR9XG5cdFxuXHQgICAgLy8gbGlmZWN5Y2xlIHN0YXRlXG5cdCAgICB0aGlzLl9pc0NvbXBpbGVkID0gdGhpcy5faXNEZXN0cm95ZWQgPSB0aGlzLl9pc1JlYWR5ID0gdGhpcy5faXNBdHRhY2hlZCA9IHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgPSB0aGlzLl92Rm9yUmVtb3ZpbmcgPSBmYWxzZTtcblx0ICAgIHRoaXMuX3VubGlua0ZuID0gbnVsbDtcblx0XG5cdCAgICAvLyBjb250ZXh0OlxuXHQgICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgY29udGV4dFxuXHQgICAgLy8gd2lsbCBiZSB0aGUgY29tbW9uIHBhcmVudCB2bSBvZiB0aGlzIGluc3RhbmNlXG5cdCAgICAvLyBhbmQgaXRzIGhvc3QuXG5cdCAgICB0aGlzLl9jb250ZXh0ID0gb3B0aW9ucy5fY29udGV4dCB8fCB0aGlzLiRwYXJlbnQ7XG5cdFxuXHQgICAgLy8gc2NvcGU6XG5cdCAgICAvLyBpZiB0aGlzIGlzIGluc2lkZSBhbiBpbmxpbmUgdi1mb3IsIHRoZSBzY29wZVxuXHQgICAgLy8gd2lsbCBiZSB0aGUgaW50ZXJtZWRpYXRlIHNjb3BlIGNyZWF0ZWQgZm9yIHRoaXNcblx0ICAgIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXG5cdCAgICAvLyBhbmQgY29udGFpbmVyIGRpcmVjdGl2ZXMuXG5cdCAgICB0aGlzLl9zY29wZSA9IG9wdGlvbnMuX3Njb3BlO1xuXHRcblx0ICAgIC8vIGZyYWdtZW50OlxuXHQgICAgLy8gaWYgdGhpcyBpbnN0YW5jZSBpcyBjb21waWxlZCBpbnNpZGUgYSBGcmFnbWVudCwgaXRcblx0ICAgIC8vIG5lZWRzIHRvIHJlaWdzdGVyIGl0c2VsZiBhcyBhIGNoaWxkIG9mIHRoYXQgZnJhZ21lbnRcblx0ICAgIC8vIGZvciBhdHRhY2gvZGV0YWNoIHRvIHdvcmsgcHJvcGVybHkuXG5cdCAgICB0aGlzLl9mcmFnID0gb3B0aW9ucy5fZnJhZztcblx0ICAgIGlmICh0aGlzLl9mcmFnKSB7XG5cdCAgICAgIHRoaXMuX2ZyYWcuY2hpbGRyZW4ucHVzaCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBwdXNoIHNlbGYgaW50byBwYXJlbnQgLyB0cmFuc2NsdXNpb24gaG9zdFxuXHQgICAgaWYgKHRoaXMuJHBhcmVudCkge1xuXHQgICAgICB0aGlzLiRwYXJlbnQuJGNoaWxkcmVuLnB1c2godGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gbWVyZ2Ugb3B0aW9ucy5cblx0ICAgIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zID0gbWVyZ2VPcHRpb25zKHRoaXMuY29uc3RydWN0b3Iub3B0aW9ucywgb3B0aW9ucywgdGhpcyk7XG5cdFxuXHQgICAgLy8gc2V0IHJlZlxuXHQgICAgdGhpcy5fdXBkYXRlUmVmKCk7XG5cdFxuXHQgICAgLy8gaW5pdGlhbGl6ZSBkYXRhIGFzIGVtcHR5IG9iamVjdC5cblx0ICAgIC8vIGl0IHdpbGwgYmUgZmlsbGVkIHVwIGluIF9pbml0RGF0YSgpLlxuXHQgICAgdGhpcy5fZGF0YSA9IHt9O1xuXHRcblx0ICAgIC8vIGNhbGwgaW5pdCBob29rXG5cdCAgICB0aGlzLl9jYWxsSG9vaygnaW5pdCcpO1xuXHRcblx0ICAgIC8vIGluaXRpYWxpemUgZGF0YSBvYnNlcnZhdGlvbiBhbmQgc2NvcGUgaW5oZXJpdGFuY2UuXG5cdCAgICB0aGlzLl9pbml0U3RhdGUoKTtcblx0XG5cdCAgICAvLyBzZXR1cCBldmVudCBzeXN0ZW0gYW5kIG9wdGlvbiBldmVudHMuXG5cdCAgICB0aGlzLl9pbml0RXZlbnRzKCk7XG5cdFxuXHQgICAgLy8gY2FsbCBjcmVhdGVkIGhvb2tcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdjcmVhdGVkJyk7XG5cdFxuXHQgICAgLy8gaWYgYGVsYCBvcHRpb24gaXMgcGFzc2VkLCBzdGFydCBjb21waWxhdGlvbi5cblx0ICAgIGlmIChvcHRpb25zLmVsKSB7XG5cdCAgICAgIHRoaXMuJG1vdW50KG9wdGlvbnMuZWwpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdHZhciBwYXRoQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cdFxuXHQvLyBhY3Rpb25zXG5cdHZhciBBUFBFTkQgPSAwO1xuXHR2YXIgUFVTSCA9IDE7XG5cdHZhciBJTkNfU1VCX1BBVEhfREVQVEggPSAyO1xuXHR2YXIgUFVTSF9TVUJfUEFUSCA9IDM7XG5cdFxuXHQvLyBzdGF0ZXNcblx0dmFyIEJFRk9SRV9QQVRIID0gMDtcblx0dmFyIElOX1BBVEggPSAxO1xuXHR2YXIgQkVGT1JFX0lERU5UID0gMjtcblx0dmFyIElOX0lERU5UID0gMztcblx0dmFyIElOX1NVQl9QQVRIID0gNDtcblx0dmFyIElOX1NJTkdMRV9RVU9URSA9IDU7XG5cdHZhciBJTl9ET1VCTEVfUVVPVEUgPSA2O1xuXHR2YXIgQUZURVJfUEFUSCA9IDc7XG5cdHZhciBFUlJPUiA9IDg7XG5cdFxuXHR2YXIgcGF0aFN0YXRlTWFjaGluZSA9IFtdO1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtCRUZPUkVfUEFUSF0gPSB7XG5cdCAgJ3dzJzogW0JFRk9SRV9QQVRIXSxcblx0ICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sXG5cdCAgJ1snOiBbSU5fU1VCX1BBVEhdLFxuXHQgICdlb2YnOiBbQUZURVJfUEFUSF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbSU5fUEFUSF0gPSB7XG5cdCAgJ3dzJzogW0lOX1BBVEhdLFxuXHQgICcuJzogW0JFRk9SRV9JREVOVF0sXG5cdCAgJ1snOiBbSU5fU1VCX1BBVEhdLFxuXHQgICdlb2YnOiBbQUZURVJfUEFUSF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbQkVGT1JFX0lERU5UXSA9IHtcblx0ICAnd3MnOiBbQkVGT1JFX0lERU5UXSxcblx0ICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbSU5fSURFTlRdID0ge1xuXHQgICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcblx0ICAnMCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcblx0ICAnbnVtYmVyJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuXHQgICd3cyc6IFtJTl9QQVRILCBQVVNIXSxcblx0ICAnLic6IFtCRUZPUkVfSURFTlQsIFBVU0hdLFxuXHQgICdbJzogW0lOX1NVQl9QQVRILCBQVVNIXSxcblx0ICAnZW9mJzogW0FGVEVSX1BBVEgsIFBVU0hdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0lOX1NVQl9QQVRIXSA9IHtcblx0ICBcIidcIjogW0lOX1NJTkdMRV9RVU9URSwgQVBQRU5EXSxcblx0ICAnXCInOiBbSU5fRE9VQkxFX1FVT1RFLCBBUFBFTkRdLFxuXHQgICdbJzogW0lOX1NVQl9QQVRILCBJTkNfU1VCX1BBVEhfREVQVEhdLFxuXHQgICddJzogW0lOX1BBVEgsIFBVU0hfU1VCX1BBVEhdLFxuXHQgICdlb2YnOiBFUlJPUixcblx0ICAnZWxzZSc6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtJTl9TSU5HTEVfUVVPVEVdID0ge1xuXHQgIFwiJ1wiOiBbSU5fU1VCX1BBVEgsIEFQUEVORF0sXG5cdCAgJ2VvZic6IEVSUk9SLFxuXHQgICdlbHNlJzogW0lOX1NJTkdMRV9RVU9URSwgQVBQRU5EXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtJTl9ET1VCTEVfUVVPVEVdID0ge1xuXHQgICdcIic6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXSxcblx0ICAnZW9mJzogRVJST1IsXG5cdCAgJ2Vsc2UnOiBbSU5fRE9VQkxFX1FVT1RFLCBBUFBFTkRdXG5cdH07XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIHRoZSB0eXBlIG9mIGEgY2hhcmFjdGVyIGluIGEga2V5cGF0aC5cblx0ICpcblx0ICogQHBhcmFtIHtDaGFyfSBjaFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9IHR5cGVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRQYXRoQ2hhclR5cGUoY2gpIHtcblx0ICBpZiAoY2ggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICdlb2YnO1xuXHQgIH1cblx0XG5cdCAgdmFyIGNvZGUgPSBjaC5jaGFyQ29kZUF0KDApO1xuXHRcblx0ICBzd2l0Y2ggKGNvZGUpIHtcblx0ICAgIGNhc2UgMHg1QjogLy8gW1xuXHQgICAgY2FzZSAweDVEOiAvLyBdXG5cdCAgICBjYXNlIDB4MkU6IC8vIC5cblx0ICAgIGNhc2UgMHgyMjogLy8gXCJcblx0ICAgIGNhc2UgMHgyNzogLy8gJ1xuXHQgICAgY2FzZSAweDMwOlxuXHQgICAgICAvLyAwXG5cdCAgICAgIHJldHVybiBjaDtcblx0XG5cdCAgICBjYXNlIDB4NUY6IC8vIF9cblx0ICAgIGNhc2UgMHgyNDpcblx0ICAgICAgLy8gJFxuXHQgICAgICByZXR1cm4gJ2lkZW50Jztcblx0XG5cdCAgICBjYXNlIDB4MjA6IC8vIFNwYWNlXG5cdCAgICBjYXNlIDB4MDk6IC8vIFRhYlxuXHQgICAgY2FzZSAweDBBOiAvLyBOZXdsaW5lXG5cdCAgICBjYXNlIDB4MEQ6IC8vIFJldHVyblxuXHQgICAgY2FzZSAweEEwOiAvLyBOby1icmVhayBzcGFjZVxuXHQgICAgY2FzZSAweEZFRkY6IC8vIEJ5dGUgT3JkZXIgTWFya1xuXHQgICAgY2FzZSAweDIwMjg6IC8vIExpbmUgU2VwYXJhdG9yXG5cdCAgICBjYXNlIDB4MjAyOTpcblx0ICAgICAgLy8gUGFyYWdyYXBoIFNlcGFyYXRvclxuXHQgICAgICByZXR1cm4gJ3dzJztcblx0ICB9XG5cdFxuXHQgIC8vIGEteiwgQS1aXG5cdCAgaWYgKGNvZGUgPj0gMHg2MSAmJiBjb2RlIDw9IDB4N0EgfHwgY29kZSA+PSAweDQxICYmIGNvZGUgPD0gMHg1QSkge1xuXHQgICAgcmV0dXJuICdpZGVudCc7XG5cdCAgfVxuXHRcblx0ICAvLyAxLTlcblx0ICBpZiAoY29kZSA+PSAweDMxICYmIGNvZGUgPD0gMHgzOSkge1xuXHQgICAgcmV0dXJuICdudW1iZXInO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuICdlbHNlJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcm1hdCBhIHN1YlBhdGgsIHJldHVybiBpdHMgcGxhaW4gZm9ybSBpZiBpdCBpc1xuXHQgKiBhIGxpdGVyYWwgc3RyaW5nIG9yIG51bWJlci4gT3RoZXJ3aXNlIHByZXBlbmQgdGhlXG5cdCAqIGR5bmFtaWMgaW5kaWNhdG9yICgqKS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFN1YlBhdGgocGF0aCkge1xuXHQgIHZhciB0cmltbWVkID0gcGF0aC50cmltKCk7XG5cdCAgLy8gaW52YWxpZCBsZWFkaW5nIDBcblx0ICBpZiAocGF0aC5jaGFyQXQoMCkgPT09ICcwJyAmJiBpc05hTihwYXRoKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICByZXR1cm4gaXNMaXRlcmFsKHRyaW1tZWQpID8gc3RyaXBRdW90ZXModHJpbW1lZCkgOiAnKicgKyB0cmltbWVkO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2UgYSBzdHJpbmcgcGF0aCBpbnRvIGFuIGFycmF5IG9mIHNlZ21lbnRzXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAqIEByZXR1cm4ge0FycmF5fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZShwYXRoKSB7XG5cdCAgdmFyIGtleXMgPSBbXTtcblx0ICB2YXIgaW5kZXggPSAtMTtcblx0ICB2YXIgbW9kZSA9IEJFRk9SRV9QQVRIO1xuXHQgIHZhciBzdWJQYXRoRGVwdGggPSAwO1xuXHQgIHZhciBjLCBuZXdDaGFyLCBrZXksIHR5cGUsIHRyYW5zaXRpb24sIGFjdGlvbiwgdHlwZU1hcDtcblx0XG5cdCAgdmFyIGFjdGlvbnMgPSBbXTtcblx0XG5cdCAgYWN0aW9uc1tQVVNIXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBrZXlzLnB1c2goa2V5KTtcblx0ICAgICAga2V5ID0gdW5kZWZpbmVkO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGFjdGlvbnNbQVBQRU5EXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBrZXkgPSBuZXdDaGFyO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAga2V5ICs9IG5ld0NoYXI7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgYWN0aW9uc1tJTkNfU1VCX1BBVEhfREVQVEhdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgYWN0aW9uc1tBUFBFTkRdKCk7XG5cdCAgICBzdWJQYXRoRGVwdGgrKztcblx0ICB9O1xuXHRcblx0ICBhY3Rpb25zW1BVU0hfU1VCX1BBVEhdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKHN1YlBhdGhEZXB0aCA+IDApIHtcblx0ICAgICAgc3ViUGF0aERlcHRoLS07XG5cdCAgICAgIG1vZGUgPSBJTl9TVUJfUEFUSDtcblx0ICAgICAgYWN0aW9uc1tBUFBFTkRdKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzdWJQYXRoRGVwdGggPSAwO1xuXHQgICAgICBrZXkgPSBmb3JtYXRTdWJQYXRoKGtleSk7XG5cdCAgICAgIGlmIChrZXkgPT09IGZhbHNlKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGFjdGlvbnNbUFVTSF0oKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIG1heWJlVW5lc2NhcGVRdW90ZSgpIHtcblx0ICAgIHZhciBuZXh0Q2hhciA9IHBhdGhbaW5kZXggKyAxXTtcblx0ICAgIGlmIChtb2RlID09PSBJTl9TSU5HTEVfUVVPVEUgJiYgbmV4dENoYXIgPT09IFwiJ1wiIHx8IG1vZGUgPT09IElOX0RPVUJMRV9RVU9URSAmJiBuZXh0Q2hhciA9PT0gJ1wiJykge1xuXHQgICAgICBpbmRleCsrO1xuXHQgICAgICBuZXdDaGFyID0gJ1xcXFwnICsgbmV4dENoYXI7XG5cdCAgICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHdoaWxlIChtb2RlICE9IG51bGwpIHtcblx0ICAgIGluZGV4Kys7XG5cdCAgICBjID0gcGF0aFtpbmRleF07XG5cdFxuXHQgICAgaWYgKGMgPT09ICdcXFxcJyAmJiBtYXliZVVuZXNjYXBlUXVvdGUoKSkge1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0XG5cdCAgICB0eXBlID0gZ2V0UGF0aENoYXJUeXBlKGMpO1xuXHQgICAgdHlwZU1hcCA9IHBhdGhTdGF0ZU1hY2hpbmVbbW9kZV07XG5cdCAgICB0cmFuc2l0aW9uID0gdHlwZU1hcFt0eXBlXSB8fCB0eXBlTWFwWydlbHNlJ10gfHwgRVJST1I7XG5cdFxuXHQgICAgaWYgKHRyYW5zaXRpb24gPT09IEVSUk9SKSB7XG5cdCAgICAgIHJldHVybjsgLy8gcGFyc2UgZXJyb3Jcblx0ICAgIH1cblx0XG5cdCAgICBtb2RlID0gdHJhbnNpdGlvblswXTtcblx0ICAgIGFjdGlvbiA9IGFjdGlvbnNbdHJhbnNpdGlvblsxXV07XG5cdCAgICBpZiAoYWN0aW9uKSB7XG5cdCAgICAgIG5ld0NoYXIgPSB0cmFuc2l0aW9uWzJdO1xuXHQgICAgICBuZXdDaGFyID0gbmV3Q2hhciA9PT0gdW5kZWZpbmVkID8gYyA6IG5ld0NoYXI7XG5cdCAgICAgIGlmIChhY3Rpb24oKSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAobW9kZSA9PT0gQUZURVJfUEFUSCkge1xuXHQgICAgICBrZXlzLnJhdyA9IHBhdGg7XG5cdCAgICAgIHJldHVybiBrZXlzO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEV4dGVybmFsIHBhcnNlIHRoYXQgY2hlY2sgZm9yIGEgY2FjaGUgaGl0IGZpcnN0XG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAqIEByZXR1cm4ge0FycmF5fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZVBhdGgocGF0aCkge1xuXHQgIHZhciBoaXQgPSBwYXRoQ2FjaGUuZ2V0KHBhdGgpO1xuXHQgIGlmICghaGl0KSB7XG5cdCAgICBoaXQgPSBwYXJzZShwYXRoKTtcblx0ICAgIGlmIChoaXQpIHtcblx0ICAgICAgcGF0aENhY2hlLnB1dChwYXRoLCBoaXQpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gaGl0O1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IGZyb20gYW4gb2JqZWN0IGZyb20gYSBwYXRoIHN0cmluZ1xuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0UGF0aChvYmosIHBhdGgpIHtcblx0ICByZXR1cm4gcGFyc2VFeHByZXNzaW9uKHBhdGgpLmdldChvYmopO1xuXHR9XG5cdFxuXHQvKipcblx0ICogV2FybiBhZ2FpbnN0IHNldHRpbmcgbm9uLWV4aXN0ZW50IHJvb3QgcGF0aCBvbiBhIHZtLlxuXHQgKi9cblx0XG5cdHZhciB3YXJuTm9uRXhpc3RlbnQ7XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgd2Fybk5vbkV4aXN0ZW50ID0gZnVuY3Rpb24gKHBhdGgsIHZtKSB7XG5cdCAgICB3YXJuKCdZb3UgYXJlIHNldHRpbmcgYSBub24tZXhpc3RlbnQgcGF0aCBcIicgKyBwYXRoLnJhdyArICdcIiAnICsgJ29uIGEgdm0gaW5zdGFuY2UuIENvbnNpZGVyIHByZS1pbml0aWFsaXppbmcgdGhlIHByb3BlcnR5ICcgKyAnd2l0aCB0aGUgXCJkYXRhXCIgb3B0aW9uIGZvciBtb3JlIHJlbGlhYmxlIHJlYWN0aXZpdHkgJyArICdhbmQgYmV0dGVyIHBlcmZvcm1hbmNlLicsIHZtKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogU2V0IG9uIGFuIG9iamVjdCBmcm9tIGEgcGF0aFxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nIHwgQXJyYXl9IHBhdGhcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzZXRQYXRoKG9iaiwgcGF0aCwgdmFsKSB7XG5cdCAgdmFyIG9yaWdpbmFsID0gb2JqO1xuXHQgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcblx0ICAgIHBhdGggPSBwYXJzZShwYXRoKTtcblx0ICB9XG5cdCAgaWYgKCFwYXRoIHx8ICFpc09iamVjdChvYmopKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciBsYXN0LCBrZXk7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBwYXRoLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgbGFzdCA9IG9iajtcblx0ICAgIGtleSA9IHBhdGhbaV07XG5cdCAgICBpZiAoa2V5LmNoYXJBdCgwKSA9PT0gJyonKSB7XG5cdCAgICAgIGtleSA9IHBhcnNlRXhwcmVzc2lvbihrZXkuc2xpY2UoMSkpLmdldC5jYWxsKG9yaWdpbmFsLCBvcmlnaW5hbCk7XG5cdCAgICB9XG5cdCAgICBpZiAoaSA8IGwgLSAxKSB7XG5cdCAgICAgIG9iaiA9IG9ialtrZXldO1xuXHQgICAgICBpZiAoIWlzT2JqZWN0KG9iaikpIHtcblx0ICAgICAgICBvYmogPSB7fTtcblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBsYXN0Ll9pc1Z1ZSkge1xuXHQgICAgICAgICAgd2Fybk5vbkV4aXN0ZW50KHBhdGgsIGxhc3QpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzZXQobGFzdCwga2V5LCBvYmopO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAoaXNBcnJheShvYmopKSB7XG5cdCAgICAgICAgb2JqLiRzZXQoa2V5LCB2YWwpO1xuXHQgICAgICB9IGVsc2UgaWYgKGtleSBpbiBvYmopIHtcblx0ICAgICAgICBvYmpba2V5XSA9IHZhbDtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBvYmouX2lzVnVlKSB7XG5cdCAgICAgICAgICB3YXJuTm9uRXhpc3RlbnQocGF0aCwgb2JqKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc2V0KG9iaiwga2V5LCB2YWwpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlO1xuXHR9XG5cdFxuXHR2YXIgcGF0aCA9IE9iamVjdC5mcmVlemUoe1xuXHQgIHBhcnNlUGF0aDogcGFyc2VQYXRoLFxuXHQgIGdldFBhdGg6IGdldFBhdGgsXG5cdCAgc2V0UGF0aDogc2V0UGF0aFxuXHR9KTtcblx0XG5cdHZhciBleHByZXNzaW9uQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cdFxuXHR2YXIgYWxsb3dlZEtleXdvcmRzID0gJ01hdGgsRGF0ZSx0aGlzLHRydWUsZmFsc2UsbnVsbCx1bmRlZmluZWQsSW5maW5pdHksTmFOLCcgKyAnaXNOYU4saXNGaW5pdGUsZGVjb2RlVVJJLGRlY29kZVVSSUNvbXBvbmVudCxlbmNvZGVVUkksJyArICdlbmNvZGVVUklDb21wb25lbnQscGFyc2VJbnQscGFyc2VGbG9hdCc7XG5cdHZhciBhbGxvd2VkS2V5d29yZHNSRSA9IG5ldyBSZWdFeHAoJ14oJyArIGFsbG93ZWRLZXl3b3Jkcy5yZXBsYWNlKC8sL2csICdcXFxcYnwnKSArICdcXFxcYiknKTtcblx0XG5cdC8vIGtleXdvcmRzIHRoYXQgZG9uJ3QgbWFrZSBzZW5zZSBpbnNpZGUgZXhwcmVzc2lvbnNcblx0dmFyIGltcHJvcGVyS2V5d29yZHMgPSAnYnJlYWssY2FzZSxjbGFzcyxjYXRjaCxjb25zdCxjb250aW51ZSxkZWJ1Z2dlcixkZWZhdWx0LCcgKyAnZGVsZXRlLGRvLGVsc2UsZXhwb3J0LGV4dGVuZHMsZmluYWxseSxmb3IsZnVuY3Rpb24saWYsJyArICdpbXBvcnQsaW4saW5zdGFuY2VvZixsZXQscmV0dXJuLHN1cGVyLHN3aXRjaCx0aHJvdyx0cnksJyArICd2YXIsd2hpbGUsd2l0aCx5aWVsZCxlbnVtLGF3YWl0LGltcGxlbWVudHMscGFja2FnZSwnICsgJ3Byb3RlY3RlZCxzdGF0aWMsaW50ZXJmYWNlLHByaXZhdGUscHVibGljJztcblx0dmFyIGltcHJvcGVyS2V5d29yZHNSRSA9IG5ldyBSZWdFeHAoJ14oJyArIGltcHJvcGVyS2V5d29yZHMucmVwbGFjZSgvLC9nLCAnXFxcXGJ8JykgKyAnXFxcXGIpJyk7XG5cdFxuXHR2YXIgd3NSRSA9IC9cXHMvZztcblx0dmFyIG5ld2xpbmVSRSA9IC9cXG4vZztcblx0dmFyIHNhdmVSRSA9IC9bXFx7LF1cXHMqW1xcd1xcJF9dK1xccyo6fCgnKD86W14nXFxcXF18XFxcXC4pKid8XCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifGAoPzpbXmBcXFxcXXxcXFxcLikqXFwkXFx7fFxcfSg/OlteYFxcXFxdfFxcXFwuKSpgfGAoPzpbXmBcXFxcXXxcXFxcLikqYCl8bmV3IHx0eXBlb2YgfHZvaWQgL2c7XG5cdHZhciByZXN0b3JlUkUgPSAvXCIoXFxkKylcIi9nO1xuXHR2YXIgcGF0aFRlc3RSRSA9IC9eW0EtWmEtel8kXVtcXHckXSooPzpcXC5bQS1aYS16XyRdW1xcdyRdKnxcXFsnLio/J1xcXXxcXFtcIi4qP1wiXFxdfFxcW1xcZCtcXF18XFxbW0EtWmEtel8kXVtcXHckXSpcXF0pKiQvO1xuXHR2YXIgaWRlbnRSRSA9IC9bXlxcdyRcXC5dKD86W0EtWmEtel8kXVtcXHckXSopL2c7XG5cdHZhciBsaXRlcmFsVmFsdWVSRSQxID0gL14oPzp0cnVlfGZhbHNlfG51bGx8dW5kZWZpbmVkfEluZmluaXR5fE5hTikkLztcblx0XG5cdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHRcblx0LyoqXG5cdCAqIFNhdmUgLyBSZXdyaXRlIC8gUmVzdG9yZVxuXHQgKlxuXHQgKiBXaGVuIHJld3JpdGluZyBwYXRocyBmb3VuZCBpbiBhbiBleHByZXNzaW9uLCBpdCBpc1xuXHQgKiBwb3NzaWJsZSBmb3IgdGhlIHNhbWUgbGV0dGVyIHNlcXVlbmNlcyB0byBiZSBmb3VuZCBpblxuXHQgKiBzdHJpbmdzIGFuZCBPYmplY3QgbGl0ZXJhbCBwcm9wZXJ0eSBrZXlzLiBUaGVyZWZvcmUgd2Vcblx0ICogcmVtb3ZlIGFuZCBzdG9yZSB0aGVzZSBwYXJ0cyBpbiBhIHRlbXBvcmFyeSBhcnJheSwgYW5kXG5cdCAqIHJlc3RvcmUgdGhlbSBhZnRlciB0aGUgcGF0aCByZXdyaXRlLlxuXHQgKi9cblx0XG5cdHZhciBzYXZlZCA9IFtdO1xuXHRcblx0LyoqXG5cdCAqIFNhdmUgcmVwbGFjZXJcblx0ICpcblx0ICogVGhlIHNhdmUgcmVnZXggY2FuIG1hdGNoIHR3byBwb3NzaWJsZSBjYXNlczpcblx0ICogMS4gQW4gb3BlbmluZyBvYmplY3QgbGl0ZXJhbFxuXHQgKiAyLiBBIHN0cmluZ1xuXHQgKiBJZiBtYXRjaGVkIGFzIGEgcGxhaW4gc3RyaW5nLCB3ZSBuZWVkIHRvIGVzY2FwZSBpdHNcblx0ICogbmV3bGluZXMsIHNpbmNlIHRoZSBzdHJpbmcgbmVlZHMgdG8gYmUgcHJlc2VydmVkIHdoZW5cblx0ICogZ2VuZXJhdGluZyB0aGUgZnVuY3Rpb24gYm9keS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaXNTdHJpbmcgLSBzdHIgaWYgbWF0Y2hlZCBhcyBhIHN0cmluZ1xuXHQgKiBAcmV0dXJuIHtTdHJpbmd9IC0gcGxhY2Vob2xkZXIgd2l0aCBpbmRleFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHNhdmUoc3RyLCBpc1N0cmluZykge1xuXHQgIHZhciBpID0gc2F2ZWQubGVuZ3RoO1xuXHQgIHNhdmVkW2ldID0gaXNTdHJpbmcgPyBzdHIucmVwbGFjZShuZXdsaW5lUkUsICdcXFxcbicpIDogc3RyO1xuXHQgIHJldHVybiAnXCInICsgaSArICdcIic7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXRoIHJld3JpdGUgcmVwbGFjZXJcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHJhd1xuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmV3cml0ZShyYXcpIHtcblx0ICB2YXIgYyA9IHJhdy5jaGFyQXQoMCk7XG5cdCAgdmFyIHBhdGggPSByYXcuc2xpY2UoMSk7XG5cdCAgaWYgKGFsbG93ZWRLZXl3b3Jkc1JFLnRlc3QocGF0aCkpIHtcblx0ICAgIHJldHVybiByYXc7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHBhdGggPSBwYXRoLmluZGV4T2YoJ1wiJykgPiAtMSA/IHBhdGgucmVwbGFjZShyZXN0b3JlUkUsIHJlc3RvcmUpIDogcGF0aDtcblx0ICAgIHJldHVybiBjICsgJ3Njb3BlLicgKyBwYXRoO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlc3RvcmUgcmVwbGFjZXJcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaSAtIG1hdGNoZWQgc2F2ZSBpbmRleFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVzdG9yZShzdHIsIGkpIHtcblx0ICByZXR1cm4gc2F2ZWRbaV07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZXdyaXRlIGFuIGV4cHJlc3Npb24sIHByZWZpeGluZyBhbGwgcGF0aCBhY2Nlc3NvcnMgd2l0aFxuXHQgKiBgc2NvcGUuYCBhbmQgZ2VuZXJhdGUgZ2V0dGVyL3NldHRlciBmdW5jdGlvbnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZUdldHRlcihleHApIHtcblx0ICBpZiAoaW1wcm9wZXJLZXl3b3Jkc1JFLnRlc3QoZXhwKSkge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdBdm9pZCB1c2luZyByZXNlcnZlZCBrZXl3b3JkcyBpbiBleHByZXNzaW9uOiAnICsgZXhwKTtcblx0ICB9XG5cdCAgLy8gcmVzZXQgc3RhdGVcblx0ICBzYXZlZC5sZW5ndGggPSAwO1xuXHQgIC8vIHNhdmUgc3RyaW5ncyBhbmQgb2JqZWN0IGxpdGVyYWwga2V5c1xuXHQgIHZhciBib2R5ID0gZXhwLnJlcGxhY2Uoc2F2ZVJFLCBzYXZlKS5yZXBsYWNlKHdzUkUsICcnKTtcblx0ICAvLyByZXdyaXRlIGFsbCBwYXRoc1xuXHQgIC8vIHBhZCAxIHNwYWNlIGhlcmUgYmVjYXVzZSB0aGUgcmVnZXggbWF0Y2hlcyAxIGV4dHJhIGNoYXJcblx0ICBib2R5ID0gKCcgJyArIGJvZHkpLnJlcGxhY2UoaWRlbnRSRSwgcmV3cml0ZSkucmVwbGFjZShyZXN0b3JlUkUsIHJlc3RvcmUpO1xuXHQgIHJldHVybiBtYWtlR2V0dGVyRm4oYm9keSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBCdWlsZCBhIGdldHRlciBmdW5jdGlvbi4gUmVxdWlyZXMgZXZhbC5cblx0ICpcblx0ICogV2UgaXNvbGF0ZSB0aGUgdHJ5L2NhdGNoIHNvIGl0IGRvZXNuJ3QgYWZmZWN0IHRoZVxuXHQgKiBvcHRpbWl6YXRpb24gb2YgdGhlIHBhcnNlIGZ1bmN0aW9uIHdoZW4gaXQgaXMgbm90IGNhbGxlZC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGJvZHlcblx0ICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VHZXR0ZXJGbihib2R5KSB7XG5cdCAgdHJ5IHtcblx0ICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jICovXG5cdCAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdzY29wZScsICdyZXR1cm4gJyArIGJvZHkgKyAnOycpO1xuXHQgICAgLyogZXNsaW50LWVuYWJsZSBuby1uZXctZnVuYyAqL1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoZS50b1N0cmluZygpLm1hdGNoKC91bnNhZmUtZXZhbHxDU1AvKSkge1xuXHQgICAgICAgIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgdGhlIGRlZmF1bHQgYnVpbGQgb2YgVnVlLmpzIGluIGFuIGVudmlyb25tZW50ICcgKyAnd2l0aCBDb250ZW50IFNlY3VyaXR5IFBvbGljeSB0aGF0IHByb2hpYml0cyB1bnNhZmUtZXZhbC4gJyArICdVc2UgdGhlIENTUC1jb21wbGlhbnQgYnVpbGQgaW5zdGVhZDogJyArICdodHRwOi8vdnVlanMub3JnL2d1aWRlL2luc3RhbGxhdGlvbi5odG1sI0NTUC1jb21wbGlhbnQtYnVpbGQnKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB3YXJuKCdJbnZhbGlkIGV4cHJlc3Npb24uICcgKyAnR2VuZXJhdGVkIGZ1bmN0aW9uIGJvZHk6ICcgKyBib2R5KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5vb3A7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBhIHNldHRlciBmdW5jdGlvbiBmb3IgdGhlIGV4cHJlc3Npb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVTZXR0ZXIoZXhwKSB7XG5cdCAgdmFyIHBhdGggPSBwYXJzZVBhdGgoZXhwKTtcblx0ICBpZiAocGF0aCkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgdmFsKSB7XG5cdCAgICAgIHNldFBhdGgoc2NvcGUsIHBhdGgsIHZhbCk7XG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgc2V0dGVyIGV4cHJlc3Npb246ICcgKyBleHApO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhcnNlIGFuIGV4cHJlc3Npb24gaW50byByZS13cml0dGVuIGdldHRlci9zZXR0ZXJzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gbmVlZFNldFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZUV4cHJlc3Npb24oZXhwLCBuZWVkU2V0KSB7XG5cdCAgZXhwID0gZXhwLnRyaW0oKTtcblx0ICAvLyB0cnkgY2FjaGVcblx0ICB2YXIgaGl0ID0gZXhwcmVzc2lvbkNhY2hlLmdldChleHApO1xuXHQgIGlmIChoaXQpIHtcblx0ICAgIGlmIChuZWVkU2V0ICYmICFoaXQuc2V0KSB7XG5cdCAgICAgIGhpdC5zZXQgPSBjb21waWxlU2V0dGVyKGhpdC5leHApO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGhpdDtcblx0ICB9XG5cdCAgdmFyIHJlcyA9IHsgZXhwOiBleHAgfTtcblx0ICByZXMuZ2V0ID0gaXNTaW1wbGVQYXRoKGV4cCkgJiYgZXhwLmluZGV4T2YoJ1snKSA8IDBcblx0ICAvLyBvcHRpbWl6ZWQgc3VwZXIgc2ltcGxlIGdldHRlclxuXHQgID8gbWFrZUdldHRlckZuKCdzY29wZS4nICsgZXhwKVxuXHQgIC8vIGR5bmFtaWMgZ2V0dGVyXG5cdCAgOiBjb21waWxlR2V0dGVyKGV4cCk7XG5cdCAgaWYgKG5lZWRTZXQpIHtcblx0ICAgIHJlcy5zZXQgPSBjb21waWxlU2V0dGVyKGV4cCk7XG5cdCAgfVxuXHQgIGV4cHJlc3Npb25DYWNoZS5wdXQoZXhwLCByZXMpO1xuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBleHByZXNzaW9uIGlzIGEgc2ltcGxlIHBhdGguXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc1NpbXBsZVBhdGgoZXhwKSB7XG5cdCAgcmV0dXJuIHBhdGhUZXN0UkUudGVzdChleHApICYmXG5cdCAgLy8gZG9uJ3QgdHJlYXQgbGl0ZXJhbCB2YWx1ZXMgYXMgcGF0aHNcblx0ICAhbGl0ZXJhbFZhbHVlUkUkMS50ZXN0KGV4cCkgJiZcblx0ICAvLyBNYXRoIGNvbnN0YW50cyBlLmcuIE1hdGguUEksIE1hdGguRSBldGMuXG5cdCAgZXhwLnNsaWNlKDAsIDUpICE9PSAnTWF0aC4nO1xuXHR9XG5cdFxuXHR2YXIgZXhwcmVzc2lvbiA9IE9iamVjdC5mcmVlemUoe1xuXHQgIHBhcnNlRXhwcmVzc2lvbjogcGFyc2VFeHByZXNzaW9uLFxuXHQgIGlzU2ltcGxlUGF0aDogaXNTaW1wbGVQYXRoXG5cdH0pO1xuXHRcblx0Ly8gd2UgaGF2ZSB0d28gc2VwYXJhdGUgcXVldWVzOiBvbmUgZm9yIGRpcmVjdGl2ZSB1cGRhdGVzXG5cdC8vIGFuZCBvbmUgZm9yIHVzZXIgd2F0Y2hlciByZWdpc3RlcmVkIHZpYSAkd2F0Y2goKS5cblx0Ly8gd2Ugd2FudCB0byBndWFyYW50ZWUgZGlyZWN0aXZlIHVwZGF0ZXMgdG8gYmUgY2FsbGVkXG5cdC8vIGJlZm9yZSB1c2VyIHdhdGNoZXJzIHNvIHRoYXQgd2hlbiB1c2VyIHdhdGNoZXJzIGFyZVxuXHQvLyB0cmlnZ2VyZWQsIHRoZSBET00gd291bGQgaGF2ZSBhbHJlYWR5IGJlZW4gaW4gdXBkYXRlZFxuXHQvLyBzdGF0ZS5cblx0XG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgdXNlclF1ZXVlID0gW107XG5cdHZhciBoYXMgPSB7fTtcblx0dmFyIGNpcmN1bGFyID0ge307XG5cdHZhciB3YWl0aW5nID0gZmFsc2U7XG5cdFxuXHQvKipcblx0ICogUmVzZXQgdGhlIGJhdGNoZXIncyBzdGF0ZS5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXNldEJhdGNoZXJTdGF0ZSgpIHtcblx0ICBxdWV1ZS5sZW5ndGggPSAwO1xuXHQgIHVzZXJRdWV1ZS5sZW5ndGggPSAwO1xuXHQgIGhhcyA9IHt9O1xuXHQgIGNpcmN1bGFyID0ge307XG5cdCAgd2FpdGluZyA9IGZhbHNlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRmx1c2ggYm90aCBxdWV1ZXMgYW5kIHJ1biB0aGUgd2F0Y2hlcnMuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZmx1c2hCYXRjaGVyUXVldWUoKSB7XG5cdCAgdmFyIF9hZ2FpbiA9IHRydWU7XG5cdFxuXHQgIF9mdW5jdGlvbjogd2hpbGUgKF9hZ2Fpbikge1xuXHQgICAgX2FnYWluID0gZmFsc2U7XG5cdFxuXHQgICAgcnVuQmF0Y2hlclF1ZXVlKHF1ZXVlKTtcblx0ICAgIHJ1bkJhdGNoZXJRdWV1ZSh1c2VyUXVldWUpO1xuXHQgICAgLy8gdXNlciB3YXRjaGVycyB0cmlnZ2VyZWQgbW9yZSB3YXRjaGVycyxcblx0ICAgIC8vIGtlZXAgZmx1c2hpbmcgdW50aWwgaXQgZGVwbGV0ZXNcblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgX2FnYWluID0gdHJ1ZTtcblx0ICAgICAgY29udGludWUgX2Z1bmN0aW9uO1xuXHQgICAgfVxuXHQgICAgLy8gZGV2IHRvb2wgaG9va1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoZGV2dG9vbHMgJiYgY29uZmlnLmRldnRvb2xzKSB7XG5cdCAgICAgIGRldnRvb2xzLmVtaXQoJ2ZsdXNoJyk7XG5cdCAgICB9XG5cdCAgICByZXNldEJhdGNoZXJTdGF0ZSgpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJ1biB0aGUgd2F0Y2hlcnMgaW4gYSBzaW5nbGUgcXVldWUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHF1ZXVlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcnVuQmF0Y2hlclF1ZXVlKHF1ZXVlKSB7XG5cdCAgLy8gZG8gbm90IGNhY2hlIGxlbmd0aCBiZWNhdXNlIG1vcmUgd2F0Y2hlcnMgbWlnaHQgYmUgcHVzaGVkXG5cdCAgLy8gYXMgd2UgcnVuIGV4aXN0aW5nIHdhdGNoZXJzXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHdhdGNoZXIgPSBxdWV1ZVtpXTtcblx0ICAgIHZhciBpZCA9IHdhdGNoZXIuaWQ7XG5cdCAgICBoYXNbaWRdID0gbnVsbDtcblx0ICAgIHdhdGNoZXIucnVuKCk7XG5cdCAgICAvLyBpbiBkZXYgYnVpbGQsIGNoZWNrIGFuZCBzdG9wIGNpcmN1bGFyIHVwZGF0ZXMuXG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBoYXNbaWRdICE9IG51bGwpIHtcblx0ICAgICAgY2lyY3VsYXJbaWRdID0gKGNpcmN1bGFyW2lkXSB8fCAwKSArIDE7XG5cdCAgICAgIGlmIChjaXJjdWxhcltpZF0gPiBjb25maWcuX21heFVwZGF0ZUNvdW50KSB7XG5cdCAgICAgICAgd2FybignWW91IG1heSBoYXZlIGFuIGluZmluaXRlIHVwZGF0ZSBsb29wIGZvciB3YXRjaGVyICcgKyAnd2l0aCBleHByZXNzaW9uIFwiJyArIHdhdGNoZXIuZXhwcmVzc2lvbiArICdcIicsIHdhdGNoZXIudm0pO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHF1ZXVlLmxlbmd0aCA9IDA7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQdXNoIGEgd2F0Y2hlciBpbnRvIHRoZSB3YXRjaGVyIHF1ZXVlLlxuXHQgKiBKb2JzIHdpdGggZHVwbGljYXRlIElEcyB3aWxsIGJlIHNraXBwZWQgdW5sZXNzIGl0J3Ncblx0ICogcHVzaGVkIHdoZW4gdGhlIHF1ZXVlIGlzIGJlaW5nIGZsdXNoZWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7V2F0Y2hlcn0gd2F0Y2hlclxuXHQgKiAgIHByb3BlcnRpZXM6XG5cdCAqICAgLSB7TnVtYmVyfSBpZFxuXHQgKiAgIC0ge0Z1bmN0aW9ufSBydW5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwdXNoV2F0Y2hlcih3YXRjaGVyKSB7XG5cdCAgdmFyIGlkID0gd2F0Y2hlci5pZDtcblx0ICBpZiAoaGFzW2lkXSA9PSBudWxsKSB7XG5cdCAgICAvLyBwdXNoIHdhdGNoZXIgaW50byBhcHByb3ByaWF0ZSBxdWV1ZVxuXHQgICAgdmFyIHEgPSB3YXRjaGVyLnVzZXIgPyB1c2VyUXVldWUgOiBxdWV1ZTtcblx0ICAgIGhhc1tpZF0gPSBxLmxlbmd0aDtcblx0ICAgIHEucHVzaCh3YXRjaGVyKTtcblx0ICAgIC8vIHF1ZXVlIHRoZSBmbHVzaFxuXHQgICAgaWYgKCF3YWl0aW5nKSB7XG5cdCAgICAgIHdhaXRpbmcgPSB0cnVlO1xuXHQgICAgICBuZXh0VGljayhmbHVzaEJhdGNoZXJRdWV1ZSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgdWlkJDIgPSAwO1xuXHRcblx0LyoqXG5cdCAqIEEgd2F0Y2hlciBwYXJzZXMgYW4gZXhwcmVzc2lvbiwgY29sbGVjdHMgZGVwZW5kZW5jaWVzLFxuXHQgKiBhbmQgZmlyZXMgY2FsbGJhY2sgd2hlbiB0aGUgZXhwcmVzc2lvbiB2YWx1ZSBjaGFuZ2VzLlxuXHQgKiBUaGlzIGlzIHVzZWQgZm9yIGJvdGggdGhlICR3YXRjaCgpIGFwaSBhbmQgZGlyZWN0aXZlcy5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBleHBPckZuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqICAgICAgICAgICAgICAgICAtIHtBcnJheX0gZmlsdGVyc1xuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gdHdvV2F5XG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBkZWVwXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSB1c2VyXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBzeW5jXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBsYXp5XG5cdCAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW3ByZVByb2Nlc3NdXG5cdCAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW3Bvc3RQcm9jZXNzXVxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICovXG5cdGZ1bmN0aW9uIFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCBvcHRpb25zKSB7XG5cdCAgLy8gbWl4IGluIG9wdGlvbnNcblx0ICBpZiAob3B0aW9ucykge1xuXHQgICAgZXh0ZW5kKHRoaXMsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICB2YXIgaXNGbiA9IHR5cGVvZiBleHBPckZuID09PSAnZnVuY3Rpb24nO1xuXHQgIHRoaXMudm0gPSB2bTtcblx0ICB2bS5fd2F0Y2hlcnMucHVzaCh0aGlzKTtcblx0ICB0aGlzLmV4cHJlc3Npb24gPSBleHBPckZuO1xuXHQgIHRoaXMuY2IgPSBjYjtcblx0ICB0aGlzLmlkID0gKyt1aWQkMjsgLy8gdWlkIGZvciBiYXRjaGluZ1xuXHQgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcblx0ICB0aGlzLmRpcnR5ID0gdGhpcy5sYXp5OyAvLyBmb3IgbGF6eSB3YXRjaGVyc1xuXHQgIHRoaXMuZGVwcyA9IFtdO1xuXHQgIHRoaXMubmV3RGVwcyA9IFtdO1xuXHQgIHRoaXMuZGVwSWRzID0gbmV3IF9TZXQoKTtcblx0ICB0aGlzLm5ld0RlcElkcyA9IG5ldyBfU2V0KCk7XG5cdCAgdGhpcy5wcmV2RXJyb3IgPSBudWxsOyAvLyBmb3IgYXN5bmMgZXJyb3Igc3RhY2tzXG5cdCAgLy8gcGFyc2UgZXhwcmVzc2lvbiBmb3IgZ2V0dGVyL3NldHRlclxuXHQgIGlmIChpc0ZuKSB7XG5cdCAgICB0aGlzLmdldHRlciA9IGV4cE9yRm47XG5cdCAgICB0aGlzLnNldHRlciA9IHVuZGVmaW5lZDtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHBPckZuLCB0aGlzLnR3b1dheSk7XG5cdCAgICB0aGlzLmdldHRlciA9IHJlcy5nZXQ7XG5cdCAgICB0aGlzLnNldHRlciA9IHJlcy5zZXQ7XG5cdCAgfVxuXHQgIHRoaXMudmFsdWUgPSB0aGlzLmxhenkgPyB1bmRlZmluZWQgOiB0aGlzLmdldCgpO1xuXHQgIC8vIHN0YXRlIGZvciBhdm9pZGluZyBmYWxzZSB0cmlnZ2VycyBmb3IgZGVlcCBhbmQgQXJyYXlcblx0ICAvLyB3YXRjaGVycyBkdXJpbmcgdm0uX2RpZ2VzdCgpXG5cdCAgdGhpcy5xdWV1ZWQgPSB0aGlzLnNoYWxsb3cgPSBmYWxzZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEV2YWx1YXRlIHRoZSBnZXR0ZXIsIGFuZCByZS1jb2xsZWN0IGRlcGVuZGVuY2llcy5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdGhpcy5iZWZvcmVHZXQoKTtcblx0ICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm07XG5cdCAgdmFyIHZhbHVlO1xuXHQgIHRyeSB7XG5cdCAgICB2YWx1ZSA9IHRoaXMuZ2V0dGVyLmNhbGwoc2NvcGUsIHNjb3BlKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcud2FybkV4cHJlc3Npb25FcnJvcnMpIHtcblx0ICAgICAgd2FybignRXJyb3Igd2hlbiBldmFsdWF0aW5nIGV4cHJlc3Npb24gJyArICdcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCI6ICcgKyBlLnRvU3RyaW5nKCksIHRoaXMudm0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyBcInRvdWNoXCIgZXZlcnkgcHJvcGVydHkgc28gdGhleSBhcmUgYWxsIHRyYWNrZWQgYXNcblx0ICAvLyBkZXBlbmRlbmNpZXMgZm9yIGRlZXAgd2F0Y2hpbmdcblx0ICBpZiAodGhpcy5kZWVwKSB7XG5cdCAgICB0cmF2ZXJzZSh2YWx1ZSk7XG5cdCAgfVxuXHQgIGlmICh0aGlzLnByZVByb2Nlc3MpIHtcblx0ICAgIHZhbHVlID0gdGhpcy5wcmVQcm9jZXNzKHZhbHVlKTtcblx0ICB9XG5cdCAgaWYgKHRoaXMuZmlsdGVycykge1xuXHQgICAgdmFsdWUgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKHZhbHVlLCBudWxsLCB0aGlzLmZpbHRlcnMsIGZhbHNlKTtcblx0ICB9XG5cdCAgaWYgKHRoaXMucG9zdFByb2Nlc3MpIHtcblx0ICAgIHZhbHVlID0gdGhpcy5wb3N0UHJvY2Vzcyh2YWx1ZSk7XG5cdCAgfVxuXHQgIHRoaXMuYWZ0ZXJHZXQoKTtcblx0ICByZXR1cm4gdmFsdWU7XG5cdH07XG5cdFxuXHQvKipcblx0ICogU2V0IHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIHdpdGggdGhlIHNldHRlci5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgIHZhciBzY29wZSA9IHRoaXMuc2NvcGUgfHwgdGhpcy52bTtcblx0ICBpZiAodGhpcy5maWx0ZXJzKSB7XG5cdCAgICB2YWx1ZSA9IHNjb3BlLl9hcHBseUZpbHRlcnModmFsdWUsIHRoaXMudmFsdWUsIHRoaXMuZmlsdGVycywgdHJ1ZSk7XG5cdCAgfVxuXHQgIHRyeSB7XG5cdCAgICB0aGlzLnNldHRlci5jYWxsKHNjb3BlLCBzY29wZSwgdmFsdWUpO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy53YXJuRXhwcmVzc2lvbkVycm9ycykge1xuXHQgICAgICB3YXJuKCdFcnJvciB3aGVuIGV2YWx1YXRpbmcgc2V0dGVyICcgKyAnXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiOiAnICsgZS50b1N0cmluZygpLCB0aGlzLnZtKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gdHdvLXdheSBzeW5jIGZvciB2LWZvciBhbGlhc1xuXHQgIHZhciBmb3JDb250ZXh0ID0gc2NvcGUuJGZvckNvbnRleHQ7XG5cdCAgaWYgKGZvckNvbnRleHQgJiYgZm9yQ29udGV4dC5hbGlhcyA9PT0gdGhpcy5leHByZXNzaW9uKSB7XG5cdCAgICBpZiAoZm9yQ29udGV4dC5maWx0ZXJzKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSXQgc2VlbXMgeW91IGFyZSB1c2luZyB0d28td2F5IGJpbmRpbmcgb24gJyArICdhIHYtZm9yIGFsaWFzICgnICsgdGhpcy5leHByZXNzaW9uICsgJyksIGFuZCB0aGUgJyArICd2LWZvciBoYXMgZmlsdGVycy4gVGhpcyB3aWxsIG5vdCB3b3JrIHByb3Blcmx5LiAnICsgJ0VpdGhlciByZW1vdmUgdGhlIGZpbHRlcnMgb3IgdXNlIGFuIGFycmF5IG9mICcgKyAnb2JqZWN0cyBhbmQgYmluZCB0byBvYmplY3QgcHJvcGVydGllcyBpbnN0ZWFkLicsIHRoaXMudm0pO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBmb3JDb250ZXh0Ll93aXRoTG9jayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChzY29wZS4ka2V5KSB7XG5cdCAgICAgICAgLy8gb3JpZ2luYWwgaXMgYW4gb2JqZWN0XG5cdCAgICAgICAgZm9yQ29udGV4dC5yYXdWYWx1ZVtzY29wZS4ka2V5XSA9IHZhbHVlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGZvckNvbnRleHQucmF3VmFsdWUuJHNldChzY29wZS4kaW5kZXgsIHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFByZXBhcmUgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5iZWZvcmVHZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgRGVwLnRhcmdldCA9IHRoaXM7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQWRkIGEgZGVwZW5kZW5jeSB0byB0aGlzIGRpcmVjdGl2ZS5cblx0ICpcblx0ICogQHBhcmFtIHtEZXB9IGRlcFxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmFkZERlcCA9IGZ1bmN0aW9uIChkZXApIHtcblx0ICB2YXIgaWQgPSBkZXAuaWQ7XG5cdCAgaWYgKCF0aGlzLm5ld0RlcElkcy5oYXMoaWQpKSB7XG5cdCAgICB0aGlzLm5ld0RlcElkcy5hZGQoaWQpO1xuXHQgICAgdGhpcy5uZXdEZXBzLnB1c2goZGVwKTtcblx0ICAgIGlmICghdGhpcy5kZXBJZHMuaGFzKGlkKSkge1xuXHQgICAgICBkZXAuYWRkU3ViKHRoaXMpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDbGVhbiB1cCBmb3IgZGVwZW5kZW5jeSBjb2xsZWN0aW9uLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmFmdGVyR2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIERlcC50YXJnZXQgPSBudWxsO1xuXHQgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICB2YXIgZGVwID0gdGhpcy5kZXBzW2ldO1xuXHQgICAgaWYgKCF0aGlzLm5ld0RlcElkcy5oYXMoZGVwLmlkKSkge1xuXHQgICAgICBkZXAucmVtb3ZlU3ViKHRoaXMpO1xuXHQgICAgfVxuXHQgIH1cblx0ICB2YXIgdG1wID0gdGhpcy5kZXBJZHM7XG5cdCAgdGhpcy5kZXBJZHMgPSB0aGlzLm5ld0RlcElkcztcblx0ICB0aGlzLm5ld0RlcElkcyA9IHRtcDtcblx0ICB0aGlzLm5ld0RlcElkcy5jbGVhcigpO1xuXHQgIHRtcCA9IHRoaXMuZGVwcztcblx0ICB0aGlzLmRlcHMgPSB0aGlzLm5ld0RlcHM7XG5cdCAgdGhpcy5uZXdEZXBzID0gdG1wO1xuXHQgIHRoaXMubmV3RGVwcy5sZW5ndGggPSAwO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFN1YnNjcmliZXIgaW50ZXJmYWNlLlxuXHQgKiBXaWxsIGJlIGNhbGxlZCB3aGVuIGEgZGVwZW5kZW5jeSBjaGFuZ2VzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHNoYWxsb3dcblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoc2hhbGxvdykge1xuXHQgIGlmICh0aGlzLmxhenkpIHtcblx0ICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuXHQgIH0gZWxzZSBpZiAodGhpcy5zeW5jIHx8ICFjb25maWcuYXN5bmMpIHtcblx0ICAgIHRoaXMucnVuKCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIGlmIHF1ZXVlZCwgb25seSBvdmVyd3JpdGUgc2hhbGxvdyB3aXRoIG5vbi1zaGFsbG93LFxuXHQgICAgLy8gYnV0IG5vdCB0aGUgb3RoZXIgd2F5IGFyb3VuZC5cblx0ICAgIHRoaXMuc2hhbGxvdyA9IHRoaXMucXVldWVkID8gc2hhbGxvdyA/IHRoaXMuc2hhbGxvdyA6IGZhbHNlIDogISFzaGFsbG93O1xuXHQgICAgdGhpcy5xdWV1ZWQgPSB0cnVlO1xuXHQgICAgLy8gcmVjb3JkIGJlZm9yZS1wdXNoIGVycm9yIHN0YWNrIGluIGRlYnVnIG1vZGVcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLmRlYnVnKSB7XG5cdCAgICAgIHRoaXMucHJldkVycm9yID0gbmV3IEVycm9yKCdbdnVlXSBhc3luYyBzdGFjayB0cmFjZScpO1xuXHQgICAgfVxuXHQgICAgcHVzaFdhdGNoZXIodGhpcyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEJhdGNoZXIgam9iIGludGVyZmFjZS5cblx0ICogV2lsbCBiZSBjYWxsZWQgYnkgdGhlIGJhdGNoZXIuXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuXHQgIGlmICh0aGlzLmFjdGl2ZSkge1xuXHQgICAgdmFyIHZhbHVlID0gdGhpcy5nZXQoKTtcblx0ICAgIGlmICh2YWx1ZSAhPT0gdGhpcy52YWx1ZSB8fFxuXHQgICAgLy8gRGVlcCB3YXRjaGVycyBhbmQgd2F0Y2hlcnMgb24gT2JqZWN0L0FycmF5cyBzaG91bGQgZmlyZSBldmVuXG5cdCAgICAvLyB3aGVuIHRoZSB2YWx1ZSBpcyB0aGUgc2FtZSwgYmVjYXVzZSB0aGUgdmFsdWUgbWF5XG5cdCAgICAvLyBoYXZlIG11dGF0ZWQ7IGJ1dCBvbmx5IGRvIHNvIGlmIHRoaXMgaXMgYVxuXHQgICAgLy8gbm9uLXNoYWxsb3cgdXBkYXRlIChjYXVzZWQgYnkgYSB2bSBkaWdlc3QpLlxuXHQgICAgKGlzT2JqZWN0KHZhbHVlKSB8fCB0aGlzLmRlZXApICYmICF0aGlzLnNoYWxsb3cpIHtcblx0ICAgICAgLy8gc2V0IG5ldyB2YWx1ZVxuXHQgICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlO1xuXHQgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cdCAgICAgIC8vIGluIGRlYnVnICsgYXN5bmMgbW9kZSwgd2hlbiBhIHdhdGNoZXIgY2FsbGJhY2tzXG5cdCAgICAgIC8vIHRocm93cywgd2UgYWxzbyB0aHJvdyB0aGUgc2F2ZWQgYmVmb3JlLXB1c2ggZXJyb3Jcblx0ICAgICAgLy8gc28gdGhlIGZ1bGwgY3Jvc3MtdGljayBzdGFjayB0cmFjZSBpcyBhdmFpbGFibGUuXG5cdCAgICAgIHZhciBwcmV2RXJyb3IgPSB0aGlzLnByZXZFcnJvcjtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5kZWJ1ZyAmJiBwcmV2RXJyb3IpIHtcblx0ICAgICAgICB0aGlzLnByZXZFcnJvciA9IG51bGw7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgdGhyb3cgcHJldkVycm9yO1xuXHQgICAgICAgICAgfSwgMCk7XG5cdCAgICAgICAgICB0aHJvdyBlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy52bSwgdmFsdWUsIG9sZFZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdGhpcy5xdWV1ZWQgPSB0aGlzLnNoYWxsb3cgPSBmYWxzZTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogRXZhbHVhdGUgdGhlIHZhbHVlIG9mIHRoZSB3YXRjaGVyLlxuXHQgKiBUaGlzIG9ubHkgZ2V0cyBjYWxsZWQgZm9yIGxhenkgd2F0Y2hlcnMuXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgLy8gYXZvaWQgb3ZlcndyaXRpbmcgYW5vdGhlciB3YXRjaGVyIHRoYXQgaXMgYmVpbmdcblx0ICAvLyBjb2xsZWN0ZWQuXG5cdCAgdmFyIGN1cnJlbnQgPSBEZXAudGFyZ2V0O1xuXHQgIHRoaXMudmFsdWUgPSB0aGlzLmdldCgpO1xuXHQgIHRoaXMuZGlydHkgPSBmYWxzZTtcblx0ICBEZXAudGFyZ2V0ID0gY3VycmVudDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBEZXBlbmQgb24gYWxsIGRlcHMgY29sbGVjdGVkIGJ5IHRoaXMgd2F0Y2hlci5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5kZXBlbmQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHRoaXMuZGVwc1tpXS5kZXBlbmQoKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIHNlbGYgZnJvbSBhbGwgZGVwZW5kZW5jaWVzJyBzdWJjcmliZXIgbGlzdC5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS50ZWFyZG93biA9IGZ1bmN0aW9uICgpIHtcblx0ICBpZiAodGhpcy5hY3RpdmUpIHtcblx0ICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gdm0ncyB3YXRjaGVyIGxpc3Rcblx0ICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBleHBlbnNpdmUgb3BlcmF0aW9uIHNvIHdlIHNraXAgaXRcblx0ICAgIC8vIGlmIHRoZSB2bSBpcyBiZWluZyBkZXN0cm95ZWQgb3IgaXMgcGVyZm9ybWluZyBhIHYtZm9yXG5cdCAgICAvLyByZS1yZW5kZXIgKHRoZSB3YXRjaGVyIGxpc3QgaXMgdGhlbiBmaWx0ZXJlZCBieSB2LWZvcikuXG5cdCAgICBpZiAoIXRoaXMudm0uX2lzQmVpbmdEZXN0cm95ZWQgJiYgIXRoaXMudm0uX3ZGb3JSZW1vdmluZykge1xuXHQgICAgICB0aGlzLnZtLl93YXRjaGVycy4kcmVtb3ZlKHRoaXMpO1xuXHQgICAgfVxuXHQgICAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB0aGlzLmRlcHNbaV0ucmVtb3ZlU3ViKHRoaXMpO1xuXHQgICAgfVxuXHQgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcblx0ICAgIHRoaXMudm0gPSB0aGlzLmNiID0gdGhpcy52YWx1ZSA9IG51bGw7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFJlY3J1c2l2ZWx5IHRyYXZlcnNlIGFuIG9iamVjdCB0byBldm9rZSBhbGwgY29udmVydGVkXG5cdCAqIGdldHRlcnMsIHNvIHRoYXQgZXZlcnkgbmVzdGVkIHByb3BlcnR5IGluc2lkZSB0aGUgb2JqZWN0XG5cdCAqIGlzIGNvbGxlY3RlZCBhcyBhIFwiZGVlcFwiIGRlcGVuZGVuY3kuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqL1xuXHRcblx0dmFyIHNlZW5PYmplY3RzID0gbmV3IF9TZXQoKTtcblx0ZnVuY3Rpb24gdHJhdmVyc2UodmFsLCBzZWVuKSB7XG5cdCAgdmFyIGkgPSB1bmRlZmluZWQsXG5cdCAgICAgIGtleXMgPSB1bmRlZmluZWQ7XG5cdCAgaWYgKCFzZWVuKSB7XG5cdCAgICBzZWVuID0gc2Vlbk9iamVjdHM7XG5cdCAgICBzZWVuLmNsZWFyKCk7XG5cdCAgfVxuXHQgIHZhciBpc0EgPSBpc0FycmF5KHZhbCk7XG5cdCAgdmFyIGlzTyA9IGlzT2JqZWN0KHZhbCk7XG5cdCAgaWYgKChpc0EgfHwgaXNPKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHZhbCkpIHtcblx0ICAgIGlmICh2YWwuX19vYl9fKSB7XG5cdCAgICAgIHZhciBkZXBJZCA9IHZhbC5fX29iX18uZGVwLmlkO1xuXHQgICAgICBpZiAoc2Vlbi5oYXMoZGVwSWQpKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHNlZW4uYWRkKGRlcElkKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKGlzQSkge1xuXHQgICAgICBpID0gdmFsLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKGktLSkgdHJhdmVyc2UodmFsW2ldLCBzZWVuKTtcblx0ICAgIH0gZWxzZSBpZiAoaXNPKSB7XG5cdCAgICAgIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xuXHQgICAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICAgIHdoaWxlIChpLS0pIHRyYXZlcnNlKHZhbFtrZXlzW2ldXSwgc2Vlbik7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgdGV4dCQxID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdGhpcy5hdHRyID0gdGhpcy5lbC5ub2RlVHlwZSA9PT0gMyA/ICdkYXRhJyA6ICd0ZXh0Q29udGVudCc7XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIHRoaXMuZWxbdGhpcy5hdHRyXSA9IF90b1N0cmluZyh2YWx1ZSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHRlbXBsYXRlQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cdHZhciBpZFNlbGVjdG9yQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cdFxuXHR2YXIgbWFwID0ge1xuXHQgIGVmYXVsdDogWzAsICcnLCAnJ10sXG5cdCAgbGVnZW5kOiBbMSwgJzxmaWVsZHNldD4nLCAnPC9maWVsZHNldD4nXSxcblx0ICB0cjogWzIsICc8dGFibGU+PHRib2R5PicsICc8L3Rib2R5PjwvdGFibGU+J10sXG5cdCAgY29sOiBbMiwgJzx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+JywgJzwvY29sZ3JvdXA+PC90YWJsZT4nXVxuXHR9O1xuXHRcblx0bWFwLnRkID0gbWFwLnRoID0gWzMsICc8dGFibGU+PHRib2R5Pjx0cj4nLCAnPC90cj48L3Rib2R5PjwvdGFibGU+J107XG5cdFxuXHRtYXAub3B0aW9uID0gbWFwLm9wdGdyb3VwID0gWzEsICc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLCAnPC9zZWxlY3Q+J107XG5cdFxuXHRtYXAudGhlYWQgPSBtYXAudGJvZHkgPSBtYXAuY29sZ3JvdXAgPSBtYXAuY2FwdGlvbiA9IG1hcC50Zm9vdCA9IFsxLCAnPHRhYmxlPicsICc8L3RhYmxlPiddO1xuXHRcblx0bWFwLmcgPSBtYXAuZGVmcyA9IG1hcC5zeW1ib2wgPSBtYXAudXNlID0gbWFwLmltYWdlID0gbWFwLnRleHQgPSBtYXAuY2lyY2xlID0gbWFwLmVsbGlwc2UgPSBtYXAubGluZSA9IG1hcC5wYXRoID0gbWFwLnBvbHlnb24gPSBtYXAucG9seWxpbmUgPSBtYXAucmVjdCA9IFsxLCAnPHN2ZyAnICsgJ3htbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiAnICsgJ3htbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiICcgKyAneG1sbnM6ZXY9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAxL3htbC1ldmVudHNcIicgKyAndmVyc2lvbj1cIjEuMVwiPicsICc8L3N2Zz4nXTtcblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhIG5vZGUgaXMgYSBzdXBwb3J0ZWQgdGVtcGxhdGUgbm9kZSB3aXRoIGFcblx0ICogRG9jdW1lbnRGcmFnbWVudCBjb250ZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc1JlYWxUZW1wbGF0ZShub2RlKSB7XG5cdCAgcmV0dXJuIGlzVGVtcGxhdGUobm9kZSkgJiYgaXNGcmFnbWVudChub2RlLmNvbnRlbnQpO1xuXHR9XG5cdFxuXHR2YXIgdGFnUkUkMSA9IC88KFtcXHc6LV0rKS87XG5cdHZhciBlbnRpdHlSRSA9IC8mIz9cXHcrPzsvO1xuXHR2YXIgY29tbWVudFJFID0gLzwhLS0vO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgYSBzdHJpbmcgdGVtcGxhdGUgdG8gYSBEb2N1bWVudEZyYWdtZW50LlxuXHQgKiBEZXRlcm1pbmVzIGNvcnJlY3Qgd3JhcHBpbmcgYnkgdGFnIHR5cGVzLiBXcmFwcGluZ1xuXHQgKiBzdHJhdGVneSBmb3VuZCBpbiBqUXVlcnkgJiBjb21wb25lbnQvZG9taWZ5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdGVtcGxhdGVTdHJpbmdcblx0ICogQHBhcmFtIHtCb29sZWFufSByYXdcblx0ICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzdHJpbmdUb0ZyYWdtZW50KHRlbXBsYXRlU3RyaW5nLCByYXcpIHtcblx0ICAvLyB0cnkgYSBjYWNoZSBoaXQgZmlyc3Rcblx0ICB2YXIgY2FjaGVLZXkgPSByYXcgPyB0ZW1wbGF0ZVN0cmluZyA6IHRlbXBsYXRlU3RyaW5nLnRyaW0oKTtcblx0ICB2YXIgaGl0ID0gdGVtcGxhdGVDYWNoZS5nZXQoY2FjaGVLZXkpO1xuXHQgIGlmIChoaXQpIHtcblx0ICAgIHJldHVybiBoaXQ7XG5cdCAgfVxuXHRcblx0ICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0ICB2YXIgdGFnTWF0Y2ggPSB0ZW1wbGF0ZVN0cmluZy5tYXRjaCh0YWdSRSQxKTtcblx0ICB2YXIgZW50aXR5TWF0Y2ggPSBlbnRpdHlSRS50ZXN0KHRlbXBsYXRlU3RyaW5nKTtcblx0ICB2YXIgY29tbWVudE1hdGNoID0gY29tbWVudFJFLnRlc3QodGVtcGxhdGVTdHJpbmcpO1xuXHRcblx0ICBpZiAoIXRhZ01hdGNoICYmICFlbnRpdHlNYXRjaCAmJiAhY29tbWVudE1hdGNoKSB7XG5cdCAgICAvLyB0ZXh0IG9ubHksIHJldHVybiBhIHNpbmdsZSB0ZXh0IG5vZGUuXG5cdCAgICBmcmFnLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRlbXBsYXRlU3RyaW5nKSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciB0YWcgPSB0YWdNYXRjaCAmJiB0YWdNYXRjaFsxXTtcblx0ICAgIHZhciB3cmFwID0gbWFwW3RhZ10gfHwgbWFwLmVmYXVsdDtcblx0ICAgIHZhciBkZXB0aCA9IHdyYXBbMF07XG5cdCAgICB2YXIgcHJlZml4ID0gd3JhcFsxXTtcblx0ICAgIHZhciBzdWZmaXggPSB3cmFwWzJdO1xuXHQgICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XG5cdCAgICBub2RlLmlubmVySFRNTCA9IHByZWZpeCArIHRlbXBsYXRlU3RyaW5nICsgc3VmZml4O1xuXHQgICAgd2hpbGUgKGRlcHRoLS0pIHtcblx0ICAgICAgbm9kZSA9IG5vZGUubGFzdENoaWxkO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBjaGlsZDtcblx0ICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICB3aGlsZSAoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQpIHtcblx0ICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgICBmcmFnLmFwcGVuZENoaWxkKGNoaWxkKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKCFyYXcpIHtcblx0ICAgIHRyaW1Ob2RlKGZyYWcpO1xuXHQgIH1cblx0ICB0ZW1wbGF0ZUNhY2hlLnB1dChjYWNoZUtleSwgZnJhZyk7XG5cdCAgcmV0dXJuIGZyYWc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IGEgdGVtcGxhdGUgbm9kZSB0byBhIERvY3VtZW50RnJhZ21lbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG5vZGVUb0ZyYWdtZW50KG5vZGUpIHtcblx0ICAvLyBpZiBpdHMgYSB0ZW1wbGF0ZSB0YWcgYW5kIHRoZSBicm93c2VyIHN1cHBvcnRzIGl0LFxuXHQgIC8vIGl0cyBjb250ZW50IGlzIGFscmVhZHkgYSBkb2N1bWVudCBmcmFnbWVudC4gSG93ZXZlciwgaU9TIFNhZmFyaSBoYXNcblx0ICAvLyBidWcgd2hlbiB1c2luZyBkaXJlY3RseSBjbG9uZWQgdGVtcGxhdGUgY29udGVudCB3aXRoIHRvdWNoXG5cdCAgLy8gZXZlbnRzIGFuZCBjYW4gY2F1c2UgY3Jhc2hlcyB3aGVuIHRoZSBub2RlcyBhcmUgcmVtb3ZlZCBmcm9tIERPTSwgc28gd2Vcblx0ICAvLyBoYXZlIHRvIHRyZWF0IHRlbXBsYXRlIGVsZW1lbnRzIGFzIHN0cmluZyB0ZW1wbGF0ZXMuICgjMjgwNSlcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaXNSZWFsVGVtcGxhdGUobm9kZSkpIHtcblx0ICAgIHJldHVybiBzdHJpbmdUb0ZyYWdtZW50KG5vZGUuaW5uZXJIVE1MKTtcblx0ICB9XG5cdCAgLy8gc2NyaXB0IHRlbXBsYXRlXG5cdCAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ1NDUklQVCcpIHtcblx0ICAgIHJldHVybiBzdHJpbmdUb0ZyYWdtZW50KG5vZGUudGV4dENvbnRlbnQpO1xuXHQgIH1cblx0ICAvLyBub3JtYWwgbm9kZSwgY2xvbmUgaXQgdG8gYXZvaWQgbXV0YXRpbmcgdGhlIG9yaWdpbmFsXG5cdCAgdmFyIGNsb25lZE5vZGUgPSBjbG9uZU5vZGUobm9kZSk7XG5cdCAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdCAgdmFyIGNoaWxkO1xuXHQgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgd2hpbGUgKGNoaWxkID0gY2xvbmVkTm9kZS5maXJzdENoaWxkKSB7XG5cdCAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICBmcmFnLmFwcGVuZENoaWxkKGNoaWxkKTtcblx0ICB9XG5cdCAgdHJpbU5vZGUoZnJhZyk7XG5cdCAgcmV0dXJuIGZyYWc7XG5cdH1cblx0XG5cdC8vIFRlc3QgZm9yIHRoZSBwcmVzZW5jZSBvZiB0aGUgU2FmYXJpIHRlbXBsYXRlIGNsb25pbmcgYnVnXG5cdC8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3d1Zy5jZ2k/aWQ9MTM3NzU1XG5cdHZhciBoYXNCcm9rZW5UZW1wbGF0ZSA9IChmdW5jdGlvbiAoKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICBpZiAoaW5Ccm93c2VyKSB7XG5cdCAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgYS5pbm5lckhUTUwgPSAnPHRlbXBsYXRlPjE8L3RlbXBsYXRlPic7XG5cdCAgICByZXR1cm4gIWEuY2xvbmVOb2RlKHRydWUpLmZpcnN0Q2hpbGQuaW5uZXJIVE1MO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHR9KSgpO1xuXHRcblx0Ly8gVGVzdCBmb3IgSUUxMC8xMSB0ZXh0YXJlYSBwbGFjZWhvbGRlciBjbG9uZSBidWdcblx0dmFyIGhhc1RleHRhcmVhQ2xvbmVCdWcgPSAoZnVuY3Rpb24gKCkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgaWYgKGluQnJvd3Nlcikge1xuXHQgICAgdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuXHQgICAgdC5wbGFjZWhvbGRlciA9ICd0Jztcblx0ICAgIHJldHVybiB0LmNsb25lTm9kZSh0cnVlKS52YWx1ZSA9PT0gJ3QnO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHR9KSgpO1xuXHRcblx0LyoqXG5cdCAqIDEuIERlYWwgd2l0aCBTYWZhcmkgY2xvbmluZyBuZXN0ZWQgPHRlbXBsYXRlPiBidWcgYnlcblx0ICogICAgbWFudWFsbHkgY2xvbmluZyBhbGwgdGVtcGxhdGUgaW5zdGFuY2VzLlxuXHQgKiAyLiBEZWFsIHdpdGggSUUxMC8xMSB0ZXh0YXJlYSBwbGFjZWhvbGRlciBidWcgYnkgc2V0dGluZ1xuXHQgKiAgICB0aGUgY29ycmVjdCB2YWx1ZSBhZnRlciBjbG9uaW5nLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gbm9kZVxuXHQgKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2xvbmVOb2RlKG5vZGUpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoIW5vZGUucXVlcnlTZWxlY3RvckFsbCkge1xuXHQgICAgcmV0dXJuIG5vZGUuY2xvbmVOb2RlKCk7XG5cdCAgfVxuXHQgIHZhciByZXMgPSBub2RlLmNsb25lTm9kZSh0cnVlKTtcblx0ICB2YXIgaSwgb3JpZ2luYWwsIGNsb25lZDtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaGFzQnJva2VuVGVtcGxhdGUpIHtcblx0ICAgIHZhciB0ZW1wQ2xvbmUgPSByZXM7XG5cdCAgICBpZiAoaXNSZWFsVGVtcGxhdGUobm9kZSkpIHtcblx0ICAgICAgbm9kZSA9IG5vZGUuY29udGVudDtcblx0ICAgICAgdGVtcENsb25lID0gcmVzLmNvbnRlbnQ7XG5cdCAgICB9XG5cdCAgICBvcmlnaW5hbCA9IG5vZGUucXVlcnlTZWxlY3RvckFsbCgndGVtcGxhdGUnKTtcblx0ICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcblx0ICAgICAgY2xvbmVkID0gdGVtcENsb25lLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RlbXBsYXRlJyk7XG5cdCAgICAgIGkgPSBjbG9uZWQubGVuZ3RoO1xuXHQgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAgY2xvbmVkW2ldLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGNsb25lTm9kZShvcmlnaW5hbFtpXSksIGNsb25lZFtpXSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGhhc1RleHRhcmVhQ2xvbmVCdWcpIHtcblx0ICAgIGlmIChub2RlLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcblx0ICAgICAgcmVzLnZhbHVlID0gbm9kZS52YWx1ZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG9yaWdpbmFsID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZXh0YXJlYScpO1xuXHQgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoKSB7XG5cdCAgICAgICAgY2xvbmVkID0gcmVzLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJyk7XG5cdCAgICAgICAgaSA9IGNsb25lZC5sZW5ndGg7XG5cdCAgICAgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICAgICAgY2xvbmVkW2ldLnZhbHVlID0gb3JpZ2luYWxbaV0udmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcm9jZXNzIHRoZSB0ZW1wbGF0ZSBvcHRpb24gYW5kIG5vcm1hbGl6ZXMgaXQgaW50byBhXG5cdCAqIGEgRG9jdW1lbnRGcmFnbWVudCB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgcGFydGlhbCBvciBhXG5cdCAqIGluc3RhbmNlIHRlbXBsYXRlLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHRlbXBsYXRlXG5cdCAqICAgICAgICBQb3NzaWJsZSB2YWx1ZXMgaW5jbHVkZTpcblx0ICogICAgICAgIC0gRG9jdW1lbnRGcmFnbWVudCBvYmplY3Rcblx0ICogICAgICAgIC0gTm9kZSBvYmplY3Qgb2YgdHlwZSBUZW1wbGF0ZVxuXHQgKiAgICAgICAgLSBpZCBzZWxlY3RvcjogJyNzb21lLXRlbXBsYXRlLWlkJ1xuXHQgKiAgICAgICAgLSB0ZW1wbGF0ZSBzdHJpbmc6ICc8ZGl2PjxzcGFuPnt7bXNnfX08L3NwYW4+PC9kaXY+J1xuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHNob3VsZENsb25lXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gcmF3XG5cdCAqICAgICAgICBpbmxpbmUgSFRNTCBpbnRlcnBvbGF0aW9uLiBEbyBub3QgY2hlY2sgZm9yIGlkXG5cdCAqICAgICAgICBzZWxlY3RvciBhbmQga2VlcCB3aGl0ZXNwYWNlIGluIHRoZSBzdHJpbmcuXG5cdCAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlVGVtcGxhdGUodGVtcGxhdGUsIHNob3VsZENsb25lLCByYXcpIHtcblx0ICB2YXIgbm9kZSwgZnJhZztcblx0XG5cdCAgLy8gaWYgdGhlIHRlbXBsYXRlIGlzIGFscmVhZHkgYSBkb2N1bWVudCBmcmFnbWVudCxcblx0ICAvLyBkbyBub3RoaW5nXG5cdCAgaWYgKGlzRnJhZ21lbnQodGVtcGxhdGUpKSB7XG5cdCAgICB0cmltTm9kZSh0ZW1wbGF0ZSk7XG5cdCAgICByZXR1cm4gc2hvdWxkQ2xvbmUgPyBjbG9uZU5vZGUodGVtcGxhdGUpIDogdGVtcGxhdGU7XG5cdCAgfVxuXHRcblx0ICBpZiAodHlwZW9mIHRlbXBsYXRlID09PSAnc3RyaW5nJykge1xuXHQgICAgLy8gaWQgc2VsZWN0b3Jcblx0ICAgIGlmICghcmF3ICYmIHRlbXBsYXRlLmNoYXJBdCgwKSA9PT0gJyMnKSB7XG5cdCAgICAgIC8vIGlkIHNlbGVjdG9yIGNhbiBiZSBjYWNoZWQgdG9vXG5cdCAgICAgIGZyYWcgPSBpZFNlbGVjdG9yQ2FjaGUuZ2V0KHRlbXBsYXRlKTtcblx0ICAgICAgaWYgKCFmcmFnKSB7XG5cdCAgICAgICAgbm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRlbXBsYXRlLnNsaWNlKDEpKTtcblx0ICAgICAgICBpZiAobm9kZSkge1xuXHQgICAgICAgICAgZnJhZyA9IG5vZGVUb0ZyYWdtZW50KG5vZGUpO1xuXHQgICAgICAgICAgLy8gc2F2ZSBzZWxlY3RvciB0byBjYWNoZVxuXHQgICAgICAgICAgaWRTZWxlY3RvckNhY2hlLnB1dCh0ZW1wbGF0ZSwgZnJhZyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBub3JtYWwgc3RyaW5nIHRlbXBsYXRlXG5cdCAgICAgIGZyYWcgPSBzdHJpbmdUb0ZyYWdtZW50KHRlbXBsYXRlLCByYXcpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAodGVtcGxhdGUubm9kZVR5cGUpIHtcblx0ICAgIC8vIGEgZGlyZWN0IG5vZGVcblx0ICAgIGZyYWcgPSBub2RlVG9GcmFnbWVudCh0ZW1wbGF0ZSk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnJhZyAmJiBzaG91bGRDbG9uZSA/IGNsb25lTm9kZShmcmFnKSA6IGZyYWc7XG5cdH1cblx0XG5cdHZhciB0ZW1wbGF0ZSA9IE9iamVjdC5mcmVlemUoe1xuXHQgIGNsb25lTm9kZTogY2xvbmVOb2RlLFxuXHQgIHBhcnNlVGVtcGxhdGU6IHBhcnNlVGVtcGxhdGVcblx0fSk7XG5cdFxuXHR2YXIgaHRtbCA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8vIGEgY29tbWVudCBub2RlIG1lYW5zIHRoaXMgaXMgYSBiaW5kaW5nIGZvclxuXHQgICAgLy8ge3t7IGlubGluZSB1bmVzY2FwZWQgaHRtbCB9fX1cblx0ICAgIGlmICh0aGlzLmVsLm5vZGVUeXBlID09PSA4KSB7XG5cdCAgICAgIC8vIGhvbGQgbm9kZXNcblx0ICAgICAgdGhpcy5ub2RlcyA9IFtdO1xuXHQgICAgICAvLyByZXBsYWNlIHRoZSBwbGFjZWhvbGRlciB3aXRoIHByb3BlciBhbmNob3Jcblx0ICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtaHRtbCcpO1xuXHQgICAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdmFsdWUgPSBfdG9TdHJpbmcodmFsdWUpO1xuXHQgICAgaWYgKHRoaXMubm9kZXMpIHtcblx0ICAgICAgdGhpcy5zd2FwKHZhbHVlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuZWwuaW5uZXJIVE1MID0gdmFsdWU7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgc3dhcDogZnVuY3Rpb24gc3dhcCh2YWx1ZSkge1xuXHQgICAgLy8gcmVtb3ZlIG9sZCBub2Rlc1xuXHQgICAgdmFyIGkgPSB0aGlzLm5vZGVzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgcmVtb3ZlKHRoaXMubm9kZXNbaV0pO1xuXHQgICAgfVxuXHQgICAgLy8gY29udmVydCBuZXcgdmFsdWUgdG8gYSBmcmFnbWVudFxuXHQgICAgLy8gZG8gbm90IGF0dGVtcHQgdG8gcmV0cmlldmUgZnJvbSBpZCBzZWxlY3RvclxuXHQgICAgdmFyIGZyYWcgPSBwYXJzZVRlbXBsYXRlKHZhbHVlLCB0cnVlLCB0cnVlKTtcblx0ICAgIC8vIHNhdmUgYSByZWZlcmVuY2UgdG8gdGhlc2Ugbm9kZXMgc28gd2UgY2FuIHJlbW92ZSBsYXRlclxuXHQgICAgdGhpcy5ub2RlcyA9IHRvQXJyYXkoZnJhZy5jaGlsZE5vZGVzKTtcblx0ICAgIGJlZm9yZShmcmFnLCB0aGlzLmFuY2hvcik7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEFic3RyYWN0aW9uIGZvciBhIHBhcnRpYWxseS1jb21waWxlZCBmcmFnbWVudC5cblx0ICogQ2FuIG9wdGlvbmFsbHkgY29tcGlsZSBjb250ZW50IHdpdGggYSBjaGlsZCBzY29wZS5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gbGlua2VyXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcblx0ICogQHBhcmFtIHtWdWV9IFtob3N0XVxuXHQgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuXHQgKiBAcGFyYW0ge0ZyYWdtZW50fSBbcGFyZW50RnJhZ11cblx0ICovXG5cdGZ1bmN0aW9uIEZyYWdtZW50KGxpbmtlciwgdm0sIGZyYWcsIGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKSB7XG5cdCAgdGhpcy5jaGlsZHJlbiA9IFtdO1xuXHQgIHRoaXMuY2hpbGRGcmFncyA9IFtdO1xuXHQgIHRoaXMudm0gPSB2bTtcblx0ICB0aGlzLnNjb3BlID0gc2NvcGU7XG5cdCAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuXHQgIHRoaXMucGFyZW50RnJhZyA9IHBhcmVudEZyYWc7XG5cdCAgaWYgKHBhcmVudEZyYWcpIHtcblx0ICAgIHBhcmVudEZyYWcuY2hpbGRGcmFncy5wdXNoKHRoaXMpO1xuXHQgIH1cblx0ICB0aGlzLnVubGluayA9IGxpbmtlcih2bSwgZnJhZywgaG9zdCwgc2NvcGUsIHRoaXMpO1xuXHQgIHZhciBzaW5nbGUgPSB0aGlzLnNpbmdsZSA9IGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiZcblx0ICAvLyBkbyBub3QgZ28gc2luZ2xlIG1vZGUgaWYgdGhlIG9ubHkgbm9kZSBpcyBhbiBhbmNob3Jcblx0ICAhZnJhZy5jaGlsZE5vZGVzWzBdLl9fdl9hbmNob3I7XG5cdCAgaWYgKHNpbmdsZSkge1xuXHQgICAgdGhpcy5ub2RlID0gZnJhZy5jaGlsZE5vZGVzWzBdO1xuXHQgICAgdGhpcy5iZWZvcmUgPSBzaW5nbGVCZWZvcmU7XG5cdCAgICB0aGlzLnJlbW92ZSA9IHNpbmdsZVJlbW92ZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhpcy5ub2RlID0gY3JlYXRlQW5jaG9yKCdmcmFnbWVudC1zdGFydCcpO1xuXHQgICAgdGhpcy5lbmQgPSBjcmVhdGVBbmNob3IoJ2ZyYWdtZW50LWVuZCcpO1xuXHQgICAgdGhpcy5mcmFnID0gZnJhZztcblx0ICAgIHByZXBlbmQodGhpcy5ub2RlLCBmcmFnKTtcblx0ICAgIGZyYWcuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xuXHQgICAgdGhpcy5iZWZvcmUgPSBtdWx0aUJlZm9yZTtcblx0ICAgIHRoaXMucmVtb3ZlID0gbXVsdGlSZW1vdmU7XG5cdCAgfVxuXHQgIHRoaXMubm9kZS5fX3ZfZnJhZyA9IHRoaXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDYWxsIGF0dGFjaC9kZXRhY2ggZm9yIGFsbCBjb21wb25lbnRzIGNvbnRhaW5lZCB3aXRoaW5cblx0ICogdGhpcyBmcmFnbWVudC4gQWxzbyBkbyBzbyByZWN1cnNpdmVseSBmb3IgYWxsIGNoaWxkXG5cdCAqIGZyYWdtZW50cy5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaG9va1xuXHQgKi9cblx0XG5cdEZyYWdtZW50LnByb3RvdHlwZS5jYWxsSG9vayA9IGZ1bmN0aW9uIChob29rKSB7XG5cdCAgdmFyIGksIGw7XG5cdCAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHRoaXMuY2hpbGRGcmFnc1tpXS5jYWxsSG9vayhob29rKTtcblx0ICB9XG5cdCAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBob29rKHRoaXMuY2hpbGRyZW5baV0pO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBJbnNlcnQgZnJhZ21lbnQgYmVmb3JlIHRhcmdldCwgc2luZ2xlIG5vZGUgdmVyc2lvblxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHdpdGhUcmFuc2l0aW9uXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2luZ2xlQmVmb3JlKHRhcmdldCwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICB0aGlzLmluc2VydGVkID0gdHJ1ZTtcblx0ICB2YXIgbWV0aG9kID0gd2l0aFRyYW5zaXRpb24gIT09IGZhbHNlID8gYmVmb3JlV2l0aFRyYW5zaXRpb24gOiBiZWZvcmU7XG5cdCAgbWV0aG9kKHRoaXMubm9kZSwgdGFyZ2V0LCB0aGlzLnZtKTtcblx0ICBpZiAoaW5Eb2ModGhpcy5ub2RlKSkge1xuXHQgICAgdGhpcy5jYWxsSG9vayhhdHRhY2gpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBmcmFnbWVudCwgc2luZ2xlIG5vZGUgdmVyc2lvblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHNpbmdsZVJlbW92ZSgpIHtcblx0ICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG5cdCAgdmFyIHNob3VsZENhbGxSZW1vdmUgPSBpbkRvYyh0aGlzLm5vZGUpO1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICB0aGlzLmJlZm9yZVJlbW92ZSgpO1xuXHQgIHJlbW92ZVdpdGhUcmFuc2l0aW9uKHRoaXMubm9kZSwgdGhpcy52bSwgZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKHNob3VsZENhbGxSZW1vdmUpIHtcblx0ICAgICAgc2VsZi5jYWxsSG9vayhkZXRhY2gpO1xuXHQgICAgfVxuXHQgICAgc2VsZi5kZXN0cm95KCk7XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbnNlcnQgZnJhZ21lbnQgYmVmb3JlIHRhcmdldCwgbXVsdGktbm9kZXMgdmVyc2lvblxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHdpdGhUcmFuc2l0aW9uXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbXVsdGlCZWZvcmUodGFyZ2V0LCB3aXRoVHJhbnNpdGlvbikge1xuXHQgIHRoaXMuaW5zZXJ0ZWQgPSB0cnVlO1xuXHQgIHZhciB2bSA9IHRoaXMudm07XG5cdCAgdmFyIG1ldGhvZCA9IHdpdGhUcmFuc2l0aW9uICE9PSBmYWxzZSA/IGJlZm9yZVdpdGhUcmFuc2l0aW9uIDogYmVmb3JlO1xuXHQgIG1hcE5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCBmdW5jdGlvbiAobm9kZSkge1xuXHQgICAgbWV0aG9kKG5vZGUsIHRhcmdldCwgdm0pO1xuXHQgIH0pO1xuXHQgIGlmIChpbkRvYyh0aGlzLm5vZGUpKSB7XG5cdCAgICB0aGlzLmNhbGxIb29rKGF0dGFjaCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGZyYWdtZW50LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbXVsdGlSZW1vdmUoKSB7XG5cdCAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICB2YXIgc2hvdWxkQ2FsbFJlbW92ZSA9IGluRG9jKHRoaXMubm9kZSk7XG5cdCAgdGhpcy5iZWZvcmVSZW1vdmUoKTtcblx0ICByZW1vdmVOb2RlUmFuZ2UodGhpcy5ub2RlLCB0aGlzLmVuZCwgdGhpcy52bSwgdGhpcy5mcmFnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoc2hvdWxkQ2FsbFJlbW92ZSkge1xuXHQgICAgICBzZWxmLmNhbGxIb29rKGRldGFjaCk7XG5cdCAgICB9XG5cdCAgICBzZWxmLmRlc3Ryb3koKTtcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByZXBhcmUgdGhlIGZyYWdtZW50IGZvciByZW1vdmFsLlxuXHQgKi9cblx0XG5cdEZyYWdtZW50LnByb3RvdHlwZS5iZWZvcmVSZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGksIGw7XG5cdCAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIC8vIGNhbGwgdGhlIHNhbWUgbWV0aG9kIHJlY3Vyc2l2ZWx5IG9uIGNoaWxkXG5cdCAgICAvLyBmcmFnbWVudHMsIGRlcHRoLWZpcnN0XG5cdCAgICB0aGlzLmNoaWxkRnJhZ3NbaV0uYmVmb3JlUmVtb3ZlKGZhbHNlKTtcblx0ICB9XG5cdCAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAvLyBDYWxsIGRlc3Ryb3kgZm9yIGFsbCBjb250YWluZWQgaW5zdGFuY2VzLFxuXHQgICAgLy8gd2l0aCByZW1vdmU6ZmFsc2UgYW5kIGRlZmVyOnRydWUuXG5cdCAgICAvLyBEZWZlciBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZSBuZWVkIHRvXG5cdCAgICAvLyBrZWVwIHRoZSBjaGlsZHJlbiB0byBjYWxsIGRldGFjaCBob29rc1xuXHQgICAgLy8gb24gdGhlbS5cblx0ICAgIHRoaXMuY2hpbGRyZW5baV0uJGRlc3Ryb3koZmFsc2UsIHRydWUpO1xuXHQgIH1cblx0ICB2YXIgZGlycyA9IHRoaXMudW5saW5rLmRpcnM7XG5cdCAgZm9yIChpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAvLyBkaXNhYmxlIHRoZSB3YXRjaGVycyBvbiBhbGwgdGhlIGRpcmVjdGl2ZXNcblx0ICAgIC8vIHNvIHRoYXQgdGhlIHJlbmRlcmVkIGNvbnRlbnQgc3RheXMgdGhlIHNhbWVcblx0ICAgIC8vIGR1cmluZyByZW1vdmFsLlxuXHQgICAgZGlyc1tpXS5fd2F0Y2hlciAmJiBkaXJzW2ldLl93YXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIERlc3Ryb3kgdGhlIGZyYWdtZW50LlxuXHQgKi9cblx0XG5cdEZyYWdtZW50LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuXHQgIGlmICh0aGlzLnBhcmVudEZyYWcpIHtcblx0ICAgIHRoaXMucGFyZW50RnJhZy5jaGlsZEZyYWdzLiRyZW1vdmUodGhpcyk7XG5cdCAgfVxuXHQgIHRoaXMubm9kZS5fX3ZfZnJhZyA9IG51bGw7XG5cdCAgdGhpcy51bmxpbmsoKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDYWxsIGF0dGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IGNoaWxkXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXR0YWNoKGNoaWxkKSB7XG5cdCAgaWYgKCFjaGlsZC5faXNBdHRhY2hlZCAmJiBpbkRvYyhjaGlsZC4kZWwpKSB7XG5cdCAgICBjaGlsZC5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ2FsbCBkZXRhY2ggaG9vayBmb3IgYSBWdWUgaW5zdGFuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGRldGFjaChjaGlsZCkge1xuXHQgIGlmIChjaGlsZC5faXNBdHRhY2hlZCAmJiAhaW5Eb2MoY2hpbGQuJGVsKSkge1xuXHQgICAgY2hpbGQuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGxpbmtlckNhY2hlID0gbmV3IENhY2hlKDUwMDApO1xuXHRcblx0LyoqXG5cdCAqIEEgZmFjdG9yeSB0aGF0IGNhbiBiZSB1c2VkIHRvIGNyZWF0ZSBpbnN0YW5jZXMgb2YgYVxuXHQgKiBmcmFnbWVudC4gQ2FjaGVzIHRoZSBjb21waWxlZCBsaW5rZXIgaWYgcG9zc2libGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0VsZW1lbnR8U3RyaW5nfSBlbFxuXHQgKi9cblx0ZnVuY3Rpb24gRnJhZ21lbnRGYWN0b3J5KHZtLCBlbCkge1xuXHQgIHRoaXMudm0gPSB2bTtcblx0ICB2YXIgdGVtcGxhdGU7XG5cdCAgdmFyIGlzU3RyaW5nID0gdHlwZW9mIGVsID09PSAnc3RyaW5nJztcblx0ICBpZiAoaXNTdHJpbmcgfHwgaXNUZW1wbGF0ZShlbCkgJiYgIWVsLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG5cdCAgICB0ZW1wbGF0ZSA9IHBhcnNlVGVtcGxhdGUoZWwsIHRydWUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0ICAgIHRlbXBsYXRlLmFwcGVuZENoaWxkKGVsKTtcblx0ICB9XG5cdCAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuXHQgIC8vIGxpbmtlciBjYW4gYmUgY2FjaGVkLCBidXQgb25seSBmb3IgY29tcG9uZW50c1xuXHQgIHZhciBsaW5rZXI7XG5cdCAgdmFyIGNpZCA9IHZtLmNvbnN0cnVjdG9yLmNpZDtcblx0ICBpZiAoY2lkID4gMCkge1xuXHQgICAgdmFyIGNhY2hlSWQgPSBjaWQgKyAoaXNTdHJpbmcgPyBlbCA6IGdldE91dGVySFRNTChlbCkpO1xuXHQgICAgbGlua2VyID0gbGlua2VyQ2FjaGUuZ2V0KGNhY2hlSWQpO1xuXHQgICAgaWYgKCFsaW5rZXIpIHtcblx0ICAgICAgbGlua2VyID0gY29tcGlsZSh0ZW1wbGF0ZSwgdm0uJG9wdGlvbnMsIHRydWUpO1xuXHQgICAgICBsaW5rZXJDYWNoZS5wdXQoY2FjaGVJZCwgbGlua2VyKTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgbGlua2VyID0gY29tcGlsZSh0ZW1wbGF0ZSwgdm0uJG9wdGlvbnMsIHRydWUpO1xuXHQgIH1cblx0ICB0aGlzLmxpbmtlciA9IGxpbmtlcjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZSBhIGZyYWdtZW50IGluc3RhbmNlIHdpdGggZ2l2ZW4gaG9zdCBhbmQgc2NvcGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSBob3N0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzY29wZVxuXHQgKiBAcGFyYW0ge0ZyYWdtZW50fSBwYXJlbnRGcmFnXG5cdCAqL1xuXHRcblx0RnJhZ21lbnRGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpIHtcblx0ICB2YXIgZnJhZyA9IGNsb25lTm9kZSh0aGlzLnRlbXBsYXRlKTtcblx0ICByZXR1cm4gbmV3IEZyYWdtZW50KHRoaXMubGlua2VyLCB0aGlzLnZtLCBmcmFnLCBob3N0LCBzY29wZSwgcGFyZW50RnJhZyk7XG5cdH07XG5cdFxuXHR2YXIgT04gPSA3MDA7XG5cdHZhciBNT0RFTCA9IDgwMDtcblx0dmFyIEJJTkQgPSA4NTA7XG5cdHZhciBUUkFOU0lUSU9OID0gMTEwMDtcblx0dmFyIEVMID0gMTUwMDtcblx0dmFyIENPTVBPTkVOVCA9IDE1MDA7XG5cdHZhciBQQVJUSUFMID0gMTc1MDtcblx0dmFyIElGID0gMjEwMDtcblx0dmFyIEZPUiA9IDIyMDA7XG5cdHZhciBTTE9UID0gMjMwMDtcblx0XG5cdHZhciB1aWQkMyA9IDA7XG5cdFxuXHR2YXIgdkZvciA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IEZPUixcblx0ICB0ZXJtaW5hbDogdHJ1ZSxcblx0XG5cdCAgcGFyYW1zOiBbJ3RyYWNrLWJ5JywgJ3N0YWdnZXInLCAnZW50ZXItc3RhZ2dlcicsICdsZWF2ZS1zdGFnZ2VyJ10sXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyBzdXBwb3J0IFwiaXRlbSBpbi9vZiBpdGVtc1wiIHN5bnRheFxuXHQgICAgdmFyIGluTWF0Y2ggPSB0aGlzLmV4cHJlc3Npb24ubWF0Y2goLyguKikgKD86aW58b2YpICguKikvKTtcblx0ICAgIGlmIChpbk1hdGNoKSB7XG5cdCAgICAgIHZhciBpdE1hdGNoID0gaW5NYXRjaFsxXS5tYXRjaCgvXFwoKC4qKSwoLiopXFwpLyk7XG5cdCAgICAgIGlmIChpdE1hdGNoKSB7XG5cdCAgICAgICAgdGhpcy5pdGVyYXRvciA9IGl0TWF0Y2hbMV0udHJpbSgpO1xuXHQgICAgICAgIHRoaXMuYWxpYXMgPSBpdE1hdGNoWzJdLnRyaW0oKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmFsaWFzID0gaW5NYXRjaFsxXS50cmltKCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5leHByZXNzaW9uID0gaW5NYXRjaFsyXTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoIXRoaXMuYWxpYXMpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHYtZm9yIGV4cHJlc3Npb24gXCInICsgdGhpcy5kZXNjcmlwdG9yLnJhdyArICdcIjogJyArICdhbGlhcyBpcyByZXF1aXJlZC4nLCB0aGlzLnZtKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHVpZCBhcyBhIGNhY2hlIGlkZW50aWZpZXJcblx0ICAgIHRoaXMuaWQgPSAnX192LWZvcl9fJyArICsrdWlkJDM7XG5cdFxuXHQgICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhbiBvcHRpb24gbGlzdCxcblx0ICAgIC8vIHNvIHRoYXQgd2Uga25vdyBpZiB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgPHNlbGVjdD4nc1xuXHQgICAgLy8gdi1tb2RlbCB3aGVuIHRoZSBvcHRpb24gbGlzdCBoYXMgY2hhbmdlZC5cblx0ICAgIC8vIGJlY2F1c2Ugdi1tb2RlbCBoYXMgYSBsb3dlciBwcmlvcml0eSB0aGFuIHYtZm9yLFxuXHQgICAgLy8gdGhlIHYtbW9kZWwgaXMgbm90IGJvdW5kIGhlcmUgeWV0LCBzbyB3ZSBoYXZlIHRvXG5cdCAgICAvLyByZXRyaXZlIGl0IGluIHRoZSBhY3R1YWwgdXBkYXRlTW9kZWwoKSBmdW5jdGlvbi5cblx0ICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWU7XG5cdCAgICB0aGlzLmlzT3B0aW9uID0gKHRhZyA9PT0gJ09QVElPTicgfHwgdGFnID09PSAnT1BUR1JPVVAnKSAmJiB0aGlzLmVsLnBhcmVudE5vZGUudGFnTmFtZSA9PT0gJ1NFTEVDVCc7XG5cdFxuXHQgICAgLy8gc2V0dXAgYW5jaG9yIG5vZGVzXG5cdCAgICB0aGlzLnN0YXJ0ID0gY3JlYXRlQW5jaG9yKCd2LWZvci1zdGFydCcpO1xuXHQgICAgdGhpcy5lbmQgPSBjcmVhdGVBbmNob3IoJ3YtZm9yLWVuZCcpO1xuXHQgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmVuZCk7XG5cdCAgICBiZWZvcmUodGhpcy5zdGFydCwgdGhpcy5lbmQpO1xuXHRcblx0ICAgIC8vIGNhY2hlXG5cdCAgICB0aGlzLmNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0XG5cdCAgICAvLyBmcmFnbWVudCBmYWN0b3J5XG5cdCAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHRoaXMuZWwpO1xuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGRhdGEpIHtcblx0ICAgIHRoaXMuZGlmZihkYXRhKTtcblx0ICAgIHRoaXMudXBkYXRlUmVmKCk7XG5cdCAgICB0aGlzLnVwZGF0ZU1vZGVsKCk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRGlmZiwgYmFzZWQgb24gbmV3IGRhdGEgYW5kIG9sZCBkYXRhLCBkZXRlcm1pbmUgdGhlXG5cdCAgICogbWluaW11bSBhbW91bnQgb2YgRE9NIG1hbmlwdWxhdGlvbnMgbmVlZGVkIHRvIG1ha2UgdGhlXG5cdCAgICogRE9NIHJlZmxlY3QgdGhlIG5ldyBkYXRhIEFycmF5LlxuXHQgICAqXG5cdCAgICogVGhlIGFsZ29yaXRobSBkaWZmcyB0aGUgbmV3IGRhdGEgQXJyYXkgYnkgc3RvcmluZyBhXG5cdCAgICogaGlkZGVuIHJlZmVyZW5jZSB0byBhbiBvd25lciB2bSBpbnN0YW5jZSBvbiBwcmV2aW91c2x5XG5cdCAgICogc2VlbiBkYXRhLiBUaGlzIGFsbG93cyB1cyB0byBhY2hpZXZlIE8obikgd2hpY2ggaXNcblx0ICAgKiBiZXR0ZXIgdGhhbiBhIGxldmVuc2h0ZWluIGRpc3RhbmNlIGJhc2VkIGFsZ29yaXRobSxcblx0ICAgKiB3aGljaCBpcyBPKG0gKiBuKS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7QXJyYXl9IGRhdGFcblx0ICAgKi9cblx0XG5cdCAgZGlmZjogZnVuY3Rpb24gZGlmZihkYXRhKSB7XG5cdCAgICAvLyBjaGVjayBpZiB0aGUgQXJyYXkgd2FzIGNvbnZlcnRlZCBmcm9tIGFuIE9iamVjdFxuXHQgICAgdmFyIGl0ZW0gPSBkYXRhWzBdO1xuXHQgICAgdmFyIGNvbnZlcnRlZEZyb21PYmplY3QgPSB0aGlzLmZyb21PYmplY3QgPSBpc09iamVjdChpdGVtKSAmJiBoYXNPd24oaXRlbSwgJyRrZXknKSAmJiBoYXNPd24oaXRlbSwgJyR2YWx1ZScpO1xuXHRcblx0ICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcblx0ICAgIHZhciBvbGRGcmFncyA9IHRoaXMuZnJhZ3M7XG5cdCAgICB2YXIgZnJhZ3MgPSB0aGlzLmZyYWdzID0gbmV3IEFycmF5KGRhdGEubGVuZ3RoKTtcblx0ICAgIHZhciBhbGlhcyA9IHRoaXMuYWxpYXM7XG5cdCAgICB2YXIgaXRlcmF0b3IgPSB0aGlzLml0ZXJhdG9yO1xuXHQgICAgdmFyIHN0YXJ0ID0gdGhpcy5zdGFydDtcblx0ICAgIHZhciBlbmQgPSB0aGlzLmVuZDtcblx0ICAgIHZhciBpbkRvY3VtZW50ID0gaW5Eb2Moc3RhcnQpO1xuXHQgICAgdmFyIGluaXQgPSAhb2xkRnJhZ3M7XG5cdCAgICB2YXIgaSwgbCwgZnJhZywga2V5LCB2YWx1ZSwgcHJpbWl0aXZlO1xuXHRcblx0ICAgIC8vIEZpcnN0IHBhc3MsIGdvIHRocm91Z2ggdGhlIG5ldyBBcnJheSBhbmQgZmlsbCB1cFxuXHQgICAgLy8gdGhlIG5ldyBmcmFncyBhcnJheS4gSWYgYSBwaWVjZSBvZiBkYXRhIGhhcyBhIGNhY2hlZFxuXHQgICAgLy8gaW5zdGFuY2UgZm9yIGl0LCB3ZSByZXVzZSBpdC4gT3RoZXJ3aXNlIGJ1aWxkIGEgbmV3XG5cdCAgICAvLyBpbnN0YW5jZS5cblx0ICAgIGZvciAoaSA9IDAsIGwgPSBkYXRhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBpdGVtID0gZGF0YVtpXTtcblx0ICAgICAga2V5ID0gY29udmVydGVkRnJvbU9iamVjdCA/IGl0ZW0uJGtleSA6IG51bGw7XG5cdCAgICAgIHZhbHVlID0gY29udmVydGVkRnJvbU9iamVjdCA/IGl0ZW0uJHZhbHVlIDogaXRlbTtcblx0ICAgICAgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcblx0ICAgICAgZnJhZyA9ICFpbml0ICYmIHRoaXMuZ2V0Q2FjaGVkRnJhZyh2YWx1ZSwgaSwga2V5KTtcblx0ICAgICAgaWYgKGZyYWcpIHtcblx0ICAgICAgICAvLyByZXVzYWJsZSBmcmFnbWVudFxuXHQgICAgICAgIGZyYWcucmV1c2VkID0gdHJ1ZTtcblx0ICAgICAgICAvLyB1cGRhdGUgJGluZGV4XG5cdCAgICAgICAgZnJhZy5zY29wZS4kaW5kZXggPSBpO1xuXHQgICAgICAgIC8vIHVwZGF0ZSAka2V5XG5cdCAgICAgICAgaWYgKGtleSkge1xuXHQgICAgICAgICAgZnJhZy5zY29wZS4ka2V5ID0ga2V5O1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyB1cGRhdGUgaXRlcmF0b3Jcblx0ICAgICAgICBpZiAoaXRlcmF0b3IpIHtcblx0ICAgICAgICAgIGZyYWcuc2NvcGVbaXRlcmF0b3JdID0ga2V5ICE9PSBudWxsID8ga2V5IDogaTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gdXBkYXRlIGRhdGEgZm9yIHRyYWNrLWJ5LCBvYmplY3QgcmVwZWF0ICZcblx0ICAgICAgICAvLyBwcmltaXRpdmUgdmFsdWVzLlxuXHQgICAgICAgIGlmICh0cmFja0J5S2V5IHx8IGNvbnZlcnRlZEZyb21PYmplY3QgfHwgcHJpbWl0aXZlKSB7XG5cdCAgICAgICAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIGZyYWcuc2NvcGVbYWxpYXNdID0gdmFsdWU7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gbmV3IGlzbnRhbmNlXG5cdCAgICAgICAgZnJhZyA9IHRoaXMuY3JlYXRlKHZhbHVlLCBhbGlhcywgaSwga2V5KTtcblx0ICAgICAgICBmcmFnLmZyZXNoID0gIWluaXQ7XG5cdCAgICAgIH1cblx0ICAgICAgZnJhZ3NbaV0gPSBmcmFnO1xuXHQgICAgICBpZiAoaW5pdCkge1xuXHQgICAgICAgIGZyYWcuYmVmb3JlKGVuZCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyB3ZSdyZSBkb25lIGZvciB0aGUgaW5pdGlhbCByZW5kZXIuXG5cdCAgICBpZiAoaW5pdCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gU2Vjb25kIHBhc3MsIGdvIHRocm91Z2ggdGhlIG9sZCBmcmFnbWVudHMgYW5kXG5cdCAgICAvLyBkZXN0cm95IHRob3NlIHdobyBhcmUgbm90IHJldXNlZCAoYW5kIHJlbW92ZSB0aGVtXG5cdCAgICAvLyBmcm9tIGNhY2hlKVxuXHQgICAgdmFyIHJlbW92YWxJbmRleCA9IDA7XG5cdCAgICB2YXIgdG90YWxSZW1vdmVkID0gb2xkRnJhZ3MubGVuZ3RoIC0gZnJhZ3MubGVuZ3RoO1xuXHQgICAgLy8gd2hlbiByZW1vdmluZyBhIGxhcmdlIG51bWJlciBvZiBmcmFnbWVudHMsIHdhdGNoZXIgcmVtb3ZhbFxuXHQgICAgLy8gdHVybnMgb3V0IHRvIGJlIGEgcGVyZiBib3R0bGVuZWNrLCBzbyB3ZSBiYXRjaCB0aGUgd2F0Y2hlclxuXHQgICAgLy8gcmVtb3ZhbHMgaW50byBhIHNpbmdsZSBmaWx0ZXIgY2FsbCFcblx0ICAgIHRoaXMudm0uX3ZGb3JSZW1vdmluZyA9IHRydWU7XG5cdCAgICBmb3IgKGkgPSAwLCBsID0gb2xkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGZyYWcgPSBvbGRGcmFnc1tpXTtcblx0ICAgICAgaWYgKCFmcmFnLnJldXNlZCkge1xuXHQgICAgICAgIHRoaXMuZGVsZXRlQ2FjaGVkRnJhZyhmcmFnKTtcblx0ICAgICAgICB0aGlzLnJlbW92ZShmcmFnLCByZW1vdmFsSW5kZXgrKywgdG90YWxSZW1vdmVkLCBpbkRvY3VtZW50KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdGhpcy52bS5fdkZvclJlbW92aW5nID0gZmFsc2U7XG5cdCAgICBpZiAocmVtb3ZhbEluZGV4KSB7XG5cdCAgICAgIHRoaXMudm0uX3dhdGNoZXJzID0gdGhpcy52bS5fd2F0Y2hlcnMuZmlsdGVyKGZ1bmN0aW9uICh3KSB7XG5cdCAgICAgICAgcmV0dXJuIHcuYWN0aXZlO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBGaW5hbCBwYXNzLCBtb3ZlL2luc2VydCBuZXcgZnJhZ21lbnRzIGludG8gdGhlXG5cdCAgICAvLyByaWdodCBwbGFjZS5cblx0ICAgIHZhciB0YXJnZXRQcmV2LCBwcmV2RWwsIGN1cnJlbnRQcmV2O1xuXHQgICAgdmFyIGluc2VydGlvbkluZGV4ID0gMDtcblx0ICAgIGZvciAoaSA9IDAsIGwgPSBmcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgZnJhZyA9IGZyYWdzW2ldO1xuXHQgICAgICAvLyB0aGlzIGlzIHRoZSBmcmFnIHRoYXQgd2Ugc2hvdWxkIGJlIGFmdGVyXG5cdCAgICAgIHRhcmdldFByZXYgPSBmcmFnc1tpIC0gMV07XG5cdCAgICAgIHByZXZFbCA9IHRhcmdldFByZXYgPyB0YXJnZXRQcmV2LnN0YWdnZXJDYiA/IHRhcmdldFByZXYuc3RhZ2dlckFuY2hvciA6IHRhcmdldFByZXYuZW5kIHx8IHRhcmdldFByZXYubm9kZSA6IHN0YXJ0O1xuXHQgICAgICBpZiAoZnJhZy5yZXVzZWQgJiYgIWZyYWcuc3RhZ2dlckNiKSB7XG5cdCAgICAgICAgY3VycmVudFByZXYgPSBmaW5kUHJldkZyYWcoZnJhZywgc3RhcnQsIHRoaXMuaWQpO1xuXHQgICAgICAgIGlmIChjdXJyZW50UHJldiAhPT0gdGFyZ2V0UHJldiAmJiAoIWN1cnJlbnRQcmV2IHx8XG5cdCAgICAgICAgLy8gb3B0aW1pemF0aW9uIGZvciBtb3ZpbmcgYSBzaW5nbGUgaXRlbS5cblx0ICAgICAgICAvLyB0aGFua3MgdG8gc3VnZ2VzdGlvbnMgYnkgQGxpdm9yYXMgaW4gIzE4MDdcblx0ICAgICAgICBmaW5kUHJldkZyYWcoY3VycmVudFByZXYsIHN0YXJ0LCB0aGlzLmlkKSAhPT0gdGFyZ2V0UHJldikpIHtcblx0ICAgICAgICAgIHRoaXMubW92ZShmcmFnLCBwcmV2RWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBuZXcgaW5zdGFuY2UsIG9yIHN0aWxsIGluIHN0YWdnZXIuXG5cdCAgICAgICAgLy8gaW5zZXJ0IHdpdGggdXBkYXRlZCBzdGFnZ2VyIGluZGV4LlxuXHQgICAgICAgIHRoaXMuaW5zZXJ0KGZyYWcsIGluc2VydGlvbkluZGV4KyssIHByZXZFbCwgaW5Eb2N1bWVudCk7XG5cdCAgICAgIH1cblx0ICAgICAgZnJhZy5yZXVzZWQgPSBmcmFnLmZyZXNoID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ3JlYXRlIGEgbmV3IGZyYWdtZW50IGluc3RhbmNlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBhbGlhc1xuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuXHQgICAqIEByZXR1cm4ge0ZyYWdtZW50fVxuXHQgICAqL1xuXHRcblx0ICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZSh2YWx1ZSwgYWxpYXMsIGluZGV4LCBrZXkpIHtcblx0ICAgIHZhciBob3N0ID0gdGhpcy5faG9zdDtcblx0ICAgIC8vIGNyZWF0ZSBpdGVyYXRpb24gc2NvcGVcblx0ICAgIHZhciBwYXJlbnRTY29wZSA9IHRoaXMuX3Njb3BlIHx8IHRoaXMudm07XG5cdCAgICB2YXIgc2NvcGUgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlKTtcblx0ICAgIC8vIHJlZiBob2xkZXIgZm9yIHRoZSBzY29wZVxuXHQgICAgc2NvcGUuJHJlZnMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlLiRyZWZzKTtcblx0ICAgIHNjb3BlLiRlbHMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlLiRlbHMpO1xuXHQgICAgLy8gbWFrZSBzdXJlIHBvaW50ICRwYXJlbnQgdG8gcGFyZW50IHNjb3BlXG5cdCAgICBzY29wZS4kcGFyZW50ID0gcGFyZW50U2NvcGU7XG5cdCAgICAvLyBmb3IgdHdvLXdheSBiaW5kaW5nIG9uIGFsaWFzXG5cdCAgICBzY29wZS4kZm9yQ29udGV4dCA9IHRoaXM7XG5cdCAgICAvLyBkZWZpbmUgc2NvcGUgcHJvcGVydGllc1xuXHQgICAgLy8gaW1wb3J0YW50OiBkZWZpbmUgdGhlIHNjb3BlIGFsaWFzIHdpdGhvdXQgZm9yY2VkIGNvbnZlcnNpb25cblx0ICAgIC8vIHNvIHRoYXQgZnJvemVuIGRhdGEgc3RydWN0dXJlcyByZW1haW4gbm9uLXJlYWN0aXZlLlxuXHQgICAgd2l0aG91dENvbnZlcnNpb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgYWxpYXMsIHZhbHVlKTtcblx0ICAgIH0pO1xuXHQgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsICckaW5kZXgnLCBpbmRleCk7XG5cdCAgICBpZiAoa2V5KSB7XG5cdCAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCAnJGtleScsIGtleSk7XG5cdCAgICB9IGVsc2UgaWYgKHNjb3BlLiRrZXkpIHtcblx0ICAgICAgLy8gYXZvaWQgYWNjaWRlbnRhbCBmYWxsYmFja1xuXHQgICAgICBkZWYoc2NvcGUsICcka2V5JywgbnVsbCk7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5pdGVyYXRvcikge1xuXHQgICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgdGhpcy5pdGVyYXRvciwga2V5ICE9PSBudWxsID8ga2V5IDogaW5kZXgpO1xuXHQgICAgfVxuXHQgICAgdmFyIGZyYWcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKGhvc3QsIHNjb3BlLCB0aGlzLl9mcmFnKTtcblx0ICAgIGZyYWcuZm9ySWQgPSB0aGlzLmlkO1xuXHQgICAgdGhpcy5jYWNoZUZyYWcodmFsdWUsIGZyYWcsIGluZGV4LCBrZXkpO1xuXHQgICAgcmV0dXJuIGZyYWc7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogVXBkYXRlIHRoZSB2LXJlZiBvbiBvd25lciB2bS5cblx0ICAgKi9cblx0XG5cdCAgdXBkYXRlUmVmOiBmdW5jdGlvbiB1cGRhdGVSZWYoKSB7XG5cdCAgICB2YXIgcmVmID0gdGhpcy5kZXNjcmlwdG9yLnJlZjtcblx0ICAgIGlmICghcmVmKSByZXR1cm47XG5cdCAgICB2YXIgaGFzaCA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kcmVmcztcblx0ICAgIHZhciByZWZzO1xuXHQgICAgaWYgKCF0aGlzLmZyb21PYmplY3QpIHtcblx0ICAgICAgcmVmcyA9IHRoaXMuZnJhZ3MubWFwKGZpbmRWbUZyb21GcmFnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJlZnMgPSB7fTtcblx0ICAgICAgdGhpcy5mcmFncy5mb3JFYWNoKGZ1bmN0aW9uIChmcmFnKSB7XG5cdCAgICAgICAgcmVmc1tmcmFnLnNjb3BlLiRrZXldID0gZmluZFZtRnJvbUZyYWcoZnJhZyk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgICAgaGFzaFtyZWZdID0gcmVmcztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBGb3Igb3B0aW9uIGxpc3RzLCB1cGRhdGUgdGhlIGNvbnRhaW5pbmcgdi1tb2RlbCBvblxuXHQgICAqIHBhcmVudCA8c2VsZWN0Pi5cblx0ICAgKi9cblx0XG5cdCAgdXBkYXRlTW9kZWw6IGZ1bmN0aW9uIHVwZGF0ZU1vZGVsKCkge1xuXHQgICAgaWYgKHRoaXMuaXNPcHRpb24pIHtcblx0ICAgICAgdmFyIHBhcmVudCA9IHRoaXMuc3RhcnQucGFyZW50Tm9kZTtcblx0ICAgICAgdmFyIG1vZGVsID0gcGFyZW50ICYmIHBhcmVudC5fX3ZfbW9kZWw7XG5cdCAgICAgIGlmIChtb2RlbCkge1xuXHQgICAgICAgIG1vZGVsLmZvcmNlVXBkYXRlKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBJbnNlcnQgYSBmcmFnbWVudC4gSGFuZGxlcyBzdGFnZ2VyaW5nLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gcHJldkVsXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBpbkRvY3VtZW50XG5cdCAgICovXG5cdFxuXHQgIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KGZyYWcsIGluZGV4LCBwcmV2RWwsIGluRG9jdW1lbnQpIHtcblx0ICAgIGlmIChmcmFnLnN0YWdnZXJDYikge1xuXHQgICAgICBmcmFnLnN0YWdnZXJDYi5jYW5jZWwoKTtcblx0ICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgdmFyIHN0YWdnZXJBbW91bnQgPSB0aGlzLmdldFN0YWdnZXIoZnJhZywgaW5kZXgsIG51bGwsICdlbnRlcicpO1xuXHQgICAgaWYgKGluRG9jdW1lbnQgJiYgc3RhZ2dlckFtb3VudCkge1xuXHQgICAgICAvLyBjcmVhdGUgYW4gYW5jaG9yIGFuZCBpbnNlcnQgaXQgc3luY2hyb25vdXNseSxcblx0ICAgICAgLy8gc28gdGhhdCB3ZSBjYW4gcmVzb2x2ZSB0aGUgY29ycmVjdCBvcmRlciB3aXRob3V0XG5cdCAgICAgIC8vIHdvcnJ5aW5nIGFib3V0IHNvbWUgZWxlbWVudHMgbm90IGluc2VydGVkIHlldFxuXHQgICAgICB2YXIgYW5jaG9yID0gZnJhZy5zdGFnZ2VyQW5jaG9yO1xuXHQgICAgICBpZiAoIWFuY2hvcikge1xuXHQgICAgICAgIGFuY2hvciA9IGZyYWcuc3RhZ2dlckFuY2hvciA9IGNyZWF0ZUFuY2hvcignc3RhZ2dlci1hbmNob3InKTtcblx0ICAgICAgICBhbmNob3IuX192X2ZyYWcgPSBmcmFnO1xuXHQgICAgICB9XG5cdCAgICAgIGFmdGVyKGFuY2hvciwgcHJldkVsKTtcblx0ICAgICAgdmFyIG9wID0gZnJhZy5zdGFnZ2VyQ2IgPSBjYW5jZWxsYWJsZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuXHQgICAgICAgIGZyYWcuYmVmb3JlKGFuY2hvcik7XG5cdCAgICAgICAgcmVtb3ZlKGFuY2hvcik7XG5cdCAgICAgIH0pO1xuXHQgICAgICBzZXRUaW1lb3V0KG9wLCBzdGFnZ2VyQW1vdW50KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciB0YXJnZXQgPSBwcmV2RWwubmV4dFNpYmxpbmc7XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoIXRhcmdldCkge1xuXHQgICAgICAgIC8vIHJlc2V0IGVuZCBhbmNob3IgcG9zaXRpb24gaW4gY2FzZSB0aGUgcG9zaXRpb24gd2FzIG1lc3NlZCB1cFxuXHQgICAgICAgIC8vIGJ5IGFuIGV4dGVybmFsIGRyYWctbi1kcm9wIGxpYnJhcnkuXG5cdCAgICAgICAgYWZ0ZXIodGhpcy5lbmQsIHByZXZFbCk7XG5cdCAgICAgICAgdGFyZ2V0ID0gdGhpcy5lbmQ7XG5cdCAgICAgIH1cblx0ICAgICAgZnJhZy5iZWZvcmUodGFyZ2V0KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBSZW1vdmUgYSBmcmFnbWVudC4gSGFuZGxlcyBzdGFnZ2VyaW5nLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSB0b3RhbFxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5Eb2N1bWVudFxuXHQgICAqL1xuXHRcblx0ICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShmcmFnLCBpbmRleCwgdG90YWwsIGluRG9jdW1lbnQpIHtcblx0ICAgIGlmIChmcmFnLnN0YWdnZXJDYikge1xuXHQgICAgICBmcmFnLnN0YWdnZXJDYi5jYW5jZWwoKTtcblx0ICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuXHQgICAgICAvLyBpdCdzIG5vdCBwb3NzaWJsZSBmb3IgdGhlIHNhbWUgZnJhZyB0byBiZSByZW1vdmVkXG5cdCAgICAgIC8vIHR3aWNlLCBzbyBpZiB3ZSBoYXZlIGEgcGVuZGluZyBzdGFnZ2VyIGNhbGxiYWNrLFxuXHQgICAgICAvLyBpdCBtZWFucyB0aGlzIGZyYWcgaXMgcXVldWVkIGZvciBlbnRlciBidXQgcmVtb3ZlZFxuXHQgICAgICAvLyBiZWZvcmUgaXRzIHRyYW5zaXRpb24gc3RhcnRlZC4gU2luY2UgaXQgaXMgYWxyZWFkeVxuXHQgICAgICAvLyBkZXN0cm95ZWQsIHdlIGNhbiBqdXN0IGxlYXZlIGl0IGluIGRldGFjaGVkIHN0YXRlLlxuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgc3RhZ2dlckFtb3VudCA9IHRoaXMuZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgdG90YWwsICdsZWF2ZScpO1xuXHQgICAgaWYgKGluRG9jdW1lbnQgJiYgc3RhZ2dlckFtb3VudCkge1xuXHQgICAgICB2YXIgb3AgPSBmcmFnLnN0YWdnZXJDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG5cdCAgICAgICAgZnJhZy5yZW1vdmUoKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHNldFRpbWVvdXQob3AsIHN0YWdnZXJBbW91bnQpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZnJhZy5yZW1vdmUoKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBNb3ZlIGEgZnJhZ21lbnQgdG8gYSBuZXcgcG9zaXRpb24uXG5cdCAgICogRm9yY2Ugbm8gdHJhbnNpdGlvbi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICAgKiBAcGFyYW0ge05vZGV9IHByZXZFbFxuXHQgICAqL1xuXHRcblx0ICBtb3ZlOiBmdW5jdGlvbiBtb3ZlKGZyYWcsIHByZXZFbCkge1xuXHQgICAgLy8gZml4IGEgY29tbW9uIGlzc3VlIHdpdGggU29ydGFibGU6XG5cdCAgICAvLyBpZiBwcmV2RWwgZG9lc24ndCBoYXZlIG5leHRTaWJsaW5nLCB0aGlzIG1lYW5zIGl0J3Ncblx0ICAgIC8vIGJlZW4gZHJhZ2dlZCBhZnRlciB0aGUgZW5kIGFuY2hvci4gSnVzdCByZS1wb3NpdGlvblxuXHQgICAgLy8gdGhlIGVuZCBhbmNob3IgdG8gdGhlIGVuZCBvZiB0aGUgY29udGFpbmVyLlxuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoIXByZXZFbC5uZXh0U2libGluZykge1xuXHQgICAgICB0aGlzLmVuZC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMuZW5kKTtcblx0ICAgIH1cblx0ICAgIGZyYWcuYmVmb3JlKHByZXZFbC5uZXh0U2libGluZywgZmFsc2UpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENhY2hlIGEgZnJhZ21lbnQgdXNpbmcgdHJhY2stYnkgb3IgdGhlIG9iamVjdCBrZXkuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuXHQgICAqL1xuXHRcblx0ICBjYWNoZUZyYWc6IGZ1bmN0aW9uIGNhY2hlRnJhZyh2YWx1ZSwgZnJhZywgaW5kZXgsIGtleSkge1xuXHQgICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuXHQgICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZTtcblx0ICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuXHQgICAgdmFyIGlkO1xuXHQgICAgaWYgKGtleSB8fCB0cmFja0J5S2V5IHx8IHByaW1pdGl2ZSkge1xuXHQgICAgICBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xuXHQgICAgICBpZiAoIWNhY2hlW2lkXSkge1xuXHQgICAgICAgIGNhY2hlW2lkXSA9IGZyYWc7XG5cdCAgICAgIH0gZWxzZSBpZiAodHJhY2tCeUtleSAhPT0gJyRpbmRleCcpIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlkID0gdGhpcy5pZDtcblx0ICAgICAgaWYgKGhhc093bih2YWx1ZSwgaWQpKSB7XG5cdCAgICAgICAgaWYgKHZhbHVlW2lkXSA9PT0gbnVsbCkge1xuXHQgICAgICAgICAgdmFsdWVbaWRdID0gZnJhZztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmIChPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSkge1xuXHQgICAgICAgIGRlZih2YWx1ZSwgaWQsIGZyYWcpO1xuXHQgICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICB3YXJuKCdGcm96ZW4gdi1mb3Igb2JqZWN0cyBjYW5ub3QgYmUgYXV0b21hdGljYWxseSB0cmFja2VkLCBtYWtlIHN1cmUgdG8gJyArICdwcm92aWRlIGEgdHJhY2stYnkga2V5LicpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBmcmFnLnJhdyA9IHZhbHVlO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEdldCBhIGNhY2hlZCBmcmFnbWVudCBmcm9tIHRoZSB2YWx1ZS9pbmRleC9rZXlcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAgICogQHJldHVybiB7RnJhZ21lbnR9XG5cdCAgICovXG5cdFxuXHQgIGdldENhY2hlZEZyYWc6IGZ1bmN0aW9uIGdldENhY2hlZEZyYWcodmFsdWUsIGluZGV4LCBrZXkpIHtcblx0ICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcblx0ICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuXHQgICAgdmFyIGZyYWc7XG5cdCAgICBpZiAoa2V5IHx8IHRyYWNrQnlLZXkgfHwgcHJpbWl0aXZlKSB7XG5cdCAgICAgIHZhciBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xuXHQgICAgICBmcmFnID0gdGhpcy5jYWNoZVtpZF07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBmcmFnID0gdmFsdWVbdGhpcy5pZF07XG5cdCAgICB9XG5cdCAgICBpZiAoZnJhZyAmJiAoZnJhZy5yZXVzZWQgfHwgZnJhZy5mcmVzaCkpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZyYWc7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRGVsZXRlIGEgZnJhZ21lbnQgZnJvbSBjYWNoZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICAgKi9cblx0XG5cdCAgZGVsZXRlQ2FjaGVkRnJhZzogZnVuY3Rpb24gZGVsZXRlQ2FjaGVkRnJhZyhmcmFnKSB7XG5cdCAgICB2YXIgdmFsdWUgPSBmcmFnLnJhdztcblx0ICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcblx0ICAgIHZhciBzY29wZSA9IGZyYWcuc2NvcGU7XG5cdCAgICB2YXIgaW5kZXggPSBzY29wZS4kaW5kZXg7XG5cdCAgICAvLyBmaXggIzk0ODogYXZvaWQgYWNjaWRlbnRhbGx5IGZhbGwgdGhyb3VnaCB0b1xuXHQgICAgLy8gYSBwYXJlbnQgcmVwZWF0ZXIgd2hpY2ggaGFwcGVucyB0byBoYXZlICRrZXkuXG5cdCAgICB2YXIga2V5ID0gaGFzT3duKHNjb3BlLCAnJGtleScpICYmIHNjb3BlLiRrZXk7XG5cdCAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcblx0ICAgIGlmICh0cmFja0J5S2V5IHx8IGtleSB8fCBwcmltaXRpdmUpIHtcblx0ICAgICAgdmFyIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG5cdCAgICAgIHRoaXMuY2FjaGVbaWRdID0gbnVsbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhbHVlW3RoaXMuaWRdID0gbnVsbDtcblx0ICAgICAgZnJhZy5yYXcgPSBudWxsO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEdldCB0aGUgc3RhZ2dlciBhbW91bnQgZm9yIGFuIGluc2VydGlvbi9yZW1vdmFsLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSB0b3RhbFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG5cdCAgICovXG5cdFxuXHQgIGdldFN0YWdnZXI6IGZ1bmN0aW9uIGdldFN0YWdnZXIoZnJhZywgaW5kZXgsIHRvdGFsLCB0eXBlKSB7XG5cdCAgICB0eXBlID0gdHlwZSArICdTdGFnZ2VyJztcblx0ICAgIHZhciB0cmFucyA9IGZyYWcubm9kZS5fX3ZfdHJhbnM7XG5cdCAgICB2YXIgaG9va3MgPSB0cmFucyAmJiB0cmFucy5ob29rcztcblx0ICAgIHZhciBob29rID0gaG9va3MgJiYgKGhvb2tzW3R5cGVdIHx8IGhvb2tzLnN0YWdnZXIpO1xuXHQgICAgcmV0dXJuIGhvb2sgPyBob29rLmNhbGwoZnJhZywgaW5kZXgsIHRvdGFsKSA6IGluZGV4ICogcGFyc2VJbnQodGhpcy5wYXJhbXNbdHlwZV0gfHwgdGhpcy5wYXJhbXMuc3RhZ2dlciwgMTApO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFByZS1wcm9jZXNzIHRoZSB2YWx1ZSBiZWZvcmUgcGlwaW5nIGl0IHRocm91Z2ggdGhlXG5cdCAgICogZmlsdGVycy4gVGhpcyBpcyBwYXNzZWQgdG8gYW5kIGNhbGxlZCBieSB0aGUgd2F0Y2hlci5cblx0ICAgKi9cblx0XG5cdCAgX3ByZVByb2Nlc3M6IGZ1bmN0aW9uIF9wcmVQcm9jZXNzKHZhbHVlKSB7XG5cdCAgICAvLyByZWdhcmRsZXNzIG9mIHR5cGUsIHN0b3JlIHRoZSB1bi1maWx0ZXJlZCByYXcgdmFsdWUuXG5cdCAgICB0aGlzLnJhd1ZhbHVlID0gdmFsdWU7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUG9zdC1wcm9jZXNzIHRoZSB2YWx1ZSBhZnRlciBpdCBoYXMgYmVlbiBwaXBlZCB0aHJvdWdoXG5cdCAgICogdGhlIGZpbHRlcnMuIFRoaXMgaXMgcGFzc2VkIHRvIGFuZCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIuXG5cdCAgICpcblx0ICAgKiBJdCBpcyBuZWNlc3NhcnkgZm9yIHRoaXMgdG8gYmUgY2FsbGVkIGR1cmluZyB0aGVcblx0ICAgKiB3YXRjaGVyJ3MgZGVwZW5kZW5jeSBjb2xsZWN0aW9uIHBoYXNlIGJlY2F1c2Ugd2Ugd2FudFxuXHQgICAqIHRoZSB2LWZvciB0byB1cGRhdGUgd2hlbiB0aGUgc291cmNlIE9iamVjdCBpcyBtdXRhdGVkLlxuXHQgICAqL1xuXHRcblx0ICBfcG9zdFByb2Nlc3M6IGZ1bmN0aW9uIF9wb3N0UHJvY2Vzcyh2YWx1ZSkge1xuXHQgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcblx0ICAgICAgLy8gY29udmVydCBwbGFpbiBvYmplY3QgdG8gYXJyYXkuXG5cdCAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuXHQgICAgICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgICB2YXIgcmVzID0gbmV3IEFycmF5KGkpO1xuXHQgICAgICB2YXIga2V5O1xuXHQgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgICByZXNbaV0gPSB7XG5cdCAgICAgICAgICAka2V5OiBrZXksXG5cdCAgICAgICAgICAkdmFsdWU6IHZhbHVlW2tleV1cblx0ICAgICAgICB9O1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiByZXM7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiAhaXNOYU4odmFsdWUpKSB7XG5cdCAgICAgICAgdmFsdWUgPSByYW5nZSh2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHZhbHVlIHx8IFtdO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgaWYgKHRoaXMuZGVzY3JpcHRvci5yZWYpIHtcblx0ICAgICAgKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRyZWZzW3RoaXMuZGVzY3JpcHRvci5yZWZdID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLmZyYWdzKSB7XG5cdCAgICAgIHZhciBpID0gdGhpcy5mcmFncy5sZW5ndGg7XG5cdCAgICAgIHZhciBmcmFnO1xuXHQgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAgZnJhZyA9IHRoaXMuZnJhZ3NbaV07XG5cdCAgICAgICAgdGhpcy5kZWxldGVDYWNoZWRGcmFnKGZyYWcpO1xuXHQgICAgICAgIGZyYWcuZGVzdHJveSgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEhlbHBlciB0byBmaW5kIHRoZSBwcmV2aW91cyBlbGVtZW50IHRoYXQgaXMgYSBmcmFnbWVudFxuXHQgKiBhbmNob3IuIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYSBkZXN0cm95ZWQgZnJhZydzXG5cdCAqIGVsZW1lbnQgY291bGQgc3RpbGwgYmUgbGluZ2VyaW5nIGluIHRoZSBET00gYmVmb3JlIGl0c1xuXHQgKiBsZWF2aW5nIHRyYW5zaXRpb24gZmluaXNoZXMsIGJ1dCBpdHMgaW5zZXJ0ZWQgZmxhZ1xuXHQgKiBzaG91bGQgaGF2ZSBiZWVuIHNldCB0byBmYWxzZSBzbyB3ZSBjYW4gc2tpcCB0aGVtLlxuXHQgKlxuXHQgKiBJZiB0aGlzIGlzIGEgYmxvY2sgcmVwZWF0LCB3ZSB3YW50IHRvIG1ha2Ugc3VyZSB3ZSBvbmx5XG5cdCAqIHJldHVybiBmcmFnIHRoYXQgaXMgYm91bmQgdG8gdGhpcyB2LWZvci4gKHNlZSAjOTI5KVxuXHQgKlxuXHQgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAqIEBwYXJhbSB7Q29tbWVudHxUZXh0fSBhbmNob3Jcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlkXG5cdCAqIEByZXR1cm4ge0ZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZpbmRQcmV2RnJhZyhmcmFnLCBhbmNob3IsIGlkKSB7XG5cdCAgdmFyIGVsID0gZnJhZy5ub2RlLnByZXZpb3VzU2libGluZztcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoIWVsKSByZXR1cm47XG5cdCAgZnJhZyA9IGVsLl9fdl9mcmFnO1xuXHQgIHdoaWxlICgoIWZyYWcgfHwgZnJhZy5mb3JJZCAhPT0gaWQgfHwgIWZyYWcuaW5zZXJ0ZWQpICYmIGVsICE9PSBhbmNob3IpIHtcblx0ICAgIGVsID0gZWwucHJldmlvdXNTaWJsaW5nO1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoIWVsKSByZXR1cm47XG5cdCAgICBmcmFnID0gZWwuX192X2ZyYWc7XG5cdCAgfVxuXHQgIHJldHVybiBmcmFnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRmluZCBhIHZtIGZyb20gYSBmcmFnbWVudC5cblx0ICpcblx0ICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgKiBAcmV0dXJuIHtWdWV8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZpbmRWbUZyb21GcmFnKGZyYWcpIHtcblx0ICB2YXIgbm9kZSA9IGZyYWcubm9kZTtcblx0ICAvLyBoYW5kbGUgbXVsdGktbm9kZSBmcmFnXG5cdCAgaWYgKGZyYWcuZW5kKSB7XG5cdCAgICB3aGlsZSAoIW5vZGUuX192dWVfXyAmJiBub2RlICE9PSBmcmFnLmVuZCAmJiBub2RlLm5leHRTaWJsaW5nKSB7XG5cdCAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gbm9kZS5fX3Z1ZV9fO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlIGEgcmFuZ2UgYXJyYXkgZnJvbSBnaXZlbiBudW1iZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBuXG5cdCAqIEByZXR1cm4ge0FycmF5fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJhbmdlKG4pIHtcblx0ICB2YXIgaSA9IC0xO1xuXHQgIHZhciByZXQgPSBuZXcgQXJyYXkoTWF0aC5mbG9vcihuKSk7XG5cdCAgd2hpbGUgKCsraSA8IG4pIHtcblx0ICAgIHJldFtpXSA9IGk7XG5cdCAgfVxuXHQgIHJldHVybiByZXQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgdGhlIHRyYWNrIGJ5IGtleSBmb3IgYW4gaXRlbS5cblx0ICpcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW3RyYWNrQnlLZXldXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSkge1xuXHQgIHJldHVybiB0cmFja0J5S2V5ID8gdHJhY2tCeUtleSA9PT0gJyRpbmRleCcgPyBpbmRleCA6IHRyYWNrQnlLZXkuY2hhckF0KDApLm1hdGNoKC9cXHcvKSA/IGdldFBhdGgodmFsdWUsIHRyYWNrQnlLZXkpIDogdmFsdWVbdHJhY2tCeUtleV0gOiBrZXkgfHwgdmFsdWU7XG5cdH1cblx0XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgdkZvci53YXJuRHVwbGljYXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICB3YXJuKCdEdXBsaWNhdGUgdmFsdWUgZm91bmQgaW4gdi1mb3I9XCInICsgdGhpcy5kZXNjcmlwdG9yLnJhdyArICdcIjogJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKSArICcuIFVzZSB0cmFjay1ieT1cIiRpbmRleFwiIGlmICcgKyAneW91IGFyZSBleHBlY3RpbmcgZHVwbGljYXRlIHZhbHVlcy4nLCB0aGlzLnZtKTtcblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgdklmID0ge1xuXHRcblx0ICBwcmlvcml0eTogSUYsXG5cdCAgdGVybWluYWw6IHRydWUsXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgaWYgKCFlbC5fX3Z1ZV9fKSB7XG5cdCAgICAgIC8vIGNoZWNrIGVsc2UgYmxvY2tcblx0ICAgICAgdmFyIG5leHQgPSBlbC5uZXh0RWxlbWVudFNpYmxpbmc7XG5cdCAgICAgIGlmIChuZXh0ICYmIGdldEF0dHIobmV4dCwgJ3YtZWxzZScpICE9PSBudWxsKSB7XG5cdCAgICAgICAgcmVtb3ZlKG5leHQpO1xuXHQgICAgICAgIHRoaXMuZWxzZUVsID0gbmV4dDtcblx0ICAgICAgfVxuXHQgICAgICAvLyBjaGVjayBtYWluIGJsb2NrXG5cdCAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWlmJyk7XG5cdCAgICAgIHJlcGxhY2UoZWwsIHRoaXMuYW5jaG9yKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1pZj1cIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgY2Fubm90IGJlICcgKyAndXNlZCBvbiBhbiBpbnN0YW5jZSByb290IGVsZW1lbnQuJywgdGhpcy52bSk7XG5cdCAgICAgIHRoaXMuaW52YWxpZCA9IHRydWU7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIGlmICh0aGlzLmludmFsaWQpIHJldHVybjtcblx0ICAgIGlmICh2YWx1ZSkge1xuXHQgICAgICBpZiAoIXRoaXMuZnJhZykge1xuXHQgICAgICAgIHRoaXMuaW5zZXJ0KCk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMucmVtb3ZlKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoKSB7XG5cdCAgICBpZiAodGhpcy5lbHNlRnJhZykge1xuXHQgICAgICB0aGlzLmVsc2VGcmFnLnJlbW92ZSgpO1xuXHQgICAgICB0aGlzLmVsc2VGcmFnID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIC8vIGxhenkgaW5pdCBmYWN0b3J5XG5cdCAgICBpZiAoIXRoaXMuZmFjdG9yeSkge1xuXHQgICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHRoaXMuZWwpO1xuXHQgICAgfVxuXHQgICAgdGhpcy5mcmFnID0gdGhpcy5mYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZyk7XG5cdCAgICB0aGlzLmZyYWcuYmVmb3JlKHRoaXMuYW5jaG9yKTtcblx0ICB9LFxuXHRcblx0ICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcblx0ICAgIGlmICh0aGlzLmZyYWcpIHtcblx0ICAgICAgdGhpcy5mcmFnLnJlbW92ZSgpO1xuXHQgICAgICB0aGlzLmZyYWcgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuZWxzZUVsICYmICF0aGlzLmVsc2VGcmFnKSB7XG5cdCAgICAgIGlmICghdGhpcy5lbHNlRmFjdG9yeSkge1xuXHQgICAgICAgIHRoaXMuZWxzZUZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMuZWxzZUVsLl9jb250ZXh0IHx8IHRoaXMudm0sIHRoaXMuZWxzZUVsKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLmVsc2VGcmFnID0gdGhpcy5lbHNlRmFjdG9yeS5jcmVhdGUodGhpcy5faG9zdCwgdGhpcy5fc2NvcGUsIHRoaXMuX2ZyYWcpO1xuXHQgICAgICB0aGlzLmVsc2VGcmFnLmJlZm9yZSh0aGlzLmFuY2hvcik7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICBpZiAodGhpcy5mcmFnKSB7XG5cdCAgICAgIHRoaXMuZnJhZy5kZXN0cm95KCk7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5lbHNlRnJhZykge1xuXHQgICAgICB0aGlzLmVsc2VGcmFnLmRlc3Ryb3koKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgc2hvdyA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8vIGNoZWNrIGVsc2UgYmxvY2tcblx0ICAgIHZhciBuZXh0ID0gdGhpcy5lbC5uZXh0RWxlbWVudFNpYmxpbmc7XG5cdCAgICBpZiAobmV4dCAmJiBnZXRBdHRyKG5leHQsICd2LWVsc2UnKSAhPT0gbnVsbCkge1xuXHQgICAgICB0aGlzLmVsc2VFbCA9IG5leHQ7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIHRoaXMuYXBwbHkodGhpcy5lbCwgdmFsdWUpO1xuXHQgICAgaWYgKHRoaXMuZWxzZUVsKSB7XG5cdCAgICAgIHRoaXMuYXBwbHkodGhpcy5lbHNlRWwsICF2YWx1ZSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgYXBwbHk6IGZ1bmN0aW9uIGFwcGx5KGVsLCB2YWx1ZSkge1xuXHQgICAgaWYgKGluRG9jKGVsKSkge1xuXHQgICAgICBhcHBseVRyYW5zaXRpb24oZWwsIHZhbHVlID8gMSA6IC0xLCB0b2dnbGUsIHRoaXMudm0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdG9nZ2xlKCk7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiB0b2dnbGUoKSB7XG5cdCAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZSA/ICcnIDogJ25vbmUnO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciB0ZXh0JDIgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgdmFyIGlzUmFuZ2UgPSBlbC50eXBlID09PSAncmFuZ2UnO1xuXHQgICAgdmFyIGxhenkgPSB0aGlzLnBhcmFtcy5sYXp5O1xuXHQgICAgdmFyIG51bWJlciA9IHRoaXMucGFyYW1zLm51bWJlcjtcblx0ICAgIHZhciBkZWJvdW5jZSA9IHRoaXMucGFyYW1zLmRlYm91bmNlO1xuXHRcblx0ICAgIC8vIGhhbmRsZSBjb21wb3NpdGlvbiBldmVudHMuXG5cdCAgICAvLyAgIGh0dHA6Ly9ibG9nLmV2YW55b3UubWUvMjAxNC8wMS8wMy9jb21wb3NpdGlvbi1ldmVudC9cblx0ICAgIC8vIHNraXAgdGhpcyBmb3IgQW5kcm9pZCBiZWNhdXNlIGl0IGhhbmRsZXMgY29tcG9zaXRpb25cblx0ICAgIC8vIGV2ZW50cyBxdWl0ZSBkaWZmZXJlbnRseS4gQW5kcm9pZCBkb2Vzbid0IHRyaWdnZXJcblx0ICAgIC8vIGNvbXBvc2l0aW9uIGV2ZW50cyBmb3IgbGFuZ3VhZ2UgaW5wdXQgbWV0aG9kcyBlLmcuXG5cdCAgICAvLyBDaGluZXNlLCBidXQgaW5zdGVhZCB0cmlnZ2VycyB0aGVtIGZvciBzcGVsbGluZ1xuXHQgICAgLy8gc3VnZ2VzdGlvbnMuLi4gKHNlZSBEaXNjdXNzaW9uLyMxNjIpXG5cdCAgICB2YXIgY29tcG9zaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoIWlzQW5kcm9pZCAmJiAhaXNSYW5nZSkge1xuXHQgICAgICB0aGlzLm9uKCdjb21wb3NpdGlvbnN0YXJ0JywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGNvbXBvc2luZyA9IHRydWU7XG5cdCAgICAgIH0pO1xuXHQgICAgICB0aGlzLm9uKCdjb21wb3NpdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBjb21wb3NpbmcgPSBmYWxzZTtcblx0ICAgICAgICAvLyBpbiBJRTExIHRoZSBcImNvbXBvc2l0aW9uZW5kXCIgZXZlbnQgZmlyZXMgQUZURVJcblx0ICAgICAgICAvLyB0aGUgXCJpbnB1dFwiIGV2ZW50LCBzbyB0aGUgaW5wdXQgaGFuZGxlciBpcyBibG9ja2VkXG5cdCAgICAgICAgLy8gYXQgdGhlIGVuZC4uLiBoYXZlIHRvIGNhbGwgaXQgaGVyZS5cblx0ICAgICAgICAvL1xuXHQgICAgICAgIC8vICMxMzI3OiBpbiBsYXp5IG1vZGUgdGhpcyBpcyB1bmVjZXNzYXJ5LlxuXHQgICAgICAgIGlmICghbGF6eSkge1xuXHQgICAgICAgICAgc2VsZi5saXN0ZW5lcigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gcHJldmVudCBtZXNzaW5nIHdpdGggdGhlIGlucHV0IHdoZW4gdXNlciBpcyB0eXBpbmcsXG5cdCAgICAvLyBhbmQgZm9yY2UgdXBkYXRlIG9uIGJsdXIuXG5cdCAgICB0aGlzLmZvY3VzZWQgPSBmYWxzZTtcblx0ICAgIGlmICghaXNSYW5nZSAmJiAhbGF6eSkge1xuXHQgICAgICB0aGlzLm9uKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzZWxmLmZvY3VzZWQgPSB0cnVlO1xuXHQgICAgICB9KTtcblx0ICAgICAgdGhpcy5vbignYmx1cicsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzZWxmLmZvY3VzZWQgPSBmYWxzZTtcblx0ICAgICAgICAvLyBkbyBub3Qgc3luYyB2YWx1ZSBhZnRlciBmcmFnbWVudCByZW1vdmFsICgjMjAxNylcblx0ICAgICAgICBpZiAoIXNlbGYuX2ZyYWcgfHwgc2VsZi5fZnJhZy5pbnNlcnRlZCkge1xuXHQgICAgICAgICAgc2VsZi5yYXdMaXN0ZW5lcigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gTm93IGF0dGFjaCB0aGUgbWFpbiBsaXN0ZW5lclxuXHQgICAgdGhpcy5saXN0ZW5lciA9IHRoaXMucmF3TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChjb21wb3NpbmcgfHwgIXNlbGYuX2JvdW5kKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciB2YWwgPSBudW1iZXIgfHwgaXNSYW5nZSA/IHRvTnVtYmVyKGVsLnZhbHVlKSA6IGVsLnZhbHVlO1xuXHQgICAgICBzZWxmLnNldCh2YWwpO1xuXHQgICAgICAvLyBmb3JjZSB1cGRhdGUgb24gbmV4dCB0aWNrIHRvIGF2b2lkIGxvY2sgJiBzYW1lIHZhbHVlXG5cdCAgICAgIC8vIGFsc28gb25seSB1cGRhdGUgd2hlbiB1c2VyIGlzIG5vdCB0eXBpbmdcblx0ICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChzZWxmLl9ib3VuZCAmJiAhc2VsZi5mb2N1c2VkKSB7XG5cdCAgICAgICAgICBzZWxmLnVwZGF0ZShzZWxmLl93YXRjaGVyLnZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBhcHBseSBkZWJvdW5jZVxuXHQgICAgaWYgKGRlYm91bmNlKSB7XG5cdCAgICAgIHRoaXMubGlzdGVuZXIgPSBfZGVib3VuY2UodGhpcy5saXN0ZW5lciwgZGVib3VuY2UpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIFN1cHBvcnQgalF1ZXJ5IGV2ZW50cywgc2luY2UgalF1ZXJ5LnRyaWdnZXIoKSBkb2Vzbid0XG5cdCAgICAvLyB0cmlnZ2VyIG5hdGl2ZSBldmVudHMgaW4gc29tZSBjYXNlcyBhbmQgc29tZSBwbHVnaW5zXG5cdCAgICAvLyByZWx5IG9uICQudHJpZ2dlcigpXG5cdCAgICAvL1xuXHQgICAgLy8gV2Ugd2FudCB0byBtYWtlIHN1cmUgaWYgYSBsaXN0ZW5lciBpcyBhdHRhY2hlZCB1c2luZ1xuXHQgICAgLy8galF1ZXJ5LCBpdCBpcyBhbHNvIHJlbW92ZWQgd2l0aCBqUXVlcnksIHRoYXQncyB3aHlcblx0ICAgIC8vIHdlIGRvIHRoZSBjaGVjayBmb3IgZWFjaCBkaXJlY3RpdmUgaW5zdGFuY2UgYW5kXG5cdCAgICAvLyBzdG9yZSB0aGF0IGNoZWNrIHJlc3VsdCBvbiBpdHNlbGYuIFRoaXMgYWxzbyBhbGxvd3Ncblx0ICAgIC8vIGVhc2llciB0ZXN0IGNvdmVyYWdlIGNvbnRyb2wgYnkgdW5zZXR0aW5nIHRoZSBnbG9iYWxcblx0ICAgIC8vIGpRdWVyeSB2YXJpYWJsZSBpbiB0ZXN0cy5cblx0ICAgIHRoaXMuaGFzalF1ZXJ5ID0gdHlwZW9mIGpRdWVyeSA9PT0gJ2Z1bmN0aW9uJztcblx0ICAgIGlmICh0aGlzLmhhc2pRdWVyeSkge1xuXHQgICAgICB2YXIgbWV0aG9kID0galF1ZXJ5LmZuLm9uID8gJ29uJyA6ICdiaW5kJztcblx0ICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdjaGFuZ2UnLCB0aGlzLnJhd0xpc3RlbmVyKTtcblx0ICAgICAgaWYgKCFsYXp5KSB7XG5cdCAgICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLnJhd0xpc3RlbmVyKTtcblx0ICAgICAgaWYgKCFsYXp5KSB7XG5cdCAgICAgICAgdGhpcy5vbignaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIElFOSBkb2Vzbid0IGZpcmUgaW5wdXQgZXZlbnQgb24gYmFja3NwYWNlL2RlbC9jdXRcblx0ICAgIGlmICghbGF6eSAmJiBpc0lFOSkge1xuXHQgICAgICB0aGlzLm9uKCdjdXQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgbmV4dFRpY2soc2VsZi5saXN0ZW5lcik7XG5cdCAgICAgIH0pO1xuXHQgICAgICB0aGlzLm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gNDYgfHwgZS5rZXlDb2RlID09PSA4KSB7XG5cdCAgICAgICAgICBzZWxmLmxpc3RlbmVyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBzZXQgaW5pdGlhbCB2YWx1ZSBpZiBwcmVzZW50XG5cdCAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCd2YWx1ZScpIHx8IGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScgJiYgZWwudmFsdWUudHJpbSgpKSB7XG5cdCAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgLy8gIzMwMjkgb25seSB1cGRhdGUgd2hlbiB0aGUgdmFsdWUgY2hhbmdlcy4gVGhpcyBwcmV2ZW50XG5cdCAgICAvLyBicm93c2VycyBmcm9tIG92ZXJ3cml0aW5nIHZhbHVlcyBsaWtlIHNlbGVjdGlvblN0YXJ0XG5cdCAgICB2YWx1ZSA9IF90b1N0cmluZyh2YWx1ZSk7XG5cdCAgICBpZiAodmFsdWUgIT09IHRoaXMuZWwudmFsdWUpIHRoaXMuZWwudmFsdWUgPSB2YWx1ZTtcblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICBpZiAodGhpcy5oYXNqUXVlcnkpIHtcblx0ICAgICAgdmFyIG1ldGhvZCA9IGpRdWVyeS5mbi5vZmYgPyAnb2ZmJyA6ICd1bmJpbmQnO1xuXHQgICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2lucHV0JywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHJhZGlvID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0XG5cdCAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAvLyB2YWx1ZSBvdmVyd3JpdGUgdmlhIHYtYmluZDp2YWx1ZVxuXHQgICAgICBpZiAoZWwuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpKSB7XG5cdCAgICAgICAgcmV0dXJuIGVsLl92YWx1ZTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgdmFsID0gZWwudmFsdWU7XG5cdCAgICAgIGlmIChzZWxmLnBhcmFtcy5udW1iZXIpIHtcblx0ICAgICAgICB2YWwgPSB0b051bWJlcih2YWwpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2YWw7XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHNlbGYuc2V0KHNlbGYuZ2V0VmFsdWUoKSk7XG5cdCAgICB9O1xuXHQgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cdFxuXHQgICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgnY2hlY2tlZCcpKSB7XG5cdCAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdGhpcy5lbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgdGhpcy5nZXRWYWx1ZSgpKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgc2VsZWN0ID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHRcblx0ICAgIC8vIG1ldGhvZCB0byBmb3JjZSB1cGRhdGUgRE9NIHVzaW5nIGxhdGVzdCB2YWx1ZS5cblx0ICAgIHRoaXMuZm9yY2VVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChzZWxmLl93YXRjaGVyKSB7XG5cdCAgICAgICAgc2VsZi51cGRhdGUoc2VsZi5fd2F0Y2hlci5nZXQoKSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhIG11bHRpcGxlIHNlbGVjdFxuXHQgICAgdmFyIG11bHRpcGxlID0gdGhpcy5tdWx0aXBsZSA9IGVsLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKTtcblx0XG5cdCAgICAvLyBhdHRhY2ggbGlzdGVuZXJcblx0ICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciB2YWx1ZSA9IGdldFZhbHVlKGVsLCBtdWx0aXBsZSk7XG5cdCAgICAgIHZhbHVlID0gc2VsZi5wYXJhbXMubnVtYmVyID8gaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5tYXAodG9OdW1iZXIpIDogdG9OdW1iZXIodmFsdWUpIDogdmFsdWU7XG5cdCAgICAgIHNlbGYuc2V0KHZhbHVlKTtcblx0ICAgIH07XG5cdCAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblx0XG5cdCAgICAvLyBpZiBoYXMgaW5pdGlhbCB2YWx1ZSwgc2V0IGFmdGVyQmluZFxuXHQgICAgdmFyIGluaXRWYWx1ZSA9IGdldFZhbHVlKGVsLCBtdWx0aXBsZSwgdHJ1ZSk7XG5cdCAgICBpZiAobXVsdGlwbGUgJiYgaW5pdFZhbHVlLmxlbmd0aCB8fCAhbXVsdGlwbGUgJiYgaW5pdFZhbHVlICE9PSBudWxsKSB7XG5cdCAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBBbGwgbWFqb3IgYnJvd3NlcnMgZXhjZXB0IEZpcmVmb3ggcmVzZXRzXG5cdCAgICAvLyBzZWxlY3RlZEluZGV4IHdpdGggdmFsdWUgLTEgdG8gMCB3aGVuIHRoZSBlbGVtZW50XG5cdCAgICAvLyBpcyBhcHBlbmRlZCB0byBhIG5ldyBwYXJlbnQsIHRoZXJlZm9yZSB3ZSBoYXZlIHRvXG5cdCAgICAvLyBmb3JjZSBhIERPTSB1cGRhdGUgd2hlbmV2ZXIgdGhhdCBoYXBwZW5zLi4uXG5cdCAgICB0aGlzLnZtLiRvbignaG9vazphdHRhY2hlZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgbmV4dFRpY2soX3RoaXMuZm9yY2VVcGRhdGUpO1xuXHQgICAgfSk7XG5cdCAgICBpZiAoIWluRG9jKGVsKSkge1xuXHQgICAgICBuZXh0VGljayh0aGlzLmZvcmNlVXBkYXRlKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIGVsLnNlbGVjdGVkSW5kZXggPSAtMTtcblx0ICAgIHZhciBtdWx0aSA9IHRoaXMubXVsdGlwbGUgJiYgaXNBcnJheSh2YWx1ZSk7XG5cdCAgICB2YXIgb3B0aW9ucyA9IGVsLm9wdGlvbnM7XG5cdCAgICB2YXIgaSA9IG9wdGlvbnMubGVuZ3RoO1xuXHQgICAgdmFyIG9wLCB2YWw7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIG9wID0gb3B0aW9uc1tpXTtcblx0ICAgICAgdmFsID0gb3AuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpID8gb3AuX3ZhbHVlIDogb3AudmFsdWU7XG5cdCAgICAgIC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuXHQgICAgICBvcC5zZWxlY3RlZCA9IG11bHRpID8gaW5kZXhPZiQxKHZhbHVlLCB2YWwpID4gLTEgOiBsb29zZUVxdWFsKHZhbHVlLCB2YWwpO1xuXHQgICAgICAvKiBlc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0ICAgIHRoaXMudm0uJG9mZignaG9vazphdHRhY2hlZCcsIHRoaXMuZm9yY2VVcGRhdGUpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBHZXQgc2VsZWN0IHZhbHVlXG5cdCAqXG5cdCAqIEBwYXJhbSB7U2VsZWN0RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtCb29sZWFufSBtdWx0aVxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IGluaXRcblx0ICogQHJldHVybiB7QXJyYXl8Kn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRWYWx1ZShlbCwgbXVsdGksIGluaXQpIHtcblx0ICB2YXIgcmVzID0gbXVsdGkgPyBbXSA6IG51bGw7XG5cdCAgdmFyIG9wLCB2YWwsIHNlbGVjdGVkO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gZWwub3B0aW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIG9wID0gZWwub3B0aW9uc1tpXTtcblx0ICAgIHNlbGVjdGVkID0gaW5pdCA/IG9wLmhhc0F0dHJpYnV0ZSgnc2VsZWN0ZWQnKSA6IG9wLnNlbGVjdGVkO1xuXHQgICAgaWYgKHNlbGVjdGVkKSB7XG5cdCAgICAgIHZhbCA9IG9wLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IG9wLl92YWx1ZSA6IG9wLnZhbHVlO1xuXHQgICAgICBpZiAobXVsdGkpIHtcblx0ICAgICAgICByZXMucHVzaCh2YWwpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiB2YWw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIE5hdGl2ZSBBcnJheS5pbmRleE9mIHVzZXMgc3RyaWN0IGVxdWFsLCBidXQgaW4gdGhpc1xuXHQgKiBjYXNlIHdlIG5lZWQgdG8gbWF0Y2ggc3RyaW5nL251bWJlcnMgd2l0aCBjdXN0b20gZXF1YWwuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFyclxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGluZGV4T2YkMShhcnIsIHZhbCkge1xuXHQgIHZhciBpID0gYXJyLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBpZiAobG9vc2VFcXVhbChhcnJbaV0sIHZhbCkpIHtcblx0ICAgICAgcmV0dXJuIGk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiAtMTtcblx0fVxuXHRcblx0dmFyIGNoZWNrYm94ID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0XG5cdCAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gZWwuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpID8gZWwuX3ZhbHVlIDogc2VsZi5wYXJhbXMubnVtYmVyID8gdG9OdW1iZXIoZWwudmFsdWUpIDogZWwudmFsdWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIGZ1bmN0aW9uIGdldEJvb2xlYW5WYWx1ZSgpIHtcblx0ICAgICAgdmFyIHZhbCA9IGVsLmNoZWNrZWQ7XG5cdCAgICAgIGlmICh2YWwgJiYgZWwuaGFzT3duUHJvcGVydHkoJ190cnVlVmFsdWUnKSkge1xuXHQgICAgICAgIHJldHVybiBlbC5fdHJ1ZVZhbHVlO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICghdmFsICYmIGVsLmhhc093blByb3BlcnR5KCdfZmFsc2VWYWx1ZScpKSB7XG5cdCAgICAgICAgcmV0dXJuIGVsLl9mYWxzZVZhbHVlO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2YWw7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIG1vZGVsID0gc2VsZi5fd2F0Y2hlci52YWx1ZTtcblx0ICAgICAgaWYgKGlzQXJyYXkobW9kZWwpKSB7XG5cdCAgICAgICAgdmFyIHZhbCA9IHNlbGYuZ2V0VmFsdWUoKTtcblx0ICAgICAgICBpZiAoZWwuY2hlY2tlZCkge1xuXHQgICAgICAgICAgaWYgKGluZGV4T2YobW9kZWwsIHZhbCkgPCAwKSB7XG5cdCAgICAgICAgICAgIG1vZGVsLnB1c2godmFsKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgbW9kZWwuJHJlbW92ZSh2YWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzZWxmLnNldChnZXRCb29sZWFuVmFsdWUoKSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdjaGVja2VkJykpIHtcblx0ICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICAgIGVsLmNoZWNrZWQgPSBpbmRleE9mKHZhbHVlLCB0aGlzLmdldFZhbHVlKCkpID4gLTE7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAoZWwuaGFzT3duUHJvcGVydHkoJ190cnVlVmFsdWUnKSkge1xuXHQgICAgICAgIGVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCBlbC5fdHJ1ZVZhbHVlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBlbC5jaGVja2VkID0gISF2YWx1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBoYW5kbGVycyA9IHtcblx0ICB0ZXh0OiB0ZXh0JDIsXG5cdCAgcmFkaW86IHJhZGlvLFxuXHQgIHNlbGVjdDogc2VsZWN0LFxuXHQgIGNoZWNrYm94OiBjaGVja2JveFxuXHR9O1xuXHRcblx0dmFyIG1vZGVsID0ge1xuXHRcblx0ICBwcmlvcml0eTogTU9ERUwsXG5cdCAgdHdvV2F5OiB0cnVlLFxuXHQgIGhhbmRsZXJzOiBoYW5kbGVycyxcblx0ICBwYXJhbXM6IFsnbGF6eScsICdudW1iZXInLCAnZGVib3VuY2UnXSxcblx0XG5cdCAgLyoqXG5cdCAgICogUG9zc2libGUgZWxlbWVudHM6XG5cdCAgICogICA8c2VsZWN0PlxuXHQgICAqICAgPHRleHRhcmVhPlxuXHQgICAqICAgPGlucHV0IHR5cGU9XCIqXCI+XG5cdCAgICogICAgIC0gdGV4dFxuXHQgICAqICAgICAtIGNoZWNrYm94XG5cdCAgICogICAgIC0gcmFkaW9cblx0ICAgKiAgICAgLSBudW1iZXJcblx0ICAgKi9cblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8vIGZyaWVuZGx5IHdhcm5pbmcuLi5cblx0ICAgIHRoaXMuY2hlY2tGaWx0ZXJzKCk7XG5cdCAgICBpZiAodGhpcy5oYXNSZWFkICYmICF0aGlzLmhhc1dyaXRlKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSXQgc2VlbXMgeW91IGFyZSB1c2luZyBhIHJlYWQtb25seSBmaWx0ZXIgd2l0aCAnICsgJ3YtbW9kZWw9XCInICsgdGhpcy5kZXNjcmlwdG9yLnJhdyArICdcIi4gJyArICdZb3UgbWlnaHQgd2FudCB0byB1c2UgYSB0d28td2F5IGZpbHRlciB0byBlbnN1cmUgY29ycmVjdCBiZWhhdmlvci4nLCB0aGlzLnZtKTtcblx0ICAgIH1cblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICB2YXIgdGFnID0gZWwudGFnTmFtZTtcblx0ICAgIHZhciBoYW5kbGVyO1xuXHQgICAgaWYgKHRhZyA9PT0gJ0lOUFVUJykge1xuXHQgICAgICBoYW5kbGVyID0gaGFuZGxlcnNbZWwudHlwZV0gfHwgaGFuZGxlcnMudGV4dDtcblx0ICAgIH0gZWxzZSBpZiAodGFnID09PSAnU0VMRUNUJykge1xuXHQgICAgICBoYW5kbGVyID0gaGFuZGxlcnMuc2VsZWN0O1xuXHQgICAgfSBlbHNlIGlmICh0YWcgPT09ICdURVhUQVJFQScpIHtcblx0ICAgICAgaGFuZGxlciA9IGhhbmRsZXJzLnRleHQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3YtbW9kZWwgZG9lcyBub3Qgc3VwcG9ydCBlbGVtZW50IHR5cGU6ICcgKyB0YWcsIHRoaXMudm0pO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBlbC5fX3ZfbW9kZWwgPSB0aGlzO1xuXHQgICAgaGFuZGxlci5iaW5kLmNhbGwodGhpcyk7XG5cdCAgICB0aGlzLnVwZGF0ZSA9IGhhbmRsZXIudXBkYXRlO1xuXHQgICAgdGhpcy5fdW5iaW5kID0gaGFuZGxlci51bmJpbmQ7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgcmVhZC93cml0ZSBmaWx0ZXIgc3RhdHMuXG5cdCAgICovXG5cdFxuXHQgIGNoZWNrRmlsdGVyczogZnVuY3Rpb24gY2hlY2tGaWx0ZXJzKCkge1xuXHQgICAgdmFyIGZpbHRlcnMgPSB0aGlzLmZpbHRlcnM7XG5cdCAgICBpZiAoIWZpbHRlcnMpIHJldHVybjtcblx0ICAgIHZhciBpID0gZmlsdGVycy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhciBmaWx0ZXIgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ2ZpbHRlcnMnLCBmaWx0ZXJzW2ldLm5hbWUpO1xuXHQgICAgICBpZiAodHlwZW9mIGZpbHRlciA9PT0gJ2Z1bmN0aW9uJyB8fCBmaWx0ZXIucmVhZCkge1xuXHQgICAgICAgIHRoaXMuaGFzUmVhZCA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGZpbHRlci53cml0ZSkge1xuXHQgICAgICAgIHRoaXMuaGFzV3JpdGUgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB0aGlzLmVsLl9fdl9tb2RlbCA9IG51bGw7XG5cdCAgICB0aGlzLl91bmJpbmQgJiYgdGhpcy5fdW5iaW5kKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8ga2V5Q29kZSBhbGlhc2VzXG5cdHZhciBrZXlDb2RlcyA9IHtcblx0ICBlc2M6IDI3LFxuXHQgIHRhYjogOSxcblx0ICBlbnRlcjogMTMsXG5cdCAgc3BhY2U6IDMyLFxuXHQgICdkZWxldGUnOiBbOCwgNDZdLFxuXHQgIHVwOiAzOCxcblx0ICBsZWZ0OiAzNyxcblx0ICByaWdodDogMzksXG5cdCAgZG93bjogNDBcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGtleUZpbHRlcihoYW5kbGVyLCBrZXlzKSB7XG5cdCAgdmFyIGNvZGVzID0ga2V5cy5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgdmFyIGNoYXJDb2RlID0ga2V5LmNoYXJDb2RlQXQoMCk7XG5cdCAgICBpZiAoY2hhckNvZGUgPiA0NyAmJiBjaGFyQ29kZSA8IDU4KSB7XG5cdCAgICAgIHJldHVybiBwYXJzZUludChrZXksIDEwKTtcblx0ICAgIH1cblx0ICAgIGlmIChrZXkubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgIGNoYXJDb2RlID0ga2V5LnRvVXBwZXJDYXNlKCkuY2hhckNvZGVBdCgwKTtcblx0ICAgICAgaWYgKGNoYXJDb2RlID4gNjQgJiYgY2hhckNvZGUgPCA5MSkge1xuXHQgICAgICAgIHJldHVybiBjaGFyQ29kZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGtleUNvZGVzW2tleV07XG5cdCAgfSk7XG5cdCAgY29kZXMgPSBbXS5jb25jYXQuYXBwbHkoW10sIGNvZGVzKTtcblx0ICByZXR1cm4gZnVuY3Rpb24ga2V5SGFuZGxlcihlKSB7XG5cdCAgICBpZiAoY29kZXMuaW5kZXhPZihlLmtleUNvZGUpID4gLTEpIHtcblx0ICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzdG9wRmlsdGVyKGhhbmRsZXIpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gc3RvcEhhbmRsZXIoZSkge1xuXHQgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0ICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcHJldmVudEZpbHRlcihoYW5kbGVyKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHByZXZlbnRIYW5kbGVyKGUpIHtcblx0ICAgIGUucHJldmVudERlZmF1bHQoKTtcblx0ICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2VsZkZpbHRlcihoYW5kbGVyKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHNlbGZIYW5kbGVyKGUpIHtcblx0ICAgIGlmIChlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0KSB7XG5cdCAgICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0dmFyIG9uJDEgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBPTixcblx0ICBhY2NlcHRTdGF0ZW1lbnQ6IHRydWUsXG5cdCAga2V5Q29kZXM6IGtleUNvZGVzLFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gZGVhbCB3aXRoIGlmcmFtZXNcblx0ICAgIGlmICh0aGlzLmVsLnRhZ05hbWUgPT09ICdJRlJBTUUnICYmIHRoaXMuYXJnICE9PSAnbG9hZCcpIHtcblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICB0aGlzLmlmcmFtZUJpbmQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgb24oc2VsZi5lbC5jb250ZW50V2luZG93LCBzZWxmLmFyZywgc2VsZi5oYW5kbGVyLCBzZWxmLm1vZGlmaWVycy5jYXB0dXJlKTtcblx0ICAgICAgfTtcblx0ICAgICAgdGhpcy5vbignbG9hZCcsIHRoaXMuaWZyYW1lQmluZCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoaGFuZGxlcikge1xuXHQgICAgLy8gc3R1YiBhIG5vb3AgZm9yIHYtb24gd2l0aCBubyB2YWx1ZSxcblx0ICAgIC8vIGUuZy4gQG1vdXNlZG93bi5wcmV2ZW50XG5cdCAgICBpZiAoIXRoaXMuZGVzY3JpcHRvci5yYXcpIHtcblx0ICAgICAgaGFuZGxlciA9IGZ1bmN0aW9uICgpIHt9O1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICh0eXBlb2YgaGFuZGxlciAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3Ytb246JyArIHRoaXMuYXJnICsgJz1cIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgZXhwZWN0cyBhIGZ1bmN0aW9uIHZhbHVlLCAnICsgJ2dvdCAnICsgaGFuZGxlciwgdGhpcy52bSk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBhcHBseSBtb2RpZmllcnNcblx0ICAgIGlmICh0aGlzLm1vZGlmaWVycy5zdG9wKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBzdG9wRmlsdGVyKGhhbmRsZXIpO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMubW9kaWZpZXJzLnByZXZlbnQpIHtcblx0ICAgICAgaGFuZGxlciA9IHByZXZlbnRGaWx0ZXIoaGFuZGxlcik7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5tb2RpZmllcnMuc2VsZikge1xuXHQgICAgICBoYW5kbGVyID0gc2VsZkZpbHRlcihoYW5kbGVyKTtcblx0ICAgIH1cblx0ICAgIC8vIGtleSBmaWx0ZXJcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModGhpcy5tb2RpZmllcnMpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiBrZXkgIT09ICdzdG9wJyAmJiBrZXkgIT09ICdwcmV2ZW50JyAmJiBrZXkgIT09ICdzZWxmJyAmJiBrZXkgIT09ICdjYXB0dXJlJztcblx0ICAgIH0pO1xuXHQgICAgaWYgKGtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBrZXlGaWx0ZXIoaGFuZGxlciwga2V5cyk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5yZXNldCgpO1xuXHQgICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlcjtcblx0XG5cdCAgICBpZiAodGhpcy5pZnJhbWVCaW5kKSB7XG5cdCAgICAgIHRoaXMuaWZyYW1lQmluZCgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb24odGhpcy5lbCwgdGhpcy5hcmcsIHRoaXMuaGFuZGxlciwgdGhpcy5tb2RpZmllcnMuY2FwdHVyZSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5pZnJhbWVCaW5kID8gdGhpcy5lbC5jb250ZW50V2luZG93IDogdGhpcy5lbDtcblx0ICAgIGlmICh0aGlzLmhhbmRsZXIpIHtcblx0ICAgICAgb2ZmKGVsLCB0aGlzLmFyZywgdGhpcy5oYW5kbGVyKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHRoaXMucmVzZXQoKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcHJlZml4ZXMgPSBbJy13ZWJraXQtJywgJy1tb3otJywgJy1tcy0nXTtcblx0dmFyIGNhbWVsUHJlZml4ZXMgPSBbJ1dlYmtpdCcsICdNb3onLCAnbXMnXTtcblx0dmFyIGltcG9ydGFudFJFID0gLyFpbXBvcnRhbnQ7PyQvO1xuXHR2YXIgcHJvcENhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0XG5cdHZhciB0ZXN0RWwgPSBudWxsO1xuXHRcblx0dmFyIHN0eWxlID0ge1xuXHRcblx0ICBkZWVwOiB0cnVlLFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgdGhpcy5lbC5zdHlsZS5jc3NUZXh0ID0gdmFsdWU7XG5cdCAgICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlLnJlZHVjZShleHRlbmQsIHt9KSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZSB8fCB7fSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgaGFuZGxlT2JqZWN0OiBmdW5jdGlvbiBoYW5kbGVPYmplY3QodmFsdWUpIHtcblx0ICAgIC8vIGNhY2hlIG9iamVjdCBzdHlsZXMgc28gdGhhdCBvbmx5IGNoYW5nZWQgcHJvcHNcblx0ICAgIC8vIGFyZSBhY3R1YWxseSB1cGRhdGVkLlxuXHQgICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZSB8fCAodGhpcy5jYWNoZSA9IHt9KTtcblx0ICAgIHZhciBuYW1lLCB2YWw7XG5cdCAgICBmb3IgKG5hbWUgaW4gY2FjaGUpIHtcblx0ICAgICAgaWYgKCEobmFtZSBpbiB2YWx1ZSkpIHtcblx0ICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShuYW1lLCBudWxsKTtcblx0ICAgICAgICBkZWxldGUgY2FjaGVbbmFtZV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGZvciAobmFtZSBpbiB2YWx1ZSkge1xuXHQgICAgICB2YWwgPSB2YWx1ZVtuYW1lXTtcblx0ICAgICAgaWYgKHZhbCAhPT0gY2FjaGVbbmFtZV0pIHtcblx0ICAgICAgICBjYWNoZVtuYW1lXSA9IHZhbDtcblx0ICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShuYW1lLCB2YWwpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgaGFuZGxlU2luZ2xlOiBmdW5jdGlvbiBoYW5kbGVTaW5nbGUocHJvcCwgdmFsdWUpIHtcblx0ICAgIHByb3AgPSBub3JtYWxpemUocHJvcCk7XG5cdCAgICBpZiAoIXByb3ApIHJldHVybjsgLy8gdW5zdXBwb3J0ZWQgcHJvcFxuXHQgICAgLy8gY2FzdCBwb3NzaWJsZSBudW1iZXJzL2Jvb2xlYW5zIGludG8gc3RyaW5nc1xuXHQgICAgaWYgKHZhbHVlICE9IG51bGwpIHZhbHVlICs9ICcnO1xuXHQgICAgaWYgKHZhbHVlKSB7XG5cdCAgICAgIHZhciBpc0ltcG9ydGFudCA9IGltcG9ydGFudFJFLnRlc3QodmFsdWUpID8gJ2ltcG9ydGFudCcgOiAnJztcblx0ICAgICAgaWYgKGlzSW1wb3J0YW50KSB7XG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICAgIHdhcm4oJ0l0XFwncyBwcm9iYWJseSBhIGJhZCBpZGVhIHRvIHVzZSAhaW1wb3J0YW50IHdpdGggaW5saW5lIHJ1bGVzLiAnICsgJ1RoaXMgZmVhdHVyZSB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiBvZiBWdWUuJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZShpbXBvcnRhbnRSRSwgJycpLnRyaW0oKTtcblx0ICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KHByb3Aua2ViYWIsIHZhbHVlLCBpc0ltcG9ydGFudCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5lbC5zdHlsZVtwcm9wLmNhbWVsXSA9IHZhbHVlO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmVsLnN0eWxlW3Byb3AuY2FtZWxdID0gJyc7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBOb3JtYWxpemUgYSBDU1MgcHJvcGVydHkgbmFtZS5cblx0ICogLSBjYWNoZSByZXN1bHRcblx0ICogLSBhdXRvIHByZWZpeFxuXHQgKiAtIGNhbWVsQ2FzZSAtPiBkYXNoLWNhc2Vcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHByb3Bcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZShwcm9wKSB7XG5cdCAgaWYgKHByb3BDYWNoZVtwcm9wXSkge1xuXHQgICAgcmV0dXJuIHByb3BDYWNoZVtwcm9wXTtcblx0ICB9XG5cdCAgdmFyIHJlcyA9IHByZWZpeChwcm9wKTtcblx0ICBwcm9wQ2FjaGVbcHJvcF0gPSBwcm9wQ2FjaGVbcmVzXSA9IHJlcztcblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXV0byBkZXRlY3QgdGhlIGFwcHJvcHJpYXRlIHByZWZpeCBmb3IgYSBDU1MgcHJvcGVydHkuXG5cdCAqIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3BhdWxpcmlzaC81MjM2OTJcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHByb3Bcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByZWZpeChwcm9wKSB7XG5cdCAgcHJvcCA9IGh5cGhlbmF0ZShwcm9wKTtcblx0ICB2YXIgY2FtZWwgPSBjYW1lbGl6ZShwcm9wKTtcblx0ICB2YXIgdXBwZXIgPSBjYW1lbC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbWVsLnNsaWNlKDEpO1xuXHQgIGlmICghdGVzdEVsKSB7XG5cdCAgICB0ZXN0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICB9XG5cdCAgdmFyIGkgPSBwcmVmaXhlcy5sZW5ndGg7XG5cdCAgdmFyIHByZWZpeGVkO1xuXHQgIGlmIChjYW1lbCAhPT0gJ2ZpbHRlcicgJiYgY2FtZWwgaW4gdGVzdEVsLnN0eWxlKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBrZWJhYjogcHJvcCxcblx0ICAgICAgY2FtZWw6IGNhbWVsXG5cdCAgICB9O1xuXHQgIH1cblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBwcmVmaXhlZCA9IGNhbWVsUHJlZml4ZXNbaV0gKyB1cHBlcjtcblx0ICAgIGlmIChwcmVmaXhlZCBpbiB0ZXN0RWwuc3R5bGUpIHtcblx0ICAgICAgcmV0dXJuIHtcblx0ICAgICAgICBrZWJhYjogcHJlZml4ZXNbaV0gKyBwcm9wLFxuXHQgICAgICAgIGNhbWVsOiBwcmVmaXhlZFxuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0Ly8geGxpbmtcblx0dmFyIHhsaW5rTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc7XG5cdHZhciB4bGlua1JFID0gL154bGluazovO1xuXHRcblx0Ly8gY2hlY2sgZm9yIGF0dHJpYnV0ZXMgdGhhdCBwcm9oaWJpdCBpbnRlcnBvbGF0aW9uc1xuXHR2YXIgZGlzYWxsb3dlZEludGVycEF0dHJSRSA9IC9edi18Xjp8XkB8Xig/OmlzfHRyYW5zaXRpb258dHJhbnNpdGlvbi1tb2RlfGRlYm91bmNlfHRyYWNrLWJ5fHN0YWdnZXJ8ZW50ZXItc3RhZ2dlcnxsZWF2ZS1zdGFnZ2VyKSQvO1xuXHQvLyB0aGVzZSBhdHRyaWJ1dGVzIHNob3VsZCBhbHNvIHNldCB0aGVpciBjb3JyZXNwb25kaW5nIHByb3BlcnRpZXNcblx0Ly8gYmVjYXVzZSB0aGV5IG9ubHkgYWZmZWN0IHRoZSBpbml0aWFsIHN0YXRlIG9mIHRoZSBlbGVtZW50XG5cdHZhciBhdHRyV2l0aFByb3BzUkUgPSAvXig/OnZhbHVlfGNoZWNrZWR8c2VsZWN0ZWR8bXV0ZWQpJC87XG5cdC8vIHRoZXNlIGF0dHJpYnV0ZXMgZXhwZWN0IGVudW1yYXRlZCB2YWx1ZXMgb2YgXCJ0cnVlXCIgb3IgXCJmYWxzZVwiXG5cdC8vIGJ1dCBhcmUgbm90IGJvb2xlYW4gYXR0cmlidXRlc1xuXHR2YXIgZW51bWVyYXRlZEF0dHJSRSA9IC9eKD86ZHJhZ2dhYmxlfGNvbnRlbnRlZGl0YWJsZXxzcGVsbGNoZWNrKSQvO1xuXHRcblx0Ly8gdGhlc2UgYXR0cmlidXRlcyBzaG91bGQgc2V0IGEgaGlkZGVuIHByb3BlcnR5IGZvclxuXHQvLyBiaW5kaW5nIHYtbW9kZWwgdG8gb2JqZWN0IHZhbHVlc1xuXHR2YXIgbW9kZWxQcm9wcyA9IHtcblx0ICB2YWx1ZTogJ192YWx1ZScsXG5cdCAgJ3RydWUtdmFsdWUnOiAnX3RydWVWYWx1ZScsXG5cdCAgJ2ZhbHNlLXZhbHVlJzogJ19mYWxzZVZhbHVlJ1xuXHR9O1xuXHRcblx0dmFyIGJpbmQkMSA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IEJJTkQsXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgYXR0ciA9IHRoaXMuYXJnO1xuXHQgICAgdmFyIHRhZyA9IHRoaXMuZWwudGFnTmFtZTtcblx0ICAgIC8vIHNob3VsZCBiZSBkZWVwIHdhdGNoIG9uIG9iamVjdCBtb2RlXG5cdCAgICBpZiAoIWF0dHIpIHtcblx0ICAgICAgdGhpcy5kZWVwID0gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIC8vIGhhbmRsZSBpbnRlcnBvbGF0aW9uIGJpbmRpbmdzXG5cdCAgICB2YXIgZGVzY3JpcHRvciA9IHRoaXMuZGVzY3JpcHRvcjtcblx0ICAgIHZhciB0b2tlbnMgPSBkZXNjcmlwdG9yLmludGVycDtcblx0ICAgIGlmICh0b2tlbnMpIHtcblx0ICAgICAgLy8gaGFuZGxlIGludGVycG9sYXRpb25zIHdpdGggb25lLXRpbWUgdG9rZW5zXG5cdCAgICAgIGlmIChkZXNjcmlwdG9yLmhhc09uZVRpbWUpIHtcblx0ICAgICAgICB0aGlzLmV4cHJlc3Npb24gPSB0b2tlbnNUb0V4cCh0b2tlbnMsIHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBvbmx5IGFsbG93IGJpbmRpbmcgb24gbmF0aXZlIGF0dHJpYnV0ZXNcblx0ICAgICAgaWYgKGRpc2FsbG93ZWRJbnRlcnBBdHRyUkUudGVzdChhdHRyKSB8fCBhdHRyID09PSAnbmFtZScgJiYgKHRhZyA9PT0gJ1BBUlRJQUwnIHx8IHRhZyA9PT0gJ1NMT1QnKSkge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihhdHRyICsgJz1cIicgKyBkZXNjcmlwdG9yLnJhdyArICdcIjogJyArICdhdHRyaWJ1dGUgaW50ZXJwb2xhdGlvbiBpcyBub3QgYWxsb3dlZCBpbiBWdWUuanMgJyArICdkaXJlY3RpdmVzIGFuZCBzcGVjaWFsIGF0dHJpYnV0ZXMuJywgdGhpcy52bSk7XG5cdCAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG5cdCAgICAgICAgdGhpcy5pbnZhbGlkID0gdHJ1ZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgdmFyIHJhdyA9IGF0dHIgKyAnPVwiJyArIGRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnO1xuXHQgICAgICAgIC8vIHdhcm4gc3JjXG5cdCAgICAgICAgaWYgKGF0dHIgPT09ICdzcmMnKSB7XG5cdCAgICAgICAgICB3YXJuKHJhdyArICdpbnRlcnBvbGF0aW9uIGluIFwic3JjXCIgYXR0cmlidXRlIHdpbGwgY2F1c2UgJyArICdhIDQwNCByZXF1ZXN0LiBVc2Ugdi1iaW5kOnNyYyBpbnN0ZWFkLicsIHRoaXMudm0pO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gd2FybiBzdHlsZVxuXHQgICAgICAgIGlmIChhdHRyID09PSAnc3R5bGUnKSB7XG5cdCAgICAgICAgICB3YXJuKHJhdyArICdpbnRlcnBvbGF0aW9uIGluIFwic3R5bGVcIiBhdHRyaWJ1dGUgd2lsbCBjYXVzZSAnICsgJ3RoZSBhdHRyaWJ1dGUgdG8gYmUgZGlzY2FyZGVkIGluIEludGVybmV0IEV4cGxvcmVyLiAnICsgJ1VzZSB2LWJpbmQ6c3R5bGUgaW5zdGVhZC4nLCB0aGlzLnZtKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgaWYgKHRoaXMuaW52YWxpZCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgYXR0ciA9IHRoaXMuYXJnO1xuXHQgICAgaWYgKHRoaXMuYXJnKSB7XG5cdCAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKGF0dHIsIHZhbHVlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlIHx8IHt9KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvLyBzaGFyZSBvYmplY3QgaGFuZGxlciB3aXRoIHYtYmluZDpjbGFzc1xuXHQgIGhhbmRsZU9iamVjdDogc3R5bGUuaGFuZGxlT2JqZWN0LFxuXHRcblx0ICBoYW5kbGVTaW5nbGU6IGZ1bmN0aW9uIGhhbmRsZVNpbmdsZShhdHRyLCB2YWx1ZSkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIHZhciBpbnRlcnAgPSB0aGlzLmRlc2NyaXB0b3IuaW50ZXJwO1xuXHQgICAgaWYgKHRoaXMubW9kaWZpZXJzLmNhbWVsKSB7XG5cdCAgICAgIGF0dHIgPSBjYW1lbGl6ZShhdHRyKTtcblx0ICAgIH1cblx0ICAgIGlmICghaW50ZXJwICYmIGF0dHJXaXRoUHJvcHNSRS50ZXN0KGF0dHIpICYmIGF0dHIgaW4gZWwpIHtcblx0ICAgICAgdmFyIGF0dHJWYWx1ZSA9IGF0dHIgPT09ICd2YWx1ZScgPyB2YWx1ZSA9PSBudWxsIC8vIElFOSB3aWxsIHNldCBpbnB1dC52YWx1ZSB0byBcIm51bGxcIiBmb3IgbnVsbC4uLlxuXHQgICAgICA/ICcnIDogdmFsdWUgOiB2YWx1ZTtcblx0XG5cdCAgICAgIGlmIChlbFthdHRyXSAhPT0gYXR0clZhbHVlKSB7XG5cdCAgICAgICAgZWxbYXR0cl0gPSBhdHRyVmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIHNldCBtb2RlbCBwcm9wc1xuXHQgICAgdmFyIG1vZGVsUHJvcCA9IG1vZGVsUHJvcHNbYXR0cl07XG5cdCAgICBpZiAoIWludGVycCAmJiBtb2RlbFByb3ApIHtcblx0ICAgICAgZWxbbW9kZWxQcm9wXSA9IHZhbHVlO1xuXHQgICAgICAvLyB1cGRhdGUgdi1tb2RlbCBpZiBwcmVzZW50XG5cdCAgICAgIHZhciBtb2RlbCA9IGVsLl9fdl9tb2RlbDtcblx0ICAgICAgaWYgKG1vZGVsKSB7XG5cdCAgICAgICAgbW9kZWwubGlzdGVuZXIoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gZG8gbm90IHNldCB2YWx1ZSBhdHRyaWJ1dGUgZm9yIHRleHRhcmVhXG5cdCAgICBpZiAoYXR0ciA9PT0gJ3ZhbHVlJyAmJiBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG5cdCAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gdXBkYXRlIGF0dHJpYnV0ZVxuXHQgICAgaWYgKGVudW1lcmF0ZWRBdHRyUkUudGVzdChhdHRyKSkge1xuXHQgICAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUgPyAndHJ1ZScgOiAnZmFsc2UnKTtcblx0ICAgIH0gZWxzZSBpZiAodmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSAhPT0gZmFsc2UpIHtcblx0ICAgICAgaWYgKGF0dHIgPT09ICdjbGFzcycpIHtcblx0ICAgICAgICAvLyBoYW5kbGUgZWRnZSBjYXNlICMxOTYwOlxuXHQgICAgICAgIC8vIGNsYXNzIGludGVycG9sYXRpb24gc2hvdWxkIG5vdCBvdmVyd3JpdGUgVnVlIHRyYW5zaXRpb24gY2xhc3Ncblx0ICAgICAgICBpZiAoZWwuX192X3RyYW5zKSB7XG5cdCAgICAgICAgICB2YWx1ZSArPSAnICcgKyBlbC5fX3ZfdHJhbnMuaWQgKyAnLXRyYW5zaXRpb24nO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzZXRDbGFzcyhlbCwgdmFsdWUpO1xuXHQgICAgICB9IGVsc2UgaWYgKHhsaW5rUkUudGVzdChhdHRyKSkge1xuXHQgICAgICAgIGVsLnNldEF0dHJpYnV0ZU5TKHhsaW5rTlMsIGF0dHIsIHZhbHVlID09PSB0cnVlID8gJycgOiB2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlID09PSB0cnVlID8gJycgOiB2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgZWwgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBFTCxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKCF0aGlzLmFyZykge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgaWQgPSB0aGlzLmlkID0gY2FtZWxpemUodGhpcy5hcmcpO1xuXHQgICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJGVscztcblx0ICAgIGlmIChoYXNPd24ocmVmcywgaWQpKSB7XG5cdCAgICAgIHJlZnNbaWRdID0gdGhpcy5lbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGRlZmluZVJlYWN0aXZlKHJlZnMsIGlkLCB0aGlzLmVsKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRlbHM7XG5cdCAgICBpZiAocmVmc1t0aGlzLmlkXSA9PT0gdGhpcy5lbCkge1xuXHQgICAgICByZWZzW3RoaXMuaWRdID0gbnVsbDtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcmVmID0ge1xuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3YtcmVmOicgKyB0aGlzLmFyZyArICcgbXVzdCBiZSB1c2VkIG9uIGEgY2hpbGQgJyArICdjb21wb25lbnQuIEZvdW5kIG9uIDwnICsgdGhpcy5lbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyAnPi4nLCB0aGlzLnZtKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgY2xvYWsgPSB7XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICB0aGlzLnZtLiRvbmNlKCdwcmUtaG9vazpjb21waWxlZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCd2LWNsb2FrJyk7XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyBtdXN0IGV4cG9ydCBwbGFpbiBvYmplY3Rcblx0dmFyIGRpcmVjdGl2ZXMgPSB7XG5cdCAgdGV4dDogdGV4dCQxLFxuXHQgIGh0bWw6IGh0bWwsXG5cdCAgJ2Zvcic6IHZGb3IsXG5cdCAgJ2lmJzogdklmLFxuXHQgIHNob3c6IHNob3csXG5cdCAgbW9kZWw6IG1vZGVsLFxuXHQgIG9uOiBvbiQxLFxuXHQgIGJpbmQ6IGJpbmQkMSxcblx0ICBlbDogZWwsXG5cdCAgcmVmOiByZWYsXG5cdCAgY2xvYWs6IGNsb2FrXG5cdH07XG5cdFxuXHR2YXIgdkNsYXNzID0ge1xuXHRcblx0ICBkZWVwOiB0cnVlLFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgaWYgKCF2YWx1ZSkge1xuXHQgICAgICB0aGlzLmNsZWFudXAoKTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuXHQgICAgICB0aGlzLnNldENsYXNzKHZhbHVlLnRyaW0oKS5zcGxpdCgvXFxzKy8pKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuc2V0Q2xhc3Mobm9ybWFsaXplJDEodmFsdWUpKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBzZXRDbGFzczogZnVuY3Rpb24gc2V0Q2xhc3ModmFsdWUpIHtcblx0ICAgIHRoaXMuY2xlYW51cCh2YWx1ZSk7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgdmFsID0gdmFsdWVbaV07XG5cdCAgICAgIGlmICh2YWwpIHtcblx0ICAgICAgICBhcHBseSh0aGlzLmVsLCB2YWwsIGFkZENsYXNzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdGhpcy5wcmV2S2V5cyA9IHZhbHVlO1xuXHQgIH0sXG5cdFxuXHQgIGNsZWFudXA6IGZ1bmN0aW9uIGNsZWFudXAodmFsdWUpIHtcblx0ICAgIHZhciBwcmV2S2V5cyA9IHRoaXMucHJldktleXM7XG5cdCAgICBpZiAoIXByZXZLZXlzKSByZXR1cm47XG5cdCAgICB2YXIgaSA9IHByZXZLZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdmFyIGtleSA9IHByZXZLZXlzW2ldO1xuXHQgICAgICBpZiAoIXZhbHVlIHx8IHZhbHVlLmluZGV4T2Yoa2V5KSA8IDApIHtcblx0ICAgICAgICBhcHBseSh0aGlzLmVsLCBrZXksIHJlbW92ZUNsYXNzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBOb3JtYWxpemUgb2JqZWN0cyBhbmQgYXJyYXlzIChwb3RlbnRpYWxseSBjb250YWluaW5nIG9iamVjdHMpXG5cdCAqIGludG8gYXJyYXkgb2Ygc3RyaW5ncy5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R8QXJyYXk8U3RyaW5nfE9iamVjdD59IHZhbHVlXG5cdCAqIEByZXR1cm4ge0FycmF5PFN0cmluZz59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbm9ybWFsaXplJDEodmFsdWUpIHtcblx0ICB2YXIgcmVzID0gW107XG5cdCAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgX2tleSA9IHZhbHVlW2ldO1xuXHQgICAgICBpZiAoX2tleSkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgX2tleSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgIHJlcy5wdXNoKF9rZXkpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBmb3IgKHZhciBrIGluIF9rZXkpIHtcblx0ICAgICAgICAgICAgaWYgKF9rZXlba10pIHJlcy5wdXNoKGspO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcblx0ICAgICAgaWYgKHZhbHVlW2tleV0pIHJlcy5wdXNoKGtleSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBZGQgb3IgcmVtb3ZlIGEgY2xhc3MvY2xhc3NlcyBvbiBhbiBlbGVtZW50XG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleSBUaGUgY2xhc3MgbmFtZS4gVGhpcyBtYXkgb3IgbWF5IG5vdFxuXHQgKiAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW4gYSBzcGFjZSBjaGFyYWN0ZXIsIGluIHN1Y2ggYVxuXHQgKiAgICAgICAgICAgICAgICAgICAgIGNhc2Ugd2UnbGwgZGVhbCB3aXRoIG11bHRpcGxlIGNsYXNzXG5cdCAqICAgICAgICAgICAgICAgICAgICAgbmFtZXMgYXQgb25jZS5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhcHBseShlbCwga2V5LCBmbikge1xuXHQgIGtleSA9IGtleS50cmltKCk7XG5cdCAgaWYgKGtleS5pbmRleE9mKCcgJykgPT09IC0xKSB7XG5cdCAgICBmbihlbCwga2V5KTtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgLy8gVGhlIGtleSBjb250YWlucyBvbmUgb3IgbW9yZSBzcGFjZSBjaGFyYWN0ZXJzLlxuXHQgIC8vIFNpbmNlIGEgY2xhc3MgbmFtZSBkb2Vzbid0IGFjY2VwdCBzdWNoIGNoYXJhY3RlcnMsIHdlXG5cdCAgLy8gdHJlYXQgaXQgYXMgbXVsdGlwbGUgY2xhc3Nlcy5cblx0ICB2YXIga2V5cyA9IGtleS5zcGxpdCgvXFxzKy8pO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGZuKGVsLCBrZXlzW2ldKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBjb21wb25lbnQgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBDT01QT05FTlQsXG5cdFxuXHQgIHBhcmFtczogWydrZWVwLWFsaXZlJywgJ3RyYW5zaXRpb24tbW9kZScsICdpbmxpbmUtdGVtcGxhdGUnXSxcblx0XG5cdCAgLyoqXG5cdCAgICogU2V0dXAuIFR3byBwb3NzaWJsZSB1c2FnZXM6XG5cdCAgICpcblx0ICAgKiAtIHN0YXRpYzpcblx0ICAgKiAgIDxjb21wPiBvciA8ZGl2IHYtY29tcG9uZW50PVwiY29tcFwiPlxuXHQgICAqXG5cdCAgICogLSBkeW5hbWljOlxuXHQgICAqICAgPGNvbXBvbmVudCA6aXM9XCJ2aWV3XCI+XG5cdCAgICovXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICBpZiAoIXRoaXMuZWwuX192dWVfXykge1xuXHQgICAgICAvLyBrZWVwLWFsaXZlIGNhY2hlXG5cdCAgICAgIHRoaXMua2VlcEFsaXZlID0gdGhpcy5wYXJhbXMua2VlcEFsaXZlO1xuXHQgICAgICBpZiAodGhpcy5rZWVwQWxpdmUpIHtcblx0ICAgICAgICB0aGlzLmNhY2hlID0ge307XG5cdCAgICAgIH1cblx0ICAgICAgLy8gY2hlY2sgaW5saW5lLXRlbXBsYXRlXG5cdCAgICAgIGlmICh0aGlzLnBhcmFtcy5pbmxpbmVUZW1wbGF0ZSkge1xuXHQgICAgICAgIC8vIGV4dHJhY3QgaW5saW5lIHRlbXBsYXRlIGFzIGEgRG9jdW1lbnRGcmFnbWVudFxuXHQgICAgICAgIHRoaXMuaW5saW5lVGVtcGxhdGUgPSBleHRyYWN0Q29udGVudCh0aGlzLmVsLCB0cnVlKTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBjb21wb25lbnQgcmVzb2x1dGlvbiByZWxhdGVkIHN0YXRlXG5cdCAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gdGhpcy5Db21wb25lbnQgPSBudWxsO1xuXHQgICAgICAvLyB0cmFuc2l0aW9uIHJlbGF0ZWQgc3RhdGVcblx0ICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbHMgPSAwO1xuXHQgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsQ2IgPSBudWxsO1xuXHQgICAgICAvLyBjcmVhdGUgYSByZWYgYW5jaG9yXG5cdCAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWNvbXBvbmVudCcpO1xuXHQgICAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcblx0ICAgICAgLy8gcmVtb3ZlIGlzIGF0dHJpYnV0ZS5cblx0ICAgICAgLy8gdGhpcyBpcyByZW1vdmVkIGR1cmluZyBjb21waWxhdGlvbiwgYnV0IGJlY2F1c2UgY29tcGlsYXRpb24gaXNcblx0ICAgICAgLy8gY2FjaGVkLCB3aGVuIHRoZSBjb21wb25lbnQgaXMgdXNlZCBlbHNld2hlcmUgdGhpcyBhdHRyaWJ1dGVcblx0ICAgICAgLy8gd2lsbCByZW1haW4gYXQgbGluayB0aW1lLlxuXHQgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnaXMnKTtcblx0ICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJzppcycpO1xuXHQgICAgICAvLyByZW1vdmUgcmVmLCBzYW1lIGFzIGFib3ZlXG5cdCAgICAgIGlmICh0aGlzLmRlc2NyaXB0b3IucmVmKSB7XG5cdCAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ3YtcmVmOicgKyBoeXBoZW5hdGUodGhpcy5kZXNjcmlwdG9yLnJlZikpO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGlmIHN0YXRpYywgYnVpbGQgcmlnaHQgbm93LlxuXHQgICAgICBpZiAodGhpcy5saXRlcmFsKSB7XG5cdCAgICAgICAgdGhpcy5zZXRDb21wb25lbnQodGhpcy5leHByZXNzaW9uKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdjYW5ub3QgbW91bnQgY29tcG9uZW50IFwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiAnICsgJ29uIGFscmVhZHkgbW91bnRlZCBlbGVtZW50OiAnICsgdGhpcy5lbCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUHVibGljIHVwZGF0ZSwgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyIGluIHRoZSBkeW5hbWljXG5cdCAgICogbGl0ZXJhbCBzY2VuYXJpbywgZS5nLiA8Y29tcG9uZW50IDppcz1cInZpZXdcIj5cblx0ICAgKi9cblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIGlmICghdGhpcy5saXRlcmFsKSB7XG5cdCAgICAgIHRoaXMuc2V0Q29tcG9uZW50KHZhbHVlKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBTd2l0Y2ggZHluYW1pYyBjb21wb25lbnRzLiBNYXkgcmVzb2x2ZSB0aGUgY29tcG9uZW50XG5cdCAgICogYXN5bmNocm9ub3VzbHksIGFuZCBwZXJmb3JtIHRyYW5zaXRpb24gYmFzZWQgb25cblx0ICAgKiBzcGVjaWZpZWQgdHJhbnNpdGlvbiBtb2RlLiBBY2NlcHRzIGEgZmV3IGFkZGl0aW9uYWxcblx0ICAgKiBhcmd1bWVudHMgc3BlY2lmaWNhbGx5IGZvciB2dWUtcm91dGVyLlxuXHQgICAqXG5cdCAgICogVGhlIGNhbGxiYWNrIGlzIGNhbGxlZCB3aGVuIHRoZSBmdWxsIHRyYW5zaXRpb24gaXNcblx0ICAgKiBmaW5pc2hlZC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgc2V0Q29tcG9uZW50OiBmdW5jdGlvbiBzZXRDb21wb25lbnQodmFsdWUsIGNiKSB7XG5cdCAgICB0aGlzLmludmFsaWRhdGVQZW5kaW5nKCk7XG5cdCAgICBpZiAoIXZhbHVlKSB7XG5cdCAgICAgIC8vIGp1c3QgcmVtb3ZlIGN1cnJlbnRcblx0ICAgICAgdGhpcy51bmJ1aWxkKHRydWUpO1xuXHQgICAgICB0aGlzLnJlbW92ZSh0aGlzLmNoaWxkVk0sIGNiKTtcblx0ICAgICAgdGhpcy5jaGlsZFZNID0gbnVsbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgdGhpcy5yZXNvbHZlQ29tcG9uZW50KHZhbHVlLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgc2VsZi5tb3VudENvbXBvbmVudChjYik7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlc29sdmUgdGhlIGNvbXBvbmVudCBjb25zdHJ1Y3RvciB0byB1c2Ugd2hlbiBjcmVhdGluZ1xuXHQgICAqIHRoZSBjaGlsZCB2bS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICovXG5cdFxuXHQgIHJlc29sdmVDb21wb25lbnQ6IGZ1bmN0aW9uIHJlc29sdmVDb21wb25lbnQodmFsdWUsIGNiKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uIChDb21wb25lbnQpIHtcblx0ICAgICAgc2VsZi5Db21wb25lbnROYW1lID0gQ29tcG9uZW50Lm9wdGlvbnMubmFtZSB8fCAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogbnVsbCk7XG5cdCAgICAgIHNlbGYuQ29tcG9uZW50ID0gQ29tcG9uZW50O1xuXHQgICAgICBjYigpO1xuXHQgICAgfSk7XG5cdCAgICB0aGlzLnZtLl9yZXNvbHZlQ29tcG9uZW50KHZhbHVlLCB0aGlzLnBlbmRpbmdDb21wb25lbnRDYik7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIHVzaW5nIHRoZSBjdXJyZW50IGNvbnN0cnVjdG9yIGFuZFxuXHQgICAqIHJlcGxhY2UgdGhlIGV4aXN0aW5nIGluc3RhbmNlLiBUaGlzIG1ldGhvZCBkb2Vzbid0IGNhcmVcblx0ICAgKiB3aGV0aGVyIHRoZSBuZXcgY29tcG9uZW50IGFuZCB0aGUgb2xkIG9uZSBhcmUgYWN0dWFsbHlcblx0ICAgKiB0aGUgc2FtZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIG1vdW50Q29tcG9uZW50KGNiKSB7XG5cdCAgICAvLyBhY3R1YWwgbW91bnRcblx0ICAgIHRoaXMudW5idWlsZCh0cnVlKTtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBhY3RpdmF0ZUhvb2tzID0gdGhpcy5Db21wb25lbnQub3B0aW9ucy5hY3RpdmF0ZTtcblx0ICAgIHZhciBjYWNoZWQgPSB0aGlzLmdldENhY2hlZCgpO1xuXHQgICAgdmFyIG5ld0NvbXBvbmVudCA9IHRoaXMuYnVpbGQoKTtcblx0ICAgIGlmIChhY3RpdmF0ZUhvb2tzICYmICFjYWNoZWQpIHtcblx0ICAgICAgdGhpcy53YWl0aW5nRm9yID0gbmV3Q29tcG9uZW50O1xuXHQgICAgICBjYWxsQWN0aXZhdGVIb29rcyhhY3RpdmF0ZUhvb2tzLCBuZXdDb21wb25lbnQsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoc2VsZi53YWl0aW5nRm9yICE9PSBuZXdDb21wb25lbnQpIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc2VsZi53YWl0aW5nRm9yID0gbnVsbDtcblx0ICAgICAgICBzZWxmLnRyYW5zaXRpb24obmV3Q29tcG9uZW50LCBjYik7XG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gdXBkYXRlIHJlZiBmb3Iga2VwdC1hbGl2ZSBjb21wb25lbnRcblx0ICAgICAgaWYgKGNhY2hlZCkge1xuXHQgICAgICAgIG5ld0NvbXBvbmVudC5fdXBkYXRlUmVmKCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy50cmFuc2l0aW9uKG5ld0NvbXBvbmVudCwgY2IpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZW4gdGhlIGNvbXBvbmVudCBjaGFuZ2VzIG9yIHVuYmluZHMgYmVmb3JlIGFuIGFzeW5jXG5cdCAgICogY29uc3RydWN0b3IgaXMgcmVzb2x2ZWQsIHdlIG5lZWQgdG8gaW52YWxpZGF0ZSBpdHNcblx0ICAgKiBwZW5kaW5nIGNhbGxiYWNrLlxuXHQgICAqL1xuXHRcblx0ICBpbnZhbGlkYXRlUGVuZGluZzogZnVuY3Rpb24gaW52YWxpZGF0ZVBlbmRpbmcoKSB7XG5cdCAgICBpZiAodGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpIHtcblx0ICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IuY2FuY2VsKCk7XG5cdCAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gbnVsbDtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBJbnN0YW50aWF0ZS9pbnNlcnQgYSBuZXcgY2hpbGQgdm0uXG5cdCAgICogSWYga2VlcCBhbGl2ZSBhbmQgaGFzIGNhY2hlZCBpbnN0YW5jZSwgaW5zZXJ0IHRoYXRcblx0ICAgKiBpbnN0YW5jZTsgb3RoZXJ3aXNlIGJ1aWxkIGEgbmV3IG9uZSBhbmQgY2FjaGUgaXQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gW2V4dHJhT3B0aW9uc11cblx0ICAgKiBAcmV0dXJuIHtWdWV9IC0gdGhlIGNyZWF0ZWQgaW5zdGFuY2Vcblx0ICAgKi9cblx0XG5cdCAgYnVpbGQ6IGZ1bmN0aW9uIGJ1aWxkKGV4dHJhT3B0aW9ucykge1xuXHQgICAgdmFyIGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkKCk7XG5cdCAgICBpZiAoY2FjaGVkKSB7XG5cdCAgICAgIHJldHVybiBjYWNoZWQ7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5Db21wb25lbnQpIHtcblx0ICAgICAgLy8gZGVmYXVsdCBvcHRpb25zXG5cdCAgICAgIHZhciBvcHRpb25zID0ge1xuXHQgICAgICAgIG5hbWU6IHRoaXMuQ29tcG9uZW50TmFtZSxcblx0ICAgICAgICBlbDogY2xvbmVOb2RlKHRoaXMuZWwpLFxuXHQgICAgICAgIHRlbXBsYXRlOiB0aGlzLmlubGluZVRlbXBsYXRlLFxuXHQgICAgICAgIC8vIG1ha2Ugc3VyZSB0byBhZGQgdGhlIGNoaWxkIHdpdGggY29ycmVjdCBwYXJlbnRcblx0ICAgICAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBpdHMgcGFyZW50XG5cdCAgICAgICAgLy8gc2hvdWxkIGJlIHRoZSB0cmFuc2NsdXNpb24gaG9zdC5cblx0ICAgICAgICBwYXJlbnQ6IHRoaXMuX2hvc3QgfHwgdGhpcy52bSxcblx0ICAgICAgICAvLyBpZiBubyBpbmxpbmUtdGVtcGxhdGUsIHRoZW4gdGhlIGNvbXBpbGVkXG5cdCAgICAgICAgLy8gbGlua2VyIGNhbiBiZSBjYWNoZWQgZm9yIGJldHRlciBwZXJmb3JtYW5jZS5cblx0ICAgICAgICBfbGlua2VyQ2FjaGFibGU6ICF0aGlzLmlubGluZVRlbXBsYXRlLFxuXHQgICAgICAgIF9yZWY6IHRoaXMuZGVzY3JpcHRvci5yZWYsXG5cdCAgICAgICAgX2FzQ29tcG9uZW50OiB0cnVlLFxuXHQgICAgICAgIF9pc1JvdXRlclZpZXc6IHRoaXMuX2lzUm91dGVyVmlldyxcblx0ICAgICAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBjb250ZXh0XG5cdCAgICAgICAgLy8gd2lsbCBiZSB0aGUgY29tbW9uIHBhcmVudCB2bSBvZiB0aGlzIGluc3RhbmNlXG5cdCAgICAgICAgLy8gYW5kIGl0cyBob3N0LlxuXHQgICAgICAgIF9jb250ZXh0OiB0aGlzLnZtLFxuXHQgICAgICAgIC8vIGlmIHRoaXMgaXMgaW5zaWRlIGFuIGlubGluZSB2LWZvciwgdGhlIHNjb3BlXG5cdCAgICAgICAgLy8gd2lsbCBiZSB0aGUgaW50ZXJtZWRpYXRlIHNjb3BlIGNyZWF0ZWQgZm9yIHRoaXNcblx0ICAgICAgICAvLyByZXBlYXQgZnJhZ21lbnQuIHRoaXMgaXMgdXNlZCBmb3IgbGlua2luZyBwcm9wc1xuXHQgICAgICAgIC8vIGFuZCBjb250YWluZXIgZGlyZWN0aXZlcy5cblx0ICAgICAgICBfc2NvcGU6IHRoaXMuX3Njb3BlLFxuXHQgICAgICAgIC8vIHBhc3MgaW4gdGhlIG93bmVyIGZyYWdtZW50IG9mIHRoaXMgY29tcG9uZW50LlxuXHQgICAgICAgIC8vIHRoaXMgaXMgbmVjZXNzYXJ5IHNvIHRoYXQgdGhlIGZyYWdtZW50IGNhbiBrZWVwXG5cdCAgICAgICAgLy8gdHJhY2sgb2YgaXRzIGNvbnRhaW5lZCBjb21wb25lbnRzIGluIG9yZGVyIHRvXG5cdCAgICAgICAgLy8gY2FsbCBhdHRhY2gvZGV0YWNoIGhvb2tzIGZvciB0aGVtLlxuXHQgICAgICAgIF9mcmFnOiB0aGlzLl9mcmFnXG5cdCAgICAgIH07XG5cdCAgICAgIC8vIGV4dHJhIG9wdGlvbnNcblx0ICAgICAgLy8gaW4gMS4wLjAgdGhpcyBpcyB1c2VkIGJ5IHZ1ZS1yb3V0ZXIgb25seVxuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKGV4dHJhT3B0aW9ucykge1xuXHQgICAgICAgIGV4dGVuZChvcHRpb25zLCBleHRyYU9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBjaGlsZCA9IG5ldyB0aGlzLkNvbXBvbmVudChvcHRpb25zKTtcblx0ICAgICAgaWYgKHRoaXMua2VlcEFsaXZlKSB7XG5cdCAgICAgICAgdGhpcy5jYWNoZVt0aGlzLkNvbXBvbmVudC5jaWRdID0gY2hpbGQ7XG5cdCAgICAgIH1cblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwuaGFzQXR0cmlidXRlKCd0cmFuc2l0aW9uJykgJiYgY2hpbGQuX2lzRnJhZ21lbnQpIHtcblx0ICAgICAgICB3YXJuKCdUcmFuc2l0aW9ucyB3aWxsIG5vdCB3b3JrIG9uIGEgZnJhZ21lbnQgaW5zdGFuY2UuICcgKyAnVGVtcGxhdGU6ICcgKyBjaGlsZC4kb3B0aW9ucy50ZW1wbGF0ZSwgY2hpbGQpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBjaGlsZDtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBUcnkgdG8gZ2V0IGEgY2FjaGVkIGluc3RhbmNlIG9mIHRoZSBjdXJyZW50IGNvbXBvbmVudC5cblx0ICAgKlxuXHQgICAqIEByZXR1cm4ge1Z1ZXx1bmRlZmluZWR9XG5cdCAgICovXG5cdFxuXHQgIGdldENhY2hlZDogZnVuY3Rpb24gZ2V0Q2FjaGVkKCkge1xuXHQgICAgcmV0dXJuIHRoaXMua2VlcEFsaXZlICYmIHRoaXMuY2FjaGVbdGhpcy5Db21wb25lbnQuY2lkXTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBUZWFyZG93biB0aGUgY3VycmVudCBjaGlsZCwgYnV0IGRlZmVycyBjbGVhbnVwIHNvXG5cdCAgICogdGhhdCB3ZSBjYW4gc2VwYXJhdGUgdGhlIGRlc3Ryb3kgYW5kIHJlbW92YWwgc3RlcHMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyXG5cdCAgICovXG5cdFxuXHQgIHVuYnVpbGQ6IGZ1bmN0aW9uIHVuYnVpbGQoZGVmZXIpIHtcblx0ICAgIGlmICh0aGlzLndhaXRpbmdGb3IpIHtcblx0ICAgICAgaWYgKCF0aGlzLmtlZXBBbGl2ZSkge1xuXHQgICAgICAgIHRoaXMud2FpdGluZ0Zvci4kZGVzdHJveSgpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMud2FpdGluZ0ZvciA9IG51bGw7XG5cdCAgICB9XG5cdCAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkVk07XG5cdCAgICBpZiAoIWNoaWxkIHx8IHRoaXMua2VlcEFsaXZlKSB7XG5cdCAgICAgIGlmIChjaGlsZCkge1xuXHQgICAgICAgIC8vIHJlbW92ZSByZWZcblx0ICAgICAgICBjaGlsZC5faW5hY3RpdmUgPSB0cnVlO1xuXHQgICAgICAgIGNoaWxkLl91cGRhdGVSZWYodHJ1ZSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gdGhlIHNvbGUgcHVycG9zZSBvZiBgZGVmZXJDbGVhbnVwYCBpcyBzbyB0aGF0IHdlIGNhblxuXHQgICAgLy8gXCJkZWFjdGl2YXRlXCIgdGhlIHZtIHJpZ2h0IG5vdyBhbmQgcGVyZm9ybSBET00gcmVtb3ZhbFxuXHQgICAgLy8gbGF0ZXIuXG5cdCAgICBjaGlsZC4kZGVzdHJveShmYWxzZSwgZGVmZXIpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZSBjdXJyZW50IGRlc3Ryb3llZCBjaGlsZCBhbmQgbWFudWFsbHkgZG9cblx0ICAgKiB0aGUgY2xlYW51cCBhZnRlciByZW1vdmFsLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgKi9cblx0XG5cdCAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoY2hpbGQsIGNiKSB7XG5cdCAgICB2YXIga2VlcEFsaXZlID0gdGhpcy5rZWVwQWxpdmU7XG5cdCAgICBpZiAoY2hpbGQpIHtcblx0ICAgICAgLy8gd2UgbWF5IGhhdmUgYSBjb21wb25lbnQgc3dpdGNoIHdoZW4gYSBwcmV2aW91c1xuXHQgICAgICAvLyBjb21wb25lbnQgaXMgc3RpbGwgYmVpbmcgdHJhbnNpdGlvbmVkIG91dC5cblx0ICAgICAgLy8gd2Ugd2FudCB0byB0cmlnZ2VyIG9ubHkgb25lIGxhc3Rlc3QgaW5zZXJ0aW9uIGNiXG5cdCAgICAgIC8vIHdoZW4gdGhlIGV4aXN0aW5nIHRyYW5zaXRpb24gZmluaXNoZXMuICgjMTExOSlcblx0ICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbHMrKztcblx0ICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbENiID0gY2I7XG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgY2hpbGQuJHJlbW92ZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbHMtLTtcblx0ICAgICAgICBpZiAoIWtlZXBBbGl2ZSkgY2hpbGQuX2NsZWFudXAoKTtcblx0ICAgICAgICBpZiAoIXNlbGYucGVuZGluZ1JlbW92YWxzICYmIHNlbGYucGVuZGluZ1JlbW92YWxDYikge1xuXHQgICAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbENiKCk7XG5cdCAgICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IgPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9IGVsc2UgaWYgKGNiKSB7XG5cdCAgICAgIGNiKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQWN0dWFsbHkgc3dhcCB0aGUgY29tcG9uZW50cywgZGVwZW5kaW5nIG9uIHRoZVxuXHQgICAqIHRyYW5zaXRpb24gbW9kZS4gRGVmYXVsdHMgdG8gc2ltdWx0YW5lb3VzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgdHJhbnNpdGlvbjogZnVuY3Rpb24gdHJhbnNpdGlvbih0YXJnZXQsIGNiKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgY3VycmVudCA9IHRoaXMuY2hpbGRWTTtcblx0ICAgIC8vIGZvciBkZXZ0b29sIGluc3BlY3Rpb25cblx0ICAgIGlmIChjdXJyZW50KSBjdXJyZW50Ll9pbmFjdGl2ZSA9IHRydWU7XG5cdCAgICB0YXJnZXQuX2luYWN0aXZlID0gZmFsc2U7XG5cdCAgICB0aGlzLmNoaWxkVk0gPSB0YXJnZXQ7XG5cdCAgICBzd2l0Y2ggKHNlbGYucGFyYW1zLnRyYW5zaXRpb25Nb2RlKSB7XG5cdCAgICAgIGNhc2UgJ2luLW91dCc6XG5cdCAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQsIGNiKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAnb3V0LWluJzpcblx0ICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50LCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgY2IpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBkZWZhdWx0OlxuXHQgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQpO1xuXHQgICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBjYik7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogVW5iaW5kLlxuXHQgICAqL1xuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHRoaXMuaW52YWxpZGF0ZVBlbmRpbmcoKTtcblx0ICAgIC8vIERvIG5vdCBkZWZlciBjbGVhbnVwIHdoZW4gdW5iaW5kaW5nXG5cdCAgICB0aGlzLnVuYnVpbGQoKTtcblx0ICAgIC8vIGRlc3Ryb3kgYWxsIGtlZXAtYWxpdmUgY2FjaGVkIGluc3RhbmNlc1xuXHQgICAgaWYgKHRoaXMuY2FjaGUpIHtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuY2FjaGUpIHtcblx0ICAgICAgICB0aGlzLmNhY2hlW2tleV0uJGRlc3Ryb3koKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLmNhY2hlID0gbnVsbDtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2FsbCBhY3RpdmF0ZSBob29rcyBpbiBvcmRlciAoYXN5bmNocm9ub3VzKVxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBob29rc1xuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjYWxsQWN0aXZhdGVIb29rcyhob29rcywgdm0sIGNiKSB7XG5cdCAgdmFyIHRvdGFsID0gaG9va3MubGVuZ3RoO1xuXHQgIHZhciBjYWxsZWQgPSAwO1xuXHQgIGhvb2tzWzBdLmNhbGwodm0sIG5leHQpO1xuXHQgIGZ1bmN0aW9uIG5leHQoKSB7XG5cdCAgICBpZiAoKytjYWxsZWQgPj0gdG90YWwpIHtcblx0ICAgICAgY2IoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGhvb2tzW2NhbGxlZF0uY2FsbCh2bSwgbmV4dCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgcHJvcEJpbmRpbmdNb2RlcyA9IGNvbmZpZy5fcHJvcEJpbmRpbmdNb2Rlcztcblx0dmFyIGVtcHR5ID0ge307XG5cdFxuXHQvLyByZWdleGVzXG5cdHZhciBpZGVudFJFJDEgPSAvXlskX2EtekEtWl0rW1xcdyRdKiQvO1xuXHR2YXIgc2V0dGFibGVQYXRoUkUgPSAvXltBLVphLXpfJF1bXFx3JF0qKFxcLltBLVphLXpfJF1bXFx3JF0qfFxcW1teXFxbXFxdXStcXF0pKiQvO1xuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgcHJvcHMgb24gYSByb290IGVsZW1lbnQgYW5kIHJldHVyblxuXHQgKiBhIHByb3BzIGxpbmsgZnVuY3Rpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0FycmF5fSBwcm9wT3B0aW9uc1xuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHJldHVybiB7RnVuY3Rpb259IHByb3BzTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZVByb3BzKGVsLCBwcm9wT3B0aW9ucywgdm0pIHtcblx0ICB2YXIgcHJvcHMgPSBbXTtcblx0ICB2YXIgbmFtZXMgPSBPYmplY3Qua2V5cyhwcm9wT3B0aW9ucyk7XG5cdCAgdmFyIGkgPSBuYW1lcy5sZW5ndGg7XG5cdCAgdmFyIG9wdGlvbnMsIG5hbWUsIGF0dHIsIHZhbHVlLCBwYXRoLCBwYXJzZWQsIHByb3A7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgbmFtZSA9IG5hbWVzW2ldO1xuXHQgICAgb3B0aW9ucyA9IHByb3BPcHRpb25zW25hbWVdIHx8IGVtcHR5O1xuXHRcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG5hbWUgPT09ICckZGF0YScpIHtcblx0ICAgICAgd2FybignRG8gbm90IHVzZSAkZGF0YSBhcyBwcm9wLicsIHZtKTtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gcHJvcHMgY291bGQgY29udGFpbiBkYXNoZXMsIHdoaWNoIHdpbGwgYmVcblx0ICAgIC8vIGludGVycHJldGVkIGFzIG1pbnVzIGNhbGN1bGF0aW9ucyBieSB0aGUgcGFyc2VyXG5cdCAgICAvLyBzbyB3ZSBuZWVkIHRvIGNhbWVsaXplIHRoZSBwYXRoIGhlcmVcblx0ICAgIHBhdGggPSBjYW1lbGl6ZShuYW1lKTtcblx0ICAgIGlmICghaWRlbnRSRSQxLnRlc3QocGF0aCkpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHByb3Aga2V5OiBcIicgKyBuYW1lICsgJ1wiLiBQcm9wIGtleXMgJyArICdtdXN0IGJlIHZhbGlkIGlkZW50aWZpZXJzLicsIHZtKTtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdFxuXHQgICAgcHJvcCA9IHtcblx0ICAgICAgbmFtZTogbmFtZSxcblx0ICAgICAgcGF0aDogcGF0aCxcblx0ICAgICAgb3B0aW9uczogb3B0aW9ucyxcblx0ICAgICAgbW9kZTogcHJvcEJpbmRpbmdNb2Rlcy5PTkVfV0FZLFxuXHQgICAgICByYXc6IG51bGxcblx0ICAgIH07XG5cdFxuXHQgICAgYXR0ciA9IGh5cGhlbmF0ZShuYW1lKTtcblx0ICAgIC8vIGZpcnN0IGNoZWNrIGR5bmFtaWMgdmVyc2lvblxuXHQgICAgaWYgKCh2YWx1ZSA9IGdldEJpbmRBdHRyKGVsLCBhdHRyKSkgPT09IG51bGwpIHtcblx0ICAgICAgaWYgKCh2YWx1ZSA9IGdldEJpbmRBdHRyKGVsLCBhdHRyICsgJy5zeW5jJykpICE9PSBudWxsKSB7XG5cdCAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZO1xuXHQgICAgICB9IGVsc2UgaWYgKCh2YWx1ZSA9IGdldEJpbmRBdHRyKGVsLCBhdHRyICsgJy5vbmNlJykpICE9PSBudWxsKSB7XG5cdCAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfVElNRTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG5cdCAgICAgIC8vIGhhcyBkeW5hbWljIGJpbmRpbmchXG5cdCAgICAgIHByb3AucmF3ID0gdmFsdWU7XG5cdCAgICAgIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcblx0ICAgICAgdmFsdWUgPSBwYXJzZWQuZXhwcmVzc2lvbjtcblx0ICAgICAgcHJvcC5maWx0ZXJzID0gcGFyc2VkLmZpbHRlcnM7XG5cdCAgICAgIC8vIGNoZWNrIGJpbmRpbmcgdHlwZVxuXHQgICAgICBpZiAoaXNMaXRlcmFsKHZhbHVlKSAmJiAhcGFyc2VkLmZpbHRlcnMpIHtcblx0ICAgICAgICAvLyBmb3IgZXhwcmVzc2lvbnMgY29udGFpbmluZyBsaXRlcmFsIG51bWJlcnMgYW5kXG5cdCAgICAgICAgLy8gYm9vbGVhbnMsIHRoZXJlJ3Mgbm8gbmVlZCB0byBzZXR1cCBhIHByb3AgYmluZGluZyxcblx0ICAgICAgICAvLyBzbyB3ZSBjYW4gb3B0aW1pemUgdGhlbSBhcyBhIG9uZS10aW1lIHNldC5cblx0ICAgICAgICBwcm9wLm9wdGltaXplZExpdGVyYWwgPSB0cnVlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHByb3AuZHluYW1pYyA9IHRydWU7XG5cdCAgICAgICAgLy8gY2hlY2sgbm9uLXNldHRhYmxlIHBhdGggZm9yIHR3by13YXkgYmluZGluZ3Ncblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBwcm9wLm1vZGUgPT09IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWSAmJiAhc2V0dGFibGVQYXRoUkUudGVzdCh2YWx1ZSkpIHtcblx0ICAgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWTtcblx0ICAgICAgICAgIHdhcm4oJ0Nhbm5vdCBiaW5kIHR3by13YXkgcHJvcCB3aXRoIG5vbi1zZXR0YWJsZSAnICsgJ3BhcmVudCBwYXRoOiAnICsgdmFsdWUsIHZtKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcHJvcC5wYXJlbnRQYXRoID0gdmFsdWU7XG5cdFxuXHQgICAgICAvLyB3YXJuIHJlcXVpcmVkIHR3by13YXlcblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgb3B0aW9ucy50d29XYXkgJiYgcHJvcC5tb2RlICE9PSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVkpIHtcblx0ICAgICAgICB3YXJuKCdQcm9wIFwiJyArIG5hbWUgKyAnXCIgZXhwZWN0cyBhIHR3by13YXkgYmluZGluZyB0eXBlLicsIHZtKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmICgodmFsdWUgPSBnZXRBdHRyKGVsLCBhdHRyKSkgIT09IG51bGwpIHtcblx0ICAgICAgLy8gaGFzIGxpdGVyYWwgYmluZGluZyFcblx0ICAgICAgcHJvcC5yYXcgPSB2YWx1ZTtcblx0ICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAvLyBjaGVjayBwb3NzaWJsZSBjYW1lbENhc2UgcHJvcCB1c2FnZVxuXHQgICAgICB2YXIgbG93ZXJDYXNlTmFtZSA9IHBhdGgudG9Mb3dlckNhc2UoKTtcblx0ICAgICAgdmFsdWUgPSAvW0EtWlxcLV0vLnRlc3QobmFtZSkgJiYgKGVsLmdldEF0dHJpYnV0ZShsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCd2LWJpbmQ6JyArIGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lICsgJy5vbmNlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCd2LWJpbmQ6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLm9uY2UnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSArICcuc3luYycpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lICsgJy5zeW5jJykpO1xuXHQgICAgICBpZiAodmFsdWUpIHtcblx0ICAgICAgICB3YXJuKCdQb3NzaWJsZSB1c2FnZSBlcnJvciBmb3IgcHJvcCBgJyArIGxvd2VyQ2FzZU5hbWUgKyAnYCAtICcgKyAnZGlkIHlvdSBtZWFuIGAnICsgYXR0ciArICdgPyBIVE1MIGlzIGNhc2UtaW5zZW5zaXRpdmUsIHJlbWVtYmVyIHRvIHVzZSAnICsgJ2tlYmFiLWNhc2UgZm9yIHByb3BzIGluIHRlbXBsYXRlcy4nLCB2bSk7XG5cdCAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5yZXF1aXJlZCkge1xuXHQgICAgICAgIC8vIHdhcm4gbWlzc2luZyByZXF1aXJlZFxuXHQgICAgICAgIHdhcm4oJ01pc3NpbmcgcmVxdWlyZWQgcHJvcDogJyArIG5hbWUsIHZtKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gcHVzaCBwcm9wXG5cdCAgICBwcm9wcy5wdXNoKHByb3ApO1xuXHQgIH1cblx0ICByZXR1cm4gbWFrZVByb3BzTGlua0ZuKHByb3BzKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEJ1aWxkIGEgZnVuY3Rpb24gdGhhdCBhcHBsaWVzIHByb3BzIHRvIGEgdm0uXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHByb3BzXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSBwcm9wc0xpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VQcm9wc0xpbmtGbihwcm9wcykge1xuXHQgIHJldHVybiBmdW5jdGlvbiBwcm9wc0xpbmtGbih2bSwgc2NvcGUpIHtcblx0ICAgIC8vIHN0b3JlIHJlc29sdmVkIHByb3BzIGluZm9cblx0ICAgIHZtLl9wcm9wcyA9IHt9O1xuXHQgICAgdmFyIGlubGluZVByb3BzID0gdm0uJG9wdGlvbnMucHJvcHNEYXRhO1xuXHQgICAgdmFyIGkgPSBwcm9wcy5sZW5ndGg7XG5cdCAgICB2YXIgcHJvcCwgcGF0aCwgb3B0aW9ucywgdmFsdWUsIHJhdztcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgcHJvcCA9IHByb3BzW2ldO1xuXHQgICAgICByYXcgPSBwcm9wLnJhdztcblx0ICAgICAgcGF0aCA9IHByb3AucGF0aDtcblx0ICAgICAgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcblx0ICAgICAgdm0uX3Byb3BzW3BhdGhdID0gcHJvcDtcblx0ICAgICAgaWYgKGlubGluZVByb3BzICYmIGhhc093bihpbmxpbmVQcm9wcywgcGF0aCkpIHtcblx0ICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgaW5saW5lUHJvcHNbcGF0aF0pO1xuXHQgICAgICB9aWYgKHJhdyA9PT0gbnVsbCkge1xuXHQgICAgICAgIC8vIGluaXRpYWxpemUgYWJzZW50IHByb3Bcblx0ICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdW5kZWZpbmVkKTtcblx0ICAgICAgfSBlbHNlIGlmIChwcm9wLmR5bmFtaWMpIHtcblx0ICAgICAgICAvLyBkeW5hbWljIHByb3Bcblx0ICAgICAgICBpZiAocHJvcC5tb2RlID09PSBwcm9wQmluZGluZ01vZGVzLk9ORV9USU1FKSB7XG5cdCAgICAgICAgICAvLyBvbmUgdGltZSBiaW5kaW5nXG5cdCAgICAgICAgICB2YWx1ZSA9IChzY29wZSB8fCB2bS5fY29udGV4dCB8fCB2bSkuJGdldChwcm9wLnBhcmVudFBhdGgpO1xuXHQgICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgaWYgKHZtLl9jb250ZXh0KSB7XG5cdCAgICAgICAgICAgIC8vIGR5bmFtaWMgYmluZGluZ1xuXHQgICAgICAgICAgICB2bS5fYmluZERpcih7XG5cdCAgICAgICAgICAgICAgbmFtZTogJ3Byb3AnLFxuXHQgICAgICAgICAgICAgIGRlZjogcHJvcERlZixcblx0ICAgICAgICAgICAgICBwcm9wOiBwcm9wXG5cdCAgICAgICAgICAgIH0sIG51bGwsIG51bGwsIHNjb3BlKTsgLy8gZWwsIGhvc3QsIHNjb3BlXG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIC8vIHJvb3QgaW5zdGFuY2Vcblx0ICAgICAgICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdm0uJGdldChwcm9wLnBhcmVudFBhdGgpKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmIChwcm9wLm9wdGltaXplZExpdGVyYWwpIHtcblx0ICAgICAgICAvLyBvcHRpbWl6ZWQgbGl0ZXJhbCwgY2FzdCBpdCBhbmQganVzdCBzZXQgb25jZVxuXHQgICAgICAgIHZhciBzdHJpcHBlZCA9IHN0cmlwUXVvdGVzKHJhdyk7XG5cdCAgICAgICAgdmFsdWUgPSBzdHJpcHBlZCA9PT0gcmF3ID8gdG9Cb29sZWFuKHRvTnVtYmVyKHJhdykpIDogc3RyaXBwZWQ7XG5cdCAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBzdHJpbmcgbGl0ZXJhbCwgYnV0IHdlIG5lZWQgdG8gY2F0ZXIgZm9yXG5cdCAgICAgICAgLy8gQm9vbGVhbiBwcm9wcyB3aXRoIG5vIHZhbHVlLCBvciB3aXRoIHNhbWVcblx0ICAgICAgICAvLyBsaXRlcmFsIHZhbHVlIChlLmcuIGRpc2FibGVkPVwiZGlzYWJsZWRcIilcblx0ICAgICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1sb2FkZXIvaXNzdWVzLzE4MlxuXHQgICAgICAgIHZhbHVlID0gb3B0aW9ucy50eXBlID09PSBCb29sZWFuICYmIChyYXcgPT09ICcnIHx8IHJhdyA9PT0gaHlwaGVuYXRlKHByb3AubmFtZSkpID8gdHJ1ZSA6IHJhdztcblx0ICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByb2Nlc3MgYSBwcm9wIHdpdGggYSByYXdWYWx1ZSwgYXBwbHlpbmcgbmVjZXNzYXJ5IGNvZXJzaW9ucyxcblx0ICogZGVmYXVsdCB2YWx1ZXMgJiBhc3NlcnRpb25zIGFuZCBjYWxsIHRoZSBnaXZlbiBjYWxsYmFjayB3aXRoXG5cdCAqIHByb2Nlc3NlZCB2YWx1ZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG5cdCAqIEBwYXJhbSB7Kn0gcmF3VmFsdWVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCByYXdWYWx1ZSwgZm4pIHtcblx0ICB2YXIgaXNTaW1wbGUgPSBwcm9wLmR5bmFtaWMgJiYgaXNTaW1wbGVQYXRoKHByb3AucGFyZW50UGF0aCk7XG5cdCAgdmFyIHZhbHVlID0gcmF3VmFsdWU7XG5cdCAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHZhbHVlID0gZ2V0UHJvcERlZmF1bHRWYWx1ZSh2bSwgcHJvcCk7XG5cdCAgfVxuXHQgIHZhbHVlID0gY29lcmNlUHJvcChwcm9wLCB2YWx1ZSwgdm0pO1xuXHQgIHZhciBjb2VyY2VkID0gdmFsdWUgIT09IHJhd1ZhbHVlO1xuXHQgIGlmICghYXNzZXJ0UHJvcChwcm9wLCB2YWx1ZSwgdm0pKSB7XG5cdCAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcblx0ICB9XG5cdCAgaWYgKGlzU2ltcGxlICYmICFjb2VyY2VkKSB7XG5cdCAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGZuKHZhbHVlKTtcblx0ICAgIH0pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBmbih2YWx1ZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogU2V0IGEgcHJvcCdzIGluaXRpYWwgdmFsdWUgb24gYSB2bSBhbmQgaXRzIGRhdGEgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3Bcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSkge1xuXHQgIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHZhbHVlLCBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgIGRlZmluZVJlYWN0aXZlKHZtLCBwcm9wLnBhdGgsIHZhbHVlKTtcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFVwZGF0ZSBhIHByb3AncyB2YWx1ZSBvbiBhIHZtLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3Bcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZVByb3Aodm0sIHByb3AsIHZhbHVlKSB7XG5cdCAgcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgdmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgdm1bcHJvcC5wYXRoXSA9IHZhbHVlO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IHRoZSBkZWZhdWx0IHZhbHVlIG9mIGEgcHJvcC5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG5cdCAqIEByZXR1cm4geyp9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0UHJvcERlZmF1bHRWYWx1ZSh2bSwgcHJvcCkge1xuXHQgIC8vIG5vIGRlZmF1bHQsIHJldHVybiB1bmRlZmluZWRcblx0ICB2YXIgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcblx0ICBpZiAoIWhhc093bihvcHRpb25zLCAnZGVmYXVsdCcpKSB7XG5cdCAgICAvLyBhYnNlbnQgYm9vbGVhbiB2YWx1ZSBkZWZhdWx0cyB0byBmYWxzZVxuXHQgICAgcmV0dXJuIG9wdGlvbnMudHlwZSA9PT0gQm9vbGVhbiA/IGZhbHNlIDogdW5kZWZpbmVkO1xuXHQgIH1cblx0ICB2YXIgZGVmID0gb3B0aW9uc1snZGVmYXVsdCddO1xuXHQgIC8vIHdhcm4gYWdhaW5zdCBub24tZmFjdG9yeSBkZWZhdWx0cyBmb3IgT2JqZWN0ICYgQXJyYXlcblx0ICBpZiAoaXNPYmplY3QoZGVmKSkge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIGRlZmF1bHQgdmFsdWUgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiOiAnICsgJ1Byb3BzIHdpdGggdHlwZSBPYmplY3QvQXJyYXkgbXVzdCB1c2UgYSBmYWN0b3J5IGZ1bmN0aW9uICcgKyAndG8gcmV0dXJuIHRoZSBkZWZhdWx0IHZhbHVlLicsIHZtKTtcblx0ICB9XG5cdCAgLy8gY2FsbCBmYWN0b3J5IGZ1bmN0aW9uIGZvciBub24tRnVuY3Rpb24gdHlwZXNcblx0ICByZXR1cm4gdHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJyAmJiBvcHRpb25zLnR5cGUgIT09IEZ1bmN0aW9uID8gZGVmLmNhbGwodm0pIDogZGVmO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXNzZXJ0IHdoZXRoZXIgYSBwcm9wIGlzIHZhbGlkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFzc2VydFByb3AocHJvcCwgdmFsdWUsIHZtKSB7XG5cdCAgaWYgKCFwcm9wLm9wdGlvbnMucmVxdWlyZWQgJiYgKCAvLyBub24tcmVxdWlyZWRcblx0ICBwcm9wLnJhdyA9PT0gbnVsbCB8fCAvLyBhYnNjZW50XG5cdCAgdmFsdWUgPT0gbnVsbCkgLy8gbnVsbCBvciB1bmRlZmluZWRcblx0ICApIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdCAgdmFyIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG5cdCAgdmFyIHR5cGUgPSBvcHRpb25zLnR5cGU7XG5cdCAgdmFyIHZhbGlkID0gIXR5cGU7XG5cdCAgdmFyIGV4cGVjdGVkVHlwZXMgPSBbXTtcblx0ICBpZiAodHlwZSkge1xuXHQgICAgaWYgKCFpc0FycmF5KHR5cGUpKSB7XG5cdCAgICAgIHR5cGUgPSBbdHlwZV07XG5cdCAgICB9XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR5cGUubGVuZ3RoICYmICF2YWxpZDsgaSsrKSB7XG5cdCAgICAgIHZhciBhc3NlcnRlZFR5cGUgPSBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlW2ldKTtcblx0ICAgICAgZXhwZWN0ZWRUeXBlcy5wdXNoKGFzc2VydGVkVHlwZS5leHBlY3RlZFR5cGUpO1xuXHQgICAgICB2YWxpZCA9IGFzc2VydGVkVHlwZS52YWxpZDtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKCF2YWxpZCkge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgd2FybignSW52YWxpZCBwcm9wOiB0eXBlIGNoZWNrIGZhaWxlZCBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCIuJyArICcgRXhwZWN0ZWQgJyArIGV4cGVjdGVkVHlwZXMubWFwKGZvcm1hdFR5cGUpLmpvaW4oJywgJykgKyAnLCBnb3QgJyArIGZvcm1hdFZhbHVlKHZhbHVlKSArICcuJywgdm0pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICB2YXIgdmFsaWRhdG9yID0gb3B0aW9ucy52YWxpZGF0b3I7XG5cdCAgaWYgKHZhbGlkYXRvcikge1xuXHQgICAgaWYgKCF2YWxpZGF0b3IodmFsdWUpKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBwcm9wOiBjdXN0b20gdmFsaWRhdG9yIGNoZWNrIGZhaWxlZCBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCIuJywgdm0pO1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9yY2UgcGFyc2luZyB2YWx1ZSB3aXRoIGNvZXJjZSBvcHRpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7Kn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb2VyY2VQcm9wKHByb3AsIHZhbHVlLCB2bSkge1xuXHQgIHZhciBjb2VyY2UgPSBwcm9wLm9wdGlvbnMuY29lcmNlO1xuXHQgIGlmICghY29lcmNlKSB7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfVxuXHQgIGlmICh0eXBlb2YgY29lcmNlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICByZXR1cm4gY29lcmNlKHZhbHVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIGNvZXJjZSBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCI6IGV4cGVjdGVkIGZ1bmN0aW9uLCBnb3QgJyArIHR5cGVvZiBjb2VyY2UgKyAnLicsIHZtKTtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBc3NlcnQgdGhlIHR5cGUgb2YgYSB2YWx1ZVxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHR5cGVcblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFzc2VydFR5cGUodmFsdWUsIHR5cGUpIHtcblx0ICB2YXIgdmFsaWQ7XG5cdCAgdmFyIGV4cGVjdGVkVHlwZTtcblx0ICBpZiAodHlwZSA9PT0gU3RyaW5nKSB7XG5cdCAgICBleHBlY3RlZFR5cGUgPSAnc3RyaW5nJztcblx0ICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSBOdW1iZXIpIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdudW1iZXInO1xuXHQgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IEJvb2xlYW4pIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdib29sZWFuJztcblx0ICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSBGdW5jdGlvbikge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ2Z1bmN0aW9uJztcblx0ICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSBPYmplY3QpIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdvYmplY3QnO1xuXHQgICAgdmFsaWQgPSBpc1BsYWluT2JqZWN0KHZhbHVlKTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IEFycmF5KSB7XG5cdCAgICBleHBlY3RlZFR5cGUgPSAnYXJyYXknO1xuXHQgICAgdmFsaWQgPSBpc0FycmF5KHZhbHVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG5cdCAgfVxuXHQgIHJldHVybiB7XG5cdCAgICB2YWxpZDogdmFsaWQsXG5cdCAgICBleHBlY3RlZFR5cGU6IGV4cGVjdGVkVHlwZVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JtYXQgdHlwZSBmb3Igb3V0cHV0XG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRUeXBlKHR5cGUpIHtcblx0ICByZXR1cm4gdHlwZSA/IHR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0eXBlLnNsaWNlKDEpIDogJ2N1c3RvbSB0eXBlJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcm1hdCB2YWx1ZVxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRWYWx1ZSh2YWwpIHtcblx0ICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkuc2xpY2UoOCwgLTEpO1xuXHR9XG5cdFxuXHR2YXIgYmluZGluZ01vZGVzID0gY29uZmlnLl9wcm9wQmluZGluZ01vZGVzO1xuXHRcblx0dmFyIHByb3BEZWYgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgY2hpbGQgPSB0aGlzLnZtO1xuXHQgICAgdmFyIHBhcmVudCA9IGNoaWxkLl9jb250ZXh0O1xuXHQgICAgLy8gcGFzc2VkIGluIGZyb20gY29tcGlsZXIgZGlyZWN0bHlcblx0ICAgIHZhciBwcm9wID0gdGhpcy5kZXNjcmlwdG9yLnByb3A7XG5cdCAgICB2YXIgY2hpbGRLZXkgPSBwcm9wLnBhdGg7XG5cdCAgICB2YXIgcGFyZW50S2V5ID0gcHJvcC5wYXJlbnRQYXRoO1xuXHQgICAgdmFyIHR3b1dheSA9IHByb3AubW9kZSA9PT0gYmluZGluZ01vZGVzLlRXT19XQVk7XG5cdFxuXHQgICAgdmFyIHBhcmVudFdhdGNoZXIgPSB0aGlzLnBhcmVudFdhdGNoZXIgPSBuZXcgV2F0Y2hlcihwYXJlbnQsIHBhcmVudEtleSwgZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgICB1cGRhdGVQcm9wKGNoaWxkLCBwcm9wLCB2YWwpO1xuXHQgICAgfSwge1xuXHQgICAgICB0d29XYXk6IHR3b1dheSxcblx0ICAgICAgZmlsdGVyczogcHJvcC5maWx0ZXJzLFxuXHQgICAgICAvLyBpbXBvcnRhbnQ6IHByb3BzIG5lZWQgdG8gYmUgb2JzZXJ2ZWQgb24gdGhlXG5cdCAgICAgIC8vIHYtZm9yIHNjb3BlIGlmIHByZXNlbnRcblx0ICAgICAgc2NvcGU6IHRoaXMuX3Njb3BlXG5cdCAgICB9KTtcblx0XG5cdCAgICAvLyBzZXQgdGhlIGNoaWxkIGluaXRpYWwgdmFsdWUuXG5cdCAgICBpbml0UHJvcChjaGlsZCwgcHJvcCwgcGFyZW50V2F0Y2hlci52YWx1ZSk7XG5cdFxuXHQgICAgLy8gc2V0dXAgdHdvLXdheSBiaW5kaW5nXG5cdCAgICBpZiAodHdvV2F5KSB7XG5cdCAgICAgIC8vIGltcG9ydGFudDogZGVmZXIgdGhlIGNoaWxkIHdhdGNoZXIgY3JlYXRpb24gdW50aWxcblx0ICAgICAgLy8gdGhlIGNyZWF0ZWQgaG9vayAoYWZ0ZXIgZGF0YSBvYnNlcnZhdGlvbilcblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICBjaGlsZC4kb25jZSgncHJlLWhvb2s6Y3JlYXRlZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzZWxmLmNoaWxkV2F0Y2hlciA9IG5ldyBXYXRjaGVyKGNoaWxkLCBjaGlsZEtleSwgZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgICAgICAgcGFyZW50V2F0Y2hlci5zZXQodmFsKTtcblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICAvLyBlbnN1cmUgc3luYyB1cHdhcmQgYmVmb3JlIHBhcmVudCBzeW5jIGRvd24uXG5cdCAgICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBpbiBjYXNlcyBlLmcuIHRoZSBjaGlsZFxuXHQgICAgICAgICAgLy8gbXV0YXRlcyBhIHByb3AgYXJyYXksIHRoZW4gcmVwbGFjZXMgaXQuICgjMTY4Mylcblx0ICAgICAgICAgIHN5bmM6IHRydWVcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB0aGlzLnBhcmVudFdhdGNoZXIudGVhcmRvd24oKTtcblx0ICAgIGlmICh0aGlzLmNoaWxkV2F0Y2hlcikge1xuXHQgICAgICB0aGlzLmNoaWxkV2F0Y2hlci50ZWFyZG93bigpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBxdWV1ZSQxID0gW107XG5cdHZhciBxdWV1ZWQgPSBmYWxzZTtcblx0XG5cdC8qKlxuXHQgKiBQdXNoIGEgam9iIGludG8gdGhlIHF1ZXVlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBqb2Jcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwdXNoSm9iKGpvYikge1xuXHQgIHF1ZXVlJDEucHVzaChqb2IpO1xuXHQgIGlmICghcXVldWVkKSB7XG5cdCAgICBxdWV1ZWQgPSB0cnVlO1xuXHQgICAgbmV4dFRpY2soZmx1c2gpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEZsdXNoIHRoZSBxdWV1ZSwgYW5kIGRvIG9uZSBmb3JjZWQgcmVmbG93IGJlZm9yZVxuXHQgKiB0cmlnZ2VyaW5nIHRyYW5zaXRpb25zLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZsdXNoKCkge1xuXHQgIC8vIEZvcmNlIGxheW91dFxuXHQgIHZhciBmID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldEhlaWdodDtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlJDEubGVuZ3RoOyBpKyspIHtcblx0ICAgIHF1ZXVlJDFbaV0oKTtcblx0ICB9XG5cdCAgcXVldWUkMSA9IFtdO1xuXHQgIHF1ZXVlZCA9IGZhbHNlO1xuXHQgIC8vIGR1bW15IHJldHVybiwgc28ganMgbGludGVycyBkb24ndCBjb21wbGFpbiBhYm91dFxuXHQgIC8vIHVudXNlZCB2YXJpYWJsZSBmXG5cdCAgcmV0dXJuIGY7XG5cdH1cblx0XG5cdHZhciBUWVBFX1RSQU5TSVRJT04gPSAndHJhbnNpdGlvbic7XG5cdHZhciBUWVBFX0FOSU1BVElPTiA9ICdhbmltYXRpb24nO1xuXHR2YXIgdHJhbnNEdXJhdGlvblByb3AgPSB0cmFuc2l0aW9uUHJvcCArICdEdXJhdGlvbic7XG5cdHZhciBhbmltRHVyYXRpb25Qcm9wID0gYW5pbWF0aW9uUHJvcCArICdEdXJhdGlvbic7XG5cdFxuXHQvKipcblx0ICogSWYgYSBqdXN0LWVudGVyZWQgZWxlbWVudCBpcyBhcHBsaWVkIHRoZVxuXHQgKiBsZWF2ZSBjbGFzcyB3aGlsZSBpdHMgZW50ZXIgdHJhbnNpdGlvbiBoYXNuJ3Qgc3RhcnRlZCB5ZXQsXG5cdCAqIGFuZCB0aGUgdHJhbnNpdGlvbmVkIHByb3BlcnR5IGhhcyB0aGUgc2FtZSB2YWx1ZSBmb3IgYm90aFxuXHQgKiBlbnRlci9sZWF2ZSwgdGhlbiB0aGUgbGVhdmUgdHJhbnNpdGlvbiB3aWxsIGJlIHNraXBwZWQgYW5kXG5cdCAqIHRoZSB0cmFuc2l0aW9uZW5kIGV2ZW50IG5ldmVyIGZpcmVzLiBUaGlzIGZ1bmN0aW9uIGVuc3VyZXNcblx0ICogaXRzIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBhZnRlciBhIHRyYW5zaXRpb24gaGFzIHN0YXJ0ZWRcblx0ICogYnkgd2FpdGluZyBmb3IgZG91YmxlIHJhZi5cblx0ICpcblx0ICogSXQgZmFsbHMgYmFjayB0byBzZXRUaW1lb3V0IG9uIGRldmljZXMgdGhhdCBzdXBwb3J0IENTU1xuXHQgKiB0cmFuc2l0aW9ucyBidXQgbm90IHJhZiAoZS5nLiBBbmRyb2lkIDQuMiBicm93c2VyKSAtIHNpbmNlXG5cdCAqIHRoZXNlIGVudmlyb25tZW50cyBhcmUgdXN1YWxseSBzbG93LCB3ZSBhcmUgZ2l2aW5nIGl0IGFcblx0ICogcmVsYXRpdmVseSBsYXJnZSB0aW1lb3V0LlxuXHQgKi9cblx0XG5cdHZhciByYWYgPSBpbkJyb3dzZXIgJiYgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTtcblx0dmFyIHdhaXRGb3JUcmFuc2l0aW9uU3RhcnQgPSByYWZcblx0LyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0PyBmdW5jdGlvbiAoZm4pIHtcblx0ICByYWYoZnVuY3Rpb24gKCkge1xuXHQgICAgcmFmKGZuKTtcblx0ICB9KTtcblx0fSA6IGZ1bmN0aW9uIChmbikge1xuXHQgIHNldFRpbWVvdXQoZm4sIDUwKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBIFRyYW5zaXRpb24gb2JqZWN0IHRoYXQgZW5jYXBzdWxhdGVzIHRoZSBzdGF0ZSBhbmQgbG9naWNcblx0ICogb2YgdGhlIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlkXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBob29rc1xuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICovXG5cdGZ1bmN0aW9uIFRyYW5zaXRpb24oZWwsIGlkLCBob29rcywgdm0pIHtcblx0ICB0aGlzLmlkID0gaWQ7XG5cdCAgdGhpcy5lbCA9IGVsO1xuXHQgIHRoaXMuZW50ZXJDbGFzcyA9IGhvb2tzICYmIGhvb2tzLmVudGVyQ2xhc3MgfHwgaWQgKyAnLWVudGVyJztcblx0ICB0aGlzLmxlYXZlQ2xhc3MgPSBob29rcyAmJiBob29rcy5sZWF2ZUNsYXNzIHx8IGlkICsgJy1sZWF2ZSc7XG5cdCAgdGhpcy5ob29rcyA9IGhvb2tzO1xuXHQgIHRoaXMudm0gPSB2bTtcblx0ICAvLyBhc3luYyBzdGF0ZVxuXHQgIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSB0aGlzLm9wID0gdGhpcy5jYiA9IG51bGw7XG5cdCAgdGhpcy5qdXN0RW50ZXJlZCA9IGZhbHNlO1xuXHQgIHRoaXMuZW50ZXJlZCA9IHRoaXMubGVmdCA9IGZhbHNlO1xuXHQgIHRoaXMudHlwZUNhY2hlID0ge307XG5cdCAgLy8gY2hlY2sgY3NzIHRyYW5zaXRpb24gdHlwZVxuXHQgIHRoaXMudHlwZSA9IGhvb2tzICYmIGhvb2tzLnR5cGU7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGlmICh0aGlzLnR5cGUgJiYgdGhpcy50eXBlICE9PSBUWVBFX1RSQU5TSVRJT04gJiYgdGhpcy50eXBlICE9PSBUWVBFX0FOSU1BVElPTikge1xuXHQgICAgICB3YXJuKCdpbnZhbGlkIENTUyB0cmFuc2l0aW9uIHR5cGUgZm9yIHRyYW5zaXRpb249XCInICsgdGhpcy5pZCArICdcIjogJyArIHRoaXMudHlwZSwgdm0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyBiaW5kXG5cdCAgdmFyIHNlbGYgPSB0aGlzO1snZW50ZXJOZXh0VGljaycsICdlbnRlckRvbmUnLCAnbGVhdmVOZXh0VGljaycsICdsZWF2ZURvbmUnXS5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7XG5cdCAgICBzZWxmW21dID0gYmluZChzZWxmW21dLCBzZWxmKTtcblx0ICB9KTtcblx0fVxuXHRcblx0dmFyIHAkMSA9IFRyYW5zaXRpb24ucHJvdG90eXBlO1xuXHRcblx0LyoqXG5cdCAqIFN0YXJ0IGFuIGVudGVyaW5nIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIDEuIGVudGVyIHRyYW5zaXRpb24gdHJpZ2dlcmVkXG5cdCAqIDIuIGNhbGwgYmVmb3JlRW50ZXIgaG9va1xuXHQgKiAzLiBhZGQgZW50ZXIgY2xhc3Ncblx0ICogNC4gaW5zZXJ0L3Nob3cgZWxlbWVudFxuXHQgKiA1LiBjYWxsIGVudGVyIGhvb2sgKHdpdGggcG9zc2libGUgZXhwbGljaXQganMgY2FsbGJhY2spXG5cdCAqIDYuIHJlZmxvd1xuXHQgKiA3LiBiYXNlZCBvbiB0cmFuc2l0aW9uIHR5cGU6XG5cdCAqICAgIC0gdHJhbnNpdGlvbjpcblx0ICogICAgICAgIHJlbW92ZSBjbGFzcyBub3csIHdhaXQgZm9yIHRyYW5zaXRpb25lbmQsXG5cdCAqICAgICAgICB0aGVuIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cblx0ICogICAgLSBhbmltYXRpb246XG5cdCAqICAgICAgICB3YWl0IGZvciBhbmltYXRpb25lbmQsIHJlbW92ZSBjbGFzcyxcblx0ICogICAgICAgIHRoZW4gZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuXHQgKiAgICAtIG5vIGNzcyB0cmFuc2l0aW9uOlxuXHQgKiAgICAgICAgZG9uZSBub3cgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cblx0ICogOC4gd2FpdCBmb3IgZWl0aGVyIGRvbmUgb3IganMgY2FsbGJhY2ssIHRoZW4gY2FsbFxuXHQgKiAgICBhZnRlckVudGVyIGhvb2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gaW5zZXJ0L3Nob3cgdGhlIGVsZW1lbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgKi9cblx0XG5cdHAkMS5lbnRlciA9IGZ1bmN0aW9uIChvcCwgY2IpIHtcblx0ICB0aGlzLmNhbmNlbFBlbmRpbmcoKTtcblx0ICB0aGlzLmNhbGxIb29rKCdiZWZvcmVFbnRlcicpO1xuXHQgIHRoaXMuY2IgPSBjYjtcblx0ICBhZGRDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuXHQgIG9wKCk7XG5cdCAgdGhpcy5lbnRlcmVkID0gZmFsc2U7XG5cdCAgdGhpcy5jYWxsSG9va1dpdGhDYignZW50ZXInKTtcblx0ICBpZiAodGhpcy5lbnRlcmVkKSB7XG5cdCAgICByZXR1cm47IC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cblx0ICB9XG5cdCAgdGhpcy5jYW5jZWwgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MuZW50ZXJDYW5jZWxsZWQ7XG5cdCAgcHVzaEpvYih0aGlzLmVudGVyTmV4dFRpY2spO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFRoZSBcIm5leHRUaWNrXCIgcGhhc2Ugb2YgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbiwgd2hpY2ggaXNcblx0ICogdG8gYmUgcHVzaGVkIGludG8gYSBxdWV1ZSBhbmQgZXhlY3V0ZWQgYWZ0ZXIgYSByZWZsb3cgc29cblx0ICogdGhhdCByZW1vdmluZyB0aGUgY2xhc3MgY2FuIHRyaWdnZXIgYSBDU1MgdHJhbnNpdGlvbi5cblx0ICovXG5cdFxuXHRwJDEuZW50ZXJOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAvLyBwcmV2ZW50IHRyYW5zaXRpb24gc2tpcHBpbmdcblx0ICB0aGlzLmp1c3RFbnRlcmVkID0gdHJ1ZTtcblx0ICB3YWl0Rm9yVHJhbnNpdGlvblN0YXJ0KGZ1bmN0aW9uICgpIHtcblx0ICAgIF90aGlzLmp1c3RFbnRlcmVkID0gZmFsc2U7XG5cdCAgfSk7XG5cdCAgdmFyIGVudGVyRG9uZSA9IHRoaXMuZW50ZXJEb25lO1xuXHQgIHZhciB0eXBlID0gdGhpcy5nZXRDc3NUcmFuc2l0aW9uVHlwZSh0aGlzLmVudGVyQ2xhc3MpO1xuXHQgIGlmICghdGhpcy5wZW5kaW5nSnNDYikge1xuXHQgICAgaWYgKHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTikge1xuXHQgICAgICAvLyB0cmlnZ2VyIHRyYW5zaXRpb24gYnkgcmVtb3ZpbmcgZW50ZXIgY2xhc3Mgbm93XG5cdCAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgICAgIHRoaXMuc2V0dXBDc3NDYih0cmFuc2l0aW9uRW5kRXZlbnQsIGVudGVyRG9uZSk7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFRZUEVfQU5JTUFUSU9OKSB7XG5cdCAgICAgIHRoaXMuc2V0dXBDc3NDYihhbmltYXRpb25FbmRFdmVudCwgZW50ZXJEb25lKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVudGVyRG9uZSgpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OKSB7XG5cdCAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgXCJjbGVhbnVwXCIgcGhhc2Ugb2YgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbi5cblx0ICovXG5cdFxuXHRwJDEuZW50ZXJEb25lID0gZnVuY3Rpb24gKCkge1xuXHQgIHRoaXMuZW50ZXJlZCA9IHRydWU7XG5cdCAgdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcblx0ICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuXHQgIHRoaXMuY2FsbEhvb2soJ2FmdGVyRW50ZXInKTtcblx0ICBpZiAodGhpcy5jYikgdGhpcy5jYigpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFN0YXJ0IGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiAxLiBsZWF2ZSB0cmFuc2l0aW9uIHRyaWdnZXJlZC5cblx0ICogMi4gY2FsbCBiZWZvcmVMZWF2ZSBob29rXG5cdCAqIDMuIGFkZCBsZWF2ZSBjbGFzcyAodHJpZ2dlciBjc3MgdHJhbnNpdGlvbilcblx0ICogNC4gY2FsbCBsZWF2ZSBob29rICh3aXRoIHBvc3NpYmxlIGV4cGxpY2l0IGpzIGNhbGxiYWNrKVxuXHQgKiA1LiByZWZsb3cgaWYgbm8gZXhwbGljaXQganMgY2FsbGJhY2sgaXMgcHJvdmlkZWRcblx0ICogNi4gYmFzZWQgb24gdHJhbnNpdGlvbiB0eXBlOlxuXHQgKiAgICAtIHRyYW5zaXRpb24gb3IgYW5pbWF0aW9uOlxuXHQgKiAgICAgICAgd2FpdCBmb3IgZW5kIGV2ZW50LCByZW1vdmUgY2xhc3MsIHRoZW4gZG9uZSBpZlxuXHQgKiAgICAgICAgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cblx0ICogICAgLSBubyBjc3MgdHJhbnNpdGlvbjpcblx0ICogICAgICAgIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cblx0ICogNy4gd2FpdCBmb3IgZWl0aGVyIGRvbmUgb3IganMgY2FsbGJhY2ssIHRoZW4gY2FsbFxuXHQgKiAgICBhZnRlckxlYXZlIGhvb2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gcmVtb3ZlL2hpZGUgdGhlIGVsZW1lbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgKi9cblx0XG5cdHAkMS5sZWF2ZSA9IGZ1bmN0aW9uIChvcCwgY2IpIHtcblx0ICB0aGlzLmNhbmNlbFBlbmRpbmcoKTtcblx0ICB0aGlzLmNhbGxIb29rKCdiZWZvcmVMZWF2ZScpO1xuXHQgIHRoaXMub3AgPSBvcDtcblx0ICB0aGlzLmNiID0gY2I7XG5cdCAgYWRkQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcblx0ICB0aGlzLmxlZnQgPSBmYWxzZTtcblx0ICB0aGlzLmNhbGxIb29rV2l0aENiKCdsZWF2ZScpO1xuXHQgIGlmICh0aGlzLmxlZnQpIHtcblx0ICAgIHJldHVybjsgLy8gdXNlciBjYWxsZWQgZG9uZSBzeW5jaHJvbm91c2x5LlxuXHQgIH1cblx0ICB0aGlzLmNhbmNlbCA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5sZWF2ZUNhbmNlbGxlZDtcblx0ICAvLyBvbmx5IG5lZWQgdG8gaGFuZGxlIGxlYXZlRG9uZSBpZlxuXHQgIC8vIDEuIHRoZSB0cmFuc2l0aW9uIGlzIGFscmVhZHkgZG9uZSAoc3luY2hyb25vdXNseSBjYWxsZWRcblx0ICAvLyAgICBieSB0aGUgdXNlciwgd2hpY2ggY2F1c2VzIHRoaXMub3Agc2V0IHRvIG51bGwpXG5cdCAgLy8gMi4gdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFja1xuXHQgIGlmICh0aGlzLm9wICYmICF0aGlzLnBlbmRpbmdKc0NiKSB7XG5cdCAgICAvLyBpZiBhIENTUyB0cmFuc2l0aW9uIGxlYXZlcyBpbW1lZGlhdGVseSBhZnRlciBlbnRlcixcblx0ICAgIC8vIHRoZSB0cmFuc2l0aW9uZW5kIGV2ZW50IG5ldmVyIGZpcmVzLiB0aGVyZWZvcmUgd2Vcblx0ICAgIC8vIGRldGVjdCBzdWNoIGNhc2VzIGFuZCBlbmQgdGhlIGxlYXZlIGltbWVkaWF0ZWx5LlxuXHQgICAgaWYgKHRoaXMuanVzdEVudGVyZWQpIHtcblx0ICAgICAgdGhpcy5sZWF2ZURvbmUoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHB1c2hKb2IodGhpcy5sZWF2ZU5leHRUaWNrKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogVGhlIFwibmV4dFRpY2tcIiBwaGFzZSBvZiBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cblx0ICovXG5cdFxuXHRwJDEubGVhdmVOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgdHlwZSA9IHRoaXMuZ2V0Q3NzVHJhbnNpdGlvblR5cGUodGhpcy5sZWF2ZUNsYXNzKTtcblx0ICBpZiAodHlwZSkge1xuXHQgICAgdmFyIGV2ZW50ID0gdHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OID8gdHJhbnNpdGlvbkVuZEV2ZW50IDogYW5pbWF0aW9uRW5kRXZlbnQ7XG5cdCAgICB0aGlzLnNldHVwQ3NzQ2IoZXZlbnQsIHRoaXMubGVhdmVEb25lKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhpcy5sZWF2ZURvbmUoKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogVGhlIFwiY2xlYW51cFwiIHBoYXNlIG9mIGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuXHQgKi9cblx0XG5cdHAkMS5sZWF2ZURvbmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdGhpcy5sZWZ0ID0gdHJ1ZTtcblx0ICB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsO1xuXHQgIHRoaXMub3AoKTtcblx0ICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuXHQgIHRoaXMuY2FsbEhvb2soJ2FmdGVyTGVhdmUnKTtcblx0ICBpZiAodGhpcy5jYikgdGhpcy5jYigpO1xuXHQgIHRoaXMub3AgPSBudWxsO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENhbmNlbCBhbnkgcGVuZGluZyBjYWxsYmFja3MgZnJvbSBhIHByZXZpb3VzbHkgcnVubmluZ1xuXHQgKiBidXQgbm90IGZpbmlzaGVkIHRyYW5zaXRpb24uXG5cdCAqL1xuXHRcblx0cCQxLmNhbmNlbFBlbmRpbmcgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdGhpcy5vcCA9IHRoaXMuY2IgPSBudWxsO1xuXHQgIHZhciBoYXNQZW5kaW5nID0gZmFsc2U7XG5cdCAgaWYgKHRoaXMucGVuZGluZ0Nzc0NiKSB7XG5cdCAgICBoYXNQZW5kaW5nID0gdHJ1ZTtcblx0ICAgIG9mZih0aGlzLmVsLCB0aGlzLnBlbmRpbmdDc3NFdmVudCwgdGhpcy5wZW5kaW5nQ3NzQ2IpO1xuXHQgICAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IG51bGw7XG5cdCAgfVxuXHQgIGlmICh0aGlzLnBlbmRpbmdKc0NiKSB7XG5cdCAgICBoYXNQZW5kaW5nID0gdHJ1ZTtcblx0ICAgIHRoaXMucGVuZGluZ0pzQ2IuY2FuY2VsKCk7XG5cdCAgICB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcblx0ICB9XG5cdCAgaWYgKGhhc1BlbmRpbmcpIHtcblx0ICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuXHQgIH1cblx0ICBpZiAodGhpcy5jYW5jZWwpIHtcblx0ICAgIHRoaXMuY2FuY2VsLmNhbGwodGhpcy52bSwgdGhpcy5lbCk7XG5cdCAgICB0aGlzLmNhbmNlbCA9IG51bGw7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENhbGwgYSB1c2VyLXByb3ZpZGVkIHN5bmNocm9ub3VzIGhvb2sgZnVuY3Rpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG5cdCAqL1xuXHRcblx0cCQxLmNhbGxIb29rID0gZnVuY3Rpb24gKHR5cGUpIHtcblx0ICBpZiAodGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzW3R5cGVdKSB7XG5cdCAgICB0aGlzLmhvb2tzW3R5cGVdLmNhbGwodGhpcy52bSwgdGhpcy5lbCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENhbGwgYSB1c2VyLXByb3ZpZGVkLCBwb3RlbnRpYWxseS1hc3luYyBob29rIGZ1bmN0aW9uLlxuXHQgKiBXZSBjaGVjayBmb3IgdGhlIGxlbmd0aCBvZiBhcmd1bWVudHMgdG8gc2VlIGlmIHRoZSBob29rXG5cdCAqIGV4cGVjdHMgYSBgZG9uZWAgY2FsbGJhY2suIElmIHRydWUsIHRoZSB0cmFuc2l0aW9uJ3MgZW5kXG5cdCAqIHdpbGwgYmUgZGV0ZXJtaW5lZCBieSB3aGVuIHRoZSB1c2VyIGNhbGxzIHRoYXQgY2FsbGJhY2s7XG5cdCAqIG90aGVyd2lzZSwgdGhlIGVuZCBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBDU1MgdHJhbnNpdGlvbiBvclxuXHQgKiBhbmltYXRpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG5cdCAqL1xuXHRcblx0cCQxLmNhbGxIb29rV2l0aENiID0gZnVuY3Rpb24gKHR5cGUpIHtcblx0ICB2YXIgaG9vayA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rc1t0eXBlXTtcblx0ICBpZiAoaG9vaykge1xuXHQgICAgaWYgKGhvb2subGVuZ3RoID4gMSkge1xuXHQgICAgICB0aGlzLnBlbmRpbmdKc0NiID0gY2FuY2VsbGFibGUodGhpc1t0eXBlICsgJ0RvbmUnXSk7XG5cdCAgICB9XG5cdCAgICBob29rLmNhbGwodGhpcy52bSwgdGhpcy5lbCwgdGhpcy5wZW5kaW5nSnNDYik7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEdldCBhbiBlbGVtZW50J3MgdHJhbnNpdGlvbiB0eXBlIGJhc2VkIG9uIHRoZVxuXHQgKiBjYWxjdWxhdGVkIHN0eWxlcy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGNsYXNzTmFtZVxuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9XG5cdCAqL1xuXHRcblx0cCQxLmdldENzc1RyYW5zaXRpb25UeXBlID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICghdHJhbnNpdGlvbkVuZEV2ZW50IHx8XG5cdCAgLy8gc2tpcCBDU1MgdHJhbnNpdGlvbnMgaWYgcGFnZSBpcyBub3QgdmlzaWJsZSAtXG5cdCAgLy8gdGhpcyBzb2x2ZXMgdGhlIGlzc3VlIG9mIHRyYW5zaXRpb25lbmQgZXZlbnRzIG5vdFxuXHQgIC8vIGZpcmluZyB1bnRpbCB0aGUgcGFnZSBpcyB2aXNpYmxlIGFnYWluLlxuXHQgIC8vIHBhZ2VWaXNpYmlsaXR5IEFQSSBpcyBzdXBwb3J0ZWQgaW4gSUUxMCssIHNhbWUgYXNcblx0ICAvLyBDU1MgdHJhbnNpdGlvbnMuXG5cdCAgZG9jdW1lbnQuaGlkZGVuIHx8XG5cdCAgLy8gZXhwbGljaXQganMtb25seSB0cmFuc2l0aW9uXG5cdCAgdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmNzcyA9PT0gZmFsc2UgfHxcblx0ICAvLyBlbGVtZW50IGlzIGhpZGRlblxuXHQgIGlzSGlkZGVuKHRoaXMuZWwpKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciB0eXBlID0gdGhpcy50eXBlIHx8IHRoaXMudHlwZUNhY2hlW2NsYXNzTmFtZV07XG5cdCAgaWYgKHR5cGUpIHJldHVybiB0eXBlO1xuXHQgIHZhciBpbmxpbmVTdHlsZXMgPSB0aGlzLmVsLnN0eWxlO1xuXHQgIHZhciBjb21wdXRlZFN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWwpO1xuXHQgIHZhciB0cmFuc0R1cmF0aW9uID0gaW5saW5lU3R5bGVzW3RyYW5zRHVyYXRpb25Qcm9wXSB8fCBjb21wdXRlZFN0eWxlc1t0cmFuc0R1cmF0aW9uUHJvcF07XG5cdCAgaWYgKHRyYW5zRHVyYXRpb24gJiYgdHJhbnNEdXJhdGlvbiAhPT0gJzBzJykge1xuXHQgICAgdHlwZSA9IFRZUEVfVFJBTlNJVElPTjtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGFuaW1EdXJhdGlvbiA9IGlubGluZVN0eWxlc1thbmltRHVyYXRpb25Qcm9wXSB8fCBjb21wdXRlZFN0eWxlc1thbmltRHVyYXRpb25Qcm9wXTtcblx0ICAgIGlmIChhbmltRHVyYXRpb24gJiYgYW5pbUR1cmF0aW9uICE9PSAnMHMnKSB7XG5cdCAgICAgIHR5cGUgPSBUWVBFX0FOSU1BVElPTjtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKHR5cGUpIHtcblx0ICAgIHRoaXMudHlwZUNhY2hlW2NsYXNzTmFtZV0gPSB0eXBlO1xuXHQgIH1cblx0ICByZXR1cm4gdHlwZTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTZXR1cCBhIENTUyB0cmFuc2l0aW9uZW5kL2FuaW1hdGlvbmVuZCBjYWxsYmFjay5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqL1xuXHRcblx0cCQxLnNldHVwQ3NzQ2IgPSBmdW5jdGlvbiAoZXZlbnQsIGNiKSB7XG5cdCAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSBldmVudDtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICB2YXIgb25FbmQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICBpZiAoZS50YXJnZXQgPT09IGVsKSB7XG5cdCAgICAgIG9mZihlbCwgZXZlbnQsIG9uRW5kKTtcblx0ICAgICAgc2VsZi5wZW5kaW5nQ3NzRXZlbnQgPSBzZWxmLnBlbmRpbmdDc3NDYiA9IG51bGw7XG5cdCAgICAgIGlmICghc2VsZi5wZW5kaW5nSnNDYiAmJiBjYikge1xuXHQgICAgICAgIGNiKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHQgIG9uKGVsLCBldmVudCwgb25FbmQpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgaGlkZGVuIC0gaW4gdGhhdCBjYXNlIHdlIGNhbiBqdXN0XG5cdCAqIHNraXAgdGhlIHRyYW5zaXRpb24gYWxsdG9nZXRoZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc0hpZGRlbihlbCkge1xuXHQgIGlmICgvc3ZnJC8udGVzdChlbC5uYW1lc3BhY2VVUkkpKSB7XG5cdCAgICAvLyBTVkcgZWxlbWVudHMgZG8gbm90IGhhdmUgb2Zmc2V0KFdpZHRofEhlaWdodClcblx0ICAgIC8vIHNvIHdlIG5lZWQgdG8gY2hlY2sgdGhlIGNsaWVudCByZWN0XG5cdCAgICB2YXIgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHQgICAgcmV0dXJuICEocmVjdC53aWR0aCB8fCByZWN0LmhlaWdodCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiAhKGVsLm9mZnNldFdpZHRoIHx8IGVsLm9mZnNldEhlaWdodCB8fCBlbC5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCk7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgdHJhbnNpdGlvbiQxID0ge1xuXHRcblx0ICBwcmlvcml0eTogVFJBTlNJVElPTixcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoaWQsIG9sZElkKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgLy8gcmVzb2x2ZSBvbiBvd25lciB2bVxuXHQgICAgdmFyIGhvb2tzID0gcmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICd0cmFuc2l0aW9ucycsIGlkKTtcblx0ICAgIGlkID0gaWQgfHwgJ3YnO1xuXHQgICAgb2xkSWQgPSBvbGRJZCB8fCAndic7XG5cdCAgICBlbC5fX3ZfdHJhbnMgPSBuZXcgVHJhbnNpdGlvbihlbCwgaWQsIGhvb2tzLCB0aGlzLnZtKTtcblx0ICAgIHJlbW92ZUNsYXNzKGVsLCBvbGRJZCArICctdHJhbnNpdGlvbicpO1xuXHQgICAgYWRkQ2xhc3MoZWwsIGlkICsgJy10cmFuc2l0aW9uJyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGludGVybmFsRGlyZWN0aXZlcyA9IHtcblx0ICBzdHlsZTogc3R5bGUsXG5cdCAgJ2NsYXNzJzogdkNsYXNzLFxuXHQgIGNvbXBvbmVudDogY29tcG9uZW50LFxuXHQgIHByb3A6IHByb3BEZWYsXG5cdCAgdHJhbnNpdGlvbjogdHJhbnNpdGlvbiQxXG5cdH07XG5cdFxuXHQvLyBzcGVjaWFsIGJpbmRpbmcgcHJlZml4ZXNcblx0dmFyIGJpbmRSRSA9IC9edi1iaW5kOnxeOi87XG5cdHZhciBvblJFID0gL152LW9uOnxeQC87XG5cdHZhciBkaXJBdHRyUkUgPSAvXnYtKFteOl0rKSg/OiR8OiguKikkKS87XG5cdHZhciBtb2RpZmllclJFID0gL1xcLlteXFwuXSsvZztcblx0dmFyIHRyYW5zaXRpb25SRSA9IC9eKHYtYmluZDp8Oik/dHJhbnNpdGlvbiQvO1xuXHRcblx0Ly8gZGVmYXVsdCBkaXJlY3RpdmUgcHJpb3JpdHlcblx0dmFyIERFRkFVTFRfUFJJT1JJVFkgPSAxMDAwO1xuXHR2YXIgREVGQVVMVF9URVJNSU5BTF9QUklPUklUWSA9IDIwMDA7XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBhIHRlbXBsYXRlIGFuZCByZXR1cm4gYSByZXVzYWJsZSBjb21wb3NpdGUgbGlua1xuXHQgKiBmdW5jdGlvbiwgd2hpY2ggcmVjdXJzaXZlbHkgY29udGFpbnMgbW9yZSBsaW5rIGZ1bmN0aW9uc1xuXHQgKiBpbnNpZGUuIFRoaXMgdG9wIGxldmVsIGNvbXBpbGUgZnVuY3Rpb24gd291bGQgbm9ybWFsbHlcblx0ICogYmUgY2FsbGVkIG9uIGluc3RhbmNlIHJvb3Qgbm9kZXMsIGJ1dCBjYW4gYWxzbyBiZSB1c2VkXG5cdCAqIGZvciBwYXJ0aWFsIGNvbXBpbGF0aW9uIGlmIHRoZSBwYXJ0aWFsIGFyZ3VtZW50IGlzIHRydWUuXG5cdCAqXG5cdCAqIFRoZSByZXR1cm5lZCBjb21wb3NpdGUgbGluayBmdW5jdGlvbiwgd2hlbiBjYWxsZWQsIHdpbGxcblx0ICogcmV0dXJuIGFuIHVubGluayBmdW5jdGlvbiB0aGF0IHRlYXJzZG93biBhbGwgZGlyZWN0aXZlc1xuXHQgKiBjcmVhdGVkIGR1cmluZyB0aGUgbGlua2luZyBwaGFzZS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gcGFydGlhbFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlKGVsLCBvcHRpb25zLCBwYXJ0aWFsKSB7XG5cdCAgLy8gbGluayBmdW5jdGlvbiBmb3IgdGhlIG5vZGUgaXRzZWxmLlxuXHQgIHZhciBub2RlTGlua0ZuID0gcGFydGlhbCB8fCAhb3B0aW9ucy5fYXNDb21wb25lbnQgPyBjb21waWxlTm9kZShlbCwgb3B0aW9ucykgOiBudWxsO1xuXHQgIC8vIGxpbmsgZnVuY3Rpb24gZm9yIHRoZSBjaGlsZE5vZGVzXG5cdCAgdmFyIGNoaWxkTGlua0ZuID0gIShub2RlTGlua0ZuICYmIG5vZGVMaW5rRm4udGVybWluYWwpICYmICFpc1NjcmlwdChlbCkgJiYgZWwuaGFzQ2hpbGROb2RlcygpID8gY29tcGlsZU5vZGVMaXN0KGVsLmNoaWxkTm9kZXMsIG9wdGlvbnMpIDogbnVsbDtcblx0XG5cdCAgLyoqXG5cdCAgICogQSBjb21wb3NpdGUgbGlua2VyIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbiBhIGFscmVhZHlcblx0ICAgKiBjb21waWxlZCBwaWVjZSBvZiBET00sIHdoaWNoIGluc3RhbnRpYXRlcyBhbGwgZGlyZWN0aXZlXG5cdCAgICogaW5zdGFuY2VzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG5cdCAgICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIGhvc3Qgdm0gb2YgdHJhbnNjbHVkZWQgY29udGVudFxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBsaW5rIGNvbnRleHQgZnJhZ21lbnRcblx0ICAgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG5cdCAgICovXG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiBjb21wb3NpdGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgLy8gY2FjaGUgY2hpbGROb2RlcyBiZWZvcmUgbGlua2luZyBwYXJlbnQsIGZpeCAjNjU3XG5cdCAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkoZWwuY2hpbGROb2Rlcyk7XG5cdCAgICAvLyBsaW5rXG5cdCAgICB2YXIgZGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uIGNvbXBvc2l0ZUxpbmtDYXB0dXJlcigpIHtcblx0ICAgICAgaWYgKG5vZGVMaW5rRm4pIG5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgICAgIGlmIChjaGlsZExpbmtGbikgY2hpbGRMaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgIH0sIHZtKTtcblx0ICAgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIGRpcnMpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBcHBseSBhIGxpbmtlciB0byBhIHZtL2VsZW1lbnQgcGFpciBhbmQgY2FwdHVyZSB0aGVcblx0ICogZGlyZWN0aXZlcyBjcmVhdGVkIGR1cmluZyB0aGUgcHJvY2Vzcy5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gbGlua2VyXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGxpbmtBbmRDYXB0dXJlKGxpbmtlciwgdm0pIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgLy8gcmVzZXQgZGlyZWN0aXZlcyBiZWZvcmUgZXZlcnkgY2FwdHVyZSBpbiBwcm9kdWN0aW9uXG5cdCAgICAvLyBtb2RlLCBzbyB0aGF0IHdoZW4gdW5saW5raW5nIHdlIGRvbid0IG5lZWQgdG8gc3BsaWNlXG5cdCAgICAvLyB0aGVtIG91dCAod2hpY2ggdHVybnMgb3V0IHRvIGJlIGEgcGVyZiBoaXQpLlxuXHQgICAgLy8gdGhleSBhcmUga2VwdCBpbiBkZXZlbG9wbWVudCBtb2RlIGJlY2F1c2UgdGhleSBhcmVcblx0ICAgIC8vIHVzZWZ1bCBmb3IgVnVlJ3Mgb3duIHRlc3RzLlxuXHQgICAgdm0uX2RpcmVjdGl2ZXMgPSBbXTtcblx0ICB9XG5cdCAgdmFyIG9yaWdpbmFsRGlyQ291bnQgPSB2bS5fZGlyZWN0aXZlcy5sZW5ndGg7XG5cdCAgbGlua2VyKCk7XG5cdCAgdmFyIGRpcnMgPSB2bS5fZGlyZWN0aXZlcy5zbGljZShvcmlnaW5hbERpckNvdW50KTtcblx0ICBkaXJzLnNvcnQoZGlyZWN0aXZlQ29tcGFyYXRvcik7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBkaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgZGlyc1tpXS5fYmluZCgpO1xuXHQgIH1cblx0ICByZXR1cm4gZGlycztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERpcmVjdGl2ZSBwcmlvcml0eSBzb3J0IGNvbXBhcmF0b3Jcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IGFcblx0ICogQHBhcmFtIHtPYmplY3R9IGJcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkaXJlY3RpdmVDb21wYXJhdG9yKGEsIGIpIHtcblx0ICBhID0gYS5kZXNjcmlwdG9yLmRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZO1xuXHQgIGIgPSBiLmRlc2NyaXB0b3IuZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfUFJJT1JJVFk7XG5cdCAgcmV0dXJuIGEgPiBiID8gLTEgOiBhID09PSBiID8gMCA6IDE7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBMaW5rZXIgZnVuY3Rpb25zIHJldHVybiBhbiB1bmxpbmsgZnVuY3Rpb24gdGhhdFxuXHQgKiB0ZWFyc2Rvd24gYWxsIGRpcmVjdGl2ZXMgaW5zdGFuY2VzIGdlbmVyYXRlZCBkdXJpbmdcblx0ICogdGhlIHByb2Nlc3MuXG5cdCAqXG5cdCAqIFdlIGNyZWF0ZSB1bmxpbmsgZnVuY3Rpb25zIHdpdGggb25seSB0aGUgbmVjZXNzYXJ5XG5cdCAqIGluZm9ybWF0aW9uIHRvIGF2b2lkIHJldGFpbmluZyBhZGRpdGlvbmFsIGNsb3N1cmVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtBcnJheX0gZGlyc1xuXHQgKiBAcGFyYW0ge1Z1ZX0gW2NvbnRleHRdXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtjb250ZXh0RGlyc11cblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVVubGlua0ZuKHZtLCBkaXJzLCBjb250ZXh0LCBjb250ZXh0RGlycykge1xuXHQgIGZ1bmN0aW9uIHVubGluayhkZXN0cm95aW5nKSB7XG5cdCAgICB0ZWFyZG93bkRpcnModm0sIGRpcnMsIGRlc3Ryb3lpbmcpO1xuXHQgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dERpcnMpIHtcblx0ICAgICAgdGVhcmRvd25EaXJzKGNvbnRleHQsIGNvbnRleHREaXJzKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gZXhwb3NlIGxpbmtlZCBkaXJlY3RpdmVzXG5cdCAgdW5saW5rLmRpcnMgPSBkaXJzO1xuXHQgIHJldHVybiB1bmxpbms7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUZWFyZG93biBwYXJ0aWFsIGxpbmtlZCBkaXJlY3RpdmVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtBcnJheX0gZGlyc1xuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IGRlc3Ryb3lpbmdcblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0ZWFyZG93bkRpcnModm0sIGRpcnMsIGRlc3Ryb3lpbmcpIHtcblx0ICB2YXIgaSA9IGRpcnMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGRpcnNbaV0uX3RlYXJkb3duKCk7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhZGVzdHJveWluZykge1xuXHQgICAgICB2bS5fZGlyZWN0aXZlcy4kcmVtb3ZlKGRpcnNbaV0pO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgbGluayBwcm9wcyBvbiBhbiBpbnN0YW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3BzXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVBbmRMaW5rUHJvcHModm0sIGVsLCBwcm9wcywgc2NvcGUpIHtcblx0ICB2YXIgcHJvcHNMaW5rRm4gPSBjb21waWxlUHJvcHMoZWwsIHByb3BzLCB2bSk7XG5cdCAgdmFyIHByb3BEaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuXHQgICAgcHJvcHNMaW5rRm4odm0sIHNjb3BlKTtcblx0ICB9LCB2bSk7XG5cdCAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgcHJvcERpcnMpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSB0aGUgcm9vdCBlbGVtZW50IG9mIGFuIGluc3RhbmNlLlxuXHQgKlxuXHQgKiAxLiBhdHRycyBvbiBjb250ZXh0IGNvbnRhaW5lciAoY29udGV4dCBzY29wZSlcblx0ICogMi4gYXR0cnMgb24gdGhlIGNvbXBvbmVudCB0ZW1wbGF0ZSByb290IG5vZGUsIGlmXG5cdCAqICAgIHJlcGxhY2U6dHJ1ZSAoY2hpbGQgc2NvcGUpXG5cdCAqXG5cdCAqIElmIHRoaXMgaXMgYSBmcmFnbWVudCBpbnN0YW5jZSwgd2Ugb25seSBuZWVkIHRvIGNvbXBpbGUgMS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dE9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZVJvb3QoZWwsIG9wdGlvbnMsIGNvbnRleHRPcHRpb25zKSB7XG5cdCAgdmFyIGNvbnRhaW5lckF0dHJzID0gb3B0aW9ucy5fY29udGFpbmVyQXR0cnM7XG5cdCAgdmFyIHJlcGxhY2VyQXR0cnMgPSBvcHRpb25zLl9yZXBsYWNlckF0dHJzO1xuXHQgIHZhciBjb250ZXh0TGlua0ZuLCByZXBsYWNlckxpbmtGbjtcblx0XG5cdCAgLy8gb25seSBuZWVkIHRvIGNvbXBpbGUgb3RoZXIgYXR0cmlidXRlcyBmb3Jcblx0ICAvLyBub24tZnJhZ21lbnQgaW5zdGFuY2VzXG5cdCAgaWYgKGVsLm5vZGVUeXBlICE9PSAxMSkge1xuXHQgICAgLy8gZm9yIGNvbXBvbmVudHMsIGNvbnRhaW5lciBhbmQgcmVwbGFjZXIgbmVlZCB0byBiZVxuXHQgICAgLy8gY29tcGlsZWQgc2VwYXJhdGVseSBhbmQgbGlua2VkIGluIGRpZmZlcmVudCBzY29wZXMuXG5cdCAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQpIHtcblx0ICAgICAgLy8gMi4gY29udGFpbmVyIGF0dHJpYnV0ZXNcblx0ICAgICAgaWYgKGNvbnRhaW5lckF0dHJzICYmIGNvbnRleHRPcHRpb25zKSB7XG5cdCAgICAgICAgY29udGV4dExpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGNvbnRhaW5lckF0dHJzLCBjb250ZXh0T3B0aW9ucyk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHJlcGxhY2VyQXR0cnMpIHtcblx0ICAgICAgICAvLyAzLiByZXBsYWNlciBhdHRyaWJ1dGVzXG5cdCAgICAgICAgcmVwbGFjZXJMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhyZXBsYWNlckF0dHJzLCBvcHRpb25zKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gbm9uLWNvbXBvbmVudCwganVzdCBjb21waWxlIGFzIGEgbm9ybWFsIGVsZW1lbnQuXG5cdCAgICAgIHJlcGxhY2VyTGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoZWwuYXR0cmlidXRlcywgb3B0aW9ucyk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbnRhaW5lckF0dHJzKSB7XG5cdCAgICAvLyB3YXJuIGNvbnRhaW5lciBkaXJlY3RpdmVzIGZvciBmcmFnbWVudCBpbnN0YW5jZXNcblx0ICAgIHZhciBuYW1lcyA9IGNvbnRhaW5lckF0dHJzLmZpbHRlcihmdW5jdGlvbiAoYXR0cikge1xuXHQgICAgICAvLyBhbGxvdyB2dWUtbG9hZGVyL3Z1ZWlmeSBzY29wZWQgY3NzIGF0dHJpYnV0ZXNcblx0ICAgICAgcmV0dXJuIGF0dHIubmFtZS5pbmRleE9mKCdfdi0nKSA8IDAgJiZcblx0ICAgICAgLy8gYWxsb3cgZXZlbnQgbGlzdGVuZXJzXG5cdCAgICAgICFvblJFLnRlc3QoYXR0ci5uYW1lKSAmJlxuXHQgICAgICAvLyBhbGxvdyBzbG90c1xuXHQgICAgICBhdHRyLm5hbWUgIT09ICdzbG90Jztcblx0ICAgIH0pLm1hcChmdW5jdGlvbiAoYXR0cikge1xuXHQgICAgICByZXR1cm4gJ1wiJyArIGF0dHIubmFtZSArICdcIic7XG5cdCAgICB9KTtcblx0ICAgIGlmIChuYW1lcy5sZW5ndGgpIHtcblx0ICAgICAgdmFyIHBsdXJhbCA9IG5hbWVzLmxlbmd0aCA+IDE7XG5cdCAgICAgIHdhcm4oJ0F0dHJpYnV0ZScgKyAocGx1cmFsID8gJ3MgJyA6ICcgJykgKyBuYW1lcy5qb2luKCcsICcpICsgKHBsdXJhbCA/ICcgYXJlJyA6ICcgaXMnKSArICcgaWdub3JlZCBvbiBjb21wb25lbnQgJyArICc8JyArIG9wdGlvbnMuZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICsgJz4gYmVjYXVzZSAnICsgJ3RoZSBjb21wb25lbnQgaXMgYSBmcmFnbWVudCBpbnN0YW5jZTogJyArICdodHRwOi8vdnVlanMub3JnL2d1aWRlL2NvbXBvbmVudHMuaHRtbCNGcmFnbWVudC1JbnN0YW5jZScpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgb3B0aW9ucy5fY29udGFpbmVyQXR0cnMgPSBvcHRpb25zLl9yZXBsYWNlckF0dHJzID0gbnVsbDtcblx0ICByZXR1cm4gZnVuY3Rpb24gcm9vdExpbmtGbih2bSwgZWwsIHNjb3BlKSB7XG5cdCAgICAvLyBsaW5rIGNvbnRleHQgc2NvcGUgZGlyc1xuXHQgICAgdmFyIGNvbnRleHQgPSB2bS5fY29udGV4dDtcblx0ICAgIHZhciBjb250ZXh0RGlycztcblx0ICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHRMaW5rRm4pIHtcblx0ICAgICAgY29udGV4dERpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgY29udGV4dExpbmtGbihjb250ZXh0LCBlbCwgbnVsbCwgc2NvcGUpO1xuXHQgICAgICB9LCBjb250ZXh0KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBsaW5rIHNlbGZcblx0ICAgIHZhciBzZWxmRGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKHJlcGxhY2VyTGlua0ZuKSByZXBsYWNlckxpbmtGbih2bSwgZWwpO1xuXHQgICAgfSwgdm0pO1xuXHRcblx0ICAgIC8vIHJldHVybiB0aGUgdW5saW5rIGZ1bmN0aW9uIHRoYXQgdGVhcnNkb3duIGNvbnRleHRcblx0ICAgIC8vIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuXHQgICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgc2VsZkRpcnMsIGNvbnRleHQsIGNvbnRleHREaXJzKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBhIG5vZGUgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4gYmFzZWQgb24gdGhlXG5cdCAqIG5vZGUgdHlwZS5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZU5vZGUobm9kZSwgb3B0aW9ucykge1xuXHQgIHZhciB0eXBlID0gbm9kZS5ub2RlVHlwZTtcblx0ICBpZiAodHlwZSA9PT0gMSAmJiAhaXNTY3JpcHQobm9kZSkpIHtcblx0ICAgIHJldHVybiBjb21waWxlRWxlbWVudChub2RlLCBvcHRpb25zKTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IDMgJiYgbm9kZS5kYXRhLnRyaW0oKSkge1xuXHQgICAgcmV0dXJuIGNvbXBpbGVUZXh0Tm9kZShub2RlLCBvcHRpb25zKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBhbiBlbGVtZW50IGFuZCByZXR1cm4gYSBub2RlTGlua0ZuLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZUVsZW1lbnQoZWwsIG9wdGlvbnMpIHtcblx0ICAvLyBwcmVwcm9jZXNzIHRleHRhcmVhcy5cblx0ICAvLyB0ZXh0YXJlYSB0cmVhdHMgaXRzIHRleHQgY29udGVudCBhcyB0aGUgaW5pdGlhbCB2YWx1ZS5cblx0ICAvLyBqdXN0IGJpbmQgaXQgYXMgYW4gYXR0ciBkaXJlY3RpdmUgZm9yIHZhbHVlLlxuXHQgIGlmIChlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG5cdCAgICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KGVsLnZhbHVlKTtcblx0ICAgIGlmICh0b2tlbnMpIHtcblx0ICAgICAgZWwuc2V0QXR0cmlidXRlKCc6dmFsdWUnLCB0b2tlbnNUb0V4cCh0b2tlbnMpKTtcblx0ICAgICAgZWwudmFsdWUgPSAnJztcblx0ICAgIH1cblx0ICB9XG5cdCAgdmFyIGxpbmtGbjtcblx0ICB2YXIgaGFzQXR0cnMgPSBlbC5oYXNBdHRyaWJ1dGVzKCk7XG5cdCAgdmFyIGF0dHJzID0gaGFzQXR0cnMgJiYgdG9BcnJheShlbC5hdHRyaWJ1dGVzKTtcblx0ICAvLyBjaGVjayB0ZXJtaW5hbCBkaXJlY3RpdmVzIChmb3IgJiBpZilcblx0ICBpZiAoaGFzQXR0cnMpIHtcblx0ICAgIGxpbmtGbiA9IGNoZWNrVGVybWluYWxEaXJlY3RpdmVzKGVsLCBhdHRycywgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIC8vIGNoZWNrIGVsZW1lbnQgZGlyZWN0aXZlc1xuXHQgIGlmICghbGlua0ZuKSB7XG5cdCAgICBsaW5rRm4gPSBjaGVja0VsZW1lbnREaXJlY3RpdmVzKGVsLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgLy8gY2hlY2sgY29tcG9uZW50XG5cdCAgaWYgKCFsaW5rRm4pIHtcblx0ICAgIGxpbmtGbiA9IGNoZWNrQ29tcG9uZW50KGVsLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgLy8gbm9ybWFsIGRpcmVjdGl2ZXNcblx0ICBpZiAoIWxpbmtGbiAmJiBoYXNBdHRycykge1xuXHQgICAgbGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoYXR0cnMsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICByZXR1cm4gbGlua0ZuO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBhIHRleHROb2RlIGFuZCByZXR1cm4gYSBub2RlTGlua0ZuLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1RleHROb2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9IHRleHROb2RlTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZVRleHROb2RlKG5vZGUsIG9wdGlvbnMpIHtcblx0ICAvLyBza2lwIG1hcmtlZCB0ZXh0IG5vZGVzXG5cdCAgaWYgKG5vZGUuX3NraXApIHtcblx0ICAgIHJldHVybiByZW1vdmVUZXh0O1xuXHQgIH1cblx0XG5cdCAgdmFyIHRva2VucyA9IHBhcnNlVGV4dChub2RlLndob2xlVGV4dCk7XG5cdCAgaWYgKCF0b2tlbnMpIHtcblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0XG5cdCAgLy8gbWFyayBhZGphY2VudCB0ZXh0IG5vZGVzIGFzIHNraXBwZWQsXG5cdCAgLy8gYmVjYXVzZSB3ZSBhcmUgdXNpbmcgbm9kZS53aG9sZVRleHQgdG8gY29tcGlsZVxuXHQgIC8vIGFsbCBhZGphY2VudCB0ZXh0IG5vZGVzIHRvZ2V0aGVyLiBUaGlzIGZpeGVzXG5cdCAgLy8gaXNzdWVzIGluIElFIHdoZXJlIHNvbWV0aW1lcyBpdCBzcGxpdHMgdXAgYSBzaW5nbGVcblx0ICAvLyB0ZXh0IG5vZGUgaW50byBtdWx0aXBsZSBvbmVzLlxuXHQgIHZhciBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcblx0ICB3aGlsZSAobmV4dCAmJiBuZXh0Lm5vZGVUeXBlID09PSAzKSB7XG5cdCAgICBuZXh0Ll9za2lwID0gdHJ1ZTtcblx0ICAgIG5leHQgPSBuZXh0Lm5leHRTaWJsaW5nO1xuXHQgIH1cblx0XG5cdCAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdCAgdmFyIGVsLCB0b2tlbjtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IHRva2Vucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHRva2VuID0gdG9rZW5zW2ldO1xuXHQgICAgZWwgPSB0b2tlbi50YWcgPyBwcm9jZXNzVGV4dFRva2VuKHRva2VuLCBvcHRpb25zKSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRva2VuLnZhbHVlKTtcblx0ICAgIGZyYWcuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH1cblx0ICByZXR1cm4gbWFrZVRleHROb2RlTGlua0ZuKHRva2VucywgZnJhZywgb3B0aW9ucyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBMaW5rZXIgZm9yIGFuIHNraXBwZWQgdGV4dCBub2RlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtUZXh0fSBub2RlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlVGV4dCh2bSwgbm9kZSkge1xuXHQgIHJlbW92ZShub2RlKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByb2Nlc3MgYSBzaW5nbGUgdGV4dCB0b2tlbi5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHRva2VuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge05vZGV9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc1RleHRUb2tlbih0b2tlbiwgb3B0aW9ucykge1xuXHQgIHZhciBlbDtcblx0ICBpZiAodG9rZW4ub25lVGltZSkge1xuXHQgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0b2tlbi52YWx1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGlmICh0b2tlbi5odG1sKSB7XG5cdCAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgndi1odG1sJyk7XG5cdCAgICAgIHNldFRva2VuVHlwZSgnaHRtbCcpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gSUUgd2lsbCBjbGVhbiB1cCBlbXB0eSB0ZXh0Tm9kZXMgZHVyaW5nXG5cdCAgICAgIC8vIGZyYWcuY2xvbmVOb2RlKHRydWUpLCBzbyB3ZSBoYXZlIHRvIGdpdmUgaXRcblx0ICAgICAgLy8gc29tZXRoaW5nIGhlcmUuLi5cblx0ICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnICcpO1xuXHQgICAgICBzZXRUb2tlblR5cGUoJ3RleHQnKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgZnVuY3Rpb24gc2V0VG9rZW5UeXBlKHR5cGUpIHtcblx0ICAgIGlmICh0b2tlbi5kZXNjcmlwdG9yKSByZXR1cm47XG5cdCAgICB2YXIgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodG9rZW4udmFsdWUpO1xuXHQgICAgdG9rZW4uZGVzY3JpcHRvciA9IHtcblx0ICAgICAgbmFtZTogdHlwZSxcblx0ICAgICAgZGVmOiBkaXJlY3RpdmVzW3R5cGVdLFxuXHQgICAgICBleHByZXNzaW9uOiBwYXJzZWQuZXhwcmVzc2lvbixcblx0ICAgICAgZmlsdGVyczogcGFyc2VkLmZpbHRlcnNcblx0ICAgIH07XG5cdCAgfVxuXHQgIHJldHVybiBlbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEJ1aWxkIGEgZnVuY3Rpb24gdGhhdCBwcm9jZXNzZXMgYSB0ZXh0Tm9kZS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheTxPYmplY3Q+fSB0b2tlbnNcblx0ICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVRleHROb2RlTGlua0ZuKHRva2VucywgZnJhZykge1xuXHQgIHJldHVybiBmdW5jdGlvbiB0ZXh0Tm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlKSB7XG5cdCAgICB2YXIgZnJhZ0Nsb25lID0gZnJhZy5jbG9uZU5vZGUodHJ1ZSk7XG5cdCAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkoZnJhZ0Nsb25lLmNoaWxkTm9kZXMpO1xuXHQgICAgdmFyIHRva2VuLCB2YWx1ZSwgbm9kZTtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB0b2tlbiA9IHRva2Vuc1tpXTtcblx0ICAgICAgdmFsdWUgPSB0b2tlbi52YWx1ZTtcblx0ICAgICAgaWYgKHRva2VuLnRhZykge1xuXHQgICAgICAgIG5vZGUgPSBjaGlsZE5vZGVzW2ldO1xuXHQgICAgICAgIGlmICh0b2tlbi5vbmVUaW1lKSB7XG5cdCAgICAgICAgICB2YWx1ZSA9IChzY29wZSB8fCB2bSkuJGV2YWwodmFsdWUpO1xuXHQgICAgICAgICAgaWYgKHRva2VuLmh0bWwpIHtcblx0ICAgICAgICAgICAgcmVwbGFjZShub2RlLCBwYXJzZVRlbXBsYXRlKHZhbHVlLCB0cnVlKSk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBub2RlLmRhdGEgPSBfdG9TdHJpbmcodmFsdWUpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB2bS5fYmluZERpcih0b2tlbi5kZXNjcmlwdG9yLCBub2RlLCBob3N0LCBzY29wZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXBsYWNlKGVsLCBmcmFnQ2xvbmUpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGEgbm9kZSBsaXN0IGFuZCByZXR1cm4gYSBjaGlsZExpbmtGbi5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlTGlzdH0gbm9kZUxpc3Rcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVOb2RlTGlzdChub2RlTGlzdCwgb3B0aW9ucykge1xuXHQgIHZhciBsaW5rRm5zID0gW107XG5cdCAgdmFyIG5vZGVMaW5rRm4sIGNoaWxkTGlua0ZuLCBub2RlO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZUxpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBub2RlID0gbm9kZUxpc3RbaV07XG5cdCAgICBub2RlTGlua0ZuID0gY29tcGlsZU5vZGUobm9kZSwgb3B0aW9ucyk7XG5cdCAgICBjaGlsZExpbmtGbiA9ICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJiBub2RlLnRhZ05hbWUgIT09ICdTQ1JJUFQnICYmIG5vZGUuaGFzQ2hpbGROb2RlcygpID8gY29tcGlsZU5vZGVMaXN0KG5vZGUuY2hpbGROb2Rlcywgb3B0aW9ucykgOiBudWxsO1xuXHQgICAgbGlua0Zucy5wdXNoKG5vZGVMaW5rRm4sIGNoaWxkTGlua0ZuKTtcblx0ICB9XG5cdCAgcmV0dXJuIGxpbmtGbnMubGVuZ3RoID8gbWFrZUNoaWxkTGlua0ZuKGxpbmtGbnMpIDogbnVsbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIE1ha2UgYSBjaGlsZCBsaW5rIGZ1bmN0aW9uIGZvciBhIG5vZGUncyBjaGlsZE5vZGVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5PEZ1bmN0aW9uPn0gbGlua0Zuc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gY2hpbGRMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlQ2hpbGRMaW5rRm4obGlua0Zucykge1xuXHQgIHJldHVybiBmdW5jdGlvbiBjaGlsZExpbmtGbih2bSwgbm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICB2YXIgbm9kZSwgbm9kZUxpbmtGbiwgY2hpbGRyZW5MaW5rRm47XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbiA9IDAsIGwgPSBsaW5rRm5zLmxlbmd0aDsgaSA8IGw7IG4rKykge1xuXHQgICAgICBub2RlID0gbm9kZXNbbl07XG5cdCAgICAgIG5vZGVMaW5rRm4gPSBsaW5rRm5zW2krK107XG5cdCAgICAgIGNoaWxkcmVuTGlua0ZuID0gbGlua0Zuc1tpKytdO1xuXHQgICAgICAvLyBjYWNoZSBjaGlsZE5vZGVzIGJlZm9yZSBsaW5raW5nIHBhcmVudCwgZml4ICM2NTdcblx0ICAgICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KG5vZGUuY2hpbGROb2Rlcyk7XG5cdCAgICAgIGlmIChub2RlTGlua0ZuKSB7XG5cdCAgICAgICAgbm9kZUxpbmtGbih2bSwgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChjaGlsZHJlbkxpbmtGbikge1xuXHQgICAgICAgIGNoaWxkcmVuTGlua0ZuKHZtLCBjaGlsZE5vZGVzLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgZm9yIGVsZW1lbnQgZGlyZWN0aXZlcyAoY3VzdG9tIGVsZW1lbnRzIHRoYXQgc2hvdWxkXG5cdCAqIGJlIHJlc292bGVkIGFzIHRlcm1pbmFsIGRpcmVjdGl2ZXMpLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2hlY2tFbGVtZW50RGlyZWN0aXZlcyhlbCwgb3B0aW9ucykge1xuXHQgIHZhciB0YWcgPSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdCAgaWYgKGNvbW1vblRhZ1JFLnRlc3QodGFnKSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgZGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdlbGVtZW50RGlyZWN0aXZlcycsIHRhZyk7XG5cdCAgaWYgKGRlZikge1xuXHQgICAgcmV0dXJuIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIHRhZywgJycsIG9wdGlvbnMsIGRlZik7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIGNvbXBvbmVudC4gSWYgeWVzLCByZXR1cm5cblx0ICogYSBjb21wb25lbnQgbGluayBmdW5jdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2hlY2tDb21wb25lbnQoZWwsIG9wdGlvbnMpIHtcblx0ICB2YXIgY29tcG9uZW50ID0gY2hlY2tDb21wb25lbnRBdHRyKGVsLCBvcHRpb25zKTtcblx0ICBpZiAoY29tcG9uZW50KSB7XG5cdCAgICB2YXIgcmVmID0gZmluZFJlZihlbCk7XG5cdCAgICB2YXIgZGVzY3JpcHRvciA9IHtcblx0ICAgICAgbmFtZTogJ2NvbXBvbmVudCcsXG5cdCAgICAgIHJlZjogcmVmLFxuXHQgICAgICBleHByZXNzaW9uOiBjb21wb25lbnQuaWQsXG5cdCAgICAgIGRlZjogaW50ZXJuYWxEaXJlY3RpdmVzLmNvbXBvbmVudCxcblx0ICAgICAgbW9kaWZpZXJzOiB7XG5cdCAgICAgICAgbGl0ZXJhbDogIWNvbXBvbmVudC5keW5hbWljXG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICB2YXIgY29tcG9uZW50TGlua0ZuID0gZnVuY3Rpb24gY29tcG9uZW50TGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgICAgaWYgKHJlZikge1xuXHQgICAgICAgIGRlZmluZVJlYWN0aXZlKChzY29wZSB8fCB2bSkuJHJlZnMsIHJlZiwgbnVsbCk7XG5cdCAgICAgIH1cblx0ICAgICAgdm0uX2JpbmREaXIoZGVzY3JpcHRvciwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgIH07XG5cdCAgICBjb21wb25lbnRMaW5rRm4udGVybWluYWwgPSB0cnVlO1xuXHQgICAgcmV0dXJuIGNvbXBvbmVudExpbmtGbjtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBhbiBlbGVtZW50IGZvciB0ZXJtaW5hbCBkaXJlY3RpdmVzIGluIGZpeGVkIG9yZGVyLlxuXHQgKiBJZiBpdCBmaW5kcyBvbmUsIHJldHVybiBhIHRlcm1pbmFsIGxpbmsgZnVuY3Rpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtBcnJheX0gYXR0cnNcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb259IHRlcm1pbmFsTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2hlY2tUZXJtaW5hbERpcmVjdGl2ZXMoZWwsIGF0dHJzLCBvcHRpb25zKSB7XG5cdCAgLy8gc2tpcCB2LXByZVxuXHQgIGlmIChnZXRBdHRyKGVsLCAndi1wcmUnKSAhPT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIHNraXA7XG5cdCAgfVxuXHQgIC8vIHNraXAgdi1lbHNlIGJsb2NrLCBidXQgb25seSBpZiBmb2xsb3dpbmcgdi1pZlxuXHQgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3YtZWxzZScpKSB7XG5cdCAgICB2YXIgcHJldiA9IGVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG5cdCAgICBpZiAocHJldiAmJiBwcmV2Lmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG5cdCAgICAgIHJldHVybiBza2lwO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIGF0dHIsIG5hbWUsIHZhbHVlLCBtb2RpZmllcnMsIG1hdGNoZWQsIGRpck5hbWUsIHJhd05hbWUsIGFyZywgZGVmLCB0ZXJtRGVmO1xuXHQgIGZvciAodmFyIGkgPSAwLCBqID0gYXR0cnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdCAgICBhdHRyID0gYXR0cnNbaV07XG5cdCAgICBuYW1lID0gYXR0ci5uYW1lLnJlcGxhY2UobW9kaWZpZXJSRSwgJycpO1xuXHQgICAgaWYgKG1hdGNoZWQgPSBuYW1lLm1hdGNoKGRpckF0dHJSRSkpIHtcblx0ICAgICAgZGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdkaXJlY3RpdmVzJywgbWF0Y2hlZFsxXSk7XG5cdCAgICAgIGlmIChkZWYgJiYgZGVmLnRlcm1pbmFsKSB7XG5cdCAgICAgICAgaWYgKCF0ZXJtRGVmIHx8IChkZWYucHJpb3JpdHkgfHwgREVGQVVMVF9URVJNSU5BTF9QUklPUklUWSkgPiB0ZXJtRGVmLnByaW9yaXR5KSB7XG5cdCAgICAgICAgICB0ZXJtRGVmID0gZGVmO1xuXHQgICAgICAgICAgcmF3TmFtZSA9IGF0dHIubmFtZTtcblx0ICAgICAgICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKGF0dHIubmFtZSk7XG5cdCAgICAgICAgICB2YWx1ZSA9IGF0dHIudmFsdWU7XG5cdCAgICAgICAgICBkaXJOYW1lID0gbWF0Y2hlZFsxXTtcblx0ICAgICAgICAgIGFyZyA9IG1hdGNoZWRbMl07XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpZiAodGVybURlZikge1xuXHQgICAgcmV0dXJuIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIGRpck5hbWUsIHZhbHVlLCBvcHRpb25zLCB0ZXJtRGVmLCByYXdOYW1lLCBhcmcsIG1vZGlmaWVycyk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBza2lwKCkge31cblx0c2tpcC50ZXJtaW5hbCA9IHRydWU7XG5cdFxuXHQvKipcblx0ICogQnVpbGQgYSBub2RlIGxpbmsgZnVuY3Rpb24gZm9yIGEgdGVybWluYWwgZGlyZWN0aXZlLlxuXHQgKiBBIHRlcm1pbmFsIGxpbmsgZnVuY3Rpb24gdGVybWluYXRlcyB0aGUgY3VycmVudFxuXHQgKiBjb21waWxhdGlvbiByZWN1cnNpb24gYW5kIGhhbmRsZXMgY29tcGlsYXRpb24gb2YgdGhlXG5cdCAqIHN1YnRyZWUgaW4gdGhlIGRpcmVjdGl2ZS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZGlyTmFtZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHBhcmFtIHtPYmplY3R9IGRlZlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW3Jhd05hbWVdXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbYXJnXVxuXHQgKiBAcGFyYW0ge09iamVjdH0gW21vZGlmaWVyc11cblx0ICogQHJldHVybiB7RnVuY3Rpb259IHRlcm1pbmFsTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgZGlyTmFtZSwgdmFsdWUsIG9wdGlvbnMsIGRlZiwgcmF3TmFtZSwgYXJnLCBtb2RpZmllcnMpIHtcblx0ICB2YXIgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuXHQgIHZhciBkZXNjcmlwdG9yID0ge1xuXHQgICAgbmFtZTogZGlyTmFtZSxcblx0ICAgIGFyZzogYXJnLFxuXHQgICAgZXhwcmVzc2lvbjogcGFyc2VkLmV4cHJlc3Npb24sXG5cdCAgICBmaWx0ZXJzOiBwYXJzZWQuZmlsdGVycyxcblx0ICAgIHJhdzogdmFsdWUsXG5cdCAgICBhdHRyOiByYXdOYW1lLFxuXHQgICAgbW9kaWZpZXJzOiBtb2RpZmllcnMsXG5cdCAgICBkZWY6IGRlZlxuXHQgIH07XG5cdCAgLy8gY2hlY2sgcmVmIGZvciB2LWZvciBhbmQgcm91dGVyLXZpZXdcblx0ICBpZiAoZGlyTmFtZSA9PT0gJ2ZvcicgfHwgZGlyTmFtZSA9PT0gJ3JvdXRlci12aWV3Jykge1xuXHQgICAgZGVzY3JpcHRvci5yZWYgPSBmaW5kUmVmKGVsKTtcblx0ICB9XG5cdCAgdmFyIGZuID0gZnVuY3Rpb24gdGVybWluYWxOb2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIGlmIChkZXNjcmlwdG9yLnJlZikge1xuXHQgICAgICBkZWZpbmVSZWFjdGl2ZSgoc2NvcGUgfHwgdm0pLiRyZWZzLCBkZXNjcmlwdG9yLnJlZiwgbnVsbCk7XG5cdCAgICB9XG5cdCAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgIH07XG5cdCAgZm4udGVybWluYWwgPSB0cnVlO1xuXHQgIHJldHVybiBmbjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgdGhlIGRpcmVjdGl2ZXMgb24gYW4gZWxlbWVudCBhbmQgcmV0dXJuIGEgbGlua2VyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fE5hbWVkTm9kZU1hcH0gYXR0cnNcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZURpcmVjdGl2ZXMoYXR0cnMsIG9wdGlvbnMpIHtcblx0ICB2YXIgaSA9IGF0dHJzLmxlbmd0aDtcblx0ICB2YXIgZGlycyA9IFtdO1xuXHQgIHZhciBhdHRyLCBuYW1lLCB2YWx1ZSwgcmF3TmFtZSwgcmF3VmFsdWUsIGRpck5hbWUsIGFyZywgbW9kaWZpZXJzLCBkaXJEZWYsIHRva2VucywgbWF0Y2hlZDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBhdHRyID0gYXR0cnNbaV07XG5cdCAgICBuYW1lID0gcmF3TmFtZSA9IGF0dHIubmFtZTtcblx0ICAgIHZhbHVlID0gcmF3VmFsdWUgPSBhdHRyLnZhbHVlO1xuXHQgICAgdG9rZW5zID0gcGFyc2VUZXh0KHZhbHVlKTtcblx0ICAgIC8vIHJlc2V0IGFyZ1xuXHQgICAgYXJnID0gbnVsbDtcblx0ICAgIC8vIGNoZWNrIG1vZGlmaWVyc1xuXHQgICAgbW9kaWZpZXJzID0gcGFyc2VNb2RpZmllcnMobmFtZSk7XG5cdCAgICBuYW1lID0gbmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKTtcblx0XG5cdCAgICAvLyBhdHRyaWJ1dGUgaW50ZXJwb2xhdGlvbnNcblx0ICAgIGlmICh0b2tlbnMpIHtcblx0ICAgICAgdmFsdWUgPSB0b2tlbnNUb0V4cCh0b2tlbnMpO1xuXHQgICAgICBhcmcgPSBuYW1lO1xuXHQgICAgICBwdXNoRGlyKCdiaW5kJywgZGlyZWN0aXZlcy5iaW5kLCB0b2tlbnMpO1xuXHQgICAgICAvLyB3YXJuIGFnYWluc3QgbWl4aW5nIG11c3RhY2hlcyB3aXRoIHYtYmluZFxuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIGlmIChuYW1lID09PSAnY2xhc3MnICYmIEFycmF5LnByb3RvdHlwZS5zb21lLmNhbGwoYXR0cnMsIGZ1bmN0aW9uIChhdHRyKSB7XG5cdCAgICAgICAgICByZXR1cm4gYXR0ci5uYW1lID09PSAnOmNsYXNzJyB8fCBhdHRyLm5hbWUgPT09ICd2LWJpbmQ6Y2xhc3MnO1xuXHQgICAgICAgIH0pKSB7XG5cdCAgICAgICAgICB3YXJuKCdjbGFzcz1cIicgKyByYXdWYWx1ZSArICdcIjogRG8gbm90IG1peCBtdXN0YWNoZSBpbnRlcnBvbGF0aW9uICcgKyAnYW5kIHYtYmluZCBmb3IgXCJjbGFzc1wiIG9uIHRoZSBzYW1lIGVsZW1lbnQuIFVzZSBvbmUgb3IgdGhlIG90aGVyLicsIG9wdGlvbnMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlXG5cdFxuXHQgICAgICAvLyBzcGVjaWFsIGF0dHJpYnV0ZTogdHJhbnNpdGlvblxuXHQgICAgICBpZiAodHJhbnNpdGlvblJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICBtb2RpZmllcnMubGl0ZXJhbCA9ICFiaW5kUkUudGVzdChuYW1lKTtcblx0ICAgICAgICBwdXNoRGlyKCd0cmFuc2l0aW9uJywgaW50ZXJuYWxEaXJlY3RpdmVzLnRyYW5zaXRpb24pO1xuXHQgICAgICB9IGVsc2Vcblx0XG5cdCAgICAgICAgLy8gZXZlbnQgaGFuZGxlcnNcblx0ICAgICAgICBpZiAob25SRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgICBhcmcgPSBuYW1lLnJlcGxhY2Uob25SRSwgJycpO1xuXHQgICAgICAgICAgcHVzaERpcignb24nLCBkaXJlY3RpdmVzLm9uKTtcblx0ICAgICAgICB9IGVsc2Vcblx0XG5cdCAgICAgICAgICAvLyBhdHRyaWJ1dGUgYmluZGluZ3Ncblx0ICAgICAgICAgIGlmIChiaW5kUkUudGVzdChuYW1lKSkge1xuXHQgICAgICAgICAgICBkaXJOYW1lID0gbmFtZS5yZXBsYWNlKGJpbmRSRSwgJycpO1xuXHQgICAgICAgICAgICBpZiAoZGlyTmFtZSA9PT0gJ3N0eWxlJyB8fCBkaXJOYW1lID09PSAnY2xhc3MnKSB7XG5cdCAgICAgICAgICAgICAgcHVzaERpcihkaXJOYW1lLCBpbnRlcm5hbERpcmVjdGl2ZXNbZGlyTmFtZV0pO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIGFyZyA9IGRpck5hbWU7XG5cdCAgICAgICAgICAgICAgcHVzaERpcignYmluZCcsIGRpcmVjdGl2ZXMuYmluZCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0gZWxzZVxuXHRcblx0ICAgICAgICAgICAgLy8gbm9ybWFsIGRpcmVjdGl2ZXNcblx0ICAgICAgICAgICAgaWYgKG1hdGNoZWQgPSBuYW1lLm1hdGNoKGRpckF0dHJSRSkpIHtcblx0ICAgICAgICAgICAgICBkaXJOYW1lID0gbWF0Y2hlZFsxXTtcblx0ICAgICAgICAgICAgICBhcmcgPSBtYXRjaGVkWzJdO1xuXHRcblx0ICAgICAgICAgICAgICAvLyBza2lwIHYtZWxzZSAod2hlbiB1c2VkIHdpdGggdi1zaG93KVxuXHQgICAgICAgICAgICAgIGlmIChkaXJOYW1lID09PSAnZWxzZScpIHtcblx0ICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgZGlyRGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdkaXJlY3RpdmVzJywgZGlyTmFtZSwgdHJ1ZSk7XG5cdCAgICAgICAgICAgICAgaWYgKGRpckRlZikge1xuXHQgICAgICAgICAgICAgICAgcHVzaERpcihkaXJOYW1lLCBkaXJEZWYpO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUHVzaCBhIGRpcmVjdGl2ZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBkaXJOYW1lXG5cdCAgICogQHBhcmFtIHtPYmplY3R8RnVuY3Rpb259IGRlZlxuXHQgICAqIEBwYXJhbSB7QXJyYXl9IFtpbnRlcnBUb2tlbnNdXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHB1c2hEaXIoZGlyTmFtZSwgZGVmLCBpbnRlcnBUb2tlbnMpIHtcblx0ICAgIHZhciBoYXNPbmVUaW1lVG9rZW4gPSBpbnRlcnBUb2tlbnMgJiYgaGFzT25lVGltZShpbnRlcnBUb2tlbnMpO1xuXHQgICAgdmFyIHBhcnNlZCA9ICFoYXNPbmVUaW1lVG9rZW4gJiYgcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuXHQgICAgZGlycy5wdXNoKHtcblx0ICAgICAgbmFtZTogZGlyTmFtZSxcblx0ICAgICAgYXR0cjogcmF3TmFtZSxcblx0ICAgICAgcmF3OiByYXdWYWx1ZSxcblx0ICAgICAgZGVmOiBkZWYsXG5cdCAgICAgIGFyZzogYXJnLFxuXHQgICAgICBtb2RpZmllcnM6IG1vZGlmaWVycyxcblx0ICAgICAgLy8gY29udmVyc2lvbiBmcm9tIGludGVycG9sYXRpb24gc3RyaW5ncyB3aXRoIG9uZS10aW1lIHRva2VuXG5cdCAgICAgIC8vIHRvIGV4cHJlc3Npb24gaXMgZGlmZmVyZWQgdW50aWwgZGlyZWN0aXZlIGJpbmQgdGltZSBzbyB0aGF0IHdlXG5cdCAgICAgIC8vIGhhdmUgYWNjZXNzIHRvIHRoZSBhY3R1YWwgdm0gY29udGV4dCBmb3Igb25lLXRpbWUgYmluZGluZ3MuXG5cdCAgICAgIGV4cHJlc3Npb246IHBhcnNlZCAmJiBwYXJzZWQuZXhwcmVzc2lvbixcblx0ICAgICAgZmlsdGVyczogcGFyc2VkICYmIHBhcnNlZC5maWx0ZXJzLFxuXHQgICAgICBpbnRlcnA6IGludGVycFRva2Vucyxcblx0ICAgICAgaGFzT25lVGltZTogaGFzT25lVGltZVRva2VuXG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIGlmIChkaXJzLmxlbmd0aCkge1xuXHQgICAgcmV0dXJuIG1ha2VOb2RlTGlua0ZuKGRpcnMpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhcnNlIG1vZGlmaWVycyBmcm9tIGRpcmVjdGl2ZSBhdHRyaWJ1dGUgbmFtZS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlTW9kaWZpZXJzKG5hbWUpIHtcblx0ICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB2YXIgbWF0Y2ggPSBuYW1lLm1hdGNoKG1vZGlmaWVyUkUpO1xuXHQgIGlmIChtYXRjaCkge1xuXHQgICAgdmFyIGkgPSBtYXRjaC5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHJlc1ttYXRjaFtpXS5zbGljZSgxKV0gPSB0cnVlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQnVpbGQgYSBsaW5rIGZ1bmN0aW9uIGZvciBhbGwgZGlyZWN0aXZlcyBvbiBhIHNpbmdsZSBub2RlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBkaXJlY3RpdmVzXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSBkaXJlY3RpdmVzTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZU5vZGVMaW5rRm4oZGlyZWN0aXZlcykge1xuXHQgIHJldHVybiBmdW5jdGlvbiBub2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIC8vIHJldmVyc2UgYXBwbHkgYmVjYXVzZSBpdCdzIHNvcnRlZCBsb3cgdG8gaGlnaFxuXHQgICAgdmFyIGkgPSBkaXJlY3RpdmVzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdm0uX2JpbmREaXIoZGlyZWN0aXZlc1tpXSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gaW50ZXJwb2xhdGlvbiBzdHJpbmcgY29udGFpbnMgb25lLXRpbWUgdG9rZW5zLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSB0b2tlbnNcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBoYXNPbmVUaW1lKHRva2Vucykge1xuXHQgIHZhciBpID0gdG9rZW5zLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBpZiAodG9rZW5zW2ldLm9uZVRpbWUpIHJldHVybiB0cnVlO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNTY3JpcHQoZWwpIHtcblx0ICByZXR1cm4gZWwudGFnTmFtZSA9PT0gJ1NDUklQVCcgJiYgKCFlbC5oYXNBdHRyaWJ1dGUoJ3R5cGUnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PT0gJ3RleHQvamF2YXNjcmlwdCcpO1xuXHR9XG5cdFxuXHR2YXIgc3BlY2lhbENoYXJSRSA9IC9bXlxcd1xcLTpcXC5dLztcblx0XG5cdC8qKlxuXHQgKiBQcm9jZXNzIGFuIGVsZW1lbnQgb3IgYSBEb2N1bWVudEZyYWdtZW50IGJhc2VkIG9uIGFcblx0ICogaW5zdGFuY2Ugb3B0aW9uIG9iamVjdC4gVGhpcyBhbGxvd3MgdXMgdG8gdHJhbnNjbHVkZVxuXHQgKiBhIHRlbXBsYXRlIG5vZGUvZnJhZ21lbnQgYmVmb3JlIHRoZSBpbnN0YW5jZSBpcyBjcmVhdGVkLFxuXHQgKiBzbyB0aGUgcHJvY2Vzc2VkIGZyYWdtZW50IGNhbiB0aGVuIGJlIGNsb25lZCBhbmQgcmV1c2VkXG5cdCAqIGluIHYtZm9yLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0cmFuc2NsdWRlKGVsLCBvcHRpb25zKSB7XG5cdCAgLy8gZXh0cmFjdCBjb250YWluZXIgYXR0cmlidXRlcyB0byBwYXNzIHRoZW0gZG93blxuXHQgIC8vIHRvIGNvbXBpbGVyLCBiZWNhdXNlIHRoZXkgbmVlZCB0byBiZSBjb21waWxlZCBpblxuXHQgIC8vIHBhcmVudCBzY29wZS4gd2UgYXJlIG11dGF0aW5nIHRoZSBvcHRpb25zIG9iamVjdCBoZXJlXG5cdCAgLy8gYXNzdW1pbmcgdGhlIHNhbWUgb2JqZWN0IHdpbGwgYmUgdXNlZCBmb3IgY29tcGlsZVxuXHQgIC8vIHJpZ2h0IGFmdGVyIHRoaXMuXG5cdCAgaWYgKG9wdGlvbnMpIHtcblx0ICAgIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gZXh0cmFjdEF0dHJzKGVsKTtcblx0ICB9XG5cdCAgLy8gZm9yIHRlbXBsYXRlIHRhZ3MsIHdoYXQgd2Ugd2FudCBpcyBpdHMgY29udGVudCBhc1xuXHQgIC8vIGEgZG9jdW1lbnRGcmFnbWVudCAoZm9yIGZyYWdtZW50IGluc3RhbmNlcylcblx0ICBpZiAoaXNUZW1wbGF0ZShlbCkpIHtcblx0ICAgIGVsID0gcGFyc2VUZW1wbGF0ZShlbCk7XG5cdCAgfVxuXHQgIGlmIChvcHRpb25zKSB7XG5cdCAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQgJiYgIW9wdGlvbnMudGVtcGxhdGUpIHtcblx0ICAgICAgb3B0aW9ucy50ZW1wbGF0ZSA9ICc8c2xvdD48L3Nsb3Q+Jztcblx0ICAgIH1cblx0ICAgIGlmIChvcHRpb25zLnRlbXBsYXRlKSB7XG5cdCAgICAgIG9wdGlvbnMuX2NvbnRlbnQgPSBleHRyYWN0Q29udGVudChlbCk7XG5cdCAgICAgIGVsID0gdHJhbnNjbHVkZVRlbXBsYXRlKGVsLCBvcHRpb25zKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKGlzRnJhZ21lbnQoZWwpKSB7XG5cdCAgICAvLyBhbmNob3JzIGZvciBmcmFnbWVudCBpbnN0YW5jZVxuXHQgICAgLy8gcGFzc2luZyBpbiBgcGVyc2lzdDogdHJ1ZWAgdG8gYXZvaWQgdGhlbSBiZWluZ1xuXHQgICAgLy8gZGlzY2FyZGVkIGJ5IElFIGR1cmluZyB0ZW1wbGF0ZSBjbG9uaW5nXG5cdCAgICBwcmVwZW5kKGNyZWF0ZUFuY2hvcigndi1zdGFydCcsIHRydWUpLCBlbCk7XG5cdCAgICBlbC5hcHBlbmRDaGlsZChjcmVhdGVBbmNob3IoJ3YtZW5kJywgdHJ1ZSkpO1xuXHQgIH1cblx0ICByZXR1cm4gZWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcm9jZXNzIHRoZSB0ZW1wbGF0ZSBvcHRpb24uXG5cdCAqIElmIHRoZSByZXBsYWNlIG9wdGlvbiBpcyB0cnVlIHRoaXMgd2lsbCBzd2FwIHRoZSAkZWwuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRyYW5zY2x1ZGVUZW1wbGF0ZShlbCwgb3B0aW9ucykge1xuXHQgIHZhciB0ZW1wbGF0ZSA9IG9wdGlvbnMudGVtcGxhdGU7XG5cdCAgdmFyIGZyYWcgPSBwYXJzZVRlbXBsYXRlKHRlbXBsYXRlLCB0cnVlKTtcblx0ICBpZiAoZnJhZykge1xuXHQgICAgdmFyIHJlcGxhY2VyID0gZnJhZy5maXJzdENoaWxkO1xuXHQgICAgdmFyIHRhZyA9IHJlcGxhY2VyLnRhZ05hbWUgJiYgcmVwbGFjZXIudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHQgICAgaWYgKG9wdGlvbnMucmVwbGFjZSkge1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKGVsID09PSBkb2N1bWVudC5ib2R5KSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdZb3UgYXJlIG1vdW50aW5nIGFuIGluc3RhbmNlIHdpdGggYSB0ZW1wbGF0ZSB0byAnICsgJzxib2R5Pi4gVGhpcyB3aWxsIHJlcGxhY2UgPGJvZHk+IGVudGlyZWx5LiBZb3UgJyArICdzaG91bGQgcHJvYmFibHkgdXNlIGByZXBsYWNlOiBmYWxzZWAgaGVyZS4nKTtcblx0ICAgICAgfVxuXHQgICAgICAvLyB0aGVyZSBhcmUgbWFueSBjYXNlcyB3aGVyZSB0aGUgaW5zdGFuY2UgbXVzdFxuXHQgICAgICAvLyBiZWNvbWUgYSBmcmFnbWVudCBpbnN0YW5jZTogYmFzaWNhbGx5IGFueXRoaW5nIHRoYXRcblx0ICAgICAgLy8gY2FuIGNyZWF0ZSBtb3JlIHRoYW4gMSByb290IG5vZGVzLlxuXHQgICAgICBpZiAoXG5cdCAgICAgIC8vIG11bHRpLWNoaWxkcmVuIHRlbXBsYXRlXG5cdCAgICAgIGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPiAxIHx8XG5cdCAgICAgIC8vIG5vbi1lbGVtZW50IHRlbXBsYXRlXG5cdCAgICAgIHJlcGxhY2VyLm5vZGVUeXBlICE9PSAxIHx8XG5cdCAgICAgIC8vIHNpbmdsZSBuZXN0ZWQgY29tcG9uZW50XG5cdCAgICAgIHRhZyA9PT0gJ2NvbXBvbmVudCcgfHwgcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgdGFnKSB8fCBoYXNCaW5kQXR0cihyZXBsYWNlciwgJ2lzJykgfHxcblx0ICAgICAgLy8gZWxlbWVudCBkaXJlY3RpdmVcblx0ICAgICAgcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdlbGVtZW50RGlyZWN0aXZlcycsIHRhZykgfHxcblx0ICAgICAgLy8gZm9yIGJsb2NrXG5cdCAgICAgIHJlcGxhY2VyLmhhc0F0dHJpYnV0ZSgndi1mb3InKSB8fFxuXHQgICAgICAvLyBpZiBibG9ja1xuXHQgICAgICByZXBsYWNlci5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuXHQgICAgICAgIHJldHVybiBmcmFnO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIG9wdGlvbnMuX3JlcGxhY2VyQXR0cnMgPSBleHRyYWN0QXR0cnMocmVwbGFjZXIpO1xuXHQgICAgICAgIG1lcmdlQXR0cnMoZWwsIHJlcGxhY2VyKTtcblx0ICAgICAgICByZXR1cm4gcmVwbGFjZXI7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVsLmFwcGVuZENoaWxkKGZyYWcpO1xuXHQgICAgICByZXR1cm4gZWw7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCB0ZW1wbGF0ZSBvcHRpb246ICcgKyB0ZW1wbGF0ZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogSGVscGVyIHRvIGV4dHJhY3QgYSBjb21wb25lbnQgY29udGFpbmVyJ3MgYXR0cmlidXRlc1xuXHQgKiBpbnRvIGEgcGxhaW4gb2JqZWN0IGFycmF5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEByZXR1cm4ge0FycmF5fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGV4dHJhY3RBdHRycyhlbCkge1xuXHQgIGlmIChlbC5ub2RlVHlwZSA9PT0gMSAmJiBlbC5oYXNBdHRyaWJ1dGVzKCkpIHtcblx0ICAgIHJldHVybiB0b0FycmF5KGVsLmF0dHJpYnV0ZXMpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIE1lcmdlIHRoZSBhdHRyaWJ1dGVzIG9mIHR3byBlbGVtZW50cywgYW5kIG1ha2Ugc3VyZVxuXHQgKiB0aGUgY2xhc3MgbmFtZXMgYXJlIG1lcmdlZCBwcm9wZXJseS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBmcm9tXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdG9cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtZXJnZUF0dHJzKGZyb20sIHRvKSB7XG5cdCAgdmFyIGF0dHJzID0gZnJvbS5hdHRyaWJ1dGVzO1xuXHQgIHZhciBpID0gYXR0cnMubGVuZ3RoO1xuXHQgIHZhciBuYW1lLCB2YWx1ZTtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBuYW1lID0gYXR0cnNbaV0ubmFtZTtcblx0ICAgIHZhbHVlID0gYXR0cnNbaV0udmFsdWU7XG5cdCAgICBpZiAoIXRvLmhhc0F0dHJpYnV0ZShuYW1lKSAmJiAhc3BlY2lhbENoYXJSRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgIHRvLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG5cdCAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgIXBhcnNlVGV4dCh2YWx1ZSkgJiYgKHZhbHVlID0gdmFsdWUudHJpbSgpKSkge1xuXHQgICAgICB2YWx1ZS5zcGxpdCgvXFxzKy8pLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuXHQgICAgICAgIGFkZENsYXNzKHRvLCBjbHMpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTY2FuIGFuZCBkZXRlcm1pbmUgc2xvdCBjb250ZW50IGRpc3RyaWJ1dGlvbi5cblx0ICogV2UgZG8gdGhpcyBkdXJpbmcgdHJhbnNjbHVzaW9uIGluc3RlYWQgYXQgY29tcGlsZSB0aW1lIHNvIHRoYXRcblx0ICogdGhlIGRpc3RyaWJ1dGlvbiBpcyBkZWNvdXBsZWQgZnJvbSB0aGUgY29tcGlsYXRpb24gb3JkZXIgb2Zcblx0ICogdGhlIHNsb3RzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gdGVtcGxhdGVcblx0ICogQHBhcmFtIHtFbGVtZW50fSBjb250ZW50XG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVTbG90cyh2bSwgY29udGVudCkge1xuXHQgIGlmICghY29udGVudCkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgY29udGVudHMgPSB2bS5fc2xvdENvbnRlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB2YXIgZWwsIG5hbWU7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb250ZW50LmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgZWwgPSBjb250ZW50LmNoaWxkcmVuW2ldO1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIGlmIChuYW1lID0gZWwuZ2V0QXR0cmlidXRlKCdzbG90JykpIHtcblx0ICAgICAgKGNvbnRlbnRzW25hbWVdIHx8IChjb250ZW50c1tuYW1lXSA9IFtdKSkucHVzaChlbCk7XG5cdCAgICB9XG5cdCAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBnZXRCaW5kQXR0cihlbCwgJ3Nsb3QnKSkge1xuXHQgICAgICB3YXJuKCdUaGUgXCJzbG90XCIgYXR0cmlidXRlIG11c3QgYmUgc3RhdGljLicsIHZtLiRwYXJlbnQpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmb3IgKG5hbWUgaW4gY29udGVudHMpIHtcblx0ICAgIGNvbnRlbnRzW25hbWVdID0gZXh0cmFjdEZyYWdtZW50KGNvbnRlbnRzW25hbWVdLCBjb250ZW50KTtcblx0ICB9XG5cdCAgaWYgKGNvbnRlbnQuaGFzQ2hpbGROb2RlcygpKSB7XG5cdCAgICB2YXIgbm9kZXMgPSBjb250ZW50LmNoaWxkTm9kZXM7XG5cdCAgICBpZiAobm9kZXMubGVuZ3RoID09PSAxICYmIG5vZGVzWzBdLm5vZGVUeXBlID09PSAzICYmICFub2Rlc1swXS5kYXRhLnRyaW0oKSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBjb250ZW50c1snZGVmYXVsdCddID0gZXh0cmFjdEZyYWdtZW50KGNvbnRlbnQuY2hpbGROb2RlcywgY29udGVudCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRXh0cmFjdCBxdWFsaWZpZWQgY29udGVudCBub2RlcyBmcm9tIGEgbm9kZSBsaXN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGVMaXN0fSBub2Rlc1xuXHQgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGV4dHJhY3RGcmFnbWVudChub2RlcywgcGFyZW50KSB7XG5cdCAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdCAgbm9kZXMgPSB0b0FycmF5KG5vZGVzKTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdmFyIG5vZGUgPSBub2Rlc1tpXTtcblx0ICAgIGlmIChpc1RlbXBsYXRlKG5vZGUpICYmICFub2RlLmhhc0F0dHJpYnV0ZSgndi1pZicpICYmICFub2RlLmhhc0F0dHJpYnV0ZSgndi1mb3InKSkge1xuXHQgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQobm9kZSk7XG5cdCAgICAgIG5vZGUgPSBwYXJzZVRlbXBsYXRlKG5vZGUsIHRydWUpO1xuXHQgICAgfVxuXHQgICAgZnJhZy5hcHBlbmRDaGlsZChub2RlKTtcblx0ICB9XG5cdCAgcmV0dXJuIGZyYWc7XG5cdH1cblx0XG5cdFxuXHRcblx0dmFyIGNvbXBpbGVyID0gT2JqZWN0LmZyZWV6ZSh7XG5cdFx0Y29tcGlsZTogY29tcGlsZSxcblx0XHRjb21waWxlQW5kTGlua1Byb3BzOiBjb21waWxlQW5kTGlua1Byb3BzLFxuXHRcdGNvbXBpbGVSb290OiBjb21waWxlUm9vdCxcblx0XHR0cmFuc2NsdWRlOiB0cmFuc2NsdWRlLFxuXHRcdHJlc29sdmVTbG90czogcmVzb2x2ZVNsb3RzXG5cdH0pO1xuXHRcblx0ZnVuY3Rpb24gc3RhdGVNaXhpbiAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogQWNjZXNzb3IgZm9yIGAkZGF0YWAgcHJvcGVydHksIHNpbmNlIHNldHRpbmcgJGRhdGFcblx0ICAgKiByZXF1aXJlcyBvYnNlcnZpbmcgdGhlIG5ldyBvYmplY3QgYW5kIHVwZGF0aW5nXG5cdCAgICogcHJveGllZCBwcm9wZXJ0aWVzLlxuXHQgICAqL1xuXHRcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRkYXRhJywge1xuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xuXHQgICAgfSxcblx0ICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld0RhdGEpIHtcblx0ICAgICAgaWYgKG5ld0RhdGEgIT09IHRoaXMuX2RhdGEpIHtcblx0ICAgICAgICB0aGlzLl9zZXREYXRhKG5ld0RhdGEpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHVwIHRoZSBzY29wZSBvZiBhbiBpbnN0YW5jZSwgd2hpY2ggY29udGFpbnM6XG5cdCAgICogLSBvYnNlcnZlZCBkYXRhXG5cdCAgICogLSBjb21wdXRlZCBwcm9wZXJ0aWVzXG5cdCAgICogLSB1c2VyIG1ldGhvZHNcblx0ICAgKiAtIG1ldGEgcHJvcGVydGllc1xuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLl9pbml0UHJvcHMoKTtcblx0ICAgIHRoaXMuX2luaXRNZXRhKCk7XG5cdCAgICB0aGlzLl9pbml0TWV0aG9kcygpO1xuXHQgICAgdGhpcy5faW5pdERhdGEoKTtcblx0ICAgIHRoaXMuX2luaXRDb21wdXRlZCgpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluaXRpYWxpemUgcHJvcHMuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRQcm9wcyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcblx0ICAgIHZhciBlbCA9IG9wdGlvbnMuZWw7XG5cdCAgICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuXHQgICAgaWYgKHByb3BzICYmICFlbCkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1Byb3BzIHdpbGwgbm90IGJlIGNvbXBpbGVkIGlmIG5vIGBlbGAgb3B0aW9uIGlzICcgKyAncHJvdmlkZWQgYXQgaW5zdGFudGlhdGlvbi4nLCB0aGlzKTtcblx0ICAgIH1cblx0ICAgIC8vIG1ha2Ugc3VyZSB0byBjb252ZXJ0IHN0cmluZyBzZWxlY3RvcnMgaW50byBlbGVtZW50IG5vd1xuXHQgICAgZWwgPSBvcHRpb25zLmVsID0gcXVlcnkoZWwpO1xuXHQgICAgdGhpcy5fcHJvcHNVbmxpbmtGbiA9IGVsICYmIGVsLm5vZGVUeXBlID09PSAxICYmIHByb3BzXG5cdCAgICAvLyBwcm9wcyBtdXN0IGJlIGxpbmtlZCBpbiBwcm9wZXIgc2NvcGUgaWYgaW5zaWRlIHYtZm9yXG5cdCAgICA/IGNvbXBpbGVBbmRMaW5rUHJvcHModGhpcywgZWwsIHByb3BzLCB0aGlzLl9zY29wZSkgOiBudWxsO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluaXRpYWxpemUgdGhlIGRhdGEuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXREYXRhID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGRhdGFGbiA9IHRoaXMuJG9wdGlvbnMuZGF0YTtcblx0ICAgIHZhciBkYXRhID0gdGhpcy5fZGF0YSA9IGRhdGFGbiA/IGRhdGFGbigpIDoge307XG5cdCAgICBpZiAoIWlzUGxhaW5PYmplY3QoZGF0YSkpIHtcblx0ICAgICAgZGF0YSA9IHt9O1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ2RhdGEgZnVuY3Rpb25zIHNob3VsZCByZXR1cm4gYW4gb2JqZWN0LicsIHRoaXMpO1xuXHQgICAgfVxuXHQgICAgdmFyIHByb3BzID0gdGhpcy5fcHJvcHM7XG5cdCAgICAvLyBwcm94eSBkYXRhIG9uIGluc3RhbmNlXG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpO1xuXHQgICAgdmFyIGksIGtleTtcblx0ICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgLy8gdGhlcmUgYXJlIHR3byBzY2VuYXJpb3Mgd2hlcmUgd2UgY2FuIHByb3h5IGEgZGF0YSBrZXk6XG5cdCAgICAgIC8vIDEuIGl0J3Mgbm90IGFscmVhZHkgZGVmaW5lZCBhcyBhIHByb3Bcblx0ICAgICAgLy8gMi4gaXQncyBwcm92aWRlZCB2aWEgYSBpbnN0YW50aWF0aW9uIG9wdGlvbiBBTkQgdGhlcmUgYXJlIG5vXG5cdCAgICAgIC8vICAgIHRlbXBsYXRlIHByb3AgcHJlc2VudFxuXHQgICAgICBpZiAoIXByb3BzIHx8ICFoYXNPd24ocHJvcHMsIGtleSkpIHtcblx0ICAgICAgICB0aGlzLl9wcm94eShrZXkpO1xuXHQgICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICB3YXJuKCdEYXRhIGZpZWxkIFwiJyArIGtleSArICdcIiBpcyBhbHJlYWR5IGRlZmluZWQgJyArICdhcyBhIHByb3AuIFRvIHByb3ZpZGUgZGVmYXVsdCB2YWx1ZSBmb3IgYSBwcm9wLCB1c2UgdGhlIFwiZGVmYXVsdFwiICcgKyAncHJvcCBvcHRpb247IGlmIHlvdSB3YW50IHRvIHBhc3MgcHJvcCB2YWx1ZXMgdG8gYW4gaW5zdGFudGlhdGlvbiAnICsgJ2NhbGwsIHVzZSB0aGUgXCJwcm9wc0RhdGFcIiBvcHRpb24uJywgdGhpcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIG9ic2VydmUgZGF0YVxuXHQgICAgb2JzZXJ2ZShkYXRhLCB0aGlzKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBTd2FwIHRoZSBpbnN0YW5jZSdzICRkYXRhLiBDYWxsZWQgaW4gJGRhdGEncyBzZXR0ZXIuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gbmV3RGF0YVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9zZXREYXRhID0gZnVuY3Rpb24gKG5ld0RhdGEpIHtcblx0ICAgIG5ld0RhdGEgPSBuZXdEYXRhIHx8IHt9O1xuXHQgICAgdmFyIG9sZERhdGEgPSB0aGlzLl9kYXRhO1xuXHQgICAgdGhpcy5fZGF0YSA9IG5ld0RhdGE7XG5cdCAgICB2YXIga2V5cywga2V5LCBpO1xuXHQgICAgLy8gdW5wcm94eSBrZXlzIG5vdCBwcmVzZW50IGluIG5ldyBkYXRhXG5cdCAgICBrZXlzID0gT2JqZWN0LmtleXMob2xkRGF0YSk7XG5cdCAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGtleSA9IGtleXNbaV07XG5cdCAgICAgIGlmICghKGtleSBpbiBuZXdEYXRhKSkge1xuXHQgICAgICAgIHRoaXMuX3VucHJveHkoa2V5KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gcHJveHkga2V5cyBub3QgYWxyZWFkeSBwcm94aWVkLFxuXHQgICAgLy8gYW5kIHRyaWdnZXIgY2hhbmdlIGZvciBjaGFuZ2VkIHZhbHVlc1xuXHQgICAga2V5cyA9IE9iamVjdC5rZXlzKG5ld0RhdGEpO1xuXHQgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICBpZiAoIWhhc093bih0aGlzLCBrZXkpKSB7XG5cdCAgICAgICAgLy8gbmV3IHByb3BlcnR5XG5cdCAgICAgICAgdGhpcy5fcHJveHkoa2V5KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgb2xkRGF0YS5fX29iX18ucmVtb3ZlVm0odGhpcyk7XG5cdCAgICBvYnNlcnZlKG5ld0RhdGEsIHRoaXMpO1xuXHQgICAgdGhpcy5fZGlnZXN0KCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUHJveHkgYSBwcm9wZXJ0eSwgc28gdGhhdFxuXHQgICAqIHZtLnByb3AgPT09IHZtLl9kYXRhLnByb3Bcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fcHJveHkgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICBpZiAoIWlzUmVzZXJ2ZWQoa2V5KSkge1xuXHQgICAgICAvLyBuZWVkIHRvIHN0b3JlIHJlZiB0byBzZWxmIGhlcmVcblx0ICAgICAgLy8gYmVjYXVzZSB0aGVzZSBnZXR0ZXIvc2V0dGVycyBtaWdodFxuXHQgICAgICAvLyBiZSBjYWxsZWQgYnkgY2hpbGQgc2NvcGVzIHZpYVxuXHQgICAgICAvLyBwcm90b3R5cGUgaW5oZXJpdGFuY2UuXG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYsIGtleSwge1xuXHQgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0ICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgIGdldDogZnVuY3Rpb24gcHJveHlHZXR0ZXIoKSB7XG5cdCAgICAgICAgICByZXR1cm4gc2VsZi5fZGF0YVtrZXldO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgc2V0OiBmdW5jdGlvbiBwcm94eVNldHRlcih2YWwpIHtcblx0ICAgICAgICAgIHNlbGYuX2RhdGFba2V5XSA9IHZhbDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFVucHJveHkgYSBwcm9wZXJ0eS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fdW5wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIGlmICghaXNSZXNlcnZlZChrZXkpKSB7XG5cdCAgICAgIGRlbGV0ZSB0aGlzW2tleV07XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogRm9yY2UgdXBkYXRlIG9uIGV2ZXJ5IHdhdGNoZXIgaW4gc2NvcGUuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5fd2F0Y2hlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHRoaXMuX3dhdGNoZXJzW2ldLnVwZGF0ZSh0cnVlKTsgLy8gc2hhbGxvdyB1cGRhdGVzXG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogU2V0dXAgY29tcHV0ZWQgcHJvcGVydGllcy4gVGhleSBhcmUgZXNzZW50aWFsbHlcblx0ICAgKiBzcGVjaWFsIGdldHRlci9zZXR0ZXJzXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRDb21wdXRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBjb21wdXRlZCA9IHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQ7XG5cdCAgICBpZiAoY29tcHV0ZWQpIHtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIGNvbXB1dGVkKSB7XG5cdCAgICAgICAgdmFyIHVzZXJEZWYgPSBjb21wdXRlZFtrZXldO1xuXHQgICAgICAgIHZhciBkZWYgPSB7XG5cdCAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICAgICAgfTtcblx0ICAgICAgICBpZiAodHlwZW9mIHVzZXJEZWYgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgIGRlZi5nZXQgPSBtYWtlQ29tcHV0ZWRHZXR0ZXIodXNlckRlZiwgdGhpcyk7XG5cdCAgICAgICAgICBkZWYuc2V0ID0gbm9vcDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgZGVmLmdldCA9IHVzZXJEZWYuZ2V0ID8gdXNlckRlZi5jYWNoZSAhPT0gZmFsc2UgPyBtYWtlQ29tcHV0ZWRHZXR0ZXIodXNlckRlZi5nZXQsIHRoaXMpIDogYmluZCh1c2VyRGVmLmdldCwgdGhpcykgOiBub29wO1xuXHQgICAgICAgICAgZGVmLnNldCA9IHVzZXJEZWYuc2V0ID8gYmluZCh1c2VyRGVmLnNldCwgdGhpcykgOiBub29wO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywga2V5LCBkZWYpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gbWFrZUNvbXB1dGVkR2V0dGVyKGdldHRlciwgb3duZXIpIHtcblx0ICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIob3duZXIsIGdldHRlciwgbnVsbCwge1xuXHQgICAgICBsYXp5OiB0cnVlXG5cdCAgICB9KTtcblx0ICAgIHJldHVybiBmdW5jdGlvbiBjb21wdXRlZEdldHRlcigpIHtcblx0ICAgICAgaWYgKHdhdGNoZXIuZGlydHkpIHtcblx0ICAgICAgICB3YXRjaGVyLmV2YWx1YXRlKCk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKERlcC50YXJnZXQpIHtcblx0ICAgICAgICB3YXRjaGVyLmRlcGVuZCgpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB3YXRjaGVyLnZhbHVlO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHVwIGluc3RhbmNlIG1ldGhvZHMuIE1ldGhvZHMgbXVzdCBiZSBib3VuZCB0byB0aGVcblx0ICAgKiBpbnN0YW5jZSBzaW5jZSB0aGV5IG1pZ2h0IGJlIHBhc3NlZCBkb3duIGFzIGEgcHJvcCB0b1xuXHQgICAqIGNoaWxkIGNvbXBvbmVudHMuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRNZXRob2RzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIG1ldGhvZHMgPSB0aGlzLiRvcHRpb25zLm1ldGhvZHM7XG5cdCAgICBpZiAobWV0aG9kcykge1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gbWV0aG9kcykge1xuXHQgICAgICAgIHRoaXNba2V5XSA9IGJpbmQobWV0aG9kc1trZXldLCB0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluaXRpYWxpemUgbWV0YSBpbmZvcm1hdGlvbiBsaWtlICRpbmRleCwgJGtleSAmICR2YWx1ZS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdE1ldGEgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgbWV0YXMgPSB0aGlzLiRvcHRpb25zLl9tZXRhO1xuXHQgICAgaWYgKG1ldGFzKSB7XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiBtZXRhcykge1xuXHQgICAgICAgIGRlZmluZVJlYWN0aXZlKHRoaXMsIGtleSwgbWV0YXNba2V5XSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgZXZlbnRSRSA9IC9edi1vbjp8XkAvO1xuXHRcblx0ZnVuY3Rpb24gZXZlbnRzTWl4aW4gKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIFNldHVwIHRoZSBpbnN0YW5jZSdzIG9wdGlvbiBldmVudHMgJiB3YXRjaGVycy5cblx0ICAgKiBJZiB0aGUgdmFsdWUgaXMgYSBzdHJpbmcsIHdlIHB1bGwgaXQgZnJvbSB0aGVcblx0ICAgKiBpbnN0YW5jZSdzIG1ldGhvZHMgYnkgbmFtZS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcblx0ICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCkge1xuXHQgICAgICByZWdpc3RlckNvbXBvbmVudEV2ZW50cyh0aGlzLCBvcHRpb25zLmVsKTtcblx0ICAgIH1cblx0ICAgIHJlZ2lzdGVyQ2FsbGJhY2tzKHRoaXMsICckb24nLCBvcHRpb25zLmV2ZW50cyk7XG5cdCAgICByZWdpc3RlckNhbGxiYWNrcyh0aGlzLCAnJHdhdGNoJywgb3B0aW9ucy53YXRjaCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVnaXN0ZXIgdi1vbiBldmVudHMgb24gYSBjaGlsZCBjb21wb25lbnRcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnRFdmVudHModm0sIGVsKSB7XG5cdCAgICB2YXIgYXR0cnMgPSBlbC5hdHRyaWJ1dGVzO1xuXHQgICAgdmFyIG5hbWUsIHZhbHVlLCBoYW5kbGVyO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG5cdCAgICAgIGlmIChldmVudFJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKGV2ZW50UkUsICcnKTtcblx0ICAgICAgICAvLyBmb3JjZSB0aGUgZXhwcmVzc2lvbiBpbnRvIGEgc3RhdGVtZW50IHNvIHRoYXRcblx0ICAgICAgICAvLyBpdCBhbHdheXMgZHluYW1pY2FsbHkgcmVzb2x2ZXMgdGhlIG1ldGhvZCB0byBjYWxsICgjMjY3MClcblx0ICAgICAgICAvLyBraW5kYSB1Z2x5IGhhY2ssIGJ1dCBkb2VzIHRoZSBqb2IuXG5cdCAgICAgICAgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZTtcblx0ICAgICAgICBpZiAoaXNTaW1wbGVQYXRoKHZhbHVlKSkge1xuXHQgICAgICAgICAgdmFsdWUgKz0gJy5hcHBseSh0aGlzLCAkYXJndW1lbnRzKSc7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGhhbmRsZXIgPSAodm0uX3Njb3BlIHx8IHZtLl9jb250ZXh0KS4kZXZhbCh2YWx1ZSwgdHJ1ZSk7XG5cdCAgICAgICAgaGFuZGxlci5fZnJvbVBhcmVudCA9IHRydWU7XG5cdCAgICAgICAgdm0uJG9uKG5hbWUucmVwbGFjZShldmVudFJFKSwgaGFuZGxlcik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlZ2lzdGVyIGNhbGxiYWNrcyBmb3Igb3B0aW9uIGV2ZW50cyBhbmQgd2F0Y2hlcnMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IGhhc2hcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVnaXN0ZXJDYWxsYmFja3Modm0sIGFjdGlvbiwgaGFzaCkge1xuXHQgICAgaWYgKCFoYXNoKSByZXR1cm47XG5cdCAgICB2YXIgaGFuZGxlcnMsIGtleSwgaSwgajtcblx0ICAgIGZvciAoa2V5IGluIGhhc2gpIHtcblx0ICAgICAgaGFuZGxlcnMgPSBoYXNoW2tleV07XG5cdCAgICAgIGlmIChpc0FycmF5KGhhbmRsZXJzKSkge1xuXHQgICAgICAgIGZvciAoaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0ICAgICAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlcnNbaV0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXJzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogSGVscGVyIHRvIHJlZ2lzdGVyIGFuIGV2ZW50L3dhdGNoIGNhbGxiYWNrLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvblxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ3xPYmplY3R9IGhhbmRsZXJcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlciwgb3B0aW9ucykge1xuXHQgICAgdmFyIHR5cGUgPSB0eXBlb2YgaGFuZGxlcjtcblx0ICAgIGlmICh0eXBlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHZtW2FjdGlvbl0oa2V5LCBoYW5kbGVyLCBvcHRpb25zKTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgdmFyIG1ldGhvZHMgPSB2bS4kb3B0aW9ucy5tZXRob2RzO1xuXHQgICAgICB2YXIgbWV0aG9kID0gbWV0aG9kcyAmJiBtZXRob2RzW2hhbmRsZXJdO1xuXHQgICAgICBpZiAobWV0aG9kKSB7XG5cdCAgICAgICAgdm1bYWN0aW9uXShrZXksIG1ldGhvZCwgb3B0aW9ucyk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdVbmtub3duIG1ldGhvZDogXCInICsgaGFuZGxlciArICdcIiB3aGVuICcgKyAncmVnaXN0ZXJpbmcgY2FsbGJhY2sgZm9yICcgKyBhY3Rpb24gKyAnOiBcIicgKyBrZXkgKyAnXCIuJywgdm0pO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKGhhbmRsZXIgJiYgdHlwZSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLmhhbmRsZXIsIGhhbmRsZXIpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogU2V0dXAgcmVjdXJzaXZlIGF0dGFjaGVkL2RldGFjaGVkIGNhbGxzXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRET01Ib29rcyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuJG9uKCdob29rOmF0dGFjaGVkJywgb25BdHRhY2hlZCk7XG5cdCAgICB0aGlzLiRvbignaG9vazpkZXRhY2hlZCcsIG9uRGV0YWNoZWQpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENhbGxiYWNrIHRvIHJlY3Vyc2l2ZWx5IGNhbGwgYXR0YWNoZWQgaG9vayBvbiBjaGlsZHJlblxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBvbkF0dGFjaGVkKCkge1xuXHQgICAgaWYgKCF0aGlzLl9pc0F0dGFjaGVkKSB7XG5cdCAgICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlO1xuXHQgICAgICB0aGlzLiRjaGlsZHJlbi5mb3JFYWNoKGNhbGxBdHRhY2gpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogSXRlcmF0b3IgdG8gY2FsbCBhdHRhY2hlZCBob29rXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gY2FsbEF0dGFjaChjaGlsZCkge1xuXHQgICAgaWYgKCFjaGlsZC5faXNBdHRhY2hlZCAmJiBpbkRvYyhjaGlsZC4kZWwpKSB7XG5cdCAgICAgIGNoaWxkLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIENhbGxiYWNrIHRvIHJlY3Vyc2l2ZWx5IGNhbGwgZGV0YWNoZWQgaG9vayBvbiBjaGlsZHJlblxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBvbkRldGFjaGVkKCkge1xuXHQgICAgaWYgKHRoaXMuX2lzQXR0YWNoZWQpIHtcblx0ICAgICAgdGhpcy5faXNBdHRhY2hlZCA9IGZhbHNlO1xuXHQgICAgICB0aGlzLiRjaGlsZHJlbi5mb3JFYWNoKGNhbGxEZXRhY2gpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogSXRlcmF0b3IgdG8gY2FsbCBkZXRhY2hlZCBob29rXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gY2FsbERldGFjaChjaGlsZCkge1xuXHQgICAgaWYgKGNoaWxkLl9pc0F0dGFjaGVkICYmICFpbkRvYyhjaGlsZC4kZWwpKSB7XG5cdCAgICAgIGNoaWxkLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRyaWdnZXIgYWxsIGhhbmRsZXJzIGZvciBhIGhvb2tcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBob29rXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2NhbGxIb29rID0gZnVuY3Rpb24gKGhvb2spIHtcblx0ICAgIHRoaXMuJGVtaXQoJ3ByZS1ob29rOicgKyBob29rKTtcblx0ICAgIHZhciBoYW5kbGVycyA9IHRoaXMuJG9wdGlvbnNbaG9va107XG5cdCAgICBpZiAoaGFuZGxlcnMpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0ICAgICAgICBoYW5kbGVyc1tpXS5jYWxsKHRoaXMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aGlzLiRlbWl0KCdob29rOicgKyBob29rKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBub29wJDEoKSB7fVxuXHRcblx0LyoqXG5cdCAqIEEgZGlyZWN0aXZlIGxpbmtzIGEgRE9NIGVsZW1lbnQgd2l0aCBhIHBpZWNlIG9mIGRhdGEsXG5cdCAqIHdoaWNoIGlzIHRoZSByZXN1bHQgb2YgZXZhbHVhdGluZyBhbiBleHByZXNzaW9uLlxuXHQgKiBJdCByZWdpc3RlcnMgYSB3YXRjaGVyIHdpdGggdGhlIGV4cHJlc3Npb24gYW5kIGNhbGxzXG5cdCAqIHRoZSBET00gdXBkYXRlIGZ1bmN0aW9uIHdoZW4gYSBjaGFuZ2UgaXMgdHJpZ2dlcmVkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gZGVzY3JpcHRvclxuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBuYW1lXG5cdCAqICAgICAgICAgICAgICAgICAtIHtPYmplY3R9IGRlZlxuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBleHByZXNzaW9uXG5cdCAqICAgICAgICAgICAgICAgICAtIHtBcnJheTxPYmplY3Q+fSBbZmlsdGVyc11cblx0ICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gW21vZGlmaWVyc11cblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGxpdGVyYWxcblx0ICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gYXR0clxuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBhcmdcblx0ICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gcmF3XG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IFtyZWZdXG5cdCAqICAgICAgICAgICAgICAgICAtIHtBcnJheTxPYmplY3Q+fSBbaW50ZXJwXVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW2hhc09uZVRpbWVdXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge05vZGV9IGVsXG5cdCAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSB0cmFuc2NsdXNpb24gaG9zdCBjb21wb25lbnRcblx0ICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuXHQgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBvd25lciBmcmFnbWVudFxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICovXG5cdGZ1bmN0aW9uIERpcmVjdGl2ZShkZXNjcmlwdG9yLCB2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIHRoaXMuZWwgPSBlbDtcblx0ICAvLyBjb3B5IGRlc2NyaXB0b3IgcHJvcGVydGllc1xuXHQgIHRoaXMuZGVzY3JpcHRvciA9IGRlc2NyaXB0b3I7XG5cdCAgdGhpcy5uYW1lID0gZGVzY3JpcHRvci5uYW1lO1xuXHQgIHRoaXMuZXhwcmVzc2lvbiA9IGRlc2NyaXB0b3IuZXhwcmVzc2lvbjtcblx0ICB0aGlzLmFyZyA9IGRlc2NyaXB0b3IuYXJnO1xuXHQgIHRoaXMubW9kaWZpZXJzID0gZGVzY3JpcHRvci5tb2RpZmllcnM7XG5cdCAgdGhpcy5maWx0ZXJzID0gZGVzY3JpcHRvci5maWx0ZXJzO1xuXHQgIHRoaXMubGl0ZXJhbCA9IHRoaXMubW9kaWZpZXJzICYmIHRoaXMubW9kaWZpZXJzLmxpdGVyYWw7XG5cdCAgLy8gcHJpdmF0ZVxuXHQgIHRoaXMuX2xvY2tlZCA9IGZhbHNlO1xuXHQgIHRoaXMuX2JvdW5kID0gZmFsc2U7XG5cdCAgdGhpcy5fbGlzdGVuZXJzID0gbnVsbDtcblx0ICAvLyBsaW5rIGNvbnRleHRcblx0ICB0aGlzLl9ob3N0ID0gaG9zdDtcblx0ICB0aGlzLl9zY29wZSA9IHNjb3BlO1xuXHQgIHRoaXMuX2ZyYWcgPSBmcmFnO1xuXHQgIC8vIHN0b3JlIGRpcmVjdGl2ZXMgb24gbm9kZSBpbiBkZXYgbW9kZVxuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwpIHtcblx0ICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzID0gdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMgfHwgW107XG5cdCAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcy5wdXNoKHRoaXMpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEluaXRpYWxpemUgdGhlIGRpcmVjdGl2ZSwgbWl4aW4gZGVmaW5pdGlvbiBwcm9wZXJ0aWVzLFxuXHQgKiBzZXR1cCB0aGUgd2F0Y2hlciwgY2FsbCBkZWZpbml0aW9uIGJpbmQoKSBhbmQgdXBkYXRlKClcblx0ICogaWYgcHJlc2VudC5cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl9iaW5kID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBuYW1lID0gdGhpcy5uYW1lO1xuXHQgIHZhciBkZXNjcmlwdG9yID0gdGhpcy5kZXNjcmlwdG9yO1xuXHRcblx0ICAvLyByZW1vdmUgYXR0cmlidXRlXG5cdCAgaWYgKChuYW1lICE9PSAnY2xvYWsnIHx8IHRoaXMudm0uX2lzQ29tcGlsZWQpICYmIHRoaXMuZWwgJiYgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUpIHtcblx0ICAgIHZhciBhdHRyID0gZGVzY3JpcHRvci5hdHRyIHx8ICd2LScgKyBuYW1lO1xuXHQgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG5cdCAgfVxuXHRcblx0ICAvLyBjb3B5IGRlZiBwcm9wZXJ0aWVzXG5cdCAgdmFyIGRlZiA9IGRlc2NyaXB0b3IuZGVmO1xuXHQgIGlmICh0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICB0aGlzLnVwZGF0ZSA9IGRlZjtcblx0ICB9IGVsc2Uge1xuXHQgICAgZXh0ZW5kKHRoaXMsIGRlZik7XG5cdCAgfVxuXHRcblx0ICAvLyBzZXR1cCBkaXJlY3RpdmUgcGFyYW1zXG5cdCAgdGhpcy5fc2V0dXBQYXJhbXMoKTtcblx0XG5cdCAgLy8gaW5pdGlhbCBiaW5kXG5cdCAgaWYgKHRoaXMuYmluZCkge1xuXHQgICAgdGhpcy5iaW5kKCk7XG5cdCAgfVxuXHQgIHRoaXMuX2JvdW5kID0gdHJ1ZTtcblx0XG5cdCAgaWYgKHRoaXMubGl0ZXJhbCkge1xuXHQgICAgdGhpcy51cGRhdGUgJiYgdGhpcy51cGRhdGUoZGVzY3JpcHRvci5yYXcpO1xuXHQgIH0gZWxzZSBpZiAoKHRoaXMuZXhwcmVzc2lvbiB8fCB0aGlzLm1vZGlmaWVycykgJiYgKHRoaXMudXBkYXRlIHx8IHRoaXMudHdvV2F5KSAmJiAhdGhpcy5fY2hlY2tTdGF0ZW1lbnQoKSkge1xuXHQgICAgLy8gd3JhcHBlZCB1cGRhdGVyIGZvciBjb250ZXh0XG5cdCAgICB2YXIgZGlyID0gdGhpcztcblx0ICAgIGlmICh0aGlzLnVwZGF0ZSkge1xuXHQgICAgICB0aGlzLl91cGRhdGUgPSBmdW5jdGlvbiAodmFsLCBvbGRWYWwpIHtcblx0ICAgICAgICBpZiAoIWRpci5fbG9ja2VkKSB7XG5cdCAgICAgICAgICBkaXIudXBkYXRlKHZhbCwgb2xkVmFsKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLl91cGRhdGUgPSBub29wJDE7XG5cdCAgICB9XG5cdCAgICB2YXIgcHJlUHJvY2VzcyA9IHRoaXMuX3ByZVByb2Nlc3MgPyBiaW5kKHRoaXMuX3ByZVByb2Nlc3MsIHRoaXMpIDogbnVsbDtcblx0ICAgIHZhciBwb3N0UHJvY2VzcyA9IHRoaXMuX3Bvc3RQcm9jZXNzID8gYmluZCh0aGlzLl9wb3N0UHJvY2VzcywgdGhpcykgOiBudWxsO1xuXHQgICAgdmFyIHdhdGNoZXIgPSB0aGlzLl93YXRjaGVyID0gbmV3IFdhdGNoZXIodGhpcy52bSwgdGhpcy5leHByZXNzaW9uLCB0aGlzLl91cGRhdGUsIC8vIGNhbGxiYWNrXG5cdCAgICB7XG5cdCAgICAgIGZpbHRlcnM6IHRoaXMuZmlsdGVycyxcblx0ICAgICAgdHdvV2F5OiB0aGlzLnR3b1dheSxcblx0ICAgICAgZGVlcDogdGhpcy5kZWVwLFxuXHQgICAgICBwcmVQcm9jZXNzOiBwcmVQcm9jZXNzLFxuXHQgICAgICBwb3N0UHJvY2VzczogcG9zdFByb2Nlc3MsXG5cdCAgICAgIHNjb3BlOiB0aGlzLl9zY29wZVxuXHQgICAgfSk7XG5cdCAgICAvLyB2LW1vZGVsIHdpdGggaW5pdGFsIGlubGluZSB2YWx1ZSBuZWVkIHRvIHN5bmMgYmFjayB0b1xuXHQgICAgLy8gbW9kZWwgaW5zdGVhZCBvZiB1cGRhdGUgdG8gRE9NIG9uIGluaXQuIFRoZXkgd291bGRcblx0ICAgIC8vIHNldCB0aGUgYWZ0ZXJCaW5kIGhvb2sgdG8gaW5kaWNhdGUgdGhhdC5cblx0ICAgIGlmICh0aGlzLmFmdGVyQmluZCkge1xuXHQgICAgICB0aGlzLmFmdGVyQmluZCgpO1xuXHQgICAgfSBlbHNlIGlmICh0aGlzLnVwZGF0ZSkge1xuXHQgICAgICB0aGlzLnVwZGF0ZSh3YXRjaGVyLnZhbHVlKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogU2V0dXAgYWxsIHBhcmFtIGF0dHJpYnV0ZXMsIGUuZy4gdHJhY2stYnksXG5cdCAqIHRyYW5zaXRpb24tbW9kZSwgZXRjLi4uXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5fc2V0dXBQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKCF0aGlzLnBhcmFtcykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgcGFyYW1zID0gdGhpcy5wYXJhbXM7XG5cdCAgLy8gc3dhcCB0aGUgcGFyYW1zIGFycmF5IHdpdGggYSBmcmVzaCBvYmplY3QuXG5cdCAgdGhpcy5wYXJhbXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHZhciBpID0gcGFyYW1zLmxlbmd0aDtcblx0ICB2YXIga2V5LCB2YWwsIG1hcHBlZEtleTtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBrZXkgPSBoeXBoZW5hdGUocGFyYW1zW2ldKTtcblx0ICAgIG1hcHBlZEtleSA9IGNhbWVsaXplKGtleSk7XG5cdCAgICB2YWwgPSBnZXRCaW5kQXR0cih0aGlzLmVsLCBrZXkpO1xuXHQgICAgaWYgKHZhbCAhPSBudWxsKSB7XG5cdCAgICAgIC8vIGR5bmFtaWNcblx0ICAgICAgdGhpcy5fc2V0dXBQYXJhbVdhdGNoZXIobWFwcGVkS2V5LCB2YWwpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gc3RhdGljXG5cdCAgICAgIHZhbCA9IGdldEF0dHIodGhpcy5lbCwga2V5KTtcblx0ICAgICAgaWYgKHZhbCAhPSBudWxsKSB7XG5cdCAgICAgICAgdGhpcy5wYXJhbXNbbWFwcGVkS2V5XSA9IHZhbCA9PT0gJycgPyB0cnVlIDogdmFsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFNldHVwIGEgd2F0Y2hlciBmb3IgYSBkeW5hbWljIHBhcmFtLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHByZXNzaW9uXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5fc2V0dXBQYXJhbVdhdGNoZXIgPSBmdW5jdGlvbiAoa2V5LCBleHByZXNzaW9uKSB7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIHZhciBjYWxsZWQgPSBmYWxzZTtcblx0ICB2YXIgdW53YXRjaCA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kd2F0Y2goZXhwcmVzc2lvbiwgZnVuY3Rpb24gKHZhbCwgb2xkVmFsKSB7XG5cdCAgICBzZWxmLnBhcmFtc1trZXldID0gdmFsO1xuXHQgICAgLy8gc2luY2Ugd2UgYXJlIGluIGltbWVkaWF0ZSBtb2RlLFxuXHQgICAgLy8gb25seSBjYWxsIHRoZSBwYXJhbSBjaGFuZ2UgY2FsbGJhY2tzIGlmIHRoaXMgaXMgbm90IHRoZSBmaXJzdCB1cGRhdGUuXG5cdCAgICBpZiAoY2FsbGVkKSB7XG5cdCAgICAgIHZhciBjYiA9IHNlbGYucGFyYW1XYXRjaGVycyAmJiBzZWxmLnBhcmFtV2F0Y2hlcnNba2V5XTtcblx0ICAgICAgaWYgKGNiKSB7XG5cdCAgICAgICAgY2IuY2FsbChzZWxmLCB2YWwsIG9sZFZhbCk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGNhbGxlZCA9IHRydWU7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAgaW1tZWRpYXRlOiB0cnVlLFxuXHQgICAgdXNlcjogZmFsc2Vcblx0ICB9KTsodGhpcy5fcGFyYW1VbndhdGNoRm5zIHx8ICh0aGlzLl9wYXJhbVVud2F0Y2hGbnMgPSBbXSkpLnB1c2godW53YXRjaCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgdGhlIGRpcmVjdGl2ZSBpcyBhIGZ1bmN0aW9uIGNhbGxlclxuXHQgKiBhbmQgaWYgdGhlIGV4cHJlc3Npb24gaXMgYSBjYWxsYWJsZSBvbmUuIElmIGJvdGggdHJ1ZSxcblx0ICogd2Ugd3JhcCB1cCB0aGUgZXhwcmVzc2lvbiBhbmQgdXNlIGl0IGFzIHRoZSBldmVudFxuXHQgKiBoYW5kbGVyLlxuXHQgKlxuXHQgKiBlLmcuIG9uLWNsaWNrPVwiYSsrXCJcblx0ICpcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl9jaGVja1N0YXRlbWVudCA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgZXhwcmVzc2lvbiA9IHRoaXMuZXhwcmVzc2lvbjtcblx0ICBpZiAoZXhwcmVzc2lvbiAmJiB0aGlzLmFjY2VwdFN0YXRlbWVudCAmJiAhaXNTaW1wbGVQYXRoKGV4cHJlc3Npb24pKSB7XG5cdCAgICB2YXIgZm4gPSBwYXJzZUV4cHJlc3Npb24oZXhwcmVzc2lvbikuZ2V0O1xuXHQgICAgdmFyIHNjb3BlID0gdGhpcy5fc2NvcGUgfHwgdGhpcy52bTtcblx0ICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gaGFuZGxlcihlKSB7XG5cdCAgICAgIHNjb3BlLiRldmVudCA9IGU7XG5cdCAgICAgIGZuLmNhbGwoc2NvcGUsIHNjb3BlKTtcblx0ICAgICAgc2NvcGUuJGV2ZW50ID0gbnVsbDtcblx0ICAgIH07XG5cdCAgICBpZiAodGhpcy5maWx0ZXJzKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKGhhbmRsZXIsIG51bGwsIHRoaXMuZmlsdGVycyk7XG5cdCAgICB9XG5cdCAgICB0aGlzLnVwZGF0ZShoYW5kbGVyKTtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTZXQgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgd2l0aCB0aGUgc2V0dGVyLlxuXHQgKiBUaGlzIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gdHdvLXdheSBkaXJlY3RpdmVzXG5cdCAqIGUuZy4gdi1tb2RlbC5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuXHQgIGlmICh0aGlzLnR3b1dheSkge1xuXHQgICAgdGhpcy5fd2l0aExvY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICB0aGlzLl93YXRjaGVyLnNldCh2YWx1ZSk7XG5cdCAgICB9KTtcblx0ICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIHdhcm4oJ0RpcmVjdGl2ZS5zZXQoKSBjYW4gb25seSBiZSB1c2VkIGluc2lkZSB0d29XYXknICsgJ2RpcmVjdGl2ZXMuJyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEV4ZWN1dGUgYSBmdW5jdGlvbiB3aGlsZSBwcmV2ZW50aW5nIHRoYXQgZnVuY3Rpb24gZnJvbVxuXHQgKiB0cmlnZ2VyaW5nIHVwZGF0ZXMgb24gdGhpcyBkaXJlY3RpdmUgaW5zdGFuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5fd2l0aExvY2sgPSBmdW5jdGlvbiAoZm4pIHtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgc2VsZi5fbG9ja2VkID0gdHJ1ZTtcblx0ICBmbi5jYWxsKHNlbGYpO1xuXHQgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0ICAgIHNlbGYuX2xvY2tlZCA9IGZhbHNlO1xuXHQgIH0pO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGF0dGFjaGVzIGEgRE9NIGV2ZW50IGxpc3RlbmVyXG5cdCAqIHRvIHRoZSBkaXJlY3RpdmUgZWxlbWVudCBhbmQgYXV0b21ldGljYWxseSB0ZWFycyBpdCBkb3duXG5cdCAqIGR1cmluZyB1bmJpbmQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW3VzZUNhcHR1cmVdXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudCwgaGFuZGxlciwgdXNlQ2FwdHVyZSkge1xuXHQgIG9uKHRoaXMuZWwsIGV2ZW50LCBoYW5kbGVyLCB1c2VDYXB0dXJlKTsodGhpcy5fbGlzdGVuZXJzIHx8ICh0aGlzLl9saXN0ZW5lcnMgPSBbXSkpLnB1c2goW2V2ZW50LCBoYW5kbGVyXSk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogVGVhcmRvd24gdGhlIHdhdGNoZXIgYW5kIGNhbGwgdW5iaW5kLlxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX3RlYXJkb3duID0gZnVuY3Rpb24gKCkge1xuXHQgIGlmICh0aGlzLl9ib3VuZCkge1xuXHQgICAgdGhpcy5fYm91bmQgPSBmYWxzZTtcblx0ICAgIGlmICh0aGlzLnVuYmluZCkge1xuXHQgICAgICB0aGlzLnVuYmluZCgpO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuX3dhdGNoZXIpIHtcblx0ICAgICAgdGhpcy5fd2F0Y2hlci50ZWFyZG93bigpO1xuXHQgICAgfVxuXHQgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcblx0ICAgIHZhciBpO1xuXHQgICAgaWYgKGxpc3RlbmVycykge1xuXHQgICAgICBpID0gbGlzdGVuZXJzLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICAgIG9mZih0aGlzLmVsLCBsaXN0ZW5lcnNbaV1bMF0sIGxpc3RlbmVyc1tpXVsxXSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHZhciB1bndhdGNoRm5zID0gdGhpcy5fcGFyYW1VbndhdGNoRm5zO1xuXHQgICAgaWYgKHVud2F0Y2hGbnMpIHtcblx0ICAgICAgaSA9IHVud2F0Y2hGbnMubGVuZ3RoO1xuXHQgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAgdW53YXRjaEZuc1tpXSgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsKSB7XG5cdCAgICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzLiRyZW1vdmUodGhpcyk7XG5cdCAgICB9XG5cdCAgICB0aGlzLnZtID0gdGhpcy5lbCA9IHRoaXMuX3dhdGNoZXIgPSB0aGlzLl9saXN0ZW5lcnMgPSBudWxsO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIGxpZmVjeWNsZU1peGluIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBVcGRhdGUgdi1yZWYgZm9yIGNvbXBvbmVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX3VwZGF0ZVJlZiA9IGZ1bmN0aW9uIChyZW1vdmUpIHtcblx0ICAgIHZhciByZWYgPSB0aGlzLiRvcHRpb25zLl9yZWY7XG5cdCAgICBpZiAocmVmKSB7XG5cdCAgICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMuX2NvbnRleHQpLiRyZWZzO1xuXHQgICAgICBpZiAocmVtb3ZlKSB7XG5cdCAgICAgICAgaWYgKHJlZnNbcmVmXSA9PT0gdGhpcykge1xuXHQgICAgICAgICAgcmVmc1tyZWZdID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVmc1tyZWZdID0gdGhpcztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRyYW5zY2x1ZGUsIGNvbXBpbGUgYW5kIGxpbmsgZWxlbWVudC5cblx0ICAgKlxuXHQgICAqIElmIGEgcHJlLWNvbXBpbGVkIGxpbmtlciBpcyBhdmFpbGFibGUsIHRoYXQgbWVhbnMgdGhlXG5cdCAgICogcGFzc2VkIGluIGVsZW1lbnQgd2lsbCBiZSBwcmUtdHJhbnNjbHVkZWQgYW5kIGNvbXBpbGVkXG5cdCAgICogYXMgd2VsbCAtIGFsbCB3ZSBuZWVkIHRvIGRvIGlzIHRvIGNhbGwgdGhlIGxpbmtlci5cblx0ICAgKlxuXHQgICAqIE90aGVyd2lzZSB3ZSBuZWVkIHRvIGNhbGwgdHJhbnNjbHVkZS9jb21waWxlL2xpbmsgaGVyZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fY29tcGlsZSA9IGZ1bmN0aW9uIChlbCkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuXHRcblx0ICAgIC8vIHRyYW5zY2x1ZGUgYW5kIGluaXQgZWxlbWVudFxuXHQgICAgLy8gdHJhbnNjbHVkZSBjYW4gcG90ZW50aWFsbHkgcmVwbGFjZSBvcmlnaW5hbFxuXHQgICAgLy8gc28gd2UgbmVlZCB0byBrZWVwIHJlZmVyZW5jZTsgdGhpcyBzdGVwIGFsc28gaW5qZWN0c1xuXHQgICAgLy8gdGhlIHRlbXBsYXRlIGFuZCBjYWNoZXMgdGhlIG9yaWdpbmFsIGF0dHJpYnV0ZXNcblx0ICAgIC8vIG9uIHRoZSBjb250YWluZXIgbm9kZSBhbmQgcmVwbGFjZXIgbm9kZS5cblx0ICAgIHZhciBvcmlnaW5hbCA9IGVsO1xuXHQgICAgZWwgPSB0cmFuc2NsdWRlKGVsLCBvcHRpb25zKTtcblx0ICAgIHRoaXMuX2luaXRFbGVtZW50KGVsKTtcblx0XG5cdCAgICAvLyBoYW5kbGUgdi1wcmUgb24gcm9vdCBub2RlICgjMjAyNilcblx0ICAgIGlmIChlbC5ub2RlVHlwZSA9PT0gMSAmJiBnZXRBdHRyKGVsLCAndi1wcmUnKSAhPT0gbnVsbCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gcm9vdCBpcyBhbHdheXMgY29tcGlsZWQgcGVyLWluc3RhbmNlLCBiZWNhdXNlXG5cdCAgICAvLyBjb250YWluZXIgYXR0cnMgYW5kIHByb3BzIGNhbiBiZSBkaWZmZXJlbnQgZXZlcnkgdGltZS5cblx0ICAgIHZhciBjb250ZXh0T3B0aW9ucyA9IHRoaXMuX2NvbnRleHQgJiYgdGhpcy5fY29udGV4dC4kb3B0aW9ucztcblx0ICAgIHZhciByb290TGlua2VyID0gY29tcGlsZVJvb3QoZWwsIG9wdGlvbnMsIGNvbnRleHRPcHRpb25zKTtcblx0XG5cdCAgICAvLyByZXNvbHZlIHNsb3QgZGlzdHJpYnV0aW9uXG5cdCAgICByZXNvbHZlU2xvdHModGhpcywgb3B0aW9ucy5fY29udGVudCk7XG5cdFxuXHQgICAgLy8gY29tcGlsZSBhbmQgbGluayB0aGUgcmVzdFxuXHQgICAgdmFyIGNvbnRlbnRMaW5rRm47XG5cdCAgICB2YXIgY3RvciA9IHRoaXMuY29uc3RydWN0b3I7XG5cdCAgICAvLyBjb21wb25lbnQgY29tcGlsYXRpb24gY2FuIGJlIGNhY2hlZFxuXHQgICAgLy8gYXMgbG9uZyBhcyBpdCdzIG5vdCB1c2luZyBpbmxpbmUtdGVtcGxhdGVcblx0ICAgIGlmIChvcHRpb25zLl9saW5rZXJDYWNoYWJsZSkge1xuXHQgICAgICBjb250ZW50TGlua0ZuID0gY3Rvci5saW5rZXI7XG5cdCAgICAgIGlmICghY29udGVudExpbmtGbikge1xuXHQgICAgICAgIGNvbnRlbnRMaW5rRm4gPSBjdG9yLmxpbmtlciA9IGNvbXBpbGUoZWwsIG9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gbGluayBwaGFzZVxuXHQgICAgLy8gbWFrZSBzdXJlIHRvIGxpbmsgcm9vdCB3aXRoIHByb3Agc2NvcGUhXG5cdCAgICB2YXIgcm9vdFVubGlua0ZuID0gcm9vdExpbmtlcih0aGlzLCBlbCwgdGhpcy5fc2NvcGUpO1xuXHQgICAgdmFyIGNvbnRlbnRVbmxpbmtGbiA9IGNvbnRlbnRMaW5rRm4gPyBjb250ZW50TGlua0ZuKHRoaXMsIGVsKSA6IGNvbXBpbGUoZWwsIG9wdGlvbnMpKHRoaXMsIGVsKTtcblx0XG5cdCAgICAvLyByZWdpc3RlciBjb21wb3NpdGUgdW5saW5rIGZ1bmN0aW9uXG5cdCAgICAvLyB0byBiZSBjYWxsZWQgZHVyaW5nIGluc3RhbmNlIGRlc3RydWN0aW9uXG5cdCAgICB0aGlzLl91bmxpbmtGbiA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgcm9vdFVubGlua0ZuKCk7XG5cdCAgICAgIC8vIHBhc3NpbmcgZGVzdHJveWluZzogdHJ1ZSB0byBhdm9pZCBzZWFyY2hpbmcgYW5kXG5cdCAgICAgIC8vIHNwbGljaW5nIHRoZSBkaXJlY3RpdmVzXG5cdCAgICAgIGNvbnRlbnRVbmxpbmtGbih0cnVlKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gZmluYWxseSByZXBsYWNlIG9yaWdpbmFsXG5cdCAgICBpZiAob3B0aW9ucy5yZXBsYWNlKSB7XG5cdCAgICAgIHJlcGxhY2Uob3JpZ2luYWwsIGVsKTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLl9pc0NvbXBpbGVkID0gdHJ1ZTtcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdjb21waWxlZCcpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluaXRpYWxpemUgaW5zdGFuY2UgZWxlbWVudC4gQ2FsbGVkIGluIHRoZSBwdWJsaWNcblx0ICAgKiAkbW91bnQoKSBtZXRob2QuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRFbGVtZW50ID0gZnVuY3Rpb24gKGVsKSB7XG5cdCAgICBpZiAoaXNGcmFnbWVudChlbCkpIHtcblx0ICAgICAgdGhpcy5faXNGcmFnbWVudCA9IHRydWU7XG5cdCAgICAgIHRoaXMuJGVsID0gdGhpcy5fZnJhZ21lbnRTdGFydCA9IGVsLmZpcnN0Q2hpbGQ7XG5cdCAgICAgIHRoaXMuX2ZyYWdtZW50RW5kID0gZWwubGFzdENoaWxkO1xuXHQgICAgICAvLyBzZXQgcGVyc2lzdGVkIHRleHQgYW5jaG9ycyB0byBlbXB0eVxuXHQgICAgICBpZiAodGhpcy5fZnJhZ21lbnRTdGFydC5ub2RlVHlwZSA9PT0gMykge1xuXHQgICAgICAgIHRoaXMuX2ZyYWdtZW50U3RhcnQuZGF0YSA9IHRoaXMuX2ZyYWdtZW50RW5kLmRhdGEgPSAnJztcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLl9mcmFnbWVudCA9IGVsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy4kZWwgPSBlbDtcblx0ICAgIH1cblx0ICAgIHRoaXMuJGVsLl9fdnVlX18gPSB0aGlzO1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2JlZm9yZUNvbXBpbGUnKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGUgYW5kIGJpbmQgYSBkaXJlY3RpdmUgdG8gYW4gZWxlbWVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBkZXNjcmlwdG9yIC0gcGFyc2VkIGRpcmVjdGl2ZSBkZXNjcmlwdG9yXG5cdCAgICogQHBhcmFtIHtOb2RlfSBub2RlICAgLSB0YXJnZXQgbm9kZVxuXHQgICAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSB0cmFuc2NsdXNpb24gaG9zdCBjb21wb25lbnRcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddIC0gb3duZXIgZnJhZ21lbnRcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fYmluZERpciA9IGZ1bmN0aW9uIChkZXNjcmlwdG9yLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgdGhpcy5fZGlyZWN0aXZlcy5wdXNoKG5ldyBEaXJlY3RpdmUoZGVzY3JpcHRvciwgdGhpcywgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBUZWFyZG93biBhbiBpbnN0YW5jZSwgdW5vYnNlcnZlcyB0aGUgZGF0YSwgdW5iaW5kIGFsbCB0aGVcblx0ICAgKiBkaXJlY3RpdmVzLCB0dXJuIG9mZiBhbGwgdGhlIGV2ZW50IGxpc3RlbmVycywgZXRjLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmUgLSB3aGV0aGVyIHRvIHJlbW92ZSB0aGUgRE9NIG5vZGUuXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBkZWZlckNsZWFudXAgLSBpZiB0cnVlLCBkZWZlciBjbGVhbnVwIHRvXG5cdCAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZSBjYWxsZWQgbGF0ZXJcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChyZW1vdmUsIGRlZmVyQ2xlYW51cCkge1xuXHQgICAgaWYgKHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQpIHtcblx0ICAgICAgaWYgKCFkZWZlckNsZWFudXApIHtcblx0ICAgICAgICB0aGlzLl9jbGVhbnVwKCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBkZXN0cm95UmVhZHk7XG5cdCAgICB2YXIgcGVuZGluZ1JlbW92YWw7XG5cdFxuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgLy8gQ2xlYW51cCBzaG91bGQgYmUgY2FsbGVkIGVpdGhlciBzeW5jaHJvbm91c2x5IG9yIGFzeW5jaHJvbm95c2x5IGFzXG5cdCAgICAvLyBjYWxsYmFjayBvZiB0aGlzLiRyZW1vdmUoKSwgb3IgaWYgcmVtb3ZlIGFuZCBkZWZlckNsZWFudXAgYXJlIGZhbHNlLlxuXHQgICAgLy8gSW4gYW55IGNhc2UgaXQgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciBhbGwgb3RoZXIgcmVtb3ZpbmcsIHVuYmluZGluZyBhbmRcblx0ICAgIC8vIHR1cm5pbmcgb2YgaXMgZG9uZVxuXHQgICAgdmFyIGNsZWFudXBJZlBvc3NpYmxlID0gZnVuY3Rpb24gY2xlYW51cElmUG9zc2libGUoKSB7XG5cdCAgICAgIGlmIChkZXN0cm95UmVhZHkgJiYgIXBlbmRpbmdSZW1vdmFsICYmICFkZWZlckNsZWFudXApIHtcblx0ICAgICAgICBzZWxmLl9jbGVhbnVwKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLy8gcmVtb3ZlIERPTSBlbGVtZW50XG5cdCAgICBpZiAocmVtb3ZlICYmIHRoaXMuJGVsKSB7XG5cdCAgICAgIHBlbmRpbmdSZW1vdmFsID0gdHJ1ZTtcblx0ICAgICAgdGhpcy4kcmVtb3ZlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBwZW5kaW5nUmVtb3ZhbCA9IGZhbHNlO1xuXHQgICAgICAgIGNsZWFudXBJZlBvc3NpYmxlKCk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdiZWZvcmVEZXN0cm95Jyk7XG5cdCAgICB0aGlzLl9pc0JlaW5nRGVzdHJveWVkID0gdHJ1ZTtcblx0ICAgIHZhciBpO1xuXHQgICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSBwYXJlbnQuIG9ubHkgbmVjZXNzYXJ5XG5cdCAgICAvLyBpZiBwYXJlbnQgaXMgbm90IGJlaW5nIGRlc3Ryb3llZCBhcyB3ZWxsLlxuXHQgICAgdmFyIHBhcmVudCA9IHRoaXMuJHBhcmVudDtcblx0ICAgIGlmIChwYXJlbnQgJiYgIXBhcmVudC5faXNCZWluZ0Rlc3Ryb3llZCkge1xuXHQgICAgICBwYXJlbnQuJGNoaWxkcmVuLiRyZW1vdmUodGhpcyk7XG5cdCAgICAgIC8vIHVucmVnaXN0ZXIgcmVmIChyZW1vdmU6IHRydWUpXG5cdCAgICAgIHRoaXMuX3VwZGF0ZVJlZih0cnVlKTtcblx0ICAgIH1cblx0ICAgIC8vIGRlc3Ryb3kgYWxsIGNoaWxkcmVuLlxuXHQgICAgaSA9IHRoaXMuJGNoaWxkcmVuLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdGhpcy4kY2hpbGRyZW5baV0uJGRlc3Ryb3koKTtcblx0ICAgIH1cblx0ICAgIC8vIHRlYXJkb3duIHByb3BzXG5cdCAgICBpZiAodGhpcy5fcHJvcHNVbmxpbmtGbikge1xuXHQgICAgICB0aGlzLl9wcm9wc1VubGlua0ZuKCk7XG5cdCAgICB9XG5cdCAgICAvLyB0ZWFyZG93biBhbGwgZGlyZWN0aXZlcy4gdGhpcyBhbHNvIHRlYXJzZG93biBhbGxcblx0ICAgIC8vIGRpcmVjdGl2ZS1vd25lZCB3YXRjaGVycy5cblx0ICAgIGlmICh0aGlzLl91bmxpbmtGbikge1xuXHQgICAgICB0aGlzLl91bmxpbmtGbigpO1xuXHQgICAgfVxuXHQgICAgaSA9IHRoaXMuX3dhdGNoZXJzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdGhpcy5fd2F0Y2hlcnNbaV0udGVhcmRvd24oKTtcblx0ICAgIH1cblx0ICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgdG8gc2VsZiBvbiAkZWxcblx0ICAgIGlmICh0aGlzLiRlbCkge1xuXHQgICAgICB0aGlzLiRlbC5fX3Z1ZV9fID0gbnVsbDtcblx0ICAgIH1cblx0XG5cdCAgICBkZXN0cm95UmVhZHkgPSB0cnVlO1xuXHQgICAgY2xlYW51cElmUG9zc2libGUoKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBDbGVhbiB1cCB0byBlbnN1cmUgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuXHQgICAqIFRoaXMgaXMgY2FsbGVkIGFmdGVyIHRoZSBsZWF2ZSB0cmFuc2l0aW9uIGlmIHRoZXJlXG5cdCAgICogaXMgYW55LlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKHRoaXMuX2lzRGVzdHJveWVkKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gb3duZXIgZnJhZ21lbnRcblx0ICAgIC8vIGRvIGl0IGluIGNsZWFudXAgc28gdGhhdCB3ZSBjYW4gY2FsbCAkZGVzdHJveSB3aXRoXG5cdCAgICAvLyBkZWZlciByaWdodCB3aGVuIGEgZnJhZ21lbnQgaXMgYWJvdXQgdG8gYmUgcmVtb3ZlZC5cblx0ICAgIGlmICh0aGlzLl9mcmFnKSB7XG5cdCAgICAgIHRoaXMuX2ZyYWcuY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcblx0ICAgIH1cblx0ICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgZnJvbSBkYXRhIG9iXG5cdCAgICAvLyBmcm96ZW4gb2JqZWN0IG1heSBub3QgaGF2ZSBvYnNlcnZlci5cblx0ICAgIGlmICh0aGlzLl9kYXRhICYmIHRoaXMuX2RhdGEuX19vYl9fKSB7XG5cdCAgICAgIHRoaXMuX2RhdGEuX19vYl9fLnJlbW92ZVZtKHRoaXMpO1xuXHQgICAgfVxuXHQgICAgLy8gQ2xlYW4gdXAgcmVmZXJlbmNlcyB0byBwcml2YXRlIHByb3BlcnRpZXMgYW5kIG90aGVyXG5cdCAgICAvLyBpbnN0YW5jZXMuIHByZXNlcnZlIHJlZmVyZW5jZSB0byBfZGF0YSBzbyB0aGF0IHByb3h5XG5cdCAgICAvLyBhY2Nlc3NvcnMgc3RpbGwgd29yay4gVGhlIG9ubHkgcG90ZW50aWFsIHNpZGUgZWZmZWN0XG5cdCAgICAvLyBoZXJlIGlzIHRoYXQgbXV0YXRpbmcgdGhlIGluc3RhbmNlIGFmdGVyIGl0J3MgZGVzdHJveWVkXG5cdCAgICAvLyBtYXkgYWZmZWN0IHRoZSBzdGF0ZSBvZiBvdGhlciBjb21wb25lbnRzIHRoYXQgYXJlIHN0aWxsXG5cdCAgICAvLyBvYnNlcnZpbmcgdGhlIHNhbWUgb2JqZWN0LCBidXQgdGhhdCBzZWVtcyB0byBiZSBhXG5cdCAgICAvLyByZWFzb25hYmxlIHJlc3BvbnNpYmlsaXR5IGZvciB0aGUgdXNlciByYXRoZXIgdGhhblxuXHQgICAgLy8gYWx3YXlzIHRocm93aW5nIGFuIGVycm9yIG9uIHRoZW0uXG5cdCAgICB0aGlzLiRlbCA9IHRoaXMuJHBhcmVudCA9IHRoaXMuJHJvb3QgPSB0aGlzLiRjaGlsZHJlbiA9IHRoaXMuX3dhdGNoZXJzID0gdGhpcy5fY29udGV4dCA9IHRoaXMuX3Njb3BlID0gdGhpcy5fZGlyZWN0aXZlcyA9IG51bGw7XG5cdCAgICAvLyBjYWxsIHRoZSBsYXN0IGhvb2suLi5cblx0ICAgIHRoaXMuX2lzRGVzdHJveWVkID0gdHJ1ZTtcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdkZXN0cm95ZWQnKTtcblx0ICAgIC8vIHR1cm4gb2ZmIGFsbCBpbnN0YW5jZSBsaXN0ZW5lcnMuXG5cdCAgICB0aGlzLiRvZmYoKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtaXNjTWl4aW4gKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIEFwcGx5IGEgbGlzdCBvZiBmaWx0ZXIgKGRlc2NyaXB0b3JzKSB0byBhIHZhbHVlLlxuXHQgICAqIFVzaW5nIHBsYWluIGZvciBsb29wcyBoZXJlIGJlY2F1c2UgdGhpcyB3aWxsIGJlIGNhbGxlZCBpblxuXHQgICAqIHRoZSBnZXR0ZXIgb2YgYW55IHdhdGNoZXIgd2l0aCBmaWx0ZXJzIHNvIGl0IGlzIHZlcnlcblx0ICAgKiBwZXJmb3JtYW5jZSBzZW5zaXRpdmUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICogQHBhcmFtIHsqfSBbb2xkVmFsdWVdXG5cdCAgICogQHBhcmFtIHtBcnJheX0gZmlsdGVyc1xuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gd3JpdGVcblx0ICAgKiBAcmV0dXJuIHsqfVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9hcHBseUZpbHRlcnMgPSBmdW5jdGlvbiAodmFsdWUsIG9sZFZhbHVlLCBmaWx0ZXJzLCB3cml0ZSkge1xuXHQgICAgdmFyIGZpbHRlciwgZm4sIGFyZ3MsIGFyZywgb2Zmc2V0LCBpLCBsLCBqLCBrO1xuXHQgICAgZm9yIChpID0gMCwgbCA9IGZpbHRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGZpbHRlciA9IGZpbHRlcnNbd3JpdGUgPyBsIC0gaSAtIDEgOiBpXTtcblx0ICAgICAgZm4gPSByZXNvbHZlQXNzZXQodGhpcy4kb3B0aW9ucywgJ2ZpbHRlcnMnLCBmaWx0ZXIubmFtZSwgdHJ1ZSk7XG5cdCAgICAgIGlmICghZm4pIGNvbnRpbnVlO1xuXHQgICAgICBmbiA9IHdyaXRlID8gZm4ud3JpdGUgOiBmbi5yZWFkIHx8IGZuO1xuXHQgICAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSBjb250aW51ZTtcblx0ICAgICAgYXJncyA9IHdyaXRlID8gW3ZhbHVlLCBvbGRWYWx1ZV0gOiBbdmFsdWVdO1xuXHQgICAgICBvZmZzZXQgPSB3cml0ZSA/IDIgOiAxO1xuXHQgICAgICBpZiAoZmlsdGVyLmFyZ3MpIHtcblx0ICAgICAgICBmb3IgKGogPSAwLCBrID0gZmlsdGVyLmFyZ3MubGVuZ3RoOyBqIDwgazsgaisrKSB7XG5cdCAgICAgICAgICBhcmcgPSBmaWx0ZXIuYXJnc1tqXTtcblx0ICAgICAgICAgIGFyZ3NbaiArIG9mZnNldF0gPSBhcmcuZHluYW1pYyA/IHRoaXMuJGdldChhcmcudmFsdWUpIDogYXJnLnZhbHVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICB2YWx1ZSA9IGZuLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlc29sdmUgYSBjb21wb25lbnQsIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBjb21wb25lbnRcblx0ICAgKiBpcyBkZWZpbmVkIG5vcm1hbGx5IG9yIHVzaW5nIGFuIGFzeW5jIGZhY3RvcnkgZnVuY3Rpb24uXG5cdCAgICogUmVzb2x2ZXMgc3luY2hyb25vdXNseSBpZiBhbHJlYWR5IHJlc29sdmVkLCBvdGhlcndpc2Vcblx0ICAgKiByZXNvbHZlcyBhc3luY2hyb25vdXNseSBhbmQgY2FjaGVzIHRoZSByZXNvbHZlZFxuXHQgICAqIGNvbnN0cnVjdG9yIG9uIHRoZSBmYWN0b3J5LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHZhbHVlXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fcmVzb2x2ZUNvbXBvbmVudCA9IGZ1bmN0aW9uICh2YWx1ZSwgY2IpIHtcblx0ICAgIHZhciBmYWN0b3J5O1xuXHQgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBmYWN0b3J5ID0gdmFsdWU7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBmYWN0b3J5ID0gcmVzb2x2ZUFzc2V0KHRoaXMuJG9wdGlvbnMsICdjb21wb25lbnRzJywgdmFsdWUsIHRydWUpO1xuXHQgICAgfVxuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoIWZhY3RvcnkpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gYXN5bmMgY29tcG9uZW50IGZhY3Rvcnlcblx0ICAgIGlmICghZmFjdG9yeS5vcHRpb25zKSB7XG5cdCAgICAgIGlmIChmYWN0b3J5LnJlc29sdmVkKSB7XG5cdCAgICAgICAgLy8gY2FjaGVkXG5cdCAgICAgICAgY2IoZmFjdG9yeS5yZXNvbHZlZCk7XG5cdCAgICAgIH0gZWxzZSBpZiAoZmFjdG9yeS5yZXF1ZXN0ZWQpIHtcblx0ICAgICAgICAvLyBwb29sIGNhbGxiYWNrc1xuXHQgICAgICAgIGZhY3RvcnkucGVuZGluZ0NhbGxiYWNrcy5wdXNoKGNiKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBmYWN0b3J5LnJlcXVlc3RlZCA9IHRydWU7XG5cdCAgICAgICAgdmFyIGNicyA9IGZhY3RvcnkucGVuZGluZ0NhbGxiYWNrcyA9IFtjYl07XG5cdCAgICAgICAgZmFjdG9yeS5jYWxsKHRoaXMsIGZ1bmN0aW9uIHJlc29sdmUocmVzKSB7XG5cdCAgICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChyZXMpKSB7XG5cdCAgICAgICAgICAgIHJlcyA9IFZ1ZS5leHRlbmQocmVzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIC8vIGNhY2hlIHJlc29sdmVkXG5cdCAgICAgICAgICBmYWN0b3J5LnJlc29sdmVkID0gcmVzO1xuXHQgICAgICAgICAgLy8gaW52b2tlIGNhbGxiYWNrc1xuXHQgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjYnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGNic1tpXShyZXMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcblx0ICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignRmFpbGVkIHRvIHJlc29sdmUgYXN5bmMgY29tcG9uZW50JyArICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gJzogJyArIHZhbHVlIDogJycpICsgJy4gJyArIChyZWFzb24gPyAnXFxuUmVhc29uOiAnICsgcmVhc29uIDogJycpKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gbm9ybWFsIGNvbXBvbmVudFxuXHQgICAgICBjYihmYWN0b3J5KTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgZmlsdGVyUkUkMSA9IC9bXnxdXFx8W158XS87XG5cdFxuXHRmdW5jdGlvbiBkYXRhQVBJIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBHZXQgdGhlIHZhbHVlIGZyb20gYW4gZXhwcmVzc2lvbiBvbiB0aGlzIHZtLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FzU3RhdGVtZW50XVxuXHQgICAqIEByZXR1cm4geyp9XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGdldCA9IGZ1bmN0aW9uIChleHAsIGFzU3RhdGVtZW50KSB7XG5cdCAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cCk7XG5cdCAgICBpZiAocmVzKSB7XG5cdCAgICAgIGlmIChhc1N0YXRlbWVudCkge1xuXHQgICAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24gc3RhdGVtZW50SGFuZGxlcigpIHtcblx0ICAgICAgICAgIHNlbGYuJGFyZ3VtZW50cyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcblx0ICAgICAgICAgIHZhciByZXN1bHQgPSByZXMuZ2V0LmNhbGwoc2VsZiwgc2VsZik7XG5cdCAgICAgICAgICBzZWxmLiRhcmd1bWVudHMgPSBudWxsO1xuXHQgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgICAgICB9O1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICByZXR1cm4gcmVzLmdldC5jYWxsKHRoaXMsIHRoaXMpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBTZXQgdGhlIHZhbHVlIGZyb20gYW4gZXhwcmVzc2lvbiBvbiB0aGlzIHZtLlxuXHQgICAqIFRoZSBleHByZXNzaW9uIG11c3QgYmUgYSB2YWxpZCBsZWZ0LWhhbmRcblx0ICAgKiBleHByZXNzaW9uIGluIGFuIGFzc2lnbm1lbnQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAgICogQHBhcmFtIHsqfSB2YWxcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kc2V0ID0gZnVuY3Rpb24gKGV4cCwgdmFsKSB7XG5cdCAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cCwgdHJ1ZSk7XG5cdCAgICBpZiAocmVzICYmIHJlcy5zZXQpIHtcblx0ICAgICAgcmVzLnNldC5jYWxsKHRoaXMsIHRoaXMsIHZhbCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogRGVsZXRlIGEgcHJvcGVydHkgb24gdGhlIFZNXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIGRlbCh0aGlzLl9kYXRhLCBrZXkpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFdhdGNoIGFuIGV4cHJlc3Npb24sIHRyaWdnZXIgY2FsbGJhY2sgd2hlbiBpdHNcblx0ICAgKiB2YWx1ZSBjaGFuZ2VzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IGV4cE9yRm5cblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gZGVlcFxuXHQgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBpbW1lZGlhdGVcblx0ICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB1bndhdGNoRm5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kd2F0Y2ggPSBmdW5jdGlvbiAoZXhwT3JGbiwgY2IsIG9wdGlvbnMpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICB2YXIgcGFyc2VkO1xuXHQgICAgaWYgKHR5cGVvZiBleHBPckZuID09PSAnc3RyaW5nJykge1xuXHQgICAgICBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZShleHBPckZuKTtcblx0ICAgICAgZXhwT3JGbiA9IHBhcnNlZC5leHByZXNzaW9uO1xuXHQgICAgfVxuXHQgICAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIHtcblx0ICAgICAgZGVlcDogb3B0aW9ucyAmJiBvcHRpb25zLmRlZXAsXG5cdCAgICAgIHN5bmM6IG9wdGlvbnMgJiYgb3B0aW9ucy5zeW5jLFxuXHQgICAgICBmaWx0ZXJzOiBwYXJzZWQgJiYgcGFyc2VkLmZpbHRlcnMsXG5cdCAgICAgIHVzZXI6ICFvcHRpb25zIHx8IG9wdGlvbnMudXNlciAhPT0gZmFsc2Vcblx0ICAgIH0pO1xuXHQgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5pbW1lZGlhdGUpIHtcblx0ICAgICAgY2IuY2FsbCh2bSwgd2F0Y2hlci52YWx1ZSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gdW53YXRjaEZuKCkge1xuXHQgICAgICB3YXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgICB9O1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEV2YWx1YXRlIGEgdGV4dCBkaXJlY3RpdmUsIGluY2x1ZGluZyBmaWx0ZXJzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFthc1N0YXRlbWVudF1cblx0ICAgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGV2YWwgPSBmdW5jdGlvbiAodGV4dCwgYXNTdGF0ZW1lbnQpIHtcblx0ICAgIC8vIGNoZWNrIGZvciBmaWx0ZXJzLlxuXHQgICAgaWYgKGZpbHRlclJFJDEudGVzdCh0ZXh0KSkge1xuXHQgICAgICB2YXIgZGlyID0gcGFyc2VEaXJlY3RpdmUodGV4dCk7XG5cdCAgICAgIC8vIHRoZSBmaWx0ZXIgcmVnZXggY2hlY2sgbWlnaHQgZ2l2ZSBmYWxzZSBwb3NpdGl2ZVxuXHQgICAgICAvLyBmb3IgcGlwZXMgaW5zaWRlIHN0cmluZ3MsIHNvIGl0J3MgcG9zc2libGUgdGhhdFxuXHQgICAgICAvLyB3ZSBkb24ndCBnZXQgYW55IGZpbHRlcnMgaGVyZVxuXHQgICAgICB2YXIgdmFsID0gdGhpcy4kZ2V0KGRpci5leHByZXNzaW9uLCBhc1N0YXRlbWVudCk7XG5cdCAgICAgIHJldHVybiBkaXIuZmlsdGVycyA/IHRoaXMuX2FwcGx5RmlsdGVycyh2YWwsIG51bGwsIGRpci5maWx0ZXJzKSA6IHZhbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIG5vIGZpbHRlclxuXHQgICAgICByZXR1cm4gdGhpcy4kZ2V0KHRleHQsIGFzU3RhdGVtZW50KTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbnRlcnBvbGF0ZSBhIHBpZWNlIG9mIHRlbXBsYXRlIHRleHQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuXHQgICAqIEByZXR1cm4ge1N0cmluZ31cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kaW50ZXJwb2xhdGUgPSBmdW5jdGlvbiAodGV4dCkge1xuXHQgICAgdmFyIHRva2VucyA9IHBhcnNlVGV4dCh0ZXh0KTtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICBpZiAodG9rZW5zKSB7XG5cdCAgICAgIGlmICh0b2tlbnMubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgICAgcmV0dXJuIHZtLiRldmFsKHRva2Vuc1swXS52YWx1ZSkgKyAnJztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gdG9rZW5zLm1hcChmdW5jdGlvbiAodG9rZW4pIHtcblx0ICAgICAgICAgIHJldHVybiB0b2tlbi50YWcgPyB2bS4kZXZhbCh0b2tlbi52YWx1ZSkgOiB0b2tlbi52YWx1ZTtcblx0ICAgICAgICB9KS5qb2luKCcnKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIHRleHQ7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogTG9nIGluc3RhbmNlIGRhdGEgYXMgYSBwbGFpbiBKUyBvYmplY3Rcblx0ICAgKiBzbyB0aGF0IGl0IGlzIGVhc2llciB0byBpbnNwZWN0IGluIGNvbnNvbGUuXG5cdCAgICogVGhpcyBtZXRob2QgYXNzdW1lcyBjb25zb2xlIGlzIGF2YWlsYWJsZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBbcGF0aF1cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kbG9nID0gZnVuY3Rpb24gKHBhdGgpIHtcblx0ICAgIHZhciBkYXRhID0gcGF0aCA/IGdldFBhdGgodGhpcy5fZGF0YSwgcGF0aCkgOiB0aGlzLl9kYXRhO1xuXHQgICAgaWYgKGRhdGEpIHtcblx0ICAgICAgZGF0YSA9IGNsZWFuKGRhdGEpO1xuXHQgICAgfVxuXHQgICAgLy8gaW5jbHVkZSBjb21wdXRlZCBmaWVsZHNcblx0ICAgIGlmICghcGF0aCkge1xuXHQgICAgICB2YXIga2V5O1xuXHQgICAgICBmb3IgKGtleSBpbiB0aGlzLiRvcHRpb25zLmNvbXB1dGVkKSB7XG5cdCAgICAgICAgZGF0YVtrZXldID0gY2xlYW4odGhpc1trZXldKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAodGhpcy5fcHJvcHMpIHtcblx0ICAgICAgICBmb3IgKGtleSBpbiB0aGlzLl9wcm9wcykge1xuXHQgICAgICAgICAgZGF0YVtrZXldID0gY2xlYW4odGhpc1trZXldKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFwiY2xlYW5cIiBhIGdldHRlci9zZXR0ZXIgY29udmVydGVkIG9iamVjdCBpbnRvIGEgcGxhaW5cblx0ICAgKiBvYmplY3QgY29weS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSAtIG9ialxuXHQgICAqIEByZXR1cm4ge09iamVjdH1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gY2xlYW4ob2JqKSB7XG5cdCAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRvbUFQSSAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogQ29udmVuaWVuY2Ugb24taW5zdGFuY2UgbmV4dFRpY2suIFRoZSBjYWxsYmFjayBpc1xuXHQgICAqIGF1dG8tYm91bmQgdG8gdGhlIGluc3RhbmNlLCBhbmQgdGhpcyBhdm9pZHMgY29tcG9uZW50XG5cdCAgICogbW9kdWxlcyBoYXZpbmcgdG8gcmVseSBvbiB0aGUgZ2xvYmFsIFZ1ZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJG5leHRUaWNrID0gZnVuY3Rpb24gKGZuKSB7XG5cdCAgICBuZXh0VGljayhmbiwgdGhpcyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQXBwZW5kIGluc3RhbmNlIHRvIHRhcmdldFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRhcHBlbmRUbyA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuXHQgICAgcmV0dXJuIGluc2VydCh0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgYXBwZW5kLCBhcHBlbmRXaXRoVHJhbnNpdGlvbik7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUHJlcGVuZCBpbnN0YW5jZSB0byB0YXJnZXRcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kcHJlcGVuZFRvID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xuXHQgICAgaWYgKHRhcmdldC5oYXNDaGlsZE5vZGVzKCkpIHtcblx0ICAgICAgdGhpcy4kYmVmb3JlKHRhcmdldC5maXJzdENoaWxkLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy4kYXBwZW5kVG8odGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5zZXJ0IGluc3RhbmNlIGJlZm9yZSB0YXJnZXRcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kYmVmb3JlID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgICByZXR1cm4gaW5zZXJ0KHRoaXMsIHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uLCBiZWZvcmVXaXRoQ2IsIGJlZm9yZVdpdGhUcmFuc2l0aW9uKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbnNlcnQgaW5zdGFuY2UgYWZ0ZXIgdGFyZ2V0XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGFmdGVyID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xuXHQgICAgaWYgKHRhcmdldC5uZXh0U2libGluZykge1xuXHQgICAgICB0aGlzLiRiZWZvcmUodGFyZ2V0Lm5leHRTaWJsaW5nLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy4kYXBwZW5kVG8odGFyZ2V0LnBhcmVudE5vZGUsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZW1vdmUgaW5zdGFuY2UgZnJvbSBET01cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJHJlbW92ZSA9IGZ1bmN0aW9uIChjYiwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICAgIGlmICghdGhpcy4kZWwucGFyZW50Tm9kZSkge1xuXHQgICAgICByZXR1cm4gY2IgJiYgY2IoKTtcblx0ICAgIH1cblx0ICAgIHZhciBpbkRvY3VtZW50ID0gdGhpcy5faXNBdHRhY2hlZCAmJiBpbkRvYyh0aGlzLiRlbCk7XG5cdCAgICAvLyBpZiB3ZSBhcmUgbm90IGluIGRvY3VtZW50LCBubyBuZWVkIHRvIGNoZWNrXG5cdCAgICAvLyBmb3IgdHJhbnNpdGlvbnNcblx0ICAgIGlmICghaW5Eb2N1bWVudCkgd2l0aFRyYW5zaXRpb24gPSBmYWxzZTtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciByZWFsQ2IgPSBmdW5jdGlvbiByZWFsQ2IoKSB7XG5cdCAgICAgIGlmIChpbkRvY3VtZW50KSBzZWxmLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcblx0ICAgICAgaWYgKGNiKSBjYigpO1xuXHQgICAgfTtcblx0ICAgIGlmICh0aGlzLl9pc0ZyYWdtZW50KSB7XG5cdCAgICAgIHJlbW92ZU5vZGVSYW5nZSh0aGlzLl9mcmFnbWVudFN0YXJ0LCB0aGlzLl9mcmFnbWVudEVuZCwgdGhpcywgdGhpcy5fZnJhZ21lbnQsIHJlYWxDYik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgb3AgPSB3aXRoVHJhbnNpdGlvbiA9PT0gZmFsc2UgPyByZW1vdmVXaXRoQ2IgOiByZW1vdmVXaXRoVHJhbnNpdGlvbjtcblx0ICAgICAgb3AodGhpcy4kZWwsIHRoaXMsIHJlYWxDYik7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBTaGFyZWQgRE9NIGluc2VydGlvbiBmdW5jdGlvbi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXVxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMSAtIG9wIGZvciBub24tdHJhbnNpdGlvbiBpbnNlcnRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcDIgLSBvcCBmb3IgdHJhbnNpdGlvbiBpbnNlcnRcblx0ICAgKiBAcmV0dXJuIHZtXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGluc2VydCh2bSwgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIG9wMSwgb3AyKSB7XG5cdCAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xuXHQgICAgdmFyIHRhcmdldElzRGV0YWNoZWQgPSAhaW5Eb2ModGFyZ2V0KTtcblx0ICAgIHZhciBvcCA9IHdpdGhUcmFuc2l0aW9uID09PSBmYWxzZSB8fCB0YXJnZXRJc0RldGFjaGVkID8gb3AxIDogb3AyO1xuXHQgICAgdmFyIHNob3VsZENhbGxIb29rID0gIXRhcmdldElzRGV0YWNoZWQgJiYgIXZtLl9pc0F0dGFjaGVkICYmICFpbkRvYyh2bS4kZWwpO1xuXHQgICAgaWYgKHZtLl9pc0ZyYWdtZW50KSB7XG5cdCAgICAgIG1hcE5vZGVSYW5nZSh2bS5fZnJhZ21lbnRTdGFydCwgdm0uX2ZyYWdtZW50RW5kLCBmdW5jdGlvbiAobm9kZSkge1xuXHQgICAgICAgIG9wKG5vZGUsIHRhcmdldCwgdm0pO1xuXHQgICAgICB9KTtcblx0ICAgICAgY2IgJiYgY2IoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG9wKHZtLiRlbCwgdGFyZ2V0LCB2bSwgY2IpO1xuXHQgICAgfVxuXHQgICAgaWYgKHNob3VsZENhbGxIb29rKSB7XG5cdCAgICAgIHZtLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB2bTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIENoZWNrIGZvciBzZWxlY3RvcnNcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGVsXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHF1ZXJ5KGVsKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGVsID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpIDogZWw7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBBcHBlbmQgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gZWxcblx0ICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gYXBwZW5kKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuXHQgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcblx0ICAgIGlmIChjYikgY2IoKTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluc2VydEJlZm9yZSBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSBlbFxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBiZWZvcmVXaXRoQ2IoZWwsIHRhcmdldCwgdm0sIGNiKSB7XG5cdCAgICBiZWZvcmUoZWwsIHRhcmdldCk7XG5cdCAgICBpZiAoY2IpIGNiKCk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBSZW1vdmUgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gZWxcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJlbW92ZVdpdGhDYihlbCwgdm0sIGNiKSB7XG5cdCAgICByZW1vdmUoZWwpO1xuXHQgICAgaWYgKGNiKSBjYigpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZXZlbnRzQVBJIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBMaXN0ZW4gb24gdGhlIGdpdmVuIGBldmVudGAgd2l0aCBgZm5gLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kb24gPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG5cdCAgICAodGhpcy5fZXZlbnRzW2V2ZW50XSB8fCAodGhpcy5fZXZlbnRzW2V2ZW50XSA9IFtdKSkucHVzaChmbik7XG5cdCAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAxKTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEFkZHMgYW4gYGV2ZW50YCBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgaW52b2tlZCBhIHNpbmdsZVxuXHQgICAqIHRpbWUgdGhlbiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRvbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgZnVuY3Rpb24gb24oKSB7XG5cdCAgICAgIHNlbGYuJG9mZihldmVudCwgb24pO1xuXHQgICAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHQgICAgb24uZm4gPSBmbjtcblx0ICAgIHRoaXMuJG9uKGV2ZW50LCBvbik7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZW1vdmUgdGhlIGdpdmVuIGNhbGxiYWNrIGZvciBgZXZlbnRgIG9yIGFsbFxuXHQgICAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kb2ZmID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuXHQgICAgdmFyIGNicztcblx0ICAgIC8vIGFsbFxuXHQgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG5cdCAgICAgIGlmICh0aGlzLiRwYXJlbnQpIHtcblx0ICAgICAgICBmb3IgKGV2ZW50IGluIHRoaXMuX2V2ZW50cykge1xuXHQgICAgICAgICAgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcblx0ICAgICAgICAgIGlmIChjYnMpIHtcblx0ICAgICAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLWNicy5sZW5ndGgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICB0aGlzLl9ldmVudHMgPSB7fTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgICAvLyBzcGVjaWZpYyBldmVudFxuXHQgICAgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcblx0ICAgIGlmICghY2JzKSB7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLWNicy5sZW5ndGgpO1xuXHQgICAgICB0aGlzLl9ldmVudHNbZXZlbnRdID0gbnVsbDtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgICAvLyBzcGVjaWZpYyBoYW5kbGVyXG5cdCAgICB2YXIgY2I7XG5cdCAgICB2YXIgaSA9IGNicy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGNiID0gY2JzW2ldO1xuXHQgICAgICBpZiAoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbikge1xuXHQgICAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC0xKTtcblx0ICAgICAgICBjYnMuc3BsaWNlKGksIDEpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBUcmlnZ2VyIGFuIGV2ZW50IG9uIHNlbGYuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGV2ZW50XG5cdCAgICogQHJldHVybiB7Qm9vbGVhbn0gc2hvdWxkUHJvcGFnYXRlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGVtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIHZhciBpc1NvdXJjZSA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZyc7XG5cdCAgICBldmVudCA9IGlzU291cmNlID8gZXZlbnQgOiBldmVudC5uYW1lO1xuXHQgICAgdmFyIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF07XG5cdCAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gaXNTb3VyY2UgfHwgIWNicztcblx0ICAgIGlmIChjYnMpIHtcblx0ICAgICAgY2JzID0gY2JzLmxlbmd0aCA+IDEgPyB0b0FycmF5KGNicykgOiBjYnM7XG5cdCAgICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBoYWNreSBzb2x1dGlvbiB0byB0aGUgcXVlc3Rpb24gcmFpc2VkXG5cdCAgICAgIC8vIGluICMyMTAyOiBmb3IgYW4gaW5saW5lIGNvbXBvbmVudCBsaXN0ZW5lciBsaWtlIDxjb21wIEB0ZXN0PVwiZG9UaGlzXCI+LFxuXHQgICAgICAvLyB0aGUgcHJvcGFnYXRpb24gaGFuZGxpbmcgaXMgc29tZXdoYXQgYnJva2VuLiBUaGVyZWZvcmUgd2Vcblx0ICAgICAgLy8gbmVlZCB0byB0cmVhdCB0aGVzZSBpbmxpbmUgY2FsbGJhY2tzIGRpZmZlcmVudGx5LlxuXHQgICAgICB2YXIgaGFzUGFyZW50Q2JzID0gaXNTb3VyY2UgJiYgY2JzLnNvbWUoZnVuY3Rpb24gKGNiKSB7XG5cdCAgICAgICAgcmV0dXJuIGNiLl9mcm9tUGFyZW50O1xuXHQgICAgICB9KTtcblx0ICAgICAgaWYgKGhhc1BhcmVudENicykge1xuXHQgICAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICB2YXIgY2IgPSBjYnNbaV07XG5cdCAgICAgICAgdmFyIHJlcyA9IGNiLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgICAgIGlmIChyZXMgPT09IHRydWUgJiYgKCFoYXNQYXJlbnRDYnMgfHwgY2IuX2Zyb21QYXJlbnQpKSB7XG5cdCAgICAgICAgICBzaG91bGRQcm9wYWdhdGUgPSB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHNob3VsZFByb3BhZ2F0ZTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZWN1cnNpdmVseSBicm9hZGNhc3QgYW4gZXZlbnQgdG8gYWxsIGNoaWxkcmVuIGluc3RhbmNlcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gZXZlbnRcblx0ICAgKiBAcGFyYW0gey4uLip9IGFkZGl0aW9uYWwgYXJndW1lbnRzXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGJyb2FkY2FzdCA9IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgdmFyIGlzU291cmNlID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJztcblx0ICAgIGV2ZW50ID0gaXNTb3VyY2UgPyBldmVudCA6IGV2ZW50Lm5hbWU7XG5cdCAgICAvLyBpZiBubyBjaGlsZCBoYXMgcmVnaXN0ZXJlZCBmb3IgdGhpcyBldmVudCxcblx0ICAgIC8vIHRoZW4gdGhlcmUncyBubyBuZWVkIHRvIGJyb2FkY2FzdC5cblx0ICAgIGlmICghdGhpcy5fZXZlbnRzQ291bnRbZXZlbnRdKSByZXR1cm47XG5cdCAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLiRjaGlsZHJlbjtcblx0ICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO1xuXHQgICAgaWYgKGlzU291cmNlKSB7XG5cdCAgICAgIC8vIHVzZSBvYmplY3QgZXZlbnQgdG8gaW5kaWNhdGUgbm9uLXNvdXJjZSBlbWl0XG5cdCAgICAgIC8vIG9uIGNoaWxkcmVuXG5cdCAgICAgIGFyZ3NbMF0gPSB7IG5hbWU6IGV2ZW50LCBzb3VyY2U6IHRoaXMgfTtcblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuXHQgICAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gY2hpbGQuJGVtaXQuYXBwbHkoY2hpbGQsIGFyZ3MpO1xuXHQgICAgICBpZiAoc2hvdWxkUHJvcGFnYXRlKSB7XG5cdCAgICAgICAgY2hpbGQuJGJyb2FkY2FzdC5hcHBseShjaGlsZCwgYXJncyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlY3Vyc2l2ZWx5IHByb3BhZ2F0ZSBhbiBldmVudCB1cCB0aGUgcGFyZW50IGNoYWluLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAgICogQHBhcmFtIHsuLi4qfSBhZGRpdGlvbmFsIGFyZ3VtZW50c1xuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRkaXNwYXRjaCA9IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IHRoaXMuJGVtaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIGlmICghc2hvdWxkUHJvcGFnYXRlKSByZXR1cm47XG5cdCAgICB2YXIgcGFyZW50ID0gdGhpcy4kcGFyZW50O1xuXHQgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG5cdCAgICAvLyB1c2Ugb2JqZWN0IGV2ZW50IHRvIGluZGljYXRlIG5vbi1zb3VyY2UgZW1pdFxuXHQgICAgLy8gb24gcGFyZW50c1xuXHQgICAgYXJnc1swXSA9IHsgbmFtZTogZXZlbnQsIHNvdXJjZTogdGhpcyB9O1xuXHQgICAgd2hpbGUgKHBhcmVudCkge1xuXHQgICAgICBzaG91bGRQcm9wYWdhdGUgPSBwYXJlbnQuJGVtaXQuYXBwbHkocGFyZW50LCBhcmdzKTtcblx0ICAgICAgcGFyZW50ID0gc2hvdWxkUHJvcGFnYXRlID8gcGFyZW50LiRwYXJlbnQgOiBudWxsO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogTW9kaWZ5IHRoZSBsaXN0ZW5lciBjb3VudHMgb24gYWxsIHBhcmVudHMuXG5cdCAgICogVGhpcyBib29ra2VlcGluZyBhbGxvd3MgJGJyb2FkY2FzdCB0byByZXR1cm4gZWFybHkgd2hlblxuXHQgICAqIG5vIGNoaWxkIGhhcyBsaXN0ZW5lZCB0byBhIGNlcnRhaW4gZXZlbnQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gY291bnRcblx0ICAgKi9cblx0XG5cdCAgdmFyIGhvb2tSRSA9IC9eaG9vazovO1xuXHQgIGZ1bmN0aW9uIG1vZGlmeUxpc3RlbmVyQ291bnQodm0sIGV2ZW50LCBjb3VudCkge1xuXHQgICAgdmFyIHBhcmVudCA9IHZtLiRwYXJlbnQ7XG5cdCAgICAvLyBob29rcyBkbyBub3QgZ2V0IGJyb2FkY2FzdGVkIHNvIG5vIG5lZWRcblx0ICAgIC8vIHRvIGRvIGJvb2trZWVwaW5nIGZvciB0aGVtXG5cdCAgICBpZiAoIXBhcmVudCB8fCAhY291bnQgfHwgaG9va1JFLnRlc3QoZXZlbnQpKSByZXR1cm47XG5cdCAgICB3aGlsZSAocGFyZW50KSB7XG5cdCAgICAgIHBhcmVudC5fZXZlbnRzQ291bnRbZXZlbnRdID0gKHBhcmVudC5fZXZlbnRzQ291bnRbZXZlbnRdIHx8IDApICsgY291bnQ7XG5cdCAgICAgIHBhcmVudCA9IHBhcmVudC4kcGFyZW50O1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbGlmZWN5Y2xlQVBJIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBTZXQgaW5zdGFuY2UgdGFyZ2V0IGVsZW1lbnQgYW5kIGtpY2sgb2ZmIHRoZSBjb21waWxhdGlvblxuXHQgICAqIHByb2Nlc3MuIFRoZSBwYXNzZWQgaW4gYGVsYCBjYW4gYmUgYSBzZWxlY3RvciBzdHJpbmcsIGFuXG5cdCAgICogZXhpc3RpbmcgRWxlbWVudCwgb3IgYSBEb2N1bWVudEZyYWdtZW50IChmb3IgYmxvY2tcblx0ICAgKiBpbnN0YW5jZXMpLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR8c3RyaW5nfSBlbFxuXHQgICAqIEBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kbW91bnQgPSBmdW5jdGlvbiAoZWwpIHtcblx0ICAgIGlmICh0aGlzLl9pc0NvbXBpbGVkKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignJG1vdW50KCkgc2hvdWxkIGJlIGNhbGxlZCBvbmx5IG9uY2UuJywgdGhpcyk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGVsID0gcXVlcnkoZWwpO1xuXHQgICAgaWYgKCFlbCkge1xuXHQgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgfVxuXHQgICAgdGhpcy5fY29tcGlsZShlbCk7XG5cdCAgICB0aGlzLl9pbml0RE9NSG9va3MoKTtcblx0ICAgIGlmIChpbkRvYyh0aGlzLiRlbCkpIHtcblx0ICAgICAgdGhpcy5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG5cdCAgICAgIHJlYWR5LmNhbGwodGhpcyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLiRvbmNlKCdob29rOmF0dGFjaGVkJywgcmVhZHkpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogTWFyayBhbiBpbnN0YW5jZSBhcyByZWFkeS5cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVhZHkoKSB7XG5cdCAgICB0aGlzLl9pc0F0dGFjaGVkID0gdHJ1ZTtcblx0ICAgIHRoaXMuX2lzUmVhZHkgPSB0cnVlO1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ3JlYWR5Jyk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBUZWFyZG93biB0aGUgaW5zdGFuY2UsIHNpbXBseSBkZWxlZ2F0ZSB0byB0aGUgaW50ZXJuYWxcblx0ICAgKiBfZGVzdHJveS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBkZWZlckNsZWFudXBcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZGVzdHJveSA9IGZ1bmN0aW9uIChyZW1vdmUsIGRlZmVyQ2xlYW51cCkge1xuXHQgICAgdGhpcy5fZGVzdHJveShyZW1vdmUsIGRlZmVyQ2xlYW51cCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUGFydGlhbGx5IGNvbXBpbGUgYSBwaWVjZSBvZiBET00gYW5kIHJldHVybiBhXG5cdCAgICogZGVjb21waWxlIGZ1bmN0aW9uLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG5cdCAgICogQHBhcmFtIHtWdWV9IFtob3N0XVxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddXG5cdCAgICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGNvbXBpbGUgPSBmdW5jdGlvbiAoZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICByZXR1cm4gY29tcGlsZShlbCwgdGhpcy4kb3B0aW9ucywgdHJ1ZSkodGhpcywgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGhlIGV4cG9zZWQgVnVlIGNvbnN0cnVjdG9yLlxuXHQgKlxuXHQgKiBBUEkgY29udmVudGlvbnM6XG5cdCAqIC0gcHVibGljIEFQSSBtZXRob2RzL3Byb3BlcnRpZXMgYXJlIHByZWZpeGVkIHdpdGggYCRgXG5cdCAqIC0gaW50ZXJuYWwgbWV0aG9kcy9wcm9wZXJ0aWVzIGFyZSBwcmVmaXhlZCB3aXRoIGBfYFxuXHQgKiAtIG5vbi1wcmVmaXhlZCBwcm9wZXJ0aWVzIGFyZSBhc3N1bWVkIHRvIGJlIHByb3hpZWQgdXNlclxuXHQgKiAgIGRhdGEuXG5cdCAqXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBWdWUob3B0aW9ucykge1xuXHQgIHRoaXMuX2luaXQob3B0aW9ucyk7XG5cdH1cblx0XG5cdC8vIGluc3RhbGwgaW50ZXJuYWxzXG5cdGluaXRNaXhpbihWdWUpO1xuXHRzdGF0ZU1peGluKFZ1ZSk7XG5cdGV2ZW50c01peGluKFZ1ZSk7XG5cdGxpZmVjeWNsZU1peGluKFZ1ZSk7XG5cdG1pc2NNaXhpbihWdWUpO1xuXHRcblx0Ly8gaW5zdGFsbCBpbnN0YW5jZSBBUElzXG5cdGRhdGFBUEkoVnVlKTtcblx0ZG9tQVBJKFZ1ZSk7XG5cdGV2ZW50c0FQSShWdWUpO1xuXHRsaWZlY3ljbGVBUEkoVnVlKTtcblx0XG5cdHZhciBzbG90ID0ge1xuXHRcblx0ICBwcmlvcml0eTogU0xPVCxcblx0ICBwYXJhbXM6IFsnbmFtZSddLFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gdGhpcyB3YXMgcmVzb2x2ZWQgZHVyaW5nIGNvbXBvbmVudCB0cmFuc2NsdXNpb25cblx0ICAgIHZhciBuYW1lID0gdGhpcy5wYXJhbXMubmFtZSB8fCAnZGVmYXVsdCc7XG5cdCAgICB2YXIgY29udGVudCA9IHRoaXMudm0uX3Nsb3RDb250ZW50cyAmJiB0aGlzLnZtLl9zbG90Q29udGVudHNbbmFtZV07XG5cdCAgICBpZiAoIWNvbnRlbnQgfHwgIWNvbnRlbnQuaGFzQ2hpbGROb2RlcygpKSB7XG5cdCAgICAgIHRoaXMuZmFsbGJhY2soKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuY29tcGlsZShjb250ZW50LmNsb25lTm9kZSh0cnVlKSwgdGhpcy52bS5fY29udGV4dCwgdGhpcy52bSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgY29tcGlsZTogZnVuY3Rpb24gY29tcGlsZShjb250ZW50LCBjb250ZXh0LCBob3N0KSB7XG5cdCAgICBpZiAoY29udGVudCAmJiBjb250ZXh0KSB7XG5cdCAgICAgIGlmICh0aGlzLmVsLmhhc0NoaWxkTm9kZXMoKSAmJiBjb250ZW50LmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICYmIGNvbnRlbnQuY2hpbGROb2Rlc1swXS5ub2RlVHlwZSA9PT0gMSAmJiBjb250ZW50LmNoaWxkTm9kZXNbMF0uaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcblx0ICAgICAgICAvLyBpZiB0aGUgaW5zZXJ0ZWQgc2xvdCBoYXMgdi1pZlxuXHQgICAgICAgIC8vIGluamVjdCBmYWxsYmFjayBjb250ZW50IGFzIHRoZSB2LWVsc2Vcblx0ICAgICAgICB2YXIgZWxzZUJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcblx0ICAgICAgICBlbHNlQmxvY2suc2V0QXR0cmlidXRlKCd2LWVsc2UnLCAnJyk7XG5cdCAgICAgICAgZWxzZUJsb2NrLmlubmVySFRNTCA9IHRoaXMuZWwuaW5uZXJIVE1MO1xuXHQgICAgICAgIC8vIHRoZSBlbHNlIGJsb2NrIHNob3VsZCBiZSBjb21waWxlZCBpbiBjaGlsZCBzY29wZVxuXHQgICAgICAgIGVsc2VCbG9jay5fY29udGV4dCA9IHRoaXMudm07XG5cdCAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChlbHNlQmxvY2spO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBzY29wZSA9IGhvc3QgPyBob3N0Ll9zY29wZSA6IHRoaXMuX3Njb3BlO1xuXHQgICAgICB0aGlzLnVubGluayA9IGNvbnRleHQuJGNvbXBpbGUoY29udGVudCwgaG9zdCwgc2NvcGUsIHRoaXMuX2ZyYWcpO1xuXHQgICAgfVxuXHQgICAgaWYgKGNvbnRlbnQpIHtcblx0ICAgICAgcmVwbGFjZSh0aGlzLmVsLCBjb250ZW50KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJlbW92ZSh0aGlzLmVsKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBmYWxsYmFjazogZnVuY3Rpb24gZmFsbGJhY2soKSB7XG5cdCAgICB0aGlzLmNvbXBpbGUoZXh0cmFjdENvbnRlbnQodGhpcy5lbCwgdHJ1ZSksIHRoaXMudm0pO1xuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgaWYgKHRoaXMudW5saW5rKSB7XG5cdCAgICAgIHRoaXMudW5saW5rKCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHBhcnRpYWwgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBQQVJUSUFMLFxuXHRcblx0ICBwYXJhbXM6IFsnbmFtZSddLFxuXHRcblx0ICAvLyB3YXRjaCBjaGFuZ2VzIHRvIG5hbWUgZm9yIGR5bmFtaWMgcGFydGlhbHNcblx0ICBwYXJhbVdhdGNoZXJzOiB7XG5cdCAgICBuYW1lOiBmdW5jdGlvbiBuYW1lKHZhbHVlKSB7XG5cdCAgICAgIHZJZi5yZW1vdmUuY2FsbCh0aGlzKTtcblx0ICAgICAgaWYgKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5pbnNlcnQodmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LXBhcnRpYWwnKTtcblx0ICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuXHQgICAgdGhpcy5pbnNlcnQodGhpcy5wYXJhbXMubmFtZSk7XG5cdCAgfSxcblx0XG5cdCAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoaWQpIHtcblx0ICAgIHZhciBwYXJ0aWFsID0gcmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICdwYXJ0aWFscycsIGlkLCB0cnVlKTtcblx0ICAgIGlmIChwYXJ0aWFsKSB7XG5cdCAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgcGFydGlhbCk7XG5cdCAgICAgIHZJZi5pbnNlcnQuY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIGlmICh0aGlzLmZyYWcpIHtcblx0ICAgICAgdGhpcy5mcmFnLmRlc3Ryb3koKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgZWxlbWVudERpcmVjdGl2ZXMgPSB7XG5cdCAgc2xvdDogc2xvdCxcblx0ICBwYXJ0aWFsOiBwYXJ0aWFsXG5cdH07XG5cdFxuXHR2YXIgY29udmVydEFycmF5ID0gdkZvci5fcG9zdFByb2Nlc3M7XG5cdFxuXHQvKipcblx0ICogTGltaXQgZmlsdGVyIGZvciBhcnJheXNcblx0ICpcblx0ICogQHBhcmFtIHtOdW1iZXJ9IG5cblx0ICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCAoRGVjaW1hbCBleHBlY3RlZClcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBsaW1pdEJ5KGFyciwgbiwgb2Zmc2V0KSB7XG5cdCAgb2Zmc2V0ID0gb2Zmc2V0ID8gcGFyc2VJbnQob2Zmc2V0LCAxMCkgOiAwO1xuXHQgIG4gPSB0b051bWJlcihuKTtcblx0ICByZXR1cm4gdHlwZW9mIG4gPT09ICdudW1iZXInID8gYXJyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgbikgOiBhcnI7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGaWx0ZXIgZmlsdGVyIGZvciBhcnJheXNcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW2RlbGltaXRlcl1cblx0ICogQHBhcmFtIHtTdHJpbmd9IC4uLmRhdGFLZXlzXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZmlsdGVyQnkoYXJyLCBzZWFyY2gsIGRlbGltaXRlcikge1xuXHQgIGFyciA9IGNvbnZlcnRBcnJheShhcnIpO1xuXHQgIGlmIChzZWFyY2ggPT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIGFycjtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBzZWFyY2ggPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiBhcnIuZmlsdGVyKHNlYXJjaCk7XG5cdCAgfVxuXHQgIC8vIGNhc3QgdG8gbG93ZXJjYXNlIHN0cmluZ1xuXHQgIHNlYXJjaCA9ICgnJyArIHNlYXJjaCkudG9Mb3dlckNhc2UoKTtcblx0ICAvLyBhbGxvdyBvcHRpb25hbCBgaW5gIGRlbGltaXRlclxuXHQgIC8vIGJlY2F1c2Ugd2h5IG5vdFxuXHQgIHZhciBuID0gZGVsaW1pdGVyID09PSAnaW4nID8gMyA6IDI7XG5cdCAgLy8gZXh0cmFjdCBhbmQgZmxhdHRlbiBrZXlzXG5cdCAgdmFyIGtleXMgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCB0b0FycmF5KGFyZ3VtZW50cywgbikpO1xuXHQgIHZhciByZXMgPSBbXTtcblx0ICB2YXIgaXRlbSwga2V5LCB2YWwsIGo7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcnIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBpdGVtID0gYXJyW2ldO1xuXHQgICAgdmFsID0gaXRlbSAmJiBpdGVtLiR2YWx1ZSB8fCBpdGVtO1xuXHQgICAgaiA9IGtleXMubGVuZ3RoO1xuXHQgICAgaWYgKGopIHtcblx0ICAgICAgd2hpbGUgKGotLSkge1xuXHQgICAgICAgIGtleSA9IGtleXNbal07XG5cdCAgICAgICAgaWYgKGtleSA9PT0gJyRrZXknICYmIGNvbnRhaW5zKGl0ZW0uJGtleSwgc2VhcmNoKSB8fCBjb250YWlucyhnZXRQYXRoKHZhbCwga2V5KSwgc2VhcmNoKSkge1xuXHQgICAgICAgICAgcmVzLnB1c2goaXRlbSk7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoY29udGFpbnMoaXRlbSwgc2VhcmNoKSkge1xuXHQgICAgICByZXMucHVzaChpdGVtKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZpbHRlciBmaWx0ZXIgZm9yIGFycmF5c1xuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ3xBcnJheTxTdHJpbmc+fEZ1bmN0aW9ufSAuLi5zb3J0S2V5c1xuXHQgKiBAcGFyYW0ge051bWJlcn0gW29yZGVyXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG9yZGVyQnkoYXJyKSB7XG5cdCAgdmFyIGNvbXBhcmF0b3IgPSBudWxsO1xuXHQgIHZhciBzb3J0S2V5cyA9IHVuZGVmaW5lZDtcblx0ICBhcnIgPSBjb252ZXJ0QXJyYXkoYXJyKTtcblx0XG5cdCAgLy8gZGV0ZXJtaW5lIG9yZGVyIChsYXN0IGFyZ3VtZW50KVxuXHQgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuXHQgIHZhciBvcmRlciA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcblx0ICBpZiAodHlwZW9mIG9yZGVyID09PSAnbnVtYmVyJykge1xuXHQgICAgb3JkZXIgPSBvcmRlciA8IDAgPyAtMSA6IDE7XG5cdCAgICBhcmdzID0gYXJncy5sZW5ndGggPiAxID8gYXJncy5zbGljZSgwLCAtMSkgOiBhcmdzO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBvcmRlciA9IDE7XG5cdCAgfVxuXHRcblx0ICAvLyBkZXRlcm1pbmUgc29ydEtleXMgJiBjb21wYXJhdG9yXG5cdCAgdmFyIGZpcnN0QXJnID0gYXJnc1swXTtcblx0ICBpZiAoIWZpcnN0QXJnKSB7XG5cdCAgICByZXR1cm4gYXJyO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGZpcnN0QXJnID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAvLyBjdXN0b20gY29tcGFyYXRvclxuXHQgICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uIChhLCBiKSB7XG5cdCAgICAgIHJldHVybiBmaXJzdEFyZyhhLCBiKSAqIG9yZGVyO1xuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gc3RyaW5nIGtleXMuIGZsYXR0ZW4gZmlyc3Rcblx0ICAgIHNvcnRLZXlzID0gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgYXJncyk7XG5cdCAgICBjb21wYXJhdG9yID0gZnVuY3Rpb24gKGEsIGIsIGkpIHtcblx0ICAgICAgaSA9IGkgfHwgMDtcblx0ICAgICAgcmV0dXJuIGkgPj0gc29ydEtleXMubGVuZ3RoIC0gMSA/IGJhc2VDb21wYXJlKGEsIGIsIGkpIDogYmFzZUNvbXBhcmUoYSwgYiwgaSkgfHwgY29tcGFyYXRvcihhLCBiLCBpICsgMSk7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gYmFzZUNvbXBhcmUoYSwgYiwgc29ydEtleUluZGV4KSB7XG5cdCAgICB2YXIgc29ydEtleSA9IHNvcnRLZXlzW3NvcnRLZXlJbmRleF07XG5cdCAgICBpZiAoc29ydEtleSkge1xuXHQgICAgICBpZiAoc29ydEtleSAhPT0gJyRrZXknKSB7XG5cdCAgICAgICAgaWYgKGlzT2JqZWN0KGEpICYmICckdmFsdWUnIGluIGEpIGEgPSBhLiR2YWx1ZTtcblx0ICAgICAgICBpZiAoaXNPYmplY3QoYikgJiYgJyR2YWx1ZScgaW4gYikgYiA9IGIuJHZhbHVlO1xuXHQgICAgICB9XG5cdCAgICAgIGEgPSBpc09iamVjdChhKSA/IGdldFBhdGgoYSwgc29ydEtleSkgOiBhO1xuXHQgICAgICBiID0gaXNPYmplY3QoYikgPyBnZXRQYXRoKGIsIHNvcnRLZXkpIDogYjtcblx0ICAgIH1cblx0ICAgIHJldHVybiBhID09PSBiID8gMCA6IGEgPiBiID8gb3JkZXIgOiAtb3JkZXI7XG5cdCAgfVxuXHRcblx0ICAvLyBzb3J0IG9uIGEgY29weSB0byBhdm9pZCBtdXRhdGluZyBvcmlnaW5hbCBhcnJheVxuXHQgIHJldHVybiBhcnIuc2xpY2UoKS5zb3J0KGNvbXBhcmF0b3IpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU3RyaW5nIGNvbnRhaW4gaGVscGVyXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb250YWlucyh2YWwsIHNlYXJjaCkge1xuXHQgIHZhciBpO1xuXHQgIGlmIChpc1BsYWluT2JqZWN0KHZhbCkpIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsKTtcblx0ICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgaWYgKGNvbnRhaW5zKHZhbFtrZXlzW2ldXSwgc2VhcmNoKSkge1xuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChpc0FycmF5KHZhbCkpIHtcblx0ICAgIGkgPSB2YWwubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBpZiAoY29udGFpbnModmFsW2ldLCBzZWFyY2gpKSB7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHZhbCAhPSBudWxsKSB7XG5cdCAgICByZXR1cm4gdmFsLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlYXJjaCkgPiAtMTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBkaWdpdHNSRSA9IC8oXFxkezN9KSg/PVxcZCkvZztcblx0XG5cdC8vIGFzc2V0IGNvbGxlY3Rpb25zIG11c3QgYmUgYSBwbGFpbiBvYmplY3QuXG5cdHZhciBmaWx0ZXJzID0ge1xuXHRcblx0ICBvcmRlckJ5OiBvcmRlckJ5LFxuXHQgIGZpbHRlckJ5OiBmaWx0ZXJCeSxcblx0ICBsaW1pdEJ5OiBsaW1pdEJ5LFxuXHRcblx0ICAvKipcblx0ICAgKiBTdHJpbmdpZnkgdmFsdWUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZW50XG5cdCAgICovXG5cdFxuXHQgIGpzb246IHtcblx0ICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQodmFsdWUsIGluZGVudCkge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogSlNPTi5zdHJpbmdpZnkodmFsdWUsIG51bGwsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gaW5kZW50IDogMik7XG5cdCAgICB9LFxuXHQgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKHZhbHVlKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgcmV0dXJuIHZhbHVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogJ2FiYycgPT4gJ0FiYydcblx0ICAgKi9cblx0XG5cdCAgY2FwaXRhbGl6ZTogZnVuY3Rpb24gY2FwaXRhbGl6ZSh2YWx1ZSkge1xuXHQgICAgaWYgKCF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkgcmV0dXJuICcnO1xuXHQgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuXHQgICAgcmV0dXJuIHZhbHVlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdmFsdWUuc2xpY2UoMSk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogJ2FiYycgPT4gJ0FCQydcblx0ICAgKi9cblx0XG5cdCAgdXBwZXJjYXNlOiBmdW5jdGlvbiB1cHBlcmNhc2UodmFsdWUpIHtcblx0ICAgIHJldHVybiB2YWx1ZSB8fCB2YWx1ZSA9PT0gMCA/IHZhbHVlLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKSA6ICcnO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqICdBYkMnID0+ICdhYmMnXG5cdCAgICovXG5cdFxuXHQgIGxvd2VyY2FzZTogZnVuY3Rpb24gbG93ZXJjYXNlKHZhbHVlKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgfHwgdmFsdWUgPT09IDAgPyB2YWx1ZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkgOiAnJztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiAxMjM0NSA9PiAkMTIsMzQ1LjAwXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gc2lnblxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBkZWNpbWFscyBEZWNpbWFsIHBsYWNlc1xuXHQgICAqL1xuXHRcblx0ICBjdXJyZW5jeTogZnVuY3Rpb24gY3VycmVuY3kodmFsdWUsIF9jdXJyZW5jeSwgZGVjaW1hbHMpIHtcblx0ICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG5cdCAgICBpZiAoIWlzRmluaXRlKHZhbHVlKSB8fCAhdmFsdWUgJiYgdmFsdWUgIT09IDApIHJldHVybiAnJztcblx0ICAgIF9jdXJyZW5jeSA9IF9jdXJyZW5jeSAhPSBudWxsID8gX2N1cnJlbmN5IDogJyQnO1xuXHQgICAgZGVjaW1hbHMgPSBkZWNpbWFscyAhPSBudWxsID8gZGVjaW1hbHMgOiAyO1xuXHQgICAgdmFyIHN0cmluZ2lmaWVkID0gTWF0aC5hYnModmFsdWUpLnRvRml4ZWQoZGVjaW1hbHMpO1xuXHQgICAgdmFyIF9pbnQgPSBkZWNpbWFscyA/IHN0cmluZ2lmaWVkLnNsaWNlKDAsIC0xIC0gZGVjaW1hbHMpIDogc3RyaW5naWZpZWQ7XG5cdCAgICB2YXIgaSA9IF9pbnQubGVuZ3RoICUgMztcblx0ICAgIHZhciBoZWFkID0gaSA+IDAgPyBfaW50LnNsaWNlKDAsIGkpICsgKF9pbnQubGVuZ3RoID4gMyA/ICcsJyA6ICcnKSA6ICcnO1xuXHQgICAgdmFyIF9mbG9hdCA9IGRlY2ltYWxzID8gc3RyaW5naWZpZWQuc2xpY2UoLTEgLSBkZWNpbWFscykgOiAnJztcblx0ICAgIHZhciBzaWduID0gdmFsdWUgPCAwID8gJy0nIDogJyc7XG5cdCAgICByZXR1cm4gc2lnbiArIF9jdXJyZW5jeSArIGhlYWQgKyBfaW50LnNsaWNlKGkpLnJlcGxhY2UoZGlnaXRzUkUsICckMSwnKSArIF9mbG9hdDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiAnaXRlbScgPT4gJ2l0ZW1zJ1xuXHQgICAqXG5cdCAgICogQHBhcmFtc1xuXHQgICAqICBhbiBhcnJheSBvZiBzdHJpbmdzIGNvcnJlc3BvbmRpbmcgdG9cblx0ICAgKiAgdGhlIHNpbmdsZSwgZG91YmxlLCB0cmlwbGUgLi4uIGZvcm1zIG9mIHRoZSB3b3JkIHRvXG5cdCAgICogIGJlIHBsdXJhbGl6ZWQuIFdoZW4gdGhlIG51bWJlciB0byBiZSBwbHVyYWxpemVkXG5cdCAgICogIGV4Y2VlZHMgdGhlIGxlbmd0aCBvZiB0aGUgYXJncywgaXQgd2lsbCB1c2UgdGhlIGxhc3Rcblx0ICAgKiAgZW50cnkgaW4gdGhlIGFycmF5LlxuXHQgICAqXG5cdCAgICogIGUuZy4gWydzaW5nbGUnLCAnZG91YmxlJywgJ3RyaXBsZScsICdtdWx0aXBsZSddXG5cdCAgICovXG5cdFxuXHQgIHBsdXJhbGl6ZTogZnVuY3Rpb24gcGx1cmFsaXplKHZhbHVlKSB7XG5cdCAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcblx0ICAgIHZhciBsZW5ndGggPSBhcmdzLmxlbmd0aDtcblx0ICAgIGlmIChsZW5ndGggPiAxKSB7XG5cdCAgICAgIHZhciBpbmRleCA9IHZhbHVlICUgMTAgLSAxO1xuXHQgICAgICByZXR1cm4gaW5kZXggaW4gYXJncyA/IGFyZ3NbaW5kZXhdIDogYXJnc1tsZW5ndGggLSAxXTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBhcmdzWzBdICsgKHZhbHVlID09PSAxID8gJycgOiAncycpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIERlYm91bmNlIGEgaGFuZGxlciBmdW5jdGlvbi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gZGVsYXkgPSAzMDBcblx0ICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICAgKi9cblx0XG5cdCAgZGVib3VuY2U6IGZ1bmN0aW9uIGRlYm91bmNlKGhhbmRsZXIsIGRlbGF5KSB7XG5cdCAgICBpZiAoIWhhbmRsZXIpIHJldHVybjtcblx0ICAgIGlmICghZGVsYXkpIHtcblx0ICAgICAgZGVsYXkgPSAzMDA7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gX2RlYm91bmNlKGhhbmRsZXIsIGRlbGF5KTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBpbnN0YWxsR2xvYmFsQVBJIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBWdWUgYW5kIGV2ZXJ5IGNvbnN0cnVjdG9yIHRoYXQgZXh0ZW5kcyBWdWUgaGFzIGFuXG5cdCAgICogYXNzb2NpYXRlZCBvcHRpb25zIG9iamVjdCwgd2hpY2ggY2FuIGJlIGFjY2Vzc2VkIGR1cmluZ1xuXHQgICAqIGNvbXBpbGF0aW9uIHN0ZXBzIGFzIGB0aGlzLmNvbnN0cnVjdG9yLm9wdGlvbnNgLlxuXHQgICAqXG5cdCAgICogVGhlc2UgY2FuIGJlIHNlZW4gYXMgdGhlIGRlZmF1bHQgb3B0aW9ucyBvZiBldmVyeVxuXHQgICAqIFZ1ZSBpbnN0YW5jZS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLm9wdGlvbnMgPSB7XG5cdCAgICBkaXJlY3RpdmVzOiBkaXJlY3RpdmVzLFxuXHQgICAgZWxlbWVudERpcmVjdGl2ZXM6IGVsZW1lbnREaXJlY3RpdmVzLFxuXHQgICAgZmlsdGVyczogZmlsdGVycyxcblx0ICAgIHRyYW5zaXRpb25zOiB7fSxcblx0ICAgIGNvbXBvbmVudHM6IHt9LFxuXHQgICAgcGFydGlhbHM6IHt9LFxuXHQgICAgcmVwbGFjZTogdHJ1ZVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEV4cG9zZSB1c2VmdWwgaW50ZXJuYWxzXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS51dGlsID0gdXRpbDtcblx0ICBWdWUuY29uZmlnID0gY29uZmlnO1xuXHQgIFZ1ZS5zZXQgPSBzZXQ7XG5cdCAgVnVlWydkZWxldGUnXSA9IGRlbDtcblx0ICBWdWUubmV4dFRpY2sgPSBuZXh0VGljaztcblx0XG5cdCAgLyoqXG5cdCAgICogVGhlIGZvbGxvd2luZyBhcmUgZXhwb3NlZCBmb3IgYWR2YW5jZWQgdXNhZ2UgLyBwbHVnaW5zXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5jb21waWxlciA9IGNvbXBpbGVyO1xuXHQgIFZ1ZS5GcmFnbWVudEZhY3RvcnkgPSBGcmFnbWVudEZhY3Rvcnk7XG5cdCAgVnVlLmludGVybmFsRGlyZWN0aXZlcyA9IGludGVybmFsRGlyZWN0aXZlcztcblx0ICBWdWUucGFyc2VycyA9IHtcblx0ICAgIHBhdGg6IHBhdGgsXG5cdCAgICB0ZXh0OiB0ZXh0LFxuXHQgICAgdGVtcGxhdGU6IHRlbXBsYXRlLFxuXHQgICAgZGlyZWN0aXZlOiBkaXJlY3RpdmUsXG5cdCAgICBleHByZXNzaW9uOiBleHByZXNzaW9uXG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogRWFjaCBpbnN0YW5jZSBjb25zdHJ1Y3RvciwgaW5jbHVkaW5nIFZ1ZSwgaGFzIGEgdW5pcXVlXG5cdCAgICogY2lkLiBUaGlzIGVuYWJsZXMgdXMgdG8gY3JlYXRlIHdyYXBwZWQgXCJjaGlsZFxuXHQgICAqIGNvbnN0cnVjdG9yc1wiIGZvciBwcm90b3R5cGFsIGluaGVyaXRhbmNlIGFuZCBjYWNoZSB0aGVtLlxuXHQgICAqL1xuXHRcblx0ICBWdWUuY2lkID0gMDtcblx0ICB2YXIgY2lkID0gMTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ2xhc3MgaW5oZXJpdGFuY2Vcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBleHRlbmRPcHRpb25zXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5leHRlbmQgPSBmdW5jdGlvbiAoZXh0ZW5kT3B0aW9ucykge1xuXHQgICAgZXh0ZW5kT3B0aW9ucyA9IGV4dGVuZE9wdGlvbnMgfHwge307XG5cdCAgICB2YXIgU3VwZXIgPSB0aGlzO1xuXHQgICAgdmFyIGlzRmlyc3RFeHRlbmQgPSBTdXBlci5jaWQgPT09IDA7XG5cdCAgICBpZiAoaXNGaXJzdEV4dGVuZCAmJiBleHRlbmRPcHRpb25zLl9DdG9yKSB7XG5cdCAgICAgIHJldHVybiBleHRlbmRPcHRpb25zLl9DdG9yO1xuXHQgICAgfVxuXHQgICAgdmFyIG5hbWUgPSBleHRlbmRPcHRpb25zLm5hbWUgfHwgU3VwZXIub3B0aW9ucy5uYW1lO1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgaWYgKCEvXlthLXpBLVpdW1xcdy1dKiQvLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICB3YXJuKCdJbnZhbGlkIGNvbXBvbmVudCBuYW1lOiBcIicgKyBuYW1lICsgJ1wiLiBDb21wb25lbnQgbmFtZXMgJyArICdjYW4gb25seSBjb250YWluIGFscGhhbnVtZXJpYyBjaGFyYWNhdGVycyBhbmQgdGhlIGh5cGhlbi4nKTtcblx0ICAgICAgICBuYW1lID0gbnVsbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdmFyIFN1YiA9IGNyZWF0ZUNsYXNzKG5hbWUgfHwgJ1Z1ZUNvbXBvbmVudCcpO1xuXHQgICAgU3ViLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3VwZXIucHJvdG90eXBlKTtcblx0ICAgIFN1Yi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdWI7XG5cdCAgICBTdWIuY2lkID0gY2lkKys7XG5cdCAgICBTdWIub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhTdXBlci5vcHRpb25zLCBleHRlbmRPcHRpb25zKTtcblx0ICAgIFN1Ylsnc3VwZXInXSA9IFN1cGVyO1xuXHQgICAgLy8gYWxsb3cgZnVydGhlciBleHRlbnNpb25cblx0ICAgIFN1Yi5leHRlbmQgPSBTdXBlci5leHRlbmQ7XG5cdCAgICAvLyBjcmVhdGUgYXNzZXQgcmVnaXN0ZXJzLCBzbyBleHRlbmRlZCBjbGFzc2VzXG5cdCAgICAvLyBjYW4gaGF2ZSB0aGVpciBwcml2YXRlIGFzc2V0cyB0b28uXG5cdCAgICBjb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuXHQgICAgICBTdWJbdHlwZV0gPSBTdXBlclt0eXBlXTtcblx0ICAgIH0pO1xuXHQgICAgLy8gZW5hYmxlIHJlY3Vyc2l2ZSBzZWxmLWxvb2t1cFxuXHQgICAgaWYgKG5hbWUpIHtcblx0ICAgICAgU3ViLm9wdGlvbnMuY29tcG9uZW50c1tuYW1lXSA9IFN1Yjtcblx0ICAgIH1cblx0ICAgIC8vIGNhY2hlIGNvbnN0cnVjdG9yXG5cdCAgICBpZiAoaXNGaXJzdEV4dGVuZCkge1xuXHQgICAgICBleHRlbmRPcHRpb25zLl9DdG9yID0gU3ViO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIFN1Yjtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHN1Yi1jbGFzcyBjb25zdHJ1Y3RvciB3aXRoIHRoZVxuXHQgICAqIGdpdmVuIG5hbWUuIFRoaXMgZ2l2ZXMgdXMgbXVjaCBuaWNlciBvdXRwdXQgd2hlblxuXHQgICAqIGxvZ2dpbmcgaW5zdGFuY2VzIGluIHRoZSBjb25zb2xlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gY3JlYXRlQ2xhc3MobmFtZSkge1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgbm8tbmV3LWZ1bmMgKi9cblx0ICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ3JldHVybiBmdW5jdGlvbiAnICsgY2xhc3NpZnkobmFtZSkgKyAnIChvcHRpb25zKSB7IHRoaXMuX2luaXQob3B0aW9ucykgfScpKCk7XG5cdCAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLW5ldy1mdW5jICovXG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBQbHVnaW4gc3lzdGVtXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gcGx1Z2luXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS51c2UgPSBmdW5jdGlvbiAocGx1Z2luKSB7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmIChwbHVnaW4uaW5zdGFsbGVkKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIC8vIGFkZGl0aW9uYWwgcGFyYW1ldGVyc1xuXHQgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG5cdCAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG5cdCAgICBpZiAodHlwZW9mIHBsdWdpbi5pbnN0YWxsID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHBsdWdpbi5pbnN0YWxsLmFwcGx5KHBsdWdpbiwgYXJncyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBwbHVnaW4uYXBwbHkobnVsbCwgYXJncyk7XG5cdCAgICB9XG5cdCAgICBwbHVnaW4uaW5zdGFsbGVkID0gdHJ1ZTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEFwcGx5IGEgZ2xvYmFsIG1peGluIGJ5IG1lcmdpbmcgaXQgaW50byB0aGUgZGVmYXVsdFxuXHQgICAqIG9wdGlvbnMuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5taXhpbiA9IGZ1bmN0aW9uIChtaXhpbikge1xuXHQgICAgVnVlLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoVnVlLm9wdGlvbnMsIG1peGluKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGUgYXNzZXQgcmVnaXN0cmF0aW9uIG1ldGhvZHMgd2l0aCB0aGUgZm9sbG93aW5nXG5cdCAgICogc2lnbmF0dXJlOlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGlkXG5cdCAgICogQHBhcmFtIHsqfSBkZWZpbml0aW9uXG5cdCAgICovXG5cdFxuXHQgIGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgICBWdWVbdHlwZV0gPSBmdW5jdGlvbiAoaWQsIGRlZmluaXRpb24pIHtcblx0ICAgICAgaWYgKCFkZWZpbml0aW9uKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF07XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiAoY29tbW9uVGFnUkUudGVzdChpZCkgfHwgcmVzZXJ2ZWRUYWdSRS50ZXN0KGlkKSkpIHtcblx0ICAgICAgICAgICAgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCAnICsgJ2lkOiAnICsgaWQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgaXNQbGFpbk9iamVjdChkZWZpbml0aW9uKSkge1xuXHQgICAgICAgICAgaWYgKCFkZWZpbml0aW9uLm5hbWUpIHtcblx0ICAgICAgICAgICAgZGVmaW5pdGlvbi5uYW1lID0gaWQ7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBkZWZpbml0aW9uID0gVnVlLmV4dGVuZChkZWZpbml0aW9uKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXSA9IGRlZmluaXRpb247XG5cdCAgICAgICAgcmV0dXJuIGRlZmluaXRpb247XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfSk7XG5cdFxuXHQgIC8vIGV4cG9zZSBpbnRlcm5hbCB0cmFuc2l0aW9uIEFQSVxuXHQgIGV4dGVuZChWdWUudHJhbnNpdGlvbiwgdHJhbnNpdGlvbik7XG5cdH1cblx0XG5cdGluc3RhbGxHbG9iYWxBUEkoVnVlKTtcblx0XG5cdFZ1ZS52ZXJzaW9uID0gJzEuMC4yNic7XG5cdFxuXHQvLyBkZXZ0b29scyBnbG9iYWwgaG9va1xuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICBpZiAoY29uZmlnLmRldnRvb2xzKSB7XG5cdCAgICBpZiAoZGV2dG9vbHMpIHtcblx0ICAgICAgZGV2dG9vbHMuZW1pdCgnaW5pdCcsIFZ1ZSk7XG5cdCAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgaW5Ccm93c2VyICYmIC9DaHJvbWVcXC9cXGQrLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSkge1xuXHQgICAgICBjb25zb2xlLmxvZygnRG93bmxvYWQgdGhlIFZ1ZSBEZXZ0b29scyBmb3IgYSBiZXR0ZXIgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZTpcXG4nICsgJ2h0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtZGV2dG9vbHMnKTtcblx0ICAgIH1cblx0ICB9XG5cdH0sIDApO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBWdWU7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KSkpXG5cbi8qKiovIH0sXG4vKiAyMTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7IHRocm93IG5ldyBFcnJvcihcImRlZmluZSBjYW5ub3QgYmUgdXNlZCBpbmRpcmVjdFwiKTsgfTtcclxuXG5cbi8qKiovIH0sXG4vKiAyMTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obW9kdWxlKSB7XHJcblx0XHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xyXG5cdFx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcclxuXHRcdFx0bW9kdWxlLnBhdGhzID0gW107XHJcblx0XHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxyXG5cdFx0XHRtb2R1bGUuY2hpbGRyZW4gPSBbXTtcclxuXHRcdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbW9kdWxlO1xyXG5cdH1cclxuXG5cbi8qKiovIH0sXG4vKiAyMjAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIChpZ25vcmVkKSAqL1xuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB2dWUuanNcbiAqKi8iLCIgXHQvLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbiBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gd2luZG93W1wid2VicGFja0pzb25wXCJdO1xuIFx0d2luZG93W1wid2VicGFja0pzb25wXCJdID0gZnVuY3Rpb24gd2VicGFja0pzb25wQ2FsbGJhY2soY2h1bmtJZHMsIG1vcmVNb2R1bGVzKSB7XG4gXHRcdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbiBcdFx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMCwgY2FsbGJhY2tzID0gW107XG4gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuIFx0XHRcdGlmKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSlcbiBcdFx0XHRcdGNhbGxiYWNrcy5wdXNoLmFwcGx5KGNhbGxiYWNrcywgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKTtcbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuIFx0XHR9XG4gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHR9XG4gXHRcdGlmKHBhcmVudEpzb25wRnVuY3Rpb24pIHBhcmVudEpzb25wRnVuY3Rpb24oY2h1bmtJZHMsIG1vcmVNb2R1bGVzKTtcbiBcdFx0d2hpbGUoY2FsbGJhY2tzLmxlbmd0aClcbiBcdFx0XHRjYWxsYmFja3Muc2hpZnQoKS5jYWxsKG51bGwsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHR9O1xuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuIFx0Ly8gXCIwXCIgbWVhbnMgXCJhbHJlYWR5IGxvYWRlZFwiXG4gXHQvLyBBcnJheSBtZWFucyBcImxvYWRpbmdcIiwgYXJyYXkgY29udGFpbnMgY2FsbGJhY2tzXG4gXHR2YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuIFx0XHQwOjAsXG4gXHRcdDE6MCxcbiBcdFx0MjowXG4gXHR9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cbiBcdC8vIFRoaXMgZmlsZSBjb250YWlucyBvbmx5IHRoZSBlbnRyeSBjaHVuay5cbiBcdC8vIFRoZSBjaHVuayBsb2FkaW5nIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGNodW5rc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5lID0gZnVuY3Rpb24gcmVxdWlyZUVuc3VyZShjaHVua0lkLCBjYWxsYmFjaykge1xuIFx0XHQvLyBcIjBcIiBpcyB0aGUgc2lnbmFsIGZvciBcImFscmVhZHkgbG9hZGVkXCJcbiBcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwKVxuIFx0XHRcdHJldHVybiBjYWxsYmFjay5jYWxsKG51bGwsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIGFuIGFycmF5IG1lYW5zIFwiY3VycmVudGx5IGxvYWRpbmdcIi5cbiBcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdICE9PSB1bmRlZmluZWQpIHtcbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0ucHVzaChjYWxsYmFjayk7XG4gXHRcdH0gZWxzZSB7XG4gXHRcdFx0Ly8gc3RhcnQgY2h1bmsgbG9hZGluZ1xuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IFtjYWxsYmFja107XG4gXHRcdFx0dmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuIFx0XHRcdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiBcdFx0XHRzY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuIFx0XHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04JztcbiBcdFx0XHRzY3JpcHQuYXN5bmMgPSB0cnVlO1xuXG4gXHRcdFx0c2NyaXB0LnNyYyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyBjaHVua0lkICsgXCIuYXBwLmpzXCI7XG4gXHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9oeWJyaWQtdGhvcml1bS9kZXYvYXBwL1wiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgNjY0NzM0NDE0MmY5ZjAyOTZiYzNcbiAqKi8iLCJpbXBvcnQgVnVlIGZyb20gJ1Z1ZSc7XG5pbXBvcnQgVnVlUm91dGVyIGZyb20gJ3Z1ZS1yb3V0ZXInO1xuaW1wb3J0IHJvdXRlcyBmcm9tICcuL3JvdXRlcyc7XG5pbXBvcnQgSHlicmlkVGhvcml1bSBmcm9tICdoeWJyaWQtdGhvcml1bSc7XG5pbXBvcnQgUHJpc20gZnJvbSAncHJpc21qcyc7XG5pbXBvcnQgU2lkZU5hdiBmcm9tICcuL2NvbXBvbmVudHMvc2lkZS1uYXYvaW5kZXgudnVlJztcbmltcG9ydCBTaXRlSGVhZGVyIGZyb20gJy4vY29tcG9uZW50cy9zaXRlLWhlYWRlci9pbmRleC52dWUnO1xuVnVlLmNvbmZpZy5kZWJ1ZyA9IHRydWU7XG5cblZ1ZS51c2UoVnVlUm91dGVyKTtcblZ1ZS51c2UoSHlicmlkVGhvcml1bSk7XG5cbmxldCByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKCk7XG5sZXQgQXBwID0gVnVlLmV4dGVuZCh7XG4gIGNvbXBvbmVudHM6IHtcbiAgICBTaWRlTmF2LFxuICAgIFNpdGVIZWFkZXJcbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbGlnZXJFbmRQb2ludDogJ2h0dHBzOi8vYXBpLmNtcy50ZWx1cy5jb20vbGVnYWxzJyxcbiAgICAgIGxpZ2VyQXBwbGljYXRpb25LZXk6ICdiOTczOGQ2N2I4OWRmYzc4Mjc0NmQ0YTljZjRhMTA5MydcbiAgICB9O1xuICB9XG59KTtcbnJvdXRlci5tYXAocm91dGVzKTtcbnJvdXRlci5hZnRlckVhY2goKCkgPT4ge1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBQcmlzbS5oaWdobGlnaHRBbGwoKTtcbiAgfSwgMCk7XG59KTtcbnJvdXRlci5zdGFydChBcHAsICcjYXBwLW1haW4nKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vZGV2L3NyYy9tYWluLmpzXG4gKiovIiwiLypcclxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcclxuKi9cclxuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcclxuXHR2YXIgbGlzdCA9IFtdO1xyXG5cclxuXHQvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXHJcblx0bGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xyXG5cdFx0dmFyIHJlc3VsdCA9IFtdO1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSB0aGlzW2ldO1xyXG5cdFx0XHRpZihpdGVtWzJdKSB7XHJcblx0XHRcdFx0cmVzdWx0LnB1c2goXCJAbWVkaWEgXCIgKyBpdGVtWzJdICsgXCJ7XCIgKyBpdGVtWzFdICsgXCJ9XCIpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJlc3VsdC5wdXNoKGl0ZW1bMV0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzdWx0LmpvaW4oXCJcIik7XHJcblx0fTtcclxuXHJcblx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcclxuXHRsaXN0LmkgPSBmdW5jdGlvbihtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XHJcblx0XHRpZih0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIilcclxuXHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xyXG5cdFx0dmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcclxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XHJcblx0XHRcdGlmKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIilcclxuXHRcdFx0XHRhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XHJcblx0XHR9XHJcblx0XHRmb3IoaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBpdGVtID0gbW9kdWxlc1tpXTtcclxuXHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxyXG5cdFx0XHQvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xyXG5cdFx0XHQvLyAgd2hlbiBhIG1vZHVsZSBpcyBpbXBvcnRlZCBtdWx0aXBsZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBtZWRpYSBxdWVyaWVzLlxyXG5cdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxyXG5cdFx0XHRpZih0eXBlb2YgaXRlbVswXSAhPT0gXCJudW1iZXJcIiB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xyXG5cdFx0XHRcdGlmKG1lZGlhUXVlcnkgJiYgIWl0ZW1bMl0pIHtcclxuXHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xyXG5cdFx0XHRcdH0gZWxzZSBpZihtZWRpYVF1ZXJ5KSB7XHJcblx0XHRcdFx0XHRpdGVtWzJdID0gXCIoXCIgKyBpdGVtWzJdICsgXCIpIGFuZCAoXCIgKyBtZWRpYVF1ZXJ5ICsgXCIpXCI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGxpc3QucHVzaChpdGVtKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcblx0cmV0dXJuIGxpc3Q7XHJcbn07XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXG4gKiogbW9kdWxlIGlkID0gMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbnZhciBzdHlsZXNJbkRvbSA9IHt9LFxuXHRtZW1vaXplID0gZnVuY3Rpb24oZm4pIHtcblx0XHR2YXIgbWVtbztcblx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYgKHR5cGVvZiBtZW1vID09PSBcInVuZGVmaW5lZFwiKSBtZW1vID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdHJldHVybiBtZW1vO1xuXHRcdH07XG5cdH0sXG5cdGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAvbXNpZSBbNi05XVxcYi8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTtcblx0fSksXG5cdGdldEhlYWRFbGVtZW50ID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO1xuXHR9KSxcblx0c2luZ2xldG9uRWxlbWVudCA9IG51bGwsXG5cdHNpbmdsZXRvbkNvdW50ZXIgPSAwLFxuXHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QsIG9wdGlvbnMpIHtcblx0aWYodHlwZW9mIERFQlVHICE9PSBcInVuZGVmaW5lZFwiICYmIERFQlVHKSB7XG5cdFx0aWYodHlwZW9mIGRvY3VtZW50ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XG5cdH1cblxuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0Ly8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG5cdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2Vcblx0aWYgKHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiA9PT0gXCJ1bmRlZmluZWRcIikgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgYm90dG9tIG9mIDxoZWFkPi5cblx0aWYgKHR5cGVvZiBvcHRpb25zLmluc2VydEF0ID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLmluc2VydEF0ID0gXCJib3R0b21cIjtcblxuXHR2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QpO1xuXHRhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuXHRcdHZhciBtYXlSZW1vdmUgPSBbXTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xuXHRcdFx0bWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuXHRcdH1cblx0XHRpZihuZXdMaXN0KSB7XG5cdFx0XHR2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QpO1xuXHRcdFx0YWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcblx0XHR9XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gbWF5UmVtb3ZlW2ldO1xuXHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xuXHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspXG5cdFx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oKTtcblx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucykge1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cdFx0aWYoZG9tU3R5bGUpIHtcblx0XHRcdGRvbVN0eWxlLnJlZnMrKztcblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcblx0XHRcdH1cblx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgcGFydHMgPSBbXTtcblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXHRcdFx0c3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7aWQ6IGl0ZW0uaWQsIHJlZnM6IDEsIHBhcnRzOiBwYXJ0c307XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGxpc3RUb1N0eWxlcyhsaXN0KSB7XG5cdHZhciBzdHlsZXMgPSBbXTtcblx0dmFyIG5ld1N0eWxlcyA9IHt9O1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gbGlzdFtpXTtcblx0XHR2YXIgaWQgPSBpdGVtWzBdO1xuXHRcdHZhciBjc3MgPSBpdGVtWzFdO1xuXHRcdHZhciBtZWRpYSA9IGl0ZW1bMl07XG5cdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG5cdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xuXHRcdGlmKCFuZXdTdHlsZXNbaWRdKVxuXHRcdFx0c3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcblx0XHRlbHNlXG5cdFx0XHRuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XG5cdH1cblx0cmV0dXJuIHN0eWxlcztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlRWxlbWVudCkge1xuXHR2YXIgaGVhZCA9IGdldEhlYWRFbGVtZW50KCk7XG5cdHZhciBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCA9IHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wW3N0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xuXHRpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xuXHRcdGlmKCFsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCkge1xuXHRcdFx0aGVhZC5pbnNlcnRCZWZvcmUoc3R5bGVFbGVtZW50LCBoZWFkLmZpcnN0Q2hpbGQpO1xuXHRcdH0gZWxzZSBpZihsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xuXHRcdFx0aGVhZC5pbnNlcnRCZWZvcmUoc3R5bGVFbGVtZW50LCBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0XHR9XG5cdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AucHVzaChzdHlsZUVsZW1lbnQpO1xuXHR9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwiYm90dG9tXCIpIHtcblx0XHRoZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcuIE11c3QgYmUgJ3RvcCcgb3IgJ2JvdHRvbScuXCIpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpIHtcblx0c3R5bGVFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0dmFyIGlkeCA9IHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLmluZGV4T2Yoc3R5bGVFbGVtZW50KTtcblx0aWYoaWR4ID49IDApIHtcblx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuXHR2YXIgc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXHRzdHlsZUVsZW1lbnQudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlRWxlbWVudCk7XG5cdHJldHVybiBzdHlsZUVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGVFbGVtZW50LCB1cGRhdGUsIHJlbW92ZTtcblxuXHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcblx0XHR2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcblx0XHRzdHlsZUVsZW1lbnQgPSBzaW5nbGV0b25FbGVtZW50IHx8IChzaW5nbGV0b25FbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcblx0XHR1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCBmYWxzZSk7XG5cdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCwgc3R5bGVJbmRleCwgdHJ1ZSk7XG5cdH0gZWxzZSB7XG5cdFx0c3R5bGVFbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XG5cdFx0fTtcblx0fVxuXG5cdHVwZGF0ZShvYmopO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcblx0XHRpZihuZXdPYmopIHtcblx0XHRcdGlmKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcClcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlbW92ZSgpO1xuXHRcdH1cblx0fTtcbn1cblxudmFyIHJlcGxhY2VUZXh0ID0gKGZ1bmN0aW9uICgpIHtcblx0dmFyIHRleHRTdG9yZSA9IFtdO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG5cdFx0dGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuXHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuXHR9O1xufSkoKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZUVsZW1lbnQsIGluZGV4LCByZW1vdmUsIG9iaikge1xuXHR2YXIgY3NzID0gcmVtb3ZlID8gXCJcIiA6IG9iai5jc3M7XG5cblx0aWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuXHR9IGVsc2Uge1xuXHRcdHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcblx0XHR2YXIgY2hpbGROb2RlcyA9IHN0eWxlRWxlbWVudC5jaGlsZE5vZGVzO1xuXHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHRpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcblx0XHRcdHN0eWxlRWxlbWVudC5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGVFbGVtZW50LCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcblx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cblx0aWYgKG1lZGlhKSB7XG5cdFx0c3R5bGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsIG1lZGlhKTtcblx0fVxuXG5cdGlmIChzb3VyY2VNYXApIHtcblx0XHQvLyBodHRwczovL2RldmVsb3Blci5jaHJvbWUuY29tL2RldnRvb2xzL2RvY3MvamF2YXNjcmlwdC1kZWJ1Z2dpbmdcblx0XHQvLyB0aGlzIG1ha2VzIHNvdXJjZSBtYXBzIGluc2lkZSBzdHlsZSB0YWdzIHdvcmsgcHJvcGVybHkgaW4gQ2hyb21lXG5cdFx0Y3NzICs9ICdcXG4vKiMgc291cmNlVVJMPScgKyBzb3VyY2VNYXAuc291cmNlc1swXSArICcgKi8nO1xuXHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XG5cdFx0Y3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIiArIGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSkgKyBcIiAqL1wiO1xuXHR9XG5cblx0aWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcblx0fSBlbHNlIHtcblx0XHR3aGlsZShzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCkge1xuXHRcdFx0c3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcblx0XHR9XG5cdFx0c3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuXHR9XG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1xuICoqIG1vZHVsZSBpZCA9IDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBjaGVja0dsb2JhbCA9IHJlcXVpcmUoJy4vX2NoZWNrR2xvYmFsJyk7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IGNoZWNrR2xvYmFsKHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsKTtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IGNoZWNrR2xvYmFsKHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYpO1xuXG4vKiogRGV0ZWN0IGB0aGlzYCBhcyB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciB0aGlzR2xvYmFsID0gY2hlY2tHbG9iYWwodHlwZW9mIHRoaXMgPT0gJ29iamVjdCcgJiYgdGhpcyk7XG5cbi8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IHRoaXNHbG9iYWwgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxubW9kdWxlLmV4cG9ydHMgPSByb290O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19yb290LmpzXG4gKiogbW9kdWxlIGlkID0gM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBBcnJheWAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEB0eXBlIHtGdW5jdGlvbn1cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXkoJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXkoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxubW9kdWxlLmV4cG9ydHMgPSBpc0FycmF5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzQXJyYXkuanNcbiAqKiBtb2R1bGUgaWQgPSA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL2FwaS10YWJsZS5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvY29tcG9uZW50cy9hcGktdGFibGUvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VJc05hdGl2ZSA9IHJlcXVpcmUoJy4vX2Jhc2VJc05hdGl2ZScpLFxuICAgIGdldFZhbHVlID0gcmVxdWlyZSgnLi9fZ2V0VmFsdWUnKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBuYXRpdmUgZnVuY3Rpb24gYXQgYGtleWAgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmdW5jdGlvbiBpZiBpdCdzIG5hdGl2ZSwgZWxzZSBgdW5kZWZpbmVkYC5cbiAqL1xuZnVuY3Rpb24gZ2V0TmF0aXZlKG9iamVjdCwga2V5KSB7XG4gIHZhciB2YWx1ZSA9IGdldFZhbHVlKG9iamVjdCwga2V5KTtcbiAgcmV0dXJuIGJhc2VJc05hdGl2ZSh2YWx1ZSkgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXROYXRpdmU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2dldE5hdGl2ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG4gKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG4gKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzT2JqZWN0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzT2JqZWN0LmpzXG4gKiogbW9kdWxlIGlkID0gN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNPYmplY3RMaWtlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzT2JqZWN0TGlrZS5qc1xuICoqIG1vZHVsZSBpZCA9IDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBsaXN0Q2FjaGVDbGVhciA9IHJlcXVpcmUoJy4vX2xpc3RDYWNoZUNsZWFyJyksXG4gICAgbGlzdENhY2hlRGVsZXRlID0gcmVxdWlyZSgnLi9fbGlzdENhY2hlRGVsZXRlJyksXG4gICAgbGlzdENhY2hlR2V0ID0gcmVxdWlyZSgnLi9fbGlzdENhY2hlR2V0JyksXG4gICAgbGlzdENhY2hlSGFzID0gcmVxdWlyZSgnLi9fbGlzdENhY2hlSGFzJyksXG4gICAgbGlzdENhY2hlU2V0ID0gcmVxdWlyZSgnLi9fbGlzdENhY2hlU2V0Jyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBsaXN0IGNhY2hlIG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cbiAqL1xuZnVuY3Rpb24gTGlzdENhY2hlKGVudHJpZXMpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBlbnRyaWVzID8gZW50cmllcy5sZW5ndGggOiAwO1xuXG4gIHRoaXMuY2xlYXIoKTtcbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcbiAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pO1xuICB9XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBMaXN0Q2FjaGVgLlxuTGlzdENhY2hlLnByb3RvdHlwZS5jbGVhciA9IGxpc3RDYWNoZUNsZWFyO1xuTGlzdENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBsaXN0Q2FjaGVEZWxldGU7XG5MaXN0Q2FjaGUucHJvdG90eXBlLmdldCA9IGxpc3RDYWNoZUdldDtcbkxpc3RDYWNoZS5wcm90b3R5cGUuaGFzID0gbGlzdENhY2hlSGFzO1xuTGlzdENhY2hlLnByb3RvdHlwZS5zZXQgPSBsaXN0Q2FjaGVTZXQ7XG5cbm1vZHVsZS5leHBvcnRzID0gTGlzdENhY2hlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19MaXN0Q2FjaGUuanNcbiAqKiBtb2R1bGUgaWQgPSA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZXEgPSByZXF1aXJlKCcuL2VxJyk7XG5cbi8qKlxuICogR2V0cyB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGBrZXlgIGlzIGZvdW5kIGluIGBhcnJheWAgb2Yga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuICogQHBhcmFtIHsqfSBrZXkgVGhlIGtleSB0byBzZWFyY2ggZm9yLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cbiAqL1xuZnVuY3Rpb24gYXNzb2NJbmRleE9mKGFycmF5LCBrZXkpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgaWYgKGVxKGFycmF5W2xlbmd0aF1bMF0sIGtleSkpIHtcbiAgICAgIHJldHVybiBsZW5ndGg7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhc3NvY0luZGV4T2Y7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Fzc29jSW5kZXhPZi5qc1xuICoqIG1vZHVsZSBpZCA9IDEwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNLZXlhYmxlID0gcmVxdWlyZSgnLi9faXNLZXlhYmxlJyk7XG5cbi8qKlxuICogR2V0cyB0aGUgZGF0YSBmb3IgYG1hcGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBtYXAgVGhlIG1hcCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIHJlZmVyZW5jZSBrZXkuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWFwIGRhdGEuXG4gKi9cbmZ1bmN0aW9uIGdldE1hcERhdGEobWFwLCBrZXkpIHtcbiAgdmFyIGRhdGEgPSBtYXAuX19kYXRhX187XG4gIHJldHVybiBpc0tleWFibGUoa2V5KVxuICAgID8gZGF0YVt0eXBlb2Yga2V5ID09ICdzdHJpbmcnID8gJ3N0cmluZycgOiAnaGFzaCddXG4gICAgOiBkYXRhLm1hcDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRNYXBEYXRhO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19nZXRNYXBEYXRhLmpzXG4gKiogbW9kdWxlIGlkID0gMTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc0FycmF5ID0gcmVxdWlyZSgnLi9pc0FycmF5JyksXG4gICAgaXNTeW1ib2wgPSByZXF1aXJlKCcuL2lzU3ltYm9sJyk7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cbnZhciByZUlzRGVlcFByb3AgPSAvXFwufFxcWyg/OlteW1xcXV0qfChbXCInXSkoPzooPyFcXDEpW15cXFxcXXxcXFxcLikqP1xcMSlcXF0vLFxuICAgIHJlSXNQbGFpblByb3AgPSAvXlxcdyokLztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUgYW5kIG5vdCBhIHByb3BlcnR5IHBhdGguXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkga2V5cyBvbi5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvcGVydHkgbmFtZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0tleSh2YWx1ZSwgb2JqZWN0KSB7XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgaWYgKHR5cGUgPT0gJ251bWJlcicgfHwgdHlwZSA9PSAnc3ltYm9sJyB8fCB0eXBlID09ICdib29sZWFuJyB8fFxuICAgICAgdmFsdWUgPT0gbnVsbCB8fCBpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gcmVJc1BsYWluUHJvcC50ZXN0KHZhbHVlKSB8fCAhcmVJc0RlZXBQcm9wLnRlc3QodmFsdWUpIHx8XG4gICAgKG9iamVjdCAhPSBudWxsICYmIHZhbHVlIGluIE9iamVjdChvYmplY3QpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0tleTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faXNLZXkuanNcbiAqKiBtb2R1bGUgaWQgPSAxMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdldE5hdGl2ZSA9IHJlcXVpcmUoJy4vX2dldE5hdGl2ZScpO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG52YXIgbmF0aXZlQ3JlYXRlID0gZ2V0TmF0aXZlKE9iamVjdCwgJ2NyZWF0ZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG5hdGl2ZUNyZWF0ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbmF0aXZlQ3JlYXRlLmpzXG4gKiogbW9kdWxlIGlkID0gMTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc1N5bWJvbCA9IHJlcXVpcmUoJy4vaXNTeW1ib2wnKTtcblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgSU5GSU5JVFkgPSAxIC8gMDtcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIGtleSBpZiBpdCdzIG5vdCBhIHN0cmluZyBvciBzeW1ib2wuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGluc3BlY3QuXG4gKiBAcmV0dXJucyB7c3RyaW5nfHN5bWJvbH0gUmV0dXJucyB0aGUga2V5LlxuICovXG5mdW5jdGlvbiB0b0tleSh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnIHx8IGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICB2YXIgcmVzdWx0ID0gKHZhbHVlICsgJycpO1xuICByZXR1cm4gKHJlc3VsdCA9PSAnMCcgJiYgKDEgLyB2YWx1ZSkgPT0gLUlORklOSVRZKSA/ICctMCcgOiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9LZXk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3RvS2V5LmpzXG4gKiogbW9kdWxlIGlkID0gMTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG4gKlxuICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgbG9vc2VseSBiYXNlZCBvblxuICogW2BUb0xlbmd0aGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXRvbGVuZ3RoKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNMZW5ndGgoMyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0xlbmd0aChOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0xlbmd0aChJbmZpbml0eSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNMZW5ndGgoJzMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiZcbiAgICB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNMZW5ndGg7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaXNMZW5ndGguanNcbiAqKiBtb2R1bGUgaWQgPSAxNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4vaXNPYmplY3RMaWtlJyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N5bWJvbCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1N5bWJvbDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9pc1N5bWJvbC5qc1xuICoqIG1vZHVsZSBpZCA9IDE2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgbWFwQ2FjaGVDbGVhciA9IHJlcXVpcmUoJy4vX21hcENhY2hlQ2xlYXInKSxcbiAgICBtYXBDYWNoZURlbGV0ZSA9IHJlcXVpcmUoJy4vX21hcENhY2hlRGVsZXRlJyksXG4gICAgbWFwQ2FjaGVHZXQgPSByZXF1aXJlKCcuL19tYXBDYWNoZUdldCcpLFxuICAgIG1hcENhY2hlSGFzID0gcmVxdWlyZSgnLi9fbWFwQ2FjaGVIYXMnKSxcbiAgICBtYXBDYWNoZVNldCA9IHJlcXVpcmUoJy4vX21hcENhY2hlU2V0Jyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG1hcCBjYWNoZSBvYmplY3QgdG8gc3RvcmUga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBNYXBDYWNoZShlbnRyaWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gZW50cmllcyA/IGVudHJpZXMubGVuZ3RoIDogMDtcblxuICB0aGlzLmNsZWFyKCk7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG4gICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcbiAgfVxufVxuXG4vLyBBZGQgbWV0aG9kcyB0byBgTWFwQ2FjaGVgLlxuTWFwQ2FjaGUucHJvdG90eXBlLmNsZWFyID0gbWFwQ2FjaGVDbGVhcjtcbk1hcENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBtYXBDYWNoZURlbGV0ZTtcbk1hcENhY2hlLnByb3RvdHlwZS5nZXQgPSBtYXBDYWNoZUdldDtcbk1hcENhY2hlLnByb3RvdHlwZS5oYXMgPSBtYXBDYWNoZUhhcztcbk1hcENhY2hlLnByb3RvdHlwZS5zZXQgPSBtYXBDYWNoZVNldDtcblxubW9kdWxlLmV4cG9ydHMgPSBNYXBDYWNoZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fTWFwQ2FjaGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pc09iamVjdCcpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG4gICAgZ2VuVGFnID0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJztcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBGdW5jdGlvbmAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0Z1bmN0aW9uKF8pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNGdW5jdGlvbigvYWJjLyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7XG4gIC8vIFRoZSB1c2Ugb2YgYE9iamVjdCN0b1N0cmluZ2AgYXZvaWRzIGlzc3VlcyB3aXRoIHRoZSBgdHlwZW9mYCBvcGVyYXRvclxuICAvLyBpbiBTYWZhcmkgOCB3aGljaCByZXR1cm5zICdvYmplY3QnIGZvciB0eXBlZCBhcnJheSBhbmQgd2VhayBtYXAgY29uc3RydWN0b3JzLFxuICAvLyBhbmQgUGhhbnRvbUpTIDEuOSB3aGljaCByZXR1cm5zICdmdW5jdGlvbicgZm9yIGBOb2RlTGlzdGAgaW5zdGFuY2VzLlxuICB2YXIgdGFnID0gaXNPYmplY3QodmFsdWUpID8gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgOiAnJztcbiAgcmV0dXJuIHRhZyA9PSBmdW5jVGFnIHx8IHRhZyA9PSBnZW5UYWc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNGdW5jdGlvbjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9pc0Z1bmN0aW9uLmpzXG4gKiogbW9kdWxlIGlkID0gMThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHRyeSB7XG4gICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGlzIG5vdCBkZWZpbmVkJyk7XG4gICAgfVxuICB9XG4gIHRyeSB7XG4gICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICB9IGNhdGNoIChlKSB7XG4gICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaXMgbm90IGRlZmluZWQnKTtcbiAgICB9XG4gIH1cbn0gKCkpXG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBjYWNoZWRTZXRUaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBjYWNoZWRDbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0KGRyYWluUXVldWUsIDApO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcHJvY2Vzcy9icm93c2VyLmpzXG4gKiogbW9kdWxlIGlkID0gMTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qXG4gIEBkZXNjIEFkZCBiZWhhdmlvciB0byBhbnkgZWxlbWVudC5cbiAgV2hlbiBldmFsIHRvIHRydWUsIGl0IHdpbGwgc2V0IGVsZW1lbnQgdGFiIGluZGV4IHRvIDAgYW5kIGZvY3VzIG9uIGl0LlxuICBFeGFtcGxlOiA8ZGl2IHNldC1mb2N1cz1cIndpbGxGb2N1c1doZW5UcnVlXCI+PC9kaXY+XG4qL1xuXG5pbXBvcnQgZGVmZXIgZnJvbSAnbG9kYXNoL2RlZmVyJztcbmV4cG9ydCBkZWZhdWx0IHtcbiAgdXBkYXRlKG5ld1ZhbCkge1xuICAgIGlmIChuZXdWYWwgPT09IHRydWUpIHtcbiAgICAgIGRlZmVyKCgpID0+IHtcbiAgICAgICAgdGhpcy5lbC50YWJJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuZWwuZm9jdXMoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9kaXJlY3RpdmVzL3NldC1mb2N1cy5qc1xuICoqLyIsImltcG9ydCBldmVudHMgZnJvbSAnLi9ldmVudHMnO1xuaW1wb3J0IHhoclJlc3BvbnNlIGZyb20gJy4veGhyLXJlc3BvbnNlJztcbmV4cG9ydCBkZWZhdWx0IFtcbiAgZXZlbnRzLFxuICB4aHJSZXNwb25zZSxcbl07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9taXhpbnMvaW5kZXguanNcbiAqKi8iLCJ2YXIgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi9fZ2V0TmF0aXZlJyksXG4gICAgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xudmFyIE1hcCA9IGdldE5hdGl2ZShyb290LCAnTWFwJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gTWFwO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19NYXAuanNcbiAqKiBtb2R1bGUgaWQgPSAyMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIExpc3RDYWNoZSA9IHJlcXVpcmUoJy4vX0xpc3RDYWNoZScpLFxuICAgIHN0YWNrQ2xlYXIgPSByZXF1aXJlKCcuL19zdGFja0NsZWFyJyksXG4gICAgc3RhY2tEZWxldGUgPSByZXF1aXJlKCcuL19zdGFja0RlbGV0ZScpLFxuICAgIHN0YWNrR2V0ID0gcmVxdWlyZSgnLi9fc3RhY2tHZXQnKSxcbiAgICBzdGFja0hhcyA9IHJlcXVpcmUoJy4vX3N0YWNrSGFzJyksXG4gICAgc3RhY2tTZXQgPSByZXF1aXJlKCcuL19zdGFja1NldCcpO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBzdGFjayBjYWNoZSBvYmplY3QgdG8gc3RvcmUga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBTdGFjayhlbnRyaWVzKSB7XG4gIHRoaXMuX19kYXRhX18gPSBuZXcgTGlzdENhY2hlKGVudHJpZXMpO1xufVxuXG4vLyBBZGQgbWV0aG9kcyB0byBgU3RhY2tgLlxuU3RhY2sucHJvdG90eXBlLmNsZWFyID0gc3RhY2tDbGVhcjtcblN0YWNrLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBzdGFja0RlbGV0ZTtcblN0YWNrLnByb3RvdHlwZS5nZXQgPSBzdGFja0dldDtcblN0YWNrLnByb3RvdHlwZS5oYXMgPSBzdGFja0hhcztcblN0YWNrLnByb3RvdHlwZS5zZXQgPSBzdGFja1NldDtcblxubW9kdWxlLmV4cG9ydHMgPSBTdGFjaztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fU3RhY2suanNcbiAqKiBtb2R1bGUgaWQgPSAyM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIHJvb3QgPSByZXF1aXJlKCcuL19yb290Jyk7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIFN5bWJvbCA9IHJvb3QuU3ltYm9sO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bWJvbDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fU3ltYm9sLmpzXG4gKiogbW9kdWxlIGlkID0gMjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBjYXN0UGF0aCA9IHJlcXVpcmUoJy4vX2Nhc3RQYXRoJyksXG4gICAgaXNLZXkgPSByZXF1aXJlKCcuL19pc0tleScpLFxuICAgIHRvS2V5ID0gcmVxdWlyZSgnLi9fdG9LZXknKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5nZXRgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVmYXVsdCB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGJhc2VHZXQob2JqZWN0LCBwYXRoKSB7XG4gIHBhdGggPSBpc0tleShwYXRoLCBvYmplY3QpID8gW3BhdGhdIDogY2FzdFBhdGgocGF0aCk7XG5cbiAgdmFyIGluZGV4ID0gMCxcbiAgICAgIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xuXG4gIHdoaWxlIChvYmplY3QgIT0gbnVsbCAmJiBpbmRleCA8IGxlbmd0aCkge1xuICAgIG9iamVjdCA9IG9iamVjdFt0b0tleShwYXRoW2luZGV4KytdKV07XG4gIH1cbiAgcmV0dXJuIChpbmRleCAmJiBpbmRleCA9PSBsZW5ndGgpID8gb2JqZWN0IDogdW5kZWZpbmVkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VHZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VHZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAyNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdldFByb3RvdHlwZSA9IHJlcXVpcmUoJy4vX2dldFByb3RvdHlwZScpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmhhc2Agd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBrZXkgVGhlIGtleSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUhhcyhvYmplY3QsIGtleSkge1xuICAvLyBBdm9pZCBhIGJ1ZyBpbiBJRSAxMC0xMSB3aGVyZSBvYmplY3RzIHdpdGggYSBbW1Byb3RvdHlwZV1dIG9mIGBudWxsYCxcbiAgLy8gdGhhdCBhcmUgY29tcG9zZWQgZW50aXJlbHkgb2YgaW5kZXggcHJvcGVydGllcywgcmV0dXJuIGBmYWxzZWAgZm9yXG4gIC8vIGBoYXNPd25Qcm9wZXJ0eWAgY2hlY2tzIG9mIHRoZW0uXG4gIHJldHVybiBvYmplY3QgIT0gbnVsbCAmJlxuICAgIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSB8fFxuICAgICAgKHR5cGVvZiBvYmplY3QgPT0gJ29iamVjdCcgJiYga2V5IGluIG9iamVjdCAmJiBnZXRQcm90b3R5cGUob2JqZWN0KSA9PT0gbnVsbCkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VIYXM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VIYXMuanNcbiAqKiBtb2R1bGUgaWQgPSAyNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VJc0VxdWFsRGVlcCA9IHJlcXVpcmUoJy4vX2Jhc2VJc0VxdWFsRGVlcCcpLFxuICAgIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pc09iamVjdCcpLFxuICAgIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4vaXNPYmplY3RMaWtlJyk7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNFcXVhbGAgd2hpY2ggc3VwcG9ydHMgcGFydGlhbCBjb21wYXJpc29uc1xuICogYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2JpdG1hc2tdIFRoZSBiaXRtYXNrIG9mIGNvbXBhcmlzb24gZmxhZ3MuXG4gKiAgVGhlIGJpdG1hc2sgbWF5IGJlIGNvbXBvc2VkIG9mIHRoZSBmb2xsb3dpbmcgZmxhZ3M6XG4gKiAgICAgMSAtIFVub3JkZXJlZCBjb21wYXJpc29uXG4gKiAgICAgMiAtIFBhcnRpYWwgY29tcGFyaXNvblxuICogQHBhcmFtIHtPYmplY3R9IFtzdGFja10gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSB7XG4gIGlmICh2YWx1ZSA9PT0gb3RoZXIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAodmFsdWUgPT0gbnVsbCB8fCBvdGhlciA9PSBudWxsIHx8ICghaXNPYmplY3QodmFsdWUpICYmICFpc09iamVjdExpa2Uob3RoZXIpKSkge1xuICAgIHJldHVybiB2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyO1xuICB9XG4gIHJldHVybiBiYXNlSXNFcXVhbERlZXAodmFsdWUsIG90aGVyLCBiYXNlSXNFcXVhbCwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VJc0VxdWFsO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlSXNFcXVhbC5qc1xuICoqIG1vZHVsZSBpZCA9IDI3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnByb3BlcnR5YCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYWNjZXNzb3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGJhc2VQcm9wZXJ0eShrZXkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VQcm9wZXJ0eTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZVByb3BlcnR5LmpzXG4gKiogbW9kdWxlIGlkID0gMjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc0FycmF5ID0gcmVxdWlyZSgnLi9pc0FycmF5JyksXG4gICAgc3RyaW5nVG9QYXRoID0gcmVxdWlyZSgnLi9fc3RyaW5nVG9QYXRoJyk7XG5cbi8qKlxuICogQ2FzdHMgYHZhbHVlYCB0byBhIHBhdGggYXJyYXkgaWYgaXQncyBub3Qgb25lLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBpbnNwZWN0LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBjYXN0IHByb3BlcnR5IHBhdGggYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIGNhc3RQYXRoKHZhbHVlKSB7XG4gIHJldHVybiBpc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogc3RyaW5nVG9QYXRoKHZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjYXN0UGF0aDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fY2FzdFBhdGguanNcbiAqKiBtb2R1bGUgaWQgPSAyOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIFNldENhY2hlID0gcmVxdWlyZSgnLi9fU2V0Q2FjaGUnKSxcbiAgICBhcnJheVNvbWUgPSByZXF1aXJlKCcuL19hcnJheVNvbWUnKTtcblxuLyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG52YXIgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyA9IDEsXG4gICAgUEFSVElBTF9DT01QQVJFX0ZMQUcgPSAyO1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgYXJyYXlzIHdpdGggc3VwcG9ydCBmb3JcbiAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0FycmF5fSBvdGhlciBUaGUgb3RoZXIgYXJyYXkgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIG9mIGNvbXBhcmlzb24gZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgXG4gKiAgZm9yIG1vcmUgZGV0YWlscy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzdGFjayBUcmFja3MgdHJhdmVyc2VkIGBhcnJheWAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXJyYXlzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGVxdWFsQXJyYXlzKGFycmF5LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuICB2YXIgaXNQYXJ0aWFsID0gYml0bWFzayAmIFBBUlRJQUxfQ09NUEFSRV9GTEFHLFxuICAgICAgYXJyTGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgb3RoTGVuZ3RoID0gb3RoZXIubGVuZ3RoO1xuXG4gIGlmIChhcnJMZW5ndGggIT0gb3RoTGVuZ3RoICYmICEoaXNQYXJ0aWFsICYmIG90aExlbmd0aCA+IGFyckxlbmd0aCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuICB2YXIgc3RhY2tlZCA9IHN0YWNrLmdldChhcnJheSk7XG4gIGlmIChzdGFja2VkKSB7XG4gICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG4gIH1cbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSB0cnVlLFxuICAgICAgc2VlbiA9IChiaXRtYXNrICYgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRykgPyBuZXcgU2V0Q2FjaGUgOiB1bmRlZmluZWQ7XG5cbiAgc3RhY2suc2V0KGFycmF5LCBvdGhlcik7XG5cbiAgLy8gSWdub3JlIG5vbi1pbmRleCBwcm9wZXJ0aWVzLlxuICB3aGlsZSAoKytpbmRleCA8IGFyckxlbmd0aCkge1xuICAgIHZhciBhcnJWYWx1ZSA9IGFycmF5W2luZGV4XSxcbiAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltpbmRleF07XG5cbiAgICBpZiAoY3VzdG9taXplcikge1xuICAgICAgdmFyIGNvbXBhcmVkID0gaXNQYXJ0aWFsXG4gICAgICAgID8gY3VzdG9taXplcihvdGhWYWx1ZSwgYXJyVmFsdWUsIGluZGV4LCBvdGhlciwgYXJyYXksIHN0YWNrKVxuICAgICAgICA6IGN1c3RvbWl6ZXIoYXJyVmFsdWUsIG90aFZhbHVlLCBpbmRleCwgYXJyYXksIG90aGVyLCBzdGFjayk7XG4gICAgfVxuICAgIGlmIChjb21wYXJlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoY29tcGFyZWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgIGlmIChzZWVuKSB7XG4gICAgICBpZiAoIWFycmF5U29tZShvdGhlciwgZnVuY3Rpb24ob3RoVmFsdWUsIG90aEluZGV4KSB7XG4gICAgICAgICAgICBpZiAoIXNlZW4uaGFzKG90aEluZGV4KSAmJlxuICAgICAgICAgICAgICAgIChhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spKSkge1xuICAgICAgICAgICAgICByZXR1cm4gc2Vlbi5hZGQob3RoSW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pKSB7XG4gICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCEoXG4gICAgICAgICAgYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8XG4gICAgICAgICAgICBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaylcbiAgICAgICAgKSkge1xuICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgc3RhY2tbJ2RlbGV0ZSddKGFycmF5KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlcXVhbEFycmF5cztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fZXF1YWxBcnJheXMuanNcbiAqKiBtb2R1bGUgaWQgPSAzMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIGhvc3Qgb2JqZWN0IGluIElFIDwgOS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGhvc3Qgb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSG9zdE9iamVjdCh2YWx1ZSkge1xuICAvLyBNYW55IGhvc3Qgb2JqZWN0cyBhcmUgYE9iamVjdGAgb2JqZWN0cyB0aGF0IGNhbiBjb2VyY2UgdG8gc3RyaW5nc1xuICAvLyBkZXNwaXRlIGhhdmluZyBpbXByb3Blcmx5IGRlZmluZWQgYHRvU3RyaW5nYCBtZXRob2RzLlxuICB2YXIgcmVzdWx0ID0gZmFsc2U7XG4gIGlmICh2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZS50b1N0cmluZyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9ICEhKHZhbHVlICsgJycpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0hvc3RPYmplY3Q7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2lzSG9zdE9iamVjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDMxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqL1xudmFyIHJlSXNVaW50ID0gL14oPzowfFsxLTldXFxkKikkLztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgaW5kZXguXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBpbmRleCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHtcbiAgbGVuZ3RoID0gbGVuZ3RoID09IG51bGwgPyBNQVhfU0FGRV9JTlRFR0VSIDogbGVuZ3RoO1xuICByZXR1cm4gISFsZW5ndGggJiZcbiAgICAodHlwZW9mIHZhbHVlID09ICdudW1iZXInIHx8IHJlSXNVaW50LnRlc3QodmFsdWUpKSAmJlxuICAgICh2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0luZGV4O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19pc0luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMzJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vaXNPYmplY3QnKTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSBmb3Igc3RyaWN0IGVxdWFsaXR5IGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlmIHN1aXRhYmxlIGZvciBzdHJpY3RcbiAqICBlcXVhbGl0eSBjb21wYXJpc29ucywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc1N0cmljdENvbXBhcmFibGUodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSAmJiAhaXNPYmplY3QodmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzU3RyaWN0Q29tcGFyYWJsZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faXNTdHJpY3RDb21wYXJhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBtYXRjaGVzUHJvcGVydHlgIGZvciBzb3VyY2UgdmFsdWVzIHN1aXRhYmxlXG4gKiBmb3Igc3RyaWN0IGVxdWFsaXR5IGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEBwYXJhbSB7Kn0gc3JjVmFsdWUgVGhlIHZhbHVlIHRvIG1hdGNoLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgc3BlYyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gbWF0Y2hlc1N0cmljdENvbXBhcmFibGUoa2V5LCBzcmNWYWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBvYmplY3Rba2V5XSA9PT0gc3JjVmFsdWUgJiZcbiAgICAgIChzcmNWYWx1ZSAhPT0gdW5kZWZpbmVkIHx8IChrZXkgaW4gT2JqZWN0KG9iamVjdCkpKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbWF0Y2hlc1N0cmljdENvbXBhcmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xudmFyIGZ1bmNUb1N0cmluZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqXG4gKiBDb252ZXJ0cyBgZnVuY2AgdG8gaXRzIHNvdXJjZSBjb2RlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc291cmNlIGNvZGUuXG4gKi9cbmZ1bmN0aW9uIHRvU291cmNlKGZ1bmMpIHtcbiAgaWYgKGZ1bmMgIT0gbnVsbCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZnVuY1RvU3RyaW5nLmNhbGwoZnVuYyk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIChmdW5jICsgJycpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRvU291cmNlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL190b1NvdXJjZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZURlbGF5ID0gcmVxdWlyZSgnLi9fYmFzZURlbGF5JyksXG4gICAgcmVzdCA9IHJlcXVpcmUoJy4vcmVzdCcpO1xuXG4vKipcbiAqIERlZmVycyBpbnZva2luZyB0aGUgYGZ1bmNgIHVudGlsIHRoZSBjdXJyZW50IGNhbGwgc3RhY2sgaGFzIGNsZWFyZWQuIEFueVxuICogYWRkaXRpb25hbCBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIHRvIGBmdW5jYCB3aGVuIGl0J3MgaW52b2tlZC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlZmVyLlxuICogQHBhcmFtIHsuLi4qfSBbYXJnc10gVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgYGZ1bmNgIHdpdGguXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lciBpZC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5kZWZlcihmdW5jdGlvbih0ZXh0KSB7XG4gKiAgIGNvbnNvbGUubG9nKHRleHQpO1xuICogfSwgJ2RlZmVycmVkJyk7XG4gKiAvLyA9PiBMb2dzICdkZWZlcnJlZCcgYWZ0ZXIgb25lIG9yIG1vcmUgbWlsbGlzZWNvbmRzLlxuICovXG52YXIgZGVmZXIgPSByZXN0KGZ1bmN0aW9uKGZ1bmMsIGFyZ3MpIHtcbiAgcmV0dXJuIGJhc2VEZWxheShmdW5jLCAxLCBhcmdzKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlZmVyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2RlZmVyLmpzXG4gKiogbW9kdWxlIGlkID0gMzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc0FycmF5TGlrZU9iamVjdCA9IHJlcXVpcmUoJy4vaXNBcnJheUxpa2VPYmplY3QnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJztcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIHByb3BlcnR5SXNFbnVtZXJhYmxlID0gb2JqZWN0UHJvdG8ucHJvcGVydHlJc0VudW1lcmFibGU7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGFuIGBhcmd1bWVudHNgIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcmd1bWVudHMoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FyZ3VtZW50cyhbMSwgMiwgM10pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcmd1bWVudHModmFsdWUpIHtcbiAgLy8gU2FmYXJpIDguMSBpbmNvcnJlY3RseSBtYWtlcyBgYXJndW1lbnRzLmNhbGxlZWAgZW51bWVyYWJsZSBpbiBzdHJpY3QgbW9kZS5cbiAgcmV0dXJuIGlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKSAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCAnY2FsbGVlJykgJiZcbiAgICAoIXByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodmFsdWUsICdjYWxsZWUnKSB8fCBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBhcmdzVGFnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0FyZ3VtZW50cztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9pc0FyZ3VtZW50cy5qc1xuICoqIG1vZHVsZSBpZCA9IDM3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0TGVuZ3RoID0gcmVxdWlyZSgnLi9fZ2V0TGVuZ3RoJyksXG4gICAgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJy4vaXNGdW5jdGlvbicpLFxuICAgIGlzTGVuZ3RoID0gcmVxdWlyZSgnLi9pc0xlbmd0aCcpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UuIEEgdmFsdWUgaXMgY29uc2lkZXJlZCBhcnJheS1saWtlIGlmIGl0J3NcbiAqIG5vdCBhIGZ1bmN0aW9uIGFuZCBoYXMgYSBgdmFsdWUubGVuZ3RoYCB0aGF0J3MgYW4gaW50ZWdlciBncmVhdGVyIHRoYW4gb3JcbiAqIGVxdWFsIHRvIGAwYCBhbmQgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUmAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZShkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKCdhYmMnKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBpc0xlbmd0aChnZXRMZW5ndGgodmFsdWUpKSAmJiAhaXNGdW5jdGlvbih2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNBcnJheUxpa2U7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaXNBcnJheUxpa2UuanNcbiAqKiBtb2R1bGUgaWQgPSAzOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzQXJyYXkgPSByZXF1aXJlKCcuL2lzQXJyYXknKSxcbiAgICBpc09iamVjdExpa2UgPSByZXF1aXJlKCcuL2lzT2JqZWN0TGlrZScpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgc3RyaW5nVGFnID0gJ1tvYmplY3QgU3RyaW5nXSc7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3RyaW5nYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBzaW5jZSAwLjEuMFxuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1N0cmluZygnYWJjJyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N0cmluZygxKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgfHxcbiAgICAoIWlzQXJyYXkodmFsdWUpICYmIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3RyaW5nVGFnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1N0cmluZztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9pc1N0cmluZy5qc1xuICoqIG1vZHVsZSBpZCA9IDM5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZUhhcyA9IHJlcXVpcmUoJy4vX2Jhc2VIYXMnKSxcbiAgICBiYXNlS2V5cyA9IHJlcXVpcmUoJy4vX2Jhc2VLZXlzJyksXG4gICAgaW5kZXhLZXlzID0gcmVxdWlyZSgnLi9faW5kZXhLZXlzJyksXG4gICAgaXNBcnJheUxpa2UgPSByZXF1aXJlKCcuL2lzQXJyYXlMaWtlJyksXG4gICAgaXNJbmRleCA9IHJlcXVpcmUoJy4vX2lzSW5kZXgnKSxcbiAgICBpc1Byb3RvdHlwZSA9IHJlcXVpcmUoJy4vX2lzUHJvdG90eXBlJyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuXG4gKlxuICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuIFNlZSB0aGVcbiAqIFtFUyBzcGVjXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3Qua2V5cylcbiAqIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogQHN0YXRpY1xuICogQHNpbmNlIDAuMS4wXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IE9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqIEBleGFtcGxlXG4gKlxuICogZnVuY3Rpb24gRm9vKCkge1xuICogICB0aGlzLmEgPSAxO1xuICogICB0aGlzLmIgPSAyO1xuICogfVxuICpcbiAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gKlxuICogXy5rZXlzKG5ldyBGb28pO1xuICogLy8gPT4gWydhJywgJ2InXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICpcbiAqIF8ua2V5cygnaGknKTtcbiAqIC8vID0+IFsnMCcsICcxJ11cbiAqL1xuZnVuY3Rpb24ga2V5cyhvYmplY3QpIHtcbiAgdmFyIGlzUHJvdG8gPSBpc1Byb3RvdHlwZShvYmplY3QpO1xuICBpZiAoIShpc1Byb3RvIHx8IGlzQXJyYXlMaWtlKG9iamVjdCkpKSB7XG4gICAgcmV0dXJuIGJhc2VLZXlzKG9iamVjdCk7XG4gIH1cbiAgdmFyIGluZGV4ZXMgPSBpbmRleEtleXMob2JqZWN0KSxcbiAgICAgIHNraXBJbmRleGVzID0gISFpbmRleGVzLFxuICAgICAgcmVzdWx0ID0gaW5kZXhlcyB8fCBbXSxcbiAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG5cbiAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgIGlmIChiYXNlSGFzKG9iamVjdCwga2V5KSAmJlxuICAgICAgICAhKHNraXBJbmRleGVzICYmIChrZXkgPT0gJ2xlbmd0aCcgfHwgaXNJbmRleChrZXksIGxlbmd0aCkpKSAmJlxuICAgICAgICAhKGlzUHJvdG8gJiYga2V5ID09ICdjb25zdHJ1Y3RvcicpKSB7XG4gICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGtleXM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gva2V5cy5qc1xuICoqIG1vZHVsZSBpZCA9IDQwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgdG9GaW5pdGUgPSByZXF1aXJlKCcuL3RvRmluaXRlJyk7XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBpbnRlZ2VyLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uXG4gKiBbYFRvSW50ZWdlcmBdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy10b2ludGVnZXIpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29udmVydGVkIGludGVnZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9JbnRlZ2VyKDMuMik7XG4gKiAvLyA9PiAzXG4gKlxuICogXy50b0ludGVnZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiAwXG4gKlxuICogXy50b0ludGVnZXIoSW5maW5pdHkpO1xuICogLy8gPT4gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDhcbiAqXG4gKiBfLnRvSW50ZWdlcignMy4yJyk7XG4gKiAvLyA9PiAzXG4gKi9cbmZ1bmN0aW9uIHRvSW50ZWdlcih2YWx1ZSkge1xuICB2YXIgcmVzdWx0ID0gdG9GaW5pdGUodmFsdWUpLFxuICAgICAgcmVtYWluZGVyID0gcmVzdWx0ICUgMTtcblxuICByZXR1cm4gcmVzdWx0ID09PSByZXN1bHQgPyAocmVtYWluZGVyID8gcmVzdWx0IC0gcmVtYWluZGVyIDogcmVzdWx0KSA6IDA7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9JbnRlZ2VyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL3RvSW50ZWdlci5qc1xuICoqIG1vZHVsZSBpZCA9IDQxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJy4vaXNGdW5jdGlvbicpLFxuICAgIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pc09iamVjdCcpLFxuICAgIGlzU3ltYm9sID0gcmVxdWlyZSgnLi9pc1N5bWJvbCcpO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBOQU4gPSAwIC8gMDtcblxuLyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS4gKi9cbnZhciByZVRyaW0gPSAvXlxccyt8XFxzKyQvZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJhZCBzaWduZWQgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiaW5hcnkgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3Qgb2N0YWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pO1xuXG4vKiogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgd2l0aG91dCBhIGRlcGVuZGVuY3kgb24gYHJvb3RgLiAqL1xudmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9OdW1iZXIoMy4yKTtcbiAqIC8vID0+IDMuMlxuICpcbiAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiA1ZS0zMjRcbiAqXG4gKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcbiAqIC8vID0+IEluZmluaXR5XG4gKlxuICogXy50b051bWJlcignMy4yJyk7XG4gKiAvLyA9PiAzLjJcbiAqL1xuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIE5BTjtcbiAgfVxuICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgdmFyIG90aGVyID0gaXNGdW5jdGlvbih2YWx1ZS52YWx1ZU9mKSA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICB9XG4gIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcbiAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcbiAgcmV0dXJuIChpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkpXG4gICAgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpXG4gICAgOiAocmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9OdW1iZXI7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvdG9OdW1iZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA0MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiBWdWUuanMgdjEuMC4yNlxuICogKGMpIDIwMTYgRXZhbiBZb3VcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBzZXQob2JqLCBrZXksIHZhbCkge1xuICBpZiAoaGFzT3duKG9iaiwga2V5KSkge1xuICAgIG9ialtrZXldID0gdmFsO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAob2JqLl9pc1Z1ZSkge1xuICAgIHNldChvYmouX2RhdGEsIGtleSwgdmFsKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG9iID0gb2JqLl9fb2JfXztcbiAgaWYgKCFvYikge1xuICAgIG9ialtrZXldID0gdmFsO1xuICAgIHJldHVybjtcbiAgfVxuICBvYi5jb252ZXJ0KGtleSwgdmFsKTtcbiAgb2IuZGVwLm5vdGlmeSgpO1xuICBpZiAob2Iudm1zKSB7XG4gICAgdmFyIGkgPSBvYi52bXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciB2bSA9IG9iLnZtc1tpXTtcbiAgICAgIHZtLl9wcm94eShrZXkpO1xuICAgICAgdm0uX2RpZ2VzdCgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdmFsO1xufVxuXG4vKipcbiAqIERlbGV0ZSBhIHByb3BlcnR5IGFuZCB0cmlnZ2VyIGNoYW5nZSBpZiBuZWNlc3NhcnkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICovXG5cbmZ1bmN0aW9uIGRlbChvYmosIGtleSkge1xuICBpZiAoIWhhc093bihvYmosIGtleSkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZGVsZXRlIG9ialtrZXldO1xuICB2YXIgb2IgPSBvYmouX19vYl9fO1xuICBpZiAoIW9iKSB7XG4gICAgaWYgKG9iai5faXNWdWUpIHtcbiAgICAgIGRlbGV0ZSBvYmouX2RhdGFba2V5XTtcbiAgICAgIG9iai5fZGlnZXN0KCk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBvYi5kZXAubm90aWZ5KCk7XG4gIGlmIChvYi52bXMpIHtcbiAgICB2YXIgaSA9IG9iLnZtcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFyIHZtID0gb2Iudm1zW2ldO1xuICAgICAgdm0uX3VucHJveHkoa2V5KTtcbiAgICAgIHZtLl9kaWdlc3QoKTtcbiAgICB9XG4gIH1cbn1cblxudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbi8qKlxuICogQ2hlY2sgd2hldGhlciB0aGUgb2JqZWN0IGhhcyB0aGUgcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBoYXNPd24ob2JqLCBrZXkpIHtcbiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBsaXRlcmFsIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxudmFyIGxpdGVyYWxWYWx1ZVJFID0gL15cXHM/KHRydWV8ZmFsc2V8LT9bXFxkXFwuXSt8J1teJ10qJ3xcIlteXCJdKlwiKVxccz8kLztcblxuZnVuY3Rpb24gaXNMaXRlcmFsKGV4cCkge1xuICByZXR1cm4gbGl0ZXJhbFZhbHVlUkUudGVzdChleHApO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgc3RyaW5nIHN0YXJ0cyB3aXRoICQgb3IgX1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNSZXNlcnZlZChzdHIpIHtcbiAgdmFyIGMgPSAoc3RyICsgJycpLmNoYXJDb2RlQXQoMCk7XG4gIHJldHVybiBjID09PSAweDI0IHx8IGMgPT09IDB4NUY7XG59XG5cbi8qKlxuICogR3VhcmQgdGV4dCBvdXRwdXQsIG1ha2Ugc3VyZSB1bmRlZmluZWQgb3V0cHV0c1xuICogZW1wdHkgc3RyaW5nXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIF90b1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWUudG9TdHJpbmcoKTtcbn1cblxuLyoqXG4gKiBDaGVjayBhbmQgY29udmVydCBwb3NzaWJsZSBudW1lcmljIHN0cmluZ3MgdG8gbnVtYmVyc1xuICogYmVmb3JlIHNldHRpbmcgYmFjayB0byBkYXRhXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7KnxOdW1iZXJ9XG4gKi9cblxuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHBhcnNlZCA9IE51bWJlcih2YWx1ZSk7XG4gICAgcmV0dXJuIGlzTmFOKHBhcnNlZCkgPyB2YWx1ZSA6IHBhcnNlZDtcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlcnQgc3RyaW5nIGJvb2xlYW4gbGl0ZXJhbHMgaW50byByZWFsIGJvb2xlYW5zLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4geyp8Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiB0b0Jvb2xlYW4odmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09PSAndHJ1ZScgPyB0cnVlIDogdmFsdWUgPT09ICdmYWxzZScgPyBmYWxzZSA6IHZhbHVlO1xufVxuXG4vKipcbiAqIFN0cmlwIHF1b3RlcyBmcm9tIGEgc3RyaW5nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nIHwgZmFsc2V9XG4gKi9cblxuZnVuY3Rpb24gc3RyaXBRdW90ZXMoc3RyKSB7XG4gIHZhciBhID0gc3RyLmNoYXJDb2RlQXQoMCk7XG4gIHZhciBiID0gc3RyLmNoYXJDb2RlQXQoc3RyLmxlbmd0aCAtIDEpO1xuICByZXR1cm4gYSA9PT0gYiAmJiAoYSA9PT0gMHgyMiB8fCBhID09PSAweDI3KSA/IHN0ci5zbGljZSgxLCAtMSkgOiBzdHI7XG59XG5cbi8qKlxuICogQ2FtZWxpemUgYSBoeXBoZW4tZGVsbWl0ZWQgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG52YXIgY2FtZWxpemVSRSA9IC8tKFxcdykvZztcblxuZnVuY3Rpb24gY2FtZWxpemUoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShjYW1lbGl6ZVJFLCB0b1VwcGVyKTtcbn1cblxuZnVuY3Rpb24gdG9VcHBlcihfLCBjKSB7XG4gIHJldHVybiBjID8gYy50b1VwcGVyQ2FzZSgpIDogJyc7XG59XG5cbi8qKlxuICogSHlwaGVuYXRlIGEgY2FtZWxDYXNlIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxudmFyIGh5cGhlbmF0ZVJFID0gLyhbYS16XFxkXSkoW0EtWl0pL2c7XG5cbmZ1bmN0aW9uIGh5cGhlbmF0ZShzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKGh5cGhlbmF0ZVJFLCAnJDEtJDInKS50b0xvd2VyQ2FzZSgpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGh5cGhlbi91bmRlcnNjb3JlL3NsYXNoIGRlbGltaXRlcmVkIG5hbWVzIGludG9cbiAqIGNhbWVsaXplZCBjbGFzc05hbWVzLlxuICpcbiAqIGUuZy4gbXktY29tcG9uZW50ID0+IE15Q29tcG9uZW50XG4gKiAgICAgIHNvbWVfZWxzZSAgICA9PiBTb21lRWxzZVxuICogICAgICBzb21lL2NvbXAgICAgPT4gU29tZUNvbXBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxudmFyIGNsYXNzaWZ5UkUgPSAvKD86XnxbLV9cXC9dKShcXHcpL2c7XG5cbmZ1bmN0aW9uIGNsYXNzaWZ5KHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoY2xhc3NpZnlSRSwgdG9VcHBlcik7XG59XG5cbi8qKlxuICogU2ltcGxlIGJpbmQsIGZhc3RlciB0aGFuIG5hdGl2ZVxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge09iamVjdH0gY3R4XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBiaW5kKGZuLCBjdHgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG4gICAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHJldHVybiBsID8gbCA+IDEgPyBmbi5hcHBseShjdHgsIGFyZ3VtZW50cykgOiBmbi5jYWxsKGN0eCwgYSkgOiBmbi5jYWxsKGN0eCk7XG4gIH07XG59XG5cbi8qKlxuICogQ29udmVydCBhbiBBcnJheS1saWtlIG9iamVjdCB0byBhIHJlYWwgQXJyYXkuXG4gKlxuICogQHBhcmFtIHtBcnJheS1saWtlfSBsaXN0XG4gKiBAcGFyYW0ge051bWJlcn0gW3N0YXJ0XSAtIHN0YXJ0IGluZGV4XG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuXG5mdW5jdGlvbiB0b0FycmF5KGxpc3QsIHN0YXJ0KSB7XG4gIHN0YXJ0ID0gc3RhcnQgfHwgMDtcbiAgdmFyIGkgPSBsaXN0Lmxlbmd0aCAtIHN0YXJ0O1xuICB2YXIgcmV0ID0gbmV3IEFycmF5KGkpO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgcmV0W2ldID0gbGlzdFtpICsgc3RhcnRdO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogTWl4IHByb3BlcnRpZXMgaW50byB0YXJnZXQgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0b1xuICogQHBhcmFtIHtPYmplY3R9IGZyb21cbiAqL1xuXG5mdW5jdGlvbiBleHRlbmQodG8sIGZyb20pIHtcbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhmcm9tKTtcbiAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIHRvW2tleXNbaV1dID0gZnJvbVtrZXlzW2ldXTtcbiAgfVxuICByZXR1cm4gdG87XG59XG5cbi8qKlxuICogUXVpY2sgb2JqZWN0IGNoZWNrIC0gdGhpcyBpcyBwcmltYXJpbHkgdXNlZCB0byB0ZWxsXG4gKiBPYmplY3RzIGZyb20gcHJpbWl0aXZlIHZhbHVlcyB3aGVuIHdlIGtub3cgdGhlIHZhbHVlXG4gKiBpcyBhIEpTT04tY29tcGxpYW50IHR5cGUuXG4gKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG4gIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogU3RyaWN0IG9iamVjdCB0eXBlIGNoZWNrLiBPbmx5IHJldHVybnMgdHJ1ZVxuICogZm9yIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xudmFyIE9CSkVDVF9TVFJJTkcgPSAnW29iamVjdCBPYmplY3RdJztcblxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gT0JKRUNUX1NUUklORztcbn1cblxuLyoqXG4gKiBBcnJheSB0eXBlIGNoZWNrLlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuLyoqXG4gKiBEZWZpbmUgYSBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0geyp9IHZhbFxuICogQHBhcmFtIHtCb29sZWFufSBbZW51bWVyYWJsZV1cbiAqL1xuXG5mdW5jdGlvbiBkZWYob2JqLCBrZXksIHZhbCwgZW51bWVyYWJsZSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICB2YWx1ZTogdmFsLFxuICAgIGVudW1lcmFibGU6ICEhZW51bWVyYWJsZSxcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5cbi8qKlxuICogRGVib3VuY2UgYSBmdW5jdGlvbiBzbyBpdCBvbmx5IGdldHMgY2FsbGVkIGFmdGVyIHRoZVxuICogaW5wdXQgc3RvcHMgYXJyaXZpbmcgYWZ0ZXIgdGhlIGdpdmVuIHdhaXQgcGVyaW9kLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmNcbiAqIEBwYXJhbSB7TnVtYmVyfSB3YWl0XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG4gKi9cblxuZnVuY3Rpb24gX2RlYm91bmNlKGZ1bmMsIHdhaXQpIHtcbiAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xuICB2YXIgbGF0ZXIgPSBmdW5jdGlvbiBsYXRlcigpIHtcbiAgICB2YXIgbGFzdCA9IERhdGUubm93KCkgLSB0aW1lc3RhbXA7XG4gICAgaWYgKGxhc3QgPCB3YWl0ICYmIGxhc3QgPj0gMCkge1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgfVxuICB9O1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGNvbnRleHQgPSB0aGlzO1xuICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICBpZiAoIXRpbWVvdXQpIHtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cblxuLyoqXG4gKiBNYW51YWwgaW5kZXhPZiBiZWNhdXNlIGl0J3Mgc2xpZ2h0bHkgZmFzdGVyIHRoYW5cbiAqIG5hdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKi9cblxuZnVuY3Rpb24gaW5kZXhPZihhcnIsIG9iaikge1xuICB2YXIgaSA9IGFyci5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBpZiAoYXJyW2ldID09PSBvYmopIHJldHVybiBpO1xuICB9XG4gIHJldHVybiAtMTtcbn1cblxuLyoqXG4gKiBNYWtlIGEgY2FuY2VsbGFibGUgdmVyc2lvbiBvZiBhbiBhc3luYyBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY2FuY2VsbGFibGUoZm4pIHtcbiAgdmFyIGNiID0gZnVuY3Rpb24gY2IoKSB7XG4gICAgaWYgKCFjYi5jYW5jZWxsZWQpIHtcbiAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfTtcbiAgY2IuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgIGNiLmNhbmNlbGxlZCA9IHRydWU7XG4gIH07XG4gIHJldHVybiBjYjtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0d28gdmFsdWVzIGFyZSBsb29zZWx5IGVxdWFsIC0gdGhhdCBpcyxcbiAqIGlmIHRoZXkgYXJlIHBsYWluIG9iamVjdHMsIGRvIHRoZXkgaGF2ZSB0aGUgc2FtZSBzaGFwZT9cbiAqXG4gKiBAcGFyYW0geyp9IGFcbiAqIEBwYXJhbSB7Kn0gYlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBsb29zZUVxdWFsKGEsIGIpIHtcbiAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gIHJldHVybiBhID09IGIgfHwgKGlzT2JqZWN0KGEpICYmIGlzT2JqZWN0KGIpID8gSlNPTi5zdHJpbmdpZnkoYSkgPT09IEpTT04uc3RyaW5naWZ5KGIpIDogZmFsc2UpO1xuICAvKiBlc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xufVxuXG52YXIgaGFzUHJvdG8gPSAoJ19fcHJvdG9fXycgaW4ge30pO1xuXG4vLyBCcm93c2VyIGVudmlyb25tZW50IHNuaWZmaW5nXG52YXIgaW5Ccm93c2VyID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHdpbmRvdykgIT09ICdbb2JqZWN0IE9iamVjdF0nO1xuXG4vLyBkZXRlY3QgZGV2dG9vbHNcbnZhciBkZXZ0b29scyA9IGluQnJvd3NlciAmJiB3aW5kb3cuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXztcblxuLy8gVUEgc25pZmZpbmcgZm9yIHdvcmtpbmcgYXJvdW5kIGJyb3dzZXItc3BlY2lmaWMgcXVpcmtzXG52YXIgVUEgPSBpbkJyb3dzZXIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbnZhciBpc0lFID0gVUEgJiYgVUEuaW5kZXhPZigndHJpZGVudCcpID4gMDtcbnZhciBpc0lFOSA9IFVBICYmIFVBLmluZGV4T2YoJ21zaWUgOS4wJykgPiAwO1xudmFyIGlzQW5kcm9pZCA9IFVBICYmIFVBLmluZGV4T2YoJ2FuZHJvaWQnKSA+IDA7XG52YXIgaXNJb3MgPSBVQSAmJiAvKGlwaG9uZXxpcGFkfGlwb2R8aW9zKS9pLnRlc3QoVUEpO1xudmFyIGlvc1ZlcnNpb25NYXRjaCA9IGlzSW9zICYmIFVBLm1hdGNoKC9vcyAoW1xcZF9dKykvKTtcbnZhciBpb3NWZXJzaW9uID0gaW9zVmVyc2lvbk1hdGNoICYmIGlvc1ZlcnNpb25NYXRjaFsxXS5zcGxpdCgnXycpO1xuXG4vLyBkZXRlY3RpbmcgaU9TIFVJV2ViVmlldyBieSBpbmRleGVkREJcbnZhciBoYXNNdXRhdGlvbk9ic2VydmVyQnVnID0gaW9zVmVyc2lvbiAmJiBOdW1iZXIoaW9zVmVyc2lvblswXSkgPj0gOSAmJiBOdW1iZXIoaW9zVmVyc2lvblsxXSkgPj0gMyAmJiAhd2luZG93LmluZGV4ZWREQjtcblxudmFyIHRyYW5zaXRpb25Qcm9wID0gdW5kZWZpbmVkO1xudmFyIHRyYW5zaXRpb25FbmRFdmVudCA9IHVuZGVmaW5lZDtcbnZhciBhbmltYXRpb25Qcm9wID0gdW5kZWZpbmVkO1xudmFyIGFuaW1hdGlvbkVuZEV2ZW50ID0gdW5kZWZpbmVkO1xuXG4vLyBUcmFuc2l0aW9uIHByb3BlcnR5L2V2ZW50IHNuaWZmaW5nXG5pZiAoaW5Ccm93c2VyICYmICFpc0lFOSkge1xuICB2YXIgaXNXZWJraXRUcmFucyA9IHdpbmRvdy5vbnRyYW5zaXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kICE9PSB1bmRlZmluZWQ7XG4gIHZhciBpc1dlYmtpdEFuaW0gPSB3aW5kb3cub25hbmltYXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQgIT09IHVuZGVmaW5lZDtcbiAgdHJhbnNpdGlvblByb3AgPSBpc1dlYmtpdFRyYW5zID8gJ1dlYmtpdFRyYW5zaXRpb24nIDogJ3RyYW5zaXRpb24nO1xuICB0cmFuc2l0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdFRyYW5zID8gJ3dlYmtpdFRyYW5zaXRpb25FbmQnIDogJ3RyYW5zaXRpb25lbmQnO1xuICBhbmltYXRpb25Qcm9wID0gaXNXZWJraXRBbmltID8gJ1dlYmtpdEFuaW1hdGlvbicgOiAnYW5pbWF0aW9uJztcbiAgYW5pbWF0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdEFuaW0gPyAnd2Via2l0QW5pbWF0aW9uRW5kJyA6ICdhbmltYXRpb25lbmQnO1xufVxuXG4vKipcbiAqIERlZmVyIGEgdGFzayB0byBleGVjdXRlIGl0IGFzeW5jaHJvbm91c2x5LiBJZGVhbGx5IHRoaXNcbiAqIHNob3VsZCBiZSBleGVjdXRlZCBhcyBhIG1pY3JvdGFzaywgc28gd2UgbGV2ZXJhZ2VcbiAqIE11dGF0aW9uT2JzZXJ2ZXIgaWYgaXQncyBhdmFpbGFibGUsIGFuZCBmYWxsYmFjayB0b1xuICogc2V0VGltZW91dCgwKS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtIHtPYmplY3R9IGN0eFxuICovXG5cbnZhciBuZXh0VGljayA9IChmdW5jdGlvbiAoKSB7XG4gIHZhciBjYWxsYmFja3MgPSBbXTtcbiAgdmFyIHBlbmRpbmcgPSBmYWxzZTtcbiAgdmFyIHRpbWVyRnVuYztcbiAgZnVuY3Rpb24gbmV4dFRpY2tIYW5kbGVyKCkge1xuICAgIHBlbmRpbmcgPSBmYWxzZTtcbiAgICB2YXIgY29waWVzID0gY2FsbGJhY2tzLnNsaWNlKDApO1xuICAgIGNhbGxiYWNrcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29waWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb3BpZXNbaV0oKTtcbiAgICB9XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyICE9PSAndW5kZWZpbmVkJyAmJiAhaGFzTXV0YXRpb25PYnNlcnZlckJ1Zykge1xuICAgIHZhciBjb3VudGVyID0gMTtcbiAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihuZXh0VGlja0hhbmRsZXIpO1xuICAgIHZhciB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNvdW50ZXIpO1xuICAgIG9ic2VydmVyLm9ic2VydmUodGV4dE5vZGUsIHtcbiAgICAgIGNoYXJhY3RlckRhdGE6IHRydWVcbiAgICB9KTtcbiAgICB0aW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBjb3VudGVyID0gKGNvdW50ZXIgKyAxKSAlIDI7XG4gICAgICB0ZXh0Tm9kZS5kYXRhID0gY291bnRlcjtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIHdlYnBhY2sgYXR0ZW1wdHMgdG8gaW5qZWN0IGEgc2hpbSBmb3Igc2V0SW1tZWRpYXRlXG4gICAgLy8gaWYgaXQgaXMgdXNlZCBhcyBhIGdsb2JhbCwgc28gd2UgaGF2ZSB0byB3b3JrIGFyb3VuZCB0aGF0IHRvXG4gICAgLy8gYXZvaWQgYnVuZGxpbmcgdW5uZWNlc3NhcnkgY29kZS5cbiAgICB2YXIgY29udGV4dCA9IGluQnJvd3NlciA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDoge307XG4gICAgdGltZXJGdW5jID0gY29udGV4dC5zZXRJbW1lZGlhdGUgfHwgc2V0VGltZW91dDtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKGNiLCBjdHgpIHtcbiAgICB2YXIgZnVuYyA9IGN0eCA/IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNiLmNhbGwoY3R4KTtcbiAgICB9IDogY2I7XG4gICAgY2FsbGJhY2tzLnB1c2goZnVuYyk7XG4gICAgaWYgKHBlbmRpbmcpIHJldHVybjtcbiAgICBwZW5kaW5nID0gdHJ1ZTtcbiAgICB0aW1lckZ1bmMobmV4dFRpY2tIYW5kbGVyLCAwKTtcbiAgfTtcbn0pKCk7XG5cbnZhciBfU2V0ID0gdW5kZWZpbmVkO1xuLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5pZiAodHlwZW9mIFNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgU2V0LnRvU3RyaW5nKCkubWF0Y2goL25hdGl2ZSBjb2RlLykpIHtcbiAgLy8gdXNlIG5hdGl2ZSBTZXQgd2hlbiBhdmFpbGFibGUuXG4gIF9TZXQgPSBTZXQ7XG59IGVsc2Uge1xuICAvLyBhIG5vbi1zdGFuZGFyZCBTZXQgcG9seWZpbGwgdGhhdCBvbmx5IHdvcmtzIHdpdGggcHJpbWl0aXZlIGtleXMuXG4gIF9TZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5zZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9O1xuICBfU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0W2tleV0gIT09IHVuZGVmaW5lZDtcbiAgfTtcbiAgX1NldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHRoaXMuc2V0W2tleV0gPSAxO1xuICB9O1xuICBfU2V0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIENhY2hlKGxpbWl0KSB7XG4gIHRoaXMuc2l6ZSA9IDA7XG4gIHRoaXMubGltaXQgPSBsaW1pdDtcbiAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gdW5kZWZpbmVkO1xuICB0aGlzLl9rZXltYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xufVxuXG52YXIgcCA9IENhY2hlLnByb3RvdHlwZTtcblxuLyoqXG4gKiBQdXQgPHZhbHVlPiBpbnRvIHRoZSBjYWNoZSBhc3NvY2lhdGVkIHdpdGggPGtleT4uXG4gKiBSZXR1cm5zIHRoZSBlbnRyeSB3aGljaCB3YXMgcmVtb3ZlZCB0byBtYWtlIHJvb20gZm9yXG4gKiB0aGUgbmV3IGVudHJ5LiBPdGhlcndpc2UgdW5kZWZpbmVkIGlzIHJldHVybmVkLlxuICogKGkuZS4gaWYgdGhlcmUgd2FzIGVub3VnaCByb29tIGFscmVhZHkpLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge0VudHJ5fHVuZGVmaW5lZH1cbiAqL1xuXG5wLnB1dCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gIHZhciByZW1vdmVkO1xuXG4gIHZhciBlbnRyeSA9IHRoaXMuZ2V0KGtleSwgdHJ1ZSk7XG4gIGlmICghZW50cnkpIHtcbiAgICBpZiAodGhpcy5zaXplID09PSB0aGlzLmxpbWl0KSB7XG4gICAgICByZW1vdmVkID0gdGhpcy5zaGlmdCgpO1xuICAgIH1cbiAgICBlbnRyeSA9IHtcbiAgICAgIGtleToga2V5XG4gICAgfTtcbiAgICB0aGlzLl9rZXltYXBba2V5XSA9IGVudHJ5O1xuICAgIGlmICh0aGlzLnRhaWwpIHtcbiAgICAgIHRoaXMudGFpbC5uZXdlciA9IGVudHJ5O1xuICAgICAgZW50cnkub2xkZXIgPSB0aGlzLnRhaWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGVhZCA9IGVudHJ5O1xuICAgIH1cbiAgICB0aGlzLnRhaWwgPSBlbnRyeTtcbiAgICB0aGlzLnNpemUrKztcbiAgfVxuICBlbnRyeS52YWx1ZSA9IHZhbHVlO1xuXG4gIHJldHVybiByZW1vdmVkO1xufTtcblxuLyoqXG4gKiBQdXJnZSB0aGUgbGVhc3QgcmVjZW50bHkgdXNlZCAob2xkZXN0KSBlbnRyeSBmcm9tIHRoZVxuICogY2FjaGUuIFJldHVybnMgdGhlIHJlbW92ZWQgZW50cnkgb3IgdW5kZWZpbmVkIGlmIHRoZVxuICogY2FjaGUgd2FzIGVtcHR5LlxuICovXG5cbnAuc2hpZnQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBlbnRyeSA9IHRoaXMuaGVhZDtcbiAgaWYgKGVudHJ5KSB7XG4gICAgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5ld2VyO1xuICAgIHRoaXMuaGVhZC5vbGRlciA9IHVuZGVmaW5lZDtcbiAgICBlbnRyeS5uZXdlciA9IGVudHJ5Lm9sZGVyID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2tleW1hcFtlbnRyeS5rZXldID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2l6ZS0tO1xuICB9XG4gIHJldHVybiBlbnRyeTtcbn07XG5cbi8qKlxuICogR2V0IGFuZCByZWdpc3RlciByZWNlbnQgdXNlIG9mIDxrZXk+LiBSZXR1cm5zIHRoZSB2YWx1ZVxuICogYXNzb2NpYXRlZCB3aXRoIDxrZXk+IG9yIHVuZGVmaW5lZCBpZiBub3QgaW4gY2FjaGUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHtCb29sZWFufSByZXR1cm5FbnRyeVxuICogQHJldHVybiB7RW50cnl8Kn1cbiAqL1xuXG5wLmdldCA9IGZ1bmN0aW9uIChrZXksIHJldHVybkVudHJ5KSB7XG4gIHZhciBlbnRyeSA9IHRoaXMuX2tleW1hcFtrZXldO1xuICBpZiAoZW50cnkgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICBpZiAoZW50cnkgPT09IHRoaXMudGFpbCkge1xuICAgIHJldHVybiByZXR1cm5FbnRyeSA/IGVudHJ5IDogZW50cnkudmFsdWU7XG4gIH1cbiAgLy8gSEVBRC0tLS0tLS0tLS0tLS0tVEFJTFxuICAvLyAgIDwub2xkZXIgICAubmV3ZXI+XG4gIC8vICA8LS0tIGFkZCBkaXJlY3Rpb24gLS1cbiAgLy8gICBBICBCICBDICA8RD4gIEVcbiAgaWYgKGVudHJ5Lm5ld2VyKSB7XG4gICAgaWYgKGVudHJ5ID09PSB0aGlzLmhlYWQpIHtcbiAgICAgIHRoaXMuaGVhZCA9IGVudHJ5Lm5ld2VyO1xuICAgIH1cbiAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyOyAvLyBDIDwtLSBFLlxuICB9XG4gIGlmIChlbnRyeS5vbGRlcikge1xuICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gZW50cnkubmV3ZXI7IC8vIEMuIC0tPiBFXG4gIH1cbiAgZW50cnkubmV3ZXIgPSB1bmRlZmluZWQ7IC8vIEQgLS14XG4gIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsOyAvLyBELiAtLT4gRVxuICBpZiAodGhpcy50YWlsKSB7XG4gICAgdGhpcy50YWlsLm5ld2VyID0gZW50cnk7IC8vIEUuIDwtLSBEXG4gIH1cbiAgdGhpcy50YWlsID0gZW50cnk7XG4gIHJldHVybiByZXR1cm5FbnRyeSA/IGVudHJ5IDogZW50cnkudmFsdWU7XG59O1xuXG52YXIgY2FjaGUkMSA9IG5ldyBDYWNoZSgxMDAwKTtcbnZhciBmaWx0ZXJUb2tlblJFID0gL1teXFxzJ1wiXSt8J1teJ10qJ3xcIlteXCJdKlwiL2c7XG52YXIgcmVzZXJ2ZWRBcmdSRSA9IC9eaW4kfF4tP1xcZCsvO1xuXG4vKipcbiAqIFBhcnNlciBzdGF0ZVxuICovXG5cbnZhciBzdHI7XG52YXIgZGlyO1xudmFyIGM7XG52YXIgcHJldjtcbnZhciBpO1xudmFyIGw7XG52YXIgbGFzdEZpbHRlckluZGV4O1xudmFyIGluU2luZ2xlO1xudmFyIGluRG91YmxlO1xudmFyIGN1cmx5O1xudmFyIHNxdWFyZTtcbnZhciBwYXJlbjtcbi8qKlxuICogUHVzaCBhIGZpbHRlciB0byB0aGUgY3VycmVudCBkaXJlY3RpdmUgb2JqZWN0XG4gKi9cblxuZnVuY3Rpb24gcHVzaEZpbHRlcigpIHtcbiAgdmFyIGV4cCA9IHN0ci5zbGljZShsYXN0RmlsdGVySW5kZXgsIGkpLnRyaW0oKTtcbiAgdmFyIGZpbHRlcjtcbiAgaWYgKGV4cCkge1xuICAgIGZpbHRlciA9IHt9O1xuICAgIHZhciB0b2tlbnMgPSBleHAubWF0Y2goZmlsdGVyVG9rZW5SRSk7XG4gICAgZmlsdGVyLm5hbWUgPSB0b2tlbnNbMF07XG4gICAgaWYgKHRva2Vucy5sZW5ndGggPiAxKSB7XG4gICAgICBmaWx0ZXIuYXJncyA9IHRva2Vucy5zbGljZSgxKS5tYXAocHJvY2Vzc0ZpbHRlckFyZyk7XG4gICAgfVxuICB9XG4gIGlmIChmaWx0ZXIpIHtcbiAgICAoZGlyLmZpbHRlcnMgPSBkaXIuZmlsdGVycyB8fCBbXSkucHVzaChmaWx0ZXIpO1xuICB9XG4gIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGFyZ3VtZW50IGlzIGR5bmFtaWMgYW5kIHN0cmlwIHF1b3Rlcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYXJnXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gcHJvY2Vzc0ZpbHRlckFyZyhhcmcpIHtcbiAgaWYgKHJlc2VydmVkQXJnUkUudGVzdChhcmcpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiB0b051bWJlcihhcmcpLFxuICAgICAgZHluYW1pYzogZmFsc2VcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHZhciBzdHJpcHBlZCA9IHN0cmlwUXVvdGVzKGFyZyk7XG4gICAgdmFyIGR5bmFtaWMgPSBzdHJpcHBlZCA9PT0gYXJnO1xuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZTogZHluYW1pYyA/IGFyZyA6IHN0cmlwcGVkLFxuICAgICAgZHluYW1pYzogZHluYW1pY1xuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZSBhIGRpcmVjdGl2ZSB2YWx1ZSBhbmQgZXh0cmFjdCB0aGUgZXhwcmVzc2lvblxuICogYW5kIGl0cyBmaWx0ZXJzIGludG8gYSBkZXNjcmlwdG9yLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogXCJhICsgMSB8IHVwcGVyY2FzZVwiIHdpbGwgeWllbGQ6XG4gKiB7XG4gKiAgIGV4cHJlc3Npb246ICdhICsgMScsXG4gKiAgIGZpbHRlcnM6IFtcbiAqICAgICB7IG5hbWU6ICd1cHBlcmNhc2UnLCBhcmdzOiBudWxsIH1cbiAqICAgXVxuICogfVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VEaXJlY3RpdmUocykge1xuICB2YXIgaGl0ID0gY2FjaGUkMS5nZXQocyk7XG4gIGlmIChoaXQpIHtcbiAgICByZXR1cm4gaGl0O1xuICB9XG5cbiAgLy8gcmVzZXQgcGFyc2VyIHN0YXRlXG4gIHN0ciA9IHM7XG4gIGluU2luZ2xlID0gaW5Eb3VibGUgPSBmYWxzZTtcbiAgY3VybHkgPSBzcXVhcmUgPSBwYXJlbiA9IDA7XG4gIGxhc3RGaWx0ZXJJbmRleCA9IDA7XG4gIGRpciA9IHt9O1xuXG4gIGZvciAoaSA9IDAsIGwgPSBzdHIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgcHJldiA9IGM7XG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIGlmIChpblNpbmdsZSkge1xuICAgICAgLy8gY2hlY2sgc2luZ2xlIHF1b3RlXG4gICAgICBpZiAoYyA9PT0gMHgyNyAmJiBwcmV2ICE9PSAweDVDKSBpblNpbmdsZSA9ICFpblNpbmdsZTtcbiAgICB9IGVsc2UgaWYgKGluRG91YmxlKSB7XG4gICAgICAvLyBjaGVjayBkb3VibGUgcXVvdGVcbiAgICAgIGlmIChjID09PSAweDIyICYmIHByZXYgIT09IDB4NUMpIGluRG91YmxlID0gIWluRG91YmxlO1xuICAgIH0gZWxzZSBpZiAoYyA9PT0gMHg3QyAmJiAvLyBwaXBlXG4gICAgc3RyLmNoYXJDb2RlQXQoaSArIDEpICE9PSAweDdDICYmIHN0ci5jaGFyQ29kZUF0KGkgLSAxKSAhPT0gMHg3Qykge1xuICAgICAgaWYgKGRpci5leHByZXNzaW9uID09IG51bGwpIHtcbiAgICAgICAgLy8gZmlyc3QgZmlsdGVyLCBlbmQgb2YgZXhwcmVzc2lvblxuICAgICAgICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTtcbiAgICAgICAgZGlyLmV4cHJlc3Npb24gPSBzdHIuc2xpY2UoMCwgaSkudHJpbSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYWxyZWFkeSBoYXMgZmlsdGVyXG4gICAgICAgIHB1c2hGaWx0ZXIoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoIChjKSB7XG4gICAgICAgIGNhc2UgMHgyMjpcbiAgICAgICAgICBpbkRvdWJsZSA9IHRydWU7YnJlYWs7IC8vIFwiXG4gICAgICAgIGNhc2UgMHgyNzpcbiAgICAgICAgICBpblNpbmdsZSA9IHRydWU7YnJlYWs7IC8vICdcbiAgICAgICAgY2FzZSAweDI4OlxuICAgICAgICAgIHBhcmVuKys7YnJlYWs7IC8vIChcbiAgICAgICAgY2FzZSAweDI5OlxuICAgICAgICAgIHBhcmVuLS07YnJlYWs7IC8vIClcbiAgICAgICAgY2FzZSAweDVCOlxuICAgICAgICAgIHNxdWFyZSsrO2JyZWFrOyAvLyBbXG4gICAgICAgIGNhc2UgMHg1RDpcbiAgICAgICAgICBzcXVhcmUtLTticmVhazsgLy8gXVxuICAgICAgICBjYXNlIDB4N0I6XG4gICAgICAgICAgY3VybHkrKzticmVhazsgLy8ge1xuICAgICAgICBjYXNlIDB4N0Q6XG4gICAgICAgICAgY3VybHktLTticmVhazsgLy8gfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChkaXIuZXhwcmVzc2lvbiA9PSBudWxsKSB7XG4gICAgZGlyLmV4cHJlc3Npb24gPSBzdHIuc2xpY2UoMCwgaSkudHJpbSgpO1xuICB9IGVsc2UgaWYgKGxhc3RGaWx0ZXJJbmRleCAhPT0gMCkge1xuICAgIHB1c2hGaWx0ZXIoKTtcbiAgfVxuXG4gIGNhY2hlJDEucHV0KHMsIGRpcik7XG4gIHJldHVybiBkaXI7XG59XG5cbnZhciBkaXJlY3RpdmUgPSBPYmplY3QuZnJlZXplKHtcbiAgcGFyc2VEaXJlY3RpdmU6IHBhcnNlRGlyZWN0aXZlXG59KTtcblxudmFyIHJlZ2V4RXNjYXBlUkUgPSAvWy0uKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nO1xudmFyIGNhY2hlID0gdW5kZWZpbmVkO1xudmFyIHRhZ1JFID0gdW5kZWZpbmVkO1xudmFyIGh0bWxSRSA9IHVuZGVmaW5lZDtcbi8qKlxuICogRXNjYXBlIGEgc3RyaW5nIHNvIGl0IGNhbiBiZSB1c2VkIGluIGEgUmVnRXhwXG4gKiBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKi9cblxuZnVuY3Rpb24gZXNjYXBlUmVnZXgoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShyZWdleEVzY2FwZVJFLCAnXFxcXCQmJyk7XG59XG5cbmZ1bmN0aW9uIGNvbXBpbGVSZWdleCgpIHtcbiAgdmFyIG9wZW4gPSBlc2NhcGVSZWdleChjb25maWcuZGVsaW1pdGVyc1swXSk7XG4gIHZhciBjbG9zZSA9IGVzY2FwZVJlZ2V4KGNvbmZpZy5kZWxpbWl0ZXJzWzFdKTtcbiAgdmFyIHVuc2FmZU9wZW4gPSBlc2NhcGVSZWdleChjb25maWcudW5zYWZlRGVsaW1pdGVyc1swXSk7XG4gIHZhciB1bnNhZmVDbG9zZSA9IGVzY2FwZVJlZ2V4KGNvbmZpZy51bnNhZmVEZWxpbWl0ZXJzWzFdKTtcbiAgdGFnUkUgPSBuZXcgUmVnRXhwKHVuc2FmZU9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIHVuc2FmZUNsb3NlICsgJ3wnICsgb3BlbiArICcoKD86LnxcXFxcbikrPyknICsgY2xvc2UsICdnJyk7XG4gIGh0bWxSRSA9IG5ldyBSZWdFeHAoJ14nICsgdW5zYWZlT3BlbiArICcoKD86LnxcXFxcbikrPyknICsgdW5zYWZlQ2xvc2UgKyAnJCcpO1xuICAvLyByZXNldCBjYWNoZVxuICBjYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHRlbXBsYXRlIHRleHQgc3RyaW5nIGludG8gYW4gYXJyYXkgb2YgdG9rZW5zLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gKiBAcmV0dXJuIHtBcnJheTxPYmplY3Q+IHwgbnVsbH1cbiAqICAgICAgICAgICAgICAgLSB7U3RyaW5nfSB0eXBlXG4gKiAgICAgICAgICAgICAgIC0ge1N0cmluZ30gdmFsdWVcbiAqICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW2h0bWxdXG4gKiAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtvbmVUaW1lXVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlVGV4dCh0ZXh0KSB7XG4gIGlmICghY2FjaGUpIHtcbiAgICBjb21waWxlUmVnZXgoKTtcbiAgfVxuICB2YXIgaGl0ID0gY2FjaGUuZ2V0KHRleHQpO1xuICBpZiAoaGl0KSB7XG4gICAgcmV0dXJuIGhpdDtcbiAgfVxuICBpZiAoIXRhZ1JFLnRlc3QodGV4dCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICB2YXIgdG9rZW5zID0gW107XG4gIHZhciBsYXN0SW5kZXggPSB0YWdSRS5sYXN0SW5kZXggPSAwO1xuICB2YXIgbWF0Y2gsIGluZGV4LCBodG1sLCB2YWx1ZSwgZmlyc3QsIG9uZVRpbWU7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gIHdoaWxlIChtYXRjaCA9IHRhZ1JFLmV4ZWModGV4dCkpIHtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgaW5kZXggPSBtYXRjaC5pbmRleDtcbiAgICAvLyBwdXNoIHRleHQgdG9rZW5cbiAgICBpZiAoaW5kZXggPiBsYXN0SW5kZXgpIHtcbiAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgdmFsdWU6IHRleHQuc2xpY2UobGFzdEluZGV4LCBpbmRleClcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyB0YWcgdG9rZW5cbiAgICBodG1sID0gaHRtbFJFLnRlc3QobWF0Y2hbMF0pO1xuICAgIHZhbHVlID0gaHRtbCA/IG1hdGNoWzFdIDogbWF0Y2hbMl07XG4gICAgZmlyc3QgPSB2YWx1ZS5jaGFyQ29kZUF0KDApO1xuICAgIG9uZVRpbWUgPSBmaXJzdCA9PT0gNDI7IC8vICpcbiAgICB2YWx1ZSA9IG9uZVRpbWUgPyB2YWx1ZS5zbGljZSgxKSA6IHZhbHVlO1xuICAgIHRva2Vucy5wdXNoKHtcbiAgICAgIHRhZzogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2YWx1ZS50cmltKCksXG4gICAgICBodG1sOiBodG1sLFxuICAgICAgb25lVGltZTogb25lVGltZVxuICAgIH0pO1xuICAgIGxhc3RJbmRleCA9IGluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuICB9XG4gIGlmIChsYXN0SW5kZXggPCB0ZXh0Lmxlbmd0aCkge1xuICAgIHRva2Vucy5wdXNoKHtcbiAgICAgIHZhbHVlOiB0ZXh0LnNsaWNlKGxhc3RJbmRleClcbiAgICB9KTtcbiAgfVxuICBjYWNoZS5wdXQodGV4dCwgdG9rZW5zKTtcbiAgcmV0dXJuIHRva2Vucztcbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBsaXN0IG9mIHRva2VucyBpbnRvIGFuIGV4cHJlc3Npb24uXG4gKiBlLmcuIHRva2VucyBwYXJzZWQgZnJvbSAnYSB7e2J9fSBjJyBjYW4gYmUgc2VyaWFsaXplZFxuICogaW50byBvbmUgc2luZ2xlIGV4cHJlc3Npb24gYXMgJ1wiYSBcIiArIGIgKyBcIiBjXCInLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xuICogQHBhcmFtIHtWdWV9IFt2bV1cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiB0b2tlbnNUb0V4cCh0b2tlbnMsIHZtKSB7XG4gIGlmICh0b2tlbnMubGVuZ3RoID4gMSkge1xuICAgIHJldHVybiB0b2tlbnMubWFwKGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgcmV0dXJuIGZvcm1hdFRva2VuKHRva2VuLCB2bSk7XG4gICAgfSkuam9pbignKycpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmb3JtYXRUb2tlbih0b2tlbnNbMF0sIHZtLCB0cnVlKTtcbiAgfVxufVxuXG4vKipcbiAqIEZvcm1hdCBhIHNpbmdsZSB0b2tlbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdG9rZW5cbiAqIEBwYXJhbSB7VnVlfSBbdm1dXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtzaW5nbGVdXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0VG9rZW4odG9rZW4sIHZtLCBzaW5nbGUpIHtcbiAgcmV0dXJuIHRva2VuLnRhZyA/IHRva2VuLm9uZVRpbWUgJiYgdm0gPyAnXCInICsgdm0uJGV2YWwodG9rZW4udmFsdWUpICsgJ1wiJyA6IGlubGluZUZpbHRlcnModG9rZW4udmFsdWUsIHNpbmdsZSkgOiAnXCInICsgdG9rZW4udmFsdWUgKyAnXCInO1xufVxuXG4vKipcbiAqIEZvciBhbiBhdHRyaWJ1dGUgd2l0aCBtdWx0aXBsZSBpbnRlcnBvbGF0aW9uIHRhZ3MsXG4gKiBlLmcuIGF0dHI9XCJzb21lLXt7dGhpbmcgfCBmaWx0ZXJ9fVwiLCBpbiBvcmRlciB0byBjb21iaW5lXG4gKiB0aGUgd2hvbGUgdGhpbmcgaW50byBhIHNpbmdsZSB3YXRjaGFibGUgZXhwcmVzc2lvbiwgd2VcbiAqIGhhdmUgdG8gaW5saW5lIHRob3NlIGZpbHRlcnMuIFRoaXMgZnVuY3Rpb24gZG9lcyBleGFjdGx5XG4gKiB0aGF0LiBUaGlzIGlzIGEgYml0IGhhY2t5IGJ1dCBpdCBhdm9pZHMgaGVhdnkgY2hhbmdlc1xuICogdG8gZGlyZWN0aXZlIHBhcnNlciBhbmQgd2F0Y2hlciBtZWNoYW5pc20uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHBhcmFtIHtCb29sZWFufSBzaW5nbGVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG52YXIgZmlsdGVyUkUgPSAvW158XVxcfFtefF0vO1xuZnVuY3Rpb24gaW5saW5lRmlsdGVycyhleHAsIHNpbmdsZSkge1xuICBpZiAoIWZpbHRlclJFLnRlc3QoZXhwKSkge1xuICAgIHJldHVybiBzaW5nbGUgPyBleHAgOiAnKCcgKyBleHAgKyAnKSc7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGRpciA9IHBhcnNlRGlyZWN0aXZlKGV4cCk7XG4gICAgaWYgKCFkaXIuZmlsdGVycykge1xuICAgICAgcmV0dXJuICcoJyArIGV4cCArICcpJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICd0aGlzLl9hcHBseUZpbHRlcnMoJyArIGRpci5leHByZXNzaW9uICsgLy8gdmFsdWVcbiAgICAgICcsbnVsbCwnICsgLy8gb2xkVmFsdWUgKG51bGwgZm9yIHJlYWQpXG4gICAgICBKU09OLnN0cmluZ2lmeShkaXIuZmlsdGVycykgKyAvLyBmaWx0ZXIgZGVzY3JpcHRvcnNcbiAgICAgICcsZmFsc2UpJzsgLy8gd3JpdGU/XG4gICAgfVxuICB9XG59XG5cbnZhciB0ZXh0ID0gT2JqZWN0LmZyZWV6ZSh7XG4gIGNvbXBpbGVSZWdleDogY29tcGlsZVJlZ2V4LFxuICBwYXJzZVRleHQ6IHBhcnNlVGV4dCxcbiAgdG9rZW5zVG9FeHA6IHRva2Vuc1RvRXhwXG59KTtcblxudmFyIGRlbGltaXRlcnMgPSBbJ3t7JywgJ319J107XG52YXIgdW5zYWZlRGVsaW1pdGVycyA9IFsne3t7JywgJ319fSddO1xuXG52YXIgY29uZmlnID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHByaW50IGRlYnVnIG1lc3NhZ2VzLlxuICAgKiBBbHNvIGVuYWJsZXMgc3RhY2sgdHJhY2UgZm9yIHdhcm5pbmdzLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgZGVidWc6IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHN1cHByZXNzIHdhcm5pbmdzLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgc2lsZW50OiBmYWxzZSxcblxuICAvKipcbiAgICogV2hldGhlciB0byB1c2UgYXN5bmMgcmVuZGVyaW5nLlxuICAgKi9cblxuICBhc3luYzogdHJ1ZSxcblxuICAvKipcbiAgICogV2hldGhlciB0byB3YXJuIGFnYWluc3QgZXJyb3JzIGNhdWdodCB3aGVuIGV2YWx1YXRpbmdcbiAgICogZXhwcmVzc2lvbnMuXG4gICAqL1xuXG4gIHdhcm5FeHByZXNzaW9uRXJyb3JzOiB0cnVlLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGFsbG93IGRldnRvb2xzIGluc3BlY3Rpb24uXG4gICAqIERpc2FibGVkIGJ5IGRlZmF1bHQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG4gICAqL1xuXG4gIGRldnRvb2xzOiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nLFxuXG4gIC8qKlxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIGluZGljYXRlIHRoZSBkZWxpbWl0ZXJzIGhhdmUgYmVlblxuICAgKiBjaGFuZ2VkLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgX2RlbGltaXRlcnNDaGFuZ2VkOiB0cnVlLFxuXG4gIC8qKlxuICAgKiBMaXN0IG9mIGFzc2V0IHR5cGVzIHRoYXQgYSBjb21wb25lbnQgY2FuIG93bi5cbiAgICpcbiAgICogQHR5cGUge0FycmF5fVxuICAgKi9cblxuICBfYXNzZXRUeXBlczogWydjb21wb25lbnQnLCAnZGlyZWN0aXZlJywgJ2VsZW1lbnREaXJlY3RpdmUnLCAnZmlsdGVyJywgJ3RyYW5zaXRpb24nLCAncGFydGlhbCddLFxuXG4gIC8qKlxuICAgKiBwcm9wIGJpbmRpbmcgbW9kZXNcbiAgICovXG5cbiAgX3Byb3BCaW5kaW5nTW9kZXM6IHtcbiAgICBPTkVfV0FZOiAwLFxuICAgIFRXT19XQVk6IDEsXG4gICAgT05FX1RJTUU6IDJcbiAgfSxcblxuICAvKipcbiAgICogTWF4IGNpcmN1bGFyIHVwZGF0ZXMgYWxsb3dlZCBpbiBhIGJhdGNoZXIgZmx1c2ggY3ljbGUuXG4gICAqL1xuXG4gIF9tYXhVcGRhdGVDb3VudDogMTAwXG5cbn0sIHtcbiAgZGVsaW1pdGVyczogeyAvKipcbiAgICAgICAgICAgICAgICAgKiBJbnRlcnBvbGF0aW9uIGRlbGltaXRlcnMuIENoYW5naW5nIHRoZXNlIHdvdWxkIHRyaWdnZXJcbiAgICAgICAgICAgICAgICAgKiB0aGUgdGV4dCBwYXJzZXIgdG8gcmUtY29tcGlsZSB0aGUgcmVndWxhciBleHByZXNzaW9ucy5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEB0eXBlIHtBcnJheTxTdHJpbmc+fVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gZGVsaW1pdGVycztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuICAgICAgZGVsaW1pdGVycyA9IHZhbDtcbiAgICAgIGNvbXBpbGVSZWdleCgpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgdW5zYWZlRGVsaW1pdGVyczoge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHVuc2FmZURlbGltaXRlcnM7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcbiAgICAgIHVuc2FmZURlbGltaXRlcnMgPSB2YWw7XG4gICAgICBjb21waWxlUmVnZXgoKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH1cbn0pO1xuXG52YXIgd2FybiA9IHVuZGVmaW5lZDtcbnZhciBmb3JtYXRDb21wb25lbnROYW1lID0gdW5kZWZpbmVkO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBoYXNDb25zb2xlID0gdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnO1xuXG4gICAgd2FybiA9IGZ1bmN0aW9uIChtc2csIHZtKSB7XG4gICAgICBpZiAoaGFzQ29uc29sZSAmJiAhY29uZmlnLnNpbGVudCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbVnVlIHdhcm5dOiAnICsgbXNnICsgKHZtID8gZm9ybWF0Q29tcG9uZW50TmFtZSh2bSkgOiAnJykpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmb3JtYXRDb21wb25lbnROYW1lID0gZnVuY3Rpb24gKHZtKSB7XG4gICAgICB2YXIgbmFtZSA9IHZtLl9pc1Z1ZSA/IHZtLiRvcHRpb25zLm5hbWUgOiB2bS5uYW1lO1xuICAgICAgcmV0dXJuIG5hbWUgPyAnIChmb3VuZCBpbiBjb21wb25lbnQ6IDwnICsgaHlwaGVuYXRlKG5hbWUpICsgJz4pJyA6ICcnO1xuICAgIH07XG4gIH0pKCk7XG59XG5cbi8qKlxuICogQXBwZW5kIHdpdGggdHJhbnNpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxuZnVuY3Rpb24gYXBwZW5kV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gIGFwcGx5VHJhbnNpdGlvbihlbCwgMSwgZnVuY3Rpb24gKCkge1xuICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XG4gIH0sIHZtLCBjYik7XG59XG5cbi8qKlxuICogSW5zZXJ0QmVmb3JlIHdpdGggdHJhbnNpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxuZnVuY3Rpb24gYmVmb3JlV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gIGFwcGx5VHJhbnNpdGlvbihlbCwgMSwgZnVuY3Rpb24gKCkge1xuICAgIGJlZm9yZShlbCwgdGFyZ2V0KTtcbiAgfSwgdm0sIGNiKTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgd2l0aCB0cmFuc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbmZ1bmN0aW9uIHJlbW92ZVdpdGhUcmFuc2l0aW9uKGVsLCB2bSwgY2IpIHtcbiAgYXBwbHlUcmFuc2l0aW9uKGVsLCAtMSwgZnVuY3Rpb24gKCkge1xuICAgIHJlbW92ZShlbCk7XG4gIH0sIHZtLCBjYik7XG59XG5cbi8qKlxuICogQXBwbHkgdHJhbnNpdGlvbnMgd2l0aCBhbiBvcGVyYXRpb24gY2FsbGJhY2suXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtOdW1iZXJ9IGRpcmVjdGlvblxuICogICAgICAgICAgICAgICAgICAxOiBlbnRlclxuICogICAgICAgICAgICAgICAgIC0xOiBsZWF2ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSB0aGUgYWN0dWFsIERPTSBvcGVyYXRpb25cbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbmZ1bmN0aW9uIGFwcGx5VHJhbnNpdGlvbihlbCwgZGlyZWN0aW9uLCBvcCwgdm0sIGNiKSB7XG4gIHZhciB0cmFuc2l0aW9uID0gZWwuX192X3RyYW5zO1xuICBpZiAoIXRyYW5zaXRpb24gfHxcbiAgLy8gc2tpcCBpZiB0aGVyZSBhcmUgbm8ganMgaG9va3MgYW5kIENTUyB0cmFuc2l0aW9uIGlzXG4gIC8vIG5vdCBzdXBwb3J0ZWRcbiAgIXRyYW5zaXRpb24uaG9va3MgJiYgIXRyYW5zaXRpb25FbmRFdmVudCB8fFxuICAvLyBza2lwIHRyYW5zaXRpb25zIGZvciBpbml0aWFsIGNvbXBpbGVcbiAgIXZtLl9pc0NvbXBpbGVkIHx8XG4gIC8vIGlmIHRoZSB2bSBpcyBiZWluZyBtYW5pcHVsYXRlZCBieSBhIHBhcmVudCBkaXJlY3RpdmVcbiAgLy8gZHVyaW5nIHRoZSBwYXJlbnQncyBjb21waWxhdGlvbiBwaGFzZSwgc2tpcCB0aGVcbiAgLy8gYW5pbWF0aW9uLlxuICB2bS4kcGFyZW50ICYmICF2bS4kcGFyZW50Ll9pc0NvbXBpbGVkKSB7XG4gICAgb3AoKTtcbiAgICBpZiAoY2IpIGNiKCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBhY3Rpb24gPSBkaXJlY3Rpb24gPiAwID8gJ2VudGVyJyA6ICdsZWF2ZSc7XG4gIHRyYW5zaXRpb25bYWN0aW9uXShvcCwgY2IpO1xufVxuXG52YXIgdHJhbnNpdGlvbiA9IE9iamVjdC5mcmVlemUoe1xuICBhcHBlbmRXaXRoVHJhbnNpdGlvbjogYXBwZW5kV2l0aFRyYW5zaXRpb24sXG4gIGJlZm9yZVdpdGhUcmFuc2l0aW9uOiBiZWZvcmVXaXRoVHJhbnNpdGlvbixcbiAgcmVtb3ZlV2l0aFRyYW5zaXRpb246IHJlbW92ZVdpdGhUcmFuc2l0aW9uLFxuICBhcHBseVRyYW5zaXRpb246IGFwcGx5VHJhbnNpdGlvblxufSk7XG5cbi8qKlxuICogUXVlcnkgYW4gZWxlbWVudCBzZWxlY3RvciBpZiBpdCdzIG5vdCBhbiBlbGVtZW50IGFscmVhZHkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKi9cblxuZnVuY3Rpb24gcXVlcnkoZWwpIHtcbiAgaWYgKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHtcbiAgICB2YXIgc2VsZWN0b3IgPSBlbDtcbiAgICBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpO1xuICAgIGlmICghZWwpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQ2Fubm90IGZpbmQgZWxlbWVudDogJyArIHNlbGVjdG9yKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGVsO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgbm9kZSBpcyBpbiB0aGUgZG9jdW1lbnQuXG4gKiBOb3RlOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMgc2hvdWxkIHdvcmsgaGVyZVxuICogYnV0IGFsd2F5cyByZXR1cm5zIGZhbHNlIGZvciBjb21tZW50IG5vZGVzIGluIHBoYW50b21qcyxcbiAqIG1ha2luZyB1bml0IHRlc3RzIGRpZmZpY3VsdC4gVGhpcyBpcyBmaXhlZCBieSBkb2luZyB0aGVcbiAqIGNvbnRhaW5zKCkgY2hlY2sgb24gdGhlIG5vZGUncyBwYXJlbnROb2RlIGluc3RlYWQgb2ZcbiAqIHRoZSBub2RlIGl0c2VsZi5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaW5Eb2Mobm9kZSkge1xuICBpZiAoIW5vZGUpIHJldHVybiBmYWxzZTtcbiAgdmFyIGRvYyA9IG5vZGUub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gIHJldHVybiBkb2MgPT09IG5vZGUgfHwgZG9jID09PSBwYXJlbnQgfHwgISEocGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSA9PT0gMSAmJiBkb2MuY29udGFpbnMocGFyZW50KSk7XG59XG5cbi8qKlxuICogR2V0IGFuZCByZW1vdmUgYW4gYXR0cmlidXRlIGZyb20gYSBub2RlLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtTdHJpbmd9IF9hdHRyXG4gKi9cblxuZnVuY3Rpb24gZ2V0QXR0cihub2RlLCBfYXR0cikge1xuICB2YXIgdmFsID0gbm9kZS5nZXRBdHRyaWJ1dGUoX2F0dHIpO1xuICBpZiAodmFsICE9PSBudWxsKSB7XG4gICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoX2F0dHIpO1xuICB9XG4gIHJldHVybiB2YWw7XG59XG5cbi8qKlxuICogR2V0IGFuIGF0dHJpYnV0ZSB3aXRoIGNvbG9uIG9yIHYtYmluZDogcHJlZml4LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge1N0cmluZ3xudWxsfVxuICovXG5cbmZ1bmN0aW9uIGdldEJpbmRBdHRyKG5vZGUsIG5hbWUpIHtcbiAgdmFyIHZhbCA9IGdldEF0dHIobm9kZSwgJzonICsgbmFtZSk7XG4gIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICB2YWwgPSBnZXRBdHRyKG5vZGUsICd2LWJpbmQ6JyArIG5hbWUpO1xuICB9XG4gIHJldHVybiB2YWw7XG59XG5cbi8qKlxuICogQ2hlY2sgdGhlIHByZXNlbmNlIG9mIGEgYmluZCBhdHRyaWJ1dGUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBoYXNCaW5kQXR0cihub2RlLCBuYW1lKSB7XG4gIHJldHVybiBub2RlLmhhc0F0dHJpYnV0ZShuYW1lKSB8fCBub2RlLmhhc0F0dHJpYnV0ZSgnOicgKyBuYW1lKSB8fCBub2RlLmhhc0F0dHJpYnV0ZSgndi1iaW5kOicgKyBuYW1lKTtcbn1cblxuLyoqXG4gKiBJbnNlcnQgZWwgYmVmb3JlIHRhcmdldFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKi9cblxuZnVuY3Rpb24gYmVmb3JlKGVsLCB0YXJnZXQpIHtcbiAgdGFyZ2V0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsLCB0YXJnZXQpO1xufVxuXG4vKipcbiAqIEluc2VydCBlbCBhZnRlciB0YXJnZXRcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICovXG5cbmZ1bmN0aW9uIGFmdGVyKGVsLCB0YXJnZXQpIHtcbiAgaWYgKHRhcmdldC5uZXh0U2libGluZykge1xuICAgIGJlZm9yZShlbCwgdGFyZ2V0Lm5leHRTaWJsaW5nKTtcbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChlbCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgZWwgZnJvbSBET01cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKi9cblxuZnVuY3Rpb24gcmVtb3ZlKGVsKSB7XG4gIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xufVxuXG4vKipcbiAqIFByZXBlbmQgZWwgdG8gdGFyZ2V0XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqL1xuXG5mdW5jdGlvbiBwcmVwZW5kKGVsLCB0YXJnZXQpIHtcbiAgaWYgKHRhcmdldC5maXJzdENoaWxkKSB7XG4gICAgYmVmb3JlKGVsLCB0YXJnZXQuZmlyc3RDaGlsZCk7XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlcGxhY2UgdGFyZ2V0IHdpdGggZWxcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICovXG5cbmZ1bmN0aW9uIHJlcGxhY2UodGFyZ2V0LCBlbCkge1xuICB2YXIgcGFyZW50ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG4gIGlmIChwYXJlbnQpIHtcbiAgICBwYXJlbnQucmVwbGFjZUNoaWxkKGVsLCB0YXJnZXQpO1xuICB9XG59XG5cbi8qKlxuICogQWRkIGV2ZW50IGxpc3RlbmVyIHNob3J0aGFuZC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VDYXB0dXJlXVxuICovXG5cbmZ1bmN0aW9uIG9uKGVsLCBldmVudCwgY2IsIHVzZUNhcHR1cmUpIHtcbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2IsIHVzZUNhcHR1cmUpO1xufVxuXG4vKipcbiAqIFJlbW92ZSBldmVudCBsaXN0ZW5lciBzaG9ydGhhbmQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICovXG5cbmZ1bmN0aW9uIG9mZihlbCwgZXZlbnQsIGNiKSB7XG4gIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGNiKTtcbn1cblxuLyoqXG4gKiBGb3IgSUU5IGNvbXBhdDogd2hlbiBib3RoIGNsYXNzIGFuZCA6Y2xhc3MgYXJlIHByZXNlbnRcbiAqIGdldEF0dHJpYnV0ZSgnY2xhc3MnKSByZXR1cm5zIHdyb25nIHZhbHVlLi4uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGdldENsYXNzKGVsKSB7XG4gIHZhciBjbGFzc25hbWUgPSBlbC5jbGFzc05hbWU7XG4gIGlmICh0eXBlb2YgY2xhc3NuYW1lID09PSAnb2JqZWN0Jykge1xuICAgIGNsYXNzbmFtZSA9IGNsYXNzbmFtZS5iYXNlVmFsIHx8ICcnO1xuICB9XG4gIHJldHVybiBjbGFzc25hbWU7XG59XG5cbi8qKlxuICogSW4gSUU5LCBzZXRBdHRyaWJ1dGUoJ2NsYXNzJykgd2lsbCByZXN1bHQgaW4gZW1wdHkgY2xhc3NcbiAqIGlmIHRoZSBlbGVtZW50IGFsc28gaGFzIHRoZSA6Y2xhc3MgYXR0cmlidXRlOyBIb3dldmVyIGluXG4gKiBQaGFudG9tSlMsIHNldHRpbmcgYGNsYXNzTmFtZWAgZG9lcyBub3Qgd29yayBvbiBTVkcgZWxlbWVudHMuLi5cbiAqIFNvIHdlIGhhdmUgdG8gZG8gYSBjb25kaXRpb25hbCBjaGVjayBoZXJlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcbiAqL1xuXG5mdW5jdGlvbiBzZXRDbGFzcyhlbCwgY2xzKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaXNJRTkgJiYgIS9zdmckLy50ZXN0KGVsLm5hbWVzcGFjZVVSSSkpIHtcbiAgICBlbC5jbGFzc05hbWUgPSBjbHM7XG4gIH0gZWxzZSB7XG4gICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNscyk7XG4gIH1cbn1cblxuLyoqXG4gKiBBZGQgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBJRSAmIFNWR1xuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcbiAqL1xuXG5mdW5jdGlvbiBhZGRDbGFzcyhlbCwgY2xzKSB7XG4gIGlmIChlbC5jbGFzc0xpc3QpIHtcbiAgICBlbC5jbGFzc0xpc3QuYWRkKGNscyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGN1ciA9ICcgJyArIGdldENsYXNzKGVsKSArICcgJztcbiAgICBpZiAoY3VyLmluZGV4T2YoJyAnICsgY2xzICsgJyAnKSA8IDApIHtcbiAgICAgIHNldENsYXNzKGVsLCAoY3VyICsgY2xzKS50cmltKCkpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIElFICYgU1ZHXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuICovXG5cbmZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsLCBjbHMpIHtcbiAgaWYgKGVsLmNsYXNzTGlzdCkge1xuICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3VyID0gJyAnICsgZ2V0Q2xhc3MoZWwpICsgJyAnO1xuICAgIHZhciB0YXIgPSAnICcgKyBjbHMgKyAnICc7XG4gICAgd2hpbGUgKGN1ci5pbmRleE9mKHRhcikgPj0gMCkge1xuICAgICAgY3VyID0gY3VyLnJlcGxhY2UodGFyLCAnICcpO1xuICAgIH1cbiAgICBzZXRDbGFzcyhlbCwgY3VyLnRyaW0oKSk7XG4gIH1cbiAgaWYgKCFlbC5jbGFzc05hbWUpIHtcbiAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRyYWN0IHJhdyBjb250ZW50IGluc2lkZSBhbiBlbGVtZW50IGludG8gYSB0ZW1wb3JhcnlcbiAqIGNvbnRhaW5lciBkaXZcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGFzRnJhZ21lbnRcbiAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBleHRyYWN0Q29udGVudChlbCwgYXNGcmFnbWVudCkge1xuICB2YXIgY2hpbGQ7XG4gIHZhciByYXdDb250ZW50O1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGlzVGVtcGxhdGUoZWwpICYmIGlzRnJhZ21lbnQoZWwuY29udGVudCkpIHtcbiAgICBlbCA9IGVsLmNvbnRlbnQ7XG4gIH1cbiAgaWYgKGVsLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgIHRyaW1Ob2RlKGVsKTtcbiAgICByYXdDb250ZW50ID0gYXNGcmFnbWVudCA/IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgd2hpbGUgKGNoaWxkID0gZWwuZmlyc3RDaGlsZCkge1xuICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgICAgcmF3Q29udGVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgfVxuICB9XG4gIHJldHVybiByYXdDb250ZW50O1xufVxuXG4vKipcbiAqIFRyaW0gcG9zc2libGUgZW1wdHkgaGVhZC90YWlsIHRleHQgYW5kIGNvbW1lbnRcbiAqIG5vZGVzIGluc2lkZSBhIHBhcmVudC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqL1xuXG5mdW5jdGlvbiB0cmltTm9kZShub2RlKSB7XG4gIHZhciBjaGlsZDtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tc2VxdWVuY2VzICovXG4gIHdoaWxlICgoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcbiAgICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgfVxuICB3aGlsZSAoKGNoaWxkID0gbm9kZS5sYXN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcbiAgICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlIG5vLXNlcXVlbmNlcyAqL1xufVxuXG5mdW5jdGlvbiBpc1RyaW1tYWJsZShub2RlKSB7XG4gIHJldHVybiBub2RlICYmIChub2RlLm5vZGVUeXBlID09PSAzICYmICFub2RlLmRhdGEudHJpbSgpIHx8IG5vZGUubm9kZVR5cGUgPT09IDgpO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSB0ZW1wbGF0ZSB0YWcuXG4gKiBOb3RlIGlmIHRoZSB0ZW1wbGF0ZSBhcHBlYXJzIGluc2lkZSBhbiBTVkcgaXRzIHRhZ05hbWVcbiAqIHdpbGwgYmUgaW4gbG93ZXJjYXNlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqL1xuXG5mdW5jdGlvbiBpc1RlbXBsYXRlKGVsKSB7XG4gIHJldHVybiBlbC50YWdOYW1lICYmIGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RlbXBsYXRlJztcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gXCJhbmNob3JcIiBmb3IgcGVyZm9ybWluZyBkb20gaW5zZXJ0aW9uL3JlbW92YWxzLlxuICogVGhpcyBpcyB1c2VkIGluIGEgbnVtYmVyIG9mIHNjZW5hcmlvczpcbiAqIC0gZnJhZ21lbnQgaW5zdGFuY2VcbiAqIC0gdi1odG1sXG4gKiAtIHYtaWZcbiAqIC0gdi1mb3JcbiAqIC0gY29tcG9uZW50XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcGVyc2lzdCAtIElFIHRyYXNoZXMgZW1wdHkgdGV4dE5vZGVzIG9uXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZU5vZGUodHJ1ZSksIHNvIGluIGNlcnRhaW5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2VzIHRoZSBhbmNob3IgbmVlZHMgdG8gYmVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbi1lbXB0eSB0byBiZSBwZXJzaXN0ZWQgaW5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlcy5cbiAqIEByZXR1cm4ge0NvbW1lbnR8VGV4dH1cbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVBbmNob3IoY29udGVudCwgcGVyc2lzdCkge1xuICB2YXIgYW5jaG9yID0gY29uZmlnLmRlYnVnID8gZG9jdW1lbnQuY3JlYXRlQ29tbWVudChjb250ZW50KSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHBlcnNpc3QgPyAnICcgOiAnJyk7XG4gIGFuY2hvci5fX3ZfYW5jaG9yID0gdHJ1ZTtcbiAgcmV0dXJuIGFuY2hvcjtcbn1cblxuLyoqXG4gKiBGaW5kIGEgY29tcG9uZW50IHJlZiBhdHRyaWJ1dGUgdGhhdCBzdGFydHMgd2l0aCAkLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZVxuICogQHJldHVybiB7U3RyaW5nfHVuZGVmaW5lZH1cbiAqL1xuXG52YXIgcmVmUkUgPSAvXnYtcmVmOi87XG5cbmZ1bmN0aW9uIGZpbmRSZWYobm9kZSkge1xuICBpZiAobm9kZS5oYXNBdHRyaWJ1dGVzKCkpIHtcbiAgICB2YXIgYXR0cnMgPSBub2RlLmF0dHJpYnV0ZXM7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBuYW1lID0gYXR0cnNbaV0ubmFtZTtcbiAgICAgIGlmIChyZWZSRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIHJldHVybiBjYW1lbGl6ZShuYW1lLnJlcGxhY2UocmVmUkUsICcnKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogTWFwIGEgZnVuY3Rpb24gdG8gYSByYW5nZSBvZiBub2RlcyAuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge05vZGV9IGVuZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3BcbiAqL1xuXG5mdW5jdGlvbiBtYXBOb2RlUmFuZ2Uobm9kZSwgZW5kLCBvcCkge1xuICB2YXIgbmV4dDtcbiAgd2hpbGUgKG5vZGUgIT09IGVuZCkge1xuICAgIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgIG9wKG5vZGUpO1xuICAgIG5vZGUgPSBuZXh0O1xuICB9XG4gIG9wKGVuZCk7XG59XG5cbi8qKlxuICogUmVtb3ZlIGEgcmFuZ2Ugb2Ygbm9kZXMgd2l0aCB0cmFuc2l0aW9uLCBzdG9yZVxuICogdGhlIG5vZGVzIGluIGEgZnJhZ21lbnQgd2l0aCBjb3JyZWN0IG9yZGVyaW5nLFxuICogYW5kIGNhbGwgY2FsbGJhY2sgd2hlbiBkb25lLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gc3RhcnRcbiAqIEBwYXJhbSB7Tm9kZX0gZW5kXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVOb2RlUmFuZ2Uoc3RhcnQsIGVuZCwgdm0sIGZyYWcsIGNiKSB7XG4gIHZhciBkb25lID0gZmFsc2U7XG4gIHZhciByZW1vdmVkID0gMDtcbiAgdmFyIG5vZGVzID0gW107XG4gIG1hcE5vZGVSYW5nZShzdGFydCwgZW5kLCBmdW5jdGlvbiAobm9kZSkge1xuICAgIGlmIChub2RlID09PSBlbmQpIGRvbmUgPSB0cnVlO1xuICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgcmVtb3ZlV2l0aFRyYW5zaXRpb24obm9kZSwgdm0sIG9uUmVtb3ZlZCk7XG4gIH0pO1xuICBmdW5jdGlvbiBvblJlbW92ZWQoKSB7XG4gICAgcmVtb3ZlZCsrO1xuICAgIGlmIChkb25lICYmIHJlbW92ZWQgPj0gbm9kZXMubGVuZ3RoKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZXNbaV0pO1xuICAgICAgfVxuICAgICAgY2IgJiYgY2IoKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIG5vZGUgaXMgYSBEb2N1bWVudEZyYWdtZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc0ZyYWdtZW50KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMTE7XG59XG5cbi8qKlxuICogR2V0IG91dGVySFRNTCBvZiBlbGVtZW50cywgdGFraW5nIGNhcmVcbiAqIG9mIFNWRyBlbGVtZW50cyBpbiBJRSBhcyB3ZWxsLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBnZXRPdXRlckhUTUwoZWwpIHtcbiAgaWYgKGVsLm91dGVySFRNTCkge1xuICAgIHJldHVybiBlbC5vdXRlckhUTUw7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChlbC5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgIHJldHVybiBjb250YWluZXIuaW5uZXJIVE1MO1xuICB9XG59XG5cbnZhciBjb21tb25UYWdSRSA9IC9eKGRpdnxwfHNwYW58aW1nfGF8YnxpfGJyfHVsfG9sfGxpfGgxfGgyfGgzfGg0fGg1fGg2fGNvZGV8cHJlfHRhYmxlfHRofHRkfHRyfGZvcm18bGFiZWx8aW5wdXR8c2VsZWN0fG9wdGlvbnxuYXZ8YXJ0aWNsZXxzZWN0aW9ufGhlYWRlcnxmb290ZXIpJC9pO1xudmFyIHJlc2VydmVkVGFnUkUgPSAvXihzbG90fHBhcnRpYWx8Y29tcG9uZW50KSQvaTtcblxudmFyIGlzVW5rbm93bkVsZW1lbnQgPSB1bmRlZmluZWQ7XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBpc1Vua25vd25FbGVtZW50ID0gZnVuY3Rpb24gKGVsLCB0YWcpIHtcbiAgICBpZiAodGFnLmluZGV4T2YoJy0nKSA+IC0xKSB7XG4gICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yODIxMDM2NC8xMDcwMjQ0XG4gICAgICByZXR1cm4gZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQgfHwgZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MRWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICgvSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KGVsLnRvU3RyaW5nKCkpICYmXG4gICAgICAgIC8vIENocm9tZSByZXR1cm5zIHVua25vd24gZm9yIHNldmVyYWwgSFRNTDUgZWxlbWVudHMuXG4gICAgICAgIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD01NDA1MjZcbiAgICAgICAgLy8gRmlyZWZveCByZXR1cm5zIHVua25vd24gZm9yIHNvbWUgXCJJbnRlcmFjdGl2ZSBlbGVtZW50cy5cIlxuICAgICAgICAhL14oZGF0YXx0aW1lfHJ0Y3xyYnxkZXRhaWxzfGRpYWxvZ3xzdW1tYXJ5KSQvLnRlc3QodGFnKVxuICAgICAgKTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIGNvbXBvbmVudCwgaWYgeWVzIHJldHVybiBpdHNcbiAqIGNvbXBvbmVudCBpZC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBjaGVja0NvbXBvbmVudEF0dHIoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgdmFyIGhhc0F0dHJzID0gZWwuaGFzQXR0cmlidXRlcygpO1xuICBpZiAoIWNvbW1vblRhZ1JFLnRlc3QodGFnKSAmJiAhcmVzZXJ2ZWRUYWdSRS50ZXN0KHRhZykpIHtcbiAgICBpZiAocmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgdGFnKSkge1xuICAgICAgcmV0dXJuIHsgaWQ6IHRhZyB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgaXMgPSBoYXNBdHRycyAmJiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpO1xuICAgICAgaWYgKGlzKSB7XG4gICAgICAgIHJldHVybiBpcztcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YXIgZXhwZWN0ZWRUYWcgPSBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwICYmIG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXBbdGFnXTtcbiAgICAgICAgaWYgKGV4cGVjdGVkVGFnKSB7XG4gICAgICAgICAgd2FybignVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtICcgKyAnZGlkIHlvdSBtZWFuIDwnICsgZXhwZWN0ZWRUYWcgKyAnPj8gJyArICdIVE1MIGlzIGNhc2UtaW5zZW5zaXRpdmUsIHJlbWVtYmVyIHRvIHVzZSBrZWJhYi1jYXNlIGluIHRlbXBsYXRlcy4nKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1Vua25vd25FbGVtZW50KGVsLCB0YWcpKSB7XG4gICAgICAgICAgd2FybignVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtIGRpZCB5b3UgJyArICdyZWdpc3RlciB0aGUgY29tcG9uZW50IGNvcnJlY3RseT8gRm9yIHJlY3Vyc2l2ZSBjb21wb25lbnRzLCAnICsgJ21ha2Ugc3VyZSB0byBwcm92aWRlIHRoZSBcIm5hbWVcIiBvcHRpb24uJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaGFzQXR0cnMpIHtcbiAgICByZXR1cm4gZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBcImlzXCIgYmluZGluZyBmcm9tIGFuIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKSB7XG4gIC8vIGR5bmFtaWMgc3ludGF4XG4gIHZhciBleHAgPSBlbC5nZXRBdHRyaWJ1dGUoJ2lzJyk7XG4gIGlmIChleHAgIT0gbnVsbCkge1xuICAgIGlmIChyZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCBleHApKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2lzJyk7XG4gICAgICByZXR1cm4geyBpZDogZXhwIH07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGV4cCA9IGdldEJpbmRBdHRyKGVsLCAnaXMnKTtcbiAgICBpZiAoZXhwICE9IG51bGwpIHtcbiAgICAgIHJldHVybiB7IGlkOiBleHAsIGR5bmFtaWM6IHRydWUgfTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBPcHRpb24gb3ZlcndyaXRpbmcgc3RyYXRlZ2llcyBhcmUgZnVuY3Rpb25zIHRoYXQgaGFuZGxlXG4gKiBob3cgdG8gbWVyZ2UgYSBwYXJlbnQgb3B0aW9uIHZhbHVlIGFuZCBhIGNoaWxkIG9wdGlvblxuICogdmFsdWUgaW50byB0aGUgZmluYWwgdmFsdWUuXG4gKlxuICogQWxsIHN0cmF0ZWd5IGZ1bmN0aW9ucyBmb2xsb3cgdGhlIHNhbWUgc2lnbmF0dXJlOlxuICpcbiAqIEBwYXJhbSB7Kn0gcGFyZW50VmFsXG4gKiBAcGFyYW0geyp9IGNoaWxkVmFsXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuICovXG5cbnZhciBzdHJhdHMgPSBjb25maWcub3B0aW9uTWVyZ2VTdHJhdGVnaWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuLyoqXG4gKiBIZWxwZXIgdGhhdCByZWN1cnNpdmVseSBtZXJnZXMgdHdvIGRhdGEgb2JqZWN0cyB0b2dldGhlci5cbiAqL1xuXG5mdW5jdGlvbiBtZXJnZURhdGEodG8sIGZyb20pIHtcbiAgdmFyIGtleSwgdG9WYWwsIGZyb21WYWw7XG4gIGZvciAoa2V5IGluIGZyb20pIHtcbiAgICB0b1ZhbCA9IHRvW2tleV07XG4gICAgZnJvbVZhbCA9IGZyb21ba2V5XTtcbiAgICBpZiAoIWhhc093bih0bywga2V5KSkge1xuICAgICAgc2V0KHRvLCBrZXksIGZyb21WYWwpO1xuICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodG9WYWwpICYmIGlzT2JqZWN0KGZyb21WYWwpKSB7XG4gICAgICBtZXJnZURhdGEodG9WYWwsIGZyb21WYWwpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdG87XG59XG5cbi8qKlxuICogRGF0YVxuICovXG5cbnN0cmF0cy5kYXRhID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKSB7XG4gIGlmICghdm0pIHtcbiAgICAvLyBpbiBhIFZ1ZS5leHRlbmQgbWVyZ2UsIGJvdGggc2hvdWxkIGJlIGZ1bmN0aW9uc1xuICAgIGlmICghY2hpbGRWYWwpIHtcbiAgICAgIHJldHVybiBwYXJlbnRWYWw7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVGhlIFwiZGF0YVwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICsgJ3RoYXQgcmV0dXJucyBhIHBlci1pbnN0YW5jZSB2YWx1ZSBpbiBjb21wb25lbnQgJyArICdkZWZpbml0aW9ucy4nLCB2bSk7XG4gICAgICByZXR1cm4gcGFyZW50VmFsO1xuICAgIH1cbiAgICBpZiAoIXBhcmVudFZhbCkge1xuICAgICAgcmV0dXJuIGNoaWxkVmFsO1xuICAgIH1cbiAgICAvLyB3aGVuIHBhcmVudFZhbCAmIGNoaWxkVmFsIGFyZSBib3RoIHByZXNlbnQsXG4gICAgLy8gd2UgbmVlZCB0byByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlXG4gICAgLy8gbWVyZ2VkIHJlc3VsdCBvZiBib3RoIGZ1bmN0aW9ucy4uLiBubyBuZWVkIHRvXG4gICAgLy8gY2hlY2sgaWYgcGFyZW50VmFsIGlzIGEgZnVuY3Rpb24gaGVyZSBiZWNhdXNlXG4gICAgLy8gaXQgaGFzIHRvIGJlIGEgZnVuY3Rpb24gdG8gcGFzcyBwcmV2aW91cyBtZXJnZXMuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZERhdGFGbigpIHtcbiAgICAgIHJldHVybiBtZXJnZURhdGEoY2hpbGRWYWwuY2FsbCh0aGlzKSwgcGFyZW50VmFsLmNhbGwodGhpcykpO1xuICAgIH07XG4gIH0gZWxzZSBpZiAocGFyZW50VmFsIHx8IGNoaWxkVmFsKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZEluc3RhbmNlRGF0YUZuKCkge1xuICAgICAgLy8gaW5zdGFuY2UgbWVyZ2VcbiAgICAgIHZhciBpbnN0YW5jZURhdGEgPSB0eXBlb2YgY2hpbGRWYWwgPT09ICdmdW5jdGlvbicgPyBjaGlsZFZhbC5jYWxsKHZtKSA6IGNoaWxkVmFsO1xuICAgICAgdmFyIGRlZmF1bHREYXRhID0gdHlwZW9mIHBhcmVudFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IHBhcmVudFZhbC5jYWxsKHZtKSA6IHVuZGVmaW5lZDtcbiAgICAgIGlmIChpbnN0YW5jZURhdGEpIHtcbiAgICAgICAgcmV0dXJuIG1lcmdlRGF0YShpbnN0YW5jZURhdGEsIGRlZmF1bHREYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0RGF0YTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59O1xuXG4vKipcbiAqIEVsXG4gKi9cblxuc3RyYXRzLmVsID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKSB7XG4gIGlmICghdm0gJiYgY2hpbGRWYWwgJiYgdHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdUaGUgXCJlbFwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICsgJ3RoYXQgcmV0dXJucyBhIHBlci1pbnN0YW5jZSB2YWx1ZSBpbiBjb21wb25lbnQgJyArICdkZWZpbml0aW9ucy4nLCB2bSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciByZXQgPSBjaGlsZFZhbCB8fCBwYXJlbnRWYWw7XG4gIC8vIGludm9rZSB0aGUgZWxlbWVudCBmYWN0b3J5IGlmIHRoaXMgaXMgaW5zdGFuY2UgbWVyZ2VcbiAgcmV0dXJuIHZtICYmIHR5cGVvZiByZXQgPT09ICdmdW5jdGlvbicgPyByZXQuY2FsbCh2bSkgOiByZXQ7XG59O1xuXG4vKipcbiAqIEhvb2tzIGFuZCBwYXJhbSBhdHRyaWJ1dGVzIGFyZSBtZXJnZWQgYXMgYXJyYXlzLlxuICovXG5cbnN0cmF0cy5pbml0ID0gc3RyYXRzLmNyZWF0ZWQgPSBzdHJhdHMucmVhZHkgPSBzdHJhdHMuYXR0YWNoZWQgPSBzdHJhdHMuZGV0YWNoZWQgPSBzdHJhdHMuYmVmb3JlQ29tcGlsZSA9IHN0cmF0cy5jb21waWxlZCA9IHN0cmF0cy5iZWZvcmVEZXN0cm95ID0gc3RyYXRzLmRlc3Ryb3llZCA9IHN0cmF0cy5hY3RpdmF0ZSA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIHJldHVybiBjaGlsZFZhbCA/IHBhcmVudFZhbCA/IHBhcmVudFZhbC5jb25jYXQoY2hpbGRWYWwpIDogaXNBcnJheShjaGlsZFZhbCkgPyBjaGlsZFZhbCA6IFtjaGlsZFZhbF0gOiBwYXJlbnRWYWw7XG59O1xuXG4vKipcbiAqIEFzc2V0c1xuICpcbiAqIFdoZW4gYSB2bSBpcyBwcmVzZW50IChpbnN0YW5jZSBjcmVhdGlvbiksIHdlIG5lZWQgdG8gZG9cbiAqIGEgdGhyZWUtd2F5IG1lcmdlIGJldHdlZW4gY29uc3RydWN0b3Igb3B0aW9ucywgaW5zdGFuY2VcbiAqIG9wdGlvbnMgYW5kIHBhcmVudCBvcHRpb25zLlxuICovXG5cbmZ1bmN0aW9uIG1lcmdlQXNzZXRzKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUocGFyZW50VmFsIHx8IG51bGwpO1xuICByZXR1cm4gY2hpbGRWYWwgPyBleHRlbmQocmVzLCBndWFyZEFycmF5QXNzZXRzKGNoaWxkVmFsKSkgOiByZXM7XG59XG5cbmNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gIHN0cmF0c1t0eXBlICsgJ3MnXSA9IG1lcmdlQXNzZXRzO1xufSk7XG5cbi8qKlxuICogRXZlbnRzICYgV2F0Y2hlcnMuXG4gKlxuICogRXZlbnRzICYgd2F0Y2hlcnMgaGFzaGVzIHNob3VsZCBub3Qgb3ZlcndyaXRlIG9uZVxuICogYW5vdGhlciwgc28gd2UgbWVyZ2UgdGhlbSBhcyBhcnJheXMuXG4gKi9cblxuc3RyYXRzLndhdGNoID0gc3RyYXRzLmV2ZW50cyA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG4gIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG4gIHZhciByZXQgPSB7fTtcbiAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcbiAgZm9yICh2YXIga2V5IGluIGNoaWxkVmFsKSB7XG4gICAgdmFyIHBhcmVudCA9IHJldFtrZXldO1xuICAgIHZhciBjaGlsZCA9IGNoaWxkVmFsW2tleV07XG4gICAgaWYgKHBhcmVudCAmJiAhaXNBcnJheShwYXJlbnQpKSB7XG4gICAgICBwYXJlbnQgPSBbcGFyZW50XTtcbiAgICB9XG4gICAgcmV0W2tleV0gPSBwYXJlbnQgPyBwYXJlbnQuY29uY2F0KGNoaWxkKSA6IFtjaGlsZF07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn07XG5cbi8qKlxuICogT3RoZXIgb2JqZWN0IGhhc2hlcy5cbiAqL1xuXG5zdHJhdHMucHJvcHMgPSBzdHJhdHMubWV0aG9kcyA9IHN0cmF0cy5jb21wdXRlZCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG4gIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG4gIHZhciByZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuICBleHRlbmQocmV0LCBjaGlsZFZhbCk7XG4gIHJldHVybiByZXQ7XG59O1xuXG4vKipcbiAqIERlZmF1bHQgc3RyYXRlZ3kuXG4gKi9cblxudmFyIGRlZmF1bHRTdHJhdCA9IGZ1bmN0aW9uIGRlZmF1bHRTdHJhdChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIHJldHVybiBjaGlsZFZhbCA9PT0gdW5kZWZpbmVkID8gcGFyZW50VmFsIDogY2hpbGRWYWw7XG59O1xuXG4vKipcbiAqIE1ha2Ugc3VyZSBjb21wb25lbnQgb3B0aW9ucyBnZXQgY29udmVydGVkIHRvIGFjdHVhbFxuICogY29uc3RydWN0b3JzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cblxuZnVuY3Rpb24gZ3VhcmRDb21wb25lbnRzKG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMuY29tcG9uZW50cykge1xuICAgIHZhciBjb21wb25lbnRzID0gb3B0aW9ucy5jb21wb25lbnRzID0gZ3VhcmRBcnJheUFzc2V0cyhvcHRpb25zLmNvbXBvbmVudHMpO1xuICAgIHZhciBpZHMgPSBPYmplY3Qua2V5cyhjb21wb25lbnRzKTtcbiAgICB2YXIgZGVmO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgbWFwID0gb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcCA9IHt9O1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGlkcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBpZHNbaV07XG4gICAgICBpZiAoY29tbW9uVGFnUkUudGVzdChrZXkpIHx8IHJlc2VydmVkVGFnUkUudGVzdChrZXkpKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCAnICsgJ2lkOiAnICsga2V5KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICAvLyByZWNvcmQgYSBhbGwgbG93ZXJjYXNlIDwtPiBrZWJhYi1jYXNlIG1hcHBpbmcgZm9yXG4gICAgICAvLyBwb3NzaWJsZSBjdXN0b20gZWxlbWVudCBjYXNlIGVycm9yIHdhcm5pbmdcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIG1hcFtrZXkucmVwbGFjZSgvLS9nLCAnJykudG9Mb3dlckNhc2UoKV0gPSBoeXBoZW5hdGUoa2V5KTtcbiAgICAgIH1cbiAgICAgIGRlZiA9IGNvbXBvbmVudHNba2V5XTtcbiAgICAgIGlmIChpc1BsYWluT2JqZWN0KGRlZikpIHtcbiAgICAgICAgY29tcG9uZW50c1trZXldID0gVnVlLmV4dGVuZChkZWYpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEVuc3VyZSBhbGwgcHJvcHMgb3B0aW9uIHN5bnRheCBhcmUgbm9ybWFsaXplZCBpbnRvIHRoZVxuICogT2JqZWN0LWJhc2VkIGZvcm1hdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5cbmZ1bmN0aW9uIGd1YXJkUHJvcHMob3B0aW9ucykge1xuICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuICB2YXIgaSwgdmFsO1xuICBpZiAoaXNBcnJheShwcm9wcykpIHtcbiAgICBvcHRpb25zLnByb3BzID0ge307XG4gICAgaSA9IHByb3BzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YWwgPSBwcm9wc1tpXTtcbiAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgICAgICBvcHRpb25zLnByb3BzW3ZhbF0gPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICh2YWwubmFtZSkge1xuICAgICAgICBvcHRpb25zLnByb3BzW3ZhbC5uYW1lXSA9IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChwcm9wcykpIHtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BzKTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFsID0gcHJvcHNba2V5c1tpXV07XG4gICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBwcm9wc1trZXlzW2ldXSA9IHsgdHlwZTogdmFsIH07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogR3VhcmQgYW4gQXJyYXktZm9ybWF0IGFzc2V0cyBvcHRpb24gYW5kIGNvbnZlcnRlZCBpdFxuICogaW50byB0aGUga2V5LXZhbHVlIE9iamVjdCBmb3JtYXQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGFzc2V0c1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIGd1YXJkQXJyYXlBc3NldHMoYXNzZXRzKSB7XG4gIGlmIChpc0FycmF5KGFzc2V0cykpIHtcbiAgICB2YXIgcmVzID0ge307XG4gICAgdmFyIGkgPSBhc3NldHMubGVuZ3RoO1xuICAgIHZhciBhc3NldDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBhc3NldCA9IGFzc2V0c1tpXTtcbiAgICAgIHZhciBpZCA9IHR5cGVvZiBhc3NldCA9PT0gJ2Z1bmN0aW9uJyA/IGFzc2V0Lm9wdGlvbnMgJiYgYXNzZXQub3B0aW9ucy5uYW1lIHx8IGFzc2V0LmlkIDogYXNzZXQubmFtZSB8fCBhc3NldC5pZDtcbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdBcnJheS1zeW50YXggYXNzZXRzIG11c3QgcHJvdmlkZSBhIFwibmFtZVwiIG9yIFwiaWRcIiBmaWVsZC4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc1tpZF0gPSBhc3NldDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuICByZXR1cm4gYXNzZXRzO1xufVxuXG4vKipcbiAqIE1lcmdlIHR3byBvcHRpb24gb2JqZWN0cyBpbnRvIGEgbmV3IG9uZS5cbiAqIENvcmUgdXRpbGl0eSB1c2VkIGluIGJvdGggaW5zdGFudGlhdGlvbiBhbmQgaW5oZXJpdGFuY2UuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhcmVudFxuICogQHBhcmFtIHtPYmplY3R9IGNoaWxkXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXSAtIGlmIHZtIGlzIHByZXNlbnQsIGluZGljYXRlcyB0aGlzIGlzXG4gKiAgICAgICAgICAgICAgICAgICAgIGFuIGluc3RhbnRpYXRpb24gbWVyZ2UuXG4gKi9cblxuZnVuY3Rpb24gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGQsIHZtKSB7XG4gIGd1YXJkQ29tcG9uZW50cyhjaGlsZCk7XG4gIGd1YXJkUHJvcHMoY2hpbGQpO1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChjaGlsZC5wcm9wc0RhdGEgJiYgIXZtKSB7XG4gICAgICB3YXJuKCdwcm9wc0RhdGEgY2FuIG9ubHkgYmUgdXNlZCBhcyBhbiBpbnN0YW50aWF0aW9uIG9wdGlvbi4nKTtcbiAgICB9XG4gIH1cbiAgdmFyIG9wdGlvbnMgPSB7fTtcbiAgdmFyIGtleTtcbiAgaWYgKGNoaWxkWydleHRlbmRzJ10pIHtcbiAgICBwYXJlbnQgPSB0eXBlb2YgY2hpbGRbJ2V4dGVuZHMnXSA9PT0gJ2Z1bmN0aW9uJyA/IG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkWydleHRlbmRzJ10ub3B0aW9ucywgdm0pIDogbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGRbJ2V4dGVuZHMnXSwgdm0pO1xuICB9XG4gIGlmIChjaGlsZC5taXhpbnMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkLm1peGlucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBtaXhpbiA9IGNoaWxkLm1peGluc1tpXTtcbiAgICAgIHZhciBtaXhpbk9wdGlvbnMgPSBtaXhpbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBWdWUgPyBtaXhpbi5vcHRpb25zIDogbWl4aW47XG4gICAgICBwYXJlbnQgPSBtZXJnZU9wdGlvbnMocGFyZW50LCBtaXhpbk9wdGlvbnMsIHZtKTtcbiAgICB9XG4gIH1cbiAgZm9yIChrZXkgaW4gcGFyZW50KSB7XG4gICAgbWVyZ2VGaWVsZChrZXkpO1xuICB9XG4gIGZvciAoa2V5IGluIGNoaWxkKSB7XG4gICAgaWYgKCFoYXNPd24ocGFyZW50LCBrZXkpKSB7XG4gICAgICBtZXJnZUZpZWxkKGtleSk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIG1lcmdlRmllbGQoa2V5KSB7XG4gICAgdmFyIHN0cmF0ID0gc3RyYXRzW2tleV0gfHwgZGVmYXVsdFN0cmF0O1xuICAgIG9wdGlvbnNba2V5XSA9IHN0cmF0KHBhcmVudFtrZXldLCBjaGlsZFtrZXldLCB2bSwga2V5KTtcbiAgfVxuICByZXR1cm4gb3B0aW9ucztcbn1cblxuLyoqXG4gKiBSZXNvbHZlIGFuIGFzc2V0LlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJlY2F1c2UgY2hpbGQgaW5zdGFuY2VzIG5lZWQgYWNjZXNzXG4gKiB0byBhc3NldHMgZGVmaW5lZCBpbiBpdHMgYW5jZXN0b3IgY2hhaW4uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2Fybk1pc3NpbmdcbiAqIEByZXR1cm4ge09iamVjdHxGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiByZXNvbHZlQXNzZXQob3B0aW9ucywgdHlwZSwgaWQsIHdhcm5NaXNzaW5nKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgYXNzZXRzID0gb3B0aW9uc1t0eXBlXTtcbiAgdmFyIGNhbWVsaXplZElkO1xuICB2YXIgcmVzID0gYXNzZXRzW2lkXSB8fFxuICAvLyBjYW1lbENhc2UgSURcbiAgYXNzZXRzW2NhbWVsaXplZElkID0gY2FtZWxpemUoaWQpXSB8fFxuICAvLyBQYXNjYWwgQ2FzZSBJRFxuICBhc3NldHNbY2FtZWxpemVkSWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbGl6ZWRJZC5zbGljZSgxKV07XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm5NaXNzaW5nICYmICFyZXMpIHtcbiAgICB3YXJuKCdGYWlsZWQgdG8gcmVzb2x2ZSAnICsgdHlwZS5zbGljZSgwLCAtMSkgKyAnOiAnICsgaWQsIG9wdGlvbnMpO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5cbnZhciB1aWQkMSA9IDA7XG5cbi8qKlxuICogQSBkZXAgaXMgYW4gb2JzZXJ2YWJsZSB0aGF0IGNhbiBoYXZlIG11bHRpcGxlXG4gKiBkaXJlY3RpdmVzIHN1YnNjcmliaW5nIHRvIGl0LlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBEZXAoKSB7XG4gIHRoaXMuaWQgPSB1aWQkMSsrO1xuICB0aGlzLnN1YnMgPSBbXTtcbn1cblxuLy8gdGhlIGN1cnJlbnQgdGFyZ2V0IHdhdGNoZXIgYmVpbmcgZXZhbHVhdGVkLlxuLy8gdGhpcyBpcyBnbG9iYWxseSB1bmlxdWUgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvbmx5IG9uZVxuLy8gd2F0Y2hlciBiZWluZyBldmFsdWF0ZWQgYXQgYW55IHRpbWUuXG5EZXAudGFyZ2V0ID0gbnVsbDtcblxuLyoqXG4gKiBBZGQgYSBkaXJlY3RpdmUgc3Vic2NyaWJlci5cbiAqXG4gKiBAcGFyYW0ge0RpcmVjdGl2ZX0gc3ViXG4gKi9cblxuRGVwLnByb3RvdHlwZS5hZGRTdWIgPSBmdW5jdGlvbiAoc3ViKSB7XG4gIHRoaXMuc3Vicy5wdXNoKHN1Yik7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhIGRpcmVjdGl2ZSBzdWJzY3JpYmVyLlxuICpcbiAqIEBwYXJhbSB7RGlyZWN0aXZlfSBzdWJcbiAqL1xuXG5EZXAucHJvdG90eXBlLnJlbW92ZVN1YiA9IGZ1bmN0aW9uIChzdWIpIHtcbiAgdGhpcy5zdWJzLiRyZW1vdmUoc3ViKTtcbn07XG5cbi8qKlxuICogQWRkIHNlbGYgYXMgYSBkZXBlbmRlbmN5IHRvIHRoZSB0YXJnZXQgd2F0Y2hlci5cbiAqL1xuXG5EZXAucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgRGVwLnRhcmdldC5hZGREZXAodGhpcyk7XG59O1xuXG4vKipcbiAqIE5vdGlmeSBhbGwgc3Vic2NyaWJlcnMgb2YgYSBuZXcgdmFsdWUuXG4gKi9cblxuRGVwLnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIHN0YWJsaXplIHRoZSBzdWJzY3JpYmVyIGxpc3QgZmlyc3RcbiAgdmFyIHN1YnMgPSB0b0FycmF5KHRoaXMuc3Vicyk7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gc3Vicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBzdWJzW2ldLnVwZGF0ZSgpO1xuICB9XG59O1xuXG52YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTtcbnZhciBhcnJheU1ldGhvZHMgPSBPYmplY3QuY3JlYXRlKGFycmF5UHJvdG8pXG5cbi8qKlxuICogSW50ZXJjZXB0IG11dGF0aW5nIG1ldGhvZHMgYW5kIGVtaXQgZXZlbnRzXG4gKi9cblxuO1sncHVzaCcsICdwb3AnLCAnc2hpZnQnLCAndW5zaGlmdCcsICdzcGxpY2UnLCAnc29ydCcsICdyZXZlcnNlJ10uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG4gIC8vIGNhY2hlIG9yaWdpbmFsIG1ldGhvZFxuICB2YXIgb3JpZ2luYWwgPSBhcnJheVByb3RvW21ldGhvZF07XG4gIGRlZihhcnJheU1ldGhvZHMsIG1ldGhvZCwgZnVuY3Rpb24gbXV0YXRvcigpIHtcbiAgICAvLyBhdm9pZCBsZWFraW5nIGFyZ3VtZW50czpcbiAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9jbG9zdXJlLXdpdGgtYXJndW1lbnRzXG4gICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGkpO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB2YXIgb2IgPSB0aGlzLl9fb2JfXztcbiAgICB2YXIgaW5zZXJ0ZWQ7XG4gICAgc3dpdGNoIChtZXRob2QpIHtcbiAgICAgIGNhc2UgJ3B1c2gnOlxuICAgICAgICBpbnNlcnRlZCA9IGFyZ3M7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndW5zaGlmdCc6XG4gICAgICAgIGluc2VydGVkID0gYXJncztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzcGxpY2UnOlxuICAgICAgICBpbnNlcnRlZCA9IGFyZ3Muc2xpY2UoMik7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAoaW5zZXJ0ZWQpIG9iLm9ic2VydmVBcnJheShpbnNlcnRlZCk7XG4gICAgLy8gbm90aWZ5IGNoYW5nZVxuICAgIG9iLmRlcC5ub3RpZnkoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9KTtcbn0pO1xuXG4vKipcbiAqIFN3YXAgdGhlIGVsZW1lbnQgYXQgdGhlIGdpdmVuIGluZGV4IHdpdGggYSBuZXcgdmFsdWVcbiAqIGFuZCBlbWl0cyBjb3JyZXNwb25kaW5nIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICogQHBhcmFtIHsqfSB2YWxcbiAqIEByZXR1cm4geyp9IC0gcmVwbGFjZWQgZWxlbWVudFxuICovXG5cbmRlZihhcnJheVByb3RvLCAnJHNldCcsIGZ1bmN0aW9uICRzZXQoaW5kZXgsIHZhbCkge1xuICBpZiAoaW5kZXggPj0gdGhpcy5sZW5ndGgpIHtcbiAgICB0aGlzLmxlbmd0aCA9IE51bWJlcihpbmRleCkgKyAxO1xuICB9XG4gIHJldHVybiB0aGlzLnNwbGljZShpbmRleCwgMSwgdmFsKVswXTtcbn0pO1xuXG4vKipcbiAqIENvbnZlbmllbmNlIG1ldGhvZCB0byByZW1vdmUgdGhlIGVsZW1lbnQgYXQgZ2l2ZW4gaW5kZXggb3IgdGFyZ2V0IGVsZW1lbnQgcmVmZXJlbmNlLlxuICpcbiAqIEBwYXJhbSB7Kn0gaXRlbVxuICovXG5cbmRlZihhcnJheVByb3RvLCAnJHJlbW92ZScsIGZ1bmN0aW9uICRyZW1vdmUoaXRlbSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCF0aGlzLmxlbmd0aCkgcmV0dXJuO1xuICB2YXIgaW5kZXggPSBpbmRleE9mKHRoaXMsIGl0ZW0pO1xuICBpZiAoaW5kZXggPiAtMSkge1xuICAgIHJldHVybiB0aGlzLnNwbGljZShpbmRleCwgMSk7XG4gIH1cbn0pO1xuXG52YXIgYXJyYXlLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYXJyYXlNZXRob2RzKTtcblxuLyoqXG4gKiBCeSBkZWZhdWx0LCB3aGVuIGEgcmVhY3RpdmUgcHJvcGVydHkgaXMgc2V0LCB0aGUgbmV3IHZhbHVlIGlzXG4gKiBhbHNvIGNvbnZlcnRlZCB0byBiZWNvbWUgcmVhY3RpdmUuIEhvd2V2ZXIgaW4gY2VydGFpbiBjYXNlcywgZS5nLlxuICogdi1mb3Igc2NvcGUgYWxpYXMgYW5kIHByb3BzLCB3ZSBkb24ndCB3YW50IHRvIGZvcmNlIGNvbnZlcnNpb25cbiAqIGJlY2F1c2UgdGhlIHZhbHVlIG1heSBiZSBhIG5lc3RlZCB2YWx1ZSB1bmRlciBhIGZyb3plbiBkYXRhIHN0cnVjdHVyZS5cbiAqXG4gKiBTbyB3aGVuZXZlciB3ZSB3YW50IHRvIHNldCBhIHJlYWN0aXZlIHByb3BlcnR5IHdpdGhvdXQgZm9yY2luZ1xuICogY29udmVyc2lvbiBvbiB0aGUgbmV3IHZhbHVlLCB3ZSB3cmFwIHRoYXQgY2FsbCBpbnNpZGUgdGhpcyBmdW5jdGlvbi5cbiAqL1xuXG52YXIgc2hvdWxkQ29udmVydCA9IHRydWU7XG5cbmZ1bmN0aW9uIHdpdGhvdXRDb252ZXJzaW9uKGZuKSB7XG4gIHNob3VsZENvbnZlcnQgPSBmYWxzZTtcbiAgZm4oKTtcbiAgc2hvdWxkQ29udmVydCA9IHRydWU7XG59XG5cbi8qKlxuICogT2JzZXJ2ZXIgY2xhc3MgdGhhdCBhcmUgYXR0YWNoZWQgdG8gZWFjaCBvYnNlcnZlZFxuICogb2JqZWN0LiBPbmNlIGF0dGFjaGVkLCB0aGUgb2JzZXJ2ZXIgY29udmVydHMgdGFyZ2V0XG4gKiBvYmplY3QncyBwcm9wZXJ0eSBrZXlzIGludG8gZ2V0dGVyL3NldHRlcnMgdGhhdFxuICogY29sbGVjdCBkZXBlbmRlbmNpZXMgYW5kIGRpc3BhdGNoZXMgdXBkYXRlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gdmFsdWVcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5cbmZ1bmN0aW9uIE9ic2VydmVyKHZhbHVlKSB7XG4gIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgdGhpcy5kZXAgPSBuZXcgRGVwKCk7XG4gIGRlZih2YWx1ZSwgJ19fb2JfXycsIHRoaXMpO1xuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICB2YXIgYXVnbWVudCA9IGhhc1Byb3RvID8gcHJvdG9BdWdtZW50IDogY29weUF1Z21lbnQ7XG4gICAgYXVnbWVudCh2YWx1ZSwgYXJyYXlNZXRob2RzLCBhcnJheUtleXMpO1xuICAgIHRoaXMub2JzZXJ2ZUFycmF5KHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLndhbGsodmFsdWUpO1xuICB9XG59XG5cbi8vIEluc3RhbmNlIG1ldGhvZHNcblxuLyoqXG4gKiBXYWxrIHRocm91Z2ggZWFjaCBwcm9wZXJ0eSBhbmQgY29udmVydCB0aGVtIGludG9cbiAqIGdldHRlci9zZXR0ZXJzLiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgd2hlblxuICogdmFsdWUgdHlwZSBpcyBPYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICovXG5cbk9ic2VydmVyLnByb3RvdHlwZS53YWxrID0gZnVuY3Rpb24gKG9iaikge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB0aGlzLmNvbnZlcnQoa2V5c1tpXSwgb2JqW2tleXNbaV1dKTtcbiAgfVxufTtcblxuLyoqXG4gKiBPYnNlcnZlIGEgbGlzdCBvZiBBcnJheSBpdGVtcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBpdGVtc1xuICovXG5cbk9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlQXJyYXkgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBpdGVtcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBvYnNlcnZlKGl0ZW1zW2ldKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDb252ZXJ0IGEgcHJvcGVydHkgaW50byBnZXR0ZXIvc2V0dGVyIHNvIHdlIGNhbiBlbWl0XG4gKiB0aGUgZXZlbnRzIHdoZW4gdGhlIHByb3BlcnR5IGlzIGFjY2Vzc2VkL2NoYW5nZWQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5PYnNlcnZlci5wcm90b3R5cGUuY29udmVydCA9IGZ1bmN0aW9uIChrZXksIHZhbCkge1xuICBkZWZpbmVSZWFjdGl2ZSh0aGlzLnZhbHVlLCBrZXksIHZhbCk7XG59O1xuXG4vKipcbiAqIEFkZCBhbiBvd25lciB2bSwgc28gdGhhdCB3aGVuICRzZXQvJGRlbGV0ZSBtdXRhdGlvbnNcbiAqIGhhcHBlbiB3ZSBjYW4gbm90aWZ5IG93bmVyIHZtcyB0byBwcm94eSB0aGUga2V5cyBhbmRcbiAqIGRpZ2VzdCB0aGUgd2F0Y2hlcnMuIFRoaXMgaXMgb25seSBjYWxsZWQgd2hlbiB0aGUgb2JqZWN0XG4gKiBpcyBvYnNlcnZlZCBhcyBhbiBpbnN0YW5jZSdzIHJvb3QgJGRhdGEuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLmFkZFZtID0gZnVuY3Rpb24gKHZtKSB7XG4gICh0aGlzLnZtcyB8fCAodGhpcy52bXMgPSBbXSkpLnB1c2godm0pO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYW4gb3duZXIgdm0uIFRoaXMgaXMgY2FsbGVkIHdoZW4gdGhlIG9iamVjdCBpc1xuICogc3dhcHBlZCBvdXQgYXMgYW4gaW5zdGFuY2UncyAkZGF0YSBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLnJlbW92ZVZtID0gZnVuY3Rpb24gKHZtKSB7XG4gIHRoaXMudm1zLiRyZW1vdmUodm0pO1xufTtcblxuLy8gaGVscGVyc1xuXG4vKipcbiAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBpbnRlcmNlcHRpbmdcbiAqIHRoZSBwcm90b3R5cGUgY2hhaW4gdXNpbmcgX19wcm90b19fXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHRhcmdldFxuICogQHBhcmFtIHtPYmplY3R9IHNyY1xuICovXG5cbmZ1bmN0aW9uIHByb3RvQXVnbWVudCh0YXJnZXQsIHNyYykge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuICB0YXJnZXQuX19wcm90b19fID0gc3JjO1xuICAvKiBlc2xpbnQtZW5hYmxlIG5vLXByb3RvICovXG59XG5cbi8qKlxuICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGRlZmluaW5nXG4gKiBoaWRkZW4gcHJvcGVydGllcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gdGFyZ2V0XG4gKiBAcGFyYW0ge09iamVjdH0gcHJvdG9cbiAqL1xuXG5mdW5jdGlvbiBjb3B5QXVnbWVudCh0YXJnZXQsIHNyYywga2V5cykge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgZGVmKHRhcmdldCwga2V5LCBzcmNba2V5XSk7XG4gIH1cbn1cblxuLyoqXG4gKiBBdHRlbXB0IHRvIGNyZWF0ZSBhbiBvYnNlcnZlciBpbnN0YW5jZSBmb3IgYSB2YWx1ZSxcbiAqIHJldHVybnMgdGhlIG5ldyBvYnNlcnZlciBpZiBzdWNjZXNzZnVsbHkgb2JzZXJ2ZWQsXG4gKiBvciB0aGUgZXhpc3Rpbmcgb2JzZXJ2ZXIgaWYgdGhlIHZhbHVlIGFscmVhZHkgaGFzIG9uZS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuICogQHJldHVybiB7T2JzZXJ2ZXJ8dW5kZWZpbmVkfVxuICogQHN0YXRpY1xuICovXG5cbmZ1bmN0aW9uIG9ic2VydmUodmFsdWUsIHZtKSB7XG4gIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgb2I7XG4gIGlmIChoYXNPd24odmFsdWUsICdfX29iX18nKSAmJiB2YWx1ZS5fX29iX18gaW5zdGFuY2VvZiBPYnNlcnZlcikge1xuICAgIG9iID0gdmFsdWUuX19vYl9fO1xuICB9IGVsc2UgaWYgKHNob3VsZENvbnZlcnQgJiYgKGlzQXJyYXkodmFsdWUpIHx8IGlzUGxhaW5PYmplY3QodmFsdWUpKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSAmJiAhdmFsdWUuX2lzVnVlKSB7XG4gICAgb2IgPSBuZXcgT2JzZXJ2ZXIodmFsdWUpO1xuICB9XG4gIGlmIChvYiAmJiB2bSkge1xuICAgIG9iLmFkZFZtKHZtKTtcbiAgfVxuICByZXR1cm4gb2I7XG59XG5cbi8qKlxuICogRGVmaW5lIGEgcmVhY3RpdmUgcHJvcGVydHkgb24gYW4gT2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuZnVuY3Rpb24gZGVmaW5lUmVhY3RpdmUob2JqLCBrZXksIHZhbCkge1xuICB2YXIgZGVwID0gbmV3IERlcCgpO1xuXG4gIHZhciBwcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpO1xuICBpZiAocHJvcGVydHkgJiYgcHJvcGVydHkuY29uZmlndXJhYmxlID09PSBmYWxzZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIGNhdGVyIGZvciBwcmUtZGVmaW5lZCBnZXR0ZXIvc2V0dGVyc1xuICB2YXIgZ2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuZ2V0O1xuICB2YXIgc2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuc2V0O1xuXG4gIHZhciBjaGlsZE9iID0gb2JzZXJ2ZSh2YWwpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlR2V0dGVyKCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcbiAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG4gICAgICAgIGRlcC5kZXBlbmQoKTtcbiAgICAgICAgaWYgKGNoaWxkT2IpIHtcbiAgICAgICAgICBjaGlsZE9iLmRlcC5kZXBlbmQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICBmb3IgKHZhciBlLCBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgZSA9IHZhbHVlW2ldO1xuICAgICAgICAgICAgZSAmJiBlLl9fb2JfXyAmJiBlLl9fb2JfXy5kZXAuZGVwZW5kKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlU2V0dGVyKG5ld1ZhbCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcbiAgICAgIGlmIChuZXdWYWwgPT09IHZhbHVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChzZXR0ZXIpIHtcbiAgICAgICAgc2V0dGVyLmNhbGwob2JqLCBuZXdWYWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsID0gbmV3VmFsO1xuICAgICAgfVxuICAgICAgY2hpbGRPYiA9IG9ic2VydmUobmV3VmFsKTtcbiAgICAgIGRlcC5ub3RpZnkoKTtcbiAgICB9XG4gIH0pO1xufVxuXG5cblxudmFyIHV0aWwgPSBPYmplY3QuZnJlZXplKHtcblx0ZGVmaW5lUmVhY3RpdmU6IGRlZmluZVJlYWN0aXZlLFxuXHRzZXQ6IHNldCxcblx0ZGVsOiBkZWwsXG5cdGhhc093bjogaGFzT3duLFxuXHRpc0xpdGVyYWw6IGlzTGl0ZXJhbCxcblx0aXNSZXNlcnZlZDogaXNSZXNlcnZlZCxcblx0X3RvU3RyaW5nOiBfdG9TdHJpbmcsXG5cdHRvTnVtYmVyOiB0b051bWJlcixcblx0dG9Cb29sZWFuOiB0b0Jvb2xlYW4sXG5cdHN0cmlwUXVvdGVzOiBzdHJpcFF1b3Rlcyxcblx0Y2FtZWxpemU6IGNhbWVsaXplLFxuXHRoeXBoZW5hdGU6IGh5cGhlbmF0ZSxcblx0Y2xhc3NpZnk6IGNsYXNzaWZ5LFxuXHRiaW5kOiBiaW5kLFxuXHR0b0FycmF5OiB0b0FycmF5LFxuXHRleHRlbmQ6IGV4dGVuZCxcblx0aXNPYmplY3Q6IGlzT2JqZWN0LFxuXHRpc1BsYWluT2JqZWN0OiBpc1BsYWluT2JqZWN0LFxuXHRkZWY6IGRlZixcblx0ZGVib3VuY2U6IF9kZWJvdW5jZSxcblx0aW5kZXhPZjogaW5kZXhPZixcblx0Y2FuY2VsbGFibGU6IGNhbmNlbGxhYmxlLFxuXHRsb29zZUVxdWFsOiBsb29zZUVxdWFsLFxuXHRpc0FycmF5OiBpc0FycmF5LFxuXHRoYXNQcm90bzogaGFzUHJvdG8sXG5cdGluQnJvd3NlcjogaW5Ccm93c2VyLFxuXHRkZXZ0b29sczogZGV2dG9vbHMsXG5cdGlzSUU6IGlzSUUsXG5cdGlzSUU5OiBpc0lFOSxcblx0aXNBbmRyb2lkOiBpc0FuZHJvaWQsXG5cdGlzSW9zOiBpc0lvcyxcblx0aW9zVmVyc2lvbk1hdGNoOiBpb3NWZXJzaW9uTWF0Y2gsXG5cdGlvc1ZlcnNpb246IGlvc1ZlcnNpb24sXG5cdGhhc011dGF0aW9uT2JzZXJ2ZXJCdWc6IGhhc011dGF0aW9uT2JzZXJ2ZXJCdWcsXG5cdGdldCB0cmFuc2l0aW9uUHJvcCAoKSB7IHJldHVybiB0cmFuc2l0aW9uUHJvcDsgfSxcblx0Z2V0IHRyYW5zaXRpb25FbmRFdmVudCAoKSB7IHJldHVybiB0cmFuc2l0aW9uRW5kRXZlbnQ7IH0sXG5cdGdldCBhbmltYXRpb25Qcm9wICgpIHsgcmV0dXJuIGFuaW1hdGlvblByb3A7IH0sXG5cdGdldCBhbmltYXRpb25FbmRFdmVudCAoKSB7IHJldHVybiBhbmltYXRpb25FbmRFdmVudDsgfSxcblx0bmV4dFRpY2s6IG5leHRUaWNrLFxuXHRnZXQgX1NldCAoKSB7IHJldHVybiBfU2V0OyB9LFxuXHRxdWVyeTogcXVlcnksXG5cdGluRG9jOiBpbkRvYyxcblx0Z2V0QXR0cjogZ2V0QXR0cixcblx0Z2V0QmluZEF0dHI6IGdldEJpbmRBdHRyLFxuXHRoYXNCaW5kQXR0cjogaGFzQmluZEF0dHIsXG5cdGJlZm9yZTogYmVmb3JlLFxuXHRhZnRlcjogYWZ0ZXIsXG5cdHJlbW92ZTogcmVtb3ZlLFxuXHRwcmVwZW5kOiBwcmVwZW5kLFxuXHRyZXBsYWNlOiByZXBsYWNlLFxuXHRvbjogb24sXG5cdG9mZjogb2ZmLFxuXHRzZXRDbGFzczogc2V0Q2xhc3MsXG5cdGFkZENsYXNzOiBhZGRDbGFzcyxcblx0cmVtb3ZlQ2xhc3M6IHJlbW92ZUNsYXNzLFxuXHRleHRyYWN0Q29udGVudDogZXh0cmFjdENvbnRlbnQsXG5cdHRyaW1Ob2RlOiB0cmltTm9kZSxcblx0aXNUZW1wbGF0ZTogaXNUZW1wbGF0ZSxcblx0Y3JlYXRlQW5jaG9yOiBjcmVhdGVBbmNob3IsXG5cdGZpbmRSZWY6IGZpbmRSZWYsXG5cdG1hcE5vZGVSYW5nZTogbWFwTm9kZVJhbmdlLFxuXHRyZW1vdmVOb2RlUmFuZ2U6IHJlbW92ZU5vZGVSYW5nZSxcblx0aXNGcmFnbWVudDogaXNGcmFnbWVudCxcblx0Z2V0T3V0ZXJIVE1MOiBnZXRPdXRlckhUTUwsXG5cdG1lcmdlT3B0aW9uczogbWVyZ2VPcHRpb25zLFxuXHRyZXNvbHZlQXNzZXQ6IHJlc29sdmVBc3NldCxcblx0Y2hlY2tDb21wb25lbnRBdHRyOiBjaGVja0NvbXBvbmVudEF0dHIsXG5cdGNvbW1vblRhZ1JFOiBjb21tb25UYWdSRSxcblx0cmVzZXJ2ZWRUYWdSRTogcmVzZXJ2ZWRUYWdSRSxcblx0Z2V0IHdhcm4gKCkgeyByZXR1cm4gd2FybjsgfVxufSk7XG5cbnZhciB1aWQgPSAwO1xuXG5mdW5jdGlvbiBpbml0TWl4aW4gKFZ1ZSkge1xuICAvKipcbiAgICogVGhlIG1haW4gaW5pdCBzZXF1ZW5jZS4gVGhpcyBpcyBjYWxsZWQgZm9yIGV2ZXJ5XG4gICAqIGluc3RhbmNlLCBpbmNsdWRpbmcgb25lcyB0aGF0IGFyZSBjcmVhdGVkIGZyb20gZXh0ZW5kZWRcbiAgICogY29uc3RydWN0b3JzLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIHRoaXMgb3B0aW9ucyBvYmplY3Qgc2hvdWxkIGJlXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHJlc3VsdCBvZiBtZXJnaW5nIGNsYXNzXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyBhbmQgdGhlIG9wdGlvbnMgcGFzc2VkXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gdG8gdGhlIGNvbnN0cnVjdG9yLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIHRoaXMuJGVsID0gbnVsbDtcbiAgICB0aGlzLiRwYXJlbnQgPSBvcHRpb25zLnBhcmVudDtcbiAgICB0aGlzLiRyb290ID0gdGhpcy4kcGFyZW50ID8gdGhpcy4kcGFyZW50LiRyb290IDogdGhpcztcbiAgICB0aGlzLiRjaGlsZHJlbiA9IFtdO1xuICAgIHRoaXMuJHJlZnMgPSB7fTsgLy8gY2hpbGQgdm0gcmVmZXJlbmNlc1xuICAgIHRoaXMuJGVscyA9IHt9OyAvLyBlbGVtZW50IHJlZmVyZW5jZXNcbiAgICB0aGlzLl93YXRjaGVycyA9IFtdOyAvLyBhbGwgd2F0Y2hlcnMgYXMgYW4gYXJyYXlcbiAgICB0aGlzLl9kaXJlY3RpdmVzID0gW107IC8vIGFsbCBkaXJlY3RpdmVzXG5cbiAgICAvLyBhIHVpZFxuICAgIHRoaXMuX3VpZCA9IHVpZCsrO1xuXG4gICAgLy8gYSBmbGFnIHRvIGF2b2lkIHRoaXMgYmVpbmcgb2JzZXJ2ZWRcbiAgICB0aGlzLl9pc1Z1ZSA9IHRydWU7XG5cbiAgICAvLyBldmVudHMgYm9va2tlZXBpbmdcbiAgICB0aGlzLl9ldmVudHMgPSB7fTsgLy8gcmVnaXN0ZXJlZCBjYWxsYmFja3NcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IHt9OyAvLyBmb3IgJGJyb2FkY2FzdCBvcHRpbWl6YXRpb25cblxuICAgIC8vIGZyYWdtZW50IGluc3RhbmNlIHByb3BlcnRpZXNcbiAgICB0aGlzLl9pc0ZyYWdtZW50ID0gZmFsc2U7XG4gICAgdGhpcy5fZnJhZ21lbnQgPSAvLyBAdHlwZSB7RG9jdW1lbnRGcmFnbWVudH1cbiAgICB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gLy8gQHR5cGUge1RleHR8Q29tbWVudH1cbiAgICB0aGlzLl9mcmFnbWVudEVuZCA9IG51bGw7IC8vIEB0eXBlIHtUZXh0fENvbW1lbnR9XG5cbiAgICAvLyBsaWZlY3ljbGUgc3RhdGVcbiAgICB0aGlzLl9pc0NvbXBpbGVkID0gdGhpcy5faXNEZXN0cm95ZWQgPSB0aGlzLl9pc1JlYWR5ID0gdGhpcy5faXNBdHRhY2hlZCA9IHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgPSB0aGlzLl92Rm9yUmVtb3ZpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl91bmxpbmtGbiA9IG51bGw7XG5cbiAgICAvLyBjb250ZXh0OlxuICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGNvbnRleHRcbiAgICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2VcbiAgICAvLyBhbmQgaXRzIGhvc3QuXG4gICAgdGhpcy5fY29udGV4dCA9IG9wdGlvbnMuX2NvbnRleHQgfHwgdGhpcy4kcGFyZW50O1xuXG4gICAgLy8gc2NvcGU6XG4gICAgLy8gaWYgdGhpcyBpcyBpbnNpZGUgYW4gaW5saW5lIHYtZm9yLCB0aGUgc2NvcGVcbiAgICAvLyB3aWxsIGJlIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgY3JlYXRlZCBmb3IgdGhpc1xuICAgIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXG4gICAgLy8gYW5kIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuICAgIHRoaXMuX3Njb3BlID0gb3B0aW9ucy5fc2NvcGU7XG5cbiAgICAvLyBmcmFnbWVudDpcbiAgICAvLyBpZiB0aGlzIGluc3RhbmNlIGlzIGNvbXBpbGVkIGluc2lkZSBhIEZyYWdtZW50LCBpdFxuICAgIC8vIG5lZWRzIHRvIHJlaWdzdGVyIGl0c2VsZiBhcyBhIGNoaWxkIG9mIHRoYXQgZnJhZ21lbnRcbiAgICAvLyBmb3IgYXR0YWNoL2RldGFjaCB0byB3b3JrIHByb3Blcmx5LlxuICAgIHRoaXMuX2ZyYWcgPSBvcHRpb25zLl9mcmFnO1xuICAgIGlmICh0aGlzLl9mcmFnKSB7XG4gICAgICB0aGlzLl9mcmFnLmNoaWxkcmVuLnB1c2godGhpcyk7XG4gICAgfVxuXG4gICAgLy8gcHVzaCBzZWxmIGludG8gcGFyZW50IC8gdHJhbnNjbHVzaW9uIGhvc3RcbiAgICBpZiAodGhpcy4kcGFyZW50KSB7XG4gICAgICB0aGlzLiRwYXJlbnQuJGNoaWxkcmVuLnB1c2godGhpcyk7XG4gICAgfVxuXG4gICAgLy8gbWVyZ2Ugb3B0aW9ucy5cbiAgICBvcHRpb25zID0gdGhpcy4kb3B0aW9ucyA9IG1lcmdlT3B0aW9ucyh0aGlzLmNvbnN0cnVjdG9yLm9wdGlvbnMsIG9wdGlvbnMsIHRoaXMpO1xuXG4gICAgLy8gc2V0IHJlZlxuICAgIHRoaXMuX3VwZGF0ZVJlZigpO1xuXG4gICAgLy8gaW5pdGlhbGl6ZSBkYXRhIGFzIGVtcHR5IG9iamVjdC5cbiAgICAvLyBpdCB3aWxsIGJlIGZpbGxlZCB1cCBpbiBfaW5pdERhdGEoKS5cbiAgICB0aGlzLl9kYXRhID0ge307XG5cbiAgICAvLyBjYWxsIGluaXQgaG9va1xuICAgIHRoaXMuX2NhbGxIb29rKCdpbml0Jyk7XG5cbiAgICAvLyBpbml0aWFsaXplIGRhdGEgb2JzZXJ2YXRpb24gYW5kIHNjb3BlIGluaGVyaXRhbmNlLlxuICAgIHRoaXMuX2luaXRTdGF0ZSgpO1xuXG4gICAgLy8gc2V0dXAgZXZlbnQgc3lzdGVtIGFuZCBvcHRpb24gZXZlbnRzLlxuICAgIHRoaXMuX2luaXRFdmVudHMoKTtcblxuICAgIC8vIGNhbGwgY3JlYXRlZCBob29rXG4gICAgdGhpcy5fY2FsbEhvb2soJ2NyZWF0ZWQnKTtcblxuICAgIC8vIGlmIGBlbGAgb3B0aW9uIGlzIHBhc3NlZCwgc3RhcnQgY29tcGlsYXRpb24uXG4gICAgaWYgKG9wdGlvbnMuZWwpIHtcbiAgICAgIHRoaXMuJG1vdW50KG9wdGlvbnMuZWwpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIHBhdGhDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblxuLy8gYWN0aW9uc1xudmFyIEFQUEVORCA9IDA7XG52YXIgUFVTSCA9IDE7XG52YXIgSU5DX1NVQl9QQVRIX0RFUFRIID0gMjtcbnZhciBQVVNIX1NVQl9QQVRIID0gMztcblxuLy8gc3RhdGVzXG52YXIgQkVGT1JFX1BBVEggPSAwO1xudmFyIElOX1BBVEggPSAxO1xudmFyIEJFRk9SRV9JREVOVCA9IDI7XG52YXIgSU5fSURFTlQgPSAzO1xudmFyIElOX1NVQl9QQVRIID0gNDtcbnZhciBJTl9TSU5HTEVfUVVPVEUgPSA1O1xudmFyIElOX0RPVUJMRV9RVU9URSA9IDY7XG52YXIgQUZURVJfUEFUSCA9IDc7XG52YXIgRVJST1IgPSA4O1xuXG52YXIgcGF0aFN0YXRlTWFjaGluZSA9IFtdO1xuXG5wYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9QQVRIXSA9IHtcbiAgJ3dzJzogW0JFRk9SRV9QQVRIXSxcbiAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnWyc6IFtJTl9TVUJfUEFUSF0sXG4gICdlb2YnOiBbQUZURVJfUEFUSF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fUEFUSF0gPSB7XG4gICd3cyc6IFtJTl9QQVRIXSxcbiAgJy4nOiBbQkVGT1JFX0lERU5UXSxcbiAgJ1snOiBbSU5fU1VCX1BBVEhdLFxuICAnZW9mJzogW0FGVEVSX1BBVEhdXG59O1xuXG5wYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9JREVOVF0gPSB7XG4gICd3cyc6IFtCRUZPUkVfSURFTlRdLFxuICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fSURFTlRdID0ge1xuICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sXG4gICcwJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnbnVtYmVyJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnd3MnOiBbSU5fUEFUSCwgUFVTSF0sXG4gICcuJzogW0JFRk9SRV9JREVOVCwgUFVTSF0sXG4gICdbJzogW0lOX1NVQl9QQVRILCBQVVNIXSxcbiAgJ2VvZic6IFtBRlRFUl9QQVRILCBQVVNIXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtJTl9TVUJfUEFUSF0gPSB7XG4gIFwiJ1wiOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkRdLFxuICAnXCInOiBbSU5fRE9VQkxFX1FVT1RFLCBBUFBFTkRdLFxuICAnWyc6IFtJTl9TVUJfUEFUSCwgSU5DX1NVQl9QQVRIX0RFUFRIXSxcbiAgJ10nOiBbSU5fUEFUSCwgUFVTSF9TVUJfUEFUSF0sXG4gICdlb2YnOiBFUlJPUixcbiAgJ2Vsc2UnOiBbSU5fU1VCX1BBVEgsIEFQUEVORF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fU0lOR0xFX1FVT1RFXSA9IHtcbiAgXCInXCI6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXSxcbiAgJ2VvZic6IEVSUk9SLFxuICAnZWxzZSc6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fRE9VQkxFX1FVT1RFXSA9IHtcbiAgJ1wiJzogW0lOX1NVQl9QQVRILCBBUFBFTkRdLFxuICAnZW9mJzogRVJST1IsXG4gICdlbHNlJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5EXVxufTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgdGhlIHR5cGUgb2YgYSBjaGFyYWN0ZXIgaW4gYSBrZXlwYXRoLlxuICpcbiAqIEBwYXJhbSB7Q2hhcn0gY2hcbiAqIEByZXR1cm4ge1N0cmluZ30gdHlwZVxuICovXG5cbmZ1bmN0aW9uIGdldFBhdGhDaGFyVHlwZShjaCkge1xuICBpZiAoY2ggPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAnZW9mJztcbiAgfVxuXG4gIHZhciBjb2RlID0gY2guY2hhckNvZGVBdCgwKTtcblxuICBzd2l0Y2ggKGNvZGUpIHtcbiAgICBjYXNlIDB4NUI6IC8vIFtcbiAgICBjYXNlIDB4NUQ6IC8vIF1cbiAgICBjYXNlIDB4MkU6IC8vIC5cbiAgICBjYXNlIDB4MjI6IC8vIFwiXG4gICAgY2FzZSAweDI3OiAvLyAnXG4gICAgY2FzZSAweDMwOlxuICAgICAgLy8gMFxuICAgICAgcmV0dXJuIGNoO1xuXG4gICAgY2FzZSAweDVGOiAvLyBfXG4gICAgY2FzZSAweDI0OlxuICAgICAgLy8gJFxuICAgICAgcmV0dXJuICdpZGVudCc7XG5cbiAgICBjYXNlIDB4MjA6IC8vIFNwYWNlXG4gICAgY2FzZSAweDA5OiAvLyBUYWJcbiAgICBjYXNlIDB4MEE6IC8vIE5ld2xpbmVcbiAgICBjYXNlIDB4MEQ6IC8vIFJldHVyblxuICAgIGNhc2UgMHhBMDogLy8gTm8tYnJlYWsgc3BhY2VcbiAgICBjYXNlIDB4RkVGRjogLy8gQnl0ZSBPcmRlciBNYXJrXG4gICAgY2FzZSAweDIwMjg6IC8vIExpbmUgU2VwYXJhdG9yXG4gICAgY2FzZSAweDIwMjk6XG4gICAgICAvLyBQYXJhZ3JhcGggU2VwYXJhdG9yXG4gICAgICByZXR1cm4gJ3dzJztcbiAgfVxuXG4gIC8vIGEteiwgQS1aXG4gIGlmIChjb2RlID49IDB4NjEgJiYgY29kZSA8PSAweDdBIHx8IGNvZGUgPj0gMHg0MSAmJiBjb2RlIDw9IDB4NUEpIHtcbiAgICByZXR1cm4gJ2lkZW50JztcbiAgfVxuXG4gIC8vIDEtOVxuICBpZiAoY29kZSA+PSAweDMxICYmIGNvZGUgPD0gMHgzOSkge1xuICAgIHJldHVybiAnbnVtYmVyJztcbiAgfVxuXG4gIHJldHVybiAnZWxzZSc7XG59XG5cbi8qKlxuICogRm9ybWF0IGEgc3ViUGF0aCwgcmV0dXJuIGl0cyBwbGFpbiBmb3JtIGlmIGl0IGlzXG4gKiBhIGxpdGVyYWwgc3RyaW5nIG9yIG51bWJlci4gT3RoZXJ3aXNlIHByZXBlbmQgdGhlXG4gKiBkeW5hbWljIGluZGljYXRvciAoKikuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRTdWJQYXRoKHBhdGgpIHtcbiAgdmFyIHRyaW1tZWQgPSBwYXRoLnRyaW0oKTtcbiAgLy8gaW52YWxpZCBsZWFkaW5nIDBcbiAgaWYgKHBhdGguY2hhckF0KDApID09PSAnMCcgJiYgaXNOYU4ocGF0aCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIGlzTGl0ZXJhbCh0cmltbWVkKSA/IHN0cmlwUXVvdGVzKHRyaW1tZWQpIDogJyonICsgdHJpbW1lZDtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHN0cmluZyBwYXRoIGludG8gYW4gYXJyYXkgb2Ygc2VnbWVudHNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICogQHJldHVybiB7QXJyYXl8dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlKHBhdGgpIHtcbiAgdmFyIGtleXMgPSBbXTtcbiAgdmFyIGluZGV4ID0gLTE7XG4gIHZhciBtb2RlID0gQkVGT1JFX1BBVEg7XG4gIHZhciBzdWJQYXRoRGVwdGggPSAwO1xuICB2YXIgYywgbmV3Q2hhciwga2V5LCB0eXBlLCB0cmFuc2l0aW9uLCBhY3Rpb24sIHR5cGVNYXA7XG5cbiAgdmFyIGFjdGlvbnMgPSBbXTtcblxuICBhY3Rpb25zW1BVU0hdID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgICBrZXkgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9O1xuXG4gIGFjdGlvbnNbQVBQRU5EXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGtleSA9IG5ld0NoYXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleSArPSBuZXdDaGFyO1xuICAgIH1cbiAgfTtcblxuICBhY3Rpb25zW0lOQ19TVUJfUEFUSF9ERVBUSF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgYWN0aW9uc1tBUFBFTkRdKCk7XG4gICAgc3ViUGF0aERlcHRoKys7XG4gIH07XG5cbiAgYWN0aW9uc1tQVVNIX1NVQl9QQVRIXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc3ViUGF0aERlcHRoID4gMCkge1xuICAgICAgc3ViUGF0aERlcHRoLS07XG4gICAgICBtb2RlID0gSU5fU1VCX1BBVEg7XG4gICAgICBhY3Rpb25zW0FQUEVORF0oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3ViUGF0aERlcHRoID0gMDtcbiAgICAgIGtleSA9IGZvcm1hdFN1YlBhdGgoa2V5KTtcbiAgICAgIGlmIChrZXkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFjdGlvbnNbUFVTSF0oKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gbWF5YmVVbmVzY2FwZVF1b3RlKCkge1xuICAgIHZhciBuZXh0Q2hhciA9IHBhdGhbaW5kZXggKyAxXTtcbiAgICBpZiAobW9kZSA9PT0gSU5fU0lOR0xFX1FVT1RFICYmIG5leHRDaGFyID09PSBcIidcIiB8fCBtb2RlID09PSBJTl9ET1VCTEVfUVVPVEUgJiYgbmV4dENoYXIgPT09ICdcIicpIHtcbiAgICAgIGluZGV4Kys7XG4gICAgICBuZXdDaGFyID0gJ1xcXFwnICsgbmV4dENoYXI7XG4gICAgICBhY3Rpb25zW0FQUEVORF0oKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHdoaWxlIChtb2RlICE9IG51bGwpIHtcbiAgICBpbmRleCsrO1xuICAgIGMgPSBwYXRoW2luZGV4XTtcblxuICAgIGlmIChjID09PSAnXFxcXCcgJiYgbWF5YmVVbmVzY2FwZVF1b3RlKCkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHR5cGUgPSBnZXRQYXRoQ2hhclR5cGUoYyk7XG4gICAgdHlwZU1hcCA9IHBhdGhTdGF0ZU1hY2hpbmVbbW9kZV07XG4gICAgdHJhbnNpdGlvbiA9IHR5cGVNYXBbdHlwZV0gfHwgdHlwZU1hcFsnZWxzZSddIHx8IEVSUk9SO1xuXG4gICAgaWYgKHRyYW5zaXRpb24gPT09IEVSUk9SKSB7XG4gICAgICByZXR1cm47IC8vIHBhcnNlIGVycm9yXG4gICAgfVxuXG4gICAgbW9kZSA9IHRyYW5zaXRpb25bMF07XG4gICAgYWN0aW9uID0gYWN0aW9uc1t0cmFuc2l0aW9uWzFdXTtcbiAgICBpZiAoYWN0aW9uKSB7XG4gICAgICBuZXdDaGFyID0gdHJhbnNpdGlvblsyXTtcbiAgICAgIG5ld0NoYXIgPSBuZXdDaGFyID09PSB1bmRlZmluZWQgPyBjIDogbmV3Q2hhcjtcbiAgICAgIGlmIChhY3Rpb24oKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtb2RlID09PSBBRlRFUl9QQVRIKSB7XG4gICAgICBrZXlzLnJhdyA9IHBhdGg7XG4gICAgICByZXR1cm4ga2V5cztcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRlcm5hbCBwYXJzZSB0aGF0IGNoZWNrIGZvciBhIGNhY2hlIGhpdCBmaXJzdFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgpIHtcbiAgdmFyIGhpdCA9IHBhdGhDYWNoZS5nZXQocGF0aCk7XG4gIGlmICghaGl0KSB7XG4gICAgaGl0ID0gcGFyc2UocGF0aCk7XG4gICAgaWYgKGhpdCkge1xuICAgICAgcGF0aENhY2hlLnB1dChwYXRoLCBoaXQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaGl0O1xufVxuXG4vKipcbiAqIEdldCBmcm9tIGFuIG9iamVjdCBmcm9tIGEgcGF0aCBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICovXG5cbmZ1bmN0aW9uIGdldFBhdGgob2JqLCBwYXRoKSB7XG4gIHJldHVybiBwYXJzZUV4cHJlc3Npb24ocGF0aCkuZ2V0KG9iaik7XG59XG5cbi8qKlxuICogV2FybiBhZ2FpbnN0IHNldHRpbmcgbm9uLWV4aXN0ZW50IHJvb3QgcGF0aCBvbiBhIHZtLlxuICovXG5cbnZhciB3YXJuTm9uRXhpc3RlbnQ7XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICB3YXJuTm9uRXhpc3RlbnQgPSBmdW5jdGlvbiAocGF0aCwgdm0pIHtcbiAgICB3YXJuKCdZb3UgYXJlIHNldHRpbmcgYSBub24tZXhpc3RlbnQgcGF0aCBcIicgKyBwYXRoLnJhdyArICdcIiAnICsgJ29uIGEgdm0gaW5zdGFuY2UuIENvbnNpZGVyIHByZS1pbml0aWFsaXppbmcgdGhlIHByb3BlcnR5ICcgKyAnd2l0aCB0aGUgXCJkYXRhXCIgb3B0aW9uIGZvciBtb3JlIHJlbGlhYmxlIHJlYWN0aXZpdHkgJyArICdhbmQgYmV0dGVyIHBlcmZvcm1hbmNlLicsIHZtKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBTZXQgb24gYW4gb2JqZWN0IGZyb20gYSBwYXRoXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmcgfCBBcnJheX0gcGF0aFxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5mdW5jdGlvbiBzZXRQYXRoKG9iaiwgcGF0aCwgdmFsKSB7XG4gIHZhciBvcmlnaW5hbCA9IG9iajtcbiAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgIHBhdGggPSBwYXJzZShwYXRoKTtcbiAgfVxuICBpZiAoIXBhdGggfHwgIWlzT2JqZWN0KG9iaikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIGxhc3QsIGtleTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBwYXRoLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGxhc3QgPSBvYmo7XG4gICAga2V5ID0gcGF0aFtpXTtcbiAgICBpZiAoa2V5LmNoYXJBdCgwKSA9PT0gJyonKSB7XG4gICAgICBrZXkgPSBwYXJzZUV4cHJlc3Npb24oa2V5LnNsaWNlKDEpKS5nZXQuY2FsbChvcmlnaW5hbCwgb3JpZ2luYWwpO1xuICAgIH1cbiAgICBpZiAoaSA8IGwgLSAxKSB7XG4gICAgICBvYmogPSBvYmpba2V5XTtcbiAgICAgIGlmICghaXNPYmplY3Qob2JqKSkge1xuICAgICAgICBvYmogPSB7fTtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgbGFzdC5faXNWdWUpIHtcbiAgICAgICAgICB3YXJuTm9uRXhpc3RlbnQocGF0aCwgbGFzdCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0KGxhc3QsIGtleSwgb2JqKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGlzQXJyYXkob2JqKSkge1xuICAgICAgICBvYmouJHNldChrZXksIHZhbCk7XG4gICAgICB9IGVsc2UgaWYgKGtleSBpbiBvYmopIHtcbiAgICAgICAgb2JqW2tleV0gPSB2YWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBvYmouX2lzVnVlKSB7XG4gICAgICAgICAgd2Fybk5vbkV4aXN0ZW50KHBhdGgsIG9iaik7XG4gICAgICAgIH1cbiAgICAgICAgc2V0KG9iaiwga2V5LCB2YWwpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxudmFyIHBhdGggPSBPYmplY3QuZnJlZXplKHtcbiAgcGFyc2VQYXRoOiBwYXJzZVBhdGgsXG4gIGdldFBhdGg6IGdldFBhdGgsXG4gIHNldFBhdGg6IHNldFBhdGhcbn0pO1xuXG52YXIgZXhwcmVzc2lvbkNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXG52YXIgYWxsb3dlZEtleXdvcmRzID0gJ01hdGgsRGF0ZSx0aGlzLHRydWUsZmFsc2UsbnVsbCx1bmRlZmluZWQsSW5maW5pdHksTmFOLCcgKyAnaXNOYU4saXNGaW5pdGUsZGVjb2RlVVJJLGRlY29kZVVSSUNvbXBvbmVudCxlbmNvZGVVUkksJyArICdlbmNvZGVVUklDb21wb25lbnQscGFyc2VJbnQscGFyc2VGbG9hdCc7XG52YXIgYWxsb3dlZEtleXdvcmRzUkUgPSBuZXcgUmVnRXhwKCdeKCcgKyBhbGxvd2VkS2V5d29yZHMucmVwbGFjZSgvLC9nLCAnXFxcXGJ8JykgKyAnXFxcXGIpJyk7XG5cbi8vIGtleXdvcmRzIHRoYXQgZG9uJ3QgbWFrZSBzZW5zZSBpbnNpZGUgZXhwcmVzc2lvbnNcbnZhciBpbXByb3BlcktleXdvcmRzID0gJ2JyZWFrLGNhc2UsY2xhc3MsY2F0Y2gsY29uc3QsY29udGludWUsZGVidWdnZXIsZGVmYXVsdCwnICsgJ2RlbGV0ZSxkbyxlbHNlLGV4cG9ydCxleHRlbmRzLGZpbmFsbHksZm9yLGZ1bmN0aW9uLGlmLCcgKyAnaW1wb3J0LGluLGluc3RhbmNlb2YsbGV0LHJldHVybixzdXBlcixzd2l0Y2gsdGhyb3csdHJ5LCcgKyAndmFyLHdoaWxlLHdpdGgseWllbGQsZW51bSxhd2FpdCxpbXBsZW1lbnRzLHBhY2thZ2UsJyArICdwcm90ZWN0ZWQsc3RhdGljLGludGVyZmFjZSxwcml2YXRlLHB1YmxpYyc7XG52YXIgaW1wcm9wZXJLZXl3b3Jkc1JFID0gbmV3IFJlZ0V4cCgnXignICsgaW1wcm9wZXJLZXl3b3Jkcy5yZXBsYWNlKC8sL2csICdcXFxcYnwnKSArICdcXFxcYiknKTtcblxudmFyIHdzUkUgPSAvXFxzL2c7XG52YXIgbmV3bGluZVJFID0gL1xcbi9nO1xudmFyIHNhdmVSRSA9IC9bXFx7LF1cXHMqW1xcd1xcJF9dK1xccyo6fCgnKD86W14nXFxcXF18XFxcXC4pKid8XCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifGAoPzpbXmBcXFxcXXxcXFxcLikqXFwkXFx7fFxcfSg/OlteYFxcXFxdfFxcXFwuKSpgfGAoPzpbXmBcXFxcXXxcXFxcLikqYCl8bmV3IHx0eXBlb2YgfHZvaWQgL2c7XG52YXIgcmVzdG9yZVJFID0gL1wiKFxcZCspXCIvZztcbnZhciBwYXRoVGVzdFJFID0gL15bQS1aYS16XyRdW1xcdyRdKig/OlxcLltBLVphLXpfJF1bXFx3JF0qfFxcWycuKj8nXFxdfFxcW1wiLio/XCJcXF18XFxbXFxkK1xcXXxcXFtbQS1aYS16XyRdW1xcdyRdKlxcXSkqJC87XG52YXIgaWRlbnRSRSA9IC9bXlxcdyRcXC5dKD86W0EtWmEtel8kXVtcXHckXSopL2c7XG52YXIgbGl0ZXJhbFZhbHVlUkUkMSA9IC9eKD86dHJ1ZXxmYWxzZXxudWxsfHVuZGVmaW5lZHxJbmZpbml0eXxOYU4pJC87XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG4vKipcbiAqIFNhdmUgLyBSZXdyaXRlIC8gUmVzdG9yZVxuICpcbiAqIFdoZW4gcmV3cml0aW5nIHBhdGhzIGZvdW5kIGluIGFuIGV4cHJlc3Npb24sIGl0IGlzXG4gKiBwb3NzaWJsZSBmb3IgdGhlIHNhbWUgbGV0dGVyIHNlcXVlbmNlcyB0byBiZSBmb3VuZCBpblxuICogc3RyaW5ncyBhbmQgT2JqZWN0IGxpdGVyYWwgcHJvcGVydHkga2V5cy4gVGhlcmVmb3JlIHdlXG4gKiByZW1vdmUgYW5kIHN0b3JlIHRoZXNlIHBhcnRzIGluIGEgdGVtcG9yYXJ5IGFycmF5LCBhbmRcbiAqIHJlc3RvcmUgdGhlbSBhZnRlciB0aGUgcGF0aCByZXdyaXRlLlxuICovXG5cbnZhciBzYXZlZCA9IFtdO1xuXG4vKipcbiAqIFNhdmUgcmVwbGFjZXJcbiAqXG4gKiBUaGUgc2F2ZSByZWdleCBjYW4gbWF0Y2ggdHdvIHBvc3NpYmxlIGNhc2VzOlxuICogMS4gQW4gb3BlbmluZyBvYmplY3QgbGl0ZXJhbFxuICogMi4gQSBzdHJpbmdcbiAqIElmIG1hdGNoZWQgYXMgYSBwbGFpbiBzdHJpbmcsIHdlIG5lZWQgdG8gZXNjYXBlIGl0c1xuICogbmV3bGluZXMsIHNpbmNlIHRoZSBzdHJpbmcgbmVlZHMgdG8gYmUgcHJlc2VydmVkIHdoZW5cbiAqIGdlbmVyYXRpbmcgdGhlIGZ1bmN0aW9uIGJvZHkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtTdHJpbmd9IGlzU3RyaW5nIC0gc3RyIGlmIG1hdGNoZWQgYXMgYSBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ30gLSBwbGFjZWhvbGRlciB3aXRoIGluZGV4XG4gKi9cblxuZnVuY3Rpb24gc2F2ZShzdHIsIGlzU3RyaW5nKSB7XG4gIHZhciBpID0gc2F2ZWQubGVuZ3RoO1xuICBzYXZlZFtpXSA9IGlzU3RyaW5nID8gc3RyLnJlcGxhY2UobmV3bGluZVJFLCAnXFxcXG4nKSA6IHN0cjtcbiAgcmV0dXJuICdcIicgKyBpICsgJ1wiJztcbn1cblxuLyoqXG4gKiBQYXRoIHJld3JpdGUgcmVwbGFjZXJcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcmF3XG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gcmV3cml0ZShyYXcpIHtcbiAgdmFyIGMgPSByYXcuY2hhckF0KDApO1xuICB2YXIgcGF0aCA9IHJhdy5zbGljZSgxKTtcbiAgaWYgKGFsbG93ZWRLZXl3b3Jkc1JFLnRlc3QocGF0aCkpIHtcbiAgICByZXR1cm4gcmF3O1xuICB9IGVsc2Uge1xuICAgIHBhdGggPSBwYXRoLmluZGV4T2YoJ1wiJykgPiAtMSA/IHBhdGgucmVwbGFjZShyZXN0b3JlUkUsIHJlc3RvcmUpIDogcGF0aDtcbiAgICByZXR1cm4gYyArICdzY29wZS4nICsgcGF0aDtcbiAgfVxufVxuXG4vKipcbiAqIFJlc3RvcmUgcmVwbGFjZXJcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge1N0cmluZ30gaSAtIG1hdGNoZWQgc2F2ZSBpbmRleFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHJlc3RvcmUoc3RyLCBpKSB7XG4gIHJldHVybiBzYXZlZFtpXTtcbn1cblxuLyoqXG4gKiBSZXdyaXRlIGFuIGV4cHJlc3Npb24sIHByZWZpeGluZyBhbGwgcGF0aCBhY2Nlc3NvcnMgd2l0aFxuICogYHNjb3BlLmAgYW5kIGdlbmVyYXRlIGdldHRlci9zZXR0ZXIgZnVuY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVHZXR0ZXIoZXhwKSB7XG4gIGlmIChpbXByb3BlcktleXdvcmRzUkUudGVzdChleHApKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdBdm9pZCB1c2luZyByZXNlcnZlZCBrZXl3b3JkcyBpbiBleHByZXNzaW9uOiAnICsgZXhwKTtcbiAgfVxuICAvLyByZXNldCBzdGF0ZVxuICBzYXZlZC5sZW5ndGggPSAwO1xuICAvLyBzYXZlIHN0cmluZ3MgYW5kIG9iamVjdCBsaXRlcmFsIGtleXNcbiAgdmFyIGJvZHkgPSBleHAucmVwbGFjZShzYXZlUkUsIHNhdmUpLnJlcGxhY2Uod3NSRSwgJycpO1xuICAvLyByZXdyaXRlIGFsbCBwYXRoc1xuICAvLyBwYWQgMSBzcGFjZSBoZXJlIGJlY2F1c2UgdGhlIHJlZ2V4IG1hdGNoZXMgMSBleHRyYSBjaGFyXG4gIGJvZHkgPSAoJyAnICsgYm9keSkucmVwbGFjZShpZGVudFJFLCByZXdyaXRlKS5yZXBsYWNlKHJlc3RvcmVSRSwgcmVzdG9yZSk7XG4gIHJldHVybiBtYWtlR2V0dGVyRm4oYm9keSk7XG59XG5cbi8qKlxuICogQnVpbGQgYSBnZXR0ZXIgZnVuY3Rpb24uIFJlcXVpcmVzIGV2YWwuXG4gKlxuICogV2UgaXNvbGF0ZSB0aGUgdHJ5L2NhdGNoIHNvIGl0IGRvZXNuJ3QgYWZmZWN0IHRoZVxuICogb3B0aW1pemF0aW9uIG9mIHRoZSBwYXJzZSBmdW5jdGlvbiB3aGVuIGl0IGlzIG5vdCBjYWxsZWQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGJvZHlcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBtYWtlR2V0dGVyRm4oYm9keSkge1xuICB0cnkge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jICovXG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbignc2NvcGUnLCAncmV0dXJuICcgKyBib2R5ICsgJzsnKTtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLW5ldy1mdW5jICovXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoZS50b1N0cmluZygpLm1hdGNoKC91bnNhZmUtZXZhbHxDU1AvKSkge1xuICAgICAgICB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHRoZSBkZWZhdWx0IGJ1aWxkIG9mIFZ1ZS5qcyBpbiBhbiBlbnZpcm9ubWVudCAnICsgJ3dpdGggQ29udGVudCBTZWN1cml0eSBQb2xpY3kgdGhhdCBwcm9oaWJpdHMgdW5zYWZlLWV2YWwuICcgKyAnVXNlIHRoZSBDU1AtY29tcGxpYW50IGJ1aWxkIGluc3RlYWQ6ICcgKyAnaHR0cDovL3Z1ZWpzLm9yZy9ndWlkZS9pbnN0YWxsYXRpb24uaHRtbCNDU1AtY29tcGxpYW50LWJ1aWxkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3YXJuKCdJbnZhbGlkIGV4cHJlc3Npb24uICcgKyAnR2VuZXJhdGVkIGZ1bmN0aW9uIGJvZHk6ICcgKyBib2R5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vb3A7XG4gIH1cbn1cblxuLyoqXG4gKiBDb21waWxlIGEgc2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgZXhwcmVzc2lvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZVNldHRlcihleHApIHtcbiAgdmFyIHBhdGggPSBwYXJzZVBhdGgoZXhwKTtcbiAgaWYgKHBhdGgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCB2YWwpIHtcbiAgICAgIHNldFBhdGgoc2NvcGUsIHBhdGgsIHZhbCk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgc2V0dGVyIGV4cHJlc3Npb246ICcgKyBleHApO1xuICB9XG59XG5cbi8qKlxuICogUGFyc2UgYW4gZXhwcmVzc2lvbiBpbnRvIHJlLXdyaXR0ZW4gZ2V0dGVyL3NldHRlcnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHBhcmFtIHtCb29sZWFufSBuZWVkU2V0XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZUV4cHJlc3Npb24oZXhwLCBuZWVkU2V0KSB7XG4gIGV4cCA9IGV4cC50cmltKCk7XG4gIC8vIHRyeSBjYWNoZVxuICB2YXIgaGl0ID0gZXhwcmVzc2lvbkNhY2hlLmdldChleHApO1xuICBpZiAoaGl0KSB7XG4gICAgaWYgKG5lZWRTZXQgJiYgIWhpdC5zZXQpIHtcbiAgICAgIGhpdC5zZXQgPSBjb21waWxlU2V0dGVyKGhpdC5leHApO1xuICAgIH1cbiAgICByZXR1cm4gaGl0O1xuICB9XG4gIHZhciByZXMgPSB7IGV4cDogZXhwIH07XG4gIHJlcy5nZXQgPSBpc1NpbXBsZVBhdGgoZXhwKSAmJiBleHAuaW5kZXhPZignWycpIDwgMFxuICAvLyBvcHRpbWl6ZWQgc3VwZXIgc2ltcGxlIGdldHRlclxuICA/IG1ha2VHZXR0ZXJGbignc2NvcGUuJyArIGV4cClcbiAgLy8gZHluYW1pYyBnZXR0ZXJcbiAgOiBjb21waWxlR2V0dGVyKGV4cCk7XG4gIGlmIChuZWVkU2V0KSB7XG4gICAgcmVzLnNldCA9IGNvbXBpbGVTZXR0ZXIoZXhwKTtcbiAgfVxuICBleHByZXNzaW9uQ2FjaGUucHV0KGV4cCwgcmVzKTtcbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBleHByZXNzaW9uIGlzIGEgc2ltcGxlIHBhdGguXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc1NpbXBsZVBhdGgoZXhwKSB7XG4gIHJldHVybiBwYXRoVGVzdFJFLnRlc3QoZXhwKSAmJlxuICAvLyBkb24ndCB0cmVhdCBsaXRlcmFsIHZhbHVlcyBhcyBwYXRoc1xuICAhbGl0ZXJhbFZhbHVlUkUkMS50ZXN0KGV4cCkgJiZcbiAgLy8gTWF0aCBjb25zdGFudHMgZS5nLiBNYXRoLlBJLCBNYXRoLkUgZXRjLlxuICBleHAuc2xpY2UoMCwgNSkgIT09ICdNYXRoLic7XG59XG5cbnZhciBleHByZXNzaW9uID0gT2JqZWN0LmZyZWV6ZSh7XG4gIHBhcnNlRXhwcmVzc2lvbjogcGFyc2VFeHByZXNzaW9uLFxuICBpc1NpbXBsZVBhdGg6IGlzU2ltcGxlUGF0aFxufSk7XG5cbi8vIHdlIGhhdmUgdHdvIHNlcGFyYXRlIHF1ZXVlczogb25lIGZvciBkaXJlY3RpdmUgdXBkYXRlc1xuLy8gYW5kIG9uZSBmb3IgdXNlciB3YXRjaGVyIHJlZ2lzdGVyZWQgdmlhICR3YXRjaCgpLlxuLy8gd2Ugd2FudCB0byBndWFyYW50ZWUgZGlyZWN0aXZlIHVwZGF0ZXMgdG8gYmUgY2FsbGVkXG4vLyBiZWZvcmUgdXNlciB3YXRjaGVycyBzbyB0aGF0IHdoZW4gdXNlciB3YXRjaGVycyBhcmVcbi8vIHRyaWdnZXJlZCwgdGhlIERPTSB3b3VsZCBoYXZlIGFscmVhZHkgYmVlbiBpbiB1cGRhdGVkXG4vLyBzdGF0ZS5cblxudmFyIHF1ZXVlID0gW107XG52YXIgdXNlclF1ZXVlID0gW107XG52YXIgaGFzID0ge307XG52YXIgY2lyY3VsYXIgPSB7fTtcbnZhciB3YWl0aW5nID0gZmFsc2U7XG5cbi8qKlxuICogUmVzZXQgdGhlIGJhdGNoZXIncyBzdGF0ZS5cbiAqL1xuXG5mdW5jdGlvbiByZXNldEJhdGNoZXJTdGF0ZSgpIHtcbiAgcXVldWUubGVuZ3RoID0gMDtcbiAgdXNlclF1ZXVlLmxlbmd0aCA9IDA7XG4gIGhhcyA9IHt9O1xuICBjaXJjdWxhciA9IHt9O1xuICB3YWl0aW5nID0gZmFsc2U7XG59XG5cbi8qKlxuICogRmx1c2ggYm90aCBxdWV1ZXMgYW5kIHJ1biB0aGUgd2F0Y2hlcnMuXG4gKi9cblxuZnVuY3Rpb24gZmx1c2hCYXRjaGVyUXVldWUoKSB7XG4gIHZhciBfYWdhaW4gPSB0cnVlO1xuXG4gIF9mdW5jdGlvbjogd2hpbGUgKF9hZ2Fpbikge1xuICAgIF9hZ2FpbiA9IGZhbHNlO1xuXG4gICAgcnVuQmF0Y2hlclF1ZXVlKHF1ZXVlKTtcbiAgICBydW5CYXRjaGVyUXVldWUodXNlclF1ZXVlKTtcbiAgICAvLyB1c2VyIHdhdGNoZXJzIHRyaWdnZXJlZCBtb3JlIHdhdGNoZXJzLFxuICAgIC8vIGtlZXAgZmx1c2hpbmcgdW50aWwgaXQgZGVwbGV0ZXNcbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICBfYWdhaW4gPSB0cnVlO1xuICAgICAgY29udGludWUgX2Z1bmN0aW9uO1xuICAgIH1cbiAgICAvLyBkZXYgdG9vbCBob29rXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKGRldnRvb2xzICYmIGNvbmZpZy5kZXZ0b29scykge1xuICAgICAgZGV2dG9vbHMuZW1pdCgnZmx1c2gnKTtcbiAgICB9XG4gICAgcmVzZXRCYXRjaGVyU3RhdGUoKTtcbiAgfVxufVxuXG4vKipcbiAqIFJ1biB0aGUgd2F0Y2hlcnMgaW4gYSBzaW5nbGUgcXVldWUuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gcXVldWVcbiAqL1xuXG5mdW5jdGlvbiBydW5CYXRjaGVyUXVldWUocXVldWUpIHtcbiAgLy8gZG8gbm90IGNhY2hlIGxlbmd0aCBiZWNhdXNlIG1vcmUgd2F0Y2hlcnMgbWlnaHQgYmUgcHVzaGVkXG4gIC8vIGFzIHdlIHJ1biBleGlzdGluZyB3YXRjaGVyc1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHdhdGNoZXIgPSBxdWV1ZVtpXTtcbiAgICB2YXIgaWQgPSB3YXRjaGVyLmlkO1xuICAgIGhhc1tpZF0gPSBudWxsO1xuICAgIHdhdGNoZXIucnVuKCk7XG4gICAgLy8gaW4gZGV2IGJ1aWxkLCBjaGVjayBhbmQgc3RvcCBjaXJjdWxhciB1cGRhdGVzLlxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGhhc1tpZF0gIT0gbnVsbCkge1xuICAgICAgY2lyY3VsYXJbaWRdID0gKGNpcmN1bGFyW2lkXSB8fCAwKSArIDE7XG4gICAgICBpZiAoY2lyY3VsYXJbaWRdID4gY29uZmlnLl9tYXhVcGRhdGVDb3VudCkge1xuICAgICAgICB3YXJuKCdZb3UgbWF5IGhhdmUgYW4gaW5maW5pdGUgdXBkYXRlIGxvb3AgZm9yIHdhdGNoZXIgJyArICd3aXRoIGV4cHJlc3Npb24gXCInICsgd2F0Y2hlci5leHByZXNzaW9uICsgJ1wiJywgd2F0Y2hlci52bSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBxdWV1ZS5sZW5ndGggPSAwO1xufVxuXG4vKipcbiAqIFB1c2ggYSB3YXRjaGVyIGludG8gdGhlIHdhdGNoZXIgcXVldWUuXG4gKiBKb2JzIHdpdGggZHVwbGljYXRlIElEcyB3aWxsIGJlIHNraXBwZWQgdW5sZXNzIGl0J3NcbiAqIHB1c2hlZCB3aGVuIHRoZSBxdWV1ZSBpcyBiZWluZyBmbHVzaGVkLlxuICpcbiAqIEBwYXJhbSB7V2F0Y2hlcn0gd2F0Y2hlclxuICogICBwcm9wZXJ0aWVzOlxuICogICAtIHtOdW1iZXJ9IGlkXG4gKiAgIC0ge0Z1bmN0aW9ufSBydW5cbiAqL1xuXG5mdW5jdGlvbiBwdXNoV2F0Y2hlcih3YXRjaGVyKSB7XG4gIHZhciBpZCA9IHdhdGNoZXIuaWQ7XG4gIGlmIChoYXNbaWRdID09IG51bGwpIHtcbiAgICAvLyBwdXNoIHdhdGNoZXIgaW50byBhcHByb3ByaWF0ZSBxdWV1ZVxuICAgIHZhciBxID0gd2F0Y2hlci51c2VyID8gdXNlclF1ZXVlIDogcXVldWU7XG4gICAgaGFzW2lkXSA9IHEubGVuZ3RoO1xuICAgIHEucHVzaCh3YXRjaGVyKTtcbiAgICAvLyBxdWV1ZSB0aGUgZmx1c2hcbiAgICBpZiAoIXdhaXRpbmcpIHtcbiAgICAgIHdhaXRpbmcgPSB0cnVlO1xuICAgICAgbmV4dFRpY2soZmx1c2hCYXRjaGVyUXVldWUpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgdWlkJDIgPSAwO1xuXG4vKipcbiAqIEEgd2F0Y2hlciBwYXJzZXMgYW4gZXhwcmVzc2lvbiwgY29sbGVjdHMgZGVwZW5kZW5jaWVzLFxuICogYW5kIGZpcmVzIGNhbGxiYWNrIHdoZW4gdGhlIGV4cHJlc3Npb24gdmFsdWUgY2hhbmdlcy5cbiAqIFRoaXMgaXMgdXNlZCBmb3IgYm90aCB0aGUgJHdhdGNoKCkgYXBpIGFuZCBkaXJlY3RpdmVzLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IGV4cE9yRm5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogICAgICAgICAgICAgICAgIC0ge0FycmF5fSBmaWx0ZXJzXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gdHdvV2F5XG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gZGVlcFxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHVzZXJcbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBzeW5jXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gbGF6eVxuICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbcHJlUHJvY2Vzc11cbiAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW3Bvc3RQcm9jZXNzXVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCBvcHRpb25zKSB7XG4gIC8vIG1peCBpbiBvcHRpb25zXG4gIGlmIChvcHRpb25zKSB7XG4gICAgZXh0ZW5kKHRoaXMsIG9wdGlvbnMpO1xuICB9XG4gIHZhciBpc0ZuID0gdHlwZW9mIGV4cE9yRm4gPT09ICdmdW5jdGlvbic7XG4gIHRoaXMudm0gPSB2bTtcbiAgdm0uX3dhdGNoZXJzLnB1c2godGhpcyk7XG4gIHRoaXMuZXhwcmVzc2lvbiA9IGV4cE9yRm47XG4gIHRoaXMuY2IgPSBjYjtcbiAgdGhpcy5pZCA9ICsrdWlkJDI7IC8vIHVpZCBmb3IgYmF0Y2hpbmdcbiAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICB0aGlzLmRpcnR5ID0gdGhpcy5sYXp5OyAvLyBmb3IgbGF6eSB3YXRjaGVyc1xuICB0aGlzLmRlcHMgPSBbXTtcbiAgdGhpcy5uZXdEZXBzID0gW107XG4gIHRoaXMuZGVwSWRzID0gbmV3IF9TZXQoKTtcbiAgdGhpcy5uZXdEZXBJZHMgPSBuZXcgX1NldCgpO1xuICB0aGlzLnByZXZFcnJvciA9IG51bGw7IC8vIGZvciBhc3luYyBlcnJvciBzdGFja3NcbiAgLy8gcGFyc2UgZXhwcmVzc2lvbiBmb3IgZ2V0dGVyL3NldHRlclxuICBpZiAoaXNGbikge1xuICAgIHRoaXMuZ2V0dGVyID0gZXhwT3JGbjtcbiAgICB0aGlzLnNldHRlciA9IHVuZGVmaW5lZDtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cE9yRm4sIHRoaXMudHdvV2F5KTtcbiAgICB0aGlzLmdldHRlciA9IHJlcy5nZXQ7XG4gICAgdGhpcy5zZXR0ZXIgPSByZXMuc2V0O1xuICB9XG4gIHRoaXMudmFsdWUgPSB0aGlzLmxhenkgPyB1bmRlZmluZWQgOiB0aGlzLmdldCgpO1xuICAvLyBzdGF0ZSBmb3IgYXZvaWRpbmcgZmFsc2UgdHJpZ2dlcnMgZm9yIGRlZXAgYW5kIEFycmF5XG4gIC8vIHdhdGNoZXJzIGR1cmluZyB2bS5fZGlnZXN0KClcbiAgdGhpcy5xdWV1ZWQgPSB0aGlzLnNoYWxsb3cgPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBFdmFsdWF0ZSB0aGUgZ2V0dGVyLCBhbmQgcmUtY29sbGVjdCBkZXBlbmRlbmNpZXMuXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmJlZm9yZUdldCgpO1xuICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm07XG4gIHZhciB2YWx1ZTtcbiAgdHJ5IHtcbiAgICB2YWx1ZSA9IHRoaXMuZ2V0dGVyLmNhbGwoc2NvcGUsIHNjb3BlKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy53YXJuRXhwcmVzc2lvbkVycm9ycykge1xuICAgICAgd2FybignRXJyb3Igd2hlbiBldmFsdWF0aW5nIGV4cHJlc3Npb24gJyArICdcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCI6ICcgKyBlLnRvU3RyaW5nKCksIHRoaXMudm0pO1xuICAgIH1cbiAgfVxuICAvLyBcInRvdWNoXCIgZXZlcnkgcHJvcGVydHkgc28gdGhleSBhcmUgYWxsIHRyYWNrZWQgYXNcbiAgLy8gZGVwZW5kZW5jaWVzIGZvciBkZWVwIHdhdGNoaW5nXG4gIGlmICh0aGlzLmRlZXApIHtcbiAgICB0cmF2ZXJzZSh2YWx1ZSk7XG4gIH1cbiAgaWYgKHRoaXMucHJlUHJvY2Vzcykge1xuICAgIHZhbHVlID0gdGhpcy5wcmVQcm9jZXNzKHZhbHVlKTtcbiAgfVxuICBpZiAodGhpcy5maWx0ZXJzKSB7XG4gICAgdmFsdWUgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKHZhbHVlLCBudWxsLCB0aGlzLmZpbHRlcnMsIGZhbHNlKTtcbiAgfVxuICBpZiAodGhpcy5wb3N0UHJvY2Vzcykge1xuICAgIHZhbHVlID0gdGhpcy5wb3N0UHJvY2Vzcyh2YWx1ZSk7XG4gIH1cbiAgdGhpcy5hZnRlckdldCgpO1xuICByZXR1cm4gdmFsdWU7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSB3aXRoIHRoZSBzZXR0ZXIuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm07XG4gIGlmICh0aGlzLmZpbHRlcnMpIHtcbiAgICB2YWx1ZSA9IHNjb3BlLl9hcHBseUZpbHRlcnModmFsdWUsIHRoaXMudmFsdWUsIHRoaXMuZmlsdGVycywgdHJ1ZSk7XG4gIH1cbiAgdHJ5IHtcbiAgICB0aGlzLnNldHRlci5jYWxsKHNjb3BlLCBzY29wZSwgdmFsdWUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLndhcm5FeHByZXNzaW9uRXJyb3JzKSB7XG4gICAgICB3YXJuKCdFcnJvciB3aGVuIGV2YWx1YXRpbmcgc2V0dGVyICcgKyAnXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiOiAnICsgZS50b1N0cmluZygpLCB0aGlzLnZtKTtcbiAgICB9XG4gIH1cbiAgLy8gdHdvLXdheSBzeW5jIGZvciB2LWZvciBhbGlhc1xuICB2YXIgZm9yQ29udGV4dCA9IHNjb3BlLiRmb3JDb250ZXh0O1xuICBpZiAoZm9yQ29udGV4dCAmJiBmb3JDb250ZXh0LmFsaWFzID09PSB0aGlzLmV4cHJlc3Npb24pIHtcbiAgICBpZiAoZm9yQ29udGV4dC5maWx0ZXJzKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgdHdvLXdheSBiaW5kaW5nIG9uICcgKyAnYSB2LWZvciBhbGlhcyAoJyArIHRoaXMuZXhwcmVzc2lvbiArICcpLCBhbmQgdGhlICcgKyAndi1mb3IgaGFzIGZpbHRlcnMuIFRoaXMgd2lsbCBub3Qgd29yayBwcm9wZXJseS4gJyArICdFaXRoZXIgcmVtb3ZlIHRoZSBmaWx0ZXJzIG9yIHVzZSBhbiBhcnJheSBvZiAnICsgJ29iamVjdHMgYW5kIGJpbmQgdG8gb2JqZWN0IHByb3BlcnRpZXMgaW5zdGVhZC4nLCB0aGlzLnZtKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yQ29udGV4dC5fd2l0aExvY2soZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHNjb3BlLiRrZXkpIHtcbiAgICAgICAgLy8gb3JpZ2luYWwgaXMgYW4gb2JqZWN0XG4gICAgICAgIGZvckNvbnRleHQucmF3VmFsdWVbc2NvcGUuJGtleV0gPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvckNvbnRleHQucmF3VmFsdWUuJHNldChzY29wZS4kaW5kZXgsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufTtcblxuLyoqXG4gKiBQcmVwYXJlIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuYmVmb3JlR2V0ID0gZnVuY3Rpb24gKCkge1xuICBEZXAudGFyZ2V0ID0gdGhpcztcbn07XG5cbi8qKlxuICogQWRkIGEgZGVwZW5kZW5jeSB0byB0aGlzIGRpcmVjdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge0RlcH0gZGVwXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuYWRkRGVwID0gZnVuY3Rpb24gKGRlcCkge1xuICB2YXIgaWQgPSBkZXAuaWQ7XG4gIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGlkKSkge1xuICAgIHRoaXMubmV3RGVwSWRzLmFkZChpZCk7XG4gICAgdGhpcy5uZXdEZXBzLnB1c2goZGVwKTtcbiAgICBpZiAoIXRoaXMuZGVwSWRzLmhhcyhpZCkpIHtcbiAgICAgIGRlcC5hZGRTdWIodGhpcyk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIENsZWFuIHVwIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuYWZ0ZXJHZXQgPSBmdW5jdGlvbiAoKSB7XG4gIERlcC50YXJnZXQgPSBudWxsO1xuICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICB2YXIgZGVwID0gdGhpcy5kZXBzW2ldO1xuICAgIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGRlcC5pZCkpIHtcbiAgICAgIGRlcC5yZW1vdmVTdWIodGhpcyk7XG4gICAgfVxuICB9XG4gIHZhciB0bXAgPSB0aGlzLmRlcElkcztcbiAgdGhpcy5kZXBJZHMgPSB0aGlzLm5ld0RlcElkcztcbiAgdGhpcy5uZXdEZXBJZHMgPSB0bXA7XG4gIHRoaXMubmV3RGVwSWRzLmNsZWFyKCk7XG4gIHRtcCA9IHRoaXMuZGVwcztcbiAgdGhpcy5kZXBzID0gdGhpcy5uZXdEZXBzO1xuICB0aGlzLm5ld0RlcHMgPSB0bXA7XG4gIHRoaXMubmV3RGVwcy5sZW5ndGggPSAwO1xufTtcblxuLyoqXG4gKiBTdWJzY3JpYmVyIGludGVyZmFjZS5cbiAqIFdpbGwgYmUgY2FsbGVkIHdoZW4gYSBkZXBlbmRlbmN5IGNoYW5nZXMuXG4gKlxuICogQHBhcmFtIHtCb29sZWFufSBzaGFsbG93XG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHNoYWxsb3cpIHtcbiAgaWYgKHRoaXMubGF6eSkge1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICB9IGVsc2UgaWYgKHRoaXMuc3luYyB8fCAhY29uZmlnLmFzeW5jKSB7XG4gICAgdGhpcy5ydW4oKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBpZiBxdWV1ZWQsIG9ubHkgb3ZlcndyaXRlIHNoYWxsb3cgd2l0aCBub24tc2hhbGxvdyxcbiAgICAvLyBidXQgbm90IHRoZSBvdGhlciB3YXkgYXJvdW5kLlxuICAgIHRoaXMuc2hhbGxvdyA9IHRoaXMucXVldWVkID8gc2hhbGxvdyA/IHRoaXMuc2hhbGxvdyA6IGZhbHNlIDogISFzaGFsbG93O1xuICAgIHRoaXMucXVldWVkID0gdHJ1ZTtcbiAgICAvLyByZWNvcmQgYmVmb3JlLXB1c2ggZXJyb3Igc3RhY2sgaW4gZGVidWcgbW9kZVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5kZWJ1Zykge1xuICAgICAgdGhpcy5wcmV2RXJyb3IgPSBuZXcgRXJyb3IoJ1t2dWVdIGFzeW5jIHN0YWNrIHRyYWNlJyk7XG4gICAgfVxuICAgIHB1c2hXYXRjaGVyKHRoaXMpO1xuICB9XG59O1xuXG4vKipcbiAqIEJhdGNoZXIgam9iIGludGVyZmFjZS5cbiAqIFdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBiYXRjaGVyLlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgdmFyIHZhbHVlID0gdGhpcy5nZXQoKTtcbiAgICBpZiAodmFsdWUgIT09IHRoaXMudmFsdWUgfHxcbiAgICAvLyBEZWVwIHdhdGNoZXJzIGFuZCB3YXRjaGVycyBvbiBPYmplY3QvQXJyYXlzIHNob3VsZCBmaXJlIGV2ZW5cbiAgICAvLyB3aGVuIHRoZSB2YWx1ZSBpcyB0aGUgc2FtZSwgYmVjYXVzZSB0aGUgdmFsdWUgbWF5XG4gICAgLy8gaGF2ZSBtdXRhdGVkOyBidXQgb25seSBkbyBzbyBpZiB0aGlzIGlzIGFcbiAgICAvLyBub24tc2hhbGxvdyB1cGRhdGUgKGNhdXNlZCBieSBhIHZtIGRpZ2VzdCkuXG4gICAgKGlzT2JqZWN0KHZhbHVlKSB8fCB0aGlzLmRlZXApICYmICF0aGlzLnNoYWxsb3cpIHtcbiAgICAgIC8vIHNldCBuZXcgdmFsdWVcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAvLyBpbiBkZWJ1ZyArIGFzeW5jIG1vZGUsIHdoZW4gYSB3YXRjaGVyIGNhbGxiYWNrc1xuICAgICAgLy8gdGhyb3dzLCB3ZSBhbHNvIHRocm93IHRoZSBzYXZlZCBiZWZvcmUtcHVzaCBlcnJvclxuICAgICAgLy8gc28gdGhlIGZ1bGwgY3Jvc3MtdGljayBzdGFjayB0cmFjZSBpcyBhdmFpbGFibGUuXG4gICAgICB2YXIgcHJldkVycm9yID0gdGhpcy5wcmV2RXJyb3I7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5kZWJ1ZyAmJiBwcmV2RXJyb3IpIHtcbiAgICAgICAgdGhpcy5wcmV2RXJyb3IgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhyb3cgcHJldkVycm9yO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnF1ZXVlZCA9IHRoaXMuc2hhbGxvdyA9IGZhbHNlO1xuICB9XG59O1xuXG4vKipcbiAqIEV2YWx1YXRlIHRoZSB2YWx1ZSBvZiB0aGUgd2F0Y2hlci5cbiAqIFRoaXMgb25seSBnZXRzIGNhbGxlZCBmb3IgbGF6eSB3YXRjaGVycy5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gYXZvaWQgb3ZlcndyaXRpbmcgYW5vdGhlciB3YXRjaGVyIHRoYXQgaXMgYmVpbmdcbiAgLy8gY29sbGVjdGVkLlxuICB2YXIgY3VycmVudCA9IERlcC50YXJnZXQ7XG4gIHRoaXMudmFsdWUgPSB0aGlzLmdldCgpO1xuICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gIERlcC50YXJnZXQgPSBjdXJyZW50O1xufTtcblxuLyoqXG4gKiBEZXBlbmQgb24gYWxsIGRlcHMgY29sbGVjdGVkIGJ5IHRoaXMgd2F0Y2hlci5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5kZXBlbmQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIHRoaXMuZGVwc1tpXS5kZXBlbmQoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZW1vdmUgc2VsZiBmcm9tIGFsbCBkZXBlbmRlbmNpZXMnIHN1YmNyaWJlciBsaXN0LlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLnRlYXJkb3duID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHZtJ3Mgd2F0Y2hlciBsaXN0XG4gICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGV4cGVuc2l2ZSBvcGVyYXRpb24gc28gd2Ugc2tpcCBpdFxuICAgIC8vIGlmIHRoZSB2bSBpcyBiZWluZyBkZXN0cm95ZWQgb3IgaXMgcGVyZm9ybWluZyBhIHYtZm9yXG4gICAgLy8gcmUtcmVuZGVyICh0aGUgd2F0Y2hlciBsaXN0IGlzIHRoZW4gZmlsdGVyZWQgYnkgdi1mb3IpLlxuICAgIGlmICghdGhpcy52bS5faXNCZWluZ0Rlc3Ryb3llZCAmJiAhdGhpcy52bS5fdkZvclJlbW92aW5nKSB7XG4gICAgICB0aGlzLnZtLl93YXRjaGVycy4kcmVtb3ZlKHRoaXMpO1xuICAgIH1cbiAgICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdGhpcy5kZXBzW2ldLnJlbW92ZVN1Yih0aGlzKTtcbiAgICB9XG4gICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLnZtID0gdGhpcy5jYiA9IHRoaXMudmFsdWUgPSBudWxsO1xuICB9XG59O1xuXG4vKipcbiAqIFJlY3J1c2l2ZWx5IHRyYXZlcnNlIGFuIG9iamVjdCB0byBldm9rZSBhbGwgY29udmVydGVkXG4gKiBnZXR0ZXJzLCBzbyB0aGF0IGV2ZXJ5IG5lc3RlZCBwcm9wZXJ0eSBpbnNpZGUgdGhlIG9iamVjdFxuICogaXMgY29sbGVjdGVkIGFzIGEgXCJkZWVwXCIgZGVwZW5kZW5jeS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5cbnZhciBzZWVuT2JqZWN0cyA9IG5ldyBfU2V0KCk7XG5mdW5jdGlvbiB0cmF2ZXJzZSh2YWwsIHNlZW4pIHtcbiAgdmFyIGkgPSB1bmRlZmluZWQsXG4gICAgICBrZXlzID0gdW5kZWZpbmVkO1xuICBpZiAoIXNlZW4pIHtcbiAgICBzZWVuID0gc2Vlbk9iamVjdHM7XG4gICAgc2Vlbi5jbGVhcigpO1xuICB9XG4gIHZhciBpc0EgPSBpc0FycmF5KHZhbCk7XG4gIHZhciBpc08gPSBpc09iamVjdCh2YWwpO1xuICBpZiAoKGlzQSB8fCBpc08pICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsKSkge1xuICAgIGlmICh2YWwuX19vYl9fKSB7XG4gICAgICB2YXIgZGVwSWQgPSB2YWwuX19vYl9fLmRlcC5pZDtcbiAgICAgIGlmIChzZWVuLmhhcyhkZXBJZCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2Vlbi5hZGQoZGVwSWQpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNBKSB7XG4gICAgICBpID0gdmFsLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHRyYXZlcnNlKHZhbFtpXSwgc2Vlbik7XG4gICAgfSBlbHNlIGlmIChpc08pIHtcbiAgICAgIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xuICAgICAgaSA9IGtleXMubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkgdHJhdmVyc2UodmFsW2tleXNbaV1dLCBzZWVuKTtcbiAgICB9XG4gIH1cbn1cblxudmFyIHRleHQkMSA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHRoaXMuYXR0ciA9IHRoaXMuZWwubm9kZVR5cGUgPT09IDMgPyAnZGF0YScgOiAndGV4dENvbnRlbnQnO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdGhpcy5lbFt0aGlzLmF0dHJdID0gX3RvU3RyaW5nKHZhbHVlKTtcbiAgfVxufTtcblxudmFyIHRlbXBsYXRlQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG52YXIgaWRTZWxlY3RvckNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXG52YXIgbWFwID0ge1xuICBlZmF1bHQ6IFswLCAnJywgJyddLFxuICBsZWdlbmQ6IFsxLCAnPGZpZWxkc2V0PicsICc8L2ZpZWxkc2V0PiddLFxuICB0cjogWzIsICc8dGFibGU+PHRib2R5PicsICc8L3Rib2R5PjwvdGFibGU+J10sXG4gIGNvbDogWzIsICc8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPicsICc8L2NvbGdyb3VwPjwvdGFibGU+J11cbn07XG5cbm1hcC50ZCA9IG1hcC50aCA9IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddO1xuXG5tYXAub3B0aW9uID0gbWFwLm9wdGdyb3VwID0gWzEsICc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLCAnPC9zZWxlY3Q+J107XG5cbm1hcC50aGVhZCA9IG1hcC50Ym9keSA9IG1hcC5jb2xncm91cCA9IG1hcC5jYXB0aW9uID0gbWFwLnRmb290ID0gWzEsICc8dGFibGU+JywgJzwvdGFibGU+J107XG5cbm1hcC5nID0gbWFwLmRlZnMgPSBtYXAuc3ltYm9sID0gbWFwLnVzZSA9IG1hcC5pbWFnZSA9IG1hcC50ZXh0ID0gbWFwLmNpcmNsZSA9IG1hcC5lbGxpcHNlID0gbWFwLmxpbmUgPSBtYXAucGF0aCA9IG1hcC5wb2x5Z29uID0gbWFwLnBvbHlsaW5lID0gbWFwLnJlY3QgPSBbMSwgJzxzdmcgJyArICd4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgJyArICd4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiAnICsgJ3htbG5zOmV2PVwiaHR0cDovL3d3dy53My5vcmcvMjAwMS94bWwtZXZlbnRzXCInICsgJ3ZlcnNpb249XCIxLjFcIj4nLCAnPC9zdmc+J107XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBub2RlIGlzIGEgc3VwcG9ydGVkIHRlbXBsYXRlIG5vZGUgd2l0aCBhXG4gKiBEb2N1bWVudEZyYWdtZW50IGNvbnRlbnQuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzUmVhbFRlbXBsYXRlKG5vZGUpIHtcbiAgcmV0dXJuIGlzVGVtcGxhdGUobm9kZSkgJiYgaXNGcmFnbWVudChub2RlLmNvbnRlbnQpO1xufVxuXG52YXIgdGFnUkUkMSA9IC88KFtcXHc6LV0rKS87XG52YXIgZW50aXR5UkUgPSAvJiM/XFx3Kz87LztcbnZhciBjb21tZW50UkUgPSAvPCEtLS87XG5cbi8qKlxuICogQ29udmVydCBhIHN0cmluZyB0ZW1wbGF0ZSB0byBhIERvY3VtZW50RnJhZ21lbnQuXG4gKiBEZXRlcm1pbmVzIGNvcnJlY3Qgd3JhcHBpbmcgYnkgdGFnIHR5cGVzLiBXcmFwcGluZ1xuICogc3RyYXRlZ3kgZm91bmQgaW4galF1ZXJ5ICYgY29tcG9uZW50L2RvbWlmeS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdGVtcGxhdGVTdHJpbmdcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcmF3XG4gKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIHN0cmluZ1RvRnJhZ21lbnQodGVtcGxhdGVTdHJpbmcsIHJhdykge1xuICAvLyB0cnkgYSBjYWNoZSBoaXQgZmlyc3RcbiAgdmFyIGNhY2hlS2V5ID0gcmF3ID8gdGVtcGxhdGVTdHJpbmcgOiB0ZW1wbGF0ZVN0cmluZy50cmltKCk7XG4gIHZhciBoaXQgPSB0ZW1wbGF0ZUNhY2hlLmdldChjYWNoZUtleSk7XG4gIGlmIChoaXQpIHtcbiAgICByZXR1cm4gaGl0O1xuICB9XG5cbiAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIHZhciB0YWdNYXRjaCA9IHRlbXBsYXRlU3RyaW5nLm1hdGNoKHRhZ1JFJDEpO1xuICB2YXIgZW50aXR5TWF0Y2ggPSBlbnRpdHlSRS50ZXN0KHRlbXBsYXRlU3RyaW5nKTtcbiAgdmFyIGNvbW1lbnRNYXRjaCA9IGNvbW1lbnRSRS50ZXN0KHRlbXBsYXRlU3RyaW5nKTtcblxuICBpZiAoIXRhZ01hdGNoICYmICFlbnRpdHlNYXRjaCAmJiAhY29tbWVudE1hdGNoKSB7XG4gICAgLy8gdGV4dCBvbmx5LCByZXR1cm4gYSBzaW5nbGUgdGV4dCBub2RlLlxuICAgIGZyYWcuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGVtcGxhdGVTdHJpbmcpKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFnID0gdGFnTWF0Y2ggJiYgdGFnTWF0Y2hbMV07XG4gICAgdmFyIHdyYXAgPSBtYXBbdGFnXSB8fCBtYXAuZWZhdWx0O1xuICAgIHZhciBkZXB0aCA9IHdyYXBbMF07XG4gICAgdmFyIHByZWZpeCA9IHdyYXBbMV07XG4gICAgdmFyIHN1ZmZpeCA9IHdyYXBbMl07XG4gICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIG5vZGUuaW5uZXJIVE1MID0gcHJlZml4ICsgdGVtcGxhdGVTdHJpbmcgKyBzdWZmaXg7XG4gICAgd2hpbGUgKGRlcHRoLS0pIHtcbiAgICAgIG5vZGUgPSBub2RlLmxhc3RDaGlsZDtcbiAgICB9XG5cbiAgICB2YXIgY2hpbGQ7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICB3aGlsZSAoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICAgIGZyYWcuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgIH1cbiAgfVxuICBpZiAoIXJhdykge1xuICAgIHRyaW1Ob2RlKGZyYWcpO1xuICB9XG4gIHRlbXBsYXRlQ2FjaGUucHV0KGNhY2hlS2V5LCBmcmFnKTtcbiAgcmV0dXJuIGZyYWc7XG59XG5cbi8qKlxuICogQ29udmVydCBhIHRlbXBsYXRlIG5vZGUgdG8gYSBEb2N1bWVudEZyYWdtZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBub2RlVG9GcmFnbWVudChub2RlKSB7XG4gIC8vIGlmIGl0cyBhIHRlbXBsYXRlIHRhZyBhbmQgdGhlIGJyb3dzZXIgc3VwcG9ydHMgaXQsXG4gIC8vIGl0cyBjb250ZW50IGlzIGFscmVhZHkgYSBkb2N1bWVudCBmcmFnbWVudC4gSG93ZXZlciwgaU9TIFNhZmFyaSBoYXNcbiAgLy8gYnVnIHdoZW4gdXNpbmcgZGlyZWN0bHkgY2xvbmVkIHRlbXBsYXRlIGNvbnRlbnQgd2l0aCB0b3VjaFxuICAvLyBldmVudHMgYW5kIGNhbiBjYXVzZSBjcmFzaGVzIHdoZW4gdGhlIG5vZGVzIGFyZSByZW1vdmVkIGZyb20gRE9NLCBzbyB3ZVxuICAvLyBoYXZlIHRvIHRyZWF0IHRlbXBsYXRlIGVsZW1lbnRzIGFzIHN0cmluZyB0ZW1wbGF0ZXMuICgjMjgwNSlcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChpc1JlYWxUZW1wbGF0ZShub2RlKSkge1xuICAgIHJldHVybiBzdHJpbmdUb0ZyYWdtZW50KG5vZGUuaW5uZXJIVE1MKTtcbiAgfVxuICAvLyBzY3JpcHQgdGVtcGxhdGVcbiAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ1NDUklQVCcpIHtcbiAgICByZXR1cm4gc3RyaW5nVG9GcmFnbWVudChub2RlLnRleHRDb250ZW50KTtcbiAgfVxuICAvLyBub3JtYWwgbm9kZSwgY2xvbmUgaXQgdG8gYXZvaWQgbXV0YXRpbmcgdGhlIG9yaWdpbmFsXG4gIHZhciBjbG9uZWROb2RlID0gY2xvbmVOb2RlKG5vZGUpO1xuICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgdmFyIGNoaWxkO1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICB3aGlsZSAoY2hpbGQgPSBjbG9uZWROb2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgZnJhZy5hcHBlbmRDaGlsZChjaGlsZCk7XG4gIH1cbiAgdHJpbU5vZGUoZnJhZyk7XG4gIHJldHVybiBmcmFnO1xufVxuXG4vLyBUZXN0IGZvciB0aGUgcHJlc2VuY2Ugb2YgdGhlIFNhZmFyaSB0ZW1wbGF0ZSBjbG9uaW5nIGJ1Z1xuLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd3VnLmNnaT9pZD0xMzc3NTVcbnZhciBoYXNCcm9rZW5UZW1wbGF0ZSA9IChmdW5jdGlvbiAoKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChpbkJyb3dzZXIpIHtcbiAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGEuaW5uZXJIVE1MID0gJzx0ZW1wbGF0ZT4xPC90ZW1wbGF0ZT4nO1xuICAgIHJldHVybiAhYS5jbG9uZU5vZGUodHJ1ZSkuZmlyc3RDaGlsZC5pbm5lckhUTUw7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59KSgpO1xuXG4vLyBUZXN0IGZvciBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGNsb25lIGJ1Z1xudmFyIGhhc1RleHRhcmVhQ2xvbmVCdWcgPSAoZnVuY3Rpb24gKCkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAoaW5Ccm93c2VyKSB7XG4gICAgdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgIHQucGxhY2Vob2xkZXIgPSAndCc7XG4gICAgcmV0dXJuIHQuY2xvbmVOb2RlKHRydWUpLnZhbHVlID09PSAndCc7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59KSgpO1xuXG4vKipcbiAqIDEuIERlYWwgd2l0aCBTYWZhcmkgY2xvbmluZyBuZXN0ZWQgPHRlbXBsYXRlPiBidWcgYnlcbiAqICAgIG1hbnVhbGx5IGNsb25pbmcgYWxsIHRlbXBsYXRlIGluc3RhbmNlcy5cbiAqIDIuIERlYWwgd2l0aCBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGJ1ZyBieSBzZXR0aW5nXG4gKiAgICB0aGUgY29ycmVjdCB2YWx1ZSBhZnRlciBjbG9uaW5nLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBub2RlXG4gKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gY2xvbmVOb2RlKG5vZGUpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICghbm9kZS5xdWVyeVNlbGVjdG9yQWxsKSB7XG4gICAgcmV0dXJuIG5vZGUuY2xvbmVOb2RlKCk7XG4gIH1cbiAgdmFyIHJlcyA9IG5vZGUuY2xvbmVOb2RlKHRydWUpO1xuICB2YXIgaSwgb3JpZ2luYWwsIGNsb25lZDtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChoYXNCcm9rZW5UZW1wbGF0ZSkge1xuICAgIHZhciB0ZW1wQ2xvbmUgPSByZXM7XG4gICAgaWYgKGlzUmVhbFRlbXBsYXRlKG5vZGUpKSB7XG4gICAgICBub2RlID0gbm9kZS5jb250ZW50O1xuICAgICAgdGVtcENsb25lID0gcmVzLmNvbnRlbnQ7XG4gICAgfVxuICAgIG9yaWdpbmFsID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpO1xuICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcbiAgICAgIGNsb25lZCA9IHRlbXBDbG9uZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpO1xuICAgICAgaSA9IGNsb25lZC5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGNsb25lZFtpXS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChjbG9uZU5vZGUob3JpZ2luYWxbaV0pLCBjbG9uZWRbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGhhc1RleHRhcmVhQ2xvbmVCdWcpIHtcbiAgICBpZiAobm9kZS50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICByZXMudmFsdWUgPSBub2RlLnZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcmlnaW5hbCA9IG5vZGUucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKTtcbiAgICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcbiAgICAgICAgY2xvbmVkID0gcmVzLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJyk7XG4gICAgICAgIGkgPSBjbG9uZWQubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgY2xvbmVkW2ldLnZhbHVlID0gb3JpZ2luYWxbaV0udmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBQcm9jZXNzIHRoZSB0ZW1wbGF0ZSBvcHRpb24gYW5kIG5vcm1hbGl6ZXMgaXQgaW50byBhXG4gKiBhIERvY3VtZW50RnJhZ21lbnQgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHBhcnRpYWwgb3IgYVxuICogaW5zdGFuY2UgdGVtcGxhdGUuXG4gKlxuICogQHBhcmFtIHsqfSB0ZW1wbGF0ZVxuICogICAgICAgIFBvc3NpYmxlIHZhbHVlcyBpbmNsdWRlOlxuICogICAgICAgIC0gRG9jdW1lbnRGcmFnbWVudCBvYmplY3RcbiAqICAgICAgICAtIE5vZGUgb2JqZWN0IG9mIHR5cGUgVGVtcGxhdGVcbiAqICAgICAgICAtIGlkIHNlbGVjdG9yOiAnI3NvbWUtdGVtcGxhdGUtaWQnXG4gKiAgICAgICAgLSB0ZW1wbGF0ZSBzdHJpbmc6ICc8ZGl2PjxzcGFuPnt7bXNnfX08L3NwYW4+PC9kaXY+J1xuICogQHBhcmFtIHtCb29sZWFufSBzaG91bGRDbG9uZVxuICogQHBhcmFtIHtCb29sZWFufSByYXdcbiAqICAgICAgICBpbmxpbmUgSFRNTCBpbnRlcnBvbGF0aW9uLiBEbyBub3QgY2hlY2sgZm9yIGlkXG4gKiAgICAgICAgc2VsZWN0b3IgYW5kIGtlZXAgd2hpdGVzcGFjZSBpbiB0aGUgc3RyaW5nLlxuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudHx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgc2hvdWxkQ2xvbmUsIHJhdykge1xuICB2YXIgbm9kZSwgZnJhZztcblxuICAvLyBpZiB0aGUgdGVtcGxhdGUgaXMgYWxyZWFkeSBhIGRvY3VtZW50IGZyYWdtZW50LFxuICAvLyBkbyBub3RoaW5nXG4gIGlmIChpc0ZyYWdtZW50KHRlbXBsYXRlKSkge1xuICAgIHRyaW1Ob2RlKHRlbXBsYXRlKTtcbiAgICByZXR1cm4gc2hvdWxkQ2xvbmUgPyBjbG9uZU5vZGUodGVtcGxhdGUpIDogdGVtcGxhdGU7XG4gIH1cblxuICBpZiAodHlwZW9mIHRlbXBsYXRlID09PSAnc3RyaW5nJykge1xuICAgIC8vIGlkIHNlbGVjdG9yXG4gICAgaWYgKCFyYXcgJiYgdGVtcGxhdGUuY2hhckF0KDApID09PSAnIycpIHtcbiAgICAgIC8vIGlkIHNlbGVjdG9yIGNhbiBiZSBjYWNoZWQgdG9vXG4gICAgICBmcmFnID0gaWRTZWxlY3RvckNhY2hlLmdldCh0ZW1wbGF0ZSk7XG4gICAgICBpZiAoIWZyYWcpIHtcbiAgICAgICAgbm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRlbXBsYXRlLnNsaWNlKDEpKTtcbiAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQobm9kZSk7XG4gICAgICAgICAgLy8gc2F2ZSBzZWxlY3RvciB0byBjYWNoZVxuICAgICAgICAgIGlkU2VsZWN0b3JDYWNoZS5wdXQodGVtcGxhdGUsIGZyYWcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vcm1hbCBzdHJpbmcgdGVtcGxhdGVcbiAgICAgIGZyYWcgPSBzdHJpbmdUb0ZyYWdtZW50KHRlbXBsYXRlLCByYXcpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0ZW1wbGF0ZS5ub2RlVHlwZSkge1xuICAgIC8vIGEgZGlyZWN0IG5vZGVcbiAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQodGVtcGxhdGUpO1xuICB9XG5cbiAgcmV0dXJuIGZyYWcgJiYgc2hvdWxkQ2xvbmUgPyBjbG9uZU5vZGUoZnJhZykgOiBmcmFnO1xufVxuXG52YXIgdGVtcGxhdGUgPSBPYmplY3QuZnJlZXplKHtcbiAgY2xvbmVOb2RlOiBjbG9uZU5vZGUsXG4gIHBhcnNlVGVtcGxhdGU6IHBhcnNlVGVtcGxhdGVcbn0pO1xuXG52YXIgaHRtbCA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIGEgY29tbWVudCBub2RlIG1lYW5zIHRoaXMgaXMgYSBiaW5kaW5nIGZvclxuICAgIC8vIHt7eyBpbmxpbmUgdW5lc2NhcGVkIGh0bWwgfX19XG4gICAgaWYgKHRoaXMuZWwubm9kZVR5cGUgPT09IDgpIHtcbiAgICAgIC8vIGhvbGQgbm9kZXNcbiAgICAgIHRoaXMubm9kZXMgPSBbXTtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIHBsYWNlaG9sZGVyIHdpdGggcHJvcGVyIGFuY2hvclxuICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtaHRtbCcpO1xuICAgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdmFsdWUgPSBfdG9TdHJpbmcodmFsdWUpO1xuICAgIGlmICh0aGlzLm5vZGVzKSB7XG4gICAgICB0aGlzLnN3YXAodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsLmlubmVySFRNTCA9IHZhbHVlO1xuICAgIH1cbiAgfSxcblxuICBzd2FwOiBmdW5jdGlvbiBzd2FwKHZhbHVlKSB7XG4gICAgLy8gcmVtb3ZlIG9sZCBub2Rlc1xuICAgIHZhciBpID0gdGhpcy5ub2Rlcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgcmVtb3ZlKHRoaXMubm9kZXNbaV0pO1xuICAgIH1cbiAgICAvLyBjb252ZXJ0IG5ldyB2YWx1ZSB0byBhIGZyYWdtZW50XG4gICAgLy8gZG8gbm90IGF0dGVtcHQgdG8gcmV0cmlldmUgZnJvbSBpZCBzZWxlY3RvclxuICAgIHZhciBmcmFnID0gcGFyc2VUZW1wbGF0ZSh2YWx1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgLy8gc2F2ZSBhIHJlZmVyZW5jZSB0byB0aGVzZSBub2RlcyBzbyB3ZSBjYW4gcmVtb3ZlIGxhdGVyXG4gICAgdGhpcy5ub2RlcyA9IHRvQXJyYXkoZnJhZy5jaGlsZE5vZGVzKTtcbiAgICBiZWZvcmUoZnJhZywgdGhpcy5hbmNob3IpO1xuICB9XG59O1xuXG4vKipcbiAqIEFic3RyYWN0aW9uIGZvciBhIHBhcnRpYWxseS1jb21waWxlZCBmcmFnbWVudC5cbiAqIENhbiBvcHRpb25hbGx5IGNvbXBpbGUgY29udGVudCB3aXRoIGEgY2hpbGQgc2NvcGUuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gbGlua2VyXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuICogQHBhcmFtIHtWdWV9IFtob3N0XVxuICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cbiAqIEBwYXJhbSB7RnJhZ21lbnR9IFtwYXJlbnRGcmFnXVxuICovXG5mdW5jdGlvbiBGcmFnbWVudChsaW5rZXIsIHZtLCBmcmFnLCBob3N0LCBzY29wZSwgcGFyZW50RnJhZykge1xuICB0aGlzLmNoaWxkcmVuID0gW107XG4gIHRoaXMuY2hpbGRGcmFncyA9IFtdO1xuICB0aGlzLnZtID0gdm07XG4gIHRoaXMuc2NvcGUgPSBzY29wZTtcbiAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuICB0aGlzLnBhcmVudEZyYWcgPSBwYXJlbnRGcmFnO1xuICBpZiAocGFyZW50RnJhZykge1xuICAgIHBhcmVudEZyYWcuY2hpbGRGcmFncy5wdXNoKHRoaXMpO1xuICB9XG4gIHRoaXMudW5saW5rID0gbGlua2VyKHZtLCBmcmFnLCBob3N0LCBzY29wZSwgdGhpcyk7XG4gIHZhciBzaW5nbGUgPSB0aGlzLnNpbmdsZSA9IGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiZcbiAgLy8gZG8gbm90IGdvIHNpbmdsZSBtb2RlIGlmIHRoZSBvbmx5IG5vZGUgaXMgYW4gYW5jaG9yXG4gICFmcmFnLmNoaWxkTm9kZXNbMF0uX192X2FuY2hvcjtcbiAgaWYgKHNpbmdsZSkge1xuICAgIHRoaXMubm9kZSA9IGZyYWcuY2hpbGROb2Rlc1swXTtcbiAgICB0aGlzLmJlZm9yZSA9IHNpbmdsZUJlZm9yZTtcbiAgICB0aGlzLnJlbW92ZSA9IHNpbmdsZVJlbW92ZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLm5vZGUgPSBjcmVhdGVBbmNob3IoJ2ZyYWdtZW50LXN0YXJ0Jyk7XG4gICAgdGhpcy5lbmQgPSBjcmVhdGVBbmNob3IoJ2ZyYWdtZW50LWVuZCcpO1xuICAgIHRoaXMuZnJhZyA9IGZyYWc7XG4gICAgcHJlcGVuZCh0aGlzLm5vZGUsIGZyYWcpO1xuICAgIGZyYWcuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xuICAgIHRoaXMuYmVmb3JlID0gbXVsdGlCZWZvcmU7XG4gICAgdGhpcy5yZW1vdmUgPSBtdWx0aVJlbW92ZTtcbiAgfVxuICB0aGlzLm5vZGUuX192X2ZyYWcgPSB0aGlzO1xufVxuXG4vKipcbiAqIENhbGwgYXR0YWNoL2RldGFjaCBmb3IgYWxsIGNvbXBvbmVudHMgY29udGFpbmVkIHdpdGhpblxuICogdGhpcyBmcmFnbWVudC4gQWxzbyBkbyBzbyByZWN1cnNpdmVseSBmb3IgYWxsIGNoaWxkXG4gKiBmcmFnbWVudHMuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaG9va1xuICovXG5cbkZyYWdtZW50LnByb3RvdHlwZS5jYWxsSG9vayA9IGZ1bmN0aW9uIChob29rKSB7XG4gIHZhciBpLCBsO1xuICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHRoaXMuY2hpbGRGcmFnc1tpXS5jYWxsSG9vayhob29rKTtcbiAgfVxuICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBob29rKHRoaXMuY2hpbGRyZW5baV0pO1xuICB9XG59O1xuXG4vKipcbiAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG4gKlxuICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cbiAqL1xuXG5mdW5jdGlvbiBzaW5nbGVCZWZvcmUodGFyZ2V0LCB3aXRoVHJhbnNpdGlvbikge1xuICB0aGlzLmluc2VydGVkID0gdHJ1ZTtcbiAgdmFyIG1ldGhvZCA9IHdpdGhUcmFuc2l0aW9uICE9PSBmYWxzZSA/IGJlZm9yZVdpdGhUcmFuc2l0aW9uIDogYmVmb3JlO1xuICBtZXRob2QodGhpcy5ub2RlLCB0YXJnZXQsIHRoaXMudm0pO1xuICBpZiAoaW5Eb2ModGhpcy5ub2RlKSkge1xuICAgIHRoaXMuY2FsbEhvb2soYXR0YWNoKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBmcmFnbWVudCwgc2luZ2xlIG5vZGUgdmVyc2lvblxuICovXG5cbmZ1bmN0aW9uIHNpbmdsZVJlbW92ZSgpIHtcbiAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuICB2YXIgc2hvdWxkQ2FsbFJlbW92ZSA9IGluRG9jKHRoaXMubm9kZSk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5iZWZvcmVSZW1vdmUoKTtcbiAgcmVtb3ZlV2l0aFRyYW5zaXRpb24odGhpcy5ub2RlLCB0aGlzLnZtLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHNob3VsZENhbGxSZW1vdmUpIHtcbiAgICAgIHNlbGYuY2FsbEhvb2soZGV0YWNoKTtcbiAgICB9XG4gICAgc2VsZi5kZXN0cm95KCk7XG4gIH0pO1xufVxuXG4vKipcbiAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG4gKlxuICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cbiAqL1xuXG5mdW5jdGlvbiBtdWx0aUJlZm9yZSh0YXJnZXQsIHdpdGhUcmFuc2l0aW9uKSB7XG4gIHRoaXMuaW5zZXJ0ZWQgPSB0cnVlO1xuICB2YXIgdm0gPSB0aGlzLnZtO1xuICB2YXIgbWV0aG9kID0gd2l0aFRyYW5zaXRpb24gIT09IGZhbHNlID8gYmVmb3JlV2l0aFRyYW5zaXRpb24gOiBiZWZvcmU7XG4gIG1hcE5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCBmdW5jdGlvbiAobm9kZSkge1xuICAgIG1ldGhvZChub2RlLCB0YXJnZXQsIHZtKTtcbiAgfSk7XG4gIGlmIChpbkRvYyh0aGlzLm5vZGUpKSB7XG4gICAgdGhpcy5jYWxsSG9vayhhdHRhY2gpO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIGZyYWdtZW50LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG4gKi9cblxuZnVuY3Rpb24gbXVsdGlSZW1vdmUoKSB7XG4gIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgc2hvdWxkQ2FsbFJlbW92ZSA9IGluRG9jKHRoaXMubm9kZSk7XG4gIHRoaXMuYmVmb3JlUmVtb3ZlKCk7XG4gIHJlbW92ZU5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCB0aGlzLnZtLCB0aGlzLmZyYWcsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc2hvdWxkQ2FsbFJlbW92ZSkge1xuICAgICAgc2VsZi5jYWxsSG9vayhkZXRhY2gpO1xuICAgIH1cbiAgICBzZWxmLmRlc3Ryb3koKTtcbiAgfSk7XG59XG5cbi8qKlxuICogUHJlcGFyZSB0aGUgZnJhZ21lbnQgZm9yIHJlbW92YWwuXG4gKi9cblxuRnJhZ21lbnQucHJvdG90eXBlLmJlZm9yZVJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGksIGw7XG4gIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgLy8gY2FsbCB0aGUgc2FtZSBtZXRob2QgcmVjdXJzaXZlbHkgb24gY2hpbGRcbiAgICAvLyBmcmFnbWVudHMsIGRlcHRoLWZpcnN0XG4gICAgdGhpcy5jaGlsZEZyYWdzW2ldLmJlZm9yZVJlbW92ZShmYWxzZSk7XG4gIH1cbiAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgLy8gQ2FsbCBkZXN0cm95IGZvciBhbGwgY29udGFpbmVkIGluc3RhbmNlcyxcbiAgICAvLyB3aXRoIHJlbW92ZTpmYWxzZSBhbmQgZGVmZXI6dHJ1ZS5cbiAgICAvLyBEZWZlciBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZSBuZWVkIHRvXG4gICAgLy8ga2VlcCB0aGUgY2hpbGRyZW4gdG8gY2FsbCBkZXRhY2ggaG9va3NcbiAgICAvLyBvbiB0aGVtLlxuICAgIHRoaXMuY2hpbGRyZW5baV0uJGRlc3Ryb3koZmFsc2UsIHRydWUpO1xuICB9XG4gIHZhciBkaXJzID0gdGhpcy51bmxpbmsuZGlycztcbiAgZm9yIChpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgLy8gZGlzYWJsZSB0aGUgd2F0Y2hlcnMgb24gYWxsIHRoZSBkaXJlY3RpdmVzXG4gICAgLy8gc28gdGhhdCB0aGUgcmVuZGVyZWQgY29udGVudCBzdGF5cyB0aGUgc2FtZVxuICAgIC8vIGR1cmluZyByZW1vdmFsLlxuICAgIGRpcnNbaV0uX3dhdGNoZXIgJiYgZGlyc1tpXS5fd2F0Y2hlci50ZWFyZG93bigpO1xuICB9XG59O1xuXG4vKipcbiAqIERlc3Ryb3kgdGhlIGZyYWdtZW50LlxuICovXG5cbkZyYWdtZW50LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5wYXJlbnRGcmFnKSB7XG4gICAgdGhpcy5wYXJlbnRGcmFnLmNoaWxkRnJhZ3MuJHJlbW92ZSh0aGlzKTtcbiAgfVxuICB0aGlzLm5vZGUuX192X2ZyYWcgPSBudWxsO1xuICB0aGlzLnVubGluaygpO1xufTtcblxuLyoqXG4gKiBDYWxsIGF0dGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcbiAqL1xuXG5mdW5jdGlvbiBhdHRhY2goY2hpbGQpIHtcbiAgaWYgKCFjaGlsZC5faXNBdHRhY2hlZCAmJiBpbkRvYyhjaGlsZC4kZWwpKSB7XG4gICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuICB9XG59XG5cbi8qKlxuICogQ2FsbCBkZXRhY2ggaG9vayBmb3IgYSBWdWUgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHtWdWV9IGNoaWxkXG4gKi9cblxuZnVuY3Rpb24gZGV0YWNoKGNoaWxkKSB7XG4gIGlmIChjaGlsZC5faXNBdHRhY2hlZCAmJiAhaW5Eb2MoY2hpbGQuJGVsKSkge1xuICAgIGNoaWxkLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcbiAgfVxufVxuXG52YXIgbGlua2VyQ2FjaGUgPSBuZXcgQ2FjaGUoNTAwMCk7XG5cbi8qKlxuICogQSBmYWN0b3J5IHRoYXQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGluc3RhbmNlcyBvZiBhXG4gKiBmcmFnbWVudC4gQ2FjaGVzIHRoZSBjb21waWxlZCBsaW5rZXIgaWYgcG9zc2libGUuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0VsZW1lbnR8U3RyaW5nfSBlbFxuICovXG5mdW5jdGlvbiBGcmFnbWVudEZhY3Rvcnkodm0sIGVsKSB7XG4gIHRoaXMudm0gPSB2bTtcbiAgdmFyIHRlbXBsYXRlO1xuICB2YXIgaXNTdHJpbmcgPSB0eXBlb2YgZWwgPT09ICdzdHJpbmcnO1xuICBpZiAoaXNTdHJpbmcgfHwgaXNUZW1wbGF0ZShlbCkgJiYgIWVsLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG4gICAgdGVtcGxhdGUgPSBwYXJzZVRlbXBsYXRlKGVsLCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICB0ZW1wbGF0ZS5hcHBlbmRDaGlsZChlbCk7XG4gIH1cbiAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAvLyBsaW5rZXIgY2FuIGJlIGNhY2hlZCwgYnV0IG9ubHkgZm9yIGNvbXBvbmVudHNcbiAgdmFyIGxpbmtlcjtcbiAgdmFyIGNpZCA9IHZtLmNvbnN0cnVjdG9yLmNpZDtcbiAgaWYgKGNpZCA+IDApIHtcbiAgICB2YXIgY2FjaGVJZCA9IGNpZCArIChpc1N0cmluZyA/IGVsIDogZ2V0T3V0ZXJIVE1MKGVsKSk7XG4gICAgbGlua2VyID0gbGlua2VyQ2FjaGUuZ2V0KGNhY2hlSWQpO1xuICAgIGlmICghbGlua2VyKSB7XG4gICAgICBsaW5rZXIgPSBjb21waWxlKHRlbXBsYXRlLCB2bS4kb3B0aW9ucywgdHJ1ZSk7XG4gICAgICBsaW5rZXJDYWNoZS5wdXQoY2FjaGVJZCwgbGlua2VyKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGlua2VyID0gY29tcGlsZSh0ZW1wbGF0ZSwgdm0uJG9wdGlvbnMsIHRydWUpO1xuICB9XG4gIHRoaXMubGlua2VyID0gbGlua2VyO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGZyYWdtZW50IGluc3RhbmNlIHdpdGggZ2l2ZW4gaG9zdCBhbmQgc2NvcGUuXG4gKlxuICogQHBhcmFtIHtWdWV9IGhvc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBzY29wZVxuICogQHBhcmFtIHtGcmFnbWVudH0gcGFyZW50RnJhZ1xuICovXG5cbkZyYWdtZW50RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKSB7XG4gIHZhciBmcmFnID0gY2xvbmVOb2RlKHRoaXMudGVtcGxhdGUpO1xuICByZXR1cm4gbmV3IEZyYWdtZW50KHRoaXMubGlua2VyLCB0aGlzLnZtLCBmcmFnLCBob3N0LCBzY29wZSwgcGFyZW50RnJhZyk7XG59O1xuXG52YXIgT04gPSA3MDA7XG52YXIgTU9ERUwgPSA4MDA7XG52YXIgQklORCA9IDg1MDtcbnZhciBUUkFOU0lUSU9OID0gMTEwMDtcbnZhciBFTCA9IDE1MDA7XG52YXIgQ09NUE9ORU5UID0gMTUwMDtcbnZhciBQQVJUSUFMID0gMTc1MDtcbnZhciBJRiA9IDIxMDA7XG52YXIgRk9SID0gMjIwMDtcbnZhciBTTE9UID0gMjMwMDtcblxudmFyIHVpZCQzID0gMDtcblxudmFyIHZGb3IgPSB7XG5cbiAgcHJpb3JpdHk6IEZPUixcbiAgdGVybWluYWw6IHRydWUsXG5cbiAgcGFyYW1zOiBbJ3RyYWNrLWJ5JywgJ3N0YWdnZXInLCAnZW50ZXItc3RhZ2dlcicsICdsZWF2ZS1zdGFnZ2VyJ10sXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyBzdXBwb3J0IFwiaXRlbSBpbi9vZiBpdGVtc1wiIHN5bnRheFxuICAgIHZhciBpbk1hdGNoID0gdGhpcy5leHByZXNzaW9uLm1hdGNoKC8oLiopICg/OmlufG9mKSAoLiopLyk7XG4gICAgaWYgKGluTWF0Y2gpIHtcbiAgICAgIHZhciBpdE1hdGNoID0gaW5NYXRjaFsxXS5tYXRjaCgvXFwoKC4qKSwoLiopXFwpLyk7XG4gICAgICBpZiAoaXRNYXRjaCkge1xuICAgICAgICB0aGlzLml0ZXJhdG9yID0gaXRNYXRjaFsxXS50cmltKCk7XG4gICAgICAgIHRoaXMuYWxpYXMgPSBpdE1hdGNoWzJdLnRyaW0oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYWxpYXMgPSBpbk1hdGNoWzFdLnRyaW0oKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGluTWF0Y2hbMl07XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmFsaWFzKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgdi1mb3IgZXhwcmVzc2lvbiBcIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2FsaWFzIGlzIHJlcXVpcmVkLicsIHRoaXMudm0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHVpZCBhcyBhIGNhY2hlIGlkZW50aWZpZXJcbiAgICB0aGlzLmlkID0gJ19fdi1mb3JfXycgKyArK3VpZCQzO1xuXG4gICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhbiBvcHRpb24gbGlzdCxcbiAgICAvLyBzbyB0aGF0IHdlIGtub3cgaWYgd2UgbmVlZCB0byB1cGRhdGUgdGhlIDxzZWxlY3Q+J3NcbiAgICAvLyB2LW1vZGVsIHdoZW4gdGhlIG9wdGlvbiBsaXN0IGhhcyBjaGFuZ2VkLlxuICAgIC8vIGJlY2F1c2Ugdi1tb2RlbCBoYXMgYSBsb3dlciBwcmlvcml0eSB0aGFuIHYtZm9yLFxuICAgIC8vIHRoZSB2LW1vZGVsIGlzIG5vdCBib3VuZCBoZXJlIHlldCwgc28gd2UgaGF2ZSB0b1xuICAgIC8vIHJldHJpdmUgaXQgaW4gdGhlIGFjdHVhbCB1cGRhdGVNb2RlbCgpIGZ1bmN0aW9uLlxuICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWU7XG4gICAgdGhpcy5pc09wdGlvbiA9ICh0YWcgPT09ICdPUFRJT04nIHx8IHRhZyA9PT0gJ09QVEdST1VQJykgJiYgdGhpcy5lbC5wYXJlbnROb2RlLnRhZ05hbWUgPT09ICdTRUxFQ1QnO1xuXG4gICAgLy8gc2V0dXAgYW5jaG9yIG5vZGVzXG4gICAgdGhpcy5zdGFydCA9IGNyZWF0ZUFuY2hvcigndi1mb3Itc3RhcnQnKTtcbiAgICB0aGlzLmVuZCA9IGNyZWF0ZUFuY2hvcigndi1mb3ItZW5kJyk7XG4gICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmVuZCk7XG4gICAgYmVmb3JlKHRoaXMuc3RhcnQsIHRoaXMuZW5kKTtcblxuICAgIC8vIGNhY2hlXG4gICAgdGhpcy5jYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICAvLyBmcmFnbWVudCBmYWN0b3J5XG4gICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCB0aGlzLmVsKTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShkYXRhKSB7XG4gICAgdGhpcy5kaWZmKGRhdGEpO1xuICAgIHRoaXMudXBkYXRlUmVmKCk7XG4gICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBEaWZmLCBiYXNlZCBvbiBuZXcgZGF0YSBhbmQgb2xkIGRhdGEsIGRldGVybWluZSB0aGVcbiAgICogbWluaW11bSBhbW91bnQgb2YgRE9NIG1hbmlwdWxhdGlvbnMgbmVlZGVkIHRvIG1ha2UgdGhlXG4gICAqIERPTSByZWZsZWN0IHRoZSBuZXcgZGF0YSBBcnJheS5cbiAgICpcbiAgICogVGhlIGFsZ29yaXRobSBkaWZmcyB0aGUgbmV3IGRhdGEgQXJyYXkgYnkgc3RvcmluZyBhXG4gICAqIGhpZGRlbiByZWZlcmVuY2UgdG8gYW4gb3duZXIgdm0gaW5zdGFuY2Ugb24gcHJldmlvdXNseVxuICAgKiBzZWVuIGRhdGEuIFRoaXMgYWxsb3dzIHVzIHRvIGFjaGlldmUgTyhuKSB3aGljaCBpc1xuICAgKiBiZXR0ZXIgdGhhbiBhIGxldmVuc2h0ZWluIGRpc3RhbmNlIGJhc2VkIGFsZ29yaXRobSxcbiAgICogd2hpY2ggaXMgTyhtICogbikuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGRhdGFcbiAgICovXG5cbiAgZGlmZjogZnVuY3Rpb24gZGlmZihkYXRhKSB7XG4gICAgLy8gY2hlY2sgaWYgdGhlIEFycmF5IHdhcyBjb252ZXJ0ZWQgZnJvbSBhbiBPYmplY3RcbiAgICB2YXIgaXRlbSA9IGRhdGFbMF07XG4gICAgdmFyIGNvbnZlcnRlZEZyb21PYmplY3QgPSB0aGlzLmZyb21PYmplY3QgPSBpc09iamVjdChpdGVtKSAmJiBoYXNPd24oaXRlbSwgJyRrZXknKSAmJiBoYXNPd24oaXRlbSwgJyR2YWx1ZScpO1xuXG4gICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuICAgIHZhciBvbGRGcmFncyA9IHRoaXMuZnJhZ3M7XG4gICAgdmFyIGZyYWdzID0gdGhpcy5mcmFncyA9IG5ldyBBcnJheShkYXRhLmxlbmd0aCk7XG4gICAgdmFyIGFsaWFzID0gdGhpcy5hbGlhcztcbiAgICB2YXIgaXRlcmF0b3IgPSB0aGlzLml0ZXJhdG9yO1xuICAgIHZhciBzdGFydCA9IHRoaXMuc3RhcnQ7XG4gICAgdmFyIGVuZCA9IHRoaXMuZW5kO1xuICAgIHZhciBpbkRvY3VtZW50ID0gaW5Eb2Moc3RhcnQpO1xuICAgIHZhciBpbml0ID0gIW9sZEZyYWdzO1xuICAgIHZhciBpLCBsLCBmcmFnLCBrZXksIHZhbHVlLCBwcmltaXRpdmU7XG5cbiAgICAvLyBGaXJzdCBwYXNzLCBnbyB0aHJvdWdoIHRoZSBuZXcgQXJyYXkgYW5kIGZpbGwgdXBcbiAgICAvLyB0aGUgbmV3IGZyYWdzIGFycmF5LiBJZiBhIHBpZWNlIG9mIGRhdGEgaGFzIGEgY2FjaGVkXG4gICAgLy8gaW5zdGFuY2UgZm9yIGl0LCB3ZSByZXVzZSBpdC4gT3RoZXJ3aXNlIGJ1aWxkIGEgbmV3XG4gICAgLy8gaW5zdGFuY2UuXG4gICAgZm9yIChpID0gMCwgbCA9IGRhdGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBpdGVtID0gZGF0YVtpXTtcbiAgICAgIGtleSA9IGNvbnZlcnRlZEZyb21PYmplY3QgPyBpdGVtLiRrZXkgOiBudWxsO1xuICAgICAgdmFsdWUgPSBjb252ZXJ0ZWRGcm9tT2JqZWN0ID8gaXRlbS4kdmFsdWUgOiBpdGVtO1xuICAgICAgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcbiAgICAgIGZyYWcgPSAhaW5pdCAmJiB0aGlzLmdldENhY2hlZEZyYWcodmFsdWUsIGksIGtleSk7XG4gICAgICBpZiAoZnJhZykge1xuICAgICAgICAvLyByZXVzYWJsZSBmcmFnbWVudFxuICAgICAgICBmcmFnLnJldXNlZCA9IHRydWU7XG4gICAgICAgIC8vIHVwZGF0ZSAkaW5kZXhcbiAgICAgICAgZnJhZy5zY29wZS4kaW5kZXggPSBpO1xuICAgICAgICAvLyB1cGRhdGUgJGtleVxuICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgZnJhZy5zY29wZS4ka2V5ID0ga2V5O1xuICAgICAgICB9XG4gICAgICAgIC8vIHVwZGF0ZSBpdGVyYXRvclxuICAgICAgICBpZiAoaXRlcmF0b3IpIHtcbiAgICAgICAgICBmcmFnLnNjb3BlW2l0ZXJhdG9yXSA9IGtleSAhPT0gbnVsbCA/IGtleSA6IGk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdXBkYXRlIGRhdGEgZm9yIHRyYWNrLWJ5LCBvYmplY3QgcmVwZWF0ICZcbiAgICAgICAgLy8gcHJpbWl0aXZlIHZhbHVlcy5cbiAgICAgICAgaWYgKHRyYWNrQnlLZXkgfHwgY29udmVydGVkRnJvbU9iamVjdCB8fCBwcmltaXRpdmUpIHtcbiAgICAgICAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmcmFnLnNjb3BlW2FsaWFzXSA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBuZXcgaXNudGFuY2VcbiAgICAgICAgZnJhZyA9IHRoaXMuY3JlYXRlKHZhbHVlLCBhbGlhcywgaSwga2V5KTtcbiAgICAgICAgZnJhZy5mcmVzaCA9ICFpbml0O1xuICAgICAgfVxuICAgICAgZnJhZ3NbaV0gPSBmcmFnO1xuICAgICAgaWYgKGluaXQpIHtcbiAgICAgICAgZnJhZy5iZWZvcmUoZW5kKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB3ZSdyZSBkb25lIGZvciB0aGUgaW5pdGlhbCByZW5kZXIuXG4gICAgaWYgKGluaXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTZWNvbmQgcGFzcywgZ28gdGhyb3VnaCB0aGUgb2xkIGZyYWdtZW50cyBhbmRcbiAgICAvLyBkZXN0cm95IHRob3NlIHdobyBhcmUgbm90IHJldXNlZCAoYW5kIHJlbW92ZSB0aGVtXG4gICAgLy8gZnJvbSBjYWNoZSlcbiAgICB2YXIgcmVtb3ZhbEluZGV4ID0gMDtcbiAgICB2YXIgdG90YWxSZW1vdmVkID0gb2xkRnJhZ3MubGVuZ3RoIC0gZnJhZ3MubGVuZ3RoO1xuICAgIC8vIHdoZW4gcmVtb3ZpbmcgYSBsYXJnZSBudW1iZXIgb2YgZnJhZ21lbnRzLCB3YXRjaGVyIHJlbW92YWxcbiAgICAvLyB0dXJucyBvdXQgdG8gYmUgYSBwZXJmIGJvdHRsZW5lY2ssIHNvIHdlIGJhdGNoIHRoZSB3YXRjaGVyXG4gICAgLy8gcmVtb3ZhbHMgaW50byBhIHNpbmdsZSBmaWx0ZXIgY2FsbCFcbiAgICB0aGlzLnZtLl92Rm9yUmVtb3ZpbmcgPSB0cnVlO1xuICAgIGZvciAoaSA9IDAsIGwgPSBvbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGZyYWcgPSBvbGRGcmFnc1tpXTtcbiAgICAgIGlmICghZnJhZy5yZXVzZWQpIHtcbiAgICAgICAgdGhpcy5kZWxldGVDYWNoZWRGcmFnKGZyYWcpO1xuICAgICAgICB0aGlzLnJlbW92ZShmcmFnLCByZW1vdmFsSW5kZXgrKywgdG90YWxSZW1vdmVkLCBpbkRvY3VtZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy52bS5fdkZvclJlbW92aW5nID0gZmFsc2U7XG4gICAgaWYgKHJlbW92YWxJbmRleCkge1xuICAgICAgdGhpcy52bS5fd2F0Y2hlcnMgPSB0aGlzLnZtLl93YXRjaGVycy5maWx0ZXIoZnVuY3Rpb24gKHcpIHtcbiAgICAgICAgcmV0dXJuIHcuYWN0aXZlO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gRmluYWwgcGFzcywgbW92ZS9pbnNlcnQgbmV3IGZyYWdtZW50cyBpbnRvIHRoZVxuICAgIC8vIHJpZ2h0IHBsYWNlLlxuICAgIHZhciB0YXJnZXRQcmV2LCBwcmV2RWwsIGN1cnJlbnRQcmV2O1xuICAgIHZhciBpbnNlcnRpb25JbmRleCA9IDA7XG4gICAgZm9yIChpID0gMCwgbCA9IGZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZnJhZyA9IGZyYWdzW2ldO1xuICAgICAgLy8gdGhpcyBpcyB0aGUgZnJhZyB0aGF0IHdlIHNob3VsZCBiZSBhZnRlclxuICAgICAgdGFyZ2V0UHJldiA9IGZyYWdzW2kgLSAxXTtcbiAgICAgIHByZXZFbCA9IHRhcmdldFByZXYgPyB0YXJnZXRQcmV2LnN0YWdnZXJDYiA/IHRhcmdldFByZXYuc3RhZ2dlckFuY2hvciA6IHRhcmdldFByZXYuZW5kIHx8IHRhcmdldFByZXYubm9kZSA6IHN0YXJ0O1xuICAgICAgaWYgKGZyYWcucmV1c2VkICYmICFmcmFnLnN0YWdnZXJDYikge1xuICAgICAgICBjdXJyZW50UHJldiA9IGZpbmRQcmV2RnJhZyhmcmFnLCBzdGFydCwgdGhpcy5pZCk7XG4gICAgICAgIGlmIChjdXJyZW50UHJldiAhPT0gdGFyZ2V0UHJldiAmJiAoIWN1cnJlbnRQcmV2IHx8XG4gICAgICAgIC8vIG9wdGltaXphdGlvbiBmb3IgbW92aW5nIGEgc2luZ2xlIGl0ZW0uXG4gICAgICAgIC8vIHRoYW5rcyB0byBzdWdnZXN0aW9ucyBieSBAbGl2b3JhcyBpbiAjMTgwN1xuICAgICAgICBmaW5kUHJldkZyYWcoY3VycmVudFByZXYsIHN0YXJ0LCB0aGlzLmlkKSAhPT0gdGFyZ2V0UHJldikpIHtcbiAgICAgICAgICB0aGlzLm1vdmUoZnJhZywgcHJldkVsKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbmV3IGluc3RhbmNlLCBvciBzdGlsbCBpbiBzdGFnZ2VyLlxuICAgICAgICAvLyBpbnNlcnQgd2l0aCB1cGRhdGVkIHN0YWdnZXIgaW5kZXguXG4gICAgICAgIHRoaXMuaW5zZXJ0KGZyYWcsIGluc2VydGlvbkluZGV4KyssIHByZXZFbCwgaW5Eb2N1bWVudCk7XG4gICAgICB9XG4gICAgICBmcmFnLnJldXNlZCA9IGZyYWcuZnJlc2ggPSBmYWxzZTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBmcmFnbWVudCBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWxpYXNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cbiAgICovXG5cbiAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUodmFsdWUsIGFsaWFzLCBpbmRleCwga2V5KSB7XG4gICAgdmFyIGhvc3QgPSB0aGlzLl9ob3N0O1xuICAgIC8vIGNyZWF0ZSBpdGVyYXRpb24gc2NvcGVcbiAgICB2YXIgcGFyZW50U2NvcGUgPSB0aGlzLl9zY29wZSB8fCB0aGlzLnZtO1xuICAgIHZhciBzY29wZSA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUpO1xuICAgIC8vIHJlZiBob2xkZXIgZm9yIHRoZSBzY29wZVxuICAgIHNjb3BlLiRyZWZzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZS4kcmVmcyk7XG4gICAgc2NvcGUuJGVscyA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUuJGVscyk7XG4gICAgLy8gbWFrZSBzdXJlIHBvaW50ICRwYXJlbnQgdG8gcGFyZW50IHNjb3BlXG4gICAgc2NvcGUuJHBhcmVudCA9IHBhcmVudFNjb3BlO1xuICAgIC8vIGZvciB0d28td2F5IGJpbmRpbmcgb24gYWxpYXNcbiAgICBzY29wZS4kZm9yQ29udGV4dCA9IHRoaXM7XG4gICAgLy8gZGVmaW5lIHNjb3BlIHByb3BlcnRpZXNcbiAgICAvLyBpbXBvcnRhbnQ6IGRlZmluZSB0aGUgc2NvcGUgYWxpYXMgd2l0aG91dCBmb3JjZWQgY29udmVyc2lvblxuICAgIC8vIHNvIHRoYXQgZnJvemVuIGRhdGEgc3RydWN0dXJlcyByZW1haW4gbm9uLXJlYWN0aXZlLlxuICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCBhbGlhcywgdmFsdWUpO1xuICAgIH0pO1xuICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCAnJGluZGV4JywgaW5kZXgpO1xuICAgIGlmIChrZXkpIHtcbiAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCAnJGtleScsIGtleSk7XG4gICAgfSBlbHNlIGlmIChzY29wZS4ka2V5KSB7XG4gICAgICAvLyBhdm9pZCBhY2NpZGVudGFsIGZhbGxiYWNrXG4gICAgICBkZWYoc2NvcGUsICcka2V5JywgbnVsbCk7XG4gICAgfVxuICAgIGlmICh0aGlzLml0ZXJhdG9yKSB7XG4gICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgdGhpcy5pdGVyYXRvciwga2V5ICE9PSBudWxsID8ga2V5IDogaW5kZXgpO1xuICAgIH1cbiAgICB2YXIgZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUoaG9zdCwgc2NvcGUsIHRoaXMuX2ZyYWcpO1xuICAgIGZyYWcuZm9ySWQgPSB0aGlzLmlkO1xuICAgIHRoaXMuY2FjaGVGcmFnKHZhbHVlLCBmcmFnLCBpbmRleCwga2V5KTtcbiAgICByZXR1cm4gZnJhZztcbiAgfSxcblxuICAvKipcbiAgICogVXBkYXRlIHRoZSB2LXJlZiBvbiBvd25lciB2bS5cbiAgICovXG5cbiAgdXBkYXRlUmVmOiBmdW5jdGlvbiB1cGRhdGVSZWYoKSB7XG4gICAgdmFyIHJlZiA9IHRoaXMuZGVzY3JpcHRvci5yZWY7XG4gICAgaWYgKCFyZWYpIHJldHVybjtcbiAgICB2YXIgaGFzaCA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kcmVmcztcbiAgICB2YXIgcmVmcztcbiAgICBpZiAoIXRoaXMuZnJvbU9iamVjdCkge1xuICAgICAgcmVmcyA9IHRoaXMuZnJhZ3MubWFwKGZpbmRWbUZyb21GcmFnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVmcyA9IHt9O1xuICAgICAgdGhpcy5mcmFncy5mb3JFYWNoKGZ1bmN0aW9uIChmcmFnKSB7XG4gICAgICAgIHJlZnNbZnJhZy5zY29wZS4ka2V5XSA9IGZpbmRWbUZyb21GcmFnKGZyYWcpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGhhc2hbcmVmXSA9IHJlZnM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZvciBvcHRpb24gbGlzdHMsIHVwZGF0ZSB0aGUgY29udGFpbmluZyB2LW1vZGVsIG9uXG4gICAqIHBhcmVudCA8c2VsZWN0Pi5cbiAgICovXG5cbiAgdXBkYXRlTW9kZWw6IGZ1bmN0aW9uIHVwZGF0ZU1vZGVsKCkge1xuICAgIGlmICh0aGlzLmlzT3B0aW9uKSB7XG4gICAgICB2YXIgcGFyZW50ID0gdGhpcy5zdGFydC5wYXJlbnROb2RlO1xuICAgICAgdmFyIG1vZGVsID0gcGFyZW50ICYmIHBhcmVudC5fX3ZfbW9kZWw7XG4gICAgICBpZiAobW9kZWwpIHtcbiAgICAgICAgbW9kZWwuZm9yY2VVcGRhdGUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEluc2VydCBhIGZyYWdtZW50LiBIYW5kbGVzIHN0YWdnZXJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7Tm9kZX0gcHJldkVsXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5Eb2N1bWVudFxuICAgKi9cblxuICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydChmcmFnLCBpbmRleCwgcHJldkVsLCBpbkRvY3VtZW50KSB7XG4gICAgaWYgKGZyYWcuc3RhZ2dlckNiKSB7XG4gICAgICBmcmFnLnN0YWdnZXJDYi5jYW5jZWwoKTtcbiAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcbiAgICB9XG4gICAgdmFyIHN0YWdnZXJBbW91bnQgPSB0aGlzLmdldFN0YWdnZXIoZnJhZywgaW5kZXgsIG51bGwsICdlbnRlcicpO1xuICAgIGlmIChpbkRvY3VtZW50ICYmIHN0YWdnZXJBbW91bnQpIHtcbiAgICAgIC8vIGNyZWF0ZSBhbiBhbmNob3IgYW5kIGluc2VydCBpdCBzeW5jaHJvbm91c2x5LFxuICAgICAgLy8gc28gdGhhdCB3ZSBjYW4gcmVzb2x2ZSB0aGUgY29ycmVjdCBvcmRlciB3aXRob3V0XG4gICAgICAvLyB3b3JyeWluZyBhYm91dCBzb21lIGVsZW1lbnRzIG5vdCBpbnNlcnRlZCB5ZXRcbiAgICAgIHZhciBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3I7XG4gICAgICBpZiAoIWFuY2hvcikge1xuICAgICAgICBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3IgPSBjcmVhdGVBbmNob3IoJ3N0YWdnZXItYW5jaG9yJyk7XG4gICAgICAgIGFuY2hvci5fX3ZfZnJhZyA9IGZyYWc7XG4gICAgICB9XG4gICAgICBhZnRlcihhbmNob3IsIHByZXZFbCk7XG4gICAgICB2YXIgb3AgPSBmcmFnLnN0YWdnZXJDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuICAgICAgICBmcmFnLmJlZm9yZShhbmNob3IpO1xuICAgICAgICByZW1vdmUoYW5jaG9yKTtcbiAgICAgIH0pO1xuICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB0YXJnZXQgPSBwcmV2RWwubmV4dFNpYmxpbmc7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgIC8vIHJlc2V0IGVuZCBhbmNob3IgcG9zaXRpb24gaW4gY2FzZSB0aGUgcG9zaXRpb24gd2FzIG1lc3NlZCB1cFxuICAgICAgICAvLyBieSBhbiBleHRlcm5hbCBkcmFnLW4tZHJvcCBsaWJyYXJ5LlxuICAgICAgICBhZnRlcih0aGlzLmVuZCwgcHJldkVsKTtcbiAgICAgICAgdGFyZ2V0ID0gdGhpcy5lbmQ7XG4gICAgICB9XG4gICAgICBmcmFnLmJlZm9yZSh0YXJnZXQpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlIGEgZnJhZ21lbnQuIEhhbmRsZXMgc3RhZ2dlcmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5Eb2N1bWVudFxuICAgKi9cblxuICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShmcmFnLCBpbmRleCwgdG90YWwsIGluRG9jdW1lbnQpIHtcbiAgICBpZiAoZnJhZy5zdGFnZ2VyQ2IpIHtcbiAgICAgIGZyYWcuc3RhZ2dlckNiLmNhbmNlbCgpO1xuICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuICAgICAgLy8gaXQncyBub3QgcG9zc2libGUgZm9yIHRoZSBzYW1lIGZyYWcgdG8gYmUgcmVtb3ZlZFxuICAgICAgLy8gdHdpY2UsIHNvIGlmIHdlIGhhdmUgYSBwZW5kaW5nIHN0YWdnZXIgY2FsbGJhY2ssXG4gICAgICAvLyBpdCBtZWFucyB0aGlzIGZyYWcgaXMgcXVldWVkIGZvciBlbnRlciBidXQgcmVtb3ZlZFxuICAgICAgLy8gYmVmb3JlIGl0cyB0cmFuc2l0aW9uIHN0YXJ0ZWQuIFNpbmNlIGl0IGlzIGFscmVhZHlcbiAgICAgIC8vIGRlc3Ryb3llZCwgd2UgY2FuIGp1c3QgbGVhdmUgaXQgaW4gZGV0YWNoZWQgc3RhdGUuXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBzdGFnZ2VyQW1vdW50ID0gdGhpcy5nZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCB0b3RhbCwgJ2xlYXZlJyk7XG4gICAgaWYgKGluRG9jdW1lbnQgJiYgc3RhZ2dlckFtb3VudCkge1xuICAgICAgdmFyIG9wID0gZnJhZy5zdGFnZ2VyQ2IgPSBjYW5jZWxsYWJsZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcbiAgICAgICAgZnJhZy5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZyYWcucmVtb3ZlKCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBNb3ZlIGEgZnJhZ21lbnQgdG8gYSBuZXcgcG9zaXRpb24uXG4gICAqIEZvcmNlIG5vIHRyYW5zaXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOb2RlfSBwcmV2RWxcbiAgICovXG5cbiAgbW92ZTogZnVuY3Rpb24gbW92ZShmcmFnLCBwcmV2RWwpIHtcbiAgICAvLyBmaXggYSBjb21tb24gaXNzdWUgd2l0aCBTb3J0YWJsZTpcbiAgICAvLyBpZiBwcmV2RWwgZG9lc24ndCBoYXZlIG5leHRTaWJsaW5nLCB0aGlzIG1lYW5zIGl0J3NcbiAgICAvLyBiZWVuIGRyYWdnZWQgYWZ0ZXIgdGhlIGVuZCBhbmNob3IuIEp1c3QgcmUtcG9zaXRpb25cbiAgICAvLyB0aGUgZW5kIGFuY2hvciB0byB0aGUgZW5kIG9mIHRoZSBjb250YWluZXIuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFwcmV2RWwubmV4dFNpYmxpbmcpIHtcbiAgICAgIHRoaXMuZW5kLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xuICAgIH1cbiAgICBmcmFnLmJlZm9yZShwcmV2RWwubmV4dFNpYmxpbmcsIGZhbHNlKTtcbiAgfSxcblxuICAvKipcbiAgICogQ2FjaGUgYSBmcmFnbWVudCB1c2luZyB0cmFjay1ieSBvciB0aGUgb2JqZWN0IGtleS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge1N0cmluZ30gW2tleV1cbiAgICovXG5cbiAgY2FjaGVGcmFnOiBmdW5jdGlvbiBjYWNoZUZyYWcodmFsdWUsIGZyYWcsIGluZGV4LCBrZXkpIHtcbiAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG4gICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZTtcbiAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcbiAgICB2YXIgaWQ7XG4gICAgaWYgKGtleSB8fCB0cmFja0J5S2V5IHx8IHByaW1pdGl2ZSkge1xuICAgICAgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcbiAgICAgIGlmICghY2FjaGVbaWRdKSB7XG4gICAgICAgIGNhY2hlW2lkXSA9IGZyYWc7XG4gICAgICB9IGVsc2UgaWYgKHRyYWNrQnlLZXkgIT09ICckaW5kZXgnKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWQgPSB0aGlzLmlkO1xuICAgICAgaWYgKGhhc093bih2YWx1ZSwgaWQpKSB7XG4gICAgICAgIGlmICh2YWx1ZVtpZF0gPT09IG51bGwpIHtcbiAgICAgICAgICB2YWx1ZVtpZF0gPSBmcmFnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSkge1xuICAgICAgICBkZWYodmFsdWUsIGlkLCBmcmFnKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuKCdGcm96ZW4gdi1mb3Igb2JqZWN0cyBjYW5ub3QgYmUgYXV0b21hdGljYWxseSB0cmFja2VkLCBtYWtlIHN1cmUgdG8gJyArICdwcm92aWRlIGEgdHJhY2stYnkga2V5LicpO1xuICAgICAgfVxuICAgIH1cbiAgICBmcmFnLnJhdyA9IHZhbHVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgYSBjYWNoZWQgZnJhZ21lbnQgZnJvbSB0aGUgdmFsdWUvaW5kZXgva2V5XG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICogQHJldHVybiB7RnJhZ21lbnR9XG4gICAqL1xuXG4gIGdldENhY2hlZEZyYWc6IGZ1bmN0aW9uIGdldENhY2hlZEZyYWcodmFsdWUsIGluZGV4LCBrZXkpIHtcbiAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG4gICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG4gICAgdmFyIGZyYWc7XG4gICAgaWYgKGtleSB8fCB0cmFja0J5S2V5IHx8IHByaW1pdGl2ZSkge1xuICAgICAgdmFyIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG4gICAgICBmcmFnID0gdGhpcy5jYWNoZVtpZF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGZyYWcgPSB2YWx1ZVt0aGlzLmlkXTtcbiAgICB9XG4gICAgaWYgKGZyYWcgJiYgKGZyYWcucmV1c2VkIHx8IGZyYWcuZnJlc2gpKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBmcmFnO1xuICB9LFxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBmcmFnbWVudCBmcm9tIGNhY2hlLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqL1xuXG4gIGRlbGV0ZUNhY2hlZEZyYWc6IGZ1bmN0aW9uIGRlbGV0ZUNhY2hlZEZyYWcoZnJhZykge1xuICAgIHZhciB2YWx1ZSA9IGZyYWcucmF3O1xuICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcbiAgICB2YXIgc2NvcGUgPSBmcmFnLnNjb3BlO1xuICAgIHZhciBpbmRleCA9IHNjb3BlLiRpbmRleDtcbiAgICAvLyBmaXggIzk0ODogYXZvaWQgYWNjaWRlbnRhbGx5IGZhbGwgdGhyb3VnaCB0b1xuICAgIC8vIGEgcGFyZW50IHJlcGVhdGVyIHdoaWNoIGhhcHBlbnMgdG8gaGF2ZSAka2V5LlxuICAgIHZhciBrZXkgPSBoYXNPd24oc2NvcGUsICcka2V5JykgJiYgc2NvcGUuJGtleTtcbiAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcbiAgICBpZiAodHJhY2tCeUtleSB8fCBrZXkgfHwgcHJpbWl0aXZlKSB7XG4gICAgICB2YXIgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcbiAgICAgIHRoaXMuY2FjaGVbaWRdID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWVbdGhpcy5pZF0gPSBudWxsO1xuICAgICAgZnJhZy5yYXcgPSBudWxsO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBzdGFnZ2VyIGFtb3VudCBmb3IgYW4gaW5zZXJ0aW9uL3JlbW92YWwuXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7TnVtYmVyfSB0b3RhbFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICAgKi9cblxuICBnZXRTdGFnZ2VyOiBmdW5jdGlvbiBnZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCB0b3RhbCwgdHlwZSkge1xuICAgIHR5cGUgPSB0eXBlICsgJ1N0YWdnZXInO1xuICAgIHZhciB0cmFucyA9IGZyYWcubm9kZS5fX3ZfdHJhbnM7XG4gICAgdmFyIGhvb2tzID0gdHJhbnMgJiYgdHJhbnMuaG9va3M7XG4gICAgdmFyIGhvb2sgPSBob29rcyAmJiAoaG9va3NbdHlwZV0gfHwgaG9va3Muc3RhZ2dlcik7XG4gICAgcmV0dXJuIGhvb2sgPyBob29rLmNhbGwoZnJhZywgaW5kZXgsIHRvdGFsKSA6IGluZGV4ICogcGFyc2VJbnQodGhpcy5wYXJhbXNbdHlwZV0gfHwgdGhpcy5wYXJhbXMuc3RhZ2dlciwgMTApO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQcmUtcHJvY2VzcyB0aGUgdmFsdWUgYmVmb3JlIHBpcGluZyBpdCB0aHJvdWdoIHRoZVxuICAgKiBmaWx0ZXJzLiBUaGlzIGlzIHBhc3NlZCB0byBhbmQgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyLlxuICAgKi9cblxuICBfcHJlUHJvY2VzczogZnVuY3Rpb24gX3ByZVByb2Nlc3ModmFsdWUpIHtcbiAgICAvLyByZWdhcmRsZXNzIG9mIHR5cGUsIHN0b3JlIHRoZSB1bi1maWx0ZXJlZCByYXcgdmFsdWUuXG4gICAgdGhpcy5yYXdWYWx1ZSA9IHZhbHVlO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcblxuICAvKipcbiAgICogUG9zdC1wcm9jZXNzIHRoZSB2YWx1ZSBhZnRlciBpdCBoYXMgYmVlbiBwaXBlZCB0aHJvdWdoXG4gICAqIHRoZSBmaWx0ZXJzLiBUaGlzIGlzIHBhc3NlZCB0byBhbmQgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyLlxuICAgKlxuICAgKiBJdCBpcyBuZWNlc3NhcnkgZm9yIHRoaXMgdG8gYmUgY2FsbGVkIGR1cmluZyB0aGVcbiAgICogd2F0Y2hlcidzIGRlcGVuZGVuY3kgY29sbGVjdGlvbiBwaGFzZSBiZWNhdXNlIHdlIHdhbnRcbiAgICogdGhlIHYtZm9yIHRvIHVwZGF0ZSB3aGVuIHRoZSBzb3VyY2UgT2JqZWN0IGlzIG11dGF0ZWQuXG4gICAqL1xuXG4gIF9wb3N0UHJvY2VzczogZnVuY3Rpb24gX3Bvc3RQcm9jZXNzKHZhbHVlKSB7XG4gICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgICAgLy8gY29udmVydCBwbGFpbiBvYmplY3QgdG8gYXJyYXkuXG4gICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcbiAgICAgIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gICAgICB2YXIgcmVzID0gbmV3IEFycmF5KGkpO1xuICAgICAgdmFyIGtleTtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgcmVzW2ldID0ge1xuICAgICAgICAgICRrZXk6IGtleSxcbiAgICAgICAgICAkdmFsdWU6IHZhbHVlW2tleV1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmICFpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSByYW5nZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWUgfHwgW107XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIGlmICh0aGlzLmRlc2NyaXB0b3IucmVmKSB7XG4gICAgICAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHJlZnNbdGhpcy5kZXNjcmlwdG9yLnJlZl0gPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5mcmFncykge1xuICAgICAgdmFyIGkgPSB0aGlzLmZyYWdzLmxlbmd0aDtcbiAgICAgIHZhciBmcmFnO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBmcmFnID0gdGhpcy5mcmFnc1tpXTtcbiAgICAgICAgdGhpcy5kZWxldGVDYWNoZWRGcmFnKGZyYWcpO1xuICAgICAgICBmcmFnLmRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogSGVscGVyIHRvIGZpbmQgdGhlIHByZXZpb3VzIGVsZW1lbnQgdGhhdCBpcyBhIGZyYWdtZW50XG4gKiBhbmNob3IuIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYSBkZXN0cm95ZWQgZnJhZydzXG4gKiBlbGVtZW50IGNvdWxkIHN0aWxsIGJlIGxpbmdlcmluZyBpbiB0aGUgRE9NIGJlZm9yZSBpdHNcbiAqIGxlYXZpbmcgdHJhbnNpdGlvbiBmaW5pc2hlcywgYnV0IGl0cyBpbnNlcnRlZCBmbGFnXG4gKiBzaG91bGQgaGF2ZSBiZWVuIHNldCB0byBmYWxzZSBzbyB3ZSBjYW4gc2tpcCB0aGVtLlxuICpcbiAqIElmIHRoaXMgaXMgYSBibG9jayByZXBlYXQsIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHdlIG9ubHlcbiAqIHJldHVybiBmcmFnIHRoYXQgaXMgYm91bmQgdG8gdGhpcyB2LWZvci4gKHNlZSAjOTI5KVxuICpcbiAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAqIEBwYXJhbSB7Q29tbWVudHxUZXh0fSBhbmNob3JcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICogQHJldHVybiB7RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gZmluZFByZXZGcmFnKGZyYWcsIGFuY2hvciwgaWQpIHtcbiAgdmFyIGVsID0gZnJhZy5ub2RlLnByZXZpb3VzU2libGluZztcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICghZWwpIHJldHVybjtcbiAgZnJhZyA9IGVsLl9fdl9mcmFnO1xuICB3aGlsZSAoKCFmcmFnIHx8IGZyYWcuZm9ySWQgIT09IGlkIHx8ICFmcmFnLmluc2VydGVkKSAmJiBlbCAhPT0gYW5jaG9yKSB7XG4gICAgZWwgPSBlbC5wcmV2aW91c1NpYmxpbmc7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFlbCkgcmV0dXJuO1xuICAgIGZyYWcgPSBlbC5fX3ZfZnJhZztcbiAgfVxuICByZXR1cm4gZnJhZztcbn1cblxuLyoqXG4gKiBGaW5kIGEgdm0gZnJvbSBhIGZyYWdtZW50LlxuICpcbiAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAqIEByZXR1cm4ge1Z1ZXx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gZmluZFZtRnJvbUZyYWcoZnJhZykge1xuICB2YXIgbm9kZSA9IGZyYWcubm9kZTtcbiAgLy8gaGFuZGxlIG11bHRpLW5vZGUgZnJhZ1xuICBpZiAoZnJhZy5lbmQpIHtcbiAgICB3aGlsZSAoIW5vZGUuX192dWVfXyAmJiBub2RlICE9PSBmcmFnLmVuZCAmJiBub2RlLm5leHRTaWJsaW5nKSB7XG4gICAgICBub2RlID0gbm9kZS5uZXh0U2libGluZztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5vZGUuX192dWVfXztcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSByYW5nZSBhcnJheSBmcm9tIGdpdmVuIG51bWJlci5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gblxuICogQHJldHVybiB7QXJyYXl9XG4gKi9cblxuZnVuY3Rpb24gcmFuZ2Uobikge1xuICB2YXIgaSA9IC0xO1xuICB2YXIgcmV0ID0gbmV3IEFycmF5KE1hdGguZmxvb3IobikpO1xuICB3aGlsZSAoKytpIDwgbikge1xuICAgIHJldFtpXSA9IGk7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHRyYWNrIGJ5IGtleSBmb3IgYW4gaXRlbS5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7U3RyaW5nfSBbdHJhY2tCeUtleV1cbiAqL1xuXG5mdW5jdGlvbiBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KSB7XG4gIHJldHVybiB0cmFja0J5S2V5ID8gdHJhY2tCeUtleSA9PT0gJyRpbmRleCcgPyBpbmRleCA6IHRyYWNrQnlLZXkuY2hhckF0KDApLm1hdGNoKC9cXHcvKSA/IGdldFBhdGgodmFsdWUsIHRyYWNrQnlLZXkpIDogdmFsdWVbdHJhY2tCeUtleV0gOiBrZXkgfHwgdmFsdWU7XG59XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZGb3Iud2FybkR1cGxpY2F0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHdhcm4oJ0R1cGxpY2F0ZSB2YWx1ZSBmb3VuZCBpbiB2LWZvcj1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpICsgJy4gVXNlIHRyYWNrLWJ5PVwiJGluZGV4XCIgaWYgJyArICd5b3UgYXJlIGV4cGVjdGluZyBkdXBsaWNhdGUgdmFsdWVzLicsIHRoaXMudm0pO1xuICB9O1xufVxuXG52YXIgdklmID0ge1xuXG4gIHByaW9yaXR5OiBJRixcbiAgdGVybWluYWw6IHRydWUsXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIGlmICghZWwuX192dWVfXykge1xuICAgICAgLy8gY2hlY2sgZWxzZSBibG9ja1xuICAgICAgdmFyIG5leHQgPSBlbC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICBpZiAobmV4dCAmJiBnZXRBdHRyKG5leHQsICd2LWVsc2UnKSAhPT0gbnVsbCkge1xuICAgICAgICByZW1vdmUobmV4dCk7XG4gICAgICAgIHRoaXMuZWxzZUVsID0gbmV4dDtcbiAgICAgIH1cbiAgICAgIC8vIGNoZWNrIG1haW4gYmxvY2tcbiAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWlmJyk7XG4gICAgICByZXBsYWNlKGVsLCB0aGlzLmFuY2hvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1pZj1cIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgY2Fubm90IGJlICcgKyAndXNlZCBvbiBhbiBpbnN0YW5jZSByb290IGVsZW1lbnQuJywgdGhpcy52bSk7XG4gICAgICB0aGlzLmludmFsaWQgPSB0cnVlO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmludmFsaWQpIHJldHVybjtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGlmICghdGhpcy5mcmFnKSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0KCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlKCk7XG4gICAgfVxuICB9LFxuXG4gIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KCkge1xuICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XG4gICAgICB0aGlzLmVsc2VGcmFnLnJlbW92ZSgpO1xuICAgICAgdGhpcy5lbHNlRnJhZyA9IG51bGw7XG4gICAgfVxuICAgIC8vIGxhenkgaW5pdCBmYWN0b3J5XG4gICAgaWYgKCF0aGlzLmZhY3RvcnkpIHtcbiAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgdGhpcy5lbCk7XG4gICAgfVxuICAgIHRoaXMuZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUodGhpcy5faG9zdCwgdGhpcy5fc2NvcGUsIHRoaXMuX2ZyYWcpO1xuICAgIHRoaXMuZnJhZy5iZWZvcmUodGhpcy5hbmNob3IpO1xuICB9LFxuXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgIGlmICh0aGlzLmZyYWcpIHtcbiAgICAgIHRoaXMuZnJhZy5yZW1vdmUoKTtcbiAgICAgIHRoaXMuZnJhZyA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLmVsc2VFbCAmJiAhdGhpcy5lbHNlRnJhZykge1xuICAgICAgaWYgKCF0aGlzLmVsc2VGYWN0b3J5KSB7XG4gICAgICAgIHRoaXMuZWxzZUZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMuZWxzZUVsLl9jb250ZXh0IHx8IHRoaXMudm0sIHRoaXMuZWxzZUVsKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZWxzZUZyYWcgPSB0aGlzLmVsc2VGYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZyk7XG4gICAgICB0aGlzLmVsc2VGcmFnLmJlZm9yZSh0aGlzLmFuY2hvcik7XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIGlmICh0aGlzLmZyYWcpIHtcbiAgICAgIHRoaXMuZnJhZy5kZXN0cm95KCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XG4gICAgICB0aGlzLmVsc2VGcmFnLmRlc3Ryb3koKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBzaG93ID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gY2hlY2sgZWxzZSBibG9ja1xuICAgIHZhciBuZXh0ID0gdGhpcy5lbC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgaWYgKG5leHQgJiYgZ2V0QXR0cihuZXh0LCAndi1lbHNlJykgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuZWxzZUVsID0gbmV4dDtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB0aGlzLmFwcGx5KHRoaXMuZWwsIHZhbHVlKTtcbiAgICBpZiAodGhpcy5lbHNlRWwpIHtcbiAgICAgIHRoaXMuYXBwbHkodGhpcy5lbHNlRWwsICF2YWx1ZSk7XG4gICAgfVxuICB9LFxuXG4gIGFwcGx5OiBmdW5jdGlvbiBhcHBseShlbCwgdmFsdWUpIHtcbiAgICBpZiAoaW5Eb2MoZWwpKSB7XG4gICAgICBhcHBseVRyYW5zaXRpb24oZWwsIHZhbHVlID8gMSA6IC0xLCB0b2dnbGUsIHRoaXMudm0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b2dnbGUoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdG9nZ2xlKCkge1xuICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gJycgOiAnbm9uZSc7XG4gICAgfVxuICB9XG59O1xuXG52YXIgdGV4dCQyID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIGlzUmFuZ2UgPSBlbC50eXBlID09PSAncmFuZ2UnO1xuICAgIHZhciBsYXp5ID0gdGhpcy5wYXJhbXMubGF6eTtcbiAgICB2YXIgbnVtYmVyID0gdGhpcy5wYXJhbXMubnVtYmVyO1xuICAgIHZhciBkZWJvdW5jZSA9IHRoaXMucGFyYW1zLmRlYm91bmNlO1xuXG4gICAgLy8gaGFuZGxlIGNvbXBvc2l0aW9uIGV2ZW50cy5cbiAgICAvLyAgIGh0dHA6Ly9ibG9nLmV2YW55b3UubWUvMjAxNC8wMS8wMy9jb21wb3NpdGlvbi1ldmVudC9cbiAgICAvLyBza2lwIHRoaXMgZm9yIEFuZHJvaWQgYmVjYXVzZSBpdCBoYW5kbGVzIGNvbXBvc2l0aW9uXG4gICAgLy8gZXZlbnRzIHF1aXRlIGRpZmZlcmVudGx5LiBBbmRyb2lkIGRvZXNuJ3QgdHJpZ2dlclxuICAgIC8vIGNvbXBvc2l0aW9uIGV2ZW50cyBmb3IgbGFuZ3VhZ2UgaW5wdXQgbWV0aG9kcyBlLmcuXG4gICAgLy8gQ2hpbmVzZSwgYnV0IGluc3RlYWQgdHJpZ2dlcnMgdGhlbSBmb3Igc3BlbGxpbmdcbiAgICAvLyBzdWdnZXN0aW9ucy4uLiAoc2VlIERpc2N1c3Npb24vIzE2MilcbiAgICB2YXIgY29tcG9zaW5nID0gZmFsc2U7XG4gICAgaWYgKCFpc0FuZHJvaWQgJiYgIWlzUmFuZ2UpIHtcbiAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbXBvc2luZyA9IHRydWU7XG4gICAgICB9KTtcbiAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb21wb3NpbmcgPSBmYWxzZTtcbiAgICAgICAgLy8gaW4gSUUxMSB0aGUgXCJjb21wb3NpdGlvbmVuZFwiIGV2ZW50IGZpcmVzIEFGVEVSXG4gICAgICAgIC8vIHRoZSBcImlucHV0XCIgZXZlbnQsIHNvIHRoZSBpbnB1dCBoYW5kbGVyIGlzIGJsb2NrZWRcbiAgICAgICAgLy8gYXQgdGhlIGVuZC4uLiBoYXZlIHRvIGNhbGwgaXQgaGVyZS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gIzEzMjc6IGluIGxhenkgbW9kZSB0aGlzIGlzIHVuZWNlc3NhcnkuXG4gICAgICAgIGlmICghbGF6eSkge1xuICAgICAgICAgIHNlbGYubGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gcHJldmVudCBtZXNzaW5nIHdpdGggdGhlIGlucHV0IHdoZW4gdXNlciBpcyB0eXBpbmcsXG4gICAgLy8gYW5kIGZvcmNlIHVwZGF0ZSBvbiBibHVyLlxuICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlO1xuICAgIGlmICghaXNSYW5nZSAmJiAhbGF6eSkge1xuICAgICAgdGhpcy5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuZm9jdXNlZCA9IHRydWU7XG4gICAgICB9KTtcbiAgICAgIHRoaXMub24oJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuZm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAvLyBkbyBub3Qgc3luYyB2YWx1ZSBhZnRlciBmcmFnbWVudCByZW1vdmFsICgjMjAxNylcbiAgICAgICAgaWYgKCFzZWxmLl9mcmFnIHx8IHNlbGYuX2ZyYWcuaW5zZXJ0ZWQpIHtcbiAgICAgICAgICBzZWxmLnJhd0xpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE5vdyBhdHRhY2ggdGhlIG1haW4gbGlzdGVuZXJcbiAgICB0aGlzLmxpc3RlbmVyID0gdGhpcy5yYXdMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChjb21wb3NpbmcgfHwgIXNlbGYuX2JvdW5kKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciB2YWwgPSBudW1iZXIgfHwgaXNSYW5nZSA/IHRvTnVtYmVyKGVsLnZhbHVlKSA6IGVsLnZhbHVlO1xuICAgICAgc2VsZi5zZXQodmFsKTtcbiAgICAgIC8vIGZvcmNlIHVwZGF0ZSBvbiBuZXh0IHRpY2sgdG8gYXZvaWQgbG9jayAmIHNhbWUgdmFsdWVcbiAgICAgIC8vIGFsc28gb25seSB1cGRhdGUgd2hlbiB1c2VyIGlzIG5vdCB0eXBpbmdcbiAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlbGYuX2JvdW5kICYmICFzZWxmLmZvY3VzZWQpIHtcbiAgICAgICAgICBzZWxmLnVwZGF0ZShzZWxmLl93YXRjaGVyLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIGFwcGx5IGRlYm91bmNlXG4gICAgaWYgKGRlYm91bmNlKSB7XG4gICAgICB0aGlzLmxpc3RlbmVyID0gX2RlYm91bmNlKHRoaXMubGlzdGVuZXIsIGRlYm91bmNlKTtcbiAgICB9XG5cbiAgICAvLyBTdXBwb3J0IGpRdWVyeSBldmVudHMsIHNpbmNlIGpRdWVyeS50cmlnZ2VyKCkgZG9lc24ndFxuICAgIC8vIHRyaWdnZXIgbmF0aXZlIGV2ZW50cyBpbiBzb21lIGNhc2VzIGFuZCBzb21lIHBsdWdpbnNcbiAgICAvLyByZWx5IG9uICQudHJpZ2dlcigpXG4gICAgLy9cbiAgICAvLyBXZSB3YW50IHRvIG1ha2Ugc3VyZSBpZiBhIGxpc3RlbmVyIGlzIGF0dGFjaGVkIHVzaW5nXG4gICAgLy8galF1ZXJ5LCBpdCBpcyBhbHNvIHJlbW92ZWQgd2l0aCBqUXVlcnksIHRoYXQncyB3aHlcbiAgICAvLyB3ZSBkbyB0aGUgY2hlY2sgZm9yIGVhY2ggZGlyZWN0aXZlIGluc3RhbmNlIGFuZFxuICAgIC8vIHN0b3JlIHRoYXQgY2hlY2sgcmVzdWx0IG9uIGl0c2VsZi4gVGhpcyBhbHNvIGFsbG93c1xuICAgIC8vIGVhc2llciB0ZXN0IGNvdmVyYWdlIGNvbnRyb2wgYnkgdW5zZXR0aW5nIHRoZSBnbG9iYWxcbiAgICAvLyBqUXVlcnkgdmFyaWFibGUgaW4gdGVzdHMuXG4gICAgdGhpcy5oYXNqUXVlcnkgPSB0eXBlb2YgalF1ZXJ5ID09PSAnZnVuY3Rpb24nO1xuICAgIGlmICh0aGlzLmhhc2pRdWVyeSkge1xuICAgICAgdmFyIG1ldGhvZCA9IGpRdWVyeS5mbi5vbiA/ICdvbicgOiAnYmluZCc7XG4gICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2NoYW5nZScsIHRoaXMucmF3TGlzdGVuZXIpO1xuICAgICAgaWYgKCFsYXp5KSB7XG4gICAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5yYXdMaXN0ZW5lcik7XG4gICAgICBpZiAoIWxhenkpIHtcbiAgICAgICAgdGhpcy5vbignaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJRTkgZG9lc24ndCBmaXJlIGlucHV0IGV2ZW50IG9uIGJhY2tzcGFjZS9kZWwvY3V0XG4gICAgaWYgKCFsYXp5ICYmIGlzSUU5KSB7XG4gICAgICB0aGlzLm9uKCdjdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG5leHRUaWNrKHNlbGYubGlzdGVuZXIpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDQ2IHx8IGUua2V5Q29kZSA9PT0gOCkge1xuICAgICAgICAgIHNlbGYubGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gc2V0IGluaXRpYWwgdmFsdWUgaWYgcHJlc2VudFxuICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykgfHwgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyAmJiBlbC52YWx1ZS50cmltKCkpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICAvLyAjMzAyOSBvbmx5IHVwZGF0ZSB3aGVuIHRoZSB2YWx1ZSBjaGFuZ2VzLiBUaGlzIHByZXZlbnRcbiAgICAvLyBicm93c2VycyBmcm9tIG92ZXJ3cml0aW5nIHZhbHVlcyBsaWtlIHNlbGVjdGlvblN0YXJ0XG4gICAgdmFsdWUgPSBfdG9TdHJpbmcodmFsdWUpO1xuICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5lbC52YWx1ZSkgdGhpcy5lbC52YWx1ZSA9IHZhbHVlO1xuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgaWYgKHRoaXMuaGFzalF1ZXJ5KSB7XG4gICAgICB2YXIgbWV0aG9kID0galF1ZXJ5LmZuLm9mZiA/ICdvZmYnIDogJ3VuYmluZCc7XG4gICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHJhZGlvID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cbiAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gdmFsdWUgb3ZlcndyaXRlIHZpYSB2LWJpbmQ6dmFsdWVcbiAgICAgIGlmIChlbC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykpIHtcbiAgICAgICAgcmV0dXJuIGVsLl92YWx1ZTtcbiAgICAgIH1cbiAgICAgIHZhciB2YWwgPSBlbC52YWx1ZTtcbiAgICAgIGlmIChzZWxmLnBhcmFtcy5udW1iZXIpIHtcbiAgICAgICAgdmFsID0gdG9OdW1iZXIodmFsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfTtcblxuICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBzZWxmLnNldChzZWxmLmdldFZhbHVlKCkpO1xuICAgIH07XG4gICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cbiAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdjaGVja2VkJykpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB0aGlzLmVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCB0aGlzLmdldFZhbHVlKCkpO1xuICB9XG59O1xuXG52YXIgc2VsZWN0ID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXG4gICAgLy8gbWV0aG9kIHRvIGZvcmNlIHVwZGF0ZSBET00gdXNpbmcgbGF0ZXN0IHZhbHVlLlxuICAgIHRoaXMuZm9yY2VVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoc2VsZi5fd2F0Y2hlcikge1xuICAgICAgICBzZWxmLnVwZGF0ZShzZWxmLl93YXRjaGVyLmdldCgpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhIG11bHRpcGxlIHNlbGVjdFxuICAgIHZhciBtdWx0aXBsZSA9IHRoaXMubXVsdGlwbGUgPSBlbC5oYXNBdHRyaWJ1dGUoJ211bHRpcGxlJyk7XG5cbiAgICAvLyBhdHRhY2ggbGlzdGVuZXJcbiAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0VmFsdWUoZWwsIG11bHRpcGxlKTtcbiAgICAgIHZhbHVlID0gc2VsZi5wYXJhbXMubnVtYmVyID8gaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5tYXAodG9OdW1iZXIpIDogdG9OdW1iZXIodmFsdWUpIDogdmFsdWU7XG4gICAgICBzZWxmLnNldCh2YWx1ZSk7XG4gICAgfTtcbiAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblxuICAgIC8vIGlmIGhhcyBpbml0aWFsIHZhbHVlLCBzZXQgYWZ0ZXJCaW5kXG4gICAgdmFyIGluaXRWYWx1ZSA9IGdldFZhbHVlKGVsLCBtdWx0aXBsZSwgdHJ1ZSk7XG4gICAgaWYgKG11bHRpcGxlICYmIGluaXRWYWx1ZS5sZW5ndGggfHwgIW11bHRpcGxlICYmIGluaXRWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuICAgIH1cblxuICAgIC8vIEFsbCBtYWpvciBicm93c2VycyBleGNlcHQgRmlyZWZveCByZXNldHNcbiAgICAvLyBzZWxlY3RlZEluZGV4IHdpdGggdmFsdWUgLTEgdG8gMCB3aGVuIHRoZSBlbGVtZW50XG4gICAgLy8gaXMgYXBwZW5kZWQgdG8gYSBuZXcgcGFyZW50LCB0aGVyZWZvcmUgd2UgaGF2ZSB0b1xuICAgIC8vIGZvcmNlIGEgRE9NIHVwZGF0ZSB3aGVuZXZlciB0aGF0IGhhcHBlbnMuLi5cbiAgICB0aGlzLnZtLiRvbignaG9vazphdHRhY2hlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIG5leHRUaWNrKF90aGlzLmZvcmNlVXBkYXRlKTtcbiAgICB9KTtcbiAgICBpZiAoIWluRG9jKGVsKSkge1xuICAgICAgbmV4dFRpY2sodGhpcy5mb3JjZVVwZGF0ZSk7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICBlbC5zZWxlY3RlZEluZGV4ID0gLTE7XG4gICAgdmFyIG11bHRpID0gdGhpcy5tdWx0aXBsZSAmJiBpc0FycmF5KHZhbHVlKTtcbiAgICB2YXIgb3B0aW9ucyA9IGVsLm9wdGlvbnM7XG4gICAgdmFyIGkgPSBvcHRpb25zLmxlbmd0aDtcbiAgICB2YXIgb3AsIHZhbDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBvcCA9IG9wdGlvbnNbaV07XG4gICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBvcC5fdmFsdWUgOiBvcC52YWx1ZTtcbiAgICAgIC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuICAgICAgb3Auc2VsZWN0ZWQgPSBtdWx0aSA/IGluZGV4T2YkMSh2YWx1ZSwgdmFsKSA+IC0xIDogbG9vc2VFcXVhbCh2YWx1ZSwgdmFsKTtcbiAgICAgIC8qIGVzbGludC1lbmFibGUgZXFlcWVxICovXG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgdGhpcy52bS4kb2ZmKCdob29rOmF0dGFjaGVkJywgdGhpcy5mb3JjZVVwZGF0ZSk7XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IHNlbGVjdCB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7U2VsZWN0RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gbXVsdGlcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5pdFxuICogQHJldHVybiB7QXJyYXl8Kn1cbiAqL1xuXG5mdW5jdGlvbiBnZXRWYWx1ZShlbCwgbXVsdGksIGluaXQpIHtcbiAgdmFyIHJlcyA9IG11bHRpID8gW10gOiBudWxsO1xuICB2YXIgb3AsIHZhbCwgc2VsZWN0ZWQ7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gZWwub3B0aW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBvcCA9IGVsLm9wdGlvbnNbaV07XG4gICAgc2VsZWN0ZWQgPSBpbml0ID8gb3AuaGFzQXR0cmlidXRlKCdzZWxlY3RlZCcpIDogb3Auc2VsZWN0ZWQ7XG4gICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBvcC5fdmFsdWUgOiBvcC52YWx1ZTtcbiAgICAgIGlmIChtdWx0aSkge1xuICAgICAgICByZXMucHVzaCh2YWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBOYXRpdmUgQXJyYXkuaW5kZXhPZiB1c2VzIHN0cmljdCBlcXVhbCwgYnV0IGluIHRoaXNcbiAqIGNhc2Ugd2UgbmVlZCB0byBtYXRjaCBzdHJpbmcvbnVtYmVycyB3aXRoIGN1c3RvbSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuZnVuY3Rpb24gaW5kZXhPZiQxKGFyciwgdmFsKSB7XG4gIHZhciBpID0gYXJyLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIGlmIChsb29zZUVxdWFsKGFycltpXSwgdmFsKSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxudmFyIGNoZWNrYm94ID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cbiAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGVsLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IGVsLl92YWx1ZSA6IHNlbGYucGFyYW1zLm51bWJlciA/IHRvTnVtYmVyKGVsLnZhbHVlKSA6IGVsLnZhbHVlO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXRCb29sZWFuVmFsdWUoKSB7XG4gICAgICB2YXIgdmFsID0gZWwuY2hlY2tlZDtcbiAgICAgIGlmICh2YWwgJiYgZWwuaGFzT3duUHJvcGVydHkoJ190cnVlVmFsdWUnKSkge1xuICAgICAgICByZXR1cm4gZWwuX3RydWVWYWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmICghdmFsICYmIGVsLmhhc093blByb3BlcnR5KCdfZmFsc2VWYWx1ZScpKSB7XG4gICAgICAgIHJldHVybiBlbC5fZmFsc2VWYWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuXG4gICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBtb2RlbCA9IHNlbGYuX3dhdGNoZXIudmFsdWU7XG4gICAgICBpZiAoaXNBcnJheShtb2RlbCkpIHtcbiAgICAgICAgdmFyIHZhbCA9IHNlbGYuZ2V0VmFsdWUoKTtcbiAgICAgICAgaWYgKGVsLmNoZWNrZWQpIHtcbiAgICAgICAgICBpZiAoaW5kZXhPZihtb2RlbCwgdmFsKSA8IDApIHtcbiAgICAgICAgICAgIG1vZGVsLnB1c2godmFsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbW9kZWwuJHJlbW92ZSh2YWwpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLnNldChnZXRCb29sZWFuVmFsdWUoKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkge1xuICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICBlbC5jaGVja2VkID0gaW5kZXhPZih2YWx1ZSwgdGhpcy5nZXRWYWx1ZSgpKSA+IC0xO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZWwuaGFzT3duUHJvcGVydHkoJ190cnVlVmFsdWUnKSkge1xuICAgICAgICBlbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgZWwuX3RydWVWYWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5jaGVja2VkID0gISF2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbnZhciBoYW5kbGVycyA9IHtcbiAgdGV4dDogdGV4dCQyLFxuICByYWRpbzogcmFkaW8sXG4gIHNlbGVjdDogc2VsZWN0LFxuICBjaGVja2JveDogY2hlY2tib3hcbn07XG5cbnZhciBtb2RlbCA9IHtcblxuICBwcmlvcml0eTogTU9ERUwsXG4gIHR3b1dheTogdHJ1ZSxcbiAgaGFuZGxlcnM6IGhhbmRsZXJzLFxuICBwYXJhbXM6IFsnbGF6eScsICdudW1iZXInLCAnZGVib3VuY2UnXSxcblxuICAvKipcbiAgICogUG9zc2libGUgZWxlbWVudHM6XG4gICAqICAgPHNlbGVjdD5cbiAgICogICA8dGV4dGFyZWE+XG4gICAqICAgPGlucHV0IHR5cGU9XCIqXCI+XG4gICAqICAgICAtIHRleHRcbiAgICogICAgIC0gY2hlY2tib3hcbiAgICogICAgIC0gcmFkaW9cbiAgICogICAgIC0gbnVtYmVyXG4gICAqL1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gZnJpZW5kbHkgd2FybmluZy4uLlxuICAgIHRoaXMuY2hlY2tGaWx0ZXJzKCk7XG4gICAgaWYgKHRoaXMuaGFzUmVhZCAmJiAhdGhpcy5oYXNXcml0ZSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIGEgcmVhZC1vbmx5IGZpbHRlciB3aXRoICcgKyAndi1tb2RlbD1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiLiAnICsgJ1lvdSBtaWdodCB3YW50IHRvIHVzZSBhIHR3by13YXkgZmlsdGVyIHRvIGVuc3VyZSBjb3JyZWN0IGJlaGF2aW9yLicsIHRoaXMudm0pO1xuICAgIH1cbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciB0YWcgPSBlbC50YWdOYW1lO1xuICAgIHZhciBoYW5kbGVyO1xuICAgIGlmICh0YWcgPT09ICdJTlBVVCcpIHtcbiAgICAgIGhhbmRsZXIgPSBoYW5kbGVyc1tlbC50eXBlXSB8fCBoYW5kbGVycy50ZXh0O1xuICAgIH0gZWxzZSBpZiAodGFnID09PSAnU0VMRUNUJykge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXJzLnNlbGVjdDtcbiAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXJzLnRleHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1tb2RlbCBkb2VzIG5vdCBzdXBwb3J0IGVsZW1lbnQgdHlwZTogJyArIHRhZywgdGhpcy52bSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGVsLl9fdl9tb2RlbCA9IHRoaXM7XG4gICAgaGFuZGxlci5iaW5kLmNhbGwodGhpcyk7XG4gICAgdGhpcy51cGRhdGUgPSBoYW5kbGVyLnVwZGF0ZTtcbiAgICB0aGlzLl91bmJpbmQgPSBoYW5kbGVyLnVuYmluZDtcbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2sgcmVhZC93cml0ZSBmaWx0ZXIgc3RhdHMuXG4gICAqL1xuXG4gIGNoZWNrRmlsdGVyczogZnVuY3Rpb24gY2hlY2tGaWx0ZXJzKCkge1xuICAgIHZhciBmaWx0ZXJzID0gdGhpcy5maWx0ZXJzO1xuICAgIGlmICghZmlsdGVycykgcmV0dXJuO1xuICAgIHZhciBpID0gZmlsdGVycy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFyIGZpbHRlciA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlcnNbaV0ubmFtZSk7XG4gICAgICBpZiAodHlwZW9mIGZpbHRlciA9PT0gJ2Z1bmN0aW9uJyB8fCBmaWx0ZXIucmVhZCkge1xuICAgICAgICB0aGlzLmhhc1JlYWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKGZpbHRlci53cml0ZSkge1xuICAgICAgICB0aGlzLmhhc1dyaXRlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdGhpcy5lbC5fX3ZfbW9kZWwgPSBudWxsO1xuICAgIHRoaXMuX3VuYmluZCAmJiB0aGlzLl91bmJpbmQoKTtcbiAgfVxufTtcblxuLy8ga2V5Q29kZSBhbGlhc2VzXG52YXIga2V5Q29kZXMgPSB7XG4gIGVzYzogMjcsXG4gIHRhYjogOSxcbiAgZW50ZXI6IDEzLFxuICBzcGFjZTogMzIsXG4gICdkZWxldGUnOiBbOCwgNDZdLFxuICB1cDogMzgsXG4gIGxlZnQ6IDM3LFxuICByaWdodDogMzksXG4gIGRvd246IDQwXG59O1xuXG5mdW5jdGlvbiBrZXlGaWx0ZXIoaGFuZGxlciwga2V5cykge1xuICB2YXIgY29kZXMgPSBrZXlzLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIGNoYXJDb2RlID0ga2V5LmNoYXJDb2RlQXQoMCk7XG4gICAgaWYgKGNoYXJDb2RlID4gNDcgJiYgY2hhckNvZGUgPCA1OCkge1xuICAgICAgcmV0dXJuIHBhcnNlSW50KGtleSwgMTApO1xuICAgIH1cbiAgICBpZiAoa2V5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgY2hhckNvZGUgPSBrZXkudG9VcHBlckNhc2UoKS5jaGFyQ29kZUF0KDApO1xuICAgICAgaWYgKGNoYXJDb2RlID4gNjQgJiYgY2hhckNvZGUgPCA5MSkge1xuICAgICAgICByZXR1cm4gY2hhckNvZGU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBrZXlDb2Rlc1trZXldO1xuICB9KTtcbiAgY29kZXMgPSBbXS5jb25jYXQuYXBwbHkoW10sIGNvZGVzKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIGtleUhhbmRsZXIoZSkge1xuICAgIGlmIChjb2Rlcy5pbmRleE9mKGUua2V5Q29kZSkgPiAtMSkge1xuICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0b3BGaWx0ZXIoaGFuZGxlcikge1xuICByZXR1cm4gZnVuY3Rpb24gc3RvcEhhbmRsZXIoZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcHJldmVudEZpbHRlcihoYW5kbGVyKSB7XG4gIHJldHVybiBmdW5jdGlvbiBwcmV2ZW50SGFuZGxlcihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHNlbGZGaWx0ZXIoaGFuZGxlcikge1xuICByZXR1cm4gZnVuY3Rpb24gc2VsZkhhbmRsZXIoZSkge1xuICAgIGlmIChlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIG9uJDEgPSB7XG5cbiAgcHJpb3JpdHk6IE9OLFxuICBhY2NlcHRTdGF0ZW1lbnQ6IHRydWUsXG4gIGtleUNvZGVzOiBrZXlDb2RlcyxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIGRlYWwgd2l0aCBpZnJhbWVzXG4gICAgaWYgKHRoaXMuZWwudGFnTmFtZSA9PT0gJ0lGUkFNRScgJiYgdGhpcy5hcmcgIT09ICdsb2FkJykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdGhpcy5pZnJhbWVCaW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBvbihzZWxmLmVsLmNvbnRlbnRXaW5kb3csIHNlbGYuYXJnLCBzZWxmLmhhbmRsZXIsIHNlbGYubW9kaWZpZXJzLmNhcHR1cmUpO1xuICAgICAgfTtcbiAgICAgIHRoaXMub24oJ2xvYWQnLCB0aGlzLmlmcmFtZUJpbmQpO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShoYW5kbGVyKSB7XG4gICAgLy8gc3R1YiBhIG5vb3AgZm9yIHYtb24gd2l0aCBubyB2YWx1ZSxcbiAgICAvLyBlLmcuIEBtb3VzZWRvd24ucHJldmVudFxuICAgIGlmICghdGhpcy5kZXNjcmlwdG9yLnJhdykge1xuICAgICAgaGFuZGxlciA9IGZ1bmN0aW9uICgpIHt9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgaGFuZGxlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LW9uOicgKyB0aGlzLmFyZyArICc9XCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiIGV4cGVjdHMgYSBmdW5jdGlvbiB2YWx1ZSwgJyArICdnb3QgJyArIGhhbmRsZXIsIHRoaXMudm0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGFwcGx5IG1vZGlmaWVyc1xuICAgIGlmICh0aGlzLm1vZGlmaWVycy5zdG9wKSB7XG4gICAgICBoYW5kbGVyID0gc3RvcEZpbHRlcihoYW5kbGVyKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubW9kaWZpZXJzLnByZXZlbnQpIHtcbiAgICAgIGhhbmRsZXIgPSBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5tb2RpZmllcnMuc2VsZikge1xuICAgICAgaGFuZGxlciA9IHNlbGZGaWx0ZXIoaGFuZGxlcik7XG4gICAgfVxuICAgIC8vIGtleSBmaWx0ZXJcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMubW9kaWZpZXJzKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIGtleSAhPT0gJ3N0b3AnICYmIGtleSAhPT0gJ3ByZXZlbnQnICYmIGtleSAhPT0gJ3NlbGYnICYmIGtleSAhPT0gJ2NhcHR1cmUnO1xuICAgIH0pO1xuICAgIGlmIChrZXlzLmxlbmd0aCkge1xuICAgICAgaGFuZGxlciA9IGtleUZpbHRlcihoYW5kbGVyLCBrZXlzKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlc2V0KCk7XG4gICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlcjtcblxuICAgIGlmICh0aGlzLmlmcmFtZUJpbmQpIHtcbiAgICAgIHRoaXMuaWZyYW1lQmluZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvbih0aGlzLmVsLCB0aGlzLmFyZywgdGhpcy5oYW5kbGVyLCB0aGlzLm1vZGlmaWVycy5jYXB0dXJlKTtcbiAgICB9XG4gIH0sXG5cbiAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIHZhciBlbCA9IHRoaXMuaWZyYW1lQmluZCA/IHRoaXMuZWwuY29udGVudFdpbmRvdyA6IHRoaXMuZWw7XG4gICAgaWYgKHRoaXMuaGFuZGxlcikge1xuICAgICAgb2ZmKGVsLCB0aGlzLmFyZywgdGhpcy5oYW5kbGVyKTtcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdGhpcy5yZXNldCgpO1xuICB9XG59O1xuXG52YXIgcHJlZml4ZXMgPSBbJy13ZWJraXQtJywgJy1tb3otJywgJy1tcy0nXTtcbnZhciBjYW1lbFByZWZpeGVzID0gWydXZWJraXQnLCAnTW96JywgJ21zJ107XG52YXIgaW1wb3J0YW50UkUgPSAvIWltcG9ydGFudDs/JC87XG52YXIgcHJvcENhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxudmFyIHRlc3RFbCA9IG51bGw7XG5cbnZhciBzdHlsZSA9IHtcblxuICBkZWVwOiB0cnVlLFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuZWwuc3R5bGUuY3NzVGV4dCA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlLnJlZHVjZShleHRlbmQsIHt9KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlIHx8IHt9KTtcbiAgICB9XG4gIH0sXG5cbiAgaGFuZGxlT2JqZWN0OiBmdW5jdGlvbiBoYW5kbGVPYmplY3QodmFsdWUpIHtcbiAgICAvLyBjYWNoZSBvYmplY3Qgc3R5bGVzIHNvIHRoYXQgb25seSBjaGFuZ2VkIHByb3BzXG4gICAgLy8gYXJlIGFjdHVhbGx5IHVwZGF0ZWQuXG4gICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZSB8fCAodGhpcy5jYWNoZSA9IHt9KTtcbiAgICB2YXIgbmFtZSwgdmFsO1xuICAgIGZvciAobmFtZSBpbiBjYWNoZSkge1xuICAgICAgaWYgKCEobmFtZSBpbiB2YWx1ZSkpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVTaW5nbGUobmFtZSwgbnVsbCk7XG4gICAgICAgIGRlbGV0ZSBjYWNoZVtuYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChuYW1lIGluIHZhbHVlKSB7XG4gICAgICB2YWwgPSB2YWx1ZVtuYW1lXTtcbiAgICAgIGlmICh2YWwgIT09IGNhY2hlW25hbWVdKSB7XG4gICAgICAgIGNhY2hlW25hbWVdID0gdmFsO1xuICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShuYW1lLCB2YWwpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBoYW5kbGVTaW5nbGU6IGZ1bmN0aW9uIGhhbmRsZVNpbmdsZShwcm9wLCB2YWx1ZSkge1xuICAgIHByb3AgPSBub3JtYWxpemUocHJvcCk7XG4gICAgaWYgKCFwcm9wKSByZXR1cm47IC8vIHVuc3VwcG9ydGVkIHByb3BcbiAgICAvLyBjYXN0IHBvc3NpYmxlIG51bWJlcnMvYm9vbGVhbnMgaW50byBzdHJpbmdzXG4gICAgaWYgKHZhbHVlICE9IG51bGwpIHZhbHVlICs9ICcnO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdmFyIGlzSW1wb3J0YW50ID0gaW1wb3J0YW50UkUudGVzdCh2YWx1ZSkgPyAnaW1wb3J0YW50JyA6ICcnO1xuICAgICAgaWYgKGlzSW1wb3J0YW50KSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIHdhcm4oJ0l0XFwncyBwcm9iYWJseSBhIGJhZCBpZGVhIHRvIHVzZSAhaW1wb3J0YW50IHdpdGggaW5saW5lIHJ1bGVzLiAnICsgJ1RoaXMgZmVhdHVyZSB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiBvZiBWdWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKGltcG9ydGFudFJFLCAnJykudHJpbSgpO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KHByb3Aua2ViYWIsIHZhbHVlLCBpc0ltcG9ydGFudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVsLnN0eWxlW3Byb3AuY2FtZWxdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWwuc3R5bGVbcHJvcC5jYW1lbF0gPSAnJztcbiAgICB9XG4gIH1cblxufTtcblxuLyoqXG4gKiBOb3JtYWxpemUgYSBDU1MgcHJvcGVydHkgbmFtZS5cbiAqIC0gY2FjaGUgcmVzdWx0XG4gKiAtIGF1dG8gcHJlZml4XG4gKiAtIGNhbWVsQ2FzZSAtPiBkYXNoLWNhc2VcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZShwcm9wKSB7XG4gIGlmIChwcm9wQ2FjaGVbcHJvcF0pIHtcbiAgICByZXR1cm4gcHJvcENhY2hlW3Byb3BdO1xuICB9XG4gIHZhciByZXMgPSBwcmVmaXgocHJvcCk7XG4gIHByb3BDYWNoZVtwcm9wXSA9IHByb3BDYWNoZVtyZXNdID0gcmVzO1xuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEF1dG8gZGV0ZWN0IHRoZSBhcHByb3ByaWF0ZSBwcmVmaXggZm9yIGEgQ1NTIHByb3BlcnR5LlxuICogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vcGF1bGlyaXNoLzUyMzY5MlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gcHJlZml4KHByb3ApIHtcbiAgcHJvcCA9IGh5cGhlbmF0ZShwcm9wKTtcbiAgdmFyIGNhbWVsID0gY2FtZWxpemUocHJvcCk7XG4gIHZhciB1cHBlciA9IGNhbWVsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWwuc2xpY2UoMSk7XG4gIGlmICghdGVzdEVsKSB7XG4gICAgdGVzdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIH1cbiAgdmFyIGkgPSBwcmVmaXhlcy5sZW5ndGg7XG4gIHZhciBwcmVmaXhlZDtcbiAgaWYgKGNhbWVsICE9PSAnZmlsdGVyJyAmJiBjYW1lbCBpbiB0ZXN0RWwuc3R5bGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAga2ViYWI6IHByb3AsXG4gICAgICBjYW1lbDogY2FtZWxcbiAgICB9O1xuICB9XG4gIHdoaWxlIChpLS0pIHtcbiAgICBwcmVmaXhlZCA9IGNhbWVsUHJlZml4ZXNbaV0gKyB1cHBlcjtcbiAgICBpZiAocHJlZml4ZWQgaW4gdGVzdEVsLnN0eWxlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBrZWJhYjogcHJlZml4ZXNbaV0gKyBwcm9wLFxuICAgICAgICBjYW1lbDogcHJlZml4ZWRcbiAgICAgIH07XG4gICAgfVxuICB9XG59XG5cbi8vIHhsaW5rXG52YXIgeGxpbmtOUyA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJztcbnZhciB4bGlua1JFID0gL154bGluazovO1xuXG4vLyBjaGVjayBmb3IgYXR0cmlidXRlcyB0aGF0IHByb2hpYml0IGludGVycG9sYXRpb25zXG52YXIgZGlzYWxsb3dlZEludGVycEF0dHJSRSA9IC9edi18Xjp8XkB8Xig/OmlzfHRyYW5zaXRpb258dHJhbnNpdGlvbi1tb2RlfGRlYm91bmNlfHRyYWNrLWJ5fHN0YWdnZXJ8ZW50ZXItc3RhZ2dlcnxsZWF2ZS1zdGFnZ2VyKSQvO1xuLy8gdGhlc2UgYXR0cmlidXRlcyBzaG91bGQgYWxzbyBzZXQgdGhlaXIgY29ycmVzcG9uZGluZyBwcm9wZXJ0aWVzXG4vLyBiZWNhdXNlIHRoZXkgb25seSBhZmZlY3QgdGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIGVsZW1lbnRcbnZhciBhdHRyV2l0aFByb3BzUkUgPSAvXig/OnZhbHVlfGNoZWNrZWR8c2VsZWN0ZWR8bXV0ZWQpJC87XG4vLyB0aGVzZSBhdHRyaWJ1dGVzIGV4cGVjdCBlbnVtcmF0ZWQgdmFsdWVzIG9mIFwidHJ1ZVwiIG9yIFwiZmFsc2VcIlxuLy8gYnV0IGFyZSBub3QgYm9vbGVhbiBhdHRyaWJ1dGVzXG52YXIgZW51bWVyYXRlZEF0dHJSRSA9IC9eKD86ZHJhZ2dhYmxlfGNvbnRlbnRlZGl0YWJsZXxzcGVsbGNoZWNrKSQvO1xuXG4vLyB0aGVzZSBhdHRyaWJ1dGVzIHNob3VsZCBzZXQgYSBoaWRkZW4gcHJvcGVydHkgZm9yXG4vLyBiaW5kaW5nIHYtbW9kZWwgdG8gb2JqZWN0IHZhbHVlc1xudmFyIG1vZGVsUHJvcHMgPSB7XG4gIHZhbHVlOiAnX3ZhbHVlJyxcbiAgJ3RydWUtdmFsdWUnOiAnX3RydWVWYWx1ZScsXG4gICdmYWxzZS12YWx1ZSc6ICdfZmFsc2VWYWx1ZSdcbn07XG5cbnZhciBiaW5kJDEgPSB7XG5cbiAgcHJpb3JpdHk6IEJJTkQsXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgYXR0ciA9IHRoaXMuYXJnO1xuICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWU7XG4gICAgLy8gc2hvdWxkIGJlIGRlZXAgd2F0Y2ggb24gb2JqZWN0IG1vZGVcbiAgICBpZiAoIWF0dHIpIHtcbiAgICAgIHRoaXMuZGVlcCA9IHRydWU7XG4gICAgfVxuICAgIC8vIGhhbmRsZSBpbnRlcnBvbGF0aW9uIGJpbmRpbmdzXG4gICAgdmFyIGRlc2NyaXB0b3IgPSB0aGlzLmRlc2NyaXB0b3I7XG4gICAgdmFyIHRva2VucyA9IGRlc2NyaXB0b3IuaW50ZXJwO1xuICAgIGlmICh0b2tlbnMpIHtcbiAgICAgIC8vIGhhbmRsZSBpbnRlcnBvbGF0aW9ucyB3aXRoIG9uZS10aW1lIHRva2Vuc1xuICAgICAgaWYgKGRlc2NyaXB0b3IuaGFzT25lVGltZSkge1xuICAgICAgICB0aGlzLmV4cHJlc3Npb24gPSB0b2tlbnNUb0V4cCh0b2tlbnMsIHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pO1xuICAgICAgfVxuXG4gICAgICAvLyBvbmx5IGFsbG93IGJpbmRpbmcgb24gbmF0aXZlIGF0dHJpYnV0ZXNcbiAgICAgIGlmIChkaXNhbGxvd2VkSW50ZXJwQXR0clJFLnRlc3QoYXR0cikgfHwgYXR0ciA9PT0gJ25hbWUnICYmICh0YWcgPT09ICdQQVJUSUFMJyB8fCB0YWcgPT09ICdTTE9UJykpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKGF0dHIgKyAnPVwiJyArIGRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2F0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uIGlzIG5vdCBhbGxvd2VkIGluIFZ1ZS5qcyAnICsgJ2RpcmVjdGl2ZXMgYW5kIHNwZWNpYWwgYXR0cmlidXRlcy4nLCB0aGlzLnZtKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgICAgIHRoaXMuaW52YWxpZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgdmFyIHJhdyA9IGF0dHIgKyAnPVwiJyArIGRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnO1xuICAgICAgICAvLyB3YXJuIHNyY1xuICAgICAgICBpZiAoYXR0ciA9PT0gJ3NyYycpIHtcbiAgICAgICAgICB3YXJuKHJhdyArICdpbnRlcnBvbGF0aW9uIGluIFwic3JjXCIgYXR0cmlidXRlIHdpbGwgY2F1c2UgJyArICdhIDQwNCByZXF1ZXN0LiBVc2Ugdi1iaW5kOnNyYyBpbnN0ZWFkLicsIHRoaXMudm0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2FybiBzdHlsZVxuICAgICAgICBpZiAoYXR0ciA9PT0gJ3N0eWxlJykge1xuICAgICAgICAgIHdhcm4ocmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzdHlsZVwiIGF0dHJpYnV0ZSB3aWxsIGNhdXNlICcgKyAndGhlIGF0dHJpYnV0ZSB0byBiZSBkaXNjYXJkZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIuICcgKyAnVXNlIHYtYmluZDpzdHlsZSBpbnN0ZWFkLicsIHRoaXMudm0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuaW52YWxpZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgYXR0ciA9IHRoaXMuYXJnO1xuICAgIGlmICh0aGlzLmFyZykge1xuICAgICAgdGhpcy5oYW5kbGVTaW5nbGUoYXR0ciwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZSB8fCB7fSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIHNoYXJlIG9iamVjdCBoYW5kbGVyIHdpdGggdi1iaW5kOmNsYXNzXG4gIGhhbmRsZU9iamVjdDogc3R5bGUuaGFuZGxlT2JqZWN0LFxuXG4gIGhhbmRsZVNpbmdsZTogZnVuY3Rpb24gaGFuZGxlU2luZ2xlKGF0dHIsIHZhbHVlKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgaW50ZXJwID0gdGhpcy5kZXNjcmlwdG9yLmludGVycDtcbiAgICBpZiAodGhpcy5tb2RpZmllcnMuY2FtZWwpIHtcbiAgICAgIGF0dHIgPSBjYW1lbGl6ZShhdHRyKTtcbiAgICB9XG4gICAgaWYgKCFpbnRlcnAgJiYgYXR0cldpdGhQcm9wc1JFLnRlc3QoYXR0cikgJiYgYXR0ciBpbiBlbCkge1xuICAgICAgdmFyIGF0dHJWYWx1ZSA9IGF0dHIgPT09ICd2YWx1ZScgPyB2YWx1ZSA9PSBudWxsIC8vIElFOSB3aWxsIHNldCBpbnB1dC52YWx1ZSB0byBcIm51bGxcIiBmb3IgbnVsbC4uLlxuICAgICAgPyAnJyA6IHZhbHVlIDogdmFsdWU7XG5cbiAgICAgIGlmIChlbFthdHRyXSAhPT0gYXR0clZhbHVlKSB7XG4gICAgICAgIGVsW2F0dHJdID0gYXR0clZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBzZXQgbW9kZWwgcHJvcHNcbiAgICB2YXIgbW9kZWxQcm9wID0gbW9kZWxQcm9wc1thdHRyXTtcbiAgICBpZiAoIWludGVycCAmJiBtb2RlbFByb3ApIHtcbiAgICAgIGVsW21vZGVsUHJvcF0gPSB2YWx1ZTtcbiAgICAgIC8vIHVwZGF0ZSB2LW1vZGVsIGlmIHByZXNlbnRcbiAgICAgIHZhciBtb2RlbCA9IGVsLl9fdl9tb2RlbDtcbiAgICAgIGlmIChtb2RlbCkge1xuICAgICAgICBtb2RlbC5saXN0ZW5lcigpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBkbyBub3Qgc2V0IHZhbHVlIGF0dHJpYnV0ZSBmb3IgdGV4dGFyZWFcbiAgICBpZiAoYXR0ciA9PT0gJ3ZhbHVlJyAmJiBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHVwZGF0ZSBhdHRyaWJ1dGVcbiAgICBpZiAoZW51bWVyYXRlZEF0dHJSRS50ZXN0KGF0dHIpKSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUgPyAndHJ1ZScgOiAnZmFsc2UnKTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlICE9IG51bGwgJiYgdmFsdWUgIT09IGZhbHNlKSB7XG4gICAgICBpZiAoYXR0ciA9PT0gJ2NsYXNzJykge1xuICAgICAgICAvLyBoYW5kbGUgZWRnZSBjYXNlICMxOTYwOlxuICAgICAgICAvLyBjbGFzcyBpbnRlcnBvbGF0aW9uIHNob3VsZCBub3Qgb3ZlcndyaXRlIFZ1ZSB0cmFuc2l0aW9uIGNsYXNzXG4gICAgICAgIGlmIChlbC5fX3ZfdHJhbnMpIHtcbiAgICAgICAgICB2YWx1ZSArPSAnICcgKyBlbC5fX3ZfdHJhbnMuaWQgKyAnLXRyYW5zaXRpb24nO1xuICAgICAgICB9XG4gICAgICAgIHNldENsYXNzKGVsLCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHhsaW5rUkUudGVzdChhdHRyKSkge1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBhdHRyLCB2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlID09PSB0cnVlID8gJycgOiB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBlbCA9IHtcblxuICBwcmlvcml0eTogRUwsXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIXRoaXMuYXJnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpZCA9IHRoaXMuaWQgPSBjYW1lbGl6ZSh0aGlzLmFyZyk7XG4gICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJGVscztcbiAgICBpZiAoaGFzT3duKHJlZnMsIGlkKSkge1xuICAgICAgcmVmc1tpZF0gPSB0aGlzLmVsO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWZpbmVSZWFjdGl2ZShyZWZzLCBpZCwgdGhpcy5lbCk7XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRlbHM7XG4gICAgaWYgKHJlZnNbdGhpcy5pZF0gPT09IHRoaXMuZWwpIHtcbiAgICAgIHJlZnNbdGhpcy5pZF0gPSBudWxsO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHJlZiA9IHtcbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3YtcmVmOicgKyB0aGlzLmFyZyArICcgbXVzdCBiZSB1c2VkIG9uIGEgY2hpbGQgJyArICdjb21wb25lbnQuIEZvdW5kIG9uIDwnICsgdGhpcy5lbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyAnPi4nLCB0aGlzLnZtKTtcbiAgfVxufTtcblxudmFyIGNsb2FrID0ge1xuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdGhpcy52bS4kb25jZSgncHJlLWhvb2s6Y29tcGlsZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3YtY2xvYWsnKTtcbiAgICB9KTtcbiAgfVxufTtcblxuLy8gbXVzdCBleHBvcnQgcGxhaW4gb2JqZWN0XG52YXIgZGlyZWN0aXZlcyA9IHtcbiAgdGV4dDogdGV4dCQxLFxuICBodG1sOiBodG1sLFxuICAnZm9yJzogdkZvcixcbiAgJ2lmJzogdklmLFxuICBzaG93OiBzaG93LFxuICBtb2RlbDogbW9kZWwsXG4gIG9uOiBvbiQxLFxuICBiaW5kOiBiaW5kJDEsXG4gIGVsOiBlbCxcbiAgcmVmOiByZWYsXG4gIGNsb2FrOiBjbG9ha1xufTtcblxudmFyIHZDbGFzcyA9IHtcblxuICBkZWVwOiB0cnVlLFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgdGhpcy5jbGVhbnVwKCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLnNldENsYXNzKHZhbHVlLnRyaW0oKS5zcGxpdCgvXFxzKy8pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRDbGFzcyhub3JtYWxpemUkMSh2YWx1ZSkpO1xuICAgIH1cbiAgfSxcblxuICBzZXRDbGFzczogZnVuY3Rpb24gc2V0Q2xhc3ModmFsdWUpIHtcbiAgICB0aGlzLmNsZWFudXAodmFsdWUpO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgdmFsID0gdmFsdWVbaV07XG4gICAgICBpZiAodmFsKSB7XG4gICAgICAgIGFwcGx5KHRoaXMuZWwsIHZhbCwgYWRkQ2xhc3MpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnByZXZLZXlzID0gdmFsdWU7XG4gIH0sXG5cbiAgY2xlYW51cDogZnVuY3Rpb24gY2xlYW51cCh2YWx1ZSkge1xuICAgIHZhciBwcmV2S2V5cyA9IHRoaXMucHJldktleXM7XG4gICAgaWYgKCFwcmV2S2V5cykgcmV0dXJuO1xuICAgIHZhciBpID0gcHJldktleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciBrZXkgPSBwcmV2S2V5c1tpXTtcbiAgICAgIGlmICghdmFsdWUgfHwgdmFsdWUuaW5kZXhPZihrZXkpIDwgMCkge1xuICAgICAgICBhcHBseSh0aGlzLmVsLCBrZXksIHJlbW92ZUNsYXNzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogTm9ybWFsaXplIG9iamVjdHMgYW5kIGFycmF5cyAocG90ZW50aWFsbHkgY29udGFpbmluZyBvYmplY3RzKVxuICogaW50byBhcnJheSBvZiBzdHJpbmdzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5PFN0cmluZ3xPYmplY3Q+fSB2YWx1ZVxuICogQHJldHVybiB7QXJyYXk8U3RyaW5nPn1cbiAqL1xuXG5mdW5jdGlvbiBub3JtYWxpemUkMSh2YWx1ZSkge1xuICB2YXIgcmVzID0gW107XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgX2tleSA9IHZhbHVlW2ldO1xuICAgICAgaWYgKF9rZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBfa2V5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHJlcy5wdXNoKF9rZXkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAodmFyIGsgaW4gX2tleSkge1xuICAgICAgICAgICAgaWYgKF9rZXlba10pIHJlcy5wdXNoKGspO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZVtrZXldKSByZXMucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEFkZCBvciByZW1vdmUgYSBjbGFzcy9jbGFzc2VzIG9uIGFuIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBjbGFzcyBuYW1lLiBUaGlzIG1heSBvciBtYXkgbm90XG4gKiAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW4gYSBzcGFjZSBjaGFyYWN0ZXIsIGluIHN1Y2ggYVxuICogICAgICAgICAgICAgICAgICAgICBjYXNlIHdlJ2xsIGRlYWwgd2l0aCBtdWx0aXBsZSBjbGFzc1xuICogICAgICAgICAgICAgICAgICAgICBuYW1lcyBhdCBvbmNlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuXG5mdW5jdGlvbiBhcHBseShlbCwga2V5LCBmbikge1xuICBrZXkgPSBrZXkudHJpbSgpO1xuICBpZiAoa2V5LmluZGV4T2YoJyAnKSA9PT0gLTEpIHtcbiAgICBmbihlbCwga2V5KTtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gVGhlIGtleSBjb250YWlucyBvbmUgb3IgbW9yZSBzcGFjZSBjaGFyYWN0ZXJzLlxuICAvLyBTaW5jZSBhIGNsYXNzIG5hbWUgZG9lc24ndCBhY2NlcHQgc3VjaCBjaGFyYWN0ZXJzLCB3ZVxuICAvLyB0cmVhdCBpdCBhcyBtdWx0aXBsZSBjbGFzc2VzLlxuICB2YXIga2V5cyA9IGtleS5zcGxpdCgvXFxzKy8pO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZm4oZWwsIGtleXNbaV0pO1xuICB9XG59XG5cbnZhciBjb21wb25lbnQgPSB7XG5cbiAgcHJpb3JpdHk6IENPTVBPTkVOVCxcblxuICBwYXJhbXM6IFsna2VlcC1hbGl2ZScsICd0cmFuc2l0aW9uLW1vZGUnLCAnaW5saW5lLXRlbXBsYXRlJ10sXG5cbiAgLyoqXG4gICAqIFNldHVwLiBUd28gcG9zc2libGUgdXNhZ2VzOlxuICAgKlxuICAgKiAtIHN0YXRpYzpcbiAgICogICA8Y29tcD4gb3IgPGRpdiB2LWNvbXBvbmVudD1cImNvbXBcIj5cbiAgICpcbiAgICogLSBkeW5hbWljOlxuICAgKiAgIDxjb21wb25lbnQgOmlzPVwidmlld1wiPlxuICAgKi9cblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIGlmICghdGhpcy5lbC5fX3Z1ZV9fKSB7XG4gICAgICAvLyBrZWVwLWFsaXZlIGNhY2hlXG4gICAgICB0aGlzLmtlZXBBbGl2ZSA9IHRoaXMucGFyYW1zLmtlZXBBbGl2ZTtcbiAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgICB0aGlzLmNhY2hlID0ge307XG4gICAgICB9XG4gICAgICAvLyBjaGVjayBpbmxpbmUtdGVtcGxhdGVcbiAgICAgIGlmICh0aGlzLnBhcmFtcy5pbmxpbmVUZW1wbGF0ZSkge1xuICAgICAgICAvLyBleHRyYWN0IGlubGluZSB0ZW1wbGF0ZSBhcyBhIERvY3VtZW50RnJhZ21lbnRcbiAgICAgICAgdGhpcy5pbmxpbmVUZW1wbGF0ZSA9IGV4dHJhY3RDb250ZW50KHRoaXMuZWwsIHRydWUpO1xuICAgICAgfVxuICAgICAgLy8gY29tcG9uZW50IHJlc29sdXRpb24gcmVsYXRlZCBzdGF0ZVxuICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSB0aGlzLkNvbXBvbmVudCA9IG51bGw7XG4gICAgICAvLyB0cmFuc2l0aW9uIHJlbGF0ZWQgc3RhdGVcbiAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxzID0gMDtcbiAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxDYiA9IG51bGw7XG4gICAgICAvLyBjcmVhdGUgYSByZWYgYW5jaG9yXG4gICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1jb21wb25lbnQnKTtcbiAgICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuICAgICAgLy8gcmVtb3ZlIGlzIGF0dHJpYnV0ZS5cbiAgICAgIC8vIHRoaXMgaXMgcmVtb3ZlZCBkdXJpbmcgY29tcGlsYXRpb24sIGJ1dCBiZWNhdXNlIGNvbXBpbGF0aW9uIGlzXG4gICAgICAvLyBjYWNoZWQsIHdoZW4gdGhlIGNvbXBvbmVudCBpcyB1c2VkIGVsc2V3aGVyZSB0aGlzIGF0dHJpYnV0ZVxuICAgICAgLy8gd2lsbCByZW1haW4gYXQgbGluayB0aW1lLlxuICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ2lzJyk7XG4gICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnOmlzJyk7XG4gICAgICAvLyByZW1vdmUgcmVmLCBzYW1lIGFzIGFib3ZlXG4gICAgICBpZiAodGhpcy5kZXNjcmlwdG9yLnJlZikge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgndi1yZWY6JyArIGh5cGhlbmF0ZSh0aGlzLmRlc2NyaXB0b3IucmVmKSk7XG4gICAgICB9XG4gICAgICAvLyBpZiBzdGF0aWMsIGJ1aWxkIHJpZ2h0IG5vdy5cbiAgICAgIGlmICh0aGlzLmxpdGVyYWwpIHtcbiAgICAgICAgdGhpcy5zZXRDb21wb25lbnQodGhpcy5leHByZXNzaW9uKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdjYW5ub3QgbW91bnQgY29tcG9uZW50IFwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiAnICsgJ29uIGFscmVhZHkgbW91bnRlZCBlbGVtZW50OiAnICsgdGhpcy5lbCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBQdWJsaWMgdXBkYXRlLCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIgaW4gdGhlIGR5bmFtaWNcbiAgICogbGl0ZXJhbCBzY2VuYXJpbywgZS5nLiA8Y29tcG9uZW50IDppcz1cInZpZXdcIj5cbiAgICovXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICBpZiAoIXRoaXMubGl0ZXJhbCkge1xuICAgICAgdGhpcy5zZXRDb21wb25lbnQodmFsdWUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogU3dpdGNoIGR5bmFtaWMgY29tcG9uZW50cy4gTWF5IHJlc29sdmUgdGhlIGNvbXBvbmVudFxuICAgKiBhc3luY2hyb25vdXNseSwgYW5kIHBlcmZvcm0gdHJhbnNpdGlvbiBiYXNlZCBvblxuICAgKiBzcGVjaWZpZWQgdHJhbnNpdGlvbiBtb2RlLiBBY2NlcHRzIGEgZmV3IGFkZGl0aW9uYWxcbiAgICogYXJndW1lbnRzIHNwZWNpZmljYWxseSBmb3IgdnVlLXJvdXRlci5cbiAgICpcbiAgICogVGhlIGNhbGxiYWNrIGlzIGNhbGxlZCB3aGVuIHRoZSBmdWxsIHRyYW5zaXRpb24gaXNcbiAgICogZmluaXNoZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIHNldENvbXBvbmVudDogZnVuY3Rpb24gc2V0Q29tcG9uZW50KHZhbHVlLCBjYikge1xuICAgIHRoaXMuaW52YWxpZGF0ZVBlbmRpbmcoKTtcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAvLyBqdXN0IHJlbW92ZSBjdXJyZW50XG4gICAgICB0aGlzLnVuYnVpbGQodHJ1ZSk7XG4gICAgICB0aGlzLnJlbW92ZSh0aGlzLmNoaWxkVk0sIGNiKTtcbiAgICAgIHRoaXMuY2hpbGRWTSA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHRoaXMucmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLm1vdW50Q29tcG9uZW50KGNiKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVzb2x2ZSB0aGUgY29tcG9uZW50IGNvbnN0cnVjdG9yIHRvIHVzZSB3aGVuIGNyZWF0aW5nXG4gICAqIHRoZSBjaGlsZCB2bS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHZhbHVlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqL1xuXG4gIHJlc29sdmVDb21wb25lbnQ6IGZ1bmN0aW9uIHJlc29sdmVDb21wb25lbnQodmFsdWUsIGNiKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKENvbXBvbmVudCkge1xuICAgICAgc2VsZi5Db21wb25lbnROYW1lID0gQ29tcG9uZW50Lm9wdGlvbnMubmFtZSB8fCAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogbnVsbCk7XG4gICAgICBzZWxmLkNvbXBvbmVudCA9IENvbXBvbmVudDtcbiAgICAgIGNiKCk7XG4gICAgfSk7XG4gICAgdGhpcy52bS5fcmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2UgdXNpbmcgdGhlIGN1cnJlbnQgY29uc3RydWN0b3IgYW5kXG4gICAqIHJlcGxhY2UgdGhlIGV4aXN0aW5nIGluc3RhbmNlLiBUaGlzIG1ldGhvZCBkb2Vzbid0IGNhcmVcbiAgICogd2hldGhlciB0aGUgbmV3IGNvbXBvbmVudCBhbmQgdGhlIG9sZCBvbmUgYXJlIGFjdHVhbGx5XG4gICAqIHRoZSBzYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIG1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiBtb3VudENvbXBvbmVudChjYikge1xuICAgIC8vIGFjdHVhbCBtb3VudFxuICAgIHRoaXMudW5idWlsZCh0cnVlKTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGFjdGl2YXRlSG9va3MgPSB0aGlzLkNvbXBvbmVudC5vcHRpb25zLmFjdGl2YXRlO1xuICAgIHZhciBjYWNoZWQgPSB0aGlzLmdldENhY2hlZCgpO1xuICAgIHZhciBuZXdDb21wb25lbnQgPSB0aGlzLmJ1aWxkKCk7XG4gICAgaWYgKGFjdGl2YXRlSG9va3MgJiYgIWNhY2hlZCkge1xuICAgICAgdGhpcy53YWl0aW5nRm9yID0gbmV3Q29tcG9uZW50O1xuICAgICAgY2FsbEFjdGl2YXRlSG9va3MoYWN0aXZhdGVIb29rcywgbmV3Q29tcG9uZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChzZWxmLndhaXRpbmdGb3IgIT09IG5ld0NvbXBvbmVudCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLndhaXRpbmdGb3IgPSBudWxsO1xuICAgICAgICBzZWxmLnRyYW5zaXRpb24obmV3Q29tcG9uZW50LCBjYik7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlIHJlZiBmb3Iga2VwdC1hbGl2ZSBjb21wb25lbnRcbiAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgbmV3Q29tcG9uZW50Ll91cGRhdGVSZWYoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudHJhbnNpdGlvbihuZXdDb21wb25lbnQsIGNiKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIGNvbXBvbmVudCBjaGFuZ2VzIG9yIHVuYmluZHMgYmVmb3JlIGFuIGFzeW5jXG4gICAqIGNvbnN0cnVjdG9yIGlzIHJlc29sdmVkLCB3ZSBuZWVkIHRvIGludmFsaWRhdGUgaXRzXG4gICAqIHBlbmRpbmcgY2FsbGJhY2suXG4gICAqL1xuXG4gIGludmFsaWRhdGVQZW5kaW5nOiBmdW5jdGlvbiBpbnZhbGlkYXRlUGVuZGluZygpIHtcbiAgICBpZiAodGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpIHtcbiAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiLmNhbmNlbCgpO1xuICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSBudWxsO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSW5zdGFudGlhdGUvaW5zZXJ0IGEgbmV3IGNoaWxkIHZtLlxuICAgKiBJZiBrZWVwIGFsaXZlIGFuZCBoYXMgY2FjaGVkIGluc3RhbmNlLCBpbnNlcnQgdGhhdFxuICAgKiBpbnN0YW5jZTsgb3RoZXJ3aXNlIGJ1aWxkIGEgbmV3IG9uZSBhbmQgY2FjaGUgaXQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbZXh0cmFPcHRpb25zXVxuICAgKiBAcmV0dXJuIHtWdWV9IC0gdGhlIGNyZWF0ZWQgaW5zdGFuY2VcbiAgICovXG5cbiAgYnVpbGQ6IGZ1bmN0aW9uIGJ1aWxkKGV4dHJhT3B0aW9ucykge1xuICAgIHZhciBjYWNoZWQgPSB0aGlzLmdldENhY2hlZCgpO1xuICAgIGlmIChjYWNoZWQpIHtcbiAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLkNvbXBvbmVudCkge1xuICAgICAgLy8gZGVmYXVsdCBvcHRpb25zXG4gICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgbmFtZTogdGhpcy5Db21wb25lbnROYW1lLFxuICAgICAgICBlbDogY2xvbmVOb2RlKHRoaXMuZWwpLFxuICAgICAgICB0ZW1wbGF0ZTogdGhpcy5pbmxpbmVUZW1wbGF0ZSxcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRvIGFkZCB0aGUgY2hpbGQgd2l0aCBjb3JyZWN0IHBhcmVudFxuICAgICAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBpdHMgcGFyZW50XG4gICAgICAgIC8vIHNob3VsZCBiZSB0aGUgdHJhbnNjbHVzaW9uIGhvc3QuXG4gICAgICAgIHBhcmVudDogdGhpcy5faG9zdCB8fCB0aGlzLnZtLFxuICAgICAgICAvLyBpZiBubyBpbmxpbmUtdGVtcGxhdGUsIHRoZW4gdGhlIGNvbXBpbGVkXG4gICAgICAgIC8vIGxpbmtlciBjYW4gYmUgY2FjaGVkIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuXG4gICAgICAgIF9saW5rZXJDYWNoYWJsZTogIXRoaXMuaW5saW5lVGVtcGxhdGUsXG4gICAgICAgIF9yZWY6IHRoaXMuZGVzY3JpcHRvci5yZWYsXG4gICAgICAgIF9hc0NvbXBvbmVudDogdHJ1ZSxcbiAgICAgICAgX2lzUm91dGVyVmlldzogdGhpcy5faXNSb3V0ZXJWaWV3LFxuICAgICAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBjb250ZXh0XG4gICAgICAgIC8vIHdpbGwgYmUgdGhlIGNvbW1vbiBwYXJlbnQgdm0gb2YgdGhpcyBpbnN0YW5jZVxuICAgICAgICAvLyBhbmQgaXRzIGhvc3QuXG4gICAgICAgIF9jb250ZXh0OiB0aGlzLnZtLFxuICAgICAgICAvLyBpZiB0aGlzIGlzIGluc2lkZSBhbiBpbmxpbmUgdi1mb3IsIHRoZSBzY29wZVxuICAgICAgICAvLyB3aWxsIGJlIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgY3JlYXRlZCBmb3IgdGhpc1xuICAgICAgICAvLyByZXBlYXQgZnJhZ21lbnQuIHRoaXMgaXMgdXNlZCBmb3IgbGlua2luZyBwcm9wc1xuICAgICAgICAvLyBhbmQgY29udGFpbmVyIGRpcmVjdGl2ZXMuXG4gICAgICAgIF9zY29wZTogdGhpcy5fc2NvcGUsXG4gICAgICAgIC8vIHBhc3MgaW4gdGhlIG93bmVyIGZyYWdtZW50IG9mIHRoaXMgY29tcG9uZW50LlxuICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBzbyB0aGF0IHRoZSBmcmFnbWVudCBjYW4ga2VlcFxuICAgICAgICAvLyB0cmFjayBvZiBpdHMgY29udGFpbmVkIGNvbXBvbmVudHMgaW4gb3JkZXIgdG9cbiAgICAgICAgLy8gY2FsbCBhdHRhY2gvZGV0YWNoIGhvb2tzIGZvciB0aGVtLlxuICAgICAgICBfZnJhZzogdGhpcy5fZnJhZ1xuICAgICAgfTtcbiAgICAgIC8vIGV4dHJhIG9wdGlvbnNcbiAgICAgIC8vIGluIDEuMC4wIHRoaXMgaXMgdXNlZCBieSB2dWUtcm91dGVyIG9ubHlcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKGV4dHJhT3B0aW9ucykge1xuICAgICAgICBleHRlbmQob3B0aW9ucywgZXh0cmFPcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIHZhciBjaGlsZCA9IG5ldyB0aGlzLkNvbXBvbmVudChvcHRpb25zKTtcbiAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgICB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF0gPSBjaGlsZDtcbiAgICAgIH1cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbC5oYXNBdHRyaWJ1dGUoJ3RyYW5zaXRpb24nKSAmJiBjaGlsZC5faXNGcmFnbWVudCkge1xuICAgICAgICB3YXJuKCdUcmFuc2l0aW9ucyB3aWxsIG5vdCB3b3JrIG9uIGEgZnJhZ21lbnQgaW5zdGFuY2UuICcgKyAnVGVtcGxhdGU6ICcgKyBjaGlsZC4kb3B0aW9ucy50ZW1wbGF0ZSwgY2hpbGQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVHJ5IHRvIGdldCBhIGNhY2hlZCBpbnN0YW5jZSBvZiB0aGUgY3VycmVudCBjb21wb25lbnQuXG4gICAqXG4gICAqIEByZXR1cm4ge1Z1ZXx1bmRlZmluZWR9XG4gICAqL1xuXG4gIGdldENhY2hlZDogZnVuY3Rpb24gZ2V0Q2FjaGVkKCkge1xuICAgIHJldHVybiB0aGlzLmtlZXBBbGl2ZSAmJiB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF07XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRlYXJkb3duIHRoZSBjdXJyZW50IGNoaWxkLCBidXQgZGVmZXJzIGNsZWFudXAgc29cbiAgICogdGhhdCB3ZSBjYW4gc2VwYXJhdGUgdGhlIGRlc3Ryb3kgYW5kIHJlbW92YWwgc3RlcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJcbiAgICovXG5cbiAgdW5idWlsZDogZnVuY3Rpb24gdW5idWlsZChkZWZlcikge1xuICAgIGlmICh0aGlzLndhaXRpbmdGb3IpIHtcbiAgICAgIGlmICghdGhpcy5rZWVwQWxpdmUpIHtcbiAgICAgICAgdGhpcy53YWl0aW5nRm9yLiRkZXN0cm95KCk7XG4gICAgICB9XG4gICAgICB0aGlzLndhaXRpbmdGb3IgPSBudWxsO1xuICAgIH1cbiAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkVk07XG4gICAgaWYgKCFjaGlsZCB8fCB0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgaWYgKGNoaWxkKSB7XG4gICAgICAgIC8vIHJlbW92ZSByZWZcbiAgICAgICAgY2hpbGQuX2luYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgY2hpbGQuX3VwZGF0ZVJlZih0cnVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gdGhlIHNvbGUgcHVycG9zZSBvZiBgZGVmZXJDbGVhbnVwYCBpcyBzbyB0aGF0IHdlIGNhblxuICAgIC8vIFwiZGVhY3RpdmF0ZVwiIHRoZSB2bSByaWdodCBub3cgYW5kIHBlcmZvcm0gRE9NIHJlbW92YWxcbiAgICAvLyBsYXRlci5cbiAgICBjaGlsZC4kZGVzdHJveShmYWxzZSwgZGVmZXIpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZW1vdmUgY3VycmVudCBkZXN0cm95ZWQgY2hpbGQgYW5kIG1hbnVhbGx5IGRvXG4gICAqIHRoZSBjbGVhbnVwIGFmdGVyIHJlbW92YWwuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqL1xuXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGNoaWxkLCBjYikge1xuICAgIHZhciBrZWVwQWxpdmUgPSB0aGlzLmtlZXBBbGl2ZTtcbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgIC8vIHdlIG1heSBoYXZlIGEgY29tcG9uZW50IHN3aXRjaCB3aGVuIGEgcHJldmlvdXNcbiAgICAgIC8vIGNvbXBvbmVudCBpcyBzdGlsbCBiZWluZyB0cmFuc2l0aW9uZWQgb3V0LlxuICAgICAgLy8gd2Ugd2FudCB0byB0cmlnZ2VyIG9ubHkgb25lIGxhc3Rlc3QgaW5zZXJ0aW9uIGNiXG4gICAgICAvLyB3aGVuIHRoZSBleGlzdGluZyB0cmFuc2l0aW9uIGZpbmlzaGVzLiAoIzExMTkpXG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmFscysrO1xuICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbENiID0gY2I7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBjaGlsZC4kcmVtb3ZlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbHMtLTtcbiAgICAgICAgaWYgKCFrZWVwQWxpdmUpIGNoaWxkLl9jbGVhbnVwKCk7XG4gICAgICAgIGlmICghc2VsZi5wZW5kaW5nUmVtb3ZhbHMgJiYgc2VsZi5wZW5kaW5nUmVtb3ZhbENiKSB7XG4gICAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbENiKCk7XG4gICAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbENiID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChjYikge1xuICAgICAgY2IoKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFjdHVhbGx5IHN3YXAgdGhlIGNvbXBvbmVudHMsIGRlcGVuZGluZyBvbiB0aGVcbiAgICogdHJhbnNpdGlvbiBtb2RlLiBEZWZhdWx0cyB0byBzaW11bHRhbmVvdXMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICB0cmFuc2l0aW9uOiBmdW5jdGlvbiB0cmFuc2l0aW9uKHRhcmdldCwgY2IpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGN1cnJlbnQgPSB0aGlzLmNoaWxkVk07XG4gICAgLy8gZm9yIGRldnRvb2wgaW5zcGVjdGlvblxuICAgIGlmIChjdXJyZW50KSBjdXJyZW50Ll9pbmFjdGl2ZSA9IHRydWU7XG4gICAgdGFyZ2V0Ll9pbmFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuY2hpbGRWTSA9IHRhcmdldDtcbiAgICBzd2l0Y2ggKHNlbGYucGFyYW1zLnRyYW5zaXRpb25Nb2RlKSB7XG4gICAgICBjYXNlICdpbi1vdXQnOlxuICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQsIGNiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnb3V0LWluJzpcbiAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBjYik7XG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQpO1xuICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgY2IpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVW5iaW5kLlxuICAgKi9cblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB0aGlzLmludmFsaWRhdGVQZW5kaW5nKCk7XG4gICAgLy8gRG8gbm90IGRlZmVyIGNsZWFudXAgd2hlbiB1bmJpbmRpbmdcbiAgICB0aGlzLnVuYnVpbGQoKTtcbiAgICAvLyBkZXN0cm95IGFsbCBrZWVwLWFsaXZlIGNhY2hlZCBpbnN0YW5jZXNcbiAgICBpZiAodGhpcy5jYWNoZSkge1xuICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuY2FjaGUpIHtcbiAgICAgICAgdGhpcy5jYWNoZVtrZXldLiRkZXN0cm95KCk7XG4gICAgICB9XG4gICAgICB0aGlzLmNhY2hlID0gbnVsbDtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQ2FsbCBhY3RpdmF0ZSBob29rcyBpbiBvcmRlciAoYXN5bmNocm9ub3VzKVxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGhvb2tzXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKi9cblxuZnVuY3Rpb24gY2FsbEFjdGl2YXRlSG9va3MoaG9va3MsIHZtLCBjYikge1xuICB2YXIgdG90YWwgPSBob29rcy5sZW5ndGg7XG4gIHZhciBjYWxsZWQgPSAwO1xuICBob29rc1swXS5jYWxsKHZtLCBuZXh0KTtcbiAgZnVuY3Rpb24gbmV4dCgpIHtcbiAgICBpZiAoKytjYWxsZWQgPj0gdG90YWwpIHtcbiAgICAgIGNiKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhvb2tzW2NhbGxlZF0uY2FsbCh2bSwgbmV4dCk7XG4gICAgfVxuICB9XG59XG5cbnZhciBwcm9wQmluZGluZ01vZGVzID0gY29uZmlnLl9wcm9wQmluZGluZ01vZGVzO1xudmFyIGVtcHR5ID0ge307XG5cbi8vIHJlZ2V4ZXNcbnZhciBpZGVudFJFJDEgPSAvXlskX2EtekEtWl0rW1xcdyRdKiQvO1xudmFyIHNldHRhYmxlUGF0aFJFID0gL15bQS1aYS16XyRdW1xcdyRdKihcXC5bQS1aYS16XyRdW1xcdyRdKnxcXFtbXlxcW1xcXV0rXFxdKSokLztcblxuLyoqXG4gKiBDb21waWxlIHByb3BzIG9uIGEgcm9vdCBlbGVtZW50IGFuZCByZXR1cm5cbiAqIGEgcHJvcHMgbGluayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BPcHRpb25zXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBwcm9wc0xpbmtGblxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVQcm9wcyhlbCwgcHJvcE9wdGlvbnMsIHZtKSB7XG4gIHZhciBwcm9wcyA9IFtdO1xuICB2YXIgbmFtZXMgPSBPYmplY3Qua2V5cyhwcm9wT3B0aW9ucyk7XG4gIHZhciBpID0gbmFtZXMubGVuZ3RoO1xuICB2YXIgb3B0aW9ucywgbmFtZSwgYXR0ciwgdmFsdWUsIHBhdGgsIHBhcnNlZCwgcHJvcDtcbiAgd2hpbGUgKGktLSkge1xuICAgIG5hbWUgPSBuYW1lc1tpXTtcbiAgICBvcHRpb25zID0gcHJvcE9wdGlvbnNbbmFtZV0gfHwgZW1wdHk7XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBuYW1lID09PSAnJGRhdGEnKSB7XG4gICAgICB3YXJuKCdEbyBub3QgdXNlICRkYXRhIGFzIHByb3AuJywgdm0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gcHJvcHMgY291bGQgY29udGFpbiBkYXNoZXMsIHdoaWNoIHdpbGwgYmVcbiAgICAvLyBpbnRlcnByZXRlZCBhcyBtaW51cyBjYWxjdWxhdGlvbnMgYnkgdGhlIHBhcnNlclxuICAgIC8vIHNvIHdlIG5lZWQgdG8gY2FtZWxpemUgdGhlIHBhdGggaGVyZVxuICAgIHBhdGggPSBjYW1lbGl6ZShuYW1lKTtcbiAgICBpZiAoIWlkZW50UkUkMS50ZXN0KHBhdGgpKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgcHJvcCBrZXk6IFwiJyArIG5hbWUgKyAnXCIuIFByb3Aga2V5cyAnICsgJ211c3QgYmUgdmFsaWQgaWRlbnRpZmllcnMuJywgdm0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgcHJvcCA9IHtcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBwYXRoOiBwYXRoLFxuICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgIG1vZGU6IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWSxcbiAgICAgIHJhdzogbnVsbFxuICAgIH07XG5cbiAgICBhdHRyID0gaHlwaGVuYXRlKG5hbWUpO1xuICAgIC8vIGZpcnN0IGNoZWNrIGR5bmFtaWMgdmVyc2lvblxuICAgIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0cikpID09PSBudWxsKSB7XG4gICAgICBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIgKyAnLnN5bmMnKSkgIT09IG51bGwpIHtcbiAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZO1xuICAgICAgfSBlbHNlIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0ciArICcub25jZScpKSAhPT0gbnVsbCkge1xuICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLk9ORV9USU1FO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcbiAgICAgIC8vIGhhcyBkeW5hbWljIGJpbmRpbmchXG4gICAgICBwcm9wLnJhdyA9IHZhbHVlO1xuICAgICAgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuICAgICAgdmFsdWUgPSBwYXJzZWQuZXhwcmVzc2lvbjtcbiAgICAgIHByb3AuZmlsdGVycyA9IHBhcnNlZC5maWx0ZXJzO1xuICAgICAgLy8gY2hlY2sgYmluZGluZyB0eXBlXG4gICAgICBpZiAoaXNMaXRlcmFsKHZhbHVlKSAmJiAhcGFyc2VkLmZpbHRlcnMpIHtcbiAgICAgICAgLy8gZm9yIGV4cHJlc3Npb25zIGNvbnRhaW5pbmcgbGl0ZXJhbCBudW1iZXJzIGFuZFxuICAgICAgICAvLyBib29sZWFucywgdGhlcmUncyBubyBuZWVkIHRvIHNldHVwIGEgcHJvcCBiaW5kaW5nLFxuICAgICAgICAvLyBzbyB3ZSBjYW4gb3B0aW1pemUgdGhlbSBhcyBhIG9uZS10aW1lIHNldC5cbiAgICAgICAgcHJvcC5vcHRpbWl6ZWRMaXRlcmFsID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb3AuZHluYW1pYyA9IHRydWU7XG4gICAgICAgIC8vIGNoZWNrIG5vbi1zZXR0YWJsZSBwYXRoIGZvciB0d28td2F5IGJpbmRpbmdzXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHByb3AubW9kZSA9PT0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZICYmICFzZXR0YWJsZVBhdGhSRS50ZXN0KHZhbHVlKSkge1xuICAgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWTtcbiAgICAgICAgICB3YXJuKCdDYW5ub3QgYmluZCB0d28td2F5IHByb3Agd2l0aCBub24tc2V0dGFibGUgJyArICdwYXJlbnQgcGF0aDogJyArIHZhbHVlLCB2bSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHByb3AucGFyZW50UGF0aCA9IHZhbHVlO1xuXG4gICAgICAvLyB3YXJuIHJlcXVpcmVkIHR3by13YXlcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG9wdGlvbnMudHdvV2F5ICYmIHByb3AubW9kZSAhPT0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZKSB7XG4gICAgICAgIHdhcm4oJ1Byb3AgXCInICsgbmFtZSArICdcIiBleHBlY3RzIGEgdHdvLXdheSBiaW5kaW5nIHR5cGUuJywgdm0pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoKHZhbHVlID0gZ2V0QXR0cihlbCwgYXR0cikpICE9PSBudWxsKSB7XG4gICAgICAvLyBoYXMgbGl0ZXJhbCBiaW5kaW5nIVxuICAgICAgcHJvcC5yYXcgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIGNoZWNrIHBvc3NpYmxlIGNhbWVsQ2FzZSBwcm9wIHVzYWdlXG4gICAgICB2YXIgbG93ZXJDYXNlTmFtZSA9IHBhdGgudG9Mb3dlckNhc2UoKTtcbiAgICAgIHZhbHVlID0gL1tBLVpcXC1dLy50ZXN0KG5hbWUpICYmIChlbC5nZXRBdHRyaWJ1dGUobG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSArICcub25jZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lICsgJy5vbmNlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLnN5bmMnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSArICcuc3luYycpKTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICB3YXJuKCdQb3NzaWJsZSB1c2FnZSBlcnJvciBmb3IgcHJvcCBgJyArIGxvd2VyQ2FzZU5hbWUgKyAnYCAtICcgKyAnZGlkIHlvdSBtZWFuIGAnICsgYXR0ciArICdgPyBIVE1MIGlzIGNhc2UtaW5zZW5zaXRpdmUsIHJlbWVtYmVyIHRvIHVzZSAnICsgJ2tlYmFiLWNhc2UgZm9yIHByb3BzIGluIHRlbXBsYXRlcy4nLCB2bSk7XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucmVxdWlyZWQpIHtcbiAgICAgICAgLy8gd2FybiBtaXNzaW5nIHJlcXVpcmVkXG4gICAgICAgIHdhcm4oJ01pc3NpbmcgcmVxdWlyZWQgcHJvcDogJyArIG5hbWUsIHZtKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gcHVzaCBwcm9wXG4gICAgcHJvcHMucHVzaChwcm9wKTtcbiAgfVxuICByZXR1cm4gbWFrZVByb3BzTGlua0ZuKHByb3BzKTtcbn1cblxuLyoqXG4gKiBCdWlsZCBhIGZ1bmN0aW9uIHRoYXQgYXBwbGllcyBwcm9wcyB0byBhIHZtLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BzXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gcHJvcHNMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlUHJvcHNMaW5rRm4ocHJvcHMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHByb3BzTGlua0ZuKHZtLCBzY29wZSkge1xuICAgIC8vIHN0b3JlIHJlc29sdmVkIHByb3BzIGluZm9cbiAgICB2bS5fcHJvcHMgPSB7fTtcbiAgICB2YXIgaW5saW5lUHJvcHMgPSB2bS4kb3B0aW9ucy5wcm9wc0RhdGE7XG4gICAgdmFyIGkgPSBwcm9wcy5sZW5ndGg7XG4gICAgdmFyIHByb3AsIHBhdGgsIG9wdGlvbnMsIHZhbHVlLCByYXc7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgcHJvcCA9IHByb3BzW2ldO1xuICAgICAgcmF3ID0gcHJvcC5yYXc7XG4gICAgICBwYXRoID0gcHJvcC5wYXRoO1xuICAgICAgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcbiAgICAgIHZtLl9wcm9wc1twYXRoXSA9IHByb3A7XG4gICAgICBpZiAoaW5saW5lUHJvcHMgJiYgaGFzT3duKGlubGluZVByb3BzLCBwYXRoKSkge1xuICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgaW5saW5lUHJvcHNbcGF0aF0pO1xuICAgICAgfWlmIChyYXcgPT09IG51bGwpIHtcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBhYnNlbnQgcHJvcFxuICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdW5kZWZpbmVkKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcC5keW5hbWljKSB7XG4gICAgICAgIC8vIGR5bmFtaWMgcHJvcFxuICAgICAgICBpZiAocHJvcC5tb2RlID09PSBwcm9wQmluZGluZ01vZGVzLk9ORV9USU1FKSB7XG4gICAgICAgICAgLy8gb25lIHRpbWUgYmluZGluZ1xuICAgICAgICAgIHZhbHVlID0gKHNjb3BlIHx8IHZtLl9jb250ZXh0IHx8IHZtKS4kZ2V0KHByb3AucGFyZW50UGF0aCk7XG4gICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodm0uX2NvbnRleHQpIHtcbiAgICAgICAgICAgIC8vIGR5bmFtaWMgYmluZGluZ1xuICAgICAgICAgICAgdm0uX2JpbmREaXIoe1xuICAgICAgICAgICAgICBuYW1lOiAncHJvcCcsXG4gICAgICAgICAgICAgIGRlZjogcHJvcERlZixcbiAgICAgICAgICAgICAgcHJvcDogcHJvcFxuICAgICAgICAgICAgfSwgbnVsbCwgbnVsbCwgc2NvcGUpOyAvLyBlbCwgaG9zdCwgc2NvcGVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyByb290IGluc3RhbmNlXG4gICAgICAgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2bS4kZ2V0KHByb3AucGFyZW50UGF0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHByb3Aub3B0aW1pemVkTGl0ZXJhbCkge1xuICAgICAgICAvLyBvcHRpbWl6ZWQgbGl0ZXJhbCwgY2FzdCBpdCBhbmQganVzdCBzZXQgb25jZVxuICAgICAgICB2YXIgc3RyaXBwZWQgPSBzdHJpcFF1b3RlcyhyYXcpO1xuICAgICAgICB2YWx1ZSA9IHN0cmlwcGVkID09PSByYXcgPyB0b0Jvb2xlYW4odG9OdW1iZXIocmF3KSkgOiBzdHJpcHBlZDtcbiAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHN0cmluZyBsaXRlcmFsLCBidXQgd2UgbmVlZCB0byBjYXRlciBmb3JcbiAgICAgICAgLy8gQm9vbGVhbiBwcm9wcyB3aXRoIG5vIHZhbHVlLCBvciB3aXRoIHNhbWVcbiAgICAgICAgLy8gbGl0ZXJhbCB2YWx1ZSAoZS5nLiBkaXNhYmxlZD1cImRpc2FibGVkXCIpXG4gICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWxvYWRlci9pc3N1ZXMvMTgyXG4gICAgICAgIHZhbHVlID0gb3B0aW9ucy50eXBlID09PSBCb29sZWFuICYmIChyYXcgPT09ICcnIHx8IHJhdyA9PT0gaHlwaGVuYXRlKHByb3AubmFtZSkpID8gdHJ1ZSA6IHJhdztcbiAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogUHJvY2VzcyBhIHByb3Agd2l0aCBhIHJhd1ZhbHVlLCBhcHBseWluZyBuZWNlc3NhcnkgY29lcnNpb25zLFxuICogZGVmYXVsdCB2YWx1ZXMgJiBhc3NlcnRpb25zIGFuZCBjYWxsIHRoZSBnaXZlbiBjYWxsYmFjayB3aXRoXG4gKiBwcm9jZXNzZWQgdmFsdWUuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSByYXdWYWx1ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuXG5mdW5jdGlvbiBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCByYXdWYWx1ZSwgZm4pIHtcbiAgdmFyIGlzU2ltcGxlID0gcHJvcC5keW5hbWljICYmIGlzU2ltcGxlUGF0aChwcm9wLnBhcmVudFBhdGgpO1xuICB2YXIgdmFsdWUgPSByYXdWYWx1ZTtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICB2YWx1ZSA9IGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3ApO1xuICB9XG4gIHZhbHVlID0gY29lcmNlUHJvcChwcm9wLCB2YWx1ZSwgdm0pO1xuICB2YXIgY29lcmNlZCA9IHZhbHVlICE9PSByYXdWYWx1ZTtcbiAgaWYgKCFhc3NlcnRQcm9wKHByb3AsIHZhbHVlLCB2bSkpIHtcbiAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoaXNTaW1wbGUgJiYgIWNvZXJjZWQpIHtcbiAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG4gICAgICBmbih2YWx1ZSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgZm4odmFsdWUpO1xuICB9XG59XG5cbi8qKlxuICogU2V0IGEgcHJvcCdzIGluaXRpYWwgdmFsdWUgb24gYSB2bSBhbmQgaXRzIGRhdGEgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqL1xuXG5mdW5jdGlvbiBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpIHtcbiAgcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgdmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGRlZmluZVJlYWN0aXZlKHZtLCBwcm9wLnBhdGgsIHZhbHVlKTtcbiAgfSk7XG59XG5cbi8qKlxuICogVXBkYXRlIGEgcHJvcCdzIHZhbHVlIG9uIGEgdm0uXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICovXG5cbmZ1bmN0aW9uIHVwZGF0ZVByb3Aodm0sIHByb3AsIHZhbHVlKSB7XG4gIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHZhbHVlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2bVtwcm9wLnBhdGhdID0gdmFsdWU7XG4gIH0pO1xufVxuXG4vKipcbiAqIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHByb3AuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHJldHVybiB7Kn1cbiAqL1xuXG5mdW5jdGlvbiBnZXRQcm9wRGVmYXVsdFZhbHVlKHZtLCBwcm9wKSB7XG4gIC8vIG5vIGRlZmF1bHQsIHJldHVybiB1bmRlZmluZWRcbiAgdmFyIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG4gIGlmICghaGFzT3duKG9wdGlvbnMsICdkZWZhdWx0JykpIHtcbiAgICAvLyBhYnNlbnQgYm9vbGVhbiB2YWx1ZSBkZWZhdWx0cyB0byBmYWxzZVxuICAgIHJldHVybiBvcHRpb25zLnR5cGUgPT09IEJvb2xlYW4gPyBmYWxzZSA6IHVuZGVmaW5lZDtcbiAgfVxuICB2YXIgZGVmID0gb3B0aW9uc1snZGVmYXVsdCddO1xuICAvLyB3YXJuIGFnYWluc3Qgbm9uLWZhY3RvcnkgZGVmYXVsdHMgZm9yIE9iamVjdCAmIEFycmF5XG4gIGlmIChpc09iamVjdChkZWYpKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIGRlZmF1bHQgdmFsdWUgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiOiAnICsgJ1Byb3BzIHdpdGggdHlwZSBPYmplY3QvQXJyYXkgbXVzdCB1c2UgYSBmYWN0b3J5IGZ1bmN0aW9uICcgKyAndG8gcmV0dXJuIHRoZSBkZWZhdWx0IHZhbHVlLicsIHZtKTtcbiAgfVxuICAvLyBjYWxsIGZhY3RvcnkgZnVuY3Rpb24gZm9yIG5vbi1GdW5jdGlvbiB0eXBlc1xuICByZXR1cm4gdHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJyAmJiBvcHRpb25zLnR5cGUgIT09IEZ1bmN0aW9uID8gZGVmLmNhbGwodm0pIDogZGVmO1xufVxuXG4vKipcbiAqIEFzc2VydCB3aGV0aGVyIGEgcHJvcCBpcyB2YWxpZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuZnVuY3Rpb24gYXNzZXJ0UHJvcChwcm9wLCB2YWx1ZSwgdm0pIHtcbiAgaWYgKCFwcm9wLm9wdGlvbnMucmVxdWlyZWQgJiYgKCAvLyBub24tcmVxdWlyZWRcbiAgcHJvcC5yYXcgPT09IG51bGwgfHwgLy8gYWJzY2VudFxuICB2YWx1ZSA9PSBudWxsKSAvLyBudWxsIG9yIHVuZGVmaW5lZFxuICApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgdmFyIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG4gIHZhciB0eXBlID0gb3B0aW9ucy50eXBlO1xuICB2YXIgdmFsaWQgPSAhdHlwZTtcbiAgdmFyIGV4cGVjdGVkVHlwZXMgPSBbXTtcbiAgaWYgKHR5cGUpIHtcbiAgICBpZiAoIWlzQXJyYXkodHlwZSkpIHtcbiAgICAgIHR5cGUgPSBbdHlwZV07XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHlwZS5sZW5ndGggJiYgIXZhbGlkOyBpKyspIHtcbiAgICAgIHZhciBhc3NlcnRlZFR5cGUgPSBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlW2ldKTtcbiAgICAgIGV4cGVjdGVkVHlwZXMucHVzaChhc3NlcnRlZFR5cGUuZXhwZWN0ZWRUeXBlKTtcbiAgICAgIHZhbGlkID0gYXNzZXJ0ZWRUeXBlLnZhbGlkO1xuICAgIH1cbiAgfVxuICBpZiAoIXZhbGlkKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHdhcm4oJ0ludmFsaWQgcHJvcDogdHlwZSBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiLicgKyAnIEV4cGVjdGVkICcgKyBleHBlY3RlZFR5cGVzLm1hcChmb3JtYXRUeXBlKS5qb2luKCcsICcpICsgJywgZ290ICcgKyBmb3JtYXRWYWx1ZSh2YWx1ZSkgKyAnLicsIHZtKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciB2YWxpZGF0b3IgPSBvcHRpb25zLnZhbGlkYXRvcjtcbiAgaWYgKHZhbGlkYXRvcikge1xuICAgIGlmICghdmFsaWRhdG9yKHZhbHVlKSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHByb3A6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIi4nLCB2bSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEZvcmNlIHBhcnNpbmcgdmFsdWUgd2l0aCBjb2VyY2Ugb3B0aW9uLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHsqfVxuICovXG5cbmZ1bmN0aW9uIGNvZXJjZVByb3AocHJvcCwgdmFsdWUsIHZtKSB7XG4gIHZhciBjb2VyY2UgPSBwcm9wLm9wdGlvbnMuY29lcmNlO1xuICBpZiAoIWNvZXJjZSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAodHlwZW9mIGNvZXJjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBjb2VyY2UodmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBjb2VyY2UgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiOiBleHBlY3RlZCBmdW5jdGlvbiwgZ290ICcgKyB0eXBlb2YgY29lcmNlICsgJy4nLCB2bSk7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5cbi8qKlxuICogQXNzZXJ0IHRoZSB0eXBlIG9mIGEgdmFsdWVcbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB0eXBlXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZSkge1xuICB2YXIgdmFsaWQ7XG4gIHZhciBleHBlY3RlZFR5cGU7XG4gIGlmICh0eXBlID09PSBTdHJpbmcpIHtcbiAgICBleHBlY3RlZFR5cGUgPSAnc3RyaW5nJztcbiAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IE51bWJlcikge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdudW1iZXInO1xuICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gQm9vbGVhbikge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdib29sZWFuJztcbiAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IEZ1bmN0aW9uKSB7XG4gICAgZXhwZWN0ZWRUeXBlID0gJ2Z1bmN0aW9uJztcbiAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IE9iamVjdCkge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdvYmplY3QnO1xuICAgIHZhbGlkID0gaXNQbGFpbk9iamVjdCh2YWx1ZSk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gQXJyYXkpIHtcbiAgICBleHBlY3RlZFR5cGUgPSAnYXJyYXknO1xuICAgIHZhbGlkID0gaXNBcnJheSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB2YWxpZDogdmFsaWQsXG4gICAgZXhwZWN0ZWRUeXBlOiBleHBlY3RlZFR5cGVcbiAgfTtcbn1cblxuLyoqXG4gKiBGb3JtYXQgdHlwZSBmb3Igb3V0cHV0XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRUeXBlKHR5cGUpIHtcbiAgcmV0dXJuIHR5cGUgPyB0eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdHlwZS5zbGljZSgxKSA6ICdjdXN0b20gdHlwZSc7XG59XG5cbi8qKlxuICogRm9ybWF0IHZhbHVlXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGZvcm1hdFZhbHVlKHZhbCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkuc2xpY2UoOCwgLTEpO1xufVxuXG52YXIgYmluZGluZ01vZGVzID0gY29uZmlnLl9wcm9wQmluZGluZ01vZGVzO1xuXG52YXIgcHJvcERlZiA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBjaGlsZCA9IHRoaXMudm07XG4gICAgdmFyIHBhcmVudCA9IGNoaWxkLl9jb250ZXh0O1xuICAgIC8vIHBhc3NlZCBpbiBmcm9tIGNvbXBpbGVyIGRpcmVjdGx5XG4gICAgdmFyIHByb3AgPSB0aGlzLmRlc2NyaXB0b3IucHJvcDtcbiAgICB2YXIgY2hpbGRLZXkgPSBwcm9wLnBhdGg7XG4gICAgdmFyIHBhcmVudEtleSA9IHByb3AucGFyZW50UGF0aDtcbiAgICB2YXIgdHdvV2F5ID0gcHJvcC5tb2RlID09PSBiaW5kaW5nTW9kZXMuVFdPX1dBWTtcblxuICAgIHZhciBwYXJlbnRXYXRjaGVyID0gdGhpcy5wYXJlbnRXYXRjaGVyID0gbmV3IFdhdGNoZXIocGFyZW50LCBwYXJlbnRLZXksIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgIHVwZGF0ZVByb3AoY2hpbGQsIHByb3AsIHZhbCk7XG4gICAgfSwge1xuICAgICAgdHdvV2F5OiB0d29XYXksXG4gICAgICBmaWx0ZXJzOiBwcm9wLmZpbHRlcnMsXG4gICAgICAvLyBpbXBvcnRhbnQ6IHByb3BzIG5lZWQgdG8gYmUgb2JzZXJ2ZWQgb24gdGhlXG4gICAgICAvLyB2LWZvciBzY29wZSBpZiBwcmVzZW50XG4gICAgICBzY29wZTogdGhpcy5fc2NvcGVcbiAgICB9KTtcblxuICAgIC8vIHNldCB0aGUgY2hpbGQgaW5pdGlhbCB2YWx1ZS5cbiAgICBpbml0UHJvcChjaGlsZCwgcHJvcCwgcGFyZW50V2F0Y2hlci52YWx1ZSk7XG5cbiAgICAvLyBzZXR1cCB0d28td2F5IGJpbmRpbmdcbiAgICBpZiAodHdvV2F5KSB7XG4gICAgICAvLyBpbXBvcnRhbnQ6IGRlZmVyIHRoZSBjaGlsZCB3YXRjaGVyIGNyZWF0aW9uIHVudGlsXG4gICAgICAvLyB0aGUgY3JlYXRlZCBob29rIChhZnRlciBkYXRhIG9ic2VydmF0aW9uKVxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgY2hpbGQuJG9uY2UoJ3ByZS1ob29rOmNyZWF0ZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuY2hpbGRXYXRjaGVyID0gbmV3IFdhdGNoZXIoY2hpbGQsIGNoaWxkS2V5LCBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgcGFyZW50V2F0Y2hlci5zZXQodmFsKTtcbiAgICAgICAgfSwge1xuICAgICAgICAgIC8vIGVuc3VyZSBzeW5jIHVwd2FyZCBiZWZvcmUgcGFyZW50IHN5bmMgZG93bi5cbiAgICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBpbiBjYXNlcyBlLmcuIHRoZSBjaGlsZFxuICAgICAgICAgIC8vIG11dGF0ZXMgYSBwcm9wIGFycmF5LCB0aGVuIHJlcGxhY2VzIGl0LiAoIzE2ODMpXG4gICAgICAgICAgc3luYzogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB0aGlzLnBhcmVudFdhdGNoZXIudGVhcmRvd24oKTtcbiAgICBpZiAodGhpcy5jaGlsZFdhdGNoZXIpIHtcbiAgICAgIHRoaXMuY2hpbGRXYXRjaGVyLnRlYXJkb3duKCk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgcXVldWUkMSA9IFtdO1xudmFyIHF1ZXVlZCA9IGZhbHNlO1xuXG4vKipcbiAqIFB1c2ggYSBqb2IgaW50byB0aGUgcXVldWUuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gam9iXG4gKi9cblxuZnVuY3Rpb24gcHVzaEpvYihqb2IpIHtcbiAgcXVldWUkMS5wdXNoKGpvYik7XG4gIGlmICghcXVldWVkKSB7XG4gICAgcXVldWVkID0gdHJ1ZTtcbiAgICBuZXh0VGljayhmbHVzaCk7XG4gIH1cbn1cblxuLyoqXG4gKiBGbHVzaCB0aGUgcXVldWUsIGFuZCBkbyBvbmUgZm9yY2VkIHJlZmxvdyBiZWZvcmVcbiAqIHRyaWdnZXJpbmcgdHJhbnNpdGlvbnMuXG4gKi9cblxuZnVuY3Rpb24gZmx1c2goKSB7XG4gIC8vIEZvcmNlIGxheW91dFxuICB2YXIgZiA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUkMS5sZW5ndGg7IGkrKykge1xuICAgIHF1ZXVlJDFbaV0oKTtcbiAgfVxuICBxdWV1ZSQxID0gW107XG4gIHF1ZXVlZCA9IGZhbHNlO1xuICAvLyBkdW1teSByZXR1cm4sIHNvIGpzIGxpbnRlcnMgZG9uJ3QgY29tcGxhaW4gYWJvdXRcbiAgLy8gdW51c2VkIHZhcmlhYmxlIGZcbiAgcmV0dXJuIGY7XG59XG5cbnZhciBUWVBFX1RSQU5TSVRJT04gPSAndHJhbnNpdGlvbic7XG52YXIgVFlQRV9BTklNQVRJT04gPSAnYW5pbWF0aW9uJztcbnZhciB0cmFuc0R1cmF0aW9uUHJvcCA9IHRyYW5zaXRpb25Qcm9wICsgJ0R1cmF0aW9uJztcbnZhciBhbmltRHVyYXRpb25Qcm9wID0gYW5pbWF0aW9uUHJvcCArICdEdXJhdGlvbic7XG5cbi8qKlxuICogSWYgYSBqdXN0LWVudGVyZWQgZWxlbWVudCBpcyBhcHBsaWVkIHRoZVxuICogbGVhdmUgY2xhc3Mgd2hpbGUgaXRzIGVudGVyIHRyYW5zaXRpb24gaGFzbid0IHN0YXJ0ZWQgeWV0LFxuICogYW5kIHRoZSB0cmFuc2l0aW9uZWQgcHJvcGVydHkgaGFzIHRoZSBzYW1lIHZhbHVlIGZvciBib3RoXG4gKiBlbnRlci9sZWF2ZSwgdGhlbiB0aGUgbGVhdmUgdHJhbnNpdGlvbiB3aWxsIGJlIHNraXBwZWQgYW5kXG4gKiB0aGUgdHJhbnNpdGlvbmVuZCBldmVudCBuZXZlciBmaXJlcy4gVGhpcyBmdW5jdGlvbiBlbnN1cmVzXG4gKiBpdHMgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIGFmdGVyIGEgdHJhbnNpdGlvbiBoYXMgc3RhcnRlZFxuICogYnkgd2FpdGluZyBmb3IgZG91YmxlIHJhZi5cbiAqXG4gKiBJdCBmYWxscyBiYWNrIHRvIHNldFRpbWVvdXQgb24gZGV2aWNlcyB0aGF0IHN1cHBvcnQgQ1NTXG4gKiB0cmFuc2l0aW9ucyBidXQgbm90IHJhZiAoZS5nLiBBbmRyb2lkIDQuMiBicm93c2VyKSAtIHNpbmNlXG4gKiB0aGVzZSBlbnZpcm9ubWVudHMgYXJlIHVzdWFsbHkgc2xvdywgd2UgYXJlIGdpdmluZyBpdCBhXG4gKiByZWxhdGl2ZWx5IGxhcmdlIHRpbWVvdXQuXG4gKi9cblxudmFyIHJhZiA9IGluQnJvd3NlciAmJiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xudmFyIHdhaXRGb3JUcmFuc2l0aW9uU3RhcnQgPSByYWZcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4/IGZ1bmN0aW9uIChmbikge1xuICByYWYoZnVuY3Rpb24gKCkge1xuICAgIHJhZihmbik7XG4gIH0pO1xufSA6IGZ1bmN0aW9uIChmbikge1xuICBzZXRUaW1lb3V0KGZuLCA1MCk7XG59O1xuXG4vKipcbiAqIEEgVHJhbnNpdGlvbiBvYmplY3QgdGhhdCBlbmNhcHN1bGF0ZXMgdGhlIHN0YXRlIGFuZCBsb2dpY1xuICogb2YgdGhlIHRyYW5zaXRpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gKiBAcGFyYW0ge09iamVjdH0gaG9va3NcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICovXG5mdW5jdGlvbiBUcmFuc2l0aW9uKGVsLCBpZCwgaG9va3MsIHZtKSB7XG4gIHRoaXMuaWQgPSBpZDtcbiAgdGhpcy5lbCA9IGVsO1xuICB0aGlzLmVudGVyQ2xhc3MgPSBob29rcyAmJiBob29rcy5lbnRlckNsYXNzIHx8IGlkICsgJy1lbnRlcic7XG4gIHRoaXMubGVhdmVDbGFzcyA9IGhvb2tzICYmIGhvb2tzLmxlYXZlQ2xhc3MgfHwgaWQgKyAnLWxlYXZlJztcbiAgdGhpcy5ob29rcyA9IGhvb2tzO1xuICB0aGlzLnZtID0gdm07XG4gIC8vIGFzeW5jIHN0YXRlXG4gIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSB0aGlzLm9wID0gdGhpcy5jYiA9IG51bGw7XG4gIHRoaXMuanVzdEVudGVyZWQgPSBmYWxzZTtcbiAgdGhpcy5lbnRlcmVkID0gdGhpcy5sZWZ0ID0gZmFsc2U7XG4gIHRoaXMudHlwZUNhY2hlID0ge307XG4gIC8vIGNoZWNrIGNzcyB0cmFuc2l0aW9uIHR5cGVcbiAgdGhpcy50eXBlID0gaG9va3MgJiYgaG9va3MudHlwZTtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKHRoaXMudHlwZSAmJiB0aGlzLnR5cGUgIT09IFRZUEVfVFJBTlNJVElPTiAmJiB0aGlzLnR5cGUgIT09IFRZUEVfQU5JTUFUSU9OKSB7XG4gICAgICB3YXJuKCdpbnZhbGlkIENTUyB0cmFuc2l0aW9uIHR5cGUgZm9yIHRyYW5zaXRpb249XCInICsgdGhpcy5pZCArICdcIjogJyArIHRoaXMudHlwZSwgdm0pO1xuICAgIH1cbiAgfVxuICAvLyBiaW5kXG4gIHZhciBzZWxmID0gdGhpcztbJ2VudGVyTmV4dFRpY2snLCAnZW50ZXJEb25lJywgJ2xlYXZlTmV4dFRpY2snLCAnbGVhdmVEb25lJ10uZm9yRWFjaChmdW5jdGlvbiAobSkge1xuICAgIHNlbGZbbV0gPSBiaW5kKHNlbGZbbV0sIHNlbGYpO1xuICB9KTtcbn1cblxudmFyIHAkMSA9IFRyYW5zaXRpb24ucHJvdG90eXBlO1xuXG4vKipcbiAqIFN0YXJ0IGFuIGVudGVyaW5nIHRyYW5zaXRpb24uXG4gKlxuICogMS4gZW50ZXIgdHJhbnNpdGlvbiB0cmlnZ2VyZWRcbiAqIDIuIGNhbGwgYmVmb3JlRW50ZXIgaG9va1xuICogMy4gYWRkIGVudGVyIGNsYXNzXG4gKiA0LiBpbnNlcnQvc2hvdyBlbGVtZW50XG4gKiA1LiBjYWxsIGVudGVyIGhvb2sgKHdpdGggcG9zc2libGUgZXhwbGljaXQganMgY2FsbGJhY2spXG4gKiA2LiByZWZsb3dcbiAqIDcuIGJhc2VkIG9uIHRyYW5zaXRpb24gdHlwZTpcbiAqICAgIC0gdHJhbnNpdGlvbjpcbiAqICAgICAgICByZW1vdmUgY2xhc3Mgbm93LCB3YWl0IGZvciB0cmFuc2l0aW9uZW5kLFxuICogICAgICAgIHRoZW4gZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogICAgLSBhbmltYXRpb246XG4gKiAgICAgICAgd2FpdCBmb3IgYW5pbWF0aW9uZW5kLCByZW1vdmUgY2xhc3MsXG4gKiAgICAgICAgdGhlbiBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiAgICAtIG5vIGNzcyB0cmFuc2l0aW9uOlxuICogICAgICAgIGRvbmUgbm93IGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiA4LiB3YWl0IGZvciBlaXRoZXIgZG9uZSBvciBqcyBjYWxsYmFjaywgdGhlbiBjYWxsXG4gKiAgICBhZnRlckVudGVyIGhvb2suXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSBpbnNlcnQvc2hvdyB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbnAkMS5lbnRlciA9IGZ1bmN0aW9uIChvcCwgY2IpIHtcbiAgdGhpcy5jYW5jZWxQZW5kaW5nKCk7XG4gIHRoaXMuY2FsbEhvb2soJ2JlZm9yZUVudGVyJyk7XG4gIHRoaXMuY2IgPSBjYjtcbiAgYWRkQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcbiAgb3AoKTtcbiAgdGhpcy5lbnRlcmVkID0gZmFsc2U7XG4gIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2VudGVyJyk7XG4gIGlmICh0aGlzLmVudGVyZWQpIHtcbiAgICByZXR1cm47IC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cbiAgfVxuICB0aGlzLmNhbmNlbCA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5lbnRlckNhbmNlbGxlZDtcbiAgcHVzaEpvYih0aGlzLmVudGVyTmV4dFRpY2spO1xufTtcblxuLyoqXG4gKiBUaGUgXCJuZXh0VGlja1wiIHBoYXNlIG9mIGFuIGVudGVyaW5nIHRyYW5zaXRpb24sIHdoaWNoIGlzXG4gKiB0byBiZSBwdXNoZWQgaW50byBhIHF1ZXVlIGFuZCBleGVjdXRlZCBhZnRlciBhIHJlZmxvdyBzb1xuICogdGhhdCByZW1vdmluZyB0aGUgY2xhc3MgY2FuIHRyaWdnZXIgYSBDU1MgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEuZW50ZXJOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICAvLyBwcmV2ZW50IHRyYW5zaXRpb24gc2tpcHBpbmdcbiAgdGhpcy5qdXN0RW50ZXJlZCA9IHRydWU7XG4gIHdhaXRGb3JUcmFuc2l0aW9uU3RhcnQoZnVuY3Rpb24gKCkge1xuICAgIF90aGlzLmp1c3RFbnRlcmVkID0gZmFsc2U7XG4gIH0pO1xuICB2YXIgZW50ZXJEb25lID0gdGhpcy5lbnRlckRvbmU7XG4gIHZhciB0eXBlID0gdGhpcy5nZXRDc3NUcmFuc2l0aW9uVHlwZSh0aGlzLmVudGVyQ2xhc3MpO1xuICBpZiAoIXRoaXMucGVuZGluZ0pzQ2IpIHtcbiAgICBpZiAodHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OKSB7XG4gICAgICAvLyB0cmlnZ2VyIHRyYW5zaXRpb24gYnkgcmVtb3ZpbmcgZW50ZXIgY2xhc3Mgbm93XG4gICAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICAgICAgdGhpcy5zZXR1cENzc0NiKHRyYW5zaXRpb25FbmRFdmVudCwgZW50ZXJEb25lKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFRZUEVfQU5JTUFUSU9OKSB7XG4gICAgICB0aGlzLnNldHVwQ3NzQ2IoYW5pbWF0aW9uRW5kRXZlbnQsIGVudGVyRG9uZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVudGVyRG9uZSgpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlID09PSBUWVBFX1RSQU5TSVRJT04pIHtcbiAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICB9XG59O1xuXG4vKipcbiAqIFRoZSBcImNsZWFudXBcIiBwaGFzZSBvZiBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLlxuICovXG5cbnAkMS5lbnRlckRvbmUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZW50ZXJlZCA9IHRydWU7XG4gIHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG4gIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG4gIHRoaXMuY2FsbEhvb2soJ2FmdGVyRW50ZXInKTtcbiAgaWYgKHRoaXMuY2IpIHRoaXMuY2IoKTtcbn07XG5cbi8qKlxuICogU3RhcnQgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG4gKlxuICogMS4gbGVhdmUgdHJhbnNpdGlvbiB0cmlnZ2VyZWQuXG4gKiAyLiBjYWxsIGJlZm9yZUxlYXZlIGhvb2tcbiAqIDMuIGFkZCBsZWF2ZSBjbGFzcyAodHJpZ2dlciBjc3MgdHJhbnNpdGlvbilcbiAqIDQuIGNhbGwgbGVhdmUgaG9vayAod2l0aCBwb3NzaWJsZSBleHBsaWNpdCBqcyBjYWxsYmFjaylcbiAqIDUuIHJlZmxvdyBpZiBubyBleHBsaWNpdCBqcyBjYWxsYmFjayBpcyBwcm92aWRlZFxuICogNi4gYmFzZWQgb24gdHJhbnNpdGlvbiB0eXBlOlxuICogICAgLSB0cmFuc2l0aW9uIG9yIGFuaW1hdGlvbjpcbiAqICAgICAgICB3YWl0IGZvciBlbmQgZXZlbnQsIHJlbW92ZSBjbGFzcywgdGhlbiBkb25lIGlmXG4gKiAgICAgICAgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAqICAgIC0gbm8gY3NzIHRyYW5zaXRpb246XG4gKiAgICAgICAgZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogNy4gd2FpdCBmb3IgZWl0aGVyIGRvbmUgb3IganMgY2FsbGJhY2ssIHRoZW4gY2FsbFxuICogICAgYWZ0ZXJMZWF2ZSBob29rLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gcmVtb3ZlL2hpZGUgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5wJDEubGVhdmUgPSBmdW5jdGlvbiAob3AsIGNiKSB7XG4gIHRoaXMuY2FuY2VsUGVuZGluZygpO1xuICB0aGlzLmNhbGxIb29rKCdiZWZvcmVMZWF2ZScpO1xuICB0aGlzLm9wID0gb3A7XG4gIHRoaXMuY2IgPSBjYjtcbiAgYWRkQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcbiAgdGhpcy5sZWZ0ID0gZmFsc2U7XG4gIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2xlYXZlJyk7XG4gIGlmICh0aGlzLmxlZnQpIHtcbiAgICByZXR1cm47IC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cbiAgfVxuICB0aGlzLmNhbmNlbCA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5sZWF2ZUNhbmNlbGxlZDtcbiAgLy8gb25seSBuZWVkIHRvIGhhbmRsZSBsZWF2ZURvbmUgaWZcbiAgLy8gMS4gdGhlIHRyYW5zaXRpb24gaXMgYWxyZWFkeSBkb25lIChzeW5jaHJvbm91c2x5IGNhbGxlZFxuICAvLyAgICBieSB0aGUgdXNlciwgd2hpY2ggY2F1c2VzIHRoaXMub3Agc2V0IHRvIG51bGwpXG4gIC8vIDIuIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2tcbiAgaWYgKHRoaXMub3AgJiYgIXRoaXMucGVuZGluZ0pzQ2IpIHtcbiAgICAvLyBpZiBhIENTUyB0cmFuc2l0aW9uIGxlYXZlcyBpbW1lZGlhdGVseSBhZnRlciBlbnRlcixcbiAgICAvLyB0aGUgdHJhbnNpdGlvbmVuZCBldmVudCBuZXZlciBmaXJlcy4gdGhlcmVmb3JlIHdlXG4gICAgLy8gZGV0ZWN0IHN1Y2ggY2FzZXMgYW5kIGVuZCB0aGUgbGVhdmUgaW1tZWRpYXRlbHkuXG4gICAgaWYgKHRoaXMuanVzdEVudGVyZWQpIHtcbiAgICAgIHRoaXMubGVhdmVEb25lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHB1c2hKb2IodGhpcy5sZWF2ZU5leHRUaWNrKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogVGhlIFwibmV4dFRpY2tcIiBwaGFzZSBvZiBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEubGVhdmVOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHR5cGUgPSB0aGlzLmdldENzc1RyYW5zaXRpb25UeXBlKHRoaXMubGVhdmVDbGFzcyk7XG4gIGlmICh0eXBlKSB7XG4gICAgdmFyIGV2ZW50ID0gdHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OID8gdHJhbnNpdGlvbkVuZEV2ZW50IDogYW5pbWF0aW9uRW5kRXZlbnQ7XG4gICAgdGhpcy5zZXR1cENzc0NiKGV2ZW50LCB0aGlzLmxlYXZlRG9uZSk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5sZWF2ZURvbmUoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBUaGUgXCJjbGVhbnVwXCIgcGhhc2Ugb2YgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG4gKi9cblxucCQxLmxlYXZlRG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5sZWZ0ID0gdHJ1ZTtcbiAgdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcbiAgdGhpcy5vcCgpO1xuICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuICB0aGlzLmNhbGxIb29rKCdhZnRlckxlYXZlJyk7XG4gIGlmICh0aGlzLmNiKSB0aGlzLmNiKCk7XG4gIHRoaXMub3AgPSBudWxsO1xufTtcblxuLyoqXG4gKiBDYW5jZWwgYW55IHBlbmRpbmcgY2FsbGJhY2tzIGZyb20gYSBwcmV2aW91c2x5IHJ1bm5pbmdcbiAqIGJ1dCBub3QgZmluaXNoZWQgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEuY2FuY2VsUGVuZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5vcCA9IHRoaXMuY2IgPSBudWxsO1xuICB2YXIgaGFzUGVuZGluZyA9IGZhbHNlO1xuICBpZiAodGhpcy5wZW5kaW5nQ3NzQ2IpIHtcbiAgICBoYXNQZW5kaW5nID0gdHJ1ZTtcbiAgICBvZmYodGhpcy5lbCwgdGhpcy5wZW5kaW5nQ3NzRXZlbnQsIHRoaXMucGVuZGluZ0Nzc0NiKTtcbiAgICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gbnVsbDtcbiAgfVxuICBpZiAodGhpcy5wZW5kaW5nSnNDYikge1xuICAgIGhhc1BlbmRpbmcgPSB0cnVlO1xuICAgIHRoaXMucGVuZGluZ0pzQ2IuY2FuY2VsKCk7XG4gICAgdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG4gIH1cbiAgaWYgKGhhc1BlbmRpbmcpIHtcbiAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG4gIH1cbiAgaWYgKHRoaXMuY2FuY2VsKSB7XG4gICAgdGhpcy5jYW5jZWwuY2FsbCh0aGlzLnZtLCB0aGlzLmVsKTtcbiAgICB0aGlzLmNhbmNlbCA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogQ2FsbCBhIHVzZXItcHJvdmlkZWQgc3luY2hyb25vdXMgaG9vayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5cbnAkMS5jYWxsSG9vayA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gIGlmICh0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV0pIHtcbiAgICB0aGlzLmhvb2tzW3R5cGVdLmNhbGwodGhpcy52bSwgdGhpcy5lbCk7XG4gIH1cbn07XG5cbi8qKlxuICogQ2FsbCBhIHVzZXItcHJvdmlkZWQsIHBvdGVudGlhbGx5LWFzeW5jIGhvb2sgZnVuY3Rpb24uXG4gKiBXZSBjaGVjayBmb3IgdGhlIGxlbmd0aCBvZiBhcmd1bWVudHMgdG8gc2VlIGlmIHRoZSBob29rXG4gKiBleHBlY3RzIGEgYGRvbmVgIGNhbGxiYWNrLiBJZiB0cnVlLCB0aGUgdHJhbnNpdGlvbidzIGVuZFxuICogd2lsbCBiZSBkZXRlcm1pbmVkIGJ5IHdoZW4gdGhlIHVzZXIgY2FsbHMgdGhhdCBjYWxsYmFjaztcbiAqIG90aGVyd2lzZSwgdGhlIGVuZCBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBDU1MgdHJhbnNpdGlvbiBvclxuICogYW5pbWF0aW9uLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cblxucCQxLmNhbGxIb29rV2l0aENiID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgdmFyIGhvb2sgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV07XG4gIGlmIChob29rKSB7XG4gICAgaWYgKGhvb2subGVuZ3RoID4gMSkge1xuICAgICAgdGhpcy5wZW5kaW5nSnNDYiA9IGNhbmNlbGxhYmxlKHRoaXNbdHlwZSArICdEb25lJ10pO1xuICAgIH1cbiAgICBob29rLmNhbGwodGhpcy52bSwgdGhpcy5lbCwgdGhpcy5wZW5kaW5nSnNDYik7XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IGFuIGVsZW1lbnQncyB0cmFuc2l0aW9uIHR5cGUgYmFzZWQgb24gdGhlXG4gKiBjYWxjdWxhdGVkIHN0eWxlcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY2xhc3NOYW1lXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKi9cblxucCQxLmdldENzc1RyYW5zaXRpb25UeXBlID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCF0cmFuc2l0aW9uRW5kRXZlbnQgfHxcbiAgLy8gc2tpcCBDU1MgdHJhbnNpdGlvbnMgaWYgcGFnZSBpcyBub3QgdmlzaWJsZSAtXG4gIC8vIHRoaXMgc29sdmVzIHRoZSBpc3N1ZSBvZiB0cmFuc2l0aW9uZW5kIGV2ZW50cyBub3RcbiAgLy8gZmlyaW5nIHVudGlsIHRoZSBwYWdlIGlzIHZpc2libGUgYWdhaW4uXG4gIC8vIHBhZ2VWaXNpYmlsaXR5IEFQSSBpcyBzdXBwb3J0ZWQgaW4gSUUxMCssIHNhbWUgYXNcbiAgLy8gQ1NTIHRyYW5zaXRpb25zLlxuICBkb2N1bWVudC5oaWRkZW4gfHxcbiAgLy8gZXhwbGljaXQganMtb25seSB0cmFuc2l0aW9uXG4gIHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5jc3MgPT09IGZhbHNlIHx8XG4gIC8vIGVsZW1lbnQgaXMgaGlkZGVuXG4gIGlzSGlkZGVuKHRoaXMuZWwpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciB0eXBlID0gdGhpcy50eXBlIHx8IHRoaXMudHlwZUNhY2hlW2NsYXNzTmFtZV07XG4gIGlmICh0eXBlKSByZXR1cm4gdHlwZTtcbiAgdmFyIGlubGluZVN0eWxlcyA9IHRoaXMuZWwuc3R5bGU7XG4gIHZhciBjb21wdXRlZFN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWwpO1xuICB2YXIgdHJhbnNEdXJhdGlvbiA9IGlubGluZVN0eWxlc1t0cmFuc0R1cmF0aW9uUHJvcF0gfHwgY29tcHV0ZWRTdHlsZXNbdHJhbnNEdXJhdGlvblByb3BdO1xuICBpZiAodHJhbnNEdXJhdGlvbiAmJiB0cmFuc0R1cmF0aW9uICE9PSAnMHMnKSB7XG4gICAgdHlwZSA9IFRZUEVfVFJBTlNJVElPTjtcbiAgfSBlbHNlIHtcbiAgICB2YXIgYW5pbUR1cmF0aW9uID0gaW5saW5lU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdIHx8IGNvbXB1dGVkU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdO1xuICAgIGlmIChhbmltRHVyYXRpb24gJiYgYW5pbUR1cmF0aW9uICE9PSAnMHMnKSB7XG4gICAgICB0eXBlID0gVFlQRV9BTklNQVRJT047XG4gICAgfVxuICB9XG4gIGlmICh0eXBlKSB7XG4gICAgdGhpcy50eXBlQ2FjaGVbY2xhc3NOYW1lXSA9IHR5cGU7XG4gIH1cbiAgcmV0dXJuIHR5cGU7XG59O1xuXG4vKipcbiAqIFNldHVwIGEgQ1NTIHRyYW5zaXRpb25lbmQvYW5pbWF0aW9uZW5kIGNhbGxiYWNrLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuXG5wJDEuc2V0dXBDc3NDYiA9IGZ1bmN0aW9uIChldmVudCwgY2IpIHtcbiAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSBldmVudDtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgZWwgPSB0aGlzLmVsO1xuICB2YXIgb25FbmQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBlbCkge1xuICAgICAgb2ZmKGVsLCBldmVudCwgb25FbmQpO1xuICAgICAgc2VsZi5wZW5kaW5nQ3NzRXZlbnQgPSBzZWxmLnBlbmRpbmdDc3NDYiA9IG51bGw7XG4gICAgICBpZiAoIXNlbGYucGVuZGluZ0pzQ2IgJiYgY2IpIHtcbiAgICAgICAgY2IoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIG9uKGVsLCBldmVudCwgb25FbmQpO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGhpZGRlbiAtIGluIHRoYXQgY2FzZSB3ZSBjYW4ganVzdFxuICogc2tpcCB0aGUgdHJhbnNpdGlvbiBhbGx0b2dldGhlci5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzSGlkZGVuKGVsKSB7XG4gIGlmICgvc3ZnJC8udGVzdChlbC5uYW1lc3BhY2VVUkkpKSB7XG4gICAgLy8gU1ZHIGVsZW1lbnRzIGRvIG5vdCBoYXZlIG9mZnNldChXaWR0aHxIZWlnaHQpXG4gICAgLy8gc28gd2UgbmVlZCB0byBjaGVjayB0aGUgY2xpZW50IHJlY3RcbiAgICB2YXIgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiAhKHJlY3Qud2lkdGggfHwgcmVjdC5oZWlnaHQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAhKGVsLm9mZnNldFdpZHRoIHx8IGVsLm9mZnNldEhlaWdodCB8fCBlbC5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCk7XG4gIH1cbn1cblxudmFyIHRyYW5zaXRpb24kMSA9IHtcblxuICBwcmlvcml0eTogVFJBTlNJVElPTixcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShpZCwgb2xkSWQpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIC8vIHJlc29sdmUgb24gb3duZXIgdm1cbiAgICB2YXIgaG9va3MgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3RyYW5zaXRpb25zJywgaWQpO1xuICAgIGlkID0gaWQgfHwgJ3YnO1xuICAgIG9sZElkID0gb2xkSWQgfHwgJ3YnO1xuICAgIGVsLl9fdl90cmFucyA9IG5ldyBUcmFuc2l0aW9uKGVsLCBpZCwgaG9va3MsIHRoaXMudm0pO1xuICAgIHJlbW92ZUNsYXNzKGVsLCBvbGRJZCArICctdHJhbnNpdGlvbicpO1xuICAgIGFkZENsYXNzKGVsLCBpZCArICctdHJhbnNpdGlvbicpO1xuICB9XG59O1xuXG52YXIgaW50ZXJuYWxEaXJlY3RpdmVzID0ge1xuICBzdHlsZTogc3R5bGUsXG4gICdjbGFzcyc6IHZDbGFzcyxcbiAgY29tcG9uZW50OiBjb21wb25lbnQsXG4gIHByb3A6IHByb3BEZWYsXG4gIHRyYW5zaXRpb246IHRyYW5zaXRpb24kMVxufTtcblxuLy8gc3BlY2lhbCBiaW5kaW5nIHByZWZpeGVzXG52YXIgYmluZFJFID0gL152LWJpbmQ6fF46LztcbnZhciBvblJFID0gL152LW9uOnxeQC87XG52YXIgZGlyQXR0clJFID0gL152LShbXjpdKykoPzokfDooLiopJCkvO1xudmFyIG1vZGlmaWVyUkUgPSAvXFwuW15cXC5dKy9nO1xudmFyIHRyYW5zaXRpb25SRSA9IC9eKHYtYmluZDp8Oik/dHJhbnNpdGlvbiQvO1xuXG4vLyBkZWZhdWx0IGRpcmVjdGl2ZSBwcmlvcml0eVxudmFyIERFRkFVTFRfUFJJT1JJVFkgPSAxMDAwO1xudmFyIERFRkFVTFRfVEVSTUlOQUxfUFJJT1JJVFkgPSAyMDAwO1xuXG4vKipcbiAqIENvbXBpbGUgYSB0ZW1wbGF0ZSBhbmQgcmV0dXJuIGEgcmV1c2FibGUgY29tcG9zaXRlIGxpbmtcbiAqIGZ1bmN0aW9uLCB3aGljaCByZWN1cnNpdmVseSBjb250YWlucyBtb3JlIGxpbmsgZnVuY3Rpb25zXG4gKiBpbnNpZGUuIFRoaXMgdG9wIGxldmVsIGNvbXBpbGUgZnVuY3Rpb24gd291bGQgbm9ybWFsbHlcbiAqIGJlIGNhbGxlZCBvbiBpbnN0YW5jZSByb290IG5vZGVzLCBidXQgY2FuIGFsc28gYmUgdXNlZFxuICogZm9yIHBhcnRpYWwgY29tcGlsYXRpb24gaWYgdGhlIHBhcnRpYWwgYXJndW1lbnQgaXMgdHJ1ZS5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgY29tcG9zaXRlIGxpbmsgZnVuY3Rpb24sIHdoZW4gY2FsbGVkLCB3aWxsXG4gKiByZXR1cm4gYW4gdW5saW5rIGZ1bmN0aW9uIHRoYXQgdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzXG4gKiBjcmVhdGVkIGR1cmluZyB0aGUgbGlua2luZyBwaGFzZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHBhcnRpYWxcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGUoZWwsIG9wdGlvbnMsIHBhcnRpYWwpIHtcbiAgLy8gbGluayBmdW5jdGlvbiBmb3IgdGhlIG5vZGUgaXRzZWxmLlxuICB2YXIgbm9kZUxpbmtGbiA9IHBhcnRpYWwgfHwgIW9wdGlvbnMuX2FzQ29tcG9uZW50ID8gY29tcGlsZU5vZGUoZWwsIG9wdGlvbnMpIDogbnVsbDtcbiAgLy8gbGluayBmdW5jdGlvbiBmb3IgdGhlIGNoaWxkTm9kZXNcbiAgdmFyIGNoaWxkTGlua0ZuID0gIShub2RlTGlua0ZuICYmIG5vZGVMaW5rRm4udGVybWluYWwpICYmICFpc1NjcmlwdChlbCkgJiYgZWwuaGFzQ2hpbGROb2RlcygpID8gY29tcGlsZU5vZGVMaXN0KGVsLmNoaWxkTm9kZXMsIG9wdGlvbnMpIDogbnVsbDtcblxuICAvKipcbiAgICogQSBjb21wb3NpdGUgbGlua2VyIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbiBhIGFscmVhZHlcbiAgICogY29tcGlsZWQgcGllY2Ugb2YgRE9NLCB3aGljaCBpbnN0YW50aWF0ZXMgYWxsIGRpcmVjdGl2ZVxuICAgKiBpbnN0YW5jZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAgICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIGhvc3Qgdm0gb2YgdHJhbnNjbHVkZWQgY29udGVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIGxpbmsgY29udGV4dCBmcmFnbWVudFxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gICAqL1xuXG4gIHJldHVybiBmdW5jdGlvbiBjb21wb3NpdGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIC8vIGNhY2hlIGNoaWxkTm9kZXMgYmVmb3JlIGxpbmtpbmcgcGFyZW50LCBmaXggIzY1N1xuICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShlbC5jaGlsZE5vZGVzKTtcbiAgICAvLyBsaW5rXG4gICAgdmFyIGRpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiBjb21wb3NpdGVMaW5rQ2FwdHVyZXIoKSB7XG4gICAgICBpZiAobm9kZUxpbmtGbikgbm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICAgIGlmIChjaGlsZExpbmtGbikgY2hpbGRMaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICB9LCB2bSk7XG4gICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgZGlycyk7XG4gIH07XG59XG5cbi8qKlxuICogQXBwbHkgYSBsaW5rZXIgdG8gYSB2bS9lbGVtZW50IHBhaXIgYW5kIGNhcHR1cmUgdGhlXG4gKiBkaXJlY3RpdmVzIGNyZWF0ZWQgZHVyaW5nIHRoZSBwcm9jZXNzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGxpbmtlclxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuZnVuY3Rpb24gbGlua0FuZENhcHR1cmUobGlua2VyLCB2bSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgICAvLyByZXNldCBkaXJlY3RpdmVzIGJlZm9yZSBldmVyeSBjYXB0dXJlIGluIHByb2R1Y3Rpb25cbiAgICAvLyBtb2RlLCBzbyB0aGF0IHdoZW4gdW5saW5raW5nIHdlIGRvbid0IG5lZWQgdG8gc3BsaWNlXG4gICAgLy8gdGhlbSBvdXQgKHdoaWNoIHR1cm5zIG91dCB0byBiZSBhIHBlcmYgaGl0KS5cbiAgICAvLyB0aGV5IGFyZSBrZXB0IGluIGRldmVsb3BtZW50IG1vZGUgYmVjYXVzZSB0aGV5IGFyZVxuICAgIC8vIHVzZWZ1bCBmb3IgVnVlJ3Mgb3duIHRlc3RzLlxuICAgIHZtLl9kaXJlY3RpdmVzID0gW107XG4gIH1cbiAgdmFyIG9yaWdpbmFsRGlyQ291bnQgPSB2bS5fZGlyZWN0aXZlcy5sZW5ndGg7XG4gIGxpbmtlcigpO1xuICB2YXIgZGlycyA9IHZtLl9kaXJlY3RpdmVzLnNsaWNlKG9yaWdpbmFsRGlyQ291bnQpO1xuICBkaXJzLnNvcnQoZGlyZWN0aXZlQ29tcGFyYXRvcik7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gZGlycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBkaXJzW2ldLl9iaW5kKCk7XG4gIH1cbiAgcmV0dXJuIGRpcnM7XG59XG5cbi8qKlxuICogRGlyZWN0aXZlIHByaW9yaXR5IHNvcnQgY29tcGFyYXRvclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhXG4gKiBAcGFyYW0ge09iamVjdH0gYlxuICovXG5cbmZ1bmN0aW9uIGRpcmVjdGl2ZUNvbXBhcmF0b3IoYSwgYikge1xuICBhID0gYS5kZXNjcmlwdG9yLmRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZO1xuICBiID0gYi5kZXNjcmlwdG9yLmRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZO1xuICByZXR1cm4gYSA+IGIgPyAtMSA6IGEgPT09IGIgPyAwIDogMTtcbn1cblxuLyoqXG4gKiBMaW5rZXIgZnVuY3Rpb25zIHJldHVybiBhbiB1bmxpbmsgZnVuY3Rpb24gdGhhdFxuICogdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzIGluc3RhbmNlcyBnZW5lcmF0ZWQgZHVyaW5nXG4gKiB0aGUgcHJvY2Vzcy5cbiAqXG4gKiBXZSBjcmVhdGUgdW5saW5rIGZ1bmN0aW9ucyB3aXRoIG9ubHkgdGhlIG5lY2Vzc2FyeVxuICogaW5mb3JtYXRpb24gdG8gYXZvaWQgcmV0YWluaW5nIGFkZGl0aW9uYWwgY2xvc3VyZXMuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0FycmF5fSBkaXJzXG4gKiBAcGFyYW0ge1Z1ZX0gW2NvbnRleHRdXG4gKiBAcGFyYW0ge0FycmF5fSBbY29udGV4dERpcnNdXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBtYWtlVW5saW5rRm4odm0sIGRpcnMsIGNvbnRleHQsIGNvbnRleHREaXJzKSB7XG4gIGZ1bmN0aW9uIHVubGluayhkZXN0cm95aW5nKSB7XG4gICAgdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKTtcbiAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0RGlycykge1xuICAgICAgdGVhcmRvd25EaXJzKGNvbnRleHQsIGNvbnRleHREaXJzKTtcbiAgICB9XG4gIH1cbiAgLy8gZXhwb3NlIGxpbmtlZCBkaXJlY3RpdmVzXG4gIHVubGluay5kaXJzID0gZGlycztcbiAgcmV0dXJuIHVubGluaztcbn1cblxuLyoqXG4gKiBUZWFyZG93biBwYXJ0aWFsIGxpbmtlZCBkaXJlY3RpdmVzLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtBcnJheX0gZGlyc1xuICogQHBhcmFtIHtCb29sZWFufSBkZXN0cm95aW5nXG4gKi9cblxuZnVuY3Rpb24gdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKSB7XG4gIHZhciBpID0gZGlycy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBkaXJzW2ldLl90ZWFyZG93bigpO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFkZXN0cm95aW5nKSB7XG4gICAgICB2bS5fZGlyZWN0aXZlcy4kcmVtb3ZlKGRpcnNbaV0pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENvbXBpbGUgbGluayBwcm9wcyBvbiBhbiBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1xuICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVBbmRMaW5rUHJvcHModm0sIGVsLCBwcm9wcywgc2NvcGUpIHtcbiAgdmFyIHByb3BzTGlua0ZuID0gY29tcGlsZVByb3BzKGVsLCBwcm9wcywgdm0pO1xuICB2YXIgcHJvcERpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG4gICAgcHJvcHNMaW5rRm4odm0sIHNjb3BlKTtcbiAgfSwgdm0pO1xuICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBwcm9wRGlycyk7XG59XG5cbi8qKlxuICogQ29tcGlsZSB0aGUgcm9vdCBlbGVtZW50IG9mIGFuIGluc3RhbmNlLlxuICpcbiAqIDEuIGF0dHJzIG9uIGNvbnRleHQgY29udGFpbmVyIChjb250ZXh0IHNjb3BlKVxuICogMi4gYXR0cnMgb24gdGhlIGNvbXBvbmVudCB0ZW1wbGF0ZSByb290IG5vZGUsIGlmXG4gKiAgICByZXBsYWNlOnRydWUgKGNoaWxkIHNjb3BlKVxuICpcbiAqIElmIHRoaXMgaXMgYSBmcmFnbWVudCBpbnN0YW5jZSwgd2Ugb25seSBuZWVkIHRvIGNvbXBpbGUgMS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRPcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlUm9vdChlbCwgb3B0aW9ucywgY29udGV4dE9wdGlvbnMpIHtcbiAgdmFyIGNvbnRhaW5lckF0dHJzID0gb3B0aW9ucy5fY29udGFpbmVyQXR0cnM7XG4gIHZhciByZXBsYWNlckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRycztcbiAgdmFyIGNvbnRleHRMaW5rRm4sIHJlcGxhY2VyTGlua0ZuO1xuXG4gIC8vIG9ubHkgbmVlZCB0byBjb21waWxlIG90aGVyIGF0dHJpYnV0ZXMgZm9yXG4gIC8vIG5vbi1mcmFnbWVudCBpbnN0YW5jZXNcbiAgaWYgKGVsLm5vZGVUeXBlICE9PSAxMSkge1xuICAgIC8vIGZvciBjb21wb25lbnRzLCBjb250YWluZXIgYW5kIHJlcGxhY2VyIG5lZWQgdG8gYmVcbiAgICAvLyBjb21waWxlZCBzZXBhcmF0ZWx5IGFuZCBsaW5rZWQgaW4gZGlmZmVyZW50IHNjb3Blcy5cbiAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQpIHtcbiAgICAgIC8vIDIuIGNvbnRhaW5lciBhdHRyaWJ1dGVzXG4gICAgICBpZiAoY29udGFpbmVyQXR0cnMgJiYgY29udGV4dE9wdGlvbnMpIHtcbiAgICAgICAgY29udGV4dExpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGNvbnRhaW5lckF0dHJzLCBjb250ZXh0T3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBpZiAocmVwbGFjZXJBdHRycykge1xuICAgICAgICAvLyAzLiByZXBsYWNlciBhdHRyaWJ1dGVzXG4gICAgICAgIHJlcGxhY2VyTGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMocmVwbGFjZXJBdHRycywgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vbi1jb21wb25lbnQsIGp1c3QgY29tcGlsZSBhcyBhIG5vcm1hbCBlbGVtZW50LlxuICAgICAgcmVwbGFjZXJMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhlbC5hdHRyaWJ1dGVzLCBvcHRpb25zKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb250YWluZXJBdHRycykge1xuICAgIC8vIHdhcm4gY29udGFpbmVyIGRpcmVjdGl2ZXMgZm9yIGZyYWdtZW50IGluc3RhbmNlc1xuICAgIHZhciBuYW1lcyA9IGNvbnRhaW5lckF0dHJzLmZpbHRlcihmdW5jdGlvbiAoYXR0cikge1xuICAgICAgLy8gYWxsb3cgdnVlLWxvYWRlci92dWVpZnkgc2NvcGVkIGNzcyBhdHRyaWJ1dGVzXG4gICAgICByZXR1cm4gYXR0ci5uYW1lLmluZGV4T2YoJ192LScpIDwgMCAmJlxuICAgICAgLy8gYWxsb3cgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAhb25SRS50ZXN0KGF0dHIubmFtZSkgJiZcbiAgICAgIC8vIGFsbG93IHNsb3RzXG4gICAgICBhdHRyLm5hbWUgIT09ICdzbG90JztcbiAgICB9KS5tYXAoZnVuY3Rpb24gKGF0dHIpIHtcbiAgICAgIHJldHVybiAnXCInICsgYXR0ci5uYW1lICsgJ1wiJztcbiAgICB9KTtcbiAgICBpZiAobmFtZXMubGVuZ3RoKSB7XG4gICAgICB2YXIgcGx1cmFsID0gbmFtZXMubGVuZ3RoID4gMTtcbiAgICAgIHdhcm4oJ0F0dHJpYnV0ZScgKyAocGx1cmFsID8gJ3MgJyA6ICcgJykgKyBuYW1lcy5qb2luKCcsICcpICsgKHBsdXJhbCA/ICcgYXJlJyA6ICcgaXMnKSArICcgaWdub3JlZCBvbiBjb21wb25lbnQgJyArICc8JyArIG9wdGlvbnMuZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICsgJz4gYmVjYXVzZSAnICsgJ3RoZSBjb21wb25lbnQgaXMgYSBmcmFnbWVudCBpbnN0YW5jZTogJyArICdodHRwOi8vdnVlanMub3JnL2d1aWRlL2NvbXBvbmVudHMuaHRtbCNGcmFnbWVudC1JbnN0YW5jZScpO1xuICAgIH1cbiAgfVxuXG4gIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRycyA9IG51bGw7XG4gIHJldHVybiBmdW5jdGlvbiByb290TGlua0ZuKHZtLCBlbCwgc2NvcGUpIHtcbiAgICAvLyBsaW5rIGNvbnRleHQgc2NvcGUgZGlyc1xuICAgIHZhciBjb250ZXh0ID0gdm0uX2NvbnRleHQ7XG4gICAgdmFyIGNvbnRleHREaXJzO1xuICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHRMaW5rRm4pIHtcbiAgICAgIGNvbnRleHREaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBjb250ZXh0TGlua0ZuKGNvbnRleHQsIGVsLCBudWxsLCBzY29wZSk7XG4gICAgICB9LCBjb250ZXh0KTtcbiAgICB9XG5cbiAgICAvLyBsaW5rIHNlbGZcbiAgICB2YXIgc2VsZkRpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAocmVwbGFjZXJMaW5rRm4pIHJlcGxhY2VyTGlua0ZuKHZtLCBlbCk7XG4gICAgfSwgdm0pO1xuXG4gICAgLy8gcmV0dXJuIHRoZSB1bmxpbmsgZnVuY3Rpb24gdGhhdCB0ZWFyc2Rvd24gY29udGV4dFxuICAgIC8vIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuICAgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIHNlbGZEaXJzLCBjb250ZXh0LCBjb250ZXh0RGlycyk7XG4gIH07XG59XG5cbi8qKlxuICogQ29tcGlsZSBhIG5vZGUgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4gYmFzZWQgb24gdGhlXG4gKiBub2RlIHR5cGUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258bnVsbH1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKSB7XG4gIHZhciB0eXBlID0gbm9kZS5ub2RlVHlwZTtcbiAgaWYgKHR5cGUgPT09IDEgJiYgIWlzU2NyaXB0KG5vZGUpKSB7XG4gICAgcmV0dXJuIGNvbXBpbGVFbGVtZW50KG5vZGUsIG9wdGlvbnMpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IDMgJiYgbm9kZS5kYXRhLnRyaW0oKSkge1xuICAgIHJldHVybiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBDb21waWxlIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZUVsZW1lbnQoZWwsIG9wdGlvbnMpIHtcbiAgLy8gcHJlcHJvY2VzcyB0ZXh0YXJlYXMuXG4gIC8vIHRleHRhcmVhIHRyZWF0cyBpdHMgdGV4dCBjb250ZW50IGFzIHRoZSBpbml0aWFsIHZhbHVlLlxuICAvLyBqdXN0IGJpbmQgaXQgYXMgYW4gYXR0ciBkaXJlY3RpdmUgZm9yIHZhbHVlLlxuICBpZiAoZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQoZWwudmFsdWUpO1xuICAgIGlmICh0b2tlbnMpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnOnZhbHVlJywgdG9rZW5zVG9FeHAodG9rZW5zKSk7XG4gICAgICBlbC52YWx1ZSA9ICcnO1xuICAgIH1cbiAgfVxuICB2YXIgbGlua0ZuO1xuICB2YXIgaGFzQXR0cnMgPSBlbC5oYXNBdHRyaWJ1dGVzKCk7XG4gIHZhciBhdHRycyA9IGhhc0F0dHJzICYmIHRvQXJyYXkoZWwuYXR0cmlidXRlcyk7XG4gIC8vIGNoZWNrIHRlcm1pbmFsIGRpcmVjdGl2ZXMgKGZvciAmIGlmKVxuICBpZiAoaGFzQXR0cnMpIHtcbiAgICBsaW5rRm4gPSBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyhlbCwgYXR0cnMsIG9wdGlvbnMpO1xuICB9XG4gIC8vIGNoZWNrIGVsZW1lbnQgZGlyZWN0aXZlc1xuICBpZiAoIWxpbmtGbikge1xuICAgIGxpbmtGbiA9IGNoZWNrRWxlbWVudERpcmVjdGl2ZXMoZWwsIG9wdGlvbnMpO1xuICB9XG4gIC8vIGNoZWNrIGNvbXBvbmVudFxuICBpZiAoIWxpbmtGbikge1xuICAgIGxpbmtGbiA9IGNoZWNrQ29tcG9uZW50KGVsLCBvcHRpb25zKTtcbiAgfVxuICAvLyBub3JtYWwgZGlyZWN0aXZlc1xuICBpZiAoIWxpbmtGbiAmJiBoYXNBdHRycykge1xuICAgIGxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGF0dHJzLCBvcHRpb25zKTtcbiAgfVxuICByZXR1cm4gbGlua0ZuO1xufVxuXG4vKipcbiAqIENvbXBpbGUgYSB0ZXh0Tm9kZSBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbi5cbiAqXG4gKiBAcGFyYW0ge1RleHROb2RlfSBub2RlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258bnVsbH0gdGV4dE5vZGVMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucykge1xuICAvLyBza2lwIG1hcmtlZCB0ZXh0IG5vZGVzXG4gIGlmIChub2RlLl9za2lwKSB7XG4gICAgcmV0dXJuIHJlbW92ZVRleHQ7XG4gIH1cblxuICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KG5vZGUud2hvbGVUZXh0KTtcbiAgaWYgKCF0b2tlbnMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIG1hcmsgYWRqYWNlbnQgdGV4dCBub2RlcyBhcyBza2lwcGVkLFxuICAvLyBiZWNhdXNlIHdlIGFyZSB1c2luZyBub2RlLndob2xlVGV4dCB0byBjb21waWxlXG4gIC8vIGFsbCBhZGphY2VudCB0ZXh0IG5vZGVzIHRvZ2V0aGVyLiBUaGlzIGZpeGVzXG4gIC8vIGlzc3VlcyBpbiBJRSB3aGVyZSBzb21ldGltZXMgaXQgc3BsaXRzIHVwIGEgc2luZ2xlXG4gIC8vIHRleHQgbm9kZSBpbnRvIG11bHRpcGxlIG9uZXMuXG4gIHZhciBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcbiAgd2hpbGUgKG5leHQgJiYgbmV4dC5ub2RlVHlwZSA9PT0gMykge1xuICAgIG5leHQuX3NraXAgPSB0cnVlO1xuICAgIG5leHQgPSBuZXh0Lm5leHRTaWJsaW5nO1xuICB9XG5cbiAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIHZhciBlbCwgdG9rZW47XG4gIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHRva2VuID0gdG9rZW5zW2ldO1xuICAgIGVsID0gdG9rZW4udGFnID8gcHJvY2Vzc1RleHRUb2tlbih0b2tlbiwgb3B0aW9ucykgOiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0b2tlbi52YWx1ZSk7XG4gICAgZnJhZy5hcHBlbmRDaGlsZChlbCk7XG4gIH1cbiAgcmV0dXJuIG1ha2VUZXh0Tm9kZUxpbmtGbih0b2tlbnMsIGZyYWcsIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIExpbmtlciBmb3IgYW4gc2tpcHBlZCB0ZXh0IG5vZGUuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge1RleHR9IG5vZGVcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVUZXh0KHZtLCBub2RlKSB7XG4gIHJlbW92ZShub2RlKTtcbn1cblxuLyoqXG4gKiBQcm9jZXNzIGEgc2luZ2xlIHRleHQgdG9rZW4uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRva2VuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7Tm9kZX1cbiAqL1xuXG5mdW5jdGlvbiBwcm9jZXNzVGV4dFRva2VuKHRva2VuLCBvcHRpb25zKSB7XG4gIHZhciBlbDtcbiAgaWYgKHRva2VuLm9uZVRpbWUpIHtcbiAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRva2VuLnZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodG9rZW4uaHRtbCkge1xuICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KCd2LWh0bWwnKTtcbiAgICAgIHNldFRva2VuVHlwZSgnaHRtbCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJRSB3aWxsIGNsZWFuIHVwIGVtcHR5IHRleHROb2RlcyBkdXJpbmdcbiAgICAgIC8vIGZyYWcuY2xvbmVOb2RlKHRydWUpLCBzbyB3ZSBoYXZlIHRvIGdpdmUgaXRcbiAgICAgIC8vIHNvbWV0aGluZyBoZXJlLi4uXG4gICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcgJyk7XG4gICAgICBzZXRUb2tlblR5cGUoJ3RleHQnKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gc2V0VG9rZW5UeXBlKHR5cGUpIHtcbiAgICBpZiAodG9rZW4uZGVzY3JpcHRvcikgcmV0dXJuO1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh0b2tlbi52YWx1ZSk7XG4gICAgdG9rZW4uZGVzY3JpcHRvciA9IHtcbiAgICAgIG5hbWU6IHR5cGUsXG4gICAgICBkZWY6IGRpcmVjdGl2ZXNbdHlwZV0sXG4gICAgICBleHByZXNzaW9uOiBwYXJzZWQuZXhwcmVzc2lvbixcbiAgICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzXG4gICAgfTtcbiAgfVxuICByZXR1cm4gZWw7XG59XG5cbi8qKlxuICogQnVpbGQgYSBmdW5jdGlvbiB0aGF0IHByb2Nlc3NlcyBhIHRleHROb2RlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gdG9rZW5zXG4gKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcbiAqL1xuXG5mdW5jdGlvbiBtYWtlVGV4dE5vZGVMaW5rRm4odG9rZW5zLCBmcmFnKSB7XG4gIHJldHVybiBmdW5jdGlvbiB0ZXh0Tm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlKSB7XG4gICAgdmFyIGZyYWdDbG9uZSA9IGZyYWcuY2xvbmVOb2RlKHRydWUpO1xuICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShmcmFnQ2xvbmUuY2hpbGROb2Rlcyk7XG4gICAgdmFyIHRva2VuLCB2YWx1ZSwgbm9kZTtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRva2Vucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHRva2VuID0gdG9rZW5zW2ldO1xuICAgICAgdmFsdWUgPSB0b2tlbi52YWx1ZTtcbiAgICAgIGlmICh0b2tlbi50YWcpIHtcbiAgICAgICAgbm9kZSA9IGNoaWxkTm9kZXNbaV07XG4gICAgICAgIGlmICh0b2tlbi5vbmVUaW1lKSB7XG4gICAgICAgICAgdmFsdWUgPSAoc2NvcGUgfHwgdm0pLiRldmFsKHZhbHVlKTtcbiAgICAgICAgICBpZiAodG9rZW4uaHRtbCkge1xuICAgICAgICAgICAgcmVwbGFjZShub2RlLCBwYXJzZVRlbXBsYXRlKHZhbHVlLCB0cnVlKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5vZGUuZGF0YSA9IF90b1N0cmluZyh2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLl9iaW5kRGlyKHRva2VuLmRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXBsYWNlKGVsLCBmcmFnQ2xvbmUpO1xuICB9O1xufVxuXG4vKipcbiAqIENvbXBpbGUgYSBub2RlIGxpc3QgYW5kIHJldHVybiBhIGNoaWxkTGlua0ZuLlxuICpcbiAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVMaXN0XG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVOb2RlTGlzdChub2RlTGlzdCwgb3B0aW9ucykge1xuICB2YXIgbGlua0ZucyA9IFtdO1xuICB2YXIgbm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4sIG5vZGU7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZUxpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgbm9kZSA9IG5vZGVMaXN0W2ldO1xuICAgIG5vZGVMaW5rRm4gPSBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKTtcbiAgICBjaGlsZExpbmtGbiA9ICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJiBub2RlLnRhZ05hbWUgIT09ICdTQ1JJUFQnICYmIG5vZGUuaGFzQ2hpbGROb2RlcygpID8gY29tcGlsZU5vZGVMaXN0KG5vZGUuY2hpbGROb2Rlcywgb3B0aW9ucykgOiBudWxsO1xuICAgIGxpbmtGbnMucHVzaChub2RlTGlua0ZuLCBjaGlsZExpbmtGbik7XG4gIH1cbiAgcmV0dXJuIGxpbmtGbnMubGVuZ3RoID8gbWFrZUNoaWxkTGlua0ZuKGxpbmtGbnMpIDogbnVsbDtcbn1cblxuLyoqXG4gKiBNYWtlIGEgY2hpbGQgbGluayBmdW5jdGlvbiBmb3IgYSBub2RlJ3MgY2hpbGROb2Rlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PEZ1bmN0aW9uPn0gbGlua0Zuc1xuICogQHJldHVybiB7RnVuY3Rpb259IGNoaWxkTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gbWFrZUNoaWxkTGlua0ZuKGxpbmtGbnMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGNoaWxkTGlua0ZuKHZtLCBub2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICB2YXIgbm9kZSwgbm9kZUxpbmtGbiwgY2hpbGRyZW5MaW5rRm47XG4gICAgZm9yICh2YXIgaSA9IDAsIG4gPSAwLCBsID0gbGlua0Zucy5sZW5ndGg7IGkgPCBsOyBuKyspIHtcbiAgICAgIG5vZGUgPSBub2Rlc1tuXTtcbiAgICAgIG5vZGVMaW5rRm4gPSBsaW5rRm5zW2krK107XG4gICAgICBjaGlsZHJlbkxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcbiAgICAgIC8vIGNhY2hlIGNoaWxkTm9kZXMgYmVmb3JlIGxpbmtpbmcgcGFyZW50LCBmaXggIzY1N1xuICAgICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KG5vZGUuY2hpbGROb2Rlcyk7XG4gICAgICBpZiAobm9kZUxpbmtGbikge1xuICAgICAgICBub2RlTGlua0ZuKHZtLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgICB9XG4gICAgICBpZiAoY2hpbGRyZW5MaW5rRm4pIHtcbiAgICAgICAgY2hpbGRyZW5MaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2sgZm9yIGVsZW1lbnQgZGlyZWN0aXZlcyAoY3VzdG9tIGVsZW1lbnRzIHRoYXQgc2hvdWxkXG4gKiBiZSByZXNvdmxlZCBhcyB0ZXJtaW5hbCBkaXJlY3RpdmVzKS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5cbmZ1bmN0aW9uIGNoZWNrRWxlbWVudERpcmVjdGl2ZXMoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgaWYgKGNvbW1vblRhZ1JFLnRlc3QodGFnKSkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgZGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdlbGVtZW50RGlyZWN0aXZlcycsIHRhZyk7XG4gIGlmIChkZWYpIHtcbiAgICByZXR1cm4gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgdGFnLCAnJywgb3B0aW9ucywgZGVmKTtcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSBjb21wb25lbnQuIElmIHllcywgcmV0dXJuXG4gKiBhIGNvbXBvbmVudCBsaW5rIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gY2hlY2tDb21wb25lbnQoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIGNvbXBvbmVudCA9IGNoZWNrQ29tcG9uZW50QXR0cihlbCwgb3B0aW9ucyk7XG4gIGlmIChjb21wb25lbnQpIHtcbiAgICB2YXIgcmVmID0gZmluZFJlZihlbCk7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSB7XG4gICAgICBuYW1lOiAnY29tcG9uZW50JyxcbiAgICAgIHJlZjogcmVmLFxuICAgICAgZXhwcmVzc2lvbjogY29tcG9uZW50LmlkLFxuICAgICAgZGVmOiBpbnRlcm5hbERpcmVjdGl2ZXMuY29tcG9uZW50LFxuICAgICAgbW9kaWZpZXJzOiB7XG4gICAgICAgIGxpdGVyYWw6ICFjb21wb25lbnQuZHluYW1pY1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIGNvbXBvbmVudExpbmtGbiA9IGZ1bmN0aW9uIGNvbXBvbmVudExpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgICBpZiAocmVmKSB7XG4gICAgICAgIGRlZmluZVJlYWN0aXZlKChzY29wZSB8fCB2bSkuJHJlZnMsIHJlZiwgbnVsbCk7XG4gICAgICB9XG4gICAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgIH07XG4gICAgY29tcG9uZW50TGlua0ZuLnRlcm1pbmFsID0gdHJ1ZTtcbiAgICByZXR1cm4gY29tcG9uZW50TGlua0ZuO1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgYW4gZWxlbWVudCBmb3IgdGVybWluYWwgZGlyZWN0aXZlcyBpbiBmaXhlZCBvcmRlci5cbiAqIElmIGl0IGZpbmRzIG9uZSwgcmV0dXJuIGEgdGVybWluYWwgbGluayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0FycmF5fSBhdHRyc1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0ZXJtaW5hbExpbmtGblxuICovXG5cbmZ1bmN0aW9uIGNoZWNrVGVybWluYWxEaXJlY3RpdmVzKGVsLCBhdHRycywgb3B0aW9ucykge1xuICAvLyBza2lwIHYtcHJlXG4gIGlmIChnZXRBdHRyKGVsLCAndi1wcmUnKSAhPT0gbnVsbCkge1xuICAgIHJldHVybiBza2lwO1xuICB9XG4gIC8vIHNraXAgdi1lbHNlIGJsb2NrLCBidXQgb25seSBpZiBmb2xsb3dpbmcgdi1pZlxuICBpZiAoZWwuaGFzQXR0cmlidXRlKCd2LWVsc2UnKSkge1xuICAgIHZhciBwcmV2ID0gZWwucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICBpZiAocHJldiAmJiBwcmV2Lmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG4gICAgICByZXR1cm4gc2tpcDtcbiAgICB9XG4gIH1cblxuICB2YXIgYXR0ciwgbmFtZSwgdmFsdWUsIG1vZGlmaWVycywgbWF0Y2hlZCwgZGlyTmFtZSwgcmF3TmFtZSwgYXJnLCBkZWYsIHRlcm1EZWY7XG4gIGZvciAodmFyIGkgPSAwLCBqID0gYXR0cnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgYXR0ciA9IGF0dHJzW2ldO1xuICAgIG5hbWUgPSBhdHRyLm5hbWUucmVwbGFjZShtb2RpZmllclJFLCAnJyk7XG4gICAgaWYgKG1hdGNoZWQgPSBuYW1lLm1hdGNoKGRpckF0dHJSRSkpIHtcbiAgICAgIGRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZGlyZWN0aXZlcycsIG1hdGNoZWRbMV0pO1xuICAgICAgaWYgKGRlZiAmJiBkZWYudGVybWluYWwpIHtcbiAgICAgICAgaWYgKCF0ZXJtRGVmIHx8IChkZWYucHJpb3JpdHkgfHwgREVGQVVMVF9URVJNSU5BTF9QUklPUklUWSkgPiB0ZXJtRGVmLnByaW9yaXR5KSB7XG4gICAgICAgICAgdGVybURlZiA9IGRlZjtcbiAgICAgICAgICByYXdOYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKGF0dHIubmFtZSk7XG4gICAgICAgICAgdmFsdWUgPSBhdHRyLnZhbHVlO1xuICAgICAgICAgIGRpck5hbWUgPSBtYXRjaGVkWzFdO1xuICAgICAgICAgIGFyZyA9IG1hdGNoZWRbMl07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAodGVybURlZikge1xuICAgIHJldHVybiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCBkaXJOYW1lLCB2YWx1ZSwgb3B0aW9ucywgdGVybURlZiwgcmF3TmFtZSwgYXJnLCBtb2RpZmllcnMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNraXAoKSB7fVxuc2tpcC50ZXJtaW5hbCA9IHRydWU7XG5cbi8qKlxuICogQnVpbGQgYSBub2RlIGxpbmsgZnVuY3Rpb24gZm9yIGEgdGVybWluYWwgZGlyZWN0aXZlLlxuICogQSB0ZXJtaW5hbCBsaW5rIGZ1bmN0aW9uIHRlcm1pbmF0ZXMgdGhlIGN1cnJlbnRcbiAqIGNvbXBpbGF0aW9uIHJlY3Vyc2lvbiBhbmQgaGFuZGxlcyBjb21waWxhdGlvbiBvZiB0aGVcbiAqIHN1YnRyZWUgaW4gdGhlIGRpcmVjdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gZGlyTmFtZVxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtPYmplY3R9IGRlZlxuICogQHBhcmFtIHtTdHJpbmd9IFtyYXdOYW1lXVxuICogQHBhcmFtIHtTdHJpbmd9IFthcmddXG4gKiBAcGFyYW0ge09iamVjdH0gW21vZGlmaWVyc11cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0ZXJtaW5hbExpbmtGblxuICovXG5cbmZ1bmN0aW9uIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIGRpck5hbWUsIHZhbHVlLCBvcHRpb25zLCBkZWYsIHJhd05hbWUsIGFyZywgbW9kaWZpZXJzKSB7XG4gIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG4gIHZhciBkZXNjcmlwdG9yID0ge1xuICAgIG5hbWU6IGRpck5hbWUsXG4gICAgYXJnOiBhcmcsXG4gICAgZXhwcmVzc2lvbjogcGFyc2VkLmV4cHJlc3Npb24sXG4gICAgZmlsdGVyczogcGFyc2VkLmZpbHRlcnMsXG4gICAgcmF3OiB2YWx1ZSxcbiAgICBhdHRyOiByYXdOYW1lLFxuICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLFxuICAgIGRlZjogZGVmXG4gIH07XG4gIC8vIGNoZWNrIHJlZiBmb3Igdi1mb3IgYW5kIHJvdXRlci12aWV3XG4gIGlmIChkaXJOYW1lID09PSAnZm9yJyB8fCBkaXJOYW1lID09PSAncm91dGVyLXZpZXcnKSB7XG4gICAgZGVzY3JpcHRvci5yZWYgPSBmaW5kUmVmKGVsKTtcbiAgfVxuICB2YXIgZm4gPSBmdW5jdGlvbiB0ZXJtaW5hbE5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIGlmIChkZXNjcmlwdG9yLnJlZikge1xuICAgICAgZGVmaW5lUmVhY3RpdmUoKHNjb3BlIHx8IHZtKS4kcmVmcywgZGVzY3JpcHRvci5yZWYsIG51bGwpO1xuICAgIH1cbiAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICB9O1xuICBmbi50ZXJtaW5hbCA9IHRydWU7XG4gIHJldHVybiBmbjtcbn1cblxuLyoqXG4gKiBDb21waWxlIHRoZSBkaXJlY3RpdmVzIG9uIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIGxpbmtlci5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fE5hbWVkTm9kZU1hcH0gYXR0cnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlRGlyZWN0aXZlcyhhdHRycywgb3B0aW9ucykge1xuICB2YXIgaSA9IGF0dHJzLmxlbmd0aDtcbiAgdmFyIGRpcnMgPSBbXTtcbiAgdmFyIGF0dHIsIG5hbWUsIHZhbHVlLCByYXdOYW1lLCByYXdWYWx1ZSwgZGlyTmFtZSwgYXJnLCBtb2RpZmllcnMsIGRpckRlZiwgdG9rZW5zLCBtYXRjaGVkO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgYXR0ciA9IGF0dHJzW2ldO1xuICAgIG5hbWUgPSByYXdOYW1lID0gYXR0ci5uYW1lO1xuICAgIHZhbHVlID0gcmF3VmFsdWUgPSBhdHRyLnZhbHVlO1xuICAgIHRva2VucyA9IHBhcnNlVGV4dCh2YWx1ZSk7XG4gICAgLy8gcmVzZXQgYXJnXG4gICAgYXJnID0gbnVsbDtcbiAgICAvLyBjaGVjayBtb2RpZmllcnNcbiAgICBtb2RpZmllcnMgPSBwYXJzZU1vZGlmaWVycyhuYW1lKTtcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKTtcblxuICAgIC8vIGF0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uc1xuICAgIGlmICh0b2tlbnMpIHtcbiAgICAgIHZhbHVlID0gdG9rZW5zVG9FeHAodG9rZW5zKTtcbiAgICAgIGFyZyA9IG5hbWU7XG4gICAgICBwdXNoRGlyKCdiaW5kJywgZGlyZWN0aXZlcy5iaW5kLCB0b2tlbnMpO1xuICAgICAgLy8gd2FybiBhZ2FpbnN0IG1peGluZyBtdXN0YWNoZXMgd2l0aCB2LWJpbmRcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmIChuYW1lID09PSAnY2xhc3MnICYmIEFycmF5LnByb3RvdHlwZS5zb21lLmNhbGwoYXR0cnMsIGZ1bmN0aW9uIChhdHRyKSB7XG4gICAgICAgICAgcmV0dXJuIGF0dHIubmFtZSA9PT0gJzpjbGFzcycgfHwgYXR0ci5uYW1lID09PSAndi1iaW5kOmNsYXNzJztcbiAgICAgICAgfSkpIHtcbiAgICAgICAgICB3YXJuKCdjbGFzcz1cIicgKyByYXdWYWx1ZSArICdcIjogRG8gbm90IG1peCBtdXN0YWNoZSBpbnRlcnBvbGF0aW9uICcgKyAnYW5kIHYtYmluZCBmb3IgXCJjbGFzc1wiIG9uIHRoZSBzYW1lIGVsZW1lbnQuIFVzZSBvbmUgb3IgdGhlIG90aGVyLicsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlXG5cbiAgICAgIC8vIHNwZWNpYWwgYXR0cmlidXRlOiB0cmFuc2l0aW9uXG4gICAgICBpZiAodHJhbnNpdGlvblJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgbW9kaWZpZXJzLmxpdGVyYWwgPSAhYmluZFJFLnRlc3QobmFtZSk7XG4gICAgICAgIHB1c2hEaXIoJ3RyYW5zaXRpb24nLCBpbnRlcm5hbERpcmVjdGl2ZXMudHJhbnNpdGlvbik7XG4gICAgICB9IGVsc2VcblxuICAgICAgICAvLyBldmVudCBoYW5kbGVyc1xuICAgICAgICBpZiAob25SRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgICAgYXJnID0gbmFtZS5yZXBsYWNlKG9uUkUsICcnKTtcbiAgICAgICAgICBwdXNoRGlyKCdvbicsIGRpcmVjdGl2ZXMub24pO1xuICAgICAgICB9IGVsc2VcblxuICAgICAgICAgIC8vIGF0dHJpYnV0ZSBiaW5kaW5nc1xuICAgICAgICAgIGlmIChiaW5kUkUudGVzdChuYW1lKSkge1xuICAgICAgICAgICAgZGlyTmFtZSA9IG5hbWUucmVwbGFjZShiaW5kUkUsICcnKTtcbiAgICAgICAgICAgIGlmIChkaXJOYW1lID09PSAnc3R5bGUnIHx8IGRpck5hbWUgPT09ICdjbGFzcycpIHtcbiAgICAgICAgICAgICAgcHVzaERpcihkaXJOYW1lLCBpbnRlcm5hbERpcmVjdGl2ZXNbZGlyTmFtZV0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYXJnID0gZGlyTmFtZTtcbiAgICAgICAgICAgICAgcHVzaERpcignYmluZCcsIGRpcmVjdGl2ZXMuYmluZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlXG5cbiAgICAgICAgICAgIC8vIG5vcm1hbCBkaXJlY3RpdmVzXG4gICAgICAgICAgICBpZiAobWF0Y2hlZCA9IG5hbWUubWF0Y2goZGlyQXR0clJFKSkge1xuICAgICAgICAgICAgICBkaXJOYW1lID0gbWF0Y2hlZFsxXTtcbiAgICAgICAgICAgICAgYXJnID0gbWF0Y2hlZFsyXTtcblxuICAgICAgICAgICAgICAvLyBza2lwIHYtZWxzZSAod2hlbiB1c2VkIHdpdGggdi1zaG93KVxuICAgICAgICAgICAgICBpZiAoZGlyTmFtZSA9PT0gJ2Vsc2UnKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBkaXJEZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBkaXJOYW1lLCB0cnVlKTtcbiAgICAgICAgICAgICAgaWYgKGRpckRlZikge1xuICAgICAgICAgICAgICAgIHB1c2hEaXIoZGlyTmFtZSwgZGlyRGVmKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFB1c2ggYSBkaXJlY3RpdmUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBkaXJOYW1lXG4gICAqIEBwYXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSBkZWZcbiAgICogQHBhcmFtIHtBcnJheX0gW2ludGVycFRva2Vuc11cbiAgICovXG5cbiAgZnVuY3Rpb24gcHVzaERpcihkaXJOYW1lLCBkZWYsIGludGVycFRva2Vucykge1xuICAgIHZhciBoYXNPbmVUaW1lVG9rZW4gPSBpbnRlcnBUb2tlbnMgJiYgaGFzT25lVGltZShpbnRlcnBUb2tlbnMpO1xuICAgIHZhciBwYXJzZWQgPSAhaGFzT25lVGltZVRva2VuICYmIHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcbiAgICBkaXJzLnB1c2goe1xuICAgICAgbmFtZTogZGlyTmFtZSxcbiAgICAgIGF0dHI6IHJhd05hbWUsXG4gICAgICByYXc6IHJhd1ZhbHVlLFxuICAgICAgZGVmOiBkZWYsXG4gICAgICBhcmc6IGFyZyxcbiAgICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLFxuICAgICAgLy8gY29udmVyc2lvbiBmcm9tIGludGVycG9sYXRpb24gc3RyaW5ncyB3aXRoIG9uZS10aW1lIHRva2VuXG4gICAgICAvLyB0byBleHByZXNzaW9uIGlzIGRpZmZlcmVkIHVudGlsIGRpcmVjdGl2ZSBiaW5kIHRpbWUgc28gdGhhdCB3ZVxuICAgICAgLy8gaGF2ZSBhY2Nlc3MgdG8gdGhlIGFjdHVhbCB2bSBjb250ZXh0IGZvciBvbmUtdGltZSBiaW5kaW5ncy5cbiAgICAgIGV4cHJlc3Npb246IHBhcnNlZCAmJiBwYXJzZWQuZXhwcmVzc2lvbixcbiAgICAgIGZpbHRlcnM6IHBhcnNlZCAmJiBwYXJzZWQuZmlsdGVycyxcbiAgICAgIGludGVycDogaW50ZXJwVG9rZW5zLFxuICAgICAgaGFzT25lVGltZTogaGFzT25lVGltZVRva2VuXG4gICAgfSk7XG4gIH1cblxuICBpZiAoZGlycy5sZW5ndGgpIHtcbiAgICByZXR1cm4gbWFrZU5vZGVMaW5rRm4oZGlycyk7XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZSBtb2RpZmllcnMgZnJvbSBkaXJlY3RpdmUgYXR0cmlidXRlIG5hbWUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZU1vZGlmaWVycyhuYW1lKSB7XG4gIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB2YXIgbWF0Y2ggPSBuYW1lLm1hdGNoKG1vZGlmaWVyUkUpO1xuICBpZiAobWF0Y2gpIHtcbiAgICB2YXIgaSA9IG1hdGNoLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICByZXNbbWF0Y2hbaV0uc2xpY2UoMSldID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBCdWlsZCBhIGxpbmsgZnVuY3Rpb24gZm9yIGFsbCBkaXJlY3RpdmVzIG9uIGEgc2luZ2xlIG5vZGUuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gZGlyZWN0aXZlc1xuICogQHJldHVybiB7RnVuY3Rpb259IGRpcmVjdGl2ZXNMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlTm9kZUxpbmtGbihkaXJlY3RpdmVzKSB7XG4gIHJldHVybiBmdW5jdGlvbiBub2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICAvLyByZXZlcnNlIGFwcGx5IGJlY2F1c2UgaXQncyBzb3J0ZWQgbG93IHRvIGhpZ2hcbiAgICB2YXIgaSA9IGRpcmVjdGl2ZXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZtLl9iaW5kRGlyKGRpcmVjdGl2ZXNbaV0sIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGludGVycG9sYXRpb24gc3RyaW5nIGNvbnRhaW5zIG9uZS10aW1lIHRva2Vucy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSB0b2tlbnNcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaGFzT25lVGltZSh0b2tlbnMpIHtcbiAgdmFyIGkgPSB0b2tlbnMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgaWYgKHRva2Vuc1tpXS5vbmVUaW1lKSByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1NjcmlwdChlbCkge1xuICByZXR1cm4gZWwudGFnTmFtZSA9PT0gJ1NDUklQVCcgJiYgKCFlbC5oYXNBdHRyaWJ1dGUoJ3R5cGUnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PT0gJ3RleHQvamF2YXNjcmlwdCcpO1xufVxuXG52YXIgc3BlY2lhbENoYXJSRSA9IC9bXlxcd1xcLTpcXC5dLztcblxuLyoqXG4gKiBQcm9jZXNzIGFuIGVsZW1lbnQgb3IgYSBEb2N1bWVudEZyYWdtZW50IGJhc2VkIG9uIGFcbiAqIGluc3RhbmNlIG9wdGlvbiBvYmplY3QuIFRoaXMgYWxsb3dzIHVzIHRvIHRyYW5zY2x1ZGVcbiAqIGEgdGVtcGxhdGUgbm9kZS9mcmFnbWVudCBiZWZvcmUgdGhlIGluc3RhbmNlIGlzIGNyZWF0ZWQsXG4gKiBzbyB0aGUgcHJvY2Vzc2VkIGZyYWdtZW50IGNhbiB0aGVuIGJlIGNsb25lZCBhbmQgcmV1c2VkXG4gKiBpbiB2LWZvci5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIHRyYW5zY2x1ZGUoZWwsIG9wdGlvbnMpIHtcbiAgLy8gZXh0cmFjdCBjb250YWluZXIgYXR0cmlidXRlcyB0byBwYXNzIHRoZW0gZG93blxuICAvLyB0byBjb21waWxlciwgYmVjYXVzZSB0aGV5IG5lZWQgdG8gYmUgY29tcGlsZWQgaW5cbiAgLy8gcGFyZW50IHNjb3BlLiB3ZSBhcmUgbXV0YXRpbmcgdGhlIG9wdGlvbnMgb2JqZWN0IGhlcmVcbiAgLy8gYXNzdW1pbmcgdGhlIHNhbWUgb2JqZWN0IHdpbGwgYmUgdXNlZCBmb3IgY29tcGlsZVxuICAvLyByaWdodCBhZnRlciB0aGlzLlxuICBpZiAob3B0aW9ucykge1xuICAgIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gZXh0cmFjdEF0dHJzKGVsKTtcbiAgfVxuICAvLyBmb3IgdGVtcGxhdGUgdGFncywgd2hhdCB3ZSB3YW50IGlzIGl0cyBjb250ZW50IGFzXG4gIC8vIGEgZG9jdW1lbnRGcmFnbWVudCAoZm9yIGZyYWdtZW50IGluc3RhbmNlcylcbiAgaWYgKGlzVGVtcGxhdGUoZWwpKSB7XG4gICAgZWwgPSBwYXJzZVRlbXBsYXRlKGVsKTtcbiAgfVxuICBpZiAob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCAmJiAhb3B0aW9ucy50ZW1wbGF0ZSkge1xuICAgICAgb3B0aW9ucy50ZW1wbGF0ZSA9ICc8c2xvdD48L3Nsb3Q+JztcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMudGVtcGxhdGUpIHtcbiAgICAgIG9wdGlvbnMuX2NvbnRlbnQgPSBleHRyYWN0Q29udGVudChlbCk7XG4gICAgICBlbCA9IHRyYW5zY2x1ZGVUZW1wbGF0ZShlbCwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG4gIGlmIChpc0ZyYWdtZW50KGVsKSkge1xuICAgIC8vIGFuY2hvcnMgZm9yIGZyYWdtZW50IGluc3RhbmNlXG4gICAgLy8gcGFzc2luZyBpbiBgcGVyc2lzdDogdHJ1ZWAgdG8gYXZvaWQgdGhlbSBiZWluZ1xuICAgIC8vIGRpc2NhcmRlZCBieSBJRSBkdXJpbmcgdGVtcGxhdGUgY2xvbmluZ1xuICAgIHByZXBlbmQoY3JlYXRlQW5jaG9yKCd2LXN0YXJ0JywgdHJ1ZSksIGVsKTtcbiAgICBlbC5hcHBlbmRDaGlsZChjcmVhdGVBbmNob3IoJ3YtZW5kJywgdHJ1ZSkpO1xuICB9XG4gIHJldHVybiBlbDtcbn1cblxuLyoqXG4gKiBQcm9jZXNzIHRoZSB0ZW1wbGF0ZSBvcHRpb24uXG4gKiBJZiB0aGUgcmVwbGFjZSBvcHRpb24gaXMgdHJ1ZSB0aGlzIHdpbGwgc3dhcCB0aGUgJGVsLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gdHJhbnNjbHVkZVRlbXBsYXRlKGVsLCBvcHRpb25zKSB7XG4gIHZhciB0ZW1wbGF0ZSA9IG9wdGlvbnMudGVtcGxhdGU7XG4gIHZhciBmcmFnID0gcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgdHJ1ZSk7XG4gIGlmIChmcmFnKSB7XG4gICAgdmFyIHJlcGxhY2VyID0gZnJhZy5maXJzdENoaWxkO1xuICAgIHZhciB0YWcgPSByZXBsYWNlci50YWdOYW1lICYmIHJlcGxhY2VyLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAob3B0aW9ucy5yZXBsYWNlKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChlbCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1lvdSBhcmUgbW91bnRpbmcgYW4gaW5zdGFuY2Ugd2l0aCBhIHRlbXBsYXRlIHRvICcgKyAnPGJvZHk+LiBUaGlzIHdpbGwgcmVwbGFjZSA8Ym9keT4gZW50aXJlbHkuIFlvdSAnICsgJ3Nob3VsZCBwcm9iYWJseSB1c2UgYHJlcGxhY2U6IGZhbHNlYCBoZXJlLicpO1xuICAgICAgfVxuICAgICAgLy8gdGhlcmUgYXJlIG1hbnkgY2FzZXMgd2hlcmUgdGhlIGluc3RhbmNlIG11c3RcbiAgICAgIC8vIGJlY29tZSBhIGZyYWdtZW50IGluc3RhbmNlOiBiYXNpY2FsbHkgYW55dGhpbmcgdGhhdFxuICAgICAgLy8gY2FuIGNyZWF0ZSBtb3JlIHRoYW4gMSByb290IG5vZGVzLlxuICAgICAgaWYgKFxuICAgICAgLy8gbXVsdGktY2hpbGRyZW4gdGVtcGxhdGVcbiAgICAgIGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPiAxIHx8XG4gICAgICAvLyBub24tZWxlbWVudCB0ZW1wbGF0ZVxuICAgICAgcmVwbGFjZXIubm9kZVR5cGUgIT09IDEgfHxcbiAgICAgIC8vIHNpbmdsZSBuZXN0ZWQgY29tcG9uZW50XG4gICAgICB0YWcgPT09ICdjb21wb25lbnQnIHx8IHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykgfHwgaGFzQmluZEF0dHIocmVwbGFjZXIsICdpcycpIHx8XG4gICAgICAvLyBlbGVtZW50IGRpcmVjdGl2ZVxuICAgICAgcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdlbGVtZW50RGlyZWN0aXZlcycsIHRhZykgfHxcbiAgICAgIC8vIGZvciBibG9ja1xuICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWZvcicpIHx8XG4gICAgICAvLyBpZiBibG9ja1xuICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcbiAgICAgICAgcmV0dXJuIGZyYWc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zLl9yZXBsYWNlckF0dHJzID0gZXh0cmFjdEF0dHJzKHJlcGxhY2VyKTtcbiAgICAgICAgbWVyZ2VBdHRycyhlbCwgcmVwbGFjZXIpO1xuICAgICAgICByZXR1cm4gcmVwbGFjZXI7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLmFwcGVuZENoaWxkKGZyYWcpO1xuICAgICAgcmV0dXJuIGVsO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgdGVtcGxhdGUgb3B0aW9uOiAnICsgdGVtcGxhdGUpO1xuICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGV4dHJhY3QgYSBjb21wb25lbnQgY29udGFpbmVyJ3MgYXR0cmlidXRlc1xuICogaW50byBhIHBsYWluIG9iamVjdCBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuXG5mdW5jdGlvbiBleHRyYWN0QXR0cnMoZWwpIHtcbiAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGVsLmhhc0F0dHJpYnV0ZXMoKSkge1xuICAgIHJldHVybiB0b0FycmF5KGVsLmF0dHJpYnV0ZXMpO1xuICB9XG59XG5cbi8qKlxuICogTWVyZ2UgdGhlIGF0dHJpYnV0ZXMgb2YgdHdvIGVsZW1lbnRzLCBhbmQgbWFrZSBzdXJlXG4gKiB0aGUgY2xhc3MgbmFtZXMgYXJlIG1lcmdlZCBwcm9wZXJseS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGZyb21cbiAqIEBwYXJhbSB7RWxlbWVudH0gdG9cbiAqL1xuXG5mdW5jdGlvbiBtZXJnZUF0dHJzKGZyb20sIHRvKSB7XG4gIHZhciBhdHRycyA9IGZyb20uYXR0cmlidXRlcztcbiAgdmFyIGkgPSBhdHRycy5sZW5ndGg7XG4gIHZhciBuYW1lLCB2YWx1ZTtcbiAgd2hpbGUgKGktLSkge1xuICAgIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuICAgIHZhbHVlID0gYXR0cnNbaV0udmFsdWU7XG4gICAgaWYgKCF0by5oYXNBdHRyaWJ1dGUobmFtZSkgJiYgIXNwZWNpYWxDaGFyUkUudGVzdChuYW1lKSkge1xuICAgICAgdG8uc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgIXBhcnNlVGV4dCh2YWx1ZSkgJiYgKHZhbHVlID0gdmFsdWUudHJpbSgpKSkge1xuICAgICAgdmFsdWUuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcbiAgICAgICAgYWRkQ2xhc3ModG8sIGNscyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBTY2FuIGFuZCBkZXRlcm1pbmUgc2xvdCBjb250ZW50IGRpc3RyaWJ1dGlvbi5cbiAqIFdlIGRvIHRoaXMgZHVyaW5nIHRyYW5zY2x1c2lvbiBpbnN0ZWFkIGF0IGNvbXBpbGUgdGltZSBzbyB0aGF0XG4gKiB0aGUgZGlzdHJpYnV0aW9uIGlzIGRlY291cGxlZCBmcm9tIHRoZSBjb21waWxhdGlvbiBvcmRlciBvZlxuICogdGhlIHNsb3RzLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSB0ZW1wbGF0ZVxuICogQHBhcmFtIHtFbGVtZW50fSBjb250ZW50XG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5mdW5jdGlvbiByZXNvbHZlU2xvdHModm0sIGNvbnRlbnQpIHtcbiAgaWYgKCFjb250ZW50KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBjb250ZW50cyA9IHZtLl9zbG90Q29udGVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB2YXIgZWwsIG5hbWU7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gY29udGVudC5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBlbCA9IGNvbnRlbnQuY2hpbGRyZW5baV07XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICBpZiAobmFtZSA9IGVsLmdldEF0dHJpYnV0ZSgnc2xvdCcpKSB7XG4gICAgICAoY29udGVudHNbbmFtZV0gfHwgKGNvbnRlbnRzW25hbWVdID0gW10pKS5wdXNoKGVsKTtcbiAgICB9XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGdldEJpbmRBdHRyKGVsLCAnc2xvdCcpKSB7XG4gICAgICB3YXJuKCdUaGUgXCJzbG90XCIgYXR0cmlidXRlIG11c3QgYmUgc3RhdGljLicsIHZtLiRwYXJlbnQpO1xuICAgIH1cbiAgfVxuICBmb3IgKG5hbWUgaW4gY29udGVudHMpIHtcbiAgICBjb250ZW50c1tuYW1lXSA9IGV4dHJhY3RGcmFnbWVudChjb250ZW50c1tuYW1lXSwgY29udGVudCk7XG4gIH1cbiAgaWYgKGNvbnRlbnQuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgdmFyIG5vZGVzID0gY29udGVudC5jaGlsZE5vZGVzO1xuICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDEgJiYgbm9kZXNbMF0ubm9kZVR5cGUgPT09IDMgJiYgIW5vZGVzWzBdLmRhdGEudHJpbSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnRlbnRzWydkZWZhdWx0J10gPSBleHRyYWN0RnJhZ21lbnQoY29udGVudC5jaGlsZE5vZGVzLCBjb250ZW50KTtcbiAgfVxufVxuXG4vKipcbiAqIEV4dHJhY3QgcXVhbGlmaWVkIGNvbnRlbnQgbm9kZXMgZnJvbSBhIG5vZGUgbGlzdC5cbiAqXG4gKiBAcGFyYW0ge05vZGVMaXN0fSBub2Rlc1xuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBleHRyYWN0RnJhZ21lbnQobm9kZXMsIHBhcmVudCkge1xuICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgbm9kZXMgPSB0b0FycmF5KG5vZGVzKTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB2YXIgbm9kZSA9IG5vZGVzW2ldO1xuICAgIGlmIChpc1RlbXBsYXRlKG5vZGUpICYmICFub2RlLmhhc0F0dHJpYnV0ZSgndi1pZicpICYmICFub2RlLmhhc0F0dHJpYnV0ZSgndi1mb3InKSkge1xuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgICAgbm9kZSA9IHBhcnNlVGVtcGxhdGUobm9kZSwgdHJ1ZSk7XG4gICAgfVxuICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZSk7XG4gIH1cbiAgcmV0dXJuIGZyYWc7XG59XG5cblxuXG52YXIgY29tcGlsZXIgPSBPYmplY3QuZnJlZXplKHtcblx0Y29tcGlsZTogY29tcGlsZSxcblx0Y29tcGlsZUFuZExpbmtQcm9wczogY29tcGlsZUFuZExpbmtQcm9wcyxcblx0Y29tcGlsZVJvb3Q6IGNvbXBpbGVSb290LFxuXHR0cmFuc2NsdWRlOiB0cmFuc2NsdWRlLFxuXHRyZXNvbHZlU2xvdHM6IHJlc29sdmVTbG90c1xufSk7XG5cbmZ1bmN0aW9uIHN0YXRlTWl4aW4gKFZ1ZSkge1xuICAvKipcbiAgICogQWNjZXNzb3IgZm9yIGAkZGF0YWAgcHJvcGVydHksIHNpbmNlIHNldHRpbmcgJGRhdGFcbiAgICogcmVxdWlyZXMgb2JzZXJ2aW5nIHRoZSBuZXcgb2JqZWN0IGFuZCB1cGRhdGluZ1xuICAgKiBwcm94aWVkIHByb3BlcnRpZXMuXG4gICAqL1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJGRhdGEnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld0RhdGEpIHtcbiAgICAgIGlmIChuZXdEYXRhICE9PSB0aGlzLl9kYXRhKSB7XG4gICAgICAgIHRoaXMuX3NldERhdGEobmV3RGF0YSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogU2V0dXAgdGhlIHNjb3BlIG9mIGFuIGluc3RhbmNlLCB3aGljaCBjb250YWluczpcbiAgICogLSBvYnNlcnZlZCBkYXRhXG4gICAqIC0gY29tcHV0ZWQgcHJvcGVydGllc1xuICAgKiAtIHVzZXIgbWV0aG9kc1xuICAgKiAtIG1ldGEgcHJvcGVydGllc1xuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5faW5pdFByb3BzKCk7XG4gICAgdGhpcy5faW5pdE1ldGEoKTtcbiAgICB0aGlzLl9pbml0TWV0aG9kcygpO1xuICAgIHRoaXMuX2luaXREYXRhKCk7XG4gICAgdGhpcy5faW5pdENvbXB1dGVkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgcHJvcHMuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRQcm9wcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG4gICAgdmFyIGVsID0gb3B0aW9ucy5lbDtcbiAgICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuICAgIGlmIChwcm9wcyAmJiAhZWwpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignUHJvcHMgd2lsbCBub3QgYmUgY29tcGlsZWQgaWYgbm8gYGVsYCBvcHRpb24gaXMgJyArICdwcm92aWRlZCBhdCBpbnN0YW50aWF0aW9uLicsIHRoaXMpO1xuICAgIH1cbiAgICAvLyBtYWtlIHN1cmUgdG8gY29udmVydCBzdHJpbmcgc2VsZWN0b3JzIGludG8gZWxlbWVudCBub3dcbiAgICBlbCA9IG9wdGlvbnMuZWwgPSBxdWVyeShlbCk7XG4gICAgdGhpcy5fcHJvcHNVbmxpbmtGbiA9IGVsICYmIGVsLm5vZGVUeXBlID09PSAxICYmIHByb3BzXG4gICAgLy8gcHJvcHMgbXVzdCBiZSBsaW5rZWQgaW4gcHJvcGVyIHNjb3BlIGlmIGluc2lkZSB2LWZvclxuICAgID8gY29tcGlsZUFuZExpbmtQcm9wcyh0aGlzLCBlbCwgcHJvcHMsIHRoaXMuX3Njb3BlKSA6IG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgdGhlIGRhdGEuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXREYXRhID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBkYXRhRm4gPSB0aGlzLiRvcHRpb25zLmRhdGE7XG4gICAgdmFyIGRhdGEgPSB0aGlzLl9kYXRhID0gZGF0YUZuID8gZGF0YUZuKCkgOiB7fTtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3QoZGF0YSkpIHtcbiAgICAgIGRhdGEgPSB7fTtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignZGF0YSBmdW5jdGlvbnMgc2hvdWxkIHJldHVybiBhbiBvYmplY3QuJywgdGhpcyk7XG4gICAgfVxuICAgIHZhciBwcm9wcyA9IHRoaXMuX3Byb3BzO1xuICAgIC8vIHByb3h5IGRhdGEgb24gaW5zdGFuY2VcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpO1xuICAgIHZhciBpLCBrZXk7XG4gICAgaSA9IGtleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAvLyB0aGVyZSBhcmUgdHdvIHNjZW5hcmlvcyB3aGVyZSB3ZSBjYW4gcHJveHkgYSBkYXRhIGtleTpcbiAgICAgIC8vIDEuIGl0J3Mgbm90IGFscmVhZHkgZGVmaW5lZCBhcyBhIHByb3BcbiAgICAgIC8vIDIuIGl0J3MgcHJvdmlkZWQgdmlhIGEgaW5zdGFudGlhdGlvbiBvcHRpb24gQU5EIHRoZXJlIGFyZSBub1xuICAgICAgLy8gICAgdGVtcGxhdGUgcHJvcCBwcmVzZW50XG4gICAgICBpZiAoIXByb3BzIHx8ICFoYXNPd24ocHJvcHMsIGtleSkpIHtcbiAgICAgICAgdGhpcy5fcHJveHkoa2V5KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuKCdEYXRhIGZpZWxkIFwiJyArIGtleSArICdcIiBpcyBhbHJlYWR5IGRlZmluZWQgJyArICdhcyBhIHByb3AuIFRvIHByb3ZpZGUgZGVmYXVsdCB2YWx1ZSBmb3IgYSBwcm9wLCB1c2UgdGhlIFwiZGVmYXVsdFwiICcgKyAncHJvcCBvcHRpb247IGlmIHlvdSB3YW50IHRvIHBhc3MgcHJvcCB2YWx1ZXMgdG8gYW4gaW5zdGFudGlhdGlvbiAnICsgJ2NhbGwsIHVzZSB0aGUgXCJwcm9wc0RhdGFcIiBvcHRpb24uJywgdGhpcyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIG9ic2VydmUgZGF0YVxuICAgIG9ic2VydmUoZGF0YSwgdGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN3YXAgdGhlIGluc3RhbmNlJ3MgJGRhdGEuIENhbGxlZCBpbiAkZGF0YSdzIHNldHRlci5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG5ld0RhdGFcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fc2V0RGF0YSA9IGZ1bmN0aW9uIChuZXdEYXRhKSB7XG4gICAgbmV3RGF0YSA9IG5ld0RhdGEgfHwge307XG4gICAgdmFyIG9sZERhdGEgPSB0aGlzLl9kYXRhO1xuICAgIHRoaXMuX2RhdGEgPSBuZXdEYXRhO1xuICAgIHZhciBrZXlzLCBrZXksIGk7XG4gICAgLy8gdW5wcm94eSBrZXlzIG5vdCBwcmVzZW50IGluIG5ldyBkYXRhXG4gICAga2V5cyA9IE9iamVjdC5rZXlzKG9sZERhdGEpO1xuICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYgKCEoa2V5IGluIG5ld0RhdGEpKSB7XG4gICAgICAgIHRoaXMuX3VucHJveHkoa2V5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gcHJveHkga2V5cyBub3QgYWxyZWFkeSBwcm94aWVkLFxuICAgIC8vIGFuZCB0cmlnZ2VyIGNoYW5nZSBmb3IgY2hhbmdlZCB2YWx1ZXNcbiAgICBrZXlzID0gT2JqZWN0LmtleXMobmV3RGF0YSk7XG4gICAgaSA9IGtleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICBpZiAoIWhhc093bih0aGlzLCBrZXkpKSB7XG4gICAgICAgIC8vIG5ldyBwcm9wZXJ0eVxuICAgICAgICB0aGlzLl9wcm94eShrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICBvbGREYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKTtcbiAgICBvYnNlcnZlKG5ld0RhdGEsIHRoaXMpO1xuICAgIHRoaXMuX2RpZ2VzdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcm94eSBhIHByb3BlcnR5LCBzbyB0aGF0XG4gICAqIHZtLnByb3AgPT09IHZtLl9kYXRhLnByb3BcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICBpZiAoIWlzUmVzZXJ2ZWQoa2V5KSkge1xuICAgICAgLy8gbmVlZCB0byBzdG9yZSByZWYgdG8gc2VsZiBoZXJlXG4gICAgICAvLyBiZWNhdXNlIHRoZXNlIGdldHRlci9zZXR0ZXJzIG1pZ2h0XG4gICAgICAvLyBiZSBjYWxsZWQgYnkgY2hpbGQgc2NvcGVzIHZpYVxuICAgICAgLy8gcHJvdG90eXBlIGluaGVyaXRhbmNlLlxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYsIGtleSwge1xuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldDogZnVuY3Rpb24gcHJveHlHZXR0ZXIoKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuX2RhdGFba2V5XTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBwcm94eVNldHRlcih2YWwpIHtcbiAgICAgICAgICBzZWxmLl9kYXRhW2tleV0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVW5wcm94eSBhIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX3VucHJveHkgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgaWYgKCFpc1Jlc2VydmVkKGtleSkpIHtcbiAgICAgIGRlbGV0ZSB0aGlzW2tleV07XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBGb3JjZSB1cGRhdGUgb24gZXZlcnkgd2F0Y2hlciBpbiBzY29wZS5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5fd2F0Y2hlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB0aGlzLl93YXRjaGVyc1tpXS51cGRhdGUodHJ1ZSk7IC8vIHNoYWxsb3cgdXBkYXRlc1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0dXAgY29tcHV0ZWQgcHJvcGVydGllcy4gVGhleSBhcmUgZXNzZW50aWFsbHlcbiAgICogc3BlY2lhbCBnZXR0ZXIvc2V0dGVyc1xuICAgKi9cblxuICBmdW5jdGlvbiBub29wKCkge31cbiAgVnVlLnByb3RvdHlwZS5faW5pdENvbXB1dGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjb21wdXRlZCA9IHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQ7XG4gICAgaWYgKGNvbXB1dGVkKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gY29tcHV0ZWQpIHtcbiAgICAgICAgdmFyIHVzZXJEZWYgPSBjb21wdXRlZFtrZXldO1xuICAgICAgICB2YXIgZGVmID0ge1xuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2YgdXNlckRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGRlZi5nZXQgPSBtYWtlQ29tcHV0ZWRHZXR0ZXIodXNlckRlZiwgdGhpcyk7XG4gICAgICAgICAgZGVmLnNldCA9IG5vb3A7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVmLmdldCA9IHVzZXJEZWYuZ2V0ID8gdXNlckRlZi5jYWNoZSAhPT0gZmFsc2UgPyBtYWtlQ29tcHV0ZWRHZXR0ZXIodXNlckRlZi5nZXQsIHRoaXMpIDogYmluZCh1c2VyRGVmLmdldCwgdGhpcykgOiBub29wO1xuICAgICAgICAgIGRlZi5zZXQgPSB1c2VyRGVmLnNldCA/IGJpbmQodXNlckRlZi5zZXQsIHRoaXMpIDogbm9vcDtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywga2V5LCBkZWYpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBtYWtlQ29tcHV0ZWRHZXR0ZXIoZ2V0dGVyLCBvd25lcikge1xuICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIob3duZXIsIGdldHRlciwgbnVsbCwge1xuICAgICAgbGF6eTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBmdW5jdGlvbiBjb21wdXRlZEdldHRlcigpIHtcbiAgICAgIGlmICh3YXRjaGVyLmRpcnR5KSB7XG4gICAgICAgIHdhdGNoZXIuZXZhbHVhdGUoKTtcbiAgICAgIH1cbiAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG4gICAgICAgIHdhdGNoZXIuZGVwZW5kKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gd2F0Y2hlci52YWx1ZTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGluc3RhbmNlIG1ldGhvZHMuIE1ldGhvZHMgbXVzdCBiZSBib3VuZCB0byB0aGVcbiAgICogaW5zdGFuY2Ugc2luY2UgdGhleSBtaWdodCBiZSBwYXNzZWQgZG93biBhcyBhIHByb3AgdG9cbiAgICogY2hpbGQgY29tcG9uZW50cy5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdE1ldGhvZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1ldGhvZHMgPSB0aGlzLiRvcHRpb25zLm1ldGhvZHM7XG4gICAgaWYgKG1ldGhvZHMpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBtZXRob2RzKSB7XG4gICAgICAgIHRoaXNba2V5XSA9IGJpbmQobWV0aG9kc1trZXldLCB0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgbWV0YSBpbmZvcm1hdGlvbiBsaWtlICRpbmRleCwgJGtleSAmICR2YWx1ZS5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdE1ldGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1ldGFzID0gdGhpcy4kb3B0aW9ucy5fbWV0YTtcbiAgICBpZiAobWV0YXMpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBtZXRhcykge1xuICAgICAgICBkZWZpbmVSZWFjdGl2ZSh0aGlzLCBrZXksIG1ldGFzW2tleV0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxudmFyIGV2ZW50UkUgPSAvXnYtb246fF5ALztcblxuZnVuY3Rpb24gZXZlbnRzTWl4aW4gKFZ1ZSkge1xuICAvKipcbiAgICogU2V0dXAgdGhlIGluc3RhbmNlJ3Mgb3B0aW9uIGV2ZW50cyAmIHdhdGNoZXJzLlxuICAgKiBJZiB0aGUgdmFsdWUgaXMgYSBzdHJpbmcsIHdlIHB1bGwgaXQgZnJvbSB0aGVcbiAgICogaW5zdGFuY2UncyBtZXRob2RzIGJ5IG5hbWUuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCkge1xuICAgICAgcmVnaXN0ZXJDb21wb25lbnRFdmVudHModGhpcywgb3B0aW9ucy5lbCk7XG4gICAgfVxuICAgIHJlZ2lzdGVyQ2FsbGJhY2tzKHRoaXMsICckb24nLCBvcHRpb25zLmV2ZW50cyk7XG4gICAgcmVnaXN0ZXJDYWxsYmFja3ModGhpcywgJyR3YXRjaCcsIG9wdGlvbnMud2F0Y2gpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlciB2LW9uIGV2ZW50cyBvbiBhIGNoaWxkIGNvbXBvbmVudFxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKi9cblxuICBmdW5jdGlvbiByZWdpc3RlckNvbXBvbmVudEV2ZW50cyh2bSwgZWwpIHtcbiAgICB2YXIgYXR0cnMgPSBlbC5hdHRyaWJ1dGVzO1xuICAgIHZhciBuYW1lLCB2YWx1ZSwgaGFuZGxlcjtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG4gICAgICBpZiAoZXZlbnRSRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoZXZlbnRSRSwgJycpO1xuICAgICAgICAvLyBmb3JjZSB0aGUgZXhwcmVzc2lvbiBpbnRvIGEgc3RhdGVtZW50IHNvIHRoYXRcbiAgICAgICAgLy8gaXQgYWx3YXlzIGR5bmFtaWNhbGx5IHJlc29sdmVzIHRoZSBtZXRob2QgdG8gY2FsbCAoIzI2NzApXG4gICAgICAgIC8vIGtpbmRhIHVnbHkgaGFjaywgYnV0IGRvZXMgdGhlIGpvYi5cbiAgICAgICAgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZTtcbiAgICAgICAgaWYgKGlzU2ltcGxlUGF0aCh2YWx1ZSkpIHtcbiAgICAgICAgICB2YWx1ZSArPSAnLmFwcGx5KHRoaXMsICRhcmd1bWVudHMpJztcbiAgICAgICAgfVxuICAgICAgICBoYW5kbGVyID0gKHZtLl9zY29wZSB8fCB2bS5fY29udGV4dCkuJGV2YWwodmFsdWUsIHRydWUpO1xuICAgICAgICBoYW5kbGVyLl9mcm9tUGFyZW50ID0gdHJ1ZTtcbiAgICAgICAgdm0uJG9uKG5hbWUucmVwbGFjZShldmVudFJFKSwgaGFuZGxlcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGNhbGxiYWNrcyBmb3Igb3B0aW9uIGV2ZW50cyBhbmQgd2F0Y2hlcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBoYXNoXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyQ2FsbGJhY2tzKHZtLCBhY3Rpb24sIGhhc2gpIHtcbiAgICBpZiAoIWhhc2gpIHJldHVybjtcbiAgICB2YXIgaGFuZGxlcnMsIGtleSwgaSwgajtcbiAgICBmb3IgKGtleSBpbiBoYXNoKSB7XG4gICAgICBoYW5kbGVycyA9IGhhc2hba2V5XTtcbiAgICAgIGlmIChpc0FycmF5KGhhbmRsZXJzKSkge1xuICAgICAgICBmb3IgKGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlcnMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgdG8gcmVnaXN0ZXIgYW4gZXZlbnQvd2F0Y2ggY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICogQHBhcmFtIHtGdW5jdGlvbnxTdHJpbmd8T2JqZWN0fSBoYW5kbGVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgdmFyIHR5cGUgPSB0eXBlb2YgaGFuZGxlcjtcbiAgICBpZiAodHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdm1bYWN0aW9uXShrZXksIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHZhciBtZXRob2RzID0gdm0uJG9wdGlvbnMubWV0aG9kcztcbiAgICAgIHZhciBtZXRob2QgPSBtZXRob2RzICYmIG1ldGhvZHNbaGFuZGxlcl07XG4gICAgICBpZiAobWV0aG9kKSB7XG4gICAgICAgIHZtW2FjdGlvbl0oa2V5LCBtZXRob2QsIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdVbmtub3duIG1ldGhvZDogXCInICsgaGFuZGxlciArICdcIiB3aGVuICcgKyAncmVnaXN0ZXJpbmcgY2FsbGJhY2sgZm9yICcgKyBhY3Rpb24gKyAnOiBcIicgKyBrZXkgKyAnXCIuJywgdm0pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaGFuZGxlciAmJiB0eXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLmhhbmRsZXIsIGhhbmRsZXIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCByZWN1cnNpdmUgYXR0YWNoZWQvZGV0YWNoZWQgY2FsbHNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdERPTUhvb2tzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuJG9uKCdob29rOmF0dGFjaGVkJywgb25BdHRhY2hlZCk7XG4gICAgdGhpcy4kb24oJ2hvb2s6ZGV0YWNoZWQnLCBvbkRldGFjaGVkKTtcbiAgfTtcblxuICAvKipcbiAgICogQ2FsbGJhY2sgdG8gcmVjdXJzaXZlbHkgY2FsbCBhdHRhY2hlZCBob29rIG9uIGNoaWxkcmVuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIG9uQXR0YWNoZWQoKSB7XG4gICAgaWYgKCF0aGlzLl9pc0F0dGFjaGVkKSB7XG4gICAgICB0aGlzLl9pc0F0dGFjaGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuJGNoaWxkcmVuLmZvckVhY2goY2FsbEF0dGFjaCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEl0ZXJhdG9yIHRvIGNhbGwgYXR0YWNoZWQgaG9va1xuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcbiAgICovXG5cbiAgZnVuY3Rpb24gY2FsbEF0dGFjaChjaGlsZCkge1xuICAgIGlmICghY2hpbGQuX2lzQXR0YWNoZWQgJiYgaW5Eb2MoY2hpbGQuJGVsKSkge1xuICAgICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0byByZWN1cnNpdmVseSBjYWxsIGRldGFjaGVkIGhvb2sgb24gY2hpbGRyZW5cbiAgICovXG5cbiAgZnVuY3Rpb24gb25EZXRhY2hlZCgpIHtcbiAgICBpZiAodGhpcy5faXNBdHRhY2hlZCkge1xuICAgICAgdGhpcy5faXNBdHRhY2hlZCA9IGZhbHNlO1xuICAgICAgdGhpcy4kY2hpbGRyZW4uZm9yRWFjaChjYWxsRGV0YWNoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSXRlcmF0b3IgdG8gY2FsbCBkZXRhY2hlZCBob29rXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuICAgKi9cblxuICBmdW5jdGlvbiBjYWxsRGV0YWNoKGNoaWxkKSB7XG4gICAgaWYgKGNoaWxkLl9pc0F0dGFjaGVkICYmICFpbkRvYyhjaGlsZC4kZWwpKSB7XG4gICAgICBjaGlsZC5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgYWxsIGhhbmRsZXJzIGZvciBhIGhvb2tcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGhvb2tcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fY2FsbEhvb2sgPSBmdW5jdGlvbiAoaG9vaykge1xuICAgIHRoaXMuJGVtaXQoJ3ByZS1ob29rOicgKyBob29rKTtcbiAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLiRvcHRpb25zW2hvb2tdO1xuICAgIGlmIChoYW5kbGVycykge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgaGFuZGxlcnNbaV0uY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy4kZW1pdCgnaG9vazonICsgaG9vayk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIG5vb3AkMSgpIHt9XG5cbi8qKlxuICogQSBkaXJlY3RpdmUgbGlua3MgYSBET00gZWxlbWVudCB3aXRoIGEgcGllY2Ugb2YgZGF0YSxcbiAqIHdoaWNoIGlzIHRoZSByZXN1bHQgb2YgZXZhbHVhdGluZyBhbiBleHByZXNzaW9uLlxuICogSXQgcmVnaXN0ZXJzIGEgd2F0Y2hlciB3aXRoIHRoZSBleHByZXNzaW9uIGFuZCBjYWxsc1xuICogdGhlIERPTSB1cGRhdGUgZnVuY3Rpb24gd2hlbiBhIGNoYW5nZSBpcyB0cmlnZ2VyZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3JcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IG5hbWVcbiAqICAgICAgICAgICAgICAgICAtIHtPYmplY3R9IGRlZlxuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gZXhwcmVzc2lvblxuICogICAgICAgICAgICAgICAgIC0ge0FycmF5PE9iamVjdD59IFtmaWx0ZXJzXVxuICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gW21vZGlmaWVyc11cbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBsaXRlcmFsXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBhdHRyXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBhcmdcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IHJhd1xuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gW3JlZl1cbiAqICAgICAgICAgICAgICAgICAtIHtBcnJheTxPYmplY3Q+fSBbaW50ZXJwXVxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtoYXNPbmVUaW1lXVxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge05vZGV9IGVsXG4gKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gdHJhbnNjbHVzaW9uIGhvc3QgY29tcG9uZW50XG4gKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG4gKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBvd25lciBmcmFnbWVudFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIERpcmVjdGl2ZShkZXNjcmlwdG9yLCB2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gIHRoaXMudm0gPSB2bTtcbiAgdGhpcy5lbCA9IGVsO1xuICAvLyBjb3B5IGRlc2NyaXB0b3IgcHJvcGVydGllc1xuICB0aGlzLmRlc2NyaXB0b3IgPSBkZXNjcmlwdG9yO1xuICB0aGlzLm5hbWUgPSBkZXNjcmlwdG9yLm5hbWU7XG4gIHRoaXMuZXhwcmVzc2lvbiA9IGRlc2NyaXB0b3IuZXhwcmVzc2lvbjtcbiAgdGhpcy5hcmcgPSBkZXNjcmlwdG9yLmFyZztcbiAgdGhpcy5tb2RpZmllcnMgPSBkZXNjcmlwdG9yLm1vZGlmaWVycztcbiAgdGhpcy5maWx0ZXJzID0gZGVzY3JpcHRvci5maWx0ZXJzO1xuICB0aGlzLmxpdGVyYWwgPSB0aGlzLm1vZGlmaWVycyAmJiB0aGlzLm1vZGlmaWVycy5saXRlcmFsO1xuICAvLyBwcml2YXRlXG4gIHRoaXMuX2xvY2tlZCA9IGZhbHNlO1xuICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xuICB0aGlzLl9saXN0ZW5lcnMgPSBudWxsO1xuICAvLyBsaW5rIGNvbnRleHRcbiAgdGhpcy5faG9zdCA9IGhvc3Q7XG4gIHRoaXMuX3Njb3BlID0gc2NvcGU7XG4gIHRoaXMuX2ZyYWcgPSBmcmFnO1xuICAvLyBzdG9yZSBkaXJlY3RpdmVzIG9uIG5vZGUgaW4gZGV2IG1vZGVcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbCkge1xuICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzID0gdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMgfHwgW107XG4gICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMucHVzaCh0aGlzKTtcbiAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemUgdGhlIGRpcmVjdGl2ZSwgbWl4aW4gZGVmaW5pdGlvbiBwcm9wZXJ0aWVzLFxuICogc2V0dXAgdGhlIHdhdGNoZXIsIGNhbGwgZGVmaW5pdGlvbiBiaW5kKCkgYW5kIHVwZGF0ZSgpXG4gKiBpZiBwcmVzZW50LlxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX2JpbmQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBuYW1lID0gdGhpcy5uYW1lO1xuICB2YXIgZGVzY3JpcHRvciA9IHRoaXMuZGVzY3JpcHRvcjtcblxuICAvLyByZW1vdmUgYXR0cmlidXRlXG4gIGlmICgobmFtZSAhPT0gJ2Nsb2FrJyB8fCB0aGlzLnZtLl9pc0NvbXBpbGVkKSAmJiB0aGlzLmVsICYmIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKSB7XG4gICAgdmFyIGF0dHIgPSBkZXNjcmlwdG9yLmF0dHIgfHwgJ3YtJyArIG5hbWU7XG4gICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gIH1cblxuICAvLyBjb3B5IGRlZiBwcm9wZXJ0aWVzXG4gIHZhciBkZWYgPSBkZXNjcmlwdG9yLmRlZjtcbiAgaWYgKHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICB0aGlzLnVwZGF0ZSA9IGRlZjtcbiAgfSBlbHNlIHtcbiAgICBleHRlbmQodGhpcywgZGVmKTtcbiAgfVxuXG4gIC8vIHNldHVwIGRpcmVjdGl2ZSBwYXJhbXNcbiAgdGhpcy5fc2V0dXBQYXJhbXMoKTtcblxuICAvLyBpbml0aWFsIGJpbmRcbiAgaWYgKHRoaXMuYmluZCkge1xuICAgIHRoaXMuYmluZCgpO1xuICB9XG4gIHRoaXMuX2JvdW5kID0gdHJ1ZTtcblxuICBpZiAodGhpcy5saXRlcmFsKSB7XG4gICAgdGhpcy51cGRhdGUgJiYgdGhpcy51cGRhdGUoZGVzY3JpcHRvci5yYXcpO1xuICB9IGVsc2UgaWYgKCh0aGlzLmV4cHJlc3Npb24gfHwgdGhpcy5tb2RpZmllcnMpICYmICh0aGlzLnVwZGF0ZSB8fCB0aGlzLnR3b1dheSkgJiYgIXRoaXMuX2NoZWNrU3RhdGVtZW50KCkpIHtcbiAgICAvLyB3cmFwcGVkIHVwZGF0ZXIgZm9yIGNvbnRleHRcbiAgICB2YXIgZGlyID0gdGhpcztcbiAgICBpZiAodGhpcy51cGRhdGUpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZSA9IGZ1bmN0aW9uICh2YWwsIG9sZFZhbCkge1xuICAgICAgICBpZiAoIWRpci5fbG9ja2VkKSB7XG4gICAgICAgICAgZGlyLnVwZGF0ZSh2YWwsIG9sZFZhbCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3VwZGF0ZSA9IG5vb3AkMTtcbiAgICB9XG4gICAgdmFyIHByZVByb2Nlc3MgPSB0aGlzLl9wcmVQcm9jZXNzID8gYmluZCh0aGlzLl9wcmVQcm9jZXNzLCB0aGlzKSA6IG51bGw7XG4gICAgdmFyIHBvc3RQcm9jZXNzID0gdGhpcy5fcG9zdFByb2Nlc3MgPyBiaW5kKHRoaXMuX3Bvc3RQcm9jZXNzLCB0aGlzKSA6IG51bGw7XG4gICAgdmFyIHdhdGNoZXIgPSB0aGlzLl93YXRjaGVyID0gbmV3IFdhdGNoZXIodGhpcy52bSwgdGhpcy5leHByZXNzaW9uLCB0aGlzLl91cGRhdGUsIC8vIGNhbGxiYWNrXG4gICAge1xuICAgICAgZmlsdGVyczogdGhpcy5maWx0ZXJzLFxuICAgICAgdHdvV2F5OiB0aGlzLnR3b1dheSxcbiAgICAgIGRlZXA6IHRoaXMuZGVlcCxcbiAgICAgIHByZVByb2Nlc3M6IHByZVByb2Nlc3MsXG4gICAgICBwb3N0UHJvY2VzczogcG9zdFByb2Nlc3MsXG4gICAgICBzY29wZTogdGhpcy5fc2NvcGVcbiAgICB9KTtcbiAgICAvLyB2LW1vZGVsIHdpdGggaW5pdGFsIGlubGluZSB2YWx1ZSBuZWVkIHRvIHN5bmMgYmFjayB0b1xuICAgIC8vIG1vZGVsIGluc3RlYWQgb2YgdXBkYXRlIHRvIERPTSBvbiBpbml0LiBUaGV5IHdvdWxkXG4gICAgLy8gc2V0IHRoZSBhZnRlckJpbmQgaG9vayB0byBpbmRpY2F0ZSB0aGF0LlxuICAgIGlmICh0aGlzLmFmdGVyQmluZCkge1xuICAgICAgdGhpcy5hZnRlckJpbmQoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMudXBkYXRlKSB7XG4gICAgICB0aGlzLnVwZGF0ZSh3YXRjaGVyLnZhbHVlKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogU2V0dXAgYWxsIHBhcmFtIGF0dHJpYnV0ZXMsIGUuZy4gdHJhY2stYnksXG4gKiB0cmFuc2l0aW9uLW1vZGUsIGV0Yy4uLlxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3NldHVwUGFyYW1zID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMucGFyYW1zKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBwYXJhbXMgPSB0aGlzLnBhcmFtcztcbiAgLy8gc3dhcCB0aGUgcGFyYW1zIGFycmF5IHdpdGggYSBmcmVzaCBvYmplY3QuXG4gIHRoaXMucGFyYW1zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdmFyIGkgPSBwYXJhbXMubGVuZ3RoO1xuICB2YXIga2V5LCB2YWwsIG1hcHBlZEtleTtcbiAgd2hpbGUgKGktLSkge1xuICAgIGtleSA9IGh5cGhlbmF0ZShwYXJhbXNbaV0pO1xuICAgIG1hcHBlZEtleSA9IGNhbWVsaXplKGtleSk7XG4gICAgdmFsID0gZ2V0QmluZEF0dHIodGhpcy5lbCwga2V5KTtcbiAgICBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgIC8vIGR5bmFtaWNcbiAgICAgIHRoaXMuX3NldHVwUGFyYW1XYXRjaGVyKG1hcHBlZEtleSwgdmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gc3RhdGljXG4gICAgICB2YWwgPSBnZXRBdHRyKHRoaXMuZWwsIGtleSk7XG4gICAgICBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5wYXJhbXNbbWFwcGVkS2V5XSA9IHZhbCA9PT0gJycgPyB0cnVlIDogdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBTZXR1cCBhIHdhdGNoZXIgZm9yIGEgZHluYW1pYyBwYXJhbS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwcmVzc2lvblxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3NldHVwUGFyYW1XYXRjaGVyID0gZnVuY3Rpb24gKGtleSwgZXhwcmVzc2lvbikge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBjYWxsZWQgPSBmYWxzZTtcbiAgdmFyIHVud2F0Y2ggPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHdhdGNoKGV4cHJlc3Npb24sIGZ1bmN0aW9uICh2YWwsIG9sZFZhbCkge1xuICAgIHNlbGYucGFyYW1zW2tleV0gPSB2YWw7XG4gICAgLy8gc2luY2Ugd2UgYXJlIGluIGltbWVkaWF0ZSBtb2RlLFxuICAgIC8vIG9ubHkgY2FsbCB0aGUgcGFyYW0gY2hhbmdlIGNhbGxiYWNrcyBpZiB0aGlzIGlzIG5vdCB0aGUgZmlyc3QgdXBkYXRlLlxuICAgIGlmIChjYWxsZWQpIHtcbiAgICAgIHZhciBjYiA9IHNlbGYucGFyYW1XYXRjaGVycyAmJiBzZWxmLnBhcmFtV2F0Y2hlcnNba2V5XTtcbiAgICAgIGlmIChjYikge1xuICAgICAgICBjYi5jYWxsKHNlbGYsIHZhbCwgb2xkVmFsKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBpbW1lZGlhdGU6IHRydWUsXG4gICAgdXNlcjogZmFsc2VcbiAgfSk7KHRoaXMuX3BhcmFtVW53YXRjaEZucyB8fCAodGhpcy5fcGFyYW1VbndhdGNoRm5zID0gW10pKS5wdXNoKHVud2F0Y2gpO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgZGlyZWN0aXZlIGlzIGEgZnVuY3Rpb24gY2FsbGVyXG4gKiBhbmQgaWYgdGhlIGV4cHJlc3Npb24gaXMgYSBjYWxsYWJsZSBvbmUuIElmIGJvdGggdHJ1ZSxcbiAqIHdlIHdyYXAgdXAgdGhlIGV4cHJlc3Npb24gYW5kIHVzZSBpdCBhcyB0aGUgZXZlbnRcbiAqIGhhbmRsZXIuXG4gKlxuICogZS5nLiBvbi1jbGljaz1cImErK1wiXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl9jaGVja1N0YXRlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGV4cHJlc3Npb24gPSB0aGlzLmV4cHJlc3Npb247XG4gIGlmIChleHByZXNzaW9uICYmIHRoaXMuYWNjZXB0U3RhdGVtZW50ICYmICFpc1NpbXBsZVBhdGgoZXhwcmVzc2lvbikpIHtcbiAgICB2YXIgZm4gPSBwYXJzZUV4cHJlc3Npb24oZXhwcmVzc2lvbikuZ2V0O1xuICAgIHZhciBzY29wZSA9IHRoaXMuX3Njb3BlIHx8IHRoaXMudm07XG4gICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyKGUpIHtcbiAgICAgIHNjb3BlLiRldmVudCA9IGU7XG4gICAgICBmbi5jYWxsKHNjb3BlLCBzY29wZSk7XG4gICAgICBzY29wZS4kZXZlbnQgPSBudWxsO1xuICAgIH07XG4gICAgaWYgKHRoaXMuZmlsdGVycykge1xuICAgICAgaGFuZGxlciA9IHNjb3BlLl9hcHBseUZpbHRlcnMoaGFuZGxlciwgbnVsbCwgdGhpcy5maWx0ZXJzKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGUoaGFuZGxlcik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07XG5cbi8qKlxuICogU2V0IHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIHdpdGggdGhlIHNldHRlci5cbiAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0d28td2F5IGRpcmVjdGl2ZXNcbiAqIGUuZy4gdi1tb2RlbC5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcHVibGljXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKHRoaXMudHdvV2F5KSB7XG4gICAgdGhpcy5fd2l0aExvY2soZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fd2F0Y2hlci5zZXQodmFsdWUpO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB3YXJuKCdEaXJlY3RpdmUuc2V0KCkgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgdHdvV2F5JyArICdkaXJlY3RpdmVzLicpO1xuICB9XG59O1xuXG4vKipcbiAqIEV4ZWN1dGUgYSBmdW5jdGlvbiB3aGlsZSBwcmV2ZW50aW5nIHRoYXQgZnVuY3Rpb24gZnJvbVxuICogdHJpZ2dlcmluZyB1cGRhdGVzIG9uIHRoaXMgZGlyZWN0aXZlIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fd2l0aExvY2sgPSBmdW5jdGlvbiAoZm4pIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBzZWxmLl9sb2NrZWQgPSB0cnVlO1xuICBmbi5jYWxsKHNlbGYpO1xuICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgc2VsZi5fbG9ja2VkID0gZmFsc2U7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBDb252ZW5pZW5jZSBtZXRob2QgdGhhdCBhdHRhY2hlcyBhIERPTSBldmVudCBsaXN0ZW5lclxuICogdG8gdGhlIGRpcmVjdGl2ZSBlbGVtZW50IGFuZCBhdXRvbWV0aWNhbGx5IHRlYXJzIGl0IGRvd25cbiAqIGR1cmluZyB1bmJpbmQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VDYXB0dXJlXVxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnQsIGhhbmRsZXIsIHVzZUNhcHR1cmUpIHtcbiAgb24odGhpcy5lbCwgZXZlbnQsIGhhbmRsZXIsIHVzZUNhcHR1cmUpOyh0aGlzLl9saXN0ZW5lcnMgfHwgKHRoaXMuX2xpc3RlbmVycyA9IFtdKSkucHVzaChbZXZlbnQsIGhhbmRsZXJdKTtcbn07XG5cbi8qKlxuICogVGVhcmRvd24gdGhlIHdhdGNoZXIgYW5kIGNhbGwgdW5iaW5kLlxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3RlYXJkb3duID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5fYm91bmQpIHtcbiAgICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xuICAgIGlmICh0aGlzLnVuYmluZCkge1xuICAgICAgdGhpcy51bmJpbmQoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3dhdGNoZXIpIHtcbiAgICAgIHRoaXMuX3dhdGNoZXIudGVhcmRvd24oKTtcbiAgICB9XG4gICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcbiAgICB2YXIgaTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICBpID0gbGlzdGVuZXJzLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgb2ZmKHRoaXMuZWwsIGxpc3RlbmVyc1tpXVswXSwgbGlzdGVuZXJzW2ldWzFdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIHVud2F0Y2hGbnMgPSB0aGlzLl9wYXJhbVVud2F0Y2hGbnM7XG4gICAgaWYgKHVud2F0Y2hGbnMpIHtcbiAgICAgIGkgPSB1bndhdGNoRm5zLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdW53YXRjaEZuc1tpXSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsKSB7XG4gICAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcy4kcmVtb3ZlKHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLnZtID0gdGhpcy5lbCA9IHRoaXMuX3dhdGNoZXIgPSB0aGlzLl9saXN0ZW5lcnMgPSBudWxsO1xuICB9XG59O1xuXG5mdW5jdGlvbiBsaWZlY3ljbGVNaXhpbiAoVnVlKSB7XG4gIC8qKlxuICAgKiBVcGRhdGUgdi1yZWYgZm9yIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fdXBkYXRlUmVmID0gZnVuY3Rpb24gKHJlbW92ZSkge1xuICAgIHZhciByZWYgPSB0aGlzLiRvcHRpb25zLl9yZWY7XG4gICAgaWYgKHJlZikge1xuICAgICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy5fY29udGV4dCkuJHJlZnM7XG4gICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgIGlmIChyZWZzW3JlZl0gPT09IHRoaXMpIHtcbiAgICAgICAgICByZWZzW3JlZl0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWZzW3JlZl0gPSB0aGlzO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVHJhbnNjbHVkZSwgY29tcGlsZSBhbmQgbGluayBlbGVtZW50LlxuICAgKlxuICAgKiBJZiBhIHByZS1jb21waWxlZCBsaW5rZXIgaXMgYXZhaWxhYmxlLCB0aGF0IG1lYW5zIHRoZVxuICAgKiBwYXNzZWQgaW4gZWxlbWVudCB3aWxsIGJlIHByZS10cmFuc2NsdWRlZCBhbmQgY29tcGlsZWRcbiAgICogYXMgd2VsbCAtIGFsbCB3ZSBuZWVkIHRvIGRvIGlzIHRvIGNhbGwgdGhlIGxpbmtlci5cbiAgICpcbiAgICogT3RoZXJ3aXNlIHdlIG5lZWQgdG8gY2FsbCB0cmFuc2NsdWRlL2NvbXBpbGUvbGluayBoZXJlLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2NvbXBpbGUgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG5cbiAgICAvLyB0cmFuc2NsdWRlIGFuZCBpbml0IGVsZW1lbnRcbiAgICAvLyB0cmFuc2NsdWRlIGNhbiBwb3RlbnRpYWxseSByZXBsYWNlIG9yaWdpbmFsXG4gICAgLy8gc28gd2UgbmVlZCB0byBrZWVwIHJlZmVyZW5jZTsgdGhpcyBzdGVwIGFsc28gaW5qZWN0c1xuICAgIC8vIHRoZSB0ZW1wbGF0ZSBhbmQgY2FjaGVzIHRoZSBvcmlnaW5hbCBhdHRyaWJ1dGVzXG4gICAgLy8gb24gdGhlIGNvbnRhaW5lciBub2RlIGFuZCByZXBsYWNlciBub2RlLlxuICAgIHZhciBvcmlnaW5hbCA9IGVsO1xuICAgIGVsID0gdHJhbnNjbHVkZShlbCwgb3B0aW9ucyk7XG4gICAgdGhpcy5faW5pdEVsZW1lbnQoZWwpO1xuXG4gICAgLy8gaGFuZGxlIHYtcHJlIG9uIHJvb3Qgbm9kZSAoIzIwMjYpXG4gICAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGdldEF0dHIoZWwsICd2LXByZScpICE9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gcm9vdCBpcyBhbHdheXMgY29tcGlsZWQgcGVyLWluc3RhbmNlLCBiZWNhdXNlXG4gICAgLy8gY29udGFpbmVyIGF0dHJzIGFuZCBwcm9wcyBjYW4gYmUgZGlmZmVyZW50IGV2ZXJ5IHRpbWUuXG4gICAgdmFyIGNvbnRleHRPcHRpb25zID0gdGhpcy5fY29udGV4dCAmJiB0aGlzLl9jb250ZXh0LiRvcHRpb25zO1xuICAgIHZhciByb290TGlua2VyID0gY29tcGlsZVJvb3QoZWwsIG9wdGlvbnMsIGNvbnRleHRPcHRpb25zKTtcblxuICAgIC8vIHJlc29sdmUgc2xvdCBkaXN0cmlidXRpb25cbiAgICByZXNvbHZlU2xvdHModGhpcywgb3B0aW9ucy5fY29udGVudCk7XG5cbiAgICAvLyBjb21waWxlIGFuZCBsaW5rIHRoZSByZXN0XG4gICAgdmFyIGNvbnRlbnRMaW5rRm47XG4gICAgdmFyIGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgIC8vIGNvbXBvbmVudCBjb21waWxhdGlvbiBjYW4gYmUgY2FjaGVkXG4gICAgLy8gYXMgbG9uZyBhcyBpdCdzIG5vdCB1c2luZyBpbmxpbmUtdGVtcGxhdGVcbiAgICBpZiAob3B0aW9ucy5fbGlua2VyQ2FjaGFibGUpIHtcbiAgICAgIGNvbnRlbnRMaW5rRm4gPSBjdG9yLmxpbmtlcjtcbiAgICAgIGlmICghY29udGVudExpbmtGbikge1xuICAgICAgICBjb250ZW50TGlua0ZuID0gY3Rvci5saW5rZXIgPSBjb21waWxlKGVsLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBsaW5rIHBoYXNlXG4gICAgLy8gbWFrZSBzdXJlIHRvIGxpbmsgcm9vdCB3aXRoIHByb3Agc2NvcGUhXG4gICAgdmFyIHJvb3RVbmxpbmtGbiA9IHJvb3RMaW5rZXIodGhpcywgZWwsIHRoaXMuX3Njb3BlKTtcbiAgICB2YXIgY29udGVudFVubGlua0ZuID0gY29udGVudExpbmtGbiA/IGNvbnRlbnRMaW5rRm4odGhpcywgZWwpIDogY29tcGlsZShlbCwgb3B0aW9ucykodGhpcywgZWwpO1xuXG4gICAgLy8gcmVnaXN0ZXIgY29tcG9zaXRlIHVubGluayBmdW5jdGlvblxuICAgIC8vIHRvIGJlIGNhbGxlZCBkdXJpbmcgaW5zdGFuY2UgZGVzdHJ1Y3Rpb25cbiAgICB0aGlzLl91bmxpbmtGbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJvb3RVbmxpbmtGbigpO1xuICAgICAgLy8gcGFzc2luZyBkZXN0cm95aW5nOiB0cnVlIHRvIGF2b2lkIHNlYXJjaGluZyBhbmRcbiAgICAgIC8vIHNwbGljaW5nIHRoZSBkaXJlY3RpdmVzXG4gICAgICBjb250ZW50VW5saW5rRm4odHJ1ZSk7XG4gICAgfTtcblxuICAgIC8vIGZpbmFsbHkgcmVwbGFjZSBvcmlnaW5hbFxuICAgIGlmIChvcHRpb25zLnJlcGxhY2UpIHtcbiAgICAgIHJlcGxhY2Uob3JpZ2luYWwsIGVsKTtcbiAgICB9XG5cbiAgICB0aGlzLl9pc0NvbXBpbGVkID0gdHJ1ZTtcbiAgICB0aGlzLl9jYWxsSG9vaygnY29tcGlsZWQnKTtcbiAgfTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBpbnN0YW5jZSBlbGVtZW50LiBDYWxsZWQgaW4gdGhlIHB1YmxpY1xuICAgKiAkbW91bnQoKSBtZXRob2QuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICBpZiAoaXNGcmFnbWVudChlbCkpIHtcbiAgICAgIHRoaXMuX2lzRnJhZ21lbnQgPSB0cnVlO1xuICAgICAgdGhpcy4kZWwgPSB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gZWwuZmlyc3RDaGlsZDtcbiAgICAgIHRoaXMuX2ZyYWdtZW50RW5kID0gZWwubGFzdENoaWxkO1xuICAgICAgLy8gc2V0IHBlcnNpc3RlZCB0ZXh0IGFuY2hvcnMgdG8gZW1wdHlcbiAgICAgIGlmICh0aGlzLl9mcmFnbWVudFN0YXJ0Lm5vZGVUeXBlID09PSAzKSB7XG4gICAgICAgIHRoaXMuX2ZyYWdtZW50U3RhcnQuZGF0YSA9IHRoaXMuX2ZyYWdtZW50RW5kLmRhdGEgPSAnJztcbiAgICAgIH1cbiAgICAgIHRoaXMuX2ZyYWdtZW50ID0gZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJGVsID0gZWw7XG4gICAgfVxuICAgIHRoaXMuJGVsLl9fdnVlX18gPSB0aGlzO1xuICAgIHRoaXMuX2NhbGxIb29rKCdiZWZvcmVDb21waWxlJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbmQgYmluZCBhIGRpcmVjdGl2ZSB0byBhbiBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGVzY3JpcHRvciAtIHBhcnNlZCBkaXJlY3RpdmUgZGVzY3JpcHRvclxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgICAtIHRhcmdldCBub2RlXG4gICAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSB0cmFuc2NsdXNpb24gaG9zdCBjb21wb25lbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBvd25lciBmcmFnbWVudFxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9iaW5kRGlyID0gZnVuY3Rpb24gKGRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgdGhpcy5fZGlyZWN0aXZlcy5wdXNoKG5ldyBEaXJlY3RpdmUoZGVzY3JpcHRvciwgdGhpcywgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpKTtcbiAgfTtcblxuICAvKipcbiAgICogVGVhcmRvd24gYW4gaW5zdGFuY2UsIHVub2JzZXJ2ZXMgdGhlIGRhdGEsIHVuYmluZCBhbGwgdGhlXG4gICAqIGRpcmVjdGl2ZXMsIHR1cm4gb2ZmIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzLCBldGMuXG4gICAqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlIC0gd2hldGhlciB0byByZW1vdmUgdGhlIERPTSBub2RlLlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cCAtIGlmIHRydWUsIGRlZmVyIGNsZWFudXAgdG9cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZSBjYWxsZWQgbGF0ZXJcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChyZW1vdmUsIGRlZmVyQ2xlYW51cCkge1xuICAgIGlmICh0aGlzLl9pc0JlaW5nRGVzdHJveWVkKSB7XG4gICAgICBpZiAoIWRlZmVyQ2xlYW51cCkge1xuICAgICAgICB0aGlzLl9jbGVhbnVwKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGRlc3Ryb3lSZWFkeTtcbiAgICB2YXIgcGVuZGluZ1JlbW92YWw7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy8gQ2xlYW51cCBzaG91bGQgYmUgY2FsbGVkIGVpdGhlciBzeW5jaHJvbm91c2x5IG9yIGFzeW5jaHJvbm95c2x5IGFzXG4gICAgLy8gY2FsbGJhY2sgb2YgdGhpcy4kcmVtb3ZlKCksIG9yIGlmIHJlbW92ZSBhbmQgZGVmZXJDbGVhbnVwIGFyZSBmYWxzZS5cbiAgICAvLyBJbiBhbnkgY2FzZSBpdCBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIGFsbCBvdGhlciByZW1vdmluZywgdW5iaW5kaW5nIGFuZFxuICAgIC8vIHR1cm5pbmcgb2YgaXMgZG9uZVxuICAgIHZhciBjbGVhbnVwSWZQb3NzaWJsZSA9IGZ1bmN0aW9uIGNsZWFudXBJZlBvc3NpYmxlKCkge1xuICAgICAgaWYgKGRlc3Ryb3lSZWFkeSAmJiAhcGVuZGluZ1JlbW92YWwgJiYgIWRlZmVyQ2xlYW51cCkge1xuICAgICAgICBzZWxmLl9jbGVhbnVwKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIHJlbW92ZSBET00gZWxlbWVudFxuICAgIGlmIChyZW1vdmUgJiYgdGhpcy4kZWwpIHtcbiAgICAgIHBlbmRpbmdSZW1vdmFsID0gdHJ1ZTtcbiAgICAgIHRoaXMuJHJlbW92ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHBlbmRpbmdSZW1vdmFsID0gZmFsc2U7XG4gICAgICAgIGNsZWFudXBJZlBvc3NpYmxlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLl9jYWxsSG9vaygnYmVmb3JlRGVzdHJveScpO1xuICAgIHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgPSB0cnVlO1xuICAgIHZhciBpO1xuICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gcGFyZW50LiBvbmx5IG5lY2Vzc2FyeVxuICAgIC8vIGlmIHBhcmVudCBpcyBub3QgYmVpbmcgZGVzdHJveWVkIGFzIHdlbGwuXG4gICAgdmFyIHBhcmVudCA9IHRoaXMuJHBhcmVudDtcbiAgICBpZiAocGFyZW50ICYmICFwYXJlbnQuX2lzQmVpbmdEZXN0cm95ZWQpIHtcbiAgICAgIHBhcmVudC4kY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcbiAgICAgIC8vIHVucmVnaXN0ZXIgcmVmIChyZW1vdmU6IHRydWUpXG4gICAgICB0aGlzLl91cGRhdGVSZWYodHJ1ZSk7XG4gICAgfVxuICAgIC8vIGRlc3Ryb3kgYWxsIGNoaWxkcmVuLlxuICAgIGkgPSB0aGlzLiRjaGlsZHJlbi5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdGhpcy4kY2hpbGRyZW5baV0uJGRlc3Ryb3koKTtcbiAgICB9XG4gICAgLy8gdGVhcmRvd24gcHJvcHNcbiAgICBpZiAodGhpcy5fcHJvcHNVbmxpbmtGbikge1xuICAgICAgdGhpcy5fcHJvcHNVbmxpbmtGbigpO1xuICAgIH1cbiAgICAvLyB0ZWFyZG93biBhbGwgZGlyZWN0aXZlcy4gdGhpcyBhbHNvIHRlYXJzZG93biBhbGxcbiAgICAvLyBkaXJlY3RpdmUtb3duZWQgd2F0Y2hlcnMuXG4gICAgaWYgKHRoaXMuX3VubGlua0ZuKSB7XG4gICAgICB0aGlzLl91bmxpbmtGbigpO1xuICAgIH1cbiAgICBpID0gdGhpcy5fd2F0Y2hlcnMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHRoaXMuX3dhdGNoZXJzW2ldLnRlYXJkb3duKCk7XG4gICAgfVxuICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgdG8gc2VsZiBvbiAkZWxcbiAgICBpZiAodGhpcy4kZWwpIHtcbiAgICAgIHRoaXMuJGVsLl9fdnVlX18gPSBudWxsO1xuICAgIH1cblxuICAgIGRlc3Ryb3lSZWFkeSA9IHRydWU7XG4gICAgY2xlYW51cElmUG9zc2libGUoKTtcbiAgfTtcblxuICAvKipcbiAgICogQ2xlYW4gdXAgdG8gZW5zdXJlIGdhcmJhZ2UgY29sbGVjdGlvbi5cbiAgICogVGhpcyBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGxlYXZlIHRyYW5zaXRpb24gaWYgdGhlcmVcbiAgICogaXMgYW55LlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9pc0Rlc3Ryb3llZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyByZW1vdmUgc2VsZiBmcm9tIG93bmVyIGZyYWdtZW50XG4gICAgLy8gZG8gaXQgaW4gY2xlYW51cCBzbyB0aGF0IHdlIGNhbiBjYWxsICRkZXN0cm95IHdpdGhcbiAgICAvLyBkZWZlciByaWdodCB3aGVuIGEgZnJhZ21lbnQgaXMgYWJvdXQgdG8gYmUgcmVtb3ZlZC5cbiAgICBpZiAodGhpcy5fZnJhZykge1xuICAgICAgdGhpcy5fZnJhZy5jaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xuICAgIH1cbiAgICAvLyByZW1vdmUgcmVmZXJlbmNlIGZyb20gZGF0YSBvYlxuICAgIC8vIGZyb3plbiBvYmplY3QgbWF5IG5vdCBoYXZlIG9ic2VydmVyLlxuICAgIGlmICh0aGlzLl9kYXRhICYmIHRoaXMuX2RhdGEuX19vYl9fKSB7XG4gICAgICB0aGlzLl9kYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKTtcbiAgICB9XG4gICAgLy8gQ2xlYW4gdXAgcmVmZXJlbmNlcyB0byBwcml2YXRlIHByb3BlcnRpZXMgYW5kIG90aGVyXG4gICAgLy8gaW5zdGFuY2VzLiBwcmVzZXJ2ZSByZWZlcmVuY2UgdG8gX2RhdGEgc28gdGhhdCBwcm94eVxuICAgIC8vIGFjY2Vzc29ycyBzdGlsbCB3b3JrLiBUaGUgb25seSBwb3RlbnRpYWwgc2lkZSBlZmZlY3RcbiAgICAvLyBoZXJlIGlzIHRoYXQgbXV0YXRpbmcgdGhlIGluc3RhbmNlIGFmdGVyIGl0J3MgZGVzdHJveWVkXG4gICAgLy8gbWF5IGFmZmVjdCB0aGUgc3RhdGUgb2Ygb3RoZXIgY29tcG9uZW50cyB0aGF0IGFyZSBzdGlsbFxuICAgIC8vIG9ic2VydmluZyB0aGUgc2FtZSBvYmplY3QsIGJ1dCB0aGF0IHNlZW1zIHRvIGJlIGFcbiAgICAvLyByZWFzb25hYmxlIHJlc3BvbnNpYmlsaXR5IGZvciB0aGUgdXNlciByYXRoZXIgdGhhblxuICAgIC8vIGFsd2F5cyB0aHJvd2luZyBhbiBlcnJvciBvbiB0aGVtLlxuICAgIHRoaXMuJGVsID0gdGhpcy4kcGFyZW50ID0gdGhpcy4kcm9vdCA9IHRoaXMuJGNoaWxkcmVuID0gdGhpcy5fd2F0Y2hlcnMgPSB0aGlzLl9jb250ZXh0ID0gdGhpcy5fc2NvcGUgPSB0aGlzLl9kaXJlY3RpdmVzID0gbnVsbDtcbiAgICAvLyBjYWxsIHRoZSBsYXN0IGhvb2suLi5cbiAgICB0aGlzLl9pc0Rlc3Ryb3llZCA9IHRydWU7XG4gICAgdGhpcy5fY2FsbEhvb2soJ2Rlc3Ryb3llZCcpO1xuICAgIC8vIHR1cm4gb2ZmIGFsbCBpbnN0YW5jZSBsaXN0ZW5lcnMuXG4gICAgdGhpcy4kb2ZmKCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIG1pc2NNaXhpbiAoVnVlKSB7XG4gIC8qKlxuICAgKiBBcHBseSBhIGxpc3Qgb2YgZmlsdGVyIChkZXNjcmlwdG9ycykgdG8gYSB2YWx1ZS5cbiAgICogVXNpbmcgcGxhaW4gZm9yIGxvb3BzIGhlcmUgYmVjYXVzZSB0aGlzIHdpbGwgYmUgY2FsbGVkIGluXG4gICAqIHRoZSBnZXR0ZXIgb2YgYW55IHdhdGNoZXIgd2l0aCBmaWx0ZXJzIHNvIGl0IGlzIHZlcnlcbiAgICogcGVyZm9ybWFuY2Ugc2Vuc2l0aXZlLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7Kn0gW29sZFZhbHVlXVxuICAgKiBAcGFyYW0ge0FycmF5fSBmaWx0ZXJzXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gd3JpdGVcbiAgICogQHJldHVybiB7Kn1cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fYXBwbHlGaWx0ZXJzID0gZnVuY3Rpb24gKHZhbHVlLCBvbGRWYWx1ZSwgZmlsdGVycywgd3JpdGUpIHtcbiAgICB2YXIgZmlsdGVyLCBmbiwgYXJncywgYXJnLCBvZmZzZXQsIGksIGwsIGosIGs7XG4gICAgZm9yIChpID0gMCwgbCA9IGZpbHRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmaWx0ZXIgPSBmaWx0ZXJzW3dyaXRlID8gbCAtIGkgLSAxIDogaV07XG4gICAgICBmbiA9IHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlci5uYW1lLCB0cnVlKTtcbiAgICAgIGlmICghZm4pIGNvbnRpbnVlO1xuICAgICAgZm4gPSB3cml0ZSA/IGZuLndyaXRlIDogZm4ucmVhZCB8fCBmbjtcbiAgICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIGNvbnRpbnVlO1xuICAgICAgYXJncyA9IHdyaXRlID8gW3ZhbHVlLCBvbGRWYWx1ZV0gOiBbdmFsdWVdO1xuICAgICAgb2Zmc2V0ID0gd3JpdGUgPyAyIDogMTtcbiAgICAgIGlmIChmaWx0ZXIuYXJncykge1xuICAgICAgICBmb3IgKGogPSAwLCBrID0gZmlsdGVyLmFyZ3MubGVuZ3RoOyBqIDwgazsgaisrKSB7XG4gICAgICAgICAgYXJnID0gZmlsdGVyLmFyZ3Nbal07XG4gICAgICAgICAgYXJnc1tqICsgb2Zmc2V0XSA9IGFyZy5keW5hbWljID8gdGhpcy4kZ2V0KGFyZy52YWx1ZSkgOiBhcmcudmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhbHVlID0gZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcblxuICAvKipcbiAgICogUmVzb2x2ZSBhIGNvbXBvbmVudCwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGNvbXBvbmVudFxuICAgKiBpcyBkZWZpbmVkIG5vcm1hbGx5IG9yIHVzaW5nIGFuIGFzeW5jIGZhY3RvcnkgZnVuY3Rpb24uXG4gICAqIFJlc29sdmVzIHN5bmNocm9ub3VzbHkgaWYgYWxyZWFkeSByZXNvbHZlZCwgb3RoZXJ3aXNlXG4gICAqIHJlc29sdmVzIGFzeW5jaHJvbm91c2x5IGFuZCBjYWNoZXMgdGhlIHJlc29sdmVkXG4gICAqIGNvbnN0cnVjdG9yIG9uIHRoZSBmYWN0b3J5LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gdmFsdWVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fcmVzb2x2ZUNvbXBvbmVudCA9IGZ1bmN0aW9uICh2YWx1ZSwgY2IpIHtcbiAgICB2YXIgZmFjdG9yeTtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBmYWN0b3J5ID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZhY3RvcnkgPSByZXNvbHZlQXNzZXQodGhpcy4kb3B0aW9ucywgJ2NvbXBvbmVudHMnLCB2YWx1ZSwgdHJ1ZSk7XG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghZmFjdG9yeSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBhc3luYyBjb21wb25lbnQgZmFjdG9yeVxuICAgIGlmICghZmFjdG9yeS5vcHRpb25zKSB7XG4gICAgICBpZiAoZmFjdG9yeS5yZXNvbHZlZCkge1xuICAgICAgICAvLyBjYWNoZWRcbiAgICAgICAgY2IoZmFjdG9yeS5yZXNvbHZlZCk7XG4gICAgICB9IGVsc2UgaWYgKGZhY3RvcnkucmVxdWVzdGVkKSB7XG4gICAgICAgIC8vIHBvb2wgY2FsbGJhY2tzXG4gICAgICAgIGZhY3RvcnkucGVuZGluZ0NhbGxiYWNrcy5wdXNoKGNiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZhY3RvcnkucmVxdWVzdGVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIGNicyA9IGZhY3RvcnkucGVuZGluZ0NhbGxiYWNrcyA9IFtjYl07XG4gICAgICAgIGZhY3RvcnkuY2FsbCh0aGlzLCBmdW5jdGlvbiByZXNvbHZlKHJlcykge1xuICAgICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHJlcykpIHtcbiAgICAgICAgICAgIHJlcyA9IFZ1ZS5leHRlbmQocmVzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY2FjaGUgcmVzb2x2ZWRcbiAgICAgICAgICBmYWN0b3J5LnJlc29sdmVkID0gcmVzO1xuICAgICAgICAgIC8vIGludm9rZSBjYWxsYmFja3NcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGNic1tpXShyZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignRmFpbGVkIHRvIHJlc29sdmUgYXN5bmMgY29tcG9uZW50JyArICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gJzogJyArIHZhbHVlIDogJycpICsgJy4gJyArIChyZWFzb24gPyAnXFxuUmVhc29uOiAnICsgcmVhc29uIDogJycpKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vcm1hbCBjb21wb25lbnRcbiAgICAgIGNiKGZhY3RvcnkpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIGZpbHRlclJFJDEgPSAvW158XVxcfFtefF0vO1xuXG5mdW5jdGlvbiBkYXRhQVBJIChWdWUpIHtcbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXG4gICAqIEByZXR1cm4geyp9XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGdldCA9IGZ1bmN0aW9uIChleHAsIGFzU3RhdGVtZW50KSB7XG4gICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHApO1xuICAgIGlmIChyZXMpIHtcbiAgICAgIGlmIChhc1N0YXRlbWVudCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBzdGF0ZW1lbnRIYW5kbGVyKCkge1xuICAgICAgICAgIHNlbGYuJGFyZ3VtZW50cyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVzLmdldC5jYWxsKHNlbGYsIHNlbGYpO1xuICAgICAgICAgIHNlbGYuJGFyZ3VtZW50cyA9IG51bGw7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5nZXQuY2FsbCh0aGlzLCB0aGlzKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG4gICAqIFRoZSBleHByZXNzaW9uIG11c3QgYmUgYSB2YWxpZCBsZWZ0LWhhbmRcbiAgICogZXhwcmVzc2lvbiBpbiBhbiBhc3NpZ25tZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gICAqIEBwYXJhbSB7Kn0gdmFsXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJHNldCA9IGZ1bmN0aW9uIChleHAsIHZhbCkge1xuICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwLCB0cnVlKTtcbiAgICBpZiAocmVzICYmIHJlcy5zZXQpIHtcbiAgICAgIHJlcy5zZXQuY2FsbCh0aGlzLCB0aGlzLCB2YWwpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRGVsZXRlIGEgcHJvcGVydHkgb24gdGhlIFZNXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xuICAgIGRlbCh0aGlzLl9kYXRhLCBrZXkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXYXRjaCBhbiBleHByZXNzaW9uLCB0cmlnZ2VyIGNhbGxiYWNrIHdoZW4gaXRzXG4gICAqIHZhbHVlIGNoYW5nZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBleHBPckZuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGRlZXBcbiAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGltbWVkaWF0ZVxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB1bndhdGNoRm5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kd2F0Y2ggPSBmdW5jdGlvbiAoZXhwT3JGbiwgY2IsIG9wdGlvbnMpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZhciBwYXJzZWQ7XG4gICAgaWYgKHR5cGVvZiBleHBPckZuID09PSAnc3RyaW5nJykge1xuICAgICAgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUoZXhwT3JGbik7XG4gICAgICBleHBPckZuID0gcGFyc2VkLmV4cHJlc3Npb247XG4gICAgfVxuICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCB7XG4gICAgICBkZWVwOiBvcHRpb25zICYmIG9wdGlvbnMuZGVlcCxcbiAgICAgIHN5bmM6IG9wdGlvbnMgJiYgb3B0aW9ucy5zeW5jLFxuICAgICAgZmlsdGVyczogcGFyc2VkICYmIHBhcnNlZC5maWx0ZXJzLFxuICAgICAgdXNlcjogIW9wdGlvbnMgfHwgb3B0aW9ucy51c2VyICE9PSBmYWxzZVxuICAgIH0pO1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuaW1tZWRpYXRlKSB7XG4gICAgICBjYi5jYWxsKHZtLCB3YXRjaGVyLnZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVud2F0Y2hGbigpIHtcbiAgICAgIHdhdGNoZXIudGVhcmRvd24oKTtcbiAgICB9O1xuICB9O1xuXG4gIC8qKlxuICAgKiBFdmFsdWF0ZSBhIHRleHQgZGlyZWN0aXZlLCBpbmNsdWRpbmcgZmlsdGVycy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZXZhbCA9IGZ1bmN0aW9uICh0ZXh0LCBhc1N0YXRlbWVudCkge1xuICAgIC8vIGNoZWNrIGZvciBmaWx0ZXJzLlxuICAgIGlmIChmaWx0ZXJSRSQxLnRlc3QodGV4dCkpIHtcbiAgICAgIHZhciBkaXIgPSBwYXJzZURpcmVjdGl2ZSh0ZXh0KTtcbiAgICAgIC8vIHRoZSBmaWx0ZXIgcmVnZXggY2hlY2sgbWlnaHQgZ2l2ZSBmYWxzZSBwb3NpdGl2ZVxuICAgICAgLy8gZm9yIHBpcGVzIGluc2lkZSBzdHJpbmdzLCBzbyBpdCdzIHBvc3NpYmxlIHRoYXRcbiAgICAgIC8vIHdlIGRvbid0IGdldCBhbnkgZmlsdGVycyBoZXJlXG4gICAgICB2YXIgdmFsID0gdGhpcy4kZ2V0KGRpci5leHByZXNzaW9uLCBhc1N0YXRlbWVudCk7XG4gICAgICByZXR1cm4gZGlyLmZpbHRlcnMgPyB0aGlzLl9hcHBseUZpbHRlcnModmFsLCBudWxsLCBkaXIuZmlsdGVycykgOiB2YWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vIGZpbHRlclxuICAgICAgcmV0dXJuIHRoaXMuJGdldCh0ZXh0LCBhc1N0YXRlbWVudCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBJbnRlcnBvbGF0ZSBhIHBpZWNlIG9mIHRlbXBsYXRlIHRleHQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kaW50ZXJwb2xhdGUgPSBmdW5jdGlvbiAodGV4dCkge1xuICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQodGV4dCk7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICBpZiAodG9rZW5zKSB7XG4gICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gdm0uJGV2YWwodG9rZW5zWzBdLnZhbHVlKSArICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRva2Vucy5tYXAoZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgICAgcmV0dXJuIHRva2VuLnRhZyA/IHZtLiRldmFsKHRva2VuLnZhbHVlKSA6IHRva2VuLnZhbHVlO1xuICAgICAgICB9KS5qb2luKCcnKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBMb2cgaW5zdGFuY2UgZGF0YSBhcyBhIHBsYWluIEpTIG9iamVjdFxuICAgKiBzbyB0aGF0IGl0IGlzIGVhc2llciB0byBpbnNwZWN0IGluIGNvbnNvbGUuXG4gICAqIFRoaXMgbWV0aG9kIGFzc3VtZXMgY29uc29sZSBpcyBhdmFpbGFibGUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbcGF0aF1cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kbG9nID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgICB2YXIgZGF0YSA9IHBhdGggPyBnZXRQYXRoKHRoaXMuX2RhdGEsIHBhdGgpIDogdGhpcy5fZGF0YTtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgZGF0YSA9IGNsZWFuKGRhdGEpO1xuICAgIH1cbiAgICAvLyBpbmNsdWRlIGNvbXB1dGVkIGZpZWxkc1xuICAgIGlmICghcGF0aCkge1xuICAgICAgdmFyIGtleTtcbiAgICAgIGZvciAoa2V5IGluIHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQpIHtcbiAgICAgICAgZGF0YVtrZXldID0gY2xlYW4odGhpc1trZXldKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9wcm9wcykge1xuICAgICAgICBmb3IgKGtleSBpbiB0aGlzLl9wcm9wcykge1xuICAgICAgICAgIGRhdGFba2V5XSA9IGNsZWFuKHRoaXNba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFwiY2xlYW5cIiBhIGdldHRlci9zZXR0ZXIgY29udmVydGVkIG9iamVjdCBpbnRvIGEgcGxhaW5cbiAgICogb2JqZWN0IGNvcHkuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAtIG9ialxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNsZWFuKG9iaikge1xuICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRvbUFQSSAoVnVlKSB7XG4gIC8qKlxuICAgKiBDb252ZW5pZW5jZSBvbi1pbnN0YW5jZSBuZXh0VGljay4gVGhlIGNhbGxiYWNrIGlzXG4gICAqIGF1dG8tYm91bmQgdG8gdGhlIGluc3RhbmNlLCBhbmQgdGhpcyBhdm9pZHMgY29tcG9uZW50XG4gICAqIG1vZHVsZXMgaGF2aW5nIHRvIHJlbHkgb24gdGhlIGdsb2JhbCBWdWUuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG5leHRUaWNrID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgbmV4dFRpY2soZm4sIHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBcHBlbmQgaW5zdGFuY2UgdG8gdGFyZ2V0XG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRhcHBlbmRUbyA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICAgIHJldHVybiBpbnNlcnQodGhpcywgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIGFwcGVuZCwgYXBwZW5kV2l0aFRyYW5zaXRpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcmVwZW5kIGluc3RhbmNlIHRvIHRhcmdldFxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kcHJlcGVuZFRvID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcbiAgICBpZiAodGFyZ2V0Lmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgdGhpcy4kYmVmb3JlKHRhcmdldC5maXJzdENoaWxkLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbnNlcnQgaW5zdGFuY2UgYmVmb3JlIHRhcmdldFxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kYmVmb3JlID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgcmV0dXJuIGluc2VydCh0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgYmVmb3JlV2l0aENiLCBiZWZvcmVXaXRoVHJhbnNpdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluc2VydCBpbnN0YW5jZSBhZnRlciB0YXJnZXRcbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGFmdGVyID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcbiAgICBpZiAodGFyZ2V0Lm5leHRTaWJsaW5nKSB7XG4gICAgICB0aGlzLiRiZWZvcmUodGFyZ2V0Lm5leHRTaWJsaW5nLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQucGFyZW50Tm9kZSwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBpbnN0YW5jZSBmcm9tIERPTVxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kcmVtb3ZlID0gZnVuY3Rpb24gKGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICAgIGlmICghdGhpcy4kZWwucGFyZW50Tm9kZSkge1xuICAgICAgcmV0dXJuIGNiICYmIGNiKCk7XG4gICAgfVxuICAgIHZhciBpbkRvY3VtZW50ID0gdGhpcy5faXNBdHRhY2hlZCAmJiBpbkRvYyh0aGlzLiRlbCk7XG4gICAgLy8gaWYgd2UgYXJlIG5vdCBpbiBkb2N1bWVudCwgbm8gbmVlZCB0byBjaGVja1xuICAgIC8vIGZvciB0cmFuc2l0aW9uc1xuICAgIGlmICghaW5Eb2N1bWVudCkgd2l0aFRyYW5zaXRpb24gPSBmYWxzZTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHJlYWxDYiA9IGZ1bmN0aW9uIHJlYWxDYigpIHtcbiAgICAgIGlmIChpbkRvY3VtZW50KSBzZWxmLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcbiAgICAgIGlmIChjYikgY2IoKTtcbiAgICB9O1xuICAgIGlmICh0aGlzLl9pc0ZyYWdtZW50KSB7XG4gICAgICByZW1vdmVOb2RlUmFuZ2UodGhpcy5fZnJhZ21lbnRTdGFydCwgdGhpcy5fZnJhZ21lbnRFbmQsIHRoaXMsIHRoaXMuX2ZyYWdtZW50LCByZWFsQ2IpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgb3AgPSB3aXRoVHJhbnNpdGlvbiA9PT0gZmFsc2UgPyByZW1vdmVXaXRoQ2IgOiByZW1vdmVXaXRoVHJhbnNpdGlvbjtcbiAgICAgIG9wKHRoaXMuJGVsLCB0aGlzLCByZWFsQ2IpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU2hhcmVkIERPTSBpbnNlcnRpb24gZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcDEgLSBvcCBmb3Igbm9uLXRyYW5zaXRpb24gaW5zZXJ0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMiAtIG9wIGZvciB0cmFuc2l0aW9uIGluc2VydFxuICAgKiBAcmV0dXJuIHZtXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGluc2VydCh2bSwgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIG9wMSwgb3AyKSB7XG4gICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcbiAgICB2YXIgdGFyZ2V0SXNEZXRhY2hlZCA9ICFpbkRvYyh0YXJnZXQpO1xuICAgIHZhciBvcCA9IHdpdGhUcmFuc2l0aW9uID09PSBmYWxzZSB8fCB0YXJnZXRJc0RldGFjaGVkID8gb3AxIDogb3AyO1xuICAgIHZhciBzaG91bGRDYWxsSG9vayA9ICF0YXJnZXRJc0RldGFjaGVkICYmICF2bS5faXNBdHRhY2hlZCAmJiAhaW5Eb2Modm0uJGVsKTtcbiAgICBpZiAodm0uX2lzRnJhZ21lbnQpIHtcbiAgICAgIG1hcE5vZGVSYW5nZSh2bS5fZnJhZ21lbnRTdGFydCwgdm0uX2ZyYWdtZW50RW5kLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBvcChub2RlLCB0YXJnZXQsIHZtKTtcbiAgICAgIH0pO1xuICAgICAgY2IgJiYgY2IoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3Aodm0uJGVsLCB0YXJnZXQsIHZtLCBjYik7XG4gICAgfVxuICAgIGlmIChzaG91bGRDYWxsSG9vaykge1xuICAgICAgdm0uX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuICAgIH1cbiAgICByZXR1cm4gdm07XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgZm9yIHNlbGVjdG9yc1xuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBlbFxuICAgKi9cblxuICBmdW5jdGlvbiBxdWVyeShlbCkge1xuICAgIHJldHVybiB0eXBlb2YgZWwgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCkgOiBlbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBlbmQgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBlbFxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBmdW5jdGlvbiBhcHBlbmQoZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcbiAgICBpZiAoY2IpIGNiKCk7XG4gIH1cblxuICAvKipcbiAgICogSW5zZXJ0QmVmb3JlIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgZnVuY3Rpb24gYmVmb3JlV2l0aENiKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuICAgIGJlZm9yZShlbCwgdGFyZ2V0KTtcbiAgICBpZiAoY2IpIGNiKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVtb3ZlV2l0aENiKGVsLCB2bSwgY2IpIHtcbiAgICByZW1vdmUoZWwpO1xuICAgIGlmIChjYikgY2IoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBldmVudHNBUEkgKFZ1ZSkge1xuICAvKipcbiAgICogTGlzdGVuIG9uIHRoZSBnaXZlbiBgZXZlbnRgIHdpdGggYGZuYC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG9uID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuICAgICh0aGlzLl9ldmVudHNbZXZlbnRdIHx8ICh0aGlzLl9ldmVudHNbZXZlbnRdID0gW10pKS5wdXNoKGZuKTtcbiAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAxKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQWRkcyBhbiBgZXZlbnRgIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBpbnZva2VkIGEgc2luZ2xlXG4gICAqIHRpbWUgdGhlbiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRvbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBmdW5jdGlvbiBvbigpIHtcbiAgICAgIHNlbGYuJG9mZihldmVudCwgb24pO1xuICAgICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgb24uZm4gPSBmbjtcbiAgICB0aGlzLiRvbihldmVudCwgb24pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGdpdmVuIGNhbGxiYWNrIGZvciBgZXZlbnRgIG9yIGFsbFxuICAgKiByZWdpc3RlcmVkIGNhbGxiYWNrcy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG9mZiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICB2YXIgY2JzO1xuICAgIC8vIGFsbFxuICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgaWYgKHRoaXMuJHBhcmVudCkge1xuICAgICAgICBmb3IgKGV2ZW50IGluIHRoaXMuX2V2ZW50cykge1xuICAgICAgICAgIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF07XG4gICAgICAgICAgaWYgKGNicykge1xuICAgICAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLWNicy5sZW5ndGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8gc3BlY2lmaWMgZXZlbnRcbiAgICBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuICAgIGlmICghY2JzKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC1jYnMubGVuZ3RoKTtcbiAgICAgIHRoaXMuX2V2ZW50c1tldmVudF0gPSBudWxsO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIHNwZWNpZmljIGhhbmRsZXJcbiAgICB2YXIgY2I7XG4gICAgdmFyIGkgPSBjYnMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGNiID0gY2JzW2ldO1xuICAgICAgaWYgKGNiID09PSBmbiB8fCBjYi5mbiA9PT0gZm4pIHtcbiAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLTEpO1xuICAgICAgICBjYnMuc3BsaWNlKGksIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgYW4gZXZlbnQgb24gc2VsZi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBldmVudFxuICAgKiBAcmV0dXJuIHtCb29sZWFufSBzaG91bGRQcm9wYWdhdGVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZW1pdCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBpc1NvdXJjZSA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZyc7XG4gICAgZXZlbnQgPSBpc1NvdXJjZSA/IGV2ZW50IDogZXZlbnQubmFtZTtcbiAgICB2YXIgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcbiAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gaXNTb3VyY2UgfHwgIWNicztcbiAgICBpZiAoY2JzKSB7XG4gICAgICBjYnMgPSBjYnMubGVuZ3RoID4gMSA/IHRvQXJyYXkoY2JzKSA6IGNicztcbiAgICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBoYWNreSBzb2x1dGlvbiB0byB0aGUgcXVlc3Rpb24gcmFpc2VkXG4gICAgICAvLyBpbiAjMjEwMjogZm9yIGFuIGlubGluZSBjb21wb25lbnQgbGlzdGVuZXIgbGlrZSA8Y29tcCBAdGVzdD1cImRvVGhpc1wiPixcbiAgICAgIC8vIHRoZSBwcm9wYWdhdGlvbiBoYW5kbGluZyBpcyBzb21ld2hhdCBicm9rZW4uIFRoZXJlZm9yZSB3ZVxuICAgICAgLy8gbmVlZCB0byB0cmVhdCB0aGVzZSBpbmxpbmUgY2FsbGJhY2tzIGRpZmZlcmVudGx5LlxuICAgICAgdmFyIGhhc1BhcmVudENicyA9IGlzU291cmNlICYmIGNicy5zb21lKGZ1bmN0aW9uIChjYikge1xuICAgICAgICByZXR1cm4gY2IuX2Zyb21QYXJlbnQ7XG4gICAgICB9KTtcbiAgICAgIGlmIChoYXNQYXJlbnRDYnMpIHtcbiAgICAgICAgc2hvdWxkUHJvcGFnYXRlID0gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgY2IgPSBjYnNbaV07XG4gICAgICAgIHZhciByZXMgPSBjYi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgaWYgKHJlcyA9PT0gdHJ1ZSAmJiAoIWhhc1BhcmVudENicyB8fCBjYi5fZnJvbVBhcmVudCkpIHtcbiAgICAgICAgICBzaG91bGRQcm9wYWdhdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaG91bGRQcm9wYWdhdGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlY3Vyc2l2ZWx5IGJyb2FkY2FzdCBhbiBldmVudCB0byBhbGwgY2hpbGRyZW4gaW5zdGFuY2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGV2ZW50XG4gICAqIEBwYXJhbSB7Li4uKn0gYWRkaXRpb25hbCBhcmd1bWVudHNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kYnJvYWRjYXN0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIGlzU291cmNlID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJztcbiAgICBldmVudCA9IGlzU291cmNlID8gZXZlbnQgOiBldmVudC5uYW1lO1xuICAgIC8vIGlmIG5vIGNoaWxkIGhhcyByZWdpc3RlcmVkIGZvciB0aGlzIGV2ZW50LFxuICAgIC8vIHRoZW4gdGhlcmUncyBubyBuZWVkIHRvIGJyb2FkY2FzdC5cbiAgICBpZiAoIXRoaXMuX2V2ZW50c0NvdW50W2V2ZW50XSkgcmV0dXJuO1xuICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuJGNoaWxkcmVuO1xuICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO1xuICAgIGlmIChpc1NvdXJjZSkge1xuICAgICAgLy8gdXNlIG9iamVjdCBldmVudCB0byBpbmRpY2F0ZSBub24tc291cmNlIGVtaXRcbiAgICAgIC8vIG9uIGNoaWxkcmVuXG4gICAgICBhcmdzWzBdID0geyBuYW1lOiBldmVudCwgc291cmNlOiB0aGlzIH07XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSBjaGlsZC4kZW1pdC5hcHBseShjaGlsZCwgYXJncyk7XG4gICAgICBpZiAoc2hvdWxkUHJvcGFnYXRlKSB7XG4gICAgICAgIGNoaWxkLiRicm9hZGNhc3QuYXBwbHkoY2hpbGQsIGFyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVjdXJzaXZlbHkgcHJvcGFnYXRlIGFuIGV2ZW50IHVwIHRoZSBwYXJlbnQgY2hhaW4uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0gey4uLip9IGFkZGl0aW9uYWwgYXJndW1lbnRzXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGRpc3BhdGNoID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IHRoaXMuJGVtaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoIXNob3VsZFByb3BhZ2F0ZSkgcmV0dXJuO1xuICAgIHZhciBwYXJlbnQgPSB0aGlzLiRwYXJlbnQ7XG4gICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG4gICAgLy8gdXNlIG9iamVjdCBldmVudCB0byBpbmRpY2F0ZSBub24tc291cmNlIGVtaXRcbiAgICAvLyBvbiBwYXJlbnRzXG4gICAgYXJnc1swXSA9IHsgbmFtZTogZXZlbnQsIHNvdXJjZTogdGhpcyB9O1xuICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IHBhcmVudC4kZW1pdC5hcHBseShwYXJlbnQsIGFyZ3MpO1xuICAgICAgcGFyZW50ID0gc2hvdWxkUHJvcGFnYXRlID8gcGFyZW50LiRwYXJlbnQgOiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogTW9kaWZ5IHRoZSBsaXN0ZW5lciBjb3VudHMgb24gYWxsIHBhcmVudHMuXG4gICAqIFRoaXMgYm9va2tlZXBpbmcgYWxsb3dzICRicm9hZGNhc3QgdG8gcmV0dXJuIGVhcmx5IHdoZW5cbiAgICogbm8gY2hpbGQgaGFzIGxpc3RlbmVkIHRvIGEgY2VydGFpbiBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge051bWJlcn0gY291bnRcbiAgICovXG5cbiAgdmFyIGhvb2tSRSA9IC9eaG9vazovO1xuICBmdW5jdGlvbiBtb2RpZnlMaXN0ZW5lckNvdW50KHZtLCBldmVudCwgY291bnQpIHtcbiAgICB2YXIgcGFyZW50ID0gdm0uJHBhcmVudDtcbiAgICAvLyBob29rcyBkbyBub3QgZ2V0IGJyb2FkY2FzdGVkIHNvIG5vIG5lZWRcbiAgICAvLyB0byBkbyBib29ra2VlcGluZyBmb3IgdGhlbVxuICAgIGlmICghcGFyZW50IHx8ICFjb3VudCB8fCBob29rUkUudGVzdChldmVudCkpIHJldHVybjtcbiAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICBwYXJlbnQuX2V2ZW50c0NvdW50W2V2ZW50XSA9IChwYXJlbnQuX2V2ZW50c0NvdW50W2V2ZW50XSB8fCAwKSArIGNvdW50O1xuICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGxpZmVjeWNsZUFQSSAoVnVlKSB7XG4gIC8qKlxuICAgKiBTZXQgaW5zdGFuY2UgdGFyZ2V0IGVsZW1lbnQgYW5kIGtpY2sgb2ZmIHRoZSBjb21waWxhdGlvblxuICAgKiBwcm9jZXNzLiBUaGUgcGFzc2VkIGluIGBlbGAgY2FuIGJlIGEgc2VsZWN0b3Igc3RyaW5nLCBhblxuICAgKiBleGlzdGluZyBFbGVtZW50LCBvciBhIERvY3VtZW50RnJhZ21lbnQgKGZvciBibG9ja1xuICAgKiBpbnN0YW5jZXMpLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudHxzdHJpbmd9IGVsXG4gICAqIEBwdWJsaWNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kbW91bnQgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICBpZiAodGhpcy5faXNDb21waWxlZCkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCckbW91bnQoKSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZS4nLCB0aGlzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWwgPSBxdWVyeShlbCk7XG4gICAgaWYgKCFlbCkge1xuICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB9XG4gICAgdGhpcy5fY29tcGlsZShlbCk7XG4gICAgdGhpcy5faW5pdERPTUhvb2tzKCk7XG4gICAgaWYgKGluRG9jKHRoaXMuJGVsKSkge1xuICAgICAgdGhpcy5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG4gICAgICByZWFkeS5jYWxsKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRvbmNlKCdob29rOmF0dGFjaGVkJywgcmVhZHkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogTWFyayBhbiBpbnN0YW5jZSBhcyByZWFkeS5cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVhZHkoKSB7XG4gICAgdGhpcy5faXNBdHRhY2hlZCA9IHRydWU7XG4gICAgdGhpcy5faXNSZWFkeSA9IHRydWU7XG4gICAgdGhpcy5fY2FsbEhvb2soJ3JlYWR5Jyk7XG4gIH1cblxuICAvKipcbiAgICogVGVhcmRvd24gdGhlIGluc3RhbmNlLCBzaW1wbHkgZGVsZWdhdGUgdG8gdGhlIGludGVybmFsXG4gICAqIF9kZXN0cm95LlxuICAgKlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cFxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRkZXN0cm95ID0gZnVuY3Rpb24gKHJlbW92ZSwgZGVmZXJDbGVhbnVwKSB7XG4gICAgdGhpcy5fZGVzdHJveShyZW1vdmUsIGRlZmVyQ2xlYW51cCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFBhcnRpYWxseSBjb21waWxlIGEgcGllY2Ugb2YgRE9NIGFuZCByZXR1cm4gYVxuICAgKiBkZWNvbXBpbGUgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXVxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kY29tcGlsZSA9IGZ1bmN0aW9uIChlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICByZXR1cm4gY29tcGlsZShlbCwgdGhpcy4kb3B0aW9ucywgdHJ1ZSkodGhpcywgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGUgZXhwb3NlZCBWdWUgY29uc3RydWN0b3IuXG4gKlxuICogQVBJIGNvbnZlbnRpb25zOlxuICogLSBwdWJsaWMgQVBJIG1ldGhvZHMvcHJvcGVydGllcyBhcmUgcHJlZml4ZWQgd2l0aCBgJGBcbiAqIC0gaW50ZXJuYWwgbWV0aG9kcy9wcm9wZXJ0aWVzIGFyZSBwcmVmaXhlZCB3aXRoIGBfYFxuICogLSBub24tcHJlZml4ZWQgcHJvcGVydGllcyBhcmUgYXNzdW1lZCB0byBiZSBwcm94aWVkIHVzZXJcbiAqICAgZGF0YS5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBWdWUob3B0aW9ucykge1xuICB0aGlzLl9pbml0KG9wdGlvbnMpO1xufVxuXG4vLyBpbnN0YWxsIGludGVybmFsc1xuaW5pdE1peGluKFZ1ZSk7XG5zdGF0ZU1peGluKFZ1ZSk7XG5ldmVudHNNaXhpbihWdWUpO1xubGlmZWN5Y2xlTWl4aW4oVnVlKTtcbm1pc2NNaXhpbihWdWUpO1xuXG4vLyBpbnN0YWxsIGluc3RhbmNlIEFQSXNcbmRhdGFBUEkoVnVlKTtcbmRvbUFQSShWdWUpO1xuZXZlbnRzQVBJKFZ1ZSk7XG5saWZlY3ljbGVBUEkoVnVlKTtcblxudmFyIHNsb3QgPSB7XG5cbiAgcHJpb3JpdHk6IFNMT1QsXG4gIHBhcmFtczogWyduYW1lJ10sXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyB0aGlzIHdhcyByZXNvbHZlZCBkdXJpbmcgY29tcG9uZW50IHRyYW5zY2x1c2lvblxuICAgIHZhciBuYW1lID0gdGhpcy5wYXJhbXMubmFtZSB8fCAnZGVmYXVsdCc7XG4gICAgdmFyIGNvbnRlbnQgPSB0aGlzLnZtLl9zbG90Q29udGVudHMgJiYgdGhpcy52bS5fc2xvdENvbnRlbnRzW25hbWVdO1xuICAgIGlmICghY29udGVudCB8fCAhY29udGVudC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgIHRoaXMuZmFsbGJhY2soKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb21waWxlKGNvbnRlbnQuY2xvbmVOb2RlKHRydWUpLCB0aGlzLnZtLl9jb250ZXh0LCB0aGlzLnZtKTtcbiAgICB9XG4gIH0sXG5cbiAgY29tcGlsZTogZnVuY3Rpb24gY29tcGlsZShjb250ZW50LCBjb250ZXh0LCBob3N0KSB7XG4gICAgaWYgKGNvbnRlbnQgJiYgY29udGV4dCkge1xuICAgICAgaWYgKHRoaXMuZWwuaGFzQ2hpbGROb2RlcygpICYmIGNvbnRlbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiYgY29udGVudC5jaGlsZE5vZGVzWzBdLm5vZGVUeXBlID09PSAxICYmIGNvbnRlbnQuY2hpbGROb2Rlc1swXS5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuICAgICAgICAvLyBpZiB0aGUgaW5zZXJ0ZWQgc2xvdCBoYXMgdi1pZlxuICAgICAgICAvLyBpbmplY3QgZmFsbGJhY2sgY29udGVudCBhcyB0aGUgdi1lbHNlXG4gICAgICAgIHZhciBlbHNlQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuICAgICAgICBlbHNlQmxvY2suc2V0QXR0cmlidXRlKCd2LWVsc2UnLCAnJyk7XG4gICAgICAgIGVsc2VCbG9jay5pbm5lckhUTUwgPSB0aGlzLmVsLmlubmVySFRNTDtcbiAgICAgICAgLy8gdGhlIGVsc2UgYmxvY2sgc2hvdWxkIGJlIGNvbXBpbGVkIGluIGNoaWxkIHNjb3BlXG4gICAgICAgIGVsc2VCbG9jay5fY29udGV4dCA9IHRoaXMudm07XG4gICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWxzZUJsb2NrKTtcbiAgICAgIH1cbiAgICAgIHZhciBzY29wZSA9IGhvc3QgPyBob3N0Ll9zY29wZSA6IHRoaXMuX3Njb3BlO1xuICAgICAgdGhpcy51bmxpbmsgPSBjb250ZXh0LiRjb21waWxlKGNvbnRlbnQsIGhvc3QsIHNjb3BlLCB0aGlzLl9mcmFnKTtcbiAgICB9XG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgIHJlcGxhY2UodGhpcy5lbCwgY29udGVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZSh0aGlzLmVsKTtcbiAgICB9XG4gIH0sXG5cbiAgZmFsbGJhY2s6IGZ1bmN0aW9uIGZhbGxiYWNrKCkge1xuICAgIHRoaXMuY29tcGlsZShleHRyYWN0Q29udGVudCh0aGlzLmVsLCB0cnVlKSwgdGhpcy52bSk7XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgaWYgKHRoaXMudW5saW5rKSB7XG4gICAgICB0aGlzLnVubGluaygpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHBhcnRpYWwgPSB7XG5cbiAgcHJpb3JpdHk6IFBBUlRJQUwsXG5cbiAgcGFyYW1zOiBbJ25hbWUnXSxcblxuICAvLyB3YXRjaCBjaGFuZ2VzIHRvIG5hbWUgZm9yIGR5bmFtaWMgcGFydGlhbHNcbiAgcGFyYW1XYXRjaGVyczoge1xuICAgIG5hbWU6IGZ1bmN0aW9uIG5hbWUodmFsdWUpIHtcbiAgICAgIHZJZi5yZW1vdmUuY2FsbCh0aGlzKTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmluc2VydCh2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtcGFydGlhbCcpO1xuICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuICAgIHRoaXMuaW5zZXJ0KHRoaXMucGFyYW1zLm5hbWUpO1xuICB9LFxuXG4gIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KGlkKSB7XG4gICAgdmFyIHBhcnRpYWwgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3BhcnRpYWxzJywgaWQsIHRydWUpO1xuICAgIGlmIChwYXJ0aWFsKSB7XG4gICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHBhcnRpYWwpO1xuICAgICAgdklmLmluc2VydC5jYWxsKHRoaXMpO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICBpZiAodGhpcy5mcmFnKSB7XG4gICAgICB0aGlzLmZyYWcuZGVzdHJveSgpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIGVsZW1lbnREaXJlY3RpdmVzID0ge1xuICBzbG90OiBzbG90LFxuICBwYXJ0aWFsOiBwYXJ0aWFsXG59O1xuXG52YXIgY29udmVydEFycmF5ID0gdkZvci5fcG9zdFByb2Nlc3M7XG5cbi8qKlxuICogTGltaXQgZmlsdGVyIGZvciBhcnJheXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gblxuICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCAoRGVjaW1hbCBleHBlY3RlZClcbiAqL1xuXG5mdW5jdGlvbiBsaW1pdEJ5KGFyciwgbiwgb2Zmc2V0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA/IHBhcnNlSW50KG9mZnNldCwgMTApIDogMDtcbiAgbiA9IHRvTnVtYmVyKG4pO1xuICByZXR1cm4gdHlwZW9mIG4gPT09ICdudW1iZXInID8gYXJyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgbikgOiBhcnI7XG59XG5cbi8qKlxuICogRmlsdGVyIGZpbHRlciBmb3IgYXJyYXlzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuICogQHBhcmFtIHtTdHJpbmd9IFtkZWxpbWl0ZXJdXG4gKiBAcGFyYW0ge1N0cmluZ30gLi4uZGF0YUtleXNcbiAqL1xuXG5mdW5jdGlvbiBmaWx0ZXJCeShhcnIsIHNlYXJjaCwgZGVsaW1pdGVyKSB7XG4gIGFyciA9IGNvbnZlcnRBcnJheShhcnIpO1xuICBpZiAoc2VhcmNoID09IG51bGwpIHtcbiAgICByZXR1cm4gYXJyO1xuICB9XG4gIGlmICh0eXBlb2Ygc2VhcmNoID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGFyci5maWx0ZXIoc2VhcmNoKTtcbiAgfVxuICAvLyBjYXN0IHRvIGxvd2VyY2FzZSBzdHJpbmdcbiAgc2VhcmNoID0gKCcnICsgc2VhcmNoKS50b0xvd2VyQ2FzZSgpO1xuICAvLyBhbGxvdyBvcHRpb25hbCBgaW5gIGRlbGltaXRlclxuICAvLyBiZWNhdXNlIHdoeSBub3RcbiAgdmFyIG4gPSBkZWxpbWl0ZXIgPT09ICdpbicgPyAzIDogMjtcbiAgLy8gZXh0cmFjdCBhbmQgZmxhdHRlbiBrZXlzXG4gIHZhciBrZXlzID0gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgdG9BcnJheShhcmd1bWVudHMsIG4pKTtcbiAgdmFyIHJlcyA9IFtdO1xuICB2YXIgaXRlbSwga2V5LCB2YWwsIGo7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gYXJyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGl0ZW0gPSBhcnJbaV07XG4gICAgdmFsID0gaXRlbSAmJiBpdGVtLiR2YWx1ZSB8fCBpdGVtO1xuICAgIGogPSBrZXlzLmxlbmd0aDtcbiAgICBpZiAoaikge1xuICAgICAgd2hpbGUgKGotLSkge1xuICAgICAgICBrZXkgPSBrZXlzW2pdO1xuICAgICAgICBpZiAoa2V5ID09PSAnJGtleScgJiYgY29udGFpbnMoaXRlbS4ka2V5LCBzZWFyY2gpIHx8IGNvbnRhaW5zKGdldFBhdGgodmFsLCBrZXkpLCBzZWFyY2gpKSB7XG4gICAgICAgICAgcmVzLnB1c2goaXRlbSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNvbnRhaW5zKGl0ZW0sIHNlYXJjaCkpIHtcbiAgICAgIHJlcy5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEZpbHRlciBmaWx0ZXIgZm9yIGFycmF5c1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5PFN0cmluZz58RnVuY3Rpb259IC4uLnNvcnRLZXlzXG4gKiBAcGFyYW0ge051bWJlcn0gW29yZGVyXVxuICovXG5cbmZ1bmN0aW9uIG9yZGVyQnkoYXJyKSB7XG4gIHZhciBjb21wYXJhdG9yID0gbnVsbDtcbiAgdmFyIHNvcnRLZXlzID0gdW5kZWZpbmVkO1xuICBhcnIgPSBjb252ZXJ0QXJyYXkoYXJyKTtcblxuICAvLyBkZXRlcm1pbmUgb3JkZXIgKGxhc3QgYXJndW1lbnQpXG4gIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuICB2YXIgb3JkZXIgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07XG4gIGlmICh0eXBlb2Ygb3JkZXIgPT09ICdudW1iZXInKSB7XG4gICAgb3JkZXIgPSBvcmRlciA8IDAgPyAtMSA6IDE7XG4gICAgYXJncyA9IGFyZ3MubGVuZ3RoID4gMSA/IGFyZ3Muc2xpY2UoMCwgLTEpIDogYXJncztcbiAgfSBlbHNlIHtcbiAgICBvcmRlciA9IDE7XG4gIH1cblxuICAvLyBkZXRlcm1pbmUgc29ydEtleXMgJiBjb21wYXJhdG9yXG4gIHZhciBmaXJzdEFyZyA9IGFyZ3NbMF07XG4gIGlmICghZmlyc3RBcmcpIHtcbiAgICByZXR1cm4gYXJyO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBmaXJzdEFyZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIGN1c3RvbSBjb21wYXJhdG9yXG4gICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gZmlyc3RBcmcoYSwgYikgKiBvcmRlcjtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIHN0cmluZyBrZXlzLiBmbGF0dGVuIGZpcnN0XG4gICAgc29ydEtleXMgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBhcmdzKTtcbiAgICBjb21wYXJhdG9yID0gZnVuY3Rpb24gKGEsIGIsIGkpIHtcbiAgICAgIGkgPSBpIHx8IDA7XG4gICAgICByZXR1cm4gaSA+PSBzb3J0S2V5cy5sZW5ndGggLSAxID8gYmFzZUNvbXBhcmUoYSwgYiwgaSkgOiBiYXNlQ29tcGFyZShhLCBiLCBpKSB8fCBjb21wYXJhdG9yKGEsIGIsIGkgKyAxKTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gYmFzZUNvbXBhcmUoYSwgYiwgc29ydEtleUluZGV4KSB7XG4gICAgdmFyIHNvcnRLZXkgPSBzb3J0S2V5c1tzb3J0S2V5SW5kZXhdO1xuICAgIGlmIChzb3J0S2V5KSB7XG4gICAgICBpZiAoc29ydEtleSAhPT0gJyRrZXknKSB7XG4gICAgICAgIGlmIChpc09iamVjdChhKSAmJiAnJHZhbHVlJyBpbiBhKSBhID0gYS4kdmFsdWU7XG4gICAgICAgIGlmIChpc09iamVjdChiKSAmJiAnJHZhbHVlJyBpbiBiKSBiID0gYi4kdmFsdWU7XG4gICAgICB9XG4gICAgICBhID0gaXNPYmplY3QoYSkgPyBnZXRQYXRoKGEsIHNvcnRLZXkpIDogYTtcbiAgICAgIGIgPSBpc09iamVjdChiKSA/IGdldFBhdGgoYiwgc29ydEtleSkgOiBiO1xuICAgIH1cbiAgICByZXR1cm4gYSA9PT0gYiA/IDAgOiBhID4gYiA/IG9yZGVyIDogLW9yZGVyO1xuICB9XG5cbiAgLy8gc29ydCBvbiBhIGNvcHkgdG8gYXZvaWQgbXV0YXRpbmcgb3JpZ2luYWwgYXJyYXlcbiAgcmV0dXJuIGFyci5zbGljZSgpLnNvcnQoY29tcGFyYXRvcik7XG59XG5cbi8qKlxuICogU3RyaW5nIGNvbnRhaW4gaGVscGVyXG4gKlxuICogQHBhcmFtIHsqfSB2YWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcbiAqL1xuXG5mdW5jdGlvbiBjb250YWlucyh2YWwsIHNlYXJjaCkge1xuICB2YXIgaTtcbiAgaWYgKGlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsKTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgaWYgKGNvbnRhaW5zKHZhbFtrZXlzW2ldXSwgc2VhcmNoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNBcnJheSh2YWwpKSB7XG4gICAgaSA9IHZhbC5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgaWYgKGNvbnRhaW5zKHZhbFtpXSwgc2VhcmNoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAodmFsICE9IG51bGwpIHtcbiAgICByZXR1cm4gdmFsLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlYXJjaCkgPiAtMTtcbiAgfVxufVxuXG52YXIgZGlnaXRzUkUgPSAvKFxcZHszfSkoPz1cXGQpL2c7XG5cbi8vIGFzc2V0IGNvbGxlY3Rpb25zIG11c3QgYmUgYSBwbGFpbiBvYmplY3QuXG52YXIgZmlsdGVycyA9IHtcblxuICBvcmRlckJ5OiBvcmRlckJ5LFxuICBmaWx0ZXJCeTogZmlsdGVyQnksXG4gIGxpbWl0Qnk6IGxpbWl0QnksXG5cbiAgLyoqXG4gICAqIFN0cmluZ2lmeSB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGVudFxuICAgKi9cblxuICBqc29uOiB7XG4gICAgcmVhZDogZnVuY3Rpb24gcmVhZCh2YWx1ZSwgaW5kZW50KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogSlNPTi5zdHJpbmdpZnkodmFsdWUsIG51bGwsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gaW5kZW50IDogMik7XG4gICAgfSxcbiAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUodmFsdWUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogJ2FiYycgPT4gJ0FiYydcbiAgICovXG5cbiAgY2FwaXRhbGl6ZTogZnVuY3Rpb24gY2FwaXRhbGl6ZSh2YWx1ZSkge1xuICAgIGlmICghdmFsdWUgJiYgdmFsdWUgIT09IDApIHJldHVybiAnJztcbiAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIHZhbHVlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdmFsdWUuc2xpY2UoMSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqICdhYmMnID0+ICdBQkMnXG4gICAqL1xuXG4gIHVwcGVyY2FzZTogZnVuY3Rpb24gdXBwZXJjYXNlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlIHx8IHZhbHVlID09PSAwID8gdmFsdWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpIDogJyc7XG4gIH0sXG5cbiAgLyoqXG4gICAqICdBYkMnID0+ICdhYmMnXG4gICAqL1xuXG4gIGxvd2VyY2FzZTogZnVuY3Rpb24gbG93ZXJjYXNlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlIHx8IHZhbHVlID09PSAwID8gdmFsdWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpIDogJyc7XG4gIH0sXG5cbiAgLyoqXG4gICAqIDEyMzQ1ID0+ICQxMiwzNDUuMDBcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHNpZ25cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRlY2ltYWxzIERlY2ltYWwgcGxhY2VzXG4gICAqL1xuXG4gIGN1cnJlbmN5OiBmdW5jdGlvbiBjdXJyZW5jeSh2YWx1ZSwgX2N1cnJlbmN5LCBkZWNpbWFscykge1xuICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgaWYgKCFpc0Zpbml0ZSh2YWx1ZSkgfHwgIXZhbHVlICYmIHZhbHVlICE9PSAwKSByZXR1cm4gJyc7XG4gICAgX2N1cnJlbmN5ID0gX2N1cnJlbmN5ICE9IG51bGwgPyBfY3VycmVuY3kgOiAnJCc7XG4gICAgZGVjaW1hbHMgPSBkZWNpbWFscyAhPSBudWxsID8gZGVjaW1hbHMgOiAyO1xuICAgIHZhciBzdHJpbmdpZmllZCA9IE1hdGguYWJzKHZhbHVlKS50b0ZpeGVkKGRlY2ltYWxzKTtcbiAgICB2YXIgX2ludCA9IGRlY2ltYWxzID8gc3RyaW5naWZpZWQuc2xpY2UoMCwgLTEgLSBkZWNpbWFscykgOiBzdHJpbmdpZmllZDtcbiAgICB2YXIgaSA9IF9pbnQubGVuZ3RoICUgMztcbiAgICB2YXIgaGVhZCA9IGkgPiAwID8gX2ludC5zbGljZSgwLCBpKSArIChfaW50Lmxlbmd0aCA+IDMgPyAnLCcgOiAnJykgOiAnJztcbiAgICB2YXIgX2Zsb2F0ID0gZGVjaW1hbHMgPyBzdHJpbmdpZmllZC5zbGljZSgtMSAtIGRlY2ltYWxzKSA6ICcnO1xuICAgIHZhciBzaWduID0gdmFsdWUgPCAwID8gJy0nIDogJyc7XG4gICAgcmV0dXJuIHNpZ24gKyBfY3VycmVuY3kgKyBoZWFkICsgX2ludC5zbGljZShpKS5yZXBsYWNlKGRpZ2l0c1JFLCAnJDEsJykgKyBfZmxvYXQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqICdpdGVtJyA9PiAnaXRlbXMnXG4gICAqXG4gICAqIEBwYXJhbXNcbiAgICogIGFuIGFycmF5IG9mIHN0cmluZ3MgY29ycmVzcG9uZGluZyB0b1xuICAgKiAgdGhlIHNpbmdsZSwgZG91YmxlLCB0cmlwbGUgLi4uIGZvcm1zIG9mIHRoZSB3b3JkIHRvXG4gICAqICBiZSBwbHVyYWxpemVkLiBXaGVuIHRoZSBudW1iZXIgdG8gYmUgcGx1cmFsaXplZFxuICAgKiAgZXhjZWVkcyB0aGUgbGVuZ3RoIG9mIHRoZSBhcmdzLCBpdCB3aWxsIHVzZSB0aGUgbGFzdFxuICAgKiAgZW50cnkgaW4gdGhlIGFycmF5LlxuICAgKlxuICAgKiAgZS5nLiBbJ3NpbmdsZScsICdkb3VibGUnLCAndHJpcGxlJywgJ211bHRpcGxlJ11cbiAgICovXG5cbiAgcGx1cmFsaXplOiBmdW5jdGlvbiBwbHVyYWxpemUodmFsdWUpIHtcbiAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcbiAgICB2YXIgbGVuZ3RoID0gYXJncy5sZW5ndGg7XG4gICAgaWYgKGxlbmd0aCA+IDEpIHtcbiAgICAgIHZhciBpbmRleCA9IHZhbHVlICUgMTAgLSAxO1xuICAgICAgcmV0dXJuIGluZGV4IGluIGFyZ3MgPyBhcmdzW2luZGV4XSA6IGFyZ3NbbGVuZ3RoIC0gMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhcmdzWzBdICsgKHZhbHVlID09PSAxID8gJycgOiAncycpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRGVib3VuY2UgYSBoYW5kbGVyIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheSA9IDMwMFxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICovXG5cbiAgZGVib3VuY2U6IGZ1bmN0aW9uIGRlYm91bmNlKGhhbmRsZXIsIGRlbGF5KSB7XG4gICAgaWYgKCFoYW5kbGVyKSByZXR1cm47XG4gICAgaWYgKCFkZWxheSkge1xuICAgICAgZGVsYXkgPSAzMDA7XG4gICAgfVxuICAgIHJldHVybiBfZGVib3VuY2UoaGFuZGxlciwgZGVsYXkpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBpbnN0YWxsR2xvYmFsQVBJIChWdWUpIHtcbiAgLyoqXG4gICAqIFZ1ZSBhbmQgZXZlcnkgY29uc3RydWN0b3IgdGhhdCBleHRlbmRzIFZ1ZSBoYXMgYW5cbiAgICogYXNzb2NpYXRlZCBvcHRpb25zIG9iamVjdCwgd2hpY2ggY2FuIGJlIGFjY2Vzc2VkIGR1cmluZ1xuICAgKiBjb21waWxhdGlvbiBzdGVwcyBhcyBgdGhpcy5jb25zdHJ1Y3Rvci5vcHRpb25zYC5cbiAgICpcbiAgICogVGhlc2UgY2FuIGJlIHNlZW4gYXMgdGhlIGRlZmF1bHQgb3B0aW9ucyBvZiBldmVyeVxuICAgKiBWdWUgaW5zdGFuY2UuXG4gICAqL1xuXG4gIFZ1ZS5vcHRpb25zID0ge1xuICAgIGRpcmVjdGl2ZXM6IGRpcmVjdGl2ZXMsXG4gICAgZWxlbWVudERpcmVjdGl2ZXM6IGVsZW1lbnREaXJlY3RpdmVzLFxuICAgIGZpbHRlcnM6IGZpbHRlcnMsXG4gICAgdHJhbnNpdGlvbnM6IHt9LFxuICAgIGNvbXBvbmVudHM6IHt9LFxuICAgIHBhcnRpYWxzOiB7fSxcbiAgICByZXBsYWNlOiB0cnVlXG4gIH07XG5cbiAgLyoqXG4gICAqIEV4cG9zZSB1c2VmdWwgaW50ZXJuYWxzXG4gICAqL1xuXG4gIFZ1ZS51dGlsID0gdXRpbDtcbiAgVnVlLmNvbmZpZyA9IGNvbmZpZztcbiAgVnVlLnNldCA9IHNldDtcbiAgVnVlWydkZWxldGUnXSA9IGRlbDtcbiAgVnVlLm5leHRUaWNrID0gbmV4dFRpY2s7XG5cbiAgLyoqXG4gICAqIFRoZSBmb2xsb3dpbmcgYXJlIGV4cG9zZWQgZm9yIGFkdmFuY2VkIHVzYWdlIC8gcGx1Z2luc1xuICAgKi9cblxuICBWdWUuY29tcGlsZXIgPSBjb21waWxlcjtcbiAgVnVlLkZyYWdtZW50RmFjdG9yeSA9IEZyYWdtZW50RmFjdG9yeTtcbiAgVnVlLmludGVybmFsRGlyZWN0aXZlcyA9IGludGVybmFsRGlyZWN0aXZlcztcbiAgVnVlLnBhcnNlcnMgPSB7XG4gICAgcGF0aDogcGF0aCxcbiAgICB0ZXh0OiB0ZXh0LFxuICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZSxcbiAgICBkaXJlY3RpdmU6IGRpcmVjdGl2ZSxcbiAgICBleHByZXNzaW9uOiBleHByZXNzaW9uXG4gIH07XG5cbiAgLyoqXG4gICAqIEVhY2ggaW5zdGFuY2UgY29uc3RydWN0b3IsIGluY2x1ZGluZyBWdWUsIGhhcyBhIHVuaXF1ZVxuICAgKiBjaWQuIFRoaXMgZW5hYmxlcyB1cyB0byBjcmVhdGUgd3JhcHBlZCBcImNoaWxkXG4gICAqIGNvbnN0cnVjdG9yc1wiIGZvciBwcm90b3R5cGFsIGluaGVyaXRhbmNlIGFuZCBjYWNoZSB0aGVtLlxuICAgKi9cblxuICBWdWUuY2lkID0gMDtcbiAgdmFyIGNpZCA9IDE7XG5cbiAgLyoqXG4gICAqIENsYXNzIGluaGVyaXRhbmNlXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBleHRlbmRPcHRpb25zXG4gICAqL1xuXG4gIFZ1ZS5leHRlbmQgPSBmdW5jdGlvbiAoZXh0ZW5kT3B0aW9ucykge1xuICAgIGV4dGVuZE9wdGlvbnMgPSBleHRlbmRPcHRpb25zIHx8IHt9O1xuICAgIHZhciBTdXBlciA9IHRoaXM7XG4gICAgdmFyIGlzRmlyc3RFeHRlbmQgPSBTdXBlci5jaWQgPT09IDA7XG4gICAgaWYgKGlzRmlyc3RFeHRlbmQgJiYgZXh0ZW5kT3B0aW9ucy5fQ3Rvcikge1xuICAgICAgcmV0dXJuIGV4dGVuZE9wdGlvbnMuX0N0b3I7XG4gICAgfVxuICAgIHZhciBuYW1lID0gZXh0ZW5kT3B0aW9ucy5uYW1lIHx8IFN1cGVyLm9wdGlvbnMubmFtZTtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKCEvXlthLXpBLVpdW1xcdy1dKiQvLnRlc3QobmFtZSkpIHtcbiAgICAgICAgd2FybignSW52YWxpZCBjb21wb25lbnQgbmFtZTogXCInICsgbmFtZSArICdcIi4gQ29tcG9uZW50IG5hbWVzICcgKyAnY2FuIG9ubHkgY29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjYXRlcnMgYW5kIHRoZSBoeXBoZW4uJyk7XG4gICAgICAgIG5hbWUgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgU3ViID0gY3JlYXRlQ2xhc3MobmFtZSB8fCAnVnVlQ29tcG9uZW50Jyk7XG4gICAgU3ViLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3VwZXIucHJvdG90eXBlKTtcbiAgICBTdWIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3ViO1xuICAgIFN1Yi5jaWQgPSBjaWQrKztcbiAgICBTdWIub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhTdXBlci5vcHRpb25zLCBleHRlbmRPcHRpb25zKTtcbiAgICBTdWJbJ3N1cGVyJ10gPSBTdXBlcjtcbiAgICAvLyBhbGxvdyBmdXJ0aGVyIGV4dGVuc2lvblxuICAgIFN1Yi5leHRlbmQgPSBTdXBlci5leHRlbmQ7XG4gICAgLy8gY3JlYXRlIGFzc2V0IHJlZ2lzdGVycywgc28gZXh0ZW5kZWQgY2xhc3Nlc1xuICAgIC8vIGNhbiBoYXZlIHRoZWlyIHByaXZhdGUgYXNzZXRzIHRvby5cbiAgICBjb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgU3ViW3R5cGVdID0gU3VwZXJbdHlwZV07XG4gICAgfSk7XG4gICAgLy8gZW5hYmxlIHJlY3Vyc2l2ZSBzZWxmLWxvb2t1cFxuICAgIGlmIChuYW1lKSB7XG4gICAgICBTdWIub3B0aW9ucy5jb21wb25lbnRzW25hbWVdID0gU3ViO1xuICAgIH1cbiAgICAvLyBjYWNoZSBjb25zdHJ1Y3RvclxuICAgIGlmIChpc0ZpcnN0RXh0ZW5kKSB7XG4gICAgICBleHRlbmRPcHRpb25zLl9DdG9yID0gU3ViO1xuICAgIH1cbiAgICByZXR1cm4gU3ViO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHN1Yi1jbGFzcyBjb25zdHJ1Y3RvciB3aXRoIHRoZVxuICAgKiBnaXZlbiBuYW1lLiBUaGlzIGdpdmVzIHVzIG11Y2ggbmljZXIgb3V0cHV0IHdoZW5cbiAgICogbG9nZ2luZyBpbnN0YW5jZXMgaW4gdGhlIGNvbnNvbGUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgKi9cblxuICBmdW5jdGlvbiBjcmVhdGVDbGFzcyhuYW1lKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tbmV3LWZ1bmMgKi9cbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdyZXR1cm4gZnVuY3Rpb24gJyArIGNsYXNzaWZ5KG5hbWUpICsgJyAob3B0aW9ucykgeyB0aGlzLl9pbml0KG9wdGlvbnMpIH0nKSgpO1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tbmV3LWZ1bmMgKi9cbiAgfVxuXG4gIC8qKlxuICAgKiBQbHVnaW4gc3lzdGVtXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwbHVnaW5cbiAgICovXG5cbiAgVnVlLnVzZSA9IGZ1bmN0aW9uIChwbHVnaW4pIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAocGx1Z2luLmluc3RhbGxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBhZGRpdGlvbmFsIHBhcmFtZXRlcnNcbiAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcbiAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG4gICAgaWYgKHR5cGVvZiBwbHVnaW4uaW5zdGFsbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcGx1Z2luLmluc3RhbGwuYXBwbHkocGx1Z2luLCBhcmdzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGx1Z2luLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH1cbiAgICBwbHVnaW4uaW5zdGFsbGVkID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQXBwbHkgYSBnbG9iYWwgbWl4aW4gYnkgbWVyZ2luZyBpdCBpbnRvIHRoZSBkZWZhdWx0XG4gICAqIG9wdGlvbnMuXG4gICAqL1xuXG4gIFZ1ZS5taXhpbiA9IGZ1bmN0aW9uIChtaXhpbikge1xuICAgIFZ1ZS5vcHRpb25zID0gbWVyZ2VPcHRpb25zKFZ1ZS5vcHRpb25zLCBtaXhpbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhc3NldCByZWdpc3RyYXRpb24gbWV0aG9kcyB3aXRoIHRoZSBmb2xsb3dpbmdcbiAgICogc2lnbmF0dXJlOlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAgICogQHBhcmFtIHsqfSBkZWZpbml0aW9uXG4gICAqL1xuXG4gIGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgVnVlW3R5cGVdID0gZnVuY3Rpb24gKGlkLCBkZWZpbml0aW9uKSB7XG4gICAgICBpZiAoIWRlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgKGNvbW1vblRhZ1JFLnRlc3QoaWQpIHx8IHJlc2VydmVkVGFnUkUudGVzdChpZCkpKSB7XG4gICAgICAgICAgICB3YXJuKCdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgKyAnaWQ6ICcgKyBpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiBpc1BsYWluT2JqZWN0KGRlZmluaXRpb24pKSB7XG4gICAgICAgICAgaWYgKCFkZWZpbml0aW9uLm5hbWUpIHtcbiAgICAgICAgICAgIGRlZmluaXRpb24ubmFtZSA9IGlkO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZpbml0aW9uID0gVnVlLmV4dGVuZChkZWZpbml0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdID0gZGVmaW5pdGlvbjtcbiAgICAgICAgcmV0dXJuIGRlZmluaXRpb247XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gZXhwb3NlIGludGVybmFsIHRyYW5zaXRpb24gQVBJXG4gIGV4dGVuZChWdWUudHJhbnNpdGlvbiwgdHJhbnNpdGlvbik7XG59XG5cbmluc3RhbGxHbG9iYWxBUEkoVnVlKTtcblxuVnVlLnZlcnNpb24gPSAnMS4wLjI2JztcblxuLy8gZGV2dG9vbHMgZ2xvYmFsIGhvb2tcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgaWYgKGNvbmZpZy5kZXZ0b29scykge1xuICAgIGlmIChkZXZ0b29scykge1xuICAgICAgZGV2dG9vbHMuZW1pdCgnaW5pdCcsIFZ1ZSk7XG4gICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGluQnJvd3NlciAmJiAvQ2hyb21lXFwvXFxkKy8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdEb3dubG9hZCB0aGUgVnVlIERldnRvb2xzIGZvciBhIGJldHRlciBkZXZlbG9wbWVudCBleHBlcmllbmNlOlxcbicgKyAnaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1kZXZ0b29scycpO1xuICAgIH1cbiAgfVxufSwgMCk7XG5cbm1vZHVsZS5leHBvcnRzID0gVnVlO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L1Z1ZS9kaXN0L3Z1ZS5jb21tb24uanNcbiAqKiBtb2R1bGUgaWQgPSA0M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvY29tcG9uZW50cy91aS9pY29uJztcbiAgICBAaW1wb3J0ICcuL2FwaS10YWJsZSc7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9hcGktdGFibGUuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5leHBvcnQgZGVmYXVsdCB7XG4gIHByb3BzOiB7XG4gICAgaXRlbXM6IHtcbiAgICAgIHR5cGU6IEFycmF5XG4gICAgfVxuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBpbmRleC52dWU/N2ZhMzBmNjNcbiAqKi8iLCI8c3R5bGUgbGFuZz1cInNhc3NcIj5cbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuICAgIEBpbXBvcnQgJy4vc2lkZS1uYXYnO1xuPC9zdHlsZT5cblxuPHRlbXBsYXRlIHNyYz1cIi4vc2lkZS1uYXYuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5sZXQgY2xhc3NOYW1lID0gJ2h5X3UtaGlkZSc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIG1ldGhvZHM6IHtcbiAgICBzaG93TmF2KCkge1xuICAgICAgdGhpcy4kZWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuICAgIH0sXG4gICAgaGlkZU5hdigpIHtcbiAgICAgIGxldCBjbGFzc2VzID0gdGhpcy4kZWwuY2xhc3NOYW1lLnNwbGl0KCcgJyk7XG4gICAgICBjbGFzc2VzLnB1c2goY2xhc3NOYW1lKTtcbiAgICAgIHRoaXMuJGVsLmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbignICcpO1xuICAgIH1cbiAgfSxcbiAgZXZlbnRzOiB7XG4gICAgJ3RvZ2dsZTo6c2l0ZU5hdicoKSB7XG4gICAgICBpZiAodGhpcy4kZWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcbiAgICAgICAgdGhpcy5zaG93TmF2KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhpZGVOYXYoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGluZGV4LnZ1ZT8yNmYwODc4YlxuICoqLyIsIjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnLi9zaXRlLWhlYWRlcic7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9zaXRlLWhlYWRlci5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbWV0aG9kczoge1xuICAgIHRvZ2dsZU5hdigpIHtcbiAgICAgIHRoaXMuJHJvb3QuJGJyb2FkY2FzdCgndG9nZ2xlOjpzaXRlTmF2Jyk7XG4gICAgfVxuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBpbmRleC52dWU/MGMwYjc2M2RcbiAqKi8iLCI8dGVtcGxhdGU+XG4gIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG4gICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG4gICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+QWxlcnQ8L2gyPlxuICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cbiAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuICAgICAgICAgICA8YWxlcnQgdHlwZT1cImVycm9yXCI+VGhpcyBpcyBhbiBlcnJvciBhbGVydC48L2FsZXJ0PlxuICAgICAgICAgICA8YWxlcnQgdHlwZT1cImluZm9cIj5UaGlzIGlzIGFuIGluZm8gYWxlcnQuPC9hbGVydD5cbiAgICAgICAgICAgPGFsZXJ0IHR5cGU9XCJzdWNjZXNzXCI+VGhpcyBpcyBhIHN1Y2Nlc3MgYWxlcnQuPC9hbGVydD5cbiAgICAgICAgICAgPGFsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOmRpc21pc3NpYmxlPVwiZmFsc2VcIj5UaGlzIGlzIG5vdCBhIGRpc21pc3NpYmxlIGFsZXJ0LjwvYWxlcnQ+XG4gICAgICAgICAgIDxhbGVydCB0eXBlPVwic3VjY2Vzc1wiIDpvbi1jbG9zZWQ9XCJkaXNtaXNzQ2FsbEJhY2tcIj5UaGlzIGlzIGFuIGFsZXJ0IHdpdGggY2FsbGJhY2suPC9hbGVydD5cbiAgICAgICAgICAgPGFsZXJ0IHR5cGU9XCJpbmZvXCIgOnRpbWVvdXQ9XCI1MDAwXCI+VGhpcyBhbGVydCBzaG91bGQgdGltZW91dCBpbiA1IHNlY29uZHMuPC9hbGVydD5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiSFRNTFwiPlxuICAgICAgICAgICA8cHJlPlxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuJmx0O2FsZXJ0IHR5cGU9XCJlcnJvclwiJmd0O1RoaXMgaXMgYW4gZXJyb3IgYWxlcnQuJmx0Oy9hbGVydCZndDtcbiZsdDthbGVydCB0eXBlPVwiaW5mb1wiJmd0O1RoaXMgaXMgYW4gaW5mbyBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xuJmx0O2FsZXJ0IHR5cGU9XCJzdWNjZXNzXCImZ3Q7VGhpcyBpcyBhIHN1Y2Nlc3MgYWxlcnQuJmx0Oy9hbGVydCZndDtcbiZsdDthbGVydCB0eXBlPVwic3VjY2Vzc1wiIDpkaXNtaXNzaWJsZT1cImZhbHNlXCImZ3Q7VGhpcyBpcyBub3QgYSBkaXNtaXNzaWJsZSBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xuJmx0O2FsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOm9uLWNsb3NlZD1cImRpc21pc3NDYWxsQmFja1wiJmd0O1RoaXMgaXMgYW4gYWxlcnQgd2l0aCBjYWxsYmFjay4mbHQ7L2FsZXJ0Jmd0O1xuJmx0O2FsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOnRpbWVvdXQ9XCI1MDAwXCImZ3Q7VGhpcyBhbGVydCBzaG91bGQgdGltZW91dCBpbiA1IHNlY29uZHMuJmx0Oy9hbGVydCZndDtcbiAgICAgICAgICAgICA8L2NvZGU+XG4gICAgICAgICAgIDwvcHJlPlxuICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk8L2gzPlxuICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG4gICAgICA8L2Rpdj5cblxuICAgPC9kaXY+XG4gIDwvc2VjdGlvbj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5pbXBvcnQgQXBpVGFibGUgZnJvbSAnLi4vY29tcG9uZW50cy9hcGktdGFibGUvaW5kZXgudnVlJztcbmV4cG9ydCBkZWZhdWx0IHtcbiAgY29tcG9uZW50czoge1xuICAgIEFwaVRhYmxlXG4gIH0sXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpc21pc3NDYWxsQmFjaygpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2FsZXJ0ISEhJyk7XG4gICAgICB9LFxuICAgICAgYXBpSXRlbXM6IFt7XG4gICAgICAgIG5hbWU6ICd0eXBlJyxcbiAgICAgICAgdHlwZTogJ1N0cmluZycsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAnVGhlIHR5cGUgb2YgYWxlcnQgKGVycm9yLCBpbmZvLCBzdWNjZXNzKSdcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ2Rpc21pc3NpYmxlJyxcbiAgICAgICAgdHlwZTogJ0Jvb2xlYW4nLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogdHJ1ZSxcbiAgICAgICAgZGVzYzogJ0lzIHRoZSBhbGVydCBkaXNtaXNzaWJsZT8nXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICd0aW1lb3V0JyxcbiAgICAgICAgdHlwZTogJ051bWJlcicsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0OiAtMSxcbiAgICAgICAgZGVzYzogJ1RoZSBkdXJhdGlvbiBhbGVydCBzdGF5cyBvbiBzY3JlZW4gaW4gbXMnXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdvbkNsb3NlZCcsXG4gICAgICAgIHR5cGU6ICdGdW5jdGlvbicsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ0NhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIGFsZXJ0IGlzIGNsb3NlZC4nXG4gICAgICB9XVxuICAgIH07XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGFsZXJ0LXBhZ2UudnVlPzc5YTRkZTg2XG4gKiovIiwiPHRlbXBsYXRlPlxuICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuICAgPGRpdiBjbGFzcz1cImh5X28td3JhcHBlclwiPlxuICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPkNvbGxhcHNhYmxlIFBhbmVsPC9oMj5cbiAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG4gICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cbiAgICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiUGFuZWwgMVwiIDppcy1vcGVuPVwidHJ1ZVwiPlxuICAgICAgICAgICAgUGFuZWwgMSBjb250ZW50XG4gICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cbiAgICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiUGFuZWwgMlwiPlxuICAgICAgICAgICAgUGFuZWwgMiBjb250ZW50XG4gICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cbiAgICAgICAgICAgPHByZT5cbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cbiZsdDtjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIlBhbmVsIDFcIiA6aXMtb3Blbj1cInRydWVcIiZndDtcbiBQYW5lbCAxIGNvbnRlbnRcbiZsdDsvY29sbGFwc2FibGUtcGFuZWwmZ3Q7XG4mbHQ7Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJQYW5lbCAyXCImZ3Q7XG4gUGFuZWwgMiBjb250ZW50XG4mbHQ7L2NvbGxhcHNhYmxlLXBhbmVsJmd0O1xuICAgICAgICAgICAgIDwvY29kZT5cbiAgICAgICAgICAgPC9wcmU+XG4gICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuICAgICAgPC9kaXY+XG4gICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG4gICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cbiAgICAgIDwvZGl2PlxuXG4gICA8L2Rpdj5cbiAgPC9zZWN0aW9uPlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmltcG9ydCBBcGlUYWJsZSBmcm9tICcuLi9jb21wb25lbnRzL2FwaS10YWJsZS9pbmRleC52dWUnO1xuZXhwb3J0IGRlZmF1bHQge1xuICBjb21wb25lbnRzOiB7XG4gICAgQXBpVGFibGVcbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYXBpSXRlbXM6IFt7XG4gICAgICAgIG5hbWU6ICdsYWJlbCcsXG4gICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ1RoZSBsYWJsZSBvZiB0aGUgcGFuZWwnXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdpc09wZW4nLFxuICAgICAgICB0eXBlOiAnQm9vbGVhbicsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgZGVzYzogJ0lzIHRoZSBwYW5lbCBvcGVuLidcbiAgICAgIH1dXG4gICAgfTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogY29sbGFwc2FibGUtcGFuZWwtcGFnZS52dWU/MDkxMmIxYmRcbiAqKi8iLCI8dGVtcGxhdGU+XG4gIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG4gICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG4gICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+TGVnYWwgU3lzdGVtPC9oMj5cbiAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG4gICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cbiAgICAgICAgICAgPHAgY2xhc3M9XCJoeV9jLWNvcHkgaHlfYy1jb3B5LS1ib2R5IGh5X3QtZ3JleVwiPlxuICAgICAgICAgICAgIExvcmVtIGlwc3VtPGxlZ2FsLWNvdW50ZXJcbiAgICAgICAgICAgICAgIHYtb3ZlcmxheS1vcGVuZXI9XCJsZWdhbC1vdmVybGF5XCJcbiAgICAgICAgICAgICAgIGxlZ2FsLWtleT1cImhzLXJlZmVycmFsLXRlcm1zXCJcbiAgICAgICAgICAgICAgIGxlZ2FsLWxhbmc9XCJlblwiIGxlZ2FsLXJlZ2lvbj1cImJjXCJcbiAgICAgICAgICAgICAgID48L2xlZ2FsLWNvdW50ZXI+IGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQsXG4gICAgICAgICAgICAgc2VkIGRvIGVpdXNtb2QgdGVtcG9yIGluY2lkaWR1bnQgdXQgbGFib3JlIGV0IGRvbG9yZSBtYWduYSBhbGlxdWEuXG4gICAgICAgICAgICAgPGxlZ2FsLWNvdW50ZXJcbiAgICAgICAgICAgICAgIHYtb3ZlcmxheS1vcGVuZXI9XCJsZWdhbC1vdmVybGF5XCJcbiAgICAgICAgICAgICAgIGxlZ2FsLWtleT1cIjEteWVhci1vZmZlci1zdGltXCJcbiAgICAgICAgICAgICAgIGxlZ2FsLWxhbmc9XCJlblwiIGxlZ2FsLXJlZ2lvbj1cImJjXCJcbiAgICAgICAgICAgICAgID48L2xlZ2FsLWNvdW50ZXI+XG4gICAgICAgICAgICAgPC9wPlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8bGVnYWwtY29udGFpbmVyPjwvbGVnYWwtY29udGFpbmVyPlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG4gICAgICAgICAgIDxwcmU+XG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG4mbHQ7bGVnYWwtY291bnRlclxuICBsZWdhbC1rZXk9XCJocy1yZWZlcnJhbC10ZXJtc1wiXG4gIGxlZ2FsLWxhbmc9XCJlblwiXG4gIGxlZ2FsLXJlZ2lvbj1cImJjXCJcbiZsdDsvbGVnYWwtY291bnRlciZndDtcbiZsdDtsZWdhbC1jb250YWluZXImZ3Q7Jmx0Oy9sZWdhbC1jb250YWluZXImZ3Q7XG4gICAgICAgICAgICAgPC9jb2RlPlxuICAgICAgICAgICA8L3ByZT5cbiAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJqYXZhc2NyaXB0XCI+XG4gICAgICAgICAgIDxwcmU+XG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1qYXZhc2NyaXB0XCI+XG5sZXQgdm0gPSBuZXcgVnVlKHtcbiBlbDogJ2JvZHknLFxuIGRhdGEoKSB7XG4gICByZXR1cm4ge1xuICAgICBsaWdlckVuZFBvaW50OiAnaHR0cHM6Ly9hcGkuY21zLnRlbHVzLmNvbS9sZWdhbHMnLFxuICAgICBsaWdlckFwcGxpY2F0aW9uS2V5OiAnYjk3MzhkNjdiODlkZmM3ODI3NDZkNGE5Y2Y0YTEwOTMnXG4gICB9O1xuIH0sXG4gY29tcG9uZW50czoge1xuICAgTGVnYWxDb3VudGVyLFxuICAgTGVnYWxDb250YWluZXJcbiB9XG59KTtcbiAgICAgICAgICAgICA8L2NvZGU+XG4gICAgICAgICAgIDwvcHJlPlxuICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk6IExlZ2FsIENvdW50ZXI8L2gzPlxuICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG4gICAgICA8L2Rpdj5cbiAgIDwvZGl2PlxuICA8L3NlY3Rpb24+XG5cblxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmltcG9ydCBBcGlUYWJsZSBmcm9tICcuLi9jb21wb25lbnRzL2FwaS10YWJsZS9pbmRleC52dWUnO1xuZXhwb3J0IGRlZmF1bHQge1xuICBjb21wb25lbnRzOiB7XG4gICAgQXBpVGFibGVcbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYXBpSXRlbXM6IFt7XG4gICAgICAgIG5hbWU6ICdsZWdhbEtleScsXG4gICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ3RoZSBrZXkgb2YgbGVnYWwgaW4gY21zJ1xuICAgICAgfSwge1xuICAgICAgICBuYW1lOiAnbGVnYWxMYW5nJyxcbiAgICAgICAgdHlwZTogJ1N0cmluZycsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAndGhlIGxhbmd1YWdlIG9mIGxlZ2FsIGluIGNtcydcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ2xlZ2FsUmVnaW9uJyxcbiAgICAgICAgdHlwZTogJ1N0cmluZycsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAndGhlIHJlZ2lvbiBvZiBsZWdhbCBpbiBjbXMnXG4gICAgICB9XVxuICAgIH07XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGxlZ2FsLXBhZ2UudnVlPzI2NTdlNWYxXG4gKiovIiwiPHRlbXBsYXRlPlxuICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuICAgPGRpdiBjbGFzcz1cImh5X28td3JhcHBlclwiPlxuICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPk92ZXJsYXkgU3lzdGVtPC9oMj5cbiAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG4gICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cbiAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgPGJ1dHRvbiB2LW92ZXJsYXktb3BlbmVyPVwib3ZlcmxheS0xXCIgY2xhc3M9XCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tbGluayBoeV90LXB1cnBsZVwiIHR5cGU9XCJidXR0b25cIiByb2xlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICBPcGVuIG92ZXJsYXkgIzEgPGkgY2xhc3M9XCJoeV9jLWljb24gaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkIGh5X2MtYnV0dG9uX19pY29uXCI+PC9pPlxuICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICA8L3A+XG4gICAgICAgICAgIDxwPlxuICAgICAgICAgICAgIDxidXR0b24gdi1vdmVybGF5LW9wZW5lcj1cIm92ZXJsYXktMlwiIGNsYXNzPVwiaHlfYy1idXR0b24gaHlfYy1idXR0b24tLWxpbmsgaHlfdC1wdXJwbGVcIiB0eXBlPVwiYnV0dG9uXCIgcm9sZT1cImJ1dHRvblwiPlxuICAgICAgICAgICAgICAgT3BlbiBvdmVybGF5ICMyIDxpIGNsYXNzPVwiaHlfYy1pY29uIGh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZCBoeV9jLWJ1dHRvbl9faWNvblwiPjwvaT5cbiAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgPC9wPlxuICAgICAgICAgICA8b3ZlcmxheS1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgICA8b3ZlcmxheSBvdmVybGF5LWtleT1cIm92ZXJsYXktMVwiPlxuICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XCIgc2xvdD1cIm92ZXJsYXktaGVhZGVyXCI+VGhpcyBpcyBvdmVybGF5ICMxPC9oND5cbiAgICAgICAgICAgICAgICAgICAgPGFydGljbGUgc2xvdD1cIm92ZXJsYXktYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgT3ZlcmxheSAjMSBib2R5XG4gICAgICAgICAgICAgICAgICAgIDwvYXJ0aWNsZT5cbiAgICAgICAgICAgICAgICAgIDwvb3ZlcmxheT5cbiAgICAgICAgICAgICAgICAgIDxvdmVybGF5IG92ZXJsYXkta2V5PVwib3ZlcmxheS0yXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcIiBzbG90PVwib3ZlcmxheS1oZWFkZXJcIj5UaGlzIGlzIG92ZXJsYXkgIzI8L2g0PlxuICAgICAgICAgICAgICAgICAgICA8YXJ0aWNsZSBzbG90PVwib3ZlcmxheS1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICBPdmVybGF5ICMyIGJvZHlcbiAgICAgICAgICAgICAgICAgICAgPC9hcnRpY2xlPlxuICAgICAgICAgICAgICAgICAgPC9vdmVybGF5PlxuICAgICAgICAgIDwvb3ZlcmxheS1jb250YWluZXI+XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cbiAgICAgICAgICAgPHByZT5cbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cbiZsdDtvdmVybGF5LWNvbnRhaW5lciZndDtcbiAmbHQ7b3ZlcmxheSBvdmVybGF5LWtleT1cIm92ZXJsYXktMVwiJmd0O1xuICAgJmx0O2g0ICBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcIiBzbG90PVwib3ZlcmxheS1oZWFkZXJcIiZndDtcbiAgIFRoaXMgaXMgb3ZlcmxheSAjMVxuICAgJmx0Oy9oNCZndDtcbiAgICZsdDthcnRpY2xlIHNsb3Q9XCJvdmVybGF5LWJvZHlcIiZndDtcbiAgICAgT3ZlcmxheSAjMSBib2R5XG4gICAmbHQ7L2FydGljbGUmZ3Q7XG4gJmx0Oy9vdmVybGF5Jmd0O1xuICZsdDtvdmVybGF5IG92ZXJsYXkta2V5PVwib3ZlcmxheS0yXCImZ3Q7XG4gICAmbHQ7aDQgIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFwiIHNsb3Q9XCJvdmVybGF5LWhlYWRlclwiJmd0O1xuICAgVGhpcyBpcyBvdmVybGF5ICMxXG4gICAmbHQ7L2g0Jmd0O1xuICAgJmx0O2FydGljbGUgc2xvdD1cIm92ZXJsYXktYm9keVwiJmd0O1xuICAgICBPdmVybGF5ICMyIGJvZHlcbiAgICZsdDsvYXJ0aWNsZSZndDtcbiAmbHQ7L292ZXJsYXkmZ3Q7XG4mbHQ7L292ZXJsYXktY29udGFpbmVyJmd0O1xuICAgICAgICAgICAgIDwvY29kZT5cbiAgICAgICAgICAgPC9wcmU+XG4gICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuICAgICAgPC9kaXY+XG4gICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG4gICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cbiAgICAgIDwvZGl2PlxuICAgPC9kaXY+XG4gIDwvc2VjdGlvbj5cblxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmltcG9ydCBBcGlUYWJsZSBmcm9tICcuLi9jb21wb25lbnRzL2FwaS10YWJsZS9pbmRleC52dWUnO1xuZXhwb3J0IGRlZmF1bHQge1xuICBjb21wb25lbnRzOiB7XG4gICAgQXBpVGFibGVcbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYXBpSXRlbXM6IFt7XG4gICAgICAgIG5hbWU6ICdvdmVybGF5S2V5JyxcbiAgICAgICAgdHlwZTogJ1N0cmluZycsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAnVGhlIGtleSBvZiB0aGUgb3ZlcmxheS4gVXNlZCBieSB0aGUgb3ZlcmxheSBvcGVuZXIgZGlyZWN0aXZlIHRvIHRhcmdldCB0aGUgb3ZlcmxleS4nXG4gICAgICB9XVxuICAgIH07XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIG92ZXJsYXktcGFnZS52dWU/OWQ2Mzc5NzZcbiAqKi8iLCI8dGVtcGxhdGU+XG4gIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG4gICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG4gICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+U3Bpbm5lcjwvaDI+XG4gICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG4gICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImh5X2MtY29udHJvbCBoeV9jLWNvbnRyb2wtLWNoZWNrYm94XCIgPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJoeV9jLWNvbnRyb2xfX2xhYmVsLXRleHRcIj5GdWxsIFNjcmVlbjwvc3Bhbj5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiAgdi1tb2RlbD1cImlzRnVsbFNjcmVlblwiIC8+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaHlfYy1jb250cm9sX19pbmRpY2F0b3JcIj48L2Rpdj5cbiAgICAgICAgICA8L2xhYmVsPlxuXG4gICAgICAgICAgPGJ1dHRvbiBAY2xpY2s9XCJzaG93U3Bpbm5lclwiIGNsYXNzPVwiaHlfYy1idXR0b24gaHlfYy1idXR0b24tLXJhaXNlZCBoeV90LWdyZWVuXCIgdHlwZT1cImJ1dHRvblwiPlxuICAgICAgICAgICAgU2hvdyBTcGlubmVyXG4gICAgICAgICAgPC9idXR0b24+XG5cblxuXG4gICAgICAgICAgIDxzcGlubmVyIDpmdWxsLXNjcmVlbj1cImlzRnVsbFNjcmVlblwiIDp0ZXh0PVwibXNnXCI+PC9zcGlubmVyPlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG4gICAgICAgICAgIDxwcmU+XG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG4mbHQ7c3Bpbm5lciB0ZXh0PVwiSSB3aWxsIGNsb3NlIGluIDMgc2Vjb25kc1wiIDpmdWxsLXNjcmVlbj1cInRydWVcIiZndDsmbHQ7L3NwaW5uZXImZ3Q7XG4gICAgICAgICAgICAgPC9jb2RlPlxuICAgICAgICAgICA8L3ByZT5cbiAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJPC9oMz5cbiAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuICAgICAgPC9kaXY+XG5cbiAgIDwvZGl2PlxuICA8L3NlY3Rpb24+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuaW1wb3J0IEFwaVRhYmxlIGZyb20gJy4uL2NvbXBvbmVudHMvYXBpLXRhYmxlL2luZGV4LnZ1ZSc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIGNvbXBvbmVudHM6IHtcbiAgICBBcGlUYWJsZVxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgc2hvd1NwaW5uZXIoKSB7XG4gICAgICB0aGlzLl9yZXNldE1zZygpO1xuICAgICAgdGhpcy4kcm9vdC4kYnJvYWRjYXN0KCdzaG93OjpzcGlubmVyJyk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy4kcm9vdC4kYnJvYWRjYXN0KCdoaWRlOjpzcGlubmVyJyk7XG4gICAgICB9LCAzMDAwKTtcbiAgICB9LFxuICAgIF9yZXNldE1zZygpIHtcbiAgICAgIGxldCBjb3VudGVyID0gMztcbiAgICAgIGxldCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgaWYgKGNvdW50ZXIgPiAwKSB7XG4gICAgICAgICAgY291bnRlciAtLTtcbiAgICAgICAgICB0aGlzLm1zZyA9IGBJIHdpbGwgY2xvc2UgaW4gJHtjb3VudGVyfSBzZWNvbmRzYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgfVxuICAgICAgfSwgMTAwMCk7XG4gICAgICB0aGlzLm1zZyA9IGBJIHdpbGwgY2xvc2UgaW4gJHtjb3VudGVyfSBzZWNvbmRzYDtcbiAgICB9XG4gIH0sXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1zZzogJycsXG4gICAgICBpc0Z1bGxTY3JlZW46IGZhbHNlLFxuICAgICAgYXBpSXRlbXM6IFt7XG4gICAgICAgIG5hbWU6ICdmdWxsU2NyZWVuJyxcbiAgICAgICAgdHlwZTogJ0Jvb2xlYW4nLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgICAgIGRlc2M6ICdTaG91bGQgdGhlIHNwaW5uZXIgdGFrZSBmdWxsIHNjcmVlbidcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ3RleHQnLFxuICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHQ6ICdcXCdcXCcnLFxuICAgICAgICBkZXNjOiAnVGhlIHRleHQgb2YgdGhlIHNwaW5uZXIuIERlZmF1bHQgZW1wdHknXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdzaG93OjpzcGlubmVyJyxcbiAgICAgICAgdHlwZTogJ0V2ZW50JyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAnQWN0aXZlIHRoZSBzcGlubmVyJ1xuICAgICAgfSwge1xuICAgICAgICBuYW1lOiAnaGlkZTo6c3Bpbm5lcicsXG4gICAgICAgIHR5cGU6ICdFdmVudCcsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ0hpZGUgdGhlIHNwaW5uZXInXG4gICAgICB9XVxuICAgIH07XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNwaW5uZXItcGFnZS52dWU/MzcyN2Q1ODBcbiAqKi8iLCI8dGVtcGxhdGU+XG4gIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG4gICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG4gICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+U3RlcCBUcmFja2VyPC9oMj5cbiAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG4gICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cbiAgICAgICAgICAgPHN0ZXAtdHJhY2tlciA6Y3VycmVudC1zdGVwPVwic3RlcFRyYWNrZXJDdXJyZW50U3RlcFwiIDpjb25maWc9XCJzdGVwVHJhY2tlckNvbmZpZ1wiPjwvc3RlcC10cmFja2VyPlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG4gICAgICAgPHByZT5cbiAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuJmx0O3N0ZXAtdHJhY2tlclxuOmN1cnJlbnQtc3RlcD1cInN0ZXBUcmFja2VyQ3VycmVudFN0ZXBcIlxuOmNvbmZpZz1cInN0ZXBUcmFja2VyQ29uZmlnXCImZ3Q7XG4mbHQ7L3N0ZXAtdHJhY2tlciZndDtcbiAgICAgICAgIDwvY29kZT5cbiAgICAgICA8L3ByZT5cbiAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJqYXZhc2NyaXB0XCI+XG4gICAgICAgICAgIDxwcmU+XG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1qc1wiPlxubGV0IHN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAyO1xubGV0IHN0ZXBUcmFja2VyQ29uZmlnID0ge1xuICBpc0NsaWNrYWJsZTogdHJ1ZSxcbiAgc3RlcHM6IFtcbiAgICB7XG4gICAgICB0aXRsZTogJ1N0ZXAgQScsXG4gICAgICBsaW5rOiAnJyxcbiAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICB0aXRsZTogJ1N0ZXAgQicsXG4gICAgICBsaW5rOiAnJyxcbiAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICB0aXRsZTogJ1N0ZXAgQycsXG4gICAgICBsaW5rOiAnJyxcbiAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMjtcbiAgICAgIH1cbiAgICB9XG4gIF1cbn07XG5sZXQgdm0gPSBuZXcgVnVlKHtcbiAgZWw6ICdib2R5JyxcbiAgZGF0YToge1xuICAgIHN0ZXBUcmFja2VyQ29uZmlnLFxuICAgIHN0ZXBUcmFja2VyQ3VycmVudFN0ZXBcbn0sXG4gIGNvbXBvbmVudHM6IHtcbiAgICBTdGVwVHJhY2tlclxuICB9XG59KTtcbiAgICAgICAgICAgICA8L2NvZGU+XG4gICAgICAgICAgIDwvcHJlPlxuICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk8L2gzPlxuICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG4gICAgICA8L2Rpdj5cbiAgIDwvZGl2PlxuICA8L3NlY3Rpb24+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuaW1wb3J0IEFwaVRhYmxlIGZyb20gJy4uL2NvbXBvbmVudHMvYXBpLXRhYmxlL2luZGV4LnZ1ZSc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIGNvbXBvbmVudHM6IHtcbiAgICBBcGlUYWJsZVxuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGVwVHJhY2tlckN1cnJlbnRTdGVwOiAyLFxuICAgICAgc3RlcFRyYWNrZXJDb25maWc6IHtcbiAgICAgICAgaXNDbGlja2FibGU6IHRydWUsXG4gICAgICAgIHN0ZXBzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGl0bGU6ICdTdGVwIEEnLFxuICAgICAgICAgICAgbGluazogJycsXG4gICAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQicsXG4gICAgICAgICAgICBsaW5rOiAnJyxcbiAgICAgICAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiAnU3RlcCBDJyxcbiAgICAgICAgICAgIGxpbms6ICcnLFxuICAgICAgICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIGFwaUl0ZW1zOiBbe1xuICAgICAgICBuYW1lOiAnY3VycmVudFN0ZXAnLFxuICAgICAgICB0eXBlOiAnSW50ZWdlcicsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICAgIGRlc2M6ICd0b2RvJ1xuICAgICAgfSwge1xuICAgICAgICBuYW1lOiAnY29uZmlnJyxcbiAgICAgICAgdHlwZTogJ09iamVjdCcsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAndG9kbydcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ2NvbmZpZy50aXRsZScsXG4gICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ1RoZSB0aXRsZSBvZiB0aGUgc3RlcCdcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ2NvbmZpZy5saW5rJyxcbiAgICAgICAgdHlwZTogJ1N0cmluZycsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ1RoZSBsaW5rIG9mIHRoZSBzdGVwLiAnXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdjb25maWcub25DbGlja0hhbmRsZXInLFxuICAgICAgICB0eXBlOiAnRnVuY3Rpb24nLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICdUaGUgY2FsbGJhY2sgZnVuY3Rpb24gd2hlbiBzdGVwIGlzIGNsaWNrZWQuJ1xuICAgICAgfV1cbiAgICB9O1xuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzdGVwLXRyYWNrZXItcGFnZS52dWU/MDFmNGYzZDdcbiAqKi8iLCI8dGVtcGxhdGU+XG4gIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG4gICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG4gICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+VGFiPC9oMj5cbiAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG4gICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cbiAgICAgICAgICAgPHRhYnM+XG4gICAgICAgICAgICAgPHRhYiBsYWJlbD1cIlRhYiAxXCI+XG4gICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgIFRhYiAxIGNvbnRlbnRcbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgIDwvdGFiPlxuICAgICAgICAgICAgIDx0YWIgbGFiZWw9XCJUYWIgMlwiPlxuICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgIFRhYiAyIGNvbnRlbnRcbiAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICA8L3RhYj5cbiAgICAgICAgICAgICA8dGFiIGxhYmVsPVwiVGFiIDNcIiA6aXMtZGlzYWJsZWQ9XCJ0cnVlXCI+XG4gICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgVGFiIDMgY29udGVudFxuICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgIDwvdGFiPlxuICAgICAgICAgICA8L3RhYnM+XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cbiAgICAgICAgICAgPHByZT5cbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cbiZsdDt0YWJzJmd0O1xuICZsdDt0YWIgbGFiZWw9XCJUYWIgMVwiJmd0O1xuICAgJmx0O3AmZ3Q7XG4gICAgIFRhYiAxIGNvbnRlbnRcbiAgICZsdDsvcCZndDtcbiAmbHQ7L3RhYiZndDtcbiAmbHQ7dGFiIGxhYmVsPVwiVGFiIDJcIiZndDtcbiAgICZsdDtwJmd0O1xuICAgICBUYWIgMiBjb250ZW50XG4gICAmbHQ7L3AmZ3Q7XG4gJmx0Oy90YWImZ3Q7XG4gJmx0O3RhYiBsYWJlbD1cIlRhYiAzXCIgOmlzLWRpc2FibGVkPVwidHJ1ZVwiJmd0O1xuICAgJmx0O3AmZ3Q7XG4gICAgIFRhYiAzIGNvbnRlbnRcbiAgICZsdDsvcCZndDtcbiAmbHQ7L3RhYiZndDtcbiZsdDsvdGFicyZndDtcbiAgICAgICAgICAgICA8L2NvZGU+XG4gICAgICAgICAgIDwvcHJlPlxuICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk8L2gzPlxuICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG4gICAgICA8L2Rpdj5cblxuICAgPC9kaXY+XG4gIDwvc2VjdGlvbj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5pbXBvcnQgQXBpVGFibGUgZnJvbSAnLi4vY29tcG9uZW50cy9hcGktdGFibGUvaW5kZXgudnVlJztcbmV4cG9ydCBkZWZhdWx0IHtcbiAgY29tcG9uZW50czoge1xuICAgIEFwaVRhYmxlXG4gIH0sXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFwaUl0ZW1zOiBbe1xuICAgICAgICBuYW1lOiAnbGFiZWwnLFxuICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICdUaGUgbGFibGUgb2YgdGhlIHRhYidcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ2lzRGlzYWJsZWQnLFxuICAgICAgICB0eXBlOiAnQm9vbGVhbicsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgZGVzYzogJ0lzIHRoZSB0YWIgZGlzYWJsZWQgb3Igbm90LiBXaGVuIHNldCB0byB0cnVlLCB0aGUgdGFiIGlzIG5vdCBjbGlja2FibGUuJ1xuICAgICAgfV1cbiAgICB9O1xuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB0YWJzLXBhZ2UudnVlP2MzNTUwYzVhXG4gKiovIiwiPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvY29tcG9uZW50cy91aS9pY29uJztcbiAgICBAaW1wb3J0ICcuLi8uLi90cmFuc2l0aW9ucy9mYWRlLnNjc3MnO1xuICAgIEBpbXBvcnQgJy4vYWxlcnQuc2Nzcyc7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9hbGVydC5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNWaXNpYmxlOiB0cnVlXG4gICAgfTtcbiAgfSxcbiAgcHJvcHM6IHtcbiAgICB0eXBlOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH0sXG4gICAgZGlzbWlzc2libGU6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiB0cnVlXG4gICAgfSxcbiAgICB0aW1lb3V0OiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBkZWZhdWx0OiAtMVxuICAgIH0sXG4gICAgb25DbG9zZWQ6IHtcbiAgICAgIHR5cGU6IEZ1bmN0aW9uXG4gICAgfVxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgZGlzbWlzcygpIHtcbiAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKCEhdGhpcy5vbkNsb3NlZCkge1xuICAgICAgICAgICAgdGhpcy5vbkNsb3NlZC5hcHBseSh0aGlzKTtcbiAgICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIHJlYWR5KCkge1xuICAgIGlmICh0aGlzLnRpbWVvdXQgPj0gMCkge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuZGlzbWlzcygpO1xuICAgICAgfSwgdGhpcy50aW1lb3V0KTtcbiAgICB9XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGluZGV4LnZ1ZT80OTlmYmVhZlxuICoqLyIsIjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL2NvbXBvbmVudHMvdWkvaWNvbic7XG4gICAgQGltcG9ydCAnLi9jb2xsYXBzYWJsZS1wYW5lbC5zY3NzJztcbjwvc3R5bGU+XG5cbjx0ZW1wbGF0ZSBzcmM9XCIuL2NvbGxhcHNhYmxlLXBhbmVsLmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuZXhwb3J0IGRlZmF1bHQge1xuICBwcm9wczoge1xuICAgIGlzT3Blbjoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgfSxcbiAgICBsYWJlbDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICB0b2dnbGVPcGVuKCRldmVudCkge1xuICAgICAgdGhpcy5pc09wZW4gPSAhdGhpcy5pc09wZW47XG4gICAgfVxuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBpbmRleC52dWU/MDVjMjI4NzBcbiAqKi8iLCJcbjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnLi9sZWdhbC1jb250YWluZXIuc2Nzcyc7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9sZWdhbC1jb250YWluZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG4gLypcbiAgKiBBUEk6IDxsZWdhbC1jb250YWluZXI+PC9sZWdhbC1jb250YWluZXI+XG4gKi9cblxuaW1wb3J0IG1peGlucyBmcm9tICcuLi8uLi9taXhpbnMnO1xuaW1wb3J0IGZpbmRJbmRleCBmcm9tICdsb2Rhc2gvZmluZEluZGV4JztcbmltcG9ydCBkZWJvdW5jZSBmcm9tICdsb2Rhc2gvZGVib3VuY2UnO1xuaW1wb3J0IHNldEZvY3VzIGZyb20gJy4uLy4uL2RpcmVjdGl2ZXMvc2V0LWZvY3VzJztcblxuZXhwb3J0IGRlZmF1bHQge1xuICBtaXhpbnMsXG4gIGRpcmVjdGl2ZXM6IHtcbiAgICBzZXRGb2N1c1xuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpbmRleGVkTGVnYWxzOiBbXSxcbiAgICAgIG5vbkluZGV4ZWRMZWdhbHM6IFtdLFxuICAgICAgYXBpTGFuZzogbnVsbCxcbiAgICAgIGFwaVJlZ2lvbjogbnVsbFxuICAgIH07XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBmZXRjaExlZ2FscyhrZXlzKSB7XG4gICAgICByZXR1cm4gZmV0Y2goYFxuICAgICAgICAgICR7dGhpcy4kcm9vdC5saWdlckVuZFBvaW50fT9sYW5nPSR7dGhpcy5hcGlMYW5nfSZyZWdpb249JHt0aGlzLmFwaVJlZ2lvbn0maHRtbD10cnVlXG4gICAgICAgIGAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgIGFwcGxpY2F0aW9uS2V5OiB0aGlzLiRyb290LmxpZ2VyQXBwbGljYXRpb25LZXlcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGtleXM6IGtleXNcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXBwZW5kUmVzcG9uc2VUb0xlZ2FsQ29udGFpbmVyKHR5cGUsIGRhdGEpIHtcbiAgICAgIGxldCBwcm9jZXNzID0gKHRhcmdldCwgZGF0YUFyeSkgPT4ge1xuICAgICAgICBkYXRhQXJ5LmZvckVhY2gobGVnYWxSZXNwb25zZSA9PiB7XG4gICAgICAgICAgbGV0IGluZGV4ID0gdGFyZ2V0LmZpbmRJbmRleChsID0+IGwua2V5ID09PSBsZWdhbFJlc3BvbnNlLmtleSk7XG4gICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIHRhcmdldC4kc2V0KGluZGV4LCB7XG4gICAgICAgICAgICAgIGNvbnRlbnQ6IGxlZ2FsUmVzcG9uc2UuY29udGVudCxcbiAgICAgICAgICAgICAga2V5OiBsZWdhbFJlc3BvbnNlLmtleVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICBpZiAodHlwZSA9PT0gJ2luZGV4ZWQnKSB7XG4gICAgICAgIHByb2Nlc3ModGhpcy5pbmRleGVkTGVnYWxzLCBkYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2Nlc3ModGhpcy5ub25JbmRleGVkTGVnYWxzLCBkYXRhKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGdldExlZ2FsczogKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGRlYm91bmNlLmNhbGwodGhpcywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGxldCBpbmRleGVkS2V5cyA9IHRoaXMuaW5kZXhlZExlZ2Fscy5tYXAobGVnYWwgPT4gbGVnYWwua2V5KTtcbiAgICAgICAgbGV0IG5vbkluZGV4ZWRLZXlzID0gdGhpcy5ub25JbmRleGVkTGVnYWxzLm1hcChsZWdhbCA9PiBsZWdhbC5rZXkpO1xuXG4gICAgICAgIGlmIChpbmRleGVkS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5mZXRjaExlZ2FscyhpbmRleGVkS2V5cylcbiAgICAgICAgICAudGhlbih0aGlzLnBhcnNlSlNPTilcbiAgICAgICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kUmVzcG9uc2VUb0xlZ2FsQ29udGFpbmVyKCdpbmRleGVkJywgZGF0YSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vbkluZGV4ZWRLZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLmZldGNoTGVnYWxzKG5vbkluZGV4ZWRLZXlzKVxuICAgICAgICAgIC50aGVuKHRoaXMucGFyc2VKU09OKVxuICAgICAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRSZXNwb25zZVRvTGVnYWxDb250YWluZXIoJ25vbkluZGV4ZWQnLCBkYXRhKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSwgMTApO1xuICAgIH0pKClcbiAgfSxcbiAgZXZlbnRzOiB7XG4gICAgJ2xlZ2FsOjpjbGljaycobGVnYWxLZXkpIHtcbiAgICAgIGxldCB0YXJnZXRMZWdhbEluZGV4ID0gdGhpcy5pbmRleGVkTGVnYWxzLmZpbmRJbmRleChsID0+IGwua2V5ID09PSBsZWdhbEtleSk7XG4gICAgICBpZiAodGFyZ2V0TGVnYWxJbmRleCA+IC0xKSB7XG4gICAgICAgIHRoaXMuaW5kZXhlZExlZ2Fscy5mb3JFYWNoKChsLCBpKSA9PiB7XG4gICAgICAgICAgaWYgKGkgIT09IHRhcmdldExlZ2FsSW5kZXgpIHtcbiAgICAgICAgICAgIGwuaXNTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmluZGV4ZWRMZWdhbHNcbiAgICAgICAgICAgIC4kc2V0KFxuICAgICAgICAgICAgICBpLFxuICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKFxuICAgICAgICAgICAgICAgIHt9LFxuICAgICAgICAgICAgICAgIHRoaXMuaW5kZXhlZExlZ2Fsc1tpXSxcbiAgICAgICAgICAgICAgICB7IGlzU2VsZWN0ZWQ6IHRydWUgfVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAnbGVnYWw6OmluaXQnKGxlZ2FsSW5pdERldGFpbCkge1xuICAgICAgdGhpcy5hcGlMYW5nID0gbGVnYWxJbml0RGV0YWlsLmxhbmc7XG4gICAgICB0aGlzLmFwaVJlZ2lvbiA9IGxlZ2FsSW5pdERldGFpbC5yZWdpb247XG4gICAgICAvLyBjaGVjayBpZiBsb2FkZWQgYWxyZWFkeVxuICAgICAgbGV0IGNvbnRhaW5lclJlZiA9IGxlZ2FsSW5pdERldGFpbC5pc05vbkluZGV4ZWQgPyB0aGlzLm5vbkluZGV4ZWRMZWdhbHMgOiB0aGlzLmluZGV4ZWRMZWdhbHM7XG4gICAgICBsZXQgaW5kZXggPSBmaW5kSW5kZXgoY29udGFpbmVyUmVmLCBsZWdhbCA9PiBsZWdhbC5rZXkgPT09IGxlZ2FsSW5pdERldGFpbC5rZXkpO1xuICAgICAgLy8gaWYgbm90IGZvdW5kXG4gICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgIGluZGV4ID0gY29udGFpbmVyUmVmLnB1c2gobGVnYWxJbml0RGV0YWlsKSAtIDE7XG4gICAgICAgIHRoaXMuZ2V0TGVnYWxzKCk7XG4gICAgICB9XG4gICAgICBpZiAoIWxlZ2FsSW5pdERldGFpbC5pc05vbkluZGV4ZWQpIHtcbiAgICAgICAgdGhpcy5yb290QnJvYWRjYXN0KCdsZWdhbDo6dWRwYXRlJywge1xuICAgICAgICAgIGtleTogbGVnYWxJbml0RGV0YWlsLmtleSxcbiAgICAgICAgICBpc05vbkluZGV4ZWQ6IGxlZ2FsSW5pdERldGFpbC5pc05vbkluZGV4ZWQsXG4gICAgICAgICAgaW5kZXg6IGluZGV4XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogbGVnYWwtY29udGFpbmVyLnZ1ZT9hNTFlZTJkNlxuICoqLyIsIjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnLi9sZWdhbC1jb3VudGVyLnNjc3MnO1xuPC9zdHlsZT5cblxuPHRlbXBsYXRlIHNyYz1cIi4vbGVnYWwtY291bnRlci5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbi8qXG4gKiBBUEk6IDxsZWdhbC1jb3VudGVyXG4gKiAgICAgICAgbGVnYWwta2V5PVwiKFN0cmluZykga2V5XCJcbiAqICAgICAgICBsZWdhbC1sYW5nPVwiKFN0cmluZykgbGFuZ1wiXG4gKiAgICAgICAgbGVnYWwtcmVnaW9uPVwiKFN0cmluZykgcmVnaW9uXCJcbiAqICAgICAgICBpcy1ub24taW5kZXhlZD1cIihCb29sZWFuKSBpc05vbkluZGV4ZWRcIlxuICogICAgICA+PC9sZWdhbC1jb3VudGVyPlxuKi9cblxuaW1wb3J0IG1peGlucyBmcm9tICcuLi8uLi9taXhpbnMnO1xuaW1wb3J0IGRlZmVyIGZyb20gJ2xvZGFzaC9kZWZlcic7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbWl4aW5zOiBtaXhpbnMsXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxlZ2FsQ291bnRlcjogbnVsbFxuICAgIH07XG4gIH0sXG4gIHByb3BzOiB7XG4gICAgbGVnYWxLZXk6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfSxcbiAgICBpc05vbkluZGV4ZWQ6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZVxuICAgIH0sXG4gICAgbGVnYWxMYW5nOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH0sXG4gICAgbGVnYWxSZWdpb246IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfVxuICB9LFxuICBldmVudHM6IHtcbiAgICAnbGVnYWw6OnVkcGF0ZScodXBkYXRlRGV0YWlsKSB7XG4gICAgICAgIGlmICghdGhpcy5pc05vbkluZGV4ZWQgJiYgdXBkYXRlRGV0YWlsLmtleSA9PT0gdGhpcy5sZWdhbEtleSkge1xuICAgICAgICAgIHRoaXMubGVnYWxDb3VudGVyID0gdXBkYXRlRGV0YWlsLmluZGV4ICsgMTtcbiAgICAgICAgfVxuICAgIH1cbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIGNsaWNrSGFuZGxlcigpIHtcbiAgICAgIHRoaXMucm9vdEJyb2FkY2FzdCgnbGVnYWw6OmNsaWNrJywgdGhpcy5sZWdhbEtleSk7XG4gICAgfVxuICB9LFxuICBiZWZvcmVDb21waWxlKCkge1xuICB9LFxuICByZWFkeSgpIHtcbiAgICBkZWZlcigoKSA9PiB7XG4gICAgICB0aGlzLnJvb3RCcm9hZGNhc3QoJ2xlZ2FsOjppbml0Jywge1xuICAgICAgICBrZXk6IHRoaXMubGVnYWxLZXksXG4gICAgICAgIGxhbmc6IHRoaXMubGVnYWxMYW5nLFxuICAgICAgICByZWdpb246IHRoaXMubGVnYWxSZWdpb24sXG4gICAgICAgIGlzTm9uSW5kZXhlZDogdGhpcy5pc05vbkluZGV4ZWRcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBsZWdhbC1jb3VudGVyLnZ1ZT80ZmUwZGM4ZVxuICoqLyIsIjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnLi9vdmVybGF5LWNvbnRhaW5lci5zY3NzJztcbjwvc3R5bGU+XG5cbjx0ZW1wbGF0ZSBzcmM9XCIuL292ZXJsYXktY29udGFpbmVyLmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuLypcbiogRXg6IDxvdmVybGF5LWNvbnRhaW5lciBpcy12aXNpYmxlPVwiKEJvb2xlYW4pIGZhbHNlXCI+XG4gICAgICA8L292ZXJsYXktY29udGFpbmVyPlxuKi9cbmNvbnN0IEVTQyA9IDI3O1xuZXhwb3J0IGRlZmF1bHQge1xuICBwcm9wczoge1xuICAgIGlzVmlzaWJsZToge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgfVxuICB9LFxuICB3YXRjaDoge1xuICAgIGlzVmlzaWJsZShpc1Zpc2libGUpIHtcbiAgICAgIGxldCBlbCA9IHdpbmRvdy5kb2N1bWVudC5ib2R5O1xuICAgICAgbGV0IGNsYXNzTmFtZSA9ICduby1zY3JvbGwnO1xuICAgICAgaWYgKGlzVmlzaWJsZSkge1xuICAgICAgICBpZiAoISFlbC5jbGFzc0xpc3QpIHtcbiAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWwuY2xhc3NOYW1lICs9ICcgJyArIGNsYXNzTmFtZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGVsLmNsYXNzTGlzdCkge1xuICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbC5jbGFzc05hbWUgPSBlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NOYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBSZWdFeHAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnKF58XFxcXGIpJyArIGNsYXNzTmFtZS5zcGxpdCgnICcpLmpvaW4oJ3wnKSArICcoXFxcXGJ8JCknLCAnZ2knKSwgJyAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGV2ZW50czoge1xuICAgICdvdmVybGF5Q29udGFpbmVyOjpvcGVuJygpIHtcbiAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcbiAgICB9LFxuICAgICdvdmVybGF5Q29udGFpbmVyOjpjbG9zZScoKSB7XG4gICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuICAgIH1cbiAgICB9LFxuICByZWFkeSgpIHtcbiAgICB3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldnQpID0+IHtcbiAgICAgIGV2dCA9IGV2dCB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IEVTQykge1xuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBvdmVybGF5LWNvbnRhaW5lci52dWU/M2ZjMjMwNThcbiAqKi8iLCI8c3R5bGUgbGFuZz1cInNhc3NcIj5cbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuICAgIEBpbXBvcnQgJy4vb3ZlcmxheS5zY3NzJztcbjwvc3R5bGU+XG5cbjx0ZW1wbGF0ZSBzcmM9XCIuL292ZXJsYXkuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG4vKlxuICogRXg6IDxvdmVybGF5IG92ZXJsYXkta2V5PVwiKFN0cmluZykga2V5XCI+XG4gKiAgICAgICAgQW55IGNvbnRlbnRcbiAqICAgICAgPC9vdmVybGF5PlxuKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNWaXNpYmxlOiBmYWxzZVxuICAgIH07XG4gIH0sXG4gIHByb3BzOiB7XG4gICAgb3ZlcmxheUtleToge1xuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfVxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgY2xvc2VPdmVybGF5KCkge1xuICAgICAgICB0aGlzLiRkaXNwYXRjaCgnb3ZlcmxheUNvbnRhaW5lcjo6Y2xvc2UnKTtcbiAgICB9XG4gIH0sXG4gIGV2ZW50czoge1xuICAgICdvdmVybGF5OjpvcGVuJyhvdmVybGF5S2V5KSB7XG4gICAgICBpZiAob3ZlcmxheUtleSA9PT0gdGhpcy5vdmVybGF5S2V5KSB7XG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcbiAgICB9XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIG92ZXJsYXkudnVlPzFmMzdmZDRhXG4gKiovIiwiPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcbiAgICBAaW1wb3J0ICcuL3NwaW5uZXIuc2Nzcyc7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9zcGlubmVyLmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuZXhwb3J0IGRlZmF1bHQge1xuICByZXBsYWNlOiB0cnVlLFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhY3RpdmU6IGZhbHNlXG4gICAgfTtcbiAgfSxcbiAgcHJvcHM6IHtcbiAgICB0ZXh0OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnJ1xuICAgIH0sXG4gICAgZnVsbFNjcmVlbjoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgfVxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgc2hvdygpIHtcbiAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgICAgIHRoaXMuJHJvb3QuJGJyb2FkY2FzdCgnc2hvd246OnNwaW5uZXInKTtcbiAgICB9LFxuICAgIGhpZGUoKSB7XG4gICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgdGhpcy4kcm9vdC4kYnJvYWRjYXN0KCdoaWRkZW46OnNwaW5uZXInKTtcbiAgICB9XG4gIH0sXG4gIGV2ZW50czoge1xuICAgICdzaG93OjpzcGlubmVyJygpIHtcbiAgICAgIHRoaXMuc2hvdygpO1xuICAgIH0sXG4gICAgJ2hpZGU6OnNwaW5uZXInKCkge1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfVxuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBpbmRleC52dWU/MzY3N2MyZDVcbiAqKi8iLCI8c3R5bGUgbGFuZz1cInNhc3NcIj5cbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9jb21wb25lbnRzL3VpL2ljb24nO1xuICAgIEBpbXBvcnQgJy4vc3RlcC10cmFja2VyLnNjc3MnO1xuPC9zdHlsZT5cblxuPHRlbXBsYXRlIHNyYz1cIi4vc3RlcC10cmFja2VyLmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuZXhwb3J0IGRlZmF1bHQge1xuICBwcm9wczoge1xuICAgIGNvbmZpZzoge1xuICAgICAgdHlwZTogT2JqZWN0XG4gICAgfSxcbiAgICBjdXJyZW50U3RlcDoge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogMFxuICAgIH0sXG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBjbGlja0hhbmRsZXIoJGV2ZW50LCBzdGVwLCBpbmRleCkge1xuICAgICAgaWYgKCEhc3RlcC5vbkNsaWNrSGFuZGxlcikge1xuICAgICAgICAkZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFN0ZXAgPiBpbmRleCkge1xuICAgICAgICAgIHN0ZXAub25DbGlja0hhbmRsZXIoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogaW5kZXgudnVlPzM1YzA1YmRiXG4gKiovIiwiPHRlbXBsYXRlIHNyYz1cIi4vdGFiLmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuZXhwb3J0IGRlZmF1bHQge1xuICBwcm9wczoge1xuICAgIGxhYmVsOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgfSxcbiAgICBpc0Rpc2FibGVkOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgfSxcbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGFiSW5kZXg6IDAsXG4gICAgICBpc1Zpc2libGU6IGZhbHNlLFxuICAgIH07XG4gIH0sXG4gIGNvbXB1dGVkOiB7XG4gICAgaXNWaXNpYmxlKCkge1xuICAgICAgcmV0dXJuICh0aGlzLiRwYXJlbnQuYWN0aXZlVGFiSW5kZXggPT09IHRoaXMudGFiSW5kZXgpO1xuICAgIH0sXG4gIH0sXG4gIGNyZWF0ZWQoKSB7XG4gICAgdGhpcy4kcGFyZW50LnRhYnMucHVzaCh7XG4gICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgIGlzRGlzYWJsZWQ6IHRoaXMuaXNEaXNhYmxlZCxcbiAgICB9KTtcbiAgfSxcbiAgcmVhZHkoKSB7XG4gICAgdGhpcy4kcGFyZW50LiRjaGlsZHJlbi5mb3JFYWNoKChjLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKGMuJGVsID09PSB0aGlzLiRlbCkge1xuICAgICAgICB0aGlzLnRhYkluZGV4ID0gaW5kZXg7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIGJlZm9yZURlc3Ryb3koKSB7XG4gICAgdGhpcy4kcGFyZW50LnRhYnMuc3BsaWNlKHRoaXMudGFiSW5kZXgsIDEpO1xuICB9LFxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogdGFiLnZ1ZT8wYzhjMjFiZlxuICoqLyIsIjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnLi90YWJzLnNjc3MnO1xuPC9zdHlsZT5cblxuPHRlbXBsYXRlIHNyYz1cIi4vdGFicy5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbi8qXG4gKiAgRXg6IDx0YWJzIGFjdGl2ZS10YWItaW5kZXg9XCIoSW50ZWdlcikgMFwiPlxuICogICAgICAgIDx0YWIgbGFiZWw9XCJUYWIgQVwiPlxuICogICAgICAgICAgQW55IGNvbnRlbnRcbiAqICAgICAgICA8L3RhYj5cbiAqICAgICAgICA8dGFiIGxhYmVsPVwiVGFiIEJcIiBpcy1kaXNhYmxlZD1cIihCb29sZWFuKSBmYWxzZVwiPlxuICogICAgICAgICAgQW55IGNvbnRlbnRcbiAqICAgICAgICA8L3RhYj5cbiAqICAgICAgIDx0YWJzPlxuKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgcHJvcHM6IHtcbiAgICBhY3RpdmVUYWJJbmRleDoge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogMFxuICAgIH1cbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIGlzQWN0aXZlKGluZGV4KSB7XG4gICAgICByZXR1cm4gYWN0aXZlVGFiSW5kZXggPT09IGluZGV4O1xuICAgIH1cbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGFiczogW11cbiAgICB9O1xuICB9LFxuICBtZXRob2RzOiB7XG4gICAgICBoYW5kbGVUYWJMaXN0Q2xpY2soaW5kZXgsIHRhYikge1xuICAgICAgICAgIGlmICghdGFiLmlzRGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlVGFiSW5kZXggPSBpbmRleDtcbiAgICAgICAgICB9XG4gICAgICB9XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHRhYnMudnVlP2VjNjYyN2M0XG4gKiovIiwiaW1wb3J0IEluZGV4IGZyb20gJy4vdmlld3MvaW5kZXgudnVlJztcbmltcG9ydCBTdGVwVHJhY2tlclBhZ2UgZnJvbSAnLi92aWV3cy9zdGVwLXRyYWNrZXItcGFnZS52dWUnO1xuaW1wb3J0IFRhYnNQYWdlIGZyb20gJy4vdmlld3MvdGFicy1wYWdlLnZ1ZSc7XG5pbXBvcnQgTGVnYWxQYWdlIGZyb20gJy4vdmlld3MvbGVnYWwtcGFnZS52dWUnO1xuaW1wb3J0IE92ZXJsYXlQYWdlIGZyb20gJy4vdmlld3Mvb3ZlcmxheS1wYWdlLnZ1ZSc7XG5pbXBvcnQgQ29sbGFwc2FibGVQYW5lbFBhZ2UgZnJvbSAnLi92aWV3cy9jb2xsYXBzYWJsZS1wYW5lbC1wYWdlLnZ1ZSc7XG5pbXBvcnQgQWxlcnRQYWdlIGZyb20gJy4vdmlld3MvYWxlcnQtcGFnZS52dWUnO1xuaW1wb3J0IFNwaW5uZXJQYWdlIGZyb20gJy4vdmlld3Mvc3Bpbm5lci1wYWdlLnZ1ZSc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgJy8nOiB7XG4gICAgY29tcG9uZW50OiBJbmRleFxuICB9LFxuICAnL2FsZXJ0Jzoge1xuICAgIGNvbXBvbmVudDoge1xuICAgICAgdGVtcGxhdGU6ICc8YWxlcnQtcGFnZT48L2FsZXJ0LXBhZ2U+JyxcbiAgICAgIGNvbXBvbmVudHM6IHsgQWxlcnRQYWdlIH1cbiAgICB9XG4gIH0sXG4gICcvc3Bpbm5lcic6IHtcbiAgICBjb21wb25lbnQ6IHtcbiAgICAgIHRlbXBsYXRlOiAnPHNwaW5uZXItcGFnZT48L3NwaW5uZXItcGFnZT4nLFxuICAgICAgY29tcG9uZW50czogeyBTcGlubmVyUGFnZSB9XG4gICAgfVxuICB9LFxuICAnL3N0ZXAtdHJhY2tlcic6IHtcbiAgICBjb21wb25lbnQ6IHtcbiAgICAgIHRlbXBsYXRlOiAnPHN0ZXAtdHJhY2tlci1wYWdlPjwvc3RlcC10cmFja2VyLXBhZ2U+JyxcbiAgICAgIGNvbXBvbmVudHM6IHsgU3RlcFRyYWNrZXJQYWdlIH1cbiAgICB9XG4gIH0sXG4gICcvdGFicyc6IHtcbiAgICBjb21wb25lbnQ6IHtcbiAgICAgIHRlbXBsYXRlOiAnPHRhYnMtcGFnZT48L3RhYnMtcGFnZT4nLFxuICAgICAgY29tcG9uZW50czogeyBUYWJzUGFnZSB9XG4gICAgfVxuICB9LFxuICAnL2xlZ2FsJzoge1xuICAgIGNvbXBvbmVudDoge1xuICAgICAgdGVtcGxhdGU6ICc8bGVnYWwtcGFnZT48L2xlZ2FsLXBhZ2U+JyxcbiAgICAgIGNvbXBvbmVudHM6IHsgTGVnYWxQYWdlIH1cbiAgICB9XG4gIH0sXG4gICcvb3ZlcmxheSc6IHtcbiAgICBjb21wb25lbnQ6IHtcbiAgICAgIHRlbXBsYXRlOiAnPG92ZXJsYXktcGFnZT48L292ZXJsYXktcGFnZT4nLFxuICAgICAgY29tcG9uZW50czogeyBPdmVybGF5UGFnZSB9XG4gICAgfVxuICB9LFxuICAnL2NvbGxhcHNhYmxlLXBhbmVsJzoge1xuICAgIGNvbXBvbmVudDoge1xuICAgICAgdGVtcGxhdGU6ICc8Y29sbGFwc2FibGUtcGFuZWwtcGFnZT48L2NvbGxhcHNhYmxlLXBhbmVsLXBhZ2U+JyxcbiAgICAgIGNvbXBvbmVudHM6IHsgQ29sbGFwc2FibGVQYW5lbFBhZ2UgfVxuICAgIH1cbiAgfVxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vZGV2L3NyYy9yb3V0ZXMuanNcbiAqKi8iLCIvKlxuICBAZGVzYyBBZGQgYmVoYXZpb3IgdG8gYW55IGVsZW1lbnQuIFdoZW4gY2xpY2tlZCwgaXQgd2lsbCBvcGVuIHRoZSBjb3JyZXNwb25kaW5nIG92ZXJsYXlcbiAgRXhhbXBsZTogPGJ1dHRvbiBvdmVybGF5LW9wZW5lcj1cIm15LW92ZXJsYXlcIj48L2J1dHRvbj5cbiovXG5leHBvcnQgZGVmYXVsdCB7XG4gIGlzTGl0ZXJhbDogdHJ1ZSxcbiAgZXZlbnRIYW5kbGVyKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy52bS4kcm9vdC4kYnJvYWRjYXN0KCdvdmVybGF5OjpvcGVuJywgdGhpcy5leHByZXNzaW9uKTtcbiAgICB0aGlzLnZtLiRyb290LiRicm9hZGNhc3QoJ292ZXJsYXlDb250YWluZXI6Om9wZW4nKTtcbiAgfSxcbiAgYmluZCgpIHtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5ldmVudEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gIH0sXG4gIHVuYmluZCgpIHtcbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5ldmVudEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gIH0sXG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvZGlyZWN0aXZlcy9vdmVybGF5LW9wZW5lci5qc1xuICoqLyIsImltcG9ydCBvdmVybGF5T3BlbmVyIGZyb20gJy4vZGlyZWN0aXZlcy9vdmVybGF5LW9wZW5lcic7XG5pbXBvcnQgc2V0Rm9jdXMgZnJvbSAnLi9kaXJlY3RpdmVzL3NldC1mb2N1cyc7XG5pbXBvcnQgU3RlcFRyYWNrZXIgZnJvbSAnLi9jb21wb25lbnRzL3N0ZXAtdHJhY2tlci9pbmRleC52dWUnO1xuaW1wb3J0IE92ZXJsYXlDb250YWluZXIgZnJvbSAnLi9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS1jb250YWluZXIudnVlJztcbmltcG9ydCBPdmVybGF5IGZyb20gJy4vY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXkudnVlJztcbmltcG9ydCBMZWdhbENvdW50ZXIgZnJvbSAnLi9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvdW50ZXIudnVlJztcbmltcG9ydCBMZWdhbENvbnRhaW5lciBmcm9tICcuL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY29udGFpbmVyLnZ1ZSc7XG5pbXBvcnQgVGFicyBmcm9tICcuL2NvbXBvbmVudHMvdGFiL3RhYnMudnVlJztcbmltcG9ydCBUYWIgZnJvbSAnLi9jb21wb25lbnRzL3RhYi90YWIudnVlJztcbmltcG9ydCBDb2xsYXBzYWJsZVBhbmVsIGZyb20gJy4vY29tcG9uZW50cy9jb2xsYXBzYWJsZS1wYW5lbC9pbmRleC52dWUnO1xuaW1wb3J0IEFsZXJ0IGZyb20gJy4vY29tcG9uZW50cy9hbGVydC9pbmRleC52dWUnO1xuaW1wb3J0IFNwaW5uZXIgZnJvbSAnLi9jb21wb25lbnRzL3NwaW5uZXIvaW5kZXgudnVlJztcblxubGV0IGNvbXBvbmVudHMgPSB7XG4gIFN0ZXBUcmFja2VyLFxuICBPdmVybGF5Q29udGFpbmVyLFxuICBPdmVybGF5LFxuICBMZWdhbENvdW50ZXIsXG4gIExlZ2FsQ29udGFpbmVyLFxuICBUYWJzLFxuICBUYWIsXG4gIENvbGxhcHNhYmxlUGFuZWwsXG4gIEFsZXJ0LFxuICBTcGlubmVyXG59O1xubGV0IGRpcmVjdGl2ZXMgPSB7XG4gIG92ZXJsYXlPcGVuZXIsXG4gIHNldEZvY3VzXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluc3RhbGwoVnVlKSB7XG4gIGZvciAobGV0IG5hbWUgaW4gY29tcG9uZW50cykge1xuICAgIFZ1ZS5jb21wb25lbnQobmFtZSwgY29tcG9uZW50c1tuYW1lXSk7XG4gIH1cbiAgZm9yIChsZXQgbmFtZSBpbiBkaXJlY3RpdmVzKSB7XG4gICAgVnVlLmRpcmVjdGl2ZShuYW1lLCBkaXJlY3RpdmVzW25hbWVdKTtcbiAgfVxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL21haW4uanNcbiAqKi8iLCJleHBvcnQgZGVmYXVsdCB7XG4gIG1ldGhvZHM6IHtcbiAgICByb290QnJvYWRjYXN0KC4uLmFyZ3MpIHtcbiAgICAgIHRoaXMuJGJyb2FkY2FzdC5hcHBseSh0aGlzLiRyb290LCBhcmdzKTtcbiAgICB9LFxuICB9LFxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL21peGlucy9ldmVudHMuanNcbiAqKi8iLCJleHBvcnQgZGVmYXVsdCB7XG4gIG1ldGhvZHM6IHtcbiAgICBwYXJzZUpTT04ocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSxcbiAgfSxcbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9taXhpbnMveGhyLXJlc3BvbnNlLmpzXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuaHlfYy1pY29ue2ZvbnQtZmFtaWx5OlRlbHVzIEljb24sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7dGV4dC1kZWNvcmF0aW9uOm5vbmU7dGV4dC1yZW5kZXJpbmc6b3B0aW1pemVMZWdpYmlsaXR5O2NvbG9yOmluaGVyaXQ7dmVydGljYWwtYWxpZ246bWlkZGxlO2ZvbnQtc2l6ZTppbmhlcml0O2xpbmUtaGVpZ2h0OmluaGVyaXR9Lmh5X2MtaWNvbl9fc3F1YXJle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToyLjVyZW07bGluZS1oZWlnaHQ6M3JlbTt3aWR0aDozcmVtO2hlaWdodDozcmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLTJ4e2ZvbnQtc2l6ZToyZW19Lmh5X2MtaWNvbi0tM3h7Zm9udC1zaXplOjNlbX0uaHlfYy1pY29uLS00eHtmb250LXNpemU6NGVtfS5oeV9jLWljb25fX3N0eWxlZ3VpZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjJyZW07bGluZS1oZWlnaHQ6NHJlbTt3aWR0aDo0cmVtO2hlaWdodDo0cmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLWNpcmNsZS10aGljay1vdXRsaW5lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMVxcXCJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMlxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNVxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA2XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1sb2dvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwOVxcXCJ9Lmh5X2MtaWNvbi0tYmFyLWNoYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMFxcXCJ9Lmh5X2MtaWNvbi0tcGljdHVyZS1mcmFtZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTFcXFwifS5oeV9jLWljb24tLXBhcGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEzXFxcIn0uaHlfYy1pY29uLS1mb2xkZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE0XFxcIn0uaHlfYy1pY29uLS1zaGFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTVcXFwifS5oeV9jLWljb24tLW1hZ25pZnktZ2xhc3M6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE2XFxcIn0uaHlfYy1pY29uLS13YXJuaW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOFxcXCJ9Lmh5X2MtaWNvbi0tc3Rhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTlcXFwifS5oeV9jLWljb24tLXN0YXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIwXFxcIn0uaHlfYy1pY29uLS1oZWFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjFcXFwifS5oeV9jLWljb24tLWxpZmVzYXZlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjJcXFwifS5oeV9jLWljb24tLWhhbWJ1cmdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjRcXFwifS5oeV9jLWljb24tLWdyaWQtc3F1YXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNVxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNlxcXCJ9Lmh5X2MtaWNvbi0tbGlnaHRidWxiOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyN1xcXCJ9Lmh5X2MtaWNvbi0tc3BlZWRvbWV0ZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI4XFxcIn0uaHlfYy1pY29uLS1hZGQtcmVtb3ZlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOVxcXCJ9Lmh5X2MtaWNvbi0tY2FydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzBcXFwifS5oeV9jLWljb24tLXR3aXR0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMxXFxcIn0uaHlfYy1pY29uLS1mYWNlYm9vazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzJcXFwifS5oeV9jLWljb24tLXlvdXR1YmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMzXFxcIn0uaHlfYy1pY29uLS1nb29nbGUtcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzRcXFwifS5oeV9jLWljb24tLXRyZW5kLWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM1XFxcIn0uaHlfYy1pY29uLS1wbGF5LWJ1dHRvbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzZcXFwifS5oeV9jLWljb24tLXZpZGVvLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzN1xcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzhcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOVxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQwXFxcIn0uaHlfYy1pY29uLS1jbG9jay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDFcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQyXFxcIn0uaHlfYy1pY29uLS10YWJsZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQzXFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ0XFxcIn0uaHlfYy1pY29uLS1tb3VzZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDVcXFwifS5oeV9jLWljb24tLXByaWNldGFnOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItbm90ZXMtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ3XFxcIn0uaHlfYy1pY29uLS10djpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDhcXFwifS5oeV9jLWljb24tLWZpbG06YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ5XFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTBcXFwifS5oeV9jLWljb24tLXVzYi1zdGljazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTFcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUyXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1M1xcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NVxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU2XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU3XFxcIn0uaHlfYy1pY29uLS11c2VyczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTlcXFwifS5oeV9jLWljb24tLXVzZXJzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYwXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1ib3hlZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjNcXFwifS5oeV9jLWljb24tLWdlYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY0XFxcIn0uaHlfYy1pY29uLS1nZWFyLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY1XFxcIn0uaHlfYy1pY29uLS1nZWFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NlxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjhcXFwifS5oeV9jLWljb24tLXBhZGxvY2staW52ZXJldGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OVxcXCJ9Lmh5X2MtaWNvbi0tc3RhY2tlZC1wYXBlcnMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcxXFxcIn0uaHlfYy1pY29uLS1tdXNpYy1ub3RlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MlxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzNcXFwifS5oeV9jLWljb24tLXRhYmxldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzRcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzVcXFwifS5oeV9jLWljb24tLW1vdXNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NlxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc3XFxcIn0uaHlfYy1pY29uLS1wYXBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzhcXFwifS5oeV9jLWljb24tLXR2LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OVxcXCJ9Lmh5X2MtaWNvbi0tZmlsbS1jbGFwcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MFxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgxXFxcIn0uaHlfYy1pY29uLS1waG9uZS1oYW5kc2V0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MlxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODRcXFwifS5oeV9jLWljb24tLWhvbWUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODVcXFwifS5oeV9jLWljb24tLWhvbWUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg2XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODhcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTJcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkzXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTRcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk1XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk2XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk3XFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTlcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAwXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDFcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMlxcXCJ9Lmh5X2MtaWNvbi0teDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDRcXFwifS5oeV9jLWljb24tLXgtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDVcXFwifS5oeV9jLWljb24tLXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA2XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcms6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA4XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDlcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTBcXFwifS5oeV9jLWljb24tLWluZmluaXR5OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMVxcXCJ9Lmh5X2MtaWNvbi0tcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTJcXFwifS5oeV9jLWljb24tLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTNcXFwifS5oeV9jLWljb24tLXBsdXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE0XFxcIn0uaHlfYy1pY29uLS1taW51czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTVcXFwifS5oeV9jLWljb24tLW1pbnVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE2XFxcIn0uaHlfYy1pY29uLS1taW51cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTdcXFwifS5oeV9jLWljb24tLWNoYXQtYnViYmxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExOVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMFxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjFcXFwifS5oeV9jLWljb24tLWNoYXQteDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjJcXFwifS5oeV9jLWljb24tLWNoYXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIzXFxcIn0uaHlfYy1pY29uLS1zaW0tY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjVcXFwifS5oeV9jLWljb24tLWNhbGN1bGF0b3I6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI2XFxcIn0uaHlfYy1pY29uLS1ibHVldG9vdGgtaGVhZHNldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjdcXFwifS5oeV9jLWljb24tLW91dGdvaW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI5XFxcIn0uaHlfYy1pY29uLS1pbmNvbWluZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMFxcXCJ9Lmh5X2MtaWNvbi0tY2F1dGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzFcXFwifS5oeV9jLWljb24tLXdpZmktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMyXFxcIn0uaHlfYy1pY29uLS13aWZpOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzM1xcXCJ9Lmh5X2MtaWNvbi0tdGhpbi1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM1XFxcIn0uaHlfYy1pY29uLS1pbmZvLWludmVydGVkOmJlZm9yZSwuaHlfYy1pY29uLS1pbmZvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNlxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM4XFxcIn0uaHlfYy1pY29uLS1nbG9iZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDBcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDJcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDRcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ1XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDZcXFwifS5oeV9jLWljb24tLW92ZXJ2aWV3LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0N1xcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtY2lyY2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OFxcXCJ9Lmh5X2MtaWNvbi0tcHVsc2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ5XFxcIn0uaHlfYy1pY29uLS1taWtlLW1vYmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTBcXFwifS5oeV9jLWljb24tLXJld2FyZHMtYmFkZ2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUxXFxcIn0uaHlfYy1pY29uLS1maWx0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUyXFxcIn0uaHlfYy1pY29uLS1zY2hlZHVsZS10YWxrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1M1xcXCJ9Lmh5X2MtaWNvbi0td2FybmluZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTRcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTVcXFwifS5oeV9jLWljb24tLWNhcnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU2XFxcIn0uaHlfYy1pY29uLS1saXZlLWNoYXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU3XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OFxcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTlcXFwifS5oeV9jLWljb24tLWNsb3VkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MFxcXCJ9Lmh5X2MtaWNvbi0tZGF0YTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjFcXFwifS5oeV9jLWljb24tLWRlbGl2ZXJ5LXRydWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MlxcXCJ9Lmh5X2MtaWNvbi0tcHJvdGVjdGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjNcXFwifS5oeV9jLWljb24tLWNvbG91ci1waWNrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY0XFxcIn0uaHlfYy1pY29uLS1tdWx0aS1hY2NvdW50LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NVxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY2XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjdcXFwifS5oeV9jLWljb24tLWRvbGxhci1zaWduOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OFxcXCJ9Lmh5X2MtaWNvbi0tbGluay1hY2NvdW50OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OVxcXCJ9Lmh5X2MtaWNvbi0tZGF0YS1tYW5hZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MFxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcxXFxcIn0uaHlfYy1pY29uLS10b29scy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzJcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3M1xcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc0XFxcIn0uaHlfYy1pY29uLS1pcC1mYXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc1XFxcIn0uaHlfYy1pY29uLS1pcC1mYXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc2XFxcIn0uaHlfYy1pY29uLS1saW5rZWQtaW4taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc3XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzhcXFwifS5oeV9jLWljb24tLW1pY3JvcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc5XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODBcXFwifS5oeV9jLWljb24tLW5ldHdvcmtpbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgxXFxcIn0uaHlfYy1pY29uLS1jeWNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODJcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODNcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODRcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtYWRkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NVxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg2XFxcIn0uc2dfYy1hcGktdGFibGV7Ym9yZGVyLXNwYWNpbmc6MCAxMHB4O3dpZHRoOjEwMCV9LnNnX2MtYXBpLXRhYmxlIHRyey13ZWJraXQtYm94LWZsZXg6MTstbXMtZmxleDoxO2ZsZXg6MX0uc2dfYy1hcGktdGFibGUgdGgsLnNnX2MtYXBpLXRhYmxlIHRyOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2VlZX0uc2dfYy1hcGktdGFibGUgdGR7dGV4dC1hbGlnbjpjZW50ZXJ9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9kZXYvc3JjL2NvbXBvbmVudHMvYXBpLXRhYmxlL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDcwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5zZ19jLW5hdntkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmZpeGVkO2xlZnQ6MDt3aWR0aDoyNXJlbTtoZWlnaHQ6MTAwJTtib3JkZXItcmlnaHQ6LjFyZW0gc29saWQgI2UyZTJlMjtwYWRkaW5nOjJyZW07cGFkZGluZy10b3A6NjhweDtvdmVyZmxvdy14OmhpZGRlbjtvdmVyZmxvdy15OmF1dG87YmFja2dyb3VuZC1jb2xvcjojZmZmO3otaW5kZXg6OTk5fS5zZ19jLW5hdl9fc2VjdGlvbntmb250LWZhbWlseTpUZWx1cyBNZWRpdW0sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7Zm9udC1zaXplOjEuMnJlbTtib3JkZXItYm90dG9tOi4xcmVtIHNvbGlkICNlMmUyZTI7cGFkZGluZy10b3A6MXJlbTtwYWRkaW5nLWJvdHRvbTouNXJlbTttYXJnaW46MXJlbSAwfS5zZ19jLW5hdl9fbGlzdC1pdGVte3BhZGRpbmc6NXB4IDB9LnNnX2MtbmF2X19saW5rOmhvdmVye2NvbG9yOiM4YzY4YTZ9LnNnX2MtbmF2X19saW5rLS1hY3RpdmV7Y29sb3I6IzU3YTcwOH1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2Rldi9zcmMvY29tcG9uZW50cy9zaWRlLW5hdi9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSA3MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJoZWFkZXIuc2dfYy1zaXRlLWhlYWRlcntiYWNrZ3JvdW5kLWNvbG9yOiM0YjI4NmQ7aGVpZ2h0OjY4cHg7dGV4dC1hbGlnbjpsZWZ0O3Bvc2l0aW9uOmZpeGVkO3dpZHRoOjEwMCU7ei1pbmRleDo5OTk5fWhlYWRlci5zZ19jLXNpdGUtaGVhZGVyIC5zZ19jLXNpdGUtaGVhZGVyX19jb250YWluZXJ7aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJX1oZWFkZXIuc2dfYy1zaXRlLWhlYWRlciAuc2dfYy1zaXRlLWhlYWRlcl9fY29udGFpbmVyIGltZy5sb2dve2hlaWdodDoxMDAlO3BhZGRpbmc6MjBweDtkaXNwbGF5OmlubGluZS1ibG9jazttYXgtd2lkdGg6MTAwJX1oZWFkZXIuc2dfYy1zaXRlLWhlYWRlciAuc2dfYy1zaXRlLWhlYWRlcl9fdG9nZ2xlYnRue2NvbG9yOiNmZmY7Zm9udC1zaXplOjJyZW07bWFyZ2luOjA7YmFja2dyb3VuZDpoc2xhKDAsMCUsMTAwJSwuMSk7cGFkZGluZzoxLjVyZW07ZmxvYXQ6bGVmdDtjdXJzb3I6cG9pbnRlcjtib3JkZXI6MDtoZWlnaHQ6MTAwJTtkaXNwbGF5OmlubGluZS1ibG9ja31cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2Rldi9zcmMvY29tcG9uZW50cy9zaXRlLWhlYWRlci9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSA3MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJib2R5e2JhY2tncm91bmQtY29sb3I6I2Y1ZjZmN30uc2dfYy1zaXRlX19tYWlue3BhZGRpbmctdG9wOjY4cHg7bWFyZ2luLWxlZnQ6MjVyZW19QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDo1OTlweCl7LnNnX2Mtc2l0ZV9fbWFpbnttYXJnaW4tbGVmdDowfX0uc2dfYy1kZW1ve21hcmdpbjoyMHB4IDB9LnNnX2MtZGVtb19fY29udGFpbmVye2JhY2tncm91bmQtY29sb3I6I2ZmZjtvdmVyZmxvdzpoaWRkZW47Ym9yZGVyLXJhZGl1czo1cHg7Ym9yZGVyOjFweCBzb2xpZCAjZWVlO3BhZGRpbmc6MjVweDttYXJnaW46MjBweCAwfWNvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de2NvbG9yOiMwMDA7YmFja2dyb3VuZDpub25lO3RleHQtc2hhZG93OjAgMXB4ICNmZmY7Zm9udC1mYW1pbHk6Q29uc29sYXMsTW9uYWNvLEFuZGFsZSBNb25vLFVidW50dSBNb25vLG1vbm9zcGFjZTt0ZXh0LWFsaWduOmxlZnQ7d2hpdGUtc3BhY2U6cHJlO3dvcmQtc3BhY2luZzpub3JtYWw7d29yZC1icmVhazpub3JtYWw7d29yZC13cmFwOm5vcm1hbDtsaW5lLWhlaWdodDoxLjU7LW1vei10YWItc2l6ZTo0Oy1vLXRhYi1zaXplOjQ7dGFiLXNpemU6NDstd2Via2l0LWh5cGhlbnM6bm9uZTstbXMtaHlwaGVuczpub25lO2h5cGhlbnM6bm9uZX1jb2RlW2NsYXNzKj1sYW5ndWFnZS1dOjotbW96LXNlbGVjdGlvbixjb2RlW2NsYXNzKj1sYW5ndWFnZS1dIDo6LW1vei1zZWxlY3Rpb24scHJlW2NsYXNzKj1sYW5ndWFnZS1dOjotbW96LXNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV0gOjotbW96LXNlbGVjdGlvbnt0ZXh0LXNoYWRvdzpub25lO2JhY2tncm91bmQ6I2IzZDRmY31jb2RlW2NsYXNzKj1sYW5ndWFnZS1dOjpzZWxlY3Rpb24sY29kZVtjbGFzcyo9bGFuZ3VhZ2UtXSA6OnNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV06OnNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV0gOjpzZWxlY3Rpb257dGV4dC1zaGFkb3c6bm9uZTtiYWNrZ3JvdW5kOiNiM2Q0ZmN9QG1lZGlhIHByaW50e2NvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de3RleHQtc2hhZG93Om5vbmV9fXByZVtjbGFzcyo9bGFuZ3VhZ2UtXXtwYWRkaW5nOjFlbTttYXJnaW46LjVlbSAwO292ZXJmbG93OmF1dG99Om5vdChwcmUpPmNvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de2JhY2tncm91bmQ6I2Y1ZjJmMH06bm90KHByZSk+Y29kZVtjbGFzcyo9bGFuZ3VhZ2UtXXtwYWRkaW5nOi4xZW07Ym9yZGVyLXJhZGl1czouM2VtO3doaXRlLXNwYWNlOm5vcm1hbH0udG9rZW4uY2RhdGEsLnRva2VuLmNvbW1lbnQsLnRva2VuLmRvY3R5cGUsLnRva2VuLnByb2xvZ3tjb2xvcjojNzA4MDkwfS50b2tlbi5wdW5jdHVhdGlvbntjb2xvcjojOTk5fS5uYW1lc3BhY2V7b3BhY2l0eTouN30udG9rZW4uYm9vbGVhbiwudG9rZW4uY29uc3RhbnQsLnRva2VuLmRlbGV0ZWQsLnRva2VuLm51bWJlciwudG9rZW4ucHJvcGVydHksLnRva2VuLnN5bWJvbCwudG9rZW4udGFne2NvbG9yOiM5MDV9LnRva2VuLmF0dHItbmFtZSwudG9rZW4uYnVpbHRpbiwudG9rZW4uY2hhciwudG9rZW4uaW5zZXJ0ZWQsLnRva2VuLnNlbGVjdG9yLC50b2tlbi5zdHJpbmd7Y29sb3I6IzY5MH0ubGFuZ3VhZ2UtY3NzIC50b2tlbi5zdHJpbmcsLnN0eWxlIC50b2tlbi5zdHJpbmcsLnRva2VuLmVudGl0eSwudG9rZW4ub3BlcmF0b3IsLnRva2VuLnVybHtjb2xvcjojYTY3ZjU5O2JhY2tncm91bmQ6aHNsYSgwLDAlLDEwMCUsLjUpfS50b2tlbi5hdHJ1bGUsLnRva2VuLmF0dHItdmFsdWUsLnRva2VuLmtleXdvcmR7Y29sb3I6IzA3YX0udG9rZW4uZnVuY3Rpb257Y29sb3I6I2RkNGE2OH0udG9rZW4uaW1wb3J0YW50LC50b2tlbi5yZWdleCwudG9rZW4udmFyaWFibGV7Y29sb3I6I2U5MH0udG9rZW4uYm9sZCwudG9rZW4uaW1wb3J0YW50e2ZvbnQtd2VpZ2h0OjcwMH0udG9rZW4uaXRhbGlje2ZvbnQtc3R5bGU6aXRhbGljfS50b2tlbi5lbnRpdHl7Y3Vyc29yOmhlbHB9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDczXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5oeV9jLWljb257Zm9udC1mYW1pbHk6VGVsdXMgSWNvbixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjt0ZXh0LWRlY29yYXRpb246bm9uZTt0ZXh0LXJlbmRlcmluZzpvcHRpbWl6ZUxlZ2liaWxpdHk7Y29sb3I6aW5oZXJpdDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Zm9udC1zaXplOmluaGVyaXQ7bGluZS1oZWlnaHQ6aW5oZXJpdH0uaHlfYy1pY29uX19zcXVhcmV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjIuNXJlbTtsaW5lLWhlaWdodDozcmVtO3dpZHRoOjNyZW07aGVpZ2h0OjNyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tMnh7Zm9udC1zaXplOjJlbX0uaHlfYy1pY29uLS0zeHtmb250LXNpemU6M2VtfS5oeV9jLWljb24tLTR4e2ZvbnQtc2l6ZTo0ZW19Lmh5X2MtaWNvbl9fc3R5bGVndWlkZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6MnJlbTtsaW5lLWhlaWdodDo0cmVtO3dpZHRoOjRyZW07aGVpZ2h0OjRyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXRoaWNrLW91dGxpbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uaHlfYy1pY29uLS1jaXJjbGUtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA1XFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDZcXFwifS5oeV9jLWljb24tLXRlbHVzLWxvZ286YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA5XFxcIn0uaHlfYy1pY29uLS1iYXItY2hhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEwXFxcIn0uaHlfYy1pY29uLS1waWN0dXJlLWZyYW1lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMVxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEyXFxcIn0uaHlfYy1pY29uLS1wYXBlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTNcXFwifS5oeV9jLWljb24tLWZvbGRlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTRcXFwifS5oeV9jLWljb24tLXNoYXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNVxcXCJ9Lmh5X2MtaWNvbi0tbWFnbmlmeS1nbGFzczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTZcXFwifS5oeV9jLWljb24tLXdhcm5pbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE4XFxcIn0uaHlfYy1pY29uLS1zdGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOVxcXCJ9Lmh5X2MtaWNvbi0tc3RhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjBcXFwifS5oeV9jLWljb24tLWhlYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMVxcXCJ9Lmh5X2MtaWNvbi0tbGlmZXNhdmVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMlxcXCJ9Lmh5X2MtaWNvbi0taGFtYnVyZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNFxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI1XFxcIn0uaHlfYy1pY29uLS1ncmlkLWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI2XFxcIn0uaHlfYy1pY29uLS1saWdodGJ1bGI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI3XFxcIn0uaHlfYy1pY29uLS1zcGVlZG9tZXRlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjhcXFwifS5oeV9jLWljb24tLWFkZC1yZW1vdmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI5XFxcIn0uaHlfYy1pY29uLS1jYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMFxcXCJ9Lmh5X2MtaWNvbi0tdHdpdHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzFcXFwifS5oeV9jLWljb24tLWZhY2Vib29rOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMlxcXCJ9Lmh5X2MtaWNvbi0teW91dHViZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzNcXFwifS5oeV9jLWljb24tLWdvb2dsZS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNFxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzVcXFwifS5oeV9jLWljb24tLXBsYXktYnV0dG9uLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNlxcXCJ9Lmh5X2MtaWNvbi0tdmlkZW8taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM3XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM5XFxcIn0uaHlfYy1pY29uLS1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDBcXFwifS5oeV9jLWljb24tLWNsb2NrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MVxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDJcXFwifS5oeV9jLWljb24tLXRhYmxldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDNcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDRcXFwifS5oeV9jLWljb24tLW1vdXNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NVxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ2XFxcIn0uaHlfYy1pY29uLS1wYXBlci1ub3Rlcy1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDdcXFwifS5oeV9jLWljb24tLXR2OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OFxcXCJ9Lmh5X2MtaWNvbi0tZmlsbTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDlcXFwifS5oeV9jLWljb24tLWVudmVsb3BlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MFxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MVxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTJcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUzXFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU1XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTZcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTdcXFwifS5oeV9jLWljb24tLXVzZXJzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1OVxcXCJ9Lmh5X2MtaWNvbi0tdXNlcnMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjBcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYyXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWJveGVkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2M1xcXCJ9Lmh5X2MtaWNvbi0tZ2VhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjRcXFwifS5oeV9jLWljb24tLWdlYXItY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjVcXFwifS5oeV9jLWljb24tLWdlYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY2XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OFxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jay1pbnZlcmV0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY5XFxcIn0uaHlfYy1pY29uLS1zdGFja2VkLXBhcGVycy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzFcXFwifS5oeV9jLWljb24tLW11c2ljLW5vdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcyXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3M1xcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NVxcXCJ9Lmh5X2MtaWNvbi0tbW91c2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc2XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzdcXFwifS5oeV9jLWljb24tLXBhcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OFxcXCJ9Lmh5X2MtaWNvbi0tdHYtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc5XFxcIn0uaHlfYy1pY29uLS1maWxtLWNsYXBwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgwXFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODFcXFwifS5oeV9jLWljb24tLXBob25lLWhhbmRzZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgyXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgzXFxcIn0uaHlfYy1pY29uLS1ob21lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NVxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODZcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTNcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTVcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24tY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTZcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTdcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDBcXFwifS5oeV9jLWljb24tLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAyXFxcIn0uaHlfYy1pY29uLS14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNFxcXCJ9Lmh5X2MtaWNvbi0teC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNVxcXCJ9Lmh5X2MtaWNvbi0teC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDZcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDhcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOVxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTExXFxcIn0uaHlfYy1pY29uLS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMlxcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExM1xcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTRcXFwifS5oeV9jLWljb24tLW1pbnVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNVxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTZcXFwifS5oeV9jLWljb24tLW1pbnVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExN1xcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1idWJibGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE5XFxcIn0uaHlfYy1pY29uLS1jaGF0LWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIwXFxcIn0uaHlfYy1pY29uLS1jaGF0LWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMlxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjNcXFwifS5oeV9jLWljb24tLXNpbS1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNVxcXCJ9Lmh5X2MtaWNvbi0tY2FsY3VsYXRvcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjZcXFwifS5oeV9jLWljb24tLWJsdWV0b290aC1oZWFkc2V0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyN1xcXCJ9Lmh5X2MtaWNvbi0tb3V0Z29pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjlcXFwifS5oeV9jLWljb24tLWluY29taW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMwXFxcIn0uaHlfYy1pY29uLS1jYXV0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzJcXFwifS5oeV9jLWljb24tLXdpZmk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMzXFxcIn0uaHlfYy1pY29uLS10aGluLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzVcXFwifS5oeV9jLWljb24tLWluZm8taW52ZXJ0ZWQ6YmVmb3JlLC5oeV9jLWljb24tLWluZm86YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM2XFxcIn0uaHlfYy1pY29uLS10cmVuZC11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzhcXFwifS5oeV9jLWljb24tLWdsb2JlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MlxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NFxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDVcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NlxcXCJ9Lmh5X2MtaWNvbi0tb3ZlcnZpZXctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ3XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1jaXJjbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ4XFxcIn0uaHlfYy1pY29uLS1wdWxzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDlcXFwifS5oeV9jLWljb24tLW1pa2UtbW9iaWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MFxcXCJ9Lmh5X2MtaWNvbi0tcmV3YXJkcy1iYWRnZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTFcXFwifS5oeV9jLWljb24tLWZpbHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTJcXFwifS5oeV9jLWljb24tLXNjaGVkdWxlLXRhbGs6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUzXFxcIn0uaHlfYy1pY29uLS13YXJuaW5nOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NVxcXCJ9Lmh5X2MtaWNvbi0tY2FydC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTZcXFwifS5oeV9jLWljb24tLWxpdmUtY2hhdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTdcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3QtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU4XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OVxcXCJ9Lmh5X2MtaWNvbi0tY2xvdWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYwXFxcIn0uaHlfYy1pY29uLS1kYXRhOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MVxcXCJ9Lmh5X2MtaWNvbi0tZGVsaXZlcnktdHJ1Y2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYyXFxcIn0uaHlfYy1pY29uLS1wcm90ZWN0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2M1xcXCJ9Lmh5X2MtaWNvbi0tY29sb3VyLXBpY2tlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjRcXFwifS5oeV9jLWljb24tLW11bHRpLWFjY291bnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY1XFxcIn0uaHlfYy1pY29uLS1hY2Nlc3Nvcmllcy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjZcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2N1xcXCJ9Lmh5X2MtaWNvbi0tZG9sbGFyLXNpZ246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY4XFxcIn0uaHlfYy1pY29uLS1saW5rLWFjY291bnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY5XFxcIn0uaHlfYy1pY29uLS1kYXRhLW1hbmFnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcwXFxcIn0uaHlfYy1pY29uLS1hY2Nlc3NvcmllczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzFcXFwifS5oeV9jLWljb24tLXRvb2xzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MlxcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTczXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzRcXFwifS5oeV9jLWljb24tLWlwLWZheDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzVcXFwifS5oeV9jLWljb24tLWlwLWZheC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzZcXFwifS5oeV9jLWljb24tLWxpbmtlZC1pbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzdcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OFxcXCJ9Lmh5X2MtaWNvbi0tbWljcm9waG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzlcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MFxcXCJ9Lmh5X2MtaWNvbi0tbmV0d29ya2luZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODFcXFwifS5oeV9jLWljb24tLWN5Y2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MlxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4M1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NFxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1hZGQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg1XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODZcXFwifS5mYWRlLXRyYW5zaXRpb257LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZX0uZmFkZS1lbnRlciwuZmFkZS1sZWF2ZXtvcGFjaXR5OjB9LmMtYWxlcnR7cG9zaXRpb246cmVsYXRpdmU7cGFkZGluZzo3cHggMTVweDttYXJnaW4tYm90dG9tOjFyZW07Ym9yZGVyOjFweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItcmFkaXVzOi4yNXJlbX0uYy1hbGVydC0taW5mb3tiYWNrZ3JvdW5kLWNvbG9yOiMzMzM7Ym9yZGVyLWNvbG9yOiMwMDA7Y29sb3I6I2ZmZn0uYy1hbGVydC0taW5mbyBidXR0b257Y29sb3I6I2ZmZn0uYy1hbGVydC0tc3VjY2Vzc3tiYWNrZ3JvdW5kLWNvbG9yOiNlNmZmY2M7Ym9yZGVyLWNvbG9yOiM5ZjM7Y29sb3I6IzQwODAwMH0uYy1hbGVydC0tZXJyb3J7YmFja2dyb3VuZC1jb2xvcjojZjhkZGUzO2JvcmRlci1jb2xvcjojZjJjMGNhO2NvbG9yOiNjODEyMzV9LmMtYWxlcnRfX2Nsb3NlLWJ1dHRvbntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDoxMHB4Oy13ZWJraXQtYXBwZWFyYW5jZTpub25lO3BhZGRpbmc6MDtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kOjAgMDtib3JkZXI6MDtmb250LXNpemU6Mi41cmVtO29wYWNpdHk6LjJ9LmMtYWxlcnRfX2Nsb3NlLWJ1dHRvbjpob3ZlcntvcGFjaXR5Oi4zfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvYWxlcnQvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gNzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmh5X2MtaWNvbntmb250LWZhbWlseTpUZWx1cyBJY29uLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO3RleHQtZGVjb3JhdGlvbjpub25lO3RleHQtcmVuZGVyaW5nOm9wdGltaXplTGVnaWJpbGl0eTtjb2xvcjppbmhlcml0O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtmb250LXNpemU6aW5oZXJpdDtsaW5lLWhlaWdodDppbmhlcml0fS5oeV9jLWljb25fX3NxdWFyZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6Mi41cmVtO2xpbmUtaGVpZ2h0OjNyZW07d2lkdGg6M3JlbTtoZWlnaHQ6M3JlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS0yeHtmb250LXNpemU6MmVtfS5oeV9jLWljb24tLTN4e2ZvbnQtc2l6ZTozZW19Lmh5X2MtaWNvbi0tNHh7Zm9udC1zaXplOjRlbX0uaHlfYy1pY29uX19zdHlsZWd1aWRle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToycmVtO2xpbmUtaGVpZ2h0OjRyZW07d2lkdGg6NHJlbTtoZWlnaHQ6NHJlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS1jaXJjbGUtdGhpY2stb3V0bGluZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDFcXFwifS5oeV9jLWljb24tLWNpcmNsZS1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDJcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDVcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtbG9nbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDlcXFwifS5oeV9jLWljb24tLWJhci1jaGFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTBcXFwifS5oeV9jLWljb24tLXBpY3R1cmUtZnJhbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDExXFxcIn0uaHlfYy1pY29uLS1wYXBlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTJcXFwifS5oeV9jLWljb24tLXBhcGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxM1xcXCJ9Lmh5X2MtaWNvbi0tZm9sZGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNFxcXCJ9Lmh5X2MtaWNvbi0tc2hhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE1XFxcIn0uaHlfYy1pY29uLS1tYWduaWZ5LWdsYXNzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNlxcXCJ9Lmh5X2MtaWNvbi0td2FybmluZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMThcXFwifS5oeV9jLWljb24tLXN0YXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE5XFxcIn0uaHlfYy1pY29uLS1zdGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMFxcXCJ9Lmh5X2MtaWNvbi0taGVhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIxXFxcIn0uaHlfYy1pY29uLS1saWZlc2F2ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIyXFxcIn0uaHlfYy1pY29uLS1oYW1idXJnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI0XFxcIn0uaHlfYy1pY29uLS1ncmlkLXNxdWFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjVcXFwifS5oeV9jLWljb24tLWdyaWQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjZcXFwifS5oeV9jLWljb24tLWxpZ2h0YnVsYjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjdcXFwifS5oeV9jLWljb24tLXNwZWVkb21ldGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOFxcXCJ9Lmh5X2MtaWNvbi0tYWRkLXJlbW92ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjlcXFwifS5oeV9jLWljb24tLWNhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMwXFxcIn0uaHlfYy1pY29uLS10d2l0dGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMVxcXCJ9Lmh5X2MtaWNvbi0tZmFjZWJvb2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMyXFxcIn0uaHlfYy1pY29uLS15b3V0dWJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzM1xcXCJ9Lmh5X2MtaWNvbi0tZ29vZ2xlLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM0XFxcIn0uaHlfYy1pY29uLS10cmVuZC1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNVxcXCJ9Lmh5X2MtaWNvbi0tcGxheS1idXR0b24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM2XFxcIn0uaHlfYy1pY29uLS12aWRlby1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzdcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM4XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzlcXFwifS5oeV9jLWljb24tLWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MFxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQxXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MlxcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NFxcXCJ9Lmh5X2MtaWNvbi0tbW91c2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ1XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDZcXFwifS5oeV9jLWljb24tLXBhcGVyLW5vdGVzLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0N1xcXCJ9Lmh5X2MtaWNvbi0tdHY6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ4XFxcIn0uaHlfYy1pY29uLS1maWxtOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OVxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUwXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUxXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MlxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTNcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTVcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NlxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1N1xcXCJ9Lmh5X2MtaWNvbi0tdXNlcnM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU5XFxcIn0uaHlfYy1pY29uLS11c2Vycy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MFxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjJcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtYm94ZWQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYzXFxcIn0uaHlfYy1pY29uLS1nZWFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NFxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NVxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjZcXFwifS5oeV9jLWljb24tLXBhZGxvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY4XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrLWludmVyZXRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjlcXFwifS5oeV9jLWljb24tLXN0YWNrZWQtcGFwZXJzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MVxcXCJ9Lmh5X2MtaWNvbi0tbXVzaWMtbm90ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzJcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDczXFxcIn0uaHlfYy1pY29uLS10YWJsZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc0XFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc1XFxcIn0uaHlfYy1pY29uLS1tb3VzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzZcXFwifS5oeV9jLWljb24tLXByaWNldGFnLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3N1xcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc4XFxcIn0uaHlfYy1pY29uLS10di1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzlcXFwifS5oeV9jLWljb24tLWZpbG0tY2xhcHBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODBcXFwifS5oeV9jLWljb24tLWVudmVsb3BlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MVxcXCJ9Lmh5X2MtaWNvbi0tcGhvbmUtaGFuZHNldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODJcXFwifS5oeV9jLWljb24tLXVzYi1zdGljay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODNcXFwifS5oeV9jLWljb24tLWhvbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg0XFxcIn0uaHlfYy1pY29uLS1ob21lLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg1XFxcIn0uaHlfYy1pY29uLS1ob21lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NlxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTFcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkyXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5M1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk0XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5N1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOThcXFwifS5oeV9jLWljb24tLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk5XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDJcXFwifS5oeV9jLWljb24tLXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA0XFxcIn0uaHlfYy1pY29uLS14LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA1XFxcIn0uaHlfYy1pY29uLS14LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNlxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOFxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA5XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEwXFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTFcXFwifS5oeV9jLWljb24tLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEyXFxcIn0uaHlfYy1pY29uLS1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEzXFxcIn0uaHlfYy1pY29uLS1wbHVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNFxcXCJ9Lmh5X2MtaWNvbi0tbWludXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE1XFxcIn0uaHlfYy1pY29uLS1taW51cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNlxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE3XFxcIn0uaHlfYy1pY29uLS1jaGF0LWJ1YmJsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTlcXFwifS5oeV9jLWljb24tLWNoYXQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjBcXFwifS5oeV9jLWljb24tLWNoYXQtY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIxXFxcIn0uaHlfYy1pY29uLS1jaGF0LXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIyXFxcIn0uaHlfYy1pY29uLS1jaGF0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyM1xcXCJ9Lmh5X2MtaWNvbi0tc2ltLWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI1XFxcIn0uaHlfYy1pY29uLS1jYWxjdWxhdG9yOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNlxcXCJ9Lmh5X2MtaWNvbi0tYmx1ZXRvb3RoLWhlYWRzZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI3XFxcIn0uaHlfYy1pY29uLS1vdXRnb2luZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyOVxcXCJ9Lmh5X2MtaWNvbi0taW5jb21pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzBcXFwifS5oeV9jLWljb24tLWNhdXRpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMxXFxcIn0uaHlfYy1pY29uLS13aWZpLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMlxcXCJ9Lmh5X2MtaWNvbi0td2lmaTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzNcXFwifS5oeV9jLWljb24tLXRoaW4tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNVxcXCJ9Lmh5X2MtaWNvbi0taW5mby1pbnZlcnRlZDpiZWZvcmUsLmh5X2MtaWNvbi0taW5mbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzZcXFwifS5oeV9jLWljb24tLXRyZW5kLXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzOFxcXCJ9Lmh5X2MtaWNvbi0tZ2xvYmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQwXFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQyXFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ0XFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NVxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ2XFxcIn0uaHlfYy1pY29uLS1vdmVydmlldy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDdcXFwifS5oeV9jLWljb24tLXRlbHVzLWNpcmNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDhcXFwifS5oeV9jLWljb24tLXB1bHNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OVxcXCJ9Lmh5X2MtaWNvbi0tbWlrZS1tb2JpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUwXFxcIn0uaHlfYy1pY29uLS1yZXdhcmRzLWJhZGdlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MVxcXCJ9Lmh5X2MtaWNvbi0tZmlsdGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MlxcXCJ9Lmh5X2MtaWNvbi0tc2NoZWR1bGUtdGFsazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTNcXFwifS5oeV9jLWljb24tLXdhcm5pbmc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU0XFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU1XFxcIn0uaHlfYy1pY29uLS1jYXJ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NlxcXCJ9Lmh5X2MtaWNvbi0tbGl2ZS1jaGF0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1N1xcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNThcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3Q6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU5XFxcIn0uaHlfYy1pY29uLS1jbG91ZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjBcXFwifS5oeV9jLWljb24tLWRhdGE6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYxXFxcIn0uaHlfYy1pY29uLS1kZWxpdmVyeS10cnVjazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjJcXFwifS5oeV9jLWljb24tLXByb3RlY3Rpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYzXFxcIn0uaHlfYy1pY29uLS1jb2xvdXItcGlja2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NFxcXCJ9Lmh5X2MtaWNvbi0tbXVsdGktYWNjb3VudC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjVcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NlxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY3XFxcIn0uaHlfYy1pY29uLS1kb2xsYXItc2lnbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjhcXFwifS5oeV9jLWljb24tLWxpbmstYWNjb3VudDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjlcXFwifS5oeV9jLWljb24tLWRhdGEtbWFuYWdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzBcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MVxcXCJ9Lmh5X2MtaWNvbi0tdG9vbHMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcyXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzNcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NFxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NVxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NlxcXCJ9Lmh5X2MtaWNvbi0tbGlua2VkLWluLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3N1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc4XFxcIn0uaHlfYy1pY29uLS1taWNyb3Bob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgwXFxcIn0uaHlfYy1pY29uLS1uZXR3b3JraW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MVxcXCJ9Lmh5X2MtaWNvbi0tY3ljbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgyXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgzXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg0XFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWFkZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODVcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NlxcXCJ9LmMtY29sbGFwc2FibGUtcGFuZWx7Ym9yZGVyOjFweCBzb2xpZCAjZTJlMmUyO2JveC1zaGFkb3c6MCAxcHggM3B4IDFweCAjZTJlMmUyfS5jLWNvbGxhcHNhYmxlLXBhbmVsX19oZWFkZXJ7Y3Vyc29yOnBvaW50ZXI7cGFkZGluZzoxMHB4IDE1cHg7cG9zaXRpb246cmVsYXRpdmV9LmMtY29sbGFwc2FibGUtcGFuZWxfX2hlYWRlcjphZnRlcntwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDoxZW07dG9wOi43NWVtO2ZvbnQtc2l6ZTouNzVlbTtmb250LWZhbWlseTpUZWx1cyBJY29uO2NvbnRlbnQ6J1xcXFxFMTE0Jztjb2xvcjojNTdhNzA4fS5jLWNvbGxhcHNhYmxlLXBhbmVsX19oZWFkZXItLW9wZW46YWZ0ZXJ7Y29udGVudDonXFxcXEUxMTcnfS5jLWNvbGxhcHNhYmxlLXBhbmVsX19ib2R5e2JvcmRlci10b3A6MXB4IHNvbGlkICNlMmUyZTI7bWF4LWhlaWdodDowO3BhZGRpbmc6MCAxNXB4Oy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2UtaW4tb3V0O3RyYW5zaXRpb246YWxsIC4zcyBlYXNlLWluLW91dDtvdmVyZmxvdzpoaWRkZW47b3BhY2l0eTowfS5jLWNvbGxhcHNhYmxlLXBhbmVsX19ib2R5LS1vcGVue29wYWNpdHk6MTtwYWRkaW5nOjE1cHg7bWF4LWhlaWdodDo5OTk5cHh9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9jb2xsYXBzYWJsZS1wYW5lbC9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSA3NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYy1sZWdhbC1jb250YWluZXJfX29yZGVyZWQtbGlzdHttYXJnaW4tdG9wOjEwcHg7bWFyZ2luLWJvdHRvbToyMHB4O2xpc3Qtc3R5bGU6ZGVjaW1hbDtsaXN0LXN0eWxlLXR5cGU6ZGVjaW1hbDtwYWRkaW5nLWxlZnQ6MjBweH0uYy1sZWdhbC1jb250YWluZXJfX3Vub3JkZXJlZC1saXN0e21hcmdpbi10b3A6MTBweDttYXJnaW4tYm90dG9tOjIwcHg7cGFkZGluZy1sZWZ0OjIwcHg7bGlzdC1zdHlsZTpub25lO2xpc3Qtc3R5bGUtdHlwZTpub25lfS5jLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVte2xpbmUtaGVpZ2h0OjE5cHg7bWFyZ2luLWJvdHRvbToxMHB4O3BhZGRpbmc6MTBweH0uYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbS0tYWN0aXZle2JhY2tncm91bmQtY29sb3I6I2Y5ZjFmZn0uYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbSBhe2NvbG9yOiM0OTE2NmQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Ym9yZGVyLWJvdHRvbToxcHggZG90dGVkO3BhZGRpbmctYm90dG9tOjFweH0uYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbSBhOmhvdmVye2NvbG9yOiM4YzY4YTZ9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb250YWluZXIudnVlXG4gKiogbW9kdWxlIGlkID0gNzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtbGVnYWwtc3Vwe2ZvbnQtc2l6ZTouNzVlbTtsaW5lLWhlaWdodDowO3ZlcnRpY2FsLWFsaWduOnN1cGVyO3RleHQtZGVjb3JhdGlvbjpub25lO3RvcDowIWltcG9ydGFudDtjdXJzb3I6cG9pbnRlcn0uYy1sZWdhbC1zdXAgYXtjb2xvcjojNDkxNjZkfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY291bnRlci52dWVcbiAqKiBtb2R1bGUgaWQgPSA3N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIubm8tc2Nyb2xse292ZXJmbG93LXg6aGlkZGVuO292ZXJmbG93OmhpZGRlbjtvdmVyZmxvdy15OmhpZGRlbjtwb3NpdGlvbjpyZWxhdGl2ZTtoZWlnaHQ6MTAwJX0uYy1vdmVybGF5LWNvbnRhaW5lcl9fY3VydGFpbntvcGFjaXR5OjA7LXdlYmtpdC10cmFuc2l0aW9uOm9wYWNpdHkgMS4zcyBlYXNlLWluLW91dDt0cmFuc2l0aW9uOm9wYWNpdHkgMS4zcyBlYXNlLWluLW91dH0uYy1vdmVybGF5LWNvbnRhaW5lcl9fY3VydGFpbi0tYWN0aXZle29wYWNpdHk6MTtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjU1KTtwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7cmlnaHQ6MDtib3R0b206MH0uYy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXN7cG9zaXRpb246Zml4ZWQ7cmlnaHQ6MDt0b3A6MDtib3R0b206MDtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjUpOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoMTAwJSk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoMTAwJSk7LXdlYmtpdC10cmFuc2l0aW9uOjFzIGVhc2UtaW4tb3V0O3RyYW5zaXRpb246MXMgZWFzZS1pbi1vdXR9QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDo1OTlweCl7LmMtb3ZlcmxheS1jb250YWluZXJfX292ZXJsYXlze3dpZHRoOjEwMCV9fUBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6NjAwcHgpey5jLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5c3t3aWR0aDo2NiV9fS5jLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5cy0tYWN0aXZley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoMCk7ei1pbmRleDo5OTk5OX1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS1jb250YWluZXIudnVlXG4gKiogbW9kdWxlIGlkID0gNzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtb3ZlcmxheXtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO2JhY2tncm91bmQtY29sb3I6I2ZmZn0uYy1vdmVybGF5X19oZWFkZXJ7cGFkZGluZzoyMHB4O3Bvc2l0aW9uOmZpeGVkO3RvcDowO2hlaWdodDo3NXB4O3dpZHRoOjEwMCU7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2UyZTJlMjtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY2Zjd9LmMtb3ZlcmxheV9fY2xvc2UtYnV0dG9ue2N1cnNvcjpwb2ludGVyO2JhY2tncm91bmQ6MDtib3JkZXI6MDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MjBweDtyaWdodDoyMHB4O2ZvbnQtZmFtaWx5OlRlbHVzIEljb247Zm9udC1zaXplOjJlbTtjb2xvcjojNDkxNjZkfS5jLW92ZXJsYXlfX2Nsb3NlLWJ1dHRvbjpiZWZvcmV7Y29udGVudDonXFxcXEUxMDYnfS5jLW92ZXJsYXlfX2JvZHl7cG9zaXRpb246Zml4ZWQ7LXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2g7b3ZlcmZsb3cteTpzY3JvbGw7dG9wOjc1cHg7Ym90dG9tOjA7d2lkdGg6MTAwJTtwYWRkaW5nOjIwcHggMjBweCA1MHB4fVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDc5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIkAtd2Via2l0LWtleWZyYW1lcyByb3RhdGV7dG97LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDF0dXJuKTt0cmFuc2Zvcm06cm90YXRlKDF0dXJuKX19QGtleWZyYW1lcyByb3RhdGV7dG97LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDF0dXJuKTt0cmFuc2Zvcm06cm90YXRlKDF0dXJuKX19QC13ZWJraXQta2V5ZnJhbWVzIGRhc2h7MCV7c3Ryb2tlLWRhc2hhcnJheToxLDIwMDtzdHJva2UtZGFzaG9mZnNldDowfTUwJXtzdHJva2UtZGFzaGFycmF5Ojg5LDIwMDtzdHJva2UtZGFzaG9mZnNldDotMzV9dG97c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTEyNH19QGtleWZyYW1lcyBkYXNoezAle3N0cm9rZS1kYXNoYXJyYXk6MSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6MH01MCV7c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTM1fXRve3N0cm9rZS1kYXNoYXJyYXk6ODksMjAwO3N0cm9rZS1kYXNob2Zmc2V0Oi0xMjR9fUAtd2Via2l0LWtleWZyYW1lcyBzcGlubmVyLWNvbG9yezAlLHRve3N0cm9rZTojNmMwfTI1JXtzdHJva2U6IzZjMH01MCV7c3Ryb2tlOiM1N2E3MDh9NzUle3N0cm9rZTojNTdhNzA4fX1Aa2V5ZnJhbWVzIHNwaW5uZXItY29sb3J7MCUsdG97c3Ryb2tlOiM2YzB9MjUle3N0cm9rZTojNmMwfTUwJXtzdHJva2U6IzU3YTcwOH03NSV7c3Ryb2tlOiM1N2E3MDh9fS5jLXNwaW5uZXJ7ZGlzcGxheTotd2Via2l0LWJveDtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDstd2Via2l0LWJveC1hbGlnbjpjZW50ZXI7LW1zLWZsZXgtYWxpZ246Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjtkaXNwbGF5Oi13ZWJraXQtZmxleDstd2Via2l0LWFsaWduLWl0ZW1zOmNlbnRlcjstd2Via2l0LWJveC1wYWNrOmNlbnRlcjstbXMtZmxleC1wYWNrOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO21hcmdpbjphdXRvOy13ZWJraXQtYm94LW9yaWVudDp2ZXJ0aWNhbDstd2Via2l0LWJveC1kaXJlY3Rpb246bm9ybWFsOy1tcy1mbGV4LWRpcmVjdGlvbjpjb2x1bW47ZmxleC1kaXJlY3Rpb246Y29sdW1ufS5jLXNwaW5uZXItLWZ1bGxzY3JlZW57cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO3JpZ2h0OjA7Ym90dG9tOjA7ei1pbmRleDo5OTk4O3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7YmFja2dyb3VuZDpoc2xhKDAsMCUsMTAwJSwuOCl9LmMtc3Bpbm5lciBzdmd7YW5pbWF0aW9uLW5hbWU6cm90YXRlOy13ZWJraXQtYW5pbWF0aW9uLW5hbWU6cm90YXRlOy1tb3otYW5pbWF0aW9uLW5hbWU6cm90YXRlO2FuaW1hdGlvbi1kdXJhdGlvbjoxLjhzOy13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOjEuOHM7LW1vei1hbmltYXRpb24tZHVyYXRpb246MS44czthbmltYXRpb24taXRlcmF0aW9uLWNvdW50OmluZmluaXRlOy13ZWJraXQtYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDppbmZpbml0ZTstbW96LWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6aW5maW5pdGU7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpsaW5lYXI7LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmxpbmVhcjstbW96LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246bGluZWFyO2hlaWdodDoxMDBweDt3aWR0aDoxMDBweH0uYy1zcGlubmVyIGNpcmNsZXthbmltYXRpb246ZGFzaCAxLjdzIGVhc2UtaW4tb3V0IGluZmluaXRlIDBzLHNwaW5uZXItY29sb3IgNnMgZWFzZS1pbi1vdXQgaW5maW5pdGUgLS43NXM7LXdlYmtpdC1hbmltYXRpb246ZGFzaCAxLjdzIGVhc2UtaW4tb3V0IGluZmluaXRlIDBzLHNwaW5uZXItY29sb3IgNnMgZWFzZS1pbi1vdXQgaW5maW5pdGUgLS43NXM7LW1vei1hbmltYXRpb246ZGFzaCAxLjdzIGVhc2UtaW4tb3V0IGluZmluaXRlIDBzLHNwaW5uZXItY29sb3IgNnMgZWFzZS1pbi1vdXQgaW5maW5pdGUgLS43NXN9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9zcGlubmVyL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDgwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5jLXN0ZXAtdHJhY2tlcl9faWNvbiwuaHlfYy1pY29ue2ZvbnQtZmFtaWx5OlRlbHVzIEljb24sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7dGV4dC1kZWNvcmF0aW9uOm5vbmU7dGV4dC1yZW5kZXJpbmc6b3B0aW1pemVMZWdpYmlsaXR5O2NvbG9yOmluaGVyaXQ7dmVydGljYWwtYWxpZ246bWlkZGxlO2ZvbnQtc2l6ZTppbmhlcml0O2xpbmUtaGVpZ2h0OmluaGVyaXR9Lmh5X2MtaWNvbl9fc3F1YXJle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToyLjVyZW07bGluZS1oZWlnaHQ6M3JlbTt3aWR0aDozcmVtO2hlaWdodDozcmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLTJ4e2ZvbnQtc2l6ZToyZW19Lmh5X2MtaWNvbi0tM3h7Zm9udC1zaXplOjNlbX0uaHlfYy1pY29uLS00eHtmb250LXNpemU6NGVtfS5oeV9jLWljb25fX3N0eWxlZ3VpZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjJyZW07bGluZS1oZWlnaHQ6NHJlbTt3aWR0aDo0cmVtO2hlaWdodDo0cmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLWNpcmNsZS10aGljay1vdXRsaW5lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMVxcXCJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMlxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNVxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA2XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1sb2dvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwOVxcXCJ9Lmh5X2MtaWNvbi0tYmFyLWNoYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMFxcXCJ9Lmh5X2MtaWNvbi0tcGljdHVyZS1mcmFtZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTFcXFwifS5oeV9jLWljb24tLXBhcGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEzXFxcIn0uaHlfYy1pY29uLS1mb2xkZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE0XFxcIn0uaHlfYy1pY29uLS1zaGFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTVcXFwifS5oeV9jLWljb24tLW1hZ25pZnktZ2xhc3M6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE2XFxcIn0uaHlfYy1pY29uLS13YXJuaW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOFxcXCJ9Lmh5X2MtaWNvbi0tc3Rhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTlcXFwifS5oeV9jLWljb24tLXN0YXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIwXFxcIn0uaHlfYy1pY29uLS1oZWFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjFcXFwifS5oeV9jLWljb24tLWxpZmVzYXZlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjJcXFwifS5oeV9jLWljb24tLWhhbWJ1cmdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjRcXFwifS5oeV9jLWljb24tLWdyaWQtc3F1YXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNVxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNlxcXCJ9Lmh5X2MtaWNvbi0tbGlnaHRidWxiOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyN1xcXCJ9Lmh5X2MtaWNvbi0tc3BlZWRvbWV0ZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI4XFxcIn0uaHlfYy1pY29uLS1hZGQtcmVtb3ZlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOVxcXCJ9Lmh5X2MtaWNvbi0tY2FydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzBcXFwifS5oeV9jLWljb24tLXR3aXR0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMxXFxcIn0uaHlfYy1pY29uLS1mYWNlYm9vazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzJcXFwifS5oeV9jLWljb24tLXlvdXR1YmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMzXFxcIn0uaHlfYy1pY29uLS1nb29nbGUtcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzRcXFwifS5oeV9jLWljb24tLXRyZW5kLWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM1XFxcIn0uaHlfYy1pY29uLS1wbGF5LWJ1dHRvbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzZcXFwifS5oeV9jLWljb24tLXZpZGVvLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzN1xcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzhcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOVxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQwXFxcIn0uaHlfYy1pY29uLS1jbG9jay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDFcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQyXFxcIn0uaHlfYy1pY29uLS10YWJsZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQzXFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ0XFxcIn0uaHlfYy1pY29uLS1tb3VzZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDVcXFwifS5oeV9jLWljb24tLXByaWNldGFnOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItbm90ZXMtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ3XFxcIn0uaHlfYy1pY29uLS10djpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDhcXFwifS5oeV9jLWljb24tLWZpbG06YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ5XFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTBcXFwifS5oeV9jLWljb24tLXVzYi1zdGljazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTFcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUyXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1M1xcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NVxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU2XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU3XFxcIn0uaHlfYy1pY29uLS11c2VyczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTlcXFwifS5oeV9jLWljb24tLXVzZXJzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYwXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1ib3hlZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjNcXFwifS5oeV9jLWljb24tLWdlYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY0XFxcIn0uaHlfYy1pY29uLS1nZWFyLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY1XFxcIn0uaHlfYy1pY29uLS1nZWFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NlxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjhcXFwifS5oeV9jLWljb24tLXBhZGxvY2staW52ZXJldGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OVxcXCJ9Lmh5X2MtaWNvbi0tc3RhY2tlZC1wYXBlcnMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcxXFxcIn0uaHlfYy1pY29uLS1tdXNpYy1ub3RlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MlxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzNcXFwifS5oeV9jLWljb24tLXRhYmxldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzRcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzVcXFwifS5oeV9jLWljb24tLW1vdXNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NlxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc3XFxcIn0uaHlfYy1pY29uLS1wYXBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzhcXFwifS5oeV9jLWljb24tLXR2LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OVxcXCJ9Lmh5X2MtaWNvbi0tZmlsbS1jbGFwcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MFxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgxXFxcIn0uaHlfYy1pY29uLS1waG9uZS1oYW5kc2V0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MlxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODRcXFwifS5oeV9jLWljb24tLWhvbWUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODVcXFwifS5oeV9jLWljb24tLWhvbWUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg2XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODhcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTJcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkzXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTRcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk1XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk2XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk3XFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTlcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAwXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDFcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMlxcXCJ9Lmh5X2MtaWNvbi0teDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDRcXFwifS5oeV9jLWljb24tLXgtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDVcXFwifS5oeV9jLWljb24tLXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA2XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcms6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA4XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDlcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTBcXFwifS5oeV9jLWljb24tLWluZmluaXR5OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMVxcXCJ9Lmh5X2MtaWNvbi0tcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTJcXFwifS5oeV9jLWljb24tLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTNcXFwifS5oeV9jLWljb24tLXBsdXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE0XFxcIn0uaHlfYy1pY29uLS1taW51czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTVcXFwifS5oeV9jLWljb24tLW1pbnVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE2XFxcIn0uaHlfYy1pY29uLS1taW51cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTdcXFwifS5oeV9jLWljb24tLWNoYXQtYnViYmxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExOVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMFxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjFcXFwifS5oeV9jLWljb24tLWNoYXQteDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjJcXFwifS5oeV9jLWljb24tLWNoYXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIzXFxcIn0uaHlfYy1pY29uLS1zaW0tY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjVcXFwifS5oeV9jLWljb24tLWNhbGN1bGF0b3I6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI2XFxcIn0uaHlfYy1pY29uLS1ibHVldG9vdGgtaGVhZHNldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjdcXFwifS5oeV9jLWljb24tLW91dGdvaW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI5XFxcIn0uaHlfYy1pY29uLS1pbmNvbWluZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMFxcXCJ9Lmh5X2MtaWNvbi0tY2F1dGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzFcXFwifS5oeV9jLWljb24tLXdpZmktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMyXFxcIn0uaHlfYy1pY29uLS13aWZpOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzM1xcXCJ9Lmh5X2MtaWNvbi0tdGhpbi1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM1XFxcIn0uaHlfYy1pY29uLS1pbmZvLWludmVydGVkOmJlZm9yZSwuaHlfYy1pY29uLS1pbmZvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNlxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM4XFxcIn0uaHlfYy1pY29uLS1nbG9iZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDBcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDJcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDRcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ1XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDZcXFwifS5oeV9jLWljb24tLW92ZXJ2aWV3LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0N1xcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtY2lyY2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OFxcXCJ9Lmh5X2MtaWNvbi0tcHVsc2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ5XFxcIn0uaHlfYy1pY29uLS1taWtlLW1vYmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTBcXFwifS5oeV9jLWljb24tLXJld2FyZHMtYmFkZ2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUxXFxcIn0uaHlfYy1pY29uLS1maWx0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUyXFxcIn0uaHlfYy1pY29uLS1zY2hlZHVsZS10YWxrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1M1xcXCJ9Lmh5X2MtaWNvbi0td2FybmluZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTRcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTVcXFwifS5oeV9jLWljb24tLWNhcnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU2XFxcIn0uaHlfYy1pY29uLS1saXZlLWNoYXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU3XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OFxcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTlcXFwifS5oeV9jLWljb24tLWNsb3VkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MFxcXCJ9Lmh5X2MtaWNvbi0tZGF0YTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjFcXFwifS5oeV9jLWljb24tLWRlbGl2ZXJ5LXRydWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MlxcXCJ9Lmh5X2MtaWNvbi0tcHJvdGVjdGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjNcXFwifS5oeV9jLWljb24tLWNvbG91ci1waWNrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY0XFxcIn0uaHlfYy1pY29uLS1tdWx0aS1hY2NvdW50LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NVxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY2XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjdcXFwifS5oeV9jLWljb24tLWRvbGxhci1zaWduOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OFxcXCJ9Lmh5X2MtaWNvbi0tbGluay1hY2NvdW50OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OVxcXCJ9Lmh5X2MtaWNvbi0tZGF0YS1tYW5hZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MFxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcxXFxcIn0uaHlfYy1pY29uLS10b29scy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzJcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3M1xcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc0XFxcIn0uaHlfYy1pY29uLS1pcC1mYXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc1XFxcIn0uaHlfYy1pY29uLS1pcC1mYXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc2XFxcIn0uaHlfYy1pY29uLS1saW5rZWQtaW4taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc3XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzhcXFwifS5oeV9jLWljb24tLW1pY3JvcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc5XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODBcXFwifS5oeV9jLWljb24tLW5ldHdvcmtpbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgxXFxcIn0uaHlfYy1pY29uLS1jeWNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODJcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODNcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODRcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtYWRkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NVxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg2XFxcIn0uYy1zdGVwLXRyYWNrZXJ7bGlzdC1zdHlsZTpub25lO3BhZGRpbmc6MDtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5Oi13ZWJraXQtYm94O2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy13ZWJraXQtYm94LXBhY2s6anVzdGlmeTstbXMtZmxleC1wYWNrOmp1c3RpZnk7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47bWFyZ2luOjFyZW0gLTEuNXJlbX1AbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOjYwMHB4KXsuYy1zdGVwLXRyYWNrZXJ7cGFkZGluZy1ib3R0b206Mi41cmVtO21hcmdpbjoxcmVtIDB9fS5jLXN0ZXAtdHJhY2tlcl9fc3RlcHt3aWR0aDoxMDAlO3Bvc2l0aW9uOnJlbGF0aXZlO3RleHQtYWxpZ246Y2VudGVyfS5jLXN0ZXAtdHJhY2tlcl9fc3RlcDphZnRlciwuYy1zdGVwLXRyYWNrZXJfX3N0ZXA6YmVmb3Jle3Bvc2l0aW9uOmFic29sdXRlO3RvcDo1MCU7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKTt3aWR0aDpjYWxjKDUwJSAtIDEuNHJlbSk7Y29udGVudDonICc7Ym9yZGVyLWJvdHRvbTouNnJlbSBzb2xpZCAjYWVhZWFlfS5jLXN0ZXAtdHJhY2tlcl9fc3RlcDpiZWZvcmV7bGVmdDowfS5jLXN0ZXAtdHJhY2tlcl9fc3RlcDphZnRlcntyaWdodDowfS5jLXN0ZXAtdHJhY2tlciAuYy1zdGVwLXRyYWNrZXJfX3N0ZXA6Zmlyc3QtY2hpbGQ6YmVmb3JlLC5jLXN0ZXAtdHJhY2tlciAuYy1zdGVwLXRyYWNrZXJfX3N0ZXA6bGFzdC1jaGlsZDphZnRlcntjb250ZW50Om5vbmV9LmMtc3RlcC10cmFja2VyX19sYWJlbHtwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206LTNyZW07bGVmdDowO2ZvbnQtc2l6ZToxLjdyZW07d2lkdGg6MTAwJTtoZWlnaHQ6Mi41cmVtO2ZvbnQtZmFtaWx5OlRlbHVzIFJlZ3VsYXIsSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7Y29sb3I6IzY2Nn1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjU5OXB4KXsuYy1zdGVwLXRyYWNrZXJfX2xhYmVse2Rpc3BsYXk6bm9uZX19LmMtc3RlcC10cmFja2VyX19zdGVwLS1hY3RpdmUgLmMtc3RlcC10cmFja2VyX19sYWJlbHtmb250LWZhbWlseTpUZWx1cyBNZWRpdW0sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7Y29sb3I6IzQwODAwMH0uYy1zdGVwLXRyYWNrZXJfX2ljb257Zm9udC1zaXplOjNyZW07Y29sb3I6I2FlYWVhZX0uYy1zdGVwLXRyYWNrZXJfX2ljb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWFjdGl2ZSAuYy1zdGVwLXRyYWNrZXJfX2ljb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uYy1zdGVwLXRyYWNrZXJfX3NldHAtLWNsaWNrYWJsZSBhe2N1cnNvcjpwb2ludGVyfS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGU6YWZ0ZXJ7Ym9yZGVyLWJvdHRvbTouNnJlbSBzb2xpZCAjNTdhNzA4fS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGUgLmMtc3RlcC10cmFja2VyX19pY29uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9LmMtc3RlcC10cmFja2VyX19zdGVwLS1hY3RpdmUgLmMtc3RlcC10cmFja2VyX19pY29uOmJlZm9yZSwuYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlIC5jLXN0ZXAtdHJhY2tlcl9faWNvbjpiZWZvcmV7Y29sb3I6IzU3YTcwOH0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlKy5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tYWN0aXZlOmJlZm9yZSwuYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlKy5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGU6YmVmb3Jle2JvcmRlci1ib3R0b206LjZyZW0gc29saWQgIzU3YTcwOH0uYy1zdGVwLXRyYWNrZXItbW9iaWxlLWxhYmVse2ZvbnQtc2l6ZToxLjdyZW07dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1mYW1pbHk6VGVsdXMgUmVndWxhcixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjojNjY2fUBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6NjAwcHgpey5jLXN0ZXAtdHJhY2tlci1tb2JpbGUtbGFiZWx7ZGlzcGxheTpub25lfX0uYy1zdGVwLXRyYWNrZXItbW9iaWxlLWxhYmVsX19zdGVwe2ZvbnQtZmFtaWx5OlRlbHVzIE1lZGl1bSxIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjojNDA4MDAwfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvc3RlcC10cmFja2VyL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDgxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5jLXRhYnNfX2hlYWRlcntsaXN0LXN0eWxlOm5vbmU7cGFkZGluZzowO21hcmdpbjowO2Rpc3BsYXk6LXdlYmtpdC1ib3g7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXh9LmMtdGFic19faGVhZGVyLWl0ZW17bWFyZ2luLXRvcDoycHg7aGVpZ2h0OjQ1cHg7cGFkZGluZzowIDJweDstd2Via2l0LWJveC1mbGV4OjE7LW1zLWZsZXg6MTtmbGV4OjF9LmMtdGFic19faGVhZGVyLWl0ZW0gYXtiYWNrZ3JvdW5kLWNvbG9yOiNlMmUyZTI7dGV4dC1kZWNvcmF0aW9uOm5vbmU7cGFkZGluZzoxM3B4IDIwcHg7Y29sb3I6IzQ5MTY2ZDtkaXNwbGF5OmJsb2NrfS5jLXRhYnNfX2hlYWRlci1pdGVtLS1hY3RpdmV7bWFyZ2luLXRvcDoxcHg7aGVpZ2h0OjQ2cHg7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JvcmRlci10b3A6MXB4IHNvbGlkICNlMmUyZTI7Ym9yZGVyLWxlZnQ6MXB4IHNvbGlkICNlMmUyZTI7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjZTJlMmUyfS5jLXRhYnNfX2hlYWRlci1pdGVtLS1hY3RpdmUgYXtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Y29sb3I6IzMzM30uYy10YWJzX19oZWFkZXItaXRlbS0tZGlzYWJsZWQgYXtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY2Zjc7Y29sb3I6I2FlYWVhZTtjdXJzb3I6bm90LWFsbG93ZWR9LmMtdGFic19fYm9keXtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym9yZGVyOjFweCBzb2xpZCAjZTJlMmUyO21hcmdpbi10b3A6LTFweDtwYWRkaW5nOjIwcHh9LmMtdGFic19fcGFuZXtkaXNwbGF5OmJsb2NrO2JvcmRlci10b3A6bm9uZTtvcGFjaXR5OjA7aGVpZ2h0OjA7b3ZlcmZsb3c6aGlkZGVuO3BhZGRpbmc6MCA1cHg7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuNXMgZWFzZS1vdXQ7dHJhbnNpdGlvbjphbGwgLjVzIGVhc2Utb3V0fS5jLXRhYnNfX3BhbmUtLWFjdGl2ZXtvcGFjaXR5OjE7cGFkZGluZzo1cHg7aGVpZ2h0OmF1dG99XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy90YWIvdGFicy52dWVcbiAqKiBtb2R1bGUgaWQgPSA4MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNCBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9ycyAoQ29udmVyc2lvbiB0byBFUzYgQVBJIGJ5IEpha2UgQXJjaGliYWxkKVxuICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2pha2VhcmNoaWJhbGQvZXM2LXByb21pc2UvbWFzdGVyL0xJQ0VOU0VcbiAqIEB2ZXJzaW9uICAgMy4yLjFcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRvYmplY3RPckZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJyB8fCAodHlwZW9mIHggPT09ICdvYmplY3QnICYmIHggIT09IG51bGwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc01heWJlVGhlbmFibGUoeCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiB4ICE9PSBudWxsO1xuICAgIH1cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkdXRpbHMkJF9pc0FycmF5O1xuICAgIGlmICghQXJyYXkuaXNBcnJheSkge1xuICAgICAgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkdXRpbHMkJF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbiAgICB9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0FycmF5ID0gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheTtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiA9IDA7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR2ZXJ0eE5leHQ7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRjdXN0b21TY2hlZHVsZXJGbjtcblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2xpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW5dID0gY2FsbGJhY2s7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiArIDFdID0gYXJnO1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiArPSAyO1xuICAgICAgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gPT09IDIpIHtcbiAgICAgICAgLy8gSWYgbGVuIGlzIDIsIHRoYXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHNjaGVkdWxlIGFuIGFzeW5jIGZsdXNoLlxuICAgICAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleVxuICAgICAgICAvLyB3aWxsIGJlIHByb2Nlc3NlZCBieSB0aGlzIGZsdXNoIHRoYXQgd2UgYXJlIHNjaGVkdWxpbmcuXG4gICAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm4pIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm4obGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHNldFNjaGVkdWxlcihzY2hlZHVsZUZuKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm4gPSBzY2hlZHVsZUZuO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzZXRBc2FwKGFzYXBGbikge1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAgPSBhc2FwRm47XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93ID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSA/IHdpbmRvdyA6IHVuZGVmaW5lZDtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJHbG9iYWwgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3NlcldpbmRvdyB8fCB7fTtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJHbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3Nlckdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNOb2RlID0gdHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG5cbiAgICAvLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNXb3JrZXIgPSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCc7XG5cbiAgICAvLyBub2RlXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU5leHRUaWNrKCkge1xuICAgICAgLy8gbm9kZSB2ZXJzaW9uIDAuMTAueCBkaXNwbGF5cyBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2hlbiBuZXh0VGljayBpcyB1c2VkIHJlY3Vyc2l2ZWx5XG4gICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHNcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyB2ZXJ0eFxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VWZXJ0eFRpbWVyKCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0KGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNdXRhdGlvbk9ic2VydmVyKCkge1xuICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICAgICAgdmFyIG9ic2VydmVyID0gbmV3IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRCcm93c2VyTXV0YXRpb25PYnNlcnZlcihsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuICAgICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gICAgICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHsgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9KTtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBub2RlLmRhdGEgPSAoaXRlcmF0aW9ucyA9ICsraXRlcmF0aW9ucyAlIDIpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyB3ZWIgd29ya2VyXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU1lc3NhZ2VDaGFubmVsKCkge1xuICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVNldFRpbWVvdXQoKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldFRpbWVvdXQobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoLCAxKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZSA9IG5ldyBBcnJheSgxMDAwKTtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2goKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW47IGkrPTIpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2ldO1xuICAgICAgICB2YXIgYXJnID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2krMV07XG5cbiAgICAgICAgY2FsbGJhY2soYXJnKTtcblxuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaV0gPSB1bmRlZmluZWQ7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpKzFdID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuID0gMDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXR0ZW1wdFZlcnR4KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHIgPSByZXF1aXJlO1xuICAgICAgICB2YXIgdmVydHggPSByKCd2ZXJ0eCcpO1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcbiAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VWZXJ0eFRpbWVyKCk7XG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoO1xuICAgIC8vIERlY2lkZSB3aGF0IGFzeW5jIG1ldGhvZCB0byB1c2UgdG8gdHJpZ2dlcmluZyBwcm9jZXNzaW5nIG9mIHF1ZXVlZCBjYWxsYmFja3M6XG4gICAgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc05vZGUpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU5leHRUaWNrKCk7XG4gICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTtcbiAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc1dvcmtlcikge1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTWVzc2FnZUNoYW5uZWwoKTtcbiAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGF0dGVtcHRWZXJ0eCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0KCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSR0aGVuJCR0aGVuKG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gICAgICB2YXIgcGFyZW50ID0gdGhpcztcblxuICAgICAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG5cbiAgICAgIGlmIChjaGlsZFtsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG1ha2VQcm9taXNlKGNoaWxkKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHN0YXRlID0gcGFyZW50Ll9zdGF0ZTtcblxuICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50c1tzdGF0ZSAtIDFdO1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChmdW5jdGlvbigpe1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGludm9rZUNhbGxiYWNrKHN0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfVxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkdGhlbiQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSR0aGVuJCR0aGVuO1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJHJlc29sdmUob2JqZWN0KSB7XG4gICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICAgICAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICAgICAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICB9XG5cbiAgICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCBvYmplY3QpO1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkcmVzb2x2ZTtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUFJPTUlTRV9JRCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygxNik7XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKCkge31cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HICAgPSB2b2lkIDA7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCA9IDE7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEICA9IDI7XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1IgPSBuZXcgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRXJyb3JPYmplY3QoKTtcblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHNlbGZGdWxmaWxsbWVudCgpIHtcbiAgICAgIHJldHVybiBuZXcgVHlwZUVycm9yKFwiWW91IGNhbm5vdCByZXNvbHZlIGEgcHJvbWlzZSB3aXRoIGl0c2VsZlwiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRjYW5ub3RSZXR1cm5Pd24oKSB7XG4gICAgICByZXR1cm4gbmV3IFR5cGVFcnJvcignQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLicpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGdldFRoZW4ocHJvbWlzZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbjtcbiAgICAgIH0gY2F0Y2goZXJyb3IpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1IuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeVRoZW4odGhlbiwgdmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpO1xuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiBlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSwgdGhlbikge1xuICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGZ1bmN0aW9uKHByb21pc2UpIHtcbiAgICAgICAgdmFyIHNlYWxlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgZXJyb3IgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlUaGVuKHRoZW4sIHRoZW5hYmxlLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIGlmIChzZWFsZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgICAgICBpZiAodGhlbmFibGUgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgICBpZiAoc2VhbGVkKSB7IHJldHVybjsgfVxuICAgICAgICAgIHNlYWxlZCA9IHRydWU7XG5cbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICAgICAgfSwgJ1NldHRsZTogJyArIChwcm9taXNlLl9sYWJlbCB8fCAnIHVua25vd24gcHJvbWlzZScpKTtcblxuICAgICAgICBpZiAoIXNlYWxlZCAmJiBlcnJvcikge1xuICAgICAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSwgcHJvbWlzZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUpIHtcbiAgICAgIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICAgICAgfSBlbHNlIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZSh0aGVuYWJsZSwgdW5kZWZpbmVkLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuKSB7XG4gICAgICBpZiAobWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3RvciA9PT0gcHJvbWlzZS5jb25zdHJ1Y3RvciAmJlxuICAgICAgICAgIHRoZW4gPT09IGxpYiRlczYkcHJvbWlzZSR0aGVuJCRkZWZhdWx0ICYmXG4gICAgICAgICAgY29uc3RydWN0b3IucmVzb2x2ZSA9PT0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGVuID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUikge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUi5lcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAodGhlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICAgICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24odGhlbikpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcbiAgICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc2VsZkZ1bGZpbGxtZW50KCkpO1xuICAgICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGdldFRoZW4odmFsdWUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2hSZWplY3Rpb24ocHJvbWlzZSkge1xuICAgICAgaWYgKHByb21pc2UuX29uZXJyb3IpIHtcbiAgICAgICAgcHJvbWlzZS5fb25lcnJvcihwcm9taXNlLl9yZXN1bHQpO1xuICAgICAgfVxuXG4gICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoKHByb21pc2UpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpIHtcbiAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykgeyByZXR1cm47IH1cblxuICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gdmFsdWU7XG4gICAgICBwcm9taXNlLl9zdGF0ZSA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRDtcblxuICAgICAgaWYgKHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoLCBwcm9taXNlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKSB7XG4gICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHsgcmV0dXJuOyB9XG4gICAgICBwcm9taXNlLl9zdGF0ZSA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEO1xuICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gcmVhc29uO1xuXG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoUmVqZWN0aW9uLCBwcm9taXNlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgICAgIHZhciBzdWJzY3JpYmVycyA9IHBhcmVudC5fc3Vic2NyaWJlcnM7XG4gICAgICB2YXIgbGVuZ3RoID0gc3Vic2NyaWJlcnMubGVuZ3RoO1xuXG4gICAgICBwYXJlbnQuX29uZXJyb3IgPSBudWxsO1xuXG4gICAgICBzdWJzY3JpYmVyc1tsZW5ndGhdID0gY2hpbGQ7XG4gICAgICBzdWJzY3JpYmVyc1tsZW5ndGggKyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRURdID0gb25GdWxmaWxsbWVudDtcbiAgICAgIHN1YnNjcmliZXJzW2xlbmd0aCArIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEXSAgPSBvblJlamVjdGlvbjtcblxuICAgICAgaWYgKGxlbmd0aCA9PT0gMCAmJiBwYXJlbnQuX3N0YXRlKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gsIHBhcmVudCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaChwcm9taXNlKSB7XG4gICAgICB2YXIgc3Vic2NyaWJlcnMgPSBwcm9taXNlLl9zdWJzY3JpYmVycztcbiAgICAgIHZhciBzZXR0bGVkID0gcHJvbWlzZS5fc3RhdGU7XG5cbiAgICAgIGlmIChzdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHsgcmV0dXJuOyB9XG5cbiAgICAgIHZhciBjaGlsZCwgY2FsbGJhY2ssIGRldGFpbCA9IHByb21pc2UuX3Jlc3VsdDtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkgKz0gMykge1xuICAgICAgICBjaGlsZCA9IHN1YnNjcmliZXJzW2ldO1xuICAgICAgICBjYWxsYmFjayA9IHN1YnNjcmliZXJzW2kgKyBzZXR0bGVkXTtcblxuICAgICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBjaGlsZCwgY2FsbGJhY2ssIGRldGFpbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FsbGJhY2soZGV0YWlsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggPSAwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEVycm9yT2JqZWN0KCkge1xuICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFRSWV9DQVRDSF9FUlJPUiA9IG5ldyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRFcnJvck9iamVjdCgpO1xuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGRldGFpbCk7XG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SLmVycm9yID0gZTtcbiAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFRSWV9DQVRDSF9FUlJPUjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBwcm9taXNlLCBjYWxsYmFjaywgZGV0YWlsKSB7XG4gICAgICB2YXIgaGFzQ2FsbGJhY2sgPSBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24oY2FsbGJhY2spLFxuICAgICAgICAgIHZhbHVlLCBlcnJvciwgc3VjY2VlZGVkLCBmYWlsZWQ7XG5cbiAgICAgIGlmIChoYXNDYWxsYmFjaykge1xuICAgICAgICB2YWx1ZSA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpO1xuXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SKSB7XG4gICAgICAgICAgZmFpbGVkID0gdHJ1ZTtcbiAgICAgICAgICBlcnJvciA9IHZhbHVlLmVycm9yO1xuICAgICAgICAgIHZhbHVlID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGNhbm5vdFJldHVybk93bigpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSBkZXRhaWw7XG4gICAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuICAgICAgICAvLyBub29wXG4gICAgICB9IGVsc2UgaWYgKGhhc0NhbGxiYWNrICYmIHN1Y2NlZWRlZCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoZmFpbGVkKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbml0aWFsaXplUHJvbWlzZShwcm9taXNlLCByZXNvbHZlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVzb2x2ZXIoZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UodmFsdWUpe1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgICB9LCBmdW5jdGlvbiByZWplY3RQcm9taXNlKHJlYXNvbikge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGlkID0gMDtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRuZXh0SWQoKSB7XG4gICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaWQrKztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRtYWtlUHJvbWlzZShwcm9taXNlKSB7XG4gICAgICBwcm9taXNlW2xpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBST01JU0VfSURdID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaWQrKztcbiAgICAgIHByb21pc2UuX3N0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gdW5kZWZpbmVkO1xuICAgICAgcHJvbWlzZS5fc3Vic2NyaWJlcnMgPSBbXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGFsbChlbnRyaWVzKSB7XG4gICAgICByZXR1cm4gbmV3IGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRkZWZhdWx0KHRoaXMsIGVudHJpZXMpLnByb21pc2U7XG4gICAgfVxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGFsbDtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRyYWNlKGVudHJpZXMpIHtcbiAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXG4gICAgICBpZiAoIWxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNBcnJheShlbnRyaWVzKSkge1xuICAgICAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuJykpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgdmFyIGxlbmd0aCA9IGVudHJpZXMubGVuZ3RoO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkcmFjZTtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZWplY3QkJHJlamVjdChyZWFzb24pIHtcbiAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICAgICAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG4gICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRyZWplY3Q7XG5cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc1Jlc29sdmVyKCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc05ldygpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi5cIik7XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2U7XG4gICAgLyoqXG4gICAgICBQcm9taXNlIG9iamVjdHMgcmVwcmVzZW50IHRoZSBldmVudHVhbCByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi4gVGhlXG4gICAgICBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLCB3aGljaFxuICAgICAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uXG4gICAgICB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblxuICAgICAgVGVybWlub2xvZ3lcbiAgICAgIC0tLS0tLS0tLS0tXG5cbiAgICAgIC0gYHByb21pc2VgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB3aXRoIGEgYHRoZW5gIG1ldGhvZCB3aG9zZSBiZWhhdmlvciBjb25mb3JtcyB0byB0aGlzIHNwZWNpZmljYXRpb24uXG4gICAgICAtIGB0aGVuYWJsZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHRoYXQgZGVmaW5lcyBhIGB0aGVuYCBtZXRob2QuXG4gICAgICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuXG4gICAgICAtIGBleGNlcHRpb25gIGlzIGEgdmFsdWUgdGhhdCBpcyB0aHJvd24gdXNpbmcgdGhlIHRocm93IHN0YXRlbWVudC5cbiAgICAgIC0gYHJlYXNvbmAgaXMgYSB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aHkgYSBwcm9taXNlIHdhcyByZWplY3RlZC5cbiAgICAgIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxuXG4gICAgICBBIHByb21pc2UgY2FuIGJlIGluIG9uZSBvZiB0aHJlZSBzdGF0ZXM6IHBlbmRpbmcsIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQuXG5cbiAgICAgIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXG4gICAgICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXG4gICAgICByZWplY3RlZCBzdGF0ZS4gIEEgZnVsZmlsbG1lbnQgdmFsdWUgaXMgbmV2ZXIgYSB0aGVuYWJsZS5cblxuICAgICAgUHJvbWlzZXMgY2FuIGFsc28gYmUgc2FpZCB0byAqcmVzb2x2ZSogYSB2YWx1ZS4gIElmIHRoaXMgdmFsdWUgaXMgYWxzbyBhXG4gICAgICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzXG4gICAgICBzZXR0bGVkIHN0YXRlLiAgU28gYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCByZWplY3RzIHdpbGxcbiAgICAgIGl0c2VsZiByZWplY3QsIGFuZCBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdpbGxcbiAgICAgIGl0c2VsZiBmdWxmaWxsLlxuXG5cbiAgICAgIEJhc2ljIFVzYWdlOlxuICAgICAgLS0tLS0tLS0tLS0tXG5cbiAgICAgIGBgYGpzXG4gICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvLyBvbiBzdWNjZXNzXG4gICAgICAgIHJlc29sdmUodmFsdWUpO1xuXG4gICAgICAgIC8vIG9uIGZhaWx1cmVcbiAgICAgICAgcmVqZWN0KHJlYXNvbik7XG4gICAgICB9KTtcblxuICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgLy8gb24gcmVqZWN0aW9uXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBBZHZhbmNlZCBVc2FnZTpcbiAgICAgIC0tLS0tLS0tLS0tLS0tLVxuXG4gICAgICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzXG4gICAgICBgWE1MSHR0cFJlcXVlc3Rgcy5cblxuICAgICAgYGBganNcbiAgICAgIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyO1xuICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgICAgeGhyLnNlbmQoKTtcblxuICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ2dldEpTT046IGAnICsgdXJsICsgJ2AgZmFpbGVkIHdpdGggc3RhdHVzOiBbJyArIHRoaXMuc3RhdHVzICsgJ10nKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZ2V0SlNPTignL3Bvc3RzLmpzb24nKS50aGVuKGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICAvLyBvbiByZWplY3Rpb25cbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIFVubGlrZSBjYWxsYmFja3MsIHByb21pc2VzIGFyZSBncmVhdCBjb21wb3NhYmxlIHByaW1pdGl2ZXMuXG5cbiAgICAgIGBgYGpzXG4gICAgICBQcm9taXNlLmFsbChbXG4gICAgICAgIGdldEpTT04oJy9wb3N0cycpLFxuICAgICAgICBnZXRKU09OKCcvY29tbWVudHMnKVxuICAgICAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpe1xuICAgICAgICB2YWx1ZXNbMF0gLy8gPT4gcG9zdHNKU09OXG4gICAgICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT05cblxuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgQGNsYXNzIFByb21pc2VcbiAgICAgIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmVyXG4gICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gICAgICBAY29uc3RydWN0b3JcbiAgICAqL1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlKHJlc29sdmVyKSB7XG4gICAgICB0aGlzW2xpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBST01JU0VfSURdID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbmV4dElkKCk7XG4gICAgICB0aGlzLl9yZXN1bHQgPSB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG5cbiAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wICE9PSByZXNvbHZlcikge1xuICAgICAgICB0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicgJiYgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzUmVzb2x2ZXIoKTtcbiAgICAgICAgdGhpcyBpbnN0YW5jZW9mIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlID8gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpIDogbGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzTmV3KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuYWxsID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRkZWZhdWx0O1xuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnJhY2UgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRkZWZhdWx0O1xuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnJlc29sdmUgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRkZWZhdWx0O1xuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnJlamVjdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkZGVmYXVsdDtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5fc2V0U2NoZWR1bGVyID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHNldFNjaGVkdWxlcjtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5fc2V0QXNhcCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzZXRBc2FwO1xuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLl9hc2FwID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXA7XG5cbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5wcm90b3R5cGUgPSB7XG4gICAgICBjb25zdHJ1Y3RvcjogbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UsXG5cbiAgICAvKipcbiAgICAgIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLFxuICAgICAgd2hpY2ggcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGVcbiAgICAgIHJlYXNvbiB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblxuICAgICAgYGBganNcbiAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbih1c2VyKXtcbiAgICAgICAgLy8gdXNlciBpcyBhdmFpbGFibGVcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAgIC8vIHVzZXIgaXMgdW5hdmFpbGFibGUsIGFuZCB5b3UgYXJlIGdpdmVuIHRoZSByZWFzb24gd2h5XG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBDaGFpbmluZ1xuICAgICAgLS0tLS0tLS1cblxuICAgICAgVGhlIHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4gIFRoaXMgc2Vjb25kLCAnZG93bnN0cmVhbSdcbiAgICAgIHByb21pc2UgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmaXJzdCBwcm9taXNlJ3MgZnVsZmlsbG1lbnRcbiAgICAgIG9yIHJlamVjdGlvbiBoYW5kbGVyLCBvciByZWplY3RlZCBpZiB0aGUgaGFuZGxlciB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuXG4gICAgICBgYGBqc1xuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHJldHVybiB1c2VyLm5hbWU7XG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIHJldHVybiAnZGVmYXVsdCBuYW1lJztcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7XG4gICAgICAgIC8vIElmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgdXNlck5hbWVgIHdpbGwgYmUgdGhlIHVzZXIncyBuYW1lLCBvdGhlcndpc2UgaXRcbiAgICAgICAgLy8gd2lsbCBiZSBgJ2RlZmF1bHQgbmFtZSdgXG4gICAgICB9KTtcblxuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknKTtcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jyk7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIC8vIGlmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgcmVhc29uYCB3aWxsIGJlICdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScuXG4gICAgICAgIC8vIElmIGBmaW5kVXNlcmAgcmVqZWN0ZWQsIGByZWFzb25gIHdpbGwgYmUgJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknLlxuICAgICAgfSk7XG4gICAgICBgYGBcbiAgICAgIElmIHRoZSBkb3duc3RyZWFtIHByb21pc2UgZG9lcyBub3Qgc3BlY2lmeSBhIHJlamVjdGlvbiBoYW5kbGVyLCByZWplY3Rpb24gcmVhc29ucyB3aWxsIGJlIHByb3BhZ2F0ZWQgZnVydGhlciBkb3duc3RyZWFtLlxuXG4gICAgICBgYGBqc1xuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBQZWRhZ29naWNhbEV4Y2VwdGlvbignVXBzdHJlYW0gZXJyb3InKTtcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgLy8gVGhlIGBQZWRnYWdvY2lhbEV4Y2VwdGlvbmAgaXMgcHJvcGFnYXRlZCBhbGwgdGhlIHdheSBkb3duIHRvIGhlcmVcbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIEFzc2ltaWxhdGlvblxuICAgICAgLS0tLS0tLS0tLS0tXG5cbiAgICAgIFNvbWV0aW1lcyB0aGUgdmFsdWUgeW91IHdhbnQgdG8gcHJvcGFnYXRlIHRvIGEgZG93bnN0cmVhbSBwcm9taXNlIGNhbiBvbmx5IGJlXG4gICAgICByZXRyaWV2ZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJldHVybmluZyBhIHByb21pc2UgaW4gdGhlXG4gICAgICBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gaGFuZGxlci4gVGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIHRoZW4gYmUgcGVuZGluZ1xuICAgICAgdW50aWwgdGhlIHJldHVybmVkIHByb21pc2UgaXMgc2V0dGxlZC4gVGhpcyBpcyBjYWxsZWQgKmFzc2ltaWxhdGlvbiouXG5cbiAgICAgIGBgYGpzXG4gICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAgICAgLy8gVGhlIHVzZXIncyBjb21tZW50cyBhcmUgbm93IGF2YWlsYWJsZVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgSWYgdGhlIGFzc2ltbGlhdGVkIHByb21pc2UgcmVqZWN0cywgdGhlbiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgYWxzbyByZWplY3QuXG5cbiAgICAgIGBgYGpzXG4gICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCBmdWxmaWxscywgd2UnbGwgaGF2ZSB0aGUgdmFsdWUgaGVyZVxuICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIHJlamVjdHMsIHdlJ2xsIGhhdmUgdGhlIHJlYXNvbiBoZXJlXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBTaW1wbGUgRXhhbXBsZVxuICAgICAgLS0tLS0tLS0tLS0tLS1cblxuICAgICAgU3luY2hyb25vdXMgRXhhbXBsZVxuXG4gICAgICBgYGBqYXZhc2NyaXB0XG4gICAgICB2YXIgcmVzdWx0O1xuXG4gICAgICB0cnkge1xuICAgICAgICByZXN1bHQgPSBmaW5kUmVzdWx0KCk7XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH1cbiAgICAgIGBgYFxuXG4gICAgICBFcnJiYWNrIEV4YW1wbGVcblxuICAgICAgYGBganNcbiAgICAgIGZpbmRSZXN1bHQoZnVuY3Rpb24ocmVzdWx0LCBlcnIpe1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgUHJvbWlzZSBFeGFtcGxlO1xuXG4gICAgICBgYGBqYXZhc2NyaXB0XG4gICAgICBmaW5kUmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBBZHZhbmNlZCBFeGFtcGxlXG4gICAgICAtLS0tLS0tLS0tLS0tLVxuXG4gICAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG5cbiAgICAgIGBgYGphdmFzY3JpcHRcbiAgICAgIHZhciBhdXRob3IsIGJvb2tzO1xuXG4gICAgICB0cnkge1xuICAgICAgICBhdXRob3IgPSBmaW5kQXV0aG9yKCk7XG4gICAgICAgIGJvb2tzICA9IGZpbmRCb29rc0J5QXV0aG9yKGF1dGhvcik7XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH1cbiAgICAgIGBgYFxuXG4gICAgICBFcnJiYWNrIEV4YW1wbGVcblxuICAgICAgYGBganNcblxuICAgICAgZnVuY3Rpb24gZm91bmRCb29rcyhib29rcykge1xuXG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGZhaWx1cmUocmVhc29uKSB7XG5cbiAgICAgIH1cblxuICAgICAgZmluZEF1dGhvcihmdW5jdGlvbihhdXRob3IsIGVycil7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmaW5kQm9vb2tzQnlBdXRob3IoYXV0aG9yLCBmdW5jdGlvbihib29rcywgZXJyKSB7XG4gICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIGZvdW5kQm9va3MoYm9va3MpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICBmYWlsdXJlKHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgUHJvbWlzZSBFeGFtcGxlO1xuXG4gICAgICBgYGBqYXZhc2NyaXB0XG4gICAgICBmaW5kQXV0aG9yKCkuXG4gICAgICAgIHRoZW4oZmluZEJvb2tzQnlBdXRob3IpLlxuICAgICAgICB0aGVuKGZ1bmN0aW9uKGJvb2tzKXtcbiAgICAgICAgICAvLyBmb3VuZCBib29rc1xuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIEBtZXRob2QgdGhlblxuICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gb25GdWxmaWxsZWRcbiAgICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0ZWRcbiAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICAgKi9cbiAgICAgIHRoZW46IGxpYiRlczYkcHJvbWlzZSR0aGVuJCRkZWZhdWx0LFxuXG4gICAgLyoqXG4gICAgICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXG4gICAgICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LlxuXG4gICAgICBgYGBqc1xuICAgICAgZnVuY3Rpb24gZmluZEF1dGhvcigpe1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkbid0IGZpbmQgdGhhdCBhdXRob3InKTtcbiAgICAgIH1cblxuICAgICAgLy8gc3luY2hyb25vdXNcbiAgICAgIHRyeSB7XG4gICAgICAgIGZpbmRBdXRob3IoKTtcbiAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgICB9XG5cbiAgICAgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcbiAgICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgQG1ldGhvZCBjYXRjaFxuICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3Rpb25cbiAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICAgKi9cbiAgICAgICdjYXRjaCc6IGZ1bmN0aW9uKG9uUmVqZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24pO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3I7XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IoQ29uc3RydWN0b3IsIGlucHV0KSB7XG4gICAgICB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG4gICAgICB0aGlzLnByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG5cbiAgICAgIGlmICghdGhpcy5wcm9taXNlW2xpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBST01JU0VfSURdKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG1ha2VQcm9taXNlKHRoaXMucHJvbWlzZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICAgIHRoaXMuX2lucHV0ICAgICA9IGlucHV0O1xuICAgICAgICB0aGlzLmxlbmd0aCAgICAgPSBpbnB1dC5sZW5ndGg7XG4gICAgICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcblxuICAgICAgICB0aGlzLl9yZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpO1xuXG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5sZW5ndGggfHwgMDtcbiAgICAgICAgICB0aGlzLl9lbnVtZXJhdGUoKTtcbiAgICAgICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdCh0aGlzLnByb21pc2UsIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCR2YWxpZGF0aW9uRXJyb3IoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJHZhbGlkYXRpb25FcnJvcigpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpO1xuICAgIH1cblxuICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fZW51bWVyYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbGVuZ3RoICA9IHRoaXMubGVuZ3RoO1xuICAgICAgdmFyIGlucHV0ICAgPSB0aGlzLl9pbnB1dDtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IHRoaXMuX3N0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HICYmIGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLl9lYWNoRW50cnkoaW5wdXRbaV0sIGkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX2VhY2hFbnRyeSA9IGZ1bmN0aW9uKGVudHJ5LCBpKSB7XG4gICAgICB2YXIgYyA9IHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3I7XG4gICAgICB2YXIgcmVzb2x2ZSA9IGMucmVzb2x2ZTtcblxuICAgICAgaWYgKHJlc29sdmUgPT09IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJGRlZmF1bHQpIHtcbiAgICAgICAgdmFyIHRoZW4gPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRnZXRUaGVuKGVudHJ5KTtcblxuICAgICAgICBpZiAodGhlbiA9PT0gbGliJGVzNiRwcm9taXNlJHRoZW4kJGRlZmF1bHQgJiZcbiAgICAgICAgICAgIGVudHJ5Ll9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuICAgICAgICAgIHRoaXMuX3NldHRsZWRBdChlbnRyeS5fc3RhdGUsIGksIGVudHJ5Ll9yZXN1bHQpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGVuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG4gICAgICAgICAgdGhpcy5fcmVzdWx0W2ldID0gZW50cnk7XG4gICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGRlZmF1bHQpIHtcbiAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBjKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgZW50cnksIHRoZW4pO1xuICAgICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChwcm9taXNlLCBpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQobmV3IGMoZnVuY3Rpb24ocmVzb2x2ZSkgeyByZXNvbHZlKGVudHJ5KTsgfSksIGkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQocmVzb2x2ZShlbnRyeSksIGkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX3NldHRsZWRBdCA9IGZ1bmN0aW9uKHN0YXRlLCBpLCB2YWx1ZSkge1xuICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG5cbiAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuICAgICAgICB0aGlzLl9yZW1haW5pbmctLTtcblxuICAgICAgICBpZiAoc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9yZXN1bHRbaV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbihwcm9taXNlLCBpKSB7XG4gICAgICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cbiAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShwcm9taXNlLCB1bmRlZmluZWQsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGVudW1lcmF0b3IuX3NldHRsZWRBdChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQsIGksIHZhbHVlKTtcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICBlbnVtZXJhdG9yLl9zZXR0bGVkQXQobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQsIGksIHJlYXNvbik7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkcG9seWZpbGwoKSB7XG4gICAgICB2YXIgbG9jYWw7XG5cbiAgICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGxvY2FsID0gZ2xvYmFsO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBsb2NhbCA9IHNlbGY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGxvY2FsID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncG9seWZpbGwgZmFpbGVkIGJlY2F1c2UgZ2xvYmFsIG9iamVjdCBpcyB1bmF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gICAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgUCA9IGxvY2FsLlByb21pc2U7XG5cbiAgICAgIGlmIChQICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChQLnJlc29sdmUoKSkgPT09ICdbb2JqZWN0IFByb21pc2VdJyAmJiAhUC5jYXN0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbG9jYWwuUHJvbWlzZSA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0O1xuICAgIH1cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRwb2x5ZmlsbDtcblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlID0ge1xuICAgICAgJ1Byb21pc2UnOiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdCxcbiAgICAgICdwb2x5ZmlsbCc6IGxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkZGVmYXVsdFxuICAgIH07XG5cbiAgICAvKiBnbG9iYWwgZGVmaW5lOnRydWUgbW9kdWxlOnRydWUgd2luZG93OiB0cnVlICovXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lWydhbWQnXSkge1xuICAgICAgZGVmaW5lKGZ1bmN0aW9uKCkgeyByZXR1cm4gbGliJGVzNiRwcm9taXNlJHVtZCQkRVM2UHJvbWlzZTsgfSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGVbJ2V4cG9ydHMnXSkge1xuICAgICAgbW9kdWxlWydleHBvcnRzJ10gPSBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzWydFUzZQcm9taXNlJ10gPSBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlO1xuICAgIH1cblxuICAgIGxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkZGVmYXVsdCgpO1xufSkuY2FsbCh0aGlzKTtcblxuXG5cbi8qKiogRVhQT1JUUyBGUk9NIGV4cG9ydHMtbG9hZGVyICoqKi9cbm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsLlByb21pc2U7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vZXhwb3J0cy1sb2FkZXI/Z2xvYmFsLlByb21pc2UhLi9+L2VzNi1wcm9taXNlL2Rpc3QvZXM2LXByb21pc2UuanNcbiAqKiBtb2R1bGUgaWQgPSA4M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiKGZ1bmN0aW9uKHNlbGYpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGlmIChzZWxmLmZldGNoKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB2YXIgc3VwcG9ydCA9IHtcbiAgICBzZWFyY2hQYXJhbXM6ICdVUkxTZWFyY2hQYXJhbXMnIGluIHNlbGYsXG4gICAgaXRlcmFibGU6ICdTeW1ib2wnIGluIHNlbGYgJiYgJ2l0ZXJhdG9yJyBpbiBTeW1ib2wsXG4gICAgYmxvYjogJ0ZpbGVSZWFkZXInIGluIHNlbGYgJiYgJ0Jsb2InIGluIHNlbGYgJiYgKGZ1bmN0aW9uKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbmV3IEJsb2IoKVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH0pKCksXG4gICAgZm9ybURhdGE6ICdGb3JtRGF0YScgaW4gc2VsZixcbiAgICBhcnJheUJ1ZmZlcjogJ0FycmF5QnVmZmVyJyBpbiBzZWxmXG4gIH1cblxuICBmdW5jdGlvbiBub3JtYWxpemVOYW1lKG5hbWUpIHtcbiAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICBuYW1lID0gU3RyaW5nKG5hbWUpXG4gICAgfVxuICAgIGlmICgvW15hLXowLTlcXC0jJCUmJyorLlxcXl9gfH5dL2kudGVzdChuYW1lKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBjaGFyYWN0ZXIgaW4gaGVhZGVyIGZpZWxkIG5hbWUnKVxuICAgIH1cbiAgICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpXG4gIH1cblxuICBmdW5jdGlvbiBub3JtYWxpemVWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICB2YWx1ZSA9IFN0cmluZyh2YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cblxuICAvLyBCdWlsZCBhIGRlc3RydWN0aXZlIGl0ZXJhdG9yIGZvciB0aGUgdmFsdWUgbGlzdFxuICBmdW5jdGlvbiBpdGVyYXRvckZvcihpdGVtcykge1xuICAgIHZhciBpdGVyYXRvciA9IHtcbiAgICAgIG5leHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBpdGVtcy5zaGlmdCgpXG4gICAgICAgIHJldHVybiB7ZG9uZTogdmFsdWUgPT09IHVuZGVmaW5lZCwgdmFsdWU6IHZhbHVlfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gICAgICBpdGVyYXRvcltTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvclxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpdGVyYXRvclxuICB9XG5cbiAgZnVuY3Rpb24gSGVhZGVycyhoZWFkZXJzKSB7XG4gICAgdGhpcy5tYXAgPSB7fVxuXG4gICAgaWYgKGhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzKSB7XG4gICAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgdmFsdWUpXG4gICAgICB9LCB0aGlzKVxuXG4gICAgfSBlbHNlIGlmIChoZWFkZXJzKSB7XG4gICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhoZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgaGVhZGVyc1tuYW1lXSlcbiAgICAgIH0sIHRoaXMpXG4gICAgfVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICBuYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKVxuICAgIHZhbHVlID0gbm9ybWFsaXplVmFsdWUodmFsdWUpXG4gICAgdmFyIGxpc3QgPSB0aGlzLm1hcFtuYW1lXVxuICAgIGlmICghbGlzdCkge1xuICAgICAgbGlzdCA9IFtdXG4gICAgICB0aGlzLm1hcFtuYW1lXSA9IGxpc3RcbiAgICB9XG4gICAgbGlzdC5wdXNoKHZhbHVlKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGVbJ2RlbGV0ZSddID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGRlbGV0ZSB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciB2YWx1ZXMgPSB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXVxuICAgIHJldHVybiB2YWx1ZXMgPyB2YWx1ZXNbMF0gOiBudWxsXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldIHx8IFtdXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwLmhhc093blByb3BlcnR5KG5vcm1hbGl6ZU5hbWUobmFtZSkpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldID0gW25vcm1hbGl6ZVZhbHVlKHZhbHVlKV1cbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMubWFwKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHRoaXMubWFwW25hbWVdLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB2YWx1ZSwgbmFtZSwgdGhpcylcbiAgICAgIH0sIHRoaXMpXG4gICAgfSwgdGhpcylcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaXRlbXMgPSBbXVxuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkgeyBpdGVtcy5wdXNoKG5hbWUpIH0pXG4gICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUudmFsdWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW11cbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHsgaXRlbXMucHVzaCh2YWx1ZSkgfSlcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW11cbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHsgaXRlbXMucHVzaChbbmFtZSwgdmFsdWVdKSB9KVxuICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcbiAgfVxuXG4gIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gICAgSGVhZGVycy5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXNcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnN1bWVkKGJvZHkpIHtcbiAgICBpZiAoYm9keS5ib2R5VXNlZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpKVxuICAgIH1cbiAgICBib2R5LmJvZHlVc2VkID0gdHJ1ZVxuICB9XG5cbiAgZnVuY3Rpb24gZmlsZVJlYWRlclJlYWR5KHJlYWRlcikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzb2x2ZShyZWFkZXIucmVzdWx0KVxuICAgICAgfVxuICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KHJlYWRlci5lcnJvcilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc0FycmF5QnVmZmVyKGJsb2IpIHtcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iKVxuICAgIHJldHVybiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gICAgcmVhZGVyLnJlYWRBc1RleHQoYmxvYilcbiAgICByZXR1cm4gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcbiAgfVxuXG4gIGZ1bmN0aW9uIEJvZHkoKSB7XG4gICAgdGhpcy5ib2R5VXNlZCA9IGZhbHNlXG5cbiAgICB0aGlzLl9pbml0Qm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcbiAgICAgIHRoaXMuX2JvZHlJbml0ID0gYm9keVxuICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHlcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5ibG9iICYmIEJsb2IucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUJsb2IgPSBib2R5XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuZm9ybURhdGEgJiYgRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUZvcm1EYXRhID0gYm9keVxuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5LnRvU3RyaW5nKClcbiAgICAgIH0gZWxzZSBpZiAoIWJvZHkpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSAnJ1xuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyICYmIEFycmF5QnVmZmVyLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIC8vIE9ubHkgc3VwcG9ydCBBcnJheUJ1ZmZlcnMgZm9yIFBPU1QgbWV0aG9kLlxuICAgICAgICAvLyBSZWNlaXZpbmcgQXJyYXlCdWZmZXJzIGhhcHBlbnMgdmlhIEJsb2JzLCBpbnN0ZWFkLlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bnN1cHBvcnRlZCBCb2R5SW5pdCB0eXBlJylcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSkge1xuICAgICAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ3RleHQvcGxhaW47Y2hhcnNldD1VVEYtOCcpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUJsb2IgJiYgdGhpcy5fYm9keUJsb2IudHlwZSkge1xuICAgICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsIHRoaXMuX2JvZHlCbG9iLnR5cGUpXG4gICAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04JylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdXBwb3J0LmJsb2IpIHtcbiAgICAgIHRoaXMuYmxvYiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0ZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUJsb2IpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIGJsb2InKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ibG9iKCkudGhlbihyZWFkQmxvYkFzQXJyYXlCdWZmZXIpXG4gICAgICB9XG5cbiAgICAgIHRoaXMudGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0ZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICAgIHJldHVybiByZWFkQmxvYkFzVGV4dCh0aGlzLl9ib2R5QmxvYilcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgdGV4dCcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcbiAgICAgICAgcmV0dXJuIHJlamVjdGVkID8gcmVqZWN0ZWQgOiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keVRleHQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnQuZm9ybURhdGEpIHtcbiAgICAgIHRoaXMuZm9ybURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oZGVjb2RlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuanNvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oSlNPTi5wYXJzZSlcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLy8gSFRUUCBtZXRob2RzIHdob3NlIGNhcGl0YWxpemF0aW9uIHNob3VsZCBiZSBub3JtYWxpemVkXG4gIHZhciBtZXRob2RzID0gWydERUxFVEUnLCAnR0VUJywgJ0hFQUQnLCAnT1BUSU9OUycsICdQT1NUJywgJ1BVVCddXG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kKG1ldGhvZCkge1xuICAgIHZhciB1cGNhc2VkID0gbWV0aG9kLnRvVXBwZXJDYXNlKClcbiAgICByZXR1cm4gKG1ldGhvZHMuaW5kZXhPZih1cGNhc2VkKSA+IC0xKSA/IHVwY2FzZWQgOiBtZXRob2RcbiAgfVxuXG4gIGZ1bmN0aW9uIFJlcXVlc3QoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgIHZhciBib2R5ID0gb3B0aW9ucy5ib2R5XG4gICAgaWYgKFJlcXVlc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoaW5wdXQpKSB7XG4gICAgICBpZiAoaW5wdXQuYm9keVVzZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQWxyZWFkeSByZWFkJylcbiAgICAgIH1cbiAgICAgIHRoaXMudXJsID0gaW5wdXQudXJsXG4gICAgICB0aGlzLmNyZWRlbnRpYWxzID0gaW5wdXQuY3JlZGVudGlhbHNcbiAgICAgIGlmICghb3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKGlucHV0LmhlYWRlcnMpXG4gICAgICB9XG4gICAgICB0aGlzLm1ldGhvZCA9IGlucHV0Lm1ldGhvZFxuICAgICAgdGhpcy5tb2RlID0gaW5wdXQubW9kZVxuICAgICAgaWYgKCFib2R5KSB7XG4gICAgICAgIGJvZHkgPSBpbnB1dC5fYm9keUluaXRcbiAgICAgICAgaW5wdXQuYm9keVVzZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudXJsID0gaW5wdXRcbiAgICB9XG5cbiAgICB0aGlzLmNyZWRlbnRpYWxzID0gb3B0aW9ucy5jcmVkZW50aWFscyB8fCB0aGlzLmNyZWRlbnRpYWxzIHx8ICdvbWl0J1xuICAgIGlmIChvcHRpb25zLmhlYWRlcnMgfHwgIXRoaXMuaGVhZGVycykge1xuICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuICAgIH1cbiAgICB0aGlzLm1ldGhvZCA9IG5vcm1hbGl6ZU1ldGhvZChvcHRpb25zLm1ldGhvZCB8fCB0aGlzLm1ldGhvZCB8fCAnR0VUJylcbiAgICB0aGlzLm1vZGUgPSBvcHRpb25zLm1vZGUgfHwgdGhpcy5tb2RlIHx8IG51bGxcbiAgICB0aGlzLnJlZmVycmVyID0gbnVsbFxuXG4gICAgaWYgKCh0aGlzLm1ldGhvZCA9PT0gJ0dFVCcgfHwgdGhpcy5tZXRob2QgPT09ICdIRUFEJykgJiYgYm9keSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm9keSBub3QgYWxsb3dlZCBmb3IgR0VUIG9yIEhFQUQgcmVxdWVzdHMnKVxuICAgIH1cbiAgICB0aGlzLl9pbml0Qm9keShib2R5KVxuICB9XG5cbiAgUmVxdWVzdC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFJlcXVlc3QodGhpcylcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlY29kZShib2R5KSB7XG4gICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKVxuICAgIGJvZHkudHJpbSgpLnNwbGl0KCcmJykuZm9yRWFjaChmdW5jdGlvbihieXRlcykge1xuICAgICAgaWYgKGJ5dGVzKSB7XG4gICAgICAgIHZhciBzcGxpdCA9IGJ5dGVzLnNwbGl0KCc9JylcbiAgICAgICAgdmFyIG5hbWUgPSBzcGxpdC5zaGlmdCgpLnJlcGxhY2UoL1xcKy9nLCAnICcpXG4gICAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJz0nKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuICAgICAgICBmb3JtLmFwcGVuZChkZWNvZGVVUklDb21wb25lbnQobmFtZSksIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gZm9ybVxuICB9XG5cbiAgZnVuY3Rpb24gaGVhZGVycyh4aHIpIHtcbiAgICB2YXIgaGVhZCA9IG5ldyBIZWFkZXJzKClcbiAgICB2YXIgcGFpcnMgPSAoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpIHx8ICcnKS50cmltKCkuc3BsaXQoJ1xcbicpXG4gICAgcGFpcnMuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIpIHtcbiAgICAgIHZhciBzcGxpdCA9IGhlYWRlci50cmltKCkuc3BsaXQoJzonKVxuICAgICAgdmFyIGtleSA9IHNwbGl0LnNoaWZ0KCkudHJpbSgpXG4gICAgICB2YXIgdmFsdWUgPSBzcGxpdC5qb2luKCc6JykudHJpbSgpXG4gICAgICBoZWFkLmFwcGVuZChrZXksIHZhbHVlKVxuICAgIH0pXG4gICAgcmV0dXJuIGhlYWRcbiAgfVxuXG4gIEJvZHkuY2FsbChSZXF1ZXN0LnByb3RvdHlwZSlcblxuICBmdW5jdGlvbiBSZXNwb25zZShib2R5SW5pdCwgb3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHt9XG4gICAgfVxuXG4gICAgdGhpcy50eXBlID0gJ2RlZmF1bHQnXG4gICAgdGhpcy5zdGF0dXMgPSBvcHRpb25zLnN0YXR1c1xuICAgIHRoaXMub2sgPSB0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDBcbiAgICB0aGlzLnN0YXR1c1RleHQgPSBvcHRpb25zLnN0YXR1c1RleHRcbiAgICB0aGlzLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzID8gb3B0aW9ucy5oZWFkZXJzIDogbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuICAgIHRoaXMudXJsID0gb3B0aW9ucy51cmwgfHwgJydcbiAgICB0aGlzLl9pbml0Qm9keShib2R5SW5pdClcbiAgfVxuXG4gIEJvZHkuY2FsbChSZXNwb25zZS5wcm90b3R5cGUpXG5cbiAgUmVzcG9uc2UucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZSh0aGlzLl9ib2R5SW5pdCwge1xuICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcbiAgICAgIHN0YXR1c1RleHQ6IHRoaXMuc3RhdHVzVGV4dCxcbiAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHRoaXMuaGVhZGVycyksXG4gICAgICB1cmw6IHRoaXMudXJsXG4gICAgfSlcbiAgfVxuXG4gIFJlc3BvbnNlLmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IDAsIHN0YXR1c1RleHQ6ICcnfSlcbiAgICByZXNwb25zZS50eXBlID0gJ2Vycm9yJ1xuICAgIHJldHVybiByZXNwb25zZVxuICB9XG5cbiAgdmFyIHJlZGlyZWN0U3RhdHVzZXMgPSBbMzAxLCAzMDIsIDMwMywgMzA3LCAzMDhdXG5cbiAgUmVzcG9uc2UucmVkaXJlY3QgPSBmdW5jdGlvbih1cmwsIHN0YXR1cykge1xuICAgIGlmIChyZWRpcmVjdFN0YXR1c2VzLmluZGV4T2Yoc3RhdHVzKSA9PT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHN0YXR1cyBjb2RlJylcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IHN0YXR1cywgaGVhZGVyczoge2xvY2F0aW9uOiB1cmx9fSlcbiAgfVxuXG4gIHNlbGYuSGVhZGVycyA9IEhlYWRlcnNcbiAgc2VsZi5SZXF1ZXN0ID0gUmVxdWVzdFxuICBzZWxmLlJlc3BvbnNlID0gUmVzcG9uc2VcblxuICBzZWxmLmZldGNoID0gZnVuY3Rpb24oaW5wdXQsIGluaXQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcmVxdWVzdFxuICAgICAgaWYgKFJlcXVlc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoaW5wdXQpICYmICFpbml0KSB7XG4gICAgICAgIHJlcXVlc3QgPSBpbnB1dFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KGlucHV0LCBpbml0KVxuICAgICAgfVxuXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcblxuICAgICAgZnVuY3Rpb24gcmVzcG9uc2VVUkwoKSB7XG4gICAgICAgIGlmICgncmVzcG9uc2VVUkwnIGluIHhocikge1xuICAgICAgICAgIHJldHVybiB4aHIucmVzcG9uc2VVUkxcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEF2b2lkIHNlY3VyaXR5IHdhcm5pbmdzIG9uIGdldFJlc3BvbnNlSGVhZGVyIHdoZW4gbm90IGFsbG93ZWQgYnkgQ09SU1xuICAgICAgICBpZiAoL15YLVJlcXVlc3QtVVJMOi9tLnRlc3QoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSkge1xuICAgICAgICAgIHJldHVybiB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ1gtUmVxdWVzdC1VUkwnKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgc3RhdHVzOiB4aHIuc3RhdHVzLFxuICAgICAgICAgIHN0YXR1c1RleHQ6IHhoci5zdGF0dXNUZXh0LFxuICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoeGhyKSxcbiAgICAgICAgICB1cmw6IHJlc3BvbnNlVVJMKClcbiAgICAgICAgfVxuICAgICAgICB2YXIgYm9keSA9ICdyZXNwb25zZScgaW4geGhyID8geGhyLnJlc3BvbnNlIDogeGhyLnJlc3BvbnNlVGV4dFxuICAgICAgICByZXNvbHZlKG5ldyBSZXNwb25zZShib2R5LCBvcHRpb25zKSlcbiAgICAgIH1cblxuICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcbiAgICAgIH1cblxuICAgICAgeGhyLm9udGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IGZhaWxlZCcpKVxuICAgICAgfVxuXG4gICAgICB4aHIub3BlbihyZXF1ZXN0Lm1ldGhvZCwgcmVxdWVzdC51cmwsIHRydWUpXG5cbiAgICAgIGlmIChyZXF1ZXN0LmNyZWRlbnRpYWxzID09PSAnaW5jbHVkZScpIHtcbiAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKCdyZXNwb25zZVR5cGUnIGluIHhociAmJiBzdXBwb3J0LmJsb2IpIHtcbiAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJ1xuICAgICAgfVxuXG4gICAgICByZXF1ZXN0LmhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihuYW1lLCB2YWx1ZSlcbiAgICAgIH0pXG5cbiAgICAgIHhoci5zZW5kKHR5cGVvZiByZXF1ZXN0Ll9ib2R5SW5pdCA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogcmVxdWVzdC5fYm9keUluaXQpXG4gICAgfSlcbiAgfVxuICBzZWxmLmZldGNoLnBvbHlmaWxsID0gdHJ1ZVxufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMpO1xuXG5cbi8qKiogRVhQT1JUUyBGUk9NIGV4cG9ydHMtbG9hZGVyICoqKi9cbm1vZHVsZS5leHBvcnRzID0gc2VsZi5mZXRjaDtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9leHBvcnRzLWxvYWRlcj9zZWxmLmZldGNoIS4vfi93aGF0d2ctZmV0Y2gvZmV0Y2guanNcbiAqKiBtb2R1bGUgaWQgPSA4NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYjRkZTI5ZmU0M2FjODVlZjBiNjZmOWM3ZGZjNDc0ZDMucG5nXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvY29tcG9uZW50cy9zaXRlLWhlYWRlci9sb2dvLnBuZ1xuICoqIG1vZHVsZSBpZCA9IDg1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi9fZ2V0TmF0aXZlJyksXG4gICAgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xudmFyIERhdGFWaWV3ID0gZ2V0TmF0aXZlKHJvb3QsICdEYXRhVmlldycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IERhdGFWaWV3O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19EYXRhVmlldy5qc1xuICoqIG1vZHVsZSBpZCA9IDg2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaGFzaENsZWFyID0gcmVxdWlyZSgnLi9faGFzaENsZWFyJyksXG4gICAgaGFzaERlbGV0ZSA9IHJlcXVpcmUoJy4vX2hhc2hEZWxldGUnKSxcbiAgICBoYXNoR2V0ID0gcmVxdWlyZSgnLi9faGFzaEdldCcpLFxuICAgIGhhc2hIYXMgPSByZXF1aXJlKCcuL19oYXNoSGFzJyksXG4gICAgaGFzaFNldCA9IHJlcXVpcmUoJy4vX2hhc2hTZXQnKTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgaGFzaCBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIEhhc2goZW50cmllcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGVudHJpZXMgPyBlbnRyaWVzLmxlbmd0aCA6IDA7XG5cbiAgdGhpcy5jbGVhcigpO1xuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7XG4gIH1cbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYEhhc2hgLlxuSGFzaC5wcm90b3R5cGUuY2xlYXIgPSBoYXNoQ2xlYXI7XG5IYXNoLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBoYXNoRGVsZXRlO1xuSGFzaC5wcm90b3R5cGUuZ2V0ID0gaGFzaEdldDtcbkhhc2gucHJvdG90eXBlLmhhcyA9IGhhc2hIYXM7XG5IYXNoLnByb3RvdHlwZS5zZXQgPSBoYXNoU2V0O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEhhc2g7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX0hhc2guanNcbiAqKiBtb2R1bGUgaWQgPSA4N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdldE5hdGl2ZSA9IHJlcXVpcmUoJy4vX2dldE5hdGl2ZScpLFxuICAgIHJvb3QgPSByZXF1aXJlKCcuL19yb290Jyk7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cbnZhciBQcm9taXNlID0gZ2V0TmF0aXZlKHJvb3QsICdQcm9taXNlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvbWlzZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fUHJvbWlzZS5qc1xuICoqIG1vZHVsZSBpZCA9IDg4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi9fZ2V0TmF0aXZlJyksXG4gICAgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xudmFyIFNldCA9IGdldE5hdGl2ZShyb290LCAnU2V0Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gU2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19TZXQuanNcbiAqKiBtb2R1bGUgaWQgPSA4OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIE1hcENhY2hlID0gcmVxdWlyZSgnLi9fTWFwQ2FjaGUnKSxcbiAgICBzZXRDYWNoZUFkZCA9IHJlcXVpcmUoJy4vX3NldENhY2hlQWRkJyksXG4gICAgc2V0Q2FjaGVIYXMgPSByZXF1aXJlKCcuL19zZXRDYWNoZUhhcycpO1xuXG4vKipcbiAqXG4gKiBDcmVhdGVzIGFuIGFycmF5IGNhY2hlIG9iamVjdCB0byBzdG9yZSB1bmlxdWUgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFt2YWx1ZXNdIFRoZSB2YWx1ZXMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIFNldENhY2hlKHZhbHVlcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IHZhbHVlcyA/IHZhbHVlcy5sZW5ndGggOiAwO1xuXG4gIHRoaXMuX19kYXRhX18gPSBuZXcgTWFwQ2FjaGU7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdGhpcy5hZGQodmFsdWVzW2luZGV4XSk7XG4gIH1cbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYFNldENhY2hlYC5cblNldENhY2hlLnByb3RvdHlwZS5hZGQgPSBTZXRDYWNoZS5wcm90b3R5cGUucHVzaCA9IHNldENhY2hlQWRkO1xuU2V0Q2FjaGUucHJvdG90eXBlLmhhcyA9IHNldENhY2hlSGFzO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNldENhY2hlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19TZXRDYWNoZS5qc1xuICoqIG1vZHVsZSBpZCA9IDkwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgVWludDhBcnJheSA9IHJvb3QuVWludDhBcnJheTtcblxubW9kdWxlLmV4cG9ydHMgPSBVaW50OEFycmF5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19VaW50OEFycmF5LmpzXG4gKiogbW9kdWxlIGlkID0gOTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnZXROYXRpdmUgPSByZXF1aXJlKCcuL19nZXROYXRpdmUnKSxcbiAgICByb290ID0gcmVxdWlyZSgnLi9fcm9vdCcpO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG52YXIgV2Vha01hcCA9IGdldE5hdGl2ZShyb290LCAnV2Vha01hcCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFdlYWtNYXA7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX1dlYWtNYXAuanNcbiAqKiBtb2R1bGUgaWQgPSA5MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBBIGZhc3RlciBhbHRlcm5hdGl2ZSB0byBgRnVuY3Rpb24jYXBwbHlgLCB0aGlzIGZ1bmN0aW9uIGludm9rZXMgYGZ1bmNgXG4gKiB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiBgdGhpc0FyZ2AgYW5kIHRoZSBhcmd1bWVudHMgb2YgYGFyZ3NgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBpbnZva2UuXG4gKiBAcGFyYW0geyp9IHRoaXNBcmcgVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgYGZ1bmNgIHdpdGguXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzdWx0IG9mIGBmdW5jYC5cbiAqL1xuZnVuY3Rpb24gYXBwbHkoZnVuYywgdGhpc0FyZywgYXJncykge1xuICB2YXIgbGVuZ3RoID0gYXJncy5sZW5ndGg7XG4gIHN3aXRjaCAobGVuZ3RoKSB7XG4gICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcpO1xuICAgIGNhc2UgMTogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmdzWzBdKTtcbiAgICBjYXNlIDI6IHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgY2FzZSAzOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICB9XG4gIHJldHVybiBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFwcGx5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19hcHBseS5qc1xuICoqIG1vZHVsZSBpZCA9IDkzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5zb21lYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWVcbiAqIHNob3J0aGFuZHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IFthcnJheV0gVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYXJyYXlTb21lKGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhcnJheVNvbWU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2FycmF5U29tZS5qc1xuICoqIG1vZHVsZSBpZCA9IDk0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5kZWxheWAgYW5kIGBfLmRlZmVyYCB3aGljaCBhY2NlcHRzIGFuIGFycmF5XG4gKiBvZiBgZnVuY2AgYXJndW1lbnRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWxheS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB3YWl0IFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5IGludm9jYXRpb24uXG4gKiBAcGFyYW0ge09iamVjdH0gYXJncyBUaGUgYXJndW1lbnRzIHRvIHByb3ZpZGUgdG8gYGZ1bmNgLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXIgaWQuXG4gKi9cbmZ1bmN0aW9uIGJhc2VEZWxheShmdW5jLCB3YWl0LCBhcmdzKSB7XG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBmdW5jLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7IH0sIHdhaXQpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VEZWxheTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZURlbGF5LmpzXG4gKiogbW9kdWxlIGlkID0gOTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZmluZEluZGV4YCBhbmQgYF8uZmluZExhc3RJbmRleGAgd2l0aG91dFxuICogc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IGZyb21JbmRleCBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VGaW5kSW5kZXgoYXJyYXksIHByZWRpY2F0ZSwgZnJvbUluZGV4LCBmcm9tUmlnaHQpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgIGluZGV4ID0gZnJvbUluZGV4ICsgKGZyb21SaWdodCA/IDEgOiAtMSk7XG5cbiAgd2hpbGUgKChmcm9tUmlnaHQgPyBpbmRleC0tIDogKytpbmRleCA8IGxlbmd0aCkpIHtcbiAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbiAgfVxuICByZXR1cm4gLTE7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUZpbmRJbmRleDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUZpbmRJbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDk2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmhhc0luYCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IGtleSBUaGUga2V5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSGFzSW4ob2JqZWN0LCBrZXkpIHtcbiAgcmV0dXJuIG9iamVjdCAhPSBudWxsICYmIGtleSBpbiBPYmplY3Qob2JqZWN0KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlSGFzSW47XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VIYXNJbi5qc1xuICoqIG1vZHVsZSBpZCA9IDk3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgU3RhY2sgPSByZXF1aXJlKCcuL19TdGFjaycpLFxuICAgIGVxdWFsQXJyYXlzID0gcmVxdWlyZSgnLi9fZXF1YWxBcnJheXMnKSxcbiAgICBlcXVhbEJ5VGFnID0gcmVxdWlyZSgnLi9fZXF1YWxCeVRhZycpLFxuICAgIGVxdWFsT2JqZWN0cyA9IHJlcXVpcmUoJy4vX2VxdWFsT2JqZWN0cycpLFxuICAgIGdldFRhZyA9IHJlcXVpcmUoJy4vX2dldFRhZycpLFxuICAgIGlzQXJyYXkgPSByZXF1aXJlKCcuL2lzQXJyYXknKSxcbiAgICBpc0hvc3RPYmplY3QgPSByZXF1aXJlKCcuL19pc0hvc3RPYmplY3QnKSxcbiAgICBpc1R5cGVkQXJyYXkgPSByZXF1aXJlKCcuL2lzVHlwZWRBcnJheScpO1xuXG4vKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cbnZhciBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG4gICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxgIGZvciBhcnJheXMgYW5kIG9iamVjdHMgd2hpY2ggcGVyZm9ybXNcbiAqIGRlZXAgY29tcGFyaXNvbnMgYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cyBlbmFibGluZyBvYmplY3RzIHdpdGggY2lyY3VsYXJcbiAqIHJlZmVyZW5jZXMgdG8gYmUgY29tcGFyZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtudW1iZXJ9IFtiaXRtYXNrXSBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYFxuICogIGZvciBtb3JlIGRldGFpbHMuXG4gKiBAcGFyYW0ge09iamVjdH0gW3N0YWNrXSBUcmFja3MgdHJhdmVyc2VkIGBvYmplY3RgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzRXF1YWxEZWVwKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcbiAgdmFyIG9iaklzQXJyID0gaXNBcnJheShvYmplY3QpLFxuICAgICAgb3RoSXNBcnIgPSBpc0FycmF5KG90aGVyKSxcbiAgICAgIG9ialRhZyA9IGFycmF5VGFnLFxuICAgICAgb3RoVGFnID0gYXJyYXlUYWc7XG5cbiAgaWYgKCFvYmpJc0Fycikge1xuICAgIG9ialRhZyA9IGdldFRhZyhvYmplY3QpO1xuICAgIG9ialRhZyA9IG9ialRhZyA9PSBhcmdzVGFnID8gb2JqZWN0VGFnIDogb2JqVGFnO1xuICB9XG4gIGlmICghb3RoSXNBcnIpIHtcbiAgICBvdGhUYWcgPSBnZXRUYWcob3RoZXIpO1xuICAgIG90aFRhZyA9IG90aFRhZyA9PSBhcmdzVGFnID8gb2JqZWN0VGFnIDogb3RoVGFnO1xuICB9XG4gIHZhciBvYmpJc09iaiA9IG9ialRhZyA9PSBvYmplY3RUYWcgJiYgIWlzSG9zdE9iamVjdChvYmplY3QpLFxuICAgICAgb3RoSXNPYmogPSBvdGhUYWcgPT0gb2JqZWN0VGFnICYmICFpc0hvc3RPYmplY3Qob3RoZXIpLFxuICAgICAgaXNTYW1lVGFnID0gb2JqVGFnID09IG90aFRhZztcblxuICBpZiAoaXNTYW1lVGFnICYmICFvYmpJc09iaikge1xuICAgIHN0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjayk7XG4gICAgcmV0dXJuIChvYmpJc0FyciB8fCBpc1R5cGVkQXJyYXkob2JqZWN0KSlcbiAgICAgID8gZXF1YWxBcnJheXMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaylcbiAgICAgIDogZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCBvYmpUYWcsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xuICB9XG4gIGlmICghKGJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRykpIHtcbiAgICB2YXIgb2JqSXNXcmFwcGVkID0gb2JqSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsICdfX3dyYXBwZWRfXycpLFxuICAgICAgICBvdGhJc1dyYXBwZWQgPSBvdGhJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG90aGVyLCAnX193cmFwcGVkX18nKTtcblxuICAgIGlmIChvYmpJc1dyYXBwZWQgfHwgb3RoSXNXcmFwcGVkKSB7XG4gICAgICB2YXIgb2JqVW53cmFwcGVkID0gb2JqSXNXcmFwcGVkID8gb2JqZWN0LnZhbHVlKCkgOiBvYmplY3QsXG4gICAgICAgICAgb3RoVW53cmFwcGVkID0gb3RoSXNXcmFwcGVkID8gb3RoZXIudmFsdWUoKSA6IG90aGVyO1xuXG4gICAgICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2spO1xuICAgICAgcmV0dXJuIGVxdWFsRnVuYyhvYmpVbndyYXBwZWQsIG90aFVud3JhcHBlZCwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xuICAgIH1cbiAgfVxuICBpZiAoIWlzU2FtZVRhZykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2spO1xuICByZXR1cm4gZXF1YWxPYmplY3RzKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VJc0VxdWFsRGVlcDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUlzRXF1YWxEZWVwLmpzXG4gKiogbW9kdWxlIGlkID0gOThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBTdGFjayA9IHJlcXVpcmUoJy4vX1N0YWNrJyksXG4gICAgYmFzZUlzRXF1YWwgPSByZXF1aXJlKCcuL19iYXNlSXNFcXVhbCcpO1xuXG4vKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cbnZhciBVTk9SREVSRURfQ09NUEFSRV9GTEFHID0gMSxcbiAgICBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNNYXRjaGAgd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG4gKiBAcGFyYW0ge0FycmF5fSBtYXRjaERhdGEgVGhlIHByb3BlcnR5IG5hbWVzLCB2YWx1ZXMsIGFuZCBjb21wYXJlIGZsYWdzIHRvIG1hdGNoLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYG9iamVjdGAgaXMgYSBtYXRjaCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNNYXRjaChvYmplY3QsIHNvdXJjZSwgbWF0Y2hEYXRhLCBjdXN0b21pemVyKSB7XG4gIHZhciBpbmRleCA9IG1hdGNoRGF0YS5sZW5ndGgsXG4gICAgICBsZW5ndGggPSBpbmRleCxcbiAgICAgIG5vQ3VzdG9taXplciA9ICFjdXN0b21pemVyO1xuXG4gIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgIHJldHVybiAhbGVuZ3RoO1xuICB9XG4gIG9iamVjdCA9IE9iamVjdChvYmplY3QpO1xuICB3aGlsZSAoaW5kZXgtLSkge1xuICAgIHZhciBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTtcbiAgICBpZiAoKG5vQ3VzdG9taXplciAmJiBkYXRhWzJdKVxuICAgICAgICAgID8gZGF0YVsxXSAhPT0gb2JqZWN0W2RhdGFbMF1dXG4gICAgICAgICAgOiAhKGRhdGFbMF0gaW4gb2JqZWN0KVxuICAgICAgICApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTtcbiAgICB2YXIga2V5ID0gZGF0YVswXSxcbiAgICAgICAgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgc3JjVmFsdWUgPSBkYXRhWzFdO1xuXG4gICAgaWYgKG5vQ3VzdG9taXplciAmJiBkYXRhWzJdKSB7XG4gICAgICBpZiAob2JqVmFsdWUgPT09IHVuZGVmaW5lZCAmJiAhKGtleSBpbiBvYmplY3QpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHN0YWNrID0gbmV3IFN0YWNrO1xuICAgICAgaWYgKGN1c3RvbWl6ZXIpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGN1c3RvbWl6ZXIob2JqVmFsdWUsIHNyY1ZhbHVlLCBrZXksIG9iamVjdCwgc291cmNlLCBzdGFjayk7XG4gICAgICB9XG4gICAgICBpZiAoIShyZXN1bHQgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBiYXNlSXNFcXVhbChzcmNWYWx1ZSwgb2JqVmFsdWUsIGN1c3RvbWl6ZXIsIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgfCBQQVJUSUFMX0NPTVBBUkVfRkxBRywgc3RhY2spXG4gICAgICAgICAgICA6IHJlc3VsdFxuICAgICAgICAgICkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlSXNNYXRjaDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUlzTWF0Y2guanNcbiAqKiBtb2R1bGUgaWQgPSA5OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCcuL2lzRnVuY3Rpb24nKSxcbiAgICBpc0hvc3RPYmplY3QgPSByZXF1aXJlKCcuL19pc0hvc3RPYmplY3QnKSxcbiAgICBpc01hc2tlZCA9IHJlcXVpcmUoJy4vX2lzTWFza2VkJyksXG4gICAgaXNPYmplY3QgPSByZXF1aXJlKCcuL2lzT2JqZWN0JyksXG4gICAgdG9Tb3VyY2UgPSByZXF1aXJlKCcuL190b1NvdXJjZScpO1xuXG4vKipcbiAqIFVzZWQgdG8gbWF0Y2ggYFJlZ0V4cGBcbiAqIFtzeW50YXggY2hhcmFjdGVyc10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtcGF0dGVybnMpLlxuICovXG52YXIgcmVSZWdFeHBDaGFyID0gL1tcXFxcXiQuKis/KClbXFxde318XS9nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSkuICovXG52YXIgcmVJc0hvc3RDdG9yID0gL15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLztcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xudmFyIGZ1bmNUb1N0cmluZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGlmIGEgbWV0aG9kIGlzIG5hdGl2ZS4gKi9cbnZhciByZUlzTmF0aXZlID0gUmVnRXhwKCdeJyArXG4gIGZ1bmNUb1N0cmluZy5jYWxsKGhhc093blByb3BlcnR5KS5yZXBsYWNlKHJlUmVnRXhwQ2hhciwgJ1xcXFwkJicpXG4gIC5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcXFxcKCl8IGZvciAuKz8oPz1cXFxcXFxdKS9nLCAnJDEuKj8nKSArICckJ1xuKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc05hdGl2ZWAgd2l0aG91dCBiYWQgc2hpbSBjaGVja3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sXG4gKiAgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNOYXRpdmUodmFsdWUpIHtcbiAgaWYgKCFpc09iamVjdCh2YWx1ZSkgfHwgaXNNYXNrZWQodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBwYXR0ZXJuID0gKGlzRnVuY3Rpb24odmFsdWUpIHx8IGlzSG9zdE9iamVjdCh2YWx1ZSkpID8gcmVJc05hdGl2ZSA6IHJlSXNIb3N0Q3RvcjtcbiAgcmV0dXJuIHBhdHRlcm4udGVzdCh0b1NvdXJjZSh2YWx1ZSkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VJc05hdGl2ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUlzTmF0aXZlLmpzXG4gKiogbW9kdWxlIGlkID0gMTAwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZU1hdGNoZXMgPSByZXF1aXJlKCcuL19iYXNlTWF0Y2hlcycpLFxuICAgIGJhc2VNYXRjaGVzUHJvcGVydHkgPSByZXF1aXJlKCcuL19iYXNlTWF0Y2hlc1Byb3BlcnR5JyksXG4gICAgaWRlbnRpdHkgPSByZXF1aXJlKCcuL2lkZW50aXR5JyksXG4gICAgaXNBcnJheSA9IHJlcXVpcmUoJy4vaXNBcnJheScpLFxuICAgIHByb3BlcnR5ID0gcmVxdWlyZSgnLi9wcm9wZXJ0eScpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLml0ZXJhdGVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSBbdmFsdWU9Xy5pZGVudGl0eV0gVGhlIHZhbHVlIHRvIGNvbnZlcnQgdG8gYW4gaXRlcmF0ZWUuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGl0ZXJhdGVlLlxuICovXG5mdW5jdGlvbiBiYXNlSXRlcmF0ZWUodmFsdWUpIHtcbiAgLy8gRG9uJ3Qgc3RvcmUgdGhlIGB0eXBlb2ZgIHJlc3VsdCBpbiBhIHZhcmlhYmxlIHRvIGF2b2lkIGEgSklUIGJ1ZyBpbiBTYWZhcmkgOS5cbiAgLy8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNTYwMzQgZm9yIG1vcmUgZGV0YWlscy5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGlkZW50aXR5O1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gaXNBcnJheSh2YWx1ZSlcbiAgICAgID8gYmFzZU1hdGNoZXNQcm9wZXJ0eSh2YWx1ZVswXSwgdmFsdWVbMV0pXG4gICAgICA6IGJhc2VNYXRjaGVzKHZhbHVlKTtcbiAgfVxuICByZXR1cm4gcHJvcGVydHkodmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VJdGVyYXRlZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUl0ZXJhdGVlLmpzXG4gKiogbW9kdWxlIGlkID0gMTAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlS2V5cyA9IE9iamVjdC5rZXlzO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmtleXNgIHdoaWNoIGRvZXNuJ3Qgc2tpcCB0aGUgY29uc3RydWN0b3JcbiAqIHByb3BlcnR5IG9mIHByb3RvdHlwZXMgb3IgdHJlYXQgc3BhcnNlIGFycmF5cyBhcyBkZW5zZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqL1xuZnVuY3Rpb24gYmFzZUtleXMob2JqZWN0KSB7XG4gIHJldHVybiBuYXRpdmVLZXlzKE9iamVjdChvYmplY3QpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlS2V5cztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUtleXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlSXNNYXRjaCA9IHJlcXVpcmUoJy4vX2Jhc2VJc01hdGNoJyksXG4gICAgZ2V0TWF0Y2hEYXRhID0gcmVxdWlyZSgnLi9fZ2V0TWF0Y2hEYXRhJyksXG4gICAgbWF0Y2hlc1N0cmljdENvbXBhcmFibGUgPSByZXF1aXJlKCcuL19tYXRjaGVzU3RyaWN0Q29tcGFyYWJsZScpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1hdGNoZXNgIHdoaWNoIGRvZXNuJ3QgY2xvbmUgYHNvdXJjZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzcGVjIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlTWF0Y2hlcyhzb3VyY2UpIHtcbiAgdmFyIG1hdGNoRGF0YSA9IGdldE1hdGNoRGF0YShzb3VyY2UpO1xuICBpZiAobWF0Y2hEYXRhLmxlbmd0aCA9PSAxICYmIG1hdGNoRGF0YVswXVsyXSkge1xuICAgIHJldHVybiBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZShtYXRjaERhdGFbMF1bMF0sIG1hdGNoRGF0YVswXVsxXSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHJldHVybiBvYmplY3QgPT09IHNvdXJjZSB8fCBiYXNlSXNNYXRjaChvYmplY3QsIHNvdXJjZSwgbWF0Y2hEYXRhKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlTWF0Y2hlcztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZU1hdGNoZXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlSXNFcXVhbCA9IHJlcXVpcmUoJy4vX2Jhc2VJc0VxdWFsJyksXG4gICAgZ2V0ID0gcmVxdWlyZSgnLi9nZXQnKSxcbiAgICBoYXNJbiA9IHJlcXVpcmUoJy4vaGFzSW4nKSxcbiAgICBpc0tleSA9IHJlcXVpcmUoJy4vX2lzS2V5JyksXG4gICAgaXNTdHJpY3RDb21wYXJhYmxlID0gcmVxdWlyZSgnLi9faXNTdHJpY3RDb21wYXJhYmxlJyksXG4gICAgbWF0Y2hlc1N0cmljdENvbXBhcmFibGUgPSByZXF1aXJlKCcuL19tYXRjaGVzU3RyaWN0Q29tcGFyYWJsZScpLFxuICAgIHRvS2V5ID0gcmVxdWlyZSgnLi9fdG9LZXknKTtcblxuLyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG52YXIgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyA9IDEsXG4gICAgUEFSVElBTF9DT01QQVJFX0ZMQUcgPSAyO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1hdGNoZXNQcm9wZXJ0eWAgd2hpY2ggZG9lc24ndCBjbG9uZSBgc3JjVmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHBhcmFtIHsqfSBzcmNWYWx1ZSBUaGUgdmFsdWUgdG8gbWF0Y2guXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzcGVjIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlTWF0Y2hlc1Byb3BlcnR5KHBhdGgsIHNyY1ZhbHVlKSB7XG4gIGlmIChpc0tleShwYXRoKSAmJiBpc1N0cmljdENvbXBhcmFibGUoc3JjVmFsdWUpKSB7XG4gICAgcmV0dXJuIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlKHRvS2V5KHBhdGgpLCBzcmNWYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHZhciBvYmpWYWx1ZSA9IGdldChvYmplY3QsIHBhdGgpO1xuICAgIHJldHVybiAob2JqVmFsdWUgPT09IHVuZGVmaW5lZCAmJiBvYmpWYWx1ZSA9PT0gc3JjVmFsdWUpXG4gICAgICA/IGhhc0luKG9iamVjdCwgcGF0aClcbiAgICAgIDogYmFzZUlzRXF1YWwoc3JjVmFsdWUsIG9ialZhbHVlLCB1bmRlZmluZWQsIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgfCBQQVJUSUFMX0NPTVBBUkVfRkxBRyk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZU1hdGNoZXNQcm9wZXJ0eTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZU1hdGNoZXNQcm9wZXJ0eS5qc1xuICoqIG1vZHVsZSBpZCA9IDEwNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VHZXQgPSByZXF1aXJlKCcuL19iYXNlR2V0Jyk7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlUHJvcGVydHlgIHdoaWNoIHN1cHBvcnRzIGRlZXAgcGF0aHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhY2Nlc3NvciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZVByb3BlcnR5RGVlcChwYXRoKSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICByZXR1cm4gYmFzZUdldChvYmplY3QsIHBhdGgpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VQcm9wZXJ0eURlZXA7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VQcm9wZXJ0eURlZXAuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udGltZXNgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kc1xuICogb3IgbWF4IGFycmF5IGxlbmd0aCBjaGVja3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gaW52b2tlIGBpdGVyYXRlZWAuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiByZXN1bHRzLlxuICovXG5mdW5jdGlvbiBiYXNlVGltZXMobiwgaXRlcmF0ZWUpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSBBcnJheShuKTtcblxuICB3aGlsZSAoKytpbmRleCA8IG4pIHtcbiAgICByZXN1bHRbaW5kZXhdID0gaXRlcmF0ZWUoaW5kZXgpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZVRpbWVzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlVGltZXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBTeW1ib2wgPSByZXF1aXJlKCcuL19TeW1ib2wnKSxcbiAgICBpc1N5bWJvbCA9IHJlcXVpcmUoJy4vaXNTeW1ib2wnKTtcblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgSU5GSU5JVFkgPSAxIC8gMDtcblxuLyoqIFVzZWQgdG8gY29udmVydCBzeW1ib2xzIHRvIHByaW1pdGl2ZXMgYW5kIHN0cmluZ3MuICovXG52YXIgc3ltYm9sUHJvdG8gPSBTeW1ib2wgPyBTeW1ib2wucHJvdG90eXBlIDogdW5kZWZpbmVkLFxuICAgIHN5bWJvbFRvU3RyaW5nID0gc3ltYm9sUHJvdG8gPyBzeW1ib2xQcm90by50b1N0cmluZyA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50b1N0cmluZ2Agd2hpY2ggZG9lc24ndCBjb252ZXJ0IG51bGxpc2hcbiAqIHZhbHVlcyB0byBlbXB0eSBzdHJpbmdzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBiYXNlVG9TdHJpbmcodmFsdWUpIHtcbiAgLy8gRXhpdCBlYXJseSBmb3Igc3RyaW5ncyB0byBhdm9pZCBhIHBlcmZvcm1hbmNlIGhpdCBpbiBzb21lIGVudmlyb25tZW50cy5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIHN5bWJvbFRvU3RyaW5nID8gc3ltYm9sVG9TdHJpbmcuY2FsbCh2YWx1ZSkgOiAnJztcbiAgfVxuICB2YXIgcmVzdWx0ID0gKHZhbHVlICsgJycpO1xuICByZXR1cm4gKHJlc3VsdCA9PSAnMCcgJiYgKDEgLyB2YWx1ZSkgPT0gLUlORklOSVRZKSA/ICctMCcgOiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZVRvU3RyaW5nO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlVG9TdHJpbmcuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBnbG9iYWwgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtudWxsfE9iamVjdH0gUmV0dXJucyBgdmFsdWVgIGlmIGl0J3MgYSBnbG9iYWwgb2JqZWN0LCBlbHNlIGBudWxsYC5cbiAqL1xuZnVuY3Rpb24gY2hlY2tHbG9iYWwodmFsdWUpIHtcbiAgcmV0dXJuICh2YWx1ZSAmJiB2YWx1ZS5PYmplY3QgPT09IE9iamVjdCkgPyB2YWx1ZSA6IG51bGw7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY2hlY2tHbG9iYWw7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2NoZWNrR2xvYmFsLmpzXG4gKiogbW9kdWxlIGlkID0gMTA4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG92ZXJyZWFjaGluZyBjb3JlLWpzIHNoaW1zLiAqL1xudmFyIGNvcmVKc0RhdGEgPSByb290WydfX2NvcmUtanNfc2hhcmVkX18nXTtcblxubW9kdWxlLmV4cG9ydHMgPSBjb3JlSnNEYXRhO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19jb3JlSnNEYXRhLmpzXG4gKiogbW9kdWxlIGlkID0gMTA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgU3ltYm9sID0gcmVxdWlyZSgnLi9fU3ltYm9sJyksXG4gICAgVWludDhBcnJheSA9IHJlcXVpcmUoJy4vX1VpbnQ4QXJyYXknKSxcbiAgICBlcXVhbEFycmF5cyA9IHJlcXVpcmUoJy4vX2VxdWFsQXJyYXlzJyksXG4gICAgbWFwVG9BcnJheSA9IHJlcXVpcmUoJy4vX21hcFRvQXJyYXknKSxcbiAgICBzZXRUb0FycmF5ID0gcmVxdWlyZSgnLi9fc2V0VG9BcnJheScpO1xuXG4vKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cbnZhciBVTk9SREVSRURfQ09NUEFSRV9GTEFHID0gMSxcbiAgICBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBib29sVGFnID0gJ1tvYmplY3QgQm9vbGVhbl0nLFxuICAgIGRhdGVUYWcgPSAnW29iamVjdCBEYXRlXScsXG4gICAgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nLFxuICAgIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuICAgIG51bWJlclRhZyA9ICdbb2JqZWN0IE51bWJlcl0nLFxuICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuICAgIHNldFRhZyA9ICdbb2JqZWN0IFNldF0nLFxuICAgIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nLFxuICAgIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG52YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLFxuICAgIGRhdGFWaWV3VGFnID0gJ1tvYmplY3QgRGF0YVZpZXddJztcblxuLyoqIFVzZWQgdG8gY29udmVydCBzeW1ib2xzIHRvIHByaW1pdGl2ZXMgYW5kIHN0cmluZ3MuICovXG52YXIgc3ltYm9sUHJvdG8gPSBTeW1ib2wgPyBTeW1ib2wucHJvdG90eXBlIDogdW5kZWZpbmVkLFxuICAgIHN5bWJvbFZhbHVlT2YgPSBzeW1ib2xQcm90byA/IHN5bWJvbFByb3RvLnZhbHVlT2YgOiB1bmRlZmluZWQ7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBjb21wYXJpbmcgb2JqZWN0cyBvZlxuICogdGhlIHNhbWUgYHRvU3RyaW5nVGFnYC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBvbmx5IHN1cHBvcnRzIGNvbXBhcmluZyB2YWx1ZXMgd2l0aCB0YWdzIG9mXG4gKiBgQm9vbGVhbmAsIGBEYXRlYCwgYEVycm9yYCwgYE51bWJlcmAsIGBSZWdFeHBgLCBvciBgU3RyaW5nYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRhZyBUaGUgYHRvU3RyaW5nVGFnYCBvZiB0aGUgb2JqZWN0cyB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgb2YgY29tcGFyaXNvbiBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGBcbiAqICBmb3IgbW9yZSBkZXRhaWxzLlxuICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIHRhZywgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuICBzd2l0Y2ggKHRhZykge1xuICAgIGNhc2UgZGF0YVZpZXdUYWc6XG4gICAgICBpZiAoKG9iamVjdC5ieXRlTGVuZ3RoICE9IG90aGVyLmJ5dGVMZW5ndGgpIHx8XG4gICAgICAgICAgKG9iamVjdC5ieXRlT2Zmc2V0ICE9IG90aGVyLmJ5dGVPZmZzZXQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIG9iamVjdCA9IG9iamVjdC5idWZmZXI7XG4gICAgICBvdGhlciA9IG90aGVyLmJ1ZmZlcjtcblxuICAgIGNhc2UgYXJyYXlCdWZmZXJUYWc6XG4gICAgICBpZiAoKG9iamVjdC5ieXRlTGVuZ3RoICE9IG90aGVyLmJ5dGVMZW5ndGgpIHx8XG4gICAgICAgICAgIWVxdWFsRnVuYyhuZXcgVWludDhBcnJheShvYmplY3QpLCBuZXcgVWludDhBcnJheShvdGhlcikpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgY2FzZSBib29sVGFnOlxuICAgIGNhc2UgZGF0ZVRhZzpcbiAgICAgIC8vIENvZXJjZSBkYXRlcyBhbmQgYm9vbGVhbnMgdG8gbnVtYmVycywgZGF0ZXMgdG8gbWlsbGlzZWNvbmRzIGFuZFxuICAgICAgLy8gYm9vbGVhbnMgdG8gYDFgIG9yIGAwYCB0cmVhdGluZyBpbnZhbGlkIGRhdGVzIGNvZXJjZWQgdG8gYE5hTmAgYXNcbiAgICAgIC8vIG5vdCBlcXVhbC5cbiAgICAgIHJldHVybiArb2JqZWN0ID09ICtvdGhlcjtcblxuICAgIGNhc2UgZXJyb3JUYWc6XG4gICAgICByZXR1cm4gb2JqZWN0Lm5hbWUgPT0gb3RoZXIubmFtZSAmJiBvYmplY3QubWVzc2FnZSA9PSBvdGhlci5tZXNzYWdlO1xuXG4gICAgY2FzZSBudW1iZXJUYWc6XG4gICAgICAvLyBUcmVhdCBgTmFOYCB2cy4gYE5hTmAgYXMgZXF1YWwuXG4gICAgICByZXR1cm4gKG9iamVjdCAhPSArb2JqZWN0KSA/IG90aGVyICE9ICtvdGhlciA6IG9iamVjdCA9PSArb3RoZXI7XG5cbiAgICBjYXNlIHJlZ2V4cFRhZzpcbiAgICBjYXNlIHN0cmluZ1RhZzpcbiAgICAgIC8vIENvZXJjZSByZWdleGVzIHRvIHN0cmluZ3MgYW5kIHRyZWF0IHN0cmluZ3MsIHByaW1pdGl2ZXMgYW5kIG9iamVjdHMsXG4gICAgICAvLyBhcyBlcXVhbC4gU2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1yZWdleHAucHJvdG90eXBlLnRvc3RyaW5nXG4gICAgICAvLyBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAgcmV0dXJuIG9iamVjdCA9PSAob3RoZXIgKyAnJyk7XG5cbiAgICBjYXNlIG1hcFRhZzpcbiAgICAgIHZhciBjb252ZXJ0ID0gbWFwVG9BcnJheTtcblxuICAgIGNhc2Ugc2V0VGFnOlxuICAgICAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRztcbiAgICAgIGNvbnZlcnQgfHwgKGNvbnZlcnQgPSBzZXRUb0FycmF5KTtcblxuICAgICAgaWYgKG9iamVjdC5zaXplICE9IG90aGVyLnNpemUgJiYgIWlzUGFydGlhbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG4gICAgICB2YXIgc3RhY2tlZCA9IHN0YWNrLmdldChvYmplY3QpO1xuICAgICAgaWYgKHN0YWNrZWQpIHtcbiAgICAgICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG4gICAgICB9XG4gICAgICBiaXRtYXNrIHw9IFVOT1JERVJFRF9DT01QQVJFX0ZMQUc7XG4gICAgICBzdGFjay5zZXQob2JqZWN0LCBvdGhlcik7XG5cbiAgICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgICAgcmV0dXJuIGVxdWFsQXJyYXlzKGNvbnZlcnQob2JqZWN0KSwgY29udmVydChvdGhlciksIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xuXG4gICAgY2FzZSBzeW1ib2xUYWc6XG4gICAgICBpZiAoc3ltYm9sVmFsdWVPZikge1xuICAgICAgICByZXR1cm4gc3ltYm9sVmFsdWVPZi5jYWxsKG9iamVjdCkgPT0gc3ltYm9sVmFsdWVPZi5jYWxsKG90aGVyKTtcbiAgICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXF1YWxCeVRhZztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fZXF1YWxCeVRhZy5qc1xuICoqIG1vZHVsZSBpZCA9IDExMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VIYXMgPSByZXF1aXJlKCcuL19iYXNlSGFzJyksXG4gICAga2V5cyA9IHJlcXVpcmUoJy4va2V5cycpO1xuXG4vKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cbnZhciBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBvYmplY3RzIHdpdGggc3VwcG9ydCBmb3JcbiAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgb2YgY29tcGFyaXNvbiBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGBcbiAqICBmb3IgbW9yZSBkZXRhaWxzLlxuICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuICB2YXIgaXNQYXJ0aWFsID0gYml0bWFzayAmIFBBUlRJQUxfQ09NUEFSRV9GTEFHLFxuICAgICAgb2JqUHJvcHMgPSBrZXlzKG9iamVjdCksXG4gICAgICBvYmpMZW5ndGggPSBvYmpQcm9wcy5sZW5ndGgsXG4gICAgICBvdGhQcm9wcyA9IGtleXMob3RoZXIpLFxuICAgICAgb3RoTGVuZ3RoID0gb3RoUHJvcHMubGVuZ3RoO1xuXG4gIGlmIChvYmpMZW5ndGggIT0gb3RoTGVuZ3RoICYmICFpc1BhcnRpYWwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIGluZGV4ID0gb2JqTGVuZ3RoO1xuICB3aGlsZSAoaW5kZXgtLSkge1xuICAgIHZhciBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG4gICAgaWYgKCEoaXNQYXJ0aWFsID8ga2V5IGluIG90aGVyIDogYmFzZUhhcyhvdGhlciwga2V5KSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuICB2YXIgc3RhY2tlZCA9IHN0YWNrLmdldChvYmplY3QpO1xuICBpZiAoc3RhY2tlZCkge1xuICAgIHJldHVybiBzdGFja2VkID09IG90aGVyO1xuICB9XG4gIHZhciByZXN1bHQgPSB0cnVlO1xuICBzdGFjay5zZXQob2JqZWN0LCBvdGhlcik7XG5cbiAgdmFyIHNraXBDdG9yID0gaXNQYXJ0aWFsO1xuICB3aGlsZSAoKytpbmRleCA8IG9iakxlbmd0aCkge1xuICAgIGtleSA9IG9ialByb3BzW2luZGV4XTtcbiAgICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltrZXldO1xuXG4gICAgaWYgKGN1c3RvbWl6ZXIpIHtcbiAgICAgIHZhciBjb21wYXJlZCA9IGlzUGFydGlhbFxuICAgICAgICA/IGN1c3RvbWl6ZXIob3RoVmFsdWUsIG9ialZhbHVlLCBrZXksIG90aGVyLCBvYmplY3QsIHN0YWNrKVxuICAgICAgICA6IGN1c3RvbWl6ZXIob2JqVmFsdWUsIG90aFZhbHVlLCBrZXksIG9iamVjdCwgb3RoZXIsIHN0YWNrKTtcbiAgICB9XG4gICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgaWYgKCEoY29tcGFyZWQgPT09IHVuZGVmaW5lZFxuICAgICAgICAgID8gKG9ialZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMob2JqVmFsdWUsIG90aFZhbHVlLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykpXG4gICAgICAgICAgOiBjb21wYXJlZFxuICAgICAgICApKSB7XG4gICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBza2lwQ3RvciB8fCAoc2tpcEN0b3IgPSBrZXkgPT0gJ2NvbnN0cnVjdG9yJyk7XG4gIH1cbiAgaWYgKHJlc3VsdCAmJiAhc2tpcEN0b3IpIHtcbiAgICB2YXIgb2JqQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3RvcixcbiAgICAgICAgb3RoQ3RvciA9IG90aGVyLmNvbnN0cnVjdG9yO1xuXG4gICAgLy8gTm9uIGBPYmplY3RgIG9iamVjdCBpbnN0YW5jZXMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1YWwuXG4gICAgaWYgKG9iakN0b3IgIT0gb3RoQ3RvciAmJlxuICAgICAgICAoJ2NvbnN0cnVjdG9yJyBpbiBvYmplY3QgJiYgJ2NvbnN0cnVjdG9yJyBpbiBvdGhlcikgJiZcbiAgICAgICAgISh0eXBlb2Ygb2JqQ3RvciA9PSAnZnVuY3Rpb24nICYmIG9iakN0b3IgaW5zdGFuY2VvZiBvYmpDdG9yICYmXG4gICAgICAgICAgdHlwZW9mIG90aEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBvdGhDdG9yIGluc3RhbmNlb2Ygb3RoQ3RvcikpIHtcbiAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICBzdGFja1snZGVsZXRlJ10ob2JqZWN0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlcXVhbE9iamVjdHM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2VxdWFsT2JqZWN0cy5qc1xuICoqIG1vZHVsZSBpZCA9IDExMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vX2Jhc2VQcm9wZXJ0eScpO1xuXG4vKipcbiAqIEdldHMgdGhlIFwibGVuZ3RoXCIgcHJvcGVydHkgdmFsdWUgb2YgYG9iamVjdGAuXG4gKlxuICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBhdm9pZCBhXG4gKiBbSklUIGJ1Z10oaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE0Mjc5MikgdGhhdCBhZmZlY3RzXG4gKiBTYWZhcmkgb24gYXQgbGVhc3QgaU9TIDguMS04LjMgQVJNNjQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBcImxlbmd0aFwiIHZhbHVlLlxuICovXG52YXIgZ2V0TGVuZ3RoID0gYmFzZVByb3BlcnR5KCdsZW5ndGgnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBnZXRMZW5ndGg7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2dldExlbmd0aC5qc1xuICoqIG1vZHVsZSBpZCA9IDExMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzU3RyaWN0Q29tcGFyYWJsZSA9IHJlcXVpcmUoJy4vX2lzU3RyaWN0Q29tcGFyYWJsZScpLFxuICAgIGtleXMgPSByZXF1aXJlKCcuL2tleXMnKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBwcm9wZXJ0eSBuYW1lcywgdmFsdWVzLCBhbmQgY29tcGFyZSBmbGFncyBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBtYXRjaCBkYXRhIG9mIGBvYmplY3RgLlxuICovXG5mdW5jdGlvbiBnZXRNYXRjaERhdGEob2JqZWN0KSB7XG4gIHZhciByZXN1bHQgPSBrZXlzKG9iamVjdCksXG4gICAgICBsZW5ndGggPSByZXN1bHQubGVuZ3RoO1xuXG4gIHdoaWxlIChsZW5ndGgtLSkge1xuICAgIHZhciBrZXkgPSByZXN1bHRbbGVuZ3RoXSxcbiAgICAgICAgdmFsdWUgPSBvYmplY3Rba2V5XTtcblxuICAgIHJlc3VsdFtsZW5ndGhdID0gW2tleSwgdmFsdWUsIGlzU3RyaWN0Q29tcGFyYWJsZSh2YWx1ZSldO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0TWF0Y2hEYXRhO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19nZXRNYXRjaERhdGEuanNcbiAqKiBtb2R1bGUgaWQgPSAxMTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVHZXRQcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG5cbi8qKlxuICogR2V0cyB0aGUgYFtbUHJvdG90eXBlXV1gIG9mIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHJldHVybnMge251bGx8T2JqZWN0fSBSZXR1cm5zIHRoZSBgW1tQcm90b3R5cGVdXWAuXG4gKi9cbmZ1bmN0aW9uIGdldFByb3RvdHlwZSh2YWx1ZSkge1xuICByZXR1cm4gbmF0aXZlR2V0UHJvdG90eXBlKE9iamVjdCh2YWx1ZSkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFByb3RvdHlwZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fZ2V0UHJvdG90eXBlLmpzXG4gKiogbW9kdWxlIGlkID0gMTE0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgRGF0YVZpZXcgPSByZXF1aXJlKCcuL19EYXRhVmlldycpLFxuICAgIE1hcCA9IHJlcXVpcmUoJy4vX01hcCcpLFxuICAgIFByb21pc2UgPSByZXF1aXJlKCcuL19Qcm9taXNlJyksXG4gICAgU2V0ID0gcmVxdWlyZSgnLi9fU2V0JyksXG4gICAgV2Vha01hcCA9IHJlcXVpcmUoJy4vX1dlYWtNYXAnKSxcbiAgICB0b1NvdXJjZSA9IHJlcXVpcmUoJy4vX3RvU291cmNlJyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBtYXBUYWcgPSAnW29iamVjdCBNYXBdJyxcbiAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJyxcbiAgICBwcm9taXNlVGFnID0gJ1tvYmplY3QgUHJvbWlzZV0nLFxuICAgIHNldFRhZyA9ICdbb2JqZWN0IFNldF0nLFxuICAgIHdlYWtNYXBUYWcgPSAnW29iamVjdCBXZWFrTWFwXSc7XG5cbnZhciBkYXRhVmlld1RhZyA9ICdbb2JqZWN0IERhdGFWaWV3XSc7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgbWFwcywgc2V0cywgYW5kIHdlYWttYXBzLiAqL1xudmFyIGRhdGFWaWV3Q3RvclN0cmluZyA9IHRvU291cmNlKERhdGFWaWV3KSxcbiAgICBtYXBDdG9yU3RyaW5nID0gdG9Tb3VyY2UoTWFwKSxcbiAgICBwcm9taXNlQ3RvclN0cmluZyA9IHRvU291cmNlKFByb21pc2UpLFxuICAgIHNldEN0b3JTdHJpbmcgPSB0b1NvdXJjZShTZXQpLFxuICAgIHdlYWtNYXBDdG9yU3RyaW5nID0gdG9Tb3VyY2UoV2Vha01hcCk7XG5cbi8qKlxuICogR2V0cyB0aGUgYHRvU3RyaW5nVGFnYCBvZiBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGB0b1N0cmluZ1RhZ2AuXG4gKi9cbmZ1bmN0aW9uIGdldFRhZyh2YWx1ZSkge1xuICByZXR1cm4gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBkYXRhIHZpZXdzLCBtYXBzLCBzZXRzLCBhbmQgd2VhayBtYXBzIGluIElFIDExLFxuLy8gZm9yIGRhdGEgdmlld3MgaW4gRWRnZSwgYW5kIHByb21pc2VzIGluIE5vZGUuanMuXG5pZiAoKERhdGFWaWV3ICYmIGdldFRhZyhuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDEpKSkgIT0gZGF0YVZpZXdUYWcpIHx8XG4gICAgKE1hcCAmJiBnZXRUYWcobmV3IE1hcCkgIT0gbWFwVGFnKSB8fFxuICAgIChQcm9taXNlICYmIGdldFRhZyhQcm9taXNlLnJlc29sdmUoKSkgIT0gcHJvbWlzZVRhZykgfHxcbiAgICAoU2V0ICYmIGdldFRhZyhuZXcgU2V0KSAhPSBzZXRUYWcpIHx8XG4gICAgKFdlYWtNYXAgJiYgZ2V0VGFnKG5ldyBXZWFrTWFwKSAhPSB3ZWFrTWFwVGFnKSkge1xuICBnZXRUYWcgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciByZXN1bHQgPSBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSxcbiAgICAgICAgQ3RvciA9IHJlc3VsdCA9PSBvYmplY3RUYWcgPyB2YWx1ZS5jb25zdHJ1Y3RvciA6IHVuZGVmaW5lZCxcbiAgICAgICAgY3RvclN0cmluZyA9IEN0b3IgPyB0b1NvdXJjZShDdG9yKSA6IHVuZGVmaW5lZDtcblxuICAgIGlmIChjdG9yU3RyaW5nKSB7XG4gICAgICBzd2l0Y2ggKGN0b3JTdHJpbmcpIHtcbiAgICAgICAgY2FzZSBkYXRhVmlld0N0b3JTdHJpbmc6IHJldHVybiBkYXRhVmlld1RhZztcbiAgICAgICAgY2FzZSBtYXBDdG9yU3RyaW5nOiByZXR1cm4gbWFwVGFnO1xuICAgICAgICBjYXNlIHByb21pc2VDdG9yU3RyaW5nOiByZXR1cm4gcHJvbWlzZVRhZztcbiAgICAgICAgY2FzZSBzZXRDdG9yU3RyaW5nOiByZXR1cm4gc2V0VGFnO1xuICAgICAgICBjYXNlIHdlYWtNYXBDdG9yU3RyaW5nOiByZXR1cm4gd2Vha01hcFRhZztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRUYWc7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2dldFRhZy5qc1xuICoqIG1vZHVsZSBpZCA9IDExNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBHZXRzIHRoZSB2YWx1ZSBhdCBga2V5YCBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gZ2V0VmFsdWUob2JqZWN0LCBrZXkpIHtcbiAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0VmFsdWU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2dldFZhbHVlLmpzXG4gKiogbW9kdWxlIGlkID0gMTE2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgY2FzdFBhdGggPSByZXF1aXJlKCcuL19jYXN0UGF0aCcpLFxuICAgIGlzQXJndW1lbnRzID0gcmVxdWlyZSgnLi9pc0FyZ3VtZW50cycpLFxuICAgIGlzQXJyYXkgPSByZXF1aXJlKCcuL2lzQXJyYXknKSxcbiAgICBpc0luZGV4ID0gcmVxdWlyZSgnLi9faXNJbmRleCcpLFxuICAgIGlzS2V5ID0gcmVxdWlyZSgnLi9faXNLZXknKSxcbiAgICBpc0xlbmd0aCA9IHJlcXVpcmUoJy4vaXNMZW5ndGgnKSxcbiAgICBpc1N0cmluZyA9IHJlcXVpcmUoJy4vaXNTdHJpbmcnKSxcbiAgICB0b0tleSA9IHJlcXVpcmUoJy4vX3RvS2V5Jyk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGBwYXRoYCBleGlzdHMgb24gYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIHRvIGNoZWNrLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFzRnVuYyBUaGUgZnVuY3Rpb24gdG8gY2hlY2sgcHJvcGVydGllcy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgcGF0aGAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGhhc1BhdGgob2JqZWN0LCBwYXRoLCBoYXNGdW5jKSB7XG4gIHBhdGggPSBpc0tleShwYXRoLCBvYmplY3QpID8gW3BhdGhdIDogY2FzdFBhdGgocGF0aCk7XG5cbiAgdmFyIHJlc3VsdCxcbiAgICAgIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBwYXRoLmxlbmd0aDtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBrZXkgPSB0b0tleShwYXRoW2luZGV4XSk7XG4gICAgaWYgKCEocmVzdWx0ID0gb2JqZWN0ICE9IG51bGwgJiYgaGFzRnVuYyhvYmplY3QsIGtleSkpKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgb2JqZWN0ID0gb2JqZWN0W2tleV07XG4gIH1cbiAgaWYgKHJlc3VsdCkge1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgdmFyIGxlbmd0aCA9IG9iamVjdCA/IG9iamVjdC5sZW5ndGggOiAwO1xuICByZXR1cm4gISFsZW5ndGggJiYgaXNMZW5ndGgobGVuZ3RoKSAmJiBpc0luZGV4KGtleSwgbGVuZ3RoKSAmJlxuICAgIChpc0FycmF5KG9iamVjdCkgfHwgaXNTdHJpbmcob2JqZWN0KSB8fCBpc0FyZ3VtZW50cyhvYmplY3QpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBoYXNQYXRoO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19oYXNQYXRoLmpzXG4gKiogbW9kdWxlIGlkID0gMTE3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgbmF0aXZlQ3JlYXRlID0gcmVxdWlyZSgnLi9fbmF0aXZlQ3JlYXRlJyk7XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgaGFzaC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgY2xlYXJcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKi9cbmZ1bmN0aW9uIGhhc2hDbGVhcigpIHtcbiAgdGhpcy5fX2RhdGFfXyA9IG5hdGl2ZUNyZWF0ZSA/IG5hdGl2ZUNyZWF0ZShudWxsKSA6IHt9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGhhc2hDbGVhcjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faGFzaENsZWFyLmpzXG4gKiogbW9kdWxlIGlkID0gMTE4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBoYXNoLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKiBAcGFyYW0ge09iamVjdH0gaGFzaCBUaGUgaGFzaCB0byBtb2RpZnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaGFzaERlbGV0ZShrZXkpIHtcbiAgcmV0dXJuIHRoaXMuaGFzKGtleSkgJiYgZGVsZXRlIHRoaXMuX19kYXRhX19ba2V5XTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBoYXNoRGVsZXRlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19oYXNoRGVsZXRlLmpzXG4gKiogbW9kdWxlIGlkID0gMTE5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgbmF0aXZlQ3JlYXRlID0gcmVxdWlyZSgnLi9fbmF0aXZlQ3JlYXRlJyk7XG5cbi8qKiBVc2VkIHRvIHN0YW5kLWluIGZvciBgdW5kZWZpbmVkYCBoYXNoIHZhbHVlcy4gKi9cbnZhciBIQVNIX1VOREVGSU5FRCA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJztcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBHZXRzIHRoZSBoYXNoIHZhbHVlIGZvciBga2V5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZ2V0XG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGhhc2hHZXQoa2V5KSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcbiAgaWYgKG5hdGl2ZUNyZWF0ZSkge1xuICAgIHZhciByZXN1bHQgPSBkYXRhW2tleV07XG4gICAgcmV0dXJuIHJlc3VsdCA9PT0gSEFTSF9VTkRFRklORUQgPyB1bmRlZmluZWQgOiByZXN1bHQ7XG4gIH1cbiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwoZGF0YSwga2V5KSA/IGRhdGFba2V5XSA6IHVuZGVmaW5lZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBoYXNoR2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19oYXNoR2V0LmpzXG4gKiogbW9kdWxlIGlkID0gMTIwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgbmF0aXZlQ3JlYXRlID0gcmVxdWlyZSgnLi9fbmF0aXZlQ3JlYXRlJyk7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgaGFzaCB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaGFzaEhhcyhrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICByZXR1cm4gbmF0aXZlQ3JlYXRlID8gZGF0YVtrZXldICE9PSB1bmRlZmluZWQgOiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaGFzaEhhcztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faGFzaEhhcy5qc1xuICoqIG1vZHVsZSBpZCA9IDEyMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIG5hdGl2ZUNyZWF0ZSA9IHJlcXVpcmUoJy4vX25hdGl2ZUNyZWF0ZScpO1xuXG4vKiogVXNlZCB0byBzdGFuZC1pbiBmb3IgYHVuZGVmaW5lZGAgaGFzaCB2YWx1ZXMuICovXG52YXIgSEFTSF9VTkRFRklORUQgPSAnX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyc7XG5cbi8qKlxuICogU2V0cyB0aGUgaGFzaCBga2V5YCB0byBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBzZXRcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGhhc2ggaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIGhhc2hTZXQoa2V5LCB2YWx1ZSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG4gIGRhdGFba2V5XSA9IChuYXRpdmVDcmVhdGUgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkgPyBIQVNIX1VOREVGSU5FRCA6IHZhbHVlO1xuICByZXR1cm4gdGhpcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBoYXNoU2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19oYXNoU2V0LmpzXG4gKiogbW9kdWxlIGlkID0gMTIyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZVRpbWVzID0gcmVxdWlyZSgnLi9fYmFzZVRpbWVzJyksXG4gICAgaXNBcmd1bWVudHMgPSByZXF1aXJlKCcuL2lzQXJndW1lbnRzJyksXG4gICAgaXNBcnJheSA9IHJlcXVpcmUoJy4vaXNBcnJheScpLFxuICAgIGlzTGVuZ3RoID0gcmVxdWlyZSgnLi9pc0xlbmd0aCcpLFxuICAgIGlzU3RyaW5nID0gcmVxdWlyZSgnLi9pc1N0cmluZycpO1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgaW5kZXgga2V5cyBmb3IgYG9iamVjdGAgdmFsdWVzIG9mIGFycmF5cyxcbiAqIGBhcmd1bWVudHNgIG9iamVjdHMsIGFuZCBzdHJpbmdzLCBvdGhlcndpc2UgYG51bGxgIGlzIHJldHVybmVkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl8bnVsbH0gUmV0dXJucyBpbmRleCBrZXlzLCBlbHNlIGBudWxsYC5cbiAqL1xuZnVuY3Rpb24gaW5kZXhLZXlzKG9iamVjdCkge1xuICB2YXIgbGVuZ3RoID0gb2JqZWN0ID8gb2JqZWN0Lmxlbmd0aCA6IHVuZGVmaW5lZDtcbiAgaWYgKGlzTGVuZ3RoKGxlbmd0aCkgJiZcbiAgICAgIChpc0FycmF5KG9iamVjdCkgfHwgaXNTdHJpbmcob2JqZWN0KSB8fCBpc0FyZ3VtZW50cyhvYmplY3QpKSkge1xuICAgIHJldHVybiBiYXNlVGltZXMobGVuZ3RoLCBTdHJpbmcpO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGluZGV4S2V5cztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faW5kZXhLZXlzLmpzXG4gKiogbW9kdWxlIGlkID0gMTIzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciB1c2UgYXMgdW5pcXVlIG9iamVjdCBrZXkuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgc3VpdGFibGUsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNLZXlhYmxlKHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gKHR5cGUgPT0gJ3N0cmluZycgfHwgdHlwZSA9PSAnbnVtYmVyJyB8fCB0eXBlID09ICdzeW1ib2wnIHx8IHR5cGUgPT0gJ2Jvb2xlYW4nKVxuICAgID8gKHZhbHVlICE9PSAnX19wcm90b19fJylcbiAgICA6ICh2YWx1ZSA9PT0gbnVsbCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNLZXlhYmxlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19pc0tleWFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBjb3JlSnNEYXRhID0gcmVxdWlyZSgnLi9fY29yZUpzRGF0YScpO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgbWV0aG9kcyBtYXNxdWVyYWRpbmcgYXMgbmF0aXZlLiAqL1xudmFyIG1hc2tTcmNLZXkgPSAoZnVuY3Rpb24oKSB7XG4gIHZhciB1aWQgPSAvW14uXSskLy5leGVjKGNvcmVKc0RhdGEgJiYgY29yZUpzRGF0YS5rZXlzICYmIGNvcmVKc0RhdGEua2V5cy5JRV9QUk9UTyB8fCAnJyk7XG4gIHJldHVybiB1aWQgPyAoJ1N5bWJvbChzcmMpXzEuJyArIHVpZCkgOiAnJztcbn0oKSk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGBmdW5jYCBoYXMgaXRzIHNvdXJjZSBtYXNrZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBmdW5jYCBpcyBtYXNrZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNNYXNrZWQoZnVuYykge1xuICByZXR1cm4gISFtYXNrU3JjS2V5ICYmIChtYXNrU3JjS2V5IGluIGZ1bmMpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzTWFza2VkO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19pc01hc2tlZC5qc1xuICoqIG1vZHVsZSBpZCA9IDEyNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYSBwcm90b3R5cGUgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvdG90eXBlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzUHJvdG90eXBlKHZhbHVlKSB7XG4gIHZhciBDdG9yID0gdmFsdWUgJiYgdmFsdWUuY29uc3RydWN0b3IsXG4gICAgICBwcm90byA9ICh0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmIEN0b3IucHJvdG90eXBlKSB8fCBvYmplY3RQcm90bztcblxuICByZXR1cm4gdmFsdWUgPT09IHByb3RvO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzUHJvdG90eXBlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19pc1Byb3RvdHlwZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEyNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBsaXN0IGNhY2hlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBjbGVhclxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVDbGVhcigpIHtcbiAgdGhpcy5fX2RhdGFfXyA9IFtdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGxpc3RDYWNoZUNsZWFyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19saXN0Q2FjaGVDbGVhci5qc1xuICoqIG1vZHVsZSBpZCA9IDEyN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGFzc29jSW5kZXhPZiA9IHJlcXVpcmUoJy4vX2Fzc29jSW5kZXhPZicpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTtcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgc3BsaWNlID0gYXJyYXlQcm90by5zcGxpY2U7XG5cbi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGxpc3QgY2FjaGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGRlbGV0ZVxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZURlbGV0ZShrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblxuICBpZiAoaW5kZXggPCAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBsYXN0SW5kZXggPSBkYXRhLmxlbmd0aCAtIDE7XG4gIGlmIChpbmRleCA9PSBsYXN0SW5kZXgpIHtcbiAgICBkYXRhLnBvcCgpO1xuICB9IGVsc2Uge1xuICAgIHNwbGljZS5jYWxsKGRhdGEsIGluZGV4LCAxKTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBsaXN0Q2FjaGVEZWxldGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2xpc3RDYWNoZURlbGV0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEyOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGFzc29jSW5kZXhPZiA9IHJlcXVpcmUoJy4vX2Fzc29jSW5kZXhPZicpO1xuXG4vKipcbiAqIEdldHMgdGhlIGxpc3QgY2FjaGUgdmFsdWUgZm9yIGBrZXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBnZXRcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVHZXQoa2V5KSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcbiAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cbiAgcmV0dXJuIGluZGV4IDwgMCA/IHVuZGVmaW5lZCA6IGRhdGFbaW5kZXhdWzFdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGxpc3RDYWNoZUdldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbGlzdENhY2hlR2V0LmpzXG4gKiogbW9kdWxlIGlkID0gMTI5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYXNzb2NJbmRleE9mID0gcmVxdWlyZSgnLi9fYXNzb2NJbmRleE9mJyk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVIYXMoa2V5KSB7XG4gIHJldHVybiBhc3NvY0luZGV4T2YodGhpcy5fX2RhdGFfXywga2V5KSA+IC0xO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGxpc3RDYWNoZUhhcztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbGlzdENhY2hlSGFzLmpzXG4gKiogbW9kdWxlIGlkID0gMTMwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYXNzb2NJbmRleE9mID0gcmVxdWlyZSgnLi9fYXNzb2NJbmRleE9mJyk7XG5cbi8qKlxuICogU2V0cyB0aGUgbGlzdCBjYWNoZSBga2V5YCB0byBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBzZXRcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbGlzdCBjYWNoZSBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gbGlzdENhY2hlU2V0KGtleSwgdmFsdWUpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblxuICBpZiAoaW5kZXggPCAwKSB7XG4gICAgZGF0YS5wdXNoKFtrZXksIHZhbHVlXSk7XG4gIH0gZWxzZSB7XG4gICAgZGF0YVtpbmRleF1bMV0gPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBsaXN0Q2FjaGVTZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2xpc3RDYWNoZVNldC5qc1xuICoqIG1vZHVsZSBpZCA9IDEzMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIEhhc2ggPSByZXF1aXJlKCcuL19IYXNoJyksXG4gICAgTGlzdENhY2hlID0gcmVxdWlyZSgnLi9fTGlzdENhY2hlJyksXG4gICAgTWFwID0gcmVxdWlyZSgnLi9fTWFwJyk7XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgbWFwLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBjbGVhclxuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlQ2xlYXIoKSB7XG4gIHRoaXMuX19kYXRhX18gPSB7XG4gICAgJ2hhc2gnOiBuZXcgSGFzaCxcbiAgICAnbWFwJzogbmV3IChNYXAgfHwgTGlzdENhY2hlKSxcbiAgICAnc3RyaW5nJzogbmV3IEhhc2hcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZUNsZWFyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19tYXBDYWNoZUNsZWFyLmpzXG4gKiogbW9kdWxlIGlkID0gMTMyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0TWFwRGF0YSA9IHJlcXVpcmUoJy4vX2dldE1hcERhdGEnKTtcblxuLyoqXG4gKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgbWFwLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlRGVsZXRlKGtleSkge1xuICByZXR1cm4gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpWydkZWxldGUnXShrZXkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG1hcENhY2hlRGVsZXRlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19tYXBDYWNoZURlbGV0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEzM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdldE1hcERhdGEgPSByZXF1aXJlKCcuL19nZXRNYXBEYXRhJyk7XG5cbi8qKlxuICogR2V0cyB0aGUgbWFwIHZhbHVlIGZvciBga2V5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZ2V0XG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBtYXBDYWNoZUdldChrZXkpIHtcbiAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KS5nZXQoa2V5KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZUdldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbWFwQ2FjaGVHZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnZXRNYXBEYXRhID0gcmVxdWlyZSgnLi9fZ2V0TWFwRGF0YScpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBhIG1hcCB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlSGFzKGtleSkge1xuICByZXR1cm4gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLmhhcyhrZXkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG1hcENhY2hlSGFzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19tYXBDYWNoZUhhcy5qc1xuICoqIG1vZHVsZSBpZCA9IDEzNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdldE1hcERhdGEgPSByZXF1aXJlKCcuL19nZXRNYXBEYXRhJyk7XG5cbi8qKlxuICogU2V0cyB0aGUgbWFwIGBrZXlgIHRvIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIHNldFxuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG1hcCBjYWNoZSBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gbWFwQ2FjaGVTZXQoa2V5LCB2YWx1ZSkge1xuICBnZXRNYXBEYXRhKHRoaXMsIGtleSkuc2V0KGtleSwgdmFsdWUpO1xuICByZXR1cm4gdGhpcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZVNldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbWFwQ2FjaGVTZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ29udmVydHMgYG1hcGAgdG8gaXRzIGtleS12YWx1ZSBwYWlycy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG1hcCBUaGUgbWFwIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGtleS12YWx1ZSBwYWlycy5cbiAqL1xuZnVuY3Rpb24gbWFwVG9BcnJheShtYXApIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSBBcnJheShtYXAuc2l6ZSk7XG5cbiAgbWFwLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgIHJlc3VsdFsrK2luZGV4XSA9IFtrZXksIHZhbHVlXTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbWFwVG9BcnJheTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbWFwVG9BcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDEzN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqIFVzZWQgdG8gc3RhbmQtaW4gZm9yIGB1bmRlZmluZWRgIGhhc2ggdmFsdWVzLiAqL1xudmFyIEhBU0hfVU5ERUZJTkVEID0gJ19fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18nO1xuXG4vKipcbiAqIEFkZHMgYHZhbHVlYCB0byB0aGUgYXJyYXkgY2FjaGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGFkZFxuICogQG1lbWJlck9mIFNldENhY2hlXG4gKiBAYWxpYXMgcHVzaFxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2FjaGUuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjYWNoZSBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gc2V0Q2FjaGVBZGQodmFsdWUpIHtcbiAgdGhpcy5fX2RhdGFfXy5zZXQodmFsdWUsIEhBU0hfVU5ERUZJTkVEKTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0Q2FjaGVBZGQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3NldENhY2hlQWRkLmpzXG4gKiogbW9kdWxlIGlkID0gMTM4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGluIHRoZSBhcnJheSBjYWNoZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgU2V0Q2FjaGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGZvdW5kLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIHNldENhY2hlSGFzKHZhbHVlKSB7XG4gIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyh2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0Q2FjaGVIYXM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3NldENhY2hlSGFzLmpzXG4gKiogbW9kdWxlIGlkID0gMTM5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENvbnZlcnRzIGBzZXRgIHRvIGFuIGFycmF5IG9mIGl0cyB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBzZXQgVGhlIHNldCB0byBjb252ZXJ0LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSB2YWx1ZXMuXG4gKi9cbmZ1bmN0aW9uIHNldFRvQXJyYXkoc2V0KSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcmVzdWx0ID0gQXJyYXkoc2V0LnNpemUpO1xuXG4gIHNldC5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmVzdWx0WysraW5kZXhdID0gdmFsdWU7XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNldFRvQXJyYXk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3NldFRvQXJyYXkuanNcbiAqKiBtb2R1bGUgaWQgPSAxNDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBMaXN0Q2FjaGUgPSByZXF1aXJlKCcuL19MaXN0Q2FjaGUnKTtcblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBzdGFjay5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgY2xlYXJcbiAqIEBtZW1iZXJPZiBTdGFja1xuICovXG5mdW5jdGlvbiBzdGFja0NsZWFyKCkge1xuICB0aGlzLl9fZGF0YV9fID0gbmV3IExpc3RDYWNoZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzdGFja0NsZWFyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19zdGFja0NsZWFyLmpzXG4gKiogbW9kdWxlIGlkID0gMTQxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBzdGFjay5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZGVsZXRlXG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBzdGFja0RlbGV0ZShrZXkpIHtcbiAgcmV0dXJuIHRoaXMuX19kYXRhX19bJ2RlbGV0ZSddKGtleSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc3RhY2tEZWxldGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3N0YWNrRGVsZXRlLmpzXG4gKiogbW9kdWxlIGlkID0gMTQyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIEdldHMgdGhlIHN0YWNrIHZhbHVlIGZvciBga2V5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZ2V0XG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBzdGFja0dldChrZXkpIHtcbiAgcmV0dXJuIHRoaXMuX19kYXRhX18uZ2V0KGtleSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc3RhY2tHZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3N0YWNrR2V0LmpzXG4gKiogbW9kdWxlIGlkID0gMTQzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENoZWNrcyBpZiBhIHN0YWNrIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIFN0YWNrXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gc3RhY2tIYXMoa2V5KSB7XG4gIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyhrZXkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN0YWNrSGFzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19zdGFja0hhcy5qc1xuICoqIG1vZHVsZSBpZCA9IDE0NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIExpc3RDYWNoZSA9IHJlcXVpcmUoJy4vX0xpc3RDYWNoZScpLFxuICAgIE1hcENhY2hlID0gcmVxdWlyZSgnLi9fTWFwQ2FjaGUnKTtcblxuLyoqIFVzZWQgYXMgdGhlIHNpemUgdG8gZW5hYmxlIGxhcmdlIGFycmF5IG9wdGltaXphdGlvbnMuICovXG52YXIgTEFSR0VfQVJSQVlfU0laRSA9IDIwMDtcblxuLyoqXG4gKiBTZXRzIHRoZSBzdGFjayBga2V5YCB0byBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBzZXRcbiAqIEBtZW1iZXJPZiBTdGFja1xuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBzdGFjayBjYWNoZSBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gc3RhY2tTZXQoa2V5LCB2YWx1ZSkge1xuICB2YXIgY2FjaGUgPSB0aGlzLl9fZGF0YV9fO1xuICBpZiAoY2FjaGUgaW5zdGFuY2VvZiBMaXN0Q2FjaGUgJiYgY2FjaGUuX19kYXRhX18ubGVuZ3RoID09IExBUkdFX0FSUkFZX1NJWkUpIHtcbiAgICBjYWNoZSA9IHRoaXMuX19kYXRhX18gPSBuZXcgTWFwQ2FjaGUoY2FjaGUuX19kYXRhX18pO1xuICB9XG4gIGNhY2hlLnNldChrZXksIHZhbHVlKTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc3RhY2tTZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3N0YWNrU2V0LmpzXG4gKiogbW9kdWxlIGlkID0gMTQ1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgbWVtb2l6ZSA9IHJlcXVpcmUoJy4vbWVtb2l6ZScpLFxuICAgIHRvU3RyaW5nID0gcmVxdWlyZSgnLi90b1N0cmluZycpO1xuXG4vKiogVXNlZCB0byBtYXRjaCBwcm9wZXJ0eSBuYW1lcyB3aXRoaW4gcHJvcGVydHkgcGF0aHMuICovXG52YXIgcmVQcm9wTmFtZSA9IC9bXi5bXFxdXSt8XFxbKD86KC0/XFxkKyg/OlxcLlxcZCspPyl8KFtcIiddKSgoPzooPyFcXDIpW15cXFxcXXxcXFxcLikqPylcXDIpXFxdfCg/PShcXC58XFxbXFxdKSg/OlxcNHwkKSkvZztcblxuLyoqIFVzZWQgdG8gbWF0Y2ggYmFja3NsYXNoZXMgaW4gcHJvcGVydHkgcGF0aHMuICovXG52YXIgcmVFc2NhcGVDaGFyID0gL1xcXFwoXFxcXCk/L2c7XG5cbi8qKlxuICogQ29udmVydHMgYHN0cmluZ2AgdG8gYSBwcm9wZXJ0eSBwYXRoIGFycmF5LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcHJvcGVydHkgcGF0aCBhcnJheS5cbiAqL1xudmFyIHN0cmluZ1RvUGF0aCA9IG1lbW9pemUoZnVuY3Rpb24oc3RyaW5nKSB7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgdG9TdHJpbmcoc3RyaW5nKS5yZXBsYWNlKHJlUHJvcE5hbWUsIGZ1bmN0aW9uKG1hdGNoLCBudW1iZXIsIHF1b3RlLCBzdHJpbmcpIHtcbiAgICByZXN1bHQucHVzaChxdW90ZSA/IHN0cmluZy5yZXBsYWNlKHJlRXNjYXBlQ2hhciwgJyQxJykgOiAobnVtYmVyIHx8IG1hdGNoKSk7XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gc3RyaW5nVG9QYXRoO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19zdHJpbmdUb1BhdGguanNcbiAqKiBtb2R1bGUgaWQgPSAxNDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vaXNPYmplY3QnKSxcbiAgICBub3cgPSByZXF1aXJlKCcuL25vdycpLFxuICAgIHRvTnVtYmVyID0gcmVxdWlyZSgnLi90b051bWJlcicpO1xuXG4vKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG4gKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG4gKiBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0byBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS5cbiAqIFByb3ZpZGUgYW4gb3B0aW9ucyBvYmplY3QgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb25cbiAqIHRoZSBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGAgdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkXG4gKiB3aXRoIHRoZSBsYXN0IGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uLiBTdWJzZXF1ZW50IGNhbGxzXG4gKiB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYCBpbnZvY2F0aW9uLlxuICpcbiAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXMgaW52b2tlZFxuICogb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIGlzXG4gKiBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKlxuICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG4gKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cbiAqICBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgaW52b2tlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBBdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4LlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApKTtcbiAqXG4gKiAvLyBJbnZva2UgYHNlbmRNYWlsYCB3aGVuIGNsaWNrZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxscy5cbiAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCBfLmRlYm91bmNlKHNlbmRNYWlsLCAzMDAsIHtcbiAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuICogICAndHJhaWxpbmcnOiBmYWxzZVxuICogfSkpO1xuICpcbiAqIC8vIEVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHMuXG4gKiB2YXIgZGVib3VuY2VkID0gXy5kZWJvdW5jZShiYXRjaExvZywgMjUwLCB7ICdtYXhXYWl0JzogMTAwMCB9KTtcbiAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcbiAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgZGVib3VuY2VkKTtcbiAqXG4gKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgZGVib3VuY2VkLmNhbmNlbCk7XG4gKi9cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgdmFyIGxhc3RBcmdzLFxuICAgICAgbGFzdFRoaXMsXG4gICAgICBtYXhXYWl0LFxuICAgICAgcmVzdWx0LFxuICAgICAgdGltZXJJZCxcbiAgICAgIGxhc3RDYWxsVGltZSxcbiAgICAgIGxhc3RJbnZva2VUaW1lID0gMCxcbiAgICAgIGxlYWRpbmcgPSBmYWxzZSxcbiAgICAgIG1heGluZyA9IGZhbHNlLFxuICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG4gICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG4gICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDtcbiAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52b2tlRnVuYyh0aW1lKSB7XG4gICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcbiAgICAgICAgdGhpc0FyZyA9IGxhc3RUaGlzO1xuXG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuXG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAvLyBJbnZva2UgdGhlIGxlYWRpbmcgZWRnZS5cbiAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lLFxuICAgICAgICByZXN1bHQgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cbiAgICByZXR1cm4gbWF4aW5nID8gbmF0aXZlTWluKHJlc3VsdCwgbWF4V2FpdCAtIHRpbWVTaW5jZUxhc3RJbnZva2UpIDogcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvdWxkSW52b2tlKHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lO1xuXG4gICAgLy8gRWl0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIGFjdGl2aXR5IGhhcyBzdG9wcGVkIGFuZCB3ZSdyZSBhdCB0aGVcbiAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZ1xuICAgIC8vIGl0IGFzIHRoZSB0cmFpbGluZyBlZGdlLCBvciB3ZSd2ZSBoaXQgdGhlIGBtYXhXYWl0YCBsaW1pdC5cbiAgICByZXR1cm4gKGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8ICh0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0KSB8fFxuICAgICAgKHRpbWVTaW5jZUxhc3RDYWxsIDwgMCkgfHwgKG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRpbWVyRXhwaXJlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpO1xuICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcbiAgICAgIHJldHVybiB0cmFpbGluZ0VkZ2UodGltZSk7XG4gICAgfVxuICAgIC8vIFJlc3RhcnQgdGhlIHRpbWVyLlxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkge1xuICAgIHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuXG4gICAgLy8gZGVib3VuY2VkIGF0IGxlYXN0IG9uY2UuXG4gICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG4gICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcbiAgICB9XG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgIGxhc3RJbnZva2VUaW1lID0gMDtcbiAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIHJldHVybiB0aW1lcklkID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiB0cmFpbGluZ0VkZ2Uobm93KCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCksXG4gICAgICAgIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7XG5cbiAgICBsYXN0QXJncyA9IGFyZ3VtZW50cztcbiAgICBsYXN0VGhpcyA9IHRoaXM7XG4gICAgbGFzdENhbGxUaW1lID0gdGltZTtcblxuICAgIGlmIChpc0ludm9raW5nKSB7XG4gICAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBsZWFkaW5nRWRnZShsYXN0Q2FsbFRpbWUpO1xuICAgICAgfVxuICAgICAgaWYgKG1heGluZykge1xuICAgICAgICAvLyBIYW5kbGUgaW52b2NhdGlvbnMgaW4gYSB0aWdodCBsb29wLlxuICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgICAgICByZXR1cm4gaW52b2tlRnVuYyhsYXN0Q2FsbFRpbWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG4gIGRlYm91bmNlZC5mbHVzaCA9IGZsdXNoO1xuICByZXR1cm4gZGVib3VuY2VkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRlYm91bmNlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2RlYm91bmNlLmpzXG4gKiogbW9kdWxlIGlkID0gMTQ3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIFBlcmZvcm1zIGFcbiAqIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gKiBjb21wYXJpc29uIGJldHdlZW4gdHdvIHZhbHVlcyB0byBkZXRlcm1pbmUgaWYgdGhleSBhcmUgZXF1aXZhbGVudC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJyB9O1xuICogdmFyIG90aGVyID0geyAndXNlcic6ICdmcmVkJyB9O1xuICpcbiAqIF8uZXEob2JqZWN0LCBvYmplY3QpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uZXEob2JqZWN0LCBvdGhlcik7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uZXEoJ2EnLCAnYScpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uZXEoJ2EnLCBPYmplY3QoJ2EnKSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uZXEoTmFOLCBOYU4pO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBlcSh2YWx1ZSwgb3RoZXIpIHtcbiAgcmV0dXJuIHZhbHVlID09PSBvdGhlciB8fCAodmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXE7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvZXEuanNcbiAqKiBtb2R1bGUgaWQgPSAxNDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlRmluZEluZGV4ID0gcmVxdWlyZSgnLi9fYmFzZUZpbmRJbmRleCcpLFxuICAgIGJhc2VJdGVyYXRlZSA9IHJlcXVpcmUoJy4vX2Jhc2VJdGVyYXRlZScpLFxuICAgIHRvSW50ZWdlciA9IHJlcXVpcmUoJy4vdG9JbnRlZ2VyJyk7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVNYXggPSBNYXRoLm1heDtcblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZpbmRgIGV4Y2VwdCB0aGF0IGl0IHJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdFxuICogZWxlbWVudCBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3IgaW5zdGVhZCBvZiB0aGUgZWxlbWVudCBpdHNlbGYuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAxLjEuMFxuICogQGNhdGVnb3J5IEFycmF5XG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbcHJlZGljYXRlPV8uaWRlbnRpdHldXG4gKiAgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PTBdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmb3VuZCBlbGVtZW50LCBlbHNlIGAtMWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciB1c2VycyA9IFtcbiAqICAgeyAndXNlcic6ICdiYXJuZXknLCAgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgICdhY3RpdmUnOiBmYWxzZSB9LFxuICogICB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWN0aXZlJzogdHJ1ZSB9XG4gKiBdO1xuICpcbiAqIF8uZmluZEluZGV4KHVzZXJzLCBmdW5jdGlvbihvKSB7IHJldHVybiBvLnVzZXIgPT0gJ2Jhcm5leSc7IH0pO1xuICogLy8gPT4gMFxuICpcbiAqIC8vIFRoZSBgXy5tYXRjaGVzYCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gKiBfLmZpbmRJbmRleCh1c2VycywgeyAndXNlcic6ICdmcmVkJywgJ2FjdGl2ZSc6IGZhbHNlIH0pO1xuICogLy8gPT4gMVxuICpcbiAqIC8vIFRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAqIF8uZmluZEluZGV4KHVzZXJzLCBbJ2FjdGl2ZScsIGZhbHNlXSk7XG4gKiAvLyA9PiAwXG4gKlxuICogLy8gVGhlIGBfLnByb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gKiBfLmZpbmRJbmRleCh1c2VycywgJ2FjdGl2ZScpO1xuICogLy8gPT4gMlxuICovXG5mdW5jdGlvbiBmaW5kSW5kZXgoYXJyYXksIHByZWRpY2F0ZSwgZnJvbUluZGV4KSB7XG4gIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gIGlmICghbGVuZ3RoKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG4gIHZhciBpbmRleCA9IGZyb21JbmRleCA9PSBudWxsID8gMCA6IHRvSW50ZWdlcihmcm9tSW5kZXgpO1xuICBpZiAoaW5kZXggPCAwKSB7XG4gICAgaW5kZXggPSBuYXRpdmVNYXgobGVuZ3RoICsgaW5kZXgsIDApO1xuICB9XG4gIHJldHVybiBiYXNlRmluZEluZGV4KGFycmF5LCBiYXNlSXRlcmF0ZWUocHJlZGljYXRlLCAzKSwgaW5kZXgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZpbmRJbmRleDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9maW5kSW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAxNDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlR2V0ID0gcmVxdWlyZSgnLi9fYmFzZUdldCcpO1xuXG4vKipcbiAqIEdldHMgdGhlIHZhbHVlIGF0IGBwYXRoYCBvZiBgb2JqZWN0YC4gSWYgdGhlIHJlc29sdmVkIHZhbHVlIGlzXG4gKiBgdW5kZWZpbmVkYCwgdGhlIGBkZWZhdWx0VmFsdWVgIGlzIHVzZWQgaW4gaXRzIHBsYWNlLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMy43LjBcbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcGFyYW0geyp9IFtkZWZhdWx0VmFsdWVdIFRoZSB2YWx1ZSByZXR1cm5lZCBmb3IgYHVuZGVmaW5lZGAgcmVzb2x2ZWQgdmFsdWVzLlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAnYSc6IFt7ICdiJzogeyAnYyc6IDMgfSB9XSB9O1xuICpcbiAqIF8uZ2V0KG9iamVjdCwgJ2FbMF0uYi5jJyk7XG4gKiAvLyA9PiAzXG4gKlxuICogXy5nZXQob2JqZWN0LCBbJ2EnLCAnMCcsICdiJywgJ2MnXSk7XG4gKiAvLyA9PiAzXG4gKlxuICogXy5nZXQob2JqZWN0LCAnYS5iLmMnLCAnZGVmYXVsdCcpO1xuICogLy8gPT4gJ2RlZmF1bHQnXG4gKi9cbmZ1bmN0aW9uIGdldChvYmplY3QsIHBhdGgsIGRlZmF1bHRWYWx1ZSkge1xuICB2YXIgcmVzdWx0ID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBiYXNlR2V0KG9iamVjdCwgcGF0aCk7XG4gIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRWYWx1ZSA6IHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvZ2V0LmpzXG4gKiogbW9kdWxlIGlkID0gMTUwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZUhhc0luID0gcmVxdWlyZSgnLi9fYmFzZUhhc0luJyksXG4gICAgaGFzUGF0aCA9IHJlcXVpcmUoJy4vX2hhc1BhdGgnKTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHBhdGhgIGlzIGEgZGlyZWN0IG9yIGluaGVyaXRlZCBwcm9wZXJ0eSBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgcGF0aGAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSBfLmNyZWF0ZSh7ICdhJzogXy5jcmVhdGUoeyAnYic6IDIgfSkgfSk7XG4gKlxuICogXy5oYXNJbihvYmplY3QsICdhJyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5oYXNJbihvYmplY3QsICdhLmInKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmhhc0luKG9iamVjdCwgWydhJywgJ2InXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5oYXNJbihvYmplY3QsICdiJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBoYXNJbihvYmplY3QsIHBhdGgpIHtcbiAgcmV0dXJuIG9iamVjdCAhPSBudWxsICYmIGhhc1BhdGgob2JqZWN0LCBwYXRoLCBiYXNlSGFzSW4pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGhhc0luO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2hhc0luLmpzXG4gKiogbW9kdWxlIGlkID0gMTUxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGZpcnN0IGFyZ3VtZW50IGdpdmVuIHRvIGl0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBzaW5jZSAwLjEuMFxuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBVdGlsXG4gKiBAcGFyYW0geyp9IHZhbHVlIEFueSB2YWx1ZS5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIGB2YWx1ZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG4gKlxuICogY29uc29sZS5sb2coXy5pZGVudGl0eShvYmplY3QpID09PSBvYmplY3QpO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBpZGVudGl0eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaWRlbnRpdHk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaWRlbnRpdHkuanNcbiAqKiBtb2R1bGUgaWQgPSAxNTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc0FycmF5TGlrZSA9IHJlcXVpcmUoJy4vaXNBcnJheUxpa2UnKSxcbiAgICBpc09iamVjdExpa2UgPSByZXF1aXJlKCcuL2lzT2JqZWN0TGlrZScpO1xuXG4vKipcbiAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uaXNBcnJheUxpa2VgIGV4Y2VwdCB0aGF0IGl0IGFsc28gY2hlY2tzIGlmIGB2YWx1ZWBcbiAqIGlzIGFuIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBhcnJheS1saWtlIG9iamVjdCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0FycmF5TGlrZSh2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNBcnJheUxpa2VPYmplY3Q7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaXNBcnJheUxpa2VPYmplY3QuanNcbiAqKiBtb2R1bGUgaWQgPSAxNTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc0xlbmd0aCA9IHJlcXVpcmUoJy4vaXNMZW5ndGgnKSxcbiAgICBpc09iamVjdExpa2UgPSByZXF1aXJlKCcuL2lzT2JqZWN0TGlrZScpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuICAgIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcbiAgICBib29sVGFnID0gJ1tvYmplY3QgQm9vbGVhbl0nLFxuICAgIGRhdGVUYWcgPSAnW29iamVjdCBEYXRlXScsXG4gICAgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nLFxuICAgIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuICAgIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuICAgIG51bWJlclRhZyA9ICdbb2JqZWN0IE51bWJlcl0nLFxuICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nLFxuICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuICAgIHNldFRhZyA9ICdbb2JqZWN0IFNldF0nLFxuICAgIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nLFxuICAgIHdlYWtNYXBUYWcgPSAnW29iamVjdCBXZWFrTWFwXSc7XG5cbnZhciBhcnJheUJ1ZmZlclRhZyA9ICdbb2JqZWN0IEFycmF5QnVmZmVyXScsXG4gICAgZGF0YVZpZXdUYWcgPSAnW29iamVjdCBEYXRhVmlld10nLFxuICAgIGZsb2F0MzJUYWcgPSAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcbiAgICBmbG9hdDY0VGFnID0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScsXG4gICAgaW50OFRhZyA9ICdbb2JqZWN0IEludDhBcnJheV0nLFxuICAgIGludDE2VGFnID0gJ1tvYmplY3QgSW50MTZBcnJheV0nLFxuICAgIGludDMyVGFnID0gJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuICAgIHVpbnQ4VGFnID0gJ1tvYmplY3QgVWludDhBcnJheV0nLFxuICAgIHVpbnQ4Q2xhbXBlZFRhZyA9ICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG4gICAgdWludDE2VGFnID0gJ1tvYmplY3QgVWludDE2QXJyYXldJyxcbiAgICB1aW50MzJUYWcgPSAnW29iamVjdCBVaW50MzJBcnJheV0nO1xuXG4vKiogVXNlZCB0byBpZGVudGlmeSBgdG9TdHJpbmdUYWdgIHZhbHVlcyBvZiB0eXBlZCBhcnJheXMuICovXG52YXIgdHlwZWRBcnJheVRhZ3MgPSB7fTtcbnR5cGVkQXJyYXlUYWdzW2Zsb2F0MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbZmxvYXQ2NFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbaW50OFRhZ10gPSB0eXBlZEFycmF5VGFnc1tpbnQxNlRhZ10gPVxudHlwZWRBcnJheVRhZ3NbaW50MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDhUYWddID1cbnR5cGVkQXJyYXlUYWdzW3VpbnQ4Q2xhbXBlZFRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50MTZUYWddID1cbnR5cGVkQXJyYXlUYWdzW3VpbnQzMlRhZ10gPSB0cnVlO1xudHlwZWRBcnJheVRhZ3NbYXJnc1RhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheVRhZ10gPVxudHlwZWRBcnJheVRhZ3NbYXJyYXlCdWZmZXJUYWddID0gdHlwZWRBcnJheVRhZ3NbYm9vbFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbZGF0YVZpZXdUYWddID0gdHlwZWRBcnJheVRhZ3NbZGF0ZVRhZ10gPVxudHlwZWRBcnJheVRhZ3NbZXJyb3JUYWddID0gdHlwZWRBcnJheVRhZ3NbZnVuY1RhZ10gPVxudHlwZWRBcnJheVRhZ3NbbWFwVGFnXSA9IHR5cGVkQXJyYXlUYWdzW251bWJlclRhZ10gPVxudHlwZWRBcnJheVRhZ3Nbb2JqZWN0VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3JlZ2V4cFRhZ10gPVxudHlwZWRBcnJheVRhZ3Nbc2V0VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZ10gPVxudHlwZWRBcnJheVRhZ3Nbd2Vha01hcFRhZ10gPSBmYWxzZTtcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIHR5cGVkIGFycmF5LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMy4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1R5cGVkQXJyYXkobmV3IFVpbnQ4QXJyYXkpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNUeXBlZEFycmF5KFtdKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzVHlwZWRBcnJheSh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJlxuICAgIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgISF0eXBlZEFycmF5VGFnc1tvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKV07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNUeXBlZEFycmF5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzVHlwZWRBcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDE1NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIE1hcENhY2hlID0gcmVxdWlyZSgnLi9fTWFwQ2FjaGUnKTtcblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgbWVtb2l6ZXMgdGhlIHJlc3VsdCBvZiBgZnVuY2AuIElmIGByZXNvbHZlcmAgaXNcbiAqIHByb3ZpZGVkLCBpdCBkZXRlcm1pbmVzIHRoZSBjYWNoZSBrZXkgZm9yIHN0b3JpbmcgdGhlIHJlc3VsdCBiYXNlZCBvbiB0aGVcbiAqIGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24uIEJ5IGRlZmF1bHQsIHRoZSBmaXJzdCBhcmd1bWVudFxuICogcHJvdmlkZWQgdG8gdGhlIG1lbW9pemVkIGZ1bmN0aW9uIGlzIHVzZWQgYXMgdGhlIG1hcCBjYWNoZSBrZXkuIFRoZSBgZnVuY2BcbiAqIGlzIGludm9rZWQgd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlIG1lbW9pemVkIGZ1bmN0aW9uLlxuICpcbiAqICoqTm90ZToqKiBUaGUgY2FjaGUgaXMgZXhwb3NlZCBhcyB0aGUgYGNhY2hlYCBwcm9wZXJ0eSBvbiB0aGUgbWVtb2l6ZWRcbiAqIGZ1bmN0aW9uLiBJdHMgY3JlYXRpb24gbWF5IGJlIGN1c3RvbWl6ZWQgYnkgcmVwbGFjaW5nIHRoZSBgXy5tZW1vaXplLkNhY2hlYFxuICogY29uc3RydWN0b3Igd2l0aCBvbmUgd2hvc2UgaW5zdGFuY2VzIGltcGxlbWVudCB0aGVcbiAqIFtgTWFwYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtcHJvcGVydGllcy1vZi10aGUtbWFwLXByb3RvdHlwZS1vYmplY3QpXG4gKiBtZXRob2QgaW50ZXJmYWNlIG9mIGBkZWxldGVgLCBgZ2V0YCwgYGhhc2AsIGFuZCBgc2V0YC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGhhdmUgaXRzIG91dHB1dCBtZW1vaXplZC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtyZXNvbHZlcl0gVGhlIGZ1bmN0aW9uIHRvIHJlc29sdmUgdGhlIGNhY2hlIGtleS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IG1lbW9pemVkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEsICdiJzogMiB9O1xuICogdmFyIG90aGVyID0geyAnYyc6IDMsICdkJzogNCB9O1xuICpcbiAqIHZhciB2YWx1ZXMgPSBfLm1lbW9pemUoXy52YWx1ZXMpO1xuICogdmFsdWVzKG9iamVjdCk7XG4gKiAvLyA9PiBbMSwgMl1cbiAqXG4gKiB2YWx1ZXMob3RoZXIpO1xuICogLy8gPT4gWzMsIDRdXG4gKlxuICogb2JqZWN0LmEgPSAyO1xuICogdmFsdWVzKG9iamVjdCk7XG4gKiAvLyA9PiBbMSwgMl1cbiAqXG4gKiAvLyBNb2RpZnkgdGhlIHJlc3VsdCBjYWNoZS5cbiAqIHZhbHVlcy5jYWNoZS5zZXQob2JqZWN0LCBbJ2EnLCAnYiddKTtcbiAqIHZhbHVlcyhvYmplY3QpO1xuICogLy8gPT4gWydhJywgJ2InXVxuICpcbiAqIC8vIFJlcGxhY2UgYF8ubWVtb2l6ZS5DYWNoZWAuXG4gKiBfLm1lbW9pemUuQ2FjaGUgPSBXZWFrTWFwO1xuICovXG5mdW5jdGlvbiBtZW1vaXplKGZ1bmMsIHJlc29sdmVyKSB7XG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nIHx8IChyZXNvbHZlciAmJiB0eXBlb2YgcmVzb2x2ZXIgIT0gJ2Z1bmN0aW9uJykpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgdmFyIG1lbW9pemVkID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgIGtleSA9IHJlc29sdmVyID8gcmVzb2x2ZXIuYXBwbHkodGhpcywgYXJncykgOiBhcmdzWzBdLFxuICAgICAgICBjYWNoZSA9IG1lbW9pemVkLmNhY2hlO1xuXG4gICAgaWYgKGNhY2hlLmhhcyhrZXkpKSB7XG4gICAgICByZXR1cm4gY2FjaGUuZ2V0KGtleSk7XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIG1lbW9pemVkLmNhY2hlID0gY2FjaGUuc2V0KGtleSwgcmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBtZW1vaXplZC5jYWNoZSA9IG5ldyAobWVtb2l6ZS5DYWNoZSB8fCBNYXBDYWNoZSk7XG4gIHJldHVybiBtZW1vaXplZDtcbn1cblxuLy8gQXNzaWduIGNhY2hlIHRvIGBfLm1lbW9pemVgLlxubWVtb2l6ZS5DYWNoZSA9IE1hcENhY2hlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG1lbW9pemU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvbWVtb2l6ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE1NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBHZXRzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2VcbiAqIHRoZSBVbml4IGVwb2NoICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMi40LjBcbiAqIEBjYXRlZ29yeSBEYXRlXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lc3RhbXAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uZGVmZXIoZnVuY3Rpb24oc3RhbXApIHtcbiAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTtcbiAqIH0sIF8ubm93KCkpO1xuICogLy8gPT4gTG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgaW52b2NhdGlvbi5cbiAqL1xuZnVuY3Rpb24gbm93KCkge1xuICByZXR1cm4gRGF0ZS5ub3coKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBub3c7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvbm93LmpzXG4gKiogbW9kdWxlIGlkID0gMTU2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9fYmFzZVByb3BlcnR5JyksXG4gICAgYmFzZVByb3BlcnR5RGVlcCA9IHJlcXVpcmUoJy4vX2Jhc2VQcm9wZXJ0eURlZXAnKSxcbiAgICBpc0tleSA9IHJlcXVpcmUoJy4vX2lzS2V5JyksXG4gICAgdG9LZXkgPSByZXF1aXJlKCcuL190b0tleScpO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHZhbHVlIGF0IGBwYXRoYCBvZiBhIGdpdmVuIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDIuNC4wXG4gKiBAY2F0ZWdvcnkgVXRpbFxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0cyA9IFtcbiAqICAgeyAnYSc6IHsgJ2InOiAyIH0gfSxcbiAqICAgeyAnYSc6IHsgJ2InOiAxIH0gfVxuICogXTtcbiAqXG4gKiBfLm1hcChvYmplY3RzLCBfLnByb3BlcnR5KCdhLmInKSk7XG4gKiAvLyA9PiBbMiwgMV1cbiAqXG4gKiBfLm1hcChfLnNvcnRCeShvYmplY3RzLCBfLnByb3BlcnR5KFsnYScsICdiJ10pKSwgJ2EuYicpO1xuICogLy8gPT4gWzEsIDJdXG4gKi9cbmZ1bmN0aW9uIHByb3BlcnR5KHBhdGgpIHtcbiAgcmV0dXJuIGlzS2V5KHBhdGgpID8gYmFzZVByb3BlcnR5KHRvS2V5KHBhdGgpKSA6IGJhc2VQcm9wZXJ0eURlZXAocGF0aCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcHJvcGVydHk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvcHJvcGVydHkuanNcbiAqKiBtb2R1bGUgaWQgPSAxNTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBhcHBseSA9IHJlcXVpcmUoJy4vX2FwcGx5JyksXG4gICAgdG9JbnRlZ2VyID0gcmVxdWlyZSgnLi90b0ludGVnZXInKTtcblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVNYXggPSBNYXRoLm1heDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGVcbiAqIGNyZWF0ZWQgZnVuY3Rpb24gYW5kIGFyZ3VtZW50cyBmcm9tIGBzdGFydGAgYW5kIGJleW9uZCBwcm92aWRlZCBhc1xuICogYW4gYXJyYXkuXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGJhc2VkIG9uIHRoZVxuICogW3Jlc3QgcGFyYW1ldGVyXShodHRwczovL21kbi5pby9yZXN0X3BhcmFtZXRlcnMpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYXBwbHkgYSByZXN0IHBhcmFtZXRlciB0by5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9ZnVuYy5sZW5ndGgtMV0gVGhlIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSByZXN0IHBhcmFtZXRlci5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgc2F5ID0gXy5yZXN0KGZ1bmN0aW9uKHdoYXQsIG5hbWVzKSB7XG4gKiAgIHJldHVybiB3aGF0ICsgJyAnICsgXy5pbml0aWFsKG5hbWVzKS5qb2luKCcsICcpICtcbiAqICAgICAoXy5zaXplKG5hbWVzKSA+IDEgPyAnLCAmICcgOiAnJykgKyBfLmxhc3QobmFtZXMpO1xuICogfSk7XG4gKlxuICogc2F5KCdoZWxsbycsICdmcmVkJywgJ2Jhcm5leScsICdwZWJibGVzJyk7XG4gKiAvLyA9PiAnaGVsbG8gZnJlZCwgYmFybmV5LCAmIHBlYmJsZXMnXG4gKi9cbmZ1bmN0aW9uIHJlc3QoZnVuYywgc3RhcnQpIHtcbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgc3RhcnQgPSBuYXRpdmVNYXgoc3RhcnQgPT09IHVuZGVmaW5lZCA/IChmdW5jLmxlbmd0aCAtIDEpIDogdG9JbnRlZ2VyKHN0YXJ0KSwgMCk7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gbmF0aXZlTWF4KGFyZ3MubGVuZ3RoIC0gc3RhcnQsIDApLFxuICAgICAgICBhcnJheSA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgYXJyYXlbaW5kZXhdID0gYXJnc1tzdGFydCArIGluZGV4XTtcbiAgICB9XG4gICAgc3dpdGNoIChzdGFydCkge1xuICAgICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFycmF5KTtcbiAgICAgIGNhc2UgMTogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzLCBhcmdzWzBdLCBhcnJheSk7XG4gICAgICBjYXNlIDI6IHJldHVybiBmdW5jLmNhbGwodGhpcywgYXJnc1swXSwgYXJnc1sxXSwgYXJyYXkpO1xuICAgIH1cbiAgICB2YXIgb3RoZXJBcmdzID0gQXJyYXkoc3RhcnQgKyAxKTtcbiAgICBpbmRleCA9IC0xO1xuICAgIHdoaWxlICgrK2luZGV4IDwgc3RhcnQpIHtcbiAgICAgIG90aGVyQXJnc1tpbmRleF0gPSBhcmdzW2luZGV4XTtcbiAgICB9XG4gICAgb3RoZXJBcmdzW3N0YXJ0XSA9IGFycmF5O1xuICAgIHJldHVybiBhcHBseShmdW5jLCB0aGlzLCBvdGhlckFyZ3MpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlc3Q7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvcmVzdC5qc1xuICoqIG1vZHVsZSBpZCA9IDE1OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIHRvTnVtYmVyID0gcmVxdWlyZSgnLi90b051bWJlcicpO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBJTkZJTklUWSA9IDEgLyAwLFxuICAgIE1BWF9JTlRFR0VSID0gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDg7XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIGZpbml0ZSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjEyLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29udmVydGVkIG51bWJlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b0Zpbml0ZSgzLjIpO1xuICogLy8gPT4gMy4yXG4gKlxuICogXy50b0Zpbml0ZShOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDVlLTMyNFxuICpcbiAqIF8udG9GaW5pdGUoSW5maW5pdHkpO1xuICogLy8gPT4gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDhcbiAqXG4gKiBfLnRvRmluaXRlKCczLjInKTtcbiAqIC8vID0+IDMuMlxuICovXG5mdW5jdGlvbiB0b0Zpbml0ZSh2YWx1ZSkge1xuICBpZiAoIXZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiAwO1xuICB9XG4gIHZhbHVlID0gdG9OdW1iZXIodmFsdWUpO1xuICBpZiAodmFsdWUgPT09IElORklOSVRZIHx8IHZhbHVlID09PSAtSU5GSU5JVFkpIHtcbiAgICB2YXIgc2lnbiA9ICh2YWx1ZSA8IDAgPyAtMSA6IDEpO1xuICAgIHJldHVybiBzaWduICogTUFYX0lOVEVHRVI7XG4gIH1cbiAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSA/IHZhbHVlIDogMDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0b0Zpbml0ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC90b0Zpbml0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE1OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VUb1N0cmluZyA9IHJlcXVpcmUoJy4vX2Jhc2VUb1N0cmluZycpO1xuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZCBmb3IgYG51bGxgXG4gKiBhbmQgYHVuZGVmaW5lZGAgdmFsdWVzLiBUaGUgc2lnbiBvZiBgLTBgIGlzIHByZXNlcnZlZC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b1N0cmluZyhudWxsKTtcbiAqIC8vID0+ICcnXG4gKlxuICogXy50b1N0cmluZygtMCk7XG4gKiAvLyA9PiAnLTAnXG4gKlxuICogXy50b1N0cmluZyhbMSwgMiwgM10pO1xuICogLy8gPT4gJzEsMiwzJ1xuICovXG5mdW5jdGlvbiB0b1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogYmFzZVRvU3RyaW5nKHZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0b1N0cmluZztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC90b1N0cmluZy5qc1xuICoqIG1vZHVsZSBpZCA9IDE2MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXG4vKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgIEJlZ2luIHByaXNtLWNvcmUuanNcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblxudmFyIF9zZWxmID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKVxuXHQ/IHdpbmRvdyAgIC8vIGlmIGluIGJyb3dzZXJcblx0OiAoXG5cdFx0KHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gJ3VuZGVmaW5lZCcgJiYgc2VsZiBpbnN0YW5jZW9mIFdvcmtlckdsb2JhbFNjb3BlKVxuXHRcdD8gc2VsZiAvLyBpZiBpbiB3b3JrZXJcblx0XHQ6IHt9ICAgLy8gaWYgaW4gbm9kZSBqc1xuXHQpO1xuXG4vKipcbiAqIFByaXNtOiBMaWdodHdlaWdodCwgcm9idXN0LCBlbGVnYW50IHN5bnRheCBoaWdobGlnaHRpbmdcbiAqIE1JVCBsaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwL1xuICogQGF1dGhvciBMZWEgVmVyb3UgaHR0cDovL2xlYS52ZXJvdS5tZVxuICovXG5cbnZhciBQcmlzbSA9IChmdW5jdGlvbigpe1xuXG4vLyBQcml2YXRlIGhlbHBlciB2YXJzXG52YXIgbGFuZyA9IC9cXGJsYW5nKD86dWFnZSk/LShcXHcrKVxcYi9pO1xudmFyIHVuaXF1ZUlkID0gMDtcblxudmFyIF8gPSBfc2VsZi5QcmlzbSA9IHtcblx0dXRpbDoge1xuXHRcdGVuY29kZTogZnVuY3Rpb24gKHRva2Vucykge1xuXHRcdFx0aWYgKHRva2VucyBpbnN0YW5jZW9mIFRva2VuKSB7XG5cdFx0XHRcdHJldHVybiBuZXcgVG9rZW4odG9rZW5zLnR5cGUsIF8udXRpbC5lbmNvZGUodG9rZW5zLmNvbnRlbnQpLCB0b2tlbnMuYWxpYXMpO1xuXHRcdFx0fSBlbHNlIGlmIChfLnV0aWwudHlwZSh0b2tlbnMpID09PSAnQXJyYXknKSB7XG5cdFx0XHRcdHJldHVybiB0b2tlbnMubWFwKF8udXRpbC5lbmNvZGUpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHRva2Vucy5yZXBsYWNlKC8mL2csICcmYW1wOycpLnJlcGxhY2UoLzwvZywgJyZsdDsnKS5yZXBsYWNlKC9cXHUwMGEwL2csICcgJyk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdHR5cGU6IGZ1bmN0aW9uIChvKSB7XG5cdFx0XHRyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLm1hdGNoKC9cXFtvYmplY3QgKFxcdyspXFxdLylbMV07XG5cdFx0fSxcblxuXHRcdG9iaklkOiBmdW5jdGlvbiAob2JqKSB7XG5cdFx0XHRpZiAoIW9ialsnX19pZCddKSB7XG5cdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosICdfX2lkJywgeyB2YWx1ZTogKyt1bmlxdWVJZCB9KTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBvYmpbJ19faWQnXTtcblx0XHR9LFxuXG5cdFx0Ly8gRGVlcCBjbG9uZSBhIGxhbmd1YWdlIGRlZmluaXRpb24gKGUuZy4gdG8gZXh0ZW5kIGl0KVxuXHRcdGNsb25lOiBmdW5jdGlvbiAobykge1xuXHRcdFx0dmFyIHR5cGUgPSBfLnV0aWwudHlwZShvKTtcblxuXHRcdFx0c3dpdGNoICh0eXBlKSB7XG5cdFx0XHRcdGNhc2UgJ09iamVjdCc6XG5cdFx0XHRcdFx0dmFyIGNsb25lID0ge307XG5cblx0XHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gbykge1xuXHRcdFx0XHRcdFx0aWYgKG8uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdFx0XHRcdFx0XHRjbG9uZVtrZXldID0gXy51dGlsLmNsb25lKG9ba2V5XSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIGNsb25lO1xuXG5cdFx0XHRcdGNhc2UgJ0FycmF5Jzpcblx0XHRcdFx0XHQvLyBDaGVjayBmb3IgZXhpc3RlbmNlIGZvciBJRThcblx0XHRcdFx0XHRyZXR1cm4gby5tYXAgJiYgby5tYXAoZnVuY3Rpb24odikgeyByZXR1cm4gXy51dGlsLmNsb25lKHYpOyB9KTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG87XG5cdFx0fVxuXHR9LFxuXG5cdGxhbmd1YWdlczoge1xuXHRcdGV4dGVuZDogZnVuY3Rpb24gKGlkLCByZWRlZikge1xuXHRcdFx0dmFyIGxhbmcgPSBfLnV0aWwuY2xvbmUoXy5sYW5ndWFnZXNbaWRdKTtcblxuXHRcdFx0Zm9yICh2YXIga2V5IGluIHJlZGVmKSB7XG5cdFx0XHRcdGxhbmdba2V5XSA9IHJlZGVmW2tleV07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBsYW5nO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBJbnNlcnQgYSB0b2tlbiBiZWZvcmUgYW5vdGhlciB0b2tlbiBpbiBhIGxhbmd1YWdlIGxpdGVyYWxcblx0XHQgKiBBcyB0aGlzIG5lZWRzIHRvIHJlY3JlYXRlIHRoZSBvYmplY3QgKHdlIGNhbm5vdCBhY3R1YWxseSBpbnNlcnQgYmVmb3JlIGtleXMgaW4gb2JqZWN0IGxpdGVyYWxzKSxcblx0XHQgKiB3ZSBjYW5ub3QganVzdCBwcm92aWRlIGFuIG9iamVjdCwgd2UgbmVlZCBhbm9iamVjdCBhbmQgYSBrZXkuXG5cdFx0ICogQHBhcmFtIGluc2lkZSBUaGUga2V5IChvciBsYW5ndWFnZSBpZCkgb2YgdGhlIHBhcmVudFxuXHRcdCAqIEBwYXJhbSBiZWZvcmUgVGhlIGtleSB0byBpbnNlcnQgYmVmb3JlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBmdW5jdGlvbiBhcHBlbmRzIGluc3RlYWQuXG5cdFx0ICogQHBhcmFtIGluc2VydCBPYmplY3Qgd2l0aCB0aGUga2V5L3ZhbHVlIHBhaXJzIHRvIGluc2VydFxuXHRcdCAqIEBwYXJhbSByb290IFRoZSBvYmplY3QgdGhhdCBjb250YWlucyBgaW5zaWRlYC4gSWYgZXF1YWwgdG8gUHJpc20ubGFuZ3VhZ2VzLCBpdCBjYW4gYmUgb21pdHRlZC5cblx0XHQgKi9cblx0XHRpbnNlcnRCZWZvcmU6IGZ1bmN0aW9uIChpbnNpZGUsIGJlZm9yZSwgaW5zZXJ0LCByb290KSB7XG5cdFx0XHRyb290ID0gcm9vdCB8fCBfLmxhbmd1YWdlcztcblx0XHRcdHZhciBncmFtbWFyID0gcm9vdFtpbnNpZGVdO1xuXG5cdFx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAyKSB7XG5cdFx0XHRcdGluc2VydCA9IGFyZ3VtZW50c1sxXTtcblxuXHRcdFx0XHRmb3IgKHZhciBuZXdUb2tlbiBpbiBpbnNlcnQpIHtcblx0XHRcdFx0XHRpZiAoaW5zZXJ0Lmhhc093blByb3BlcnR5KG5ld1Rva2VuKSkge1xuXHRcdFx0XHRcdFx0Z3JhbW1hcltuZXdUb2tlbl0gPSBpbnNlcnRbbmV3VG9rZW5dO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBncmFtbWFyO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgcmV0ID0ge307XG5cblx0XHRcdGZvciAodmFyIHRva2VuIGluIGdyYW1tYXIpIHtcblxuXHRcdFx0XHRpZiAoZ3JhbW1hci5oYXNPd25Qcm9wZXJ0eSh0b2tlbikpIHtcblxuXHRcdFx0XHRcdGlmICh0b2tlbiA9PSBiZWZvcmUpIHtcblxuXHRcdFx0XHRcdFx0Zm9yICh2YXIgbmV3VG9rZW4gaW4gaW5zZXJ0KSB7XG5cblx0XHRcdFx0XHRcdFx0aWYgKGluc2VydC5oYXNPd25Qcm9wZXJ0eShuZXdUb2tlbikpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXRbbmV3VG9rZW5dID0gaW5zZXJ0W25ld1Rva2VuXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldFt0b2tlbl0gPSBncmFtbWFyW3Rva2VuXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBVcGRhdGUgcmVmZXJlbmNlcyBpbiBvdGhlciBsYW5ndWFnZSBkZWZpbml0aW9uc1xuXHRcdFx0Xy5sYW5ndWFnZXMuREZTKF8ubGFuZ3VhZ2VzLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG5cdFx0XHRcdGlmICh2YWx1ZSA9PT0gcm9vdFtpbnNpZGVdICYmIGtleSAhPSBpbnNpZGUpIHtcblx0XHRcdFx0XHR0aGlzW2tleV0gPSByZXQ7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gcm9vdFtpbnNpZGVdID0gcmV0O1xuXHRcdH0sXG5cblx0XHQvLyBUcmF2ZXJzZSBhIGxhbmd1YWdlIGRlZmluaXRpb24gd2l0aCBEZXB0aCBGaXJzdCBTZWFyY2hcblx0XHRERlM6IGZ1bmN0aW9uKG8sIGNhbGxiYWNrLCB0eXBlLCB2aXNpdGVkKSB7XG5cdFx0XHR2aXNpdGVkID0gdmlzaXRlZCB8fCB7fTtcblx0XHRcdGZvciAodmFyIGkgaW4gbykge1xuXHRcdFx0XHRpZiAoby5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwobywgaSwgb1tpXSwgdHlwZSB8fCBpKTtcblxuXHRcdFx0XHRcdGlmIChfLnV0aWwudHlwZShvW2ldKSA9PT0gJ09iamVjdCcgJiYgIXZpc2l0ZWRbXy51dGlsLm9iaklkKG9baV0pXSkge1xuXHRcdFx0XHRcdFx0dmlzaXRlZFtfLnV0aWwub2JqSWQob1tpXSldID0gdHJ1ZTtcblx0XHRcdFx0XHRcdF8ubGFuZ3VhZ2VzLkRGUyhvW2ldLCBjYWxsYmFjaywgbnVsbCwgdmlzaXRlZCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgaWYgKF8udXRpbC50eXBlKG9baV0pID09PSAnQXJyYXknICYmICF2aXNpdGVkW18udXRpbC5vYmpJZChvW2ldKV0pIHtcblx0XHRcdFx0XHRcdHZpc2l0ZWRbXy51dGlsLm9iaklkKG9baV0pXSA9IHRydWU7XG5cdFx0XHRcdFx0XHRfLmxhbmd1YWdlcy5ERlMob1tpXSwgY2FsbGJhY2ssIGksIHZpc2l0ZWQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSxcblx0cGx1Z2luczoge30sXG5cblx0aGlnaGxpZ2h0QWxsOiBmdW5jdGlvbihhc3luYywgY2FsbGJhY2spIHtcblx0XHR2YXIgZW52ID0ge1xuXHRcdFx0Y2FsbGJhY2s6IGNhbGxiYWNrLFxuXHRcdFx0c2VsZWN0b3I6ICdjb2RlW2NsYXNzKj1cImxhbmd1YWdlLVwiXSwgW2NsYXNzKj1cImxhbmd1YWdlLVwiXSBjb2RlLCBjb2RlW2NsYXNzKj1cImxhbmctXCJdLCBbY2xhc3MqPVwibGFuZy1cIl0gY29kZSdcblx0XHR9O1xuXG5cdFx0Xy5ob29rcy5ydW4oXCJiZWZvcmUtaGlnaGxpZ2h0YWxsXCIsIGVudik7XG5cblx0XHR2YXIgZWxlbWVudHMgPSBlbnYuZWxlbWVudHMgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbnYuc2VsZWN0b3IpO1xuXG5cdFx0Zm9yICh2YXIgaT0wLCBlbGVtZW50OyBlbGVtZW50ID0gZWxlbWVudHNbaSsrXTspIHtcblx0XHRcdF8uaGlnaGxpZ2h0RWxlbWVudChlbGVtZW50LCBhc3luYyA9PT0gdHJ1ZSwgZW52LmNhbGxiYWNrKTtcblx0XHR9XG5cdH0sXG5cblx0aGlnaGxpZ2h0RWxlbWVudDogZnVuY3Rpb24oZWxlbWVudCwgYXN5bmMsIGNhbGxiYWNrKSB7XG5cdFx0Ly8gRmluZCBsYW5ndWFnZVxuXHRcdHZhciBsYW5ndWFnZSwgZ3JhbW1hciwgcGFyZW50ID0gZWxlbWVudDtcblxuXHRcdHdoaWxlIChwYXJlbnQgJiYgIWxhbmcudGVzdChwYXJlbnQuY2xhc3NOYW1lKSkge1xuXHRcdFx0cGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XG5cdFx0fVxuXG5cdFx0aWYgKHBhcmVudCkge1xuXHRcdFx0bGFuZ3VhZ2UgPSAocGFyZW50LmNsYXNzTmFtZS5tYXRjaChsYW5nKSB8fCBbLCcnXSlbMV0udG9Mb3dlckNhc2UoKTtcblx0XHRcdGdyYW1tYXIgPSBfLmxhbmd1YWdlc1tsYW5ndWFnZV07XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IGxhbmd1YWdlIG9uIHRoZSBlbGVtZW50LCBpZiBub3QgcHJlc2VudFxuXHRcdGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUucmVwbGFjZShsYW5nLCAnJykucmVwbGFjZSgvXFxzKy9nLCAnICcpICsgJyBsYW5ndWFnZS0nICsgbGFuZ3VhZ2U7XG5cblx0XHQvLyBTZXQgbGFuZ3VhZ2Ugb24gdGhlIHBhcmVudCwgZm9yIHN0eWxpbmdcblx0XHRwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG5cblx0XHRpZiAoL3ByZS9pLnRlc3QocGFyZW50Lm5vZGVOYW1lKSkge1xuXHRcdFx0cGFyZW50LmNsYXNzTmFtZSA9IHBhcmVudC5jbGFzc05hbWUucmVwbGFjZShsYW5nLCAnJykucmVwbGFjZSgvXFxzKy9nLCAnICcpICsgJyBsYW5ndWFnZS0nICsgbGFuZ3VhZ2U7XG5cdFx0fVxuXG5cdFx0dmFyIGNvZGUgPSBlbGVtZW50LnRleHRDb250ZW50O1xuXG5cdFx0dmFyIGVudiA9IHtcblx0XHRcdGVsZW1lbnQ6IGVsZW1lbnQsXG5cdFx0XHRsYW5ndWFnZTogbGFuZ3VhZ2UsXG5cdFx0XHRncmFtbWFyOiBncmFtbWFyLFxuXHRcdFx0Y29kZTogY29kZVxuXHRcdH07XG5cblx0XHRfLmhvb2tzLnJ1bignYmVmb3JlLXNhbml0eS1jaGVjaycsIGVudik7XG5cblx0XHRpZiAoIWVudi5jb2RlIHx8ICFlbnYuZ3JhbW1hcikge1xuXHRcdFx0Xy5ob29rcy5ydW4oJ2NvbXBsZXRlJywgZW52KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRfLmhvb2tzLnJ1bignYmVmb3JlLWhpZ2hsaWdodCcsIGVudik7XG5cblx0XHRpZiAoYXN5bmMgJiYgX3NlbGYuV29ya2VyKSB7XG5cdFx0XHR2YXIgd29ya2VyID0gbmV3IFdvcmtlcihfLmZpbGVuYW1lKTtcblxuXHRcdFx0d29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2dCkge1xuXHRcdFx0XHRlbnYuaGlnaGxpZ2h0ZWRDb2RlID0gZXZ0LmRhdGE7XG5cblx0XHRcdFx0Xy5ob29rcy5ydW4oJ2JlZm9yZS1pbnNlcnQnLCBlbnYpO1xuXG5cdFx0XHRcdGVudi5lbGVtZW50LmlubmVySFRNTCA9IGVudi5oaWdobGlnaHRlZENvZGU7XG5cblx0XHRcdFx0Y2FsbGJhY2sgJiYgY2FsbGJhY2suY2FsbChlbnYuZWxlbWVudCk7XG5cdFx0XHRcdF8uaG9va3MucnVuKCdhZnRlci1oaWdobGlnaHQnLCBlbnYpO1xuXHRcdFx0XHRfLmhvb2tzLnJ1bignY29tcGxldGUnLCBlbnYpO1xuXHRcdFx0fTtcblxuXHRcdFx0d29ya2VyLnBvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0bGFuZ3VhZ2U6IGVudi5sYW5ndWFnZSxcblx0XHRcdFx0Y29kZTogZW52LmNvZGUsXG5cdFx0XHRcdGltbWVkaWF0ZUNsb3NlOiB0cnVlXG5cdFx0XHR9KSk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0ZW52LmhpZ2hsaWdodGVkQ29kZSA9IF8uaGlnaGxpZ2h0KGVudi5jb2RlLCBlbnYuZ3JhbW1hciwgZW52Lmxhbmd1YWdlKTtcblxuXHRcdFx0Xy5ob29rcy5ydW4oJ2JlZm9yZS1pbnNlcnQnLCBlbnYpO1xuXG5cdFx0XHRlbnYuZWxlbWVudC5pbm5lckhUTUwgPSBlbnYuaGlnaGxpZ2h0ZWRDb2RlO1xuXG5cdFx0XHRjYWxsYmFjayAmJiBjYWxsYmFjay5jYWxsKGVsZW1lbnQpO1xuXG5cdFx0XHRfLmhvb2tzLnJ1bignYWZ0ZXItaGlnaGxpZ2h0JywgZW52KTtcblx0XHRcdF8uaG9va3MucnVuKCdjb21wbGV0ZScsIGVudik7XG5cdFx0fVxuXHR9LFxuXG5cdGhpZ2hsaWdodDogZnVuY3Rpb24gKHRleHQsIGdyYW1tYXIsIGxhbmd1YWdlKSB7XG5cdFx0dmFyIHRva2VucyA9IF8udG9rZW5pemUodGV4dCwgZ3JhbW1hcik7XG5cdFx0cmV0dXJuIFRva2VuLnN0cmluZ2lmeShfLnV0aWwuZW5jb2RlKHRva2VucyksIGxhbmd1YWdlKTtcblx0fSxcblxuXHR0b2tlbml6ZTogZnVuY3Rpb24odGV4dCwgZ3JhbW1hciwgbGFuZ3VhZ2UpIHtcblx0XHR2YXIgVG9rZW4gPSBfLlRva2VuO1xuXG5cdFx0dmFyIHN0cmFyciA9IFt0ZXh0XTtcblxuXHRcdHZhciByZXN0ID0gZ3JhbW1hci5yZXN0O1xuXG5cdFx0aWYgKHJlc3QpIHtcblx0XHRcdGZvciAodmFyIHRva2VuIGluIHJlc3QpIHtcblx0XHRcdFx0Z3JhbW1hclt0b2tlbl0gPSByZXN0W3Rva2VuXTtcblx0XHRcdH1cblxuXHRcdFx0ZGVsZXRlIGdyYW1tYXIucmVzdDtcblx0XHR9XG5cblx0XHR0b2tlbmxvb3A6IGZvciAodmFyIHRva2VuIGluIGdyYW1tYXIpIHtcblx0XHRcdGlmKCFncmFtbWFyLmhhc093blByb3BlcnR5KHRva2VuKSB8fCAhZ3JhbW1hclt0b2tlbl0pIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBwYXR0ZXJucyA9IGdyYW1tYXJbdG9rZW5dO1xuXHRcdFx0cGF0dGVybnMgPSAoXy51dGlsLnR5cGUocGF0dGVybnMpID09PSBcIkFycmF5XCIpID8gcGF0dGVybnMgOiBbcGF0dGVybnNdO1xuXG5cdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IHBhdHRlcm5zLmxlbmd0aDsgKytqKSB7XG5cdFx0XHRcdHZhciBwYXR0ZXJuID0gcGF0dGVybnNbal0sXG5cdFx0XHRcdFx0aW5zaWRlID0gcGF0dGVybi5pbnNpZGUsXG5cdFx0XHRcdFx0bG9va2JlaGluZCA9ICEhcGF0dGVybi5sb29rYmVoaW5kLFxuXHRcdFx0XHRcdGdyZWVkeSA9ICEhcGF0dGVybi5ncmVlZHksXG5cdFx0XHRcdFx0bG9va2JlaGluZExlbmd0aCA9IDAsXG5cdFx0XHRcdFx0YWxpYXMgPSBwYXR0ZXJuLmFsaWFzO1xuXG5cdFx0XHRcdHBhdHRlcm4gPSBwYXR0ZXJuLnBhdHRlcm4gfHwgcGF0dGVybjtcblxuXHRcdFx0XHRmb3IgKHZhciBpPTA7IGk8c3RyYXJyLmxlbmd0aDsgaSsrKSB7IC8vIERvbuKAmXQgY2FjaGUgbGVuZ3RoIGFzIGl0IGNoYW5nZXMgZHVyaW5nIHRoZSBsb29wXG5cblx0XHRcdFx0XHR2YXIgc3RyID0gc3RyYXJyW2ldO1xuXG5cdFx0XHRcdFx0aWYgKHN0cmFyci5sZW5ndGggPiB0ZXh0Lmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0Ly8gU29tZXRoaW5nIHdlbnQgdGVycmlibHkgd3JvbmcsIEFCT1JULCBBQk9SVCFcblx0XHRcdFx0XHRcdGJyZWFrIHRva2VubG9vcDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoc3RyIGluc3RhbmNlb2YgVG9rZW4pIHtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHBhdHRlcm4ubGFzdEluZGV4ID0gMDtcblxuXHRcdFx0XHRcdHZhciBtYXRjaCA9IHBhdHRlcm4uZXhlYyhzdHIpLFxuXHRcdFx0XHRcdCAgICBkZWxOdW0gPSAxO1xuXG5cdFx0XHRcdFx0Ly8gR3JlZWR5IHBhdHRlcm5zIGNhbiBvdmVycmlkZS9yZW1vdmUgdXAgdG8gdHdvIHByZXZpb3VzbHkgbWF0Y2hlZCB0b2tlbnNcblx0XHRcdFx0XHRpZiAoIW1hdGNoICYmIGdyZWVkeSAmJiBpICE9IHN0cmFyci5sZW5ndGggLSAxKSB7XG5cdFx0XHRcdFx0XHQvLyBSZWNvbnN0cnVjdCB0aGUgb3JpZ2luYWwgdGV4dCB1c2luZyB0aGUgbmV4dCB0d28gdG9rZW5zXG5cdFx0XHRcdFx0XHR2YXIgbmV4dFRva2VuID0gc3RyYXJyW2kgKyAxXS5tYXRjaGVkU3RyIHx8IHN0cmFycltpICsgMV0sXG5cdFx0XHRcdFx0XHQgICAgY29tYlN0ciA9IHN0ciArIG5leHRUb2tlbjtcblxuXHRcdFx0XHRcdFx0aWYgKGkgPCBzdHJhcnIubGVuZ3RoIC0gMikge1xuXHRcdFx0XHRcdFx0XHRjb21iU3RyICs9IHN0cmFycltpICsgMl0ubWF0Y2hlZFN0ciB8fCBzdHJhcnJbaSArIDJdO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBUcnkgdGhlIHBhdHRlcm4gYWdhaW4gb24gdGhlIHJlY29uc3RydWN0ZWQgdGV4dFxuXHRcdFx0XHRcdFx0cGF0dGVybi5sYXN0SW5kZXggPSAwO1xuXHRcdFx0XHRcdFx0bWF0Y2ggPSBwYXR0ZXJuLmV4ZWMoY29tYlN0cik7XG5cdFx0XHRcdFx0XHRpZiAoIW1hdGNoKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR2YXIgZnJvbSA9IG1hdGNoLmluZGV4ICsgKGxvb2tiZWhpbmQgPyBtYXRjaFsxXS5sZW5ndGggOiAwKTtcblx0XHRcdFx0XHRcdC8vIFRvIGJlIGEgdmFsaWQgY2FuZGlkYXRlLCB0aGUgbmV3IG1hdGNoIGhhcyB0byBzdGFydCBpbnNpZGUgb2Ygc3RyXG5cdFx0XHRcdFx0XHRpZiAoZnJvbSA+PSBzdHIubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0dmFyIHRvID0gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgsXG5cdFx0XHRcdFx0XHQgICAgbGVuID0gc3RyLmxlbmd0aCArIG5leHRUb2tlbi5sZW5ndGg7XG5cblx0XHRcdFx0XHRcdC8vIE51bWJlciBvZiB0b2tlbnMgdG8gZGVsZXRlIGFuZCByZXBsYWNlIHdpdGggdGhlIG5ldyBtYXRjaFxuXHRcdFx0XHRcdFx0ZGVsTnVtID0gMztcblxuXHRcdFx0XHRcdFx0aWYgKHRvIDw9IGxlbikge1xuXHRcdFx0XHRcdFx0XHRpZiAoc3RyYXJyW2kgKyAxXS5ncmVlZHkpIHtcblx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRkZWxOdW0gPSAyO1xuXHRcdFx0XHRcdFx0XHRjb21iU3RyID0gY29tYlN0ci5zbGljZSgwLCBsZW4pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0c3RyID0gY29tYlN0cjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIW1hdGNoKSB7XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZihsb29rYmVoaW5kKSB7XG5cdFx0XHRcdFx0XHRsb29rYmVoaW5kTGVuZ3RoID0gbWF0Y2hbMV0ubGVuZ3RoO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHZhciBmcm9tID0gbWF0Y2guaW5kZXggKyBsb29rYmVoaW5kTGVuZ3RoLFxuXHRcdFx0XHRcdCAgICBtYXRjaCA9IG1hdGNoWzBdLnNsaWNlKGxvb2tiZWhpbmRMZW5ndGgpLFxuXHRcdFx0XHRcdCAgICB0byA9IGZyb20gKyBtYXRjaC5sZW5ndGgsXG5cdFx0XHRcdFx0ICAgIGJlZm9yZSA9IHN0ci5zbGljZSgwLCBmcm9tKSxcblx0XHRcdFx0XHQgICAgYWZ0ZXIgPSBzdHIuc2xpY2UodG8pO1xuXG5cdFx0XHRcdFx0dmFyIGFyZ3MgPSBbaSwgZGVsTnVtXTtcblxuXHRcdFx0XHRcdGlmIChiZWZvcmUpIHtcblx0XHRcdFx0XHRcdGFyZ3MucHVzaChiZWZvcmUpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHZhciB3cmFwcGVkID0gbmV3IFRva2VuKHRva2VuLCBpbnNpZGU/IF8udG9rZW5pemUobWF0Y2gsIGluc2lkZSkgOiBtYXRjaCwgYWxpYXMsIG1hdGNoLCBncmVlZHkpO1xuXG5cdFx0XHRcdFx0YXJncy5wdXNoKHdyYXBwZWQpO1xuXG5cdFx0XHRcdFx0aWYgKGFmdGVyKSB7XG5cdFx0XHRcdFx0XHRhcmdzLnB1c2goYWZ0ZXIpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdEFycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoc3RyYXJyLCBhcmdzKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBzdHJhcnI7XG5cdH0sXG5cblx0aG9va3M6IHtcblx0XHRhbGw6IHt9LFxuXG5cdFx0YWRkOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2spIHtcblx0XHRcdHZhciBob29rcyA9IF8uaG9va3MuYWxsO1xuXG5cdFx0XHRob29rc1tuYW1lXSA9IGhvb2tzW25hbWVdIHx8IFtdO1xuXG5cdFx0XHRob29rc1tuYW1lXS5wdXNoKGNhbGxiYWNrKTtcblx0XHR9LFxuXG5cdFx0cnVuOiBmdW5jdGlvbiAobmFtZSwgZW52KSB7XG5cdFx0XHR2YXIgY2FsbGJhY2tzID0gXy5ob29rcy5hbGxbbmFtZV07XG5cblx0XHRcdGlmICghY2FsbGJhY2tzIHx8ICFjYWxsYmFja3MubGVuZ3RoKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Zm9yICh2YXIgaT0wLCBjYWxsYmFjazsgY2FsbGJhY2sgPSBjYWxsYmFja3NbaSsrXTspIHtcblx0XHRcdFx0Y2FsbGJhY2soZW52KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn07XG5cbnZhciBUb2tlbiA9IF8uVG9rZW4gPSBmdW5jdGlvbih0eXBlLCBjb250ZW50LCBhbGlhcywgbWF0Y2hlZFN0ciwgZ3JlZWR5KSB7XG5cdHRoaXMudHlwZSA9IHR5cGU7XG5cdHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG5cdHRoaXMuYWxpYXMgPSBhbGlhcztcblx0Ly8gQ29weSBvZiB0aGUgZnVsbCBzdHJpbmcgdGhpcyB0b2tlbiB3YXMgY3JlYXRlZCBmcm9tXG5cdHRoaXMubWF0Y2hlZFN0ciA9IG1hdGNoZWRTdHIgfHwgbnVsbDtcblx0dGhpcy5ncmVlZHkgPSAhIWdyZWVkeTtcbn07XG5cblRva2VuLnN0cmluZ2lmeSA9IGZ1bmN0aW9uKG8sIGxhbmd1YWdlLCBwYXJlbnQpIHtcblx0aWYgKHR5cGVvZiBvID09ICdzdHJpbmcnKSB7XG5cdFx0cmV0dXJuIG87XG5cdH1cblxuXHRpZiAoXy51dGlsLnR5cGUobykgPT09ICdBcnJheScpIHtcblx0XHRyZXR1cm4gby5tYXAoZnVuY3Rpb24oZWxlbWVudCkge1xuXHRcdFx0cmV0dXJuIFRva2VuLnN0cmluZ2lmeShlbGVtZW50LCBsYW5ndWFnZSwgbyk7XG5cdFx0fSkuam9pbignJyk7XG5cdH1cblxuXHR2YXIgZW52ID0ge1xuXHRcdHR5cGU6IG8udHlwZSxcblx0XHRjb250ZW50OiBUb2tlbi5zdHJpbmdpZnkoby5jb250ZW50LCBsYW5ndWFnZSwgcGFyZW50KSxcblx0XHR0YWc6ICdzcGFuJyxcblx0XHRjbGFzc2VzOiBbJ3Rva2VuJywgby50eXBlXSxcblx0XHRhdHRyaWJ1dGVzOiB7fSxcblx0XHRsYW5ndWFnZTogbGFuZ3VhZ2UsXG5cdFx0cGFyZW50OiBwYXJlbnRcblx0fTtcblxuXHRpZiAoZW52LnR5cGUgPT0gJ2NvbW1lbnQnKSB7XG5cdFx0ZW52LmF0dHJpYnV0ZXNbJ3NwZWxsY2hlY2snXSA9ICd0cnVlJztcblx0fVxuXG5cdGlmIChvLmFsaWFzKSB7XG5cdFx0dmFyIGFsaWFzZXMgPSBfLnV0aWwudHlwZShvLmFsaWFzKSA9PT0gJ0FycmF5JyA/IG8uYWxpYXMgOiBbby5hbGlhc107XG5cdFx0QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoZW52LmNsYXNzZXMsIGFsaWFzZXMpO1xuXHR9XG5cblx0Xy5ob29rcy5ydW4oJ3dyYXAnLCBlbnYpO1xuXG5cdHZhciBhdHRyaWJ1dGVzID0gJyc7XG5cblx0Zm9yICh2YXIgbmFtZSBpbiBlbnYuYXR0cmlidXRlcykge1xuXHRcdGF0dHJpYnV0ZXMgKz0gKGF0dHJpYnV0ZXMgPyAnICcgOiAnJykgKyBuYW1lICsgJz1cIicgKyAoZW52LmF0dHJpYnV0ZXNbbmFtZV0gfHwgJycpICsgJ1wiJztcblx0fVxuXG5cdHJldHVybiAnPCcgKyBlbnYudGFnICsgJyBjbGFzcz1cIicgKyBlbnYuY2xhc3Nlcy5qb2luKCcgJykgKyAnXCIgJyArIGF0dHJpYnV0ZXMgKyAnPicgKyBlbnYuY29udGVudCArICc8LycgKyBlbnYudGFnICsgJz4nO1xuXG59O1xuXG5pZiAoIV9zZWxmLmRvY3VtZW50KSB7XG5cdGlmICghX3NlbGYuYWRkRXZlbnRMaXN0ZW5lcikge1xuXHRcdC8vIGluIE5vZGUuanNcblx0XHRyZXR1cm4gX3NlbGYuUHJpc207XG5cdH1cbiBcdC8vIEluIHdvcmtlclxuXHRfc2VsZi5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZXZ0KSB7XG5cdFx0dmFyIG1lc3NhZ2UgPSBKU09OLnBhcnNlKGV2dC5kYXRhKSxcblx0XHQgICAgbGFuZyA9IG1lc3NhZ2UubGFuZ3VhZ2UsXG5cdFx0ICAgIGNvZGUgPSBtZXNzYWdlLmNvZGUsXG5cdFx0ICAgIGltbWVkaWF0ZUNsb3NlID0gbWVzc2FnZS5pbW1lZGlhdGVDbG9zZTtcblxuXHRcdF9zZWxmLnBvc3RNZXNzYWdlKF8uaGlnaGxpZ2h0KGNvZGUsIF8ubGFuZ3VhZ2VzW2xhbmddLCBsYW5nKSk7XG5cdFx0aWYgKGltbWVkaWF0ZUNsb3NlKSB7XG5cdFx0XHRfc2VsZi5jbG9zZSgpO1xuXHRcdH1cblx0fSwgZmFsc2UpO1xuXG5cdHJldHVybiBfc2VsZi5QcmlzbTtcbn1cblxuLy9HZXQgY3VycmVudCBzY3JpcHQgYW5kIGhpZ2hsaWdodFxudmFyIHNjcmlwdCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQgfHwgW10uc2xpY2UuY2FsbChkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKSkucG9wKCk7XG5cbmlmIChzY3JpcHQpIHtcblx0Xy5maWxlbmFtZSA9IHNjcmlwdC5zcmM7XG5cblx0aWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJiYgIXNjcmlwdC5oYXNBdHRyaWJ1dGUoJ2RhdGEtbWFudWFsJykpIHtcblx0XHRpZihkb2N1bWVudC5yZWFkeVN0YXRlICE9PSBcImxvYWRpbmdcIikge1xuXHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKF8uaGlnaGxpZ2h0QWxsLCAwKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgXy5oaWdobGlnaHRBbGwpO1xuXHRcdH1cblx0fVxufVxuXG5yZXR1cm4gX3NlbGYuUHJpc207XG5cbn0pKCk7XG5cbmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRtb2R1bGUuZXhwb3J0cyA9IFByaXNtO1xufVxuXG4vLyBoYWNrIGZvciBjb21wb25lbnRzIHRvIHdvcmsgY29ycmVjdGx5IGluIG5vZGUuanNcbmlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuXHRnbG9iYWwuUHJpc20gPSBQcmlzbTtcbn1cblxuXG4vKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgIEJlZ2luIHByaXNtLW1hcmt1cC5qc1xuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG5QcmlzbS5sYW5ndWFnZXMubWFya3VwID0ge1xuXHQnY29tbWVudCc6IC88IS0tW1xcd1xcV10qPy0tPi8sXG5cdCdwcm9sb2cnOiAvPFxcP1tcXHdcXFddKz9cXD8+Lyxcblx0J2RvY3R5cGUnOiAvPCFET0NUWVBFW1xcd1xcV10rPz4vLFxuXHQnY2RhdGEnOiAvPCFcXFtDREFUQVxcW1tcXHdcXFddKj9dXT4vaSxcblx0J3RhZyc6IHtcblx0XHRwYXR0ZXJuOiAvPFxcLz8oPyFcXGQpW15cXHM+XFwvPS4kPF0rKD86XFxzK1teXFxzPlxcLz1dKyg/Oj0oPzooXCJ8JykoPzpcXFxcXFwxfFxcXFw/KD8hXFwxKVtcXHdcXFddKSpcXDF8W15cXHMnXCI+PV0rKSk/KSpcXHMqXFwvPz4vaSxcblx0XHRpbnNpZGU6IHtcblx0XHRcdCd0YWcnOiB7XG5cdFx0XHRcdHBhdHRlcm46IC9ePFxcLz9bXlxccz5cXC9dKy9pLFxuXHRcdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0XHQncHVuY3R1YXRpb24nOiAvXjxcXC8/Lyxcblx0XHRcdFx0XHQnbmFtZXNwYWNlJzogL15bXlxccz5cXC86XSs6L1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0J2F0dHItdmFsdWUnOiB7XG5cdFx0XHRcdHBhdHRlcm46IC89KD86KCd8XCIpW1xcd1xcV10qPyhcXDEpfFteXFxzPl0rKS9pLFxuXHRcdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0XHQncHVuY3R1YXRpb24nOiAvWz0+XCInXS9cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdCdwdW5jdHVhdGlvbic6IC9cXC8/Pi8sXG5cdFx0XHQnYXR0ci1uYW1lJzoge1xuXHRcdFx0XHRwYXR0ZXJuOiAvW15cXHM+XFwvXSsvLFxuXHRcdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0XHQnbmFtZXNwYWNlJzogL15bXlxccz5cXC86XSs6L1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHR9XG5cdH0sXG5cdCdlbnRpdHknOiAvJiM/W1xcZGEtel17MSw4fTsvaVxufTtcblxuLy8gUGx1Z2luIHRvIG1ha2UgZW50aXR5IHRpdGxlIHNob3cgdGhlIHJlYWwgZW50aXR5LCBpZGVhIGJ5IFJvbWFuIEtvbWFyb3ZcblByaXNtLmhvb2tzLmFkZCgnd3JhcCcsIGZ1bmN0aW9uKGVudikge1xuXG5cdGlmIChlbnYudHlwZSA9PT0gJ2VudGl0eScpIHtcblx0XHRlbnYuYXR0cmlidXRlc1sndGl0bGUnXSA9IGVudi5jb250ZW50LnJlcGxhY2UoLyZhbXA7LywgJyYnKTtcblx0fVxufSk7XG5cblByaXNtLmxhbmd1YWdlcy54bWwgPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwO1xuUHJpc20ubGFuZ3VhZ2VzLmh0bWwgPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwO1xuUHJpc20ubGFuZ3VhZ2VzLm1hdGhtbCA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5QcmlzbS5sYW5ndWFnZXMuc3ZnID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblxuXG4vKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgIEJlZ2luIHByaXNtLWNzcy5qc1xuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG5QcmlzbS5sYW5ndWFnZXMuY3NzID0ge1xuXHQnY29tbWVudCc6IC9cXC9cXCpbXFx3XFxXXSo/XFwqXFwvLyxcblx0J2F0cnVsZSc6IHtcblx0XHRwYXR0ZXJuOiAvQFtcXHctXSs/Lio/KDt8KD89XFxzKlxceykpL2ksXG5cdFx0aW5zaWRlOiB7XG5cdFx0XHQncnVsZSc6IC9AW1xcdy1dKy9cblx0XHRcdC8vIFNlZSByZXN0IGJlbG93XG5cdFx0fVxuXHR9LFxuXHQndXJsJzogL3VybFxcKCg/OihbXCInXSkoXFxcXCg/OlxcclxcbnxbXFx3XFxXXSl8KD8hXFwxKVteXFxcXFxcclxcbl0pKlxcMXwuKj8pXFwpL2ksXG5cdCdzZWxlY3Rvcic6IC9bXlxce1xcfVxcc11bXlxce1xcfTtdKj8oPz1cXHMqXFx7KS8sXG5cdCdzdHJpbmcnOiAvKFwifCcpKFxcXFwoPzpcXHJcXG58W1xcd1xcV10pfCg/IVxcMSlbXlxcXFxcXHJcXG5dKSpcXDEvLFxuXHQncHJvcGVydHknOiAvKFxcYnxcXEIpW1xcdy1dKyg/PVxccyo6KS9pLFxuXHQnaW1wb3J0YW50JzogL1xcQiFpbXBvcnRhbnRcXGIvaSxcblx0J2Z1bmN0aW9uJzogL1stYS16MC05XSsoPz1cXCgpL2ksXG5cdCdwdW5jdHVhdGlvbic6IC9bKCl7fTs6XS9cbn07XG5cblByaXNtLmxhbmd1YWdlcy5jc3NbJ2F0cnVsZSddLmluc2lkZS5yZXN0ID0gUHJpc20udXRpbC5jbG9uZShQcmlzbS5sYW5ndWFnZXMuY3NzKTtcblxuaWYgKFByaXNtLmxhbmd1YWdlcy5tYXJrdXApIHtcblx0UHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnbWFya3VwJywgJ3RhZycsIHtcblx0XHQnc3R5bGUnOiB7XG5cdFx0XHRwYXR0ZXJuOiAvKDxzdHlsZVtcXHdcXFddKj8+KVtcXHdcXFddKj8oPz08XFwvc3R5bGU+KS9pLFxuXHRcdFx0bG9va2JlaGluZDogdHJ1ZSxcblx0XHRcdGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmNzcyxcblx0XHRcdGFsaWFzOiAnbGFuZ3VhZ2UtY3NzJ1xuXHRcdH1cblx0fSk7XG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdpbnNpZGUnLCAnYXR0ci12YWx1ZScsIHtcblx0XHQnc3R5bGUtYXR0cic6IHtcblx0XHRcdHBhdHRlcm46IC9cXHMqc3R5bGU9KFwifCcpLio/XFwxL2ksXG5cdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0J2F0dHItbmFtZSc6IHtcblx0XHRcdFx0XHRwYXR0ZXJuOiAvXlxccypzdHlsZS9pLFxuXHRcdFx0XHRcdGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cC50YWcuaW5zaWRlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdCdwdW5jdHVhdGlvbic6IC9eXFxzKj1cXHMqWydcIl18WydcIl1cXHMqJC8sXG5cdFx0XHRcdCdhdHRyLXZhbHVlJzoge1xuXHRcdFx0XHRcdHBhdHRlcm46IC8uKy9pLFxuXHRcdFx0XHRcdGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmNzc1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0YWxpYXM6ICdsYW5ndWFnZS1jc3MnXG5cdFx0fVxuXHR9LCBQcmlzbS5sYW5ndWFnZXMubWFya3VwLnRhZyk7XG59XG5cbi8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgQmVnaW4gcHJpc20tY2xpa2UuanNcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblxuUHJpc20ubGFuZ3VhZ2VzLmNsaWtlID0ge1xuXHQnY29tbWVudCc6IFtcblx0XHR7XG5cdFx0XHRwYXR0ZXJuOiAvKF58W15cXFxcXSlcXC9cXCpbXFx3XFxXXSo/XFwqXFwvLyxcblx0XHRcdGxvb2tiZWhpbmQ6IHRydWVcblx0XHR9LFxuXHRcdHtcblx0XHRcdHBhdHRlcm46IC8oXnxbXlxcXFw6XSlcXC9cXC8uKi8sXG5cdFx0XHRsb29rYmVoaW5kOiB0cnVlXG5cdFx0fVxuXHRdLFxuXHQnc3RyaW5nJzoge1xuXHRcdHBhdHRlcm46IC8oW1wiJ10pKFxcXFwoPzpcXHJcXG58W1xcc1xcU10pfCg/IVxcMSlbXlxcXFxcXHJcXG5dKSpcXDEvLFxuXHRcdGdyZWVkeTogdHJ1ZVxuXHR9LFxuXHQnY2xhc3MtbmFtZSc6IHtcblx0XHRwYXR0ZXJuOiAvKCg/OlxcYig/OmNsYXNzfGludGVyZmFjZXxleHRlbmRzfGltcGxlbWVudHN8dHJhaXR8aW5zdGFuY2VvZnxuZXcpXFxzKyl8KD86Y2F0Y2hcXHMrXFwoKSlbYS16MC05X1xcLlxcXFxdKy9pLFxuXHRcdGxvb2tiZWhpbmQ6IHRydWUsXG5cdFx0aW5zaWRlOiB7XG5cdFx0XHRwdW5jdHVhdGlvbjogLyhcXC58XFxcXCkvXG5cdFx0fVxuXHR9LFxuXHQna2V5d29yZCc6IC9cXGIoaWZ8ZWxzZXx3aGlsZXxkb3xmb3J8cmV0dXJufGlufGluc3RhbmNlb2Z8ZnVuY3Rpb258bmV3fHRyeXx0aHJvd3xjYXRjaHxmaW5hbGx5fG51bGx8YnJlYWt8Y29udGludWUpXFxiLyxcblx0J2Jvb2xlYW4nOiAvXFxiKHRydWV8ZmFsc2UpXFxiLyxcblx0J2Z1bmN0aW9uJzogL1thLXowLTlfXSsoPz1cXCgpL2ksXG5cdCdudW1iZXInOiAvXFxiLT8oPzoweFtcXGRhLWZdK3xcXGQqXFwuP1xcZCsoPzplWystXT9cXGQrKT8pXFxiL2ksXG5cdCdvcGVyYXRvcic6IC8tLT98XFwrXFwrP3whPT89P3w8PT98Pj0/fD09Pz0/fCYmP3xcXHxcXHw/fFxcP3xcXCp8XFwvfH58XFxefCUvLFxuXHQncHVuY3R1YXRpb24nOiAvW3t9W1xcXTsoKSwuOl0vXG59O1xuXG5cbi8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgQmVnaW4gcHJpc20tamF2YXNjcmlwdC5qc1xuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG5QcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdCA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2NsaWtlJywge1xuXHQna2V5d29yZCc6IC9cXGIoYXN8YXN5bmN8YXdhaXR8YnJlYWt8Y2FzZXxjYXRjaHxjbGFzc3xjb25zdHxjb250aW51ZXxkZWJ1Z2dlcnxkZWZhdWx0fGRlbGV0ZXxkb3xlbHNlfGVudW18ZXhwb3J0fGV4dGVuZHN8ZmluYWxseXxmb3J8ZnJvbXxmdW5jdGlvbnxnZXR8aWZ8aW1wbGVtZW50c3xpbXBvcnR8aW58aW5zdGFuY2VvZnxpbnRlcmZhY2V8bGV0fG5ld3xudWxsfG9mfHBhY2thZ2V8cHJpdmF0ZXxwcm90ZWN0ZWR8cHVibGljfHJldHVybnxzZXR8c3RhdGljfHN1cGVyfHN3aXRjaHx0aGlzfHRocm93fHRyeXx0eXBlb2Z8dmFyfHZvaWR8d2hpbGV8d2l0aHx5aWVsZClcXGIvLFxuXHQnbnVtYmVyJzogL1xcYi0/KDB4W1xcZEEtRmEtZl0rfDBiWzAxXSt8MG9bMC03XSt8XFxkKlxcLj9cXGQrKFtFZV1bKy1dP1xcZCspP3xOYU58SW5maW5pdHkpXFxiLyxcblx0Ly8gQWxsb3cgZm9yIGFsbCBub24tQVNDSUkgY2hhcmFjdGVycyAoU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIwMDg0NDQpXG5cdCdmdW5jdGlvbic6IC9bXyRhLXpBLVpcXHhBMC1cXHVGRkZGXVtfJGEtekEtWjAtOVxceEEwLVxcdUZGRkZdKig/PVxcKCkvaVxufSk7XG5cblByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2phdmFzY3JpcHQnLCAna2V5d29yZCcsIHtcblx0J3JlZ2V4Jzoge1xuXHRcdHBhdHRlcm46IC8oXnxbXi9dKVxcLyg/IVxcLykoXFxbLis/XXxcXFxcLnxbXi9cXFxcXFxyXFxuXSkrXFwvW2dpbXl1XXswLDV9KD89XFxzKigkfFtcXHJcXG4sLjt9KV0pKS8sXG5cdFx0bG9va2JlaGluZDogdHJ1ZSxcblx0XHRncmVlZHk6IHRydWVcblx0fVxufSk7XG5cblByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2phdmFzY3JpcHQnLCAnc3RyaW5nJywge1xuXHQndGVtcGxhdGUtc3RyaW5nJzoge1xuXHRcdHBhdHRlcm46IC9gKD86XFxcXFxcXFx8XFxcXD9bXlxcXFxdKSo/YC8sXG5cdFx0Z3JlZWR5OiB0cnVlLFxuXHRcdGluc2lkZToge1xuXHRcdFx0J2ludGVycG9sYXRpb24nOiB7XG5cdFx0XHRcdHBhdHRlcm46IC9cXCRcXHtbXn1dK1xcfS8sXG5cdFx0XHRcdGluc2lkZToge1xuXHRcdFx0XHRcdCdpbnRlcnBvbGF0aW9uLXB1bmN0dWF0aW9uJzoge1xuXHRcdFx0XHRcdFx0cGF0dGVybjogL15cXCRcXHt8XFx9JC8sXG5cdFx0XHRcdFx0XHRhbGlhczogJ3B1bmN0dWF0aW9uJ1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cmVzdDogUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHRcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdCdzdHJpbmcnOiAvW1xcc1xcU10rL1xuXHRcdH1cblx0fVxufSk7XG5cbmlmIChQcmlzbS5sYW5ndWFnZXMubWFya3VwKSB7XG5cdFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ21hcmt1cCcsICd0YWcnLCB7XG5cdFx0J3NjcmlwdCc6IHtcblx0XHRcdHBhdHRlcm46IC8oPHNjcmlwdFtcXHdcXFddKj8+KVtcXHdcXFddKj8oPz08XFwvc2NyaXB0PikvaSxcblx0XHRcdGxvb2tiZWhpbmQ6IHRydWUsXG5cdFx0XHRpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0LFxuXHRcdFx0YWxpYXM6ICdsYW5ndWFnZS1qYXZhc2NyaXB0J1xuXHRcdH1cblx0fSk7XG59XG5cblByaXNtLmxhbmd1YWdlcy5qcyA9IFByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0O1xuXG4vKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgIEJlZ2luIHByaXNtLWZpbGUtaGlnaGxpZ2h0LmpzXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdGlmICh0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgfHwgIXNlbGYuUHJpc20gfHwgIXNlbGYuZG9jdW1lbnQgfHwgIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRzZWxmLlByaXNtLmZpbGVIaWdobGlnaHQgPSBmdW5jdGlvbigpIHtcblxuXHRcdHZhciBFeHRlbnNpb25zID0ge1xuXHRcdFx0J2pzJzogJ2phdmFzY3JpcHQnLFxuXHRcdFx0J3B5JzogJ3B5dGhvbicsXG5cdFx0XHQncmInOiAncnVieScsXG5cdFx0XHQncHMxJzogJ3Bvd2Vyc2hlbGwnLFxuXHRcdFx0J3BzbTEnOiAncG93ZXJzaGVsbCcsXG5cdFx0XHQnc2gnOiAnYmFzaCcsXG5cdFx0XHQnYmF0JzogJ2JhdGNoJyxcblx0XHRcdCdoJzogJ2MnLFxuXHRcdFx0J3RleCc6ICdsYXRleCdcblx0XHR9O1xuXG5cdFx0aWYoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpIHsgLy8gQ2hlY2sgdG8gcHJldmVudCBlcnJvciBpbiBJRThcblx0XHRcdEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3ByZVtkYXRhLXNyY10nKSkuZm9yRWFjaChmdW5jdGlvbiAocHJlKSB7XG5cdFx0XHRcdHZhciBzcmMgPSBwcmUuZ2V0QXR0cmlidXRlKCdkYXRhLXNyYycpO1xuXG5cdFx0XHRcdHZhciBsYW5ndWFnZSwgcGFyZW50ID0gcHJlO1xuXHRcdFx0XHR2YXIgbGFuZyA9IC9cXGJsYW5nKD86dWFnZSk/LSg/IVxcKikoXFx3KylcXGIvaTtcblx0XHRcdFx0d2hpbGUgKHBhcmVudCAmJiAhbGFuZy50ZXN0KHBhcmVudC5jbGFzc05hbWUpKSB7XG5cdFx0XHRcdFx0cGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAocGFyZW50KSB7XG5cdFx0XHRcdFx0bGFuZ3VhZ2UgPSAocHJlLmNsYXNzTmFtZS5tYXRjaChsYW5nKSB8fCBbLCAnJ10pWzFdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCFsYW5ndWFnZSkge1xuXHRcdFx0XHRcdHZhciBleHRlbnNpb24gPSAoc3JjLm1hdGNoKC9cXC4oXFx3KykkLykgfHwgWywgJyddKVsxXTtcblx0XHRcdFx0XHRsYW5ndWFnZSA9IEV4dGVuc2lvbnNbZXh0ZW5zaW9uXSB8fCBleHRlbnNpb247XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXIgY29kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NvZGUnKTtcblx0XHRcdFx0Y29kZS5jbGFzc05hbWUgPSAnbGFuZ3VhZ2UtJyArIGxhbmd1YWdlO1xuXG5cdFx0XHRcdHByZS50ZXh0Q29udGVudCA9ICcnO1xuXG5cdFx0XHRcdGNvZGUudGV4dENvbnRlbnQgPSAnTG9hZGluZ+KApic7XG5cblx0XHRcdFx0cHJlLmFwcGVuZENoaWxkKGNvZGUpO1xuXG5cdFx0XHRcdHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuXHRcdFx0XHR4aHIub3BlbignR0VUJywgc3JjLCB0cnVlKTtcblxuXHRcdFx0XHR4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGlmICh4aHIucmVhZHlTdGF0ZSA9PSA0KSB7XG5cblx0XHRcdFx0XHRcdGlmICh4aHIuc3RhdHVzIDwgNDAwICYmIHhoci5yZXNwb25zZVRleHQpIHtcblx0XHRcdFx0XHRcdFx0Y29kZS50ZXh0Q29udGVudCA9IHhoci5yZXNwb25zZVRleHQ7XG5cblx0XHRcdFx0XHRcdFx0UHJpc20uaGlnaGxpZ2h0RWxlbWVudChjb2RlKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2UgaWYgKHhoci5zdGF0dXMgPj0gNDAwKSB7XG5cdFx0XHRcdFx0XHRcdGNvZGUudGV4dENvbnRlbnQgPSAn4pyWIEVycm9yICcgKyB4aHIuc3RhdHVzICsgJyB3aGlsZSBmZXRjaGluZyBmaWxlOiAnICsgeGhyLnN0YXR1c1RleHQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0Y29kZS50ZXh0Q29udGVudCA9ICfinJYgRXJyb3I6IEZpbGUgZG9lcyBub3QgZXhpc3Qgb3IgaXMgZW1wdHknO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblxuXHRcdFx0XHR4aHIuc2VuZChudWxsKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHR9O1xuXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBzZWxmLlByaXNtLmZpbGVIaWdobGlnaHQpO1xuXG59KSgpO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcHJpc21qcy9wcmlzbS5qc1xuICoqIG1vZHVsZSBpZCA9IDE2MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjx0YWJsZSBjbGFzcz1zZ19jLWFwaS10YWJsZT4gPHRyPiA8dGg+IE5hbWUgPC90aD4gPHRoPiBUeXBlIDwvdGg+IDx0aD4gUmVxdWlyZWQgPC90aD4gPHRoPiBEZWZhdWx0IDwvdGg+IDx0aD4gRGVzY3JpcHRpb24gPC90aD4gPC90cj4gPHRyIHYtZm9yPVxcXCJpdGVtIGluIGl0ZW1zXFxcIj4gPHRkPnt7aXRlbS5uYW1lfX08L3RkPiA8dGQ+e3tpdGVtLnR5cGV9fTwvdGQ+IDx0ZD57e2l0ZW0uaXNSZXF1aXJlZH19PC90ZD4gPHRkPnt7aXRlbS5kZWZhdWx0fX08L3RkPiA8dGQ+e3tpdGVtLmRlc2N9fTwvdGQ+IDwvdHI+IDwvdGFibGU+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vZGV2L3NyYy9jb21wb25lbnRzL2FwaS10YWJsZS9hcGktdGFibGUuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE2MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxuYXYgY2xhc3M9XFxcInNnX2MtbmF2IGh5X3UtaGlkZSBoeV91LXNob3dAbWRcXFwiPiA8aDIgY2xhc3M9c2dfYy1uYXZfX3NlY3Rpb24+Q09NUE9ORU5UUzwvaDI+IDx1bCBjbGFzcz1oeV9vLWxpc3QgQGNsaWNrPWhpZGVOYXY+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnLycsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gR2V0IFN0YXJ0ZWQgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9hbGVydCcsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gQWxlcnQgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9zcGlubmVyJywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBTcGlubmVyIDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvc3RlcC10cmFja2VyJywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBTdGVwIFRyYWNrZXIgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy90YWJzJywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBUYWJzIDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvb3ZlcmxheScsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gT3ZlcmxheSA8L2E+IDwvbGk+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL2xlZ2FsJywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBMZWdhbCA8L2E+IDwvbGk+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL2NvbGxhcHNhYmxlLXBhbmVsJywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBDb2xsYXBzYWJsZSBQYW5lbCA8L2E+IDwvbGk+IDwvdWw+IDxoMiBjbGFzcz1zZ19jLW5hdl9fc2VjdGlvbj5ESVJFQ1RJVkVTPC9oMj4gPHVsIGNsYXNzPWh5X28tbGlzdD4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvb3ZlcmxheS1vcGVuZXInLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IE92ZXJsYXkgT3BlbmVyIDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvc2V0LWZvY3VzJywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBTZXQgRm9jdXMgPC9hPiA8L2xpPiA8L3VsPiA8L25hdj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9kZXYvc3JjL2NvbXBvbmVudHMvc2lkZS1uYXYvc2lkZS1uYXYuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE2M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxoZWFkZXIgY2xhc3M9c2dfYy1zaXRlLWhlYWRlcj4gPGRpdiBjbGFzcz1zZ19jLXNpdGUtaGVhZGVyX19jb250YWluZXI+IDxidXR0b24gQGNsaWNrPXRvZ2dsZU5hdiBjbGFzcz1cXFwiaHlfdS1oaWRlQG1kIGpzLWFjdGl2ZSBzZ19jLXNpdGUtaGVhZGVyX190b2dnbGVidG5cXFwiIHR5cGU9YnV0dG9uIHJvbGU9YnV0dG9uPiA8c3BhbiBjbGFzcz1cXFwiXFxcIj48aSBjbGFzcz1cXFwiaHlfYy1pY29uIGh5X2MtaWNvbi0taGFtYnVyZ2VyXFxcIj48L2k+PC9zcGFuPiA8L2J1dHRvbj4gPGEgaHJlZj0vID4gPGltZyBjbGFzcz1sb2dvIHNyYz1cIiArIHJlcXVpcmUoXCIuL2xvZ28ucG5nXCIpICsgXCIgYWx0PUxvZ28+IDwvYT4gPC9kaXY+IDwvaGVhZGVyPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL2Rldi9zcmMvY29tcG9uZW50cy9zaXRlLWhlYWRlci9zaXRlLWhlYWRlci5odG1sXG4gKiogbW9kdWxlIGlkID0gMTY0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+QWxlcnQ8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPGFsZXJ0IHR5cGU9ZXJyb3I+VGhpcyBpcyBhbiBlcnJvciBhbGVydC48L2FsZXJ0PiA8YWxlcnQgdHlwZT1pbmZvPlRoaXMgaXMgYW4gaW5mbyBhbGVydC48L2FsZXJ0PiA8YWxlcnQgdHlwZT1zdWNjZXNzPlRoaXMgaXMgYSBzdWNjZXNzIGFsZXJ0LjwvYWxlcnQ+IDxhbGVydCB0eXBlPXN1Y2Nlc3MgOmRpc21pc3NpYmxlPWZhbHNlPlRoaXMgaXMgbm90IGEgZGlzbWlzc2libGUgYWxlcnQuPC9hbGVydD4gPGFsZXJ0IHR5cGU9c3VjY2VzcyA6b24tY2xvc2VkPWRpc21pc3NDYWxsQmFjaz5UaGlzIGlzIGFuIGFsZXJ0IHdpdGggY2FsbGJhY2suPC9hbGVydD4gPGFsZXJ0IHR5cGU9aW5mbyA6dGltZW91dD01MDAwPlRoaXMgYWxlcnQgc2hvdWxkIHRpbWVvdXQgaW4gNSBzZWNvbmRzLjwvYWxlcnQ+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4mbHQ7YWxlcnQgdHlwZT1cXFwiZXJyb3JcXFwiJmd0O1RoaXMgaXMgYW4gZXJyb3IgYWxlcnQuJmx0Oy9hbGVydCZndDtcXG4mbHQ7YWxlcnQgdHlwZT1cXFwiaW5mb1xcXCImZ3Q7VGhpcyBpcyBhbiBpbmZvIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuJmx0O2FsZXJ0IHR5cGU9XFxcInN1Y2Nlc3NcXFwiJmd0O1RoaXMgaXMgYSBzdWNjZXNzIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuJmx0O2FsZXJ0IHR5cGU9XFxcInN1Y2Nlc3NcXFwiIDpkaXNtaXNzaWJsZT1cXFwiZmFsc2VcXFwiJmd0O1RoaXMgaXMgbm90IGEgZGlzbWlzc2libGUgYWxlcnQuJmx0Oy9hbGVydCZndDtcXG4mbHQ7YWxlcnQgdHlwZT1cXFwic3VjY2Vzc1xcXCIgOm9uLWNsb3NlZD1cXFwiZGlzbWlzc0NhbGxCYWNrXFxcIiZndDtUaGlzIGlzIGFuIGFsZXJ0IHdpdGggY2FsbGJhY2suJmx0Oy9hbGVydCZndDtcXG4mbHQ7YWxlcnQgdHlwZT1cXFwic3VjY2Vzc1xcXCIgOnRpbWVvdXQ9XFxcIjUwMDBcXFwiJmd0O1RoaXMgYWxlcnQgc2hvdWxkIHRpbWVvdXQgaW4gNSBzZWNvbmRzLiZsdDsvYWxlcnQmZ3Q7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vZGV2L3NyYy92aWV3cy9hbGVydC1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE2NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPkNvbGxhcHNhYmxlIFBhbmVsPC9oMj4gPGhyIGNsYXNzPWh5X3Utc3BhY2UtbWItMj4gPGRpdiBjbGFzcz1cXFwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxkaXYgY2xhc3M9c2dfYy1kZW1vX19jb250YWluZXI+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cXFwiUGFuZWwgMVxcXCIgOmlzLW9wZW49dHJ1ZT4gUGFuZWwgMSBjb250ZW50IDwvY29sbGFwc2FibGUtcGFuZWw+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cXFwiUGFuZWwgMlxcXCI+IFBhbmVsIDIgY29udGVudCA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuJmx0O2NvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVxcXCJQYW5lbCAxXFxcIiA6aXMtb3Blbj1cXFwidHJ1ZVxcXCImZ3Q7XFxuIFBhbmVsIDEgY29udGVudFxcbiZsdDsvY29sbGFwc2FibGUtcGFuZWwmZ3Q7XFxuJmx0O2NvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVxcXCJQYW5lbCAyXFxcIiZndDtcXG4gUGFuZWwgMiBjb250ZW50XFxuJmx0Oy9jb2xsYXBzYWJsZS1wYW5lbCZndDtcXG4gICAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL2NvbGxhcHNhYmxlLXBhbmVsLXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTY2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+R2V0dGluZyBTdGFydGVkPC9oMj4gPGhyIGNsYXNzPWh5X3Utc3BhY2UtbWItMj4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLTUgaHlfdC1ncmV5XFxcIj5DRE48L2gzPiA8cD4gLi4uIDwvcD4gPC9kaXY+IDwvZGl2Pjwvc2VjdGlvbj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2Rldi9zcmMvdmlld3MvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMTY3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+TGVnYWwgU3lzdGVtPC9oMj4gPGhyIGNsYXNzPWh5X3Utc3BhY2UtbWItMj4gPGRpdiBjbGFzcz1cXFwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxkaXYgY2xhc3M9c2dfYy1kZW1vX19jb250YWluZXI+IDxwIGNsYXNzPVxcXCJoeV9jLWNvcHkgaHlfYy1jb3B5LS1ib2R5IGh5X3QtZ3JleVxcXCI+IExvcmVtIGlwc3VtPGxlZ2FsLWNvdW50ZXIgdi1vdmVybGF5LW9wZW5lcj1sZWdhbC1vdmVybGF5IGxlZ2FsLWtleT1ocy1yZWZlcnJhbC10ZXJtcyBsZWdhbC1sYW5nPWVuIGxlZ2FsLXJlZ2lvbj1iYz48L2xlZ2FsLWNvdW50ZXI+IGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQsIHNlZCBkbyBlaXVzbW9kIHRlbXBvciBpbmNpZGlkdW50IHV0IGxhYm9yZSBldCBkb2xvcmUgbWFnbmEgYWxpcXVhLiA8bGVnYWwtY291bnRlciB2LW92ZXJsYXktb3BlbmVyPWxlZ2FsLW92ZXJsYXkgbGVnYWwta2V5PTEteWVhci1vZmZlci1zdGltIGxlZ2FsLWxhbmc9ZW4gbGVnYWwtcmVnaW9uPWJjPjwvbGVnYWwtY291bnRlcj4gPC9wPiA8L2Rpdj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPGxlZ2FsLWNvbnRhaW5lcj48L2xlZ2FsLWNvbnRhaW5lcj4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiZsdDtsZWdhbC1jb3VudGVyXFxuICBsZWdhbC1rZXk9XFxcImhzLXJlZmVycmFsLXRlcm1zXFxcIlxcbiAgbGVnYWwtbGFuZz1cXFwiZW5cXFwiXFxuICBsZWdhbC1yZWdpb249XFxcImJjXFxcIlxcbiZsdDsvbGVnYWwtY291bnRlciZndDtcXG4mbHQ7bGVnYWwtY29udGFpbmVyJmd0OyZsdDsvbGVnYWwtY29udGFpbmVyJmd0O1xcbiAgICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPWphdmFzY3JpcHQ+IDxwcmU+XFxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWphdmFzY3JpcHQ+XFxubGV0IHZtID0gbmV3IFZ1ZSh7XFxuIGVsOiAnYm9keScsXFxuIGRhdGEoKSB7XFxuICAgcmV0dXJuIHtcXG4gICAgIGxpZ2VyRW5kUG9pbnQ6ICdodHRwczovL2FwaS5jbXMudGVsdXMuY29tL2xlZ2FscycsXFxuICAgICBsaWdlckFwcGxpY2F0aW9uS2V5OiAnYjk3MzhkNjdiODlkZmM3ODI3NDZkNGE5Y2Y0YTEwOTMnXFxuICAgfTtcXG4gfSxcXG4gY29tcG9uZW50czoge1xcbiAgIExlZ2FsQ291bnRlcixcXG4gICBMZWdhbENvbnRhaW5lclxcbiB9XFxufSk7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJOiBMZWdhbCBDb3VudGVyPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vZGV2L3NyYy92aWV3cy9sZWdhbC1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE2OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPk92ZXJsYXkgU3lzdGVtPC9oMj4gPGhyIGNsYXNzPWh5X3Utc3BhY2UtbWItMj4gPGRpdiBjbGFzcz1cXFwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxkaXYgY2xhc3M9c2dfYy1kZW1vX19jb250YWluZXI+IDxwPiA8YnV0dG9uIHYtb3ZlcmxheS1vcGVuZXI9b3ZlcmxheS0xIGNsYXNzPVxcXCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tbGluayBoeV90LXB1cnBsZVxcXCIgdHlwZT1idXR0b24gcm9sZT1idXR0b24+IE9wZW4gb3ZlcmxheSAjMSA8aSBjbGFzcz1cXFwiaHlfYy1pY29uIGh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZCBoeV9jLWJ1dHRvbl9faWNvblxcXCI+PC9pPiA8L2J1dHRvbj4gPC9wPiA8cD4gPGJ1dHRvbiB2LW92ZXJsYXktb3BlbmVyPW92ZXJsYXktMiBjbGFzcz1cXFwiaHlfYy1idXR0b24gaHlfYy1idXR0b24tLWxpbmsgaHlfdC1wdXJwbGVcXFwiIHR5cGU9YnV0dG9uIHJvbGU9YnV0dG9uPiBPcGVuIG92ZXJsYXkgIzIgPGkgY2xhc3M9XFxcImh5X2MtaWNvbiBoeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQgaHlfYy1idXR0b25fX2ljb25cXFwiPjwvaT4gPC9idXR0b24+IDwvcD4gPG92ZXJsYXktY29udGFpbmVyPiA8b3ZlcmxheSBvdmVybGF5LWtleT1vdmVybGF5LTE+IDxoNCBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFxcXCIgc2xvdD1vdmVybGF5LWhlYWRlcj5UaGlzIGlzIG92ZXJsYXkgIzE8L2g0PiA8YXJ0aWNsZSBzbG90PW92ZXJsYXktYm9keT4gT3ZlcmxheSAjMSBib2R5IDwvYXJ0aWNsZT4gPC9vdmVybGF5PiA8b3ZlcmxheSBvdmVybGF5LWtleT1vdmVybGF5LTI+IDxoNCBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFxcXCIgc2xvdD1vdmVybGF5LWhlYWRlcj5UaGlzIGlzIG92ZXJsYXkgIzI8L2g0PiA8YXJ0aWNsZSBzbG90PW92ZXJsYXktYm9keT4gT3ZlcmxheSAjMiBib2R5IDwvYXJ0aWNsZT4gPC9vdmVybGF5PiA8L292ZXJsYXktY29udGFpbmVyPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuJmx0O292ZXJsYXktY29udGFpbmVyJmd0O1xcbiAmbHQ7b3ZlcmxheSBvdmVybGF5LWtleT1cXFwib3ZlcmxheS0xXFxcIiZndDtcXG4gICAmbHQ7aDQgIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XFxcIiBzbG90PVxcXCJvdmVybGF5LWhlYWRlclxcXCImZ3Q7XFxuICAgVGhpcyBpcyBvdmVybGF5ICMxXFxuICAgJmx0Oy9oNCZndDtcXG4gICAmbHQ7YXJ0aWNsZSBzbG90PVxcXCJvdmVybGF5LWJvZHlcXFwiJmd0O1xcbiAgICAgT3ZlcmxheSAjMSBib2R5XFxuICAgJmx0Oy9hcnRpY2xlJmd0O1xcbiAmbHQ7L292ZXJsYXkmZ3Q7XFxuICZsdDtvdmVybGF5IG92ZXJsYXkta2V5PVxcXCJvdmVybGF5LTJcXFwiJmd0O1xcbiAgICZsdDtoNCAgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcXFwiIHNsb3Q9XFxcIm92ZXJsYXktaGVhZGVyXFxcIiZndDtcXG4gICBUaGlzIGlzIG92ZXJsYXkgIzFcXG4gICAmbHQ7L2g0Jmd0O1xcbiAgICZsdDthcnRpY2xlIHNsb3Q9XFxcIm92ZXJsYXktYm9keVxcXCImZ3Q7XFxuICAgICBPdmVybGF5ICMyIGJvZHlcXG4gICAmbHQ7L2FydGljbGUmZ3Q7XFxuICZsdDsvb3ZlcmxheSZndDtcXG4mbHQ7L292ZXJsYXktY29udGFpbmVyJmd0O1xcbiAgICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiPkFQSTwvaDM+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxhcGktdGFibGUgOml0ZW1zPWFwaUl0ZW1zPjwvYXBpLXRhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2Rldi9zcmMvdmlld3Mvb3ZlcmxheS1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE2OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPlNwaW5uZXI8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPGxhYmVsIGNsYXNzPVxcXCJoeV9jLWNvbnRyb2wgaHlfYy1jb250cm9sLS1jaGVja2JveFxcXCI+IDxzcGFuIGNsYXNzPWh5X2MtY29udHJvbF9fbGFiZWwtdGV4dD5GdWxsIFNjcmVlbjwvc3Bhbj4gPGlucHV0IHR5cGU9Y2hlY2tib3ggdi1tb2RlbD1pc0Z1bGxTY3JlZW4gLz4gPGRpdiBjbGFzcz1oeV9jLWNvbnRyb2xfX2luZGljYXRvcj48L2Rpdj4gPC9sYWJlbD4gPGJ1dHRvbiBAY2xpY2s9c2hvd1NwaW5uZXIgY2xhc3M9XFxcImh5X2MtYnV0dG9uIGh5X2MtYnV0dG9uLS1yYWlzZWQgaHlfdC1ncmVlblxcXCIgdHlwZT1idXR0b24+IFNob3cgU3Bpbm5lciA8L2J1dHRvbj4gPHNwaW5uZXIgOmZ1bGwtc2NyZWVuPWlzRnVsbFNjcmVlbiA6dGV4dD1tc2c+PC9zcGlubmVyPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuJmx0O3NwaW5uZXIgdGV4dD1cXFwiSSB3aWxsIGNsb3NlIGluIDMgc2Vjb25kc1xcXCIgOmZ1bGwtc2NyZWVuPVxcXCJ0cnVlXFxcIiZndDsmbHQ7L3NwaW5uZXImZ3Q7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vZGV2L3NyYy92aWV3cy9zcGlubmVyLXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTcwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+U3RlcCBUcmFja2VyPC9oMj4gPGhyIGNsYXNzPWh5X3Utc3BhY2UtbWItMj4gPGRpdiBjbGFzcz1cXFwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxkaXYgY2xhc3M9c2dfYy1kZW1vX19jb250YWluZXI+IDxzdGVwLXRyYWNrZXIgOmN1cnJlbnQtc3RlcD1zdGVwVHJhY2tlckN1cnJlbnRTdGVwIDpjb25maWc9c3RlcFRyYWNrZXJDb25maWc+PC9zdGVwLXRyYWNrZXI+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiZsdDtzdGVwLXRyYWNrZXJcXG46Y3VycmVudC1zdGVwPVxcXCJzdGVwVHJhY2tlckN1cnJlbnRTdGVwXFxcIlxcbjpjb25maWc9XFxcInN0ZXBUcmFja2VyQ29uZmlnXFxcIiZndDtcXG4mbHQ7L3N0ZXAtdHJhY2tlciZndDtcXG4gICAgICAgICA8L2NvZGU+XFxuICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9amF2YXNjcmlwdD4gPHByZT5cXG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtanM+XFxubGV0IHN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAyO1xcbmxldCBzdGVwVHJhY2tlckNvbmZpZyA9IHtcXG4gIGlzQ2xpY2thYmxlOiB0cnVlLFxcbiAgc3RlcHM6IFtcXG4gICAge1xcbiAgICAgIHRpdGxlOiAnU3RlcCBBJyxcXG4gICAgICBsaW5rOiAnJyxcXG4gICAgICBvbkNsaWNrSGFuZGxlcjogKGV2ZW50KSA9PiB7XFxuICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAwO1xcbiAgICAgIH1cXG4gICAgfSwge1xcbiAgICAgIHRpdGxlOiAnU3RlcCBCJyxcXG4gICAgICBsaW5rOiAnJyxcXG4gICAgICBvbkNsaWNrSGFuZGxlcjogKGV2ZW50KSA9PiB7XFxuICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAxO1xcbiAgICAgIH1cXG4gICAgfSwge1xcbiAgICAgIHRpdGxlOiAnU3RlcCBDJyxcXG4gICAgICBsaW5rOiAnJyxcXG4gICAgICBvbkNsaWNrSGFuZGxlcjogKGV2ZW50KSA9PiB7XFxuICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAyO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgXVxcbn07XFxubGV0IHZtID0gbmV3IFZ1ZSh7XFxuICBlbDogJ2JvZHknLFxcbiAgZGF0YToge1xcbiAgICBzdGVwVHJhY2tlckNvbmZpZyxcXG4gICAgc3RlcFRyYWNrZXJDdXJyZW50U3RlcFxcbn0sXFxuICBjb21wb25lbnRzOiB7XFxuICAgIFN0ZXBUcmFja2VyXFxuICB9XFxufSk7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vZGV2L3NyYy92aWV3cy9zdGVwLXRyYWNrZXItcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxNzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5UYWI8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPHRhYnM+IDx0YWIgbGFiZWw9XFxcIlRhYiAxXFxcIj4gPHA+IFRhYiAxIGNvbnRlbnQgPC9wPiA8L3RhYj4gPHRhYiBsYWJlbD1cXFwiVGFiIDJcXFwiPiA8cD4gVGFiIDIgY29udGVudCA8L3A+IDwvdGFiPiA8dGFiIGxhYmVsPVxcXCJUYWIgM1xcXCIgOmlzLWRpc2FibGVkPXRydWU+IDxwPiBUYWIgMyBjb250ZW50IDwvcD4gPC90YWI+IDwvdGFicz4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiZsdDt0YWJzJmd0O1xcbiAmbHQ7dGFiIGxhYmVsPVxcXCJUYWIgMVxcXCImZ3Q7XFxuICAgJmx0O3AmZ3Q7XFxuICAgICBUYWIgMSBjb250ZW50XFxuICAgJmx0Oy9wJmd0O1xcbiAmbHQ7L3RhYiZndDtcXG4gJmx0O3RhYiBsYWJlbD1cXFwiVGFiIDJcXFwiJmd0O1xcbiAgICZsdDtwJmd0O1xcbiAgICAgVGFiIDIgY29udGVudFxcbiAgICZsdDsvcCZndDtcXG4gJmx0Oy90YWImZ3Q7XFxuICZsdDt0YWIgbGFiZWw9XFxcIlRhYiAzXFxcIiA6aXMtZGlzYWJsZWQ9XFxcInRydWVcXFwiJmd0O1xcbiAgICZsdDtwJmd0O1xcbiAgICAgVGFiIDMgY29udGVudFxcbiAgICZsdDsvcCZndDtcXG4gJmx0Oy90YWImZ3Q7XFxuJmx0Oy90YWJzJmd0O1xcbiAgICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiPkFQSTwvaDM+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxhcGktdGFibGUgOml0ZW1zPWFwaUl0ZW1zPjwvYXBpLXRhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2Rldi9zcmMvdmlld3MvdGFicy1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE3MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgdi1pZj1pc1Zpc2libGUgdHJhbnNpdGlvbj1mYWRlIGNsYXNzPWMtYWxlcnQgOmNsYXNzPVxcXCInYy1hbGVydC0tJyArIHR5cGVcXFwiIDpjbGFzcz1cXFwieyAnYy1hbGVydC0tZGlzbWlzc2libGUnOiBkaXNtaXNzaWJsZSB9XFxcIiByb2xlPWFsZXJ0PiA8YnV0dG9uIHYtaWY9ZGlzbWlzc2libGUgQGNsaWNrPWRpc21pc3MgdHlwZT1idXR0b24gY2xhc3M9Yy1hbGVydF9fY2xvc2UtYnV0dG9uIGFyaWEtbGFiZWw9Q2xvc2U+IDxzcGFuIGFyaWEtaGlkZGVuPXRydWU+JnRpbWVzOzwvc3Bhbj4gPHNwYW4gY2xhc3M9aHlfdS1pbnZpc2libGU+Q2xvc2U8L3NwYW4+IDwvYnV0dG9uPiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3NyYy9jb21wb25lbnRzL2FsZXJ0L2FsZXJ0Lmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxNzNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPWMtY29sbGFwc2FibGUtcGFuZWw+IDxoMyBAY2xpY2sucHJldmVudD10b2dnbGVPcGVuIDpjbGFzcz1cXFwie1xcbiAgICAgICdjLWNvbGxhcHNhYmxlLXBhbmVsX19oZWFkZXItLW9wZW4nOiBpc09wZW5cXG4gICAgfVxcXCIgY2xhc3M9XFxcImMtY29sbGFwc2FibGUtcGFuZWxfX2hlYWRlciBoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCIgdi1odG1sPWxhYmVsPiA8L2gzPiA8ZGl2IGNsYXNzPWMtY29sbGFwc2FibGUtcGFuZWxfX2JvZHkgOmNsYXNzPVxcXCJ7XFxuICAgICdjLWNvbGxhcHNhYmxlLXBhbmVsX19ib2R5LS1vcGVuJzogaXNPcGVuXFxuICB9XFxcIj4gPHNsb3Q+PC9zbG90PiA8L2Rpdj4gPC9kaXY+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3JjL2NvbXBvbmVudHMvY29sbGFwc2FibGUtcGFuZWwvY29sbGFwc2FibGUtcGFuZWwuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE3NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy1sZWdhbC1jb250YWluZXI+IDxvbCBjbGFzcz1jLWxlZ2FsLWNvbnRhaW5lcl9fb3JkZXJlZC1saXN0PiA8bGkgdi1zZXQtZm9jdXM9bGVnYWwuaXNTZWxlY3RlZCBjbGFzcz1jLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVtIDpjbGFzcz1cXFwie1xcbiAgICAgICdjLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVtLS1hY3RpdmUnOiBsZWdhbC5pc1NlbGVjdGVkXFxuICAgIH1cXFwiIHYtZm9yPVxcXCJsZWdhbCBpbiBpbmRleGVkTGVnYWxzXFxcIiB2LWh0bWw9bGVnYWwuY29udGVudD4gPC9saT4gPC9vbD4gPHVsIGNsYXNzPWMtbGVnYWwtY29udGFpbmVyX191bm9yZGVyZWQtbGlzdD4gPGxpIGNsYXNzPWMtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0gdi1mb3I9XFxcImxlZ2FsIGluIG5vbkluZGV4ZWRMZWdhbHNcXFwiIHYtaHRtbD1sZWdhbC5jb250ZW50PiA8L2xpPiA8L3VsPiA8L2Rpdj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb250YWluZXIuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE3NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdXAgY2xhc3M9Yy1sZWdhbC1zdXA+IDxhIGhyZWY9IyBAY2xpY2sucHJldmVudD1jbGlja0hhbmRsZXI+IHt7bGVnYWxDb3VudGVyfX0gPC9hPiA8L3N1cD4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb3VudGVyLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxNzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPWMtb3ZlcmxheS1jb250YWluZXI+IDxkaXYgY2xhc3M9Yy1vdmVybGF5LWNvbnRhaW5lcl9fY3VydGFpbiA6Y2xhc3M9XFxcIntcXG4gICAgICAgICdjLW92ZXJsYXktY29udGFpbmVyX19jdXJ0YWluLS1hY3RpdmUnOiBpc1Zpc2libGVcXG4gICAgfVxcXCIgQGNsaWNrLnByZXZlbnQ9XFxcImlzVmlzaWJsZT1mYWxzZVxcXCI+IDwvZGl2PiA8ZGl2IGNsYXNzPWMtb3ZlcmxheS1jb250YWluZXJfX292ZXJsYXlzIDpjbGFzcz1cXFwie1xcbiAgICAgICAgJ2Mtb3ZlcmxheS1jb250YWluZXJfX292ZXJsYXlzLS1hY3RpdmUnOiBpc1Zpc2libGVcXG4gICAgfVxcXCI+IDxzbG90Pjwvc2xvdD4gPC9kaXY+IDwvZGl2PiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS1jb250YWluZXIuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE3N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxhcnRpY2xlIGNsYXNzPWMtb3ZlcmxheSB2LXNob3c9aXNWaXNpYmxlPiA8ZGl2IGNsYXNzPWMtb3ZlcmxheV9fYm9keT4gPHNsb3QgbmFtZT1vdmVybGF5LWJvZHk+PC9zbG90PiA8L2Rpdj4gPGhlYWRlciBjbGFzcz1jLW92ZXJsYXlfX2hlYWRlcj4gPHNsb3QgbmFtZT1vdmVybGF5LWhlYWRlcj48L3Nsb3Q+IDxidXR0b24gdHlwZT1idXR0b24gY2xhc3M9Yy1vdmVybGF5X19jbG9zZS1idXR0b24gYXJpYS1sYWJlbD1DbG9zZSB0YWJpbmRleD0wIEBjbGljay5wcmV2ZW50PWNsb3NlT3ZlcmxheT48L2J1dHRvbj4gPC9oZWFkZXI+IDwvYXJ0aWNsZT4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXkuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE3OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgdi1zaG93PWFjdGl2ZSBjbGFzcz1jLXNwaW5uZXIgOmNsYXNzPVxcXCJ7ICdjLXNwaW5uZXItLWZ1bGxzY3JlZW4nOiBmdWxsU2NyZWVuIH1cXFwiPiA8c3ZnIHZpZXdCb3g9XFxcIjAgMCAxMDAgMTAwXFxcIiB3aWR0aD0wIGhlaWdodD0wPiA8Y2lyY2xlIHN0cm9rZS13aWR0aD00IGZpbGw9bm9uZSBzdHJva2UtbGluZWNhcD1yb3VuZCBzdHJva2UtZGFzaG9mZnNldD0wIGN4PTUwIGN5PTUwIHI9MjA+PC9jaXJjbGU+IDwvc3ZnPiA8cCBjbGFzcz1cXFwiYy1zcGlubmVyX190ZXh0IGh5X2MtY29weSBoeV91LWZvbnQtd2VpZ2h0LS1tZWRpdW1cXFwiIHYtaWY9ISF0ZXh0Pnt7dGV4dH19PC9wPiA8L2Rpdj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zcmMvY29tcG9uZW50cy9zcGlubmVyL3NwaW5uZXIuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE3OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjx1bCBjbGFzcz1jLXN0ZXAtdHJhY2tlcj4gPGxpIGNsYXNzPWMtc3RlcC10cmFja2VyX19zdGVwIDpjbGFzcz1cXFwie1xcbiAgICAgICdjLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGUnOiBjdXJyZW50U3RlcCA+ICRpbmRleCxcXG4gICAgICAnYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWFjdGl2ZSc6IGN1cnJlbnRTdGVwID09PSAkaW5kZXgsXFxuICAgICAgJ2Mtc3RlcC10cmFja2VyX19zZXRwLS1jbGlja2FibGUnOiAoY3VycmVudFN0ZXAgPiAkaW5kZXggJiYgY29uZmlnLmlzQ2xpY2thYmxlKVxcbiAgfVxcXCIgdi1mb3I9XFxcInN0ZXAgaW4gY29uZmlnLnN0ZXBzXFxcIj4gPGEgOmhyZWY9XFxcInN0ZXAubGluayB8fCBmYWxzZVxcXCIgQGNsaWNrPVxcXCJjbGlja0hhbmRsZXIoJGV2ZW50LCBzdGVwLCAkaW5kZXgpXFxcIiB2LWlmPWNvbmZpZy5pc0NsaWNrYWJsZT4gPHNwYW4gY2xhc3M9Yy1zdGVwLXRyYWNrZXJfX2ljb24+PC9zcGFuPiA8c3BhbiBjbGFzcz1jLXN0ZXAtdHJhY2tlcl9fbGFiZWw+e3skaW5kZXggKyAxfX0uIHt7c3RlcC50aXRsZX19PC9zcGFuPiA8L2E+IDxzcGFuIHYtZWxzZSBjbGFzcz1jLXN0ZXAtdHJhY2tlcl9faWNvbj48L3NwYW4+IDxzcGFuIHYtZWxzZSBjbGFzcz1jLXN0ZXAtdHJhY2tlcl9fbGFiZWw+e3skaW5kZXggKyAxfX0uIHt7c3RlcC50aXRsZX19PC9zcGFuPiA8L2xpPiA8L3VsPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3NyYy9jb21wb25lbnRzL3N0ZXAtdHJhY2tlci9zdGVwLXRyYWNrZXIuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE4MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy10YWJzX19wYW5lIDpjbGFzcz1cXFwie1xcbiAgICAnYy10YWJzX19wYW5lLS1hY3RpdmUnOiBpc1Zpc2libGVcXG4gIH1cXFwiPiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3NyYy9jb21wb25lbnRzL3RhYi90YWIuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE4MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy10YWJzPiA8dWwgY2xhc3M9Yy10YWJzX19oZWFkZXI+IDxsaSB2LWZvcj1cXFwidGFiIGluIHRhYnNcXFwiIGNsYXNzPWMtdGFic19faGVhZGVyLWl0ZW0gOmNsYXNzPVxcXCJ7XFxuICAgICAgICAgICAgICAgICdjLXRhYnNfX2hlYWRlci1pdGVtLS1hY3RpdmUnOiAoJGluZGV4ID09PSBhY3RpdmVUYWJJbmRleCksXFxuICAgICAgICAgICAgICAgICdjLXRhYnNfX2hlYWRlci1pdGVtLS1kaXNhYmxlZCc6IHRhYi5pc0Rpc2FibGVkXFxuICAgICAgICAgICAgICB9XFxcIiA6ZGlzYWJsZWQ9dGFiLmRpc2FibGVkPiA8YSBocmVmPSMgQGNsaWNrLnByZXZlbnQ9XFxcImhhbmRsZVRhYkxpc3RDbGljaygkaW5kZXgsIHRhYilcXFwiIHYtaHRtbD10YWIubGFiZWw+PC9hPiA8L2xpPiA8L3VsPiA8ZGl2IGNsYXNzPWMtdGFic19fYm9keT4gPHNsb3Q+PC9zbG90PiA8L2Rpdj4gPC9kaXY+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYnMuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE4MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXIhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhc2FzcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zaWRlLW5hdi5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvY29tcG9uZW50cy9zaWRlLW5hdi9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAxODNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc2l0ZS1oZWFkZXIuaHRtbFwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9kZXYvc3JjL2NvbXBvbmVudHMvc2l0ZS1oZWFkZXIvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMTg0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2FsZXJ0LXBhZ2UudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9hbGVydC1wYWdlLnZ1ZVwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9kZXYvc3JjL3ZpZXdzL2FsZXJ0LXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTg1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2NvbGxhcHNhYmxlLXBhbmVsLXBhZ2UudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9jb2xsYXBzYWJsZS1wYW5lbC1wYWdlLnZ1ZVwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9kZXYvc3JjL3ZpZXdzL2NvbGxhcHNhYmxlLXBhbmVsLXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTg2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9pbmRleC52dWVcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vZGV2L3NyYy92aWV3cy9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAxODdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vbGVnYWwtcGFnZS52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2xlZ2FsLXBhZ2UudnVlXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvdmlld3MvbGVnYWwtcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxODhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vb3ZlcmxheS1wYWdlLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vb3ZlcmxheS1wYWdlLnZ1ZVwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9kZXYvc3JjL3ZpZXdzL292ZXJsYXktcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxODlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vc3Bpbm5lci1wYWdlLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vc3Bpbm5lci1wYWdlLnZ1ZVwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9kZXYvc3JjL3ZpZXdzL3NwaW5uZXItcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxOTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vc3RlcC10cmFja2VyLXBhZ2UudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9zdGVwLXRyYWNrZXItcGFnZS52dWVcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vZGV2L3NyYy92aWV3cy9zdGVwLXRyYWNrZXItcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxOTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vdGFicy1wYWdlLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vdGFicy1wYWdlLnZ1ZVwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9kZXYvc3JjL3ZpZXdzL3RhYnMtcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxOTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vYWxlcnQuaHRtbFwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvY29tcG9uZW50cy9hbGVydC9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAxOTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vY29sbGFwc2FibGUtcGFuZWwuaHRtbFwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvY29tcG9uZW50cy9jb2xsYXBzYWJsZS1wYW5lbC9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAxOTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY29udGFpbmVyLnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vbGVnYWwtY29udGFpbmVyLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9sZWdhbC1jb250YWluZXIuaHRtbFwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb250YWluZXIudnVlXG4gKiogbW9kdWxlIGlkID0gMTk1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2xlZ2FsLWNvdW50ZXIudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9sZWdhbC1jb3VudGVyLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9sZWdhbC1jb3VudGVyLmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY291bnRlci52dWVcbiAqKiBtb2R1bGUgaWQgPSAxOTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vb3ZlcmxheS1jb250YWluZXIudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9vdmVybGF5LWNvbnRhaW5lci52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vb3ZlcmxheS1jb250YWluZXIuaHRtbFwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXktY29udGFpbmVyLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhc2FzcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vb3ZlcmxheS52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vb3ZlcmxheS5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxOThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3Bpbm5lci5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL3NwaW5uZXIvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMTk5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3N0ZXAtdHJhY2tlci5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL3N0ZXAtdHJhY2tlci9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vdGFiLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi90YWIuaHRtbFwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvY29tcG9uZW50cy90YWIvdGFiLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIwMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhc2FzcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi90YWJzLnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vdGFicy52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vdGFicy5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL3RhYi90YWJzLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIwMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiB2dWUtcm91dGVyIHYwLjcuMTNcbiAqIChjKSAyMDE2IEV2YW4gWW91XG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgZ2xvYmFsLlZ1ZVJvdXRlciA9IGZhY3RvcnkoKTtcbn0odGhpcywgZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbiAgdmFyIGJhYmVsSGVscGVycyA9IHt9O1xuXG4gIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIFRhcmdldChwYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSkge1xuICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgdGhpcy5tYXRjaGVyID0gbWF0Y2hlcjtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gIH1cblxuICBUYXJnZXQucHJvdG90eXBlID0ge1xuICAgIHRvOiBmdW5jdGlvbiB0byh0YXJnZXQsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgZGVsZWdhdGUgPSB0aGlzLmRlbGVnYXRlO1xuXG4gICAgICBpZiAoZGVsZWdhdGUgJiYgZGVsZWdhdGUud2lsbEFkZFJvdXRlKSB7XG4gICAgICAgIHRhcmdldCA9IGRlbGVnYXRlLndpbGxBZGRSb3V0ZSh0aGlzLm1hdGNoZXIudGFyZ2V0LCB0YXJnZXQpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm1hdGNoZXIuYWRkKHRoaXMucGF0aCwgdGFyZ2V0KTtcblxuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChjYWxsYmFjay5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgbXVzdCBoYXZlIGFuIGFyZ3VtZW50IGluIHRoZSBmdW5jdGlvbiBwYXNzZWQgdG8gYHRvYFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1hdGNoZXIuYWRkQ2hpbGQodGhpcy5wYXRoLCB0YXJnZXQsIGNhbGxiYWNrLCB0aGlzLmRlbGVnYXRlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBNYXRjaGVyKHRhcmdldCkge1xuICAgIHRoaXMucm91dGVzID0ge307XG4gICAgdGhpcy5jaGlsZHJlbiA9IHt9O1xuICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICB9XG5cbiAgTWF0Y2hlci5wcm90b3R5cGUgPSB7XG4gICAgYWRkOiBmdW5jdGlvbiBhZGQocGF0aCwgaGFuZGxlcikge1xuICAgICAgdGhpcy5yb3V0ZXNbcGF0aF0gPSBoYW5kbGVyO1xuICAgIH0sXG5cbiAgICBhZGRDaGlsZDogZnVuY3Rpb24gYWRkQ2hpbGQocGF0aCwgdGFyZ2V0LCBjYWxsYmFjaywgZGVsZWdhdGUpIHtcbiAgICAgIHZhciBtYXRjaGVyID0gbmV3IE1hdGNoZXIodGFyZ2V0KTtcbiAgICAgIHRoaXMuY2hpbGRyZW5bcGF0aF0gPSBtYXRjaGVyO1xuXG4gICAgICB2YXIgbWF0Y2ggPSBnZW5lcmF0ZU1hdGNoKHBhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKTtcblxuICAgICAgaWYgKGRlbGVnYXRlICYmIGRlbGVnYXRlLmNvbnRleHRFbnRlcmVkKSB7XG4gICAgICAgIGRlbGVnYXRlLmNvbnRleHRFbnRlcmVkKHRhcmdldCwgbWF0Y2gpO1xuICAgICAgfVxuXG4gICAgICBjYWxsYmFjayhtYXRjaCk7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIGdlbmVyYXRlTWF0Y2goc3RhcnRpbmdQYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocGF0aCwgbmVzdGVkQ2FsbGJhY2spIHtcbiAgICAgIHZhciBmdWxsUGF0aCA9IHN0YXJ0aW5nUGF0aCArIHBhdGg7XG5cbiAgICAgIGlmIChuZXN0ZWRDYWxsYmFjaykge1xuICAgICAgICBuZXN0ZWRDYWxsYmFjayhnZW5lcmF0ZU1hdGNoKGZ1bGxQYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXQoc3RhcnRpbmdQYXRoICsgcGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBhZGRSb3V0ZShyb3V0ZUFycmF5LCBwYXRoLCBoYW5kbGVyKSB7XG4gICAgdmFyIGxlbiA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSByb3V0ZUFycmF5Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgbGVuICs9IHJvdXRlQXJyYXlbaV0ucGF0aC5sZW5ndGg7XG4gICAgfVxuXG4gICAgcGF0aCA9IHBhdGguc3Vic3RyKGxlbik7XG4gICAgdmFyIHJvdXRlID0geyBwYXRoOiBwYXRoLCBoYW5kbGVyOiBoYW5kbGVyIH07XG4gICAgcm91dGVBcnJheS5wdXNoKHJvdXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVhY2hSb3V0ZShiYXNlUm91dGUsIG1hdGNoZXIsIGNhbGxiYWNrLCBiaW5kaW5nKSB7XG4gICAgdmFyIHJvdXRlcyA9IG1hdGNoZXIucm91dGVzO1xuXG4gICAgZm9yICh2YXIgcGF0aCBpbiByb3V0ZXMpIHtcbiAgICAgIGlmIChyb3V0ZXMuaGFzT3duUHJvcGVydHkocGF0aCkpIHtcbiAgICAgICAgdmFyIHJvdXRlQXJyYXkgPSBiYXNlUm91dGUuc2xpY2UoKTtcbiAgICAgICAgYWRkUm91dGUocm91dGVBcnJheSwgcGF0aCwgcm91dGVzW3BhdGhdKTtcblxuICAgICAgICBpZiAobWF0Y2hlci5jaGlsZHJlbltwYXRoXSkge1xuICAgICAgICAgIGVhY2hSb3V0ZShyb3V0ZUFycmF5LCBtYXRjaGVyLmNoaWxkcmVuW3BhdGhdLCBjYWxsYmFjaywgYmluZGluZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FsbGJhY2suY2FsbChiaW5kaW5nLCByb3V0ZUFycmF5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1hcCAoY2FsbGJhY2ssIGFkZFJvdXRlQ2FsbGJhY2spIHtcbiAgICB2YXIgbWF0Y2hlciA9IG5ldyBNYXRjaGVyKCk7XG5cbiAgICBjYWxsYmFjayhnZW5lcmF0ZU1hdGNoKFwiXCIsIG1hdGNoZXIsIHRoaXMuZGVsZWdhdGUpKTtcblxuICAgIGVhY2hSb3V0ZShbXSwgbWF0Y2hlciwgZnVuY3Rpb24gKHJvdXRlKSB7XG4gICAgICBpZiAoYWRkUm91dGVDYWxsYmFjaykge1xuICAgICAgICBhZGRSb3V0ZUNhbGxiYWNrKHRoaXMsIHJvdXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYWRkKHJvdXRlKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzKTtcbiAgfVxuXG4gIHZhciBzcGVjaWFscyA9IFsnLycsICcuJywgJyonLCAnKycsICc/JywgJ3wnLCAnKCcsICcpJywgJ1snLCAnXScsICd7JywgJ30nLCAnXFxcXCddO1xuXG4gIHZhciBlc2NhcGVSZWdleCA9IG5ldyBSZWdFeHAoJyhcXFxcJyArIHNwZWNpYWxzLmpvaW4oJ3xcXFxcJykgKyAnKScsICdnJyk7XG5cbiAgdmFyIG5vV2FybmluZyA9IGZhbHNlO1xuICBmdW5jdGlvbiB3YXJuKG1zZykge1xuICAgIGlmICghbm9XYXJuaW5nICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc29sZS5lcnJvcignW3Z1ZS1yb3V0ZXJdICcgKyBtc2cpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRyeURlY29kZSh1cmksIGFzQ29tcG9uZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhc0NvbXBvbmVudCA/IGRlY29kZVVSSUNvbXBvbmVudCh1cmkpIDogZGVjb2RlVVJJKHVyaSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgd2FybignbWFsZm9ybWVkIFVSSScgKyAoYXNDb21wb25lbnQgPyAnIGNvbXBvbmVudDogJyA6ICc6ICcpICsgdXJpKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpc0FycmF5KHRlc3QpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRlc3QpID09PSBcIltvYmplY3QgQXJyYXldXCI7XG4gIH1cblxuICAvLyBBIFNlZ21lbnQgcmVwcmVzZW50cyBhIHNlZ21lbnQgaW4gdGhlIG9yaWdpbmFsIHJvdXRlIGRlc2NyaXB0aW9uLlxuICAvLyBFYWNoIFNlZ21lbnQgdHlwZSBwcm92aWRlcyBhbiBgZWFjaENoYXJgIGFuZCBgcmVnZXhgIG1ldGhvZC5cbiAgLy9cbiAgLy8gVGhlIGBlYWNoQ2hhcmAgbWV0aG9kIGludm9rZXMgdGhlIGNhbGxiYWNrIHdpdGggb25lIG9yIG1vcmUgY2hhcmFjdGVyXG4gIC8vIHNwZWNpZmljYXRpb25zLiBBIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGNvbnN1bWVzIG9uZSBvciBtb3JlIGlucHV0XG4gIC8vIGNoYXJhY3RlcnMuXG4gIC8vXG4gIC8vIFRoZSBgcmVnZXhgIG1ldGhvZCByZXR1cm5zIGEgcmVnZXggZnJhZ21lbnQgZm9yIHRoZSBzZWdtZW50LiBJZiB0aGVcbiAgLy8gc2VnbWVudCBpcyBhIGR5bmFtaWMgb2Ygc3RhciBzZWdtZW50LCB0aGUgcmVnZXggZnJhZ21lbnQgYWxzbyBpbmNsdWRlc1xuICAvLyBhIGNhcHR1cmUuXG4gIC8vXG4gIC8vIEEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gY29udGFpbnM6XG4gIC8vXG4gIC8vICogYHZhbGlkQ2hhcnNgOiBhIFN0cmluZyB3aXRoIGEgbGlzdCBvZiBhbGwgdmFsaWQgY2hhcmFjdGVycywgb3JcbiAgLy8gKiBgaW52YWxpZENoYXJzYDogYSBTdHJpbmcgd2l0aCBhIGxpc3Qgb2YgYWxsIGludmFsaWQgY2hhcmFjdGVyc1xuICAvLyAqIGByZXBlYXRgOiB0cnVlIGlmIHRoZSBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiBjYW4gcmVwZWF0XG5cbiAgZnVuY3Rpb24gU3RhdGljU2VnbWVudChzdHJpbmcpIHtcbiAgICB0aGlzLnN0cmluZyA9IHN0cmluZztcbiAgfVxuICBTdGF0aWNTZWdtZW50LnByb3RvdHlwZSA9IHtcbiAgICBlYWNoQ2hhcjogZnVuY3Rpb24gZWFjaENoYXIoY2FsbGJhY2spIHtcbiAgICAgIHZhciBzdHJpbmcgPSB0aGlzLnN0cmluZyxcbiAgICAgICAgICBjaDtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdHJpbmcubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGNoID0gc3RyaW5nLmNoYXJBdChpKTtcbiAgICAgICAgY2FsbGJhY2soeyB2YWxpZENoYXJzOiBjaCB9KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nLnJlcGxhY2UoZXNjYXBlUmVnZXgsICdcXFxcJDEnKTtcbiAgICB9LFxuXG4gICAgZ2VuZXJhdGU6IGZ1bmN0aW9uIGdlbmVyYXRlKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBEeW5hbWljU2VnbWVudChuYW1lKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgfVxuICBEeW5hbWljU2VnbWVudC5wcm90b3R5cGUgPSB7XG4gICAgZWFjaENoYXI6IGZ1bmN0aW9uIGVhY2hDaGFyKGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjayh7IGludmFsaWRDaGFyczogXCIvXCIsIHJlcGVhdDogdHJ1ZSB9KTtcbiAgICB9LFxuXG4gICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuICAgICAgcmV0dXJuIFwiKFteL10rKVwiO1xuICAgIH0sXG5cbiAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUocGFyYW1zKSB7XG4gICAgICB2YXIgdmFsID0gcGFyYW1zW3RoaXMubmFtZV07XG4gICAgICByZXR1cm4gdmFsID09IG51bGwgPyBcIjpcIiArIHRoaXMubmFtZSA6IHZhbDtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gU3RhclNlZ21lbnQobmFtZSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gIH1cbiAgU3RhclNlZ21lbnQucHJvdG90eXBlID0ge1xuICAgIGVhY2hDaGFyOiBmdW5jdGlvbiBlYWNoQ2hhcihjYWxsYmFjaykge1xuICAgICAgY2FsbGJhY2soeyBpbnZhbGlkQ2hhcnM6IFwiXCIsIHJlcGVhdDogdHJ1ZSB9KTtcbiAgICB9LFxuXG4gICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuICAgICAgcmV0dXJuIFwiKC4rKVwiO1xuICAgIH0sXG5cbiAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUocGFyYW1zKSB7XG4gICAgICB2YXIgdmFsID0gcGFyYW1zW3RoaXMubmFtZV07XG4gICAgICByZXR1cm4gdmFsID09IG51bGwgPyBcIjpcIiArIHRoaXMubmFtZSA6IHZhbDtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gRXBzaWxvblNlZ21lbnQoKSB7fVxuICBFcHNpbG9uU2VnbWVudC5wcm90b3R5cGUgPSB7XG4gICAgZWFjaENoYXI6IGZ1bmN0aW9uIGVhY2hDaGFyKCkge30sXG4gICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfSxcbiAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUoKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gcGFyc2Uocm91dGUsIG5hbWVzLCBzcGVjaWZpY2l0eSkge1xuICAgIC8vIG5vcm1hbGl6ZSByb3V0ZSBhcyBub3Qgc3RhcnRpbmcgd2l0aCBhIFwiL1wiLiBSZWNvZ25pdGlvbiB3aWxsXG4gICAgLy8gYWxzbyBub3JtYWxpemUuXG4gICAgaWYgKHJvdXRlLmNoYXJBdCgwKSA9PT0gXCIvXCIpIHtcbiAgICAgIHJvdXRlID0gcm91dGUuc3Vic3RyKDEpO1xuICAgIH1cblxuICAgIHZhciBzZWdtZW50cyA9IHJvdXRlLnNwbGl0KFwiL1wiKSxcbiAgICAgICAgcmVzdWx0cyA9IFtdO1xuXG4gICAgLy8gQSByb3V0ZXMgaGFzIHNwZWNpZmljaXR5IGRldGVybWluZWQgYnkgdGhlIG9yZGVyIHRoYXQgaXRzIGRpZmZlcmVudCBzZWdtZW50c1xuICAgIC8vIGFwcGVhciBpbi4gVGhpcyBzeXN0ZW0gbWlycm9ycyBob3cgdGhlIG1hZ25pdHVkZSBvZiBudW1iZXJzIHdyaXR0ZW4gYXMgc3RyaW5nc1xuICAgIC8vIHdvcmtzLlxuICAgIC8vIENvbnNpZGVyIGEgbnVtYmVyIHdyaXR0ZW4gYXM6IFwiYWJjXCIuIEFuIGV4YW1wbGUgd291bGQgYmUgXCIyMDBcIi4gQW55IG90aGVyIG51bWJlciB3cml0dGVuXG4gICAgLy8gXCJ4eXpcIiB3aWxsIGJlIHNtYWxsZXIgdGhhbiBcImFiY1wiIHNvIGxvbmcgYXMgYGEgPiB6YC4gRm9yIGluc3RhbmNlLCBcIjE5OVwiIGlzIHNtYWxsZXJcbiAgICAvLyB0aGVuIFwiMjAwXCIsIGV2ZW4gdGhvdWdoIFwieVwiIGFuZCBcInpcIiAod2hpY2ggYXJlIGJvdGggOSkgYXJlIGxhcmdlciB0aGFuIFwiMFwiICh0aGUgdmFsdWVcbiAgICAvLyBvZiAoYGJgIGFuZCBgY2ApLiBUaGlzIGlzIGJlY2F1c2UgdGhlIGxlYWRpbmcgc3ltYm9sLCBcIjJcIiwgaXMgbGFyZ2VyIHRoYW4gdGhlIG90aGVyXG4gICAgLy8gbGVhZGluZyBzeW1ib2wsIFwiMVwiLlxuICAgIC8vIFRoZSBydWxlIGlzIHRoYXQgc3ltYm9scyB0byB0aGUgbGVmdCBjYXJyeSBtb3JlIHdlaWdodCB0aGFuIHN5bWJvbHMgdG8gdGhlIHJpZ2h0XG4gICAgLy8gd2hlbiBhIG51bWJlciBpcyB3cml0dGVuIG91dCBhcyBhIHN0cmluZy4gSW4gdGhlIGFib3ZlIHN0cmluZ3MsIHRoZSBsZWFkaW5nIGRpZ2l0XG4gICAgLy8gcmVwcmVzZW50cyBob3cgbWFueSAxMDAncyBhcmUgaW4gdGhlIG51bWJlciwgYW5kIGl0IGNhcnJpZXMgbW9yZSB3ZWlnaHQgdGhhbiB0aGUgbWlkZGxlXG4gICAgLy8gbnVtYmVyIHdoaWNoIHJlcHJlc2VudHMgaG93IG1hbnkgMTAncyBhcmUgaW4gdGhlIG51bWJlci5cbiAgICAvLyBUaGlzIHN5c3RlbSBvZiBudW1iZXIgbWFnbml0dWRlIHdvcmtzIHdlbGwgZm9yIHJvdXRlIHNwZWNpZmljaXR5LCB0b28uIEEgcm91dGUgd3JpdHRlbiBhc1xuICAgIC8vIGBhL2IvY2Agd2lsbCBiZSBtb3JlIHNwZWNpZmljIHRoYW4gYHgveS96YCBhcyBsb25nIGFzIGBhYCBpcyBtb3JlIHNwZWNpZmljIHRoYW5cbiAgICAvLyBgeGAsIGlycmVzcGVjdGl2ZSBvZiB0aGUgb3RoZXIgcGFydHMuXG4gICAgLy8gQmVjYXVzZSBvZiB0aGlzIHNpbWlsYXJpdHksIHdlIGFzc2lnbiBlYWNoIHR5cGUgb2Ygc2VnbWVudCBhIG51bWJlciB2YWx1ZSB3cml0dGVuIGFzIGFcbiAgICAvLyBzdHJpbmcuIFdlIGNhbiBmaW5kIHRoZSBzcGVjaWZpY2l0eSBvZiBjb21wb3VuZCByb3V0ZXMgYnkgY29uY2F0ZW5hdGluZyB0aGVzZSBzdHJpbmdzXG4gICAgLy8gdG9nZXRoZXIsIGZyb20gbGVmdCB0byByaWdodC4gQWZ0ZXIgd2UgaGF2ZSBsb29wZWQgdGhyb3VnaCBhbGwgb2YgdGhlIHNlZ21lbnRzLFxuICAgIC8vIHdlIGNvbnZlcnQgdGhlIHN0cmluZyB0byBhIG51bWJlci5cbiAgICBzcGVjaWZpY2l0eS52YWwgPSAnJztcblxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gc2VnbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2ldLFxuICAgICAgICAgIG1hdGNoO1xuXG4gICAgICBpZiAobWF0Y2ggPSBzZWdtZW50Lm1hdGNoKC9eOihbXlxcL10rKSQvKSkge1xuICAgICAgICByZXN1bHRzLnB1c2gobmV3IER5bmFtaWNTZWdtZW50KG1hdGNoWzFdKSk7XG4gICAgICAgIG5hbWVzLnB1c2gobWF0Y2hbMV0pO1xuICAgICAgICBzcGVjaWZpY2l0eS52YWwgKz0gJzMnO1xuICAgICAgfSBlbHNlIGlmIChtYXRjaCA9IHNlZ21lbnQubWF0Y2goL15cXCooW15cXC9dKykkLykpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBTdGFyU2VnbWVudChtYXRjaFsxXSkpO1xuICAgICAgICBzcGVjaWZpY2l0eS52YWwgKz0gJzInO1xuICAgICAgICBuYW1lcy5wdXNoKG1hdGNoWzFdKTtcbiAgICAgIH0gZWxzZSBpZiAoc2VnbWVudCA9PT0gXCJcIikge1xuICAgICAgICByZXN1bHRzLnB1c2gobmV3IEVwc2lsb25TZWdtZW50KCkpO1xuICAgICAgICBzcGVjaWZpY2l0eS52YWwgKz0gJzEnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBTdGF0aWNTZWdtZW50KHNlZ21lbnQpKTtcbiAgICAgICAgc3BlY2lmaWNpdHkudmFsICs9ICc0JztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzcGVjaWZpY2l0eS52YWwgPSArc3BlY2lmaWNpdHkudmFsO1xuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICAvLyBBIFN0YXRlIGhhcyBhIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGFuZCAoYGNoYXJTcGVjYCkgYW5kIGEgbGlzdCBvZiBwb3NzaWJsZVxuICAvLyBzdWJzZXF1ZW50IHN0YXRlcyAoYG5leHRTdGF0ZXNgKS5cbiAgLy9cbiAgLy8gSWYgYSBTdGF0ZSBpcyBhbiBhY2NlcHRpbmcgc3RhdGUsIGl0IHdpbGwgYWxzbyBoYXZlIHNldmVyYWwgYWRkaXRpb25hbFxuICAvLyBwcm9wZXJ0aWVzOlxuICAvL1xuICAvLyAqIGByZWdleGA6IEEgcmVndWxhciBleHByZXNzaW9uIHRoYXQgaXMgdXNlZCB0byBleHRyYWN0IHBhcmFtZXRlcnMgZnJvbSBwYXRoc1xuICAvLyAgIHRoYXQgcmVhY2hlZCB0aGlzIGFjY2VwdGluZyBzdGF0ZS5cbiAgLy8gKiBgaGFuZGxlcnNgOiBJbmZvcm1hdGlvbiBvbiBob3cgdG8gY29udmVydCB0aGUgbGlzdCBvZiBjYXB0dXJlcyBpbnRvIGNhbGxzXG4gIC8vICAgdG8gcmVnaXN0ZXJlZCBoYW5kbGVycyB3aXRoIHRoZSBzcGVjaWZpZWQgcGFyYW1ldGVyc1xuICAvLyAqIGB0eXBlc2A6IEhvdyBtYW55IHN0YXRpYywgZHluYW1pYyBvciBzdGFyIHNlZ21lbnRzIGluIHRoaXMgcm91dGUuIFVzZWQgdG9cbiAgLy8gICBkZWNpZGUgd2hpY2ggcm91dGUgdG8gdXNlIGlmIG11bHRpcGxlIHJlZ2lzdGVyZWQgcm91dGVzIG1hdGNoIGEgcGF0aC5cbiAgLy9cbiAgLy8gQ3VycmVudGx5LCBTdGF0ZSBpcyBpbXBsZW1lbnRlZCBuYWl2ZWx5IGJ5IGxvb3Bpbmcgb3ZlciBgbmV4dFN0YXRlc2AgYW5kXG4gIC8vIGNvbXBhcmluZyBhIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGFnYWluc3QgYSBjaGFyYWN0ZXIuIEEgbW9yZSBlZmZpY2llbnRcbiAgLy8gaW1wbGVtZW50YXRpb24gd291bGQgdXNlIGEgaGFzaCBvZiBrZXlzIHBvaW50aW5nIGF0IG9uZSBvciBtb3JlIG5leHQgc3RhdGVzLlxuXG4gIGZ1bmN0aW9uIFN0YXRlKGNoYXJTcGVjKSB7XG4gICAgdGhpcy5jaGFyU3BlYyA9IGNoYXJTcGVjO1xuICAgIHRoaXMubmV4dFN0YXRlcyA9IFtdO1xuICB9XG5cbiAgU3RhdGUucHJvdG90eXBlID0ge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KGNoYXJTcGVjKSB7XG4gICAgICB2YXIgbmV4dFN0YXRlcyA9IHRoaXMubmV4dFN0YXRlcztcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBuZXh0U3RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgY2hpbGQgPSBuZXh0U3RhdGVzW2ldO1xuXG4gICAgICAgIHZhciBpc0VxdWFsID0gY2hpbGQuY2hhclNwZWMudmFsaWRDaGFycyA9PT0gY2hhclNwZWMudmFsaWRDaGFycztcbiAgICAgICAgaXNFcXVhbCA9IGlzRXF1YWwgJiYgY2hpbGQuY2hhclNwZWMuaW52YWxpZENoYXJzID09PSBjaGFyU3BlYy5pbnZhbGlkQ2hhcnM7XG5cbiAgICAgICAgaWYgKGlzRXF1YWwpIHtcbiAgICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcHV0OiBmdW5jdGlvbiBwdXQoY2hhclNwZWMpIHtcbiAgICAgIHZhciBzdGF0ZTtcblxuICAgICAgLy8gSWYgdGhlIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGFscmVhZHkgZXhpc3RzIGluIGEgY2hpbGQgb2YgdGhlIGN1cnJlbnRcbiAgICAgIC8vIHN0YXRlLCBqdXN0IHJldHVybiB0aGF0IHN0YXRlLlxuICAgICAgaWYgKHN0YXRlID0gdGhpcy5nZXQoY2hhclNwZWMpKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBhIG5ldyBzdGF0ZSBmb3IgdGhlIGNoYXJhY3RlciBzcGVjXG4gICAgICBzdGF0ZSA9IG5ldyBTdGF0ZShjaGFyU3BlYyk7XG5cbiAgICAgIC8vIEluc2VydCB0aGUgbmV3IHN0YXRlIGFzIGEgY2hpbGQgb2YgdGhlIGN1cnJlbnQgc3RhdGVcbiAgICAgIHRoaXMubmV4dFN0YXRlcy5wdXNoKHN0YXRlKTtcblxuICAgICAgLy8gSWYgdGhpcyBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiByZXBlYXRzLCBpbnNlcnQgdGhlIG5ldyBzdGF0ZSBhcyBhIGNoaWxkXG4gICAgICAvLyBvZiBpdHNlbGYuIE5vdGUgdGhhdCB0aGlzIHdpbGwgbm90IHRyaWdnZXIgYW4gaW5maW5pdGUgbG9vcCBiZWNhdXNlIGVhY2hcbiAgICAgIC8vIHRyYW5zaXRpb24gZHVyaW5nIHJlY29nbml0aW9uIGNvbnN1bWVzIGEgY2hhcmFjdGVyLlxuICAgICAgaWYgKGNoYXJTcGVjLnJlcGVhdCkge1xuICAgICAgICBzdGF0ZS5uZXh0U3RhdGVzLnB1c2goc3RhdGUpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXR1cm4gdGhlIG5ldyBzdGF0ZVxuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH0sXG5cbiAgICAvLyBGaW5kIGEgbGlzdCBvZiBjaGlsZCBzdGF0ZXMgbWF0Y2hpbmcgdGhlIG5leHQgY2hhcmFjdGVyXG4gICAgbWF0Y2g6IGZ1bmN0aW9uIG1hdGNoKGNoKSB7XG4gICAgICAvLyBERUJVRyBcIlByb2Nlc3NpbmcgYFwiICsgY2ggKyBcImA6XCJcbiAgICAgIHZhciBuZXh0U3RhdGVzID0gdGhpcy5uZXh0U3RhdGVzLFxuICAgICAgICAgIGNoaWxkLFxuICAgICAgICAgIGNoYXJTcGVjLFxuICAgICAgICAgIGNoYXJzO1xuXG4gICAgICAvLyBERUJVRyBcIiAgXCIgKyBkZWJ1Z1N0YXRlKHRoaXMpXG4gICAgICB2YXIgcmV0dXJuZWQgPSBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBuZXh0U3RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBjaGlsZCA9IG5leHRTdGF0ZXNbaV07XG5cbiAgICAgICAgY2hhclNwZWMgPSBjaGlsZC5jaGFyU3BlYztcblxuICAgICAgICBpZiAodHlwZW9mIChjaGFycyA9IGNoYXJTcGVjLnZhbGlkQ2hhcnMpICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGlmIChjaGFycy5pbmRleE9mKGNoKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybmVkLnB1c2goY2hpbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgKGNoYXJzID0gY2hhclNwZWMuaW52YWxpZENoYXJzKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBpZiAoY2hhcnMuaW5kZXhPZihjaCkgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm5lZC5wdXNoKGNoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJldHVybmVkO1xuICAgIH1cblxuICAgIC8qKiBJRiBERUJVR1xuICAgICwgZGVidWc6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNoYXJTcGVjID0gdGhpcy5jaGFyU3BlYyxcbiAgICAgICAgICBkZWJ1ZyA9IFwiW1wiLFxuICAgICAgICAgIGNoYXJzID0gY2hhclNwZWMudmFsaWRDaGFycyB8fCBjaGFyU3BlYy5pbnZhbGlkQ2hhcnM7XG4gICAgICAgaWYgKGNoYXJTcGVjLmludmFsaWRDaGFycykgeyBkZWJ1ZyArPSBcIl5cIjsgfVxuICAgICAgZGVidWcgKz0gY2hhcnM7XG4gICAgICBkZWJ1ZyArPSBcIl1cIjtcbiAgICAgICBpZiAoY2hhclNwZWMucmVwZWF0KSB7IGRlYnVnICs9IFwiK1wiOyB9XG4gICAgICAgcmV0dXJuIGRlYnVnO1xuICAgIH1cbiAgICBFTkQgSUYgKiovXG4gIH07XG5cbiAgLyoqIElGIERFQlVHXG4gIGZ1bmN0aW9uIGRlYnVnKGxvZykge1xuICAgIGNvbnNvbGUubG9nKGxvZyk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWJ1Z1N0YXRlKHN0YXRlKSB7XG4gICAgcmV0dXJuIHN0YXRlLm5leHRTdGF0ZXMubWFwKGZ1bmN0aW9uKG4pIHtcbiAgICAgIGlmIChuLm5leHRTdGF0ZXMubGVuZ3RoID09PSAwKSB7IHJldHVybiBcIiggXCIgKyBuLmRlYnVnKCkgKyBcIiBbYWNjZXB0aW5nXSApXCI7IH1cbiAgICAgIHJldHVybiBcIiggXCIgKyBuLmRlYnVnKCkgKyBcIiA8dGhlbj4gXCIgKyBuLm5leHRTdGF0ZXMubWFwKGZ1bmN0aW9uKHMpIHsgcmV0dXJuIHMuZGVidWcoKSB9KS5qb2luKFwiIG9yIFwiKSArIFwiIClcIjtcbiAgICB9KS5qb2luKFwiLCBcIilcbiAgfVxuICBFTkQgSUYgKiovXG5cbiAgLy8gU29ydCB0aGUgcm91dGVzIGJ5IHNwZWNpZmljaXR5XG4gIGZ1bmN0aW9uIHNvcnRTb2x1dGlvbnMoc3RhdGVzKSB7XG4gICAgcmV0dXJuIHN0YXRlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gYi5zcGVjaWZpY2l0eS52YWwgLSBhLnNwZWNpZmljaXR5LnZhbDtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlY29nbml6ZUNoYXIoc3RhdGVzLCBjaCkge1xuICAgIHZhciBuZXh0U3RhdGVzID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0YXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBzdGF0ZSA9IHN0YXRlc1tpXTtcblxuICAgICAgbmV4dFN0YXRlcyA9IG5leHRTdGF0ZXMuY29uY2F0KHN0YXRlLm1hdGNoKGNoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5leHRTdGF0ZXM7XG4gIH1cblxuICB2YXIgb0NyZWF0ZSA9IE9iamVjdC5jcmVhdGUgfHwgZnVuY3Rpb24gKHByb3RvKSB7XG4gICAgZnVuY3Rpb24gRigpIHt9XG4gICAgRi5wcm90b3R5cGUgPSBwcm90bztcbiAgICByZXR1cm4gbmV3IEYoKTtcbiAgfTtcblxuICBmdW5jdGlvbiBSZWNvZ25pemVSZXN1bHRzKHF1ZXJ5UGFyYW1zKSB7XG4gICAgdGhpcy5xdWVyeVBhcmFtcyA9IHF1ZXJ5UGFyYW1zIHx8IHt9O1xuICB9XG4gIFJlY29nbml6ZVJlc3VsdHMucHJvdG90eXBlID0gb0NyZWF0ZSh7XG4gICAgc3BsaWNlOiBBcnJheS5wcm90b3R5cGUuc3BsaWNlLFxuICAgIHNsaWNlOiBBcnJheS5wcm90b3R5cGUuc2xpY2UsXG4gICAgcHVzaDogQXJyYXkucHJvdG90eXBlLnB1c2gsXG4gICAgbGVuZ3RoOiAwLFxuICAgIHF1ZXJ5UGFyYW1zOiBudWxsXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGZpbmRIYW5kbGVyKHN0YXRlLCBwYXRoLCBxdWVyeVBhcmFtcykge1xuICAgIHZhciBoYW5kbGVycyA9IHN0YXRlLmhhbmRsZXJzLFxuICAgICAgICByZWdleCA9IHN0YXRlLnJlZ2V4O1xuICAgIHZhciBjYXB0dXJlcyA9IHBhdGgubWF0Y2gocmVnZXgpLFxuICAgICAgICBjdXJyZW50Q2FwdHVyZSA9IDE7XG4gICAgdmFyIHJlc3VsdCA9IG5ldyBSZWNvZ25pemVSZXN1bHRzKHF1ZXJ5UGFyYW1zKTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgaGFuZGxlciA9IGhhbmRsZXJzW2ldLFxuICAgICAgICAgIG5hbWVzID0gaGFuZGxlci5uYW1lcyxcbiAgICAgICAgICBwYXJhbXMgPSB7fTtcblxuICAgICAgZm9yICh2YXIgaiA9IDAsIG0gPSBuYW1lcy5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICAgICAgcGFyYW1zW25hbWVzW2pdXSA9IGNhcHR1cmVzW2N1cnJlbnRDYXB0dXJlKytdO1xuICAgICAgfVxuXG4gICAgICByZXN1bHQucHVzaCh7IGhhbmRsZXI6IGhhbmRsZXIuaGFuZGxlciwgcGFyYW1zOiBwYXJhbXMsIGlzRHluYW1pYzogISFuYW1lcy5sZW5ndGggfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFNlZ21lbnQoY3VycmVudFN0YXRlLCBzZWdtZW50KSB7XG4gICAgc2VnbWVudC5lYWNoQ2hhcihmdW5jdGlvbiAoY2gpIHtcbiAgICAgIHZhciBzdGF0ZTtcblxuICAgICAgY3VycmVudFN0YXRlID0gY3VycmVudFN0YXRlLnB1dChjaCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gY3VycmVudFN0YXRlO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVjb2RlUXVlcnlQYXJhbVBhcnQocGFydCkge1xuICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw0MDEvaW50ZXJhY3QvZm9ybXMuaHRtbCNoLTE3LjEzLjQuMVxuICAgIHBhcnQgPSBwYXJ0LnJlcGxhY2UoL1xcKy9nbSwgJyUyMCcpO1xuICAgIHJldHVybiB0cnlEZWNvZGUocGFydCwgdHJ1ZSk7XG4gIH1cblxuICAvLyBUaGUgbWFpbiBpbnRlcmZhY2VcblxuICB2YXIgUm91dGVSZWNvZ25pemVyID0gZnVuY3Rpb24gUm91dGVSZWNvZ25pemVyKCkge1xuICAgIHRoaXMucm9vdFN0YXRlID0gbmV3IFN0YXRlKCk7XG4gICAgdGhpcy5uYW1lcyA9IHt9O1xuICB9O1xuXG4gIFJvdXRlUmVjb2duaXplci5wcm90b3R5cGUgPSB7XG4gICAgYWRkOiBmdW5jdGlvbiBhZGQocm91dGVzLCBvcHRpb25zKSB7XG4gICAgICB2YXIgY3VycmVudFN0YXRlID0gdGhpcy5yb290U3RhdGUsXG4gICAgICAgICAgcmVnZXggPSBcIl5cIixcbiAgICAgICAgICBzcGVjaWZpY2l0eSA9IHt9LFxuICAgICAgICAgIGhhbmRsZXJzID0gW10sXG4gICAgICAgICAgYWxsU2VnbWVudHMgPSBbXSxcbiAgICAgICAgICBuYW1lO1xuXG4gICAgICB2YXIgaXNFbXB0eSA9IHRydWU7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gcm91dGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgcm91dGUgPSByb3V0ZXNbaV0sXG4gICAgICAgICAgICBuYW1lcyA9IFtdO1xuXG4gICAgICAgIHZhciBzZWdtZW50cyA9IHBhcnNlKHJvdXRlLnBhdGgsIG5hbWVzLCBzcGVjaWZpY2l0eSk7XG5cbiAgICAgICAgYWxsU2VnbWVudHMgPSBhbGxTZWdtZW50cy5jb25jYXQoc2VnbWVudHMpO1xuXG4gICAgICAgIGZvciAodmFyIGogPSAwLCBtID0gc2VnbWVudHMubGVuZ3RoOyBqIDwgbTsgaisrKSB7XG4gICAgICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50c1tqXTtcblxuICAgICAgICAgIGlmIChzZWdtZW50IGluc3RhbmNlb2YgRXBzaWxvblNlZ21lbnQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlzRW1wdHkgPSBmYWxzZTtcblxuICAgICAgICAgIC8vIEFkZCBhIFwiL1wiIGZvciB0aGUgbmV3IHNlZ21lbnRcbiAgICAgICAgICBjdXJyZW50U3RhdGUgPSBjdXJyZW50U3RhdGUucHV0KHsgdmFsaWRDaGFyczogXCIvXCIgfSk7XG4gICAgICAgICAgcmVnZXggKz0gXCIvXCI7XG5cbiAgICAgICAgICAvLyBBZGQgYSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc2VnbWVudCB0byB0aGUgTkZBIGFuZCByZWdleFxuICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IGFkZFNlZ21lbnQoY3VycmVudFN0YXRlLCBzZWdtZW50KTtcbiAgICAgICAgICByZWdleCArPSBzZWdtZW50LnJlZ2V4KCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGFuZGxlciA9IHsgaGFuZGxlcjogcm91dGUuaGFuZGxlciwgbmFtZXM6IG5hbWVzIH07XG4gICAgICAgIGhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0VtcHR5KSB7XG4gICAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRTdGF0ZS5wdXQoeyB2YWxpZENoYXJzOiBcIi9cIiB9KTtcbiAgICAgICAgcmVnZXggKz0gXCIvXCI7XG4gICAgICB9XG5cbiAgICAgIGN1cnJlbnRTdGF0ZS5oYW5kbGVycyA9IGhhbmRsZXJzO1xuICAgICAgY3VycmVudFN0YXRlLnJlZ2V4ID0gbmV3IFJlZ0V4cChyZWdleCArIFwiJFwiKTtcbiAgICAgIGN1cnJlbnRTdGF0ZS5zcGVjaWZpY2l0eSA9IHNwZWNpZmljaXR5O1xuXG4gICAgICBpZiAobmFtZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5hcykge1xuICAgICAgICB0aGlzLm5hbWVzW25hbWVdID0ge1xuICAgICAgICAgIHNlZ21lbnRzOiBhbGxTZWdtZW50cyxcbiAgICAgICAgICBoYW5kbGVyczogaGFuZGxlcnNcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgaGFuZGxlcnNGb3I6IGZ1bmN0aW9uIGhhbmRsZXJzRm9yKG5hbWUpIHtcbiAgICAgIHZhciByb3V0ZSA9IHRoaXMubmFtZXNbbmFtZV0sXG4gICAgICAgICAgcmVzdWx0ID0gW107XG4gICAgICBpZiAoIXJvdXRlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZXJlIGlzIG5vIHJvdXRlIG5hbWVkIFwiICsgbmFtZSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gcm91dGUuaGFuZGxlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHJvdXRlLmhhbmRsZXJzW2ldKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuXG4gICAgaGFzUm91dGU6IGZ1bmN0aW9uIGhhc1JvdXRlKG5hbWUpIHtcbiAgICAgIHJldHVybiAhIXRoaXMubmFtZXNbbmFtZV07XG4gICAgfSxcblxuICAgIGdlbmVyYXRlOiBmdW5jdGlvbiBnZW5lcmF0ZShuYW1lLCBwYXJhbXMpIHtcbiAgICAgIHZhciByb3V0ZSA9IHRoaXMubmFtZXNbbmFtZV0sXG4gICAgICAgICAgb3V0cHV0ID0gXCJcIjtcbiAgICAgIGlmICghcm91dGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgbm8gcm91dGUgbmFtZWQgXCIgKyBuYW1lKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNlZ21lbnRzID0gcm91dGUuc2VnbWVudHM7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gc2VnbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbaV07XG5cbiAgICAgICAgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBFcHNpbG9uU2VnbWVudCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgb3V0cHV0ICs9IFwiL1wiO1xuICAgICAgICBvdXRwdXQgKz0gc2VnbWVudC5nZW5lcmF0ZShwYXJhbXMpO1xuICAgICAgfVxuXG4gICAgICBpZiAob3V0cHV0LmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICAgIG91dHB1dCA9ICcvJyArIG91dHB1dDtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMucXVlcnlQYXJhbXMpIHtcbiAgICAgICAgb3V0cHV0ICs9IHRoaXMuZ2VuZXJhdGVRdWVyeVN0cmluZyhwYXJhbXMucXVlcnlQYXJhbXMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH0sXG5cbiAgICBnZW5lcmF0ZVF1ZXJ5U3RyaW5nOiBmdW5jdGlvbiBnZW5lcmF0ZVF1ZXJ5U3RyaW5nKHBhcmFtcykge1xuICAgICAgdmFyIHBhaXJzID0gW107XG4gICAgICB2YXIga2V5cyA9IFtdO1xuICAgICAgZm9yICh2YXIga2V5IGluIHBhcmFtcykge1xuICAgICAgICBpZiAocGFyYW1zLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAga2V5cy5zb3J0KCk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0ga2V5cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICB2YXIgdmFsdWUgPSBwYXJhbXNba2V5XTtcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGFpciA9IGVuY29kZVVSSUNvbXBvbmVudChrZXkpO1xuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaiA8IGw7IGorKykge1xuICAgICAgICAgICAgdmFyIGFycmF5UGFpciA9IGtleSArICdbXScgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWVbal0pO1xuICAgICAgICAgICAgcGFpcnMucHVzaChhcnJheVBhaXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYWlyICs9IFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcbiAgICAgICAgICBwYWlycy5wdXNoKHBhaXIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwYWlycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gXCI/XCIgKyBwYWlycy5qb2luKFwiJlwiKTtcbiAgICB9LFxuXG4gICAgcGFyc2VRdWVyeVN0cmluZzogZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZyhxdWVyeVN0cmluZykge1xuICAgICAgdmFyIHBhaXJzID0gcXVlcnlTdHJpbmcuc3BsaXQoXCImXCIpLFxuICAgICAgICAgIHF1ZXJ5UGFyYW1zID0ge307XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhaXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBwYWlyID0gcGFpcnNbaV0uc3BsaXQoJz0nKSxcbiAgICAgICAgICAgIGtleSA9IGRlY29kZVF1ZXJ5UGFyYW1QYXJ0KHBhaXJbMF0pLFxuICAgICAgICAgICAga2V5TGVuZ3RoID0ga2V5Lmxlbmd0aCxcbiAgICAgICAgICAgIGlzQXJyYXkgPSBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlO1xuICAgICAgICBpZiAocGFpci5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICB2YWx1ZSA9ICd0cnVlJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvL0hhbmRsZSBhcnJheXNcbiAgICAgICAgICBpZiAoa2V5TGVuZ3RoID4gMiAmJiBrZXkuc2xpY2Uoa2V5TGVuZ3RoIC0gMikgPT09ICdbXScpIHtcbiAgICAgICAgICAgIGlzQXJyYXkgPSB0cnVlO1xuICAgICAgICAgICAga2V5ID0ga2V5LnNsaWNlKDAsIGtleUxlbmd0aCAtIDIpO1xuICAgICAgICAgICAgaWYgKCFxdWVyeVBhcmFtc1trZXldKSB7XG4gICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW2tleV0gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSBwYWlyWzFdID8gZGVjb2RlUXVlcnlQYXJhbVBhcnQocGFpclsxXSkgOiAnJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnJheSkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1zW2tleV0ucHVzaCh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcXVlcnlQYXJhbXNba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcXVlcnlQYXJhbXM7XG4gICAgfSxcblxuICAgIHJlY29nbml6ZTogZnVuY3Rpb24gcmVjb2duaXplKHBhdGgsIHNpbGVudCkge1xuICAgICAgbm9XYXJuaW5nID0gc2lsZW50O1xuICAgICAgdmFyIHN0YXRlcyA9IFt0aGlzLnJvb3RTdGF0ZV0sXG4gICAgICAgICAgcGF0aExlbixcbiAgICAgICAgICBpLFxuICAgICAgICAgIGwsXG4gICAgICAgICAgcXVlcnlTdGFydCxcbiAgICAgICAgICBxdWVyeVBhcmFtcyA9IHt9LFxuICAgICAgICAgIGlzU2xhc2hEcm9wcGVkID0gZmFsc2U7XG5cbiAgICAgIHF1ZXJ5U3RhcnQgPSBwYXRoLmluZGV4T2YoJz8nKTtcbiAgICAgIGlmIChxdWVyeVN0YXJ0ICE9PSAtMSkge1xuICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSBwYXRoLnN1YnN0cihxdWVyeVN0YXJ0ICsgMSwgcGF0aC5sZW5ndGgpO1xuICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHIoMCwgcXVlcnlTdGFydCk7XG4gICAgICAgIGlmIChxdWVyeVN0cmluZykge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1zID0gdGhpcy5wYXJzZVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwYXRoID0gdHJ5RGVjb2RlKHBhdGgpO1xuICAgICAgaWYgKCFwYXRoKSByZXR1cm47XG5cbiAgICAgIC8vIERFQlVHIEdST1VQIHBhdGhcblxuICAgICAgaWYgKHBhdGguY2hhckF0KDApICE9PSBcIi9cIikge1xuICAgICAgICBwYXRoID0gXCIvXCIgKyBwYXRoO1xuICAgICAgfVxuXG4gICAgICBwYXRoTGVuID0gcGF0aC5sZW5ndGg7XG4gICAgICBpZiAocGF0aExlbiA+IDEgJiYgcGF0aC5jaGFyQXQocGF0aExlbiAtIDEpID09PSBcIi9cIikge1xuICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHIoMCwgcGF0aExlbiAtIDEpO1xuICAgICAgICBpc1NsYXNoRHJvcHBlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGZvciAoaSA9IDAsIGwgPSBwYXRoLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBzdGF0ZXMgPSByZWNvZ25pemVDaGFyKHN0YXRlcywgcGF0aC5jaGFyQXQoaSkpO1xuICAgICAgICBpZiAoIXN0YXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBFTkQgREVCVUcgR1JPVVBcblxuICAgICAgdmFyIHNvbHV0aW9ucyA9IFtdO1xuICAgICAgZm9yIChpID0gMCwgbCA9IHN0YXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKHN0YXRlc1tpXS5oYW5kbGVycykge1xuICAgICAgICAgIHNvbHV0aW9ucy5wdXNoKHN0YXRlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgc3RhdGVzID0gc29ydFNvbHV0aW9ucyhzb2x1dGlvbnMpO1xuXG4gICAgICB2YXIgc3RhdGUgPSBzb2x1dGlvbnNbMF07XG5cbiAgICAgIGlmIChzdGF0ZSAmJiBzdGF0ZS5oYW5kbGVycykge1xuICAgICAgICAvLyBpZiBhIHRyYWlsaW5nIHNsYXNoIHdhcyBkcm9wcGVkIGFuZCBhIHN0YXIgc2VnbWVudCBpcyB0aGUgbGFzdCBzZWdtZW50XG4gICAgICAgIC8vIHNwZWNpZmllZCwgcHV0IHRoZSB0cmFpbGluZyBzbGFzaCBiYWNrXG4gICAgICAgIGlmIChpc1NsYXNoRHJvcHBlZCAmJiBzdGF0ZS5yZWdleC5zb3VyY2Uuc2xpY2UoLTUpID09PSBcIiguKykkXCIpIHtcbiAgICAgICAgICBwYXRoID0gcGF0aCArIFwiL1wiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaW5kSGFuZGxlcihzdGF0ZSwgcGF0aCwgcXVlcnlQYXJhbXMpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBSb3V0ZVJlY29nbml6ZXIucHJvdG90eXBlLm1hcCA9IG1hcDtcblxuICB2YXIgZ2VuUXVlcnkgPSBSb3V0ZVJlY29nbml6ZXIucHJvdG90eXBlLmdlbmVyYXRlUXVlcnlTdHJpbmc7XG5cbiAgLy8gZXhwb3J0IGRlZmF1bHQgZm9yIGhvbGRpbmcgdGhlIFZ1ZSByZWZlcmVuY2VcbiAgdmFyIGV4cG9ydHMkMSA9IHt9O1xuICAvKipcbiAgICogV2FybiBzdHVmZi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1zZ1xuICAgKi9cblxuICBmdW5jdGlvbiB3YXJuJDEobXNnKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbdnVlLXJvdXRlcl0gJyArIG1zZyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc29sdmUgYSByZWxhdGl2ZSBwYXRoLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gYmFzZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gcmVsYXRpdmVcbiAgICogQHBhcmFtIHtCb29sZWFufSBhcHBlbmRcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cblxuICBmdW5jdGlvbiByZXNvbHZlUGF0aChiYXNlLCByZWxhdGl2ZSwgYXBwZW5kKSB7XG4gICAgdmFyIHF1ZXJ5ID0gYmFzZS5tYXRjaCgvKFxcPy4qKSQvKTtcbiAgICBpZiAocXVlcnkpIHtcbiAgICAgIHF1ZXJ5ID0gcXVlcnlbMV07XG4gICAgICBiYXNlID0gYmFzZS5zbGljZSgwLCAtcXVlcnkubGVuZ3RoKTtcbiAgICB9XG4gICAgLy8gYSBxdWVyeSFcbiAgICBpZiAocmVsYXRpdmUuY2hhckF0KDApID09PSAnPycpIHtcbiAgICAgIHJldHVybiBiYXNlICsgcmVsYXRpdmU7XG4gICAgfVxuICAgIHZhciBzdGFjayA9IGJhc2Uuc3BsaXQoJy8nKTtcbiAgICAvLyByZW1vdmUgdHJhaWxpbmcgc2VnbWVudCBpZjpcbiAgICAvLyAtIG5vdCBhcHBlbmRpbmdcbiAgICAvLyAtIGFwcGVuZGluZyB0byB0cmFpbGluZyBzbGFzaCAobGFzdCBzZWdtZW50IGlzIGVtcHR5KVxuICAgIGlmICghYXBwZW5kIHx8ICFzdGFja1tzdGFjay5sZW5ndGggLSAxXSkge1xuICAgICAgc3RhY2sucG9wKCk7XG4gICAgfVxuICAgIC8vIHJlc29sdmUgcmVsYXRpdmUgcGF0aFxuICAgIHZhciBzZWdtZW50cyA9IHJlbGF0aXZlLnJlcGxhY2UoL15cXC8vLCAnJykuc3BsaXQoJy8nKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2ldO1xuICAgICAgaWYgKHNlZ21lbnQgPT09ICcuJykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAoc2VnbWVudCA9PT0gJy4uJykge1xuICAgICAgICBzdGFjay5wb3AoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YWNrLnB1c2goc2VnbWVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGVuc3VyZSBsZWFkaW5nIHNsYXNoXG4gICAgaWYgKHN0YWNrWzBdICE9PSAnJykge1xuICAgICAgc3RhY2sudW5zaGlmdCgnJyk7XG4gICAgfVxuICAgIHJldHVybiBzdGFjay5qb2luKCcvJyk7XG4gIH1cblxuICAvKipcbiAgICogRm9yZ2l2aW5nIGNoZWNrIGZvciBhIHByb21pc2VcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHBcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gaXNQcm9taXNlKHApIHtcbiAgICByZXR1cm4gcCAmJiB0eXBlb2YgcC50aGVuID09PSAnZnVuY3Rpb24nO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpdmUgYSByb3V0ZSBjb25maWcgZmllbGQgZnJvbSBhIGNvbXBvbmVudCBpbnN0YW5jZVxuICAgKiBPUiBhIGNvbXBvbmVudCBjb250cnVjdG9yLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufFZ1ZX0gY29tcG9uZW50XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4geyp9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGdldFJvdXRlQ29uZmlnKGNvbXBvbmVudCwgbmFtZSkge1xuICAgIHZhciBvcHRpb25zID0gY29tcG9uZW50ICYmIChjb21wb25lbnQuJG9wdGlvbnMgfHwgY29tcG9uZW50Lm9wdGlvbnMpO1xuICAgIHJldHVybiBvcHRpb25zICYmIG9wdGlvbnMucm91dGUgJiYgb3B0aW9ucy5yb3V0ZVtuYW1lXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNvbHZlIGFuIGFzeW5jIGNvbXBvbmVudCBmYWN0b3J5LiBIYXZlIHRvIGRvIGEgZGlydHlcbiAgICogbW9jayBoZXJlIGJlY2F1c2Ugb2YgVnVlIGNvcmUncyBpbnRlcm5hbCBBUEkgZGVwZW5kcyBvblxuICAgKiBhbiBJRCBjaGVjay5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICovXG5cbiAgdmFyIHJlc29sdmVyID0gdW5kZWZpbmVkO1xuXG4gIGZ1bmN0aW9uIHJlc29sdmVBc3luY0NvbXBvbmVudChoYW5kbGVyLCBjYikge1xuICAgIGlmICghcmVzb2x2ZXIpIHtcbiAgICAgIHJlc29sdmVyID0ge1xuICAgICAgICByZXNvbHZlOiBleHBvcnRzJDEuVnVlLnByb3RvdHlwZS5fcmVzb2x2ZUNvbXBvbmVudCxcbiAgICAgICAgJG9wdGlvbnM6IHtcbiAgICAgICAgICBjb21wb25lbnRzOiB7XG4gICAgICAgICAgICBfOiBoYW5kbGVyLmNvbXBvbmVudFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzb2x2ZXIuJG9wdGlvbnMuY29tcG9uZW50cy5fID0gaGFuZGxlci5jb21wb25lbnQ7XG4gICAgfVxuICAgIHJlc29sdmVyLnJlc29sdmUoJ18nLCBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gICAgICBoYW5kbGVyLmNvbXBvbmVudCA9IENvbXBvbmVudDtcbiAgICAgIGNiKENvbXBvbmVudCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTWFwIHRoZSBkeW5hbWljIHNlZ21lbnRzIGluIGEgcGF0aCB0byBwYXJhbXMuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXNcbiAgICogQHBhcmFtIHtPYmplY3R9IHF1ZXJ5XG4gICAqL1xuXG4gIGZ1bmN0aW9uIG1hcFBhcmFtcyhwYXRoLCBwYXJhbXMsIHF1ZXJ5KSB7XG4gICAgaWYgKHBhcmFtcyA9PT0gdW5kZWZpbmVkKSBwYXJhbXMgPSB7fTtcblxuICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoLzooW15cXC9dKykvZywgZnVuY3Rpb24gKF8sIGtleSkge1xuICAgICAgdmFyIHZhbCA9IHBhcmFtc1trZXldO1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoIXZhbCkge1xuICAgICAgICB3YXJuJDEoJ3BhcmFtIFwiJyArIGtleSArICdcIiBub3QgZm91bmQgd2hlbiBnZW5lcmF0aW5nICcgKyAncGF0aCBmb3IgXCInICsgcGF0aCArICdcIiB3aXRoIHBhcmFtcyAnICsgSlNPTi5zdHJpbmdpZnkocGFyYW1zKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsIHx8ICcnO1xuICAgIH0pO1xuICAgIGlmIChxdWVyeSkge1xuICAgICAgcGF0aCArPSBnZW5RdWVyeShxdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiBwYXRoO1xuICB9XG5cbiAgdmFyIGhhc2hSRSA9IC8jLiokLztcblxuICB2YXIgSFRNTDVIaXN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIVE1MNUhpc3RvcnkoX3JlZikge1xuICAgICAgdmFyIHJvb3QgPSBfcmVmLnJvb3Q7XG4gICAgICB2YXIgb25DaGFuZ2UgPSBfcmVmLm9uQ2hhbmdlO1xuICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIEhUTUw1SGlzdG9yeSk7XG5cbiAgICAgIGlmIChyb290ICYmIHJvb3QgIT09ICcvJykge1xuICAgICAgICAvLyBtYWtlIHN1cmUgdGhlcmUncyB0aGUgc3RhcnRpbmcgc2xhc2hcbiAgICAgICAgaWYgKHJvb3QuY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgICAgICByb290ID0gJy8nICsgcm9vdDtcbiAgICAgICAgfVxuICAgICAgICAvLyByZW1vdmUgdHJhaWxpbmcgc2xhc2hcbiAgICAgICAgdGhpcy5yb290ID0gcm9vdC5yZXBsYWNlKC9cXC8kLywgJycpO1xuICAgICAgICB0aGlzLnJvb3RSRSA9IG5ldyBSZWdFeHAoJ15cXFxcJyArIHRoaXMucm9vdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJvb3QgPSBudWxsO1xuICAgICAgfVxuICAgICAgdGhpcy5vbkNoYW5nZSA9IG9uQ2hhbmdlO1xuICAgICAgLy8gY2hlY2sgYmFzZSB0YWdcbiAgICAgIHZhciBiYXNlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdiYXNlJyk7XG4gICAgICB0aGlzLmJhc2UgPSBiYXNlRWwgJiYgYmFzZUVsLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuICAgIH1cblxuICAgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgdXJsID0gbG9jYXRpb24ucGF0aG5hbWUgKyBsb2NhdGlvbi5zZWFyY2g7XG4gICAgICAgIGlmIChfdGhpcy5yb290KSB7XG4gICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoX3RoaXMucm9vdFJFLCAnJyk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMub25DaGFuZ2UodXJsLCBlICYmIGUuc3RhdGUsIGxvY2F0aW9uLmhhc2gpO1xuICAgICAgfTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHRoaXMubGlzdGVuZXIpO1xuICAgICAgdGhpcy5saXN0ZW5lcigpO1xuICAgIH07XG5cbiAgICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5saXN0ZW5lcik7XG4gICAgfTtcblxuICAgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyhwYXRoLCByZXBsYWNlLCBhcHBlbmQpIHtcbiAgICAgIHZhciB1cmwgPSB0aGlzLmZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKTtcbiAgICAgIGlmIChyZXBsYWNlKSB7XG4gICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCAnJywgdXJsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHJlY29yZCBzY3JvbGwgcG9zaXRpb24gYnkgcmVwbGFjaW5nIGN1cnJlbnQgc3RhdGVcbiAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoe1xuICAgICAgICAgIHBvczoge1xuICAgICAgICAgICAgeDogd2luZG93LnBhZ2VYT2Zmc2V0LFxuICAgICAgICAgICAgeTogd2luZG93LnBhZ2VZT2Zmc2V0XG4gICAgICAgICAgfVxuICAgICAgICB9LCAnJywgbG9jYXRpb24uaHJlZik7XG4gICAgICAgIC8vIHRoZW4gcHVzaCBuZXcgc3RhdGVcbiAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoe30sICcnLCB1cmwpO1xuICAgICAgfVxuICAgICAgdmFyIGhhc2hNYXRjaCA9IHBhdGgubWF0Y2goaGFzaFJFKTtcbiAgICAgIHZhciBoYXNoID0gaGFzaE1hdGNoICYmIGhhc2hNYXRjaFswXTtcbiAgICAgIHBhdGggPSB1cmxcbiAgICAgIC8vIHN0cmlwIGhhc2ggc28gaXQgZG9lc24ndCBtZXNzIHVwIHBhcmFtc1xuICAgICAgLnJlcGxhY2UoaGFzaFJFLCAnJylcbiAgICAgIC8vIHJlbW92ZSByb290IGJlZm9yZSBtYXRjaGluZ1xuICAgICAgLnJlcGxhY2UodGhpcy5yb290UkUsICcnKTtcbiAgICAgIHRoaXMub25DaGFuZ2UocGF0aCwgbnVsbCwgaGFzaCk7XG4gICAgfTtcblxuICAgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuZm9ybWF0UGF0aCA9IGZ1bmN0aW9uIGZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKSB7XG4gICAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJ1xuICAgICAgLy8gYWJzb2x1dGUgcGF0aFxuICAgICAgPyB0aGlzLnJvb3QgPyB0aGlzLnJvb3QgKyAnLycgKyBwYXRoLnJlcGxhY2UoL15cXC8vLCAnJykgOiBwYXRoIDogcmVzb2x2ZVBhdGgodGhpcy5iYXNlIHx8IGxvY2F0aW9uLnBhdGhuYW1lLCBwYXRoLCBhcHBlbmQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gSFRNTDVIaXN0b3J5O1xuICB9KSgpO1xuXG4gIHZhciBIYXNoSGlzdG9yeSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSGFzaEhpc3RvcnkoX3JlZikge1xuICAgICAgdmFyIGhhc2hiYW5nID0gX3JlZi5oYXNoYmFuZztcbiAgICAgIHZhciBvbkNoYW5nZSA9IF9yZWYub25DaGFuZ2U7XG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgSGFzaEhpc3RvcnkpO1xuXG4gICAgICB0aGlzLmhhc2hiYW5nID0gaGFzaGJhbmc7XG4gICAgICB0aGlzLm9uQ2hhbmdlID0gb25DaGFuZ2U7XG4gICAgfVxuXG4gICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGF0aCA9IGxvY2F0aW9uLmhhc2g7XG4gICAgICAgIHZhciByYXcgPSBwYXRoLnJlcGxhY2UoL14jIT8vLCAnJyk7XG4gICAgICAgIC8vIGFsd2F5c1xuICAgICAgICBpZiAocmF3LmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICAgICAgcmF3ID0gJy8nICsgcmF3O1xuICAgICAgICB9XG4gICAgICAgIHZhciBmb3JtYXR0ZWRQYXRoID0gc2VsZi5mb3JtYXRQYXRoKHJhdyk7XG4gICAgICAgIGlmIChmb3JtYXR0ZWRQYXRoICE9PSBwYXRoKSB7XG4gICAgICAgICAgbG9jYXRpb24ucmVwbGFjZShmb3JtYXR0ZWRQYXRoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gZGV0ZXJtaW5lIHF1ZXJ5XG4gICAgICAgIC8vIG5vdGUgaXQncyBwb3NzaWJsZSB0byBoYXZlIHF1ZXJpZXMgaW4gYm90aCB0aGUgYWN0dWFsIFVSTFxuICAgICAgICAvLyBhbmQgdGhlIGhhc2ggZnJhZ21lbnQgaXRzZWxmLlxuICAgICAgICB2YXIgcXVlcnkgPSBsb2NhdGlvbi5zZWFyY2ggJiYgcGF0aC5pbmRleE9mKCc/JykgPiAtMSA/ICcmJyArIGxvY2F0aW9uLnNlYXJjaC5zbGljZSgxKSA6IGxvY2F0aW9uLnNlYXJjaDtcbiAgICAgICAgc2VsZi5vbkNoYW5nZShwYXRoLnJlcGxhY2UoL14jIT8vLCAnJykgKyBxdWVyeSk7XG4gICAgICB9O1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICAgIHRoaXMubGlzdGVuZXIoKTtcbiAgICB9O1xuXG4gICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICB9O1xuXG4gICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gZ28ocGF0aCwgcmVwbGFjZSwgYXBwZW5kKSB7XG4gICAgICBwYXRoID0gdGhpcy5mb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCk7XG4gICAgICBpZiAocmVwbGFjZSkge1xuICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKHBhdGgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9jYXRpb24uaGFzaCA9IHBhdGg7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEhhc2hIaXN0b3J5LnByb3RvdHlwZS5mb3JtYXRQYXRoID0gZnVuY3Rpb24gZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpIHtcbiAgICAgIHZhciBpc0Fic29sb3V0ZSA9IHBhdGguY2hhckF0KDApID09PSAnLyc7XG4gICAgICB2YXIgcHJlZml4ID0gJyMnICsgKHRoaXMuaGFzaGJhbmcgPyAnIScgOiAnJyk7XG4gICAgICByZXR1cm4gaXNBYnNvbG91dGUgPyBwcmVmaXggKyBwYXRoIDogcHJlZml4ICsgcmVzb2x2ZVBhdGgobG9jYXRpb24uaGFzaC5yZXBsYWNlKC9eIyE/LywgJycpLCBwYXRoLCBhcHBlbmQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gSGFzaEhpc3Rvcnk7XG4gIH0pKCk7XG5cbiAgdmFyIEFic3RyYWN0SGlzdG9yeSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQWJzdHJhY3RIaXN0b3J5KF9yZWYpIHtcbiAgICAgIHZhciBvbkNoYW5nZSA9IF9yZWYub25DaGFuZ2U7XG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgQWJzdHJhY3RIaXN0b3J5KTtcblxuICAgICAgdGhpcy5vbkNoYW5nZSA9IG9uQ2hhbmdlO1xuICAgICAgdGhpcy5jdXJyZW50UGF0aCA9ICcvJztcbiAgICB9XG5cbiAgICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICB0aGlzLm9uQ2hhbmdlKCcvJyk7XG4gICAgfTtcblxuICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICAvLyBub29wXG4gICAgfTtcblxuICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyhwYXRoLCByZXBsYWNlLCBhcHBlbmQpIHtcbiAgICAgIHBhdGggPSB0aGlzLmN1cnJlbnRQYXRoID0gdGhpcy5mb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCk7XG4gICAgICB0aGlzLm9uQ2hhbmdlKHBhdGgpO1xuICAgIH07XG5cbiAgICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLmZvcm1hdFBhdGggPSBmdW5jdGlvbiBmb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCkge1xuICAgICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLycgPyBwYXRoIDogcmVzb2x2ZVBhdGgodGhpcy5jdXJyZW50UGF0aCwgcGF0aCwgYXBwZW5kKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEFic3RyYWN0SGlzdG9yeTtcbiAgfSkoKTtcblxuICAvKipcbiAgICogRGV0ZXJtaW5lIHRoZSByZXVzYWJpbGl0eSBvZiBhbiBleGlzdGluZyByb3V0ZXIgdmlldy5cbiAgICpcbiAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcbiAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcbiAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNhblJldXNlKHZpZXcsIGhhbmRsZXIsIHRyYW5zaXRpb24pIHtcbiAgICB2YXIgY29tcG9uZW50ID0gdmlldy5jaGlsZFZNO1xuICAgIGlmICghY29tcG9uZW50IHx8ICFoYW5kbGVyKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIGltcG9ydGFudDogY2hlY2sgdmlldy5Db21wb25lbnQgaGVyZSBiZWNhdXNlIGl0IG1heVxuICAgIC8vIGhhdmUgYmVlbiBjaGFuZ2VkIGluIGFjdGl2YXRlIGhvb2tcbiAgICBpZiAodmlldy5Db21wb25lbnQgIT09IGhhbmRsZXIuY29tcG9uZW50KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciBjYW5SZXVzZUZuID0gZ2V0Um91dGVDb25maWcoY29tcG9uZW50LCAnY2FuUmV1c2UnKTtcbiAgICByZXR1cm4gdHlwZW9mIGNhblJldXNlRm4gPT09ICdib29sZWFuJyA/IGNhblJldXNlRm4gOiBjYW5SZXVzZUZuID8gY2FuUmV1c2VGbi5jYWxsKGNvbXBvbmVudCwge1xuICAgICAgdG86IHRyYW5zaXRpb24udG8sXG4gICAgICBmcm9tOiB0cmFuc2l0aW9uLmZyb21cbiAgICB9KSA6IHRydWU7IC8vIGRlZmF1bHRzIHRvIHRydWVcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIGNvbXBvbmVudCBjYW4gZGVhY3RpdmF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcbiAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRcbiAgICovXG5cbiAgZnVuY3Rpb24gY2FuRGVhY3RpdmF0ZSh2aWV3LCB0cmFuc2l0aW9uLCBuZXh0KSB7XG4gICAgdmFyIGZyb21Db21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG4gICAgdmFyIGhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhmcm9tQ29tcG9uZW50LCAnY2FuRGVhY3RpdmF0ZScpO1xuICAgIGlmICghaG9vaykge1xuICAgICAgbmV4dCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cmFuc2l0aW9uLmNhbGxIb29rKGhvb2ssIGZyb21Db21wb25lbnQsIG5leHQsIHtcbiAgICAgICAgZXhwZWN0Qm9vbGVhbjogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgY29tcG9uZW50IGNhbiBhY3RpdmF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcbiAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRcbiAgICovXG5cbiAgZnVuY3Rpb24gY2FuQWN0aXZhdGUoaGFuZGxlciwgdHJhbnNpdGlvbiwgbmV4dCkge1xuICAgIHJlc29sdmVBc3luY0NvbXBvbmVudChoYW5kbGVyLCBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gICAgICAvLyBoYXZlIHRvIGNoZWNrIGR1ZSB0byBhc3luYy1uZXNzXG4gICAgICBpZiAodHJhbnNpdGlvbi5hYm9ydGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIGRldGVybWluZSBpZiB0aGlzIGNvbXBvbmVudCBjYW4gYmUgYWN0aXZhdGVkXG4gICAgICB2YXIgaG9vayA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ2NhbkFjdGl2YXRlJyk7XG4gICAgICBpZiAoIWhvb2spIHtcbiAgICAgICAgbmV4dCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJhbnNpdGlvbi5jYWxsSG9vayhob29rLCBudWxsLCBuZXh0LCB7XG4gICAgICAgICAgZXhwZWN0Qm9vbGVhbjogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsIGRlYWN0aXZhdGUgaG9va3MgZm9yIGV4aXN0aW5nIHJvdXRlci12aWV3cy5cbiAgICpcbiAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcbiAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRcbiAgICovXG5cbiAgZnVuY3Rpb24gZGVhY3RpdmF0ZSh2aWV3LCB0cmFuc2l0aW9uLCBuZXh0KSB7XG4gICAgdmFyIGNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcbiAgICB2YXIgaG9vayA9IGdldFJvdXRlQ29uZmlnKGNvbXBvbmVudCwgJ2RlYWN0aXZhdGUnKTtcbiAgICBpZiAoIWhvb2spIHtcbiAgICAgIG5leHQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJhbnNpdGlvbi5jYWxsSG9va3MoaG9vaywgY29tcG9uZW50LCBuZXh0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWN0aXZhdGUgLyBzd2l0Y2ggY29tcG9uZW50IGZvciBhIHJvdXRlci12aWV3LlxuICAgKlxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRlcHRoXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgZnVuY3Rpb24gYWN0aXZhdGUodmlldywgdHJhbnNpdGlvbiwgZGVwdGgsIGNiLCByZXVzZSkge1xuICAgIHZhciBoYW5kbGVyID0gdHJhbnNpdGlvbi5hY3RpdmF0ZVF1ZXVlW2RlcHRoXTtcbiAgICBpZiAoIWhhbmRsZXIpIHtcbiAgICAgIHNhdmVDaGlsZFZpZXcodmlldyk7XG4gICAgICBpZiAodmlldy5fYm91bmQpIHtcbiAgICAgICAgdmlldy5zZXRDb21wb25lbnQobnVsbCk7XG4gICAgICB9XG4gICAgICBjYiAmJiBjYigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBDb21wb25lbnQgPSB2aWV3LkNvbXBvbmVudCA9IGhhbmRsZXIuY29tcG9uZW50O1xuICAgIHZhciBhY3RpdmF0ZUhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhDb21wb25lbnQsICdhY3RpdmF0ZScpO1xuICAgIHZhciBkYXRhSG9vayA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ2RhdGEnKTtcbiAgICB2YXIgd2FpdEZvckRhdGEgPSBnZXRSb3V0ZUNvbmZpZyhDb21wb25lbnQsICd3YWl0Rm9yRGF0YScpO1xuXG4gICAgdmlldy5kZXB0aCA9IGRlcHRoO1xuICAgIHZpZXcuYWN0aXZhdGVkID0gZmFsc2U7XG5cbiAgICB2YXIgY29tcG9uZW50ID0gdW5kZWZpbmVkO1xuICAgIHZhciBsb2FkaW5nID0gISEoZGF0YUhvb2sgJiYgIXdhaXRGb3JEYXRhKTtcblxuICAgIC8vIFwicmV1c2VcIiBpcyBhIGZsYWcgcGFzc2VkIGRvd24gd2hlbiB0aGUgcGFyZW50IHZpZXcgaXNcbiAgICAvLyBlaXRoZXIgcmV1c2VkIHZpYSBrZWVwLWFsaXZlIG9yIGFzIGEgY2hpbGQgb2YgYSBrZXB0LWFsaXZlIHZpZXcuXG4gICAgLy8gb2YgY291cnNlIHdlIGNhbiBvbmx5IHJldXNlIGlmIHRoZSBjdXJyZW50IGtlcHQtYWxpdmUgaW5zdGFuY2VcbiAgICAvLyBpcyBvZiB0aGUgY29ycmVjdCB0eXBlLlxuICAgIHJldXNlID0gcmV1c2UgJiYgdmlldy5jaGlsZFZNICYmIHZpZXcuY2hpbGRWTS5jb25zdHJ1Y3RvciA9PT0gQ29tcG9uZW50O1xuXG4gICAgaWYgKHJldXNlKSB7XG4gICAgICAvLyBqdXN0IHJldXNlXG4gICAgICBjb21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG4gICAgICBjb21wb25lbnQuJGxvYWRpbmdSb3V0ZURhdGEgPSBsb2FkaW5nO1xuICAgIH0gZWxzZSB7XG4gICAgICBzYXZlQ2hpbGRWaWV3KHZpZXcpO1xuXG4gICAgICAvLyB1bmJ1aWxkIGN1cnJlbnQgY29tcG9uZW50LiB0aGlzIHN0ZXAgYWxzbyBkZXN0cm95c1xuICAgICAgLy8gYW5kIHJlbW92ZXMgYWxsIG5lc3RlZCBjaGlsZCB2aWV3cy5cbiAgICAgIHZpZXcudW5idWlsZCh0cnVlKTtcblxuICAgICAgLy8gYnVpbGQgdGhlIG5ldyBjb21wb25lbnQuIHRoaXMgd2lsbCBhbHNvIGNyZWF0ZSB0aGVcbiAgICAgIC8vIGRpcmVjdCBjaGlsZCB2aWV3IG9mIHRoZSBjdXJyZW50IG9uZS4gaXQgd2lsbCByZWdpc3RlclxuICAgICAgLy8gaXRzZWxmIGFzIHZpZXcuY2hpbGRWaWV3LlxuICAgICAgY29tcG9uZW50ID0gdmlldy5idWlsZCh7XG4gICAgICAgIF9tZXRhOiB7XG4gICAgICAgICAgJGxvYWRpbmdSb3V0ZURhdGE6IGxvYWRpbmdcbiAgICAgICAgfSxcbiAgICAgICAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHtcbiAgICAgICAgICB0aGlzLl9yb3V0ZXJWaWV3ID0gdmlldztcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGhhbmRsZSBrZWVwLWFsaXZlLlxuICAgICAgLy8gd2hlbiBhIGtlcHQtYWxpdmUgY2hpbGQgdm0gaXMgcmVzdG9yZWQsIHdlIG5lZWQgdG9cbiAgICAgIC8vIGFkZCBpdHMgY2FjaGVkIGNoaWxkIHZpZXdzIGludG8gdGhlIHJvdXRlcidzIHZpZXcgbGlzdCxcbiAgICAgIC8vIGFuZCBhbHNvIHByb3Blcmx5IHVwZGF0ZSBjdXJyZW50IHZpZXcncyBjaGlsZCB2aWV3LlxuICAgICAgaWYgKHZpZXcua2VlcEFsaXZlKSB7XG4gICAgICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IGxvYWRpbmc7XG4gICAgICAgIHZhciBjYWNoZWRDaGlsZFZpZXcgPSBjb21wb25lbnQuX2tlZXBBbGl2ZVJvdXRlclZpZXc7XG4gICAgICAgIGlmIChjYWNoZWRDaGlsZFZpZXcpIHtcbiAgICAgICAgICB2aWV3LmNoaWxkVmlldyA9IGNhY2hlZENoaWxkVmlldztcbiAgICAgICAgICBjb21wb25lbnQuX2tlZXBBbGl2ZVJvdXRlclZpZXcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gY2xlYW51cCB0aGUgY29tcG9uZW50IGluIGNhc2UgdGhlIHRyYW5zaXRpb24gaXMgYWJvcnRlZFxuICAgIC8vIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIGV2ZXIgaW5zZXJ0ZWQuXG4gICAgdmFyIGNsZWFudXAgPSBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgICAgY29tcG9uZW50LiRkZXN0cm95KCk7XG4gICAgfTtcblxuICAgIC8vIGFjdHVhbGx5IGluc2VydCB0aGUgY29tcG9uZW50IGFuZCB0cmlnZ2VyIHRyYW5zaXRpb25cbiAgICB2YXIgaW5zZXJ0ID0gZnVuY3Rpb24gaW5zZXJ0KCkge1xuICAgICAgaWYgKHJldXNlKSB7XG4gICAgICAgIGNiICYmIGNiKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciByb3V0ZXIgPSB0cmFuc2l0aW9uLnJvdXRlcjtcbiAgICAgIGlmIChyb3V0ZXIuX3JlbmRlcmVkIHx8IHJvdXRlci5fdHJhbnNpdGlvbk9uTG9hZCkge1xuICAgICAgICB2aWV3LnRyYW5zaXRpb24oY29tcG9uZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG5vIHRyYW5zaXRpb24gb24gZmlyc3QgcmVuZGVyLCBtYW51YWwgdHJhbnNpdGlvblxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHZpZXcuc2V0Q3VycmVudCkge1xuICAgICAgICAgIC8vIDAuMTIgY29tcGF0XG4gICAgICAgICAgdmlldy5zZXRDdXJyZW50KGNvbXBvbmVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gMS4wXG4gICAgICAgICAgdmlldy5jaGlsZFZNID0gY29tcG9uZW50O1xuICAgICAgICB9XG4gICAgICAgIGNvbXBvbmVudC4kYmVmb3JlKHZpZXcuYW5jaG9yLCBudWxsLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICBjYiAmJiBjYigpO1xuICAgIH07XG5cbiAgICB2YXIgYWZ0ZXJEYXRhID0gZnVuY3Rpb24gYWZ0ZXJEYXRhKCkge1xuICAgICAgLy8gYWN0aXZhdGUgdGhlIGNoaWxkIHZpZXdcbiAgICAgIGlmICh2aWV3LmNoaWxkVmlldykge1xuICAgICAgICBhY3RpdmF0ZSh2aWV3LmNoaWxkVmlldywgdHJhbnNpdGlvbiwgZGVwdGggKyAxLCBudWxsLCByZXVzZSB8fCB2aWV3LmtlZXBBbGl2ZSk7XG4gICAgICB9XG4gICAgICBpbnNlcnQoKTtcbiAgICB9O1xuXG4gICAgLy8gY2FsbGVkIGFmdGVyIGFjdGl2YXRpb24gaG9vayBpcyByZXNvbHZlZFxuICAgIHZhciBhZnRlckFjdGl2YXRlID0gZnVuY3Rpb24gYWZ0ZXJBY3RpdmF0ZSgpIHtcbiAgICAgIHZpZXcuYWN0aXZhdGVkID0gdHJ1ZTtcbiAgICAgIGlmIChkYXRhSG9vayAmJiB3YWl0Rm9yRGF0YSkge1xuICAgICAgICAvLyB3YWl0IHVudGlsIGRhdGEgbG9hZGVkIHRvIGluc2VydFxuICAgICAgICBsb2FkRGF0YShjb21wb25lbnQsIHRyYW5zaXRpb24sIGRhdGFIb29rLCBhZnRlckRhdGEsIGNsZWFudXApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbG9hZCBkYXRhIGFuZCBpbnNlcnQgYXQgdGhlIHNhbWUgdGltZVxuICAgICAgICBpZiAoZGF0YUhvb2spIHtcbiAgICAgICAgICBsb2FkRGF0YShjb21wb25lbnQsIHRyYW5zaXRpb24sIGRhdGFIb29rKTtcbiAgICAgICAgfVxuICAgICAgICBhZnRlckRhdGEoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKGFjdGl2YXRlSG9vaykge1xuICAgICAgdHJhbnNpdGlvbi5jYWxsSG9va3MoYWN0aXZhdGVIb29rLCBjb21wb25lbnQsIGFmdGVyQWN0aXZhdGUsIHtcbiAgICAgICAgY2xlYW51cDogY2xlYW51cCxcbiAgICAgICAgcG9zdEFjdGl2YXRlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWZ0ZXJBY3RpdmF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXVzZSBhIHZpZXcsIGp1c3QgcmVsb2FkIGRhdGEgaWYgbmVjZXNzYXJ5LlxuICAgKlxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICovXG5cbiAgZnVuY3Rpb24gcmV1c2UodmlldywgdHJhbnNpdGlvbikge1xuICAgIHZhciBjb21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG4gICAgdmFyIGRhdGFIb29rID0gZ2V0Um91dGVDb25maWcoY29tcG9uZW50LCAnZGF0YScpO1xuICAgIGlmIChkYXRhSG9vaykge1xuICAgICAgbG9hZERhdGEoY29tcG9uZW50LCB0cmFuc2l0aW9uLCBkYXRhSG9vayk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFzeW5jaHJvbm91c2x5IGxvYWQgYW5kIGFwcGx5IGRhdGEgdG8gY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gY29tcG9uZW50XG4gICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNsZWFudXBcbiAgICovXG5cbiAgZnVuY3Rpb24gbG9hZERhdGEoY29tcG9uZW50LCB0cmFuc2l0aW9uLCBob29rLCBjYiwgY2xlYW51cCkge1xuICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IHRydWU7XG4gICAgdHJhbnNpdGlvbi5jYWxsSG9va3MoaG9vaywgY29tcG9uZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICBjb21wb25lbnQuJGxvYWRpbmdSb3V0ZURhdGEgPSBmYWxzZTtcbiAgICAgIGNvbXBvbmVudC4kZW1pdCgncm91dGUtZGF0YS1sb2FkZWQnLCBjb21wb25lbnQpO1xuICAgICAgY2IgJiYgY2IoKTtcbiAgICB9LCB7XG4gICAgICBjbGVhbnVwOiBjbGVhbnVwLFxuICAgICAgcG9zdEFjdGl2YXRlOiB0cnVlLFxuICAgICAgcHJvY2Vzc0RhdGE6IGZ1bmN0aW9uIHByb2Nlc3NEYXRhKGRhdGEpIHtcbiAgICAgICAgLy8gaGFuZGxlIHByb21pc2Ugc3VnYXIgc3ludGF4XG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xuICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChkYXRhKSkge1xuICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgdmFyIHZhbCA9IGRhdGFba2V5XTtcbiAgICAgICAgICAgIGlmIChpc1Byb21pc2UodmFsKSkge1xuICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHZhbC50aGVuKGZ1bmN0aW9uIChyZXNvbHZlZFZhbCkge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC4kc2V0KGtleSwgcmVzb2x2ZWRWYWwpO1xuICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb21wb25lbnQuJHNldChrZXksIHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb21pc2VzLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiBwcm9taXNlc1swXS5jb25zdHJ1Y3Rvci5hbGwocHJvbWlzZXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2F2ZSB0aGUgY2hpbGQgdmlldyBmb3IgYSBrZXB0LWFsaXZlIHZpZXcgc28gdGhhdFxuICAgKiB3ZSBjYW4gcmVzdG9yZSBpdCB3aGVuIGl0IGlzIHN3aXRjaGVkIGJhY2sgdG8uXG4gICAqXG4gICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XG4gICAqL1xuXG4gIGZ1bmN0aW9uIHNhdmVDaGlsZFZpZXcodmlldykge1xuICAgIGlmICh2aWV3LmtlZXBBbGl2ZSAmJiB2aWV3LmNoaWxkVk0gJiYgdmlldy5jaGlsZFZpZXcpIHtcbiAgICAgIHZpZXcuY2hpbGRWTS5fa2VlcEFsaXZlUm91dGVyVmlldyA9IHZpZXcuY2hpbGRWaWV3O1xuICAgIH1cbiAgICB2aWV3LmNoaWxkVmlldyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgcGxhaW4gb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbFxuICAgKi9cblxuICBmdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG4gIH1cblxuICAvKipcbiAgICogQSBSb3V0ZVRyYW5zaXRpb24gb2JqZWN0IG1hbmFnZXMgdGhlIHBpcGVsaW5lIG9mIGFcbiAgICogcm91dGVyLXZpZXcgc3dpdGNoaW5nIHByb2Nlc3MuIFRoaXMgaXMgYWxzbyB0aGUgb2JqZWN0XG4gICAqIHBhc3NlZCBpbnRvIHVzZXIgcm91dGUgaG9va3MuXG4gICAqXG4gICAqIEBwYXJhbSB7Um91dGVyfSByb3V0ZXJcbiAgICogQHBhcmFtIHtSb3V0ZX0gdG9cbiAgICogQHBhcmFtIHtSb3V0ZX0gZnJvbVxuICAgKi9cblxuICB2YXIgUm91dGVUcmFuc2l0aW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSb3V0ZVRyYW5zaXRpb24ocm91dGVyLCB0bywgZnJvbSkge1xuICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIFJvdXRlVHJhbnNpdGlvbik7XG5cbiAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgIHRoaXMubmV4dCA9IG51bGw7XG4gICAgICB0aGlzLmFib3J0ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFib3J0IGN1cnJlbnQgdHJhbnNpdGlvbiBhbmQgcmV0dXJuIHRvIHByZXZpb3VzIGxvY2F0aW9uLlxuICAgICAqL1xuXG4gICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5hYm9ydCA9IGZ1bmN0aW9uIGFib3J0KCkge1xuICAgICAgaWYgKCF0aGlzLmFib3J0ZWQpIHtcbiAgICAgICAgdGhpcy5hYm9ydGVkID0gdHJ1ZTtcbiAgICAgICAgLy8gaWYgdGhlIHJvb3QgcGF0aCB0aHJvd3MgYW4gZXJyb3IgZHVyaW5nIHZhbGlkYXRpb25cbiAgICAgICAgLy8gb24gaW5pdGlhbCBsb2FkLCBpdCBnZXRzIGNhdWdodCBpbiBhbiBpbmZpbml0ZSBsb29wLlxuICAgICAgICB2YXIgYWJvcnRpbmdPbkxvYWQgPSAhdGhpcy5mcm9tLnBhdGggJiYgdGhpcy50by5wYXRoID09PSAnLyc7XG4gICAgICAgIGlmICghYWJvcnRpbmdPbkxvYWQpIHtcbiAgICAgICAgICB0aGlzLnJvdXRlci5yZXBsYWNlKHRoaXMuZnJvbS5wYXRoIHx8ICcvJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWJvcnQgY3VycmVudCB0cmFuc2l0aW9uIGFuZCByZWRpcmVjdCB0byBhIG5ldyBsb2NhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAgICovXG5cbiAgICBSb3V0ZVRyYW5zaXRpb24ucHJvdG90eXBlLnJlZGlyZWN0ID0gZnVuY3Rpb24gcmVkaXJlY3QocGF0aCkge1xuICAgICAgaWYgKCF0aGlzLmFib3J0ZWQpIHtcbiAgICAgICAgdGhpcy5hYm9ydGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHBhdGggPSBtYXBQYXJhbXMocGF0aCwgdGhpcy50by5wYXJhbXMsIHRoaXMudG8ucXVlcnkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhdGgucGFyYW1zID0gcGF0aC5wYXJhbXMgfHwgdGhpcy50by5wYXJhbXM7XG4gICAgICAgICAgcGF0aC5xdWVyeSA9IHBhdGgucXVlcnkgfHwgdGhpcy50by5xdWVyeTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJvdXRlci5yZXBsYWNlKHBhdGgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBIHJvdXRlciB2aWV3IHRyYW5zaXRpb24ncyBwaXBlbGluZSBjYW4gYmUgZGVzY3JpYmVkIGFzXG4gICAgICogZm9sbG93cywgYXNzdW1pbmcgd2UgYXJlIHRyYW5zaXRpb25pbmcgZnJvbSBhbiBleGlzdGluZ1xuICAgICAqIDxyb3V0ZXItdmlldz4gY2hhaW4gW0NvbXBvbmVudCBBLCBDb21wb25lbnQgQl0gdG8gYSBuZXdcbiAgICAgKiBjaGFpbiBbQ29tcG9uZW50IEEsIENvbXBvbmVudCBDXTpcbiAgICAgKlxuICAgICAqICBBICAgIEFcbiAgICAgKiAgfCA9PiB8XG4gICAgICogIEIgICAgQ1xuICAgICAqXG4gICAgICogMS4gUmV1c2FibGl0eSBwaGFzZTpcbiAgICAgKiAgIC0+IGNhblJldXNlKEEsIEEpXG4gICAgICogICAtPiBjYW5SZXVzZShCLCBDKVxuICAgICAqICAgLT4gZGV0ZXJtaW5lIG5ldyBxdWV1ZXM6XG4gICAgICogICAgICAtIGRlYWN0aXZhdGlvbjogW0JdXG4gICAgICogICAgICAtIGFjdGl2YXRpb246IFtDXVxuICAgICAqXG4gICAgICogMi4gVmFsaWRhdGlvbiBwaGFzZTpcbiAgICAgKiAgIC0+IGNhbkRlYWN0aXZhdGUoQilcbiAgICAgKiAgIC0+IGNhbkFjdGl2YXRlKEMpXG4gICAgICpcbiAgICAgKiAzLiBBY3RpdmF0aW9uIHBoYXNlOlxuICAgICAqICAgLT4gZGVhY3RpdmF0ZShCKVxuICAgICAqICAgLT4gYWN0aXZhdGUoQylcbiAgICAgKlxuICAgICAqIEVhY2ggb2YgdGhlc2Ugc3RlcHMgY2FuIGJlIGFzeW5jaHJvbm91cywgYW5kIGFueVxuICAgICAqIHN0ZXAgY2FuIHBvdGVudGlhbGx5IGFib3J0IHRoZSB0cmFuc2l0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICAgKi9cblxuICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydChjYikge1xuICAgICAgdmFyIHRyYW5zaXRpb24gPSB0aGlzO1xuXG4gICAgICAvLyBkZXRlcm1pbmUgdGhlIHF1ZXVlIG9mIHZpZXdzIHRvIGRlYWN0aXZhdGVcbiAgICAgIHZhciBkZWFjdGl2YXRlUXVldWUgPSBbXTtcbiAgICAgIHZhciB2aWV3ID0gdGhpcy5yb3V0ZXIuX3Jvb3RWaWV3O1xuICAgICAgd2hpbGUgKHZpZXcpIHtcbiAgICAgICAgZGVhY3RpdmF0ZVF1ZXVlLnVuc2hpZnQodmlldyk7XG4gICAgICAgIHZpZXcgPSB2aWV3LmNoaWxkVmlldztcbiAgICAgIH1cbiAgICAgIHZhciByZXZlcnNlRGVhY3RpdmF0ZVF1ZXVlID0gZGVhY3RpdmF0ZVF1ZXVlLnNsaWNlKCkucmV2ZXJzZSgpO1xuXG4gICAgICAvLyBkZXRlcm1pbmUgdGhlIHF1ZXVlIG9mIHJvdXRlIGhhbmRsZXJzIHRvIGFjdGl2YXRlXG4gICAgICB2YXIgYWN0aXZhdGVRdWV1ZSA9IHRoaXMuYWN0aXZhdGVRdWV1ZSA9IHRvQXJyYXkodGhpcy50by5tYXRjaGVkKS5tYXAoZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICAgIHJldHVybiBtYXRjaC5oYW5kbGVyO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIDEuIFJldXNhYmlsaXR5IHBoYXNlXG4gICAgICB2YXIgaSA9IHVuZGVmaW5lZCxcbiAgICAgICAgICByZXVzZVF1ZXVlID0gdW5kZWZpbmVkO1xuICAgICAgZm9yIChpID0gMDsgaSA8IHJldmVyc2VEZWFjdGl2YXRlUXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFjYW5SZXVzZShyZXZlcnNlRGVhY3RpdmF0ZVF1ZXVlW2ldLCBhY3RpdmF0ZVF1ZXVlW2ldLCB0cmFuc2l0aW9uKSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgcmV1c2VRdWV1ZSA9IHJldmVyc2VEZWFjdGl2YXRlUXVldWUuc2xpY2UoMCwgaSk7XG4gICAgICAgIGRlYWN0aXZhdGVRdWV1ZSA9IHJldmVyc2VEZWFjdGl2YXRlUXVldWUuc2xpY2UoaSkucmV2ZXJzZSgpO1xuICAgICAgICBhY3RpdmF0ZVF1ZXVlID0gYWN0aXZhdGVRdWV1ZS5zbGljZShpKTtcbiAgICAgIH1cblxuICAgICAgLy8gMi4gVmFsaWRhdGlvbiBwaGFzZVxuICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShkZWFjdGl2YXRlUXVldWUsIGNhbkRlYWN0aXZhdGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShhY3RpdmF0ZVF1ZXVlLCBjYW5BY3RpdmF0ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRyYW5zaXRpb24ucnVuUXVldWUoZGVhY3RpdmF0ZVF1ZXVlLCBkZWFjdGl2YXRlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyAzLiBBY3RpdmF0aW9uIHBoYXNlXG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSByb3V0ZXIgY3VycmVudCByb3V0ZVxuICAgICAgICAgICAgdHJhbnNpdGlvbi5yb3V0ZXIuX29uVHJhbnNpdGlvblZhbGlkYXRlZCh0cmFuc2l0aW9uKTtcblxuICAgICAgICAgICAgLy8gdHJpZ2dlciByZXVzZSBmb3IgYWxsIHJldXNlZCB2aWV3c1xuICAgICAgICAgICAgcmV1c2VRdWV1ZSAmJiByZXVzZVF1ZXVlLmZvckVhY2goZnVuY3Rpb24gKHZpZXcpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJldXNlKHZpZXcsIHRyYW5zaXRpb24pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIHRoZSByb290IG9mIHRoZSBjaGFpbiB0aGF0IG5lZWRzIHRvIGJlIHJlcGxhY2VkXG4gICAgICAgICAgICAvLyBpcyB0aGUgdG9wLW1vc3Qgbm9uLXJldXNhYmxlIHZpZXcuXG4gICAgICAgICAgICBpZiAoZGVhY3RpdmF0ZVF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICB2YXIgX3ZpZXcgPSBkZWFjdGl2YXRlUXVldWVbZGVhY3RpdmF0ZVF1ZXVlLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICB2YXIgZGVwdGggPSByZXVzZVF1ZXVlID8gcmV1c2VRdWV1ZS5sZW5ndGggOiAwO1xuICAgICAgICAgICAgICBhY3RpdmF0ZShfdmlldywgdHJhbnNpdGlvbiwgZGVwdGgsIGNiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91c2x5IGFuZCBzZXF1ZW50aWFsbHkgYXBwbHkgYSBmdW5jdGlvbiB0byBhXG4gICAgICogcXVldWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBxdWV1ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICAgKi9cblxuICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUucnVuUXVldWUgPSBmdW5jdGlvbiBydW5RdWV1ZShxdWV1ZSwgZm4sIGNiKSB7XG4gICAgICB2YXIgdHJhbnNpdGlvbiA9IHRoaXM7XG4gICAgICBzdGVwKDApO1xuICAgICAgZnVuY3Rpb24gc3RlcChpbmRleCkge1xuICAgICAgICBpZiAoaW5kZXggPj0gcXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmbihxdWV1ZVtpbmRleF0sIHRyYW5zaXRpb24sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHN0ZXAoaW5kZXggKyAxKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDYWxsIGEgdXNlciBwcm92aWRlZCByb3V0ZSB0cmFuc2l0aW9uIGhvb2sgYW5kIGhhbmRsZVxuICAgICAqIHRoZSByZXNwb25zZSAoZS5nLiBpZiB0aGUgdXNlciByZXR1cm5zIGEgcHJvbWlzZSkuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgdXNlciBuZWl0aGVyIGV4cGVjdHMgYW4gYXJndW1lbnQgbm9yIHJldHVybnMgYVxuICAgICAqIHByb21pc2UsIHRoZSBob29rIGlzIGFzc3VtZWQgdG8gYmUgc3luY2hyb25vdXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rXG4gICAgICogQHBhcmFtIHsqfSBbY29udGV4dF1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBleHBlY3RCb29sZWFuXG4gICAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHBvc3RBY3RpdmVcbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IHByb2Nlc3NEYXRhXG4gICAgICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBjbGVhbnVwXG4gICAgICovXG5cbiAgICBSb3V0ZVRyYW5zaXRpb24ucHJvdG90eXBlLmNhbGxIb29rID0gZnVuY3Rpb24gY2FsbEhvb2soaG9vaywgY29udGV4dCwgY2IpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbM107XG5cbiAgICAgIHZhciBfcmVmJGV4cGVjdEJvb2xlYW4gPSBfcmVmLmV4cGVjdEJvb2xlYW47XG4gICAgICB2YXIgZXhwZWN0Qm9vbGVhbiA9IF9yZWYkZXhwZWN0Qm9vbGVhbiA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJGV4cGVjdEJvb2xlYW47XG4gICAgICB2YXIgX3JlZiRwb3N0QWN0aXZhdGUgPSBfcmVmLnBvc3RBY3RpdmF0ZTtcbiAgICAgIHZhciBwb3N0QWN0aXZhdGUgPSBfcmVmJHBvc3RBY3RpdmF0ZSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJHBvc3RBY3RpdmF0ZTtcbiAgICAgIHZhciBwcm9jZXNzRGF0YSA9IF9yZWYucHJvY2Vzc0RhdGE7XG4gICAgICB2YXIgY2xlYW51cCA9IF9yZWYuY2xlYW51cDtcblxuICAgICAgdmFyIHRyYW5zaXRpb24gPSB0aGlzO1xuICAgICAgdmFyIG5leHRDYWxsZWQgPSBmYWxzZTtcblxuICAgICAgLy8gYWJvcnQgdGhlIHRyYW5zaXRpb25cbiAgICAgIHZhciBhYm9ydCA9IGZ1bmN0aW9uIGFib3J0KCkge1xuICAgICAgICBjbGVhbnVwICYmIGNsZWFudXAoKTtcbiAgICAgICAgdHJhbnNpdGlvbi5hYm9ydCgpO1xuICAgICAgfTtcblxuICAgICAgLy8gaGFuZGxlIGVycm9yc1xuICAgICAgdmFyIG9uRXJyb3IgPSBmdW5jdGlvbiBvbkVycm9yKGVycikge1xuICAgICAgICBwb3N0QWN0aXZhdGUgPyBuZXh0KCkgOiBhYm9ydCgpO1xuICAgICAgICBpZiAoZXJyICYmICF0cmFuc2l0aW9uLnJvdXRlci5fc3VwcHJlc3MpIHtcbiAgICAgICAgICB3YXJuJDEoJ1VuY2F1Z2h0IGVycm9yIGR1cmluZyB0cmFuc2l0aW9uOiAnKTtcbiAgICAgICAgICB0aHJvdyBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyciA6IG5ldyBFcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBzaW5jZSBwcm9taXNlIHN3YWxsb3dzIGVycm9ycywgd2UgaGF2ZSB0b1xuICAgICAgLy8gdGhyb3cgaXQgaW4gdGhlIG5leHQgdGljay4uLlxuICAgICAgdmFyIG9uUHJvbWlzZUVycm9yID0gZnVuY3Rpb24gb25Qcm9taXNlRXJyb3IoZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgb25FcnJvcihlcnIpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBhZHZhbmNlIHRoZSB0cmFuc2l0aW9uIHRvIHRoZSBuZXh0IHN0ZXBcbiAgICAgIHZhciBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgaWYgKG5leHRDYWxsZWQpIHtcbiAgICAgICAgICB3YXJuJDEoJ3RyYW5zaXRpb24ubmV4dCgpIHNob3VsZCBiZSBjYWxsZWQgb25seSBvbmNlLicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBuZXh0Q2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRyYW5zaXRpb24uYWJvcnRlZCkge1xuICAgICAgICAgIGNsZWFudXAgJiYgY2xlYW51cCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjYiAmJiBjYigpO1xuICAgICAgfTtcblxuICAgICAgdmFyIG5leHRXaXRoQm9vbGVhbiA9IGZ1bmN0aW9uIG5leHRXaXRoQm9vbGVhbihyZXMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiByZXMgPT09ICdib29sZWFuJykge1xuICAgICAgICAgIHJlcyA/IG5leHQoKSA6IGFib3J0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNQcm9taXNlKHJlcykpIHtcbiAgICAgICAgICByZXMudGhlbihmdW5jdGlvbiAob2spIHtcbiAgICAgICAgICAgIG9rID8gbmV4dCgpIDogYWJvcnQoKTtcbiAgICAgICAgICB9LCBvblByb21pc2VFcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAoIWhvb2subGVuZ3RoKSB7XG4gICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgbmV4dFdpdGhEYXRhID0gZnVuY3Rpb24gbmV4dFdpdGhEYXRhKGRhdGEpIHtcbiAgICAgICAgdmFyIHJlcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXMgPSBwcm9jZXNzRGF0YShkYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgcmV0dXJuIG9uRXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcm9taXNlKHJlcykpIHtcbiAgICAgICAgICByZXMudGhlbihuZXh0LCBvblByb21pc2VFcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBleHBvc2UgYSBjbG9uZSBvZiB0aGUgdHJhbnNpdGlvbiBvYmplY3QsIHNvIHRoYXQgZWFjaFxuICAgICAgLy8gaG9vayBnZXRzIGEgY2xlYW4gY29weSBhbmQgcHJldmVudCB0aGUgdXNlciBmcm9tXG4gICAgICAvLyBtZXNzaW5nIHdpdGggdGhlIGludGVybmFscy5cbiAgICAgIHZhciBleHBvc2VkID0ge1xuICAgICAgICB0bzogdHJhbnNpdGlvbi50byxcbiAgICAgICAgZnJvbTogdHJhbnNpdGlvbi5mcm9tLFxuICAgICAgICBhYm9ydDogYWJvcnQsXG4gICAgICAgIG5leHQ6IHByb2Nlc3NEYXRhID8gbmV4dFdpdGhEYXRhIDogbmV4dCxcbiAgICAgICAgcmVkaXJlY3Q6IGZ1bmN0aW9uIHJlZGlyZWN0KCkge1xuICAgICAgICAgIHRyYW5zaXRpb24ucmVkaXJlY3QuYXBwbHkodHJhbnNpdGlvbiwgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy8gYWN0dWFsbHkgY2FsbCB0aGUgaG9va1xuICAgICAgdmFyIHJlcyA9IHVuZGVmaW5lZDtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlcyA9IGhvb2suY2FsbChjb250ZXh0LCBleHBvc2VkKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4gb25FcnJvcihlcnIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXhwZWN0Qm9vbGVhbikge1xuICAgICAgICAvLyBib29sZWFuIGhvb2tzXG4gICAgICAgIG5leHRXaXRoQm9vbGVhbihyZXMpO1xuICAgICAgfSBlbHNlIGlmIChpc1Byb21pc2UocmVzKSkge1xuICAgICAgICAvLyBwcm9taXNlXG4gICAgICAgIGlmIChwcm9jZXNzRGF0YSkge1xuICAgICAgICAgIHJlcy50aGVuKG5leHRXaXRoRGF0YSwgb25Qcm9taXNlRXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcy50aGVuKG5leHQsIG9uUHJvbWlzZUVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzRGF0YSAmJiBpc1BsYWluT2piZWN0KHJlcykpIHtcbiAgICAgICAgLy8gZGF0YSBwcm9taXNlIHN1Z2FyXG4gICAgICAgIG5leHRXaXRoRGF0YShyZXMpO1xuICAgICAgfSBlbHNlIGlmICghaG9vay5sZW5ndGgpIHtcbiAgICAgICAgbmV4dCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDYWxsIGEgc2luZ2xlIGhvb2sgb3IgYW4gYXJyYXkgb2YgYXN5bmMgaG9va3MgaW4gc2VyaWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gaG9va3NcbiAgICAgKiBAcGFyYW0geyp9IGNvbnRleHRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKi9cblxuICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuY2FsbEhvb2tzID0gZnVuY3Rpb24gY2FsbEhvb2tzKGhvb2tzLCBjb250ZXh0LCBjYiwgb3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaG9va3MpKSB7XG4gICAgICAgIHRoaXMucnVuUXVldWUoaG9va3MsIGZ1bmN0aW9uIChob29rLCBfLCBuZXh0KSB7XG4gICAgICAgICAgaWYgKCFfdGhpcy5hYm9ydGVkKSB7XG4gICAgICAgICAgICBfdGhpcy5jYWxsSG9vayhob29rLCBjb250ZXh0LCBuZXh0LCBvcHRpb25zKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGNiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2FsbEhvb2soaG9va3MsIGNvbnRleHQsIGNiLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFJvdXRlVHJhbnNpdGlvbjtcbiAgfSkoKTtcblxuICBmdW5jdGlvbiBpc1BsYWluT2piZWN0KHZhbCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG4gIH1cblxuICBmdW5jdGlvbiB0b0FycmF5KHZhbCkge1xuICAgIHJldHVybiB2YWwgPyBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh2YWwpIDogW107XG4gIH1cblxuICB2YXIgaW50ZXJuYWxLZXlzUkUgPSAvXihjb21wb25lbnR8c3ViUm91dGVzfGZ1bGxQYXRoKSQvO1xuXG4gIC8qKlxuICAgKiBSb3V0ZSBDb250ZXh0IE9iamVjdFxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICAgKiBAcGFyYW0ge1JvdXRlcn0gcm91dGVyXG4gICAqL1xuXG4gIHZhciBSb3V0ZSA9IGZ1bmN0aW9uIFJvdXRlKHBhdGgsIHJvdXRlcikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgUm91dGUpO1xuXG4gICAgdmFyIG1hdGNoZWQgPSByb3V0ZXIuX3JlY29nbml6ZXIucmVjb2duaXplKHBhdGgpO1xuICAgIGlmIChtYXRjaGVkKSB7XG4gICAgICAvLyBjb3B5IGFsbCBjdXN0b20gZmllbGRzIGZyb20gcm91dGUgY29uZmlnc1xuICAgICAgW10uZm9yRWFjaC5jYWxsKG1hdGNoZWQsIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gbWF0Y2guaGFuZGxlcikge1xuICAgICAgICAgIGlmICghaW50ZXJuYWxLZXlzUkUudGVzdChrZXkpKSB7XG4gICAgICAgICAgICBfdGhpc1trZXldID0gbWF0Y2guaGFuZGxlcltrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAvLyBzZXQgcXVlcnkgYW5kIHBhcmFtc1xuICAgICAgdGhpcy5xdWVyeSA9IG1hdGNoZWQucXVlcnlQYXJhbXM7XG4gICAgICB0aGlzLnBhcmFtcyA9IFtdLnJlZHVjZS5jYWxsKG1hdGNoZWQsIGZ1bmN0aW9uIChwcmV2LCBjdXIpIHtcbiAgICAgICAgaWYgKGN1ci5wYXJhbXMpIHtcbiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gY3VyLnBhcmFtcykge1xuICAgICAgICAgICAgcHJldltrZXldID0gY3VyLnBhcmFtc1trZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgIH0sIHt9KTtcbiAgICB9XG4gICAgLy8gZXhwb3NlIHBhdGggYW5kIHJvdXRlclxuICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgLy8gZm9yIGludGVybmFsIHVzZVxuICAgIHRoaXMubWF0Y2hlZCA9IG1hdGNoZWQgfHwgcm91dGVyLl9ub3RGb3VuZEhhbmRsZXI7XG4gICAgLy8gaW50ZXJuYWwgcmVmZXJlbmNlIHRvIHJvdXRlclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAncm91dGVyJywge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB2YWx1ZTogcm91dGVyXG4gICAgfSk7XG4gICAgLy8gSW1wb3J0YW50OiBmcmVlemUgc2VsZiB0byBwcmV2ZW50IG9ic2VydmF0aW9uXG4gICAgT2JqZWN0LmZyZWV6ZSh0aGlzKTtcbiAgfTtcblxuICBmdW5jdGlvbiBhcHBseU92ZXJyaWRlIChWdWUpIHtcbiAgICB2YXIgX1Z1ZSR1dGlsID0gVnVlLnV0aWw7XG4gICAgdmFyIGV4dGVuZCA9IF9WdWUkdXRpbC5leHRlbmQ7XG4gICAgdmFyIGlzQXJyYXkgPSBfVnVlJHV0aWwuaXNBcnJheTtcbiAgICB2YXIgZGVmaW5lUmVhY3RpdmUgPSBfVnVlJHV0aWwuZGVmaW5lUmVhY3RpdmU7XG5cbiAgICAvLyBvdmVycmlkZSBWdWUncyBpbml0IGFuZCBkZXN0cm95IHByb2Nlc3MgdG8ga2VlcCB0cmFjayBvZiByb3V0ZXIgaW5zdGFuY2VzXG4gICAgdmFyIGluaXQgPSBWdWUucHJvdG90eXBlLl9pbml0O1xuICAgIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICB2YXIgcm9vdCA9IG9wdGlvbnMuX3BhcmVudCB8fCBvcHRpb25zLnBhcmVudCB8fCB0aGlzO1xuICAgICAgdmFyIHJvdXRlciA9IHJvb3QuJHJvdXRlcjtcbiAgICAgIHZhciByb3V0ZSA9IHJvb3QuJHJvdXRlO1xuICAgICAgaWYgKHJvdXRlcikge1xuICAgICAgICAvLyBleHBvc2Ugcm91dGVyXG4gICAgICAgIHRoaXMuJHJvdXRlciA9IHJvdXRlcjtcbiAgICAgICAgcm91dGVyLl9jaGlsZHJlbi5wdXNoKHRoaXMpO1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHRoaXMuX2RlZmluZU1ldGEpIHtcbiAgICAgICAgICAvLyAwLjEyXG4gICAgICAgICAgdGhpcy5fZGVmaW5lTWV0YSgnJHJvdXRlJywgcm91dGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIDEuMFxuICAgICAgICAgIGRlZmluZVJlYWN0aXZlKHRoaXMsICckcm91dGUnLCByb3V0ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGluaXQuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgICB9O1xuXG4gICAgdmFyIGRlc3Ryb3kgPSBWdWUucHJvdG90eXBlLl9kZXN0cm95O1xuICAgIFZ1ZS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgJiYgdGhpcy4kcm91dGVyKSB7XG4gICAgICAgIHRoaXMuJHJvdXRlci5fY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcbiAgICAgIH1cbiAgICAgIGRlc3Ryb3kuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgLy8gMS4wIG9ubHk6IGVuYWJsZSByb3V0ZSBtaXhpbnNcbiAgICB2YXIgc3RyYXRzID0gVnVlLmNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXM7XG4gICAgdmFyIGhvb2tzVG9NZXJnZVJFID0gL14oZGF0YXxhY3RpdmF0ZXxkZWFjdGl2YXRlKSQvO1xuXG4gICAgaWYgKHN0cmF0cykge1xuICAgICAgc3RyYXRzLnJvdXRlID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgICAgICAgaWYgKCFjaGlsZFZhbCkgcmV0dXJuIHBhcmVudFZhbDtcbiAgICAgICAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbDtcbiAgICAgICAgdmFyIHJldCA9IHt9O1xuICAgICAgICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gY2hpbGRWYWwpIHtcbiAgICAgICAgICB2YXIgYSA9IHJldFtrZXldO1xuICAgICAgICAgIHZhciBiID0gY2hpbGRWYWxba2V5XTtcbiAgICAgICAgICAvLyBmb3IgZGF0YSwgYWN0aXZhdGUgYW5kIGRlYWN0aXZhdGUsIHdlIG5lZWQgdG8gbWVyZ2UgdGhlbSBpbnRvXG4gICAgICAgICAgLy8gYXJyYXlzIHNpbWlsYXIgdG8gbGlmZWN5Y2xlIGhvb2tzLlxuICAgICAgICAgIGlmIChhICYmIGhvb2tzVG9NZXJnZVJFLnRlc3Qoa2V5KSkge1xuICAgICAgICAgICAgcmV0W2tleV0gPSAoaXNBcnJheShhKSA/IGEgOiBbYV0pLmNvbmNhdChiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2tleV0gPSBiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBWaWV3IChWdWUpIHtcblxuICAgIHZhciBfID0gVnVlLnV0aWw7XG4gICAgdmFyIGNvbXBvbmVudERlZiA9XG4gICAgLy8gMC4xMlxuICAgIFZ1ZS5kaXJlY3RpdmUoJ19jb21wb25lbnQnKSB8fFxuICAgIC8vIDEuMFxuICAgIFZ1ZS5pbnRlcm5hbERpcmVjdGl2ZXMuY29tcG9uZW50O1xuICAgIC8vIDxyb3V0ZXItdmlldz4gZXh0ZW5kcyB0aGUgaW50ZXJuYWwgY29tcG9uZW50IGRpcmVjdGl2ZVxuICAgIHZhciB2aWV3RGVmID0gXy5leHRlbmQoe30sIGNvbXBvbmVudERlZik7XG5cbiAgICAvLyB3aXRoIHNvbWUgb3ZlcnJpZGVzXG4gICAgXy5leHRlbmQodmlld0RlZiwge1xuXG4gICAgICBfaXNSb3V0ZXJWaWV3OiB0cnVlLFxuXG4gICAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgICAgICB2YXIgcm91dGUgPSB0aGlzLnZtLiRyb3V0ZTtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmICghcm91dGUpIHtcbiAgICAgICAgICB3YXJuJDEoJzxyb3V0ZXItdmlldz4gY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgYSAnICsgJ3JvdXRlci1lbmFibGVkIGFwcC4nKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gZm9yY2UgZHluYW1pYyBkaXJlY3RpdmUgc28gdi1jb21wb25lbnQgZG9lc24ndFxuICAgICAgICAvLyBhdHRlbXB0IHRvIGJ1aWxkIHJpZ2h0IG5vd1xuICAgICAgICB0aGlzLl9pc0R5bmFtaWNMaXRlcmFsID0gdHJ1ZTtcbiAgICAgICAgLy8gZmluYWxseSwgaW5pdCBieSBkZWxlZ2F0aW5nIHRvIHYtY29tcG9uZW50XG4gICAgICAgIGNvbXBvbmVudERlZi5iaW5kLmNhbGwodGhpcyk7XG5cbiAgICAgICAgLy8gbG9jYXRlIHRoZSBwYXJlbnQgdmlld1xuICAgICAgICB2YXIgcGFyZW50VmlldyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMudm07XG4gICAgICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgICBpZiAocGFyZW50Ll9yb3V0ZXJWaWV3KSB7XG4gICAgICAgICAgICBwYXJlbnRWaWV3ID0gcGFyZW50Ll9yb3V0ZXJWaWV3O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIHBhcmVudCA9IHBhcmVudC4kcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJlbnRWaWV3KSB7XG4gICAgICAgICAgLy8gcmVnaXN0ZXIgc2VsZiBhcyBhIGNoaWxkIG9mIHRoZSBwYXJlbnQgdmlldyxcbiAgICAgICAgICAvLyBpbnN0ZWFkIG9mIGFjdGl2YXRpbmcgbm93LiBUaGlzIGlzIHNvIHRoYXQgdGhlXG4gICAgICAgICAgLy8gY2hpbGQncyBhY3RpdmF0ZSBob29rIGlzIGNhbGxlZCBhZnRlciB0aGVcbiAgICAgICAgICAvLyBwYXJlbnQncyBoYXMgcmVzb2x2ZWQuXG4gICAgICAgICAgdGhpcy5wYXJlbnRWaWV3ID0gcGFyZW50VmlldztcbiAgICAgICAgICBwYXJlbnRWaWV3LmNoaWxkVmlldyA9IHRoaXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gdGhpcyBpcyB0aGUgcm9vdCB2aWV3IVxuICAgICAgICAgIHZhciByb3V0ZXIgPSByb3V0ZS5yb3V0ZXI7XG4gICAgICAgICAgcm91dGVyLl9yb290VmlldyA9IHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBoYW5kbGUgbGF0ZS1yZW5kZXJlZCB2aWV3XG4gICAgICAgIC8vIHR3byBwb3NzaWJpbGl0aWVzOlxuICAgICAgICAvLyAxLiByb290IHZpZXcgcmVuZGVyZWQgYWZ0ZXIgdHJhbnNpdGlvbiBoYXMgYmVlblxuICAgICAgICAvLyAgICB2YWxpZGF0ZWQ7XG4gICAgICAgIC8vIDIuIGNoaWxkIHZpZXcgcmVuZGVyZWQgYWZ0ZXIgcGFyZW50IHZpZXcgaGFzIGJlZW5cbiAgICAgICAgLy8gICAgYWN0aXZhdGVkLlxuICAgICAgICB2YXIgdHJhbnNpdGlvbiA9IHJvdXRlLnJvdXRlci5fY3VycmVudFRyYW5zaXRpb247XG4gICAgICAgIGlmICghcGFyZW50VmlldyAmJiB0cmFuc2l0aW9uLmRvbmUgfHwgcGFyZW50VmlldyAmJiBwYXJlbnRWaWV3LmFjdGl2YXRlZCkge1xuICAgICAgICAgIHZhciBkZXB0aCA9IHBhcmVudFZpZXcgPyBwYXJlbnRWaWV3LmRlcHRoICsgMSA6IDA7XG4gICAgICAgICAgYWN0aXZhdGUodGhpcywgdHJhbnNpdGlvbiwgZGVwdGgpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50Vmlldykge1xuICAgICAgICAgIHRoaXMucGFyZW50Vmlldy5jaGlsZFZpZXcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbXBvbmVudERlZi51bmJpbmQuY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIFZ1ZS5lbGVtZW50RGlyZWN0aXZlKCdyb3V0ZXItdmlldycsIHZpZXdEZWYpO1xuICB9XG5cbiAgdmFyIHRyYWlsaW5nU2xhc2hSRSA9IC9cXC8kLztcbiAgdmFyIHJlZ2V4RXNjYXBlUkUgPSAvWy0uKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nO1xuICB2YXIgcXVlcnlTdHJpbmdSRSA9IC9cXD8uKiQvO1xuXG4gIC8vIGluc3RhbGwgdi1saW5rLCB3aGljaCBwcm92aWRlcyBuYXZpZ2F0aW9uIHN1cHBvcnQgZm9yXG4gIC8vIEhUTUw1IGhpc3RvcnkgbW9kZVxuICBmdW5jdGlvbiBMaW5rIChWdWUpIHtcbiAgICB2YXIgX1Z1ZSR1dGlsID0gVnVlLnV0aWw7XG4gICAgdmFyIF9iaW5kID0gX1Z1ZSR1dGlsLmJpbmQ7XG4gICAgdmFyIGlzT2JqZWN0ID0gX1Z1ZSR1dGlsLmlzT2JqZWN0O1xuICAgIHZhciBhZGRDbGFzcyA9IF9WdWUkdXRpbC5hZGRDbGFzcztcbiAgICB2YXIgcmVtb3ZlQ2xhc3MgPSBfVnVlJHV0aWwucmVtb3ZlQ2xhc3M7XG5cbiAgICB2YXIgb25Qcmlvcml0eSA9IFZ1ZS5kaXJlY3RpdmUoJ29uJykucHJpb3JpdHk7XG4gICAgdmFyIExJTktfVVBEQVRFID0gJ19fdnVlLXJvdXRlci1saW5rLXVwZGF0ZV9fJztcblxuICAgIHZhciBhY3RpdmVJZCA9IDA7XG5cbiAgICBWdWUuZGlyZWN0aXZlKCdsaW5rLWFjdGl2ZScsIHtcbiAgICAgIHByaW9yaXR5OiA5OTk5LFxuICAgICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICB2YXIgaWQgPSBTdHJpbmcoYWN0aXZlSWQrKyk7XG4gICAgICAgIC8vIGNvbGxlY3Qgdi1saW5rcyBjb250YWluZWQgd2l0aGluIHRoaXMgZWxlbWVudC5cbiAgICAgICAgLy8gd2UgbmVlZCBkbyB0aGlzIGhlcmUgYmVmb3JlIHRoZSBwYXJlbnQtY2hpbGQgcmVsYXRpb25zaGlwXG4gICAgICAgIC8vIGdldHMgbWVzc2VkIHVwIGJ5IHRlcm1pbmFsIGRpcmVjdGl2ZXMgKGlmLCBmb3IsIGNvbXBvbmVudHMpXG4gICAgICAgIHZhciBjaGlsZExpbmtzID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKCdbdi1saW5rXScpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkTGlua3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGxpbmsgPSBjaGlsZExpbmtzW2ldO1xuICAgICAgICAgIHZhciBleGlzdGluZ0lkID0gbGluay5nZXRBdHRyaWJ1dGUoTElOS19VUERBVEUpO1xuICAgICAgICAgIHZhciB2YWx1ZSA9IGV4aXN0aW5nSWQgPyBleGlzdGluZ0lkICsgJywnICsgaWQgOiBpZDtcbiAgICAgICAgICAvLyBsZWF2ZSBhIG1hcmsgb24gdGhlIGxpbmsgZWxlbWVudCB3aGljaCBjYW4gYmUgcGVyc2lzdGVkXG4gICAgICAgICAgLy8gdGhyb3VnaCBmcmFnbWVudCBjbG9uZXMuXG4gICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoTElOS19VUERBVEUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZtLiRvbihMSU5LX1VQREFURSwgdGhpcy5jYiA9IGZ1bmN0aW9uIChsaW5rLCBwYXRoKSB7XG4gICAgICAgICAgaWYgKGxpbmsuYWN0aXZlSWRzLmluZGV4T2YoaWQpID4gLTEpIHtcbiAgICAgICAgICAgIGxpbmsudXBkYXRlQ2xhc3NlcyhwYXRoLCBfdGhpcy5lbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICAgICAgdGhpcy52bS4kb2ZmKExJTktfVVBEQVRFLCB0aGlzLmNiKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIFZ1ZS5kaXJlY3RpdmUoJ2xpbmsnLCB7XG4gICAgICBwcmlvcml0eTogb25Qcmlvcml0eSAtIDIsXG5cbiAgICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXMudm07XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAoIXZtLiRyb3V0ZSkge1xuICAgICAgICAgIHdhcm4kMSgndi1saW5rIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIGEgcm91dGVyLWVuYWJsZWQgYXBwLicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJvdXRlciA9IHZtLiRyb3V0ZS5yb3V0ZXI7XG4gICAgICAgIC8vIHVwZGF0ZSB0aGluZ3Mgd2hlbiB0aGUgcm91dGUgY2hhbmdlc1xuICAgICAgICB0aGlzLnVud2F0Y2ggPSB2bS4kd2F0Y2goJyRyb3V0ZScsIF9iaW5kKHRoaXMub25Sb3V0ZVVwZGF0ZSwgdGhpcykpO1xuICAgICAgICAvLyBjaGVjayB2LWxpbmstYWN0aXZlIGlkc1xuICAgICAgICB2YXIgYWN0aXZlSWRzID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoTElOS19VUERBVEUpO1xuICAgICAgICBpZiAoYWN0aXZlSWRzKSB7XG4gICAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoTElOS19VUERBVEUpO1xuICAgICAgICAgIHRoaXMuYWN0aXZlSWRzID0gYWN0aXZlSWRzLnNwbGl0KCcsJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm8gbmVlZCB0byBoYW5kbGUgY2xpY2sgaWYgbGluayBleHBlY3RzIHRvIGJlIG9wZW5lZFxuICAgICAgICAvLyBpbiBhIG5ldyB3aW5kb3cvdGFiLlxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHRoaXMuZWwudGFnTmFtZSA9PT0gJ0EnICYmIHRoaXMuZWwuZ2V0QXR0cmlidXRlKCd0YXJnZXQnKSA9PT0gJ19ibGFuaycpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gaGFuZGxlIGNsaWNrXG4gICAgICAgIHRoaXMuaGFuZGxlciA9IF9iaW5kKHRoaXMub25DbGljaywgdGhpcyk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZXIpO1xuICAgICAgfSxcblxuICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodGFyZ2V0KSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICBpZiAoaXNPYmplY3QodGFyZ2V0KSkge1xuICAgICAgICAgIHRoaXMuYXBwZW5kID0gdGFyZ2V0LmFwcGVuZDtcbiAgICAgICAgICB0aGlzLmV4YWN0ID0gdGFyZ2V0LmV4YWN0O1xuICAgICAgICAgIHRoaXMucHJldkFjdGl2ZUNsYXNzID0gdGhpcy5hY3RpdmVDbGFzcztcbiAgICAgICAgICB0aGlzLmFjdGl2ZUNsYXNzID0gdGFyZ2V0LmFjdGl2ZUNsYXNzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25Sb3V0ZVVwZGF0ZSh0aGlzLnZtLiRyb3V0ZSk7XG4gICAgICB9LFxuXG4gICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgLy8gZG9uJ3QgcmVkaXJlY3Qgd2l0aCBjb250cm9sIGtleXNcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChlLm1ldGFLZXkgfHwgZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkpIHJldHVybjtcbiAgICAgICAgLy8gZG9uJ3QgcmVkaXJlY3Qgd2hlbiBwcmV2ZW50RGVmYXVsdCBjYWxsZWRcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjtcbiAgICAgICAgLy8gZG9uJ3QgcmVkaXJlY3Qgb24gcmlnaHQgY2xpY2tcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChlLmJ1dHRvbiAhPT0gMCkgcmV0dXJuO1xuXG4gICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLnRhcmdldDtcbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgIC8vIHYtbGluayB3aXRoIGV4cHJlc3Npb24sIGp1c3QgZ29cbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy5yb3V0ZXIuZ28odGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBubyBleHByZXNzaW9uLCBkZWxlZ2F0ZSBmb3IgYW4gPGE+IGluc2lkZVxuICAgICAgICAgIHZhciBlbCA9IGUudGFyZ2V0O1xuICAgICAgICAgIHdoaWxlIChlbC50YWdOYW1lICE9PSAnQScgJiYgZWwgIT09IHRoaXMuZWwpIHtcbiAgICAgICAgICAgIGVsID0gZWwucGFyZW50Tm9kZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGVsLnRhZ05hbWUgPT09ICdBJyAmJiBzYW1lT3JpZ2luKGVsKSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHBhdGggPSBlbC5wYXRobmFtZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJvdXRlci5oaXN0b3J5LnJvb3QpIHtcbiAgICAgICAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZSh0aGlzLnJvdXRlci5oaXN0b3J5LnJvb3RSRSwgJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yb3V0ZXIuZ28oe1xuICAgICAgICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICAgICAgICByZXBsYWNlOiB0YXJnZXQgJiYgdGFyZ2V0LnJlcGxhY2UsXG4gICAgICAgICAgICAgIGFwcGVuZDogdGFyZ2V0ICYmIHRhcmdldC5hcHBlbmRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgb25Sb3V0ZVVwZGF0ZTogZnVuY3Rpb24gb25Sb3V0ZVVwZGF0ZShyb3V0ZSkge1xuICAgICAgICAvLyByb3V0ZXIuc3RyaW5naWZ5UGF0aCBpcyBkZXBlbmRlbnQgb24gY3VycmVudCByb3V0ZVxuICAgICAgICAvLyBhbmQgbmVlZHMgdG8gYmUgY2FsbGVkIGFnYWluIHdoZW52ZXIgcm91dGUgY2hhbmdlcy5cbiAgICAgICAgdmFyIG5ld1BhdGggPSB0aGlzLnJvdXRlci5zdHJpbmdpZnlQYXRoKHRoaXMudGFyZ2V0KTtcbiAgICAgICAgaWYgKHRoaXMucGF0aCAhPT0gbmV3UGF0aCkge1xuICAgICAgICAgIHRoaXMucGF0aCA9IG5ld1BhdGg7XG4gICAgICAgICAgdGhpcy51cGRhdGVBY3RpdmVNYXRjaCgpO1xuICAgICAgICAgIHRoaXMudXBkYXRlSHJlZigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZUlkcykge1xuICAgICAgICAgIHRoaXMudm0uJGVtaXQoTElOS19VUERBVEUsIHRoaXMsIHJvdXRlLnBhdGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudXBkYXRlQ2xhc3Nlcyhyb3V0ZS5wYXRoLCB0aGlzLmVsKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgdXBkYXRlQWN0aXZlTWF0Y2g6IGZ1bmN0aW9uIHVwZGF0ZUFjdGl2ZU1hdGNoKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVJFID0gdGhpcy5wYXRoICYmICF0aGlzLmV4YWN0ID8gbmV3IFJlZ0V4cCgnXicgKyB0aGlzLnBhdGgucmVwbGFjZSgvXFwvJC8sICcnKS5yZXBsYWNlKHF1ZXJ5U3RyaW5nUkUsICcnKS5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXFxcJCYnKSArICcoXFxcXC98JCknKSA6IG51bGw7XG4gICAgICB9LFxuXG4gICAgICB1cGRhdGVIcmVmOiBmdW5jdGlvbiB1cGRhdGVIcmVmKCkge1xuICAgICAgICBpZiAodGhpcy5lbC50YWdOYW1lICE9PSAnQScpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhdGggPSB0aGlzLnBhdGg7XG4gICAgICAgIHZhciByb3V0ZXIgPSB0aGlzLnJvdXRlcjtcbiAgICAgICAgdmFyIGlzQWJzb2x1dGUgPSBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nO1xuICAgICAgICAvLyBkbyBub3QgZm9ybWF0IG5vbi1oYXNoIHJlbGF0aXZlIHBhdGhzXG4gICAgICAgIHZhciBocmVmID0gcGF0aCAmJiAocm91dGVyLm1vZGUgPT09ICdoYXNoJyB8fCBpc0Fic29sdXRlKSA/IHJvdXRlci5oaXN0b3J5LmZvcm1hdFBhdGgocGF0aCwgdGhpcy5hcHBlbmQpIDogcGF0aDtcbiAgICAgICAgaWYgKGhyZWYpIHtcbiAgICAgICAgICB0aGlzLmVsLmhyZWYgPSBocmVmO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCdocmVmJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHVwZGF0ZUNsYXNzZXM6IGZ1bmN0aW9uIHVwZGF0ZUNsYXNzZXMocGF0aCwgZWwpIHtcbiAgICAgICAgdmFyIGFjdGl2ZUNsYXNzID0gdGhpcy5hY3RpdmVDbGFzcyB8fCB0aGlzLnJvdXRlci5fbGlua0FjdGl2ZUNsYXNzO1xuICAgICAgICAvLyBjbGVhciBvbGQgY2xhc3NcbiAgICAgICAgaWYgKHRoaXMucHJldkFjdGl2ZUNsYXNzICYmIHRoaXMucHJldkFjdGl2ZUNsYXNzICE9PSBhY3RpdmVDbGFzcykge1xuICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIHRoaXMucHJldkFjdGl2ZUNsYXNzLCByZW1vdmVDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVtb3ZlIHF1ZXJ5IHN0cmluZyBiZWZvcmUgbWF0Y2hpbmdcbiAgICAgICAgdmFyIGRlc3QgPSB0aGlzLnBhdGgucmVwbGFjZShxdWVyeVN0cmluZ1JFLCAnJyk7XG4gICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UocXVlcnlTdHJpbmdSRSwgJycpO1xuICAgICAgICAvLyBhZGQgbmV3IGNsYXNzXG4gICAgICAgIGlmICh0aGlzLmV4YWN0KSB7XG4gICAgICAgICAgaWYgKGRlc3QgPT09IHBhdGggfHxcbiAgICAgICAgICAvLyBhbHNvIGFsbG93IGFkZGl0aW9uYWwgdHJhaWxpbmcgc2xhc2hcbiAgICAgICAgICBkZXN0LmNoYXJBdChkZXN0Lmxlbmd0aCAtIDEpICE9PSAnLycgJiYgZGVzdCA9PT0gcGF0aC5yZXBsYWNlKHRyYWlsaW5nU2xhc2hSRSwgJycpKSB7XG4gICAgICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBhY3RpdmVDbGFzcywgYWRkQ2xhc3MpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBhY3RpdmVDbGFzcywgcmVtb3ZlQ2xhc3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy5hY3RpdmVSRSAmJiB0aGlzLmFjdGl2ZVJFLnRlc3QocGF0aCkpIHtcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGFjdGl2ZUNsYXNzLCBhZGRDbGFzcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGFjdGl2ZUNsYXNzLCByZW1vdmVDbGFzcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlcik7XG4gICAgICAgIHRoaXMudW53YXRjaCAmJiB0aGlzLnVud2F0Y2goKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHNhbWVPcmlnaW4obGluaykge1xuICAgICAgcmV0dXJuIGxpbmsucHJvdG9jb2wgPT09IGxvY2F0aW9uLnByb3RvY29sICYmIGxpbmsuaG9zdG5hbWUgPT09IGxvY2F0aW9uLmhvc3RuYW1lICYmIGxpbmsucG9ydCA9PT0gbG9jYXRpb24ucG9ydDtcbiAgICB9XG5cbiAgICAvLyB0aGlzIGZ1bmN0aW9uIGlzIGNvcGllZCBmcm9tIHYtYmluZDpjbGFzcyBpbXBsZW1lbnRhdGlvbiB1bnRpbFxuICAgIC8vIHdlIHByb3Blcmx5IGV4cG9zZSBpdC4uLlxuICAgIGZ1bmN0aW9uIHRvZ2dsZUNsYXNzZXMoZWwsIGtleSwgZm4pIHtcbiAgICAgIGtleSA9IGtleS50cmltKCk7XG4gICAgICBpZiAoa2V5LmluZGV4T2YoJyAnKSA9PT0gLTEpIHtcbiAgICAgICAgZm4oZWwsIGtleSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciBrZXlzID0ga2V5LnNwbGl0KC9cXHMrLyk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGZuKGVsLCBrZXlzW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2YXIgaGlzdG9yeUJhY2tlbmRzID0ge1xuICAgIGFic3RyYWN0OiBBYnN0cmFjdEhpc3RvcnksXG4gICAgaGFzaDogSGFzaEhpc3RvcnksXG4gICAgaHRtbDU6IEhUTUw1SGlzdG9yeVxuICB9O1xuXG4gIC8vIGxhdGUgYmluZCBkdXJpbmcgaW5zdGFsbFxuICB2YXIgVnVlID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBSb3V0ZXIgY29uc3RydWN0b3JcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKi9cblxuICB2YXIgUm91dGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSb3V0ZXIoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzBdO1xuXG4gICAgICB2YXIgX3JlZiRoYXNoYmFuZyA9IF9yZWYuaGFzaGJhbmc7XG4gICAgICB2YXIgaGFzaGJhbmcgPSBfcmVmJGhhc2hiYW5nID09PSB1bmRlZmluZWQgPyB0cnVlIDogX3JlZiRoYXNoYmFuZztcbiAgICAgIHZhciBfcmVmJGFic3RyYWN0ID0gX3JlZi5hYnN0cmFjdDtcbiAgICAgIHZhciBhYnN0cmFjdCA9IF9yZWYkYWJzdHJhY3QgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRhYnN0cmFjdDtcbiAgICAgIHZhciBfcmVmJGhpc3RvcnkgPSBfcmVmLmhpc3Rvcnk7XG4gICAgICB2YXIgaGlzdG9yeSA9IF9yZWYkaGlzdG9yeSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJGhpc3Rvcnk7XG4gICAgICB2YXIgX3JlZiRzYXZlU2Nyb2xsUG9zaXRpb24gPSBfcmVmLnNhdmVTY3JvbGxQb3NpdGlvbjtcbiAgICAgIHZhciBzYXZlU2Nyb2xsUG9zaXRpb24gPSBfcmVmJHNhdmVTY3JvbGxQb3NpdGlvbiA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJHNhdmVTY3JvbGxQb3NpdGlvbjtcbiAgICAgIHZhciBfcmVmJHRyYW5zaXRpb25PbkxvYWQgPSBfcmVmLnRyYW5zaXRpb25PbkxvYWQ7XG4gICAgICB2YXIgdHJhbnNpdGlvbk9uTG9hZCA9IF9yZWYkdHJhbnNpdGlvbk9uTG9hZCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJHRyYW5zaXRpb25PbkxvYWQ7XG4gICAgICB2YXIgX3JlZiRzdXBwcmVzc1RyYW5zaXRpb25FcnJvciA9IF9yZWYuc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3I7XG4gICAgICB2YXIgc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3IgPSBfcmVmJHN1cHByZXNzVHJhbnNpdGlvbkVycm9yID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3I7XG4gICAgICB2YXIgX3JlZiRyb290ID0gX3JlZi5yb290O1xuICAgICAgdmFyIHJvb3QgPSBfcmVmJHJvb3QgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBfcmVmJHJvb3Q7XG4gICAgICB2YXIgX3JlZiRsaW5rQWN0aXZlQ2xhc3MgPSBfcmVmLmxpbmtBY3RpdmVDbGFzcztcbiAgICAgIHZhciBsaW5rQWN0aXZlQ2xhc3MgPSBfcmVmJGxpbmtBY3RpdmVDbGFzcyA9PT0gdW5kZWZpbmVkID8gJ3YtbGluay1hY3RpdmUnIDogX3JlZiRsaW5rQWN0aXZlQ2xhc3M7XG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgUm91dGVyKTtcblxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoIVJvdXRlci5pbnN0YWxsZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgaW5zdGFsbCB0aGUgUm91dGVyIHdpdGggVnVlLnVzZSgpIGJlZm9yZSAnICsgJ2NyZWF0aW5nIGFuIGluc3RhbmNlLicpO1xuICAgICAgfVxuXG4gICAgICAvLyBWdWUgaW5zdGFuY2VzXG4gICAgICB0aGlzLmFwcCA9IG51bGw7XG4gICAgICB0aGlzLl9jaGlsZHJlbiA9IFtdO1xuXG4gICAgICAvLyByb3V0ZSByZWNvZ25pemVyXG4gICAgICB0aGlzLl9yZWNvZ25pemVyID0gbmV3IFJvdXRlUmVjb2duaXplcigpO1xuICAgICAgdGhpcy5fZ3VhcmRSZWNvZ25pemVyID0gbmV3IFJvdXRlUmVjb2duaXplcigpO1xuXG4gICAgICAvLyBzdGF0ZVxuICAgICAgdGhpcy5fc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fc3RhcnRDYiA9IG51bGw7XG4gICAgICB0aGlzLl9jdXJyZW50Um91dGUgPSB7fTtcbiAgICAgIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uID0gbnVsbDtcbiAgICAgIHRoaXMuX3ByZXZpb3VzVHJhbnNpdGlvbiA9IG51bGw7XG4gICAgICB0aGlzLl9ub3RGb3VuZEhhbmRsZXIgPSBudWxsO1xuICAgICAgdGhpcy5fbm90Rm91bmRSZWRpcmVjdCA9IG51bGw7XG4gICAgICB0aGlzLl9iZWZvcmVFYWNoSG9va3MgPSBbXTtcbiAgICAgIHRoaXMuX2FmdGVyRWFjaEhvb2tzID0gW107XG5cbiAgICAgIC8vIHRyaWdnZXIgdHJhbnNpdGlvbiBvbiBpbml0aWFsIHJlbmRlcj9cbiAgICAgIHRoaXMuX3JlbmRlcmVkID0gZmFsc2U7XG4gICAgICB0aGlzLl90cmFuc2l0aW9uT25Mb2FkID0gdHJhbnNpdGlvbk9uTG9hZDtcblxuICAgICAgLy8gaGlzdG9yeSBtb2RlXG4gICAgICB0aGlzLl9yb290ID0gcm9vdDtcbiAgICAgIHRoaXMuX2Fic3RyYWN0ID0gYWJzdHJhY3Q7XG4gICAgICB0aGlzLl9oYXNoYmFuZyA9IGhhc2hiYW5nO1xuXG4gICAgICAvLyBjaGVjayBpZiBIVE1MNSBoaXN0b3J5IGlzIGF2YWlsYWJsZVxuICAgICAgdmFyIGhhc1B1c2hTdGF0ZSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5oaXN0b3J5ICYmIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZTtcbiAgICAgIHRoaXMuX2hpc3RvcnkgPSBoaXN0b3J5ICYmIGhhc1B1c2hTdGF0ZTtcbiAgICAgIHRoaXMuX2hpc3RvcnlGYWxsYmFjayA9IGhpc3RvcnkgJiYgIWhhc1B1c2hTdGF0ZTtcblxuICAgICAgLy8gY3JlYXRlIGhpc3Rvcnkgb2JqZWN0XG4gICAgICB2YXIgaW5Ccm93c2VyID0gVnVlLnV0aWwuaW5Ccm93c2VyO1xuICAgICAgdGhpcy5tb2RlID0gIWluQnJvd3NlciB8fCB0aGlzLl9hYnN0cmFjdCA/ICdhYnN0cmFjdCcgOiB0aGlzLl9oaXN0b3J5ID8gJ2h0bWw1JyA6ICdoYXNoJztcblxuICAgICAgdmFyIEhpc3RvcnkgPSBoaXN0b3J5QmFja2VuZHNbdGhpcy5tb2RlXTtcbiAgICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KHtcbiAgICAgICAgcm9vdDogcm9vdCxcbiAgICAgICAgaGFzaGJhbmc6IHRoaXMuX2hhc2hiYW5nLFxuICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UocGF0aCwgc3RhdGUsIGFuY2hvcikge1xuICAgICAgICAgIF90aGlzLl9tYXRjaChwYXRoLCBzdGF0ZSwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIG90aGVyIG9wdGlvbnNcbiAgICAgIHRoaXMuX3NhdmVTY3JvbGxQb3NpdGlvbiA9IHNhdmVTY3JvbGxQb3NpdGlvbjtcbiAgICAgIHRoaXMuX2xpbmtBY3RpdmVDbGFzcyA9IGxpbmtBY3RpdmVDbGFzcztcbiAgICAgIHRoaXMuX3N1cHByZXNzID0gc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3I7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWxsb3cgZGlyZWN0bHkgcGFzc2luZyBjb21wb25lbnRzIHRvIGEgcm91dGVcbiAgICAgKiBkZWZpbml0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuICAgICAqL1xuXG4gICAgLy8gQVBJID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgLyoqXG4gICAgKiBSZWdpc3RlciBhIG1hcCBvZiB0b3AtbGV2ZWwgcGF0aHMuXG4gICAgKlxuICAgICogQHBhcmFtIHtPYmplY3R9IG1hcFxuICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uIG1hcChfbWFwKSB7XG4gICAgICBmb3IgKHZhciByb3V0ZSBpbiBfbWFwKSB7XG4gICAgICAgIHRoaXMub24ocm91dGUsIF9tYXBbcm91dGVdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBhIHNpbmdsZSByb290LWxldmVsIHBhdGhcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSByb290UGF0aFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG4gICAgICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gY29tcG9uZW50XG4gICAgICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gW3N1YlJvdXRlc11cbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW2ZvcmNlUmVmcmVzaF1cbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtiZWZvcmVdXG4gICAgICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbYWZ0ZXJdXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gb24ocm9vdFBhdGgsIGhhbmRsZXIpIHtcbiAgICAgIGlmIChyb290UGF0aCA9PT0gJyonKSB7XG4gICAgICAgIHRoaXMuX25vdEZvdW5kKGhhbmRsZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYWRkUm91dGUocm9vdFBhdGgsIGhhbmRsZXIsIFtdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXQgcmVkaXJlY3RzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1hcFxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5yZWRpcmVjdCA9IGZ1bmN0aW9uIHJlZGlyZWN0KG1hcCkge1xuICAgICAgZm9yICh2YXIgcGF0aCBpbiBtYXApIHtcbiAgICAgICAgdGhpcy5fYWRkUmVkaXJlY3QocGF0aCwgbWFwW3BhdGhdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXQgYWxpYXNlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBtYXBcbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuYWxpYXMgPSBmdW5jdGlvbiBhbGlhcyhtYXApIHtcbiAgICAgIGZvciAodmFyIHBhdGggaW4gbWFwKSB7XG4gICAgICAgIHRoaXMuX2FkZEFsaWFzKHBhdGgsIG1hcFtwYXRoXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2V0IGdsb2JhbCBiZWZvcmUgaG9vay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLmJlZm9yZUVhY2ggPSBmdW5jdGlvbiBiZWZvcmVFYWNoKGZuKSB7XG4gICAgICB0aGlzLl9iZWZvcmVFYWNoSG9va3MucHVzaChmbik7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2V0IGdsb2JhbCBhZnRlciBob29rLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuYWZ0ZXJFYWNoID0gZnVuY3Rpb24gYWZ0ZXJFYWNoKGZuKSB7XG4gICAgICB0aGlzLl9hZnRlckVhY2hIb29rcy5wdXNoKGZuKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBOYXZpZ2F0ZSB0byBhIGdpdmVuIHBhdGguXG4gICAgICogVGhlIHBhdGggY2FuIGJlIGFuIG9iamVjdCBkZXNjcmliaW5nIGEgbmFtZWQgcGF0aCBpblxuICAgICAqIHRoZSBmb3JtYXQgb2YgeyBuYW1lOiAnLi4uJywgcGFyYW1zOiB7fSwgcXVlcnk6IHt9fVxuICAgICAqIFRoZSBwYXRoIGlzIGFzc3VtZWQgdG8gYmUgYWxyZWFkeSBkZWNvZGVkLCBhbmQgd2lsbFxuICAgICAqIGJlIHJlc29sdmVkIGFnYWluc3Qgcm9vdCAoaWYgcHJvdmlkZWQpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IHBhdGhcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtyZXBsYWNlXVxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvKHBhdGgpIHtcbiAgICAgIHZhciByZXBsYWNlID0gZmFsc2U7XG4gICAgICB2YXIgYXBwZW5kID0gZmFsc2U7XG4gICAgICBpZiAoVnVlLnV0aWwuaXNPYmplY3QocGF0aCkpIHtcbiAgICAgICAgcmVwbGFjZSA9IHBhdGgucmVwbGFjZTtcbiAgICAgICAgYXBwZW5kID0gcGF0aC5hcHBlbmQ7XG4gICAgICB9XG4gICAgICBwYXRoID0gdGhpcy5zdHJpbmdpZnlQYXRoKHBhdGgpO1xuICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgdGhpcy5oaXN0b3J5LmdvKHBhdGgsIHJlcGxhY2UsIGFwcGVuZCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNob3J0IGhhbmQgZm9yIHJlcGxhY2luZyBjdXJyZW50IHBhdGhcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlKHBhdGgpIHtcbiAgICAgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcGF0aCA9IHsgcGF0aDogcGF0aCB9O1xuICAgICAgfVxuICAgICAgcGF0aC5yZXBsYWNlID0gdHJ1ZTtcbiAgICAgIHRoaXMuZ28ocGF0aCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFN0YXJ0IHRoZSByb3V0ZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1Z1ZUNvbnN0cnVjdG9yfSBBcHBcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBjb250YWluZXJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoQXBwLCBjb250YWluZXIsIGNiKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICh0aGlzLl9zdGFydGVkKSB7XG4gICAgICAgIHdhcm4kMSgnYWxyZWFkeSBzdGFydGVkLicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl9zdGFydGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3N0YXJ0Q2IgPSBjYjtcbiAgICAgIGlmICghdGhpcy5hcHApIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmICghQXBwIHx8ICFjb250YWluZXIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3Qgc3RhcnQgdnVlLXJvdXRlciB3aXRoIGEgY29tcG9uZW50IGFuZCBhICcgKyAncm9vdCBjb250YWluZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChBcHAgaW5zdGFuY2VvZiBWdWUpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3Qgc3RhcnQgdnVlLXJvdXRlciB3aXRoIGEgY29tcG9uZW50LCBub3QgYSAnICsgJ1Z1ZSBpbnN0YW5jZS4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9hcHBDb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIHZhciBDdG9yID0gdGhpcy5fYXBwQ29uc3RydWN0b3IgPSB0eXBlb2YgQXBwID09PSAnZnVuY3Rpb24nID8gQXBwIDogVnVlLmV4dGVuZChBcHApO1xuICAgICAgICAvLyBnaXZlIGl0IGEgbmFtZSBmb3IgYmV0dGVyIGRlYnVnZ2luZ1xuICAgICAgICBDdG9yLm9wdGlvbnMubmFtZSA9IEN0b3Iub3B0aW9ucy5uYW1lIHx8ICdSb3V0ZXJBcHAnO1xuICAgICAgfVxuXG4gICAgICAvLyBoYW5kbGUgaGlzdG9yeSBmYWxsYmFjayBpbiBicm93c2VycyB0aGF0IGRvIG5vdFxuICAgICAgLy8gc3VwcG9ydCBIVE1MNSBoaXN0b3J5IEFQSVxuICAgICAgaWYgKHRoaXMuX2hpc3RvcnlGYWxsYmFjaykge1xuICAgICAgICB2YXIgX2xvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xuICAgICAgICB2YXIgX2hpc3RvcnkgPSBuZXcgSFRNTDVIaXN0b3J5KHsgcm9vdDogdGhpcy5fcm9vdCB9KTtcbiAgICAgICAgdmFyIHBhdGggPSBfaGlzdG9yeS5yb290ID8gX2xvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoX2hpc3Rvcnkucm9vdFJFLCAnJykgOiBfbG9jYXRpb24ucGF0aG5hbWU7XG4gICAgICAgIGlmIChwYXRoICYmIHBhdGggIT09ICcvJykge1xuICAgICAgICAgIF9sb2NhdGlvbi5hc3NpZ24oKF9oaXN0b3J5LnJvb3QgfHwgJycpICsgJy8nICsgdGhpcy5oaXN0b3J5LmZvcm1hdFBhdGgocGF0aCkgKyBfbG9jYXRpb24uc2VhcmNoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5oaXN0b3J5LnN0YXJ0KCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFN0b3AgbGlzdGVuaW5nIHRvIHJvdXRlIGNoYW5nZXMuXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgdGhpcy5oaXN0b3J5LnN0b3AoKTtcbiAgICAgIHRoaXMuX3N0YXJ0ZWQgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogTm9ybWFsaXplIG5hbWVkIHJvdXRlIG9iamVjdCAvIHN0cmluZyBwYXRocyBpbnRvXG4gICAgICogYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdHxTdHJpbmd8TnVtYmVyfSBwYXRoXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5zdHJpbmdpZnlQYXRoID0gZnVuY3Rpb24gc3RyaW5naWZ5UGF0aChwYXRoKSB7XG4gICAgICB2YXIgZ2VuZXJhdGVkUGF0aCA9ICcnO1xuICAgICAgaWYgKHBhdGggJiYgdHlwZW9mIHBhdGggPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChwYXRoLm5hbWUpIHtcbiAgICAgICAgICB2YXIgZXh0ZW5kID0gVnVlLnV0aWwuZXh0ZW5kO1xuICAgICAgICAgIHZhciBjdXJyZW50UGFyYW1zID0gdGhpcy5fY3VycmVudFRyYW5zaXRpb24gJiYgdGhpcy5fY3VycmVudFRyYW5zaXRpb24udG8ucGFyYW1zO1xuICAgICAgICAgIHZhciB0YXJnZXRQYXJhbXMgPSBwYXRoLnBhcmFtcyB8fCB7fTtcbiAgICAgICAgICB2YXIgcGFyYW1zID0gY3VycmVudFBhcmFtcyA/IGV4dGVuZChleHRlbmQoe30sIGN1cnJlbnRQYXJhbXMpLCB0YXJnZXRQYXJhbXMpIDogdGFyZ2V0UGFyYW1zO1xuICAgICAgICAgIGdlbmVyYXRlZFBhdGggPSBlbmNvZGVVUkkodGhpcy5fcmVjb2duaXplci5nZW5lcmF0ZShwYXRoLm5hbWUsIHBhcmFtcykpO1xuICAgICAgICB9IGVsc2UgaWYgKHBhdGgucGF0aCkge1xuICAgICAgICAgIGdlbmVyYXRlZFBhdGggPSBlbmNvZGVVUkkocGF0aC5wYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGF0aC5xdWVyeSkge1xuICAgICAgICAgIC8vIG5vdGU6IHRoZSBnZW5lcmF0ZWQgcXVlcnkgc3RyaW5nIGlzIHByZS1VUkwtZW5jb2RlZCBieSB0aGUgcmVjb2duaXplclxuICAgICAgICAgIHZhciBxdWVyeSA9IHRoaXMuX3JlY29nbml6ZXIuZ2VuZXJhdGVRdWVyeVN0cmluZyhwYXRoLnF1ZXJ5KTtcbiAgICAgICAgICBpZiAoZ2VuZXJhdGVkUGF0aC5pbmRleE9mKCc/JykgPiAtMSkge1xuICAgICAgICAgICAgZ2VuZXJhdGVkUGF0aCArPSAnJicgKyBxdWVyeS5zbGljZSgxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2VuZXJhdGVkUGF0aCArPSBxdWVyeTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdlbmVyYXRlZFBhdGggPSBlbmNvZGVVUkkocGF0aCA/IHBhdGggKyAnJyA6ICcnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBnZW5lcmF0ZWRQYXRoO1xuICAgIH07XG5cbiAgICAvLyBJbnRlcm5hbCBtZXRob2RzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAvKipcbiAgICAqIEFkZCBhIHJvdXRlIGNvbnRhaW5pbmcgYSBsaXN0IG9mIHNlZ21lbnRzIHRvIHRoZSBpbnRlcm5hbFxuICAgICogcm91dGUgcmVjb2duaXplci4gV2lsbCBiZSBjYWxsZWQgcmVjdXJzaXZlbHkgdG8gYWRkIGFsbFxuICAgICogcG9zc2libGUgc3ViLXJvdXRlcy5cbiAgICAqXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcbiAgICAqIEBwYXJhbSB7QXJyYXl9IHNlZ21lbnRzXG4gICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuX2FkZFJvdXRlID0gZnVuY3Rpb24gX2FkZFJvdXRlKHBhdGgsIGhhbmRsZXIsIHNlZ21lbnRzKSB7XG4gICAgICBndWFyZENvbXBvbmVudChwYXRoLCBoYW5kbGVyKTtcbiAgICAgIGhhbmRsZXIucGF0aCA9IHBhdGg7XG4gICAgICBoYW5kbGVyLmZ1bGxQYXRoID0gKHNlZ21lbnRzLnJlZHVjZShmdW5jdGlvbiAocGF0aCwgc2VnbWVudCkge1xuICAgICAgICByZXR1cm4gcGF0aCArIHNlZ21lbnQucGF0aDtcbiAgICAgIH0sICcnKSArIHBhdGgpLnJlcGxhY2UoJy8vJywgJy8nKTtcbiAgICAgIHNlZ21lbnRzLnB1c2goe1xuICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICBoYW5kbGVyOiBoYW5kbGVyXG4gICAgICB9KTtcbiAgICAgIHRoaXMuX3JlY29nbml6ZXIuYWRkKHNlZ21lbnRzLCB7XG4gICAgICAgIGFzOiBoYW5kbGVyLm5hbWVcbiAgICAgIH0pO1xuICAgICAgLy8gYWRkIHN1YiByb3V0ZXNcbiAgICAgIGlmIChoYW5kbGVyLnN1YlJvdXRlcykge1xuICAgICAgICBmb3IgKHZhciBzdWJQYXRoIGluIGhhbmRsZXIuc3ViUm91dGVzKSB7XG4gICAgICAgICAgLy8gcmVjdXJzaXZlbHkgd2FsayBhbGwgc3ViIHJvdXRlc1xuICAgICAgICAgIHRoaXMuX2FkZFJvdXRlKHN1YlBhdGgsIGhhbmRsZXIuc3ViUm91dGVzW3N1YlBhdGhdLFxuICAgICAgICAgIC8vIHBhc3MgYSBjb3B5IGluIHJlY3Vyc2lvbiB0byBhdm9pZCBtdXRhdGluZ1xuICAgICAgICAgIC8vIGFjcm9zcyBicmFuY2hlc1xuICAgICAgICAgIHNlZ21lbnRzLnNsaWNlKCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbm90Rm91bmQgcm91dGUgaGFuZGxlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLl9ub3RGb3VuZCA9IGZ1bmN0aW9uIF9ub3RGb3VuZChoYW5kbGVyKSB7XG4gICAgICBndWFyZENvbXBvbmVudCgnKicsIGhhbmRsZXIpO1xuICAgICAgdGhpcy5fbm90Rm91bmRIYW5kbGVyID0gW3sgaGFuZGxlcjogaGFuZGxlciB9XTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWRkIGEgcmVkaXJlY3QgcmVjb3JkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcmVkaXJlY3RQYXRoXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLl9hZGRSZWRpcmVjdCA9IGZ1bmN0aW9uIF9hZGRSZWRpcmVjdChwYXRoLCByZWRpcmVjdFBhdGgpIHtcbiAgICAgIGlmIChwYXRoID09PSAnKicpIHtcbiAgICAgICAgdGhpcy5fbm90Rm91bmRSZWRpcmVjdCA9IHJlZGlyZWN0UGF0aDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2FkZEd1YXJkKHBhdGgsIHJlZGlyZWN0UGF0aCwgdGhpcy5yZXBsYWNlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWRkIGFuIGFsaWFzIHJlY29yZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGFsaWFzUGF0aFxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5fYWRkQWxpYXMgPSBmdW5jdGlvbiBfYWRkQWxpYXMocGF0aCwgYWxpYXNQYXRoKSB7XG4gICAgICB0aGlzLl9hZGRHdWFyZChwYXRoLCBhbGlhc1BhdGgsIHRoaXMuX21hdGNoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWRkIGEgcGF0aCBndWFyZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1hcHBlZFBhdGhcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLl9hZGRHdWFyZCA9IGZ1bmN0aW9uIF9hZGRHdWFyZChwYXRoLCBtYXBwZWRQYXRoLCBfaGFuZGxlcikge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHRoaXMuX2d1YXJkUmVjb2duaXplci5hZGQoW3tcbiAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihtYXRjaCwgcXVlcnkpIHtcbiAgICAgICAgICB2YXIgcmVhbFBhdGggPSBtYXBQYXJhbXMobWFwcGVkUGF0aCwgbWF0Y2gucGFyYW1zLCBxdWVyeSk7XG4gICAgICAgICAgX2hhbmRsZXIuY2FsbChfdGhpczIsIHJlYWxQYXRoKTtcbiAgICAgICAgfVxuICAgICAgfV0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIHBhdGggbWF0Y2hlcyBhbnkgcmVkaXJlY3QgcmVjb3Jkcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gLSBpZiB0cnVlLCB3aWxsIHNraXAgbm9ybWFsIG1hdGNoLlxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5fY2hlY2tHdWFyZCA9IGZ1bmN0aW9uIF9jaGVja0d1YXJkKHBhdGgpIHtcbiAgICAgIHZhciBtYXRjaGVkID0gdGhpcy5fZ3VhcmRSZWNvZ25pemVyLnJlY29nbml6ZShwYXRoLCB0cnVlKTtcbiAgICAgIGlmIChtYXRjaGVkKSB7XG4gICAgICAgIG1hdGNoZWRbMF0uaGFuZGxlcihtYXRjaGVkWzBdLCBtYXRjaGVkLnF1ZXJ5UGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX25vdEZvdW5kUmVkaXJlY3QpIHtcbiAgICAgICAgbWF0Y2hlZCA9IHRoaXMuX3JlY29nbml6ZXIucmVjb2duaXplKHBhdGgpO1xuICAgICAgICBpZiAoIW1hdGNoZWQpIHtcbiAgICAgICAgICB0aGlzLnJlcGxhY2UodGhpcy5fbm90Rm91bmRSZWRpcmVjdCk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogTWF0Y2ggYSBVUkwgcGF0aCBhbmQgc2V0IHRoZSByb3V0ZSBjb250ZXh0IG9uIHZtLFxuICAgICAqIHRyaWdnZXJpbmcgdmlldyB1cGRhdGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3N0YXRlXVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbYW5jaG9yXVxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5fbWF0Y2ggPSBmdW5jdGlvbiBfbWF0Y2gocGF0aCwgc3RhdGUsIGFuY2hvcikge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLl9jaGVja0d1YXJkKHBhdGgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGN1cnJlbnRSb3V0ZSA9IHRoaXMuX2N1cnJlbnRSb3V0ZTtcbiAgICAgIHZhciBjdXJyZW50VHJhbnNpdGlvbiA9IHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uO1xuXG4gICAgICBpZiAoY3VycmVudFRyYW5zaXRpb24pIHtcbiAgICAgICAgaWYgKGN1cnJlbnRUcmFuc2l0aW9uLnRvLnBhdGggPT09IHBhdGgpIHtcbiAgICAgICAgICAvLyBkbyBub3RoaW5nIGlmIHdlIGhhdmUgYW4gYWN0aXZlIHRyYW5zaXRpb24gZ29pbmcgdG8gdGhlIHNhbWUgcGF0aFxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50Um91dGUucGF0aCA9PT0gcGF0aCkge1xuICAgICAgICAgIC8vIFdlIGFyZSBnb2luZyB0byB0aGUgc2FtZSBwYXRoLCBidXQgd2UgYWxzbyBoYXZlIGFuIG9uZ29pbmcgYnV0XG4gICAgICAgICAgLy8gbm90LXlldC12YWxpZGF0ZWQgdHJhbnNpdGlvbi4gQWJvcnQgdGhhdCB0cmFuc2l0aW9uIGFuZCByZXNldCB0b1xuICAgICAgICAgIC8vIHByZXYgdHJhbnNpdGlvbi5cbiAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbi5hYm9ydGVkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbiA9IHRoaXMuX3ByZXZUcmFuc2l0aW9uO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBnb2luZyB0byBhIHRvdGFsbHkgZGlmZmVyZW50IHBhdGguIGFib3J0IG9uZ29pbmcgdHJhbnNpdGlvbi5cbiAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbi5hYm9ydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBjb25zdHJ1Y3QgbmV3IHJvdXRlIGFuZCB0cmFuc2l0aW9uIGNvbnRleHRcbiAgICAgIHZhciByb3V0ZSA9IG5ldyBSb3V0ZShwYXRoLCB0aGlzKTtcbiAgICAgIHZhciB0cmFuc2l0aW9uID0gbmV3IFJvdXRlVHJhbnNpdGlvbih0aGlzLCByb3V0ZSwgY3VycmVudFJvdXRlKTtcblxuICAgICAgLy8gY3VycmVudCB0cmFuc2l0aW9uIGlzIHVwZGF0ZWQgcmlnaHQgbm93LlxuICAgICAgLy8gaG93ZXZlciwgY3VycmVudCByb3V0ZSB3aWxsIG9ubHkgYmUgdXBkYXRlZCBhZnRlciB0aGUgdHJhbnNpdGlvbiBoYXNcbiAgICAgIC8vIGJlZW4gdmFsaWRhdGVkLlxuICAgICAgdGhpcy5fcHJldlRyYW5zaXRpb24gPSBjdXJyZW50VHJhbnNpdGlvbjtcbiAgICAgIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uID0gdHJhbnNpdGlvbjtcblxuICAgICAgaWYgKCF0aGlzLmFwcCkge1xuICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIGluaXRpYWwgcmVuZGVyXG4gICAgICAgICAgdmFyIHJvdXRlciA9IF90aGlzMztcbiAgICAgICAgICBfdGhpczMuYXBwID0gbmV3IF90aGlzMy5fYXBwQ29uc3RydWN0b3Ioe1xuICAgICAgICAgICAgZWw6IF90aGlzMy5fYXBwQ29udGFpbmVyLFxuICAgICAgICAgICAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHtcbiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyID0gcm91dGVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9tZXRhOiB7XG4gICAgICAgICAgICAgICRyb3V0ZTogcm91dGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSkoKTtcbiAgICAgIH1cblxuICAgICAgLy8gY2hlY2sgZ2xvYmFsIGJlZm9yZSBob29rXG4gICAgICB2YXIgYmVmb3JlSG9va3MgPSB0aGlzLl9iZWZvcmVFYWNoSG9va3M7XG4gICAgICB2YXIgc3RhcnRUcmFuc2l0aW9uID0gZnVuY3Rpb24gc3RhcnRUcmFuc2l0aW9uKCkge1xuICAgICAgICB0cmFuc2l0aW9uLnN0YXJ0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczMuX3Bvc3RUcmFuc2l0aW9uKHJvdXRlLCBzdGF0ZSwgYW5jaG9yKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBpZiAoYmVmb3JlSG9va3MubGVuZ3RoKSB7XG4gICAgICAgIHRyYW5zaXRpb24ucnVuUXVldWUoYmVmb3JlSG9va3MsIGZ1bmN0aW9uIChob29rLCBfLCBuZXh0KSB7XG4gICAgICAgICAgaWYgKHRyYW5zaXRpb24gPT09IF90aGlzMy5fY3VycmVudFRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgIHRyYW5zaXRpb24uY2FsbEhvb2soaG9vaywgbnVsbCwgbmV4dCwge1xuICAgICAgICAgICAgICBleHBlY3RCb29sZWFuOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHN0YXJ0VHJhbnNpdGlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFydFRyYW5zaXRpb24oKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLl9yZW5kZXJlZCAmJiB0aGlzLl9zdGFydENiKSB7XG4gICAgICAgIHRoaXMuX3N0YXJ0Q2IuY2FsbChudWxsKTtcbiAgICAgIH1cblxuICAgICAgLy8gSEFDSzpcbiAgICAgIC8vIHNldCByZW5kZXJlZCB0byB0cnVlIGFmdGVyIHRoZSB0cmFuc2l0aW9uIHN0YXJ0LCBzb1xuICAgICAgLy8gdGhhdCBjb21wb25lbnRzIHRoYXQgYXJlIGFjaXR2YXRlZCBzeW5jaHJvbm91c2x5IGtub3dcbiAgICAgIC8vIHdoZXRoZXIgaXQgaXMgdGhlIGluaXRpYWwgcmVuZGVyLlxuICAgICAgdGhpcy5fcmVuZGVyZWQgPSB0cnVlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXQgY3VycmVudCB0byB0aGUgbmV3IHRyYW5zaXRpb24uXG4gICAgICogVGhpcyBpcyBjYWxsZWQgYnkgdGhlIHRyYW5zaXRpb24gb2JqZWN0IHdoZW4gdGhlXG4gICAgICogdmFsaWRhdGlvbiBvZiBhIHJvdXRlIGhhcyBzdWNjZWVkZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuX29uVHJhbnNpdGlvblZhbGlkYXRlZCA9IGZ1bmN0aW9uIF9vblRyYW5zaXRpb25WYWxpZGF0ZWQodHJhbnNpdGlvbikge1xuICAgICAgLy8gc2V0IGN1cnJlbnQgcm91dGVcbiAgICAgIHZhciByb3V0ZSA9IHRoaXMuX2N1cnJlbnRSb3V0ZSA9IHRyYW5zaXRpb24udG87XG4gICAgICAvLyB1cGRhdGUgcm91dGUgY29udGV4dCBmb3IgYWxsIGNoaWxkcmVuXG4gICAgICBpZiAodGhpcy5hcHAuJHJvdXRlICE9PSByb3V0ZSkge1xuICAgICAgICB0aGlzLmFwcC4kcm91dGUgPSByb3V0ZTtcbiAgICAgICAgdGhpcy5fY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgICBjaGlsZC4kcm91dGUgPSByb3V0ZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBjYWxsIGdsb2JhbCBhZnRlciBob29rXG4gICAgICBpZiAodGhpcy5fYWZ0ZXJFYWNoSG9va3MubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX2FmdGVyRWFjaEhvb2tzLmZvckVhY2goZnVuY3Rpb24gKGhvb2spIHtcbiAgICAgICAgICByZXR1cm4gaG9vay5jYWxsKG51bGwsIHtcbiAgICAgICAgICAgIHRvOiB0cmFuc2l0aW9uLnRvLFxuICAgICAgICAgICAgZnJvbTogdHJhbnNpdGlvbi5mcm9tXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5fY3VycmVudFRyYW5zaXRpb24uZG9uZSA9IHRydWU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBzdHVmZiBhZnRlciB0aGUgdHJhbnNpdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Um91dGV9IHJvdXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtzdGF0ZV1cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW2FuY2hvcl1cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuX3Bvc3RUcmFuc2l0aW9uID0gZnVuY3Rpb24gX3Bvc3RUcmFuc2l0aW9uKHJvdXRlLCBzdGF0ZSwgYW5jaG9yKSB7XG4gICAgICAvLyBoYW5kbGUgc2Nyb2xsIHBvc2l0aW9uc1xuICAgICAgLy8gc2F2ZWQgc2Nyb2xsIHBvc2l0aW9ucyB0YWtlIHByaW9yaXR5XG4gICAgICAvLyB0aGVuIHdlIGNoZWNrIGlmIHRoZSBwYXRoIGhhcyBhbiBhbmNob3JcbiAgICAgIHZhciBwb3MgPSBzdGF0ZSAmJiBzdGF0ZS5wb3M7XG4gICAgICBpZiAocG9zICYmIHRoaXMuX3NhdmVTY3JvbGxQb3NpdGlvbikge1xuICAgICAgICBWdWUubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyhwb3MueCwgcG9zLnkpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoYW5jaG9yKSB7XG4gICAgICAgIFZ1ZS5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYW5jaG9yLnNsaWNlKDEpKTtcbiAgICAgICAgICBpZiAoZWwpIHtcbiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyh3aW5kb3cuc2Nyb2xsWCwgZWwub2Zmc2V0VG9wKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gUm91dGVyO1xuICB9KSgpO1xuXG4gIGZ1bmN0aW9uIGd1YXJkQ29tcG9uZW50KHBhdGgsIGhhbmRsZXIpIHtcbiAgICB2YXIgY29tcCA9IGhhbmRsZXIuY29tcG9uZW50O1xuICAgIGlmIChWdWUudXRpbC5pc1BsYWluT2JqZWN0KGNvbXApKSB7XG4gICAgICBjb21wID0gaGFuZGxlci5jb21wb25lbnQgPSBWdWUuZXh0ZW5kKGNvbXApO1xuICAgIH1cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAodHlwZW9mIGNvbXAgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGhhbmRsZXIuY29tcG9uZW50ID0gbnVsbDtcbiAgICAgIHdhcm4kMSgnaW52YWxpZCBjb21wb25lbnQgZm9yIHJvdXRlIFwiJyArIHBhdGggKyAnXCIuJyk7XG4gICAgfVxuICB9XG5cbiAgLyogSW5zdGFsbGF0aW9uICovXG5cbiAgUm91dGVyLmluc3RhbGxlZCA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBJbnN0YWxsYXRpb24gaW50ZXJmYWNlLlxuICAgKiBJbnN0YWxsIHRoZSBuZWNlc3NhcnkgZGlyZWN0aXZlcy5cbiAgICovXG5cbiAgUm91dGVyLmluc3RhbGwgPSBmdW5jdGlvbiAoZXh0ZXJuYWxWdWUpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoUm91dGVyLmluc3RhbGxlZCkge1xuICAgICAgd2FybiQxKCdhbHJlYWR5IGluc3RhbGxlZC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgVnVlID0gZXh0ZXJuYWxWdWU7XG4gICAgYXBwbHlPdmVycmlkZShWdWUpO1xuICAgIFZpZXcoVnVlKTtcbiAgICBMaW5rKFZ1ZSk7XG4gICAgZXhwb3J0cyQxLlZ1ZSA9IFZ1ZTtcbiAgICBSb3V0ZXIuaW5zdGFsbGVkID0gdHJ1ZTtcbiAgfTtcblxuICAvLyBhdXRvIGluc3RhbGxcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuVnVlKSB7XG4gICAgd2luZG93LlZ1ZS51c2UoUm91dGVyKTtcbiAgfVxuXG4gIHJldHVybiBSb3V0ZXI7XG5cbn0pKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtcm91dGVyL2Rpc3QvdnVlLXJvdXRlci5qc1xuICoqIG1vZHVsZSBpZCA9IDIwM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9kZXYvc3JjL2NvbXBvbmVudHMvYXBpLXRhYmxlL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIwNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9kZXYvc3JjL2NvbXBvbmVudHMvc2lkZS1uYXYvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMjA1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2Rldi9zcmMvY29tcG9uZW50cy9zaXRlLWhlYWRlci9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vZGV2L3NyYy92aWV3cy9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvYWxlcnQvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMjA4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL2NvbGxhcHNhYmxlLXBhbmVsL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIwOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY29udGFpbmVyLnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2xlZ2FsLWNvbnRhaW5lci52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY29udGFpbmVyLnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb250YWluZXIudnVlXG4gKiogbW9kdWxlIGlkID0gMjEwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9sZWdhbC1jb3VudGVyLnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2xlZ2FsLWNvdW50ZXIudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2xlZ2FsLWNvdW50ZXIudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvdW50ZXIudnVlXG4gKiogbW9kdWxlIGlkID0gMjExXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LWNvbnRhaW5lci52dWVcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LWNvbnRhaW5lci52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vb3ZlcmxheS1jb250YWluZXIudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS1jb250YWluZXIudnVlXG4gKiogbW9kdWxlIGlkID0gMjEyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXkudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXkudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvc3Bpbm5lci9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvc3RlcC10cmFja2VyL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIxNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vdGFicy52dWVcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi90YWJzLnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi90YWJzLnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy90YWIvdGFicy52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qIVxuICogVnVlLmpzIHYxLjAuMjZcbiAqIChjKSAyMDE2IEV2YW4gWW91XG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gc2V0KG9iaiwga2V5LCB2YWwpIHtcbiAgaWYgKGhhc093bihvYmosIGtleSkpIHtcbiAgICBvYmpba2V5XSA9IHZhbDtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKG9iai5faXNWdWUpIHtcbiAgICBzZXQob2JqLl9kYXRhLCBrZXksIHZhbCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBvYiA9IG9iai5fX29iX187XG4gIGlmICghb2IpIHtcbiAgICBvYmpba2V5XSA9IHZhbDtcbiAgICByZXR1cm47XG4gIH1cbiAgb2IuY29udmVydChrZXksIHZhbCk7XG4gIG9iLmRlcC5ub3RpZnkoKTtcbiAgaWYgKG9iLnZtcykge1xuICAgIHZhciBpID0gb2Iudm1zLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YXIgdm0gPSBvYi52bXNbaV07XG4gICAgICB2bS5fcHJveHkoa2V5KTtcbiAgICAgIHZtLl9kaWdlc3QoKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbDtcbn1cblxuLyoqXG4gKiBEZWxldGUgYSBwcm9wZXJ0eSBhbmQgdHJpZ2dlciBjaGFuZ2UgaWYgbmVjZXNzYXJ5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqL1xuXG5mdW5jdGlvbiBkZWwob2JqLCBrZXkpIHtcbiAgaWYgKCFoYXNPd24ob2JqLCBrZXkpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGRlbGV0ZSBvYmpba2V5XTtcbiAgdmFyIG9iID0gb2JqLl9fb2JfXztcbiAgaWYgKCFvYikge1xuICAgIGlmIChvYmouX2lzVnVlKSB7XG4gICAgICBkZWxldGUgb2JqLl9kYXRhW2tleV07XG4gICAgICBvYmouX2RpZ2VzdCgpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgb2IuZGVwLm5vdGlmeSgpO1xuICBpZiAob2Iudm1zKSB7XG4gICAgdmFyIGkgPSBvYi52bXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciB2bSA9IG9iLnZtc1tpXTtcbiAgICAgIHZtLl91bnByb3h5KGtleSk7XG4gICAgICB2bS5fZGlnZXN0KCk7XG4gICAgfVxuICB9XG59XG5cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG4vKipcbiAqIENoZWNrIHdoZXRoZXIgdGhlIG9iamVjdCBoYXMgdGhlIHByb3BlcnR5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaGFzT3duKG9iaiwga2V5KSB7XG4gIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBleHByZXNzaW9uIGlzIGEgbGl0ZXJhbCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbnZhciBsaXRlcmFsVmFsdWVSRSA9IC9eXFxzPyh0cnVlfGZhbHNlfC0/W1xcZFxcLl0rfCdbXiddKid8XCJbXlwiXSpcIilcXHM/JC87XG5cbmZ1bmN0aW9uIGlzTGl0ZXJhbChleHApIHtcbiAgcmV0dXJuIGxpdGVyYWxWYWx1ZVJFLnRlc3QoZXhwKTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHN0cmluZyBzdGFydHMgd2l0aCAkIG9yIF9cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzUmVzZXJ2ZWQoc3RyKSB7XG4gIHZhciBjID0gKHN0ciArICcnKS5jaGFyQ29kZUF0KDApO1xuICByZXR1cm4gYyA9PT0gMHgyNCB8fCBjID09PSAweDVGO1xufVxuXG4vKipcbiAqIEd1YXJkIHRleHQgb3V0cHV0LCBtYWtlIHN1cmUgdW5kZWZpbmVkIG91dHB1dHNcbiAqIGVtcHR5IHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBfdG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlLnRvU3RyaW5nKCk7XG59XG5cbi8qKlxuICogQ2hlY2sgYW5kIGNvbnZlcnQgcG9zc2libGUgbnVtZXJpYyBzdHJpbmdzIHRvIG51bWJlcnNcbiAqIGJlZm9yZSBzZXR0aW5nIGJhY2sgdG8gZGF0YVxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4geyp8TnVtYmVyfVxuICovXG5cbmZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9IGVsc2Uge1xuICAgIHZhciBwYXJzZWQgPSBOdW1iZXIodmFsdWUpO1xuICAgIHJldHVybiBpc05hTihwYXJzZWQpID8gdmFsdWUgOiBwYXJzZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0IHN0cmluZyBib29sZWFuIGxpdGVyYWxzIGludG8gcmVhbCBib29sZWFucy5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHsqfEJvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gdG9Cb29sZWFuKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gJ3RydWUnID8gdHJ1ZSA6IHZhbHVlID09PSAnZmFsc2UnID8gZmFsc2UgOiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBTdHJpcCBxdW90ZXMgZnJvbSBhIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZyB8IGZhbHNlfVxuICovXG5cbmZ1bmN0aW9uIHN0cmlwUXVvdGVzKHN0cikge1xuICB2YXIgYSA9IHN0ci5jaGFyQ29kZUF0KDApO1xuICB2YXIgYiA9IHN0ci5jaGFyQ29kZUF0KHN0ci5sZW5ndGggLSAxKTtcbiAgcmV0dXJuIGEgPT09IGIgJiYgKGEgPT09IDB4MjIgfHwgYSA9PT0gMHgyNykgPyBzdHIuc2xpY2UoMSwgLTEpIDogc3RyO1xufVxuXG4vKipcbiAqIENhbWVsaXplIGEgaHlwaGVuLWRlbG1pdGVkIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxudmFyIGNhbWVsaXplUkUgPSAvLShcXHcpL2c7XG5cbmZ1bmN0aW9uIGNhbWVsaXplKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoY2FtZWxpemVSRSwgdG9VcHBlcik7XG59XG5cbmZ1bmN0aW9uIHRvVXBwZXIoXywgYykge1xuICByZXR1cm4gYyA/IGMudG9VcHBlckNhc2UoKSA6ICcnO1xufVxuXG4vKipcbiAqIEh5cGhlbmF0ZSBhIGNhbWVsQ2FzZSBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbnZhciBoeXBoZW5hdGVSRSA9IC8oW2EtelxcZF0pKFtBLVpdKS9nO1xuXG5mdW5jdGlvbiBoeXBoZW5hdGUoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShoeXBoZW5hdGVSRSwgJyQxLSQyJykudG9Mb3dlckNhc2UoKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBoeXBoZW4vdW5kZXJzY29yZS9zbGFzaCBkZWxpbWl0ZXJlZCBuYW1lcyBpbnRvXG4gKiBjYW1lbGl6ZWQgY2xhc3NOYW1lcy5cbiAqXG4gKiBlLmcuIG15LWNvbXBvbmVudCA9PiBNeUNvbXBvbmVudFxuICogICAgICBzb21lX2Vsc2UgICAgPT4gU29tZUVsc2VcbiAqICAgICAgc29tZS9jb21wICAgID0+IFNvbWVDb21wXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbnZhciBjbGFzc2lmeVJFID0gLyg/Ol58Wy1fXFwvXSkoXFx3KS9nO1xuXG5mdW5jdGlvbiBjbGFzc2lmeShzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKGNsYXNzaWZ5UkUsIHRvVXBwZXIpO1xufVxuXG4vKipcbiAqIFNpbXBsZSBiaW5kLCBmYXN0ZXIgdGhhbiBuYXRpdmVcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHBhcmFtIHtPYmplY3R9IGN0eFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gYmluZChmbiwgY3R4KSB7XG4gIHJldHVybiBmdW5jdGlvbiAoYSkge1xuICAgIHZhciBsID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICByZXR1cm4gbCA/IGwgPiAxID8gZm4uYXBwbHkoY3R4LCBhcmd1bWVudHMpIDogZm4uY2FsbChjdHgsIGEpIDogZm4uY2FsbChjdHgpO1xuICB9O1xufVxuXG4vKipcbiAqIENvbnZlcnQgYW4gQXJyYXktbGlrZSBvYmplY3QgdG8gYSByZWFsIEFycmF5LlxuICpcbiAqIEBwYXJhbSB7QXJyYXktbGlrZX0gbGlzdFxuICogQHBhcmFtIHtOdW1iZXJ9IFtzdGFydF0gLSBzdGFydCBpbmRleFxuICogQHJldHVybiB7QXJyYXl9XG4gKi9cblxuZnVuY3Rpb24gdG9BcnJheShsaXN0LCBzdGFydCkge1xuICBzdGFydCA9IHN0YXJ0IHx8IDA7XG4gIHZhciBpID0gbGlzdC5sZW5ndGggLSBzdGFydDtcbiAgdmFyIHJldCA9IG5ldyBBcnJheShpKTtcbiAgd2hpbGUgKGktLSkge1xuICAgIHJldFtpXSA9IGxpc3RbaSArIHN0YXJ0XTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG4vKipcbiAqIE1peCBwcm9wZXJ0aWVzIGludG8gdGFyZ2V0IG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdG9cbiAqIEBwYXJhbSB7T2JqZWN0fSBmcm9tXG4gKi9cblxuZnVuY3Rpb24gZXh0ZW5kKHRvLCBmcm9tKSB7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZnJvbSk7XG4gIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICB0b1trZXlzW2ldXSA9IGZyb21ba2V5c1tpXV07XG4gIH1cbiAgcmV0dXJuIHRvO1xufVxuXG4vKipcbiAqIFF1aWNrIG9iamVjdCBjaGVjayAtIHRoaXMgaXMgcHJpbWFyaWx5IHVzZWQgdG8gdGVsbFxuICogT2JqZWN0cyBmcm9tIHByaW1pdGl2ZSB2YWx1ZXMgd2hlbiB3ZSBrbm93IHRoZSB2YWx1ZVxuICogaXMgYSBKU09OLWNvbXBsaWFudCB0eXBlLlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xuICByZXR1cm4gb2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIFN0cmljdCBvYmplY3QgdHlwZSBjaGVjay4gT25seSByZXR1cm5zIHRydWVcbiAqIGZvciBwbGFpbiBKYXZhU2NyaXB0IG9iamVjdHMuXG4gKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbnZhciBPQkpFQ1RfU1RSSU5HID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qob2JqKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09IE9CSkVDVF9TVFJJTkc7XG59XG5cbi8qKlxuICogQXJyYXkgdHlwZSBjaGVjay5cbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5cbi8qKlxuICogRGVmaW5lIGEgcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHsqfSB2YWxcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW2VudW1lcmFibGVdXG4gKi9cblxuZnVuY3Rpb24gZGVmKG9iaiwga2V5LCB2YWwsIGVudW1lcmFibGUpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgdmFsdWU6IHZhbCxcbiAgICBlbnVtZXJhYmxlOiAhIWVudW1lcmFibGUsXG4gICAgd3JpdGFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufVxuXG4vKipcbiAqIERlYm91bmNlIGEgZnVuY3Rpb24gc28gaXQgb25seSBnZXRzIGNhbGxlZCBhZnRlciB0aGVcbiAqIGlucHV0IHN0b3BzIGFycml2aW5nIGFmdGVyIHRoZSBnaXZlbiB3YWl0IHBlcmlvZC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jXG4gKiBAcGFyYW0ge051bWJlcn0gd2FpdFxuICogQHJldHVybiB7RnVuY3Rpb259IC0gdGhlIGRlYm91bmNlZCBmdW5jdGlvblxuICovXG5cbmZ1bmN0aW9uIF9kZWJvdW5jZShmdW5jLCB3YWl0KSB7XG4gIHZhciB0aW1lb3V0LCBhcmdzLCBjb250ZXh0LCB0aW1lc3RhbXAsIHJlc3VsdDtcbiAgdmFyIGxhdGVyID0gZnVuY3Rpb24gbGF0ZXIoKSB7XG4gICAgdmFyIGxhc3QgPSBEYXRlLm5vdygpIC0gdGltZXN0YW1wO1xuICAgIGlmIChsYXN0IDwgd2FpdCAmJiBsYXN0ID49IDApIHtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0IC0gbGFzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBjb250ZXh0ID0gdGhpcztcbiAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgaWYgKCF0aW1lb3V0KSB7XG4gICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5cbi8qKlxuICogTWFudWFsIGluZGV4T2YgYmVjYXVzZSBpdCdzIHNsaWdodGx5IGZhc3RlciB0aGFuXG4gKiBuYXRpdmUuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJyXG4gKiBAcGFyYW0geyp9IG9ialxuICovXG5cbmZ1bmN0aW9uIGluZGV4T2YoYXJyLCBvYmopIHtcbiAgdmFyIGkgPSBhcnIubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgaWYgKGFycltpXSA9PT0gb2JqKSByZXR1cm4gaTtcbiAgfVxuICByZXR1cm4gLTE7XG59XG5cbi8qKlxuICogTWFrZSBhIGNhbmNlbGxhYmxlIHZlcnNpb24gb2YgYW4gYXN5bmMgY2FsbGJhY2suXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNhbmNlbGxhYmxlKGZuKSB7XG4gIHZhciBjYiA9IGZ1bmN0aW9uIGNiKCkge1xuICAgIGlmICghY2IuY2FuY2VsbGVkKSB7XG4gICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gIH07XG4gIGNiLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICBjYi5jYW5jZWxsZWQgPSB0cnVlO1xuICB9O1xuICByZXR1cm4gY2I7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdHdvIHZhbHVlcyBhcmUgbG9vc2VseSBlcXVhbCAtIHRoYXQgaXMsXG4gKiBpZiB0aGV5IGFyZSBwbGFpbiBvYmplY3RzLCBkbyB0aGV5IGhhdmUgdGhlIHNhbWUgc2hhcGU/XG4gKlxuICogQHBhcmFtIHsqfSBhXG4gKiBAcGFyYW0geyp9IGJcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gbG9vc2VFcXVhbChhLCBiKSB7XG4gIC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuICByZXR1cm4gYSA9PSBiIHx8IChpc09iamVjdChhKSAmJiBpc09iamVjdChiKSA/IEpTT04uc3RyaW5naWZ5KGEpID09PSBKU09OLnN0cmluZ2lmeShiKSA6IGZhbHNlKTtcbiAgLyogZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cbn1cblxudmFyIGhhc1Byb3RvID0gKCdfX3Byb3RvX18nIGluIHt9KTtcblxuLy8gQnJvd3NlciBlbnZpcm9ubWVudCBzbmlmZmluZ1xudmFyIGluQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh3aW5kb3cpICE9PSAnW29iamVjdCBPYmplY3RdJztcblxuLy8gZGV0ZWN0IGRldnRvb2xzXG52YXIgZGV2dG9vbHMgPSBpbkJyb3dzZXIgJiYgd2luZG93Ll9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX187XG5cbi8vIFVBIHNuaWZmaW5nIGZvciB3b3JraW5nIGFyb3VuZCBicm93c2VyLXNwZWNpZmljIHF1aXJrc1xudmFyIFVBID0gaW5Ccm93c2VyICYmIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG52YXIgaXNJRSA9IFVBICYmIFVBLmluZGV4T2YoJ3RyaWRlbnQnKSA+IDA7XG52YXIgaXNJRTkgPSBVQSAmJiBVQS5pbmRleE9mKCdtc2llIDkuMCcpID4gMDtcbnZhciBpc0FuZHJvaWQgPSBVQSAmJiBVQS5pbmRleE9mKCdhbmRyb2lkJykgPiAwO1xudmFyIGlzSW9zID0gVUEgJiYgLyhpcGhvbmV8aXBhZHxpcG9kfGlvcykvaS50ZXN0KFVBKTtcbnZhciBpb3NWZXJzaW9uTWF0Y2ggPSBpc0lvcyAmJiBVQS5tYXRjaCgvb3MgKFtcXGRfXSspLyk7XG52YXIgaW9zVmVyc2lvbiA9IGlvc1ZlcnNpb25NYXRjaCAmJiBpb3NWZXJzaW9uTWF0Y2hbMV0uc3BsaXQoJ18nKTtcblxuLy8gZGV0ZWN0aW5nIGlPUyBVSVdlYlZpZXcgYnkgaW5kZXhlZERCXG52YXIgaGFzTXV0YXRpb25PYnNlcnZlckJ1ZyA9IGlvc1ZlcnNpb24gJiYgTnVtYmVyKGlvc1ZlcnNpb25bMF0pID49IDkgJiYgTnVtYmVyKGlvc1ZlcnNpb25bMV0pID49IDMgJiYgIXdpbmRvdy5pbmRleGVkREI7XG5cbnZhciB0cmFuc2l0aW9uUHJvcCA9IHVuZGVmaW5lZDtcbnZhciB0cmFuc2l0aW9uRW5kRXZlbnQgPSB1bmRlZmluZWQ7XG52YXIgYW5pbWF0aW9uUHJvcCA9IHVuZGVmaW5lZDtcbnZhciBhbmltYXRpb25FbmRFdmVudCA9IHVuZGVmaW5lZDtcblxuLy8gVHJhbnNpdGlvbiBwcm9wZXJ0eS9ldmVudCBzbmlmZmluZ1xuaWYgKGluQnJvd3NlciAmJiAhaXNJRTkpIHtcbiAgdmFyIGlzV2Via2l0VHJhbnMgPSB3aW5kb3cub250cmFuc2l0aW9uZW5kID09PSB1bmRlZmluZWQgJiYgd2luZG93Lm9ud2Via2l0dHJhbnNpdGlvbmVuZCAhPT0gdW5kZWZpbmVkO1xuICB2YXIgaXNXZWJraXRBbmltID0gd2luZG93Lm9uYW5pbWF0aW9uZW5kID09PSB1bmRlZmluZWQgJiYgd2luZG93Lm9ud2Via2l0YW5pbWF0aW9uZW5kICE9PSB1bmRlZmluZWQ7XG4gIHRyYW5zaXRpb25Qcm9wID0gaXNXZWJraXRUcmFucyA/ICdXZWJraXRUcmFuc2l0aW9uJyA6ICd0cmFuc2l0aW9uJztcbiAgdHJhbnNpdGlvbkVuZEV2ZW50ID0gaXNXZWJraXRUcmFucyA/ICd3ZWJraXRUcmFuc2l0aW9uRW5kJyA6ICd0cmFuc2l0aW9uZW5kJztcbiAgYW5pbWF0aW9uUHJvcCA9IGlzV2Via2l0QW5pbSA/ICdXZWJraXRBbmltYXRpb24nIDogJ2FuaW1hdGlvbic7XG4gIGFuaW1hdGlvbkVuZEV2ZW50ID0gaXNXZWJraXRBbmltID8gJ3dlYmtpdEFuaW1hdGlvbkVuZCcgOiAnYW5pbWF0aW9uZW5kJztcbn1cblxuLyoqXG4gKiBEZWZlciBhIHRhc2sgdG8gZXhlY3V0ZSBpdCBhc3luY2hyb25vdXNseS4gSWRlYWxseSB0aGlzXG4gKiBzaG91bGQgYmUgZXhlY3V0ZWQgYXMgYSBtaWNyb3Rhc2ssIHNvIHdlIGxldmVyYWdlXG4gKiBNdXRhdGlvbk9ic2VydmVyIGlmIGl0J3MgYXZhaWxhYmxlLCBhbmQgZmFsbGJhY2sgdG9cbiAqIHNldFRpbWVvdXQoMCkuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqIEBwYXJhbSB7T2JqZWN0fSBjdHhcbiAqL1xuXG52YXIgbmV4dFRpY2sgPSAoZnVuY3Rpb24gKCkge1xuICB2YXIgY2FsbGJhY2tzID0gW107XG4gIHZhciBwZW5kaW5nID0gZmFsc2U7XG4gIHZhciB0aW1lckZ1bmM7XG4gIGZ1bmN0aW9uIG5leHRUaWNrSGFuZGxlcigpIHtcbiAgICBwZW5kaW5nID0gZmFsc2U7XG4gICAgdmFyIGNvcGllcyA9IGNhbGxiYWNrcy5zbGljZSgwKTtcbiAgICBjYWxsYmFja3MgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvcGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29waWVzW2ldKCk7XG4gICAgfVxuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICh0eXBlb2YgTXV0YXRpb25PYnNlcnZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgIWhhc011dGF0aW9uT2JzZXJ2ZXJCdWcpIHtcbiAgICB2YXIgY291bnRlciA9IDE7XG4gICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobmV4dFRpY2tIYW5kbGVyKTtcbiAgICB2YXIgdGV4dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjb3VudGVyKTtcbiAgICBvYnNlcnZlci5vYnNlcnZlKHRleHROb2RlLCB7XG4gICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlXG4gICAgfSk7XG4gICAgdGltZXJGdW5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgY291bnRlciA9IChjb3VudGVyICsgMSkgJSAyO1xuICAgICAgdGV4dE5vZGUuZGF0YSA9IGNvdW50ZXI7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICAvLyB3ZWJwYWNrIGF0dGVtcHRzIHRvIGluamVjdCBhIHNoaW0gZm9yIHNldEltbWVkaWF0ZVxuICAgIC8vIGlmIGl0IGlzIHVzZWQgYXMgYSBnbG9iYWwsIHNvIHdlIGhhdmUgdG8gd29yayBhcm91bmQgdGhhdCB0b1xuICAgIC8vIGF2b2lkIGJ1bmRsaW5nIHVubmVjZXNzYXJ5IGNvZGUuXG4gICAgdmFyIGNvbnRleHQgPSBpbkJyb3dzZXIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHt9O1xuICAgIHRpbWVyRnVuYyA9IGNvbnRleHQuc2V0SW1tZWRpYXRlIHx8IHNldFRpbWVvdXQ7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIChjYiwgY3R4KSB7XG4gICAgdmFyIGZ1bmMgPSBjdHggPyBmdW5jdGlvbiAoKSB7XG4gICAgICBjYi5jYWxsKGN0eCk7XG4gICAgfSA6IGNiO1xuICAgIGNhbGxiYWNrcy5wdXNoKGZ1bmMpO1xuICAgIGlmIChwZW5kaW5nKSByZXR1cm47XG4gICAgcGVuZGluZyA9IHRydWU7XG4gICAgdGltZXJGdW5jKG5leHRUaWNrSGFuZGxlciwgMCk7XG4gIH07XG59KSgpO1xuXG52YXIgX1NldCA9IHVuZGVmaW5lZDtcbi8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuaWYgKHR5cGVvZiBTZXQgIT09ICd1bmRlZmluZWQnICYmIFNldC50b1N0cmluZygpLm1hdGNoKC9uYXRpdmUgY29kZS8pKSB7XG4gIC8vIHVzZSBuYXRpdmUgU2V0IHdoZW4gYXZhaWxhYmxlLlxuICBfU2V0ID0gU2V0O1xufSBlbHNlIHtcbiAgLy8gYSBub24tc3RhbmRhcmQgU2V0IHBvbHlmaWxsIHRoYXQgb25seSB3b3JrcyB3aXRoIHByaW1pdGl2ZSBrZXlzLlxuICBfU2V0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc2V0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfTtcbiAgX1NldC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiB0aGlzLnNldFtrZXldICE9PSB1bmRlZmluZWQ7XG4gIH07XG4gIF9TZXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICB0aGlzLnNldFtrZXldID0gMTtcbiAgfTtcbiAgX1NldC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5zZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBDYWNoZShsaW1pdCkge1xuICB0aGlzLnNpemUgPSAwO1xuICB0aGlzLmxpbWl0ID0gbGltaXQ7XG4gIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fa2V5bWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbn1cblxudmFyIHAgPSBDYWNoZS5wcm90b3R5cGU7XG5cbi8qKlxuICogUHV0IDx2YWx1ZT4gaW50byB0aGUgY2FjaGUgYXNzb2NpYXRlZCB3aXRoIDxrZXk+LlxuICogUmV0dXJucyB0aGUgZW50cnkgd2hpY2ggd2FzIHJlbW92ZWQgdG8gbWFrZSByb29tIGZvclxuICogdGhlIG5ldyBlbnRyeS4gT3RoZXJ3aXNlIHVuZGVmaW5lZCBpcyByZXR1cm5lZC5cbiAqIChpLmUuIGlmIHRoZXJlIHdhcyBlbm91Z2ggcm9vbSBhbHJlYWR5KS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHtFbnRyeXx1bmRlZmluZWR9XG4gKi9cblxucC5wdXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICB2YXIgcmVtb3ZlZDtcblxuICB2YXIgZW50cnkgPSB0aGlzLmdldChrZXksIHRydWUpO1xuICBpZiAoIWVudHJ5KSB7XG4gICAgaWYgKHRoaXMuc2l6ZSA9PT0gdGhpcy5saW1pdCkge1xuICAgICAgcmVtb3ZlZCA9IHRoaXMuc2hpZnQoKTtcbiAgICB9XG4gICAgZW50cnkgPSB7XG4gICAgICBrZXk6IGtleVxuICAgIH07XG4gICAgdGhpcy5fa2V5bWFwW2tleV0gPSBlbnRyeTtcbiAgICBpZiAodGhpcy50YWlsKSB7XG4gICAgICB0aGlzLnRhaWwubmV3ZXIgPSBlbnRyeTtcbiAgICAgIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhlYWQgPSBlbnRyeTtcbiAgICB9XG4gICAgdGhpcy50YWlsID0gZW50cnk7XG4gICAgdGhpcy5zaXplKys7XG4gIH1cbiAgZW50cnkudmFsdWUgPSB2YWx1ZTtcblxuICByZXR1cm4gcmVtb3ZlZDtcbn07XG5cbi8qKlxuICogUHVyZ2UgdGhlIGxlYXN0IHJlY2VudGx5IHVzZWQgKG9sZGVzdCkgZW50cnkgZnJvbSB0aGVcbiAqIGNhY2hlLiBSZXR1cm5zIHRoZSByZW1vdmVkIGVudHJ5IG9yIHVuZGVmaW5lZCBpZiB0aGVcbiAqIGNhY2hlIHdhcyBlbXB0eS5cbiAqL1xuXG5wLnNoaWZ0ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZW50cnkgPSB0aGlzLmhlYWQ7XG4gIGlmIChlbnRyeSkge1xuICAgIHRoaXMuaGVhZCA9IHRoaXMuaGVhZC5uZXdlcjtcbiAgICB0aGlzLmhlYWQub2xkZXIgPSB1bmRlZmluZWQ7XG4gICAgZW50cnkubmV3ZXIgPSBlbnRyeS5vbGRlciA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9rZXltYXBbZW50cnkua2V5XSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnNpemUtLTtcbiAgfVxuICByZXR1cm4gZW50cnk7XG59O1xuXG4vKipcbiAqIEdldCBhbmQgcmVnaXN0ZXIgcmVjZW50IHVzZSBvZiA8a2V5Pi4gUmV0dXJucyB0aGUgdmFsdWVcbiAqIGFzc29jaWF0ZWQgd2l0aCA8a2V5PiBvciB1bmRlZmluZWQgaWYgbm90IGluIGNhY2hlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcmV0dXJuRW50cnlcbiAqIEByZXR1cm4ge0VudHJ5fCp9XG4gKi9cblxucC5nZXQgPSBmdW5jdGlvbiAoa2V5LCByZXR1cm5FbnRyeSkge1xuICB2YXIgZW50cnkgPSB0aGlzLl9rZXltYXBba2V5XTtcbiAgaWYgKGVudHJ5ID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgaWYgKGVudHJ5ID09PSB0aGlzLnRhaWwpIHtcbiAgICByZXR1cm4gcmV0dXJuRW50cnkgPyBlbnRyeSA6IGVudHJ5LnZhbHVlO1xuICB9XG4gIC8vIEhFQUQtLS0tLS0tLS0tLS0tLVRBSUxcbiAgLy8gICA8Lm9sZGVyICAgLm5ld2VyPlxuICAvLyAgPC0tLSBhZGQgZGlyZWN0aW9uIC0tXG4gIC8vICAgQSAgQiAgQyAgPEQ+ICBFXG4gIGlmIChlbnRyeS5uZXdlcikge1xuICAgIGlmIChlbnRyeSA9PT0gdGhpcy5oZWFkKSB7XG4gICAgICB0aGlzLmhlYWQgPSBlbnRyeS5uZXdlcjtcbiAgICB9XG4gICAgZW50cnkubmV3ZXIub2xkZXIgPSBlbnRyeS5vbGRlcjsgLy8gQyA8LS0gRS5cbiAgfVxuICBpZiAoZW50cnkub2xkZXIpIHtcbiAgICBlbnRyeS5vbGRlci5uZXdlciA9IGVudHJ5Lm5ld2VyOyAvLyBDLiAtLT4gRVxuICB9XG4gIGVudHJ5Lm5ld2VyID0gdW5kZWZpbmVkOyAvLyBEIC0teFxuICBlbnRyeS5vbGRlciA9IHRoaXMudGFpbDsgLy8gRC4gLS0+IEVcbiAgaWYgKHRoaXMudGFpbCkge1xuICAgIHRoaXMudGFpbC5uZXdlciA9IGVudHJ5OyAvLyBFLiA8LS0gRFxuICB9XG4gIHRoaXMudGFpbCA9IGVudHJ5O1xuICByZXR1cm4gcmV0dXJuRW50cnkgPyBlbnRyeSA6IGVudHJ5LnZhbHVlO1xufTtcblxudmFyIGNhY2hlJDEgPSBuZXcgQ2FjaGUoMTAwMCk7XG52YXIgZmlsdGVyVG9rZW5SRSA9IC9bXlxccydcIl0rfCdbXiddKid8XCJbXlwiXSpcIi9nO1xudmFyIHJlc2VydmVkQXJnUkUgPSAvXmluJHxeLT9cXGQrLztcblxuLyoqXG4gKiBQYXJzZXIgc3RhdGVcbiAqL1xuXG52YXIgc3RyO1xudmFyIGRpcjtcbnZhciBjO1xudmFyIHByZXY7XG52YXIgaTtcbnZhciBsO1xudmFyIGxhc3RGaWx0ZXJJbmRleDtcbnZhciBpblNpbmdsZTtcbnZhciBpbkRvdWJsZTtcbnZhciBjdXJseTtcbnZhciBzcXVhcmU7XG52YXIgcGFyZW47XG4vKipcbiAqIFB1c2ggYSBmaWx0ZXIgdG8gdGhlIGN1cnJlbnQgZGlyZWN0aXZlIG9iamVjdFxuICovXG5cbmZ1bmN0aW9uIHB1c2hGaWx0ZXIoKSB7XG4gIHZhciBleHAgPSBzdHIuc2xpY2UobGFzdEZpbHRlckluZGV4LCBpKS50cmltKCk7XG4gIHZhciBmaWx0ZXI7XG4gIGlmIChleHApIHtcbiAgICBmaWx0ZXIgPSB7fTtcbiAgICB2YXIgdG9rZW5zID0gZXhwLm1hdGNoKGZpbHRlclRva2VuUkUpO1xuICAgIGZpbHRlci5uYW1lID0gdG9rZW5zWzBdO1xuICAgIGlmICh0b2tlbnMubGVuZ3RoID4gMSkge1xuICAgICAgZmlsdGVyLmFyZ3MgPSB0b2tlbnMuc2xpY2UoMSkubWFwKHByb2Nlc3NGaWx0ZXJBcmcpO1xuICAgIH1cbiAgfVxuICBpZiAoZmlsdGVyKSB7XG4gICAgKGRpci5maWx0ZXJzID0gZGlyLmZpbHRlcnMgfHwgW10pLnB1c2goZmlsdGVyKTtcbiAgfVxuICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBhcmd1bWVudCBpcyBkeW5hbWljIGFuZCBzdHJpcCBxdW90ZXMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGFyZ1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIHByb2Nlc3NGaWx0ZXJBcmcoYXJnKSB7XG4gIGlmIChyZXNlcnZlZEFyZ1JFLnRlc3QoYXJnKSkge1xuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZTogdG9OdW1iZXIoYXJnKSxcbiAgICAgIGR5bmFtaWM6IGZhbHNlXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgc3RyaXBwZWQgPSBzdHJpcFF1b3RlcyhhcmcpO1xuICAgIHZhciBkeW5hbWljID0gc3RyaXBwZWQgPT09IGFyZztcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWU6IGR5bmFtaWMgPyBhcmcgOiBzdHJpcHBlZCxcbiAgICAgIGR5bmFtaWM6IGR5bmFtaWNcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogUGFyc2UgYSBkaXJlY3RpdmUgdmFsdWUgYW5kIGV4dHJhY3QgdGhlIGV4cHJlc3Npb25cbiAqIGFuZCBpdHMgZmlsdGVycyBpbnRvIGEgZGVzY3JpcHRvci5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIFwiYSArIDEgfCB1cHBlcmNhc2VcIiB3aWxsIHlpZWxkOlxuICoge1xuICogICBleHByZXNzaW9uOiAnYSArIDEnLFxuICogICBmaWx0ZXJzOiBbXG4gKiAgICAgeyBuYW1lOiAndXBwZXJjYXNlJywgYXJnczogbnVsbCB9XG4gKiAgIF1cbiAqIH1cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlRGlyZWN0aXZlKHMpIHtcbiAgdmFyIGhpdCA9IGNhY2hlJDEuZ2V0KHMpO1xuICBpZiAoaGl0KSB7XG4gICAgcmV0dXJuIGhpdDtcbiAgfVxuXG4gIC8vIHJlc2V0IHBhcnNlciBzdGF0ZVxuICBzdHIgPSBzO1xuICBpblNpbmdsZSA9IGluRG91YmxlID0gZmFsc2U7XG4gIGN1cmx5ID0gc3F1YXJlID0gcGFyZW4gPSAwO1xuICBsYXN0RmlsdGVySW5kZXggPSAwO1xuICBkaXIgPSB7fTtcblxuICBmb3IgKGkgPSAwLCBsID0gc3RyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHByZXYgPSBjO1xuICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICBpZiAoaW5TaW5nbGUpIHtcbiAgICAgIC8vIGNoZWNrIHNpbmdsZSBxdW90ZVxuICAgICAgaWYgKGMgPT09IDB4MjcgJiYgcHJldiAhPT0gMHg1QykgaW5TaW5nbGUgPSAhaW5TaW5nbGU7XG4gICAgfSBlbHNlIGlmIChpbkRvdWJsZSkge1xuICAgICAgLy8gY2hlY2sgZG91YmxlIHF1b3RlXG4gICAgICBpZiAoYyA9PT0gMHgyMiAmJiBwcmV2ICE9PSAweDVDKSBpbkRvdWJsZSA9ICFpbkRvdWJsZTtcbiAgICB9IGVsc2UgaWYgKGMgPT09IDB4N0MgJiYgLy8gcGlwZVxuICAgIHN0ci5jaGFyQ29kZUF0KGkgKyAxKSAhPT0gMHg3QyAmJiBzdHIuY2hhckNvZGVBdChpIC0gMSkgIT09IDB4N0MpIHtcbiAgICAgIGlmIChkaXIuZXhwcmVzc2lvbiA9PSBudWxsKSB7XG4gICAgICAgIC8vIGZpcnN0IGZpbHRlciwgZW5kIG9mIGV4cHJlc3Npb25cbiAgICAgICAgbGFzdEZpbHRlckluZGV4ID0gaSArIDE7XG4gICAgICAgIGRpci5leHByZXNzaW9uID0gc3RyLnNsaWNlKDAsIGkpLnRyaW0oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGFscmVhZHkgaGFzIGZpbHRlclxuICAgICAgICBwdXNoRmlsdGVyKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN3aXRjaCAoYykge1xuICAgICAgICBjYXNlIDB4MjI6XG4gICAgICAgICAgaW5Eb3VibGUgPSB0cnVlO2JyZWFrOyAvLyBcIlxuICAgICAgICBjYXNlIDB4Mjc6XG4gICAgICAgICAgaW5TaW5nbGUgPSB0cnVlO2JyZWFrOyAvLyAnXG4gICAgICAgIGNhc2UgMHgyODpcbiAgICAgICAgICBwYXJlbisrO2JyZWFrOyAvLyAoXG4gICAgICAgIGNhc2UgMHgyOTpcbiAgICAgICAgICBwYXJlbi0tO2JyZWFrOyAvLyApXG4gICAgICAgIGNhc2UgMHg1QjpcbiAgICAgICAgICBzcXVhcmUrKzticmVhazsgLy8gW1xuICAgICAgICBjYXNlIDB4NUQ6XG4gICAgICAgICAgc3F1YXJlLS07YnJlYWs7IC8vIF1cbiAgICAgICAgY2FzZSAweDdCOlxuICAgICAgICAgIGN1cmx5Kys7YnJlYWs7IC8vIHtcbiAgICAgICAgY2FzZSAweDdEOlxuICAgICAgICAgIGN1cmx5LS07YnJlYWs7IC8vIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoZGlyLmV4cHJlc3Npb24gPT0gbnVsbCkge1xuICAgIGRpci5leHByZXNzaW9uID0gc3RyLnNsaWNlKDAsIGkpLnRyaW0oKTtcbiAgfSBlbHNlIGlmIChsYXN0RmlsdGVySW5kZXggIT09IDApIHtcbiAgICBwdXNoRmlsdGVyKCk7XG4gIH1cblxuICBjYWNoZSQxLnB1dChzLCBkaXIpO1xuICByZXR1cm4gZGlyO1xufVxuXG52YXIgZGlyZWN0aXZlID0gT2JqZWN0LmZyZWV6ZSh7XG4gIHBhcnNlRGlyZWN0aXZlOiBwYXJzZURpcmVjdGl2ZVxufSk7XG5cbnZhciByZWdleEVzY2FwZVJFID0gL1stLiorP14ke30oKXxbXFxdXFwvXFxcXF0vZztcbnZhciBjYWNoZSA9IHVuZGVmaW5lZDtcbnZhciB0YWdSRSA9IHVuZGVmaW5lZDtcbnZhciBodG1sUkUgPSB1bmRlZmluZWQ7XG4vKipcbiAqIEVzY2FwZSBhIHN0cmluZyBzbyBpdCBjYW4gYmUgdXNlZCBpbiBhIFJlZ0V4cFxuICogY29uc3RydWN0b3IuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICovXG5cbmZ1bmN0aW9uIGVzY2FwZVJlZ2V4KHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UocmVnZXhFc2NhcGVSRSwgJ1xcXFwkJicpO1xufVxuXG5mdW5jdGlvbiBjb21waWxlUmVnZXgoKSB7XG4gIHZhciBvcGVuID0gZXNjYXBlUmVnZXgoY29uZmlnLmRlbGltaXRlcnNbMF0pO1xuICB2YXIgY2xvc2UgPSBlc2NhcGVSZWdleChjb25maWcuZGVsaW1pdGVyc1sxXSk7XG4gIHZhciB1bnNhZmVPcGVuID0gZXNjYXBlUmVnZXgoY29uZmlnLnVuc2FmZURlbGltaXRlcnNbMF0pO1xuICB2YXIgdW5zYWZlQ2xvc2UgPSBlc2NhcGVSZWdleChjb25maWcudW5zYWZlRGVsaW1pdGVyc1sxXSk7XG4gIHRhZ1JFID0gbmV3IFJlZ0V4cCh1bnNhZmVPcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyB1bnNhZmVDbG9zZSArICd8JyArIG9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIGNsb3NlLCAnZycpO1xuICBodG1sUkUgPSBuZXcgUmVnRXhwKCdeJyArIHVuc2FmZU9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIHVuc2FmZUNsb3NlICsgJyQnKTtcbiAgLy8gcmVzZXQgY2FjaGVcbiAgY2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG59XG5cbi8qKlxuICogUGFyc2UgYSB0ZW1wbGF0ZSB0ZXh0IHN0cmluZyBpbnRvIGFuIGFycmF5IG9mIHRva2Vucy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuICogQHJldHVybiB7QXJyYXk8T2JqZWN0PiB8IG51bGx9XG4gKiAgICAgICAgICAgICAgIC0ge1N0cmluZ30gdHlwZVxuICogICAgICAgICAgICAgICAtIHtTdHJpbmd9IHZhbHVlXG4gKiAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtodG1sXVxuICogICAgICAgICAgICAgICAtIHtCb29sZWFufSBbb25lVGltZV1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZVRleHQodGV4dCkge1xuICBpZiAoIWNhY2hlKSB7XG4gICAgY29tcGlsZVJlZ2V4KCk7XG4gIH1cbiAgdmFyIGhpdCA9IGNhY2hlLmdldCh0ZXh0KTtcbiAgaWYgKGhpdCkge1xuICAgIHJldHVybiBoaXQ7XG4gIH1cbiAgaWYgKCF0YWdSRS50ZXN0KHRleHQpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgdmFyIHRva2VucyA9IFtdO1xuICB2YXIgbGFzdEluZGV4ID0gdGFnUkUubGFzdEluZGV4ID0gMDtcbiAgdmFyIG1hdGNoLCBpbmRleCwgaHRtbCwgdmFsdWUsIGZpcnN0LCBvbmVUaW1lO1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICB3aGlsZSAobWF0Y2ggPSB0YWdSRS5leGVjKHRleHQpKSB7XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIGluZGV4ID0gbWF0Y2guaW5kZXg7XG4gICAgLy8gcHVzaCB0ZXh0IHRva2VuXG4gICAgaWYgKGluZGV4ID4gbGFzdEluZGV4KSB7XG4gICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgIHZhbHVlOiB0ZXh0LnNsaWNlKGxhc3RJbmRleCwgaW5kZXgpXG4gICAgICB9KTtcbiAgICB9XG4gICAgLy8gdGFnIHRva2VuXG4gICAgaHRtbCA9IGh0bWxSRS50ZXN0KG1hdGNoWzBdKTtcbiAgICB2YWx1ZSA9IGh0bWwgPyBtYXRjaFsxXSA6IG1hdGNoWzJdO1xuICAgIGZpcnN0ID0gdmFsdWUuY2hhckNvZGVBdCgwKTtcbiAgICBvbmVUaW1lID0gZmlyc3QgPT09IDQyOyAvLyAqXG4gICAgdmFsdWUgPSBvbmVUaW1lID8gdmFsdWUuc2xpY2UoMSkgOiB2YWx1ZTtcbiAgICB0b2tlbnMucHVzaCh7XG4gICAgICB0YWc6IHRydWUsXG4gICAgICB2YWx1ZTogdmFsdWUudHJpbSgpLFxuICAgICAgaHRtbDogaHRtbCxcbiAgICAgIG9uZVRpbWU6IG9uZVRpbWVcbiAgICB9KTtcbiAgICBsYXN0SW5kZXggPSBpbmRleCArIG1hdGNoWzBdLmxlbmd0aDtcbiAgfVxuICBpZiAobGFzdEluZGV4IDwgdGV4dC5sZW5ndGgpIHtcbiAgICB0b2tlbnMucHVzaCh7XG4gICAgICB2YWx1ZTogdGV4dC5zbGljZShsYXN0SW5kZXgpXG4gICAgfSk7XG4gIH1cbiAgY2FjaGUucHV0KHRleHQsIHRva2Vucyk7XG4gIHJldHVybiB0b2tlbnM7XG59XG5cbi8qKlxuICogRm9ybWF0IGEgbGlzdCBvZiB0b2tlbnMgaW50byBhbiBleHByZXNzaW9uLlxuICogZS5nLiB0b2tlbnMgcGFyc2VkIGZyb20gJ2Ege3tifX0gYycgY2FuIGJlIHNlcmlhbGl6ZWRcbiAqIGludG8gb25lIHNpbmdsZSBleHByZXNzaW9uIGFzICdcImEgXCIgKyBiICsgXCIgY1wiJy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSB0b2tlbnNcbiAqIEBwYXJhbSB7VnVlfSBbdm1dXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gdG9rZW5zVG9FeHAodG9rZW5zLCB2bSkge1xuICBpZiAodG9rZW5zLmxlbmd0aCA+IDEpIHtcbiAgICByZXR1cm4gdG9rZW5zLm1hcChmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgIHJldHVybiBmb3JtYXRUb2tlbih0b2tlbiwgdm0pO1xuICAgIH0pLmpvaW4oJysnKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZm9ybWF0VG9rZW4odG9rZW5zWzBdLCB2bSwgdHJ1ZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBzaW5nbGUgdG9rZW4uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRva2VuXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuICogQHBhcmFtIHtCb29sZWFufSBbc2luZ2xlXVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGZvcm1hdFRva2VuKHRva2VuLCB2bSwgc2luZ2xlKSB7XG4gIHJldHVybiB0b2tlbi50YWcgPyB0b2tlbi5vbmVUaW1lICYmIHZtID8gJ1wiJyArIHZtLiRldmFsKHRva2VuLnZhbHVlKSArICdcIicgOiBpbmxpbmVGaWx0ZXJzKHRva2VuLnZhbHVlLCBzaW5nbGUpIDogJ1wiJyArIHRva2VuLnZhbHVlICsgJ1wiJztcbn1cblxuLyoqXG4gKiBGb3IgYW4gYXR0cmlidXRlIHdpdGggbXVsdGlwbGUgaW50ZXJwb2xhdGlvbiB0YWdzLFxuICogZS5nLiBhdHRyPVwic29tZS17e3RoaW5nIHwgZmlsdGVyfX1cIiwgaW4gb3JkZXIgdG8gY29tYmluZVxuICogdGhlIHdob2xlIHRoaW5nIGludG8gYSBzaW5nbGUgd2F0Y2hhYmxlIGV4cHJlc3Npb24sIHdlXG4gKiBoYXZlIHRvIGlubGluZSB0aG9zZSBmaWx0ZXJzLiBUaGlzIGZ1bmN0aW9uIGRvZXMgZXhhY3RseVxuICogdGhhdC4gVGhpcyBpcyBhIGJpdCBoYWNreSBidXQgaXQgYXZvaWRzIGhlYXZ5IGNoYW5nZXNcbiAqIHRvIGRpcmVjdGl2ZSBwYXJzZXIgYW5kIHdhdGNoZXIgbWVjaGFuaXNtLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gc2luZ2xlXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxudmFyIGZpbHRlclJFID0gL1tefF1cXHxbXnxdLztcbmZ1bmN0aW9uIGlubGluZUZpbHRlcnMoZXhwLCBzaW5nbGUpIHtcbiAgaWYgKCFmaWx0ZXJSRS50ZXN0KGV4cCkpIHtcbiAgICByZXR1cm4gc2luZ2xlID8gZXhwIDogJygnICsgZXhwICsgJyknO1xuICB9IGVsc2Uge1xuICAgIHZhciBkaXIgPSBwYXJzZURpcmVjdGl2ZShleHApO1xuICAgIGlmICghZGlyLmZpbHRlcnMpIHtcbiAgICAgIHJldHVybiAnKCcgKyBleHAgKyAnKSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAndGhpcy5fYXBwbHlGaWx0ZXJzKCcgKyBkaXIuZXhwcmVzc2lvbiArIC8vIHZhbHVlXG4gICAgICAnLG51bGwsJyArIC8vIG9sZFZhbHVlIChudWxsIGZvciByZWFkKVxuICAgICAgSlNPTi5zdHJpbmdpZnkoZGlyLmZpbHRlcnMpICsgLy8gZmlsdGVyIGRlc2NyaXB0b3JzXG4gICAgICAnLGZhbHNlKSc7IC8vIHdyaXRlP1xuICAgIH1cbiAgfVxufVxuXG52YXIgdGV4dCA9IE9iamVjdC5mcmVlemUoe1xuICBjb21waWxlUmVnZXg6IGNvbXBpbGVSZWdleCxcbiAgcGFyc2VUZXh0OiBwYXJzZVRleHQsXG4gIHRva2Vuc1RvRXhwOiB0b2tlbnNUb0V4cFxufSk7XG5cbnZhciBkZWxpbWl0ZXJzID0gWyd7eycsICd9fSddO1xudmFyIHVuc2FmZURlbGltaXRlcnMgPSBbJ3t7eycsICd9fX0nXTtcblxudmFyIGNvbmZpZyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHtcblxuICAvKipcbiAgICogV2hldGhlciB0byBwcmludCBkZWJ1ZyBtZXNzYWdlcy5cbiAgICogQWxzbyBlbmFibGVzIHN0YWNrIHRyYWNlIGZvciB3YXJuaW5ncy5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuXG4gIGRlYnVnOiBmYWxzZSxcblxuICAvKipcbiAgICogV2hldGhlciB0byBzdXBwcmVzcyB3YXJuaW5ncy5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuXG4gIHNpbGVudDogZmFsc2UsXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gdXNlIGFzeW5jIHJlbmRlcmluZy5cbiAgICovXG5cbiAgYXN5bmM6IHRydWUsXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gd2FybiBhZ2FpbnN0IGVycm9ycyBjYXVnaHQgd2hlbiBldmFsdWF0aW5nXG4gICAqIGV4cHJlc3Npb25zLlxuICAgKi9cblxuICB3YXJuRXhwcmVzc2lvbkVycm9yczogdHJ1ZSxcblxuICAvKipcbiAgICogV2hldGhlciB0byBhbGxvdyBkZXZ0b29scyBpbnNwZWN0aW9uLlxuICAgKiBEaXNhYmxlZCBieSBkZWZhdWx0IGluIHByb2R1Y3Rpb24gYnVpbGRzLlxuICAgKi9cblxuICBkZXZ0b29sczogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyxcblxuICAvKipcbiAgICogSW50ZXJuYWwgZmxhZyB0byBpbmRpY2F0ZSB0aGUgZGVsaW1pdGVycyBoYXZlIGJlZW5cbiAgICogY2hhbmdlZC5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuXG4gIF9kZWxpbWl0ZXJzQ2hhbmdlZDogdHJ1ZSxcblxuICAvKipcbiAgICogTGlzdCBvZiBhc3NldCB0eXBlcyB0aGF0IGEgY29tcG9uZW50IGNhbiBvd24uXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheX1cbiAgICovXG5cbiAgX2Fzc2V0VHlwZXM6IFsnY29tcG9uZW50JywgJ2RpcmVjdGl2ZScsICdlbGVtZW50RGlyZWN0aXZlJywgJ2ZpbHRlcicsICd0cmFuc2l0aW9uJywgJ3BhcnRpYWwnXSxcblxuICAvKipcbiAgICogcHJvcCBiaW5kaW5nIG1vZGVzXG4gICAqL1xuXG4gIF9wcm9wQmluZGluZ01vZGVzOiB7XG4gICAgT05FX1dBWTogMCxcbiAgICBUV09fV0FZOiAxLFxuICAgIE9ORV9USU1FOiAyXG4gIH0sXG5cbiAgLyoqXG4gICAqIE1heCBjaXJjdWxhciB1cGRhdGVzIGFsbG93ZWQgaW4gYSBiYXRjaGVyIGZsdXNoIGN5Y2xlLlxuICAgKi9cblxuICBfbWF4VXBkYXRlQ291bnQ6IDEwMFxuXG59LCB7XG4gIGRlbGltaXRlcnM6IHsgLyoqXG4gICAgICAgICAgICAgICAgICogSW50ZXJwb2xhdGlvbiBkZWxpbWl0ZXJzLiBDaGFuZ2luZyB0aGVzZSB3b3VsZCB0cmlnZ2VyXG4gICAgICAgICAgICAgICAgICogdGhlIHRleHQgcGFyc2VyIHRvIHJlLWNvbXBpbGUgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbnMuXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAdHlwZSB7QXJyYXk8U3RyaW5nPn1cbiAgICAgICAgICAgICAgICAgKi9cblxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGRlbGltaXRlcnM7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcbiAgICAgIGRlbGltaXRlcnMgPSB2YWw7XG4gICAgICBjb21waWxlUmVnZXgoKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0sXG4gIHVuc2FmZURlbGltaXRlcnM6IHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB1bnNhZmVEZWxpbWl0ZXJzO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7XG4gICAgICB1bnNhZmVEZWxpbWl0ZXJzID0gdmFsO1xuICAgICAgY29tcGlsZVJlZ2V4KCk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9XG59KTtcblxudmFyIHdhcm4gPSB1bmRlZmluZWQ7XG52YXIgZm9ybWF0Q29tcG9uZW50TmFtZSA9IHVuZGVmaW5lZDtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaGFzQ29uc29sZSA9IHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJztcblxuICAgIHdhcm4gPSBmdW5jdGlvbiAobXNnLCB2bSkge1xuICAgICAgaWYgKGhhc0NvbnNvbGUgJiYgIWNvbmZpZy5zaWxlbnQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW1Z1ZSB3YXJuXTogJyArIG1zZyArICh2bSA/IGZvcm1hdENvbXBvbmVudE5hbWUodm0pIDogJycpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZm9ybWF0Q29tcG9uZW50TmFtZSA9IGZ1bmN0aW9uICh2bSkge1xuICAgICAgdmFyIG5hbWUgPSB2bS5faXNWdWUgPyB2bS4kb3B0aW9ucy5uYW1lIDogdm0ubmFtZTtcbiAgICAgIHJldHVybiBuYW1lID8gJyAoZm91bmQgaW4gY29tcG9uZW50OiA8JyArIGh5cGhlbmF0ZShuYW1lKSArICc+KScgOiAnJztcbiAgICB9O1xuICB9KSgpO1xufVxuXG4vKipcbiAqIEFwcGVuZCB3aXRoIHRyYW5zaXRpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbmZ1bmN0aW9uIGFwcGVuZFdpdGhUcmFuc2l0aW9uKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuICBhcHBseVRyYW5zaXRpb24oZWwsIDEsIGZ1bmN0aW9uICgpIHtcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuICB9LCB2bSwgY2IpO1xufVxuXG4vKipcbiAqIEluc2VydEJlZm9yZSB3aXRoIHRyYW5zaXRpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbmZ1bmN0aW9uIGJlZm9yZVdpdGhUcmFuc2l0aW9uKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuICBhcHBseVRyYW5zaXRpb24oZWwsIDEsIGZ1bmN0aW9uICgpIHtcbiAgICBiZWZvcmUoZWwsIHRhcmdldCk7XG4gIH0sIHZtLCBjYik7XG59XG5cbi8qKlxuICogUmVtb3ZlIHdpdGggdHJhbnNpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVXaXRoVHJhbnNpdGlvbihlbCwgdm0sIGNiKSB7XG4gIGFwcGx5VHJhbnNpdGlvbihlbCwgLTEsIGZ1bmN0aW9uICgpIHtcbiAgICByZW1vdmUoZWwpO1xuICB9LCB2bSwgY2IpO1xufVxuXG4vKipcbiAqIEFwcGx5IHRyYW5zaXRpb25zIHdpdGggYW4gb3BlcmF0aW9uIGNhbGxiYWNrLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7TnVtYmVyfSBkaXJlY3Rpb25cbiAqICAgICAgICAgICAgICAgICAgMTogZW50ZXJcbiAqICAgICAgICAgICAgICAgICAtMTogbGVhdmVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gdGhlIGFjdHVhbCBET00gb3BlcmF0aW9uXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5mdW5jdGlvbiBhcHBseVRyYW5zaXRpb24oZWwsIGRpcmVjdGlvbiwgb3AsIHZtLCBjYikge1xuICB2YXIgdHJhbnNpdGlvbiA9IGVsLl9fdl90cmFucztcbiAgaWYgKCF0cmFuc2l0aW9uIHx8XG4gIC8vIHNraXAgaWYgdGhlcmUgYXJlIG5vIGpzIGhvb2tzIGFuZCBDU1MgdHJhbnNpdGlvbiBpc1xuICAvLyBub3Qgc3VwcG9ydGVkXG4gICF0cmFuc2l0aW9uLmhvb2tzICYmICF0cmFuc2l0aW9uRW5kRXZlbnQgfHxcbiAgLy8gc2tpcCB0cmFuc2l0aW9ucyBmb3IgaW5pdGlhbCBjb21waWxlXG4gICF2bS5faXNDb21waWxlZCB8fFxuICAvLyBpZiB0aGUgdm0gaXMgYmVpbmcgbWFuaXB1bGF0ZWQgYnkgYSBwYXJlbnQgZGlyZWN0aXZlXG4gIC8vIGR1cmluZyB0aGUgcGFyZW50J3MgY29tcGlsYXRpb24gcGhhc2UsIHNraXAgdGhlXG4gIC8vIGFuaW1hdGlvbi5cbiAgdm0uJHBhcmVudCAmJiAhdm0uJHBhcmVudC5faXNDb21waWxlZCkge1xuICAgIG9wKCk7XG4gICAgaWYgKGNiKSBjYigpO1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgYWN0aW9uID0gZGlyZWN0aW9uID4gMCA/ICdlbnRlcicgOiAnbGVhdmUnO1xuICB0cmFuc2l0aW9uW2FjdGlvbl0ob3AsIGNiKTtcbn1cblxudmFyIHRyYW5zaXRpb24gPSBPYmplY3QuZnJlZXplKHtcbiAgYXBwZW5kV2l0aFRyYW5zaXRpb246IGFwcGVuZFdpdGhUcmFuc2l0aW9uLFxuICBiZWZvcmVXaXRoVHJhbnNpdGlvbjogYmVmb3JlV2l0aFRyYW5zaXRpb24sXG4gIHJlbW92ZVdpdGhUcmFuc2l0aW9uOiByZW1vdmVXaXRoVHJhbnNpdGlvbixcbiAgYXBwbHlUcmFuc2l0aW9uOiBhcHBseVRyYW5zaXRpb25cbn0pO1xuXG4vKipcbiAqIFF1ZXJ5IGFuIGVsZW1lbnQgc2VsZWN0b3IgaWYgaXQncyBub3QgYW4gZWxlbWVudCBhbHJlYWR5LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHtFbGVtZW50fVxuICovXG5cbmZ1bmN0aW9uIHF1ZXJ5KGVsKSB7XG4gIGlmICh0eXBlb2YgZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIHNlbGVjdG9yID0gZWw7XG4gICAgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsKTtcbiAgICBpZiAoIWVsKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0Nhbm5vdCBmaW5kIGVsZW1lbnQ6ICcgKyBzZWxlY3Rvcik7XG4gICAgfVxuICB9XG4gIHJldHVybiBlbDtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIG5vZGUgaXMgaW4gdGhlIGRvY3VtZW50LlxuICogTm90ZTogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zIHNob3VsZCB3b3JrIGhlcmVcbiAqIGJ1dCBhbHdheXMgcmV0dXJucyBmYWxzZSBmb3IgY29tbWVudCBub2RlcyBpbiBwaGFudG9tanMsXG4gKiBtYWtpbmcgdW5pdCB0ZXN0cyBkaWZmaWN1bHQuIFRoaXMgaXMgZml4ZWQgYnkgZG9pbmcgdGhlXG4gKiBjb250YWlucygpIGNoZWNrIG9uIHRoZSBub2RlJ3MgcGFyZW50Tm9kZSBpbnN0ZWFkIG9mXG4gKiB0aGUgbm9kZSBpdHNlbGYuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGluRG9jKG5vZGUpIHtcbiAgaWYgKCFub2RlKSByZXR1cm4gZmFsc2U7XG4gIHZhciBkb2MgPSBub2RlLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICB2YXIgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuICByZXR1cm4gZG9jID09PSBub2RlIHx8IGRvYyA9PT0gcGFyZW50IHx8ICEhKHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgPT09IDEgJiYgZG9jLmNvbnRhaW5zKHBhcmVudCkpO1xufVxuXG4vKipcbiAqIEdldCBhbmQgcmVtb3ZlIGFuIGF0dHJpYnV0ZSBmcm9tIGEgbm9kZS5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBfYXR0clxuICovXG5cbmZ1bmN0aW9uIGdldEF0dHIobm9kZSwgX2F0dHIpIHtcbiAgdmFyIHZhbCA9IG5vZGUuZ2V0QXR0cmlidXRlKF9hdHRyKTtcbiAgaWYgKHZhbCAhPT0gbnVsbCkge1xuICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKF9hdHRyKTtcbiAgfVxuICByZXR1cm4gdmFsO1xufVxuXG4vKipcbiAqIEdldCBhbiBhdHRyaWJ1dGUgd2l0aCBjb2xvbiBvciB2LWJpbmQ6IHByZWZpeC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHtTdHJpbmd8bnVsbH1cbiAqL1xuXG5mdW5jdGlvbiBnZXRCaW5kQXR0cihub2RlLCBuYW1lKSB7XG4gIHZhciB2YWwgPSBnZXRBdHRyKG5vZGUsICc6JyArIG5hbWUpO1xuICBpZiAodmFsID09PSBudWxsKSB7XG4gICAgdmFsID0gZ2V0QXR0cihub2RlLCAndi1iaW5kOicgKyBuYW1lKTtcbiAgfVxuICByZXR1cm4gdmFsO1xufVxuXG4vKipcbiAqIENoZWNrIHRoZSBwcmVzZW5jZSBvZiBhIGJpbmQgYXR0cmlidXRlLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaGFzQmluZEF0dHIobm9kZSwgbmFtZSkge1xuICByZXR1cm4gbm9kZS5oYXNBdHRyaWJ1dGUobmFtZSkgfHwgbm9kZS5oYXNBdHRyaWJ1dGUoJzonICsgbmFtZSkgfHwgbm9kZS5oYXNBdHRyaWJ1dGUoJ3YtYmluZDonICsgbmFtZSk7XG59XG5cbi8qKlxuICogSW5zZXJ0IGVsIGJlZm9yZSB0YXJnZXRcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICovXG5cbmZ1bmN0aW9uIGJlZm9yZShlbCwgdGFyZ2V0KSB7XG4gIHRhcmdldC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlbCwgdGFyZ2V0KTtcbn1cblxuLyoqXG4gKiBJbnNlcnQgZWwgYWZ0ZXIgdGFyZ2V0XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqL1xuXG5mdW5jdGlvbiBhZnRlcihlbCwgdGFyZ2V0KSB7XG4gIGlmICh0YXJnZXQubmV4dFNpYmxpbmcpIHtcbiAgICBiZWZvcmUoZWwsIHRhcmdldC5uZXh0U2libGluZyk7XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZWwpO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIGVsIGZyb20gRE9NXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICovXG5cbmZ1bmN0aW9uIHJlbW92ZShlbCkge1xuICBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTtcbn1cblxuLyoqXG4gKiBQcmVwZW5kIGVsIHRvIHRhcmdldFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKi9cblxuZnVuY3Rpb24gcHJlcGVuZChlbCwgdGFyZ2V0KSB7XG4gIGlmICh0YXJnZXQuZmlyc3RDaGlsZCkge1xuICAgIGJlZm9yZShlbCwgdGFyZ2V0LmZpcnN0Q2hpbGQpO1xuICB9IGVsc2Uge1xuICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXBsYWNlIHRhcmdldCB3aXRoIGVsXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqL1xuXG5mdW5jdGlvbiByZXBsYWNlKHRhcmdldCwgZWwpIHtcbiAgdmFyIHBhcmVudCA9IHRhcmdldC5wYXJlbnROb2RlO1xuICBpZiAocGFyZW50KSB7XG4gICAgcGFyZW50LnJlcGxhY2VDaGlsZChlbCwgdGFyZ2V0KTtcbiAgfVxufVxuXG4vKipcbiAqIEFkZCBldmVudCBsaXN0ZW5lciBzaG9ydGhhbmQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtIHtCb29sZWFufSBbdXNlQ2FwdHVyZV1cbiAqL1xuXG5mdW5jdGlvbiBvbihlbCwgZXZlbnQsIGNiLCB1c2VDYXB0dXJlKSB7XG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNiLCB1c2VDYXB0dXJlKTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgZXZlbnQgbGlzdGVuZXIgc2hvcnRoYW5kLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuXG5mdW5jdGlvbiBvZmYoZWwsIGV2ZW50LCBjYikge1xuICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBjYik7XG59XG5cbi8qKlxuICogRm9yIElFOSBjb21wYXQ6IHdoZW4gYm90aCBjbGFzcyBhbmQgOmNsYXNzIGFyZSBwcmVzZW50XG4gKiBnZXRBdHRyaWJ1dGUoJ2NsYXNzJykgcmV0dXJucyB3cm9uZyB2YWx1ZS4uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBnZXRDbGFzcyhlbCkge1xuICB2YXIgY2xhc3NuYW1lID0gZWwuY2xhc3NOYW1lO1xuICBpZiAodHlwZW9mIGNsYXNzbmFtZSA9PT0gJ29iamVjdCcpIHtcbiAgICBjbGFzc25hbWUgPSBjbGFzc25hbWUuYmFzZVZhbCB8fCAnJztcbiAgfVxuICByZXR1cm4gY2xhc3NuYW1lO1xufVxuXG4vKipcbiAqIEluIElFOSwgc2V0QXR0cmlidXRlKCdjbGFzcycpIHdpbGwgcmVzdWx0IGluIGVtcHR5IGNsYXNzXG4gKiBpZiB0aGUgZWxlbWVudCBhbHNvIGhhcyB0aGUgOmNsYXNzIGF0dHJpYnV0ZTsgSG93ZXZlciBpblxuICogUGhhbnRvbUpTLCBzZXR0aW5nIGBjbGFzc05hbWVgIGRvZXMgbm90IHdvcmsgb24gU1ZHIGVsZW1lbnRzLi4uXG4gKiBTbyB3ZSBoYXZlIHRvIGRvIGEgY29uZGl0aW9uYWwgY2hlY2sgaGVyZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gY2xzXG4gKi9cblxuZnVuY3Rpb24gc2V0Q2xhc3MoZWwsIGNscykge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGlzSUU5ICYmICEvc3ZnJC8udGVzdChlbC5uYW1lc3BhY2VVUkkpKSB7XG4gICAgZWwuY2xhc3NOYW1lID0gY2xzO1xuICB9IGVsc2Uge1xuICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbHMpO1xuICB9XG59XG5cbi8qKlxuICogQWRkIGNsYXNzIHdpdGggY29tcGF0aWJpbGl0eSBmb3IgSUUgJiBTVkdcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gY2xzXG4gKi9cblxuZnVuY3Rpb24gYWRkQ2xhc3MoZWwsIGNscykge1xuICBpZiAoZWwuY2xhc3NMaXN0KSB7XG4gICAgZWwuY2xhc3NMaXN0LmFkZChjbHMpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjdXIgPSAnICcgKyBnZXRDbGFzcyhlbCkgKyAnICc7XG4gICAgaWYgKGN1ci5pbmRleE9mKCcgJyArIGNscyArICcgJykgPCAwKSB7XG4gICAgICBzZXRDbGFzcyhlbCwgKGN1ciArIGNscykudHJpbSgpKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBJRSAmIFNWR1xuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVDbGFzcyhlbCwgY2xzKSB7XG4gIGlmIChlbC5jbGFzc0xpc3QpIHtcbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNscyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGN1ciA9ICcgJyArIGdldENsYXNzKGVsKSArICcgJztcbiAgICB2YXIgdGFyID0gJyAnICsgY2xzICsgJyAnO1xuICAgIHdoaWxlIChjdXIuaW5kZXhPZih0YXIpID49IDApIHtcbiAgICAgIGN1ciA9IGN1ci5yZXBsYWNlKHRhciwgJyAnKTtcbiAgICB9XG4gICAgc2V0Q2xhc3MoZWwsIGN1ci50cmltKCkpO1xuICB9XG4gIGlmICghZWwuY2xhc3NOYW1lKSB7XG4gICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpO1xuICB9XG59XG5cbi8qKlxuICogRXh0cmFjdCByYXcgY29udGVudCBpbnNpZGUgYW4gZWxlbWVudCBpbnRvIGEgdGVtcG9yYXJ5XG4gKiBjb250YWluZXIgZGl2XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtCb29sZWFufSBhc0ZyYWdtZW50XG4gKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gZXh0cmFjdENvbnRlbnQoZWwsIGFzRnJhZ21lbnQpIHtcbiAgdmFyIGNoaWxkO1xuICB2YXIgcmF3Q29udGVudDtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChpc1RlbXBsYXRlKGVsKSAmJiBpc0ZyYWdtZW50KGVsLmNvbnRlbnQpKSB7XG4gICAgZWwgPSBlbC5jb250ZW50O1xuICB9XG4gIGlmIChlbC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICB0cmltTm9kZShlbCk7XG4gICAgcmF3Q29udGVudCA9IGFzRnJhZ21lbnQgPyBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIHdoaWxlIChjaGlsZCA9IGVsLmZpcnN0Q2hpbGQpIHtcbiAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICAgIHJhd0NvbnRlbnQuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmF3Q29udGVudDtcbn1cblxuLyoqXG4gKiBUcmltIHBvc3NpYmxlIGVtcHR5IGhlYWQvdGFpbCB0ZXh0IGFuZCBjb21tZW50XG4gKiBub2RlcyBpbnNpZGUgYSBwYXJlbnQuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKi9cblxuZnVuY3Rpb24gdHJpbU5vZGUobm9kZSkge1xuICB2YXIgY2hpbGQ7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLXNlcXVlbmNlcyAqL1xuICB3aGlsZSAoKGNoaWxkID0gbm9kZS5maXJzdENoaWxkLCBpc1RyaW1tYWJsZShjaGlsZCkpKSB7XG4gICAgbm9kZS5yZW1vdmVDaGlsZChjaGlsZCk7XG4gIH1cbiAgd2hpbGUgKChjaGlsZCA9IG5vZGUubGFzdENoaWxkLCBpc1RyaW1tYWJsZShjaGlsZCkpKSB7XG4gICAgbm9kZS5yZW1vdmVDaGlsZChjaGlsZCk7XG4gIH1cbiAgLyogZXNsaW50LWVuYWJsZSBuby1zZXF1ZW5jZXMgKi9cbn1cblxuZnVuY3Rpb24gaXNUcmltbWFibGUobm9kZSkge1xuICByZXR1cm4gbm9kZSAmJiAobm9kZS5ub2RlVHlwZSA9PT0gMyAmJiAhbm9kZS5kYXRhLnRyaW0oKSB8fCBub2RlLm5vZGVUeXBlID09PSA4KTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgdGVtcGxhdGUgdGFnLlxuICogTm90ZSBpZiB0aGUgdGVtcGxhdGUgYXBwZWFycyBpbnNpZGUgYW4gU1ZHIGl0cyB0YWdOYW1lXG4gKiB3aWxsIGJlIGluIGxvd2VyY2FzZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKi9cblxuZnVuY3Rpb24gaXNUZW1wbGF0ZShlbCkge1xuICByZXR1cm4gZWwudGFnTmFtZSAmJiBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0ZW1wbGF0ZSc7XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIFwiYW5jaG9yXCIgZm9yIHBlcmZvcm1pbmcgZG9tIGluc2VydGlvbi9yZW1vdmFscy5cbiAqIFRoaXMgaXMgdXNlZCBpbiBhIG51bWJlciBvZiBzY2VuYXJpb3M6XG4gKiAtIGZyYWdtZW50IGluc3RhbmNlXG4gKiAtIHYtaHRtbFxuICogLSB2LWlmXG4gKiAtIHYtZm9yXG4gKiAtIGNvbXBvbmVudFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50XG4gKiBAcGFyYW0ge0Jvb2xlYW59IHBlcnNpc3QgLSBJRSB0cmFzaGVzIGVtcHR5IHRleHROb2RlcyBvblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVOb2RlKHRydWUpLCBzbyBpbiBjZXJ0YWluXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlcyB0aGUgYW5jaG9yIG5lZWRzIHRvIGJlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub24tZW1wdHkgdG8gYmUgcGVyc2lzdGVkIGluXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZXMuXG4gKiBAcmV0dXJuIHtDb21tZW50fFRleHR9XG4gKi9cblxuZnVuY3Rpb24gY3JlYXRlQW5jaG9yKGNvbnRlbnQsIHBlcnNpc3QpIHtcbiAgdmFyIGFuY2hvciA9IGNvbmZpZy5kZWJ1ZyA/IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoY29udGVudCkgOiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShwZXJzaXN0ID8gJyAnIDogJycpO1xuICBhbmNob3IuX192X2FuY2hvciA9IHRydWU7XG4gIHJldHVybiBhbmNob3I7XG59XG5cbi8qKlxuICogRmluZCBhIGNvbXBvbmVudCByZWYgYXR0cmlidXRlIHRoYXQgc3RhcnRzIHdpdGggJC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGVcbiAqIEByZXR1cm4ge1N0cmluZ3x1bmRlZmluZWR9XG4gKi9cblxudmFyIHJlZlJFID0gL152LXJlZjovO1xuXG5mdW5jdGlvbiBmaW5kUmVmKG5vZGUpIHtcbiAgaWYgKG5vZGUuaGFzQXR0cmlidXRlcygpKSB7XG4gICAgdmFyIGF0dHJzID0gbm9kZS5hdHRyaWJ1dGVzO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG4gICAgICBpZiAocmVmUkUudGVzdChuYW1lKSkge1xuICAgICAgICByZXR1cm4gY2FtZWxpemUobmFtZS5yZXBsYWNlKHJlZlJFLCAnJykpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIE1hcCBhIGZ1bmN0aW9uIHRvIGEgcmFuZ2Ugb2Ygbm9kZXMgLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtOb2RlfSBlbmRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9wXG4gKi9cblxuZnVuY3Rpb24gbWFwTm9kZVJhbmdlKG5vZGUsIGVuZCwgb3ApIHtcbiAgdmFyIG5leHQ7XG4gIHdoaWxlIChub2RlICE9PSBlbmQpIHtcbiAgICBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcbiAgICBvcChub2RlKTtcbiAgICBub2RlID0gbmV4dDtcbiAgfVxuICBvcChlbmQpO1xufVxuXG4vKipcbiAqIFJlbW92ZSBhIHJhbmdlIG9mIG5vZGVzIHdpdGggdHJhbnNpdGlvbiwgc3RvcmVcbiAqIHRoZSBub2RlcyBpbiBhIGZyYWdtZW50IHdpdGggY29ycmVjdCBvcmRlcmluZyxcbiAqIGFuZCBjYWxsIGNhbGxiYWNrIHdoZW4gZG9uZS5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IHN0YXJ0XG4gKiBAcGFyYW0ge05vZGV9IGVuZFxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKi9cblxuZnVuY3Rpb24gcmVtb3ZlTm9kZVJhbmdlKHN0YXJ0LCBlbmQsIHZtLCBmcmFnLCBjYikge1xuICB2YXIgZG9uZSA9IGZhbHNlO1xuICB2YXIgcmVtb3ZlZCA9IDA7XG4gIHZhciBub2RlcyA9IFtdO1xuICBtYXBOb2RlUmFuZ2Uoc3RhcnQsIGVuZCwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICBpZiAobm9kZSA9PT0gZW5kKSBkb25lID0gdHJ1ZTtcbiAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgIHJlbW92ZVdpdGhUcmFuc2l0aW9uKG5vZGUsIHZtLCBvblJlbW92ZWQpO1xuICB9KTtcbiAgZnVuY3Rpb24gb25SZW1vdmVkKCkge1xuICAgIHJlbW92ZWQrKztcbiAgICBpZiAoZG9uZSAmJiByZW1vdmVkID49IG5vZGVzLmxlbmd0aCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmcmFnLmFwcGVuZENoaWxkKG5vZGVzW2ldKTtcbiAgICAgIH1cbiAgICAgIGNiICYmIGNiKCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBub2RlIGlzIGEgRG9jdW1lbnRGcmFnbWVudC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNGcmFnbWVudChub2RlKSB7XG4gIHJldHVybiBub2RlICYmIG5vZGUubm9kZVR5cGUgPT09IDExO1xufVxuXG4vKipcbiAqIEdldCBvdXRlckhUTUwgb2YgZWxlbWVudHMsIHRha2luZyBjYXJlXG4gKiBvZiBTVkcgZWxlbWVudHMgaW4gSUUgYXMgd2VsbC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gZ2V0T3V0ZXJIVE1MKGVsKSB7XG4gIGlmIChlbC5vdXRlckhUTUwpIHtcbiAgICByZXR1cm4gZWwub3V0ZXJIVE1MO1xuICB9IGVsc2Uge1xuICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWwuY2xvbmVOb2RlKHRydWUpKTtcbiAgICByZXR1cm4gY29udGFpbmVyLmlubmVySFRNTDtcbiAgfVxufVxuXG52YXIgY29tbW9uVGFnUkUgPSAvXihkaXZ8cHxzcGFufGltZ3xhfGJ8aXxicnx1bHxvbHxsaXxoMXxoMnxoM3xoNHxoNXxoNnxjb2RlfHByZXx0YWJsZXx0aHx0ZHx0cnxmb3JtfGxhYmVsfGlucHV0fHNlbGVjdHxvcHRpb258bmF2fGFydGljbGV8c2VjdGlvbnxoZWFkZXJ8Zm9vdGVyKSQvaTtcbnZhciByZXNlcnZlZFRhZ1JFID0gL14oc2xvdHxwYXJ0aWFsfGNvbXBvbmVudCkkL2k7XG5cbnZhciBpc1Vua25vd25FbGVtZW50ID0gdW5kZWZpbmVkO1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgaXNVbmtub3duRWxlbWVudCA9IGZ1bmN0aW9uIChlbCwgdGFnKSB7XG4gICAgaWYgKHRhZy5pbmRleE9mKCctJykgPiAtMSkge1xuICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjgyMTAzNjQvMTA3MDI0NFxuICAgICAgcmV0dXJuIGVsLmNvbnN0cnVjdG9yID09PSB3aW5kb3cuSFRNTFVua25vd25FbGVtZW50IHx8IGVsLmNvbnN0cnVjdG9yID09PSB3aW5kb3cuSFRNTEVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoL0hUTUxVbmtub3duRWxlbWVudC8udGVzdChlbC50b1N0cmluZygpKSAmJlxuICAgICAgICAvLyBDaHJvbWUgcmV0dXJucyB1bmtub3duIGZvciBzZXZlcmFsIEhUTUw1IGVsZW1lbnRzLlxuICAgICAgICAvLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NTQwNTI2XG4gICAgICAgIC8vIEZpcmVmb3ggcmV0dXJucyB1bmtub3duIGZvciBzb21lIFwiSW50ZXJhY3RpdmUgZWxlbWVudHMuXCJcbiAgICAgICAgIS9eKGRhdGF8dGltZXxydGN8cmJ8ZGV0YWlsc3xkaWFsb2d8c3VtbWFyeSkkLy50ZXN0KHRhZylcbiAgICAgICk7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSBjb21wb25lbnQsIGlmIHllcyByZXR1cm4gaXRzXG4gKiBjb21wb25lbnQgaWQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gY2hlY2tDb21wb25lbnRBdHRyKGVsLCBvcHRpb25zKSB7XG4gIHZhciB0YWcgPSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIHZhciBoYXNBdHRycyA9IGVsLmhhc0F0dHJpYnV0ZXMoKTtcbiAgaWYgKCFjb21tb25UYWdSRS50ZXN0KHRhZykgJiYgIXJlc2VydmVkVGFnUkUudGVzdCh0YWcpKSB7XG4gICAgaWYgKHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykpIHtcbiAgICAgIHJldHVybiB7IGlkOiB0YWcgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGlzID0gaGFzQXR0cnMgJiYgZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKTtcbiAgICAgIGlmIChpcykge1xuICAgICAgICByZXR1cm4gaXM7XG4gICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgdmFyIGV4cGVjdGVkVGFnID0gb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcCAmJiBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwW3RhZ107XG4gICAgICAgIGlmIChleHBlY3RlZFRhZykge1xuICAgICAgICAgIHdhcm4oJ1Vua25vd24gY3VzdG9tIGVsZW1lbnQ6IDwnICsgdGFnICsgJz4gLSAnICsgJ2RpZCB5b3UgbWVhbiA8JyArIGV4cGVjdGVkVGFnICsgJz4/ICcgKyAnSFRNTCBpcyBjYXNlLWluc2Vuc2l0aXZlLCByZW1lbWJlciB0byB1c2Uga2ViYWItY2FzZSBpbiB0ZW1wbGF0ZXMuJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNVbmtub3duRWxlbWVudChlbCwgdGFnKSkge1xuICAgICAgICAgIHdhcm4oJ1Vua25vd24gY3VzdG9tIGVsZW1lbnQ6IDwnICsgdGFnICsgJz4gLSBkaWQgeW91ICcgKyAncmVnaXN0ZXIgdGhlIGNvbXBvbmVudCBjb3JyZWN0bHk/IEZvciByZWN1cnNpdmUgY29tcG9uZW50cywgJyArICdtYWtlIHN1cmUgdG8gcHJvdmlkZSB0aGUgXCJuYW1lXCIgb3B0aW9uLicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGhhc0F0dHJzKSB7XG4gICAgcmV0dXJuIGdldElzQmluZGluZyhlbCwgb3B0aW9ucyk7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgXCJpc1wiIGJpbmRpbmcgZnJvbSBhbiBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIGdldElzQmluZGluZyhlbCwgb3B0aW9ucykge1xuICAvLyBkeW5hbWljIHN5bnRheFxuICB2YXIgZXhwID0gZWwuZ2V0QXR0cmlidXRlKCdpcycpO1xuICBpZiAoZXhwICE9IG51bGwpIHtcbiAgICBpZiAocmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgZXhwKSkge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdpcycpO1xuICAgICAgcmV0dXJuIHsgaWQ6IGV4cCB9O1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBleHAgPSBnZXRCaW5kQXR0cihlbCwgJ2lzJyk7XG4gICAgaWYgKGV4cCAhPSBudWxsKSB7XG4gICAgICByZXR1cm4geyBpZDogZXhwLCBkeW5hbWljOiB0cnVlIH07XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogT3B0aW9uIG92ZXJ3cml0aW5nIHN0cmF0ZWdpZXMgYXJlIGZ1bmN0aW9ucyB0aGF0IGhhbmRsZVxuICogaG93IHRvIG1lcmdlIGEgcGFyZW50IG9wdGlvbiB2YWx1ZSBhbmQgYSBjaGlsZCBvcHRpb25cbiAqIHZhbHVlIGludG8gdGhlIGZpbmFsIHZhbHVlLlxuICpcbiAqIEFsbCBzdHJhdGVneSBmdW5jdGlvbnMgZm9sbG93IHRoZSBzYW1lIHNpZ25hdHVyZTpcbiAqXG4gKiBAcGFyYW0geyp9IHBhcmVudFZhbFxuICogQHBhcmFtIHsqfSBjaGlsZFZhbFxuICogQHBhcmFtIHtWdWV9IFt2bV1cbiAqL1xuXG52YXIgc3RyYXRzID0gY29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbi8qKlxuICogSGVscGVyIHRoYXQgcmVjdXJzaXZlbHkgbWVyZ2VzIHR3byBkYXRhIG9iamVjdHMgdG9nZXRoZXIuXG4gKi9cblxuZnVuY3Rpb24gbWVyZ2VEYXRhKHRvLCBmcm9tKSB7XG4gIHZhciBrZXksIHRvVmFsLCBmcm9tVmFsO1xuICBmb3IgKGtleSBpbiBmcm9tKSB7XG4gICAgdG9WYWwgPSB0b1trZXldO1xuICAgIGZyb21WYWwgPSBmcm9tW2tleV07XG4gICAgaWYgKCFoYXNPd24odG8sIGtleSkpIHtcbiAgICAgIHNldCh0bywga2V5LCBmcm9tVmFsKTtcbiAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHRvVmFsKSAmJiBpc09iamVjdChmcm9tVmFsKSkge1xuICAgICAgbWVyZ2VEYXRhKHRvVmFsLCBmcm9tVmFsKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRvO1xufVxuXG4vKipcbiAqIERhdGFcbiAqL1xuXG5zdHJhdHMuZGF0YSA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSkge1xuICBpZiAoIXZtKSB7XG4gICAgLy8gaW4gYSBWdWUuZXh0ZW5kIG1lcmdlLCBib3RoIHNob3VsZCBiZSBmdW5jdGlvbnNcbiAgICBpZiAoIWNoaWxkVmFsKSB7XG4gICAgICByZXR1cm4gcGFyZW50VmFsO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1RoZSBcImRhdGFcIiBvcHRpb24gc2hvdWxkIGJlIGEgZnVuY3Rpb24gJyArICd0aGF0IHJldHVybnMgYSBwZXItaW5zdGFuY2UgdmFsdWUgaW4gY29tcG9uZW50ICcgKyAnZGVmaW5pdGlvbnMuJywgdm0pO1xuICAgICAgcmV0dXJuIHBhcmVudFZhbDtcbiAgICB9XG4gICAgaWYgKCFwYXJlbnRWYWwpIHtcbiAgICAgIHJldHVybiBjaGlsZFZhbDtcbiAgICB9XG4gICAgLy8gd2hlbiBwYXJlbnRWYWwgJiBjaGlsZFZhbCBhcmUgYm90aCBwcmVzZW50LFxuICAgIC8vIHdlIG5lZWQgdG8gcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZVxuICAgIC8vIG1lcmdlZCByZXN1bHQgb2YgYm90aCBmdW5jdGlvbnMuLi4gbm8gbmVlZCB0b1xuICAgIC8vIGNoZWNrIGlmIHBhcmVudFZhbCBpcyBhIGZ1bmN0aW9uIGhlcmUgYmVjYXVzZVxuICAgIC8vIGl0IGhhcyB0byBiZSBhIGZ1bmN0aW9uIHRvIHBhc3MgcHJldmlvdXMgbWVyZ2VzLlxuICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWREYXRhRm4oKSB7XG4gICAgICByZXR1cm4gbWVyZ2VEYXRhKGNoaWxkVmFsLmNhbGwodGhpcyksIHBhcmVudFZhbC5jYWxsKHRoaXMpKTtcbiAgICB9O1xuICB9IGVsc2UgaWYgKHBhcmVudFZhbCB8fCBjaGlsZFZhbCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWRJbnN0YW5jZURhdGFGbigpIHtcbiAgICAgIC8vIGluc3RhbmNlIG1lcmdlXG4gICAgICB2YXIgaW5zdGFuY2VEYXRhID0gdHlwZW9mIGNoaWxkVmFsID09PSAnZnVuY3Rpb24nID8gY2hpbGRWYWwuY2FsbCh2bSkgOiBjaGlsZFZhbDtcbiAgICAgIHZhciBkZWZhdWx0RGF0YSA9IHR5cGVvZiBwYXJlbnRWYWwgPT09ICdmdW5jdGlvbicgPyBwYXJlbnRWYWwuY2FsbCh2bSkgOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoaW5zdGFuY2VEYXRhKSB7XG4gICAgICAgIHJldHVybiBtZXJnZURhdGEoaW5zdGFuY2VEYXRhLCBkZWZhdWx0RGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZGVmYXVsdERhdGE7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufTtcblxuLyoqXG4gKiBFbFxuICovXG5cbnN0cmF0cy5lbCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSkge1xuICBpZiAoIXZtICYmIGNoaWxkVmFsICYmIHR5cGVvZiBjaGlsZFZhbCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVGhlIFwiZWxcIiBvcHRpb24gc2hvdWxkIGJlIGEgZnVuY3Rpb24gJyArICd0aGF0IHJldHVybnMgYSBwZXItaW5zdGFuY2UgdmFsdWUgaW4gY29tcG9uZW50ICcgKyAnZGVmaW5pdGlvbnMuJywgdm0pO1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgcmV0ID0gY2hpbGRWYWwgfHwgcGFyZW50VmFsO1xuICAvLyBpbnZva2UgdGhlIGVsZW1lbnQgZmFjdG9yeSBpZiB0aGlzIGlzIGluc3RhbmNlIG1lcmdlXG4gIHJldHVybiB2bSAmJiB0eXBlb2YgcmV0ID09PSAnZnVuY3Rpb24nID8gcmV0LmNhbGwodm0pIDogcmV0O1xufTtcblxuLyoqXG4gKiBIb29rcyBhbmQgcGFyYW0gYXR0cmlidXRlcyBhcmUgbWVyZ2VkIGFzIGFycmF5cy5cbiAqL1xuXG5zdHJhdHMuaW5pdCA9IHN0cmF0cy5jcmVhdGVkID0gc3RyYXRzLnJlYWR5ID0gc3RyYXRzLmF0dGFjaGVkID0gc3RyYXRzLmRldGFjaGVkID0gc3RyYXRzLmJlZm9yZUNvbXBpbGUgPSBzdHJhdHMuY29tcGlsZWQgPSBzdHJhdHMuYmVmb3JlRGVzdHJveSA9IHN0cmF0cy5kZXN0cm95ZWQgPSBzdHJhdHMuYWN0aXZhdGUgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuICByZXR1cm4gY2hpbGRWYWwgPyBwYXJlbnRWYWwgPyBwYXJlbnRWYWwuY29uY2F0KGNoaWxkVmFsKSA6IGlzQXJyYXkoY2hpbGRWYWwpID8gY2hpbGRWYWwgOiBbY2hpbGRWYWxdIDogcGFyZW50VmFsO1xufTtcblxuLyoqXG4gKiBBc3NldHNcbiAqXG4gKiBXaGVuIGEgdm0gaXMgcHJlc2VudCAoaW5zdGFuY2UgY3JlYXRpb24pLCB3ZSBuZWVkIHRvIGRvXG4gKiBhIHRocmVlLXdheSBtZXJnZSBiZXR3ZWVuIGNvbnN0cnVjdG9yIG9wdGlvbnMsIGluc3RhbmNlXG4gKiBvcHRpb25zIGFuZCBwYXJlbnQgb3B0aW9ucy5cbiAqL1xuXG5mdW5jdGlvbiBtZXJnZUFzc2V0cyhwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFZhbCB8fCBudWxsKTtcbiAgcmV0dXJuIGNoaWxkVmFsID8gZXh0ZW5kKHJlcywgZ3VhcmRBcnJheUFzc2V0cyhjaGlsZFZhbCkpIDogcmVzO1xufVxuXG5jb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICBzdHJhdHNbdHlwZSArICdzJ10gPSBtZXJnZUFzc2V0cztcbn0pO1xuXG4vKipcbiAqIEV2ZW50cyAmIFdhdGNoZXJzLlxuICpcbiAqIEV2ZW50cyAmIHdhdGNoZXJzIGhhc2hlcyBzaG91bGQgbm90IG92ZXJ3cml0ZSBvbmVcbiAqIGFub3RoZXIsIHNvIHdlIG1lcmdlIHRoZW0gYXMgYXJyYXlzLlxuICovXG5cbnN0cmF0cy53YXRjaCA9IHN0cmF0cy5ldmVudHMgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsO1xuICBpZiAoIXBhcmVudFZhbCkgcmV0dXJuIGNoaWxkVmFsO1xuICB2YXIgcmV0ID0ge307XG4gIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG4gIGZvciAodmFyIGtleSBpbiBjaGlsZFZhbCkge1xuICAgIHZhciBwYXJlbnQgPSByZXRba2V5XTtcbiAgICB2YXIgY2hpbGQgPSBjaGlsZFZhbFtrZXldO1xuICAgIGlmIChwYXJlbnQgJiYgIWlzQXJyYXkocGFyZW50KSkge1xuICAgICAgcGFyZW50ID0gW3BhcmVudF07XG4gICAgfVxuICAgIHJldFtrZXldID0gcGFyZW50ID8gcGFyZW50LmNvbmNhdChjaGlsZCkgOiBbY2hpbGRdO1xuICB9XG4gIHJldHVybiByZXQ7XG59O1xuXG4vKipcbiAqIE90aGVyIG9iamVjdCBoYXNoZXMuXG4gKi9cblxuc3RyYXRzLnByb3BzID0gc3RyYXRzLm1ldGhvZHMgPSBzdHJhdHMuY29tcHV0ZWQgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsO1xuICBpZiAoIXBhcmVudFZhbCkgcmV0dXJuIGNoaWxkVmFsO1xuICB2YXIgcmV0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcbiAgZXh0ZW5kKHJldCwgY2hpbGRWYWwpO1xuICByZXR1cm4gcmV0O1xufTtcblxuLyoqXG4gKiBEZWZhdWx0IHN0cmF0ZWd5LlxuICovXG5cbnZhciBkZWZhdWx0U3RyYXQgPSBmdW5jdGlvbiBkZWZhdWx0U3RyYXQocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuICByZXR1cm4gY2hpbGRWYWwgPT09IHVuZGVmaW5lZCA/IHBhcmVudFZhbCA6IGNoaWxkVmFsO1xufTtcblxuLyoqXG4gKiBNYWtlIHN1cmUgY29tcG9uZW50IG9wdGlvbnMgZ2V0IGNvbnZlcnRlZCB0byBhY3R1YWxcbiAqIGNvbnN0cnVjdG9ycy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5cbmZ1bmN0aW9uIGd1YXJkQ29tcG9uZW50cyhvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zLmNvbXBvbmVudHMpIHtcbiAgICB2YXIgY29tcG9uZW50cyA9IG9wdGlvbnMuY29tcG9uZW50cyA9IGd1YXJkQXJyYXlBc3NldHMob3B0aW9ucy5jb21wb25lbnRzKTtcbiAgICB2YXIgaWRzID0gT2JqZWN0LmtleXMoY29tcG9uZW50cyk7XG4gICAgdmFyIGRlZjtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFyIG1hcCA9IG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXAgPSB7fTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBpZHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0gaWRzW2ldO1xuICAgICAgaWYgKGNvbW1vblRhZ1JFLnRlc3Qoa2V5KSB8fCByZXNlcnZlZFRhZ1JFLnRlc3Qoa2V5KSkge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0RvIG5vdCB1c2UgYnVpbHQtaW4gb3IgcmVzZXJ2ZWQgSFRNTCBlbGVtZW50cyBhcyBjb21wb25lbnQgJyArICdpZDogJyArIGtleSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgLy8gcmVjb3JkIGEgYWxsIGxvd2VyY2FzZSA8LT4ga2ViYWItY2FzZSBtYXBwaW5nIGZvclxuICAgICAgLy8gcG9zc2libGUgY3VzdG9tIGVsZW1lbnQgY2FzZSBlcnJvciB3YXJuaW5nXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBtYXBba2V5LnJlcGxhY2UoLy0vZywgJycpLnRvTG93ZXJDYXNlKCldID0gaHlwaGVuYXRlKGtleSk7XG4gICAgICB9XG4gICAgICBkZWYgPSBjb21wb25lbnRzW2tleV07XG4gICAgICBpZiAoaXNQbGFpbk9iamVjdChkZWYpKSB7XG4gICAgICAgIGNvbXBvbmVudHNba2V5XSA9IFZ1ZS5leHRlbmQoZGVmKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBFbnN1cmUgYWxsIHByb3BzIG9wdGlvbiBzeW50YXggYXJlIG5vcm1hbGl6ZWQgaW50byB0aGVcbiAqIE9iamVjdC1iYXNlZCBmb3JtYXQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuXG5mdW5jdGlvbiBndWFyZFByb3BzKG9wdGlvbnMpIHtcbiAgdmFyIHByb3BzID0gb3B0aW9ucy5wcm9wcztcbiAgdmFyIGksIHZhbDtcbiAgaWYgKGlzQXJyYXkocHJvcHMpKSB7XG4gICAgb3B0aW9ucy5wcm9wcyA9IHt9O1xuICAgIGkgPSBwcm9wcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFsID0gcHJvcHNbaV07XG4gICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgb3B0aW9ucy5wcm9wc1t2YWxdID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAodmFsLm5hbWUpIHtcbiAgICAgICAgb3B0aW9ucy5wcm9wc1t2YWwubmFtZV0gPSB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QocHJvcHMpKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wcyk7XG4gICAgaSA9IGtleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhbCA9IHByb3BzW2tleXNbaV1dO1xuICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcHJvcHNba2V5c1tpXV0gPSB7IHR5cGU6IHZhbCB9O1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEd1YXJkIGFuIEFycmF5LWZvcm1hdCBhc3NldHMgb3B0aW9uIGFuZCBjb252ZXJ0ZWQgaXRcbiAqIGludG8gdGhlIGtleS12YWx1ZSBPYmplY3QgZm9ybWF0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBhc3NldHNcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBndWFyZEFycmF5QXNzZXRzKGFzc2V0cykge1xuICBpZiAoaXNBcnJheShhc3NldHMpKSB7XG4gICAgdmFyIHJlcyA9IHt9O1xuICAgIHZhciBpID0gYXNzZXRzLmxlbmd0aDtcbiAgICB2YXIgYXNzZXQ7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgYXNzZXQgPSBhc3NldHNbaV07XG4gICAgICB2YXIgaWQgPSB0eXBlb2YgYXNzZXQgPT09ICdmdW5jdGlvbicgPyBhc3NldC5vcHRpb25zICYmIGFzc2V0Lm9wdGlvbnMubmFtZSB8fCBhc3NldC5pZCA6IGFzc2V0Lm5hbWUgfHwgYXNzZXQuaWQ7XG4gICAgICBpZiAoIWlkKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQXJyYXktc3ludGF4IGFzc2V0cyBtdXN0IHByb3ZpZGUgYSBcIm5hbWVcIiBvciBcImlkXCIgZmllbGQuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNbaWRdID0gYXNzZXQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cbiAgcmV0dXJuIGFzc2V0cztcbn1cblxuLyoqXG4gKiBNZXJnZSB0d28gb3B0aW9uIG9iamVjdHMgaW50byBhIG5ldyBvbmUuXG4gKiBDb3JlIHV0aWxpdHkgdXNlZCBpbiBib3RoIGluc3RhbnRpYXRpb24gYW5kIGluaGVyaXRhbmNlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYXJlbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBjaGlsZFxuICogQHBhcmFtIHtWdWV9IFt2bV0gLSBpZiB2bSBpcyBwcmVzZW50LCBpbmRpY2F0ZXMgdGhpcyBpc1xuICogICAgICAgICAgICAgICAgICAgICBhbiBpbnN0YW50aWF0aW9uIG1lcmdlLlxuICovXG5cbmZ1bmN0aW9uIG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkLCB2bSkge1xuICBndWFyZENvbXBvbmVudHMoY2hpbGQpO1xuICBndWFyZFByb3BzKGNoaWxkKTtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoY2hpbGQucHJvcHNEYXRhICYmICF2bSkge1xuICAgICAgd2FybigncHJvcHNEYXRhIGNhbiBvbmx5IGJlIHVzZWQgYXMgYW4gaW5zdGFudGlhdGlvbiBvcHRpb24uJyk7XG4gICAgfVxuICB9XG4gIHZhciBvcHRpb25zID0ge307XG4gIHZhciBrZXk7XG4gIGlmIChjaGlsZFsnZXh0ZW5kcyddKSB7XG4gICAgcGFyZW50ID0gdHlwZW9mIGNoaWxkWydleHRlbmRzJ10gPT09ICdmdW5jdGlvbicgPyBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZFsnZXh0ZW5kcyddLm9wdGlvbnMsIHZtKSA6IG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkWydleHRlbmRzJ10sIHZtKTtcbiAgfVxuICBpZiAoY2hpbGQubWl4aW5zKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZC5taXhpbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgbWl4aW4gPSBjaGlsZC5taXhpbnNbaV07XG4gICAgICB2YXIgbWl4aW5PcHRpb25zID0gbWl4aW4ucHJvdG90eXBlIGluc3RhbmNlb2YgVnVlID8gbWl4aW4ub3B0aW9ucyA6IG1peGluO1xuICAgICAgcGFyZW50ID0gbWVyZ2VPcHRpb25zKHBhcmVudCwgbWl4aW5PcHRpb25zLCB2bSk7XG4gICAgfVxuICB9XG4gIGZvciAoa2V5IGluIHBhcmVudCkge1xuICAgIG1lcmdlRmllbGQoa2V5KTtcbiAgfVxuICBmb3IgKGtleSBpbiBjaGlsZCkge1xuICAgIGlmICghaGFzT3duKHBhcmVudCwga2V5KSkge1xuICAgICAgbWVyZ2VGaWVsZChrZXkpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBtZXJnZUZpZWxkKGtleSkge1xuICAgIHZhciBzdHJhdCA9IHN0cmF0c1trZXldIHx8IGRlZmF1bHRTdHJhdDtcbiAgICBvcHRpb25zW2tleV0gPSBzdHJhdChwYXJlbnRba2V5XSwgY2hpbGRba2V5XSwgdm0sIGtleSk7XG4gIH1cbiAgcmV0dXJuIG9wdGlvbnM7XG59XG5cbi8qKlxuICogUmVzb2x2ZSBhbiBhc3NldC5cbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBiZWNhdXNlIGNoaWxkIGluc3RhbmNlcyBuZWVkIGFjY2Vzc1xuICogdG8gYXNzZXRzIGRlZmluZWQgaW4gaXRzIGFuY2VzdG9yIGNoYWluLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHdhcm5NaXNzaW5nXG4gKiBAcmV0dXJuIHtPYmplY3R8RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsIHR5cGUsIGlkLCB3YXJuTWlzc2luZykge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHR5cGVvZiBpZCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGFzc2V0cyA9IG9wdGlvbnNbdHlwZV07XG4gIHZhciBjYW1lbGl6ZWRJZDtcbiAgdmFyIHJlcyA9IGFzc2V0c1tpZF0gfHxcbiAgLy8gY2FtZWxDYXNlIElEXG4gIGFzc2V0c1tjYW1lbGl6ZWRJZCA9IGNhbWVsaXplKGlkKV0gfHxcbiAgLy8gUGFzY2FsIENhc2UgSURcbiAgYXNzZXRzW2NhbWVsaXplZElkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWxpemVkSWQuc2xpY2UoMSldO1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuTWlzc2luZyAmJiAhcmVzKSB7XG4gICAgd2FybignRmFpbGVkIHRvIHJlc29sdmUgJyArIHR5cGUuc2xpY2UoMCwgLTEpICsgJzogJyArIGlkLCBvcHRpb25zKTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG52YXIgdWlkJDEgPSAwO1xuXG4vKipcbiAqIEEgZGVwIGlzIGFuIG9ic2VydmFibGUgdGhhdCBjYW4gaGF2ZSBtdWx0aXBsZVxuICogZGlyZWN0aXZlcyBzdWJzY3JpYmluZyB0byBpdC5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gRGVwKCkge1xuICB0aGlzLmlkID0gdWlkJDErKztcbiAgdGhpcy5zdWJzID0gW107XG59XG5cbi8vIHRoZSBjdXJyZW50IHRhcmdldCB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZC5cbi8vIHRoaXMgaXMgZ2xvYmFsbHkgdW5pcXVlIGJlY2F1c2UgdGhlcmUgY291bGQgYmUgb25seSBvbmVcbi8vIHdhdGNoZXIgYmVpbmcgZXZhbHVhdGVkIGF0IGFueSB0aW1lLlxuRGVwLnRhcmdldCA9IG51bGw7XG5cbi8qKlxuICogQWRkIGEgZGlyZWN0aXZlIHN1YnNjcmliZXIuXG4gKlxuICogQHBhcmFtIHtEaXJlY3RpdmV9IHN1YlxuICovXG5cbkRlcC5wcm90b3R5cGUuYWRkU3ViID0gZnVuY3Rpb24gKHN1Yikge1xuICB0aGlzLnN1YnMucHVzaChzdWIpO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYSBkaXJlY3RpdmUgc3Vic2NyaWJlci5cbiAqXG4gKiBAcGFyYW0ge0RpcmVjdGl2ZX0gc3ViXG4gKi9cblxuRGVwLnByb3RvdHlwZS5yZW1vdmVTdWIgPSBmdW5jdGlvbiAoc3ViKSB7XG4gIHRoaXMuc3Vicy4kcmVtb3ZlKHN1Yik7XG59O1xuXG4vKipcbiAqIEFkZCBzZWxmIGFzIGEgZGVwZW5kZW5jeSB0byB0aGUgdGFyZ2V0IHdhdGNoZXIuXG4gKi9cblxuRGVwLnByb3RvdHlwZS5kZXBlbmQgPSBmdW5jdGlvbiAoKSB7XG4gIERlcC50YXJnZXQuYWRkRGVwKHRoaXMpO1xufTtcblxuLyoqXG4gKiBOb3RpZnkgYWxsIHN1YnNjcmliZXJzIG9mIGEgbmV3IHZhbHVlLlxuICovXG5cbkRlcC5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gKCkge1xuICAvLyBzdGFibGl6ZSB0aGUgc3Vic2NyaWJlciBsaXN0IGZpcnN0XG4gIHZhciBzdWJzID0gdG9BcnJheSh0aGlzLnN1YnMpO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHN1YnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgc3Vic1tpXS51cGRhdGUoKTtcbiAgfVxufTtcblxudmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG52YXIgYXJyYXlNZXRob2RzID0gT2JqZWN0LmNyZWF0ZShhcnJheVByb3RvKVxuXG4vKipcbiAqIEludGVyY2VwdCBtdXRhdGluZyBtZXRob2RzIGFuZCBlbWl0IGV2ZW50c1xuICovXG5cbjtbJ3B1c2gnLCAncG9wJywgJ3NoaWZ0JywgJ3Vuc2hpZnQnLCAnc3BsaWNlJywgJ3NvcnQnLCAncmV2ZXJzZSddLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkge1xuICAvLyBjYWNoZSBvcmlnaW5hbCBtZXRob2RcbiAgdmFyIG9yaWdpbmFsID0gYXJyYXlQcm90b1ttZXRob2RdO1xuICBkZWYoYXJyYXlNZXRob2RzLCBtZXRob2QsIGZ1bmN0aW9uIG11dGF0b3IoKSB7XG4gICAgLy8gYXZvaWQgbGVha2luZyBhcmd1bWVudHM6XG4gICAgLy8gaHR0cDovL2pzcGVyZi5jb20vY2xvc3VyZS13aXRoLWFyZ3VtZW50c1xuICAgIHZhciBpID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShpKTtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gb3JpZ2luYWwuYXBwbHkodGhpcywgYXJncyk7XG4gICAgdmFyIG9iID0gdGhpcy5fX29iX187XG4gICAgdmFyIGluc2VydGVkO1xuICAgIHN3aXRjaCAobWV0aG9kKSB7XG4gICAgICBjYXNlICdwdXNoJzpcbiAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3Vuc2hpZnQnOlxuICAgICAgICBpbnNlcnRlZCA9IGFyZ3M7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc3BsaWNlJzpcbiAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzLnNsaWNlKDIpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgaWYgKGluc2VydGVkKSBvYi5vYnNlcnZlQXJyYXkoaW5zZXJ0ZWQpO1xuICAgIC8vIG5vdGlmeSBjaGFuZ2VcbiAgICBvYi5kZXAubm90aWZ5KCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSk7XG59KTtcblxuLyoqXG4gKiBTd2FwIHRoZSBlbGVtZW50IGF0IHRoZSBnaXZlbiBpbmRleCB3aXRoIGEgbmV3IHZhbHVlXG4gKiBhbmQgZW1pdHMgY29ycmVzcG9uZGluZyBldmVudC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKiBAcmV0dXJuIHsqfSAtIHJlcGxhY2VkIGVsZW1lbnRcbiAqL1xuXG5kZWYoYXJyYXlQcm90bywgJyRzZXQnLCBmdW5jdGlvbiAkc2V0KGluZGV4LCB2YWwpIHtcbiAgaWYgKGluZGV4ID49IHRoaXMubGVuZ3RoKSB7XG4gICAgdGhpcy5sZW5ndGggPSBOdW1iZXIoaW5kZXgpICsgMTtcbiAgfVxuICByZXR1cm4gdGhpcy5zcGxpY2UoaW5kZXgsIDEsIHZhbClbMF07XG59KTtcblxuLyoqXG4gKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcmVtb3ZlIHRoZSBlbGVtZW50IGF0IGdpdmVuIGluZGV4IG9yIHRhcmdldCBlbGVtZW50IHJlZmVyZW5jZS5cbiAqXG4gKiBAcGFyYW0geyp9IGl0ZW1cbiAqL1xuXG5kZWYoYXJyYXlQcm90bywgJyRyZW1vdmUnLCBmdW5jdGlvbiAkcmVtb3ZlKGl0ZW0pIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICghdGhpcy5sZW5ndGgpIHJldHVybjtcbiAgdmFyIGluZGV4ID0gaW5kZXhPZih0aGlzLCBpdGVtKTtcbiAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICByZXR1cm4gdGhpcy5zcGxpY2UoaW5kZXgsIDEpO1xuICB9XG59KTtcblxudmFyIGFycmF5S2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGFycmF5TWV0aG9kcyk7XG5cbi8qKlxuICogQnkgZGVmYXVsdCwgd2hlbiBhIHJlYWN0aXZlIHByb3BlcnR5IGlzIHNldCwgdGhlIG5ldyB2YWx1ZSBpc1xuICogYWxzbyBjb252ZXJ0ZWQgdG8gYmVjb21lIHJlYWN0aXZlLiBIb3dldmVyIGluIGNlcnRhaW4gY2FzZXMsIGUuZy5cbiAqIHYtZm9yIHNjb3BlIGFsaWFzIGFuZCBwcm9wcywgd2UgZG9uJ3Qgd2FudCB0byBmb3JjZSBjb252ZXJzaW9uXG4gKiBiZWNhdXNlIHRoZSB2YWx1ZSBtYXkgYmUgYSBuZXN0ZWQgdmFsdWUgdW5kZXIgYSBmcm96ZW4gZGF0YSBzdHJ1Y3R1cmUuXG4gKlxuICogU28gd2hlbmV2ZXIgd2Ugd2FudCB0byBzZXQgYSByZWFjdGl2ZSBwcm9wZXJ0eSB3aXRob3V0IGZvcmNpbmdcbiAqIGNvbnZlcnNpb24gb24gdGhlIG5ldyB2YWx1ZSwgd2Ugd3JhcCB0aGF0IGNhbGwgaW5zaWRlIHRoaXMgZnVuY3Rpb24uXG4gKi9cblxudmFyIHNob3VsZENvbnZlcnQgPSB0cnVlO1xuXG5mdW5jdGlvbiB3aXRob3V0Q29udmVyc2lvbihmbikge1xuICBzaG91bGRDb252ZXJ0ID0gZmFsc2U7XG4gIGZuKCk7XG4gIHNob3VsZENvbnZlcnQgPSB0cnVlO1xufVxuXG4vKipcbiAqIE9ic2VydmVyIGNsYXNzIHRoYXQgYXJlIGF0dGFjaGVkIHRvIGVhY2ggb2JzZXJ2ZWRcbiAqIG9iamVjdC4gT25jZSBhdHRhY2hlZCwgdGhlIG9ic2VydmVyIGNvbnZlcnRzIHRhcmdldFxuICogb2JqZWN0J3MgcHJvcGVydHkga2V5cyBpbnRvIGdldHRlci9zZXR0ZXJzIHRoYXRcbiAqIGNvbGxlY3QgZGVwZW5kZW5jaWVzIGFuZCBkaXNwYXRjaGVzIHVwZGF0ZXMuXG4gKlxuICogQHBhcmFtIHtBcnJheXxPYmplY3R9IHZhbHVlXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuXG5mdW5jdGlvbiBPYnNlcnZlcih2YWx1ZSkge1xuICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gIHRoaXMuZGVwID0gbmV3IERlcCgpO1xuICBkZWYodmFsdWUsICdfX29iX18nLCB0aGlzKTtcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgdmFyIGF1Z21lbnQgPSBoYXNQcm90byA/IHByb3RvQXVnbWVudCA6IGNvcHlBdWdtZW50O1xuICAgIGF1Z21lbnQodmFsdWUsIGFycmF5TWV0aG9kcywgYXJyYXlLZXlzKTtcbiAgICB0aGlzLm9ic2VydmVBcnJheSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy53YWxrKHZhbHVlKTtcbiAgfVxufVxuXG4vLyBJbnN0YW5jZSBtZXRob2RzXG5cbi8qKlxuICogV2FsayB0aHJvdWdoIGVhY2ggcHJvcGVydHkgYW5kIGNvbnZlcnQgdGhlbSBpbnRvXG4gKiBnZXR0ZXIvc2V0dGVycy4gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIHdoZW5cbiAqIHZhbHVlIHR5cGUgaXMgT2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqL1xuXG5PYnNlcnZlci5wcm90b3R5cGUud2FsayA9IGZ1bmN0aW9uIChvYmopIHtcbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdGhpcy5jb252ZXJ0KGtleXNbaV0sIG9ialtrZXlzW2ldXSk7XG4gIH1cbn07XG5cbi8qKlxuICogT2JzZXJ2ZSBhIGxpc3Qgb2YgQXJyYXkgaXRlbXMuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gaXRlbXNcbiAqL1xuXG5PYnNlcnZlci5wcm90b3R5cGUub2JzZXJ2ZUFycmF5ID0gZnVuY3Rpb24gKGl0ZW1zKSB7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gaXRlbXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgb2JzZXJ2ZShpdGVtc1tpXSk7XG4gIH1cbn07XG5cbi8qKlxuICogQ29udmVydCBhIHByb3BlcnR5IGludG8gZ2V0dGVyL3NldHRlciBzbyB3ZSBjYW4gZW1pdFxuICogdGhlIGV2ZW50cyB3aGVuIHRoZSBwcm9wZXJ0eSBpcyBhY2Nlc3NlZC9jaGFuZ2VkLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLmNvbnZlcnQgPSBmdW5jdGlvbiAoa2V5LCB2YWwpIHtcbiAgZGVmaW5lUmVhY3RpdmUodGhpcy52YWx1ZSwga2V5LCB2YWwpO1xufTtcblxuLyoqXG4gKiBBZGQgYW4gb3duZXIgdm0sIHNvIHRoYXQgd2hlbiAkc2V0LyRkZWxldGUgbXV0YXRpb25zXG4gKiBoYXBwZW4gd2UgY2FuIG5vdGlmeSBvd25lciB2bXMgdG8gcHJveHkgdGhlIGtleXMgYW5kXG4gKiBkaWdlc3QgdGhlIHdhdGNoZXJzLiBUaGlzIGlzIG9ubHkgY2FsbGVkIHdoZW4gdGhlIG9iamVjdFxuICogaXMgb2JzZXJ2ZWQgYXMgYW4gaW5zdGFuY2UncyByb290ICRkYXRhLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICovXG5cbk9ic2VydmVyLnByb3RvdHlwZS5hZGRWbSA9IGZ1bmN0aW9uICh2bSkge1xuICAodGhpcy52bXMgfHwgKHRoaXMudm1zID0gW10pKS5wdXNoKHZtKTtcbn07XG5cbi8qKlxuICogUmVtb3ZlIGFuIG93bmVyIHZtLiBUaGlzIGlzIGNhbGxlZCB3aGVuIHRoZSBvYmplY3QgaXNcbiAqIHN3YXBwZWQgb3V0IGFzIGFuIGluc3RhbmNlJ3MgJGRhdGEgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICovXG5cbk9ic2VydmVyLnByb3RvdHlwZS5yZW1vdmVWbSA9IGZ1bmN0aW9uICh2bSkge1xuICB0aGlzLnZtcy4kcmVtb3ZlKHZtKTtcbn07XG5cbi8vIGhlbHBlcnNcblxuLyoqXG4gKiBBdWdtZW50IGFuIHRhcmdldCBPYmplY3Qgb3IgQXJyYXkgYnkgaW50ZXJjZXB0aW5nXG4gKiB0aGUgcHJvdG90eXBlIGNoYWluIHVzaW5nIF9fcHJvdG9fX1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSB0YXJnZXRcbiAqIEBwYXJhbSB7T2JqZWN0fSBzcmNcbiAqL1xuXG5mdW5jdGlvbiBwcm90b0F1Z21lbnQodGFyZ2V0LCBzcmMpIHtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cbiAgdGFyZ2V0Ll9fcHJvdG9fXyA9IHNyYztcbiAgLyogZXNsaW50LWVuYWJsZSBuby1wcm90byAqL1xufVxuXG4vKipcbiAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBkZWZpbmluZ1xuICogaGlkZGVuIHByb3BlcnRpZXMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHRhcmdldFxuICogQHBhcmFtIHtPYmplY3R9IHByb3RvXG4gKi9cblxuZnVuY3Rpb24gY29weUF1Z21lbnQodGFyZ2V0LCBzcmMsIGtleXMpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgIGRlZih0YXJnZXQsIGtleSwgc3JjW2tleV0pO1xuICB9XG59XG5cbi8qKlxuICogQXR0ZW1wdCB0byBjcmVhdGUgYW4gb2JzZXJ2ZXIgaW5zdGFuY2UgZm9yIGEgdmFsdWUsXG4gKiByZXR1cm5zIHRoZSBuZXcgb2JzZXJ2ZXIgaWYgc3VjY2Vzc2Z1bGx5IG9ic2VydmVkLFxuICogb3IgdGhlIGV4aXN0aW5nIG9ic2VydmVyIGlmIHRoZSB2YWx1ZSBhbHJlYWR5IGhhcyBvbmUuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtWdWV9IFt2bV1cbiAqIEByZXR1cm4ge09ic2VydmVyfHVuZGVmaW5lZH1cbiAqIEBzdGF0aWNcbiAqL1xuXG5mdW5jdGlvbiBvYnNlcnZlKHZhbHVlLCB2bSkge1xuICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG9iO1xuICBpZiAoaGFzT3duKHZhbHVlLCAnX19vYl9fJykgJiYgdmFsdWUuX19vYl9fIGluc3RhbmNlb2YgT2JzZXJ2ZXIpIHtcbiAgICBvYiA9IHZhbHVlLl9fb2JfXztcbiAgfSBlbHNlIGlmIChzaG91bGRDb252ZXJ0ICYmIChpc0FycmF5KHZhbHVlKSB8fCBpc1BsYWluT2JqZWN0KHZhbHVlKSkgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWx1ZSkgJiYgIXZhbHVlLl9pc1Z1ZSkge1xuICAgIG9iID0gbmV3IE9ic2VydmVyKHZhbHVlKTtcbiAgfVxuICBpZiAob2IgJiYgdm0pIHtcbiAgICBvYi5hZGRWbSh2bSk7XG4gIH1cbiAgcmV0dXJuIG9iO1xufVxuXG4vKipcbiAqIERlZmluZSBhIHJlYWN0aXZlIHByb3BlcnR5IG9uIGFuIE9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5cbmZ1bmN0aW9uIGRlZmluZVJlYWN0aXZlKG9iaiwga2V5LCB2YWwpIHtcbiAgdmFyIGRlcCA9IG5ldyBEZXAoKTtcblxuICB2YXIgcHJvcGVydHkgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KTtcbiAgaWYgKHByb3BlcnR5ICYmIHByb3BlcnR5LmNvbmZpZ3VyYWJsZSA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBjYXRlciBmb3IgcHJlLWRlZmluZWQgZ2V0dGVyL3NldHRlcnNcbiAgdmFyIGdldHRlciA9IHByb3BlcnR5ICYmIHByb3BlcnR5LmdldDtcbiAgdmFyIHNldHRlciA9IHByb3BlcnR5ICYmIHByb3BlcnR5LnNldDtcblxuICB2YXIgY2hpbGRPYiA9IG9ic2VydmUodmFsKTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiByZWFjdGl2ZUdldHRlcigpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7XG4gICAgICBpZiAoRGVwLnRhcmdldCkge1xuICAgICAgICBkZXAuZGVwZW5kKCk7XG4gICAgICAgIGlmIChjaGlsZE9iKSB7XG4gICAgICAgICAgY2hpbGRPYi5kZXAuZGVwZW5kKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgZm9yICh2YXIgZSwgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGUgPSB2YWx1ZVtpXTtcbiAgICAgICAgICAgIGUgJiYgZS5fX29iX18gJiYgZS5fX29iX18uZGVwLmRlcGVuZCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiByZWFjdGl2ZVNldHRlcihuZXdWYWwpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7XG4gICAgICBpZiAobmV3VmFsID09PSB2YWx1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoc2V0dGVyKSB7XG4gICAgICAgIHNldHRlci5jYWxsKG9iaiwgbmV3VmFsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbCA9IG5ld1ZhbDtcbiAgICAgIH1cbiAgICAgIGNoaWxkT2IgPSBvYnNlcnZlKG5ld1ZhbCk7XG4gICAgICBkZXAubm90aWZ5KCk7XG4gICAgfVxuICB9KTtcbn1cblxuXG5cbnZhciB1dGlsID0gT2JqZWN0LmZyZWV6ZSh7XG5cdGRlZmluZVJlYWN0aXZlOiBkZWZpbmVSZWFjdGl2ZSxcblx0c2V0OiBzZXQsXG5cdGRlbDogZGVsLFxuXHRoYXNPd246IGhhc093bixcblx0aXNMaXRlcmFsOiBpc0xpdGVyYWwsXG5cdGlzUmVzZXJ2ZWQ6IGlzUmVzZXJ2ZWQsXG5cdF90b1N0cmluZzogX3RvU3RyaW5nLFxuXHR0b051bWJlcjogdG9OdW1iZXIsXG5cdHRvQm9vbGVhbjogdG9Cb29sZWFuLFxuXHRzdHJpcFF1b3Rlczogc3RyaXBRdW90ZXMsXG5cdGNhbWVsaXplOiBjYW1lbGl6ZSxcblx0aHlwaGVuYXRlOiBoeXBoZW5hdGUsXG5cdGNsYXNzaWZ5OiBjbGFzc2lmeSxcblx0YmluZDogYmluZCxcblx0dG9BcnJheTogdG9BcnJheSxcblx0ZXh0ZW5kOiBleHRlbmQsXG5cdGlzT2JqZWN0OiBpc09iamVjdCxcblx0aXNQbGFpbk9iamVjdDogaXNQbGFpbk9iamVjdCxcblx0ZGVmOiBkZWYsXG5cdGRlYm91bmNlOiBfZGVib3VuY2UsXG5cdGluZGV4T2Y6IGluZGV4T2YsXG5cdGNhbmNlbGxhYmxlOiBjYW5jZWxsYWJsZSxcblx0bG9vc2VFcXVhbDogbG9vc2VFcXVhbCxcblx0aXNBcnJheTogaXNBcnJheSxcblx0aGFzUHJvdG86IGhhc1Byb3RvLFxuXHRpbkJyb3dzZXI6IGluQnJvd3Nlcixcblx0ZGV2dG9vbHM6IGRldnRvb2xzLFxuXHRpc0lFOiBpc0lFLFxuXHRpc0lFOTogaXNJRTksXG5cdGlzQW5kcm9pZDogaXNBbmRyb2lkLFxuXHRpc0lvczogaXNJb3MsXG5cdGlvc1ZlcnNpb25NYXRjaDogaW9zVmVyc2lvbk1hdGNoLFxuXHRpb3NWZXJzaW9uOiBpb3NWZXJzaW9uLFxuXHRoYXNNdXRhdGlvbk9ic2VydmVyQnVnOiBoYXNNdXRhdGlvbk9ic2VydmVyQnVnLFxuXHRnZXQgdHJhbnNpdGlvblByb3AgKCkgeyByZXR1cm4gdHJhbnNpdGlvblByb3A7IH0sXG5cdGdldCB0cmFuc2l0aW9uRW5kRXZlbnQgKCkgeyByZXR1cm4gdHJhbnNpdGlvbkVuZEV2ZW50OyB9LFxuXHRnZXQgYW5pbWF0aW9uUHJvcCAoKSB7IHJldHVybiBhbmltYXRpb25Qcm9wOyB9LFxuXHRnZXQgYW5pbWF0aW9uRW5kRXZlbnQgKCkgeyByZXR1cm4gYW5pbWF0aW9uRW5kRXZlbnQ7IH0sXG5cdG5leHRUaWNrOiBuZXh0VGljayxcblx0Z2V0IF9TZXQgKCkgeyByZXR1cm4gX1NldDsgfSxcblx0cXVlcnk6IHF1ZXJ5LFxuXHRpbkRvYzogaW5Eb2MsXG5cdGdldEF0dHI6IGdldEF0dHIsXG5cdGdldEJpbmRBdHRyOiBnZXRCaW5kQXR0cixcblx0aGFzQmluZEF0dHI6IGhhc0JpbmRBdHRyLFxuXHRiZWZvcmU6IGJlZm9yZSxcblx0YWZ0ZXI6IGFmdGVyLFxuXHRyZW1vdmU6IHJlbW92ZSxcblx0cHJlcGVuZDogcHJlcGVuZCxcblx0cmVwbGFjZTogcmVwbGFjZSxcblx0b246IG9uLFxuXHRvZmY6IG9mZixcblx0c2V0Q2xhc3M6IHNldENsYXNzLFxuXHRhZGRDbGFzczogYWRkQ2xhc3MsXG5cdHJlbW92ZUNsYXNzOiByZW1vdmVDbGFzcyxcblx0ZXh0cmFjdENvbnRlbnQ6IGV4dHJhY3RDb250ZW50LFxuXHR0cmltTm9kZTogdHJpbU5vZGUsXG5cdGlzVGVtcGxhdGU6IGlzVGVtcGxhdGUsXG5cdGNyZWF0ZUFuY2hvcjogY3JlYXRlQW5jaG9yLFxuXHRmaW5kUmVmOiBmaW5kUmVmLFxuXHRtYXBOb2RlUmFuZ2U6IG1hcE5vZGVSYW5nZSxcblx0cmVtb3ZlTm9kZVJhbmdlOiByZW1vdmVOb2RlUmFuZ2UsXG5cdGlzRnJhZ21lbnQ6IGlzRnJhZ21lbnQsXG5cdGdldE91dGVySFRNTDogZ2V0T3V0ZXJIVE1MLFxuXHRtZXJnZU9wdGlvbnM6IG1lcmdlT3B0aW9ucyxcblx0cmVzb2x2ZUFzc2V0OiByZXNvbHZlQXNzZXQsXG5cdGNoZWNrQ29tcG9uZW50QXR0cjogY2hlY2tDb21wb25lbnRBdHRyLFxuXHRjb21tb25UYWdSRTogY29tbW9uVGFnUkUsXG5cdHJlc2VydmVkVGFnUkU6IHJlc2VydmVkVGFnUkUsXG5cdGdldCB3YXJuICgpIHsgcmV0dXJuIHdhcm47IH1cbn0pO1xuXG52YXIgdWlkID0gMDtcblxuZnVuY3Rpb24gaW5pdE1peGluIChWdWUpIHtcbiAgLyoqXG4gICAqIFRoZSBtYWluIGluaXQgc2VxdWVuY2UuIFRoaXMgaXMgY2FsbGVkIGZvciBldmVyeVxuICAgKiBpbnN0YW5jZSwgaW5jbHVkaW5nIG9uZXMgdGhhdCBhcmUgY3JlYXRlZCBmcm9tIGV4dGVuZGVkXG4gICAqIGNvbnN0cnVjdG9ycy5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSB0aGlzIG9wdGlvbnMgb2JqZWN0IHNob3VsZCBiZVxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSByZXN1bHQgb2YgbWVyZ2luZyBjbGFzc1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgYW5kIHRoZSBvcHRpb25zIHBhc3NlZFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIHRvIHRoZSBjb25zdHJ1Y3Rvci5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICB0aGlzLiRlbCA9IG51bGw7XG4gICAgdGhpcy4kcGFyZW50ID0gb3B0aW9ucy5wYXJlbnQ7XG4gICAgdGhpcy4kcm9vdCA9IHRoaXMuJHBhcmVudCA/IHRoaXMuJHBhcmVudC4kcm9vdCA6IHRoaXM7XG4gICAgdGhpcy4kY2hpbGRyZW4gPSBbXTtcbiAgICB0aGlzLiRyZWZzID0ge307IC8vIGNoaWxkIHZtIHJlZmVyZW5jZXNcbiAgICB0aGlzLiRlbHMgPSB7fTsgLy8gZWxlbWVudCByZWZlcmVuY2VzXG4gICAgdGhpcy5fd2F0Y2hlcnMgPSBbXTsgLy8gYWxsIHdhdGNoZXJzIGFzIGFuIGFycmF5XG4gICAgdGhpcy5fZGlyZWN0aXZlcyA9IFtdOyAvLyBhbGwgZGlyZWN0aXZlc1xuXG4gICAgLy8gYSB1aWRcbiAgICB0aGlzLl91aWQgPSB1aWQrKztcblxuICAgIC8vIGEgZmxhZyB0byBhdm9pZCB0aGlzIGJlaW5nIG9ic2VydmVkXG4gICAgdGhpcy5faXNWdWUgPSB0cnVlO1xuXG4gICAgLy8gZXZlbnRzIGJvb2trZWVwaW5nXG4gICAgdGhpcy5fZXZlbnRzID0ge307IC8vIHJlZ2lzdGVyZWQgY2FsbGJhY2tzXG4gICAgdGhpcy5fZXZlbnRzQ291bnQgPSB7fTsgLy8gZm9yICRicm9hZGNhc3Qgb3B0aW1pemF0aW9uXG5cbiAgICAvLyBmcmFnbWVudCBpbnN0YW5jZSBwcm9wZXJ0aWVzXG4gICAgdGhpcy5faXNGcmFnbWVudCA9IGZhbHNlO1xuICAgIHRoaXMuX2ZyYWdtZW50ID0gLy8gQHR5cGUge0RvY3VtZW50RnJhZ21lbnR9XG4gICAgdGhpcy5fZnJhZ21lbnRTdGFydCA9IC8vIEB0eXBlIHtUZXh0fENvbW1lbnR9XG4gICAgdGhpcy5fZnJhZ21lbnRFbmQgPSBudWxsOyAvLyBAdHlwZSB7VGV4dHxDb21tZW50fVxuXG4gICAgLy8gbGlmZWN5Y2xlIHN0YXRlXG4gICAgdGhpcy5faXNDb21waWxlZCA9IHRoaXMuX2lzRGVzdHJveWVkID0gdGhpcy5faXNSZWFkeSA9IHRoaXMuX2lzQXR0YWNoZWQgPSB0aGlzLl9pc0JlaW5nRGVzdHJveWVkID0gdGhpcy5fdkZvclJlbW92aW5nID0gZmFsc2U7XG4gICAgdGhpcy5fdW5saW5rRm4gPSBudWxsO1xuXG4gICAgLy8gY29udGV4dDpcbiAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBjb250ZXh0XG4gICAgLy8gd2lsbCBiZSB0aGUgY29tbW9uIHBhcmVudCB2bSBvZiB0aGlzIGluc3RhbmNlXG4gICAgLy8gYW5kIGl0cyBob3N0LlxuICAgIHRoaXMuX2NvbnRleHQgPSBvcHRpb25zLl9jb250ZXh0IHx8IHRoaXMuJHBhcmVudDtcblxuICAgIC8vIHNjb3BlOlxuICAgIC8vIGlmIHRoaXMgaXMgaW5zaWRlIGFuIGlubGluZSB2LWZvciwgdGhlIHNjb3BlXG4gICAgLy8gd2lsbCBiZSB0aGUgaW50ZXJtZWRpYXRlIHNjb3BlIGNyZWF0ZWQgZm9yIHRoaXNcbiAgICAvLyByZXBlYXQgZnJhZ21lbnQuIHRoaXMgaXMgdXNlZCBmb3IgbGlua2luZyBwcm9wc1xuICAgIC8vIGFuZCBjb250YWluZXIgZGlyZWN0aXZlcy5cbiAgICB0aGlzLl9zY29wZSA9IG9wdGlvbnMuX3Njb3BlO1xuXG4gICAgLy8gZnJhZ21lbnQ6XG4gICAgLy8gaWYgdGhpcyBpbnN0YW5jZSBpcyBjb21waWxlZCBpbnNpZGUgYSBGcmFnbWVudCwgaXRcbiAgICAvLyBuZWVkcyB0byByZWlnc3RlciBpdHNlbGYgYXMgYSBjaGlsZCBvZiB0aGF0IGZyYWdtZW50XG4gICAgLy8gZm9yIGF0dGFjaC9kZXRhY2ggdG8gd29yayBwcm9wZXJseS5cbiAgICB0aGlzLl9mcmFnID0gb3B0aW9ucy5fZnJhZztcbiAgICBpZiAodGhpcy5fZnJhZykge1xuICAgICAgdGhpcy5fZnJhZy5jaGlsZHJlbi5wdXNoKHRoaXMpO1xuICAgIH1cblxuICAgIC8vIHB1c2ggc2VsZiBpbnRvIHBhcmVudCAvIHRyYW5zY2x1c2lvbiBob3N0XG4gICAgaWYgKHRoaXMuJHBhcmVudCkge1xuICAgICAgdGhpcy4kcGFyZW50LiRjaGlsZHJlbi5wdXNoKHRoaXMpO1xuICAgIH1cblxuICAgIC8vIG1lcmdlIG9wdGlvbnMuXG4gICAgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnMgPSBtZXJnZU9wdGlvbnModGhpcy5jb25zdHJ1Y3Rvci5vcHRpb25zLCBvcHRpb25zLCB0aGlzKTtcblxuICAgIC8vIHNldCByZWZcbiAgICB0aGlzLl91cGRhdGVSZWYoKTtcblxuICAgIC8vIGluaXRpYWxpemUgZGF0YSBhcyBlbXB0eSBvYmplY3QuXG4gICAgLy8gaXQgd2lsbCBiZSBmaWxsZWQgdXAgaW4gX2luaXREYXRhKCkuXG4gICAgdGhpcy5fZGF0YSA9IHt9O1xuXG4gICAgLy8gY2FsbCBpbml0IGhvb2tcbiAgICB0aGlzLl9jYWxsSG9vaygnaW5pdCcpO1xuXG4gICAgLy8gaW5pdGlhbGl6ZSBkYXRhIG9ic2VydmF0aW9uIGFuZCBzY29wZSBpbmhlcml0YW5jZS5cbiAgICB0aGlzLl9pbml0U3RhdGUoKTtcblxuICAgIC8vIHNldHVwIGV2ZW50IHN5c3RlbSBhbmQgb3B0aW9uIGV2ZW50cy5cbiAgICB0aGlzLl9pbml0RXZlbnRzKCk7XG5cbiAgICAvLyBjYWxsIGNyZWF0ZWQgaG9va1xuICAgIHRoaXMuX2NhbGxIb29rKCdjcmVhdGVkJyk7XG5cbiAgICAvLyBpZiBgZWxgIG9wdGlvbiBpcyBwYXNzZWQsIHN0YXJ0IGNvbXBpbGF0aW9uLlxuICAgIGlmIChvcHRpb25zLmVsKSB7XG4gICAgICB0aGlzLiRtb3VudChvcHRpb25zLmVsKTtcbiAgICB9XG4gIH07XG59XG5cbnZhciBwYXRoQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cbi8vIGFjdGlvbnNcbnZhciBBUFBFTkQgPSAwO1xudmFyIFBVU0ggPSAxO1xudmFyIElOQ19TVUJfUEFUSF9ERVBUSCA9IDI7XG52YXIgUFVTSF9TVUJfUEFUSCA9IDM7XG5cbi8vIHN0YXRlc1xudmFyIEJFRk9SRV9QQVRIID0gMDtcbnZhciBJTl9QQVRIID0gMTtcbnZhciBCRUZPUkVfSURFTlQgPSAyO1xudmFyIElOX0lERU5UID0gMztcbnZhciBJTl9TVUJfUEFUSCA9IDQ7XG52YXIgSU5fU0lOR0xFX1FVT1RFID0gNTtcbnZhciBJTl9ET1VCTEVfUVVPVEUgPSA2O1xudmFyIEFGVEVSX1BBVEggPSA3O1xudmFyIEVSUk9SID0gODtcblxudmFyIHBhdGhTdGF0ZU1hY2hpbmUgPSBbXTtcblxucGF0aFN0YXRlTWFjaGluZVtCRUZPUkVfUEFUSF0gPSB7XG4gICd3cyc6IFtCRUZPUkVfUEFUSF0sXG4gICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcbiAgJ1snOiBbSU5fU1VCX1BBVEhdLFxuICAnZW9mJzogW0FGVEVSX1BBVEhdXG59O1xuXG5wYXRoU3RhdGVNYWNoaW5lW0lOX1BBVEhdID0ge1xuICAnd3MnOiBbSU5fUEFUSF0sXG4gICcuJzogW0JFRk9SRV9JREVOVF0sXG4gICdbJzogW0lOX1NVQl9QQVRIXSxcbiAgJ2VvZic6IFtBRlRFUl9QQVRIXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtCRUZPUkVfSURFTlRdID0ge1xuICAnd3MnOiBbQkVGT1JFX0lERU5UXSxcbiAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdXG59O1xuXG5wYXRoU3RhdGVNYWNoaW5lW0lOX0lERU5UXSA9IHtcbiAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnMCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcbiAgJ251bWJlcic6IFtJTl9JREVOVCwgQVBQRU5EXSxcbiAgJ3dzJzogW0lOX1BBVEgsIFBVU0hdLFxuICAnLic6IFtCRUZPUkVfSURFTlQsIFBVU0hdLFxuICAnWyc6IFtJTl9TVUJfUEFUSCwgUFVTSF0sXG4gICdlb2YnOiBbQUZURVJfUEFUSCwgUFVTSF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fU1VCX1BBVEhdID0ge1xuICBcIidcIjogW0lOX1NJTkdMRV9RVU9URSwgQVBQRU5EXSxcbiAgJ1wiJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5EXSxcbiAgJ1snOiBbSU5fU1VCX1BBVEgsIElOQ19TVUJfUEFUSF9ERVBUSF0sXG4gICddJzogW0lOX1BBVEgsIFBVU0hfU1VCX1BBVEhdLFxuICAnZW9mJzogRVJST1IsXG4gICdlbHNlJzogW0lOX1NVQl9QQVRILCBBUFBFTkRdXG59O1xuXG5wYXRoU3RhdGVNYWNoaW5lW0lOX1NJTkdMRV9RVU9URV0gPSB7XG4gIFwiJ1wiOiBbSU5fU1VCX1BBVEgsIEFQUEVORF0sXG4gICdlb2YnOiBFUlJPUixcbiAgJ2Vsc2UnOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkRdXG59O1xuXG5wYXRoU3RhdGVNYWNoaW5lW0lOX0RPVUJMRV9RVU9URV0gPSB7XG4gICdcIic6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXSxcbiAgJ2VvZic6IEVSUk9SLFxuICAnZWxzZSc6IFtJTl9ET1VCTEVfUVVPVEUsIEFQUEVORF1cbn07XG5cbi8qKlxuICogRGV0ZXJtaW5lIHRoZSB0eXBlIG9mIGEgY2hhcmFjdGVyIGluIGEga2V5cGF0aC5cbiAqXG4gKiBAcGFyYW0ge0NoYXJ9IGNoXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHR5cGVcbiAqL1xuXG5mdW5jdGlvbiBnZXRQYXRoQ2hhclR5cGUoY2gpIHtcbiAgaWYgKGNoID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gJ2VvZic7XG4gIH1cblxuICB2YXIgY29kZSA9IGNoLmNoYXJDb2RlQXQoMCk7XG5cbiAgc3dpdGNoIChjb2RlKSB7XG4gICAgY2FzZSAweDVCOiAvLyBbXG4gICAgY2FzZSAweDVEOiAvLyBdXG4gICAgY2FzZSAweDJFOiAvLyAuXG4gICAgY2FzZSAweDIyOiAvLyBcIlxuICAgIGNhc2UgMHgyNzogLy8gJ1xuICAgIGNhc2UgMHgzMDpcbiAgICAgIC8vIDBcbiAgICAgIHJldHVybiBjaDtcblxuICAgIGNhc2UgMHg1RjogLy8gX1xuICAgIGNhc2UgMHgyNDpcbiAgICAgIC8vICRcbiAgICAgIHJldHVybiAnaWRlbnQnO1xuXG4gICAgY2FzZSAweDIwOiAvLyBTcGFjZVxuICAgIGNhc2UgMHgwOTogLy8gVGFiXG4gICAgY2FzZSAweDBBOiAvLyBOZXdsaW5lXG4gICAgY2FzZSAweDBEOiAvLyBSZXR1cm5cbiAgICBjYXNlIDB4QTA6IC8vIE5vLWJyZWFrIHNwYWNlXG4gICAgY2FzZSAweEZFRkY6IC8vIEJ5dGUgT3JkZXIgTWFya1xuICAgIGNhc2UgMHgyMDI4OiAvLyBMaW5lIFNlcGFyYXRvclxuICAgIGNhc2UgMHgyMDI5OlxuICAgICAgLy8gUGFyYWdyYXBoIFNlcGFyYXRvclxuICAgICAgcmV0dXJuICd3cyc7XG4gIH1cblxuICAvLyBhLXosIEEtWlxuICBpZiAoY29kZSA+PSAweDYxICYmIGNvZGUgPD0gMHg3QSB8fCBjb2RlID49IDB4NDEgJiYgY29kZSA8PSAweDVBKSB7XG4gICAgcmV0dXJuICdpZGVudCc7XG4gIH1cblxuICAvLyAxLTlcbiAgaWYgKGNvZGUgPj0gMHgzMSAmJiBjb2RlIDw9IDB4MzkpIHtcbiAgICByZXR1cm4gJ251bWJlcic7XG4gIH1cblxuICByZXR1cm4gJ2Vsc2UnO1xufVxuXG4vKipcbiAqIEZvcm1hdCBhIHN1YlBhdGgsIHJldHVybiBpdHMgcGxhaW4gZm9ybSBpZiBpdCBpc1xuICogYSBsaXRlcmFsIHN0cmluZyBvciBudW1iZXIuIE90aGVyd2lzZSBwcmVwZW5kIHRoZVxuICogZHluYW1pYyBpbmRpY2F0b3IgKCopLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0U3ViUGF0aChwYXRoKSB7XG4gIHZhciB0cmltbWVkID0gcGF0aC50cmltKCk7XG4gIC8vIGludmFsaWQgbGVhZGluZyAwXG4gIGlmIChwYXRoLmNoYXJBdCgwKSA9PT0gJzAnICYmIGlzTmFOKHBhdGgpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBpc0xpdGVyYWwodHJpbW1lZCkgPyBzdHJpcFF1b3Rlcyh0cmltbWVkKSA6ICcqJyArIHRyaW1tZWQ7XG59XG5cbi8qKlxuICogUGFyc2UgYSBzdHJpbmcgcGF0aCBpbnRvIGFuIGFycmF5IG9mIHNlZ21lbnRzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEByZXR1cm4ge0FycmF5fHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZShwYXRoKSB7XG4gIHZhciBrZXlzID0gW107XG4gIHZhciBpbmRleCA9IC0xO1xuICB2YXIgbW9kZSA9IEJFRk9SRV9QQVRIO1xuICB2YXIgc3ViUGF0aERlcHRoID0gMDtcbiAgdmFyIGMsIG5ld0NoYXIsIGtleSwgdHlwZSwgdHJhbnNpdGlvbiwgYWN0aW9uLCB0eXBlTWFwO1xuXG4gIHZhciBhY3Rpb25zID0gW107XG5cbiAgYWN0aW9uc1tQVVNIXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoa2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAga2V5ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfTtcblxuICBhY3Rpb25zW0FQUEVORF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBrZXkgPSBuZXdDaGFyO1xuICAgIH0gZWxzZSB7XG4gICAgICBrZXkgKz0gbmV3Q2hhcjtcbiAgICB9XG4gIH07XG5cbiAgYWN0aW9uc1tJTkNfU1VCX1BBVEhfREVQVEhdID0gZnVuY3Rpb24gKCkge1xuICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xuICAgIHN1YlBhdGhEZXB0aCsrO1xuICB9O1xuXG4gIGFjdGlvbnNbUFVTSF9TVUJfUEFUSF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHN1YlBhdGhEZXB0aCA+IDApIHtcbiAgICAgIHN1YlBhdGhEZXB0aC0tO1xuICAgICAgbW9kZSA9IElOX1NVQl9QQVRIO1xuICAgICAgYWN0aW9uc1tBUFBFTkRdKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1YlBhdGhEZXB0aCA9IDA7XG4gICAgICBrZXkgPSBmb3JtYXRTdWJQYXRoKGtleSk7XG4gICAgICBpZiAoa2V5ID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3Rpb25zW1BVU0hdKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIG1heWJlVW5lc2NhcGVRdW90ZSgpIHtcbiAgICB2YXIgbmV4dENoYXIgPSBwYXRoW2luZGV4ICsgMV07XG4gICAgaWYgKG1vZGUgPT09IElOX1NJTkdMRV9RVU9URSAmJiBuZXh0Q2hhciA9PT0gXCInXCIgfHwgbW9kZSA9PT0gSU5fRE9VQkxFX1FVT1RFICYmIG5leHRDaGFyID09PSAnXCInKSB7XG4gICAgICBpbmRleCsrO1xuICAgICAgbmV3Q2hhciA9ICdcXFxcJyArIG5leHRDaGFyO1xuICAgICAgYWN0aW9uc1tBUFBFTkRdKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICB3aGlsZSAobW9kZSAhPSBudWxsKSB7XG4gICAgaW5kZXgrKztcbiAgICBjID0gcGF0aFtpbmRleF07XG5cbiAgICBpZiAoYyA9PT0gJ1xcXFwnICYmIG1heWJlVW5lc2NhcGVRdW90ZSgpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICB0eXBlID0gZ2V0UGF0aENoYXJUeXBlKGMpO1xuICAgIHR5cGVNYXAgPSBwYXRoU3RhdGVNYWNoaW5lW21vZGVdO1xuICAgIHRyYW5zaXRpb24gPSB0eXBlTWFwW3R5cGVdIHx8IHR5cGVNYXBbJ2Vsc2UnXSB8fCBFUlJPUjtcblxuICAgIGlmICh0cmFuc2l0aW9uID09PSBFUlJPUikge1xuICAgICAgcmV0dXJuOyAvLyBwYXJzZSBlcnJvclxuICAgIH1cblxuICAgIG1vZGUgPSB0cmFuc2l0aW9uWzBdO1xuICAgIGFjdGlvbiA9IGFjdGlvbnNbdHJhbnNpdGlvblsxXV07XG4gICAgaWYgKGFjdGlvbikge1xuICAgICAgbmV3Q2hhciA9IHRyYW5zaXRpb25bMl07XG4gICAgICBuZXdDaGFyID0gbmV3Q2hhciA9PT0gdW5kZWZpbmVkID8gYyA6IG5ld0NoYXI7XG4gICAgICBpZiAoYWN0aW9uKCkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobW9kZSA9PT0gQUZURVJfUEFUSCkge1xuICAgICAga2V5cy5yYXcgPSBwYXRoO1xuICAgICAgcmV0dXJuIGtleXM7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRXh0ZXJuYWwgcGFyc2UgdGhhdCBjaGVjayBmb3IgYSBjYWNoZSBoaXQgZmlyc3RcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICogQHJldHVybiB7QXJyYXl8dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlUGF0aChwYXRoKSB7XG4gIHZhciBoaXQgPSBwYXRoQ2FjaGUuZ2V0KHBhdGgpO1xuICBpZiAoIWhpdCkge1xuICAgIGhpdCA9IHBhcnNlKHBhdGgpO1xuICAgIGlmIChoaXQpIHtcbiAgICAgIHBhdGhDYWNoZS5wdXQocGF0aCwgaGl0KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGhpdDtcbn1cblxuLyoqXG4gKiBHZXQgZnJvbSBhbiBvYmplY3QgZnJvbSBhIHBhdGggc3RyaW5nXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqL1xuXG5mdW5jdGlvbiBnZXRQYXRoKG9iaiwgcGF0aCkge1xuICByZXR1cm4gcGFyc2VFeHByZXNzaW9uKHBhdGgpLmdldChvYmopO1xufVxuXG4vKipcbiAqIFdhcm4gYWdhaW5zdCBzZXR0aW5nIG5vbi1leGlzdGVudCByb290IHBhdGggb24gYSB2bS5cbiAqL1xuXG52YXIgd2Fybk5vbkV4aXN0ZW50O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgd2Fybk5vbkV4aXN0ZW50ID0gZnVuY3Rpb24gKHBhdGgsIHZtKSB7XG4gICAgd2FybignWW91IGFyZSBzZXR0aW5nIGEgbm9uLWV4aXN0ZW50IHBhdGggXCInICsgcGF0aC5yYXcgKyAnXCIgJyArICdvbiBhIHZtIGluc3RhbmNlLiBDb25zaWRlciBwcmUtaW5pdGlhbGl6aW5nIHRoZSBwcm9wZXJ0eSAnICsgJ3dpdGggdGhlIFwiZGF0YVwiIG9wdGlvbiBmb3IgbW9yZSByZWxpYWJsZSByZWFjdGl2aXR5ICcgKyAnYW5kIGJldHRlciBwZXJmb3JtYW5jZS4nLCB2bSk7XG4gIH07XG59XG5cbi8qKlxuICogU2V0IG9uIGFuIG9iamVjdCBmcm9tIGEgcGF0aFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nIHwgQXJyYXl9IHBhdGhcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuZnVuY3Rpb24gc2V0UGF0aChvYmosIHBhdGgsIHZhbCkge1xuICB2YXIgb3JpZ2luYWwgPSBvYmo7XG4gIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcbiAgICBwYXRoID0gcGFyc2UocGF0aCk7XG4gIH1cbiAgaWYgKCFwYXRoIHx8ICFpc09iamVjdChvYmopKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBsYXN0LCBrZXk7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gcGF0aC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBsYXN0ID0gb2JqO1xuICAgIGtleSA9IHBhdGhbaV07XG4gICAgaWYgKGtleS5jaGFyQXQoMCkgPT09ICcqJykge1xuICAgICAga2V5ID0gcGFyc2VFeHByZXNzaW9uKGtleS5zbGljZSgxKSkuZ2V0LmNhbGwob3JpZ2luYWwsIG9yaWdpbmFsKTtcbiAgICB9XG4gICAgaWYgKGkgPCBsIC0gMSkge1xuICAgICAgb2JqID0gb2JqW2tleV07XG4gICAgICBpZiAoIWlzT2JqZWN0KG9iaikpIHtcbiAgICAgICAgb2JqID0ge307XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGxhc3QuX2lzVnVlKSB7XG4gICAgICAgICAgd2Fybk5vbkV4aXN0ZW50KHBhdGgsIGxhc3QpO1xuICAgICAgICB9XG4gICAgICAgIHNldChsYXN0LCBrZXksIG9iaik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpc0FycmF5KG9iaikpIHtcbiAgICAgICAgb2JqLiRzZXQoa2V5LCB2YWwpO1xuICAgICAgfSBlbHNlIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgICAgIG9ialtrZXldID0gdmFsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgb2JqLl9pc1Z1ZSkge1xuICAgICAgICAgIHdhcm5Ob25FeGlzdGVudChwYXRoLCBvYmopO1xuICAgICAgICB9XG4gICAgICAgIHNldChvYmosIGtleSwgdmFsKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbnZhciBwYXRoID0gT2JqZWN0LmZyZWV6ZSh7XG4gIHBhcnNlUGF0aDogcGFyc2VQYXRoLFxuICBnZXRQYXRoOiBnZXRQYXRoLFxuICBzZXRQYXRoOiBzZXRQYXRoXG59KTtcblxudmFyIGV4cHJlc3Npb25DYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblxudmFyIGFsbG93ZWRLZXl3b3JkcyA9ICdNYXRoLERhdGUsdGhpcyx0cnVlLGZhbHNlLG51bGwsdW5kZWZpbmVkLEluZmluaXR5LE5hTiwnICsgJ2lzTmFOLGlzRmluaXRlLGRlY29kZVVSSSxkZWNvZGVVUklDb21wb25lbnQsZW5jb2RlVVJJLCcgKyAnZW5jb2RlVVJJQ29tcG9uZW50LHBhcnNlSW50LHBhcnNlRmxvYXQnO1xudmFyIGFsbG93ZWRLZXl3b3Jkc1JFID0gbmV3IFJlZ0V4cCgnXignICsgYWxsb3dlZEtleXdvcmRzLnJlcGxhY2UoLywvZywgJ1xcXFxifCcpICsgJ1xcXFxiKScpO1xuXG4vLyBrZXl3b3JkcyB0aGF0IGRvbid0IG1ha2Ugc2Vuc2UgaW5zaWRlIGV4cHJlc3Npb25zXG52YXIgaW1wcm9wZXJLZXl3b3JkcyA9ICdicmVhayxjYXNlLGNsYXNzLGNhdGNoLGNvbnN0LGNvbnRpbnVlLGRlYnVnZ2VyLGRlZmF1bHQsJyArICdkZWxldGUsZG8sZWxzZSxleHBvcnQsZXh0ZW5kcyxmaW5hbGx5LGZvcixmdW5jdGlvbixpZiwnICsgJ2ltcG9ydCxpbixpbnN0YW5jZW9mLGxldCxyZXR1cm4sc3VwZXIsc3dpdGNoLHRocm93LHRyeSwnICsgJ3Zhcix3aGlsZSx3aXRoLHlpZWxkLGVudW0sYXdhaXQsaW1wbGVtZW50cyxwYWNrYWdlLCcgKyAncHJvdGVjdGVkLHN0YXRpYyxpbnRlcmZhY2UscHJpdmF0ZSxwdWJsaWMnO1xudmFyIGltcHJvcGVyS2V5d29yZHNSRSA9IG5ldyBSZWdFeHAoJ14oJyArIGltcHJvcGVyS2V5d29yZHMucmVwbGFjZSgvLC9nLCAnXFxcXGJ8JykgKyAnXFxcXGIpJyk7XG5cbnZhciB3c1JFID0gL1xccy9nO1xudmFyIG5ld2xpbmVSRSA9IC9cXG4vZztcbnZhciBzYXZlUkUgPSAvW1xceyxdXFxzKltcXHdcXCRfXStcXHMqOnwoJyg/OlteJ1xcXFxdfFxcXFwuKSonfFwiKD86W15cIlxcXFxdfFxcXFwuKSpcInxgKD86W15gXFxcXF18XFxcXC4pKlxcJFxce3xcXH0oPzpbXmBcXFxcXXxcXFxcLikqYHxgKD86W15gXFxcXF18XFxcXC4pKmApfG5ldyB8dHlwZW9mIHx2b2lkIC9nO1xudmFyIHJlc3RvcmVSRSA9IC9cIihcXGQrKVwiL2c7XG52YXIgcGF0aFRlc3RSRSA9IC9eW0EtWmEtel8kXVtcXHckXSooPzpcXC5bQS1aYS16XyRdW1xcdyRdKnxcXFsnLio/J1xcXXxcXFtcIi4qP1wiXFxdfFxcW1xcZCtcXF18XFxbW0EtWmEtel8kXVtcXHckXSpcXF0pKiQvO1xudmFyIGlkZW50UkUgPSAvW15cXHckXFwuXSg/OltBLVphLXpfJF1bXFx3JF0qKS9nO1xudmFyIGxpdGVyYWxWYWx1ZVJFJDEgPSAvXig/OnRydWV8ZmFsc2V8bnVsbHx1bmRlZmluZWR8SW5maW5pdHl8TmFOKSQvO1xuXG5mdW5jdGlvbiBub29wKCkge31cblxuLyoqXG4gKiBTYXZlIC8gUmV3cml0ZSAvIFJlc3RvcmVcbiAqXG4gKiBXaGVuIHJld3JpdGluZyBwYXRocyBmb3VuZCBpbiBhbiBleHByZXNzaW9uLCBpdCBpc1xuICogcG9zc2libGUgZm9yIHRoZSBzYW1lIGxldHRlciBzZXF1ZW5jZXMgdG8gYmUgZm91bmQgaW5cbiAqIHN0cmluZ3MgYW5kIE9iamVjdCBsaXRlcmFsIHByb3BlcnR5IGtleXMuIFRoZXJlZm9yZSB3ZVxuICogcmVtb3ZlIGFuZCBzdG9yZSB0aGVzZSBwYXJ0cyBpbiBhIHRlbXBvcmFyeSBhcnJheSwgYW5kXG4gKiByZXN0b3JlIHRoZW0gYWZ0ZXIgdGhlIHBhdGggcmV3cml0ZS5cbiAqL1xuXG52YXIgc2F2ZWQgPSBbXTtcblxuLyoqXG4gKiBTYXZlIHJlcGxhY2VyXG4gKlxuICogVGhlIHNhdmUgcmVnZXggY2FuIG1hdGNoIHR3byBwb3NzaWJsZSBjYXNlczpcbiAqIDEuIEFuIG9wZW5pbmcgb2JqZWN0IGxpdGVyYWxcbiAqIDIuIEEgc3RyaW5nXG4gKiBJZiBtYXRjaGVkIGFzIGEgcGxhaW4gc3RyaW5nLCB3ZSBuZWVkIHRvIGVzY2FwZSBpdHNcbiAqIG5ld2xpbmVzLCBzaW5jZSB0aGUgc3RyaW5nIG5lZWRzIHRvIGJlIHByZXNlcnZlZCB3aGVuXG4gKiBnZW5lcmF0aW5nIHRoZSBmdW5jdGlvbiBib2R5LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBpc1N0cmluZyAtIHN0ciBpZiBtYXRjaGVkIGFzIGEgc3RyaW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd9IC0gcGxhY2Vob2xkZXIgd2l0aCBpbmRleFxuICovXG5cbmZ1bmN0aW9uIHNhdmUoc3RyLCBpc1N0cmluZykge1xuICB2YXIgaSA9IHNhdmVkLmxlbmd0aDtcbiAgc2F2ZWRbaV0gPSBpc1N0cmluZyA/IHN0ci5yZXBsYWNlKG5ld2xpbmVSRSwgJ1xcXFxuJykgOiBzdHI7XG4gIHJldHVybiAnXCInICsgaSArICdcIic7XG59XG5cbi8qKlxuICogUGF0aCByZXdyaXRlIHJlcGxhY2VyXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHJhd1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHJld3JpdGUocmF3KSB7XG4gIHZhciBjID0gcmF3LmNoYXJBdCgwKTtcbiAgdmFyIHBhdGggPSByYXcuc2xpY2UoMSk7XG4gIGlmIChhbGxvd2VkS2V5d29yZHNSRS50ZXN0KHBhdGgpKSB7XG4gICAgcmV0dXJuIHJhdztcbiAgfSBlbHNlIHtcbiAgICBwYXRoID0gcGF0aC5pbmRleE9mKCdcIicpID4gLTEgPyBwYXRoLnJlcGxhY2UocmVzdG9yZVJFLCByZXN0b3JlKSA6IHBhdGg7XG4gICAgcmV0dXJuIGMgKyAnc2NvcGUuJyArIHBhdGg7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXN0b3JlIHJlcGxhY2VyXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtTdHJpbmd9IGkgLSBtYXRjaGVkIHNhdmUgaW5kZXhcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiByZXN0b3JlKHN0ciwgaSkge1xuICByZXR1cm4gc2F2ZWRbaV07XG59XG5cbi8qKlxuICogUmV3cml0ZSBhbiBleHByZXNzaW9uLCBwcmVmaXhpbmcgYWxsIHBhdGggYWNjZXNzb3JzIHdpdGhcbiAqIGBzY29wZS5gIGFuZCBnZW5lcmF0ZSBnZXR0ZXIvc2V0dGVyIGZ1bmN0aW9ucy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlR2V0dGVyKGV4cCkge1xuICBpZiAoaW1wcm9wZXJLZXl3b3Jkc1JFLnRlc3QoZXhwKSkge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQXZvaWQgdXNpbmcgcmVzZXJ2ZWQga2V5d29yZHMgaW4gZXhwcmVzc2lvbjogJyArIGV4cCk7XG4gIH1cbiAgLy8gcmVzZXQgc3RhdGVcbiAgc2F2ZWQubGVuZ3RoID0gMDtcbiAgLy8gc2F2ZSBzdHJpbmdzIGFuZCBvYmplY3QgbGl0ZXJhbCBrZXlzXG4gIHZhciBib2R5ID0gZXhwLnJlcGxhY2Uoc2F2ZVJFLCBzYXZlKS5yZXBsYWNlKHdzUkUsICcnKTtcbiAgLy8gcmV3cml0ZSBhbGwgcGF0aHNcbiAgLy8gcGFkIDEgc3BhY2UgaGVyZSBiZWNhdXNlIHRoZSByZWdleCBtYXRjaGVzIDEgZXh0cmEgY2hhclxuICBib2R5ID0gKCcgJyArIGJvZHkpLnJlcGxhY2UoaWRlbnRSRSwgcmV3cml0ZSkucmVwbGFjZShyZXN0b3JlUkUsIHJlc3RvcmUpO1xuICByZXR1cm4gbWFrZUdldHRlckZuKGJvZHkpO1xufVxuXG4vKipcbiAqIEJ1aWxkIGEgZ2V0dGVyIGZ1bmN0aW9uLiBSZXF1aXJlcyBldmFsLlxuICpcbiAqIFdlIGlzb2xhdGUgdGhlIHRyeS9jYXRjaCBzbyBpdCBkb2Vzbid0IGFmZmVjdCB0aGVcbiAqIG9wdGltaXphdGlvbiBvZiB0aGUgcGFyc2UgZnVuY3Rpb24gd2hlbiBpdCBpcyBub3QgY2FsbGVkLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBib2R5XG4gKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gbWFrZUdldHRlckZuKGJvZHkpIHtcbiAgdHJ5IHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1uZXctZnVuYyAqL1xuICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ3Njb3BlJywgJ3JldHVybiAnICsgYm9keSArICc7Jyk7XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1uZXctZnVuYyAqL1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKGUudG9TdHJpbmcoKS5tYXRjaCgvdW5zYWZlLWV2YWx8Q1NQLykpIHtcbiAgICAgICAgd2FybignSXQgc2VlbXMgeW91IGFyZSB1c2luZyB0aGUgZGVmYXVsdCBidWlsZCBvZiBWdWUuanMgaW4gYW4gZW52aXJvbm1lbnQgJyArICd3aXRoIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IHRoYXQgcHJvaGliaXRzIHVuc2FmZS1ldmFsLiAnICsgJ1VzZSB0aGUgQ1NQLWNvbXBsaWFudCBidWlsZCBpbnN0ZWFkOiAnICsgJ2h0dHA6Ly92dWVqcy5vcmcvZ3VpZGUvaW5zdGFsbGF0aW9uLmh0bWwjQ1NQLWNvbXBsaWFudC1idWlsZCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2FybignSW52YWxpZCBleHByZXNzaW9uLiAnICsgJ0dlbmVyYXRlZCBmdW5jdGlvbiBib2R5OiAnICsgYm9keSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBub29wO1xuICB9XG59XG5cbi8qKlxuICogQ29tcGlsZSBhIHNldHRlciBmdW5jdGlvbiBmb3IgdGhlIGV4cHJlc3Npb24uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVTZXR0ZXIoZXhwKSB7XG4gIHZhciBwYXRoID0gcGFyc2VQYXRoKGV4cCk7XG4gIGlmIChwYXRoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgdmFsKSB7XG4gICAgICBzZXRQYXRoKHNjb3BlLCBwYXRoLCB2YWwpO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHNldHRlciBleHByZXNzaW9uOiAnICsgZXhwKTtcbiAgfVxufVxuXG4vKipcbiAqIFBhcnNlIGFuIGV4cHJlc3Npb24gaW50byByZS13cml0dGVuIGdldHRlci9zZXR0ZXJzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gbmVlZFNldFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VFeHByZXNzaW9uKGV4cCwgbmVlZFNldCkge1xuICBleHAgPSBleHAudHJpbSgpO1xuICAvLyB0cnkgY2FjaGVcbiAgdmFyIGhpdCA9IGV4cHJlc3Npb25DYWNoZS5nZXQoZXhwKTtcbiAgaWYgKGhpdCkge1xuICAgIGlmIChuZWVkU2V0ICYmICFoaXQuc2V0KSB7XG4gICAgICBoaXQuc2V0ID0gY29tcGlsZVNldHRlcihoaXQuZXhwKTtcbiAgICB9XG4gICAgcmV0dXJuIGhpdDtcbiAgfVxuICB2YXIgcmVzID0geyBleHA6IGV4cCB9O1xuICByZXMuZ2V0ID0gaXNTaW1wbGVQYXRoKGV4cCkgJiYgZXhwLmluZGV4T2YoJ1snKSA8IDBcbiAgLy8gb3B0aW1pemVkIHN1cGVyIHNpbXBsZSBnZXR0ZXJcbiAgPyBtYWtlR2V0dGVyRm4oJ3Njb3BlLicgKyBleHApXG4gIC8vIGR5bmFtaWMgZ2V0dGVyXG4gIDogY29tcGlsZUdldHRlcihleHApO1xuICBpZiAobmVlZFNldCkge1xuICAgIHJlcy5zZXQgPSBjb21waWxlU2V0dGVyKGV4cCk7XG4gIH1cbiAgZXhwcmVzc2lvbkNhY2hlLnB1dChleHAsIHJlcyk7XG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZXhwcmVzc2lvbiBpcyBhIHNpbXBsZSBwYXRoLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNTaW1wbGVQYXRoKGV4cCkge1xuICByZXR1cm4gcGF0aFRlc3RSRS50ZXN0KGV4cCkgJiZcbiAgLy8gZG9uJ3QgdHJlYXQgbGl0ZXJhbCB2YWx1ZXMgYXMgcGF0aHNcbiAgIWxpdGVyYWxWYWx1ZVJFJDEudGVzdChleHApICYmXG4gIC8vIE1hdGggY29uc3RhbnRzIGUuZy4gTWF0aC5QSSwgTWF0aC5FIGV0Yy5cbiAgZXhwLnNsaWNlKDAsIDUpICE9PSAnTWF0aC4nO1xufVxuXG52YXIgZXhwcmVzc2lvbiA9IE9iamVjdC5mcmVlemUoe1xuICBwYXJzZUV4cHJlc3Npb246IHBhcnNlRXhwcmVzc2lvbixcbiAgaXNTaW1wbGVQYXRoOiBpc1NpbXBsZVBhdGhcbn0pO1xuXG4vLyB3ZSBoYXZlIHR3byBzZXBhcmF0ZSBxdWV1ZXM6IG9uZSBmb3IgZGlyZWN0aXZlIHVwZGF0ZXNcbi8vIGFuZCBvbmUgZm9yIHVzZXIgd2F0Y2hlciByZWdpc3RlcmVkIHZpYSAkd2F0Y2goKS5cbi8vIHdlIHdhbnQgdG8gZ3VhcmFudGVlIGRpcmVjdGl2ZSB1cGRhdGVzIHRvIGJlIGNhbGxlZFxuLy8gYmVmb3JlIHVzZXIgd2F0Y2hlcnMgc28gdGhhdCB3aGVuIHVzZXIgd2F0Y2hlcnMgYXJlXG4vLyB0cmlnZ2VyZWQsIHRoZSBET00gd291bGQgaGF2ZSBhbHJlYWR5IGJlZW4gaW4gdXBkYXRlZFxuLy8gc3RhdGUuXG5cbnZhciBxdWV1ZSA9IFtdO1xudmFyIHVzZXJRdWV1ZSA9IFtdO1xudmFyIGhhcyA9IHt9O1xudmFyIGNpcmN1bGFyID0ge307XG52YXIgd2FpdGluZyA9IGZhbHNlO1xuXG4vKipcbiAqIFJlc2V0IHRoZSBiYXRjaGVyJ3Mgc3RhdGUuXG4gKi9cblxuZnVuY3Rpb24gcmVzZXRCYXRjaGVyU3RhdGUoKSB7XG4gIHF1ZXVlLmxlbmd0aCA9IDA7XG4gIHVzZXJRdWV1ZS5sZW5ndGggPSAwO1xuICBoYXMgPSB7fTtcbiAgY2lyY3VsYXIgPSB7fTtcbiAgd2FpdGluZyA9IGZhbHNlO1xufVxuXG4vKipcbiAqIEZsdXNoIGJvdGggcXVldWVzIGFuZCBydW4gdGhlIHdhdGNoZXJzLlxuICovXG5cbmZ1bmN0aW9uIGZsdXNoQmF0Y2hlclF1ZXVlKCkge1xuICB2YXIgX2FnYWluID0gdHJ1ZTtcblxuICBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHtcbiAgICBfYWdhaW4gPSBmYWxzZTtcblxuICAgIHJ1bkJhdGNoZXJRdWV1ZShxdWV1ZSk7XG4gICAgcnVuQmF0Y2hlclF1ZXVlKHVzZXJRdWV1ZSk7XG4gICAgLy8gdXNlciB3YXRjaGVycyB0cmlnZ2VyZWQgbW9yZSB3YXRjaGVycyxcbiAgICAvLyBrZWVwIGZsdXNoaW5nIHVudGlsIGl0IGRlcGxldGVzXG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgX2FnYWluID0gdHJ1ZTtcbiAgICAgIGNvbnRpbnVlIF9mdW5jdGlvbjtcbiAgICB9XG4gICAgLy8gZGV2IHRvb2wgaG9va1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChkZXZ0b29scyAmJiBjb25maWcuZGV2dG9vbHMpIHtcbiAgICAgIGRldnRvb2xzLmVtaXQoJ2ZsdXNoJyk7XG4gICAgfVxuICAgIHJlc2V0QmF0Y2hlclN0YXRlKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSdW4gdGhlIHdhdGNoZXJzIGluIGEgc2luZ2xlIHF1ZXVlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHF1ZXVlXG4gKi9cblxuZnVuY3Rpb24gcnVuQmF0Y2hlclF1ZXVlKHF1ZXVlKSB7XG4gIC8vIGRvIG5vdCBjYWNoZSBsZW5ndGggYmVjYXVzZSBtb3JlIHdhdGNoZXJzIG1pZ2h0IGJlIHB1c2hlZFxuICAvLyBhcyB3ZSBydW4gZXhpc3Rpbmcgd2F0Y2hlcnNcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgIHZhciB3YXRjaGVyID0gcXVldWVbaV07XG4gICAgdmFyIGlkID0gd2F0Y2hlci5pZDtcbiAgICBoYXNbaWRdID0gbnVsbDtcbiAgICB3YXRjaGVyLnJ1bigpO1xuICAgIC8vIGluIGRldiBidWlsZCwgY2hlY2sgYW5kIHN0b3AgY2lyY3VsYXIgdXBkYXRlcy5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBoYXNbaWRdICE9IG51bGwpIHtcbiAgICAgIGNpcmN1bGFyW2lkXSA9IChjaXJjdWxhcltpZF0gfHwgMCkgKyAxO1xuICAgICAgaWYgKGNpcmN1bGFyW2lkXSA+IGNvbmZpZy5fbWF4VXBkYXRlQ291bnQpIHtcbiAgICAgICAgd2FybignWW91IG1heSBoYXZlIGFuIGluZmluaXRlIHVwZGF0ZSBsb29wIGZvciB3YXRjaGVyICcgKyAnd2l0aCBleHByZXNzaW9uIFwiJyArIHdhdGNoZXIuZXhwcmVzc2lvbiArICdcIicsIHdhdGNoZXIudm0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcXVldWUubGVuZ3RoID0gMDtcbn1cblxuLyoqXG4gKiBQdXNoIGEgd2F0Y2hlciBpbnRvIHRoZSB3YXRjaGVyIHF1ZXVlLlxuICogSm9icyB3aXRoIGR1cGxpY2F0ZSBJRHMgd2lsbCBiZSBza2lwcGVkIHVubGVzcyBpdCdzXG4gKiBwdXNoZWQgd2hlbiB0aGUgcXVldWUgaXMgYmVpbmcgZmx1c2hlZC5cbiAqXG4gKiBAcGFyYW0ge1dhdGNoZXJ9IHdhdGNoZXJcbiAqICAgcHJvcGVydGllczpcbiAqICAgLSB7TnVtYmVyfSBpZFxuICogICAtIHtGdW5jdGlvbn0gcnVuXG4gKi9cblxuZnVuY3Rpb24gcHVzaFdhdGNoZXIod2F0Y2hlcikge1xuICB2YXIgaWQgPSB3YXRjaGVyLmlkO1xuICBpZiAoaGFzW2lkXSA9PSBudWxsKSB7XG4gICAgLy8gcHVzaCB3YXRjaGVyIGludG8gYXBwcm9wcmlhdGUgcXVldWVcbiAgICB2YXIgcSA9IHdhdGNoZXIudXNlciA/IHVzZXJRdWV1ZSA6IHF1ZXVlO1xuICAgIGhhc1tpZF0gPSBxLmxlbmd0aDtcbiAgICBxLnB1c2god2F0Y2hlcik7XG4gICAgLy8gcXVldWUgdGhlIGZsdXNoXG4gICAgaWYgKCF3YWl0aW5nKSB7XG4gICAgICB3YWl0aW5nID0gdHJ1ZTtcbiAgICAgIG5leHRUaWNrKGZsdXNoQmF0Y2hlclF1ZXVlKTtcbiAgICB9XG4gIH1cbn1cblxudmFyIHVpZCQyID0gMDtcblxuLyoqXG4gKiBBIHdhdGNoZXIgcGFyc2VzIGFuIGV4cHJlc3Npb24sIGNvbGxlY3RzIGRlcGVuZGVuY2llcyxcbiAqIGFuZCBmaXJlcyBjYWxsYmFjayB3aGVuIHRoZSBleHByZXNzaW9uIHZhbHVlIGNoYW5nZXMuXG4gKiBUaGlzIGlzIHVzZWQgZm9yIGJvdGggdGhlICR3YXRjaCgpIGFwaSBhbmQgZGlyZWN0aXZlcy5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBleHBPckZuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqICAgICAgICAgICAgICAgICAtIHtBcnJheX0gZmlsdGVyc1xuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHR3b1dheVxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGRlZXBcbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSB1c2VyXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gc3luY1xuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGxhenlcbiAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW3ByZVByb2Nlc3NdXG4gKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtwb3N0UHJvY2Vzc11cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwgb3B0aW9ucykge1xuICAvLyBtaXggaW4gb3B0aW9uc1xuICBpZiAob3B0aW9ucykge1xuICAgIGV4dGVuZCh0aGlzLCBvcHRpb25zKTtcbiAgfVxuICB2YXIgaXNGbiA9IHR5cGVvZiBleHBPckZuID09PSAnZnVuY3Rpb24nO1xuICB0aGlzLnZtID0gdm07XG4gIHZtLl93YXRjaGVycy5wdXNoKHRoaXMpO1xuICB0aGlzLmV4cHJlc3Npb24gPSBleHBPckZuO1xuICB0aGlzLmNiID0gY2I7XG4gIHRoaXMuaWQgPSArK3VpZCQyOyAvLyB1aWQgZm9yIGJhdGNoaW5nXG4gIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgdGhpcy5kaXJ0eSA9IHRoaXMubGF6eTsgLy8gZm9yIGxhenkgd2F0Y2hlcnNcbiAgdGhpcy5kZXBzID0gW107XG4gIHRoaXMubmV3RGVwcyA9IFtdO1xuICB0aGlzLmRlcElkcyA9IG5ldyBfU2V0KCk7XG4gIHRoaXMubmV3RGVwSWRzID0gbmV3IF9TZXQoKTtcbiAgdGhpcy5wcmV2RXJyb3IgPSBudWxsOyAvLyBmb3IgYXN5bmMgZXJyb3Igc3RhY2tzXG4gIC8vIHBhcnNlIGV4cHJlc3Npb24gZm9yIGdldHRlci9zZXR0ZXJcbiAgaWYgKGlzRm4pIHtcbiAgICB0aGlzLmdldHRlciA9IGV4cE9yRm47XG4gICAgdGhpcy5zZXR0ZXIgPSB1bmRlZmluZWQ7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHBPckZuLCB0aGlzLnR3b1dheSk7XG4gICAgdGhpcy5nZXR0ZXIgPSByZXMuZ2V0O1xuICAgIHRoaXMuc2V0dGVyID0gcmVzLnNldDtcbiAgfVxuICB0aGlzLnZhbHVlID0gdGhpcy5sYXp5ID8gdW5kZWZpbmVkIDogdGhpcy5nZXQoKTtcbiAgLy8gc3RhdGUgZm9yIGF2b2lkaW5nIGZhbHNlIHRyaWdnZXJzIGZvciBkZWVwIGFuZCBBcnJheVxuICAvLyB3YXRjaGVycyBkdXJpbmcgdm0uX2RpZ2VzdCgpXG4gIHRoaXMucXVldWVkID0gdGhpcy5zaGFsbG93ID0gZmFsc2U7XG59XG5cbi8qKlxuICogRXZhbHVhdGUgdGhlIGdldHRlciwgYW5kIHJlLWNvbGxlY3QgZGVwZW5kZW5jaWVzLlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5iZWZvcmVHZXQoKTtcbiAgdmFyIHNjb3BlID0gdGhpcy5zY29wZSB8fCB0aGlzLnZtO1xuICB2YXIgdmFsdWU7XG4gIHRyeSB7XG4gICAgdmFsdWUgPSB0aGlzLmdldHRlci5jYWxsKHNjb3BlLCBzY29wZSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcud2FybkV4cHJlc3Npb25FcnJvcnMpIHtcbiAgICAgIHdhcm4oJ0Vycm9yIHdoZW4gZXZhbHVhdGluZyBleHByZXNzaW9uICcgKyAnXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiOiAnICsgZS50b1N0cmluZygpLCB0aGlzLnZtKTtcbiAgICB9XG4gIH1cbiAgLy8gXCJ0b3VjaFwiIGV2ZXJ5IHByb3BlcnR5IHNvIHRoZXkgYXJlIGFsbCB0cmFja2VkIGFzXG4gIC8vIGRlcGVuZGVuY2llcyBmb3IgZGVlcCB3YXRjaGluZ1xuICBpZiAodGhpcy5kZWVwKSB7XG4gICAgdHJhdmVyc2UodmFsdWUpO1xuICB9XG4gIGlmICh0aGlzLnByZVByb2Nlc3MpIHtcbiAgICB2YWx1ZSA9IHRoaXMucHJlUHJvY2Vzcyh2YWx1ZSk7XG4gIH1cbiAgaWYgKHRoaXMuZmlsdGVycykge1xuICAgIHZhbHVlID0gc2NvcGUuX2FwcGx5RmlsdGVycyh2YWx1ZSwgbnVsbCwgdGhpcy5maWx0ZXJzLCBmYWxzZSk7XG4gIH1cbiAgaWYgKHRoaXMucG9zdFByb2Nlc3MpIHtcbiAgICB2YWx1ZSA9IHRoaXMucG9zdFByb2Nlc3ModmFsdWUpO1xuICB9XG4gIHRoaXMuYWZ0ZXJHZXQoKTtcbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgd2l0aCB0aGUgc2V0dGVyLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgdmFyIHNjb3BlID0gdGhpcy5zY29wZSB8fCB0aGlzLnZtO1xuICBpZiAodGhpcy5maWx0ZXJzKSB7XG4gICAgdmFsdWUgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKHZhbHVlLCB0aGlzLnZhbHVlLCB0aGlzLmZpbHRlcnMsIHRydWUpO1xuICB9XG4gIHRyeSB7XG4gICAgdGhpcy5zZXR0ZXIuY2FsbChzY29wZSwgc2NvcGUsIHZhbHVlKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy53YXJuRXhwcmVzc2lvbkVycm9ycykge1xuICAgICAgd2FybignRXJyb3Igd2hlbiBldmFsdWF0aW5nIHNldHRlciAnICsgJ1wiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIjogJyArIGUudG9TdHJpbmcoKSwgdGhpcy52bSk7XG4gICAgfVxuICB9XG4gIC8vIHR3by13YXkgc3luYyBmb3Igdi1mb3IgYWxpYXNcbiAgdmFyIGZvckNvbnRleHQgPSBzY29wZS4kZm9yQ29udGV4dDtcbiAgaWYgKGZvckNvbnRleHQgJiYgZm9yQ29udGV4dC5hbGlhcyA9PT0gdGhpcy5leHByZXNzaW9uKSB7XG4gICAgaWYgKGZvckNvbnRleHQuZmlsdGVycykge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHR3by13YXkgYmluZGluZyBvbiAnICsgJ2Egdi1mb3IgYWxpYXMgKCcgKyB0aGlzLmV4cHJlc3Npb24gKyAnKSwgYW5kIHRoZSAnICsgJ3YtZm9yIGhhcyBmaWx0ZXJzLiBUaGlzIHdpbGwgbm90IHdvcmsgcHJvcGVybHkuICcgKyAnRWl0aGVyIHJlbW92ZSB0aGUgZmlsdGVycyBvciB1c2UgYW4gYXJyYXkgb2YgJyArICdvYmplY3RzIGFuZCBiaW5kIHRvIG9iamVjdCBwcm9wZXJ0aWVzIGluc3RlYWQuJywgdGhpcy52bSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvckNvbnRleHQuX3dpdGhMb2NrKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChzY29wZS4ka2V5KSB7XG4gICAgICAgIC8vIG9yaWdpbmFsIGlzIGFuIG9iamVjdFxuICAgICAgICBmb3JDb250ZXh0LnJhd1ZhbHVlW3Njb3BlLiRrZXldID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3JDb250ZXh0LnJhd1ZhbHVlLiRzZXQoc2NvcGUuJGluZGV4LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG5cbi8qKlxuICogUHJlcGFyZSBmb3IgZGVwZW5kZW5jeSBjb2xsZWN0aW9uLlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLmJlZm9yZUdldCA9IGZ1bmN0aW9uICgpIHtcbiAgRGVwLnRhcmdldCA9IHRoaXM7XG59O1xuXG4vKipcbiAqIEFkZCBhIGRlcGVuZGVuY3kgdG8gdGhpcyBkaXJlY3RpdmUuXG4gKlxuICogQHBhcmFtIHtEZXB9IGRlcFxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLmFkZERlcCA9IGZ1bmN0aW9uIChkZXApIHtcbiAgdmFyIGlkID0gZGVwLmlkO1xuICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhpZCkpIHtcbiAgICB0aGlzLm5ld0RlcElkcy5hZGQoaWQpO1xuICAgIHRoaXMubmV3RGVwcy5wdXNoKGRlcCk7XG4gICAgaWYgKCF0aGlzLmRlcElkcy5oYXMoaWQpKSB7XG4gICAgICBkZXAuYWRkU3ViKHRoaXMpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBDbGVhbiB1cCBmb3IgZGVwZW5kZW5jeSBjb2xsZWN0aW9uLlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLmFmdGVyR2V0ID0gZnVuY3Rpb24gKCkge1xuICBEZXAudGFyZ2V0ID0gbnVsbDtcbiAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgdmFyIGRlcCA9IHRoaXMuZGVwc1tpXTtcbiAgICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhkZXAuaWQpKSB7XG4gICAgICBkZXAucmVtb3ZlU3ViKHRoaXMpO1xuICAgIH1cbiAgfVxuICB2YXIgdG1wID0gdGhpcy5kZXBJZHM7XG4gIHRoaXMuZGVwSWRzID0gdGhpcy5uZXdEZXBJZHM7XG4gIHRoaXMubmV3RGVwSWRzID0gdG1wO1xuICB0aGlzLm5ld0RlcElkcy5jbGVhcigpO1xuICB0bXAgPSB0aGlzLmRlcHM7XG4gIHRoaXMuZGVwcyA9IHRoaXMubmV3RGVwcztcbiAgdGhpcy5uZXdEZXBzID0gdG1wO1xuICB0aGlzLm5ld0RlcHMubGVuZ3RoID0gMDtcbn07XG5cbi8qKlxuICogU3Vic2NyaWJlciBpbnRlcmZhY2UuXG4gKiBXaWxsIGJlIGNhbGxlZCB3aGVuIGEgZGVwZW5kZW5jeSBjaGFuZ2VzLlxuICpcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hhbGxvd1xuICovXG5cbldhdGNoZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChzaGFsbG93KSB7XG4gIGlmICh0aGlzLmxhenkpIHtcbiAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgfSBlbHNlIGlmICh0aGlzLnN5bmMgfHwgIWNvbmZpZy5hc3luYykge1xuICAgIHRoaXMucnVuKCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gaWYgcXVldWVkLCBvbmx5IG92ZXJ3cml0ZSBzaGFsbG93IHdpdGggbm9uLXNoYWxsb3csXG4gICAgLy8gYnV0IG5vdCB0aGUgb3RoZXIgd2F5IGFyb3VuZC5cbiAgICB0aGlzLnNoYWxsb3cgPSB0aGlzLnF1ZXVlZCA/IHNoYWxsb3cgPyB0aGlzLnNoYWxsb3cgOiBmYWxzZSA6ICEhc2hhbGxvdztcbiAgICB0aGlzLnF1ZXVlZCA9IHRydWU7XG4gICAgLy8gcmVjb3JkIGJlZm9yZS1wdXNoIGVycm9yIHN0YWNrIGluIGRlYnVnIG1vZGVcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcuZGVidWcpIHtcbiAgICAgIHRoaXMucHJldkVycm9yID0gbmV3IEVycm9yKCdbdnVlXSBhc3luYyBzdGFjayB0cmFjZScpO1xuICAgIH1cbiAgICBwdXNoV2F0Y2hlcih0aGlzKTtcbiAgfVxufTtcblxuLyoqXG4gKiBCYXRjaGVyIGpvYiBpbnRlcmZhY2UuXG4gKiBXaWxsIGJlIGNhbGxlZCBieSB0aGUgYmF0Y2hlci5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgIHZhciB2YWx1ZSA9IHRoaXMuZ2V0KCk7XG4gICAgaWYgKHZhbHVlICE9PSB0aGlzLnZhbHVlIHx8XG4gICAgLy8gRGVlcCB3YXRjaGVycyBhbmQgd2F0Y2hlcnMgb24gT2JqZWN0L0FycmF5cyBzaG91bGQgZmlyZSBldmVuXG4gICAgLy8gd2hlbiB0aGUgdmFsdWUgaXMgdGhlIHNhbWUsIGJlY2F1c2UgdGhlIHZhbHVlIG1heVxuICAgIC8vIGhhdmUgbXV0YXRlZDsgYnV0IG9ubHkgZG8gc28gaWYgdGhpcyBpcyBhXG4gICAgLy8gbm9uLXNoYWxsb3cgdXBkYXRlIChjYXVzZWQgYnkgYSB2bSBkaWdlc3QpLlxuICAgIChpc09iamVjdCh2YWx1ZSkgfHwgdGhpcy5kZWVwKSAmJiAhdGhpcy5zaGFsbG93KSB7XG4gICAgICAvLyBzZXQgbmV3IHZhbHVlXG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgLy8gaW4gZGVidWcgKyBhc3luYyBtb2RlLCB3aGVuIGEgd2F0Y2hlciBjYWxsYmFja3NcbiAgICAgIC8vIHRocm93cywgd2UgYWxzbyB0aHJvdyB0aGUgc2F2ZWQgYmVmb3JlLXB1c2ggZXJyb3JcbiAgICAgIC8vIHNvIHRoZSBmdWxsIGNyb3NzLXRpY2sgc3RhY2sgdHJhY2UgaXMgYXZhaWxhYmxlLlxuICAgICAgdmFyIHByZXZFcnJvciA9IHRoaXMucHJldkVycm9yO1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcuZGVidWcgJiYgcHJldkVycm9yKSB7XG4gICAgICAgIHRoaXMucHJldkVycm9yID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy52bSwgdmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRocm93IHByZXZFcnJvcjtcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy52bSwgdmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5xdWV1ZWQgPSB0aGlzLnNoYWxsb3cgPSBmYWxzZTtcbiAgfVxufTtcblxuLyoqXG4gKiBFdmFsdWF0ZSB0aGUgdmFsdWUgb2YgdGhlIHdhdGNoZXIuXG4gKiBUaGlzIG9ubHkgZ2V0cyBjYWxsZWQgZm9yIGxhenkgd2F0Y2hlcnMuXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIGF2b2lkIG92ZXJ3cml0aW5nIGFub3RoZXIgd2F0Y2hlciB0aGF0IGlzIGJlaW5nXG4gIC8vIGNvbGxlY3RlZC5cbiAgdmFyIGN1cnJlbnQgPSBEZXAudGFyZ2V0O1xuICB0aGlzLnZhbHVlID0gdGhpcy5nZXQoKTtcbiAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuICBEZXAudGFyZ2V0ID0gY3VycmVudDtcbn07XG5cbi8qKlxuICogRGVwZW5kIG9uIGFsbCBkZXBzIGNvbGxlY3RlZCBieSB0aGlzIHdhdGNoZXIuXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gKCkge1xuICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICB0aGlzLmRlcHNbaV0uZGVwZW5kKCk7XG4gIH1cbn07XG5cbi8qKlxuICogUmVtb3ZlIHNlbGYgZnJvbSBhbGwgZGVwZW5kZW5jaWVzJyBzdWJjcmliZXIgbGlzdC5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS50ZWFyZG93biA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSB2bSdzIHdhdGNoZXIgbGlzdFxuICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBleHBlbnNpdmUgb3BlcmF0aW9uIHNvIHdlIHNraXAgaXRcbiAgICAvLyBpZiB0aGUgdm0gaXMgYmVpbmcgZGVzdHJveWVkIG9yIGlzIHBlcmZvcm1pbmcgYSB2LWZvclxuICAgIC8vIHJlLXJlbmRlciAodGhlIHdhdGNoZXIgbGlzdCBpcyB0aGVuIGZpbHRlcmVkIGJ5IHYtZm9yKS5cbiAgICBpZiAoIXRoaXMudm0uX2lzQmVpbmdEZXN0cm95ZWQgJiYgIXRoaXMudm0uX3ZGb3JSZW1vdmluZykge1xuICAgICAgdGhpcy52bS5fd2F0Y2hlcnMuJHJlbW92ZSh0aGlzKTtcbiAgICB9XG4gICAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHRoaXMuZGVwc1tpXS5yZW1vdmVTdWIodGhpcyk7XG4gICAgfVxuICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy52bSA9IHRoaXMuY2IgPSB0aGlzLnZhbHVlID0gbnVsbDtcbiAgfVxufTtcblxuLyoqXG4gKiBSZWNydXNpdmVseSB0cmF2ZXJzZSBhbiBvYmplY3QgdG8gZXZva2UgYWxsIGNvbnZlcnRlZFxuICogZ2V0dGVycywgc28gdGhhdCBldmVyeSBuZXN0ZWQgcHJvcGVydHkgaW5zaWRlIHRoZSBvYmplY3RcbiAqIGlzIGNvbGxlY3RlZCBhcyBhIFwiZGVlcFwiIGRlcGVuZGVuY3kuXG4gKlxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG52YXIgc2Vlbk9iamVjdHMgPSBuZXcgX1NldCgpO1xuZnVuY3Rpb24gdHJhdmVyc2UodmFsLCBzZWVuKSB7XG4gIHZhciBpID0gdW5kZWZpbmVkLFxuICAgICAga2V5cyA9IHVuZGVmaW5lZDtcbiAgaWYgKCFzZWVuKSB7XG4gICAgc2VlbiA9IHNlZW5PYmplY3RzO1xuICAgIHNlZW4uY2xlYXIoKTtcbiAgfVxuICB2YXIgaXNBID0gaXNBcnJheSh2YWwpO1xuICB2YXIgaXNPID0gaXNPYmplY3QodmFsKTtcbiAgaWYgKChpc0EgfHwgaXNPKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHZhbCkpIHtcbiAgICBpZiAodmFsLl9fb2JfXykge1xuICAgICAgdmFyIGRlcElkID0gdmFsLl9fb2JfXy5kZXAuaWQ7XG4gICAgICBpZiAoc2Vlbi5oYXMoZGVwSWQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlZW4uYWRkKGRlcElkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzQSkge1xuICAgICAgaSA9IHZhbC5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB0cmF2ZXJzZSh2YWxbaV0sIHNlZW4pO1xuICAgIH0gZWxzZSBpZiAoaXNPKSB7XG4gICAgICBrZXlzID0gT2JqZWN0LmtleXModmFsKTtcbiAgICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHRyYXZlcnNlKHZhbFtrZXlzW2ldXSwgc2Vlbik7XG4gICAgfVxuICB9XG59XG5cbnZhciB0ZXh0JDEgPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB0aGlzLmF0dHIgPSB0aGlzLmVsLm5vZGVUeXBlID09PSAzID8gJ2RhdGEnIDogJ3RleHRDb250ZW50JztcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIHRoaXMuZWxbdGhpcy5hdHRyXSA9IF90b1N0cmluZyh2YWx1ZSk7XG4gIH1cbn07XG5cbnZhciB0ZW1wbGF0ZUNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xudmFyIGlkU2VsZWN0b3JDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblxudmFyIG1hcCA9IHtcbiAgZWZhdWx0OiBbMCwgJycsICcnXSxcbiAgbGVnZW5kOiBbMSwgJzxmaWVsZHNldD4nLCAnPC9maWVsZHNldD4nXSxcbiAgdHI6IFsyLCAnPHRhYmxlPjx0Ym9keT4nLCAnPC90Ym9keT48L3RhYmxlPiddLFxuICBjb2w6IFsyLCAnPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4nLCAnPC9jb2xncm91cD48L3RhYmxlPiddXG59O1xuXG5tYXAudGQgPSBtYXAudGggPSBbMywgJzx0YWJsZT48dGJvZHk+PHRyPicsICc8L3RyPjwvdGJvZHk+PC90YWJsZT4nXTtcblxubWFwLm9wdGlvbiA9IG1hcC5vcHRncm91cCA9IFsxLCAnPHNlbGVjdCBtdWx0aXBsZT1cIm11bHRpcGxlXCI+JywgJzwvc2VsZWN0PiddO1xuXG5tYXAudGhlYWQgPSBtYXAudGJvZHkgPSBtYXAuY29sZ3JvdXAgPSBtYXAuY2FwdGlvbiA9IG1hcC50Zm9vdCA9IFsxLCAnPHRhYmxlPicsICc8L3RhYmxlPiddO1xuXG5tYXAuZyA9IG1hcC5kZWZzID0gbWFwLnN5bWJvbCA9IG1hcC51c2UgPSBtYXAuaW1hZ2UgPSBtYXAudGV4dCA9IG1hcC5jaXJjbGUgPSBtYXAuZWxsaXBzZSA9IG1hcC5saW5lID0gbWFwLnBhdGggPSBtYXAucG9seWdvbiA9IG1hcC5wb2x5bGluZSA9IG1hcC5yZWN0ID0gWzEsICc8c3ZnICcgKyAneG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiICcgKyAneG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgJyArICd4bWxuczpldj1cImh0dHA6Ly93d3cudzMub3JnLzIwMDEveG1sLWV2ZW50c1wiJyArICd2ZXJzaW9uPVwiMS4xXCI+JywgJzwvc3ZnPiddO1xuXG4vKipcbiAqIENoZWNrIGlmIGEgbm9kZSBpcyBhIHN1cHBvcnRlZCB0ZW1wbGF0ZSBub2RlIHdpdGggYVxuICogRG9jdW1lbnRGcmFnbWVudCBjb250ZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc1JlYWxUZW1wbGF0ZShub2RlKSB7XG4gIHJldHVybiBpc1RlbXBsYXRlKG5vZGUpICYmIGlzRnJhZ21lbnQobm9kZS5jb250ZW50KTtcbn1cblxudmFyIHRhZ1JFJDEgPSAvPChbXFx3Oi1dKykvO1xudmFyIGVudGl0eVJFID0gLyYjP1xcdys/Oy87XG52YXIgY29tbWVudFJFID0gLzwhLS0vO1xuXG4vKipcbiAqIENvbnZlcnQgYSBzdHJpbmcgdGVtcGxhdGUgdG8gYSBEb2N1bWVudEZyYWdtZW50LlxuICogRGV0ZXJtaW5lcyBjb3JyZWN0IHdyYXBwaW5nIGJ5IHRhZyB0eXBlcy4gV3JhcHBpbmdcbiAqIHN0cmF0ZWd5IGZvdW5kIGluIGpRdWVyeSAmIGNvbXBvbmVudC9kb21pZnkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHRlbXBsYXRlU3RyaW5nXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHJhd1xuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBzdHJpbmdUb0ZyYWdtZW50KHRlbXBsYXRlU3RyaW5nLCByYXcpIHtcbiAgLy8gdHJ5IGEgY2FjaGUgaGl0IGZpcnN0XG4gIHZhciBjYWNoZUtleSA9IHJhdyA/IHRlbXBsYXRlU3RyaW5nIDogdGVtcGxhdGVTdHJpbmcudHJpbSgpO1xuICB2YXIgaGl0ID0gdGVtcGxhdGVDYWNoZS5nZXQoY2FjaGVLZXkpO1xuICBpZiAoaGl0KSB7XG4gICAgcmV0dXJuIGhpdDtcbiAgfVxuXG4gIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICB2YXIgdGFnTWF0Y2ggPSB0ZW1wbGF0ZVN0cmluZy5tYXRjaCh0YWdSRSQxKTtcbiAgdmFyIGVudGl0eU1hdGNoID0gZW50aXR5UkUudGVzdCh0ZW1wbGF0ZVN0cmluZyk7XG4gIHZhciBjb21tZW50TWF0Y2ggPSBjb21tZW50UkUudGVzdCh0ZW1wbGF0ZVN0cmluZyk7XG5cbiAgaWYgKCF0YWdNYXRjaCAmJiAhZW50aXR5TWF0Y2ggJiYgIWNvbW1lbnRNYXRjaCkge1xuICAgIC8vIHRleHQgb25seSwgcmV0dXJuIGEgc2luZ2xlIHRleHQgbm9kZS5cbiAgICBmcmFnLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRlbXBsYXRlU3RyaW5nKSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHRhZyA9IHRhZ01hdGNoICYmIHRhZ01hdGNoWzFdO1xuICAgIHZhciB3cmFwID0gbWFwW3RhZ10gfHwgbWFwLmVmYXVsdDtcbiAgICB2YXIgZGVwdGggPSB3cmFwWzBdO1xuICAgIHZhciBwcmVmaXggPSB3cmFwWzFdO1xuICAgIHZhciBzdWZmaXggPSB3cmFwWzJdO1xuICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICBub2RlLmlubmVySFRNTCA9IHByZWZpeCArIHRlbXBsYXRlU3RyaW5nICsgc3VmZml4O1xuICAgIHdoaWxlIChkZXB0aC0tKSB7XG4gICAgICBub2RlID0gbm9kZS5sYXN0Q2hpbGQ7XG4gICAgfVxuXG4gICAgdmFyIGNoaWxkO1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgd2hpbGUgKGNoaWxkID0gbm9kZS5maXJzdENoaWxkKSB7XG4gICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgICBmcmFnLmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFyYXcpIHtcbiAgICB0cmltTm9kZShmcmFnKTtcbiAgfVxuICB0ZW1wbGF0ZUNhY2hlLnB1dChjYWNoZUtleSwgZnJhZyk7XG4gIHJldHVybiBmcmFnO1xufVxuXG4vKipcbiAqIENvbnZlcnQgYSB0ZW1wbGF0ZSBub2RlIHRvIGEgRG9jdW1lbnRGcmFnbWVudC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gbm9kZVRvRnJhZ21lbnQobm9kZSkge1xuICAvLyBpZiBpdHMgYSB0ZW1wbGF0ZSB0YWcgYW5kIHRoZSBicm93c2VyIHN1cHBvcnRzIGl0LFxuICAvLyBpdHMgY29udGVudCBpcyBhbHJlYWR5IGEgZG9jdW1lbnQgZnJhZ21lbnQuIEhvd2V2ZXIsIGlPUyBTYWZhcmkgaGFzXG4gIC8vIGJ1ZyB3aGVuIHVzaW5nIGRpcmVjdGx5IGNsb25lZCB0ZW1wbGF0ZSBjb250ZW50IHdpdGggdG91Y2hcbiAgLy8gZXZlbnRzIGFuZCBjYW4gY2F1c2UgY3Jhc2hlcyB3aGVuIHRoZSBub2RlcyBhcmUgcmVtb3ZlZCBmcm9tIERPTSwgc28gd2VcbiAgLy8gaGF2ZSB0byB0cmVhdCB0ZW1wbGF0ZSBlbGVtZW50cyBhcyBzdHJpbmcgdGVtcGxhdGVzLiAoIzI4MDUpXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaXNSZWFsVGVtcGxhdGUobm9kZSkpIHtcbiAgICByZXR1cm4gc3RyaW5nVG9GcmFnbWVudChub2RlLmlubmVySFRNTCk7XG4gIH1cbiAgLy8gc2NyaXB0IHRlbXBsYXRlXG4gIGlmIChub2RlLnRhZ05hbWUgPT09ICdTQ1JJUFQnKSB7XG4gICAgcmV0dXJuIHN0cmluZ1RvRnJhZ21lbnQobm9kZS50ZXh0Q29udGVudCk7XG4gIH1cbiAgLy8gbm9ybWFsIG5vZGUsIGNsb25lIGl0IHRvIGF2b2lkIG11dGF0aW5nIHRoZSBvcmlnaW5hbFxuICB2YXIgY2xvbmVkTm9kZSA9IGNsb25lTm9kZShub2RlKTtcbiAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIHZhciBjaGlsZDtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgd2hpbGUgKGNoaWxkID0gY2xvbmVkTm9kZS5maXJzdENoaWxkKSB7XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIGZyYWcuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICB9XG4gIHRyaW1Ob2RlKGZyYWcpO1xuICByZXR1cm4gZnJhZztcbn1cblxuLy8gVGVzdCBmb3IgdGhlIHByZXNlbmNlIG9mIHRoZSBTYWZhcmkgdGVtcGxhdGUgY2xvbmluZyBidWdcbi8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3d1Zy5jZ2k/aWQ9MTM3NzU1XG52YXIgaGFzQnJva2VuVGVtcGxhdGUgPSAoZnVuY3Rpb24gKCkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAoaW5Ccm93c2VyKSB7XG4gICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhLmlubmVySFRNTCA9ICc8dGVtcGxhdGU+MTwvdGVtcGxhdGU+JztcbiAgICByZXR1cm4gIWEuY2xvbmVOb2RlKHRydWUpLmZpcnN0Q2hpbGQuaW5uZXJIVE1MO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufSkoKTtcblxuLy8gVGVzdCBmb3IgSUUxMC8xMSB0ZXh0YXJlYSBwbGFjZWhvbGRlciBjbG9uZSBidWdcbnZhciBoYXNUZXh0YXJlYUNsb25lQnVnID0gKGZ1bmN0aW9uICgpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKGluQnJvd3Nlcikge1xuICAgIHZhciB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgICB0LnBsYWNlaG9sZGVyID0gJ3QnO1xuICAgIHJldHVybiB0LmNsb25lTm9kZSh0cnVlKS52YWx1ZSA9PT0gJ3QnO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufSkoKTtcblxuLyoqXG4gKiAxLiBEZWFsIHdpdGggU2FmYXJpIGNsb25pbmcgbmVzdGVkIDx0ZW1wbGF0ZT4gYnVnIGJ5XG4gKiAgICBtYW51YWxseSBjbG9uaW5nIGFsbCB0ZW1wbGF0ZSBpbnN0YW5jZXMuXG4gKiAyLiBEZWFsIHdpdGggSUUxMC8xMSB0ZXh0YXJlYSBwbGFjZWhvbGRlciBidWcgYnkgc2V0dGluZ1xuICogICAgdGhlIGNvcnJlY3QgdmFsdWUgYWZ0ZXIgY2xvbmluZy5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gbm9kZVxuICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIGNsb25lTm9kZShub2RlKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoIW5vZGUucXVlcnlTZWxlY3RvckFsbCkge1xuICAgIHJldHVybiBub2RlLmNsb25lTm9kZSgpO1xuICB9XG4gIHZhciByZXMgPSBub2RlLmNsb25lTm9kZSh0cnVlKTtcbiAgdmFyIGksIG9yaWdpbmFsLCBjbG9uZWQ7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaGFzQnJva2VuVGVtcGxhdGUpIHtcbiAgICB2YXIgdGVtcENsb25lID0gcmVzO1xuICAgIGlmIChpc1JlYWxUZW1wbGF0ZShub2RlKSkge1xuICAgICAgbm9kZSA9IG5vZGUuY29udGVudDtcbiAgICAgIHRlbXBDbG9uZSA9IHJlcy5jb250ZW50O1xuICAgIH1cbiAgICBvcmlnaW5hbCA9IG5vZGUucXVlcnlTZWxlY3RvckFsbCgndGVtcGxhdGUnKTtcbiAgICBpZiAob3JpZ2luYWwubGVuZ3RoKSB7XG4gICAgICBjbG9uZWQgPSB0ZW1wQ2xvbmUucXVlcnlTZWxlY3RvckFsbCgndGVtcGxhdGUnKTtcbiAgICAgIGkgPSBjbG9uZWQubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBjbG9uZWRbaV0ucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoY2xvbmVOb2RlKG9yaWdpbmFsW2ldKSwgY2xvbmVkW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChoYXNUZXh0YXJlYUNsb25lQnVnKSB7XG4gICAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgcmVzLnZhbHVlID0gbm9kZS52YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3JpZ2luYWwgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJyk7XG4gICAgICBpZiAob3JpZ2luYWwubGVuZ3RoKSB7XG4gICAgICAgIGNsb25lZCA9IHJlcy5xdWVyeVNlbGVjdG9yQWxsKCd0ZXh0YXJlYScpO1xuICAgICAgICBpID0gY2xvbmVkLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgIGNsb25lZFtpXS52YWx1ZSA9IG9yaWdpbmFsW2ldLnZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogUHJvY2VzcyB0aGUgdGVtcGxhdGUgb3B0aW9uIGFuZCBub3JtYWxpemVzIGl0IGludG8gYVxuICogYSBEb2N1bWVudEZyYWdtZW50IHRoYXQgY2FuIGJlIHVzZWQgYXMgYSBwYXJ0aWFsIG9yIGFcbiAqIGluc3RhbmNlIHRlbXBsYXRlLlxuICpcbiAqIEBwYXJhbSB7Kn0gdGVtcGxhdGVcbiAqICAgICAgICBQb3NzaWJsZSB2YWx1ZXMgaW5jbHVkZTpcbiAqICAgICAgICAtIERvY3VtZW50RnJhZ21lbnQgb2JqZWN0XG4gKiAgICAgICAgLSBOb2RlIG9iamVjdCBvZiB0eXBlIFRlbXBsYXRlXG4gKiAgICAgICAgLSBpZCBzZWxlY3RvcjogJyNzb21lLXRlbXBsYXRlLWlkJ1xuICogICAgICAgIC0gdGVtcGxhdGUgc3RyaW5nOiAnPGRpdj48c3Bhbj57e21zZ319PC9zcGFuPjwvZGl2PidcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hvdWxkQ2xvbmVcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcmF3XG4gKiAgICAgICAgaW5saW5lIEhUTUwgaW50ZXJwb2xhdGlvbi4gRG8gbm90IGNoZWNrIGZvciBpZFxuICogICAgICAgIHNlbGVjdG9yIGFuZCBrZWVwIHdoaXRlc3BhY2UgaW4gdGhlIHN0cmluZy5cbiAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR8dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlVGVtcGxhdGUodGVtcGxhdGUsIHNob3VsZENsb25lLCByYXcpIHtcbiAgdmFyIG5vZGUsIGZyYWc7XG5cbiAgLy8gaWYgdGhlIHRlbXBsYXRlIGlzIGFscmVhZHkgYSBkb2N1bWVudCBmcmFnbWVudCxcbiAgLy8gZG8gbm90aGluZ1xuICBpZiAoaXNGcmFnbWVudCh0ZW1wbGF0ZSkpIHtcbiAgICB0cmltTm9kZSh0ZW1wbGF0ZSk7XG4gICAgcmV0dXJuIHNob3VsZENsb25lID8gY2xvbmVOb2RlKHRlbXBsYXRlKSA6IHRlbXBsYXRlO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB0ZW1wbGF0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAvLyBpZCBzZWxlY3RvclxuICAgIGlmICghcmF3ICYmIHRlbXBsYXRlLmNoYXJBdCgwKSA9PT0gJyMnKSB7XG4gICAgICAvLyBpZCBzZWxlY3RvciBjYW4gYmUgY2FjaGVkIHRvb1xuICAgICAgZnJhZyA9IGlkU2VsZWN0b3JDYWNoZS5nZXQodGVtcGxhdGUpO1xuICAgICAgaWYgKCFmcmFnKSB7XG4gICAgICAgIG5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0ZW1wbGF0ZS5zbGljZSgxKSk7XG4gICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgZnJhZyA9IG5vZGVUb0ZyYWdtZW50KG5vZGUpO1xuICAgICAgICAgIC8vIHNhdmUgc2VsZWN0b3IgdG8gY2FjaGVcbiAgICAgICAgICBpZFNlbGVjdG9yQ2FjaGUucHV0KHRlbXBsYXRlLCBmcmFnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBub3JtYWwgc3RyaW5nIHRlbXBsYXRlXG4gICAgICBmcmFnID0gc3RyaW5nVG9GcmFnbWVudCh0ZW1wbGF0ZSwgcmF3KTtcbiAgICB9XG4gIH0gZWxzZSBpZiAodGVtcGxhdGUubm9kZVR5cGUpIHtcbiAgICAvLyBhIGRpcmVjdCBub2RlXG4gICAgZnJhZyA9IG5vZGVUb0ZyYWdtZW50KHRlbXBsYXRlKTtcbiAgfVxuXG4gIHJldHVybiBmcmFnICYmIHNob3VsZENsb25lID8gY2xvbmVOb2RlKGZyYWcpIDogZnJhZztcbn1cblxudmFyIHRlbXBsYXRlID0gT2JqZWN0LmZyZWV6ZSh7XG4gIGNsb25lTm9kZTogY2xvbmVOb2RlLFxuICBwYXJzZVRlbXBsYXRlOiBwYXJzZVRlbXBsYXRlXG59KTtcblxudmFyIGh0bWwgPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyBhIGNvbW1lbnQgbm9kZSBtZWFucyB0aGlzIGlzIGEgYmluZGluZyBmb3JcbiAgICAvLyB7e3sgaW5saW5lIHVuZXNjYXBlZCBodG1sIH19fVxuICAgIGlmICh0aGlzLmVsLm5vZGVUeXBlID09PSA4KSB7XG4gICAgICAvLyBob2xkIG5vZGVzXG4gICAgICB0aGlzLm5vZGVzID0gW107XG4gICAgICAvLyByZXBsYWNlIHRoZSBwbGFjZWhvbGRlciB3aXRoIHByb3BlciBhbmNob3JcbiAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWh0bWwnKTtcbiAgICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIHZhbHVlID0gX3RvU3RyaW5nKHZhbHVlKTtcbiAgICBpZiAodGhpcy5ub2Rlcykge1xuICAgICAgdGhpcy5zd2FwKHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbC5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgICB9XG4gIH0sXG5cbiAgc3dhcDogZnVuY3Rpb24gc3dhcCh2YWx1ZSkge1xuICAgIC8vIHJlbW92ZSBvbGQgbm9kZXNcbiAgICB2YXIgaSA9IHRoaXMubm9kZXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHJlbW92ZSh0aGlzLm5vZGVzW2ldKTtcbiAgICB9XG4gICAgLy8gY29udmVydCBuZXcgdmFsdWUgdG8gYSBmcmFnbWVudFxuICAgIC8vIGRvIG5vdCBhdHRlbXB0IHRvIHJldHJpZXZlIGZyb20gaWQgc2VsZWN0b3JcbiAgICB2YXIgZnJhZyA9IHBhcnNlVGVtcGxhdGUodmFsdWUsIHRydWUsIHRydWUpO1xuICAgIC8vIHNhdmUgYSByZWZlcmVuY2UgdG8gdGhlc2Ugbm9kZXMgc28gd2UgY2FuIHJlbW92ZSBsYXRlclxuICAgIHRoaXMubm9kZXMgPSB0b0FycmF5KGZyYWcuY2hpbGROb2Rlcyk7XG4gICAgYmVmb3JlKGZyYWcsIHRoaXMuYW5jaG9yKTtcbiAgfVxufTtcblxuLyoqXG4gKiBBYnN0cmFjdGlvbiBmb3IgYSBwYXJ0aWFsbHktY29tcGlsZWQgZnJhZ21lbnQuXG4gKiBDYW4gb3B0aW9uYWxseSBjb21waWxlIGNvbnRlbnQgd2l0aCBhIGNoaWxkIHNjb3BlLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGxpbmtlclxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcbiAqIEBwYXJhbSB7VnVlfSBbaG9zdF1cbiAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG4gKiBAcGFyYW0ge0ZyYWdtZW50fSBbcGFyZW50RnJhZ11cbiAqL1xuZnVuY3Rpb24gRnJhZ21lbnQobGlua2VyLCB2bSwgZnJhZywgaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpIHtcbiAgdGhpcy5jaGlsZHJlbiA9IFtdO1xuICB0aGlzLmNoaWxkRnJhZ3MgPSBbXTtcbiAgdGhpcy52bSA9IHZtO1xuICB0aGlzLnNjb3BlID0gc2NvcGU7XG4gIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcbiAgdGhpcy5wYXJlbnRGcmFnID0gcGFyZW50RnJhZztcbiAgaWYgKHBhcmVudEZyYWcpIHtcbiAgICBwYXJlbnRGcmFnLmNoaWxkRnJhZ3MucHVzaCh0aGlzKTtcbiAgfVxuICB0aGlzLnVubGluayA9IGxpbmtlcih2bSwgZnJhZywgaG9zdCwgc2NvcGUsIHRoaXMpO1xuICB2YXIgc2luZ2xlID0gdGhpcy5zaW5nbGUgPSBmcmFnLmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICYmXG4gIC8vIGRvIG5vdCBnbyBzaW5nbGUgbW9kZSBpZiB0aGUgb25seSBub2RlIGlzIGFuIGFuY2hvclxuICAhZnJhZy5jaGlsZE5vZGVzWzBdLl9fdl9hbmNob3I7XG4gIGlmIChzaW5nbGUpIHtcbiAgICB0aGlzLm5vZGUgPSBmcmFnLmNoaWxkTm9kZXNbMF07XG4gICAgdGhpcy5iZWZvcmUgPSBzaW5nbGVCZWZvcmU7XG4gICAgdGhpcy5yZW1vdmUgPSBzaW5nbGVSZW1vdmU7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5ub2RlID0gY3JlYXRlQW5jaG9yKCdmcmFnbWVudC1zdGFydCcpO1xuICAgIHRoaXMuZW5kID0gY3JlYXRlQW5jaG9yKCdmcmFnbWVudC1lbmQnKTtcbiAgICB0aGlzLmZyYWcgPSBmcmFnO1xuICAgIHByZXBlbmQodGhpcy5ub2RlLCBmcmFnKTtcbiAgICBmcmFnLmFwcGVuZENoaWxkKHRoaXMuZW5kKTtcbiAgICB0aGlzLmJlZm9yZSA9IG11bHRpQmVmb3JlO1xuICAgIHRoaXMucmVtb3ZlID0gbXVsdGlSZW1vdmU7XG4gIH1cbiAgdGhpcy5ub2RlLl9fdl9mcmFnID0gdGhpcztcbn1cblxuLyoqXG4gKiBDYWxsIGF0dGFjaC9kZXRhY2ggZm9yIGFsbCBjb21wb25lbnRzIGNvbnRhaW5lZCB3aXRoaW5cbiAqIHRoaXMgZnJhZ21lbnQuIEFsc28gZG8gc28gcmVjdXJzaXZlbHkgZm9yIGFsbCBjaGlsZFxuICogZnJhZ21lbnRzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhvb2tcbiAqL1xuXG5GcmFnbWVudC5wcm90b3R5cGUuY2FsbEhvb2sgPSBmdW5jdGlvbiAoaG9vaykge1xuICB2YXIgaSwgbDtcbiAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB0aGlzLmNoaWxkRnJhZ3NbaV0uY2FsbEhvb2soaG9vayk7XG4gIH1cbiAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgaG9vayh0aGlzLmNoaWxkcmVuW2ldKTtcbiAgfVxufTtcblxuLyoqXG4gKiBJbnNlcnQgZnJhZ21lbnQgYmVmb3JlIHRhcmdldCwgc2luZ2xlIG5vZGUgdmVyc2lvblxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gKiBAcGFyYW0ge0Jvb2xlYW59IHdpdGhUcmFuc2l0aW9uXG4gKi9cblxuZnVuY3Rpb24gc2luZ2xlQmVmb3JlKHRhcmdldCwgd2l0aFRyYW5zaXRpb24pIHtcbiAgdGhpcy5pbnNlcnRlZCA9IHRydWU7XG4gIHZhciBtZXRob2QgPSB3aXRoVHJhbnNpdGlvbiAhPT0gZmFsc2UgPyBiZWZvcmVXaXRoVHJhbnNpdGlvbiA6IGJlZm9yZTtcbiAgbWV0aG9kKHRoaXMubm9kZSwgdGFyZ2V0LCB0aGlzLnZtKTtcbiAgaWYgKGluRG9jKHRoaXMubm9kZSkpIHtcbiAgICB0aGlzLmNhbGxIb29rKGF0dGFjaCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgZnJhZ21lbnQsIHNpbmdsZSBub2RlIHZlcnNpb25cbiAqL1xuXG5mdW5jdGlvbiBzaW5nbGVSZW1vdmUoKSB7XG4gIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcbiAgdmFyIHNob3VsZENhbGxSZW1vdmUgPSBpbkRvYyh0aGlzLm5vZGUpO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHRoaXMuYmVmb3JlUmVtb3ZlKCk7XG4gIHJlbW92ZVdpdGhUcmFuc2l0aW9uKHRoaXMubm9kZSwgdGhpcy52bSwgZnVuY3Rpb24gKCkge1xuICAgIGlmIChzaG91bGRDYWxsUmVtb3ZlKSB7XG4gICAgICBzZWxmLmNhbGxIb29rKGRldGFjaCk7XG4gICAgfVxuICAgIHNlbGYuZGVzdHJveSgpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBJbnNlcnQgZnJhZ21lbnQgYmVmb3JlIHRhcmdldCwgbXVsdGktbm9kZXMgdmVyc2lvblxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gKiBAcGFyYW0ge0Jvb2xlYW59IHdpdGhUcmFuc2l0aW9uXG4gKi9cblxuZnVuY3Rpb24gbXVsdGlCZWZvcmUodGFyZ2V0LCB3aXRoVHJhbnNpdGlvbikge1xuICB0aGlzLmluc2VydGVkID0gdHJ1ZTtcbiAgdmFyIHZtID0gdGhpcy52bTtcbiAgdmFyIG1ldGhvZCA9IHdpdGhUcmFuc2l0aW9uICE9PSBmYWxzZSA/IGJlZm9yZVdpdGhUcmFuc2l0aW9uIDogYmVmb3JlO1xuICBtYXBOb2RlUmFuZ2UodGhpcy5ub2RlLCB0aGlzLmVuZCwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICBtZXRob2Qobm9kZSwgdGFyZ2V0LCB2bSk7XG4gIH0pO1xuICBpZiAoaW5Eb2ModGhpcy5ub2RlKSkge1xuICAgIHRoaXMuY2FsbEhvb2soYXR0YWNoKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBmcmFnbWVudCwgbXVsdGktbm9kZXMgdmVyc2lvblxuICovXG5cbmZ1bmN0aW9uIG11bHRpUmVtb3ZlKCkge1xuICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIHNob3VsZENhbGxSZW1vdmUgPSBpbkRvYyh0aGlzLm5vZGUpO1xuICB0aGlzLmJlZm9yZVJlbW92ZSgpO1xuICByZW1vdmVOb2RlUmFuZ2UodGhpcy5ub2RlLCB0aGlzLmVuZCwgdGhpcy52bSwgdGhpcy5mcmFnLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHNob3VsZENhbGxSZW1vdmUpIHtcbiAgICAgIHNlbGYuY2FsbEhvb2soZGV0YWNoKTtcbiAgICB9XG4gICAgc2VsZi5kZXN0cm95KCk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFByZXBhcmUgdGhlIGZyYWdtZW50IGZvciByZW1vdmFsLlxuICovXG5cbkZyYWdtZW50LnByb3RvdHlwZS5iZWZvcmVSZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBpLCBsO1xuICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIC8vIGNhbGwgdGhlIHNhbWUgbWV0aG9kIHJlY3Vyc2l2ZWx5IG9uIGNoaWxkXG4gICAgLy8gZnJhZ21lbnRzLCBkZXB0aC1maXJzdFxuICAgIHRoaXMuY2hpbGRGcmFnc1tpXS5iZWZvcmVSZW1vdmUoZmFsc2UpO1xuICB9XG4gIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIC8vIENhbGwgZGVzdHJveSBmb3IgYWxsIGNvbnRhaW5lZCBpbnN0YW5jZXMsXG4gICAgLy8gd2l0aCByZW1vdmU6ZmFsc2UgYW5kIGRlZmVyOnRydWUuXG4gICAgLy8gRGVmZXIgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugd2UgbmVlZCB0b1xuICAgIC8vIGtlZXAgdGhlIGNoaWxkcmVuIHRvIGNhbGwgZGV0YWNoIGhvb2tzXG4gICAgLy8gb24gdGhlbS5cbiAgICB0aGlzLmNoaWxkcmVuW2ldLiRkZXN0cm95KGZhbHNlLCB0cnVlKTtcbiAgfVxuICB2YXIgZGlycyA9IHRoaXMudW5saW5rLmRpcnM7XG4gIGZvciAoaSA9IDAsIGwgPSBkaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIC8vIGRpc2FibGUgdGhlIHdhdGNoZXJzIG9uIGFsbCB0aGUgZGlyZWN0aXZlc1xuICAgIC8vIHNvIHRoYXQgdGhlIHJlbmRlcmVkIGNvbnRlbnQgc3RheXMgdGhlIHNhbWVcbiAgICAvLyBkdXJpbmcgcmVtb3ZhbC5cbiAgICBkaXJzW2ldLl93YXRjaGVyICYmIGRpcnNbaV0uX3dhdGNoZXIudGVhcmRvd24oKTtcbiAgfVxufTtcblxuLyoqXG4gKiBEZXN0cm95IHRoZSBmcmFnbWVudC5cbiAqL1xuXG5GcmFnbWVudC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMucGFyZW50RnJhZykge1xuICAgIHRoaXMucGFyZW50RnJhZy5jaGlsZEZyYWdzLiRyZW1vdmUodGhpcyk7XG4gIH1cbiAgdGhpcy5ub2RlLl9fdl9mcmFnID0gbnVsbDtcbiAgdGhpcy51bmxpbmsoKTtcbn07XG5cbi8qKlxuICogQ2FsbCBhdHRhY2ggaG9vayBmb3IgYSBWdWUgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHtWdWV9IGNoaWxkXG4gKi9cblxuZnVuY3Rpb24gYXR0YWNoKGNoaWxkKSB7XG4gIGlmICghY2hpbGQuX2lzQXR0YWNoZWQgJiYgaW5Eb2MoY2hpbGQuJGVsKSkge1xuICAgIGNoaWxkLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcbiAgfVxufVxuXG4vKipcbiAqIENhbGwgZGV0YWNoIGhvb2sgZm9yIGEgVnVlIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuICovXG5cbmZ1bmN0aW9uIGRldGFjaChjaGlsZCkge1xuICBpZiAoY2hpbGQuX2lzQXR0YWNoZWQgJiYgIWluRG9jKGNoaWxkLiRlbCkpIHtcbiAgICBjaGlsZC5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XG4gIH1cbn1cblxudmFyIGxpbmtlckNhY2hlID0gbmV3IENhY2hlKDUwMDApO1xuXG4vKipcbiAqIEEgZmFjdG9yeSB0aGF0IGNhbiBiZSB1c2VkIHRvIGNyZWF0ZSBpbnN0YW5jZXMgb2YgYVxuICogZnJhZ21lbnQuIENhY2hlcyB0aGUgY29tcGlsZWQgbGlua2VyIGlmIHBvc3NpYmxlLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtFbGVtZW50fFN0cmluZ30gZWxcbiAqL1xuZnVuY3Rpb24gRnJhZ21lbnRGYWN0b3J5KHZtLCBlbCkge1xuICB0aGlzLnZtID0gdm07XG4gIHZhciB0ZW1wbGF0ZTtcbiAgdmFyIGlzU3RyaW5nID0gdHlwZW9mIGVsID09PSAnc3RyaW5nJztcbiAgaWYgKGlzU3RyaW5nIHx8IGlzVGVtcGxhdGUoZWwpICYmICFlbC5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuICAgIHRlbXBsYXRlID0gcGFyc2VUZW1wbGF0ZShlbCwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgdGVtcGxhdGUuYXBwZW5kQ2hpbGQoZWwpO1xuICB9XG4gIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgLy8gbGlua2VyIGNhbiBiZSBjYWNoZWQsIGJ1dCBvbmx5IGZvciBjb21wb25lbnRzXG4gIHZhciBsaW5rZXI7XG4gIHZhciBjaWQgPSB2bS5jb25zdHJ1Y3Rvci5jaWQ7XG4gIGlmIChjaWQgPiAwKSB7XG4gICAgdmFyIGNhY2hlSWQgPSBjaWQgKyAoaXNTdHJpbmcgPyBlbCA6IGdldE91dGVySFRNTChlbCkpO1xuICAgIGxpbmtlciA9IGxpbmtlckNhY2hlLmdldChjYWNoZUlkKTtcbiAgICBpZiAoIWxpbmtlcikge1xuICAgICAgbGlua2VyID0gY29tcGlsZSh0ZW1wbGF0ZSwgdm0uJG9wdGlvbnMsIHRydWUpO1xuICAgICAgbGlua2VyQ2FjaGUucHV0KGNhY2hlSWQsIGxpbmtlcik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxpbmtlciA9IGNvbXBpbGUodGVtcGxhdGUsIHZtLiRvcHRpb25zLCB0cnVlKTtcbiAgfVxuICB0aGlzLmxpbmtlciA9IGxpbmtlcjtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBmcmFnbWVudCBpbnN0YW5jZSB3aXRoIGdpdmVuIGhvc3QgYW5kIHNjb3BlLlxuICpcbiAqIEBwYXJhbSB7VnVlfSBob3N0XG4gKiBAcGFyYW0ge09iamVjdH0gc2NvcGVcbiAqIEBwYXJhbSB7RnJhZ21lbnR9IHBhcmVudEZyYWdcbiAqL1xuXG5GcmFnbWVudEZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChob3N0LCBzY29wZSwgcGFyZW50RnJhZykge1xuICB2YXIgZnJhZyA9IGNsb25lTm9kZSh0aGlzLnRlbXBsYXRlKTtcbiAgcmV0dXJuIG5ldyBGcmFnbWVudCh0aGlzLmxpbmtlciwgdGhpcy52bSwgZnJhZywgaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpO1xufTtcblxudmFyIE9OID0gNzAwO1xudmFyIE1PREVMID0gODAwO1xudmFyIEJJTkQgPSA4NTA7XG52YXIgVFJBTlNJVElPTiA9IDExMDA7XG52YXIgRUwgPSAxNTAwO1xudmFyIENPTVBPTkVOVCA9IDE1MDA7XG52YXIgUEFSVElBTCA9IDE3NTA7XG52YXIgSUYgPSAyMTAwO1xudmFyIEZPUiA9IDIyMDA7XG52YXIgU0xPVCA9IDIzMDA7XG5cbnZhciB1aWQkMyA9IDA7XG5cbnZhciB2Rm9yID0ge1xuXG4gIHByaW9yaXR5OiBGT1IsXG4gIHRlcm1pbmFsOiB0cnVlLFxuXG4gIHBhcmFtczogWyd0cmFjay1ieScsICdzdGFnZ2VyJywgJ2VudGVyLXN0YWdnZXInLCAnbGVhdmUtc3RhZ2dlciddLFxuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gc3VwcG9ydCBcIml0ZW0gaW4vb2YgaXRlbXNcIiBzeW50YXhcbiAgICB2YXIgaW5NYXRjaCA9IHRoaXMuZXhwcmVzc2lvbi5tYXRjaCgvKC4qKSAoPzppbnxvZikgKC4qKS8pO1xuICAgIGlmIChpbk1hdGNoKSB7XG4gICAgICB2YXIgaXRNYXRjaCA9IGluTWF0Y2hbMV0ubWF0Y2goL1xcKCguKiksKC4qKVxcKS8pO1xuICAgICAgaWYgKGl0TWF0Y2gpIHtcbiAgICAgICAgdGhpcy5pdGVyYXRvciA9IGl0TWF0Y2hbMV0udHJpbSgpO1xuICAgICAgICB0aGlzLmFsaWFzID0gaXRNYXRjaFsyXS50cmltKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmFsaWFzID0gaW5NYXRjaFsxXS50cmltKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmV4cHJlc3Npb24gPSBpbk1hdGNoWzJdO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5hbGlhcykge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHYtZm9yIGV4cHJlc3Npb24gXCInICsgdGhpcy5kZXNjcmlwdG9yLnJhdyArICdcIjogJyArICdhbGlhcyBpcyByZXF1aXJlZC4nLCB0aGlzLnZtKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyB1aWQgYXMgYSBjYWNoZSBpZGVudGlmaWVyXG4gICAgdGhpcy5pZCA9ICdfX3YtZm9yX18nICsgKyt1aWQkMztcblxuICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgYW4gb3B0aW9uIGxpc3QsXG4gICAgLy8gc28gdGhhdCB3ZSBrbm93IGlmIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSA8c2VsZWN0PidzXG4gICAgLy8gdi1tb2RlbCB3aGVuIHRoZSBvcHRpb24gbGlzdCBoYXMgY2hhbmdlZC5cbiAgICAvLyBiZWNhdXNlIHYtbW9kZWwgaGFzIGEgbG93ZXIgcHJpb3JpdHkgdGhhbiB2LWZvcixcbiAgICAvLyB0aGUgdi1tb2RlbCBpcyBub3QgYm91bmQgaGVyZSB5ZXQsIHNvIHdlIGhhdmUgdG9cbiAgICAvLyByZXRyaXZlIGl0IGluIHRoZSBhY3R1YWwgdXBkYXRlTW9kZWwoKSBmdW5jdGlvbi5cbiAgICB2YXIgdGFnID0gdGhpcy5lbC50YWdOYW1lO1xuICAgIHRoaXMuaXNPcHRpb24gPSAodGFnID09PSAnT1BUSU9OJyB8fCB0YWcgPT09ICdPUFRHUk9VUCcpICYmIHRoaXMuZWwucGFyZW50Tm9kZS50YWdOYW1lID09PSAnU0VMRUNUJztcblxuICAgIC8vIHNldHVwIGFuY2hvciBub2Rlc1xuICAgIHRoaXMuc3RhcnQgPSBjcmVhdGVBbmNob3IoJ3YtZm9yLXN0YXJ0Jyk7XG4gICAgdGhpcy5lbmQgPSBjcmVhdGVBbmNob3IoJ3YtZm9yLWVuZCcpO1xuICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5lbmQpO1xuICAgIGJlZm9yZSh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7XG5cbiAgICAvLyBjYWNoZVxuICAgIHRoaXMuY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgLy8gZnJhZ21lbnQgZmFjdG9yeVxuICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgdGhpcy5lbCk7XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoZGF0YSkge1xuICAgIHRoaXMuZGlmZihkYXRhKTtcbiAgICB0aGlzLnVwZGF0ZVJlZigpO1xuICAgIHRoaXMudXBkYXRlTW9kZWwoKTtcbiAgfSxcblxuICAvKipcbiAgICogRGlmZiwgYmFzZWQgb24gbmV3IGRhdGEgYW5kIG9sZCBkYXRhLCBkZXRlcm1pbmUgdGhlXG4gICAqIG1pbmltdW0gYW1vdW50IG9mIERPTSBtYW5pcHVsYXRpb25zIG5lZWRlZCB0byBtYWtlIHRoZVxuICAgKiBET00gcmVmbGVjdCB0aGUgbmV3IGRhdGEgQXJyYXkuXG4gICAqXG4gICAqIFRoZSBhbGdvcml0aG0gZGlmZnMgdGhlIG5ldyBkYXRhIEFycmF5IGJ5IHN0b3JpbmcgYVxuICAgKiBoaWRkZW4gcmVmZXJlbmNlIHRvIGFuIG93bmVyIHZtIGluc3RhbmNlIG9uIHByZXZpb3VzbHlcbiAgICogc2VlbiBkYXRhLiBUaGlzIGFsbG93cyB1cyB0byBhY2hpZXZlIE8obikgd2hpY2ggaXNcbiAgICogYmV0dGVyIHRoYW4gYSBsZXZlbnNodGVpbiBkaXN0YW5jZSBiYXNlZCBhbGdvcml0aG0sXG4gICAqIHdoaWNoIGlzIE8obSAqIG4pLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBkYXRhXG4gICAqL1xuXG4gIGRpZmY6IGZ1bmN0aW9uIGRpZmYoZGF0YSkge1xuICAgIC8vIGNoZWNrIGlmIHRoZSBBcnJheSB3YXMgY29udmVydGVkIGZyb20gYW4gT2JqZWN0XG4gICAgdmFyIGl0ZW0gPSBkYXRhWzBdO1xuICAgIHZhciBjb252ZXJ0ZWRGcm9tT2JqZWN0ID0gdGhpcy5mcm9tT2JqZWN0ID0gaXNPYmplY3QoaXRlbSkgJiYgaGFzT3duKGl0ZW0sICcka2V5JykgJiYgaGFzT3duKGl0ZW0sICckdmFsdWUnKTtcblxuICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcbiAgICB2YXIgb2xkRnJhZ3MgPSB0aGlzLmZyYWdzO1xuICAgIHZhciBmcmFncyA9IHRoaXMuZnJhZ3MgPSBuZXcgQXJyYXkoZGF0YS5sZW5ndGgpO1xuICAgIHZhciBhbGlhcyA9IHRoaXMuYWxpYXM7XG4gICAgdmFyIGl0ZXJhdG9yID0gdGhpcy5pdGVyYXRvcjtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLnN0YXJ0O1xuICAgIHZhciBlbmQgPSB0aGlzLmVuZDtcbiAgICB2YXIgaW5Eb2N1bWVudCA9IGluRG9jKHN0YXJ0KTtcbiAgICB2YXIgaW5pdCA9ICFvbGRGcmFncztcbiAgICB2YXIgaSwgbCwgZnJhZywga2V5LCB2YWx1ZSwgcHJpbWl0aXZlO1xuXG4gICAgLy8gRmlyc3QgcGFzcywgZ28gdGhyb3VnaCB0aGUgbmV3IEFycmF5IGFuZCBmaWxsIHVwXG4gICAgLy8gdGhlIG5ldyBmcmFncyBhcnJheS4gSWYgYSBwaWVjZSBvZiBkYXRhIGhhcyBhIGNhY2hlZFxuICAgIC8vIGluc3RhbmNlIGZvciBpdCwgd2UgcmV1c2UgaXQuIE90aGVyd2lzZSBidWlsZCBhIG5ld1xuICAgIC8vIGluc3RhbmNlLlxuICAgIGZvciAoaSA9IDAsIGwgPSBkYXRhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgaXRlbSA9IGRhdGFbaV07XG4gICAgICBrZXkgPSBjb252ZXJ0ZWRGcm9tT2JqZWN0ID8gaXRlbS4ka2V5IDogbnVsbDtcbiAgICAgIHZhbHVlID0gY29udmVydGVkRnJvbU9iamVjdCA/IGl0ZW0uJHZhbHVlIDogaXRlbTtcbiAgICAgIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG4gICAgICBmcmFnID0gIWluaXQgJiYgdGhpcy5nZXRDYWNoZWRGcmFnKHZhbHVlLCBpLCBrZXkpO1xuICAgICAgaWYgKGZyYWcpIHtcbiAgICAgICAgLy8gcmV1c2FibGUgZnJhZ21lbnRcbiAgICAgICAgZnJhZy5yZXVzZWQgPSB0cnVlO1xuICAgICAgICAvLyB1cGRhdGUgJGluZGV4XG4gICAgICAgIGZyYWcuc2NvcGUuJGluZGV4ID0gaTtcbiAgICAgICAgLy8gdXBkYXRlICRrZXlcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgIGZyYWcuc2NvcGUuJGtleSA9IGtleTtcbiAgICAgICAgfVxuICAgICAgICAvLyB1cGRhdGUgaXRlcmF0b3JcbiAgICAgICAgaWYgKGl0ZXJhdG9yKSB7XG4gICAgICAgICAgZnJhZy5zY29wZVtpdGVyYXRvcl0gPSBrZXkgIT09IG51bGwgPyBrZXkgOiBpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHVwZGF0ZSBkYXRhIGZvciB0cmFjay1ieSwgb2JqZWN0IHJlcGVhdCAmXG4gICAgICAgIC8vIHByaW1pdGl2ZSB2YWx1ZXMuXG4gICAgICAgIGlmICh0cmFja0J5S2V5IHx8IGNvbnZlcnRlZEZyb21PYmplY3QgfHwgcHJpbWl0aXZlKSB7XG4gICAgICAgICAgd2l0aG91dENvbnZlcnNpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnJhZy5zY29wZVthbGlhc10gPSB2YWx1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbmV3IGlzbnRhbmNlXG4gICAgICAgIGZyYWcgPSB0aGlzLmNyZWF0ZSh2YWx1ZSwgYWxpYXMsIGksIGtleSk7XG4gICAgICAgIGZyYWcuZnJlc2ggPSAhaW5pdDtcbiAgICAgIH1cbiAgICAgIGZyYWdzW2ldID0gZnJhZztcbiAgICAgIGlmIChpbml0KSB7XG4gICAgICAgIGZyYWcuYmVmb3JlKGVuZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gd2UncmUgZG9uZSBmb3IgdGhlIGluaXRpYWwgcmVuZGVyLlxuICAgIGlmIChpbml0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU2Vjb25kIHBhc3MsIGdvIHRocm91Z2ggdGhlIG9sZCBmcmFnbWVudHMgYW5kXG4gICAgLy8gZGVzdHJveSB0aG9zZSB3aG8gYXJlIG5vdCByZXVzZWQgKGFuZCByZW1vdmUgdGhlbVxuICAgIC8vIGZyb20gY2FjaGUpXG4gICAgdmFyIHJlbW92YWxJbmRleCA9IDA7XG4gICAgdmFyIHRvdGFsUmVtb3ZlZCA9IG9sZEZyYWdzLmxlbmd0aCAtIGZyYWdzLmxlbmd0aDtcbiAgICAvLyB3aGVuIHJlbW92aW5nIGEgbGFyZ2UgbnVtYmVyIG9mIGZyYWdtZW50cywgd2F0Y2hlciByZW1vdmFsXG4gICAgLy8gdHVybnMgb3V0IHRvIGJlIGEgcGVyZiBib3R0bGVuZWNrLCBzbyB3ZSBiYXRjaCB0aGUgd2F0Y2hlclxuICAgIC8vIHJlbW92YWxzIGludG8gYSBzaW5nbGUgZmlsdGVyIGNhbGwhXG4gICAgdGhpcy52bS5fdkZvclJlbW92aW5nID0gdHJ1ZTtcbiAgICBmb3IgKGkgPSAwLCBsID0gb2xkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmcmFnID0gb2xkRnJhZ3NbaV07XG4gICAgICBpZiAoIWZyYWcucmV1c2VkKSB7XG4gICAgICAgIHRoaXMuZGVsZXRlQ2FjaGVkRnJhZyhmcmFnKTtcbiAgICAgICAgdGhpcy5yZW1vdmUoZnJhZywgcmVtb3ZhbEluZGV4KyssIHRvdGFsUmVtb3ZlZCwgaW5Eb2N1bWVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMudm0uX3ZGb3JSZW1vdmluZyA9IGZhbHNlO1xuICAgIGlmIChyZW1vdmFsSW5kZXgpIHtcbiAgICAgIHRoaXMudm0uX3dhdGNoZXJzID0gdGhpcy52bS5fd2F0Y2hlcnMuZmlsdGVyKGZ1bmN0aW9uICh3KSB7XG4gICAgICAgIHJldHVybiB3LmFjdGl2ZTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEZpbmFsIHBhc3MsIG1vdmUvaW5zZXJ0IG5ldyBmcmFnbWVudHMgaW50byB0aGVcbiAgICAvLyByaWdodCBwbGFjZS5cbiAgICB2YXIgdGFyZ2V0UHJldiwgcHJldkVsLCBjdXJyZW50UHJldjtcbiAgICB2YXIgaW5zZXJ0aW9uSW5kZXggPSAwO1xuICAgIGZvciAoaSA9IDAsIGwgPSBmcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGZyYWcgPSBmcmFnc1tpXTtcbiAgICAgIC8vIHRoaXMgaXMgdGhlIGZyYWcgdGhhdCB3ZSBzaG91bGQgYmUgYWZ0ZXJcbiAgICAgIHRhcmdldFByZXYgPSBmcmFnc1tpIC0gMV07XG4gICAgICBwcmV2RWwgPSB0YXJnZXRQcmV2ID8gdGFyZ2V0UHJldi5zdGFnZ2VyQ2IgPyB0YXJnZXRQcmV2LnN0YWdnZXJBbmNob3IgOiB0YXJnZXRQcmV2LmVuZCB8fCB0YXJnZXRQcmV2Lm5vZGUgOiBzdGFydDtcbiAgICAgIGlmIChmcmFnLnJldXNlZCAmJiAhZnJhZy5zdGFnZ2VyQ2IpIHtcbiAgICAgICAgY3VycmVudFByZXYgPSBmaW5kUHJldkZyYWcoZnJhZywgc3RhcnQsIHRoaXMuaWQpO1xuICAgICAgICBpZiAoY3VycmVudFByZXYgIT09IHRhcmdldFByZXYgJiYgKCFjdXJyZW50UHJldiB8fFxuICAgICAgICAvLyBvcHRpbWl6YXRpb24gZm9yIG1vdmluZyBhIHNpbmdsZSBpdGVtLlxuICAgICAgICAvLyB0aGFua3MgdG8gc3VnZ2VzdGlvbnMgYnkgQGxpdm9yYXMgaW4gIzE4MDdcbiAgICAgICAgZmluZFByZXZGcmFnKGN1cnJlbnRQcmV2LCBzdGFydCwgdGhpcy5pZCkgIT09IHRhcmdldFByZXYpKSB7XG4gICAgICAgICAgdGhpcy5tb3ZlKGZyYWcsIHByZXZFbCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG5ldyBpbnN0YW5jZSwgb3Igc3RpbGwgaW4gc3RhZ2dlci5cbiAgICAgICAgLy8gaW5zZXJ0IHdpdGggdXBkYXRlZCBzdGFnZ2VyIGluZGV4LlxuICAgICAgICB0aGlzLmluc2VydChmcmFnLCBpbnNlcnRpb25JbmRleCsrLCBwcmV2RWwsIGluRG9jdW1lbnQpO1xuICAgICAgfVxuICAgICAgZnJhZy5yZXVzZWQgPSBmcmFnLmZyZXNoID0gZmFsc2U7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgZnJhZ21lbnQgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFsaWFzXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge1N0cmluZ30gW2tleV1cbiAgICogQHJldHVybiB7RnJhZ21lbnR9XG4gICAqL1xuXG4gIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlKHZhbHVlLCBhbGlhcywgaW5kZXgsIGtleSkge1xuICAgIHZhciBob3N0ID0gdGhpcy5faG9zdDtcbiAgICAvLyBjcmVhdGUgaXRlcmF0aW9uIHNjb3BlXG4gICAgdmFyIHBhcmVudFNjb3BlID0gdGhpcy5fc2NvcGUgfHwgdGhpcy52bTtcbiAgICB2YXIgc2NvcGUgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlKTtcbiAgICAvLyByZWYgaG9sZGVyIGZvciB0aGUgc2NvcGVcbiAgICBzY29wZS4kcmVmcyA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUuJHJlZnMpO1xuICAgIHNjb3BlLiRlbHMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlLiRlbHMpO1xuICAgIC8vIG1ha2Ugc3VyZSBwb2ludCAkcGFyZW50IHRvIHBhcmVudCBzY29wZVxuICAgIHNjb3BlLiRwYXJlbnQgPSBwYXJlbnRTY29wZTtcbiAgICAvLyBmb3IgdHdvLXdheSBiaW5kaW5nIG9uIGFsaWFzXG4gICAgc2NvcGUuJGZvckNvbnRleHQgPSB0aGlzO1xuICAgIC8vIGRlZmluZSBzY29wZSBwcm9wZXJ0aWVzXG4gICAgLy8gaW1wb3J0YW50OiBkZWZpbmUgdGhlIHNjb3BlIGFsaWFzIHdpdGhvdXQgZm9yY2VkIGNvbnZlcnNpb25cbiAgICAvLyBzbyB0aGF0IGZyb3plbiBkYXRhIHN0cnVjdHVyZXMgcmVtYWluIG5vbi1yZWFjdGl2ZS5cbiAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG4gICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgYWxpYXMsIHZhbHVlKTtcbiAgICB9KTtcbiAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgJyRpbmRleCcsIGluZGV4KTtcbiAgICBpZiAoa2V5KSB7XG4gICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgJyRrZXknLCBrZXkpO1xuICAgIH0gZWxzZSBpZiAoc2NvcGUuJGtleSkge1xuICAgICAgLy8gYXZvaWQgYWNjaWRlbnRhbCBmYWxsYmFja1xuICAgICAgZGVmKHNjb3BlLCAnJGtleScsIG51bGwpO1xuICAgIH1cbiAgICBpZiAodGhpcy5pdGVyYXRvcikge1xuICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsIHRoaXMuaXRlcmF0b3IsIGtleSAhPT0gbnVsbCA/IGtleSA6IGluZGV4KTtcbiAgICB9XG4gICAgdmFyIGZyYWcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKGhvc3QsIHNjb3BlLCB0aGlzLl9mcmFnKTtcbiAgICBmcmFnLmZvcklkID0gdGhpcy5pZDtcbiAgICB0aGlzLmNhY2hlRnJhZyh2YWx1ZSwgZnJhZywgaW5kZXgsIGtleSk7XG4gICAgcmV0dXJuIGZyYWc7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgdi1yZWYgb24gb3duZXIgdm0uXG4gICAqL1xuXG4gIHVwZGF0ZVJlZjogZnVuY3Rpb24gdXBkYXRlUmVmKCkge1xuICAgIHZhciByZWYgPSB0aGlzLmRlc2NyaXB0b3IucmVmO1xuICAgIGlmICghcmVmKSByZXR1cm47XG4gICAgdmFyIGhhc2ggPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHJlZnM7XG4gICAgdmFyIHJlZnM7XG4gICAgaWYgKCF0aGlzLmZyb21PYmplY3QpIHtcbiAgICAgIHJlZnMgPSB0aGlzLmZyYWdzLm1hcChmaW5kVm1Gcm9tRnJhZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlZnMgPSB7fTtcbiAgICAgIHRoaXMuZnJhZ3MuZm9yRWFjaChmdW5jdGlvbiAoZnJhZykge1xuICAgICAgICByZWZzW2ZyYWcuc2NvcGUuJGtleV0gPSBmaW5kVm1Gcm9tRnJhZyhmcmFnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBoYXNoW3JlZl0gPSByZWZzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBGb3Igb3B0aW9uIGxpc3RzLCB1cGRhdGUgdGhlIGNvbnRhaW5pbmcgdi1tb2RlbCBvblxuICAgKiBwYXJlbnQgPHNlbGVjdD4uXG4gICAqL1xuXG4gIHVwZGF0ZU1vZGVsOiBmdW5jdGlvbiB1cGRhdGVNb2RlbCgpIHtcbiAgICBpZiAodGhpcy5pc09wdGlvbikge1xuICAgICAgdmFyIHBhcmVudCA9IHRoaXMuc3RhcnQucGFyZW50Tm9kZTtcbiAgICAgIHZhciBtb2RlbCA9IHBhcmVudCAmJiBwYXJlbnQuX192X21vZGVsO1xuICAgICAgaWYgKG1vZGVsKSB7XG4gICAgICAgIG1vZGVsLmZvcmNlVXBkYXRlKCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBJbnNlcnQgYSBmcmFnbWVudC4gSGFuZGxlcyBzdGFnZ2VyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge05vZGV9IHByZXZFbFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGluRG9jdW1lbnRcbiAgICovXG5cbiAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoZnJhZywgaW5kZXgsIHByZXZFbCwgaW5Eb2N1bWVudCkge1xuICAgIGlmIChmcmFnLnN0YWdnZXJDYikge1xuICAgICAgZnJhZy5zdGFnZ2VyQ2IuY2FuY2VsKCk7XG4gICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG4gICAgfVxuICAgIHZhciBzdGFnZ2VyQW1vdW50ID0gdGhpcy5nZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCBudWxsLCAnZW50ZXInKTtcbiAgICBpZiAoaW5Eb2N1bWVudCAmJiBzdGFnZ2VyQW1vdW50KSB7XG4gICAgICAvLyBjcmVhdGUgYW4gYW5jaG9yIGFuZCBpbnNlcnQgaXQgc3luY2hyb25vdXNseSxcbiAgICAgIC8vIHNvIHRoYXQgd2UgY2FuIHJlc29sdmUgdGhlIGNvcnJlY3Qgb3JkZXIgd2l0aG91dFxuICAgICAgLy8gd29ycnlpbmcgYWJvdXQgc29tZSBlbGVtZW50cyBub3QgaW5zZXJ0ZWQgeWV0XG4gICAgICB2YXIgYW5jaG9yID0gZnJhZy5zdGFnZ2VyQW5jaG9yO1xuICAgICAgaWYgKCFhbmNob3IpIHtcbiAgICAgICAgYW5jaG9yID0gZnJhZy5zdGFnZ2VyQW5jaG9yID0gY3JlYXRlQW5jaG9yKCdzdGFnZ2VyLWFuY2hvcicpO1xuICAgICAgICBhbmNob3IuX192X2ZyYWcgPSBmcmFnO1xuICAgICAgfVxuICAgICAgYWZ0ZXIoYW5jaG9yLCBwcmV2RWwpO1xuICAgICAgdmFyIG9wID0gZnJhZy5zdGFnZ2VyQ2IgPSBjYW5jZWxsYWJsZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcbiAgICAgICAgZnJhZy5iZWZvcmUoYW5jaG9yKTtcbiAgICAgICAgcmVtb3ZlKGFuY2hvcik7XG4gICAgICB9KTtcbiAgICAgIHNldFRpbWVvdXQob3AsIHN0YWdnZXJBbW91bnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdGFyZ2V0ID0gcHJldkVsLm5leHRTaWJsaW5nO1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAvLyByZXNldCBlbmQgYW5jaG9yIHBvc2l0aW9uIGluIGNhc2UgdGhlIHBvc2l0aW9uIHdhcyBtZXNzZWQgdXBcbiAgICAgICAgLy8gYnkgYW4gZXh0ZXJuYWwgZHJhZy1uLWRyb3AgbGlicmFyeS5cbiAgICAgICAgYWZ0ZXIodGhpcy5lbmQsIHByZXZFbCk7XG4gICAgICAgIHRhcmdldCA9IHRoaXMuZW5kO1xuICAgICAgfVxuICAgICAgZnJhZy5iZWZvcmUodGFyZ2V0KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIGZyYWdtZW50LiBIYW5kbGVzIHN0YWdnZXJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7TnVtYmVyfSB0b3RhbFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGluRG9jdW1lbnRcbiAgICovXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoZnJhZywgaW5kZXgsIHRvdGFsLCBpbkRvY3VtZW50KSB7XG4gICAgaWYgKGZyYWcuc3RhZ2dlckNiKSB7XG4gICAgICBmcmFnLnN0YWdnZXJDYi5jYW5jZWwoKTtcbiAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcbiAgICAgIC8vIGl0J3Mgbm90IHBvc3NpYmxlIGZvciB0aGUgc2FtZSBmcmFnIHRvIGJlIHJlbW92ZWRcbiAgICAgIC8vIHR3aWNlLCBzbyBpZiB3ZSBoYXZlIGEgcGVuZGluZyBzdGFnZ2VyIGNhbGxiYWNrLFxuICAgICAgLy8gaXQgbWVhbnMgdGhpcyBmcmFnIGlzIHF1ZXVlZCBmb3IgZW50ZXIgYnV0IHJlbW92ZWRcbiAgICAgIC8vIGJlZm9yZSBpdHMgdHJhbnNpdGlvbiBzdGFydGVkLiBTaW5jZSBpdCBpcyBhbHJlYWR5XG4gICAgICAvLyBkZXN0cm95ZWQsIHdlIGNhbiBqdXN0IGxlYXZlIGl0IGluIGRldGFjaGVkIHN0YXRlLlxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgc3RhZ2dlckFtb3VudCA9IHRoaXMuZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgdG90YWwsICdsZWF2ZScpO1xuICAgIGlmIChpbkRvY3VtZW50ICYmIHN0YWdnZXJBbW91bnQpIHtcbiAgICAgIHZhciBvcCA9IGZyYWcuc3RhZ2dlckNiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKCkge1xuICAgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG4gICAgICAgIGZyYWcucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICAgIHNldFRpbWVvdXQob3AsIHN0YWdnZXJBbW91bnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmcmFnLnJlbW92ZSgpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogTW92ZSBhIGZyYWdtZW50IHRvIGEgbmV3IHBvc2l0aW9uLlxuICAgKiBGb3JjZSBubyB0cmFuc2l0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7Tm9kZX0gcHJldkVsXG4gICAqL1xuXG4gIG1vdmU6IGZ1bmN0aW9uIG1vdmUoZnJhZywgcHJldkVsKSB7XG4gICAgLy8gZml4IGEgY29tbW9uIGlzc3VlIHdpdGggU29ydGFibGU6XG4gICAgLy8gaWYgcHJldkVsIGRvZXNuJ3QgaGF2ZSBuZXh0U2libGluZywgdGhpcyBtZWFucyBpdCdzXG4gICAgLy8gYmVlbiBkcmFnZ2VkIGFmdGVyIHRoZSBlbmQgYW5jaG9yLiBKdXN0IHJlLXBvc2l0aW9uXG4gICAgLy8gdGhlIGVuZCBhbmNob3IgdG8gdGhlIGVuZCBvZiB0aGUgY29udGFpbmVyLlxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghcHJldkVsLm5leHRTaWJsaW5nKSB7XG4gICAgICB0aGlzLmVuZC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMuZW5kKTtcbiAgICB9XG4gICAgZnJhZy5iZWZvcmUocHJldkVsLm5leHRTaWJsaW5nLCBmYWxzZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENhY2hlIGEgZnJhZ21lbnQgdXNpbmcgdHJhY2stYnkgb3IgdGhlIG9iamVjdCBrZXkuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtrZXldXG4gICAqL1xuXG4gIGNhY2hlRnJhZzogZnVuY3Rpb24gY2FjaGVGcmFnKHZhbHVlLCBmcmFnLCBpbmRleCwga2V5KSB7XG4gICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuICAgIHZhciBjYWNoZSA9IHRoaXMuY2FjaGU7XG4gICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG4gICAgdmFyIGlkO1xuICAgIGlmIChrZXkgfHwgdHJhY2tCeUtleSB8fCBwcmltaXRpdmUpIHtcbiAgICAgIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG4gICAgICBpZiAoIWNhY2hlW2lkXSkge1xuICAgICAgICBjYWNoZVtpZF0gPSBmcmFnO1xuICAgICAgfSBlbHNlIGlmICh0cmFja0J5S2V5ICE9PSAnJGluZGV4Jykge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlkID0gdGhpcy5pZDtcbiAgICAgIGlmIChoYXNPd24odmFsdWUsIGlkKSkge1xuICAgICAgICBpZiAodmFsdWVbaWRdID09PSBudWxsKSB7XG4gICAgICAgICAgdmFsdWVbaWRdID0gZnJhZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWx1ZSkpIHtcbiAgICAgICAgZGVmKHZhbHVlLCBpZCwgZnJhZyk7XG4gICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgd2FybignRnJvemVuIHYtZm9yIG9iamVjdHMgY2Fubm90IGJlIGF1dG9tYXRpY2FsbHkgdHJhY2tlZCwgbWFrZSBzdXJlIHRvICcgKyAncHJvdmlkZSBhIHRyYWNrLWJ5IGtleS4nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnJhZy5yYXcgPSB2YWx1ZTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IGEgY2FjaGVkIGZyYWdtZW50IGZyb20gdGhlIHZhbHVlL2luZGV4L2tleVxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAqIEByZXR1cm4ge0ZyYWdtZW50fVxuICAgKi9cblxuICBnZXRDYWNoZWRGcmFnOiBmdW5jdGlvbiBnZXRDYWNoZWRGcmFnKHZhbHVlLCBpbmRleCwga2V5KSB7XG4gICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuICAgIHZhciBmcmFnO1xuICAgIGlmIChrZXkgfHwgdHJhY2tCeUtleSB8fCBwcmltaXRpdmUpIHtcbiAgICAgIHZhciBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xuICAgICAgZnJhZyA9IHRoaXMuY2FjaGVbaWRdO1xuICAgIH0gZWxzZSB7XG4gICAgICBmcmFnID0gdmFsdWVbdGhpcy5pZF07XG4gICAgfVxuICAgIGlmIChmcmFnICYmIChmcmFnLnJldXNlZCB8fCBmcmFnLmZyZXNoKSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gZnJhZztcbiAgfSxcblxuICAvKipcbiAgICogRGVsZXRlIGEgZnJhZ21lbnQgZnJvbSBjYWNoZS5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKi9cblxuICBkZWxldGVDYWNoZWRGcmFnOiBmdW5jdGlvbiBkZWxldGVDYWNoZWRGcmFnKGZyYWcpIHtcbiAgICB2YXIgdmFsdWUgPSBmcmFnLnJhdztcbiAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG4gICAgdmFyIHNjb3BlID0gZnJhZy5zY29wZTtcbiAgICB2YXIgaW5kZXggPSBzY29wZS4kaW5kZXg7XG4gICAgLy8gZml4ICM5NDg6IGF2b2lkIGFjY2lkZW50YWxseSBmYWxsIHRocm91Z2ggdG9cbiAgICAvLyBhIHBhcmVudCByZXBlYXRlciB3aGljaCBoYXBwZW5zIHRvIGhhdmUgJGtleS5cbiAgICB2YXIga2V5ID0gaGFzT3duKHNjb3BlLCAnJGtleScpICYmIHNjb3BlLiRrZXk7XG4gICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG4gICAgaWYgKHRyYWNrQnlLZXkgfHwga2V5IHx8IHByaW1pdGl2ZSkge1xuICAgICAgdmFyIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG4gICAgICB0aGlzLmNhY2hlW2lkXSA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlW3RoaXMuaWRdID0gbnVsbDtcbiAgICAgIGZyYWcucmF3ID0gbnVsbDtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc3RhZ2dlciBhbW91bnQgZm9yIGFuIGluc2VydGlvbi9yZW1vdmFsLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge051bWJlcn0gdG90YWxcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAgICovXG5cbiAgZ2V0U3RhZ2dlcjogZnVuY3Rpb24gZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgdG90YWwsIHR5cGUpIHtcbiAgICB0eXBlID0gdHlwZSArICdTdGFnZ2VyJztcbiAgICB2YXIgdHJhbnMgPSBmcmFnLm5vZGUuX192X3RyYW5zO1xuICAgIHZhciBob29rcyA9IHRyYW5zICYmIHRyYW5zLmhvb2tzO1xuICAgIHZhciBob29rID0gaG9va3MgJiYgKGhvb2tzW3R5cGVdIHx8IGhvb2tzLnN0YWdnZXIpO1xuICAgIHJldHVybiBob29rID8gaG9vay5jYWxsKGZyYWcsIGluZGV4LCB0b3RhbCkgOiBpbmRleCAqIHBhcnNlSW50KHRoaXMucGFyYW1zW3R5cGVdIHx8IHRoaXMucGFyYW1zLnN0YWdnZXIsIDEwKTtcbiAgfSxcblxuICAvKipcbiAgICogUHJlLXByb2Nlc3MgdGhlIHZhbHVlIGJlZm9yZSBwaXBpbmcgaXQgdGhyb3VnaCB0aGVcbiAgICogZmlsdGVycy4gVGhpcyBpcyBwYXNzZWQgdG8gYW5kIGNhbGxlZCBieSB0aGUgd2F0Y2hlci5cbiAgICovXG5cbiAgX3ByZVByb2Nlc3M6IGZ1bmN0aW9uIF9wcmVQcm9jZXNzKHZhbHVlKSB7XG4gICAgLy8gcmVnYXJkbGVzcyBvZiB0eXBlLCBzdG9yZSB0aGUgdW4tZmlsdGVyZWQgcmF3IHZhbHVlLlxuICAgIHRoaXMucmF3VmFsdWUgPSB2YWx1ZTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBvc3QtcHJvY2VzcyB0aGUgdmFsdWUgYWZ0ZXIgaXQgaGFzIGJlZW4gcGlwZWQgdGhyb3VnaFxuICAgKiB0aGUgZmlsdGVycy4gVGhpcyBpcyBwYXNzZWQgdG8gYW5kIGNhbGxlZCBieSB0aGUgd2F0Y2hlci5cbiAgICpcbiAgICogSXQgaXMgbmVjZXNzYXJ5IGZvciB0aGlzIHRvIGJlIGNhbGxlZCBkdXJpbmcgdGhlXG4gICAqIHdhdGNoZXIncyBkZXBlbmRlbmN5IGNvbGxlY3Rpb24gcGhhc2UgYmVjYXVzZSB3ZSB3YW50XG4gICAqIHRoZSB2LWZvciB0byB1cGRhdGUgd2hlbiB0aGUgc291cmNlIE9iamVjdCBpcyBtdXRhdGVkLlxuICAgKi9cblxuICBfcG9zdFByb2Nlc3M6IGZ1bmN0aW9uIF9wb3N0UHJvY2Vzcyh2YWx1ZSkge1xuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICAgIC8vIGNvbnZlcnQgcGxhaW4gb2JqZWN0IHRvIGFycmF5LlxuICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7XG4gICAgICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuICAgICAgdmFyIHJlcyA9IG5ldyBBcnJheShpKTtcbiAgICAgIHZhciBrZXk7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgIHJlc1tpXSA9IHtcbiAgICAgICAgICAka2V5OiBrZXksXG4gICAgICAgICAgJHZhbHVlOiB2YWx1ZVtrZXldXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiAhaXNOYU4odmFsdWUpKSB7XG4gICAgICAgIHZhbHVlID0gcmFuZ2UodmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlIHx8IFtdO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICBpZiAodGhpcy5kZXNjcmlwdG9yLnJlZikge1xuICAgICAgKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRyZWZzW3RoaXMuZGVzY3JpcHRvci5yZWZdID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuZnJhZ3MpIHtcbiAgICAgIHZhciBpID0gdGhpcy5mcmFncy5sZW5ndGg7XG4gICAgICB2YXIgZnJhZztcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgZnJhZyA9IHRoaXMuZnJhZ3NbaV07XG4gICAgICAgIHRoaXMuZGVsZXRlQ2FjaGVkRnJhZyhmcmFnKTtcbiAgICAgICAgZnJhZy5kZXN0cm95KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEhlbHBlciB0byBmaW5kIHRoZSBwcmV2aW91cyBlbGVtZW50IHRoYXQgaXMgYSBmcmFnbWVudFxuICogYW5jaG9yLiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIGEgZGVzdHJveWVkIGZyYWcnc1xuICogZWxlbWVudCBjb3VsZCBzdGlsbCBiZSBsaW5nZXJpbmcgaW4gdGhlIERPTSBiZWZvcmUgaXRzXG4gKiBsZWF2aW5nIHRyYW5zaXRpb24gZmluaXNoZXMsIGJ1dCBpdHMgaW5zZXJ0ZWQgZmxhZ1xuICogc2hvdWxkIGhhdmUgYmVlbiBzZXQgdG8gZmFsc2Ugc28gd2UgY2FuIHNraXAgdGhlbS5cbiAqXG4gKiBJZiB0aGlzIGlzIGEgYmxvY2sgcmVwZWF0LCB3ZSB3YW50IHRvIG1ha2Ugc3VyZSB3ZSBvbmx5XG4gKiByZXR1cm4gZnJhZyB0aGF0IGlzIGJvdW5kIHRvIHRoaXMgdi1mb3IuIChzZWUgIzkyOSlcbiAqXG4gKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gKiBAcGFyYW0ge0NvbW1lbnR8VGV4dH0gYW5jaG9yXG4gKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAqIEByZXR1cm4ge0ZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIGZpbmRQcmV2RnJhZyhmcmFnLCBhbmNob3IsIGlkKSB7XG4gIHZhciBlbCA9IGZyYWcubm9kZS5wcmV2aW91c1NpYmxpbmc7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoIWVsKSByZXR1cm47XG4gIGZyYWcgPSBlbC5fX3ZfZnJhZztcbiAgd2hpbGUgKCghZnJhZyB8fCBmcmFnLmZvcklkICE9PSBpZCB8fCAhZnJhZy5pbnNlcnRlZCkgJiYgZWwgIT09IGFuY2hvcikge1xuICAgIGVsID0gZWwucHJldmlvdXNTaWJsaW5nO1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghZWwpIHJldHVybjtcbiAgICBmcmFnID0gZWwuX192X2ZyYWc7XG4gIH1cbiAgcmV0dXJuIGZyYWc7XG59XG5cbi8qKlxuICogRmluZCBhIHZtIGZyb20gYSBmcmFnbWVudC5cbiAqXG4gKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gKiBAcmV0dXJuIHtWdWV8dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIGZpbmRWbUZyb21GcmFnKGZyYWcpIHtcbiAgdmFyIG5vZGUgPSBmcmFnLm5vZGU7XG4gIC8vIGhhbmRsZSBtdWx0aS1ub2RlIGZyYWdcbiAgaWYgKGZyYWcuZW5kKSB7XG4gICAgd2hpbGUgKCFub2RlLl9fdnVlX18gJiYgbm9kZSAhPT0gZnJhZy5lbmQgJiYgbm9kZS5uZXh0U2libGluZykge1xuICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgfVxuICB9XG4gIHJldHVybiBub2RlLl9fdnVlX187XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgcmFuZ2UgYXJyYXkgZnJvbSBnaXZlbiBudW1iZXIuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5cbmZ1bmN0aW9uIHJhbmdlKG4pIHtcbiAgdmFyIGkgPSAtMTtcbiAgdmFyIHJldCA9IG5ldyBBcnJheShNYXRoLmZsb29yKG4pKTtcbiAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICByZXRbaV0gPSBpO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogR2V0IHRoZSB0cmFjayBieSBrZXkgZm9yIGFuIGl0ZW0uXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge1N0cmluZ30gW3RyYWNrQnlLZXldXG4gKi9cblxuZnVuY3Rpb24gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSkge1xuICByZXR1cm4gdHJhY2tCeUtleSA/IHRyYWNrQnlLZXkgPT09ICckaW5kZXgnID8gaW5kZXggOiB0cmFja0J5S2V5LmNoYXJBdCgwKS5tYXRjaCgvXFx3LykgPyBnZXRQYXRoKHZhbHVlLCB0cmFja0J5S2V5KSA6IHZhbHVlW3RyYWNrQnlLZXldIDoga2V5IHx8IHZhbHVlO1xufVxuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICB2Rm9yLndhcm5EdXBsaWNhdGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB3YXJuKCdEdXBsaWNhdGUgdmFsdWUgZm91bmQgaW4gdi1mb3I9XCInICsgdGhpcy5kZXNjcmlwdG9yLnJhdyArICdcIjogJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKSArICcuIFVzZSB0cmFjay1ieT1cIiRpbmRleFwiIGlmICcgKyAneW91IGFyZSBleHBlY3RpbmcgZHVwbGljYXRlIHZhbHVlcy4nLCB0aGlzLnZtKTtcbiAgfTtcbn1cblxudmFyIHZJZiA9IHtcblxuICBwcmlvcml0eTogSUYsXG4gIHRlcm1pbmFsOiB0cnVlLFxuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICBpZiAoIWVsLl9fdnVlX18pIHtcbiAgICAgIC8vIGNoZWNrIGVsc2UgYmxvY2tcbiAgICAgIHZhciBuZXh0ID0gZWwubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgaWYgKG5leHQgJiYgZ2V0QXR0cihuZXh0LCAndi1lbHNlJykgIT09IG51bGwpIHtcbiAgICAgICAgcmVtb3ZlKG5leHQpO1xuICAgICAgICB0aGlzLmVsc2VFbCA9IG5leHQ7XG4gICAgICB9XG4gICAgICAvLyBjaGVjayBtYWluIGJsb2NrXG4gICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1pZicpO1xuICAgICAgcmVwbGFjZShlbCwgdGhpcy5hbmNob3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3YtaWY9XCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiIGNhbm5vdCBiZSAnICsgJ3VzZWQgb24gYW4gaW5zdGFuY2Ugcm9vdCBlbGVtZW50LicsIHRoaXMudm0pO1xuICAgICAgdGhpcy5pbnZhbGlkID0gdHJ1ZTtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICBpZiAodGhpcy5pbnZhbGlkKSByZXR1cm47XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICBpZiAoIXRoaXMuZnJhZykge1xuICAgICAgICB0aGlzLmluc2VydCgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZSgpO1xuICAgIH1cbiAgfSxcblxuICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydCgpIHtcbiAgICBpZiAodGhpcy5lbHNlRnJhZykge1xuICAgICAgdGhpcy5lbHNlRnJhZy5yZW1vdmUoKTtcbiAgICAgIHRoaXMuZWxzZUZyYWcgPSBudWxsO1xuICAgIH1cbiAgICAvLyBsYXp5IGluaXQgZmFjdG9yeVxuICAgIGlmICghdGhpcy5mYWN0b3J5KSB7XG4gICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHRoaXMuZWwpO1xuICAgIH1cbiAgICB0aGlzLmZyYWcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKHRoaXMuX2hvc3QsIHRoaXMuX3Njb3BlLCB0aGlzLl9mcmFnKTtcbiAgICB0aGlzLmZyYWcuYmVmb3JlKHRoaXMuYW5jaG9yKTtcbiAgfSxcblxuICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICBpZiAodGhpcy5mcmFnKSB7XG4gICAgICB0aGlzLmZyYWcucmVtb3ZlKCk7XG4gICAgICB0aGlzLmZyYWcgPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5lbHNlRWwgJiYgIXRoaXMuZWxzZUZyYWcpIHtcbiAgICAgIGlmICghdGhpcy5lbHNlRmFjdG9yeSkge1xuICAgICAgICB0aGlzLmVsc2VGYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLmVsc2VFbC5fY29udGV4dCB8fCB0aGlzLnZtLCB0aGlzLmVsc2VFbCk7XG4gICAgICB9XG4gICAgICB0aGlzLmVsc2VGcmFnID0gdGhpcy5lbHNlRmFjdG9yeS5jcmVhdGUodGhpcy5faG9zdCwgdGhpcy5fc2NvcGUsIHRoaXMuX2ZyYWcpO1xuICAgICAgdGhpcy5lbHNlRnJhZy5iZWZvcmUodGhpcy5hbmNob3IpO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICBpZiAodGhpcy5mcmFnKSB7XG4gICAgICB0aGlzLmZyYWcuZGVzdHJveSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5lbHNlRnJhZykge1xuICAgICAgdGhpcy5lbHNlRnJhZy5kZXN0cm95KCk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgc2hvdyA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIGNoZWNrIGVsc2UgYmxvY2tcbiAgICB2YXIgbmV4dCA9IHRoaXMuZWwubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGlmIChuZXh0ICYmIGdldEF0dHIobmV4dCwgJ3YtZWxzZScpICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmVsc2VFbCA9IG5leHQ7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdGhpcy5hcHBseSh0aGlzLmVsLCB2YWx1ZSk7XG4gICAgaWYgKHRoaXMuZWxzZUVsKSB7XG4gICAgICB0aGlzLmFwcGx5KHRoaXMuZWxzZUVsLCAhdmFsdWUpO1xuICAgIH1cbiAgfSxcblxuICBhcHBseTogZnVuY3Rpb24gYXBwbHkoZWwsIHZhbHVlKSB7XG4gICAgaWYgKGluRG9jKGVsKSkge1xuICAgICAgYXBwbHlUcmFuc2l0aW9uKGVsLCB2YWx1ZSA/IDEgOiAtMSwgdG9nZ2xlLCB0aGlzLnZtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdG9nZ2xlKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRvZ2dsZSgpIHtcbiAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZSA/ICcnIDogJ25vbmUnO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHRleHQkMiA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciBpc1JhbmdlID0gZWwudHlwZSA9PT0gJ3JhbmdlJztcbiAgICB2YXIgbGF6eSA9IHRoaXMucGFyYW1zLmxhenk7XG4gICAgdmFyIG51bWJlciA9IHRoaXMucGFyYW1zLm51bWJlcjtcbiAgICB2YXIgZGVib3VuY2UgPSB0aGlzLnBhcmFtcy5kZWJvdW5jZTtcblxuICAgIC8vIGhhbmRsZSBjb21wb3NpdGlvbiBldmVudHMuXG4gICAgLy8gICBodHRwOi8vYmxvZy5ldmFueW91Lm1lLzIwMTQvMDEvMDMvY29tcG9zaXRpb24tZXZlbnQvXG4gICAgLy8gc2tpcCB0aGlzIGZvciBBbmRyb2lkIGJlY2F1c2UgaXQgaGFuZGxlcyBjb21wb3NpdGlvblxuICAgIC8vIGV2ZW50cyBxdWl0ZSBkaWZmZXJlbnRseS4gQW5kcm9pZCBkb2Vzbid0IHRyaWdnZXJcbiAgICAvLyBjb21wb3NpdGlvbiBldmVudHMgZm9yIGxhbmd1YWdlIGlucHV0IG1ldGhvZHMgZS5nLlxuICAgIC8vIENoaW5lc2UsIGJ1dCBpbnN0ZWFkIHRyaWdnZXJzIHRoZW0gZm9yIHNwZWxsaW5nXG4gICAgLy8gc3VnZ2VzdGlvbnMuLi4gKHNlZSBEaXNjdXNzaW9uLyMxNjIpXG4gICAgdmFyIGNvbXBvc2luZyA9IGZhbHNlO1xuICAgIGlmICghaXNBbmRyb2lkICYmICFpc1JhbmdlKSB7XG4gICAgICB0aGlzLm9uKCdjb21wb3NpdGlvbnN0YXJ0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb21wb3NpbmcgPSB0cnVlO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm9uKCdjb21wb3NpdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29tcG9zaW5nID0gZmFsc2U7XG4gICAgICAgIC8vIGluIElFMTEgdGhlIFwiY29tcG9zaXRpb25lbmRcIiBldmVudCBmaXJlcyBBRlRFUlxuICAgICAgICAvLyB0aGUgXCJpbnB1dFwiIGV2ZW50LCBzbyB0aGUgaW5wdXQgaGFuZGxlciBpcyBibG9ja2VkXG4gICAgICAgIC8vIGF0IHRoZSBlbmQuLi4gaGF2ZSB0byBjYWxsIGl0IGhlcmUuXG4gICAgICAgIC8vXG4gICAgICAgIC8vICMxMzI3OiBpbiBsYXp5IG1vZGUgdGhpcyBpcyB1bmVjZXNzYXJ5LlxuICAgICAgICBpZiAoIWxhenkpIHtcbiAgICAgICAgICBzZWxmLmxpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIHByZXZlbnQgbWVzc2luZyB3aXRoIHRoZSBpbnB1dCB3aGVuIHVzZXIgaXMgdHlwaW5nLFxuICAgIC8vIGFuZCBmb3JjZSB1cGRhdGUgb24gYmx1ci5cbiAgICB0aGlzLmZvY3VzZWQgPSBmYWxzZTtcbiAgICBpZiAoIWlzUmFuZ2UgJiYgIWxhenkpIHtcbiAgICAgIHRoaXMub24oJ2ZvY3VzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLmZvY3VzZWQgPSB0cnVlO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm9uKCdibHVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLmZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgLy8gZG8gbm90IHN5bmMgdmFsdWUgYWZ0ZXIgZnJhZ21lbnQgcmVtb3ZhbCAoIzIwMTcpXG4gICAgICAgIGlmICghc2VsZi5fZnJhZyB8fCBzZWxmLl9mcmFnLmluc2VydGVkKSB7XG4gICAgICAgICAgc2VsZi5yYXdMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBOb3cgYXR0YWNoIHRoZSBtYWluIGxpc3RlbmVyXG4gICAgdGhpcy5saXN0ZW5lciA9IHRoaXMucmF3TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoY29tcG9zaW5nIHx8ICFzZWxmLl9ib3VuZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgdmFsID0gbnVtYmVyIHx8IGlzUmFuZ2UgPyB0b051bWJlcihlbC52YWx1ZSkgOiBlbC52YWx1ZTtcbiAgICAgIHNlbGYuc2V0KHZhbCk7XG4gICAgICAvLyBmb3JjZSB1cGRhdGUgb24gbmV4dCB0aWNrIHRvIGF2b2lkIGxvY2sgJiBzYW1lIHZhbHVlXG4gICAgICAvLyBhbHNvIG9ubHkgdXBkYXRlIHdoZW4gdXNlciBpcyBub3QgdHlwaW5nXG4gICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChzZWxmLl9ib3VuZCAmJiAhc2VsZi5mb2N1c2VkKSB7XG4gICAgICAgICAgc2VsZi51cGRhdGUoc2VsZi5fd2F0Y2hlci52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyBhcHBseSBkZWJvdW5jZVxuICAgIGlmIChkZWJvdW5jZSkge1xuICAgICAgdGhpcy5saXN0ZW5lciA9IF9kZWJvdW5jZSh0aGlzLmxpc3RlbmVyLCBkZWJvdW5jZSk7XG4gICAgfVxuXG4gICAgLy8gU3VwcG9ydCBqUXVlcnkgZXZlbnRzLCBzaW5jZSBqUXVlcnkudHJpZ2dlcigpIGRvZXNuJ3RcbiAgICAvLyB0cmlnZ2VyIG5hdGl2ZSBldmVudHMgaW4gc29tZSBjYXNlcyBhbmQgc29tZSBwbHVnaW5zXG4gICAgLy8gcmVseSBvbiAkLnRyaWdnZXIoKVxuICAgIC8vXG4gICAgLy8gV2Ugd2FudCB0byBtYWtlIHN1cmUgaWYgYSBsaXN0ZW5lciBpcyBhdHRhY2hlZCB1c2luZ1xuICAgIC8vIGpRdWVyeSwgaXQgaXMgYWxzbyByZW1vdmVkIHdpdGggalF1ZXJ5LCB0aGF0J3Mgd2h5XG4gICAgLy8gd2UgZG8gdGhlIGNoZWNrIGZvciBlYWNoIGRpcmVjdGl2ZSBpbnN0YW5jZSBhbmRcbiAgICAvLyBzdG9yZSB0aGF0IGNoZWNrIHJlc3VsdCBvbiBpdHNlbGYuIFRoaXMgYWxzbyBhbGxvd3NcbiAgICAvLyBlYXNpZXIgdGVzdCBjb3ZlcmFnZSBjb250cm9sIGJ5IHVuc2V0dGluZyB0aGUgZ2xvYmFsXG4gICAgLy8galF1ZXJ5IHZhcmlhYmxlIGluIHRlc3RzLlxuICAgIHRoaXMuaGFzalF1ZXJ5ID0gdHlwZW9mIGpRdWVyeSA9PT0gJ2Z1bmN0aW9uJztcbiAgICBpZiAodGhpcy5oYXNqUXVlcnkpIHtcbiAgICAgIHZhciBtZXRob2QgPSBqUXVlcnkuZm4ub24gPyAnb24nIDogJ2JpbmQnO1xuICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdjaGFuZ2UnLCB0aGlzLnJhd0xpc3RlbmVyKTtcbiAgICAgIGlmICghbGF6eSkge1xuICAgICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2lucHV0JywgdGhpcy5saXN0ZW5lcik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMucmF3TGlzdGVuZXIpO1xuICAgICAgaWYgKCFsYXp5KSB7XG4gICAgICAgIHRoaXMub24oJ2lucHV0JywgdGhpcy5saXN0ZW5lcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSUU5IGRvZXNuJ3QgZmlyZSBpbnB1dCBldmVudCBvbiBiYWNrc3BhY2UvZGVsL2N1dFxuICAgIGlmICghbGF6eSAmJiBpc0lFOSkge1xuICAgICAgdGhpcy5vbignY3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBuZXh0VGljayhzZWxmLmxpc3RlbmVyKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5vbigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSA0NiB8fCBlLmtleUNvZGUgPT09IDgpIHtcbiAgICAgICAgICBzZWxmLmxpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIHNldCBpbml0aWFsIHZhbHVlIGlmIHByZXNlbnRcbiAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCd2YWx1ZScpIHx8IGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScgJiYgZWwudmFsdWUudHJpbSgpKSB7XG4gICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgLy8gIzMwMjkgb25seSB1cGRhdGUgd2hlbiB0aGUgdmFsdWUgY2hhbmdlcy4gVGhpcyBwcmV2ZW50XG4gICAgLy8gYnJvd3NlcnMgZnJvbSBvdmVyd3JpdGluZyB2YWx1ZXMgbGlrZSBzZWxlY3Rpb25TdGFydFxuICAgIHZhbHVlID0gX3RvU3RyaW5nKHZhbHVlKTtcbiAgICBpZiAodmFsdWUgIT09IHRoaXMuZWwudmFsdWUpIHRoaXMuZWwudmFsdWUgPSB2YWx1ZTtcbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIGlmICh0aGlzLmhhc2pRdWVyeSkge1xuICAgICAgdmFyIG1ldGhvZCA9IGpRdWVyeS5mbi5vZmYgPyAnb2ZmJyA6ICd1bmJpbmQnO1xuICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciByYWRpbyA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXG4gICAgdGhpcy5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIHZhbHVlIG92ZXJ3cml0ZSB2aWEgdi1iaW5kOnZhbHVlXG4gICAgICBpZiAoZWwuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpKSB7XG4gICAgICAgIHJldHVybiBlbC5fdmFsdWU7XG4gICAgICB9XG4gICAgICB2YXIgdmFsID0gZWwudmFsdWU7XG4gICAgICBpZiAoc2VsZi5wYXJhbXMubnVtYmVyKSB7XG4gICAgICAgIHZhbCA9IHRvTnVtYmVyKHZhbCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsO1xuICAgIH07XG5cbiAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgc2VsZi5zZXQoc2VsZi5nZXRWYWx1ZSgpKTtcbiAgICB9O1xuICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXG4gICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgnY2hlY2tlZCcpKSB7XG4gICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdGhpcy5lbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgdGhpcy5nZXRWYWx1ZSgpKTtcbiAgfVxufTtcblxudmFyIHNlbGVjdCA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcblxuICAgIC8vIG1ldGhvZCB0byBmb3JjZSB1cGRhdGUgRE9NIHVzaW5nIGxhdGVzdCB2YWx1ZS5cbiAgICB0aGlzLmZvcmNlVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHNlbGYuX3dhdGNoZXIpIHtcbiAgICAgICAgc2VsZi51cGRhdGUoc2VsZi5fd2F0Y2hlci5nZXQoKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgYSBtdWx0aXBsZSBzZWxlY3RcbiAgICB2YXIgbXVsdGlwbGUgPSB0aGlzLm11bHRpcGxlID0gZWwuaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpO1xuXG4gICAgLy8gYXR0YWNoIGxpc3RlbmVyXG4gICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGdldFZhbHVlKGVsLCBtdWx0aXBsZSk7XG4gICAgICB2YWx1ZSA9IHNlbGYucGFyYW1zLm51bWJlciA/IGlzQXJyYXkodmFsdWUpID8gdmFsdWUubWFwKHRvTnVtYmVyKSA6IHRvTnVtYmVyKHZhbHVlKSA6IHZhbHVlO1xuICAgICAgc2VsZi5zZXQodmFsdWUpO1xuICAgIH07XG4gICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cbiAgICAvLyBpZiBoYXMgaW5pdGlhbCB2YWx1ZSwgc2V0IGFmdGVyQmluZFxuICAgIHZhciBpbml0VmFsdWUgPSBnZXRWYWx1ZShlbCwgbXVsdGlwbGUsIHRydWUpO1xuICAgIGlmIChtdWx0aXBsZSAmJiBpbml0VmFsdWUubGVuZ3RoIHx8ICFtdWx0aXBsZSAmJiBpbml0VmFsdWUgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcbiAgICB9XG5cbiAgICAvLyBBbGwgbWFqb3IgYnJvd3NlcnMgZXhjZXB0IEZpcmVmb3ggcmVzZXRzXG4gICAgLy8gc2VsZWN0ZWRJbmRleCB3aXRoIHZhbHVlIC0xIHRvIDAgd2hlbiB0aGUgZWxlbWVudFxuICAgIC8vIGlzIGFwcGVuZGVkIHRvIGEgbmV3IHBhcmVudCwgdGhlcmVmb3JlIHdlIGhhdmUgdG9cbiAgICAvLyBmb3JjZSBhIERPTSB1cGRhdGUgd2hlbmV2ZXIgdGhhdCBoYXBwZW5zLi4uXG4gICAgdGhpcy52bS4kb24oJ2hvb2s6YXR0YWNoZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBuZXh0VGljayhfdGhpcy5mb3JjZVVwZGF0ZSk7XG4gICAgfSk7XG4gICAgaWYgKCFpbkRvYyhlbCkpIHtcbiAgICAgIG5leHRUaWNrKHRoaXMuZm9yY2VVcGRhdGUpO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgZWwuc2VsZWN0ZWRJbmRleCA9IC0xO1xuICAgIHZhciBtdWx0aSA9IHRoaXMubXVsdGlwbGUgJiYgaXNBcnJheSh2YWx1ZSk7XG4gICAgdmFyIG9wdGlvbnMgPSBlbC5vcHRpb25zO1xuICAgIHZhciBpID0gb3B0aW9ucy5sZW5ndGg7XG4gICAgdmFyIG9wLCB2YWw7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgb3AgPSBvcHRpb25zW2ldO1xuICAgICAgdmFsID0gb3AuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpID8gb3AuX3ZhbHVlIDogb3AudmFsdWU7XG4gICAgICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cbiAgICAgIG9wLnNlbGVjdGVkID0gbXVsdGkgPyBpbmRleE9mJDEodmFsdWUsIHZhbCkgPiAtMSA6IGxvb3NlRXF1YWwodmFsdWUsIHZhbCk7XG4gICAgICAvKiBlc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHRoaXMudm0uJG9mZignaG9vazphdHRhY2hlZCcsIHRoaXMuZm9yY2VVcGRhdGUpO1xuICB9XG59O1xuXG4vKipcbiAqIEdldCBzZWxlY3QgdmFsdWVcbiAqXG4gKiBAcGFyYW0ge1NlbGVjdEVsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0Jvb2xlYW59IG11bHRpXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGluaXRcbiAqIEByZXR1cm4ge0FycmF5fCp9XG4gKi9cblxuZnVuY3Rpb24gZ2V0VmFsdWUoZWwsIG11bHRpLCBpbml0KSB7XG4gIHZhciByZXMgPSBtdWx0aSA/IFtdIDogbnVsbDtcbiAgdmFyIG9wLCB2YWwsIHNlbGVjdGVkO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGVsLm9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgb3AgPSBlbC5vcHRpb25zW2ldO1xuICAgIHNlbGVjdGVkID0gaW5pdCA/IG9wLmhhc0F0dHJpYnV0ZSgnc2VsZWN0ZWQnKSA6IG9wLnNlbGVjdGVkO1xuICAgIGlmIChzZWxlY3RlZCkge1xuICAgICAgdmFsID0gb3AuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpID8gb3AuX3ZhbHVlIDogb3AudmFsdWU7XG4gICAgICBpZiAobXVsdGkpIHtcbiAgICAgICAgcmVzLnB1c2godmFsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogTmF0aXZlIEFycmF5LmluZGV4T2YgdXNlcyBzdHJpY3QgZXF1YWwsIGJ1dCBpbiB0aGlzXG4gKiBjYXNlIHdlIG5lZWQgdG8gbWF0Y2ggc3RyaW5nL251bWJlcnMgd2l0aCBjdXN0b20gZXF1YWwuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJyXG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5cbmZ1bmN0aW9uIGluZGV4T2YkMShhcnIsIHZhbCkge1xuICB2YXIgaSA9IGFyci5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBpZiAobG9vc2VFcXVhbChhcnJbaV0sIHZhbCkpIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gLTE7XG59XG5cbnZhciBjaGVja2JveCA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXG4gICAgdGhpcy5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBlbC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBlbC5fdmFsdWUgOiBzZWxmLnBhcmFtcy5udW1iZXIgPyB0b051bWJlcihlbC52YWx1ZSkgOiBlbC52YWx1ZTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZ2V0Qm9vbGVhblZhbHVlKCkge1xuICAgICAgdmFyIHZhbCA9IGVsLmNoZWNrZWQ7XG4gICAgICBpZiAodmFsICYmIGVsLmhhc093blByb3BlcnR5KCdfdHJ1ZVZhbHVlJykpIHtcbiAgICAgICAgcmV0dXJuIGVsLl90cnVlVmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAoIXZhbCAmJiBlbC5oYXNPd25Qcm9wZXJ0eSgnX2ZhbHNlVmFsdWUnKSkge1xuICAgICAgICByZXR1cm4gZWwuX2ZhbHNlVmFsdWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsO1xuICAgIH1cblxuICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbW9kZWwgPSBzZWxmLl93YXRjaGVyLnZhbHVlO1xuICAgICAgaWYgKGlzQXJyYXkobW9kZWwpKSB7XG4gICAgICAgIHZhciB2YWwgPSBzZWxmLmdldFZhbHVlKCk7XG4gICAgICAgIGlmIChlbC5jaGVja2VkKSB7XG4gICAgICAgICAgaWYgKGluZGV4T2YobW9kZWwsIHZhbCkgPCAwKSB7XG4gICAgICAgICAgICBtb2RlbC5wdXNoKHZhbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1vZGVsLiRyZW1vdmUodmFsKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5zZXQoZ2V0Qm9vbGVhblZhbHVlKCkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdjaGVja2VkJykpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgZWwuY2hlY2tlZCA9IGluZGV4T2YodmFsdWUsIHRoaXMuZ2V0VmFsdWUoKSkgPiAtMTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGVsLmhhc093blByb3BlcnR5KCdfdHJ1ZVZhbHVlJykpIHtcbiAgICAgICAgZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIGVsLl90cnVlVmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWwuY2hlY2tlZCA9ICEhdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG52YXIgaGFuZGxlcnMgPSB7XG4gIHRleHQ6IHRleHQkMixcbiAgcmFkaW86IHJhZGlvLFxuICBzZWxlY3Q6IHNlbGVjdCxcbiAgY2hlY2tib3g6IGNoZWNrYm94XG59O1xuXG52YXIgbW9kZWwgPSB7XG5cbiAgcHJpb3JpdHk6IE1PREVMLFxuICB0d29XYXk6IHRydWUsXG4gIGhhbmRsZXJzOiBoYW5kbGVycyxcbiAgcGFyYW1zOiBbJ2xhenknLCAnbnVtYmVyJywgJ2RlYm91bmNlJ10sXG5cbiAgLyoqXG4gICAqIFBvc3NpYmxlIGVsZW1lbnRzOlxuICAgKiAgIDxzZWxlY3Q+XG4gICAqICAgPHRleHRhcmVhPlxuICAgKiAgIDxpbnB1dCB0eXBlPVwiKlwiPlxuICAgKiAgICAgLSB0ZXh0XG4gICAqICAgICAtIGNoZWNrYm94XG4gICAqICAgICAtIHJhZGlvXG4gICAqICAgICAtIG51bWJlclxuICAgKi9cblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIGZyaWVuZGx5IHdhcm5pbmcuLi5cbiAgICB0aGlzLmNoZWNrRmlsdGVycygpO1xuICAgIGlmICh0aGlzLmhhc1JlYWQgJiYgIXRoaXMuaGFzV3JpdGUpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSXQgc2VlbXMgeW91IGFyZSB1c2luZyBhIHJlYWQtb25seSBmaWx0ZXIgd2l0aCAnICsgJ3YtbW9kZWw9XCInICsgdGhpcy5kZXNjcmlwdG9yLnJhdyArICdcIi4gJyArICdZb3UgbWlnaHQgd2FudCB0byB1c2UgYSB0d28td2F5IGZpbHRlciB0byBlbnN1cmUgY29ycmVjdCBiZWhhdmlvci4nLCB0aGlzLnZtKTtcbiAgICB9XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgdGFnID0gZWwudGFnTmFtZTtcbiAgICB2YXIgaGFuZGxlcjtcbiAgICBpZiAodGFnID09PSAnSU5QVVQnKSB7XG4gICAgICBoYW5kbGVyID0gaGFuZGxlcnNbZWwudHlwZV0gfHwgaGFuZGxlcnMudGV4dDtcbiAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1NFTEVDVCcpIHtcbiAgICAgIGhhbmRsZXIgPSBoYW5kbGVycy5zZWxlY3Q7XG4gICAgfSBlbHNlIGlmICh0YWcgPT09ICdURVhUQVJFQScpIHtcbiAgICAgIGhhbmRsZXIgPSBoYW5kbGVycy50ZXh0O1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3YtbW9kZWwgZG9lcyBub3Qgc3VwcG9ydCBlbGVtZW50IHR5cGU6ICcgKyB0YWcsIHRoaXMudm0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbC5fX3ZfbW9kZWwgPSB0aGlzO1xuICAgIGhhbmRsZXIuYmluZC5jYWxsKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlID0gaGFuZGxlci51cGRhdGU7XG4gICAgdGhpcy5fdW5iaW5kID0gaGFuZGxlci51bmJpbmQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIHJlYWQvd3JpdGUgZmlsdGVyIHN0YXRzLlxuICAgKi9cblxuICBjaGVja0ZpbHRlcnM6IGZ1bmN0aW9uIGNoZWNrRmlsdGVycygpIHtcbiAgICB2YXIgZmlsdGVycyA9IHRoaXMuZmlsdGVycztcbiAgICBpZiAoIWZpbHRlcnMpIHJldHVybjtcbiAgICB2YXIgaSA9IGZpbHRlcnMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciBmaWx0ZXIgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ2ZpbHRlcnMnLCBmaWx0ZXJzW2ldLm5hbWUpO1xuICAgICAgaWYgKHR5cGVvZiBmaWx0ZXIgPT09ICdmdW5jdGlvbicgfHwgZmlsdGVyLnJlYWQpIHtcbiAgICAgICAgdGhpcy5oYXNSZWFkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChmaWx0ZXIud3JpdGUpIHtcbiAgICAgICAgdGhpcy5oYXNXcml0ZSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHRoaXMuZWwuX192X21vZGVsID0gbnVsbDtcbiAgICB0aGlzLl91bmJpbmQgJiYgdGhpcy5fdW5iaW5kKCk7XG4gIH1cbn07XG5cbi8vIGtleUNvZGUgYWxpYXNlc1xudmFyIGtleUNvZGVzID0ge1xuICBlc2M6IDI3LFxuICB0YWI6IDksXG4gIGVudGVyOiAxMyxcbiAgc3BhY2U6IDMyLFxuICAnZGVsZXRlJzogWzgsIDQ2XSxcbiAgdXA6IDM4LFxuICBsZWZ0OiAzNyxcbiAgcmlnaHQ6IDM5LFxuICBkb3duOiA0MFxufTtcblxuZnVuY3Rpb24ga2V5RmlsdGVyKGhhbmRsZXIsIGtleXMpIHtcbiAgdmFyIGNvZGVzID0ga2V5cy5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciBjaGFyQ29kZSA9IGtleS5jaGFyQ29kZUF0KDApO1xuICAgIGlmIChjaGFyQ29kZSA+IDQ3ICYmIGNoYXJDb2RlIDwgNTgpIHtcbiAgICAgIHJldHVybiBwYXJzZUludChrZXksIDEwKTtcbiAgICB9XG4gICAgaWYgKGtleS5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNoYXJDb2RlID0ga2V5LnRvVXBwZXJDYXNlKCkuY2hhckNvZGVBdCgwKTtcbiAgICAgIGlmIChjaGFyQ29kZSA+IDY0ICYmIGNoYXJDb2RlIDwgOTEpIHtcbiAgICAgICAgcmV0dXJuIGNoYXJDb2RlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2V5Q29kZXNba2V5XTtcbiAgfSk7XG4gIGNvZGVzID0gW10uY29uY2F0LmFwcGx5KFtdLCBjb2Rlcyk7XG4gIHJldHVybiBmdW5jdGlvbiBrZXlIYW5kbGVyKGUpIHtcbiAgICBpZiAoY29kZXMuaW5kZXhPZihlLmtleUNvZGUpID4gLTEpIHtcbiAgICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBzdG9wRmlsdGVyKGhhbmRsZXIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHN0b3BIYW5kbGVyKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHByZXZlbnRGaWx0ZXIoaGFuZGxlcikge1xuICByZXR1cm4gZnVuY3Rpb24gcHJldmVudEhhbmRsZXIoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzZWxmRmlsdGVyKGhhbmRsZXIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHNlbGZIYW5kbGVyKGUpIHtcbiAgICBpZiAoZS50YXJnZXQgPT09IGUuY3VycmVudFRhcmdldCkge1xuICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcbiAgICB9XG4gIH07XG59XG5cbnZhciBvbiQxID0ge1xuXG4gIHByaW9yaXR5OiBPTixcbiAgYWNjZXB0U3RhdGVtZW50OiB0cnVlLFxuICBrZXlDb2Rlczoga2V5Q29kZXMsXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyBkZWFsIHdpdGggaWZyYW1lc1xuICAgIGlmICh0aGlzLmVsLnRhZ05hbWUgPT09ICdJRlJBTUUnICYmIHRoaXMuYXJnICE9PSAnbG9hZCcpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHRoaXMuaWZyYW1lQmluZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgb24oc2VsZi5lbC5jb250ZW50V2luZG93LCBzZWxmLmFyZywgc2VsZi5oYW5kbGVyLCBzZWxmLm1vZGlmaWVycy5jYXB0dXJlKTtcbiAgICAgIH07XG4gICAgICB0aGlzLm9uKCdsb2FkJywgdGhpcy5pZnJhbWVCaW5kKTtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoaGFuZGxlcikge1xuICAgIC8vIHN0dWIgYSBub29wIGZvciB2LW9uIHdpdGggbm8gdmFsdWUsXG4gICAgLy8gZS5nLiBAbW91c2Vkb3duLnByZXZlbnRcbiAgICBpZiAoIXRoaXMuZGVzY3JpcHRvci5yYXcpIHtcbiAgICAgIGhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1vbjonICsgdGhpcy5hcmcgKyAnPVwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiBleHBlY3RzIGEgZnVuY3Rpb24gdmFsdWUsICcgKyAnZ290ICcgKyBoYW5kbGVyLCB0aGlzLnZtKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBhcHBseSBtb2RpZmllcnNcbiAgICBpZiAodGhpcy5tb2RpZmllcnMuc3RvcCkge1xuICAgICAgaGFuZGxlciA9IHN0b3BGaWx0ZXIoaGFuZGxlcik7XG4gICAgfVxuICAgIGlmICh0aGlzLm1vZGlmaWVycy5wcmV2ZW50KSB7XG4gICAgICBoYW5kbGVyID0gcHJldmVudEZpbHRlcihoYW5kbGVyKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubW9kaWZpZXJzLnNlbGYpIHtcbiAgICAgIGhhbmRsZXIgPSBzZWxmRmlsdGVyKGhhbmRsZXIpO1xuICAgIH1cbiAgICAvLyBrZXkgZmlsdGVyXG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLm1vZGlmaWVycykuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiBrZXkgIT09ICdzdG9wJyAmJiBrZXkgIT09ICdwcmV2ZW50JyAmJiBrZXkgIT09ICdzZWxmJyAmJiBrZXkgIT09ICdjYXB0dXJlJztcbiAgICB9KTtcbiAgICBpZiAoa2V5cy5sZW5ndGgpIHtcbiAgICAgIGhhbmRsZXIgPSBrZXlGaWx0ZXIoaGFuZGxlciwga2V5cyk7XG4gICAgfVxuXG4gICAgdGhpcy5yZXNldCgpO1xuICAgIHRoaXMuaGFuZGxlciA9IGhhbmRsZXI7XG5cbiAgICBpZiAodGhpcy5pZnJhbWVCaW5kKSB7XG4gICAgICB0aGlzLmlmcmFtZUJpbmQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb24odGhpcy5lbCwgdGhpcy5hcmcsIHRoaXMuaGFuZGxlciwgdGhpcy5tb2RpZmllcnMuY2FwdHVyZSk7XG4gICAgfVxuICB9LFxuXG4gIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmlmcmFtZUJpbmQgPyB0aGlzLmVsLmNvbnRlbnRXaW5kb3cgOiB0aGlzLmVsO1xuICAgIGlmICh0aGlzLmhhbmRsZXIpIHtcbiAgICAgIG9mZihlbCwgdGhpcy5hcmcsIHRoaXMuaGFuZGxlcik7XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHRoaXMucmVzZXQoKTtcbiAgfVxufTtcblxudmFyIHByZWZpeGVzID0gWyctd2Via2l0LScsICctbW96LScsICctbXMtJ107XG52YXIgY2FtZWxQcmVmaXhlcyA9IFsnV2Via2l0JywgJ01veicsICdtcyddO1xudmFyIGltcG9ydGFudFJFID0gLyFpbXBvcnRhbnQ7PyQvO1xudmFyIHByb3BDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbnZhciB0ZXN0RWwgPSBudWxsO1xuXG52YXIgc3R5bGUgPSB7XG5cbiAgZGVlcDogdHJ1ZSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLmVsLnN0eWxlLmNzc1RleHQgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZS5yZWR1Y2UoZXh0ZW5kLCB7fSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZSB8fCB7fSk7XG4gICAgfVxuICB9LFxuXG4gIGhhbmRsZU9iamVjdDogZnVuY3Rpb24gaGFuZGxlT2JqZWN0KHZhbHVlKSB7XG4gICAgLy8gY2FjaGUgb2JqZWN0IHN0eWxlcyBzbyB0aGF0IG9ubHkgY2hhbmdlZCBwcm9wc1xuICAgIC8vIGFyZSBhY3R1YWxseSB1cGRhdGVkLlxuICAgIHZhciBjYWNoZSA9IHRoaXMuY2FjaGUgfHwgKHRoaXMuY2FjaGUgPSB7fSk7XG4gICAgdmFyIG5hbWUsIHZhbDtcbiAgICBmb3IgKG5hbWUgaW4gY2FjaGUpIHtcbiAgICAgIGlmICghKG5hbWUgaW4gdmFsdWUpKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKG5hbWUsIG51bGwpO1xuICAgICAgICBkZWxldGUgY2FjaGVbbmFtZV07XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobmFtZSBpbiB2YWx1ZSkge1xuICAgICAgdmFsID0gdmFsdWVbbmFtZV07XG4gICAgICBpZiAodmFsICE9PSBjYWNoZVtuYW1lXSkge1xuICAgICAgICBjYWNoZVtuYW1lXSA9IHZhbDtcbiAgICAgICAgdGhpcy5oYW5kbGVTaW5nbGUobmFtZSwgdmFsKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgaGFuZGxlU2luZ2xlOiBmdW5jdGlvbiBoYW5kbGVTaW5nbGUocHJvcCwgdmFsdWUpIHtcbiAgICBwcm9wID0gbm9ybWFsaXplKHByb3ApO1xuICAgIGlmICghcHJvcCkgcmV0dXJuOyAvLyB1bnN1cHBvcnRlZCBwcm9wXG4gICAgLy8gY2FzdCBwb3NzaWJsZSBudW1iZXJzL2Jvb2xlYW5zIGludG8gc3RyaW5nc1xuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB2YWx1ZSArPSAnJztcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHZhciBpc0ltcG9ydGFudCA9IGltcG9ydGFudFJFLnRlc3QodmFsdWUpID8gJ2ltcG9ydGFudCcgOiAnJztcbiAgICAgIGlmIChpc0ltcG9ydGFudCkge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICB3YXJuKCdJdFxcJ3MgcHJvYmFibHkgYSBiYWQgaWRlYSB0byB1c2UgIWltcG9ydGFudCB3aXRoIGlubGluZSBydWxlcy4gJyArICdUaGlzIGZlYXR1cmUgd2lsbCBiZSBkZXByZWNhdGVkIGluIGEgZnV0dXJlIHZlcnNpb24gb2YgVnVlLicpO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZShpbXBvcnRhbnRSRSwgJycpLnRyaW0oKTtcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eShwcm9wLmtlYmFiLCB2YWx1ZSwgaXNJbXBvcnRhbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5lbC5zdHlsZVtwcm9wLmNhbWVsXSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsLnN0eWxlW3Byb3AuY2FtZWxdID0gJyc7XG4gICAgfVxuICB9XG5cbn07XG5cbi8qKlxuICogTm9ybWFsaXplIGEgQ1NTIHByb3BlcnR5IG5hbWUuXG4gKiAtIGNhY2hlIHJlc3VsdFxuICogLSBhdXRvIHByZWZpeFxuICogLSBjYW1lbENhc2UgLT4gZGFzaC1jYXNlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBub3JtYWxpemUocHJvcCkge1xuICBpZiAocHJvcENhY2hlW3Byb3BdKSB7XG4gICAgcmV0dXJuIHByb3BDYWNoZVtwcm9wXTtcbiAgfVxuICB2YXIgcmVzID0gcHJlZml4KHByb3ApO1xuICBwcm9wQ2FjaGVbcHJvcF0gPSBwcm9wQ2FjaGVbcmVzXSA9IHJlcztcbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBBdXRvIGRldGVjdCB0aGUgYXBwcm9wcmlhdGUgcHJlZml4IGZvciBhIENTUyBwcm9wZXJ0eS5cbiAqIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3BhdWxpcmlzaC81MjM2OTJcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHByZWZpeChwcm9wKSB7XG4gIHByb3AgPSBoeXBoZW5hdGUocHJvcCk7XG4gIHZhciBjYW1lbCA9IGNhbWVsaXplKHByb3ApO1xuICB2YXIgdXBwZXIgPSBjYW1lbC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbWVsLnNsaWNlKDEpO1xuICBpZiAoIXRlc3RFbCkge1xuICAgIHRlc3RFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB9XG4gIHZhciBpID0gcHJlZml4ZXMubGVuZ3RoO1xuICB2YXIgcHJlZml4ZWQ7XG4gIGlmIChjYW1lbCAhPT0gJ2ZpbHRlcicgJiYgY2FtZWwgaW4gdGVzdEVsLnN0eWxlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtlYmFiOiBwcm9wLFxuICAgICAgY2FtZWw6IGNhbWVsXG4gICAgfTtcbiAgfVxuICB3aGlsZSAoaS0tKSB7XG4gICAgcHJlZml4ZWQgPSBjYW1lbFByZWZpeGVzW2ldICsgdXBwZXI7XG4gICAgaWYgKHByZWZpeGVkIGluIHRlc3RFbC5zdHlsZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2ViYWI6IHByZWZpeGVzW2ldICsgcHJvcCxcbiAgICAgICAgY2FtZWw6IHByZWZpeGVkXG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuXG4vLyB4bGlua1xudmFyIHhsaW5rTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc7XG52YXIgeGxpbmtSRSA9IC9eeGxpbms6LztcblxuLy8gY2hlY2sgZm9yIGF0dHJpYnV0ZXMgdGhhdCBwcm9oaWJpdCBpbnRlcnBvbGF0aW9uc1xudmFyIGRpc2FsbG93ZWRJbnRlcnBBdHRyUkUgPSAvXnYtfF46fF5AfF4oPzppc3x0cmFuc2l0aW9ufHRyYW5zaXRpb24tbW9kZXxkZWJvdW5jZXx0cmFjay1ieXxzdGFnZ2VyfGVudGVyLXN0YWdnZXJ8bGVhdmUtc3RhZ2dlcikkLztcbi8vIHRoZXNlIGF0dHJpYnV0ZXMgc2hvdWxkIGFsc28gc2V0IHRoZWlyIGNvcnJlc3BvbmRpbmcgcHJvcGVydGllc1xuLy8gYmVjYXVzZSB0aGV5IG9ubHkgYWZmZWN0IHRoZSBpbml0aWFsIHN0YXRlIG9mIHRoZSBlbGVtZW50XG52YXIgYXR0cldpdGhQcm9wc1JFID0gL14oPzp2YWx1ZXxjaGVja2VkfHNlbGVjdGVkfG11dGVkKSQvO1xuLy8gdGhlc2UgYXR0cmlidXRlcyBleHBlY3QgZW51bXJhdGVkIHZhbHVlcyBvZiBcInRydWVcIiBvciBcImZhbHNlXCJcbi8vIGJ1dCBhcmUgbm90IGJvb2xlYW4gYXR0cmlidXRlc1xudmFyIGVudW1lcmF0ZWRBdHRyUkUgPSAvXig/OmRyYWdnYWJsZXxjb250ZW50ZWRpdGFibGV8c3BlbGxjaGVjaykkLztcblxuLy8gdGhlc2UgYXR0cmlidXRlcyBzaG91bGQgc2V0IGEgaGlkZGVuIHByb3BlcnR5IGZvclxuLy8gYmluZGluZyB2LW1vZGVsIHRvIG9iamVjdCB2YWx1ZXNcbnZhciBtb2RlbFByb3BzID0ge1xuICB2YWx1ZTogJ192YWx1ZScsXG4gICd0cnVlLXZhbHVlJzogJ190cnVlVmFsdWUnLFxuICAnZmFsc2UtdmFsdWUnOiAnX2ZhbHNlVmFsdWUnXG59O1xuXG52YXIgYmluZCQxID0ge1xuXG4gIHByaW9yaXR5OiBCSU5ELFxuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIGF0dHIgPSB0aGlzLmFyZztcbiAgICB2YXIgdGFnID0gdGhpcy5lbC50YWdOYW1lO1xuICAgIC8vIHNob3VsZCBiZSBkZWVwIHdhdGNoIG9uIG9iamVjdCBtb2RlXG4gICAgaWYgKCFhdHRyKSB7XG4gICAgICB0aGlzLmRlZXAgPSB0cnVlO1xuICAgIH1cbiAgICAvLyBoYW5kbGUgaW50ZXJwb2xhdGlvbiBiaW5kaW5nc1xuICAgIHZhciBkZXNjcmlwdG9yID0gdGhpcy5kZXNjcmlwdG9yO1xuICAgIHZhciB0b2tlbnMgPSBkZXNjcmlwdG9yLmludGVycDtcbiAgICBpZiAodG9rZW5zKSB7XG4gICAgICAvLyBoYW5kbGUgaW50ZXJwb2xhdGlvbnMgd2l0aCBvbmUtdGltZSB0b2tlbnNcbiAgICAgIGlmIChkZXNjcmlwdG9yLmhhc09uZVRpbWUpIHtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uID0gdG9rZW5zVG9FeHAodG9rZW5zLCB0aGlzLl9zY29wZSB8fCB0aGlzLnZtKTtcbiAgICAgIH1cblxuICAgICAgLy8gb25seSBhbGxvdyBiaW5kaW5nIG9uIG5hdGl2ZSBhdHRyaWJ1dGVzXG4gICAgICBpZiAoZGlzYWxsb3dlZEludGVycEF0dHJSRS50ZXN0KGF0dHIpIHx8IGF0dHIgPT09ICduYW1lJyAmJiAodGFnID09PSAnUEFSVElBTCcgfHwgdGFnID09PSAnU0xPVCcpKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihhdHRyICsgJz1cIicgKyBkZXNjcmlwdG9yLnJhdyArICdcIjogJyArICdhdHRyaWJ1dGUgaW50ZXJwb2xhdGlvbiBpcyBub3QgYWxsb3dlZCBpbiBWdWUuanMgJyArICdkaXJlY3RpdmVzIGFuZCBzcGVjaWFsIGF0dHJpYnV0ZXMuJywgdGhpcy52bSk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuICAgICAgICB0aGlzLmludmFsaWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHZhciByYXcgPSBhdHRyICsgJz1cIicgKyBkZXNjcmlwdG9yLnJhdyArICdcIjogJztcbiAgICAgICAgLy8gd2FybiBzcmNcbiAgICAgICAgaWYgKGF0dHIgPT09ICdzcmMnKSB7XG4gICAgICAgICAgd2FybihyYXcgKyAnaW50ZXJwb2xhdGlvbiBpbiBcInNyY1wiIGF0dHJpYnV0ZSB3aWxsIGNhdXNlICcgKyAnYSA0MDQgcmVxdWVzdC4gVXNlIHYtYmluZDpzcmMgaW5zdGVhZC4nLCB0aGlzLnZtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHdhcm4gc3R5bGVcbiAgICAgICAgaWYgKGF0dHIgPT09ICdzdHlsZScpIHtcbiAgICAgICAgICB3YXJuKHJhdyArICdpbnRlcnBvbGF0aW9uIGluIFwic3R5bGVcIiBhdHRyaWJ1dGUgd2lsbCBjYXVzZSAnICsgJ3RoZSBhdHRyaWJ1dGUgdG8gYmUgZGlzY2FyZGVkIGluIEludGVybmV0IEV4cGxvcmVyLiAnICsgJ1VzZSB2LWJpbmQ6c3R5bGUgaW5zdGVhZC4nLCB0aGlzLnZtKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmludmFsaWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGF0dHIgPSB0aGlzLmFyZztcbiAgICBpZiAodGhpcy5hcmcpIHtcbiAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKGF0dHIsIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUgfHwge30pO1xuICAgIH1cbiAgfSxcblxuICAvLyBzaGFyZSBvYmplY3QgaGFuZGxlciB3aXRoIHYtYmluZDpjbGFzc1xuICBoYW5kbGVPYmplY3Q6IHN0eWxlLmhhbmRsZU9iamVjdCxcblxuICBoYW5kbGVTaW5nbGU6IGZ1bmN0aW9uIGhhbmRsZVNpbmdsZShhdHRyLCB2YWx1ZSkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIGludGVycCA9IHRoaXMuZGVzY3JpcHRvci5pbnRlcnA7XG4gICAgaWYgKHRoaXMubW9kaWZpZXJzLmNhbWVsKSB7XG4gICAgICBhdHRyID0gY2FtZWxpemUoYXR0cik7XG4gICAgfVxuICAgIGlmICghaW50ZXJwICYmIGF0dHJXaXRoUHJvcHNSRS50ZXN0KGF0dHIpICYmIGF0dHIgaW4gZWwpIHtcbiAgICAgIHZhciBhdHRyVmFsdWUgPSBhdHRyID09PSAndmFsdWUnID8gdmFsdWUgPT0gbnVsbCAvLyBJRTkgd2lsbCBzZXQgaW5wdXQudmFsdWUgdG8gXCJudWxsXCIgZm9yIG51bGwuLi5cbiAgICAgID8gJycgOiB2YWx1ZSA6IHZhbHVlO1xuXG4gICAgICBpZiAoZWxbYXR0cl0gIT09IGF0dHJWYWx1ZSkge1xuICAgICAgICBlbFthdHRyXSA9IGF0dHJWYWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gc2V0IG1vZGVsIHByb3BzXG4gICAgdmFyIG1vZGVsUHJvcCA9IG1vZGVsUHJvcHNbYXR0cl07XG4gICAgaWYgKCFpbnRlcnAgJiYgbW9kZWxQcm9wKSB7XG4gICAgICBlbFttb2RlbFByb3BdID0gdmFsdWU7XG4gICAgICAvLyB1cGRhdGUgdi1tb2RlbCBpZiBwcmVzZW50XG4gICAgICB2YXIgbW9kZWwgPSBlbC5fX3ZfbW9kZWw7XG4gICAgICBpZiAobW9kZWwpIHtcbiAgICAgICAgbW9kZWwubGlzdGVuZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gZG8gbm90IHNldCB2YWx1ZSBhdHRyaWJ1dGUgZm9yIHRleHRhcmVhXG4gICAgaWYgKGF0dHIgPT09ICd2YWx1ZScgJiYgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyB1cGRhdGUgYXR0cmlidXRlXG4gICAgaWYgKGVudW1lcmF0ZWRBdHRyUkUudGVzdChhdHRyKSkge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlID8gJ3RydWUnIDogJ2ZhbHNlJyk7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSAhPSBudWxsICYmIHZhbHVlICE9PSBmYWxzZSkge1xuICAgICAgaWYgKGF0dHIgPT09ICdjbGFzcycpIHtcbiAgICAgICAgLy8gaGFuZGxlIGVkZ2UgY2FzZSAjMTk2MDpcbiAgICAgICAgLy8gY2xhc3MgaW50ZXJwb2xhdGlvbiBzaG91bGQgbm90IG92ZXJ3cml0ZSBWdWUgdHJhbnNpdGlvbiBjbGFzc1xuICAgICAgICBpZiAoZWwuX192X3RyYW5zKSB7XG4gICAgICAgICAgdmFsdWUgKz0gJyAnICsgZWwuX192X3RyYW5zLmlkICsgJy10cmFuc2l0aW9uJztcbiAgICAgICAgfVxuICAgICAgICBzZXRDbGFzcyhlbCwgdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmICh4bGlua1JFLnRlc3QoYXR0cikpIHtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlTlMoeGxpbmtOUywgYXR0ciwgdmFsdWUgPT09IHRydWUgPyAnJyA6IHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogdmFsdWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgfVxuICB9XG59O1xuXG52YXIgZWwgPSB7XG5cbiAgcHJpb3JpdHk6IEVMLFxuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCF0aGlzLmFyZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaWQgPSB0aGlzLmlkID0gY2FtZWxpemUodGhpcy5hcmcpO1xuICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRlbHM7XG4gICAgaWYgKGhhc093bihyZWZzLCBpZCkpIHtcbiAgICAgIHJlZnNbaWRdID0gdGhpcy5lbDtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVmaW5lUmVhY3RpdmUocmVmcywgaWQsIHRoaXMuZWwpO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kZWxzO1xuICAgIGlmIChyZWZzW3RoaXMuaWRdID09PSB0aGlzLmVsKSB7XG4gICAgICByZWZzW3RoaXMuaWRdID0gbnVsbDtcbiAgICB9XG4gIH1cbn07XG5cbnZhciByZWYgPSB7XG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LXJlZjonICsgdGhpcy5hcmcgKyAnIG11c3QgYmUgdXNlZCBvbiBhIGNoaWxkICcgKyAnY29tcG9uZW50LiBGb3VuZCBvbiA8JyArIHRoaXMuZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICsgJz4uJywgdGhpcy52bSk7XG4gIH1cbn07XG5cbnZhciBjbG9hayA9IHtcbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHRoaXMudm0uJG9uY2UoJ3ByZS1ob29rOmNvbXBpbGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCd2LWNsb2FrJyk7XG4gICAgfSk7XG4gIH1cbn07XG5cbi8vIG11c3QgZXhwb3J0IHBsYWluIG9iamVjdFxudmFyIGRpcmVjdGl2ZXMgPSB7XG4gIHRleHQ6IHRleHQkMSxcbiAgaHRtbDogaHRtbCxcbiAgJ2Zvcic6IHZGb3IsXG4gICdpZic6IHZJZixcbiAgc2hvdzogc2hvdyxcbiAgbW9kZWw6IG1vZGVsLFxuICBvbjogb24kMSxcbiAgYmluZDogYmluZCQxLFxuICBlbDogZWwsXG4gIHJlZjogcmVmLFxuICBjbG9hazogY2xvYWtcbn07XG5cbnZhciB2Q2xhc3MgPSB7XG5cbiAgZGVlcDogdHJ1ZSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHRoaXMuY2xlYW51cCgpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5zZXRDbGFzcyh2YWx1ZS50cmltKCkuc3BsaXQoL1xccysvKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0Q2xhc3Mobm9ybWFsaXplJDEodmFsdWUpKTtcbiAgICB9XG4gIH0sXG5cbiAgc2V0Q2xhc3M6IGZ1bmN0aW9uIHNldENsYXNzKHZhbHVlKSB7XG4gICAgdGhpcy5jbGVhbnVwKHZhbHVlKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIHZhbCA9IHZhbHVlW2ldO1xuICAgICAgaWYgKHZhbCkge1xuICAgICAgICBhcHBseSh0aGlzLmVsLCB2YWwsIGFkZENsYXNzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5wcmV2S2V5cyA9IHZhbHVlO1xuICB9LFxuXG4gIGNsZWFudXA6IGZ1bmN0aW9uIGNsZWFudXAodmFsdWUpIHtcbiAgICB2YXIgcHJldktleXMgPSB0aGlzLnByZXZLZXlzO1xuICAgIGlmICghcHJldktleXMpIHJldHVybjtcbiAgICB2YXIgaSA9IHByZXZLZXlzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YXIga2V5ID0gcHJldktleXNbaV07XG4gICAgICBpZiAoIXZhbHVlIHx8IHZhbHVlLmluZGV4T2Yoa2V5KSA8IDApIHtcbiAgICAgICAgYXBwbHkodGhpcy5lbCwga2V5LCByZW1vdmVDbGFzcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIE5vcm1hbGl6ZSBvYmplY3RzIGFuZCBhcnJheXMgKHBvdGVudGlhbGx5IGNvbnRhaW5pbmcgb2JqZWN0cylcbiAqIGludG8gYXJyYXkgb2Ygc3RyaW5ncy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheTxTdHJpbmd8T2JqZWN0Pn0gdmFsdWVcbiAqIEByZXR1cm4ge0FycmF5PFN0cmluZz59XG4gKi9cblxuZnVuY3Rpb24gbm9ybWFsaXplJDEodmFsdWUpIHtcbiAgdmFyIHJlcyA9IFtdO1xuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIF9rZXkgPSB2YWx1ZVtpXTtcbiAgICAgIGlmIChfa2V5KSB7XG4gICAgICAgIGlmICh0eXBlb2YgX2tleSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICByZXMucHVzaChfa2V5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3IgKHZhciBrIGluIF9rZXkpIHtcbiAgICAgICAgICAgIGlmIChfa2V5W2tdKSByZXMucHVzaChrKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWVba2V5XSkgcmVzLnB1c2goa2V5KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBBZGQgb3IgcmVtb3ZlIGEgY2xhc3MvY2xhc3NlcyBvbiBhbiBlbGVtZW50XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGtleSBUaGUgY2xhc3MgbmFtZS4gVGhpcyBtYXkgb3IgbWF5IG5vdFxuICogICAgICAgICAgICAgICAgICAgICBjb250YWluIGEgc3BhY2UgY2hhcmFjdGVyLCBpbiBzdWNoIGFcbiAqICAgICAgICAgICAgICAgICAgICAgY2FzZSB3ZSdsbCBkZWFsIHdpdGggbXVsdGlwbGUgY2xhc3NcbiAqICAgICAgICAgICAgICAgICAgICAgbmFtZXMgYXQgb25jZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKi9cblxuZnVuY3Rpb24gYXBwbHkoZWwsIGtleSwgZm4pIHtcbiAga2V5ID0ga2V5LnRyaW0oKTtcbiAgaWYgKGtleS5pbmRleE9mKCcgJykgPT09IC0xKSB7XG4gICAgZm4oZWwsIGtleSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIFRoZSBrZXkgY29udGFpbnMgb25lIG9yIG1vcmUgc3BhY2UgY2hhcmFjdGVycy5cbiAgLy8gU2luY2UgYSBjbGFzcyBuYW1lIGRvZXNuJ3QgYWNjZXB0IHN1Y2ggY2hhcmFjdGVycywgd2VcbiAgLy8gdHJlYXQgaXQgYXMgbXVsdGlwbGUgY2xhc3Nlcy5cbiAgdmFyIGtleXMgPSBrZXkuc3BsaXQoL1xccysvKTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGZuKGVsLCBrZXlzW2ldKTtcbiAgfVxufVxuXG52YXIgY29tcG9uZW50ID0ge1xuXG4gIHByaW9yaXR5OiBDT01QT05FTlQsXG5cbiAgcGFyYW1zOiBbJ2tlZXAtYWxpdmUnLCAndHJhbnNpdGlvbi1tb2RlJywgJ2lubGluZS10ZW1wbGF0ZSddLFxuXG4gIC8qKlxuICAgKiBTZXR1cC4gVHdvIHBvc3NpYmxlIHVzYWdlczpcbiAgICpcbiAgICogLSBzdGF0aWM6XG4gICAqICAgPGNvbXA+IG9yIDxkaXYgdi1jb21wb25lbnQ9XCJjb21wXCI+XG4gICAqXG4gICAqIC0gZHluYW1pYzpcbiAgICogICA8Y29tcG9uZW50IDppcz1cInZpZXdcIj5cbiAgICovXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICBpZiAoIXRoaXMuZWwuX192dWVfXykge1xuICAgICAgLy8ga2VlcC1hbGl2ZSBjYWNoZVxuICAgICAgdGhpcy5rZWVwQWxpdmUgPSB0aGlzLnBhcmFtcy5rZWVwQWxpdmU7XG4gICAgICBpZiAodGhpcy5rZWVwQWxpdmUpIHtcbiAgICAgICAgdGhpcy5jYWNoZSA9IHt9O1xuICAgICAgfVxuICAgICAgLy8gY2hlY2sgaW5saW5lLXRlbXBsYXRlXG4gICAgICBpZiAodGhpcy5wYXJhbXMuaW5saW5lVGVtcGxhdGUpIHtcbiAgICAgICAgLy8gZXh0cmFjdCBpbmxpbmUgdGVtcGxhdGUgYXMgYSBEb2N1bWVudEZyYWdtZW50XG4gICAgICAgIHRoaXMuaW5saW5lVGVtcGxhdGUgPSBleHRyYWN0Q29udGVudCh0aGlzLmVsLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIC8vIGNvbXBvbmVudCByZXNvbHV0aW9uIHJlbGF0ZWQgc3RhdGVcbiAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gdGhpcy5Db21wb25lbnQgPSBudWxsO1xuICAgICAgLy8gdHJhbnNpdGlvbiByZWxhdGVkIHN0YXRlXG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmFscyA9IDA7XG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsQ2IgPSBudWxsO1xuICAgICAgLy8gY3JlYXRlIGEgcmVmIGFuY2hvclxuICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtY29tcG9uZW50Jyk7XG4gICAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcbiAgICAgIC8vIHJlbW92ZSBpcyBhdHRyaWJ1dGUuXG4gICAgICAvLyB0aGlzIGlzIHJlbW92ZWQgZHVyaW5nIGNvbXBpbGF0aW9uLCBidXQgYmVjYXVzZSBjb21waWxhdGlvbiBpc1xuICAgICAgLy8gY2FjaGVkLCB3aGVuIHRoZSBjb21wb25lbnQgaXMgdXNlZCBlbHNld2hlcmUgdGhpcyBhdHRyaWJ1dGVcbiAgICAgIC8vIHdpbGwgcmVtYWluIGF0IGxpbmsgdGltZS5cbiAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCdpcycpO1xuICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJzppcycpO1xuICAgICAgLy8gcmVtb3ZlIHJlZiwgc2FtZSBhcyBhYm92ZVxuICAgICAgaWYgKHRoaXMuZGVzY3JpcHRvci5yZWYpIHtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ3YtcmVmOicgKyBoeXBoZW5hdGUodGhpcy5kZXNjcmlwdG9yLnJlZikpO1xuICAgICAgfVxuICAgICAgLy8gaWYgc3RhdGljLCBidWlsZCByaWdodCBub3cuXG4gICAgICBpZiAodGhpcy5saXRlcmFsKSB7XG4gICAgICAgIHRoaXMuc2V0Q29tcG9uZW50KHRoaXMuZXhwcmVzc2lvbik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignY2Fubm90IG1vdW50IGNvbXBvbmVudCBcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgJyArICdvbiBhbHJlYWR5IG1vdW50ZWQgZWxlbWVudDogJyArIHRoaXMuZWwpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUHVibGljIHVwZGF0ZSwgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyIGluIHRoZSBkeW5hbWljXG4gICAqIGxpdGVyYWwgc2NlbmFyaW8sIGUuZy4gPGNvbXBvbmVudCA6aXM9XCJ2aWV3XCI+XG4gICAqL1xuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKCF0aGlzLmxpdGVyYWwpIHtcbiAgICAgIHRoaXMuc2V0Q29tcG9uZW50KHZhbHVlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFN3aXRjaCBkeW5hbWljIGNvbXBvbmVudHMuIE1heSByZXNvbHZlIHRoZSBjb21wb25lbnRcbiAgICogYXN5bmNocm9ub3VzbHksIGFuZCBwZXJmb3JtIHRyYW5zaXRpb24gYmFzZWQgb25cbiAgICogc3BlY2lmaWVkIHRyYW5zaXRpb24gbW9kZS4gQWNjZXB0cyBhIGZldyBhZGRpdGlvbmFsXG4gICAqIGFyZ3VtZW50cyBzcGVjaWZpY2FsbHkgZm9yIHZ1ZS1yb3V0ZXIuXG4gICAqXG4gICAqIFRoZSBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiB0aGUgZnVsbCB0cmFuc2l0aW9uIGlzXG4gICAqIGZpbmlzaGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBzZXRDb21wb25lbnQ6IGZ1bmN0aW9uIHNldENvbXBvbmVudCh2YWx1ZSwgY2IpIHtcbiAgICB0aGlzLmludmFsaWRhdGVQZW5kaW5nKCk7XG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgLy8ganVzdCByZW1vdmUgY3VycmVudFxuICAgICAgdGhpcy51bmJ1aWxkKHRydWUpO1xuICAgICAgdGhpcy5yZW1vdmUodGhpcy5jaGlsZFZNLCBjYik7XG4gICAgICB0aGlzLmNoaWxkVk0gPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB0aGlzLnJlc29sdmVDb21wb25lbnQodmFsdWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5tb3VudENvbXBvbmVudChjYik7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlc29sdmUgdGhlIGNvbXBvbmVudCBjb25zdHJ1Y3RvciB0byB1c2Ugd2hlbiBjcmVhdGluZ1xuICAgKiB0aGUgY2hpbGQgdm0uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSB2YWx1ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgKi9cblxuICByZXNvbHZlQ29tcG9uZW50OiBmdW5jdGlvbiByZXNvbHZlQ29tcG9uZW50KHZhbHVlLCBjYikge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uIChDb21wb25lbnQpIHtcbiAgICAgIHNlbGYuQ29tcG9uZW50TmFtZSA9IENvbXBvbmVudC5vcHRpb25zLm5hbWUgfHwgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyB2YWx1ZSA6IG51bGwpO1xuICAgICAgc2VsZi5Db21wb25lbnQgPSBDb21wb25lbnQ7XG4gICAgICBjYigpO1xuICAgIH0pO1xuICAgIHRoaXMudm0uX3Jlc29sdmVDb21wb25lbnQodmFsdWUsIHRoaXMucGVuZGluZ0NvbXBvbmVudENiKTtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIHVzaW5nIHRoZSBjdXJyZW50IGNvbnN0cnVjdG9yIGFuZFxuICAgKiByZXBsYWNlIHRoZSBleGlzdGluZyBpbnN0YW5jZS4gVGhpcyBtZXRob2QgZG9lc24ndCBjYXJlXG4gICAqIHdoZXRoZXIgdGhlIG5ldyBjb21wb25lbnQgYW5kIHRoZSBvbGQgb25lIGFyZSBhY3R1YWxseVxuICAgKiB0aGUgc2FtZS5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBtb3VudENvbXBvbmVudDogZnVuY3Rpb24gbW91bnRDb21wb25lbnQoY2IpIHtcbiAgICAvLyBhY3R1YWwgbW91bnRcbiAgICB0aGlzLnVuYnVpbGQodHJ1ZSk7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBhY3RpdmF0ZUhvb2tzID0gdGhpcy5Db21wb25lbnQub3B0aW9ucy5hY3RpdmF0ZTtcbiAgICB2YXIgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWQoKTtcbiAgICB2YXIgbmV3Q29tcG9uZW50ID0gdGhpcy5idWlsZCgpO1xuICAgIGlmIChhY3RpdmF0ZUhvb2tzICYmICFjYWNoZWQpIHtcbiAgICAgIHRoaXMud2FpdGluZ0ZvciA9IG5ld0NvbXBvbmVudDtcbiAgICAgIGNhbGxBY3RpdmF0ZUhvb2tzKGFjdGl2YXRlSG9va3MsIG5ld0NvbXBvbmVudCwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoc2VsZi53YWl0aW5nRm9yICE9PSBuZXdDb21wb25lbnQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi53YWl0aW5nRm9yID0gbnVsbDtcbiAgICAgICAgc2VsZi50cmFuc2l0aW9uKG5ld0NvbXBvbmVudCwgY2IpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVwZGF0ZSByZWYgZm9yIGtlcHQtYWxpdmUgY29tcG9uZW50XG4gICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgIG5ld0NvbXBvbmVudC5fdXBkYXRlUmVmKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnRyYW5zaXRpb24obmV3Q29tcG9uZW50LCBjYik7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSBjb21wb25lbnQgY2hhbmdlcyBvciB1bmJpbmRzIGJlZm9yZSBhbiBhc3luY1xuICAgKiBjb25zdHJ1Y3RvciBpcyByZXNvbHZlZCwgd2UgbmVlZCB0byBpbnZhbGlkYXRlIGl0c1xuICAgKiBwZW5kaW5nIGNhbGxiYWNrLlxuICAgKi9cblxuICBpbnZhbGlkYXRlUGVuZGluZzogZnVuY3Rpb24gaW52YWxpZGF0ZVBlbmRpbmcoKSB7XG4gICAgaWYgKHRoaXMucGVuZGluZ0NvbXBvbmVudENiKSB7XG4gICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYi5jYW5jZWwoKTtcbiAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gbnVsbDtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEluc3RhbnRpYXRlL2luc2VydCBhIG5ldyBjaGlsZCB2bS5cbiAgICogSWYga2VlcCBhbGl2ZSBhbmQgaGFzIGNhY2hlZCBpbnN0YW5jZSwgaW5zZXJ0IHRoYXRcbiAgICogaW5zdGFuY2U7IG90aGVyd2lzZSBidWlsZCBhIG5ldyBvbmUgYW5kIGNhY2hlIGl0LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW2V4dHJhT3B0aW9uc11cbiAgICogQHJldHVybiB7VnVlfSAtIHRoZSBjcmVhdGVkIGluc3RhbmNlXG4gICAqL1xuXG4gIGJ1aWxkOiBmdW5jdGlvbiBidWlsZChleHRyYU9wdGlvbnMpIHtcbiAgICB2YXIgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWQoKTtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICByZXR1cm4gY2FjaGVkO1xuICAgIH1cbiAgICBpZiAodGhpcy5Db21wb25lbnQpIHtcbiAgICAgIC8vIGRlZmF1bHQgb3B0aW9uc1xuICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgIG5hbWU6IHRoaXMuQ29tcG9uZW50TmFtZSxcbiAgICAgICAgZWw6IGNsb25lTm9kZSh0aGlzLmVsKSxcbiAgICAgICAgdGVtcGxhdGU6IHRoaXMuaW5saW5lVGVtcGxhdGUsXG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0byBhZGQgdGhlIGNoaWxkIHdpdGggY29ycmVjdCBwYXJlbnRcbiAgICAgICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgaXRzIHBhcmVudFxuICAgICAgICAvLyBzaG91bGQgYmUgdGhlIHRyYW5zY2x1c2lvbiBob3N0LlxuICAgICAgICBwYXJlbnQ6IHRoaXMuX2hvc3QgfHwgdGhpcy52bSxcbiAgICAgICAgLy8gaWYgbm8gaW5saW5lLXRlbXBsYXRlLCB0aGVuIHRoZSBjb21waWxlZFxuICAgICAgICAvLyBsaW5rZXIgY2FuIGJlIGNhY2hlZCBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLlxuICAgICAgICBfbGlua2VyQ2FjaGFibGU6ICF0aGlzLmlubGluZVRlbXBsYXRlLFxuICAgICAgICBfcmVmOiB0aGlzLmRlc2NyaXB0b3IucmVmLFxuICAgICAgICBfYXNDb21wb25lbnQ6IHRydWUsXG4gICAgICAgIF9pc1JvdXRlclZpZXc6IHRoaXMuX2lzUm91dGVyVmlldyxcbiAgICAgICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgY29udGV4dFxuICAgICAgICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2VcbiAgICAgICAgLy8gYW5kIGl0cyBob3N0LlxuICAgICAgICBfY29udGV4dDogdGhpcy52bSxcbiAgICAgICAgLy8gaWYgdGhpcyBpcyBpbnNpZGUgYW4gaW5saW5lIHYtZm9yLCB0aGUgc2NvcGVcbiAgICAgICAgLy8gd2lsbCBiZSB0aGUgaW50ZXJtZWRpYXRlIHNjb3BlIGNyZWF0ZWQgZm9yIHRoaXNcbiAgICAgICAgLy8gcmVwZWF0IGZyYWdtZW50LiB0aGlzIGlzIHVzZWQgZm9yIGxpbmtpbmcgcHJvcHNcbiAgICAgICAgLy8gYW5kIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuICAgICAgICBfc2NvcGU6IHRoaXMuX3Njb3BlLFxuICAgICAgICAvLyBwYXNzIGluIHRoZSBvd25lciBmcmFnbWVudCBvZiB0aGlzIGNvbXBvbmVudC5cbiAgICAgICAgLy8gdGhpcyBpcyBuZWNlc3Nhcnkgc28gdGhhdCB0aGUgZnJhZ21lbnQgY2FuIGtlZXBcbiAgICAgICAgLy8gdHJhY2sgb2YgaXRzIGNvbnRhaW5lZCBjb21wb25lbnRzIGluIG9yZGVyIHRvXG4gICAgICAgIC8vIGNhbGwgYXR0YWNoL2RldGFjaCBob29rcyBmb3IgdGhlbS5cbiAgICAgICAgX2ZyYWc6IHRoaXMuX2ZyYWdcbiAgICAgIH07XG4gICAgICAvLyBleHRyYSBvcHRpb25zXG4gICAgICAvLyBpbiAxLjAuMCB0aGlzIGlzIHVzZWQgYnkgdnVlLXJvdXRlciBvbmx5XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChleHRyYU9wdGlvbnMpIHtcbiAgICAgICAgZXh0ZW5kKG9wdGlvbnMsIGV4dHJhT3B0aW9ucyk7XG4gICAgICB9XG4gICAgICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5Db21wb25lbnQob3B0aW9ucyk7XG4gICAgICBpZiAodGhpcy5rZWVwQWxpdmUpIHtcbiAgICAgICAgdGhpcy5jYWNoZVt0aGlzLkNvbXBvbmVudC5jaWRdID0gY2hpbGQ7XG4gICAgICB9XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwuaGFzQXR0cmlidXRlKCd0cmFuc2l0aW9uJykgJiYgY2hpbGQuX2lzRnJhZ21lbnQpIHtcbiAgICAgICAgd2FybignVHJhbnNpdGlvbnMgd2lsbCBub3Qgd29yayBvbiBhIGZyYWdtZW50IGluc3RhbmNlLiAnICsgJ1RlbXBsYXRlOiAnICsgY2hpbGQuJG9wdGlvbnMudGVtcGxhdGUsIGNoaWxkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRyeSB0byBnZXQgYSBjYWNoZWQgaW5zdGFuY2Ugb2YgdGhlIGN1cnJlbnQgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcmV0dXJuIHtWdWV8dW5kZWZpbmVkfVxuICAgKi9cblxuICBnZXRDYWNoZWQ6IGZ1bmN0aW9uIGdldENhY2hlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5rZWVwQWxpdmUgJiYgdGhpcy5jYWNoZVt0aGlzLkNvbXBvbmVudC5jaWRdO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUZWFyZG93biB0aGUgY3VycmVudCBjaGlsZCwgYnV0IGRlZmVycyBjbGVhbnVwIHNvXG4gICAqIHRoYXQgd2UgY2FuIHNlcGFyYXRlIHRoZSBkZXN0cm95IGFuZCByZW1vdmFsIHN0ZXBzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyXG4gICAqL1xuXG4gIHVuYnVpbGQ6IGZ1bmN0aW9uIHVuYnVpbGQoZGVmZXIpIHtcbiAgICBpZiAodGhpcy53YWl0aW5nRm9yKSB7XG4gICAgICBpZiAoIXRoaXMua2VlcEFsaXZlKSB7XG4gICAgICAgIHRoaXMud2FpdGluZ0Zvci4kZGVzdHJveSgpO1xuICAgICAgfVxuICAgICAgdGhpcy53YWl0aW5nRm9yID0gbnVsbDtcbiAgICB9XG4gICAgdmFyIGNoaWxkID0gdGhpcy5jaGlsZFZNO1xuICAgIGlmICghY2hpbGQgfHwgdGhpcy5rZWVwQWxpdmUpIHtcbiAgICAgIGlmIChjaGlsZCkge1xuICAgICAgICAvLyByZW1vdmUgcmVmXG4gICAgICAgIGNoaWxkLl9pbmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIGNoaWxkLl91cGRhdGVSZWYodHJ1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHRoZSBzb2xlIHB1cnBvc2Ugb2YgYGRlZmVyQ2xlYW51cGAgaXMgc28gdGhhdCB3ZSBjYW5cbiAgICAvLyBcImRlYWN0aXZhdGVcIiB0aGUgdm0gcmlnaHQgbm93IGFuZCBwZXJmb3JtIERPTSByZW1vdmFsXG4gICAgLy8gbGF0ZXIuXG4gICAgY2hpbGQuJGRlc3Ryb3koZmFsc2UsIGRlZmVyKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlIGN1cnJlbnQgZGVzdHJveWVkIGNoaWxkIGFuZCBtYW51YWxseSBkb1xuICAgKiB0aGUgY2xlYW51cCBhZnRlciByZW1vdmFsLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgKi9cblxuICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShjaGlsZCwgY2IpIHtcbiAgICB2YXIga2VlcEFsaXZlID0gdGhpcy5rZWVwQWxpdmU7XG4gICAgaWYgKGNoaWxkKSB7XG4gICAgICAvLyB3ZSBtYXkgaGF2ZSBhIGNvbXBvbmVudCBzd2l0Y2ggd2hlbiBhIHByZXZpb3VzXG4gICAgICAvLyBjb21wb25lbnQgaXMgc3RpbGwgYmVpbmcgdHJhbnNpdGlvbmVkIG91dC5cbiAgICAgIC8vIHdlIHdhbnQgdG8gdHJpZ2dlciBvbmx5IG9uZSBsYXN0ZXN0IGluc2VydGlvbiBjYlxuICAgICAgLy8gd2hlbiB0aGUgZXhpc3RpbmcgdHJhbnNpdGlvbiBmaW5pc2hlcy4gKCMxMTE5KVxuICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbHMrKztcbiAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxDYiA9IGNiO1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgY2hpbGQuJHJlbW92ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxzLS07XG4gICAgICAgIGlmICgha2VlcEFsaXZlKSBjaGlsZC5fY2xlYW51cCgpO1xuICAgICAgICBpZiAoIXNlbGYucGVuZGluZ1JlbW92YWxzICYmIHNlbGYucGVuZGluZ1JlbW92YWxDYikge1xuICAgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxDYigpO1xuICAgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxDYiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoY2IpIHtcbiAgICAgIGNiKCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBBY3R1YWxseSBzd2FwIHRoZSBjb21wb25lbnRzLCBkZXBlbmRpbmcgb24gdGhlXG4gICAqIHRyYW5zaXRpb24gbW9kZS4gRGVmYXVsdHMgdG8gc2ltdWx0YW5lb3VzLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgdHJhbnNpdGlvbjogZnVuY3Rpb24gdHJhbnNpdGlvbih0YXJnZXQsIGNiKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBjdXJyZW50ID0gdGhpcy5jaGlsZFZNO1xuICAgIC8vIGZvciBkZXZ0b29sIGluc3BlY3Rpb25cbiAgICBpZiAoY3VycmVudCkgY3VycmVudC5faW5hY3RpdmUgPSB0cnVlO1xuICAgIHRhcmdldC5faW5hY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLmNoaWxkVk0gPSB0YXJnZXQ7XG4gICAgc3dpdGNoIChzZWxmLnBhcmFtcy50cmFuc2l0aW9uTW9kZSkge1xuICAgICAgY2FzZSAnaW4tb3V0JzpcbiAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50LCBjYik7XG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ291dC1pbic6XG4gICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgY2IpO1xuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50KTtcbiAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGNiKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVuYmluZC5cbiAgICovXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdGhpcy5pbnZhbGlkYXRlUGVuZGluZygpO1xuICAgIC8vIERvIG5vdCBkZWZlciBjbGVhbnVwIHdoZW4gdW5iaW5kaW5nXG4gICAgdGhpcy51bmJ1aWxkKCk7XG4gICAgLy8gZGVzdHJveSBhbGwga2VlcC1hbGl2ZSBjYWNoZWQgaW5zdGFuY2VzXG4gICAgaWYgKHRoaXMuY2FjaGUpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmNhY2hlKSB7XG4gICAgICAgIHRoaXMuY2FjaGVba2V5XS4kZGVzdHJveSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5jYWNoZSA9IG51bGw7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIENhbGwgYWN0aXZhdGUgaG9va3MgaW4gb3JkZXIgKGFzeW5jaHJvbm91cylcbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBob29rc1xuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICovXG5cbmZ1bmN0aW9uIGNhbGxBY3RpdmF0ZUhvb2tzKGhvb2tzLCB2bSwgY2IpIHtcbiAgdmFyIHRvdGFsID0gaG9va3MubGVuZ3RoO1xuICB2YXIgY2FsbGVkID0gMDtcbiAgaG9va3NbMF0uY2FsbCh2bSwgbmV4dCk7XG4gIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgaWYgKCsrY2FsbGVkID49IHRvdGFsKSB7XG4gICAgICBjYigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBob29rc1tjYWxsZWRdLmNhbGwodm0sIG5leHQpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgcHJvcEJpbmRpbmdNb2RlcyA9IGNvbmZpZy5fcHJvcEJpbmRpbmdNb2RlcztcbnZhciBlbXB0eSA9IHt9O1xuXG4vLyByZWdleGVzXG52YXIgaWRlbnRSRSQxID0gL15bJF9hLXpBLVpdK1tcXHckXSokLztcbnZhciBzZXR0YWJsZVBhdGhSRSA9IC9eW0EtWmEtel8kXVtcXHckXSooXFwuW0EtWmEtel8kXVtcXHckXSp8XFxbW15cXFtcXF1dK1xcXSkqJC87XG5cbi8qKlxuICogQ29tcGlsZSBwcm9wcyBvbiBhIHJvb3QgZWxlbWVudCBhbmQgcmV0dXJuXG4gKiBhIHByb3BzIGxpbmsgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG4gKiBAcGFyYW0ge0FycmF5fSBwcm9wT3B0aW9uc1xuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gcHJvcHNMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlUHJvcHMoZWwsIHByb3BPcHRpb25zLCB2bSkge1xuICB2YXIgcHJvcHMgPSBbXTtcbiAgdmFyIG5hbWVzID0gT2JqZWN0LmtleXMocHJvcE9wdGlvbnMpO1xuICB2YXIgaSA9IG5hbWVzLmxlbmd0aDtcbiAgdmFyIG9wdGlvbnMsIG5hbWUsIGF0dHIsIHZhbHVlLCBwYXRoLCBwYXJzZWQsIHByb3A7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBuYW1lID0gbmFtZXNbaV07XG4gICAgb3B0aW9ucyA9IHByb3BPcHRpb25zW25hbWVdIHx8IGVtcHR5O1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgbmFtZSA9PT0gJyRkYXRhJykge1xuICAgICAgd2FybignRG8gbm90IHVzZSAkZGF0YSBhcyBwcm9wLicsIHZtKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIHByb3BzIGNvdWxkIGNvbnRhaW4gZGFzaGVzLCB3aGljaCB3aWxsIGJlXG4gICAgLy8gaW50ZXJwcmV0ZWQgYXMgbWludXMgY2FsY3VsYXRpb25zIGJ5IHRoZSBwYXJzZXJcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIGNhbWVsaXplIHRoZSBwYXRoIGhlcmVcbiAgICBwYXRoID0gY2FtZWxpemUobmFtZSk7XG4gICAgaWYgKCFpZGVudFJFJDEudGVzdChwYXRoKSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHByb3Aga2V5OiBcIicgKyBuYW1lICsgJ1wiLiBQcm9wIGtleXMgJyArICdtdXN0IGJlIHZhbGlkIGlkZW50aWZpZXJzLicsIHZtKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHByb3AgPSB7XG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgcGF0aDogcGF0aCxcbiAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICBtb2RlOiBwcm9wQmluZGluZ01vZGVzLk9ORV9XQVksXG4gICAgICByYXc6IG51bGxcbiAgICB9O1xuXG4gICAgYXR0ciA9IGh5cGhlbmF0ZShuYW1lKTtcbiAgICAvLyBmaXJzdCBjaGVjayBkeW5hbWljIHZlcnNpb25cbiAgICBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIpKSA9PT0gbnVsbCkge1xuICAgICAgaWYgKCh2YWx1ZSA9IGdldEJpbmRBdHRyKGVsLCBhdHRyICsgJy5zeW5jJykpICE9PSBudWxsKSB7XG4gICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWTtcbiAgICAgIH0gZWxzZSBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIgKyAnLm9uY2UnKSkgIT09IG51bGwpIHtcbiAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfVElNRTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAvLyBoYXMgZHluYW1pYyBiaW5kaW5nIVxuICAgICAgcHJvcC5yYXcgPSB2YWx1ZTtcbiAgICAgIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcbiAgICAgIHZhbHVlID0gcGFyc2VkLmV4cHJlc3Npb247XG4gICAgICBwcm9wLmZpbHRlcnMgPSBwYXJzZWQuZmlsdGVycztcbiAgICAgIC8vIGNoZWNrIGJpbmRpbmcgdHlwZVxuICAgICAgaWYgKGlzTGl0ZXJhbCh2YWx1ZSkgJiYgIXBhcnNlZC5maWx0ZXJzKSB7XG4gICAgICAgIC8vIGZvciBleHByZXNzaW9ucyBjb250YWluaW5nIGxpdGVyYWwgbnVtYmVycyBhbmRcbiAgICAgICAgLy8gYm9vbGVhbnMsIHRoZXJlJ3Mgbm8gbmVlZCB0byBzZXR1cCBhIHByb3AgYmluZGluZyxcbiAgICAgICAgLy8gc28gd2UgY2FuIG9wdGltaXplIHRoZW0gYXMgYSBvbmUtdGltZSBzZXQuXG4gICAgICAgIHByb3Aub3B0aW1pemVkTGl0ZXJhbCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9wLmR5bmFtaWMgPSB0cnVlO1xuICAgICAgICAvLyBjaGVjayBub24tc2V0dGFibGUgcGF0aCBmb3IgdHdvLXdheSBiaW5kaW5nc1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBwcm9wLm1vZGUgPT09IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWSAmJiAhc2V0dGFibGVQYXRoUkUudGVzdCh2YWx1ZSkpIHtcbiAgICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLk9ORV9XQVk7XG4gICAgICAgICAgd2FybignQ2Fubm90IGJpbmQgdHdvLXdheSBwcm9wIHdpdGggbm9uLXNldHRhYmxlICcgKyAncGFyZW50IHBhdGg6ICcgKyB2YWx1ZSwgdm0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBwcm9wLnBhcmVudFBhdGggPSB2YWx1ZTtcblxuICAgICAgLy8gd2FybiByZXF1aXJlZCB0d28td2F5XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBvcHRpb25zLnR3b1dheSAmJiBwcm9wLm1vZGUgIT09IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWSkge1xuICAgICAgICB3YXJuKCdQcm9wIFwiJyArIG5hbWUgKyAnXCIgZXhwZWN0cyBhIHR3by13YXkgYmluZGluZyB0eXBlLicsIHZtKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCh2YWx1ZSA9IGdldEF0dHIoZWwsIGF0dHIpKSAhPT0gbnVsbCkge1xuICAgICAgLy8gaGFzIGxpdGVyYWwgYmluZGluZyFcbiAgICAgIHByb3AucmF3ID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvLyBjaGVjayBwb3NzaWJsZSBjYW1lbENhc2UgcHJvcCB1c2FnZVxuICAgICAgdmFyIGxvd2VyQ2FzZU5hbWUgPSBwYXRoLnRvTG93ZXJDYXNlKCk7XG4gICAgICB2YWx1ZSA9IC9bQS1aXFwtXS8udGVzdChuYW1lKSAmJiAoZWwuZ2V0QXR0cmlidXRlKGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLm9uY2UnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSArICcub25jZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lICsgJy5zeW5jJykgfHwgZWwuZ2V0QXR0cmlidXRlKCd2LWJpbmQ6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLnN5bmMnKSk7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgd2FybignUG9zc2libGUgdXNhZ2UgZXJyb3IgZm9yIHByb3AgYCcgKyBsb3dlckNhc2VOYW1lICsgJ2AgLSAnICsgJ2RpZCB5b3UgbWVhbiBgJyArIGF0dHIgKyAnYD8gSFRNTCBpcyBjYXNlLWluc2Vuc2l0aXZlLCByZW1lbWJlciB0byB1c2UgJyArICdrZWJhYi1jYXNlIGZvciBwcm9wcyBpbiB0ZW1wbGF0ZXMuJywgdm0pO1xuICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJlcXVpcmVkKSB7XG4gICAgICAgIC8vIHdhcm4gbWlzc2luZyByZXF1aXJlZFxuICAgICAgICB3YXJuKCdNaXNzaW5nIHJlcXVpcmVkIHByb3A6ICcgKyBuYW1lLCB2bSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIHB1c2ggcHJvcFxuICAgIHByb3BzLnB1c2gocHJvcCk7XG4gIH1cbiAgcmV0dXJuIG1ha2VQcm9wc0xpbmtGbihwcm9wcyk7XG59XG5cbi8qKlxuICogQnVpbGQgYSBmdW5jdGlvbiB0aGF0IGFwcGxpZXMgcHJvcHMgdG8gYSB2bS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBwcm9wc1xuICogQHJldHVybiB7RnVuY3Rpb259IHByb3BzTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gbWFrZVByb3BzTGlua0ZuKHByb3BzKSB7XG4gIHJldHVybiBmdW5jdGlvbiBwcm9wc0xpbmtGbih2bSwgc2NvcGUpIHtcbiAgICAvLyBzdG9yZSByZXNvbHZlZCBwcm9wcyBpbmZvXG4gICAgdm0uX3Byb3BzID0ge307XG4gICAgdmFyIGlubGluZVByb3BzID0gdm0uJG9wdGlvbnMucHJvcHNEYXRhO1xuICAgIHZhciBpID0gcHJvcHMubGVuZ3RoO1xuICAgIHZhciBwcm9wLCBwYXRoLCBvcHRpb25zLCB2YWx1ZSwgcmF3O1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHByb3AgPSBwcm9wc1tpXTtcbiAgICAgIHJhdyA9IHByb3AucmF3O1xuICAgICAgcGF0aCA9IHByb3AucGF0aDtcbiAgICAgIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG4gICAgICB2bS5fcHJvcHNbcGF0aF0gPSBwcm9wO1xuICAgICAgaWYgKGlubGluZVByb3BzICYmIGhhc093bihpbmxpbmVQcm9wcywgcGF0aCkpIHtcbiAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIGlubGluZVByb3BzW3BhdGhdKTtcbiAgICAgIH1pZiAocmF3ID09PSBudWxsKSB7XG4gICAgICAgIC8vIGluaXRpYWxpemUgYWJzZW50IHByb3BcbiAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHVuZGVmaW5lZCk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AuZHluYW1pYykge1xuICAgICAgICAvLyBkeW5hbWljIHByb3BcbiAgICAgICAgaWYgKHByb3AubW9kZSA9PT0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfVElNRSkge1xuICAgICAgICAgIC8vIG9uZSB0aW1lIGJpbmRpbmdcbiAgICAgICAgICB2YWx1ZSA9IChzY29wZSB8fCB2bS5fY29udGV4dCB8fCB2bSkuJGdldChwcm9wLnBhcmVudFBhdGgpO1xuICAgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHZtLl9jb250ZXh0KSB7XG4gICAgICAgICAgICAvLyBkeW5hbWljIGJpbmRpbmdcbiAgICAgICAgICAgIHZtLl9iaW5kRGlyKHtcbiAgICAgICAgICAgICAgbmFtZTogJ3Byb3AnLFxuICAgICAgICAgICAgICBkZWY6IHByb3BEZWYsXG4gICAgICAgICAgICAgIHByb3A6IHByb3BcbiAgICAgICAgICAgIH0sIG51bGwsIG51bGwsIHNjb3BlKTsgLy8gZWwsIGhvc3QsIHNjb3BlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gcm9vdCBpbnN0YW5jZVxuICAgICAgICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdm0uJGdldChwcm9wLnBhcmVudFBhdGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChwcm9wLm9wdGltaXplZExpdGVyYWwpIHtcbiAgICAgICAgLy8gb3B0aW1pemVkIGxpdGVyYWwsIGNhc3QgaXQgYW5kIGp1c3Qgc2V0IG9uY2VcbiAgICAgICAgdmFyIHN0cmlwcGVkID0gc3RyaXBRdW90ZXMocmF3KTtcbiAgICAgICAgdmFsdWUgPSBzdHJpcHBlZCA9PT0gcmF3ID8gdG9Cb29sZWFuKHRvTnVtYmVyKHJhdykpIDogc3RyaXBwZWQ7XG4gICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzdHJpbmcgbGl0ZXJhbCwgYnV0IHdlIG5lZWQgdG8gY2F0ZXIgZm9yXG4gICAgICAgIC8vIEJvb2xlYW4gcHJvcHMgd2l0aCBubyB2YWx1ZSwgb3Igd2l0aCBzYW1lXG4gICAgICAgIC8vIGxpdGVyYWwgdmFsdWUgKGUuZy4gZGlzYWJsZWQ9XCJkaXNhYmxlZFwiKVxuICAgICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1sb2FkZXIvaXNzdWVzLzE4MlxuICAgICAgICB2YWx1ZSA9IG9wdGlvbnMudHlwZSA9PT0gQm9vbGVhbiAmJiAocmF3ID09PSAnJyB8fCByYXcgPT09IGh5cGhlbmF0ZShwcm9wLm5hbWUpKSA/IHRydWUgOiByYXc7XG4gICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIFByb2Nlc3MgYSBwcm9wIHdpdGggYSByYXdWYWx1ZSwgYXBwbHlpbmcgbmVjZXNzYXJ5IGNvZXJzaW9ucyxcbiAqIGRlZmF1bHQgdmFsdWVzICYgYXNzZXJ0aW9ucyBhbmQgY2FsbCB0aGUgZ2l2ZW4gY2FsbGJhY2sgd2l0aFxuICogcHJvY2Vzc2VkIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BcbiAqIEBwYXJhbSB7Kn0gcmF3VmFsdWVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKi9cblxuZnVuY3Rpb24gcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgcmF3VmFsdWUsIGZuKSB7XG4gIHZhciBpc1NpbXBsZSA9IHByb3AuZHluYW1pYyAmJiBpc1NpbXBsZVBhdGgocHJvcC5wYXJlbnRQYXRoKTtcbiAgdmFyIHZhbHVlID0gcmF3VmFsdWU7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdmFsdWUgPSBnZXRQcm9wRGVmYXVsdFZhbHVlKHZtLCBwcm9wKTtcbiAgfVxuICB2YWx1ZSA9IGNvZXJjZVByb3AocHJvcCwgdmFsdWUsIHZtKTtcbiAgdmFyIGNvZXJjZWQgPSB2YWx1ZSAhPT0gcmF3VmFsdWU7XG4gIGlmICghYXNzZXJ0UHJvcChwcm9wLCB2YWx1ZSwgdm0pKSB7XG4gICAgdmFsdWUgPSB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKGlzU2ltcGxlICYmICFjb2VyY2VkKSB7XG4gICAgd2l0aG91dENvbnZlcnNpb24oZnVuY3Rpb24gKCkge1xuICAgICAgZm4odmFsdWUpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGZuKHZhbHVlKTtcbiAgfVxufVxuXG4vKipcbiAqIFNldCBhIHByb3AncyBpbml0aWFsIHZhbHVlIG9uIGEgdm0gYW5kIGl0cyBkYXRhIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKi9cblxuZnVuY3Rpb24gaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKSB7XG4gIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHZhbHVlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBkZWZpbmVSZWFjdGl2ZSh2bSwgcHJvcC5wYXRoLCB2YWx1ZSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFVwZGF0ZSBhIHByb3AncyB2YWx1ZSBvbiBhIHZtLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqL1xuXG5mdW5jdGlvbiB1cGRhdGVQcm9wKHZtLCBwcm9wLCB2YWx1ZSkge1xuICBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCB2YWx1ZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdm1bcHJvcC5wYXRoXSA9IHZhbHVlO1xuICB9KTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGRlZmF1bHQgdmFsdWUgb2YgYSBwcm9wLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BcbiAqIEByZXR1cm4geyp9XG4gKi9cblxuZnVuY3Rpb24gZ2V0UHJvcERlZmF1bHRWYWx1ZSh2bSwgcHJvcCkge1xuICAvLyBubyBkZWZhdWx0LCByZXR1cm4gdW5kZWZpbmVkXG4gIHZhciBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xuICBpZiAoIWhhc093bihvcHRpb25zLCAnZGVmYXVsdCcpKSB7XG4gICAgLy8gYWJzZW50IGJvb2xlYW4gdmFsdWUgZGVmYXVsdHMgdG8gZmFsc2VcbiAgICByZXR1cm4gb3B0aW9ucy50eXBlID09PSBCb29sZWFuID8gZmFsc2UgOiB1bmRlZmluZWQ7XG4gIH1cbiAgdmFyIGRlZiA9IG9wdGlvbnNbJ2RlZmF1bHQnXTtcbiAgLy8gd2FybiBhZ2FpbnN0IG5vbi1mYWN0b3J5IGRlZmF1bHRzIGZvciBPYmplY3QgJiBBcnJheVxuICBpZiAoaXNPYmplY3QoZGVmKSkge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBkZWZhdWx0IHZhbHVlIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIjogJyArICdQcm9wcyB3aXRoIHR5cGUgT2JqZWN0L0FycmF5IG11c3QgdXNlIGEgZmFjdG9yeSBmdW5jdGlvbiAnICsgJ3RvIHJldHVybiB0aGUgZGVmYXVsdCB2YWx1ZS4nLCB2bSk7XG4gIH1cbiAgLy8gY2FsbCBmYWN0b3J5IGZ1bmN0aW9uIGZvciBub24tRnVuY3Rpb24gdHlwZXNcbiAgcmV0dXJuIHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicgJiYgb3B0aW9ucy50eXBlICE9PSBGdW5jdGlvbiA/IGRlZi5jYWxsKHZtKSA6IGRlZjtcbn1cblxuLyoqXG4gKiBBc3NlcnQgd2hldGhlciBhIHByb3AgaXMgdmFsaWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHByb3BcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICovXG5cbmZ1bmN0aW9uIGFzc2VydFByb3AocHJvcCwgdmFsdWUsIHZtKSB7XG4gIGlmICghcHJvcC5vcHRpb25zLnJlcXVpcmVkICYmICggLy8gbm9uLXJlcXVpcmVkXG4gIHByb3AucmF3ID09PSBudWxsIHx8IC8vIGFic2NlbnRcbiAgdmFsdWUgPT0gbnVsbCkgLy8gbnVsbCBvciB1bmRlZmluZWRcbiAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIHZhciBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xuICB2YXIgdHlwZSA9IG9wdGlvbnMudHlwZTtcbiAgdmFyIHZhbGlkID0gIXR5cGU7XG4gIHZhciBleHBlY3RlZFR5cGVzID0gW107XG4gIGlmICh0eXBlKSB7XG4gICAgaWYgKCFpc0FycmF5KHR5cGUpKSB7XG4gICAgICB0eXBlID0gW3R5cGVdO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR5cGUubGVuZ3RoICYmICF2YWxpZDsgaSsrKSB7XG4gICAgICB2YXIgYXNzZXJ0ZWRUeXBlID0gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZVtpXSk7XG4gICAgICBleHBlY3RlZFR5cGVzLnB1c2goYXNzZXJ0ZWRUeXBlLmV4cGVjdGVkVHlwZSk7XG4gICAgICB2YWxpZCA9IGFzc2VydGVkVHlwZS52YWxpZDtcbiAgICB9XG4gIH1cbiAgaWYgKCF2YWxpZCkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB3YXJuKCdJbnZhbGlkIHByb3A6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIi4nICsgJyBFeHBlY3RlZCAnICsgZXhwZWN0ZWRUeXBlcy5tYXAoZm9ybWF0VHlwZSkuam9pbignLCAnKSArICcsIGdvdCAnICsgZm9ybWF0VmFsdWUodmFsdWUpICsgJy4nLCB2bSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgdmFsaWRhdG9yID0gb3B0aW9ucy52YWxpZGF0b3I7XG4gIGlmICh2YWxpZGF0b3IpIHtcbiAgICBpZiAoIXZhbGlkYXRvcih2YWx1ZSkpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBwcm9wOiBjdXN0b20gdmFsaWRhdG9yIGNoZWNrIGZhaWxlZCBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCIuJywgdm0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBGb3JjZSBwYXJzaW5nIHZhbHVlIHdpdGggY29lcmNlIG9wdGlvbi5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7Kn1cbiAqL1xuXG5mdW5jdGlvbiBjb2VyY2VQcm9wKHByb3AsIHZhbHVlLCB2bSkge1xuICB2YXIgY29lcmNlID0gcHJvcC5vcHRpb25zLmNvZXJjZTtcbiAgaWYgKCFjb2VyY2UpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKHR5cGVvZiBjb2VyY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gY29lcmNlKHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgY29lcmNlIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIjogZXhwZWN0ZWQgZnVuY3Rpb24sIGdvdCAnICsgdHlwZW9mIGNvZXJjZSArICcuJywgdm0pO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxufVxuXG4vKipcbiAqIEFzc2VydCB0aGUgdHlwZSBvZiBhIHZhbHVlXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gdHlwZVxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIGFzc2VydFR5cGUodmFsdWUsIHR5cGUpIHtcbiAgdmFyIHZhbGlkO1xuICB2YXIgZXhwZWN0ZWRUeXBlO1xuICBpZiAodHlwZSA9PT0gU3RyaW5nKSB7XG4gICAgZXhwZWN0ZWRUeXBlID0gJ3N0cmluZyc7XG4gICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBOdW1iZXIpIHtcbiAgICBleHBlY3RlZFR5cGUgPSAnbnVtYmVyJztcbiAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IEJvb2xlYW4pIHtcbiAgICBleHBlY3RlZFR5cGUgPSAnYm9vbGVhbic7XG4gICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBGdW5jdGlvbikge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdmdW5jdGlvbic7XG4gICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBPYmplY3QpIHtcbiAgICBleHBlY3RlZFR5cGUgPSAnb2JqZWN0JztcbiAgICB2YWxpZCA9IGlzUGxhaW5PYmplY3QodmFsdWUpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IEFycmF5KSB7XG4gICAgZXhwZWN0ZWRUeXBlID0gJ2FycmF5JztcbiAgICB2YWxpZCA9IGlzQXJyYXkodmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHZhbGlkID0gdmFsdWUgaW5zdGFuY2VvZiB0eXBlO1xuICB9XG4gIHJldHVybiB7XG4gICAgdmFsaWQ6IHZhbGlkLFxuICAgIGV4cGVjdGVkVHlwZTogZXhwZWN0ZWRUeXBlXG4gIH07XG59XG5cbi8qKlxuICogRm9ybWF0IHR5cGUgZm9yIG91dHB1dFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0VHlwZSh0eXBlKSB7XG4gIHJldHVybiB0eXBlID8gdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR5cGUuc2xpY2UoMSkgOiAnY3VzdG9tIHR5cGUnO1xufVxuXG4vKipcbiAqIEZvcm1hdCB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRWYWx1ZSh2YWwpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpLnNsaWNlKDgsIC0xKTtcbn1cblxudmFyIGJpbmRpbmdNb2RlcyA9IGNvbmZpZy5fcHJvcEJpbmRpbmdNb2RlcztcblxudmFyIHByb3BEZWYgPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgY2hpbGQgPSB0aGlzLnZtO1xuICAgIHZhciBwYXJlbnQgPSBjaGlsZC5fY29udGV4dDtcbiAgICAvLyBwYXNzZWQgaW4gZnJvbSBjb21waWxlciBkaXJlY3RseVxuICAgIHZhciBwcm9wID0gdGhpcy5kZXNjcmlwdG9yLnByb3A7XG4gICAgdmFyIGNoaWxkS2V5ID0gcHJvcC5wYXRoO1xuICAgIHZhciBwYXJlbnRLZXkgPSBwcm9wLnBhcmVudFBhdGg7XG4gICAgdmFyIHR3b1dheSA9IHByb3AubW9kZSA9PT0gYmluZGluZ01vZGVzLlRXT19XQVk7XG5cbiAgICB2YXIgcGFyZW50V2F0Y2hlciA9IHRoaXMucGFyZW50V2F0Y2hlciA9IG5ldyBXYXRjaGVyKHBhcmVudCwgcGFyZW50S2V5LCBmdW5jdGlvbiAodmFsKSB7XG4gICAgICB1cGRhdGVQcm9wKGNoaWxkLCBwcm9wLCB2YWwpO1xuICAgIH0sIHtcbiAgICAgIHR3b1dheTogdHdvV2F5LFxuICAgICAgZmlsdGVyczogcHJvcC5maWx0ZXJzLFxuICAgICAgLy8gaW1wb3J0YW50OiBwcm9wcyBuZWVkIHRvIGJlIG9ic2VydmVkIG9uIHRoZVxuICAgICAgLy8gdi1mb3Igc2NvcGUgaWYgcHJlc2VudFxuICAgICAgc2NvcGU6IHRoaXMuX3Njb3BlXG4gICAgfSk7XG5cbiAgICAvLyBzZXQgdGhlIGNoaWxkIGluaXRpYWwgdmFsdWUuXG4gICAgaW5pdFByb3AoY2hpbGQsIHByb3AsIHBhcmVudFdhdGNoZXIudmFsdWUpO1xuXG4gICAgLy8gc2V0dXAgdHdvLXdheSBiaW5kaW5nXG4gICAgaWYgKHR3b1dheSkge1xuICAgICAgLy8gaW1wb3J0YW50OiBkZWZlciB0aGUgY2hpbGQgd2F0Y2hlciBjcmVhdGlvbiB1bnRpbFxuICAgICAgLy8gdGhlIGNyZWF0ZWQgaG9vayAoYWZ0ZXIgZGF0YSBvYnNlcnZhdGlvbilcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIGNoaWxkLiRvbmNlKCdwcmUtaG9vazpjcmVhdGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLmNoaWxkV2F0Y2hlciA9IG5ldyBXYXRjaGVyKGNoaWxkLCBjaGlsZEtleSwgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgIHBhcmVudFdhdGNoZXIuc2V0KHZhbCk7XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAvLyBlbnN1cmUgc3luYyB1cHdhcmQgYmVmb3JlIHBhcmVudCBzeW5jIGRvd24uXG4gICAgICAgICAgLy8gdGhpcyBpcyBuZWNlc3NhcnkgaW4gY2FzZXMgZS5nLiB0aGUgY2hpbGRcbiAgICAgICAgICAvLyBtdXRhdGVzIGEgcHJvcCBhcnJheSwgdGhlbiByZXBsYWNlcyBpdC4gKCMxNjgzKVxuICAgICAgICAgIHN5bmM6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdGhpcy5wYXJlbnRXYXRjaGVyLnRlYXJkb3duKCk7XG4gICAgaWYgKHRoaXMuY2hpbGRXYXRjaGVyKSB7XG4gICAgICB0aGlzLmNoaWxkV2F0Y2hlci50ZWFyZG93bigpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHF1ZXVlJDEgPSBbXTtcbnZhciBxdWV1ZWQgPSBmYWxzZTtcblxuLyoqXG4gKiBQdXNoIGEgam9iIGludG8gdGhlIHF1ZXVlLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGpvYlxuICovXG5cbmZ1bmN0aW9uIHB1c2hKb2Ioam9iKSB7XG4gIHF1ZXVlJDEucHVzaChqb2IpO1xuICBpZiAoIXF1ZXVlZCkge1xuICAgIHF1ZXVlZCA9IHRydWU7XG4gICAgbmV4dFRpY2soZmx1c2gpO1xuICB9XG59XG5cbi8qKlxuICogRmx1c2ggdGhlIHF1ZXVlLCBhbmQgZG8gb25lIGZvcmNlZCByZWZsb3cgYmVmb3JlXG4gKiB0cmlnZ2VyaW5nIHRyYW5zaXRpb25zLlxuICovXG5cbmZ1bmN0aW9uIGZsdXNoKCkge1xuICAvLyBGb3JjZSBsYXlvdXRcbiAgdmFyIGYgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlJDEubGVuZ3RoOyBpKyspIHtcbiAgICBxdWV1ZSQxW2ldKCk7XG4gIH1cbiAgcXVldWUkMSA9IFtdO1xuICBxdWV1ZWQgPSBmYWxzZTtcbiAgLy8gZHVtbXkgcmV0dXJuLCBzbyBqcyBsaW50ZXJzIGRvbid0IGNvbXBsYWluIGFib3V0XG4gIC8vIHVudXNlZCB2YXJpYWJsZSBmXG4gIHJldHVybiBmO1xufVxuXG52YXIgVFlQRV9UUkFOU0lUSU9OID0gJ3RyYW5zaXRpb24nO1xudmFyIFRZUEVfQU5JTUFUSU9OID0gJ2FuaW1hdGlvbic7XG52YXIgdHJhbnNEdXJhdGlvblByb3AgPSB0cmFuc2l0aW9uUHJvcCArICdEdXJhdGlvbic7XG52YXIgYW5pbUR1cmF0aW9uUHJvcCA9IGFuaW1hdGlvblByb3AgKyAnRHVyYXRpb24nO1xuXG4vKipcbiAqIElmIGEganVzdC1lbnRlcmVkIGVsZW1lbnQgaXMgYXBwbGllZCB0aGVcbiAqIGxlYXZlIGNsYXNzIHdoaWxlIGl0cyBlbnRlciB0cmFuc2l0aW9uIGhhc24ndCBzdGFydGVkIHlldCxcbiAqIGFuZCB0aGUgdHJhbnNpdGlvbmVkIHByb3BlcnR5IGhhcyB0aGUgc2FtZSB2YWx1ZSBmb3IgYm90aFxuICogZW50ZXIvbGVhdmUsIHRoZW4gdGhlIGxlYXZlIHRyYW5zaXRpb24gd2lsbCBiZSBza2lwcGVkIGFuZFxuICogdGhlIHRyYW5zaXRpb25lbmQgZXZlbnQgbmV2ZXIgZmlyZXMuIFRoaXMgZnVuY3Rpb24gZW5zdXJlc1xuICogaXRzIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBhZnRlciBhIHRyYW5zaXRpb24gaGFzIHN0YXJ0ZWRcbiAqIGJ5IHdhaXRpbmcgZm9yIGRvdWJsZSByYWYuXG4gKlxuICogSXQgZmFsbHMgYmFjayB0byBzZXRUaW1lb3V0IG9uIGRldmljZXMgdGhhdCBzdXBwb3J0IENTU1xuICogdHJhbnNpdGlvbnMgYnV0IG5vdCByYWYgKGUuZy4gQW5kcm9pZCA0LjIgYnJvd3NlcikgLSBzaW5jZVxuICogdGhlc2UgZW52aXJvbm1lbnRzIGFyZSB1c3VhbGx5IHNsb3csIHdlIGFyZSBnaXZpbmcgaXQgYVxuICogcmVsYXRpdmVseSBsYXJnZSB0aW1lb3V0LlxuICovXG5cbnZhciByYWYgPSBpbkJyb3dzZXIgJiYgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTtcbnZhciB3YWl0Rm9yVHJhbnNpdGlvblN0YXJ0ID0gcmFmXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuPyBmdW5jdGlvbiAoZm4pIHtcbiAgcmFmKGZ1bmN0aW9uICgpIHtcbiAgICByYWYoZm4pO1xuICB9KTtcbn0gOiBmdW5jdGlvbiAoZm4pIHtcbiAgc2V0VGltZW91dChmbiwgNTApO1xufTtcblxuLyoqXG4gKiBBIFRyYW5zaXRpb24gb2JqZWN0IHRoYXQgZW5jYXBzdWxhdGVzIHRoZSBzdGF0ZSBhbmQgbG9naWNcbiAqIG9mIHRoZSB0cmFuc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICogQHBhcmFtIHtPYmplY3R9IGhvb2tzXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuZnVuY3Rpb24gVHJhbnNpdGlvbihlbCwgaWQsIGhvb2tzLCB2bSkge1xuICB0aGlzLmlkID0gaWQ7XG4gIHRoaXMuZWwgPSBlbDtcbiAgdGhpcy5lbnRlckNsYXNzID0gaG9va3MgJiYgaG9va3MuZW50ZXJDbGFzcyB8fCBpZCArICctZW50ZXInO1xuICB0aGlzLmxlYXZlQ2xhc3MgPSBob29rcyAmJiBob29rcy5sZWF2ZUNsYXNzIHx8IGlkICsgJy1sZWF2ZSc7XG4gIHRoaXMuaG9va3MgPSBob29rcztcbiAgdGhpcy52bSA9IHZtO1xuICAvLyBhc3luYyBzdGF0ZVxuICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gdGhpcy5vcCA9IHRoaXMuY2IgPSBudWxsO1xuICB0aGlzLmp1c3RFbnRlcmVkID0gZmFsc2U7XG4gIHRoaXMuZW50ZXJlZCA9IHRoaXMubGVmdCA9IGZhbHNlO1xuICB0aGlzLnR5cGVDYWNoZSA9IHt9O1xuICAvLyBjaGVjayBjc3MgdHJhbnNpdGlvbiB0eXBlXG4gIHRoaXMudHlwZSA9IGhvb2tzICYmIGhvb2tzLnR5cGU7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmICh0aGlzLnR5cGUgJiYgdGhpcy50eXBlICE9PSBUWVBFX1RSQU5TSVRJT04gJiYgdGhpcy50eXBlICE9PSBUWVBFX0FOSU1BVElPTikge1xuICAgICAgd2FybignaW52YWxpZCBDU1MgdHJhbnNpdGlvbiB0eXBlIGZvciB0cmFuc2l0aW9uPVwiJyArIHRoaXMuaWQgKyAnXCI6ICcgKyB0aGlzLnR5cGUsIHZtKTtcbiAgICB9XG4gIH1cbiAgLy8gYmluZFxuICB2YXIgc2VsZiA9IHRoaXM7WydlbnRlck5leHRUaWNrJywgJ2VudGVyRG9uZScsICdsZWF2ZU5leHRUaWNrJywgJ2xlYXZlRG9uZSddLmZvckVhY2goZnVuY3Rpb24gKG0pIHtcbiAgICBzZWxmW21dID0gYmluZChzZWxmW21dLCBzZWxmKTtcbiAgfSk7XG59XG5cbnZhciBwJDEgPSBUcmFuc2l0aW9uLnByb3RvdHlwZTtcblxuLyoqXG4gKiBTdGFydCBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLlxuICpcbiAqIDEuIGVudGVyIHRyYW5zaXRpb24gdHJpZ2dlcmVkXG4gKiAyLiBjYWxsIGJlZm9yZUVudGVyIGhvb2tcbiAqIDMuIGFkZCBlbnRlciBjbGFzc1xuICogNC4gaW5zZXJ0L3Nob3cgZWxlbWVudFxuICogNS4gY2FsbCBlbnRlciBob29rICh3aXRoIHBvc3NpYmxlIGV4cGxpY2l0IGpzIGNhbGxiYWNrKVxuICogNi4gcmVmbG93XG4gKiA3LiBiYXNlZCBvbiB0cmFuc2l0aW9uIHR5cGU6XG4gKiAgICAtIHRyYW5zaXRpb246XG4gKiAgICAgICAgcmVtb3ZlIGNsYXNzIG5vdywgd2FpdCBmb3IgdHJhbnNpdGlvbmVuZCxcbiAqICAgICAgICB0aGVuIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAqICAgIC0gYW5pbWF0aW9uOlxuICogICAgICAgIHdhaXQgZm9yIGFuaW1hdGlvbmVuZCwgcmVtb3ZlIGNsYXNzLFxuICogICAgICAgIHRoZW4gZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogICAgLSBubyBjc3MgdHJhbnNpdGlvbjpcbiAqICAgICAgICBkb25lIG5vdyBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogOC4gd2FpdCBmb3IgZWl0aGVyIGRvbmUgb3IganMgY2FsbGJhY2ssIHRoZW4gY2FsbFxuICogICAgYWZ0ZXJFbnRlciBob29rLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gaW5zZXJ0L3Nob3cgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5wJDEuZW50ZXIgPSBmdW5jdGlvbiAob3AsIGNiKSB7XG4gIHRoaXMuY2FuY2VsUGVuZGluZygpO1xuICB0aGlzLmNhbGxIb29rKCdiZWZvcmVFbnRlcicpO1xuICB0aGlzLmNiID0gY2I7XG4gIGFkZENsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG4gIG9wKCk7XG4gIHRoaXMuZW50ZXJlZCA9IGZhbHNlO1xuICB0aGlzLmNhbGxIb29rV2l0aENiKCdlbnRlcicpO1xuICBpZiAodGhpcy5lbnRlcmVkKSB7XG4gICAgcmV0dXJuOyAvLyB1c2VyIGNhbGxlZCBkb25lIHN5bmNocm9ub3VzbHkuXG4gIH1cbiAgdGhpcy5jYW5jZWwgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MuZW50ZXJDYW5jZWxsZWQ7XG4gIHB1c2hKb2IodGhpcy5lbnRlck5leHRUaWNrKTtcbn07XG5cbi8qKlxuICogVGhlIFwibmV4dFRpY2tcIiBwaGFzZSBvZiBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLCB3aGljaCBpc1xuICogdG8gYmUgcHVzaGVkIGludG8gYSBxdWV1ZSBhbmQgZXhlY3V0ZWQgYWZ0ZXIgYSByZWZsb3cgc29cbiAqIHRoYXQgcmVtb3ZpbmcgdGhlIGNsYXNzIGNhbiB0cmlnZ2VyIGEgQ1NTIHRyYW5zaXRpb24uXG4gKi9cblxucCQxLmVudGVyTmV4dFRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgLy8gcHJldmVudCB0cmFuc2l0aW9uIHNraXBwaW5nXG4gIHRoaXMuanVzdEVudGVyZWQgPSB0cnVlO1xuICB3YWl0Rm9yVHJhbnNpdGlvblN0YXJ0KGZ1bmN0aW9uICgpIHtcbiAgICBfdGhpcy5qdXN0RW50ZXJlZCA9IGZhbHNlO1xuICB9KTtcbiAgdmFyIGVudGVyRG9uZSA9IHRoaXMuZW50ZXJEb25lO1xuICB2YXIgdHlwZSA9IHRoaXMuZ2V0Q3NzVHJhbnNpdGlvblR5cGUodGhpcy5lbnRlckNsYXNzKTtcbiAgaWYgKCF0aGlzLnBlbmRpbmdKc0NiKSB7XG4gICAgaWYgKHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTikge1xuICAgICAgLy8gdHJpZ2dlciB0cmFuc2l0aW9uIGJ5IHJlbW92aW5nIGVudGVyIGNsYXNzIG5vd1xuICAgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcbiAgICAgIHRoaXMuc2V0dXBDc3NDYih0cmFuc2l0aW9uRW5kRXZlbnQsIGVudGVyRG9uZSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBUWVBFX0FOSU1BVElPTikge1xuICAgICAgdGhpcy5zZXR1cENzc0NiKGFuaW1hdGlvbkVuZEV2ZW50LCBlbnRlckRvbmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbnRlckRvbmUoKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OKSB7XG4gICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcbiAgfVxufTtcblxuLyoqXG4gKiBUaGUgXCJjbGVhbnVwXCIgcGhhc2Ugb2YgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEuZW50ZXJEb25lID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmVudGVyZWQgPSB0cnVlO1xuICB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsO1xuICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICB0aGlzLmNhbGxIb29rKCdhZnRlckVudGVyJyk7XG4gIGlmICh0aGlzLmNiKSB0aGlzLmNiKCk7XG59O1xuXG4vKipcbiAqIFN0YXJ0IGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuICpcbiAqIDEuIGxlYXZlIHRyYW5zaXRpb24gdHJpZ2dlcmVkLlxuICogMi4gY2FsbCBiZWZvcmVMZWF2ZSBob29rXG4gKiAzLiBhZGQgbGVhdmUgY2xhc3MgKHRyaWdnZXIgY3NzIHRyYW5zaXRpb24pXG4gKiA0LiBjYWxsIGxlYXZlIGhvb2sgKHdpdGggcG9zc2libGUgZXhwbGljaXQganMgY2FsbGJhY2spXG4gKiA1LiByZWZsb3cgaWYgbm8gZXhwbGljaXQganMgY2FsbGJhY2sgaXMgcHJvdmlkZWRcbiAqIDYuIGJhc2VkIG9uIHRyYW5zaXRpb24gdHlwZTpcbiAqICAgIC0gdHJhbnNpdGlvbiBvciBhbmltYXRpb246XG4gKiAgICAgICAgd2FpdCBmb3IgZW5kIGV2ZW50LCByZW1vdmUgY2xhc3MsIHRoZW4gZG9uZSBpZlxuICogICAgICAgIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiAgICAtIG5vIGNzcyB0cmFuc2l0aW9uOlxuICogICAgICAgIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAqIDcuIHdhaXQgZm9yIGVpdGhlciBkb25lIG9yIGpzIGNhbGxiYWNrLCB0aGVuIGNhbGxcbiAqICAgIGFmdGVyTGVhdmUgaG9vay5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIHJlbW92ZS9oaWRlIHRoZSBlbGVtZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxucCQxLmxlYXZlID0gZnVuY3Rpb24gKG9wLCBjYikge1xuICB0aGlzLmNhbmNlbFBlbmRpbmcoKTtcbiAgdGhpcy5jYWxsSG9vaygnYmVmb3JlTGVhdmUnKTtcbiAgdGhpcy5vcCA9IG9wO1xuICB0aGlzLmNiID0gY2I7XG4gIGFkZENsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG4gIHRoaXMubGVmdCA9IGZhbHNlO1xuICB0aGlzLmNhbGxIb29rV2l0aENiKCdsZWF2ZScpO1xuICBpZiAodGhpcy5sZWZ0KSB7XG4gICAgcmV0dXJuOyAvLyB1c2VyIGNhbGxlZCBkb25lIHN5bmNocm9ub3VzbHkuXG4gIH1cbiAgdGhpcy5jYW5jZWwgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MubGVhdmVDYW5jZWxsZWQ7XG4gIC8vIG9ubHkgbmVlZCB0byBoYW5kbGUgbGVhdmVEb25lIGlmXG4gIC8vIDEuIHRoZSB0cmFuc2l0aW9uIGlzIGFscmVhZHkgZG9uZSAoc3luY2hyb25vdXNseSBjYWxsZWRcbiAgLy8gICAgYnkgdGhlIHVzZXIsIHdoaWNoIGNhdXNlcyB0aGlzLm9wIHNldCB0byBudWxsKVxuICAvLyAyLiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrXG4gIGlmICh0aGlzLm9wICYmICF0aGlzLnBlbmRpbmdKc0NiKSB7XG4gICAgLy8gaWYgYSBDU1MgdHJhbnNpdGlvbiBsZWF2ZXMgaW1tZWRpYXRlbHkgYWZ0ZXIgZW50ZXIsXG4gICAgLy8gdGhlIHRyYW5zaXRpb25lbmQgZXZlbnQgbmV2ZXIgZmlyZXMuIHRoZXJlZm9yZSB3ZVxuICAgIC8vIGRldGVjdCBzdWNoIGNhc2VzIGFuZCBlbmQgdGhlIGxlYXZlIGltbWVkaWF0ZWx5LlxuICAgIGlmICh0aGlzLmp1c3RFbnRlcmVkKSB7XG4gICAgICB0aGlzLmxlYXZlRG9uZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwdXNoSm9iKHRoaXMubGVhdmVOZXh0VGljayk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIFRoZSBcIm5leHRUaWNrXCIgcGhhc2Ugb2YgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG4gKi9cblxucCQxLmxlYXZlTmV4dFRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB0eXBlID0gdGhpcy5nZXRDc3NUcmFuc2l0aW9uVHlwZSh0aGlzLmxlYXZlQ2xhc3MpO1xuICBpZiAodHlwZSkge1xuICAgIHZhciBldmVudCA9IHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTiA/IHRyYW5zaXRpb25FbmRFdmVudCA6IGFuaW1hdGlvbkVuZEV2ZW50O1xuICAgIHRoaXMuc2V0dXBDc3NDYihldmVudCwgdGhpcy5sZWF2ZURvbmUpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMubGVhdmVEb25lKCk7XG4gIH1cbn07XG5cbi8qKlxuICogVGhlIFwiY2xlYW51cFwiIHBoYXNlIG9mIGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuICovXG5cbnAkMS5sZWF2ZURvbmUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMubGVmdCA9IHRydWU7XG4gIHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG4gIHRoaXMub3AoKTtcbiAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcbiAgdGhpcy5jYWxsSG9vaygnYWZ0ZXJMZWF2ZScpO1xuICBpZiAodGhpcy5jYikgdGhpcy5jYigpO1xuICB0aGlzLm9wID0gbnVsbDtcbn07XG5cbi8qKlxuICogQ2FuY2VsIGFueSBwZW5kaW5nIGNhbGxiYWNrcyBmcm9tIGEgcHJldmlvdXNseSBydW5uaW5nXG4gKiBidXQgbm90IGZpbmlzaGVkIHRyYW5zaXRpb24uXG4gKi9cblxucCQxLmNhbmNlbFBlbmRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMub3AgPSB0aGlzLmNiID0gbnVsbDtcbiAgdmFyIGhhc1BlbmRpbmcgPSBmYWxzZTtcbiAgaWYgKHRoaXMucGVuZGluZ0Nzc0NiKSB7XG4gICAgaGFzUGVuZGluZyA9IHRydWU7XG4gICAgb2ZmKHRoaXMuZWwsIHRoaXMucGVuZGluZ0Nzc0V2ZW50LCB0aGlzLnBlbmRpbmdDc3NDYik7XG4gICAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IG51bGw7XG4gIH1cbiAgaWYgKHRoaXMucGVuZGluZ0pzQ2IpIHtcbiAgICBoYXNQZW5kaW5nID0gdHJ1ZTtcbiAgICB0aGlzLnBlbmRpbmdKc0NiLmNhbmNlbCgpO1xuICAgIHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsO1xuICB9XG4gIGlmIChoYXNQZW5kaW5nKSB7XG4gICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcbiAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuICB9XG4gIGlmICh0aGlzLmNhbmNlbCkge1xuICAgIHRoaXMuY2FuY2VsLmNhbGwodGhpcy52bSwgdGhpcy5lbCk7XG4gICAgdGhpcy5jYW5jZWwgPSBudWxsO1xuICB9XG59O1xuXG4vKipcbiAqIENhbGwgYSB1c2VyLXByb3ZpZGVkIHN5bmNocm9ub3VzIGhvb2sgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqL1xuXG5wJDEuY2FsbEhvb2sgPSBmdW5jdGlvbiAodHlwZSkge1xuICBpZiAodGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzW3R5cGVdKSB7XG4gICAgdGhpcy5ob29rc1t0eXBlXS5jYWxsKHRoaXMudm0sIHRoaXMuZWwpO1xuICB9XG59O1xuXG4vKipcbiAqIENhbGwgYSB1c2VyLXByb3ZpZGVkLCBwb3RlbnRpYWxseS1hc3luYyBob29rIGZ1bmN0aW9uLlxuICogV2UgY2hlY2sgZm9yIHRoZSBsZW5ndGggb2YgYXJndW1lbnRzIHRvIHNlZSBpZiB0aGUgaG9va1xuICogZXhwZWN0cyBhIGBkb25lYCBjYWxsYmFjay4gSWYgdHJ1ZSwgdGhlIHRyYW5zaXRpb24ncyBlbmRcbiAqIHdpbGwgYmUgZGV0ZXJtaW5lZCBieSB3aGVuIHRoZSB1c2VyIGNhbGxzIHRoYXQgY2FsbGJhY2s7XG4gKiBvdGhlcndpc2UsIHRoZSBlbmQgaXMgZGV0ZXJtaW5lZCBieSB0aGUgQ1NTIHRyYW5zaXRpb24gb3JcbiAqIGFuaW1hdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5cbnAkMS5jYWxsSG9va1dpdGhDYiA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gIHZhciBob29rID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzW3R5cGVdO1xuICBpZiAoaG9vaykge1xuICAgIGlmIChob29rLmxlbmd0aCA+IDEpIHtcbiAgICAgIHRoaXMucGVuZGluZ0pzQ2IgPSBjYW5jZWxsYWJsZSh0aGlzW3R5cGUgKyAnRG9uZSddKTtcbiAgICB9XG4gICAgaG9vay5jYWxsKHRoaXMudm0sIHRoaXMuZWwsIHRoaXMucGVuZGluZ0pzQ2IpO1xuICB9XG59O1xuXG4vKipcbiAqIEdldCBhbiBlbGVtZW50J3MgdHJhbnNpdGlvbiB0eXBlIGJhc2VkIG9uIHRoZVxuICogY2FsY3VsYXRlZCBzdHlsZXMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGNsYXNzTmFtZVxuICogQHJldHVybiB7TnVtYmVyfVxuICovXG5cbnAkMS5nZXRDc3NUcmFuc2l0aW9uVHlwZSA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICghdHJhbnNpdGlvbkVuZEV2ZW50IHx8XG4gIC8vIHNraXAgQ1NTIHRyYW5zaXRpb25zIGlmIHBhZ2UgaXMgbm90IHZpc2libGUgLVxuICAvLyB0aGlzIHNvbHZlcyB0aGUgaXNzdWUgb2YgdHJhbnNpdGlvbmVuZCBldmVudHMgbm90XG4gIC8vIGZpcmluZyB1bnRpbCB0aGUgcGFnZSBpcyB2aXNpYmxlIGFnYWluLlxuICAvLyBwYWdlVmlzaWJpbGl0eSBBUEkgaXMgc3VwcG9ydGVkIGluIElFMTArLCBzYW1lIGFzXG4gIC8vIENTUyB0cmFuc2l0aW9ucy5cbiAgZG9jdW1lbnQuaGlkZGVuIHx8XG4gIC8vIGV4cGxpY2l0IGpzLW9ubHkgdHJhbnNpdGlvblxuICB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MuY3NzID09PSBmYWxzZSB8fFxuICAvLyBlbGVtZW50IGlzIGhpZGRlblxuICBpc0hpZGRlbih0aGlzLmVsKSkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgdHlwZSA9IHRoaXMudHlwZSB8fCB0aGlzLnR5cGVDYWNoZVtjbGFzc05hbWVdO1xuICBpZiAodHlwZSkgcmV0dXJuIHR5cGU7XG4gIHZhciBpbmxpbmVTdHlsZXMgPSB0aGlzLmVsLnN0eWxlO1xuICB2YXIgY29tcHV0ZWRTdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKTtcbiAgdmFyIHRyYW5zRHVyYXRpb24gPSBpbmxpbmVTdHlsZXNbdHJhbnNEdXJhdGlvblByb3BdIHx8IGNvbXB1dGVkU3R5bGVzW3RyYW5zRHVyYXRpb25Qcm9wXTtcbiAgaWYgKHRyYW5zRHVyYXRpb24gJiYgdHJhbnNEdXJhdGlvbiAhPT0gJzBzJykge1xuICAgIHR5cGUgPSBUWVBFX1RSQU5TSVRJT047XG4gIH0gZWxzZSB7XG4gICAgdmFyIGFuaW1EdXJhdGlvbiA9IGlubGluZVN0eWxlc1thbmltRHVyYXRpb25Qcm9wXSB8fCBjb21wdXRlZFN0eWxlc1thbmltRHVyYXRpb25Qcm9wXTtcbiAgICBpZiAoYW5pbUR1cmF0aW9uICYmIGFuaW1EdXJhdGlvbiAhPT0gJzBzJykge1xuICAgICAgdHlwZSA9IFRZUEVfQU5JTUFUSU9OO1xuICAgIH1cbiAgfVxuICBpZiAodHlwZSkge1xuICAgIHRoaXMudHlwZUNhY2hlW2NsYXNzTmFtZV0gPSB0eXBlO1xuICB9XG4gIHJldHVybiB0eXBlO1xufTtcblxuLyoqXG4gKiBTZXR1cCBhIENTUyB0cmFuc2l0aW9uZW5kL2FuaW1hdGlvbmVuZCBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKi9cblxucCQxLnNldHVwQ3NzQ2IgPSBmdW5jdGlvbiAoZXZlbnQsIGNiKSB7XG4gIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gZXZlbnQ7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIGVsID0gdGhpcy5lbDtcbiAgdmFyIG9uRW5kID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSBmdW5jdGlvbiAoZSkge1xuICAgIGlmIChlLnRhcmdldCA9PT0gZWwpIHtcbiAgICAgIG9mZihlbCwgZXZlbnQsIG9uRW5kKTtcbiAgICAgIHNlbGYucGVuZGluZ0Nzc0V2ZW50ID0gc2VsZi5wZW5kaW5nQ3NzQ2IgPSBudWxsO1xuICAgICAgaWYgKCFzZWxmLnBlbmRpbmdKc0NiICYmIGNiKSB7XG4gICAgICAgIGNiKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBvbihlbCwgZXZlbnQsIG9uRW5kKTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBoaWRkZW4gLSBpbiB0aGF0IGNhc2Ugd2UgY2FuIGp1c3RcbiAqIHNraXAgdGhlIHRyYW5zaXRpb24gYWxsdG9nZXRoZXIuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc0hpZGRlbihlbCkge1xuICBpZiAoL3N2ZyQvLnRlc3QoZWwubmFtZXNwYWNlVVJJKSkge1xuICAgIC8vIFNWRyBlbGVtZW50cyBkbyBub3QgaGF2ZSBvZmZzZXQoV2lkdGh8SGVpZ2h0KVxuICAgIC8vIHNvIHdlIG5lZWQgdG8gY2hlY2sgdGhlIGNsaWVudCByZWN0XG4gICAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4gIShyZWN0LndpZHRoIHx8IHJlY3QuaGVpZ2h0KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gIShlbC5vZmZzZXRXaWR0aCB8fCBlbC5vZmZzZXRIZWlnaHQgfHwgZWwuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpO1xuICB9XG59XG5cbnZhciB0cmFuc2l0aW9uJDEgPSB7XG5cbiAgcHJpb3JpdHk6IFRSQU5TSVRJT04sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoaWQsIG9sZElkKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICAvLyByZXNvbHZlIG9uIG93bmVyIHZtXG4gICAgdmFyIGhvb2tzID0gcmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICd0cmFuc2l0aW9ucycsIGlkKTtcbiAgICBpZCA9IGlkIHx8ICd2JztcbiAgICBvbGRJZCA9IG9sZElkIHx8ICd2JztcbiAgICBlbC5fX3ZfdHJhbnMgPSBuZXcgVHJhbnNpdGlvbihlbCwgaWQsIGhvb2tzLCB0aGlzLnZtKTtcbiAgICByZW1vdmVDbGFzcyhlbCwgb2xkSWQgKyAnLXRyYW5zaXRpb24nKTtcbiAgICBhZGRDbGFzcyhlbCwgaWQgKyAnLXRyYW5zaXRpb24nKTtcbiAgfVxufTtcblxudmFyIGludGVybmFsRGlyZWN0aXZlcyA9IHtcbiAgc3R5bGU6IHN0eWxlLFxuICAnY2xhc3MnOiB2Q2xhc3MsXG4gIGNvbXBvbmVudDogY29tcG9uZW50LFxuICBwcm9wOiBwcm9wRGVmLFxuICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uJDFcbn07XG5cbi8vIHNwZWNpYWwgYmluZGluZyBwcmVmaXhlc1xudmFyIGJpbmRSRSA9IC9edi1iaW5kOnxeOi87XG52YXIgb25SRSA9IC9edi1vbjp8XkAvO1xudmFyIGRpckF0dHJSRSA9IC9edi0oW146XSspKD86JHw6KC4qKSQpLztcbnZhciBtb2RpZmllclJFID0gL1xcLlteXFwuXSsvZztcbnZhciB0cmFuc2l0aW9uUkUgPSAvXih2LWJpbmQ6fDopP3RyYW5zaXRpb24kLztcblxuLy8gZGVmYXVsdCBkaXJlY3RpdmUgcHJpb3JpdHlcbnZhciBERUZBVUxUX1BSSU9SSVRZID0gMTAwMDtcbnZhciBERUZBVUxUX1RFUk1JTkFMX1BSSU9SSVRZID0gMjAwMDtcblxuLyoqXG4gKiBDb21waWxlIGEgdGVtcGxhdGUgYW5kIHJldHVybiBhIHJldXNhYmxlIGNvbXBvc2l0ZSBsaW5rXG4gKiBmdW5jdGlvbiwgd2hpY2ggcmVjdXJzaXZlbHkgY29udGFpbnMgbW9yZSBsaW5rIGZ1bmN0aW9uc1xuICogaW5zaWRlLiBUaGlzIHRvcCBsZXZlbCBjb21waWxlIGZ1bmN0aW9uIHdvdWxkIG5vcm1hbGx5XG4gKiBiZSBjYWxsZWQgb24gaW5zdGFuY2Ugcm9vdCBub2RlcywgYnV0IGNhbiBhbHNvIGJlIHVzZWRcbiAqIGZvciBwYXJ0aWFsIGNvbXBpbGF0aW9uIGlmIHRoZSBwYXJ0aWFsIGFyZ3VtZW50IGlzIHRydWUuXG4gKlxuICogVGhlIHJldHVybmVkIGNvbXBvc2l0ZSBsaW5rIGZ1bmN0aW9uLCB3aGVuIGNhbGxlZCwgd2lsbFxuICogcmV0dXJuIGFuIHVubGluayBmdW5jdGlvbiB0aGF0IHRlYXJzZG93biBhbGwgZGlyZWN0aXZlc1xuICogY3JlYXRlZCBkdXJpbmcgdGhlIGxpbmtpbmcgcGhhc2UuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtCb29sZWFufSBwYXJ0aWFsXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlKGVsLCBvcHRpb25zLCBwYXJ0aWFsKSB7XG4gIC8vIGxpbmsgZnVuY3Rpb24gZm9yIHRoZSBub2RlIGl0c2VsZi5cbiAgdmFyIG5vZGVMaW5rRm4gPSBwYXJ0aWFsIHx8ICFvcHRpb25zLl9hc0NvbXBvbmVudCA/IGNvbXBpbGVOb2RlKGVsLCBvcHRpb25zKSA6IG51bGw7XG4gIC8vIGxpbmsgZnVuY3Rpb24gZm9yIHRoZSBjaGlsZE5vZGVzXG4gIHZhciBjaGlsZExpbmtGbiA9ICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJiAhaXNTY3JpcHQoZWwpICYmIGVsLmhhc0NoaWxkTm9kZXMoKSA/IGNvbXBpbGVOb2RlTGlzdChlbC5jaGlsZE5vZGVzLCBvcHRpb25zKSA6IG51bGw7XG5cbiAgLyoqXG4gICAqIEEgY29tcG9zaXRlIGxpbmtlciBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gYSBhbHJlYWR5XG4gICAqIGNvbXBpbGVkIHBpZWNlIG9mIERPTSwgd2hpY2ggaW5zdGFudGlhdGVzIGFsbCBkaXJlY3RpdmVcbiAgICogaW5zdGFuY2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG4gICAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSBob3N0IHZtIG9mIHRyYW5zY2x1ZGVkIGNvbnRlbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBsaW5rIGNvbnRleHQgZnJhZ21lbnRcbiAgICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICAgKi9cblxuICByZXR1cm4gZnVuY3Rpb24gY29tcG9zaXRlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICAvLyBjYWNoZSBjaGlsZE5vZGVzIGJlZm9yZSBsaW5raW5nIHBhcmVudCwgZml4ICM2NTdcbiAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkoZWwuY2hpbGROb2Rlcyk7XG4gICAgLy8gbGlua1xuICAgIHZhciBkaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gY29tcG9zaXRlTGlua0NhcHR1cmVyKCkge1xuICAgICAgaWYgKG5vZGVMaW5rRm4pIG5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgICBpZiAoY2hpbGRMaW5rRm4pIGNoaWxkTGlua0ZuKHZtLCBjaGlsZE5vZGVzLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgfSwgdm0pO1xuICAgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIGRpcnMpO1xuICB9O1xufVxuXG4vKipcbiAqIEFwcGx5IGEgbGlua2VyIHRvIGEgdm0vZWxlbWVudCBwYWlyIGFuZCBjYXB0dXJlIHRoZVxuICogZGlyZWN0aXZlcyBjcmVhdGVkIGR1cmluZyB0aGUgcHJvY2Vzcy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaW5rZXJcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICovXG5cbmZ1bmN0aW9uIGxpbmtBbmRDYXB0dXJlKGxpbmtlciwgdm0pIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgLy8gcmVzZXQgZGlyZWN0aXZlcyBiZWZvcmUgZXZlcnkgY2FwdHVyZSBpbiBwcm9kdWN0aW9uXG4gICAgLy8gbW9kZSwgc28gdGhhdCB3aGVuIHVubGlua2luZyB3ZSBkb24ndCBuZWVkIHRvIHNwbGljZVxuICAgIC8vIHRoZW0gb3V0ICh3aGljaCB0dXJucyBvdXQgdG8gYmUgYSBwZXJmIGhpdCkuXG4gICAgLy8gdGhleSBhcmUga2VwdCBpbiBkZXZlbG9wbWVudCBtb2RlIGJlY2F1c2UgdGhleSBhcmVcbiAgICAvLyB1c2VmdWwgZm9yIFZ1ZSdzIG93biB0ZXN0cy5cbiAgICB2bS5fZGlyZWN0aXZlcyA9IFtdO1xuICB9XG4gIHZhciBvcmlnaW5hbERpckNvdW50ID0gdm0uX2RpcmVjdGl2ZXMubGVuZ3RoO1xuICBsaW5rZXIoKTtcbiAgdmFyIGRpcnMgPSB2bS5fZGlyZWN0aXZlcy5zbGljZShvcmlnaW5hbERpckNvdW50KTtcbiAgZGlycy5zb3J0KGRpcmVjdGl2ZUNvbXBhcmF0b3IpO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZGlyc1tpXS5fYmluZCgpO1xuICB9XG4gIHJldHVybiBkaXJzO1xufVxuXG4vKipcbiAqIERpcmVjdGl2ZSBwcmlvcml0eSBzb3J0IGNvbXBhcmF0b3JcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYVxuICogQHBhcmFtIHtPYmplY3R9IGJcbiAqL1xuXG5mdW5jdGlvbiBkaXJlY3RpdmVDb21wYXJhdG9yKGEsIGIpIHtcbiAgYSA9IGEuZGVzY3JpcHRvci5kZWYucHJpb3JpdHkgfHwgREVGQVVMVF9QUklPUklUWTtcbiAgYiA9IGIuZGVzY3JpcHRvci5kZWYucHJpb3JpdHkgfHwgREVGQVVMVF9QUklPUklUWTtcbiAgcmV0dXJuIGEgPiBiID8gLTEgOiBhID09PSBiID8gMCA6IDE7XG59XG5cbi8qKlxuICogTGlua2VyIGZ1bmN0aW9ucyByZXR1cm4gYW4gdW5saW5rIGZ1bmN0aW9uIHRoYXRcbiAqIHRlYXJzZG93biBhbGwgZGlyZWN0aXZlcyBpbnN0YW5jZXMgZ2VuZXJhdGVkIGR1cmluZ1xuICogdGhlIHByb2Nlc3MuXG4gKlxuICogV2UgY3JlYXRlIHVubGluayBmdW5jdGlvbnMgd2l0aCBvbmx5IHRoZSBuZWNlc3NhcnlcbiAqIGluZm9ybWF0aW9uIHRvIGF2b2lkIHJldGFpbmluZyBhZGRpdGlvbmFsIGNsb3N1cmVzLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtBcnJheX0gZGlyc1xuICogQHBhcmFtIHtWdWV9IFtjb250ZXh0XVxuICogQHBhcmFtIHtBcnJheX0gW2NvbnRleHREaXJzXVxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gbWFrZVVubGlua0ZuKHZtLCBkaXJzLCBjb250ZXh0LCBjb250ZXh0RGlycykge1xuICBmdW5jdGlvbiB1bmxpbmsoZGVzdHJveWluZykge1xuICAgIHRlYXJkb3duRGlycyh2bSwgZGlycywgZGVzdHJveWluZyk7XG4gICAgaWYgKGNvbnRleHQgJiYgY29udGV4dERpcnMpIHtcbiAgICAgIHRlYXJkb3duRGlycyhjb250ZXh0LCBjb250ZXh0RGlycyk7XG4gICAgfVxuICB9XG4gIC8vIGV4cG9zZSBsaW5rZWQgZGlyZWN0aXZlc1xuICB1bmxpbmsuZGlycyA9IGRpcnM7XG4gIHJldHVybiB1bmxpbms7XG59XG5cbi8qKlxuICogVGVhcmRvd24gcGFydGlhbCBsaW5rZWQgZGlyZWN0aXZlcy5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7QXJyYXl9IGRpcnNcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVzdHJveWluZ1xuICovXG5cbmZ1bmN0aW9uIHRlYXJkb3duRGlycyh2bSwgZGlycywgZGVzdHJveWluZykge1xuICB2YXIgaSA9IGRpcnMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgZGlyc1tpXS5fdGVhcmRvd24oKTtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhZGVzdHJveWluZykge1xuICAgICAgdm0uX2RpcmVjdGl2ZXMuJHJlbW92ZShkaXJzW2ldKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDb21waWxlIGxpbmsgcHJvcHMgb24gYW4gaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlQW5kTGlua1Byb3BzKHZtLCBlbCwgcHJvcHMsIHNjb3BlKSB7XG4gIHZhciBwcm9wc0xpbmtGbiA9IGNvbXBpbGVQcm9wcyhlbCwgcHJvcHMsIHZtKTtcbiAgdmFyIHByb3BEaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuICAgIHByb3BzTGlua0ZuKHZtLCBzY29wZSk7XG4gIH0sIHZtKTtcbiAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgcHJvcERpcnMpO1xufVxuXG4vKipcbiAqIENvbXBpbGUgdGhlIHJvb3QgZWxlbWVudCBvZiBhbiBpbnN0YW5jZS5cbiAqXG4gKiAxLiBhdHRycyBvbiBjb250ZXh0IGNvbnRhaW5lciAoY29udGV4dCBzY29wZSlcbiAqIDIuIGF0dHJzIG9uIHRoZSBjb21wb25lbnQgdGVtcGxhdGUgcm9vdCBub2RlLCBpZlxuICogICAgcmVwbGFjZTp0cnVlIChjaGlsZCBzY29wZSlcbiAqXG4gKiBJZiB0aGlzIGlzIGEgZnJhZ21lbnQgaW5zdGFuY2UsIHdlIG9ubHkgbmVlZCB0byBjb21waWxlIDEuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0T3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZVJvb3QoZWwsIG9wdGlvbnMsIGNvbnRleHRPcHRpb25zKSB7XG4gIHZhciBjb250YWluZXJBdHRycyA9IG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzO1xuICB2YXIgcmVwbGFjZXJBdHRycyA9IG9wdGlvbnMuX3JlcGxhY2VyQXR0cnM7XG4gIHZhciBjb250ZXh0TGlua0ZuLCByZXBsYWNlckxpbmtGbjtcblxuICAvLyBvbmx5IG5lZWQgdG8gY29tcGlsZSBvdGhlciBhdHRyaWJ1dGVzIGZvclxuICAvLyBub24tZnJhZ21lbnQgaW5zdGFuY2VzXG4gIGlmIChlbC5ub2RlVHlwZSAhPT0gMTEpIHtcbiAgICAvLyBmb3IgY29tcG9uZW50cywgY29udGFpbmVyIGFuZCByZXBsYWNlciBuZWVkIHRvIGJlXG4gICAgLy8gY29tcGlsZWQgc2VwYXJhdGVseSBhbmQgbGlua2VkIGluIGRpZmZlcmVudCBzY29wZXMuXG4gICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50KSB7XG4gICAgICAvLyAyLiBjb250YWluZXIgYXR0cmlidXRlc1xuICAgICAgaWYgKGNvbnRhaW5lckF0dHJzICYmIGNvbnRleHRPcHRpb25zKSB7XG4gICAgICAgIGNvbnRleHRMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhjb250YWluZXJBdHRycywgY29udGV4dE9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgaWYgKHJlcGxhY2VyQXR0cnMpIHtcbiAgICAgICAgLy8gMy4gcmVwbGFjZXIgYXR0cmlidXRlc1xuICAgICAgICByZXBsYWNlckxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKHJlcGxhY2VyQXR0cnMsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBub24tY29tcG9uZW50LCBqdXN0IGNvbXBpbGUgYXMgYSBub3JtYWwgZWxlbWVudC5cbiAgICAgIHJlcGxhY2VyTGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoZWwuYXR0cmlidXRlcywgb3B0aW9ucyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29udGFpbmVyQXR0cnMpIHtcbiAgICAvLyB3YXJuIGNvbnRhaW5lciBkaXJlY3RpdmVzIGZvciBmcmFnbWVudCBpbnN0YW5jZXNcbiAgICB2YXIgbmFtZXMgPSBjb250YWluZXJBdHRycy5maWx0ZXIoZnVuY3Rpb24gKGF0dHIpIHtcbiAgICAgIC8vIGFsbG93IHZ1ZS1sb2FkZXIvdnVlaWZ5IHNjb3BlZCBjc3MgYXR0cmlidXRlc1xuICAgICAgcmV0dXJuIGF0dHIubmFtZS5pbmRleE9mKCdfdi0nKSA8IDAgJiZcbiAgICAgIC8vIGFsbG93IGV2ZW50IGxpc3RlbmVyc1xuICAgICAgIW9uUkUudGVzdChhdHRyLm5hbWUpICYmXG4gICAgICAvLyBhbGxvdyBzbG90c1xuICAgICAgYXR0ci5uYW1lICE9PSAnc2xvdCc7XG4gICAgfSkubWFwKGZ1bmN0aW9uIChhdHRyKSB7XG4gICAgICByZXR1cm4gJ1wiJyArIGF0dHIubmFtZSArICdcIic7XG4gICAgfSk7XG4gICAgaWYgKG5hbWVzLmxlbmd0aCkge1xuICAgICAgdmFyIHBsdXJhbCA9IG5hbWVzLmxlbmd0aCA+IDE7XG4gICAgICB3YXJuKCdBdHRyaWJ1dGUnICsgKHBsdXJhbCA/ICdzICcgOiAnICcpICsgbmFtZXMuam9pbignLCAnKSArIChwbHVyYWwgPyAnIGFyZScgOiAnIGlzJykgKyAnIGlnbm9yZWQgb24gY29tcG9uZW50ICcgKyAnPCcgKyBvcHRpb25zLmVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICc+IGJlY2F1c2UgJyArICd0aGUgY29tcG9uZW50IGlzIGEgZnJhZ21lbnQgaW5zdGFuY2U6ICcgKyAnaHR0cDovL3Z1ZWpzLm9yZy9ndWlkZS9jb21wb25lbnRzLmh0bWwjRnJhZ21lbnQtSW5zdGFuY2UnKTtcbiAgICB9XG4gIH1cblxuICBvcHRpb25zLl9jb250YWluZXJBdHRycyA9IG9wdGlvbnMuX3JlcGxhY2VyQXR0cnMgPSBudWxsO1xuICByZXR1cm4gZnVuY3Rpb24gcm9vdExpbmtGbih2bSwgZWwsIHNjb3BlKSB7XG4gICAgLy8gbGluayBjb250ZXh0IHNjb3BlIGRpcnNcbiAgICB2YXIgY29udGV4dCA9IHZtLl9jb250ZXh0O1xuICAgIHZhciBjb250ZXh0RGlycztcbiAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0TGlua0ZuKSB7XG4gICAgICBjb250ZXh0RGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29udGV4dExpbmtGbihjb250ZXh0LCBlbCwgbnVsbCwgc2NvcGUpO1xuICAgICAgfSwgY29udGV4dCk7XG4gICAgfVxuXG4gICAgLy8gbGluayBzZWxmXG4gICAgdmFyIHNlbGZEaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHJlcGxhY2VyTGlua0ZuKSByZXBsYWNlckxpbmtGbih2bSwgZWwpO1xuICAgIH0sIHZtKTtcblxuICAgIC8vIHJldHVybiB0aGUgdW5saW5rIGZ1bmN0aW9uIHRoYXQgdGVhcnNkb3duIGNvbnRleHRcbiAgICAvLyBjb250YWluZXIgZGlyZWN0aXZlcy5cbiAgICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBzZWxmRGlycywgY29udGV4dCwgY29udGV4dERpcnMpO1xuICB9O1xufVxuXG4vKipcbiAqIENvbXBpbGUgYSBub2RlIGFuZCByZXR1cm4gYSBub2RlTGlua0ZuIGJhc2VkIG9uIHRoZVxuICogbm9kZSB0eXBlLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZU5vZGUobm9kZSwgb3B0aW9ucykge1xuICB2YXIgdHlwZSA9IG5vZGUubm9kZVR5cGU7XG4gIGlmICh0eXBlID09PSAxICYmICFpc1NjcmlwdChub2RlKSkge1xuICAgIHJldHVybiBjb21waWxlRWxlbWVudChub2RlLCBvcHRpb25zKTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSAzICYmIG5vZGUuZGF0YS50cmltKCkpIHtcbiAgICByZXR1cm4gY29tcGlsZVRleHROb2RlKG5vZGUsIG9wdGlvbnMpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogQ29tcGlsZSBhbiBlbGVtZW50IGFuZCByZXR1cm4gYSBub2RlTGlua0ZuLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVFbGVtZW50KGVsLCBvcHRpb25zKSB7XG4gIC8vIHByZXByb2Nlc3MgdGV4dGFyZWFzLlxuICAvLyB0ZXh0YXJlYSB0cmVhdHMgaXRzIHRleHQgY29udGVudCBhcyB0aGUgaW5pdGlhbCB2YWx1ZS5cbiAgLy8ganVzdCBiaW5kIGl0IGFzIGFuIGF0dHIgZGlyZWN0aXZlIGZvciB2YWx1ZS5cbiAgaWYgKGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcbiAgICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KGVsLnZhbHVlKTtcbiAgICBpZiAodG9rZW5zKSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJzp2YWx1ZScsIHRva2Vuc1RvRXhwKHRva2VucykpO1xuICAgICAgZWwudmFsdWUgPSAnJztcbiAgICB9XG4gIH1cbiAgdmFyIGxpbmtGbjtcbiAgdmFyIGhhc0F0dHJzID0gZWwuaGFzQXR0cmlidXRlcygpO1xuICB2YXIgYXR0cnMgPSBoYXNBdHRycyAmJiB0b0FycmF5KGVsLmF0dHJpYnV0ZXMpO1xuICAvLyBjaGVjayB0ZXJtaW5hbCBkaXJlY3RpdmVzIChmb3IgJiBpZilcbiAgaWYgKGhhc0F0dHJzKSB7XG4gICAgbGlua0ZuID0gY2hlY2tUZXJtaW5hbERpcmVjdGl2ZXMoZWwsIGF0dHJzLCBvcHRpb25zKTtcbiAgfVxuICAvLyBjaGVjayBlbGVtZW50IGRpcmVjdGl2ZXNcbiAgaWYgKCFsaW5rRm4pIHtcbiAgICBsaW5rRm4gPSBjaGVja0VsZW1lbnREaXJlY3RpdmVzKGVsLCBvcHRpb25zKTtcbiAgfVxuICAvLyBjaGVjayBjb21wb25lbnRcbiAgaWYgKCFsaW5rRm4pIHtcbiAgICBsaW5rRm4gPSBjaGVja0NvbXBvbmVudChlbCwgb3B0aW9ucyk7XG4gIH1cbiAgLy8gbm9ybWFsIGRpcmVjdGl2ZXNcbiAgaWYgKCFsaW5rRm4gJiYgaGFzQXR0cnMpIHtcbiAgICBsaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhhdHRycywgb3B0aW9ucyk7XG4gIH1cbiAgcmV0dXJuIGxpbmtGbjtcbn1cblxuLyoqXG4gKiBDb21waWxlIGEgdGV4dE5vZGUgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4uXG4gKlxuICogQHBhcmFtIHtUZXh0Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9IHRleHROb2RlTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZVRleHROb2RlKG5vZGUsIG9wdGlvbnMpIHtcbiAgLy8gc2tpcCBtYXJrZWQgdGV4dCBub2Rlc1xuICBpZiAobm9kZS5fc2tpcCkge1xuICAgIHJldHVybiByZW1vdmVUZXh0O1xuICB9XG5cbiAgdmFyIHRva2VucyA9IHBhcnNlVGV4dChub2RlLndob2xlVGV4dCk7XG4gIGlmICghdG9rZW5zKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBtYXJrIGFkamFjZW50IHRleHQgbm9kZXMgYXMgc2tpcHBlZCxcbiAgLy8gYmVjYXVzZSB3ZSBhcmUgdXNpbmcgbm9kZS53aG9sZVRleHQgdG8gY29tcGlsZVxuICAvLyBhbGwgYWRqYWNlbnQgdGV4dCBub2RlcyB0b2dldGhlci4gVGhpcyBmaXhlc1xuICAvLyBpc3N1ZXMgaW4gSUUgd2hlcmUgc29tZXRpbWVzIGl0IHNwbGl0cyB1cCBhIHNpbmdsZVxuICAvLyB0ZXh0IG5vZGUgaW50byBtdWx0aXBsZSBvbmVzLlxuICB2YXIgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG4gIHdoaWxlIChuZXh0ICYmIG5leHQubm9kZVR5cGUgPT09IDMpIHtcbiAgICBuZXh0Ll9za2lwID0gdHJ1ZTtcbiAgICBuZXh0ID0gbmV4dC5uZXh0U2libGluZztcbiAgfVxuXG4gIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICB2YXIgZWwsIHRva2VuO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHRva2Vucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB0b2tlbiA9IHRva2Vuc1tpXTtcbiAgICBlbCA9IHRva2VuLnRhZyA/IHByb2Nlc3NUZXh0VG9rZW4odG9rZW4sIG9wdGlvbnMpIDogZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodG9rZW4udmFsdWUpO1xuICAgIGZyYWcuYXBwZW5kQ2hpbGQoZWwpO1xuICB9XG4gIHJldHVybiBtYWtlVGV4dE5vZGVMaW5rRm4odG9rZW5zLCBmcmFnLCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBMaW5rZXIgZm9yIGFuIHNraXBwZWQgdGV4dCBub2RlLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtUZXh0fSBub2RlXG4gKi9cblxuZnVuY3Rpb24gcmVtb3ZlVGV4dCh2bSwgbm9kZSkge1xuICByZW1vdmUobm9kZSk7XG59XG5cbi8qKlxuICogUHJvY2VzcyBhIHNpbmdsZSB0ZXh0IHRva2VuLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0b2tlblxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge05vZGV9XG4gKi9cblxuZnVuY3Rpb24gcHJvY2Vzc1RleHRUb2tlbih0b2tlbiwgb3B0aW9ucykge1xuICB2YXIgZWw7XG4gIGlmICh0b2tlbi5vbmVUaW1lKSB7XG4gICAgZWwgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0b2tlbi52YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHRva2VuLmh0bWwpIHtcbiAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgndi1odG1sJyk7XG4gICAgICBzZXRUb2tlblR5cGUoJ2h0bWwnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSUUgd2lsbCBjbGVhbiB1cCBlbXB0eSB0ZXh0Tm9kZXMgZHVyaW5nXG4gICAgICAvLyBmcmFnLmNsb25lTm9kZSh0cnVlKSwgc28gd2UgaGF2ZSB0byBnaXZlIGl0XG4gICAgICAvLyBzb21ldGhpbmcgaGVyZS4uLlxuICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnICcpO1xuICAgICAgc2V0VG9rZW5UeXBlKCd0ZXh0Jyk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIHNldFRva2VuVHlwZSh0eXBlKSB7XG4gICAgaWYgKHRva2VuLmRlc2NyaXB0b3IpIHJldHVybjtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodG9rZW4udmFsdWUpO1xuICAgIHRva2VuLmRlc2NyaXB0b3IgPSB7XG4gICAgICBuYW1lOiB0eXBlLFxuICAgICAgZGVmOiBkaXJlY3RpdmVzW3R5cGVdLFxuICAgICAgZXhwcmVzc2lvbjogcGFyc2VkLmV4cHJlc3Npb24sXG4gICAgICBmaWx0ZXJzOiBwYXJzZWQuZmlsdGVyc1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIGVsO1xufVxuXG4vKipcbiAqIEJ1aWxkIGEgZnVuY3Rpb24gdGhhdCBwcm9jZXNzZXMgYSB0ZXh0Tm9kZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IHRva2Vuc1xuICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG4gKi9cblxuZnVuY3Rpb24gbWFrZVRleHROb2RlTGlua0ZuKHRva2VucywgZnJhZykge1xuICByZXR1cm4gZnVuY3Rpb24gdGV4dE5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSkge1xuICAgIHZhciBmcmFnQ2xvbmUgPSBmcmFnLmNsb25lTm9kZSh0cnVlKTtcbiAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkoZnJhZ0Nsb25lLmNoaWxkTm9kZXMpO1xuICAgIHZhciB0b2tlbiwgdmFsdWUsIG5vZGU7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0b2tlbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB0b2tlbiA9IHRva2Vuc1tpXTtcbiAgICAgIHZhbHVlID0gdG9rZW4udmFsdWU7XG4gICAgICBpZiAodG9rZW4udGFnKSB7XG4gICAgICAgIG5vZGUgPSBjaGlsZE5vZGVzW2ldO1xuICAgICAgICBpZiAodG9rZW4ub25lVGltZSkge1xuICAgICAgICAgIHZhbHVlID0gKHNjb3BlIHx8IHZtKS4kZXZhbCh2YWx1ZSk7XG4gICAgICAgICAgaWYgKHRva2VuLmh0bWwpIHtcbiAgICAgICAgICAgIHJlcGxhY2Uobm9kZSwgcGFyc2VUZW1wbGF0ZSh2YWx1ZSwgdHJ1ZSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBub2RlLmRhdGEgPSBfdG9TdHJpbmcodmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2bS5fYmluZERpcih0b2tlbi5kZXNjcmlwdG9yLCBub2RlLCBob3N0LCBzY29wZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmVwbGFjZShlbCwgZnJhZ0Nsb25lKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDb21waWxlIGEgbm9kZSBsaXN0IGFuZCByZXR1cm4gYSBjaGlsZExpbmtGbi5cbiAqXG4gKiBAcGFyYW0ge05vZGVMaXN0fSBub2RlTGlzdFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlTm9kZUxpc3Qobm9kZUxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGxpbmtGbnMgPSBbXTtcbiAgdmFyIG5vZGVMaW5rRm4sIGNoaWxkTGlua0ZuLCBub2RlO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVMaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIG5vZGUgPSBub2RlTGlzdFtpXTtcbiAgICBub2RlTGlua0ZuID0gY29tcGlsZU5vZGUobm9kZSwgb3B0aW9ucyk7XG4gICAgY2hpbGRMaW5rRm4gPSAhKG5vZGVMaW5rRm4gJiYgbm9kZUxpbmtGbi50ZXJtaW5hbCkgJiYgbm9kZS50YWdOYW1lICE9PSAnU0NSSVBUJyAmJiBub2RlLmhhc0NoaWxkTm9kZXMoKSA/IGNvbXBpbGVOb2RlTGlzdChub2RlLmNoaWxkTm9kZXMsIG9wdGlvbnMpIDogbnVsbDtcbiAgICBsaW5rRm5zLnB1c2gobm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4pO1xuICB9XG4gIHJldHVybiBsaW5rRm5zLmxlbmd0aCA/IG1ha2VDaGlsZExpbmtGbihsaW5rRm5zKSA6IG51bGw7XG59XG5cbi8qKlxuICogTWFrZSBhIGNoaWxkIGxpbmsgZnVuY3Rpb24gZm9yIGEgbm9kZSdzIGNoaWxkTm9kZXMuXG4gKlxuICogQHBhcmFtIHtBcnJheTxGdW5jdGlvbj59IGxpbmtGbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBjaGlsZExpbmtGblxuICovXG5cbmZ1bmN0aW9uIG1ha2VDaGlsZExpbmtGbihsaW5rRm5zKSB7XG4gIHJldHVybiBmdW5jdGlvbiBjaGlsZExpbmtGbih2bSwgbm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgdmFyIG5vZGUsIG5vZGVMaW5rRm4sIGNoaWxkcmVuTGlua0ZuO1xuICAgIGZvciAodmFyIGkgPSAwLCBuID0gMCwgbCA9IGxpbmtGbnMubGVuZ3RoOyBpIDwgbDsgbisrKSB7XG4gICAgICBub2RlID0gbm9kZXNbbl07XG4gICAgICBub2RlTGlua0ZuID0gbGlua0Zuc1tpKytdO1xuICAgICAgY2hpbGRyZW5MaW5rRm4gPSBsaW5rRm5zW2krK107XG4gICAgICAvLyBjYWNoZSBjaGlsZE5vZGVzIGJlZm9yZSBsaW5raW5nIHBhcmVudCwgZml4ICM2NTdcbiAgICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShub2RlLmNoaWxkTm9kZXMpO1xuICAgICAgaWYgKG5vZGVMaW5rRm4pIHtcbiAgICAgICAgbm9kZUxpbmtGbih2bSwgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgICAgfVxuICAgICAgaWYgKGNoaWxkcmVuTGlua0ZuKSB7XG4gICAgICAgIGNoaWxkcmVuTGlua0ZuKHZtLCBjaGlsZE5vZGVzLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIENoZWNrIGZvciBlbGVtZW50IGRpcmVjdGl2ZXMgKGN1c3RvbSBlbGVtZW50cyB0aGF0IHNob3VsZFxuICogYmUgcmVzb3ZsZWQgYXMgdGVybWluYWwgZGlyZWN0aXZlcykuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuXG5mdW5jdGlvbiBjaGVja0VsZW1lbnREaXJlY3RpdmVzKGVsLCBvcHRpb25zKSB7XG4gIHZhciB0YWcgPSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIGlmIChjb21tb25UYWdSRS50ZXN0KHRhZykpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZWxlbWVudERpcmVjdGl2ZXMnLCB0YWcpO1xuICBpZiAoZGVmKSB7XG4gICAgcmV0dXJuIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIHRhZywgJycsIG9wdGlvbnMsIGRlZik7XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgY29tcG9uZW50LiBJZiB5ZXMsIHJldHVyblxuICogYSBjb21wb25lbnQgbGluayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIGNoZWNrQ29tcG9uZW50KGVsLCBvcHRpb25zKSB7XG4gIHZhciBjb21wb25lbnQgPSBjaGVja0NvbXBvbmVudEF0dHIoZWwsIG9wdGlvbnMpO1xuICBpZiAoY29tcG9uZW50KSB7XG4gICAgdmFyIHJlZiA9IGZpbmRSZWYoZWwpO1xuICAgIHZhciBkZXNjcmlwdG9yID0ge1xuICAgICAgbmFtZTogJ2NvbXBvbmVudCcsXG4gICAgICByZWY6IHJlZixcbiAgICAgIGV4cHJlc3Npb246IGNvbXBvbmVudC5pZCxcbiAgICAgIGRlZjogaW50ZXJuYWxEaXJlY3RpdmVzLmNvbXBvbmVudCxcbiAgICAgIG1vZGlmaWVyczoge1xuICAgICAgICBsaXRlcmFsOiAhY29tcG9uZW50LmR5bmFtaWNcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBjb21wb25lbnRMaW5rRm4gPSBmdW5jdGlvbiBjb21wb25lbnRMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgICAgaWYgKHJlZikge1xuICAgICAgICBkZWZpbmVSZWFjdGl2ZSgoc2NvcGUgfHwgdm0pLiRyZWZzLCByZWYsIG51bGwpO1xuICAgICAgfVxuICAgICAgdm0uX2JpbmREaXIoZGVzY3JpcHRvciwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICB9O1xuICAgIGNvbXBvbmVudExpbmtGbi50ZXJtaW5hbCA9IHRydWU7XG4gICAgcmV0dXJuIGNvbXBvbmVudExpbmtGbjtcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGFuIGVsZW1lbnQgZm9yIHRlcm1pbmFsIGRpcmVjdGl2ZXMgaW4gZml4ZWQgb3JkZXIuXG4gKiBJZiBpdCBmaW5kcyBvbmUsIHJldHVybiBhIHRlcm1pbmFsIGxpbmsgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtBcnJheX0gYXR0cnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGVybWluYWxMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyhlbCwgYXR0cnMsIG9wdGlvbnMpIHtcbiAgLy8gc2tpcCB2LXByZVxuICBpZiAoZ2V0QXR0cihlbCwgJ3YtcHJlJykgIT09IG51bGwpIHtcbiAgICByZXR1cm4gc2tpcDtcbiAgfVxuICAvLyBza2lwIHYtZWxzZSBibG9jaywgYnV0IG9ubHkgaWYgZm9sbG93aW5nIHYtaWZcbiAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgndi1lbHNlJykpIHtcbiAgICB2YXIgcHJldiA9IGVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgaWYgKHByZXYgJiYgcHJldi5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuICAgICAgcmV0dXJuIHNraXA7XG4gICAgfVxuICB9XG5cbiAgdmFyIGF0dHIsIG5hbWUsIHZhbHVlLCBtb2RpZmllcnMsIG1hdGNoZWQsIGRpck5hbWUsIHJhd05hbWUsIGFyZywgZGVmLCB0ZXJtRGVmO1xuICBmb3IgKHZhciBpID0gMCwgaiA9IGF0dHJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgIGF0dHIgPSBhdHRyc1tpXTtcbiAgICBuYW1lID0gYXR0ci5uYW1lLnJlcGxhY2UobW9kaWZpZXJSRSwgJycpO1xuICAgIGlmIChtYXRjaGVkID0gbmFtZS5tYXRjaChkaXJBdHRyUkUpKSB7XG4gICAgICBkZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBtYXRjaGVkWzFdKTtcbiAgICAgIGlmIChkZWYgJiYgZGVmLnRlcm1pbmFsKSB7XG4gICAgICAgIGlmICghdGVybURlZiB8fCAoZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfVEVSTUlOQUxfUFJJT1JJVFkpID4gdGVybURlZi5wcmlvcml0eSkge1xuICAgICAgICAgIHRlcm1EZWYgPSBkZWY7XG4gICAgICAgICAgcmF3TmFtZSA9IGF0dHIubmFtZTtcbiAgICAgICAgICBtb2RpZmllcnMgPSBwYXJzZU1vZGlmaWVycyhhdHRyLm5hbWUpO1xuICAgICAgICAgIHZhbHVlID0gYXR0ci52YWx1ZTtcbiAgICAgICAgICBkaXJOYW1lID0gbWF0Y2hlZFsxXTtcbiAgICAgICAgICBhcmcgPSBtYXRjaGVkWzJdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKHRlcm1EZWYpIHtcbiAgICByZXR1cm4gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgZGlyTmFtZSwgdmFsdWUsIG9wdGlvbnMsIHRlcm1EZWYsIHJhd05hbWUsIGFyZywgbW9kaWZpZXJzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBza2lwKCkge31cbnNraXAudGVybWluYWwgPSB0cnVlO1xuXG4vKipcbiAqIEJ1aWxkIGEgbm9kZSBsaW5rIGZ1bmN0aW9uIGZvciBhIHRlcm1pbmFsIGRpcmVjdGl2ZS5cbiAqIEEgdGVybWluYWwgbGluayBmdW5jdGlvbiB0ZXJtaW5hdGVzIHRoZSBjdXJyZW50XG4gKiBjb21waWxhdGlvbiByZWN1cnNpb24gYW5kIGhhbmRsZXMgY29tcGlsYXRpb24gb2YgdGhlXG4gKiBzdWJ0cmVlIGluIHRoZSBkaXJlY3RpdmUuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGRpck5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZcbiAqIEBwYXJhbSB7U3RyaW5nfSBbcmF3TmFtZV1cbiAqIEBwYXJhbSB7U3RyaW5nfSBbYXJnXVxuICogQHBhcmFtIHtPYmplY3R9IFttb2RpZmllcnNdXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGVybWluYWxMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCBkaXJOYW1lLCB2YWx1ZSwgb3B0aW9ucywgZGVmLCByYXdOYW1lLCBhcmcsIG1vZGlmaWVycykge1xuICB2YXIgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuICB2YXIgZGVzY3JpcHRvciA9IHtcbiAgICBuYW1lOiBkaXJOYW1lLFxuICAgIGFyZzogYXJnLFxuICAgIGV4cHJlc3Npb246IHBhcnNlZC5leHByZXNzaW9uLFxuICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzLFxuICAgIHJhdzogdmFsdWUsXG4gICAgYXR0cjogcmF3TmFtZSxcbiAgICBtb2RpZmllcnM6IG1vZGlmaWVycyxcbiAgICBkZWY6IGRlZlxuICB9O1xuICAvLyBjaGVjayByZWYgZm9yIHYtZm9yIGFuZCByb3V0ZXItdmlld1xuICBpZiAoZGlyTmFtZSA9PT0gJ2ZvcicgfHwgZGlyTmFtZSA9PT0gJ3JvdXRlci12aWV3Jykge1xuICAgIGRlc2NyaXB0b3IucmVmID0gZmluZFJlZihlbCk7XG4gIH1cbiAgdmFyIGZuID0gZnVuY3Rpb24gdGVybWluYWxOb2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICBpZiAoZGVzY3JpcHRvci5yZWYpIHtcbiAgICAgIGRlZmluZVJlYWN0aXZlKChzY29wZSB8fCB2bSkuJHJlZnMsIGRlc2NyaXB0b3IucmVmLCBudWxsKTtcbiAgICB9XG4gICAgdm0uX2JpbmREaXIoZGVzY3JpcHRvciwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgfTtcbiAgZm4udGVybWluYWwgPSB0cnVlO1xuICByZXR1cm4gZm47XG59XG5cbi8qKlxuICogQ29tcGlsZSB0aGUgZGlyZWN0aXZlcyBvbiBhbiBlbGVtZW50IGFuZCByZXR1cm4gYSBsaW5rZXIuXG4gKlxuICogQHBhcmFtIHtBcnJheXxOYW1lZE5vZGVNYXB9IGF0dHJzXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZURpcmVjdGl2ZXMoYXR0cnMsIG9wdGlvbnMpIHtcbiAgdmFyIGkgPSBhdHRycy5sZW5ndGg7XG4gIHZhciBkaXJzID0gW107XG4gIHZhciBhdHRyLCBuYW1lLCB2YWx1ZSwgcmF3TmFtZSwgcmF3VmFsdWUsIGRpck5hbWUsIGFyZywgbW9kaWZpZXJzLCBkaXJEZWYsIHRva2VucywgbWF0Y2hlZDtcbiAgd2hpbGUgKGktLSkge1xuICAgIGF0dHIgPSBhdHRyc1tpXTtcbiAgICBuYW1lID0gcmF3TmFtZSA9IGF0dHIubmFtZTtcbiAgICB2YWx1ZSA9IHJhd1ZhbHVlID0gYXR0ci52YWx1ZTtcbiAgICB0b2tlbnMgPSBwYXJzZVRleHQodmFsdWUpO1xuICAgIC8vIHJlc2V0IGFyZ1xuICAgIGFyZyA9IG51bGw7XG4gICAgLy8gY2hlY2sgbW9kaWZpZXJzXG4gICAgbW9kaWZpZXJzID0gcGFyc2VNb2RpZmllcnMobmFtZSk7XG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZShtb2RpZmllclJFLCAnJyk7XG5cbiAgICAvLyBhdHRyaWJ1dGUgaW50ZXJwb2xhdGlvbnNcbiAgICBpZiAodG9rZW5zKSB7XG4gICAgICB2YWx1ZSA9IHRva2Vuc1RvRXhwKHRva2Vucyk7XG4gICAgICBhcmcgPSBuYW1lO1xuICAgICAgcHVzaERpcignYmluZCcsIGRpcmVjdGl2ZXMuYmluZCwgdG9rZW5zKTtcbiAgICAgIC8vIHdhcm4gYWdhaW5zdCBtaXhpbmcgbXVzdGFjaGVzIHdpdGggdi1iaW5kXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAobmFtZSA9PT0gJ2NsYXNzJyAmJiBBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGF0dHJzLCBmdW5jdGlvbiAoYXR0cikge1xuICAgICAgICAgIHJldHVybiBhdHRyLm5hbWUgPT09ICc6Y2xhc3MnIHx8IGF0dHIubmFtZSA9PT0gJ3YtYmluZDpjbGFzcyc7XG4gICAgICAgIH0pKSB7XG4gICAgICAgICAgd2FybignY2xhc3M9XCInICsgcmF3VmFsdWUgKyAnXCI6IERvIG5vdCBtaXggbXVzdGFjaGUgaW50ZXJwb2xhdGlvbiAnICsgJ2FuZCB2LWJpbmQgZm9yIFwiY2xhc3NcIiBvbiB0aGUgc2FtZSBlbGVtZW50LiBVc2Ugb25lIG9yIHRoZSBvdGhlci4nLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZVxuXG4gICAgICAvLyBzcGVjaWFsIGF0dHJpYnV0ZTogdHJhbnNpdGlvblxuICAgICAgaWYgKHRyYW5zaXRpb25SRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIG1vZGlmaWVycy5saXRlcmFsID0gIWJpbmRSRS50ZXN0KG5hbWUpO1xuICAgICAgICBwdXNoRGlyKCd0cmFuc2l0aW9uJywgaW50ZXJuYWxEaXJlY3RpdmVzLnRyYW5zaXRpb24pO1xuICAgICAgfSBlbHNlXG5cbiAgICAgICAgLy8gZXZlbnQgaGFuZGxlcnNcbiAgICAgICAgaWYgKG9uUkUudGVzdChuYW1lKSkge1xuICAgICAgICAgIGFyZyA9IG5hbWUucmVwbGFjZShvblJFLCAnJyk7XG4gICAgICAgICAgcHVzaERpcignb24nLCBkaXJlY3RpdmVzLm9uKTtcbiAgICAgICAgfSBlbHNlXG5cbiAgICAgICAgICAvLyBhdHRyaWJ1dGUgYmluZGluZ3NcbiAgICAgICAgICBpZiAoYmluZFJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgICAgIGRpck5hbWUgPSBuYW1lLnJlcGxhY2UoYmluZFJFLCAnJyk7XG4gICAgICAgICAgICBpZiAoZGlyTmFtZSA9PT0gJ3N0eWxlJyB8fCBkaXJOYW1lID09PSAnY2xhc3MnKSB7XG4gICAgICAgICAgICAgIHB1c2hEaXIoZGlyTmFtZSwgaW50ZXJuYWxEaXJlY3RpdmVzW2Rpck5hbWVdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFyZyA9IGRpck5hbWU7XG4gICAgICAgICAgICAgIHB1c2hEaXIoJ2JpbmQnLCBkaXJlY3RpdmVzLmJpbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZVxuXG4gICAgICAgICAgICAvLyBub3JtYWwgZGlyZWN0aXZlc1xuICAgICAgICAgICAgaWYgKG1hdGNoZWQgPSBuYW1lLm1hdGNoKGRpckF0dHJSRSkpIHtcbiAgICAgICAgICAgICAgZGlyTmFtZSA9IG1hdGNoZWRbMV07XG4gICAgICAgICAgICAgIGFyZyA9IG1hdGNoZWRbMl07XG5cbiAgICAgICAgICAgICAgLy8gc2tpcCB2LWVsc2UgKHdoZW4gdXNlZCB3aXRoIHYtc2hvdylcbiAgICAgICAgICAgICAgaWYgKGRpck5hbWUgPT09ICdlbHNlJykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgZGlyRGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdkaXJlY3RpdmVzJywgZGlyTmFtZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgIGlmIChkaXJEZWYpIHtcbiAgICAgICAgICAgICAgICBwdXNoRGlyKGRpck5hbWUsIGRpckRlZik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQdXNoIGEgZGlyZWN0aXZlLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZGlyTmFtZVxuICAgKiBAcGFyYW0ge09iamVjdHxGdW5jdGlvbn0gZGVmXG4gICAqIEBwYXJhbSB7QXJyYXl9IFtpbnRlcnBUb2tlbnNdXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHB1c2hEaXIoZGlyTmFtZSwgZGVmLCBpbnRlcnBUb2tlbnMpIHtcbiAgICB2YXIgaGFzT25lVGltZVRva2VuID0gaW50ZXJwVG9rZW5zICYmIGhhc09uZVRpbWUoaW50ZXJwVG9rZW5zKTtcbiAgICB2YXIgcGFyc2VkID0gIWhhc09uZVRpbWVUb2tlbiAmJiBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG4gICAgZGlycy5wdXNoKHtcbiAgICAgIG5hbWU6IGRpck5hbWUsXG4gICAgICBhdHRyOiByYXdOYW1lLFxuICAgICAgcmF3OiByYXdWYWx1ZSxcbiAgICAgIGRlZjogZGVmLFxuICAgICAgYXJnOiBhcmcsXG4gICAgICBtb2RpZmllcnM6IG1vZGlmaWVycyxcbiAgICAgIC8vIGNvbnZlcnNpb24gZnJvbSBpbnRlcnBvbGF0aW9uIHN0cmluZ3Mgd2l0aCBvbmUtdGltZSB0b2tlblxuICAgICAgLy8gdG8gZXhwcmVzc2lvbiBpcyBkaWZmZXJlZCB1bnRpbCBkaXJlY3RpdmUgYmluZCB0aW1lIHNvIHRoYXQgd2VcbiAgICAgIC8vIGhhdmUgYWNjZXNzIHRvIHRoZSBhY3R1YWwgdm0gY29udGV4dCBmb3Igb25lLXRpbWUgYmluZGluZ3MuXG4gICAgICBleHByZXNzaW9uOiBwYXJzZWQgJiYgcGFyc2VkLmV4cHJlc3Npb24sXG4gICAgICBmaWx0ZXJzOiBwYXJzZWQgJiYgcGFyc2VkLmZpbHRlcnMsXG4gICAgICBpbnRlcnA6IGludGVycFRva2VucyxcbiAgICAgIGhhc09uZVRpbWU6IGhhc09uZVRpbWVUb2tlblxuICAgIH0pO1xuICB9XG5cbiAgaWYgKGRpcnMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIG1ha2VOb2RlTGlua0ZuKGRpcnMpO1xuICB9XG59XG5cbi8qKlxuICogUGFyc2UgbW9kaWZpZXJzIGZyb20gZGlyZWN0aXZlIGF0dHJpYnV0ZSBuYW1lLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VNb2RpZmllcnMobmFtZSkge1xuICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdmFyIG1hdGNoID0gbmFtZS5tYXRjaChtb2RpZmllclJFKTtcbiAgaWYgKG1hdGNoKSB7XG4gICAgdmFyIGkgPSBtYXRjaC5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgcmVzW21hdGNoW2ldLnNsaWNlKDEpXSA9IHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogQnVpbGQgYSBsaW5rIGZ1bmN0aW9uIGZvciBhbGwgZGlyZWN0aXZlcyBvbiBhIHNpbmdsZSBub2RlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGRpcmVjdGl2ZXNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBkaXJlY3RpdmVzTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gbWFrZU5vZGVMaW5rRm4oZGlyZWN0aXZlcykge1xuICByZXR1cm4gZnVuY3Rpb24gbm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgLy8gcmV2ZXJzZSBhcHBseSBiZWNhdXNlIGl0J3Mgc29ydGVkIGxvdyB0byBoaWdoXG4gICAgdmFyIGkgPSBkaXJlY3RpdmVzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2bS5fYmluZERpcihkaXJlY3RpdmVzW2ldLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBpbnRlcnBvbGF0aW9uIHN0cmluZyBjb250YWlucyBvbmUtdGltZSB0b2tlbnMuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gdG9rZW5zXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGhhc09uZVRpbWUodG9rZW5zKSB7XG4gIHZhciBpID0gdG9rZW5zLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIGlmICh0b2tlbnNbaV0ub25lVGltZSkgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNTY3JpcHQoZWwpIHtcbiAgcmV0dXJuIGVsLnRhZ05hbWUgPT09ICdTQ1JJUFQnICYmICghZWwuaGFzQXR0cmlidXRlKCd0eXBlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCd0eXBlJykgPT09ICd0ZXh0L2phdmFzY3JpcHQnKTtcbn1cblxudmFyIHNwZWNpYWxDaGFyUkUgPSAvW15cXHdcXC06XFwuXS87XG5cbi8qKlxuICogUHJvY2VzcyBhbiBlbGVtZW50IG9yIGEgRG9jdW1lbnRGcmFnbWVudCBiYXNlZCBvbiBhXG4gKiBpbnN0YW5jZSBvcHRpb24gb2JqZWN0LiBUaGlzIGFsbG93cyB1cyB0byB0cmFuc2NsdWRlXG4gKiBhIHRlbXBsYXRlIG5vZGUvZnJhZ21lbnQgYmVmb3JlIHRoZSBpbnN0YW5jZSBpcyBjcmVhdGVkLFxuICogc28gdGhlIHByb2Nlc3NlZCBmcmFnbWVudCBjYW4gdGhlbiBiZSBjbG9uZWQgYW5kIHJldXNlZFxuICogaW4gdi1mb3IuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiB0cmFuc2NsdWRlKGVsLCBvcHRpb25zKSB7XG4gIC8vIGV4dHJhY3QgY29udGFpbmVyIGF0dHJpYnV0ZXMgdG8gcGFzcyB0aGVtIGRvd25cbiAgLy8gdG8gY29tcGlsZXIsIGJlY2F1c2UgdGhleSBuZWVkIHRvIGJlIGNvbXBpbGVkIGluXG4gIC8vIHBhcmVudCBzY29wZS4gd2UgYXJlIG11dGF0aW5nIHRoZSBvcHRpb25zIG9iamVjdCBoZXJlXG4gIC8vIGFzc3VtaW5nIHRoZSBzYW1lIG9iamVjdCB3aWxsIGJlIHVzZWQgZm9yIGNvbXBpbGVcbiAgLy8gcmlnaHQgYWZ0ZXIgdGhpcy5cbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zLl9jb250YWluZXJBdHRycyA9IGV4dHJhY3RBdHRycyhlbCk7XG4gIH1cbiAgLy8gZm9yIHRlbXBsYXRlIHRhZ3MsIHdoYXQgd2Ugd2FudCBpcyBpdHMgY29udGVudCBhc1xuICAvLyBhIGRvY3VtZW50RnJhZ21lbnQgKGZvciBmcmFnbWVudCBpbnN0YW5jZXMpXG4gIGlmIChpc1RlbXBsYXRlKGVsKSkge1xuICAgIGVsID0gcGFyc2VUZW1wbGF0ZShlbCk7XG4gIH1cbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQgJiYgIW9wdGlvbnMudGVtcGxhdGUpIHtcbiAgICAgIG9wdGlvbnMudGVtcGxhdGUgPSAnPHNsb3Q+PC9zbG90Pic7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnRlbXBsYXRlKSB7XG4gICAgICBvcHRpb25zLl9jb250ZW50ID0gZXh0cmFjdENvbnRlbnQoZWwpO1xuICAgICAgZWwgPSB0cmFuc2NsdWRlVGVtcGxhdGUoZWwsIG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuICBpZiAoaXNGcmFnbWVudChlbCkpIHtcbiAgICAvLyBhbmNob3JzIGZvciBmcmFnbWVudCBpbnN0YW5jZVxuICAgIC8vIHBhc3NpbmcgaW4gYHBlcnNpc3Q6IHRydWVgIHRvIGF2b2lkIHRoZW0gYmVpbmdcbiAgICAvLyBkaXNjYXJkZWQgYnkgSUUgZHVyaW5nIHRlbXBsYXRlIGNsb25pbmdcbiAgICBwcmVwZW5kKGNyZWF0ZUFuY2hvcigndi1zdGFydCcsIHRydWUpLCBlbCk7XG4gICAgZWwuYXBwZW5kQ2hpbGQoY3JlYXRlQW5jaG9yKCd2LWVuZCcsIHRydWUpKTtcbiAgfVxuICByZXR1cm4gZWw7XG59XG5cbi8qKlxuICogUHJvY2VzcyB0aGUgdGVtcGxhdGUgb3B0aW9uLlxuICogSWYgdGhlIHJlcGxhY2Ugb3B0aW9uIGlzIHRydWUgdGhpcyB3aWxsIHN3YXAgdGhlICRlbC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIHRyYW5zY2x1ZGVUZW1wbGF0ZShlbCwgb3B0aW9ucykge1xuICB2YXIgdGVtcGxhdGUgPSBvcHRpb25zLnRlbXBsYXRlO1xuICB2YXIgZnJhZyA9IHBhcnNlVGVtcGxhdGUodGVtcGxhdGUsIHRydWUpO1xuICBpZiAoZnJhZykge1xuICAgIHZhciByZXBsYWNlciA9IGZyYWcuZmlyc3RDaGlsZDtcbiAgICB2YXIgdGFnID0gcmVwbGFjZXIudGFnTmFtZSAmJiByZXBsYWNlci50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKG9wdGlvbnMucmVwbGFjZSkge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoZWwgPT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdZb3UgYXJlIG1vdW50aW5nIGFuIGluc3RhbmNlIHdpdGggYSB0ZW1wbGF0ZSB0byAnICsgJzxib2R5Pi4gVGhpcyB3aWxsIHJlcGxhY2UgPGJvZHk+IGVudGlyZWx5LiBZb3UgJyArICdzaG91bGQgcHJvYmFibHkgdXNlIGByZXBsYWNlOiBmYWxzZWAgaGVyZS4nKTtcbiAgICAgIH1cbiAgICAgIC8vIHRoZXJlIGFyZSBtYW55IGNhc2VzIHdoZXJlIHRoZSBpbnN0YW5jZSBtdXN0XG4gICAgICAvLyBiZWNvbWUgYSBmcmFnbWVudCBpbnN0YW5jZTogYmFzaWNhbGx5IGFueXRoaW5nIHRoYXRcbiAgICAgIC8vIGNhbiBjcmVhdGUgbW9yZSB0aGFuIDEgcm9vdCBub2Rlcy5cbiAgICAgIGlmIChcbiAgICAgIC8vIG11bHRpLWNoaWxkcmVuIHRlbXBsYXRlXG4gICAgICBmcmFnLmNoaWxkTm9kZXMubGVuZ3RoID4gMSB8fFxuICAgICAgLy8gbm9uLWVsZW1lbnQgdGVtcGxhdGVcbiAgICAgIHJlcGxhY2VyLm5vZGVUeXBlICE9PSAxIHx8XG4gICAgICAvLyBzaW5nbGUgbmVzdGVkIGNvbXBvbmVudFxuICAgICAgdGFnID09PSAnY29tcG9uZW50JyB8fCByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCB0YWcpIHx8IGhhc0JpbmRBdHRyKHJlcGxhY2VyLCAnaXMnKSB8fFxuICAgICAgLy8gZWxlbWVudCBkaXJlY3RpdmVcbiAgICAgIHJlc29sdmVBc3NldChvcHRpb25zLCAnZWxlbWVudERpcmVjdGl2ZXMnLCB0YWcpIHx8XG4gICAgICAvLyBmb3IgYmxvY2tcbiAgICAgIHJlcGxhY2VyLmhhc0F0dHJpYnV0ZSgndi1mb3InKSB8fFxuICAgICAgLy8gaWYgYmxvY2tcbiAgICAgIHJlcGxhY2VyLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG4gICAgICAgIHJldHVybiBmcmFnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3B0aW9ucy5fcmVwbGFjZXJBdHRycyA9IGV4dHJhY3RBdHRycyhyZXBsYWNlcik7XG4gICAgICAgIG1lcmdlQXR0cnMoZWwsIHJlcGxhY2VyKTtcbiAgICAgICAgcmV0dXJuIHJlcGxhY2VyO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBlbC5hcHBlbmRDaGlsZChmcmFnKTtcbiAgICAgIHJldHVybiBlbDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHRlbXBsYXRlIG9wdGlvbjogJyArIHRlbXBsYXRlKTtcbiAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBleHRyYWN0IGEgY29tcG9uZW50IGNvbnRhaW5lcidzIGF0dHJpYnV0ZXNcbiAqIGludG8gYSBwbGFpbiBvYmplY3QgYXJyYXkuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHJldHVybiB7QXJyYXl9XG4gKi9cblxuZnVuY3Rpb24gZXh0cmFjdEF0dHJzKGVsKSB7XG4gIGlmIChlbC5ub2RlVHlwZSA9PT0gMSAmJiBlbC5oYXNBdHRyaWJ1dGVzKCkpIHtcbiAgICByZXR1cm4gdG9BcnJheShlbC5hdHRyaWJ1dGVzKTtcbiAgfVxufVxuXG4vKipcbiAqIE1lcmdlIHRoZSBhdHRyaWJ1dGVzIG9mIHR3byBlbGVtZW50cywgYW5kIG1ha2Ugc3VyZVxuICogdGhlIGNsYXNzIG5hbWVzIGFyZSBtZXJnZWQgcHJvcGVybHkuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBmcm9tXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRvXG4gKi9cblxuZnVuY3Rpb24gbWVyZ2VBdHRycyhmcm9tLCB0bykge1xuICB2YXIgYXR0cnMgPSBmcm9tLmF0dHJpYnV0ZXM7XG4gIHZhciBpID0gYXR0cnMubGVuZ3RoO1xuICB2YXIgbmFtZSwgdmFsdWU7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBuYW1lID0gYXR0cnNbaV0ubmFtZTtcbiAgICB2YWx1ZSA9IGF0dHJzW2ldLnZhbHVlO1xuICAgIGlmICghdG8uaGFzQXR0cmlidXRlKG5hbWUpICYmICFzcGVjaWFsQ2hhclJFLnRlc3QobmFtZSkpIHtcbiAgICAgIHRvLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChuYW1lID09PSAnY2xhc3MnICYmICFwYXJzZVRleHQodmFsdWUpICYmICh2YWx1ZSA9IHZhbHVlLnRyaW0oKSkpIHtcbiAgICAgIHZhbHVlLnNwbGl0KC9cXHMrLykuZm9yRWFjaChmdW5jdGlvbiAoY2xzKSB7XG4gICAgICAgIGFkZENsYXNzKHRvLCBjbHMpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU2NhbiBhbmQgZGV0ZXJtaW5lIHNsb3QgY29udGVudCBkaXN0cmlidXRpb24uXG4gKiBXZSBkbyB0aGlzIGR1cmluZyB0cmFuc2NsdXNpb24gaW5zdGVhZCBhdCBjb21waWxlIHRpbWUgc28gdGhhdFxuICogdGhlIGRpc3RyaWJ1dGlvbiBpcyBkZWNvdXBsZWQgZnJvbSB0aGUgY29tcGlsYXRpb24gb3JkZXIgb2ZcbiAqIHRoZSBzbG90cy5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gdGVtcGxhdGVcbiAqIEBwYXJhbSB7RWxlbWVudH0gY29udGVudFxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuZnVuY3Rpb24gcmVzb2x2ZVNsb3RzKHZtLCBjb250ZW50KSB7XG4gIGlmICghY29udGVudCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgY29udGVudHMgPSB2bS5fc2xvdENvbnRlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdmFyIGVsLCBuYW1lO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGNvbnRlbnQuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZWwgPSBjb250ZW50LmNoaWxkcmVuW2ldO1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgaWYgKG5hbWUgPSBlbC5nZXRBdHRyaWJ1dGUoJ3Nsb3QnKSkge1xuICAgICAgKGNvbnRlbnRzW25hbWVdIHx8IChjb250ZW50c1tuYW1lXSA9IFtdKSkucHVzaChlbCk7XG4gICAgfVxuICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBnZXRCaW5kQXR0cihlbCwgJ3Nsb3QnKSkge1xuICAgICAgd2FybignVGhlIFwic2xvdFwiIGF0dHJpYnV0ZSBtdXN0IGJlIHN0YXRpYy4nLCB2bS4kcGFyZW50KTtcbiAgICB9XG4gIH1cbiAgZm9yIChuYW1lIGluIGNvbnRlbnRzKSB7XG4gICAgY29udGVudHNbbmFtZV0gPSBleHRyYWN0RnJhZ21lbnQoY29udGVudHNbbmFtZV0sIGNvbnRlbnQpO1xuICB9XG4gIGlmIChjb250ZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xuICAgIHZhciBub2RlcyA9IGNvbnRlbnQuY2hpbGROb2RlcztcbiAgICBpZiAobm9kZXMubGVuZ3RoID09PSAxICYmIG5vZGVzWzBdLm5vZGVUeXBlID09PSAzICYmICFub2Rlc1swXS5kYXRhLnRyaW0oKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb250ZW50c1snZGVmYXVsdCddID0gZXh0cmFjdEZyYWdtZW50KGNvbnRlbnQuY2hpbGROb2RlcywgY29udGVudCk7XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRyYWN0IHF1YWxpZmllZCBjb250ZW50IG5vZGVzIGZyb20gYSBub2RlIGxpc3QuXG4gKlxuICogQHBhcmFtIHtOb2RlTGlzdH0gbm9kZXNcbiAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gZXh0cmFjdEZyYWdtZW50KG5vZGVzLCBwYXJlbnQpIHtcbiAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIG5vZGVzID0gdG9BcnJheShub2Rlcyk7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdmFyIG5vZGUgPSBub2Rlc1tpXTtcbiAgICBpZiAoaXNUZW1wbGF0ZShub2RlKSAmJiAhbm9kZS5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSAmJiAhbm9kZS5oYXNBdHRyaWJ1dGUoJ3YtZm9yJykpIHtcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgIG5vZGUgPSBwYXJzZVRlbXBsYXRlKG5vZGUsIHRydWUpO1xuICAgIH1cbiAgICBmcmFnLmFwcGVuZENoaWxkKG5vZGUpO1xuICB9XG4gIHJldHVybiBmcmFnO1xufVxuXG5cblxudmFyIGNvbXBpbGVyID0gT2JqZWN0LmZyZWV6ZSh7XG5cdGNvbXBpbGU6IGNvbXBpbGUsXG5cdGNvbXBpbGVBbmRMaW5rUHJvcHM6IGNvbXBpbGVBbmRMaW5rUHJvcHMsXG5cdGNvbXBpbGVSb290OiBjb21waWxlUm9vdCxcblx0dHJhbnNjbHVkZTogdHJhbnNjbHVkZSxcblx0cmVzb2x2ZVNsb3RzOiByZXNvbHZlU2xvdHNcbn0pO1xuXG5mdW5jdGlvbiBzdGF0ZU1peGluIChWdWUpIHtcbiAgLyoqXG4gICAqIEFjY2Vzc29yIGZvciBgJGRhdGFgIHByb3BlcnR5LCBzaW5jZSBzZXR0aW5nICRkYXRhXG4gICAqIHJlcXVpcmVzIG9ic2VydmluZyB0aGUgbmV3IG9iamVjdCBhbmQgdXBkYXRpbmdcbiAgICogcHJveGllZCBwcm9wZXJ0aWVzLlxuICAgKi9cblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRkYXRhJywge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXdEYXRhKSB7XG4gICAgICBpZiAobmV3RGF0YSAhPT0gdGhpcy5fZGF0YSkge1xuICAgICAgICB0aGlzLl9zZXREYXRhKG5ld0RhdGEpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIFNldHVwIHRoZSBzY29wZSBvZiBhbiBpbnN0YW5jZSwgd2hpY2ggY29udGFpbnM6XG4gICAqIC0gb2JzZXJ2ZWQgZGF0YVxuICAgKiAtIGNvbXB1dGVkIHByb3BlcnRpZXNcbiAgICogLSB1c2VyIG1ldGhvZHNcbiAgICogLSBtZXRhIHByb3BlcnRpZXNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2luaXRQcm9wcygpO1xuICAgIHRoaXMuX2luaXRNZXRhKCk7XG4gICAgdGhpcy5faW5pdE1ldGhvZHMoKTtcbiAgICB0aGlzLl9pbml0RGF0YSgpO1xuICAgIHRoaXMuX2luaXRDb21wdXRlZCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHByb3BzLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0UHJvcHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuICAgIHZhciBlbCA9IG9wdGlvbnMuZWw7XG4gICAgdmFyIHByb3BzID0gb3B0aW9ucy5wcm9wcztcbiAgICBpZiAocHJvcHMgJiYgIWVsKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1Byb3BzIHdpbGwgbm90IGJlIGNvbXBpbGVkIGlmIG5vIGBlbGAgb3B0aW9uIGlzICcgKyAncHJvdmlkZWQgYXQgaW5zdGFudGlhdGlvbi4nLCB0aGlzKTtcbiAgICB9XG4gICAgLy8gbWFrZSBzdXJlIHRvIGNvbnZlcnQgc3RyaW5nIHNlbGVjdG9ycyBpbnRvIGVsZW1lbnQgbm93XG4gICAgZWwgPSBvcHRpb25zLmVsID0gcXVlcnkoZWwpO1xuICAgIHRoaXMuX3Byb3BzVW5saW5rRm4gPSBlbCAmJiBlbC5ub2RlVHlwZSA9PT0gMSAmJiBwcm9wc1xuICAgIC8vIHByb3BzIG11c3QgYmUgbGlua2VkIGluIHByb3BlciBzY29wZSBpZiBpbnNpZGUgdi1mb3JcbiAgICA/IGNvbXBpbGVBbmRMaW5rUHJvcHModGhpcywgZWwsIHByb3BzLCB0aGlzLl9zY29wZSkgOiBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSBkYXRhLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZGF0YUZuID0gdGhpcy4kb3B0aW9ucy5kYXRhO1xuICAgIHZhciBkYXRhID0gdGhpcy5fZGF0YSA9IGRhdGFGbiA/IGRhdGFGbigpIDoge307XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG4gICAgICBkYXRhID0ge307XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ2RhdGEgZnVuY3Rpb25zIHNob3VsZCByZXR1cm4gYW4gb2JqZWN0LicsIHRoaXMpO1xuICAgIH1cbiAgICB2YXIgcHJvcHMgPSB0aGlzLl9wcm9wcztcbiAgICAvLyBwcm94eSBkYXRhIG9uIGluc3RhbmNlXG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKTtcbiAgICB2YXIgaSwga2V5O1xuICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgLy8gdGhlcmUgYXJlIHR3byBzY2VuYXJpb3Mgd2hlcmUgd2UgY2FuIHByb3h5IGEgZGF0YSBrZXk6XG4gICAgICAvLyAxLiBpdCdzIG5vdCBhbHJlYWR5IGRlZmluZWQgYXMgYSBwcm9wXG4gICAgICAvLyAyLiBpdCdzIHByb3ZpZGVkIHZpYSBhIGluc3RhbnRpYXRpb24gb3B0aW9uIEFORCB0aGVyZSBhcmUgbm9cbiAgICAgIC8vICAgIHRlbXBsYXRlIHByb3AgcHJlc2VudFxuICAgICAgaWYgKCFwcm9wcyB8fCAhaGFzT3duKHByb3BzLCBrZXkpKSB7XG4gICAgICAgIHRoaXMuX3Byb3h5KGtleSk7XG4gICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgd2FybignRGF0YSBmaWVsZCBcIicgKyBrZXkgKyAnXCIgaXMgYWxyZWFkeSBkZWZpbmVkICcgKyAnYXMgYSBwcm9wLiBUbyBwcm92aWRlIGRlZmF1bHQgdmFsdWUgZm9yIGEgcHJvcCwgdXNlIHRoZSBcImRlZmF1bHRcIiAnICsgJ3Byb3Agb3B0aW9uOyBpZiB5b3Ugd2FudCB0byBwYXNzIHByb3AgdmFsdWVzIHRvIGFuIGluc3RhbnRpYXRpb24gJyArICdjYWxsLCB1c2UgdGhlIFwicHJvcHNEYXRhXCIgb3B0aW9uLicsIHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBvYnNlcnZlIGRhdGFcbiAgICBvYnNlcnZlKGRhdGEsIHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTd2FwIHRoZSBpbnN0YW5jZSdzICRkYXRhLiBDYWxsZWQgaW4gJGRhdGEncyBzZXR0ZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBuZXdEYXRhXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX3NldERhdGEgPSBmdW5jdGlvbiAobmV3RGF0YSkge1xuICAgIG5ld0RhdGEgPSBuZXdEYXRhIHx8IHt9O1xuICAgIHZhciBvbGREYXRhID0gdGhpcy5fZGF0YTtcbiAgICB0aGlzLl9kYXRhID0gbmV3RGF0YTtcbiAgICB2YXIga2V5cywga2V5LCBpO1xuICAgIC8vIHVucHJveHkga2V5cyBub3QgcHJlc2VudCBpbiBuZXcgZGF0YVxuICAgIGtleXMgPSBPYmplY3Qua2V5cyhvbGREYXRhKTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgIGlmICghKGtleSBpbiBuZXdEYXRhKSkge1xuICAgICAgICB0aGlzLl91bnByb3h5KGtleSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIHByb3h5IGtleXMgbm90IGFscmVhZHkgcHJveGllZCxcbiAgICAvLyBhbmQgdHJpZ2dlciBjaGFuZ2UgZm9yIGNoYW5nZWQgdmFsdWVzXG4gICAga2V5cyA9IE9iamVjdC5rZXlzKG5ld0RhdGEpO1xuICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYgKCFoYXNPd24odGhpcywga2V5KSkge1xuICAgICAgICAvLyBuZXcgcHJvcGVydHlcbiAgICAgICAgdGhpcy5fcHJveHkoa2V5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgb2xkRGF0YS5fX29iX18ucmVtb3ZlVm0odGhpcyk7XG4gICAgb2JzZXJ2ZShuZXdEYXRhLCB0aGlzKTtcbiAgICB0aGlzLl9kaWdlc3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogUHJveHkgYSBwcm9wZXJ0eSwgc28gdGhhdFxuICAgKiB2bS5wcm9wID09PSB2bS5fZGF0YS5wcm9wXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fcHJveHkgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgaWYgKCFpc1Jlc2VydmVkKGtleSkpIHtcbiAgICAgIC8vIG5lZWQgdG8gc3RvcmUgcmVmIHRvIHNlbGYgaGVyZVxuICAgICAgLy8gYmVjYXVzZSB0aGVzZSBnZXR0ZXIvc2V0dGVycyBtaWdodFxuICAgICAgLy8gYmUgY2FsbGVkIGJ5IGNoaWxkIHNjb3BlcyB2aWFcbiAgICAgIC8vIHByb3RvdHlwZSBpbmhlcml0YW5jZS5cbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCBrZXksIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIHByb3h5R2V0dGVyKCkge1xuICAgICAgICAgIHJldHVybiBzZWxmLl9kYXRhW2tleV07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gcHJveHlTZXR0ZXIodmFsKSB7XG4gICAgICAgICAgc2VsZi5fZGF0YVtrZXldID0gdmFsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFVucHJveHkgYSBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl91bnByb3h5ID0gZnVuY3Rpb24gKGtleSkge1xuICAgIGlmICghaXNSZXNlcnZlZChrZXkpKSB7XG4gICAgICBkZWxldGUgdGhpc1trZXldO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRm9yY2UgdXBkYXRlIG9uIGV2ZXJ5IHdhdGNoZXIgaW4gc2NvcGUuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMuX3dhdGNoZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdGhpcy5fd2F0Y2hlcnNbaV0udXBkYXRlKHRydWUpOyAvLyBzaGFsbG93IHVwZGF0ZXNcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHVwIGNvbXB1dGVkIHByb3BlcnRpZXMuIFRoZXkgYXJlIGVzc2VudGlhbGx5XG4gICAqIHNwZWNpYWwgZ2V0dGVyL3NldHRlcnNcbiAgICovXG5cbiAgZnVuY3Rpb24gbm9vcCgpIHt9XG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRDb21wdXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY29tcHV0ZWQgPSB0aGlzLiRvcHRpb25zLmNvbXB1dGVkO1xuICAgIGlmIChjb21wdXRlZCkge1xuICAgICAgZm9yICh2YXIga2V5IGluIGNvbXB1dGVkKSB7XG4gICAgICAgIHZhciB1c2VyRGVmID0gY29tcHV0ZWRba2V5XTtcbiAgICAgICAgdmFyIGRlZiA9IHtcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIHVzZXJEZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBkZWYuZ2V0ID0gbWFrZUNvbXB1dGVkR2V0dGVyKHVzZXJEZWYsIHRoaXMpO1xuICAgICAgICAgIGRlZi5zZXQgPSBub29wO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlZi5nZXQgPSB1c2VyRGVmLmdldCA/IHVzZXJEZWYuY2FjaGUgIT09IGZhbHNlID8gbWFrZUNvbXB1dGVkR2V0dGVyKHVzZXJEZWYuZ2V0LCB0aGlzKSA6IGJpbmQodXNlckRlZi5nZXQsIHRoaXMpIDogbm9vcDtcbiAgICAgICAgICBkZWYuc2V0ID0gdXNlckRlZi5zZXQgPyBiaW5kKHVzZXJEZWYuc2V0LCB0aGlzKSA6IG5vb3A7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGtleSwgZGVmKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gbWFrZUNvbXB1dGVkR2V0dGVyKGdldHRlciwgb3duZXIpIHtcbiAgICB2YXIgd2F0Y2hlciA9IG5ldyBXYXRjaGVyKG93bmVyLCBnZXR0ZXIsIG51bGwsIHtcbiAgICAgIGxhenk6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gY29tcHV0ZWRHZXR0ZXIoKSB7XG4gICAgICBpZiAod2F0Y2hlci5kaXJ0eSkge1xuICAgICAgICB3YXRjaGVyLmV2YWx1YXRlKCk7XG4gICAgICB9XG4gICAgICBpZiAoRGVwLnRhcmdldCkge1xuICAgICAgICB3YXRjaGVyLmRlcGVuZCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdhdGNoZXIudmFsdWU7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBpbnN0YW5jZSBtZXRob2RzLiBNZXRob2RzIG11c3QgYmUgYm91bmQgdG8gdGhlXG4gICAqIGluc3RhbmNlIHNpbmNlIHRoZXkgbWlnaHQgYmUgcGFzc2VkIGRvd24gYXMgYSBwcm9wIHRvXG4gICAqIGNoaWxkIGNvbXBvbmVudHMuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRNZXRob2RzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBtZXRob2RzID0gdGhpcy4kb3B0aW9ucy5tZXRob2RzO1xuICAgIGlmIChtZXRob2RzKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gbWV0aG9kcykge1xuICAgICAgICB0aGlzW2tleV0gPSBiaW5kKG1ldGhvZHNba2V5XSwgdGhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIG1ldGEgaW5mb3JtYXRpb24gbGlrZSAkaW5kZXgsICRrZXkgJiAkdmFsdWUuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRNZXRhID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBtZXRhcyA9IHRoaXMuJG9wdGlvbnMuX21ldGE7XG4gICAgaWYgKG1ldGFzKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gbWV0YXMpIHtcbiAgICAgICAgZGVmaW5lUmVhY3RpdmUodGhpcywga2V5LCBtZXRhc1trZXldKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbnZhciBldmVudFJFID0gL152LW9uOnxeQC87XG5cbmZ1bmN0aW9uIGV2ZW50c01peGluIChWdWUpIHtcbiAgLyoqXG4gICAqIFNldHVwIHRoZSBpbnN0YW5jZSdzIG9wdGlvbiBldmVudHMgJiB3YXRjaGVycy5cbiAgICogSWYgdGhlIHZhbHVlIGlzIGEgc3RyaW5nLCB3ZSBwdWxsIGl0IGZyb20gdGhlXG4gICAqIGluc3RhbmNlJ3MgbWV0aG9kcyBieSBuYW1lLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0RXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcbiAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQpIHtcbiAgICAgIHJlZ2lzdGVyQ29tcG9uZW50RXZlbnRzKHRoaXMsIG9wdGlvbnMuZWwpO1xuICAgIH1cbiAgICByZWdpc3RlckNhbGxiYWNrcyh0aGlzLCAnJG9uJywgb3B0aW9ucy5ldmVudHMpO1xuICAgIHJlZ2lzdGVyQ2FsbGJhY2tzKHRoaXMsICckd2F0Y2gnLCBvcHRpb25zLndhdGNoKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVnaXN0ZXIgdi1vbiBldmVudHMgb24gYSBjaGlsZCBjb21wb25lbnRcbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICovXG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnRFdmVudHModm0sIGVsKSB7XG4gICAgdmFyIGF0dHJzID0gZWwuYXR0cmlidXRlcztcbiAgICB2YXIgbmFtZSwgdmFsdWUsIGhhbmRsZXI7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuICAgICAgaWYgKGV2ZW50UkUudGVzdChuYW1lKSkge1xuICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKGV2ZW50UkUsICcnKTtcbiAgICAgICAgLy8gZm9yY2UgdGhlIGV4cHJlc3Npb24gaW50byBhIHN0YXRlbWVudCBzbyB0aGF0XG4gICAgICAgIC8vIGl0IGFsd2F5cyBkeW5hbWljYWxseSByZXNvbHZlcyB0aGUgbWV0aG9kIHRvIGNhbGwgKCMyNjcwKVxuICAgICAgICAvLyBraW5kYSB1Z2x5IGhhY2ssIGJ1dCBkb2VzIHRoZSBqb2IuXG4gICAgICAgIHZhbHVlID0gYXR0cnNbaV0udmFsdWU7XG4gICAgICAgIGlmIChpc1NpbXBsZVBhdGgodmFsdWUpKSB7XG4gICAgICAgICAgdmFsdWUgKz0gJy5hcHBseSh0aGlzLCAkYXJndW1lbnRzKSc7XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlciA9ICh2bS5fc2NvcGUgfHwgdm0uX2NvbnRleHQpLiRldmFsKHZhbHVlLCB0cnVlKTtcbiAgICAgICAgaGFuZGxlci5fZnJvbVBhcmVudCA9IHRydWU7XG4gICAgICAgIHZtLiRvbihuYW1lLnJlcGxhY2UoZXZlbnRSRSksIGhhbmRsZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBjYWxsYmFja3MgZm9yIG9wdGlvbiBldmVudHMgYW5kIHdhdGNoZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gaGFzaFxuICAgKi9cblxuICBmdW5jdGlvbiByZWdpc3RlckNhbGxiYWNrcyh2bSwgYWN0aW9uLCBoYXNoKSB7XG4gICAgaWYgKCFoYXNoKSByZXR1cm47XG4gICAgdmFyIGhhbmRsZXJzLCBrZXksIGksIGo7XG4gICAgZm9yIChrZXkgaW4gaGFzaCkge1xuICAgICAgaGFuZGxlcnMgPSBoYXNoW2tleV07XG4gICAgICBpZiAoaXNBcnJheShoYW5kbGVycykpIHtcbiAgICAgICAgZm9yIChpID0gMCwgaiA9IGhhbmRsZXJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlcnNbaV0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXJzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIHRvIHJlZ2lzdGVyIGFuIGV2ZW50L3dhdGNoIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvblxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAqIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfE9iamVjdH0gaGFuZGxlclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlciwgb3B0aW9ucykge1xuICAgIHZhciB0eXBlID0gdHlwZW9mIGhhbmRsZXI7XG4gICAgaWYgKHR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHZtW2FjdGlvbl0oa2V5LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB2YXIgbWV0aG9kcyA9IHZtLiRvcHRpb25zLm1ldGhvZHM7XG4gICAgICB2YXIgbWV0aG9kID0gbWV0aG9kcyAmJiBtZXRob2RzW2hhbmRsZXJdO1xuICAgICAgaWYgKG1ldGhvZCkge1xuICAgICAgICB2bVthY3Rpb25dKGtleSwgbWV0aG9kLCBvcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVW5rbm93biBtZXRob2Q6IFwiJyArIGhhbmRsZXIgKyAnXCIgd2hlbiAnICsgJ3JlZ2lzdGVyaW5nIGNhbGxiYWNrIGZvciAnICsgYWN0aW9uICsgJzogXCInICsga2V5ICsgJ1wiLicsIHZtKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGhhbmRsZXIgJiYgdHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlci5oYW5kbGVyLCBoYW5kbGVyKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgcmVjdXJzaXZlIGF0dGFjaGVkL2RldGFjaGVkIGNhbGxzXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRET01Ib29rcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLiRvbignaG9vazphdHRhY2hlZCcsIG9uQXR0YWNoZWQpO1xuICAgIHRoaXMuJG9uKCdob29rOmRldGFjaGVkJywgb25EZXRhY2hlZCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIHRvIHJlY3Vyc2l2ZWx5IGNhbGwgYXR0YWNoZWQgaG9vayBvbiBjaGlsZHJlblxuICAgKi9cblxuICBmdW5jdGlvbiBvbkF0dGFjaGVkKCkge1xuICAgIGlmICghdGhpcy5faXNBdHRhY2hlZCkge1xuICAgICAgdGhpcy5faXNBdHRhY2hlZCA9IHRydWU7XG4gICAgICB0aGlzLiRjaGlsZHJlbi5mb3JFYWNoKGNhbGxBdHRhY2gpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJdGVyYXRvciB0byBjYWxsIGF0dGFjaGVkIGhvb2tcbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IGNoaWxkXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNhbGxBdHRhY2goY2hpbGQpIHtcbiAgICBpZiAoIWNoaWxkLl9pc0F0dGFjaGVkICYmIGluRG9jKGNoaWxkLiRlbCkpIHtcbiAgICAgIGNoaWxkLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGJhY2sgdG8gcmVjdXJzaXZlbHkgY2FsbCBkZXRhY2hlZCBob29rIG9uIGNoaWxkcmVuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIG9uRGV0YWNoZWQoKSB7XG4gICAgaWYgKHRoaXMuX2lzQXR0YWNoZWQpIHtcbiAgICAgIHRoaXMuX2lzQXR0YWNoZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuJGNoaWxkcmVuLmZvckVhY2goY2FsbERldGFjaCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEl0ZXJhdG9yIHRvIGNhbGwgZGV0YWNoZWQgaG9va1xuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcbiAgICovXG5cbiAgZnVuY3Rpb24gY2FsbERldGFjaChjaGlsZCkge1xuICAgIGlmIChjaGlsZC5faXNBdHRhY2hlZCAmJiAhaW5Eb2MoY2hpbGQuJGVsKSkge1xuICAgICAgY2hpbGQuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyIGFsbCBoYW5kbGVycyBmb3IgYSBob29rXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBob29rXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2NhbGxIb29rID0gZnVuY3Rpb24gKGhvb2spIHtcbiAgICB0aGlzLiRlbWl0KCdwcmUtaG9vazonICsgaG9vayk7XG4gICAgdmFyIGhhbmRsZXJzID0gdGhpcy4kb3B0aW9uc1tob29rXTtcbiAgICBpZiAoaGFuZGxlcnMpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgIGhhbmRsZXJzW2ldLmNhbGwodGhpcyk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuJGVtaXQoJ2hvb2s6JyArIGhvb2spO1xuICB9O1xufVxuXG5mdW5jdGlvbiBub29wJDEoKSB7fVxuXG4vKipcbiAqIEEgZGlyZWN0aXZlIGxpbmtzIGEgRE9NIGVsZW1lbnQgd2l0aCBhIHBpZWNlIG9mIGRhdGEsXG4gKiB3aGljaCBpcyB0aGUgcmVzdWx0IG9mIGV2YWx1YXRpbmcgYW4gZXhwcmVzc2lvbi5cbiAqIEl0IHJlZ2lzdGVycyBhIHdhdGNoZXIgd2l0aCB0aGUgZXhwcmVzc2lvbiBhbmQgY2FsbHNcbiAqIHRoZSBET00gdXBkYXRlIGZ1bmN0aW9uIHdoZW4gYSBjaGFuZ2UgaXMgdHJpZ2dlcmVkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZXNjcmlwdG9yXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBuYW1lXG4gKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBkZWZcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGV4cHJlc3Npb25cbiAqICAgICAgICAgICAgICAgICAtIHtBcnJheTxPYmplY3Q+fSBbZmlsdGVyc11cbiAqICAgICAgICAgICAgICAgICAtIHtPYmplY3R9IFttb2RpZmllcnNdXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gbGl0ZXJhbFxuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gYXR0clxuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gYXJnXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSByYXdcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IFtyZWZdXG4gKiAgICAgICAgICAgICAgICAgLSB7QXJyYXk8T2JqZWN0Pn0gW2ludGVycF1cbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBbaGFzT25lVGltZV1cbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtOb2RlfSBlbFxuICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIHRyYW5zY2x1c2lvbiBob3N0IGNvbXBvbmVudFxuICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddIC0gb3duZXIgZnJhZ21lbnRcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBEaXJlY3RpdmUoZGVzY3JpcHRvciwgdm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICB0aGlzLnZtID0gdm07XG4gIHRoaXMuZWwgPSBlbDtcbiAgLy8gY29weSBkZXNjcmlwdG9yIHByb3BlcnRpZXNcbiAgdGhpcy5kZXNjcmlwdG9yID0gZGVzY3JpcHRvcjtcbiAgdGhpcy5uYW1lID0gZGVzY3JpcHRvci5uYW1lO1xuICB0aGlzLmV4cHJlc3Npb24gPSBkZXNjcmlwdG9yLmV4cHJlc3Npb247XG4gIHRoaXMuYXJnID0gZGVzY3JpcHRvci5hcmc7XG4gIHRoaXMubW9kaWZpZXJzID0gZGVzY3JpcHRvci5tb2RpZmllcnM7XG4gIHRoaXMuZmlsdGVycyA9IGRlc2NyaXB0b3IuZmlsdGVycztcbiAgdGhpcy5saXRlcmFsID0gdGhpcy5tb2RpZmllcnMgJiYgdGhpcy5tb2RpZmllcnMubGl0ZXJhbDtcbiAgLy8gcHJpdmF0ZVxuICB0aGlzLl9sb2NrZWQgPSBmYWxzZTtcbiAgdGhpcy5fYm91bmQgPSBmYWxzZTtcbiAgdGhpcy5fbGlzdGVuZXJzID0gbnVsbDtcbiAgLy8gbGluayBjb250ZXh0XG4gIHRoaXMuX2hvc3QgPSBob3N0O1xuICB0aGlzLl9zY29wZSA9IHNjb3BlO1xuICB0aGlzLl9mcmFnID0gZnJhZztcbiAgLy8gc3RvcmUgZGlyZWN0aXZlcyBvbiBub2RlIGluIGRldiBtb2RlXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwpIHtcbiAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcyA9IHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzIHx8IFtdO1xuICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzLnB1c2godGhpcyk7XG4gIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplIHRoZSBkaXJlY3RpdmUsIG1peGluIGRlZmluaXRpb24gcHJvcGVydGllcyxcbiAqIHNldHVwIHRoZSB3YXRjaGVyLCBjYWxsIGRlZmluaXRpb24gYmluZCgpIGFuZCB1cGRhdGUoKVxuICogaWYgcHJlc2VudC5cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl9iaW5kID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbmFtZSA9IHRoaXMubmFtZTtcbiAgdmFyIGRlc2NyaXB0b3IgPSB0aGlzLmRlc2NyaXB0b3I7XG5cbiAgLy8gcmVtb3ZlIGF0dHJpYnV0ZVxuICBpZiAoKG5hbWUgIT09ICdjbG9haycgfHwgdGhpcy52bS5faXNDb21waWxlZCkgJiYgdGhpcy5lbCAmJiB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSkge1xuICAgIHZhciBhdHRyID0gZGVzY3JpcHRvci5hdHRyIHx8ICd2LScgKyBuYW1lO1xuICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuICB9XG5cbiAgLy8gY29weSBkZWYgcHJvcGVydGllc1xuICB2YXIgZGVmID0gZGVzY3JpcHRvci5kZWY7XG4gIGlmICh0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhpcy51cGRhdGUgPSBkZWY7XG4gIH0gZWxzZSB7XG4gICAgZXh0ZW5kKHRoaXMsIGRlZik7XG4gIH1cblxuICAvLyBzZXR1cCBkaXJlY3RpdmUgcGFyYW1zXG4gIHRoaXMuX3NldHVwUGFyYW1zKCk7XG5cbiAgLy8gaW5pdGlhbCBiaW5kXG4gIGlmICh0aGlzLmJpbmQpIHtcbiAgICB0aGlzLmJpbmQoKTtcbiAgfVxuICB0aGlzLl9ib3VuZCA9IHRydWU7XG5cbiAgaWYgKHRoaXMubGl0ZXJhbCkge1xuICAgIHRoaXMudXBkYXRlICYmIHRoaXMudXBkYXRlKGRlc2NyaXB0b3IucmF3KTtcbiAgfSBlbHNlIGlmICgodGhpcy5leHByZXNzaW9uIHx8IHRoaXMubW9kaWZpZXJzKSAmJiAodGhpcy51cGRhdGUgfHwgdGhpcy50d29XYXkpICYmICF0aGlzLl9jaGVja1N0YXRlbWVudCgpKSB7XG4gICAgLy8gd3JhcHBlZCB1cGRhdGVyIGZvciBjb250ZXh0XG4gICAgdmFyIGRpciA9IHRoaXM7XG4gICAgaWYgKHRoaXMudXBkYXRlKSB7XG4gICAgICB0aGlzLl91cGRhdGUgPSBmdW5jdGlvbiAodmFsLCBvbGRWYWwpIHtcbiAgICAgICAgaWYgKCFkaXIuX2xvY2tlZCkge1xuICAgICAgICAgIGRpci51cGRhdGUodmFsLCBvbGRWYWwpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl91cGRhdGUgPSBub29wJDE7XG4gICAgfVxuICAgIHZhciBwcmVQcm9jZXNzID0gdGhpcy5fcHJlUHJvY2VzcyA/IGJpbmQodGhpcy5fcHJlUHJvY2VzcywgdGhpcykgOiBudWxsO1xuICAgIHZhciBwb3N0UHJvY2VzcyA9IHRoaXMuX3Bvc3RQcm9jZXNzID8gYmluZCh0aGlzLl9wb3N0UHJvY2VzcywgdGhpcykgOiBudWxsO1xuICAgIHZhciB3YXRjaGVyID0gdGhpcy5fd2F0Y2hlciA9IG5ldyBXYXRjaGVyKHRoaXMudm0sIHRoaXMuZXhwcmVzc2lvbiwgdGhpcy5fdXBkYXRlLCAvLyBjYWxsYmFja1xuICAgIHtcbiAgICAgIGZpbHRlcnM6IHRoaXMuZmlsdGVycyxcbiAgICAgIHR3b1dheTogdGhpcy50d29XYXksXG4gICAgICBkZWVwOiB0aGlzLmRlZXAsXG4gICAgICBwcmVQcm9jZXNzOiBwcmVQcm9jZXNzLFxuICAgICAgcG9zdFByb2Nlc3M6IHBvc3RQcm9jZXNzLFxuICAgICAgc2NvcGU6IHRoaXMuX3Njb3BlXG4gICAgfSk7XG4gICAgLy8gdi1tb2RlbCB3aXRoIGluaXRhbCBpbmxpbmUgdmFsdWUgbmVlZCB0byBzeW5jIGJhY2sgdG9cbiAgICAvLyBtb2RlbCBpbnN0ZWFkIG9mIHVwZGF0ZSB0byBET00gb24gaW5pdC4gVGhleSB3b3VsZFxuICAgIC8vIHNldCB0aGUgYWZ0ZXJCaW5kIGhvb2sgdG8gaW5kaWNhdGUgdGhhdC5cbiAgICBpZiAodGhpcy5hZnRlckJpbmQpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnVwZGF0ZSkge1xuICAgICAgdGhpcy51cGRhdGUod2F0Y2hlci52YWx1ZSk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIFNldHVwIGFsbCBwYXJhbSBhdHRyaWJ1dGVzLCBlLmcuIHRyYWNrLWJ5LFxuICogdHJhbnNpdGlvbi1tb2RlLCBldGMuLi5cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl9zZXR1cFBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKCF0aGlzLnBhcmFtcykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgcGFyYW1zID0gdGhpcy5wYXJhbXM7XG4gIC8vIHN3YXAgdGhlIHBhcmFtcyBhcnJheSB3aXRoIGEgZnJlc2ggb2JqZWN0LlxuICB0aGlzLnBhcmFtcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHZhciBpID0gcGFyYW1zLmxlbmd0aDtcbiAgdmFyIGtleSwgdmFsLCBtYXBwZWRLZXk7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBrZXkgPSBoeXBoZW5hdGUocGFyYW1zW2ldKTtcbiAgICBtYXBwZWRLZXkgPSBjYW1lbGl6ZShrZXkpO1xuICAgIHZhbCA9IGdldEJpbmRBdHRyKHRoaXMuZWwsIGtleSk7XG4gICAgaWYgKHZhbCAhPSBudWxsKSB7XG4gICAgICAvLyBkeW5hbWljXG4gICAgICB0aGlzLl9zZXR1cFBhcmFtV2F0Y2hlcihtYXBwZWRLZXksIHZhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHN0YXRpY1xuICAgICAgdmFsID0gZ2V0QXR0cih0aGlzLmVsLCBrZXkpO1xuICAgICAgaWYgKHZhbCAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMucGFyYW1zW21hcHBlZEtleV0gPSB2YWwgPT09ICcnID8gdHJ1ZSA6IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogU2V0dXAgYSB3YXRjaGVyIGZvciBhIGR5bmFtaWMgcGFyYW0uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHtTdHJpbmd9IGV4cHJlc3Npb25cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl9zZXR1cFBhcmFtV2F0Y2hlciA9IGZ1bmN0aW9uIChrZXksIGV4cHJlc3Npb24pIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gIHZhciB1bndhdGNoID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiR3YXRjaChleHByZXNzaW9uLCBmdW5jdGlvbiAodmFsLCBvbGRWYWwpIHtcbiAgICBzZWxmLnBhcmFtc1trZXldID0gdmFsO1xuICAgIC8vIHNpbmNlIHdlIGFyZSBpbiBpbW1lZGlhdGUgbW9kZSxcbiAgICAvLyBvbmx5IGNhbGwgdGhlIHBhcmFtIGNoYW5nZSBjYWxsYmFja3MgaWYgdGhpcyBpcyBub3QgdGhlIGZpcnN0IHVwZGF0ZS5cbiAgICBpZiAoY2FsbGVkKSB7XG4gICAgICB2YXIgY2IgPSBzZWxmLnBhcmFtV2F0Y2hlcnMgJiYgc2VsZi5wYXJhbVdhdGNoZXJzW2tleV07XG4gICAgICBpZiAoY2IpIHtcbiAgICAgICAgY2IuY2FsbChzZWxmLCB2YWwsIG9sZFZhbCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgfVxuICB9LCB7XG4gICAgaW1tZWRpYXRlOiB0cnVlLFxuICAgIHVzZXI6IGZhbHNlXG4gIH0pOyh0aGlzLl9wYXJhbVVud2F0Y2hGbnMgfHwgKHRoaXMuX3BhcmFtVW53YXRjaEZucyA9IFtdKSkucHVzaCh1bndhdGNoKTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGRpcmVjdGl2ZSBpcyBhIGZ1bmN0aW9uIGNhbGxlclxuICogYW5kIGlmIHRoZSBleHByZXNzaW9uIGlzIGEgY2FsbGFibGUgb25lLiBJZiBib3RoIHRydWUsXG4gKiB3ZSB3cmFwIHVwIHRoZSBleHByZXNzaW9uIGFuZCB1c2UgaXQgYXMgdGhlIGV2ZW50XG4gKiBoYW5kbGVyLlxuICpcbiAqIGUuZy4gb24tY2xpY2s9XCJhKytcIlxuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fY2hlY2tTdGF0ZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBleHByZXNzaW9uID0gdGhpcy5leHByZXNzaW9uO1xuICBpZiAoZXhwcmVzc2lvbiAmJiB0aGlzLmFjY2VwdFN0YXRlbWVudCAmJiAhaXNTaW1wbGVQYXRoKGV4cHJlc3Npb24pKSB7XG4gICAgdmFyIGZuID0gcGFyc2VFeHByZXNzaW9uKGV4cHJlc3Npb24pLmdldDtcbiAgICB2YXIgc2NvcGUgPSB0aGlzLl9zY29wZSB8fCB0aGlzLnZtO1xuICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gaGFuZGxlcihlKSB7XG4gICAgICBzY29wZS4kZXZlbnQgPSBlO1xuICAgICAgZm4uY2FsbChzY29wZSwgc2NvcGUpO1xuICAgICAgc2NvcGUuJGV2ZW50ID0gbnVsbDtcbiAgICB9O1xuICAgIGlmICh0aGlzLmZpbHRlcnMpIHtcbiAgICAgIGhhbmRsZXIgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKGhhbmRsZXIsIG51bGwsIHRoaXMuZmlsdGVycyk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlKGhhbmRsZXIpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuXG4vKipcbiAqIFNldCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSB3aXRoIHRoZSBzZXR0ZXIuXG4gKiBUaGlzIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gdHdvLXdheSBkaXJlY3RpdmVzXG4gKiBlLmcuIHYtbW9kZWwuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHB1YmxpY1xuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmICh0aGlzLnR3b1dheSkge1xuICAgIHRoaXMuX3dpdGhMb2NrKGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3dhdGNoZXIuc2V0KHZhbHVlKTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgd2FybignRGlyZWN0aXZlLnNldCgpIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHR3b1dheScgKyAnZGlyZWN0aXZlcy4nKTtcbiAgfVxufTtcblxuLyoqXG4gKiBFeGVjdXRlIGEgZnVuY3Rpb24gd2hpbGUgcHJldmVudGluZyB0aGF0IGZ1bmN0aW9uIGZyb21cbiAqIHRyaWdnZXJpbmcgdXBkYXRlcyBvbiB0aGlzIGRpcmVjdGl2ZSBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3dpdGhMb2NrID0gZnVuY3Rpb24gKGZuKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgc2VsZi5fbG9ja2VkID0gdHJ1ZTtcbiAgZm4uY2FsbChzZWxmKTtcbiAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgIHNlbGYuX2xvY2tlZCA9IGZhbHNlO1xuICB9KTtcbn07XG5cbi8qKlxuICogQ29udmVuaWVuY2UgbWV0aG9kIHRoYXQgYXR0YWNoZXMgYSBET00gZXZlbnQgbGlzdGVuZXJcbiAqIHRvIHRoZSBkaXJlY3RpdmUgZWxlbWVudCBhbmQgYXV0b21ldGljYWxseSB0ZWFycyBpdCBkb3duXG4gKiBkdXJpbmcgdW5iaW5kLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuICogQHBhcmFtIHtCb29sZWFufSBbdXNlQ2FwdHVyZV1cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2ZW50LCBoYW5kbGVyLCB1c2VDYXB0dXJlKSB7XG4gIG9uKHRoaXMuZWwsIGV2ZW50LCBoYW5kbGVyLCB1c2VDYXB0dXJlKTsodGhpcy5fbGlzdGVuZXJzIHx8ICh0aGlzLl9saXN0ZW5lcnMgPSBbXSkpLnB1c2goW2V2ZW50LCBoYW5kbGVyXSk7XG59O1xuXG4vKipcbiAqIFRlYXJkb3duIHRoZSB3YXRjaGVyIGFuZCBjYWxsIHVuYmluZC5cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl90ZWFyZG93biA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuX2JvdW5kKSB7XG4gICAgdGhpcy5fYm91bmQgPSBmYWxzZTtcbiAgICBpZiAodGhpcy51bmJpbmQpIHtcbiAgICAgIHRoaXMudW5iaW5kKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLl93YXRjaGVyKSB7XG4gICAgICB0aGlzLl93YXRjaGVyLnRlYXJkb3duKCk7XG4gICAgfVxuICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgdmFyIGk7XG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgaSA9IGxpc3RlbmVycy5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIG9mZih0aGlzLmVsLCBsaXN0ZW5lcnNbaV1bMF0sIGxpc3RlbmVyc1tpXVsxXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciB1bndhdGNoRm5zID0gdGhpcy5fcGFyYW1VbndhdGNoRm5zO1xuICAgIGlmICh1bndhdGNoRm5zKSB7XG4gICAgICBpID0gdW53YXRjaEZucy5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIHVud2F0Y2hGbnNbaV0oKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbCkge1xuICAgICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMuJHJlbW92ZSh0aGlzKTtcbiAgICB9XG4gICAgdGhpcy52bSA9IHRoaXMuZWwgPSB0aGlzLl93YXRjaGVyID0gdGhpcy5fbGlzdGVuZXJzID0gbnVsbDtcbiAgfVxufTtcblxuZnVuY3Rpb24gbGlmZWN5Y2xlTWl4aW4gKFZ1ZSkge1xuICAvKipcbiAgICogVXBkYXRlIHYtcmVmIGZvciBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX3VwZGF0ZVJlZiA9IGZ1bmN0aW9uIChyZW1vdmUpIHtcbiAgICB2YXIgcmVmID0gdGhpcy4kb3B0aW9ucy5fcmVmO1xuICAgIGlmIChyZWYpIHtcbiAgICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMuX2NvbnRleHQpLiRyZWZzO1xuICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICBpZiAocmVmc1tyZWZdID09PSB0aGlzKSB7XG4gICAgICAgICAgcmVmc1tyZWZdID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVmc1tyZWZdID0gdGhpcztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFRyYW5zY2x1ZGUsIGNvbXBpbGUgYW5kIGxpbmsgZWxlbWVudC5cbiAgICpcbiAgICogSWYgYSBwcmUtY29tcGlsZWQgbGlua2VyIGlzIGF2YWlsYWJsZSwgdGhhdCBtZWFucyB0aGVcbiAgICogcGFzc2VkIGluIGVsZW1lbnQgd2lsbCBiZSBwcmUtdHJhbnNjbHVkZWQgYW5kIGNvbXBpbGVkXG4gICAqIGFzIHdlbGwgLSBhbGwgd2UgbmVlZCB0byBkbyBpcyB0byBjYWxsIHRoZSBsaW5rZXIuXG4gICAqXG4gICAqIE90aGVyd2lzZSB3ZSBuZWVkIHRvIGNhbGwgdHJhbnNjbHVkZS9jb21waWxlL2xpbmsgaGVyZS5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9jb21waWxlID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuXG4gICAgLy8gdHJhbnNjbHVkZSBhbmQgaW5pdCBlbGVtZW50XG4gICAgLy8gdHJhbnNjbHVkZSBjYW4gcG90ZW50aWFsbHkgcmVwbGFjZSBvcmlnaW5hbFxuICAgIC8vIHNvIHdlIG5lZWQgdG8ga2VlcCByZWZlcmVuY2U7IHRoaXMgc3RlcCBhbHNvIGluamVjdHNcbiAgICAvLyB0aGUgdGVtcGxhdGUgYW5kIGNhY2hlcyB0aGUgb3JpZ2luYWwgYXR0cmlidXRlc1xuICAgIC8vIG9uIHRoZSBjb250YWluZXIgbm9kZSBhbmQgcmVwbGFjZXIgbm9kZS5cbiAgICB2YXIgb3JpZ2luYWwgPSBlbDtcbiAgICBlbCA9IHRyYW5zY2x1ZGUoZWwsIG9wdGlvbnMpO1xuICAgIHRoaXMuX2luaXRFbGVtZW50KGVsKTtcblxuICAgIC8vIGhhbmRsZSB2LXByZSBvbiByb290IG5vZGUgKCMyMDI2KVxuICAgIGlmIChlbC5ub2RlVHlwZSA9PT0gMSAmJiBnZXRBdHRyKGVsLCAndi1wcmUnKSAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHJvb3QgaXMgYWx3YXlzIGNvbXBpbGVkIHBlci1pbnN0YW5jZSwgYmVjYXVzZVxuICAgIC8vIGNvbnRhaW5lciBhdHRycyBhbmQgcHJvcHMgY2FuIGJlIGRpZmZlcmVudCBldmVyeSB0aW1lLlxuICAgIHZhciBjb250ZXh0T3B0aW9ucyA9IHRoaXMuX2NvbnRleHQgJiYgdGhpcy5fY29udGV4dC4kb3B0aW9ucztcbiAgICB2YXIgcm9vdExpbmtlciA9IGNvbXBpbGVSb290KGVsLCBvcHRpb25zLCBjb250ZXh0T3B0aW9ucyk7XG5cbiAgICAvLyByZXNvbHZlIHNsb3QgZGlzdHJpYnV0aW9uXG4gICAgcmVzb2x2ZVNsb3RzKHRoaXMsIG9wdGlvbnMuX2NvbnRlbnQpO1xuXG4gICAgLy8gY29tcGlsZSBhbmQgbGluayB0aGUgcmVzdFxuICAgIHZhciBjb250ZW50TGlua0ZuO1xuICAgIHZhciBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAvLyBjb21wb25lbnQgY29tcGlsYXRpb24gY2FuIGJlIGNhY2hlZFxuICAgIC8vIGFzIGxvbmcgYXMgaXQncyBub3QgdXNpbmcgaW5saW5lLXRlbXBsYXRlXG4gICAgaWYgKG9wdGlvbnMuX2xpbmtlckNhY2hhYmxlKSB7XG4gICAgICBjb250ZW50TGlua0ZuID0gY3Rvci5saW5rZXI7XG4gICAgICBpZiAoIWNvbnRlbnRMaW5rRm4pIHtcbiAgICAgICAgY29udGVudExpbmtGbiA9IGN0b3IubGlua2VyID0gY29tcGlsZShlbCwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gbGluayBwaGFzZVxuICAgIC8vIG1ha2Ugc3VyZSB0byBsaW5rIHJvb3Qgd2l0aCBwcm9wIHNjb3BlIVxuICAgIHZhciByb290VW5saW5rRm4gPSByb290TGlua2VyKHRoaXMsIGVsLCB0aGlzLl9zY29wZSk7XG4gICAgdmFyIGNvbnRlbnRVbmxpbmtGbiA9IGNvbnRlbnRMaW5rRm4gPyBjb250ZW50TGlua0ZuKHRoaXMsIGVsKSA6IGNvbXBpbGUoZWwsIG9wdGlvbnMpKHRoaXMsIGVsKTtcblxuICAgIC8vIHJlZ2lzdGVyIGNvbXBvc2l0ZSB1bmxpbmsgZnVuY3Rpb25cbiAgICAvLyB0byBiZSBjYWxsZWQgZHVyaW5nIGluc3RhbmNlIGRlc3RydWN0aW9uXG4gICAgdGhpcy5fdW5saW5rRm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByb290VW5saW5rRm4oKTtcbiAgICAgIC8vIHBhc3NpbmcgZGVzdHJveWluZzogdHJ1ZSB0byBhdm9pZCBzZWFyY2hpbmcgYW5kXG4gICAgICAvLyBzcGxpY2luZyB0aGUgZGlyZWN0aXZlc1xuICAgICAgY29udGVudFVubGlua0ZuKHRydWUpO1xuICAgIH07XG5cbiAgICAvLyBmaW5hbGx5IHJlcGxhY2Ugb3JpZ2luYWxcbiAgICBpZiAob3B0aW9ucy5yZXBsYWNlKSB7XG4gICAgICByZXBsYWNlKG9yaWdpbmFsLCBlbCk7XG4gICAgfVxuXG4gICAgdGhpcy5faXNDb21waWxlZCA9IHRydWU7XG4gICAgdGhpcy5fY2FsbEhvb2soJ2NvbXBpbGVkJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgaW5zdGFuY2UgZWxlbWVudC4gQ2FsbGVkIGluIHRoZSBwdWJsaWNcbiAgICogJG1vdW50KCkgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRFbGVtZW50ID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgaWYgKGlzRnJhZ21lbnQoZWwpKSB7XG4gICAgICB0aGlzLl9pc0ZyYWdtZW50ID0gdHJ1ZTtcbiAgICAgIHRoaXMuJGVsID0gdGhpcy5fZnJhZ21lbnRTdGFydCA9IGVsLmZpcnN0Q2hpbGQ7XG4gICAgICB0aGlzLl9mcmFnbWVudEVuZCA9IGVsLmxhc3RDaGlsZDtcbiAgICAgIC8vIHNldCBwZXJzaXN0ZWQgdGV4dCBhbmNob3JzIHRvIGVtcHR5XG4gICAgICBpZiAodGhpcy5fZnJhZ21lbnRTdGFydC5ub2RlVHlwZSA9PT0gMykge1xuICAgICAgICB0aGlzLl9mcmFnbWVudFN0YXJ0LmRhdGEgPSB0aGlzLl9mcmFnbWVudEVuZC5kYXRhID0gJyc7XG4gICAgICB9XG4gICAgICB0aGlzLl9mcmFnbWVudCA9IGVsO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRlbCA9IGVsO1xuICAgIH1cbiAgICB0aGlzLiRlbC5fX3Z1ZV9fID0gdGhpcztcbiAgICB0aGlzLl9jYWxsSG9vaygnYmVmb3JlQ29tcGlsZScpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW5kIGJpbmQgYSBkaXJlY3RpdmUgdG8gYW4gZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3IgLSBwYXJzZWQgZGlyZWN0aXZlIGRlc2NyaXB0b3JcbiAgICogQHBhcmFtIHtOb2RlfSBub2RlICAgLSB0YXJnZXQgbm9kZVxuICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gdHJhbnNjbHVzaW9uIGhvc3QgY29tcG9uZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddIC0gb3duZXIgZnJhZ21lbnRcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fYmluZERpciA9IGZ1bmN0aW9uIChkZXNjcmlwdG9yLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIHRoaXMuX2RpcmVjdGl2ZXMucHVzaChuZXcgRGlyZWN0aXZlKGRlc2NyaXB0b3IsIHRoaXMsIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRlYXJkb3duIGFuIGluc3RhbmNlLCB1bm9ic2VydmVzIHRoZSBkYXRhLCB1bmJpbmQgYWxsIHRoZVxuICAgKiBkaXJlY3RpdmVzLCB0dXJuIG9mZiBhbGwgdGhlIGV2ZW50IGxpc3RlbmVycywgZXRjLlxuICAgKlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZSAtIHdoZXRoZXIgdG8gcmVtb3ZlIHRoZSBET00gbm9kZS5cbiAgICogQHBhcmFtIHtCb29sZWFufSBkZWZlckNsZWFudXAgLSBpZiB0cnVlLCBkZWZlciBjbGVhbnVwIHRvXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmUgY2FsbGVkIGxhdGVyXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAocmVtb3ZlLCBkZWZlckNsZWFudXApIHtcbiAgICBpZiAodGhpcy5faXNCZWluZ0Rlc3Ryb3llZCkge1xuICAgICAgaWYgKCFkZWZlckNsZWFudXApIHtcbiAgICAgICAgdGhpcy5fY2xlYW51cCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBkZXN0cm95UmVhZHk7XG4gICAgdmFyIHBlbmRpbmdSZW1vdmFsO1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vIENsZWFudXAgc2hvdWxkIGJlIGNhbGxlZCBlaXRoZXIgc3luY2hyb25vdXNseSBvciBhc3luY2hyb25veXNseSBhc1xuICAgIC8vIGNhbGxiYWNrIG9mIHRoaXMuJHJlbW92ZSgpLCBvciBpZiByZW1vdmUgYW5kIGRlZmVyQ2xlYW51cCBhcmUgZmFsc2UuXG4gICAgLy8gSW4gYW55IGNhc2UgaXQgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciBhbGwgb3RoZXIgcmVtb3ZpbmcsIHVuYmluZGluZyBhbmRcbiAgICAvLyB0dXJuaW5nIG9mIGlzIGRvbmVcbiAgICB2YXIgY2xlYW51cElmUG9zc2libGUgPSBmdW5jdGlvbiBjbGVhbnVwSWZQb3NzaWJsZSgpIHtcbiAgICAgIGlmIChkZXN0cm95UmVhZHkgJiYgIXBlbmRpbmdSZW1vdmFsICYmICFkZWZlckNsZWFudXApIHtcbiAgICAgICAgc2VsZi5fY2xlYW51cCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyByZW1vdmUgRE9NIGVsZW1lbnRcbiAgICBpZiAocmVtb3ZlICYmIHRoaXMuJGVsKSB7XG4gICAgICBwZW5kaW5nUmVtb3ZhbCA9IHRydWU7XG4gICAgICB0aGlzLiRyZW1vdmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBwZW5kaW5nUmVtb3ZhbCA9IGZhbHNlO1xuICAgICAgICBjbGVhbnVwSWZQb3NzaWJsZSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5fY2FsbEhvb2soJ2JlZm9yZURlc3Ryb3knKTtcbiAgICB0aGlzLl9pc0JlaW5nRGVzdHJveWVkID0gdHJ1ZTtcbiAgICB2YXIgaTtcbiAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHBhcmVudC4gb25seSBuZWNlc3NhcnlcbiAgICAvLyBpZiBwYXJlbnQgaXMgbm90IGJlaW5nIGRlc3Ryb3llZCBhcyB3ZWxsLlxuICAgIHZhciBwYXJlbnQgPSB0aGlzLiRwYXJlbnQ7XG4gICAgaWYgKHBhcmVudCAmJiAhcGFyZW50Ll9pc0JlaW5nRGVzdHJveWVkKSB7XG4gICAgICBwYXJlbnQuJGNoaWxkcmVuLiRyZW1vdmUodGhpcyk7XG4gICAgICAvLyB1bnJlZ2lzdGVyIHJlZiAocmVtb3ZlOiB0cnVlKVxuICAgICAgdGhpcy5fdXBkYXRlUmVmKHRydWUpO1xuICAgIH1cbiAgICAvLyBkZXN0cm95IGFsbCBjaGlsZHJlbi5cbiAgICBpID0gdGhpcy4kY2hpbGRyZW4ubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHRoaXMuJGNoaWxkcmVuW2ldLiRkZXN0cm95KCk7XG4gICAgfVxuICAgIC8vIHRlYXJkb3duIHByb3BzXG4gICAgaWYgKHRoaXMuX3Byb3BzVW5saW5rRm4pIHtcbiAgICAgIHRoaXMuX3Byb3BzVW5saW5rRm4oKTtcbiAgICB9XG4gICAgLy8gdGVhcmRvd24gYWxsIGRpcmVjdGl2ZXMuIHRoaXMgYWxzbyB0ZWFyc2Rvd24gYWxsXG4gICAgLy8gZGlyZWN0aXZlLW93bmVkIHdhdGNoZXJzLlxuICAgIGlmICh0aGlzLl91bmxpbmtGbikge1xuICAgICAgdGhpcy5fdW5saW5rRm4oKTtcbiAgICB9XG4gICAgaSA9IHRoaXMuX3dhdGNoZXJzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB0aGlzLl93YXRjaGVyc1tpXS50ZWFyZG93bigpO1xuICAgIH1cbiAgICAvLyByZW1vdmUgcmVmZXJlbmNlIHRvIHNlbGYgb24gJGVsXG4gICAgaWYgKHRoaXMuJGVsKSB7XG4gICAgICB0aGlzLiRlbC5fX3Z1ZV9fID0gbnVsbDtcbiAgICB9XG5cbiAgICBkZXN0cm95UmVhZHkgPSB0cnVlO1xuICAgIGNsZWFudXBJZlBvc3NpYmxlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENsZWFuIHVwIHRvIGVuc3VyZSBnYXJiYWdlIGNvbGxlY3Rpb24uXG4gICAqIFRoaXMgaXMgY2FsbGVkIGFmdGVyIHRoZSBsZWF2ZSB0cmFuc2l0aW9uIGlmIHRoZXJlXG4gICAqIGlzIGFueS5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5faXNEZXN0cm95ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSBvd25lciBmcmFnbWVudFxuICAgIC8vIGRvIGl0IGluIGNsZWFudXAgc28gdGhhdCB3ZSBjYW4gY2FsbCAkZGVzdHJveSB3aXRoXG4gICAgLy8gZGVmZXIgcmlnaHQgd2hlbiBhIGZyYWdtZW50IGlzIGFib3V0IHRvIGJlIHJlbW92ZWQuXG4gICAgaWYgKHRoaXMuX2ZyYWcpIHtcbiAgICAgIHRoaXMuX2ZyYWcuY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcbiAgICB9XG4gICAgLy8gcmVtb3ZlIHJlZmVyZW5jZSBmcm9tIGRhdGEgb2JcbiAgICAvLyBmcm96ZW4gb2JqZWN0IG1heSBub3QgaGF2ZSBvYnNlcnZlci5cbiAgICBpZiAodGhpcy5fZGF0YSAmJiB0aGlzLl9kYXRhLl9fb2JfXykge1xuICAgICAgdGhpcy5fZGF0YS5fX29iX18ucmVtb3ZlVm0odGhpcyk7XG4gICAgfVxuICAgIC8vIENsZWFuIHVwIHJlZmVyZW5jZXMgdG8gcHJpdmF0ZSBwcm9wZXJ0aWVzIGFuZCBvdGhlclxuICAgIC8vIGluc3RhbmNlcy4gcHJlc2VydmUgcmVmZXJlbmNlIHRvIF9kYXRhIHNvIHRoYXQgcHJveHlcbiAgICAvLyBhY2Nlc3NvcnMgc3RpbGwgd29yay4gVGhlIG9ubHkgcG90ZW50aWFsIHNpZGUgZWZmZWN0XG4gICAgLy8gaGVyZSBpcyB0aGF0IG11dGF0aW5nIHRoZSBpbnN0YW5jZSBhZnRlciBpdCdzIGRlc3Ryb3llZFxuICAgIC8vIG1heSBhZmZlY3QgdGhlIHN0YXRlIG9mIG90aGVyIGNvbXBvbmVudHMgdGhhdCBhcmUgc3RpbGxcbiAgICAvLyBvYnNlcnZpbmcgdGhlIHNhbWUgb2JqZWN0LCBidXQgdGhhdCBzZWVtcyB0byBiZSBhXG4gICAgLy8gcmVhc29uYWJsZSByZXNwb25zaWJpbGl0eSBmb3IgdGhlIHVzZXIgcmF0aGVyIHRoYW5cbiAgICAvLyBhbHdheXMgdGhyb3dpbmcgYW4gZXJyb3Igb24gdGhlbS5cbiAgICB0aGlzLiRlbCA9IHRoaXMuJHBhcmVudCA9IHRoaXMuJHJvb3QgPSB0aGlzLiRjaGlsZHJlbiA9IHRoaXMuX3dhdGNoZXJzID0gdGhpcy5fY29udGV4dCA9IHRoaXMuX3Njb3BlID0gdGhpcy5fZGlyZWN0aXZlcyA9IG51bGw7XG4gICAgLy8gY2FsbCB0aGUgbGFzdCBob29rLi4uXG4gICAgdGhpcy5faXNEZXN0cm95ZWQgPSB0cnVlO1xuICAgIHRoaXMuX2NhbGxIb29rKCdkZXN0cm95ZWQnKTtcbiAgICAvLyB0dXJuIG9mZiBhbGwgaW5zdGFuY2UgbGlzdGVuZXJzLlxuICAgIHRoaXMuJG9mZigpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBtaXNjTWl4aW4gKFZ1ZSkge1xuICAvKipcbiAgICogQXBwbHkgYSBsaXN0IG9mIGZpbHRlciAoZGVzY3JpcHRvcnMpIHRvIGEgdmFsdWUuXG4gICAqIFVzaW5nIHBsYWluIGZvciBsb29wcyBoZXJlIGJlY2F1c2UgdGhpcyB3aWxsIGJlIGNhbGxlZCBpblxuICAgKiB0aGUgZ2V0dGVyIG9mIGFueSB3YXRjaGVyIHdpdGggZmlsdGVycyBzbyBpdCBpcyB2ZXJ5XG4gICAqIHBlcmZvcm1hbmNlIHNlbnNpdGl2ZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0geyp9IFtvbGRWYWx1ZV1cbiAgICogQHBhcmFtIHtBcnJheX0gZmlsdGVyc1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHdyaXRlXG4gICAqIEByZXR1cm4geyp9XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2FwcGx5RmlsdGVycyA9IGZ1bmN0aW9uICh2YWx1ZSwgb2xkVmFsdWUsIGZpbHRlcnMsIHdyaXRlKSB7XG4gICAgdmFyIGZpbHRlciwgZm4sIGFyZ3MsIGFyZywgb2Zmc2V0LCBpLCBsLCBqLCBrO1xuICAgIGZvciAoaSA9IDAsIGwgPSBmaWx0ZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZmlsdGVyID0gZmlsdGVyc1t3cml0ZSA/IGwgLSBpIC0gMSA6IGldO1xuICAgICAgZm4gPSByZXNvbHZlQXNzZXQodGhpcy4kb3B0aW9ucywgJ2ZpbHRlcnMnLCBmaWx0ZXIubmFtZSwgdHJ1ZSk7XG4gICAgICBpZiAoIWZuKSBjb250aW51ZTtcbiAgICAgIGZuID0gd3JpdGUgPyBmbi53cml0ZSA6IGZuLnJlYWQgfHwgZm47XG4gICAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSBjb250aW51ZTtcbiAgICAgIGFyZ3MgPSB3cml0ZSA/IFt2YWx1ZSwgb2xkVmFsdWVdIDogW3ZhbHVlXTtcbiAgICAgIG9mZnNldCA9IHdyaXRlID8gMiA6IDE7XG4gICAgICBpZiAoZmlsdGVyLmFyZ3MpIHtcbiAgICAgICAgZm9yIChqID0gMCwgayA9IGZpbHRlci5hcmdzLmxlbmd0aDsgaiA8IGs7IGorKykge1xuICAgICAgICAgIGFyZyA9IGZpbHRlci5hcmdzW2pdO1xuICAgICAgICAgIGFyZ3NbaiArIG9mZnNldF0gPSBhcmcuZHluYW1pYyA/IHRoaXMuJGdldChhcmcudmFsdWUpIDogYXJnLnZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YWx1ZSA9IGZuLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlc29sdmUgYSBjb21wb25lbnQsIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBjb21wb25lbnRcbiAgICogaXMgZGVmaW5lZCBub3JtYWxseSBvciB1c2luZyBhbiBhc3luYyBmYWN0b3J5IGZ1bmN0aW9uLlxuICAgKiBSZXNvbHZlcyBzeW5jaHJvbm91c2x5IGlmIGFscmVhZHkgcmVzb2x2ZWQsIG90aGVyd2lzZVxuICAgKiByZXNvbHZlcyBhc3luY2hyb25vdXNseSBhbmQgY2FjaGVzIHRoZSByZXNvbHZlZFxuICAgKiBjb25zdHJ1Y3RvciBvbiB0aGUgZmFjdG9yeS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHZhbHVlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX3Jlc29sdmVDb21wb25lbnQgPSBmdW5jdGlvbiAodmFsdWUsIGNiKSB7XG4gICAgdmFyIGZhY3Rvcnk7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgZmFjdG9yeSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBmYWN0b3J5ID0gcmVzb2x2ZUFzc2V0KHRoaXMuJG9wdGlvbnMsICdjb21wb25lbnRzJywgdmFsdWUsIHRydWUpO1xuICAgIH1cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIWZhY3RvcnkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gYXN5bmMgY29tcG9uZW50IGZhY3RvcnlcbiAgICBpZiAoIWZhY3Rvcnkub3B0aW9ucykge1xuICAgICAgaWYgKGZhY3RvcnkucmVzb2x2ZWQpIHtcbiAgICAgICAgLy8gY2FjaGVkXG4gICAgICAgIGNiKGZhY3RvcnkucmVzb2x2ZWQpO1xuICAgICAgfSBlbHNlIGlmIChmYWN0b3J5LnJlcXVlc3RlZCkge1xuICAgICAgICAvLyBwb29sIGNhbGxiYWNrc1xuICAgICAgICBmYWN0b3J5LnBlbmRpbmdDYWxsYmFja3MucHVzaChjYik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmYWN0b3J5LnJlcXVlc3RlZCA9IHRydWU7XG4gICAgICAgIHZhciBjYnMgPSBmYWN0b3J5LnBlbmRpbmdDYWxsYmFja3MgPSBbY2JdO1xuICAgICAgICBmYWN0b3J5LmNhbGwodGhpcywgZnVuY3Rpb24gcmVzb2x2ZShyZXMpIHtcbiAgICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChyZXMpKSB7XG4gICAgICAgICAgICByZXMgPSBWdWUuZXh0ZW5kKHJlcyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNhY2hlIHJlc29sdmVkXG4gICAgICAgICAgZmFjdG9yeS5yZXNvbHZlZCA9IHJlcztcbiAgICAgICAgICAvLyBpbnZva2UgY2FsbGJhY2tzXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjYnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBjYnNbaV0ocmVzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcbiAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ZhaWxlZCB0byByZXNvbHZlIGFzeW5jIGNvbXBvbmVudCcgKyAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/ICc6ICcgKyB2YWx1ZSA6ICcnKSArICcuICcgKyAocmVhc29uID8gJ1xcblJlYXNvbjogJyArIHJlYXNvbiA6ICcnKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBub3JtYWwgY29tcG9uZW50XG4gICAgICBjYihmYWN0b3J5KTtcbiAgICB9XG4gIH07XG59XG5cbnZhciBmaWx0ZXJSRSQxID0gL1tefF1cXHxbXnxdLztcblxuZnVuY3Rpb24gZGF0YUFQSSAoVnVlKSB7XG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIGZyb20gYW4gZXhwcmVzc2lvbiBvbiB0aGlzIHZtLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FzU3RhdGVtZW50XVxuICAgKiBAcmV0dXJuIHsqfVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRnZXQgPSBmdW5jdGlvbiAoZXhwLCBhc1N0YXRlbWVudCkge1xuICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwKTtcbiAgICBpZiAocmVzKSB7XG4gICAgICBpZiAoYXNTdGF0ZW1lbnQpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gc3RhdGVtZW50SGFuZGxlcigpIHtcbiAgICAgICAgICBzZWxmLiRhcmd1bWVudHMgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IHJlcy5nZXQuY2FsbChzZWxmLCBzZWxmKTtcbiAgICAgICAgICBzZWxmLiRhcmd1bWVudHMgPSBudWxsO1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiByZXMuZ2V0LmNhbGwodGhpcywgdGhpcyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHZhbHVlIGZyb20gYW4gZXhwcmVzc2lvbiBvbiB0aGlzIHZtLlxuICAgKiBUaGUgZXhwcmVzc2lvbiBtdXN0IGJlIGEgdmFsaWQgbGVmdC1oYW5kXG4gICAqIGV4cHJlc3Npb24gaW4gYW4gYXNzaWdubWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICAgKiBAcGFyYW0geyp9IHZhbFxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRzZXQgPSBmdW5jdGlvbiAoZXhwLCB2YWwpIHtcbiAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cCwgdHJ1ZSk7XG4gICAgaWYgKHJlcyAmJiByZXMuc2V0KSB7XG4gICAgICByZXMuc2V0LmNhbGwodGhpcywgdGhpcywgdmFsKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIHByb3BlcnR5IG9uIHRoZSBWTVxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICBkZWwodGhpcy5fZGF0YSwga2V5KTtcbiAgfTtcblxuICAvKipcbiAgICogV2F0Y2ggYW4gZXhwcmVzc2lvbiwgdHJpZ2dlciBjYWxsYmFjayB3aGVuIGl0c1xuICAgKiB2YWx1ZSBjaGFuZ2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gZXhwT3JGblxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBkZWVwXG4gICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBpbW1lZGlhdGVcbiAgICogQHJldHVybiB7RnVuY3Rpb259IC0gdW53YXRjaEZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJHdhdGNoID0gZnVuY3Rpb24gKGV4cE9yRm4sIGNiLCBvcHRpb25zKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2YXIgcGFyc2VkO1xuICAgIGlmICh0eXBlb2YgZXhwT3JGbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKGV4cE9yRm4pO1xuICAgICAgZXhwT3JGbiA9IHBhcnNlZC5leHByZXNzaW9uO1xuICAgIH1cbiAgICB2YXIgd2F0Y2hlciA9IG5ldyBXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwge1xuICAgICAgZGVlcDogb3B0aW9ucyAmJiBvcHRpb25zLmRlZXAsXG4gICAgICBzeW5jOiBvcHRpb25zICYmIG9wdGlvbnMuc3luYyxcbiAgICAgIGZpbHRlcnM6IHBhcnNlZCAmJiBwYXJzZWQuZmlsdGVycyxcbiAgICAgIHVzZXI6ICFvcHRpb25zIHx8IG9wdGlvbnMudXNlciAhPT0gZmFsc2VcbiAgICB9KTtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmltbWVkaWF0ZSkge1xuICAgICAgY2IuY2FsbCh2bSwgd2F0Y2hlci52YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiB1bndhdGNoRm4oKSB7XG4gICAgICB3YXRjaGVyLnRlYXJkb3duKCk7XG4gICAgfTtcbiAgfTtcblxuICAvKipcbiAgICogRXZhbHVhdGUgYSB0ZXh0IGRpcmVjdGl2ZSwgaW5jbHVkaW5nIGZpbHRlcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FzU3RhdGVtZW50XVxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGV2YWwgPSBmdW5jdGlvbiAodGV4dCwgYXNTdGF0ZW1lbnQpIHtcbiAgICAvLyBjaGVjayBmb3IgZmlsdGVycy5cbiAgICBpZiAoZmlsdGVyUkUkMS50ZXN0KHRleHQpKSB7XG4gICAgICB2YXIgZGlyID0gcGFyc2VEaXJlY3RpdmUodGV4dCk7XG4gICAgICAvLyB0aGUgZmlsdGVyIHJlZ2V4IGNoZWNrIG1pZ2h0IGdpdmUgZmFsc2UgcG9zaXRpdmVcbiAgICAgIC8vIGZvciBwaXBlcyBpbnNpZGUgc3RyaW5ncywgc28gaXQncyBwb3NzaWJsZSB0aGF0XG4gICAgICAvLyB3ZSBkb24ndCBnZXQgYW55IGZpbHRlcnMgaGVyZVxuICAgICAgdmFyIHZhbCA9IHRoaXMuJGdldChkaXIuZXhwcmVzc2lvbiwgYXNTdGF0ZW1lbnQpO1xuICAgICAgcmV0dXJuIGRpci5maWx0ZXJzID8gdGhpcy5fYXBwbHlGaWx0ZXJzKHZhbCwgbnVsbCwgZGlyLmZpbHRlcnMpIDogdmFsO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBubyBmaWx0ZXJcbiAgICAgIHJldHVybiB0aGlzLiRnZXQodGV4dCwgYXNTdGF0ZW1lbnQpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogSW50ZXJwb2xhdGUgYSBwaWVjZSBvZiB0ZW1wbGF0ZSB0ZXh0LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGludGVycG9sYXRlID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KHRleHQpO1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgaWYgKHRva2Vucykge1xuICAgICAgaWYgKHRva2Vucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHZtLiRldmFsKHRva2Vuc1swXS52YWx1ZSkgKyAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0b2tlbnMubWFwKGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAgIHJldHVybiB0b2tlbi50YWcgPyB2bS4kZXZhbCh0b2tlbi52YWx1ZSkgOiB0b2tlbi52YWx1ZTtcbiAgICAgICAgfSkuam9pbignJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0ZXh0O1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogTG9nIGluc3RhbmNlIGRhdGEgYXMgYSBwbGFpbiBKUyBvYmplY3RcbiAgICogc28gdGhhdCBpdCBpcyBlYXNpZXIgdG8gaW5zcGVjdCBpbiBjb25zb2xlLlxuICAgKiBUaGlzIG1ldGhvZCBhc3N1bWVzIGNvbnNvbGUgaXMgYXZhaWxhYmxlLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gW3BhdGhdXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGxvZyA9IGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgdmFyIGRhdGEgPSBwYXRoID8gZ2V0UGF0aCh0aGlzLl9kYXRhLCBwYXRoKSA6IHRoaXMuX2RhdGE7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIGRhdGEgPSBjbGVhbihkYXRhKTtcbiAgICB9XG4gICAgLy8gaW5jbHVkZSBjb21wdXRlZCBmaWVsZHNcbiAgICBpZiAoIXBhdGgpIHtcbiAgICAgIHZhciBrZXk7XG4gICAgICBmb3IgKGtleSBpbiB0aGlzLiRvcHRpb25zLmNvbXB1dGVkKSB7XG4gICAgICAgIGRhdGFba2V5XSA9IGNsZWFuKHRoaXNba2V5XSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5fcHJvcHMpIHtcbiAgICAgICAgZm9yIChrZXkgaW4gdGhpcy5fcHJvcHMpIHtcbiAgICAgICAgICBkYXRhW2tleV0gPSBjbGVhbih0aGlzW2tleV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBcImNsZWFuXCIgYSBnZXR0ZXIvc2V0dGVyIGNvbnZlcnRlZCBvYmplY3QgaW50byBhIHBsYWluXG4gICAqIG9iamVjdCBjb3B5LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gLSBvYmpcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cblxuICBmdW5jdGlvbiBjbGVhbihvYmopIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkb21BUEkgKFZ1ZSkge1xuICAvKipcbiAgICogQ29udmVuaWVuY2Ugb24taW5zdGFuY2UgbmV4dFRpY2suIFRoZSBjYWxsYmFjayBpc1xuICAgKiBhdXRvLWJvdW5kIHRvIHRoZSBpbnN0YW5jZSwgYW5kIHRoaXMgYXZvaWRzIGNvbXBvbmVudFxuICAgKiBtb2R1bGVzIGhhdmluZyB0byByZWx5IG9uIHRoZSBnbG9iYWwgVnVlLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRuZXh0VGljayA9IGZ1bmN0aW9uIChmbikge1xuICAgIG5leHRUaWNrKGZuLCB0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogQXBwZW5kIGluc3RhbmNlIHRvIHRhcmdldFxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kYXBwZW5kVG8gPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcbiAgICByZXR1cm4gaW5zZXJ0KHRoaXMsIHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uLCBhcHBlbmQsIGFwcGVuZFdpdGhUcmFuc2l0aW9uKTtcbiAgfTtcblxuICAvKipcbiAgICogUHJlcGVuZCBpbnN0YW5jZSB0byB0YXJnZXRcbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJHByZXBlbmRUbyA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XG4gICAgaWYgKHRhcmdldC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgIHRoaXMuJGJlZm9yZSh0YXJnZXQuZmlyc3RDaGlsZCwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kYXBwZW5kVG8odGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogSW5zZXJ0IGluc3RhbmNlIGJlZm9yZSB0YXJnZXRcbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGJlZm9yZSA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICAgIHJldHVybiBpbnNlcnQodGhpcywgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIGJlZm9yZVdpdGhDYiwgYmVmb3JlV2l0aFRyYW5zaXRpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbnNlcnQgaW5zdGFuY2UgYWZ0ZXIgdGFyZ2V0XG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRhZnRlciA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XG4gICAgaWYgKHRhcmdldC5uZXh0U2libGluZykge1xuICAgICAgdGhpcy4kYmVmb3JlKHRhcmdldC5uZXh0U2libGluZywgY2IsIHdpdGhUcmFuc2l0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kYXBwZW5kVG8odGFyZ2V0LnBhcmVudE5vZGUsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgaW5zdGFuY2UgZnJvbSBET01cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJHJlbW92ZSA9IGZ1bmN0aW9uIChjYiwgd2l0aFRyYW5zaXRpb24pIHtcbiAgICBpZiAoIXRoaXMuJGVsLnBhcmVudE5vZGUpIHtcbiAgICAgIHJldHVybiBjYiAmJiBjYigpO1xuICAgIH1cbiAgICB2YXIgaW5Eb2N1bWVudCA9IHRoaXMuX2lzQXR0YWNoZWQgJiYgaW5Eb2ModGhpcy4kZWwpO1xuICAgIC8vIGlmIHdlIGFyZSBub3QgaW4gZG9jdW1lbnQsIG5vIG5lZWQgdG8gY2hlY2tcbiAgICAvLyBmb3IgdHJhbnNpdGlvbnNcbiAgICBpZiAoIWluRG9jdW1lbnQpIHdpdGhUcmFuc2l0aW9uID0gZmFsc2U7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciByZWFsQ2IgPSBmdW5jdGlvbiByZWFsQ2IoKSB7XG4gICAgICBpZiAoaW5Eb2N1bWVudCkgc2VsZi5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XG4gICAgICBpZiAoY2IpIGNiKCk7XG4gICAgfTtcbiAgICBpZiAodGhpcy5faXNGcmFnbWVudCkge1xuICAgICAgcmVtb3ZlTm9kZVJhbmdlKHRoaXMuX2ZyYWdtZW50U3RhcnQsIHRoaXMuX2ZyYWdtZW50RW5kLCB0aGlzLCB0aGlzLl9mcmFnbWVudCwgcmVhbENiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG9wID0gd2l0aFRyYW5zaXRpb24gPT09IGZhbHNlID8gcmVtb3ZlV2l0aENiIDogcmVtb3ZlV2l0aFRyYW5zaXRpb247XG4gICAgICBvcCh0aGlzLiRlbCwgdGhpcywgcmVhbENiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNoYXJlZCBET00gaW5zZXJ0aW9uIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl1cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3AxIC0gb3AgZm9yIG5vbi10cmFuc2l0aW9uIGluc2VydFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcDIgLSBvcCBmb3IgdHJhbnNpdGlvbiBpbnNlcnRcbiAgICogQHJldHVybiB2bVxuICAgKi9cblxuICBmdW5jdGlvbiBpbnNlcnQodm0sIHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uLCBvcDEsIG9wMikge1xuICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XG4gICAgdmFyIHRhcmdldElzRGV0YWNoZWQgPSAhaW5Eb2ModGFyZ2V0KTtcbiAgICB2YXIgb3AgPSB3aXRoVHJhbnNpdGlvbiA9PT0gZmFsc2UgfHwgdGFyZ2V0SXNEZXRhY2hlZCA/IG9wMSA6IG9wMjtcbiAgICB2YXIgc2hvdWxkQ2FsbEhvb2sgPSAhdGFyZ2V0SXNEZXRhY2hlZCAmJiAhdm0uX2lzQXR0YWNoZWQgJiYgIWluRG9jKHZtLiRlbCk7XG4gICAgaWYgKHZtLl9pc0ZyYWdtZW50KSB7XG4gICAgICBtYXBOb2RlUmFuZ2Uodm0uX2ZyYWdtZW50U3RhcnQsIHZtLl9mcmFnbWVudEVuZCwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgb3Aobm9kZSwgdGFyZ2V0LCB2bSk7XG4gICAgICB9KTtcbiAgICAgIGNiICYmIGNiKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wKHZtLiRlbCwgdGFyZ2V0LCB2bSwgY2IpO1xuICAgIH1cbiAgICBpZiAoc2hvdWxkQ2FsbEhvb2spIHtcbiAgICAgIHZtLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHZtO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGZvciBzZWxlY3RvcnNcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gZWxcbiAgICovXG5cbiAgZnVuY3Rpb24gcXVlcnkoZWwpIHtcbiAgICByZXR1cm4gdHlwZW9mIGVsID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpIDogZWw7XG4gIH1cblxuICAvKipcbiAgICogQXBwZW5kIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgZnVuY3Rpb24gYXBwZW5kKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XG4gICAgaWYgKGNiKSBjYigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluc2VydEJlZm9yZSBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IGVsXG4gICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGJlZm9yZVdpdGhDYihlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcbiAgICBiZWZvcmUoZWwsIHRhcmdldCk7XG4gICAgaWYgKGNiKSBjYigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IGVsXG4gICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlbW92ZVdpdGhDYihlbCwgdm0sIGNiKSB7XG4gICAgcmVtb3ZlKGVsKTtcbiAgICBpZiAoY2IpIGNiKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZXZlbnRzQVBJIChWdWUpIHtcbiAgLyoqXG4gICAqIExpc3RlbiBvbiB0aGUgZ2l2ZW4gYGV2ZW50YCB3aXRoIGBmbmAuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRvbiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICAodGhpcy5fZXZlbnRzW2V2ZW50XSB8fCAodGhpcy5fZXZlbnRzW2V2ZW50XSA9IFtdKSkucHVzaChmbik7XG4gICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgMSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZHMgYW4gYGV2ZW50YCBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgaW52b2tlZCBhIHNpbmdsZVxuICAgKiB0aW1lIHRoZW4gYXV0b21hdGljYWxseSByZW1vdmVkLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kb25jZSA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgZnVuY3Rpb24gb24oKSB7XG4gICAgICBzZWxmLiRvZmYoZXZlbnQsIG9uKTtcbiAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIG9uLmZuID0gZm47XG4gICAgdGhpcy4kb24oZXZlbnQsIG9uKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBnaXZlbiBjYWxsYmFjayBmb3IgYGV2ZW50YCBvciBhbGxcbiAgICogcmVnaXN0ZXJlZCBjYWxsYmFja3MuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRvZmYgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG4gICAgdmFyIGNicztcbiAgICAvLyBhbGxcbiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIGlmICh0aGlzLiRwYXJlbnQpIHtcbiAgICAgICAgZm9yIChldmVudCBpbiB0aGlzLl9ldmVudHMpIHtcbiAgICAgICAgICBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuICAgICAgICAgIGlmIChjYnMpIHtcbiAgICAgICAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC1jYnMubGVuZ3RoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIHNwZWNpZmljIGV2ZW50XG4gICAgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcbiAgICBpZiAoIWNicykge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtY2JzLmxlbmd0aCk7XG4gICAgICB0aGlzLl9ldmVudHNbZXZlbnRdID0gbnVsbDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvLyBzcGVjaWZpYyBoYW5kbGVyXG4gICAgdmFyIGNiO1xuICAgIHZhciBpID0gY2JzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBjYiA9IGNic1tpXTtcbiAgICAgIGlmIChjYiA9PT0gZm4gfHwgY2IuZm4gPT09IGZuKSB7XG4gICAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC0xKTtcbiAgICAgICAgY2JzLnNwbGljZShpLCAxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUcmlnZ2VyIGFuIGV2ZW50IG9uIHNlbGYuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gZXZlbnRcbiAgICogQHJldHVybiB7Qm9vbGVhbn0gc2hvdWxkUHJvcGFnYXRlXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGVtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgaXNTb3VyY2UgPSB0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnO1xuICAgIGV2ZW50ID0gaXNTb3VyY2UgPyBldmVudCA6IGV2ZW50Lm5hbWU7XG4gICAgdmFyIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF07XG4gICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IGlzU291cmNlIHx8ICFjYnM7XG4gICAgaWYgKGNicykge1xuICAgICAgY2JzID0gY2JzLmxlbmd0aCA+IDEgPyB0b0FycmF5KGNicykgOiBjYnM7XG4gICAgICAvLyB0aGlzIGlzIGEgc29tZXdoYXQgaGFja3kgc29sdXRpb24gdG8gdGhlIHF1ZXN0aW9uIHJhaXNlZFxuICAgICAgLy8gaW4gIzIxMDI6IGZvciBhbiBpbmxpbmUgY29tcG9uZW50IGxpc3RlbmVyIGxpa2UgPGNvbXAgQHRlc3Q9XCJkb1RoaXNcIj4sXG4gICAgICAvLyB0aGUgcHJvcGFnYXRpb24gaGFuZGxpbmcgaXMgc29tZXdoYXQgYnJva2VuLiBUaGVyZWZvcmUgd2VcbiAgICAgIC8vIG5lZWQgdG8gdHJlYXQgdGhlc2UgaW5saW5lIGNhbGxiYWNrcyBkaWZmZXJlbnRseS5cbiAgICAgIHZhciBoYXNQYXJlbnRDYnMgPSBpc1NvdXJjZSAmJiBjYnMuc29tZShmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgcmV0dXJuIGNiLl9mcm9tUGFyZW50O1xuICAgICAgfSk7XG4gICAgICBpZiAoaGFzUGFyZW50Q2JzKSB7XG4gICAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdmFyIGNiID0gY2JzW2ldO1xuICAgICAgICB2YXIgcmVzID0gY2IuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIGlmIChyZXMgPT09IHRydWUgJiYgKCFoYXNQYXJlbnRDYnMgfHwgY2IuX2Zyb21QYXJlbnQpKSB7XG4gICAgICAgICAgc2hvdWxkUHJvcGFnYXRlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2hvdWxkUHJvcGFnYXRlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZWN1cnNpdmVseSBicm9hZGNhc3QgYW4gZXZlbnQgdG8gYWxsIGNoaWxkcmVuIGluc3RhbmNlcy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBldmVudFxuICAgKiBAcGFyYW0gey4uLip9IGFkZGl0aW9uYWwgYXJndW1lbnRzXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGJyb2FkY2FzdCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBpc1NvdXJjZSA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZyc7XG4gICAgZXZlbnQgPSBpc1NvdXJjZSA/IGV2ZW50IDogZXZlbnQubmFtZTtcbiAgICAvLyBpZiBubyBjaGlsZCBoYXMgcmVnaXN0ZXJlZCBmb3IgdGhpcyBldmVudCxcbiAgICAvLyB0aGVuIHRoZXJlJ3Mgbm8gbmVlZCB0byBicm9hZGNhc3QuXG4gICAgaWYgKCF0aGlzLl9ldmVudHNDb3VudFtldmVudF0pIHJldHVybjtcbiAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLiRjaGlsZHJlbjtcbiAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcbiAgICBpZiAoaXNTb3VyY2UpIHtcbiAgICAgIC8vIHVzZSBvYmplY3QgZXZlbnQgdG8gaW5kaWNhdGUgbm9uLXNvdXJjZSBlbWl0XG4gICAgICAvLyBvbiBjaGlsZHJlblxuICAgICAgYXJnc1swXSA9IHsgbmFtZTogZXZlbnQsIHNvdXJjZTogdGhpcyB9O1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gY2hpbGQuJGVtaXQuYXBwbHkoY2hpbGQsIGFyZ3MpO1xuICAgICAgaWYgKHNob3VsZFByb3BhZ2F0ZSkge1xuICAgICAgICBjaGlsZC4kYnJvYWRjYXN0LmFwcGx5KGNoaWxkLCBhcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlY3Vyc2l2ZWx5IHByb3BhZ2F0ZSBhbiBldmVudCB1cCB0aGUgcGFyZW50IGNoYWluLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHsuLi4qfSBhZGRpdGlvbmFsIGFyZ3VtZW50c1xuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRkaXNwYXRjaCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSB0aGlzLiRlbWl0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKCFzaG91bGRQcm9wYWdhdGUpIHJldHVybjtcbiAgICB2YXIgcGFyZW50ID0gdGhpcy4kcGFyZW50O1xuICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO1xuICAgIC8vIHVzZSBvYmplY3QgZXZlbnQgdG8gaW5kaWNhdGUgbm9uLXNvdXJjZSBlbWl0XG4gICAgLy8gb24gcGFyZW50c1xuICAgIGFyZ3NbMF0gPSB7IG5hbWU6IGV2ZW50LCBzb3VyY2U6IHRoaXMgfTtcbiAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICBzaG91bGRQcm9wYWdhdGUgPSBwYXJlbnQuJGVtaXQuYXBwbHkocGFyZW50LCBhcmdzKTtcbiAgICAgIHBhcmVudCA9IHNob3VsZFByb3BhZ2F0ZSA/IHBhcmVudC4kcGFyZW50IDogbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1vZGlmeSB0aGUgbGlzdGVuZXIgY291bnRzIG9uIGFsbCBwYXJlbnRzLlxuICAgKiBUaGlzIGJvb2trZWVwaW5nIGFsbG93cyAkYnJvYWRjYXN0IHRvIHJldHVybiBlYXJseSB3aGVuXG4gICAqIG5vIGNoaWxkIGhhcyBsaXN0ZW5lZCB0byBhIGNlcnRhaW4gZXZlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50XG4gICAqL1xuXG4gIHZhciBob29rUkUgPSAvXmhvb2s6LztcbiAgZnVuY3Rpb24gbW9kaWZ5TGlzdGVuZXJDb3VudCh2bSwgZXZlbnQsIGNvdW50KSB7XG4gICAgdmFyIHBhcmVudCA9IHZtLiRwYXJlbnQ7XG4gICAgLy8gaG9va3MgZG8gbm90IGdldCBicm9hZGNhc3RlZCBzbyBubyBuZWVkXG4gICAgLy8gdG8gZG8gYm9va2tlZXBpbmcgZm9yIHRoZW1cbiAgICBpZiAoIXBhcmVudCB8fCAhY291bnQgfHwgaG9va1JFLnRlc3QoZXZlbnQpKSByZXR1cm47XG4gICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgcGFyZW50Ll9ldmVudHNDb3VudFtldmVudF0gPSAocGFyZW50Ll9ldmVudHNDb3VudFtldmVudF0gfHwgMCkgKyBjb3VudDtcbiAgICAgIHBhcmVudCA9IHBhcmVudC4kcGFyZW50O1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBsaWZlY3ljbGVBUEkgKFZ1ZSkge1xuICAvKipcbiAgICogU2V0IGluc3RhbmNlIHRhcmdldCBlbGVtZW50IGFuZCBraWNrIG9mZiB0aGUgY29tcGlsYXRpb25cbiAgICogcHJvY2Vzcy4gVGhlIHBhc3NlZCBpbiBgZWxgIGNhbiBiZSBhIHNlbGVjdG9yIHN0cmluZywgYW5cbiAgICogZXhpc3RpbmcgRWxlbWVudCwgb3IgYSBEb2N1bWVudEZyYWdtZW50IChmb3IgYmxvY2tcbiAgICogaW5zdGFuY2VzKS5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR8c3RyaW5nfSBlbFxuICAgKiBAcHVibGljXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG1vdW50ID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgaWYgKHRoaXMuX2lzQ29tcGlsZWQpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignJG1vdW50KCkgc2hvdWxkIGJlIGNhbGxlZCBvbmx5IG9uY2UuJywgdGhpcyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGVsID0gcXVlcnkoZWwpO1xuICAgIGlmICghZWwpIHtcbiAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgfVxuICAgIHRoaXMuX2NvbXBpbGUoZWwpO1xuICAgIHRoaXMuX2luaXRET01Ib29rcygpO1xuICAgIGlmIChpbkRvYyh0aGlzLiRlbCkpIHtcbiAgICAgIHRoaXMuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuICAgICAgcmVhZHkuY2FsbCh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kb25jZSgnaG9vazphdHRhY2hlZCcsIHJlYWR5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1hcmsgYW4gaW5zdGFuY2UgYXMgcmVhZHkuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlYWR5KCkge1xuICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlO1xuICAgIHRoaXMuX2lzUmVhZHkgPSB0cnVlO1xuICAgIHRoaXMuX2NhbGxIb29rKCdyZWFkeScpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRlYXJkb3duIHRoZSBpbnN0YW5jZSwgc2ltcGx5IGRlbGVnYXRlIHRvIHRoZSBpbnRlcm5hbFxuICAgKiBfZGVzdHJveS5cbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmVcbiAgICogQHBhcmFtIHtCb29sZWFufSBkZWZlckNsZWFudXBcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZGVzdHJveSA9IGZ1bmN0aW9uIChyZW1vdmUsIGRlZmVyQ2xlYW51cCkge1xuICAgIHRoaXMuX2Rlc3Ryb3kocmVtb3ZlLCBkZWZlckNsZWFudXApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQYXJ0aWFsbHkgY29tcGlsZSBhIHBpZWNlIG9mIERPTSBhbmQgcmV0dXJuIGFcbiAgICogZGVjb21waWxlIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAgICogQHBhcmFtIHtWdWV9IFtob3N0XVxuICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ11cbiAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGNvbXBpbGUgPSBmdW5jdGlvbiAoZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgcmV0dXJuIGNvbXBpbGUoZWwsIHRoaXMuJG9wdGlvbnMsIHRydWUpKHRoaXMsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gIH07XG59XG5cbi8qKlxuICogVGhlIGV4cG9zZWQgVnVlIGNvbnN0cnVjdG9yLlxuICpcbiAqIEFQSSBjb252ZW50aW9uczpcbiAqIC0gcHVibGljIEFQSSBtZXRob2RzL3Byb3BlcnRpZXMgYXJlIHByZWZpeGVkIHdpdGggYCRgXG4gKiAtIGludGVybmFsIG1ldGhvZHMvcHJvcGVydGllcyBhcmUgcHJlZml4ZWQgd2l0aCBgX2BcbiAqIC0gbm9uLXByZWZpeGVkIHByb3BlcnRpZXMgYXJlIGFzc3VtZWQgdG8gYmUgcHJveGllZCB1c2VyXG4gKiAgIGRhdGEuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiBAcHVibGljXG4gKi9cblxuZnVuY3Rpb24gVnVlKG9wdGlvbnMpIHtcbiAgdGhpcy5faW5pdChvcHRpb25zKTtcbn1cblxuLy8gaW5zdGFsbCBpbnRlcm5hbHNcbmluaXRNaXhpbihWdWUpO1xuc3RhdGVNaXhpbihWdWUpO1xuZXZlbnRzTWl4aW4oVnVlKTtcbmxpZmVjeWNsZU1peGluKFZ1ZSk7XG5taXNjTWl4aW4oVnVlKTtcblxuLy8gaW5zdGFsbCBpbnN0YW5jZSBBUElzXG5kYXRhQVBJKFZ1ZSk7XG5kb21BUEkoVnVlKTtcbmV2ZW50c0FQSShWdWUpO1xubGlmZWN5Y2xlQVBJKFZ1ZSk7XG5cbnZhciBzbG90ID0ge1xuXG4gIHByaW9yaXR5OiBTTE9ULFxuICBwYXJhbXM6IFsnbmFtZSddLFxuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gdGhpcyB3YXMgcmVzb2x2ZWQgZHVyaW5nIGNvbXBvbmVudCB0cmFuc2NsdXNpb25cbiAgICB2YXIgbmFtZSA9IHRoaXMucGFyYW1zLm5hbWUgfHwgJ2RlZmF1bHQnO1xuICAgIHZhciBjb250ZW50ID0gdGhpcy52bS5fc2xvdENvbnRlbnRzICYmIHRoaXMudm0uX3Nsb3RDb250ZW50c1tuYW1lXTtcbiAgICBpZiAoIWNvbnRlbnQgfHwgIWNvbnRlbnQuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICB0aGlzLmZhbGxiYWNrKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29tcGlsZShjb250ZW50LmNsb25lTm9kZSh0cnVlKSwgdGhpcy52bS5fY29udGV4dCwgdGhpcy52bSk7XG4gICAgfVxuICB9LFxuXG4gIGNvbXBpbGU6IGZ1bmN0aW9uIGNvbXBpbGUoY29udGVudCwgY29udGV4dCwgaG9zdCkge1xuICAgIGlmIChjb250ZW50ICYmIGNvbnRleHQpIHtcbiAgICAgIGlmICh0aGlzLmVsLmhhc0NoaWxkTm9kZXMoKSAmJiBjb250ZW50LmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICYmIGNvbnRlbnQuY2hpbGROb2Rlc1swXS5ub2RlVHlwZSA9PT0gMSAmJiBjb250ZW50LmNoaWxkTm9kZXNbMF0uaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcbiAgICAgICAgLy8gaWYgdGhlIGluc2VydGVkIHNsb3QgaGFzIHYtaWZcbiAgICAgICAgLy8gaW5qZWN0IGZhbGxiYWNrIGNvbnRlbnQgYXMgdGhlIHYtZWxzZVxuICAgICAgICB2YXIgZWxzZUJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbiAgICAgICAgZWxzZUJsb2NrLnNldEF0dHJpYnV0ZSgndi1lbHNlJywgJycpO1xuICAgICAgICBlbHNlQmxvY2suaW5uZXJIVE1MID0gdGhpcy5lbC5pbm5lckhUTUw7XG4gICAgICAgIC8vIHRoZSBlbHNlIGJsb2NrIHNob3VsZCBiZSBjb21waWxlZCBpbiBjaGlsZCBzY29wZVxuICAgICAgICBlbHNlQmxvY2suX2NvbnRleHQgPSB0aGlzLnZtO1xuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGVsc2VCbG9jayk7XG4gICAgICB9XG4gICAgICB2YXIgc2NvcGUgPSBob3N0ID8gaG9zdC5fc2NvcGUgOiB0aGlzLl9zY29wZTtcbiAgICAgIHRoaXMudW5saW5rID0gY29udGV4dC4kY29tcGlsZShjb250ZW50LCBob3N0LCBzY29wZSwgdGhpcy5fZnJhZyk7XG4gICAgfVxuICAgIGlmIChjb250ZW50KSB7XG4gICAgICByZXBsYWNlKHRoaXMuZWwsIGNvbnRlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmUodGhpcy5lbCk7XG4gICAgfVxuICB9LFxuXG4gIGZhbGxiYWNrOiBmdW5jdGlvbiBmYWxsYmFjaygpIHtcbiAgICB0aGlzLmNvbXBpbGUoZXh0cmFjdENvbnRlbnQodGhpcy5lbCwgdHJ1ZSksIHRoaXMudm0pO1xuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIGlmICh0aGlzLnVubGluaykge1xuICAgICAgdGhpcy51bmxpbmsoKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBwYXJ0aWFsID0ge1xuXG4gIHByaW9yaXR5OiBQQVJUSUFMLFxuXG4gIHBhcmFtczogWyduYW1lJ10sXG5cbiAgLy8gd2F0Y2ggY2hhbmdlcyB0byBuYW1lIGZvciBkeW5hbWljIHBhcnRpYWxzXG4gIHBhcmFtV2F0Y2hlcnM6IHtcbiAgICBuYW1lOiBmdW5jdGlvbiBuYW1lKHZhbHVlKSB7XG4gICAgICB2SWYucmVtb3ZlLmNhbGwodGhpcyk7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5pbnNlcnQodmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LXBhcnRpYWwnKTtcbiAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcbiAgICB0aGlzLmluc2VydCh0aGlzLnBhcmFtcy5uYW1lKTtcbiAgfSxcblxuICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydChpZCkge1xuICAgIHZhciBwYXJ0aWFsID0gcmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICdwYXJ0aWFscycsIGlkLCB0cnVlKTtcbiAgICBpZiAocGFydGlhbCkge1xuICAgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCBwYXJ0aWFsKTtcbiAgICAgIHZJZi5pbnNlcnQuY2FsbCh0aGlzKTtcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgaWYgKHRoaXMuZnJhZykge1xuICAgICAgdGhpcy5mcmFnLmRlc3Ryb3koKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBlbGVtZW50RGlyZWN0aXZlcyA9IHtcbiAgc2xvdDogc2xvdCxcbiAgcGFydGlhbDogcGFydGlhbFxufTtcblxudmFyIGNvbnZlcnRBcnJheSA9IHZGb3IuX3Bvc3RQcm9jZXNzO1xuXG4vKipcbiAqIExpbWl0IGZpbHRlciBmb3IgYXJyYXlzXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgKERlY2ltYWwgZXhwZWN0ZWQpXG4gKi9cblxuZnVuY3Rpb24gbGltaXRCeShhcnIsIG4sIG9mZnNldCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPyBwYXJzZUludChvZmZzZXQsIDEwKSA6IDA7XG4gIG4gPSB0b051bWJlcihuKTtcbiAgcmV0dXJuIHR5cGVvZiBuID09PSAnbnVtYmVyJyA/IGFyci5zbGljZShvZmZzZXQsIG9mZnNldCArIG4pIDogYXJyO1xufVxuXG4vKipcbiAqIEZpbHRlciBmaWx0ZXIgZm9yIGFycmF5c1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcbiAqIEBwYXJhbSB7U3RyaW5nfSBbZGVsaW1pdGVyXVxuICogQHBhcmFtIHtTdHJpbmd9IC4uLmRhdGFLZXlzXG4gKi9cblxuZnVuY3Rpb24gZmlsdGVyQnkoYXJyLCBzZWFyY2gsIGRlbGltaXRlcikge1xuICBhcnIgPSBjb252ZXJ0QXJyYXkoYXJyKTtcbiAgaWYgKHNlYXJjaCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuICBpZiAodHlwZW9mIHNlYXJjaCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBhcnIuZmlsdGVyKHNlYXJjaCk7XG4gIH1cbiAgLy8gY2FzdCB0byBsb3dlcmNhc2Ugc3RyaW5nXG4gIHNlYXJjaCA9ICgnJyArIHNlYXJjaCkudG9Mb3dlckNhc2UoKTtcbiAgLy8gYWxsb3cgb3B0aW9uYWwgYGluYCBkZWxpbWl0ZXJcbiAgLy8gYmVjYXVzZSB3aHkgbm90XG4gIHZhciBuID0gZGVsaW1pdGVyID09PSAnaW4nID8gMyA6IDI7XG4gIC8vIGV4dHJhY3QgYW5kIGZsYXR0ZW4ga2V5c1xuICB2YXIga2V5cyA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIHRvQXJyYXkoYXJndW1lbnRzLCBuKSk7XG4gIHZhciByZXMgPSBbXTtcbiAgdmFyIGl0ZW0sIGtleSwgdmFsLCBqO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGFyci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBpdGVtID0gYXJyW2ldO1xuICAgIHZhbCA9IGl0ZW0gJiYgaXRlbS4kdmFsdWUgfHwgaXRlbTtcbiAgICBqID0ga2V5cy5sZW5ndGg7XG4gICAgaWYgKGopIHtcbiAgICAgIHdoaWxlIChqLS0pIHtcbiAgICAgICAga2V5ID0ga2V5c1tqXTtcbiAgICAgICAgaWYgKGtleSA9PT0gJyRrZXknICYmIGNvbnRhaW5zKGl0ZW0uJGtleSwgc2VhcmNoKSB8fCBjb250YWlucyhnZXRQYXRoKHZhbCwga2V5KSwgc2VhcmNoKSkge1xuICAgICAgICAgIHJlcy5wdXNoKGl0ZW0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjb250YWlucyhpdGVtLCBzZWFyY2gpKSB7XG4gICAgICByZXMucHVzaChpdGVtKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBGaWx0ZXIgZmlsdGVyIGZvciBhcnJheXNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xBcnJheTxTdHJpbmc+fEZ1bmN0aW9ufSAuLi5zb3J0S2V5c1xuICogQHBhcmFtIHtOdW1iZXJ9IFtvcmRlcl1cbiAqL1xuXG5mdW5jdGlvbiBvcmRlckJ5KGFycikge1xuICB2YXIgY29tcGFyYXRvciA9IG51bGw7XG4gIHZhciBzb3J0S2V5cyA9IHVuZGVmaW5lZDtcbiAgYXJyID0gY29udmVydEFycmF5KGFycik7XG5cbiAgLy8gZGV0ZXJtaW5lIG9yZGVyIChsYXN0IGFyZ3VtZW50KVxuICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcbiAgdmFyIG9yZGVyID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuICBpZiAodHlwZW9mIG9yZGVyID09PSAnbnVtYmVyJykge1xuICAgIG9yZGVyID0gb3JkZXIgPCAwID8gLTEgOiAxO1xuICAgIGFyZ3MgPSBhcmdzLmxlbmd0aCA+IDEgPyBhcmdzLnNsaWNlKDAsIC0xKSA6IGFyZ3M7XG4gIH0gZWxzZSB7XG4gICAgb3JkZXIgPSAxO1xuICB9XG5cbiAgLy8gZGV0ZXJtaW5lIHNvcnRLZXlzICYgY29tcGFyYXRvclxuICB2YXIgZmlyc3RBcmcgPSBhcmdzWzBdO1xuICBpZiAoIWZpcnN0QXJnKSB7XG4gICAgcmV0dXJuIGFycjtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZmlyc3RBcmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBjdXN0b20gY29tcGFyYXRvclxuICAgIGNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgcmV0dXJuIGZpcnN0QXJnKGEsIGIpICogb3JkZXI7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICAvLyBzdHJpbmcga2V5cy4gZmxhdHRlbiBmaXJzdFxuICAgIHNvcnRLZXlzID0gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgYXJncyk7XG4gICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uIChhLCBiLCBpKSB7XG4gICAgICBpID0gaSB8fCAwO1xuICAgICAgcmV0dXJuIGkgPj0gc29ydEtleXMubGVuZ3RoIC0gMSA/IGJhc2VDb21wYXJlKGEsIGIsIGkpIDogYmFzZUNvbXBhcmUoYSwgYiwgaSkgfHwgY29tcGFyYXRvcihhLCBiLCBpICsgMSk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJhc2VDb21wYXJlKGEsIGIsIHNvcnRLZXlJbmRleCkge1xuICAgIHZhciBzb3J0S2V5ID0gc29ydEtleXNbc29ydEtleUluZGV4XTtcbiAgICBpZiAoc29ydEtleSkge1xuICAgICAgaWYgKHNvcnRLZXkgIT09ICcka2V5Jykge1xuICAgICAgICBpZiAoaXNPYmplY3QoYSkgJiYgJyR2YWx1ZScgaW4gYSkgYSA9IGEuJHZhbHVlO1xuICAgICAgICBpZiAoaXNPYmplY3QoYikgJiYgJyR2YWx1ZScgaW4gYikgYiA9IGIuJHZhbHVlO1xuICAgICAgfVxuICAgICAgYSA9IGlzT2JqZWN0KGEpID8gZ2V0UGF0aChhLCBzb3J0S2V5KSA6IGE7XG4gICAgICBiID0gaXNPYmplY3QoYikgPyBnZXRQYXRoKGIsIHNvcnRLZXkpIDogYjtcbiAgICB9XG4gICAgcmV0dXJuIGEgPT09IGIgPyAwIDogYSA+IGIgPyBvcmRlciA6IC1vcmRlcjtcbiAgfVxuXG4gIC8vIHNvcnQgb24gYSBjb3B5IHRvIGF2b2lkIG11dGF0aW5nIG9yaWdpbmFsIGFycmF5XG4gIHJldHVybiBhcnIuc2xpY2UoKS5zb3J0KGNvbXBhcmF0b3IpO1xufVxuXG4vKipcbiAqIFN0cmluZyBjb250YWluIGhlbHBlclxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoXG4gKi9cblxuZnVuY3Rpb24gY29udGFpbnModmFsLCBzZWFyY2gpIHtcbiAgdmFyIGk7XG4gIGlmIChpc1BsYWluT2JqZWN0KHZhbCkpIHtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7XG4gICAgaSA9IGtleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGlmIChjb250YWlucyh2YWxba2V5c1tpXV0sIHNlYXJjaCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsKSkge1xuICAgIGkgPSB2YWwubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGlmIChjb250YWlucyh2YWxbaV0sIHNlYXJjaCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKHZhbCAhPSBudWxsKSB7XG4gICAgcmV0dXJuIHZhbC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzZWFyY2gpID4gLTE7XG4gIH1cbn1cblxudmFyIGRpZ2l0c1JFID0gLyhcXGR7M30pKD89XFxkKS9nO1xuXG4vLyBhc3NldCBjb2xsZWN0aW9ucyBtdXN0IGJlIGEgcGxhaW4gb2JqZWN0LlxudmFyIGZpbHRlcnMgPSB7XG5cbiAgb3JkZXJCeTogb3JkZXJCeSxcbiAgZmlsdGVyQnk6IGZpbHRlckJ5LFxuICBsaW1pdEJ5OiBsaW1pdEJ5LFxuXG4gIC8qKlxuICAgKiBTdHJpbmdpZnkgdmFsdWUuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRlbnRcbiAgICovXG5cbiAganNvbjoge1xuICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQodmFsdWUsIGluZGVudCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyB2YWx1ZSA6IEpTT04uc3RyaW5naWZ5KHZhbHVlLCBudWxsLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGluZGVudCA6IDIpO1xuICAgIH0sXG4gICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKHZhbHVlKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh2YWx1ZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqICdhYmMnID0+ICdBYmMnXG4gICAqL1xuXG4gIGNhcGl0YWxpemU6IGZ1bmN0aW9uIGNhcGl0YWxpemUodmFsdWUpIHtcbiAgICBpZiAoIXZhbHVlICYmIHZhbHVlICE9PSAwKSByZXR1cm4gJyc7XG4gICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgIHJldHVybiB2YWx1ZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHZhbHVlLnNsaWNlKDEpO1xuICB9LFxuXG4gIC8qKlxuICAgKiAnYWJjJyA9PiAnQUJDJ1xuICAgKi9cblxuICB1cHBlcmNhc2U6IGZ1bmN0aW9uIHVwcGVyY2FzZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSB8fCB2YWx1ZSA9PT0gMCA/IHZhbHVlLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKSA6ICcnO1xuICB9LFxuXG4gIC8qKlxuICAgKiAnQWJDJyA9PiAnYWJjJ1xuICAgKi9cblxuICBsb3dlcmNhc2U6IGZ1bmN0aW9uIGxvd2VyY2FzZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSB8fCB2YWx1ZSA9PT0gMCA/IHZhbHVlLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSA6ICcnO1xuICB9LFxuXG4gIC8qKlxuICAgKiAxMjM0NSA9PiAkMTIsMzQ1LjAwXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzaWduXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkZWNpbWFscyBEZWNpbWFsIHBsYWNlc1xuICAgKi9cblxuICBjdXJyZW5jeTogZnVuY3Rpb24gY3VycmVuY3kodmFsdWUsIF9jdXJyZW5jeSwgZGVjaW1hbHMpIHtcbiAgICB2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpO1xuICAgIGlmICghaXNGaW5pdGUodmFsdWUpIHx8ICF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkgcmV0dXJuICcnO1xuICAgIF9jdXJyZW5jeSA9IF9jdXJyZW5jeSAhPSBudWxsID8gX2N1cnJlbmN5IDogJyQnO1xuICAgIGRlY2ltYWxzID0gZGVjaW1hbHMgIT0gbnVsbCA/IGRlY2ltYWxzIDogMjtcbiAgICB2YXIgc3RyaW5naWZpZWQgPSBNYXRoLmFicyh2YWx1ZSkudG9GaXhlZChkZWNpbWFscyk7XG4gICAgdmFyIF9pbnQgPSBkZWNpbWFscyA/IHN0cmluZ2lmaWVkLnNsaWNlKDAsIC0xIC0gZGVjaW1hbHMpIDogc3RyaW5naWZpZWQ7XG4gICAgdmFyIGkgPSBfaW50Lmxlbmd0aCAlIDM7XG4gICAgdmFyIGhlYWQgPSBpID4gMCA/IF9pbnQuc2xpY2UoMCwgaSkgKyAoX2ludC5sZW5ndGggPiAzID8gJywnIDogJycpIDogJyc7XG4gICAgdmFyIF9mbG9hdCA9IGRlY2ltYWxzID8gc3RyaW5naWZpZWQuc2xpY2UoLTEgLSBkZWNpbWFscykgOiAnJztcbiAgICB2YXIgc2lnbiA9IHZhbHVlIDwgMCA/ICctJyA6ICcnO1xuICAgIHJldHVybiBzaWduICsgX2N1cnJlbmN5ICsgaGVhZCArIF9pbnQuc2xpY2UoaSkucmVwbGFjZShkaWdpdHNSRSwgJyQxLCcpICsgX2Zsb2F0O1xuICB9LFxuXG4gIC8qKlxuICAgKiAnaXRlbScgPT4gJ2l0ZW1zJ1xuICAgKlxuICAgKiBAcGFyYW1zXG4gICAqICBhbiBhcnJheSBvZiBzdHJpbmdzIGNvcnJlc3BvbmRpbmcgdG9cbiAgICogIHRoZSBzaW5nbGUsIGRvdWJsZSwgdHJpcGxlIC4uLiBmb3JtcyBvZiB0aGUgd29yZCB0b1xuICAgKiAgYmUgcGx1cmFsaXplZC4gV2hlbiB0aGUgbnVtYmVyIHRvIGJlIHBsdXJhbGl6ZWRcbiAgICogIGV4Y2VlZHMgdGhlIGxlbmd0aCBvZiB0aGUgYXJncywgaXQgd2lsbCB1c2UgdGhlIGxhc3RcbiAgICogIGVudHJ5IGluIHRoZSBhcnJheS5cbiAgICpcbiAgICogIGUuZy4gWydzaW5nbGUnLCAnZG91YmxlJywgJ3RyaXBsZScsICdtdWx0aXBsZSddXG4gICAqL1xuXG4gIHBsdXJhbGl6ZTogZnVuY3Rpb24gcGx1cmFsaXplKHZhbHVlKSB7XG4gICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG4gICAgdmFyIGxlbmd0aCA9IGFyZ3MubGVuZ3RoO1xuICAgIGlmIChsZW5ndGggPiAxKSB7XG4gICAgICB2YXIgaW5kZXggPSB2YWx1ZSAlIDEwIC0gMTtcbiAgICAgIHJldHVybiBpbmRleCBpbiBhcmdzID8gYXJnc1tpbmRleF0gOiBhcmdzW2xlbmd0aCAtIDFdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYXJnc1swXSArICh2YWx1ZSA9PT0gMSA/ICcnIDogJ3MnKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIERlYm91bmNlIGEgaGFuZGxlciBmdW5jdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuICAgKiBAcGFyYW0ge051bWJlcn0gZGVsYXkgPSAzMDBcbiAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAqL1xuXG4gIGRlYm91bmNlOiBmdW5jdGlvbiBkZWJvdW5jZShoYW5kbGVyLCBkZWxheSkge1xuICAgIGlmICghaGFuZGxlcikgcmV0dXJuO1xuICAgIGlmICghZGVsYXkpIHtcbiAgICAgIGRlbGF5ID0gMzAwO1xuICAgIH1cbiAgICByZXR1cm4gX2RlYm91bmNlKGhhbmRsZXIsIGRlbGF5KTtcbiAgfVxufTtcblxuZnVuY3Rpb24gaW5zdGFsbEdsb2JhbEFQSSAoVnVlKSB7XG4gIC8qKlxuICAgKiBWdWUgYW5kIGV2ZXJ5IGNvbnN0cnVjdG9yIHRoYXQgZXh0ZW5kcyBWdWUgaGFzIGFuXG4gICAqIGFzc29jaWF0ZWQgb3B0aW9ucyBvYmplY3QsIHdoaWNoIGNhbiBiZSBhY2Nlc3NlZCBkdXJpbmdcbiAgICogY29tcGlsYXRpb24gc3RlcHMgYXMgYHRoaXMuY29uc3RydWN0b3Iub3B0aW9uc2AuXG4gICAqXG4gICAqIFRoZXNlIGNhbiBiZSBzZWVuIGFzIHRoZSBkZWZhdWx0IG9wdGlvbnMgb2YgZXZlcnlcbiAgICogVnVlIGluc3RhbmNlLlxuICAgKi9cblxuICBWdWUub3B0aW9ucyA9IHtcbiAgICBkaXJlY3RpdmVzOiBkaXJlY3RpdmVzLFxuICAgIGVsZW1lbnREaXJlY3RpdmVzOiBlbGVtZW50RGlyZWN0aXZlcyxcbiAgICBmaWx0ZXJzOiBmaWx0ZXJzLFxuICAgIHRyYW5zaXRpb25zOiB7fSxcbiAgICBjb21wb25lbnRzOiB7fSxcbiAgICBwYXJ0aWFsczoge30sXG4gICAgcmVwbGFjZTogdHJ1ZVxuICB9O1xuXG4gIC8qKlxuICAgKiBFeHBvc2UgdXNlZnVsIGludGVybmFsc1xuICAgKi9cblxuICBWdWUudXRpbCA9IHV0aWw7XG4gIFZ1ZS5jb25maWcgPSBjb25maWc7XG4gIFZ1ZS5zZXQgPSBzZXQ7XG4gIFZ1ZVsnZGVsZXRlJ10gPSBkZWw7XG4gIFZ1ZS5uZXh0VGljayA9IG5leHRUaWNrO1xuXG4gIC8qKlxuICAgKiBUaGUgZm9sbG93aW5nIGFyZSBleHBvc2VkIGZvciBhZHZhbmNlZCB1c2FnZSAvIHBsdWdpbnNcbiAgICovXG5cbiAgVnVlLmNvbXBpbGVyID0gY29tcGlsZXI7XG4gIFZ1ZS5GcmFnbWVudEZhY3RvcnkgPSBGcmFnbWVudEZhY3Rvcnk7XG4gIFZ1ZS5pbnRlcm5hbERpcmVjdGl2ZXMgPSBpbnRlcm5hbERpcmVjdGl2ZXM7XG4gIFZ1ZS5wYXJzZXJzID0ge1xuICAgIHBhdGg6IHBhdGgsXG4gICAgdGV4dDogdGV4dCxcbiAgICB0ZW1wbGF0ZTogdGVtcGxhdGUsXG4gICAgZGlyZWN0aXZlOiBkaXJlY3RpdmUsXG4gICAgZXhwcmVzc2lvbjogZXhwcmVzc2lvblxuICB9O1xuXG4gIC8qKlxuICAgKiBFYWNoIGluc3RhbmNlIGNvbnN0cnVjdG9yLCBpbmNsdWRpbmcgVnVlLCBoYXMgYSB1bmlxdWVcbiAgICogY2lkLiBUaGlzIGVuYWJsZXMgdXMgdG8gY3JlYXRlIHdyYXBwZWQgXCJjaGlsZFxuICAgKiBjb25zdHJ1Y3RvcnNcIiBmb3IgcHJvdG90eXBhbCBpbmhlcml0YW5jZSBhbmQgY2FjaGUgdGhlbS5cbiAgICovXG5cbiAgVnVlLmNpZCA9IDA7XG4gIHZhciBjaWQgPSAxO1xuXG4gIC8qKlxuICAgKiBDbGFzcyBpbmhlcml0YW5jZVxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZXh0ZW5kT3B0aW9uc1xuICAgKi9cblxuICBWdWUuZXh0ZW5kID0gZnVuY3Rpb24gKGV4dGVuZE9wdGlvbnMpIHtcbiAgICBleHRlbmRPcHRpb25zID0gZXh0ZW5kT3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgU3VwZXIgPSB0aGlzO1xuICAgIHZhciBpc0ZpcnN0RXh0ZW5kID0gU3VwZXIuY2lkID09PSAwO1xuICAgIGlmIChpc0ZpcnN0RXh0ZW5kICYmIGV4dGVuZE9wdGlvbnMuX0N0b3IpIHtcbiAgICAgIHJldHVybiBleHRlbmRPcHRpb25zLl9DdG9yO1xuICAgIH1cbiAgICB2YXIgbmFtZSA9IGV4dGVuZE9wdGlvbnMubmFtZSB8fCBTdXBlci5vcHRpb25zLm5hbWU7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGlmICghL15bYS16QS1aXVtcXHctXSokLy50ZXN0KG5hbWUpKSB7XG4gICAgICAgIHdhcm4oJ0ludmFsaWQgY29tcG9uZW50IG5hbWU6IFwiJyArIG5hbWUgKyAnXCIuIENvbXBvbmVudCBuYW1lcyAnICsgJ2NhbiBvbmx5IGNvbnRhaW4gYWxwaGFudW1lcmljIGNoYXJhY2F0ZXJzIGFuZCB0aGUgaHlwaGVuLicpO1xuICAgICAgICBuYW1lID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIFN1YiA9IGNyZWF0ZUNsYXNzKG5hbWUgfHwgJ1Z1ZUNvbXBvbmVudCcpO1xuICAgIFN1Yi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN1cGVyLnByb3RvdHlwZSk7XG4gICAgU3ViLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN1YjtcbiAgICBTdWIuY2lkID0gY2lkKys7XG4gICAgU3ViLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoU3VwZXIub3B0aW9ucywgZXh0ZW5kT3B0aW9ucyk7XG4gICAgU3ViWydzdXBlciddID0gU3VwZXI7XG4gICAgLy8gYWxsb3cgZnVydGhlciBleHRlbnNpb25cbiAgICBTdWIuZXh0ZW5kID0gU3VwZXIuZXh0ZW5kO1xuICAgIC8vIGNyZWF0ZSBhc3NldCByZWdpc3RlcnMsIHNvIGV4dGVuZGVkIGNsYXNzZXNcbiAgICAvLyBjYW4gaGF2ZSB0aGVpciBwcml2YXRlIGFzc2V0cyB0b28uXG4gICAgY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgIFN1Ylt0eXBlXSA9IFN1cGVyW3R5cGVdO1xuICAgIH0pO1xuICAgIC8vIGVuYWJsZSByZWN1cnNpdmUgc2VsZi1sb29rdXBcbiAgICBpZiAobmFtZSkge1xuICAgICAgU3ViLm9wdGlvbnMuY29tcG9uZW50c1tuYW1lXSA9IFN1YjtcbiAgICB9XG4gICAgLy8gY2FjaGUgY29uc3RydWN0b3JcbiAgICBpZiAoaXNGaXJzdEV4dGVuZCkge1xuICAgICAgZXh0ZW5kT3B0aW9ucy5fQ3RvciA9IFN1YjtcbiAgICB9XG4gICAgcmV0dXJuIFN1YjtcbiAgfTtcblxuICAvKipcbiAgICogQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBzdWItY2xhc3MgY29uc3RydWN0b3Igd2l0aCB0aGVcbiAgICogZ2l2ZW4gbmFtZS4gVGhpcyBnaXZlcyB1cyBtdWNoIG5pY2VyIG91dHB1dCB3aGVuXG4gICAqIGxvZ2dpbmcgaW5zdGFuY2VzIGluIHRoZSBjb25zb2xlLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gY3JlYXRlQ2xhc3MobmFtZSkge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jICovXG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbigncmV0dXJuIGZ1bmN0aW9uICcgKyBjbGFzc2lmeShuYW1lKSArICcgKG9wdGlvbnMpIHsgdGhpcy5faW5pdChvcHRpb25zKSB9JykoKTtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLW5ldy1mdW5jICovXG4gIH1cblxuICAvKipcbiAgICogUGx1Z2luIHN5c3RlbVxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gcGx1Z2luXG4gICAqL1xuXG4gIFZ1ZS51c2UgPSBmdW5jdGlvbiAocGx1Z2luKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKHBsdWdpbi5pbnN0YWxsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gYWRkaXRpb25hbCBwYXJhbWV0ZXJzXG4gICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG4gICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuICAgIGlmICh0eXBlb2YgcGx1Z2luLmluc3RhbGwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHBsdWdpbi5pbnN0YWxsLmFwcGx5KHBsdWdpbiwgYXJncyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBsdWdpbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICB9XG4gICAgcGx1Z2luLmluc3RhbGxlZCA9IHRydWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFwcGx5IGEgZ2xvYmFsIG1peGluIGJ5IG1lcmdpbmcgaXQgaW50byB0aGUgZGVmYXVsdFxuICAgKiBvcHRpb25zLlxuICAgKi9cblxuICBWdWUubWl4aW4gPSBmdW5jdGlvbiAobWl4aW4pIHtcbiAgICBWdWUub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhWdWUub3B0aW9ucywgbWl4aW4pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYXNzZXQgcmVnaXN0cmF0aW9uIG1ldGhvZHMgd2l0aCB0aGUgZm9sbG93aW5nXG4gICAqIHNpZ25hdHVyZTpcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gICAqIEBwYXJhbSB7Kn0gZGVmaW5pdGlvblxuICAgKi9cblxuICBjb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgIFZ1ZVt0eXBlXSA9IGZ1bmN0aW9uIChpZCwgZGVmaW5pdGlvbikge1xuICAgICAgaWYgKCFkZWZpbml0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgaWYgKHR5cGUgPT09ICdjb21wb25lbnQnICYmIChjb21tb25UYWdSRS50ZXN0KGlkKSB8fCByZXNlcnZlZFRhZ1JFLnRlc3QoaWQpKSkge1xuICAgICAgICAgICAgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCAnICsgJ2lkOiAnICsgaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgaXNQbGFpbk9iamVjdChkZWZpbml0aW9uKSkge1xuICAgICAgICAgIGlmICghZGVmaW5pdGlvbi5uYW1lKSB7XG4gICAgICAgICAgICBkZWZpbml0aW9uLm5hbWUgPSBpZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmaW5pdGlvbiA9IFZ1ZS5leHRlbmQoZGVmaW5pdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXSA9IGRlZmluaXRpb247XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9uO1xuICAgICAgfVxuICAgIH07XG4gIH0pO1xuXG4gIC8vIGV4cG9zZSBpbnRlcm5hbCB0cmFuc2l0aW9uIEFQSVxuICBleHRlbmQoVnVlLnRyYW5zaXRpb24sIHRyYW5zaXRpb24pO1xufVxuXG5pbnN0YWxsR2xvYmFsQVBJKFZ1ZSk7XG5cblZ1ZS52ZXJzaW9uID0gJzEuMC4yNic7XG5cbi8vIGRldnRvb2xzIGdsb2JhbCBob29rXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gIGlmIChjb25maWcuZGV2dG9vbHMpIHtcbiAgICBpZiAoZGV2dG9vbHMpIHtcbiAgICAgIGRldnRvb2xzLmVtaXQoJ2luaXQnLCBWdWUpO1xuICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBpbkJyb3dzZXIgJiYgL0Nocm9tZVxcL1xcZCsvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG4gICAgICBjb25zb2xlLmxvZygnRG93bmxvYWQgdGhlIFZ1ZSBEZXZ0b29scyBmb3IgYSBiZXR0ZXIgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZTpcXG4nICsgJ2h0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtZGV2dG9vbHMnKTtcbiAgICB9XG4gIH1cbn0sIDApO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZ1ZTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUvZGlzdC92dWUuY29tbW9uLmpzXG4gKiogbW9kdWxlIGlkID0gMjE3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJkZWZpbmUgY2Fubm90IGJlIHVzZWQgaW5kaXJlY3RcIik7IH07XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogKHdlYnBhY2spL2J1aWxkaW4vYW1kLWRlZmluZS5qc1xuICoqIG1vZHVsZSBpZCA9IDIxOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcclxuXHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xyXG5cdFx0bW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307XHJcblx0XHRtb2R1bGUucGF0aHMgPSBbXTtcclxuXHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxyXG5cdFx0bW9kdWxlLmNoaWxkcmVuID0gW107XHJcblx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcclxuXHR9XHJcblx0cmV0dXJuIG1vZHVsZTtcclxufVxyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqICh3ZWJwYWNrKS9idWlsZGluL21vZHVsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDIxOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==