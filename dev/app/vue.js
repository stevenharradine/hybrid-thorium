!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n=window.webpackJsonp;window.webpackJsonp=function(i,r){for(var s,a,c=0,l=[];c<i.length;c++)a=i[c],o[a]&&l.push.apply(l,o[a]),o[a]=0;for(s in r)e[s]=r[s];for(n&&n(i,r);l.length;)l.shift().call(null,t)};var i={},o={0:0,1:0,2:0};return t.e=function(e,n){if(0===o[e])return n.call(null,t);if(void 0!==o[e])o[e].push(n);else{o[e]=[n];var i=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0,r.src=t.p+""+e+".app.js",i.appendChild(r)}},t.m=e,t.c=i,t.p="/hybrid-thorium/dev/app/",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var o=n(43),r=i(o),s=n(203),a=i(s),c=n(65),l=i(c),h=n(67),u=i(h),f=n(161),p=i(f),d=n(183),v=i(d),_=n(184),y=i(_);r["default"].config.debug=!0,r["default"].use(a["default"]),r["default"].use(u["default"]);var b=new a["default"],m=r["default"].extend({components:{SideNav:v["default"],SiteHeader:y["default"]},data:function(){return{ligerEndPoint:"https://api.cms.telus.com/legals",ligerApplicationKey:"b9738d67b89dfc782746d4a9cf4a1093"}}});b.map(l["default"]),b.afterEach(function(){setTimeout(function(){p["default"].highlightAll()},0)}),b.redirect({"*":"/get-started"}),b.start(m,"#app-main")},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=u[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(c(i.parts[r],t))}else{for(var s=[],r=0;r<i.parts.length;r++)s.push(c(i.parts[r],t));u[i.id]={id:i.id,refs:1,parts:s}}}}function o(e){for(var t=[],n={},i=0;i<e.length;i++){var o=e[i],r=o[0],s=o[1],a=o[2],c=o[3],l={css:s,media:a,sourceMap:c};n[r]?n[r].parts.push(l):t.push(n[r]={id:r,parts:[l]})}return t}function r(e,t){var n=d(),i=y[y.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),y.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function s(e){e.parentNode.removeChild(e);var t=y.indexOf(e);t>=0&&y.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",r(e,t),t}function c(e,t){var n,i,o;if(t.singleton){var r=_++;n=v||(v=a(t)),i=l.bind(null,n,r,!1),o=l.bind(null,n,r,!0)}else n=a(t),i=h.bind(null,n),o=function(){s(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}function l(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,o);else{var r=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function h(e,t){var n=t.css,i=t.media,o=t.sourceMap;if(i&&e.setAttribute("media",i),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var u={},f=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},p=f(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),d=f(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,_=0,y=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=p()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=o(e);return i(n,t),function(e){for(var r=[],s=0;s<n.length;s++){var a=n[s],c=u[a.id];c.refs--,r.push(c)}if(e){var l=o(e);i(l,t)}for(var s=0;s<r.length;s++){var c=r[s];if(0===c.refs){for(var h=0;h<c.parts.length;h++)c.parts[h]();delete u[c.id]}}}};var b=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){(function(t){var i=n(108),o=i("object"==typeof t&&t),r=i("object"==typeof self&&self),s=i("object"==typeof this&&this),a=o||r||s||Function("return this")();e.exports=a}).call(t,function(){return this}())},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var i,o;n(204),i=n(44),o=n(162),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){function i(e,t){var n=r(e,t);return o(n)?n:void 0}var o=n(100),r=n(116);e.exports=i},function(e,t){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(127),r=n(128),s=n(129),a=n(130),c=n(131);i.prototype.clear=o,i.prototype["delete"]=r,i.prototype.get=s,i.prototype.has=a,i.prototype.set=c,e.exports=i},function(e,t,n){function i(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1}var o=n(148);e.exports=i},function(e,t,n){function i(e,t){var n=e.__data__;return o(t)?n["string"==typeof t?"string":"hash"]:n.map}var o=n(124);e.exports=i},function(e,t,n){function i(e,t){if(o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!r(e))||(a.test(e)||!s.test(e)||null!=t&&e in Object(t))}var o=n(4),r=n(16),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=i},function(e,t,n){var i=n(6),o=i(Object,"create");e.exports=o},function(e,t,n){function i(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}var o=n(16),r=1/0;e.exports=i},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}var i=9007199254740991;e.exports=n},function(e,t,n){function i(e){return"symbol"==typeof e||o(e)&&a.call(e)==r}var o=n(8),r="[object Symbol]",s=Object.prototype,a=s.toString;e.exports=i},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(132),r=n(133),s=n(134),a=n(135),c=n(136);i.prototype.clear=o,i.prototype["delete"]=r,i.prototype.get=s,i.prototype.has=a,i.prototype.set=c,e.exports=i},function(e,t,n){function i(e){var t=o(e)?c.call(e):"";return t==r||t==s}var o=n(7),r="[object Function]",s="[object GeneratorFunction]",a=Object.prototype,c=a.toString;e.exports=i},function(e,t){function n(){u&&l&&(u=!1,l.length?h=l.concat(h):f=-1,h.length&&i())}function i(){if(!u){var e=s(n);u=!0;for(var t=h.length;t;){for(l=h,h=[];++f<t;)l&&l[f].run();f=-1,t=h.length}l=null,u=!1,a(e)}}function o(e,t){this.fun=e,this.array=t}function r(){}var s,a,c=e.exports={};!function(){try{s=setTimeout}catch(e){s=function(){throw new Error("setTimeout is not defined")}}try{a=clearTimeout}catch(e){a=function(){throw new Error("clearTimeout is not defined")}}}();var l,h=[],u=!1,f=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new o(e,t)),1!==h.length||u||s(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=r,c.addListener=r,c.once=r,c.off=r,c.removeListener=r,c.removeAllListeners=r,c.emit=r,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(36),r=i(o);t["default"]={update:function(e){var t=this;e===!0&&(0,r["default"])(function(){t.el.tabIndex=0,t.el.focus()})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(68),r=i(o),s=n(69),a=i(s);t["default"]=[r["default"],a["default"]]},function(e,t,n){var i=n(6),o=n(3),r=i(o,"Map");e.exports=r},function(e,t,n){function i(e){this.__data__=new o(e)}var o=n(9),r=n(141),s=n(142),a=n(143),c=n(144),l=n(145);i.prototype.clear=r,i.prototype["delete"]=s,i.prototype.get=a,i.prototype.has=c,i.prototype.set=l,e.exports=i},function(e,t,n){var i=n(3),o=i.Symbol;e.exports=o},function(e,t,n){function i(e,t){t=r(t,e)?[t]:o(t);for(var n=0,i=t.length;null!=e&&n<i;)e=e[s(t[n++])];return n&&n==i?e:void 0}var o=n(29),r=n(12),s=n(14);e.exports=i},function(e,t,n){function i(e,t){return null!=e&&(s.call(e,t)||"object"==typeof e&&t in e&&null===o(e))}var o=n(114),r=Object.prototype,s=r.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t,n,a,c){return e===t||(null==e||null==t||!r(e)&&!s(t)?e!==e&&t!==t:o(e,t,i,n,a,c))}var o=n(98),r=n(7),s=n(8);e.exports=i},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function i(e){return o(e)?e:r(e)}var o=n(4),r=n(146);e.exports=i},function(e,t,n){function i(e,t,n,i,c,l){var h=c&a,u=e.length,f=t.length;if(u!=f&&!(h&&f>u))return!1;var p=l.get(e);if(p)return p==t;var d=-1,v=!0,_=c&s?new o:void 0;for(l.set(e,t);++d<u;){var y=e[d],b=t[d];if(i)var m=h?i(b,y,d,t,e,l):i(y,b,d,e,t,l);if(void 0!==m){if(m)continue;v=!1;break}if(_){if(!r(t,function(e,t){if(!_.has(t)&&(y===e||n(y,e,i,c,l)))return _.add(t)})){v=!1;break}}else if(y!==b&&!n(y,b,i,c,l)){v=!1;break}}return l["delete"](e),v}var o=n(90),r=n(94),s=1,a=2;e.exports=i},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}e.exports=n},function(e,t){function n(e,t){return t=null==t?i:t,!!t&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){function i(e){return e===e&&!o(e)}var o=n(7);e.exports=i},function(e,t){function n(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}e.exports=n},function(e,t){function n(e){if(null!=e){try{return i.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var i=Function.prototype.toString;e.exports=n},function(e,t,n){var i=n(95),o=n(158),r=o(function(e,t){return i(e,1,t)});e.exports=r},function(e,t,n){function i(e){return o(e)&&a.call(e,"callee")&&(!l.call(e,"callee")||c.call(e)==r)}var o=n(153),r="[object Arguments]",s=Object.prototype,a=s.hasOwnProperty,c=s.toString,l=s.propertyIsEnumerable;e.exports=i},function(e,t,n){function i(e){return null!=e&&s(o(e))&&!r(e)}var o=n(112),r=n(18),s=n(15);e.exports=i},function(e,t,n){function i(e){return"string"==typeof e||!o(e)&&r(e)&&c.call(e)==s}var o=n(4),r=n(8),s="[object String]",a=Object.prototype,c=a.toString;e.exports=i},function(e,t,n){function i(e){var t=l(e);if(!t&&!a(e))return r(e);var n=s(e),i=!!n,h=n||[],u=h.length;for(var f in e)!o(e,f)||i&&("length"==f||c(f,u))||t&&"constructor"==f||h.push(f);return h}var o=n(26),r=n(102),s=n(123),a=n(38),c=n(32),l=n(126);e.exports=i},function(e,t,n){function i(e){var t=o(e),n=t%1;return t===t?n?t-n:t:0}var o=n(159);e.exports=i},function(e,t,n){function i(e){if("number"==typeof e)return e;if(s(e))return a;if(r(e)){var t=o(e.valueOf)?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var n=h.test(e);return n||u.test(e)?f(e.slice(2),n?2:8):l.test(e)?a:+e}var o=n(18),r=n(7),s=n(16),a=NaN,c=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,u=/^0o[0-7]+$/i,f=parseInt;e.exports=i},function(e,t,n){(function(t,n){/*!
	 * Vue.js v1.0.26
	 * (c) 2016 Evan You
	 * Released under the MIT License.
	 */
"use strict";function i(e,t,n){if(r(e,t))return void(e[t]=n);if(e._isVue)return void i(e._data,t,n);var o=e.__ob__;if(!o)return void(e[t]=n);if(o.convert(t,n),o.dep.notify(),o.vms)for(var s=o.vms.length;s--;){var a=o.vms[s];a._proxy(t),a._digest()}return n}function o(e,t){if(r(e,t)){delete e[t];var n=e.__ob__;if(!n)return void(e._isVue&&(delete e._data[t],e._digest()));if(n.dep.notify(),n.vms)for(var i=n.vms.length;i--;){var o=n.vms[i];o._unproxy(t),o._digest()}}}function r(e,t){return Sn.call(e,t)}function s(e){return Vn.test(e)}function a(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function c(e){return null==e?"":e.toString()}function l(e){if("string"!=typeof e)return e;var t=Number(e);return isNaN(t)?e:t}function h(e){return"true"===e||"false"!==e&&e}function u(e){var t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t!==n||34!==t&&39!==t?e:e.slice(1,-1)}function f(e){return e.replace(Pn,p)}function p(e,t){return t?t.toUpperCase():""}function d(e){return e.replace(Rn,"$1-$2").toLowerCase()}function v(e){return e.replace(Fn,p)}function _(e,t){return function(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}}function y(e,t){t=t||0;for(var n=e.length-t,i=new Array(n);n--;)i[n]=e[n+t];return i}function b(e,t){for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}function m(e){return null!==e&&"object"==typeof e}function g(e){return Mn.call(e)===In}function E(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}function w(e,t){var n,i,o,r,s,a=function c(){var a=Date.now()-r;a<t&&a>=0?n=setTimeout(c,t-a):(n=null,s=e.apply(o,i),n||(o=i=null))};return function(){return o=this,i=arguments,r=Date.now(),n||(n=setTimeout(a,t)),s}}function x(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function k(e){var t=function n(){if(!n.cancelled)return e.apply(this,arguments)};return t.cancel=function(){t.cancelled=!0},t}function C(e,t){return e==t||!(!m(e)||!m(t))&&JSON.stringify(e)===JSON.stringify(t)}function $(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap=Object.create(null)}function N(){var e,t=ai.slice(pi,ui).trim();if(t){e={};var n=t.match(gi);e.name=n[0],n.length>1&&(e.args=n.slice(1).map(O))}e&&(ci.filters=ci.filters||[]).push(e),pi=ui+1}function O(e){if(Ei.test(e))return{value:l(e),dynamic:!1};var t=u(e),n=t===e;return{value:n?e:t,dynamic:n}}function A(e){var t=mi.get(e);if(t)return t;for(ai=e,di=vi=!1,_i=yi=bi=0,pi=0,ci={},ui=0,fi=ai.length;ui<fi;ui++)if(hi=li,li=ai.charCodeAt(ui),di)39===li&&92!==hi&&(di=!di);else if(vi)34===li&&92!==hi&&(vi=!vi);else if(124===li&&124!==ai.charCodeAt(ui+1)&&124!==ai.charCodeAt(ui-1))null==ci.expression?(pi=ui+1,ci.expression=ai.slice(0,ui).trim()):N();else switch(li){case 34:vi=!0;break;case 39:di=!0;break;case 40:bi++;break;case 41:bi--;break;case 91:yi++;break;case 93:yi--;break;case 123:_i++;break;case 125:_i--}return null==ci.expression?ci.expression=ai.slice(0,ui).trim():0!==pi&&N(),mi.put(e,ci),ci}function T(e){return e.replace(xi,"\\$&")}function j(){var e=T(ji.delimiters[0]),t=T(ji.delimiters[1]),n=T(ji.unsafeDelimiters[0]),i=T(ji.unsafeDelimiters[1]);Ci=new RegExp(n+"((?:.|\\n)+?)"+i+"|"+e+"((?:.|\\n)+?)"+t,"g"),$i=new RegExp("^"+n+"((?:.|\\n)+?)"+i+"$"),ki=new $(1e3)}function D(e){ki||j();var t=ki.get(e);if(t)return t;if(!Ci.test(e))return null;for(var n,i,o,r,s,a,c=[],l=Ci.lastIndex=0;n=Ci.exec(e);)i=n.index,i>l&&c.push({value:e.slice(l,i)}),o=$i.test(n[0]),r=o?n[1]:n[2],s=r.charCodeAt(0),a=42===s,r=a?r.slice(1):r,c.push({tag:!0,value:r.trim(),html:o,oneTime:a}),l=i+n[0].length;return l<e.length&&c.push({value:e.slice(l)}),ki.put(e,c),c}function S(e,t){return e.length>1?e.map(function(e){return V(e,t)}).join("+"):V(e[0],t,!0)}function V(e,t,n){return e.tag?e.oneTime&&t?'"'+t.$eval(e.value)+'"':P(e.value,n):'"'+e.value+'"'}function P(e,t){if(Ni.test(e)){var n=A(e);return n.filters?"this._applyFilters("+n.expression+",null,"+JSON.stringify(n.filters)+",false)":"("+e+")"}return t?e:"("+e+")"}function R(e,t,n,i){I(e,1,function(){t.appendChild(e)},n,i)}function F(e,t,n,i){I(e,1,function(){W(e,t)},n,i)}function M(e,t,n){I(e,-1,function(){J(e)},t,n)}function I(e,t,n,i,o){var r=e.__v_trans;if(!r||!r.hooks&&!Xn||!i._isCompiled||i.$parent&&!i.$parent._isCompiled)return n(),void(o&&o());var s=t>0?"enter":"leave";r[s](n,o)}function L(e){if("string"==typeof e){var t=e;e=document.querySelector(e),e||"production"!==n.env.NODE_ENV&&Di("Cannot find element: "+t)}return e}function H(e){if(!e)return!1;var t=e.ownerDocument.documentElement,n=e.parentNode;return t===e||t===n||!(!n||1!==n.nodeType||!t.contains(n))}function z(e,t){var n=e.getAttribute(t);return null!==n&&e.removeAttribute(t),n}function B(e,t){var n=z(e,":"+t);return null===n&&(n=z(e,"v-bind:"+t)),n}function U(e,t){return e.hasAttribute(t)||e.hasAttribute(":"+t)||e.hasAttribute("v-bind:"+t)}function W(e,t){t.parentNode.insertBefore(e,t)}function q(e,t){t.nextSibling?W(e,t.nextSibling):t.parentNode.appendChild(e)}function J(e){e.parentNode.removeChild(e)}function Q(e,t){t.firstChild?W(e,t.firstChild):t.appendChild(e)}function Y(e,t){var n=e.parentNode;n&&n.replaceChild(t,e)}function G(e,t,n,i){e.addEventListener(t,n,i)}function K(e,t,n){e.removeEventListener(t,n)}function Z(e){var t=e.className;return"object"==typeof t&&(t=t.baseVal||""),t}function X(e,t){qn&&!/svg$/.test(e.namespaceURI)?e.className=t:e.setAttribute("class",t)}function ee(e,t){if(e.classList)e.classList.add(t);else{var n=" "+Z(e)+" ";n.indexOf(" "+t+" ")<0&&X(e,(n+t).trim())}}function te(e,t){if(e.classList)e.classList.remove(t);else{for(var n=" "+Z(e)+" ",i=" "+t+" ";n.indexOf(i)>=0;)n=n.replace(i," ");X(e,n.trim())}e.className||e.removeAttribute("class")}function ne(e,t){var n,i;if(re(e)&&he(e.content)&&(e=e.content),e.hasChildNodes())for(ie(e),i=t?document.createDocumentFragment():document.createElement("div");n=e.firstChild;)i.appendChild(n);return i}function ie(e){for(var t;t=e.firstChild,oe(t);)e.removeChild(t);for(;t=e.lastChild,oe(t);)e.removeChild(t)}function oe(e){return e&&(3===e.nodeType&&!e.data.trim()||8===e.nodeType)}function re(e){return e.tagName&&"template"===e.tagName.toLowerCase()}function se(e,t){var n=ji.debug?document.createComment(e):document.createTextNode(t?" ":"");return n.__v_anchor=!0,n}function ae(e){if(e.hasAttributes())for(var t=e.attributes,n=0,i=t.length;n<i;n++){var o=t[n].name;if(Pi.test(o))return f(o.replace(Pi,""))}}function ce(e,t,n){for(var i;e!==t;)i=e.nextSibling,n(e),e=i;n(t)}function le(e,t,n,i,o){function r(){if(a++,s&&a>=c.length){for(var e=0;e<c.length;e++)i.appendChild(c[e]);o&&o()}}var s=!1,a=0,c=[];ce(e,t,function(e){e===t&&(s=!0),c.push(e),M(e,n,r)})}function he(e){return e&&11===e.nodeType}function ue(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function fe(e,t){var i=e.tagName.toLowerCase(),o=e.hasAttributes();if(Ri.test(i)||Fi.test(i)){if(o)return pe(e,t)}else{if(ge(t,"components",i))return{id:i};var r=o&&pe(e,t);if(r)return r;if("production"!==n.env.NODE_ENV){var s=t._componentNameMap&&t._componentNameMap[i];s?Di("Unknown custom element: <"+i+"> - did you mean <"+s+">? HTML is case-insensitive, remember to use kebab-case in templates."):Mi(e,i)&&Di("Unknown custom element: <"+i+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.')}}}function pe(e,t){var n=e.getAttribute("is");if(null!=n){if(ge(t,"components",n))return e.removeAttribute("is"),{id:n}}else if(n=B(e,"is"),null!=n)return{id:n,dynamic:!0}}function de(e,t){var n,o,s;for(n in t)o=e[n],s=t[n],r(e,n)?m(o)&&m(s)&&de(o,s):i(e,n,s);return e}function ve(e,t){var n=Object.create(e||null);return t?b(n,be(t)):n}function _e(e){if(e.components){var t,i=e.components=be(e.components),o=Object.keys(i);if("production"!==n.env.NODE_ENV)var r=e._componentNameMap={};for(var s=0,a=o.length;s<a;s++){var c=o[s];Ri.test(c)||Fi.test(c)?"production"!==n.env.NODE_ENV&&Di("Do not use built-in or reserved HTML elements as component id: "+c):("production"!==n.env.NODE_ENV&&(r[c.replace(/-/g,"").toLowerCase()]=d(c)),t=i[c],g(t)&&(i[c]=Nn.extend(t)))}}}function ye(e){var t,n,i=e.props;if(Ln(i))for(e.props={},t=i.length;t--;)n=i[t],"string"==typeof n?e.props[n]=null:n.name&&(e.props[n.name]=n);else if(g(i)){var o=Object.keys(i);for(t=o.length;t--;)n=i[o[t]],"function"==typeof n&&(i[o[t]]={type:n})}}function be(e){if(Ln(e)){for(var t,i={},o=e.length;o--;){t=e[o];var r="function"==typeof t?t.options&&t.options.name||t.id:t.name||t.id;r?i[r]=t:"production"!==n.env.NODE_ENV&&Di('Array-syntax assets must provide a "name" or "id" field.')}return i}return e}function me(e,t,i){function o(n){var o=Ii[n]||Li;a[n]=o(e[n],t[n],i,n)}_e(t),ye(t),"production"!==n.env.NODE_ENV&&t.propsData&&!i&&Di("propsData can only be used as an instantiation option.");var s,a={};if(t["extends"]&&(e="function"==typeof t["extends"]?me(e,t["extends"].options,i):me(e,t["extends"],i)),t.mixins)for(var c=0,l=t.mixins.length;c<l;c++){var h=t.mixins[c],u=h.prototype instanceof Nn?h.options:h;e=me(e,u,i)}for(s in e)o(s);for(s in t)r(e,s)||o(s);return a}function ge(e,t,i,o){if("string"==typeof i){var r,s=e[t],a=s[i]||s[r=f(i)]||s[r.charAt(0).toUpperCase()+r.slice(1)];return"production"!==n.env.NODE_ENV&&o&&!a&&Di("Failed to resolve "+t.slice(0,-1)+": "+i,e),a}}function Ee(){this.id=Hi++,this.subs=[]}function we(e){Wi=!1,e(),Wi=!0}function xe(e){if(this.value=e,this.dep=new Ee,E(e,"__ob__",this),Ln(e)){var t=Hn?ke:Ce;t(e,Bi,Ui),this.observeArray(e)}else this.walk(e)}function ke(e,t){e.__proto__=t}function Ce(e,t,n){for(var i=0,o=n.length;i<o;i++){var r=n[i];E(e,r,t[r])}}function $e(e,t){if(e&&"object"==typeof e){var n;return r(e,"__ob__")&&e.__ob__ instanceof xe?n=e.__ob__:Wi&&(Ln(e)||g(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new xe(e)),n&&t&&n.addVm(t),n}}function Ne(e,t,n){var i=new Ee,o=Object.getOwnPropertyDescriptor(e,t);if(!o||o.configurable!==!1){var r=o&&o.get,s=o&&o.set,a=$e(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=r?r.call(e):n;if(Ee.target&&(i.depend(),a&&a.dep.depend(),Ln(t)))for(var o,s=0,c=t.length;s<c;s++)o=t[s],o&&o.__ob__&&o.__ob__.dep.depend();return t},set:function(t){var o=r?r.call(e):n;t!==o&&(s?s.call(e,t):n=t,a=$e(t),i.notify())}})}}function Oe(e){e.prototype._init=function(e){e=e||{},this.$el=null,this.$parent=e.parent,this.$root=this.$parent?this.$parent.$root:this,this.$children=[],this.$refs={},this.$els={},this._watchers=[],this._directives=[],this._uid=Ji++,this._isVue=!0,this._events={},this._eventsCount={},this._isFragment=!1,this._fragment=this._fragmentStart=this._fragmentEnd=null,this._isCompiled=this._isDestroyed=this._isReady=this._isAttached=this._isBeingDestroyed=this._vForRemoving=!1,this._unlinkFn=null,this._context=e._context||this.$parent,this._scope=e._scope,this._frag=e._frag,this._frag&&this._frag.children.push(this),this.$parent&&this.$parent.$children.push(this),e=this.$options=me(this.constructor.options,e,this),this._updateRef(),this._data={},this._callHook("init"),this._initState(),this._initEvents(),this._callHook("created"),e.el&&this.$mount(e.el)}}function Ae(e){if(void 0===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:case 48:return e;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return t>=97&&t<=122||t>=65&&t<=90?"ident":t>=49&&t<=57?"number":"else"}function Te(e){var t=e.trim();return("0"!==e.charAt(0)||!isNaN(e))&&(s(t)?u(t):"*"+t)}function je(e){function t(){var t=e[h+1];if(u===oo&&"'"===t||u===ro&&'"'===t)return h++,i="\\"+t,p[Yi](),!0}var n,i,o,r,s,a,c,l=[],h=-1,u=Xi,f=0,p=[];for(p[Gi]=function(){void 0!==o&&(l.push(o),o=void 0)},p[Yi]=function(){void 0===o?o=i:o+=i},p[Ki]=function(){p[Yi](),f++},p[Zi]=function(){if(f>0)f--,u=io,p[Yi]();else{if(f=0,o=Te(o),o===!1)return!1;p[Gi]()}};null!=u;)if(h++,n=e[h],"\\"!==n||!t()){if(r=Ae(n),c=co[u],s=c[r]||c["else"]||ao,s===ao)return;if(u=s[0],a=p[s[1]],a&&(i=s[2],i=void 0===i?n:i,a()===!1))return;if(u===so)return l.raw=e,l}}function De(e){var t=Qi.get(e);return t||(t=je(e),t&&Qi.put(e,t)),t}function Se(e,t){return ze(t).get(e)}function Ve(e,t,o){var r=e;if("string"==typeof t&&(t=je(t)),!t||!m(e))return!1;for(var s,a,c=0,l=t.length;c<l;c++)s=e,a=t[c],"*"===a.charAt(0)&&(a=ze(a.slice(1)).get.call(r,r)),c<l-1?(e=e[a],m(e)||(e={},"production"!==n.env.NODE_ENV&&s._isVue&&lo(t,s),i(s,a,e))):Ln(e)?e.$set(a,o):a in e?e[a]=o:("production"!==n.env.NODE_ENV&&e._isVue&&lo(t,e),i(e,a,o));return!0}function Pe(){}function Re(e,t){var n=ko.length;return ko[n]=t?e.replace(bo,"\\n"):e,'"'+n+'"'}function Fe(e){var t=e.charAt(0),n=e.slice(1);return po.test(n)?e:(n=n.indexOf('"')>-1?n.replace(go,Me):n,t+"scope."+n)}function Me(e,t){return ko[t]}function Ie(e){_o.test(e)&&"production"!==n.env.NODE_ENV&&Di("Avoid using reserved keywords in expression: "+e),ko.length=0;var t=e.replace(mo,Re).replace(yo,"");return t=(" "+t).replace(wo,Fe).replace(go,Me),Le(t)}function Le(e){try{return new Function("scope","return "+e+";")}catch(t){return"production"!==n.env.NODE_ENV&&Di(t.toString().match(/unsafe-eval|CSP/)?"It seems you are using the default build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. Use the CSP-compliant build instead: http://vuejs.org/guide/installation.html#CSP-compliant-build":"Invalid expression. Generated function body: "+e),Pe}}function He(e){var t=De(e);return t?function(e,n){Ve(e,t,n)}:void("production"!==n.env.NODE_ENV&&Di("Invalid setter expression: "+e))}function ze(e,t){e=e.trim();var n=uo.get(e);if(n)return t&&!n.set&&(n.set=He(n.exp)),n;var i={exp:e};return i.get=Be(e)&&e.indexOf("[")<0?Le("scope."+e):Ie(e),t&&(i.set=He(e)),uo.put(e,i),i}function Be(e){return Eo.test(e)&&!xo.test(e)&&"Math."!==e.slice(0,5)}function Ue(){$o.length=0,No.length=0,Oo={},Ao={},To=!1}function We(){for(var e=!0;e;)e=!1,qe($o),qe(No),$o.length?e=!0:(Bn&&ji.devtools&&Bn.emit("flush"),Ue())}function qe(e){for(var t=0;t<e.length;t++){var i=e[t],o=i.id;if(Oo[o]=null,i.run(),"production"!==n.env.NODE_ENV&&null!=Oo[o]&&(Ao[o]=(Ao[o]||0)+1,Ao[o]>ji._maxUpdateCount)){Di('You may have an infinite update loop for watcher with expression "'+i.expression+'"',i.vm);break}}e.length=0}function Je(e){var t=e.id;if(null==Oo[t]){var n=e.user?No:$o;Oo[t]=n.length,n.push(e),To||(To=!0,oi(We))}}function Qe(e,t,n,i){i&&b(this,i);var o="function"==typeof t;if(this.vm=e,e._watchers.push(this),this.expression=t,this.cb=n,this.id=++jo,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ri,this.newDepIds=new ri,this.prevError=null,o)this.getter=t,this.setter=void 0;else{var r=ze(t,this.twoWay);this.getter=r.get,this.setter=r.set}this.value=this.lazy?void 0:this.get(),this.queued=this.shallow=!1}function Ye(e,t){var n=void 0,i=void 0;t||(t=Do,t.clear());var o=Ln(e),r=m(e);if((o||r)&&Object.isExtensible(e)){if(e.__ob__){var s=e.__ob__.dep.id;if(t.has(s))return;t.add(s)}if(o)for(n=e.length;n--;)Ye(e[n],t);else if(r)for(i=Object.keys(e),n=i.length;n--;)Ye(e[i[n]],t)}}function Ge(e){return re(e)&&he(e.content)}function Ke(e,t){var n=t?e:e.trim(),i=Vo.get(n);if(i)return i;var o=document.createDocumentFragment(),r=e.match(Fo),s=Mo.test(e),a=Io.test(e);if(r||s||a){var c=r&&r[1],l=Ro[c]||Ro.efault,h=l[0],u=l[1],f=l[2],p=document.createElement("div");for(p.innerHTML=u+e+f;h--;)p=p.lastChild;for(var d;d=p.firstChild;)o.appendChild(d)}else o.appendChild(document.createTextNode(e));return t||ie(o),Vo.put(n,o),o}function Ze(e){if(Ge(e))return Ke(e.innerHTML);if("SCRIPT"===e.tagName)return Ke(e.textContent);for(var t,n=Xe(e),i=document.createDocumentFragment();t=n.firstChild;)i.appendChild(t);return ie(i),i}function Xe(e){if(!e.querySelectorAll)return e.cloneNode();var t,n,i,o=e.cloneNode(!0);if(Lo){var r=o;if(Ge(e)&&(e=e.content,r=o.content),n=e.querySelectorAll("template"),n.length)for(i=r.querySelectorAll("template"),t=i.length;t--;)i[t].parentNode.replaceChild(Xe(n[t]),i[t])}if(Ho)if("TEXTAREA"===e.tagName)o.value=e.value;else if(n=e.querySelectorAll("textarea"),n.length)for(i=o.querySelectorAll("textarea"),t=i.length;t--;)i[t].value=n[t].value;return o}function et(e,t,n){var i,o;return he(e)?(ie(e),t?Xe(e):e):("string"==typeof e?n||"#"!==e.charAt(0)?o=Ke(e,n):(o=Po.get(e),o||(i=document.getElementById(e.slice(1)),i&&(o=Ze(i),Po.put(e,o)))):e.nodeType&&(o=Ze(e)),o&&t?Xe(o):o)}function tt(e,t,n,i,o,r){this.children=[],this.childFrags=[],this.vm=t,this.scope=o,this.inserted=!1,this.parentFrag=r,r&&r.childFrags.push(this),this.unlink=e(t,n,i,o,this);var s=this.single=1===n.childNodes.length&&!n.childNodes[0].__v_anchor;s?(this.node=n.childNodes[0],this.before=nt,this.remove=it):(this.node=se("fragment-start"),this.end=se("fragment-end"),this.frag=n,Q(this.node,n),n.appendChild(this.end),this.before=ot,this.remove=rt),this.node.__v_frag=this}function nt(e,t){this.inserted=!0;var n=t!==!1?F:W;n(this.node,e,this.vm),H(this.node)&&this.callHook(st)}function it(){this.inserted=!1;var e=H(this.node),t=this;this.beforeRemove(),M(this.node,this.vm,function(){e&&t.callHook(at),t.destroy()})}function ot(e,t){this.inserted=!0;var n=this.vm,i=t!==!1?F:W;ce(this.node,this.end,function(t){i(t,e,n)}),H(this.node)&&this.callHook(st)}function rt(){this.inserted=!1;var e=this,t=H(this.node);this.beforeRemove(),le(this.node,this.end,this.vm,this.frag,function(){t&&e.callHook(at),e.destroy()})}function st(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function at(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}function ct(e,t){this.vm=e;var n,i="string"==typeof t;i||re(t)&&!t.hasAttribute("v-if")?n=et(t,!0):(n=document.createDocumentFragment(),n.appendChild(t)),this.template=n;var o,r=e.constructor.cid;if(r>0){var s=r+(i?t:ue(t));o=Uo.get(s),o||(o=It(n,e.$options,!0),Uo.put(s,o))}else o=It(n,e.$options,!0);this.linker=o}function lt(e,t,n){var i=e.node.previousSibling;if(i){for(e=i.__v_frag;!(e&&e.forId===n&&e.inserted||i===t);){if(i=i.previousSibling,!i)return;e=i.__v_frag}return e}}function ht(e){var t=e.node;if(e.end)for(;!t.__vue__&&t!==e.end&&t.nextSibling;)t=t.nextSibling;return t.__vue__}function ut(e){for(var t=-1,n=new Array(Math.floor(e));++t<e;)n[t]=t;return n}function ft(e,t,n,i){return i?"$index"===i?e:i.charAt(0).match(/\w/)?Se(n,i):n[i]:t||n}function pt(e,t,n){for(var i,o,r,s=t?[]:null,a=0,c=e.options.length;a<c;a++)if(i=e.options[a],r=n?i.hasAttribute("selected"):i.selected){if(o=i.hasOwnProperty("_value")?i._value:i.value,!t)return o;s.push(o)}return s}function dt(e,t){for(var n=e.length;n--;)if(C(e[n],t))return n;return-1}function vt(e,t){var n=t.map(function(e){var t=e.charCodeAt(0);return t>47&&t<58?parseInt(e,10):1===e.length&&(t=e.toUpperCase().charCodeAt(0),t>64&&t<91)?t:ur[e]});return n=[].concat.apply([],n),function(t){if(n.indexOf(t.keyCode)>-1)return e.call(this,t)}}function _t(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function yt(e){return function(t){return t.preventDefault(),e.call(this,t)}}function bt(e){return function(t){if(t.target===t.currentTarget)return e.call(this,t)}}function mt(e){if(_r[e])return _r[e];var t=gt(e);return _r[e]=_r[t]=t,t}function gt(e){e=d(e);var t=f(e),n=t.charAt(0).toUpperCase()+t.slice(1);yr||(yr=document.createElement("div"));var i,o=pr.length;if("filter"!==t&&t in yr.style)return{kebab:e,camel:t};for(;o--;)if(i=dr[o]+n,i in yr.style)return{kebab:pr[o]+e,camel:i}}function Et(e){var t=[];if(Ln(e))for(var n=0,i=e.length;n<i;n++){var o=e[n];if(o)if("string"==typeof o)t.push(o);else for(var r in o)o[r]&&t.push(r)}else if(m(e))for(var s in e)e[s]&&t.push(s);return t}function wt(e,t,n){if(t=t.trim(),t.indexOf(" ")===-1)return void n(e,t);for(var i=t.split(/\s+/),o=0,r=i.length;o<r;o++)n(e,i[o])}function xt(e,t,n){function i(){++r>=o?n():e[r].call(t,i)}var o=e.length,r=0;e[0].call(t,i)}function kt(e,t,i){for(var o,r,a,c,l,h,u,p=[],v=Object.keys(t),_=v.length;_--;)if(r=v[_],o=t[r]||Sr,"production"===n.env.NODE_ENV||"$data"!==r)if(l=f(r),Vr.test(l)){if(u={name:r,path:l,options:o,mode:Dr.ONE_WAY,raw:null},a=d(r),null===(c=B(e,a))&&(null!==(c=B(e,a+".sync"))?u.mode=Dr.TWO_WAY:null!==(c=B(e,a+".once"))&&(u.mode=Dr.ONE_TIME)),null!==c)u.raw=c,h=A(c),c=h.expression,u.filters=h.filters,s(c)&&!h.filters?u.optimizedLiteral=!0:(u.dynamic=!0,"production"===n.env.NODE_ENV||u.mode!==Dr.TWO_WAY||Pr.test(c)||(u.mode=Dr.ONE_WAY,Di("Cannot bind two-way prop with non-settable parent path: "+c,i))),u.parentPath=c,"production"!==n.env.NODE_ENV&&o.twoWay&&u.mode!==Dr.TWO_WAY&&Di('Prop "'+r+'" expects a two-way binding type.',i);else if(null!==(c=z(e,a)))u.raw=c;else if("production"!==n.env.NODE_ENV){var y=l.toLowerCase();c=/[A-Z\-]/.test(r)&&(e.getAttribute(y)||e.getAttribute(":"+y)||e.getAttribute("v-bind:"+y)||e.getAttribute(":"+y+".once")||e.getAttribute("v-bind:"+y+".once")||e.getAttribute(":"+y+".sync")||e.getAttribute("v-bind:"+y+".sync")),c?Di("Possible usage error for prop `"+y+"` - did you mean `"+a+"`? HTML is case-insensitive, remember to use kebab-case for props in templates.",i):o.required&&Di("Missing required prop: "+r,i)}p.push(u)}else"production"!==n.env.NODE_ENV&&Di('Invalid prop key: "'+r+'". Prop keys must be valid identifiers.',i);else Di("Do not use $data as prop.",i);return Ct(p)}function Ct(e){return function(t,n){t._props={};for(var i,o,s,a,c,f=t.$options.propsData,p=e.length;p--;)if(i=e[p],c=i.raw,o=i.path,s=i.options,t._props[o]=i,f&&r(f,o)&&Nt(t,i,f[o]),null===c)Nt(t,i,void 0);else if(i.dynamic)i.mode===Dr.ONE_TIME?(a=(n||t._context||t).$get(i.parentPath),Nt(t,i,a)):t._context?t._bindDir({name:"prop",def:Fr,prop:i},null,null,n):Nt(t,i,t.$get(i.parentPath));else if(i.optimizedLiteral){var v=u(c);a=v===c?h(l(c)):v,Nt(t,i,a)}else a=s.type===Boolean&&(""===c||c===d(i.name))||c,Nt(t,i,a)}}function $t(e,t,n,i){var o=t.dynamic&&Be(t.parentPath),r=n;void 0===r&&(r=At(e,t)),r=jt(t,r,e);var s=r!==n;Tt(t,r,e)||(r=void 0),o&&!s?we(function(){i(r)}):i(r)}function Nt(e,t,n){$t(e,t,n,function(n){Ne(e,t.path,n)})}function Ot(e,t,n){$t(e,t,n,function(n){e[t.path]=n})}function At(e,t){var i=t.options;if(!r(i,"default"))return i.type!==Boolean&&void 0;var o=i["default"];return m(o)&&"production"!==n.env.NODE_ENV&&Di('Invalid default value for prop "'+t.name+'": Props with type Object/Array must use a factory function to return the default value.',e),"function"==typeof o&&i.type!==Function?o.call(e):o}function Tt(e,t,i){if(!e.options.required&&(null===e.raw||null==t))return!0;var o=e.options,r=o.type,s=!r,a=[];if(r){Ln(r)||(r=[r]);for(var c=0;c<r.length&&!s;c++){var l=Dt(t,r[c]);a.push(l.expectedType),s=l.valid}}if(!s)return"production"!==n.env.NODE_ENV&&Di('Invalid prop: type check failed for prop "'+e.name+'". Expected '+a.map(St).join(", ")+", got "+Vt(t)+".",i),!1;var h=o.validator;return!(h&&!h(t))||("production"!==n.env.NODE_ENV&&Di('Invalid prop: custom validator check failed for prop "'+e.name+'".',i),!1)}function jt(e,t,i){var o=e.options.coerce;return o?"function"==typeof o?o(t):("production"!==n.env.NODE_ENV&&Di('Invalid coerce for prop "'+e.name+'": expected function, got '+typeof o+".",i),t):t}function Dt(e,t){var n,i;return t===String?(i="string",n=typeof e===i):t===Number?(i="number",n=typeof e===i):t===Boolean?(i="boolean",n=typeof e===i):t===Function?(i="function",n=typeof e===i):t===Object?(i="object",n=g(e)):t===Array?(i="array",n=Ln(e)):n=e instanceof t,{valid:n,expectedType:i}}function St(e){return e?e.charAt(0).toUpperCase()+e.slice(1):"custom type"}function Vt(e){return Object.prototype.toString.call(e).slice(8,-1)}function Pt(e){Mr.push(e),Ir||(Ir=!0,oi(Rt))}function Rt(){for(var e=document.documentElement.offsetHeight,t=0;t<Mr.length;t++)Mr[t]();return Mr=[],Ir=!1,e}function Ft(e,t,i,o){this.id=t,this.el=e,this.enterClass=i&&i.enterClass||t+"-enter",this.leaveClass=i&&i.leaveClass||t+"-leave",this.hooks=i,this.vm=o,this.pendingCssEvent=this.pendingCssCb=this.cancel=this.pendingJsCb=this.op=this.cb=null,this.justEntered=!1,this.entered=this.left=!1,this.typeCache={},this.type=i&&i.type,"production"!==n.env.NODE_ENV&&this.type&&this.type!==Lr&&this.type!==Hr&&Di('invalid CSS transition type for transition="'+this.id+'": '+this.type,o);var r=this;["enterNextTick","enterDone","leaveNextTick","leaveDone"].forEach(function(e){r[e]=_(r[e],r)})}function Mt(e){if(/svg$/.test(e.namespaceURI)){var t=e.getBoundingClientRect();return!(t.width||t.height)}return!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function It(e,t,n){var i=n||!t._asComponent?qt(e,t):null,o=i&&i.terminal||hn(e)||!e.hasChildNodes()?null:Zt(e.childNodes,t);return function(e,t,n,r,s){var a=y(t.childNodes),c=Lt(function(){i&&i(e,t,n,r,s),o&&o(e,a,n,r,s)},e);return zt(e,c)}}function Lt(e,t){"production"===n.env.NODE_ENV&&(t._directives=[]);var i=t._directives.length;e();var o=t._directives.slice(i);o.sort(Ht);for(var r=0,s=o.length;r<s;r++)o[r]._bind();return o}function Ht(e,t){return e=e.descriptor.def.priority||es,t=t.descriptor.def.priority||es,e>t?-1:e===t?0:1}function zt(e,t,n,i){function o(o){Bt(e,t,o),n&&i&&Bt(n,i)}return o.dirs=t,o}function Bt(e,t,i){for(var o=t.length;o--;)t[o]._teardown(),"production"===n.env.NODE_ENV||i||e._directives.$remove(t[o])}function Ut(e,t,n,i){var o=kt(t,n,e),r=Lt(function(){o(e,i)},e);return zt(e,r)}function Wt(e,t,i){var o,r,s=t._containerAttrs,a=t._replacerAttrs;if(11!==e.nodeType)t._asComponent?(s&&i&&(o=sn(s,i)),a&&(r=sn(a,t))):r=sn(e.attributes,t);else if("production"!==n.env.NODE_ENV&&s){var c=s.filter(function(e){return e.name.indexOf("_v-")<0&&!Gr.test(e.name)&&"slot"!==e.name}).map(function(e){return'"'+e.name+'"'});if(c.length){var l=c.length>1;Di("Attribute"+(l?"s ":" ")+c.join(", ")+(l?" are":" is")+" ignored on component <"+t.el.tagName.toLowerCase()+"> because the component is a fragment instance: http://vuejs.org/guide/components.html#Fragment-Instance")}}return t._containerAttrs=t._replacerAttrs=null,function(e,t,n){var i,s=e._context;s&&o&&(i=Lt(function(){o(s,t,null,n)},s));var a=Lt(function(){r&&r(e,t)},e);return zt(e,a,s,i)}}function qt(e,t){var n=e.nodeType;return 1!==n||hn(e)?3===n&&e.data.trim()?Qt(e,t):null:Jt(e,t)}function Jt(e,t){if("TEXTAREA"===e.tagName){var n=D(e.value);n&&(e.setAttribute(":value",S(n)),e.value="")}var i,o=e.hasAttributes(),r=o&&y(e.attributes);return o&&(i=nn(e,r,t)),i||(i=en(e,t)),i||(i=tn(e,t)),!i&&o&&(i=sn(r,t)),i}function Qt(e,t){if(e._skip)return Yt;var n=D(e.wholeText);if(!n)return null;for(var i=e.nextSibling;i&&3===i.nodeType;)i._skip=!0,i=i.nextSibling;for(var o,r,s=document.createDocumentFragment(),a=0,c=n.length;a<c;a++)r=n[a],o=r.tag?Gt(r,t):document.createTextNode(r.value),s.appendChild(o);return Kt(n,s,t)}function Yt(e,t){J(t)}function Gt(e,t){function n(t){if(!e.descriptor){var n=A(e.value);e.descriptor={name:t,def:Ar[t],expression:n.expression,filters:n.filters}}}var i;return e.oneTime?i=document.createTextNode(e.value):e.html?(i=document.createComment("v-html"),n("html")):(i=document.createTextNode(" "),n("text")),i}function Kt(e,t){return function(n,i,o,r){for(var s,a,l,h=t.cloneNode(!0),u=y(h.childNodes),f=0,p=e.length;f<p;f++)s=e[f],a=s.value,s.tag&&(l=u[f],s.oneTime?(a=(r||n).$eval(a),s.html?Y(l,et(a,!0)):l.data=c(a)):n._bindDir(s.descriptor,l,o,r));Y(i,h)}}function Zt(e,t){for(var n,i,o,r=[],s=0,a=e.length;s<a;s++)o=e[s],n=qt(o,t),i=n&&n.terminal||"SCRIPT"===o.tagName||!o.hasChildNodes()?null:Zt(o.childNodes,t),r.push(n,i);return r.length?Xt(r):null}function Xt(e){return function(t,n,i,o,r){for(var s,a,c,l=0,h=0,u=e.length;l<u;h++){s=n[h],a=e[l++],c=e[l++];var f=y(s.childNodes);a&&a(t,s,i,o,r),c&&c(t,f,i,o,r)}}}function en(e,t){var n=e.tagName.toLowerCase();if(!Ri.test(n)){var i=ge(t,"elementDirectives",n);return i?rn(e,n,"",t,i):void 0}}function tn(e,t){var n=fe(e,t);if(n){var i=ae(e),o={name:"component",ref:i,expression:n.id,def:Qr.component,modifiers:{literal:!n.dynamic}},r=function(e,t,n,r,s){i&&Ne((r||e).$refs,i,null),e._bindDir(o,t,n,r,s)};return r.terminal=!0,r}}function nn(e,t,n){if(null!==z(e,"v-pre"))return on;if(e.hasAttribute("v-else")){var i=e.previousElementSibling;if(i&&i.hasAttribute("v-if"))return on}for(var o,r,s,a,c,l,h,u,f,p,d=0,v=t.length;d<v;d++)o=t[d],r=o.name.replace(Zr,""),(c=r.match(Kr))&&(f=ge(n,"directives",c[1]),f&&f.terminal&&(!p||(f.priority||ts)>p.priority)&&(p=f,h=o.name,a=an(o.name),s=o.value,l=c[1],u=c[2]));return p?rn(e,l,s,n,p,h,u,a):void 0}function on(){}function rn(e,t,n,i,o,r,s,a){var c=A(n),l={name:t,arg:s,expression:c.expression,filters:c.filters,raw:n,attr:r,modifiers:a,def:o};"for"!==t&&"router-view"!==t||(l.ref=ae(e));var h=function(e,t,n,i,o){l.ref&&Ne((i||e).$refs,l.ref,null),e._bindDir(l,t,n,i,o)};return h.terminal=!0,h}function sn(e,t){function i(e,t,n){var i=n&&ln(n),o=!i&&A(s);_.push({name:e,attr:a,raw:c,def:t,arg:h,modifiers:u,expression:o&&o.expression,filters:o&&o.filters,interp:n,hasOneTime:i})}for(var o,r,s,a,c,l,h,u,f,p,d,v=e.length,_=[];v--;)if(o=e[v],r=a=o.name,s=c=o.value,p=D(s),h=null,u=an(r),r=r.replace(Zr,""),p)s=S(p),h=r,i("bind",Ar.bind,p),"production"!==n.env.NODE_ENV&&"class"===r&&Array.prototype.some.call(e,function(e){return":class"===e.name||"v-bind:class"===e.name})&&Di('class="'+c+'": Do not mix mustache interpolation and v-bind for "class" on the same element. Use one or the other.',t);else if(Xr.test(r))u.literal=!Yr.test(r),i("transition",Qr.transition);else if(Gr.test(r))h=r.replace(Gr,""),i("on",Ar.on);else if(Yr.test(r))l=r.replace(Yr,""),"style"===l||"class"===l?i(l,Qr[l]):(h=l,i("bind",Ar.bind));else if(d=r.match(Kr)){if(l=d[1],h=d[2],"else"===l)continue;f=ge(t,"directives",l,!0),f&&i(l,f)}if(_.length)return cn(_)}function an(e){var t=Object.create(null),n=e.match(Zr);if(n)for(var i=n.length;i--;)t[n[i].slice(1)]=!0;return t}function cn(e){return function(t,n,i,o,r){for(var s=e.length;s--;)t._bindDir(e[s],n,i,o,r)}}function ln(e){for(var t=e.length;t--;)if(e[t].oneTime)return!0}function hn(e){return"SCRIPT"===e.tagName&&(!e.hasAttribute("type")||"text/javascript"===e.getAttribute("type"))}function un(e,t){return t&&(t._containerAttrs=pn(e)),re(e)&&(e=et(e)),t&&(t._asComponent&&!t.template&&(t.template="<slot></slot>"),t.template&&(t._content=ne(e),e=fn(e,t))),he(e)&&(Q(se("v-start",!0),e),e.appendChild(se("v-end",!0))),e}function fn(e,t){var i=t.template,o=et(i,!0);if(o){var r=o.firstChild,s=r.tagName&&r.tagName.toLowerCase();return t.replace?(e===document.body&&"production"!==n.env.NODE_ENV&&Di("You are mounting an instance with a template to <body>. This will replace <body> entirely. You should probably use `replace: false` here."),o.childNodes.length>1||1!==r.nodeType||"component"===s||ge(t,"components",s)||U(r,"is")||ge(t,"elementDirectives",s)||r.hasAttribute("v-for")||r.hasAttribute("v-if")?o:(t._replacerAttrs=pn(r),dn(e,r),r)):(e.appendChild(o),e)}"production"!==n.env.NODE_ENV&&Di("Invalid template option: "+i)}function pn(e){if(1===e.nodeType&&e.hasAttributes())return y(e.attributes)}function dn(e,t){for(var n,i,o=e.attributes,r=o.length;r--;)n=o[r].name,i=o[r].value,t.hasAttribute(n)||ns.test(n)?"class"===n&&!D(i)&&(i=i.trim())&&i.split(/\s+/).forEach(function(e){ee(t,e)}):t.setAttribute(n,i)}function vn(e,t){if(t){for(var i,o,r=e._slotContents=Object.create(null),s=0,a=t.children.length;s<a;s++)i=t.children[s],(o=i.getAttribute("slot"))&&(r[o]||(r[o]=[])).push(i),"production"!==n.env.NODE_ENV&&B(i,"slot")&&Di('The "slot" attribute must be static.',e.$parent);for(o in r)r[o]=_n(r[o],t);if(t.hasChildNodes()){var c=t.childNodes;if(1===c.length&&3===c[0].nodeType&&!c[0].data.trim())return;r["default"]=_n(t.childNodes,t)}}}function _n(e,t){var n=document.createDocumentFragment();e=y(e);for(var i=0,o=e.length;i<o;i++){var r=e[i];!re(r)||r.hasAttribute("v-if")||r.hasAttribute("v-for")||(t.removeChild(r),r=et(r,!0)),n.appendChild(r)}return n}function yn(e){function t(){}function i(e,t){var n=new Qe(t,e,null,{lazy:!0});return function(){return n.dirty&&n.evaluate(),
Ee.target&&n.depend(),n.value}}Object.defineProperty(e.prototype,"$data",{get:function(){return this._data},set:function(e){e!==this._data&&this._setData(e)}}),e.prototype._initState=function(){this._initProps(),this._initMeta(),this._initMethods(),this._initData(),this._initComputed()},e.prototype._initProps=function(){var e=this.$options,t=e.el,i=e.props;i&&!t&&"production"!==n.env.NODE_ENV&&Di("Props will not be compiled if no `el` option is provided at instantiation.",this),t=e.el=L(t),this._propsUnlinkFn=t&&1===t.nodeType&&i?Ut(this,t,i,this._scope):null},e.prototype._initData=function(){var e=this.$options.data,t=this._data=e?e():{};g(t)||(t={},"production"!==n.env.NODE_ENV&&Di("data functions should return an object.",this));var i,o,s=this._props,a=Object.keys(t);for(i=a.length;i--;)o=a[i],s&&r(s,o)?"production"!==n.env.NODE_ENV&&Di('Data field "'+o+'" is already defined as a prop. To provide default value for a prop, use the "default" prop option; if you want to pass prop values to an instantiation call, use the "propsData" option.',this):this._proxy(o);$e(t,this)},e.prototype._setData=function(e){e=e||{};var t=this._data;this._data=e;var n,i,o;for(n=Object.keys(t),o=n.length;o--;)i=n[o],i in e||this._unproxy(i);for(n=Object.keys(e),o=n.length;o--;)i=n[o],r(this,i)||this._proxy(i);t.__ob__.removeVm(this),$e(e,this),this._digest()},e.prototype._proxy=function(e){if(!a(e)){var t=this;Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return t._data[e]},set:function(n){t._data[e]=n}})}},e.prototype._unproxy=function(e){a(e)||delete this[e]},e.prototype._digest=function(){for(var e=0,t=this._watchers.length;e<t;e++)this._watchers[e].update(!0)},e.prototype._initComputed=function(){var e=this.$options.computed;if(e)for(var n in e){var o=e[n],r={enumerable:!0,configurable:!0};"function"==typeof o?(r.get=i(o,this),r.set=t):(r.get=o.get?o.cache!==!1?i(o.get,this):_(o.get,this):t,r.set=o.set?_(o.set,this):t),Object.defineProperty(this,n,r)}},e.prototype._initMethods=function(){var e=this.$options.methods;if(e)for(var t in e)this[t]=_(e[t],this)},e.prototype._initMeta=function(){var e=this.$options._meta;if(e)for(var t in e)Ne(this,t,e[t])}}function bn(e){function t(e,t){for(var n,i,o,r=t.attributes,s=0,a=r.length;s<a;s++)n=r[s].name,os.test(n)&&(n=n.replace(os,""),i=r[s].value,Be(i)&&(i+=".apply(this, $arguments)"),o=(e._scope||e._context).$eval(i,!0),o._fromParent=!0,e.$on(n.replace(os),o))}function i(e,t,n){if(n){var i,r,s,a;for(r in n)if(i=n[r],Ln(i))for(s=0,a=i.length;s<a;s++)o(e,t,r,i[s]);else o(e,t,r,i)}}function o(e,t,i,r,s){var a=typeof r;if("function"===a)e[t](i,r,s);else if("string"===a){var c=e.$options.methods,l=c&&c[r];l?e[t](i,l,s):"production"!==n.env.NODE_ENV&&Di('Unknown method: "'+r+'" when registering callback for '+t+': "'+i+'".',e)}else r&&"object"===a&&o(e,t,i,r.handler,r)}function r(){this._isAttached||(this._isAttached=!0,this.$children.forEach(s))}function s(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function a(){this._isAttached&&(this._isAttached=!1,this.$children.forEach(c))}function c(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}e.prototype._initEvents=function(){var e=this.$options;e._asComponent&&t(this,e.el),i(this,"$on",e.events),i(this,"$watch",e.watch)},e.prototype._initDOMHooks=function(){this.$on("hook:attached",r),this.$on("hook:detached",a)},e.prototype._callHook=function(e){this.$emit("pre-hook:"+e);var t=this.$options[e];if(t)for(var n=0,i=t.length;n<i;n++)t[n].call(this);this.$emit("hook:"+e)}}function mn(){}function gn(e,t,i,o,r,s){this.vm=t,this.el=i,this.descriptor=e,this.name=e.name,this.expression=e.expression,this.arg=e.arg,this.modifiers=e.modifiers,this.filters=e.filters,this.literal=this.modifiers&&this.modifiers.literal,this._locked=!1,this._bound=!1,this._listeners=null,this._host=o,this._scope=r,this._frag=s,"production"!==n.env.NODE_ENV&&this.el&&(this.el._vue_directives=this.el._vue_directives||[],this.el._vue_directives.push(this))}function En(e){e.prototype._updateRef=function(e){var t=this.$options._ref;if(t){var n=(this._scope||this._context).$refs;e?n[t]===this&&(n[t]=null):n[t]=this}},e.prototype._compile=function(e){var t=this.$options,n=e;if(e=un(e,t),this._initElement(e),1!==e.nodeType||null===z(e,"v-pre")){var i=this._context&&this._context.$options,o=Wt(e,t,i);vn(this,t._content);var r,s=this.constructor;t._linkerCachable&&(r=s.linker,r||(r=s.linker=It(e,t)));var a=o(this,e,this._scope),c=r?r(this,e):It(e,t)(this,e);this._unlinkFn=function(){a(),c(!0)},t.replace&&Y(n,e),this._isCompiled=!0,this._callHook("compiled")}},e.prototype._initElement=function(e){he(e)?(this._isFragment=!0,this.$el=this._fragmentStart=e.firstChild,this._fragmentEnd=e.lastChild,3===this._fragmentStart.nodeType&&(this._fragmentStart.data=this._fragmentEnd.data=""),this._fragment=e):this.$el=e,this.$el.__vue__=this,this._callHook("beforeCompile")},e.prototype._bindDir=function(e,t,n,i,o){this._directives.push(new gn(e,this,t,n,i,o))},e.prototype._destroy=function(e,t){if(this._isBeingDestroyed)return void(t||this._cleanup());var n,i,o=this,r=function(){!n||i||t||o._cleanup()};e&&this.$el&&(i=!0,this.$remove(function(){i=!1,r()})),this._callHook("beforeDestroy"),this._isBeingDestroyed=!0;var s,a=this.$parent;for(a&&!a._isBeingDestroyed&&(a.$children.$remove(this),this._updateRef(!0)),s=this.$children.length;s--;)this.$children[s].$destroy();for(this._propsUnlinkFn&&this._propsUnlinkFn(),this._unlinkFn&&this._unlinkFn(),s=this._watchers.length;s--;)this._watchers[s].teardown();this.$el&&(this.$el.__vue__=null),n=!0,r()},e.prototype._cleanup=function(){this._isDestroyed||(this._frag&&this._frag.children.$remove(this),this._data&&this._data.__ob__&&this._data.__ob__.removeVm(this),this.$el=this.$parent=this.$root=this.$children=this._watchers=this._context=this._scope=this._directives=null,this._isDestroyed=!0,this._callHook("destroyed"),this.$off())}}function wn(e){e.prototype._applyFilters=function(e,t,n,i){var o,r,s,a,c,l,h,u,f;for(l=0,h=n.length;l<h;l++)if(o=n[i?h-l-1:l],r=ge(this.$options,"filters",o.name,!0),r&&(r=i?r.write:r.read||r,"function"==typeof r)){if(s=i?[e,t]:[e],c=i?2:1,o.args)for(u=0,f=o.args.length;u<f;u++)a=o.args[u],s[u+c]=a.dynamic?this.$get(a.value):a.value;e=r.apply(this,s)}return e},e.prototype._resolveComponent=function(t,i){var o;if(o="function"==typeof t?t:ge(this.$options,"components",t,!0))if(o.options)i(o);else if(o.resolved)i(o.resolved);else if(o.requested)o.pendingCallbacks.push(i);else{o.requested=!0;var r=o.pendingCallbacks=[i];o.call(this,function(t){g(t)&&(t=e.extend(t)),o.resolved=t;for(var n=0,i=r.length;n<i;n++)r[n](t)},function(e){"production"!==n.env.NODE_ENV&&Di("Failed to resolve async component"+("string"==typeof t?": "+t:"")+". "+(e?"\nReason: "+e:""))})}}}function xn(e){function t(e){return JSON.parse(JSON.stringify(e))}e.prototype.$get=function(e,t){var n=ze(e);if(n){if(t){var i=this;return function(){i.$arguments=y(arguments);var e=n.get.call(i,i);return i.$arguments=null,e}}try{return n.get.call(this,this)}catch(o){}}},e.prototype.$set=function(e,t){var n=ze(e,!0);n&&n.set&&n.set.call(this,this,t)},e.prototype.$delete=function(e){o(this._data,e)},e.prototype.$watch=function(e,t,n){var i,o=this;"string"==typeof e&&(i=A(e),e=i.expression);var r=new Qe(o,e,t,{deep:n&&n.deep,sync:n&&n.sync,filters:i&&i.filters,user:!n||n.user!==!1});return n&&n.immediate&&t.call(o,r.value),function(){r.teardown()}},e.prototype.$eval=function(e,t){if(rs.test(e)){var n=A(e),i=this.$get(n.expression,t);return n.filters?this._applyFilters(i,null,n.filters):i}return this.$get(e,t)},e.prototype.$interpolate=function(e){var t=D(e),n=this;return t?1===t.length?n.$eval(t[0].value)+"":t.map(function(e){return e.tag?n.$eval(e.value):e.value}).join(""):e},e.prototype.$log=function(e){var n=e?Se(this._data,e):this._data;if(n&&(n=t(n)),!e){var i;for(i in this.$options.computed)n[i]=t(this[i]);if(this._props)for(i in this._props)n[i]=t(this[i])}console.log(n)}}function kn(e){function t(e,t,i,o,r,s){t=n(t);var a=!H(t),c=o===!1||a?r:s,l=!a&&!e._isAttached&&!H(e.$el);return e._isFragment?(ce(e._fragmentStart,e._fragmentEnd,function(n){c(n,t,e)}),i&&i()):c(e.$el,t,e,i),l&&e._callHook("attached"),e}function n(e){return"string"==typeof e?document.querySelector(e):e}function i(e,t,n,i){t.appendChild(e),i&&i()}function o(e,t,n,i){W(e,t),i&&i()}function r(e,t,n){J(e),n&&n()}e.prototype.$nextTick=function(e){oi(e,this)},e.prototype.$appendTo=function(e,n,o){return t(this,e,n,o,i,R)},e.prototype.$prependTo=function(e,t,i){return e=n(e),e.hasChildNodes()?this.$before(e.firstChild,t,i):this.$appendTo(e,t,i),this},e.prototype.$before=function(e,n,i){return t(this,e,n,i,o,F)},e.prototype.$after=function(e,t,i){return e=n(e),e.nextSibling?this.$before(e.nextSibling,t,i):this.$appendTo(e.parentNode,t,i),this},e.prototype.$remove=function(e,t){if(!this.$el.parentNode)return e&&e();var n=this._isAttached&&H(this.$el);n||(t=!1);var i=this,o=function(){n&&i._callHook("detached"),e&&e()};if(this._isFragment)le(this._fragmentStart,this._fragmentEnd,this,this._fragment,o);else{var s=t===!1?r:M;s(this.$el,this,o)}return this}}function Cn(e){function t(e,t,i){var o=e.$parent;if(o&&i&&!n.test(t))for(;o;)o._eventsCount[t]=(o._eventsCount[t]||0)+i,o=o.$parent}e.prototype.$on=function(e,n){return(this._events[e]||(this._events[e]=[])).push(n),t(this,e,1),this},e.prototype.$once=function(e,t){function n(){i.$off(e,n),t.apply(this,arguments)}var i=this;return n.fn=t,this.$on(e,n),this},e.prototype.$off=function(e,n){var i;if(!arguments.length){if(this.$parent)for(e in this._events)i=this._events[e],i&&t(this,e,-i.length);return this._events={},this}if(i=this._events[e],!i)return this;if(1===arguments.length)return t(this,e,-i.length),this._events[e]=null,this;for(var o,r=i.length;r--;)if(o=i[r],o===n||o.fn===n){t(this,e,-1),i.splice(r,1);break}return this},e.prototype.$emit=function(e){var t="string"==typeof e;e=t?e:e.name;var n=this._events[e],i=t||!n;if(n){n=n.length>1?y(n):n;var o=t&&n.some(function(e){return e._fromParent});o&&(i=!1);for(var r=y(arguments,1),s=0,a=n.length;s<a;s++){var c=n[s],l=c.apply(this,r);l!==!0||o&&!c._fromParent||(i=!0)}}return i},e.prototype.$broadcast=function(e){var t="string"==typeof e;if(e=t?e:e.name,this._eventsCount[e]){var n=this.$children,i=y(arguments);t&&(i[0]={name:e,source:this});for(var o=0,r=n.length;o<r;o++){var s=n[o],a=s.$emit.apply(s,i);a&&s.$broadcast.apply(s,i)}return this}},e.prototype.$dispatch=function(e){var t=this.$emit.apply(this,arguments);if(t){var n=this.$parent,i=y(arguments);for(i[0]={name:e,source:this};n;)t=n.$emit.apply(n,i),n=t?n.$parent:null;return this}};var n=/^hook:/}function $n(e){function t(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")}e.prototype.$mount=function(e){return this._isCompiled?void("production"!==n.env.NODE_ENV&&Di("$mount() should be called only once.",this)):(e=L(e),e||(e=document.createElement("div")),this._compile(e),this._initDOMHooks(),H(this.$el)?(this._callHook("attached"),t.call(this)):this.$once("hook:attached",t),this)},e.prototype.$destroy=function(e,t){this._destroy(e,t)},e.prototype.$compile=function(e,t,n,i){return It(e,this.$options,!0)(this,e,t,n,i)}}function Nn(e){this._init(e)}function On(e,t,n){return n=n?parseInt(n,10):0,t=l(t),"number"==typeof t?e.slice(n,n+t):e}function An(e,t,n){if(e=ls(e),null==t)return e;if("function"==typeof t)return e.filter(t);t=(""+t).toLowerCase();for(var i,o,r,s,a="in"===n?3:2,c=Array.prototype.concat.apply([],y(arguments,a)),l=[],h=0,u=e.length;h<u;h++)if(i=e[h],r=i&&i.$value||i,s=c.length){for(;s--;)if(o=c[s],"$key"===o&&jn(i.$key,t)||jn(Se(r,o),t)){l.push(i);break}}else jn(i,t)&&l.push(i);return l}function Tn(e){function t(e,t,n){var o=i[n];return o&&("$key"!==o&&(m(e)&&"$value"in e&&(e=e.$value),m(t)&&"$value"in t&&(t=t.$value)),e=m(e)?Se(e,o):e,t=m(t)?Se(t,o):t),e===t?0:e>t?r:-r}var n=null,i=void 0;e=ls(e);var o=y(arguments,1),r=o[o.length-1];"number"==typeof r?(r=r<0?-1:1,o=o.length>1?o.slice(0,-1):o):r=1;var s=o[0];return s?("function"==typeof s?n=function(e,t){return s(e,t)*r}:(i=Array.prototype.concat.apply([],o),n=function(e,o,r){return r=r||0,r>=i.length-1?t(e,o,r):t(e,o,r)||n(e,o,r+1)}),e.slice().sort(n)):e}function jn(e,t){var n;if(g(e)){var i=Object.keys(e);for(n=i.length;n--;)if(jn(e[i[n]],t))return!0}else if(Ln(e)){for(n=e.length;n--;)if(jn(e[n],t))return!0}else if(null!=e)return e.toString().toLowerCase().indexOf(t)>-1}function Dn(e){function t(e){return new Function("return function "+v(e)+" (options) { this._init(options) }")()}e.options={directives:Ar,elementDirectives:cs,filters:us,transitions:{},components:{},partials:{},replace:!0},e.util=qi,e.config=ji,e.set=i,e["delete"]=o,e.nextTick=oi,e.compiler=is,e.FragmentFactory=ct,e.internalDirectives=Qr,e.parsers={path:ho,text:Oi,template:zo,directive:wi,expression:Co},e.cid=0;var r=1;e.extend=function(e){e=e||{};var i=this,o=0===i.cid;if(o&&e._Ctor)return e._Ctor;var s=e.name||i.options.name;"production"!==n.env.NODE_ENV&&(/^[a-zA-Z][\w-]*$/.test(s)||(Di('Invalid component name: "'+s+'". Component names can only contain alphanumeric characaters and the hyphen.'),s=null));var a=t(s||"VueComponent");return a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.cid=r++,a.options=me(i.options,e),a["super"]=i,a.extend=i.extend,ji._assetTypes.forEach(function(e){a[e]=i[e]}),s&&(a.options.components[s]=a),o&&(e._Ctor=a),a},e.use=function(e){if(!e.installed){var t=y(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):e.apply(null,t),e.installed=!0,this}},e.mixin=function(t){e.options=me(e.options,t)},ji._assetTypes.forEach(function(t){e[t]=function(i,o){return o?("production"!==n.env.NODE_ENV&&"component"===t&&(Ri.test(i)||Fi.test(i))&&Di("Do not use built-in or reserved HTML elements as component id: "+i),"component"===t&&g(o)&&(o.name||(o.name=i),o=e.extend(o)),this.options[t+"s"][i]=o,o):this.options[t+"s"][i]}}),b(e.transition,Vi)}var Sn=Object.prototype.hasOwnProperty,Vn=/^\s?(true|false|-?[\d\.]+|'[^']*'|"[^"]*")\s?$/,Pn=/-(\w)/g,Rn=/([a-z\d])([A-Z])/g,Fn=/(?:^|[-_\/])(\w)/g,Mn=Object.prototype.toString,In="[object Object]",Ln=Array.isArray,Hn="__proto__"in{},zn="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),Bn=zn&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,Un=zn&&window.navigator.userAgent.toLowerCase(),Wn=Un&&Un.indexOf("trident")>0,qn=Un&&Un.indexOf("msie 9.0")>0,Jn=Un&&Un.indexOf("android")>0,Qn=Un&&/(iphone|ipad|ipod|ios)/i.test(Un),Yn=Qn&&Un.match(/os ([\d_]+)/),Gn=Yn&&Yn[1].split("_"),Kn=Gn&&Number(Gn[0])>=9&&Number(Gn[1])>=3&&!window.indexedDB,Zn=void 0,Xn=void 0,ei=void 0,ti=void 0;if(zn&&!qn){var ni=void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend,ii=void 0===window.onanimationend&&void 0!==window.onwebkitanimationend;Zn=ni?"WebkitTransition":"transition",Xn=ni?"webkitTransitionEnd":"transitionend",ei=ii?"WebkitAnimation":"animation",ti=ii?"webkitAnimationEnd":"animationend"}var oi=function(){function e(){o=!1;var e=i.slice(0);i=[];for(var t=0;t<e.length;t++)e[t]()}var n,i=[],o=!1;if("undefined"==typeof MutationObserver||Kn){var r=zn?window:"undefined"!=typeof t?t:{};n=r.setImmediate||setTimeout}else{var s=1,a=new MutationObserver(e),c=document.createTextNode(s);a.observe(c,{characterData:!0}),n=function(){s=(s+1)%2,c.data=s}}return function(t,r){var s=r?function(){t.call(r)}:t;i.push(s),o||(o=!0,n(e,0))}}(),ri=void 0;"undefined"!=typeof Set&&Set.toString().match(/native code/)?ri=Set:(ri=function(){this.set=Object.create(null)},ri.prototype.has=function(e){return void 0!==this.set[e]},ri.prototype.add=function(e){this.set[e]=1},ri.prototype.clear=function(){this.set=Object.create(null)});var si=$.prototype;si.put=function(e,t){var n,i=this.get(e,!0);return i||(this.size===this.limit&&(n=this.shift()),i={key:e},this._keymap[e]=i,this.tail?(this.tail.newer=i,i.older=this.tail):this.head=i,this.tail=i,this.size++),i.value=t,n},si.shift=function(){var e=this.head;return e&&(this.head=this.head.newer,this.head.older=void 0,e.newer=e.older=void 0,this._keymap[e.key]=void 0,this.size--),e},si.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return n===this.tail?t?n:n.value:(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n,t?n:n.value)};var ai,ci,li,hi,ui,fi,pi,di,vi,_i,yi,bi,mi=new $(1e3),gi=/[^\s'"]+|'[^']*'|"[^"]*"/g,Ei=/^in$|^-?\d+/,wi=Object.freeze({parseDirective:A}),xi=/[-.*+?^${}()|[\]\/\\]/g,ki=void 0,Ci=void 0,$i=void 0,Ni=/[^|]\|[^|]/,Oi=Object.freeze({compileRegex:j,parseText:D,tokensToExp:S}),Ai=["{{","}}"],Ti=["{{{","}}}"],ji=Object.defineProperties({debug:!1,silent:!1,async:!0,warnExpressionErrors:!0,devtools:"production"!==n.env.NODE_ENV,_delimitersChanged:!0,_assetTypes:["component","directive","elementDirective","filter","transition","partial"],_propBindingModes:{ONE_WAY:0,TWO_WAY:1,ONE_TIME:2},_maxUpdateCount:100},{delimiters:{get:function(){return Ai},set:function(e){Ai=e,j()},configurable:!0,enumerable:!0},unsafeDelimiters:{get:function(){return Ti},set:function(e){Ti=e,j()},configurable:!0,enumerable:!0}}),Di=void 0,Si=void 0;"production"!==n.env.NODE_ENV&&!function(){var e="undefined"!=typeof console;Di=function(t,n){e&&!ji.silent&&console.error("[Vue warn]: "+t+(n?Si(n):""))},Si=function(e){var t=e._isVue?e.$options.name:e.name;return t?" (found in component: <"+d(t)+">)":""}}();var Vi=Object.freeze({appendWithTransition:R,beforeWithTransition:F,removeWithTransition:M,applyTransition:I}),Pi=/^v-ref:/,Ri=/^(div|p|span|img|a|b|i|br|ul|ol|li|h1|h2|h3|h4|h5|h6|code|pre|table|th|td|tr|form|label|input|select|option|nav|article|section|header|footer)$/i,Fi=/^(slot|partial|component)$/i,Mi=void 0;"production"!==n.env.NODE_ENV&&(Mi=function(e,t){return t.indexOf("-")>-1?e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:/HTMLUnknownElement/.test(e.toString())&&!/^(data|time|rtc|rb|details|dialog|summary)$/.test(t)});var Ii=ji.optionMergeStrategies=Object.create(null);Ii.data=function(e,t,i){return i?e||t?function(){var n="function"==typeof t?t.call(i):t,o="function"==typeof e?e.call(i):void 0;return n?de(n,o):o}:void 0:t?"function"!=typeof t?("production"!==n.env.NODE_ENV&&Di('The "data" option should be a function that returns a per-instance value in component definitions.',i),e):e?function(){return de(t.call(this),e.call(this))}:t:e},Ii.el=function(e,t,i){if(!i&&t&&"function"!=typeof t)return void("production"!==n.env.NODE_ENV&&Di('The "el" option should be a function that returns a per-instance value in component definitions.',i));var o=t||e;return i&&"function"==typeof o?o.call(i):o},Ii.init=Ii.created=Ii.ready=Ii.attached=Ii.detached=Ii.beforeCompile=Ii.compiled=Ii.beforeDestroy=Ii.destroyed=Ii.activate=function(e,t){return t?e?e.concat(t):Ln(t)?t:[t]:e},ji._assetTypes.forEach(function(e){Ii[e+"s"]=ve}),Ii.watch=Ii.events=function(e,t){if(!t)return e;if(!e)return t;var n={};b(n,e);for(var i in t){var o=n[i],r=t[i];o&&!Ln(o)&&(o=[o]),n[i]=o?o.concat(r):[r]}return n},Ii.props=Ii.methods=Ii.computed=function(e,t){if(!t)return e;if(!e)return t;var n=Object.create(null);return b(n,e),b(n,t),n};var Li=function(e,t){return void 0===t?e:t},Hi=0;Ee.target=null,Ee.prototype.addSub=function(e){this.subs.push(e)},Ee.prototype.removeSub=function(e){this.subs.$remove(e)},Ee.prototype.depend=function(){Ee.target.addDep(this)},Ee.prototype.notify=function(){for(var e=y(this.subs),t=0,n=e.length;t<n;t++)e[t].update()};var zi=Array.prototype,Bi=Object.create(zi);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=zi[e];E(Bi,e,function(){for(var n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];var o,r=t.apply(this,i),s=this.__ob__;switch(e){case"push":o=i;break;case"unshift":o=i;break;case"splice":o=i.slice(2)}return o&&s.observeArray(o),s.dep.notify(),r})}),E(zi,"$set",function(e,t){return e>=this.length&&(this.length=Number(e)+1),this.splice(e,1,t)[0]}),E(zi,"$remove",function(e){if(this.length){var t=x(this,e);return t>-1?this.splice(t,1):void 0}});var Ui=Object.getOwnPropertyNames(Bi),Wi=!0;xe.prototype.walk=function(e){for(var t=Object.keys(e),n=0,i=t.length;n<i;n++)this.convert(t[n],e[t[n]])},xe.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)$e(e[t])},xe.prototype.convert=function(e,t){Ne(this.value,e,t)},xe.prototype.addVm=function(e){(this.vms||(this.vms=[])).push(e)},xe.prototype.removeVm=function(e){this.vms.$remove(e)};var qi=Object.freeze({defineReactive:Ne,set:i,del:o,hasOwn:r,isLiteral:s,isReserved:a,_toString:c,toNumber:l,toBoolean:h,stripQuotes:u,camelize:f,hyphenate:d,classify:v,bind:_,toArray:y,extend:b,isObject:m,isPlainObject:g,def:E,debounce:w,indexOf:x,cancellable:k,looseEqual:C,isArray:Ln,hasProto:Hn,inBrowser:zn,devtools:Bn,isIE:Wn,isIE9:qn,isAndroid:Jn,isIos:Qn,iosVersionMatch:Yn,iosVersion:Gn,hasMutationObserverBug:Kn,get transitionProp(){return Zn},get transitionEndEvent(){return Xn},get animationProp(){return ei},get animationEndEvent(){return ti},nextTick:oi,get _Set(){return ri},query:L,inDoc:H,getAttr:z,getBindAttr:B,hasBindAttr:U,before:W,after:q,remove:J,prepend:Q,replace:Y,on:G,off:K,setClass:X,addClass:ee,removeClass:te,extractContent:ne,trimNode:ie,isTemplate:re,createAnchor:se,findRef:ae,mapNodeRange:ce,removeNodeRange:le,isFragment:he,getOuterHTML:ue,mergeOptions:me,resolveAsset:ge,checkComponentAttr:fe,commonTagRE:Ri,reservedTagRE:Fi,get warn(){return Di}}),Ji=0,Qi=new $(1e3),Yi=0,Gi=1,Ki=2,Zi=3,Xi=0,eo=1,to=2,no=3,io=4,oo=5,ro=6,so=7,ao=8,co=[];co[Xi]={ws:[Xi],ident:[no,Yi],"[":[io],eof:[so]},co[eo]={ws:[eo],".":[to],"[":[io],eof:[so]},co[to]={ws:[to],ident:[no,Yi]},co[no]={ident:[no,Yi],0:[no,Yi],number:[no,Yi],ws:[eo,Gi],".":[to,Gi],"[":[io,Gi],eof:[so,Gi]},co[io]={"'":[oo,Yi],'"':[ro,Yi],"[":[io,Ki],"]":[eo,Zi],eof:ao,"else":[io,Yi]},co[oo]={"'":[io,Yi],eof:ao,"else":[oo,Yi]},co[ro]={'"':[io,Yi],eof:ao,"else":[ro,Yi]};var lo;"production"!==n.env.NODE_ENV&&(lo=function(e,t){Di('You are setting a non-existent path "'+e.raw+'" on a vm instance. Consider pre-initializing the property with the "data" option for more reliable reactivity and better performance.',t)});var ho=Object.freeze({parsePath:De,getPath:Se,setPath:Ve}),uo=new $(1e3),fo="Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat",po=new RegExp("^("+fo.replace(/,/g,"\\b|")+"\\b)"),vo="break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,return,super,switch,throw,try,var,while,with,yield,enum,await,implements,package,protected,static,interface,private,public",_o=new RegExp("^("+vo.replace(/,/g,"\\b|")+"\\b)"),yo=/\s/g,bo=/\n/g,mo=/[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`)|new |typeof |void /g,go=/"(\d+)"/g,Eo=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,wo=/[^\w$\.](?:[A-Za-z_$][\w$]*)/g,xo=/^(?:true|false|null|undefined|Infinity|NaN)$/,ko=[],Co=Object.freeze({parseExpression:ze,isSimplePath:Be}),$o=[],No=[],Oo={},Ao={},To=!1,jo=0;Qe.prototype.get=function(){this.beforeGet();var e,t=this.scope||this.vm;try{e=this.getter.call(t,t)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating expression "'+this.expression+'": '+i.toString(),this.vm)}return this.deep&&Ye(e),this.preProcess&&(e=this.preProcess(e)),this.filters&&(e=t._applyFilters(e,null,this.filters,!1)),this.postProcess&&(e=this.postProcess(e)),this.afterGet(),e},Qe.prototype.set=function(e){var t=this.scope||this.vm;this.filters&&(e=t._applyFilters(e,this.value,this.filters,!0));try{this.setter.call(t,t,e)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating setter "'+this.expression+'": '+i.toString(),this.vm)}var o=t.$forContext;if(o&&o.alias===this.expression){if(o.filters)return void("production"!==n.env.NODE_ENV&&Di("It seems you are using two-way binding on a v-for alias ("+this.expression+"), and the v-for has filters. This will not work properly. Either remove the filters or use an array of objects and bind to object properties instead.",this.vm));o._withLock(function(){t.$key?o.rawValue[t.$key]=e:o.rawValue.$set(t.$index,e)})}},Qe.prototype.beforeGet=function(){Ee.target=this},Qe.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},Qe.prototype.afterGet=function(){Ee.target=null;for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Qe.prototype.update=function(e){this.lazy?this.dirty=!0:this.sync||!ji.async?this.run():(this.shallow=this.queued?!!e&&this.shallow:!!e,this.queued=!0,"production"!==n.env.NODE_ENV&&ji.debug&&(this.prevError=new Error("[vue] async stack trace")),Je(this))},Qe.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||(m(e)||this.deep)&&!this.shallow){var t=this.value;this.value=e;var i=this.prevError;if("production"!==n.env.NODE_ENV&&ji.debug&&i){this.prevError=null;try{this.cb.call(this.vm,e,t)}catch(o){throw oi(function(){throw i},0),o}}else this.cb.call(this.vm,e,t)}this.queued=this.shallow=!1}},Qe.prototype.evaluate=function(){var e=Ee.target;this.value=this.get(),this.dirty=!1,Ee.target=e},Qe.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},Qe.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||this.vm._vForRemoving||this.vm._watchers.$remove(this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1,this.vm=this.cb=this.value=null}};var Do=new ri,So={bind:function(){this.attr=3===this.el.nodeType?"data":"textContent"},update:function(e){this.el[this.attr]=c(e)}},Vo=new $(1e3),Po=new $(1e3),Ro={efault:[0,"",""],legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]};Ro.td=Ro.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Ro.option=Ro.optgroup=[1,'<select multiple="multiple">',"</select>"],Ro.thead=Ro.tbody=Ro.colgroup=Ro.caption=Ro.tfoot=[1,"<table>","</table>"],Ro.g=Ro.defs=Ro.symbol=Ro.use=Ro.image=Ro.text=Ro.circle=Ro.ellipse=Ro.line=Ro.path=Ro.polygon=Ro.polyline=Ro.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events"version="1.1">',"</svg>"];var Fo=/<([\w:-]+)/,Mo=/&#?\w+?;/,Io=/<!--/,Lo=function(){if(zn){var e=document.createElement("div");return e.innerHTML="<template>1</template>",!e.cloneNode(!0).firstChild.innerHTML}return!1}(),Ho=function(){if(zn){var e=document.createElement("textarea");return e.placeholder="t","t"===e.cloneNode(!0).value}return!1}(),zo=Object.freeze({cloneNode:Xe,parseTemplate:et}),Bo={bind:function(){8===this.el.nodeType&&(this.nodes=[],this.anchor=se("v-html"),Y(this.el,this.anchor))},update:function(e){e=c(e),this.nodes?this.swap(e):this.el.innerHTML=e},swap:function(e){for(var t=this.nodes.length;t--;)J(this.nodes[t]);var n=et(e,!0,!0);this.nodes=y(n.childNodes),W(n,this.anchor)}};tt.prototype.callHook=function(e){var t,n;for(t=0,n=this.childFrags.length;t<n;t++)this.childFrags[t].callHook(e);for(t=0,n=this.children.length;t<n;t++)e(this.children[t])},tt.prototype.beforeRemove=function(){var e,t;for(e=0,t=this.childFrags.length;e<t;e++)this.childFrags[e].beforeRemove(!1);for(e=0,t=this.children.length;e<t;e++)this.children[e].$destroy(!1,!0);var n=this.unlink.dirs;for(e=0,t=n.length;e<t;e++)n[e]._watcher&&n[e]._watcher.teardown()},tt.prototype.destroy=function(){this.parentFrag&&this.parentFrag.childFrags.$remove(this),this.node.__v_frag=null,this.unlink()};var Uo=new $(5e3);ct.prototype.create=function(e,t,n){var i=Xe(this.template);return new tt(this.linker,this.vm,i,e,t,n)};var Wo=700,qo=800,Jo=850,Qo=1100,Yo=1500,Go=1500,Ko=1750,Zo=2100,Xo=2200,er=2300,tr=0,nr={priority:Xo,terminal:!0,params:["track-by","stagger","enter-stagger","leave-stagger"],bind:function(){var e=this.expression.match(/(.*) (?:in|of) (.*)/);if(e){var t=e[1].match(/\((.*),(.*)\)/);t?(this.iterator=t[1].trim(),this.alias=t[2].trim()):this.alias=e[1].trim(),this.expression=e[2]}if(!this.alias)return void("production"!==n.env.NODE_ENV&&Di('Invalid v-for expression "'+this.descriptor.raw+'": alias is required.',this.vm));this.id="__v-for__"+ ++tr;var i=this.el.tagName;this.isOption=("OPTION"===i||"OPTGROUP"===i)&&"SELECT"===this.el.parentNode.tagName,this.start=se("v-for-start"),this.end=se("v-for-end"),Y(this.el,this.end),W(this.start,this.end),this.cache=Object.create(null),this.factory=new ct(this.vm,this.el)},update:function(e){this.diff(e),this.updateRef(),this.updateModel()},diff:function(e){var t,n,i,o,s,a,c=e[0],l=this.fromObject=m(c)&&r(c,"$key")&&r(c,"$value"),h=this.params.trackBy,u=this.frags,f=this.frags=new Array(e.length),p=this.alias,d=this.iterator,v=this.start,_=this.end,y=H(v),b=!u;for(t=0,n=e.length;t<n;t++)c=e[t],o=l?c.$key:null,s=l?c.$value:c,a=!m(s),i=!b&&this.getCachedFrag(s,t,o),i?(i.reused=!0,i.scope.$index=t,o&&(i.scope.$key=o),d&&(i.scope[d]=null!==o?o:t),(h||l||a)&&we(function(){i.scope[p]=s})):(i=this.create(s,p,t,o),i.fresh=!b),f[t]=i,b&&i.before(_);if(!b){var g=0,E=u.length-f.length;for(this.vm._vForRemoving=!0,t=0,n=u.length;t<n;t++)i=u[t],i.reused||(this.deleteCachedFrag(i),this.remove(i,g++,E,y));this.vm._vForRemoving=!1,g&&(this.vm._watchers=this.vm._watchers.filter(function(e){return e.active}));var w,x,k,C=0;for(t=0,n=f.length;t<n;t++)i=f[t],w=f[t-1],x=w?w.staggerCb?w.staggerAnchor:w.end||w.node:v,i.reused&&!i.staggerCb?(k=lt(i,v,this.id),k===w||k&&lt(k,v,this.id)===w||this.move(i,x)):this.insert(i,C++,x,y),i.reused=i.fresh=!1}},create:function(e,t,n,i){var o=this._host,r=this._scope||this.vm,s=Object.create(r);s.$refs=Object.create(r.$refs),s.$els=Object.create(r.$els),s.$parent=r,s.$forContext=this,we(function(){Ne(s,t,e)}),Ne(s,"$index",n),i?Ne(s,"$key",i):s.$key&&E(s,"$key",null),this.iterator&&Ne(s,this.iterator,null!==i?i:n);var a=this.factory.create(o,s,this._frag);return a.forId=this.id,this.cacheFrag(e,a,n,i),a},updateRef:function(){var e=this.descriptor.ref;if(e){var t,n=(this._scope||this.vm).$refs;this.fromObject?(t={},this.frags.forEach(function(e){t[e.scope.$key]=ht(e)})):t=this.frags.map(ht),n[e]=t}},updateModel:function(){if(this.isOption){var e=this.start.parentNode,t=e&&e.__v_model;t&&t.forceUpdate()}},insert:function(e,t,n,i){e.staggerCb&&(e.staggerCb.cancel(),e.staggerCb=null);var o=this.getStagger(e,t,null,"enter");if(i&&o){var r=e.staggerAnchor;r||(r=e.staggerAnchor=se("stagger-anchor"),r.__v_frag=e),q(r,n);var s=e.staggerCb=k(function(){e.staggerCb=null,e.before(r),J(r)});setTimeout(s,o)}else{var a=n.nextSibling;a||(q(this.end,n),a=this.end),e.before(a)}},remove:function(e,t,n,i){if(e.staggerCb)return e.staggerCb.cancel(),void(e.staggerCb=null);var o=this.getStagger(e,t,n,"leave");if(i&&o){var r=e.staggerCb=k(function(){e.staggerCb=null,e.remove()});setTimeout(r,o)}else e.remove()},move:function(e,t){t.nextSibling||this.end.parentNode.appendChild(this.end),e.before(t.nextSibling,!1)},cacheFrag:function(e,t,i,o){var s,a=this.params.trackBy,c=this.cache,l=!m(e);o||a||l?(s=ft(i,o,e,a),c[s]?"$index"!==a&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):c[s]=t):(s=this.id,r(e,s)?null===e[s]?e[s]=t:"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):Object.isExtensible(e)?E(e,s,t):"production"!==n.env.NODE_ENV&&Di("Frozen v-for objects cannot be automatically tracked, make sure to provide a track-by key.")),t.raw=e;
},getCachedFrag:function(e,t,i){var o,r=this.params.trackBy,s=!m(e);if(i||r||s){var a=ft(t,i,e,r);o=this.cache[a]}else o=e[this.id];return o&&(o.reused||o.fresh)&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e),o},deleteCachedFrag:function(e){var t=e.raw,n=this.params.trackBy,i=e.scope,o=i.$index,s=r(i,"$key")&&i.$key,a=!m(t);if(n||s||a){var c=ft(o,s,t,n);this.cache[c]=null}else t[this.id]=null,e.raw=null},getStagger:function(e,t,n,i){i+="Stagger";var o=e.node.__v_trans,r=o&&o.hooks,s=r&&(r[i]||r.stagger);return s?s.call(e,t,n):t*parseInt(this.params[i]||this.params.stagger,10)},_preProcess:function(e){return this.rawValue=e,e},_postProcess:function(e){if(Ln(e))return e;if(g(e)){for(var t,n=Object.keys(e),i=n.length,o=new Array(i);i--;)t=n[i],o[i]={$key:t,$value:e[t]};return o}return"number"!=typeof e||isNaN(e)||(e=ut(e)),e||[]},unbind:function(){if(this.descriptor.ref&&((this._scope||this.vm).$refs[this.descriptor.ref]=null),this.frags)for(var e,t=this.frags.length;t--;)e=this.frags[t],this.deleteCachedFrag(e),e.destroy()}};"production"!==n.env.NODE_ENV&&(nr.warnDuplicate=function(e){Di('Duplicate value found in v-for="'+this.descriptor.raw+'": '+JSON.stringify(e)+'. Use track-by="$index" if you are expecting duplicate values.',this.vm)});var ir={priority:Zo,terminal:!0,bind:function(){var e=this.el;if(e.__vue__)"production"!==n.env.NODE_ENV&&Di('v-if="'+this.expression+'" cannot be used on an instance root element.',this.vm),this.invalid=!0;else{var t=e.nextElementSibling;t&&null!==z(t,"v-else")&&(J(t),this.elseEl=t),this.anchor=se("v-if"),Y(e,this.anchor)}},update:function(e){this.invalid||(e?this.frag||this.insert():this.remove())},insert:function(){this.elseFrag&&(this.elseFrag.remove(),this.elseFrag=null),this.factory||(this.factory=new ct(this.vm,this.el)),this.frag=this.factory.create(this._host,this._scope,this._frag),this.frag.before(this.anchor)},remove:function(){this.frag&&(this.frag.remove(),this.frag=null),this.elseEl&&!this.elseFrag&&(this.elseFactory||(this.elseFactory=new ct(this.elseEl._context||this.vm,this.elseEl)),this.elseFrag=this.elseFactory.create(this._host,this._scope,this._frag),this.elseFrag.before(this.anchor))},unbind:function(){this.frag&&this.frag.destroy(),this.elseFrag&&this.elseFrag.destroy()}},or={bind:function(){var e=this.el.nextElementSibling;e&&null!==z(e,"v-else")&&(this.elseEl=e)},update:function(e){this.apply(this.el,e),this.elseEl&&this.apply(this.elseEl,!e)},apply:function(e,t){function n(){e.style.display=t?"":"none"}H(e)?I(e,t?1:-1,n,this.vm):n()}},rr={bind:function(){var e=this,t=this.el,n="range"===t.type,i=this.params.lazy,o=this.params.number,r=this.params.debounce,s=!1;if(Jn||n||(this.on("compositionstart",function(){s=!0}),this.on("compositionend",function(){s=!1,i||e.listener()})),this.focused=!1,n||i||(this.on("focus",function(){e.focused=!0}),this.on("blur",function(){e.focused=!1,e._frag&&!e._frag.inserted||e.rawListener()})),this.listener=this.rawListener=function(){if(!s&&e._bound){var i=o||n?l(t.value):t.value;e.set(i),oi(function(){e._bound&&!e.focused&&e.update(e._watcher.value)})}},r&&(this.listener=w(this.listener,r)),this.hasjQuery="function"==typeof jQuery,this.hasjQuery){var a=jQuery.fn.on?"on":"bind";jQuery(t)[a]("change",this.rawListener),i||jQuery(t)[a]("input",this.listener)}else this.on("change",this.rawListener),i||this.on("input",this.listener);!i&&qn&&(this.on("cut",function(){oi(e.listener)}),this.on("keyup",function(t){46!==t.keyCode&&8!==t.keyCode||e.listener()})),(t.hasAttribute("value")||"TEXTAREA"===t.tagName&&t.value.trim())&&(this.afterBind=this.listener)},update:function(e){e=c(e),e!==this.el.value&&(this.el.value=e)},unbind:function(){var e=this.el;if(this.hasjQuery){var t=jQuery.fn.off?"off":"unbind";jQuery(e)[t]("change",this.listener),jQuery(e)[t]("input",this.listener)}}},sr={bind:function(){var e=this,t=this.el;this.getValue=function(){if(t.hasOwnProperty("_value"))return t._value;var n=t.value;return e.params.number&&(n=l(n)),n},this.listener=function(){e.set(e.getValue())},this.on("change",this.listener),t.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){this.el.checked=C(e,this.getValue())}},ar={bind:function(){var e=this,t=this,n=this.el;this.forceUpdate=function(){t._watcher&&t.update(t._watcher.get())};var i=this.multiple=n.hasAttribute("multiple");this.listener=function(){var e=pt(n,i);e=t.params.number?Ln(e)?e.map(l):l(e):e,t.set(e)},this.on("change",this.listener);var o=pt(n,i,!0);(i&&o.length||!i&&null!==o)&&(this.afterBind=this.listener),this.vm.$on("hook:attached",function(){oi(e.forceUpdate)}),H(n)||oi(this.forceUpdate)},update:function(e){var t=this.el;t.selectedIndex=-1;for(var n,i,o=this.multiple&&Ln(e),r=t.options,s=r.length;s--;)n=r[s],i=n.hasOwnProperty("_value")?n._value:n.value,n.selected=o?dt(e,i)>-1:C(e,i)},unbind:function(){this.vm.$off("hook:attached",this.forceUpdate)}},cr={bind:function(){function e(){var e=n.checked;return e&&n.hasOwnProperty("_trueValue")?n._trueValue:!e&&n.hasOwnProperty("_falseValue")?n._falseValue:e}var t=this,n=this.el;this.getValue=function(){return n.hasOwnProperty("_value")?n._value:t.params.number?l(n.value):n.value},this.listener=function(){var i=t._watcher.value;if(Ln(i)){var o=t.getValue();n.checked?x(i,o)<0&&i.push(o):i.$remove(o)}else t.set(e())},this.on("change",this.listener),n.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){var t=this.el;Ln(e)?t.checked=x(e,this.getValue())>-1:t.hasOwnProperty("_trueValue")?t.checked=C(e,t._trueValue):t.checked=!!e}},lr={text:rr,radio:sr,select:ar,checkbox:cr},hr={priority:qo,twoWay:!0,handlers:lr,params:["lazy","number","debounce"],bind:function(){this.checkFilters(),this.hasRead&&!this.hasWrite&&"production"!==n.env.NODE_ENV&&Di('It seems you are using a read-only filter with v-model="'+this.descriptor.raw+'". You might want to use a two-way filter to ensure correct behavior.',this.vm);var e,t=this.el,i=t.tagName;if("INPUT"===i)e=lr[t.type]||lr.text;else if("SELECT"===i)e=lr.select;else{if("TEXTAREA"!==i)return void("production"!==n.env.NODE_ENV&&Di("v-model does not support element type: "+i,this.vm));e=lr.text}t.__v_model=this,e.bind.call(this),this.update=e.update,this._unbind=e.unbind},checkFilters:function(){var e=this.filters;if(e)for(var t=e.length;t--;){var n=ge(this.vm.$options,"filters",e[t].name);("function"==typeof n||n.read)&&(this.hasRead=!0),n.write&&(this.hasWrite=!0)}},unbind:function(){this.el.__v_model=null,this._unbind&&this._unbind()}},ur={esc:27,tab:9,enter:13,space:32,"delete":[8,46],up:38,left:37,right:39,down:40},fr={priority:Wo,acceptStatement:!0,keyCodes:ur,bind:function(){if("IFRAME"===this.el.tagName&&"load"!==this.arg){var e=this;this.iframeBind=function(){G(e.el.contentWindow,e.arg,e.handler,e.modifiers.capture)},this.on("load",this.iframeBind)}},update:function(e){if(this.descriptor.raw||(e=function(){}),"function"!=typeof e)return void("production"!==n.env.NODE_ENV&&Di("v-on:"+this.arg+'="'+this.expression+'" expects a function value, got '+e,this.vm));this.modifiers.stop&&(e=_t(e)),this.modifiers.prevent&&(e=yt(e)),this.modifiers.self&&(e=bt(e));var t=Object.keys(this.modifiers).filter(function(e){return"stop"!==e&&"prevent"!==e&&"self"!==e&&"capture"!==e});t.length&&(e=vt(e,t)),this.reset(),this.handler=e,this.iframeBind?this.iframeBind():G(this.el,this.arg,this.handler,this.modifiers.capture)},reset:function(){var e=this.iframeBind?this.el.contentWindow:this.el;this.handler&&K(e,this.arg,this.handler)},unbind:function(){this.reset()}},pr=["-webkit-","-moz-","-ms-"],dr=["Webkit","Moz","ms"],vr=/!important;?$/,_r=Object.create(null),yr=null,br={deep:!0,update:function(e){"string"==typeof e?this.el.style.cssText=e:Ln(e)?this.handleObject(e.reduce(b,{})):this.handleObject(e||{})},handleObject:function(e){var t,n,i=this.cache||(this.cache={});for(t in i)t in e||(this.handleSingle(t,null),delete i[t]);for(t in e)n=e[t],n!==i[t]&&(i[t]=n,this.handleSingle(t,n))},handleSingle:function(e,t){if(e=mt(e))if(null!=t&&(t+=""),t){var i=vr.test(t)?"important":"";i?("production"!==n.env.NODE_ENV&&Di("It's probably a bad idea to use !important with inline rules. This feature will be deprecated in a future version of Vue."),t=t.replace(vr,"").trim(),this.el.style.setProperty(e.kebab,t,i)):this.el.style[e.camel]=t}else this.el.style[e.camel]=""}},mr="http://www.w3.org/1999/xlink",gr=/^xlink:/,Er=/^v-|^:|^@|^(?:is|transition|transition-mode|debounce|track-by|stagger|enter-stagger|leave-stagger)$/,wr=/^(?:value|checked|selected|muted)$/,xr=/^(?:draggable|contenteditable|spellcheck)$/,kr={value:"_value","true-value":"_trueValue","false-value":"_falseValue"},Cr={priority:Jo,bind:function(){var e=this.arg,t=this.el.tagName;e||(this.deep=!0);var i=this.descriptor,o=i.interp;if(o&&(i.hasOneTime&&(this.expression=S(o,this._scope||this.vm)),(Er.test(e)||"name"===e&&("PARTIAL"===t||"SLOT"===t))&&("production"!==n.env.NODE_ENV&&Di(e+'="'+i.raw+'": attribute interpolation is not allowed in Vue.js directives and special attributes.',this.vm),this.el.removeAttribute(e),this.invalid=!0),"production"!==n.env.NODE_ENV)){var r=e+'="'+i.raw+'": ';"src"===e&&Di(r+'interpolation in "src" attribute will cause a 404 request. Use v-bind:src instead.',this.vm),"style"===e&&Di(r+'interpolation in "style" attribute will cause the attribute to be discarded in Internet Explorer. Use v-bind:style instead.',this.vm)}},update:function(e){if(!this.invalid){var t=this.arg;this.arg?this.handleSingle(t,e):this.handleObject(e||{})}},handleObject:br.handleObject,handleSingle:function(e,t){var n=this.el,i=this.descriptor.interp;if(this.modifiers.camel&&(e=f(e)),!i&&wr.test(e)&&e in n){var o="value"===e&&null==t?"":t;n[e]!==o&&(n[e]=o)}var r=kr[e];if(!i&&r){n[r]=t;var s=n.__v_model;s&&s.listener()}return"value"===e&&"TEXTAREA"===n.tagName?void n.removeAttribute(e):void(xr.test(e)?n.setAttribute(e,t?"true":"false"):null!=t&&t!==!1?"class"===e?(n.__v_trans&&(t+=" "+n.__v_trans.id+"-transition"),X(n,t)):gr.test(e)?n.setAttributeNS(mr,e,t===!0?"":t):n.setAttribute(e,t===!0?"":t):n.removeAttribute(e))}},$r={priority:Yo,bind:function(){if(this.arg){var e=this.id=f(this.arg),t=(this._scope||this.vm).$els;r(t,e)?t[e]=this.el:Ne(t,e,this.el)}},unbind:function(){var e=(this._scope||this.vm).$els;e[this.id]===this.el&&(e[this.id]=null)}},Nr={bind:function(){"production"!==n.env.NODE_ENV&&Di("v-ref:"+this.arg+" must be used on a child component. Found on <"+this.el.tagName.toLowerCase()+">.",this.vm)}},Or={bind:function(){var e=this.el;this.vm.$once("pre-hook:compiled",function(){e.removeAttribute("v-cloak")})}},Ar={text:So,html:Bo,"for":nr,"if":ir,show:or,model:hr,on:fr,bind:Cr,el:$r,ref:Nr,cloak:Or},Tr={deep:!0,update:function(e){e?"string"==typeof e?this.setClass(e.trim().split(/\s+/)):this.setClass(Et(e)):this.cleanup()},setClass:function(e){this.cleanup(e);for(var t=0,n=e.length;t<n;t++){var i=e[t];i&&wt(this.el,i,ee)}this.prevKeys=e},cleanup:function(e){var t=this.prevKeys;if(t)for(var n=t.length;n--;){var i=t[n];(!e||e.indexOf(i)<0)&&wt(this.el,i,te)}}},jr={priority:Go,params:["keep-alive","transition-mode","inline-template"],bind:function(){this.el.__vue__?"production"!==n.env.NODE_ENV&&Di('cannot mount component "'+this.expression+'" on already mounted element: '+this.el):(this.keepAlive=this.params.keepAlive,this.keepAlive&&(this.cache={}),this.params.inlineTemplate&&(this.inlineTemplate=ne(this.el,!0)),this.pendingComponentCb=this.Component=null,this.pendingRemovals=0,this.pendingRemovalCb=null,this.anchor=se("v-component"),Y(this.el,this.anchor),this.el.removeAttribute("is"),this.el.removeAttribute(":is"),this.descriptor.ref&&this.el.removeAttribute("v-ref:"+d(this.descriptor.ref)),this.literal&&this.setComponent(this.expression))},update:function(e){this.literal||this.setComponent(e)},setComponent:function(e,t){if(this.invalidatePending(),e){var n=this;this.resolveComponent(e,function(){n.mountComponent(t)})}else this.unbuild(!0),this.remove(this.childVM,t),this.childVM=null},resolveComponent:function(e,t){var n=this;this.pendingComponentCb=k(function(i){n.ComponentName=i.options.name||("string"==typeof e?e:null),n.Component=i,t()}),this.vm._resolveComponent(e,this.pendingComponentCb)},mountComponent:function(e){this.unbuild(!0);var t=this,n=this.Component.options.activate,i=this.getCached(),o=this.build();n&&!i?(this.waitingFor=o,xt(n,o,function(){t.waitingFor===o&&(t.waitingFor=null,t.transition(o,e))})):(i&&o._updateRef(),this.transition(o,e))},invalidatePending:function(){this.pendingComponentCb&&(this.pendingComponentCb.cancel(),this.pendingComponentCb=null)},build:function(e){var t=this.getCached();if(t)return t;if(this.Component){var i={name:this.ComponentName,el:Xe(this.el),template:this.inlineTemplate,parent:this._host||this.vm,_linkerCachable:!this.inlineTemplate,_ref:this.descriptor.ref,_asComponent:!0,_isRouterView:this._isRouterView,_context:this.vm,_scope:this._scope,_frag:this._frag};e&&b(i,e);var o=new this.Component(i);return this.keepAlive&&(this.cache[this.Component.cid]=o),"production"!==n.env.NODE_ENV&&this.el.hasAttribute("transition")&&o._isFragment&&Di("Transitions will not work on a fragment instance. Template: "+o.$options.template,o),o}},getCached:function(){return this.keepAlive&&this.cache[this.Component.cid]},unbuild:function(e){this.waitingFor&&(this.keepAlive||this.waitingFor.$destroy(),this.waitingFor=null);var t=this.childVM;return!t||this.keepAlive?void(t&&(t._inactive=!0,t._updateRef(!0))):void t.$destroy(!1,e)},remove:function(e,t){var n=this.keepAlive;if(e){this.pendingRemovals++,this.pendingRemovalCb=t;var i=this;e.$remove(function(){i.pendingRemovals--,n||e._cleanup(),!i.pendingRemovals&&i.pendingRemovalCb&&(i.pendingRemovalCb(),i.pendingRemovalCb=null)})}else t&&t()},transition:function(e,t){var n=this,i=this.childVM;switch(i&&(i._inactive=!0),e._inactive=!1,this.childVM=e,n.params.transitionMode){case"in-out":e.$before(n.anchor,function(){n.remove(i,t)});break;case"out-in":n.remove(i,function(){e.$before(n.anchor,t)});break;default:n.remove(i),e.$before(n.anchor,t)}},unbind:function(){if(this.invalidatePending(),this.unbuild(),this.cache){for(var e in this.cache)this.cache[e].$destroy();this.cache=null}}},Dr=ji._propBindingModes,Sr={},Vr=/^[$_a-zA-Z]+[\w$]*$/,Pr=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\[[^\[\]]+\])*$/,Rr=ji._propBindingModes,Fr={bind:function(){var e=this.vm,t=e._context,n=this.descriptor.prop,i=n.path,o=n.parentPath,r=n.mode===Rr.TWO_WAY,s=this.parentWatcher=new Qe(t,o,function(t){Ot(e,n,t)},{twoWay:r,filters:n.filters,scope:this._scope});if(Nt(e,n,s.value),r){var a=this;e.$once("pre-hook:created",function(){a.childWatcher=new Qe(e,i,function(e){s.set(e)},{sync:!0})})}},unbind:function(){this.parentWatcher.teardown(),this.childWatcher&&this.childWatcher.teardown()}},Mr=[],Ir=!1,Lr="transition",Hr="animation",zr=Zn+"Duration",Br=ei+"Duration",Ur=zn&&window.requestAnimationFrame,Wr=Ur?function(e){Ur(function(){Ur(e)})}:function(e){setTimeout(e,50)},qr=Ft.prototype;qr.enter=function(e,t){this.cancelPending(),this.callHook("beforeEnter"),this.cb=t,ee(this.el,this.enterClass),e(),this.entered=!1,this.callHookWithCb("enter"),this.entered||(this.cancel=this.hooks&&this.hooks.enterCancelled,Pt(this.enterNextTick))},qr.enterNextTick=function(){var e=this;this.justEntered=!0,Wr(function(){e.justEntered=!1});var t=this.enterDone,n=this.getCssTransitionType(this.enterClass);this.pendingJsCb?n===Lr&&te(this.el,this.enterClass):n===Lr?(te(this.el,this.enterClass),this.setupCssCb(Xn,t)):n===Hr?this.setupCssCb(ti,t):t()},qr.enterDone=function(){this.entered=!0,this.cancel=this.pendingJsCb=null,te(this.el,this.enterClass),this.callHook("afterEnter"),this.cb&&this.cb()},qr.leave=function(e,t){this.cancelPending(),this.callHook("beforeLeave"),this.op=e,this.cb=t,ee(this.el,this.leaveClass),this.left=!1,this.callHookWithCb("leave"),this.left||(this.cancel=this.hooks&&this.hooks.leaveCancelled,this.op&&!this.pendingJsCb&&(this.justEntered?this.leaveDone():Pt(this.leaveNextTick)))},qr.leaveNextTick=function(){var e=this.getCssTransitionType(this.leaveClass);if(e){var t=e===Lr?Xn:ti;this.setupCssCb(t,this.leaveDone)}else this.leaveDone()},qr.leaveDone=function(){this.left=!0,this.cancel=this.pendingJsCb=null,this.op(),te(this.el,this.leaveClass),this.callHook("afterLeave"),this.cb&&this.cb(),this.op=null},qr.cancelPending=function(){this.op=this.cb=null;var e=!1;this.pendingCssCb&&(e=!0,K(this.el,this.pendingCssEvent,this.pendingCssCb),this.pendingCssEvent=this.pendingCssCb=null),this.pendingJsCb&&(e=!0,this.pendingJsCb.cancel(),this.pendingJsCb=null),e&&(te(this.el,this.enterClass),te(this.el,this.leaveClass)),this.cancel&&(this.cancel.call(this.vm,this.el),this.cancel=null)},qr.callHook=function(e){this.hooks&&this.hooks[e]&&this.hooks[e].call(this.vm,this.el)},qr.callHookWithCb=function(e){var t=this.hooks&&this.hooks[e];t&&(t.length>1&&(this.pendingJsCb=k(this[e+"Done"])),t.call(this.vm,this.el,this.pendingJsCb))},qr.getCssTransitionType=function(e){if(!(!Xn||document.hidden||this.hooks&&this.hooks.css===!1||Mt(this.el))){var t=this.type||this.typeCache[e];if(t)return t;var n=this.el.style,i=window.getComputedStyle(this.el),o=n[zr]||i[zr];if(o&&"0s"!==o)t=Lr;else{var r=n[Br]||i[Br];r&&"0s"!==r&&(t=Hr)}return t&&(this.typeCache[e]=t),t}},qr.setupCssCb=function(e,t){this.pendingCssEvent=e;var n=this,i=this.el,o=this.pendingCssCb=function(r){r.target===i&&(K(i,e,o),n.pendingCssEvent=n.pendingCssCb=null,!n.pendingJsCb&&t&&t())};G(i,e,o)};var Jr={priority:Qo,update:function(e,t){var n=this.el,i=ge(this.vm.$options,"transitions",e);e=e||"v",t=t||"v",n.__v_trans=new Ft(n,e,i,this.vm),te(n,t+"-transition"),ee(n,e+"-transition")}},Qr={style:br,"class":Tr,component:jr,prop:Fr,transition:Jr},Yr=/^v-bind:|^:/,Gr=/^v-on:|^@/,Kr=/^v-([^:]+)(?:$|:(.*)$)/,Zr=/\.[^\.]+/g,Xr=/^(v-bind:|:)?transition$/,es=1e3,ts=2e3;on.terminal=!0;var ns=/[^\w\-:\.]/,is=Object.freeze({compile:It,compileAndLinkProps:Ut,compileRoot:Wt,transclude:un,resolveSlots:vn}),os=/^v-on:|^@/;gn.prototype._bind=function(){var e=this.name,t=this.descriptor;if(("cloak"!==e||this.vm._isCompiled)&&this.el&&this.el.removeAttribute){var n=t.attr||"v-"+e;this.el.removeAttribute(n)}var i=t.def;if("function"==typeof i?this.update=i:b(this,i),this._setupParams(),this.bind&&this.bind(),this._bound=!0,this.literal)this.update&&this.update(t.raw);else if((this.expression||this.modifiers)&&(this.update||this.twoWay)&&!this._checkStatement()){var o=this;this.update?this._update=function(e,t){o._locked||o.update(e,t)}:this._update=mn;var r=this._preProcess?_(this._preProcess,this):null,s=this._postProcess?_(this._postProcess,this):null,a=this._watcher=new Qe(this.vm,this.expression,this._update,{filters:this.filters,twoWay:this.twoWay,deep:this.deep,preProcess:r,postProcess:s,scope:this._scope});this.afterBind?this.afterBind():this.update&&this.update(a.value)}},gn.prototype._setupParams=function(){if(this.params){var e=this.params;this.params=Object.create(null);for(var t,n,i,o=e.length;o--;)t=d(e[o]),i=f(t),n=B(this.el,t),null!=n?this._setupParamWatcher(i,n):(n=z(this.el,t),null!=n&&(this.params[i]=""===n||n))}},gn.prototype._setupParamWatcher=function(e,t){var n=this,i=!1,o=(this._scope||this.vm).$watch(t,function(t,o){if(n.params[e]=t,i){var r=n.paramWatchers&&n.paramWatchers[e];r&&r.call(n,t,o)}else i=!0},{immediate:!0,user:!1});(this._paramUnwatchFns||(this._paramUnwatchFns=[])).push(o)},gn.prototype._checkStatement=function(){var e=this.expression;if(e&&this.acceptStatement&&!Be(e)){var t=ze(e).get,n=this._scope||this.vm,i=function(e){n.$event=e,t.call(n,n),n.$event=null};return this.filters&&(i=n._applyFilters(i,null,this.filters)),this.update(i),!0}},gn.prototype.set=function(e){this.twoWay?this._withLock(function(){this._watcher.set(e)}):"production"!==n.env.NODE_ENV&&Di("Directive.set() can only be used inside twoWaydirectives.")},gn.prototype._withLock=function(e){var t=this;t._locked=!0,e.call(t),oi(function(){t._locked=!1})},gn.prototype.on=function(e,t,n){G(this.el,e,t,n),(this._listeners||(this._listeners=[])).push([e,t])},gn.prototype._teardown=function(){if(this._bound){this._bound=!1,this.unbind&&this.unbind(),this._watcher&&this._watcher.teardown();var e,t=this._listeners;if(t)for(e=t.length;e--;)K(this.el,t[e][0],t[e][1]);var i=this._paramUnwatchFns;if(i)for(e=i.length;e--;)i[e]();"production"!==n.env.NODE_ENV&&this.el&&this.el._vue_directives.$remove(this),this.vm=this.el=this._watcher=this._listeners=null}};var rs=/[^|]\|[^|]/;Oe(Nn),yn(Nn),bn(Nn),En(Nn),wn(Nn),xn(Nn),kn(Nn),Cn(Nn),$n(Nn);var ss={priority:er,params:["name"],bind:function(){var e=this.params.name||"default",t=this.vm._slotContents&&this.vm._slotContents[e];t&&t.hasChildNodes()?this.compile(t.cloneNode(!0),this.vm._context,this.vm):this.fallback()},compile:function(e,t,n){if(e&&t){if(this.el.hasChildNodes()&&1===e.childNodes.length&&1===e.childNodes[0].nodeType&&e.childNodes[0].hasAttribute("v-if")){var i=document.createElement("template");i.setAttribute("v-else",""),i.innerHTML=this.el.innerHTML,i._context=this.vm,e.appendChild(i)}var o=n?n._scope:this._scope;this.unlink=t.$compile(e,n,o,this._frag)}e?Y(this.el,e):J(this.el)},fallback:function(){this.compile(ne(this.el,!0),this.vm)},unbind:function(){this.unlink&&this.unlink()}},as={priority:Ko,params:["name"],paramWatchers:{name:function(e){ir.remove.call(this),e&&this.insert(e)}},bind:function(){this.anchor=se("v-partial"),Y(this.el,this.anchor),this.insert(this.params.name)},insert:function(e){var t=ge(this.vm.$options,"partials",e,!0);t&&(this.factory=new ct(this.vm,t),ir.insert.call(this))},unbind:function(){this.frag&&this.frag.destroy()}},cs={slot:ss,partial:as},ls=nr._postProcess,hs=/(\d{3})(?=\d)/g,us={orderBy:Tn,filterBy:An,limitBy:On,json:{read:function(e,t){return"string"==typeof e?e:JSON.stringify(e,null,arguments.length>1?t:2)},write:function(e){try{return JSON.parse(e)}catch(t){return e}}},capitalize:function(e){return e||0===e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""},uppercase:function(e){return e||0===e?e.toString().toUpperCase():""},lowercase:function(e){return e||0===e?e.toString().toLowerCase():""},currency:function(e,t,n){if(e=parseFloat(e),!isFinite(e)||!e&&0!==e)return"";t=null!=t?t:"$",n=null!=n?n:2;var i=Math.abs(e).toFixed(n),o=n?i.slice(0,-1-n):i,r=o.length%3,s=r>0?o.slice(0,r)+(o.length>3?",":""):"",a=n?i.slice(-1-n):"",c=e<0?"-":"";return c+t+s+o.slice(r).replace(hs,"$1,")+a},pluralize:function(e){var t=y(arguments,1),n=t.length;if(n>1){var i=e%10-1;return i in t?t[i]:t[n-1]}return t[0]+(1===e?"":"s")},debounce:function(e,t){if(e)return t||(t=300),w(e,t)}};Dn(Nn),Nn.version="1.0.26",setTimeout(function(){ji.devtools&&(Bn?Bn.emit("init",Nn):"production"!==n.env.NODE_ENV&&zn&&/Chrome\/\d+/.test(window.navigator.userAgent)&&console.log("Download the Vue Devtools for a better development experience:\nhttps://github.com/vuejs/vue-devtools"))},0),e.exports=Nn}).call(t,function(){return this}(),n(19))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{items:{type:Array}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="hy_u-hide";t["default"]={methods:{showNav:function(){this.$el.classList.remove(n)},hideNav:function(){var e=this.$el.className.split(" ");e.push(n),this.$el.className=e.join(" ")}},events:{"toggle::siteNav":function(){this.$el.classList.contains(n)?this.showNav():this.hideNav()}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={methods:{toggleNav:function(){this.$root.$broadcast("toggle::siteNav")}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{dismissCallBack:function(){console.log("alert!!!")},apiItems:[{name:"type",type:"String",isRequired:!0,"default":"n/a",desc:"The type of alert (error, info, success)"},{name:"dismissible",type:"Boolean",isRequired:!1,"default":!0,desc:"Is the alert dismissible?"},{name:"timeout",type:"Number",isRequired:!1,"default":-1,desc:"The duration alert stays on screen in ms"},{name:"onClosed",type:"Function",isRequired:!1,"default":"n/a",desc:"Callback function to be called when alert is closed."}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"label",type:"String",isRequired:!0,"default":"n/a",desc:"The lable of the panel"},{name:"isOpen",type:"Boolean",isRequired:!1,"default":!1,desc:"Is the panel open."}]}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"legalKey",type:"String",isRequired:!0,"default":"n/a",desc:"the key of legal in cms"},{name:"legalLang",type:"String",isRequired:!0,"default":"n/a",desc:"the language of legal in cms"},{name:"legalRegion",type:"String",isRequired:!0,"default":"n/a",desc:"the region of legal in cms"}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"overlayKey",type:"String",isRequired:!0,"default":"n/a",desc:"The key of the overlay. Used by the overlay opener directive to target the overley."}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},methods:{showSpinner:function(){var e=this;this._resetMsg(),this.$root.$broadcast("show::spinner"),setTimeout(function(){e.$root.$broadcast("hide::spinner")},3e3)},_resetMsg:function(){var e=this,t=3,n=setInterval(function(){t>0?(t--,e.msg="I will close in "+t+" seconds"):clearInterval(n)},1e3);this.msg="I will close in "+t+" seconds"}},data:function(){return{msg:"",isFullScreen:!1,apiItems:[{name:"fullScreen",type:"Boolean",isRequired:!1,"default":!1,desc:"Should the spinner take full screen"},{name:"text",type:"String",isRequired:!1,"default":"''",desc:"The text of the spinner. Default empty"},{name:"show::spinner",type:"Event",isRequired:!1,"default":"n/a",desc:"Active the spinner"},{name:"hide::spinner",type:"Event",isRequired:!1,"default":"n/a",desc:"Hide the spinner"}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){var e=this;return{stepTrackerCurrentStep:2,stepTrackerConfig:{isClickable:!0,steps:[{title:"Step A",link:"",onClickHandler:function(t){e.stepTrackerCurrentStep=0}},{title:"Step B",link:"",onClickHandler:function(t){e.stepTrackerCurrentStep=1}},{title:"Step C",link:"",onClickHandler:function(t){e.stepTrackerCurrentStep=2}}]},apiItems:[{name:"currentStep",type:"Integer",isRequired:!0,"default":0,desc:"todo"},{name:"config",type:"Object",isRequired:!0,"default":"n/a",desc:"todo"},{name:"config.title",type:"String",isRequired:!0,"default":"n/a",desc:"The title of the step"},{name:"config.link",type:"String",isRequired:!1,"default":"n/a",desc:"The link of the step. "},{name:"config.onClickHandler",type:"Function",isRequired:!1,"default":"n/a",desc:"The callback function when step is clicked."}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"label",type:"String",isRequired:!0,"default":"n/a",desc:"The lable of the tab"},{name:"isDisabled",type:"Boolean",isRequired:!1,"default":!1,desc:"Is the tab disabled or not. When set to true, the tab is not clickable."}]}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={data:function(){return{isVisible:!0}},props:{type:{type:String,required:!0},dismissible:{type:Boolean,"default":!0},timeout:{type:Number,"default":-1},onClosed:{type:Function}},methods:{dismiss:function(){var e=this;this.isVisible=!1,setTimeout(function(){e.onClosed&&e.onClosed.apply(e)})}},ready:function(){var e=this;this.timeout>=0&&setTimeout(function(){e.dismiss()},this.timeout)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{isOpen:{type:Boolean,"default":!1},label:{type:String,required:!0}},methods:{toggleOpen:function(e){this.isOpen=!this.isOpen}}}},function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),r=i(o),s=n(149),a=i(s),c=n(147),l=i(c),h=n(20),u=i(h);t["default"]={mixins:r["default"],directives:{setFocus:u["default"]},data:function(){return{indexedLegals:[],nonIndexedLegals:[],apiLang:null,apiRegion:null}},methods:{fetchLegals:function(t){return e("\n          "+this.$root.ligerEndPoint+"?lang="+this.apiLang+"&region="+this.apiRegion+"&html=true\n        ",{method:"POST",headers:{"Content-Type":"application/json",applicationKey:this.$root.ligerApplicationKey},body:JSON.stringify({keys:t})})},appendResponseToLegalContainer:function(e,t){var n=function(e,t){t.forEach(function(t){var n=e.findIndex(function(e){return e.key===t.key});n>-1&&e.$set(n,{content:t.content,key:t.key})})};"indexed"===e?n(this.indexedLegals,t):n(this.nonIndexedLegals,t)},getLegals:function(){return l["default"].call(this,function(){var e=this,t=this.indexedLegals.map(function(e){return e.key}),n=this.nonIndexedLegals.map(function(e){return e.key});t.length>0&&this.fetchLegals(t).then(this.parseJSON).then(function(t){e.appendResponseToLegalContainer("indexed",t)}),n.length>0&&this.fetchLegals(n).then(this.parseJSON).then(function(t){e.appendResponseToLegalContainer("nonIndexed",t)})},10)}()},events:{"legal::click":function(e){var t=this,n=this.indexedLegals.findIndex(function(t){return t.key===e});n>-1&&this.indexedLegals.forEach(function(e,i){i!==n?e.isSelected=!1:t.indexedLegals.$set(i,Object.assign({},t.indexedLegals[i],{isSelected:!0}))})},"legal::init":function(e){this.apiLang=e.lang,this.apiRegion=e.region;var t=e.isNonIndexed?this.nonIndexedLegals:this.indexedLegals,n=(0,a["default"])(t,function(t){return t.key===e.key});n<0&&(n=t.push(e)-1,this.getLegals()),e.isNonIndexed||this.rootBroadcast("legal::udpate",{key:e.key,isNonIndexed:e.isNonIndexed,index:n})}}}}).call(t,n(84))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),r=i(o),s=n(36),a=i(s);t["default"]={mixins:r["default"],data:function(){return{legalCounter:null}},props:{legalKey:{type:String,required:!0},isNonIndexed:{type:Boolean,"default":!1},legalLang:{type:String,required:!0},legalRegion:{type:String,required:!0}},events:{"legal::udpate":function(e){this.isNonIndexed||e.key!==this.legalKey||(this.legalCounter=e.index+1)}},methods:{clickHandler:function(){this.rootBroadcast("legal::click",this.legalKey)}},beforeCompile:function(){},ready:function(){var e=this;(0,a["default"])(function(){e.rootBroadcast("legal::init",{key:e.legalKey,lang:e.legalLang,region:e.legalRegion,isNonIndexed:e.isNonIndexed})})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=27;t["default"]={props:{isVisible:{type:Boolean,"default":!1}},watch:{isVisible:function(e){var t=window.document.body,n="no-scroll";e?t.classList?t.classList.add(n):t.className+=" "+n:t.classList?t.classList.remove(n):t.className=t.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ");
}},events:{"overlayContainer::open":function(){this.isVisible=!0},"overlayContainer::close":function(){this.isVisible=!1}},ready:function(){var e=this;window.document.addEventListener("keydown",function(t){t=t||window.event,t.keyCode===n&&(e.isVisible=!1)})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={data:function(){return{isVisible:!1}},props:{overlayKey:{type:String}},methods:{closeOverlay:function(){this.$dispatch("overlayContainer::close")}},events:{"overlay::open":function(e){return e===this.overlayKey?void(this.isVisible=!0):void(this.isVisible=!1)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={replace:!0,data:function(){return{active:!1}},props:{text:{type:String,"default":""},fullScreen:{type:Boolean,"default":!1}},methods:{show:function(){this.active=!0,this.$root.$broadcast("shown::spinner")},hide:function(){this.active=!1,this.$root.$broadcast("hidden::spinner")}},events:{"show::spinner":function(){this.show()},"hide::spinner":function(){this.hide()}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{config:{type:Object},currentStep:{type:Number,"default":0}},methods:{clickHandler:function(e,t,n){t.onClickHandler&&(e.preventDefault(),this.currentStep>n&&t.onClickHandler())}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{label:{type:String},isDisabled:{type:Boolean,"default":!1}},data:function(){return{tabIndex:0,isVisible:!1}},computed:{isVisible:function(){return this.$parent.activeTabIndex===this.tabIndex}},created:function(){this.$parent.tabs.push({label:this.label,isDisabled:this.isDisabled})},ready:function(){var e=this;this.$parent.$children.forEach(function(t,n){t.$el===e.$el&&(e.tabIndex=n)})},beforeDestroy:function(){this.$parent.tabs.splice(this.tabIndex,1)}}},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n({props:{activeTabIndex:{type:Number,"default":0}},methods:{isActive:function(e){return activeTabIndex===e}},data:function(){return{tabs:[]}}},"methods",{handleTabListClick:function(e,t){t.isDisabled||(this.activeTabIndex=e)}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(187),r=i(o),s=n(191),a=i(s),c=n(192),l=i(c),h=n(188),u=i(h),f=n(189),p=i(f),d=n(186),v=i(d),_=n(185),y=i(_),b=n(190),m=i(b);t["default"]={"/get-started":{component:r["default"]},"/alert":{component:{template:"<alert-page></alert-page>",components:{AlertPage:y["default"]}}},"/spinner":{component:{template:"<spinner-page></spinner-page>",components:{SpinnerPage:m["default"]}}},"/step-tracker":{component:{template:"<step-tracker-page></step-tracker-page>",components:{StepTrackerPage:a["default"]}}},"/tabs":{component:{template:"<tabs-page></tabs-page>",components:{TabsPage:l["default"]}}},"/legal":{component:{template:"<legal-page></legal-page>",components:{LegalPage:u["default"]}}},"/overlay":{component:{template:"<overlay-page></overlay-page>",components:{OverlayPage:p["default"]}}},"/collapsable-panel":{component:{template:"<collapsable-panel-page></collapsable-panel-page>",components:{CollapsablePanelPage:v["default"]}}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={isLiteral:!0,eventHandler:function(e){e.preventDefault(),this.vm.$root.$broadcast("overlay::open",this.expression),this.vm.$root.$broadcast("overlayContainer::open")},bind:function(){this.el.addEventListener("click",this.eventHandler.bind(this))},unbind:function(){this.el.removeEventListener("click",this.eventHandler.bind(this))}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var o=n(66),r=i(o),s=n(20),a=i(s),c=n(200),l=i(c),h=n(197),u=i(h),f=n(198),p=i(f),d=n(196),v=i(d),_=n(195),y=i(_),b=n(202),m=i(b),g=n(201),E=i(g),w=n(194),x=i(w),k=n(193),C=i(k),$=n(199),N=i($),O={StepTracker:l["default"],OverlayContainer:u["default"],Overlay:p["default"],LegalCounter:v["default"],LegalContainer:y["default"],Tabs:m["default"],Tab:E["default"],CollapsablePanel:x["default"],Alert:C["default"],Spinner:N["default"]},A={overlayOpener:r["default"],setFocus:a["default"]};e.exports=function(e){for(var t in O)e.component(t,O[t]);for(var n in A)e.directive(n,A[n])}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={methods:{rootBroadcast:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.$broadcast.apply(this.$root,t)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={methods:{parseJSON:function(e){return e.json()}}}},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.sg_c-api-table{border-spacing:0 10px;width:100%}.sg_c-api-table tr{-webkit-box-flex:1;-ms-flex:1;flex:1}.sg_c-api-table th,.sg_c-api-table tr:hover{background-color:#eee}.sg_c-api-table td{text-align:center}',""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".sg_c-nav{display:block;position:fixed;left:0;width:25rem;height:100%;border-right:.1rem solid #e2e2e2;padding:2rem;padding-top:68px;overflow-x:hidden;overflow-y:auto;background-color:#fff;z-index:999}.sg_c-nav__section{font-family:Telus Medium,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:1.2rem;border-bottom:.1rem solid #e2e2e2;padding-top:1rem;padding-bottom:.5rem;margin:1rem 0}.sg_c-nav__list-item{padding:5px 0}.sg_c-nav__link:hover{color:#8c68a6}.sg_c-nav__link--active{color:#57a708}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,"header.sg_c-site-header{background-color:#4b286d;height:68px;text-align:left;position:fixed;width:100%;z-index:9999}header.sg_c-site-header .sg_c-site-header__container{height:100%;width:100%}header.sg_c-site-header .sg_c-site-header__container img.logo{height:100%;padding:20px;display:inline-block;max-width:100%}header.sg_c-site-header .sg_c-site-header__togglebtn{color:#fff;font-size:2rem;margin:0;background:hsla(0,0%,100%,.1);padding:1.5rem;float:left;cursor:pointer;border:0;height:100%;display:inline-block}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,"body{background-color:#f5f6f7}.sg_c-site__main{padding-top:68px;margin-left:25rem}@media screen and (max-width:599px){.sg_c-site__main{margin-left:0}}.sg_c-demo{margin:20px 0}.sg_c-demo__container{background-color:#fff;overflow:hidden;border-radius:5px;border:1px solid #eee;padding:25px;margin:20px 0}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.fade-transition{-webkit-transition:all .3s ease;transition:all .3s ease}.fade-enter,.fade-leave{opacity:0}.c-alert{position:relative;padding:7px 15px;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.c-alert--info{background-color:#333;border-color:#000;color:#fff}.c-alert--info button{color:#fff}.c-alert--success{background-color:#e6ffcc;border-color:#9f3;color:#408000}.c-alert--error{background-color:#f8dde3;border-color:#f2c0ca;color:#c81235}.c-alert__close-button{position:absolute;top:0;right:10px;-webkit-appearance:none;padding:0;cursor:pointer;background:0 0;border:0;font-size:2.5rem;opacity:.2}.c-alert__close-button:hover{opacity:.3}',""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.c-collapsable-panel{border:1px solid #e2e2e2;box-shadow:0 1px 3px 1px #e2e2e2}.c-collapsable-panel__header{cursor:pointer;padding:10px 15px;position:relative}.c-collapsable-panel__header:after{position:absolute;right:1em;top:.75em;font-size:.75em;font-family:Telus Icon;content:\'\\E114\';color:#57a708}.c-collapsable-panel__header--open:after{content:\'\\E117\'}.c-collapsable-panel__body{border-top:1px solid #e2e2e2;max-height:0;padding:0 15px;-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out;overflow:hidden;opacity:0}.c-collapsable-panel__body--open{opacity:1;padding:15px;max-height:9999px}',""]);
},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-legal-container__ordered-list{margin-top:10px;margin-bottom:20px;list-style:decimal;list-style-type:decimal;padding-left:20px}.c-legal-container__unordered-list{margin-top:10px;margin-bottom:20px;padding-left:20px;list-style:none;list-style-type:none}.c-legal-container__list-item{line-height:19px;margin-bottom:10px;padding:10px}.c-legal-container__list-item--active{background-color:#f9f1ff}.c-legal-container__list-item a{color:#49166d;text-decoration:none;border-bottom:1px dotted;padding-bottom:1px}.c-legal-container__list-item a:hover{color:#8c68a6}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-legal-sup{font-size:.75em;line-height:0;vertical-align:super;text-decoration:none;top:0!important;cursor:pointer}.c-legal-sup a{color:#49166d}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".no-scroll{overflow-x:hidden;overflow:hidden;overflow-y:hidden;position:relative;height:100%}.c-overlay-container__curtain{opacity:0;-webkit-transition:opacity .7s cubic-bezier(.23,1,.32,1);transition:opacity .7s cubic-bezier(.23,1,.32,1)}.c-overlay-container__curtain--active{opacity:1;background:rgba(0,0,0,.55);position:fixed;top:0;left:0;right:0;bottom:0}.c-overlay-container__overlays{position:fixed;right:0;top:0;bottom:0;background-color:rgba(0,0,0,.5);-webkit-transform:translateX(100%);transform:translateX(100%);-webkit-transition:.7s cubic-bezier(.23,1,.32,1);transition:.7s cubic-bezier(.23,1,.32,1)}@media screen and (max-width:599px){.c-overlay-container__overlays{width:100%}}@media screen and (min-width:600px){.c-overlay-container__overlays{width:66%}}.c-overlay-container__overlays--active{-webkit-transform:translateX(0);transform:translateX(0);z-index:99999}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-overlay{height:100%;width:100%;background-color:#fff}.c-overlay__header{padding:20px;position:fixed;top:0;height:75px;width:100%;border-bottom:1px solid #e2e2e2;background-color:#f5f6f7}.c-overlay__close-button{cursor:pointer;background:0;border:0;position:absolute;top:20px;right:20px;font-family:Telus Icon;font-size:2em;color:#49166d}.c-overlay__close-button:before{content:'\\E106'}.c-overlay__body{position:fixed;-webkit-overflow-scrolling:touch;overflow-y:scroll;top:75px;bottom:0;width:100%;padding:20px 20px 50px}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,"@-webkit-keyframes rotate{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotate{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35}to{stroke-dasharray:89,200;stroke-dashoffset:-124}}@keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35}to{stroke-dasharray:89,200;stroke-dashoffset:-124}}@-webkit-keyframes spinner-color{0%,to{stroke:#6c0}25%{stroke:#6c0}50%{stroke:#57a708}75%{stroke:#57a708}}@keyframes spinner-color{0%,to{stroke:#6c0}25%{stroke:#6c0}50%{stroke:#57a708}75%{stroke:#57a708}}.c-spinner{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-flex;-webkit-align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin:auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.c-spinner--fullscreen{position:fixed;top:0;left:0;right:0;bottom:0;z-index:9998;width:100%;height:100%;background:hsla(0,0%,100%,.8)}.c-spinner svg{animation-name:rotate;-webkit-animation-name:rotate;-moz-animation-name:rotate;animation-duration:1.8s;-webkit-animation-duration:1.8s;-moz-animation-duration:1.8s;animation-iteration-count:infinite;-webkit-animation-iteration-count:infinite;-moz-animation-iteration-count:infinite;animation-timing-function:linear;-webkit-animation-timing-function:linear;-moz-animation-timing-function:linear;height:100px;width:100px}.c-spinner circle{animation:dash 1.7s ease-in-out infinite 0s,spinner-color 6s ease-in-out infinite -.75s;-webkit-animation:dash 1.7s ease-in-out infinite 0s,spinner-color 6s ease-in-out infinite -.75s;-moz-animation:dash 1.7s ease-in-out infinite 0s,spinner-color 6s ease-in-out infinite -.75s}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.c-step-tracker__icon,.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.c-step-tracker{list-style:none;padding:0;position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin:1rem -1.5rem}@media screen and (min-width:600px){.c-step-tracker{padding-bottom:2.5rem;margin:1rem 0}}.c-step-tracker__step{width:100%;position:relative;text-align:center}.c-step-tracker__step:after,.c-step-tracker__step:before{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:calc(50% - 1.4rem);content:\' \';border-bottom:.6rem solid #aeaeae}.c-step-tracker__step:before{left:0}.c-step-tracker__step:after{right:0}.c-step-tracker .c-step-tracker__step:first-child:before,.c-step-tracker .c-step-tracker__step:last-child:after{content:none}.c-step-tracker__label{position:absolute;bottom:-3rem;left:0;font-size:1.7rem;width:100%;height:2.5rem;font-family:Telus Regular,Helvetica Neue,Helvetica,Arial,sans-serif;color:#666}@media screen and (max-width:599px){.c-step-tracker__label{display:none}}.c-step-tracker__step--active .c-step-tracker__label{font-family:Telus Medium,Helvetica Neue,Helvetica,Arial,sans-serif;color:#408000}.c-step-tracker__icon{font-size:3rem;color:#aeaeae}.c-step-tracker__icon:before{content:"\\E001"}.c-step-tracker__step--active .c-step-tracker__icon:before{content:"\\E002"}.c-step-tracker__setp--clickable a{cursor:pointer}.c-step-tracker__step--complete:after{border-bottom:.6rem solid #57a708}.c-step-tracker__step--complete .c-step-tracker__icon:before{content:"\\E110"}.c-step-tracker__step--active .c-step-tracker__icon:before,.c-step-tracker__step--complete .c-step-tracker__icon:before{color:#57a708}.c-step-tracker__step--complete+.c-step-tracker__step--active:before,.c-step-tracker__step--complete+.c-step-tracker__step--complete:before{border-bottom:.6rem solid #57a708}.c-step-tracker-mobile-label{font-size:1.7rem;text-align:center;font-family:Telus Regular,Helvetica Neue,Helvetica,Arial,sans-serif;color:#666}@media screen and (min-width:600px){.c-step-tracker-mobile-label{display:none}}.c-step-tracker-mobile-label__step{font-family:Telus Medium,Helvetica Neue,Helvetica,Arial,sans-serif;color:#408000}',""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-tabs__header{list-style:none;padding:0;margin:0;display:-webkit-box;display:-ms-flexbox;display:flex}.c-tabs__header-item{margin-top:2px;height:45px;padding:0 2px;-webkit-box-flex:1;-ms-flex:1;flex:1}.c-tabs__header-item a{background-color:#e2e2e2;text-decoration:none;padding:13px 20px;color:#49166d;display:block}.c-tabs__header-item--active{margin-top:1px;height:46px;background-color:#fff;border-top:1px solid #e2e2e2;border-left:1px solid #e2e2e2;border-right:1px solid #e2e2e2}.c-tabs__header-item--active a{background-color:#fff;color:#333}.c-tabs__header-item--disabled a{background-color:#f5f6f7;color:#aeaeae;cursor:not-allowed}.c-tabs__body{background-color:#fff;border:1px solid #e2e2e2;margin-top:-1px;padding:20px}.c-tabs__pane{display:block;border-top:none;opacity:0;height:0;overflow:hidden;padding:0 5px;-webkit-transition:all .5s ease-out;transition:all .5s ease-out}.c-tabs__pane--active{opacity:1;padding:5px;height:auto}",""])},function(e,t,n){var i;(function(e,o,r){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
	 * @version   3.2.1
	 */
(function(){"use strict";function s(e){return"function"==typeof e||"object"==typeof e&&null!==e}function a(e){return"function"==typeof e}function c(e){G=e}function l(e){ee=e}function h(){return function(){e.nextTick(v)}}function u(){return function(){Y(v)}}function f(){var e=0,t=new ie(v),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function p(){var e=new MessageChannel;return e.port1.onmessage=v,function(){e.port2.postMessage(0)}}function d(){return function(){setTimeout(v,1)}}function v(){for(var e=0;e<X;e+=2){var t=se[e],n=se[e+1];t(n),se[e]=void 0,se[e+1]=void 0}X=0}function _(){try{var e=n(220);return Y=e.runOnLoop||e.runOnContext,u()}catch(t){return d()}}function y(e,t){var n=this,i=new this.constructor(m);void 0===i[le]&&M(i);var o=n._state;if(o){var r=arguments[o-1];ee(function(){P(o,i,r,n._result)})}else j(n,i,e,t);return i}function b(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(m);return N(n,e),n}function m(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function E(){return new TypeError("A promises callback cannot return that same promise.")}function w(e){try{return e.then}catch(t){return pe.error=t,pe}}function x(e,t,n,i){try{e.call(t,n,i)}catch(o){return o}}function k(e,t,n){ee(function(e){var i=!1,o=x(n,t,function(n){i||(i=!0,t!==n?N(e,n):A(e,n))},function(t){i||(i=!0,T(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&o&&(i=!0,T(e,o))},e)}function C(e,t){t._state===ue?A(e,t._result):t._state===fe?T(e,t._result):j(t,void 0,function(t){N(e,t)},function(t){T(e,t)})}function $(e,t,n){t.constructor===e.constructor&&n===ae&&constructor.resolve===ce?C(e,t):n===pe?T(e,pe.error):void 0===n?A(e,t):a(n)?k(e,t,n):A(e,t)}function N(e,t){e===t?T(e,g()):s(t)?$(e,t,w(t)):A(e,t)}function O(e){e._onerror&&e._onerror(e._result),D(e)}function A(e,t){e._state===he&&(e._result=t,e._state=ue,0!==e._subscribers.length&&ee(D,e))}function T(e,t){e._state===he&&(e._state=fe,e._result=t,ee(O,e))}function j(e,t,n,i){var o=e._subscribers,r=o.length;e._onerror=null,o[r]=t,o[r+ue]=n,o[r+fe]=i,0===r&&e._state&&ee(D,e)}function D(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i,o,r=e._result,s=0;s<t.length;s+=3)i=t[s],o=t[s+n],i?P(n,i,o,r):o(r);e._subscribers.length=0}}function S(){this.error=null}function V(e,t){try{return e(t)}catch(n){return de.error=n,de}}function P(e,t,n,i){var o,r,s,c,l=a(n);if(l){if(o=V(n,i),o===de?(c=!0,r=o.error,o=null):s=!0,t===o)return void T(t,E())}else o=i,s=!0;t._state!==he||(l&&s?N(t,o):c?T(t,r):e===ue?A(t,o):e===fe&&T(t,o))}function R(e,t){try{t(function(t){N(e,t)},function(t){T(e,t)})}catch(n){T(e,n)}}function F(){return ve++}function M(e){e[le]=ve++,e._state=void 0,e._result=void 0,e._subscribers=[]}function I(e){return new ge(this,e).promise}function L(e){var t=this;return new t(Z(e)?function(n,i){for(var o=e.length,r=0;r<o;r++)t.resolve(e[r]).then(n,i)}:function(e,t){t(new TypeError("You must pass an array to race."))})}function H(e){var t=this,n=new t(m);return T(n,e),n}function z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function B(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(e){this[le]=F(),this._result=this._state=void 0,this._subscribers=[],m!==e&&("function"!=typeof e&&z(),this instanceof U?R(this,e):B())}function W(e,t){this._instanceConstructor=e,this.promise=new e(m),this.promise[le]||M(this.promise),Z(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&A(this.promise,this._result))):T(this.promise,q())}function q(){return new Error("Array Methods must be provided an Array")}function J(){var e;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(e.Promise=me)}var Q;Q=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y,G,K,Z=Q,X=0,ee=function(e,t){se[X]=e,se[X+1]=t,X+=2,2===X&&(G?G(v):K())},te="undefined"!=typeof window?window:void 0,ne=te||{},ie=ne.MutationObserver||ne.WebKitMutationObserver,oe="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),re="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,se=new Array(1e3);K=oe?h():ie?f():re?p():void 0===te?_():d();var ae=y,ce=b,le=Math.random().toString(36).substring(16),he=void 0,ue=1,fe=2,pe=new S,de=new S,ve=0,_e=I,ye=L,be=H,me=U;U.all=_e,U.race=ye,U.resolve=ce,U.reject=be,U._setScheduler=c,U._setAsap=l,U._asap=ee,U.prototype={constructor:U,then:ae,"catch":function(e){return this.then(null,e)}};var ge=W;W.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===he&&n<e;n++)this._eachEntry(t[n],n)},W.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===ce){var o=w(e);if(o===ae&&e._state!==he)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===me){var r=new n(m);$(r,e,o),this._willSettleAt(r,t)}else this._willSettleAt(new n(function(t){t(e)}),t)}else this._willSettleAt(i(e),t)},W.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===he&&(this._remaining--,e===fe?T(i,n):this._result[t]=n),0===this._remaining&&A(i,this._result)},W.prototype._willSettleAt=function(e,t){var n=this;j(e,void 0,function(e){n._settledAt(ue,t,e)},function(e){n._settledAt(fe,t,e)})};var Ee=J,we={Promise:me,polyfill:Ee};n(218).amd?(i=function(){return we}.call(t,n,t,r),!(void 0!==i&&(r.exports=i))):"undefined"!=typeof r&&r.exports?r.exports=we:"undefined"!=typeof this&&(this.ES6Promise=we),Ee()}).call(this),r.exports=o.Promise}).call(t,n(19),function(){return this}(),n(219)(e))},function(e,t,n){(function(t){!function(e){"use strict";function n(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function o(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return _.iterable&&(t[Symbol.iterator]=function(){return t}),t}function r(e){this.map={},e instanceof r?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(e){return e.bodyUsed?t.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new t(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function c(e){var t=new FileReader;return t.readAsArrayBuffer(e),a(t)}function l(e){var t=new FileReader;return t.readAsText(e),a(t)}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(_.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(_.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!_.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_.blob?(this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return t.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return t.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return t.resolve(this._bodyText)}):this.text=function(){var e=s(this);return e?e:t.resolve(this._bodyText)},_.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(e){var t=e.toUpperCase();return y.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var n=t.body;if(f.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new r(e.headers)),this.method=e.method,this.mode=e.mode,n||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new r(t.headers)),this.method=u(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(o))}}),t}function d(e){var t=new r,n=(e.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(e){var n=e.trim().split(":"),i=n.shift().trim(),o=n.join(":").trim();t.append(i,o)}),t}function v(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof r?t.headers:new r(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var _={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};r.prototype.append=function(e,t){e=n(e),t=i(t);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(t)},r.prototype["delete"]=function(e){delete this.map[n(e)]},r.prototype.get=function(e){var t=this.map[n(e)];return t?t[0]:null},r.prototype.getAll=function(e){return this.map[n(e)]||[]},r.prototype.has=function(e){return this.map.hasOwnProperty(n(e))},r.prototype.set=function(e,t){this.map[n(e)]=[i(t)]},r.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(i){e.call(t,i,n,this)},this)},this)},r.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),o(e)},r.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),o(e)},r.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),o(e)},_.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},h.call(f.prototype),h.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308];v.redirect=function(e,t){if(b.indexOf(t)===-1)throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=r,e.Request=f,e.Response=v,e.fetch=function(e,n){return new t(function(t,i){function o(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var r;r=f.prototype.isPrototypeOf(e)&&!n?e:new f(e,n);var s=new XMLHttpRequest;s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:d(s),url:o()},n="response"in s?s.response:s.responseText;t(new v(n,e))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.open(r.method,r.url,!0),"include"===r.credentials&&(s.withCredentials=!0),"responseType"in s&&_.blob&&(s.responseType="blob"),r.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send("undefined"==typeof r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),e.exports=self.fetch}).call(t,n(83))},function(e,t,n){e.exports=n.p+"b4de29fe43ac85ef0b66f9c7dfc474d3.png"},function(e,t,n){var i=n(6),o=n(3),r=i(o,"DataView");e.exports=r},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(118),r=n(119),s=n(120),a=n(121),c=n(122);i.prototype.clear=o,i.prototype["delete"]=r,i.prototype.get=s,i.prototype.has=a,i.prototype.set=c,e.exports=i},function(e,t,n){var i=n(6),o=n(3),r=i(o,"Promise");e.exports=r},function(e,t,n){var i=n(6),o=n(3),r=i(o,"Set");e.exports=r},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.__data__=new o;++t<n;)this.add(e[t])}var o=n(17),r=n(138),s=n(139);i.prototype.add=i.prototype.push=r,i.prototype.has=s,e.exports=i},function(e,t,n){var i=n(3),o=i.Uint8Array;e.exports=o},function(e,t,n){var i=n(6),o=n(3),r=i(o,"WeakMap");e.exports=r},function(e,t){function n(e,t,n){var i=n.length;switch(i){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t){function n(e,t){for(var n=-1,i=e?e.length:0;++n<i;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t){function n(e,t,n){if("function"!=typeof e)throw new TypeError(i);return setTimeout(function(){e.apply(void 0,n)},t)}var i="Expected a function";e.exports=n},function(e,t){function n(e,t,n,i){for(var o=e.length,r=n+(i?1:-1);i?r--:++r<o;)if(t(e[r],r,e))return r;return-1}e.exports=n},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function i(e,t,n,i,_,b){var m=l(e),g=l(t),E=d,w=d;m||(E=c(e),E=E==p?v:E),g||(w=c(t),w=w==p?v:w);var x=E==v&&!h(e),k=w==v&&!h(t),C=E==w;if(C&&!x)return b||(b=new o),m||u(e)?r(e,t,n,i,_,b):s(e,t,E,n,i,_,b);if(!(_&f)){var $=x&&y.call(e,"__wrapped__"),N=k&&y.call(t,"__wrapped__");if($||N){var O=$?e.value():e,A=N?t.value():t;return b||(b=new o),n(O,A,i,_,b)}}return!!C&&(b||(b=new o),a(e,t,n,i,_,b))}var o=n(23),r=n(30),s=n(110),a=n(111),c=n(115),l=n(4),h=n(31),u=n(154),f=2,p="[object Arguments]",d="[object Array]",v="[object Object]",_=Object.prototype,y=_.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t,n,i){var c=n.length,l=c,h=!i;if(null==e)return!l;for(e=Object(e);c--;){var u=n[c];if(h&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++c<l;){u=n[c];var f=u[0],p=e[f],d=u[1];if(h&&u[2]){if(void 0===p&&!(f in e))return!1}else{var v=new o;if(i)var _=i(p,d,f,e,t,v);if(!(void 0===_?r(d,p,i,s|a,v):_))return!1}}return!0}var o=n(23),r=n(27),s=1,a=2;e.exports=i},function(e,t,n){function i(e){if(!a(e)||s(e))return!1;var t=o(e)||r(e)?d:h;return t.test(c(e))}var o=n(18),r=n(31),s=n(125),a=n(7),c=n(35),l=/[\\^$.*+?()[\]{}|]/g,h=/^\[object .+?Constructor\]$/,u=Object.prototype,f=Function.prototype.toString,p=u.hasOwnProperty,d=RegExp("^"+f.call(p).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t,n){function i(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?a(e)?r(e[0],e[1]):o(e):c(e)}var o=n(103),r=n(104),s=n(152),a=n(4),c=n(157);e.exports=i},function(e,t){function n(e){return i(Object(e))}var i=Object.keys;e.exports=n},function(e,t,n){function i(e){var t=r(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(n){return n===e||o(n,e,t)}}var o=n(99),r=n(113),s=n(34);e.exports=i},function(e,t,n){function i(e,t){return a(e)&&c(t)?l(h(e),t):function(n){var i=r(n,e);return void 0===i&&i===t?s(n,e):o(t,i,void 0,u|f)}}var o=n(27),r=n(150),s=n(151),a=n(12),c=n(33),l=n(34),h=n(14),u=1,f=2;e.exports=i},function(e,t,n){function i(e){return function(t){return o(t,e)}}var o=n(25);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}e.exports=n},function(e,t,n){function i(e){if("string"==typeof e)return e;if(r(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}var o=n(24),r=n(16),s=1/0,a=o?o.prototype:void 0,c=a?a.toString:void 0;e.exports=i},function(e,t){function n(e){return e&&e.Object===Object?e:null}e.exports=n},function(e,t,n){var i=n(3),o=i["__core-js_shared__"];e.exports=o},function(e,t,n){function i(e,t,n,i,o,w,k){switch(n){case E:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case g:return!(e.byteLength!=t.byteLength||!i(new r(e),new r(t)));case u:case f:return+e==+t;case p:return e.name==t.name&&e.message==t.message;case v:return e!=+e?t!=+t:e==+t;case _:case b:return e==t+"";case d:var C=a;case y:var $=w&h;if(C||(C=c),e.size!=t.size&&!$)return!1;var N=k.get(e);return N?N==t:(w|=l,k.set(e,t),s(C(e),C(t),i,o,w,k));case m:if(x)return x.call(e)==x.call(t)}return!1}var o=n(24),r=n(91),s=n(30),a=n(137),c=n(140),l=1,h=2,u="[object Boolean]",f="[object Date]",p="[object Error]",d="[object Map]",v="[object Number]",_="[object RegExp]",y="[object Set]",b="[object String]",m="[object Symbol]",g="[object ArrayBuffer]",E="[object DataView]",w=o?o.prototype:void 0,x=w?w.valueOf:void 0;e.exports=i},function(e,t,n){function i(e,t,n,i,a,c){var l=a&s,h=r(e),u=h.length,f=r(t),p=f.length;if(u!=p&&!l)return!1;for(var d=u;d--;){var v=h[d];if(!(l?v in t:o(t,v)))return!1}var _=c.get(e);if(_)return _==t;var y=!0;c.set(e,t);for(var b=l;++d<u;){v=h[d];var m=e[v],g=t[v];if(i)var E=l?i(g,m,v,t,e,c):i(m,g,v,e,t,c);if(!(void 0===E?m===g||n(m,g,i,a,c):E)){y=!1;break}b||(b="constructor"==v)}if(y&&!b){var w=e.constructor,x=t.constructor;w!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x)&&(y=!1)}return c["delete"](e),y}var o=n(26),r=n(40),s=2;e.exports=i},function(e,t,n){var i=n(28),o=i("length");e.exports=o},function(e,t,n){function i(e){for(var t=r(e),n=t.length;n--;){var i=t[n],s=e[i];t[n]=[i,s,o(s)]}return t}var o=n(33),r=n(40);e.exports=i},function(e,t){function n(e){return i(Object(e))}var i=Object.getPrototypeOf;e.exports=n},function(e,t,n){function i(e){return y.call(e)}var o=n(86),r=n(22),s=n(88),a=n(89),c=n(92),l=n(35),h="[object Map]",u="[object Object]",f="[object Promise]",p="[object Set]",d="[object WeakMap]",v="[object DataView]",_=Object.prototype,y=_.toString,b=l(o),m=l(r),g=l(s),E=l(a),w=l(c);(o&&i(new o(new ArrayBuffer(1)))!=v||r&&i(new r)!=h||s&&i(s.resolve())!=f||a&&i(new a)!=p||c&&i(new c)!=d)&&(i=function(e){var t=y.call(e),n=t==u?e.constructor:void 0,i=n?l(n):void 0;if(i)switch(i){case b:return v;case m:return h;case g:return f;case E:return p;case w:return d}return t}),e.exports=i},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function i(e,t,n){t=c(t,e)?[t]:o(t);for(var i,f=-1,p=t.length;++f<p;){var d=u(t[f]);if(!(i=null!=e&&n(e,d)))break;e=e[d]}if(i)return i;var p=e?e.length:0;return!!p&&l(p)&&a(d,p)&&(s(e)||h(e)||r(e))}var o=n(29),r=n(37),s=n(4),a=n(32),c=n(12),l=n(15),h=n(39),u=n(14);e.exports=i},function(e,t,n){function i(){this.__data__=o?o(null):{}}var o=n(13);e.exports=i},function(e,t){function n(e){return this.has(e)&&delete this.__data__[e]}e.exports=n},function(e,t,n){function i(e){var t=this.__data__;if(o){var n=t[e];return n===r?void 0:n}return a.call(t,e)?t[e]:void 0}var o=n(13),r="__lodash_hash_undefined__",s=Object.prototype,a=s.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){var t=this.__data__;return o?void 0!==t[e]:s.call(t,e)}var o=n(13),r=Object.prototype,s=r.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__;return n[e]=o&&void 0===t?r:t,this}var o=n(13),r="__lodash_hash_undefined__";e.exports=i},function(e,t,n){function i(e){var t=e?e.length:void 0;return a(t)&&(s(e)||c(e)||r(e))?o(t,String):null}var o=n(106),r=n(37),s=n(4),a=n(15),c=n(39);e.exports=i},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function i(e){return!!r&&r in e}var o=n(109),r=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=i},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||i;return e===n}var i=Object.prototype;e.exports=n},function(e,t){function n(){this.__data__=[]}e.exports=n},function(e,t,n){function i(e){var t=this.__data__,n=o(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():s.call(t,n,1),!0}var o=n(10),r=Array.prototype,s=r.splice;e.exports=i},function(e,t,n){function i(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]}var o=n(10);e.exports=i},function(e,t,n){function i(e){return o(this.__data__,e)>-1}var o=n(10);e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__,i=o(n,e);return i<0?n.push([e,t]):n[i][1]=t,this}var o=n(10);e.exports=i},function(e,t,n){function i(){this.__data__={hash:new o,map:new(s||r),string:new o}}var o=n(87),r=n(9),s=n(22);e.exports=i},function(e,t,n){function i(e){return o(this,e)["delete"](e)}var o=n(11);e.exports=i},function(e,t,n){function i(e){return o(this,e).get(e)}var o=n(11);e.exports=i},function(e,t,n){function i(e){return o(this,e).has(e)}var o=n(11);e.exports=i},function(e,t,n){function i(e,t){return o(this,e).set(e,t),this}var o=n(11);e.exports=i},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}e.exports=n},function(e,t){function n(e){return this.__data__.set(e,i),this}var i="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function i(){this.__data__=new o}var o=n(9);e.exports=i},function(e,t){function n(e){return this.__data__["delete"](e)}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function i(e,t){var n=this.__data__;return n instanceof o&&n.__data__.length==s&&(n=this.__data__=new r(n.__data__)),n.set(e,t),this}var o=n(9),r=n(17),s=200;e.exports=i},function(e,t,n){var i=n(155),o=n(160),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(\.|\[\])(?:\4|$))/g,s=/\\(\\)?/g,a=i(function(e){var t=[];return o(e).replace(r,function(e,n,i,o){t.push(i?o.replace(s,"$1"):n||e)}),t});e.exports=a},function(e,t,n){function i(e,t,n){function i(t){var n=b,i=m;return b=m=void 0,k=t,E=e.apply(i,n)}function h(e){return k=e,w=setTimeout(p,t),C?i(e):E}function u(e){var n=e-x,i=e-k,o=t-n;return $?l(o,g-i):o}function f(e){var n=e-x,i=e-k;return void 0===x||n>=t||n<0||$&&i>=g}function p(){var e=r();return f(e)?d(e):void(w=setTimeout(p,u(e)))}function d(e){return w=void 0,N&&b?i(e):(b=m=void 0,E)}function v(){k=0,b=x=m=w=void 0}function _(){return void 0===w?E:d(r())}function y(){var e=r(),n=f(e);if(b=arguments,m=this,x=e,n){if(void 0===w)return h(x);if($)return w=setTimeout(p,t),i(x)}return void 0===w&&(w=setTimeout(p,t)),E}var b,m,g,E,w,x,k=0,C=!1,$=!1,N=!0;if("function"!=typeof e)throw new TypeError(a);return t=s(t)||0,o(n)&&(C=!!n.leading,$="maxWait"in n,g=$?c(s(n.maxWait)||0,t):g,N="trailing"in n?!!n.trailing:N),y.cancel=v,y.flush=_,y}var o=n(7),r=n(156),s=n(42),a="Expected a function",c=Math.max,l=Math.min;e.exports=i},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function i(e,t,n){var i=e?e.length:0;if(!i)return-1;var c=null==n?0:s(n);return c<0&&(c=a(i+c,0)),o(e,r(t,3),c)}var o=n(96),r=n(101),s=n(41),a=Math.max;e.exports=i},function(e,t,n){function i(e,t,n){var i=null==e?void 0:o(e,t);return void 0===i?n:i}var o=n(25);e.exports=i},function(e,t,n){function i(e,t){return null!=e&&r(e,t,o)}var o=n(97),r=n(117);e.exports=i},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function i(e){return r(e)&&o(e)}var o=n(38),r=n(8);e.exports=i},function(e,t,n){function i(e){return r(e)&&o(e.length)&&!!T[D.call(e)]}var o=n(15),r=n(8),s="[object Arguments]",a="[object Array]",c="[object Boolean]",l="[object Date]",h="[object Error]",u="[object Function]",f="[object Map]",p="[object Number]",d="[object Object]",v="[object RegExp]",_="[object Set]",y="[object String]",b="[object WeakMap]",m="[object ArrayBuffer]",g="[object DataView]",E="[object Float32Array]",w="[object Float64Array]",x="[object Int8Array]",k="[object Int16Array]",C="[object Int32Array]",$="[object Uint8Array]",N="[object Uint8ClampedArray]",O="[object Uint16Array]",A="[object Uint32Array]",T={};T[E]=T[w]=T[x]=T[k]=T[C]=T[$]=T[N]=T[O]=T[A]=!0,T[s]=T[a]=T[m]=T[c]=T[g]=T[l]=T[h]=T[u]=T[f]=T[p]=T[d]=T[v]=T[_]=T[y]=T[b]=!1;var j=Object.prototype,D=j.toString;e.exports=i},function(e,t,n){function i(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(r);var n=function(){var i=arguments,o=t?t.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var s=e.apply(this,i);return n.cache=r.set(o,s),s};return n.cache=new(i.Cache||o),n}var o=n(17),r="Expected a function";i.Cache=o,e.exports=i},function(e,t){function n(){return Date.now()}e.exports=n},function(e,t,n){function i(e){return s(e)?o(a(e)):r(e)}var o=n(28),r=n(105),s=n(12),a=n(14);e.exports=i},function(e,t,n){function i(e,t){if("function"!=typeof e)throw new TypeError(s);return t=a(void 0===t?e.length-1:r(t),0),function(){for(var n=arguments,i=-1,r=a(n.length-t,0),s=Array(r);++i<r;)s[i]=n[t+i];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}var c=Array(t+1);for(i=-1;++i<t;)c[i]=n[i];return c[t]=s,o(e,this,c)}}var o=n(93),r=n(41),s="Expected a function",a=Math.max;e.exports=i},function(e,t,n){function i(e){if(!e)return 0===e?e:0;if(e=o(e),e===r||e===-r){var t=e<0?-1:1;return t*s}return e===e?e:0}var o=n(42),r=1/0,s=1.7976931348623157e308;e.exports=i},function(e,t,n){function i(e){return null==e?"":o(e)}var o=n(107);e.exports=i},function(e,t){(function(t){var n="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},i=function(){var e=/\blang(?:uage)?-(\w+)\b/i,t=0,i=n.Prism={util:{encode:function(e){return e instanceof o?new o(e.type,i.util.encode(e.content),e.alias):"Array"===i.util.type(e)?e.map(i.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function(e){var t=i.util.type(e);switch(t){case"Object":var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=i.util.clone(e[o]));return n;case"Array":return e.map&&e.map(function(e){return i.util.clone(e)})}return e}},languages:{extend:function(e,t){var n=i.util.clone(i.languages[e]);for(var o in t)n[o]=t[o];return n},insertBefore:function(e,t,n,o){o=o||i.languages;var r=o[e];if(2==arguments.length){n=arguments[1];for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s]);return r}var a={};for(var c in r)if(r.hasOwnProperty(c)){if(c==t)for(var s in n)n.hasOwnProperty(s)&&(a[s]=n[s]);a[c]=r[c]}return i.languages.DFS(i.languages,function(t,n){n===o[e]&&t!=e&&(this[t]=a)}),o[e]=a},DFS:function(e,t,n,o){o=o||{};for(var r in e)e.hasOwnProperty(r)&&(t.call(e,r,e[r],n||r),"Object"!==i.util.type(e[r])||o[i.util.objId(e[r])]?"Array"!==i.util.type(e[r])||o[i.util.objId(e[r])]||(o[i.util.objId(e[r])]=!0,i.languages.DFS(e[r],t,r,o)):(o[i.util.objId(e[r])]=!0,i.languages.DFS(e[r],t,null,o)))}},plugins:{},highlightAll:function(e,t){var n={callback:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",n);for(var o,r=n.elements||document.querySelectorAll(n.selector),s=0;o=r[s++];)i.highlightElement(o,e===!0,n.callback)},highlightElement:function(t,o,r){for(var s,a,c=t;c&&!e.test(c.className);)c=c.parentNode;c&&(s=(c.className.match(e)||[,""])[1].toLowerCase(),a=i.languages[s]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+s,c=t.parentNode,/pre/i.test(c.nodeName)&&(c.className=c.className.replace(e,"").replace(/\s+/g," ")+" language-"+s);var l=t.textContent,h={element:t,language:s,grammar:a,code:l};if(i.hooks.run("before-sanity-check",h),!h.code||!h.grammar)return void i.hooks.run("complete",h);if(i.hooks.run("before-highlight",h),o&&n.Worker){var u=new Worker(i.filename);u.onmessage=function(e){h.highlightedCode=e.data,i.hooks.run("before-insert",h),h.element.innerHTML=h.highlightedCode,r&&r.call(h.element),i.hooks.run("after-highlight",h),i.hooks.run("complete",h)},u.postMessage(JSON.stringify({language:h.language,code:h.code,immediateClose:!0}))}else h.highlightedCode=i.highlight(h.code,h.grammar,h.language),i.hooks.run("before-insert",h),h.element.innerHTML=h.highlightedCode,r&&r.call(t),i.hooks.run("after-highlight",h),i.hooks.run("complete",h)},highlight:function(e,t,n){var r=i.tokenize(e,t);return o.stringify(i.util.encode(r),n)},tokenize:function(e,t,n){var o=i.Token,r=[e],s=t.rest;if(s){for(var a in s)t[a]=s[a];delete t.rest}e:for(var a in t)if(t.hasOwnProperty(a)&&t[a]){var c=t[a];c="Array"===i.util.type(c)?c:[c];for(var l=0;l<c.length;++l){var h=c[l],u=h.inside,f=!!h.lookbehind,p=!!h.greedy,d=0,v=h.alias;h=h.pattern||h;for(var _=0;_<r.length;_++){var y=r[_];if(r.length>e.length)break e;if(!(y instanceof o)){h.lastIndex=0;var b=h.exec(y),m=1;if(!b&&p&&_!=r.length-1){var g=r[_+1].matchedStr||r[_+1],E=y+g;if(_<r.length-2&&(E+=r[_+2].matchedStr||r[_+2]),h.lastIndex=0,b=h.exec(E),!b)continue;var w=b.index+(f?b[1].length:0);if(w>=y.length)continue;var x=b.index+b[0].length,k=y.length+g.length;if(m=3,x<=k){if(r[_+1].greedy)continue;m=2,E=E.slice(0,k)}y=E}if(b){f&&(d=b[1].length);var w=b.index+d,b=b[0].slice(d),x=w+b.length,C=y.slice(0,w),$=y.slice(x),N=[_,m];C&&N.push(C);var O=new o(a,u?i.tokenize(b,u):b,v,b,p);N.push(O),$&&N.push($),Array.prototype.splice.apply(r,N)}}}}}return r},hooks:{all:{},add:function(e,t){var n=i.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=i.hooks.all[e];if(n&&n.length)for(var o,r=0;o=n[r++];)o(t)}}},o=i.Token=function(e,t,n,i,o){this.type=e,this.content=t,this.alias=n,this.matchedStr=i||null,this.greedy=!!o};if(o.stringify=function(e,t,n){if("string"==typeof e)return e;if("Array"===i.util.type(e))return e.map(function(n){return o.stringify(n,t,e)}).join("");var r={type:e.type,content:o.stringify(e.content,t,n),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:n};if("comment"==r.type&&(r.attributes.spellcheck="true"),e.alias){var s="Array"===i.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(r.classes,s)}i.hooks.run("wrap",r);var a="";for(var c in r.attributes)a+=(a?" ":"")+c+'="'+(r.attributes[c]||"")+'"';return"<"+r.tag+' class="'+r.classes.join(" ")+'" '+a+">"+r.content+"</"+r.tag+">"},!n.document)return n.addEventListener?(n.addEventListener("message",function(e){var t=JSON.parse(e.data),o=t.language,r=t.code,s=t.immediateClose;n.postMessage(i.highlight(r,i.languages[o],o)),s&&n.close()},!1),n.Prism):n.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return r&&(i.filename=r.src,document.addEventListener&&!r.hasAttribute("data-manual")&&("loading"!==document.readyState?requestAnimationFrame(i.highlightAll,0):document.addEventListener("DOMContentLoaded",i.highlightAll))),n.Prism}();"undefined"!=typeof e&&e.exports&&(e.exports=i),
"undefined"!=typeof t&&(t.Prism=i),i.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=.$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},i.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),i.languages.xml=i.languages.markup,i.languages.html=i.languages.markup,i.languages.mathml=i.languages.markup,i.languages.svg=i.languages.markup,i.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,"function":/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},i.languages.css.atrule.inside.rest=i.util.clone(i.languages.css),i.languages.markup&&(i.languages.insertBefore("markup","tag",{style:{pattern:/(<style[\w\W]*?>)[\w\W]*?(?=<\/style>)/i,lookbehind:!0,inside:i.languages.css,alias:"language-css"}}),i.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:i.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:i.languages.css}},alias:"language-css"}},i.languages.markup.tag)),i.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,"boolean":/\b(true|false)\b/,"function":/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},i.languages.javascript=i.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,"function":/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),i.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}}),i.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\\\|\\?[^\\])*?`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:i.languages.javascript}},string:/[\s\S]+/}}}),i.languages.markup&&i.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\w\W]*?>)[\w\W]*?(?=<\/script>)/i,lookbehind:!0,inside:i.languages.javascript,alias:"language-javascript"}}),i.languages.js=i.languages.javascript,function(){"undefined"!=typeof self&&self.Prism&&self.document&&document.querySelector&&(self.Prism.fileHighlight=function(){var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"};Array.prototype.forEach&&Array.prototype.slice.call(document.querySelectorAll("pre[data-src]")).forEach(function(t){for(var n,o=t.getAttribute("data-src"),r=t,s=/\blang(?:uage)?-(?!\*)(\w+)\b/i;r&&!s.test(r.className);)r=r.parentNode;if(r&&(n=(t.className.match(s)||[,""])[1]),!n){var a=(o.match(/\.(\w+)$/)||[,""])[1];n=e[a]||a}var c=document.createElement("code");c.className="language-"+n,t.textContent="",c.textContent="Loading",t.appendChild(c);var l=new XMLHttpRequest;l.open("GET",o,!0),l.onreadystatechange=function(){4==l.readyState&&(l.status<400&&l.responseText?(c.textContent=l.responseText,i.highlightElement(c)):l.status>=400?c.textContent=" Error "+l.status+" while fetching file: "+l.statusText:c.textContent=" Error: File does not exist or is empty")},l.send(null)})},document.addEventListener("DOMContentLoaded",self.Prism.fileHighlight))}()}).call(t,function(){return this}())},function(e,t){e.exports='<table class=sg_c-api-table> <tr> <th> Name </th> <th> Type </th> <th> Required </th> <th> Default </th> <th> Description </th> </tr> <tr v-for="item in items"> <td>{{item.name}}</td> <td>{{item.type}}</td> <td>{{item.isRequired}}</td> <td>{{item.default}}</td> <td>{{item.desc}}</td> </tr> </table> '},function(e,t){e.exports="<nav class=\"sg_c-nav hy_u-hide hy_u-show@md\" @click=hideNav> <h2 class=sg_c-nav__section>INTRODUCTION</h2> <ul class=hy_o-list @click=hideNav> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/get-started', activeClass: 'sg_c-nav__link--active'}\"> Get Started </a> </li> </ul> <h2 class=sg_c-nav__section>COMPONENTS</h2> <ul class=hy_o-list> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/alert', activeClass: 'sg_c-nav__link--active'}\"> Alert </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/spinner', activeClass: 'sg_c-nav__link--active'}\"> Spinner </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/step-tracker', activeClass: 'sg_c-nav__link--active'}\"> Step Tracker </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/tabs', activeClass: 'sg_c-nav__link--active'}\"> Tabs </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/overlay', activeClass: 'sg_c-nav__link--active'}\"> Overlay </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/legal', activeClass: 'sg_c-nav__link--active'}\"> Legal </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/collapsable-panel', activeClass: 'sg_c-nav__link--active'}\"> Collapsable Panel </a> </li> </ul> <h2 class=sg_c-nav__section>DIRECTIVES</h2> <ul class=hy_o-list> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/overlay-opener', activeClass: 'sg_c-nav__link--active'}\"> Overlay Opener </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/set-focus', activeClass: 'sg_c-nav__link--active'}\"> Set Focus </a> </li> </ul> </nav> "},function(e,t,n){e.exports='<header class=sg_c-site-header> <div class=sg_c-site-header__container> <button @click=toggleNav class="hy_u-hide@md js-active sg_c-site-header__togglebtn" type=button role=button> <span class=""><i class="hy_c-icon hy_c-icon--hamburger"></i></span> </button> <a v-link="{path: \'/get-started\'}"> <img class=logo src='+n(85)+" alt=Logo> </a> </div> </header> "},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Alert</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <alert type=error>This is an error alert.</alert> <alert type=info>This is an info alert.</alert> <alert type=success>This is a success alert.</alert> <alert type=success :dismissible=false>This is not a dismissible alert.</alert> <alert type=success :on-closed=dismissCallBack>This is an alert with callback.</alert> <alert type=info :timeout=5000>This alert should timeout in 5 seconds.</alert> </div> <collapsable-panel label=HTML> <pre>\n             <code class=language-html>\n&lt;alert type="error"&gt;This is an error alert.&lt;/alert&gt;\n&lt;alert type="info"&gt;This is an info alert.&lt;/alert&gt;\n&lt;alert type="success"&gt;This is a success alert.&lt;/alert&gt;\n&lt;alert type="success" :dismissible="false"&gt;This is not a dismissible alert.&lt;/alert&gt;\n&lt;alert type="success" :on-closed="dismissCallBack"&gt;This is an alert with callback.&lt;/alert&gt;\n&lt;alert type="success" :timeout="5000"&gt;This alert should timeout in 5 seconds.&lt;/alert&gt;\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Collapsable Panel</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <collapsable-panel label="Panel 1" :is-open=true> Panel 1 content </collapsable-panel> <collapsable-panel label="Panel 2"> Panel 2 content </collapsable-panel> </div> <collapsable-panel label=HTML> <pre>\n             <code class=language-html>\n&lt;collapsable-panel label="Panel 1" :is-open="true"&gt;\n Panel 1 content\n&lt;/collapsable-panel&gt;\n&lt;collapsable-panel label="Panel 2"&gt;\n Panel 2 content\n&lt;/collapsable-panel&gt;\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Getting Started</h2> <hr class=hy_u-space-mb-2> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <h3 class="hy_c-headline hy_c-headline--5 hy_t-grey">CDN</h3> <p> ... </p> </div> </div></section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Legal System</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <p class="hy_c-copy hy_c-copy--body hy_t-grey"> Lorem ipsum<legal-counter v-overlay-opener=legal-overlay legal-key=hs-referral-terms legal-lang=en legal-region=bc></legal-counter> dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. <legal-counter v-overlay-opener=legal-overlay legal-key=1-year-offer-stim legal-lang=en legal-region=bc></legal-counter> </p> </div> <div class=sg_c-demo__container> <legal-container></legal-container> </div> <collapsable-panel label=HTML> <pre>\n             <code class=language-html>\n&lt;legal-counter\n  legal-key="hs-referral-terms"\n  legal-lang="en"\n  legal-region="bc"\n&lt;/legal-counter&gt;\n&lt;legal-container&gt;&lt;/legal-container&gt;\n             </code>\n           </pre> </collapsable-panel> <collapsable-panel label=javascript> <pre>\n             <code class=language-javascript>\nlet vm = new Vue({\n el: \'body\',\n data() {\n   return {\n     ligerEndPoint: \'https://api.cms.telus.com/legals\',\n     ligerApplicationKey: \'b9738d67b89dfc782746d4a9cf4a1093\'\n   };\n },\n components: {\n   LegalCounter,\n   LegalContainer\n }\n});\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API: Legal Counter</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Overlay System</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <p> <button v-overlay-opener=overlay-1 class="hy_c-button hy_c-button--link hy_t-purple" type=button role=button> Open overlay #1 <i class="hy_c-icon hy_c-icon--arrow-right-circled hy_c-button__icon"></i> </button> </p> <p> <button v-overlay-opener=overlay-2 class="hy_c-button hy_c-button--link hy_t-purple" type=button role=button> Open overlay #2 <i class="hy_c-icon hy_c-icon--arrow-right-circled hy_c-button__icon"></i> </button> </p> <overlay-container> <overlay overlay-key=overlay-1> <h4 class="hy_c-headline hy_c-headline--h4" slot=overlay-header>This is overlay #1</h4> <article slot=overlay-body> Overlay #1 body </article> </overlay> <overlay overlay-key=overlay-2> <h4 class="hy_c-headline hy_c-headline--h4" slot=overlay-header>This is overlay #2</h4> <article slot=overlay-body> Overlay #2 body </article> </overlay> </overlay-container> </div> <collapsable-panel label=HTML> <pre>\n             <code class=language-html>\n&lt;overlay-container&gt;\n &lt;overlay overlay-key="overlay-1"&gt;\n   &lt;h4  class="hy_c-headline hy_c-headline--h4" slot="overlay-header"&gt;\n   This is overlay #1\n   &lt;/h4&gt;\n   &lt;article slot="overlay-body"&gt;\n     Overlay #1 body\n   &lt;/article&gt;\n &lt;/overlay&gt;\n &lt;overlay overlay-key="overlay-2"&gt;\n   &lt;h4  class="hy_c-headline hy_c-headline--h4" slot="overlay-header"&gt;\n   This is overlay #1\n   &lt;/h4&gt;\n   &lt;article slot="overlay-body"&gt;\n     Overlay #2 body\n   &lt;/article&gt;\n &lt;/overlay&gt;\n&lt;/overlay-container&gt;\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Spinner</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <label class="hy_c-control hy_c-control--checkbox"> <span class=hy_c-control__label-text>Full Screen</span> <input type=checkbox v-model=isFullScreen /> <div class=hy_c-control__indicator></div> </label> <button @click=showSpinner class="hy_c-button hy_c-button--raised hy_t-green" type=button> Show Spinner </button> <spinner :full-screen=isFullScreen :text=msg></spinner> </div> <collapsable-panel label=HTML> <pre>\n             <code class=language-html>\n&lt;spinner text="I will close in 3 seconds" :full-screen="true"&gt;&lt;/spinner&gt;\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=" <section class=\"hy_c-module hy_t-grey\"> <div class=hy_o-wrapper> <h2 class=\"hy_c-headline hy_c-headline--h4 hy_t-grey\">Step Tracker</h2> <hr class=hy_u-space-mb-2> <div class=\"sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed\"> <div class=sg_c-demo__container> <step-tracker :current-step=stepTrackerCurrentStep :config=stepTrackerConfig></step-tracker> </div> <collapsable-panel label=HTML> <pre>\n         <code class=language-html>\n&lt;step-tracker\n:current-step=\"stepTrackerCurrentStep\"\n:config=\"stepTrackerConfig\"&gt;\n&lt;/step-tracker&gt;\n         </code>\n       </pre> </collapsable-panel> <collapsable-panel label=javascript> <pre>\n             <code class=language-js>\nlet stepTrackerCurrentStep = 2;\nlet stepTrackerConfig = {\n  isClickable: true,\n  steps: [\n    {\n      title: 'Step A',\n      link: '',\n      onClickHandler: (event) => {\n        this.stepTrackerCurrentStep = 0;\n      }\n    }, {\n      title: 'Step B',\n      link: '',\n      onClickHandler: (event) => {\n        this.stepTrackerCurrentStep = 1;\n      }\n    }, {\n      title: 'Step C',\n      link: '',\n      onClickHandler: (event) => {\n        this.stepTrackerCurrentStep = 2;\n      }\n    }\n  ]\n};\nlet vm = new Vue({\n  el: 'body',\n  data: {\n    stepTrackerConfig,\n    stepTrackerCurrentStep\n},\n  components: {\n    StepTracker\n  }\n});\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class=\"hy_c-headline hy_c-headline--h5 hy_t-grey\">API</h3> <div class=\"hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed\"> <api-table :items=apiItems></api-table> </div> </div> </section> "},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Tab</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <tabs class="c-price-lookup hy_o-layout__item hy_u-size-3of3@sm hy_u-size-4of4@md hy_u-size-6of12@lg"> <tab label="Tab 1"> <p> Tab 1 content </p> </tab> <tab label="Tab 2"> <p> Tab 2 content </p> </tab> <tab label="Tab 3" :is-disabled=true> <p> Tab 3 content </p> </tab> </tabs> </div> <collapsable-panel label=HTML> <pre>\n             <code class=language-html>\n&lt;tabs&gt;\n &lt;tab label="Tab 1"&gt;\n   &lt;p&gt;\n     Tab 1 content\n   &lt;/p&gt;\n &lt;/tab&gt;\n &lt;tab label="Tab 2"&gt;\n   &lt;p&gt;\n     Tab 2 content\n   &lt;/p&gt;\n &lt;/tab&gt;\n &lt;tab label="Tab 3" :is-disabled="true"&gt;\n   &lt;p&gt;\n     Tab 3 content\n   &lt;/p&gt;\n &lt;/tab&gt;\n&lt;/tabs&gt;\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports="<div v-if=isVisible transition=fade class=c-alert :class=\"'c-alert--' + type\" :class=\"{ 'c-alert--dismissible': dismissible }\" role=alert> <button v-if=dismissible @click=dismiss type=button class=c-alert__close-button aria-label=Close> <span aria-hidden=true>&times;</span> <span class=hy_u-invisible>Close</span> </button> <slot></slot> </div> "},function(e,t){e.exports='<div class=c-collapsable-panel> <h3 @click.prevent=toggleOpen :class="{\n      \'c-collapsable-panel__header--open\': isOpen\n    }" class="c-collapsable-panel__header hy_c-headline hy_c-headline--h5 hy_t-grey" v-html=label> </h3> <div class=c-collapsable-panel__body :class="{\n    \'c-collapsable-panel__body--open\': isOpen\n  }"> <slot></slot> </div> </div> '},function(e,t){e.exports='<div class=c-legal-container> <ol class=c-legal-container__ordered-list> <li v-set-focus=legal.isSelected class=c-legal-container__list-item :class="{\n      \'c-legal-container__list-item--active\': legal.isSelected\n    }" v-for="legal in indexedLegals" v-html=legal.content> </li> </ol> <ul class=c-legal-container__unordered-list> <li class=c-legal-container__list-item v-for="legal in nonIndexedLegals" v-html=legal.content> </li> </ul> </div> '},function(e,t){e.exports="<sup class=c-legal-sup> <a href=# @click.prevent=clickHandler> {{legalCounter}} </a> </sup> "},function(e,t){e.exports='<div class=c-overlay-container> <div class=c-overlay-container__curtain :class="{\n        \'c-overlay-container__curtain--active\': isVisible\n    }" @click.prevent="isVisible=false"> </div> <div class=c-overlay-container__overlays :class="{\n        \'c-overlay-container__overlays--active\': isVisible\n    }"> <slot></slot> </div> </div> '},function(e,t){e.exports="<article class=c-overlay v-show=isVisible> <div class=c-overlay__body> <slot name=overlay-body></slot> </div> <header class=c-overlay__header> <slot name=overlay-header></slot> <button type=button class=c-overlay__close-button aria-label=Close tabindex=0 @click.prevent=closeOverlay></button> </header> </article> "},function(e,t){e.exports='<div v-show=active class=c-spinner :class="{ \'c-spinner--fullscreen\': fullScreen }"> <svg viewBox="0 0 100 100" width=0 height=0> <circle stroke-width=4 fill=none stroke-linecap=round stroke-dashoffset=0 cx=50 cy=50 r=20></circle> </svg> <p class="c-spinner__text hy_c-copy hy_u-font-weight--medium" v-if=!!text>{{text}}</p> </div> '},function(e,t){e.exports='<ul class=c-step-tracker> <li class=c-step-tracker__step :class="{\n      \'c-step-tracker__step--complete\': currentStep > $index,\n      \'c-step-tracker__step--active\': currentStep === $index,\n      \'c-step-tracker__setp--clickable\': (currentStep > $index && config.isClickable)\n  }" v-for="step in config.steps"> <a :href="step.link || false" @click="clickHandler($event, step, $index)" v-if=config.isClickable> <span class=c-step-tracker__icon></span> <span class=c-step-tracker__label>{{$index + 1}}. {{step.title}}</span> </a> <span v-else class=c-step-tracker__icon></span> <span v-else class=c-step-tracker__label>{{$index + 1}}. {{step.title}}</span> </li> </ul> '},function(e,t){e.exports="<div class=c-tabs__pane :class=\"{\n    'c-tabs__pane--active': isVisible\n  }\"> <slot></slot> </div> "},function(e,t){e.exports='<div class=c-tabs> <ul class=c-tabs__header> <li v-for="tab in tabs" class=c-tabs__header-item :class="{\n                \'c-tabs__header-item--active\': ($index === activeTabIndex),\n                \'c-tabs__header-item--disabled\': tab.isDisabled\n              }" :disabled=tab.disabled> <a href=# @click.prevent="handleTabListClick($index, tab)" v-html=tab.label></a> </li> </ul> <div class=c-tabs__body> <slot></slot> </div> </div> '},function(e,t,n){var i,o;n(205),i=n(45),o=n(163),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(206),i=n(46),o=n(164),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(47),o=n(165),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(48),o=n(166),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(207),i=n(49),o=n(167),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(50),o=n(168),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(51),o=n(169),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(52),o=n(170),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(53),o=n(171),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(54),o=n(172),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(208),i=n(55),o=n(173),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(209),i=n(56),o=n(174),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(210),i=n(57),o=n(175),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(211),i=n(58),o=n(176),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(212),i=n(59),o=n(177),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(213),i=n(60),o=n(178),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(214),i=n(61),o=n(179),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(215),i=n(62),o=n(180),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(63),o=n(181),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(216),i=n(64),o=n(182),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){/*!
	 * vue-router v0.7.13
	 * (c) 2016 Evan You
	 * Released under the MIT License.
	 */
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t,n){this.path=e,this.matcher=t,this.delegate=n}function t(e){this.routes={},this.children={},this.target=e}function n(t,i,o){return function(r,s){var a=t+r;return s?void s(n(a,i,o)):new e(t+r,i,o)}}function i(e,t,n){for(var i=0,o=0,r=e.length;o<r;o++)i+=e[o].path.length;t=t.substr(i);var s={path:t,handler:n};e.push(s)}function o(e,t,n,r){var s=t.routes;for(var a in s)if(s.hasOwnProperty(a)){var c=e.slice();i(c,a,s[a]),t.children[a]?o(c,t.children[a],n,r):n.call(r,c)}}function r(e,i){var r=new t;e(n("",r,this.delegate)),o([],r,function(e){i?i(this,e):this.add(e)},this)}function s(e){W||"undefined"==typeof console||console.error("[vue-router] "+e)}function a(e,t){try{return t?decodeURIComponent(e):decodeURI(e)}catch(n){s("malformed URI"+(t?" component: ":": ")+e)}}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function l(e){this.string=e}function h(e){this.name=e}function u(e){this.name=e}function f(){}function p(e,t,n){"/"===e.charAt(0)&&(e=e.substr(1));var i=e.split("/"),o=[];n.val="";for(var r=0,s=i.length;r<s;r++){var a,c=i[r];(a=c.match(/^:([^\/]+)$/))?(o.push(new h(a[1])),t.push(a[1]),n.val+="3"):(a=c.match(/^\*([^\/]+)$/))?(o.push(new u(a[1])),n.val+="2",t.push(a[1])):""===c?(o.push(new f),n.val+="1"):(o.push(new l(c)),n.val+="4")}return n.val=+n.val,o}function d(e){this.charSpec=e,this.nextStates=[]}function v(e){return e.sort(function(e,t){return t.specificity.val-e.specificity.val})}function _(e,t){for(var n=[],i=0,o=e.length;i<o;i++){var r=e[i];n=n.concat(r.match(t))}return n}function y(e){this.queryParams=e||{}}function b(e,t,n){for(var i=e.handlers,o=e.regex,r=t.match(o),s=1,a=new y(n),c=0,l=i.length;c<l;c++){for(var h=i[c],u=h.names,f={},p=0,d=u.length;p<d;p++)f[u[p]]=r[s++];a.push({handler:h.handler,params:f,isDynamic:!!u.length})}return a}function m(e,t){return t.eachChar(function(t){e=e.put(t)}),e}function g(e){return e=e.replace(/\+/gm,"%20"),a(e,!0)}function E(e){"undefined"!=typeof console&&console.error("[vue-router] "+e)}function w(e,t,n){var i=e.match(/(\?.*)$/);if(i&&(i=i[1],e=e.slice(0,-i.length)),"?"===t.charAt(0))return e+t;var o=e.split("/");n&&o[o.length-1]||o.pop();for(var r=t.replace(/^\//,"").split("/"),s=0;s<r.length;s++){var a=r[s];"."!==a&&(".."===a?o.pop():o.push(a))}return""!==o[0]&&o.unshift(""),o.join("/")}function x(e){return e&&"function"==typeof e.then}function k(e,t){var n=e&&(e.$options||e.options);return n&&n.route&&n.route[t]}function C(e,t){G?G.$options.components._=e.component:G={resolve:Y.Vue.prototype._resolveComponent,$options:{components:{_:e.component}}},G.resolve("_",function(n){e.component=n,t(n)})}function $(e,t,n){return void 0===t&&(t={}),e=e.replace(/:([^\/]+)/g,function(n,i){var o=t[i];return o||E('param "'+i+'" not found when generating path for "'+e+'" with params '+JSON.stringify(t)),o||""}),n&&(e+=Q(n)),e}function N(e,t,n){var i=e.childVM;if(!i||!t)return!1;if(e.Component!==t.component)return!1;var o=k(i,"canReuse");return"boolean"==typeof o?o:!o||o.call(i,{to:n.to,from:n.from})}function O(e,t,n){var i=e.childVM,o=k(i,"canDeactivate");o?t.callHook(o,i,n,{expectBoolean:!0}):n()}function A(e,t,n){C(e,function(e){if(!t.aborted){var i=k(e,"canActivate");i?t.callHook(i,null,n,{expectBoolean:!0}):n()}})}function T(e,t,n){var i=e.childVM,o=k(i,"deactivate");o?t.callHooks(o,i,n):n()}function j(e,t,n,i,o){var r=t.activateQueue[n];if(!r)return V(e),e._bound&&e.setComponent(null),void(i&&i());var s=e.Component=r.component,a=k(s,"activate"),c=k(s,"data"),l=k(s,"waitForData");e.depth=n,e.activated=!1;var h=void 0,u=!(!c||l);if(o=o&&e.childVM&&e.childVM.constructor===s)h=e.childVM,h.$loadingRouteData=u;else if(V(e),e.unbuild(!0),h=e.build({_meta:{$loadingRouteData:u},created:function(){this._routerView=e}}),e.keepAlive){h.$loadingRouteData=u;var f=h._keepAliveRouterView;f&&(e.childView=f,h._keepAliveRouterView=null)}var p=function(){h.$destroy()},d=function(){if(o)return void(i&&i());var n=t.router;n._rendered||n._transitionOnLoad?e.transition(h):(e.setCurrent?e.setCurrent(h):e.childVM=h,h.$before(e.anchor,null,!1)),i&&i()},v=function(){e.childView&&j(e.childView,t,n+1,null,o||e.keepAlive),d()},_=function(){e.activated=!0,c&&l?S(h,t,c,v,p):(c&&S(h,t,c),v())};a?t.callHooks(a,h,_,{cleanup:p,postActivate:!0}):_()}function D(e,t){var n=e.childVM,i=k(n,"data");i&&S(n,t,i)}function S(e,t,n,i,o){e.$loadingRouteData=!0,t.callHooks(n,e,function(){e.$loadingRouteData=!1,e.$emit("route-data-loaded",e),i&&i()},{cleanup:o,postActivate:!0,processData:function(t){var n=[];if(P(t)&&Object.keys(t).forEach(function(i){var o=t[i];x(o)?n.push(o.then(function(t){e.$set(i,t)})):e.$set(i,o)}),n.length)return n[0].constructor.all(n)}})}function V(e){e.keepAlive&&e.childVM&&e.childView&&(e.childVM._keepAliveRouterView=e.childView),e.childView=null}function P(e){return"[object Object]"===Object.prototype.toString.call(e)}function R(e){return"[object Object]"===Object.prototype.toString.call(e)}function F(e){return e?Array.prototype.slice.call(e):[]}function M(e){var t=e.util,n=t.extend,i=t.isArray,o=t.defineReactive,r=e.prototype._init;e.prototype._init=function(e){e=e||{};var t=e._parent||e.parent||this,n=t.$router,i=t.$route;n&&(this.$router=n,n._children.push(this),this._defineMeta?this._defineMeta("$route",i):o(this,"$route",i)),r.call(this,e)};var s=e.prototype._destroy;e.prototype._destroy=function(){!this._isBeingDestroyed&&this.$router&&this.$router._children.$remove(this),s.apply(this,arguments)};var a=e.config.optionMergeStrategies,c=/^(data|activate|deactivate)$/;a&&(a.route=function(e,t){if(!t)return e;if(!e)return t;var o={};n(o,e);for(var r in t){var s=o[r],a=t[r];s&&c.test(r)?o[r]=(i(s)?s:[s]).concat(a):o[r]=a}return o})}function I(e){var t=e.util,n=e.directive("_component")||e.internalDirectives.component,i=t.extend({},n);t.extend(i,{_isRouterView:!0,bind:function(){var e=this.vm.$route;if(!e)return void E("<router-view> can only be used inside a router-enabled app.");this._isDynamicLiteral=!0,n.bind.call(this);for(var t=void 0,i=this.vm;i;){if(i._routerView){t=i._routerView;break}i=i.$parent}if(t)this.parentView=t,t.childView=this;else{var o=e.router;o._rootView=this}var r=e.router._currentTransition;if(!t&&r.done||t&&t.activated){var s=t?t.depth+1:0;j(this,r,s)}},unbind:function(){this.parentView&&(this.parentView.childView=null),n.unbind.call(this)}}),e.elementDirective("router-view",i)}function L(e){function t(e){return e.protocol===location.protocol&&e.hostname===location.hostname&&e.port===location.port}function n(e,t,n){if(t=t.trim(),t.indexOf(" ")===-1)return void n(e,t);for(var i=t.split(/\s+/),o=0,r=i.length;o<r;o++)n(e,i[o])}var i=e.util,o=i.bind,r=i.isObject,s=i.addClass,a=i.removeClass,c=e.directive("on").priority,l="__vue-router-link-update__",h=0;e.directive("link-active",{priority:9999,bind:function(){for(var e=this,t=String(h++),n=this.el.querySelectorAll("[v-link]"),i=0,o=n.length;i<o;i++){var r=n[i],s=r.getAttribute(l),a=s?s+","+t:t;r.setAttribute(l,a)}this.vm.$on(l,this.cb=function(n,i){n.activeIds.indexOf(t)>-1&&n.updateClasses(i,e.el)})},unbind:function(){this.vm.$off(l,this.cb)}}),e.directive("link",{priority:c-2,bind:function(){var e=this.vm;if(!e.$route)return void E("v-link can only be used inside a router-enabled app.");this.router=e.$route.router,this.unwatch=e.$watch("$route",o(this.onRouteUpdate,this));var t=this.el.getAttribute(l);t&&(this.el.removeAttribute(l),this.activeIds=t.split(",")),"A"===this.el.tagName&&"_blank"===this.el.getAttribute("target")||(this.handler=o(this.onClick,this),this.el.addEventListener("click",this.handler))},update:function(e){this.target=e,r(e)&&(this.append=e.append,this.exact=e.exact,this.prevActiveClass=this.activeClass,this.activeClass=e.activeClass),this.onRouteUpdate(this.vm.$route)},onClick:function(e){if(!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||0!==e.button)){var n=this.target;if(n)e.preventDefault(),this.router.go(n);else{for(var i=e.target;"A"!==i.tagName&&i!==this.el;)i=i.parentNode;if("A"===i.tagName&&t(i)){e.preventDefault();var o=i.pathname;this.router.history.root&&(o=o.replace(this.router.history.rootRE,"")),this.router.go({path:o,replace:n&&n.replace,append:n&&n.append})}}}},onRouteUpdate:function(e){var t=this.router.stringifyPath(this.target);this.path!==t&&(this.path=t,this.updateActiveMatch(),this.updateHref()),this.activeIds?this.vm.$emit(l,this,e.path):this.updateClasses(e.path,this.el)},updateActiveMatch:function(){this.activeRE=this.path&&!this.exact?new RegExp("^"+this.path.replace(/\/$/,"").replace(se,"").replace(re,"\\$&")+"(\\/|$)"):null},updateHref:function(){if("A"===this.el.tagName){var e=this.path,t=this.router,n="/"===e.charAt(0),i=e&&("hash"===t.mode||n)?t.history.formatPath(e,this.append):e;i?this.el.href=i:this.el.removeAttribute("href")}},updateClasses:function(e,t){var i=this.activeClass||this.router._linkActiveClass;this.prevActiveClass&&this.prevActiveClass!==i&&n(t,this.prevActiveClass,a);var o=this.path.replace(se,"");e=e.replace(se,""),this.exact?o===e||"/"!==o.charAt(o.length-1)&&o===e.replace(oe,"")?n(t,i,s):n(t,i,a):this.activeRE&&this.activeRE.test(e)?n(t,i,s):n(t,i,a)},unbind:function(){this.el.removeEventListener("click",this.handler),this.unwatch&&this.unwatch()}})}function H(e,t){var n=t.component;ce.util.isPlainObject(n)&&(n=t.component=ce.extend(n)),"function"!=typeof n&&(t.component=null,E('invalid component for route "'+e+'".'))}var z={};z.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.prototype={to:function(e,t){var n=this.delegate;if(n&&n.willAddRoute&&(e=n.willAddRoute(this.matcher.target,e)),this.matcher.add(this.path,e),t){if(0===t.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,e,t,this.delegate)}return this}},t.prototype={add:function(e,t){this.routes[e]=t},addChild:function(e,i,o,r){var s=new t(i);this.children[e]=s;var a=n(e,s,r);r&&r.contextEntered&&r.contextEntered(i,a),o(a)}};var B=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],U=new RegExp("(\\"+B.join("|\\")+")","g"),W=!1;l.prototype={eachChar:function(e){for(var t,n=this.string,i=0,o=n.length;i<o;i++)t=n.charAt(i),e({validChars:t})},regex:function(){return this.string.replace(U,"\\$1")},generate:function(){return this.string}},h.prototype={eachChar:function(e){e({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(e){var t=e[this.name];return null==t?":"+this.name:t}},u.prototype={eachChar:function(e){e({invalidChars:"",repeat:!0})},regex:function(){return"(.+)"},generate:function(e){var t=e[this.name];return null==t?":"+this.name:t}},f.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},d.prototype={get:function(e){for(var t=this.nextStates,n=0,i=t.length;n<i;n++){var o=t[n],r=o.charSpec.validChars===e.validChars;if(r=r&&o.charSpec.invalidChars===e.invalidChars)return o}},put:function(e){var t;return(t=this.get(e))?t:(t=new d(e),this.nextStates.push(t),e.repeat&&t.nextStates.push(t),t)},match:function(e){for(var t,n,i,o=this.nextStates,r=[],s=0,a=o.length;s<a;s++)t=o[s],n=t.charSpec,"undefined"!=typeof(i=n.validChars)?i.indexOf(e)!==-1&&r.push(t):"undefined"!=typeof(i=n.invalidChars)&&i.indexOf(e)===-1&&r.push(t);return r}};var q=Object.create||function(e){function t(){}return t.prototype=e,new t};y.prototype=q({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});var J=function(){this.rootState=new d,this.names={}};J.prototype={add:function(e,t){for(var n,i=this.rootState,o="^",r={},s=[],a=[],c=!0,l=0,h=e.length;l<h;l++){var u=e[l],d=[],v=p(u.path,d,r);a=a.concat(v);for(var _=0,y=v.length;_<y;_++){var b=v[_];b instanceof f||(c=!1,i=i.put({validChars:"/"}),o+="/",i=m(i,b),o+=b.regex())}var g={handler:u.handler,names:d};s.push(g)}c&&(i=i.put({validChars:"/"}),o+="/"),i.handlers=s,i.regex=new RegExp(o+"$"),i.specificity=r,(n=t&&t.as)&&(this.names[n]={segments:a,handlers:s})},handlersFor:function(e){var t=this.names[e],n=[];if(!t)throw new Error("There is no route named "+e);for(var i=0,o=t.handlers.length;i<o;i++)n.push(t.handlers[i]);return n},hasRoute:function(e){return!!this.names[e]},generate:function(e,t){var n=this.names[e],i="";if(!n)throw new Error("There is no route named "+e);for(var o=n.segments,r=0,s=o.length;r<s;r++){var a=o[r];a instanceof f||(i+="/",i+=a.generate(t))}return"/"!==i.charAt(0)&&(i="/"+i),t&&t.queryParams&&(i+=this.generateQueryString(t.queryParams)),i},generateQueryString:function(e){var t=[],n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(i);n.sort();for(var o=0,r=n.length;o<r;o++){i=n[o];var s=e[i];if(null!=s){var a=encodeURIComponent(i);if(c(s))for(var l=0,h=s.length;l<h;l++){var u=i+"[]="+encodeURIComponent(s[l]);t.push(u)}else a+="="+encodeURIComponent(s),t.push(a)}}return 0===t.length?"":"?"+t.join("&")},parseQueryString:function(e){for(var t=e.split("&"),n={},i=0;i<t.length;i++){var o,r=t[i].split("="),s=g(r[0]),a=s.length,c=!1;1===r.length?o="true":(a>2&&"[]"===s.slice(a-2)&&(c=!0,s=s.slice(0,a-2),n[s]||(n[s]=[])),o=r[1]?g(r[1]):""),c?n[s].push(o):n[s]=o}return n},recognize:function(e,t){W=t;var n,i,o,r,s=[this.rootState],c={},l=!1;if(r=e.indexOf("?"),r!==-1){var h=e.substr(r+1,e.length);e=e.substr(0,r),h&&(c=this.parseQueryString(h))}if(e=a(e)){for("/"!==e.charAt(0)&&(e="/"+e),n=e.length,n>1&&"/"===e.charAt(n-1)&&(e=e.substr(0,n-1),l=!0),i=0,o=e.length;i<o&&(s=_(s,e.charAt(i)),s.length);i++);var u=[];for(i=0,o=s.length;i<o;i++)s[i].handlers&&u.push(s[i]);s=v(u);var f=u[0];return f&&f.handlers?(l&&"(.+)$"===f.regex.source.slice(-5)&&(e+="/"),b(f,e,c)):void 0}}},J.prototype.map=r;var Q=J.prototype.generateQueryString,Y={},G=void 0,K=/#.*$/,Z=function(){function e(t){var n=t.root,i=t.onChange;z.classCallCheck(this,e),n&&"/"!==n?("/"!==n.charAt(0)&&(n="/"+n),this.root=n.replace(/\/$/,""),this.rootRE=new RegExp("^\\"+this.root)):this.root=null,this.onChange=i;var o=document.querySelector("base");this.base=o&&o.getAttribute("href")}return e.prototype.start=function(){var e=this;this.listener=function(t){var n=location.pathname+location.search;e.root&&(n=n.replace(e.rootRE,"")),e.onChange(n,t&&t.state,location.hash)},window.addEventListener("popstate",this.listener),this.listener()},e.prototype.stop=function(){window.removeEventListener("popstate",this.listener)},e.prototype.go=function(e,t,n){var i=this.formatPath(e,n);t?history.replaceState({},"",i):(history.replaceState({pos:{x:window.pageXOffset,y:window.pageYOffset}},"",location.href),history.pushState({},"",i));var o=e.match(K),r=o&&o[0];e=i.replace(K,"").replace(this.rootRE,""),this.onChange(e,null,r)},e.prototype.formatPath=function(e,t){return"/"===e.charAt(0)?this.root?this.root+"/"+e.replace(/^\//,""):e:w(this.base||location.pathname,e,t)},e}(),X=function(){function e(t){var n=t.hashbang,i=t.onChange;z.classCallCheck(this,e),this.hashbang=n,this.onChange=i}return e.prototype.start=function(){var e=this;this.listener=function(){var t=location.hash,n=t.replace(/^#!?/,"");"/"!==n.charAt(0)&&(n="/"+n);var i=e.formatPath(n);if(i!==t)return void location.replace(i);var o=location.search&&t.indexOf("?")>-1?"&"+location.search.slice(1):location.search;e.onChange(t.replace(/^#!?/,"")+o)},window.addEventListener("hashchange",this.listener),this.listener()},e.prototype.stop=function(){window.removeEventListener("hashchange",this.listener)},e.prototype.go=function(e,t,n){e=this.formatPath(e,n),t?location.replace(e):location.hash=e},e.prototype.formatPath=function(e,t){var n="/"===e.charAt(0),i="#"+(this.hashbang?"!":"");return n?i+e:i+w(location.hash.replace(/^#!?/,""),e,t)},e}(),ee=function(){function e(t){var n=t.onChange;z.classCallCheck(this,e),this.onChange=n,this.currentPath="/"}return e.prototype.start=function(){this.onChange("/")},e.prototype.stop=function(){},e.prototype.go=function(e,t,n){e=this.currentPath=this.formatPath(e,n),this.onChange(e)},e.prototype.formatPath=function(e,t){return"/"===e.charAt(0)?e:w(this.currentPath,e,t)},e}(),te=function(){function e(t,n,i){z.classCallCheck(this,e),this.router=t,this.to=n,this.from=i,this.next=null,this.aborted=!1,this.done=!1}return e.prototype.abort=function(){if(!this.aborted){this.aborted=!0;var e=!this.from.path&&"/"===this.to.path;e||this.router.replace(this.from.path||"/")}},e.prototype.redirect=function(e){this.aborted||(this.aborted=!0,"string"==typeof e?e=$(e,this.to.params,this.to.query):(e.params=e.params||this.to.params,e.query=e.query||this.to.query),this.router.replace(e))},e.prototype.start=function(e){for(var t=this,n=[],i=this.router._rootView;i;)n.unshift(i),i=i.childView;var o=n.slice().reverse(),r=this.activateQueue=F(this.to.matched).map(function(e){return e.handler}),s=void 0,a=void 0;for(s=0;s<o.length&&N(o[s],r[s],t);s++);s>0&&(a=o.slice(0,s),n=o.slice(s).reverse(),r=r.slice(s)),t.runQueue(n,O,function(){t.runQueue(r,A,function(){t.runQueue(n,T,function(){if(t.router._onTransitionValidated(t),a&&a.forEach(function(e){return D(e,t)}),n.length){var i=n[n.length-1],o=a?a.length:0;j(i,t,o,e)}else e()})})})},e.prototype.runQueue=function(e,t,n){function i(r){r>=e.length?n():t(e[r],o,function(){i(r+1)})}var o=this;i(0)},e.prototype.callHook=function(e,t,n){var i=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],o=i.expectBoolean,r=void 0!==o&&o,s=i.postActivate,a=void 0!==s&&s,c=i.processData,l=i.cleanup,h=this,u=!1,f=function(){l&&l(),h.abort()},p=function(e){if(a?v():f(),e&&!h.router._suppress)throw E("Uncaught error during transition: "),e instanceof Error?e:new Error(e)},d=function(e){try{p(e)}catch(t){setTimeout(function(){throw t},0)}},v=function(){return u?void E("transition.next() should be called only once."):(u=!0,h.aborted?void(l&&l()):void(n&&n()))},_=function(t){"boolean"==typeof t?t?v():f():x(t)?t.then(function(e){e?v():f()},d):e.length||v()},y=function(e){var t=void 0;try{t=c(e)}catch(n){return p(n)}x(t)?t.then(v,d):v()},b={to:h.to,from:h.from,abort:f,next:c?y:v,redirect:function(){h.redirect.apply(h,arguments)}},m=void 0;try{m=e.call(t,b)}catch(g){return p(g)}r?_(m):x(m)?c?m.then(y,d):m.then(v,d):c&&R(m)?y(m):e.length||v()},e.prototype.callHooks=function(e,t,n,i){var o=this;Array.isArray(e)?this.runQueue(e,function(e,n,r){o.aborted||o.callHook(e,t,r,i)},n):this.callHook(e,t,n,i)},e}(),ne=/^(component|subRoutes|fullPath)$/,ie=function he(e,t){var n=this;z.classCallCheck(this,he);var i=t._recognizer.recognize(e);i&&([].forEach.call(i,function(e){for(var t in e.handler)ne.test(t)||(n[t]=e.handler[t])}),this.query=i.queryParams,this.params=[].reduce.call(i,function(e,t){if(t.params)for(var n in t.params)e[n]=t.params[n];return e},{})),this.path=e,this.matched=i||t._notFoundHandler,Object.defineProperty(this,"router",{enumerable:!1,value:t}),Object.freeze(this)},oe=/\/$/,re=/[-.*+?^${}()|[\]\/\\]/g,se=/\?.*$/,ae={"abstract":ee,hash:X,html5:Z},ce=void 0,le=function(){function e(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=n.hashbang,o=void 0===i||i,r=n["abstract"],s=void 0!==r&&r,a=n.history,c=void 0!==a&&a,l=n.saveScrollPosition,h=void 0!==l&&l,u=n.transitionOnLoad,f=void 0!==u&&u,p=n.suppressTransitionError,d=void 0!==p&&p,v=n.root,_=void 0===v?null:v,y=n.linkActiveClass,b=void 0===y?"v-link-active":y;if(z.classCallCheck(this,e),!e.installed)throw new Error("Please install the Router with Vue.use() before creating an instance.");this.app=null,this._children=[],this._recognizer=new J,this._guardRecognizer=new J,this._started=!1,this._startCb=null,this._currentRoute={},this._currentTransition=null,this._previousTransition=null,this._notFoundHandler=null,this._notFoundRedirect=null,this._beforeEachHooks=[],this._afterEachHooks=[],this._rendered=!1,this._transitionOnLoad=f,this._root=_,this._abstract=s,this._hashbang=o;var m="undefined"!=typeof window&&window.history&&window.history.pushState;this._history=c&&m,this._historyFallback=c&&!m;var g=ce.util.inBrowser;this.mode=!g||this._abstract?"abstract":this._history?"html5":"hash";var E=ae[this.mode];this.history=new E({root:_,hashbang:this._hashbang,onChange:function(e,n,i){t._match(e,n,i)}}),this._saveScrollPosition=h,this._linkActiveClass=b,this._suppress=d}return e.prototype.map=function(e){for(var t in e)this.on(t,e[t]);return this},e.prototype.on=function(e,t){return"*"===e?this._notFound(t):this._addRoute(e,t,[]),this},e.prototype.redirect=function(e){for(var t in e)this._addRedirect(t,e[t]);return this},e.prototype.alias=function(e){for(var t in e)this._addAlias(t,e[t]);return this},e.prototype.beforeEach=function(e){return this._beforeEachHooks.push(e),this},e.prototype.afterEach=function(e){return this._afterEachHooks.push(e),this},e.prototype.go=function(e){var t=!1,n=!1;ce.util.isObject(e)&&(t=e.replace,n=e.append),e=this.stringifyPath(e),e&&this.history.go(e,t,n)},e.prototype.replace=function(e){"string"==typeof e&&(e={path:e}),e.replace=!0,this.go(e)},e.prototype.start=function(e,t,n){if(this._started)return void E("already started.");if(this._started=!0,this._startCb=n,!this.app){if(!e||!t)throw new Error("Must start vue-router with a component and a root container.");if(e instanceof ce)throw new Error("Must start vue-router with a component, not a Vue instance.");this._appContainer=t;var i=this._appConstructor="function"==typeof e?e:ce.extend(e);i.options.name=i.options.name||"RouterApp"}if(this._historyFallback){var o=window.location,r=new Z({root:this._root}),s=r.root?o.pathname.replace(r.rootRE,""):o.pathname;if(s&&"/"!==s)return void o.assign((r.root||"")+"/"+this.history.formatPath(s)+o.search)}this.history.start()},e.prototype.stop=function(){this.history.stop(),this._started=!1},e.prototype.stringifyPath=function(e){var t="";if(e&&"object"==typeof e){if(e.name){var n=ce.util.extend,i=this._currentTransition&&this._currentTransition.to.params,o=e.params||{},r=i?n(n({},i),o):o;t=encodeURI(this._recognizer.generate(e.name,r))}else e.path&&(t=encodeURI(e.path));if(e.query){var s=this._recognizer.generateQueryString(e.query);t+=t.indexOf("?")>-1?"&"+s.slice(1):s}}else t=encodeURI(e?e+"":"");return t},e.prototype._addRoute=function(e,t,n){if(H(e,t),t.path=e,t.fullPath=(n.reduce(function(e,t){return e+t.path},"")+e).replace("//","/"),n.push({path:e,handler:t}),this._recognizer.add(n,{as:t.name}),t.subRoutes)for(var i in t.subRoutes)this._addRoute(i,t.subRoutes[i],n.slice())},e.prototype._notFound=function(e){H("*",e),this._notFoundHandler=[{handler:e}]},e.prototype._addRedirect=function(e,t){"*"===e?this._notFoundRedirect=t:this._addGuard(e,t,this.replace)},e.prototype._addAlias=function(e,t){this._addGuard(e,t,this._match)},e.prototype._addGuard=function(e,t,n){var i=this;this._guardRecognizer.add([{path:e,handler:function(e,o){var r=$(t,e.params,o);n.call(i,r)}}])},e.prototype._checkGuard=function(e){var t=this._guardRecognizer.recognize(e,!0);return t?(t[0].handler(t[0],t.queryParams),!0):this._notFoundRedirect&&(t=this._recognizer.recognize(e),!t)?(this.replace(this._notFoundRedirect),!0):void 0},e.prototype._match=function(e,t,n){var i=this;if(!this._checkGuard(e)){var o=this._currentRoute,r=this._currentTransition;if(r){if(r.to.path===e)return;if(o.path===e)return r.aborted=!0,void(this._currentTransition=this._prevTransition);r.aborted=!0}var s=new ie(e,this),a=new te(this,s,o);this._prevTransition=r,this._currentTransition=a,this.app||!function(){var e=i;i.app=new i._appConstructor({el:i._appContainer,created:function(){this.$router=e},_meta:{$route:s}})}();var c=this._beforeEachHooks,l=function(){a.start(function(){i._postTransition(s,t,n)})};c.length?a.runQueue(c,function(e,t,n){a===i._currentTransition&&a.callHook(e,null,n,{expectBoolean:!0})},l):l(),!this._rendered&&this._startCb&&this._startCb.call(null),this._rendered=!0}},e.prototype._onTransitionValidated=function(e){var t=this._currentRoute=e.to;this.app.$route!==t&&(this.app.$route=t,this._children.forEach(function(e){e.$route=t})),this._afterEachHooks.length&&this._afterEachHooks.forEach(function(t){return t.call(null,{to:e.to,from:e.from})}),this._currentTransition.done=!0},e.prototype._postTransition=function(e,t,n){var i=t&&t.pos;i&&this._saveScrollPosition?ce.nextTick(function(){window.scrollTo(i.x,i.y)}):n&&ce.nextTick(function(){var e=document.getElementById(n.slice(1));e&&window.scrollTo(window.scrollX,e.offsetTop)})},e}();return le.installed=!1,le.install=function(e){return le.installed?void E("already installed."):(ce=e,M(ce),I(ce),L(ce),Y.Vue=ce,void(le.installed=!0))},"undefined"!=typeof window&&window.Vue&&window.Vue.use(le),le})},function(e,t,n){var i=n(70);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(71);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(72);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(73);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(74);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(75);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(76);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(77);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(78);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(79);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(80);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(81);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(82);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){(function(t,n){/*!
	 * Vue.js v1.0.26
	 * (c) 2016 Evan You
	 * Released under the MIT License.
	 */
"use strict";function i(e,t,n){if(r(e,t))return void(e[t]=n);if(e._isVue)return void i(e._data,t,n);var o=e.__ob__;if(!o)return void(e[t]=n);if(o.convert(t,n),o.dep.notify(),o.vms)for(var s=o.vms.length;s--;){var a=o.vms[s];a._proxy(t),a._digest()}return n}function o(e,t){if(r(e,t)){delete e[t];var n=e.__ob__;if(!n)return void(e._isVue&&(delete e._data[t],e._digest()));if(n.dep.notify(),n.vms)for(var i=n.vms.length;i--;){var o=n.vms[i];o._unproxy(t),o._digest()}}}function r(e,t){return Sn.call(e,t)}function s(e){return Vn.test(e)}function a(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function c(e){return null==e?"":e.toString()}function l(e){if("string"!=typeof e)return e;var t=Number(e);return isNaN(t)?e:t}function h(e){return"true"===e||"false"!==e&&e}function u(e){var t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t!==n||34!==t&&39!==t?e:e.slice(1,-1)}function f(e){return e.replace(Pn,p)}function p(e,t){return t?t.toUpperCase():""}function d(e){return e.replace(Rn,"$1-$2").toLowerCase()}function v(e){return e.replace(Fn,p)}function _(e,t){return function(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}}function y(e,t){t=t||0;for(var n=e.length-t,i=new Array(n);n--;)i[n]=e[n+t];return i}function b(e,t){for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}function m(e){return null!==e&&"object"==typeof e}function g(e){return Mn.call(e)===In}function E(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}function w(e,t){var n,i,o,r,s,a=function c(){var a=Date.now()-r;a<t&&a>=0?n=setTimeout(c,t-a):(n=null,s=e.apply(o,i),n||(o=i=null))};return function(){return o=this,i=arguments,r=Date.now(),n||(n=setTimeout(a,t)),s}}function x(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function k(e){var t=function n(){if(!n.cancelled)return e.apply(this,arguments)};return t.cancel=function(){t.cancelled=!0},t}function C(e,t){return e==t||!(!m(e)||!m(t))&&JSON.stringify(e)===JSON.stringify(t)}function $(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap=Object.create(null)}function N(){var e,t=ai.slice(pi,ui).trim();if(t){e={};var n=t.match(gi);e.name=n[0],n.length>1&&(e.args=n.slice(1).map(O))}e&&(ci.filters=ci.filters||[]).push(e),pi=ui+1}function O(e){if(Ei.test(e))return{value:l(e),dynamic:!1};var t=u(e),n=t===e;return{value:n?e:t,dynamic:n}}function A(e){var t=mi.get(e);if(t)return t;for(ai=e,di=vi=!1,_i=yi=bi=0,pi=0,ci={},ui=0,fi=ai.length;ui<fi;ui++)if(hi=li,li=ai.charCodeAt(ui),di)39===li&&92!==hi&&(di=!di);else if(vi)34===li&&92!==hi&&(vi=!vi);else if(124===li&&124!==ai.charCodeAt(ui+1)&&124!==ai.charCodeAt(ui-1))null==ci.expression?(pi=ui+1,ci.expression=ai.slice(0,ui).trim()):N();else switch(li){case 34:vi=!0;break;case 39:di=!0;break;case 40:bi++;break;case 41:bi--;break;case 91:yi++;break;case 93:yi--;break;case 123:_i++;break;case 125:_i--}return null==ci.expression?ci.expression=ai.slice(0,ui).trim():0!==pi&&N(),mi.put(e,ci),ci}function T(e){return e.replace(xi,"\\$&")}function j(){var e=T(ji.delimiters[0]),t=T(ji.delimiters[1]),n=T(ji.unsafeDelimiters[0]),i=T(ji.unsafeDelimiters[1]);Ci=new RegExp(n+"((?:.|\\n)+?)"+i+"|"+e+"((?:.|\\n)+?)"+t,"g"),$i=new RegExp("^"+n+"((?:.|\\n)+?)"+i+"$"),ki=new $(1e3)}function D(e){ki||j();var t=ki.get(e);if(t)return t;if(!Ci.test(e))return null;for(var n,i,o,r,s,a,c=[],l=Ci.lastIndex=0;n=Ci.exec(e);)i=n.index,i>l&&c.push({value:e.slice(l,i)}),o=$i.test(n[0]),r=o?n[1]:n[2],s=r.charCodeAt(0),a=42===s,r=a?r.slice(1):r,c.push({tag:!0,value:r.trim(),html:o,oneTime:a}),l=i+n[0].length;return l<e.length&&c.push({value:e.slice(l)}),ki.put(e,c),c}function S(e,t){return e.length>1?e.map(function(e){return V(e,t)}).join("+"):V(e[0],t,!0)}function V(e,t,n){return e.tag?e.oneTime&&t?'"'+t.$eval(e.value)+'"':P(e.value,n):'"'+e.value+'"'}function P(e,t){if(Ni.test(e)){var n=A(e);return n.filters?"this._applyFilters("+n.expression+",null,"+JSON.stringify(n.filters)+",false)":"("+e+")"}return t?e:"("+e+")"}function R(e,t,n,i){I(e,1,function(){t.appendChild(e)},n,i)}function F(e,t,n,i){I(e,1,function(){W(e,t)},n,i)}function M(e,t,n){I(e,-1,function(){J(e)},t,n)}function I(e,t,n,i,o){var r=e.__v_trans;if(!r||!r.hooks&&!Xn||!i._isCompiled||i.$parent&&!i.$parent._isCompiled)return n(),void(o&&o());var s=t>0?"enter":"leave";r[s](n,o)}function L(e){if("string"==typeof e){var t=e;e=document.querySelector(e),e||"production"!==n.env.NODE_ENV&&Di("Cannot find element: "+t)}return e}function H(e){if(!e)return!1;var t=e.ownerDocument.documentElement,n=e.parentNode;return t===e||t===n||!(!n||1!==n.nodeType||!t.contains(n))}function z(e,t){var n=e.getAttribute(t);return null!==n&&e.removeAttribute(t),n}function B(e,t){var n=z(e,":"+t);return null===n&&(n=z(e,"v-bind:"+t)),n}function U(e,t){return e.hasAttribute(t)||e.hasAttribute(":"+t)||e.hasAttribute("v-bind:"+t)}function W(e,t){t.parentNode.insertBefore(e,t)}function q(e,t){t.nextSibling?W(e,t.nextSibling):t.parentNode.appendChild(e)}function J(e){e.parentNode.removeChild(e)}function Q(e,t){t.firstChild?W(e,t.firstChild):t.appendChild(e)}function Y(e,t){var n=e.parentNode;n&&n.replaceChild(t,e)}function G(e,t,n,i){e.addEventListener(t,n,i)}function K(e,t,n){e.removeEventListener(t,n)}function Z(e){var t=e.className;return"object"==typeof t&&(t=t.baseVal||""),t}function X(e,t){qn&&!/svg$/.test(e.namespaceURI)?e.className=t:e.setAttribute("class",t)}function ee(e,t){if(e.classList)e.classList.add(t);else{var n=" "+Z(e)+" ";n.indexOf(" "+t+" ")<0&&X(e,(n+t).trim())}}function te(e,t){if(e.classList)e.classList.remove(t);else{for(var n=" "+Z(e)+" ",i=" "+t+" ";n.indexOf(i)>=0;)n=n.replace(i," ");X(e,n.trim())}e.className||e.removeAttribute("class")}function ne(e,t){var n,i;if(re(e)&&he(e.content)&&(e=e.content),e.hasChildNodes())for(ie(e),i=t?document.createDocumentFragment():document.createElement("div");n=e.firstChild;)i.appendChild(n);return i}function ie(e){for(var t;t=e.firstChild,oe(t);)e.removeChild(t);for(;t=e.lastChild,oe(t);)e.removeChild(t)}function oe(e){return e&&(3===e.nodeType&&!e.data.trim()||8===e.nodeType)}function re(e){return e.tagName&&"template"===e.tagName.toLowerCase()}function se(e,t){var n=ji.debug?document.createComment(e):document.createTextNode(t?" ":"");return n.__v_anchor=!0,n}function ae(e){if(e.hasAttributes())for(var t=e.attributes,n=0,i=t.length;n<i;n++){var o=t[n].name;if(Pi.test(o))return f(o.replace(Pi,""))}}function ce(e,t,n){for(var i;e!==t;)i=e.nextSibling,n(e),e=i;n(t)}function le(e,t,n,i,o){function r(){if(a++,s&&a>=c.length){for(var e=0;e<c.length;e++)i.appendChild(c[e]);o&&o()}}var s=!1,a=0,c=[];ce(e,t,function(e){e===t&&(s=!0),c.push(e),M(e,n,r)})}function he(e){return e&&11===e.nodeType}function ue(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function fe(e,t){var i=e.tagName.toLowerCase(),o=e.hasAttributes();if(Ri.test(i)||Fi.test(i)){if(o)return pe(e,t)}else{if(ge(t,"components",i))return{id:i};var r=o&&pe(e,t);if(r)return r;if("production"!==n.env.NODE_ENV){var s=t._componentNameMap&&t._componentNameMap[i];s?Di("Unknown custom element: <"+i+"> - did you mean <"+s+">? HTML is case-insensitive, remember to use kebab-case in templates."):Mi(e,i)&&Di("Unknown custom element: <"+i+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.')}}}function pe(e,t){var n=e.getAttribute("is");if(null!=n){if(ge(t,"components",n))return e.removeAttribute("is"),{id:n}}else if(n=B(e,"is"),null!=n)return{id:n,dynamic:!0}}function de(e,t){var n,o,s;for(n in t)o=e[n],s=t[n],r(e,n)?m(o)&&m(s)&&de(o,s):i(e,n,s);return e}function ve(e,t){var n=Object.create(e||null);return t?b(n,be(t)):n}function _e(e){if(e.components){var t,i=e.components=be(e.components),o=Object.keys(i);if("production"!==n.env.NODE_ENV)var r=e._componentNameMap={};for(var s=0,a=o.length;s<a;s++){var c=o[s];Ri.test(c)||Fi.test(c)?"production"!==n.env.NODE_ENV&&Di("Do not use built-in or reserved HTML elements as component id: "+c):("production"!==n.env.NODE_ENV&&(r[c.replace(/-/g,"").toLowerCase()]=d(c)),t=i[c],g(t)&&(i[c]=Nn.extend(t)))}}}function ye(e){var t,n,i=e.props;if(Ln(i))for(e.props={},t=i.length;t--;)n=i[t],"string"==typeof n?e.props[n]=null:n.name&&(e.props[n.name]=n);else if(g(i)){var o=Object.keys(i);for(t=o.length;t--;)n=i[o[t]],"function"==typeof n&&(i[o[t]]={type:n})}}function be(e){if(Ln(e)){for(var t,i={},o=e.length;o--;){t=e[o];var r="function"==typeof t?t.options&&t.options.name||t.id:t.name||t.id;r?i[r]=t:"production"!==n.env.NODE_ENV&&Di('Array-syntax assets must provide a "name" or "id" field.')}return i}return e}function me(e,t,i){function o(n){var o=Ii[n]||Li;a[n]=o(e[n],t[n],i,n)}_e(t),ye(t),"production"!==n.env.NODE_ENV&&t.propsData&&!i&&Di("propsData can only be used as an instantiation option.");var s,a={};if(t["extends"]&&(e="function"==typeof t["extends"]?me(e,t["extends"].options,i):me(e,t["extends"],i)),t.mixins)for(var c=0,l=t.mixins.length;c<l;c++){var h=t.mixins[c],u=h.prototype instanceof Nn?h.options:h;e=me(e,u,i)}for(s in e)o(s);for(s in t)r(e,s)||o(s);return a}function ge(e,t,i,o){if("string"==typeof i){var r,s=e[t],a=s[i]||s[r=f(i)]||s[r.charAt(0).toUpperCase()+r.slice(1)];return"production"!==n.env.NODE_ENV&&o&&!a&&Di("Failed to resolve "+t.slice(0,-1)+": "+i,e),a}}function Ee(){this.id=Hi++,this.subs=[]}function we(e){Wi=!1,e(),Wi=!0}function xe(e){if(this.value=e,this.dep=new Ee,E(e,"__ob__",this),Ln(e)){var t=Hn?ke:Ce;t(e,Bi,Ui),this.observeArray(e)}else this.walk(e)}function ke(e,t){e.__proto__=t}function Ce(e,t,n){for(var i=0,o=n.length;i<o;i++){var r=n[i];E(e,r,t[r])}}function $e(e,t){if(e&&"object"==typeof e){var n;return r(e,"__ob__")&&e.__ob__ instanceof xe?n=e.__ob__:Wi&&(Ln(e)||g(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new xe(e)),n&&t&&n.addVm(t),n}}function Ne(e,t,n){var i=new Ee,o=Object.getOwnPropertyDescriptor(e,t);if(!o||o.configurable!==!1){var r=o&&o.get,s=o&&o.set,a=$e(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=r?r.call(e):n;if(Ee.target&&(i.depend(),a&&a.dep.depend(),Ln(t)))for(var o,s=0,c=t.length;s<c;s++)o=t[s],o&&o.__ob__&&o.__ob__.dep.depend();return t},set:function(t){var o=r?r.call(e):n;t!==o&&(s?s.call(e,t):n=t,a=$e(t),i.notify())}})}}function Oe(e){e.prototype._init=function(e){e=e||{},this.$el=null,this.$parent=e.parent,this.$root=this.$parent?this.$parent.$root:this,this.$children=[],this.$refs={},this.$els={},this._watchers=[],this._directives=[],this._uid=Ji++,this._isVue=!0,this._events={},this._eventsCount={},this._isFragment=!1,this._fragment=this._fragmentStart=this._fragmentEnd=null,this._isCompiled=this._isDestroyed=this._isReady=this._isAttached=this._isBeingDestroyed=this._vForRemoving=!1,this._unlinkFn=null,this._context=e._context||this.$parent,this._scope=e._scope,this._frag=e._frag,this._frag&&this._frag.children.push(this),this.$parent&&this.$parent.$children.push(this),e=this.$options=me(this.constructor.options,e,this),this._updateRef(),this._data={},this._callHook("init"),this._initState(),this._initEvents(),this._callHook("created"),e.el&&this.$mount(e.el)}}function Ae(e){if(void 0===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:case 48:return e;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return t>=97&&t<=122||t>=65&&t<=90?"ident":t>=49&&t<=57?"number":"else"}function Te(e){var t=e.trim();return("0"!==e.charAt(0)||!isNaN(e))&&(s(t)?u(t):"*"+t)}function je(e){function t(){var t=e[h+1];if(u===oo&&"'"===t||u===ro&&'"'===t)return h++,i="\\"+t,p[Yi](),!0}var n,i,o,r,s,a,c,l=[],h=-1,u=Xi,f=0,p=[];for(p[Gi]=function(){void 0!==o&&(l.push(o),o=void 0)},p[Yi]=function(){void 0===o?o=i:o+=i},p[Ki]=function(){p[Yi](),f++},p[Zi]=function(){if(f>0)f--,u=io,p[Yi]();else{if(f=0,o=Te(o),o===!1)return!1;p[Gi]()}};null!=u;)if(h++,n=e[h],"\\"!==n||!t()){if(r=Ae(n),c=co[u],s=c[r]||c["else"]||ao,s===ao)return;if(u=s[0],a=p[s[1]],a&&(i=s[2],i=void 0===i?n:i,a()===!1))return;if(u===so)return l.raw=e,l}}function De(e){var t=Qi.get(e);return t||(t=je(e),t&&Qi.put(e,t)),t}function Se(e,t){return ze(t).get(e)}function Ve(e,t,o){var r=e;if("string"==typeof t&&(t=je(t)),!t||!m(e))return!1;for(var s,a,c=0,l=t.length;c<l;c++)s=e,a=t[c],"*"===a.charAt(0)&&(a=ze(a.slice(1)).get.call(r,r)),c<l-1?(e=e[a],m(e)||(e={},"production"!==n.env.NODE_ENV&&s._isVue&&lo(t,s),i(s,a,e))):Ln(e)?e.$set(a,o):a in e?e[a]=o:("production"!==n.env.NODE_ENV&&e._isVue&&lo(t,e),i(e,a,o));return!0}function Pe(){}function Re(e,t){var n=ko.length;return ko[n]=t?e.replace(bo,"\\n"):e,'"'+n+'"'}function Fe(e){var t=e.charAt(0),n=e.slice(1);return po.test(n)?e:(n=n.indexOf('"')>-1?n.replace(go,Me):n,t+"scope."+n)}function Me(e,t){return ko[t]}function Ie(e){_o.test(e)&&"production"!==n.env.NODE_ENV&&Di("Avoid using reserved keywords in expression: "+e),ko.length=0;var t=e.replace(mo,Re).replace(yo,"");return t=(" "+t).replace(wo,Fe).replace(go,Me),Le(t)}function Le(e){try{return new Function("scope","return "+e+";")}catch(t){return"production"!==n.env.NODE_ENV&&Di(t.toString().match(/unsafe-eval|CSP/)?"It seems you are using the default build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. Use the CSP-compliant build instead: http://vuejs.org/guide/installation.html#CSP-compliant-build":"Invalid expression. Generated function body: "+e),Pe}}function He(e){var t=De(e);return t?function(e,n){Ve(e,t,n)}:void("production"!==n.env.NODE_ENV&&Di("Invalid setter expression: "+e))}function ze(e,t){e=e.trim();var n=uo.get(e);if(n)return t&&!n.set&&(n.set=He(n.exp)),n;var i={exp:e};return i.get=Be(e)&&e.indexOf("[")<0?Le("scope."+e):Ie(e),t&&(i.set=He(e)),uo.put(e,i),i}function Be(e){return Eo.test(e)&&!xo.test(e)&&"Math."!==e.slice(0,5)}function Ue(){$o.length=0,No.length=0,Oo={},Ao={},To=!1}function We(){for(var e=!0;e;)e=!1,qe($o),qe(No),$o.length?e=!0:(Bn&&ji.devtools&&Bn.emit("flush"),Ue())}function qe(e){for(var t=0;t<e.length;t++){var i=e[t],o=i.id;if(Oo[o]=null,i.run(),"production"!==n.env.NODE_ENV&&null!=Oo[o]&&(Ao[o]=(Ao[o]||0)+1,Ao[o]>ji._maxUpdateCount)){Di('You may have an infinite update loop for watcher with expression "'+i.expression+'"',i.vm);break}}e.length=0}function Je(e){var t=e.id;if(null==Oo[t]){var n=e.user?No:$o;Oo[t]=n.length,n.push(e),To||(To=!0,oi(We))}}function Qe(e,t,n,i){i&&b(this,i);var o="function"==typeof t;if(this.vm=e,e._watchers.push(this),this.expression=t,this.cb=n,this.id=++jo,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ri,this.newDepIds=new ri,this.prevError=null,o)this.getter=t,this.setter=void 0;else{var r=ze(t,this.twoWay);this.getter=r.get,this.setter=r.set}this.value=this.lazy?void 0:this.get(),this.queued=this.shallow=!1}function Ye(e,t){var n=void 0,i=void 0;t||(t=Do,t.clear());var o=Ln(e),r=m(e);if((o||r)&&Object.isExtensible(e)){if(e.__ob__){var s=e.__ob__.dep.id;if(t.has(s))return;t.add(s)}if(o)for(n=e.length;n--;)Ye(e[n],t);else if(r)for(i=Object.keys(e),n=i.length;n--;)Ye(e[i[n]],t)}}function Ge(e){return re(e)&&he(e.content)}function Ke(e,t){var n=t?e:e.trim(),i=Vo.get(n);if(i)return i;var o=document.createDocumentFragment(),r=e.match(Fo),s=Mo.test(e),a=Io.test(e);if(r||s||a){var c=r&&r[1],l=Ro[c]||Ro.efault,h=l[0],u=l[1],f=l[2],p=document.createElement("div");for(p.innerHTML=u+e+f;h--;)p=p.lastChild;for(var d;d=p.firstChild;)o.appendChild(d)}else o.appendChild(document.createTextNode(e));return t||ie(o),Vo.put(n,o),o}function Ze(e){if(Ge(e))return Ke(e.innerHTML);if("SCRIPT"===e.tagName)return Ke(e.textContent);for(var t,n=Xe(e),i=document.createDocumentFragment();t=n.firstChild;)i.appendChild(t);return ie(i),i}function Xe(e){if(!e.querySelectorAll)return e.cloneNode();var t,n,i,o=e.cloneNode(!0);if(Lo){var r=o;if(Ge(e)&&(e=e.content,r=o.content),n=e.querySelectorAll("template"),n.length)for(i=r.querySelectorAll("template"),t=i.length;t--;)i[t].parentNode.replaceChild(Xe(n[t]),i[t])}if(Ho)if("TEXTAREA"===e.tagName)o.value=e.value;else if(n=e.querySelectorAll("textarea"),n.length)for(i=o.querySelectorAll("textarea"),t=i.length;t--;)i[t].value=n[t].value;return o}function et(e,t,n){var i,o;return he(e)?(ie(e),t?Xe(e):e):("string"==typeof e?n||"#"!==e.charAt(0)?o=Ke(e,n):(o=Po.get(e),o||(i=document.getElementById(e.slice(1)),i&&(o=Ze(i),Po.put(e,o)))):e.nodeType&&(o=Ze(e)),o&&t?Xe(o):o)}function tt(e,t,n,i,o,r){this.children=[],this.childFrags=[],this.vm=t,this.scope=o,this.inserted=!1,this.parentFrag=r,r&&r.childFrags.push(this),this.unlink=e(t,n,i,o,this);var s=this.single=1===n.childNodes.length&&!n.childNodes[0].__v_anchor;s?(this.node=n.childNodes[0],this.before=nt,this.remove=it):(this.node=se("fragment-start"),this.end=se("fragment-end"),this.frag=n,Q(this.node,n),n.appendChild(this.end),this.before=ot,this.remove=rt),this.node.__v_frag=this}function nt(e,t){this.inserted=!0;var n=t!==!1?F:W;n(this.node,e,this.vm),H(this.node)&&this.callHook(st)}function it(){this.inserted=!1;var e=H(this.node),t=this;this.beforeRemove(),M(this.node,this.vm,function(){e&&t.callHook(at),t.destroy()})}function ot(e,t){this.inserted=!0;var n=this.vm,i=t!==!1?F:W;ce(this.node,this.end,function(t){i(t,e,n)}),H(this.node)&&this.callHook(st)}function rt(){this.inserted=!1;var e=this,t=H(this.node);this.beforeRemove(),le(this.node,this.end,this.vm,this.frag,function(){t&&e.callHook(at),e.destroy()})}function st(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function at(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}function ct(e,t){this.vm=e;var n,i="string"==typeof t;i||re(t)&&!t.hasAttribute("v-if")?n=et(t,!0):(n=document.createDocumentFragment(),n.appendChild(t)),this.template=n;var o,r=e.constructor.cid;if(r>0){var s=r+(i?t:ue(t));o=Uo.get(s),o||(o=It(n,e.$options,!0),Uo.put(s,o))}else o=It(n,e.$options,!0);this.linker=o}function lt(e,t,n){var i=e.node.previousSibling;if(i){for(e=i.__v_frag;!(e&&e.forId===n&&e.inserted||i===t);){if(i=i.previousSibling,!i)return;e=i.__v_frag}return e}}function ht(e){var t=e.node;if(e.end)for(;!t.__vue__&&t!==e.end&&t.nextSibling;)t=t.nextSibling;return t.__vue__}function ut(e){for(var t=-1,n=new Array(Math.floor(e));++t<e;)n[t]=t;return n}function ft(e,t,n,i){return i?"$index"===i?e:i.charAt(0).match(/\w/)?Se(n,i):n[i]:t||n}function pt(e,t,n){for(var i,o,r,s=t?[]:null,a=0,c=e.options.length;a<c;a++)if(i=e.options[a],r=n?i.hasAttribute("selected"):i.selected){if(o=i.hasOwnProperty("_value")?i._value:i.value,!t)return o;s.push(o)}return s}function dt(e,t){for(var n=e.length;n--;)if(C(e[n],t))return n;return-1}function vt(e,t){var n=t.map(function(e){var t=e.charCodeAt(0);return t>47&&t<58?parseInt(e,10):1===e.length&&(t=e.toUpperCase().charCodeAt(0),t>64&&t<91)?t:ur[e]});return n=[].concat.apply([],n),function(t){if(n.indexOf(t.keyCode)>-1)return e.call(this,t)}}function _t(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function yt(e){return function(t){return t.preventDefault(),e.call(this,t)}}function bt(e){return function(t){if(t.target===t.currentTarget)return e.call(this,t)}}function mt(e){if(_r[e])return _r[e];var t=gt(e);return _r[e]=_r[t]=t,t}function gt(e){e=d(e);var t=f(e),n=t.charAt(0).toUpperCase()+t.slice(1);yr||(yr=document.createElement("div"));var i,o=pr.length;if("filter"!==t&&t in yr.style)return{kebab:e,camel:t};for(;o--;)if(i=dr[o]+n,i in yr.style)return{kebab:pr[o]+e,camel:i}}function Et(e){var t=[];if(Ln(e))for(var n=0,i=e.length;n<i;n++){var o=e[n];if(o)if("string"==typeof o)t.push(o);else for(var r in o)o[r]&&t.push(r)}else if(m(e))for(var s in e)e[s]&&t.push(s);return t}function wt(e,t,n){if(t=t.trim(),t.indexOf(" ")===-1)return void n(e,t);for(var i=t.split(/\s+/),o=0,r=i.length;o<r;o++)n(e,i[o])}function xt(e,t,n){function i(){++r>=o?n():e[r].call(t,i)}var o=e.length,r=0;e[0].call(t,i)}function kt(e,t,i){for(var o,r,a,c,l,h,u,p=[],v=Object.keys(t),_=v.length;_--;)if(r=v[_],o=t[r]||Sr,"production"===n.env.NODE_ENV||"$data"!==r)if(l=f(r),Vr.test(l)){if(u={name:r,path:l,options:o,mode:Dr.ONE_WAY,raw:null},a=d(r),null===(c=B(e,a))&&(null!==(c=B(e,a+".sync"))?u.mode=Dr.TWO_WAY:null!==(c=B(e,a+".once"))&&(u.mode=Dr.ONE_TIME)),null!==c)u.raw=c,h=A(c),c=h.expression,u.filters=h.filters,s(c)&&!h.filters?u.optimizedLiteral=!0:(u.dynamic=!0,"production"===n.env.NODE_ENV||u.mode!==Dr.TWO_WAY||Pr.test(c)||(u.mode=Dr.ONE_WAY,Di("Cannot bind two-way prop with non-settable parent path: "+c,i))),u.parentPath=c,"production"!==n.env.NODE_ENV&&o.twoWay&&u.mode!==Dr.TWO_WAY&&Di('Prop "'+r+'" expects a two-way binding type.',i);else if(null!==(c=z(e,a)))u.raw=c;else if("production"!==n.env.NODE_ENV){var y=l.toLowerCase();c=/[A-Z\-]/.test(r)&&(e.getAttribute(y)||e.getAttribute(":"+y)||e.getAttribute("v-bind:"+y)||e.getAttribute(":"+y+".once")||e.getAttribute("v-bind:"+y+".once")||e.getAttribute(":"+y+".sync")||e.getAttribute("v-bind:"+y+".sync")),c?Di("Possible usage error for prop `"+y+"` - did you mean `"+a+"`? HTML is case-insensitive, remember to use kebab-case for props in templates.",i):o.required&&Di("Missing required prop: "+r,i)}p.push(u)}else"production"!==n.env.NODE_ENV&&Di('Invalid prop key: "'+r+'". Prop keys must be valid identifiers.',i);else Di("Do not use $data as prop.",i);return Ct(p)}function Ct(e){return function(t,n){t._props={};for(var i,o,s,a,c,f=t.$options.propsData,p=e.length;p--;)if(i=e[p],c=i.raw,o=i.path,s=i.options,t._props[o]=i,f&&r(f,o)&&Nt(t,i,f[o]),null===c)Nt(t,i,void 0);else if(i.dynamic)i.mode===Dr.ONE_TIME?(a=(n||t._context||t).$get(i.parentPath),Nt(t,i,a)):t._context?t._bindDir({name:"prop",def:Fr,prop:i},null,null,n):Nt(t,i,t.$get(i.parentPath));else if(i.optimizedLiteral){var v=u(c);a=v===c?h(l(c)):v,Nt(t,i,a)}else a=s.type===Boolean&&(""===c||c===d(i.name))||c,Nt(t,i,a)}}function $t(e,t,n,i){var o=t.dynamic&&Be(t.parentPath),r=n;void 0===r&&(r=At(e,t)),r=jt(t,r,e);var s=r!==n;Tt(t,r,e)||(r=void 0),o&&!s?we(function(){i(r)}):i(r)}function Nt(e,t,n){$t(e,t,n,function(n){Ne(e,t.path,n)})}function Ot(e,t,n){$t(e,t,n,function(n){e[t.path]=n})}function At(e,t){var i=t.options;if(!r(i,"default"))return i.type!==Boolean&&void 0;var o=i["default"];return m(o)&&"production"!==n.env.NODE_ENV&&Di('Invalid default value for prop "'+t.name+'": Props with type Object/Array must use a factory function to return the default value.',e),"function"==typeof o&&i.type!==Function?o.call(e):o}function Tt(e,t,i){if(!e.options.required&&(null===e.raw||null==t))return!0;var o=e.options,r=o.type,s=!r,a=[];if(r){Ln(r)||(r=[r]);for(var c=0;c<r.length&&!s;c++){var l=Dt(t,r[c]);a.push(l.expectedType),s=l.valid}}if(!s)return"production"!==n.env.NODE_ENV&&Di('Invalid prop: type check failed for prop "'+e.name+'". Expected '+a.map(St).join(", ")+", got "+Vt(t)+".",i),!1;var h=o.validator;return!(h&&!h(t))||("production"!==n.env.NODE_ENV&&Di('Invalid prop: custom validator check failed for prop "'+e.name+'".',i),!1)}function jt(e,t,i){var o=e.options.coerce;return o?"function"==typeof o?o(t):("production"!==n.env.NODE_ENV&&Di('Invalid coerce for prop "'+e.name+'": expected function, got '+typeof o+".",i),t):t}function Dt(e,t){var n,i;return t===String?(i="string",n=typeof e===i):t===Number?(i="number",n=typeof e===i):t===Boolean?(i="boolean",n=typeof e===i):t===Function?(i="function",n=typeof e===i):t===Object?(i="object",n=g(e)):t===Array?(i="array",n=Ln(e)):n=e instanceof t,{valid:n,expectedType:i}}function St(e){return e?e.charAt(0).toUpperCase()+e.slice(1):"custom type"}function Vt(e){return Object.prototype.toString.call(e).slice(8,-1)}function Pt(e){Mr.push(e),Ir||(Ir=!0,oi(Rt))}function Rt(){for(var e=document.documentElement.offsetHeight,t=0;t<Mr.length;t++)Mr[t]();return Mr=[],Ir=!1,e}function Ft(e,t,i,o){this.id=t,this.el=e,this.enterClass=i&&i.enterClass||t+"-enter",this.leaveClass=i&&i.leaveClass||t+"-leave",this.hooks=i,this.vm=o,this.pendingCssEvent=this.pendingCssCb=this.cancel=this.pendingJsCb=this.op=this.cb=null,this.justEntered=!1,this.entered=this.left=!1,this.typeCache={},this.type=i&&i.type,"production"!==n.env.NODE_ENV&&this.type&&this.type!==Lr&&this.type!==Hr&&Di('invalid CSS transition type for transition="'+this.id+'": '+this.type,o);var r=this;["enterNextTick","enterDone","leaveNextTick","leaveDone"].forEach(function(e){r[e]=_(r[e],r)})}function Mt(e){if(/svg$/.test(e.namespaceURI)){var t=e.getBoundingClientRect();return!(t.width||t.height)}return!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function It(e,t,n){var i=n||!t._asComponent?qt(e,t):null,o=i&&i.terminal||hn(e)||!e.hasChildNodes()?null:Zt(e.childNodes,t);return function(e,t,n,r,s){var a=y(t.childNodes),c=Lt(function(){i&&i(e,t,n,r,s),o&&o(e,a,n,r,s)},e);return zt(e,c)}}function Lt(e,t){"production"===n.env.NODE_ENV&&(t._directives=[]);var i=t._directives.length;e();var o=t._directives.slice(i);o.sort(Ht);for(var r=0,s=o.length;r<s;r++)o[r]._bind();return o}function Ht(e,t){return e=e.descriptor.def.priority||es,t=t.descriptor.def.priority||es,e>t?-1:e===t?0:1}function zt(e,t,n,i){function o(o){Bt(e,t,o),n&&i&&Bt(n,i)}return o.dirs=t,o}function Bt(e,t,i){for(var o=t.length;o--;)t[o]._teardown(),"production"===n.env.NODE_ENV||i||e._directives.$remove(t[o])}function Ut(e,t,n,i){var o=kt(t,n,e),r=Lt(function(){o(e,i)},e);return zt(e,r)}function Wt(e,t,i){var o,r,s=t._containerAttrs,a=t._replacerAttrs;if(11!==e.nodeType)t._asComponent?(s&&i&&(o=sn(s,i)),a&&(r=sn(a,t))):r=sn(e.attributes,t);else if("production"!==n.env.NODE_ENV&&s){var c=s.filter(function(e){return e.name.indexOf("_v-")<0&&!Gr.test(e.name)&&"slot"!==e.name}).map(function(e){return'"'+e.name+'"'});if(c.length){var l=c.length>1;Di("Attribute"+(l?"s ":" ")+c.join(", ")+(l?" are":" is")+" ignored on component <"+t.el.tagName.toLowerCase()+"> because the component is a fragment instance: http://vuejs.org/guide/components.html#Fragment-Instance")}}return t._containerAttrs=t._replacerAttrs=null,function(e,t,n){var i,s=e._context;s&&o&&(i=Lt(function(){o(s,t,null,n)},s));var a=Lt(function(){r&&r(e,t)},e);return zt(e,a,s,i)}}function qt(e,t){var n=e.nodeType;return 1!==n||hn(e)?3===n&&e.data.trim()?Qt(e,t):null:Jt(e,t)}function Jt(e,t){if("TEXTAREA"===e.tagName){var n=D(e.value);n&&(e.setAttribute(":value",S(n)),e.value="")}var i,o=e.hasAttributes(),r=o&&y(e.attributes);return o&&(i=nn(e,r,t)),i||(i=en(e,t)),i||(i=tn(e,t)),!i&&o&&(i=sn(r,t)),i}function Qt(e,t){if(e._skip)return Yt;var n=D(e.wholeText);if(!n)return null;for(var i=e.nextSibling;i&&3===i.nodeType;)i._skip=!0,i=i.nextSibling;for(var o,r,s=document.createDocumentFragment(),a=0,c=n.length;a<c;a++)r=n[a],o=r.tag?Gt(r,t):document.createTextNode(r.value),s.appendChild(o);return Kt(n,s,t)}function Yt(e,t){J(t)}function Gt(e,t){function n(t){if(!e.descriptor){var n=A(e.value);e.descriptor={name:t,def:Ar[t],expression:n.expression,filters:n.filters}}}var i;return e.oneTime?i=document.createTextNode(e.value):e.html?(i=document.createComment("v-html"),n("html")):(i=document.createTextNode(" "),n("text")),i}function Kt(e,t){return function(n,i,o,r){for(var s,a,l,h=t.cloneNode(!0),u=y(h.childNodes),f=0,p=e.length;f<p;f++)s=e[f],a=s.value,s.tag&&(l=u[f],s.oneTime?(a=(r||n).$eval(a),s.html?Y(l,et(a,!0)):l.data=c(a)):n._bindDir(s.descriptor,l,o,r));Y(i,h)}}function Zt(e,t){for(var n,i,o,r=[],s=0,a=e.length;s<a;s++)o=e[s],n=qt(o,t),i=n&&n.terminal||"SCRIPT"===o.tagName||!o.hasChildNodes()?null:Zt(o.childNodes,t),r.push(n,i);return r.length?Xt(r):null}function Xt(e){return function(t,n,i,o,r){for(var s,a,c,l=0,h=0,u=e.length;l<u;h++){s=n[h],a=e[l++],c=e[l++];var f=y(s.childNodes);a&&a(t,s,i,o,r),c&&c(t,f,i,o,r)}}}function en(e,t){var n=e.tagName.toLowerCase();if(!Ri.test(n)){var i=ge(t,"elementDirectives",n);return i?rn(e,n,"",t,i):void 0}}function tn(e,t){var n=fe(e,t);if(n){var i=ae(e),o={name:"component",ref:i,expression:n.id,def:Qr.component,modifiers:{literal:!n.dynamic}},r=function(e,t,n,r,s){i&&Ne((r||e).$refs,i,null),e._bindDir(o,t,n,r,s)};return r.terminal=!0,r}}function nn(e,t,n){if(null!==z(e,"v-pre"))return on;if(e.hasAttribute("v-else")){var i=e.previousElementSibling;if(i&&i.hasAttribute("v-if"))return on}for(var o,r,s,a,c,l,h,u,f,p,d=0,v=t.length;d<v;d++)o=t[d],r=o.name.replace(Zr,""),(c=r.match(Kr))&&(f=ge(n,"directives",c[1]),f&&f.terminal&&(!p||(f.priority||ts)>p.priority)&&(p=f,h=o.name,a=an(o.name),s=o.value,l=c[1],u=c[2]));return p?rn(e,l,s,n,p,h,u,a):void 0}function on(){}function rn(e,t,n,i,o,r,s,a){var c=A(n),l={name:t,arg:s,expression:c.expression,filters:c.filters,raw:n,attr:r,modifiers:a,def:o};"for"!==t&&"router-view"!==t||(l.ref=ae(e));var h=function(e,t,n,i,o){l.ref&&Ne((i||e).$refs,l.ref,null),e._bindDir(l,t,n,i,o)};return h.terminal=!0,h}function sn(e,t){function i(e,t,n){var i=n&&ln(n),o=!i&&A(s);_.push({name:e,attr:a,raw:c,def:t,arg:h,modifiers:u,expression:o&&o.expression,filters:o&&o.filters,interp:n,hasOneTime:i})}for(var o,r,s,a,c,l,h,u,f,p,d,v=e.length,_=[];v--;)if(o=e[v],r=a=o.name,s=c=o.value,p=D(s),h=null,u=an(r),r=r.replace(Zr,""),p)s=S(p),h=r,i("bind",Ar.bind,p),"production"!==n.env.NODE_ENV&&"class"===r&&Array.prototype.some.call(e,function(e){return":class"===e.name||"v-bind:class"===e.name})&&Di('class="'+c+'": Do not mix mustache interpolation and v-bind for "class" on the same element. Use one or the other.',t);else if(Xr.test(r))u.literal=!Yr.test(r),i("transition",Qr.transition);else if(Gr.test(r))h=r.replace(Gr,""),i("on",Ar.on);else if(Yr.test(r))l=r.replace(Yr,""),"style"===l||"class"===l?i(l,Qr[l]):(h=l,i("bind",Ar.bind));else if(d=r.match(Kr)){if(l=d[1],h=d[2],"else"===l)continue;f=ge(t,"directives",l,!0),f&&i(l,f)}if(_.length)return cn(_)}function an(e){var t=Object.create(null),n=e.match(Zr);if(n)for(var i=n.length;i--;)t[n[i].slice(1)]=!0;return t}function cn(e){return function(t,n,i,o,r){for(var s=e.length;s--;)t._bindDir(e[s],n,i,o,r)}}function ln(e){for(var t=e.length;t--;)if(e[t].oneTime)return!0}function hn(e){return"SCRIPT"===e.tagName&&(!e.hasAttribute("type")||"text/javascript"===e.getAttribute("type"))}function un(e,t){return t&&(t._containerAttrs=pn(e)),re(e)&&(e=et(e)),t&&(t._asComponent&&!t.template&&(t.template="<slot></slot>"),t.template&&(t._content=ne(e),e=fn(e,t))),he(e)&&(Q(se("v-start",!0),e),e.appendChild(se("v-end",!0))),e}function fn(e,t){var i=t.template,o=et(i,!0);if(o){var r=o.firstChild,s=r.tagName&&r.tagName.toLowerCase();return t.replace?(e===document.body&&"production"!==n.env.NODE_ENV&&Di("You are mounting an instance with a template to <body>. This will replace <body> entirely. You should probably use `replace: false` here."),o.childNodes.length>1||1!==r.nodeType||"component"===s||ge(t,"components",s)||U(r,"is")||ge(t,"elementDirectives",s)||r.hasAttribute("v-for")||r.hasAttribute("v-if")?o:(t._replacerAttrs=pn(r),dn(e,r),r)):(e.appendChild(o),e)}"production"!==n.env.NODE_ENV&&Di("Invalid template option: "+i)}function pn(e){if(1===e.nodeType&&e.hasAttributes())return y(e.attributes)}function dn(e,t){for(var n,i,o=e.attributes,r=o.length;r--;)n=o[r].name,i=o[r].value,t.hasAttribute(n)||ns.test(n)?"class"===n&&!D(i)&&(i=i.trim())&&i.split(/\s+/).forEach(function(e){ee(t,e)}):t.setAttribute(n,i)}function vn(e,t){if(t){for(var i,o,r=e._slotContents=Object.create(null),s=0,a=t.children.length;s<a;s++)i=t.children[s],(o=i.getAttribute("slot"))&&(r[o]||(r[o]=[])).push(i),"production"!==n.env.NODE_ENV&&B(i,"slot")&&Di('The "slot" attribute must be static.',e.$parent);for(o in r)r[o]=_n(r[o],t);if(t.hasChildNodes()){var c=t.childNodes;if(1===c.length&&3===c[0].nodeType&&!c[0].data.trim())return;r["default"]=_n(t.childNodes,t)}}}function _n(e,t){var n=document.createDocumentFragment();e=y(e);for(var i=0,o=e.length;i<o;i++){var r=e[i];!re(r)||r.hasAttribute("v-if")||r.hasAttribute("v-for")||(t.removeChild(r),r=et(r,!0)),n.appendChild(r)}return n}function yn(e){function t(){}function i(e,t){var n=new Qe(t,e,null,{lazy:!0});return function(){return n.dirty&&n.evaluate(),
Ee.target&&n.depend(),n.value}}Object.defineProperty(e.prototype,"$data",{get:function(){return this._data},set:function(e){e!==this._data&&this._setData(e)}}),e.prototype._initState=function(){this._initProps(),this._initMeta(),this._initMethods(),this._initData(),this._initComputed()},e.prototype._initProps=function(){var e=this.$options,t=e.el,i=e.props;i&&!t&&"production"!==n.env.NODE_ENV&&Di("Props will not be compiled if no `el` option is provided at instantiation.",this),t=e.el=L(t),this._propsUnlinkFn=t&&1===t.nodeType&&i?Ut(this,t,i,this._scope):null},e.prototype._initData=function(){var e=this.$options.data,t=this._data=e?e():{};g(t)||(t={},"production"!==n.env.NODE_ENV&&Di("data functions should return an object.",this));var i,o,s=this._props,a=Object.keys(t);for(i=a.length;i--;)o=a[i],s&&r(s,o)?"production"!==n.env.NODE_ENV&&Di('Data field "'+o+'" is already defined as a prop. To provide default value for a prop, use the "default" prop option; if you want to pass prop values to an instantiation call, use the "propsData" option.',this):this._proxy(o);$e(t,this)},e.prototype._setData=function(e){e=e||{};var t=this._data;this._data=e;var n,i,o;for(n=Object.keys(t),o=n.length;o--;)i=n[o],i in e||this._unproxy(i);for(n=Object.keys(e),o=n.length;o--;)i=n[o],r(this,i)||this._proxy(i);t.__ob__.removeVm(this),$e(e,this),this._digest()},e.prototype._proxy=function(e){if(!a(e)){var t=this;Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return t._data[e]},set:function(n){t._data[e]=n}})}},e.prototype._unproxy=function(e){a(e)||delete this[e]},e.prototype._digest=function(){for(var e=0,t=this._watchers.length;e<t;e++)this._watchers[e].update(!0)},e.prototype._initComputed=function(){var e=this.$options.computed;if(e)for(var n in e){var o=e[n],r={enumerable:!0,configurable:!0};"function"==typeof o?(r.get=i(o,this),r.set=t):(r.get=o.get?o.cache!==!1?i(o.get,this):_(o.get,this):t,r.set=o.set?_(o.set,this):t),Object.defineProperty(this,n,r)}},e.prototype._initMethods=function(){var e=this.$options.methods;if(e)for(var t in e)this[t]=_(e[t],this)},e.prototype._initMeta=function(){var e=this.$options._meta;if(e)for(var t in e)Ne(this,t,e[t])}}function bn(e){function t(e,t){for(var n,i,o,r=t.attributes,s=0,a=r.length;s<a;s++)n=r[s].name,os.test(n)&&(n=n.replace(os,""),i=r[s].value,Be(i)&&(i+=".apply(this, $arguments)"),o=(e._scope||e._context).$eval(i,!0),o._fromParent=!0,e.$on(n.replace(os),o))}function i(e,t,n){if(n){var i,r,s,a;for(r in n)if(i=n[r],Ln(i))for(s=0,a=i.length;s<a;s++)o(e,t,r,i[s]);else o(e,t,r,i)}}function o(e,t,i,r,s){var a=typeof r;if("function"===a)e[t](i,r,s);else if("string"===a){var c=e.$options.methods,l=c&&c[r];l?e[t](i,l,s):"production"!==n.env.NODE_ENV&&Di('Unknown method: "'+r+'" when registering callback for '+t+': "'+i+'".',e)}else r&&"object"===a&&o(e,t,i,r.handler,r)}function r(){this._isAttached||(this._isAttached=!0,this.$children.forEach(s))}function s(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function a(){this._isAttached&&(this._isAttached=!1,this.$children.forEach(c))}function c(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}e.prototype._initEvents=function(){var e=this.$options;e._asComponent&&t(this,e.el),i(this,"$on",e.events),i(this,"$watch",e.watch)},e.prototype._initDOMHooks=function(){this.$on("hook:attached",r),this.$on("hook:detached",a)},e.prototype._callHook=function(e){this.$emit("pre-hook:"+e);var t=this.$options[e];if(t)for(var n=0,i=t.length;n<i;n++)t[n].call(this);this.$emit("hook:"+e)}}function mn(){}function gn(e,t,i,o,r,s){this.vm=t,this.el=i,this.descriptor=e,this.name=e.name,this.expression=e.expression,this.arg=e.arg,this.modifiers=e.modifiers,this.filters=e.filters,this.literal=this.modifiers&&this.modifiers.literal,this._locked=!1,this._bound=!1,this._listeners=null,this._host=o,this._scope=r,this._frag=s,"production"!==n.env.NODE_ENV&&this.el&&(this.el._vue_directives=this.el._vue_directives||[],this.el._vue_directives.push(this))}function En(e){e.prototype._updateRef=function(e){var t=this.$options._ref;if(t){var n=(this._scope||this._context).$refs;e?n[t]===this&&(n[t]=null):n[t]=this}},e.prototype._compile=function(e){var t=this.$options,n=e;if(e=un(e,t),this._initElement(e),1!==e.nodeType||null===z(e,"v-pre")){var i=this._context&&this._context.$options,o=Wt(e,t,i);vn(this,t._content);var r,s=this.constructor;t._linkerCachable&&(r=s.linker,r||(r=s.linker=It(e,t)));var a=o(this,e,this._scope),c=r?r(this,e):It(e,t)(this,e);this._unlinkFn=function(){a(),c(!0)},t.replace&&Y(n,e),this._isCompiled=!0,this._callHook("compiled")}},e.prototype._initElement=function(e){he(e)?(this._isFragment=!0,this.$el=this._fragmentStart=e.firstChild,this._fragmentEnd=e.lastChild,3===this._fragmentStart.nodeType&&(this._fragmentStart.data=this._fragmentEnd.data=""),this._fragment=e):this.$el=e,this.$el.__vue__=this,this._callHook("beforeCompile")},e.prototype._bindDir=function(e,t,n,i,o){this._directives.push(new gn(e,this,t,n,i,o))},e.prototype._destroy=function(e,t){if(this._isBeingDestroyed)return void(t||this._cleanup());var n,i,o=this,r=function(){!n||i||t||o._cleanup()};e&&this.$el&&(i=!0,this.$remove(function(){i=!1,r()})),this._callHook("beforeDestroy"),this._isBeingDestroyed=!0;var s,a=this.$parent;for(a&&!a._isBeingDestroyed&&(a.$children.$remove(this),this._updateRef(!0)),s=this.$children.length;s--;)this.$children[s].$destroy();for(this._propsUnlinkFn&&this._propsUnlinkFn(),this._unlinkFn&&this._unlinkFn(),s=this._watchers.length;s--;)this._watchers[s].teardown();this.$el&&(this.$el.__vue__=null),n=!0,r()},e.prototype._cleanup=function(){this._isDestroyed||(this._frag&&this._frag.children.$remove(this),this._data&&this._data.__ob__&&this._data.__ob__.removeVm(this),this.$el=this.$parent=this.$root=this.$children=this._watchers=this._context=this._scope=this._directives=null,this._isDestroyed=!0,this._callHook("destroyed"),this.$off())}}function wn(e){e.prototype._applyFilters=function(e,t,n,i){var o,r,s,a,c,l,h,u,f;for(l=0,h=n.length;l<h;l++)if(o=n[i?h-l-1:l],r=ge(this.$options,"filters",o.name,!0),r&&(r=i?r.write:r.read||r,"function"==typeof r)){if(s=i?[e,t]:[e],c=i?2:1,o.args)for(u=0,f=o.args.length;u<f;u++)a=o.args[u],s[u+c]=a.dynamic?this.$get(a.value):a.value;e=r.apply(this,s)}return e},e.prototype._resolveComponent=function(t,i){var o;if(o="function"==typeof t?t:ge(this.$options,"components",t,!0))if(o.options)i(o);else if(o.resolved)i(o.resolved);else if(o.requested)o.pendingCallbacks.push(i);else{o.requested=!0;var r=o.pendingCallbacks=[i];o.call(this,function(t){g(t)&&(t=e.extend(t)),o.resolved=t;for(var n=0,i=r.length;n<i;n++)r[n](t)},function(e){"production"!==n.env.NODE_ENV&&Di("Failed to resolve async component"+("string"==typeof t?": "+t:"")+". "+(e?"\nReason: "+e:""))})}}}function xn(e){function t(e){return JSON.parse(JSON.stringify(e))}e.prototype.$get=function(e,t){var n=ze(e);if(n){if(t){var i=this;return function(){i.$arguments=y(arguments);var e=n.get.call(i,i);return i.$arguments=null,e}}try{return n.get.call(this,this)}catch(o){}}},e.prototype.$set=function(e,t){var n=ze(e,!0);n&&n.set&&n.set.call(this,this,t)},e.prototype.$delete=function(e){o(this._data,e)},e.prototype.$watch=function(e,t,n){var i,o=this;"string"==typeof e&&(i=A(e),e=i.expression);var r=new Qe(o,e,t,{deep:n&&n.deep,sync:n&&n.sync,filters:i&&i.filters,user:!n||n.user!==!1});return n&&n.immediate&&t.call(o,r.value),function(){r.teardown()}},e.prototype.$eval=function(e,t){if(rs.test(e)){var n=A(e),i=this.$get(n.expression,t);return n.filters?this._applyFilters(i,null,n.filters):i}return this.$get(e,t)},e.prototype.$interpolate=function(e){var t=D(e),n=this;return t?1===t.length?n.$eval(t[0].value)+"":t.map(function(e){return e.tag?n.$eval(e.value):e.value}).join(""):e},e.prototype.$log=function(e){var n=e?Se(this._data,e):this._data;if(n&&(n=t(n)),!e){var i;for(i in this.$options.computed)n[i]=t(this[i]);if(this._props)for(i in this._props)n[i]=t(this[i])}console.log(n)}}function kn(e){function t(e,t,i,o,r,s){t=n(t);var a=!H(t),c=o===!1||a?r:s,l=!a&&!e._isAttached&&!H(e.$el);return e._isFragment?(ce(e._fragmentStart,e._fragmentEnd,function(n){c(n,t,e)}),i&&i()):c(e.$el,t,e,i),l&&e._callHook("attached"),e}function n(e){return"string"==typeof e?document.querySelector(e):e}function i(e,t,n,i){t.appendChild(e),i&&i()}function o(e,t,n,i){W(e,t),i&&i()}function r(e,t,n){J(e),n&&n()}e.prototype.$nextTick=function(e){oi(e,this)},e.prototype.$appendTo=function(e,n,o){return t(this,e,n,o,i,R)},e.prototype.$prependTo=function(e,t,i){return e=n(e),e.hasChildNodes()?this.$before(e.firstChild,t,i):this.$appendTo(e,t,i),this},e.prototype.$before=function(e,n,i){return t(this,e,n,i,o,F)},e.prototype.$after=function(e,t,i){return e=n(e),e.nextSibling?this.$before(e.nextSibling,t,i):this.$appendTo(e.parentNode,t,i),this},e.prototype.$remove=function(e,t){if(!this.$el.parentNode)return e&&e();var n=this._isAttached&&H(this.$el);n||(t=!1);var i=this,o=function(){n&&i._callHook("detached"),e&&e()};if(this._isFragment)le(this._fragmentStart,this._fragmentEnd,this,this._fragment,o);else{var s=t===!1?r:M;s(this.$el,this,o)}return this}}function Cn(e){function t(e,t,i){var o=e.$parent;if(o&&i&&!n.test(t))for(;o;)o._eventsCount[t]=(o._eventsCount[t]||0)+i,o=o.$parent}e.prototype.$on=function(e,n){return(this._events[e]||(this._events[e]=[])).push(n),t(this,e,1),this},e.prototype.$once=function(e,t){function n(){i.$off(e,n),t.apply(this,arguments)}var i=this;return n.fn=t,this.$on(e,n),this},e.prototype.$off=function(e,n){var i;if(!arguments.length){if(this.$parent)for(e in this._events)i=this._events[e],i&&t(this,e,-i.length);return this._events={},this}if(i=this._events[e],!i)return this;if(1===arguments.length)return t(this,e,-i.length),this._events[e]=null,this;for(var o,r=i.length;r--;)if(o=i[r],o===n||o.fn===n){t(this,e,-1),i.splice(r,1);break}return this},e.prototype.$emit=function(e){var t="string"==typeof e;e=t?e:e.name;var n=this._events[e],i=t||!n;if(n){n=n.length>1?y(n):n;var o=t&&n.some(function(e){return e._fromParent});o&&(i=!1);for(var r=y(arguments,1),s=0,a=n.length;s<a;s++){var c=n[s],l=c.apply(this,r);l!==!0||o&&!c._fromParent||(i=!0)}}return i},e.prototype.$broadcast=function(e){var t="string"==typeof e;if(e=t?e:e.name,this._eventsCount[e]){var n=this.$children,i=y(arguments);t&&(i[0]={name:e,source:this});for(var o=0,r=n.length;o<r;o++){var s=n[o],a=s.$emit.apply(s,i);a&&s.$broadcast.apply(s,i)}return this}},e.prototype.$dispatch=function(e){var t=this.$emit.apply(this,arguments);if(t){var n=this.$parent,i=y(arguments);for(i[0]={name:e,source:this};n;)t=n.$emit.apply(n,i),n=t?n.$parent:null;return this}};var n=/^hook:/}function $n(e){function t(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")}e.prototype.$mount=function(e){return this._isCompiled?void("production"!==n.env.NODE_ENV&&Di("$mount() should be called only once.",this)):(e=L(e),e||(e=document.createElement("div")),this._compile(e),this._initDOMHooks(),H(this.$el)?(this._callHook("attached"),t.call(this)):this.$once("hook:attached",t),this)},e.prototype.$destroy=function(e,t){this._destroy(e,t)},e.prototype.$compile=function(e,t,n,i){return It(e,this.$options,!0)(this,e,t,n,i)}}function Nn(e){this._init(e)}function On(e,t,n){return n=n?parseInt(n,10):0,t=l(t),"number"==typeof t?e.slice(n,n+t):e}function An(e,t,n){if(e=ls(e),null==t)return e;if("function"==typeof t)return e.filter(t);t=(""+t).toLowerCase();for(var i,o,r,s,a="in"===n?3:2,c=Array.prototype.concat.apply([],y(arguments,a)),l=[],h=0,u=e.length;h<u;h++)if(i=e[h],r=i&&i.$value||i,s=c.length){for(;s--;)if(o=c[s],"$key"===o&&jn(i.$key,t)||jn(Se(r,o),t)){l.push(i);break}}else jn(i,t)&&l.push(i);return l}function Tn(e){function t(e,t,n){var o=i[n];return o&&("$key"!==o&&(m(e)&&"$value"in e&&(e=e.$value),m(t)&&"$value"in t&&(t=t.$value)),e=m(e)?Se(e,o):e,t=m(t)?Se(t,o):t),e===t?0:e>t?r:-r}var n=null,i=void 0;e=ls(e);var o=y(arguments,1),r=o[o.length-1];"number"==typeof r?(r=r<0?-1:1,o=o.length>1?o.slice(0,-1):o):r=1;var s=o[0];return s?("function"==typeof s?n=function(e,t){return s(e,t)*r}:(i=Array.prototype.concat.apply([],o),n=function(e,o,r){return r=r||0,r>=i.length-1?t(e,o,r):t(e,o,r)||n(e,o,r+1)}),e.slice().sort(n)):e}function jn(e,t){var n;if(g(e)){var i=Object.keys(e);for(n=i.length;n--;)if(jn(e[i[n]],t))return!0}else if(Ln(e)){for(n=e.length;n--;)if(jn(e[n],t))return!0}else if(null!=e)return e.toString().toLowerCase().indexOf(t)>-1}function Dn(e){function t(e){return new Function("return function "+v(e)+" (options) { this._init(options) }")()}e.options={directives:Ar,elementDirectives:cs,filters:us,transitions:{},components:{},partials:{},replace:!0},e.util=qi,e.config=ji,e.set=i,e["delete"]=o,e.nextTick=oi,e.compiler=is,e.FragmentFactory=ct,e.internalDirectives=Qr,e.parsers={path:ho,text:Oi,template:zo,directive:wi,expression:Co},e.cid=0;var r=1;e.extend=function(e){e=e||{};var i=this,o=0===i.cid;if(o&&e._Ctor)return e._Ctor;var s=e.name||i.options.name;"production"!==n.env.NODE_ENV&&(/^[a-zA-Z][\w-]*$/.test(s)||(Di('Invalid component name: "'+s+'". Component names can only contain alphanumeric characaters and the hyphen.'),s=null));var a=t(s||"VueComponent");return a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.cid=r++,a.options=me(i.options,e),a["super"]=i,a.extend=i.extend,ji._assetTypes.forEach(function(e){a[e]=i[e]}),s&&(a.options.components[s]=a),o&&(e._Ctor=a),a},e.use=function(e){if(!e.installed){var t=y(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):e.apply(null,t),e.installed=!0,this}},e.mixin=function(t){e.options=me(e.options,t)},ji._assetTypes.forEach(function(t){e[t]=function(i,o){return o?("production"!==n.env.NODE_ENV&&"component"===t&&(Ri.test(i)||Fi.test(i))&&Di("Do not use built-in or reserved HTML elements as component id: "+i),"component"===t&&g(o)&&(o.name||(o.name=i),o=e.extend(o)),this.options[t+"s"][i]=o,o):this.options[t+"s"][i]}}),b(e.transition,Vi)}var Sn=Object.prototype.hasOwnProperty,Vn=/^\s?(true|false|-?[\d\.]+|'[^']*'|"[^"]*")\s?$/,Pn=/-(\w)/g,Rn=/([a-z\d])([A-Z])/g,Fn=/(?:^|[-_\/])(\w)/g,Mn=Object.prototype.toString,In="[object Object]",Ln=Array.isArray,Hn="__proto__"in{},zn="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),Bn=zn&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,Un=zn&&window.navigator.userAgent.toLowerCase(),Wn=Un&&Un.indexOf("trident")>0,qn=Un&&Un.indexOf("msie 9.0")>0,Jn=Un&&Un.indexOf("android")>0,Qn=Un&&/(iphone|ipad|ipod|ios)/i.test(Un),Yn=Qn&&Un.match(/os ([\d_]+)/),Gn=Yn&&Yn[1].split("_"),Kn=Gn&&Number(Gn[0])>=9&&Number(Gn[1])>=3&&!window.indexedDB,Zn=void 0,Xn=void 0,ei=void 0,ti=void 0;if(zn&&!qn){var ni=void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend,ii=void 0===window.onanimationend&&void 0!==window.onwebkitanimationend;Zn=ni?"WebkitTransition":"transition",Xn=ni?"webkitTransitionEnd":"transitionend",ei=ii?"WebkitAnimation":"animation",ti=ii?"webkitAnimationEnd":"animationend"}var oi=function(){function e(){o=!1;var e=i.slice(0);i=[];for(var t=0;t<e.length;t++)e[t]()}var n,i=[],o=!1;if("undefined"==typeof MutationObserver||Kn){var r=zn?window:"undefined"!=typeof t?t:{};n=r.setImmediate||setTimeout}else{var s=1,a=new MutationObserver(e),c=document.createTextNode(s);a.observe(c,{characterData:!0}),n=function(){s=(s+1)%2,c.data=s}}return function(t,r){var s=r?function(){t.call(r)}:t;i.push(s),o||(o=!0,n(e,0))}}(),ri=void 0;"undefined"!=typeof Set&&Set.toString().match(/native code/)?ri=Set:(ri=function(){this.set=Object.create(null)},ri.prototype.has=function(e){return void 0!==this.set[e]},ri.prototype.add=function(e){this.set[e]=1},ri.prototype.clear=function(){this.set=Object.create(null)});var si=$.prototype;si.put=function(e,t){var n,i=this.get(e,!0);return i||(this.size===this.limit&&(n=this.shift()),i={key:e},this._keymap[e]=i,this.tail?(this.tail.newer=i,i.older=this.tail):this.head=i,this.tail=i,this.size++),i.value=t,n},si.shift=function(){var e=this.head;return e&&(this.head=this.head.newer,this.head.older=void 0,e.newer=e.older=void 0,this._keymap[e.key]=void 0,this.size--),e},si.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return n===this.tail?t?n:n.value:(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n,t?n:n.value)};var ai,ci,li,hi,ui,fi,pi,di,vi,_i,yi,bi,mi=new $(1e3),gi=/[^\s'"]+|'[^']*'|"[^"]*"/g,Ei=/^in$|^-?\d+/,wi=Object.freeze({parseDirective:A}),xi=/[-.*+?^${}()|[\]\/\\]/g,ki=void 0,Ci=void 0,$i=void 0,Ni=/[^|]\|[^|]/,Oi=Object.freeze({compileRegex:j,parseText:D,tokensToExp:S}),Ai=["{{","}}"],Ti=["{{{","}}}"],ji=Object.defineProperties({debug:!1,silent:!1,async:!0,warnExpressionErrors:!0,devtools:"production"!==n.env.NODE_ENV,_delimitersChanged:!0,_assetTypes:["component","directive","elementDirective","filter","transition","partial"],_propBindingModes:{ONE_WAY:0,TWO_WAY:1,ONE_TIME:2},_maxUpdateCount:100},{delimiters:{get:function(){return Ai},set:function(e){Ai=e,j()},configurable:!0,enumerable:!0},unsafeDelimiters:{get:function(){return Ti},set:function(e){Ti=e,j()},configurable:!0,enumerable:!0}}),Di=void 0,Si=void 0;"production"!==n.env.NODE_ENV&&!function(){var e="undefined"!=typeof console;Di=function(t,n){e&&!ji.silent&&console.error("[Vue warn]: "+t+(n?Si(n):""))},Si=function(e){var t=e._isVue?e.$options.name:e.name;return t?" (found in component: <"+d(t)+">)":""}}();var Vi=Object.freeze({appendWithTransition:R,beforeWithTransition:F,removeWithTransition:M,applyTransition:I}),Pi=/^v-ref:/,Ri=/^(div|p|span|img|a|b|i|br|ul|ol|li|h1|h2|h3|h4|h5|h6|code|pre|table|th|td|tr|form|label|input|select|option|nav|article|section|header|footer)$/i,Fi=/^(slot|partial|component)$/i,Mi=void 0;"production"!==n.env.NODE_ENV&&(Mi=function(e,t){return t.indexOf("-")>-1?e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:/HTMLUnknownElement/.test(e.toString())&&!/^(data|time|rtc|rb|details|dialog|summary)$/.test(t)});var Ii=ji.optionMergeStrategies=Object.create(null);Ii.data=function(e,t,i){return i?e||t?function(){var n="function"==typeof t?t.call(i):t,o="function"==typeof e?e.call(i):void 0;return n?de(n,o):o}:void 0:t?"function"!=typeof t?("production"!==n.env.NODE_ENV&&Di('The "data" option should be a function that returns a per-instance value in component definitions.',i),e):e?function(){return de(t.call(this),e.call(this))}:t:e},Ii.el=function(e,t,i){if(!i&&t&&"function"!=typeof t)return void("production"!==n.env.NODE_ENV&&Di('The "el" option should be a function that returns a per-instance value in component definitions.',i));var o=t||e;return i&&"function"==typeof o?o.call(i):o},Ii.init=Ii.created=Ii.ready=Ii.attached=Ii.detached=Ii.beforeCompile=Ii.compiled=Ii.beforeDestroy=Ii.destroyed=Ii.activate=function(e,t){return t?e?e.concat(t):Ln(t)?t:[t]:e},ji._assetTypes.forEach(function(e){Ii[e+"s"]=ve}),Ii.watch=Ii.events=function(e,t){if(!t)return e;if(!e)return t;var n={};b(n,e);for(var i in t){var o=n[i],r=t[i];o&&!Ln(o)&&(o=[o]),n[i]=o?o.concat(r):[r]}return n},Ii.props=Ii.methods=Ii.computed=function(e,t){if(!t)return e;if(!e)return t;var n=Object.create(null);return b(n,e),b(n,t),n};var Li=function(e,t){return void 0===t?e:t},Hi=0;Ee.target=null,Ee.prototype.addSub=function(e){this.subs.push(e)},Ee.prototype.removeSub=function(e){this.subs.$remove(e)},Ee.prototype.depend=function(){Ee.target.addDep(this)},Ee.prototype.notify=function(){for(var e=y(this.subs),t=0,n=e.length;t<n;t++)e[t].update()};var zi=Array.prototype,Bi=Object.create(zi);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=zi[e];E(Bi,e,function(){for(var n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];var o,r=t.apply(this,i),s=this.__ob__;switch(e){case"push":o=i;break;case"unshift":o=i;break;case"splice":o=i.slice(2)}return o&&s.observeArray(o),s.dep.notify(),r})}),E(zi,"$set",function(e,t){return e>=this.length&&(this.length=Number(e)+1),this.splice(e,1,t)[0]}),E(zi,"$remove",function(e){if(this.length){var t=x(this,e);return t>-1?this.splice(t,1):void 0}});var Ui=Object.getOwnPropertyNames(Bi),Wi=!0;xe.prototype.walk=function(e){for(var t=Object.keys(e),n=0,i=t.length;n<i;n++)this.convert(t[n],e[t[n]])},xe.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)$e(e[t])},xe.prototype.convert=function(e,t){Ne(this.value,e,t)},xe.prototype.addVm=function(e){(this.vms||(this.vms=[])).push(e)},xe.prototype.removeVm=function(e){this.vms.$remove(e)};var qi=Object.freeze({defineReactive:Ne,set:i,del:o,hasOwn:r,isLiteral:s,isReserved:a,_toString:c,toNumber:l,toBoolean:h,stripQuotes:u,camelize:f,hyphenate:d,classify:v,bind:_,toArray:y,extend:b,isObject:m,isPlainObject:g,def:E,debounce:w,indexOf:x,cancellable:k,looseEqual:C,isArray:Ln,hasProto:Hn,inBrowser:zn,devtools:Bn,isIE:Wn,isIE9:qn,isAndroid:Jn,isIos:Qn,iosVersionMatch:Yn,iosVersion:Gn,hasMutationObserverBug:Kn,get transitionProp(){return Zn},get transitionEndEvent(){return Xn},get animationProp(){return ei},get animationEndEvent(){return ti},nextTick:oi,get _Set(){return ri},query:L,inDoc:H,getAttr:z,getBindAttr:B,hasBindAttr:U,before:W,after:q,remove:J,prepend:Q,replace:Y,on:G,off:K,setClass:X,addClass:ee,removeClass:te,extractContent:ne,trimNode:ie,isTemplate:re,createAnchor:se,findRef:ae,mapNodeRange:ce,removeNodeRange:le,isFragment:he,getOuterHTML:ue,mergeOptions:me,resolveAsset:ge,checkComponentAttr:fe,commonTagRE:Ri,reservedTagRE:Fi,get warn(){return Di}}),Ji=0,Qi=new $(1e3),Yi=0,Gi=1,Ki=2,Zi=3,Xi=0,eo=1,to=2,no=3,io=4,oo=5,ro=6,so=7,ao=8,co=[];co[Xi]={ws:[Xi],ident:[no,Yi],"[":[io],eof:[so]},co[eo]={ws:[eo],".":[to],"[":[io],eof:[so]},co[to]={ws:[to],ident:[no,Yi]},co[no]={ident:[no,Yi],0:[no,Yi],number:[no,Yi],ws:[eo,Gi],".":[to,Gi],"[":[io,Gi],eof:[so,Gi]},co[io]={"'":[oo,Yi],'"':[ro,Yi],"[":[io,Ki],"]":[eo,Zi],eof:ao,"else":[io,Yi]},co[oo]={"'":[io,Yi],eof:ao,"else":[oo,Yi]},co[ro]={'"':[io,Yi],eof:ao,"else":[ro,Yi]};var lo;"production"!==n.env.NODE_ENV&&(lo=function(e,t){Di('You are setting a non-existent path "'+e.raw+'" on a vm instance. Consider pre-initializing the property with the "data" option for more reliable reactivity and better performance.',t)});var ho=Object.freeze({parsePath:De,getPath:Se,setPath:Ve}),uo=new $(1e3),fo="Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat",po=new RegExp("^("+fo.replace(/,/g,"\\b|")+"\\b)"),vo="break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,return,super,switch,throw,try,var,while,with,yield,enum,await,implements,package,protected,static,interface,private,public",_o=new RegExp("^("+vo.replace(/,/g,"\\b|")+"\\b)"),yo=/\s/g,bo=/\n/g,mo=/[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`)|new |typeof |void /g,go=/"(\d+)"/g,Eo=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,wo=/[^\w$\.](?:[A-Za-z_$][\w$]*)/g,xo=/^(?:true|false|null|undefined|Infinity|NaN)$/,ko=[],Co=Object.freeze({parseExpression:ze,isSimplePath:Be}),$o=[],No=[],Oo={},Ao={},To=!1,jo=0;Qe.prototype.get=function(){this.beforeGet();var e,t=this.scope||this.vm;try{e=this.getter.call(t,t)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating expression "'+this.expression+'": '+i.toString(),this.vm)}return this.deep&&Ye(e),this.preProcess&&(e=this.preProcess(e)),this.filters&&(e=t._applyFilters(e,null,this.filters,!1)),this.postProcess&&(e=this.postProcess(e)),this.afterGet(),e},Qe.prototype.set=function(e){var t=this.scope||this.vm;this.filters&&(e=t._applyFilters(e,this.value,this.filters,!0));try{this.setter.call(t,t,e)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating setter "'+this.expression+'": '+i.toString(),this.vm)}var o=t.$forContext;if(o&&o.alias===this.expression){if(o.filters)return void("production"!==n.env.NODE_ENV&&Di("It seems you are using two-way binding on a v-for alias ("+this.expression+"), and the v-for has filters. This will not work properly. Either remove the filters or use an array of objects and bind to object properties instead.",this.vm));o._withLock(function(){t.$key?o.rawValue[t.$key]=e:o.rawValue.$set(t.$index,e)})}},Qe.prototype.beforeGet=function(){Ee.target=this},Qe.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},Qe.prototype.afterGet=function(){Ee.target=null;for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Qe.prototype.update=function(e){this.lazy?this.dirty=!0:this.sync||!ji.async?this.run():(this.shallow=this.queued?!!e&&this.shallow:!!e,this.queued=!0,"production"!==n.env.NODE_ENV&&ji.debug&&(this.prevError=new Error("[vue] async stack trace")),Je(this))},Qe.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||(m(e)||this.deep)&&!this.shallow){var t=this.value;this.value=e;var i=this.prevError;if("production"!==n.env.NODE_ENV&&ji.debug&&i){this.prevError=null;try{this.cb.call(this.vm,e,t)}catch(o){throw oi(function(){throw i},0),o}}else this.cb.call(this.vm,e,t)}this.queued=this.shallow=!1}},Qe.prototype.evaluate=function(){var e=Ee.target;this.value=this.get(),this.dirty=!1,Ee.target=e},Qe.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},Qe.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||this.vm._vForRemoving||this.vm._watchers.$remove(this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1,this.vm=this.cb=this.value=null}};var Do=new ri,So={bind:function(){this.attr=3===this.el.nodeType?"data":"textContent"},update:function(e){this.el[this.attr]=c(e)}},Vo=new $(1e3),Po=new $(1e3),Ro={efault:[0,"",""],legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]};Ro.td=Ro.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Ro.option=Ro.optgroup=[1,'<select multiple="multiple">',"</select>"],Ro.thead=Ro.tbody=Ro.colgroup=Ro.caption=Ro.tfoot=[1,"<table>","</table>"],Ro.g=Ro.defs=Ro.symbol=Ro.use=Ro.image=Ro.text=Ro.circle=Ro.ellipse=Ro.line=Ro.path=Ro.polygon=Ro.polyline=Ro.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events"version="1.1">',"</svg>"];var Fo=/<([\w:-]+)/,Mo=/&#?\w+?;/,Io=/<!--/,Lo=function(){if(zn){var e=document.createElement("div");return e.innerHTML="<template>1</template>",!e.cloneNode(!0).firstChild.innerHTML}return!1}(),Ho=function(){if(zn){var e=document.createElement("textarea");return e.placeholder="t","t"===e.cloneNode(!0).value}return!1}(),zo=Object.freeze({cloneNode:Xe,parseTemplate:et}),Bo={bind:function(){8===this.el.nodeType&&(this.nodes=[],this.anchor=se("v-html"),Y(this.el,this.anchor))},update:function(e){e=c(e),this.nodes?this.swap(e):this.el.innerHTML=e},swap:function(e){for(var t=this.nodes.length;t--;)J(this.nodes[t]);var n=et(e,!0,!0);this.nodes=y(n.childNodes),W(n,this.anchor)}};tt.prototype.callHook=function(e){var t,n;for(t=0,n=this.childFrags.length;t<n;t++)this.childFrags[t].callHook(e);for(t=0,n=this.children.length;t<n;t++)e(this.children[t])},tt.prototype.beforeRemove=function(){var e,t;for(e=0,t=this.childFrags.length;e<t;e++)this.childFrags[e].beforeRemove(!1);for(e=0,t=this.children.length;e<t;e++)this.children[e].$destroy(!1,!0);var n=this.unlink.dirs;for(e=0,t=n.length;e<t;e++)n[e]._watcher&&n[e]._watcher.teardown()},tt.prototype.destroy=function(){this.parentFrag&&this.parentFrag.childFrags.$remove(this),this.node.__v_frag=null,this.unlink()};var Uo=new $(5e3);ct.prototype.create=function(e,t,n){var i=Xe(this.template);return new tt(this.linker,this.vm,i,e,t,n)};var Wo=700,qo=800,Jo=850,Qo=1100,Yo=1500,Go=1500,Ko=1750,Zo=2100,Xo=2200,er=2300,tr=0,nr={priority:Xo,terminal:!0,params:["track-by","stagger","enter-stagger","leave-stagger"],bind:function(){var e=this.expression.match(/(.*) (?:in|of) (.*)/);if(e){var t=e[1].match(/\((.*),(.*)\)/);t?(this.iterator=t[1].trim(),this.alias=t[2].trim()):this.alias=e[1].trim(),this.expression=e[2]}if(!this.alias)return void("production"!==n.env.NODE_ENV&&Di('Invalid v-for expression "'+this.descriptor.raw+'": alias is required.',this.vm));this.id="__v-for__"+ ++tr;var i=this.el.tagName;this.isOption=("OPTION"===i||"OPTGROUP"===i)&&"SELECT"===this.el.parentNode.tagName,this.start=se("v-for-start"),this.end=se("v-for-end"),Y(this.el,this.end),W(this.start,this.end),this.cache=Object.create(null),this.factory=new ct(this.vm,this.el)},update:function(e){this.diff(e),this.updateRef(),this.updateModel()},diff:function(e){var t,n,i,o,s,a,c=e[0],l=this.fromObject=m(c)&&r(c,"$key")&&r(c,"$value"),h=this.params.trackBy,u=this.frags,f=this.frags=new Array(e.length),p=this.alias,d=this.iterator,v=this.start,_=this.end,y=H(v),b=!u;for(t=0,n=e.length;t<n;t++)c=e[t],o=l?c.$key:null,s=l?c.$value:c,a=!m(s),i=!b&&this.getCachedFrag(s,t,o),i?(i.reused=!0,i.scope.$index=t,o&&(i.scope.$key=o),d&&(i.scope[d]=null!==o?o:t),(h||l||a)&&we(function(){i.scope[p]=s})):(i=this.create(s,p,t,o),i.fresh=!b),f[t]=i,b&&i.before(_);if(!b){var g=0,E=u.length-f.length;for(this.vm._vForRemoving=!0,t=0,n=u.length;t<n;t++)i=u[t],i.reused||(this.deleteCachedFrag(i),this.remove(i,g++,E,y));this.vm._vForRemoving=!1,g&&(this.vm._watchers=this.vm._watchers.filter(function(e){return e.active}));var w,x,k,C=0;for(t=0,n=f.length;t<n;t++)i=f[t],w=f[t-1],x=w?w.staggerCb?w.staggerAnchor:w.end||w.node:v,i.reused&&!i.staggerCb?(k=lt(i,v,this.id),k===w||k&&lt(k,v,this.id)===w||this.move(i,x)):this.insert(i,C++,x,y),i.reused=i.fresh=!1}},create:function(e,t,n,i){var o=this._host,r=this._scope||this.vm,s=Object.create(r);s.$refs=Object.create(r.$refs),s.$els=Object.create(r.$els),s.$parent=r,s.$forContext=this,we(function(){Ne(s,t,e)}),Ne(s,"$index",n),i?Ne(s,"$key",i):s.$key&&E(s,"$key",null),this.iterator&&Ne(s,this.iterator,null!==i?i:n);var a=this.factory.create(o,s,this._frag);return a.forId=this.id,this.cacheFrag(e,a,n,i),a},updateRef:function(){var e=this.descriptor.ref;if(e){var t,n=(this._scope||this.vm).$refs;this.fromObject?(t={},this.frags.forEach(function(e){t[e.scope.$key]=ht(e)})):t=this.frags.map(ht),n[e]=t}},updateModel:function(){if(this.isOption){var e=this.start.parentNode,t=e&&e.__v_model;t&&t.forceUpdate()}},insert:function(e,t,n,i){e.staggerCb&&(e.staggerCb.cancel(),e.staggerCb=null);var o=this.getStagger(e,t,null,"enter");if(i&&o){var r=e.staggerAnchor;r||(r=e.staggerAnchor=se("stagger-anchor"),r.__v_frag=e),q(r,n);var s=e.staggerCb=k(function(){e.staggerCb=null,e.before(r),J(r)});setTimeout(s,o)}else{var a=n.nextSibling;a||(q(this.end,n),a=this.end),e.before(a)}},remove:function(e,t,n,i){if(e.staggerCb)return e.staggerCb.cancel(),void(e.staggerCb=null);var o=this.getStagger(e,t,n,"leave");if(i&&o){var r=e.staggerCb=k(function(){e.staggerCb=null,e.remove()});setTimeout(r,o)}else e.remove()},move:function(e,t){t.nextSibling||this.end.parentNode.appendChild(this.end),e.before(t.nextSibling,!1)},cacheFrag:function(e,t,i,o){var s,a=this.params.trackBy,c=this.cache,l=!m(e);o||a||l?(s=ft(i,o,e,a),c[s]?"$index"!==a&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):c[s]=t):(s=this.id,r(e,s)?null===e[s]?e[s]=t:"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):Object.isExtensible(e)?E(e,s,t):"production"!==n.env.NODE_ENV&&Di("Frozen v-for objects cannot be automatically tracked, make sure to provide a track-by key.")),t.raw=e;
},getCachedFrag:function(e,t,i){var o,r=this.params.trackBy,s=!m(e);if(i||r||s){var a=ft(t,i,e,r);o=this.cache[a]}else o=e[this.id];return o&&(o.reused||o.fresh)&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e),o},deleteCachedFrag:function(e){var t=e.raw,n=this.params.trackBy,i=e.scope,o=i.$index,s=r(i,"$key")&&i.$key,a=!m(t);if(n||s||a){var c=ft(o,s,t,n);this.cache[c]=null}else t[this.id]=null,e.raw=null},getStagger:function(e,t,n,i){i+="Stagger";var o=e.node.__v_trans,r=o&&o.hooks,s=r&&(r[i]||r.stagger);return s?s.call(e,t,n):t*parseInt(this.params[i]||this.params.stagger,10)},_preProcess:function(e){return this.rawValue=e,e},_postProcess:function(e){if(Ln(e))return e;if(g(e)){for(var t,n=Object.keys(e),i=n.length,o=new Array(i);i--;)t=n[i],o[i]={$key:t,$value:e[t]};return o}return"number"!=typeof e||isNaN(e)||(e=ut(e)),e||[]},unbind:function(){if(this.descriptor.ref&&((this._scope||this.vm).$refs[this.descriptor.ref]=null),this.frags)for(var e,t=this.frags.length;t--;)e=this.frags[t],this.deleteCachedFrag(e),e.destroy()}};"production"!==n.env.NODE_ENV&&(nr.warnDuplicate=function(e){Di('Duplicate value found in v-for="'+this.descriptor.raw+'": '+JSON.stringify(e)+'. Use track-by="$index" if you are expecting duplicate values.',this.vm)});var ir={priority:Zo,terminal:!0,bind:function(){var e=this.el;if(e.__vue__)"production"!==n.env.NODE_ENV&&Di('v-if="'+this.expression+'" cannot be used on an instance root element.',this.vm),this.invalid=!0;else{var t=e.nextElementSibling;t&&null!==z(t,"v-else")&&(J(t),this.elseEl=t),this.anchor=se("v-if"),Y(e,this.anchor)}},update:function(e){this.invalid||(e?this.frag||this.insert():this.remove())},insert:function(){this.elseFrag&&(this.elseFrag.remove(),this.elseFrag=null),this.factory||(this.factory=new ct(this.vm,this.el)),this.frag=this.factory.create(this._host,this._scope,this._frag),this.frag.before(this.anchor)},remove:function(){this.frag&&(this.frag.remove(),this.frag=null),this.elseEl&&!this.elseFrag&&(this.elseFactory||(this.elseFactory=new ct(this.elseEl._context||this.vm,this.elseEl)),this.elseFrag=this.elseFactory.create(this._host,this._scope,this._frag),this.elseFrag.before(this.anchor))},unbind:function(){this.frag&&this.frag.destroy(),this.elseFrag&&this.elseFrag.destroy()}},or={bind:function(){var e=this.el.nextElementSibling;e&&null!==z(e,"v-else")&&(this.elseEl=e)},update:function(e){this.apply(this.el,e),this.elseEl&&this.apply(this.elseEl,!e)},apply:function(e,t){function n(){e.style.display=t?"":"none"}H(e)?I(e,t?1:-1,n,this.vm):n()}},rr={bind:function(){var e=this,t=this.el,n="range"===t.type,i=this.params.lazy,o=this.params.number,r=this.params.debounce,s=!1;if(Jn||n||(this.on("compositionstart",function(){s=!0}),this.on("compositionend",function(){s=!1,i||e.listener()})),this.focused=!1,n||i||(this.on("focus",function(){e.focused=!0}),this.on("blur",function(){e.focused=!1,e._frag&&!e._frag.inserted||e.rawListener()})),this.listener=this.rawListener=function(){if(!s&&e._bound){var i=o||n?l(t.value):t.value;e.set(i),oi(function(){e._bound&&!e.focused&&e.update(e._watcher.value)})}},r&&(this.listener=w(this.listener,r)),this.hasjQuery="function"==typeof jQuery,this.hasjQuery){var a=jQuery.fn.on?"on":"bind";jQuery(t)[a]("change",this.rawListener),i||jQuery(t)[a]("input",this.listener)}else this.on("change",this.rawListener),i||this.on("input",this.listener);!i&&qn&&(this.on("cut",function(){oi(e.listener)}),this.on("keyup",function(t){46!==t.keyCode&&8!==t.keyCode||e.listener()})),(t.hasAttribute("value")||"TEXTAREA"===t.tagName&&t.value.trim())&&(this.afterBind=this.listener)},update:function(e){e=c(e),e!==this.el.value&&(this.el.value=e)},unbind:function(){var e=this.el;if(this.hasjQuery){var t=jQuery.fn.off?"off":"unbind";jQuery(e)[t]("change",this.listener),jQuery(e)[t]("input",this.listener)}}},sr={bind:function(){var e=this,t=this.el;this.getValue=function(){if(t.hasOwnProperty("_value"))return t._value;var n=t.value;return e.params.number&&(n=l(n)),n},this.listener=function(){e.set(e.getValue())},this.on("change",this.listener),t.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){this.el.checked=C(e,this.getValue())}},ar={bind:function(){var e=this,t=this,n=this.el;this.forceUpdate=function(){t._watcher&&t.update(t._watcher.get())};var i=this.multiple=n.hasAttribute("multiple");this.listener=function(){var e=pt(n,i);e=t.params.number?Ln(e)?e.map(l):l(e):e,t.set(e)},this.on("change",this.listener);var o=pt(n,i,!0);(i&&o.length||!i&&null!==o)&&(this.afterBind=this.listener),this.vm.$on("hook:attached",function(){oi(e.forceUpdate)}),H(n)||oi(this.forceUpdate)},update:function(e){var t=this.el;t.selectedIndex=-1;for(var n,i,o=this.multiple&&Ln(e),r=t.options,s=r.length;s--;)n=r[s],i=n.hasOwnProperty("_value")?n._value:n.value,n.selected=o?dt(e,i)>-1:C(e,i)},unbind:function(){this.vm.$off("hook:attached",this.forceUpdate)}},cr={bind:function(){function e(){var e=n.checked;return e&&n.hasOwnProperty("_trueValue")?n._trueValue:!e&&n.hasOwnProperty("_falseValue")?n._falseValue:e}var t=this,n=this.el;this.getValue=function(){return n.hasOwnProperty("_value")?n._value:t.params.number?l(n.value):n.value},this.listener=function(){var i=t._watcher.value;if(Ln(i)){var o=t.getValue();n.checked?x(i,o)<0&&i.push(o):i.$remove(o)}else t.set(e())},this.on("change",this.listener),n.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){var t=this.el;Ln(e)?t.checked=x(e,this.getValue())>-1:t.hasOwnProperty("_trueValue")?t.checked=C(e,t._trueValue):t.checked=!!e}},lr={text:rr,radio:sr,select:ar,checkbox:cr},hr={priority:qo,twoWay:!0,handlers:lr,params:["lazy","number","debounce"],bind:function(){this.checkFilters(),this.hasRead&&!this.hasWrite&&"production"!==n.env.NODE_ENV&&Di('It seems you are using a read-only filter with v-model="'+this.descriptor.raw+'". You might want to use a two-way filter to ensure correct behavior.',this.vm);var e,t=this.el,i=t.tagName;if("INPUT"===i)e=lr[t.type]||lr.text;else if("SELECT"===i)e=lr.select;else{if("TEXTAREA"!==i)return void("production"!==n.env.NODE_ENV&&Di("v-model does not support element type: "+i,this.vm));e=lr.text}t.__v_model=this,e.bind.call(this),this.update=e.update,this._unbind=e.unbind},checkFilters:function(){var e=this.filters;if(e)for(var t=e.length;t--;){var n=ge(this.vm.$options,"filters",e[t].name);("function"==typeof n||n.read)&&(this.hasRead=!0),n.write&&(this.hasWrite=!0)}},unbind:function(){this.el.__v_model=null,this._unbind&&this._unbind()}},ur={esc:27,tab:9,enter:13,space:32,"delete":[8,46],up:38,left:37,right:39,down:40},fr={priority:Wo,acceptStatement:!0,keyCodes:ur,bind:function(){if("IFRAME"===this.el.tagName&&"load"!==this.arg){var e=this;this.iframeBind=function(){G(e.el.contentWindow,e.arg,e.handler,e.modifiers.capture)},this.on("load",this.iframeBind)}},update:function(e){if(this.descriptor.raw||(e=function(){}),"function"!=typeof e)return void("production"!==n.env.NODE_ENV&&Di("v-on:"+this.arg+'="'+this.expression+'" expects a function value, got '+e,this.vm));this.modifiers.stop&&(e=_t(e)),this.modifiers.prevent&&(e=yt(e)),this.modifiers.self&&(e=bt(e));var t=Object.keys(this.modifiers).filter(function(e){return"stop"!==e&&"prevent"!==e&&"self"!==e&&"capture"!==e});t.length&&(e=vt(e,t)),this.reset(),this.handler=e,this.iframeBind?this.iframeBind():G(this.el,this.arg,this.handler,this.modifiers.capture)},reset:function(){var e=this.iframeBind?this.el.contentWindow:this.el;this.handler&&K(e,this.arg,this.handler)},unbind:function(){this.reset()}},pr=["-webkit-","-moz-","-ms-"],dr=["Webkit","Moz","ms"],vr=/!important;?$/,_r=Object.create(null),yr=null,br={deep:!0,update:function(e){"string"==typeof e?this.el.style.cssText=e:Ln(e)?this.handleObject(e.reduce(b,{})):this.handleObject(e||{})},handleObject:function(e){var t,n,i=this.cache||(this.cache={});for(t in i)t in e||(this.handleSingle(t,null),delete i[t]);for(t in e)n=e[t],n!==i[t]&&(i[t]=n,this.handleSingle(t,n))},handleSingle:function(e,t){if(e=mt(e))if(null!=t&&(t+=""),t){var i=vr.test(t)?"important":"";i?("production"!==n.env.NODE_ENV&&Di("It's probably a bad idea to use !important with inline rules. This feature will be deprecated in a future version of Vue."),t=t.replace(vr,"").trim(),this.el.style.setProperty(e.kebab,t,i)):this.el.style[e.camel]=t}else this.el.style[e.camel]=""}},mr="http://www.w3.org/1999/xlink",gr=/^xlink:/,Er=/^v-|^:|^@|^(?:is|transition|transition-mode|debounce|track-by|stagger|enter-stagger|leave-stagger)$/,wr=/^(?:value|checked|selected|muted)$/,xr=/^(?:draggable|contenteditable|spellcheck)$/,kr={value:"_value","true-value":"_trueValue","false-value":"_falseValue"},Cr={priority:Jo,bind:function(){var e=this.arg,t=this.el.tagName;e||(this.deep=!0);var i=this.descriptor,o=i.interp;if(o&&(i.hasOneTime&&(this.expression=S(o,this._scope||this.vm)),(Er.test(e)||"name"===e&&("PARTIAL"===t||"SLOT"===t))&&("production"!==n.env.NODE_ENV&&Di(e+'="'+i.raw+'": attribute interpolation is not allowed in Vue.js directives and special attributes.',this.vm),this.el.removeAttribute(e),this.invalid=!0),"production"!==n.env.NODE_ENV)){var r=e+'="'+i.raw+'": ';"src"===e&&Di(r+'interpolation in "src" attribute will cause a 404 request. Use v-bind:src instead.',this.vm),"style"===e&&Di(r+'interpolation in "style" attribute will cause the attribute to be discarded in Internet Explorer. Use v-bind:style instead.',this.vm)}},update:function(e){if(!this.invalid){var t=this.arg;this.arg?this.handleSingle(t,e):this.handleObject(e||{})}},handleObject:br.handleObject,handleSingle:function(e,t){var n=this.el,i=this.descriptor.interp;if(this.modifiers.camel&&(e=f(e)),!i&&wr.test(e)&&e in n){var o="value"===e&&null==t?"":t;n[e]!==o&&(n[e]=o)}var r=kr[e];if(!i&&r){n[r]=t;var s=n.__v_model;s&&s.listener()}return"value"===e&&"TEXTAREA"===n.tagName?void n.removeAttribute(e):void(xr.test(e)?n.setAttribute(e,t?"true":"false"):null!=t&&t!==!1?"class"===e?(n.__v_trans&&(t+=" "+n.__v_trans.id+"-transition"),X(n,t)):gr.test(e)?n.setAttributeNS(mr,e,t===!0?"":t):n.setAttribute(e,t===!0?"":t):n.removeAttribute(e))}},$r={priority:Yo,bind:function(){if(this.arg){var e=this.id=f(this.arg),t=(this._scope||this.vm).$els;r(t,e)?t[e]=this.el:Ne(t,e,this.el)}},unbind:function(){var e=(this._scope||this.vm).$els;e[this.id]===this.el&&(e[this.id]=null)}},Nr={bind:function(){"production"!==n.env.NODE_ENV&&Di("v-ref:"+this.arg+" must be used on a child component. Found on <"+this.el.tagName.toLowerCase()+">.",this.vm)}},Or={bind:function(){var e=this.el;this.vm.$once("pre-hook:compiled",function(){e.removeAttribute("v-cloak")})}},Ar={text:So,html:Bo,"for":nr,"if":ir,show:or,model:hr,on:fr,bind:Cr,el:$r,ref:Nr,cloak:Or},Tr={deep:!0,update:function(e){e?"string"==typeof e?this.setClass(e.trim().split(/\s+/)):this.setClass(Et(e)):this.cleanup()},setClass:function(e){this.cleanup(e);for(var t=0,n=e.length;t<n;t++){var i=e[t];i&&wt(this.el,i,ee)}this.prevKeys=e},cleanup:function(e){var t=this.prevKeys;if(t)for(var n=t.length;n--;){var i=t[n];(!e||e.indexOf(i)<0)&&wt(this.el,i,te)}}},jr={priority:Go,params:["keep-alive","transition-mode","inline-template"],bind:function(){this.el.__vue__?"production"!==n.env.NODE_ENV&&Di('cannot mount component "'+this.expression+'" on already mounted element: '+this.el):(this.keepAlive=this.params.keepAlive,this.keepAlive&&(this.cache={}),this.params.inlineTemplate&&(this.inlineTemplate=ne(this.el,!0)),this.pendingComponentCb=this.Component=null,this.pendingRemovals=0,this.pendingRemovalCb=null,this.anchor=se("v-component"),Y(this.el,this.anchor),this.el.removeAttribute("is"),this.el.removeAttribute(":is"),this.descriptor.ref&&this.el.removeAttribute("v-ref:"+d(this.descriptor.ref)),this.literal&&this.setComponent(this.expression))},update:function(e){this.literal||this.setComponent(e)},setComponent:function(e,t){if(this.invalidatePending(),e){var n=this;this.resolveComponent(e,function(){n.mountComponent(t)})}else this.unbuild(!0),this.remove(this.childVM,t),this.childVM=null},resolveComponent:function(e,t){var n=this;this.pendingComponentCb=k(function(i){n.ComponentName=i.options.name||("string"==typeof e?e:null),n.Component=i,t()}),this.vm._resolveComponent(e,this.pendingComponentCb)},mountComponent:function(e){this.unbuild(!0);var t=this,n=this.Component.options.activate,i=this.getCached(),o=this.build();n&&!i?(this.waitingFor=o,xt(n,o,function(){t.waitingFor===o&&(t.waitingFor=null,t.transition(o,e))})):(i&&o._updateRef(),this.transition(o,e))},invalidatePending:function(){this.pendingComponentCb&&(this.pendingComponentCb.cancel(),this.pendingComponentCb=null)},build:function(e){var t=this.getCached();if(t)return t;if(this.Component){var i={name:this.ComponentName,el:Xe(this.el),template:this.inlineTemplate,parent:this._host||this.vm,_linkerCachable:!this.inlineTemplate,_ref:this.descriptor.ref,_asComponent:!0,_isRouterView:this._isRouterView,_context:this.vm,_scope:this._scope,_frag:this._frag};e&&b(i,e);var o=new this.Component(i);return this.keepAlive&&(this.cache[this.Component.cid]=o),"production"!==n.env.NODE_ENV&&this.el.hasAttribute("transition")&&o._isFragment&&Di("Transitions will not work on a fragment instance. Template: "+o.$options.template,o),o}},getCached:function(){return this.keepAlive&&this.cache[this.Component.cid]},unbuild:function(e){this.waitingFor&&(this.keepAlive||this.waitingFor.$destroy(),this.waitingFor=null);var t=this.childVM;return!t||this.keepAlive?void(t&&(t._inactive=!0,t._updateRef(!0))):void t.$destroy(!1,e)},remove:function(e,t){var n=this.keepAlive;if(e){this.pendingRemovals++,this.pendingRemovalCb=t;var i=this;e.$remove(function(){i.pendingRemovals--,n||e._cleanup(),!i.pendingRemovals&&i.pendingRemovalCb&&(i.pendingRemovalCb(),i.pendingRemovalCb=null)})}else t&&t()},transition:function(e,t){var n=this,i=this.childVM;switch(i&&(i._inactive=!0),e._inactive=!1,this.childVM=e,n.params.transitionMode){case"in-out":e.$before(n.anchor,function(){n.remove(i,t)});break;case"out-in":n.remove(i,function(){e.$before(n.anchor,t)});break;default:n.remove(i),e.$before(n.anchor,t)}},unbind:function(){if(this.invalidatePending(),this.unbuild(),this.cache){for(var e in this.cache)this.cache[e].$destroy();this.cache=null}}},Dr=ji._propBindingModes,Sr={},Vr=/^[$_a-zA-Z]+[\w$]*$/,Pr=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\[[^\[\]]+\])*$/,Rr=ji._propBindingModes,Fr={bind:function(){var e=this.vm,t=e._context,n=this.descriptor.prop,i=n.path,o=n.parentPath,r=n.mode===Rr.TWO_WAY,s=this.parentWatcher=new Qe(t,o,function(t){Ot(e,n,t)},{twoWay:r,filters:n.filters,scope:this._scope});if(Nt(e,n,s.value),r){var a=this;e.$once("pre-hook:created",function(){a.childWatcher=new Qe(e,i,function(e){s.set(e)},{sync:!0})})}},unbind:function(){this.parentWatcher.teardown(),this.childWatcher&&this.childWatcher.teardown()}},Mr=[],Ir=!1,Lr="transition",Hr="animation",zr=Zn+"Duration",Br=ei+"Duration",Ur=zn&&window.requestAnimationFrame,Wr=Ur?function(e){Ur(function(){Ur(e)})}:function(e){setTimeout(e,50)},qr=Ft.prototype;qr.enter=function(e,t){this.cancelPending(),this.callHook("beforeEnter"),this.cb=t,ee(this.el,this.enterClass),e(),this.entered=!1,this.callHookWithCb("enter"),this.entered||(this.cancel=this.hooks&&this.hooks.enterCancelled,Pt(this.enterNextTick))},qr.enterNextTick=function(){var e=this;this.justEntered=!0,Wr(function(){e.justEntered=!1});var t=this.enterDone,n=this.getCssTransitionType(this.enterClass);this.pendingJsCb?n===Lr&&te(this.el,this.enterClass):n===Lr?(te(this.el,this.enterClass),this.setupCssCb(Xn,t)):n===Hr?this.setupCssCb(ti,t):t()},qr.enterDone=function(){this.entered=!0,this.cancel=this.pendingJsCb=null,te(this.el,this.enterClass),this.callHook("afterEnter"),this.cb&&this.cb()},qr.leave=function(e,t){this.cancelPending(),this.callHook("beforeLeave"),this.op=e,this.cb=t,ee(this.el,this.leaveClass),this.left=!1,this.callHookWithCb("leave"),this.left||(this.cancel=this.hooks&&this.hooks.leaveCancelled,this.op&&!this.pendingJsCb&&(this.justEntered?this.leaveDone():Pt(this.leaveNextTick)))},qr.leaveNextTick=function(){var e=this.getCssTransitionType(this.leaveClass);if(e){var t=e===Lr?Xn:ti;this.setupCssCb(t,this.leaveDone)}else this.leaveDone()},qr.leaveDone=function(){this.left=!0,this.cancel=this.pendingJsCb=null,this.op(),te(this.el,this.leaveClass),this.callHook("afterLeave"),this.cb&&this.cb(),this.op=null},qr.cancelPending=function(){this.op=this.cb=null;var e=!1;this.pendingCssCb&&(e=!0,K(this.el,this.pendingCssEvent,this.pendingCssCb),this.pendingCssEvent=this.pendingCssCb=null),this.pendingJsCb&&(e=!0,this.pendingJsCb.cancel(),this.pendingJsCb=null),e&&(te(this.el,this.enterClass),te(this.el,this.leaveClass)),this.cancel&&(this.cancel.call(this.vm,this.el),this.cancel=null)},qr.callHook=function(e){this.hooks&&this.hooks[e]&&this.hooks[e].call(this.vm,this.el)},qr.callHookWithCb=function(e){var t=this.hooks&&this.hooks[e];t&&(t.length>1&&(this.pendingJsCb=k(this[e+"Done"])),t.call(this.vm,this.el,this.pendingJsCb))},qr.getCssTransitionType=function(e){if(!(!Xn||document.hidden||this.hooks&&this.hooks.css===!1||Mt(this.el))){var t=this.type||this.typeCache[e];if(t)return t;var n=this.el.style,i=window.getComputedStyle(this.el),o=n[zr]||i[zr];if(o&&"0s"!==o)t=Lr;else{var r=n[Br]||i[Br];r&&"0s"!==r&&(t=Hr)}return t&&(this.typeCache[e]=t),t}},qr.setupCssCb=function(e,t){this.pendingCssEvent=e;var n=this,i=this.el,o=this.pendingCssCb=function(r){r.target===i&&(K(i,e,o),n.pendingCssEvent=n.pendingCssCb=null,!n.pendingJsCb&&t&&t())};G(i,e,o)};var Jr={priority:Qo,update:function(e,t){var n=this.el,i=ge(this.vm.$options,"transitions",e);e=e||"v",t=t||"v",n.__v_trans=new Ft(n,e,i,this.vm),te(n,t+"-transition"),ee(n,e+"-transition")}},Qr={style:br,"class":Tr,component:jr,prop:Fr,transition:Jr},Yr=/^v-bind:|^:/,Gr=/^v-on:|^@/,Kr=/^v-([^:]+)(?:$|:(.*)$)/,Zr=/\.[^\.]+/g,Xr=/^(v-bind:|:)?transition$/,es=1e3,ts=2e3;on.terminal=!0;var ns=/[^\w\-:\.]/,is=Object.freeze({compile:It,compileAndLinkProps:Ut,compileRoot:Wt,transclude:un,resolveSlots:vn}),os=/^v-on:|^@/;gn.prototype._bind=function(){var e=this.name,t=this.descriptor;if(("cloak"!==e||this.vm._isCompiled)&&this.el&&this.el.removeAttribute){var n=t.attr||"v-"+e;this.el.removeAttribute(n)}var i=t.def;if("function"==typeof i?this.update=i:b(this,i),this._setupParams(),this.bind&&this.bind(),this._bound=!0,this.literal)this.update&&this.update(t.raw);else if((this.expression||this.modifiers)&&(this.update||this.twoWay)&&!this._checkStatement()){var o=this;this.update?this._update=function(e,t){o._locked||o.update(e,t)}:this._update=mn;var r=this._preProcess?_(this._preProcess,this):null,s=this._postProcess?_(this._postProcess,this):null,a=this._watcher=new Qe(this.vm,this.expression,this._update,{filters:this.filters,twoWay:this.twoWay,deep:this.deep,preProcess:r,postProcess:s,scope:this._scope});this.afterBind?this.afterBind():this.update&&this.update(a.value)}},gn.prototype._setupParams=function(){if(this.params){var e=this.params;this.params=Object.create(null);for(var t,n,i,o=e.length;o--;)t=d(e[o]),i=f(t),n=B(this.el,t),null!=n?this._setupParamWatcher(i,n):(n=z(this.el,t),null!=n&&(this.params[i]=""===n||n))}},gn.prototype._setupParamWatcher=function(e,t){var n=this,i=!1,o=(this._scope||this.vm).$watch(t,function(t,o){if(n.params[e]=t,i){var r=n.paramWatchers&&n.paramWatchers[e];r&&r.call(n,t,o)}else i=!0},{immediate:!0,user:!1});(this._paramUnwatchFns||(this._paramUnwatchFns=[])).push(o)},gn.prototype._checkStatement=function(){var e=this.expression;if(e&&this.acceptStatement&&!Be(e)){var t=ze(e).get,n=this._scope||this.vm,i=function(e){n.$event=e,t.call(n,n),n.$event=null};return this.filters&&(i=n._applyFilters(i,null,this.filters)),this.update(i),!0}},gn.prototype.set=function(e){this.twoWay?this._withLock(function(){this._watcher.set(e)}):"production"!==n.env.NODE_ENV&&Di("Directive.set() can only be used inside twoWaydirectives.")},gn.prototype._withLock=function(e){var t=this;t._locked=!0,e.call(t),oi(function(){t._locked=!1})},gn.prototype.on=function(e,t,n){G(this.el,e,t,n),(this._listeners||(this._listeners=[])).push([e,t])},gn.prototype._teardown=function(){if(this._bound){this._bound=!1,this.unbind&&this.unbind(),this._watcher&&this._watcher.teardown();var e,t=this._listeners;if(t)for(e=t.length;e--;)K(this.el,t[e][0],t[e][1]);var i=this._paramUnwatchFns;if(i)for(e=i.length;e--;)i[e]();"production"!==n.env.NODE_ENV&&this.el&&this.el._vue_directives.$remove(this),this.vm=this.el=this._watcher=this._listeners=null}};var rs=/[^|]\|[^|]/;Oe(Nn),yn(Nn),bn(Nn),En(Nn),wn(Nn),xn(Nn),kn(Nn),Cn(Nn),$n(Nn);var ss={priority:er,params:["name"],bind:function(){var e=this.params.name||"default",t=this.vm._slotContents&&this.vm._slotContents[e];t&&t.hasChildNodes()?this.compile(t.cloneNode(!0),this.vm._context,this.vm):this.fallback()},compile:function(e,t,n){if(e&&t){if(this.el.hasChildNodes()&&1===e.childNodes.length&&1===e.childNodes[0].nodeType&&e.childNodes[0].hasAttribute("v-if")){var i=document.createElement("template");i.setAttribute("v-else",""),i.innerHTML=this.el.innerHTML,i._context=this.vm,e.appendChild(i)}var o=n?n._scope:this._scope;this.unlink=t.$compile(e,n,o,this._frag)}e?Y(this.el,e):J(this.el)},fallback:function(){this.compile(ne(this.el,!0),this.vm)},unbind:function(){this.unlink&&this.unlink()}},as={priority:Ko,params:["name"],paramWatchers:{name:function(e){ir.remove.call(this),e&&this.insert(e)}},bind:function(){this.anchor=se("v-partial"),Y(this.el,this.anchor),this.insert(this.params.name)},insert:function(e){var t=ge(this.vm.$options,"partials",e,!0);t&&(this.factory=new ct(this.vm,t),ir.insert.call(this))},unbind:function(){this.frag&&this.frag.destroy()}},cs={slot:ss,partial:as},ls=nr._postProcess,hs=/(\d{3})(?=\d)/g,us={orderBy:Tn,filterBy:An,limitBy:On,json:{read:function(e,t){return"string"==typeof e?e:JSON.stringify(e,null,arguments.length>1?t:2)},write:function(e){try{return JSON.parse(e)}catch(t){return e}}},capitalize:function(e){return e||0===e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""},uppercase:function(e){return e||0===e?e.toString().toUpperCase():""},lowercase:function(e){return e||0===e?e.toString().toLowerCase():""},currency:function(e,t,n){if(e=parseFloat(e),!isFinite(e)||!e&&0!==e)return"";t=null!=t?t:"$",n=null!=n?n:2;var i=Math.abs(e).toFixed(n),o=n?i.slice(0,-1-n):i,r=o.length%3,s=r>0?o.slice(0,r)+(o.length>3?",":""):"",a=n?i.slice(-1-n):"",c=e<0?"-":"";return c+t+s+o.slice(r).replace(hs,"$1,")+a},pluralize:function(e){var t=y(arguments,1),n=t.length;if(n>1){var i=e%10-1;return i in t?t[i]:t[n-1]}return t[0]+(1===e?"":"s")},debounce:function(e,t){if(e)return t||(t=300),w(e,t)}};Dn(Nn),Nn.version="1.0.26",setTimeout(function(){ji.devtools&&(Bn?Bn.emit("init",Nn):"production"!==n.env.NODE_ENV&&zn&&/Chrome\/\d+/.test(window.navigator.userAgent)&&console.log("Download the Vue Devtools for a better development experience:\nhttps://github.com/vuejs/vue-devtools"))},0),e.exports=Nn}).call(t,function(){return this}(),n(19))},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vdnVlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAxNWQxYmJkMTA4YjllMmFkODNhOCIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19yb290LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2lzQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL2FwaS10YWJsZS9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2dldE5hdGl2ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc09iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc09iamVjdExpa2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX0xpc3RDYWNoZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYXNzb2NJbmRleE9mLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19nZXRNYXBEYXRhLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19pc0tleS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbmF0aXZlQ3JlYXRlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL190b0tleS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc0xlbmd0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc1N5bWJvbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fTWFwQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNGdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGlyZWN0aXZlcy9zZXQtZm9jdXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21peGlucy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fTWFwLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19TdGFjay5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fU3ltYm9sLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlR2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlSGFzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlSXNFcXVhbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZVByb3BlcnR5LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19jYXN0UGF0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fZXF1YWxBcnJheXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2lzSG9zdE9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faXNJbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faXNTdHJpY3RDb21wYXJhYmxlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19tYXRjaGVzU3RyaWN0Q29tcGFyYWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fdG9Tb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvZGVmZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNBcmd1bWVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNBcnJheUxpa2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNTdHJpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gva2V5cy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC90b0ludGVnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvdG9OdW1iZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9WdWUvZGlzdC92dWUuY29tbW9uLmpzIiwid2VicGFjazovLy9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vL2luZGV4LnZ1ZT82MWU2Iiwid2VicGFjazovLy9pbmRleC52dWU/MjkxNyIsIndlYnBhY2s6Ly8vYWxlcnQtcGFnZS52dWUiLCJ3ZWJwYWNrOi8vL2NvbGxhcHNhYmxlLXBhbmVsLXBhZ2UudnVlIiwid2VicGFjazovLy9sZWdhbC1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vb3ZlcmxheS1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vc3Bpbm5lci1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vc3RlcC10cmFja2VyLXBhZ2UudnVlIiwid2VicGFjazovLy90YWJzLXBhZ2UudnVlIiwid2VicGFjazovLy9pbmRleC52dWU/OWU4MiIsIndlYnBhY2s6Ly8vaW5kZXgudnVlPzlhOTUiLCJ3ZWJwYWNrOi8vL2xlZ2FsLWNvbnRhaW5lci52dWUiLCJ3ZWJwYWNrOi8vL2xlZ2FsLWNvdW50ZXIudnVlIiwid2VicGFjazovLy9vdmVybGF5LWNvbnRhaW5lci52dWUiLCJ3ZWJwYWNrOi8vL292ZXJsYXkudnVlIiwid2VicGFjazovLy9pbmRleC52dWU/ZGFiYiIsIndlYnBhY2s6Ly8vaW5kZXgudnVlPzMxZWIiLCJ3ZWJwYWNrOi8vL3RhYi52dWUiLCJ3ZWJwYWNrOi8vL3RhYnMudnVlIiwid2VicGFjazovLy8uL2Rldi9zcmMvcm91dGVzLmpzIiwid2VicGFjazovLy8uL3NyYy9kaXJlY3RpdmVzL292ZXJsYXktb3BlbmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9tYWluLmpzIiwid2VicGFjazovLy8uL3NyYy9taXhpbnMvZXZlbnRzLmpzIiwid2VicGFjazovLy8uL3NyYy9taXhpbnMveGhyLXJlc3BvbnNlLmpzIiwid2VicGFjazovLy8uL2Rldi9zcmMvY29tcG9uZW50cy9hcGktdGFibGUvaW5kZXgudnVlPzgzZDQiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL3NpZGUtbmF2L2luZGV4LnZ1ZT9kOWVhIiwid2VicGFjazovLy8uL2Rldi9zcmMvY29tcG9uZW50cy9zaXRlLWhlYWRlci9pbmRleC52dWU/NWJlNSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2dldC1zdGFydGVkLnZ1ZT8wMDg0Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2FsZXJ0L2luZGV4LnZ1ZT9jOTk0Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2NvbGxhcHNhYmxlLXBhbmVsL2luZGV4LnZ1ZT82NWM3Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci52dWU/NDQ2ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb3VudGVyLnZ1ZT9lMDMxIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS1jb250YWluZXIudnVlPzNlODMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LnZ1ZT9iNTc0Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3NwaW5uZXIvaW5kZXgudnVlPzdmMjMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc3RlcC10cmFja2VyL2luZGV4LnZ1ZT9kZWZkIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3RhYi90YWJzLnZ1ZT9iNjRmIiwid2VicGFjazovLy8uL34vZXM2LXByb21pc2UvZGlzdC9lczYtcHJvbWlzZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3doYXR3Zy1mZXRjaC9mZXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL2NvbXBvbmVudHMvc2l0ZS1oZWFkZXIvbG9nby5wbmciLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX0RhdGFWaWV3LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19IYXNoLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19Qcm9taXNlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19TZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX1NldENhY2hlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19VaW50OEFycmF5LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19XZWFrTWFwLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19hcHBseS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYXJyYXlTb21lLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlRGVsYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2Jhc2VGaW5kSW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2Jhc2VIYXNJbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZUlzRXF1YWxEZWVwLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlSXNNYXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZUlzTmF0aXZlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlSXRlcmF0ZWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2Jhc2VLZXlzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlTWF0Y2hlcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZU1hdGNoZXNQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZVByb3BlcnR5RGVlcC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZVRpbWVzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlVG9TdHJpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2NoZWNrR2xvYmFsLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19jb3JlSnNEYXRhLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19lcXVhbEJ5VGFnLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19lcXVhbE9iamVjdHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2dldExlbmd0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fZ2V0TWF0Y2hEYXRhLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19nZXRQcm90b3R5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2dldFRhZy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fZ2V0VmFsdWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2hhc1BhdGguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2hhc2hDbGVhci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faGFzaERlbGV0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faGFzaEdldC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faGFzaEhhcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faGFzaFNldC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faW5kZXhLZXlzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19pc0tleWFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2lzTWFza2VkLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19pc1Byb3RvdHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbGlzdENhY2hlQ2xlYXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2xpc3RDYWNoZURlbGV0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbGlzdENhY2hlR2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19saXN0Q2FjaGVIYXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2xpc3RDYWNoZVNldC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbWFwQ2FjaGVDbGVhci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbWFwQ2FjaGVEZWxldGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX21hcENhY2hlR2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19tYXBDYWNoZUhhcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbWFwQ2FjaGVTZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX21hcFRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX3NldENhY2hlQWRkLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19zZXRDYWNoZUhhcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fc2V0VG9BcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fc3RhY2tDbGVhci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fc3RhY2tEZWxldGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX3N0YWNrR2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19zdGFja0hhcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fc3RhY2tTZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX3N0cmluZ1RvUGF0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9kZWJvdW5jZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9lcS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9maW5kSW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvZ2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2hhc0luLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2lkZW50aXR5LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2lzQXJyYXlMaWtlT2JqZWN0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2lzVHlwZWRBcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9tZW1vaXplLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL25vdy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9wcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9yZXN0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL3RvRmluaXRlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL3RvU3RyaW5nLmpzIiwid2VicGFjazovLy8uL34vcHJpc21qcy9wcmlzbS5qcyIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL2NvbXBvbmVudHMvYXBpLXRhYmxlL2FwaS10YWJsZS5odG1sIiwid2VicGFjazovLy8uL2Rldi9zcmMvY29tcG9uZW50cy9zaWRlLW5hdi9zaWRlLW5hdi5odG1sIiwid2VicGFjazovLy8uL2Rldi9zcmMvY29tcG9uZW50cy9zaXRlLWhlYWRlci9zaXRlLWhlYWRlci5odG1sIiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3MvYWxlcnQtcGFnZS52dWU/OTFmMyIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2NvbGxhcHNhYmxlLXBhbmVsLXBhZ2UudnVlPzAwYzUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9nZXQtc3RhcnRlZC52dWU/YWQ1MiIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2xlZ2FsLXBhZ2UudnVlPzc2OGUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9vdmVybGF5LXBhZ2UudnVlPzc4ZjciLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9zcGlubmVyLXBhZ2UudnVlPzBmNTIiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9zdGVwLXRyYWNrZXItcGFnZS52dWU/ZjBlZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL3RhYnMtcGFnZS52dWU/YTdmMiIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9hbGVydC9hbGVydC5odG1sIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2NvbGxhcHNhYmxlLXBhbmVsL2NvbGxhcHNhYmxlLXBhbmVsLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY29udGFpbmVyLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY291bnRlci5odG1sIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS1jb250YWluZXIuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXkuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9zcGlubmVyL3NwaW5uZXIuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9zdGVwLXRyYWNrZXIvc3RlcC10cmFja2VyLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYi5odG1sIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3RhYi90YWJzLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL3NpZGUtbmF2L2luZGV4LnZ1ZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL2NvbXBvbmVudHMvc2l0ZS1oZWFkZXIvaW5kZXgudnVlIiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3MvYWxlcnQtcGFnZS52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9jb2xsYXBzYWJsZS1wYW5lbC1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2dldC1zdGFydGVkLnZ1ZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2xlZ2FsLXBhZ2UudnVlIiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3Mvb3ZlcmxheS1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL3NwaW5uZXItcGFnZS52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9zdGVwLXRyYWNrZXItcGFnZS52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy90YWJzLXBhZ2UudnVlIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2FsZXJ0L2luZGV4LnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9jb2xsYXBzYWJsZS1wYW5lbC9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY29udGFpbmVyLnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb3VudGVyLnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXktY29udGFpbmVyLnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXkudnVlIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3NwaW5uZXIvaW5kZXgudnVlIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3N0ZXAtdHJhY2tlci9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYi52dWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYnMudnVlIiwid2VicGFjazovLy8uL34vdnVlLXJvdXRlci9kaXN0L3Z1ZS1yb3V0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL2FwaS10YWJsZS9pbmRleC52dWU/NzkyNiIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL2NvbXBvbmVudHMvc2lkZS1uYXYvaW5kZXgudnVlPzRhNDciLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL3NpdGUtaGVhZGVyL2luZGV4LnZ1ZT81NTY5Iiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3MvZ2V0LXN0YXJ0ZWQudnVlPzQxYzYiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvYWxlcnQvaW5kZXgudnVlPzAyNzUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvY29sbGFwc2FibGUtcGFuZWwvaW5kZXgudnVlP2QxYzQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY29udGFpbmVyLnZ1ZT8zNTc2Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvdW50ZXIudnVlP2ViMzkiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LWNvbnRhaW5lci52dWU/MTk3MiIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXkudnVlP2MzODMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc3Bpbm5lci9pbmRleC52dWU/NjMzNSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9zdGVwLXRyYWNrZXIvaW5kZXgudnVlPzAxZTMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYnMudnVlP2Y5MWYiLCJ3ZWJwYWNrOi8vLy4vfi92dWUvZGlzdC92dWUuY29tbW9uLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9hbWQtZGVmaW5lLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwicGFyZW50SnNvbnBGdW5jdGlvbiIsIndpbmRvdyIsImNodW5rSWRzIiwibW9yZU1vZHVsZXMiLCJjaHVua0lkIiwiaSIsImNhbGxiYWNrcyIsImxlbmd0aCIsImluc3RhbGxlZENodW5rcyIsInB1c2giLCJhcHBseSIsInNoaWZ0IiwiMCIsIjEiLCIyIiwiZSIsImNhbGxiYWNrIiwidW5kZWZpbmVkIiwiaGVhZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzY3JpcHQiLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsImNoYXJzZXQiLCJhc3luYyIsInNyYyIsInAiLCJhcHBlbmRDaGlsZCIsIm0iLCJjIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX1Z1ZSIsIl9WdWUyIiwiX3Z1ZVJvdXRlciIsIl92dWVSb3V0ZXIyIiwiX3JvdXRlcyIsIl9yb3V0ZXMyIiwiX2h5YnJpZFRob3JpdW0iLCJfaHlicmlkVGhvcml1bTIiLCJfcHJpc21qcyIsIl9wcmlzbWpzMiIsIl9pbmRleCIsIl9pbmRleDIiLCJfaW5kZXgzIiwiX2luZGV4NCIsImNvbmZpZyIsImRlYnVnIiwidXNlIiwicm91dGVyIiwiQXBwIiwiZXh0ZW5kIiwiY29tcG9uZW50cyIsIlNpZGVOYXYiLCJTaXRlSGVhZGVyIiwiZGF0YSIsImxpZ2VyRW5kUG9pbnQiLCJsaWdlckFwcGxpY2F0aW9uS2V5IiwibWFwIiwiYWZ0ZXJFYWNoIiwic2V0VGltZW91dCIsImhpZ2hsaWdodEFsbCIsInJlZGlyZWN0IiwiKiIsInN0YXJ0IiwibGlzdCIsInRvU3RyaW5nIiwicmVzdWx0IiwidGhpcyIsIml0ZW0iLCJqb2luIiwibWVkaWFRdWVyeSIsImFscmVhZHlJbXBvcnRlZE1vZHVsZXMiLCJhZGRTdHlsZXNUb0RvbSIsInN0eWxlcyIsIm9wdGlvbnMiLCJkb21TdHlsZSIsInN0eWxlc0luRG9tIiwicmVmcyIsImoiLCJwYXJ0cyIsImFkZFN0eWxlIiwibGlzdFRvU3R5bGVzIiwibmV3U3R5bGVzIiwiY3NzIiwibWVkaWEiLCJzb3VyY2VNYXAiLCJwYXJ0IiwiaW5zZXJ0U3R5bGVFbGVtZW50Iiwic3R5bGVFbGVtZW50IiwiZ2V0SGVhZEVsZW1lbnQiLCJsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCIsInN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wIiwiaW5zZXJ0QXQiLCJuZXh0U2libGluZyIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJFcnJvciIsInJlbW92ZVN0eWxlRWxlbWVudCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImlkeCIsImluZGV4T2YiLCJzcGxpY2UiLCJjcmVhdGVTdHlsZUVsZW1lbnQiLCJ1cGRhdGUiLCJyZW1vdmUiLCJzaW5nbGV0b24iLCJzdHlsZUluZGV4Iiwic2luZ2xldG9uQ291bnRlciIsInNpbmdsZXRvbkVsZW1lbnQiLCJhcHBseVRvU2luZ2xldG9uVGFnIiwiYmluZCIsImFwcGx5VG9UYWciLCJuZXdPYmoiLCJpbmRleCIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwicmVwbGFjZVRleHQiLCJjc3NOb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJjaGlsZE5vZGVzIiwic2V0QXR0cmlidXRlIiwic291cmNlcyIsImJ0b2EiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJtZW1vaXplIiwiZm4iLCJtZW1vIiwiYXJndW1lbnRzIiwiaXNPbGRJRSIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ0b0xvd2VyQ2FzZSIsIm5ld0xpc3QiLCJtYXlSZW1vdmUiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlbWVudCIsImZpbHRlciIsIkJvb2xlYW4iLCJnbG9iYWwiLCJjaGVja0dsb2JhbCIsImZyZWVHbG9iYWwiLCJmcmVlU2VsZiIsInNlbGYiLCJ0aGlzR2xvYmFsIiwicm9vdCIsIkZ1bmN0aW9uIiwiaXNBcnJheSIsIkFycmF5IiwiX192dWVfc2NyaXB0X18iLCJfX3Z1ZV90ZW1wbGF0ZV9fIiwidGVtcGxhdGUiLCJnZXROYXRpdmUiLCJvYmplY3QiLCJrZXkiLCJ2YWx1ZSIsImdldFZhbHVlIiwiYmFzZUlzTmF0aXZlIiwiaXNPYmplY3QiLCJpc09iamVjdExpa2UiLCJMaXN0Q2FjaGUiLCJlbnRyaWVzIiwiY2xlYXIiLCJlbnRyeSIsInNldCIsImxpc3RDYWNoZUNsZWFyIiwibGlzdENhY2hlRGVsZXRlIiwibGlzdENhY2hlR2V0IiwibGlzdENhY2hlSGFzIiwibGlzdENhY2hlU2V0IiwicHJvdG90eXBlIiwiZ2V0IiwiaGFzIiwiYXNzb2NJbmRleE9mIiwiYXJyYXkiLCJlcSIsImdldE1hcERhdGEiLCJfX2RhdGFfXyIsImlzS2V5YWJsZSIsImlzS2V5IiwiaXNTeW1ib2wiLCJyZUlzUGxhaW5Qcm9wIiwicmVJc0RlZXBQcm9wIiwiT2JqZWN0IiwibmF0aXZlQ3JlYXRlIiwidG9LZXkiLCJJTkZJTklUWSIsImlzTGVuZ3RoIiwiTUFYX1NBRkVfSU5URUdFUiIsIm9iamVjdFRvU3RyaW5nIiwic3ltYm9sVGFnIiwib2JqZWN0UHJvdG8iLCJNYXBDYWNoZSIsIm1hcENhY2hlQ2xlYXIiLCJtYXBDYWNoZURlbGV0ZSIsIm1hcENhY2hlR2V0IiwibWFwQ2FjaGVIYXMiLCJtYXBDYWNoZVNldCIsImlzRnVuY3Rpb24iLCJ0YWciLCJmdW5jVGFnIiwiZ2VuVGFnIiwiY2xlYW5VcE5leHRUaWNrIiwiZHJhaW5pbmciLCJjdXJyZW50UXVldWUiLCJxdWV1ZSIsImNvbmNhdCIsInF1ZXVlSW5kZXgiLCJkcmFpblF1ZXVlIiwidGltZW91dCIsImNhY2hlZFNldFRpbWVvdXQiLCJsZW4iLCJydW4iLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJJdGVtIiwiZnVuIiwibm9vcCIsInByb2Nlc3MiLCJjbGVhclRpbWVvdXQiLCJuZXh0VGljayIsImFyZ3MiLCJ0aXRsZSIsImJyb3dzZXIiLCJlbnYiLCJhcmd2IiwidmVyc2lvbiIsInZlcnNpb25zIiwib24iLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJiaW5kaW5nIiwibmFtZSIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJkZWZpbmVQcm9wZXJ0eSIsIl9kZWZlciIsIl9kZWZlcjIiLCJuZXdWYWwiLCJfdGhpcyIsImVsIiwidGFiSW5kZXgiLCJmb2N1cyIsIl9ldmVudHMiLCJfZXZlbnRzMiIsIl94aHJSZXNwb25zZSIsIl94aHJSZXNwb25zZTIiLCJNYXAiLCJTdGFjayIsInN0YWNrQ2xlYXIiLCJzdGFja0RlbGV0ZSIsInN0YWNrR2V0Iiwic3RhY2tIYXMiLCJzdGFja1NldCIsIlN5bWJvbCIsImJhc2VHZXQiLCJwYXRoIiwiY2FzdFBhdGgiLCJiYXNlSGFzIiwiaGFzT3duUHJvcGVydHkiLCJnZXRQcm90b3R5cGUiLCJiYXNlSXNFcXVhbCIsIm90aGVyIiwiY3VzdG9taXplciIsImJpdG1hc2siLCJzdGFjayIsImJhc2VJc0VxdWFsRGVlcCIsImJhc2VQcm9wZXJ0eSIsInN0cmluZ1RvUGF0aCIsImVxdWFsQXJyYXlzIiwiZXF1YWxGdW5jIiwiaXNQYXJ0aWFsIiwiUEFSVElBTF9DT01QQVJFX0ZMQUciLCJhcnJMZW5ndGgiLCJvdGhMZW5ndGgiLCJzdGFja2VkIiwic2VlbiIsIlVOT1JERVJFRF9DT01QQVJFX0ZMQUciLCJTZXRDYWNoZSIsImFyclZhbHVlIiwib3RoVmFsdWUiLCJjb21wYXJlZCIsImFycmF5U29tZSIsIm90aEluZGV4IiwiYWRkIiwiaXNIb3N0T2JqZWN0IiwiaXNJbmRleCIsInJlSXNVaW50IiwiaXNTdHJpY3RDb21wYXJhYmxlIiwibWF0Y2hlc1N0cmljdENvbXBhcmFibGUiLCJzcmNWYWx1ZSIsInRvU291cmNlIiwiZnVuYyIsImZ1bmNUb1N0cmluZyIsImJhc2VEZWxheSIsInJlc3QiLCJkZWZlciIsImlzQXJndW1lbnRzIiwiaXNBcnJheUxpa2VPYmplY3QiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImFyZ3NUYWciLCJpc0FycmF5TGlrZSIsImdldExlbmd0aCIsImlzU3RyaW5nIiwic3RyaW5nVGFnIiwia2V5cyIsImlzUHJvdG8iLCJpc1Byb3RvdHlwZSIsImJhc2VLZXlzIiwiaW5kZXhlcyIsImluZGV4S2V5cyIsInNraXBJbmRleGVzIiwidG9JbnRlZ2VyIiwidG9GaW5pdGUiLCJyZW1haW5kZXIiLCJ0b051bWJlciIsIk5BTiIsInZhbHVlT2YiLCJyZXBsYWNlIiwicmVUcmltIiwiaXNCaW5hcnkiLCJyZUlzQmluYXJ5IiwicmVJc09jdGFsIiwiZnJlZVBhcnNlSW50Iiwic2xpY2UiLCJyZUlzQmFkSGV4IiwicGFyc2VJbnQiLCJ2YWwiLCJoYXNPd24iLCJfaXNWdWUiLCJfZGF0YSIsIm9iIiwiX19vYl9fIiwiY29udmVydCIsImRlcCIsIm5vdGlmeSIsInZtcyIsInZtIiwiX3Byb3h5IiwiX2RpZ2VzdCIsImRlbCIsIl91bnByb3h5IiwiaXNMaXRlcmFsIiwiZXhwIiwibGl0ZXJhbFZhbHVlUkUiLCJpc1Jlc2VydmVkIiwic3RyIiwiY2hhckNvZGVBdCIsIl90b1N0cmluZyIsInBhcnNlZCIsIk51bWJlciIsImlzTmFOIiwidG9Cb29sZWFuIiwic3RyaXBRdW90ZXMiLCJhIiwiYiIsImNhbWVsaXplIiwiY2FtZWxpemVSRSIsInRvVXBwZXIiLCJfIiwidG9VcHBlckNhc2UiLCJoeXBoZW5hdGUiLCJoeXBoZW5hdGVSRSIsImNsYXNzaWZ5IiwiY2xhc3NpZnlSRSIsImN0eCIsImwiLCJ0b0FycmF5IiwicmV0IiwidG8iLCJmcm9tIiwiaXNQbGFpbk9iamVjdCIsIk9CSkVDVF9TVFJJTkciLCJkZWYiLCJlbnVtZXJhYmxlIiwid3JpdGFibGUiLCJjb25maWd1cmFibGUiLCJfZGVib3VuY2UiLCJ3YWl0IiwiY29udGV4dCIsInRpbWVzdGFtcCIsImxhdGVyIiwibGFzdCIsIkRhdGUiLCJub3ciLCJhcnIiLCJjYW5jZWxsYWJsZSIsImNiIiwiY2FuY2VsbGVkIiwiY2FuY2VsIiwibG9vc2VFcXVhbCIsIkNhY2hlIiwibGltaXQiLCJzaXplIiwidGFpbCIsIl9rZXltYXAiLCJjcmVhdGUiLCJwdXNoRmlsdGVyIiwibGFzdEZpbHRlckluZGV4IiwidHJpbSIsInRva2VucyIsIm1hdGNoIiwiZmlsdGVyVG9rZW5SRSIsInByb2Nlc3NGaWx0ZXJBcmciLCJmaWx0ZXJzIiwiYXJnIiwicmVzZXJ2ZWRBcmdSRSIsImR5bmFtaWMiLCJzdHJpcHBlZCIsInBhcnNlRGlyZWN0aXZlIiwicyIsImhpdCIsImNhY2hlJDEiLCJpblNpbmdsZSIsImluRG91YmxlIiwiY3VybHkiLCJzcXVhcmUiLCJwYXJlbiIsInByZXYiLCJleHByZXNzaW9uIiwicHV0IiwiZXNjYXBlUmVnZXgiLCJyZWdleEVzY2FwZVJFIiwiY29tcGlsZVJlZ2V4Iiwib3BlbiIsImRlbGltaXRlcnMiLCJjbG9zZSIsInVuc2FmZU9wZW4iLCJ1bnNhZmVEZWxpbWl0ZXJzIiwidW5zYWZlQ2xvc2UiLCJ0YWdSRSIsIlJlZ0V4cCIsImh0bWxSRSIsImNhY2hlIiwicGFyc2VUZXh0IiwidGV4dCIsImh0bWwiLCJmaXJzdCIsIm9uZVRpbWUiLCJsYXN0SW5kZXgiLCJleGVjIiwidG9rZW5zVG9FeHAiLCJ0b2tlbiIsImZvcm1hdFRva2VuIiwic2luZ2xlIiwiJGV2YWwiLCJpbmxpbmVGaWx0ZXJzIiwiZmlsdGVyUkUiLCJhcHBlbmRXaXRoVHJhbnNpdGlvbiIsInRhcmdldCIsImFwcGx5VHJhbnNpdGlvbiIsImJlZm9yZVdpdGhUcmFuc2l0aW9uIiwiYmVmb3JlIiwicmVtb3ZlV2l0aFRyYW5zaXRpb24iLCJkaXJlY3Rpb24iLCJvcCIsInRyYW5zaXRpb24iLCJfX3ZfdHJhbnMiLCJob29rcyIsInRyYW5zaXRpb25FbmRFdmVudCIsIl9pc0NvbXBpbGVkIiwiJHBhcmVudCIsImFjdGlvbiIsInF1ZXJ5Iiwic2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yIiwiTk9ERV9FTlYiLCJ3YXJuIiwiaW5Eb2MiLCJub2RlIiwiZG9jIiwib3duZXJEb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsInBhcmVudCIsIm5vZGVUeXBlIiwiY29udGFpbnMiLCJnZXRBdHRyIiwiX2F0dHIiLCJnZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJnZXRCaW5kQXR0ciIsImhhc0JpbmRBdHRyIiwiaGFzQXR0cmlidXRlIiwiYWZ0ZXIiLCJwcmVwZW5kIiwicmVwbGFjZUNoaWxkIiwiZXZlbnQiLCJ1c2VDYXB0dXJlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJnZXRDbGFzcyIsImNsYXNzbmFtZSIsImNsYXNzTmFtZSIsImJhc2VWYWwiLCJzZXRDbGFzcyIsImNscyIsImlzSUU5IiwibmFtZXNwYWNlVVJJIiwiYWRkQ2xhc3MiLCJjbGFzc0xpc3QiLCJjdXIiLCJyZW1vdmVDbGFzcyIsInRhciIsImV4dHJhY3RDb250ZW50IiwiYXNGcmFnbWVudCIsImNoaWxkIiwicmF3Q29udGVudCIsImlzVGVtcGxhdGUiLCJpc0ZyYWdtZW50IiwiY29udGVudCIsImhhc0NoaWxkTm9kZXMiLCJ0cmltTm9kZSIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJpc1RyaW1tYWJsZSIsImxhc3RDaGlsZCIsInRhZ05hbWUiLCJjcmVhdGVBbmNob3IiLCJwZXJzaXN0IiwiYW5jaG9yIiwiY3JlYXRlQ29tbWVudCIsIl9fdl9hbmNob3IiLCJmaW5kUmVmIiwiaGFzQXR0cmlidXRlcyIsImF0dHJzIiwiYXR0cmlidXRlcyIsInJlZlJFIiwibWFwTm9kZVJhbmdlIiwiZW5kIiwibmV4dCIsInJlbW92ZU5vZGVSYW5nZSIsImZyYWciLCJvblJlbW92ZWQiLCJyZW1vdmVkIiwiZG9uZSIsIm5vZGVzIiwiZ2V0T3V0ZXJIVE1MIiwib3V0ZXJIVE1MIiwiY29udGFpbmVyIiwiY2xvbmVOb2RlIiwiaW5uZXJIVE1MIiwiY2hlY2tDb21wb25lbnRBdHRyIiwiaGFzQXR0cnMiLCJjb21tb25UYWdSRSIsInJlc2VydmVkVGFnUkUiLCJnZXRJc0JpbmRpbmciLCJyZXNvbHZlQXNzZXQiLCJpcyIsImV4cGVjdGVkVGFnIiwiX2NvbXBvbmVudE5hbWVNYXAiLCJpc1Vua25vd25FbGVtZW50IiwibWVyZ2VEYXRhIiwidG9WYWwiLCJmcm9tVmFsIiwibWVyZ2VBc3NldHMiLCJwYXJlbnRWYWwiLCJjaGlsZFZhbCIsInJlcyIsImd1YXJkQXJyYXlBc3NldHMiLCJndWFyZENvbXBvbmVudHMiLCJpZHMiLCJWdWUiLCJndWFyZFByb3BzIiwicHJvcHMiLCJhc3NldHMiLCJhc3NldCIsIm1lcmdlT3B0aW9ucyIsIm1lcmdlRmllbGQiLCJzdHJhdCIsInN0cmF0cyIsImRlZmF1bHRTdHJhdCIsInByb3BzRGF0YSIsIm1peGlucyIsIm1peGluIiwibWl4aW5PcHRpb25zIiwid2Fybk1pc3NpbmciLCJjYW1lbGl6ZWRJZCIsImNoYXJBdCIsIkRlcCIsInVpZCQxIiwic3VicyIsIndpdGhvdXRDb252ZXJzaW9uIiwic2hvdWxkQ29udmVydCIsIk9ic2VydmVyIiwiYXVnbWVudCIsImhhc1Byb3RvIiwicHJvdG9BdWdtZW50IiwiY29weUF1Z21lbnQiLCJhcnJheU1ldGhvZHMiLCJhcnJheUtleXMiLCJvYnNlcnZlQXJyYXkiLCJ3YWxrIiwiX19wcm90b19fIiwib2JzZXJ2ZSIsImlzRXh0ZW5zaWJsZSIsImFkZFZtIiwiZGVmaW5lUmVhY3RpdmUiLCJwcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImdldHRlciIsInNldHRlciIsImNoaWxkT2IiLCJkZXBlbmQiLCJpbml0TWl4aW4iLCJfaW5pdCIsIiRlbCIsIiRyb290IiwiJGNoaWxkcmVuIiwiJHJlZnMiLCIkZWxzIiwiX3dhdGNoZXJzIiwiX2RpcmVjdGl2ZXMiLCJfdWlkIiwidWlkIiwiX2V2ZW50c0NvdW50IiwiX2lzRnJhZ21lbnQiLCJfZnJhZ21lbnQiLCJfZnJhZ21lbnRTdGFydCIsIl9mcmFnbWVudEVuZCIsIl9pc0Rlc3Ryb3llZCIsIl9pc1JlYWR5IiwiX2lzQXR0YWNoZWQiLCJfaXNCZWluZ0Rlc3Ryb3llZCIsIl92Rm9yUmVtb3ZpbmciLCJfdW5saW5rRm4iLCJfY29udGV4dCIsIl9zY29wZSIsIl9mcmFnIiwiY2hpbGRyZW4iLCIkb3B0aW9ucyIsImNvbnN0cnVjdG9yIiwiX3VwZGF0ZVJlZiIsIl9jYWxsSG9vayIsIl9pbml0U3RhdGUiLCJfaW5pdEV2ZW50cyIsIiRtb3VudCIsImdldFBhdGhDaGFyVHlwZSIsImNoIiwiY29kZSIsImZvcm1hdFN1YlBhdGgiLCJ0cmltbWVkIiwicGFyc2UiLCJtYXliZVVuZXNjYXBlUXVvdGUiLCJuZXh0Q2hhciIsIm1vZGUiLCJJTl9TSU5HTEVfUVVPVEUiLCJJTl9ET1VCTEVfUVVPVEUiLCJuZXdDaGFyIiwiYWN0aW9ucyIsIkFQUEVORCIsInR5cGVNYXAiLCJCRUZPUkVfUEFUSCIsInN1YlBhdGhEZXB0aCIsIlBVU0giLCJJTkNfU1VCX1BBVEhfREVQVEgiLCJQVVNIX1NVQl9QQVRIIiwiSU5fU1VCX1BBVEgiLCJwYXRoU3RhdGVNYWNoaW5lIiwiRVJST1IiLCJBRlRFUl9QQVRIIiwicmF3IiwicGFyc2VQYXRoIiwicGF0aENhY2hlIiwiZ2V0UGF0aCIsInBhcnNlRXhwcmVzc2lvbiIsInNldFBhdGgiLCJvcmlnaW5hbCIsIndhcm5Ob25FeGlzdGVudCIsIiRzZXQiLCJzYXZlIiwic2F2ZWQiLCJuZXdsaW5lUkUiLCJyZXdyaXRlIiwiYWxsb3dlZEtleXdvcmRzUkUiLCJyZXN0b3JlUkUiLCJyZXN0b3JlIiwiY29tcGlsZUdldHRlciIsImltcHJvcGVyS2V5d29yZHNSRSIsImJvZHkiLCJzYXZlUkUiLCJ3c1JFIiwiaWRlbnRSRSIsIm1ha2VHZXR0ZXJGbiIsImNvbXBpbGVTZXR0ZXIiLCJzY29wZSIsIm5lZWRTZXQiLCJleHByZXNzaW9uQ2FjaGUiLCJpc1NpbXBsZVBhdGgiLCJwYXRoVGVzdFJFIiwibGl0ZXJhbFZhbHVlUkUkMSIsInJlc2V0QmF0Y2hlclN0YXRlIiwidXNlclF1ZXVlIiwiY2lyY3VsYXIiLCJ3YWl0aW5nIiwiZmx1c2hCYXRjaGVyUXVldWUiLCJfYWdhaW4iLCJydW5CYXRjaGVyUXVldWUiLCJkZXZ0b29scyIsIndhdGNoZXIiLCJfbWF4VXBkYXRlQ291bnQiLCJwdXNoV2F0Y2hlciIsInEiLCJ1c2VyIiwiV2F0Y2hlciIsImV4cE9yRm4iLCJpc0ZuIiwidWlkJDIiLCJhY3RpdmUiLCJkaXJ0eSIsImxhenkiLCJkZXBzIiwibmV3RGVwcyIsImRlcElkcyIsIl9TZXQiLCJuZXdEZXBJZHMiLCJwcmV2RXJyb3IiLCJ0d29XYXkiLCJxdWV1ZWQiLCJzaGFsbG93IiwidHJhdmVyc2UiLCJzZWVuT2JqZWN0cyIsImlzQSIsImlzTyIsImRlcElkIiwiaXNSZWFsVGVtcGxhdGUiLCJzdHJpbmdUb0ZyYWdtZW50IiwidGVtcGxhdGVTdHJpbmciLCJjYWNoZUtleSIsInRlbXBsYXRlQ2FjaGUiLCJ0YWdNYXRjaCIsInRhZ1JFJDEiLCJlbnRpdHlNYXRjaCIsImVudGl0eVJFIiwiY29tbWVudE1hdGNoIiwiY29tbWVudFJFIiwid3JhcCIsImVmYXVsdCIsImRlcHRoIiwicHJlZml4Iiwic3VmZml4Iiwibm9kZVRvRnJhZ21lbnQiLCJ0ZXh0Q29udGVudCIsImNsb25lZE5vZGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2xvbmVkIiwiaGFzQnJva2VuVGVtcGxhdGUiLCJ0ZW1wQ2xvbmUiLCJoYXNUZXh0YXJlYUNsb25lQnVnIiwicGFyc2VUZW1wbGF0ZSIsInNob3VsZENsb25lIiwiaWRTZWxlY3RvckNhY2hlIiwiZ2V0RWxlbWVudEJ5SWQiLCJGcmFnbWVudCIsImxpbmtlciIsImhvc3QiLCJwYXJlbnRGcmFnIiwiY2hpbGRGcmFncyIsImluc2VydGVkIiwidW5saW5rIiwic2luZ2xlQmVmb3JlIiwic2luZ2xlUmVtb3ZlIiwibXVsdGlCZWZvcmUiLCJtdWx0aVJlbW92ZSIsIl9fdl9mcmFnIiwid2l0aFRyYW5zaXRpb24iLCJtZXRob2QiLCJjYWxsSG9vayIsImF0dGFjaCIsInNob3VsZENhbGxSZW1vdmUiLCJiZWZvcmVSZW1vdmUiLCJkZXRhY2giLCJkZXN0cm95IiwiRnJhZ21lbnRGYWN0b3J5IiwiY2lkIiwiY2FjaGVJZCIsImxpbmtlckNhY2hlIiwiY29tcGlsZSIsImZpbmRQcmV2RnJhZyIsInByZXZpb3VzU2libGluZyIsImZvcklkIiwiZmluZFZtRnJvbUZyYWciLCJfX3Z1ZV9fIiwicmFuZ2UiLCJuIiwiTWF0aCIsImZsb29yIiwiZ2V0VHJhY2tCeUtleSIsInRyYWNrQnlLZXkiLCJtdWx0aSIsImluaXQiLCJzZWxlY3RlZCIsIl92YWx1ZSIsImluZGV4T2YkMSIsImtleUZpbHRlciIsImhhbmRsZXIiLCJjb2RlcyIsImNoYXJDb2RlIiwia2V5Q29kZXMiLCJrZXlDb2RlIiwic3RvcEZpbHRlciIsInN0b3BQcm9wYWdhdGlvbiIsInByZXZlbnRGaWx0ZXIiLCJwcmV2ZW50RGVmYXVsdCIsInNlbGZGaWx0ZXIiLCJjdXJyZW50VGFyZ2V0Iiwibm9ybWFsaXplIiwicHJvcCIsInByb3BDYWNoZSIsImNhbWVsIiwidXBwZXIiLCJ0ZXN0RWwiLCJwcmVmaXhlZCIsInByZWZpeGVzIiwic3R5bGUiLCJrZWJhYiIsImNhbWVsUHJlZml4ZXMiLCJub3JtYWxpemUkMSIsIl9rZXkiLCJrIiwic3BsaXQiLCJjYWxsQWN0aXZhdGVIb29rcyIsImNhbGxlZCIsInRvdGFsIiwiY29tcGlsZVByb3BzIiwicHJvcE9wdGlvbnMiLCJhdHRyIiwibmFtZXMiLCJlbXB0eSIsImlkZW50UkUkMSIsInByb3BCaW5kaW5nTW9kZXMiLCJPTkVfV0FZIiwiVFdPX1dBWSIsIk9ORV9USU1FIiwib3B0aW1pemVkTGl0ZXJhbCIsInNldHRhYmxlUGF0aFJFIiwicGFyZW50UGF0aCIsImxvd2VyQ2FzZU5hbWUiLCJyZXF1aXJlZCIsIm1ha2VQcm9wc0xpbmtGbiIsIl9wcm9wcyIsImlubGluZVByb3BzIiwiaW5pdFByb3AiLCIkZ2V0IiwiX2JpbmREaXIiLCJwcm9wRGVmIiwicHJvY2Vzc1Byb3BWYWx1ZSIsInJhd1ZhbHVlIiwiaXNTaW1wbGUiLCJnZXRQcm9wRGVmYXVsdFZhbHVlIiwiY29lcmNlUHJvcCIsImNvZXJjZWQiLCJhc3NlcnRQcm9wIiwidXBkYXRlUHJvcCIsInZhbGlkIiwiZXhwZWN0ZWRUeXBlcyIsImFzc2VydGVkVHlwZSIsImFzc2VydFR5cGUiLCJleHBlY3RlZFR5cGUiLCJmb3JtYXRUeXBlIiwiZm9ybWF0VmFsdWUiLCJ2YWxpZGF0b3IiLCJjb2VyY2UiLCJTdHJpbmciLCJwdXNoSm9iIiwiam9iIiwicXVldWUkMSIsImZsdXNoIiwiZiIsIm9mZnNldEhlaWdodCIsIlRyYW5zaXRpb24iLCJlbnRlckNsYXNzIiwibGVhdmVDbGFzcyIsInBlbmRpbmdDc3NFdmVudCIsInBlbmRpbmdDc3NDYiIsInBlbmRpbmdKc0NiIiwianVzdEVudGVyZWQiLCJlbnRlcmVkIiwibGVmdCIsInR5cGVDYWNoZSIsIlRZUEVfVFJBTlNJVElPTiIsIlRZUEVfQU5JTUFUSU9OIiwiZm9yRWFjaCIsImlzSGlkZGVuIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIndpZHRoIiwiaGVpZ2h0Iiwib2Zmc2V0V2lkdGgiLCJnZXRDbGllbnRSZWN0cyIsInBhcnRpYWwiLCJub2RlTGlua0ZuIiwiX2FzQ29tcG9uZW50IiwiY29tcGlsZU5vZGUiLCJjaGlsZExpbmtGbiIsInRlcm1pbmFsIiwiaXNTY3JpcHQiLCJjb21waWxlTm9kZUxpc3QiLCJkaXJzIiwibGlua0FuZENhcHR1cmUiLCJtYWtlVW5saW5rRm4iLCJvcmlnaW5hbERpckNvdW50Iiwic29ydCIsImRpcmVjdGl2ZUNvbXBhcmF0b3IiLCJfYmluZCIsImRlc2NyaXB0b3IiLCJwcmlvcml0eSIsIkRFRkFVTFRfUFJJT1JJVFkiLCJjb250ZXh0RGlycyIsImRlc3Ryb3lpbmciLCJ0ZWFyZG93bkRpcnMiLCJfdGVhcmRvd24iLCIkcmVtb3ZlIiwiY29tcGlsZUFuZExpbmtQcm9wcyIsInByb3BzTGlua0ZuIiwicHJvcERpcnMiLCJjb21waWxlUm9vdCIsImNvbnRleHRPcHRpb25zIiwiY29udGV4dExpbmtGbiIsInJlcGxhY2VyTGlua0ZuIiwiY29udGFpbmVyQXR0cnMiLCJfY29udGFpbmVyQXR0cnMiLCJyZXBsYWNlckF0dHJzIiwiX3JlcGxhY2VyQXR0cnMiLCJjb21waWxlRGlyZWN0aXZlcyIsIm9uUkUiLCJwbHVyYWwiLCJzZWxmRGlycyIsImNvbXBpbGVUZXh0Tm9kZSIsImNvbXBpbGVFbGVtZW50IiwibGlua0ZuIiwiY2hlY2tUZXJtaW5hbERpcmVjdGl2ZXMiLCJjaGVja0VsZW1lbnREaXJlY3RpdmVzIiwiY2hlY2tDb21wb25lbnQiLCJfc2tpcCIsInJlbW92ZVRleHQiLCJ3aG9sZVRleHQiLCJwcm9jZXNzVGV4dFRva2VuIiwibWFrZVRleHROb2RlTGlua0ZuIiwic2V0VG9rZW5UeXBlIiwiZGlyZWN0aXZlcyIsImZyYWdDbG9uZSIsIm5vZGVMaXN0IiwibGlua0ZucyIsIm1ha2VDaGlsZExpbmtGbiIsImNoaWxkcmVuTGlua0ZuIiwibWFrZVRlcm1pbmFsTm9kZUxpbmtGbiIsImNvbXBvbmVudCIsInJlZiIsImludGVybmFsRGlyZWN0aXZlcyIsIm1vZGlmaWVycyIsImxpdGVyYWwiLCJjb21wb25lbnRMaW5rRm4iLCJza2lwIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsIm1hdGNoZWQiLCJkaXJOYW1lIiwicmF3TmFtZSIsInRlcm1EZWYiLCJtb2RpZmllclJFIiwiZGlyQXR0clJFIiwiREVGQVVMVF9URVJNSU5BTF9QUklPUklUWSIsInBhcnNlTW9kaWZpZXJzIiwicHVzaERpciIsImludGVycFRva2VucyIsImhhc09uZVRpbWVUb2tlbiIsImhhc09uZVRpbWUiLCJpbnRlcnAiLCJkaXJEZWYiLCJzb21lIiwidHJhbnNpdGlvblJFIiwiYmluZFJFIiwibWFrZU5vZGVMaW5rRm4iLCJ0cmFuc2NsdWRlIiwiZXh0cmFjdEF0dHJzIiwiX2NvbnRlbnQiLCJ0cmFuc2NsdWRlVGVtcGxhdGUiLCJyZXBsYWNlciIsIm1lcmdlQXR0cnMiLCJzcGVjaWFsQ2hhclJFIiwicmVzb2x2ZVNsb3RzIiwiY29udGVudHMiLCJfc2xvdENvbnRlbnRzIiwiZXh0cmFjdEZyYWdtZW50Iiwic3RhdGVNaXhpbiIsIm1ha2VDb21wdXRlZEdldHRlciIsIm93bmVyIiwiZXZhbHVhdGUiLCJuZXdEYXRhIiwiX3NldERhdGEiLCJfaW5pdFByb3BzIiwiX2luaXRNZXRhIiwiX2luaXRNZXRob2RzIiwiX2luaXREYXRhIiwiX2luaXRDb21wdXRlZCIsIl9wcm9wc1VubGlua0ZuIiwiZGF0YUZuIiwib2xkRGF0YSIsInJlbW92ZVZtIiwiY29tcHV0ZWQiLCJ1c2VyRGVmIiwibWV0aG9kcyIsIm1ldGFzIiwiX21ldGEiLCJldmVudHNNaXhpbiIsInJlZ2lzdGVyQ29tcG9uZW50RXZlbnRzIiwiZXZlbnRSRSIsIl9mcm9tUGFyZW50IiwiJG9uIiwicmVnaXN0ZXJDYWxsYmFja3MiLCJoYXNoIiwiaGFuZGxlcnMiLCJyZWdpc3RlciIsIm9uQXR0YWNoZWQiLCJjYWxsQXR0YWNoIiwib25EZXRhY2hlZCIsImNhbGxEZXRhY2giLCJldmVudHMiLCJ3YXRjaCIsIl9pbml0RE9NSG9va3MiLCJob29rIiwiJGVtaXQiLCJub29wJDEiLCJEaXJlY3RpdmUiLCJfbG9ja2VkIiwiX2JvdW5kIiwiX2xpc3RlbmVycyIsIl9ob3N0IiwiX3Z1ZV9kaXJlY3RpdmVzIiwibGlmZWN5Y2xlTWl4aW4iLCJfcmVmIiwiX2NvbXBpbGUiLCJfaW5pdEVsZW1lbnQiLCJyb290TGlua2VyIiwiY29udGVudExpbmtGbiIsImN0b3IiLCJfbGlua2VyQ2FjaGFibGUiLCJyb290VW5saW5rRm4iLCJjb250ZW50VW5saW5rRm4iLCJfZGVzdHJveSIsImRlZmVyQ2xlYW51cCIsIl9jbGVhbnVwIiwiZGVzdHJveVJlYWR5IiwicGVuZGluZ1JlbW92YWwiLCJjbGVhbnVwSWZQb3NzaWJsZSIsIiRkZXN0cm95IiwidGVhcmRvd24iLCIkb2ZmIiwibWlzY01peGluIiwiX2FwcGx5RmlsdGVycyIsIm9sZFZhbHVlIiwid3JpdGUiLCJvZmZzZXQiLCJyZWFkIiwiX3Jlc29sdmVDb21wb25lbnQiLCJmYWN0b3J5IiwicmVzb2x2ZWQiLCJyZXF1ZXN0ZWQiLCJwZW5kaW5nQ2FsbGJhY2tzIiwiY2JzIiwicmVhc29uIiwiZGF0YUFQSSIsImNsZWFuIiwiYXNTdGF0ZW1lbnQiLCIkYXJndW1lbnRzIiwiJGRlbGV0ZSIsIiR3YXRjaCIsImRlZXAiLCJzeW5jIiwiaW1tZWRpYXRlIiwiZmlsdGVyUkUkMSIsIiRpbnRlcnBvbGF0ZSIsIiRsb2ciLCJjb25zb2xlIiwibG9nIiwiZG9tQVBJIiwiaW5zZXJ0Iiwib3AxIiwib3AyIiwidGFyZ2V0SXNEZXRhY2hlZCIsInNob3VsZENhbGxIb29rIiwiYXBwZW5kIiwiYmVmb3JlV2l0aENiIiwicmVtb3ZlV2l0aENiIiwiJG5leHRUaWNrIiwiJGFwcGVuZFRvIiwiJHByZXBlbmRUbyIsIiRiZWZvcmUiLCIkYWZ0ZXIiLCJpbkRvY3VtZW50IiwicmVhbENiIiwiZXZlbnRzQVBJIiwibW9kaWZ5TGlzdGVuZXJDb3VudCIsImNvdW50IiwiaG9va1JFIiwiJG9uY2UiLCJpc1NvdXJjZSIsInNob3VsZFByb3BhZ2F0ZSIsImhhc1BhcmVudENicyIsIiRicm9hZGNhc3QiLCJzb3VyY2UiLCIkZGlzcGF0Y2giLCJsaWZlY3ljbGVBUEkiLCJyZWFkeSIsIiRjb21waWxlIiwibGltaXRCeSIsImZpbHRlckJ5Iiwic2VhcmNoIiwiZGVsaW1pdGVyIiwiY29udmVydEFycmF5IiwiJHZhbHVlIiwiJGtleSIsIm9yZGVyQnkiLCJiYXNlQ29tcGFyZSIsInNvcnRLZXlJbmRleCIsInNvcnRLZXkiLCJzb3J0S2V5cyIsIm9yZGVyIiwiY29tcGFyYXRvciIsImZpcnN0QXJnIiwiaW5zdGFsbEdsb2JhbEFQSSIsImNyZWF0ZUNsYXNzIiwiZWxlbWVudERpcmVjdGl2ZXMiLCJ0cmFuc2l0aW9ucyIsInBhcnRpYWxzIiwidXRpbCIsImNvbXBpbGVyIiwicGFyc2VycyIsImRpcmVjdGl2ZSIsImV4dGVuZE9wdGlvbnMiLCJTdXBlciIsImlzRmlyc3RFeHRlbmQiLCJfQ3RvciIsIlN1YiIsIl9hc3NldFR5cGVzIiwicGx1Z2luIiwiaW5zdGFsbGVkIiwidW5zaGlmdCIsImluc3RhbGwiLCJkZWZpbml0aW9uIiwiaW5Ccm93c2VyIiwiX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyIsIlVBIiwiaXNJRSIsImlzQW5kcm9pZCIsImlzSW9zIiwiaW9zVmVyc2lvbk1hdGNoIiwiaW9zVmVyc2lvbiIsImhhc011dGF0aW9uT2JzZXJ2ZXJCdWciLCJpbmRleGVkREIiLCJ0cmFuc2l0aW9uUHJvcCIsImFuaW1hdGlvblByb3AiLCJhbmltYXRpb25FbmRFdmVudCIsImlzV2Via2l0VHJhbnMiLCJvbnRyYW5zaXRpb25lbmQiLCJvbndlYmtpdHRyYW5zaXRpb25lbmQiLCJpc1dlYmtpdEFuaW0iLCJvbmFuaW1hdGlvbmVuZCIsIm9ud2Via2l0YW5pbWF0aW9uZW5kIiwibmV4dFRpY2tIYW5kbGVyIiwicGVuZGluZyIsImNvcGllcyIsInRpbWVyRnVuYyIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJzZXRJbW1lZGlhdGUiLCJjb3VudGVyIiwib2JzZXJ2ZXIiLCJ0ZXh0Tm9kZSIsImNoYXJhY3RlckRhdGEiLCJTZXQiLCJuZXdlciIsIm9sZGVyIiwicmV0dXJuRW50cnkiLCJmcmVlemUiLCJkZWZpbmVQcm9wZXJ0aWVzIiwic2lsZW50Iiwid2FybkV4cHJlc3Npb25FcnJvcnMiLCJfZGVsaW1pdGVyc0NoYW5nZWQiLCJfcHJvcEJpbmRpbmdNb2RlcyIsImZvcm1hdENvbXBvbmVudE5hbWUiLCJoYXNDb25zb2xlIiwibXNnIiwiZXJyb3IiLCJIVE1MVW5rbm93bkVsZW1lbnQiLCJIVE1MRWxlbWVudCIsIm9wdGlvbk1lcmdlU3RyYXRlZ2llcyIsImluc3RhbmNlRGF0YSIsImRlZmF1bHREYXRhIiwiY3JlYXRlZCIsImF0dGFjaGVkIiwiZGV0YWNoZWQiLCJiZWZvcmVDb21waWxlIiwiY29tcGlsZWQiLCJiZWZvcmVEZXN0cm95IiwiZGVzdHJveWVkIiwiYWN0aXZhdGUiLCJhZGRTdWIiLCJzdWIiLCJyZW1vdmVTdWIiLCJhZGREZXAiLCJhcnJheVByb3RvIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsIml0ZW1zIiwiZGVib3VuY2UiLCJJTl9QQVRIIiwiQkVGT1JFX0lERU5UIiwiSU5fSURFTlQiLCJ3cyIsImlkZW50IiwiWyIsImVvZiIsIi4iLCJudW1iZXIiLCInIiwiXCIiLCJdIiwiZWxzZSIsImFsbG93ZWRLZXl3b3JkcyIsImltcHJvcGVyS2V5d29yZHMiLCJiZWZvcmVHZXQiLCJwcmVQcm9jZXNzIiwicG9zdFByb2Nlc3MiLCJhZnRlckdldCIsImZvckNvbnRleHQiLCIkZm9yQ29udGV4dCIsImFsaWFzIiwiX3dpdGhMb2NrIiwiJGluZGV4IiwidG1wIiwiY3VycmVudCIsInRleHQkMSIsImxlZ2VuZCIsInRyIiwiY29sIiwidGQiLCJ0aCIsIm9wdGlvbiIsIm9wdGdyb3VwIiwidGhlYWQiLCJ0Ym9keSIsImNvbGdyb3VwIiwiY2FwdGlvbiIsInRmb290IiwiZyIsImRlZnMiLCJzeW1ib2wiLCJpbWFnZSIsImNpcmNsZSIsImVsbGlwc2UiLCJsaW5lIiwicG9seWdvbiIsInBvbHlsaW5lIiwidCIsInBsYWNlaG9sZGVyIiwic3dhcCIsIl93YXRjaGVyIiwiT04iLCJNT0RFTCIsIkJJTkQiLCJUUkFOU0lUSU9OIiwiRUwiLCJDT01QT05FTlQiLCJQQVJUSUFMIiwiSUYiLCJGT1IiLCJTTE9UIiwidWlkJDMiLCJ2Rm9yIiwicGFyYW1zIiwiaW5NYXRjaCIsIml0TWF0Y2giLCJpdGVyYXRvciIsImlzT3B0aW9uIiwiZGlmZiIsInVwZGF0ZVJlZiIsInVwZGF0ZU1vZGVsIiwicHJpbWl0aXZlIiwiY29udmVydGVkRnJvbU9iamVjdCIsImZyb21PYmplY3QiLCJ0cmFja0J5Iiwib2xkRnJhZ3MiLCJmcmFncyIsImdldENhY2hlZEZyYWciLCJyZXVzZWQiLCJmcmVzaCIsInJlbW92YWxJbmRleCIsInRvdGFsUmVtb3ZlZCIsImRlbGV0ZUNhY2hlZEZyYWciLCJ3IiwidGFyZ2V0UHJldiIsInByZXZFbCIsImN1cnJlbnRQcmV2IiwiaW5zZXJ0aW9uSW5kZXgiLCJzdGFnZ2VyQ2IiLCJzdGFnZ2VyQW5jaG9yIiwibW92ZSIsInBhcmVudFNjb3BlIiwiY2FjaGVGcmFnIiwibW9kZWwiLCJfX3ZfbW9kZWwiLCJmb3JjZVVwZGF0ZSIsInN0YWdnZXJBbW91bnQiLCJnZXRTdGFnZ2VyIiwid2FybkR1cGxpY2F0ZSIsInRyYW5zIiwic3RhZ2dlciIsIl9wcmVQcm9jZXNzIiwiX3Bvc3RQcm9jZXNzIiwidW5iaW5kIiwidklmIiwiaW52YWxpZCIsIm5leHRFbGVtZW50U2libGluZyIsImVsc2VFbCIsImVsc2VGcmFnIiwiZWxzZUZhY3RvcnkiLCJzaG93IiwidG9nZ2xlIiwiZGlzcGxheSIsInRleHQkMiIsImlzUmFuZ2UiLCJjb21wb3NpbmciLCJsaXN0ZW5lciIsImZvY3VzZWQiLCJyYXdMaXN0ZW5lciIsImhhc2pRdWVyeSIsImpRdWVyeSIsImFmdGVyQmluZCIsInJhZGlvIiwiY2hlY2tlZCIsInNlbGVjdCIsIm11bHRpcGxlIiwiaW5pdFZhbHVlIiwic2VsZWN0ZWRJbmRleCIsImNoZWNrYm94IiwiZ2V0Qm9vbGVhblZhbHVlIiwiX3RydWVWYWx1ZSIsIl9mYWxzZVZhbHVlIiwiY2hlY2tGaWx0ZXJzIiwiaGFzUmVhZCIsImhhc1dyaXRlIiwiX3VuYmluZCIsImVzYyIsInRhYiIsImVudGVyIiwic3BhY2UiLCJkZWxldGUiLCJ1cCIsInJpZ2h0IiwiZG93biIsIm9uJDEiLCJhY2NlcHRTdGF0ZW1lbnQiLCJpZnJhbWVCaW5kIiwiY29udGVudFdpbmRvdyIsImNhcHR1cmUiLCJzdG9wIiwicHJldmVudCIsInJlc2V0IiwiaW1wb3J0YW50UkUiLCJoYW5kbGVPYmplY3QiLCJyZWR1Y2UiLCJoYW5kbGVTaW5nbGUiLCJpc0ltcG9ydGFudCIsInNldFByb3BlcnR5IiwieGxpbmtOUyIsInhsaW5rUkUiLCJkaXNhbGxvd2VkSW50ZXJwQXR0clJFIiwiYXR0cldpdGhQcm9wc1JFIiwiZW51bWVyYXRlZEF0dHJSRSIsIm1vZGVsUHJvcHMiLCJ0cnVlLXZhbHVlIiwiZmFsc2UtdmFsdWUiLCJiaW5kJDEiLCJhdHRyVmFsdWUiLCJtb2RlbFByb3AiLCJzZXRBdHRyaWJ1dGVOUyIsImNsb2FrIiwiZm9yIiwiaWYiLCJ2Q2xhc3MiLCJjbGVhbnVwIiwicHJldktleXMiLCJrZWVwQWxpdmUiLCJpbmxpbmVUZW1wbGF0ZSIsInBlbmRpbmdDb21wb25lbnRDYiIsIkNvbXBvbmVudCIsInBlbmRpbmdSZW1vdmFscyIsInBlbmRpbmdSZW1vdmFsQ2IiLCJzZXRDb21wb25lbnQiLCJpbnZhbGlkYXRlUGVuZGluZyIsInJlc29sdmVDb21wb25lbnQiLCJtb3VudENvbXBvbmVudCIsInVuYnVpbGQiLCJjaGlsZFZNIiwiQ29tcG9uZW50TmFtZSIsImFjdGl2YXRlSG9va3MiLCJjYWNoZWQiLCJnZXRDYWNoZWQiLCJuZXdDb21wb25lbnQiLCJidWlsZCIsIndhaXRpbmdGb3IiLCJleHRyYU9wdGlvbnMiLCJfaXNSb3V0ZXJWaWV3IiwiX2luYWN0aXZlIiwidHJhbnNpdGlvbk1vZGUiLCJiaW5kaW5nTW9kZXMiLCJjaGlsZEtleSIsInBhcmVudEtleSIsInBhcmVudFdhdGNoZXIiLCJjaGlsZFdhdGNoZXIiLCJ0cmFuc0R1cmF0aW9uUHJvcCIsImFuaW1EdXJhdGlvblByb3AiLCJyYWYiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3YWl0Rm9yVHJhbnNpdGlvblN0YXJ0IiwicCQxIiwiY2FuY2VsUGVuZGluZyIsImNhbGxIb29rV2l0aENiIiwiZW50ZXJDYW5jZWxsZWQiLCJlbnRlck5leHRUaWNrIiwiZW50ZXJEb25lIiwiZ2V0Q3NzVHJhbnNpdGlvblR5cGUiLCJzZXR1cENzc0NiIiwibGVhdmUiLCJsZWF2ZUNhbmNlbGxlZCIsImxlYXZlRG9uZSIsImxlYXZlTmV4dFRpY2siLCJoYXNQZW5kaW5nIiwiaGlkZGVuIiwiaW5saW5lU3R5bGVzIiwiY29tcHV0ZWRTdHlsZXMiLCJnZXRDb21wdXRlZFN0eWxlIiwidHJhbnNEdXJhdGlvbiIsImFuaW1EdXJhdGlvbiIsIm9uRW5kIiwidHJhbnNpdGlvbiQxIiwib2xkSWQiLCJjbGFzcyIsIl9zZXR1cFBhcmFtcyIsIl9jaGVja1N0YXRlbWVudCIsIl91cGRhdGUiLCJvbGRWYWwiLCJtYXBwZWRLZXkiLCJfc2V0dXBQYXJhbVdhdGNoZXIiLCJ1bndhdGNoIiwicGFyYW1XYXRjaGVycyIsIl9wYXJhbVVud2F0Y2hGbnMiLCIkZXZlbnQiLCJsaXN0ZW5lcnMiLCJ1bndhdGNoRm5zIiwic2xvdCIsImZhbGxiYWNrIiwiZWxzZUJsb2NrIiwiZGlnaXRzUkUiLCJqc29uIiwiaW5kZW50IiwiY2FwaXRhbGl6ZSIsInVwcGVyY2FzZSIsImxvd2VyY2FzZSIsImN1cnJlbmN5IiwiX2N1cnJlbmN5IiwiZGVjaW1hbHMiLCJwYXJzZUZsb2F0IiwiaXNGaW5pdGUiLCJzdHJpbmdpZmllZCIsImFicyIsInRvRml4ZWQiLCJfaW50IiwiX2Zsb2F0Iiwic2lnbiIsInBsdXJhbGl6ZSIsImRlbGF5Iiwic2hvd05hdiIsImhpZGVOYXYiLCJjbGFzc2VzIiwidG9nZ2xlOjpzaXRlTmF2IiwidG9nZ2xlTmF2IiwiQXBpVGFibGUiLCJkaXNtaXNzQ2FsbEJhY2siLCJhcGlJdGVtcyIsImlzUmVxdWlyZWQiLCJkZXNjIiwic2hvd1NwaW5uZXIiLCJfcmVzZXRNc2ciLCJfdGhpczIiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImlzRnVsbFNjcmVlbiIsInN0ZXBUcmFja2VyQ3VycmVudFN0ZXAiLCJzdGVwVHJhY2tlckNvbmZpZyIsImlzQ2xpY2thYmxlIiwic3RlcHMiLCJsaW5rIiwib25DbGlja0hhbmRsZXIiLCJpc1Zpc2libGUiLCJkaXNtaXNzaWJsZSIsIm9uQ2xvc2VkIiwiZGlzbWlzcyIsImlzT3BlbiIsImxhYmVsIiwidG9nZ2xlT3BlbiIsImZldGNoIiwiX21peGlucyIsIl9taXhpbnMyIiwiX2ZpbmRJbmRleCIsIl9maW5kSW5kZXgyIiwiX2RlYm91bmNlMiIsIl9zZXRGb2N1cyIsIl9zZXRGb2N1czIiLCJzZXRGb2N1cyIsImluZGV4ZWRMZWdhbHMiLCJub25JbmRleGVkTGVnYWxzIiwiYXBpTGFuZyIsImFwaVJlZ2lvbiIsImZldGNoTGVnYWxzIiwiaGVhZGVycyIsIkNvbnRlbnQtVHlwZSIsImFwcGxpY2F0aW9uS2V5IiwiYXBwZW5kUmVzcG9uc2VUb0xlZ2FsQ29udGFpbmVyIiwiZGF0YUFyeSIsImxlZ2FsUmVzcG9uc2UiLCJmaW5kSW5kZXgiLCJnZXRMZWdhbHMiLCJpbmRleGVkS2V5cyIsImxlZ2FsIiwibm9uSW5kZXhlZEtleXMiLCJ0aGVuIiwicGFyc2VKU09OIiwibGVnYWw6OmNsaWNrIiwibGVnYWxLZXkiLCJ0YXJnZXRMZWdhbEluZGV4IiwiaXNTZWxlY3RlZCIsImFzc2lnbiIsImxlZ2FsOjppbml0IiwibGVnYWxJbml0RGV0YWlsIiwibGFuZyIsInJlZ2lvbiIsImNvbnRhaW5lclJlZiIsImlzTm9uSW5kZXhlZCIsInJvb3RCcm9hZGNhc3QiLCJsZWdhbENvdW50ZXIiLCJsZWdhbExhbmciLCJsZWdhbFJlZ2lvbiIsImxlZ2FsOjp1ZHBhdGUiLCJ1cGRhdGVEZXRhaWwiLCJjbGlja0hhbmRsZXIiLCJFU0MiLCJfaXNWaXNpYmxlIiwib3ZlcmxheUNvbnRhaW5lcjo6b3BlbiIsIm92ZXJsYXlDb250YWluZXI6OmNsb3NlIiwiZXZ0Iiwib3ZlcmxheUtleSIsImNsb3NlT3ZlcmxheSIsIm92ZXJsYXk6Om9wZW4iLCJmdWxsU2NyZWVuIiwiaGlkZSIsInNob3c6OnNwaW5uZXIiLCJoaWRlOjpzcGlubmVyIiwiY3VycmVudFN0ZXAiLCJzdGVwIiwiaXNEaXNhYmxlZCIsImFjdGl2ZVRhYkluZGV4IiwidGFicyIsIl9kZWZpbmVQcm9wZXJ0eSIsImlzQWN0aXZlIiwiaGFuZGxlVGFiTGlzdENsaWNrIiwiX2dldFN0YXJ0ZWQiLCJfZ2V0U3RhcnRlZDIiLCJfc3RlcFRyYWNrZXJQYWdlIiwiX3N0ZXBUcmFja2VyUGFnZTIiLCJfdGFic1BhZ2UiLCJfdGFic1BhZ2UyIiwiX2xlZ2FsUGFnZSIsIl9sZWdhbFBhZ2UyIiwiX292ZXJsYXlQYWdlIiwiX292ZXJsYXlQYWdlMiIsIl9jb2xsYXBzYWJsZVBhbmVsUGFnZSIsIl9jb2xsYXBzYWJsZVBhbmVsUGFnZTIiLCJfYWxlcnRQYWdlIiwiX2FsZXJ0UGFnZTIiLCJfc3Bpbm5lclBhZ2UiLCJfc3Bpbm5lclBhZ2UyIiwiL2dldC1zdGFydGVkIiwiL2FsZXJ0IiwiQWxlcnRQYWdlIiwiL3NwaW5uZXIiLCJTcGlubmVyUGFnZSIsIi9zdGVwLXRyYWNrZXIiLCJTdGVwVHJhY2tlclBhZ2UiLCIvdGFicyIsIlRhYnNQYWdlIiwiL2xlZ2FsIiwiTGVnYWxQYWdlIiwiL292ZXJsYXkiLCJPdmVybGF5UGFnZSIsIi9jb2xsYXBzYWJsZS1wYW5lbCIsIkNvbGxhcHNhYmxlUGFuZWxQYWdlIiwiZXZlbnRIYW5kbGVyIiwiX292ZXJsYXlPcGVuZXIiLCJfb3ZlcmxheU9wZW5lcjIiLCJfb3ZlcmxheUNvbnRhaW5lciIsIl9vdmVybGF5Q29udGFpbmVyMiIsIl9vdmVybGF5IiwiX292ZXJsYXkyIiwiX2xlZ2FsQ291bnRlciIsIl9sZWdhbENvdW50ZXIyIiwiX2xlZ2FsQ29udGFpbmVyIiwiX2xlZ2FsQ29udGFpbmVyMiIsIl90YWJzIiwiX3RhYnMyIiwiX3RhYiIsIl90YWIyIiwiX2luZGV4NSIsIl9pbmRleDYiLCJfaW5kZXg3IiwiX2luZGV4OCIsIlN0ZXBUcmFja2VyIiwiT3ZlcmxheUNvbnRhaW5lciIsIk92ZXJsYXkiLCJMZWdhbENvdW50ZXIiLCJMZWdhbENvbnRhaW5lciIsIlRhYnMiLCJUYWIiLCJDb2xsYXBzYWJsZVBhbmVsIiwiQWxlcnQiLCJTcGlubmVyIiwib3ZlcmxheU9wZW5lciIsIl9uYW1lIiwiX2xlbiIsInJlc3BvbnNlIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18iLCJsaWIkZXM2JHByb21pc2UkdXRpbHMkJG9iamVjdE9yRnVuY3Rpb24iLCJ4IiwibGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0Z1bmN0aW9uIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHNldFNjaGVkdWxlciIsInNjaGVkdWxlRm4iLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm4iLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0QXNhcCIsImFzYXBGbiIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU5leHRUaWNrIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVZlcnR4VGltZXIiLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0IiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU11dGF0aW9uT2JzZXJ2ZXIiLCJpdGVyYXRpb25zIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU1lc3NhZ2VDaGFubmVsIiwiY2hhbm5lbCIsIk1lc3NhZ2VDaGFubmVsIiwicG9ydDEiLCJvbm1lc3NhZ2UiLCJwb3J0MiIsInBvc3RNZXNzYWdlIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVNldFRpbWVvdXQiLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJGF0dGVtcHRWZXJ0eCIsInZlcnR4IiwicnVuT25Mb29wIiwicnVuT25Db250ZXh0IiwibGliJGVzNiRwcm9taXNlJHRoZW4kJHRoZW4iLCJvbkZ1bGZpbGxtZW50Iiwib25SZWplY3Rpb24iLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUFJPTUlTRV9JRCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG1ha2VQcm9taXNlIiwic3RhdGUiLCJfc3RhdGUiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbnZva2VDYWxsYmFjayIsIl9yZXN1bHQiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRyZXNvbHZlIiwiQ29uc3RydWN0b3IiLCJwcm9taXNlIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZSIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHNlbGZGdWxmaWxsbWVudCIsIlR5cGVFcnJvciIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGNhbm5vdFJldHVybk93biIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGdldFRoZW4iLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUiIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeVRoZW4iLCJmdWxmaWxsbWVudEhhbmRsZXIiLCJyZWplY3Rpb25IYW5kbGVyIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlRm9yZWlnblRoZW5hYmxlIiwidGhlbmFibGUiLCJzZWFsZWQiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0IiwiX2xhYmVsIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlT3duVGhlbmFibGUiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU1heWJlVGhlbmFibGUiLCJtYXliZVRoZW5hYmxlIiwibGliJGVzNiRwcm9taXNlJHRoZW4kJGRlZmF1bHQiLCJyZXNvbHZlIiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2hSZWplY3Rpb24iLCJfb25lcnJvciIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2giLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HIiwiX3N1YnNjcmliZXJzIiwic3Vic2NyaWJlcnMiLCJzZXR0bGVkIiwiZGV0YWlsIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRXJyb3JPYmplY3QiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlDYXRjaCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFRSWV9DQVRDSF9FUlJPUiIsInN1Y2NlZWRlZCIsImZhaWxlZCIsImhhc0NhbGxiYWNrIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW5pdGlhbGl6ZVByb21pc2UiLCJyZXNvbHZlciIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5leHRJZCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGlkIiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRhbGwiLCJsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkZGVmYXVsdCIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJHJhY2UiLCJsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzQXJyYXkiLCJyZWplY3QiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZWplY3QkJHJlamVjdCIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc1Jlc29sdmVyIiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzTmV3IiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UiLCJsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvciIsImlucHV0IiwiX2luc3RhbmNlQ29uc3RydWN0b3IiLCJfaW5wdXQiLCJfcmVtYWluaW5nIiwiX2VudW1lcmF0ZSIsImxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCR2YWxpZGF0aW9uRXJyb3IiLCJsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJHBvbHlmaWxsIiwibG9jYWwiLCJQIiwiUHJvbWlzZSIsImNhc3QiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdCIsImxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXkiLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93IiwibGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJHbG9iYWwiLCJXZWJLaXRNdXRhdGlvbk9ic2VydmVyIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJGlzTm9kZSIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc1dvcmtlciIsIlVpbnQ4Q2xhbXBlZEFycmF5IiwiaW1wb3J0U2NyaXB0cyIsInJhbmRvbSIsInN1YnN0cmluZyIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkZGVmYXVsdCIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJGRlZmF1bHQiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZWplY3QkJGRlZmF1bHQiLCJhbGwiLCJyYWNlIiwiX3NldFNjaGVkdWxlciIsIl9zZXRBc2FwIiwiX2FzYXAiLCJjYXRjaCIsIl9lYWNoRW50cnkiLCJfc2V0dGxlZEF0IiwiX3dpbGxTZXR0bGVBdCIsImVudW1lcmF0b3IiLCJsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHQiLCJsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlIiwicG9seWZpbGwiLCJub3JtYWxpemVOYW1lIiwibm9ybWFsaXplVmFsdWUiLCJpdGVyYXRvckZvciIsInN1cHBvcnQiLCJpdGVyYWJsZSIsIkhlYWRlcnMiLCJjb25zdW1lZCIsImJvZHlVc2VkIiwiZmlsZVJlYWRlclJlYWR5IiwicmVhZGVyIiwib25sb2FkIiwib25lcnJvciIsInJlYWRCbG9iQXNBcnJheUJ1ZmZlciIsImJsb2IiLCJGaWxlUmVhZGVyIiwicmVhZEFzQXJyYXlCdWZmZXIiLCJyZWFkQmxvYkFzVGV4dCIsInJlYWRBc1RleHQiLCJCb2R5IiwiX2luaXRCb2R5IiwiX2JvZHlJbml0IiwiX2JvZHlUZXh0IiwiQmxvYiIsImlzUHJvdG90eXBlT2YiLCJfYm9keUJsb2IiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiX2JvZHlGb3JtRGF0YSIsInNlYXJjaFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsImFycmF5QnVmZmVyIiwiQXJyYXlCdWZmZXIiLCJyZWplY3RlZCIsImRlY29kZSIsIm5vcm1hbGl6ZU1ldGhvZCIsInVwY2FzZWQiLCJSZXF1ZXN0IiwidXJsIiwiY3JlZGVudGlhbHMiLCJyZWZlcnJlciIsImZvcm0iLCJieXRlcyIsImRlY29kZVVSSUNvbXBvbmVudCIsInhociIsInBhaXJzIiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwiaGVhZGVyIiwiUmVzcG9uc2UiLCJib2R5SW5pdCIsInN0YXR1cyIsIm9rIiwic3RhdHVzVGV4dCIsInZhbHVlcyIsImdldEFsbCIsInRoaXNBcmciLCJjbG9uZSIsInJlZGlyZWN0U3RhdHVzZXMiLCJSYW5nZUVycm9yIiwibG9jYXRpb24iLCJyZXNwb25zZVVSTCIsImdldFJlc3BvbnNlSGVhZGVyIiwicmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0IiwicmVzcG9uc2VUZXh0Iiwib250aW1lb3V0Iiwid2l0aENyZWRlbnRpYWxzIiwicmVzcG9uc2VUeXBlIiwic2V0UmVxdWVzdEhlYWRlciIsInNlbmQiLCJEYXRhVmlldyIsIkhhc2giLCJoYXNoQ2xlYXIiLCJoYXNoRGVsZXRlIiwiaGFzaEdldCIsImhhc2hIYXMiLCJoYXNoU2V0Iiwic2V0Q2FjaGVBZGQiLCJzZXRDYWNoZUhhcyIsIlVpbnQ4QXJyYXkiLCJXZWFrTWFwIiwicHJlZGljYXRlIiwiRlVOQ19FUlJPUl9URVhUIiwiYmFzZUZpbmRJbmRleCIsImZyb21JbmRleCIsImZyb21SaWdodCIsImJhc2VIYXNJbiIsIm9iaklzQXJyIiwib3RoSXNBcnIiLCJvYmpUYWciLCJhcnJheVRhZyIsIm90aFRhZyIsImdldFRhZyIsIm9iamVjdFRhZyIsIm9iaklzT2JqIiwib3RoSXNPYmoiLCJpc1NhbWVUYWciLCJpc1R5cGVkQXJyYXkiLCJlcXVhbEJ5VGFnIiwib2JqSXNXcmFwcGVkIiwib3RoSXNXcmFwcGVkIiwib2JqVW53cmFwcGVkIiwib3RoVW53cmFwcGVkIiwiZXF1YWxPYmplY3RzIiwiYmFzZUlzTWF0Y2giLCJtYXRjaERhdGEiLCJub0N1c3RvbWl6ZXIiLCJvYmpWYWx1ZSIsImlzTWFza2VkIiwicGF0dGVybiIsInJlSXNOYXRpdmUiLCJyZUlzSG9zdEN0b3IiLCJyZVJlZ0V4cENoYXIiLCJiYXNlSXRlcmF0ZWUiLCJpZGVudGl0eSIsImJhc2VNYXRjaGVzUHJvcGVydHkiLCJiYXNlTWF0Y2hlcyIsIm5hdGl2ZUtleXMiLCJnZXRNYXRjaERhdGEiLCJoYXNJbiIsImJhc2VQcm9wZXJ0eURlZXAiLCJiYXNlVGltZXMiLCJpdGVyYXRlZSIsImJhc2VUb1N0cmluZyIsInN5bWJvbFRvU3RyaW5nIiwic3ltYm9sUHJvdG8iLCJjb3JlSnNEYXRhIiwiZGF0YVZpZXdUYWciLCJieXRlTGVuZ3RoIiwiYnl0ZU9mZnNldCIsImJ1ZmZlciIsImFycmF5QnVmZmVyVGFnIiwiYm9vbFRhZyIsImRhdGVUYWciLCJlcnJvclRhZyIsIm1lc3NhZ2UiLCJudW1iZXJUYWciLCJyZWdleHBUYWciLCJtYXBUYWciLCJtYXBUb0FycmF5Iiwic2V0VGFnIiwic2V0VG9BcnJheSIsInN5bWJvbFZhbHVlT2YiLCJvYmpQcm9wcyIsIm9iakxlbmd0aCIsIm90aFByb3BzIiwic2tpcEN0b3IiLCJvYmpDdG9yIiwib3RoQ3RvciIsIm5hdGl2ZUdldFByb3RvdHlwZSIsImdldFByb3RvdHlwZU9mIiwicHJvbWlzZVRhZyIsIndlYWtNYXBUYWciLCJkYXRhVmlld0N0b3JTdHJpbmciLCJtYXBDdG9yU3RyaW5nIiwicHJvbWlzZUN0b3JTdHJpbmciLCJzZXRDdG9yU3RyaW5nIiwid2Vha01hcEN0b3JTdHJpbmciLCJDdG9yIiwiY3RvclN0cmluZyIsImhhc1BhdGgiLCJoYXNGdW5jIiwiSEFTSF9VTkRFRklORUQiLCJtYXNrU3JjS2V5IiwiSUVfUFJPVE8iLCJwcm90byIsInBvcCIsInN0cmluZyIsIkxBUkdFX0FSUkFZX1NJWkUiLCJyZVByb3BOYW1lIiwicmVFc2NhcGVDaGFyIiwicXVvdGUiLCJpbnZva2VGdW5jIiwidGltZSIsImxhc3RBcmdzIiwibGFzdFRoaXMiLCJsYXN0SW52b2tlVGltZSIsImxlYWRpbmdFZGdlIiwidGltZXJJZCIsInRpbWVyRXhwaXJlZCIsImxlYWRpbmciLCJyZW1haW5pbmdXYWl0IiwidGltZVNpbmNlTGFzdENhbGwiLCJsYXN0Q2FsbFRpbWUiLCJ0aW1lU2luY2VMYXN0SW52b2tlIiwibWF4aW5nIiwibmF0aXZlTWluIiwibWF4V2FpdCIsInNob3VsZEludm9rZSIsInRyYWlsaW5nRWRnZSIsInRyYWlsaW5nIiwiZGVib3VuY2VkIiwiaXNJbnZva2luZyIsIm5hdGl2ZU1heCIsIm1heCIsIm1pbiIsImRlZmF1bHRWYWx1ZSIsInR5cGVkQXJyYXlUYWdzIiwiZmxvYXQzMlRhZyIsImZsb2F0NjRUYWciLCJpbnQ4VGFnIiwiaW50MTZUYWciLCJpbnQzMlRhZyIsInVpbnQ4VGFnIiwidWludDhDbGFtcGVkVGFnIiwidWludDE2VGFnIiwidWludDMyVGFnIiwibWVtb2l6ZWQiLCJvdGhlckFyZ3MiLCJNQVhfSU5URUdFUiIsIl9zZWxmIiwiV29ya2VyR2xvYmFsU2NvcGUiLCJQcmlzbSIsInVuaXF1ZUlkIiwiZW5jb2RlIiwiVG9rZW4iLCJvIiwib2JqSWQiLCJ2IiwibGFuZ3VhZ2VzIiwicmVkZWYiLCJpbnNpZGUiLCJncmFtbWFyIiwibmV3VG9rZW4iLCJERlMiLCJ2aXNpdGVkIiwicGx1Z2lucyIsImVsZW1lbnQiLCJlbGVtZW50cyIsImhpZ2hsaWdodEVsZW1lbnQiLCJsYW5ndWFnZSIsIm5vZGVOYW1lIiwiV29ya2VyIiwid29ya2VyIiwiZmlsZW5hbWUiLCJoaWdobGlnaHRlZENvZGUiLCJpbW1lZGlhdGVDbG9zZSIsImhpZ2hsaWdodCIsInRva2VuaXplIiwic3RyYXJyIiwidG9rZW5sb29wIiwicGF0dGVybnMiLCJsb29rYmVoaW5kIiwiZ3JlZWR5IiwibG9va2JlaGluZExlbmd0aCIsImRlbE51bSIsIm5leHRUb2tlbiIsIm1hdGNoZWRTdHIiLCJjb21iU3RyIiwid3JhcHBlZCIsImFsaWFzZXMiLCJjdXJyZW50U2NyaXB0IiwicmVhZHlTdGF0ZSIsIm1hcmt1cCIsImNvbW1lbnQiLCJwcm9sb2ciLCJkb2N0eXBlIiwiY2RhdGEiLCJwdW5jdHVhdGlvbiIsIm5hbWVzcGFjZSIsImF0dHItdmFsdWUiLCJhdHRyLW5hbWUiLCJlbnRpdHkiLCJ4bWwiLCJtYXRobWwiLCJzdmciLCJhdHJ1bGUiLCJydWxlIiwiaW1wb3J0YW50IiwiZnVuY3Rpb24iLCJzdHlsZS1hdHRyIiwiY2xpa2UiLCJjbGFzcy1uYW1lIiwia2V5d29yZCIsImJvb2xlYW4iLCJvcGVyYXRvciIsImphdmFzY3JpcHQiLCJyZWdleCIsInRlbXBsYXRlLXN0cmluZyIsImludGVycG9sYXRpb24iLCJpbnRlcnBvbGF0aW9uLXB1bmN0dWF0aW9uIiwianMiLCJmaWxlSGlnaGxpZ2h0IiwiRXh0ZW5zaW9ucyIsInB5IiwicmIiLCJwczEiLCJwc20xIiwic2giLCJiYXQiLCJoIiwidGV4IiwicHJlIiwiZXh0ZW5zaW9uIiwib25yZWFkeXN0YXRlY2hhbmdlIiwiVGFyZ2V0IiwibWF0Y2hlciIsImRlbGVnYXRlIiwiTWF0Y2hlciIsInJvdXRlcyIsImdlbmVyYXRlTWF0Y2giLCJzdGFydGluZ1BhdGgiLCJuZXN0ZWRDYWxsYmFjayIsImZ1bGxQYXRoIiwiYWRkUm91dGUiLCJyb3V0ZUFycmF5Iiwic3Vic3RyIiwicm91dGUiLCJlYWNoUm91dGUiLCJiYXNlUm91dGUiLCJhZGRSb3V0ZUNhbGxiYWNrIiwibm9XYXJuaW5nIiwidHJ5RGVjb2RlIiwidXJpIiwiYXNDb21wb25lbnQiLCJkZWNvZGVVUkkiLCJTdGF0aWNTZWdtZW50IiwiRHluYW1pY1NlZ21lbnQiLCJTdGFyU2VnbWVudCIsIkVwc2lsb25TZWdtZW50Iiwic3BlY2lmaWNpdHkiLCJzZWdtZW50cyIsInJlc3VsdHMiLCJzZWdtZW50IiwiU3RhdGUiLCJjaGFyU3BlYyIsIm5leHRTdGF0ZXMiLCJzb3J0U29sdXRpb25zIiwic3RhdGVzIiwicmVjb2duaXplQ2hhciIsIlJlY29nbml6ZVJlc3VsdHMiLCJxdWVyeVBhcmFtcyIsImZpbmRIYW5kbGVyIiwiY2FwdHVyZXMiLCJjdXJyZW50Q2FwdHVyZSIsImlzRHluYW1pYyIsImFkZFNlZ21lbnQiLCJjdXJyZW50U3RhdGUiLCJlYWNoQ2hhciIsImRlY29kZVF1ZXJ5UGFyYW1QYXJ0Iiwid2FybiQxIiwicmVzb2x2ZVBhdGgiLCJiYXNlIiwicmVsYXRpdmUiLCJpc1Byb21pc2UiLCJnZXRSb3V0ZUNvbmZpZyIsInJlc29sdmVBc3luY0NvbXBvbmVudCIsImV4cG9ydHMkMSIsIm1hcFBhcmFtcyIsImdlblF1ZXJ5IiwiY2FuUmV1c2UiLCJ2aWV3IiwiY2FuUmV1c2VGbiIsImNhbkRlYWN0aXZhdGUiLCJmcm9tQ29tcG9uZW50IiwiZXhwZWN0Qm9vbGVhbiIsImNhbkFjdGl2YXRlIiwiYWJvcnRlZCIsImRlYWN0aXZhdGUiLCJjYWxsSG9va3MiLCJyZXVzZSIsImFjdGl2YXRlUXVldWUiLCJzYXZlQ2hpbGRWaWV3IiwiYWN0aXZhdGVIb29rIiwiZGF0YUhvb2siLCJ3YWl0Rm9yRGF0YSIsImFjdGl2YXRlZCIsImxvYWRpbmciLCIkbG9hZGluZ1JvdXRlRGF0YSIsIl9yb3V0ZXJWaWV3IiwiY2FjaGVkQ2hpbGRWaWV3IiwiX2tlZXBBbGl2ZVJvdXRlclZpZXciLCJjaGlsZFZpZXciLCJfcmVuZGVyZWQiLCJfdHJhbnNpdGlvbk9uTG9hZCIsInNldEN1cnJlbnQiLCJhZnRlckRhdGEiLCJhZnRlckFjdGl2YXRlIiwibG9hZERhdGEiLCJwb3N0QWN0aXZhdGUiLCJwcm9jZXNzRGF0YSIsInByb21pc2VzIiwicmVzb2x2ZWRWYWwiLCJpc1BsYWluT2piZWN0IiwiYXBwbHlPdmVycmlkZSIsIl9WdWUkdXRpbCIsIl9wYXJlbnQiLCIkcm91dGVyIiwiJHJvdXRlIiwiX2NoaWxkcmVuIiwiX2RlZmluZU1ldGEiLCJob29rc1RvTWVyZ2VSRSIsIlZpZXciLCJjb21wb25lbnREZWYiLCJ2aWV3RGVmIiwiX2lzRHluYW1pY0xpdGVyYWwiLCJwYXJlbnRWaWV3IiwiX3Jvb3RWaWV3IiwiX2N1cnJlbnRUcmFuc2l0aW9uIiwiZWxlbWVudERpcmVjdGl2ZSIsIkxpbmsiLCJzYW1lT3JpZ2luIiwicHJvdG9jb2wiLCJob3N0bmFtZSIsInBvcnQiLCJ0b2dnbGVDbGFzc2VzIiwib25Qcmlvcml0eSIsIkxJTktfVVBEQVRFIiwiYWN0aXZlSWQiLCJjaGlsZExpbmtzIiwiZXhpc3RpbmdJZCIsImFjdGl2ZUlkcyIsInVwZGF0ZUNsYXNzZXMiLCJvblJvdXRlVXBkYXRlIiwib25DbGljayIsImV4YWN0IiwicHJldkFjdGl2ZUNsYXNzIiwiYWN0aXZlQ2xhc3MiLCJtZXRhS2V5IiwiY3RybEtleSIsInNoaWZ0S2V5IiwiZGVmYXVsdFByZXZlbnRlZCIsImJ1dHRvbiIsImdvIiwicGF0aG5hbWUiLCJoaXN0b3J5Iiwicm9vdFJFIiwibmV3UGF0aCIsInN0cmluZ2lmeVBhdGgiLCJ1cGRhdGVBY3RpdmVNYXRjaCIsInVwZGF0ZUhyZWYiLCJhY3RpdmVSRSIsInF1ZXJ5U3RyaW5nUkUiLCJpc0Fic29sdXRlIiwiaHJlZiIsImZvcm1hdFBhdGgiLCJfbGlua0FjdGl2ZUNsYXNzIiwiZGVzdCIsInRyYWlsaW5nU2xhc2hSRSIsImd1YXJkQ29tcG9uZW50IiwiY29tcCIsImJhYmVsSGVscGVycyIsImNsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJ3aWxsQWRkUm91dGUiLCJhZGRDaGlsZCIsImNvbnRleHRFbnRlcmVkIiwic3BlY2lhbHMiLCJ2YWxpZENoYXJzIiwiZ2VuZXJhdGUiLCJpbnZhbGlkQ2hhcnMiLCJyZXBlYXQiLCJpc0VxdWFsIiwiY2hhcnMiLCJyZXR1cm5lZCIsIm9DcmVhdGUiLCJGIiwiUm91dGVSZWNvZ25pemVyIiwicm9vdFN0YXRlIiwiYWxsU2VnbWVudHMiLCJpc0VtcHR5IiwiYXMiLCJoYW5kbGVyc0ZvciIsImhhc1JvdXRlIiwib3V0cHV0IiwiZ2VuZXJhdGVRdWVyeVN0cmluZyIsInBhaXIiLCJhcnJheVBhaXIiLCJwYXJzZVF1ZXJ5U3RyaW5nIiwicXVlcnlTdHJpbmciLCJrZXlMZW5ndGgiLCJyZWNvZ25pemUiLCJwYXRoTGVuIiwicXVlcnlTdGFydCIsImlzU2xhc2hEcm9wcGVkIiwic29sdXRpb25zIiwiaGFzaFJFIiwiSFRNTDVIaXN0b3J5Iiwib25DaGFuZ2UiLCJiYXNlRWwiLCJyZXBsYWNlU3RhdGUiLCJwb3MiLCJwYWdlWE9mZnNldCIsInkiLCJwYWdlWU9mZnNldCIsInB1c2hTdGF0ZSIsImhhc2hNYXRjaCIsIkhhc2hIaXN0b3J5IiwiaGFzaGJhbmciLCJmb3JtYXR0ZWRQYXRoIiwiaXNBYnNvbG91dGUiLCJBYnN0cmFjdEhpc3RvcnkiLCJjdXJyZW50UGF0aCIsIlJvdXRlVHJhbnNpdGlvbiIsImFib3J0IiwiYWJvcnRpbmdPbkxvYWQiLCJkZWFjdGl2YXRlUXVldWUiLCJyZXZlcnNlRGVhY3RpdmF0ZVF1ZXVlIiwicmV2ZXJzZSIsInJldXNlUXVldWUiLCJydW5RdWV1ZSIsIl9vblRyYW5zaXRpb25WYWxpZGF0ZWQiLCJfdmlldyIsIl9yZWYkZXhwZWN0Qm9vbGVhbiIsIl9yZWYkcG9zdEFjdGl2YXRlIiwibmV4dENhbGxlZCIsIm9uRXJyb3IiLCJlcnIiLCJfc3VwcHJlc3MiLCJvblByb21pc2VFcnJvciIsIm5leHRXaXRoQm9vbGVhbiIsIm5leHRXaXRoRGF0YSIsImV4cG9zZWQiLCJpbnRlcm5hbEtleXNSRSIsIlJvdXRlIiwiX3JlY29nbml6ZXIiLCJfbm90Rm91bmRIYW5kbGVyIiwiaGlzdG9yeUJhY2tlbmRzIiwiYWJzdHJhY3QiLCJodG1sNSIsIlJvdXRlciIsIl9yZWYkaGFzaGJhbmciLCJfcmVmJGFic3RyYWN0IiwiX3JlZiRoaXN0b3J5IiwiX3JlZiRzYXZlU2Nyb2xsUG9zaXRpb24iLCJzYXZlU2Nyb2xsUG9zaXRpb24iLCJfcmVmJHRyYW5zaXRpb25PbkxvYWQiLCJ0cmFuc2l0aW9uT25Mb2FkIiwiX3JlZiRzdXBwcmVzc1RyYW5zaXRpb25FcnJvciIsInN1cHByZXNzVHJhbnNpdGlvbkVycm9yIiwiX3JlZiRyb290IiwiX3JlZiRsaW5rQWN0aXZlQ2xhc3MiLCJsaW5rQWN0aXZlQ2xhc3MiLCJhcHAiLCJfZ3VhcmRSZWNvZ25pemVyIiwiX3N0YXJ0ZWQiLCJfc3RhcnRDYiIsIl9jdXJyZW50Um91dGUiLCJfcHJldmlvdXNUcmFuc2l0aW9uIiwiX25vdEZvdW5kUmVkaXJlY3QiLCJfYmVmb3JlRWFjaEhvb2tzIiwiX2FmdGVyRWFjaEhvb2tzIiwiX3Jvb3QiLCJfYWJzdHJhY3QiLCJfaGFzaGJhbmciLCJoYXNQdXNoU3RhdGUiLCJfaGlzdG9yeSIsIl9oaXN0b3J5RmFsbGJhY2siLCJIaXN0b3J5IiwiX21hdGNoIiwiX3NhdmVTY3JvbGxQb3NpdGlvbiIsIl9tYXAiLCJyb290UGF0aCIsIl9ub3RGb3VuZCIsIl9hZGRSb3V0ZSIsIl9hZGRSZWRpcmVjdCIsIl9hZGRBbGlhcyIsImJlZm9yZUVhY2giLCJfYXBwQ29udGFpbmVyIiwiX2FwcENvbnN0cnVjdG9yIiwiX2xvY2F0aW9uIiwiZ2VuZXJhdGVkUGF0aCIsImN1cnJlbnRQYXJhbXMiLCJ0YXJnZXRQYXJhbXMiLCJlbmNvZGVVUkkiLCJzdWJSb3V0ZXMiLCJzdWJQYXRoIiwicmVkaXJlY3RQYXRoIiwiX2FkZEd1YXJkIiwiYWxpYXNQYXRoIiwibWFwcGVkUGF0aCIsIl9oYW5kbGVyIiwicmVhbFBhdGgiLCJfY2hlY2tHdWFyZCIsIl90aGlzMyIsImN1cnJlbnRSb3V0ZSIsImN1cnJlbnRUcmFuc2l0aW9uIiwiX3ByZXZUcmFuc2l0aW9uIiwiYmVmb3JlSG9va3MiLCJzdGFydFRyYW5zaXRpb24iLCJfcG9zdFRyYW5zaXRpb24iLCJzY3JvbGxUbyIsInNjcm9sbFgiLCJvZmZzZXRUb3AiLCJleHRlcm5hbFZ1ZSIsImxvY2FscyIsIndlYnBhY2tQb2x5ZmlsbCIsImRlcHJlY2F0ZSIsInBhdGhzIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ2tDbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxFQVVBLE9BTkFQLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLFFBQUEsRUFHQUYsRUFBQUQsUUFyREEsR0FBQUssR0FBQUMsT0FBQSxZQUNBQSxRQUFBLHNCQUFBQyxFQUFBQyxHQUlBLElBREEsR0FBQVYsR0FBQVcsRUFBQUMsRUFBQSxFQUFBQyxLQUNRRCxFQUFBSCxF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LFlxRGhyWUh3NUMsU0FBQWo2QyxjckRtcllHczhCLFNBQ0VnZSxZQUFhLFdxRGxyWWxCLEdBQUF4dEMsR0FBQXJMLElyRHFyWU9BLE1xRHByWVA4NEMsWXJEcXJZTzk0QyxLQUFLbWlCLE1BQU00ZSxXcURwcllsQixpQnJEcXJZT3ZoQyxXQUFXLFdBQ1Q2TCxFQUFNOFcsTUFBTTRlLFdxRHByWXJCLGtCQUNBLE1yRHNyWUsrWCxVQUFXLFdxRHByWWhCLEdBQUFDLEdBQUEvNEMsS3JEdXJZV2lsQyxFcUR0cllYLEVyRHVyWVcrVCxFQUFXQyxZQUFZLFdBQ3JCaFUsRUFBVSxHcURycll2QkEsSXJEdXJZVzhULEVBQU85UyxJQUFNLG1CcUR0cll4QmhCLEVBQUEsWXJEd3JZV2lVLGNxRHRyWVhGLElBRUEsSXJEdXJZT2g1QyxNQUFLaW1DLElBQU0sbUJxRHRyWWxCaEIsRUFBQSxhckR5cllHOWxDLEtBQU0sV0FDSixPQUNFOG1DLElxRHRyWVAsR3JEdXJZT2tULGNxRHRyWVAsRXJEdXJZT1QsV0FDRTl0QyxLcUR0cllULGFyRHVyWVM1TixLcUR0cllULFVyRHVyWVMyN0MsWXFEdHJZVCxFckR1cllTaDdDLFdxRHRyWVQsRXJEdXJZU2k3QyxLcUR0cllULHdDckR3cllTaHVDLEtxRHRyWVQsT3JEdXJZUzVOLEtxRHRyWVQsU3JEdXJZUzI3QyxZcUR0cllULEVyRHVyWVNoN0MsVXFEdHJZVCxLckR1cllTaTdDLEtxRHRyWVQsMkNyRHdyWVNodUMsS3FEdHJZVCxnQnJEdXJZUzVOLEtxRHRyWVQsUXJEdXJZUzI3QyxZcUR0cllULEVyRHVyWVNoN0MsVXFEdHJZVCxNckR1cllTaTdDLEtxRHRyWVQsdUJyRHdyWVNodUMsS3FEdHJZVCxnQnJEdXJZUzVOLEtxRHRyWVQsUXJEdXJZUzI3QyxZcUR0cllULEVyRHVyWVNoN0MsVXFEdHJZVCxNckR1cllTaTdDLEtxRHByWVQseUJyRHN1WU0sU0FBU3Y5QyxFQUFRRCxFQUFTSCxHQUUvQixZQVVBLFNBQVN1QyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxVQUFTRixHQVJ2RitKLE9BQU95RCxlQUFlN1AsRUFBUyxjQUM3QndLLE9BQU8sR3NEbndZVixJQUFBdEgsR0FBQXJELEVBQUEsR3REd3dZS3NELEVBQVVmLEVBQXVCYyxFQUlyQ2xELGVBQ0U0RCxZc0R6d1lIdzVDLFNBQUFqNkMsY3RENHdZR1ksS0FBTSxXc0Qzd1lULEdBQUFrTSxHQUFBckwsSXREOHdZSyxRQUNFbzVDLHVCc0Q3d1lQLEV0RDh3WU9DLG1CQUNFQyxhc0Q3d1lULEV0RDh3WVNDLFFBQ0V6dkMsTXNENXdZWCxTdEQ2d1lXMHZDLEtzRDV3WVgsR3RENndZV0MsZUFBZ0IsU0FBd0I3K0IsR0FDdEN2UCxFQUFNK3RDLHVCc0Q1d1luQixLdEQrd1lXdHZDLE1zRDN3WVgsU3RENHdZVzB2QyxLc0Qzd1lYLEd0RDR3WVdDLGVBQWdCLFNBQXdCNytCLEdBQ3RDdlAsRUFBTSt0Qyx1QnNEM3dZbkIsS3REOHdZV3R2QyxNc0Qxd1lYLFN0RDJ3WVcwdkMsS3NEMXdZWCxHdEQyd1lXQyxlQUFnQixTQUF3QjcrQixHQUN0Q3ZQLEVBQU0rdEMsdUJzRDF3WW5CLE10RDh3WU9WLFdBQ0U5dEMsS3NEendZVCxjdEQwd1lTNU4sS3NEendZVCxVdEQwd1lTMjdDLFlzRHp3WVQsRXREMHdZU2g3QyxVc0R6d1lULEV0RDB3WVNpN0MsS3NEendZVCxTdEQyd1lTaHVDLEtzRHp3WVQsU3REMHdZUzVOLEtzRHp3WVQsU3REMHdZUzI3QyxZc0R6d1lULEV0RDB3WVNoN0MsVXNEendZVCxNdEQwd1lTaTdDLEtzRHp3WVQsU3REMndZU2h1QyxLc0R6d1lULGV0RDB3WVM1TixLc0R6d1lULFN0RDB3WVMyN0MsWXNEendZVCxFdEQwd1lTaDdDLFVzRHp3WVQsTXREMHdZU2k3QyxLc0R6d1lULDBCdEQyd1lTaHVDLEtzRHp3WVQsY3REMHdZUzVOLEtzRHp3WVQsU3REMHdZUzI3QyxZc0R6d1lULEV0RDB3WVNoN0MsVXNEendZVCxNdEQwd1lTaTdDLEtzRHp3WVQsMkJ0RDJ3WVNodUMsS3NEendZVCx3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QSxNQVBBQSxHQUFBNnpFLGtCQUNBN3pFLEVBQUE4ekUsVUFBQSxhQUNBOXpFLEVBQUErekUsU0FFQS96RSxFQUFBb29CLFlBQ0Fwb0IsRUFBQTZ6RSxnQkFBQSxHQUVBN3pFLEk1TjZyL0JNLFNBQVNBLEVBQVFEIiwiZmlsZSI6InZ1ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4vKioqKioqLyBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gd2luZG93W1wid2VicGFja0pzb25wXCJdO1xuLyoqKioqKi8gXHR3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSBmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhjaHVua0lkcywgbW9yZU1vZHVsZXMpIHtcbi8qKioqKiovIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbi8qKioqKiovIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCBjYWxsYmFja3MgPSBbXTtcbi8qKioqKiovIFx0XHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuLyoqKioqKi8gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuLyoqKioqKi8gXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKVxuLyoqKioqKi8gXHRcdFx0XHRjYWxsYmFja3MucHVzaC5hcHBseShjYWxsYmFja3MsIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSk7XG4vKioqKioqLyBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbi8qKioqKiovIFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGNodW5rSWRzLCBtb3JlTW9kdWxlcyk7XG4vKioqKioqLyBcdFx0d2hpbGUoY2FsbGJhY2tzLmxlbmd0aClcbi8qKioqKiovIFx0XHRcdGNhbGxiYWNrcy5zaGlmdCgpLmNhbGwobnVsbCwgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8qKioqKiovIFx0Ly8gXCIwXCIgbWVhbnMgXCJhbHJlYWR5IGxvYWRlZFwiXG4vKioqKioqLyBcdC8vIEFycmF5IG1lYW5zIFwibG9hZGluZ1wiLCBhcnJheSBjb250YWlucyBjYWxsYmFja3Ncbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbi8qKioqKiovIFx0XHQwOjAsXG4vKioqKioqLyBcdFx0MTowLFxuLyoqKioqKi8gXHRcdDI6MFxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGlzIGZpbGUgY29udGFpbnMgb25seSB0aGUgZW50cnkgY2h1bmsuXG4vKioqKioqLyBcdC8vIFRoZSBjaHVuayBsb2FkaW5nIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGNodW5rc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSBmdW5jdGlvbiByZXF1aXJlRW5zdXJlKGNodW5rSWQsIGNhbGxiYWNrKSB7XG4vKioqKioqLyBcdFx0Ly8gXCIwXCIgaXMgdGhlIHNpZ25hbCBmb3IgXCJhbHJlYWR5IGxvYWRlZFwiXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGNhbGxiYWNrLmNhbGwobnVsbCwgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIGFuIGFycmF5IG1lYW5zIFwiY3VycmVudGx5IGxvYWRpbmdcIi5cbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gIT09IHVuZGVmaW5lZCkge1xuLyoqKioqKi8gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdLnB1c2goY2FsbGJhY2spO1xuLyoqKioqKi8gXHRcdH0gZWxzZSB7XG4vKioqKioqLyBcdFx0XHQvLyBzdGFydCBjaHVuayBsb2FkaW5nXG4vKioqKioqLyBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSBbY2FsbGJhY2tdO1xuLyoqKioqKi8gXHRcdFx0dmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuLyoqKioqKi8gXHRcdFx0dmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuLyoqKioqKi8gXHRcdFx0c2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0Jztcbi8qKioqKiovIFx0XHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04Jztcbi8qKioqKiovIFx0XHRcdHNjcmlwdC5hc3luYyA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdFx0c2NyaXB0LnNyYyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyBjaHVua0lkICsgXCIuYXBwLmpzXCI7XG4vKioqKioqLyBcdFx0XHRoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9oeWJyaWQtdGhvcml1bS9kZXYvYXBwL1wiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9WdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTtcblx0XG5cdHZhciBfVnVlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Z1ZSk7XG5cdFxuXHR2YXIgX3Z1ZVJvdXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjAzKTtcblx0XG5cdHZhciBfdnVlUm91dGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Z1ZVJvdXRlcik7XG5cdFxuXHR2YXIgX3JvdXRlcyA9IF9fd2VicGFja19yZXF1aXJlX18oNjUpO1xuXHRcblx0dmFyIF9yb3V0ZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcm91dGVzKTtcblx0XG5cdHZhciBfaHlicmlkVGhvcml1bSA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpO1xuXHRcblx0dmFyIF9oeWJyaWRUaG9yaXVtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2h5YnJpZFRob3JpdW0pO1xuXHRcblx0dmFyIF9wcmlzbWpzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjEpO1xuXHRcblx0dmFyIF9wcmlzbWpzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ByaXNtanMpO1xuXHRcblx0dmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgzKTtcblx0XG5cdHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgpO1xuXHRcblx0dmFyIF9pbmRleDMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4NCk7XG5cdFxuXHR2YXIgX2luZGV4NCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4Myk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0X1Z1ZTIuZGVmYXVsdC5jb25maWcuZGVidWcgPSB0cnVlO1xuXHRcblx0X1Z1ZTIuZGVmYXVsdC51c2UoX3Z1ZVJvdXRlcjIuZGVmYXVsdCk7XG5cdF9WdWUyLmRlZmF1bHQudXNlKF9oeWJyaWRUaG9yaXVtMi5kZWZhdWx0KTtcblx0XG5cdHZhciByb3V0ZXIgPSBuZXcgX3Z1ZVJvdXRlcjIuZGVmYXVsdCgpO1xuXHR2YXIgQXBwID0gX1Z1ZTIuZGVmYXVsdC5leHRlbmQoe1xuXHQgIGNvbXBvbmVudHM6IHtcblx0ICAgIFNpZGVOYXY6IF9pbmRleDIuZGVmYXVsdCxcblx0ICAgIFNpdGVIZWFkZXI6IF9pbmRleDQuZGVmYXVsdFxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGxpZ2VyRW5kUG9pbnQ6ICdodHRwczovL2FwaS5jbXMudGVsdXMuY29tL2xlZ2FscycsXG5cdCAgICAgIGxpZ2VyQXBwbGljYXRpb25LZXk6ICdiOTczOGQ2N2I4OWRmYzc4Mjc0NmQ0YTljZjRhMTA5Mydcblx0ICAgIH07XG5cdCAgfVxuXHR9KTtcblx0cm91dGVyLm1hcChfcm91dGVzMi5kZWZhdWx0KTtcblx0cm91dGVyLmFmdGVyRWFjaChmdW5jdGlvbiAoKSB7XG5cdCAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICBfcHJpc21qczIuZGVmYXVsdC5oaWdobGlnaHRBbGwoKTtcblx0ICB9LCAwKTtcblx0fSk7XG5cdHJvdXRlci5yZWRpcmVjdCh7XG5cdCAgJyonOiAnL2dldC1zdGFydGVkJ1xuXHR9KTtcblx0cm91dGVyLnN0YXJ0KEFwcCwgJyNhcHAtbWFpbicpO1xuXHRcblx0Ly8gcm91dGVyLmdvKCcvZ2V0LXN0YXJ0ZWQnKTtcblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qXHJcblx0XHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdFx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxyXG5cdCovXHJcblx0Ly8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcclxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGxpc3QgPSBbXTtcclxuXHRcclxuXHRcdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcclxuXHRcdGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcclxuXHRcdFx0dmFyIHJlc3VsdCA9IFtdO1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBpdGVtID0gdGhpc1tpXTtcclxuXHRcdFx0XHRpZihpdGVtWzJdKSB7XHJcblx0XHRcdFx0XHRyZXN1bHQucHVzaChcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGl0ZW1bMV0gKyBcIn1cIik7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKGl0ZW1bMV0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gcmVzdWx0LmpvaW4oXCJcIik7XHJcblx0XHR9O1xyXG5cdFxyXG5cdFx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcclxuXHRcdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXHJcblx0XHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xyXG5cdFx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XHJcblx0XHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxyXG5cdFx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XHJcblx0XHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxyXG5cdFx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXHJcblx0XHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cclxuXHRcdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxyXG5cdFx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XHJcblx0XHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XHJcblx0XHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdHJldHVybiBsaXN0O1xyXG5cdH07XHJcblxuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0XHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRcdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcblx0Ki9cblx0dmFyIHN0eWxlc0luRG9tID0ge30sXG5cdFx0bWVtb2l6ZSA9IGZ1bmN0aW9uKGZuKSB7XG5cdFx0XHR2YXIgbWVtbztcblx0XHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgbWVtbyA9PT0gXCJ1bmRlZmluZWRcIikgbWVtbyA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHRcdHJldHVybiBtZW1vO1xuXHRcdFx0fTtcblx0XHR9LFxuXHRcdGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIC9tc2llIFs2LTldXFxiLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xuXHRcdH0pLFxuXHRcdGdldEhlYWRFbGVtZW50ID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XG5cdFx0fSksXG5cdFx0c2luZ2xldG9uRWxlbWVudCA9IG51bGwsXG5cdFx0c2luZ2xldG9uQ291bnRlciA9IDAsXG5cdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AgPSBbXTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykge1xuXHRcdGlmKGZhbHNlKSB7XG5cdFx0XHRpZih0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcblx0XHR9XG5cdFxuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcdC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuXHRcdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2Vcblx0XHRpZiAodHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcblx0XG5cdFx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgYm90dG9tIG9mIDxoZWFkPi5cblx0XHRpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xuXHRcblx0XHR2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QpO1xuXHRcdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XG5cdFxuXHRcdHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuXHRcdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xuXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cdFx0XHRcdGRvbVN0eWxlLnJlZnMtLTtcblx0XHRcdFx0bWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuXHRcdFx0fVxuXHRcdFx0aWYobmV3TGlzdCkge1xuXHRcdFx0XHR2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QpO1xuXHRcdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuXHRcdFx0fVxuXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XG5cdFx0XHRcdGlmKGRvbVN0eWxlLnJlZnMgPT09IDApIHtcblx0XHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspXG5cdFx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXSgpO1xuXHRcdFx0XHRcdGRlbGV0ZSBzdHlsZXNJbkRvbVtkb21TdHlsZS5pZF07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpIHtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXHRcdFx0aWYoZG9tU3R5bGUpIHtcblx0XHRcdFx0ZG9tU3R5bGUucmVmcysrO1xuXHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRmb3IoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2YXIgcGFydHMgPSBbXTtcblx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzfTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxpc3RUb1N0eWxlcyhsaXN0KSB7XG5cdFx0dmFyIHN0eWxlcyA9IFtdO1xuXHRcdHZhciBuZXdTdHlsZXMgPSB7fTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xuXHRcdFx0dmFyIGlkID0gaXRlbVswXTtcblx0XHRcdHZhciBjc3MgPSBpdGVtWzFdO1xuXHRcdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcblx0XHRcdHZhciBzb3VyY2VNYXAgPSBpdGVtWzNdO1xuXHRcdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xuXHRcdFx0aWYoIW5ld1N0eWxlc1tpZF0pXG5cdFx0XHRcdHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7aWQ6IGlkLCBwYXJ0czogW3BhcnRdfSk7XG5cdFx0XHRlbHNlXG5cdFx0XHRcdG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcblx0XHR9XG5cdFx0cmV0dXJuIHN0eWxlcztcblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlRWxlbWVudCkge1xuXHRcdHZhciBoZWFkID0gZ2V0SGVhZEVsZW1lbnQoKTtcblx0XHR2YXIgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AgPSBzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcFtzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5sZW5ndGggLSAxXTtcblx0XHRpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xuXHRcdFx0aWYoIWxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wKSB7XG5cdFx0XHRcdGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlRWxlbWVudCwgaGVhZC5maXJzdENoaWxkKTtcblx0XHRcdH0gZWxzZSBpZihsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xuXHRcdFx0XHRoZWFkLmluc2VydEJlZm9yZShzdHlsZUVsZW1lbnQsIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0XHRcdH1cblx0XHRcdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLnB1c2goc3R5bGVFbGVtZW50KTtcblx0XHR9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwiYm90dG9tXCIpIHtcblx0XHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcuIE11c3QgYmUgJ3RvcCcgb3IgJ2JvdHRvbScuXCIpO1xuXHRcdH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCkge1xuXHRcdHN0eWxlRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudCk7XG5cdFx0dmFyIGlkeCA9IHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLmluZGV4T2Yoc3R5bGVFbGVtZW50KTtcblx0XHRpZihpZHggPj0gMCkge1xuXHRcdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3Auc3BsaWNlKGlkeCwgMSk7XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuXHRcdHZhciBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cdFx0c3R5bGVFbGVtZW50LnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdFx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlRWxlbWVudCk7XG5cdFx0cmV0dXJuIHN0eWxlRWxlbWVudDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG5cdFx0dmFyIHN0eWxlRWxlbWVudCwgdXBkYXRlLCByZW1vdmU7XG5cdFxuXHRcdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuXHRcdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG5cdFx0XHRzdHlsZUVsZW1lbnQgPSBzaW5nbGV0b25FbGVtZW50IHx8IChzaW5nbGV0b25FbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcblx0XHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIGZhbHNlKTtcblx0XHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIHRydWUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0XHR1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50KTtcblx0XHRcdHJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcblx0XHRcdH07XG5cdFx0fVxuXHRcblx0XHR1cGRhdGUob2JqKTtcblx0XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuXHRcdFx0aWYobmV3T2JqKSB7XG5cdFx0XHRcdGlmKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcClcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdHVwZGF0ZShvYmogPSBuZXdPYmopO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVtb3ZlKCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXHRcblx0dmFyIHJlcGxhY2VUZXh0ID0gKGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgdGV4dFN0b3JlID0gW107XG5cdFxuXHRcdHJldHVybiBmdW5jdGlvbiAoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG5cdFx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cdFx0XHRyZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcblx0XHR9O1xuXHR9KSgpO1xuXHRcblx0ZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZUVsZW1lbnQsIGluZGV4LCByZW1vdmUsIG9iaikge1xuXHRcdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcblx0XG5cdFx0aWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcblx0XHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGVFbGVtZW50LmNoaWxkTm9kZXM7XG5cdFx0XHRpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0XHRpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcblx0XHRcdFx0c3R5bGVFbGVtZW50Lmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlRWxlbWVudCwgb2JqKSB7XG5cdFx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdFx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXHRcdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXHRcblx0XHRpZiAobWVkaWEpIHtcblx0XHRcdHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLCBtZWRpYSk7XG5cdFx0fVxuXHRcblx0XHRpZiAoc291cmNlTWFwKSB7XG5cdFx0XHQvLyBodHRwczovL2RldmVsb3Blci5jaHJvbWUuY29tL2RldnRvb2xzL2RvY3MvamF2YXNjcmlwdC1kZWJ1Z2dpbmdcblx0XHRcdC8vIHRoaXMgbWFrZXMgc291cmNlIG1hcHMgaW5zaWRlIHN0eWxlIHRhZ3Mgd29yayBwcm9wZXJseSBpbiBDaHJvbWVcblx0XHRcdGNzcyArPSAnXFxuLyojIHNvdXJjZVVSTD0nICsgc291cmNlTWFwLnNvdXJjZXNbMF0gKyAnICovJztcblx0XHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XG5cdFx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdFx0fVxuXHRcblx0XHRpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcblx0XHRcdHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHdoaWxlKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKSB7XG5cdFx0XHRcdHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCk7XG5cdFx0XHR9XG5cdFx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG5cdFx0fVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHt2YXIgY2hlY2tHbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOCk7XG5cdFxuXHQvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xuXHR2YXIgZnJlZUdsb2JhbCA9IGNoZWNrR2xvYmFsKHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsKTtcblx0XG5cdC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG5cdHZhciBmcmVlU2VsZiA9IGNoZWNrR2xvYmFsKHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYpO1xuXHRcblx0LyoqIERldGVjdCBgdGhpc2AgYXMgdGhlIGdsb2JhbCBvYmplY3QuICovXG5cdHZhciB0aGlzR2xvYmFsID0gY2hlY2tHbG9iYWwodHlwZW9mIHRoaXMgPT0gJ29iamVjdCcgJiYgdGhpcyk7XG5cdFxuXHQvKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cblx0dmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IHRoaXNHbG9iYWwgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gcm9vdDtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBBcnJheWAgb2JqZWN0LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAdHlwZSB7RnVuY3Rpb259XG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc0FycmF5KFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0FycmF5KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXkoJ2FiYycpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXkoXy5ub29wKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNBcnJheTtcblxuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjA0KVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Milcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZUlzTmF0aXZlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDApLFxuXHQgICAgZ2V0VmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNik7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgbmF0aXZlIGZ1bmN0aW9uIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kIHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZ1bmN0aW9uIGlmIGl0J3MgbmF0aXZlLCBlbHNlIGB1bmRlZmluZWRgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TmF0aXZlKG9iamVjdCwga2V5KSB7XG5cdCAgdmFyIHZhbHVlID0gZ2V0VmFsdWUob2JqZWN0LCBrZXkpO1xuXHQgIHJldHVybiBiYXNlSXNOYXRpdmUodmFsdWUpID8gdmFsdWUgOiB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZ2V0TmF0aXZlO1xuXG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG5cdCAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcblx0ICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3Qoe30pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChudWxsKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc09iamVjdDtcblxuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuXHQgKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuXHQgIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc09iamVjdExpa2U7XG5cblxuLyoqKi8gfSxcbi8qIDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBsaXN0Q2FjaGVDbGVhciA9IF9fd2VicGFja19yZXF1aXJlX18oMTI3KSxcblx0ICAgIGxpc3RDYWNoZURlbGV0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTI4KSxcblx0ICAgIGxpc3RDYWNoZUdldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTI5KSxcblx0ICAgIGxpc3RDYWNoZUhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTMwKSxcblx0ICAgIGxpc3RDYWNoZVNldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMxKTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIGxpc3QgY2FjaGUgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG5cdCAqL1xuXHRmdW5jdGlvbiBMaXN0Q2FjaGUoZW50cmllcykge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICBsZW5ndGggPSBlbnRyaWVzID8gZW50cmllcy5sZW5ndGggOiAwO1xuXHRcblx0ICB0aGlzLmNsZWFyKCk7XG5cdCAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuXHQgICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIEFkZCBtZXRob2RzIHRvIGBMaXN0Q2FjaGVgLlxuXHRMaXN0Q2FjaGUucHJvdG90eXBlLmNsZWFyID0gbGlzdENhY2hlQ2xlYXI7XG5cdExpc3RDYWNoZS5wcm90b3R5cGVbJ2RlbGV0ZSddID0gbGlzdENhY2hlRGVsZXRlO1xuXHRMaXN0Q2FjaGUucHJvdG90eXBlLmdldCA9IGxpc3RDYWNoZUdldDtcblx0TGlzdENhY2hlLnByb3RvdHlwZS5oYXMgPSBsaXN0Q2FjaGVIYXM7XG5cdExpc3RDYWNoZS5wcm90b3R5cGUuc2V0ID0gbGlzdENhY2hlU2V0O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBMaXN0Q2FjaGU7XG5cblxuLyoqKi8gfSxcbi8qIDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZXEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0OCk7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGBrZXlgIGlzIGZvdW5kIGluIGBhcnJheWAgb2Yga2V5LXZhbHVlIHBhaXJzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuXHQgKiBAcGFyYW0geyp9IGtleSBUaGUga2V5IHRvIHNlYXJjaCBmb3IuXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBhc3NvY0luZGV4T2YoYXJyYXksIGtleSkge1xuXHQgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cdCAgd2hpbGUgKGxlbmd0aC0tKSB7XG5cdCAgICBpZiAoZXEoYXJyYXlbbGVuZ3RoXVswXSwga2V5KSkge1xuXHQgICAgICByZXR1cm4gbGVuZ3RoO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gLTE7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYXNzb2NJbmRleE9mO1xuXG5cbi8qKiovIH0sXG4vKiAxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzS2V5YWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTI0KTtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBkYXRhIGZvciBgbWFwYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG1hcCBUaGUgbWFwIHRvIHF1ZXJ5LlxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSByZWZlcmVuY2Uga2V5LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWFwIGRhdGEuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRNYXBEYXRhKG1hcCwga2V5KSB7XG5cdCAgdmFyIGRhdGEgPSBtYXAuX19kYXRhX187XG5cdCAgcmV0dXJuIGlzS2V5YWJsZShrZXkpXG5cdCAgICA/IGRhdGFbdHlwZW9mIGtleSA9PSAnc3RyaW5nJyA/ICdzdHJpbmcnIDogJ2hhc2gnXVxuXHQgICAgOiBkYXRhLm1hcDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXRNYXBEYXRhO1xuXG5cbi8qKiovIH0sXG4vKiAxMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuXHQgICAgaXNTeW1ib2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdC8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cblx0dmFyIHJlSXNEZWVwUHJvcCA9IC9cXC58XFxbKD86W15bXFxdXSp8KFtcIiddKSg/Oig/IVxcMSlbXlxcXFxdfFxcXFwuKSo/XFwxKVxcXS8sXG5cdCAgICByZUlzUGxhaW5Qcm9wID0gL15cXHcqJC87XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lIGFuZCBub3QgYSBwcm9wZXJ0eSBwYXRoLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkga2V5cyBvbi5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0tleSh2YWx1ZSwgb2JqZWN0KSB7XG5cdCAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXHQgIGlmICh0eXBlID09ICdudW1iZXInIHx8IHR5cGUgPT0gJ3N5bWJvbCcgfHwgdHlwZSA9PSAnYm9vbGVhbicgfHxcblx0ICAgICAgdmFsdWUgPT0gbnVsbCB8fCBpc1N5bWJvbCh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0ICByZXR1cm4gcmVJc1BsYWluUHJvcC50ZXN0KHZhbHVlKSB8fCAhcmVJc0RlZXBQcm9wLnRlc3QodmFsdWUpIHx8XG5cdCAgICAob2JqZWN0ICE9IG51bGwgJiYgdmFsdWUgaW4gT2JqZWN0KG9iamVjdCkpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzS2V5O1xuXG5cbi8qKiovIH0sXG4vKiAxMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldE5hdGl2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG5cdHZhciBuYXRpdmVDcmVhdGUgPSBnZXROYXRpdmUoT2JqZWN0LCAnY3JlYXRlJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG5hdGl2ZUNyZWF0ZTtcblxuXG4vKioqLyB9LFxuLyogMTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc1N5bWJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHRcblx0LyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG5cdHZhciBJTkZJTklUWSA9IDEgLyAwO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcga2V5IGlmIGl0J3Mgbm90IGEgc3RyaW5nIG9yIHN5bWJvbC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gaW5zcGVjdC5cblx0ICogQHJldHVybnMge3N0cmluZ3xzeW1ib2x9IFJldHVybnMgdGhlIGtleS5cblx0ICovXG5cdGZ1bmN0aW9uIHRvS2V5KHZhbHVlKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyB8fCBpc1N5bWJvbCh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdCAgdmFyIHJlc3VsdCA9ICh2YWx1ZSArICcnKTtcblx0ICByZXR1cm4gKHJlc3VsdCA9PSAnMCcgJiYgKDEgLyB2YWx1ZSkgPT0gLUlORklOSVRZKSA/ICctMCcgOiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gdG9LZXk7XG5cblxuLyoqKi8gfSxcbi8qIDE1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cblx0dmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGxvb3NlbHkgYmFzZWQgb25cblx0ICogW2BUb0xlbmd0aGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXRvbGVuZ3RoKS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzTGVuZ3RoKDMpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNMZW5ndGgoTnVtYmVyLk1JTl9WQUxVRSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqXG5cdCAqIF8uaXNMZW5ndGgoSW5maW5pdHkpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmlzTGVuZ3RoKCczJyk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuXHQgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiZcblx0ICAgIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0xlbmd0aDtcblxuXG4vKioqLyB9LFxuLyogMTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc09iamVjdExpa2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogVXNlZCB0byByZXNvbHZlIHRoZVxuXHQgKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcblx0ICogb2YgdmFsdWVzLlxuXHQgKi9cblx0dmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNTeW1ib2woJ2FiYycpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcblx0ICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG5cdCAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzU3ltYm9sO1xuXG5cbi8qKiovIH0sXG4vKiAxNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIG1hcENhY2hlQ2xlYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMiksXG5cdCAgICBtYXBDYWNoZURlbGV0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMzKSxcblx0ICAgIG1hcENhY2hlR2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzQpLFxuXHQgICAgbWFwQ2FjaGVIYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNSksXG5cdCAgICBtYXBDYWNoZVNldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTM2KTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgbWFwIGNhY2hlIG9iamVjdCB0byBzdG9yZSBrZXktdmFsdWUgcGFpcnMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cblx0ICovXG5cdGZ1bmN0aW9uIE1hcENhY2hlKGVudHJpZXMpIHtcblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgbGVuZ3RoID0gZW50cmllcyA/IGVudHJpZXMubGVuZ3RoIDogMDtcblx0XG5cdCAgdGhpcy5jbGVhcigpO1xuXHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcblx0ICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyBBZGQgbWV0aG9kcyB0byBgTWFwQ2FjaGVgLlxuXHRNYXBDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBtYXBDYWNoZUNsZWFyO1xuXHRNYXBDYWNoZS5wcm90b3R5cGVbJ2RlbGV0ZSddID0gbWFwQ2FjaGVEZWxldGU7XG5cdE1hcENhY2hlLnByb3RvdHlwZS5nZXQgPSBtYXBDYWNoZUdldDtcblx0TWFwQ2FjaGUucHJvdG90eXBlLmhhcyA9IG1hcENhY2hlSGFzO1xuXHRNYXBDYWNoZS5wcm90b3R5cGUuc2V0ID0gbWFwQ2FjaGVTZXQ7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IE1hcENhY2hlO1xuXG5cbi8qKiovIH0sXG4vKiAxOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuXHQgICAgZ2VuVGFnID0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJztcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlXG5cdCAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYEZ1bmN0aW9uYCBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc0Z1bmN0aW9uKF8pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNGdW5jdGlvbigvYWJjLyk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7XG5cdCAgLy8gVGhlIHVzZSBvZiBgT2JqZWN0I3RvU3RyaW5nYCBhdm9pZHMgaXNzdWVzIHdpdGggdGhlIGB0eXBlb2ZgIG9wZXJhdG9yXG5cdCAgLy8gaW4gU2FmYXJpIDggd2hpY2ggcmV0dXJucyAnb2JqZWN0JyBmb3IgdHlwZWQgYXJyYXkgYW5kIHdlYWsgbWFwIGNvbnN0cnVjdG9ycyxcblx0ICAvLyBhbmQgUGhhbnRvbUpTIDEuOSB3aGljaCByZXR1cm5zICdmdW5jdGlvbicgZm9yIGBOb2RlTGlzdGAgaW5zdGFuY2VzLlxuXHQgIHZhciB0YWcgPSBpc09iamVjdCh2YWx1ZSkgPyBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA6ICcnO1xuXHQgIHJldHVybiB0YWcgPT0gZnVuY1RhZyB8fCB0YWcgPT0gZ2VuVGFnO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzRnVuY3Rpb247XG5cblxuLyoqKi8gfSxcbi8qIDE5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcblx0XG5cdHZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblx0XG5cdC8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuXHQvLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcblx0Ly8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuXHQvLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXHRcblx0dmFyIGNhY2hlZFNldFRpbWVvdXQ7XG5cdHZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cdFxuXHQoZnVuY3Rpb24gKCkge1xuXHQgIHRyeSB7XG5cdCAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaXMgbm90IGRlZmluZWQnKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgdHJ5IHtcblx0ICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGlzIG5vdCBkZWZpbmVkJyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9ICgpKVxuXHR2YXIgcXVldWUgPSBbXTtcblx0dmFyIGRyYWluaW5nID0gZmFsc2U7XG5cdHZhciBjdXJyZW50UXVldWU7XG5cdHZhciBxdWV1ZUluZGV4ID0gLTE7XG5cdFxuXHRmdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG5cdCAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICB9XG5cdCAgICBpZiAocXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgZHJhaW5RdWV1ZSgpO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuXHQgICAgaWYgKGRyYWluaW5nKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIHRpbWVvdXQgPSBjYWNoZWRTZXRUaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG5cdCAgICBkcmFpbmluZyA9IHRydWU7XG5cdFxuXHQgICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIHdoaWxlKGxlbikge1xuXHQgICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuXHQgICAgICAgIHF1ZXVlID0gW107XG5cdCAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuXHQgICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG5cdCAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIH1cblx0ICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgY2FjaGVkQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHR9XG5cdFxuXHRwcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuXHQgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcblx0ICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dChkcmFpblF1ZXVlLCAwKTtcblx0ICAgIH1cblx0fTtcblx0XG5cdC8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcblx0ZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG5cdCAgICB0aGlzLmZ1biA9IGZ1bjtcblx0ICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcblx0fVxuXHRJdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcblx0fTtcblx0cHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcblx0cHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcblx0cHJvY2Vzcy5lbnYgPSB7fTtcblx0cHJvY2Vzcy5hcmd2ID0gW107XG5cdHByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xuXHRwcm9jZXNzLnZlcnNpb25zID0ge307XG5cdFxuXHRmdW5jdGlvbiBub29wKCkge31cblx0XG5cdHByb2Nlc3Mub24gPSBub29wO1xuXHRwcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5vbmNlID0gbm9vcDtcblx0cHJvY2Vzcy5vZmYgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xuXHRwcm9jZXNzLmVtaXQgPSBub29wO1xuXHRcblx0cHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0XG5cdHByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5cdHByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRwcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cbi8qKiovIH0sXG4vKiAyMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2RlZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG5cdFxuXHR2YXIgX2RlZmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUobmV3VmFsKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIGlmIChuZXdWYWwgPT09IHRydWUpIHtcblx0ICAgICAgKDAsIF9kZWZlcjIuZGVmYXVsdCkoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIF90aGlzLmVsLnRhYkluZGV4ID0gMDtcblx0ICAgICAgICBfdGhpcy5lbC5mb2N1cygpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XG5cdH07IC8qXG5cdCAgICAgQGRlc2MgQWRkIGJlaGF2aW9yIHRvIGFueSBlbGVtZW50LlxuXHQgICAgIFdoZW4gZXZhbCB0byB0cnVlLCBpdCB3aWxsIHNldCBlbGVtZW50IHRhYiBpbmRleCB0byAwIGFuZCBmb2N1cyBvbiBpdC5cblx0ICAgICBFeGFtcGxlOiA8ZGl2IHNldC1mb2N1cz1cIndpbGxGb2N1c1doZW5UcnVlXCI+PC9kaXY+XG5cdCAgICovXG5cbi8qKiovIH0sXG4vKiAyMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V2ZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oNjgpO1xuXHRcblx0dmFyIF9ldmVudHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXZlbnRzKTtcblx0XG5cdHZhciBfeGhyUmVzcG9uc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY5KTtcblx0XG5cdHZhciBfeGhyUmVzcG9uc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfeGhyUmVzcG9uc2UpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFtfZXZlbnRzMi5kZWZhdWx0LCBfeGhyUmVzcG9uc2UyLmRlZmF1bHRdO1xuXG4vKioqLyB9LFxuLyogMjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXROYXRpdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpLFxuXHQgICAgcm9vdCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG5cdHZhciBNYXAgPSBnZXROYXRpdmUocm9vdCwgJ01hcCcpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBNYXA7XG5cblxuLyoqKi8gfSxcbi8qIDIzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgTGlzdENhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KSxcblx0ICAgIHN0YWNrQ2xlYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MSksXG5cdCAgICBzdGFja0RlbGV0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQyKSxcblx0ICAgIHN0YWNrR2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDMpLFxuXHQgICAgc3RhY2tIYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NCksXG5cdCAgICBzdGFja1NldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ1KTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgc3RhY2sgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIGtleS12YWx1ZSBwYWlycy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuXHQgKi9cblx0ZnVuY3Rpb24gU3RhY2soZW50cmllcykge1xuXHQgIHRoaXMuX19kYXRhX18gPSBuZXcgTGlzdENhY2hlKGVudHJpZXMpO1xuXHR9XG5cdFxuXHQvLyBBZGQgbWV0aG9kcyB0byBgU3RhY2tgLlxuXHRTdGFjay5wcm90b3R5cGUuY2xlYXIgPSBzdGFja0NsZWFyO1xuXHRTdGFjay5wcm90b3R5cGVbJ2RlbGV0ZSddID0gc3RhY2tEZWxldGU7XG5cdFN0YWNrLnByb3RvdHlwZS5nZXQgPSBzdGFja0dldDtcblx0U3RhY2sucHJvdG90eXBlLmhhcyA9IHN0YWNrSGFzO1xuXHRTdGFjay5wcm90b3R5cGUuc2V0ID0gc3RhY2tTZXQ7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFN0YWNrO1xuXG5cbi8qKiovIH0sXG4vKiAyNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHJvb3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG5cdHZhciBTeW1ib2wgPSByb290LlN5bWJvbDtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gU3ltYm9sO1xuXG5cbi8qKiovIH0sXG4vKiAyNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGNhc3RQYXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSksXG5cdCAgICBpc0tleSA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpLFxuXHQgICAgdG9LZXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5nZXRgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVmYXVsdCB2YWx1ZXMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUdldChvYmplY3QsIHBhdGgpIHtcblx0ICBwYXRoID0gaXNLZXkocGF0aCwgb2JqZWN0KSA/IFtwYXRoXSA6IGNhc3RQYXRoKHBhdGgpO1xuXHRcblx0ICB2YXIgaW5kZXggPSAwLFxuXHQgICAgICBsZW5ndGggPSBwYXRoLmxlbmd0aDtcblx0XG5cdCAgd2hpbGUgKG9iamVjdCAhPSBudWxsICYmIGluZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICBvYmplY3QgPSBvYmplY3RbdG9LZXkocGF0aFtpbmRleCsrXSldO1xuXHQgIH1cblx0ICByZXR1cm4gKGluZGV4ICYmIGluZGV4ID09IGxlbmd0aCkgPyBvYmplY3QgOiB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZUdldDtcblxuXG4vKioqLyB9LFxuLyogMjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXRQcm90b3R5cGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNCk7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cblx0dmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaGFzYCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30ga2V5IFRoZSBrZXkgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VIYXMob2JqZWN0LCBrZXkpIHtcblx0ICAvLyBBdm9pZCBhIGJ1ZyBpbiBJRSAxMC0xMSB3aGVyZSBvYmplY3RzIHdpdGggYSBbW1Byb3RvdHlwZV1dIG9mIGBudWxsYCxcblx0ICAvLyB0aGF0IGFyZSBjb21wb3NlZCBlbnRpcmVseSBvZiBpbmRleCBwcm9wZXJ0aWVzLCByZXR1cm4gYGZhbHNlYCBmb3Jcblx0ICAvLyBgaGFzT3duUHJvcGVydHlgIGNoZWNrcyBvZiB0aGVtLlxuXHQgIHJldHVybiBvYmplY3QgIT0gbnVsbCAmJlxuXHQgICAgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpIHx8XG5cdCAgICAgICh0eXBlb2Ygb2JqZWN0ID09ICdvYmplY3QnICYmIGtleSBpbiBvYmplY3QgJiYgZ2V0UHJvdG90eXBlKG9iamVjdCkgPT09IG51bGwpKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlSGFzO1xuXG5cbi8qKiovIH0sXG4vKiAyNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VJc0VxdWFsRGVlcCA9IF9fd2VicGFja19yZXF1aXJlX18oOTgpLFxuXHQgICAgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpLFxuXHQgICAgaXNPYmplY3RMaWtlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc0VxdWFsYCB3aGljaCBzdXBwb3J0cyBwYXJ0aWFsIGNvbXBhcmlzb25zXG5cdCAqIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG5cdCAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtiaXRtYXNrXSBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLlxuXHQgKiAgVGhlIGJpdG1hc2sgbWF5IGJlIGNvbXBvc2VkIG9mIHRoZSBmb2xsb3dpbmcgZmxhZ3M6XG5cdCAqICAgICAxIC0gVW5vcmRlcmVkIGNvbXBhcmlzb25cblx0ICogICAgIDIgLSBQYXJ0aWFsIGNvbXBhcmlzb25cblx0ICogQHBhcmFtIHtPYmplY3R9IFtzdGFja10gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSB7XG5cdCAgaWYgKHZhbHVlID09PSBvdGhlcikge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHQgIGlmICh2YWx1ZSA9PSBudWxsIHx8IG90aGVyID09IG51bGwgfHwgKCFpc09iamVjdCh2YWx1ZSkgJiYgIWlzT2JqZWN0TGlrZShvdGhlcikpKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcjtcblx0ICB9XG5cdCAgcmV0dXJuIGJhc2VJc0VxdWFsRGVlcCh2YWx1ZSwgb3RoZXIsIGJhc2VJc0VxdWFsLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZUlzRXF1YWw7XG5cblxuLyoqKi8gfSxcbi8qIDI4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZVByb3BlcnR5KGtleSkge1xuXHQgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcblx0ICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZVByb3BlcnR5O1xuXG5cbi8qKiovIH0sXG4vKiAyOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuXHQgICAgc3RyaW5nVG9QYXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDYpO1xuXHRcblx0LyoqXG5cdCAqIENhc3RzIGB2YWx1ZWAgdG8gYSBwYXRoIGFycmF5IGlmIGl0J3Mgbm90IG9uZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gaW5zcGVjdC5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBjYXN0IHByb3BlcnR5IHBhdGggYXJyYXkuXG5cdCAqL1xuXHRmdW5jdGlvbiBjYXN0UGF0aCh2YWx1ZSkge1xuXHQgIHJldHVybiBpc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogc3RyaW5nVG9QYXRoKHZhbHVlKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBjYXN0UGF0aDtcblxuXG4vKioqLyB9LFxuLyogMzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBTZXRDYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oOTApLFxuXHQgICAgYXJyYXlTb21lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NCk7XG5cdFxuXHQvKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cblx0dmFyIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgPSAxLFxuXHQgICAgUEFSVElBTF9DT01QQVJFX0ZMQUcgPSAyO1xuXHRcblx0LyoqXG5cdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgYXJyYXlzIHdpdGggc3VwcG9ydCBmb3Jcblx0ICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtBcnJheX0gb3RoZXIgVGhlIG90aGVyIGFycmF5IHRvIGNvbXBhcmUuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYFxuXHQgKiAgZm9yIG1vcmUgZGV0YWlscy5cblx0ICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYGFycmF5YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGFycmF5cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZXF1YWxBcnJheXMoYXJyYXksIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSB7XG5cdCAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRyxcblx0ICAgICAgYXJyTGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuXHQgICAgICBvdGhMZW5ndGggPSBvdGhlci5sZW5ndGg7XG5cdFxuXHQgIGlmIChhcnJMZW5ndGggIT0gb3RoTGVuZ3RoICYmICEoaXNQYXJ0aWFsICYmIG90aExlbmd0aCA+IGFyckxlbmd0aCkpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuXHQgIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KGFycmF5KTtcblx0ICBpZiAoc3RhY2tlZCkge1xuXHQgICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG5cdCAgfVxuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICByZXN1bHQgPSB0cnVlLFxuXHQgICAgICBzZWVuID0gKGJpdG1hc2sgJiBVTk9SREVSRURfQ09NUEFSRV9GTEFHKSA/IG5ldyBTZXRDYWNoZSA6IHVuZGVmaW5lZDtcblx0XG5cdCAgc3RhY2suc2V0KGFycmF5LCBvdGhlcik7XG5cdFxuXHQgIC8vIElnbm9yZSBub24taW5kZXggcHJvcGVydGllcy5cblx0ICB3aGlsZSAoKytpbmRleCA8IGFyckxlbmd0aCkge1xuXHQgICAgdmFyIGFyclZhbHVlID0gYXJyYXlbaW5kZXhdLFxuXHQgICAgICAgIG90aFZhbHVlID0gb3RoZXJbaW5kZXhdO1xuXHRcblx0ICAgIGlmIChjdXN0b21pemVyKSB7XG5cdCAgICAgIHZhciBjb21wYXJlZCA9IGlzUGFydGlhbFxuXHQgICAgICAgID8gY3VzdG9taXplcihvdGhWYWx1ZSwgYXJyVmFsdWUsIGluZGV4LCBvdGhlciwgYXJyYXksIHN0YWNrKVxuXHQgICAgICAgIDogY3VzdG9taXplcihhcnJWYWx1ZSwgb3RoVmFsdWUsIGluZGV4LCBhcnJheSwgb3RoZXIsIHN0YWNrKTtcblx0ICAgIH1cblx0ICAgIGlmIChjb21wYXJlZCAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGlmIChjb21wYXJlZCkge1xuXHQgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICB9XG5cdCAgICAgIHJlc3VsdCA9IGZhbHNlO1xuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgYXJyYXlzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG5cdCAgICBpZiAoc2Vlbikge1xuXHQgICAgICBpZiAoIWFycmF5U29tZShvdGhlciwgZnVuY3Rpb24ob3RoVmFsdWUsIG90aEluZGV4KSB7XG5cdCAgICAgICAgICAgIGlmICghc2Vlbi5oYXMob3RoSW5kZXgpICYmXG5cdCAgICAgICAgICAgICAgICAoYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSkpIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gc2Vlbi5hZGQob3RoSW5kZXgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KSkge1xuXHQgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKCEoXG5cdCAgICAgICAgICBhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHxcblx0ICAgICAgICAgICAgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spXG5cdCAgICAgICAgKSkge1xuXHQgICAgICByZXN1bHQgPSBmYWxzZTtcblx0ICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHN0YWNrWydkZWxldGUnXShhcnJheSk7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBlcXVhbEFycmF5cztcblxuXG4vKioqLyB9LFxuLyogMzEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIGhvc3Qgb2JqZWN0IGluIElFIDwgOS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgaG9zdCBvYmplY3QsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzSG9zdE9iamVjdCh2YWx1ZSkge1xuXHQgIC8vIE1hbnkgaG9zdCBvYmplY3RzIGFyZSBgT2JqZWN0YCBvYmplY3RzIHRoYXQgY2FuIGNvZXJjZSB0byBzdHJpbmdzXG5cdCAgLy8gZGVzcGl0ZSBoYXZpbmcgaW1wcm9wZXJseSBkZWZpbmVkIGB0b1N0cmluZ2AgbWV0aG9kcy5cblx0ICB2YXIgcmVzdWx0ID0gZmFsc2U7XG5cdCAgaWYgKHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlLnRvU3RyaW5nICE9ICdmdW5jdGlvbicpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJlc3VsdCA9ICEhKHZhbHVlICsgJycpO1xuXHQgICAgfSBjYXRjaCAoZSkge31cblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0hvc3RPYmplY3Q7XG5cblxuLyoqKi8gfSxcbi8qIDMyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cblx0dmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqL1xuXHR2YXIgcmVJc1VpbnQgPSAvXig/OjB8WzEtOV1cXGQqKSQvO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBpbmRleC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoPU1BWF9TQUZFX0lOVEVHRVJdIFRoZSB1cHBlciBib3VuZHMgb2YgYSB2YWxpZCBpbmRleC5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBpbmRleCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNJbmRleCh2YWx1ZSwgbGVuZ3RoKSB7XG5cdCAgbGVuZ3RoID0gbGVuZ3RoID09IG51bGwgPyBNQVhfU0FGRV9JTlRFR0VSIDogbGVuZ3RoO1xuXHQgIHJldHVybiAhIWxlbmd0aCAmJlxuXHQgICAgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyB8fCByZUlzVWludC50ZXN0KHZhbHVlKSkgJiZcblx0ICAgICh2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0luZGV4O1xuXG5cbi8qKiovIH0sXG4vKiAzMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSBmb3Igc3RyaWN0IGVxdWFsaXR5IGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaWYgc3VpdGFibGUgZm9yIHN0cmljdFxuXHQgKiAgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzU3RyaWN0Q29tcGFyYWJsZSh2YWx1ZSkge1xuXHQgIHJldHVybiB2YWx1ZSA9PT0gdmFsdWUgJiYgIWlzT2JqZWN0KHZhbHVlKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc1N0cmljdENvbXBhcmFibGU7XG5cblxuLyoqKi8gfSxcbi8qIDM0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBtYXRjaGVzUHJvcGVydHlgIGZvciBzb3VyY2UgdmFsdWVzIHN1aXRhYmxlXG5cdCAqIGZvciBzdHJpY3QgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcGFyYW0geyp9IHNyY1ZhbHVlIFRoZSB2YWx1ZSB0byBtYXRjaC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgc3BlYyBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlKGtleSwgc3JjVmFsdWUpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG5cdCAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG9iamVjdFtrZXldID09PSBzcmNWYWx1ZSAmJlxuXHQgICAgICAoc3JjVmFsdWUgIT09IHVuZGVmaW5lZCB8fCAoa2V5IGluIE9iamVjdChvYmplY3QpKSk7XG5cdCAgfTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZTtcblxuXG4vKioqLyB9LFxuLyogMzUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGRlY29tcGlsZWQgc291cmNlIG9mIGZ1bmN0aW9ucy4gKi9cblx0dmFyIGZ1bmNUb1N0cmluZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZztcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgZnVuY2AgdG8gaXRzIHNvdXJjZSBjb2RlLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBwcm9jZXNzLlxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzb3VyY2UgY29kZS5cblx0ICovXG5cdGZ1bmN0aW9uIHRvU291cmNlKGZ1bmMpIHtcblx0ICBpZiAoZnVuYyAhPSBudWxsKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICByZXR1cm4gZnVuY1RvU3RyaW5nLmNhbGwoZnVuYyk7XG5cdCAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgdHJ5IHtcblx0ICAgICAgcmV0dXJuIChmdW5jICsgJycpO1xuXHQgICAgfSBjYXRjaCAoZSkge31cblx0ICB9XG5cdCAgcmV0dXJuICcnO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHRvU291cmNlO1xuXG5cbi8qKiovIH0sXG4vKiAzNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VEZWxheSA9IF9fd2VicGFja19yZXF1aXJlX18oOTUpLFxuXHQgICAgcmVzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTU4KTtcblx0XG5cdC8qKlxuXHQgKiBEZWZlcnMgaW52b2tpbmcgdGhlIGBmdW5jYCB1bnRpbCB0aGUgY3VycmVudCBjYWxsIHN0YWNrIGhhcyBjbGVhcmVkLiBBbnlcblx0ICogYWRkaXRpb25hbCBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIHRvIGBmdW5jYCB3aGVuIGl0J3MgaW52b2tlZC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMC4xLjBcblx0ICogQGNhdGVnb3J5IEZ1bmN0aW9uXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlZmVyLlxuXHQgKiBAcGFyYW0gey4uLip9IFthcmdzXSBUaGUgYXJndW1lbnRzIHRvIGludm9rZSBgZnVuY2Agd2l0aC5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXIgaWQuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uZGVmZXIoZnVuY3Rpb24odGV4dCkge1xuXHQgKiAgIGNvbnNvbGUubG9nKHRleHQpO1xuXHQgKiB9LCAnZGVmZXJyZWQnKTtcblx0ICogLy8gPT4gTG9ncyAnZGVmZXJyZWQnIGFmdGVyIG9uZSBvciBtb3JlIG1pbGxpc2Vjb25kcy5cblx0ICovXG5cdHZhciBkZWZlciA9IHJlc3QoZnVuY3Rpb24oZnVuYywgYXJncykge1xuXHQgIHJldHVybiBiYXNlRGVsYXkoZnVuYywgMSwgYXJncyk7XG5cdH0pO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBkZWZlcjtcblxuXG4vKioqLyB9LFxuLyogMzcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc0FycmF5TGlrZU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTUzKTtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJztcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlXG5cdCAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xuXHR2YXIgcHJvcGVydHlJc0VudW1lcmFibGUgPSBvYmplY3RQcm90by5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsXG5cdCAqICBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNBcmd1bWVudHMoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0FyZ3VtZW50cyhbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNBcmd1bWVudHModmFsdWUpIHtcblx0ICAvLyBTYWZhcmkgOC4xIGluY29ycmVjdGx5IG1ha2VzIGBhcmd1bWVudHMuY2FsbGVlYCBlbnVtZXJhYmxlIGluIHN0cmljdCBtb2RlLlxuXHQgIHJldHVybiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkgJiYgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpICYmXG5cdCAgICAoIXByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodmFsdWUsICdjYWxsZWUnKSB8fCBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBhcmdzVGFnKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0FyZ3VtZW50cztcblxuXG4vKioqLyB9LFxuLyogMzggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXRMZW5ndGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMiksXG5cdCAgICBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCksXG5cdCAgICBpc0xlbmd0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UuIEEgdmFsdWUgaXMgY29uc2lkZXJlZCBhcnJheS1saWtlIGlmIGl0J3Ncblx0ICogbm90IGEgZnVuY3Rpb24gYW5kIGhhcyBhIGB2YWx1ZS5sZW5ndGhgIHRoYXQncyBhbiBpbnRlZ2VyIGdyZWF0ZXIgdGhhbiBvclxuXHQgKiBlcXVhbCB0byBgMGAgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byBgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJgLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZSwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXlMaWtlKFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0FycmF5TGlrZShkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXlMaWtlKCdhYmMnKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXlMaWtlKF8ubm9vcCk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0FycmF5TGlrZSh2YWx1ZSkge1xuXHQgIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIGlzTGVuZ3RoKGdldExlbmd0aCh2YWx1ZSkpICYmICFpc0Z1bmN0aW9uKHZhbHVlKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0FycmF5TGlrZTtcblxuXG4vKioqLyB9LFxuLyogMzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KSxcblx0ICAgIGlzT2JqZWN0TGlrZSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHQvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG5cdHZhciBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJztcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlXG5cdCAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN0cmluZ2AgcHJpbWl0aXZlIG9yIG9iamVjdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAc2luY2UgMC4xLjBcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzU3RyaW5nKCdhYmMnKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzU3RyaW5nKDEpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHtcblx0ICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzdHJpbmcnIHx8XG5cdCAgICAoIWlzQXJyYXkodmFsdWUpICYmIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3RyaW5nVGFnKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc1N0cmluZztcblxuXG4vKioqLyB9LFxuLyogNDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlSGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNiksXG5cdCAgICBiYXNlS2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTAyKSxcblx0ICAgIGluZGV4S2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIzKSxcblx0ICAgIGlzQXJyYXlMaWtlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCksXG5cdCAgICBpc0luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMiksXG5cdCAgICBpc1Byb3RvdHlwZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTI2KTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC5cblx0ICpcblx0ICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuIFNlZSB0aGVcblx0ICogW0VTIHNwZWNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5rZXlzKVxuXHQgKiBmb3IgbW9yZSBkZXRhaWxzLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgT2JqZWN0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogZnVuY3Rpb24gRm9vKCkge1xuXHQgKiAgIHRoaXMuYSA9IDE7XG5cdCAqICAgdGhpcy5iID0gMjtcblx0ICogfVxuXHQgKlxuXHQgKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuXHQgKlxuXHQgKiBfLmtleXMobmV3IEZvbyk7XG5cdCAqIC8vID0+IFsnYScsICdiJ10gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcblx0ICpcblx0ICogXy5rZXlzKCdoaScpO1xuXHQgKiAvLyA9PiBbJzAnLCAnMSddXG5cdCAqL1xuXHRmdW5jdGlvbiBrZXlzKG9iamVjdCkge1xuXHQgIHZhciBpc1Byb3RvID0gaXNQcm90b3R5cGUob2JqZWN0KTtcblx0ICBpZiAoIShpc1Byb3RvIHx8IGlzQXJyYXlMaWtlKG9iamVjdCkpKSB7XG5cdCAgICByZXR1cm4gYmFzZUtleXMob2JqZWN0KTtcblx0ICB9XG5cdCAgdmFyIGluZGV4ZXMgPSBpbmRleEtleXMob2JqZWN0KSxcblx0ICAgICAgc2tpcEluZGV4ZXMgPSAhIWluZGV4ZXMsXG5cdCAgICAgIHJlc3VsdCA9IGluZGV4ZXMgfHwgW10sXG5cdCAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG5cdFxuXHQgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcblx0ICAgIGlmIChiYXNlSGFzKG9iamVjdCwga2V5KSAmJlxuXHQgICAgICAgICEoc2tpcEluZGV4ZXMgJiYgKGtleSA9PSAnbGVuZ3RoJyB8fCBpc0luZGV4KGtleSwgbGVuZ3RoKSkpICYmXG5cdCAgICAgICAgIShpc1Byb3RvICYmIGtleSA9PSAnY29uc3RydWN0b3InKSkge1xuXHQgICAgICByZXN1bHQucHVzaChrZXkpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGtleXM7XG5cblxuLyoqKi8gfSxcbi8qIDQxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgdG9GaW5pdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1OSk7XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBpbnRlZ2VyLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgbG9vc2VseSBiYXNlZCBvblxuXHQgKiBbYFRvSW50ZWdlcmBdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy10b2ludGVnZXIpLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgaW50ZWdlci5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy50b0ludGVnZXIoMy4yKTtcblx0ICogLy8gPT4gM1xuXHQgKlxuXHQgKiBfLnRvSW50ZWdlcihOdW1iZXIuTUlOX1ZBTFVFKTtcblx0ICogLy8gPT4gMFxuXHQgKlxuXHQgKiBfLnRvSW50ZWdlcihJbmZpbml0eSk7XG5cdCAqIC8vID0+IDEuNzk3NjkzMTM0ODYyMzE1N2UrMzA4XG5cdCAqXG5cdCAqIF8udG9JbnRlZ2VyKCczLjInKTtcblx0ICogLy8gPT4gM1xuXHQgKi9cblx0ZnVuY3Rpb24gdG9JbnRlZ2VyKHZhbHVlKSB7XG5cdCAgdmFyIHJlc3VsdCA9IHRvRmluaXRlKHZhbHVlKSxcblx0ICAgICAgcmVtYWluZGVyID0gcmVzdWx0ICUgMTtcblx0XG5cdCAgcmV0dXJuIHJlc3VsdCA9PT0gcmVzdWx0ID8gKHJlbWFpbmRlciA/IHJlc3VsdCAtIHJlbWFpbmRlciA6IHJlc3VsdCkgOiAwO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHRvSW50ZWdlcjtcblxuXG4vKioqLyB9LFxuLyogNDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCksXG5cdCAgICBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNyksXG5cdCAgICBpc1N5bWJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHRcblx0LyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG5cdHZhciBOQU4gPSAwIC8gMDtcblx0XG5cdC8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG5cdHZhciByZVRyaW0gPSAvXlxccyt8XFxzKyQvZztcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG5cdHZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG5cdHZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG5cdHZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pO1xuXHRcblx0LyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cblx0dmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG51bWJlci5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy50b051bWJlcigzLjIpO1xuXHQgKiAvLyA9PiAzLjJcblx0ICpcblx0ICogXy50b051bWJlcihOdW1iZXIuTUlOX1ZBTFVFKTtcblx0ICogLy8gPT4gNWUtMzI0XG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoSW5maW5pdHkpO1xuXHQgKiAvLyA9PiBJbmZpbml0eVxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKCczLjInKTtcblx0ICogLy8gPT4gMy4yXG5cdCAqL1xuXHRmdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuXHQgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdCAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuXHQgICAgcmV0dXJuIE5BTjtcblx0ICB9XG5cdCAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuXHQgICAgdmFyIG90aGVyID0gaXNGdW5jdGlvbih2YWx1ZS52YWx1ZU9mKSA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuXHQgICAgdmFsdWUgPSBpc09iamVjdChvdGhlcikgPyAob3RoZXIgKyAnJykgOiBvdGhlcjtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG5cdCAgfVxuXHQgIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcblx0ICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuXHQgIHJldHVybiAoaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpKVxuXHQgICAgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpXG5cdCAgICA6IChyZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB0b051bWJlcjtcblxuXG4vKioqLyB9LFxuLyogNDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwsIHByb2Nlc3MpIHsvKiFcblx0ICogVnVlLmpzIHYxLjAuMjZcblx0ICogKGMpIDIwMTYgRXZhbiBZb3Vcblx0ICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZnVuY3Rpb24gc2V0KG9iaiwga2V5LCB2YWwpIHtcblx0ICBpZiAoaGFzT3duKG9iaiwga2V5KSkge1xuXHQgICAgb2JqW2tleV0gPSB2YWw7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIGlmIChvYmouX2lzVnVlKSB7XG5cdCAgICBzZXQob2JqLl9kYXRhLCBrZXksIHZhbCk7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBvYiA9IG9iai5fX29iX187XG5cdCAgaWYgKCFvYikge1xuXHQgICAgb2JqW2tleV0gPSB2YWw7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIG9iLmNvbnZlcnQoa2V5LCB2YWwpO1xuXHQgIG9iLmRlcC5ub3RpZnkoKTtcblx0ICBpZiAob2Iudm1zKSB7XG5cdCAgICB2YXIgaSA9IG9iLnZtcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhciB2bSA9IG9iLnZtc1tpXTtcblx0ICAgICAgdm0uX3Byb3h5KGtleSk7XG5cdCAgICAgIHZtLl9kaWdlc3QoKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHZhbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIERlbGV0ZSBhIHByb3BlcnR5IGFuZCB0cmlnZ2VyIGNoYW5nZSBpZiBuZWNlc3NhcnkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGRlbChvYmosIGtleSkge1xuXHQgIGlmICghaGFzT3duKG9iaiwga2V5KSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBkZWxldGUgb2JqW2tleV07XG5cdCAgdmFyIG9iID0gb2JqLl9fb2JfXztcblx0ICBpZiAoIW9iKSB7XG5cdCAgICBpZiAob2JqLl9pc1Z1ZSkge1xuXHQgICAgICBkZWxldGUgb2JqLl9kYXRhW2tleV07XG5cdCAgICAgIG9iai5fZGlnZXN0KCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIG9iLmRlcC5ub3RpZnkoKTtcblx0ICBpZiAob2Iudm1zKSB7XG5cdCAgICB2YXIgaSA9IG9iLnZtcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhciB2bSA9IG9iLnZtc1tpXTtcblx0ICAgICAgdm0uX3VucHJveHkoa2V5KTtcblx0ICAgICAgdm0uX2RpZ2VzdCgpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblx0LyoqXG5cdCAqIENoZWNrIHdoZXRoZXIgdGhlIG9iamVjdCBoYXMgdGhlIHByb3BlcnR5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBoYXNPd24ob2JqLCBrZXkpIHtcblx0ICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBleHByZXNzaW9uIGlzIGEgbGl0ZXJhbCB2YWx1ZS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdHZhciBsaXRlcmFsVmFsdWVSRSA9IC9eXFxzPyh0cnVlfGZhbHNlfC0/W1xcZFxcLl0rfCdbXiddKid8XCJbXlwiXSpcIilcXHM/JC87XG5cdFxuXHRmdW5jdGlvbiBpc0xpdGVyYWwoZXhwKSB7XG5cdCAgcmV0dXJuIGxpdGVyYWxWYWx1ZVJFLnRlc3QoZXhwKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGEgc3RyaW5nIHN0YXJ0cyB3aXRoICQgb3IgX1xuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNSZXNlcnZlZChzdHIpIHtcblx0ICB2YXIgYyA9IChzdHIgKyAnJykuY2hhckNvZGVBdCgwKTtcblx0ICByZXR1cm4gYyA9PT0gMHgyNCB8fCBjID09PSAweDVGO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR3VhcmQgdGV4dCBvdXRwdXQsIG1ha2Ugc3VyZSB1bmRlZmluZWQgb3V0cHV0c1xuXHQgKiBlbXB0eSBzdHJpbmdcblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gX3RvU3RyaW5nKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlLnRvU3RyaW5nKCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBhbmQgY29udmVydCBwb3NzaWJsZSBudW1lcmljIHN0cmluZ3MgdG8gbnVtYmVyc1xuXHQgKiBiZWZvcmUgc2V0dGluZyBiYWNrIHRvIGRhdGFcblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHsqfE51bWJlcn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuXHQgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBwYXJzZWQgPSBOdW1iZXIodmFsdWUpO1xuXHQgICAgcmV0dXJuIGlzTmFOKHBhcnNlZCkgPyB2YWx1ZSA6IHBhcnNlZDtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IHN0cmluZyBib29sZWFuIGxpdGVyYWxzIGludG8gcmVhbCBib29sZWFucy5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHsqfEJvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdG9Cb29sZWFuKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlID09PSAndHJ1ZScgPyB0cnVlIDogdmFsdWUgPT09ICdmYWxzZScgPyBmYWxzZSA6IHZhbHVlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU3RyaXAgcXVvdGVzIGZyb20gYSBzdHJpbmdcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtTdHJpbmcgfCBmYWxzZX1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzdHJpcFF1b3RlcyhzdHIpIHtcblx0ICB2YXIgYSA9IHN0ci5jaGFyQ29kZUF0KDApO1xuXHQgIHZhciBiID0gc3RyLmNoYXJDb2RlQXQoc3RyLmxlbmd0aCAtIDEpO1xuXHQgIHJldHVybiBhID09PSBiICYmIChhID09PSAweDIyIHx8IGEgPT09IDB4MjcpID8gc3RyLnNsaWNlKDEsIC0xKSA6IHN0cjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENhbWVsaXplIGEgaHlwaGVuLWRlbG1pdGVkIHN0cmluZy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0dmFyIGNhbWVsaXplUkUgPSAvLShcXHcpL2c7XG5cdFxuXHRmdW5jdGlvbiBjYW1lbGl6ZShzdHIpIHtcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UoY2FtZWxpemVSRSwgdG9VcHBlcik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvVXBwZXIoXywgYykge1xuXHQgIHJldHVybiBjID8gYy50b1VwcGVyQ2FzZSgpIDogJyc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBIeXBoZW5hdGUgYSBjYW1lbENhc2Ugc3RyaW5nLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHR2YXIgaHlwaGVuYXRlUkUgPSAvKFthLXpcXGRdKShbQS1aXSkvZztcblx0XG5cdGZ1bmN0aW9uIGh5cGhlbmF0ZShzdHIpIHtcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UoaHlwaGVuYXRlUkUsICckMS0kMicpLnRvTG93ZXJDYXNlKCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBoeXBoZW4vdW5kZXJzY29yZS9zbGFzaCBkZWxpbWl0ZXJlZCBuYW1lcyBpbnRvXG5cdCAqIGNhbWVsaXplZCBjbGFzc05hbWVzLlxuXHQgKlxuXHQgKiBlLmcuIG15LWNvbXBvbmVudCA9PiBNeUNvbXBvbmVudFxuXHQgKiAgICAgIHNvbWVfZWxzZSAgICA9PiBTb21lRWxzZVxuXHQgKiAgICAgIHNvbWUvY29tcCAgICA9PiBTb21lQ29tcFxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHR2YXIgY2xhc3NpZnlSRSA9IC8oPzpefFstX1xcL10pKFxcdykvZztcblx0XG5cdGZ1bmN0aW9uIGNsYXNzaWZ5KHN0cikge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZShjbGFzc2lmeVJFLCB0b1VwcGVyKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFNpbXBsZSBiaW5kLCBmYXN0ZXIgdGhhbiBuYXRpdmVcblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICogQHBhcmFtIHtPYmplY3R9IGN0eFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBiaW5kKGZuLCBjdHgpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gKGEpIHtcblx0ICAgIHZhciBsID0gYXJndW1lbnRzLmxlbmd0aDtcblx0ICAgIHJldHVybiBsID8gbCA+IDEgPyBmbi5hcHBseShjdHgsIGFyZ3VtZW50cykgOiBmbi5jYWxsKGN0eCwgYSkgOiBmbi5jYWxsKGN0eCk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgYW4gQXJyYXktbGlrZSBvYmplY3QgdG8gYSByZWFsIEFycmF5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5LWxpa2V9IGxpc3Rcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtzdGFydF0gLSBzdGFydCBpbmRleFxuXHQgKiBAcmV0dXJuIHtBcnJheX1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0b0FycmF5KGxpc3QsIHN0YXJ0KSB7XG5cdCAgc3RhcnQgPSBzdGFydCB8fCAwO1xuXHQgIHZhciBpID0gbGlzdC5sZW5ndGggLSBzdGFydDtcblx0ICB2YXIgcmV0ID0gbmV3IEFycmF5KGkpO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHJldFtpXSA9IGxpc3RbaSArIHN0YXJ0XTtcblx0ICB9XG5cdCAgcmV0dXJuIHJldDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIE1peCBwcm9wZXJ0aWVzIGludG8gdGFyZ2V0IG9iamVjdC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHRvXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBmcm9tXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZXh0ZW5kKHRvLCBmcm9tKSB7XG5cdCAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhmcm9tKTtcblx0ICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHRvW2tleXNbaV1dID0gZnJvbVtrZXlzW2ldXTtcblx0ICB9XG5cdCAgcmV0dXJuIHRvO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUXVpY2sgb2JqZWN0IGNoZWNrIC0gdGhpcyBpcyBwcmltYXJpbHkgdXNlZCB0byB0ZWxsXG5cdCAqIE9iamVjdHMgZnJvbSBwcmltaXRpdmUgdmFsdWVzIHdoZW4gd2Uga25vdyB0aGUgdmFsdWVcblx0ICogaXMgYSBKU09OLWNvbXBsaWFudCB0eXBlLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IG9ialxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xuXHQgIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTdHJpY3Qgb2JqZWN0IHR5cGUgY2hlY2suIE9ubHkgcmV0dXJucyB0cnVlXG5cdCAqIGZvciBwbGFpbiBKYXZhU2NyaXB0IG9iamVjdHMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gb2JqXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0dmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblx0dmFyIE9CSkVDVF9TVFJJTkcgPSAnW29iamVjdCBPYmplY3RdJztcblx0XG5cdGZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qob2JqKSB7XG5cdCAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gT0JKRUNUX1NUUklORztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFycmF5IHR5cGUgY2hlY2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gb2JqXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0dmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXHRcblx0LyoqXG5cdCAqIERlZmluZSBhIHByb3BlcnR5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICogQHBhcmFtIHtCb29sZWFufSBbZW51bWVyYWJsZV1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkZWYob2JqLCBrZXksIHZhbCwgZW51bWVyYWJsZSkge1xuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuXHQgICAgdmFsdWU6IHZhbCxcblx0ICAgIGVudW1lcmFibGU6ICEhZW51bWVyYWJsZSxcblx0ICAgIHdyaXRhYmxlOiB0cnVlLFxuXHQgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZWJvdW5jZSBhIGZ1bmN0aW9uIHNvIGl0IG9ubHkgZ2V0cyBjYWxsZWQgYWZ0ZXIgdGhlXG5cdCAqIGlucHV0IHN0b3BzIGFycml2aW5nIGFmdGVyIHRoZSBnaXZlbiB3YWl0IHBlcmlvZC5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuY1xuXHQgKiBAcGFyYW0ge051bWJlcn0gd2FpdFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gX2RlYm91bmNlKGZ1bmMsIHdhaXQpIHtcblx0ICB2YXIgdGltZW91dCwgYXJncywgY29udGV4dCwgdGltZXN0YW1wLCByZXN1bHQ7XG5cdCAgdmFyIGxhdGVyID0gZnVuY3Rpb24gbGF0ZXIoKSB7XG5cdCAgICB2YXIgbGFzdCA9IERhdGUubm93KCkgLSB0aW1lc3RhbXA7XG5cdCAgICBpZiAobGFzdCA8IHdhaXQgJiYgbGFzdCA+PSAwKSB7XG5cdCAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0IC0gbGFzdCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aW1lb3V0ID0gbnVsbDtcblx0ICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcblx0ICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG5cdCAgICB9XG5cdCAgfTtcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgY29udGV4dCA9IHRoaXM7XG5cdCAgICBhcmdzID0gYXJndW1lbnRzO1xuXHQgICAgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcblx0ICAgIGlmICghdGltZW91dCkge1xuXHQgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNYW51YWwgaW5kZXhPZiBiZWNhdXNlIGl0J3Mgc2xpZ2h0bHkgZmFzdGVyIHRoYW5cblx0ICogbmF0aXZlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJcblx0ICogQHBhcmFtIHsqfSBvYmpcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpbmRleE9mKGFyciwgb2JqKSB7XG5cdCAgdmFyIGkgPSBhcnIubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGlmIChhcnJbaV0gPT09IG9iaikgcmV0dXJuIGk7XG5cdCAgfVxuXHQgIHJldHVybiAtMTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIE1ha2UgYSBjYW5jZWxsYWJsZSB2ZXJzaW9uIG9mIGFuIGFzeW5jIGNhbGxiYWNrLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjYW5jZWxsYWJsZShmbikge1xuXHQgIHZhciBjYiA9IGZ1bmN0aW9uIGNiKCkge1xuXHQgICAgaWYgKCFjYi5jYW5jZWxsZWQpIHtcblx0ICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgfTtcblx0ICBjYi5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBjYi5jYW5jZWxsZWQgPSB0cnVlO1xuXHQgIH07XG5cdCAgcmV0dXJuIGNiO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgdHdvIHZhbHVlcyBhcmUgbG9vc2VseSBlcXVhbCAtIHRoYXQgaXMsXG5cdCAqIGlmIHRoZXkgYXJlIHBsYWluIG9iamVjdHMsIGRvIHRoZXkgaGF2ZSB0aGUgc2FtZSBzaGFwZT9cblx0ICpcblx0ICogQHBhcmFtIHsqfSBhXG5cdCAqIEBwYXJhbSB7Kn0gYlxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGxvb3NlRXF1YWwoYSwgYikge1xuXHQgIC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuXHQgIHJldHVybiBhID09IGIgfHwgKGlzT2JqZWN0KGEpICYmIGlzT2JqZWN0KGIpID8gSlNPTi5zdHJpbmdpZnkoYSkgPT09IEpTT04uc3RyaW5naWZ5KGIpIDogZmFsc2UpO1xuXHQgIC8qIGVzbGludC1lbmFibGUgZXFlcWVxICovXG5cdH1cblx0XG5cdHZhciBoYXNQcm90byA9ICgnX19wcm90b19fJyBpbiB7fSk7XG5cdFxuXHQvLyBCcm93c2VyIGVudmlyb25tZW50IHNuaWZmaW5nXG5cdHZhciBpbkJyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwod2luZG93KSAhPT0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cdFxuXHQvLyBkZXRlY3QgZGV2dG9vbHNcblx0dmFyIGRldnRvb2xzID0gaW5Ccm93c2VyICYmIHdpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO1xuXHRcblx0Ly8gVUEgc25pZmZpbmcgZm9yIHdvcmtpbmcgYXJvdW5kIGJyb3dzZXItc3BlY2lmaWMgcXVpcmtzXG5cdHZhciBVQSA9IGluQnJvd3NlciAmJiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuXHR2YXIgaXNJRSA9IFVBICYmIFVBLmluZGV4T2YoJ3RyaWRlbnQnKSA+IDA7XG5cdHZhciBpc0lFOSA9IFVBICYmIFVBLmluZGV4T2YoJ21zaWUgOS4wJykgPiAwO1xuXHR2YXIgaXNBbmRyb2lkID0gVUEgJiYgVUEuaW5kZXhPZignYW5kcm9pZCcpID4gMDtcblx0dmFyIGlzSW9zID0gVUEgJiYgLyhpcGhvbmV8aXBhZHxpcG9kfGlvcykvaS50ZXN0KFVBKTtcblx0dmFyIGlvc1ZlcnNpb25NYXRjaCA9IGlzSW9zICYmIFVBLm1hdGNoKC9vcyAoW1xcZF9dKykvKTtcblx0dmFyIGlvc1ZlcnNpb24gPSBpb3NWZXJzaW9uTWF0Y2ggJiYgaW9zVmVyc2lvbk1hdGNoWzFdLnNwbGl0KCdfJyk7XG5cdFxuXHQvLyBkZXRlY3RpbmcgaU9TIFVJV2ViVmlldyBieSBpbmRleGVkREJcblx0dmFyIGhhc011dGF0aW9uT2JzZXJ2ZXJCdWcgPSBpb3NWZXJzaW9uICYmIE51bWJlcihpb3NWZXJzaW9uWzBdKSA+PSA5ICYmIE51bWJlcihpb3NWZXJzaW9uWzFdKSA+PSAzICYmICF3aW5kb3cuaW5kZXhlZERCO1xuXHRcblx0dmFyIHRyYW5zaXRpb25Qcm9wID0gdW5kZWZpbmVkO1xuXHR2YXIgdHJhbnNpdGlvbkVuZEV2ZW50ID0gdW5kZWZpbmVkO1xuXHR2YXIgYW5pbWF0aW9uUHJvcCA9IHVuZGVmaW5lZDtcblx0dmFyIGFuaW1hdGlvbkVuZEV2ZW50ID0gdW5kZWZpbmVkO1xuXHRcblx0Ly8gVHJhbnNpdGlvbiBwcm9wZXJ0eS9ldmVudCBzbmlmZmluZ1xuXHRpZiAoaW5Ccm93c2VyICYmICFpc0lFOSkge1xuXHQgIHZhciBpc1dlYmtpdFRyYW5zID0gd2luZG93Lm9udHJhbnNpdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmIHdpbmRvdy5vbndlYmtpdHRyYW5zaXRpb25lbmQgIT09IHVuZGVmaW5lZDtcblx0ICB2YXIgaXNXZWJraXRBbmltID0gd2luZG93Lm9uYW5pbWF0aW9uZW5kID09PSB1bmRlZmluZWQgJiYgd2luZG93Lm9ud2Via2l0YW5pbWF0aW9uZW5kICE9PSB1bmRlZmluZWQ7XG5cdCAgdHJhbnNpdGlvblByb3AgPSBpc1dlYmtpdFRyYW5zID8gJ1dlYmtpdFRyYW5zaXRpb24nIDogJ3RyYW5zaXRpb24nO1xuXHQgIHRyYW5zaXRpb25FbmRFdmVudCA9IGlzV2Via2l0VHJhbnMgPyAnd2Via2l0VHJhbnNpdGlvbkVuZCcgOiAndHJhbnNpdGlvbmVuZCc7XG5cdCAgYW5pbWF0aW9uUHJvcCA9IGlzV2Via2l0QW5pbSA/ICdXZWJraXRBbmltYXRpb24nIDogJ2FuaW1hdGlvbic7XG5cdCAgYW5pbWF0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdEFuaW0gPyAnd2Via2l0QW5pbWF0aW9uRW5kJyA6ICdhbmltYXRpb25lbmQnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGVmZXIgYSB0YXNrIHRvIGV4ZWN1dGUgaXQgYXN5bmNocm9ub3VzbHkuIElkZWFsbHkgdGhpc1xuXHQgKiBzaG91bGQgYmUgZXhlY3V0ZWQgYXMgYSBtaWNyb3Rhc2ssIHNvIHdlIGxldmVyYWdlXG5cdCAqIE11dGF0aW9uT2JzZXJ2ZXIgaWYgaXQncyBhdmFpbGFibGUsIGFuZCBmYWxsYmFjayB0b1xuXHQgKiBzZXRUaW1lb3V0KDApLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKiBAcGFyYW0ge09iamVjdH0gY3R4XG5cdCAqL1xuXHRcblx0dmFyIG5leHRUaWNrID0gKGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgY2FsbGJhY2tzID0gW107XG5cdCAgdmFyIHBlbmRpbmcgPSBmYWxzZTtcblx0ICB2YXIgdGltZXJGdW5jO1xuXHQgIGZ1bmN0aW9uIG5leHRUaWNrSGFuZGxlcigpIHtcblx0ICAgIHBlbmRpbmcgPSBmYWxzZTtcblx0ICAgIHZhciBjb3BpZXMgPSBjYWxsYmFja3Muc2xpY2UoMCk7XG5cdCAgICBjYWxsYmFja3MgPSBbXTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29waWVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGNvcGllc1tpXSgpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyICE9PSAndW5kZWZpbmVkJyAmJiAhaGFzTXV0YXRpb25PYnNlcnZlckJ1Zykge1xuXHQgICAgdmFyIGNvdW50ZXIgPSAxO1xuXHQgICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobmV4dFRpY2tIYW5kbGVyKTtcblx0ICAgIHZhciB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNvdW50ZXIpO1xuXHQgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0ZXh0Tm9kZSwge1xuXHQgICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlXG5cdCAgICB9KTtcblx0ICAgIHRpbWVyRnVuYyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgY291bnRlciA9IChjb3VudGVyICsgMSkgJSAyO1xuXHQgICAgICB0ZXh0Tm9kZS5kYXRhID0gY291bnRlcjtcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIHdlYnBhY2sgYXR0ZW1wdHMgdG8gaW5qZWN0IGEgc2hpbSBmb3Igc2V0SW1tZWRpYXRlXG5cdCAgICAvLyBpZiBpdCBpcyB1c2VkIGFzIGEgZ2xvYmFsLCBzbyB3ZSBoYXZlIHRvIHdvcmsgYXJvdW5kIHRoYXQgdG9cblx0ICAgIC8vIGF2b2lkIGJ1bmRsaW5nIHVubmVjZXNzYXJ5IGNvZGUuXG5cdCAgICB2YXIgY29udGV4dCA9IGluQnJvd3NlciA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDoge307XG5cdCAgICB0aW1lckZ1bmMgPSBjb250ZXh0LnNldEltbWVkaWF0ZSB8fCBzZXRUaW1lb3V0O1xuXHQgIH1cblx0ICByZXR1cm4gZnVuY3Rpb24gKGNiLCBjdHgpIHtcblx0ICAgIHZhciBmdW5jID0gY3R4ID8gZnVuY3Rpb24gKCkge1xuXHQgICAgICBjYi5jYWxsKGN0eCk7XG5cdCAgICB9IDogY2I7XG5cdCAgICBjYWxsYmFja3MucHVzaChmdW5jKTtcblx0ICAgIGlmIChwZW5kaW5nKSByZXR1cm47XG5cdCAgICBwZW5kaW5nID0gdHJ1ZTtcblx0ICAgIHRpbWVyRnVuYyhuZXh0VGlja0hhbmRsZXIsIDApO1xuXHQgIH07XG5cdH0pKCk7XG5cdFxuXHR2YXIgX1NldCA9IHVuZGVmaW5lZDtcblx0LyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdGlmICh0eXBlb2YgU2V0ICE9PSAndW5kZWZpbmVkJyAmJiBTZXQudG9TdHJpbmcoKS5tYXRjaCgvbmF0aXZlIGNvZGUvKSkge1xuXHQgIC8vIHVzZSBuYXRpdmUgU2V0IHdoZW4gYXZhaWxhYmxlLlxuXHQgIF9TZXQgPSBTZXQ7XG5cdH0gZWxzZSB7XG5cdCAgLy8gYSBub24tc3RhbmRhcmQgU2V0IHBvbHlmaWxsIHRoYXQgb25seSB3b3JrcyB3aXRoIHByaW1pdGl2ZSBrZXlzLlxuXHQgIF9TZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgfTtcblx0ICBfU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICByZXR1cm4gdGhpcy5zZXRba2V5XSAhPT0gdW5kZWZpbmVkO1xuXHQgIH07XG5cdCAgX1NldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgdGhpcy5zZXRba2V5XSA9IDE7XG5cdCAgfTtcblx0ICBfU2V0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuc2V0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBDYWNoZShsaW1pdCkge1xuXHQgIHRoaXMuc2l6ZSA9IDA7XG5cdCAgdGhpcy5saW1pdCA9IGxpbWl0O1xuXHQgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IHVuZGVmaW5lZDtcblx0ICB0aGlzLl9rZXltYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHR9XG5cdFxuXHR2YXIgcCA9IENhY2hlLnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBQdXQgPHZhbHVlPiBpbnRvIHRoZSBjYWNoZSBhc3NvY2lhdGVkIHdpdGggPGtleT4uXG5cdCAqIFJldHVybnMgdGhlIGVudHJ5IHdoaWNoIHdhcyByZW1vdmVkIHRvIG1ha2Ugcm9vbSBmb3Jcblx0ICogdGhlIG5ldyBlbnRyeS4gT3RoZXJ3aXNlIHVuZGVmaW5lZCBpcyByZXR1cm5lZC5cblx0ICogKGkuZS4gaWYgdGhlcmUgd2FzIGVub3VnaCByb29tIGFscmVhZHkpLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybiB7RW50cnl8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdHAucHV0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0ICB2YXIgcmVtb3ZlZDtcblx0XG5cdCAgdmFyIGVudHJ5ID0gdGhpcy5nZXQoa2V5LCB0cnVlKTtcblx0ICBpZiAoIWVudHJ5KSB7XG5cdCAgICBpZiAodGhpcy5zaXplID09PSB0aGlzLmxpbWl0KSB7XG5cdCAgICAgIHJlbW92ZWQgPSB0aGlzLnNoaWZ0KCk7XG5cdCAgICB9XG5cdCAgICBlbnRyeSA9IHtcblx0ICAgICAga2V5OiBrZXlcblx0ICAgIH07XG5cdCAgICB0aGlzLl9rZXltYXBba2V5XSA9IGVudHJ5O1xuXHQgICAgaWYgKHRoaXMudGFpbCkge1xuXHQgICAgICB0aGlzLnRhaWwubmV3ZXIgPSBlbnRyeTtcblx0ICAgICAgZW50cnkub2xkZXIgPSB0aGlzLnRhaWw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmhlYWQgPSBlbnRyeTtcblx0ICAgIH1cblx0ICAgIHRoaXMudGFpbCA9IGVudHJ5O1xuXHQgICAgdGhpcy5zaXplKys7XG5cdCAgfVxuXHQgIGVudHJ5LnZhbHVlID0gdmFsdWU7XG5cdFxuXHQgIHJldHVybiByZW1vdmVkO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFB1cmdlIHRoZSBsZWFzdCByZWNlbnRseSB1c2VkIChvbGRlc3QpIGVudHJ5IGZyb20gdGhlXG5cdCAqIGNhY2hlLiBSZXR1cm5zIHRoZSByZW1vdmVkIGVudHJ5IG9yIHVuZGVmaW5lZCBpZiB0aGVcblx0ICogY2FjaGUgd2FzIGVtcHR5LlxuXHQgKi9cblx0XG5cdHAuc2hpZnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGVudHJ5ID0gdGhpcy5oZWFkO1xuXHQgIGlmIChlbnRyeSkge1xuXHQgICAgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5ld2VyO1xuXHQgICAgdGhpcy5oZWFkLm9sZGVyID0gdW5kZWZpbmVkO1xuXHQgICAgZW50cnkubmV3ZXIgPSBlbnRyeS5vbGRlciA9IHVuZGVmaW5lZDtcblx0ICAgIHRoaXMuX2tleW1hcFtlbnRyeS5rZXldID0gdW5kZWZpbmVkO1xuXHQgICAgdGhpcy5zaXplLS07XG5cdCAgfVxuXHQgIHJldHVybiBlbnRyeTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBHZXQgYW5kIHJlZ2lzdGVyIHJlY2VudCB1c2Ugb2YgPGtleT4uIFJldHVybnMgdGhlIHZhbHVlXG5cdCAqIGFzc29jaWF0ZWQgd2l0aCA8a2V5PiBvciB1bmRlZmluZWQgaWYgbm90IGluIGNhY2hlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gcmV0dXJuRW50cnlcblx0ICogQHJldHVybiB7RW50cnl8Kn1cblx0ICovXG5cdFxuXHRwLmdldCA9IGZ1bmN0aW9uIChrZXksIHJldHVybkVudHJ5KSB7XG5cdCAgdmFyIGVudHJ5ID0gdGhpcy5fa2V5bWFwW2tleV07XG5cdCAgaWYgKGVudHJ5ID09PSB1bmRlZmluZWQpIHJldHVybjtcblx0ICBpZiAoZW50cnkgPT09IHRoaXMudGFpbCkge1xuXHQgICAgcmV0dXJuIHJldHVybkVudHJ5ID8gZW50cnkgOiBlbnRyeS52YWx1ZTtcblx0ICB9XG5cdCAgLy8gSEVBRC0tLS0tLS0tLS0tLS0tVEFJTFxuXHQgIC8vICAgPC5vbGRlciAgIC5uZXdlcj5cblx0ICAvLyAgPC0tLSBhZGQgZGlyZWN0aW9uIC0tXG5cdCAgLy8gICBBICBCICBDICA8RD4gIEVcblx0ICBpZiAoZW50cnkubmV3ZXIpIHtcblx0ICAgIGlmIChlbnRyeSA9PT0gdGhpcy5oZWFkKSB7XG5cdCAgICAgIHRoaXMuaGVhZCA9IGVudHJ5Lm5ld2VyO1xuXHQgICAgfVxuXHQgICAgZW50cnkubmV3ZXIub2xkZXIgPSBlbnRyeS5vbGRlcjsgLy8gQyA8LS0gRS5cblx0ICB9XG5cdCAgaWYgKGVudHJ5Lm9sZGVyKSB7XG5cdCAgICBlbnRyeS5vbGRlci5uZXdlciA9IGVudHJ5Lm5ld2VyOyAvLyBDLiAtLT4gRVxuXHQgIH1cblx0ICBlbnRyeS5uZXdlciA9IHVuZGVmaW5lZDsgLy8gRCAtLXhcblx0ICBlbnRyeS5vbGRlciA9IHRoaXMudGFpbDsgLy8gRC4gLS0+IEVcblx0ICBpZiAodGhpcy50YWlsKSB7XG5cdCAgICB0aGlzLnRhaWwubmV3ZXIgPSBlbnRyeTsgLy8gRS4gPC0tIERcblx0ICB9XG5cdCAgdGhpcy50YWlsID0gZW50cnk7XG5cdCAgcmV0dXJuIHJldHVybkVudHJ5ID8gZW50cnkgOiBlbnRyeS52YWx1ZTtcblx0fTtcblx0XG5cdHZhciBjYWNoZSQxID0gbmV3IENhY2hlKDEwMDApO1xuXHR2YXIgZmlsdGVyVG9rZW5SRSA9IC9bXlxccydcIl0rfCdbXiddKid8XCJbXlwiXSpcIi9nO1xuXHR2YXIgcmVzZXJ2ZWRBcmdSRSA9IC9eaW4kfF4tP1xcZCsvO1xuXHRcblx0LyoqXG5cdCAqIFBhcnNlciBzdGF0ZVxuXHQgKi9cblx0XG5cdHZhciBzdHI7XG5cdHZhciBkaXI7XG5cdHZhciBjO1xuXHR2YXIgcHJldjtcblx0dmFyIGk7XG5cdHZhciBsO1xuXHR2YXIgbGFzdEZpbHRlckluZGV4O1xuXHR2YXIgaW5TaW5nbGU7XG5cdHZhciBpbkRvdWJsZTtcblx0dmFyIGN1cmx5O1xuXHR2YXIgc3F1YXJlO1xuXHR2YXIgcGFyZW47XG5cdC8qKlxuXHQgKiBQdXNoIGEgZmlsdGVyIHRvIHRoZSBjdXJyZW50IGRpcmVjdGl2ZSBvYmplY3Rcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwdXNoRmlsdGVyKCkge1xuXHQgIHZhciBleHAgPSBzdHIuc2xpY2UobGFzdEZpbHRlckluZGV4LCBpKS50cmltKCk7XG5cdCAgdmFyIGZpbHRlcjtcblx0ICBpZiAoZXhwKSB7XG5cdCAgICBmaWx0ZXIgPSB7fTtcblx0ICAgIHZhciB0b2tlbnMgPSBleHAubWF0Y2goZmlsdGVyVG9rZW5SRSk7XG5cdCAgICBmaWx0ZXIubmFtZSA9IHRva2Vuc1swXTtcblx0ICAgIGlmICh0b2tlbnMubGVuZ3RoID4gMSkge1xuXHQgICAgICBmaWx0ZXIuYXJncyA9IHRva2Vucy5zbGljZSgxKS5tYXAocHJvY2Vzc0ZpbHRlckFyZyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmIChmaWx0ZXIpIHtcblx0ICAgIChkaXIuZmlsdGVycyA9IGRpci5maWx0ZXJzIHx8IFtdKS5wdXNoKGZpbHRlcik7XG5cdCAgfVxuXHQgIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gYXJndW1lbnQgaXMgZHluYW1pYyBhbmQgc3RyaXAgcXVvdGVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gYXJnXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzRmlsdGVyQXJnKGFyZykge1xuXHQgIGlmIChyZXNlcnZlZEFyZ1JFLnRlc3QoYXJnKSkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgdmFsdWU6IHRvTnVtYmVyKGFyZyksXG5cdCAgICAgIGR5bmFtaWM6IGZhbHNlXG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgc3RyaXBwZWQgPSBzdHJpcFF1b3RlcyhhcmcpO1xuXHQgICAgdmFyIGR5bmFtaWMgPSBzdHJpcHBlZCA9PT0gYXJnO1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgdmFsdWU6IGR5bmFtaWMgPyBhcmcgOiBzdHJpcHBlZCxcblx0ICAgICAgZHluYW1pYzogZHluYW1pY1xuXHQgICAgfTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBhIGRpcmVjdGl2ZSB2YWx1ZSBhbmQgZXh0cmFjdCB0aGUgZXhwcmVzc2lvblxuXHQgKiBhbmQgaXRzIGZpbHRlcnMgaW50byBhIGRlc2NyaXB0b3IuXG5cdCAqXG5cdCAqIEV4YW1wbGU6XG5cdCAqXG5cdCAqIFwiYSArIDEgfCB1cHBlcmNhc2VcIiB3aWxsIHlpZWxkOlxuXHQgKiB7XG5cdCAqICAgZXhwcmVzc2lvbjogJ2EgKyAxJyxcblx0ICogICBmaWx0ZXJzOiBbXG5cdCAqICAgICB7IG5hbWU6ICd1cHBlcmNhc2UnLCBhcmdzOiBudWxsIH1cblx0ICogICBdXG5cdCAqIH1cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHNcblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlRGlyZWN0aXZlKHMpIHtcblx0ICB2YXIgaGl0ID0gY2FjaGUkMS5nZXQocyk7XG5cdCAgaWYgKGhpdCkge1xuXHQgICAgcmV0dXJuIGhpdDtcblx0ICB9XG5cdFxuXHQgIC8vIHJlc2V0IHBhcnNlciBzdGF0ZVxuXHQgIHN0ciA9IHM7XG5cdCAgaW5TaW5nbGUgPSBpbkRvdWJsZSA9IGZhbHNlO1xuXHQgIGN1cmx5ID0gc3F1YXJlID0gcGFyZW4gPSAwO1xuXHQgIGxhc3RGaWx0ZXJJbmRleCA9IDA7XG5cdCAgZGlyID0ge307XG5cdFxuXHQgIGZvciAoaSA9IDAsIGwgPSBzdHIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBwcmV2ID0gYztcblx0ICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcblx0ICAgIGlmIChpblNpbmdsZSkge1xuXHQgICAgICAvLyBjaGVjayBzaW5nbGUgcXVvdGVcblx0ICAgICAgaWYgKGMgPT09IDB4MjcgJiYgcHJldiAhPT0gMHg1QykgaW5TaW5nbGUgPSAhaW5TaW5nbGU7XG5cdCAgICB9IGVsc2UgaWYgKGluRG91YmxlKSB7XG5cdCAgICAgIC8vIGNoZWNrIGRvdWJsZSBxdW90ZVxuXHQgICAgICBpZiAoYyA9PT0gMHgyMiAmJiBwcmV2ICE9PSAweDVDKSBpbkRvdWJsZSA9ICFpbkRvdWJsZTtcblx0ICAgIH0gZWxzZSBpZiAoYyA9PT0gMHg3QyAmJiAvLyBwaXBlXG5cdCAgICBzdHIuY2hhckNvZGVBdChpICsgMSkgIT09IDB4N0MgJiYgc3RyLmNoYXJDb2RlQXQoaSAtIDEpICE9PSAweDdDKSB7XG5cdCAgICAgIGlmIChkaXIuZXhwcmVzc2lvbiA9PSBudWxsKSB7XG5cdCAgICAgICAgLy8gZmlyc3QgZmlsdGVyLCBlbmQgb2YgZXhwcmVzc2lvblxuXHQgICAgICAgIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxO1xuXHQgICAgICAgIGRpci5leHByZXNzaW9uID0gc3RyLnNsaWNlKDAsIGkpLnRyaW0oKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBhbHJlYWR5IGhhcyBmaWx0ZXJcblx0ICAgICAgICBwdXNoRmlsdGVyKCk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN3aXRjaCAoYykge1xuXHQgICAgICAgIGNhc2UgMHgyMjpcblx0ICAgICAgICAgIGluRG91YmxlID0gdHJ1ZTticmVhazsgLy8gXCJcblx0ICAgICAgICBjYXNlIDB4Mjc6XG5cdCAgICAgICAgICBpblNpbmdsZSA9IHRydWU7YnJlYWs7IC8vICdcblx0ICAgICAgICBjYXNlIDB4Mjg6XG5cdCAgICAgICAgICBwYXJlbisrO2JyZWFrOyAvLyAoXG5cdCAgICAgICAgY2FzZSAweDI5OlxuXHQgICAgICAgICAgcGFyZW4tLTticmVhazsgLy8gKVxuXHQgICAgICAgIGNhc2UgMHg1Qjpcblx0ICAgICAgICAgIHNxdWFyZSsrO2JyZWFrOyAvLyBbXG5cdCAgICAgICAgY2FzZSAweDVEOlxuXHQgICAgICAgICAgc3F1YXJlLS07YnJlYWs7IC8vIF1cblx0ICAgICAgICBjYXNlIDB4N0I6XG5cdCAgICAgICAgICBjdXJseSsrO2JyZWFrOyAvLyB7XG5cdCAgICAgICAgY2FzZSAweDdEOlxuXHQgICAgICAgICAgY3VybHktLTticmVhazsgLy8gfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpZiAoZGlyLmV4cHJlc3Npb24gPT0gbnVsbCkge1xuXHQgICAgZGlyLmV4cHJlc3Npb24gPSBzdHIuc2xpY2UoMCwgaSkudHJpbSgpO1xuXHQgIH0gZWxzZSBpZiAobGFzdEZpbHRlckluZGV4ICE9PSAwKSB7XG5cdCAgICBwdXNoRmlsdGVyKCk7XG5cdCAgfVxuXHRcblx0ICBjYWNoZSQxLnB1dChzLCBkaXIpO1xuXHQgIHJldHVybiBkaXI7XG5cdH1cblx0XG5cdHZhciBkaXJlY3RpdmUgPSBPYmplY3QuZnJlZXplKHtcblx0ICBwYXJzZURpcmVjdGl2ZTogcGFyc2VEaXJlY3RpdmVcblx0fSk7XG5cdFxuXHR2YXIgcmVnZXhFc2NhcGVSRSA9IC9bLS4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2c7XG5cdHZhciBjYWNoZSA9IHVuZGVmaW5lZDtcblx0dmFyIHRhZ1JFID0gdW5kZWZpbmVkO1xuXHR2YXIgaHRtbFJFID0gdW5kZWZpbmVkO1xuXHQvKipcblx0ICogRXNjYXBlIGEgc3RyaW5nIHNvIGl0IGNhbiBiZSB1c2VkIGluIGEgUmVnRXhwXG5cdCAqIGNvbnN0cnVjdG9yLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZXNjYXBlUmVnZXgoc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXFxcJCYnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY29tcGlsZVJlZ2V4KCkge1xuXHQgIHZhciBvcGVuID0gZXNjYXBlUmVnZXgoY29uZmlnLmRlbGltaXRlcnNbMF0pO1xuXHQgIHZhciBjbG9zZSA9IGVzY2FwZVJlZ2V4KGNvbmZpZy5kZWxpbWl0ZXJzWzFdKTtcblx0ICB2YXIgdW5zYWZlT3BlbiA9IGVzY2FwZVJlZ2V4KGNvbmZpZy51bnNhZmVEZWxpbWl0ZXJzWzBdKTtcblx0ICB2YXIgdW5zYWZlQ2xvc2UgPSBlc2NhcGVSZWdleChjb25maWcudW5zYWZlRGVsaW1pdGVyc1sxXSk7XG5cdCAgdGFnUkUgPSBuZXcgUmVnRXhwKHVuc2FmZU9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIHVuc2FmZUNsb3NlICsgJ3wnICsgb3BlbiArICcoKD86LnxcXFxcbikrPyknICsgY2xvc2UsICdnJyk7XG5cdCAgaHRtbFJFID0gbmV3IFJlZ0V4cCgnXicgKyB1bnNhZmVPcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyB1bnNhZmVDbG9zZSArICckJyk7XG5cdCAgLy8gcmVzZXQgY2FjaGVcblx0ICBjYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhcnNlIGEgdGVtcGxhdGUgdGV4dCBzdHJpbmcgaW50byBhbiBhcnJheSBvZiB0b2tlbnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG5cdCAqIEByZXR1cm4ge0FycmF5PE9iamVjdD4gfCBudWxsfVxuXHQgKiAgICAgICAgICAgICAgIC0ge1N0cmluZ30gdHlwZVxuXHQgKiAgICAgICAgICAgICAgIC0ge1N0cmluZ30gdmFsdWVcblx0ICogICAgICAgICAgICAgICAtIHtCb29sZWFufSBbaHRtbF1cblx0ICogICAgICAgICAgICAgICAtIHtCb29sZWFufSBbb25lVGltZV1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZVRleHQodGV4dCkge1xuXHQgIGlmICghY2FjaGUpIHtcblx0ICAgIGNvbXBpbGVSZWdleCgpO1xuXHQgIH1cblx0ICB2YXIgaGl0ID0gY2FjaGUuZ2V0KHRleHQpO1xuXHQgIGlmIChoaXQpIHtcblx0ICAgIHJldHVybiBoaXQ7XG5cdCAgfVxuXHQgIGlmICghdGFnUkUudGVzdCh0ZXh0KSkge1xuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHQgIHZhciB0b2tlbnMgPSBbXTtcblx0ICB2YXIgbGFzdEluZGV4ID0gdGFnUkUubGFzdEluZGV4ID0gMDtcblx0ICB2YXIgbWF0Y2gsIGluZGV4LCBodG1sLCB2YWx1ZSwgZmlyc3QsIG9uZVRpbWU7XG5cdCAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICB3aGlsZSAobWF0Y2ggPSB0YWdSRS5leGVjKHRleHQpKSB7XG5cdCAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICBpbmRleCA9IG1hdGNoLmluZGV4O1xuXHQgICAgLy8gcHVzaCB0ZXh0IHRva2VuXG5cdCAgICBpZiAoaW5kZXggPiBsYXN0SW5kZXgpIHtcblx0ICAgICAgdG9rZW5zLnB1c2goe1xuXHQgICAgICAgIHZhbHVlOiB0ZXh0LnNsaWNlKGxhc3RJbmRleCwgaW5kZXgpXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgICAgLy8gdGFnIHRva2VuXG5cdCAgICBodG1sID0gaHRtbFJFLnRlc3QobWF0Y2hbMF0pO1xuXHQgICAgdmFsdWUgPSBodG1sID8gbWF0Y2hbMV0gOiBtYXRjaFsyXTtcblx0ICAgIGZpcnN0ID0gdmFsdWUuY2hhckNvZGVBdCgwKTtcblx0ICAgIG9uZVRpbWUgPSBmaXJzdCA9PT0gNDI7IC8vICpcblx0ICAgIHZhbHVlID0gb25lVGltZSA/IHZhbHVlLnNsaWNlKDEpIDogdmFsdWU7XG5cdCAgICB0b2tlbnMucHVzaCh7XG5cdCAgICAgIHRhZzogdHJ1ZSxcblx0ICAgICAgdmFsdWU6IHZhbHVlLnRyaW0oKSxcblx0ICAgICAgaHRtbDogaHRtbCxcblx0ICAgICAgb25lVGltZTogb25lVGltZVxuXHQgICAgfSk7XG5cdCAgICBsYXN0SW5kZXggPSBpbmRleCArIG1hdGNoWzBdLmxlbmd0aDtcblx0ICB9XG5cdCAgaWYgKGxhc3RJbmRleCA8IHRleHQubGVuZ3RoKSB7XG5cdCAgICB0b2tlbnMucHVzaCh7XG5cdCAgICAgIHZhbHVlOiB0ZXh0LnNsaWNlKGxhc3RJbmRleClcblx0ICAgIH0pO1xuXHQgIH1cblx0ICBjYWNoZS5wdXQodGV4dCwgdG9rZW5zKTtcblx0ICByZXR1cm4gdG9rZW5zO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9ybWF0IGEgbGlzdCBvZiB0b2tlbnMgaW50byBhbiBleHByZXNzaW9uLlxuXHQgKiBlLmcuIHRva2VucyBwYXJzZWQgZnJvbSAnYSB7e2J9fSBjJyBjYW4gYmUgc2VyaWFsaXplZFxuXHQgKiBpbnRvIG9uZSBzaW5nbGUgZXhwcmVzc2lvbiBhcyAnXCJhIFwiICsgYiArIFwiIGNcIicuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xuXHQgKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdG9rZW5zVG9FeHAodG9rZW5zLCB2bSkge1xuXHQgIGlmICh0b2tlbnMubGVuZ3RoID4gMSkge1xuXHQgICAgcmV0dXJuIHRva2Vucy5tYXAoZnVuY3Rpb24gKHRva2VuKSB7XG5cdCAgICAgIHJldHVybiBmb3JtYXRUb2tlbih0b2tlbiwgdm0pO1xuXHQgICAgfSkuam9pbignKycpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gZm9ybWF0VG9rZW4odG9rZW5zWzBdLCB2bSwgdHJ1ZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRm9ybWF0IGEgc2luZ2xlIHRva2VuLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdG9rZW5cblx0ICogQHBhcmFtIHtWdWV9IFt2bV1cblx0ICogQHBhcmFtIHtCb29sZWFufSBbc2luZ2xlXVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZm9ybWF0VG9rZW4odG9rZW4sIHZtLCBzaW5nbGUpIHtcblx0ICByZXR1cm4gdG9rZW4udGFnID8gdG9rZW4ub25lVGltZSAmJiB2bSA/ICdcIicgKyB2bS4kZXZhbCh0b2tlbi52YWx1ZSkgKyAnXCInIDogaW5saW5lRmlsdGVycyh0b2tlbi52YWx1ZSwgc2luZ2xlKSA6ICdcIicgKyB0b2tlbi52YWx1ZSArICdcIic7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3IgYW4gYXR0cmlidXRlIHdpdGggbXVsdGlwbGUgaW50ZXJwb2xhdGlvbiB0YWdzLFxuXHQgKiBlLmcuIGF0dHI9XCJzb21lLXt7dGhpbmcgfCBmaWx0ZXJ9fVwiLCBpbiBvcmRlciB0byBjb21iaW5lXG5cdCAqIHRoZSB3aG9sZSB0aGluZyBpbnRvIGEgc2luZ2xlIHdhdGNoYWJsZSBleHByZXNzaW9uLCB3ZVxuXHQgKiBoYXZlIHRvIGlubGluZSB0aG9zZSBmaWx0ZXJzLiBUaGlzIGZ1bmN0aW9uIGRvZXMgZXhhY3RseVxuXHQgKiB0aGF0LiBUaGlzIGlzIGEgYml0IGhhY2t5IGJ1dCBpdCBhdm9pZHMgaGVhdnkgY2hhbmdlc1xuXHQgKiB0byBkaXJlY3RpdmUgcGFyc2VyIGFuZCB3YXRjaGVyIG1lY2hhbmlzbS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHNpbmdsZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0dmFyIGZpbHRlclJFID0gL1tefF1cXHxbXnxdLztcblx0ZnVuY3Rpb24gaW5saW5lRmlsdGVycyhleHAsIHNpbmdsZSkge1xuXHQgIGlmICghZmlsdGVyUkUudGVzdChleHApKSB7XG5cdCAgICByZXR1cm4gc2luZ2xlID8gZXhwIDogJygnICsgZXhwICsgJyknO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgZGlyID0gcGFyc2VEaXJlY3RpdmUoZXhwKTtcblx0ICAgIGlmICghZGlyLmZpbHRlcnMpIHtcblx0ICAgICAgcmV0dXJuICcoJyArIGV4cCArICcpJztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAndGhpcy5fYXBwbHlGaWx0ZXJzKCcgKyBkaXIuZXhwcmVzc2lvbiArIC8vIHZhbHVlXG5cdCAgICAgICcsbnVsbCwnICsgLy8gb2xkVmFsdWUgKG51bGwgZm9yIHJlYWQpXG5cdCAgICAgIEpTT04uc3RyaW5naWZ5KGRpci5maWx0ZXJzKSArIC8vIGZpbHRlciBkZXNjcmlwdG9yc1xuXHQgICAgICAnLGZhbHNlKSc7IC8vIHdyaXRlP1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIHRleHQgPSBPYmplY3QuZnJlZXplKHtcblx0ICBjb21waWxlUmVnZXg6IGNvbXBpbGVSZWdleCxcblx0ICBwYXJzZVRleHQ6IHBhcnNlVGV4dCxcblx0ICB0b2tlbnNUb0V4cDogdG9rZW5zVG9FeHBcblx0fSk7XG5cdFxuXHR2YXIgZGVsaW1pdGVycyA9IFsne3snLCAnfX0nXTtcblx0dmFyIHVuc2FmZURlbGltaXRlcnMgPSBbJ3t7eycsICd9fX0nXTtcblx0XG5cdHZhciBjb25maWcgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7XG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gcHJpbnQgZGVidWcgbWVzc2FnZXMuXG5cdCAgICogQWxzbyBlbmFibGVzIHN0YWNrIHRyYWNlIGZvciB3YXJuaW5ncy5cblx0ICAgKlxuXHQgICAqIEB0eXBlIHtCb29sZWFufVxuXHQgICAqL1xuXHRcblx0ICBkZWJ1ZzogZmFsc2UsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gc3VwcHJlc3Mgd2FybmluZ3MuXG5cdCAgICpcblx0ICAgKiBAdHlwZSB7Qm9vbGVhbn1cblx0ICAgKi9cblx0XG5cdCAgc2lsZW50OiBmYWxzZSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hldGhlciB0byB1c2UgYXN5bmMgcmVuZGVyaW5nLlxuXHQgICAqL1xuXHRcblx0ICBhc3luYzogdHJ1ZSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hldGhlciB0byB3YXJuIGFnYWluc3QgZXJyb3JzIGNhdWdodCB3aGVuIGV2YWx1YXRpbmdcblx0ICAgKiBleHByZXNzaW9ucy5cblx0ICAgKi9cblx0XG5cdCAgd2FybkV4cHJlc3Npb25FcnJvcnM6IHRydWUsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gYWxsb3cgZGV2dG9vbHMgaW5zcGVjdGlvbi5cblx0ICAgKiBEaXNhYmxlZCBieSBkZWZhdWx0IGluIHByb2R1Y3Rpb24gYnVpbGRzLlxuXHQgICAqL1xuXHRcblx0ICBkZXZ0b29sczogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyxcblx0XG5cdCAgLyoqXG5cdCAgICogSW50ZXJuYWwgZmxhZyB0byBpbmRpY2F0ZSB0aGUgZGVsaW1pdGVycyBoYXZlIGJlZW5cblx0ICAgKiBjaGFuZ2VkLlxuXHQgICAqXG5cdCAgICogQHR5cGUge0Jvb2xlYW59XG5cdCAgICovXG5cdFxuXHQgIF9kZWxpbWl0ZXJzQ2hhbmdlZDogdHJ1ZSxcblx0XG5cdCAgLyoqXG5cdCAgICogTGlzdCBvZiBhc3NldCB0eXBlcyB0aGF0IGEgY29tcG9uZW50IGNhbiBvd24uXG5cdCAgICpcblx0ICAgKiBAdHlwZSB7QXJyYXl9XG5cdCAgICovXG5cdFxuXHQgIF9hc3NldFR5cGVzOiBbJ2NvbXBvbmVudCcsICdkaXJlY3RpdmUnLCAnZWxlbWVudERpcmVjdGl2ZScsICdmaWx0ZXInLCAndHJhbnNpdGlvbicsICdwYXJ0aWFsJ10sXG5cdFxuXHQgIC8qKlxuXHQgICAqIHByb3AgYmluZGluZyBtb2Rlc1xuXHQgICAqL1xuXHRcblx0ICBfcHJvcEJpbmRpbmdNb2Rlczoge1xuXHQgICAgT05FX1dBWTogMCxcblx0ICAgIFRXT19XQVk6IDEsXG5cdCAgICBPTkVfVElNRTogMlxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIE1heCBjaXJjdWxhciB1cGRhdGVzIGFsbG93ZWQgaW4gYSBiYXRjaGVyIGZsdXNoIGN5Y2xlLlxuXHQgICAqL1xuXHRcblx0ICBfbWF4VXBkYXRlQ291bnQ6IDEwMFxuXHRcblx0fSwge1xuXHQgIGRlbGltaXRlcnM6IHsgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbnRlcnBvbGF0aW9uIGRlbGltaXRlcnMuIENoYW5naW5nIHRoZXNlIHdvdWxkIHRyaWdnZXJcblx0ICAgICAgICAgICAgICAgICAqIHRoZSB0ZXh0IHBhcnNlciB0byByZS1jb21waWxlIHRoZSByZWd1bGFyIGV4cHJlc3Npb25zLlxuXHQgICAgICAgICAgICAgICAgICpcblx0ICAgICAgICAgICAgICAgICAqIEB0eXBlIHtBcnJheTxTdHJpbmc+fVxuXHQgICAgICAgICAgICAgICAgICovXG5cdFxuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIHJldHVybiBkZWxpbWl0ZXJzO1xuXHQgICAgfSxcblx0ICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuXHQgICAgICBkZWxpbWl0ZXJzID0gdmFsO1xuXHQgICAgICBjb21waWxlUmVnZXgoKTtcblx0ICAgIH0sXG5cdCAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICBlbnVtZXJhYmxlOiB0cnVlXG5cdCAgfSxcblx0ICB1bnNhZmVEZWxpbWl0ZXJzOiB7XG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgcmV0dXJuIHVuc2FmZURlbGltaXRlcnM7XG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7XG5cdCAgICAgIHVuc2FmZURlbGltaXRlcnMgPSB2YWw7XG5cdCAgICAgIGNvbXBpbGVSZWdleCgpO1xuXHQgICAgfSxcblx0ICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0ICAgIGVudW1lcmFibGU6IHRydWVcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIHdhcm4gPSB1bmRlZmluZWQ7XG5cdHZhciBmb3JtYXRDb21wb25lbnROYW1lID0gdW5kZWZpbmVkO1xuXHRcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAoZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGhhc0NvbnNvbGUgPSB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCc7XG5cdFxuXHQgICAgd2FybiA9IGZ1bmN0aW9uIChtc2csIHZtKSB7XG5cdCAgICAgIGlmIChoYXNDb25zb2xlICYmICFjb25maWcuc2lsZW50KSB7XG5cdCAgICAgICAgY29uc29sZS5lcnJvcignW1Z1ZSB3YXJuXTogJyArIG1zZyArICh2bSA/IGZvcm1hdENvbXBvbmVudE5hbWUodm0pIDogJycpKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBmb3JtYXRDb21wb25lbnROYW1lID0gZnVuY3Rpb24gKHZtKSB7XG5cdCAgICAgIHZhciBuYW1lID0gdm0uX2lzVnVlID8gdm0uJG9wdGlvbnMubmFtZSA6IHZtLm5hbWU7XG5cdCAgICAgIHJldHVybiBuYW1lID8gJyAoZm91bmQgaW4gY29tcG9uZW50OiA8JyArIGh5cGhlbmF0ZShuYW1lKSArICc+KScgOiAnJztcblx0ICAgIH07XG5cdCAgfSkoKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFwcGVuZCB3aXRoIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhcHBlbmRXaXRoVHJhbnNpdGlvbihlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcblx0ICBhcHBseVRyYW5zaXRpb24oZWwsIDEsIGZ1bmN0aW9uICgpIHtcblx0ICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfSwgdm0sIGNiKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEluc2VydEJlZm9yZSB3aXRoIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBiZWZvcmVXaXRoVHJhbnNpdGlvbihlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcblx0ICBhcHBseVRyYW5zaXRpb24oZWwsIDEsIGZ1bmN0aW9uICgpIHtcblx0ICAgIGJlZm9yZShlbCwgdGFyZ2V0KTtcblx0ICB9LCB2bSwgY2IpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIHdpdGggdHJhbnNpdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZVdpdGhUcmFuc2l0aW9uKGVsLCB2bSwgY2IpIHtcblx0ICBhcHBseVRyYW5zaXRpb24oZWwsIC0xLCBmdW5jdGlvbiAoKSB7XG5cdCAgICByZW1vdmUoZWwpO1xuXHQgIH0sIHZtLCBjYik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBcHBseSB0cmFuc2l0aW9ucyB3aXRoIGFuIG9wZXJhdGlvbiBjYWxsYmFjay5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge051bWJlcn0gZGlyZWN0aW9uXG5cdCAqICAgICAgICAgICAgICAgICAgMTogZW50ZXJcblx0ICogICAgICAgICAgICAgICAgIC0xOiBsZWF2ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIHRoZSBhY3R1YWwgRE9NIG9wZXJhdGlvblxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFwcGx5VHJhbnNpdGlvbihlbCwgZGlyZWN0aW9uLCBvcCwgdm0sIGNiKSB7XG5cdCAgdmFyIHRyYW5zaXRpb24gPSBlbC5fX3ZfdHJhbnM7XG5cdCAgaWYgKCF0cmFuc2l0aW9uIHx8XG5cdCAgLy8gc2tpcCBpZiB0aGVyZSBhcmUgbm8ganMgaG9va3MgYW5kIENTUyB0cmFuc2l0aW9uIGlzXG5cdCAgLy8gbm90IHN1cHBvcnRlZFxuXHQgICF0cmFuc2l0aW9uLmhvb2tzICYmICF0cmFuc2l0aW9uRW5kRXZlbnQgfHxcblx0ICAvLyBza2lwIHRyYW5zaXRpb25zIGZvciBpbml0aWFsIGNvbXBpbGVcblx0ICAhdm0uX2lzQ29tcGlsZWQgfHxcblx0ICAvLyBpZiB0aGUgdm0gaXMgYmVpbmcgbWFuaXB1bGF0ZWQgYnkgYSBwYXJlbnQgZGlyZWN0aXZlXG5cdCAgLy8gZHVyaW5nIHRoZSBwYXJlbnQncyBjb21waWxhdGlvbiBwaGFzZSwgc2tpcCB0aGVcblx0ICAvLyBhbmltYXRpb24uXG5cdCAgdm0uJHBhcmVudCAmJiAhdm0uJHBhcmVudC5faXNDb21waWxlZCkge1xuXHQgICAgb3AoKTtcblx0ICAgIGlmIChjYikgY2IoKTtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIGFjdGlvbiA9IGRpcmVjdGlvbiA+IDAgPyAnZW50ZXInIDogJ2xlYXZlJztcblx0ICB0cmFuc2l0aW9uW2FjdGlvbl0ob3AsIGNiKTtcblx0fVxuXHRcblx0dmFyIHRyYW5zaXRpb24gPSBPYmplY3QuZnJlZXplKHtcblx0ICBhcHBlbmRXaXRoVHJhbnNpdGlvbjogYXBwZW5kV2l0aFRyYW5zaXRpb24sXG5cdCAgYmVmb3JlV2l0aFRyYW5zaXRpb246IGJlZm9yZVdpdGhUcmFuc2l0aW9uLFxuXHQgIHJlbW92ZVdpdGhUcmFuc2l0aW9uOiByZW1vdmVXaXRoVHJhbnNpdGlvbixcblx0ICBhcHBseVRyYW5zaXRpb246IGFwcGx5VHJhbnNpdGlvblxuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBRdWVyeSBhbiBlbGVtZW50IHNlbGVjdG9yIGlmIGl0J3Mgbm90IGFuIGVsZW1lbnQgYWxyZWFkeS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gZWxcblx0ICogQHJldHVybiB7RWxlbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBxdWVyeShlbCkge1xuXHQgIGlmICh0eXBlb2YgZWwgPT09ICdzdHJpbmcnKSB7XG5cdCAgICB2YXIgc2VsZWN0b3IgPSBlbDtcblx0ICAgIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCk7XG5cdCAgICBpZiAoIWVsKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQ2Fubm90IGZpbmQgZWxlbWVudDogJyArIHNlbGVjdG9yKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGVsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYSBub2RlIGlzIGluIHRoZSBkb2N1bWVudC5cblx0ICogTm90ZTogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zIHNob3VsZCB3b3JrIGhlcmVcblx0ICogYnV0IGFsd2F5cyByZXR1cm5zIGZhbHNlIGZvciBjb21tZW50IG5vZGVzIGluIHBoYW50b21qcyxcblx0ICogbWFraW5nIHVuaXQgdGVzdHMgZGlmZmljdWx0LiBUaGlzIGlzIGZpeGVkIGJ5IGRvaW5nIHRoZVxuXHQgKiBjb250YWlucygpIGNoZWNrIG9uIHRoZSBub2RlJ3MgcGFyZW50Tm9kZSBpbnN0ZWFkIG9mXG5cdCAqIHRoZSBub2RlIGl0c2VsZi5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaW5Eb2Mobm9kZSkge1xuXHQgIGlmICghbm9kZSkgcmV0dXJuIGZhbHNlO1xuXHQgIHZhciBkb2MgPSBub2RlLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXHQgIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG5cdCAgcmV0dXJuIGRvYyA9PT0gbm9kZSB8fCBkb2MgPT09IHBhcmVudCB8fCAhIShwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlID09PSAxICYmIGRvYy5jb250YWlucyhwYXJlbnQpKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCBhbmQgcmVtb3ZlIGFuIGF0dHJpYnV0ZSBmcm9tIGEgbm9kZS5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBfYXR0clxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldEF0dHIobm9kZSwgX2F0dHIpIHtcblx0ICB2YXIgdmFsID0gbm9kZS5nZXRBdHRyaWJ1dGUoX2F0dHIpO1xuXHQgIGlmICh2YWwgIT09IG51bGwpIHtcblx0ICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKF9hdHRyKTtcblx0ICB9XG5cdCAgcmV0dXJuIHZhbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCBhbiBhdHRyaWJ1dGUgd2l0aCBjb2xvbiBvciB2LWJpbmQ6IHByZWZpeC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCAqIEByZXR1cm4ge1N0cmluZ3xudWxsfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldEJpbmRBdHRyKG5vZGUsIG5hbWUpIHtcblx0ICB2YXIgdmFsID0gZ2V0QXR0cihub2RlLCAnOicgKyBuYW1lKTtcblx0ICBpZiAodmFsID09PSBudWxsKSB7XG5cdCAgICB2YWwgPSBnZXRBdHRyKG5vZGUsICd2LWJpbmQ6JyArIG5hbWUpO1xuXHQgIH1cblx0ICByZXR1cm4gdmFsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgdGhlIHByZXNlbmNlIG9mIGEgYmluZCBhdHRyaWJ1dGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGhhc0JpbmRBdHRyKG5vZGUsIG5hbWUpIHtcblx0ICByZXR1cm4gbm9kZS5oYXNBdHRyaWJ1dGUobmFtZSkgfHwgbm9kZS5oYXNBdHRyaWJ1dGUoJzonICsgbmFtZSkgfHwgbm9kZS5oYXNBdHRyaWJ1dGUoJ3YtYmluZDonICsgbmFtZSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbnNlcnQgZWwgYmVmb3JlIHRhcmdldFxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYmVmb3JlKGVsLCB0YXJnZXQpIHtcblx0ICB0YXJnZXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWwsIHRhcmdldCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbnNlcnQgZWwgYWZ0ZXIgdGFyZ2V0XG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhZnRlcihlbCwgdGFyZ2V0KSB7XG5cdCAgaWYgKHRhcmdldC5uZXh0U2libGluZykge1xuXHQgICAgYmVmb3JlKGVsLCB0YXJnZXQubmV4dFNpYmxpbmcpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0YXJnZXQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGVsIGZyb20gRE9NXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZW1vdmUoZWwpIHtcblx0ICBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByZXBlbmQgZWwgdG8gdGFyZ2V0XG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcmVwZW5kKGVsLCB0YXJnZXQpIHtcblx0ICBpZiAodGFyZ2V0LmZpcnN0Q2hpbGQpIHtcblx0ICAgIGJlZm9yZShlbCwgdGFyZ2V0LmZpcnN0Q2hpbGQpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlcGxhY2UgdGFyZ2V0IHdpdGggZWxcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlcGxhY2UodGFyZ2V0LCBlbCkge1xuXHQgIHZhciBwYXJlbnQgPSB0YXJnZXQucGFyZW50Tm9kZTtcblx0ICBpZiAocGFyZW50KSB7XG5cdCAgICBwYXJlbnQucmVwbGFjZUNoaWxkKGVsLCB0YXJnZXQpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEFkZCBldmVudCBsaXN0ZW5lciBzaG9ydGhhbmQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW3VzZUNhcHR1cmVdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gb24oZWwsIGV2ZW50LCBjYiwgdXNlQ2FwdHVyZSkge1xuXHQgIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNiLCB1c2VDYXB0dXJlKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBldmVudCBsaXN0ZW5lciBzaG9ydGhhbmQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gb2ZmKGVsLCBldmVudCwgY2IpIHtcblx0ICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBjYik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3IgSUU5IGNvbXBhdDogd2hlbiBib3RoIGNsYXNzIGFuZCA6Y2xhc3MgYXJlIHByZXNlbnRcblx0ICogZ2V0QXR0cmlidXRlKCdjbGFzcycpIHJldHVybnMgd3JvbmcgdmFsdWUuLi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0Q2xhc3MoZWwpIHtcblx0ICB2YXIgY2xhc3NuYW1lID0gZWwuY2xhc3NOYW1lO1xuXHQgIGlmICh0eXBlb2YgY2xhc3NuYW1lID09PSAnb2JqZWN0Jykge1xuXHQgICAgY2xhc3NuYW1lID0gY2xhc3NuYW1lLmJhc2VWYWwgfHwgJyc7XG5cdCAgfVxuXHQgIHJldHVybiBjbGFzc25hbWU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbiBJRTksIHNldEF0dHJpYnV0ZSgnY2xhc3MnKSB3aWxsIHJlc3VsdCBpbiBlbXB0eSBjbGFzc1xuXHQgKiBpZiB0aGUgZWxlbWVudCBhbHNvIGhhcyB0aGUgOmNsYXNzIGF0dHJpYnV0ZTsgSG93ZXZlciBpblxuXHQgKiBQaGFudG9tSlMsIHNldHRpbmcgYGNsYXNzTmFtZWAgZG9lcyBub3Qgd29yayBvbiBTVkcgZWxlbWVudHMuLi5cblx0ICogU28gd2UgaGF2ZSB0byBkbyBhIGNvbmRpdGlvbmFsIGNoZWNrIGhlcmUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHNldENsYXNzKGVsLCBjbHMpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaXNJRTkgJiYgIS9zdmckLy50ZXN0KGVsLm5hbWVzcGFjZVVSSSkpIHtcblx0ICAgIGVsLmNsYXNzTmFtZSA9IGNscztcblx0ICB9IGVsc2Uge1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNscyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQWRkIGNsYXNzIHdpdGggY29tcGF0aWJpbGl0eSBmb3IgSUUgJiBTVkdcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY2xzXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYWRkQ2xhc3MoZWwsIGNscykge1xuXHQgIGlmIChlbC5jbGFzc0xpc3QpIHtcblx0ICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xzKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGN1ciA9ICcgJyArIGdldENsYXNzKGVsKSArICcgJztcblx0ICAgIGlmIChjdXIuaW5kZXhPZignICcgKyBjbHMgKyAnICcpIDwgMCkge1xuXHQgICAgICBzZXRDbGFzcyhlbCwgKGN1ciArIGNscykudHJpbSgpKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBJRSAmIFNWR1xuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZW1vdmVDbGFzcyhlbCwgY2xzKSB7XG5cdCAgaWYgKGVsLmNsYXNzTGlzdCkge1xuXHQgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbHMpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgY3VyID0gJyAnICsgZ2V0Q2xhc3MoZWwpICsgJyAnO1xuXHQgICAgdmFyIHRhciA9ICcgJyArIGNscyArICcgJztcblx0ICAgIHdoaWxlIChjdXIuaW5kZXhPZih0YXIpID49IDApIHtcblx0ICAgICAgY3VyID0gY3VyLnJlcGxhY2UodGFyLCAnICcpO1xuXHQgICAgfVxuXHQgICAgc2V0Q2xhc3MoZWwsIGN1ci50cmltKCkpO1xuXHQgIH1cblx0ICBpZiAoIWVsLmNsYXNzTmFtZSkge1xuXHQgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEV4dHJhY3QgcmF3IGNvbnRlbnQgaW5zaWRlIGFuIGVsZW1lbnQgaW50byBhIHRlbXBvcmFyeVxuXHQgKiBjb250YWluZXIgZGl2XG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtCb29sZWFufSBhc0ZyYWdtZW50XG5cdCAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBleHRyYWN0Q29udGVudChlbCwgYXNGcmFnbWVudCkge1xuXHQgIHZhciBjaGlsZDtcblx0ICB2YXIgcmF3Q29udGVudDtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaXNUZW1wbGF0ZShlbCkgJiYgaXNGcmFnbWVudChlbC5jb250ZW50KSkge1xuXHQgICAgZWwgPSBlbC5jb250ZW50O1xuXHQgIH1cblx0ICBpZiAoZWwuaGFzQ2hpbGROb2RlcygpKSB7XG5cdCAgICB0cmltTm9kZShlbCk7XG5cdCAgICByYXdDb250ZW50ID0gYXNGcmFnbWVudCA/IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIHdoaWxlIChjaGlsZCA9IGVsLmZpcnN0Q2hpbGQpIHtcblx0ICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgICByYXdDb250ZW50LmFwcGVuZENoaWxkKGNoaWxkKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJhd0NvbnRlbnQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUcmltIHBvc3NpYmxlIGVtcHR5IGhlYWQvdGFpbCB0ZXh0IGFuZCBjb21tZW50XG5cdCAqIG5vZGVzIGluc2lkZSBhIHBhcmVudC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdHJpbU5vZGUobm9kZSkge1xuXHQgIHZhciBjaGlsZDtcblx0ICAvKiBlc2xpbnQtZGlzYWJsZSBuby1zZXF1ZW5jZXMgKi9cblx0ICB3aGlsZSAoKGNoaWxkID0gbm9kZS5maXJzdENoaWxkLCBpc1RyaW1tYWJsZShjaGlsZCkpKSB7XG5cdCAgICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcblx0ICB9XG5cdCAgd2hpbGUgKChjaGlsZCA9IG5vZGUubGFzdENoaWxkLCBpc1RyaW1tYWJsZShjaGlsZCkpKSB7XG5cdCAgICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcblx0ICB9XG5cdCAgLyogZXNsaW50LWVuYWJsZSBuby1zZXF1ZW5jZXMgKi9cblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNUcmltbWFibGUobm9kZSkge1xuXHQgIHJldHVybiBub2RlICYmIChub2RlLm5vZGVUeXBlID09PSAzICYmICFub2RlLmRhdGEudHJpbSgpIHx8IG5vZGUubm9kZVR5cGUgPT09IDgpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIHRlbXBsYXRlIHRhZy5cblx0ICogTm90ZSBpZiB0aGUgdGVtcGxhdGUgYXBwZWFycyBpbnNpZGUgYW4gU1ZHIGl0cyB0YWdOYW1lXG5cdCAqIHdpbGwgYmUgaW4gbG93ZXJjYXNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNUZW1wbGF0ZShlbCkge1xuXHQgIHJldHVybiBlbC50YWdOYW1lICYmIGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RlbXBsYXRlJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZSBhbiBcImFuY2hvclwiIGZvciBwZXJmb3JtaW5nIGRvbSBpbnNlcnRpb24vcmVtb3ZhbHMuXG5cdCAqIFRoaXMgaXMgdXNlZCBpbiBhIG51bWJlciBvZiBzY2VuYXJpb3M6XG5cdCAqIC0gZnJhZ21lbnQgaW5zdGFuY2Vcblx0ICogLSB2LWh0bWxcblx0ICogLSB2LWlmXG5cdCAqIC0gdi1mb3Jcblx0ICogLSBjb21wb25lbnRcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRcblx0ICogQHBhcmFtIHtCb29sZWFufSBwZXJzaXN0IC0gSUUgdHJhc2hlcyBlbXB0eSB0ZXh0Tm9kZXMgb25cblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVOb2RlKHRydWUpLCBzbyBpbiBjZXJ0YWluXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2VzIHRoZSBhbmNob3IgbmVlZHMgdG8gYmVcblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9uLWVtcHR5IHRvIGJlIHBlcnNpc3RlZCBpblxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZXMuXG5cdCAqIEByZXR1cm4ge0NvbW1lbnR8VGV4dH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVBbmNob3IoY29udGVudCwgcGVyc2lzdCkge1xuXHQgIHZhciBhbmNob3IgPSBjb25maWcuZGVidWcgPyBkb2N1bWVudC5jcmVhdGVDb21tZW50KGNvbnRlbnQpIDogZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocGVyc2lzdCA/ICcgJyA6ICcnKTtcblx0ICBhbmNob3IuX192X2FuY2hvciA9IHRydWU7XG5cdCAgcmV0dXJuIGFuY2hvcjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZpbmQgYSBjb21wb25lbnQgcmVmIGF0dHJpYnV0ZSB0aGF0IHN0YXJ0cyB3aXRoICQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdHZhciByZWZSRSA9IC9edi1yZWY6Lztcblx0XG5cdGZ1bmN0aW9uIGZpbmRSZWYobm9kZSkge1xuXHQgIGlmIChub2RlLmhhc0F0dHJpYnV0ZXMoKSkge1xuXHQgICAgdmFyIGF0dHJzID0gbm9kZS5hdHRyaWJ1dGVzO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuXHQgICAgICBpZiAocmVmUkUudGVzdChuYW1lKSkge1xuXHQgICAgICAgIHJldHVybiBjYW1lbGl6ZShuYW1lLnJlcGxhY2UocmVmUkUsICcnKSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNYXAgYSBmdW5jdGlvbiB0byBhIHJhbmdlIG9mIG5vZGVzIC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7Tm9kZX0gZW5kXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG9wXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFwTm9kZVJhbmdlKG5vZGUsIGVuZCwgb3ApIHtcblx0ICB2YXIgbmV4dDtcblx0ICB3aGlsZSAobm9kZSAhPT0gZW5kKSB7XG5cdCAgICBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcblx0ICAgIG9wKG5vZGUpO1xuXHQgICAgbm9kZSA9IG5leHQ7XG5cdCAgfVxuXHQgIG9wKGVuZCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgYSByYW5nZSBvZiBub2RlcyB3aXRoIHRyYW5zaXRpb24sIHN0b3JlXG5cdCAqIHRoZSBub2RlcyBpbiBhIGZyYWdtZW50IHdpdGggY29ycmVjdCBvcmRlcmluZyxcblx0ICogYW5kIGNhbGwgY2FsbGJhY2sgd2hlbiBkb25lLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IHN0YXJ0XG5cdCAqIEBwYXJhbSB7Tm9kZX0gZW5kXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZW1vdmVOb2RlUmFuZ2Uoc3RhcnQsIGVuZCwgdm0sIGZyYWcsIGNiKSB7XG5cdCAgdmFyIGRvbmUgPSBmYWxzZTtcblx0ICB2YXIgcmVtb3ZlZCA9IDA7XG5cdCAgdmFyIG5vZGVzID0gW107XG5cdCAgbWFwTm9kZVJhbmdlKHN0YXJ0LCBlbmQsIGZ1bmN0aW9uIChub2RlKSB7XG5cdCAgICBpZiAobm9kZSA9PT0gZW5kKSBkb25lID0gdHJ1ZTtcblx0ICAgIG5vZGVzLnB1c2gobm9kZSk7XG5cdCAgICByZW1vdmVXaXRoVHJhbnNpdGlvbihub2RlLCB2bSwgb25SZW1vdmVkKTtcblx0ICB9KTtcblx0ICBmdW5jdGlvbiBvblJlbW92ZWQoKSB7XG5cdCAgICByZW1vdmVkKys7XG5cdCAgICBpZiAoZG9uZSAmJiByZW1vdmVkID49IG5vZGVzLmxlbmd0aCkge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChub2Rlc1tpXSk7XG5cdCAgICAgIH1cblx0ICAgICAgY2IgJiYgY2IoKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhIG5vZGUgaXMgYSBEb2N1bWVudEZyYWdtZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc0ZyYWdtZW50KG5vZGUpIHtcblx0ICByZXR1cm4gbm9kZSAmJiBub2RlLm5vZGVUeXBlID09PSAxMTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCBvdXRlckhUTUwgb2YgZWxlbWVudHMsIHRha2luZyBjYXJlXG5cdCAqIG9mIFNWRyBlbGVtZW50cyBpbiBJRSBhcyB3ZWxsLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRPdXRlckhUTUwoZWwpIHtcblx0ICBpZiAoZWwub3V0ZXJIVE1MKSB7XG5cdCAgICByZXR1cm4gZWwub3V0ZXJIVE1MO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWwuY2xvbmVOb2RlKHRydWUpKTtcblx0ICAgIHJldHVybiBjb250YWluZXIuaW5uZXJIVE1MO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGNvbW1vblRhZ1JFID0gL14oZGl2fHB8c3BhbnxpbWd8YXxifGl8YnJ8dWx8b2x8bGl8aDF8aDJ8aDN8aDR8aDV8aDZ8Y29kZXxwcmV8dGFibGV8dGh8dGR8dHJ8Zm9ybXxsYWJlbHxpbnB1dHxzZWxlY3R8b3B0aW9ufG5hdnxhcnRpY2xlfHNlY3Rpb258aGVhZGVyfGZvb3RlcikkL2k7XG5cdHZhciByZXNlcnZlZFRhZ1JFID0gL14oc2xvdHxwYXJ0aWFsfGNvbXBvbmVudCkkL2k7XG5cdFxuXHR2YXIgaXNVbmtub3duRWxlbWVudCA9IHVuZGVmaW5lZDtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICBpc1Vua25vd25FbGVtZW50ID0gZnVuY3Rpb24gKGVsLCB0YWcpIHtcblx0ICAgIGlmICh0YWcuaW5kZXhPZignLScpID4gLTEpIHtcblx0ICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjgyMTAzNjQvMTA3MDI0NFxuXHQgICAgICByZXR1cm4gZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQgfHwgZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MRWxlbWVudDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAoL0hUTUxVbmtub3duRWxlbWVudC8udGVzdChlbC50b1N0cmluZygpKSAmJlxuXHQgICAgICAgIC8vIENocm9tZSByZXR1cm5zIHVua25vd24gZm9yIHNldmVyYWwgSFRNTDUgZWxlbWVudHMuXG5cdCAgICAgICAgLy8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTU0MDUyNlxuXHQgICAgICAgIC8vIEZpcmVmb3ggcmV0dXJucyB1bmtub3duIGZvciBzb21lIFwiSW50ZXJhY3RpdmUgZWxlbWVudHMuXCJcblx0ICAgICAgICAhL14oZGF0YXx0aW1lfHJ0Y3xyYnxkZXRhaWxzfGRpYWxvZ3xzdW1tYXJ5KSQvLnRlc3QodGFnKVxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgY29tcG9uZW50LCBpZiB5ZXMgcmV0dXJuIGl0c1xuXHQgKiBjb21wb25lbnQgaWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjaGVja0NvbXBvbmVudEF0dHIoZWwsIG9wdGlvbnMpIHtcblx0ICB2YXIgdGFnID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHQgIHZhciBoYXNBdHRycyA9IGVsLmhhc0F0dHJpYnV0ZXMoKTtcblx0ICBpZiAoIWNvbW1vblRhZ1JFLnRlc3QodGFnKSAmJiAhcmVzZXJ2ZWRUYWdSRS50ZXN0KHRhZykpIHtcblx0ICAgIGlmIChyZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCB0YWcpKSB7XG5cdCAgICAgIHJldHVybiB7IGlkOiB0YWcgfTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBpcyA9IGhhc0F0dHJzICYmIGdldElzQmluZGluZyhlbCwgb3B0aW9ucyk7XG5cdCAgICAgIGlmIChpcykge1xuXHQgICAgICAgIHJldHVybiBpcztcblx0ICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgdmFyIGV4cGVjdGVkVGFnID0gb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcCAmJiBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwW3RhZ107XG5cdCAgICAgICAgaWYgKGV4cGVjdGVkVGFnKSB7XG5cdCAgICAgICAgICB3YXJuKCdVbmtub3duIGN1c3RvbSBlbGVtZW50OiA8JyArIHRhZyArICc+IC0gJyArICdkaWQgeW91IG1lYW4gPCcgKyBleHBlY3RlZFRhZyArICc+PyAnICsgJ0hUTUwgaXMgY2FzZS1pbnNlbnNpdGl2ZSwgcmVtZW1iZXIgdG8gdXNlIGtlYmFiLWNhc2UgaW4gdGVtcGxhdGVzLicpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoaXNVbmtub3duRWxlbWVudChlbCwgdGFnKSkge1xuXHQgICAgICAgICAgd2FybignVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtIGRpZCB5b3UgJyArICdyZWdpc3RlciB0aGUgY29tcG9uZW50IGNvcnJlY3RseT8gRm9yIHJlY3Vyc2l2ZSBjb21wb25lbnRzLCAnICsgJ21ha2Ugc3VyZSB0byBwcm92aWRlIHRoZSBcIm5hbWVcIiBvcHRpb24uJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChoYXNBdHRycykge1xuXHQgICAgcmV0dXJuIGdldElzQmluZGluZyhlbCwgb3B0aW9ucyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IFwiaXNcIiBiaW5kaW5nIGZyb20gYW4gZWxlbWVudC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldElzQmluZGluZyhlbCwgb3B0aW9ucykge1xuXHQgIC8vIGR5bmFtaWMgc3ludGF4XG5cdCAgdmFyIGV4cCA9IGVsLmdldEF0dHJpYnV0ZSgnaXMnKTtcblx0ICBpZiAoZXhwICE9IG51bGwpIHtcblx0ICAgIGlmIChyZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCBleHApKSB7XG5cdCAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnaXMnKTtcblx0ICAgICAgcmV0dXJuIHsgaWQ6IGV4cCB9O1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBleHAgPSBnZXRCaW5kQXR0cihlbCwgJ2lzJyk7XG5cdCAgICBpZiAoZXhwICE9IG51bGwpIHtcblx0ICAgICAgcmV0dXJuIHsgaWQ6IGV4cCwgZHluYW1pYzogdHJ1ZSB9O1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIE9wdGlvbiBvdmVyd3JpdGluZyBzdHJhdGVnaWVzIGFyZSBmdW5jdGlvbnMgdGhhdCBoYW5kbGVcblx0ICogaG93IHRvIG1lcmdlIGEgcGFyZW50IG9wdGlvbiB2YWx1ZSBhbmQgYSBjaGlsZCBvcHRpb25cblx0ICogdmFsdWUgaW50byB0aGUgZmluYWwgdmFsdWUuXG5cdCAqXG5cdCAqIEFsbCBzdHJhdGVneSBmdW5jdGlvbnMgZm9sbG93IHRoZSBzYW1lIHNpZ25hdHVyZTpcblx0ICpcblx0ICogQHBhcmFtIHsqfSBwYXJlbnRWYWxcblx0ICogQHBhcmFtIHsqfSBjaGlsZFZhbFxuXHQgKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuXHQgKi9cblx0XG5cdHZhciBzdHJhdHMgPSBjb25maWcub3B0aW9uTWVyZ2VTdHJhdGVnaWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0XG5cdC8qKlxuXHQgKiBIZWxwZXIgdGhhdCByZWN1cnNpdmVseSBtZXJnZXMgdHdvIGRhdGEgb2JqZWN0cyB0b2dldGhlci5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtZXJnZURhdGEodG8sIGZyb20pIHtcblx0ICB2YXIga2V5LCB0b1ZhbCwgZnJvbVZhbDtcblx0ICBmb3IgKGtleSBpbiBmcm9tKSB7XG5cdCAgICB0b1ZhbCA9IHRvW2tleV07XG5cdCAgICBmcm9tVmFsID0gZnJvbVtrZXldO1xuXHQgICAgaWYgKCFoYXNPd24odG8sIGtleSkpIHtcblx0ICAgICAgc2V0KHRvLCBrZXksIGZyb21WYWwpO1xuXHQgICAgfSBlbHNlIGlmIChpc09iamVjdCh0b1ZhbCkgJiYgaXNPYmplY3QoZnJvbVZhbCkpIHtcblx0ICAgICAgbWVyZ2VEYXRhKHRvVmFsLCBmcm9tVmFsKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRvO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGF0YVxuXHQgKi9cblx0XG5cdHN0cmF0cy5kYXRhID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKSB7XG5cdCAgaWYgKCF2bSkge1xuXHQgICAgLy8gaW4gYSBWdWUuZXh0ZW5kIG1lcmdlLCBib3RoIHNob3VsZCBiZSBmdW5jdGlvbnNcblx0ICAgIGlmICghY2hpbGRWYWwpIHtcblx0ICAgICAgcmV0dXJuIHBhcmVudFZhbDtcblx0ICAgIH1cblx0ICAgIGlmICh0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdUaGUgXCJkYXRhXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgKyAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICsgJ2RlZmluaXRpb25zLicsIHZtKTtcblx0ICAgICAgcmV0dXJuIHBhcmVudFZhbDtcblx0ICAgIH1cblx0ICAgIGlmICghcGFyZW50VmFsKSB7XG5cdCAgICAgIHJldHVybiBjaGlsZFZhbDtcblx0ICAgIH1cblx0ICAgIC8vIHdoZW4gcGFyZW50VmFsICYgY2hpbGRWYWwgYXJlIGJvdGggcHJlc2VudCxcblx0ICAgIC8vIHdlIG5lZWQgdG8gcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZVxuXHQgICAgLy8gbWVyZ2VkIHJlc3VsdCBvZiBib3RoIGZ1bmN0aW9ucy4uLiBubyBuZWVkIHRvXG5cdCAgICAvLyBjaGVjayBpZiBwYXJlbnRWYWwgaXMgYSBmdW5jdGlvbiBoZXJlIGJlY2F1c2Vcblx0ICAgIC8vIGl0IGhhcyB0byBiZSBhIGZ1bmN0aW9uIHRvIHBhc3MgcHJldmlvdXMgbWVyZ2VzLlxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZERhdGFGbigpIHtcblx0ICAgICAgcmV0dXJuIG1lcmdlRGF0YShjaGlsZFZhbC5jYWxsKHRoaXMpLCBwYXJlbnRWYWwuY2FsbCh0aGlzKSk7XG5cdCAgICB9O1xuXHQgIH0gZWxzZSBpZiAocGFyZW50VmFsIHx8IGNoaWxkVmFsKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkSW5zdGFuY2VEYXRhRm4oKSB7XG5cdCAgICAgIC8vIGluc3RhbmNlIG1lcmdlXG5cdCAgICAgIHZhciBpbnN0YW5jZURhdGEgPSB0eXBlb2YgY2hpbGRWYWwgPT09ICdmdW5jdGlvbicgPyBjaGlsZFZhbC5jYWxsKHZtKSA6IGNoaWxkVmFsO1xuXHQgICAgICB2YXIgZGVmYXVsdERhdGEgPSB0eXBlb2YgcGFyZW50VmFsID09PSAnZnVuY3Rpb24nID8gcGFyZW50VmFsLmNhbGwodm0pIDogdW5kZWZpbmVkO1xuXHQgICAgICBpZiAoaW5zdGFuY2VEYXRhKSB7XG5cdCAgICAgICAgcmV0dXJuIG1lcmdlRGF0YShpbnN0YW5jZURhdGEsIGRlZmF1bHREYXRhKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gZGVmYXVsdERhdGE7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEVsXG5cdCAqL1xuXHRcblx0c3RyYXRzLmVsID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKSB7XG5cdCAgaWYgKCF2bSAmJiBjaGlsZFZhbCAmJiB0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVGhlIFwiZWxcIiBvcHRpb24gc2hvdWxkIGJlIGEgZnVuY3Rpb24gJyArICd0aGF0IHJldHVybnMgYSBwZXItaW5zdGFuY2UgdmFsdWUgaW4gY29tcG9uZW50ICcgKyAnZGVmaW5pdGlvbnMuJywgdm0pO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgcmV0ID0gY2hpbGRWYWwgfHwgcGFyZW50VmFsO1xuXHQgIC8vIGludm9rZSB0aGUgZWxlbWVudCBmYWN0b3J5IGlmIHRoaXMgaXMgaW5zdGFuY2UgbWVyZ2Vcblx0ICByZXR1cm4gdm0gJiYgdHlwZW9mIHJldCA9PT0gJ2Z1bmN0aW9uJyA/IHJldC5jYWxsKHZtKSA6IHJldDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBIb29rcyBhbmQgcGFyYW0gYXR0cmlidXRlcyBhcmUgbWVyZ2VkIGFzIGFycmF5cy5cblx0ICovXG5cdFxuXHRzdHJhdHMuaW5pdCA9IHN0cmF0cy5jcmVhdGVkID0gc3RyYXRzLnJlYWR5ID0gc3RyYXRzLmF0dGFjaGVkID0gc3RyYXRzLmRldGFjaGVkID0gc3RyYXRzLmJlZm9yZUNvbXBpbGUgPSBzdHJhdHMuY29tcGlsZWQgPSBzdHJhdHMuYmVmb3JlRGVzdHJveSA9IHN0cmF0cy5kZXN0cm95ZWQgPSBzdHJhdHMuYWN0aXZhdGUgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgIHJldHVybiBjaGlsZFZhbCA/IHBhcmVudFZhbCA/IHBhcmVudFZhbC5jb25jYXQoY2hpbGRWYWwpIDogaXNBcnJheShjaGlsZFZhbCkgPyBjaGlsZFZhbCA6IFtjaGlsZFZhbF0gOiBwYXJlbnRWYWw7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQXNzZXRzXG5cdCAqXG5cdCAqIFdoZW4gYSB2bSBpcyBwcmVzZW50IChpbnN0YW5jZSBjcmVhdGlvbiksIHdlIG5lZWQgdG8gZG9cblx0ICogYSB0aHJlZS13YXkgbWVyZ2UgYmV0d2VlbiBjb25zdHJ1Y3RvciBvcHRpb25zLCBpbnN0YW5jZVxuXHQgKiBvcHRpb25zIGFuZCBwYXJlbnQgb3B0aW9ucy5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtZXJnZUFzc2V0cyhwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG5cdCAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUocGFyZW50VmFsIHx8IG51bGwpO1xuXHQgIHJldHVybiBjaGlsZFZhbCA/IGV4dGVuZChyZXMsIGd1YXJkQXJyYXlBc3NldHMoY2hpbGRWYWwpKSA6IHJlcztcblx0fVxuXHRcblx0Y29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcblx0ICBzdHJhdHNbdHlwZSArICdzJ10gPSBtZXJnZUFzc2V0cztcblx0fSk7XG5cdFxuXHQvKipcblx0ICogRXZlbnRzICYgV2F0Y2hlcnMuXG5cdCAqXG5cdCAqIEV2ZW50cyAmIHdhdGNoZXJzIGhhc2hlcyBzaG91bGQgbm90IG92ZXJ3cml0ZSBvbmVcblx0ICogYW5vdGhlciwgc28gd2UgbWVyZ2UgdGhlbSBhcyBhcnJheXMuXG5cdCAqL1xuXHRcblx0c3RyYXRzLndhdGNoID0gc3RyYXRzLmV2ZW50cyA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG5cdCAgaWYgKCFjaGlsZFZhbCkgcmV0dXJuIHBhcmVudFZhbDtcblx0ICBpZiAoIXBhcmVudFZhbCkgcmV0dXJuIGNoaWxkVmFsO1xuXHQgIHZhciByZXQgPSB7fTtcblx0ICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuXHQgIGZvciAodmFyIGtleSBpbiBjaGlsZFZhbCkge1xuXHQgICAgdmFyIHBhcmVudCA9IHJldFtrZXldO1xuXHQgICAgdmFyIGNoaWxkID0gY2hpbGRWYWxba2V5XTtcblx0ICAgIGlmIChwYXJlbnQgJiYgIWlzQXJyYXkocGFyZW50KSkge1xuXHQgICAgICBwYXJlbnQgPSBbcGFyZW50XTtcblx0ICAgIH1cblx0ICAgIHJldFtrZXldID0gcGFyZW50ID8gcGFyZW50LmNvbmNhdChjaGlsZCkgOiBbY2hpbGRdO1xuXHQgIH1cblx0ICByZXR1cm4gcmV0O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE90aGVyIG9iamVjdCBoYXNoZXMuXG5cdCAqL1xuXHRcblx0c3RyYXRzLnByb3BzID0gc3RyYXRzLm1ldGhvZHMgPSBzdHJhdHMuY29tcHV0ZWQgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG5cdCAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbDtcblx0ICB2YXIgcmV0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuXHQgIGV4dGVuZChyZXQsIGNoaWxkVmFsKTtcblx0ICByZXR1cm4gcmV0O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIERlZmF1bHQgc3RyYXRlZ3kuXG5cdCAqL1xuXHRcblx0dmFyIGRlZmF1bHRTdHJhdCA9IGZ1bmN0aW9uIGRlZmF1bHRTdHJhdChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG5cdCAgcmV0dXJuIGNoaWxkVmFsID09PSB1bmRlZmluZWQgPyBwYXJlbnRWYWwgOiBjaGlsZFZhbDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBNYWtlIHN1cmUgY29tcG9uZW50IG9wdGlvbnMgZ2V0IGNvbnZlcnRlZCB0byBhY3R1YWxcblx0ICogY29uc3RydWN0b3JzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGd1YXJkQ29tcG9uZW50cyhvcHRpb25zKSB7XG5cdCAgaWYgKG9wdGlvbnMuY29tcG9uZW50cykge1xuXHQgICAgdmFyIGNvbXBvbmVudHMgPSBvcHRpb25zLmNvbXBvbmVudHMgPSBndWFyZEFycmF5QXNzZXRzKG9wdGlvbnMuY29tcG9uZW50cyk7XG5cdCAgICB2YXIgaWRzID0gT2JqZWN0LmtleXMoY29tcG9uZW50cyk7XG5cdCAgICB2YXIgZGVmO1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgdmFyIG1hcCA9IG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXAgPSB7fTtcblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gaWRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIga2V5ID0gaWRzW2ldO1xuXHQgICAgICBpZiAoY29tbW9uVGFnUkUudGVzdChrZXkpIHx8IHJlc2VydmVkVGFnUkUudGVzdChrZXkpKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgKyAnaWQ6ICcgKyBrZXkpO1xuXHQgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIHJlY29yZCBhIGFsbCBsb3dlcmNhc2UgPC0+IGtlYmFiLWNhc2UgbWFwcGluZyBmb3Jcblx0ICAgICAgLy8gcG9zc2libGUgY3VzdG9tIGVsZW1lbnQgY2FzZSBlcnJvciB3YXJuaW5nXG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgbWFwW2tleS5yZXBsYWNlKC8tL2csICcnKS50b0xvd2VyQ2FzZSgpXSA9IGh5cGhlbmF0ZShrZXkpO1xuXHQgICAgICB9XG5cdCAgICAgIGRlZiA9IGNvbXBvbmVudHNba2V5XTtcblx0ICAgICAgaWYgKGlzUGxhaW5PYmplY3QoZGVmKSkge1xuXHQgICAgICAgIGNvbXBvbmVudHNba2V5XSA9IFZ1ZS5leHRlbmQoZGVmKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEVuc3VyZSBhbGwgcHJvcHMgb3B0aW9uIHN5bnRheCBhcmUgbm9ybWFsaXplZCBpbnRvIHRoZVxuXHQgKiBPYmplY3QtYmFzZWQgZm9ybWF0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGd1YXJkUHJvcHMob3B0aW9ucykge1xuXHQgIHZhciBwcm9wcyA9IG9wdGlvbnMucHJvcHM7XG5cdCAgdmFyIGksIHZhbDtcblx0ICBpZiAoaXNBcnJheShwcm9wcykpIHtcblx0ICAgIG9wdGlvbnMucHJvcHMgPSB7fTtcblx0ICAgIGkgPSBwcm9wcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhbCA9IHByb3BzW2ldO1xuXHQgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICBvcHRpb25zLnByb3BzW3ZhbF0gPSBudWxsO1xuXHQgICAgICB9IGVsc2UgaWYgKHZhbC5uYW1lKSB7XG5cdCAgICAgICAgb3B0aW9ucy5wcm9wc1t2YWwubmFtZV0gPSB2YWw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QocHJvcHMpKSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BzKTtcblx0ICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdmFsID0gcHJvcHNba2V5c1tpXV07XG5cdCAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgcHJvcHNba2V5c1tpXV0gPSB7IHR5cGU6IHZhbCB9O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogR3VhcmQgYW4gQXJyYXktZm9ybWF0IGFzc2V0cyBvcHRpb24gYW5kIGNvbnZlcnRlZCBpdFxuXHQgKiBpbnRvIHRoZSBrZXktdmFsdWUgT2JqZWN0IGZvcm1hdC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGFzc2V0c1xuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ3VhcmRBcnJheUFzc2V0cyhhc3NldHMpIHtcblx0ICBpZiAoaXNBcnJheShhc3NldHMpKSB7XG5cdCAgICB2YXIgcmVzID0ge307XG5cdCAgICB2YXIgaSA9IGFzc2V0cy5sZW5ndGg7XG5cdCAgICB2YXIgYXNzZXQ7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGFzc2V0ID0gYXNzZXRzW2ldO1xuXHQgICAgICB2YXIgaWQgPSB0eXBlb2YgYXNzZXQgPT09ICdmdW5jdGlvbicgPyBhc3NldC5vcHRpb25zICYmIGFzc2V0Lm9wdGlvbnMubmFtZSB8fCBhc3NldC5pZCA6IGFzc2V0Lm5hbWUgfHwgYXNzZXQuaWQ7XG5cdCAgICAgIGlmICghaWQpIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0FycmF5LXN5bnRheCBhc3NldHMgbXVzdCBwcm92aWRlIGEgXCJuYW1lXCIgb3IgXCJpZFwiIGZpZWxkLicpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlc1tpZF0gPSBhc3NldDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlcztcblx0ICB9XG5cdCAgcmV0dXJuIGFzc2V0cztcblx0fVxuXHRcblx0LyoqXG5cdCAqIE1lcmdlIHR3byBvcHRpb24gb2JqZWN0cyBpbnRvIGEgbmV3IG9uZS5cblx0ICogQ29yZSB1dGlsaXR5IHVzZWQgaW4gYm90aCBpbnN0YW50aWF0aW9uIGFuZCBpbmhlcml0YW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHBhcmVudFxuXHQgKiBAcGFyYW0ge09iamVjdH0gY2hpbGRcblx0ICogQHBhcmFtIHtWdWV9IFt2bV0gLSBpZiB2bSBpcyBwcmVzZW50LCBpbmRpY2F0ZXMgdGhpcyBpc1xuXHQgKiAgICAgICAgICAgICAgICAgICAgIGFuIGluc3RhbnRpYXRpb24gbWVyZ2UuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGQsIHZtKSB7XG5cdCAgZ3VhcmRDb21wb25lbnRzKGNoaWxkKTtcblx0ICBndWFyZFByb3BzKGNoaWxkKTtcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgaWYgKGNoaWxkLnByb3BzRGF0YSAmJiAhdm0pIHtcblx0ICAgICAgd2FybigncHJvcHNEYXRhIGNhbiBvbmx5IGJlIHVzZWQgYXMgYW4gaW5zdGFudGlhdGlvbiBvcHRpb24uJyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciBvcHRpb25zID0ge307XG5cdCAgdmFyIGtleTtcblx0ICBpZiAoY2hpbGRbJ2V4dGVuZHMnXSkge1xuXHQgICAgcGFyZW50ID0gdHlwZW9mIGNoaWxkWydleHRlbmRzJ10gPT09ICdmdW5jdGlvbicgPyBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZFsnZXh0ZW5kcyddLm9wdGlvbnMsIHZtKSA6IG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkWydleHRlbmRzJ10sIHZtKTtcblx0ICB9XG5cdCAgaWYgKGNoaWxkLm1peGlucykge1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZC5taXhpbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBtaXhpbiA9IGNoaWxkLm1peGluc1tpXTtcblx0ICAgICAgdmFyIG1peGluT3B0aW9ucyA9IG1peGluLnByb3RvdHlwZSBpbnN0YW5jZW9mIFZ1ZSA/IG1peGluLm9wdGlvbnMgOiBtaXhpbjtcblx0ICAgICAgcGFyZW50ID0gbWVyZ2VPcHRpb25zKHBhcmVudCwgbWl4aW5PcHRpb25zLCB2bSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGZvciAoa2V5IGluIHBhcmVudCkge1xuXHQgICAgbWVyZ2VGaWVsZChrZXkpO1xuXHQgIH1cblx0ICBmb3IgKGtleSBpbiBjaGlsZCkge1xuXHQgICAgaWYgKCFoYXNPd24ocGFyZW50LCBrZXkpKSB7XG5cdCAgICAgIG1lcmdlRmllbGQoa2V5KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgZnVuY3Rpb24gbWVyZ2VGaWVsZChrZXkpIHtcblx0ICAgIHZhciBzdHJhdCA9IHN0cmF0c1trZXldIHx8IGRlZmF1bHRTdHJhdDtcblx0ICAgIG9wdGlvbnNba2V5XSA9IHN0cmF0KHBhcmVudFtrZXldLCBjaGlsZFtrZXldLCB2bSwga2V5KTtcblx0ICB9XG5cdCAgcmV0dXJuIG9wdGlvbnM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZXNvbHZlIGFuIGFzc2V0LlxuXHQgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYmVjYXVzZSBjaGlsZCBpbnN0YW5jZXMgbmVlZCBhY2Nlc3Ncblx0ICogdG8gYXNzZXRzIGRlZmluZWQgaW4gaXRzIGFuY2VzdG9yIGNoYWluLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaWRcblx0ICogQHBhcmFtIHtCb29sZWFufSB3YXJuTWlzc2luZ1xuXHQgKiBAcmV0dXJuIHtPYmplY3R8RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsIHR5cGUsIGlkLCB3YXJuTWlzc2luZykge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICh0eXBlb2YgaWQgIT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBhc3NldHMgPSBvcHRpb25zW3R5cGVdO1xuXHQgIHZhciBjYW1lbGl6ZWRJZDtcblx0ICB2YXIgcmVzID0gYXNzZXRzW2lkXSB8fFxuXHQgIC8vIGNhbWVsQ2FzZSBJRFxuXHQgIGFzc2V0c1tjYW1lbGl6ZWRJZCA9IGNhbWVsaXplKGlkKV0gfHxcblx0ICAvLyBQYXNjYWwgQ2FzZSBJRFxuXHQgIGFzc2V0c1tjYW1lbGl6ZWRJZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbWVsaXplZElkLnNsaWNlKDEpXTtcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuTWlzc2luZyAmJiAhcmVzKSB7XG5cdCAgICB3YXJuKCdGYWlsZWQgdG8gcmVzb2x2ZSAnICsgdHlwZS5zbGljZSgwLCAtMSkgKyAnOiAnICsgaWQsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHR2YXIgdWlkJDEgPSAwO1xuXHRcblx0LyoqXG5cdCAqIEEgZGVwIGlzIGFuIG9ic2VydmFibGUgdGhhdCBjYW4gaGF2ZSBtdWx0aXBsZVxuXHQgKiBkaXJlY3RpdmVzIHN1YnNjcmliaW5nIHRvIGl0LlxuXHQgKlxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICovXG5cdGZ1bmN0aW9uIERlcCgpIHtcblx0ICB0aGlzLmlkID0gdWlkJDErKztcblx0ICB0aGlzLnN1YnMgPSBbXTtcblx0fVxuXHRcblx0Ly8gdGhlIGN1cnJlbnQgdGFyZ2V0IHdhdGNoZXIgYmVpbmcgZXZhbHVhdGVkLlxuXHQvLyB0aGlzIGlzIGdsb2JhbGx5IHVuaXF1ZSBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG9ubHkgb25lXG5cdC8vIHdhdGNoZXIgYmVpbmcgZXZhbHVhdGVkIGF0IGFueSB0aW1lLlxuXHREZXAudGFyZ2V0ID0gbnVsbDtcblx0XG5cdC8qKlxuXHQgKiBBZGQgYSBkaXJlY3RpdmUgc3Vic2NyaWJlci5cblx0ICpcblx0ICogQHBhcmFtIHtEaXJlY3RpdmV9IHN1YlxuXHQgKi9cblx0XG5cdERlcC5wcm90b3R5cGUuYWRkU3ViID0gZnVuY3Rpb24gKHN1Yikge1xuXHQgIHRoaXMuc3Vicy5wdXNoKHN1Yik7XG5cdH07XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGEgZGlyZWN0aXZlIHN1YnNjcmliZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RGlyZWN0aXZlfSBzdWJcblx0ICovXG5cdFxuXHREZXAucHJvdG90eXBlLnJlbW92ZVN1YiA9IGZ1bmN0aW9uIChzdWIpIHtcblx0ICB0aGlzLnN1YnMuJHJlbW92ZShzdWIpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEFkZCBzZWxmIGFzIGEgZGVwZW5kZW5jeSB0byB0aGUgdGFyZ2V0IHdhdGNoZXIuXG5cdCAqL1xuXHRcblx0RGVwLnByb3RvdHlwZS5kZXBlbmQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgRGVwLnRhcmdldC5hZGREZXAodGhpcyk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogTm90aWZ5IGFsbCBzdWJzY3JpYmVycyBvZiBhIG5ldyB2YWx1ZS5cblx0ICovXG5cdFxuXHREZXAucHJvdG90eXBlLm5vdGlmeSA9IGZ1bmN0aW9uICgpIHtcblx0ICAvLyBzdGFibGl6ZSB0aGUgc3Vic2NyaWJlciBsaXN0IGZpcnN0XG5cdCAgdmFyIHN1YnMgPSB0b0FycmF5KHRoaXMuc3Vicyk7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdWJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgc3Vic1tpXS51cGRhdGUoKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTtcblx0dmFyIGFycmF5TWV0aG9kcyA9IE9iamVjdC5jcmVhdGUoYXJyYXlQcm90bylcblx0XG5cdC8qKlxuXHQgKiBJbnRlcmNlcHQgbXV0YXRpbmcgbWV0aG9kcyBhbmQgZW1pdCBldmVudHNcblx0ICovXG5cdFxuXHQ7WydwdXNoJywgJ3BvcCcsICdzaGlmdCcsICd1bnNoaWZ0JywgJ3NwbGljZScsICdzb3J0JywgJ3JldmVyc2UnXS5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHtcblx0ICAvLyBjYWNoZSBvcmlnaW5hbCBtZXRob2Rcblx0ICB2YXIgb3JpZ2luYWwgPSBhcnJheVByb3RvW21ldGhvZF07XG5cdCAgZGVmKGFycmF5TWV0aG9kcywgbWV0aG9kLCBmdW5jdGlvbiBtdXRhdG9yKCkge1xuXHQgICAgLy8gYXZvaWQgbGVha2luZyBhcmd1bWVudHM6XG5cdCAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9jbG9zdXJlLXdpdGgtYXJndW1lbnRzXG5cdCAgICB2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShpKTtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgIH1cblx0ICAgIHZhciByZXN1bHQgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmdzKTtcblx0ICAgIHZhciBvYiA9IHRoaXMuX19vYl9fO1xuXHQgICAgdmFyIGluc2VydGVkO1xuXHQgICAgc3dpdGNoIChtZXRob2QpIHtcblx0ICAgICAgY2FzZSAncHVzaCc6XG5cdCAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICd1bnNoaWZ0Jzpcblx0ICAgICAgICBpbnNlcnRlZCA9IGFyZ3M7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ3NwbGljZSc6XG5cdCAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzLnNsaWNlKDIpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHQgICAgaWYgKGluc2VydGVkKSBvYi5vYnNlcnZlQXJyYXkoaW5zZXJ0ZWQpO1xuXHQgICAgLy8gbm90aWZ5IGNoYW5nZVxuXHQgICAgb2IuZGVwLm5vdGlmeSgpO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9KTtcblx0fSk7XG5cdFxuXHQvKipcblx0ICogU3dhcCB0aGUgZWxlbWVudCBhdCB0aGUgZ2l2ZW4gaW5kZXggd2l0aCBhIG5ldyB2YWx1ZVxuXHQgKiBhbmQgZW1pdHMgY29ycmVzcG9uZGluZyBldmVudC5cblx0ICpcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqIEByZXR1cm4geyp9IC0gcmVwbGFjZWQgZWxlbWVudFxuXHQgKi9cblx0XG5cdGRlZihhcnJheVByb3RvLCAnJHNldCcsIGZ1bmN0aW9uICRzZXQoaW5kZXgsIHZhbCkge1xuXHQgIGlmIChpbmRleCA+PSB0aGlzLmxlbmd0aCkge1xuXHQgICAgdGhpcy5sZW5ndGggPSBOdW1iZXIoaW5kZXgpICsgMTtcblx0ICB9XG5cdCAgcmV0dXJuIHRoaXMuc3BsaWNlKGluZGV4LCAxLCB2YWwpWzBdO1xuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcmVtb3ZlIHRoZSBlbGVtZW50IGF0IGdpdmVuIGluZGV4IG9yIHRhcmdldCBlbGVtZW50IHJlZmVyZW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHsqfSBpdGVtXG5cdCAqL1xuXHRcblx0ZGVmKGFycmF5UHJvdG8sICckcmVtb3ZlJywgZnVuY3Rpb24gJHJlbW92ZShpdGVtKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKCF0aGlzLmxlbmd0aCkgcmV0dXJuO1xuXHQgIHZhciBpbmRleCA9IGluZGV4T2YodGhpcywgaXRlbSk7XG5cdCAgaWYgKGluZGV4ID4gLTEpIHtcblx0ICAgIHJldHVybiB0aGlzLnNwbGljZShpbmRleCwgMSk7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBhcnJheUtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhcnJheU1ldGhvZHMpO1xuXHRcblx0LyoqXG5cdCAqIEJ5IGRlZmF1bHQsIHdoZW4gYSByZWFjdGl2ZSBwcm9wZXJ0eSBpcyBzZXQsIHRoZSBuZXcgdmFsdWUgaXNcblx0ICogYWxzbyBjb252ZXJ0ZWQgdG8gYmVjb21lIHJlYWN0aXZlLiBIb3dldmVyIGluIGNlcnRhaW4gY2FzZXMsIGUuZy5cblx0ICogdi1mb3Igc2NvcGUgYWxpYXMgYW5kIHByb3BzLCB3ZSBkb24ndCB3YW50IHRvIGZvcmNlIGNvbnZlcnNpb25cblx0ICogYmVjYXVzZSB0aGUgdmFsdWUgbWF5IGJlIGEgbmVzdGVkIHZhbHVlIHVuZGVyIGEgZnJvemVuIGRhdGEgc3RydWN0dXJlLlxuXHQgKlxuXHQgKiBTbyB3aGVuZXZlciB3ZSB3YW50IHRvIHNldCBhIHJlYWN0aXZlIHByb3BlcnR5IHdpdGhvdXQgZm9yY2luZ1xuXHQgKiBjb252ZXJzaW9uIG9uIHRoZSBuZXcgdmFsdWUsIHdlIHdyYXAgdGhhdCBjYWxsIGluc2lkZSB0aGlzIGZ1bmN0aW9uLlxuXHQgKi9cblx0XG5cdHZhciBzaG91bGRDb252ZXJ0ID0gdHJ1ZTtcblx0XG5cdGZ1bmN0aW9uIHdpdGhvdXRDb252ZXJzaW9uKGZuKSB7XG5cdCAgc2hvdWxkQ29udmVydCA9IGZhbHNlO1xuXHQgIGZuKCk7XG5cdCAgc2hvdWxkQ29udmVydCA9IHRydWU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBPYnNlcnZlciBjbGFzcyB0aGF0IGFyZSBhdHRhY2hlZCB0byBlYWNoIG9ic2VydmVkXG5cdCAqIG9iamVjdC4gT25jZSBhdHRhY2hlZCwgdGhlIG9ic2VydmVyIGNvbnZlcnRzIHRhcmdldFxuXHQgKiBvYmplY3QncyBwcm9wZXJ0eSBrZXlzIGludG8gZ2V0dGVyL3NldHRlcnMgdGhhdFxuXHQgKiBjb2xsZWN0IGRlcGVuZGVuY2llcyBhbmQgZGlzcGF0Y2hlcyB1cGRhdGVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gdmFsdWVcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gT2JzZXJ2ZXIodmFsdWUpIHtcblx0ICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cdCAgdGhpcy5kZXAgPSBuZXcgRGVwKCk7XG5cdCAgZGVmKHZhbHVlLCAnX19vYl9fJywgdGhpcyk7XG5cdCAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICB2YXIgYXVnbWVudCA9IGhhc1Byb3RvID8gcHJvdG9BdWdtZW50IDogY29weUF1Z21lbnQ7XG5cdCAgICBhdWdtZW50KHZhbHVlLCBhcnJheU1ldGhvZHMsIGFycmF5S2V5cyk7XG5cdCAgICB0aGlzLm9ic2VydmVBcnJheSh2YWx1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRoaXMud2Fsayh2YWx1ZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyBJbnN0YW5jZSBtZXRob2RzXG5cdFxuXHQvKipcblx0ICogV2FsayB0aHJvdWdoIGVhY2ggcHJvcGVydHkgYW5kIGNvbnZlcnQgdGhlbSBpbnRvXG5cdCAqIGdldHRlci9zZXR0ZXJzLiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgd2hlblxuXHQgKiB2YWx1ZSB0eXBlIGlzIE9iamVjdC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKi9cblx0XG5cdE9ic2VydmVyLnByb3RvdHlwZS53YWxrID0gZnVuY3Rpb24gKG9iaikge1xuXHQgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICB0aGlzLmNvbnZlcnQoa2V5c1tpXSwgb2JqW2tleXNbaV1dKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogT2JzZXJ2ZSBhIGxpc3Qgb2YgQXJyYXkgaXRlbXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGl0ZW1zXG5cdCAqL1xuXHRcblx0T2JzZXJ2ZXIucHJvdG90eXBlLm9ic2VydmVBcnJheSA9IGZ1bmN0aW9uIChpdGVtcykge1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gaXRlbXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBvYnNlcnZlKGl0ZW1zW2ldKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBhIHByb3BlcnR5IGludG8gZ2V0dGVyL3NldHRlciBzbyB3ZSBjYW4gZW1pdFxuXHQgKiB0aGUgZXZlbnRzIHdoZW4gdGhlIHByb3BlcnR5IGlzIGFjY2Vzc2VkL2NoYW5nZWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICovXG5cdFxuXHRPYnNlcnZlci5wcm90b3R5cGUuY29udmVydCA9IGZ1bmN0aW9uIChrZXksIHZhbCkge1xuXHQgIGRlZmluZVJlYWN0aXZlKHRoaXMudmFsdWUsIGtleSwgdmFsKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBZGQgYW4gb3duZXIgdm0sIHNvIHRoYXQgd2hlbiAkc2V0LyRkZWxldGUgbXV0YXRpb25zXG5cdCAqIGhhcHBlbiB3ZSBjYW4gbm90aWZ5IG93bmVyIHZtcyB0byBwcm94eSB0aGUga2V5cyBhbmRcblx0ICogZGlnZXN0IHRoZSB3YXRjaGVycy4gVGhpcyBpcyBvbmx5IGNhbGxlZCB3aGVuIHRoZSBvYmplY3Rcblx0ICogaXMgb2JzZXJ2ZWQgYXMgYW4gaW5zdGFuY2UncyByb290ICRkYXRhLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICovXG5cdFxuXHRPYnNlcnZlci5wcm90b3R5cGUuYWRkVm0gPSBmdW5jdGlvbiAodm0pIHtcblx0ICAodGhpcy52bXMgfHwgKHRoaXMudm1zID0gW10pKS5wdXNoKHZtKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgYW4gb3duZXIgdm0uIFRoaXMgaXMgY2FsbGVkIHdoZW4gdGhlIG9iamVjdCBpc1xuXHQgKiBzd2FwcGVkIG91dCBhcyBhbiBpbnN0YW5jZSdzICRkYXRhIG9iamVjdC5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRcblx0T2JzZXJ2ZXIucHJvdG90eXBlLnJlbW92ZVZtID0gZnVuY3Rpb24gKHZtKSB7XG5cdCAgdGhpcy52bXMuJHJlbW92ZSh2bSk7XG5cdH07XG5cdFxuXHQvLyBoZWxwZXJzXG5cdFxuXHQvKipcblx0ICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGludGVyY2VwdGluZ1xuXHQgKiB0aGUgcHJvdG90eXBlIGNoYWluIHVzaW5nIF9fcHJvdG9fX1xuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzcmNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcm90b0F1Z21lbnQodGFyZ2V0LCBzcmMpIHtcblx0ICAvKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuXHQgIHRhcmdldC5fX3Byb3RvX18gPSBzcmM7XG5cdCAgLyogZXNsaW50LWVuYWJsZSBuby1wcm90byAqL1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGRlZmluaW5nXG5cdCAqIGhpZGRlbiBwcm9wZXJ0aWVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm90b1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvcHlBdWdtZW50KHRhcmdldCwgc3JjLCBrZXlzKSB7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdmFyIGtleSA9IGtleXNbaV07XG5cdCAgICBkZWYodGFyZ2V0LCBrZXksIHNyY1trZXldKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBdHRlbXB0IHRvIGNyZWF0ZSBhbiBvYnNlcnZlciBpbnN0YW5jZSBmb3IgYSB2YWx1ZSxcblx0ICogcmV0dXJucyB0aGUgbmV3IG9ic2VydmVyIGlmIHN1Y2Nlc3NmdWxseSBvYnNlcnZlZCxcblx0ICogb3IgdGhlIGV4aXN0aW5nIG9ic2VydmVyIGlmIHRoZSB2YWx1ZSBhbHJlYWR5IGhhcyBvbmUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHBhcmFtIHtWdWV9IFt2bV1cblx0ICogQHJldHVybiB7T2JzZXJ2ZXJ8dW5kZWZpbmVkfVxuXHQgKiBAc3RhdGljXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gb2JzZXJ2ZSh2YWx1ZSwgdm0pIHtcblx0ICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIG9iO1xuXHQgIGlmIChoYXNPd24odmFsdWUsICdfX29iX18nKSAmJiB2YWx1ZS5fX29iX18gaW5zdGFuY2VvZiBPYnNlcnZlcikge1xuXHQgICAgb2IgPSB2YWx1ZS5fX29iX187XG5cdCAgfSBlbHNlIGlmIChzaG91bGRDb252ZXJ0ICYmIChpc0FycmF5KHZhbHVlKSB8fCBpc1BsYWluT2JqZWN0KHZhbHVlKSkgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWx1ZSkgJiYgIXZhbHVlLl9pc1Z1ZSkge1xuXHQgICAgb2IgPSBuZXcgT2JzZXJ2ZXIodmFsdWUpO1xuXHQgIH1cblx0ICBpZiAob2IgJiYgdm0pIHtcblx0ICAgIG9iLmFkZFZtKHZtKTtcblx0ICB9XG5cdCAgcmV0dXJuIG9iO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGVmaW5lIGEgcmVhY3RpdmUgcHJvcGVydHkgb24gYW4gT2JqZWN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkZWZpbmVSZWFjdGl2ZShvYmosIGtleSwgdmFsKSB7XG5cdCAgdmFyIGRlcCA9IG5ldyBEZXAoKTtcblx0XG5cdCAgdmFyIHByb3BlcnR5ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG5cdCAgaWYgKHByb3BlcnR5ICYmIHByb3BlcnR5LmNvbmZpZ3VyYWJsZSA9PT0gZmFsc2UpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdFxuXHQgIC8vIGNhdGVyIGZvciBwcmUtZGVmaW5lZCBnZXR0ZXIvc2V0dGVyc1xuXHQgIHZhciBnZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5nZXQ7XG5cdCAgdmFyIHNldHRlciA9IHByb3BlcnR5ICYmIHByb3BlcnR5LnNldDtcblx0XG5cdCAgdmFyIGNoaWxkT2IgPSBvYnNlcnZlKHZhbCk7XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG5cdCAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiByZWFjdGl2ZUdldHRlcigpIHtcblx0ICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcblx0ICAgICAgaWYgKERlcC50YXJnZXQpIHtcblx0ICAgICAgICBkZXAuZGVwZW5kKCk7XG5cdCAgICAgICAgaWYgKGNoaWxkT2IpIHtcblx0ICAgICAgICAgIGNoaWxkT2IuZGVwLmRlcGVuZCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgICAgIGZvciAodmFyIGUsIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGUgPSB2YWx1ZVtpXTtcblx0ICAgICAgICAgICAgZSAmJiBlLl9fb2JfXyAmJiBlLl9fb2JfXy5kZXAuZGVwZW5kKCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlU2V0dGVyKG5ld1ZhbCkge1xuXHQgICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogdmFsO1xuXHQgICAgICBpZiAobmV3VmFsID09PSB2YWx1ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoc2V0dGVyKSB7XG5cdCAgICAgICAgc2V0dGVyLmNhbGwob2JqLCBuZXdWYWwpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHZhbCA9IG5ld1ZhbDtcblx0ICAgICAgfVxuXHQgICAgICBjaGlsZE9iID0gb2JzZXJ2ZShuZXdWYWwpO1xuXHQgICAgICBkZXAubm90aWZ5KCk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdH1cblx0XG5cdFxuXHRcblx0dmFyIHV0aWwgPSBPYmplY3QuZnJlZXplKHtcblx0XHRkZWZpbmVSZWFjdGl2ZTogZGVmaW5lUmVhY3RpdmUsXG5cdFx0c2V0OiBzZXQsXG5cdFx0ZGVsOiBkZWwsXG5cdFx0aGFzT3duOiBoYXNPd24sXG5cdFx0aXNMaXRlcmFsOiBpc0xpdGVyYWwsXG5cdFx0aXNSZXNlcnZlZDogaXNSZXNlcnZlZCxcblx0XHRfdG9TdHJpbmc6IF90b1N0cmluZyxcblx0XHR0b051bWJlcjogdG9OdW1iZXIsXG5cdFx0dG9Cb29sZWFuOiB0b0Jvb2xlYW4sXG5cdFx0c3RyaXBRdW90ZXM6IHN0cmlwUXVvdGVzLFxuXHRcdGNhbWVsaXplOiBjYW1lbGl6ZSxcblx0XHRoeXBoZW5hdGU6IGh5cGhlbmF0ZSxcblx0XHRjbGFzc2lmeTogY2xhc3NpZnksXG5cdFx0YmluZDogYmluZCxcblx0XHR0b0FycmF5OiB0b0FycmF5LFxuXHRcdGV4dGVuZDogZXh0ZW5kLFxuXHRcdGlzT2JqZWN0OiBpc09iamVjdCxcblx0XHRpc1BsYWluT2JqZWN0OiBpc1BsYWluT2JqZWN0LFxuXHRcdGRlZjogZGVmLFxuXHRcdGRlYm91bmNlOiBfZGVib3VuY2UsXG5cdFx0aW5kZXhPZjogaW5kZXhPZixcblx0XHRjYW5jZWxsYWJsZTogY2FuY2VsbGFibGUsXG5cdFx0bG9vc2VFcXVhbDogbG9vc2VFcXVhbCxcblx0XHRpc0FycmF5OiBpc0FycmF5LFxuXHRcdGhhc1Byb3RvOiBoYXNQcm90byxcblx0XHRpbkJyb3dzZXI6IGluQnJvd3Nlcixcblx0XHRkZXZ0b29sczogZGV2dG9vbHMsXG5cdFx0aXNJRTogaXNJRSxcblx0XHRpc0lFOTogaXNJRTksXG5cdFx0aXNBbmRyb2lkOiBpc0FuZHJvaWQsXG5cdFx0aXNJb3M6IGlzSW9zLFxuXHRcdGlvc1ZlcnNpb25NYXRjaDogaW9zVmVyc2lvbk1hdGNoLFxuXHRcdGlvc1ZlcnNpb246IGlvc1ZlcnNpb24sXG5cdFx0aGFzTXV0YXRpb25PYnNlcnZlckJ1ZzogaGFzTXV0YXRpb25PYnNlcnZlckJ1Zyxcblx0XHRnZXQgdHJhbnNpdGlvblByb3AgKCkgeyByZXR1cm4gdHJhbnNpdGlvblByb3A7IH0sXG5cdFx0Z2V0IHRyYW5zaXRpb25FbmRFdmVudCAoKSB7IHJldHVybiB0cmFuc2l0aW9uRW5kRXZlbnQ7IH0sXG5cdFx0Z2V0IGFuaW1hdGlvblByb3AgKCkgeyByZXR1cm4gYW5pbWF0aW9uUHJvcDsgfSxcblx0XHRnZXQgYW5pbWF0aW9uRW5kRXZlbnQgKCkgeyByZXR1cm4gYW5pbWF0aW9uRW5kRXZlbnQ7IH0sXG5cdFx0bmV4dFRpY2s6IG5leHRUaWNrLFxuXHRcdGdldCBfU2V0ICgpIHsgcmV0dXJuIF9TZXQ7IH0sXG5cdFx0cXVlcnk6IHF1ZXJ5LFxuXHRcdGluRG9jOiBpbkRvYyxcblx0XHRnZXRBdHRyOiBnZXRBdHRyLFxuXHRcdGdldEJpbmRBdHRyOiBnZXRCaW5kQXR0cixcblx0XHRoYXNCaW5kQXR0cjogaGFzQmluZEF0dHIsXG5cdFx0YmVmb3JlOiBiZWZvcmUsXG5cdFx0YWZ0ZXI6IGFmdGVyLFxuXHRcdHJlbW92ZTogcmVtb3ZlLFxuXHRcdHByZXBlbmQ6IHByZXBlbmQsXG5cdFx0cmVwbGFjZTogcmVwbGFjZSxcblx0XHRvbjogb24sXG5cdFx0b2ZmOiBvZmYsXG5cdFx0c2V0Q2xhc3M6IHNldENsYXNzLFxuXHRcdGFkZENsYXNzOiBhZGRDbGFzcyxcblx0XHRyZW1vdmVDbGFzczogcmVtb3ZlQ2xhc3MsXG5cdFx0ZXh0cmFjdENvbnRlbnQ6IGV4dHJhY3RDb250ZW50LFxuXHRcdHRyaW1Ob2RlOiB0cmltTm9kZSxcblx0XHRpc1RlbXBsYXRlOiBpc1RlbXBsYXRlLFxuXHRcdGNyZWF0ZUFuY2hvcjogY3JlYXRlQW5jaG9yLFxuXHRcdGZpbmRSZWY6IGZpbmRSZWYsXG5cdFx0bWFwTm9kZVJhbmdlOiBtYXBOb2RlUmFuZ2UsXG5cdFx0cmVtb3ZlTm9kZVJhbmdlOiByZW1vdmVOb2RlUmFuZ2UsXG5cdFx0aXNGcmFnbWVudDogaXNGcmFnbWVudCxcblx0XHRnZXRPdXRlckhUTUw6IGdldE91dGVySFRNTCxcblx0XHRtZXJnZU9wdGlvbnM6IG1lcmdlT3B0aW9ucyxcblx0XHRyZXNvbHZlQXNzZXQ6IHJlc29sdmVBc3NldCxcblx0XHRjaGVja0NvbXBvbmVudEF0dHI6IGNoZWNrQ29tcG9uZW50QXR0cixcblx0XHRjb21tb25UYWdSRTogY29tbW9uVGFnUkUsXG5cdFx0cmVzZXJ2ZWRUYWdSRTogcmVzZXJ2ZWRUYWdSRSxcblx0XHRnZXQgd2FybiAoKSB7IHJldHVybiB3YXJuOyB9XG5cdH0pO1xuXHRcblx0dmFyIHVpZCA9IDA7XG5cdFxuXHRmdW5jdGlvbiBpbml0TWl4aW4gKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIFRoZSBtYWluIGluaXQgc2VxdWVuY2UuIFRoaXMgaXMgY2FsbGVkIGZvciBldmVyeVxuXHQgICAqIGluc3RhbmNlLCBpbmNsdWRpbmcgb25lcyB0aGF0IGFyZSBjcmVhdGVkIGZyb20gZXh0ZW5kZWRcblx0ICAgKiBjb25zdHJ1Y3RvcnMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIHRoaXMgb3B0aW9ucyBvYmplY3Qgc2hvdWxkIGJlXG5cdCAgICogICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgcmVzdWx0IG9mIG1lcmdpbmcgY2xhc3Ncblx0ICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgYW5kIHRoZSBvcHRpb25zIHBhc3NlZFxuXHQgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gdG8gdGhlIGNvbnN0cnVjdG9yLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcblx0ICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcblx0ICAgIHRoaXMuJGVsID0gbnVsbDtcblx0ICAgIHRoaXMuJHBhcmVudCA9IG9wdGlvbnMucGFyZW50O1xuXHQgICAgdGhpcy4kcm9vdCA9IHRoaXMuJHBhcmVudCA/IHRoaXMuJHBhcmVudC4kcm9vdCA6IHRoaXM7XG5cdCAgICB0aGlzLiRjaGlsZHJlbiA9IFtdO1xuXHQgICAgdGhpcy4kcmVmcyA9IHt9OyAvLyBjaGlsZCB2bSByZWZlcmVuY2VzXG5cdCAgICB0aGlzLiRlbHMgPSB7fTsgLy8gZWxlbWVudCByZWZlcmVuY2VzXG5cdCAgICB0aGlzLl93YXRjaGVycyA9IFtdOyAvLyBhbGwgd2F0Y2hlcnMgYXMgYW4gYXJyYXlcblx0ICAgIHRoaXMuX2RpcmVjdGl2ZXMgPSBbXTsgLy8gYWxsIGRpcmVjdGl2ZXNcblx0XG5cdCAgICAvLyBhIHVpZFxuXHQgICAgdGhpcy5fdWlkID0gdWlkKys7XG5cdFxuXHQgICAgLy8gYSBmbGFnIHRvIGF2b2lkIHRoaXMgYmVpbmcgb2JzZXJ2ZWRcblx0ICAgIHRoaXMuX2lzVnVlID0gdHJ1ZTtcblx0XG5cdCAgICAvLyBldmVudHMgYm9va2tlZXBpbmdcblx0ICAgIHRoaXMuX2V2ZW50cyA9IHt9OyAvLyByZWdpc3RlcmVkIGNhbGxiYWNrc1xuXHQgICAgdGhpcy5fZXZlbnRzQ291bnQgPSB7fTsgLy8gZm9yICRicm9hZGNhc3Qgb3B0aW1pemF0aW9uXG5cdFxuXHQgICAgLy8gZnJhZ21lbnQgaW5zdGFuY2UgcHJvcGVydGllc1xuXHQgICAgdGhpcy5faXNGcmFnbWVudCA9IGZhbHNlO1xuXHQgICAgdGhpcy5fZnJhZ21lbnQgPSAvLyBAdHlwZSB7RG9jdW1lbnRGcmFnbWVudH1cblx0ICAgIHRoaXMuX2ZyYWdtZW50U3RhcnQgPSAvLyBAdHlwZSB7VGV4dHxDb21tZW50fVxuXHQgICAgdGhpcy5fZnJhZ21lbnRFbmQgPSBudWxsOyAvLyBAdHlwZSB7VGV4dHxDb21tZW50fVxuXHRcblx0ICAgIC8vIGxpZmVjeWNsZSBzdGF0ZVxuXHQgICAgdGhpcy5faXNDb21waWxlZCA9IHRoaXMuX2lzRGVzdHJveWVkID0gdGhpcy5faXNSZWFkeSA9IHRoaXMuX2lzQXR0YWNoZWQgPSB0aGlzLl9pc0JlaW5nRGVzdHJveWVkID0gdGhpcy5fdkZvclJlbW92aW5nID0gZmFsc2U7XG5cdCAgICB0aGlzLl91bmxpbmtGbiA9IG51bGw7XG5cdFxuXHQgICAgLy8gY29udGV4dDpcblx0ICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGNvbnRleHRcblx0ICAgIC8vIHdpbGwgYmUgdGhlIGNvbW1vbiBwYXJlbnQgdm0gb2YgdGhpcyBpbnN0YW5jZVxuXHQgICAgLy8gYW5kIGl0cyBob3N0LlxuXHQgICAgdGhpcy5fY29udGV4dCA9IG9wdGlvbnMuX2NvbnRleHQgfHwgdGhpcy4kcGFyZW50O1xuXHRcblx0ICAgIC8vIHNjb3BlOlxuXHQgICAgLy8gaWYgdGhpcyBpcyBpbnNpZGUgYW4gaW5saW5lIHYtZm9yLCB0aGUgc2NvcGVcblx0ICAgIC8vIHdpbGwgYmUgdGhlIGludGVybWVkaWF0ZSBzY29wZSBjcmVhdGVkIGZvciB0aGlzXG5cdCAgICAvLyByZXBlYXQgZnJhZ21lbnQuIHRoaXMgaXMgdXNlZCBmb3IgbGlua2luZyBwcm9wc1xuXHQgICAgLy8gYW5kIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuXHQgICAgdGhpcy5fc2NvcGUgPSBvcHRpb25zLl9zY29wZTtcblx0XG5cdCAgICAvLyBmcmFnbWVudDpcblx0ICAgIC8vIGlmIHRoaXMgaW5zdGFuY2UgaXMgY29tcGlsZWQgaW5zaWRlIGEgRnJhZ21lbnQsIGl0XG5cdCAgICAvLyBuZWVkcyB0byByZWlnc3RlciBpdHNlbGYgYXMgYSBjaGlsZCBvZiB0aGF0IGZyYWdtZW50XG5cdCAgICAvLyBmb3IgYXR0YWNoL2RldGFjaCB0byB3b3JrIHByb3Blcmx5LlxuXHQgICAgdGhpcy5fZnJhZyA9IG9wdGlvbnMuX2ZyYWc7XG5cdCAgICBpZiAodGhpcy5fZnJhZykge1xuXHQgICAgICB0aGlzLl9mcmFnLmNoaWxkcmVuLnB1c2godGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gcHVzaCBzZWxmIGludG8gcGFyZW50IC8gdHJhbnNjbHVzaW9uIGhvc3Rcblx0ICAgIGlmICh0aGlzLiRwYXJlbnQpIHtcblx0ICAgICAgdGhpcy4kcGFyZW50LiRjaGlsZHJlbi5wdXNoKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIG1lcmdlIG9wdGlvbnMuXG5cdCAgICBvcHRpb25zID0gdGhpcy4kb3B0aW9ucyA9IG1lcmdlT3B0aW9ucyh0aGlzLmNvbnN0cnVjdG9yLm9wdGlvbnMsIG9wdGlvbnMsIHRoaXMpO1xuXHRcblx0ICAgIC8vIHNldCByZWZcblx0ICAgIHRoaXMuX3VwZGF0ZVJlZigpO1xuXHRcblx0ICAgIC8vIGluaXRpYWxpemUgZGF0YSBhcyBlbXB0eSBvYmplY3QuXG5cdCAgICAvLyBpdCB3aWxsIGJlIGZpbGxlZCB1cCBpbiBfaW5pdERhdGEoKS5cblx0ICAgIHRoaXMuX2RhdGEgPSB7fTtcblx0XG5cdCAgICAvLyBjYWxsIGluaXQgaG9va1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2luaXQnKTtcblx0XG5cdCAgICAvLyBpbml0aWFsaXplIGRhdGEgb2JzZXJ2YXRpb24gYW5kIHNjb3BlIGluaGVyaXRhbmNlLlxuXHQgICAgdGhpcy5faW5pdFN0YXRlKCk7XG5cdFxuXHQgICAgLy8gc2V0dXAgZXZlbnQgc3lzdGVtIGFuZCBvcHRpb24gZXZlbnRzLlxuXHQgICAgdGhpcy5faW5pdEV2ZW50cygpO1xuXHRcblx0ICAgIC8vIGNhbGwgY3JlYXRlZCBob29rXG5cdCAgICB0aGlzLl9jYWxsSG9vaygnY3JlYXRlZCcpO1xuXHRcblx0ICAgIC8vIGlmIGBlbGAgb3B0aW9uIGlzIHBhc3NlZCwgc3RhcnQgY29tcGlsYXRpb24uXG5cdCAgICBpZiAob3B0aW9ucy5lbCkge1xuXHQgICAgICB0aGlzLiRtb3VudChvcHRpb25zLmVsKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgcGF0aENhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXHRcblx0Ly8gYWN0aW9uc1xuXHR2YXIgQVBQRU5EID0gMDtcblx0dmFyIFBVU0ggPSAxO1xuXHR2YXIgSU5DX1NVQl9QQVRIX0RFUFRIID0gMjtcblx0dmFyIFBVU0hfU1VCX1BBVEggPSAzO1xuXHRcblx0Ly8gc3RhdGVzXG5cdHZhciBCRUZPUkVfUEFUSCA9IDA7XG5cdHZhciBJTl9QQVRIID0gMTtcblx0dmFyIEJFRk9SRV9JREVOVCA9IDI7XG5cdHZhciBJTl9JREVOVCA9IDM7XG5cdHZhciBJTl9TVUJfUEFUSCA9IDQ7XG5cdHZhciBJTl9TSU5HTEVfUVVPVEUgPSA1O1xuXHR2YXIgSU5fRE9VQkxFX1FVT1RFID0gNjtcblx0dmFyIEFGVEVSX1BBVEggPSA3O1xuXHR2YXIgRVJST1IgPSA4O1xuXHRcblx0dmFyIHBhdGhTdGF0ZU1hY2hpbmUgPSBbXTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbQkVGT1JFX1BBVEhdID0ge1xuXHQgICd3cyc6IFtCRUZPUkVfUEFUSF0sXG5cdCAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdLFxuXHQgICdbJzogW0lOX1NVQl9QQVRIXSxcblx0ICAnZW9mJzogW0FGVEVSX1BBVEhdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0lOX1BBVEhdID0ge1xuXHQgICd3cyc6IFtJTl9QQVRIXSxcblx0ICAnLic6IFtCRUZPUkVfSURFTlRdLFxuXHQgICdbJzogW0lOX1NVQl9QQVRIXSxcblx0ICAnZW9mJzogW0FGVEVSX1BBVEhdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9JREVOVF0gPSB7XG5cdCAgJ3dzJzogW0JFRk9SRV9JREVOVF0sXG5cdCAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0lOX0lERU5UXSA9IHtcblx0ICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sXG5cdCAgJzAnOiBbSU5fSURFTlQsIEFQUEVORF0sXG5cdCAgJ251bWJlcic6IFtJTl9JREVOVCwgQVBQRU5EXSxcblx0ICAnd3MnOiBbSU5fUEFUSCwgUFVTSF0sXG5cdCAgJy4nOiBbQkVGT1JFX0lERU5ULCBQVVNIXSxcblx0ICAnWyc6IFtJTl9TVUJfUEFUSCwgUFVTSF0sXG5cdCAgJ2VvZic6IFtBRlRFUl9QQVRILCBQVVNIXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtJTl9TVUJfUEFUSF0gPSB7XG5cdCAgXCInXCI6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF0sXG5cdCAgJ1wiJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5EXSxcblx0ICAnWyc6IFtJTl9TVUJfUEFUSCwgSU5DX1NVQl9QQVRIX0RFUFRIXSxcblx0ICAnXSc6IFtJTl9QQVRILCBQVVNIX1NVQl9QQVRIXSxcblx0ICAnZW9mJzogRVJST1IsXG5cdCAgJ2Vsc2UnOiBbSU5fU1VCX1BBVEgsIEFQUEVORF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbSU5fU0lOR0xFX1FVT1RFXSA9IHtcblx0ICBcIidcIjogW0lOX1NVQl9QQVRILCBBUFBFTkRdLFxuXHQgICdlb2YnOiBFUlJPUixcblx0ICAnZWxzZSc6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbSU5fRE9VQkxFX1FVT1RFXSA9IHtcblx0ICAnXCInOiBbSU5fU1VCX1BBVEgsIEFQUEVORF0sXG5cdCAgJ2VvZic6IEVSUk9SLFxuXHQgICdlbHNlJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5EXVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSB0aGUgdHlwZSBvZiBhIGNoYXJhY3RlciBpbiBhIGtleXBhdGguXG5cdCAqXG5cdCAqIEBwYXJhbSB7Q2hhcn0gY2hcblx0ICogQHJldHVybiB7U3RyaW5nfSB0eXBlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0UGF0aENoYXJUeXBlKGNoKSB7XG5cdCAgaWYgKGNoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHJldHVybiAnZW9mJztcblx0ICB9XG5cdFxuXHQgIHZhciBjb2RlID0gY2guY2hhckNvZGVBdCgwKTtcblx0XG5cdCAgc3dpdGNoIChjb2RlKSB7XG5cdCAgICBjYXNlIDB4NUI6IC8vIFtcblx0ICAgIGNhc2UgMHg1RDogLy8gXVxuXHQgICAgY2FzZSAweDJFOiAvLyAuXG5cdCAgICBjYXNlIDB4MjI6IC8vIFwiXG5cdCAgICBjYXNlIDB4Mjc6IC8vICdcblx0ICAgIGNhc2UgMHgzMDpcblx0ICAgICAgLy8gMFxuXHQgICAgICByZXR1cm4gY2g7XG5cdFxuXHQgICAgY2FzZSAweDVGOiAvLyBfXG5cdCAgICBjYXNlIDB4MjQ6XG5cdCAgICAgIC8vICRcblx0ICAgICAgcmV0dXJuICdpZGVudCc7XG5cdFxuXHQgICAgY2FzZSAweDIwOiAvLyBTcGFjZVxuXHQgICAgY2FzZSAweDA5OiAvLyBUYWJcblx0ICAgIGNhc2UgMHgwQTogLy8gTmV3bGluZVxuXHQgICAgY2FzZSAweDBEOiAvLyBSZXR1cm5cblx0ICAgIGNhc2UgMHhBMDogLy8gTm8tYnJlYWsgc3BhY2Vcblx0ICAgIGNhc2UgMHhGRUZGOiAvLyBCeXRlIE9yZGVyIE1hcmtcblx0ICAgIGNhc2UgMHgyMDI4OiAvLyBMaW5lIFNlcGFyYXRvclxuXHQgICAgY2FzZSAweDIwMjk6XG5cdCAgICAgIC8vIFBhcmFncmFwaCBTZXBhcmF0b3Jcblx0ICAgICAgcmV0dXJuICd3cyc7XG5cdCAgfVxuXHRcblx0ICAvLyBhLXosIEEtWlxuXHQgIGlmIChjb2RlID49IDB4NjEgJiYgY29kZSA8PSAweDdBIHx8IGNvZGUgPj0gMHg0MSAmJiBjb2RlIDw9IDB4NUEpIHtcblx0ICAgIHJldHVybiAnaWRlbnQnO1xuXHQgIH1cblx0XG5cdCAgLy8gMS05XG5cdCAgaWYgKGNvZGUgPj0gMHgzMSAmJiBjb2RlIDw9IDB4MzkpIHtcblx0ICAgIHJldHVybiAnbnVtYmVyJztcblx0ICB9XG5cdFxuXHQgIHJldHVybiAnZWxzZSc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JtYXQgYSBzdWJQYXRoLCByZXR1cm4gaXRzIHBsYWluIGZvcm0gaWYgaXQgaXNcblx0ICogYSBsaXRlcmFsIHN0cmluZyBvciBudW1iZXIuIE90aGVyd2lzZSBwcmVwZW5kIHRoZVxuXHQgKiBkeW5hbWljIGluZGljYXRvciAoKikuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRTdWJQYXRoKHBhdGgpIHtcblx0ICB2YXIgdHJpbW1lZCA9IHBhdGgudHJpbSgpO1xuXHQgIC8vIGludmFsaWQgbGVhZGluZyAwXG5cdCAgaWYgKHBhdGguY2hhckF0KDApID09PSAnMCcgJiYgaXNOYU4ocGF0aCkpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgcmV0dXJuIGlzTGl0ZXJhbCh0cmltbWVkKSA/IHN0cmlwUXVvdGVzKHRyaW1tZWQpIDogJyonICsgdHJpbW1lZDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhcnNlIGEgc3RyaW5nIHBhdGggaW50byBhbiBhcnJheSBvZiBzZWdtZW50c1xuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2UocGF0aCkge1xuXHQgIHZhciBrZXlzID0gW107XG5cdCAgdmFyIGluZGV4ID0gLTE7XG5cdCAgdmFyIG1vZGUgPSBCRUZPUkVfUEFUSDtcblx0ICB2YXIgc3ViUGF0aERlcHRoID0gMDtcblx0ICB2YXIgYywgbmV3Q2hhciwga2V5LCB0eXBlLCB0cmFuc2l0aW9uLCBhY3Rpb24sIHR5cGVNYXA7XG5cdFxuXHQgIHZhciBhY3Rpb25zID0gW107XG5cdFxuXHQgIGFjdGlvbnNbUFVTSF0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoa2V5ICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAga2V5cy5wdXNoKGtleSk7XG5cdCAgICAgIGtleSA9IHVuZGVmaW5lZDtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBhY3Rpb25zW0FQUEVORF0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAga2V5ID0gbmV3Q2hhcjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGtleSArPSBuZXdDaGFyO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGFjdGlvbnNbSU5DX1NVQl9QQVRIX0RFUFRIXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xuXHQgICAgc3ViUGF0aERlcHRoKys7XG5cdCAgfTtcblx0XG5cdCAgYWN0aW9uc1tQVVNIX1NVQl9QQVRIXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChzdWJQYXRoRGVwdGggPiAwKSB7XG5cdCAgICAgIHN1YlBhdGhEZXB0aC0tO1xuXHQgICAgICBtb2RlID0gSU5fU1VCX1BBVEg7XG5cdCAgICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc3ViUGF0aERlcHRoID0gMDtcblx0ICAgICAga2V5ID0gZm9ybWF0U3ViUGF0aChrZXkpO1xuXHQgICAgICBpZiAoa2V5ID09PSBmYWxzZSkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBhY3Rpb25zW1BVU0hdKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBtYXliZVVuZXNjYXBlUXVvdGUoKSB7XG5cdCAgICB2YXIgbmV4dENoYXIgPSBwYXRoW2luZGV4ICsgMV07XG5cdCAgICBpZiAobW9kZSA9PT0gSU5fU0lOR0xFX1FVT1RFICYmIG5leHRDaGFyID09PSBcIidcIiB8fCBtb2RlID09PSBJTl9ET1VCTEVfUVVPVEUgJiYgbmV4dENoYXIgPT09ICdcIicpIHtcblx0ICAgICAgaW5kZXgrKztcblx0ICAgICAgbmV3Q2hhciA9ICdcXFxcJyArIG5leHRDaGFyO1xuXHQgICAgICBhY3Rpb25zW0FQUEVORF0oKTtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB3aGlsZSAobW9kZSAhPSBudWxsKSB7XG5cdCAgICBpbmRleCsrO1xuXHQgICAgYyA9IHBhdGhbaW5kZXhdO1xuXHRcblx0ICAgIGlmIChjID09PSAnXFxcXCcgJiYgbWF5YmVVbmVzY2FwZVF1b3RlKCkpIHtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdFxuXHQgICAgdHlwZSA9IGdldFBhdGhDaGFyVHlwZShjKTtcblx0ICAgIHR5cGVNYXAgPSBwYXRoU3RhdGVNYWNoaW5lW21vZGVdO1xuXHQgICAgdHJhbnNpdGlvbiA9IHR5cGVNYXBbdHlwZV0gfHwgdHlwZU1hcFsnZWxzZSddIHx8IEVSUk9SO1xuXHRcblx0ICAgIGlmICh0cmFuc2l0aW9uID09PSBFUlJPUikge1xuXHQgICAgICByZXR1cm47IC8vIHBhcnNlIGVycm9yXG5cdCAgICB9XG5cdFxuXHQgICAgbW9kZSA9IHRyYW5zaXRpb25bMF07XG5cdCAgICBhY3Rpb24gPSBhY3Rpb25zW3RyYW5zaXRpb25bMV1dO1xuXHQgICAgaWYgKGFjdGlvbikge1xuXHQgICAgICBuZXdDaGFyID0gdHJhbnNpdGlvblsyXTtcblx0ICAgICAgbmV3Q2hhciA9IG5ld0NoYXIgPT09IHVuZGVmaW5lZCA/IGMgOiBuZXdDaGFyO1xuXHQgICAgICBpZiAoYWN0aW9uKCkgPT09IGZhbHNlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKG1vZGUgPT09IEFGVEVSX1BBVEgpIHtcblx0ICAgICAga2V5cy5yYXcgPSBwYXRoO1xuXHQgICAgICByZXR1cm4ga2V5cztcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFeHRlcm5hbCBwYXJzZSB0aGF0IGNoZWNrIGZvciBhIGNhY2hlIGhpdCBmaXJzdFxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgpIHtcblx0ICB2YXIgaGl0ID0gcGF0aENhY2hlLmdldChwYXRoKTtcblx0ICBpZiAoIWhpdCkge1xuXHQgICAgaGl0ID0gcGFyc2UocGF0aCk7XG5cdCAgICBpZiAoaGl0KSB7XG5cdCAgICAgIHBhdGhDYWNoZS5wdXQocGF0aCwgaGl0KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGhpdDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCBmcm9tIGFuIG9iamVjdCBmcm9tIGEgcGF0aCBzdHJpbmdcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldFBhdGgob2JqLCBwYXRoKSB7XG5cdCAgcmV0dXJuIHBhcnNlRXhwcmVzc2lvbihwYXRoKS5nZXQob2JqKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFdhcm4gYWdhaW5zdCBzZXR0aW5nIG5vbi1leGlzdGVudCByb290IHBhdGggb24gYSB2bS5cblx0ICovXG5cdFxuXHR2YXIgd2Fybk5vbkV4aXN0ZW50O1xuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIHdhcm5Ob25FeGlzdGVudCA9IGZ1bmN0aW9uIChwYXRoLCB2bSkge1xuXHQgICAgd2FybignWW91IGFyZSBzZXR0aW5nIGEgbm9uLWV4aXN0ZW50IHBhdGggXCInICsgcGF0aC5yYXcgKyAnXCIgJyArICdvbiBhIHZtIGluc3RhbmNlLiBDb25zaWRlciBwcmUtaW5pdGlhbGl6aW5nIHRoZSBwcm9wZXJ0eSAnICsgJ3dpdGggdGhlIFwiZGF0YVwiIG9wdGlvbiBmb3IgbW9yZSByZWxpYWJsZSByZWFjdGl2aXR5ICcgKyAnYW5kIGJldHRlciBwZXJmb3JtYW5jZS4nLCB2bSk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFNldCBvbiBhbiBvYmplY3QgZnJvbSBhIHBhdGhcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZyB8IEFycmF5fSBwYXRoXG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2V0UGF0aChvYmosIHBhdGgsIHZhbCkge1xuXHQgIHZhciBvcmlnaW5hbCA9IG9iajtcblx0ICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG5cdCAgICBwYXRoID0gcGFyc2UocGF0aCk7XG5cdCAgfVxuXHQgIGlmICghcGF0aCB8fCAhaXNPYmplY3Qob2JqKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICB2YXIgbGFzdCwga2V5O1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gcGF0aC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGxhc3QgPSBvYmo7XG5cdCAgICBrZXkgPSBwYXRoW2ldO1xuXHQgICAgaWYgKGtleS5jaGFyQXQoMCkgPT09ICcqJykge1xuXHQgICAgICBrZXkgPSBwYXJzZUV4cHJlc3Npb24oa2V5LnNsaWNlKDEpKS5nZXQuY2FsbChvcmlnaW5hbCwgb3JpZ2luYWwpO1xuXHQgICAgfVxuXHQgICAgaWYgKGkgPCBsIC0gMSkge1xuXHQgICAgICBvYmogPSBvYmpba2V5XTtcblx0ICAgICAgaWYgKCFpc09iamVjdChvYmopKSB7XG5cdCAgICAgICAgb2JqID0ge307XG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgbGFzdC5faXNWdWUpIHtcblx0ICAgICAgICAgIHdhcm5Ob25FeGlzdGVudChwYXRoLCBsYXN0KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc2V0KGxhc3QsIGtleSwgb2JqKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKGlzQXJyYXkob2JqKSkge1xuXHQgICAgICAgIG9iai4kc2V0KGtleSwgdmFsKTtcblx0ICAgICAgfSBlbHNlIGlmIChrZXkgaW4gb2JqKSB7XG5cdCAgICAgICAgb2JqW2tleV0gPSB2YWw7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgb2JqLl9pc1Z1ZSkge1xuXHQgICAgICAgICAgd2Fybk5vbkV4aXN0ZW50KHBhdGgsIG9iaik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHNldChvYmosIGtleSwgdmFsKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0dmFyIHBhdGggPSBPYmplY3QuZnJlZXplKHtcblx0ICBwYXJzZVBhdGg6IHBhcnNlUGF0aCxcblx0ICBnZXRQYXRoOiBnZXRQYXRoLFxuXHQgIHNldFBhdGg6IHNldFBhdGhcblx0fSk7XG5cdFxuXHR2YXIgZXhwcmVzc2lvbkNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXHRcblx0dmFyIGFsbG93ZWRLZXl3b3JkcyA9ICdNYXRoLERhdGUsdGhpcyx0cnVlLGZhbHNlLG51bGwsdW5kZWZpbmVkLEluZmluaXR5LE5hTiwnICsgJ2lzTmFOLGlzRmluaXRlLGRlY29kZVVSSSxkZWNvZGVVUklDb21wb25lbnQsZW5jb2RlVVJJLCcgKyAnZW5jb2RlVVJJQ29tcG9uZW50LHBhcnNlSW50LHBhcnNlRmxvYXQnO1xuXHR2YXIgYWxsb3dlZEtleXdvcmRzUkUgPSBuZXcgUmVnRXhwKCdeKCcgKyBhbGxvd2VkS2V5d29yZHMucmVwbGFjZSgvLC9nLCAnXFxcXGJ8JykgKyAnXFxcXGIpJyk7XG5cdFxuXHQvLyBrZXl3b3JkcyB0aGF0IGRvbid0IG1ha2Ugc2Vuc2UgaW5zaWRlIGV4cHJlc3Npb25zXG5cdHZhciBpbXByb3BlcktleXdvcmRzID0gJ2JyZWFrLGNhc2UsY2xhc3MsY2F0Y2gsY29uc3QsY29udGludWUsZGVidWdnZXIsZGVmYXVsdCwnICsgJ2RlbGV0ZSxkbyxlbHNlLGV4cG9ydCxleHRlbmRzLGZpbmFsbHksZm9yLGZ1bmN0aW9uLGlmLCcgKyAnaW1wb3J0LGluLGluc3RhbmNlb2YsbGV0LHJldHVybixzdXBlcixzd2l0Y2gsdGhyb3csdHJ5LCcgKyAndmFyLHdoaWxlLHdpdGgseWllbGQsZW51bSxhd2FpdCxpbXBsZW1lbnRzLHBhY2thZ2UsJyArICdwcm90ZWN0ZWQsc3RhdGljLGludGVyZmFjZSxwcml2YXRlLHB1YmxpYyc7XG5cdHZhciBpbXByb3BlcktleXdvcmRzUkUgPSBuZXcgUmVnRXhwKCdeKCcgKyBpbXByb3BlcktleXdvcmRzLnJlcGxhY2UoLywvZywgJ1xcXFxifCcpICsgJ1xcXFxiKScpO1xuXHRcblx0dmFyIHdzUkUgPSAvXFxzL2c7XG5cdHZhciBuZXdsaW5lUkUgPSAvXFxuL2c7XG5cdHZhciBzYXZlUkUgPSAvW1xceyxdXFxzKltcXHdcXCRfXStcXHMqOnwoJyg/OlteJ1xcXFxdfFxcXFwuKSonfFwiKD86W15cIlxcXFxdfFxcXFwuKSpcInxgKD86W15gXFxcXF18XFxcXC4pKlxcJFxce3xcXH0oPzpbXmBcXFxcXXxcXFxcLikqYHxgKD86W15gXFxcXF18XFxcXC4pKmApfG5ldyB8dHlwZW9mIHx2b2lkIC9nO1xuXHR2YXIgcmVzdG9yZVJFID0gL1wiKFxcZCspXCIvZztcblx0dmFyIHBhdGhUZXN0UkUgPSAvXltBLVphLXpfJF1bXFx3JF0qKD86XFwuW0EtWmEtel8kXVtcXHckXSp8XFxbJy4qPydcXF18XFxbXCIuKj9cIlxcXXxcXFtcXGQrXFxdfFxcW1tBLVphLXpfJF1bXFx3JF0qXFxdKSokLztcblx0dmFyIGlkZW50UkUgPSAvW15cXHckXFwuXSg/OltBLVphLXpfJF1bXFx3JF0qKS9nO1xuXHR2YXIgbGl0ZXJhbFZhbHVlUkUkMSA9IC9eKD86dHJ1ZXxmYWxzZXxudWxsfHVuZGVmaW5lZHxJbmZpbml0eXxOYU4pJC87XG5cdFxuXHRmdW5jdGlvbiBub29wKCkge31cblx0XG5cdC8qKlxuXHQgKiBTYXZlIC8gUmV3cml0ZSAvIFJlc3RvcmVcblx0ICpcblx0ICogV2hlbiByZXdyaXRpbmcgcGF0aHMgZm91bmQgaW4gYW4gZXhwcmVzc2lvbiwgaXQgaXNcblx0ICogcG9zc2libGUgZm9yIHRoZSBzYW1lIGxldHRlciBzZXF1ZW5jZXMgdG8gYmUgZm91bmQgaW5cblx0ICogc3RyaW5ncyBhbmQgT2JqZWN0IGxpdGVyYWwgcHJvcGVydHkga2V5cy4gVGhlcmVmb3JlIHdlXG5cdCAqIHJlbW92ZSBhbmQgc3RvcmUgdGhlc2UgcGFydHMgaW4gYSB0ZW1wb3JhcnkgYXJyYXksIGFuZFxuXHQgKiByZXN0b3JlIHRoZW0gYWZ0ZXIgdGhlIHBhdGggcmV3cml0ZS5cblx0ICovXG5cdFxuXHR2YXIgc2F2ZWQgPSBbXTtcblx0XG5cdC8qKlxuXHQgKiBTYXZlIHJlcGxhY2VyXG5cdCAqXG5cdCAqIFRoZSBzYXZlIHJlZ2V4IGNhbiBtYXRjaCB0d28gcG9zc2libGUgY2FzZXM6XG5cdCAqIDEuIEFuIG9wZW5pbmcgb2JqZWN0IGxpdGVyYWxcblx0ICogMi4gQSBzdHJpbmdcblx0ICogSWYgbWF0Y2hlZCBhcyBhIHBsYWluIHN0cmluZywgd2UgbmVlZCB0byBlc2NhcGUgaXRzXG5cdCAqIG5ld2xpbmVzLCBzaW5jZSB0aGUgc3RyaW5nIG5lZWRzIHRvIGJlIHByZXNlcnZlZCB3aGVuXG5cdCAqIGdlbmVyYXRpbmcgdGhlIGZ1bmN0aW9uIGJvZHkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlzU3RyaW5nIC0gc3RyIGlmIG1hdGNoZWQgYXMgYSBzdHJpbmdcblx0ICogQHJldHVybiB7U3RyaW5nfSAtIHBsYWNlaG9sZGVyIHdpdGggaW5kZXhcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzYXZlKHN0ciwgaXNTdHJpbmcpIHtcblx0ICB2YXIgaSA9IHNhdmVkLmxlbmd0aDtcblx0ICBzYXZlZFtpXSA9IGlzU3RyaW5nID8gc3RyLnJlcGxhY2UobmV3bGluZVJFLCAnXFxcXG4nKSA6IHN0cjtcblx0ICByZXR1cm4gJ1wiJyArIGkgKyAnXCInO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUGF0aCByZXdyaXRlIHJlcGxhY2VyXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSByYXdcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJld3JpdGUocmF3KSB7XG5cdCAgdmFyIGMgPSByYXcuY2hhckF0KDApO1xuXHQgIHZhciBwYXRoID0gcmF3LnNsaWNlKDEpO1xuXHQgIGlmIChhbGxvd2VkS2V5d29yZHNSRS50ZXN0KHBhdGgpKSB7XG5cdCAgICByZXR1cm4gcmF3O1xuXHQgIH0gZWxzZSB7XG5cdCAgICBwYXRoID0gcGF0aC5pbmRleE9mKCdcIicpID4gLTEgPyBwYXRoLnJlcGxhY2UocmVzdG9yZVJFLCByZXN0b3JlKSA6IHBhdGg7XG5cdCAgICByZXR1cm4gYyArICdzY29wZS4nICsgcGF0aDtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZXN0b3JlIHJlcGxhY2VyXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IGkgLSBtYXRjaGVkIHNhdmUgaW5kZXhcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlc3RvcmUoc3RyLCBpKSB7XG5cdCAgcmV0dXJuIHNhdmVkW2ldO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmV3cml0ZSBhbiBleHByZXNzaW9uLCBwcmVmaXhpbmcgYWxsIHBhdGggYWNjZXNzb3JzIHdpdGhcblx0ICogYHNjb3BlLmAgYW5kIGdlbmVyYXRlIGdldHRlci9zZXR0ZXIgZnVuY3Rpb25zLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVHZXR0ZXIoZXhwKSB7XG5cdCAgaWYgKGltcHJvcGVyS2V5d29yZHNSRS50ZXN0KGV4cCkpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQXZvaWQgdXNpbmcgcmVzZXJ2ZWQga2V5d29yZHMgaW4gZXhwcmVzc2lvbjogJyArIGV4cCk7XG5cdCAgfVxuXHQgIC8vIHJlc2V0IHN0YXRlXG5cdCAgc2F2ZWQubGVuZ3RoID0gMDtcblx0ICAvLyBzYXZlIHN0cmluZ3MgYW5kIG9iamVjdCBsaXRlcmFsIGtleXNcblx0ICB2YXIgYm9keSA9IGV4cC5yZXBsYWNlKHNhdmVSRSwgc2F2ZSkucmVwbGFjZSh3c1JFLCAnJyk7XG5cdCAgLy8gcmV3cml0ZSBhbGwgcGF0aHNcblx0ICAvLyBwYWQgMSBzcGFjZSBoZXJlIGJlY2F1c2UgdGhlIHJlZ2V4IG1hdGNoZXMgMSBleHRyYSBjaGFyXG5cdCAgYm9keSA9ICgnICcgKyBib2R5KS5yZXBsYWNlKGlkZW50UkUsIHJld3JpdGUpLnJlcGxhY2UocmVzdG9yZVJFLCByZXN0b3JlKTtcblx0ICByZXR1cm4gbWFrZUdldHRlckZuKGJvZHkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQnVpbGQgYSBnZXR0ZXIgZnVuY3Rpb24uIFJlcXVpcmVzIGV2YWwuXG5cdCAqXG5cdCAqIFdlIGlzb2xhdGUgdGhlIHRyeS9jYXRjaCBzbyBpdCBkb2Vzbid0IGFmZmVjdCB0aGVcblx0ICogb3B0aW1pemF0aW9uIG9mIHRoZSBwYXJzZSBmdW5jdGlvbiB3aGVuIGl0IGlzIG5vdCBjYWxsZWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBib2R5XG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlR2V0dGVyRm4oYm9keSkge1xuXHQgIHRyeSB7XG5cdCAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1uZXctZnVuYyAqL1xuXHQgICAgcmV0dXJuIG5ldyBGdW5jdGlvbignc2NvcGUnLCAncmV0dXJuICcgKyBib2R5ICsgJzsnKTtcblx0ICAgIC8qIGVzbGludC1lbmFibGUgbm8tbmV3LWZ1bmMgKi9cblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKGUudG9TdHJpbmcoKS5tYXRjaCgvdW5zYWZlLWV2YWx8Q1NQLykpIHtcblx0ICAgICAgICB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHRoZSBkZWZhdWx0IGJ1aWxkIG9mIFZ1ZS5qcyBpbiBhbiBlbnZpcm9ubWVudCAnICsgJ3dpdGggQ29udGVudCBTZWN1cml0eSBQb2xpY3kgdGhhdCBwcm9oaWJpdHMgdW5zYWZlLWV2YWwuICcgKyAnVXNlIHRoZSBDU1AtY29tcGxpYW50IGJ1aWxkIGluc3RlYWQ6ICcgKyAnaHR0cDovL3Z1ZWpzLm9yZy9ndWlkZS9pbnN0YWxsYXRpb24uaHRtbCNDU1AtY29tcGxpYW50LWJ1aWxkJyk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgd2FybignSW52YWxpZCBleHByZXNzaW9uLiAnICsgJ0dlbmVyYXRlZCBmdW5jdGlvbiBib2R5OiAnICsgYm9keSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBub29wO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYSBzZXR0ZXIgZnVuY3Rpb24gZm9yIHRoZSBleHByZXNzaW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlU2V0dGVyKGV4cCkge1xuXHQgIHZhciBwYXRoID0gcGFyc2VQYXRoKGV4cCk7XG5cdCAgaWYgKHBhdGgpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIHZhbCkge1xuXHQgICAgICBzZXRQYXRoKHNjb3BlLCBwYXRoLCB2YWwpO1xuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHNldHRlciBleHByZXNzaW9uOiAnICsgZXhwKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBhbiBleHByZXNzaW9uIGludG8gcmUtd3JpdHRlbiBnZXR0ZXIvc2V0dGVycy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IG5lZWRTZXRcblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VFeHByZXNzaW9uKGV4cCwgbmVlZFNldCkge1xuXHQgIGV4cCA9IGV4cC50cmltKCk7XG5cdCAgLy8gdHJ5IGNhY2hlXG5cdCAgdmFyIGhpdCA9IGV4cHJlc3Npb25DYWNoZS5nZXQoZXhwKTtcblx0ICBpZiAoaGl0KSB7XG5cdCAgICBpZiAobmVlZFNldCAmJiAhaGl0LnNldCkge1xuXHQgICAgICBoaXQuc2V0ID0gY29tcGlsZVNldHRlcihoaXQuZXhwKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBoaXQ7XG5cdCAgfVxuXHQgIHZhciByZXMgPSB7IGV4cDogZXhwIH07XG5cdCAgcmVzLmdldCA9IGlzU2ltcGxlUGF0aChleHApICYmIGV4cC5pbmRleE9mKCdbJykgPCAwXG5cdCAgLy8gb3B0aW1pemVkIHN1cGVyIHNpbXBsZSBnZXR0ZXJcblx0ICA/IG1ha2VHZXR0ZXJGbignc2NvcGUuJyArIGV4cClcblx0ICAvLyBkeW5hbWljIGdldHRlclxuXHQgIDogY29tcGlsZUdldHRlcihleHApO1xuXHQgIGlmIChuZWVkU2V0KSB7XG5cdCAgICByZXMuc2V0ID0gY29tcGlsZVNldHRlcihleHApO1xuXHQgIH1cblx0ICBleHByZXNzaW9uQ2FjaGUucHV0KGV4cCwgcmVzKTtcblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZXhwcmVzc2lvbiBpcyBhIHNpbXBsZSBwYXRoLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNTaW1wbGVQYXRoKGV4cCkge1xuXHQgIHJldHVybiBwYXRoVGVzdFJFLnRlc3QoZXhwKSAmJlxuXHQgIC8vIGRvbid0IHRyZWF0IGxpdGVyYWwgdmFsdWVzIGFzIHBhdGhzXG5cdCAgIWxpdGVyYWxWYWx1ZVJFJDEudGVzdChleHApICYmXG5cdCAgLy8gTWF0aCBjb25zdGFudHMgZS5nLiBNYXRoLlBJLCBNYXRoLkUgZXRjLlxuXHQgIGV4cC5zbGljZSgwLCA1KSAhPT0gJ01hdGguJztcblx0fVxuXHRcblx0dmFyIGV4cHJlc3Npb24gPSBPYmplY3QuZnJlZXplKHtcblx0ICBwYXJzZUV4cHJlc3Npb246IHBhcnNlRXhwcmVzc2lvbixcblx0ICBpc1NpbXBsZVBhdGg6IGlzU2ltcGxlUGF0aFxuXHR9KTtcblx0XG5cdC8vIHdlIGhhdmUgdHdvIHNlcGFyYXRlIHF1ZXVlczogb25lIGZvciBkaXJlY3RpdmUgdXBkYXRlc1xuXHQvLyBhbmQgb25lIGZvciB1c2VyIHdhdGNoZXIgcmVnaXN0ZXJlZCB2aWEgJHdhdGNoKCkuXG5cdC8vIHdlIHdhbnQgdG8gZ3VhcmFudGVlIGRpcmVjdGl2ZSB1cGRhdGVzIHRvIGJlIGNhbGxlZFxuXHQvLyBiZWZvcmUgdXNlciB3YXRjaGVycyBzbyB0aGF0IHdoZW4gdXNlciB3YXRjaGVycyBhcmVcblx0Ly8gdHJpZ2dlcmVkLCB0aGUgRE9NIHdvdWxkIGhhdmUgYWxyZWFkeSBiZWVuIGluIHVwZGF0ZWRcblx0Ly8gc3RhdGUuXG5cdFxuXHR2YXIgcXVldWUgPSBbXTtcblx0dmFyIHVzZXJRdWV1ZSA9IFtdO1xuXHR2YXIgaGFzID0ge307XG5cdHZhciBjaXJjdWxhciA9IHt9O1xuXHR2YXIgd2FpdGluZyA9IGZhbHNlO1xuXHRcblx0LyoqXG5cdCAqIFJlc2V0IHRoZSBiYXRjaGVyJ3Mgc3RhdGUuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVzZXRCYXRjaGVyU3RhdGUoKSB7XG5cdCAgcXVldWUubGVuZ3RoID0gMDtcblx0ICB1c2VyUXVldWUubGVuZ3RoID0gMDtcblx0ICBoYXMgPSB7fTtcblx0ICBjaXJjdWxhciA9IHt9O1xuXHQgIHdhaXRpbmcgPSBmYWxzZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZsdXNoIGJvdGggcXVldWVzIGFuZCBydW4gdGhlIHdhdGNoZXJzLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZsdXNoQmF0Y2hlclF1ZXVlKCkge1xuXHQgIHZhciBfYWdhaW4gPSB0cnVlO1xuXHRcblx0ICBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHtcblx0ICAgIF9hZ2FpbiA9IGZhbHNlO1xuXHRcblx0ICAgIHJ1bkJhdGNoZXJRdWV1ZShxdWV1ZSk7XG5cdCAgICBydW5CYXRjaGVyUXVldWUodXNlclF1ZXVlKTtcblx0ICAgIC8vIHVzZXIgd2F0Y2hlcnMgdHJpZ2dlcmVkIG1vcmUgd2F0Y2hlcnMsXG5cdCAgICAvLyBrZWVwIGZsdXNoaW5nIHVudGlsIGl0IGRlcGxldGVzXG5cdCAgICBpZiAocXVldWUubGVuZ3RoKSB7XG5cdCAgICAgIF9hZ2FpbiA9IHRydWU7XG5cdCAgICAgIGNvbnRpbnVlIF9mdW5jdGlvbjtcblx0ICAgIH1cblx0ICAgIC8vIGRldiB0b29sIGhvb2tcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKGRldnRvb2xzICYmIGNvbmZpZy5kZXZ0b29scykge1xuXHQgICAgICBkZXZ0b29scy5lbWl0KCdmbHVzaCcpO1xuXHQgICAgfVxuXHQgICAgcmVzZXRCYXRjaGVyU3RhdGUoKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSdW4gdGhlIHdhdGNoZXJzIGluIGEgc2luZ2xlIHF1ZXVlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBxdWV1ZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJ1bkJhdGNoZXJRdWV1ZShxdWV1ZSkge1xuXHQgIC8vIGRvIG5vdCBjYWNoZSBsZW5ndGggYmVjYXVzZSBtb3JlIHdhdGNoZXJzIG1pZ2h0IGJlIHB1c2hlZFxuXHQgIC8vIGFzIHdlIHJ1biBleGlzdGluZyB3YXRjaGVyc1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciB3YXRjaGVyID0gcXVldWVbaV07XG5cdCAgICB2YXIgaWQgPSB3YXRjaGVyLmlkO1xuXHQgICAgaGFzW2lkXSA9IG51bGw7XG5cdCAgICB3YXRjaGVyLnJ1bigpO1xuXHQgICAgLy8gaW4gZGV2IGJ1aWxkLCBjaGVjayBhbmQgc3RvcCBjaXJjdWxhciB1cGRhdGVzLlxuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgaGFzW2lkXSAhPSBudWxsKSB7XG5cdCAgICAgIGNpcmN1bGFyW2lkXSA9IChjaXJjdWxhcltpZF0gfHwgMCkgKyAxO1xuXHQgICAgICBpZiAoY2lyY3VsYXJbaWRdID4gY29uZmlnLl9tYXhVcGRhdGVDb3VudCkge1xuXHQgICAgICAgIHdhcm4oJ1lvdSBtYXkgaGF2ZSBhbiBpbmZpbml0ZSB1cGRhdGUgbG9vcCBmb3Igd2F0Y2hlciAnICsgJ3dpdGggZXhwcmVzc2lvbiBcIicgKyB3YXRjaGVyLmV4cHJlc3Npb24gKyAnXCInLCB3YXRjaGVyLnZtKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICBxdWV1ZS5sZW5ndGggPSAwO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHVzaCBhIHdhdGNoZXIgaW50byB0aGUgd2F0Y2hlciBxdWV1ZS5cblx0ICogSm9icyB3aXRoIGR1cGxpY2F0ZSBJRHMgd2lsbCBiZSBza2lwcGVkIHVubGVzcyBpdCdzXG5cdCAqIHB1c2hlZCB3aGVuIHRoZSBxdWV1ZSBpcyBiZWluZyBmbHVzaGVkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1dhdGNoZXJ9IHdhdGNoZXJcblx0ICogICBwcm9wZXJ0aWVzOlxuXHQgKiAgIC0ge051bWJlcn0gaWRcblx0ICogICAtIHtGdW5jdGlvbn0gcnVuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHVzaFdhdGNoZXIod2F0Y2hlcikge1xuXHQgIHZhciBpZCA9IHdhdGNoZXIuaWQ7XG5cdCAgaWYgKGhhc1tpZF0gPT0gbnVsbCkge1xuXHQgICAgLy8gcHVzaCB3YXRjaGVyIGludG8gYXBwcm9wcmlhdGUgcXVldWVcblx0ICAgIHZhciBxID0gd2F0Y2hlci51c2VyID8gdXNlclF1ZXVlIDogcXVldWU7XG5cdCAgICBoYXNbaWRdID0gcS5sZW5ndGg7XG5cdCAgICBxLnB1c2god2F0Y2hlcik7XG5cdCAgICAvLyBxdWV1ZSB0aGUgZmx1c2hcblx0ICAgIGlmICghd2FpdGluZykge1xuXHQgICAgICB3YWl0aW5nID0gdHJ1ZTtcblx0ICAgICAgbmV4dFRpY2soZmx1c2hCYXRjaGVyUXVldWUpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIHVpZCQyID0gMDtcblx0XG5cdC8qKlxuXHQgKiBBIHdhdGNoZXIgcGFyc2VzIGFuIGV4cHJlc3Npb24sIGNvbGxlY3RzIGRlcGVuZGVuY2llcyxcblx0ICogYW5kIGZpcmVzIGNhbGxiYWNrIHdoZW4gdGhlIGV4cHJlc3Npb24gdmFsdWUgY2hhbmdlcy5cblx0ICogVGhpcyBpcyB1c2VkIGZvciBib3RoIHRoZSAkd2F0Y2goKSBhcGkgYW5kIGRpcmVjdGl2ZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gZXhwT3JGblxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiAgICAgICAgICAgICAgICAgLSB7QXJyYXl9IGZpbHRlcnNcblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHR3b1dheVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gZGVlcFxuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gdXNlclxuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gc3luY1xuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gbGF6eVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtwcmVQcm9jZXNzXVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtwb3N0UHJvY2Vzc11cblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqL1xuXHRmdW5jdGlvbiBXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwgb3B0aW9ucykge1xuXHQgIC8vIG1peCBpbiBvcHRpb25zXG5cdCAgaWYgKG9wdGlvbnMpIHtcblx0ICAgIGV4dGVuZCh0aGlzLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgdmFyIGlzRm4gPSB0eXBlb2YgZXhwT3JGbiA9PT0gJ2Z1bmN0aW9uJztcblx0ICB0aGlzLnZtID0gdm07XG5cdCAgdm0uX3dhdGNoZXJzLnB1c2godGhpcyk7XG5cdCAgdGhpcy5leHByZXNzaW9uID0gZXhwT3JGbjtcblx0ICB0aGlzLmNiID0gY2I7XG5cdCAgdGhpcy5pZCA9ICsrdWlkJDI7IC8vIHVpZCBmb3IgYmF0Y2hpbmdcblx0ICB0aGlzLmFjdGl2ZSA9IHRydWU7XG5cdCAgdGhpcy5kaXJ0eSA9IHRoaXMubGF6eTsgLy8gZm9yIGxhenkgd2F0Y2hlcnNcblx0ICB0aGlzLmRlcHMgPSBbXTtcblx0ICB0aGlzLm5ld0RlcHMgPSBbXTtcblx0ICB0aGlzLmRlcElkcyA9IG5ldyBfU2V0KCk7XG5cdCAgdGhpcy5uZXdEZXBJZHMgPSBuZXcgX1NldCgpO1xuXHQgIHRoaXMucHJldkVycm9yID0gbnVsbDsgLy8gZm9yIGFzeW5jIGVycm9yIHN0YWNrc1xuXHQgIC8vIHBhcnNlIGV4cHJlc3Npb24gZm9yIGdldHRlci9zZXR0ZXJcblx0ICBpZiAoaXNGbikge1xuXHQgICAgdGhpcy5nZXR0ZXIgPSBleHBPckZuO1xuXHQgICAgdGhpcy5zZXR0ZXIgPSB1bmRlZmluZWQ7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwT3JGbiwgdGhpcy50d29XYXkpO1xuXHQgICAgdGhpcy5nZXR0ZXIgPSByZXMuZ2V0O1xuXHQgICAgdGhpcy5zZXR0ZXIgPSByZXMuc2V0O1xuXHQgIH1cblx0ICB0aGlzLnZhbHVlID0gdGhpcy5sYXp5ID8gdW5kZWZpbmVkIDogdGhpcy5nZXQoKTtcblx0ICAvLyBzdGF0ZSBmb3IgYXZvaWRpbmcgZmFsc2UgdHJpZ2dlcnMgZm9yIGRlZXAgYW5kIEFycmF5XG5cdCAgLy8gd2F0Y2hlcnMgZHVyaW5nIHZtLl9kaWdlc3QoKVxuXHQgIHRoaXMucXVldWVkID0gdGhpcy5zaGFsbG93ID0gZmFsc2U7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFdmFsdWF0ZSB0aGUgZ2V0dGVyLCBhbmQgcmUtY29sbGVjdCBkZXBlbmRlbmNpZXMuXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHRoaXMuYmVmb3JlR2V0KCk7XG5cdCAgdmFyIHNjb3BlID0gdGhpcy5zY29wZSB8fCB0aGlzLnZtO1xuXHQgIHZhciB2YWx1ZTtcblx0ICB0cnkge1xuXHQgICAgdmFsdWUgPSB0aGlzLmdldHRlci5jYWxsKHNjb3BlLCBzY29wZSk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLndhcm5FeHByZXNzaW9uRXJyb3JzKSB7XG5cdCAgICAgIHdhcm4oJ0Vycm9yIHdoZW4gZXZhbHVhdGluZyBleHByZXNzaW9uICcgKyAnXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiOiAnICsgZS50b1N0cmluZygpLCB0aGlzLnZtKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gXCJ0b3VjaFwiIGV2ZXJ5IHByb3BlcnR5IHNvIHRoZXkgYXJlIGFsbCB0cmFja2VkIGFzXG5cdCAgLy8gZGVwZW5kZW5jaWVzIGZvciBkZWVwIHdhdGNoaW5nXG5cdCAgaWYgKHRoaXMuZGVlcCkge1xuXHQgICAgdHJhdmVyc2UodmFsdWUpO1xuXHQgIH1cblx0ICBpZiAodGhpcy5wcmVQcm9jZXNzKSB7XG5cdCAgICB2YWx1ZSA9IHRoaXMucHJlUHJvY2Vzcyh2YWx1ZSk7XG5cdCAgfVxuXHQgIGlmICh0aGlzLmZpbHRlcnMpIHtcblx0ICAgIHZhbHVlID0gc2NvcGUuX2FwcGx5RmlsdGVycyh2YWx1ZSwgbnVsbCwgdGhpcy5maWx0ZXJzLCBmYWxzZSk7XG5cdCAgfVxuXHQgIGlmICh0aGlzLnBvc3RQcm9jZXNzKSB7XG5cdCAgICB2YWx1ZSA9IHRoaXMucG9zdFByb2Nlc3ModmFsdWUpO1xuXHQgIH1cblx0ICB0aGlzLmFmdGVyR2V0KCk7XG5cdCAgcmV0dXJuIHZhbHVlO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFNldCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSB3aXRoIHRoZSBzZXR0ZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm07XG5cdCAgaWYgKHRoaXMuZmlsdGVycykge1xuXHQgICAgdmFsdWUgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKHZhbHVlLCB0aGlzLnZhbHVlLCB0aGlzLmZpbHRlcnMsIHRydWUpO1xuXHQgIH1cblx0ICB0cnkge1xuXHQgICAgdGhpcy5zZXR0ZXIuY2FsbChzY29wZSwgc2NvcGUsIHZhbHVlKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcud2FybkV4cHJlc3Npb25FcnJvcnMpIHtcblx0ICAgICAgd2FybignRXJyb3Igd2hlbiBldmFsdWF0aW5nIHNldHRlciAnICsgJ1wiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIjogJyArIGUudG9TdHJpbmcoKSwgdGhpcy52bSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIHR3by13YXkgc3luYyBmb3Igdi1mb3IgYWxpYXNcblx0ICB2YXIgZm9yQ29udGV4dCA9IHNjb3BlLiRmb3JDb250ZXh0O1xuXHQgIGlmIChmb3JDb250ZXh0ICYmIGZvckNvbnRleHQuYWxpYXMgPT09IHRoaXMuZXhwcmVzc2lvbikge1xuXHQgICAgaWYgKGZvckNvbnRleHQuZmlsdGVycykge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgdHdvLXdheSBiaW5kaW5nIG9uICcgKyAnYSB2LWZvciBhbGlhcyAoJyArIHRoaXMuZXhwcmVzc2lvbiArICcpLCBhbmQgdGhlICcgKyAndi1mb3IgaGFzIGZpbHRlcnMuIFRoaXMgd2lsbCBub3Qgd29yayBwcm9wZXJseS4gJyArICdFaXRoZXIgcmVtb3ZlIHRoZSBmaWx0ZXJzIG9yIHVzZSBhbiBhcnJheSBvZiAnICsgJ29iamVjdHMgYW5kIGJpbmQgdG8gb2JqZWN0IHByb3BlcnRpZXMgaW5zdGVhZC4nLCB0aGlzLnZtKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZm9yQ29udGV4dC5fd2l0aExvY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoc2NvcGUuJGtleSkge1xuXHQgICAgICAgIC8vIG9yaWdpbmFsIGlzIGFuIG9iamVjdFxuXHQgICAgICAgIGZvckNvbnRleHQucmF3VmFsdWVbc2NvcGUuJGtleV0gPSB2YWx1ZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBmb3JDb250ZXh0LnJhd1ZhbHVlLiRzZXQoc2NvcGUuJGluZGV4LCB2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBQcmVwYXJlIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuYmVmb3JlR2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIERlcC50YXJnZXQgPSB0aGlzO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEFkZCBhIGRlcGVuZGVuY3kgdG8gdGhpcyBkaXJlY3RpdmUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RGVwfSBkZXBcblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5hZGREZXAgPSBmdW5jdGlvbiAoZGVwKSB7XG5cdCAgdmFyIGlkID0gZGVwLmlkO1xuXHQgIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGlkKSkge1xuXHQgICAgdGhpcy5uZXdEZXBJZHMuYWRkKGlkKTtcblx0ICAgIHRoaXMubmV3RGVwcy5wdXNoKGRlcCk7XG5cdCAgICBpZiAoIXRoaXMuZGVwSWRzLmhhcyhpZCkpIHtcblx0ICAgICAgZGVwLmFkZFN1Yih0aGlzKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2xlYW4gdXAgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5hZnRlckdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICBEZXAudGFyZ2V0ID0gbnVsbDtcblx0ICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgdmFyIGRlcCA9IHRoaXMuZGVwc1tpXTtcblx0ICAgIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGRlcC5pZCkpIHtcblx0ICAgICAgZGVwLnJlbW92ZVN1Yih0aGlzKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgdmFyIHRtcCA9IHRoaXMuZGVwSWRzO1xuXHQgIHRoaXMuZGVwSWRzID0gdGhpcy5uZXdEZXBJZHM7XG5cdCAgdGhpcy5uZXdEZXBJZHMgPSB0bXA7XG5cdCAgdGhpcy5uZXdEZXBJZHMuY2xlYXIoKTtcblx0ICB0bXAgPSB0aGlzLmRlcHM7XG5cdCAgdGhpcy5kZXBzID0gdGhpcy5uZXdEZXBzO1xuXHQgIHRoaXMubmV3RGVwcyA9IHRtcDtcblx0ICB0aGlzLm5ld0RlcHMubGVuZ3RoID0gMDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTdWJzY3JpYmVyIGludGVyZmFjZS5cblx0ICogV2lsbCBiZSBjYWxsZWQgd2hlbiBhIGRlcGVuZGVuY3kgY2hhbmdlcy5cblx0ICpcblx0ICogQHBhcmFtIHtCb29sZWFufSBzaGFsbG93XG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHNoYWxsb3cpIHtcblx0ICBpZiAodGhpcy5sYXp5KSB7XG5cdCAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcblx0ICB9IGVsc2UgaWYgKHRoaXMuc3luYyB8fCAhY29uZmlnLmFzeW5jKSB7XG5cdCAgICB0aGlzLnJ1bigpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBpZiBxdWV1ZWQsIG9ubHkgb3ZlcndyaXRlIHNoYWxsb3cgd2l0aCBub24tc2hhbGxvdyxcblx0ICAgIC8vIGJ1dCBub3QgdGhlIG90aGVyIHdheSBhcm91bmQuXG5cdCAgICB0aGlzLnNoYWxsb3cgPSB0aGlzLnF1ZXVlZCA/IHNoYWxsb3cgPyB0aGlzLnNoYWxsb3cgOiBmYWxzZSA6ICEhc2hhbGxvdztcblx0ICAgIHRoaXMucXVldWVkID0gdHJ1ZTtcblx0ICAgIC8vIHJlY29yZCBiZWZvcmUtcHVzaCBlcnJvciBzdGFjayBpbiBkZWJ1ZyBtb2RlXG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5kZWJ1Zykge1xuXHQgICAgICB0aGlzLnByZXZFcnJvciA9IG5ldyBFcnJvcignW3Z1ZV0gYXN5bmMgc3RhY2sgdHJhY2UnKTtcblx0ICAgIH1cblx0ICAgIHB1c2hXYXRjaGVyKHRoaXMpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBCYXRjaGVyIGpvYiBpbnRlcmZhY2UuXG5cdCAqIFdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBiYXRjaGVyLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblx0ICBpZiAodGhpcy5hY3RpdmUpIHtcblx0ICAgIHZhciB2YWx1ZSA9IHRoaXMuZ2V0KCk7XG5cdCAgICBpZiAodmFsdWUgIT09IHRoaXMudmFsdWUgfHxcblx0ICAgIC8vIERlZXAgd2F0Y2hlcnMgYW5kIHdhdGNoZXJzIG9uIE9iamVjdC9BcnJheXMgc2hvdWxkIGZpcmUgZXZlblxuXHQgICAgLy8gd2hlbiB0aGUgdmFsdWUgaXMgdGhlIHNhbWUsIGJlY2F1c2UgdGhlIHZhbHVlIG1heVxuXHQgICAgLy8gaGF2ZSBtdXRhdGVkOyBidXQgb25seSBkbyBzbyBpZiB0aGlzIGlzIGFcblx0ICAgIC8vIG5vbi1zaGFsbG93IHVwZGF0ZSAoY2F1c2VkIGJ5IGEgdm0gZGlnZXN0KS5cblx0ICAgIChpc09iamVjdCh2YWx1ZSkgfHwgdGhpcy5kZWVwKSAmJiAhdGhpcy5zaGFsbG93KSB7XG5cdCAgICAgIC8vIHNldCBuZXcgdmFsdWVcblx0ICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZTtcblx0ICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuXHQgICAgICAvLyBpbiBkZWJ1ZyArIGFzeW5jIG1vZGUsIHdoZW4gYSB3YXRjaGVyIGNhbGxiYWNrc1xuXHQgICAgICAvLyB0aHJvd3MsIHdlIGFsc28gdGhyb3cgdGhlIHNhdmVkIGJlZm9yZS1wdXNoIGVycm9yXG5cdCAgICAgIC8vIHNvIHRoZSBmdWxsIGNyb3NzLXRpY2sgc3RhY2sgdHJhY2UgaXMgYXZhaWxhYmxlLlxuXHQgICAgICB2YXIgcHJldkVycm9yID0gdGhpcy5wcmV2RXJyb3I7XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcuZGVidWcgJiYgcHJldkVycm9yKSB7XG5cdCAgICAgICAgdGhpcy5wcmV2RXJyb3IgPSBudWxsO1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy52bSwgdmFsdWUsIG9sZFZhbHVlKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHRocm93IHByZXZFcnJvcjtcblx0ICAgICAgICAgIH0sIDApO1xuXHQgICAgICAgICAgdGhyb3cgZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHRoaXMucXVldWVkID0gdGhpcy5zaGFsbG93ID0gZmFsc2U7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEV2YWx1YXRlIHRoZSB2YWx1ZSBvZiB0aGUgd2F0Y2hlci5cblx0ICogVGhpcyBvbmx5IGdldHMgY2FsbGVkIGZvciBsYXp5IHdhdGNoZXJzLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gKCkge1xuXHQgIC8vIGF2b2lkIG92ZXJ3cml0aW5nIGFub3RoZXIgd2F0Y2hlciB0aGF0IGlzIGJlaW5nXG5cdCAgLy8gY29sbGVjdGVkLlxuXHQgIHZhciBjdXJyZW50ID0gRGVwLnRhcmdldDtcblx0ICB0aGlzLnZhbHVlID0gdGhpcy5nZXQoKTtcblx0ICB0aGlzLmRpcnR5ID0gZmFsc2U7XG5cdCAgRGVwLnRhcmdldCA9IGN1cnJlbnQ7XG5cdH07XG5cdFxuXHQvKipcblx0ICogRGVwZW5kIG9uIGFsbCBkZXBzIGNvbGxlY3RlZCBieSB0aGlzIHdhdGNoZXIuXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICB0aGlzLmRlcHNbaV0uZGVwZW5kKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBzZWxmIGZyb20gYWxsIGRlcGVuZGVuY2llcycgc3ViY3JpYmVyIGxpc3QuXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUudGVhcmRvd24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKHRoaXMuYWN0aXZlKSB7XG5cdCAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHZtJ3Mgd2F0Y2hlciBsaXN0XG5cdCAgICAvLyB0aGlzIGlzIGEgc29tZXdoYXQgZXhwZW5zaXZlIG9wZXJhdGlvbiBzbyB3ZSBza2lwIGl0XG5cdCAgICAvLyBpZiB0aGUgdm0gaXMgYmVpbmcgZGVzdHJveWVkIG9yIGlzIHBlcmZvcm1pbmcgYSB2LWZvclxuXHQgICAgLy8gcmUtcmVuZGVyICh0aGUgd2F0Y2hlciBsaXN0IGlzIHRoZW4gZmlsdGVyZWQgYnkgdi1mb3IpLlxuXHQgICAgaWYgKCF0aGlzLnZtLl9pc0JlaW5nRGVzdHJveWVkICYmICF0aGlzLnZtLl92Rm9yUmVtb3ZpbmcpIHtcblx0ICAgICAgdGhpcy52bS5fd2F0Y2hlcnMuJHJlbW92ZSh0aGlzKTtcblx0ICAgIH1cblx0ICAgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdGhpcy5kZXBzW2ldLnJlbW92ZVN1Yih0aGlzKTtcblx0ICAgIH1cblx0ICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG5cdCAgICB0aGlzLnZtID0gdGhpcy5jYiA9IHRoaXMudmFsdWUgPSBudWxsO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBSZWNydXNpdmVseSB0cmF2ZXJzZSBhbiBvYmplY3QgdG8gZXZva2UgYWxsIGNvbnZlcnRlZFxuXHQgKiBnZXR0ZXJzLCBzbyB0aGF0IGV2ZXJ5IG5lc3RlZCBwcm9wZXJ0eSBpbnNpZGUgdGhlIG9iamVjdFxuXHQgKiBpcyBjb2xsZWN0ZWQgYXMgYSBcImRlZXBcIiBkZXBlbmRlbmN5LlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKi9cblx0XG5cdHZhciBzZWVuT2JqZWN0cyA9IG5ldyBfU2V0KCk7XG5cdGZ1bmN0aW9uIHRyYXZlcnNlKHZhbCwgc2Vlbikge1xuXHQgIHZhciBpID0gdW5kZWZpbmVkLFxuXHQgICAgICBrZXlzID0gdW5kZWZpbmVkO1xuXHQgIGlmICghc2Vlbikge1xuXHQgICAgc2VlbiA9IHNlZW5PYmplY3RzO1xuXHQgICAgc2Vlbi5jbGVhcigpO1xuXHQgIH1cblx0ICB2YXIgaXNBID0gaXNBcnJheSh2YWwpO1xuXHQgIHZhciBpc08gPSBpc09iamVjdCh2YWwpO1xuXHQgIGlmICgoaXNBIHx8IGlzTykgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWwpKSB7XG5cdCAgICBpZiAodmFsLl9fb2JfXykge1xuXHQgICAgICB2YXIgZGVwSWQgPSB2YWwuX19vYl9fLmRlcC5pZDtcblx0ICAgICAgaWYgKHNlZW4uaGFzKGRlcElkKSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzZWVuLmFkZChkZXBJZCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChpc0EpIHtcblx0ICAgICAgaSA9IHZhbC5sZW5ndGg7XG5cdCAgICAgIHdoaWxlIChpLS0pIHRyYXZlcnNlKHZhbFtpXSwgc2Vlbik7XG5cdCAgICB9IGVsc2UgaWYgKGlzTykge1xuXHQgICAgICBrZXlzID0gT2JqZWN0LmtleXModmFsKTtcblx0ICAgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgICB3aGlsZSAoaS0tKSB0cmF2ZXJzZSh2YWxba2V5c1tpXV0sIHNlZW4pO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIHRleHQkMSA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHRoaXMuYXR0ciA9IHRoaXMuZWwubm9kZVR5cGUgPT09IDMgPyAnZGF0YScgOiAndGV4dENvbnRlbnQnO1xuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB0aGlzLmVsW3RoaXMuYXR0cl0gPSBfdG9TdHJpbmcodmFsdWUpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciB0ZW1wbGF0ZUNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXHR2YXIgaWRTZWxlY3RvckNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXHRcblx0dmFyIG1hcCA9IHtcblx0ICBlZmF1bHQ6IFswLCAnJywgJyddLFxuXHQgIGxlZ2VuZDogWzEsICc8ZmllbGRzZXQ+JywgJzwvZmllbGRzZXQ+J10sXG5cdCAgdHI6IFsyLCAnPHRhYmxlPjx0Ym9keT4nLCAnPC90Ym9keT48L3RhYmxlPiddLFxuXHQgIGNvbDogWzIsICc8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPicsICc8L2NvbGdyb3VwPjwvdGFibGU+J11cblx0fTtcblx0XG5cdG1hcC50ZCA9IG1hcC50aCA9IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddO1xuXHRcblx0bWFwLm9wdGlvbiA9IG1hcC5vcHRncm91cCA9IFsxLCAnPHNlbGVjdCBtdWx0aXBsZT1cIm11bHRpcGxlXCI+JywgJzwvc2VsZWN0PiddO1xuXHRcblx0bWFwLnRoZWFkID0gbWFwLnRib2R5ID0gbWFwLmNvbGdyb3VwID0gbWFwLmNhcHRpb24gPSBtYXAudGZvb3QgPSBbMSwgJzx0YWJsZT4nLCAnPC90YWJsZT4nXTtcblx0XG5cdG1hcC5nID0gbWFwLmRlZnMgPSBtYXAuc3ltYm9sID0gbWFwLnVzZSA9IG1hcC5pbWFnZSA9IG1hcC50ZXh0ID0gbWFwLmNpcmNsZSA9IG1hcC5lbGxpcHNlID0gbWFwLmxpbmUgPSBtYXAucGF0aCA9IG1hcC5wb2x5Z29uID0gbWFwLnBvbHlsaW5lID0gbWFwLnJlY3QgPSBbMSwgJzxzdmcgJyArICd4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgJyArICd4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiAnICsgJ3htbG5zOmV2PVwiaHR0cDovL3d3dy53My5vcmcvMjAwMS94bWwtZXZlbnRzXCInICsgJ3ZlcnNpb249XCIxLjFcIj4nLCAnPC9zdmc+J107XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYSBub2RlIGlzIGEgc3VwcG9ydGVkIHRlbXBsYXRlIG5vZGUgd2l0aCBhXG5cdCAqIERvY3VtZW50RnJhZ21lbnQgY29udGVudC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNSZWFsVGVtcGxhdGUobm9kZSkge1xuXHQgIHJldHVybiBpc1RlbXBsYXRlKG5vZGUpICYmIGlzRnJhZ21lbnQobm9kZS5jb250ZW50KTtcblx0fVxuXHRcblx0dmFyIHRhZ1JFJDEgPSAvPChbXFx3Oi1dKykvO1xuXHR2YXIgZW50aXR5UkUgPSAvJiM/XFx3Kz87Lztcblx0dmFyIGNvbW1lbnRSRSA9IC88IS0tLztcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IGEgc3RyaW5nIHRlbXBsYXRlIHRvIGEgRG9jdW1lbnRGcmFnbWVudC5cblx0ICogRGV0ZXJtaW5lcyBjb3JyZWN0IHdyYXBwaW5nIGJ5IHRhZyB0eXBlcy4gV3JhcHBpbmdcblx0ICogc3RyYXRlZ3kgZm91bmQgaW4galF1ZXJ5ICYgY29tcG9uZW50L2RvbWlmeS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHRlbXBsYXRlU3RyaW5nXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gcmF3XG5cdCAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc3RyaW5nVG9GcmFnbWVudCh0ZW1wbGF0ZVN0cmluZywgcmF3KSB7XG5cdCAgLy8gdHJ5IGEgY2FjaGUgaGl0IGZpcnN0XG5cdCAgdmFyIGNhY2hlS2V5ID0gcmF3ID8gdGVtcGxhdGVTdHJpbmcgOiB0ZW1wbGF0ZVN0cmluZy50cmltKCk7XG5cdCAgdmFyIGhpdCA9IHRlbXBsYXRlQ2FjaGUuZ2V0KGNhY2hlS2V5KTtcblx0ICBpZiAoaGl0KSB7XG5cdCAgICByZXR1cm4gaGl0O1xuXHQgIH1cblx0XG5cdCAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdCAgdmFyIHRhZ01hdGNoID0gdGVtcGxhdGVTdHJpbmcubWF0Y2godGFnUkUkMSk7XG5cdCAgdmFyIGVudGl0eU1hdGNoID0gZW50aXR5UkUudGVzdCh0ZW1wbGF0ZVN0cmluZyk7XG5cdCAgdmFyIGNvbW1lbnRNYXRjaCA9IGNvbW1lbnRSRS50ZXN0KHRlbXBsYXRlU3RyaW5nKTtcblx0XG5cdCAgaWYgKCF0YWdNYXRjaCAmJiAhZW50aXR5TWF0Y2ggJiYgIWNvbW1lbnRNYXRjaCkge1xuXHQgICAgLy8gdGV4dCBvbmx5LCByZXR1cm4gYSBzaW5nbGUgdGV4dCBub2RlLlxuXHQgICAgZnJhZy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZW1wbGF0ZVN0cmluZykpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgdGFnID0gdGFnTWF0Y2ggJiYgdGFnTWF0Y2hbMV07XG5cdCAgICB2YXIgd3JhcCA9IG1hcFt0YWddIHx8IG1hcC5lZmF1bHQ7XG5cdCAgICB2YXIgZGVwdGggPSB3cmFwWzBdO1xuXHQgICAgdmFyIHByZWZpeCA9IHdyYXBbMV07XG5cdCAgICB2YXIgc3VmZml4ID0gd3JhcFsyXTtcblx0ICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFxuXHQgICAgbm9kZS5pbm5lckhUTUwgPSBwcmVmaXggKyB0ZW1wbGF0ZVN0cmluZyArIHN1ZmZpeDtcblx0ICAgIHdoaWxlIChkZXB0aC0tKSB7XG5cdCAgICAgIG5vZGUgPSBub2RlLmxhc3RDaGlsZDtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgY2hpbGQ7XG5cdCAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgd2hpbGUgKGNoaWxkID0gbm9kZS5maXJzdENoaWxkKSB7XG5cdCAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgICAgZnJhZy5hcHBlbmRDaGlsZChjaGlsZCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmICghcmF3KSB7XG5cdCAgICB0cmltTm9kZShmcmFnKTtcblx0ICB9XG5cdCAgdGVtcGxhdGVDYWNoZS5wdXQoY2FjaGVLZXksIGZyYWcpO1xuXHQgIHJldHVybiBmcmFnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBhIHRlbXBsYXRlIG5vZGUgdG8gYSBEb2N1bWVudEZyYWdtZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBub2RlVG9GcmFnbWVudChub2RlKSB7XG5cdCAgLy8gaWYgaXRzIGEgdGVtcGxhdGUgdGFnIGFuZCB0aGUgYnJvd3NlciBzdXBwb3J0cyBpdCxcblx0ICAvLyBpdHMgY29udGVudCBpcyBhbHJlYWR5IGEgZG9jdW1lbnQgZnJhZ21lbnQuIEhvd2V2ZXIsIGlPUyBTYWZhcmkgaGFzXG5cdCAgLy8gYnVnIHdoZW4gdXNpbmcgZGlyZWN0bHkgY2xvbmVkIHRlbXBsYXRlIGNvbnRlbnQgd2l0aCB0b3VjaFxuXHQgIC8vIGV2ZW50cyBhbmQgY2FuIGNhdXNlIGNyYXNoZXMgd2hlbiB0aGUgbm9kZXMgYXJlIHJlbW92ZWQgZnJvbSBET00sIHNvIHdlXG5cdCAgLy8gaGF2ZSB0byB0cmVhdCB0ZW1wbGF0ZSBlbGVtZW50cyBhcyBzdHJpbmcgdGVtcGxhdGVzLiAoIzI4MDUpXG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGlzUmVhbFRlbXBsYXRlKG5vZGUpKSB7XG5cdCAgICByZXR1cm4gc3RyaW5nVG9GcmFnbWVudChub2RlLmlubmVySFRNTCk7XG5cdCAgfVxuXHQgIC8vIHNjcmlwdCB0ZW1wbGF0ZVxuXHQgIGlmIChub2RlLnRhZ05hbWUgPT09ICdTQ1JJUFQnKSB7XG5cdCAgICByZXR1cm4gc3RyaW5nVG9GcmFnbWVudChub2RlLnRleHRDb250ZW50KTtcblx0ICB9XG5cdCAgLy8gbm9ybWFsIG5vZGUsIGNsb25lIGl0IHRvIGF2b2lkIG11dGF0aW5nIHRoZSBvcmlnaW5hbFxuXHQgIHZhciBjbG9uZWROb2RlID0gY2xvbmVOb2RlKG5vZGUpO1xuXHQgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXHQgIHZhciBjaGlsZDtcblx0ICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgIHdoaWxlIChjaGlsZCA9IGNsb25lZE5vZGUuZmlyc3RDaGlsZCkge1xuXHQgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgZnJhZy5hcHBlbmRDaGlsZChjaGlsZCk7XG5cdCAgfVxuXHQgIHRyaW1Ob2RlKGZyYWcpO1xuXHQgIHJldHVybiBmcmFnO1xuXHR9XG5cdFxuXHQvLyBUZXN0IGZvciB0aGUgcHJlc2VuY2Ugb2YgdGhlIFNhZmFyaSB0ZW1wbGF0ZSBjbG9uaW5nIGJ1Z1xuXHQvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93dWcuY2dpP2lkPTEzNzc1NVxuXHR2YXIgaGFzQnJva2VuVGVtcGxhdGUgPSAoZnVuY3Rpb24gKCkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgaWYgKGluQnJvd3Nlcikge1xuXHQgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIGEuaW5uZXJIVE1MID0gJzx0ZW1wbGF0ZT4xPC90ZW1wbGF0ZT4nO1xuXHQgICAgcmV0dXJuICFhLmNsb25lTm9kZSh0cnVlKS5maXJzdENoaWxkLmlubmVySFRNTDtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0fSkoKTtcblx0XG5cdC8vIFRlc3QgZm9yIElFMTAvMTEgdGV4dGFyZWEgcGxhY2Vob2xkZXIgY2xvbmUgYnVnXG5cdHZhciBoYXNUZXh0YXJlYUNsb25lQnVnID0gKGZ1bmN0aW9uICgpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuXHQgIGlmIChpbkJyb3dzZXIpIHtcblx0ICAgIHZhciB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcblx0ICAgIHQucGxhY2Vob2xkZXIgPSAndCc7XG5cdCAgICByZXR1cm4gdC5jbG9uZU5vZGUodHJ1ZSkudmFsdWUgPT09ICd0Jztcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0fSkoKTtcblx0XG5cdC8qKlxuXHQgKiAxLiBEZWFsIHdpdGggU2FmYXJpIGNsb25pbmcgbmVzdGVkIDx0ZW1wbGF0ZT4gYnVnIGJ5XG5cdCAqICAgIG1hbnVhbGx5IGNsb25pbmcgYWxsIHRlbXBsYXRlIGluc3RhbmNlcy5cblx0ICogMi4gRGVhbCB3aXRoIElFMTAvMTEgdGV4dGFyZWEgcGxhY2Vob2xkZXIgYnVnIGJ5IHNldHRpbmdcblx0ICogICAgdGhlIGNvcnJlY3QgdmFsdWUgYWZ0ZXIgY2xvbmluZy5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IG5vZGVcblx0ICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNsb25lTm9kZShub2RlKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKCFub2RlLnF1ZXJ5U2VsZWN0b3JBbGwpIHtcblx0ICAgIHJldHVybiBub2RlLmNsb25lTm9kZSgpO1xuXHQgIH1cblx0ICB2YXIgcmVzID0gbm9kZS5jbG9uZU5vZGUodHJ1ZSk7XG5cdCAgdmFyIGksIG9yaWdpbmFsLCBjbG9uZWQ7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGhhc0Jyb2tlblRlbXBsYXRlKSB7XG5cdCAgICB2YXIgdGVtcENsb25lID0gcmVzO1xuXHQgICAgaWYgKGlzUmVhbFRlbXBsYXRlKG5vZGUpKSB7XG5cdCAgICAgIG5vZGUgPSBub2RlLmNvbnRlbnQ7XG5cdCAgICAgIHRlbXBDbG9uZSA9IHJlcy5jb250ZW50O1xuXHQgICAgfVxuXHQgICAgb3JpZ2luYWwgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RlbXBsYXRlJyk7XG5cdCAgICBpZiAob3JpZ2luYWwubGVuZ3RoKSB7XG5cdCAgICAgIGNsb25lZCA9IHRlbXBDbG9uZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpO1xuXHQgICAgICBpID0gY2xvbmVkLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICAgIGNsb25lZFtpXS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChjbG9uZU5vZGUob3JpZ2luYWxbaV0pLCBjbG9uZWRbaV0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChoYXNUZXh0YXJlYUNsb25lQnVnKSB7XG5cdCAgICBpZiAobm9kZS50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG5cdCAgICAgIHJlcy52YWx1ZSA9IG5vZGUudmFsdWU7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvcmlnaW5hbCA9IG5vZGUucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKTtcblx0ICAgICAgaWYgKG9yaWdpbmFsLmxlbmd0aCkge1xuXHQgICAgICAgIGNsb25lZCA9IHJlcy5xdWVyeVNlbGVjdG9yQWxsKCd0ZXh0YXJlYScpO1xuXHQgICAgICAgIGkgPSBjbG9uZWQubGVuZ3RoO1xuXHQgICAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICAgIGNsb25lZFtpXS52YWx1ZSA9IG9yaWdpbmFsW2ldLnZhbHVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJvY2VzcyB0aGUgdGVtcGxhdGUgb3B0aW9uIGFuZCBub3JtYWxpemVzIGl0IGludG8gYVxuXHQgKiBhIERvY3VtZW50RnJhZ21lbnQgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHBhcnRpYWwgb3IgYVxuXHQgKiBpbnN0YW5jZSB0ZW1wbGF0ZS5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB0ZW1wbGF0ZVxuXHQgKiAgICAgICAgUG9zc2libGUgdmFsdWVzIGluY2x1ZGU6XG5cdCAqICAgICAgICAtIERvY3VtZW50RnJhZ21lbnQgb2JqZWN0XG5cdCAqICAgICAgICAtIE5vZGUgb2JqZWN0IG9mIHR5cGUgVGVtcGxhdGVcblx0ICogICAgICAgIC0gaWQgc2VsZWN0b3I6ICcjc29tZS10ZW1wbGF0ZS1pZCdcblx0ICogICAgICAgIC0gdGVtcGxhdGUgc3RyaW5nOiAnPGRpdj48c3Bhbj57e21zZ319PC9zcGFuPjwvZGl2Pidcblx0ICogQHBhcmFtIHtCb29sZWFufSBzaG91bGRDbG9uZVxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHJhd1xuXHQgKiAgICAgICAgaW5saW5lIEhUTUwgaW50ZXJwb2xhdGlvbi4gRG8gbm90IGNoZWNrIGZvciBpZFxuXHQgKiAgICAgICAgc2VsZWN0b3IgYW5kIGtlZXAgd2hpdGVzcGFjZSBpbiB0aGUgc3RyaW5nLlxuXHQgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZVRlbXBsYXRlKHRlbXBsYXRlLCBzaG91bGRDbG9uZSwgcmF3KSB7XG5cdCAgdmFyIG5vZGUsIGZyYWc7XG5cdFxuXHQgIC8vIGlmIHRoZSB0ZW1wbGF0ZSBpcyBhbHJlYWR5IGEgZG9jdW1lbnQgZnJhZ21lbnQsXG5cdCAgLy8gZG8gbm90aGluZ1xuXHQgIGlmIChpc0ZyYWdtZW50KHRlbXBsYXRlKSkge1xuXHQgICAgdHJpbU5vZGUodGVtcGxhdGUpO1xuXHQgICAgcmV0dXJuIHNob3VsZENsb25lID8gY2xvbmVOb2RlKHRlbXBsYXRlKSA6IHRlbXBsYXRlO1xuXHQgIH1cblx0XG5cdCAgaWYgKHR5cGVvZiB0ZW1wbGF0ZSA9PT0gJ3N0cmluZycpIHtcblx0ICAgIC8vIGlkIHNlbGVjdG9yXG5cdCAgICBpZiAoIXJhdyAmJiB0ZW1wbGF0ZS5jaGFyQXQoMCkgPT09ICcjJykge1xuXHQgICAgICAvLyBpZCBzZWxlY3RvciBjYW4gYmUgY2FjaGVkIHRvb1xuXHQgICAgICBmcmFnID0gaWRTZWxlY3RvckNhY2hlLmdldCh0ZW1wbGF0ZSk7XG5cdCAgICAgIGlmICghZnJhZykge1xuXHQgICAgICAgIG5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0ZW1wbGF0ZS5zbGljZSgxKSk7XG5cdCAgICAgICAgaWYgKG5vZGUpIHtcblx0ICAgICAgICAgIGZyYWcgPSBub2RlVG9GcmFnbWVudChub2RlKTtcblx0ICAgICAgICAgIC8vIHNhdmUgc2VsZWN0b3IgdG8gY2FjaGVcblx0ICAgICAgICAgIGlkU2VsZWN0b3JDYWNoZS5wdXQodGVtcGxhdGUsIGZyYWcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gbm9ybWFsIHN0cmluZyB0ZW1wbGF0ZVxuXHQgICAgICBmcmFnID0gc3RyaW5nVG9GcmFnbWVudCh0ZW1wbGF0ZSwgcmF3KTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHRlbXBsYXRlLm5vZGVUeXBlKSB7XG5cdCAgICAvLyBhIGRpcmVjdCBub2RlXG5cdCAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQodGVtcGxhdGUpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGZyYWcgJiYgc2hvdWxkQ2xvbmUgPyBjbG9uZU5vZGUoZnJhZykgOiBmcmFnO1xuXHR9XG5cdFxuXHR2YXIgdGVtcGxhdGUgPSBPYmplY3QuZnJlZXplKHtcblx0ICBjbG9uZU5vZGU6IGNsb25lTm9kZSxcblx0ICBwYXJzZVRlbXBsYXRlOiBwYXJzZVRlbXBsYXRlXG5cdH0pO1xuXHRcblx0dmFyIGh0bWwgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyBhIGNvbW1lbnQgbm9kZSBtZWFucyB0aGlzIGlzIGEgYmluZGluZyBmb3Jcblx0ICAgIC8vIHt7eyBpbmxpbmUgdW5lc2NhcGVkIGh0bWwgfX19XG5cdCAgICBpZiAodGhpcy5lbC5ub2RlVHlwZSA9PT0gOCkge1xuXHQgICAgICAvLyBob2xkIG5vZGVzXG5cdCAgICAgIHRoaXMubm9kZXMgPSBbXTtcblx0ICAgICAgLy8gcmVwbGFjZSB0aGUgcGxhY2Vob2xkZXIgd2l0aCBwcm9wZXIgYW5jaG9yXG5cdCAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWh0bWwnKTtcblx0ICAgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIHZhbHVlID0gX3RvU3RyaW5nKHZhbHVlKTtcblx0ICAgIGlmICh0aGlzLm5vZGVzKSB7XG5cdCAgICAgIHRoaXMuc3dhcCh2YWx1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmVsLmlubmVySFRNTCA9IHZhbHVlO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHN3YXA6IGZ1bmN0aW9uIHN3YXAodmFsdWUpIHtcblx0ICAgIC8vIHJlbW92ZSBvbGQgbm9kZXNcblx0ICAgIHZhciBpID0gdGhpcy5ub2Rlcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHJlbW92ZSh0aGlzLm5vZGVzW2ldKTtcblx0ICAgIH1cblx0ICAgIC8vIGNvbnZlcnQgbmV3IHZhbHVlIHRvIGEgZnJhZ21lbnRcblx0ICAgIC8vIGRvIG5vdCBhdHRlbXB0IHRvIHJldHJpZXZlIGZyb20gaWQgc2VsZWN0b3Jcblx0ICAgIHZhciBmcmFnID0gcGFyc2VUZW1wbGF0ZSh2YWx1ZSwgdHJ1ZSwgdHJ1ZSk7XG5cdCAgICAvLyBzYXZlIGEgcmVmZXJlbmNlIHRvIHRoZXNlIG5vZGVzIHNvIHdlIGNhbiByZW1vdmUgbGF0ZXJcblx0ICAgIHRoaXMubm9kZXMgPSB0b0FycmF5KGZyYWcuY2hpbGROb2Rlcyk7XG5cdCAgICBiZWZvcmUoZnJhZywgdGhpcy5hbmNob3IpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBYnN0cmFjdGlvbiBmb3IgYSBwYXJ0aWFsbHktY29tcGlsZWQgZnJhZ21lbnQuXG5cdCAqIENhbiBvcHRpb25hbGx5IGNvbXBpbGUgY29udGVudCB3aXRoIGEgY2hpbGQgc2NvcGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGxpbmtlclxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG5cdCAqIEBwYXJhbSB7VnVlfSBbaG9zdF1cblx0ICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cblx0ICogQHBhcmFtIHtGcmFnbWVudH0gW3BhcmVudEZyYWddXG5cdCAqL1xuXHRmdW5jdGlvbiBGcmFnbWVudChsaW5rZXIsIHZtLCBmcmFnLCBob3N0LCBzY29wZSwgcGFyZW50RnJhZykge1xuXHQgIHRoaXMuY2hpbGRyZW4gPSBbXTtcblx0ICB0aGlzLmNoaWxkRnJhZ3MgPSBbXTtcblx0ICB0aGlzLnZtID0gdm07XG5cdCAgdGhpcy5zY29wZSA9IHNjb3BlO1xuXHQgIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcblx0ICB0aGlzLnBhcmVudEZyYWcgPSBwYXJlbnRGcmFnO1xuXHQgIGlmIChwYXJlbnRGcmFnKSB7XG5cdCAgICBwYXJlbnRGcmFnLmNoaWxkRnJhZ3MucHVzaCh0aGlzKTtcblx0ICB9XG5cdCAgdGhpcy51bmxpbmsgPSBsaW5rZXIodm0sIGZyYWcsIGhvc3QsIHNjb3BlLCB0aGlzKTtcblx0ICB2YXIgc2luZ2xlID0gdGhpcy5zaW5nbGUgPSBmcmFnLmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICYmXG5cdCAgLy8gZG8gbm90IGdvIHNpbmdsZSBtb2RlIGlmIHRoZSBvbmx5IG5vZGUgaXMgYW4gYW5jaG9yXG5cdCAgIWZyYWcuY2hpbGROb2Rlc1swXS5fX3ZfYW5jaG9yO1xuXHQgIGlmIChzaW5nbGUpIHtcblx0ICAgIHRoaXMubm9kZSA9IGZyYWcuY2hpbGROb2Rlc1swXTtcblx0ICAgIHRoaXMuYmVmb3JlID0gc2luZ2xlQmVmb3JlO1xuXHQgICAgdGhpcy5yZW1vdmUgPSBzaW5nbGVSZW1vdmU7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRoaXMubm9kZSA9IGNyZWF0ZUFuY2hvcignZnJhZ21lbnQtc3RhcnQnKTtcblx0ICAgIHRoaXMuZW5kID0gY3JlYXRlQW5jaG9yKCdmcmFnbWVudC1lbmQnKTtcblx0ICAgIHRoaXMuZnJhZyA9IGZyYWc7XG5cdCAgICBwcmVwZW5kKHRoaXMubm9kZSwgZnJhZyk7XG5cdCAgICBmcmFnLmFwcGVuZENoaWxkKHRoaXMuZW5kKTtcblx0ICAgIHRoaXMuYmVmb3JlID0gbXVsdGlCZWZvcmU7XG5cdCAgICB0aGlzLnJlbW92ZSA9IG11bHRpUmVtb3ZlO1xuXHQgIH1cblx0ICB0aGlzLm5vZGUuX192X2ZyYWcgPSB0aGlzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2FsbCBhdHRhY2gvZGV0YWNoIGZvciBhbGwgY29tcG9uZW50cyBjb250YWluZWQgd2l0aGluXG5cdCAqIHRoaXMgZnJhZ21lbnQuIEFsc28gZG8gc28gcmVjdXJzaXZlbHkgZm9yIGFsbCBjaGlsZFxuXHQgKiBmcmFnbWVudHMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGhvb2tcblx0ICovXG5cdFxuXHRGcmFnbWVudC5wcm90b3R5cGUuY2FsbEhvb2sgPSBmdW5jdGlvbiAoaG9vaykge1xuXHQgIHZhciBpLCBsO1xuXHQgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICB0aGlzLmNoaWxkRnJhZ3NbaV0uY2FsbEhvb2soaG9vayk7XG5cdCAgfVxuXHQgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgaG9vayh0aGlzLmNoaWxkcmVuW2ldKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogSW5zZXJ0IGZyYWdtZW50IGJlZm9yZSB0YXJnZXQsIHNpbmdsZSBub2RlIHZlcnNpb25cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICogQHBhcmFtIHtCb29sZWFufSB3aXRoVHJhbnNpdGlvblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHNpbmdsZUJlZm9yZSh0YXJnZXQsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgdGhpcy5pbnNlcnRlZCA9IHRydWU7XG5cdCAgdmFyIG1ldGhvZCA9IHdpdGhUcmFuc2l0aW9uICE9PSBmYWxzZSA/IGJlZm9yZVdpdGhUcmFuc2l0aW9uIDogYmVmb3JlO1xuXHQgIG1ldGhvZCh0aGlzLm5vZGUsIHRhcmdldCwgdGhpcy52bSk7XG5cdCAgaWYgKGluRG9jKHRoaXMubm9kZSkpIHtcblx0ICAgIHRoaXMuY2FsbEhvb2soYXR0YWNoKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgZnJhZ21lbnQsIHNpbmdsZSBub2RlIHZlcnNpb25cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzaW5nbGVSZW1vdmUoKSB7XG5cdCAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuXHQgIHZhciBzaG91bGRDYWxsUmVtb3ZlID0gaW5Eb2ModGhpcy5ub2RlKTtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgdGhpcy5iZWZvcmVSZW1vdmUoKTtcblx0ICByZW1vdmVXaXRoVHJhbnNpdGlvbih0aGlzLm5vZGUsIHRoaXMudm0sIGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChzaG91bGRDYWxsUmVtb3ZlKSB7XG5cdCAgICAgIHNlbGYuY2FsbEhvb2soZGV0YWNoKTtcblx0ICAgIH1cblx0ICAgIHNlbGYuZGVzdHJveSgpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSW5zZXJ0IGZyYWdtZW50IGJlZm9yZSB0YXJnZXQsIG11bHRpLW5vZGVzIHZlcnNpb25cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICogQHBhcmFtIHtCb29sZWFufSB3aXRoVHJhbnNpdGlvblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG11bHRpQmVmb3JlKHRhcmdldCwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICB0aGlzLmluc2VydGVkID0gdHJ1ZTtcblx0ICB2YXIgdm0gPSB0aGlzLnZtO1xuXHQgIHZhciBtZXRob2QgPSB3aXRoVHJhbnNpdGlvbiAhPT0gZmFsc2UgPyBiZWZvcmVXaXRoVHJhbnNpdGlvbiA6IGJlZm9yZTtcblx0ICBtYXBOb2RlUmFuZ2UodGhpcy5ub2RlLCB0aGlzLmVuZCwgZnVuY3Rpb24gKG5vZGUpIHtcblx0ICAgIG1ldGhvZChub2RlLCB0YXJnZXQsIHZtKTtcblx0ICB9KTtcblx0ICBpZiAoaW5Eb2ModGhpcy5ub2RlKSkge1xuXHQgICAgdGhpcy5jYWxsSG9vayhhdHRhY2gpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBmcmFnbWVudCwgbXVsdGktbm9kZXMgdmVyc2lvblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG11bHRpUmVtb3ZlKCkge1xuXHQgIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgdmFyIHNob3VsZENhbGxSZW1vdmUgPSBpbkRvYyh0aGlzLm5vZGUpO1xuXHQgIHRoaXMuYmVmb3JlUmVtb3ZlKCk7XG5cdCAgcmVtb3ZlTm9kZVJhbmdlKHRoaXMubm9kZSwgdGhpcy5lbmQsIHRoaXMudm0sIHRoaXMuZnJhZywgZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKHNob3VsZENhbGxSZW1vdmUpIHtcblx0ICAgICAgc2VsZi5jYWxsSG9vayhkZXRhY2gpO1xuXHQgICAgfVxuXHQgICAgc2VsZi5kZXN0cm95KCk7XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcmVwYXJlIHRoZSBmcmFnbWVudCBmb3IgcmVtb3ZhbC5cblx0ICovXG5cdFxuXHRGcmFnbWVudC5wcm90b3R5cGUuYmVmb3JlUmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBpLCBsO1xuXHQgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAvLyBjYWxsIHRoZSBzYW1lIG1ldGhvZCByZWN1cnNpdmVseSBvbiBjaGlsZFxuXHQgICAgLy8gZnJhZ21lbnRzLCBkZXB0aC1maXJzdFxuXHQgICAgdGhpcy5jaGlsZEZyYWdzW2ldLmJlZm9yZVJlbW92ZShmYWxzZSk7XG5cdCAgfVxuXHQgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgLy8gQ2FsbCBkZXN0cm95IGZvciBhbGwgY29udGFpbmVkIGluc3RhbmNlcyxcblx0ICAgIC8vIHdpdGggcmVtb3ZlOmZhbHNlIGFuZCBkZWZlcjp0cnVlLlxuXHQgICAgLy8gRGVmZXIgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugd2UgbmVlZCB0b1xuXHQgICAgLy8ga2VlcCB0aGUgY2hpbGRyZW4gdG8gY2FsbCBkZXRhY2ggaG9va3Ncblx0ICAgIC8vIG9uIHRoZW0uXG5cdCAgICB0aGlzLmNoaWxkcmVuW2ldLiRkZXN0cm95KGZhbHNlLCB0cnVlKTtcblx0ICB9XG5cdCAgdmFyIGRpcnMgPSB0aGlzLnVubGluay5kaXJzO1xuXHQgIGZvciAoaSA9IDAsIGwgPSBkaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgLy8gZGlzYWJsZSB0aGUgd2F0Y2hlcnMgb24gYWxsIHRoZSBkaXJlY3RpdmVzXG5cdCAgICAvLyBzbyB0aGF0IHRoZSByZW5kZXJlZCBjb250ZW50IHN0YXlzIHRoZSBzYW1lXG5cdCAgICAvLyBkdXJpbmcgcmVtb3ZhbC5cblx0ICAgIGRpcnNbaV0uX3dhdGNoZXIgJiYgZGlyc1tpXS5fd2F0Y2hlci50ZWFyZG93bigpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBEZXN0cm95IHRoZSBmcmFnbWVudC5cblx0ICovXG5cdFxuXHRGcmFnbWVudC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcblx0ICBpZiAodGhpcy5wYXJlbnRGcmFnKSB7XG5cdCAgICB0aGlzLnBhcmVudEZyYWcuY2hpbGRGcmFncy4kcmVtb3ZlKHRoaXMpO1xuXHQgIH1cblx0ICB0aGlzLm5vZGUuX192X2ZyYWcgPSBudWxsO1xuXHQgIHRoaXMudW5saW5rKCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2FsbCBhdHRhY2ggaG9vayBmb3IgYSBWdWUgaW5zdGFuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGF0dGFjaChjaGlsZCkge1xuXHQgIGlmICghY2hpbGQuX2lzQXR0YWNoZWQgJiYgaW5Eb2MoY2hpbGQuJGVsKSkge1xuXHQgICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENhbGwgZGV0YWNoIGhvb2sgZm9yIGEgVnVlIGluc3RhbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkZXRhY2goY2hpbGQpIHtcblx0ICBpZiAoY2hpbGQuX2lzQXR0YWNoZWQgJiYgIWluRG9jKGNoaWxkLiRlbCkpIHtcblx0ICAgIGNoaWxkLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBsaW5rZXJDYWNoZSA9IG5ldyBDYWNoZSg1MDAwKTtcblx0XG5cdC8qKlxuXHQgKiBBIGZhY3RvcnkgdGhhdCBjYW4gYmUgdXNlZCB0byBjcmVhdGUgaW5zdGFuY2VzIG9mIGFcblx0ICogZnJhZ21lbnQuIENhY2hlcyB0aGUgY29tcGlsZWQgbGlua2VyIGlmIHBvc3NpYmxlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtFbGVtZW50fFN0cmluZ30gZWxcblx0ICovXG5cdGZ1bmN0aW9uIEZyYWdtZW50RmFjdG9yeSh2bSwgZWwpIHtcblx0ICB0aGlzLnZtID0gdm07XG5cdCAgdmFyIHRlbXBsYXRlO1xuXHQgIHZhciBpc1N0cmluZyA9IHR5cGVvZiBlbCA9PT0gJ3N0cmluZyc7XG5cdCAgaWYgKGlzU3RyaW5nIHx8IGlzVGVtcGxhdGUoZWwpICYmICFlbC5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuXHQgICAgdGVtcGxhdGUgPSBwYXJzZVRlbXBsYXRlKGVsLCB0cnVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdCAgICB0ZW1wbGF0ZS5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfVxuXHQgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcblx0ICAvLyBsaW5rZXIgY2FuIGJlIGNhY2hlZCwgYnV0IG9ubHkgZm9yIGNvbXBvbmVudHNcblx0ICB2YXIgbGlua2VyO1xuXHQgIHZhciBjaWQgPSB2bS5jb25zdHJ1Y3Rvci5jaWQ7XG5cdCAgaWYgKGNpZCA+IDApIHtcblx0ICAgIHZhciBjYWNoZUlkID0gY2lkICsgKGlzU3RyaW5nID8gZWwgOiBnZXRPdXRlckhUTUwoZWwpKTtcblx0ICAgIGxpbmtlciA9IGxpbmtlckNhY2hlLmdldChjYWNoZUlkKTtcblx0ICAgIGlmICghbGlua2VyKSB7XG5cdCAgICAgIGxpbmtlciA9IGNvbXBpbGUodGVtcGxhdGUsIHZtLiRvcHRpb25zLCB0cnVlKTtcblx0ICAgICAgbGlua2VyQ2FjaGUucHV0KGNhY2hlSWQsIGxpbmtlcik7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIGxpbmtlciA9IGNvbXBpbGUodGVtcGxhdGUsIHZtLiRvcHRpb25zLCB0cnVlKTtcblx0ICB9XG5cdCAgdGhpcy5saW5rZXIgPSBsaW5rZXI7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGUgYSBmcmFnbWVudCBpbnN0YW5jZSB3aXRoIGdpdmVuIGhvc3QgYW5kIHNjb3BlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gaG9zdFxuXHQgKiBAcGFyYW0ge09iamVjdH0gc2NvcGVcblx0ICogQHBhcmFtIHtGcmFnbWVudH0gcGFyZW50RnJhZ1xuXHQgKi9cblx0XG5cdEZyYWdtZW50RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKSB7XG5cdCAgdmFyIGZyYWcgPSBjbG9uZU5vZGUodGhpcy50ZW1wbGF0ZSk7XG5cdCAgcmV0dXJuIG5ldyBGcmFnbWVudCh0aGlzLmxpbmtlciwgdGhpcy52bSwgZnJhZywgaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpO1xuXHR9O1xuXHRcblx0dmFyIE9OID0gNzAwO1xuXHR2YXIgTU9ERUwgPSA4MDA7XG5cdHZhciBCSU5EID0gODUwO1xuXHR2YXIgVFJBTlNJVElPTiA9IDExMDA7XG5cdHZhciBFTCA9IDE1MDA7XG5cdHZhciBDT01QT05FTlQgPSAxNTAwO1xuXHR2YXIgUEFSVElBTCA9IDE3NTA7XG5cdHZhciBJRiA9IDIxMDA7XG5cdHZhciBGT1IgPSAyMjAwO1xuXHR2YXIgU0xPVCA9IDIzMDA7XG5cdFxuXHR2YXIgdWlkJDMgPSAwO1xuXHRcblx0dmFyIHZGb3IgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBGT1IsXG5cdCAgdGVybWluYWw6IHRydWUsXG5cdFxuXHQgIHBhcmFtczogWyd0cmFjay1ieScsICdzdGFnZ2VyJywgJ2VudGVyLXN0YWdnZXInLCAnbGVhdmUtc3RhZ2dlciddLFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gc3VwcG9ydCBcIml0ZW0gaW4vb2YgaXRlbXNcIiBzeW50YXhcblx0ICAgIHZhciBpbk1hdGNoID0gdGhpcy5leHByZXNzaW9uLm1hdGNoKC8oLiopICg/OmlufG9mKSAoLiopLyk7XG5cdCAgICBpZiAoaW5NYXRjaCkge1xuXHQgICAgICB2YXIgaXRNYXRjaCA9IGluTWF0Y2hbMV0ubWF0Y2goL1xcKCguKiksKC4qKVxcKS8pO1xuXHQgICAgICBpZiAoaXRNYXRjaCkge1xuXHQgICAgICAgIHRoaXMuaXRlcmF0b3IgPSBpdE1hdGNoWzFdLnRyaW0oKTtcblx0ICAgICAgICB0aGlzLmFsaWFzID0gaXRNYXRjaFsyXS50cmltKCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5hbGlhcyA9IGluTWF0Y2hbMV0udHJpbSgpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGluTWF0Y2hbMl07XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCF0aGlzLmFsaWFzKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCB2LWZvciBleHByZXNzaW9uIFwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyAnYWxpYXMgaXMgcmVxdWlyZWQuJywgdGhpcy52bSk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICAvLyB1aWQgYXMgYSBjYWNoZSBpZGVudGlmaWVyXG5cdCAgICB0aGlzLmlkID0gJ19fdi1mb3JfXycgKyArK3VpZCQzO1xuXHRcblx0ICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgYW4gb3B0aW9uIGxpc3QsXG5cdCAgICAvLyBzbyB0aGF0IHdlIGtub3cgaWYgd2UgbmVlZCB0byB1cGRhdGUgdGhlIDxzZWxlY3Q+J3Ncblx0ICAgIC8vIHYtbW9kZWwgd2hlbiB0aGUgb3B0aW9uIGxpc3QgaGFzIGNoYW5nZWQuXG5cdCAgICAvLyBiZWNhdXNlIHYtbW9kZWwgaGFzIGEgbG93ZXIgcHJpb3JpdHkgdGhhbiB2LWZvcixcblx0ICAgIC8vIHRoZSB2LW1vZGVsIGlzIG5vdCBib3VuZCBoZXJlIHlldCwgc28gd2UgaGF2ZSB0b1xuXHQgICAgLy8gcmV0cml2ZSBpdCBpbiB0aGUgYWN0dWFsIHVwZGF0ZU1vZGVsKCkgZnVuY3Rpb24uXG5cdCAgICB2YXIgdGFnID0gdGhpcy5lbC50YWdOYW1lO1xuXHQgICAgdGhpcy5pc09wdGlvbiA9ICh0YWcgPT09ICdPUFRJT04nIHx8IHRhZyA9PT0gJ09QVEdST1VQJykgJiYgdGhpcy5lbC5wYXJlbnROb2RlLnRhZ05hbWUgPT09ICdTRUxFQ1QnO1xuXHRcblx0ICAgIC8vIHNldHVwIGFuY2hvciBub2Rlc1xuXHQgICAgdGhpcy5zdGFydCA9IGNyZWF0ZUFuY2hvcigndi1mb3Itc3RhcnQnKTtcblx0ICAgIHRoaXMuZW5kID0gY3JlYXRlQW5jaG9yKCd2LWZvci1lbmQnKTtcblx0ICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5lbmQpO1xuXHQgICAgYmVmb3JlKHRoaXMuc3RhcnQsIHRoaXMuZW5kKTtcblx0XG5cdCAgICAvLyBjYWNoZVxuXHQgICAgdGhpcy5jYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdFxuXHQgICAgLy8gZnJhZ21lbnQgZmFjdG9yeVxuXHQgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCB0aGlzLmVsKTtcblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShkYXRhKSB7XG5cdCAgICB0aGlzLmRpZmYoZGF0YSk7XG5cdCAgICB0aGlzLnVwZGF0ZVJlZigpO1xuXHQgICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIERpZmYsIGJhc2VkIG9uIG5ldyBkYXRhIGFuZCBvbGQgZGF0YSwgZGV0ZXJtaW5lIHRoZVxuXHQgICAqIG1pbmltdW0gYW1vdW50IG9mIERPTSBtYW5pcHVsYXRpb25zIG5lZWRlZCB0byBtYWtlIHRoZVxuXHQgICAqIERPTSByZWZsZWN0IHRoZSBuZXcgZGF0YSBBcnJheS5cblx0ICAgKlxuXHQgICAqIFRoZSBhbGdvcml0aG0gZGlmZnMgdGhlIG5ldyBkYXRhIEFycmF5IGJ5IHN0b3JpbmcgYVxuXHQgICAqIGhpZGRlbiByZWZlcmVuY2UgdG8gYW4gb3duZXIgdm0gaW5zdGFuY2Ugb24gcHJldmlvdXNseVxuXHQgICAqIHNlZW4gZGF0YS4gVGhpcyBhbGxvd3MgdXMgdG8gYWNoaWV2ZSBPKG4pIHdoaWNoIGlzXG5cdCAgICogYmV0dGVyIHRoYW4gYSBsZXZlbnNodGVpbiBkaXN0YW5jZSBiYXNlZCBhbGdvcml0aG0sXG5cdCAgICogd2hpY2ggaXMgTyhtICogbikuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0FycmF5fSBkYXRhXG5cdCAgICovXG5cdFxuXHQgIGRpZmY6IGZ1bmN0aW9uIGRpZmYoZGF0YSkge1xuXHQgICAgLy8gY2hlY2sgaWYgdGhlIEFycmF5IHdhcyBjb252ZXJ0ZWQgZnJvbSBhbiBPYmplY3Rcblx0ICAgIHZhciBpdGVtID0gZGF0YVswXTtcblx0ICAgIHZhciBjb252ZXJ0ZWRGcm9tT2JqZWN0ID0gdGhpcy5mcm9tT2JqZWN0ID0gaXNPYmplY3QoaXRlbSkgJiYgaGFzT3duKGl0ZW0sICcka2V5JykgJiYgaGFzT3duKGl0ZW0sICckdmFsdWUnKTtcblx0XG5cdCAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG5cdCAgICB2YXIgb2xkRnJhZ3MgPSB0aGlzLmZyYWdzO1xuXHQgICAgdmFyIGZyYWdzID0gdGhpcy5mcmFncyA9IG5ldyBBcnJheShkYXRhLmxlbmd0aCk7XG5cdCAgICB2YXIgYWxpYXMgPSB0aGlzLmFsaWFzO1xuXHQgICAgdmFyIGl0ZXJhdG9yID0gdGhpcy5pdGVyYXRvcjtcblx0ICAgIHZhciBzdGFydCA9IHRoaXMuc3RhcnQ7XG5cdCAgICB2YXIgZW5kID0gdGhpcy5lbmQ7XG5cdCAgICB2YXIgaW5Eb2N1bWVudCA9IGluRG9jKHN0YXJ0KTtcblx0ICAgIHZhciBpbml0ID0gIW9sZEZyYWdzO1xuXHQgICAgdmFyIGksIGwsIGZyYWcsIGtleSwgdmFsdWUsIHByaW1pdGl2ZTtcblx0XG5cdCAgICAvLyBGaXJzdCBwYXNzLCBnbyB0aHJvdWdoIHRoZSBuZXcgQXJyYXkgYW5kIGZpbGwgdXBcblx0ICAgIC8vIHRoZSBuZXcgZnJhZ3MgYXJyYXkuIElmIGEgcGllY2Ugb2YgZGF0YSBoYXMgYSBjYWNoZWRcblx0ICAgIC8vIGluc3RhbmNlIGZvciBpdCwgd2UgcmV1c2UgaXQuIE90aGVyd2lzZSBidWlsZCBhIG5ld1xuXHQgICAgLy8gaW5zdGFuY2UuXG5cdCAgICBmb3IgKGkgPSAwLCBsID0gZGF0YS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgaXRlbSA9IGRhdGFbaV07XG5cdCAgICAgIGtleSA9IGNvbnZlcnRlZEZyb21PYmplY3QgPyBpdGVtLiRrZXkgOiBudWxsO1xuXHQgICAgICB2YWx1ZSA9IGNvbnZlcnRlZEZyb21PYmplY3QgPyBpdGVtLiR2YWx1ZSA6IGl0ZW07XG5cdCAgICAgIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG5cdCAgICAgIGZyYWcgPSAhaW5pdCAmJiB0aGlzLmdldENhY2hlZEZyYWcodmFsdWUsIGksIGtleSk7XG5cdCAgICAgIGlmIChmcmFnKSB7XG5cdCAgICAgICAgLy8gcmV1c2FibGUgZnJhZ21lbnRcblx0ICAgICAgICBmcmFnLnJldXNlZCA9IHRydWU7XG5cdCAgICAgICAgLy8gdXBkYXRlICRpbmRleFxuXHQgICAgICAgIGZyYWcuc2NvcGUuJGluZGV4ID0gaTtcblx0ICAgICAgICAvLyB1cGRhdGUgJGtleVxuXHQgICAgICAgIGlmIChrZXkpIHtcblx0ICAgICAgICAgIGZyYWcuc2NvcGUuJGtleSA9IGtleTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gdXBkYXRlIGl0ZXJhdG9yXG5cdCAgICAgICAgaWYgKGl0ZXJhdG9yKSB7XG5cdCAgICAgICAgICBmcmFnLnNjb3BlW2l0ZXJhdG9yXSA9IGtleSAhPT0gbnVsbCA/IGtleSA6IGk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIHVwZGF0ZSBkYXRhIGZvciB0cmFjay1ieSwgb2JqZWN0IHJlcGVhdCAmXG5cdCAgICAgICAgLy8gcHJpbWl0aXZlIHZhbHVlcy5cblx0ICAgICAgICBpZiAodHJhY2tCeUtleSB8fCBjb252ZXJ0ZWRGcm9tT2JqZWN0IHx8IHByaW1pdGl2ZSkge1xuXHQgICAgICAgICAgd2l0aG91dENvbnZlcnNpb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBmcmFnLnNjb3BlW2FsaWFzXSA9IHZhbHVlO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIG5ldyBpc250YW5jZVxuXHQgICAgICAgIGZyYWcgPSB0aGlzLmNyZWF0ZSh2YWx1ZSwgYWxpYXMsIGksIGtleSk7XG5cdCAgICAgICAgZnJhZy5mcmVzaCA9ICFpbml0O1xuXHQgICAgICB9XG5cdCAgICAgIGZyYWdzW2ldID0gZnJhZztcblx0ICAgICAgaWYgKGluaXQpIHtcblx0ICAgICAgICBmcmFnLmJlZm9yZShlbmQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gd2UncmUgZG9uZSBmb3IgdGhlIGluaXRpYWwgcmVuZGVyLlxuXHQgICAgaWYgKGluaXQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIFNlY29uZCBwYXNzLCBnbyB0aHJvdWdoIHRoZSBvbGQgZnJhZ21lbnRzIGFuZFxuXHQgICAgLy8gZGVzdHJveSB0aG9zZSB3aG8gYXJlIG5vdCByZXVzZWQgKGFuZCByZW1vdmUgdGhlbVxuXHQgICAgLy8gZnJvbSBjYWNoZSlcblx0ICAgIHZhciByZW1vdmFsSW5kZXggPSAwO1xuXHQgICAgdmFyIHRvdGFsUmVtb3ZlZCA9IG9sZEZyYWdzLmxlbmd0aCAtIGZyYWdzLmxlbmd0aDtcblx0ICAgIC8vIHdoZW4gcmVtb3ZpbmcgYSBsYXJnZSBudW1iZXIgb2YgZnJhZ21lbnRzLCB3YXRjaGVyIHJlbW92YWxcblx0ICAgIC8vIHR1cm5zIG91dCB0byBiZSBhIHBlcmYgYm90dGxlbmVjaywgc28gd2UgYmF0Y2ggdGhlIHdhdGNoZXJcblx0ICAgIC8vIHJlbW92YWxzIGludG8gYSBzaW5nbGUgZmlsdGVyIGNhbGwhXG5cdCAgICB0aGlzLnZtLl92Rm9yUmVtb3ZpbmcgPSB0cnVlO1xuXHQgICAgZm9yIChpID0gMCwgbCA9IG9sZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBmcmFnID0gb2xkRnJhZ3NbaV07XG5cdCAgICAgIGlmICghZnJhZy5yZXVzZWQpIHtcblx0ICAgICAgICB0aGlzLmRlbGV0ZUNhY2hlZEZyYWcoZnJhZyk7XG5cdCAgICAgICAgdGhpcy5yZW1vdmUoZnJhZywgcmVtb3ZhbEluZGV4KyssIHRvdGFsUmVtb3ZlZCwgaW5Eb2N1bWVudCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHRoaXMudm0uX3ZGb3JSZW1vdmluZyA9IGZhbHNlO1xuXHQgICAgaWYgKHJlbW92YWxJbmRleCkge1xuXHQgICAgICB0aGlzLnZtLl93YXRjaGVycyA9IHRoaXMudm0uX3dhdGNoZXJzLmZpbHRlcihmdW5jdGlvbiAodykge1xuXHQgICAgICAgIHJldHVybiB3LmFjdGl2ZTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gRmluYWwgcGFzcywgbW92ZS9pbnNlcnQgbmV3IGZyYWdtZW50cyBpbnRvIHRoZVxuXHQgICAgLy8gcmlnaHQgcGxhY2UuXG5cdCAgICB2YXIgdGFyZ2V0UHJldiwgcHJldkVsLCBjdXJyZW50UHJldjtcblx0ICAgIHZhciBpbnNlcnRpb25JbmRleCA9IDA7XG5cdCAgICBmb3IgKGkgPSAwLCBsID0gZnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGZyYWcgPSBmcmFnc1tpXTtcblx0ICAgICAgLy8gdGhpcyBpcyB0aGUgZnJhZyB0aGF0IHdlIHNob3VsZCBiZSBhZnRlclxuXHQgICAgICB0YXJnZXRQcmV2ID0gZnJhZ3NbaSAtIDFdO1xuXHQgICAgICBwcmV2RWwgPSB0YXJnZXRQcmV2ID8gdGFyZ2V0UHJldi5zdGFnZ2VyQ2IgPyB0YXJnZXRQcmV2LnN0YWdnZXJBbmNob3IgOiB0YXJnZXRQcmV2LmVuZCB8fCB0YXJnZXRQcmV2Lm5vZGUgOiBzdGFydDtcblx0ICAgICAgaWYgKGZyYWcucmV1c2VkICYmICFmcmFnLnN0YWdnZXJDYikge1xuXHQgICAgICAgIGN1cnJlbnRQcmV2ID0gZmluZFByZXZGcmFnKGZyYWcsIHN0YXJ0LCB0aGlzLmlkKTtcblx0ICAgICAgICBpZiAoY3VycmVudFByZXYgIT09IHRhcmdldFByZXYgJiYgKCFjdXJyZW50UHJldiB8fFxuXHQgICAgICAgIC8vIG9wdGltaXphdGlvbiBmb3IgbW92aW5nIGEgc2luZ2xlIGl0ZW0uXG5cdCAgICAgICAgLy8gdGhhbmtzIHRvIHN1Z2dlc3Rpb25zIGJ5IEBsaXZvcmFzIGluICMxODA3XG5cdCAgICAgICAgZmluZFByZXZGcmFnKGN1cnJlbnRQcmV2LCBzdGFydCwgdGhpcy5pZCkgIT09IHRhcmdldFByZXYpKSB7XG5cdCAgICAgICAgICB0aGlzLm1vdmUoZnJhZywgcHJldkVsKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gbmV3IGluc3RhbmNlLCBvciBzdGlsbCBpbiBzdGFnZ2VyLlxuXHQgICAgICAgIC8vIGluc2VydCB3aXRoIHVwZGF0ZWQgc3RhZ2dlciBpbmRleC5cblx0ICAgICAgICB0aGlzLmluc2VydChmcmFnLCBpbnNlcnRpb25JbmRleCsrLCBwcmV2RWwsIGluRG9jdW1lbnQpO1xuXHQgICAgICB9XG5cdCAgICAgIGZyYWcucmV1c2VkID0gZnJhZy5mcmVzaCA9IGZhbHNlO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENyZWF0ZSBhIG5ldyBmcmFnbWVudCBpbnN0YW5jZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gYWxpYXNcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gW2tleV1cblx0ICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cblx0ICAgKi9cblx0XG5cdCAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUodmFsdWUsIGFsaWFzLCBpbmRleCwga2V5KSB7XG5cdCAgICB2YXIgaG9zdCA9IHRoaXMuX2hvc3Q7XG5cdCAgICAvLyBjcmVhdGUgaXRlcmF0aW9uIHNjb3BlXG5cdCAgICB2YXIgcGFyZW50U2NvcGUgPSB0aGlzLl9zY29wZSB8fCB0aGlzLnZtO1xuXHQgICAgdmFyIHNjb3BlID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZSk7XG5cdCAgICAvLyByZWYgaG9sZGVyIGZvciB0aGUgc2NvcGVcblx0ICAgIHNjb3BlLiRyZWZzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZS4kcmVmcyk7XG5cdCAgICBzY29wZS4kZWxzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZS4kZWxzKTtcblx0ICAgIC8vIG1ha2Ugc3VyZSBwb2ludCAkcGFyZW50IHRvIHBhcmVudCBzY29wZVxuXHQgICAgc2NvcGUuJHBhcmVudCA9IHBhcmVudFNjb3BlO1xuXHQgICAgLy8gZm9yIHR3by13YXkgYmluZGluZyBvbiBhbGlhc1xuXHQgICAgc2NvcGUuJGZvckNvbnRleHQgPSB0aGlzO1xuXHQgICAgLy8gZGVmaW5lIHNjb3BlIHByb3BlcnRpZXNcblx0ICAgIC8vIGltcG9ydGFudDogZGVmaW5lIHRoZSBzY29wZSBhbGlhcyB3aXRob3V0IGZvcmNlZCBjb252ZXJzaW9uXG5cdCAgICAvLyBzbyB0aGF0IGZyb3plbiBkYXRhIHN0cnVjdHVyZXMgcmVtYWluIG5vbi1yZWFjdGl2ZS5cblx0ICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsIGFsaWFzLCB2YWx1ZSk7XG5cdCAgICB9KTtcblx0ICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCAnJGluZGV4JywgaW5kZXgpO1xuXHQgICAgaWYgKGtleSkge1xuXHQgICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgJyRrZXknLCBrZXkpO1xuXHQgICAgfSBlbHNlIGlmIChzY29wZS4ka2V5KSB7XG5cdCAgICAgIC8vIGF2b2lkIGFjY2lkZW50YWwgZmFsbGJhY2tcblx0ICAgICAgZGVmKHNjb3BlLCAnJGtleScsIG51bGwpO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuaXRlcmF0b3IpIHtcblx0ICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsIHRoaXMuaXRlcmF0b3IsIGtleSAhPT0gbnVsbCA/IGtleSA6IGluZGV4KTtcblx0ICAgIH1cblx0ICAgIHZhciBmcmFnID0gdGhpcy5mYWN0b3J5LmNyZWF0ZShob3N0LCBzY29wZSwgdGhpcy5fZnJhZyk7XG5cdCAgICBmcmFnLmZvcklkID0gdGhpcy5pZDtcblx0ICAgIHRoaXMuY2FjaGVGcmFnKHZhbHVlLCBmcmFnLCBpbmRleCwga2V5KTtcblx0ICAgIHJldHVybiBmcmFnO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFVwZGF0ZSB0aGUgdi1yZWYgb24gb3duZXIgdm0uXG5cdCAgICovXG5cdFxuXHQgIHVwZGF0ZVJlZjogZnVuY3Rpb24gdXBkYXRlUmVmKCkge1xuXHQgICAgdmFyIHJlZiA9IHRoaXMuZGVzY3JpcHRvci5yZWY7XG5cdCAgICBpZiAoIXJlZikgcmV0dXJuO1xuXHQgICAgdmFyIGhhc2ggPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHJlZnM7XG5cdCAgICB2YXIgcmVmcztcblx0ICAgIGlmICghdGhpcy5mcm9tT2JqZWN0KSB7XG5cdCAgICAgIHJlZnMgPSB0aGlzLmZyYWdzLm1hcChmaW5kVm1Gcm9tRnJhZyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZWZzID0ge307XG5cdCAgICAgIHRoaXMuZnJhZ3MuZm9yRWFjaChmdW5jdGlvbiAoZnJhZykge1xuXHQgICAgICAgIHJlZnNbZnJhZy5zY29wZS4ka2V5XSA9IGZpbmRWbUZyb21GcmFnKGZyYWcpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIGhhc2hbcmVmXSA9IHJlZnM7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRm9yIG9wdGlvbiBsaXN0cywgdXBkYXRlIHRoZSBjb250YWluaW5nIHYtbW9kZWwgb25cblx0ICAgKiBwYXJlbnQgPHNlbGVjdD4uXG5cdCAgICovXG5cdFxuXHQgIHVwZGF0ZU1vZGVsOiBmdW5jdGlvbiB1cGRhdGVNb2RlbCgpIHtcblx0ICAgIGlmICh0aGlzLmlzT3B0aW9uKSB7XG5cdCAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnN0YXJ0LnBhcmVudE5vZGU7XG5cdCAgICAgIHZhciBtb2RlbCA9IHBhcmVudCAmJiBwYXJlbnQuX192X21vZGVsO1xuXHQgICAgICBpZiAobW9kZWwpIHtcblx0ICAgICAgICBtb2RlbC5mb3JjZVVwZGF0ZSgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogSW5zZXJ0IGEgZnJhZ21lbnQuIEhhbmRsZXMgc3RhZ2dlcmluZy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICAgKiBAcGFyYW0ge05vZGV9IHByZXZFbFxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5Eb2N1bWVudFxuXHQgICAqL1xuXHRcblx0ICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydChmcmFnLCBpbmRleCwgcHJldkVsLCBpbkRvY3VtZW50KSB7XG5cdCAgICBpZiAoZnJhZy5zdGFnZ2VyQ2IpIHtcblx0ICAgICAgZnJhZy5zdGFnZ2VyQ2IuY2FuY2VsKCk7XG5cdCAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIHZhciBzdGFnZ2VyQW1vdW50ID0gdGhpcy5nZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCBudWxsLCAnZW50ZXInKTtcblx0ICAgIGlmIChpbkRvY3VtZW50ICYmIHN0YWdnZXJBbW91bnQpIHtcblx0ICAgICAgLy8gY3JlYXRlIGFuIGFuY2hvciBhbmQgaW5zZXJ0IGl0IHN5bmNocm9ub3VzbHksXG5cdCAgICAgIC8vIHNvIHRoYXQgd2UgY2FuIHJlc29sdmUgdGhlIGNvcnJlY3Qgb3JkZXIgd2l0aG91dFxuXHQgICAgICAvLyB3b3JyeWluZyBhYm91dCBzb21lIGVsZW1lbnRzIG5vdCBpbnNlcnRlZCB5ZXRcblx0ICAgICAgdmFyIGFuY2hvciA9IGZyYWcuc3RhZ2dlckFuY2hvcjtcblx0ICAgICAgaWYgKCFhbmNob3IpIHtcblx0ICAgICAgICBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3IgPSBjcmVhdGVBbmNob3IoJ3N0YWdnZXItYW5jaG9yJyk7XG5cdCAgICAgICAgYW5jaG9yLl9fdl9mcmFnID0gZnJhZztcblx0ICAgICAgfVxuXHQgICAgICBhZnRlcihhbmNob3IsIHByZXZFbCk7XG5cdCAgICAgIHZhciBvcCA9IGZyYWcuc3RhZ2dlckNiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcblx0ICAgICAgICBmcmFnLmJlZm9yZShhbmNob3IpO1xuXHQgICAgICAgIHJlbW92ZShhbmNob3IpO1xuXHQgICAgICB9KTtcblx0ICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgdGFyZ2V0ID0gcHJldkVsLm5leHRTaWJsaW5nO1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKCF0YXJnZXQpIHtcblx0ICAgICAgICAvLyByZXNldCBlbmQgYW5jaG9yIHBvc2l0aW9uIGluIGNhc2UgdGhlIHBvc2l0aW9uIHdhcyBtZXNzZWQgdXBcblx0ICAgICAgICAvLyBieSBhbiBleHRlcm5hbCBkcmFnLW4tZHJvcCBsaWJyYXJ5LlxuXHQgICAgICAgIGFmdGVyKHRoaXMuZW5kLCBwcmV2RWwpO1xuXHQgICAgICAgIHRhcmdldCA9IHRoaXMuZW5kO1xuXHQgICAgICB9XG5cdCAgICAgIGZyYWcuYmVmb3JlKHRhcmdldCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVtb3ZlIGEgZnJhZ21lbnQuIEhhbmRsZXMgc3RhZ2dlcmluZy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gdG90YWxcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IGluRG9jdW1lbnRcblx0ICAgKi9cblx0XG5cdCAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoZnJhZywgaW5kZXgsIHRvdGFsLCBpbkRvY3VtZW50KSB7XG5cdCAgICBpZiAoZnJhZy5zdGFnZ2VyQ2IpIHtcblx0ICAgICAgZnJhZy5zdGFnZ2VyQ2IuY2FuY2VsKCk7XG5cdCAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcblx0ICAgICAgLy8gaXQncyBub3QgcG9zc2libGUgZm9yIHRoZSBzYW1lIGZyYWcgdG8gYmUgcmVtb3ZlZFxuXHQgICAgICAvLyB0d2ljZSwgc28gaWYgd2UgaGF2ZSBhIHBlbmRpbmcgc3RhZ2dlciBjYWxsYmFjayxcblx0ICAgICAgLy8gaXQgbWVhbnMgdGhpcyBmcmFnIGlzIHF1ZXVlZCBmb3IgZW50ZXIgYnV0IHJlbW92ZWRcblx0ICAgICAgLy8gYmVmb3JlIGl0cyB0cmFuc2l0aW9uIHN0YXJ0ZWQuIFNpbmNlIGl0IGlzIGFscmVhZHlcblx0ICAgICAgLy8gZGVzdHJveWVkLCB3ZSBjYW4ganVzdCBsZWF2ZSBpdCBpbiBkZXRhY2hlZCBzdGF0ZS5cblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIHN0YWdnZXJBbW91bnQgPSB0aGlzLmdldFN0YWdnZXIoZnJhZywgaW5kZXgsIHRvdGFsLCAnbGVhdmUnKTtcblx0ICAgIGlmIChpbkRvY3VtZW50ICYmIHN0YWdnZXJBbW91bnQpIHtcblx0ICAgICAgdmFyIG9wID0gZnJhZy5zdGFnZ2VyQ2IgPSBjYW5jZWxsYWJsZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuXHQgICAgICAgIGZyYWcucmVtb3ZlKCk7XG5cdCAgICAgIH0pO1xuXHQgICAgICBzZXRUaW1lb3V0KG9wLCBzdGFnZ2VyQW1vdW50KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGZyYWcucmVtb3ZlKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogTW92ZSBhIGZyYWdtZW50IHRvIGEgbmV3IHBvc2l0aW9uLlxuXHQgICAqIEZvcmNlIG5vIHRyYW5zaXRpb24uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICogQHBhcmFtIHtOb2RlfSBwcmV2RWxcblx0ICAgKi9cblx0XG5cdCAgbW92ZTogZnVuY3Rpb24gbW92ZShmcmFnLCBwcmV2RWwpIHtcblx0ICAgIC8vIGZpeCBhIGNvbW1vbiBpc3N1ZSB3aXRoIFNvcnRhYmxlOlxuXHQgICAgLy8gaWYgcHJldkVsIGRvZXNuJ3QgaGF2ZSBuZXh0U2libGluZywgdGhpcyBtZWFucyBpdCdzXG5cdCAgICAvLyBiZWVuIGRyYWdnZWQgYWZ0ZXIgdGhlIGVuZCBhbmNob3IuIEp1c3QgcmUtcG9zaXRpb25cblx0ICAgIC8vIHRoZSBlbmQgYW5jaG9yIHRvIHRoZSBlbmQgb2YgdGhlIGNvbnRhaW5lci5cblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKCFwcmV2RWwubmV4dFNpYmxpbmcpIHtcblx0ICAgICAgdGhpcy5lbmQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0aGlzLmVuZCk7XG5cdCAgICB9XG5cdCAgICBmcmFnLmJlZm9yZShwcmV2RWwubmV4dFNpYmxpbmcsIGZhbHNlKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBDYWNoZSBhIGZyYWdtZW50IHVzaW5nIHRyYWNrLWJ5IG9yIHRoZSBvYmplY3Qga2V5LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gW2tleV1cblx0ICAgKi9cblx0XG5cdCAgY2FjaGVGcmFnOiBmdW5jdGlvbiBjYWNoZUZyYWcodmFsdWUsIGZyYWcsIGluZGV4LCBrZXkpIHtcblx0ICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcblx0ICAgIHZhciBjYWNoZSA9IHRoaXMuY2FjaGU7XG5cdCAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcblx0ICAgIHZhciBpZDtcblx0ICAgIGlmIChrZXkgfHwgdHJhY2tCeUtleSB8fCBwcmltaXRpdmUpIHtcblx0ICAgICAgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcblx0ICAgICAgaWYgKCFjYWNoZVtpZF0pIHtcblx0ICAgICAgICBjYWNoZVtpZF0gPSBmcmFnO1xuXHQgICAgICB9IGVsc2UgaWYgKHRyYWNrQnlLZXkgIT09ICckaW5kZXgnKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZCA9IHRoaXMuaWQ7XG5cdCAgICAgIGlmIChoYXNPd24odmFsdWUsIGlkKSkge1xuXHQgICAgICAgIGlmICh2YWx1ZVtpZF0gPT09IG51bGwpIHtcblx0ICAgICAgICAgIHZhbHVlW2lkXSA9IGZyYWc7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWx1ZSkpIHtcblx0ICAgICAgICBkZWYodmFsdWUsIGlkLCBmcmFnKTtcblx0ICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgd2FybignRnJvemVuIHYtZm9yIG9iamVjdHMgY2Fubm90IGJlIGF1dG9tYXRpY2FsbHkgdHJhY2tlZCwgbWFrZSBzdXJlIHRvICcgKyAncHJvdmlkZSBhIHRyYWNrLWJ5IGtleS4nKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgZnJhZy5yYXcgPSB2YWx1ZTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBHZXQgYSBjYWNoZWQgZnJhZ21lbnQgZnJvbSB0aGUgdmFsdWUvaW5kZXgva2V5XG5cdCAgICpcblx0ICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqIEByZXR1cm4ge0ZyYWdtZW50fVxuXHQgICAqL1xuXHRcblx0ICBnZXRDYWNoZWRGcmFnOiBmdW5jdGlvbiBnZXRDYWNoZWRGcmFnKHZhbHVlLCBpbmRleCwga2V5KSB7XG5cdCAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG5cdCAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcblx0ICAgIHZhciBmcmFnO1xuXHQgICAgaWYgKGtleSB8fCB0cmFja0J5S2V5IHx8IHByaW1pdGl2ZSkge1xuXHQgICAgICB2YXIgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcblx0ICAgICAgZnJhZyA9IHRoaXMuY2FjaGVbaWRdO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZnJhZyA9IHZhbHVlW3RoaXMuaWRdO1xuXHQgICAgfVxuXHQgICAgaWYgKGZyYWcgJiYgKGZyYWcucmV1c2VkIHx8IGZyYWcuZnJlc2gpKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmcmFnO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIERlbGV0ZSBhIGZyYWdtZW50IGZyb20gY2FjaGUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICovXG5cdFxuXHQgIGRlbGV0ZUNhY2hlZEZyYWc6IGZ1bmN0aW9uIGRlbGV0ZUNhY2hlZEZyYWcoZnJhZykge1xuXHQgICAgdmFyIHZhbHVlID0gZnJhZy5yYXc7XG5cdCAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG5cdCAgICB2YXIgc2NvcGUgPSBmcmFnLnNjb3BlO1xuXHQgICAgdmFyIGluZGV4ID0gc2NvcGUuJGluZGV4O1xuXHQgICAgLy8gZml4ICM5NDg6IGF2b2lkIGFjY2lkZW50YWxseSBmYWxsIHRocm91Z2ggdG9cblx0ICAgIC8vIGEgcGFyZW50IHJlcGVhdGVyIHdoaWNoIGhhcHBlbnMgdG8gaGF2ZSAka2V5LlxuXHQgICAgdmFyIGtleSA9IGhhc093bihzY29wZSwgJyRrZXknKSAmJiBzY29wZS4ka2V5O1xuXHQgICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG5cdCAgICBpZiAodHJhY2tCeUtleSB8fCBrZXkgfHwgcHJpbWl0aXZlKSB7XG5cdCAgICAgIHZhciBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xuXHQgICAgICB0aGlzLmNhY2hlW2lkXSA9IG51bGw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YWx1ZVt0aGlzLmlkXSA9IG51bGw7XG5cdCAgICAgIGZyYWcucmF3ID0gbnVsbDtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBHZXQgdGhlIHN0YWdnZXIgYW1vdW50IGZvciBhbiBpbnNlcnRpb24vcmVtb3ZhbC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gdG90YWxcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHQgICAqL1xuXHRcblx0ICBnZXRTdGFnZ2VyOiBmdW5jdGlvbiBnZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCB0b3RhbCwgdHlwZSkge1xuXHQgICAgdHlwZSA9IHR5cGUgKyAnU3RhZ2dlcic7XG5cdCAgICB2YXIgdHJhbnMgPSBmcmFnLm5vZGUuX192X3RyYW5zO1xuXHQgICAgdmFyIGhvb2tzID0gdHJhbnMgJiYgdHJhbnMuaG9va3M7XG5cdCAgICB2YXIgaG9vayA9IGhvb2tzICYmIChob29rc1t0eXBlXSB8fCBob29rcy5zdGFnZ2VyKTtcblx0ICAgIHJldHVybiBob29rID8gaG9vay5jYWxsKGZyYWcsIGluZGV4LCB0b3RhbCkgOiBpbmRleCAqIHBhcnNlSW50KHRoaXMucGFyYW1zW3R5cGVdIHx8IHRoaXMucGFyYW1zLnN0YWdnZXIsIDEwKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBQcmUtcHJvY2VzcyB0aGUgdmFsdWUgYmVmb3JlIHBpcGluZyBpdCB0aHJvdWdoIHRoZVxuXHQgICAqIGZpbHRlcnMuIFRoaXMgaXMgcGFzc2VkIHRvIGFuZCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIuXG5cdCAgICovXG5cdFxuXHQgIF9wcmVQcm9jZXNzOiBmdW5jdGlvbiBfcHJlUHJvY2Vzcyh2YWx1ZSkge1xuXHQgICAgLy8gcmVnYXJkbGVzcyBvZiB0eXBlLCBzdG9yZSB0aGUgdW4tZmlsdGVyZWQgcmF3IHZhbHVlLlxuXHQgICAgdGhpcy5yYXdWYWx1ZSA9IHZhbHVlO1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFBvc3QtcHJvY2VzcyB0aGUgdmFsdWUgYWZ0ZXIgaXQgaGFzIGJlZW4gcGlwZWQgdGhyb3VnaFxuXHQgICAqIHRoZSBmaWx0ZXJzLiBUaGlzIGlzIHBhc3NlZCB0byBhbmQgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyLlxuXHQgICAqXG5cdCAgICogSXQgaXMgbmVjZXNzYXJ5IGZvciB0aGlzIHRvIGJlIGNhbGxlZCBkdXJpbmcgdGhlXG5cdCAgICogd2F0Y2hlcidzIGRlcGVuZGVuY3kgY29sbGVjdGlvbiBwaGFzZSBiZWNhdXNlIHdlIHdhbnRcblx0ICAgKiB0aGUgdi1mb3IgdG8gdXBkYXRlIHdoZW4gdGhlIHNvdXJjZSBPYmplY3QgaXMgbXV0YXRlZC5cblx0ICAgKi9cblx0XG5cdCAgX3Bvc3RQcm9jZXNzOiBmdW5jdGlvbiBfcG9zdFByb2Nlc3ModmFsdWUpIHtcblx0ICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgICByZXR1cm4gdmFsdWU7XG5cdCAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG5cdCAgICAgIC8vIGNvbnZlcnQgcGxhaW4gb2JqZWN0IHRvIGFycmF5LlxuXHQgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcblx0ICAgICAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgICAgdmFyIHJlcyA9IG5ldyBBcnJheShpKTtcblx0ICAgICAgdmFyIGtleTtcblx0ICAgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICAgIGtleSA9IGtleXNbaV07XG5cdCAgICAgICAgcmVzW2ldID0ge1xuXHQgICAgICAgICAgJGtleToga2V5LFxuXHQgICAgICAgICAgJHZhbHVlOiB2YWx1ZVtrZXldXG5cdCAgICAgICAgfTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gcmVzO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHZhbHVlKSkge1xuXHQgICAgICAgIHZhbHVlID0gcmFuZ2UodmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2YWx1ZSB8fCBbXTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIGlmICh0aGlzLmRlc2NyaXB0b3IucmVmKSB7XG5cdCAgICAgICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kcmVmc1t0aGlzLmRlc2NyaXB0b3IucmVmXSA9IG51bGw7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5mcmFncykge1xuXHQgICAgICB2YXIgaSA9IHRoaXMuZnJhZ3MubGVuZ3RoO1xuXHQgICAgICB2YXIgZnJhZztcblx0ICAgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICAgIGZyYWcgPSB0aGlzLmZyYWdzW2ldO1xuXHQgICAgICAgIHRoaXMuZGVsZXRlQ2FjaGVkRnJhZyhmcmFnKTtcblx0ICAgICAgICBmcmFnLmRlc3Ryb3koKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBIZWxwZXIgdG8gZmluZCB0aGUgcHJldmlvdXMgZWxlbWVudCB0aGF0IGlzIGEgZnJhZ21lbnRcblx0ICogYW5jaG9yLiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIGEgZGVzdHJveWVkIGZyYWcnc1xuXHQgKiBlbGVtZW50IGNvdWxkIHN0aWxsIGJlIGxpbmdlcmluZyBpbiB0aGUgRE9NIGJlZm9yZSBpdHNcblx0ICogbGVhdmluZyB0cmFuc2l0aW9uIGZpbmlzaGVzLCBidXQgaXRzIGluc2VydGVkIGZsYWdcblx0ICogc2hvdWxkIGhhdmUgYmVlbiBzZXQgdG8gZmFsc2Ugc28gd2UgY2FuIHNraXAgdGhlbS5cblx0ICpcblx0ICogSWYgdGhpcyBpcyBhIGJsb2NrIHJlcGVhdCwgd2Ugd2FudCB0byBtYWtlIHN1cmUgd2Ugb25seVxuXHQgKiByZXR1cm4gZnJhZyB0aGF0IGlzIGJvdW5kIHRvIHRoaXMgdi1mb3IuIChzZWUgIzkyOSlcblx0ICpcblx0ICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgKiBAcGFyYW0ge0NvbW1lbnR8VGV4dH0gYW5jaG9yXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuXHQgKiBAcmV0dXJuIHtGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmaW5kUHJldkZyYWcoZnJhZywgYW5jaG9yLCBpZCkge1xuXHQgIHZhciBlbCA9IGZyYWcubm9kZS5wcmV2aW91c1NpYmxpbmc7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKCFlbCkgcmV0dXJuO1xuXHQgIGZyYWcgPSBlbC5fX3ZfZnJhZztcblx0ICB3aGlsZSAoKCFmcmFnIHx8IGZyYWcuZm9ySWQgIT09IGlkIHx8ICFmcmFnLmluc2VydGVkKSAmJiBlbCAhPT0gYW5jaG9yKSB7XG5cdCAgICBlbCA9IGVsLnByZXZpb3VzU2libGluZztcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKCFlbCkgcmV0dXJuO1xuXHQgICAgZnJhZyA9IGVsLl9fdl9mcmFnO1xuXHQgIH1cblx0ICByZXR1cm4gZnJhZztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZpbmQgYSB2bSBmcm9tIGEgZnJhZ21lbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICogQHJldHVybiB7VnVlfHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmaW5kVm1Gcm9tRnJhZyhmcmFnKSB7XG5cdCAgdmFyIG5vZGUgPSBmcmFnLm5vZGU7XG5cdCAgLy8gaGFuZGxlIG11bHRpLW5vZGUgZnJhZ1xuXHQgIGlmIChmcmFnLmVuZCkge1xuXHQgICAgd2hpbGUgKCFub2RlLl9fdnVlX18gJiYgbm9kZSAhPT0gZnJhZy5lbmQgJiYgbm9kZS5uZXh0U2libGluZykge1xuXHQgICAgICBub2RlID0gbm9kZS5uZXh0U2libGluZztcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG5vZGUuX192dWVfXztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZSBhIHJhbmdlIGFycmF5IGZyb20gZ2l2ZW4gbnVtYmVyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge051bWJlcn0gblxuXHQgKiBAcmV0dXJuIHtBcnJheX1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByYW5nZShuKSB7XG5cdCAgdmFyIGkgPSAtMTtcblx0ICB2YXIgcmV0ID0gbmV3IEFycmF5KE1hdGguZmxvb3IobikpO1xuXHQgIHdoaWxlICgrK2kgPCBuKSB7XG5cdCAgICByZXRbaV0gPSBpO1xuXHQgIH1cblx0ICByZXR1cm4gcmV0O1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IHRoZSB0cmFjayBieSBrZXkgZm9yIGFuIGl0ZW0uXG5cdCAqXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHBhcmFtIHtTdHJpbmd9IFt0cmFja0J5S2V5XVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpIHtcblx0ICByZXR1cm4gdHJhY2tCeUtleSA/IHRyYWNrQnlLZXkgPT09ICckaW5kZXgnID8gaW5kZXggOiB0cmFja0J5S2V5LmNoYXJBdCgwKS5tYXRjaCgvXFx3LykgPyBnZXRQYXRoKHZhbHVlLCB0cmFja0J5S2V5KSA6IHZhbHVlW3RyYWNrQnlLZXldIDoga2V5IHx8IHZhbHVlO1xuXHR9XG5cdFxuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIHZGb3Iud2FybkR1cGxpY2F0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgd2FybignRHVwbGljYXRlIHZhbHVlIGZvdW5kIGluIHYtZm9yPVwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgKyAnLiBVc2UgdHJhY2stYnk9XCIkaW5kZXhcIiBpZiAnICsgJ3lvdSBhcmUgZXhwZWN0aW5nIGR1cGxpY2F0ZSB2YWx1ZXMuJywgdGhpcy52bSk7XG5cdCAgfTtcblx0fVxuXHRcblx0dmFyIHZJZiA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IElGLFxuXHQgIHRlcm1pbmFsOiB0cnVlLFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIGlmICghZWwuX192dWVfXykge1xuXHQgICAgICAvLyBjaGVjayBlbHNlIGJsb2NrXG5cdCAgICAgIHZhciBuZXh0ID0gZWwubmV4dEVsZW1lbnRTaWJsaW5nO1xuXHQgICAgICBpZiAobmV4dCAmJiBnZXRBdHRyKG5leHQsICd2LWVsc2UnKSAhPT0gbnVsbCkge1xuXHQgICAgICAgIHJlbW92ZShuZXh0KTtcblx0ICAgICAgICB0aGlzLmVsc2VFbCA9IG5leHQ7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gY2hlY2sgbWFpbiBibG9ja1xuXHQgICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1pZicpO1xuXHQgICAgICByZXBsYWNlKGVsLCB0aGlzLmFuY2hvcik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3YtaWY9XCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiIGNhbm5vdCBiZSAnICsgJ3VzZWQgb24gYW4gaW5zdGFuY2Ugcm9vdCBlbGVtZW50LicsIHRoaXMudm0pO1xuXHQgICAgICB0aGlzLmludmFsaWQgPSB0cnVlO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICBpZiAodGhpcy5pbnZhbGlkKSByZXR1cm47XG5cdCAgICBpZiAodmFsdWUpIHtcblx0ICAgICAgaWYgKCF0aGlzLmZyYWcpIHtcblx0ICAgICAgICB0aGlzLmluc2VydCgpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLnJlbW92ZSgpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KCkge1xuXHQgICAgaWYgKHRoaXMuZWxzZUZyYWcpIHtcblx0ICAgICAgdGhpcy5lbHNlRnJhZy5yZW1vdmUoKTtcblx0ICAgICAgdGhpcy5lbHNlRnJhZyA9IG51bGw7XG5cdCAgICB9XG5cdCAgICAvLyBsYXp5IGluaXQgZmFjdG9yeVxuXHQgICAgaWYgKCF0aGlzLmZhY3RvcnkpIHtcblx0ICAgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCB0aGlzLmVsKTtcblx0ICAgIH1cblx0ICAgIHRoaXMuZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUodGhpcy5faG9zdCwgdGhpcy5fc2NvcGUsIHRoaXMuX2ZyYWcpO1xuXHQgICAgdGhpcy5mcmFnLmJlZm9yZSh0aGlzLmFuY2hvcik7XG5cdCAgfSxcblx0XG5cdCAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG5cdCAgICBpZiAodGhpcy5mcmFnKSB7XG5cdCAgICAgIHRoaXMuZnJhZy5yZW1vdmUoKTtcblx0ICAgICAgdGhpcy5mcmFnID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLmVsc2VFbCAmJiAhdGhpcy5lbHNlRnJhZykge1xuXHQgICAgICBpZiAoIXRoaXMuZWxzZUZhY3RvcnkpIHtcblx0ICAgICAgICB0aGlzLmVsc2VGYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLmVsc2VFbC5fY29udGV4dCB8fCB0aGlzLnZtLCB0aGlzLmVsc2VFbCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5lbHNlRnJhZyA9IHRoaXMuZWxzZUZhY3RvcnkuY3JlYXRlKHRoaXMuX2hvc3QsIHRoaXMuX3Njb3BlLCB0aGlzLl9mcmFnKTtcblx0ICAgICAgdGhpcy5lbHNlRnJhZy5iZWZvcmUodGhpcy5hbmNob3IpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgaWYgKHRoaXMuZnJhZykge1xuXHQgICAgICB0aGlzLmZyYWcuZGVzdHJveSgpO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuZWxzZUZyYWcpIHtcblx0ICAgICAgdGhpcy5lbHNlRnJhZy5kZXN0cm95KCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHNob3cgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyBjaGVjayBlbHNlIGJsb2NrXG5cdCAgICB2YXIgbmV4dCA9IHRoaXMuZWwubmV4dEVsZW1lbnRTaWJsaW5nO1xuXHQgICAgaWYgKG5leHQgJiYgZ2V0QXR0cihuZXh0LCAndi1lbHNlJykgIT09IG51bGwpIHtcblx0ICAgICAgdGhpcy5lbHNlRWwgPSBuZXh0O1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB0aGlzLmFwcGx5KHRoaXMuZWwsIHZhbHVlKTtcblx0ICAgIGlmICh0aGlzLmVsc2VFbCkge1xuXHQgICAgICB0aGlzLmFwcGx5KHRoaXMuZWxzZUVsLCAhdmFsdWUpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGFwcGx5OiBmdW5jdGlvbiBhcHBseShlbCwgdmFsdWUpIHtcblx0ICAgIGlmIChpbkRvYyhlbCkpIHtcblx0ICAgICAgYXBwbHlUcmFuc2l0aW9uKGVsLCB2YWx1ZSA/IDEgOiAtMSwgdG9nZ2xlLCB0aGlzLnZtKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRvZ2dsZSgpO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gdG9nZ2xlKCkge1xuXHQgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPyAnJyA6ICdub25lJztcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgdGV4dCQyID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIHZhciBpc1JhbmdlID0gZWwudHlwZSA9PT0gJ3JhbmdlJztcblx0ICAgIHZhciBsYXp5ID0gdGhpcy5wYXJhbXMubGF6eTtcblx0ICAgIHZhciBudW1iZXIgPSB0aGlzLnBhcmFtcy5udW1iZXI7XG5cdCAgICB2YXIgZGVib3VuY2UgPSB0aGlzLnBhcmFtcy5kZWJvdW5jZTtcblx0XG5cdCAgICAvLyBoYW5kbGUgY29tcG9zaXRpb24gZXZlbnRzLlxuXHQgICAgLy8gICBodHRwOi8vYmxvZy5ldmFueW91Lm1lLzIwMTQvMDEvMDMvY29tcG9zaXRpb24tZXZlbnQvXG5cdCAgICAvLyBza2lwIHRoaXMgZm9yIEFuZHJvaWQgYmVjYXVzZSBpdCBoYW5kbGVzIGNvbXBvc2l0aW9uXG5cdCAgICAvLyBldmVudHMgcXVpdGUgZGlmZmVyZW50bHkuIEFuZHJvaWQgZG9lc24ndCB0cmlnZ2VyXG5cdCAgICAvLyBjb21wb3NpdGlvbiBldmVudHMgZm9yIGxhbmd1YWdlIGlucHV0IG1ldGhvZHMgZS5nLlxuXHQgICAgLy8gQ2hpbmVzZSwgYnV0IGluc3RlYWQgdHJpZ2dlcnMgdGhlbSBmb3Igc3BlbGxpbmdcblx0ICAgIC8vIHN1Z2dlc3Rpb25zLi4uIChzZWUgRGlzY3Vzc2lvbi8jMTYyKVxuXHQgICAgdmFyIGNvbXBvc2luZyA9IGZhbHNlO1xuXHQgICAgaWYgKCFpc0FuZHJvaWQgJiYgIWlzUmFuZ2UpIHtcblx0ICAgICAgdGhpcy5vbignY29tcG9zaXRpb25zdGFydCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBjb21wb3NpbmcgPSB0cnVlO1xuXHQgICAgICB9KTtcblx0ICAgICAgdGhpcy5vbignY29tcG9zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgY29tcG9zaW5nID0gZmFsc2U7XG5cdCAgICAgICAgLy8gaW4gSUUxMSB0aGUgXCJjb21wb3NpdGlvbmVuZFwiIGV2ZW50IGZpcmVzIEFGVEVSXG5cdCAgICAgICAgLy8gdGhlIFwiaW5wdXRcIiBldmVudCwgc28gdGhlIGlucHV0IGhhbmRsZXIgaXMgYmxvY2tlZFxuXHQgICAgICAgIC8vIGF0IHRoZSBlbmQuLi4gaGF2ZSB0byBjYWxsIGl0IGhlcmUuXG5cdCAgICAgICAgLy9cblx0ICAgICAgICAvLyAjMTMyNzogaW4gbGF6eSBtb2RlIHRoaXMgaXMgdW5lY2Vzc2FyeS5cblx0ICAgICAgICBpZiAoIWxhenkpIHtcblx0ICAgICAgICAgIHNlbGYubGlzdGVuZXIoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHByZXZlbnQgbWVzc2luZyB3aXRoIHRoZSBpbnB1dCB3aGVuIHVzZXIgaXMgdHlwaW5nLFxuXHQgICAgLy8gYW5kIGZvcmNlIHVwZGF0ZSBvbiBibHVyLlxuXHQgICAgdGhpcy5mb2N1c2VkID0gZmFsc2U7XG5cdCAgICBpZiAoIWlzUmFuZ2UgJiYgIWxhenkpIHtcblx0ICAgICAgdGhpcy5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgc2VsZi5mb2N1c2VkID0gdHJ1ZTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHRoaXMub24oJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgc2VsZi5mb2N1c2VkID0gZmFsc2U7XG5cdCAgICAgICAgLy8gZG8gbm90IHN5bmMgdmFsdWUgYWZ0ZXIgZnJhZ21lbnQgcmVtb3ZhbCAoIzIwMTcpXG5cdCAgICAgICAgaWYgKCFzZWxmLl9mcmFnIHx8IHNlbGYuX2ZyYWcuaW5zZXJ0ZWQpIHtcblx0ICAgICAgICAgIHNlbGYucmF3TGlzdGVuZXIoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIE5vdyBhdHRhY2ggdGhlIG1haW4gbGlzdGVuZXJcblx0ICAgIHRoaXMubGlzdGVuZXIgPSB0aGlzLnJhd0xpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoY29tcG9zaW5nIHx8ICFzZWxmLl9ib3VuZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgdmFsID0gbnVtYmVyIHx8IGlzUmFuZ2UgPyB0b051bWJlcihlbC52YWx1ZSkgOiBlbC52YWx1ZTtcblx0ICAgICAgc2VsZi5zZXQodmFsKTtcblx0ICAgICAgLy8gZm9yY2UgdXBkYXRlIG9uIG5leHQgdGljayB0byBhdm9pZCBsb2NrICYgc2FtZSB2YWx1ZVxuXHQgICAgICAvLyBhbHNvIG9ubHkgdXBkYXRlIHdoZW4gdXNlciBpcyBub3QgdHlwaW5nXG5cdCAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoc2VsZi5fYm91bmQgJiYgIXNlbGYuZm9jdXNlZCkge1xuXHQgICAgICAgICAgc2VsZi51cGRhdGUoc2VsZi5fd2F0Y2hlci52YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gYXBwbHkgZGVib3VuY2Vcblx0ICAgIGlmIChkZWJvdW5jZSkge1xuXHQgICAgICB0aGlzLmxpc3RlbmVyID0gX2RlYm91bmNlKHRoaXMubGlzdGVuZXIsIGRlYm91bmNlKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBTdXBwb3J0IGpRdWVyeSBldmVudHMsIHNpbmNlIGpRdWVyeS50cmlnZ2VyKCkgZG9lc24ndFxuXHQgICAgLy8gdHJpZ2dlciBuYXRpdmUgZXZlbnRzIGluIHNvbWUgY2FzZXMgYW5kIHNvbWUgcGx1Z2luc1xuXHQgICAgLy8gcmVseSBvbiAkLnRyaWdnZXIoKVxuXHQgICAgLy9cblx0ICAgIC8vIFdlIHdhbnQgdG8gbWFrZSBzdXJlIGlmIGEgbGlzdGVuZXIgaXMgYXR0YWNoZWQgdXNpbmdcblx0ICAgIC8vIGpRdWVyeSwgaXQgaXMgYWxzbyByZW1vdmVkIHdpdGggalF1ZXJ5LCB0aGF0J3Mgd2h5XG5cdCAgICAvLyB3ZSBkbyB0aGUgY2hlY2sgZm9yIGVhY2ggZGlyZWN0aXZlIGluc3RhbmNlIGFuZFxuXHQgICAgLy8gc3RvcmUgdGhhdCBjaGVjayByZXN1bHQgb24gaXRzZWxmLiBUaGlzIGFsc28gYWxsb3dzXG5cdCAgICAvLyBlYXNpZXIgdGVzdCBjb3ZlcmFnZSBjb250cm9sIGJ5IHVuc2V0dGluZyB0aGUgZ2xvYmFsXG5cdCAgICAvLyBqUXVlcnkgdmFyaWFibGUgaW4gdGVzdHMuXG5cdCAgICB0aGlzLmhhc2pRdWVyeSA9IHR5cGVvZiBqUXVlcnkgPT09ICdmdW5jdGlvbic7XG5cdCAgICBpZiAodGhpcy5oYXNqUXVlcnkpIHtcblx0ICAgICAgdmFyIG1ldGhvZCA9IGpRdWVyeS5mbi5vbiA/ICdvbicgOiAnYmluZCc7XG5cdCAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnY2hhbmdlJywgdGhpcy5yYXdMaXN0ZW5lcik7XG5cdCAgICAgIGlmICghbGF6eSkge1xuXHQgICAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5yYXdMaXN0ZW5lcik7XG5cdCAgICAgIGlmICghbGF6eSkge1xuXHQgICAgICAgIHRoaXMub24oJ2lucHV0JywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBJRTkgZG9lc24ndCBmaXJlIGlucHV0IGV2ZW50IG9uIGJhY2tzcGFjZS9kZWwvY3V0XG5cdCAgICBpZiAoIWxhenkgJiYgaXNJRTkpIHtcblx0ICAgICAgdGhpcy5vbignY3V0JywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIG5leHRUaWNrKHNlbGYubGlzdGVuZXIpO1xuXHQgICAgICB9KTtcblx0ICAgICAgdGhpcy5vbigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDQ2IHx8IGUua2V5Q29kZSA9PT0gOCkge1xuXHQgICAgICAgICAgc2VsZi5saXN0ZW5lcigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gc2V0IGluaXRpYWwgdmFsdWUgaWYgcHJlc2VudFxuXHQgICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgndmFsdWUnKSB8fCBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnICYmIGVsLnZhbHVlLnRyaW0oKSkge1xuXHQgICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIC8vICMzMDI5IG9ubHkgdXBkYXRlIHdoZW4gdGhlIHZhbHVlIGNoYW5nZXMuIFRoaXMgcHJldmVudFxuXHQgICAgLy8gYnJvd3NlcnMgZnJvbSBvdmVyd3JpdGluZyB2YWx1ZXMgbGlrZSBzZWxlY3Rpb25TdGFydFxuXHQgICAgdmFsdWUgPSBfdG9TdHJpbmcodmFsdWUpO1xuXHQgICAgaWYgKHZhbHVlICE9PSB0aGlzLmVsLnZhbHVlKSB0aGlzLmVsLnZhbHVlID0gdmFsdWU7XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgaWYgKHRoaXMuaGFzalF1ZXJ5KSB7XG5cdCAgICAgIHZhciBtZXRob2QgPSBqUXVlcnkuZm4ub2ZmID8gJ29mZicgOiAndW5iaW5kJztcblx0ICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciByYWRpbyA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdFxuXHQgICAgdGhpcy5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgLy8gdmFsdWUgb3ZlcndyaXRlIHZpYSB2LWJpbmQ6dmFsdWVcblx0ICAgICAgaWYgKGVsLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSkge1xuXHQgICAgICAgIHJldHVybiBlbC5fdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHZhbCA9IGVsLnZhbHVlO1xuXHQgICAgICBpZiAoc2VsZi5wYXJhbXMubnVtYmVyKSB7XG5cdCAgICAgICAgdmFsID0gdG9OdW1iZXIodmFsKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdmFsO1xuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBzZWxmLnNldChzZWxmLmdldFZhbHVlKCkpO1xuXHQgICAgfTtcblx0ICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXHRcblx0ICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkge1xuXHQgICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIHRoaXMuZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIHRoaXMuZ2V0VmFsdWUoKSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHNlbGVjdCA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0XG5cdCAgICAvLyBtZXRob2QgdG8gZm9yY2UgdXBkYXRlIERPTSB1c2luZyBsYXRlc3QgdmFsdWUuXG5cdCAgICB0aGlzLmZvcmNlVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoc2VsZi5fd2F0Y2hlcikge1xuXHQgICAgICAgIHNlbGYudXBkYXRlKHNlbGYuX3dhdGNoZXIuZ2V0KCkpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgYSBtdWx0aXBsZSBzZWxlY3Rcblx0ICAgIHZhciBtdWx0aXBsZSA9IHRoaXMubXVsdGlwbGUgPSBlbC5oYXNBdHRyaWJ1dGUoJ211bHRpcGxlJyk7XG5cdFxuXHQgICAgLy8gYXR0YWNoIGxpc3RlbmVyXG5cdCAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgdmFsdWUgPSBnZXRWYWx1ZShlbCwgbXVsdGlwbGUpO1xuXHQgICAgICB2YWx1ZSA9IHNlbGYucGFyYW1zLm51bWJlciA/IGlzQXJyYXkodmFsdWUpID8gdmFsdWUubWFwKHRvTnVtYmVyKSA6IHRvTnVtYmVyKHZhbHVlKSA6IHZhbHVlO1xuXHQgICAgICBzZWxmLnNldCh2YWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cdFxuXHQgICAgLy8gaWYgaGFzIGluaXRpYWwgdmFsdWUsIHNldCBhZnRlckJpbmRcblx0ICAgIHZhciBpbml0VmFsdWUgPSBnZXRWYWx1ZShlbCwgbXVsdGlwbGUsIHRydWUpO1xuXHQgICAgaWYgKG11bHRpcGxlICYmIGluaXRWYWx1ZS5sZW5ndGggfHwgIW11bHRpcGxlICYmIGluaXRWYWx1ZSAhPT0gbnVsbCkge1xuXHQgICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gQWxsIG1ham9yIGJyb3dzZXJzIGV4Y2VwdCBGaXJlZm94IHJlc2V0c1xuXHQgICAgLy8gc2VsZWN0ZWRJbmRleCB3aXRoIHZhbHVlIC0xIHRvIDAgd2hlbiB0aGUgZWxlbWVudFxuXHQgICAgLy8gaXMgYXBwZW5kZWQgdG8gYSBuZXcgcGFyZW50LCB0aGVyZWZvcmUgd2UgaGF2ZSB0b1xuXHQgICAgLy8gZm9yY2UgYSBET00gdXBkYXRlIHdoZW5ldmVyIHRoYXQgaGFwcGVucy4uLlxuXHQgICAgdGhpcy52bS4kb24oJ2hvb2s6YXR0YWNoZWQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIG5leHRUaWNrKF90aGlzLmZvcmNlVXBkYXRlKTtcblx0ICAgIH0pO1xuXHQgICAgaWYgKCFpbkRvYyhlbCkpIHtcblx0ICAgICAgbmV4dFRpY2sodGhpcy5mb3JjZVVwZGF0ZSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICBlbC5zZWxlY3RlZEluZGV4ID0gLTE7XG5cdCAgICB2YXIgbXVsdGkgPSB0aGlzLm11bHRpcGxlICYmIGlzQXJyYXkodmFsdWUpO1xuXHQgICAgdmFyIG9wdGlvbnMgPSBlbC5vcHRpb25zO1xuXHQgICAgdmFyIGkgPSBvcHRpb25zLmxlbmd0aDtcblx0ICAgIHZhciBvcCwgdmFsO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBvcCA9IG9wdGlvbnNbaV07XG5cdCAgICAgIHZhbCA9IG9wLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IG9wLl92YWx1ZSA6IG9wLnZhbHVlO1xuXHQgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cblx0ICAgICAgb3Auc2VsZWN0ZWQgPSBtdWx0aSA/IGluZGV4T2YkMSh2YWx1ZSwgdmFsKSA+IC0xIDogbG9vc2VFcXVhbCh2YWx1ZSwgdmFsKTtcblx0ICAgICAgLyogZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdCAgICB0aGlzLnZtLiRvZmYoJ2hvb2s6YXR0YWNoZWQnLCB0aGlzLmZvcmNlVXBkYXRlKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogR2V0IHNlbGVjdCB2YWx1ZVxuXHQgKlxuXHQgKiBAcGFyYW0ge1NlbGVjdEVsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gbXVsdGlcblx0ICogQHBhcmFtIHtCb29sZWFufSBpbml0XG5cdCAqIEByZXR1cm4ge0FycmF5fCp9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0VmFsdWUoZWwsIG11bHRpLCBpbml0KSB7XG5cdCAgdmFyIHJlcyA9IG11bHRpID8gW10gOiBudWxsO1xuXHQgIHZhciBvcCwgdmFsLCBzZWxlY3RlZDtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGVsLm9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBvcCA9IGVsLm9wdGlvbnNbaV07XG5cdCAgICBzZWxlY3RlZCA9IGluaXQgPyBvcC5oYXNBdHRyaWJ1dGUoJ3NlbGVjdGVkJykgOiBvcC5zZWxlY3RlZDtcblx0ICAgIGlmIChzZWxlY3RlZCkge1xuXHQgICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBvcC5fdmFsdWUgOiBvcC52YWx1ZTtcblx0ICAgICAgaWYgKG11bHRpKSB7XG5cdCAgICAgICAgcmVzLnB1c2godmFsKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gdmFsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBOYXRpdmUgQXJyYXkuaW5kZXhPZiB1c2VzIHN0cmljdCBlcXVhbCwgYnV0IGluIHRoaXNcblx0ICogY2FzZSB3ZSBuZWVkIHRvIG1hdGNoIHN0cmluZy9udW1iZXJzIHdpdGggY3VzdG9tIGVxdWFsLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpbmRleE9mJDEoYXJyLCB2YWwpIHtcblx0ICB2YXIgaSA9IGFyci5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgaWYgKGxvb3NlRXF1YWwoYXJyW2ldLCB2YWwpKSB7XG5cdCAgICAgIHJldHVybiBpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gLTE7XG5cdH1cblx0XG5cdHZhciBjaGVja2JveCA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdFxuXHQgICAgdGhpcy5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgcmV0dXJuIGVsLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IGVsLl92YWx1ZSA6IHNlbGYucGFyYW1zLm51bWJlciA/IHRvTnVtYmVyKGVsLnZhbHVlKSA6IGVsLnZhbHVlO1xuXHQgICAgfTtcblx0XG5cdCAgICBmdW5jdGlvbiBnZXRCb29sZWFuVmFsdWUoKSB7XG5cdCAgICAgIHZhciB2YWwgPSBlbC5jaGVja2VkO1xuXHQgICAgICBpZiAodmFsICYmIGVsLmhhc093blByb3BlcnR5KCdfdHJ1ZVZhbHVlJykpIHtcblx0ICAgICAgICByZXR1cm4gZWwuX3RydWVWYWx1ZTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoIXZhbCAmJiBlbC5oYXNPd25Qcm9wZXJ0eSgnX2ZhbHNlVmFsdWUnKSkge1xuXHQgICAgICAgIHJldHVybiBlbC5fZmFsc2VWYWx1ZTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdmFsO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBtb2RlbCA9IHNlbGYuX3dhdGNoZXIudmFsdWU7XG5cdCAgICAgIGlmIChpc0FycmF5KG1vZGVsKSkge1xuXHQgICAgICAgIHZhciB2YWwgPSBzZWxmLmdldFZhbHVlKCk7XG5cdCAgICAgICAgaWYgKGVsLmNoZWNrZWQpIHtcblx0ICAgICAgICAgIGlmIChpbmRleE9mKG1vZGVsLCB2YWwpIDwgMCkge1xuXHQgICAgICAgICAgICBtb2RlbC5wdXNoKHZhbCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIG1vZGVsLiRyZW1vdmUodmFsKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc2VsZi5zZXQoZ2V0Qm9vbGVhblZhbHVlKCkpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgnY2hlY2tlZCcpKSB7XG5cdCAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgICBlbC5jaGVja2VkID0gaW5kZXhPZih2YWx1ZSwgdGhpcy5nZXRWYWx1ZSgpKSA+IC0xO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKGVsLmhhc093blByb3BlcnR5KCdfdHJ1ZVZhbHVlJykpIHtcblx0ICAgICAgICBlbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgZWwuX3RydWVWYWx1ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZWwuY2hlY2tlZCA9ICEhdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgaGFuZGxlcnMgPSB7XG5cdCAgdGV4dDogdGV4dCQyLFxuXHQgIHJhZGlvOiByYWRpbyxcblx0ICBzZWxlY3Q6IHNlbGVjdCxcblx0ICBjaGVja2JveDogY2hlY2tib3hcblx0fTtcblx0XG5cdHZhciBtb2RlbCA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IE1PREVMLFxuXHQgIHR3b1dheTogdHJ1ZSxcblx0ICBoYW5kbGVyczogaGFuZGxlcnMsXG5cdCAgcGFyYW1zOiBbJ2xhenknLCAnbnVtYmVyJywgJ2RlYm91bmNlJ10sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFBvc3NpYmxlIGVsZW1lbnRzOlxuXHQgICAqICAgPHNlbGVjdD5cblx0ICAgKiAgIDx0ZXh0YXJlYT5cblx0ICAgKiAgIDxpbnB1dCB0eXBlPVwiKlwiPlxuXHQgICAqICAgICAtIHRleHRcblx0ICAgKiAgICAgLSBjaGVja2JveFxuXHQgICAqICAgICAtIHJhZGlvXG5cdCAgICogICAgIC0gbnVtYmVyXG5cdCAgICovXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyBmcmllbmRseSB3YXJuaW5nLi4uXG5cdCAgICB0aGlzLmNoZWNrRmlsdGVycygpO1xuXHQgICAgaWYgKHRoaXMuaGFzUmVhZCAmJiAhdGhpcy5oYXNXcml0ZSkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgYSByZWFkLW9ubHkgZmlsdGVyIHdpdGggJyArICd2LW1vZGVsPVwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCIuICcgKyAnWW91IG1pZ2h0IHdhbnQgdG8gdXNlIGEgdHdvLXdheSBmaWx0ZXIgdG8gZW5zdXJlIGNvcnJlY3QgYmVoYXZpb3IuJywgdGhpcy52bSk7XG5cdCAgICB9XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgdmFyIHRhZyA9IGVsLnRhZ05hbWU7XG5cdCAgICB2YXIgaGFuZGxlcjtcblx0ICAgIGlmICh0YWcgPT09ICdJTlBVVCcpIHtcblx0ICAgICAgaGFuZGxlciA9IGhhbmRsZXJzW2VsLnR5cGVdIHx8IGhhbmRsZXJzLnRleHQ7XG5cdCAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1NFTEVDVCcpIHtcblx0ICAgICAgaGFuZGxlciA9IGhhbmRsZXJzLnNlbGVjdDtcblx0ICAgIH0gZWxzZSBpZiAodGFnID09PSAnVEVYVEFSRUEnKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBoYW5kbGVycy50ZXh0O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LW1vZGVsIGRvZXMgbm90IHN1cHBvcnQgZWxlbWVudCB0eXBlOiAnICsgdGFnLCB0aGlzLnZtKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZWwuX192X21vZGVsID0gdGhpcztcblx0ICAgIGhhbmRsZXIuYmluZC5jYWxsKHRoaXMpO1xuXHQgICAgdGhpcy51cGRhdGUgPSBoYW5kbGVyLnVwZGF0ZTtcblx0ICAgIHRoaXMuX3VuYmluZCA9IGhhbmRsZXIudW5iaW5kO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENoZWNrIHJlYWQvd3JpdGUgZmlsdGVyIHN0YXRzLlxuXHQgICAqL1xuXHRcblx0ICBjaGVja0ZpbHRlcnM6IGZ1bmN0aW9uIGNoZWNrRmlsdGVycygpIHtcblx0ICAgIHZhciBmaWx0ZXJzID0gdGhpcy5maWx0ZXJzO1xuXHQgICAgaWYgKCFmaWx0ZXJzKSByZXR1cm47XG5cdCAgICB2YXIgaSA9IGZpbHRlcnMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YXIgZmlsdGVyID0gcmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICdmaWx0ZXJzJywgZmlsdGVyc1tpXS5uYW1lKTtcblx0ICAgICAgaWYgKHR5cGVvZiBmaWx0ZXIgPT09ICdmdW5jdGlvbicgfHwgZmlsdGVyLnJlYWQpIHtcblx0ICAgICAgICB0aGlzLmhhc1JlYWQgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChmaWx0ZXIud3JpdGUpIHtcblx0ICAgICAgICB0aGlzLmhhc1dyaXRlID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdGhpcy5lbC5fX3ZfbW9kZWwgPSBudWxsO1xuXHQgICAgdGhpcy5fdW5iaW5kICYmIHRoaXMuX3VuYmluZCgpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIGtleUNvZGUgYWxpYXNlc1xuXHR2YXIga2V5Q29kZXMgPSB7XG5cdCAgZXNjOiAyNyxcblx0ICB0YWI6IDksXG5cdCAgZW50ZXI6IDEzLFxuXHQgIHNwYWNlOiAzMixcblx0ICAnZGVsZXRlJzogWzgsIDQ2XSxcblx0ICB1cDogMzgsXG5cdCAgbGVmdDogMzcsXG5cdCAgcmlnaHQ6IDM5LFxuXHQgIGRvd246IDQwXG5cdH07XG5cdFxuXHRmdW5jdGlvbiBrZXlGaWx0ZXIoaGFuZGxlciwga2V5cykge1xuXHQgIHZhciBjb2RlcyA9IGtleXMubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIHZhciBjaGFyQ29kZSA9IGtleS5jaGFyQ29kZUF0KDApO1xuXHQgICAgaWYgKGNoYXJDb2RlID4gNDcgJiYgY2hhckNvZGUgPCA1OCkge1xuXHQgICAgICByZXR1cm4gcGFyc2VJbnQoa2V5LCAxMCk7XG5cdCAgICB9XG5cdCAgICBpZiAoa2V5Lmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICBjaGFyQ29kZSA9IGtleS50b1VwcGVyQ2FzZSgpLmNoYXJDb2RlQXQoMCk7XG5cdCAgICAgIGlmIChjaGFyQ29kZSA+IDY0ICYmIGNoYXJDb2RlIDwgOTEpIHtcblx0ICAgICAgICByZXR1cm4gY2hhckNvZGU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBrZXlDb2Rlc1trZXldO1xuXHQgIH0pO1xuXHQgIGNvZGVzID0gW10uY29uY2F0LmFwcGx5KFtdLCBjb2Rlcyk7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGtleUhhbmRsZXIoZSkge1xuXHQgICAgaWYgKGNvZGVzLmluZGV4T2YoZS5rZXlDb2RlKSA+IC0xKSB7XG5cdCAgICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc3RvcEZpbHRlcihoYW5kbGVyKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHN0b3BIYW5kbGVyKGUpIHtcblx0ICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdCAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHByZXZlbnRGaWx0ZXIoaGFuZGxlcikge1xuXHQgIHJldHVybiBmdW5jdGlvbiBwcmV2ZW50SGFuZGxlcihlKSB7XG5cdCAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNlbGZGaWx0ZXIoaGFuZGxlcikge1xuXHQgIHJldHVybiBmdW5jdGlvbiBzZWxmSGFuZGxlcihlKSB7XG5cdCAgICBpZiAoZS50YXJnZXQgPT09IGUuY3VycmVudFRhcmdldCkge1xuXHQgICAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdHZhciBvbiQxID0ge1xuXHRcblx0ICBwcmlvcml0eTogT04sXG5cdCAgYWNjZXB0U3RhdGVtZW50OiB0cnVlLFxuXHQgIGtleUNvZGVzOiBrZXlDb2Rlcyxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8vIGRlYWwgd2l0aCBpZnJhbWVzXG5cdCAgICBpZiAodGhpcy5lbC50YWdOYW1lID09PSAnSUZSQU1FJyAmJiB0aGlzLmFyZyAhPT0gJ2xvYWQnKSB7XG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgdGhpcy5pZnJhbWVCaW5kID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIG9uKHNlbGYuZWwuY29udGVudFdpbmRvdywgc2VsZi5hcmcsIHNlbGYuaGFuZGxlciwgc2VsZi5tb2RpZmllcnMuY2FwdHVyZSk7XG5cdCAgICAgIH07XG5cdCAgICAgIHRoaXMub24oJ2xvYWQnLCB0aGlzLmlmcmFtZUJpbmQpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGhhbmRsZXIpIHtcblx0ICAgIC8vIHN0dWIgYSBub29wIGZvciB2LW9uIHdpdGggbm8gdmFsdWUsXG5cdCAgICAvLyBlLmcuIEBtb3VzZWRvd24ucHJldmVudFxuXHQgICAgaWYgKCF0aGlzLmRlc2NyaXB0b3IucmF3KSB7XG5cdCAgICAgIGhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7fTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LW9uOicgKyB0aGlzLmFyZyArICc9XCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiIGV4cGVjdHMgYSBmdW5jdGlvbiB2YWx1ZSwgJyArICdnb3QgJyArIGhhbmRsZXIsIHRoaXMudm0pO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gYXBwbHkgbW9kaWZpZXJzXG5cdCAgICBpZiAodGhpcy5tb2RpZmllcnMuc3RvcCkge1xuXHQgICAgICBoYW5kbGVyID0gc3RvcEZpbHRlcihoYW5kbGVyKTtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLm1vZGlmaWVycy5wcmV2ZW50KSB7XG5cdCAgICAgIGhhbmRsZXIgPSBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMubW9kaWZpZXJzLnNlbGYpIHtcblx0ICAgICAgaGFuZGxlciA9IHNlbGZGaWx0ZXIoaGFuZGxlcik7XG5cdCAgICB9XG5cdCAgICAvLyBrZXkgZmlsdGVyXG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMubW9kaWZpZXJzKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4ga2V5ICE9PSAnc3RvcCcgJiYga2V5ICE9PSAncHJldmVudCcgJiYga2V5ICE9PSAnc2VsZicgJiYga2V5ICE9PSAnY2FwdHVyZSc7XG5cdCAgICB9KTtcblx0ICAgIGlmIChrZXlzLmxlbmd0aCkge1xuXHQgICAgICBoYW5kbGVyID0ga2V5RmlsdGVyKGhhbmRsZXIsIGtleXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMucmVzZXQoKTtcblx0ICAgIHRoaXMuaGFuZGxlciA9IGhhbmRsZXI7XG5cdFxuXHQgICAgaWYgKHRoaXMuaWZyYW1lQmluZCkge1xuXHQgICAgICB0aGlzLmlmcmFtZUJpbmQoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG9uKHRoaXMuZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIsIHRoaXMubW9kaWZpZXJzLmNhcHR1cmUpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuaWZyYW1lQmluZCA/IHRoaXMuZWwuY29udGVudFdpbmRvdyA6IHRoaXMuZWw7XG5cdCAgICBpZiAodGhpcy5oYW5kbGVyKSB7XG5cdCAgICAgIG9mZihlbCwgdGhpcy5hcmcsIHRoaXMuaGFuZGxlcik7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB0aGlzLnJlc2V0KCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHByZWZpeGVzID0gWyctd2Via2l0LScsICctbW96LScsICctbXMtJ107XG5cdHZhciBjYW1lbFByZWZpeGVzID0gWydXZWJraXQnLCAnTW96JywgJ21zJ107XG5cdHZhciBpbXBvcnRhbnRSRSA9IC8haW1wb3J0YW50Oz8kLztcblx0dmFyIHByb3BDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdFxuXHR2YXIgdGVzdEVsID0gbnVsbDtcblx0XG5cdHZhciBzdHlsZSA9IHtcblx0XG5cdCAgZGVlcDogdHJ1ZSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHRoaXMuZWwuc3R5bGUuY3NzVGV4dCA9IHZhbHVlO1xuXHQgICAgfSBlbHNlIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZS5yZWR1Y2UoZXh0ZW5kLCB7fSkpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUgfHwge30pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGhhbmRsZU9iamVjdDogZnVuY3Rpb24gaGFuZGxlT2JqZWN0KHZhbHVlKSB7XG5cdCAgICAvLyBjYWNoZSBvYmplY3Qgc3R5bGVzIHNvIHRoYXQgb25seSBjaGFuZ2VkIHByb3BzXG5cdCAgICAvLyBhcmUgYWN0dWFsbHkgdXBkYXRlZC5cblx0ICAgIHZhciBjYWNoZSA9IHRoaXMuY2FjaGUgfHwgKHRoaXMuY2FjaGUgPSB7fSk7XG5cdCAgICB2YXIgbmFtZSwgdmFsO1xuXHQgICAgZm9yIChuYW1lIGluIGNhY2hlKSB7XG5cdCAgICAgIGlmICghKG5hbWUgaW4gdmFsdWUpKSB7XG5cdCAgICAgICAgdGhpcy5oYW5kbGVTaW5nbGUobmFtZSwgbnVsbCk7XG5cdCAgICAgICAgZGVsZXRlIGNhY2hlW25hbWVdO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBmb3IgKG5hbWUgaW4gdmFsdWUpIHtcblx0ICAgICAgdmFsID0gdmFsdWVbbmFtZV07XG5cdCAgICAgIGlmICh2YWwgIT09IGNhY2hlW25hbWVdKSB7XG5cdCAgICAgICAgY2FjaGVbbmFtZV0gPSB2YWw7XG5cdCAgICAgICAgdGhpcy5oYW5kbGVTaW5nbGUobmFtZSwgdmFsKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGhhbmRsZVNpbmdsZTogZnVuY3Rpb24gaGFuZGxlU2luZ2xlKHByb3AsIHZhbHVlKSB7XG5cdCAgICBwcm9wID0gbm9ybWFsaXplKHByb3ApO1xuXHQgICAgaWYgKCFwcm9wKSByZXR1cm47IC8vIHVuc3VwcG9ydGVkIHByb3Bcblx0ICAgIC8vIGNhc3QgcG9zc2libGUgbnVtYmVycy9ib29sZWFucyBpbnRvIHN0cmluZ3Ncblx0ICAgIGlmICh2YWx1ZSAhPSBudWxsKSB2YWx1ZSArPSAnJztcblx0ICAgIGlmICh2YWx1ZSkge1xuXHQgICAgICB2YXIgaXNJbXBvcnRhbnQgPSBpbXBvcnRhbnRSRS50ZXN0KHZhbHVlKSA/ICdpbXBvcnRhbnQnIDogJyc7XG5cdCAgICAgIGlmIChpc0ltcG9ydGFudCkge1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgICB3YXJuKCdJdFxcJ3MgcHJvYmFibHkgYSBiYWQgaWRlYSB0byB1c2UgIWltcG9ydGFudCB3aXRoIGlubGluZSBydWxlcy4gJyArICdUaGlzIGZlYXR1cmUgd2lsbCBiZSBkZXByZWNhdGVkIGluIGEgZnV0dXJlIHZlcnNpb24gb2YgVnVlLicpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoaW1wb3J0YW50UkUsICcnKS50cmltKCk7XG5cdCAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eShwcm9wLmtlYmFiLCB2YWx1ZSwgaXNJbXBvcnRhbnQpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuZWwuc3R5bGVbcHJvcC5jYW1lbF0gPSB2YWx1ZTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5lbC5zdHlsZVtwcm9wLmNhbWVsXSA9ICcnO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdH07XG5cdFxuXHQvKipcblx0ICogTm9ybWFsaXplIGEgQ1NTIHByb3BlcnR5IG5hbWUuXG5cdCAqIC0gY2FjaGUgcmVzdWx0XG5cdCAqIC0gYXV0byBwcmVmaXhcblx0ICogLSBjYW1lbENhc2UgLT4gZGFzaC1jYXNlXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBub3JtYWxpemUocHJvcCkge1xuXHQgIGlmIChwcm9wQ2FjaGVbcHJvcF0pIHtcblx0ICAgIHJldHVybiBwcm9wQ2FjaGVbcHJvcF07XG5cdCAgfVxuXHQgIHZhciByZXMgPSBwcmVmaXgocHJvcCk7XG5cdCAgcHJvcENhY2hlW3Byb3BdID0gcHJvcENhY2hlW3Jlc10gPSByZXM7XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEF1dG8gZGV0ZWN0IHRoZSBhcHByb3ByaWF0ZSBwcmVmaXggZm9yIGEgQ1NTIHByb3BlcnR5LlxuXHQgKiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9wYXVsaXJpc2gvNTIzNjkyXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcmVmaXgocHJvcCkge1xuXHQgIHByb3AgPSBoeXBoZW5hdGUocHJvcCk7XG5cdCAgdmFyIGNhbWVsID0gY2FtZWxpemUocHJvcCk7XG5cdCAgdmFyIHVwcGVyID0gY2FtZWwuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbC5zbGljZSgxKTtcblx0ICBpZiAoIXRlc3RFbCkge1xuXHQgICAgdGVzdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgfVxuXHQgIHZhciBpID0gcHJlZml4ZXMubGVuZ3RoO1xuXHQgIHZhciBwcmVmaXhlZDtcblx0ICBpZiAoY2FtZWwgIT09ICdmaWx0ZXInICYmIGNhbWVsIGluIHRlc3RFbC5zdHlsZSkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAga2ViYWI6IHByb3AsXG5cdCAgICAgIGNhbWVsOiBjYW1lbFxuXHQgICAgfTtcblx0ICB9XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgcHJlZml4ZWQgPSBjYW1lbFByZWZpeGVzW2ldICsgdXBwZXI7XG5cdCAgICBpZiAocHJlZml4ZWQgaW4gdGVzdEVsLnN0eWxlKSB7XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAga2ViYWI6IHByZWZpeGVzW2ldICsgcHJvcCxcblx0ICAgICAgICBjYW1lbDogcHJlZml4ZWRcblx0ICAgICAgfTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8vIHhsaW5rXG5cdHZhciB4bGlua05TID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnO1xuXHR2YXIgeGxpbmtSRSA9IC9eeGxpbms6Lztcblx0XG5cdC8vIGNoZWNrIGZvciBhdHRyaWJ1dGVzIHRoYXQgcHJvaGliaXQgaW50ZXJwb2xhdGlvbnNcblx0dmFyIGRpc2FsbG93ZWRJbnRlcnBBdHRyUkUgPSAvXnYtfF46fF5AfF4oPzppc3x0cmFuc2l0aW9ufHRyYW5zaXRpb24tbW9kZXxkZWJvdW5jZXx0cmFjay1ieXxzdGFnZ2VyfGVudGVyLXN0YWdnZXJ8bGVhdmUtc3RhZ2dlcikkLztcblx0Ly8gdGhlc2UgYXR0cmlidXRlcyBzaG91bGQgYWxzbyBzZXQgdGhlaXIgY29ycmVzcG9uZGluZyBwcm9wZXJ0aWVzXG5cdC8vIGJlY2F1c2UgdGhleSBvbmx5IGFmZmVjdCB0aGUgaW5pdGlhbCBzdGF0ZSBvZiB0aGUgZWxlbWVudFxuXHR2YXIgYXR0cldpdGhQcm9wc1JFID0gL14oPzp2YWx1ZXxjaGVja2VkfHNlbGVjdGVkfG11dGVkKSQvO1xuXHQvLyB0aGVzZSBhdHRyaWJ1dGVzIGV4cGVjdCBlbnVtcmF0ZWQgdmFsdWVzIG9mIFwidHJ1ZVwiIG9yIFwiZmFsc2VcIlxuXHQvLyBidXQgYXJlIG5vdCBib29sZWFuIGF0dHJpYnV0ZXNcblx0dmFyIGVudW1lcmF0ZWRBdHRyUkUgPSAvXig/OmRyYWdnYWJsZXxjb250ZW50ZWRpdGFibGV8c3BlbGxjaGVjaykkLztcblx0XG5cdC8vIHRoZXNlIGF0dHJpYnV0ZXMgc2hvdWxkIHNldCBhIGhpZGRlbiBwcm9wZXJ0eSBmb3Jcblx0Ly8gYmluZGluZyB2LW1vZGVsIHRvIG9iamVjdCB2YWx1ZXNcblx0dmFyIG1vZGVsUHJvcHMgPSB7XG5cdCAgdmFsdWU6ICdfdmFsdWUnLFxuXHQgICd0cnVlLXZhbHVlJzogJ190cnVlVmFsdWUnLFxuXHQgICdmYWxzZS12YWx1ZSc6ICdfZmFsc2VWYWx1ZSdcblx0fTtcblx0XG5cdHZhciBiaW5kJDEgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBCSU5ELFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIGF0dHIgPSB0aGlzLmFyZztcblx0ICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWU7XG5cdCAgICAvLyBzaG91bGQgYmUgZGVlcCB3YXRjaCBvbiBvYmplY3QgbW9kZVxuXHQgICAgaWYgKCFhdHRyKSB7XG5cdCAgICAgIHRoaXMuZGVlcCA9IHRydWU7XG5cdCAgICB9XG5cdCAgICAvLyBoYW5kbGUgaW50ZXJwb2xhdGlvbiBiaW5kaW5nc1xuXHQgICAgdmFyIGRlc2NyaXB0b3IgPSB0aGlzLmRlc2NyaXB0b3I7XG5cdCAgICB2YXIgdG9rZW5zID0gZGVzY3JpcHRvci5pbnRlcnA7XG5cdCAgICBpZiAodG9rZW5zKSB7XG5cdCAgICAgIC8vIGhhbmRsZSBpbnRlcnBvbGF0aW9ucyB3aXRoIG9uZS10aW1lIHRva2Vuc1xuXHQgICAgICBpZiAoZGVzY3JpcHRvci5oYXNPbmVUaW1lKSB7XG5cdCAgICAgICAgdGhpcy5leHByZXNzaW9uID0gdG9rZW5zVG9FeHAodG9rZW5zLCB0aGlzLl9zY29wZSB8fCB0aGlzLnZtKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gb25seSBhbGxvdyBiaW5kaW5nIG9uIG5hdGl2ZSBhdHRyaWJ1dGVzXG5cdCAgICAgIGlmIChkaXNhbGxvd2VkSW50ZXJwQXR0clJFLnRlc3QoYXR0cikgfHwgYXR0ciA9PT0gJ25hbWUnICYmICh0YWcgPT09ICdQQVJUSUFMJyB8fCB0YWcgPT09ICdTTE9UJykpIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oYXR0ciArICc9XCInICsgZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyAnYXR0cmlidXRlIGludGVycG9sYXRpb24gaXMgbm90IGFsbG93ZWQgaW4gVnVlLmpzICcgKyAnZGlyZWN0aXZlcyBhbmQgc3BlY2lhbCBhdHRyaWJ1dGVzLicsIHRoaXMudm0pO1xuXHQgICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuXHQgICAgICAgIHRoaXMuaW52YWxpZCA9IHRydWU7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHZhciByYXcgPSBhdHRyICsgJz1cIicgKyBkZXNjcmlwdG9yLnJhdyArICdcIjogJztcblx0ICAgICAgICAvLyB3YXJuIHNyY1xuXHQgICAgICAgIGlmIChhdHRyID09PSAnc3JjJykge1xuXHQgICAgICAgICAgd2FybihyYXcgKyAnaW50ZXJwb2xhdGlvbiBpbiBcInNyY1wiIGF0dHJpYnV0ZSB3aWxsIGNhdXNlICcgKyAnYSA0MDQgcmVxdWVzdC4gVXNlIHYtYmluZDpzcmMgaW5zdGVhZC4nLCB0aGlzLnZtKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIHdhcm4gc3R5bGVcblx0ICAgICAgICBpZiAoYXR0ciA9PT0gJ3N0eWxlJykge1xuXHQgICAgICAgICAgd2FybihyYXcgKyAnaW50ZXJwb2xhdGlvbiBpbiBcInN0eWxlXCIgYXR0cmlidXRlIHdpbGwgY2F1c2UgJyArICd0aGUgYXR0cmlidXRlIHRvIGJlIGRpc2NhcmRlZCBpbiBJbnRlcm5ldCBFeHBsb3Jlci4gJyArICdVc2Ugdi1iaW5kOnN0eWxlIGluc3RlYWQuJywgdGhpcy52bSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIGlmICh0aGlzLmludmFsaWQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIGF0dHIgPSB0aGlzLmFyZztcblx0ICAgIGlmICh0aGlzLmFyZykge1xuXHQgICAgICB0aGlzLmhhbmRsZVNpbmdsZShhdHRyLCB2YWx1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZSB8fCB7fSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLy8gc2hhcmUgb2JqZWN0IGhhbmRsZXIgd2l0aCB2LWJpbmQ6Y2xhc3Ncblx0ICBoYW5kbGVPYmplY3Q6IHN0eWxlLmhhbmRsZU9iamVjdCxcblx0XG5cdCAgaGFuZGxlU2luZ2xlOiBmdW5jdGlvbiBoYW5kbGVTaW5nbGUoYXR0ciwgdmFsdWUpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICB2YXIgaW50ZXJwID0gdGhpcy5kZXNjcmlwdG9yLmludGVycDtcblx0ICAgIGlmICh0aGlzLm1vZGlmaWVycy5jYW1lbCkge1xuXHQgICAgICBhdHRyID0gY2FtZWxpemUoYXR0cik7XG5cdCAgICB9XG5cdCAgICBpZiAoIWludGVycCAmJiBhdHRyV2l0aFByb3BzUkUudGVzdChhdHRyKSAmJiBhdHRyIGluIGVsKSB7XG5cdCAgICAgIHZhciBhdHRyVmFsdWUgPSBhdHRyID09PSAndmFsdWUnID8gdmFsdWUgPT0gbnVsbCAvLyBJRTkgd2lsbCBzZXQgaW5wdXQudmFsdWUgdG8gXCJudWxsXCIgZm9yIG51bGwuLi5cblx0ICAgICAgPyAnJyA6IHZhbHVlIDogdmFsdWU7XG5cdFxuXHQgICAgICBpZiAoZWxbYXR0cl0gIT09IGF0dHJWYWx1ZSkge1xuXHQgICAgICAgIGVsW2F0dHJdID0gYXR0clZhbHVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBzZXQgbW9kZWwgcHJvcHNcblx0ICAgIHZhciBtb2RlbFByb3AgPSBtb2RlbFByb3BzW2F0dHJdO1xuXHQgICAgaWYgKCFpbnRlcnAgJiYgbW9kZWxQcm9wKSB7XG5cdCAgICAgIGVsW21vZGVsUHJvcF0gPSB2YWx1ZTtcblx0ICAgICAgLy8gdXBkYXRlIHYtbW9kZWwgaWYgcHJlc2VudFxuXHQgICAgICB2YXIgbW9kZWwgPSBlbC5fX3ZfbW9kZWw7XG5cdCAgICAgIGlmIChtb2RlbCkge1xuXHQgICAgICAgIG1vZGVsLmxpc3RlbmVyKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIGRvIG5vdCBzZXQgdmFsdWUgYXR0cmlidXRlIGZvciB0ZXh0YXJlYVxuXHQgICAgaWYgKGF0dHIgPT09ICd2YWx1ZScgJiYgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuXHQgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIC8vIHVwZGF0ZSBhdHRyaWJ1dGVcblx0ICAgIGlmIChlbnVtZXJhdGVkQXR0clJFLnRlc3QoYXR0cikpIHtcblx0ICAgICAgZWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlID8gJ3RydWUnIDogJ2ZhbHNlJyk7XG5cdCAgICB9IGVsc2UgaWYgKHZhbHVlICE9IG51bGwgJiYgdmFsdWUgIT09IGZhbHNlKSB7XG5cdCAgICAgIGlmIChhdHRyID09PSAnY2xhc3MnKSB7XG5cdCAgICAgICAgLy8gaGFuZGxlIGVkZ2UgY2FzZSAjMTk2MDpcblx0ICAgICAgICAvLyBjbGFzcyBpbnRlcnBvbGF0aW9uIHNob3VsZCBub3Qgb3ZlcndyaXRlIFZ1ZSB0cmFuc2l0aW9uIGNsYXNzXG5cdCAgICAgICAgaWYgKGVsLl9fdl90cmFucykge1xuXHQgICAgICAgICAgdmFsdWUgKz0gJyAnICsgZWwuX192X3RyYW5zLmlkICsgJy10cmFuc2l0aW9uJztcblx0ICAgICAgICB9XG5cdCAgICAgICAgc2V0Q2xhc3MoZWwsIHZhbHVlKTtcblx0ICAgICAgfSBlbHNlIGlmICh4bGlua1JFLnRlc3QoYXR0cikpIHtcblx0ICAgICAgICBlbC5zZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBhdHRyLCB2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogdmFsdWUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogdmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGVsID0ge1xuXHRcblx0ICBwcmlvcml0eTogRUwsXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghdGhpcy5hcmcpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIGlkID0gdGhpcy5pZCA9IGNhbWVsaXplKHRoaXMuYXJnKTtcblx0ICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRlbHM7XG5cdCAgICBpZiAoaGFzT3duKHJlZnMsIGlkKSkge1xuXHQgICAgICByZWZzW2lkXSA9IHRoaXMuZWw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBkZWZpbmVSZWFjdGl2ZShyZWZzLCBpZCwgdGhpcy5lbCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kZWxzO1xuXHQgICAgaWYgKHJlZnNbdGhpcy5pZF0gPT09IHRoaXMuZWwpIHtcblx0ICAgICAgcmVmc1t0aGlzLmlkXSA9IG51bGw7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHJlZiA9IHtcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LXJlZjonICsgdGhpcy5hcmcgKyAnIG11c3QgYmUgdXNlZCBvbiBhIGNoaWxkICcgKyAnY29tcG9uZW50LiBGb3VuZCBvbiA8JyArIHRoaXMuZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICsgJz4uJywgdGhpcy52bSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGNsb2FrID0ge1xuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgdGhpcy52bS4kb25jZSgncHJlLWhvb2s6Y29tcGlsZWQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgndi1jbG9haycpO1xuXHQgICAgfSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8gbXVzdCBleHBvcnQgcGxhaW4gb2JqZWN0XG5cdHZhciBkaXJlY3RpdmVzID0ge1xuXHQgIHRleHQ6IHRleHQkMSxcblx0ICBodG1sOiBodG1sLFxuXHQgICdmb3InOiB2Rm9yLFxuXHQgICdpZic6IHZJZixcblx0ICBzaG93OiBzaG93LFxuXHQgIG1vZGVsOiBtb2RlbCxcblx0ICBvbjogb24kMSxcblx0ICBiaW5kOiBiaW5kJDEsXG5cdCAgZWw6IGVsLFxuXHQgIHJlZjogcmVmLFxuXHQgIGNsb2FrOiBjbG9ha1xuXHR9O1xuXHRcblx0dmFyIHZDbGFzcyA9IHtcblx0XG5cdCAgZGVlcDogdHJ1ZSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIGlmICghdmFsdWUpIHtcblx0ICAgICAgdGhpcy5jbGVhbnVwKCk7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgdGhpcy5zZXRDbGFzcyh2YWx1ZS50cmltKCkuc3BsaXQoL1xccysvKSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLnNldENsYXNzKG5vcm1hbGl6ZSQxKHZhbHVlKSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgc2V0Q2xhc3M6IGZ1bmN0aW9uIHNldENsYXNzKHZhbHVlKSB7XG5cdCAgICB0aGlzLmNsZWFudXAodmFsdWUpO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIHZhbCA9IHZhbHVlW2ldO1xuXHQgICAgICBpZiAodmFsKSB7XG5cdCAgICAgICAgYXBwbHkodGhpcy5lbCwgdmFsLCBhZGRDbGFzcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHRoaXMucHJldktleXMgPSB2YWx1ZTtcblx0ICB9LFxuXHRcblx0ICBjbGVhbnVwOiBmdW5jdGlvbiBjbGVhbnVwKHZhbHVlKSB7XG5cdCAgICB2YXIgcHJldktleXMgPSB0aGlzLnByZXZLZXlzO1xuXHQgICAgaWYgKCFwcmV2S2V5cykgcmV0dXJuO1xuXHQgICAgdmFyIGkgPSBwcmV2S2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhciBrZXkgPSBwcmV2S2V5c1tpXTtcblx0ICAgICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZS5pbmRleE9mKGtleSkgPCAwKSB7XG5cdCAgICAgICAgYXBwbHkodGhpcy5lbCwga2V5LCByZW1vdmVDbGFzcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogTm9ybWFsaXplIG9iamVjdHMgYW5kIGFycmF5cyAocG90ZW50aWFsbHkgY29udGFpbmluZyBvYmplY3RzKVxuXHQgKiBpbnRvIGFycmF5IG9mIHN0cmluZ3MuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fEFycmF5PFN0cmluZ3xPYmplY3Q+fSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHtBcnJheTxTdHJpbmc+fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZSQxKHZhbHVlKSB7XG5cdCAgdmFyIHJlcyA9IFtdO1xuXHQgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIF9rZXkgPSB2YWx1ZVtpXTtcblx0ICAgICAgaWYgKF9rZXkpIHtcblx0ICAgICAgICBpZiAodHlwZW9mIF9rZXkgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICByZXMucHVzaChfa2V5KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgZm9yICh2YXIgayBpbiBfa2V5KSB7XG5cdCAgICAgICAgICAgIGlmIChfa2V5W2tdKSByZXMucHVzaChrKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuXHQgICAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG5cdCAgICAgIGlmICh2YWx1ZVtrZXldKSByZXMucHVzaChrZXkpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQWRkIG9yIHJlbW92ZSBhIGNsYXNzL2NsYXNzZXMgb24gYW4gZWxlbWVudFxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgVGhlIGNsYXNzIG5hbWUuIFRoaXMgbWF5IG9yIG1heSBub3Rcblx0ICogICAgICAgICAgICAgICAgICAgICBjb250YWluIGEgc3BhY2UgY2hhcmFjdGVyLCBpbiBzdWNoIGFcblx0ICogICAgICAgICAgICAgICAgICAgICBjYXNlIHdlJ2xsIGRlYWwgd2l0aCBtdWx0aXBsZSBjbGFzc1xuXHQgKiAgICAgICAgICAgICAgICAgICAgIG5hbWVzIGF0IG9uY2UuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXBwbHkoZWwsIGtleSwgZm4pIHtcblx0ICBrZXkgPSBrZXkudHJpbSgpO1xuXHQgIGlmIChrZXkuaW5kZXhPZignICcpID09PSAtMSkge1xuXHQgICAgZm4oZWwsIGtleSk7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIC8vIFRoZSBrZXkgY29udGFpbnMgb25lIG9yIG1vcmUgc3BhY2UgY2hhcmFjdGVycy5cblx0ICAvLyBTaW5jZSBhIGNsYXNzIG5hbWUgZG9lc24ndCBhY2NlcHQgc3VjaCBjaGFyYWN0ZXJzLCB3ZVxuXHQgIC8vIHRyZWF0IGl0IGFzIG11bHRpcGxlIGNsYXNzZXMuXG5cdCAgdmFyIGtleXMgPSBrZXkuc3BsaXQoL1xccysvKTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBmbihlbCwga2V5c1tpXSk7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgY29tcG9uZW50ID0ge1xuXHRcblx0ICBwcmlvcml0eTogQ09NUE9ORU5ULFxuXHRcblx0ICBwYXJhbXM6IFsna2VlcC1hbGl2ZScsICd0cmFuc2l0aW9uLW1vZGUnLCAnaW5saW5lLXRlbXBsYXRlJ10sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHVwLiBUd28gcG9zc2libGUgdXNhZ2VzOlxuXHQgICAqXG5cdCAgICogLSBzdGF0aWM6XG5cdCAgICogICA8Y29tcD4gb3IgPGRpdiB2LWNvbXBvbmVudD1cImNvbXBcIj5cblx0ICAgKlxuXHQgICAqIC0gZHluYW1pYzpcblx0ICAgKiAgIDxjb21wb25lbnQgOmlzPVwidmlld1wiPlxuXHQgICAqL1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgaWYgKCF0aGlzLmVsLl9fdnVlX18pIHtcblx0ICAgICAgLy8ga2VlcC1hbGl2ZSBjYWNoZVxuXHQgICAgICB0aGlzLmtlZXBBbGl2ZSA9IHRoaXMucGFyYW1zLmtlZXBBbGl2ZTtcblx0ICAgICAgaWYgKHRoaXMua2VlcEFsaXZlKSB7XG5cdCAgICAgICAgdGhpcy5jYWNoZSA9IHt9O1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGNoZWNrIGlubGluZS10ZW1wbGF0ZVxuXHQgICAgICBpZiAodGhpcy5wYXJhbXMuaW5saW5lVGVtcGxhdGUpIHtcblx0ICAgICAgICAvLyBleHRyYWN0IGlubGluZSB0ZW1wbGF0ZSBhcyBhIERvY3VtZW50RnJhZ21lbnRcblx0ICAgICAgICB0aGlzLmlubGluZVRlbXBsYXRlID0gZXh0cmFjdENvbnRlbnQodGhpcy5lbCwgdHJ1ZSk7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gY29tcG9uZW50IHJlc29sdXRpb24gcmVsYXRlZCBzdGF0ZVxuXHQgICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IHRoaXMuQ29tcG9uZW50ID0gbnVsbDtcblx0ICAgICAgLy8gdHJhbnNpdGlvbiByZWxhdGVkIHN0YXRlXG5cdCAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxzID0gMDtcblx0ICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbENiID0gbnVsbDtcblx0ICAgICAgLy8gY3JlYXRlIGEgcmVmIGFuY2hvclxuXHQgICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1jb21wb25lbnQnKTtcblx0ICAgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG5cdCAgICAgIC8vIHJlbW92ZSBpcyBhdHRyaWJ1dGUuXG5cdCAgICAgIC8vIHRoaXMgaXMgcmVtb3ZlZCBkdXJpbmcgY29tcGlsYXRpb24sIGJ1dCBiZWNhdXNlIGNvbXBpbGF0aW9uIGlzXG5cdCAgICAgIC8vIGNhY2hlZCwgd2hlbiB0aGUgY29tcG9uZW50IGlzIHVzZWQgZWxzZXdoZXJlIHRoaXMgYXR0cmlidXRlXG5cdCAgICAgIC8vIHdpbGwgcmVtYWluIGF0IGxpbmsgdGltZS5cblx0ICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ2lzJyk7XG5cdCAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCc6aXMnKTtcblx0ICAgICAgLy8gcmVtb3ZlIHJlZiwgc2FtZSBhcyBhYm92ZVxuXHQgICAgICBpZiAodGhpcy5kZXNjcmlwdG9yLnJlZikge1xuXHQgICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCd2LXJlZjonICsgaHlwaGVuYXRlKHRoaXMuZGVzY3JpcHRvci5yZWYpKTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBpZiBzdGF0aWMsIGJ1aWxkIHJpZ2h0IG5vdy5cblx0ICAgICAgaWYgKHRoaXMubGl0ZXJhbCkge1xuXHQgICAgICAgIHRoaXMuc2V0Q29tcG9uZW50KHRoaXMuZXhwcmVzc2lvbik7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignY2Fubm90IG1vdW50IGNvbXBvbmVudCBcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgJyArICdvbiBhbHJlYWR5IG1vdW50ZWQgZWxlbWVudDogJyArIHRoaXMuZWwpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFB1YmxpYyB1cGRhdGUsIGNhbGxlZCBieSB0aGUgd2F0Y2hlciBpbiB0aGUgZHluYW1pY1xuXHQgICAqIGxpdGVyYWwgc2NlbmFyaW8sIGUuZy4gPGNvbXBvbmVudCA6aXM9XCJ2aWV3XCI+XG5cdCAgICovXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICBpZiAoIXRoaXMubGl0ZXJhbCkge1xuXHQgICAgICB0aGlzLnNldENvbXBvbmVudCh2YWx1ZSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogU3dpdGNoIGR5bmFtaWMgY29tcG9uZW50cy4gTWF5IHJlc29sdmUgdGhlIGNvbXBvbmVudFxuXHQgICAqIGFzeW5jaHJvbm91c2x5LCBhbmQgcGVyZm9ybSB0cmFuc2l0aW9uIGJhc2VkIG9uXG5cdCAgICogc3BlY2lmaWVkIHRyYW5zaXRpb24gbW9kZS4gQWNjZXB0cyBhIGZldyBhZGRpdGlvbmFsXG5cdCAgICogYXJndW1lbnRzIHNwZWNpZmljYWxseSBmb3IgdnVlLXJvdXRlci5cblx0ICAgKlxuXHQgICAqIFRoZSBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiB0aGUgZnVsbCB0cmFuc2l0aW9uIGlzXG5cdCAgICogZmluaXNoZWQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIHNldENvbXBvbmVudDogZnVuY3Rpb24gc2V0Q29tcG9uZW50KHZhbHVlLCBjYikge1xuXHQgICAgdGhpcy5pbnZhbGlkYXRlUGVuZGluZygpO1xuXHQgICAgaWYgKCF2YWx1ZSkge1xuXHQgICAgICAvLyBqdXN0IHJlbW92ZSBjdXJyZW50XG5cdCAgICAgIHRoaXMudW5idWlsZCh0cnVlKTtcblx0ICAgICAgdGhpcy5yZW1vdmUodGhpcy5jaGlsZFZNLCBjYik7XG5cdCAgICAgIHRoaXMuY2hpbGRWTSA9IG51bGw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIHRoaXMucmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHNlbGYubW91bnRDb21wb25lbnQoY2IpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBSZXNvbHZlIHRoZSBjb21wb25lbnQgY29uc3RydWN0b3IgdG8gdXNlIHdoZW4gY3JlYXRpbmdcblx0ICAgKiB0aGUgY2hpbGQgdm0uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAqL1xuXHRcblx0ICByZXNvbHZlQ29tcG9uZW50OiBmdW5jdGlvbiByZXNvbHZlQ29tcG9uZW50KHZhbHVlLCBjYikge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSBjYW5jZWxsYWJsZShmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG5cdCAgICAgIHNlbGYuQ29tcG9uZW50TmFtZSA9IENvbXBvbmVudC5vcHRpb25zLm5hbWUgfHwgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyB2YWx1ZSA6IG51bGwpO1xuXHQgICAgICBzZWxmLkNvbXBvbmVudCA9IENvbXBvbmVudDtcblx0ICAgICAgY2IoKTtcblx0ICAgIH0pO1xuXHQgICAgdGhpcy52bS5fcmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSB1c2luZyB0aGUgY3VycmVudCBjb25zdHJ1Y3RvciBhbmRcblx0ICAgKiByZXBsYWNlIHRoZSBleGlzdGluZyBpbnN0YW5jZS4gVGhpcyBtZXRob2QgZG9lc24ndCBjYXJlXG5cdCAgICogd2hldGhlciB0aGUgbmV3IGNvbXBvbmVudCBhbmQgdGhlIG9sZCBvbmUgYXJlIGFjdHVhbGx5XG5cdCAgICogdGhlIHNhbWUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIG1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiBtb3VudENvbXBvbmVudChjYikge1xuXHQgICAgLy8gYWN0dWFsIG1vdW50XG5cdCAgICB0aGlzLnVuYnVpbGQodHJ1ZSk7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgYWN0aXZhdGVIb29rcyA9IHRoaXMuQ29tcG9uZW50Lm9wdGlvbnMuYWN0aXZhdGU7XG5cdCAgICB2YXIgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWQoKTtcblx0ICAgIHZhciBuZXdDb21wb25lbnQgPSB0aGlzLmJ1aWxkKCk7XG5cdCAgICBpZiAoYWN0aXZhdGVIb29rcyAmJiAhY2FjaGVkKSB7XG5cdCAgICAgIHRoaXMud2FpdGluZ0ZvciA9IG5ld0NvbXBvbmVudDtcblx0ICAgICAgY2FsbEFjdGl2YXRlSG9va3MoYWN0aXZhdGVIb29rcywgbmV3Q29tcG9uZW50LCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHNlbGYud2FpdGluZ0ZvciAhPT0gbmV3Q29tcG9uZW50KSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHNlbGYud2FpdGluZ0ZvciA9IG51bGw7XG5cdCAgICAgICAgc2VsZi50cmFuc2l0aW9uKG5ld0NvbXBvbmVudCwgY2IpO1xuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIHVwZGF0ZSByZWYgZm9yIGtlcHQtYWxpdmUgY29tcG9uZW50XG5cdCAgICAgIGlmIChjYWNoZWQpIHtcblx0ICAgICAgICBuZXdDb21wb25lbnQuX3VwZGF0ZVJlZigpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMudHJhbnNpdGlvbihuZXdDb21wb25lbnQsIGNiKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBXaGVuIHRoZSBjb21wb25lbnQgY2hhbmdlcyBvciB1bmJpbmRzIGJlZm9yZSBhbiBhc3luY1xuXHQgICAqIGNvbnN0cnVjdG9yIGlzIHJlc29sdmVkLCB3ZSBuZWVkIHRvIGludmFsaWRhdGUgaXRzXG5cdCAgICogcGVuZGluZyBjYWxsYmFjay5cblx0ICAgKi9cblx0XG5cdCAgaW52YWxpZGF0ZVBlbmRpbmc6IGZ1bmN0aW9uIGludmFsaWRhdGVQZW5kaW5nKCkge1xuXHQgICAgaWYgKHRoaXMucGVuZGluZ0NvbXBvbmVudENiKSB7XG5cdCAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiLmNhbmNlbCgpO1xuXHQgICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IG51bGw7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogSW5zdGFudGlhdGUvaW5zZXJ0IGEgbmV3IGNoaWxkIHZtLlxuXHQgICAqIElmIGtlZXAgYWxpdmUgYW5kIGhhcyBjYWNoZWQgaW5zdGFuY2UsIGluc2VydCB0aGF0XG5cdCAgICogaW5zdGFuY2U7IG90aGVyd2lzZSBidWlsZCBhIG5ldyBvbmUgYW5kIGNhY2hlIGl0LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtleHRyYU9wdGlvbnNdXG5cdCAgICogQHJldHVybiB7VnVlfSAtIHRoZSBjcmVhdGVkIGluc3RhbmNlXG5cdCAgICovXG5cdFxuXHQgIGJ1aWxkOiBmdW5jdGlvbiBidWlsZChleHRyYU9wdGlvbnMpIHtcblx0ICAgIHZhciBjYWNoZWQgPSB0aGlzLmdldENhY2hlZCgpO1xuXHQgICAgaWYgKGNhY2hlZCkge1xuXHQgICAgICByZXR1cm4gY2FjaGVkO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuQ29tcG9uZW50KSB7XG5cdCAgICAgIC8vIGRlZmF1bHQgb3B0aW9uc1xuXHQgICAgICB2YXIgb3B0aW9ucyA9IHtcblx0ICAgICAgICBuYW1lOiB0aGlzLkNvbXBvbmVudE5hbWUsXG5cdCAgICAgICAgZWw6IGNsb25lTm9kZSh0aGlzLmVsKSxcblx0ICAgICAgICB0ZW1wbGF0ZTogdGhpcy5pbmxpbmVUZW1wbGF0ZSxcblx0ICAgICAgICAvLyBtYWtlIHN1cmUgdG8gYWRkIHRoZSBjaGlsZCB3aXRoIGNvcnJlY3QgcGFyZW50XG5cdCAgICAgICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgaXRzIHBhcmVudFxuXHQgICAgICAgIC8vIHNob3VsZCBiZSB0aGUgdHJhbnNjbHVzaW9uIGhvc3QuXG5cdCAgICAgICAgcGFyZW50OiB0aGlzLl9ob3N0IHx8IHRoaXMudm0sXG5cdCAgICAgICAgLy8gaWYgbm8gaW5saW5lLXRlbXBsYXRlLCB0aGVuIHRoZSBjb21waWxlZFxuXHQgICAgICAgIC8vIGxpbmtlciBjYW4gYmUgY2FjaGVkIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuXG5cdCAgICAgICAgX2xpbmtlckNhY2hhYmxlOiAhdGhpcy5pbmxpbmVUZW1wbGF0ZSxcblx0ICAgICAgICBfcmVmOiB0aGlzLmRlc2NyaXB0b3IucmVmLFxuXHQgICAgICAgIF9hc0NvbXBvbmVudDogdHJ1ZSxcblx0ICAgICAgICBfaXNSb3V0ZXJWaWV3OiB0aGlzLl9pc1JvdXRlclZpZXcsXG5cdCAgICAgICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgY29udGV4dFxuXHQgICAgICAgIC8vIHdpbGwgYmUgdGhlIGNvbW1vbiBwYXJlbnQgdm0gb2YgdGhpcyBpbnN0YW5jZVxuXHQgICAgICAgIC8vIGFuZCBpdHMgaG9zdC5cblx0ICAgICAgICBfY29udGV4dDogdGhpcy52bSxcblx0ICAgICAgICAvLyBpZiB0aGlzIGlzIGluc2lkZSBhbiBpbmxpbmUgdi1mb3IsIHRoZSBzY29wZVxuXHQgICAgICAgIC8vIHdpbGwgYmUgdGhlIGludGVybWVkaWF0ZSBzY29wZSBjcmVhdGVkIGZvciB0aGlzXG5cdCAgICAgICAgLy8gcmVwZWF0IGZyYWdtZW50LiB0aGlzIGlzIHVzZWQgZm9yIGxpbmtpbmcgcHJvcHNcblx0ICAgICAgICAvLyBhbmQgY29udGFpbmVyIGRpcmVjdGl2ZXMuXG5cdCAgICAgICAgX3Njb3BlOiB0aGlzLl9zY29wZSxcblx0ICAgICAgICAvLyBwYXNzIGluIHRoZSBvd25lciBmcmFnbWVudCBvZiB0aGlzIGNvbXBvbmVudC5cblx0ICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBzbyB0aGF0IHRoZSBmcmFnbWVudCBjYW4ga2VlcFxuXHQgICAgICAgIC8vIHRyYWNrIG9mIGl0cyBjb250YWluZWQgY29tcG9uZW50cyBpbiBvcmRlciB0b1xuXHQgICAgICAgIC8vIGNhbGwgYXR0YWNoL2RldGFjaCBob29rcyBmb3IgdGhlbS5cblx0ICAgICAgICBfZnJhZzogdGhpcy5fZnJhZ1xuXHQgICAgICB9O1xuXHQgICAgICAvLyBleHRyYSBvcHRpb25zXG5cdCAgICAgIC8vIGluIDEuMC4wIHRoaXMgaXMgdXNlZCBieSB2dWUtcm91dGVyIG9ubHlcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChleHRyYU9wdGlvbnMpIHtcblx0ICAgICAgICBleHRlbmQob3B0aW9ucywgZXh0cmFPcHRpb25zKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5Db21wb25lbnQob3B0aW9ucyk7XG5cdCAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xuXHQgICAgICAgIHRoaXMuY2FjaGVbdGhpcy5Db21wb25lbnQuY2lkXSA9IGNoaWxkO1xuXHQgICAgICB9XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsLmhhc0F0dHJpYnV0ZSgndHJhbnNpdGlvbicpICYmIGNoaWxkLl9pc0ZyYWdtZW50KSB7XG5cdCAgICAgICAgd2FybignVHJhbnNpdGlvbnMgd2lsbCBub3Qgd29yayBvbiBhIGZyYWdtZW50IGluc3RhbmNlLiAnICsgJ1RlbXBsYXRlOiAnICsgY2hpbGQuJG9wdGlvbnMudGVtcGxhdGUsIGNoaWxkKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gY2hpbGQ7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogVHJ5IHRvIGdldCBhIGNhY2hlZCBpbnN0YW5jZSBvZiB0aGUgY3VycmVudCBjb21wb25lbnQuXG5cdCAgICpcblx0ICAgKiBAcmV0dXJuIHtWdWV8dW5kZWZpbmVkfVxuXHQgICAqL1xuXHRcblx0ICBnZXRDYWNoZWQ6IGZ1bmN0aW9uIGdldENhY2hlZCgpIHtcblx0ICAgIHJldHVybiB0aGlzLmtlZXBBbGl2ZSAmJiB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF07XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogVGVhcmRvd24gdGhlIGN1cnJlbnQgY2hpbGQsIGJ1dCBkZWZlcnMgY2xlYW51cCBzb1xuXHQgICAqIHRoYXQgd2UgY2FuIHNlcGFyYXRlIHRoZSBkZXN0cm95IGFuZCByZW1vdmFsIHN0ZXBzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBkZWZlclxuXHQgICAqL1xuXHRcblx0ICB1bmJ1aWxkOiBmdW5jdGlvbiB1bmJ1aWxkKGRlZmVyKSB7XG5cdCAgICBpZiAodGhpcy53YWl0aW5nRm9yKSB7XG5cdCAgICAgIGlmICghdGhpcy5rZWVwQWxpdmUpIHtcblx0ICAgICAgICB0aGlzLndhaXRpbmdGb3IuJGRlc3Ryb3koKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLndhaXRpbmdGb3IgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgdmFyIGNoaWxkID0gdGhpcy5jaGlsZFZNO1xuXHQgICAgaWYgKCFjaGlsZCB8fCB0aGlzLmtlZXBBbGl2ZSkge1xuXHQgICAgICBpZiAoY2hpbGQpIHtcblx0ICAgICAgICAvLyByZW1vdmUgcmVmXG5cdCAgICAgICAgY2hpbGQuX2luYWN0aXZlID0gdHJ1ZTtcblx0ICAgICAgICBjaGlsZC5fdXBkYXRlUmVmKHRydWUpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIC8vIHRoZSBzb2xlIHB1cnBvc2Ugb2YgYGRlZmVyQ2xlYW51cGAgaXMgc28gdGhhdCB3ZSBjYW5cblx0ICAgIC8vIFwiZGVhY3RpdmF0ZVwiIHRoZSB2bSByaWdodCBub3cgYW5kIHBlcmZvcm0gRE9NIHJlbW92YWxcblx0ICAgIC8vIGxhdGVyLlxuXHQgICAgY2hpbGQuJGRlc3Ryb3koZmFsc2UsIGRlZmVyKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBSZW1vdmUgY3VycmVudCBkZXN0cm95ZWQgY2hpbGQgYW5kIG1hbnVhbGx5IGRvXG5cdCAgICogdGhlIGNsZWFudXAgYWZ0ZXIgcmVtb3ZhbC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICovXG5cdFxuXHQgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGNoaWxkLCBjYikge1xuXHQgICAgdmFyIGtlZXBBbGl2ZSA9IHRoaXMua2VlcEFsaXZlO1xuXHQgICAgaWYgKGNoaWxkKSB7XG5cdCAgICAgIC8vIHdlIG1heSBoYXZlIGEgY29tcG9uZW50IHN3aXRjaCB3aGVuIGEgcHJldmlvdXNcblx0ICAgICAgLy8gY29tcG9uZW50IGlzIHN0aWxsIGJlaW5nIHRyYW5zaXRpb25lZCBvdXQuXG5cdCAgICAgIC8vIHdlIHdhbnQgdG8gdHJpZ2dlciBvbmx5IG9uZSBsYXN0ZXN0IGluc2VydGlvbiBjYlxuXHQgICAgICAvLyB3aGVuIHRoZSBleGlzdGluZyB0cmFuc2l0aW9uIGZpbmlzaGVzLiAoIzExMTkpXG5cdCAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxzKys7XG5cdCAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxDYiA9IGNiO1xuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIGNoaWxkLiRyZW1vdmUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxzLS07XG5cdCAgICAgICAgaWYgKCFrZWVwQWxpdmUpIGNoaWxkLl9jbGVhbnVwKCk7XG5cdCAgICAgICAgaWYgKCFzZWxmLnBlbmRpbmdSZW1vdmFscyAmJiBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IpIHtcblx0ICAgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxDYigpO1xuXHQgICAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbENiID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIGlmIChjYikge1xuXHQgICAgICBjYigpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEFjdHVhbGx5IHN3YXAgdGhlIGNvbXBvbmVudHMsIGRlcGVuZGluZyBvbiB0aGVcblx0ICAgKiB0cmFuc2l0aW9uIG1vZGUuIERlZmF1bHRzIHRvIHNpbXVsdGFuZW91cy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIHRyYW5zaXRpb246IGZ1bmN0aW9uIHRyYW5zaXRpb24odGFyZ2V0LCBjYikge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGN1cnJlbnQgPSB0aGlzLmNoaWxkVk07XG5cdCAgICAvLyBmb3IgZGV2dG9vbCBpbnNwZWN0aW9uXG5cdCAgICBpZiAoY3VycmVudCkgY3VycmVudC5faW5hY3RpdmUgPSB0cnVlO1xuXHQgICAgdGFyZ2V0Ll9pbmFjdGl2ZSA9IGZhbHNlO1xuXHQgICAgdGhpcy5jaGlsZFZNID0gdGFyZ2V0O1xuXHQgICAgc3dpdGNoIChzZWxmLnBhcmFtcy50cmFuc2l0aW9uTW9kZSkge1xuXHQgICAgICBjYXNlICdpbi1vdXQnOlxuXHQgICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50LCBjYik7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ291dC1pbic6XG5cdCAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGNiKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgZGVmYXVsdDpcblx0ICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50KTtcblx0ICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgY2IpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFVuYmluZC5cblx0ICAgKi9cblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB0aGlzLmludmFsaWRhdGVQZW5kaW5nKCk7XG5cdCAgICAvLyBEbyBub3QgZGVmZXIgY2xlYW51cCB3aGVuIHVuYmluZGluZ1xuXHQgICAgdGhpcy51bmJ1aWxkKCk7XG5cdCAgICAvLyBkZXN0cm95IGFsbCBrZWVwLWFsaXZlIGNhY2hlZCBpbnN0YW5jZXNcblx0ICAgIGlmICh0aGlzLmNhY2hlKSB7XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmNhY2hlKSB7XG5cdCAgICAgICAgdGhpcy5jYWNoZVtrZXldLiRkZXN0cm95KCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5jYWNoZSA9IG51bGw7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENhbGwgYWN0aXZhdGUgaG9va3MgaW4gb3JkZXIgKGFzeW5jaHJvbm91cylcblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gaG9va3Ncblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2FsbEFjdGl2YXRlSG9va3MoaG9va3MsIHZtLCBjYikge1xuXHQgIHZhciB0b3RhbCA9IGhvb2tzLmxlbmd0aDtcblx0ICB2YXIgY2FsbGVkID0gMDtcblx0ICBob29rc1swXS5jYWxsKHZtLCBuZXh0KTtcblx0ICBmdW5jdGlvbiBuZXh0KCkge1xuXHQgICAgaWYgKCsrY2FsbGVkID49IHRvdGFsKSB7XG5cdCAgICAgIGNiKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBob29rc1tjYWxsZWRdLmNhbGwodm0sIG5leHQpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIHByb3BCaW5kaW5nTW9kZXMgPSBjb25maWcuX3Byb3BCaW5kaW5nTW9kZXM7XG5cdHZhciBlbXB0eSA9IHt9O1xuXHRcblx0Ly8gcmVnZXhlc1xuXHR2YXIgaWRlbnRSRSQxID0gL15bJF9hLXpBLVpdK1tcXHckXSokLztcblx0dmFyIHNldHRhYmxlUGF0aFJFID0gL15bQS1aYS16XyRdW1xcdyRdKihcXC5bQS1aYS16XyRdW1xcdyRdKnxcXFtbXlxcW1xcXV0rXFxdKSokLztcblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIHByb3BzIG9uIGEgcm9vdCBlbGVtZW50IGFuZCByZXR1cm5cblx0ICogYSBwcm9wcyBsaW5rIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcblx0ICogQHBhcmFtIHtBcnJheX0gcHJvcE9wdGlvbnNcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSBwcm9wc0xpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVQcm9wcyhlbCwgcHJvcE9wdGlvbnMsIHZtKSB7XG5cdCAgdmFyIHByb3BzID0gW107XG5cdCAgdmFyIG5hbWVzID0gT2JqZWN0LmtleXMocHJvcE9wdGlvbnMpO1xuXHQgIHZhciBpID0gbmFtZXMubGVuZ3RoO1xuXHQgIHZhciBvcHRpb25zLCBuYW1lLCBhdHRyLCB2YWx1ZSwgcGF0aCwgcGFyc2VkLCBwcm9wO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIG5hbWUgPSBuYW1lc1tpXTtcblx0ICAgIG9wdGlvbnMgPSBwcm9wT3B0aW9uc1tuYW1lXSB8fCBlbXB0eTtcblx0XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBuYW1lID09PSAnJGRhdGEnKSB7XG5cdCAgICAgIHdhcm4oJ0RvIG5vdCB1c2UgJGRhdGEgYXMgcHJvcC4nLCB2bSk7XG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHByb3BzIGNvdWxkIGNvbnRhaW4gZGFzaGVzLCB3aGljaCB3aWxsIGJlXG5cdCAgICAvLyBpbnRlcnByZXRlZCBhcyBtaW51cyBjYWxjdWxhdGlvbnMgYnkgdGhlIHBhcnNlclxuXHQgICAgLy8gc28gd2UgbmVlZCB0byBjYW1lbGl6ZSB0aGUgcGF0aCBoZXJlXG5cdCAgICBwYXRoID0gY2FtZWxpemUobmFtZSk7XG5cdCAgICBpZiAoIWlkZW50UkUkMS50ZXN0KHBhdGgpKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBwcm9wIGtleTogXCInICsgbmFtZSArICdcIi4gUHJvcCBrZXlzICcgKyAnbXVzdCBiZSB2YWxpZCBpZGVudGlmaWVycy4nLCB2bSk7XG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIHByb3AgPSB7XG5cdCAgICAgIG5hbWU6IG5hbWUsXG5cdCAgICAgIHBhdGg6IHBhdGgsXG5cdCAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG5cdCAgICAgIG1vZGU6IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWSxcblx0ICAgICAgcmF3OiBudWxsXG5cdCAgICB9O1xuXHRcblx0ICAgIGF0dHIgPSBoeXBoZW5hdGUobmFtZSk7XG5cdCAgICAvLyBmaXJzdCBjaGVjayBkeW5hbWljIHZlcnNpb25cblx0ICAgIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0cikpID09PSBudWxsKSB7XG5cdCAgICAgIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0ciArICcuc3luYycpKSAhPT0gbnVsbCkge1xuXHQgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWTtcblx0ICAgICAgfSBlbHNlIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0ciArICcub25jZScpKSAhPT0gbnVsbCkge1xuXHQgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuT05FX1RJTUU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuXHQgICAgICAvLyBoYXMgZHluYW1pYyBiaW5kaW5nIVxuXHQgICAgICBwcm9wLnJhdyA9IHZhbHVlO1xuXHQgICAgICBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG5cdCAgICAgIHZhbHVlID0gcGFyc2VkLmV4cHJlc3Npb247XG5cdCAgICAgIHByb3AuZmlsdGVycyA9IHBhcnNlZC5maWx0ZXJzO1xuXHQgICAgICAvLyBjaGVjayBiaW5kaW5nIHR5cGVcblx0ICAgICAgaWYgKGlzTGl0ZXJhbCh2YWx1ZSkgJiYgIXBhcnNlZC5maWx0ZXJzKSB7XG5cdCAgICAgICAgLy8gZm9yIGV4cHJlc3Npb25zIGNvbnRhaW5pbmcgbGl0ZXJhbCBudW1iZXJzIGFuZFxuXHQgICAgICAgIC8vIGJvb2xlYW5zLCB0aGVyZSdzIG5vIG5lZWQgdG8gc2V0dXAgYSBwcm9wIGJpbmRpbmcsXG5cdCAgICAgICAgLy8gc28gd2UgY2FuIG9wdGltaXplIHRoZW0gYXMgYSBvbmUtdGltZSBzZXQuXG5cdCAgICAgICAgcHJvcC5vcHRpbWl6ZWRMaXRlcmFsID0gdHJ1ZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwcm9wLmR5bmFtaWMgPSB0cnVlO1xuXHQgICAgICAgIC8vIGNoZWNrIG5vbi1zZXR0YWJsZSBwYXRoIGZvciB0d28td2F5IGJpbmRpbmdzXG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgcHJvcC5tb2RlID09PSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVkgJiYgIXNldHRhYmxlUGF0aFJFLnRlc3QodmFsdWUpKSB7XG5cdCAgICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLk9ORV9XQVk7XG5cdCAgICAgICAgICB3YXJuKCdDYW5ub3QgYmluZCB0d28td2F5IHByb3Agd2l0aCBub24tc2V0dGFibGUgJyArICdwYXJlbnQgcGF0aDogJyArIHZhbHVlLCB2bSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHByb3AucGFyZW50UGF0aCA9IHZhbHVlO1xuXHRcblx0ICAgICAgLy8gd2FybiByZXF1aXJlZCB0d28td2F5XG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG9wdGlvbnMudHdvV2F5ICYmIHByb3AubW9kZSAhPT0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZKSB7XG5cdCAgICAgICAgd2FybignUHJvcCBcIicgKyBuYW1lICsgJ1wiIGV4cGVjdHMgYSB0d28td2F5IGJpbmRpbmcgdHlwZS4nLCB2bSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoKHZhbHVlID0gZ2V0QXR0cihlbCwgYXR0cikpICE9PSBudWxsKSB7XG5cdCAgICAgIC8vIGhhcyBsaXRlcmFsIGJpbmRpbmchXG5cdCAgICAgIHByb3AucmF3ID0gdmFsdWU7XG5cdCAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgLy8gY2hlY2sgcG9zc2libGUgY2FtZWxDYXNlIHByb3AgdXNhZ2Vcblx0ICAgICAgdmFyIGxvd2VyQ2FzZU5hbWUgPSBwYXRoLnRvTG93ZXJDYXNlKCk7XG5cdCAgICAgIHZhbHVlID0gL1tBLVpcXC1dLy50ZXN0KG5hbWUpICYmIChlbC5nZXRBdHRyaWJ1dGUobG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSArICcub25jZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lICsgJy5vbmNlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLnN5bmMnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSArICcuc3luYycpKTtcblx0ICAgICAgaWYgKHZhbHVlKSB7XG5cdCAgICAgICAgd2FybignUG9zc2libGUgdXNhZ2UgZXJyb3IgZm9yIHByb3AgYCcgKyBsb3dlckNhc2VOYW1lICsgJ2AgLSAnICsgJ2RpZCB5b3UgbWVhbiBgJyArIGF0dHIgKyAnYD8gSFRNTCBpcyBjYXNlLWluc2Vuc2l0aXZlLCByZW1lbWJlciB0byB1c2UgJyArICdrZWJhYi1jYXNlIGZvciBwcm9wcyBpbiB0ZW1wbGF0ZXMuJywgdm0pO1xuXHQgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucmVxdWlyZWQpIHtcblx0ICAgICAgICAvLyB3YXJuIG1pc3NpbmcgcmVxdWlyZWRcblx0ICAgICAgICB3YXJuKCdNaXNzaW5nIHJlcXVpcmVkIHByb3A6ICcgKyBuYW1lLCB2bSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIHB1c2ggcHJvcFxuXHQgICAgcHJvcHMucHVzaChwcm9wKTtcblx0ICB9XG5cdCAgcmV0dXJuIG1ha2VQcm9wc0xpbmtGbihwcm9wcyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBCdWlsZCBhIGZ1bmN0aW9uIHRoYXQgYXBwbGllcyBwcm9wcyB0byBhIHZtLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBwcm9wc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gcHJvcHNMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlUHJvcHNMaW5rRm4ocHJvcHMpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gcHJvcHNMaW5rRm4odm0sIHNjb3BlKSB7XG5cdCAgICAvLyBzdG9yZSByZXNvbHZlZCBwcm9wcyBpbmZvXG5cdCAgICB2bS5fcHJvcHMgPSB7fTtcblx0ICAgIHZhciBpbmxpbmVQcm9wcyA9IHZtLiRvcHRpb25zLnByb3BzRGF0YTtcblx0ICAgIHZhciBpID0gcHJvcHMubGVuZ3RoO1xuXHQgICAgdmFyIHByb3AsIHBhdGgsIG9wdGlvbnMsIHZhbHVlLCByYXc7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHByb3AgPSBwcm9wc1tpXTtcblx0ICAgICAgcmF3ID0gcHJvcC5yYXc7XG5cdCAgICAgIHBhdGggPSBwcm9wLnBhdGg7XG5cdCAgICAgIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG5cdCAgICAgIHZtLl9wcm9wc1twYXRoXSA9IHByb3A7XG5cdCAgICAgIGlmIChpbmxpbmVQcm9wcyAmJiBoYXNPd24oaW5saW5lUHJvcHMsIHBhdGgpKSB7XG5cdCAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIGlubGluZVByb3BzW3BhdGhdKTtcblx0ICAgICAgfWlmIChyYXcgPT09IG51bGwpIHtcblx0ICAgICAgICAvLyBpbml0aWFsaXplIGFic2VudCBwcm9wXG5cdCAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHVuZGVmaW5lZCk7XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvcC5keW5hbWljKSB7XG5cdCAgICAgICAgLy8gZHluYW1pYyBwcm9wXG5cdCAgICAgICAgaWYgKHByb3AubW9kZSA9PT0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfVElNRSkge1xuXHQgICAgICAgICAgLy8gb25lIHRpbWUgYmluZGluZ1xuXHQgICAgICAgICAgdmFsdWUgPSAoc2NvcGUgfHwgdm0uX2NvbnRleHQgfHwgdm0pLiRnZXQocHJvcC5wYXJlbnRQYXRoKTtcblx0ICAgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGlmICh2bS5fY29udGV4dCkge1xuXHQgICAgICAgICAgICAvLyBkeW5hbWljIGJpbmRpbmdcblx0ICAgICAgICAgICAgdm0uX2JpbmREaXIoe1xuXHQgICAgICAgICAgICAgIG5hbWU6ICdwcm9wJyxcblx0ICAgICAgICAgICAgICBkZWY6IHByb3BEZWYsXG5cdCAgICAgICAgICAgICAgcHJvcDogcHJvcFxuXHQgICAgICAgICAgICB9LCBudWxsLCBudWxsLCBzY29wZSk7IC8vIGVsLCBob3N0LCBzY29wZVxuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAvLyByb290IGluc3RhbmNlXG5cdCAgICAgICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZtLiRnZXQocHJvcC5wYXJlbnRQYXRoKSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvcC5vcHRpbWl6ZWRMaXRlcmFsKSB7XG5cdCAgICAgICAgLy8gb3B0aW1pemVkIGxpdGVyYWwsIGNhc3QgaXQgYW5kIGp1c3Qgc2V0IG9uY2Vcblx0ICAgICAgICB2YXIgc3RyaXBwZWQgPSBzdHJpcFF1b3RlcyhyYXcpO1xuXHQgICAgICAgIHZhbHVlID0gc3RyaXBwZWQgPT09IHJhdyA/IHRvQm9vbGVhbih0b051bWJlcihyYXcpKSA6IHN0cmlwcGVkO1xuXHQgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gc3RyaW5nIGxpdGVyYWwsIGJ1dCB3ZSBuZWVkIHRvIGNhdGVyIGZvclxuXHQgICAgICAgIC8vIEJvb2xlYW4gcHJvcHMgd2l0aCBubyB2YWx1ZSwgb3Igd2l0aCBzYW1lXG5cdCAgICAgICAgLy8gbGl0ZXJhbCB2YWx1ZSAoZS5nLiBkaXNhYmxlZD1cImRpc2FibGVkXCIpXG5cdCAgICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtbG9hZGVyL2lzc3Vlcy8xODJcblx0ICAgICAgICB2YWx1ZSA9IG9wdGlvbnMudHlwZSA9PT0gQm9vbGVhbiAmJiAocmF3ID09PSAnJyB8fCByYXcgPT09IGh5cGhlbmF0ZShwcm9wLm5hbWUpKSA/IHRydWUgOiByYXc7XG5cdCAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcm9jZXNzIGEgcHJvcCB3aXRoIGEgcmF3VmFsdWUsIGFwcGx5aW5nIG5lY2Vzc2FyeSBjb2Vyc2lvbnMsXG5cdCAqIGRlZmF1bHQgdmFsdWVzICYgYXNzZXJ0aW9ucyBhbmQgY2FsbCB0aGUgZ2l2ZW4gY2FsbGJhY2sgd2l0aFxuXHQgKiBwcm9jZXNzZWQgdmFsdWUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuXHQgKiBAcGFyYW0geyp9IHJhd1ZhbHVlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgcmF3VmFsdWUsIGZuKSB7XG5cdCAgdmFyIGlzU2ltcGxlID0gcHJvcC5keW5hbWljICYmIGlzU2ltcGxlUGF0aChwcm9wLnBhcmVudFBhdGgpO1xuXHQgIHZhciB2YWx1ZSA9IHJhd1ZhbHVlO1xuXHQgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICB2YWx1ZSA9IGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3ApO1xuXHQgIH1cblx0ICB2YWx1ZSA9IGNvZXJjZVByb3AocHJvcCwgdmFsdWUsIHZtKTtcblx0ICB2YXIgY29lcmNlZCA9IHZhbHVlICE9PSByYXdWYWx1ZTtcblx0ICBpZiAoIWFzc2VydFByb3AocHJvcCwgdmFsdWUsIHZtKSkge1xuXHQgICAgdmFsdWUgPSB1bmRlZmluZWQ7XG5cdCAgfVxuXHQgIGlmIChpc1NpbXBsZSAmJiAhY29lcmNlZCkge1xuXHQgICAgd2l0aG91dENvbnZlcnNpb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICBmbih2YWx1ZSk7XG5cdCAgICB9KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgZm4odmFsdWUpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFNldCBhIHByb3AncyBpbml0aWFsIHZhbHVlIG9uIGEgdm0gYW5kIGl0cyBkYXRhIG9iamVjdC5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpIHtcblx0ICBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCB2YWx1ZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICBkZWZpbmVSZWFjdGl2ZSh2bSwgcHJvcC5wYXRoLCB2YWx1ZSk7XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBVcGRhdGUgYSBwcm9wJ3MgdmFsdWUgb24gYSB2bS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVQcm9wKHZtLCBwcm9wLCB2YWx1ZSkge1xuXHQgIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHZhbHVlLCBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgIHZtW3Byb3AucGF0aF0gPSB2YWx1ZTtcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHByb3AuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuXHQgKiBAcmV0dXJuIHsqfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3ApIHtcblx0ICAvLyBubyBkZWZhdWx0LCByZXR1cm4gdW5kZWZpbmVkXG5cdCAgdmFyIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG5cdCAgaWYgKCFoYXNPd24ob3B0aW9ucywgJ2RlZmF1bHQnKSkge1xuXHQgICAgLy8gYWJzZW50IGJvb2xlYW4gdmFsdWUgZGVmYXVsdHMgdG8gZmFsc2Vcblx0ICAgIHJldHVybiBvcHRpb25zLnR5cGUgPT09IEJvb2xlYW4gPyBmYWxzZSA6IHVuZGVmaW5lZDtcblx0ICB9XG5cdCAgdmFyIGRlZiA9IG9wdGlvbnNbJ2RlZmF1bHQnXTtcblx0ICAvLyB3YXJuIGFnYWluc3Qgbm9uLWZhY3RvcnkgZGVmYXVsdHMgZm9yIE9iamVjdCAmIEFycmF5XG5cdCAgaWYgKGlzT2JqZWN0KGRlZikpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBkZWZhdWx0IHZhbHVlIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIjogJyArICdQcm9wcyB3aXRoIHR5cGUgT2JqZWN0L0FycmF5IG11c3QgdXNlIGEgZmFjdG9yeSBmdW5jdGlvbiAnICsgJ3RvIHJldHVybiB0aGUgZGVmYXVsdCB2YWx1ZS4nLCB2bSk7XG5cdCAgfVxuXHQgIC8vIGNhbGwgZmFjdG9yeSBmdW5jdGlvbiBmb3Igbm9uLUZ1bmN0aW9uIHR5cGVzXG5cdCAgcmV0dXJuIHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicgJiYgb3B0aW9ucy50eXBlICE9PSBGdW5jdGlvbiA/IGRlZi5jYWxsKHZtKSA6IGRlZjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFzc2VydCB3aGV0aGVyIGEgcHJvcCBpcyB2YWxpZC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3Bcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhc3NlcnRQcm9wKHByb3AsIHZhbHVlLCB2bSkge1xuXHQgIGlmICghcHJvcC5vcHRpb25zLnJlcXVpcmVkICYmICggLy8gbm9uLXJlcXVpcmVkXG5cdCAgcHJvcC5yYXcgPT09IG51bGwgfHwgLy8gYWJzY2VudFxuXHQgIHZhbHVlID09IG51bGwpIC8vIG51bGwgb3IgdW5kZWZpbmVkXG5cdCAgKSB7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfVxuXHQgIHZhciBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xuXHQgIHZhciB0eXBlID0gb3B0aW9ucy50eXBlO1xuXHQgIHZhciB2YWxpZCA9ICF0eXBlO1xuXHQgIHZhciBleHBlY3RlZFR5cGVzID0gW107XG5cdCAgaWYgKHR5cGUpIHtcblx0ICAgIGlmICghaXNBcnJheSh0eXBlKSkge1xuXHQgICAgICB0eXBlID0gW3R5cGVdO1xuXHQgICAgfVxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0eXBlLmxlbmd0aCAmJiAhdmFsaWQ7IGkrKykge1xuXHQgICAgICB2YXIgYXNzZXJ0ZWRUeXBlID0gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZVtpXSk7XG5cdCAgICAgIGV4cGVjdGVkVHlwZXMucHVzaChhc3NlcnRlZFR5cGUuZXhwZWN0ZWRUeXBlKTtcblx0ICAgICAgdmFsaWQgPSBhc3NlcnRlZFR5cGUudmFsaWQ7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmICghdmFsaWQpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIHdhcm4oJ0ludmFsaWQgcHJvcDogdHlwZSBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiLicgKyAnIEV4cGVjdGVkICcgKyBleHBlY3RlZFR5cGVzLm1hcChmb3JtYXRUeXBlKS5qb2luKCcsICcpICsgJywgZ290ICcgKyBmb3JtYXRWYWx1ZSh2YWx1ZSkgKyAnLicsIHZtKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgdmFyIHZhbGlkYXRvciA9IG9wdGlvbnMudmFsaWRhdG9yO1xuXHQgIGlmICh2YWxpZGF0b3IpIHtcblx0ICAgIGlmICghdmFsaWRhdG9yKHZhbHVlKSkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgcHJvcDogY3VzdG9tIHZhbGlkYXRvciBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiLicsIHZtKTtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcmNlIHBhcnNpbmcgdmFsdWUgd2l0aCBjb2VyY2Ugb3B0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4geyp9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29lcmNlUHJvcChwcm9wLCB2YWx1ZSwgdm0pIHtcblx0ICB2YXIgY29lcmNlID0gcHJvcC5vcHRpb25zLmNvZXJjZTtcblx0ICBpZiAoIWNvZXJjZSkge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIGNvZXJjZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgcmV0dXJuIGNvZXJjZSh2YWx1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBjb2VyY2UgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiOiBleHBlY3RlZCBmdW5jdGlvbiwgZ290ICcgKyB0eXBlb2YgY29lcmNlICsgJy4nLCB2bSk7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQXNzZXJ0IHRoZSB0eXBlIG9mIGEgdmFsdWVcblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0eXBlXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlKSB7XG5cdCAgdmFyIHZhbGlkO1xuXHQgIHZhciBleHBlY3RlZFR5cGU7XG5cdCAgaWYgKHR5cGUgPT09IFN0cmluZykge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ3N0cmluZyc7XG5cdCAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gTnVtYmVyKSB7XG5cdCAgICBleHBlY3RlZFR5cGUgPSAnbnVtYmVyJztcblx0ICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSBCb29sZWFuKSB7XG5cdCAgICBleHBlY3RlZFR5cGUgPSAnYm9vbGVhbic7XG5cdCAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gRnVuY3Rpb24pIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdmdW5jdGlvbic7XG5cdCAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gT2JqZWN0KSB7XG5cdCAgICBleHBlY3RlZFR5cGUgPSAnb2JqZWN0Jztcblx0ICAgIHZhbGlkID0gaXNQbGFpbk9iamVjdCh2YWx1ZSk7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSBBcnJheSkge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ2FycmF5Jztcblx0ICAgIHZhbGlkID0gaXNBcnJheSh2YWx1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhbGlkID0gdmFsdWUgaW5zdGFuY2VvZiB0eXBlO1xuXHQgIH1cblx0ICByZXR1cm4ge1xuXHQgICAgdmFsaWQ6IHZhbGlkLFxuXHQgICAgZXhwZWN0ZWRUeXBlOiBleHBlY3RlZFR5cGVcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9ybWF0IHR5cGUgZm9yIG91dHB1dFxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZm9ybWF0VHlwZSh0eXBlKSB7XG5cdCAgcmV0dXJuIHR5cGUgPyB0eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdHlwZS5zbGljZSgxKSA6ICdjdXN0b20gdHlwZSc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JtYXQgdmFsdWVcblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZm9ybWF0VmFsdWUodmFsKSB7XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpLnNsaWNlKDgsIC0xKTtcblx0fVxuXHRcblx0dmFyIGJpbmRpbmdNb2RlcyA9IGNvbmZpZy5fcHJvcEJpbmRpbmdNb2Rlcztcblx0XG5cdHZhciBwcm9wRGVmID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIGNoaWxkID0gdGhpcy52bTtcblx0ICAgIHZhciBwYXJlbnQgPSBjaGlsZC5fY29udGV4dDtcblx0ICAgIC8vIHBhc3NlZCBpbiBmcm9tIGNvbXBpbGVyIGRpcmVjdGx5XG5cdCAgICB2YXIgcHJvcCA9IHRoaXMuZGVzY3JpcHRvci5wcm9wO1xuXHQgICAgdmFyIGNoaWxkS2V5ID0gcHJvcC5wYXRoO1xuXHQgICAgdmFyIHBhcmVudEtleSA9IHByb3AucGFyZW50UGF0aDtcblx0ICAgIHZhciB0d29XYXkgPSBwcm9wLm1vZGUgPT09IGJpbmRpbmdNb2Rlcy5UV09fV0FZO1xuXHRcblx0ICAgIHZhciBwYXJlbnRXYXRjaGVyID0gdGhpcy5wYXJlbnRXYXRjaGVyID0gbmV3IFdhdGNoZXIocGFyZW50LCBwYXJlbnRLZXksIGZ1bmN0aW9uICh2YWwpIHtcblx0ICAgICAgdXBkYXRlUHJvcChjaGlsZCwgcHJvcCwgdmFsKTtcblx0ICAgIH0sIHtcblx0ICAgICAgdHdvV2F5OiB0d29XYXksXG5cdCAgICAgIGZpbHRlcnM6IHByb3AuZmlsdGVycyxcblx0ICAgICAgLy8gaW1wb3J0YW50OiBwcm9wcyBuZWVkIHRvIGJlIG9ic2VydmVkIG9uIHRoZVxuXHQgICAgICAvLyB2LWZvciBzY29wZSBpZiBwcmVzZW50XG5cdCAgICAgIHNjb3BlOiB0aGlzLl9zY29wZVxuXHQgICAgfSk7XG5cdFxuXHQgICAgLy8gc2V0IHRoZSBjaGlsZCBpbml0aWFsIHZhbHVlLlxuXHQgICAgaW5pdFByb3AoY2hpbGQsIHByb3AsIHBhcmVudFdhdGNoZXIudmFsdWUpO1xuXHRcblx0ICAgIC8vIHNldHVwIHR3by13YXkgYmluZGluZ1xuXHQgICAgaWYgKHR3b1dheSkge1xuXHQgICAgICAvLyBpbXBvcnRhbnQ6IGRlZmVyIHRoZSBjaGlsZCB3YXRjaGVyIGNyZWF0aW9uIHVudGlsXG5cdCAgICAgIC8vIHRoZSBjcmVhdGVkIGhvb2sgKGFmdGVyIGRhdGEgb2JzZXJ2YXRpb24pXG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgY2hpbGQuJG9uY2UoJ3ByZS1ob29rOmNyZWF0ZWQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgc2VsZi5jaGlsZFdhdGNoZXIgPSBuZXcgV2F0Y2hlcihjaGlsZCwgY2hpbGRLZXksIGZ1bmN0aW9uICh2YWwpIHtcblx0ICAgICAgICAgIHBhcmVudFdhdGNoZXIuc2V0KHZhbCk7XG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgLy8gZW5zdXJlIHN5bmMgdXB3YXJkIGJlZm9yZSBwYXJlbnQgc3luYyBkb3duLlxuXHQgICAgICAgICAgLy8gdGhpcyBpcyBuZWNlc3NhcnkgaW4gY2FzZXMgZS5nLiB0aGUgY2hpbGRcblx0ICAgICAgICAgIC8vIG11dGF0ZXMgYSBwcm9wIGFycmF5LCB0aGVuIHJlcGxhY2VzIGl0LiAoIzE2ODMpXG5cdCAgICAgICAgICBzeW5jOiB0cnVlXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdGhpcy5wYXJlbnRXYXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgICBpZiAodGhpcy5jaGlsZFdhdGNoZXIpIHtcblx0ICAgICAgdGhpcy5jaGlsZFdhdGNoZXIudGVhcmRvd24oKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcXVldWUkMSA9IFtdO1xuXHR2YXIgcXVldWVkID0gZmFsc2U7XG5cdFxuXHQvKipcblx0ICogUHVzaCBhIGpvYiBpbnRvIHRoZSBxdWV1ZS5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gam9iXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHVzaEpvYihqb2IpIHtcblx0ICBxdWV1ZSQxLnB1c2goam9iKTtcblx0ICBpZiAoIXF1ZXVlZCkge1xuXHQgICAgcXVldWVkID0gdHJ1ZTtcblx0ICAgIG5leHRUaWNrKGZsdXNoKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGbHVzaCB0aGUgcXVldWUsIGFuZCBkbyBvbmUgZm9yY2VkIHJlZmxvdyBiZWZvcmVcblx0ICogdHJpZ2dlcmluZyB0cmFuc2l0aW9ucy5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmbHVzaCgpIHtcblx0ICAvLyBGb3JjZSBsYXlvdXRcblx0ICB2YXIgZiA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQ7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZSQxLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBxdWV1ZSQxW2ldKCk7XG5cdCAgfVxuXHQgIHF1ZXVlJDEgPSBbXTtcblx0ICBxdWV1ZWQgPSBmYWxzZTtcblx0ICAvLyBkdW1teSByZXR1cm4sIHNvIGpzIGxpbnRlcnMgZG9uJ3QgY29tcGxhaW4gYWJvdXRcblx0ICAvLyB1bnVzZWQgdmFyaWFibGUgZlxuXHQgIHJldHVybiBmO1xuXHR9XG5cdFxuXHR2YXIgVFlQRV9UUkFOU0lUSU9OID0gJ3RyYW5zaXRpb24nO1xuXHR2YXIgVFlQRV9BTklNQVRJT04gPSAnYW5pbWF0aW9uJztcblx0dmFyIHRyYW5zRHVyYXRpb25Qcm9wID0gdHJhbnNpdGlvblByb3AgKyAnRHVyYXRpb24nO1xuXHR2YXIgYW5pbUR1cmF0aW9uUHJvcCA9IGFuaW1hdGlvblByb3AgKyAnRHVyYXRpb24nO1xuXHRcblx0LyoqXG5cdCAqIElmIGEganVzdC1lbnRlcmVkIGVsZW1lbnQgaXMgYXBwbGllZCB0aGVcblx0ICogbGVhdmUgY2xhc3Mgd2hpbGUgaXRzIGVudGVyIHRyYW5zaXRpb24gaGFzbid0IHN0YXJ0ZWQgeWV0LFxuXHQgKiBhbmQgdGhlIHRyYW5zaXRpb25lZCBwcm9wZXJ0eSBoYXMgdGhlIHNhbWUgdmFsdWUgZm9yIGJvdGhcblx0ICogZW50ZXIvbGVhdmUsIHRoZW4gdGhlIGxlYXZlIHRyYW5zaXRpb24gd2lsbCBiZSBza2lwcGVkIGFuZFxuXHQgKiB0aGUgdHJhbnNpdGlvbmVuZCBldmVudCBuZXZlciBmaXJlcy4gVGhpcyBmdW5jdGlvbiBlbnN1cmVzXG5cdCAqIGl0cyBjYWxsYmFjayB0byBiZSBjYWxsZWQgYWZ0ZXIgYSB0cmFuc2l0aW9uIGhhcyBzdGFydGVkXG5cdCAqIGJ5IHdhaXRpbmcgZm9yIGRvdWJsZSByYWYuXG5cdCAqXG5cdCAqIEl0IGZhbGxzIGJhY2sgdG8gc2V0VGltZW91dCBvbiBkZXZpY2VzIHRoYXQgc3VwcG9ydCBDU1Ncblx0ICogdHJhbnNpdGlvbnMgYnV0IG5vdCByYWYgKGUuZy4gQW5kcm9pZCA0LjIgYnJvd3NlcikgLSBzaW5jZVxuXHQgKiB0aGVzZSBlbnZpcm9ubWVudHMgYXJlIHVzdWFsbHkgc2xvdywgd2UgYXJlIGdpdmluZyBpdCBhXG5cdCAqIHJlbGF0aXZlbHkgbGFyZ2UgdGltZW91dC5cblx0ICovXG5cdFxuXHR2YXIgcmFmID0gaW5Ccm93c2VyICYmIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG5cdHZhciB3YWl0Rm9yVHJhbnNpdGlvblN0YXJ0ID0gcmFmXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdD8gZnVuY3Rpb24gKGZuKSB7XG5cdCAgcmFmKGZ1bmN0aW9uICgpIHtcblx0ICAgIHJhZihmbik7XG5cdCAgfSk7XG5cdH0gOiBmdW5jdGlvbiAoZm4pIHtcblx0ICBzZXRUaW1lb3V0KGZuLCA1MCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQSBUcmFuc2l0aW9uIG9iamVjdCB0aGF0IGVuY2Fwc3VsYXRlcyB0aGUgc3RhdGUgYW5kIGxvZ2ljXG5cdCAqIG9mIHRoZSB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuXHQgKiBAcGFyYW0ge09iamVjdH0gaG9va3Ncblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRmdW5jdGlvbiBUcmFuc2l0aW9uKGVsLCBpZCwgaG9va3MsIHZtKSB7XG5cdCAgdGhpcy5pZCA9IGlkO1xuXHQgIHRoaXMuZWwgPSBlbDtcblx0ICB0aGlzLmVudGVyQ2xhc3MgPSBob29rcyAmJiBob29rcy5lbnRlckNsYXNzIHx8IGlkICsgJy1lbnRlcic7XG5cdCAgdGhpcy5sZWF2ZUNsYXNzID0gaG9va3MgJiYgaG9va3MubGVhdmVDbGFzcyB8fCBpZCArICctbGVhdmUnO1xuXHQgIHRoaXMuaG9va3MgPSBob29rcztcblx0ICB0aGlzLnZtID0gdm07XG5cdCAgLy8gYXN5bmMgc3RhdGVcblx0ICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gdGhpcy5vcCA9IHRoaXMuY2IgPSBudWxsO1xuXHQgIHRoaXMuanVzdEVudGVyZWQgPSBmYWxzZTtcblx0ICB0aGlzLmVudGVyZWQgPSB0aGlzLmxlZnQgPSBmYWxzZTtcblx0ICB0aGlzLnR5cGVDYWNoZSA9IHt9O1xuXHQgIC8vIGNoZWNrIGNzcyB0cmFuc2l0aW9uIHR5cGVcblx0ICB0aGlzLnR5cGUgPSBob29rcyAmJiBob29rcy50eXBlO1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBpZiAodGhpcy50eXBlICYmIHRoaXMudHlwZSAhPT0gVFlQRV9UUkFOU0lUSU9OICYmIHRoaXMudHlwZSAhPT0gVFlQRV9BTklNQVRJT04pIHtcblx0ICAgICAgd2FybignaW52YWxpZCBDU1MgdHJhbnNpdGlvbiB0eXBlIGZvciB0cmFuc2l0aW9uPVwiJyArIHRoaXMuaWQgKyAnXCI6ICcgKyB0aGlzLnR5cGUsIHZtKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gYmluZFxuXHQgIHZhciBzZWxmID0gdGhpcztbJ2VudGVyTmV4dFRpY2snLCAnZW50ZXJEb25lJywgJ2xlYXZlTmV4dFRpY2snLCAnbGVhdmVEb25lJ10uZm9yRWFjaChmdW5jdGlvbiAobSkge1xuXHQgICAgc2VsZlttXSA9IGJpbmQoc2VsZlttXSwgc2VsZik7XG5cdCAgfSk7XG5cdH1cblx0XG5cdHZhciBwJDEgPSBUcmFuc2l0aW9uLnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBTdGFydCBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiAxLiBlbnRlciB0cmFuc2l0aW9uIHRyaWdnZXJlZFxuXHQgKiAyLiBjYWxsIGJlZm9yZUVudGVyIGhvb2tcblx0ICogMy4gYWRkIGVudGVyIGNsYXNzXG5cdCAqIDQuIGluc2VydC9zaG93IGVsZW1lbnRcblx0ICogNS4gY2FsbCBlbnRlciBob29rICh3aXRoIHBvc3NpYmxlIGV4cGxpY2l0IGpzIGNhbGxiYWNrKVxuXHQgKiA2LiByZWZsb3dcblx0ICogNy4gYmFzZWQgb24gdHJhbnNpdGlvbiB0eXBlOlxuXHQgKiAgICAtIHRyYW5zaXRpb246XG5cdCAqICAgICAgICByZW1vdmUgY2xhc3Mgbm93LCB3YWl0IGZvciB0cmFuc2l0aW9uZW5kLFxuXHQgKiAgICAgICAgdGhlbiBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG5cdCAqICAgIC0gYW5pbWF0aW9uOlxuXHQgKiAgICAgICAgd2FpdCBmb3IgYW5pbWF0aW9uZW5kLCByZW1vdmUgY2xhc3MsXG5cdCAqICAgICAgICB0aGVuIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cblx0ICogICAgLSBubyBjc3MgdHJhbnNpdGlvbjpcblx0ICogICAgICAgIGRvbmUgbm93IGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG5cdCAqIDguIHdhaXQgZm9yIGVpdGhlciBkb25lIG9yIGpzIGNhbGxiYWNrLCB0aGVuIGNhbGxcblx0ICogICAgYWZ0ZXJFbnRlciBob29rLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIGluc2VydC9zaG93IHRoZSBlbGVtZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRwJDEuZW50ZXIgPSBmdW5jdGlvbiAob3AsIGNiKSB7XG5cdCAgdGhpcy5jYW5jZWxQZW5kaW5nKCk7XG5cdCAgdGhpcy5jYWxsSG9vaygnYmVmb3JlRW50ZXInKTtcblx0ICB0aGlzLmNiID0gY2I7XG5cdCAgYWRkQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcblx0ICBvcCgpO1xuXHQgIHRoaXMuZW50ZXJlZCA9IGZhbHNlO1xuXHQgIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2VudGVyJyk7XG5cdCAgaWYgKHRoaXMuZW50ZXJlZCkge1xuXHQgICAgcmV0dXJuOyAvLyB1c2VyIGNhbGxlZCBkb25lIHN5bmNocm9ub3VzbHkuXG5cdCAgfVxuXHQgIHRoaXMuY2FuY2VsID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmVudGVyQ2FuY2VsbGVkO1xuXHQgIHB1c2hKb2IodGhpcy5lbnRlck5leHRUaWNrKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgXCJuZXh0VGlja1wiIHBoYXNlIG9mIGFuIGVudGVyaW5nIHRyYW5zaXRpb24sIHdoaWNoIGlzXG5cdCAqIHRvIGJlIHB1c2hlZCBpbnRvIGEgcXVldWUgYW5kIGV4ZWN1dGVkIGFmdGVyIGEgcmVmbG93IHNvXG5cdCAqIHRoYXQgcmVtb3ZpbmcgdGhlIGNsYXNzIGNhbiB0cmlnZ2VyIGEgQ1NTIHRyYW5zaXRpb24uXG5cdCAqL1xuXHRcblx0cCQxLmVudGVyTmV4dFRpY2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgLy8gcHJldmVudCB0cmFuc2l0aW9uIHNraXBwaW5nXG5cdCAgdGhpcy5qdXN0RW50ZXJlZCA9IHRydWU7XG5cdCAgd2FpdEZvclRyYW5zaXRpb25TdGFydChmdW5jdGlvbiAoKSB7XG5cdCAgICBfdGhpcy5qdXN0RW50ZXJlZCA9IGZhbHNlO1xuXHQgIH0pO1xuXHQgIHZhciBlbnRlckRvbmUgPSB0aGlzLmVudGVyRG9uZTtcblx0ICB2YXIgdHlwZSA9IHRoaXMuZ2V0Q3NzVHJhbnNpdGlvblR5cGUodGhpcy5lbnRlckNsYXNzKTtcblx0ICBpZiAoIXRoaXMucGVuZGluZ0pzQ2IpIHtcblx0ICAgIGlmICh0eXBlID09PSBUWVBFX1RSQU5TSVRJT04pIHtcblx0ICAgICAgLy8gdHJpZ2dlciB0cmFuc2l0aW9uIGJ5IHJlbW92aW5nIGVudGVyIGNsYXNzIG5vd1xuXHQgICAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuXHQgICAgICB0aGlzLnNldHVwQ3NzQ2IodHJhbnNpdGlvbkVuZEV2ZW50LCBlbnRlckRvbmUpO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlID09PSBUWVBFX0FOSU1BVElPTikge1xuXHQgICAgICB0aGlzLnNldHVwQ3NzQ2IoYW5pbWF0aW9uRW5kRXZlbnQsIGVudGVyRG9uZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbnRlckRvbmUoKTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTikge1xuXHQgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogVGhlIFwiY2xlYW51cFwiIHBoYXNlIG9mIGFuIGVudGVyaW5nIHRyYW5zaXRpb24uXG5cdCAqL1xuXHRcblx0cCQxLmVudGVyRG9uZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB0aGlzLmVudGVyZWQgPSB0cnVlO1xuXHQgIHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG5cdCAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcblx0ICB0aGlzLmNhbGxIb29rKCdhZnRlckVudGVyJyk7XG5cdCAgaWYgKHRoaXMuY2IpIHRoaXMuY2IoKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTdGFydCBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cblx0ICpcblx0ICogMS4gbGVhdmUgdHJhbnNpdGlvbiB0cmlnZ2VyZWQuXG5cdCAqIDIuIGNhbGwgYmVmb3JlTGVhdmUgaG9va1xuXHQgKiAzLiBhZGQgbGVhdmUgY2xhc3MgKHRyaWdnZXIgY3NzIHRyYW5zaXRpb24pXG5cdCAqIDQuIGNhbGwgbGVhdmUgaG9vayAod2l0aCBwb3NzaWJsZSBleHBsaWNpdCBqcyBjYWxsYmFjaylcblx0ICogNS4gcmVmbG93IGlmIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrIGlzIHByb3ZpZGVkXG5cdCAqIDYuIGJhc2VkIG9uIHRyYW5zaXRpb24gdHlwZTpcblx0ICogICAgLSB0cmFuc2l0aW9uIG9yIGFuaW1hdGlvbjpcblx0ICogICAgICAgIHdhaXQgZm9yIGVuZCBldmVudCwgcmVtb3ZlIGNsYXNzLCB0aGVuIGRvbmUgaWZcblx0ICogICAgICAgIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG5cdCAqICAgIC0gbm8gY3NzIHRyYW5zaXRpb246XG5cdCAqICAgICAgICBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG5cdCAqIDcuIHdhaXQgZm9yIGVpdGhlciBkb25lIG9yIGpzIGNhbGxiYWNrLCB0aGVuIGNhbGxcblx0ICogICAgYWZ0ZXJMZWF2ZSBob29rLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIHJlbW92ZS9oaWRlIHRoZSBlbGVtZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRwJDEubGVhdmUgPSBmdW5jdGlvbiAob3AsIGNiKSB7XG5cdCAgdGhpcy5jYW5jZWxQZW5kaW5nKCk7XG5cdCAgdGhpcy5jYWxsSG9vaygnYmVmb3JlTGVhdmUnKTtcblx0ICB0aGlzLm9wID0gb3A7XG5cdCAgdGhpcy5jYiA9IGNiO1xuXHQgIGFkZENsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG5cdCAgdGhpcy5sZWZ0ID0gZmFsc2U7XG5cdCAgdGhpcy5jYWxsSG9va1dpdGhDYignbGVhdmUnKTtcblx0ICBpZiAodGhpcy5sZWZ0KSB7XG5cdCAgICByZXR1cm47IC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cblx0ICB9XG5cdCAgdGhpcy5jYW5jZWwgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MubGVhdmVDYW5jZWxsZWQ7XG5cdCAgLy8gb25seSBuZWVkIHRvIGhhbmRsZSBsZWF2ZURvbmUgaWZcblx0ICAvLyAxLiB0aGUgdHJhbnNpdGlvbiBpcyBhbHJlYWR5IGRvbmUgKHN5bmNocm9ub3VzbHkgY2FsbGVkXG5cdCAgLy8gICAgYnkgdGhlIHVzZXIsIHdoaWNoIGNhdXNlcyB0aGlzLm9wIHNldCB0byBudWxsKVxuXHQgIC8vIDIuIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2tcblx0ICBpZiAodGhpcy5vcCAmJiAhdGhpcy5wZW5kaW5nSnNDYikge1xuXHQgICAgLy8gaWYgYSBDU1MgdHJhbnNpdGlvbiBsZWF2ZXMgaW1tZWRpYXRlbHkgYWZ0ZXIgZW50ZXIsXG5cdCAgICAvLyB0aGUgdHJhbnNpdGlvbmVuZCBldmVudCBuZXZlciBmaXJlcy4gdGhlcmVmb3JlIHdlXG5cdCAgICAvLyBkZXRlY3Qgc3VjaCBjYXNlcyBhbmQgZW5kIHRoZSBsZWF2ZSBpbW1lZGlhdGVseS5cblx0ICAgIGlmICh0aGlzLmp1c3RFbnRlcmVkKSB7XG5cdCAgICAgIHRoaXMubGVhdmVEb25lKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBwdXNoSm9iKHRoaXMubGVhdmVOZXh0VGljayk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFRoZSBcIm5leHRUaWNrXCIgcGhhc2Ugb2YgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG5cdCAqL1xuXHRcblx0cCQxLmxlYXZlTmV4dFRpY2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIHR5cGUgPSB0aGlzLmdldENzc1RyYW5zaXRpb25UeXBlKHRoaXMubGVhdmVDbGFzcyk7XG5cdCAgaWYgKHR5cGUpIHtcblx0ICAgIHZhciBldmVudCA9IHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTiA/IHRyYW5zaXRpb25FbmRFdmVudCA6IGFuaW1hdGlvbkVuZEV2ZW50O1xuXHQgICAgdGhpcy5zZXR1cENzc0NiKGV2ZW50LCB0aGlzLmxlYXZlRG9uZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRoaXMubGVhdmVEb25lKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFRoZSBcImNsZWFudXBcIiBwaGFzZSBvZiBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cblx0ICovXG5cdFxuXHRwJDEubGVhdmVEb25lID0gZnVuY3Rpb24gKCkge1xuXHQgIHRoaXMubGVmdCA9IHRydWU7XG5cdCAgdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcblx0ICB0aGlzLm9wKCk7XG5cdCAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcblx0ICB0aGlzLmNhbGxIb29rKCdhZnRlckxlYXZlJyk7XG5cdCAgaWYgKHRoaXMuY2IpIHRoaXMuY2IoKTtcblx0ICB0aGlzLm9wID0gbnVsbDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDYW5jZWwgYW55IHBlbmRpbmcgY2FsbGJhY2tzIGZyb20gYSBwcmV2aW91c2x5IHJ1bm5pbmdcblx0ICogYnV0IG5vdCBmaW5pc2hlZCB0cmFuc2l0aW9uLlxuXHQgKi9cblx0XG5cdHAkMS5jYW5jZWxQZW5kaW5nID0gZnVuY3Rpb24gKCkge1xuXHQgIHRoaXMub3AgPSB0aGlzLmNiID0gbnVsbDtcblx0ICB2YXIgaGFzUGVuZGluZyA9IGZhbHNlO1xuXHQgIGlmICh0aGlzLnBlbmRpbmdDc3NDYikge1xuXHQgICAgaGFzUGVuZGluZyA9IHRydWU7XG5cdCAgICBvZmYodGhpcy5lbCwgdGhpcy5wZW5kaW5nQ3NzRXZlbnQsIHRoaXMucGVuZGluZ0Nzc0NiKTtcblx0ICAgIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSBudWxsO1xuXHQgIH1cblx0ICBpZiAodGhpcy5wZW5kaW5nSnNDYikge1xuXHQgICAgaGFzUGVuZGluZyA9IHRydWU7XG5cdCAgICB0aGlzLnBlbmRpbmdKc0NiLmNhbmNlbCgpO1xuXHQgICAgdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG5cdCAgfVxuXHQgIGlmIChoYXNQZW5kaW5nKSB7XG5cdCAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuXHQgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcblx0ICB9XG5cdCAgaWYgKHRoaXMuY2FuY2VsKSB7XG5cdCAgICB0aGlzLmNhbmNlbC5jYWxsKHRoaXMudm0sIHRoaXMuZWwpO1xuXHQgICAgdGhpcy5jYW5jZWwgPSBudWxsO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDYWxsIGEgdXNlci1wcm92aWRlZCBzeW5jaHJvbm91cyBob29rIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHQgKi9cblx0XG5cdHAkMS5jYWxsSG9vayA9IGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgaWYgKHRoaXMuaG9va3MgJiYgdGhpcy5ob29rc1t0eXBlXSkge1xuXHQgICAgdGhpcy5ob29rc1t0eXBlXS5jYWxsKHRoaXMudm0sIHRoaXMuZWwpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDYWxsIGEgdXNlci1wcm92aWRlZCwgcG90ZW50aWFsbHktYXN5bmMgaG9vayBmdW5jdGlvbi5cblx0ICogV2UgY2hlY2sgZm9yIHRoZSBsZW5ndGggb2YgYXJndW1lbnRzIHRvIHNlZSBpZiB0aGUgaG9va1xuXHQgKiBleHBlY3RzIGEgYGRvbmVgIGNhbGxiYWNrLiBJZiB0cnVlLCB0aGUgdHJhbnNpdGlvbidzIGVuZFxuXHQgKiB3aWxsIGJlIGRldGVybWluZWQgYnkgd2hlbiB0aGUgdXNlciBjYWxscyB0aGF0IGNhbGxiYWNrO1xuXHQgKiBvdGhlcndpc2UsIHRoZSBlbmQgaXMgZGV0ZXJtaW5lZCBieSB0aGUgQ1NTIHRyYW5zaXRpb24gb3Jcblx0ICogYW5pbWF0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHQgKi9cblx0XG5cdHAkMS5jYWxsSG9va1dpdGhDYiA9IGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgdmFyIGhvb2sgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV07XG5cdCAgaWYgKGhvb2spIHtcblx0ICAgIGlmIChob29rLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgdGhpcy5wZW5kaW5nSnNDYiA9IGNhbmNlbGxhYmxlKHRoaXNbdHlwZSArICdEb25lJ10pO1xuXHQgICAgfVxuXHQgICAgaG9vay5jYWxsKHRoaXMudm0sIHRoaXMuZWwsIHRoaXMucGVuZGluZ0pzQ2IpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBHZXQgYW4gZWxlbWVudCdzIHRyYW5zaXRpb24gdHlwZSBiYXNlZCBvbiB0aGVcblx0ICogY2FsY3VsYXRlZCBzdHlsZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjbGFzc05hbWVcblx0ICogQHJldHVybiB7TnVtYmVyfVxuXHQgKi9cblx0XG5cdHAkMS5nZXRDc3NUcmFuc2l0aW9uVHlwZSA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoIXRyYW5zaXRpb25FbmRFdmVudCB8fFxuXHQgIC8vIHNraXAgQ1NTIHRyYW5zaXRpb25zIGlmIHBhZ2UgaXMgbm90IHZpc2libGUgLVxuXHQgIC8vIHRoaXMgc29sdmVzIHRoZSBpc3N1ZSBvZiB0cmFuc2l0aW9uZW5kIGV2ZW50cyBub3Rcblx0ICAvLyBmaXJpbmcgdW50aWwgdGhlIHBhZ2UgaXMgdmlzaWJsZSBhZ2Fpbi5cblx0ICAvLyBwYWdlVmlzaWJpbGl0eSBBUEkgaXMgc3VwcG9ydGVkIGluIElFMTArLCBzYW1lIGFzXG5cdCAgLy8gQ1NTIHRyYW5zaXRpb25zLlxuXHQgIGRvY3VtZW50LmhpZGRlbiB8fFxuXHQgIC8vIGV4cGxpY2l0IGpzLW9ubHkgdHJhbnNpdGlvblxuXHQgIHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5jc3MgPT09IGZhbHNlIHx8XG5cdCAgLy8gZWxlbWVudCBpcyBoaWRkZW5cblx0ICBpc0hpZGRlbih0aGlzLmVsKSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgdHlwZSA9IHRoaXMudHlwZSB8fCB0aGlzLnR5cGVDYWNoZVtjbGFzc05hbWVdO1xuXHQgIGlmICh0eXBlKSByZXR1cm4gdHlwZTtcblx0ICB2YXIgaW5saW5lU3R5bGVzID0gdGhpcy5lbC5zdHlsZTtcblx0ICB2YXIgY29tcHV0ZWRTdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKTtcblx0ICB2YXIgdHJhbnNEdXJhdGlvbiA9IGlubGluZVN0eWxlc1t0cmFuc0R1cmF0aW9uUHJvcF0gfHwgY29tcHV0ZWRTdHlsZXNbdHJhbnNEdXJhdGlvblByb3BdO1xuXHQgIGlmICh0cmFuc0R1cmF0aW9uICYmIHRyYW5zRHVyYXRpb24gIT09ICcwcycpIHtcblx0ICAgIHR5cGUgPSBUWVBFX1RSQU5TSVRJT047XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBhbmltRHVyYXRpb24gPSBpbmxpbmVTdHlsZXNbYW5pbUR1cmF0aW9uUHJvcF0gfHwgY29tcHV0ZWRTdHlsZXNbYW5pbUR1cmF0aW9uUHJvcF07XG5cdCAgICBpZiAoYW5pbUR1cmF0aW9uICYmIGFuaW1EdXJhdGlvbiAhPT0gJzBzJykge1xuXHQgICAgICB0eXBlID0gVFlQRV9BTklNQVRJT047XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmICh0eXBlKSB7XG5cdCAgICB0aGlzLnR5cGVDYWNoZVtjbGFzc05hbWVdID0gdHlwZTtcblx0ICB9XG5cdCAgcmV0dXJuIHR5cGU7XG5cdH07XG5cdFxuXHQvKipcblx0ICogU2V0dXAgYSBDU1MgdHJhbnNpdGlvbmVuZC9hbmltYXRpb25lbmQgY2FsbGJhY2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKi9cblx0XG5cdHAkMS5zZXR1cENzc0NiID0gZnVuY3Rpb24gKGV2ZW50LCBjYikge1xuXHQgIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gZXZlbnQ7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgdmFyIG9uRW5kID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgaWYgKGUudGFyZ2V0ID09PSBlbCkge1xuXHQgICAgICBvZmYoZWwsIGV2ZW50LCBvbkVuZCk7XG5cdCAgICAgIHNlbGYucGVuZGluZ0Nzc0V2ZW50ID0gc2VsZi5wZW5kaW5nQ3NzQ2IgPSBudWxsO1xuXHQgICAgICBpZiAoIXNlbGYucGVuZGluZ0pzQ2IgJiYgY2IpIHtcblx0ICAgICAgICBjYigpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0ICBvbihlbCwgZXZlbnQsIG9uRW5kKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGhpZGRlbiAtIGluIHRoYXQgY2FzZSB3ZSBjYW4ganVzdFxuXHQgKiBza2lwIHRoZSB0cmFuc2l0aW9uIGFsbHRvZ2V0aGVyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNIaWRkZW4oZWwpIHtcblx0ICBpZiAoL3N2ZyQvLnRlc3QoZWwubmFtZXNwYWNlVVJJKSkge1xuXHQgICAgLy8gU1ZHIGVsZW1lbnRzIGRvIG5vdCBoYXZlIG9mZnNldChXaWR0aHxIZWlnaHQpXG5cdCAgICAvLyBzbyB3ZSBuZWVkIHRvIGNoZWNrIHRoZSBjbGllbnQgcmVjdFxuXHQgICAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0ICAgIHJldHVybiAhKHJlY3Qud2lkdGggfHwgcmVjdC5oZWlnaHQpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gIShlbC5vZmZzZXRXaWR0aCB8fCBlbC5vZmZzZXRIZWlnaHQgfHwgZWwuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIHRyYW5zaXRpb24kMSA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IFRSQU5TSVRJT04sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGlkLCBvbGRJZCkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIC8vIHJlc29sdmUgb24gb3duZXIgdm1cblx0ICAgIHZhciBob29rcyA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAndHJhbnNpdGlvbnMnLCBpZCk7XG5cdCAgICBpZCA9IGlkIHx8ICd2Jztcblx0ICAgIG9sZElkID0gb2xkSWQgfHwgJ3YnO1xuXHQgICAgZWwuX192X3RyYW5zID0gbmV3IFRyYW5zaXRpb24oZWwsIGlkLCBob29rcywgdGhpcy52bSk7XG5cdCAgICByZW1vdmVDbGFzcyhlbCwgb2xkSWQgKyAnLXRyYW5zaXRpb24nKTtcblx0ICAgIGFkZENsYXNzKGVsLCBpZCArICctdHJhbnNpdGlvbicpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBpbnRlcm5hbERpcmVjdGl2ZXMgPSB7XG5cdCAgc3R5bGU6IHN0eWxlLFxuXHQgICdjbGFzcyc6IHZDbGFzcyxcblx0ICBjb21wb25lbnQ6IGNvbXBvbmVudCxcblx0ICBwcm9wOiBwcm9wRGVmLFxuXHQgIHRyYW5zaXRpb246IHRyYW5zaXRpb24kMVxuXHR9O1xuXHRcblx0Ly8gc3BlY2lhbCBiaW5kaW5nIHByZWZpeGVzXG5cdHZhciBiaW5kUkUgPSAvXnYtYmluZDp8XjovO1xuXHR2YXIgb25SRSA9IC9edi1vbjp8XkAvO1xuXHR2YXIgZGlyQXR0clJFID0gL152LShbXjpdKykoPzokfDooLiopJCkvO1xuXHR2YXIgbW9kaWZpZXJSRSA9IC9cXC5bXlxcLl0rL2c7XG5cdHZhciB0cmFuc2l0aW9uUkUgPSAvXih2LWJpbmQ6fDopP3RyYW5zaXRpb24kLztcblx0XG5cdC8vIGRlZmF1bHQgZGlyZWN0aXZlIHByaW9yaXR5XG5cdHZhciBERUZBVUxUX1BSSU9SSVRZID0gMTAwMDtcblx0dmFyIERFRkFVTFRfVEVSTUlOQUxfUFJJT1JJVFkgPSAyMDAwO1xuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYSB0ZW1wbGF0ZSBhbmQgcmV0dXJuIGEgcmV1c2FibGUgY29tcG9zaXRlIGxpbmtcblx0ICogZnVuY3Rpb24sIHdoaWNoIHJlY3Vyc2l2ZWx5IGNvbnRhaW5zIG1vcmUgbGluayBmdW5jdGlvbnNcblx0ICogaW5zaWRlLiBUaGlzIHRvcCBsZXZlbCBjb21waWxlIGZ1bmN0aW9uIHdvdWxkIG5vcm1hbGx5XG5cdCAqIGJlIGNhbGxlZCBvbiBpbnN0YW5jZSByb290IG5vZGVzLCBidXQgY2FuIGFsc28gYmUgdXNlZFxuXHQgKiBmb3IgcGFydGlhbCBjb21waWxhdGlvbiBpZiB0aGUgcGFydGlhbCBhcmd1bWVudCBpcyB0cnVlLlxuXHQgKlxuXHQgKiBUaGUgcmV0dXJuZWQgY29tcG9zaXRlIGxpbmsgZnVuY3Rpb24sIHdoZW4gY2FsbGVkLCB3aWxsXG5cdCAqIHJldHVybiBhbiB1bmxpbmsgZnVuY3Rpb24gdGhhdCB0ZWFyc2Rvd24gYWxsIGRpcmVjdGl2ZXNcblx0ICogY3JlYXRlZCBkdXJpbmcgdGhlIGxpbmtpbmcgcGhhc2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHBhcnRpYWxcblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZShlbCwgb3B0aW9ucywgcGFydGlhbCkge1xuXHQgIC8vIGxpbmsgZnVuY3Rpb24gZm9yIHRoZSBub2RlIGl0c2VsZi5cblx0ICB2YXIgbm9kZUxpbmtGbiA9IHBhcnRpYWwgfHwgIW9wdGlvbnMuX2FzQ29tcG9uZW50ID8gY29tcGlsZU5vZGUoZWwsIG9wdGlvbnMpIDogbnVsbDtcblx0ICAvLyBsaW5rIGZ1bmN0aW9uIGZvciB0aGUgY2hpbGROb2Rlc1xuXHQgIHZhciBjaGlsZExpbmtGbiA9ICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJiAhaXNTY3JpcHQoZWwpICYmIGVsLmhhc0NoaWxkTm9kZXMoKSA/IGNvbXBpbGVOb2RlTGlzdChlbC5jaGlsZE5vZGVzLCBvcHRpb25zKSA6IG51bGw7XG5cdFxuXHQgIC8qKlxuXHQgICAqIEEgY29tcG9zaXRlIGxpbmtlciBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gYSBhbHJlYWR5XG5cdCAgICogY29tcGlsZWQgcGllY2Ugb2YgRE9NLCB3aGljaCBpbnN0YW50aWF0ZXMgYWxsIGRpcmVjdGl2ZVxuXHQgICAqIGluc3RhbmNlcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuXHQgICAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSBob3N0IHZtIG9mIHRyYW5zY2x1ZGVkIGNvbnRlbnRcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddIC0gbGluayBjb250ZXh0IGZyYWdtZW50XG5cdCAgICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuXHQgICAqL1xuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gY29tcG9zaXRlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIC8vIGNhY2hlIGNoaWxkTm9kZXMgYmVmb3JlIGxpbmtpbmcgcGFyZW50LCBmaXggIzY1N1xuXHQgICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KGVsLmNoaWxkTm9kZXMpO1xuXHQgICAgLy8gbGlua1xuXHQgICAgdmFyIGRpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiBjb21wb3NpdGVMaW5rQ2FwdHVyZXIoKSB7XG5cdCAgICAgIGlmIChub2RlTGlua0ZuKSBub2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgICBpZiAoY2hpbGRMaW5rRm4pIGNoaWxkTGlua0ZuKHZtLCBjaGlsZE5vZGVzLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgICB9LCB2bSk7XG5cdCAgICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBkaXJzKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXBwbHkgYSBsaW5rZXIgdG8gYSB2bS9lbGVtZW50IHBhaXIgYW5kIGNhcHR1cmUgdGhlXG5cdCAqIGRpcmVjdGl2ZXMgY3JlYXRlZCBkdXJpbmcgdGhlIHByb2Nlc3MuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGxpbmtlclxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBsaW5rQW5kQ2FwdHVyZShsaW5rZXIsIHZtKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIC8vIHJlc2V0IGRpcmVjdGl2ZXMgYmVmb3JlIGV2ZXJ5IGNhcHR1cmUgaW4gcHJvZHVjdGlvblxuXHQgICAgLy8gbW9kZSwgc28gdGhhdCB3aGVuIHVubGlua2luZyB3ZSBkb24ndCBuZWVkIHRvIHNwbGljZVxuXHQgICAgLy8gdGhlbSBvdXQgKHdoaWNoIHR1cm5zIG91dCB0byBiZSBhIHBlcmYgaGl0KS5cblx0ICAgIC8vIHRoZXkgYXJlIGtlcHQgaW4gZGV2ZWxvcG1lbnQgbW9kZSBiZWNhdXNlIHRoZXkgYXJlXG5cdCAgICAvLyB1c2VmdWwgZm9yIFZ1ZSdzIG93biB0ZXN0cy5cblx0ICAgIHZtLl9kaXJlY3RpdmVzID0gW107XG5cdCAgfVxuXHQgIHZhciBvcmlnaW5hbERpckNvdW50ID0gdm0uX2RpcmVjdGl2ZXMubGVuZ3RoO1xuXHQgIGxpbmtlcigpO1xuXHQgIHZhciBkaXJzID0gdm0uX2RpcmVjdGl2ZXMuc2xpY2Uob3JpZ2luYWxEaXJDb3VudCk7XG5cdCAgZGlycy5zb3J0KGRpcmVjdGl2ZUNvbXBhcmF0b3IpO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gZGlycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGRpcnNbaV0uX2JpbmQoKTtcblx0ICB9XG5cdCAgcmV0dXJuIGRpcnM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEaXJlY3RpdmUgcHJpb3JpdHkgc29ydCBjb21wYXJhdG9yXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBhXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBiXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGlyZWN0aXZlQ29tcGFyYXRvcihhLCBiKSB7XG5cdCAgYSA9IGEuZGVzY3JpcHRvci5kZWYucHJpb3JpdHkgfHwgREVGQVVMVF9QUklPUklUWTtcblx0ICBiID0gYi5kZXNjcmlwdG9yLmRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZO1xuXHQgIHJldHVybiBhID4gYiA/IC0xIDogYSA9PT0gYiA/IDAgOiAxO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTGlua2VyIGZ1bmN0aW9ucyByZXR1cm4gYW4gdW5saW5rIGZ1bmN0aW9uIHRoYXRcblx0ICogdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzIGluc3RhbmNlcyBnZW5lcmF0ZWQgZHVyaW5nXG5cdCAqIHRoZSBwcm9jZXNzLlxuXHQgKlxuXHQgKiBXZSBjcmVhdGUgdW5saW5rIGZ1bmN0aW9ucyB3aXRoIG9ubHkgdGhlIG5lY2Vzc2FyeVxuXHQgKiBpbmZvcm1hdGlvbiB0byBhdm9pZCByZXRhaW5pbmcgYWRkaXRpb25hbCBjbG9zdXJlcy5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGRpcnNcblx0ICogQHBhcmFtIHtWdWV9IFtjb250ZXh0XVxuXHQgKiBAcGFyYW0ge0FycmF5fSBbY29udGV4dERpcnNdXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VVbmxpbmtGbih2bSwgZGlycywgY29udGV4dCwgY29udGV4dERpcnMpIHtcblx0ICBmdW5jdGlvbiB1bmxpbmsoZGVzdHJveWluZykge1xuXHQgICAgdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKTtcblx0ICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHREaXJzKSB7XG5cdCAgICAgIHRlYXJkb3duRGlycyhjb250ZXh0LCBjb250ZXh0RGlycyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIGV4cG9zZSBsaW5rZWQgZGlyZWN0aXZlc1xuXHQgIHVubGluay5kaXJzID0gZGlycztcblx0ICByZXR1cm4gdW5saW5rO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGVhcmRvd24gcGFydGlhbCBsaW5rZWQgZGlyZWN0aXZlcy5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGRpcnNcblx0ICogQHBhcmFtIHtCb29sZWFufSBkZXN0cm95aW5nXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKSB7XG5cdCAgdmFyIGkgPSBkaXJzLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBkaXJzW2ldLl90ZWFyZG93bigpO1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIWRlc3Ryb3lpbmcpIHtcblx0ICAgICAgdm0uX2RpcmVjdGl2ZXMuJHJlbW92ZShkaXJzW2ldKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGxpbmsgcHJvcHMgb24gYW4gaW5zdGFuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlQW5kTGlua1Byb3BzKHZtLCBlbCwgcHJvcHMsIHNjb3BlKSB7XG5cdCAgdmFyIHByb3BzTGlua0ZuID0gY29tcGlsZVByb3BzKGVsLCBwcm9wcywgdm0pO1xuXHQgIHZhciBwcm9wRGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uICgpIHtcblx0ICAgIHByb3BzTGlua0ZuKHZtLCBzY29wZSk7XG5cdCAgfSwgdm0pO1xuXHQgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIHByb3BEaXJzKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgdGhlIHJvb3QgZWxlbWVudCBvZiBhbiBpbnN0YW5jZS5cblx0ICpcblx0ICogMS4gYXR0cnMgb24gY29udGV4dCBjb250YWluZXIgKGNvbnRleHQgc2NvcGUpXG5cdCAqIDIuIGF0dHJzIG9uIHRoZSBjb21wb25lbnQgdGVtcGxhdGUgcm9vdCBub2RlLCBpZlxuXHQgKiAgICByZXBsYWNlOnRydWUgKGNoaWxkIHNjb3BlKVxuXHQgKlxuXHQgKiBJZiB0aGlzIGlzIGEgZnJhZ21lbnQgaW5zdGFuY2UsIHdlIG9ubHkgbmVlZCB0byBjb21waWxlIDEuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRPcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVSb290KGVsLCBvcHRpb25zLCBjb250ZXh0T3B0aW9ucykge1xuXHQgIHZhciBjb250YWluZXJBdHRycyA9IG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzO1xuXHQgIHZhciByZXBsYWNlckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRycztcblx0ICB2YXIgY29udGV4dExpbmtGbiwgcmVwbGFjZXJMaW5rRm47XG5cdFxuXHQgIC8vIG9ubHkgbmVlZCB0byBjb21waWxlIG90aGVyIGF0dHJpYnV0ZXMgZm9yXG5cdCAgLy8gbm9uLWZyYWdtZW50IGluc3RhbmNlc1xuXHQgIGlmIChlbC5ub2RlVHlwZSAhPT0gMTEpIHtcblx0ICAgIC8vIGZvciBjb21wb25lbnRzLCBjb250YWluZXIgYW5kIHJlcGxhY2VyIG5lZWQgdG8gYmVcblx0ICAgIC8vIGNvbXBpbGVkIHNlcGFyYXRlbHkgYW5kIGxpbmtlZCBpbiBkaWZmZXJlbnQgc2NvcGVzLlxuXHQgICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50KSB7XG5cdCAgICAgIC8vIDIuIGNvbnRhaW5lciBhdHRyaWJ1dGVzXG5cdCAgICAgIGlmIChjb250YWluZXJBdHRycyAmJiBjb250ZXh0T3B0aW9ucykge1xuXHQgICAgICAgIGNvbnRleHRMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhjb250YWluZXJBdHRycywgY29udGV4dE9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChyZXBsYWNlckF0dHJzKSB7XG5cdCAgICAgICAgLy8gMy4gcmVwbGFjZXIgYXR0cmlidXRlc1xuXHQgICAgICAgIHJlcGxhY2VyTGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMocmVwbGFjZXJBdHRycywgb3B0aW9ucyk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIG5vbi1jb21wb25lbnQsIGp1c3QgY29tcGlsZSBhcyBhIG5vcm1hbCBlbGVtZW50LlxuXHQgICAgICByZXBsYWNlckxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGVsLmF0dHJpYnV0ZXMsIG9wdGlvbnMpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb250YWluZXJBdHRycykge1xuXHQgICAgLy8gd2FybiBjb250YWluZXIgZGlyZWN0aXZlcyBmb3IgZnJhZ21lbnQgaW5zdGFuY2VzXG5cdCAgICB2YXIgbmFtZXMgPSBjb250YWluZXJBdHRycy5maWx0ZXIoZnVuY3Rpb24gKGF0dHIpIHtcblx0ICAgICAgLy8gYWxsb3cgdnVlLWxvYWRlci92dWVpZnkgc2NvcGVkIGNzcyBhdHRyaWJ1dGVzXG5cdCAgICAgIHJldHVybiBhdHRyLm5hbWUuaW5kZXhPZignX3YtJykgPCAwICYmXG5cdCAgICAgIC8vIGFsbG93IGV2ZW50IGxpc3RlbmVyc1xuXHQgICAgICAhb25SRS50ZXN0KGF0dHIubmFtZSkgJiZcblx0ICAgICAgLy8gYWxsb3cgc2xvdHNcblx0ICAgICAgYXR0ci5uYW1lICE9PSAnc2xvdCc7XG5cdCAgICB9KS5tYXAoZnVuY3Rpb24gKGF0dHIpIHtcblx0ICAgICAgcmV0dXJuICdcIicgKyBhdHRyLm5hbWUgKyAnXCInO1xuXHQgICAgfSk7XG5cdCAgICBpZiAobmFtZXMubGVuZ3RoKSB7XG5cdCAgICAgIHZhciBwbHVyYWwgPSBuYW1lcy5sZW5ndGggPiAxO1xuXHQgICAgICB3YXJuKCdBdHRyaWJ1dGUnICsgKHBsdXJhbCA/ICdzICcgOiAnICcpICsgbmFtZXMuam9pbignLCAnKSArIChwbHVyYWwgPyAnIGFyZScgOiAnIGlzJykgKyAnIGlnbm9yZWQgb24gY29tcG9uZW50ICcgKyAnPCcgKyBvcHRpb25zLmVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICc+IGJlY2F1c2UgJyArICd0aGUgY29tcG9uZW50IGlzIGEgZnJhZ21lbnQgaW5zdGFuY2U6ICcgKyAnaHR0cDovL3Z1ZWpzLm9yZy9ndWlkZS9jb21wb25lbnRzLmh0bWwjRnJhZ21lbnQtSW5zdGFuY2UnKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRycyA9IG51bGw7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHJvb3RMaW5rRm4odm0sIGVsLCBzY29wZSkge1xuXHQgICAgLy8gbGluayBjb250ZXh0IHNjb3BlIGRpcnNcblx0ICAgIHZhciBjb250ZXh0ID0gdm0uX2NvbnRleHQ7XG5cdCAgICB2YXIgY29udGV4dERpcnM7XG5cdCAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0TGlua0ZuKSB7XG5cdCAgICAgIGNvbnRleHREaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGNvbnRleHRMaW5rRm4oY29udGV4dCwgZWwsIG51bGwsIHNjb3BlKTtcblx0ICAgICAgfSwgY29udGV4dCk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gbGluayBzZWxmXG5cdCAgICB2YXIgc2VsZkRpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChyZXBsYWNlckxpbmtGbikgcmVwbGFjZXJMaW5rRm4odm0sIGVsKTtcblx0ICAgIH0sIHZtKTtcblx0XG5cdCAgICAvLyByZXR1cm4gdGhlIHVubGluayBmdW5jdGlvbiB0aGF0IHRlYXJzZG93biBjb250ZXh0XG5cdCAgICAvLyBjb250YWluZXIgZGlyZWN0aXZlcy5cblx0ICAgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIHNlbGZEaXJzLCBjb250ZXh0LCBjb250ZXh0RGlycyk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYSBub2RlIGFuZCByZXR1cm4gYSBub2RlTGlua0ZuIGJhc2VkIG9uIHRoZVxuXHQgKiBub2RlIHR5cGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVOb2RlKG5vZGUsIG9wdGlvbnMpIHtcblx0ICB2YXIgdHlwZSA9IG5vZGUubm9kZVR5cGU7XG5cdCAgaWYgKHR5cGUgPT09IDEgJiYgIWlzU2NyaXB0KG5vZGUpKSB7XG5cdCAgICByZXR1cm4gY29tcGlsZUVsZW1lbnQobm9kZSwgb3B0aW9ucyk7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSAzICYmIG5vZGUuZGF0YS50cmltKCkpIHtcblx0ICAgIHJldHVybiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYW4gZWxlbWVudCBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVFbGVtZW50KGVsLCBvcHRpb25zKSB7XG5cdCAgLy8gcHJlcHJvY2VzcyB0ZXh0YXJlYXMuXG5cdCAgLy8gdGV4dGFyZWEgdHJlYXRzIGl0cyB0ZXh0IGNvbnRlbnQgYXMgdGhlIGluaXRpYWwgdmFsdWUuXG5cdCAgLy8ganVzdCBiaW5kIGl0IGFzIGFuIGF0dHIgZGlyZWN0aXZlIGZvciB2YWx1ZS5cblx0ICBpZiAoZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuXHQgICAgdmFyIHRva2VucyA9IHBhcnNlVGV4dChlbC52YWx1ZSk7XG5cdCAgICBpZiAodG9rZW5zKSB7XG5cdCAgICAgIGVsLnNldEF0dHJpYnV0ZSgnOnZhbHVlJywgdG9rZW5zVG9FeHAodG9rZW5zKSk7XG5cdCAgICAgIGVsLnZhbHVlID0gJyc7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciBsaW5rRm47XG5cdCAgdmFyIGhhc0F0dHJzID0gZWwuaGFzQXR0cmlidXRlcygpO1xuXHQgIHZhciBhdHRycyA9IGhhc0F0dHJzICYmIHRvQXJyYXkoZWwuYXR0cmlidXRlcyk7XG5cdCAgLy8gY2hlY2sgdGVybWluYWwgZGlyZWN0aXZlcyAoZm9yICYgaWYpXG5cdCAgaWYgKGhhc0F0dHJzKSB7XG5cdCAgICBsaW5rRm4gPSBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyhlbCwgYXR0cnMsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICAvLyBjaGVjayBlbGVtZW50IGRpcmVjdGl2ZXNcblx0ICBpZiAoIWxpbmtGbikge1xuXHQgICAgbGlua0ZuID0gY2hlY2tFbGVtZW50RGlyZWN0aXZlcyhlbCwgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIC8vIGNoZWNrIGNvbXBvbmVudFxuXHQgIGlmICghbGlua0ZuKSB7XG5cdCAgICBsaW5rRm4gPSBjaGVja0NvbXBvbmVudChlbCwgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIC8vIG5vcm1hbCBkaXJlY3RpdmVzXG5cdCAgaWYgKCFsaW5rRm4gJiYgaGFzQXR0cnMpIHtcblx0ICAgIGxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGF0dHJzLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgcmV0dXJuIGxpbmtGbjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYSB0ZXh0Tm9kZSBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbi5cblx0ICpcblx0ICogQHBhcmFtIHtUZXh0Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfSB0ZXh0Tm9kZUxpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVUZXh0Tm9kZShub2RlLCBvcHRpb25zKSB7XG5cdCAgLy8gc2tpcCBtYXJrZWQgdGV4dCBub2Rlc1xuXHQgIGlmIChub2RlLl9za2lwKSB7XG5cdCAgICByZXR1cm4gcmVtb3ZlVGV4dDtcblx0ICB9XG5cdFxuXHQgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQobm9kZS53aG9sZVRleHQpO1xuXHQgIGlmICghdG9rZW5zKSB7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdFxuXHQgIC8vIG1hcmsgYWRqYWNlbnQgdGV4dCBub2RlcyBhcyBza2lwcGVkLFxuXHQgIC8vIGJlY2F1c2Ugd2UgYXJlIHVzaW5nIG5vZGUud2hvbGVUZXh0IHRvIGNvbXBpbGVcblx0ICAvLyBhbGwgYWRqYWNlbnQgdGV4dCBub2RlcyB0b2dldGhlci4gVGhpcyBmaXhlc1xuXHQgIC8vIGlzc3VlcyBpbiBJRSB3aGVyZSBzb21ldGltZXMgaXQgc3BsaXRzIHVwIGEgc2luZ2xlXG5cdCAgLy8gdGV4dCBub2RlIGludG8gbXVsdGlwbGUgb25lcy5cblx0ICB2YXIgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG5cdCAgd2hpbGUgKG5leHQgJiYgbmV4dC5ub2RlVHlwZSA9PT0gMykge1xuXHQgICAgbmV4dC5fc2tpcCA9IHRydWU7XG5cdCAgICBuZXh0ID0gbmV4dC5uZXh0U2libGluZztcblx0ICB9XG5cdFxuXHQgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXHQgIHZhciBlbCwgdG9rZW47XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSB0b2tlbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICB0b2tlbiA9IHRva2Vuc1tpXTtcblx0ICAgIGVsID0gdG9rZW4udGFnID8gcHJvY2Vzc1RleHRUb2tlbih0b2tlbiwgb3B0aW9ucykgOiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0b2tlbi52YWx1ZSk7XG5cdCAgICBmcmFnLmFwcGVuZENoaWxkKGVsKTtcblx0ICB9XG5cdCAgcmV0dXJuIG1ha2VUZXh0Tm9kZUxpbmtGbih0b2tlbnMsIGZyYWcsIG9wdGlvbnMpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTGlua2VyIGZvciBhbiBza2lwcGVkIHRleHQgbm9kZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7VGV4dH0gbm9kZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZVRleHQodm0sIG5vZGUpIHtcblx0ICByZW1vdmUobm9kZSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcm9jZXNzIGEgc2luZ2xlIHRleHQgdG9rZW4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB0b2tlblxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtOb2RlfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NUZXh0VG9rZW4odG9rZW4sIG9wdGlvbnMpIHtcblx0ICB2YXIgZWw7XG5cdCAgaWYgKHRva2VuLm9uZVRpbWUpIHtcblx0ICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodG9rZW4udmFsdWUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBpZiAodG9rZW4uaHRtbCkge1xuXHQgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJ3YtaHRtbCcpO1xuXHQgICAgICBzZXRUb2tlblR5cGUoJ2h0bWwnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIElFIHdpbGwgY2xlYW4gdXAgZW1wdHkgdGV4dE5vZGVzIGR1cmluZ1xuXHQgICAgICAvLyBmcmFnLmNsb25lTm9kZSh0cnVlKSwgc28gd2UgaGF2ZSB0byBnaXZlIGl0XG5cdCAgICAgIC8vIHNvbWV0aGluZyBoZXJlLi4uXG5cdCAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJyAnKTtcblx0ICAgICAgc2V0VG9rZW5UeXBlKCd0ZXh0Jyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGZ1bmN0aW9uIHNldFRva2VuVHlwZSh0eXBlKSB7XG5cdCAgICBpZiAodG9rZW4uZGVzY3JpcHRvcikgcmV0dXJuO1xuXHQgICAgdmFyIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKHRva2VuLnZhbHVlKTtcblx0ICAgIHRva2VuLmRlc2NyaXB0b3IgPSB7XG5cdCAgICAgIG5hbWU6IHR5cGUsXG5cdCAgICAgIGRlZjogZGlyZWN0aXZlc1t0eXBlXSxcblx0ICAgICAgZXhwcmVzc2lvbjogcGFyc2VkLmV4cHJlc3Npb24sXG5cdCAgICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzXG5cdCAgICB9O1xuXHQgIH1cblx0ICByZXR1cm4gZWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBCdWlsZCBhIGZ1bmN0aW9uIHRoYXQgcHJvY2Vzc2VzIGEgdGV4dE5vZGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gdG9rZW5zXG5cdCAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VUZXh0Tm9kZUxpbmtGbih0b2tlbnMsIGZyYWcpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gdGV4dE5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSkge1xuXHQgICAgdmFyIGZyYWdDbG9uZSA9IGZyYWcuY2xvbmVOb2RlKHRydWUpO1xuXHQgICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KGZyYWdDbG9uZS5jaGlsZE5vZGVzKTtcblx0ICAgIHZhciB0b2tlbiwgdmFsdWUsIG5vZGU7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRva2Vucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdG9rZW4gPSB0b2tlbnNbaV07XG5cdCAgICAgIHZhbHVlID0gdG9rZW4udmFsdWU7XG5cdCAgICAgIGlmICh0b2tlbi50YWcpIHtcblx0ICAgICAgICBub2RlID0gY2hpbGROb2Rlc1tpXTtcblx0ICAgICAgICBpZiAodG9rZW4ub25lVGltZSkge1xuXHQgICAgICAgICAgdmFsdWUgPSAoc2NvcGUgfHwgdm0pLiRldmFsKHZhbHVlKTtcblx0ICAgICAgICAgIGlmICh0b2tlbi5odG1sKSB7XG5cdCAgICAgICAgICAgIHJlcGxhY2Uobm9kZSwgcGFyc2VUZW1wbGF0ZSh2YWx1ZSwgdHJ1ZSkpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgbm9kZS5kYXRhID0gX3RvU3RyaW5nKHZhbHVlKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdm0uX2JpbmREaXIodG9rZW4uZGVzY3JpcHRvciwgbm9kZSwgaG9zdCwgc2NvcGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmVwbGFjZShlbCwgZnJhZ0Nsb25lKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBhIG5vZGUgbGlzdCBhbmQgcmV0dXJuIGEgY2hpbGRMaW5rRm4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVMaXN0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlTm9kZUxpc3Qobm9kZUxpc3QsIG9wdGlvbnMpIHtcblx0ICB2YXIgbGlua0ZucyA9IFtdO1xuXHQgIHZhciBub2RlTGlua0ZuLCBjaGlsZExpbmtGbiwgbm9kZTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVMaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgbm9kZSA9IG5vZGVMaXN0W2ldO1xuXHQgICAgbm9kZUxpbmtGbiA9IGNvbXBpbGVOb2RlKG5vZGUsIG9wdGlvbnMpO1xuXHQgICAgY2hpbGRMaW5rRm4gPSAhKG5vZGVMaW5rRm4gJiYgbm9kZUxpbmtGbi50ZXJtaW5hbCkgJiYgbm9kZS50YWdOYW1lICE9PSAnU0NSSVBUJyAmJiBub2RlLmhhc0NoaWxkTm9kZXMoKSA/IGNvbXBpbGVOb2RlTGlzdChub2RlLmNoaWxkTm9kZXMsIG9wdGlvbnMpIDogbnVsbDtcblx0ICAgIGxpbmtGbnMucHVzaChub2RlTGlua0ZuLCBjaGlsZExpbmtGbik7XG5cdCAgfVxuXHQgIHJldHVybiBsaW5rRm5zLmxlbmd0aCA/IG1ha2VDaGlsZExpbmtGbihsaW5rRm5zKSA6IG51bGw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNYWtlIGEgY2hpbGQgbGluayBmdW5jdGlvbiBmb3IgYSBub2RlJ3MgY2hpbGROb2Rlcy5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheTxGdW5jdGlvbj59IGxpbmtGbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb259IGNoaWxkTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZUNoaWxkTGlua0ZuKGxpbmtGbnMpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gY2hpbGRMaW5rRm4odm0sIG5vZGVzLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgdmFyIG5vZGUsIG5vZGVMaW5rRm4sIGNoaWxkcmVuTGlua0ZuO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIG4gPSAwLCBsID0gbGlua0Zucy5sZW5ndGg7IGkgPCBsOyBuKyspIHtcblx0ICAgICAgbm9kZSA9IG5vZGVzW25dO1xuXHQgICAgICBub2RlTGlua0ZuID0gbGlua0Zuc1tpKytdO1xuXHQgICAgICBjaGlsZHJlbkxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcblx0ICAgICAgLy8gY2FjaGUgY2hpbGROb2RlcyBiZWZvcmUgbGlua2luZyBwYXJlbnQsIGZpeCAjNjU3XG5cdCAgICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShub2RlLmNoaWxkTm9kZXMpO1xuXHQgICAgICBpZiAobm9kZUxpbmtGbikge1xuXHQgICAgICAgIG5vZGVMaW5rRm4odm0sIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoY2hpbGRyZW5MaW5rRm4pIHtcblx0ICAgICAgICBjaGlsZHJlbkxpbmtGbih2bSwgY2hpbGROb2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGZvciBlbGVtZW50IGRpcmVjdGl2ZXMgKGN1c3RvbSBlbGVtZW50cyB0aGF0IHNob3VsZFxuXHQgKiBiZSByZXNvdmxlZCBhcyB0ZXJtaW5hbCBkaXJlY3RpdmVzKS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNoZWNrRWxlbWVudERpcmVjdGl2ZXMoZWwsIG9wdGlvbnMpIHtcblx0ICB2YXIgdGFnID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHQgIGlmIChjb21tb25UYWdSRS50ZXN0KHRhZykpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIGRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZWxlbWVudERpcmVjdGl2ZXMnLCB0YWcpO1xuXHQgIGlmIChkZWYpIHtcblx0ICAgIHJldHVybiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCB0YWcsICcnLCBvcHRpb25zLCBkZWYpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSBjb21wb25lbnQuIElmIHllcywgcmV0dXJuXG5cdCAqIGEgY29tcG9uZW50IGxpbmsgZnVuY3Rpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNoZWNrQ29tcG9uZW50KGVsLCBvcHRpb25zKSB7XG5cdCAgdmFyIGNvbXBvbmVudCA9IGNoZWNrQ29tcG9uZW50QXR0cihlbCwgb3B0aW9ucyk7XG5cdCAgaWYgKGNvbXBvbmVudCkge1xuXHQgICAgdmFyIHJlZiA9IGZpbmRSZWYoZWwpO1xuXHQgICAgdmFyIGRlc2NyaXB0b3IgPSB7XG5cdCAgICAgIG5hbWU6ICdjb21wb25lbnQnLFxuXHQgICAgICByZWY6IHJlZixcblx0ICAgICAgZXhwcmVzc2lvbjogY29tcG9uZW50LmlkLFxuXHQgICAgICBkZWY6IGludGVybmFsRGlyZWN0aXZlcy5jb21wb25lbnQsXG5cdCAgICAgIG1vZGlmaWVyczoge1xuXHQgICAgICAgIGxpdGVyYWw6ICFjb21wb25lbnQuZHluYW1pY1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgdmFyIGNvbXBvbmVudExpbmtGbiA9IGZ1bmN0aW9uIGNvbXBvbmVudExpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICAgIGlmIChyZWYpIHtcblx0ICAgICAgICBkZWZpbmVSZWFjdGl2ZSgoc2NvcGUgfHwgdm0pLiRyZWZzLCByZWYsIG51bGwpO1xuXHQgICAgICB9XG5cdCAgICAgIHZtLl9iaW5kRGlyKGRlc2NyaXB0b3IsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgICB9O1xuXHQgICAgY29tcG9uZW50TGlua0ZuLnRlcm1pbmFsID0gdHJ1ZTtcblx0ICAgIHJldHVybiBjb21wb25lbnRMaW5rRm47XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgYW4gZWxlbWVudCBmb3IgdGVybWluYWwgZGlyZWN0aXZlcyBpbiBmaXhlZCBvcmRlci5cblx0ICogSWYgaXQgZmluZHMgb25lLCByZXR1cm4gYSB0ZXJtaW5hbCBsaW5rIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGF0dHJzXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0ZXJtaW5hbExpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNoZWNrVGVybWluYWxEaXJlY3RpdmVzKGVsLCBhdHRycywgb3B0aW9ucykge1xuXHQgIC8vIHNraXAgdi1wcmVcblx0ICBpZiAoZ2V0QXR0cihlbCwgJ3YtcHJlJykgIT09IG51bGwpIHtcblx0ICAgIHJldHVybiBza2lwO1xuXHQgIH1cblx0ICAvLyBza2lwIHYtZWxzZSBibG9jaywgYnV0IG9ubHkgaWYgZm9sbG93aW5nIHYtaWZcblx0ICBpZiAoZWwuaGFzQXR0cmlidXRlKCd2LWVsc2UnKSkge1xuXHQgICAgdmFyIHByZXYgPSBlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuXHQgICAgaWYgKHByZXYgJiYgcHJldi5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuXHQgICAgICByZXR1cm4gc2tpcDtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHZhciBhdHRyLCBuYW1lLCB2YWx1ZSwgbW9kaWZpZXJzLCBtYXRjaGVkLCBkaXJOYW1lLCByYXdOYW1lLCBhcmcsIGRlZiwgdGVybURlZjtcblx0ICBmb3IgKHZhciBpID0gMCwgaiA9IGF0dHJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHQgICAgYXR0ciA9IGF0dHJzW2ldO1xuXHQgICAgbmFtZSA9IGF0dHIubmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKTtcblx0ICAgIGlmIChtYXRjaGVkID0gbmFtZS5tYXRjaChkaXJBdHRyUkUpKSB7XG5cdCAgICAgIGRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZGlyZWN0aXZlcycsIG1hdGNoZWRbMV0pO1xuXHQgICAgICBpZiAoZGVmICYmIGRlZi50ZXJtaW5hbCkge1xuXHQgICAgICAgIGlmICghdGVybURlZiB8fCAoZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfVEVSTUlOQUxfUFJJT1JJVFkpID4gdGVybURlZi5wcmlvcml0eSkge1xuXHQgICAgICAgICAgdGVybURlZiA9IGRlZjtcblx0ICAgICAgICAgIHJhd05hbWUgPSBhdHRyLm5hbWU7XG5cdCAgICAgICAgICBtb2RpZmllcnMgPSBwYXJzZU1vZGlmaWVycyhhdHRyLm5hbWUpO1xuXHQgICAgICAgICAgdmFsdWUgPSBhdHRyLnZhbHVlO1xuXHQgICAgICAgICAgZGlyTmFtZSA9IG1hdGNoZWRbMV07XG5cdCAgICAgICAgICBhcmcgPSBtYXRjaGVkWzJdO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKHRlcm1EZWYpIHtcblx0ICAgIHJldHVybiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCBkaXJOYW1lLCB2YWx1ZSwgb3B0aW9ucywgdGVybURlZiwgcmF3TmFtZSwgYXJnLCBtb2RpZmllcnMpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gc2tpcCgpIHt9XG5cdHNraXAudGVybWluYWwgPSB0cnVlO1xuXHRcblx0LyoqXG5cdCAqIEJ1aWxkIGEgbm9kZSBsaW5rIGZ1bmN0aW9uIGZvciBhIHRlcm1pbmFsIGRpcmVjdGl2ZS5cblx0ICogQSB0ZXJtaW5hbCBsaW5rIGZ1bmN0aW9uIHRlcm1pbmF0ZXMgdGhlIGN1cnJlbnRcblx0ICogY29tcGlsYXRpb24gcmVjdXJzaW9uIGFuZCBoYW5kbGVzIGNvbXBpbGF0aW9uIG9mIHRoZVxuXHQgKiBzdWJ0cmVlIGluIHRoZSBkaXJlY3RpdmUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGRpck5hbWVcblx0ICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBkZWZcblx0ICogQHBhcmFtIHtTdHJpbmd9IFtyYXdOYW1lXVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW2FyZ11cblx0ICogQHBhcmFtIHtPYmplY3R9IFttb2RpZmllcnNdXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0ZXJtaW5hbExpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIGRpck5hbWUsIHZhbHVlLCBvcHRpb25zLCBkZWYsIHJhd05hbWUsIGFyZywgbW9kaWZpZXJzKSB7XG5cdCAgdmFyIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcblx0ICB2YXIgZGVzY3JpcHRvciA9IHtcblx0ICAgIG5hbWU6IGRpck5hbWUsXG5cdCAgICBhcmc6IGFyZyxcblx0ICAgIGV4cHJlc3Npb246IHBhcnNlZC5leHByZXNzaW9uLFxuXHQgICAgZmlsdGVyczogcGFyc2VkLmZpbHRlcnMsXG5cdCAgICByYXc6IHZhbHVlLFxuXHQgICAgYXR0cjogcmF3TmFtZSxcblx0ICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLFxuXHQgICAgZGVmOiBkZWZcblx0ICB9O1xuXHQgIC8vIGNoZWNrIHJlZiBmb3Igdi1mb3IgYW5kIHJvdXRlci12aWV3XG5cdCAgaWYgKGRpck5hbWUgPT09ICdmb3InIHx8IGRpck5hbWUgPT09ICdyb3V0ZXItdmlldycpIHtcblx0ICAgIGRlc2NyaXB0b3IucmVmID0gZmluZFJlZihlbCk7XG5cdCAgfVxuXHQgIHZhciBmbiA9IGZ1bmN0aW9uIHRlcm1pbmFsTm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICBpZiAoZGVzY3JpcHRvci5yZWYpIHtcblx0ICAgICAgZGVmaW5lUmVhY3RpdmUoKHNjb3BlIHx8IHZtKS4kcmVmcywgZGVzY3JpcHRvci5yZWYsIG51bGwpO1xuXHQgICAgfVxuXHQgICAgdm0uX2JpbmREaXIoZGVzY3JpcHRvciwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICB9O1xuXHQgIGZuLnRlcm1pbmFsID0gdHJ1ZTtcblx0ICByZXR1cm4gZm47XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIHRoZSBkaXJlY3RpdmVzIG9uIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIGxpbmtlci5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheXxOYW1lZE5vZGVNYXB9IGF0dHJzXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVEaXJlY3RpdmVzKGF0dHJzLCBvcHRpb25zKSB7XG5cdCAgdmFyIGkgPSBhdHRycy5sZW5ndGg7XG5cdCAgdmFyIGRpcnMgPSBbXTtcblx0ICB2YXIgYXR0ciwgbmFtZSwgdmFsdWUsIHJhd05hbWUsIHJhd1ZhbHVlLCBkaXJOYW1lLCBhcmcsIG1vZGlmaWVycywgZGlyRGVmLCB0b2tlbnMsIG1hdGNoZWQ7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgYXR0ciA9IGF0dHJzW2ldO1xuXHQgICAgbmFtZSA9IHJhd05hbWUgPSBhdHRyLm5hbWU7XG5cdCAgICB2YWx1ZSA9IHJhd1ZhbHVlID0gYXR0ci52YWx1ZTtcblx0ICAgIHRva2VucyA9IHBhcnNlVGV4dCh2YWx1ZSk7XG5cdCAgICAvLyByZXNldCBhcmdcblx0ICAgIGFyZyA9IG51bGw7XG5cdCAgICAvLyBjaGVjayBtb2RpZmllcnNcblx0ICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKG5hbWUpO1xuXHQgICAgbmFtZSA9IG5hbWUucmVwbGFjZShtb2RpZmllclJFLCAnJyk7XG5cdFxuXHQgICAgLy8gYXR0cmlidXRlIGludGVycG9sYXRpb25zXG5cdCAgICBpZiAodG9rZW5zKSB7XG5cdCAgICAgIHZhbHVlID0gdG9rZW5zVG9FeHAodG9rZW5zKTtcblx0ICAgICAgYXJnID0gbmFtZTtcblx0ICAgICAgcHVzaERpcignYmluZCcsIGRpcmVjdGl2ZXMuYmluZCwgdG9rZW5zKTtcblx0ICAgICAgLy8gd2FybiBhZ2FpbnN0IG1peGluZyBtdXN0YWNoZXMgd2l0aCB2LWJpbmRcblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICBpZiAobmFtZSA9PT0gJ2NsYXNzJyAmJiBBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGF0dHJzLCBmdW5jdGlvbiAoYXR0cikge1xuXHQgICAgICAgICAgcmV0dXJuIGF0dHIubmFtZSA9PT0gJzpjbGFzcycgfHwgYXR0ci5uYW1lID09PSAndi1iaW5kOmNsYXNzJztcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgd2FybignY2xhc3M9XCInICsgcmF3VmFsdWUgKyAnXCI6IERvIG5vdCBtaXggbXVzdGFjaGUgaW50ZXJwb2xhdGlvbiAnICsgJ2FuZCB2LWJpbmQgZm9yIFwiY2xhc3NcIiBvbiB0aGUgc2FtZSBlbGVtZW50LiBVc2Ugb25lIG9yIHRoZSBvdGhlci4nLCBvcHRpb25zKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZVxuXHRcblx0ICAgICAgLy8gc3BlY2lhbCBhdHRyaWJ1dGU6IHRyYW5zaXRpb25cblx0ICAgICAgaWYgKHRyYW5zaXRpb25SRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgbW9kaWZpZXJzLmxpdGVyYWwgPSAhYmluZFJFLnRlc3QobmFtZSk7XG5cdCAgICAgICAgcHVzaERpcigndHJhbnNpdGlvbicsIGludGVybmFsRGlyZWN0aXZlcy50cmFuc2l0aW9uKTtcblx0ICAgICAgfSBlbHNlXG5cdFxuXHQgICAgICAgIC8vIGV2ZW50IGhhbmRsZXJzXG5cdCAgICAgICAgaWYgKG9uUkUudGVzdChuYW1lKSkge1xuXHQgICAgICAgICAgYXJnID0gbmFtZS5yZXBsYWNlKG9uUkUsICcnKTtcblx0ICAgICAgICAgIHB1c2hEaXIoJ29uJywgZGlyZWN0aXZlcy5vbik7XG5cdCAgICAgICAgfSBlbHNlXG5cdFxuXHQgICAgICAgICAgLy8gYXR0cmlidXRlIGJpbmRpbmdzXG5cdCAgICAgICAgICBpZiAoYmluZFJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICAgICAgZGlyTmFtZSA9IG5hbWUucmVwbGFjZShiaW5kUkUsICcnKTtcblx0ICAgICAgICAgICAgaWYgKGRpck5hbWUgPT09ICdzdHlsZScgfHwgZGlyTmFtZSA9PT0gJ2NsYXNzJykge1xuXHQgICAgICAgICAgICAgIHB1c2hEaXIoZGlyTmFtZSwgaW50ZXJuYWxEaXJlY3RpdmVzW2Rpck5hbWVdKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICBhcmcgPSBkaXJOYW1lO1xuXHQgICAgICAgICAgICAgIHB1c2hEaXIoJ2JpbmQnLCBkaXJlY3RpdmVzLmJpbmQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9IGVsc2Vcblx0XG5cdCAgICAgICAgICAgIC8vIG5vcm1hbCBkaXJlY3RpdmVzXG5cdCAgICAgICAgICAgIGlmIChtYXRjaGVkID0gbmFtZS5tYXRjaChkaXJBdHRyUkUpKSB7XG5cdCAgICAgICAgICAgICAgZGlyTmFtZSA9IG1hdGNoZWRbMV07XG5cdCAgICAgICAgICAgICAgYXJnID0gbWF0Y2hlZFsyXTtcblx0XG5cdCAgICAgICAgICAgICAgLy8gc2tpcCB2LWVsc2UgKHdoZW4gdXNlZCB3aXRoIHYtc2hvdylcblx0ICAgICAgICAgICAgICBpZiAoZGlyTmFtZSA9PT0gJ2Vsc2UnKSB7XG5cdCAgICAgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgIGRpckRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZGlyZWN0aXZlcycsIGRpck5hbWUsIHRydWUpO1xuXHQgICAgICAgICAgICAgIGlmIChkaXJEZWYpIHtcblx0ICAgICAgICAgICAgICAgIHB1c2hEaXIoZGlyTmFtZSwgZGlyRGVmKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFB1c2ggYSBkaXJlY3RpdmUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZGlyTmFtZVxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSBkZWZcblx0ICAgKiBAcGFyYW0ge0FycmF5fSBbaW50ZXJwVG9rZW5zXVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBwdXNoRGlyKGRpck5hbWUsIGRlZiwgaW50ZXJwVG9rZW5zKSB7XG5cdCAgICB2YXIgaGFzT25lVGltZVRva2VuID0gaW50ZXJwVG9rZW5zICYmIGhhc09uZVRpbWUoaW50ZXJwVG9rZW5zKTtcblx0ICAgIHZhciBwYXJzZWQgPSAhaGFzT25lVGltZVRva2VuICYmIHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcblx0ICAgIGRpcnMucHVzaCh7XG5cdCAgICAgIG5hbWU6IGRpck5hbWUsXG5cdCAgICAgIGF0dHI6IHJhd05hbWUsXG5cdCAgICAgIHJhdzogcmF3VmFsdWUsXG5cdCAgICAgIGRlZjogZGVmLFxuXHQgICAgICBhcmc6IGFyZyxcblx0ICAgICAgbW9kaWZpZXJzOiBtb2RpZmllcnMsXG5cdCAgICAgIC8vIGNvbnZlcnNpb24gZnJvbSBpbnRlcnBvbGF0aW9uIHN0cmluZ3Mgd2l0aCBvbmUtdGltZSB0b2tlblxuXHQgICAgICAvLyB0byBleHByZXNzaW9uIGlzIGRpZmZlcmVkIHVudGlsIGRpcmVjdGl2ZSBiaW5kIHRpbWUgc28gdGhhdCB3ZVxuXHQgICAgICAvLyBoYXZlIGFjY2VzcyB0byB0aGUgYWN0dWFsIHZtIGNvbnRleHQgZm9yIG9uZS10aW1lIGJpbmRpbmdzLlxuXHQgICAgICBleHByZXNzaW9uOiBwYXJzZWQgJiYgcGFyc2VkLmV4cHJlc3Npb24sXG5cdCAgICAgIGZpbHRlcnM6IHBhcnNlZCAmJiBwYXJzZWQuZmlsdGVycyxcblx0ICAgICAgaW50ZXJwOiBpbnRlcnBUb2tlbnMsXG5cdCAgICAgIGhhc09uZVRpbWU6IGhhc09uZVRpbWVUb2tlblxuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICBpZiAoZGlycy5sZW5ndGgpIHtcblx0ICAgIHJldHVybiBtYWtlTm9kZUxpbmtGbihkaXJzKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBtb2RpZmllcnMgZnJvbSBkaXJlY3RpdmUgYXR0cmlidXRlIG5hbWUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZU1vZGlmaWVycyhuYW1lKSB7XG5cdCAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgdmFyIG1hdGNoID0gbmFtZS5tYXRjaChtb2RpZmllclJFKTtcblx0ICBpZiAobWF0Y2gpIHtcblx0ICAgIHZhciBpID0gbWF0Y2gubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICByZXNbbWF0Y2hbaV0uc2xpY2UoMSldID0gdHJ1ZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEJ1aWxkIGEgbGluayBmdW5jdGlvbiBmb3IgYWxsIGRpcmVjdGl2ZXMgb24gYSBzaW5nbGUgbm9kZS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gZGlyZWN0aXZlc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gZGlyZWN0aXZlc0xpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VOb2RlTGlua0ZuKGRpcmVjdGl2ZXMpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gbm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICAvLyByZXZlcnNlIGFwcGx5IGJlY2F1c2UgaXQncyBzb3J0ZWQgbG93IHRvIGhpZ2hcblx0ICAgIHZhciBpID0gZGlyZWN0aXZlcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZtLl9iaW5kRGlyKGRpcmVjdGl2ZXNbaV0sIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGludGVycG9sYXRpb24gc3RyaW5nIGNvbnRhaW5zIG9uZS10aW1lIHRva2Vucy5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gdG9rZW5zXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaGFzT25lVGltZSh0b2tlbnMpIHtcblx0ICB2YXIgaSA9IHRva2Vucy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgaWYgKHRva2Vuc1tpXS5vbmVUaW1lKSByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzU2NyaXB0KGVsKSB7XG5cdCAgcmV0dXJuIGVsLnRhZ05hbWUgPT09ICdTQ1JJUFQnICYmICghZWwuaGFzQXR0cmlidXRlKCd0eXBlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCd0eXBlJykgPT09ICd0ZXh0L2phdmFzY3JpcHQnKTtcblx0fVxuXHRcblx0dmFyIHNwZWNpYWxDaGFyUkUgPSAvW15cXHdcXC06XFwuXS87XG5cdFxuXHQvKipcblx0ICogUHJvY2VzcyBhbiBlbGVtZW50IG9yIGEgRG9jdW1lbnRGcmFnbWVudCBiYXNlZCBvbiBhXG5cdCAqIGluc3RhbmNlIG9wdGlvbiBvYmplY3QuIFRoaXMgYWxsb3dzIHVzIHRvIHRyYW5zY2x1ZGVcblx0ICogYSB0ZW1wbGF0ZSBub2RlL2ZyYWdtZW50IGJlZm9yZSB0aGUgaW5zdGFuY2UgaXMgY3JlYXRlZCxcblx0ICogc28gdGhlIHByb2Nlc3NlZCBmcmFnbWVudCBjYW4gdGhlbiBiZSBjbG9uZWQgYW5kIHJldXNlZFxuXHQgKiBpbiB2LWZvci5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdHJhbnNjbHVkZShlbCwgb3B0aW9ucykge1xuXHQgIC8vIGV4dHJhY3QgY29udGFpbmVyIGF0dHJpYnV0ZXMgdG8gcGFzcyB0aGVtIGRvd25cblx0ICAvLyB0byBjb21waWxlciwgYmVjYXVzZSB0aGV5IG5lZWQgdG8gYmUgY29tcGlsZWQgaW5cblx0ICAvLyBwYXJlbnQgc2NvcGUuIHdlIGFyZSBtdXRhdGluZyB0aGUgb3B0aW9ucyBvYmplY3QgaGVyZVxuXHQgIC8vIGFzc3VtaW5nIHRoZSBzYW1lIG9iamVjdCB3aWxsIGJlIHVzZWQgZm9yIGNvbXBpbGVcblx0ICAvLyByaWdodCBhZnRlciB0aGlzLlxuXHQgIGlmIChvcHRpb25zKSB7XG5cdCAgICBvcHRpb25zLl9jb250YWluZXJBdHRycyA9IGV4dHJhY3RBdHRycyhlbCk7XG5cdCAgfVxuXHQgIC8vIGZvciB0ZW1wbGF0ZSB0YWdzLCB3aGF0IHdlIHdhbnQgaXMgaXRzIGNvbnRlbnQgYXNcblx0ICAvLyBhIGRvY3VtZW50RnJhZ21lbnQgKGZvciBmcmFnbWVudCBpbnN0YW5jZXMpXG5cdCAgaWYgKGlzVGVtcGxhdGUoZWwpKSB7XG5cdCAgICBlbCA9IHBhcnNlVGVtcGxhdGUoZWwpO1xuXHQgIH1cblx0ICBpZiAob3B0aW9ucykge1xuXHQgICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50ICYmICFvcHRpb25zLnRlbXBsYXRlKSB7XG5cdCAgICAgIG9wdGlvbnMudGVtcGxhdGUgPSAnPHNsb3Q+PC9zbG90Pic7XG5cdCAgICB9XG5cdCAgICBpZiAob3B0aW9ucy50ZW1wbGF0ZSkge1xuXHQgICAgICBvcHRpb25zLl9jb250ZW50ID0gZXh0cmFjdENvbnRlbnQoZWwpO1xuXHQgICAgICBlbCA9IHRyYW5zY2x1ZGVUZW1wbGF0ZShlbCwgb3B0aW9ucyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmIChpc0ZyYWdtZW50KGVsKSkge1xuXHQgICAgLy8gYW5jaG9ycyBmb3IgZnJhZ21lbnQgaW5zdGFuY2Vcblx0ICAgIC8vIHBhc3NpbmcgaW4gYHBlcnNpc3Q6IHRydWVgIHRvIGF2b2lkIHRoZW0gYmVpbmdcblx0ICAgIC8vIGRpc2NhcmRlZCBieSBJRSBkdXJpbmcgdGVtcGxhdGUgY2xvbmluZ1xuXHQgICAgcHJlcGVuZChjcmVhdGVBbmNob3IoJ3Ytc3RhcnQnLCB0cnVlKSwgZWwpO1xuXHQgICAgZWwuYXBwZW5kQ2hpbGQoY3JlYXRlQW5jaG9yKCd2LWVuZCcsIHRydWUpKTtcblx0ICB9XG5cdCAgcmV0dXJuIGVsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJvY2VzcyB0aGUgdGVtcGxhdGUgb3B0aW9uLlxuXHQgKiBJZiB0aGUgcmVwbGFjZSBvcHRpb24gaXMgdHJ1ZSB0aGlzIHdpbGwgc3dhcCB0aGUgJGVsLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0cmFuc2NsdWRlVGVtcGxhdGUoZWwsIG9wdGlvbnMpIHtcblx0ICB2YXIgdGVtcGxhdGUgPSBvcHRpb25zLnRlbXBsYXRlO1xuXHQgIHZhciBmcmFnID0gcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgdHJ1ZSk7XG5cdCAgaWYgKGZyYWcpIHtcblx0ICAgIHZhciByZXBsYWNlciA9IGZyYWcuZmlyc3RDaGlsZDtcblx0ICAgIHZhciB0YWcgPSByZXBsYWNlci50YWdOYW1lICYmIHJlcGxhY2VyLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblx0ICAgIGlmIChvcHRpb25zLnJlcGxhY2UpIHtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChlbCA9PT0gZG9jdW1lbnQuYm9keSkge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignWW91IGFyZSBtb3VudGluZyBhbiBpbnN0YW5jZSB3aXRoIGEgdGVtcGxhdGUgdG8gJyArICc8Ym9keT4uIFRoaXMgd2lsbCByZXBsYWNlIDxib2R5PiBlbnRpcmVseS4gWW91ICcgKyAnc2hvdWxkIHByb2JhYmx5IHVzZSBgcmVwbGFjZTogZmFsc2VgIGhlcmUuJyk7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gdGhlcmUgYXJlIG1hbnkgY2FzZXMgd2hlcmUgdGhlIGluc3RhbmNlIG11c3Rcblx0ICAgICAgLy8gYmVjb21lIGEgZnJhZ21lbnQgaW5zdGFuY2U6IGJhc2ljYWxseSBhbnl0aGluZyB0aGF0XG5cdCAgICAgIC8vIGNhbiBjcmVhdGUgbW9yZSB0aGFuIDEgcm9vdCBub2Rlcy5cblx0ICAgICAgaWYgKFxuXHQgICAgICAvLyBtdWx0aS1jaGlsZHJlbiB0ZW1wbGF0ZVxuXHQgICAgICBmcmFnLmNoaWxkTm9kZXMubGVuZ3RoID4gMSB8fFxuXHQgICAgICAvLyBub24tZWxlbWVudCB0ZW1wbGF0ZVxuXHQgICAgICByZXBsYWNlci5ub2RlVHlwZSAhPT0gMSB8fFxuXHQgICAgICAvLyBzaW5nbGUgbmVzdGVkIGNvbXBvbmVudFxuXHQgICAgICB0YWcgPT09ICdjb21wb25lbnQnIHx8IHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykgfHwgaGFzQmluZEF0dHIocmVwbGFjZXIsICdpcycpIHx8XG5cdCAgICAgIC8vIGVsZW1lbnQgZGlyZWN0aXZlXG5cdCAgICAgIHJlc29sdmVBc3NldChvcHRpb25zLCAnZWxlbWVudERpcmVjdGl2ZXMnLCB0YWcpIHx8XG5cdCAgICAgIC8vIGZvciBibG9ja1xuXHQgICAgICByZXBsYWNlci5oYXNBdHRyaWJ1dGUoJ3YtZm9yJykgfHxcblx0ICAgICAgLy8gaWYgYmxvY2tcblx0ICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcblx0ICAgICAgICByZXR1cm4gZnJhZztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBvcHRpb25zLl9yZXBsYWNlckF0dHJzID0gZXh0cmFjdEF0dHJzKHJlcGxhY2VyKTtcblx0ICAgICAgICBtZXJnZUF0dHJzKGVsLCByZXBsYWNlcik7XG5cdCAgICAgICAgcmV0dXJuIHJlcGxhY2VyO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbC5hcHBlbmRDaGlsZChmcmFnKTtcblx0ICAgICAgcmV0dXJuIGVsO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgdGVtcGxhdGUgb3B0aW9uOiAnICsgdGVtcGxhdGUpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEhlbHBlciB0byBleHRyYWN0IGEgY29tcG9uZW50IGNvbnRhaW5lcidzIGF0dHJpYnV0ZXNcblx0ICogaW50byBhIHBsYWluIG9iamVjdCBhcnJheS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcmV0dXJuIHtBcnJheX1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBleHRyYWN0QXR0cnMoZWwpIHtcblx0ICBpZiAoZWwubm9kZVR5cGUgPT09IDEgJiYgZWwuaGFzQXR0cmlidXRlcygpKSB7XG5cdCAgICByZXR1cm4gdG9BcnJheShlbC5hdHRyaWJ1dGVzKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNZXJnZSB0aGUgYXR0cmlidXRlcyBvZiB0d28gZWxlbWVudHMsIGFuZCBtYWtlIHN1cmVcblx0ICogdGhlIGNsYXNzIG5hbWVzIGFyZSBtZXJnZWQgcHJvcGVybHkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZnJvbVxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRvXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWVyZ2VBdHRycyhmcm9tLCB0bykge1xuXHQgIHZhciBhdHRycyA9IGZyb20uYXR0cmlidXRlcztcblx0ICB2YXIgaSA9IGF0dHJzLmxlbmd0aDtcblx0ICB2YXIgbmFtZSwgdmFsdWU7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG5cdCAgICB2YWx1ZSA9IGF0dHJzW2ldLnZhbHVlO1xuXHQgICAgaWYgKCF0by5oYXNBdHRyaWJ1dGUobmFtZSkgJiYgIXNwZWNpYWxDaGFyUkUudGVzdChuYW1lKSkge1xuXHQgICAgICB0by5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuXHQgICAgfSBlbHNlIGlmIChuYW1lID09PSAnY2xhc3MnICYmICFwYXJzZVRleHQodmFsdWUpICYmICh2YWx1ZSA9IHZhbHVlLnRyaW0oKSkpIHtcblx0ICAgICAgdmFsdWUuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcblx0ICAgICAgICBhZGRDbGFzcyh0bywgY2xzKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogU2NhbiBhbmQgZGV0ZXJtaW5lIHNsb3QgY29udGVudCBkaXN0cmlidXRpb24uXG5cdCAqIFdlIGRvIHRoaXMgZHVyaW5nIHRyYW5zY2x1c2lvbiBpbnN0ZWFkIGF0IGNvbXBpbGUgdGltZSBzbyB0aGF0XG5cdCAqIHRoZSBkaXN0cmlidXRpb24gaXMgZGVjb3VwbGVkIGZyb20gdGhlIGNvbXBpbGF0aW9uIG9yZGVyIG9mXG5cdCAqIHRoZSBzbG90cy5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IHRlbXBsYXRlXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gY29udGVudFxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXNvbHZlU2xvdHModm0sIGNvbnRlbnQpIHtcblx0ICBpZiAoIWNvbnRlbnQpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIGNvbnRlbnRzID0gdm0uX3Nsb3RDb250ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgdmFyIGVsLCBuYW1lO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gY29udGVudC5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGVsID0gY29udGVudC5jaGlsZHJlbltpXTtcblx0ICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICBpZiAobmFtZSA9IGVsLmdldEF0dHJpYnV0ZSgnc2xvdCcpKSB7XG5cdCAgICAgIChjb250ZW50c1tuYW1lXSB8fCAoY29udGVudHNbbmFtZV0gPSBbXSkpLnB1c2goZWwpO1xuXHQgICAgfVxuXHQgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgZ2V0QmluZEF0dHIoZWwsICdzbG90JykpIHtcblx0ICAgICAgd2FybignVGhlIFwic2xvdFwiIGF0dHJpYnV0ZSBtdXN0IGJlIHN0YXRpYy4nLCB2bS4kcGFyZW50KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgZm9yIChuYW1lIGluIGNvbnRlbnRzKSB7XG5cdCAgICBjb250ZW50c1tuYW1lXSA9IGV4dHJhY3RGcmFnbWVudChjb250ZW50c1tuYW1lXSwgY29udGVudCk7XG5cdCAgfVxuXHQgIGlmIChjb250ZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xuXHQgICAgdmFyIG5vZGVzID0gY29udGVudC5jaGlsZE5vZGVzO1xuXHQgICAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gMSAmJiBub2Rlc1swXS5ub2RlVHlwZSA9PT0gMyAmJiAhbm9kZXNbMF0uZGF0YS50cmltKCkpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgY29udGVudHNbJ2RlZmF1bHQnXSA9IGV4dHJhY3RGcmFnbWVudChjb250ZW50LmNoaWxkTm9kZXMsIGNvbnRlbnQpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEV4dHJhY3QgcXVhbGlmaWVkIGNvbnRlbnQgbm9kZXMgZnJvbSBhIG5vZGUgbGlzdC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlTGlzdH0gbm9kZXNcblx0ICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBleHRyYWN0RnJhZ21lbnQobm9kZXMsIHBhcmVudCkge1xuXHQgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXHQgIG5vZGVzID0gdG9BcnJheShub2Rlcyk7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHZhciBub2RlID0gbm9kZXNbaV07XG5cdCAgICBpZiAoaXNUZW1wbGF0ZShub2RlKSAmJiAhbm9kZS5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSAmJiAhbm9kZS5oYXNBdHRyaWJ1dGUoJ3YtZm9yJykpIHtcblx0ICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xuXHQgICAgICBub2RlID0gcGFyc2VUZW1wbGF0ZShub2RlLCB0cnVlKTtcblx0ICAgIH1cblx0ICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZSk7XG5cdCAgfVxuXHQgIHJldHVybiBmcmFnO1xuXHR9XG5cdFxuXHRcblx0XG5cdHZhciBjb21waWxlciA9IE9iamVjdC5mcmVlemUoe1xuXHRcdGNvbXBpbGU6IGNvbXBpbGUsXG5cdFx0Y29tcGlsZUFuZExpbmtQcm9wczogY29tcGlsZUFuZExpbmtQcm9wcyxcblx0XHRjb21waWxlUm9vdDogY29tcGlsZVJvb3QsXG5cdFx0dHJhbnNjbHVkZTogdHJhbnNjbHVkZSxcblx0XHRyZXNvbHZlU2xvdHM6IHJlc29sdmVTbG90c1xuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIHN0YXRlTWl4aW4gKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIEFjY2Vzc29yIGZvciBgJGRhdGFgIHByb3BlcnR5LCBzaW5jZSBzZXR0aW5nICRkYXRhXG5cdCAgICogcmVxdWlyZXMgb2JzZXJ2aW5nIHRoZSBuZXcgb2JqZWN0IGFuZCB1cGRhdGluZ1xuXHQgICAqIHByb3hpZWQgcHJvcGVydGllcy5cblx0ICAgKi9cblx0XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckZGF0YScsIHtcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5fZGF0YTtcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXdEYXRhKSB7XG5cdCAgICAgIGlmIChuZXdEYXRhICE9PSB0aGlzLl9kYXRhKSB7XG5cdCAgICAgICAgdGhpcy5fc2V0RGF0YShuZXdEYXRhKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICAvKipcblx0ICAgKiBTZXR1cCB0aGUgc2NvcGUgb2YgYW4gaW5zdGFuY2UsIHdoaWNoIGNvbnRhaW5zOlxuXHQgICAqIC0gb2JzZXJ2ZWQgZGF0YVxuXHQgICAqIC0gY29tcHV0ZWQgcHJvcGVydGllc1xuXHQgICAqIC0gdXNlciBtZXRob2RzXG5cdCAgICogLSBtZXRhIHByb3BlcnRpZXNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdFN0YXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5faW5pdFByb3BzKCk7XG5cdCAgICB0aGlzLl9pbml0TWV0YSgpO1xuXHQgICAgdGhpcy5faW5pdE1ldGhvZHMoKTtcblx0ICAgIHRoaXMuX2luaXREYXRhKCk7XG5cdCAgICB0aGlzLl9pbml0Q29tcHV0ZWQoKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbml0aWFsaXplIHByb3BzLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0UHJvcHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG5cdCAgICB2YXIgZWwgPSBvcHRpb25zLmVsO1xuXHQgICAgdmFyIHByb3BzID0gb3B0aW9ucy5wcm9wcztcblx0ICAgIGlmIChwcm9wcyAmJiAhZWwpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdQcm9wcyB3aWxsIG5vdCBiZSBjb21waWxlZCBpZiBubyBgZWxgIG9wdGlvbiBpcyAnICsgJ3Byb3ZpZGVkIGF0IGluc3RhbnRpYXRpb24uJywgdGhpcyk7XG5cdCAgICB9XG5cdCAgICAvLyBtYWtlIHN1cmUgdG8gY29udmVydCBzdHJpbmcgc2VsZWN0b3JzIGludG8gZWxlbWVudCBub3dcblx0ICAgIGVsID0gb3B0aW9ucy5lbCA9IHF1ZXJ5KGVsKTtcblx0ICAgIHRoaXMuX3Byb3BzVW5saW5rRm4gPSBlbCAmJiBlbC5ub2RlVHlwZSA9PT0gMSAmJiBwcm9wc1xuXHQgICAgLy8gcHJvcHMgbXVzdCBiZSBsaW5rZWQgaW4gcHJvcGVyIHNjb3BlIGlmIGluc2lkZSB2LWZvclxuXHQgICAgPyBjb21waWxlQW5kTGlua1Byb3BzKHRoaXMsIGVsLCBwcm9wcywgdGhpcy5fc2NvcGUpIDogbnVsbDtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbml0aWFsaXplIHRoZSBkYXRhLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0RGF0YSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBkYXRhRm4gPSB0aGlzLiRvcHRpb25zLmRhdGE7XG5cdCAgICB2YXIgZGF0YSA9IHRoaXMuX2RhdGEgPSBkYXRhRm4gPyBkYXRhRm4oKSA6IHt9O1xuXHQgICAgaWYgKCFpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG5cdCAgICAgIGRhdGEgPSB7fTtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdkYXRhIGZ1bmN0aW9ucyBzaG91bGQgcmV0dXJuIGFuIG9iamVjdC4nLCB0aGlzKTtcblx0ICAgIH1cblx0ICAgIHZhciBwcm9wcyA9IHRoaXMuX3Byb3BzO1xuXHQgICAgLy8gcHJveHkgZGF0YSBvbiBpbnN0YW5jZVxuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKTtcblx0ICAgIHZhciBpLCBrZXk7XG5cdCAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGtleSA9IGtleXNbaV07XG5cdCAgICAgIC8vIHRoZXJlIGFyZSB0d28gc2NlbmFyaW9zIHdoZXJlIHdlIGNhbiBwcm94eSBhIGRhdGEga2V5OlxuXHQgICAgICAvLyAxLiBpdCdzIG5vdCBhbHJlYWR5IGRlZmluZWQgYXMgYSBwcm9wXG5cdCAgICAgIC8vIDIuIGl0J3MgcHJvdmlkZWQgdmlhIGEgaW5zdGFudGlhdGlvbiBvcHRpb24gQU5EIHRoZXJlIGFyZSBub1xuXHQgICAgICAvLyAgICB0ZW1wbGF0ZSBwcm9wIHByZXNlbnRcblx0ICAgICAgaWYgKCFwcm9wcyB8fCAhaGFzT3duKHByb3BzLCBrZXkpKSB7XG5cdCAgICAgICAgdGhpcy5fcHJveHkoa2V5KTtcblx0ICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgd2FybignRGF0YSBmaWVsZCBcIicgKyBrZXkgKyAnXCIgaXMgYWxyZWFkeSBkZWZpbmVkICcgKyAnYXMgYSBwcm9wLiBUbyBwcm92aWRlIGRlZmF1bHQgdmFsdWUgZm9yIGEgcHJvcCwgdXNlIHRoZSBcImRlZmF1bHRcIiAnICsgJ3Byb3Agb3B0aW9uOyBpZiB5b3Ugd2FudCB0byBwYXNzIHByb3AgdmFsdWVzIHRvIGFuIGluc3RhbnRpYXRpb24gJyArICdjYWxsLCB1c2UgdGhlIFwicHJvcHNEYXRhXCIgb3B0aW9uLicsIHRoaXMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBvYnNlcnZlIGRhdGFcblx0ICAgIG9ic2VydmUoZGF0YSwgdGhpcyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogU3dhcCB0aGUgaW5zdGFuY2UncyAkZGF0YS4gQ2FsbGVkIGluICRkYXRhJ3Mgc2V0dGVyLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG5ld0RhdGFcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fc2V0RGF0YSA9IGZ1bmN0aW9uIChuZXdEYXRhKSB7XG5cdCAgICBuZXdEYXRhID0gbmV3RGF0YSB8fCB7fTtcblx0ICAgIHZhciBvbGREYXRhID0gdGhpcy5fZGF0YTtcblx0ICAgIHRoaXMuX2RhdGEgPSBuZXdEYXRhO1xuXHQgICAgdmFyIGtleXMsIGtleSwgaTtcblx0ICAgIC8vIHVucHJveHkga2V5cyBub3QgcHJlc2VudCBpbiBuZXcgZGF0YVxuXHQgICAga2V5cyA9IE9iamVjdC5rZXlzKG9sZERhdGEpO1xuXHQgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICBpZiAoIShrZXkgaW4gbmV3RGF0YSkpIHtcblx0ICAgICAgICB0aGlzLl91bnByb3h5KGtleSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIHByb3h5IGtleXMgbm90IGFscmVhZHkgcHJveGllZCxcblx0ICAgIC8vIGFuZCB0cmlnZ2VyIGNoYW5nZSBmb3IgY2hhbmdlZCB2YWx1ZXNcblx0ICAgIGtleXMgPSBPYmplY3Qua2V5cyhuZXdEYXRhKTtcblx0ICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgaWYgKCFoYXNPd24odGhpcywga2V5KSkge1xuXHQgICAgICAgIC8vIG5ldyBwcm9wZXJ0eVxuXHQgICAgICAgIHRoaXMuX3Byb3h5KGtleSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIG9sZERhdGEuX19vYl9fLnJlbW92ZVZtKHRoaXMpO1xuXHQgICAgb2JzZXJ2ZShuZXdEYXRhLCB0aGlzKTtcblx0ICAgIHRoaXMuX2RpZ2VzdCgpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFByb3h5IGEgcHJvcGVydHksIHNvIHRoYXRcblx0ICAgKiB2bS5wcm9wID09PSB2bS5fZGF0YS5wcm9wXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX3Byb3h5ID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgaWYgKCFpc1Jlc2VydmVkKGtleSkpIHtcblx0ICAgICAgLy8gbmVlZCB0byBzdG9yZSByZWYgdG8gc2VsZiBoZXJlXG5cdCAgICAgIC8vIGJlY2F1c2UgdGhlc2UgZ2V0dGVyL3NldHRlcnMgbWlnaHRcblx0ICAgICAgLy8gYmUgY2FsbGVkIGJ5IGNoaWxkIHNjb3BlcyB2aWFcblx0ICAgICAgLy8gcHJvdG90eXBlIGluaGVyaXRhbmNlLlxuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCBrZXksIHtcblx0ICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uIHByb3h5R2V0dGVyKCkge1xuXHQgICAgICAgICAgcmV0dXJuIHNlbGYuX2RhdGFba2V5XTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHNldDogZnVuY3Rpb24gcHJveHlTZXR0ZXIodmFsKSB7XG5cdCAgICAgICAgICBzZWxmLl9kYXRhW2tleV0gPSB2YWw7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBVbnByb3h5IGEgcHJvcGVydHkuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX3VucHJveHkgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICBpZiAoIWlzUmVzZXJ2ZWQoa2V5KSkge1xuXHQgICAgICBkZWxldGUgdGhpc1trZXldO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEZvcmNlIHVwZGF0ZSBvbiBldmVyeSB3YXRjaGVyIGluIHNjb3BlLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9kaWdlc3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMuX3dhdGNoZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB0aGlzLl93YXRjaGVyc1tpXS51cGRhdGUodHJ1ZSk7IC8vIHNoYWxsb3cgdXBkYXRlc1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHVwIGNvbXB1dGVkIHByb3BlcnRpZXMuIFRoZXkgYXJlIGVzc2VudGlhbGx5XG5cdCAgICogc3BlY2lhbCBnZXR0ZXIvc2V0dGVyc1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBub29wKCkge31cblx0ICBWdWUucHJvdG90eXBlLl9pbml0Q29tcHV0ZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgY29tcHV0ZWQgPSB0aGlzLiRvcHRpb25zLmNvbXB1dGVkO1xuXHQgICAgaWYgKGNvbXB1dGVkKSB7XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiBjb21wdXRlZCkge1xuXHQgICAgICAgIHZhciB1c2VyRGVmID0gY29tcHV0ZWRba2V5XTtcblx0ICAgICAgICB2YXIgZGVmID0ge1xuXHQgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgaWYgKHR5cGVvZiB1c2VyRGVmID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICBkZWYuZ2V0ID0gbWFrZUNvbXB1dGVkR2V0dGVyKHVzZXJEZWYsIHRoaXMpO1xuXHQgICAgICAgICAgZGVmLnNldCA9IG5vb3A7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGRlZi5nZXQgPSB1c2VyRGVmLmdldCA/IHVzZXJEZWYuY2FjaGUgIT09IGZhbHNlID8gbWFrZUNvbXB1dGVkR2V0dGVyKHVzZXJEZWYuZ2V0LCB0aGlzKSA6IGJpbmQodXNlckRlZi5nZXQsIHRoaXMpIDogbm9vcDtcblx0ICAgICAgICAgIGRlZi5zZXQgPSB1c2VyRGVmLnNldCA/IGJpbmQodXNlckRlZi5zZXQsIHRoaXMpIDogbm9vcDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGtleSwgZGVmKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIG1ha2VDb21wdXRlZEdldHRlcihnZXR0ZXIsIG93bmVyKSB7XG5cdCAgICB2YXIgd2F0Y2hlciA9IG5ldyBXYXRjaGVyKG93bmVyLCBnZXR0ZXIsIG51bGwsIHtcblx0ICAgICAgbGF6eTogdHJ1ZVxuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gY29tcHV0ZWRHZXR0ZXIoKSB7XG5cdCAgICAgIGlmICh3YXRjaGVyLmRpcnR5KSB7XG5cdCAgICAgICAgd2F0Y2hlci5ldmFsdWF0ZSgpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG5cdCAgICAgICAgd2F0Y2hlci5kZXBlbmQoKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gd2F0Y2hlci52YWx1ZTtcblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBTZXR1cCBpbnN0YW5jZSBtZXRob2RzLiBNZXRob2RzIG11c3QgYmUgYm91bmQgdG8gdGhlXG5cdCAgICogaW5zdGFuY2Ugc2luY2UgdGhleSBtaWdodCBiZSBwYXNzZWQgZG93biBhcyBhIHByb3AgdG9cblx0ICAgKiBjaGlsZCBjb21wb25lbnRzLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0TWV0aG9kcyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBtZXRob2RzID0gdGhpcy4kb3B0aW9ucy5tZXRob2RzO1xuXHQgICAgaWYgKG1ldGhvZHMpIHtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIG1ldGhvZHMpIHtcblx0ICAgICAgICB0aGlzW2tleV0gPSBiaW5kKG1ldGhvZHNba2V5XSwgdGhpcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbml0aWFsaXplIG1ldGEgaW5mb3JtYXRpb24gbGlrZSAkaW5kZXgsICRrZXkgJiAkdmFsdWUuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRNZXRhID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIG1ldGFzID0gdGhpcy4kb3B0aW9ucy5fbWV0YTtcblx0ICAgIGlmIChtZXRhcykge1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gbWV0YXMpIHtcblx0ICAgICAgICBkZWZpbmVSZWFjdGl2ZSh0aGlzLCBrZXksIG1ldGFzW2tleV0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0dmFyIGV2ZW50UkUgPSAvXnYtb246fF5ALztcblx0XG5cdGZ1bmN0aW9uIGV2ZW50c01peGluIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBTZXR1cCB0aGUgaW5zdGFuY2UncyBvcHRpb24gZXZlbnRzICYgd2F0Y2hlcnMuXG5cdCAgICogSWYgdGhlIHZhbHVlIGlzIGEgc3RyaW5nLCB3ZSBwdWxsIGl0IGZyb20gdGhlXG5cdCAgICogaW5zdGFuY2UncyBtZXRob2RzIGJ5IG5hbWUuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG5cdCAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQpIHtcblx0ICAgICAgcmVnaXN0ZXJDb21wb25lbnRFdmVudHModGhpcywgb3B0aW9ucy5lbCk7XG5cdCAgICB9XG5cdCAgICByZWdpc3RlckNhbGxiYWNrcyh0aGlzLCAnJG9uJywgb3B0aW9ucy5ldmVudHMpO1xuXHQgICAgcmVnaXN0ZXJDYWxsYmFja3ModGhpcywgJyR3YXRjaCcsIG9wdGlvbnMud2F0Y2gpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlZ2lzdGVyIHYtb24gZXZlbnRzIG9uIGEgY2hpbGQgY29tcG9uZW50XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJlZ2lzdGVyQ29tcG9uZW50RXZlbnRzKHZtLCBlbCkge1xuXHQgICAgdmFyIGF0dHJzID0gZWwuYXR0cmlidXRlcztcblx0ICAgIHZhciBuYW1lLCB2YWx1ZSwgaGFuZGxlcjtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuXHQgICAgICBpZiAoZXZlbnRSRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShldmVudFJFLCAnJyk7XG5cdCAgICAgICAgLy8gZm9yY2UgdGhlIGV4cHJlc3Npb24gaW50byBhIHN0YXRlbWVudCBzbyB0aGF0XG5cdCAgICAgICAgLy8gaXQgYWx3YXlzIGR5bmFtaWNhbGx5IHJlc29sdmVzIHRoZSBtZXRob2QgdG8gY2FsbCAoIzI2NzApXG5cdCAgICAgICAgLy8ga2luZGEgdWdseSBoYWNrLCBidXQgZG9lcyB0aGUgam9iLlxuXHQgICAgICAgIHZhbHVlID0gYXR0cnNbaV0udmFsdWU7XG5cdCAgICAgICAgaWYgKGlzU2ltcGxlUGF0aCh2YWx1ZSkpIHtcblx0ICAgICAgICAgIHZhbHVlICs9ICcuYXBwbHkodGhpcywgJGFyZ3VtZW50cyknO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBoYW5kbGVyID0gKHZtLl9zY29wZSB8fCB2bS5fY29udGV4dCkuJGV2YWwodmFsdWUsIHRydWUpO1xuXHQgICAgICAgIGhhbmRsZXIuX2Zyb21QYXJlbnQgPSB0cnVlO1xuXHQgICAgICAgIHZtLiRvbihuYW1lLnJlcGxhY2UoZXZlbnRSRSksIGhhbmRsZXIpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBSZWdpc3RlciBjYWxsYmFja3MgZm9yIG9wdGlvbiBldmVudHMgYW5kIHdhdGNoZXJzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvblxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBoYXNoXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJlZ2lzdGVyQ2FsbGJhY2tzKHZtLCBhY3Rpb24sIGhhc2gpIHtcblx0ICAgIGlmICghaGFzaCkgcmV0dXJuO1xuXHQgICAgdmFyIGhhbmRsZXJzLCBrZXksIGksIGo7XG5cdCAgICBmb3IgKGtleSBpbiBoYXNoKSB7XG5cdCAgICAgIGhhbmRsZXJzID0gaGFzaFtrZXldO1xuXHQgICAgICBpZiAoaXNBcnJheShoYW5kbGVycykpIHtcblx0ICAgICAgICBmb3IgKGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdCAgICAgICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXJzW2ldKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVycyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEhlbHBlciB0byByZWdpc3RlciBhbiBldmVudC93YXRjaCBjYWxsYmFjay5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25cblx0ICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbnxTdHJpbmd8T2JqZWN0fSBoYW5kbGVyXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXIsIG9wdGlvbnMpIHtcblx0ICAgIHZhciB0eXBlID0gdHlwZW9mIGhhbmRsZXI7XG5cdCAgICBpZiAodHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICB2bVthY3Rpb25dKGtleSwgaGFuZGxlciwgb3B0aW9ucyk7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHZhciBtZXRob2RzID0gdm0uJG9wdGlvbnMubWV0aG9kcztcblx0ICAgICAgdmFyIG1ldGhvZCA9IG1ldGhvZHMgJiYgbWV0aG9kc1toYW5kbGVyXTtcblx0ICAgICAgaWYgKG1ldGhvZCkge1xuXHQgICAgICAgIHZtW2FjdGlvbl0oa2V5LCBtZXRob2QsIG9wdGlvbnMpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVW5rbm93biBtZXRob2Q6IFwiJyArIGhhbmRsZXIgKyAnXCIgd2hlbiAnICsgJ3JlZ2lzdGVyaW5nIGNhbGxiYWNrIGZvciAnICsgYWN0aW9uICsgJzogXCInICsga2V5ICsgJ1wiLicsIHZtKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChoYW5kbGVyICYmIHR5cGUgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlci5oYW5kbGVyLCBoYW5kbGVyKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHVwIHJlY3Vyc2l2ZSBhdHRhY2hlZC9kZXRhY2hlZCBjYWxsc1xuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0RE9NSG9va3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLiRvbignaG9vazphdHRhY2hlZCcsIG9uQXR0YWNoZWQpO1xuXHQgICAgdGhpcy4kb24oJ2hvb2s6ZGV0YWNoZWQnLCBvbkRldGFjaGVkKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBDYWxsYmFjayB0byByZWN1cnNpdmVseSBjYWxsIGF0dGFjaGVkIGhvb2sgb24gY2hpbGRyZW5cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gb25BdHRhY2hlZCgpIHtcblx0ICAgIGlmICghdGhpcy5faXNBdHRhY2hlZCkge1xuXHQgICAgICB0aGlzLl9pc0F0dGFjaGVkID0gdHJ1ZTtcblx0ICAgICAgdGhpcy4kY2hpbGRyZW4uZm9yRWFjaChjYWxsQXR0YWNoKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEl0ZXJhdG9yIHRvIGNhbGwgYXR0YWNoZWQgaG9va1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IGNoaWxkXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGNhbGxBdHRhY2goY2hpbGQpIHtcblx0ICAgIGlmICghY2hpbGQuX2lzQXR0YWNoZWQgJiYgaW5Eb2MoY2hpbGQuJGVsKSkge1xuXHQgICAgICBjaGlsZC5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBDYWxsYmFjayB0byByZWN1cnNpdmVseSBjYWxsIGRldGFjaGVkIGhvb2sgb24gY2hpbGRyZW5cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gb25EZXRhY2hlZCgpIHtcblx0ICAgIGlmICh0aGlzLl9pc0F0dGFjaGVkKSB7XG5cdCAgICAgIHRoaXMuX2lzQXR0YWNoZWQgPSBmYWxzZTtcblx0ICAgICAgdGhpcy4kY2hpbGRyZW4uZm9yRWFjaChjYWxsRGV0YWNoKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEl0ZXJhdG9yIHRvIGNhbGwgZGV0YWNoZWQgaG9va1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IGNoaWxkXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGNhbGxEZXRhY2goY2hpbGQpIHtcblx0ICAgIGlmIChjaGlsZC5faXNBdHRhY2hlZCAmJiAhaW5Eb2MoY2hpbGQuJGVsKSkge1xuXHQgICAgICBjaGlsZC5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBUcmlnZ2VyIGFsbCBoYW5kbGVycyBmb3IgYSBob29rXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gaG9va1xuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9jYWxsSG9vayA9IGZ1bmN0aW9uIChob29rKSB7XG5cdCAgICB0aGlzLiRlbWl0KCdwcmUtaG9vazonICsgaG9vayk7XG5cdCAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLiRvcHRpb25zW2hvb2tdO1xuXHQgICAgaWYgKGhhbmRsZXJzKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdCAgICAgICAgaGFuZGxlcnNbaV0uY2FsbCh0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdGhpcy4kZW1pdCgnaG9vazonICsgaG9vayk7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbm9vcCQxKCkge31cblx0XG5cdC8qKlxuXHQgKiBBIGRpcmVjdGl2ZSBsaW5rcyBhIERPTSBlbGVtZW50IHdpdGggYSBwaWVjZSBvZiBkYXRhLFxuXHQgKiB3aGljaCBpcyB0aGUgcmVzdWx0IG9mIGV2YWx1YXRpbmcgYW4gZXhwcmVzc2lvbi5cblx0ICogSXQgcmVnaXN0ZXJzIGEgd2F0Y2hlciB3aXRoIHRoZSBleHByZXNzaW9uIGFuZCBjYWxsc1xuXHQgKiB0aGUgRE9NIHVwZGF0ZSBmdW5jdGlvbiB3aGVuIGEgY2hhbmdlIGlzIHRyaWdnZXJlZC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3Jcblx0ICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gbmFtZVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBkZWZcblx0ICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gZXhwcmVzc2lvblxuXHQgKiAgICAgICAgICAgICAgICAgLSB7QXJyYXk8T2JqZWN0Pn0gW2ZpbHRlcnNdXG5cdCAqICAgICAgICAgICAgICAgICAtIHtPYmplY3R9IFttb2RpZmllcnNdXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBsaXRlcmFsXG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGF0dHJcblx0ICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gYXJnXG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IHJhd1xuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBbcmVmXVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7QXJyYXk8T2JqZWN0Pn0gW2ludGVycF1cblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtoYXNPbmVUaW1lXVxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtOb2RlfSBlbFxuXHQgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gdHJhbnNjbHVzaW9uIGhvc3QgY29tcG9uZW50XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcblx0ICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddIC0gb3duZXIgZnJhZ21lbnRcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqL1xuXHRmdW5jdGlvbiBEaXJlY3RpdmUoZGVzY3JpcHRvciwgdm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgIHRoaXMudm0gPSB2bTtcblx0ICB0aGlzLmVsID0gZWw7XG5cdCAgLy8gY29weSBkZXNjcmlwdG9yIHByb3BlcnRpZXNcblx0ICB0aGlzLmRlc2NyaXB0b3IgPSBkZXNjcmlwdG9yO1xuXHQgIHRoaXMubmFtZSA9IGRlc2NyaXB0b3IubmFtZTtcblx0ICB0aGlzLmV4cHJlc3Npb24gPSBkZXNjcmlwdG9yLmV4cHJlc3Npb247XG5cdCAgdGhpcy5hcmcgPSBkZXNjcmlwdG9yLmFyZztcblx0ICB0aGlzLm1vZGlmaWVycyA9IGRlc2NyaXB0b3IubW9kaWZpZXJzO1xuXHQgIHRoaXMuZmlsdGVycyA9IGRlc2NyaXB0b3IuZmlsdGVycztcblx0ICB0aGlzLmxpdGVyYWwgPSB0aGlzLm1vZGlmaWVycyAmJiB0aGlzLm1vZGlmaWVycy5saXRlcmFsO1xuXHQgIC8vIHByaXZhdGVcblx0ICB0aGlzLl9sb2NrZWQgPSBmYWxzZTtcblx0ICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xuXHQgIHRoaXMuX2xpc3RlbmVycyA9IG51bGw7XG5cdCAgLy8gbGluayBjb250ZXh0XG5cdCAgdGhpcy5faG9zdCA9IGhvc3Q7XG5cdCAgdGhpcy5fc2NvcGUgPSBzY29wZTtcblx0ICB0aGlzLl9mcmFnID0gZnJhZztcblx0ICAvLyBzdG9yZSBkaXJlY3RpdmVzIG9uIG5vZGUgaW4gZGV2IG1vZGVcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsKSB7XG5cdCAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcyA9IHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzIHx8IFtdO1xuXHQgICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMucHVzaCh0aGlzKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbml0aWFsaXplIHRoZSBkaXJlY3RpdmUsIG1peGluIGRlZmluaXRpb24gcHJvcGVydGllcyxcblx0ICogc2V0dXAgdGhlIHdhdGNoZXIsIGNhbGwgZGVmaW5pdGlvbiBiaW5kKCkgYW5kIHVwZGF0ZSgpXG5cdCAqIGlmIHByZXNlbnQuXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5fYmluZCA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgbmFtZSA9IHRoaXMubmFtZTtcblx0ICB2YXIgZGVzY3JpcHRvciA9IHRoaXMuZGVzY3JpcHRvcjtcblx0XG5cdCAgLy8gcmVtb3ZlIGF0dHJpYnV0ZVxuXHQgIGlmICgobmFtZSAhPT0gJ2Nsb2FrJyB8fCB0aGlzLnZtLl9pc0NvbXBpbGVkKSAmJiB0aGlzLmVsICYmIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKSB7XG5cdCAgICB2YXIgYXR0ciA9IGRlc2NyaXB0b3IuYXR0ciB8fCAndi0nICsgbmFtZTtcblx0ICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuXHQgIH1cblx0XG5cdCAgLy8gY29weSBkZWYgcHJvcGVydGllc1xuXHQgIHZhciBkZWYgPSBkZXNjcmlwdG9yLmRlZjtcblx0ICBpZiAodHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdGhpcy51cGRhdGUgPSBkZWY7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGV4dGVuZCh0aGlzLCBkZWYpO1xuXHQgIH1cblx0XG5cdCAgLy8gc2V0dXAgZGlyZWN0aXZlIHBhcmFtc1xuXHQgIHRoaXMuX3NldHVwUGFyYW1zKCk7XG5cdFxuXHQgIC8vIGluaXRpYWwgYmluZFxuXHQgIGlmICh0aGlzLmJpbmQpIHtcblx0ICAgIHRoaXMuYmluZCgpO1xuXHQgIH1cblx0ICB0aGlzLl9ib3VuZCA9IHRydWU7XG5cdFxuXHQgIGlmICh0aGlzLmxpdGVyYWwpIHtcblx0ICAgIHRoaXMudXBkYXRlICYmIHRoaXMudXBkYXRlKGRlc2NyaXB0b3IucmF3KTtcblx0ICB9IGVsc2UgaWYgKCh0aGlzLmV4cHJlc3Npb24gfHwgdGhpcy5tb2RpZmllcnMpICYmICh0aGlzLnVwZGF0ZSB8fCB0aGlzLnR3b1dheSkgJiYgIXRoaXMuX2NoZWNrU3RhdGVtZW50KCkpIHtcblx0ICAgIC8vIHdyYXBwZWQgdXBkYXRlciBmb3IgY29udGV4dFxuXHQgICAgdmFyIGRpciA9IHRoaXM7XG5cdCAgICBpZiAodGhpcy51cGRhdGUpIHtcblx0ICAgICAgdGhpcy5fdXBkYXRlID0gZnVuY3Rpb24gKHZhbCwgb2xkVmFsKSB7XG5cdCAgICAgICAgaWYgKCFkaXIuX2xvY2tlZCkge1xuXHQgICAgICAgICAgZGlyLnVwZGF0ZSh2YWwsIG9sZFZhbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5fdXBkYXRlID0gbm9vcCQxO1xuXHQgICAgfVxuXHQgICAgdmFyIHByZVByb2Nlc3MgPSB0aGlzLl9wcmVQcm9jZXNzID8gYmluZCh0aGlzLl9wcmVQcm9jZXNzLCB0aGlzKSA6IG51bGw7XG5cdCAgICB2YXIgcG9zdFByb2Nlc3MgPSB0aGlzLl9wb3N0UHJvY2VzcyA/IGJpbmQodGhpcy5fcG9zdFByb2Nlc3MsIHRoaXMpIDogbnVsbDtcblx0ICAgIHZhciB3YXRjaGVyID0gdGhpcy5fd2F0Y2hlciA9IG5ldyBXYXRjaGVyKHRoaXMudm0sIHRoaXMuZXhwcmVzc2lvbiwgdGhpcy5fdXBkYXRlLCAvLyBjYWxsYmFja1xuXHQgICAge1xuXHQgICAgICBmaWx0ZXJzOiB0aGlzLmZpbHRlcnMsXG5cdCAgICAgIHR3b1dheTogdGhpcy50d29XYXksXG5cdCAgICAgIGRlZXA6IHRoaXMuZGVlcCxcblx0ICAgICAgcHJlUHJvY2VzczogcHJlUHJvY2Vzcyxcblx0ICAgICAgcG9zdFByb2Nlc3M6IHBvc3RQcm9jZXNzLFxuXHQgICAgICBzY29wZTogdGhpcy5fc2NvcGVcblx0ICAgIH0pO1xuXHQgICAgLy8gdi1tb2RlbCB3aXRoIGluaXRhbCBpbmxpbmUgdmFsdWUgbmVlZCB0byBzeW5jIGJhY2sgdG9cblx0ICAgIC8vIG1vZGVsIGluc3RlYWQgb2YgdXBkYXRlIHRvIERPTSBvbiBpbml0LiBUaGV5IHdvdWxkXG5cdCAgICAvLyBzZXQgdGhlIGFmdGVyQmluZCBob29rIHRvIGluZGljYXRlIHRoYXQuXG5cdCAgICBpZiAodGhpcy5hZnRlckJpbmQpIHtcblx0ICAgICAgdGhpcy5hZnRlckJpbmQoKTtcblx0ICAgIH0gZWxzZSBpZiAodGhpcy51cGRhdGUpIHtcblx0ICAgICAgdGhpcy51cGRhdGUod2F0Y2hlci52YWx1ZSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFNldHVwIGFsbCBwYXJhbSBhdHRyaWJ1dGVzLCBlLmcuIHRyYWNrLWJ5LFxuXHQgKiB0cmFuc2l0aW9uLW1vZGUsIGV0Yy4uLlxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX3NldHVwUGFyYW1zID0gZnVuY3Rpb24gKCkge1xuXHQgIGlmICghdGhpcy5wYXJhbXMpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIHBhcmFtcyA9IHRoaXMucGFyYW1zO1xuXHQgIC8vIHN3YXAgdGhlIHBhcmFtcyBhcnJheSB3aXRoIGEgZnJlc2ggb2JqZWN0LlxuXHQgIHRoaXMucGFyYW1zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB2YXIgaSA9IHBhcmFtcy5sZW5ndGg7XG5cdCAgdmFyIGtleSwgdmFsLCBtYXBwZWRLZXk7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAga2V5ID0gaHlwaGVuYXRlKHBhcmFtc1tpXSk7XG5cdCAgICBtYXBwZWRLZXkgPSBjYW1lbGl6ZShrZXkpO1xuXHQgICAgdmFsID0gZ2V0QmluZEF0dHIodGhpcy5lbCwga2V5KTtcblx0ICAgIGlmICh2YWwgIT0gbnVsbCkge1xuXHQgICAgICAvLyBkeW5hbWljXG5cdCAgICAgIHRoaXMuX3NldHVwUGFyYW1XYXRjaGVyKG1hcHBlZEtleSwgdmFsKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIHN0YXRpY1xuXHQgICAgICB2YWwgPSBnZXRBdHRyKHRoaXMuZWwsIGtleSk7XG5cdCAgICAgIGlmICh2YWwgIT0gbnVsbCkge1xuXHQgICAgICAgIHRoaXMucGFyYW1zW21hcHBlZEtleV0gPSB2YWwgPT09ICcnID8gdHJ1ZSA6IHZhbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTZXR1cCBhIHdhdGNoZXIgZm9yIGEgZHluYW1pYyBwYXJhbS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwcmVzc2lvblxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX3NldHVwUGFyYW1XYXRjaGVyID0gZnVuY3Rpb24gKGtleSwgZXhwcmVzc2lvbikge1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICB2YXIgY2FsbGVkID0gZmFsc2U7XG5cdCAgdmFyIHVud2F0Y2ggPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHdhdGNoKGV4cHJlc3Npb24sIGZ1bmN0aW9uICh2YWwsIG9sZFZhbCkge1xuXHQgICAgc2VsZi5wYXJhbXNba2V5XSA9IHZhbDtcblx0ICAgIC8vIHNpbmNlIHdlIGFyZSBpbiBpbW1lZGlhdGUgbW9kZSxcblx0ICAgIC8vIG9ubHkgY2FsbCB0aGUgcGFyYW0gY2hhbmdlIGNhbGxiYWNrcyBpZiB0aGlzIGlzIG5vdCB0aGUgZmlyc3QgdXBkYXRlLlxuXHQgICAgaWYgKGNhbGxlZCkge1xuXHQgICAgICB2YXIgY2IgPSBzZWxmLnBhcmFtV2F0Y2hlcnMgJiYgc2VsZi5wYXJhbVdhdGNoZXJzW2tleV07XG5cdCAgICAgIGlmIChjYikge1xuXHQgICAgICAgIGNiLmNhbGwoc2VsZiwgdmFsLCBvbGRWYWwpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBjYWxsZWQgPSB0cnVlO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGltbWVkaWF0ZTogdHJ1ZSxcblx0ICAgIHVzZXI6IGZhbHNlXG5cdCAgfSk7KHRoaXMuX3BhcmFtVW53YXRjaEZucyB8fCAodGhpcy5fcGFyYW1VbndhdGNoRm5zID0gW10pKS5wdXNoKHVud2F0Y2gpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIHRoZSBkaXJlY3RpdmUgaXMgYSBmdW5jdGlvbiBjYWxsZXJcblx0ICogYW5kIGlmIHRoZSBleHByZXNzaW9uIGlzIGEgY2FsbGFibGUgb25lLiBJZiBib3RoIHRydWUsXG5cdCAqIHdlIHdyYXAgdXAgdGhlIGV4cHJlc3Npb24gYW5kIHVzZSBpdCBhcyB0aGUgZXZlbnRcblx0ICogaGFuZGxlci5cblx0ICpcblx0ICogZS5nLiBvbi1jbGljaz1cImErK1wiXG5cdCAqXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5fY2hlY2tTdGF0ZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGV4cHJlc3Npb24gPSB0aGlzLmV4cHJlc3Npb247XG5cdCAgaWYgKGV4cHJlc3Npb24gJiYgdGhpcy5hY2NlcHRTdGF0ZW1lbnQgJiYgIWlzU2ltcGxlUGF0aChleHByZXNzaW9uKSkge1xuXHQgICAgdmFyIGZuID0gcGFyc2VFeHByZXNzaW9uKGV4cHJlc3Npb24pLmdldDtcblx0ICAgIHZhciBzY29wZSA9IHRoaXMuX3Njb3BlIHx8IHRoaXMudm07XG5cdCAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXIoZSkge1xuXHQgICAgICBzY29wZS4kZXZlbnQgPSBlO1xuXHQgICAgICBmbi5jYWxsKHNjb3BlLCBzY29wZSk7XG5cdCAgICAgIHNjb3BlLiRldmVudCA9IG51bGw7XG5cdCAgICB9O1xuXHQgICAgaWYgKHRoaXMuZmlsdGVycykge1xuXHQgICAgICBoYW5kbGVyID0gc2NvcGUuX2FwcGx5RmlsdGVycyhoYW5kbGVyLCBudWxsLCB0aGlzLmZpbHRlcnMpO1xuXHQgICAgfVxuXHQgICAgdGhpcy51cGRhdGUoaGFuZGxlcik7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogU2V0IHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIHdpdGggdGhlIHNldHRlci5cblx0ICogVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIGluIHR3by13YXkgZGlyZWN0aXZlc1xuXHQgKiBlLmcuIHYtbW9kZWwuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHB1YmxpY1xuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICBpZiAodGhpcy50d29XYXkpIHtcblx0ICAgIHRoaXMuX3dpdGhMb2NrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhpcy5fd2F0Y2hlci5zZXQodmFsdWUpO1xuXHQgICAgfSk7XG5cdCAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICB3YXJuKCdEaXJlY3RpdmUuc2V0KCkgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgdHdvV2F5JyArICdkaXJlY3RpdmVzLicpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBFeGVjdXRlIGEgZnVuY3Rpb24gd2hpbGUgcHJldmVudGluZyB0aGF0IGZ1bmN0aW9uIGZyb21cblx0ICogdHJpZ2dlcmluZyB1cGRhdGVzIG9uIHRoaXMgZGlyZWN0aXZlIGluc3RhbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX3dpdGhMb2NrID0gZnVuY3Rpb24gKGZuKSB7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIHNlbGYuX2xvY2tlZCA9IHRydWU7XG5cdCAgZm4uY2FsbChzZWxmKTtcblx0ICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdCAgICBzZWxmLl9sb2NrZWQgPSBmYWxzZTtcblx0ICB9KTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDb252ZW5pZW5jZSBtZXRob2QgdGhhdCBhdHRhY2hlcyBhIERPTSBldmVudCBsaXN0ZW5lclxuXHQgKiB0byB0aGUgZGlyZWN0aXZlIGVsZW1lbnQgYW5kIGF1dG9tZXRpY2FsbHkgdGVhcnMgaXQgZG93blxuXHQgKiBkdXJpbmcgdW5iaW5kLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VDYXB0dXJlXVxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnQsIGhhbmRsZXIsIHVzZUNhcHR1cmUpIHtcblx0ICBvbih0aGlzLmVsLCBldmVudCwgaGFuZGxlciwgdXNlQ2FwdHVyZSk7KHRoaXMuX2xpc3RlbmVycyB8fCAodGhpcy5fbGlzdGVuZXJzID0gW10pKS5wdXNoKFtldmVudCwgaGFuZGxlcl0pO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFRlYXJkb3duIHRoZSB3YXRjaGVyIGFuZCBjYWxsIHVuYmluZC5cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl90ZWFyZG93biA9IGZ1bmN0aW9uICgpIHtcblx0ICBpZiAodGhpcy5fYm91bmQpIHtcblx0ICAgIHRoaXMuX2JvdW5kID0gZmFsc2U7XG5cdCAgICBpZiAodGhpcy51bmJpbmQpIHtcblx0ICAgICAgdGhpcy51bmJpbmQoKTtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLl93YXRjaGVyKSB7XG5cdCAgICAgIHRoaXMuX3dhdGNoZXIudGVhcmRvd24oKTtcblx0ICAgIH1cblx0ICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG5cdCAgICB2YXIgaTtcblx0ICAgIGlmIChsaXN0ZW5lcnMpIHtcblx0ICAgICAgaSA9IGxpc3RlbmVycy5sZW5ndGg7XG5cdCAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICBvZmYodGhpcy5lbCwgbGlzdGVuZXJzW2ldWzBdLCBsaXN0ZW5lcnNbaV1bMV0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB2YXIgdW53YXRjaEZucyA9IHRoaXMuX3BhcmFtVW53YXRjaEZucztcblx0ICAgIGlmICh1bndhdGNoRm5zKSB7XG5cdCAgICAgIGkgPSB1bndhdGNoRm5zLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICAgIHVud2F0Y2hGbnNbaV0oKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbCkge1xuXHQgICAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcy4kcmVtb3ZlKHRoaXMpO1xuXHQgICAgfVxuXHQgICAgdGhpcy52bSA9IHRoaXMuZWwgPSB0aGlzLl93YXRjaGVyID0gdGhpcy5fbGlzdGVuZXJzID0gbnVsbDtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBsaWZlY3ljbGVNaXhpbiAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogVXBkYXRlIHYtcmVmIGZvciBjb21wb25lbnQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl91cGRhdGVSZWYgPSBmdW5jdGlvbiAocmVtb3ZlKSB7XG5cdCAgICB2YXIgcmVmID0gdGhpcy4kb3B0aW9ucy5fcmVmO1xuXHQgICAgaWYgKHJlZikge1xuXHQgICAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLl9jb250ZXh0KS4kcmVmcztcblx0ICAgICAgaWYgKHJlbW92ZSkge1xuXHQgICAgICAgIGlmIChyZWZzW3JlZl0gPT09IHRoaXMpIHtcblx0ICAgICAgICAgIHJlZnNbcmVmXSA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlZnNbcmVmXSA9IHRoaXM7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBUcmFuc2NsdWRlLCBjb21waWxlIGFuZCBsaW5rIGVsZW1lbnQuXG5cdCAgICpcblx0ICAgKiBJZiBhIHByZS1jb21waWxlZCBsaW5rZXIgaXMgYXZhaWxhYmxlLCB0aGF0IG1lYW5zIHRoZVxuXHQgICAqIHBhc3NlZCBpbiBlbGVtZW50IHdpbGwgYmUgcHJlLXRyYW5zY2x1ZGVkIGFuZCBjb21waWxlZFxuXHQgICAqIGFzIHdlbGwgLSBhbGwgd2UgbmVlZCB0byBkbyBpcyB0byBjYWxsIHRoZSBsaW5rZXIuXG5cdCAgICpcblx0ICAgKiBPdGhlcndpc2Ugd2UgbmVlZCB0byBjYWxsIHRyYW5zY2x1ZGUvY29tcGlsZS9saW5rIGhlcmUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2NvbXBpbGUgPSBmdW5jdGlvbiAoZWwpIHtcblx0ICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcblx0XG5cdCAgICAvLyB0cmFuc2NsdWRlIGFuZCBpbml0IGVsZW1lbnRcblx0ICAgIC8vIHRyYW5zY2x1ZGUgY2FuIHBvdGVudGlhbGx5IHJlcGxhY2Ugb3JpZ2luYWxcblx0ICAgIC8vIHNvIHdlIG5lZWQgdG8ga2VlcCByZWZlcmVuY2U7IHRoaXMgc3RlcCBhbHNvIGluamVjdHNcblx0ICAgIC8vIHRoZSB0ZW1wbGF0ZSBhbmQgY2FjaGVzIHRoZSBvcmlnaW5hbCBhdHRyaWJ1dGVzXG5cdCAgICAvLyBvbiB0aGUgY29udGFpbmVyIG5vZGUgYW5kIHJlcGxhY2VyIG5vZGUuXG5cdCAgICB2YXIgb3JpZ2luYWwgPSBlbDtcblx0ICAgIGVsID0gdHJhbnNjbHVkZShlbCwgb3B0aW9ucyk7XG5cdCAgICB0aGlzLl9pbml0RWxlbWVudChlbCk7XG5cdFxuXHQgICAgLy8gaGFuZGxlIHYtcHJlIG9uIHJvb3Qgbm9kZSAoIzIwMjYpXG5cdCAgICBpZiAoZWwubm9kZVR5cGUgPT09IDEgJiYgZ2V0QXR0cihlbCwgJ3YtcHJlJykgIT09IG51bGwpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHJvb3QgaXMgYWx3YXlzIGNvbXBpbGVkIHBlci1pbnN0YW5jZSwgYmVjYXVzZVxuXHQgICAgLy8gY29udGFpbmVyIGF0dHJzIGFuZCBwcm9wcyBjYW4gYmUgZGlmZmVyZW50IGV2ZXJ5IHRpbWUuXG5cdCAgICB2YXIgY29udGV4dE9wdGlvbnMgPSB0aGlzLl9jb250ZXh0ICYmIHRoaXMuX2NvbnRleHQuJG9wdGlvbnM7XG5cdCAgICB2YXIgcm9vdExpbmtlciA9IGNvbXBpbGVSb290KGVsLCBvcHRpb25zLCBjb250ZXh0T3B0aW9ucyk7XG5cdFxuXHQgICAgLy8gcmVzb2x2ZSBzbG90IGRpc3RyaWJ1dGlvblxuXHQgICAgcmVzb2x2ZVNsb3RzKHRoaXMsIG9wdGlvbnMuX2NvbnRlbnQpO1xuXHRcblx0ICAgIC8vIGNvbXBpbGUgYW5kIGxpbmsgdGhlIHJlc3Rcblx0ICAgIHZhciBjb250ZW50TGlua0ZuO1xuXHQgICAgdmFyIGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuXHQgICAgLy8gY29tcG9uZW50IGNvbXBpbGF0aW9uIGNhbiBiZSBjYWNoZWRcblx0ICAgIC8vIGFzIGxvbmcgYXMgaXQncyBub3QgdXNpbmcgaW5saW5lLXRlbXBsYXRlXG5cdCAgICBpZiAob3B0aW9ucy5fbGlua2VyQ2FjaGFibGUpIHtcblx0ICAgICAgY29udGVudExpbmtGbiA9IGN0b3IubGlua2VyO1xuXHQgICAgICBpZiAoIWNvbnRlbnRMaW5rRm4pIHtcblx0ICAgICAgICBjb250ZW50TGlua0ZuID0gY3Rvci5saW5rZXIgPSBjb21waWxlKGVsLCBvcHRpb25zKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIGxpbmsgcGhhc2Vcblx0ICAgIC8vIG1ha2Ugc3VyZSB0byBsaW5rIHJvb3Qgd2l0aCBwcm9wIHNjb3BlIVxuXHQgICAgdmFyIHJvb3RVbmxpbmtGbiA9IHJvb3RMaW5rZXIodGhpcywgZWwsIHRoaXMuX3Njb3BlKTtcblx0ICAgIHZhciBjb250ZW50VW5saW5rRm4gPSBjb250ZW50TGlua0ZuID8gY29udGVudExpbmtGbih0aGlzLCBlbCkgOiBjb21waWxlKGVsLCBvcHRpb25zKSh0aGlzLCBlbCk7XG5cdFxuXHQgICAgLy8gcmVnaXN0ZXIgY29tcG9zaXRlIHVubGluayBmdW5jdGlvblxuXHQgICAgLy8gdG8gYmUgY2FsbGVkIGR1cmluZyBpbnN0YW5jZSBkZXN0cnVjdGlvblxuXHQgICAgdGhpcy5fdW5saW5rRm4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJvb3RVbmxpbmtGbigpO1xuXHQgICAgICAvLyBwYXNzaW5nIGRlc3Ryb3lpbmc6IHRydWUgdG8gYXZvaWQgc2VhcmNoaW5nIGFuZFxuXHQgICAgICAvLyBzcGxpY2luZyB0aGUgZGlyZWN0aXZlc1xuXHQgICAgICBjb250ZW50VW5saW5rRm4odHJ1ZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGZpbmFsbHkgcmVwbGFjZSBvcmlnaW5hbFxuXHQgICAgaWYgKG9wdGlvbnMucmVwbGFjZSkge1xuXHQgICAgICByZXBsYWNlKG9yaWdpbmFsLCBlbCk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5faXNDb21waWxlZCA9IHRydWU7XG5cdCAgICB0aGlzLl9jYWxsSG9vaygnY29tcGlsZWQnKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbml0aWFsaXplIGluc3RhbmNlIGVsZW1lbnQuIENhbGxlZCBpbiB0aGUgcHVibGljXG5cdCAgICogJG1vdW50KCkgbWV0aG9kLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0RWxlbWVudCA9IGZ1bmN0aW9uIChlbCkge1xuXHQgICAgaWYgKGlzRnJhZ21lbnQoZWwpKSB7XG5cdCAgICAgIHRoaXMuX2lzRnJhZ21lbnQgPSB0cnVlO1xuXHQgICAgICB0aGlzLiRlbCA9IHRoaXMuX2ZyYWdtZW50U3RhcnQgPSBlbC5maXJzdENoaWxkO1xuXHQgICAgICB0aGlzLl9mcmFnbWVudEVuZCA9IGVsLmxhc3RDaGlsZDtcblx0ICAgICAgLy8gc2V0IHBlcnNpc3RlZCB0ZXh0IGFuY2hvcnMgdG8gZW1wdHlcblx0ICAgICAgaWYgKHRoaXMuX2ZyYWdtZW50U3RhcnQubm9kZVR5cGUgPT09IDMpIHtcblx0ICAgICAgICB0aGlzLl9mcmFnbWVudFN0YXJ0LmRhdGEgPSB0aGlzLl9mcmFnbWVudEVuZC5kYXRhID0gJyc7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5fZnJhZ21lbnQgPSBlbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuJGVsID0gZWw7XG5cdCAgICB9XG5cdCAgICB0aGlzLiRlbC5fX3Z1ZV9fID0gdGhpcztcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdiZWZvcmVDb21waWxlJyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ3JlYXRlIGFuZCBiaW5kIGEgZGlyZWN0aXZlIHRvIGFuIGVsZW1lbnQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gZGVzY3JpcHRvciAtIHBhcnNlZCBkaXJlY3RpdmUgZGVzY3JpcHRvclxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAgIC0gdGFyZ2V0IG5vZGVcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gdHJhbnNjbHVzaW9uIGhvc3QgY29tcG9uZW50XG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIG93bmVyIGZyYWdtZW50XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2JpbmREaXIgPSBmdW5jdGlvbiAoZGVzY3JpcHRvciwgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIHRoaXMuX2RpcmVjdGl2ZXMucHVzaChuZXcgRGlyZWN0aXZlKGRlc2NyaXB0b3IsIHRoaXMsIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogVGVhcmRvd24gYW4gaW5zdGFuY2UsIHVub2JzZXJ2ZXMgdGhlIGRhdGEsIHVuYmluZCBhbGwgdGhlXG5cdCAgICogZGlyZWN0aXZlcywgdHVybiBvZmYgYWxsIHRoZSBldmVudCBsaXN0ZW5lcnMsIGV0Yy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlIC0gd2hldGhlciB0byByZW1vdmUgdGhlIERPTSBub2RlLlxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJDbGVhbnVwIC0gaWYgdHJ1ZSwgZGVmZXIgY2xlYW51cCB0b1xuXHQgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmUgY2FsbGVkIGxhdGVyXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAocmVtb3ZlLCBkZWZlckNsZWFudXApIHtcblx0ICAgIGlmICh0aGlzLl9pc0JlaW5nRGVzdHJveWVkKSB7XG5cdCAgICAgIGlmICghZGVmZXJDbGVhbnVwKSB7XG5cdCAgICAgICAgdGhpcy5fY2xlYW51cCgpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZGVzdHJveVJlYWR5O1xuXHQgICAgdmFyIHBlbmRpbmdSZW1vdmFsO1xuXHRcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIC8vIENsZWFudXAgc2hvdWxkIGJlIGNhbGxlZCBlaXRoZXIgc3luY2hyb25vdXNseSBvciBhc3luY2hyb25veXNseSBhc1xuXHQgICAgLy8gY2FsbGJhY2sgb2YgdGhpcy4kcmVtb3ZlKCksIG9yIGlmIHJlbW92ZSBhbmQgZGVmZXJDbGVhbnVwIGFyZSBmYWxzZS5cblx0ICAgIC8vIEluIGFueSBjYXNlIGl0IHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgYWxsIG90aGVyIHJlbW92aW5nLCB1bmJpbmRpbmcgYW5kXG5cdCAgICAvLyB0dXJuaW5nIG9mIGlzIGRvbmVcblx0ICAgIHZhciBjbGVhbnVwSWZQb3NzaWJsZSA9IGZ1bmN0aW9uIGNsZWFudXBJZlBvc3NpYmxlKCkge1xuXHQgICAgICBpZiAoZGVzdHJveVJlYWR5ICYmICFwZW5kaW5nUmVtb3ZhbCAmJiAhZGVmZXJDbGVhbnVwKSB7XG5cdCAgICAgICAgc2VsZi5fY2xlYW51cCgpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIHJlbW92ZSBET00gZWxlbWVudFxuXHQgICAgaWYgKHJlbW92ZSAmJiB0aGlzLiRlbCkge1xuXHQgICAgICBwZW5kaW5nUmVtb3ZhbCA9IHRydWU7XG5cdCAgICAgIHRoaXMuJHJlbW92ZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcGVuZGluZ1JlbW92YWwgPSBmYWxzZTtcblx0ICAgICAgICBjbGVhbnVwSWZQb3NzaWJsZSgpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLl9jYWxsSG9vaygnYmVmb3JlRGVzdHJveScpO1xuXHQgICAgdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCA9IHRydWU7XG5cdCAgICB2YXIgaTtcblx0ICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gcGFyZW50LiBvbmx5IG5lY2Vzc2FyeVxuXHQgICAgLy8gaWYgcGFyZW50IGlzIG5vdCBiZWluZyBkZXN0cm95ZWQgYXMgd2VsbC5cblx0ICAgIHZhciBwYXJlbnQgPSB0aGlzLiRwYXJlbnQ7XG5cdCAgICBpZiAocGFyZW50ICYmICFwYXJlbnQuX2lzQmVpbmdEZXN0cm95ZWQpIHtcblx0ICAgICAgcGFyZW50LiRjaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xuXHQgICAgICAvLyB1bnJlZ2lzdGVyIHJlZiAocmVtb3ZlOiB0cnVlKVxuXHQgICAgICB0aGlzLl91cGRhdGVSZWYodHJ1ZSk7XG5cdCAgICB9XG5cdCAgICAvLyBkZXN0cm95IGFsbCBjaGlsZHJlbi5cblx0ICAgIGkgPSB0aGlzLiRjaGlsZHJlbi5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHRoaXMuJGNoaWxkcmVuW2ldLiRkZXN0cm95KCk7XG5cdCAgICB9XG5cdCAgICAvLyB0ZWFyZG93biBwcm9wc1xuXHQgICAgaWYgKHRoaXMuX3Byb3BzVW5saW5rRm4pIHtcblx0ICAgICAgdGhpcy5fcHJvcHNVbmxpbmtGbigpO1xuXHQgICAgfVxuXHQgICAgLy8gdGVhcmRvd24gYWxsIGRpcmVjdGl2ZXMuIHRoaXMgYWxzbyB0ZWFyc2Rvd24gYWxsXG5cdCAgICAvLyBkaXJlY3RpdmUtb3duZWQgd2F0Y2hlcnMuXG5cdCAgICBpZiAodGhpcy5fdW5saW5rRm4pIHtcblx0ICAgICAgdGhpcy5fdW5saW5rRm4oKTtcblx0ICAgIH1cblx0ICAgIGkgPSB0aGlzLl93YXRjaGVycy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHRoaXMuX3dhdGNoZXJzW2ldLnRlYXJkb3duKCk7XG5cdCAgICB9XG5cdCAgICAvLyByZW1vdmUgcmVmZXJlbmNlIHRvIHNlbGYgb24gJGVsXG5cdCAgICBpZiAodGhpcy4kZWwpIHtcblx0ICAgICAgdGhpcy4kZWwuX192dWVfXyA9IG51bGw7XG5cdCAgICB9XG5cdFxuXHQgICAgZGVzdHJveVJlYWR5ID0gdHJ1ZTtcblx0ICAgIGNsZWFudXBJZlBvc3NpYmxlKCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ2xlYW4gdXAgdG8gZW5zdXJlIGdhcmJhZ2UgY29sbGVjdGlvbi5cblx0ICAgKiBUaGlzIGlzIGNhbGxlZCBhZnRlciB0aGUgbGVhdmUgdHJhbnNpdGlvbiBpZiB0aGVyZVxuXHQgICAqIGlzIGFueS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICh0aGlzLl9pc0Rlc3Ryb3llZCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICAvLyByZW1vdmUgc2VsZiBmcm9tIG93bmVyIGZyYWdtZW50XG5cdCAgICAvLyBkbyBpdCBpbiBjbGVhbnVwIHNvIHRoYXQgd2UgY2FuIGNhbGwgJGRlc3Ryb3kgd2l0aFxuXHQgICAgLy8gZGVmZXIgcmlnaHQgd2hlbiBhIGZyYWdtZW50IGlzIGFib3V0IHRvIGJlIHJlbW92ZWQuXG5cdCAgICBpZiAodGhpcy5fZnJhZykge1xuXHQgICAgICB0aGlzLl9mcmFnLmNoaWxkcmVuLiRyZW1vdmUodGhpcyk7XG5cdCAgICB9XG5cdCAgICAvLyByZW1vdmUgcmVmZXJlbmNlIGZyb20gZGF0YSBvYlxuXHQgICAgLy8gZnJvemVuIG9iamVjdCBtYXkgbm90IGhhdmUgb2JzZXJ2ZXIuXG5cdCAgICBpZiAodGhpcy5fZGF0YSAmJiB0aGlzLl9kYXRhLl9fb2JfXykge1xuXHQgICAgICB0aGlzLl9kYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKTtcblx0ICAgIH1cblx0ICAgIC8vIENsZWFuIHVwIHJlZmVyZW5jZXMgdG8gcHJpdmF0ZSBwcm9wZXJ0aWVzIGFuZCBvdGhlclxuXHQgICAgLy8gaW5zdGFuY2VzLiBwcmVzZXJ2ZSByZWZlcmVuY2UgdG8gX2RhdGEgc28gdGhhdCBwcm94eVxuXHQgICAgLy8gYWNjZXNzb3JzIHN0aWxsIHdvcmsuIFRoZSBvbmx5IHBvdGVudGlhbCBzaWRlIGVmZmVjdFxuXHQgICAgLy8gaGVyZSBpcyB0aGF0IG11dGF0aW5nIHRoZSBpbnN0YW5jZSBhZnRlciBpdCdzIGRlc3Ryb3llZFxuXHQgICAgLy8gbWF5IGFmZmVjdCB0aGUgc3RhdGUgb2Ygb3RoZXIgY29tcG9uZW50cyB0aGF0IGFyZSBzdGlsbFxuXHQgICAgLy8gb2JzZXJ2aW5nIHRoZSBzYW1lIG9iamVjdCwgYnV0IHRoYXQgc2VlbXMgdG8gYmUgYVxuXHQgICAgLy8gcmVhc29uYWJsZSByZXNwb25zaWJpbGl0eSBmb3IgdGhlIHVzZXIgcmF0aGVyIHRoYW5cblx0ICAgIC8vIGFsd2F5cyB0aHJvd2luZyBhbiBlcnJvciBvbiB0aGVtLlxuXHQgICAgdGhpcy4kZWwgPSB0aGlzLiRwYXJlbnQgPSB0aGlzLiRyb290ID0gdGhpcy4kY2hpbGRyZW4gPSB0aGlzLl93YXRjaGVycyA9IHRoaXMuX2NvbnRleHQgPSB0aGlzLl9zY29wZSA9IHRoaXMuX2RpcmVjdGl2ZXMgPSBudWxsO1xuXHQgICAgLy8gY2FsbCB0aGUgbGFzdCBob29rLi4uXG5cdCAgICB0aGlzLl9pc0Rlc3Ryb3llZCA9IHRydWU7XG5cdCAgICB0aGlzLl9jYWxsSG9vaygnZGVzdHJveWVkJyk7XG5cdCAgICAvLyB0dXJuIG9mZiBhbGwgaW5zdGFuY2UgbGlzdGVuZXJzLlxuXHQgICAgdGhpcy4kb2ZmKCk7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWlzY01peGluIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBBcHBseSBhIGxpc3Qgb2YgZmlsdGVyIChkZXNjcmlwdG9ycykgdG8gYSB2YWx1ZS5cblx0ICAgKiBVc2luZyBwbGFpbiBmb3IgbG9vcHMgaGVyZSBiZWNhdXNlIHRoaXMgd2lsbCBiZSBjYWxsZWQgaW5cblx0ICAgKiB0aGUgZ2V0dGVyIG9mIGFueSB3YXRjaGVyIHdpdGggZmlsdGVycyBzbyBpdCBpcyB2ZXJ5XG5cdCAgICogcGVyZm9ybWFuY2Ugc2Vuc2l0aXZlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7Kn0gW29sZFZhbHVlXVxuXHQgICAqIEBwYXJhbSB7QXJyYXl9IGZpbHRlcnNcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IHdyaXRlXG5cdCAgICogQHJldHVybiB7Kn1cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fYXBwbHlGaWx0ZXJzID0gZnVuY3Rpb24gKHZhbHVlLCBvbGRWYWx1ZSwgZmlsdGVycywgd3JpdGUpIHtcblx0ICAgIHZhciBmaWx0ZXIsIGZuLCBhcmdzLCBhcmcsIG9mZnNldCwgaSwgbCwgaiwgaztcblx0ICAgIGZvciAoaSA9IDAsIGwgPSBmaWx0ZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBmaWx0ZXIgPSBmaWx0ZXJzW3dyaXRlID8gbCAtIGkgLSAxIDogaV07XG5cdCAgICAgIGZuID0gcmVzb2x2ZUFzc2V0KHRoaXMuJG9wdGlvbnMsICdmaWx0ZXJzJywgZmlsdGVyLm5hbWUsIHRydWUpO1xuXHQgICAgICBpZiAoIWZuKSBjb250aW51ZTtcblx0ICAgICAgZm4gPSB3cml0ZSA/IGZuLndyaXRlIDogZm4ucmVhZCB8fCBmbjtcblx0ICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgY29udGludWU7XG5cdCAgICAgIGFyZ3MgPSB3cml0ZSA/IFt2YWx1ZSwgb2xkVmFsdWVdIDogW3ZhbHVlXTtcblx0ICAgICAgb2Zmc2V0ID0gd3JpdGUgPyAyIDogMTtcblx0ICAgICAgaWYgKGZpbHRlci5hcmdzKSB7XG5cdCAgICAgICAgZm9yIChqID0gMCwgayA9IGZpbHRlci5hcmdzLmxlbmd0aDsgaiA8IGs7IGorKykge1xuXHQgICAgICAgICAgYXJnID0gZmlsdGVyLmFyZ3Nbal07XG5cdCAgICAgICAgICBhcmdzW2ogKyBvZmZzZXRdID0gYXJnLmR5bmFtaWMgPyB0aGlzLiRnZXQoYXJnLnZhbHVlKSA6IGFyZy52YWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgdmFsdWUgPSBmbi5hcHBseSh0aGlzLCBhcmdzKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZXNvbHZlIGEgY29tcG9uZW50LCBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgY29tcG9uZW50XG5cdCAgICogaXMgZGVmaW5lZCBub3JtYWxseSBvciB1c2luZyBhbiBhc3luYyBmYWN0b3J5IGZ1bmN0aW9uLlxuXHQgICAqIFJlc29sdmVzIHN5bmNocm9ub3VzbHkgaWYgYWxyZWFkeSByZXNvbHZlZCwgb3RoZXJ3aXNlXG5cdCAgICogcmVzb2x2ZXMgYXN5bmNocm9ub3VzbHkgYW5kIGNhY2hlcyB0aGUgcmVzb2x2ZWRcblx0ICAgKiBjb25zdHJ1Y3RvciBvbiB0aGUgZmFjdG9yeS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX3Jlc29sdmVDb21wb25lbnQgPSBmdW5jdGlvbiAodmFsdWUsIGNiKSB7XG5cdCAgICB2YXIgZmFjdG9yeTtcblx0ICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgZmFjdG9yeSA9IHZhbHVlO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZmFjdG9yeSA9IHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnY29tcG9uZW50cycsIHZhbHVlLCB0cnVlKTtcblx0ICAgIH1cblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKCFmYWN0b3J5KSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIC8vIGFzeW5jIGNvbXBvbmVudCBmYWN0b3J5XG5cdCAgICBpZiAoIWZhY3Rvcnkub3B0aW9ucykge1xuXHQgICAgICBpZiAoZmFjdG9yeS5yZXNvbHZlZCkge1xuXHQgICAgICAgIC8vIGNhY2hlZFxuXHQgICAgICAgIGNiKGZhY3RvcnkucmVzb2x2ZWQpO1xuXHQgICAgICB9IGVsc2UgaWYgKGZhY3RvcnkucmVxdWVzdGVkKSB7XG5cdCAgICAgICAgLy8gcG9vbCBjYWxsYmFja3Ncblx0ICAgICAgICBmYWN0b3J5LnBlbmRpbmdDYWxsYmFja3MucHVzaChjYik7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZmFjdG9yeS5yZXF1ZXN0ZWQgPSB0cnVlO1xuXHQgICAgICAgIHZhciBjYnMgPSBmYWN0b3J5LnBlbmRpbmdDYWxsYmFja3MgPSBbY2JdO1xuXHQgICAgICAgIGZhY3RvcnkuY2FsbCh0aGlzLCBmdW5jdGlvbiByZXNvbHZlKHJlcykge1xuXHQgICAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QocmVzKSkge1xuXHQgICAgICAgICAgICByZXMgPSBWdWUuZXh0ZW5kKHJlcyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICAvLyBjYWNoZSByZXNvbHZlZFxuXHQgICAgICAgICAgZmFjdG9yeS5yZXNvbHZlZCA9IHJlcztcblx0ICAgICAgICAgIC8vIGludm9rZSBjYWxsYmFja3Ncblx0ICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgICAgICBjYnNbaV0ocmVzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG5cdCAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ZhaWxlZCB0byByZXNvbHZlIGFzeW5jIGNvbXBvbmVudCcgKyAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/ICc6ICcgKyB2YWx1ZSA6ICcnKSArICcuICcgKyAocmVhc29uID8gJ1xcblJlYXNvbjogJyArIHJlYXNvbiA6ICcnKSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIG5vcm1hbCBjb21wb25lbnRcblx0ICAgICAgY2IoZmFjdG9yeSk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0dmFyIGZpbHRlclJFJDEgPSAvW158XVxcfFtefF0vO1xuXHRcblx0ZnVuY3Rpb24gZGF0YUFQSSAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogR2V0IHRoZSB2YWx1ZSBmcm9tIGFuIGV4cHJlc3Npb24gb24gdGhpcyB2bS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFthc1N0YXRlbWVudF1cblx0ICAgKiBAcmV0dXJuIHsqfVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRnZXQgPSBmdW5jdGlvbiAoZXhwLCBhc1N0YXRlbWVudCkge1xuXHQgICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHApO1xuXHQgICAgaWYgKHJlcykge1xuXHQgICAgICBpZiAoYXNTdGF0ZW1lbnQpIHtcblx0ICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN0YXRlbWVudEhhbmRsZXIoKSB7XG5cdCAgICAgICAgICBzZWxmLiRhcmd1bWVudHMgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVzLmdldC5jYWxsKHNlbGYsIHNlbGYpO1xuXHQgICAgICAgICAgc2VsZi4kYXJndW1lbnRzID0gbnVsbDtcblx0ICAgICAgICAgIHJldHVybiByZXN1bHQ7XG5cdCAgICAgICAgfTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgcmV0dXJuIHJlcy5nZXQuY2FsbCh0aGlzLCB0aGlzKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogU2V0IHRoZSB2YWx1ZSBmcm9tIGFuIGV4cHJlc3Npb24gb24gdGhpcyB2bS5cblx0ICAgKiBUaGUgZXhwcmVzc2lvbiBtdXN0IGJlIGEgdmFsaWQgbGVmdC1oYW5kXG5cdCAgICogZXhwcmVzc2lvbiBpbiBhbiBhc3NpZ25tZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJHNldCA9IGZ1bmN0aW9uIChleHAsIHZhbCkge1xuXHQgICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHAsIHRydWUpO1xuXHQgICAgaWYgKHJlcyAmJiByZXMuc2V0KSB7XG5cdCAgICAgIHJlcy5zZXQuY2FsbCh0aGlzLCB0aGlzLCB2YWwpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIERlbGV0ZSBhIHByb3BlcnR5IG9uIHRoZSBWTVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRkZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICBkZWwodGhpcy5fZGF0YSwga2V5KTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBXYXRjaCBhbiBleHByZXNzaW9uLCB0cmlnZ2VyIGNhbGxiYWNrIHdoZW4gaXRzXG5cdCAgICogdmFsdWUgY2hhbmdlcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBleHBPckZuXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG5cdCAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGRlZXBcblx0ICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gaW1tZWRpYXRlXG5cdCAgICogQHJldHVybiB7RnVuY3Rpb259IC0gdW53YXRjaEZuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJHdhdGNoID0gZnVuY3Rpb24gKGV4cE9yRm4sIGNiLCBvcHRpb25zKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgdmFyIHBhcnNlZDtcblx0ICAgIGlmICh0eXBlb2YgZXhwT3JGbiA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUoZXhwT3JGbik7XG5cdCAgICAgIGV4cE9yRm4gPSBwYXJzZWQuZXhwcmVzc2lvbjtcblx0ICAgIH1cblx0ICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCB7XG5cdCAgICAgIGRlZXA6IG9wdGlvbnMgJiYgb3B0aW9ucy5kZWVwLFxuXHQgICAgICBzeW5jOiBvcHRpb25zICYmIG9wdGlvbnMuc3luYyxcblx0ICAgICAgZmlsdGVyczogcGFyc2VkICYmIHBhcnNlZC5maWx0ZXJzLFxuXHQgICAgICB1c2VyOiAhb3B0aW9ucyB8fCBvcHRpb25zLnVzZXIgIT09IGZhbHNlXG5cdCAgICB9KTtcblx0ICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuaW1tZWRpYXRlKSB7XG5cdCAgICAgIGNiLmNhbGwodm0sIHdhdGNoZXIudmFsdWUpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIHVud2F0Y2hGbigpIHtcblx0ICAgICAgd2F0Y2hlci50ZWFyZG93bigpO1xuXHQgICAgfTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBFdmFsdWF0ZSBhIHRleHQgZGlyZWN0aXZlLCBpbmNsdWRpbmcgZmlsdGVycy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXG5cdCAgICogQHJldHVybiB7U3RyaW5nfVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRldmFsID0gZnVuY3Rpb24gKHRleHQsIGFzU3RhdGVtZW50KSB7XG5cdCAgICAvLyBjaGVjayBmb3IgZmlsdGVycy5cblx0ICAgIGlmIChmaWx0ZXJSRSQxLnRlc3QodGV4dCkpIHtcblx0ICAgICAgdmFyIGRpciA9IHBhcnNlRGlyZWN0aXZlKHRleHQpO1xuXHQgICAgICAvLyB0aGUgZmlsdGVyIHJlZ2V4IGNoZWNrIG1pZ2h0IGdpdmUgZmFsc2UgcG9zaXRpdmVcblx0ICAgICAgLy8gZm9yIHBpcGVzIGluc2lkZSBzdHJpbmdzLCBzbyBpdCdzIHBvc3NpYmxlIHRoYXRcblx0ICAgICAgLy8gd2UgZG9uJ3QgZ2V0IGFueSBmaWx0ZXJzIGhlcmVcblx0ICAgICAgdmFyIHZhbCA9IHRoaXMuJGdldChkaXIuZXhwcmVzc2lvbiwgYXNTdGF0ZW1lbnQpO1xuXHQgICAgICByZXR1cm4gZGlyLmZpbHRlcnMgPyB0aGlzLl9hcHBseUZpbHRlcnModmFsLCBudWxsLCBkaXIuZmlsdGVycykgOiB2YWw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBubyBmaWx0ZXJcblx0ICAgICAgcmV0dXJuIHRoaXMuJGdldCh0ZXh0LCBhc1N0YXRlbWVudCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW50ZXJwb2xhdGUgYSBwaWVjZSBvZiB0ZW1wbGF0ZSB0ZXh0LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRcblx0ICAgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGludGVycG9sYXRlID0gZnVuY3Rpb24gKHRleHQpIHtcblx0ICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQodGV4dCk7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgaWYgKHRva2Vucykge1xuXHQgICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICAgIHJldHVybiB2bS4kZXZhbCh0b2tlbnNbMF0udmFsdWUpICsgJyc7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIHRva2Vucy5tYXAoZnVuY3Rpb24gKHRva2VuKSB7XG5cdCAgICAgICAgICByZXR1cm4gdG9rZW4udGFnID8gdm0uJGV2YWwodG9rZW4udmFsdWUpIDogdG9rZW4udmFsdWU7XG5cdCAgICAgICAgfSkuam9pbignJyk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiB0ZXh0O1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIExvZyBpbnN0YW5jZSBkYXRhIGFzIGEgcGxhaW4gSlMgb2JqZWN0XG5cdCAgICogc28gdGhhdCBpdCBpcyBlYXNpZXIgdG8gaW5zcGVjdCBpbiBjb25zb2xlLlxuXHQgICAqIFRoaXMgbWV0aG9kIGFzc3VtZXMgY29uc29sZSBpcyBhdmFpbGFibGUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gW3BhdGhdXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGxvZyA9IGZ1bmN0aW9uIChwYXRoKSB7XG5cdCAgICB2YXIgZGF0YSA9IHBhdGggPyBnZXRQYXRoKHRoaXMuX2RhdGEsIHBhdGgpIDogdGhpcy5fZGF0YTtcblx0ICAgIGlmIChkYXRhKSB7XG5cdCAgICAgIGRhdGEgPSBjbGVhbihkYXRhKTtcblx0ICAgIH1cblx0ICAgIC8vIGluY2x1ZGUgY29tcHV0ZWQgZmllbGRzXG5cdCAgICBpZiAoIXBhdGgpIHtcblx0ICAgICAgdmFyIGtleTtcblx0ICAgICAgZm9yIChrZXkgaW4gdGhpcy4kb3B0aW9ucy5jb21wdXRlZCkge1xuXHQgICAgICAgIGRhdGFba2V5XSA9IGNsZWFuKHRoaXNba2V5XSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHRoaXMuX3Byb3BzKSB7XG5cdCAgICAgICAgZm9yIChrZXkgaW4gdGhpcy5fcHJvcHMpIHtcblx0ICAgICAgICAgIGRhdGFba2V5XSA9IGNsZWFuKHRoaXNba2V5XSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBjb25zb2xlLmxvZyhkYXRhKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBcImNsZWFuXCIgYSBnZXR0ZXIvc2V0dGVyIGNvbnZlcnRlZCBvYmplY3QgaW50byBhIHBsYWluXG5cdCAgICogb2JqZWN0IGNvcHkuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gLSBvYmpcblx0ICAgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGNsZWFuKG9iaikge1xuXHQgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBkb21BUEkgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIENvbnZlbmllbmNlIG9uLWluc3RhbmNlIG5leHRUaWNrLiBUaGUgY2FsbGJhY2sgaXNcblx0ICAgKiBhdXRvLWJvdW5kIHRvIHRoZSBpbnN0YW5jZSwgYW5kIHRoaXMgYXZvaWRzIGNvbXBvbmVudFxuXHQgICAqIG1vZHVsZXMgaGF2aW5nIHRvIHJlbHkgb24gdGhlIGdsb2JhbCBWdWUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRuZXh0VGljayA9IGZ1bmN0aW9uIChmbikge1xuXHQgICAgbmV4dFRpY2soZm4sIHRoaXMpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEFwcGVuZCBpbnN0YW5jZSB0byB0YXJnZXRcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kYXBwZW5kVG8gPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICAgIHJldHVybiBpbnNlcnQodGhpcywgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIGFwcGVuZCwgYXBwZW5kV2l0aFRyYW5zaXRpb24pO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFByZXBlbmQgaW5zdGFuY2UgdG8gdGFyZ2V0XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJHByZXBlbmRUbyA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuXHQgICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcblx0ICAgIGlmICh0YXJnZXQuaGFzQ2hpbGROb2RlcygpKSB7XG5cdCAgICAgIHRoaXMuJGJlZm9yZSh0YXJnZXQuZmlyc3RDaGlsZCwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuJGFwcGVuZFRvKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluc2VydCBpbnN0YW5jZSBiZWZvcmUgdGFyZ2V0XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGJlZm9yZSA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuXHQgICAgcmV0dXJuIGluc2VydCh0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgYmVmb3JlV2l0aENiLCBiZWZvcmVXaXRoVHJhbnNpdGlvbik7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5zZXJ0IGluc3RhbmNlIGFmdGVyIHRhcmdldFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRhZnRlciA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuXHQgICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcblx0ICAgIGlmICh0YXJnZXQubmV4dFNpYmxpbmcpIHtcblx0ICAgICAgdGhpcy4kYmVmb3JlKHRhcmdldC5uZXh0U2libGluZywgY2IsIHdpdGhUcmFuc2l0aW9uKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuJGFwcGVuZFRvKHRhcmdldC5wYXJlbnROb2RlLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVtb3ZlIGluc3RhbmNlIGZyb20gRE9NXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRyZW1vdmUgPSBmdW5jdGlvbiAoY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgICBpZiAoIXRoaXMuJGVsLnBhcmVudE5vZGUpIHtcblx0ICAgICAgcmV0dXJuIGNiICYmIGNiKCk7XG5cdCAgICB9XG5cdCAgICB2YXIgaW5Eb2N1bWVudCA9IHRoaXMuX2lzQXR0YWNoZWQgJiYgaW5Eb2ModGhpcy4kZWwpO1xuXHQgICAgLy8gaWYgd2UgYXJlIG5vdCBpbiBkb2N1bWVudCwgbm8gbmVlZCB0byBjaGVja1xuXHQgICAgLy8gZm9yIHRyYW5zaXRpb25zXG5cdCAgICBpZiAoIWluRG9jdW1lbnQpIHdpdGhUcmFuc2l0aW9uID0gZmFsc2U7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgcmVhbENiID0gZnVuY3Rpb24gcmVhbENiKCkge1xuXHQgICAgICBpZiAoaW5Eb2N1bWVudCkgc2VsZi5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XG5cdCAgICAgIGlmIChjYikgY2IoKTtcblx0ICAgIH07XG5cdCAgICBpZiAodGhpcy5faXNGcmFnbWVudCkge1xuXHQgICAgICByZW1vdmVOb2RlUmFuZ2UodGhpcy5fZnJhZ21lbnRTdGFydCwgdGhpcy5fZnJhZ21lbnRFbmQsIHRoaXMsIHRoaXMuX2ZyYWdtZW50LCByZWFsQ2IpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIG9wID0gd2l0aFRyYW5zaXRpb24gPT09IGZhbHNlID8gcmVtb3ZlV2l0aENiIDogcmVtb3ZlV2l0aFRyYW5zaXRpb247XG5cdCAgICAgIG9wKHRoaXMuJGVsLCB0aGlzLCByZWFsQ2IpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogU2hhcmVkIERPTSBpbnNlcnRpb24gZnVuY3Rpb24uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl1cblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcDEgLSBvcCBmb3Igbm9uLXRyYW5zaXRpb24gaW5zZXJ0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3AyIC0gb3AgZm9yIHRyYW5zaXRpb24gaW5zZXJ0XG5cdCAgICogQHJldHVybiB2bVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBpbnNlcnQodm0sIHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uLCBvcDEsIG9wMikge1xuXHQgICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcblx0ICAgIHZhciB0YXJnZXRJc0RldGFjaGVkID0gIWluRG9jKHRhcmdldCk7XG5cdCAgICB2YXIgb3AgPSB3aXRoVHJhbnNpdGlvbiA9PT0gZmFsc2UgfHwgdGFyZ2V0SXNEZXRhY2hlZCA/IG9wMSA6IG9wMjtcblx0ICAgIHZhciBzaG91bGRDYWxsSG9vayA9ICF0YXJnZXRJc0RldGFjaGVkICYmICF2bS5faXNBdHRhY2hlZCAmJiAhaW5Eb2Modm0uJGVsKTtcblx0ICAgIGlmICh2bS5faXNGcmFnbWVudCkge1xuXHQgICAgICBtYXBOb2RlUmFuZ2Uodm0uX2ZyYWdtZW50U3RhcnQsIHZtLl9mcmFnbWVudEVuZCwgZnVuY3Rpb24gKG5vZGUpIHtcblx0ICAgICAgICBvcChub2RlLCB0YXJnZXQsIHZtKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIGNiICYmIGNiKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvcCh2bS4kZWwsIHRhcmdldCwgdm0sIGNiKTtcblx0ICAgIH1cblx0ICAgIGlmIChzaG91bGRDYWxsSG9vaykge1xuXHQgICAgICB2bS5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdm07XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBDaGVjayBmb3Igc2VsZWN0b3JzXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBlbFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBxdWVyeShlbCkge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBlbCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsKSA6IGVsO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQXBwZW5kIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IGVsXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGFwcGVuZChlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcblx0ICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XG5cdCAgICBpZiAoY2IpIGNiKCk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBJbnNlcnRCZWZvcmUgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gZWxcblx0ICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gYmVmb3JlV2l0aENiKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuXHQgICAgYmVmb3JlKGVsLCB0YXJnZXQpO1xuXHQgICAgaWYgKGNiKSBjYigpO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmVtb3ZlIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IGVsXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZW1vdmVXaXRoQ2IoZWwsIHZtLCBjYikge1xuXHQgICAgcmVtb3ZlKGVsKTtcblx0ICAgIGlmIChjYikgY2IoKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGV2ZW50c0FQSSAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogTGlzdGVuIG9uIHRoZSBnaXZlbiBgZXZlbnRgIHdpdGggYGZuYC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJG9uID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuXHQgICAgKHRoaXMuX2V2ZW50c1tldmVudF0gfHwgKHRoaXMuX2V2ZW50c1tldmVudF0gPSBbXSkpLnB1c2goZm4pO1xuXHQgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgMSk7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBBZGRzIGFuIGBldmVudGAgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGludm9rZWQgYSBzaW5nbGVcblx0ICAgKiB0aW1lIHRoZW4gYXV0b21hdGljYWxseSByZW1vdmVkLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kb25jZSA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIGZ1bmN0aW9uIG9uKCkge1xuXHQgICAgICBzZWxmLiRvZmYoZXZlbnQsIG9uKTtcblx0ICAgICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0ICAgIG9uLmZuID0gZm47XG5cdCAgICB0aGlzLiRvbihldmVudCwgb24pO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVtb3ZlIHRoZSBnaXZlbiBjYWxsYmFjayBmb3IgYGV2ZW50YCBvciBhbGxcblx0ICAgKiByZWdpc3RlcmVkIGNhbGxiYWNrcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJG9mZiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcblx0ICAgIHZhciBjYnM7XG5cdCAgICAvLyBhbGxcblx0ICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuXHQgICAgICBpZiAodGhpcy4kcGFyZW50KSB7XG5cdCAgICAgICAgZm9yIChldmVudCBpbiB0aGlzLl9ldmVudHMpIHtcblx0ICAgICAgICAgIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF07XG5cdCAgICAgICAgICBpZiAoY2JzKSB7XG5cdCAgICAgICAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC1jYnMubGVuZ3RoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5fZXZlbnRzID0ge307XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXHQgICAgLy8gc3BlY2lmaWMgZXZlbnRcblx0ICAgIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF07XG5cdCAgICBpZiAoIWNicykge1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC1jYnMubGVuZ3RoKTtcblx0ICAgICAgdGhpcy5fZXZlbnRzW2V2ZW50XSA9IG51bGw7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXHQgICAgLy8gc3BlY2lmaWMgaGFuZGxlclxuXHQgICAgdmFyIGNiO1xuXHQgICAgdmFyIGkgPSBjYnMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBjYiA9IGNic1tpXTtcblx0ICAgICAgaWYgKGNiID09PSBmbiB8fCBjYi5mbiA9PT0gZm4pIHtcblx0ICAgICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtMSk7XG5cdCAgICAgICAgY2JzLnNwbGljZShpLCAxKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogVHJpZ2dlciBhbiBldmVudCBvbiBzZWxmLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBldmVudFxuXHQgICAqIEByZXR1cm4ge0Jvb2xlYW59IHNob3VsZFByb3BhZ2F0ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRlbWl0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICB2YXIgaXNTb3VyY2UgPSB0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnO1xuXHQgICAgZXZlbnQgPSBpc1NvdXJjZSA/IGV2ZW50IDogZXZlbnQubmFtZTtcblx0ICAgIHZhciBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuXHQgICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IGlzU291cmNlIHx8ICFjYnM7XG5cdCAgICBpZiAoY2JzKSB7XG5cdCAgICAgIGNicyA9IGNicy5sZW5ndGggPiAxID8gdG9BcnJheShjYnMpIDogY2JzO1xuXHQgICAgICAvLyB0aGlzIGlzIGEgc29tZXdoYXQgaGFja3kgc29sdXRpb24gdG8gdGhlIHF1ZXN0aW9uIHJhaXNlZFxuXHQgICAgICAvLyBpbiAjMjEwMjogZm9yIGFuIGlubGluZSBjb21wb25lbnQgbGlzdGVuZXIgbGlrZSA8Y29tcCBAdGVzdD1cImRvVGhpc1wiPixcblx0ICAgICAgLy8gdGhlIHByb3BhZ2F0aW9uIGhhbmRsaW5nIGlzIHNvbWV3aGF0IGJyb2tlbi4gVGhlcmVmb3JlIHdlXG5cdCAgICAgIC8vIG5lZWQgdG8gdHJlYXQgdGhlc2UgaW5saW5lIGNhbGxiYWNrcyBkaWZmZXJlbnRseS5cblx0ICAgICAgdmFyIGhhc1BhcmVudENicyA9IGlzU291cmNlICYmIGNicy5zb21lKGZ1bmN0aW9uIChjYikge1xuXHQgICAgICAgIHJldHVybiBjYi5fZnJvbVBhcmVudDtcblx0ICAgICAgfSk7XG5cdCAgICAgIGlmIChoYXNQYXJlbnRDYnMpIHtcblx0ICAgICAgICBzaG91bGRQcm9wYWdhdGUgPSBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjYnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIGNiID0gY2JzW2ldO1xuXHQgICAgICAgIHZhciByZXMgPSBjYi5hcHBseSh0aGlzLCBhcmdzKTtcblx0ICAgICAgICBpZiAocmVzID09PSB0cnVlICYmICghaGFzUGFyZW50Q2JzIHx8IGNiLl9mcm9tUGFyZW50KSkge1xuXHQgICAgICAgICAgc2hvdWxkUHJvcGFnYXRlID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBzaG91bGRQcm9wYWdhdGU7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVjdXJzaXZlbHkgYnJvYWRjYXN0IGFuIGV2ZW50IHRvIGFsbCBjaGlsZHJlbiBpbnN0YW5jZXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGV2ZW50XG5cdCAgICogQHBhcmFtIHsuLi4qfSBhZGRpdGlvbmFsIGFyZ3VtZW50c1xuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRicm9hZGNhc3QgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIHZhciBpc1NvdXJjZSA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZyc7XG5cdCAgICBldmVudCA9IGlzU291cmNlID8gZXZlbnQgOiBldmVudC5uYW1lO1xuXHQgICAgLy8gaWYgbm8gY2hpbGQgaGFzIHJlZ2lzdGVyZWQgZm9yIHRoaXMgZXZlbnQsXG5cdCAgICAvLyB0aGVuIHRoZXJlJ3Mgbm8gbmVlZCB0byBicm9hZGNhc3QuXG5cdCAgICBpZiAoIXRoaXMuX2V2ZW50c0NvdW50W2V2ZW50XSkgcmV0dXJuO1xuXHQgICAgdmFyIGNoaWxkcmVuID0gdGhpcy4kY2hpbGRyZW47XG5cdCAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcblx0ICAgIGlmIChpc1NvdXJjZSkge1xuXHQgICAgICAvLyB1c2Ugb2JqZWN0IGV2ZW50IHRvIGluZGljYXRlIG5vbi1zb3VyY2UgZW1pdFxuXHQgICAgICAvLyBvbiBjaGlsZHJlblxuXHQgICAgICBhcmdzWzBdID0geyBuYW1lOiBldmVudCwgc291cmNlOiB0aGlzIH07XG5cdCAgICB9XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTtcblx0ICAgICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IGNoaWxkLiRlbWl0LmFwcGx5KGNoaWxkLCBhcmdzKTtcblx0ICAgICAgaWYgKHNob3VsZFByb3BhZ2F0ZSkge1xuXHQgICAgICAgIGNoaWxkLiRicm9hZGNhc3QuYXBwbHkoY2hpbGQsIGFyZ3MpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZWN1cnNpdmVseSBwcm9wYWdhdGUgYW4gZXZlbnQgdXAgdGhlIHBhcmVudCBjaGFpbi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgICAqIEBwYXJhbSB7Li4uKn0gYWRkaXRpb25hbCBhcmd1bWVudHNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZGlzcGF0Y2ggPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSB0aGlzLiRlbWl0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICBpZiAoIXNob3VsZFByb3BhZ2F0ZSkgcmV0dXJuO1xuXHQgICAgdmFyIHBhcmVudCA9IHRoaXMuJHBhcmVudDtcblx0ICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO1xuXHQgICAgLy8gdXNlIG9iamVjdCBldmVudCB0byBpbmRpY2F0ZSBub24tc291cmNlIGVtaXRcblx0ICAgIC8vIG9uIHBhcmVudHNcblx0ICAgIGFyZ3NbMF0gPSB7IG5hbWU6IGV2ZW50LCBzb3VyY2U6IHRoaXMgfTtcblx0ICAgIHdoaWxlIChwYXJlbnQpIHtcblx0ICAgICAgc2hvdWxkUHJvcGFnYXRlID0gcGFyZW50LiRlbWl0LmFwcGx5KHBhcmVudCwgYXJncyk7XG5cdCAgICAgIHBhcmVudCA9IHNob3VsZFByb3BhZ2F0ZSA/IHBhcmVudC4kcGFyZW50IDogbnVsbDtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIE1vZGlmeSB0aGUgbGlzdGVuZXIgY291bnRzIG9uIGFsbCBwYXJlbnRzLlxuXHQgICAqIFRoaXMgYm9va2tlZXBpbmcgYWxsb3dzICRicm9hZGNhc3QgdG8gcmV0dXJuIGVhcmx5IHdoZW5cblx0ICAgKiBubyBjaGlsZCBoYXMgbGlzdGVuZWQgdG8gYSBjZXJ0YWluIGV2ZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50XG5cdCAgICovXG5cdFxuXHQgIHZhciBob29rUkUgPSAvXmhvb2s6Lztcblx0ICBmdW5jdGlvbiBtb2RpZnlMaXN0ZW5lckNvdW50KHZtLCBldmVudCwgY291bnQpIHtcblx0ICAgIHZhciBwYXJlbnQgPSB2bS4kcGFyZW50O1xuXHQgICAgLy8gaG9va3MgZG8gbm90IGdldCBicm9hZGNhc3RlZCBzbyBubyBuZWVkXG5cdCAgICAvLyB0byBkbyBib29ra2VlcGluZyBmb3IgdGhlbVxuXHQgICAgaWYgKCFwYXJlbnQgfHwgIWNvdW50IHx8IGhvb2tSRS50ZXN0KGV2ZW50KSkgcmV0dXJuO1xuXHQgICAgd2hpbGUgKHBhcmVudCkge1xuXHQgICAgICBwYXJlbnQuX2V2ZW50c0NvdW50W2V2ZW50XSA9IChwYXJlbnQuX2V2ZW50c0NvdW50W2V2ZW50XSB8fCAwKSArIGNvdW50O1xuXHQgICAgICBwYXJlbnQgPSBwYXJlbnQuJHBhcmVudDtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxpZmVjeWNsZUFQSSAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogU2V0IGluc3RhbmNlIHRhcmdldCBlbGVtZW50IGFuZCBraWNrIG9mZiB0aGUgY29tcGlsYXRpb25cblx0ICAgKiBwcm9jZXNzLiBUaGUgcGFzc2VkIGluIGBlbGAgY2FuIGJlIGEgc2VsZWN0b3Igc3RyaW5nLCBhblxuXHQgICAqIGV4aXN0aW5nIEVsZW1lbnQsIG9yIGEgRG9jdW1lbnRGcmFnbWVudCAoZm9yIGJsb2NrXG5cdCAgICogaW5zdGFuY2VzKS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fHN0cmluZ30gZWxcblx0ICAgKiBAcHVibGljXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJG1vdW50ID0gZnVuY3Rpb24gKGVsKSB7XG5cdCAgICBpZiAodGhpcy5faXNDb21waWxlZCkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJyRtb3VudCgpIHNob3VsZCBiZSBjYWxsZWQgb25seSBvbmNlLicsIHRoaXMpO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBlbCA9IHF1ZXJ5KGVsKTtcblx0ICAgIGlmICghZWwpIHtcblx0ICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIH1cblx0ICAgIHRoaXMuX2NvbXBpbGUoZWwpO1xuXHQgICAgdGhpcy5faW5pdERPTUhvb2tzKCk7XG5cdCAgICBpZiAoaW5Eb2ModGhpcy4kZWwpKSB7XG5cdCAgICAgIHRoaXMuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuXHQgICAgICByZWFkeS5jYWxsKHRoaXMpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy4kb25jZSgnaG9vazphdHRhY2hlZCcsIHJlYWR5KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIE1hcmsgYW4gaW5zdGFuY2UgYXMgcmVhZHkuXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJlYWR5KCkge1xuXHQgICAgdGhpcy5faXNBdHRhY2hlZCA9IHRydWU7XG5cdCAgICB0aGlzLl9pc1JlYWR5ID0gdHJ1ZTtcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdyZWFkeScpO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogVGVhcmRvd24gdGhlIGluc3RhbmNlLCBzaW1wbHkgZGVsZWdhdGUgdG8gdGhlIGludGVybmFsXG5cdCAgICogX2Rlc3Ryb3kuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJDbGVhbnVwXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGRlc3Ryb3kgPSBmdW5jdGlvbiAocmVtb3ZlLCBkZWZlckNsZWFudXApIHtcblx0ICAgIHRoaXMuX2Rlc3Ryb3kocmVtb3ZlLCBkZWZlckNsZWFudXApO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFBhcnRpYWxseSBjb21waWxlIGEgcGllY2Ugb2YgRE9NIGFuZCByZXR1cm4gYVxuXHQgICAqIGRlY29tcGlsZSBmdW5jdGlvbi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuXHQgICAqIEBwYXJhbSB7VnVlfSBbaG9zdF1cblx0ICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXVxuXHQgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRjb21waWxlID0gZnVuY3Rpb24gKGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgcmV0dXJuIGNvbXBpbGUoZWwsIHRoaXMuJG9wdGlvbnMsIHRydWUpKHRoaXMsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoZSBleHBvc2VkIFZ1ZSBjb25zdHJ1Y3Rvci5cblx0ICpcblx0ICogQVBJIGNvbnZlbnRpb25zOlxuXHQgKiAtIHB1YmxpYyBBUEkgbWV0aG9kcy9wcm9wZXJ0aWVzIGFyZSBwcmVmaXhlZCB3aXRoIGAkYFxuXHQgKiAtIGludGVybmFsIG1ldGhvZHMvcHJvcGVydGllcyBhcmUgcHJlZml4ZWQgd2l0aCBgX2Bcblx0ICogLSBub24tcHJlZml4ZWQgcHJvcGVydGllcyBhcmUgYXNzdW1lZCB0byBiZSBwcm94aWVkIHVzZXJcblx0ICogICBkYXRhLlxuXHQgKlxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gVnVlKG9wdGlvbnMpIHtcblx0ICB0aGlzLl9pbml0KG9wdGlvbnMpO1xuXHR9XG5cdFxuXHQvLyBpbnN0YWxsIGludGVybmFsc1xuXHRpbml0TWl4aW4oVnVlKTtcblx0c3RhdGVNaXhpbihWdWUpO1xuXHRldmVudHNNaXhpbihWdWUpO1xuXHRsaWZlY3ljbGVNaXhpbihWdWUpO1xuXHRtaXNjTWl4aW4oVnVlKTtcblx0XG5cdC8vIGluc3RhbGwgaW5zdGFuY2UgQVBJc1xuXHRkYXRhQVBJKFZ1ZSk7XG5cdGRvbUFQSShWdWUpO1xuXHRldmVudHNBUEkoVnVlKTtcblx0bGlmZWN5Y2xlQVBJKFZ1ZSk7XG5cdFxuXHR2YXIgc2xvdCA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IFNMT1QsXG5cdCAgcGFyYW1zOiBbJ25hbWUnXSxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8vIHRoaXMgd2FzIHJlc29sdmVkIGR1cmluZyBjb21wb25lbnQgdHJhbnNjbHVzaW9uXG5cdCAgICB2YXIgbmFtZSA9IHRoaXMucGFyYW1zLm5hbWUgfHwgJ2RlZmF1bHQnO1xuXHQgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnZtLl9zbG90Q29udGVudHMgJiYgdGhpcy52bS5fc2xvdENvbnRlbnRzW25hbWVdO1xuXHQgICAgaWYgKCFjb250ZW50IHx8ICFjb250ZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xuXHQgICAgICB0aGlzLmZhbGxiYWNrKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmNvbXBpbGUoY29udGVudC5jbG9uZU5vZGUodHJ1ZSksIHRoaXMudm0uX2NvbnRleHQsIHRoaXMudm0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGNvbXBpbGU6IGZ1bmN0aW9uIGNvbXBpbGUoY29udGVudCwgY29udGV4dCwgaG9zdCkge1xuXHQgICAgaWYgKGNvbnRlbnQgJiYgY29udGV4dCkge1xuXHQgICAgICBpZiAodGhpcy5lbC5oYXNDaGlsZE5vZGVzKCkgJiYgY29udGVudC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSAmJiBjb250ZW50LmNoaWxkTm9kZXNbMF0ubm9kZVR5cGUgPT09IDEgJiYgY29udGVudC5jaGlsZE5vZGVzWzBdLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG5cdCAgICAgICAgLy8gaWYgdGhlIGluc2VydGVkIHNsb3QgaGFzIHYtaWZcblx0ICAgICAgICAvLyBpbmplY3QgZmFsbGJhY2sgY29udGVudCBhcyB0aGUgdi1lbHNlXG5cdCAgICAgICAgdmFyIGVsc2VCbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG5cdCAgICAgICAgZWxzZUJsb2NrLnNldEF0dHJpYnV0ZSgndi1lbHNlJywgJycpO1xuXHQgICAgICAgIGVsc2VCbG9jay5pbm5lckhUTUwgPSB0aGlzLmVsLmlubmVySFRNTDtcblx0ICAgICAgICAvLyB0aGUgZWxzZSBibG9jayBzaG91bGQgYmUgY29tcGlsZWQgaW4gY2hpbGQgc2NvcGVcblx0ICAgICAgICBlbHNlQmxvY2suX2NvbnRleHQgPSB0aGlzLnZtO1xuXHQgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWxzZUJsb2NrKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgc2NvcGUgPSBob3N0ID8gaG9zdC5fc2NvcGUgOiB0aGlzLl9zY29wZTtcblx0ICAgICAgdGhpcy51bmxpbmsgPSBjb250ZXh0LiRjb21waWxlKGNvbnRlbnQsIGhvc3QsIHNjb3BlLCB0aGlzLl9mcmFnKTtcblx0ICAgIH1cblx0ICAgIGlmIChjb250ZW50KSB7XG5cdCAgICAgIHJlcGxhY2UodGhpcy5lbCwgY29udGVudCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZW1vdmUodGhpcy5lbCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgZmFsbGJhY2s6IGZ1bmN0aW9uIGZhbGxiYWNrKCkge1xuXHQgICAgdGhpcy5jb21waWxlKGV4dHJhY3RDb250ZW50KHRoaXMuZWwsIHRydWUpLCB0aGlzLnZtKTtcblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIGlmICh0aGlzLnVubGluaykge1xuXHQgICAgICB0aGlzLnVubGluaygpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBwYXJ0aWFsID0ge1xuXHRcblx0ICBwcmlvcml0eTogUEFSVElBTCxcblx0XG5cdCAgcGFyYW1zOiBbJ25hbWUnXSxcblx0XG5cdCAgLy8gd2F0Y2ggY2hhbmdlcyB0byBuYW1lIGZvciBkeW5hbWljIHBhcnRpYWxzXG5cdCAgcGFyYW1XYXRjaGVyczoge1xuXHQgICAgbmFtZTogZnVuY3Rpb24gbmFtZSh2YWx1ZSkge1xuXHQgICAgICB2SWYucmVtb3ZlLmNhbGwodGhpcyk7XG5cdCAgICAgIGlmICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMuaW5zZXJ0KHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1wYXJ0aWFsJyk7XG5cdCAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcblx0ICAgIHRoaXMuaW5zZXJ0KHRoaXMucGFyYW1zLm5hbWUpO1xuXHQgIH0sXG5cdFxuXHQgIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KGlkKSB7XG5cdCAgICB2YXIgcGFydGlhbCA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAncGFydGlhbHMnLCBpZCwgdHJ1ZSk7XG5cdCAgICBpZiAocGFydGlhbCkge1xuXHQgICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHBhcnRpYWwpO1xuXHQgICAgICB2SWYuaW5zZXJ0LmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICBpZiAodGhpcy5mcmFnKSB7XG5cdCAgICAgIHRoaXMuZnJhZy5kZXN0cm95KCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGVsZW1lbnREaXJlY3RpdmVzID0ge1xuXHQgIHNsb3Q6IHNsb3QsXG5cdCAgcGFydGlhbDogcGFydGlhbFxuXHR9O1xuXHRcblx0dmFyIGNvbnZlcnRBcnJheSA9IHZGb3IuX3Bvc3RQcm9jZXNzO1xuXHRcblx0LyoqXG5cdCAqIExpbWl0IGZpbHRlciBmb3IgYXJyYXlzXG5cdCAqXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBuXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgKERlY2ltYWwgZXhwZWN0ZWQpXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbGltaXRCeShhcnIsIG4sIG9mZnNldCkge1xuXHQgIG9mZnNldCA9IG9mZnNldCA/IHBhcnNlSW50KG9mZnNldCwgMTApIDogMDtcblx0ICBuID0gdG9OdW1iZXIobik7XG5cdCAgcmV0dXJuIHR5cGVvZiBuID09PSAnbnVtYmVyJyA/IGFyci5zbGljZShvZmZzZXQsIG9mZnNldCArIG4pIDogYXJyO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRmlsdGVyIGZpbHRlciBmb3IgYXJyYXlzXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcblx0ICogQHBhcmFtIHtTdHJpbmd9IFtkZWxpbWl0ZXJdXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSAuLi5kYXRhS2V5c1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZpbHRlckJ5KGFyciwgc2VhcmNoLCBkZWxpbWl0ZXIpIHtcblx0ICBhcnIgPSBjb252ZXJ0QXJyYXkoYXJyKTtcblx0ICBpZiAoc2VhcmNoID09IG51bGwpIHtcblx0ICAgIHJldHVybiBhcnI7XG5cdCAgfVxuXHQgIGlmICh0eXBlb2Ygc2VhcmNoID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICByZXR1cm4gYXJyLmZpbHRlcihzZWFyY2gpO1xuXHQgIH1cblx0ICAvLyBjYXN0IHRvIGxvd2VyY2FzZSBzdHJpbmdcblx0ICBzZWFyY2ggPSAoJycgKyBzZWFyY2gpLnRvTG93ZXJDYXNlKCk7XG5cdCAgLy8gYWxsb3cgb3B0aW9uYWwgYGluYCBkZWxpbWl0ZXJcblx0ICAvLyBiZWNhdXNlIHdoeSBub3Rcblx0ICB2YXIgbiA9IGRlbGltaXRlciA9PT0gJ2luJyA/IDMgOiAyO1xuXHQgIC8vIGV4dHJhY3QgYW5kIGZsYXR0ZW4ga2V5c1xuXHQgIHZhciBrZXlzID0gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgdG9BcnJheShhcmd1bWVudHMsIG4pKTtcblx0ICB2YXIgcmVzID0gW107XG5cdCAgdmFyIGl0ZW0sIGtleSwgdmFsLCBqO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gYXJyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgaXRlbSA9IGFycltpXTtcblx0ICAgIHZhbCA9IGl0ZW0gJiYgaXRlbS4kdmFsdWUgfHwgaXRlbTtcblx0ICAgIGogPSBrZXlzLmxlbmd0aDtcblx0ICAgIGlmIChqKSB7XG5cdCAgICAgIHdoaWxlIChqLS0pIHtcblx0ICAgICAgICBrZXkgPSBrZXlzW2pdO1xuXHQgICAgICAgIGlmIChrZXkgPT09ICcka2V5JyAmJiBjb250YWlucyhpdGVtLiRrZXksIHNlYXJjaCkgfHwgY29udGFpbnMoZ2V0UGF0aCh2YWwsIGtleSksIHNlYXJjaCkpIHtcblx0ICAgICAgICAgIHJlcy5wdXNoKGl0ZW0pO1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKGNvbnRhaW5zKGl0ZW0sIHNlYXJjaCkpIHtcblx0ICAgICAgcmVzLnB1c2goaXRlbSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGaWx0ZXIgZmlsdGVyIGZvciBhcnJheXNcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd8QXJyYXk8U3RyaW5nPnxGdW5jdGlvbn0gLi4uc29ydEtleXNcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtvcmRlcl1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBvcmRlckJ5KGFycikge1xuXHQgIHZhciBjb21wYXJhdG9yID0gbnVsbDtcblx0ICB2YXIgc29ydEtleXMgPSB1bmRlZmluZWQ7XG5cdCAgYXJyID0gY29udmVydEFycmF5KGFycik7XG5cdFxuXHQgIC8vIGRldGVybWluZSBvcmRlciAobGFzdCBhcmd1bWVudClcblx0ICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcblx0ICB2YXIgb3JkZXIgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07XG5cdCAgaWYgKHR5cGVvZiBvcmRlciA9PT0gJ251bWJlcicpIHtcblx0ICAgIG9yZGVyID0gb3JkZXIgPCAwID8gLTEgOiAxO1xuXHQgICAgYXJncyA9IGFyZ3MubGVuZ3RoID4gMSA/IGFyZ3Muc2xpY2UoMCwgLTEpIDogYXJncztcblx0ICB9IGVsc2Uge1xuXHQgICAgb3JkZXIgPSAxO1xuXHQgIH1cblx0XG5cdCAgLy8gZGV0ZXJtaW5lIHNvcnRLZXlzICYgY29tcGFyYXRvclxuXHQgIHZhciBmaXJzdEFyZyA9IGFyZ3NbMF07XG5cdCAgaWYgKCFmaXJzdEFyZykge1xuXHQgICAgcmV0dXJuIGFycjtcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBmaXJzdEFyZyA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgLy8gY3VzdG9tIGNvbXBhcmF0b3Jcblx0ICAgIGNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikge1xuXHQgICAgICByZXR1cm4gZmlyc3RBcmcoYSwgYikgKiBvcmRlcjtcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIHN0cmluZyBrZXlzLiBmbGF0dGVuIGZpcnN0XG5cdCAgICBzb3J0S2V5cyA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIGFyZ3MpO1xuXHQgICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uIChhLCBiLCBpKSB7XG5cdCAgICAgIGkgPSBpIHx8IDA7XG5cdCAgICAgIHJldHVybiBpID49IHNvcnRLZXlzLmxlbmd0aCAtIDEgPyBiYXNlQ29tcGFyZShhLCBiLCBpKSA6IGJhc2VDb21wYXJlKGEsIGIsIGkpIHx8IGNvbXBhcmF0b3IoYSwgYiwgaSArIDEpO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGJhc2VDb21wYXJlKGEsIGIsIHNvcnRLZXlJbmRleCkge1xuXHQgICAgdmFyIHNvcnRLZXkgPSBzb3J0S2V5c1tzb3J0S2V5SW5kZXhdO1xuXHQgICAgaWYgKHNvcnRLZXkpIHtcblx0ICAgICAgaWYgKHNvcnRLZXkgIT09ICcka2V5Jykge1xuXHQgICAgICAgIGlmIChpc09iamVjdChhKSAmJiAnJHZhbHVlJyBpbiBhKSBhID0gYS4kdmFsdWU7XG5cdCAgICAgICAgaWYgKGlzT2JqZWN0KGIpICYmICckdmFsdWUnIGluIGIpIGIgPSBiLiR2YWx1ZTtcblx0ICAgICAgfVxuXHQgICAgICBhID0gaXNPYmplY3QoYSkgPyBnZXRQYXRoKGEsIHNvcnRLZXkpIDogYTtcblx0ICAgICAgYiA9IGlzT2JqZWN0KGIpID8gZ2V0UGF0aChiLCBzb3J0S2V5KSA6IGI7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gYSA9PT0gYiA/IDAgOiBhID4gYiA/IG9yZGVyIDogLW9yZGVyO1xuXHQgIH1cblx0XG5cdCAgLy8gc29ydCBvbiBhIGNvcHkgdG8gYXZvaWQgbXV0YXRpbmcgb3JpZ2luYWwgYXJyYXlcblx0ICByZXR1cm4gYXJyLnNsaWNlKCkuc29ydChjb21wYXJhdG9yKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFN0cmluZyBjb250YWluIGhlbHBlclxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29udGFpbnModmFsLCBzZWFyY2gpIHtcblx0ICB2YXIgaTtcblx0ICBpZiAoaXNQbGFpbk9iamVjdCh2YWwpKSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7XG5cdCAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGlmIChjb250YWlucyh2YWxba2V5c1tpXV0sIHNlYXJjaCkpIHtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWwpKSB7XG5cdCAgICBpID0gdmFsLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgaWYgKGNvbnRhaW5zKHZhbFtpXSwgc2VhcmNoKSkge1xuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICh2YWwgIT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIHZhbC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzZWFyY2gpID4gLTE7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgZGlnaXRzUkUgPSAvKFxcZHszfSkoPz1cXGQpL2c7XG5cdFxuXHQvLyBhc3NldCBjb2xsZWN0aW9ucyBtdXN0IGJlIGEgcGxhaW4gb2JqZWN0LlxuXHR2YXIgZmlsdGVycyA9IHtcblx0XG5cdCAgb3JkZXJCeTogb3JkZXJCeSxcblx0ICBmaWx0ZXJCeTogZmlsdGVyQnksXG5cdCAgbGltaXRCeTogbGltaXRCeSxcblx0XG5cdCAgLyoqXG5cdCAgICogU3RyaW5naWZ5IHZhbHVlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGVudFxuXHQgICAqL1xuXHRcblx0ICBqc29uOiB7XG5cdCAgICByZWFkOiBmdW5jdGlvbiByZWFkKHZhbHVlLCBpbmRlbnQpIHtcblx0ICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyB2YWx1ZSA6IEpTT04uc3RyaW5naWZ5KHZhbHVlLCBudWxsLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGluZGVudCA6IDIpO1xuXHQgICAgfSxcblx0ICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZSh2YWx1ZSkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqICdhYmMnID0+ICdBYmMnXG5cdCAgICovXG5cdFxuXHQgIGNhcGl0YWxpemU6IGZ1bmN0aW9uIGNhcGl0YWxpemUodmFsdWUpIHtcblx0ICAgIGlmICghdmFsdWUgJiYgdmFsdWUgIT09IDApIHJldHVybiAnJztcblx0ICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcblx0ICAgIHJldHVybiB2YWx1ZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHZhbHVlLnNsaWNlKDEpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqICdhYmMnID0+ICdBQkMnXG5cdCAgICovXG5cdFxuXHQgIHVwcGVyY2FzZTogZnVuY3Rpb24gdXBwZXJjYXNlKHZhbHVlKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgfHwgdmFsdWUgPT09IDAgPyB2YWx1ZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgOiAnJztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiAnQWJDJyA9PiAnYWJjJ1xuXHQgICAqL1xuXHRcblx0ICBsb3dlcmNhc2U6IGZ1bmN0aW9uIGxvd2VyY2FzZSh2YWx1ZSkge1xuXHQgICAgcmV0dXJuIHZhbHVlIHx8IHZhbHVlID09PSAwID8gdmFsdWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpIDogJyc7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogMTIzNDUgPT4gJDEyLDM0NS4wMFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHNpZ25cblx0ICAgKiBAcGFyYW0ge051bWJlcn0gZGVjaW1hbHMgRGVjaW1hbCBwbGFjZXNcblx0ICAgKi9cblx0XG5cdCAgY3VycmVuY3k6IGZ1bmN0aW9uIGN1cnJlbmN5KHZhbHVlLCBfY3VycmVuY3ksIGRlY2ltYWxzKSB7XG5cdCAgICB2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpO1xuXHQgICAgaWYgKCFpc0Zpbml0ZSh2YWx1ZSkgfHwgIXZhbHVlICYmIHZhbHVlICE9PSAwKSByZXR1cm4gJyc7XG5cdCAgICBfY3VycmVuY3kgPSBfY3VycmVuY3kgIT0gbnVsbCA/IF9jdXJyZW5jeSA6ICckJztcblx0ICAgIGRlY2ltYWxzID0gZGVjaW1hbHMgIT0gbnVsbCA/IGRlY2ltYWxzIDogMjtcblx0ICAgIHZhciBzdHJpbmdpZmllZCA9IE1hdGguYWJzKHZhbHVlKS50b0ZpeGVkKGRlY2ltYWxzKTtcblx0ICAgIHZhciBfaW50ID0gZGVjaW1hbHMgPyBzdHJpbmdpZmllZC5zbGljZSgwLCAtMSAtIGRlY2ltYWxzKSA6IHN0cmluZ2lmaWVkO1xuXHQgICAgdmFyIGkgPSBfaW50Lmxlbmd0aCAlIDM7XG5cdCAgICB2YXIgaGVhZCA9IGkgPiAwID8gX2ludC5zbGljZSgwLCBpKSArIChfaW50Lmxlbmd0aCA+IDMgPyAnLCcgOiAnJykgOiAnJztcblx0ICAgIHZhciBfZmxvYXQgPSBkZWNpbWFscyA/IHN0cmluZ2lmaWVkLnNsaWNlKC0xIC0gZGVjaW1hbHMpIDogJyc7XG5cdCAgICB2YXIgc2lnbiA9IHZhbHVlIDwgMCA/ICctJyA6ICcnO1xuXHQgICAgcmV0dXJuIHNpZ24gKyBfY3VycmVuY3kgKyBoZWFkICsgX2ludC5zbGljZShpKS5yZXBsYWNlKGRpZ2l0c1JFLCAnJDEsJykgKyBfZmxvYXQ7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogJ2l0ZW0nID0+ICdpdGVtcydcblx0ICAgKlxuXHQgICAqIEBwYXJhbXNcblx0ICAgKiAgYW4gYXJyYXkgb2Ygc3RyaW5ncyBjb3JyZXNwb25kaW5nIHRvXG5cdCAgICogIHRoZSBzaW5nbGUsIGRvdWJsZSwgdHJpcGxlIC4uLiBmb3JtcyBvZiB0aGUgd29yZCB0b1xuXHQgICAqICBiZSBwbHVyYWxpemVkLiBXaGVuIHRoZSBudW1iZXIgdG8gYmUgcGx1cmFsaXplZFxuXHQgICAqICBleGNlZWRzIHRoZSBsZW5ndGggb2YgdGhlIGFyZ3MsIGl0IHdpbGwgdXNlIHRoZSBsYXN0XG5cdCAgICogIGVudHJ5IGluIHRoZSBhcnJheS5cblx0ICAgKlxuXHQgICAqICBlLmcuIFsnc2luZ2xlJywgJ2RvdWJsZScsICd0cmlwbGUnLCAnbXVsdGlwbGUnXVxuXHQgICAqL1xuXHRcblx0ICBwbHVyYWxpemU6IGZ1bmN0aW9uIHBsdXJhbGl6ZSh2YWx1ZSkge1xuXHQgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG5cdCAgICB2YXIgbGVuZ3RoID0gYXJncy5sZW5ndGg7XG5cdCAgICBpZiAobGVuZ3RoID4gMSkge1xuXHQgICAgICB2YXIgaW5kZXggPSB2YWx1ZSAlIDEwIC0gMTtcblx0ICAgICAgcmV0dXJuIGluZGV4IGluIGFyZ3MgPyBhcmdzW2luZGV4XSA6IGFyZ3NbbGVuZ3RoIC0gMV07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gYXJnc1swXSArICh2YWx1ZSA9PT0gMSA/ICcnIDogJ3MnKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBEZWJvdW5jZSBhIGhhbmRsZXIgZnVuY3Rpb24uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGRlbGF5ID0gMzAwXG5cdCAgICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAgICovXG5cdFxuXHQgIGRlYm91bmNlOiBmdW5jdGlvbiBkZWJvdW5jZShoYW5kbGVyLCBkZWxheSkge1xuXHQgICAgaWYgKCFoYW5kbGVyKSByZXR1cm47XG5cdCAgICBpZiAoIWRlbGF5KSB7XG5cdCAgICAgIGRlbGF5ID0gMzAwO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIF9kZWJvdW5jZShoYW5kbGVyLCBkZWxheSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gaW5zdGFsbEdsb2JhbEFQSSAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogVnVlIGFuZCBldmVyeSBjb25zdHJ1Y3RvciB0aGF0IGV4dGVuZHMgVnVlIGhhcyBhblxuXHQgICAqIGFzc29jaWF0ZWQgb3B0aW9ucyBvYmplY3QsIHdoaWNoIGNhbiBiZSBhY2Nlc3NlZCBkdXJpbmdcblx0ICAgKiBjb21waWxhdGlvbiBzdGVwcyBhcyBgdGhpcy5jb25zdHJ1Y3Rvci5vcHRpb25zYC5cblx0ICAgKlxuXHQgICAqIFRoZXNlIGNhbiBiZSBzZWVuIGFzIHRoZSBkZWZhdWx0IG9wdGlvbnMgb2YgZXZlcnlcblx0ICAgKiBWdWUgaW5zdGFuY2UuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5vcHRpb25zID0ge1xuXHQgICAgZGlyZWN0aXZlczogZGlyZWN0aXZlcyxcblx0ICAgIGVsZW1lbnREaXJlY3RpdmVzOiBlbGVtZW50RGlyZWN0aXZlcyxcblx0ICAgIGZpbHRlcnM6IGZpbHRlcnMsXG5cdCAgICB0cmFuc2l0aW9uczoge30sXG5cdCAgICBjb21wb25lbnRzOiB7fSxcblx0ICAgIHBhcnRpYWxzOiB7fSxcblx0ICAgIHJlcGxhY2U6IHRydWVcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBFeHBvc2UgdXNlZnVsIGludGVybmFsc1xuXHQgICAqL1xuXHRcblx0ICBWdWUudXRpbCA9IHV0aWw7XG5cdCAgVnVlLmNvbmZpZyA9IGNvbmZpZztcblx0ICBWdWUuc2V0ID0gc2V0O1xuXHQgIFZ1ZVsnZGVsZXRlJ10gPSBkZWw7XG5cdCAgVnVlLm5leHRUaWNrID0gbmV4dFRpY2s7XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRoZSBmb2xsb3dpbmcgYXJlIGV4cG9zZWQgZm9yIGFkdmFuY2VkIHVzYWdlIC8gcGx1Z2luc1xuXHQgICAqL1xuXHRcblx0ICBWdWUuY29tcGlsZXIgPSBjb21waWxlcjtcblx0ICBWdWUuRnJhZ21lbnRGYWN0b3J5ID0gRnJhZ21lbnRGYWN0b3J5O1xuXHQgIFZ1ZS5pbnRlcm5hbERpcmVjdGl2ZXMgPSBpbnRlcm5hbERpcmVjdGl2ZXM7XG5cdCAgVnVlLnBhcnNlcnMgPSB7XG5cdCAgICBwYXRoOiBwYXRoLFxuXHQgICAgdGV4dDogdGV4dCxcblx0ICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZSxcblx0ICAgIGRpcmVjdGl2ZTogZGlyZWN0aXZlLFxuXHQgICAgZXhwcmVzc2lvbjogZXhwcmVzc2lvblxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEVhY2ggaW5zdGFuY2UgY29uc3RydWN0b3IsIGluY2x1ZGluZyBWdWUsIGhhcyBhIHVuaXF1ZVxuXHQgICAqIGNpZC4gVGhpcyBlbmFibGVzIHVzIHRvIGNyZWF0ZSB3cmFwcGVkIFwiY2hpbGRcblx0ICAgKiBjb25zdHJ1Y3RvcnNcIiBmb3IgcHJvdG90eXBhbCBpbmhlcml0YW5jZSBhbmQgY2FjaGUgdGhlbS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLmNpZCA9IDA7XG5cdCAgdmFyIGNpZCA9IDE7XG5cdFxuXHQgIC8qKlxuXHQgICAqIENsYXNzIGluaGVyaXRhbmNlXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gZXh0ZW5kT3B0aW9uc1xuXHQgICAqL1xuXHRcblx0ICBWdWUuZXh0ZW5kID0gZnVuY3Rpb24gKGV4dGVuZE9wdGlvbnMpIHtcblx0ICAgIGV4dGVuZE9wdGlvbnMgPSBleHRlbmRPcHRpb25zIHx8IHt9O1xuXHQgICAgdmFyIFN1cGVyID0gdGhpcztcblx0ICAgIHZhciBpc0ZpcnN0RXh0ZW5kID0gU3VwZXIuY2lkID09PSAwO1xuXHQgICAgaWYgKGlzRmlyc3RFeHRlbmQgJiYgZXh0ZW5kT3B0aW9ucy5fQ3Rvcikge1xuXHQgICAgICByZXR1cm4gZXh0ZW5kT3B0aW9ucy5fQ3Rvcjtcblx0ICAgIH1cblx0ICAgIHZhciBuYW1lID0gZXh0ZW5kT3B0aW9ucy5uYW1lIHx8IFN1cGVyLm9wdGlvbnMubmFtZTtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIGlmICghL15bYS16QS1aXVtcXHctXSokLy50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgd2FybignSW52YWxpZCBjb21wb25lbnQgbmFtZTogXCInICsgbmFtZSArICdcIi4gQ29tcG9uZW50IG5hbWVzICcgKyAnY2FuIG9ubHkgY29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjYXRlcnMgYW5kIHRoZSBoeXBoZW4uJyk7XG5cdCAgICAgICAgbmFtZSA9IG51bGw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHZhciBTdWIgPSBjcmVhdGVDbGFzcyhuYW1lIHx8ICdWdWVDb21wb25lbnQnKTtcblx0ICAgIFN1Yi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN1cGVyLnByb3RvdHlwZSk7XG5cdCAgICBTdWIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3ViO1xuXHQgICAgU3ViLmNpZCA9IGNpZCsrO1xuXHQgICAgU3ViLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoU3VwZXIub3B0aW9ucywgZXh0ZW5kT3B0aW9ucyk7XG5cdCAgICBTdWJbJ3N1cGVyJ10gPSBTdXBlcjtcblx0ICAgIC8vIGFsbG93IGZ1cnRoZXIgZXh0ZW5zaW9uXG5cdCAgICBTdWIuZXh0ZW5kID0gU3VwZXIuZXh0ZW5kO1xuXHQgICAgLy8gY3JlYXRlIGFzc2V0IHJlZ2lzdGVycywgc28gZXh0ZW5kZWQgY2xhc3Nlc1xuXHQgICAgLy8gY2FuIGhhdmUgdGhlaXIgcHJpdmF0ZSBhc3NldHMgdG9vLlxuXHQgICAgY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcblx0ICAgICAgU3ViW3R5cGVdID0gU3VwZXJbdHlwZV07XG5cdCAgICB9KTtcblx0ICAgIC8vIGVuYWJsZSByZWN1cnNpdmUgc2VsZi1sb29rdXBcblx0ICAgIGlmIChuYW1lKSB7XG5cdCAgICAgIFN1Yi5vcHRpb25zLmNvbXBvbmVudHNbbmFtZV0gPSBTdWI7XG5cdCAgICB9XG5cdCAgICAvLyBjYWNoZSBjb25zdHJ1Y3RvclxuXHQgICAgaWYgKGlzRmlyc3RFeHRlbmQpIHtcblx0ICAgICAgZXh0ZW5kT3B0aW9ucy5fQ3RvciA9IFN1Yjtcblx0ICAgIH1cblx0ICAgIHJldHVybiBTdWI7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBzdWItY2xhc3MgY29uc3RydWN0b3Igd2l0aCB0aGVcblx0ICAgKiBnaXZlbiBuYW1lLiBUaGlzIGdpdmVzIHVzIG11Y2ggbmljZXIgb3V0cHV0IHdoZW5cblx0ICAgKiBsb2dnaW5nIGluc3RhbmNlcyBpbiB0aGUgY29uc29sZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCAgICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGNyZWF0ZUNsYXNzKG5hbWUpIHtcblx0ICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jICovXG5cdCAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdyZXR1cm4gZnVuY3Rpb24gJyArIGNsYXNzaWZ5KG5hbWUpICsgJyAob3B0aW9ucykgeyB0aGlzLl9pbml0KG9wdGlvbnMpIH0nKSgpO1xuXHQgICAgLyogZXNsaW50LWVuYWJsZSBuby1uZXctZnVuYyAqL1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUGx1Z2luIHN5c3RlbVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IHBsdWdpblxuXHQgICAqL1xuXHRcblx0ICBWdWUudXNlID0gZnVuY3Rpb24gKHBsdWdpbikge1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAocGx1Z2luLmluc3RhbGxlZCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICAvLyBhZGRpdGlvbmFsIHBhcmFtZXRlcnNcblx0ICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuXHQgICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuXHQgICAgaWYgKHR5cGVvZiBwbHVnaW4uaW5zdGFsbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBwbHVnaW4uaW5zdGFsbC5hcHBseShwbHVnaW4sIGFyZ3MpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcGx1Z2luLmFwcGx5KG51bGwsIGFyZ3MpO1xuXHQgICAgfVxuXHQgICAgcGx1Z2luLmluc3RhbGxlZCA9IHRydWU7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBBcHBseSBhIGdsb2JhbCBtaXhpbiBieSBtZXJnaW5nIGl0IGludG8gdGhlIGRlZmF1bHRcblx0ICAgKiBvcHRpb25zLlxuXHQgICAqL1xuXHRcblx0ICBWdWUubWl4aW4gPSBmdW5jdGlvbiAobWl4aW4pIHtcblx0ICAgIFZ1ZS5vcHRpb25zID0gbWVyZ2VPcHRpb25zKFZ1ZS5vcHRpb25zLCBtaXhpbik7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ3JlYXRlIGFzc2V0IHJlZ2lzdHJhdGlvbiBtZXRob2RzIHdpdGggdGhlIGZvbGxvd2luZ1xuXHQgICAqIHNpZ25hdHVyZTpcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuXHQgICAqIEBwYXJhbSB7Kn0gZGVmaW5pdGlvblxuXHQgICAqL1xuXHRcblx0ICBjb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuXHQgICAgVnVlW3R5cGVdID0gZnVuY3Rpb24gKGlkLCBkZWZpbml0aW9uKSB7XG5cdCAgICAgIGlmICghZGVmaW5pdGlvbikge1xuXHQgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgKGNvbW1vblRhZ1JFLnRlc3QoaWQpIHx8IHJlc2VydmVkVGFnUkUudGVzdChpZCkpKSB7XG5cdCAgICAgICAgICAgIHdhcm4oJ0RvIG5vdCB1c2UgYnVpbHQtaW4gb3IgcmVzZXJ2ZWQgSFRNTCBlbGVtZW50cyBhcyBjb21wb25lbnQgJyArICdpZDogJyArIGlkKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHR5cGUgPT09ICdjb21wb25lbnQnICYmIGlzUGxhaW5PYmplY3QoZGVmaW5pdGlvbikpIHtcblx0ICAgICAgICAgIGlmICghZGVmaW5pdGlvbi5uYW1lKSB7XG5cdCAgICAgICAgICAgIGRlZmluaXRpb24ubmFtZSA9IGlkO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgZGVmaW5pdGlvbiA9IFZ1ZS5leHRlbmQoZGVmaW5pdGlvbik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF0gPSBkZWZpbml0aW9uO1xuXHQgICAgICAgIHJldHVybiBkZWZpbml0aW9uO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH0pO1xuXHRcblx0ICAvLyBleHBvc2UgaW50ZXJuYWwgdHJhbnNpdGlvbiBBUElcblx0ICBleHRlbmQoVnVlLnRyYW5zaXRpb24sIHRyYW5zaXRpb24pO1xuXHR9XG5cdFxuXHRpbnN0YWxsR2xvYmFsQVBJKFZ1ZSk7XG5cdFxuXHRWdWUudmVyc2lvbiA9ICcxLjAuMjYnO1xuXHRcblx0Ly8gZGV2dG9vbHMgZ2xvYmFsIGhvb2tcblx0LyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKGNvbmZpZy5kZXZ0b29scykge1xuXHQgICAgaWYgKGRldnRvb2xzKSB7XG5cdCAgICAgIGRldnRvb2xzLmVtaXQoJ2luaXQnLCBWdWUpO1xuXHQgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGluQnJvd3NlciAmJiAvQ2hyb21lXFwvXFxkKy8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcblx0ICAgICAgY29uc29sZS5sb2coJ0Rvd25sb2FkIHRoZSBWdWUgRGV2dG9vbHMgZm9yIGEgYmV0dGVyIGRldmVsb3BtZW50IGV4cGVyaWVuY2U6XFxuJyArICdodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWRldnRvb2xzJyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9LCAwKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gVnVlO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSwgX193ZWJwYWNrX3JlcXVpcmVfXygxOSkpKVxuXG4vKioqLyB9LFxuLyogNDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9jb21wb25lbnRzL3VpL2ljb24nO1xuXHQvLyAgICAgQGltcG9ydCAnLi9hcGktdGFibGUnO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi9hcGktdGFibGUuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBwcm9wczoge1xuXHQgICAgaXRlbXM6IHtcblx0ICAgICAgdHlwZTogQXJyYXlcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA0NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vc2lkZS1uYXYnO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi9zaWRlLW5hdi5odG1sXCI+PC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblx0dmFyIGNsYXNzTmFtZSA9ICdoeV91LWhpZGUnO1xuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgbWV0aG9kczoge1xuXHQgICAgc2hvd05hdjogZnVuY3Rpb24gc2hvd05hdigpIHtcblx0ICAgICAgdGhpcy4kZWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuXHQgICAgfSxcblx0ICAgIGhpZGVOYXY6IGZ1bmN0aW9uIGhpZGVOYXYoKSB7XG5cdCAgICAgIHZhciBjbGFzc2VzID0gdGhpcy4kZWwuY2xhc3NOYW1lLnNwbGl0KCcgJyk7XG5cdCAgICAgIGNsYXNzZXMucHVzaChjbGFzc05hbWUpO1xuXHQgICAgICB0aGlzLiRlbC5jbGFzc05hbWUgPSBjbGFzc2VzLmpvaW4oJyAnKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIGV2ZW50czoge1xuXHQgICAgJ3RvZ2dsZTo6c2l0ZU5hdic6IGZ1bmN0aW9uIHRvZ2dsZVNpdGVOYXYoKSB7XG5cdCAgICAgIGlmICh0aGlzLiRlbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuXHQgICAgICAgIHRoaXMuc2hvd05hdigpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuaGlkZU5hdigpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHQvLyA8c3R5bGUgbGFuZz1cInNhc3NcIj5cblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG5cdC8vICAgICBAaW1wb3J0ICcuL3NpdGUtaGVhZGVyJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vc2l0ZS1oZWFkZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBtZXRob2RzOiB7XG5cdCAgICB0b2dnbGVOYXY6IGZ1bmN0aW9uIHRvZ2dsZU5hdigpIHtcblx0ICAgICAgdGhpcy4kcm9vdC4kYnJvYWRjYXN0KCd0b2dnbGU6OnNpdGVOYXYnKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA0NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBjb21wb25lbnRzOiB7XG5cdCAgICBBcGlUYWJsZTogX2luZGV4Mi5kZWZhdWx0XG5cdCAgfSxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgZGlzbWlzc0NhbGxCYWNrOiBmdW5jdGlvbiBkaXNtaXNzQ2FsbEJhY2soKSB7XG5cdCAgICAgICAgY29uc29sZS5sb2coJ2FsZXJ0ISEhJyk7XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBhcGlJdGVtczogW3tcblx0ICAgICAgICBuYW1lOiAndHlwZScsXG5cdCAgICAgICAgdHlwZTogJ1N0cmluZycsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAnVGhlIHR5cGUgb2YgYWxlcnQgKGVycm9yLCBpbmZvLCBzdWNjZXNzKSdcblx0ICAgICAgfSwge1xuXHQgICAgICAgIG5hbWU6ICdkaXNtaXNzaWJsZScsXG5cdCAgICAgICAgdHlwZTogJ0Jvb2xlYW4nLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6IHRydWUsXG5cdCAgICAgICAgZGVzYzogJ0lzIHRoZSBhbGVydCBkaXNtaXNzaWJsZT8nXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAndGltZW91dCcsXG5cdCAgICAgICAgdHlwZTogJ051bWJlcicsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG5cdCAgICAgICAgZGVmYXVsdDogLTEsXG5cdCAgICAgICAgZGVzYzogJ1RoZSBkdXJhdGlvbiBhbGVydCBzdGF5cyBvbiBzY3JlZW4gaW4gbXMnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnb25DbG9zZWQnLFxuXHQgICAgICAgIHR5cGU6ICdGdW5jdGlvbicsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ0NhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIGFsZXJ0IGlzIGNsb3NlZC4nXG5cdCAgICAgIH1dXG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblx0Ly8gPHRlbXBsYXRlPlxuXHQvLyAgIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG5cdC8vICAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cblx0Ly8gICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPkFsZXJ0PC9oMj5cblx0Ly8gICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cblx0Ly8gICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cblx0Ly8gICAgICAgICAgICA8YWxlcnQgdHlwZT1cImVycm9yXCI+VGhpcyBpcyBhbiBlcnJvciBhbGVydC48L2FsZXJ0PlxuXHQvLyAgICAgICAgICAgIDxhbGVydCB0eXBlPVwiaW5mb1wiPlRoaXMgaXMgYW4gaW5mbyBhbGVydC48L2FsZXJ0PlxuXHQvLyAgICAgICAgICAgIDxhbGVydCB0eXBlPVwic3VjY2Vzc1wiPlRoaXMgaXMgYSBzdWNjZXNzIGFsZXJ0LjwvYWxlcnQ+XG5cdC8vICAgICAgICAgICAgPGFsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOmRpc21pc3NpYmxlPVwiZmFsc2VcIj5UaGlzIGlzIG5vdCBhIGRpc21pc3NpYmxlIGFsZXJ0LjwvYWxlcnQ+XG5cdC8vICAgICAgICAgICAgPGFsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOm9uLWNsb3NlZD1cImRpc21pc3NDYWxsQmFja1wiPlRoaXMgaXMgYW4gYWxlcnQgd2l0aCBjYWxsYmFjay48L2FsZXJ0PlxuXHQvLyAgICAgICAgICAgIDxhbGVydCB0eXBlPVwiaW5mb1wiIDp0aW1lb3V0PVwiNTAwMFwiPlRoaXMgYWxlcnQgc2hvdWxkIHRpbWVvdXQgaW4gNSBzZWNvbmRzLjwvYWxlcnQ+XG5cdC8vICAgICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG5cdC8vICAgICAgICAgICAgPHByZT5cblx0Ly8gICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuXHQvLyAmbHQ7YWxlcnQgdHlwZT1cImVycm9yXCImZ3Q7VGhpcyBpcyBhbiBlcnJvciBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xuXHQvLyAmbHQ7YWxlcnQgdHlwZT1cImluZm9cIiZndDtUaGlzIGlzIGFuIGluZm8gYWxlcnQuJmx0Oy9hbGVydCZndDtcblx0Ly8gJmx0O2FsZXJ0IHR5cGU9XCJzdWNjZXNzXCImZ3Q7VGhpcyBpcyBhIHN1Y2Nlc3MgYWxlcnQuJmx0Oy9hbGVydCZndDtcblx0Ly8gJmx0O2FsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOmRpc21pc3NpYmxlPVwiZmFsc2VcIiZndDtUaGlzIGlzIG5vdCBhIGRpc21pc3NpYmxlIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XG5cdC8vICZsdDthbGVydCB0eXBlPVwic3VjY2Vzc1wiIDpvbi1jbG9zZWQ9XCJkaXNtaXNzQ2FsbEJhY2tcIiZndDtUaGlzIGlzIGFuIGFsZXJ0IHdpdGggY2FsbGJhY2suJmx0Oy9hbGVydCZndDtcblx0Ly8gJmx0O2FsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOnRpbWVvdXQ9XCI1MDAwXCImZ3Q7VGhpcyBhbGVydCBzaG91bGQgdGltZW91dCBpbiA1IHNlY29uZHMuJmx0Oy9hbGVydCZndDtcblx0Ly8gICAgICAgICAgICAgIDwvY29kZT5cblx0Ly8gICAgICAgICAgICA8L3ByZT5cblx0Ly8gICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vICAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJPC9oMz5cblx0Ly8gICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vXG5cdC8vICAgIDwvZGl2PlxuXHQvLyAgIDwvc2VjdGlvbj5cblx0Ly8gPC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblxuLyoqKi8gfSxcbi8qIDQ4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGNvbXBvbmVudHM6IHtcblx0ICAgIEFwaVRhYmxlOiBfaW5kZXgyLmRlZmF1bHRcblx0ICB9LFxuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBhcGlJdGVtczogW3tcblx0ICAgICAgICBuYW1lOiAnbGFiZWwnLFxuXHQgICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ1RoZSBsYWJsZSBvZiB0aGUgcGFuZWwnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnaXNPcGVuJyxcblx0ICAgICAgICB0eXBlOiAnQm9vbGVhbicsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG5cdCAgICAgICAgZGVmYXVsdDogZmFsc2UsXG5cdCAgICAgICAgZGVzYzogJ0lzIHRoZSBwYW5lbCBvcGVuLidcblx0ICAgICAgfV1cblx0ICAgIH07XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXHQvLyA8dGVtcGxhdGU+XG5cdC8vICAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cblx0Ly8gICAgPGRpdiBjbGFzcz1cImh5X28td3JhcHBlclwiPlxuXHQvLyAgICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+Q29sbGFwc2FibGUgUGFuZWw8L2gyPlxuXHQvLyAgICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuXHQvLyAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuXHQvLyAgICAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIlBhbmVsIDFcIiA6aXMtb3Blbj1cInRydWVcIj5cblx0Ly8gICAgICAgICAgICAgUGFuZWwgMSBjb250ZW50XG5cdC8vICAgICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cblx0Ly9cblx0Ly8gICAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJQYW5lbCAyXCI+XG5cdC8vICAgICAgICAgICAgIFBhbmVsIDIgY29udGVudFxuXHQvLyAgICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cdC8vICAgICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG5cdC8vICAgICAgICAgICAgPHByZT5cblx0Ly8gICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuXHQvLyAmbHQ7Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJQYW5lbCAxXCIgOmlzLW9wZW49XCJ0cnVlXCImZ3Q7XG5cdC8vICBQYW5lbCAxIGNvbnRlbnRcblx0Ly8gJmx0Oy9jb2xsYXBzYWJsZS1wYW5lbCZndDtcblx0Ly8gJmx0O2NvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiUGFuZWwgMlwiJmd0O1xuXHQvLyAgUGFuZWwgMiBjb250ZW50XG5cdC8vICZsdDsvY29sbGFwc2FibGUtcGFuZWwmZ3Q7XG5cdC8vICAgICAgICAgICAgICA8L2NvZGU+XG5cdC8vICAgICAgICAgICAgPC9wcmU+XG5cdC8vICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG5cdC8vICAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvL1xuXHQvLyAgICA8L2Rpdj5cblx0Ly8gICA8L3NlY3Rpb24+XG5cdC8vIDwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cbi8qKiovIH0sXG4vKiA0OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0Ly8gPHRlbXBsYXRlPlxuXHQvLyAgIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG5cdC8vICAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cblx0Ly8gICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPkdldHRpbmcgU3RhcnRlZDwvaDI+XG5cdC8vICAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG5cdC8vICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0tNSBoeV90LWdyZXlcIj5DRE48L2gzPlxuXHQvLyAgICAgIDxwPlxuXHQvLyAgICAgICAgLi4uXG5cdC8vICAgICAgPC9wPlxuXHQvLyAgICA8L2Rpdj5cblx0Ly8gICA8L3NlY3Rpb24+XG5cdC8vIDwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4uL3Njc3MvbWFpbi5zY3NzJztcblx0Ly8gICAgIEBpbXBvcnQgJy4uL3Njc3MvcHJpc20uc2Nzcyc7XG5cdC8vIDwvc3R5bGU+XG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHt9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgY29tcG9uZW50czoge1xuXHQgICAgQXBpVGFibGU6IF9pbmRleDIuZGVmYXVsdFxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGFwaUl0ZW1zOiBbe1xuXHQgICAgICAgIG5hbWU6ICdsZWdhbEtleScsXG5cdCAgICAgICAgdHlwZTogJ1N0cmluZycsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAndGhlIGtleSBvZiBsZWdhbCBpbiBjbXMnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnbGVnYWxMYW5nJyxcblx0ICAgICAgICB0eXBlOiAnU3RyaW5nJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICd0aGUgbGFuZ3VhZ2Ugb2YgbGVnYWwgaW4gY21zJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ2xlZ2FsUmVnaW9uJyxcblx0ICAgICAgICB0eXBlOiAnU3RyaW5nJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICd0aGUgcmVnaW9uIG9mIGxlZ2FsIGluIGNtcydcblx0ICAgICAgfV1cblx0ICAgIH07XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXHQvLyA8dGVtcGxhdGU+XG5cdC8vICAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cblx0Ly8gICAgPGRpdiBjbGFzcz1cImh5X28td3JhcHBlclwiPlxuXHQvLyAgICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+TGVnYWwgU3lzdGVtPC9oMj5cblx0Ly8gICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cblx0Ly8gICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cblx0Ly8gICAgICAgICAgICA8cCBjbGFzcz1cImh5X2MtY29weSBoeV9jLWNvcHktLWJvZHkgaHlfdC1ncmV5XCI+XG5cdC8vICAgICAgICAgICAgICBMb3JlbSBpcHN1bTxsZWdhbC1jb3VudGVyXG5cdC8vICAgICAgICAgICAgICAgIHYtb3ZlcmxheS1vcGVuZXI9XCJsZWdhbC1vdmVybGF5XCJcblx0Ly8gICAgICAgICAgICAgICAgbGVnYWwta2V5PVwiaHMtcmVmZXJyYWwtdGVybXNcIlxuXHQvLyAgICAgICAgICAgICAgICBsZWdhbC1sYW5nPVwiZW5cIiBsZWdhbC1yZWdpb249XCJiY1wiXG5cdC8vICAgICAgICAgICAgICAgID48L2xlZ2FsLWNvdW50ZXI+IGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQsXG5cdC8vICAgICAgICAgICAgICBzZWQgZG8gZWl1c21vZCB0ZW1wb3IgaW5jaWRpZHVudCB1dCBsYWJvcmUgZXQgZG9sb3JlIG1hZ25hIGFsaXF1YS5cblx0Ly8gICAgICAgICAgICAgIDxsZWdhbC1jb3VudGVyXG5cdC8vICAgICAgICAgICAgICAgIHYtb3ZlcmxheS1vcGVuZXI9XCJsZWdhbC1vdmVybGF5XCJcblx0Ly8gICAgICAgICAgICAgICAgbGVnYWwta2V5PVwiMS15ZWFyLW9mZmVyLXN0aW1cIlxuXHQvLyAgICAgICAgICAgICAgICBsZWdhbC1sYW5nPVwiZW5cIiBsZWdhbC1yZWdpb249XCJiY1wiXG5cdC8vICAgICAgICAgICAgICAgID48L2xlZ2FsLWNvdW50ZXI+XG5cdC8vICAgICAgICAgICAgICA8L3A+XG5cdC8vICAgICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG5cdC8vICAgICAgICAgICAgIDxsZWdhbC1jb250YWluZXI+PC9sZWdhbC1jb250YWluZXI+XG5cdC8vICAgICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG5cdC8vICAgICAgICAgICAgPHByZT5cblx0Ly8gICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuXHQvLyAmbHQ7bGVnYWwtY291bnRlclxuXHQvLyAgIGxlZ2FsLWtleT1cImhzLXJlZmVycmFsLXRlcm1zXCJcblx0Ly8gICBsZWdhbC1sYW5nPVwiZW5cIlxuXHQvLyAgIGxlZ2FsLXJlZ2lvbj1cImJjXCJcblx0Ly8gJmx0Oy9sZWdhbC1jb3VudGVyJmd0O1xuXHQvLyAmbHQ7bGVnYWwtY29udGFpbmVyJmd0OyZsdDsvbGVnYWwtY29udGFpbmVyJmd0O1xuXHQvLyAgICAgICAgICAgICAgPC9jb2RlPlxuXHQvLyAgICAgICAgICAgIDwvcHJlPlxuXHQvLyAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJqYXZhc2NyaXB0XCI+XG5cdC8vICAgICAgICAgICAgPHByZT5cblx0Ly8gICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtamF2YXNjcmlwdFwiPlxuXHQvLyBsZXQgdm0gPSBuZXcgVnVlKHtcblx0Ly8gIGVsOiAnYm9keScsXG5cdC8vICBkYXRhKCkge1xuXHQvLyAgICByZXR1cm4ge1xuXHQvLyAgICAgIGxpZ2VyRW5kUG9pbnQ6ICdodHRwczovL2FwaS5jbXMudGVsdXMuY29tL2xlZ2FscycsXG5cdC8vICAgICAgbGlnZXJBcHBsaWNhdGlvbktleTogJ2I5NzM4ZDY3Yjg5ZGZjNzgyNzQ2ZDRhOWNmNGExMDkzJ1xuXHQvLyAgICB9O1xuXHQvLyAgfSxcblx0Ly8gIGNvbXBvbmVudHM6IHtcblx0Ly8gICAgTGVnYWxDb3VudGVyLFxuXHQvLyAgICBMZWdhbENvbnRhaW5lclxuXHQvLyAgfVxuXHQvLyB9KTtcblx0Ly8gICAgICAgICAgICAgIDwvY29kZT5cblx0Ly8gICAgICAgICAgICA8L3ByZT5cblx0Ly8gICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vICAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJOiBMZWdhbCBDb3VudGVyPC9oMz5cblx0Ly8gICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vICAgIDwvZGl2PlxuXHQvLyAgIDwvc2VjdGlvbj5cblx0Ly9cblx0Ly9cblx0Ly8gPC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblxuLyoqKi8gfSxcbi8qIDUxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGNvbXBvbmVudHM6IHtcblx0ICAgIEFwaVRhYmxlOiBfaW5kZXgyLmRlZmF1bHRcblx0ICB9LFxuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBhcGlJdGVtczogW3tcblx0ICAgICAgICBuYW1lOiAnb3ZlcmxheUtleScsXG5cdCAgICAgICAgdHlwZTogJ1N0cmluZycsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAnVGhlIGtleSBvZiB0aGUgb3ZlcmxheS4gVXNlZCBieSB0aGUgb3ZlcmxheSBvcGVuZXIgZGlyZWN0aXZlIHRvIHRhcmdldCB0aGUgb3ZlcmxleS4nXG5cdCAgICAgIH1dXG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblx0Ly8gPHRlbXBsYXRlPlxuXHQvLyAgIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG5cdC8vICAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cblx0Ly8gICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPk92ZXJsYXkgU3lzdGVtPC9oMj5cblx0Ly8gICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cblx0Ly8gICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cblx0Ly8gICAgICAgICAgICA8cD5cblx0Ly8gICAgICAgICAgICAgIDxidXR0b24gdi1vdmVybGF5LW9wZW5lcj1cIm92ZXJsYXktMVwiIGNsYXNzPVwiaHlfYy1idXR0b24gaHlfYy1idXR0b24tLWxpbmsgaHlfdC1wdXJwbGVcIiB0eXBlPVwiYnV0dG9uXCIgcm9sZT1cImJ1dHRvblwiPlxuXHQvLyAgICAgICAgICAgICAgICBPcGVuIG92ZXJsYXkgIzEgPGkgY2xhc3M9XCJoeV9jLWljb24gaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkIGh5X2MtYnV0dG9uX19pY29uXCI+PC9pPlxuXHQvLyAgICAgICAgICAgICAgPC9idXR0b24+XG5cdC8vICAgICAgICAgICAgPC9wPlxuXHQvLyAgICAgICAgICAgIDxwPlxuXHQvLyAgICAgICAgICAgICAgPGJ1dHRvbiB2LW92ZXJsYXktb3BlbmVyPVwib3ZlcmxheS0yXCIgY2xhc3M9XCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tbGluayBoeV90LXB1cnBsZVwiIHR5cGU9XCJidXR0b25cIiByb2xlPVwiYnV0dG9uXCI+XG5cdC8vICAgICAgICAgICAgICAgIE9wZW4gb3ZlcmxheSAjMiA8aSBjbGFzcz1cImh5X2MtaWNvbiBoeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQgaHlfYy1idXR0b25fX2ljb25cIj48L2k+XG5cdC8vICAgICAgICAgICAgICA8L2J1dHRvbj5cblx0Ly8gICAgICAgICAgICA8L3A+XG5cdC8vICAgICAgICAgICAgPG92ZXJsYXktY29udGFpbmVyPlxuXHQvLyAgICAgICAgICAgICAgICAgICA8b3ZlcmxheSBvdmVybGF5LWtleT1cIm92ZXJsYXktMVwiPlxuXHQvLyAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcIiBzbG90PVwib3ZlcmxheS1oZWFkZXJcIj5UaGlzIGlzIG92ZXJsYXkgIzE8L2g0PlxuXHQvLyAgICAgICAgICAgICAgICAgICAgIDxhcnRpY2xlIHNsb3Q9XCJvdmVybGF5LWJvZHlcIj5cblx0Ly8gICAgICAgICAgICAgICAgICAgICAgICAgT3ZlcmxheSAjMSBib2R5XG5cdC8vICAgICAgICAgICAgICAgICAgICAgPC9hcnRpY2xlPlxuXHQvLyAgICAgICAgICAgICAgICAgICA8L292ZXJsYXk+XG5cdC8vICAgICAgICAgICAgICAgICAgIDxvdmVybGF5IG92ZXJsYXkta2V5PVwib3ZlcmxheS0yXCI+XG5cdC8vICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFwiIHNsb3Q9XCJvdmVybGF5LWhlYWRlclwiPlRoaXMgaXMgb3ZlcmxheSAjMjwvaDQ+XG5cdC8vICAgICAgICAgICAgICAgICAgICAgPGFydGljbGUgc2xvdD1cIm92ZXJsYXktYm9keVwiPlxuXHQvLyAgICAgICAgICAgICAgICAgICAgICAgICBPdmVybGF5ICMyIGJvZHlcblx0Ly8gICAgICAgICAgICAgICAgICAgICA8L2FydGljbGU+XG5cdC8vICAgICAgICAgICAgICAgICAgIDwvb3ZlcmxheT5cblx0Ly8gICAgICAgICAgIDwvb3ZlcmxheS1jb250YWluZXI+XG5cdC8vICAgICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG5cdC8vICAgICAgICAgICAgPHByZT5cblx0Ly8gICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuXHQvLyAmbHQ7b3ZlcmxheS1jb250YWluZXImZ3Q7XG5cdC8vICAmbHQ7b3ZlcmxheSBvdmVybGF5LWtleT1cIm92ZXJsYXktMVwiJmd0O1xuXHQvLyAgICAmbHQ7aDQgIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFwiIHNsb3Q9XCJvdmVybGF5LWhlYWRlclwiJmd0O1xuXHQvLyAgICBUaGlzIGlzIG92ZXJsYXkgIzFcblx0Ly8gICAgJmx0Oy9oNCZndDtcblx0Ly8gICAgJmx0O2FydGljbGUgc2xvdD1cIm92ZXJsYXktYm9keVwiJmd0O1xuXHQvLyAgICAgIE92ZXJsYXkgIzEgYm9keVxuXHQvLyAgICAmbHQ7L2FydGljbGUmZ3Q7XG5cdC8vICAmbHQ7L292ZXJsYXkmZ3Q7XG5cdC8vICAmbHQ7b3ZlcmxheSBvdmVybGF5LWtleT1cIm92ZXJsYXktMlwiJmd0O1xuXHQvLyAgICAmbHQ7aDQgIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFwiIHNsb3Q9XCJvdmVybGF5LWhlYWRlclwiJmd0O1xuXHQvLyAgICBUaGlzIGlzIG92ZXJsYXkgIzFcblx0Ly8gICAgJmx0Oy9oNCZndDtcblx0Ly8gICAgJmx0O2FydGljbGUgc2xvdD1cIm92ZXJsYXktYm9keVwiJmd0O1xuXHQvLyAgICAgIE92ZXJsYXkgIzIgYm9keVxuXHQvLyAgICAmbHQ7L2FydGljbGUmZ3Q7XG5cdC8vICAmbHQ7L292ZXJsYXkmZ3Q7XG5cdC8vICZsdDsvb3ZlcmxheS1jb250YWluZXImZ3Q7XG5cdC8vICAgICAgICAgICAgICA8L2NvZGU+XG5cdC8vICAgICAgICAgICAgPC9wcmU+XG5cdC8vICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG5cdC8vICAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvLyAgICA8L2Rpdj5cblx0Ly8gICA8L3NlY3Rpb24+XG5cdC8vXG5cdC8vIDwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cbi8qKiovIH0sXG4vKiA1MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBjb21wb25lbnRzOiB7XG5cdCAgICBBcGlUYWJsZTogX2luZGV4Mi5kZWZhdWx0XG5cdCAgfSxcblx0ICBtZXRob2RzOiB7XG5cdCAgICBzaG93U3Bpbm5lcjogZnVuY3Rpb24gc2hvd1NwaW5uZXIoKSB7XG5cdCAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICB0aGlzLl9yZXNldE1zZygpO1xuXHQgICAgICB0aGlzLiRyb290LiRicm9hZGNhc3QoJ3Nob3c6OnNwaW5uZXInKTtcblx0ICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgX3RoaXMuJHJvb3QuJGJyb2FkY2FzdCgnaGlkZTo6c3Bpbm5lcicpO1xuXHQgICAgICB9LCAzMDAwKTtcblx0ICAgIH0sXG5cdCAgICBfcmVzZXRNc2c6IGZ1bmN0aW9uIF9yZXNldE1zZygpIHtcblx0ICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgICB2YXIgY291bnRlciA9IDM7XG5cdCAgICAgIHZhciBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoY291bnRlciA+IDApIHtcblx0ICAgICAgICAgIGNvdW50ZXItLTtcblx0ICAgICAgICAgIF90aGlzMi5tc2cgPSAnSSB3aWxsIGNsb3NlIGluICcgKyBjb3VudGVyICsgJyBzZWNvbmRzJztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LCAxMDAwKTtcblx0ICAgICAgdGhpcy5tc2cgPSAnSSB3aWxsIGNsb3NlIGluICcgKyBjb3VudGVyICsgJyBzZWNvbmRzJztcblx0ICAgIH1cblx0ICB9LFxuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBtc2c6ICcnLFxuXHQgICAgICBpc0Z1bGxTY3JlZW46IGZhbHNlLFxuXHQgICAgICBhcGlJdGVtczogW3tcblx0ICAgICAgICBuYW1lOiAnZnVsbFNjcmVlbicsXG5cdCAgICAgICAgdHlwZTogJ0Jvb2xlYW4nLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuXHQgICAgICAgIGRlc2M6ICdTaG91bGQgdGhlIHNwaW5uZXIgdGFrZSBmdWxsIHNjcmVlbidcblx0ICAgICAgfSwge1xuXHQgICAgICAgIG5hbWU6ICd0ZXh0Jyxcblx0ICAgICAgICB0eXBlOiAnU3RyaW5nJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcblx0ICAgICAgICBkZWZhdWx0OiAnXFwnXFwnJyxcblx0ICAgICAgICBkZXNjOiAnVGhlIHRleHQgb2YgdGhlIHNwaW5uZXIuIERlZmF1bHQgZW1wdHknXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnc2hvdzo6c3Bpbm5lcicsXG5cdCAgICAgICAgdHlwZTogJ0V2ZW50Jyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAnQWN0aXZlIHRoZSBzcGlubmVyJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ2hpZGU6OnNwaW5uZXInLFxuXHQgICAgICAgIHR5cGU6ICdFdmVudCcsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ0hpZGUgdGhlIHNwaW5uZXInXG5cdCAgICAgIH1dXG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblx0Ly8gPHRlbXBsYXRlPlxuXHQvLyAgIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG5cdC8vICAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cblx0Ly8gICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPlNwaW5uZXI8L2gyPlxuXHQvLyAgICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuXHQvLyAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuXHQvLyAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImh5X2MtY29udHJvbCBoeV9jLWNvbnRyb2wtLWNoZWNrYm94XCIgPlxuXHQvLyAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImh5X2MtY29udHJvbF9fbGFiZWwtdGV4dFwiPkZ1bGwgU2NyZWVuPC9zcGFuPlxuXHQvLyAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgIHYtbW9kZWw9XCJpc0Z1bGxTY3JlZW5cIiAvPlxuXHQvLyAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaHlfYy1jb250cm9sX19pbmRpY2F0b3JcIj48L2Rpdj5cblx0Ly8gICAgICAgICAgIDwvbGFiZWw+XG5cdC8vXG5cdC8vICAgICAgICAgICA8YnV0dG9uIEBjbGljaz1cInNob3dTcGlubmVyXCIgY2xhc3M9XCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tcmFpc2VkIGh5X3QtZ3JlZW5cIiB0eXBlPVwiYnV0dG9uXCI+XG5cdC8vICAgICAgICAgICAgIFNob3cgU3Bpbm5lclxuXHQvLyAgICAgICAgICAgPC9idXR0b24+XG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vICAgICAgICAgICAgPHNwaW5uZXIgOmZ1bGwtc2NyZWVuPVwiaXNGdWxsU2NyZWVuXCIgOnRleHQ9XCJtc2dcIj48L3NwaW5uZXI+XG5cdC8vICAgICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG5cdC8vICAgICAgICAgICAgPHByZT5cblx0Ly8gICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuXHQvLyAmbHQ7c3Bpbm5lciB0ZXh0PVwiSSB3aWxsIGNsb3NlIGluIDMgc2Vjb25kc1wiIDpmdWxsLXNjcmVlbj1cInRydWVcIiZndDsmbHQ7L3NwaW5uZXImZ3Q7XG5cdC8vICAgICAgICAgICAgICA8L2NvZGU+XG5cdC8vICAgICAgICAgICAgPC9wcmU+XG5cdC8vICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG5cdC8vICAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvL1xuXHQvLyAgICA8L2Rpdj5cblx0Ly8gICA8L3NlY3Rpb24+XG5cdC8vIDwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cbi8qKiovIH0sXG4vKiA1MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBjb21wb25lbnRzOiB7XG5cdCAgICBBcGlUYWJsZTogX2luZGV4Mi5kZWZhdWx0XG5cdCAgfSxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBzdGVwVHJhY2tlckN1cnJlbnRTdGVwOiAyLFxuXHQgICAgICBzdGVwVHJhY2tlckNvbmZpZzoge1xuXHQgICAgICAgIGlzQ2xpY2thYmxlOiB0cnVlLFxuXHQgICAgICAgIHN0ZXBzOiBbe1xuXHQgICAgICAgICAgdGl0bGU6ICdTdGVwIEEnLFxuXHQgICAgICAgICAgbGluazogJycsXG5cdCAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogZnVuY3Rpb24gb25DbGlja0hhbmRsZXIoZXZlbnQpIHtcblx0ICAgICAgICAgICAgX3RoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDA7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgdGl0bGU6ICdTdGVwIEInLFxuXHQgICAgICAgICAgbGluazogJycsXG5cdCAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogZnVuY3Rpb24gb25DbGlja0hhbmRsZXIoZXZlbnQpIHtcblx0ICAgICAgICAgICAgX3RoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDE7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgdGl0bGU6ICdTdGVwIEMnLFxuXHQgICAgICAgICAgbGluazogJycsXG5cdCAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogZnVuY3Rpb24gb25DbGlja0hhbmRsZXIoZXZlbnQpIHtcblx0ICAgICAgICAgICAgX3RoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDI7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfV1cblx0ICAgICAgfSxcblx0ICAgICAgYXBpSXRlbXM6IFt7XG5cdCAgICAgICAgbmFtZTogJ2N1cnJlbnRTdGVwJyxcblx0ICAgICAgICB0eXBlOiAnSW50ZWdlcicsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcblx0ICAgICAgICBkZWZhdWx0OiAwLFxuXHQgICAgICAgIGRlc2M6ICd0b2RvJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ2NvbmZpZycsXG5cdCAgICAgICAgdHlwZTogJ09iamVjdCcsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAndG9kbydcblx0ICAgICAgfSwge1xuXHQgICAgICAgIG5hbWU6ICdjb25maWcudGl0bGUnLFxuXHQgICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ1RoZSB0aXRsZSBvZiB0aGUgc3RlcCdcblx0ICAgICAgfSwge1xuXHQgICAgICAgIG5hbWU6ICdjb25maWcubGluaycsXG5cdCAgICAgICAgdHlwZTogJ1N0cmluZycsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ1RoZSBsaW5rIG9mIHRoZSBzdGVwLiAnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnY29uZmlnLm9uQ2xpY2tIYW5kbGVyJyxcblx0ICAgICAgICB0eXBlOiAnRnVuY3Rpb24nLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICdUaGUgY2FsbGJhY2sgZnVuY3Rpb24gd2hlbiBzdGVwIGlzIGNsaWNrZWQuJ1xuXHQgICAgICB9XVxuXHQgICAgfTtcblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cdC8vIDx0ZW1wbGF0ZT5cblx0Ly8gICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuXHQvLyAgICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG5cdC8vICAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5TdGVwIFRyYWNrZXI8L2gyPlxuXHQvLyAgICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuXHQvLyAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuXHQvLyAgICAgICAgICAgIDxzdGVwLXRyYWNrZXIgOmN1cnJlbnQtc3RlcD1cInN0ZXBUcmFja2VyQ3VycmVudFN0ZXBcIiA6Y29uZmlnPVwic3RlcFRyYWNrZXJDb25maWdcIj48L3N0ZXAtdHJhY2tlcj5cblx0Ly8gICAgICAgICAgPC9kaXY+XG5cdC8vICAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cblx0Ly8gICAgICAgIDxwcmU+XG5cdC8vICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuXHQvLyAmbHQ7c3RlcC10cmFja2VyXG5cdC8vIDpjdXJyZW50LXN0ZXA9XCJzdGVwVHJhY2tlckN1cnJlbnRTdGVwXCJcblx0Ly8gOmNvbmZpZz1cInN0ZXBUcmFja2VyQ29uZmlnXCImZ3Q7XG5cdC8vICZsdDsvc3RlcC10cmFja2VyJmd0O1xuXHQvLyAgICAgICAgICA8L2NvZGU+XG5cdC8vICAgICAgICA8L3ByZT5cblx0Ly8gICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cblx0Ly8gICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiamF2YXNjcmlwdFwiPlxuXHQvLyAgICAgICAgICAgIDxwcmU+XG5cdC8vICAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWpzXCI+XG5cdC8vIGxldCBzdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMjtcblx0Ly8gbGV0IHN0ZXBUcmFja2VyQ29uZmlnID0ge1xuXHQvLyAgIGlzQ2xpY2thYmxlOiB0cnVlLFxuXHQvLyAgIHN0ZXBzOiBbXG5cdC8vICAgICB7XG5cdC8vICAgICAgIHRpdGxlOiAnU3RlcCBBJyxcblx0Ly8gICAgICAgbGluazogJycsXG5cdC8vICAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcblx0Ly8gICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAwO1xuXHQvLyAgICAgICB9XG5cdC8vICAgICB9LCB7XG5cdC8vICAgICAgIHRpdGxlOiAnU3RlcCBCJyxcblx0Ly8gICAgICAgbGluazogJycsXG5cdC8vICAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcblx0Ly8gICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAxO1xuXHQvLyAgICAgICB9XG5cdC8vICAgICB9LCB7XG5cdC8vICAgICAgIHRpdGxlOiAnU3RlcCBDJyxcblx0Ly8gICAgICAgbGluazogJycsXG5cdC8vICAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcblx0Ly8gICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAyO1xuXHQvLyAgICAgICB9XG5cdC8vICAgICB9XG5cdC8vICAgXVxuXHQvLyB9O1xuXHQvLyBsZXQgdm0gPSBuZXcgVnVlKHtcblx0Ly8gICBlbDogJ2JvZHknLFxuXHQvLyAgIGRhdGE6IHtcblx0Ly8gICAgIHN0ZXBUcmFja2VyQ29uZmlnLFxuXHQvLyAgICAgc3RlcFRyYWNrZXJDdXJyZW50U3RlcFxuXHQvLyB9LFxuXHQvLyAgIGNvbXBvbmVudHM6IHtcblx0Ly8gICAgIFN0ZXBUcmFja2VyXG5cdC8vICAgfVxuXHQvLyB9KTtcblx0Ly8gICAgICAgICAgICAgIDwvY29kZT5cblx0Ly8gICAgICAgICAgICA8L3ByZT5cblx0Ly8gICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vICAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJPC9oMz5cblx0Ly8gICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vICAgIDwvZGl2PlxuXHQvLyAgIDwvc2VjdGlvbj5cblx0Ly8gPC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblxuLyoqKi8gfSxcbi8qIDU0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGNvbXBvbmVudHM6IHtcblx0ICAgIEFwaVRhYmxlOiBfaW5kZXgyLmRlZmF1bHRcblx0ICB9LFxuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBhcGlJdGVtczogW3tcblx0ICAgICAgICBuYW1lOiAnbGFiZWwnLFxuXHQgICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ1RoZSBsYWJsZSBvZiB0aGUgdGFiJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ2lzRGlzYWJsZWQnLFxuXHQgICAgICAgIHR5cGU6ICdCb29sZWFuJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcblx0ICAgICAgICBkZWZhdWx0OiBmYWxzZSxcblx0ICAgICAgICBkZXNjOiAnSXMgdGhlIHRhYiBkaXNhYmxlZCBvciBub3QuIFdoZW4gc2V0IHRvIHRydWUsIHRoZSB0YWIgaXMgbm90IGNsaWNrYWJsZS4nXG5cdCAgICAgIH1dXG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblx0Ly8gPHRlbXBsYXRlPlxuXHQvLyAgIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG5cdC8vICAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cblx0Ly8gICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPlRhYjwvaDI+XG5cdC8vICAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG5cdC8vICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG5cdC8vICAgICAgICAgICAgPHRhYnMgY2xhc3M9XCJjLXByaWNlLWxvb2t1cCBoeV9vLWxheW91dF9faXRlbSAgaHlfdS1zaXplLTNvZjNAc20gaHlfdS1zaXplLTRvZjRAbWQgaHlfdS1zaXplLTZvZjEyQGxnXCI+XG5cdC8vICAgICAgICAgICAgICA8dGFiIGxhYmVsPVwiVGFiIDFcIj5cblx0Ly8gICAgICAgICAgICAgICA8cD5cblx0Ly8gICAgICAgICAgICAgICAgIFRhYiAxIGNvbnRlbnRcblx0Ly8gICAgICAgICAgICAgICA8L3A+XG5cdC8vICAgICAgICAgICAgICA8L3RhYj5cblx0Ly8gICAgICAgICAgICAgIDx0YWIgbGFiZWw9XCJUYWIgMlwiPlxuXHQvLyAgICAgICAgICAgICAgICA8cD5cblx0Ly8gICAgICAgICAgICAgICAgICBUYWIgMiBjb250ZW50XG5cdC8vICAgICAgICAgICAgICAgIDwvcD5cblx0Ly8gICAgICAgICAgICAgIDwvdGFiPlxuXHQvLyAgICAgICAgICAgICAgPHRhYiBsYWJlbD1cIlRhYiAzXCIgOmlzLWRpc2FibGVkPVwidHJ1ZVwiPlxuXHQvLyAgICAgICAgICAgICAgICA8cD5cblx0Ly8gICAgICAgICAgICAgICAgICBUYWIgMyBjb250ZW50XG5cdC8vICAgICAgICAgICAgICAgIDwvcD5cblx0Ly8gICAgICAgICAgICAgIDwvdGFiPlxuXHQvLyAgICAgICAgICAgIDwvdGFicz5cblx0Ly8gICAgICAgICAgPC9kaXY+XG5cdC8vICAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cblx0Ly8gICAgICAgICAgICA8cHJlPlxuXHQvLyAgICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG5cdC8vICZsdDt0YWJzJmd0O1xuXHQvLyAgJmx0O3RhYiBsYWJlbD1cIlRhYiAxXCImZ3Q7XG5cdC8vICAgICZsdDtwJmd0O1xuXHQvLyAgICAgIFRhYiAxIGNvbnRlbnRcblx0Ly8gICAgJmx0Oy9wJmd0O1xuXHQvLyAgJmx0Oy90YWImZ3Q7XG5cdC8vICAmbHQ7dGFiIGxhYmVsPVwiVGFiIDJcIiZndDtcblx0Ly8gICAgJmx0O3AmZ3Q7XG5cdC8vICAgICAgVGFiIDIgY29udGVudFxuXHQvLyAgICAmbHQ7L3AmZ3Q7XG5cdC8vICAmbHQ7L3RhYiZndDtcblx0Ly8gICZsdDt0YWIgbGFiZWw9XCJUYWIgM1wiIDppcy1kaXNhYmxlZD1cInRydWVcIiZndDtcblx0Ly8gICAgJmx0O3AmZ3Q7XG5cdC8vICAgICAgVGFiIDMgY29udGVudFxuXHQvLyAgICAmbHQ7L3AmZ3Q7XG5cdC8vICAmbHQ7L3RhYiZndDtcblx0Ly8gJmx0Oy90YWJzJmd0O1xuXHQvLyAgICAgICAgICAgICAgPC9jb2RlPlxuXHQvLyAgICAgICAgICAgIDwvcHJlPlxuXHQvLyAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk8L2gzPlxuXHQvLyAgICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly9cblx0Ly8gICAgPC9kaXY+XG5cdC8vICAgPC9zZWN0aW9uPlxuXHQvLyA8L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXG4vKioqLyB9LFxuLyogNTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9jb21wb25lbnRzL3VpL2ljb24nO1xuXHQvLyAgICAgQGltcG9ydCAnLi4vLi4vdHJhbnNpdGlvbnMvZmFkZS5zY3NzJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vYWxlcnQuc2Nzcyc7XG5cdC8vIDwvc3R5bGU+XG5cdC8vXG5cdC8vIDx0ZW1wbGF0ZSBzcmM9XCIuL2FsZXJ0Lmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGlzVmlzaWJsZTogdHJ1ZVxuXHQgICAgfTtcblx0ICB9LFxuXHRcblx0ICBwcm9wczoge1xuXHQgICAgdHlwZToge1xuXHQgICAgICB0eXBlOiBTdHJpbmcsXG5cdCAgICAgIHJlcXVpcmVkOiB0cnVlXG5cdCAgICB9LFxuXHQgICAgZGlzbWlzc2libGU6IHtcblx0ICAgICAgdHlwZTogQm9vbGVhbixcblx0ICAgICAgZGVmYXVsdDogdHJ1ZVxuXHQgICAgfSxcblx0ICAgIHRpbWVvdXQ6IHtcblx0ICAgICAgdHlwZTogTnVtYmVyLFxuXHQgICAgICBkZWZhdWx0OiAtMVxuXHQgICAgfSxcblx0ICAgIG9uQ2xvc2VkOiB7XG5cdCAgICAgIHR5cGU6IEZ1bmN0aW9uXG5cdCAgICB9XG5cdCAgfSxcblx0ICBtZXRob2RzOiB7XG5cdCAgICBkaXNtaXNzOiBmdW5jdGlvbiBkaXNtaXNzKCkge1xuXHQgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcblx0ICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKCEhX3RoaXMub25DbG9zZWQpIHtcblx0ICAgICAgICAgIF90aGlzLm9uQ2xvc2VkLmFwcGx5KF90aGlzKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgcmVhZHk6IGZ1bmN0aW9uIHJlYWR5KCkge1xuXHQgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgaWYgKHRoaXMudGltZW91dCA+PSAwKSB7XG5cdCAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIF90aGlzMi5kaXNtaXNzKCk7XG5cdCAgICAgIH0sIHRoaXMudGltZW91dCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9jb21wb25lbnRzL3VpL2ljb24nO1xuXHQvLyAgICAgQGltcG9ydCAnLi9jb2xsYXBzYWJsZS1wYW5lbC5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vY29sbGFwc2FibGUtcGFuZWwuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBwcm9wczoge1xuXHQgICAgaXNPcGVuOiB7XG5cdCAgICAgIHR5cGU6IEJvb2xlYW4sXG5cdCAgICAgIGRlZmF1bHQ6IGZhbHNlXG5cdCAgICB9LFxuXHQgICAgbGFiZWw6IHtcblx0ICAgICAgdHlwZTogU3RyaW5nLFxuXHQgICAgICByZXF1aXJlZDogdHJ1ZVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgdG9nZ2xlT3BlbjogZnVuY3Rpb24gdG9nZ2xlT3BlbigkZXZlbnQpIHtcblx0ICAgICAgdGhpcy5pc09wZW4gPSAhdGhpcy5pc09wZW47XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihmZXRjaCkgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9taXhpbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0XG5cdHZhciBfbWl4aW5zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21peGlucyk7XG5cdFxuXHR2YXIgX2ZpbmRJbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ5KTtcblx0XG5cdHZhciBfZmluZEluZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZpbmRJbmRleCk7XG5cdFxuXHR2YXIgX2RlYm91bmNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDcpO1xuXHRcblx0dmFyIF9kZWJvdW5jZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWJvdW5jZSk7XG5cdFxuXHR2YXIgX3NldEZvY3VzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdFxuXHR2YXIgX3NldEZvY3VzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NldEZvY3VzKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHQvL1xuXHQvLyA8c3R5bGUgbGFuZz1cInNhc3NcIj5cblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG5cdC8vICAgICBAaW1wb3J0ICcuL2xlZ2FsLWNvbnRhaW5lci5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vbGVnYWwtY29udGFpbmVyLmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHQvKlxuXHQgKiBBUEk6IDxsZWdhbC1jb250YWluZXI+PC9sZWdhbC1jb250YWluZXI+XG5cdCovXG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgbWl4aW5zOiBfbWl4aW5zMi5kZWZhdWx0LFxuXHQgIGRpcmVjdGl2ZXM6IHtcblx0ICAgIHNldEZvY3VzOiBfc2V0Rm9jdXMyLmRlZmF1bHRcblx0ICB9LFxuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBpbmRleGVkTGVnYWxzOiBbXSxcblx0ICAgICAgbm9uSW5kZXhlZExlZ2FsczogW10sXG5cdCAgICAgIGFwaUxhbmc6IG51bGwsXG5cdCAgICAgIGFwaVJlZ2lvbjogbnVsbFxuXHQgICAgfTtcblx0ICB9LFxuXHRcblx0ICBtZXRob2RzOiB7XG5cdCAgICBmZXRjaExlZ2FsczogZnVuY3Rpb24gZmV0Y2hMZWdhbHMoa2V5cykge1xuXHQgICAgICByZXR1cm4gZmV0Y2goJ1xcbiAgICAgICAgICAnICsgdGhpcy4kcm9vdC5saWdlckVuZFBvaW50ICsgJz9sYW5nPScgKyB0aGlzLmFwaUxhbmcgKyAnJnJlZ2lvbj0nICsgdGhpcy5hcGlSZWdpb24gKyAnJmh0bWw9dHJ1ZVxcbiAgICAgICAgJywge1xuXHQgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuXHQgICAgICAgIGhlYWRlcnM6IHtcblx0ICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG5cdCAgICAgICAgICBhcHBsaWNhdGlvbktleTogdGhpcy4kcm9vdC5saWdlckFwcGxpY2F0aW9uS2V5XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG5cdCAgICAgICAgICBrZXlzOiBrZXlzXG5cdCAgICAgICAgfSlcblx0ICAgICAgfSk7XG5cdCAgICB9LFxuXHQgICAgYXBwZW5kUmVzcG9uc2VUb0xlZ2FsQ29udGFpbmVyOiBmdW5jdGlvbiBhcHBlbmRSZXNwb25zZVRvTGVnYWxDb250YWluZXIodHlwZSwgZGF0YSkge1xuXHQgICAgICB2YXIgcHJvY2VzcyA9IGZ1bmN0aW9uIHByb2Nlc3ModGFyZ2V0LCBkYXRhQXJ5KSB7XG5cdCAgICAgICAgZGF0YUFyeS5mb3JFYWNoKGZ1bmN0aW9uIChsZWdhbFJlc3BvbnNlKSB7XG5cdCAgICAgICAgICB2YXIgaW5kZXggPSB0YXJnZXQuZmluZEluZGV4KGZ1bmN0aW9uIChsKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBsLmtleSA9PT0gbGVnYWxSZXNwb25zZS5rZXk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG5cdCAgICAgICAgICAgIHRhcmdldC4kc2V0KGluZGV4LCB7XG5cdCAgICAgICAgICAgICAgY29udGVudDogbGVnYWxSZXNwb25zZS5jb250ZW50LFxuXHQgICAgICAgICAgICAgIGtleTogbGVnYWxSZXNwb25zZS5rZXlcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH07XG5cdCAgICAgIGlmICh0eXBlID09PSAnaW5kZXhlZCcpIHtcblx0ICAgICAgICBwcm9jZXNzKHRoaXMuaW5kZXhlZExlZ2FscywgZGF0YSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcHJvY2Vzcyh0aGlzLm5vbkluZGV4ZWRMZWdhbHMsIGRhdGEpO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIGdldExlZ2FsczogZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gX2RlYm91bmNlMi5kZWZhdWx0LmNhbGwodGhpcywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICAgIHZhciBpbmRleGVkS2V5cyA9IHRoaXMuaW5kZXhlZExlZ2Fscy5tYXAoZnVuY3Rpb24gKGxlZ2FsKSB7XG5cdCAgICAgICAgICByZXR1cm4gbGVnYWwua2V5O1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHZhciBub25JbmRleGVkS2V5cyA9IHRoaXMubm9uSW5kZXhlZExlZ2Fscy5tYXAoZnVuY3Rpb24gKGxlZ2FsKSB7XG5cdCAgICAgICAgICByZXR1cm4gbGVnYWwua2V5O1xuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICBpZiAoaW5kZXhlZEtleXMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgdGhpcy5mZXRjaExlZ2FscyhpbmRleGVkS2V5cykudGhlbih0aGlzLnBhcnNlSlNPTikudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICAgICAgICBfdGhpcy5hcHBlbmRSZXNwb25zZVRvTGVnYWxDb250YWluZXIoJ2luZGV4ZWQnLCBkYXRhKTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAobm9uSW5kZXhlZEtleXMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgdGhpcy5mZXRjaExlZ2Fscyhub25JbmRleGVkS2V5cykudGhlbih0aGlzLnBhcnNlSlNPTikudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICAgICAgICBfdGhpcy5hcHBlbmRSZXNwb25zZVRvTGVnYWxDb250YWluZXIoJ25vbkluZGV4ZWQnLCBkYXRhKTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSwgMTApO1xuXHQgICAgfSgpXG5cdCAgfSxcblx0ICBldmVudHM6IHtcblx0ICAgICdsZWdhbDo6Y2xpY2snOiBmdW5jdGlvbiBsZWdhbENsaWNrKGxlZ2FsS2V5KSB7XG5cdCAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIHRhcmdldExlZ2FsSW5kZXggPSB0aGlzLmluZGV4ZWRMZWdhbHMuZmluZEluZGV4KGZ1bmN0aW9uIChsKSB7XG5cdCAgICAgICAgcmV0dXJuIGwua2V5ID09PSBsZWdhbEtleTtcblx0ICAgICAgfSk7XG5cdCAgICAgIGlmICh0YXJnZXRMZWdhbEluZGV4ID4gLTEpIHtcblx0ICAgICAgICB0aGlzLmluZGV4ZWRMZWdhbHMuZm9yRWFjaChmdW5jdGlvbiAobCwgaSkge1xuXHQgICAgICAgICAgaWYgKGkgIT09IHRhcmdldExlZ2FsSW5kZXgpIHtcblx0ICAgICAgICAgICAgbC5pc1NlbGVjdGVkID0gZmFsc2U7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBfdGhpczIuaW5kZXhlZExlZ2Fscy4kc2V0KGksIE9iamVjdC5hc3NpZ24oe30sIF90aGlzMi5pbmRleGVkTGVnYWxzW2ldLCB7IGlzU2VsZWN0ZWQ6IHRydWUgfSkpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgJ2xlZ2FsOjppbml0JzogZnVuY3Rpb24gbGVnYWxJbml0KGxlZ2FsSW5pdERldGFpbCkge1xuXHQgICAgICB0aGlzLmFwaUxhbmcgPSBsZWdhbEluaXREZXRhaWwubGFuZztcblx0ICAgICAgdGhpcy5hcGlSZWdpb24gPSBsZWdhbEluaXREZXRhaWwucmVnaW9uO1xuXHQgICAgICAvLyBjaGVjayBpZiBsb2FkZWQgYWxyZWFkeVxuXHQgICAgICB2YXIgY29udGFpbmVyUmVmID0gbGVnYWxJbml0RGV0YWlsLmlzTm9uSW5kZXhlZCA/IHRoaXMubm9uSW5kZXhlZExlZ2FscyA6IHRoaXMuaW5kZXhlZExlZ2Fscztcblx0ICAgICAgdmFyIGluZGV4ID0gKDAsIF9maW5kSW5kZXgyLmRlZmF1bHQpKGNvbnRhaW5lclJlZiwgZnVuY3Rpb24gKGxlZ2FsKSB7XG5cdCAgICAgICAgcmV0dXJuIGxlZ2FsLmtleSA9PT0gbGVnYWxJbml0RGV0YWlsLmtleTtcblx0ICAgICAgfSk7XG5cdCAgICAgIC8vIGlmIG5vdCBmb3VuZFxuXHQgICAgICBpZiAoaW5kZXggPCAwKSB7XG5cdCAgICAgICAgaW5kZXggPSBjb250YWluZXJSZWYucHVzaChsZWdhbEluaXREZXRhaWwpIC0gMTtcblx0ICAgICAgICB0aGlzLmdldExlZ2FscygpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICghbGVnYWxJbml0RGV0YWlsLmlzTm9uSW5kZXhlZCkge1xuXHQgICAgICAgIHRoaXMucm9vdEJyb2FkY2FzdCgnbGVnYWw6OnVkcGF0ZScsIHtcblx0ICAgICAgICAgIGtleTogbGVnYWxJbml0RGV0YWlsLmtleSxcblx0ICAgICAgICAgIGlzTm9uSW5kZXhlZDogbGVnYWxJbml0RGV0YWlsLmlzTm9uSW5kZXhlZCxcblx0ICAgICAgICAgIGluZGV4OiBpbmRleFxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg4NCkpKVxuXG4vKioqLyB9LFxuLyogNTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9taXhpbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0XG5cdHZhciBfbWl4aW5zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21peGlucyk7XG5cdFxuXHR2YXIgX2RlZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG5cdFxuXHR2YXIgX2RlZmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHQvLyA8c3R5bGUgbGFuZz1cInNhc3NcIj5cblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG5cdC8vICAgICBAaW1wb3J0ICcuL2xlZ2FsLWNvdW50ZXIuc2Nzcyc7XG5cdC8vIDwvc3R5bGU+XG5cdC8vXG5cdC8vIDx0ZW1wbGF0ZSBzcmM9XCIuL2xlZ2FsLWNvdW50ZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdC8qXG5cdCAqIEFQSTogPGxlZ2FsLWNvdW50ZXJcblx0ICogICAgICAgIGxlZ2FsLWtleT1cIihTdHJpbmcpIGtleVwiXG5cdCAqICAgICAgICBsZWdhbC1sYW5nPVwiKFN0cmluZykgbGFuZ1wiXG5cdCAqICAgICAgICBsZWdhbC1yZWdpb249XCIoU3RyaW5nKSByZWdpb25cIlxuXHQgKiAgICAgICAgaXMtbm9uLWluZGV4ZWQ9XCIoQm9vbGVhbikgaXNOb25JbmRleGVkXCJcblx0ICogICAgICA+PC9sZWdhbC1jb3VudGVyPlxuXHQqL1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIG1peGluczogX21peGluczIuZGVmYXVsdCxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgbGVnYWxDb3VudGVyOiBudWxsXG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIHByb3BzOiB7XG5cdCAgICBsZWdhbEtleToge1xuXHQgICAgICB0eXBlOiBTdHJpbmcsXG5cdCAgICAgIHJlcXVpcmVkOiB0cnVlXG5cdCAgICB9LFxuXHQgICAgaXNOb25JbmRleGVkOiB7XG5cdCAgICAgIHR5cGU6IEJvb2xlYW4sXG5cdCAgICAgIGRlZmF1bHQ6IGZhbHNlXG5cdCAgICB9LFxuXHQgICAgbGVnYWxMYW5nOiB7XG5cdCAgICAgIHR5cGU6IFN0cmluZyxcblx0ICAgICAgcmVxdWlyZWQ6IHRydWVcblx0ICAgIH0sXG5cdCAgICBsZWdhbFJlZ2lvbjoge1xuXHQgICAgICB0eXBlOiBTdHJpbmcsXG5cdCAgICAgIHJlcXVpcmVkOiB0cnVlXG5cdCAgICB9XG5cdCAgfSxcblx0ICBldmVudHM6IHtcblx0ICAgICdsZWdhbDo6dWRwYXRlJzogZnVuY3Rpb24gbGVnYWxVZHBhdGUodXBkYXRlRGV0YWlsKSB7XG5cdCAgICAgIGlmICghdGhpcy5pc05vbkluZGV4ZWQgJiYgdXBkYXRlRGV0YWlsLmtleSA9PT0gdGhpcy5sZWdhbEtleSkge1xuXHQgICAgICAgIHRoaXMubGVnYWxDb3VudGVyID0gdXBkYXRlRGV0YWlsLmluZGV4ICsgMTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgY2xpY2tIYW5kbGVyOiBmdW5jdGlvbiBjbGlja0hhbmRsZXIoKSB7XG5cdCAgICAgIHRoaXMucm9vdEJyb2FkY2FzdCgnbGVnYWw6OmNsaWNrJywgdGhpcy5sZWdhbEtleSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBiZWZvcmVDb21waWxlOiBmdW5jdGlvbiBiZWZvcmVDb21waWxlKCkge30sXG5cdCAgcmVhZHk6IGZ1bmN0aW9uIHJlYWR5KCkge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAoMCwgX2RlZmVyMi5kZWZhdWx0KShmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF90aGlzLnJvb3RCcm9hZGNhc3QoJ2xlZ2FsOjppbml0Jywge1xuXHQgICAgICAgIGtleTogX3RoaXMubGVnYWxLZXksXG5cdCAgICAgICAgbGFuZzogX3RoaXMubGVnYWxMYW5nLFxuXHQgICAgICAgIHJlZ2lvbjogX3RoaXMubGVnYWxSZWdpb24sXG5cdCAgICAgICAgaXNOb25JbmRleGVkOiBfdGhpcy5pc05vbkluZGV4ZWRcblx0ICAgICAgfSk7XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA1OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vb3ZlcmxheS1jb250YWluZXIuc2Nzcyc7XG5cdC8vIDwvc3R5bGU+XG5cdC8vXG5cdC8vIDx0ZW1wbGF0ZSBzcmM9XCIuL292ZXJsYXktY29udGFpbmVyLmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHQvKlxuXHQqIEV4OiA8b3ZlcmxheS1jb250YWluZXIgaXMtdmlzaWJsZT1cIihCb29sZWFuKSBmYWxzZVwiPlxuXHQgICAgICA8L292ZXJsYXktY29udGFpbmVyPlxuXHQqL1xuXHR2YXIgRVNDID0gMjc7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBwcm9wczoge1xuXHQgICAgaXNWaXNpYmxlOiB7XG5cdCAgICAgIHR5cGU6IEJvb2xlYW4sXG5cdCAgICAgIGRlZmF1bHQ6IGZhbHNlXG5cdCAgICB9XG5cdCAgfSxcblx0ICB3YXRjaDoge1xuXHQgICAgaXNWaXNpYmxlOiBmdW5jdGlvbiBpc1Zpc2libGUoX2lzVmlzaWJsZSkge1xuXHQgICAgICB2YXIgZWwgPSB3aW5kb3cuZG9jdW1lbnQuYm9keTtcblx0ICAgICAgdmFyIGNsYXNzTmFtZSA9ICduby1zY3JvbGwnO1xuXHQgICAgICBpZiAoX2lzVmlzaWJsZSkge1xuXHQgICAgICAgIGlmICghIWVsLmNsYXNzTGlzdCkge1xuXHQgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBlbC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAoZWwuY2xhc3NMaXN0KSB7XG5cdCAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoJyhefFxcXFxiKScgKyBjbGFzc05hbWUuc3BsaXQoJyAnKS5qb2luKCd8JykgKyAnKFxcXFxifCQpJywgJ2dpJyksICcgJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0ICBldmVudHM6IHtcblx0ICAgICdvdmVybGF5Q29udGFpbmVyOjpvcGVuJzogZnVuY3Rpb24gb3ZlcmxheUNvbnRhaW5lck9wZW4oKSB7XG5cdCAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcblx0ICAgIH0sXG5cdCAgICAnb3ZlcmxheUNvbnRhaW5lcjo6Y2xvc2UnOiBmdW5jdGlvbiBvdmVybGF5Q29udGFpbmVyQ2xvc2UoKSB7XG5cdCAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgfSxcblx0ICByZWFkeTogZnVuY3Rpb24gcmVhZHkoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2dCkge1xuXHQgICAgICBldnQgPSBldnQgfHwgd2luZG93LmV2ZW50O1xuXHQgICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IEVTQykge1xuXHQgICAgICAgIF90aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA2MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vb3ZlcmxheS5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vb3ZlcmxheS5odG1sXCI+PC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblx0Lypcblx0ICogRXg6IDxvdmVybGF5IG92ZXJsYXkta2V5PVwiKFN0cmluZykga2V5XCI+XG5cdCAqICAgICAgICBBbnkgY29udGVudFxuXHQgKiAgICAgIDwvb3ZlcmxheT5cblx0Ki9cblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBpc1Zpc2libGU6IGZhbHNlXG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIHByb3BzOiB7XG5cdCAgICBvdmVybGF5S2V5OiB7XG5cdCAgICAgIHR5cGU6IFN0cmluZ1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgY2xvc2VPdmVybGF5OiBmdW5jdGlvbiBjbG9zZU92ZXJsYXkoKSB7XG5cdCAgICAgIHRoaXMuJGRpc3BhdGNoKCdvdmVybGF5Q29udGFpbmVyOjpjbG9zZScpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgZXZlbnRzOiB7XG5cdCAgICAnb3ZlcmxheTo6b3Blbic6IGZ1bmN0aW9uIG92ZXJsYXlPcGVuKG92ZXJsYXlLZXkpIHtcblx0ICAgICAgaWYgKG92ZXJsYXlLZXkgPT09IHRoaXMub3ZlcmxheUtleSkge1xuXHQgICAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA2MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vc3Bpbm5lci5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vc3Bpbm5lci5odG1sXCI+PC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIHJlcGxhY2U6IHRydWUsXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGFjdGl2ZTogZmFsc2Vcblx0ICAgIH07XG5cdCAgfSxcblx0XG5cdCAgcHJvcHM6IHtcblx0ICAgIHRleHQ6IHtcblx0ICAgICAgdHlwZTogU3RyaW5nLFxuXHQgICAgICBkZWZhdWx0OiAnJ1xuXHQgICAgfSxcblx0ICAgIGZ1bGxTY3JlZW46IHtcblx0ICAgICAgdHlwZTogQm9vbGVhbixcblx0ICAgICAgZGVmYXVsdDogZmFsc2Vcblx0ICAgIH1cblx0ICB9LFxuXHQgIG1ldGhvZHM6IHtcblx0ICAgIHNob3c6IGZ1bmN0aW9uIHNob3coKSB7XG5cdCAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcblx0ICAgICAgdGhpcy4kcm9vdC4kYnJvYWRjYXN0KCdzaG93bjo6c3Bpbm5lcicpO1xuXHQgICAgfSxcblx0ICAgIGhpZGU6IGZ1bmN0aW9uIGhpZGUoKSB7XG5cdCAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuJHJvb3QuJGJyb2FkY2FzdCgnaGlkZGVuOjpzcGlubmVyJyk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBldmVudHM6IHtcblx0ICAgICdzaG93OjpzcGlubmVyJzogZnVuY3Rpb24gc2hvd1NwaW5uZXIoKSB7XG5cdCAgICAgIHRoaXMuc2hvdygpO1xuXHQgICAgfSxcblx0ICAgICdoaWRlOjpzcGlubmVyJzogZnVuY3Rpb24gaGlkZVNwaW5uZXIoKSB7XG5cdCAgICAgIHRoaXMuaGlkZSgpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblxuLyoqKi8gfSxcbi8qIDYyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHQvLyA8c3R5bGUgbGFuZz1cInNhc3NcIj5cblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvY29tcG9uZW50cy91aS9pY29uJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vc3RlcC10cmFja2VyLnNjc3MnO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi9zdGVwLXRyYWNrZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBwcm9wczoge1xuXHQgICAgY29uZmlnOiB7XG5cdCAgICAgIHR5cGU6IE9iamVjdFxuXHQgICAgfSxcblx0ICAgIGN1cnJlbnRTdGVwOiB7XG5cdCAgICAgIHR5cGU6IE51bWJlcixcblx0ICAgICAgZGVmYXVsdDogMFxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgY2xpY2tIYW5kbGVyOiBmdW5jdGlvbiBjbGlja0hhbmRsZXIoJGV2ZW50LCBzdGVwLCBpbmRleCkge1xuXHQgICAgICBpZiAoISFzdGVwLm9uQ2xpY2tIYW5kbGVyKSB7XG5cdCAgICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICAgICAgaWYgKHRoaXMuY3VycmVudFN0ZXAgPiBpbmRleCkge1xuXHQgICAgICAgICAgc3RlcC5vbkNsaWNrSGFuZGxlcigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblxuLyoqKi8gfSxcbi8qIDYzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi90YWIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBwcm9wczoge1xuXHQgICAgbGFiZWw6IHtcblx0ICAgICAgdHlwZTogU3RyaW5nXG5cdCAgICB9LFxuXHQgICAgaXNEaXNhYmxlZDoge1xuXHQgICAgICB0eXBlOiBCb29sZWFuLFxuXHQgICAgICBkZWZhdWx0OiBmYWxzZVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHRhYkluZGV4OiAwLFxuXHQgICAgICBpc1Zpc2libGU6IGZhbHNlXG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIGNvbXB1dGVkOiB7XG5cdCAgICBpc1Zpc2libGU6IGZ1bmN0aW9uIGlzVmlzaWJsZSgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuJHBhcmVudC5hY3RpdmVUYWJJbmRleCA9PT0gdGhpcy50YWJJbmRleDtcblx0ICAgIH1cblx0ICB9LFxuXHQgIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7XG5cdCAgICB0aGlzLiRwYXJlbnQudGFicy5wdXNoKHtcblx0ICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG5cdCAgICAgIGlzRGlzYWJsZWQ6IHRoaXMuaXNEaXNhYmxlZFxuXHQgICAgfSk7XG5cdCAgfSxcblx0ICByZWFkeTogZnVuY3Rpb24gcmVhZHkoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHRoaXMuJHBhcmVudC4kY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoYywgaW5kZXgpIHtcblx0ICAgICAgaWYgKGMuJGVsID09PSBfdGhpcy4kZWwpIHtcblx0ICAgICAgICBfdGhpcy50YWJJbmRleCA9IGluZGV4O1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9LFxuXHQgIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7XG5cdCAgICB0aGlzLiRwYXJlbnQudGFicy5zcGxpY2UodGhpcy50YWJJbmRleCwgMSk7XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXHRcblx0Ly8gPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuXHQvLyAgICAgQGltcG9ydCAnLi90YWJzLnNjc3MnO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi90YWJzLmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHQvKlxuXHQgKiAgRXg6IDx0YWJzIGFjdGl2ZS10YWItaW5kZXg9XCIoSW50ZWdlcikgMFwiPlxuXHQgKiAgICAgICAgPHRhYiBsYWJlbD1cIlRhYiBBXCI+XG5cdCAqICAgICAgICAgIEFueSBjb250ZW50XG5cdCAqICAgICAgICA8L3RhYj5cblx0ICogICAgICAgIDx0YWIgbGFiZWw9XCJUYWIgQlwiIGlzLWRpc2FibGVkPVwiKEJvb2xlYW4pIGZhbHNlXCI+XG5cdCAqICAgICAgICAgIEFueSBjb250ZW50XG5cdCAqICAgICAgICA8L3RhYj5cblx0ICogICAgICAgPHRhYnM+XG5cdCovXG5cdGV4cG9ydHMuZGVmYXVsdCA9IF9kZWZpbmVQcm9wZXJ0eSh7XG5cdCAgcHJvcHM6IHtcblx0ICAgIGFjdGl2ZVRhYkluZGV4OiB7XG5cdCAgICAgIHR5cGU6IE51bWJlcixcblx0ICAgICAgZGVmYXVsdDogMFxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgaXNBY3RpdmU6IGZ1bmN0aW9uIGlzQWN0aXZlKGluZGV4KSB7XG5cdCAgICAgIHJldHVybiBhY3RpdmVUYWJJbmRleCA9PT0gaW5kZXg7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgdGFiczogW11cblx0ICAgIH07XG5cdCAgfVxuXHR9LCBcIm1ldGhvZHNcIiwge1xuXHQgIGhhbmRsZVRhYkxpc3RDbGljazogZnVuY3Rpb24gaGFuZGxlVGFiTGlzdENsaWNrKGluZGV4LCB0YWIpIHtcblx0ICAgIGlmICghdGFiLmlzRGlzYWJsZWQpIHtcblx0ICAgICAgdGhpcy5hY3RpdmVUYWJJbmRleCA9IGluZGV4O1xuXHQgICAgfVxuXHQgIH1cblx0fSk7XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA2NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2dldFN0YXJ0ZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Nyk7XG5cdFxuXHR2YXIgX2dldFN0YXJ0ZWQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0U3RhcnRlZCk7XG5cdFxuXHR2YXIgX3N0ZXBUcmFja2VyUGFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTkxKTtcblx0XG5cdHZhciBfc3RlcFRyYWNrZXJQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0ZXBUcmFja2VyUGFnZSk7XG5cdFxuXHR2YXIgX3RhYnNQYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTIpO1xuXHRcblx0dmFyIF90YWJzUGFnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90YWJzUGFnZSk7XG5cdFxuXHR2YXIgX2xlZ2FsUGFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTg4KTtcblx0XG5cdHZhciBfbGVnYWxQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xlZ2FsUGFnZSk7XG5cdFxuXHR2YXIgX292ZXJsYXlQYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODkpO1xuXHRcblx0dmFyIF9vdmVybGF5UGFnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vdmVybGF5UGFnZSk7XG5cdFxuXHR2YXIgX2NvbGxhcHNhYmxlUGFuZWxQYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODYpO1xuXHRcblx0dmFyIF9jb2xsYXBzYWJsZVBhbmVsUGFnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb2xsYXBzYWJsZVBhbmVsUGFnZSk7XG5cdFxuXHR2YXIgX2FsZXJ0UGFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTg1KTtcblx0XG5cdHZhciBfYWxlcnRQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FsZXJ0UGFnZSk7XG5cdFxuXHR2YXIgX3NwaW5uZXJQYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTApO1xuXHRcblx0dmFyIF9zcGlubmVyUGFnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zcGlubmVyUGFnZSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgICcvZ2V0LXN0YXJ0ZWQnOiB7XG5cdCAgICBjb21wb25lbnQ6IF9nZXRTdGFydGVkMi5kZWZhdWx0XG5cdCAgfSxcblx0ICAnL2FsZXJ0Jzoge1xuXHQgICAgY29tcG9uZW50OiB7XG5cdCAgICAgIHRlbXBsYXRlOiAnPGFsZXJ0LXBhZ2U+PC9hbGVydC1wYWdlPicsXG5cdCAgICAgIGNvbXBvbmVudHM6IHsgQWxlcnRQYWdlOiBfYWxlcnRQYWdlMi5kZWZhdWx0IH1cblx0ICAgIH1cblx0ICB9LFxuXHQgICcvc3Bpbm5lcic6IHtcblx0ICAgIGNvbXBvbmVudDoge1xuXHQgICAgICB0ZW1wbGF0ZTogJzxzcGlubmVyLXBhZ2U+PC9zcGlubmVyLXBhZ2U+Jyxcblx0ICAgICAgY29tcG9uZW50czogeyBTcGlubmVyUGFnZTogX3NwaW5uZXJQYWdlMi5kZWZhdWx0IH1cblx0ICAgIH1cblx0ICB9LFxuXHQgICcvc3RlcC10cmFja2VyJzoge1xuXHQgICAgY29tcG9uZW50OiB7XG5cdCAgICAgIHRlbXBsYXRlOiAnPHN0ZXAtdHJhY2tlci1wYWdlPjwvc3RlcC10cmFja2VyLXBhZ2U+Jyxcblx0ICAgICAgY29tcG9uZW50czogeyBTdGVwVHJhY2tlclBhZ2U6IF9zdGVwVHJhY2tlclBhZ2UyLmRlZmF1bHQgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgJy90YWJzJzoge1xuXHQgICAgY29tcG9uZW50OiB7XG5cdCAgICAgIHRlbXBsYXRlOiAnPHRhYnMtcGFnZT48L3RhYnMtcGFnZT4nLFxuXHQgICAgICBjb21wb25lbnRzOiB7IFRhYnNQYWdlOiBfdGFic1BhZ2UyLmRlZmF1bHQgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgJy9sZWdhbCc6IHtcblx0ICAgIGNvbXBvbmVudDoge1xuXHQgICAgICB0ZW1wbGF0ZTogJzxsZWdhbC1wYWdlPjwvbGVnYWwtcGFnZT4nLFxuXHQgICAgICBjb21wb25lbnRzOiB7IExlZ2FsUGFnZTogX2xlZ2FsUGFnZTIuZGVmYXVsdCB9XG5cdCAgICB9XG5cdCAgfSxcblx0ICAnL292ZXJsYXknOiB7XG5cdCAgICBjb21wb25lbnQ6IHtcblx0ICAgICAgdGVtcGxhdGU6ICc8b3ZlcmxheS1wYWdlPjwvb3ZlcmxheS1wYWdlPicsXG5cdCAgICAgIGNvbXBvbmVudHM6IHsgT3ZlcmxheVBhZ2U6IF9vdmVybGF5UGFnZTIuZGVmYXVsdCB9XG5cdCAgICB9XG5cdCAgfSxcblx0ICAnL2NvbGxhcHNhYmxlLXBhbmVsJzoge1xuXHQgICAgY29tcG9uZW50OiB7XG5cdCAgICAgIHRlbXBsYXRlOiAnPGNvbGxhcHNhYmxlLXBhbmVsLXBhZ2U+PC9jb2xsYXBzYWJsZS1wYW5lbC1wYWdlPicsXG5cdCAgICAgIGNvbXBvbmVudHM6IHsgQ29sbGFwc2FibGVQYW5lbFBhZ2U6IF9jb2xsYXBzYWJsZVBhbmVsUGFnZTIuZGVmYXVsdCB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9LFxuLyogNjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHQvKlxuXHQgIEBkZXNjIEFkZCBiZWhhdmlvciB0byBhbnkgZWxlbWVudC4gV2hlbiBjbGlja2VkLCBpdCB3aWxsIG9wZW4gdGhlIGNvcnJlc3BvbmRpbmcgb3ZlcmxheVxuXHQgIEV4YW1wbGU6IDxidXR0b24gb3ZlcmxheS1vcGVuZXI9XCJteS1vdmVybGF5XCI+PC9idXR0b24+XG5cdCovXG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBpc0xpdGVyYWw6IHRydWUsXG5cdCAgZXZlbnRIYW5kbGVyOiBmdW5jdGlvbiBldmVudEhhbmRsZXIoZSkge1xuXHQgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgdGhpcy52bS4kcm9vdC4kYnJvYWRjYXN0KCdvdmVybGF5OjpvcGVuJywgdGhpcy5leHByZXNzaW9uKTtcblx0ICAgIHRoaXMudm0uJHJvb3QuJGJyb2FkY2FzdCgnb3ZlcmxheUNvbnRhaW5lcjo6b3BlbicpO1xuXHQgIH0sXG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmV2ZW50SGFuZGxlci5iaW5kKHRoaXMpKTtcblx0ICB9LFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZXZlbnRIYW5kbGVyLmJpbmQodGhpcykpO1xuXHQgIH1cblx0fTtcblxuLyoqKi8gfSxcbi8qIDY3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX292ZXJsYXlPcGVuZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY2KTtcblx0XG5cdHZhciBfb3ZlcmxheU9wZW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vdmVybGF5T3BlbmVyKTtcblx0XG5cdHZhciBfc2V0Rm9jdXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0XG5cdHZhciBfc2V0Rm9jdXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2V0Rm9jdXMpO1xuXHRcblx0dmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oMjAwKTtcblx0XG5cdHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgpO1xuXHRcblx0dmFyIF9vdmVybGF5Q29udGFpbmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTcpO1xuXHRcblx0dmFyIF9vdmVybGF5Q29udGFpbmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX292ZXJsYXlDb250YWluZXIpO1xuXHRcblx0dmFyIF9vdmVybGF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTgpO1xuXHRcblx0dmFyIF9vdmVybGF5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX292ZXJsYXkpO1xuXHRcblx0dmFyIF9sZWdhbENvdW50ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5Nik7XG5cdFxuXHR2YXIgX2xlZ2FsQ291bnRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sZWdhbENvdW50ZXIpO1xuXHRcblx0dmFyIF9sZWdhbENvbnRhaW5lciA9IF9fd2VicGFja19yZXF1aXJlX18oMTk1KTtcblx0XG5cdHZhciBfbGVnYWxDb250YWluZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGVnYWxDb250YWluZXIpO1xuXHRcblx0dmFyIF90YWJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDIpO1xuXHRcblx0dmFyIF90YWJzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RhYnMpO1xuXHRcblx0dmFyIF90YWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwMSk7XG5cdFxuXHR2YXIgX3RhYjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90YWIpO1xuXHRcblx0dmFyIF9pbmRleDMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5NCk7XG5cdFxuXHR2YXIgX2luZGV4NCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4Myk7XG5cdFxuXHR2YXIgX2luZGV4NSA9IF9fd2VicGFja19yZXF1aXJlX18oMTkzKTtcblx0XG5cdHZhciBfaW5kZXg2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXg1KTtcblx0XG5cdHZhciBfaW5kZXg3ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTkpO1xuXHRcblx0dmFyIF9pbmRleDggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleDcpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBjb21wb25lbnRzID0ge1xuXHQgIFN0ZXBUcmFja2VyOiBfaW5kZXgyLmRlZmF1bHQsXG5cdCAgT3ZlcmxheUNvbnRhaW5lcjogX292ZXJsYXlDb250YWluZXIyLmRlZmF1bHQsXG5cdCAgT3ZlcmxheTogX292ZXJsYXkyLmRlZmF1bHQsXG5cdCAgTGVnYWxDb3VudGVyOiBfbGVnYWxDb3VudGVyMi5kZWZhdWx0LFxuXHQgIExlZ2FsQ29udGFpbmVyOiBfbGVnYWxDb250YWluZXIyLmRlZmF1bHQsXG5cdCAgVGFiczogX3RhYnMyLmRlZmF1bHQsXG5cdCAgVGFiOiBfdGFiMi5kZWZhdWx0LFxuXHQgIENvbGxhcHNhYmxlUGFuZWw6IF9pbmRleDQuZGVmYXVsdCxcblx0ICBBbGVydDogX2luZGV4Ni5kZWZhdWx0LFxuXHQgIFNwaW5uZXI6IF9pbmRleDguZGVmYXVsdFxuXHR9O1xuXHR2YXIgZGlyZWN0aXZlcyA9IHtcblx0ICBvdmVybGF5T3BlbmVyOiBfb3ZlcmxheU9wZW5lcjIuZGVmYXVsdCxcblx0ICBzZXRGb2N1czogX3NldEZvY3VzMi5kZWZhdWx0XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluc3RhbGwoVnVlKSB7XG5cdCAgZm9yICh2YXIgbmFtZSBpbiBjb21wb25lbnRzKSB7XG5cdCAgICBWdWUuY29tcG9uZW50KG5hbWUsIGNvbXBvbmVudHNbbmFtZV0pO1xuXHQgIH1cblx0ICBmb3IgKHZhciBfbmFtZSBpbiBkaXJlY3RpdmVzKSB7XG5cdCAgICBWdWUuZGlyZWN0aXZlKF9uYW1lLCBkaXJlY3RpdmVzW19uYW1lXSk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9LFxuLyogNjggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBtZXRob2RzOiB7XG5cdCAgICByb290QnJvYWRjYXN0OiBmdW5jdGlvbiByb290QnJvYWRjYXN0KCkge1xuXHQgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuJGJyb2FkY2FzdC5hcHBseSh0aGlzLiRyb290LCBhcmdzKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cbi8qKiovIH0sXG4vKiA2OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIG1ldGhvZHM6IHtcblx0ICAgIHBhcnNlSlNPTjogZnVuY3Rpb24gcGFyc2VKU09OKHJlc3BvbnNlKSB7XG5cdCAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9LFxuLyogNzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuaHlfYy1pY29ue2ZvbnQtZmFtaWx5OlRlbHVzIEljb24sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7dGV4dC1kZWNvcmF0aW9uOm5vbmU7dGV4dC1yZW5kZXJpbmc6b3B0aW1pemVMZWdpYmlsaXR5O2NvbG9yOmluaGVyaXQ7dmVydGljYWwtYWxpZ246bWlkZGxlO2ZvbnQtc2l6ZTppbmhlcml0O2xpbmUtaGVpZ2h0OmluaGVyaXR9Lmh5X2MtaWNvbl9fc3F1YXJle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToyLjVyZW07bGluZS1oZWlnaHQ6M3JlbTt3aWR0aDozcmVtO2hlaWdodDozcmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLTJ4e2ZvbnQtc2l6ZToyZW19Lmh5X2MtaWNvbi0tM3h7Zm9udC1zaXplOjNlbX0uaHlfYy1pY29uLS00eHtmb250LXNpemU6NGVtfS5oeV9jLWljb25fX3N0eWxlZ3VpZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjJyZW07bGluZS1oZWlnaHQ6NHJlbTt3aWR0aDo0cmVtO2hlaWdodDo0cmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLWNpcmNsZS10aGljay1vdXRsaW5lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMVxcXCJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMlxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNVxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA2XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1sb2dvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwOVxcXCJ9Lmh5X2MtaWNvbi0tYmFyLWNoYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMFxcXCJ9Lmh5X2MtaWNvbi0tcGljdHVyZS1mcmFtZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTFcXFwifS5oeV9jLWljb24tLXBhcGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEzXFxcIn0uaHlfYy1pY29uLS1mb2xkZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE0XFxcIn0uaHlfYy1pY29uLS1zaGFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTVcXFwifS5oeV9jLWljb24tLW1hZ25pZnktZ2xhc3M6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE2XFxcIn0uaHlfYy1pY29uLS13YXJuaW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOFxcXCJ9Lmh5X2MtaWNvbi0tc3Rhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTlcXFwifS5oeV9jLWljb24tLXN0YXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIwXFxcIn0uaHlfYy1pY29uLS1oZWFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjFcXFwifS5oeV9jLWljb24tLWxpZmVzYXZlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjJcXFwifS5oeV9jLWljb24tLWhhbWJ1cmdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjRcXFwifS5oeV9jLWljb24tLWdyaWQtc3F1YXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNVxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNlxcXCJ9Lmh5X2MtaWNvbi0tbGlnaHRidWxiOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyN1xcXCJ9Lmh5X2MtaWNvbi0tc3BlZWRvbWV0ZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI4XFxcIn0uaHlfYy1pY29uLS1hZGQtcmVtb3ZlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOVxcXCJ9Lmh5X2MtaWNvbi0tY2FydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzBcXFwifS5oeV9jLWljb24tLXR3aXR0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMxXFxcIn0uaHlfYy1pY29uLS1mYWNlYm9vazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzJcXFwifS5oeV9jLWljb24tLXlvdXR1YmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMzXFxcIn0uaHlfYy1pY29uLS1nb29nbGUtcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzRcXFwifS5oeV9jLWljb24tLXRyZW5kLWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM1XFxcIn0uaHlfYy1pY29uLS1wbGF5LWJ1dHRvbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzZcXFwifS5oeV9jLWljb24tLXZpZGVvLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzN1xcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzhcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOVxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQwXFxcIn0uaHlfYy1pY29uLS1jbG9jay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDFcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQyXFxcIn0uaHlfYy1pY29uLS10YWJsZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQzXFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ0XFxcIn0uaHlfYy1pY29uLS1tb3VzZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDVcXFwifS5oeV9jLWljb24tLXByaWNldGFnOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItbm90ZXMtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ3XFxcIn0uaHlfYy1pY29uLS10djpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDhcXFwifS5oeV9jLWljb24tLWZpbG06YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ5XFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTBcXFwifS5oeV9jLWljb24tLXVzYi1zdGljazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTFcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUyXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1M1xcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NVxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU2XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU3XFxcIn0uaHlfYy1pY29uLS11c2VyczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTlcXFwifS5oeV9jLWljb24tLXVzZXJzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYwXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1ib3hlZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjNcXFwifS5oeV9jLWljb24tLWdlYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY0XFxcIn0uaHlfYy1pY29uLS1nZWFyLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY1XFxcIn0uaHlfYy1pY29uLS1nZWFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NlxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjhcXFwifS5oeV9jLWljb24tLXBhZGxvY2staW52ZXJldGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OVxcXCJ9Lmh5X2MtaWNvbi0tc3RhY2tlZC1wYXBlcnMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcxXFxcIn0uaHlfYy1pY29uLS1tdXNpYy1ub3RlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MlxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzNcXFwifS5oeV9jLWljb24tLXRhYmxldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzRcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzVcXFwifS5oeV9jLWljb24tLW1vdXNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NlxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc3XFxcIn0uaHlfYy1pY29uLS1wYXBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzhcXFwifS5oeV9jLWljb24tLXR2LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OVxcXCJ9Lmh5X2MtaWNvbi0tZmlsbS1jbGFwcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MFxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgxXFxcIn0uaHlfYy1pY29uLS1waG9uZS1oYW5kc2V0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MlxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODRcXFwifS5oeV9jLWljb24tLWhvbWUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODVcXFwifS5oeV9jLWljb24tLWhvbWUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg2XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODhcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTJcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkzXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTRcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk1XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk2XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk3XFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTlcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAwXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDFcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMlxcXCJ9Lmh5X2MtaWNvbi0teDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDRcXFwifS5oeV9jLWljb24tLXgtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDVcXFwifS5oeV9jLWljb24tLXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA2XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcms6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA4XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDlcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTBcXFwifS5oeV9jLWljb24tLWluZmluaXR5OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMVxcXCJ9Lmh5X2MtaWNvbi0tcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTJcXFwifS5oeV9jLWljb24tLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTNcXFwifS5oeV9jLWljb24tLXBsdXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE0XFxcIn0uaHlfYy1pY29uLS1taW51czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTVcXFwifS5oeV9jLWljb24tLW1pbnVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE2XFxcIn0uaHlfYy1pY29uLS1taW51cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTdcXFwifS5oeV9jLWljb24tLWNoYXQtYnViYmxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExOVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMFxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjFcXFwifS5oeV9jLWljb24tLWNoYXQteDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjJcXFwifS5oeV9jLWljb24tLWNoYXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIzXFxcIn0uaHlfYy1pY29uLS1zaW0tY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjVcXFwifS5oeV9jLWljb24tLWNhbGN1bGF0b3I6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI2XFxcIn0uaHlfYy1pY29uLS1ibHVldG9vdGgtaGVhZHNldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjdcXFwifS5oeV9jLWljb24tLW91dGdvaW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI5XFxcIn0uaHlfYy1pY29uLS1pbmNvbWluZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMFxcXCJ9Lmh5X2MtaWNvbi0tY2F1dGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzFcXFwifS5oeV9jLWljb24tLXdpZmktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMyXFxcIn0uaHlfYy1pY29uLS13aWZpOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzM1xcXCJ9Lmh5X2MtaWNvbi0tdGhpbi1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM1XFxcIn0uaHlfYy1pY29uLS1pbmZvLWludmVydGVkOmJlZm9yZSwuaHlfYy1pY29uLS1pbmZvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNlxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM4XFxcIn0uaHlfYy1pY29uLS1nbG9iZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDBcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDJcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDRcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ1XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDZcXFwifS5oeV9jLWljb24tLW92ZXJ2aWV3LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0N1xcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtY2lyY2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OFxcXCJ9Lmh5X2MtaWNvbi0tcHVsc2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ5XFxcIn0uaHlfYy1pY29uLS1taWtlLW1vYmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTBcXFwifS5oeV9jLWljb24tLXJld2FyZHMtYmFkZ2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUxXFxcIn0uaHlfYy1pY29uLS1maWx0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUyXFxcIn0uaHlfYy1pY29uLS1zY2hlZHVsZS10YWxrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1M1xcXCJ9Lmh5X2MtaWNvbi0td2FybmluZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTRcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTVcXFwifS5oeV9jLWljb24tLWNhcnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU2XFxcIn0uaHlfYy1pY29uLS1saXZlLWNoYXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU3XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OFxcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTlcXFwifS5oeV9jLWljb24tLWNsb3VkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MFxcXCJ9Lmh5X2MtaWNvbi0tZGF0YTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjFcXFwifS5oeV9jLWljb24tLWRlbGl2ZXJ5LXRydWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MlxcXCJ9Lmh5X2MtaWNvbi0tcHJvdGVjdGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjNcXFwifS5oeV9jLWljb24tLWNvbG91ci1waWNrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY0XFxcIn0uaHlfYy1pY29uLS1tdWx0aS1hY2NvdW50LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NVxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY2XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjdcXFwifS5oeV9jLWljb24tLWRvbGxhci1zaWduOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OFxcXCJ9Lmh5X2MtaWNvbi0tbGluay1hY2NvdW50OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OVxcXCJ9Lmh5X2MtaWNvbi0tZGF0YS1tYW5hZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MFxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcxXFxcIn0uaHlfYy1pY29uLS10b29scy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzJcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3M1xcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc0XFxcIn0uaHlfYy1pY29uLS1pcC1mYXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc1XFxcIn0uaHlfYy1pY29uLS1pcC1mYXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc2XFxcIn0uaHlfYy1pY29uLS1saW5rZWQtaW4taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc3XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzhcXFwifS5oeV9jLWljb24tLW1pY3JvcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc5XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODBcXFwifS5oeV9jLWljb24tLW5ldHdvcmtpbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgxXFxcIn0uaHlfYy1pY29uLS1jeWNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODJcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODNcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODRcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtYWRkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NVxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg2XFxcIn0uc2dfYy1hcGktdGFibGV7Ym9yZGVyLXNwYWNpbmc6MCAxMHB4O3dpZHRoOjEwMCV9LnNnX2MtYXBpLXRhYmxlIHRyey13ZWJraXQtYm94LWZsZXg6MTstbXMtZmxleDoxO2ZsZXg6MX0uc2dfYy1hcGktdGFibGUgdGgsLnNnX2MtYXBpLXRhYmxlIHRyOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2VlZX0uc2dfYy1hcGktdGFibGUgdGR7dGV4dC1hbGlnbjpjZW50ZXJ9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogNzEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuc2dfYy1uYXZ7ZGlzcGxheTpibG9jaztwb3NpdGlvbjpmaXhlZDtsZWZ0OjA7d2lkdGg6MjVyZW07aGVpZ2h0OjEwMCU7Ym9yZGVyLXJpZ2h0Oi4xcmVtIHNvbGlkICNlMmUyZTI7cGFkZGluZzoycmVtO3BhZGRpbmctdG9wOjY4cHg7b3ZlcmZsb3cteDpoaWRkZW47b3ZlcmZsb3cteTphdXRvO2JhY2tncm91bmQtY29sb3I6I2ZmZjt6LWluZGV4Ojk5OX0uc2dfYy1uYXZfX3NlY3Rpb257Zm9udC1mYW1pbHk6VGVsdXMgTWVkaXVtLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2ZvbnQtc2l6ZToxLjJyZW07Ym9yZGVyLWJvdHRvbTouMXJlbSBzb2xpZCAjZTJlMmUyO3BhZGRpbmctdG9wOjFyZW07cGFkZGluZy1ib3R0b206LjVyZW07bWFyZ2luOjFyZW0gMH0uc2dfYy1uYXZfX2xpc3QtaXRlbXtwYWRkaW5nOjVweCAwfS5zZ19jLW5hdl9fbGluazpob3Zlcntjb2xvcjojOGM2OGE2fS5zZ19jLW5hdl9fbGluay0tYWN0aXZle2NvbG9yOiM1N2E3MDh9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogNzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJoZWFkZXIuc2dfYy1zaXRlLWhlYWRlcntiYWNrZ3JvdW5kLWNvbG9yOiM0YjI4NmQ7aGVpZ2h0OjY4cHg7dGV4dC1hbGlnbjpsZWZ0O3Bvc2l0aW9uOmZpeGVkO3dpZHRoOjEwMCU7ei1pbmRleDo5OTk5fWhlYWRlci5zZ19jLXNpdGUtaGVhZGVyIC5zZ19jLXNpdGUtaGVhZGVyX19jb250YWluZXJ7aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJX1oZWFkZXIuc2dfYy1zaXRlLWhlYWRlciAuc2dfYy1zaXRlLWhlYWRlcl9fY29udGFpbmVyIGltZy5sb2dve2hlaWdodDoxMDAlO3BhZGRpbmc6MjBweDtkaXNwbGF5OmlubGluZS1ibG9jazttYXgtd2lkdGg6MTAwJX1oZWFkZXIuc2dfYy1zaXRlLWhlYWRlciAuc2dfYy1zaXRlLWhlYWRlcl9fdG9nZ2xlYnRue2NvbG9yOiNmZmY7Zm9udC1zaXplOjJyZW07bWFyZ2luOjA7YmFja2dyb3VuZDpoc2xhKDAsMCUsMTAwJSwuMSk7cGFkZGluZzoxLjVyZW07ZmxvYXQ6bGVmdDtjdXJzb3I6cG9pbnRlcjtib3JkZXI6MDtoZWlnaHQ6MTAwJTtkaXNwbGF5OmlubGluZS1ibG9ja31cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0sXG4vKiA3MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcImJvZHl7YmFja2dyb3VuZC1jb2xvcjojZjVmNmY3fS5zZ19jLXNpdGVfX21haW57cGFkZGluZy10b3A6NjhweDttYXJnaW4tbGVmdDoyNXJlbX1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjU5OXB4KXsuc2dfYy1zaXRlX19tYWlue21hcmdpbi1sZWZ0OjB9fS5zZ19jLWRlbW97bWFyZ2luOjIwcHggMH0uc2dfYy1kZW1vX19jb250YWluZXJ7YmFja2dyb3VuZC1jb2xvcjojZmZmO292ZXJmbG93OmhpZGRlbjtib3JkZXItcmFkaXVzOjVweDtib3JkZXI6MXB4IHNvbGlkICNlZWU7cGFkZGluZzoyNXB4O21hcmdpbjoyMHB4IDB9Y29kZVtjbGFzcyo9bGFuZ3VhZ2UtXSxwcmVbY2xhc3MqPWxhbmd1YWdlLV17Y29sb3I6IzAwMDtiYWNrZ3JvdW5kOm5vbmU7dGV4dC1zaGFkb3c6MCAxcHggI2ZmZjtmb250LWZhbWlseTpDb25zb2xhcyxNb25hY28sQW5kYWxlIE1vbm8sVWJ1bnR1IE1vbm8sbW9ub3NwYWNlO3RleHQtYWxpZ246bGVmdDt3aGl0ZS1zcGFjZTpwcmU7d29yZC1zcGFjaW5nOm5vcm1hbDt3b3JkLWJyZWFrOm5vcm1hbDt3b3JkLXdyYXA6bm9ybWFsO2xpbmUtaGVpZ2h0OjEuNTstbW96LXRhYi1zaXplOjQ7LW8tdGFiLXNpemU6NDt0YWItc2l6ZTo0Oy13ZWJraXQtaHlwaGVuczpub25lOy1tcy1oeXBoZW5zOm5vbmU7aHlwaGVuczpub25lfWNvZGVbY2xhc3MqPWxhbmd1YWdlLV06Oi1tb3otc2VsZWN0aW9uLGNvZGVbY2xhc3MqPWxhbmd1YWdlLV0gOjotbW96LXNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV06Oi1tb3otc2VsZWN0aW9uLHByZVtjbGFzcyo9bGFuZ3VhZ2UtXSA6Oi1tb3otc2VsZWN0aW9ue3RleHQtc2hhZG93Om5vbmU7YmFja2dyb3VuZDojYjNkNGZjfWNvZGVbY2xhc3MqPWxhbmd1YWdlLV06OnNlbGVjdGlvbixjb2RlW2NsYXNzKj1sYW5ndWFnZS1dIDo6c2VsZWN0aW9uLHByZVtjbGFzcyo9bGFuZ3VhZ2UtXTo6c2VsZWN0aW9uLHByZVtjbGFzcyo9bGFuZ3VhZ2UtXSA6OnNlbGVjdGlvbnt0ZXh0LXNoYWRvdzpub25lO2JhY2tncm91bmQ6I2IzZDRmY31AbWVkaWEgcHJpbnR7Y29kZVtjbGFzcyo9bGFuZ3VhZ2UtXSxwcmVbY2xhc3MqPWxhbmd1YWdlLV17dGV4dC1zaGFkb3c6bm9uZX19cHJlW2NsYXNzKj1sYW5ndWFnZS1de3BhZGRpbmc6MWVtO21hcmdpbjouNWVtIDA7b3ZlcmZsb3c6YXV0b306bm90KHByZSk+Y29kZVtjbGFzcyo9bGFuZ3VhZ2UtXSxwcmVbY2xhc3MqPWxhbmd1YWdlLV17YmFja2dyb3VuZDojZjVmMmYwfTpub3QocHJlKT5jb2RlW2NsYXNzKj1sYW5ndWFnZS1de3BhZGRpbmc6LjFlbTtib3JkZXItcmFkaXVzOi4zZW07d2hpdGUtc3BhY2U6bm9ybWFsfS50b2tlbi5jZGF0YSwudG9rZW4uY29tbWVudCwudG9rZW4uZG9jdHlwZSwudG9rZW4ucHJvbG9ne2NvbG9yOiM3MDgwOTB9LnRva2VuLnB1bmN0dWF0aW9ue2NvbG9yOiM5OTl9Lm5hbWVzcGFjZXtvcGFjaXR5Oi43fS50b2tlbi5ib29sZWFuLC50b2tlbi5jb25zdGFudCwudG9rZW4uZGVsZXRlZCwudG9rZW4ubnVtYmVyLC50b2tlbi5wcm9wZXJ0eSwudG9rZW4uc3ltYm9sLC50b2tlbi50YWd7Y29sb3I6IzkwNX0udG9rZW4uYXR0ci1uYW1lLC50b2tlbi5idWlsdGluLC50b2tlbi5jaGFyLC50b2tlbi5pbnNlcnRlZCwudG9rZW4uc2VsZWN0b3IsLnRva2VuLnN0cmluZ3tjb2xvcjojNjkwfS5sYW5ndWFnZS1jc3MgLnRva2VuLnN0cmluZywuc3R5bGUgLnRva2VuLnN0cmluZywudG9rZW4uZW50aXR5LC50b2tlbi5vcGVyYXRvciwudG9rZW4udXJse2NvbG9yOiNhNjdmNTk7YmFja2dyb3VuZDpoc2xhKDAsMCUsMTAwJSwuNSl9LnRva2VuLmF0cnVsZSwudG9rZW4uYXR0ci12YWx1ZSwudG9rZW4ua2V5d29yZHtjb2xvcjojMDdhfS50b2tlbi5mdW5jdGlvbntjb2xvcjojZGQ0YTY4fS50b2tlbi5pbXBvcnRhbnQsLnRva2VuLnJlZ2V4LC50b2tlbi52YXJpYWJsZXtjb2xvcjojZTkwfS50b2tlbi5ib2xkLC50b2tlbi5pbXBvcnRhbnR7Zm9udC13ZWlnaHQ6NzAwfS50b2tlbi5pdGFsaWN7Zm9udC1zdHlsZTppdGFsaWN9LnRva2VuLmVudGl0eXtjdXJzb3I6aGVscH1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0sXG4vKiA3NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5oeV9jLWljb257Zm9udC1mYW1pbHk6VGVsdXMgSWNvbixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjt0ZXh0LWRlY29yYXRpb246bm9uZTt0ZXh0LXJlbmRlcmluZzpvcHRpbWl6ZUxlZ2liaWxpdHk7Y29sb3I6aW5oZXJpdDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Zm9udC1zaXplOmluaGVyaXQ7bGluZS1oZWlnaHQ6aW5oZXJpdH0uaHlfYy1pY29uX19zcXVhcmV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjIuNXJlbTtsaW5lLWhlaWdodDozcmVtO3dpZHRoOjNyZW07aGVpZ2h0OjNyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tMnh7Zm9udC1zaXplOjJlbX0uaHlfYy1pY29uLS0zeHtmb250LXNpemU6M2VtfS5oeV9jLWljb24tLTR4e2ZvbnQtc2l6ZTo0ZW19Lmh5X2MtaWNvbl9fc3R5bGVndWlkZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6MnJlbTtsaW5lLWhlaWdodDo0cmVtO3dpZHRoOjRyZW07aGVpZ2h0OjRyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXRoaWNrLW91dGxpbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uaHlfYy1pY29uLS1jaXJjbGUtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA1XFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDZcXFwifS5oeV9jLWljb24tLXRlbHVzLWxvZ286YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA5XFxcIn0uaHlfYy1pY29uLS1iYXItY2hhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEwXFxcIn0uaHlfYy1pY29uLS1waWN0dXJlLWZyYW1lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMVxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEyXFxcIn0uaHlfYy1pY29uLS1wYXBlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTNcXFwifS5oeV9jLWljb24tLWZvbGRlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTRcXFwifS5oeV9jLWljb24tLXNoYXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNVxcXCJ9Lmh5X2MtaWNvbi0tbWFnbmlmeS1nbGFzczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTZcXFwifS5oeV9jLWljb24tLXdhcm5pbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE4XFxcIn0uaHlfYy1pY29uLS1zdGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOVxcXCJ9Lmh5X2MtaWNvbi0tc3RhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjBcXFwifS5oeV9jLWljb24tLWhlYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMVxcXCJ9Lmh5X2MtaWNvbi0tbGlmZXNhdmVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMlxcXCJ9Lmh5X2MtaWNvbi0taGFtYnVyZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNFxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI1XFxcIn0uaHlfYy1pY29uLS1ncmlkLWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI2XFxcIn0uaHlfYy1pY29uLS1saWdodGJ1bGI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI3XFxcIn0uaHlfYy1pY29uLS1zcGVlZG9tZXRlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjhcXFwifS5oeV9jLWljb24tLWFkZC1yZW1vdmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI5XFxcIn0uaHlfYy1pY29uLS1jYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMFxcXCJ9Lmh5X2MtaWNvbi0tdHdpdHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzFcXFwifS5oeV9jLWljb24tLWZhY2Vib29rOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMlxcXCJ9Lmh5X2MtaWNvbi0teW91dHViZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzNcXFwifS5oeV9jLWljb24tLWdvb2dsZS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNFxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzVcXFwifS5oeV9jLWljb24tLXBsYXktYnV0dG9uLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNlxcXCJ9Lmh5X2MtaWNvbi0tdmlkZW8taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM3XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM5XFxcIn0uaHlfYy1pY29uLS1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDBcXFwifS5oeV9jLWljb24tLWNsb2NrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MVxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDJcXFwifS5oeV9jLWljb24tLXRhYmxldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDNcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDRcXFwifS5oeV9jLWljb24tLW1vdXNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NVxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ2XFxcIn0uaHlfYy1pY29uLS1wYXBlci1ub3Rlcy1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDdcXFwifS5oeV9jLWljb24tLXR2OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OFxcXCJ9Lmh5X2MtaWNvbi0tZmlsbTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDlcXFwifS5oeV9jLWljb24tLWVudmVsb3BlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MFxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MVxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTJcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUzXFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU1XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTZcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTdcXFwifS5oeV9jLWljb24tLXVzZXJzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1OVxcXCJ9Lmh5X2MtaWNvbi0tdXNlcnMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjBcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYyXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWJveGVkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2M1xcXCJ9Lmh5X2MtaWNvbi0tZ2VhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjRcXFwifS5oeV9jLWljb24tLWdlYXItY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjVcXFwifS5oeV9jLWljb24tLWdlYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY2XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OFxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jay1pbnZlcmV0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY5XFxcIn0uaHlfYy1pY29uLS1zdGFja2VkLXBhcGVycy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzFcXFwifS5oeV9jLWljb24tLW11c2ljLW5vdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcyXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3M1xcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NVxcXCJ9Lmh5X2MtaWNvbi0tbW91c2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc2XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzdcXFwifS5oeV9jLWljb24tLXBhcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OFxcXCJ9Lmh5X2MtaWNvbi0tdHYtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc5XFxcIn0uaHlfYy1pY29uLS1maWxtLWNsYXBwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgwXFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODFcXFwifS5oeV9jLWljb24tLXBob25lLWhhbmRzZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgyXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgzXFxcIn0uaHlfYy1pY29uLS1ob21lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NVxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODZcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTNcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTVcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24tY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTZcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTdcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDBcXFwifS5oeV9jLWljb24tLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAyXFxcIn0uaHlfYy1pY29uLS14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNFxcXCJ9Lmh5X2MtaWNvbi0teC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNVxcXCJ9Lmh5X2MtaWNvbi0teC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDZcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDhcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOVxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTExXFxcIn0uaHlfYy1pY29uLS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMlxcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExM1xcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTRcXFwifS5oeV9jLWljb24tLW1pbnVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNVxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTZcXFwifS5oeV9jLWljb24tLW1pbnVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExN1xcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1idWJibGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE5XFxcIn0uaHlfYy1pY29uLS1jaGF0LWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIwXFxcIn0uaHlfYy1pY29uLS1jaGF0LWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMlxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjNcXFwifS5oeV9jLWljb24tLXNpbS1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNVxcXCJ9Lmh5X2MtaWNvbi0tY2FsY3VsYXRvcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjZcXFwifS5oeV9jLWljb24tLWJsdWV0b290aC1oZWFkc2V0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyN1xcXCJ9Lmh5X2MtaWNvbi0tb3V0Z29pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjlcXFwifS5oeV9jLWljb24tLWluY29taW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMwXFxcIn0uaHlfYy1pY29uLS1jYXV0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzJcXFwifS5oeV9jLWljb24tLXdpZmk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMzXFxcIn0uaHlfYy1pY29uLS10aGluLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzVcXFwifS5oeV9jLWljb24tLWluZm8taW52ZXJ0ZWQ6YmVmb3JlLC5oeV9jLWljb24tLWluZm86YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM2XFxcIn0uaHlfYy1pY29uLS10cmVuZC11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzhcXFwifS5oeV9jLWljb24tLWdsb2JlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MlxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NFxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDVcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NlxcXCJ9Lmh5X2MtaWNvbi0tb3ZlcnZpZXctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ3XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1jaXJjbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ4XFxcIn0uaHlfYy1pY29uLS1wdWxzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDlcXFwifS5oeV9jLWljb24tLW1pa2UtbW9iaWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MFxcXCJ9Lmh5X2MtaWNvbi0tcmV3YXJkcy1iYWRnZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTFcXFwifS5oeV9jLWljb24tLWZpbHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTJcXFwifS5oeV9jLWljb24tLXNjaGVkdWxlLXRhbGs6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUzXFxcIn0uaHlfYy1pY29uLS13YXJuaW5nOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NVxcXCJ9Lmh5X2MtaWNvbi0tY2FydC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTZcXFwifS5oeV9jLWljb24tLWxpdmUtY2hhdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTdcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3QtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU4XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OVxcXCJ9Lmh5X2MtaWNvbi0tY2xvdWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYwXFxcIn0uaHlfYy1pY29uLS1kYXRhOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MVxcXCJ9Lmh5X2MtaWNvbi0tZGVsaXZlcnktdHJ1Y2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYyXFxcIn0uaHlfYy1pY29uLS1wcm90ZWN0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2M1xcXCJ9Lmh5X2MtaWNvbi0tY29sb3VyLXBpY2tlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjRcXFwifS5oeV9jLWljb24tLW11bHRpLWFjY291bnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY1XFxcIn0uaHlfYy1pY29uLS1hY2Nlc3Nvcmllcy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjZcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2N1xcXCJ9Lmh5X2MtaWNvbi0tZG9sbGFyLXNpZ246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY4XFxcIn0uaHlfYy1pY29uLS1saW5rLWFjY291bnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY5XFxcIn0uaHlfYy1pY29uLS1kYXRhLW1hbmFnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcwXFxcIn0uaHlfYy1pY29uLS1hY2Nlc3NvcmllczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzFcXFwifS5oeV9jLWljb24tLXRvb2xzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MlxcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTczXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzRcXFwifS5oeV9jLWljb24tLWlwLWZheDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzVcXFwifS5oeV9jLWljb24tLWlwLWZheC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzZcXFwifS5oeV9jLWljb24tLWxpbmtlZC1pbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzdcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OFxcXCJ9Lmh5X2MtaWNvbi0tbWljcm9waG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzlcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MFxcXCJ9Lmh5X2MtaWNvbi0tbmV0d29ya2luZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODFcXFwifS5oeV9jLWljb24tLWN5Y2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MlxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4M1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NFxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1hZGQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg1XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODZcXFwifS5mYWRlLXRyYW5zaXRpb257LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZX0uZmFkZS1lbnRlciwuZmFkZS1sZWF2ZXtvcGFjaXR5OjB9LmMtYWxlcnR7cG9zaXRpb246cmVsYXRpdmU7cGFkZGluZzo3cHggMTVweDttYXJnaW4tYm90dG9tOjFyZW07Ym9yZGVyOjFweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItcmFkaXVzOi4yNXJlbX0uYy1hbGVydC0taW5mb3tiYWNrZ3JvdW5kLWNvbG9yOiMzMzM7Ym9yZGVyLWNvbG9yOiMwMDA7Y29sb3I6I2ZmZn0uYy1hbGVydC0taW5mbyBidXR0b257Y29sb3I6I2ZmZn0uYy1hbGVydC0tc3VjY2Vzc3tiYWNrZ3JvdW5kLWNvbG9yOiNlNmZmY2M7Ym9yZGVyLWNvbG9yOiM5ZjM7Y29sb3I6IzQwODAwMH0uYy1hbGVydC0tZXJyb3J7YmFja2dyb3VuZC1jb2xvcjojZjhkZGUzO2JvcmRlci1jb2xvcjojZjJjMGNhO2NvbG9yOiNjODEyMzV9LmMtYWxlcnRfX2Nsb3NlLWJ1dHRvbntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDoxMHB4Oy13ZWJraXQtYXBwZWFyYW5jZTpub25lO3BhZGRpbmc6MDtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kOjAgMDtib3JkZXI6MDtmb250LXNpemU6Mi41cmVtO29wYWNpdHk6LjJ9LmMtYWxlcnRfX2Nsb3NlLWJ1dHRvbjpob3ZlcntvcGFjaXR5Oi4zfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDc1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmh5X2MtaWNvbntmb250LWZhbWlseTpUZWx1cyBJY29uLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO3RleHQtZGVjb3JhdGlvbjpub25lO3RleHQtcmVuZGVyaW5nOm9wdGltaXplTGVnaWJpbGl0eTtjb2xvcjppbmhlcml0O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtmb250LXNpemU6aW5oZXJpdDtsaW5lLWhlaWdodDppbmhlcml0fS5oeV9jLWljb25fX3NxdWFyZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6Mi41cmVtO2xpbmUtaGVpZ2h0OjNyZW07d2lkdGg6M3JlbTtoZWlnaHQ6M3JlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS0yeHtmb250LXNpemU6MmVtfS5oeV9jLWljb24tLTN4e2ZvbnQtc2l6ZTozZW19Lmh5X2MtaWNvbi0tNHh7Zm9udC1zaXplOjRlbX0uaHlfYy1pY29uX19zdHlsZWd1aWRle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToycmVtO2xpbmUtaGVpZ2h0OjRyZW07d2lkdGg6NHJlbTtoZWlnaHQ6NHJlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS1jaXJjbGUtdGhpY2stb3V0bGluZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDFcXFwifS5oeV9jLWljb24tLWNpcmNsZS1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDJcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDVcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtbG9nbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDlcXFwifS5oeV9jLWljb24tLWJhci1jaGFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTBcXFwifS5oeV9jLWljb24tLXBpY3R1cmUtZnJhbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDExXFxcIn0uaHlfYy1pY29uLS1wYXBlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTJcXFwifS5oeV9jLWljb24tLXBhcGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxM1xcXCJ9Lmh5X2MtaWNvbi0tZm9sZGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNFxcXCJ9Lmh5X2MtaWNvbi0tc2hhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE1XFxcIn0uaHlfYy1pY29uLS1tYWduaWZ5LWdsYXNzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNlxcXCJ9Lmh5X2MtaWNvbi0td2FybmluZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMThcXFwifS5oeV9jLWljb24tLXN0YXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE5XFxcIn0uaHlfYy1pY29uLS1zdGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMFxcXCJ9Lmh5X2MtaWNvbi0taGVhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIxXFxcIn0uaHlfYy1pY29uLS1saWZlc2F2ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIyXFxcIn0uaHlfYy1pY29uLS1oYW1idXJnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI0XFxcIn0uaHlfYy1pY29uLS1ncmlkLXNxdWFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjVcXFwifS5oeV9jLWljb24tLWdyaWQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjZcXFwifS5oeV9jLWljb24tLWxpZ2h0YnVsYjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjdcXFwifS5oeV9jLWljb24tLXNwZWVkb21ldGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOFxcXCJ9Lmh5X2MtaWNvbi0tYWRkLXJlbW92ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjlcXFwifS5oeV9jLWljb24tLWNhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMwXFxcIn0uaHlfYy1pY29uLS10d2l0dGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMVxcXCJ9Lmh5X2MtaWNvbi0tZmFjZWJvb2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMyXFxcIn0uaHlfYy1pY29uLS15b3V0dWJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzM1xcXCJ9Lmh5X2MtaWNvbi0tZ29vZ2xlLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM0XFxcIn0uaHlfYy1pY29uLS10cmVuZC1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNVxcXCJ9Lmh5X2MtaWNvbi0tcGxheS1idXR0b24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM2XFxcIn0uaHlfYy1pY29uLS12aWRlby1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzdcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM4XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzlcXFwifS5oeV9jLWljb24tLWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MFxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQxXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MlxcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NFxcXCJ9Lmh5X2MtaWNvbi0tbW91c2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ1XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDZcXFwifS5oeV9jLWljb24tLXBhcGVyLW5vdGVzLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0N1xcXCJ9Lmh5X2MtaWNvbi0tdHY6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ4XFxcIn0uaHlfYy1pY29uLS1maWxtOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OVxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUwXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUxXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MlxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTNcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTVcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NlxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1N1xcXCJ9Lmh5X2MtaWNvbi0tdXNlcnM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU5XFxcIn0uaHlfYy1pY29uLS11c2Vycy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MFxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjJcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtYm94ZWQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYzXFxcIn0uaHlfYy1pY29uLS1nZWFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NFxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NVxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjZcXFwifS5oeV9jLWljb24tLXBhZGxvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY4XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrLWludmVyZXRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjlcXFwifS5oeV9jLWljb24tLXN0YWNrZWQtcGFwZXJzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MVxcXCJ9Lmh5X2MtaWNvbi0tbXVzaWMtbm90ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzJcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDczXFxcIn0uaHlfYy1pY29uLS10YWJsZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc0XFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc1XFxcIn0uaHlfYy1pY29uLS1tb3VzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzZcXFwifS5oeV9jLWljb24tLXByaWNldGFnLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3N1xcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc4XFxcIn0uaHlfYy1pY29uLS10di1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzlcXFwifS5oeV9jLWljb24tLWZpbG0tY2xhcHBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODBcXFwifS5oeV9jLWljb24tLWVudmVsb3BlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MVxcXCJ9Lmh5X2MtaWNvbi0tcGhvbmUtaGFuZHNldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODJcXFwifS5oeV9jLWljb24tLXVzYi1zdGljay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODNcXFwifS5oeV9jLWljb24tLWhvbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg0XFxcIn0uaHlfYy1pY29uLS1ob21lLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg1XFxcIn0uaHlfYy1pY29uLS1ob21lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NlxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTFcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkyXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5M1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk0XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5N1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOThcXFwifS5oeV9jLWljb24tLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk5XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDJcXFwifS5oeV9jLWljb24tLXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA0XFxcIn0uaHlfYy1pY29uLS14LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA1XFxcIn0uaHlfYy1pY29uLS14LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNlxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOFxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA5XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEwXFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTFcXFwifS5oeV9jLWljb24tLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEyXFxcIn0uaHlfYy1pY29uLS1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEzXFxcIn0uaHlfYy1pY29uLS1wbHVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNFxcXCJ9Lmh5X2MtaWNvbi0tbWludXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE1XFxcIn0uaHlfYy1pY29uLS1taW51cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNlxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE3XFxcIn0uaHlfYy1pY29uLS1jaGF0LWJ1YmJsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTlcXFwifS5oeV9jLWljb24tLWNoYXQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjBcXFwifS5oeV9jLWljb24tLWNoYXQtY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIxXFxcIn0uaHlfYy1pY29uLS1jaGF0LXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIyXFxcIn0uaHlfYy1pY29uLS1jaGF0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyM1xcXCJ9Lmh5X2MtaWNvbi0tc2ltLWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI1XFxcIn0uaHlfYy1pY29uLS1jYWxjdWxhdG9yOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNlxcXCJ9Lmh5X2MtaWNvbi0tYmx1ZXRvb3RoLWhlYWRzZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI3XFxcIn0uaHlfYy1pY29uLS1vdXRnb2luZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyOVxcXCJ9Lmh5X2MtaWNvbi0taW5jb21pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzBcXFwifS5oeV9jLWljb24tLWNhdXRpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMxXFxcIn0uaHlfYy1pY29uLS13aWZpLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMlxcXCJ9Lmh5X2MtaWNvbi0td2lmaTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzNcXFwifS5oeV9jLWljb24tLXRoaW4tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNVxcXCJ9Lmh5X2MtaWNvbi0taW5mby1pbnZlcnRlZDpiZWZvcmUsLmh5X2MtaWNvbi0taW5mbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzZcXFwifS5oeV9jLWljb24tLXRyZW5kLXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzOFxcXCJ9Lmh5X2MtaWNvbi0tZ2xvYmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQwXFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQyXFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ0XFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NVxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ2XFxcIn0uaHlfYy1pY29uLS1vdmVydmlldy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDdcXFwifS5oeV9jLWljb24tLXRlbHVzLWNpcmNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDhcXFwifS5oeV9jLWljb24tLXB1bHNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OVxcXCJ9Lmh5X2MtaWNvbi0tbWlrZS1tb2JpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUwXFxcIn0uaHlfYy1pY29uLS1yZXdhcmRzLWJhZGdlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MVxcXCJ9Lmh5X2MtaWNvbi0tZmlsdGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MlxcXCJ9Lmh5X2MtaWNvbi0tc2NoZWR1bGUtdGFsazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTNcXFwifS5oeV9jLWljb24tLXdhcm5pbmc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU0XFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU1XFxcIn0uaHlfYy1pY29uLS1jYXJ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NlxcXCJ9Lmh5X2MtaWNvbi0tbGl2ZS1jaGF0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1N1xcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNThcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3Q6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU5XFxcIn0uaHlfYy1pY29uLS1jbG91ZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjBcXFwifS5oeV9jLWljb24tLWRhdGE6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYxXFxcIn0uaHlfYy1pY29uLS1kZWxpdmVyeS10cnVjazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjJcXFwifS5oeV9jLWljb24tLXByb3RlY3Rpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYzXFxcIn0uaHlfYy1pY29uLS1jb2xvdXItcGlja2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NFxcXCJ9Lmh5X2MtaWNvbi0tbXVsdGktYWNjb3VudC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjVcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NlxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY3XFxcIn0uaHlfYy1pY29uLS1kb2xsYXItc2lnbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjhcXFwifS5oeV9jLWljb24tLWxpbmstYWNjb3VudDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjlcXFwifS5oeV9jLWljb24tLWRhdGEtbWFuYWdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzBcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MVxcXCJ9Lmh5X2MtaWNvbi0tdG9vbHMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcyXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzNcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NFxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NVxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NlxcXCJ9Lmh5X2MtaWNvbi0tbGlua2VkLWluLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3N1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc4XFxcIn0uaHlfYy1pY29uLS1taWNyb3Bob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgwXFxcIn0uaHlfYy1pY29uLS1uZXR3b3JraW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MVxcXCJ9Lmh5X2MtaWNvbi0tY3ljbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgyXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgzXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg0XFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWFkZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODVcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NlxcXCJ9LmMtY29sbGFwc2FibGUtcGFuZWx7Ym9yZGVyOjFweCBzb2xpZCAjZTJlMmUyO2JveC1zaGFkb3c6MCAxcHggM3B4IDFweCAjZTJlMmUyfS5jLWNvbGxhcHNhYmxlLXBhbmVsX19oZWFkZXJ7Y3Vyc29yOnBvaW50ZXI7cGFkZGluZzoxMHB4IDE1cHg7cG9zaXRpb246cmVsYXRpdmV9LmMtY29sbGFwc2FibGUtcGFuZWxfX2hlYWRlcjphZnRlcntwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDoxZW07dG9wOi43NWVtO2ZvbnQtc2l6ZTouNzVlbTtmb250LWZhbWlseTpUZWx1cyBJY29uO2NvbnRlbnQ6J1xcXFxFMTE0Jztjb2xvcjojNTdhNzA4fS5jLWNvbGxhcHNhYmxlLXBhbmVsX19oZWFkZXItLW9wZW46YWZ0ZXJ7Y29udGVudDonXFxcXEUxMTcnfS5jLWNvbGxhcHNhYmxlLXBhbmVsX19ib2R5e2JvcmRlci10b3A6MXB4IHNvbGlkICNlMmUyZTI7bWF4LWhlaWdodDowO3BhZGRpbmc6MCAxNXB4Oy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2UtaW4tb3V0O3RyYW5zaXRpb246YWxsIC4zcyBlYXNlLWluLW91dDtvdmVyZmxvdzpoaWRkZW47b3BhY2l0eTowfS5jLWNvbGxhcHNhYmxlLXBhbmVsX19ib2R5LS1vcGVue29wYWNpdHk6MTtwYWRkaW5nOjE1cHg7bWF4LWhlaWdodDo5OTk5cHh9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogNzYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYy1sZWdhbC1jb250YWluZXJfX29yZGVyZWQtbGlzdHttYXJnaW4tdG9wOjEwcHg7bWFyZ2luLWJvdHRvbToyMHB4O2xpc3Qtc3R5bGU6ZGVjaW1hbDtsaXN0LXN0eWxlLXR5cGU6ZGVjaW1hbDtwYWRkaW5nLWxlZnQ6MjBweH0uYy1sZWdhbC1jb250YWluZXJfX3Vub3JkZXJlZC1saXN0e21hcmdpbi10b3A6MTBweDttYXJnaW4tYm90dG9tOjIwcHg7cGFkZGluZy1sZWZ0OjIwcHg7bGlzdC1zdHlsZTpub25lO2xpc3Qtc3R5bGUtdHlwZTpub25lfS5jLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVte2xpbmUtaGVpZ2h0OjE5cHg7bWFyZ2luLWJvdHRvbToxMHB4O3BhZGRpbmc6MTBweH0uYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbS0tYWN0aXZle2JhY2tncm91bmQtY29sb3I6I2Y5ZjFmZn0uYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbSBhe2NvbG9yOiM0OTE2NmQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Ym9yZGVyLWJvdHRvbToxcHggZG90dGVkO3BhZGRpbmctYm90dG9tOjFweH0uYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbSBhOmhvdmVye2NvbG9yOiM4YzY4YTZ9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogNzcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYy1sZWdhbC1zdXB7Zm9udC1zaXplOi43NWVtO2xpbmUtaGVpZ2h0OjA7dmVydGljYWwtYWxpZ246c3VwZXI7dGV4dC1kZWNvcmF0aW9uOm5vbmU7dG9wOjAhaW1wb3J0YW50O2N1cnNvcjpwb2ludGVyfS5jLWxlZ2FsLXN1cCBhe2NvbG9yOiM0OTE2NmR9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogNzggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIubm8tc2Nyb2xse292ZXJmbG93LXg6aGlkZGVuO292ZXJmbG93OmhpZGRlbjtvdmVyZmxvdy15OmhpZGRlbjtwb3NpdGlvbjpyZWxhdGl2ZTtoZWlnaHQ6MTAwJX0uYy1vdmVybGF5LWNvbnRhaW5lcl9fY3VydGFpbntvcGFjaXR5OjA7LXdlYmtpdC10cmFuc2l0aW9uOm9wYWNpdHkgLjdzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSk7dHJhbnNpdGlvbjpvcGFjaXR5IC43cyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpfS5jLW92ZXJsYXktY29udGFpbmVyX19jdXJ0YWluLS1hY3RpdmV7b3BhY2l0eToxO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuNTUpO3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDtyaWdodDowO2JvdHRvbTowfS5jLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5c3twb3NpdGlvbjpmaXhlZDtyaWdodDowO3RvcDowO2JvdHRvbTowO2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuNSk7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgxMDAlKTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgxMDAlKTstd2Via2l0LXRyYW5zaXRpb246LjdzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSk7dHJhbnNpdGlvbjouN3MgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKX1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjU5OXB4KXsuYy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXN7d2lkdGg6MTAwJX19QG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDo2MDBweCl7LmMtb3ZlcmxheS1jb250YWluZXJfX292ZXJsYXlze3dpZHRoOjY2JX19LmMtb3ZlcmxheS1jb250YWluZXJfX292ZXJsYXlzLS1hY3RpdmV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgwKTt6LWluZGV4Ojk5OTk5fVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDc5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtb3ZlcmxheXtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO2JhY2tncm91bmQtY29sb3I6I2ZmZn0uYy1vdmVybGF5X19oZWFkZXJ7cGFkZGluZzoyMHB4O3Bvc2l0aW9uOmZpeGVkO3RvcDowO2hlaWdodDo3NXB4O3dpZHRoOjEwMCU7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2UyZTJlMjtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY2Zjd9LmMtb3ZlcmxheV9fY2xvc2UtYnV0dG9ue2N1cnNvcjpwb2ludGVyO2JhY2tncm91bmQ6MDtib3JkZXI6MDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MjBweDtyaWdodDoyMHB4O2ZvbnQtZmFtaWx5OlRlbHVzIEljb247Zm9udC1zaXplOjJlbTtjb2xvcjojNDkxNjZkfS5jLW92ZXJsYXlfX2Nsb3NlLWJ1dHRvbjpiZWZvcmV7Y29udGVudDonXFxcXEUxMDYnfS5jLW92ZXJsYXlfX2JvZHl7cG9zaXRpb246Zml4ZWQ7LXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2g7b3ZlcmZsb3cteTpzY3JvbGw7dG9wOjc1cHg7Ym90dG9tOjA7d2lkdGg6MTAwJTtwYWRkaW5nOjIwcHggMjBweCA1MHB4fVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDgwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiQC13ZWJraXQta2V5ZnJhbWVzIHJvdGF0ZXt0b3std2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMXR1cm4pO3RyYW5zZm9ybTpyb3RhdGUoMXR1cm4pfX1Aa2V5ZnJhbWVzIHJvdGF0ZXt0b3std2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMXR1cm4pO3RyYW5zZm9ybTpyb3RhdGUoMXR1cm4pfX1ALXdlYmtpdC1rZXlmcmFtZXMgZGFzaHswJXtzdHJva2UtZGFzaGFycmF5OjEsMjAwO3N0cm9rZS1kYXNob2Zmc2V0OjB9NTAle3N0cm9rZS1kYXNoYXJyYXk6ODksMjAwO3N0cm9rZS1kYXNob2Zmc2V0Oi0zNX10b3tzdHJva2UtZGFzaGFycmF5Ojg5LDIwMDtzdHJva2UtZGFzaG9mZnNldDotMTI0fX1Aa2V5ZnJhbWVzIGRhc2h7MCV7c3Ryb2tlLWRhc2hhcnJheToxLDIwMDtzdHJva2UtZGFzaG9mZnNldDowfTUwJXtzdHJva2UtZGFzaGFycmF5Ojg5LDIwMDtzdHJva2UtZGFzaG9mZnNldDotMzV9dG97c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTEyNH19QC13ZWJraXQta2V5ZnJhbWVzIHNwaW5uZXItY29sb3J7MCUsdG97c3Ryb2tlOiM2YzB9MjUle3N0cm9rZTojNmMwfTUwJXtzdHJva2U6IzU3YTcwOH03NSV7c3Ryb2tlOiM1N2E3MDh9fUBrZXlmcmFtZXMgc3Bpbm5lci1jb2xvcnswJSx0b3tzdHJva2U6IzZjMH0yNSV7c3Ryb2tlOiM2YzB9NTAle3N0cm9rZTojNTdhNzA4fTc1JXtzdHJva2U6IzU3YTcwOH19LmMtc3Bpbm5lcntkaXNwbGF5Oi13ZWJraXQtYm94O2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy13ZWJraXQtYm94LWFsaWduOmNlbnRlcjstbXMtZmxleC1hbGlnbjpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2Rpc3BsYXk6LXdlYmtpdC1mbGV4Oy13ZWJraXQtYWxpZ24taXRlbXM6Y2VudGVyOy13ZWJraXQtYm94LXBhY2s6Y2VudGVyOy1tcy1mbGV4LXBhY2s6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7bWFyZ2luOmF1dG87LXdlYmtpdC1ib3gtb3JpZW50OnZlcnRpY2FsOy13ZWJraXQtYm94LWRpcmVjdGlvbjpub3JtYWw7LW1zLWZsZXgtZGlyZWN0aW9uOmNvbHVtbjtmbGV4LWRpcmVjdGlvbjpjb2x1bW59LmMtc3Bpbm5lci0tZnVsbHNjcmVlbntwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7cmlnaHQ6MDtib3R0b206MDt6LWluZGV4Ojk5OTg7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtiYWNrZ3JvdW5kOmhzbGEoMCwwJSwxMDAlLC44KX0uYy1zcGlubmVyIHN2Z3thbmltYXRpb24tbmFtZTpyb3RhdGU7LXdlYmtpdC1hbmltYXRpb24tbmFtZTpyb3RhdGU7LW1vei1hbmltYXRpb24tbmFtZTpyb3RhdGU7YW5pbWF0aW9uLWR1cmF0aW9uOjEuOHM7LXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246MS44czstbW96LWFuaW1hdGlvbi1kdXJhdGlvbjoxLjhzO2FuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6aW5maW5pdGU7LXdlYmtpdC1hbmltYXRpb24taXRlcmF0aW9uLWNvdW50OmluZmluaXRlOy1tb3otYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDppbmZpbml0ZTthbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmxpbmVhcjstd2Via2l0LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246bGluZWFyOy1tb3otYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpsaW5lYXI7aGVpZ2h0OjEwMHB4O3dpZHRoOjEwMHB4fS5jLXNwaW5uZXIgY2lyY2xle2FuaW1hdGlvbjpkYXNoIDEuN3MgZWFzZS1pbi1vdXQgaW5maW5pdGUgMHMsc3Bpbm5lci1jb2xvciA2cyBlYXNlLWluLW91dCBpbmZpbml0ZSAtLjc1czstd2Via2l0LWFuaW1hdGlvbjpkYXNoIDEuN3MgZWFzZS1pbi1vdXQgaW5maW5pdGUgMHMsc3Bpbm5lci1jb2xvciA2cyBlYXNlLWluLW91dCBpbmZpbml0ZSAtLjc1czstbW96LWFuaW1hdGlvbjpkYXNoIDEuN3MgZWFzZS1pbi1vdXQgaW5maW5pdGUgMHMsc3Bpbm5lci1jb2xvciA2cyBlYXNlLWluLW91dCBpbmZpbml0ZSAtLjc1c31cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0sXG4vKiA4MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5jLXN0ZXAtdHJhY2tlcl9faWNvbiwuaHlfYy1pY29ue2ZvbnQtZmFtaWx5OlRlbHVzIEljb24sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7dGV4dC1kZWNvcmF0aW9uOm5vbmU7dGV4dC1yZW5kZXJpbmc6b3B0aW1pemVMZWdpYmlsaXR5O2NvbG9yOmluaGVyaXQ7dmVydGljYWwtYWxpZ246bWlkZGxlO2ZvbnQtc2l6ZTppbmhlcml0O2xpbmUtaGVpZ2h0OmluaGVyaXR9Lmh5X2MtaWNvbl9fc3F1YXJle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToyLjVyZW07bGluZS1oZWlnaHQ6M3JlbTt3aWR0aDozcmVtO2hlaWdodDozcmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLTJ4e2ZvbnQtc2l6ZToyZW19Lmh5X2MtaWNvbi0tM3h7Zm9udC1zaXplOjNlbX0uaHlfYy1pY29uLS00eHtmb250LXNpemU6NGVtfS5oeV9jLWljb25fX3N0eWxlZ3VpZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjJyZW07bGluZS1oZWlnaHQ6NHJlbTt3aWR0aDo0cmVtO2hlaWdodDo0cmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLWNpcmNsZS10aGljay1vdXRsaW5lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMVxcXCJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMlxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNVxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA2XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1sb2dvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwOVxcXCJ9Lmh5X2MtaWNvbi0tYmFyLWNoYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMFxcXCJ9Lmh5X2MtaWNvbi0tcGljdHVyZS1mcmFtZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTFcXFwifS5oeV9jLWljb24tLXBhcGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEzXFxcIn0uaHlfYy1pY29uLS1mb2xkZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE0XFxcIn0uaHlfYy1pY29uLS1zaGFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTVcXFwifS5oeV9jLWljb24tLW1hZ25pZnktZ2xhc3M6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE2XFxcIn0uaHlfYy1pY29uLS13YXJuaW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOFxcXCJ9Lmh5X2MtaWNvbi0tc3Rhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTlcXFwifS5oeV9jLWljb24tLXN0YXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIwXFxcIn0uaHlfYy1pY29uLS1oZWFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjFcXFwifS5oeV9jLWljb24tLWxpZmVzYXZlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjJcXFwifS5oeV9jLWljb24tLWhhbWJ1cmdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjRcXFwifS5oeV9jLWljb24tLWdyaWQtc3F1YXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNVxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNlxcXCJ9Lmh5X2MtaWNvbi0tbGlnaHRidWxiOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyN1xcXCJ9Lmh5X2MtaWNvbi0tc3BlZWRvbWV0ZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI4XFxcIn0uaHlfYy1pY29uLS1hZGQtcmVtb3ZlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOVxcXCJ9Lmh5X2MtaWNvbi0tY2FydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzBcXFwifS5oeV9jLWljb24tLXR3aXR0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMxXFxcIn0uaHlfYy1pY29uLS1mYWNlYm9vazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzJcXFwifS5oeV9jLWljb24tLXlvdXR1YmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMzXFxcIn0uaHlfYy1pY29uLS1nb29nbGUtcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzRcXFwifS5oeV9jLWljb24tLXRyZW5kLWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM1XFxcIn0uaHlfYy1pY29uLS1wbGF5LWJ1dHRvbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzZcXFwifS5oeV9jLWljb24tLXZpZGVvLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzN1xcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzhcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOVxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQwXFxcIn0uaHlfYy1pY29uLS1jbG9jay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDFcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQyXFxcIn0uaHlfYy1pY29uLS10YWJsZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQzXFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ0XFxcIn0uaHlfYy1pY29uLS1tb3VzZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDVcXFwifS5oeV9jLWljb24tLXByaWNldGFnOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItbm90ZXMtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ3XFxcIn0uaHlfYy1pY29uLS10djpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDhcXFwifS5oeV9jLWljb24tLWZpbG06YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ5XFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTBcXFwifS5oeV9jLWljb24tLXVzYi1zdGljazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTFcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUyXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1M1xcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NVxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU2XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU3XFxcIn0uaHlfYy1pY29uLS11c2VyczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTlcXFwifS5oeV9jLWljb24tLXVzZXJzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYwXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1ib3hlZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjNcXFwifS5oeV9jLWljb24tLWdlYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY0XFxcIn0uaHlfYy1pY29uLS1nZWFyLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY1XFxcIn0uaHlfYy1pY29uLS1nZWFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NlxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjhcXFwifS5oeV9jLWljb24tLXBhZGxvY2staW52ZXJldGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OVxcXCJ9Lmh5X2MtaWNvbi0tc3RhY2tlZC1wYXBlcnMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcxXFxcIn0uaHlfYy1pY29uLS1tdXNpYy1ub3RlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MlxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzNcXFwifS5oeV9jLWljb24tLXRhYmxldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzRcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzVcXFwifS5oeV9jLWljb24tLW1vdXNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NlxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc3XFxcIn0uaHlfYy1pY29uLS1wYXBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzhcXFwifS5oeV9jLWljb24tLXR2LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OVxcXCJ9Lmh5X2MtaWNvbi0tZmlsbS1jbGFwcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MFxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgxXFxcIn0uaHlfYy1pY29uLS1waG9uZS1oYW5kc2V0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MlxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODRcXFwifS5oeV9jLWljb24tLWhvbWUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODVcXFwifS5oeV9jLWljb24tLWhvbWUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg2XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODhcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTJcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkzXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTRcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk1XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk2XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk3XFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTlcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAwXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDFcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMlxcXCJ9Lmh5X2MtaWNvbi0teDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDRcXFwifS5oeV9jLWljb24tLXgtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDVcXFwifS5oeV9jLWljb24tLXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA2XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcms6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA4XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDlcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTBcXFwifS5oeV9jLWljb24tLWluZmluaXR5OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMVxcXCJ9Lmh5X2MtaWNvbi0tcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTJcXFwifS5oeV9jLWljb24tLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTNcXFwifS5oeV9jLWljb24tLXBsdXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE0XFxcIn0uaHlfYy1pY29uLS1taW51czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTVcXFwifS5oeV9jLWljb24tLW1pbnVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE2XFxcIn0uaHlfYy1pY29uLS1taW51cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTdcXFwifS5oeV9jLWljb24tLWNoYXQtYnViYmxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExOVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMFxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjFcXFwifS5oeV9jLWljb24tLWNoYXQteDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjJcXFwifS5oeV9jLWljb24tLWNoYXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIzXFxcIn0uaHlfYy1pY29uLS1zaW0tY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjVcXFwifS5oeV9jLWljb24tLWNhbGN1bGF0b3I6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI2XFxcIn0uaHlfYy1pY29uLS1ibHVldG9vdGgtaGVhZHNldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjdcXFwifS5oeV9jLWljb24tLW91dGdvaW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI5XFxcIn0uaHlfYy1pY29uLS1pbmNvbWluZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMFxcXCJ9Lmh5X2MtaWNvbi0tY2F1dGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzFcXFwifS5oeV9jLWljb24tLXdpZmktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMyXFxcIn0uaHlfYy1pY29uLS13aWZpOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzM1xcXCJ9Lmh5X2MtaWNvbi0tdGhpbi1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM1XFxcIn0uaHlfYy1pY29uLS1pbmZvLWludmVydGVkOmJlZm9yZSwuaHlfYy1pY29uLS1pbmZvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNlxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM4XFxcIn0uaHlfYy1pY29uLS1nbG9iZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDBcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDJcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDRcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ1XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDZcXFwifS5oeV9jLWljb24tLW92ZXJ2aWV3LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0N1xcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtY2lyY2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OFxcXCJ9Lmh5X2MtaWNvbi0tcHVsc2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ5XFxcIn0uaHlfYy1pY29uLS1taWtlLW1vYmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTBcXFwifS5oeV9jLWljb24tLXJld2FyZHMtYmFkZ2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUxXFxcIn0uaHlfYy1pY29uLS1maWx0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUyXFxcIn0uaHlfYy1pY29uLS1zY2hlZHVsZS10YWxrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1M1xcXCJ9Lmh5X2MtaWNvbi0td2FybmluZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTRcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTVcXFwifS5oeV9jLWljb24tLWNhcnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU2XFxcIn0uaHlfYy1pY29uLS1saXZlLWNoYXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU3XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OFxcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTlcXFwifS5oeV9jLWljb24tLWNsb3VkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MFxcXCJ9Lmh5X2MtaWNvbi0tZGF0YTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjFcXFwifS5oeV9jLWljb24tLWRlbGl2ZXJ5LXRydWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MlxcXCJ9Lmh5X2MtaWNvbi0tcHJvdGVjdGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjNcXFwifS5oeV9jLWljb24tLWNvbG91ci1waWNrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY0XFxcIn0uaHlfYy1pY29uLS1tdWx0aS1hY2NvdW50LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NVxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY2XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjdcXFwifS5oeV9jLWljb24tLWRvbGxhci1zaWduOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OFxcXCJ9Lmh5X2MtaWNvbi0tbGluay1hY2NvdW50OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OVxcXCJ9Lmh5X2MtaWNvbi0tZGF0YS1tYW5hZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MFxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcxXFxcIn0uaHlfYy1pY29uLS10b29scy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzJcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3M1xcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc0XFxcIn0uaHlfYy1pY29uLS1pcC1mYXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc1XFxcIn0uaHlfYy1pY29uLS1pcC1mYXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc2XFxcIn0uaHlfYy1pY29uLS1saW5rZWQtaW4taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc3XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzhcXFwifS5oeV9jLWljb24tLW1pY3JvcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc5XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODBcXFwifS5oeV9jLWljb24tLW5ldHdvcmtpbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgxXFxcIn0uaHlfYy1pY29uLS1jeWNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODJcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODNcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODRcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtYWRkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NVxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg2XFxcIn0uYy1zdGVwLXRyYWNrZXJ7bGlzdC1zdHlsZTpub25lO3BhZGRpbmc6MDtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5Oi13ZWJraXQtYm94O2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy13ZWJraXQtYm94LXBhY2s6anVzdGlmeTstbXMtZmxleC1wYWNrOmp1c3RpZnk7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47bWFyZ2luOjFyZW0gLTEuNXJlbX1AbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOjYwMHB4KXsuYy1zdGVwLXRyYWNrZXJ7cGFkZGluZy1ib3R0b206Mi41cmVtO21hcmdpbjoxcmVtIDB9fS5jLXN0ZXAtdHJhY2tlcl9fc3RlcHt3aWR0aDoxMDAlO3Bvc2l0aW9uOnJlbGF0aXZlO3RleHQtYWxpZ246Y2VudGVyfS5jLXN0ZXAtdHJhY2tlcl9fc3RlcDphZnRlciwuYy1zdGVwLXRyYWNrZXJfX3N0ZXA6YmVmb3Jle3Bvc2l0aW9uOmFic29sdXRlO3RvcDo1MCU7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKTt3aWR0aDpjYWxjKDUwJSAtIDEuNHJlbSk7Y29udGVudDonICc7Ym9yZGVyLWJvdHRvbTouNnJlbSBzb2xpZCAjYWVhZWFlfS5jLXN0ZXAtdHJhY2tlcl9fc3RlcDpiZWZvcmV7bGVmdDowfS5jLXN0ZXAtdHJhY2tlcl9fc3RlcDphZnRlcntyaWdodDowfS5jLXN0ZXAtdHJhY2tlciAuYy1zdGVwLXRyYWNrZXJfX3N0ZXA6Zmlyc3QtY2hpbGQ6YmVmb3JlLC5jLXN0ZXAtdHJhY2tlciAuYy1zdGVwLXRyYWNrZXJfX3N0ZXA6bGFzdC1jaGlsZDphZnRlcntjb250ZW50Om5vbmV9LmMtc3RlcC10cmFja2VyX19sYWJlbHtwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206LTNyZW07bGVmdDowO2ZvbnQtc2l6ZToxLjdyZW07d2lkdGg6MTAwJTtoZWlnaHQ6Mi41cmVtO2ZvbnQtZmFtaWx5OlRlbHVzIFJlZ3VsYXIsSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7Y29sb3I6IzY2Nn1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjU5OXB4KXsuYy1zdGVwLXRyYWNrZXJfX2xhYmVse2Rpc3BsYXk6bm9uZX19LmMtc3RlcC10cmFja2VyX19zdGVwLS1hY3RpdmUgLmMtc3RlcC10cmFja2VyX19sYWJlbHtmb250LWZhbWlseTpUZWx1cyBNZWRpdW0sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7Y29sb3I6IzQwODAwMH0uYy1zdGVwLXRyYWNrZXJfX2ljb257Zm9udC1zaXplOjNyZW07Y29sb3I6I2FlYWVhZX0uYy1zdGVwLXRyYWNrZXJfX2ljb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWFjdGl2ZSAuYy1zdGVwLXRyYWNrZXJfX2ljb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uYy1zdGVwLXRyYWNrZXJfX3NldHAtLWNsaWNrYWJsZSBhe2N1cnNvcjpwb2ludGVyfS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGU6YWZ0ZXJ7Ym9yZGVyLWJvdHRvbTouNnJlbSBzb2xpZCAjNTdhNzA4fS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGUgLmMtc3RlcC10cmFja2VyX19pY29uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9LmMtc3RlcC10cmFja2VyX19zdGVwLS1hY3RpdmUgLmMtc3RlcC10cmFja2VyX19pY29uOmJlZm9yZSwuYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlIC5jLXN0ZXAtdHJhY2tlcl9faWNvbjpiZWZvcmV7Y29sb3I6IzU3YTcwOH0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlKy5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tYWN0aXZlOmJlZm9yZSwuYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlKy5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGU6YmVmb3Jle2JvcmRlci1ib3R0b206LjZyZW0gc29saWQgIzU3YTcwOH0uYy1zdGVwLXRyYWNrZXItbW9iaWxlLWxhYmVse2ZvbnQtc2l6ZToxLjdyZW07dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1mYW1pbHk6VGVsdXMgUmVndWxhcixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjojNjY2fUBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6NjAwcHgpey5jLXN0ZXAtdHJhY2tlci1tb2JpbGUtbGFiZWx7ZGlzcGxheTpub25lfX0uYy1zdGVwLXRyYWNrZXItbW9iaWxlLWxhYmVsX19zdGVwe2ZvbnQtZmFtaWx5OlRlbHVzIE1lZGl1bSxIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjojNDA4MDAwfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDgyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtdGFic19faGVhZGVye2xpc3Qtc3R5bGU6bm9uZTtwYWRkaW5nOjA7bWFyZ2luOjA7ZGlzcGxheTotd2Via2l0LWJveDtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleH0uYy10YWJzX19oZWFkZXItaXRlbXttYXJnaW4tdG9wOjJweDtoZWlnaHQ6NDVweDtwYWRkaW5nOjAgMnB4Oy13ZWJraXQtYm94LWZsZXg6MTstbXMtZmxleDoxO2ZsZXg6MX0uYy10YWJzX19oZWFkZXItaXRlbSBhe2JhY2tncm91bmQtY29sb3I6I2UyZTJlMjt0ZXh0LWRlY29yYXRpb246bm9uZTtwYWRkaW5nOjEzcHggMjBweDtjb2xvcjojNDkxNjZkO2Rpc3BsYXk6YmxvY2t9LmMtdGFic19faGVhZGVyLWl0ZW0tLWFjdGl2ZXttYXJnaW4tdG9wOjFweDtoZWlnaHQ6NDZweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym9yZGVyLXRvcDoxcHggc29saWQgI2UyZTJlMjtib3JkZXItbGVmdDoxcHggc29saWQgI2UyZTJlMjtib3JkZXItcmlnaHQ6MXB4IHNvbGlkICNlMmUyZTJ9LmMtdGFic19faGVhZGVyLWl0ZW0tLWFjdGl2ZSBhe2JhY2tncm91bmQtY29sb3I6I2ZmZjtjb2xvcjojMzMzfS5jLXRhYnNfX2hlYWRlci1pdGVtLS1kaXNhYmxlZCBhe2JhY2tncm91bmQtY29sb3I6I2Y1ZjZmNztjb2xvcjojYWVhZWFlO2N1cnNvcjpub3QtYWxsb3dlZH0uYy10YWJzX19ib2R5e2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICNlMmUyZTI7bWFyZ2luLXRvcDotMXB4O3BhZGRpbmc6MjBweH0uYy10YWJzX19wYW5le2Rpc3BsYXk6YmxvY2s7Ym9yZGVyLXRvcDpub25lO29wYWNpdHk6MDtoZWlnaHQ6MDtvdmVyZmxvdzpoaWRkZW47cGFkZGluZzowIDVweDstd2Via2l0LXRyYW5zaXRpb246YWxsIC41cyBlYXNlLW91dDt0cmFuc2l0aW9uOmFsbCAuNXMgZWFzZS1vdXR9LmMtdGFic19fcGFuZS0tYWN0aXZle29wYWNpdHk6MTtwYWRkaW5nOjVweDtoZWlnaHQ6YXV0b31cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0sXG4vKiA4MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHJlcXVpcmU7dmFyIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOy8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzLCBnbG9iYWwsIG1vZHVsZSkgey8qIVxuXHQgKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXG5cdCAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDE0IFllaHVkYSBLYXR6LCBUb20gRGFsZSwgU3RlZmFuIFBlbm5lciBhbmQgY29udHJpYnV0b3JzIChDb252ZXJzaW9uIHRvIEVTNiBBUEkgYnkgSmFrZSBBcmNoaWJhbGQpXG5cdCAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2Vcblx0ICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2pha2VhcmNoaWJhbGQvZXM2LXByb21pc2UvbWFzdGVyL0xJQ0VOU0Vcblx0ICogQHZlcnNpb24gICAzLjIuMVxuXHQgKi9cblx0XG5cdChmdW5jdGlvbigpIHtcblx0ICAgIFwidXNlIHN0cmljdFwiO1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRvYmplY3RPckZ1bmN0aW9uKHgpIHtcblx0ICAgICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nIHx8ICh0eXBlb2YgeCA9PT0gJ29iamVjdCcgJiYgeCAhPT0gbnVsbCk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0Z1bmN0aW9uKHgpIHtcblx0ICAgICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNNYXliZVRoZW5hYmxlKHgpIHtcblx0ICAgICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiB4ICE9PSBudWxsO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkdXRpbHMkJF9pc0FycmF5O1xuXHQgICAgaWYgKCFBcnJheS5pc0FycmF5KSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXkgPSBmdW5jdGlvbiAoeCkge1xuXHQgICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG5cdCAgICAgIH07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkdXRpbHMkJF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0FycmF5ID0gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheTtcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuID0gMDtcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0O1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRjdXN0b21TY2hlZHVsZXJGbjtcblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAgPSBmdW5jdGlvbiBhc2FwKGNhbGxiYWNrLCBhcmcpIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2xpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW5dID0gY2FsbGJhY2s7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuICsgMV0gPSBhcmc7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gKz0gMjtcblx0ICAgICAgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gPT09IDIpIHtcblx0ICAgICAgICAvLyBJZiBsZW4gaXMgMiwgdGhhdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gc2NoZWR1bGUgYW4gYXN5bmMgZmx1c2guXG5cdCAgICAgICAgLy8gSWYgYWRkaXRpb25hbCBjYWxsYmFja3MgYXJlIHF1ZXVlZCBiZWZvcmUgdGhlIHF1ZXVlIGlzIGZsdXNoZWQsIHRoZXlcblx0ICAgICAgICAvLyB3aWxsIGJlIHByb2Nlc3NlZCBieSB0aGlzIGZsdXNoIHRoYXQgd2UgYXJlIHNjaGVkdWxpbmcuXG5cdCAgICAgICAgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRjdXN0b21TY2hlZHVsZXJGbikge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHNldFNjaGVkdWxlcihzY2hlZHVsZUZuKSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRjdXN0b21TY2hlZHVsZXJGbiA9IHNjaGVkdWxlRm47XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHNldEFzYXAoYXNhcEZuKSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwID0gYXNhcEZuO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3NlcldpbmRvdyA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgPyB3aW5kb3cgOiB1bmRlZmluZWQ7XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJHbG9iYWwgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3NlcldpbmRvdyB8fCB7fTtcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3Nlckdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyR2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGlzTm9kZSA9IHR5cGVvZiBzZWxmID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYge30udG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nO1xuXHRcblx0ICAgIC8vIHRlc3QgZm9yIHdlYiB3b3JrZXIgYnV0IG5vdCBpbiBJRTEwXG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGlzV29ya2VyID0gdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJlxuXHQgICAgICB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcgJiZcblx0ICAgICAgdHlwZW9mIE1lc3NhZ2VDaGFubmVsICE9PSAndW5kZWZpbmVkJztcblx0XG5cdCAgICAvLyBub2RlXG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTmV4dFRpY2soKSB7XG5cdCAgICAgIC8vIG5vZGUgdmVyc2lvbiAwLjEwLnggZGlzcGxheXMgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHdoZW4gbmV4dFRpY2sgaXMgdXNlZCByZWN1cnNpdmVseVxuXHQgICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHNcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHByb2Nlc3MubmV4dFRpY2sobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyB2ZXJ0eFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVZlcnR4VGltZXIoKSB7XG5cdCAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0KGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCk7XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU11dGF0aW9uT2JzZXJ2ZXIoKSB7XG5cdCAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcblx0ICAgICAgdmFyIG9ic2VydmVyID0gbmV3IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRCcm93c2VyTXV0YXRpb25PYnNlcnZlcihsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuXHQgICAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcblx0ICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7XG5cdFxuXHQgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgbm9kZS5kYXRhID0gKGl0ZXJhdGlvbnMgPSArK2l0ZXJhdGlvbnMgJSAyKTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyB3ZWIgd29ya2VyXG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTWVzc2FnZUNoYW5uZWwoKSB7XG5cdCAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG5cdCAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoO1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVNldFRpbWVvdXQoKSB7XG5cdCAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgICBzZXRUaW1lb3V0KGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCwgMSk7XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZSA9IG5ldyBBcnJheSgxMDAwKTtcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCgpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuOyBpKz0yKSB7XG5cdCAgICAgICAgdmFyIGNhbGxiYWNrID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2ldO1xuXHQgICAgICAgIHZhciBhcmcgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaSsxXTtcblx0XG5cdCAgICAgICAgY2FsbGJhY2soYXJnKTtcblx0XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2ldID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpKzFdID0gdW5kZWZpbmVkO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuID0gMDtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXR0ZW1wdFZlcnR4KCkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHZhciByID0gcmVxdWlyZTtcblx0ICAgICAgICB2YXIgdmVydHggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyMCk7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHZlcnR4TmV4dCA9IHZlcnR4LnJ1bk9uTG9vcCB8fCB2ZXJ0eC5ydW5PbkNvbnRleHQ7XG5cdCAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VWZXJ0eFRpbWVyKCk7XG5cdCAgICAgIH0gY2F0Y2goZSkge1xuXHQgICAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlU2V0VGltZW91dCgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoO1xuXHQgICAgLy8gRGVjaWRlIHdoYXQgYXN5bmMgbWV0aG9kIHRvIHVzZSB0byB0cmlnZ2VyaW5nIHByb2Nlc3Npbmcgb2YgcXVldWVkIGNhbGxiYWNrczpcblx0ICAgIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNOb2RlKSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU5leHRUaWNrKCk7XG5cdCAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRCcm93c2VyTXV0YXRpb25PYnNlcnZlcikge1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNdXRhdGlvbk9ic2VydmVyKCk7XG5cdCAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc1dvcmtlcikge1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNZXNzYWdlQ2hhbm5lbCgpO1xuXHQgICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3NlcldpbmRvdyA9PT0gdW5kZWZpbmVkICYmIFwiZnVuY3Rpb25cIiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhdHRlbXB0VmVydHgoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVNldFRpbWVvdXQoKTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSR0aGVuJCR0aGVuKG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG5cdCAgICAgIHZhciBwYXJlbnQgPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG5cdFxuXHQgICAgICBpZiAoY2hpbGRbbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUFJPTUlTRV9JRF0gPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG1ha2VQcm9taXNlKGNoaWxkKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHN0YXRlID0gcGFyZW50Ll9zdGF0ZTtcblx0XG5cdCAgICAgIGlmIChzdGF0ZSkge1xuXHQgICAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50c1tzdGF0ZSAtIDFdO1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbnZva2VDYWxsYmFjayhzdGF0ZSwgY2hpbGQsIGNhbGxiYWNrLCBwYXJlbnQuX3Jlc3VsdCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIGNoaWxkO1xuXHQgICAgfVxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSR0aGVuJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHRoZW4kJHRoZW47XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRyZXNvbHZlKG9iamVjdCkge1xuXHQgICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuXHQgICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXHRcblx0ICAgICAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7XG5cdCAgICAgICAgcmV0dXJuIG9iamVjdDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgb2JqZWN0KTtcblx0ICAgICAgcmV0dXJuIHByb21pc2U7XG5cdCAgICB9XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJHJlc29sdmU7XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUFJPTUlTRV9JRCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygxNik7XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCgpIHt9XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcgICA9IHZvaWQgMDtcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQgPSAxO1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEICA9IDI7XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SID0gbmV3IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEVycm9yT2JqZWN0KCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc2VsZkZ1bGZpbGxtZW50KCkge1xuXHQgICAgICByZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGZcIik7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkY2Fubm90UmV0dXJuT3duKCkge1xuXHQgICAgICByZXR1cm4gbmV3IFR5cGVFcnJvcignQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLicpO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGdldFRoZW4ocHJvbWlzZSkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHJldHVybiBwcm9taXNlLnRoZW47XG5cdCAgICAgIH0gY2F0Y2goZXJyb3IpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUi5lcnJvciA9IGVycm9yO1xuXHQgICAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUjtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeVRoZW4odGhlbiwgdmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcikge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKTtcblx0ICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgcmV0dXJuIGU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4pIHtcblx0ICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGZ1bmN0aW9uKHByb21pc2UpIHtcblx0ICAgICAgICB2YXIgc2VhbGVkID0gZmFsc2U7XG5cdCAgICAgICAgdmFyIGVycm9yID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5VGhlbih0aGVuLCB0aGVuYWJsZSwgZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgICAgIGlmIChzZWFsZWQpIHsgcmV0dXJuOyB9XG5cdCAgICAgICAgICBzZWFsZWQgPSB0cnVlO1xuXHQgICAgICAgICAgaWYgKHRoZW5hYmxlICE9PSB2YWx1ZSkge1xuXHQgICAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuXHQgICAgICAgICAgaWYgKHNlYWxlZCkgeyByZXR1cm47IH1cblx0ICAgICAgICAgIHNlYWxlZCA9IHRydWU7XG5cdFxuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG5cdCAgICAgICAgfSwgJ1NldHRsZTogJyArIChwcm9taXNlLl9sYWJlbCB8fCAnIHVua25vd24gcHJvbWlzZScpKTtcblx0XG5cdCAgICAgICAgaWYgKCFzZWFsZWQgJiYgZXJyb3IpIHtcblx0ICAgICAgICAgIHNlYWxlZCA9IHRydWU7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSwgcHJvbWlzZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUpIHtcblx0ICAgICAgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcblx0ICAgICAgfSBlbHNlIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZSh0aGVuYWJsZSwgdW5kZWZpbmVkLCBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbikge1xuXHQgICAgICBpZiAobWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3RvciA9PT0gcHJvbWlzZS5jb25zdHJ1Y3RvciAmJlxuXHQgICAgICAgICAgdGhlbiA9PT0gbGliJGVzNiRwcm9taXNlJHRoZW4kJGRlZmF1bHQgJiZcblx0ICAgICAgICAgIGNvbnN0cnVjdG9yLnJlc29sdmUgPT09IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJGRlZmF1bHQpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAodGhlbiA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1IpIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUi5lcnJvcik7XG5cdCAgICAgICAgfSBlbHNlIGlmICh0aGVuID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24odGhlbikpIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKSB7XG5cdCAgICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzZWxmRnVsZmlsbG1lbnQoKSk7XG5cdCAgICAgIH0gZWxzZSBpZiAobGliJGVzNiRwcm9taXNlJHV0aWxzJCRvYmplY3RPckZ1bmN0aW9uKHZhbHVlKSkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGdldFRoZW4odmFsdWUpKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2hSZWplY3Rpb24ocHJvbWlzZSkge1xuXHQgICAgICBpZiAocHJvbWlzZS5fb25lcnJvcikge1xuXHQgICAgICAgIHByb21pc2UuX29uZXJyb3IocHJvbWlzZS5fcmVzdWx0KTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaChwcm9taXNlKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7XG5cdCAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykgeyByZXR1cm47IH1cblx0XG5cdCAgICAgIHByb21pc2UuX3Jlc3VsdCA9IHZhbHVlO1xuXHQgICAgICBwcm9taXNlLl9zdGF0ZSA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRDtcblx0XG5cdCAgICAgIGlmIChwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggIT09IDApIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoLCBwcm9taXNlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pIHtcblx0ICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7IHJldHVybjsgfVxuXHQgICAgICBwcm9taXNlLl9zdGF0ZSA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEO1xuXHQgICAgICBwcm9taXNlLl9yZXN1bHQgPSByZWFzb247XG5cdFxuXHQgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoUmVqZWN0aW9uLCBwcm9taXNlKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcblx0ICAgICAgdmFyIHN1YnNjcmliZXJzID0gcGFyZW50Ll9zdWJzY3JpYmVycztcblx0ICAgICAgdmFyIGxlbmd0aCA9IHN1YnNjcmliZXJzLmxlbmd0aDtcblx0XG5cdCAgICAgIHBhcmVudC5fb25lcnJvciA9IG51bGw7XG5cdFxuXHQgICAgICBzdWJzY3JpYmVyc1tsZW5ndGhdID0gY2hpbGQ7XG5cdCAgICAgIHN1YnNjcmliZXJzW2xlbmd0aCArIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRF0gPSBvbkZ1bGZpbGxtZW50O1xuXHQgICAgICBzdWJzY3JpYmVyc1tsZW5ndGggKyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRF0gID0gb25SZWplY3Rpb247XG5cdFxuXHQgICAgICBpZiAobGVuZ3RoID09PSAwICYmIHBhcmVudC5fc3RhdGUpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoLCBwYXJlbnQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaChwcm9taXNlKSB7XG5cdCAgICAgIHZhciBzdWJzY3JpYmVycyA9IHByb21pc2UuX3N1YnNjcmliZXJzO1xuXHQgICAgICB2YXIgc2V0dGxlZCA9IHByb21pc2UuX3N0YXRlO1xuXHRcblx0ICAgICAgaWYgKHN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkgeyByZXR1cm47IH1cblx0XG5cdCAgICAgIHZhciBjaGlsZCwgY2FsbGJhY2ssIGRldGFpbCA9IHByb21pc2UuX3Jlc3VsdDtcblx0XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3Vic2NyaWJlcnMubGVuZ3RoOyBpICs9IDMpIHtcblx0ICAgICAgICBjaGlsZCA9IHN1YnNjcmliZXJzW2ldO1xuXHQgICAgICAgIGNhbGxiYWNrID0gc3Vic2NyaWJlcnNbaSArIHNldHRsZWRdO1xuXHRcblx0ICAgICAgICBpZiAoY2hpbGQpIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGludm9rZUNhbGxiYWNrKHNldHRsZWQsIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgY2FsbGJhY2soZGV0YWlsKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCA9IDA7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRXJyb3JPYmplY3QoKSB7XG5cdCAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1IgPSBuZXcgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRXJyb3JPYmplY3QoKTtcblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGRldGFpbCk7XG5cdCAgICAgIH0gY2F0Y2goZSkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFRSWV9DQVRDSF9FUlJPUi5lcnJvciA9IGU7XG5cdCAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFRSWV9DQVRDSF9FUlJPUjtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGludm9rZUNhbGxiYWNrKHNldHRsZWQsIHByb21pc2UsIGNhbGxiYWNrLCBkZXRhaWwpIHtcblx0ICAgICAgdmFyIGhhc0NhbGxiYWNrID0gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0Z1bmN0aW9uKGNhbGxiYWNrKSxcblx0ICAgICAgICAgIHZhbHVlLCBlcnJvciwgc3VjY2VlZGVkLCBmYWlsZWQ7XG5cdFxuXHQgICAgICBpZiAoaGFzQ2FsbGJhY2spIHtcblx0ICAgICAgICB2YWx1ZSA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpO1xuXHRcblx0ICAgICAgICBpZiAodmFsdWUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFRSWV9DQVRDSF9FUlJPUikge1xuXHQgICAgICAgICAgZmFpbGVkID0gdHJ1ZTtcblx0ICAgICAgICAgIGVycm9yID0gdmFsdWUuZXJyb3I7XG5cdCAgICAgICAgICB2YWx1ZSA9IG51bGw7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRjYW5ub3RSZXR1cm5Pd24oKSk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YWx1ZSA9IGRldGFpbDtcblx0ICAgICAgICBzdWNjZWVkZWQgPSB0cnVlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHtcblx0ICAgICAgICAvLyBub29wXG5cdCAgICAgIH0gZWxzZSBpZiAoaGFzQ2FsbGJhY2sgJiYgc3VjY2VlZGVkKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoZmFpbGVkKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGVycm9yKTtcblx0ICAgICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbml0aWFsaXplUHJvbWlzZShwcm9taXNlLCByZXNvbHZlcikge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHJlc29sdmVyKGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHZhbHVlKXtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICAgIH0sIGZ1bmN0aW9uIHJlamVjdFByb21pc2UocmVhc29uKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGlkID0gMDtcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5leHRJZCgpIHtcblx0ICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGlkKys7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbWFrZVByb21pc2UocHJvbWlzZSkge1xuXHQgICAgICBwcm9taXNlW2xpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBST01JU0VfSURdID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaWQrKztcblx0ICAgICAgcHJvbWlzZS5fc3RhdGUgPSB1bmRlZmluZWQ7XG5cdCAgICAgIHByb21pc2UuX3Jlc3VsdCA9IHVuZGVmaW5lZDtcblx0ICAgICAgcHJvbWlzZS5fc3Vic2NyaWJlcnMgPSBbXTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGFsbChlbnRyaWVzKSB7XG5cdCAgICAgIHJldHVybiBuZXcgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJGRlZmF1bHQodGhpcywgZW50cmllcykucHJvbWlzZTtcblx0ICAgIH1cblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGFsbDtcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJHJhY2UoZW50cmllcykge1xuXHQgICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuXHQgICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXHRcblx0ICAgICAgaWYgKCFsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzQXJyYXkoZW50cmllcykpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS4nKSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDtcblx0ICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgQ29uc3RydWN0b3IucmVzb2x2ZShlbnRyaWVzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkcmFjZTtcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkcmVqZWN0KHJlYXNvbikge1xuXHQgICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuXHQgICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXHQgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG5cdCAgICAgIHJldHVybiBwcm9taXNlO1xuXHQgICAgfVxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkcmVqZWN0O1xuXHRcblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkbmVlZHNSZXNvbHZlcigpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc05ldygpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZTtcblx0ICAgIC8qKlxuXHQgICAgICBQcm9taXNlIG9iamVjdHMgcmVwcmVzZW50IHRoZSBldmVudHVhbCByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi4gVGhlXG5cdCAgICAgIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsIHdoaWNoXG5cdCAgICAgIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlIHJlYXNvblxuXHQgICAgICB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblx0XG5cdCAgICAgIFRlcm1pbm9sb2d5XG5cdCAgICAgIC0tLS0tLS0tLS0tXG5cdFxuXHQgICAgICAtIGBwcm9taXNlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gd2l0aCBhIGB0aGVuYCBtZXRob2Qgd2hvc2UgYmVoYXZpb3IgY29uZm9ybXMgdG8gdGhpcyBzcGVjaWZpY2F0aW9uLlxuXHQgICAgICAtIGB0aGVuYWJsZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHRoYXQgZGVmaW5lcyBhIGB0aGVuYCBtZXRob2QuXG5cdCAgICAgIC0gYHZhbHVlYCBpcyBhbnkgbGVnYWwgSmF2YVNjcmlwdCB2YWx1ZSAoaW5jbHVkaW5nIHVuZGVmaW5lZCwgYSB0aGVuYWJsZSwgb3IgYSBwcm9taXNlKS5cblx0ICAgICAgLSBgZXhjZXB0aW9uYCBpcyBhIHZhbHVlIHRoYXQgaXMgdGhyb3duIHVzaW5nIHRoZSB0aHJvdyBzdGF0ZW1lbnQuXG5cdCAgICAgIC0gYHJlYXNvbmAgaXMgYSB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aHkgYSBwcm9taXNlIHdhcyByZWplY3RlZC5cblx0ICAgICAgLSBgc2V0dGxlZGAgdGhlIGZpbmFsIHJlc3Rpbmcgc3RhdGUgb2YgYSBwcm9taXNlLCBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuXG5cdFxuXHQgICAgICBBIHByb21pc2UgY2FuIGJlIGluIG9uZSBvZiB0aHJlZSBzdGF0ZXM6IHBlbmRpbmcsIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQuXG5cdFxuXHQgICAgICBQcm9taXNlcyB0aGF0IGFyZSBmdWxmaWxsZWQgaGF2ZSBhIGZ1bGZpbGxtZW50IHZhbHVlIGFuZCBhcmUgaW4gdGhlIGZ1bGZpbGxlZFxuXHQgICAgICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXG5cdCAgICAgIHJlamVjdGVkIHN0YXRlLiAgQSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZXZlciBhIHRoZW5hYmxlLlxuXHRcblx0ICAgICAgUHJvbWlzZXMgY2FuIGFsc28gYmUgc2FpZCB0byAqcmVzb2x2ZSogYSB2YWx1ZS4gIElmIHRoaXMgdmFsdWUgaXMgYWxzbyBhXG5cdCAgICAgIHByb21pc2UsIHRoZW4gdGhlIG9yaWdpbmFsIHByb21pc2UncyBzZXR0bGVkIHN0YXRlIHdpbGwgbWF0Y2ggdGhlIHZhbHVlJ3Ncblx0ICAgICAgc2V0dGxlZCBzdGF0ZS4gIFNvIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgcmVqZWN0cyB3aWxsXG5cdCAgICAgIGl0c2VsZiByZWplY3QsIGFuZCBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdpbGxcblx0ICAgICAgaXRzZWxmIGZ1bGZpbGwuXG5cdFxuXHRcblx0ICAgICAgQmFzaWMgVXNhZ2U6XG5cdCAgICAgIC0tLS0tLS0tLS0tLVxuXHRcblx0ICAgICAgYGBganNcblx0ICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgICAvLyBvbiBzdWNjZXNzXG5cdCAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG5cdFxuXHQgICAgICAgIC8vIG9uIGZhaWx1cmVcblx0ICAgICAgICByZWplY3QocmVhc29uKTtcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgICAvLyBvbiBmdWxmaWxsbWVudFxuXHQgICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcblx0ICAgICAgICAvLyBvbiByZWplY3Rpb25cblx0ICAgICAgfSk7XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgQWR2YW5jZWQgVXNhZ2U6XG5cdCAgICAgIC0tLS0tLS0tLS0tLS0tLVxuXHRcblx0ICAgICAgUHJvbWlzZXMgc2hpbmUgd2hlbiBhYnN0cmFjdGluZyBhd2F5IGFzeW5jaHJvbm91cyBpbnRlcmFjdGlvbnMgc3VjaCBhc1xuXHQgICAgICBgWE1MSHR0cFJlcXVlc3Rgcy5cblx0XG5cdCAgICAgIGBgYGpzXG5cdCAgICAgIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG5cdCAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdFxuXHQgICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG5cdCAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcblx0ICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG5cdCAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcblx0ICAgICAgICAgIHhoci5zZW5kKCk7XG5cdFxuXHQgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlcigpIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gdGhpcy5ET05FKSB7XG5cdCAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcblx0ICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZSk7XG5cdCAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ2dldEpTT046IGAnICsgdXJsICsgJ2AgZmFpbGVkIHdpdGggc3RhdHVzOiBbJyArIHRoaXMuc3RhdHVzICsgJ10nKSk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBnZXRKU09OKCcvcG9zdHMuanNvbicpLnRoZW4oZnVuY3Rpb24oanNvbikge1xuXHQgICAgICAgIC8vIG9uIGZ1bGZpbGxtZW50XG5cdCAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuXHQgICAgICAgIC8vIG9uIHJlamVjdGlvblxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBVbmxpa2UgY2FsbGJhY2tzLCBwcm9taXNlcyBhcmUgZ3JlYXQgY29tcG9zYWJsZSBwcmltaXRpdmVzLlxuXHRcblx0ICAgICAgYGBganNcblx0ICAgICAgUHJvbWlzZS5hbGwoW1xuXHQgICAgICAgIGdldEpTT04oJy9wb3N0cycpLFxuXHQgICAgICAgIGdldEpTT04oJy9jb21tZW50cycpXG5cdCAgICAgIF0pLnRoZW4oZnVuY3Rpb24odmFsdWVzKXtcblx0ICAgICAgICB2YWx1ZXNbMF0gLy8gPT4gcG9zdHNKU09OXG5cdCAgICAgICAgdmFsdWVzWzFdIC8vID0+IGNvbW1lbnRzSlNPTlxuXHRcblx0ICAgICAgICByZXR1cm4gdmFsdWVzO1xuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBAY2xhc3MgUHJvbWlzZVxuXHQgICAgICBAcGFyYW0ge2Z1bmN0aW9ufSByZXNvbHZlclxuXHQgICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgICAgIEBjb25zdHJ1Y3RvclxuXHQgICAgKi9cblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlKHJlc29sdmVyKSB7XG5cdCAgICAgIHRoaXNbbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUFJPTUlTRV9JRF0gPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRuZXh0SWQoKTtcblx0ICAgICAgdGhpcy5fcmVzdWx0ID0gdGhpcy5fc3RhdGUgPSB1bmRlZmluZWQ7XG5cdCAgICAgIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG5cdFxuXHQgICAgICBpZiAobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCAhPT0gcmVzb2x2ZXIpIHtcblx0ICAgICAgICB0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicgJiYgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzUmVzb2x2ZXIoKTtcblx0ICAgICAgICB0aGlzIGluc3RhbmNlb2YgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UgPyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbml0aWFsaXplUHJvbWlzZSh0aGlzLCByZXNvbHZlcikgOiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkbmVlZHNOZXcoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLmFsbCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkZGVmYXVsdDtcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnJhY2UgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRkZWZhdWx0O1xuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UucmVzb2x2ZSA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJGRlZmF1bHQ7XG5cdCAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5yZWplY3QgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZWplY3QkJGRlZmF1bHQ7XG5cdCAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5fc2V0U2NoZWR1bGVyID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHNldFNjaGVkdWxlcjtcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLl9zZXRBc2FwID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHNldEFzYXA7XG5cdCAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5fYXNhcCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwO1xuXHRcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnByb3RvdHlwZSA9IHtcblx0ICAgICAgY29uc3RydWN0b3I6IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICBUaGUgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCxcblx0ICAgICAgd2hpY2ggcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGVcblx0ICAgICAgcmVhc29uIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuXHRcblx0ICAgICAgYGBganNcblx0ICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uKHVzZXIpe1xuXHQgICAgICAgIC8vIHVzZXIgaXMgYXZhaWxhYmxlXG5cdCAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgICAgICAgLy8gdXNlciBpcyB1bmF2YWlsYWJsZSwgYW5kIHlvdSBhcmUgZ2l2ZW4gdGhlIHJlYXNvbiB3aHlcblx0ICAgICAgfSk7XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgQ2hhaW5pbmdcblx0ICAgICAgLS0tLS0tLS1cblx0XG5cdCAgICAgIFRoZSByZXR1cm4gdmFsdWUgb2YgYHRoZW5gIGlzIGl0c2VsZiBhIHByb21pc2UuICBUaGlzIHNlY29uZCwgJ2Rvd25zdHJlYW0nXG5cdCAgICAgIHByb21pc2UgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmaXJzdCBwcm9taXNlJ3MgZnVsZmlsbG1lbnRcblx0ICAgICAgb3IgcmVqZWN0aW9uIGhhbmRsZXIsIG9yIHJlamVjdGVkIGlmIHRoZSBoYW5kbGVyIHRocm93cyBhbiBleGNlcHRpb24uXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcblx0ICAgICAgICByZXR1cm4gdXNlci5uYW1lO1xuXHQgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICAgICAgcmV0dXJuICdkZWZhdWx0IG5hbWUnO1xuXHQgICAgICB9KS50aGVuKGZ1bmN0aW9uICh1c2VyTmFtZSkge1xuXHQgICAgICAgIC8vIElmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgdXNlck5hbWVgIHdpbGwgYmUgdGhlIHVzZXIncyBuYW1lLCBvdGhlcndpc2UgaXRcblx0ICAgICAgICAvLyB3aWxsIGJlIGAnZGVmYXVsdCBuYW1lJ2Bcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jyk7XG5cdCAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknKTtcblx0ICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICAvLyBuZXZlciByZWFjaGVkXG5cdCAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgICAvLyBpZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHJlYXNvbmAgd2lsbCBiZSAnRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknLlxuXHQgICAgICAgIC8vIElmIGBmaW5kVXNlcmAgcmVqZWN0ZWQsIGByZWFzb25gIHdpbGwgYmUgJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknLlxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdCAgICAgIElmIHRoZSBkb3duc3RyZWFtIHByb21pc2UgZG9lcyBub3Qgc3BlY2lmeSBhIHJlamVjdGlvbiBoYW5kbGVyLCByZWplY3Rpb24gcmVhc29ucyB3aWxsIGJlIHByb3BhZ2F0ZWQgZnVydGhlciBkb3duc3RyZWFtLlxuXHRcblx0ICAgICAgYGBganNcblx0ICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFBlZGFnb2dpY2FsRXhjZXB0aW9uKCdVcHN0cmVhbSBlcnJvcicpO1xuXHQgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcblx0ICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICAvLyBuZXZlciByZWFjaGVkXG5cdCAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgICAvLyBUaGUgYFBlZGdhZ29jaWFsRXhjZXB0aW9uYCBpcyBwcm9wYWdhdGVkIGFsbCB0aGUgd2F5IGRvd24gdG8gaGVyZVxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBBc3NpbWlsYXRpb25cblx0ICAgICAgLS0tLS0tLS0tLS0tXG5cdFxuXHQgICAgICBTb21ldGltZXMgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHByb3BhZ2F0ZSB0byBhIGRvd25zdHJlYW0gcHJvbWlzZSBjYW4gb25seSBiZVxuXHQgICAgICByZXRyaWV2ZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJldHVybmluZyBhIHByb21pc2UgaW4gdGhlXG5cdCAgICAgIGZ1bGZpbGxtZW50IG9yIHJlamVjdGlvbiBoYW5kbGVyLiBUaGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgdGhlbiBiZSBwZW5kaW5nXG5cdCAgICAgIHVudGlsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHNldHRsZWQuIFRoaXMgaXMgY2FsbGVkICphc3NpbWlsYXRpb24qLlxuXHRcblx0ICAgICAgYGBganNcblx0ICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG5cdCAgICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuXHQgICAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuXHQgICAgICAgIC8vIFRoZSB1c2VyJ3MgY29tbWVudHMgYXJlIG5vdyBhdmFpbGFibGVcblx0ICAgICAgfSk7XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgSWYgdGhlIGFzc2ltbGlhdGVkIHByb21pc2UgcmVqZWN0cywgdGhlbiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgYWxzbyByZWplY3QuXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcblx0ICAgICAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG5cdCAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG5cdCAgICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCBmdWxmaWxscywgd2UnbGwgaGF2ZSB0aGUgdmFsdWUgaGVyZVxuXHQgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCByZWplY3RzLCB3ZSdsbCBoYXZlIHRoZSByZWFzb24gaGVyZVxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBTaW1wbGUgRXhhbXBsZVxuXHQgICAgICAtLS0tLS0tLS0tLS0tLVxuXHRcblx0ICAgICAgU3luY2hyb25vdXMgRXhhbXBsZVxuXHRcblx0ICAgICAgYGBgamF2YXNjcmlwdFxuXHQgICAgICB2YXIgcmVzdWx0O1xuXHRcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICByZXN1bHQgPSBmaW5kUmVzdWx0KCk7XG5cdCAgICAgICAgLy8gc3VjY2Vzc1xuXHQgICAgICB9IGNhdGNoKHJlYXNvbikge1xuXHQgICAgICAgIC8vIGZhaWx1cmVcblx0ICAgICAgfVxuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIEVycmJhY2sgRXhhbXBsZVxuXHRcblx0ICAgICAgYGBganNcblx0ICAgICAgZmluZFJlc3VsdChmdW5jdGlvbihyZXN1bHQsIGVycil7XG5cdCAgICAgICAgaWYgKGVycikge1xuXHQgICAgICAgICAgLy8gZmFpbHVyZVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvLyBzdWNjZXNzXG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBQcm9taXNlIEV4YW1wbGU7XG5cdFxuXHQgICAgICBgYGBqYXZhc2NyaXB0XG5cdCAgICAgIGZpbmRSZXN1bHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG5cdCAgICAgICAgLy8gc3VjY2Vzc1xuXHQgICAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuXHQgICAgICAgIC8vIGZhaWx1cmVcblx0ICAgICAgfSk7XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgQWR2YW5jZWQgRXhhbXBsZVxuXHQgICAgICAtLS0tLS0tLS0tLS0tLVxuXHRcblx0ICAgICAgU3luY2hyb25vdXMgRXhhbXBsZVxuXHRcblx0ICAgICAgYGBgamF2YXNjcmlwdFxuXHQgICAgICB2YXIgYXV0aG9yLCBib29rcztcblx0XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgYXV0aG9yID0gZmluZEF1dGhvcigpO1xuXHQgICAgICAgIGJvb2tzICA9IGZpbmRCb29rc0J5QXV0aG9yKGF1dGhvcik7XG5cdCAgICAgICAgLy8gc3VjY2Vzc1xuXHQgICAgICB9IGNhdGNoKHJlYXNvbikge1xuXHQgICAgICAgIC8vIGZhaWx1cmVcblx0ICAgICAgfVxuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIEVycmJhY2sgRXhhbXBsZVxuXHRcblx0ICAgICAgYGBganNcblx0XG5cdCAgICAgIGZ1bmN0aW9uIGZvdW5kQm9va3MoYm9va3MpIHtcblx0XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGZ1bmN0aW9uIGZhaWx1cmUocmVhc29uKSB7XG5cdFxuXHQgICAgICB9XG5cdFxuXHQgICAgICBmaW5kQXV0aG9yKGZ1bmN0aW9uKGF1dGhvciwgZXJyKXtcblx0ICAgICAgICBpZiAoZXJyKSB7XG5cdCAgICAgICAgICBmYWlsdXJlKGVycik7XG5cdCAgICAgICAgICAvLyBmYWlsdXJlXG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIGZpbmRCb29va3NCeUF1dGhvcihhdXRob3IsIGZ1bmN0aW9uKGJvb2tzLCBlcnIpIHtcblx0ICAgICAgICAgICAgICBpZiAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBmYWlsdXJlKGVycik7XG5cdCAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgIGZvdW5kQm9va3MoYm9va3MpO1xuXHQgICAgICAgICAgICAgICAgfSBjYXRjaChyZWFzb24pIHtcblx0ICAgICAgICAgICAgICAgICAgZmFpbHVyZShyZWFzb24pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9IGNhdGNoKGVycm9yKSB7XG5cdCAgICAgICAgICAgIGZhaWx1cmUoZXJyKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIC8vIHN1Y2Nlc3Ncblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIFByb21pc2UgRXhhbXBsZTtcblx0XG5cdCAgICAgIGBgYGphdmFzY3JpcHRcblx0ICAgICAgZmluZEF1dGhvcigpLlxuXHQgICAgICAgIHRoZW4oZmluZEJvb2tzQnlBdXRob3IpLlxuXHQgICAgICAgIHRoZW4oZnVuY3Rpb24oYm9va3Mpe1xuXHQgICAgICAgICAgLy8gZm91bmQgYm9va3Ncblx0ICAgICAgfSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcblx0ICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBAbWV0aG9kIHRoZW5cblx0ICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gb25GdWxmaWxsZWRcblx0ICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3RlZFxuXHQgICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgICAgIEByZXR1cm4ge1Byb21pc2V9XG5cdCAgICAqL1xuXHQgICAgICB0aGVuOiBsaWIkZXM2JHByb21pc2UkdGhlbiQkZGVmYXVsdCxcblx0XG5cdCAgICAvKipcblx0ICAgICAgYGNhdGNoYCBpcyBzaW1wbHkgc3VnYXIgZm9yIGB0aGVuKHVuZGVmaW5lZCwgb25SZWplY3Rpb24pYCB3aGljaCBtYWtlcyBpdCB0aGUgc2FtZVxuXHQgICAgICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LlxuXHRcblx0ICAgICAgYGBganNcblx0ICAgICAgZnVuY3Rpb24gZmluZEF1dGhvcigpe1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGRuJ3QgZmluZCB0aGF0IGF1dGhvcicpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBzeW5jaHJvbm91c1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGZpbmRBdXRob3IoKTtcblx0ICAgICAgfSBjYXRjaChyZWFzb24pIHtcblx0ICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBhc3luYyB3aXRoIHByb21pc2VzXG5cdCAgICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuXHQgICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIEBtZXRob2QgY2F0Y2hcblx0ICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3Rpb25cblx0ICAgICAgVXNlZnVsIGZvciB0b29saW5nLlxuXHQgICAgICBAcmV0dXJuIHtQcm9taXNlfVxuXHQgICAgKi9cblx0ICAgICAgJ2NhdGNoJzogZnVuY3Rpb24ob25SZWplY3Rpb24pIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0aW9uKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yO1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IoQ29uc3RydWN0b3IsIGlucHV0KSB7XG5cdCAgICAgIHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3IgPSBDb25zdHJ1Y3Rvcjtcblx0ICAgICAgdGhpcy5wcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuXHRcblx0ICAgICAgaWYgKCF0aGlzLnByb21pc2VbbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUFJPTUlTRV9JRF0pIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRtYWtlUHJvbWlzZSh0aGlzLnByb21pc2UpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAobGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0FycmF5KGlucHV0KSkge1xuXHQgICAgICAgIHRoaXMuX2lucHV0ICAgICA9IGlucHV0O1xuXHQgICAgICAgIHRoaXMubGVuZ3RoICAgICA9IGlucHV0Lmxlbmd0aDtcblx0ICAgICAgICB0aGlzLl9yZW1haW5pbmcgPSBpbnB1dC5sZW5ndGg7XG5cdFxuXHQgICAgICAgIHRoaXMuX3Jlc3VsdCA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7XG5cdFxuXHQgICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5sZW5ndGggfHwgMDtcblx0ICAgICAgICAgIHRoaXMuX2VudW1lcmF0ZSgpO1xuXHQgICAgICAgICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuXHQgICAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHRoaXMucHJvbWlzZSwgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJHZhbGlkYXRpb25FcnJvcigpKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCR2YWxpZGF0aW9uRXJyb3IoKSB7XG5cdCAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpO1xuXHQgICAgfVxuXHRcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fZW51bWVyYXRlID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBsZW5ndGggID0gdGhpcy5sZW5ndGg7XG5cdCAgICAgIHZhciBpbnB1dCAgID0gdGhpcy5faW5wdXQ7XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gMDsgdGhpcy5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcgJiYgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgdGhpcy5fZWFjaEVudHJ5KGlucHV0W2ldLCBpKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX2VhY2hFbnRyeSA9IGZ1bmN0aW9uKGVudHJ5LCBpKSB7XG5cdCAgICAgIHZhciBjID0gdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3Rvcjtcblx0ICAgICAgdmFyIHJlc29sdmUgPSBjLnJlc29sdmU7XG5cdFxuXHQgICAgICBpZiAocmVzb2x2ZSA9PT0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdCkge1xuXHQgICAgICAgIHZhciB0aGVuID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZ2V0VGhlbihlbnRyeSk7XG5cdFxuXHQgICAgICAgIGlmICh0aGVuID09PSBsaWIkZXM2JHByb21pc2UkdGhlbiQkZGVmYXVsdCAmJlxuXHQgICAgICAgICAgICBlbnRyeS5fc3RhdGUgIT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHtcblx0ICAgICAgICAgIHRoaXMuX3NldHRsZWRBdChlbnRyeS5fc3RhdGUsIGksIGVudHJ5Ll9yZXN1bHQpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoZW4gIT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuXHQgICAgICAgICAgdGhpcy5fcmVzdWx0W2ldID0gZW50cnk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChjID09PSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdCkge1xuXHQgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgYyhsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgZW50cnksIHRoZW4pO1xuXHQgICAgICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KHByb21pc2UsIGkpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQobmV3IGMoZnVuY3Rpb24ocmVzb2x2ZSkgeyByZXNvbHZlKGVudHJ5KTsgfSksIGkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQocmVzb2x2ZShlbnRyeSksIGkpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fc2V0dGxlZEF0ID0gZnVuY3Rpb24oc3RhdGUsIGksIHZhbHVlKSB7XG5cdCAgICAgIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlO1xuXHRcblx0ICAgICAgaWYgKHByb21pc2UuX3N0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7XG5cdCAgICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG5cdFxuXHQgICAgICAgIGlmIChzdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQpIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IHZhbHVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX3dpbGxTZXR0bGVBdCA9IGZ1bmN0aW9uKHByb21pc2UsIGkpIHtcblx0ICAgICAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuXHRcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlKHByb21pc2UsIHVuZGVmaW5lZCwgZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgICBlbnVtZXJhdG9yLl9zZXR0bGVkQXQobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVELCBpLCB2YWx1ZSk7XG5cdCAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuXHQgICAgICAgIGVudW1lcmF0b3IuX3NldHRsZWRBdChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCwgaSwgcmVhc29uKTtcblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRwb2x5ZmlsbCgpIHtcblx0ICAgICAgdmFyIGxvY2FsO1xuXHRcblx0ICAgICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgICBsb2NhbCA9IGdsb2JhbDtcblx0ICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICAgIGxvY2FsID0gc2VsZjtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHQgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncG9seWZpbGwgZmFpbGVkIGJlY2F1c2UgZ2xvYmFsIG9iamVjdCBpcyB1bmF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBQID0gbG9jYWwuUHJvbWlzZTtcblx0XG5cdCAgICAgIGlmIChQICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChQLnJlc29sdmUoKSkgPT09ICdbb2JqZWN0IFByb21pc2VdJyAmJiAhUC5jYXN0KSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBsb2NhbC5Qcm9taXNlID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGRlZmF1bHQ7XG5cdCAgICB9XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRwb2x5ZmlsbDtcblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJHVtZCQkRVM2UHJvbWlzZSA9IHtcblx0ICAgICAgJ1Byb21pc2UnOiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdCxcblx0ICAgICAgJ3BvbHlmaWxsJzogbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRkZWZhdWx0XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qIGdsb2JhbCBkZWZpbmU6dHJ1ZSBtb2R1bGU6dHJ1ZSB3aW5kb3c6IHRydWUgKi9cblx0ICAgIGlmIChcImZ1bmN0aW9uXCIgPT09ICdmdW5jdGlvbicgJiYgX193ZWJwYWNrX3JlcXVpcmVfXygyMTgpWydhbWQnXSkge1xuXHQgICAgICAhKF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24oKSB7IHJldHVybiBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlOyB9LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXywgZXhwb3J0cywgbW9kdWxlKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGVbJ2V4cG9ydHMnXSkge1xuXHQgICAgICBtb2R1bGVbJ2V4cG9ydHMnXSA9IGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2U7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICB0aGlzWydFUzZQcm9taXNlJ10gPSBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlO1xuXHQgICAgfVxuXHRcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkZGVmYXVsdCgpO1xuXHR9KS5jYWxsKHRoaXMpO1xuXHRcblx0XG5cdFxuXHQvKioqIEVYUE9SVFMgRlJPTSBleHBvcnRzLWxvYWRlciAqKiovXG5cdG1vZHVsZS5leHBvcnRzID0gZ2xvYmFsLlByb21pc2U7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KSwgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSwgX193ZWJwYWNrX3JlcXVpcmVfXygyMTkpKG1vZHVsZSkpKVxuXG4vKioqLyB9LFxuLyogODQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihQcm9taXNlKSB7KGZ1bmN0aW9uKHNlbGYpIHtcblx0ICAndXNlIHN0cmljdCc7XG5cdFxuXHQgIGlmIChzZWxmLmZldGNoKSB7XG5cdCAgICByZXR1cm5cblx0ICB9XG5cdFxuXHQgIHZhciBzdXBwb3J0ID0ge1xuXHQgICAgc2VhcmNoUGFyYW1zOiAnVVJMU2VhcmNoUGFyYW1zJyBpbiBzZWxmLFxuXHQgICAgaXRlcmFibGU6ICdTeW1ib2wnIGluIHNlbGYgJiYgJ2l0ZXJhdG9yJyBpbiBTeW1ib2wsXG5cdCAgICBibG9iOiAnRmlsZVJlYWRlcicgaW4gc2VsZiAmJiAnQmxvYicgaW4gc2VsZiAmJiAoZnVuY3Rpb24oKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgbmV3IEJsb2IoKVxuXHQgICAgICAgIHJldHVybiB0cnVlXG5cdCAgICAgIH0gY2F0Y2goZSkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZVxuXHQgICAgICB9XG5cdCAgICB9KSgpLFxuXHQgICAgZm9ybURhdGE6ICdGb3JtRGF0YScgaW4gc2VsZixcblx0ICAgIGFycmF5QnVmZmVyOiAnQXJyYXlCdWZmZXInIGluIHNlbGZcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIG5vcm1hbGl6ZU5hbWUobmFtZSkge1xuXHQgICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xuXHQgICAgICBuYW1lID0gU3RyaW5nKG5hbWUpXG5cdCAgICB9XG5cdCAgICBpZiAoL1teYS16MC05XFwtIyQlJicqKy5cXF5fYHx+XS9pLnRlc3QobmFtZSkpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBjaGFyYWN0ZXIgaW4gaGVhZGVyIGZpZWxkIG5hbWUnKVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5hbWUudG9Mb3dlckNhc2UoKVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbm9ybWFsaXplVmFsdWUodmFsdWUpIHtcblx0ICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHZhbHVlID0gU3RyaW5nKHZhbHVlKVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHZhbHVlXG5cdCAgfVxuXHRcblx0ICAvLyBCdWlsZCBhIGRlc3RydWN0aXZlIGl0ZXJhdG9yIGZvciB0aGUgdmFsdWUgbGlzdFxuXHQgIGZ1bmN0aW9uIGl0ZXJhdG9yRm9yKGl0ZW1zKSB7XG5cdCAgICB2YXIgaXRlcmF0b3IgPSB7XG5cdCAgICAgIG5leHQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciB2YWx1ZSA9IGl0ZW1zLnNoaWZ0KClcblx0ICAgICAgICByZXR1cm4ge2RvbmU6IHZhbHVlID09PSB1bmRlZmluZWQsIHZhbHVlOiB2YWx1ZX1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG5cdCAgICAgIGl0ZXJhdG9yW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gaXRlcmF0b3Jcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBpdGVyYXRvclxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gSGVhZGVycyhoZWFkZXJzKSB7XG5cdCAgICB0aGlzLm1hcCA9IHt9XG5cdFxuXHQgICAgaWYgKGhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzKSB7XG5cdCAgICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuXHQgICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIHZhbHVlKVxuXHQgICAgICB9LCB0aGlzKVxuXHRcblx0ICAgIH0gZWxzZSBpZiAoaGVhZGVycykge1xuXHQgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhoZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgICAgICB0aGlzLmFwcGVuZChuYW1lLCBoZWFkZXJzW25hbWVdKVxuXHQgICAgICB9LCB0aGlzKVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcblx0ICAgIG5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpXG5cdCAgICB2YWx1ZSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKVxuXHQgICAgdmFyIGxpc3QgPSB0aGlzLm1hcFtuYW1lXVxuXHQgICAgaWYgKCFsaXN0KSB7XG5cdCAgICAgIGxpc3QgPSBbXVxuXHQgICAgICB0aGlzLm1hcFtuYW1lXSA9IGxpc3Rcblx0ICAgIH1cblx0ICAgIGxpc3QucHVzaCh2YWx1ZSlcblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlWydkZWxldGUnXSA9IGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgIGRlbGV0ZSB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuXHQgICAgdmFyIHZhbHVlcyA9IHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldXG5cdCAgICByZXR1cm4gdmFsdWVzID8gdmFsdWVzWzBdIDogbnVsbFxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUuZ2V0QWxsID0gZnVuY3Rpb24obmFtZSkge1xuXHQgICAgcmV0dXJuIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldIHx8IFtdXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihuYW1lKSB7XG5cdCAgICByZXR1cm4gdGhpcy5tYXAuaGFzT3duUHJvcGVydHkobm9ybWFsaXplTmFtZShuYW1lKSlcblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG5cdCAgICB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXSA9IFtub3JtYWxpemVWYWx1ZSh2YWx1ZSldXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24oY2FsbGJhY2ssIHRoaXNBcmcpIHtcblx0ICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMubWFwKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgICAgdGhpcy5tYXBbbmFtZV0uZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdmFsdWUsIG5hbWUsIHRoaXMpXG5cdCAgICAgIH0sIHRoaXMpXG5cdCAgICB9LCB0aGlzKVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGl0ZW1zID0gW11cblx0ICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkgeyBpdGVtcy5wdXNoKG5hbWUpIH0pXG5cdCAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS52YWx1ZXMgPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBpdGVtcyA9IFtdXG5cdCAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHsgaXRlbXMucHVzaCh2YWx1ZSkgfSlcblx0ICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXMgPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBpdGVtcyA9IFtdXG5cdCAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHsgaXRlbXMucHVzaChbbmFtZSwgdmFsdWVdKSB9KVxuXHQgICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuXHQgIH1cblx0XG5cdCAgaWYgKHN1cHBvcnQuaXRlcmFibGUpIHtcblx0ICAgIEhlYWRlcnMucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBIZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBjb25zdW1lZChib2R5KSB7XG5cdCAgICBpZiAoYm9keS5ib2R5VXNlZCkge1xuXHQgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcignQWxyZWFkeSByZWFkJykpXG5cdCAgICB9XG5cdCAgICBib2R5LmJvZHlVc2VkID0gdHJ1ZVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZmlsZVJlYWRlclJlYWR5KHJlYWRlcikge1xuXHQgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmVzb2x2ZShyZWFkZXIucmVzdWx0KVxuXHQgICAgICB9XG5cdCAgICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmVqZWN0KHJlYWRlci5lcnJvcilcblx0ICAgICAgfVxuXHQgICAgfSlcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHJlYWRCbG9iQXNBcnJheUJ1ZmZlcihibG9iKSB7XG5cdCAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuXHQgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2IpXG5cdCAgICByZXR1cm4gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHJlYWRCbG9iQXNUZXh0KGJsb2IpIHtcblx0ICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG5cdCAgICByZWFkZXIucmVhZEFzVGV4dChibG9iKVxuXHQgICAgcmV0dXJuIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBCb2R5KCkge1xuXHQgICAgdGhpcy5ib2R5VXNlZCA9IGZhbHNlXG5cdFxuXHQgICAgdGhpcy5faW5pdEJvZHkgPSBmdW5jdGlvbihib2R5KSB7XG5cdCAgICAgIHRoaXMuX2JvZHlJbml0ID0gYm9keVxuXHQgICAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5XG5cdCAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5ibG9iICYmIEJsb2IucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcblx0ICAgICAgICB0aGlzLl9ib2R5QmxvYiA9IGJvZHlcblx0ICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmZvcm1EYXRhICYmIEZvcm1EYXRhLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG5cdCAgICAgICAgdGhpcy5fYm9keUZvcm1EYXRhID0gYm9keVxuXHQgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuc2VhcmNoUGFyYW1zICYmIFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuXHQgICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keS50b1N0cmluZygpXG5cdCAgICAgIH0gZWxzZSBpZiAoIWJvZHkpIHtcblx0ICAgICAgICB0aGlzLl9ib2R5VGV4dCA9ICcnXG5cdCAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlciAmJiBBcnJheUJ1ZmZlci5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuXHQgICAgICAgIC8vIE9ubHkgc3VwcG9ydCBBcnJheUJ1ZmZlcnMgZm9yIFBPU1QgbWV0aG9kLlxuXHQgICAgICAgIC8vIFJlY2VpdmluZyBBcnJheUJ1ZmZlcnMgaGFwcGVucyB2aWEgQmxvYnMsIGluc3RlYWQuXG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bnN1cHBvcnRlZCBCb2R5SW5pdCB0eXBlJylcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCF0aGlzLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsICd0ZXh0L3BsYWluO2NoYXJzZXQ9VVRGLTgnKVxuXHQgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUJsb2IgJiYgdGhpcy5fYm9keUJsb2IudHlwZSkge1xuXHQgICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgdGhpcy5fYm9keUJsb2IudHlwZSlcblx0ICAgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuc2VhcmNoUGFyYW1zICYmIFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuXHQgICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04Jylcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAoc3VwcG9ydC5ibG9iKSB7XG5cdCAgICAgIHRoaXMuYmxvYiA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG5cdCAgICAgICAgaWYgKHJlamVjdGVkKSB7XG5cdCAgICAgICAgICByZXR1cm4gcmVqZWN0ZWRcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuXHQgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QmxvYilcblx0ICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlGb3JtRGF0YSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIGJsb2InKVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5VGV4dF0pKVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmJsb2IoKS50aGVuKHJlYWRCbG9iQXNBcnJheUJ1ZmZlcilcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy50ZXh0ID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcblx0ICAgICAgICBpZiAocmVqZWN0ZWQpIHtcblx0ICAgICAgICAgIHJldHVybiByZWplY3RlZFxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG5cdCAgICAgICAgICByZXR1cm4gcmVhZEJsb2JBc1RleHQodGhpcy5fYm9keUJsb2IpXG5cdCAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyB0ZXh0Jylcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMudGV4dCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG5cdCAgICAgICAgcmV0dXJuIHJlamVjdGVkID8gcmVqZWN0ZWQgOiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keVRleHQpXG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAoc3VwcG9ydC5mb3JtRGF0YSkge1xuXHQgICAgICB0aGlzLmZvcm1EYXRhID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oZGVjb2RlKVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5qc29uID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnRleHQoKS50aGVuKEpTT04ucGFyc2UpXG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHRoaXNcblx0ICB9XG5cdFxuXHQgIC8vIEhUVFAgbWV0aG9kcyB3aG9zZSBjYXBpdGFsaXphdGlvbiBzaG91bGQgYmUgbm9ybWFsaXplZFxuXHQgIHZhciBtZXRob2RzID0gWydERUxFVEUnLCAnR0VUJywgJ0hFQUQnLCAnT1BUSU9OUycsICdQT1NUJywgJ1BVVCddXG5cdFxuXHQgIGZ1bmN0aW9uIG5vcm1hbGl6ZU1ldGhvZChtZXRob2QpIHtcblx0ICAgIHZhciB1cGNhc2VkID0gbWV0aG9kLnRvVXBwZXJDYXNlKClcblx0ICAgIHJldHVybiAobWV0aG9kcy5pbmRleE9mKHVwY2FzZWQpID4gLTEpID8gdXBjYXNlZCA6IG1ldGhvZFxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gUmVxdWVzdChpbnB1dCwgb3B0aW9ucykge1xuXHQgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cblx0ICAgIHZhciBib2R5ID0gb3B0aW9ucy5ib2R5XG5cdCAgICBpZiAoUmVxdWVzdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihpbnB1dCkpIHtcblx0ICAgICAgaWYgKGlucHV0LmJvZHlVc2VkKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQWxyZWFkeSByZWFkJylcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLnVybCA9IGlucHV0LnVybFxuXHQgICAgICB0aGlzLmNyZWRlbnRpYWxzID0gaW5wdXQuY3JlZGVudGlhbHNcblx0ICAgICAgaWYgKCFvcHRpb25zLmhlYWRlcnMpIHtcblx0ICAgICAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhpbnB1dC5oZWFkZXJzKVxuXHQgICAgICB9XG5cdCAgICAgIHRoaXMubWV0aG9kID0gaW5wdXQubWV0aG9kXG5cdCAgICAgIHRoaXMubW9kZSA9IGlucHV0Lm1vZGVcblx0ICAgICAgaWYgKCFib2R5KSB7XG5cdCAgICAgICAgYm9keSA9IGlucHV0Ll9ib2R5SW5pdFxuXHQgICAgICAgIGlucHV0LmJvZHlVc2VkID0gdHJ1ZVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLnVybCA9IGlucHV0XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5jcmVkZW50aWFscyA9IG9wdGlvbnMuY3JlZGVudGlhbHMgfHwgdGhpcy5jcmVkZW50aWFscyB8fCAnb21pdCdcblx0ICAgIGlmIChvcHRpb25zLmhlYWRlcnMgfHwgIXRoaXMuaGVhZGVycykge1xuXHQgICAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpXG5cdCAgICB9XG5cdCAgICB0aGlzLm1ldGhvZCA9IG5vcm1hbGl6ZU1ldGhvZChvcHRpb25zLm1ldGhvZCB8fCB0aGlzLm1ldGhvZCB8fCAnR0VUJylcblx0ICAgIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCB0aGlzLm1vZGUgfHwgbnVsbFxuXHQgICAgdGhpcy5yZWZlcnJlciA9IG51bGxcblx0XG5cdCAgICBpZiAoKHRoaXMubWV0aG9kID09PSAnR0VUJyB8fCB0aGlzLm1ldGhvZCA9PT0gJ0hFQUQnKSAmJiBib2R5KSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzJylcblx0ICAgIH1cblx0ICAgIHRoaXMuX2luaXRCb2R5KGJvZHkpXG5cdCAgfVxuXHRcblx0ICBSZXF1ZXN0LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgcmV0dXJuIG5ldyBSZXF1ZXN0KHRoaXMpXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBkZWNvZGUoYm9keSkge1xuXHQgICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKVxuXHQgICAgYm9keS50cmltKCkuc3BsaXQoJyYnKS5mb3JFYWNoKGZ1bmN0aW9uKGJ5dGVzKSB7XG5cdCAgICAgIGlmIChieXRlcykge1xuXHQgICAgICAgIHZhciBzcGxpdCA9IGJ5dGVzLnNwbGl0KCc9Jylcblx0ICAgICAgICB2YXIgbmFtZSA9IHNwbGl0LnNoaWZ0KCkucmVwbGFjZSgvXFwrL2csICcgJylcblx0ICAgICAgICB2YXIgdmFsdWUgPSBzcGxpdC5qb2luKCc9JykucmVwbGFjZSgvXFwrL2csICcgJylcblx0ICAgICAgICBmb3JtLmFwcGVuZChkZWNvZGVVUklDb21wb25lbnQobmFtZSksIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpXG5cdCAgICAgIH1cblx0ICAgIH0pXG5cdCAgICByZXR1cm4gZm9ybVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaGVhZGVycyh4aHIpIHtcblx0ICAgIHZhciBoZWFkID0gbmV3IEhlYWRlcnMoKVxuXHQgICAgdmFyIHBhaXJzID0gKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSB8fCAnJykudHJpbSgpLnNwbGl0KCdcXG4nKVxuXHQgICAgcGFpcnMuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIpIHtcblx0ICAgICAgdmFyIHNwbGl0ID0gaGVhZGVyLnRyaW0oKS5zcGxpdCgnOicpXG5cdCAgICAgIHZhciBrZXkgPSBzcGxpdC5zaGlmdCgpLnRyaW0oKVxuXHQgICAgICB2YXIgdmFsdWUgPSBzcGxpdC5qb2luKCc6JykudHJpbSgpXG5cdCAgICAgIGhlYWQuYXBwZW5kKGtleSwgdmFsdWUpXG5cdCAgICB9KVxuXHQgICAgcmV0dXJuIGhlYWRcblx0ICB9XG5cdFxuXHQgIEJvZHkuY2FsbChSZXF1ZXN0LnByb3RvdHlwZSlcblx0XG5cdCAgZnVuY3Rpb24gUmVzcG9uc2UoYm9keUluaXQsIG9wdGlvbnMpIHtcblx0ICAgIGlmICghb3B0aW9ucykge1xuXHQgICAgICBvcHRpb25zID0ge31cblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLnR5cGUgPSAnZGVmYXVsdCdcblx0ICAgIHRoaXMuc3RhdHVzID0gb3B0aW9ucy5zdGF0dXNcblx0ICAgIHRoaXMub2sgPSB0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDBcblx0ICAgIHRoaXMuc3RhdHVzVGV4dCA9IG9wdGlvbnMuc3RhdHVzVGV4dFxuXHQgICAgdGhpcy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycyA/IG9wdGlvbnMuaGVhZGVycyA6IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcblx0ICAgIHRoaXMudXJsID0gb3B0aW9ucy51cmwgfHwgJydcblx0ICAgIHRoaXMuX2luaXRCb2R5KGJvZHlJbml0KVxuXHQgIH1cblx0XG5cdCAgQm9keS5jYWxsKFJlc3BvbnNlLnByb3RvdHlwZSlcblx0XG5cdCAgUmVzcG9uc2UucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gbmV3IFJlc3BvbnNlKHRoaXMuX2JvZHlJbml0LCB7XG5cdCAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG5cdCAgICAgIHN0YXR1c1RleHQ6IHRoaXMuc3RhdHVzVGV4dCxcblx0ICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnModGhpcy5oZWFkZXJzKSxcblx0ICAgICAgdXJsOiB0aGlzLnVybFxuXHQgICAgfSlcblx0ICB9XG5cdFxuXHQgIFJlc3BvbnNlLmVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogMCwgc3RhdHVzVGV4dDogJyd9KVxuXHQgICAgcmVzcG9uc2UudHlwZSA9ICdlcnJvcidcblx0ICAgIHJldHVybiByZXNwb25zZVxuXHQgIH1cblx0XG5cdCAgdmFyIHJlZGlyZWN0U3RhdHVzZXMgPSBbMzAxLCAzMDIsIDMwMywgMzA3LCAzMDhdXG5cdFxuXHQgIFJlc3BvbnNlLnJlZGlyZWN0ID0gZnVuY3Rpb24odXJsLCBzdGF0dXMpIHtcblx0ICAgIGlmIChyZWRpcmVjdFN0YXR1c2VzLmluZGV4T2Yoc3RhdHVzKSA9PT0gLTEpIHtcblx0ICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgc3RhdHVzIGNvZGUnKVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogc3RhdHVzLCBoZWFkZXJzOiB7bG9jYXRpb246IHVybH19KVxuXHQgIH1cblx0XG5cdCAgc2VsZi5IZWFkZXJzID0gSGVhZGVyc1xuXHQgIHNlbGYuUmVxdWVzdCA9IFJlcXVlc3Rcblx0ICBzZWxmLlJlc3BvbnNlID0gUmVzcG9uc2Vcblx0XG5cdCAgc2VsZi5mZXRjaCA9IGZ1bmN0aW9uKGlucHV0LCBpbml0KSB7XG5cdCAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgIHZhciByZXF1ZXN0XG5cdCAgICAgIGlmIChSZXF1ZXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGlucHV0KSAmJiAhaW5pdCkge1xuXHQgICAgICAgIHJlcXVlc3QgPSBpbnB1dFxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlcXVlc3QgPSBuZXcgUmVxdWVzdChpbnB1dCwgaW5pdClcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXG5cdFxuXHQgICAgICBmdW5jdGlvbiByZXNwb25zZVVSTCgpIHtcblx0ICAgICAgICBpZiAoJ3Jlc3BvbnNlVVJMJyBpbiB4aHIpIHtcblx0ICAgICAgICAgIHJldHVybiB4aHIucmVzcG9uc2VVUkxcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIEF2b2lkIHNlY3VyaXR5IHdhcm5pbmdzIG9uIGdldFJlc3BvbnNlSGVhZGVyIHdoZW4gbm90IGFsbG93ZWQgYnkgQ09SU1xuXHQgICAgICAgIGlmICgvXlgtUmVxdWVzdC1VUkw6L20udGVzdCh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKSB7XG5cdCAgICAgICAgICByZXR1cm4geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdYLVJlcXVlc3QtVVJMJylcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVyblxuXHQgICAgICB9XG5cdFxuXHQgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG5cdCAgICAgICAgICBzdGF0dXM6IHhoci5zdGF0dXMsXG5cdCAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dCxcblx0ICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoeGhyKSxcblx0ICAgICAgICAgIHVybDogcmVzcG9uc2VVUkwoKVxuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgYm9keSA9ICdyZXNwb25zZScgaW4geGhyID8geGhyLnJlc3BvbnNlIDogeGhyLnJlc3BvbnNlVGV4dFxuXHQgICAgICAgIHJlc29sdmUobmV3IFJlc3BvbnNlKGJvZHksIG9wdGlvbnMpKVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHhoci5vbnRpbWVvdXQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IGZhaWxlZCcpKVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB4aHIub3BlbihyZXF1ZXN0Lm1ldGhvZCwgcmVxdWVzdC51cmwsIHRydWUpXG5cdFxuXHQgICAgICBpZiAocmVxdWVzdC5jcmVkZW50aWFscyA9PT0gJ2luY2x1ZGUnKSB7XG5cdCAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWVcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCdyZXNwb25zZVR5cGUnIGluIHhociAmJiBzdXBwb3J0LmJsb2IpIHtcblx0ICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJlcXVlc3QuaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG5cdCAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIobmFtZSwgdmFsdWUpXG5cdCAgICAgIH0pXG5cdFxuXHQgICAgICB4aHIuc2VuZCh0eXBlb2YgcmVxdWVzdC5fYm9keUluaXQgPT09ICd1bmRlZmluZWQnID8gbnVsbCA6IHJlcXVlc3QuX2JvZHlJbml0KVxuXHQgICAgfSlcblx0ICB9XG5cdCAgc2VsZi5mZXRjaC5wb2x5ZmlsbCA9IHRydWVcblx0fSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMpO1xuXHRcblx0XG5cdC8qKiogRVhQT1JUUyBGUk9NIGV4cG9ydHMtbG9hZGVyICoqKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBzZWxmLmZldGNoO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg4MykpKVxuXG4vKioqLyB9LFxuLyogODUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJiNGRlMjlmZTQzYWM4NWVmMGI2NmY5YzdkZmM0NzRkMy5wbmdcIjtcblxuLyoqKi8gfSxcbi8qIDg2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2V0TmF0aXZlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KSxcblx0ICAgIHJvb3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xuXHR2YXIgRGF0YVZpZXcgPSBnZXROYXRpdmUocm9vdCwgJ0RhdGFWaWV3Jyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IERhdGFWaWV3O1xuXG5cbi8qKiovIH0sXG4vKiA4NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGhhc2hDbGVhciA9IF9fd2VicGFja19yZXF1aXJlX18oMTE4KSxcblx0ICAgIGhhc2hEZWxldGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOSksXG5cdCAgICBoYXNoR2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjApLFxuXHQgICAgaGFzaEhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIxKSxcblx0ICAgIGhhc2hTZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMik7XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIGhhc2ggb2JqZWN0LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG5cdCAqL1xuXHRmdW5jdGlvbiBIYXNoKGVudHJpZXMpIHtcblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgbGVuZ3RoID0gZW50cmllcyA/IGVudHJpZXMubGVuZ3RoIDogMDtcblx0XG5cdCAgdGhpcy5jbGVhcigpO1xuXHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcblx0ICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyBBZGQgbWV0aG9kcyB0byBgSGFzaGAuXG5cdEhhc2gucHJvdG90eXBlLmNsZWFyID0gaGFzaENsZWFyO1xuXHRIYXNoLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBoYXNoRGVsZXRlO1xuXHRIYXNoLnByb3RvdHlwZS5nZXQgPSBoYXNoR2V0O1xuXHRIYXNoLnByb3RvdHlwZS5oYXMgPSBoYXNoSGFzO1xuXHRIYXNoLnByb3RvdHlwZS5zZXQgPSBoYXNoU2V0O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBIYXNoO1xuXG5cbi8qKiovIH0sXG4vKiA4OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldE5hdGl2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNiksXG5cdCAgICByb290ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cblx0dmFyIFByb21pc2UgPSBnZXROYXRpdmUocm9vdCwgJ1Byb21pc2UnKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUHJvbWlzZTtcblxuXG4vKioqLyB9LFxuLyogODkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXROYXRpdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpLFxuXHQgICAgcm9vdCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG5cdHZhciBTZXQgPSBnZXROYXRpdmUocm9vdCwgJ1NldCcpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDkwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgTWFwQ2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KSxcblx0ICAgIHNldENhY2hlQWRkID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzgpLFxuXHQgICAgc2V0Q2FjaGVIYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOSk7XG5cdFxuXHQvKipcblx0ICpcblx0ICogQ3JlYXRlcyBhbiBhcnJheSBjYWNoZSBvYmplY3QgdG8gc3RvcmUgdW5pcXVlIHZhbHVlcy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFt2YWx1ZXNdIFRoZSB2YWx1ZXMgdG8gY2FjaGUuXG5cdCAqL1xuXHRmdW5jdGlvbiBTZXRDYWNoZSh2YWx1ZXMpIHtcblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgbGVuZ3RoID0gdmFsdWVzID8gdmFsdWVzLmxlbmd0aCA6IDA7XG5cdFxuXHQgIHRoaXMuX19kYXRhX18gPSBuZXcgTWFwQ2FjaGU7XG5cdCAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIHRoaXMuYWRkKHZhbHVlc1tpbmRleF0pO1xuXHQgIH1cblx0fVxuXHRcblx0Ly8gQWRkIG1ldGhvZHMgdG8gYFNldENhY2hlYC5cblx0U2V0Q2FjaGUucHJvdG90eXBlLmFkZCA9IFNldENhY2hlLnByb3RvdHlwZS5wdXNoID0gc2V0Q2FjaGVBZGQ7XG5cdFNldENhY2hlLnByb3RvdHlwZS5oYXMgPSBzZXRDYWNoZUhhcztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gU2V0Q2FjaGU7XG5cblxuLyoqKi8gfSxcbi8qIDkxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgcm9vdCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cblx0dmFyIFVpbnQ4QXJyYXkgPSByb290LlVpbnQ4QXJyYXk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFVpbnQ4QXJyYXk7XG5cblxuLyoqKi8gfSxcbi8qIDkyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2V0TmF0aXZlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KSxcblx0ICAgIHJvb3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xuXHR2YXIgV2Vha01hcCA9IGdldE5hdGl2ZShyb290LCAnV2Vha01hcCcpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBXZWFrTWFwO1xuXG5cbi8qKiovIH0sXG4vKiA5MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIEEgZmFzdGVyIGFsdGVybmF0aXZlIHRvIGBGdW5jdGlvbiNhcHBseWAsIHRoaXMgZnVuY3Rpb24gaW52b2tlcyBgZnVuY2Bcblx0ICogd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgYHRoaXNBcmdgIGFuZCB0aGUgYXJndW1lbnRzIG9mIGBhcmdzYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gaW52b2tlLlxuXHQgKiBAcGFyYW0geyp9IHRoaXNBcmcgVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cblx0ICogQHBhcmFtIHtBcnJheX0gYXJncyBUaGUgYXJndW1lbnRzIHRvIGludm9rZSBgZnVuY2Agd2l0aC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc3VsdCBvZiBgZnVuY2AuXG5cdCAqL1xuXHRmdW5jdGlvbiBhcHBseShmdW5jLCB0aGlzQXJnLCBhcmdzKSB7XG5cdCAgdmFyIGxlbmd0aCA9IGFyZ3MubGVuZ3RoO1xuXHQgIHN3aXRjaCAobGVuZ3RoKSB7XG5cdCAgICBjYXNlIDA6IHJldHVybiBmdW5jLmNhbGwodGhpc0FyZyk7XG5cdCAgICBjYXNlIDE6IHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYXJnc1swXSk7XG5cdCAgICBjYXNlIDI6IHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYXJnc1swXSwgYXJnc1sxXSk7XG5cdCAgICBjYXNlIDM6IHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG5cdCAgfVxuXHQgIHJldHVybiBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGFwcGx5O1xuXG5cbi8qKiovIH0sXG4vKiA5NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5zb21lYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWVcblx0ICogc2hvcnRoYW5kcy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtBcnJheX0gW2FycmF5XSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYXJyYXlTb21lKGFycmF5LCBwcmVkaWNhdGUpIHtcblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuXHRcblx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBhcnJheVNvbWU7XG5cblxuLyoqKi8gfSxcbi8qIDk1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xuXHR2YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmRlbGF5YCBhbmQgYF8uZGVmZXJgIHdoaWNoIGFjY2VwdHMgYW4gYXJyYXlcblx0ICogb2YgYGZ1bmNgIGFyZ3VtZW50cy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVsYXkuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB3YWl0IFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5IGludm9jYXRpb24uXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBhcmdzIFRoZSBhcmd1bWVudHMgdG8gcHJvdmlkZSB0byBgZnVuY2AuXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVyIGlkLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZURlbGF5KGZ1bmMsIHdhaXQsIGFyZ3MpIHtcblx0ICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuXHQgIH1cblx0ICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHsgZnVuYy5hcHBseSh1bmRlZmluZWQsIGFyZ3MpOyB9LCB3YWl0KTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlRGVsYXk7XG5cblxuLyoqKi8gfSxcbi8qIDk2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZmluZEluZGV4YCBhbmQgYF8uZmluZExhc3RJbmRleGAgd2l0aG91dFxuXHQgKiBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cblx0ICogQHBhcmFtIHtudW1iZXJ9IGZyb21JbmRleCBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LlxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSwgZWxzZSBgLTFgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUZpbmRJbmRleChhcnJheSwgcHJlZGljYXRlLCBmcm9tSW5kZXgsIGZyb21SaWdodCkge1xuXHQgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG5cdCAgICAgIGluZGV4ID0gZnJvbUluZGV4ICsgKGZyb21SaWdodCA/IDEgOiAtMSk7XG5cdFxuXHQgIHdoaWxlICgoZnJvbVJpZ2h0ID8gaW5kZXgtLSA6ICsraW5kZXggPCBsZW5ndGgpKSB7XG5cdCAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuXHQgICAgICByZXR1cm4gaW5kZXg7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiAtMTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlRmluZEluZGV4O1xuXG5cbi8qKiovIH0sXG4vKiA5NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmhhc0luYCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30ga2V5IFRoZSBrZXkgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VIYXNJbihvYmplY3QsIGtleSkge1xuXHQgIHJldHVybiBvYmplY3QgIT0gbnVsbCAmJiBrZXkgaW4gT2JqZWN0KG9iamVjdCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZUhhc0luO1xuXG5cbi8qKiovIH0sXG4vKiA5OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIFN0YWNrID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyksXG5cdCAgICBlcXVhbEFycmF5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzApLFxuXHQgICAgZXF1YWxCeVRhZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEwKSxcblx0ICAgIGVxdWFsT2JqZWN0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTExKSxcblx0ICAgIGdldFRhZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTE1KSxcblx0ICAgIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuXHQgICAgaXNIb3N0T2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSksXG5cdCAgICBpc1R5cGVkQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1NCk7XG5cdFxuXHQvKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cblx0dmFyIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcblx0ICAgIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcblx0ICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXHRcblx0LyoqXG5cdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxgIGZvciBhcnJheXMgYW5kIG9iamVjdHMgd2hpY2ggcGVyZm9ybXNcblx0ICogZGVlcCBjb21wYXJpc29ucyBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzIGVuYWJsaW5nIG9iamVjdHMgd2l0aCBjaXJjdWxhclxuXHQgKiByZWZlcmVuY2VzIHRvIGJlIGNvbXBhcmVkLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtiaXRtYXNrXSBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYFxuXHQgKiAgZm9yIG1vcmUgZGV0YWlscy5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtzdGFja10gVHJhY2tzIHRyYXZlcnNlZCBgb2JqZWN0YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VJc0VxdWFsRGVlcChvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSB7XG5cdCAgdmFyIG9iaklzQXJyID0gaXNBcnJheShvYmplY3QpLFxuXHQgICAgICBvdGhJc0FyciA9IGlzQXJyYXkob3RoZXIpLFxuXHQgICAgICBvYmpUYWcgPSBhcnJheVRhZyxcblx0ICAgICAgb3RoVGFnID0gYXJyYXlUYWc7XG5cdFxuXHQgIGlmICghb2JqSXNBcnIpIHtcblx0ICAgIG9ialRhZyA9IGdldFRhZyhvYmplY3QpO1xuXHQgICAgb2JqVGFnID0gb2JqVGFnID09IGFyZ3NUYWcgPyBvYmplY3RUYWcgOiBvYmpUYWc7XG5cdCAgfVxuXHQgIGlmICghb3RoSXNBcnIpIHtcblx0ICAgIG90aFRhZyA9IGdldFRhZyhvdGhlcik7XG5cdCAgICBvdGhUYWcgPSBvdGhUYWcgPT0gYXJnc1RhZyA/IG9iamVjdFRhZyA6IG90aFRhZztcblx0ICB9XG5cdCAgdmFyIG9iaklzT2JqID0gb2JqVGFnID09IG9iamVjdFRhZyAmJiAhaXNIb3N0T2JqZWN0KG9iamVjdCksXG5cdCAgICAgIG90aElzT2JqID0gb3RoVGFnID09IG9iamVjdFRhZyAmJiAhaXNIb3N0T2JqZWN0KG90aGVyKSxcblx0ICAgICAgaXNTYW1lVGFnID0gb2JqVGFnID09IG90aFRhZztcblx0XG5cdCAgaWYgKGlzU2FtZVRhZyAmJiAhb2JqSXNPYmopIHtcblx0ICAgIHN0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjayk7XG5cdCAgICByZXR1cm4gKG9iaklzQXJyIHx8IGlzVHlwZWRBcnJheShvYmplY3QpKVxuXHQgICAgICA/IGVxdWFsQXJyYXlzKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spXG5cdCAgICAgIDogZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCBvYmpUYWcsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xuXHQgIH1cblx0ICBpZiAoIShiaXRtYXNrICYgUEFSVElBTF9DT01QQVJFX0ZMQUcpKSB7XG5cdCAgICB2YXIgb2JqSXNXcmFwcGVkID0gb2JqSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsICdfX3dyYXBwZWRfXycpLFxuXHQgICAgICAgIG90aElzV3JhcHBlZCA9IG90aElzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsICdfX3dyYXBwZWRfXycpO1xuXHRcblx0ICAgIGlmIChvYmpJc1dyYXBwZWQgfHwgb3RoSXNXcmFwcGVkKSB7XG5cdCAgICAgIHZhciBvYmpVbndyYXBwZWQgPSBvYmpJc1dyYXBwZWQgPyBvYmplY3QudmFsdWUoKSA6IG9iamVjdCxcblx0ICAgICAgICAgIG90aFVud3JhcHBlZCA9IG90aElzV3JhcHBlZCA/IG90aGVyLnZhbHVlKCkgOiBvdGhlcjtcblx0XG5cdCAgICAgIHN0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjayk7XG5cdCAgICAgIHJldHVybiBlcXVhbEZ1bmMob2JqVW53cmFwcGVkLCBvdGhVbndyYXBwZWQsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKCFpc1NhbWVUYWcpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcblx0ICByZXR1cm4gZXF1YWxPYmplY3RzKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VJc0VxdWFsRGVlcDtcblxuXG4vKioqLyB9LFxuLyogOTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBTdGFjayA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpLFxuXHQgICAgYmFzZUlzRXF1YWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdC8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNvbXBhcmlzb24gc3R5bGVzLiAqL1xuXHR2YXIgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyA9IDEsXG5cdCAgICBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNNYXRjaGAgd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cblx0ICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IG9mIHByb3BlcnR5IHZhbHVlcyB0byBtYXRjaC5cblx0ICogQHBhcmFtIHtBcnJheX0gbWF0Y2hEYXRhIFRoZSBwcm9wZXJ0eSBuYW1lcywgdmFsdWVzLCBhbmQgY29tcGFyZSBmbGFncyB0byBtYXRjaC5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgb2JqZWN0YCBpcyBhIG1hdGNoLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlSXNNYXRjaChvYmplY3QsIHNvdXJjZSwgbWF0Y2hEYXRhLCBjdXN0b21pemVyKSB7XG5cdCAgdmFyIGluZGV4ID0gbWF0Y2hEYXRhLmxlbmd0aCxcblx0ICAgICAgbGVuZ3RoID0gaW5kZXgsXG5cdCAgICAgIG5vQ3VzdG9taXplciA9ICFjdXN0b21pemVyO1xuXHRcblx0ICBpZiAob2JqZWN0ID09IG51bGwpIHtcblx0ICAgIHJldHVybiAhbGVuZ3RoO1xuXHQgIH1cblx0ICBvYmplY3QgPSBPYmplY3Qob2JqZWN0KTtcblx0ICB3aGlsZSAoaW5kZXgtLSkge1xuXHQgICAgdmFyIGRhdGEgPSBtYXRjaERhdGFbaW5kZXhdO1xuXHQgICAgaWYgKChub0N1c3RvbWl6ZXIgJiYgZGF0YVsyXSlcblx0ICAgICAgICAgID8gZGF0YVsxXSAhPT0gb2JqZWN0W2RhdGFbMF1dXG5cdCAgICAgICAgICA6ICEoZGF0YVswXSBpbiBvYmplY3QpXG5cdCAgICAgICAgKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIGRhdGEgPSBtYXRjaERhdGFbaW5kZXhdO1xuXHQgICAgdmFyIGtleSA9IGRhdGFbMF0sXG5cdCAgICAgICAgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcblx0ICAgICAgICBzcmNWYWx1ZSA9IGRhdGFbMV07XG5cdFxuXHQgICAgaWYgKG5vQ3VzdG9taXplciAmJiBkYXRhWzJdKSB7XG5cdCAgICAgIGlmIChvYmpWYWx1ZSA9PT0gdW5kZWZpbmVkICYmICEoa2V5IGluIG9iamVjdCkpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBzdGFjayA9IG5ldyBTdGFjaztcblx0ICAgICAgaWYgKGN1c3RvbWl6ZXIpIHtcblx0ICAgICAgICB2YXIgcmVzdWx0ID0gY3VzdG9taXplcihvYmpWYWx1ZSwgc3JjVmFsdWUsIGtleSwgb2JqZWN0LCBzb3VyY2UsIHN0YWNrKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoIShyZXN1bHQgPT09IHVuZGVmaW5lZFxuXHQgICAgICAgICAgICA/IGJhc2VJc0VxdWFsKHNyY1ZhbHVlLCBvYmpWYWx1ZSwgY3VzdG9taXplciwgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyB8IFBBUlRJQUxfQ09NUEFSRV9GTEFHLCBzdGFjaylcblx0ICAgICAgICAgICAgOiByZXN1bHRcblx0ICAgICAgICAgICkpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZUlzTWF0Y2g7XG5cblxuLyoqKi8gfSxcbi8qIDEwMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KSxcblx0ICAgIGlzSG9zdE9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpLFxuXHQgICAgaXNNYXNrZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNSksXG5cdCAgICBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNyksXG5cdCAgICB0b1NvdXJjZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpO1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gbWF0Y2ggYFJlZ0V4cGBcblx0ICogW3N5bnRheCBjaGFyYWN0ZXJzXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1wYXR0ZXJucykuXG5cdCAqL1xuXHR2YXIgcmVSZWdFeHBDaGFyID0gL1tcXFxcXiQuKis/KClbXFxde318XS9nO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IGhvc3QgY29uc3RydWN0b3JzIChTYWZhcmkpLiAqL1xuXHR2YXIgcmVJc0hvc3RDdG9yID0gL15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLztcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGRlY29tcGlsZWQgc291cmNlIG9mIGZ1bmN0aW9ucy4gKi9cblx0dmFyIGZ1bmNUb1N0cmluZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZztcblx0XG5cdC8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBpZiBhIG1ldGhvZCBpcyBuYXRpdmUuICovXG5cdHZhciByZUlzTmF0aXZlID0gUmVnRXhwKCdeJyArXG5cdCAgZnVuY1RvU3RyaW5nLmNhbGwoaGFzT3duUHJvcGVydHkpLnJlcGxhY2UocmVSZWdFeHBDaGFyLCAnXFxcXCQmJylcblx0ICAucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZywgJyQxLio/JykgKyAnJCdcblx0KTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc05hdGl2ZWAgd2l0aG91dCBiYWQgc2hpbSBjaGVja3MuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbixcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VJc05hdGl2ZSh2YWx1ZSkge1xuXHQgIGlmICghaXNPYmplY3QodmFsdWUpIHx8IGlzTWFza2VkKHZhbHVlKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICB2YXIgcGF0dGVybiA9IChpc0Z1bmN0aW9uKHZhbHVlKSB8fCBpc0hvc3RPYmplY3QodmFsdWUpKSA/IHJlSXNOYXRpdmUgOiByZUlzSG9zdEN0b3I7XG5cdCAgcmV0dXJuIHBhdHRlcm4udGVzdCh0b1NvdXJjZSh2YWx1ZSkpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VJc05hdGl2ZTtcblxuXG4vKioqLyB9LFxuLyogMTAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZU1hdGNoZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMyksXG5cdCAgICBiYXNlTWF0Y2hlc1Byb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDQpLFxuXHQgICAgaWRlbnRpdHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MiksXG5cdCAgICBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KSxcblx0ICAgIHByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTcpO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLml0ZXJhdGVlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSBbdmFsdWU9Xy5pZGVudGl0eV0gVGhlIHZhbHVlIHRvIGNvbnZlcnQgdG8gYW4gaXRlcmF0ZWUuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgaXRlcmF0ZWUuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlSXRlcmF0ZWUodmFsdWUpIHtcblx0ICAvLyBEb24ndCBzdG9yZSB0aGUgYHR5cGVvZmAgcmVzdWx0IGluIGEgdmFyaWFibGUgdG8gYXZvaWQgYSBKSVQgYnVnIGluIFNhZmFyaSA5LlxuXHQgIC8vIFNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTU2MDM0IGZvciBtb3JlIGRldGFpbHMuXG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfVxuXHQgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG5cdCAgICByZXR1cm4gaWRlbnRpdHk7XG5cdCAgfVxuXHQgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcpIHtcblx0ICAgIHJldHVybiBpc0FycmF5KHZhbHVlKVxuXHQgICAgICA/IGJhc2VNYXRjaGVzUHJvcGVydHkodmFsdWVbMF0sIHZhbHVlWzFdKVxuXHQgICAgICA6IGJhc2VNYXRjaGVzKHZhbHVlKTtcblx0ICB9XG5cdCAgcmV0dXJuIHByb3BlcnR5KHZhbHVlKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlSXRlcmF0ZWU7XG5cblxuLyoqKi8gfSxcbi8qIDEwMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xuXHR2YXIgbmF0aXZlS2V5cyA9IE9iamVjdC5rZXlzO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmtleXNgIHdoaWNoIGRvZXNuJ3Qgc2tpcCB0aGUgY29uc3RydWN0b3Jcblx0ICogcHJvcGVydHkgb2YgcHJvdG90eXBlcyBvciB0cmVhdCBzcGFyc2UgYXJyYXlzIGFzIGRlbnNlLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlS2V5cyhvYmplY3QpIHtcblx0ICByZXR1cm4gbmF0aXZlS2V5cyhPYmplY3Qob2JqZWN0KSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZUtleXM7XG5cblxuLyoqKi8gfSxcbi8qIDEwMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VJc01hdGNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSksXG5cdCAgICBnZXRNYXRjaERhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMyksXG5cdCAgICBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1hdGNoZXNgIHdoaWNoIGRvZXNuJ3QgY2xvbmUgYHNvdXJjZWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHNwZWMgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlTWF0Y2hlcyhzb3VyY2UpIHtcblx0ICB2YXIgbWF0Y2hEYXRhID0gZ2V0TWF0Y2hEYXRhKHNvdXJjZSk7XG5cdCAgaWYgKG1hdGNoRGF0YS5sZW5ndGggPT0gMSAmJiBtYXRjaERhdGFbMF1bMl0pIHtcblx0ICAgIHJldHVybiBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZShtYXRjaERhdGFbMF1bMF0sIG1hdGNoRGF0YVswXVsxXSk7XG5cdCAgfVxuXHQgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcblx0ICAgIHJldHVybiBvYmplY3QgPT09IHNvdXJjZSB8fCBiYXNlSXNNYXRjaChvYmplY3QsIHNvdXJjZSwgbWF0Y2hEYXRhKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VNYXRjaGVzO1xuXG5cbi8qKiovIH0sXG4vKiAxMDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlSXNFcXVhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpLFxuXHQgICAgZ2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTApLFxuXHQgICAgaGFzSW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MSksXG5cdCAgICBpc0tleSA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpLFxuXHQgICAgaXNTdHJpY3RDb21wYXJhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyksXG5cdCAgICBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpLFxuXHQgICAgdG9LZXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdC8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNvbXBhcmlzb24gc3R5bGVzLiAqL1xuXHR2YXIgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyA9IDEsXG5cdCAgICBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWF0Y2hlc1Byb3BlcnR5YCB3aGljaCBkb2Vzbid0IGNsb25lIGBzcmNWYWx1ZWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdCAqIEBwYXJhbSB7Kn0gc3JjVmFsdWUgVGhlIHZhbHVlIHRvIG1hdGNoLlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzcGVjIGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZU1hdGNoZXNQcm9wZXJ0eShwYXRoLCBzcmNWYWx1ZSkge1xuXHQgIGlmIChpc0tleShwYXRoKSAmJiBpc1N0cmljdENvbXBhcmFibGUoc3JjVmFsdWUpKSB7XG5cdCAgICByZXR1cm4gbWF0Y2hlc1N0cmljdENvbXBhcmFibGUodG9LZXkocGF0aCksIHNyY1ZhbHVlKTtcblx0ICB9XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuXHQgICAgdmFyIG9ialZhbHVlID0gZ2V0KG9iamVjdCwgcGF0aCk7XG5cdCAgICByZXR1cm4gKG9ialZhbHVlID09PSB1bmRlZmluZWQgJiYgb2JqVmFsdWUgPT09IHNyY1ZhbHVlKVxuXHQgICAgICA/IGhhc0luKG9iamVjdCwgcGF0aClcblx0ICAgICAgOiBiYXNlSXNFcXVhbChzcmNWYWx1ZSwgb2JqVmFsdWUsIHVuZGVmaW5lZCwgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyB8IFBBUlRJQUxfQ09NUEFSRV9GTEFHKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VNYXRjaGVzUHJvcGVydHk7XG5cblxuLyoqKi8gfSxcbi8qIDEwNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VHZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdC8qKlxuXHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VQcm9wZXJ0eWAgd2hpY2ggc3VwcG9ydHMgZGVlcCBwYXRocy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYWNjZXNzb3IgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlUHJvcGVydHlEZWVwKHBhdGgpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG5cdCAgICByZXR1cm4gYmFzZUdldChvYmplY3QsIHBhdGgpO1xuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZVByb3BlcnR5RGVlcDtcblxuXG4vKioqLyB9LFxuLyogMTA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udGltZXNgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kc1xuXHQgKiBvciBtYXggYXJyYXkgbGVuZ3RoIGNoZWNrcy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiB0aW1lcyB0byBpbnZva2UgYGl0ZXJhdGVlYC5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiByZXN1bHRzLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZVRpbWVzKG4sIGl0ZXJhdGVlKSB7XG5cdCAgdmFyIGluZGV4ID0gLTEsXG5cdCAgICAgIHJlc3VsdCA9IEFycmF5KG4pO1xuXHRcblx0ICB3aGlsZSAoKytpbmRleCA8IG4pIHtcblx0ICAgIHJlc3VsdFtpbmRleF0gPSBpdGVyYXRlZShpbmRleCk7XG5cdCAgfVxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZVRpbWVzO1xuXG5cbi8qKiovIH0sXG4vKiAxMDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBTeW1ib2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KSxcblx0ICAgIGlzU3ltYm9sID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdFxuXHQvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cblx0dmFyIElORklOSVRZID0gMSAvIDA7XG5cdFxuXHQvKiogVXNlZCB0byBjb252ZXJ0IHN5bWJvbHMgdG8gcHJpbWl0aXZlcyBhbmQgc3RyaW5ncy4gKi9cblx0dmFyIHN5bWJvbFByb3RvID0gU3ltYm9sID8gU3ltYm9sLnByb3RvdHlwZSA6IHVuZGVmaW5lZCxcblx0ICAgIHN5bWJvbFRvU3RyaW5nID0gc3ltYm9sUHJvdG8gPyBzeW1ib2xQcm90by50b1N0cmluZyA6IHVuZGVmaW5lZDtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50b1N0cmluZ2Agd2hpY2ggZG9lc24ndCBjb252ZXJ0IG51bGxpc2hcblx0ICogdmFsdWVzIHRvIGVtcHR5IHN0cmluZ3MuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VUb1N0cmluZyh2YWx1ZSkge1xuXHQgIC8vIEV4aXQgZWFybHkgZm9yIHN0cmluZ3MgdG8gYXZvaWQgYSBwZXJmb3JtYW5jZSBoaXQgaW4gc29tZSBlbnZpcm9ubWVudHMuXG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG5cdCAgICByZXR1cm4gc3ltYm9sVG9TdHJpbmcgPyBzeW1ib2xUb1N0cmluZy5jYWxsKHZhbHVlKSA6ICcnO1xuXHQgIH1cblx0ICB2YXIgcmVzdWx0ID0gKHZhbHVlICsgJycpO1xuXHQgIHJldHVybiAocmVzdWx0ID09ICcwJyAmJiAoMSAvIHZhbHVlKSA9PSAtSU5GSU5JVFkpID8gJy0wJyA6IHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlVG9TdHJpbmc7XG5cblxuLyoqKi8gfSxcbi8qIDEwOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgZ2xvYmFsIG9iamVjdC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtudWxsfE9iamVjdH0gUmV0dXJucyBgdmFsdWVgIGlmIGl0J3MgYSBnbG9iYWwgb2JqZWN0LCBlbHNlIGBudWxsYC5cblx0ICovXG5cdGZ1bmN0aW9uIGNoZWNrR2xvYmFsKHZhbHVlKSB7XG5cdCAgcmV0dXJuICh2YWx1ZSAmJiB2YWx1ZS5PYmplY3QgPT09IE9iamVjdCkgPyB2YWx1ZSA6IG51bGw7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gY2hlY2tHbG9iYWw7XG5cblxuLyoqKi8gfSxcbi8qIDEwOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHJvb3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IG92ZXJyZWFjaGluZyBjb3JlLWpzIHNoaW1zLiAqL1xuXHR2YXIgY29yZUpzRGF0YSA9IHJvb3RbJ19fY29yZS1qc19zaGFyZWRfXyddO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBjb3JlSnNEYXRhO1xuXG5cbi8qKiovIH0sXG4vKiAxMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBTeW1ib2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KSxcblx0ICAgIFVpbnQ4QXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkxKSxcblx0ICAgIGVxdWFsQXJyYXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCksXG5cdCAgICBtYXBUb0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzcpLFxuXHQgICAgc2V0VG9BcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQwKTtcblx0XG5cdC8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNvbXBhcmlzb24gc3R5bGVzLiAqL1xuXHR2YXIgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyA9IDEsXG5cdCAgICBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cdFxuXHQvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG5cdHZhciBib29sVGFnID0gJ1tvYmplY3QgQm9vbGVhbl0nLFxuXHQgICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcblx0ICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJyxcblx0ICAgIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuXHQgICAgbnVtYmVyVGFnID0gJ1tvYmplY3QgTnVtYmVyXScsXG5cdCAgICByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJyxcblx0ICAgIHNldFRhZyA9ICdbb2JqZWN0IFNldF0nLFxuXHQgICAgc3RyaW5nVGFnID0gJ1tvYmplY3QgU3RyaW5nXScsXG5cdCAgICBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblx0XG5cdHZhciBhcnJheUJ1ZmZlclRhZyA9ICdbb2JqZWN0IEFycmF5QnVmZmVyXScsXG5cdCAgICBkYXRhVmlld1RhZyA9ICdbb2JqZWN0IERhdGFWaWV3XSc7XG5cdFxuXHQvKiogVXNlZCB0byBjb252ZXJ0IHN5bWJvbHMgdG8gcHJpbWl0aXZlcyBhbmQgc3RyaW5ncy4gKi9cblx0dmFyIHN5bWJvbFByb3RvID0gU3ltYm9sID8gU3ltYm9sLnByb3RvdHlwZSA6IHVuZGVmaW5lZCxcblx0ICAgIHN5bWJvbFZhbHVlT2YgPSBzeW1ib2xQcm90byA/IHN5bWJvbFByb3RvLnZhbHVlT2YgOiB1bmRlZmluZWQ7XG5cdFxuXHQvKipcblx0ICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBjb21wYXJpbmcgb2JqZWN0cyBvZlxuXHQgKiB0aGUgc2FtZSBgdG9TdHJpbmdUYWdgLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBvbmx5IHN1cHBvcnRzIGNvbXBhcmluZyB2YWx1ZXMgd2l0aCB0YWdzIG9mXG5cdCAqIGBCb29sZWFuYCwgYERhdGVgLCBgRXJyb3JgLCBgTnVtYmVyYCwgYFJlZ0V4cGAsIG9yIGBTdHJpbmdgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtzdHJpbmd9IHRhZyBUaGUgYHRvU3RyaW5nVGFnYCBvZiB0aGUgb2JqZWN0cyB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cblx0ICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgb2YgY29tcGFyaXNvbiBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGBcblx0ICogIGZvciBtb3JlIGRldGFpbHMuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzdGFjayBUcmFja3MgdHJhdmVyc2VkIGBvYmplY3RgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCB0YWcsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcblx0ICBzd2l0Y2ggKHRhZykge1xuXHQgICAgY2FzZSBkYXRhVmlld1RhZzpcblx0ICAgICAgaWYgKChvYmplY3QuYnl0ZUxlbmd0aCAhPSBvdGhlci5ieXRlTGVuZ3RoKSB8fFxuXHQgICAgICAgICAgKG9iamVjdC5ieXRlT2Zmc2V0ICE9IG90aGVyLmJ5dGVPZmZzZXQpKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICAgIG9iamVjdCA9IG9iamVjdC5idWZmZXI7XG5cdCAgICAgIG90aGVyID0gb3RoZXIuYnVmZmVyO1xuXHRcblx0ICAgIGNhc2UgYXJyYXlCdWZmZXJUYWc6XG5cdCAgICAgIGlmICgob2JqZWN0LmJ5dGVMZW5ndGggIT0gb3RoZXIuYnl0ZUxlbmd0aCkgfHxcblx0ICAgICAgICAgICFlcXVhbEZ1bmMobmV3IFVpbnQ4QXJyYXkob2JqZWN0KSwgbmV3IFVpbnQ4QXJyYXkob3RoZXIpKSkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0XG5cdCAgICBjYXNlIGJvb2xUYWc6XG5cdCAgICBjYXNlIGRhdGVUYWc6XG5cdCAgICAgIC8vIENvZXJjZSBkYXRlcyBhbmQgYm9vbGVhbnMgdG8gbnVtYmVycywgZGF0ZXMgdG8gbWlsbGlzZWNvbmRzIGFuZFxuXHQgICAgICAvLyBib29sZWFucyB0byBgMWAgb3IgYDBgIHRyZWF0aW5nIGludmFsaWQgZGF0ZXMgY29lcmNlZCB0byBgTmFOYCBhc1xuXHQgICAgICAvLyBub3QgZXF1YWwuXG5cdCAgICAgIHJldHVybiArb2JqZWN0ID09ICtvdGhlcjtcblx0XG5cdCAgICBjYXNlIGVycm9yVGFnOlxuXHQgICAgICByZXR1cm4gb2JqZWN0Lm5hbWUgPT0gb3RoZXIubmFtZSAmJiBvYmplY3QubWVzc2FnZSA9PSBvdGhlci5tZXNzYWdlO1xuXHRcblx0ICAgIGNhc2UgbnVtYmVyVGFnOlxuXHQgICAgICAvLyBUcmVhdCBgTmFOYCB2cy4gYE5hTmAgYXMgZXF1YWwuXG5cdCAgICAgIHJldHVybiAob2JqZWN0ICE9ICtvYmplY3QpID8gb3RoZXIgIT0gK290aGVyIDogb2JqZWN0ID09ICtvdGhlcjtcblx0XG5cdCAgICBjYXNlIHJlZ2V4cFRhZzpcblx0ICAgIGNhc2Ugc3RyaW5nVGFnOlxuXHQgICAgICAvLyBDb2VyY2UgcmVnZXhlcyB0byBzdHJpbmdzIGFuZCB0cmVhdCBzdHJpbmdzLCBwcmltaXRpdmVzIGFuZCBvYmplY3RzLFxuXHQgICAgICAvLyBhcyBlcXVhbC4gU2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1yZWdleHAucHJvdG90eXBlLnRvc3RyaW5nXG5cdCAgICAgIC8vIGZvciBtb3JlIGRldGFpbHMuXG5cdCAgICAgIHJldHVybiBvYmplY3QgPT0gKG90aGVyICsgJycpO1xuXHRcblx0ICAgIGNhc2UgbWFwVGFnOlxuXHQgICAgICB2YXIgY29udmVydCA9IG1hcFRvQXJyYXk7XG5cdFxuXHQgICAgY2FzZSBzZXRUYWc6XG5cdCAgICAgIHZhciBpc1BhcnRpYWwgPSBiaXRtYXNrICYgUEFSVElBTF9DT01QQVJFX0ZMQUc7XG5cdCAgICAgIGNvbnZlcnQgfHwgKGNvbnZlcnQgPSBzZXRUb0FycmF5KTtcblx0XG5cdCAgICAgIGlmIChvYmplY3Quc2l6ZSAhPSBvdGhlci5zaXplICYmICFpc1BhcnRpYWwpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuXHQgICAgICB2YXIgc3RhY2tlZCA9IHN0YWNrLmdldChvYmplY3QpO1xuXHQgICAgICBpZiAoc3RhY2tlZCkge1xuXHQgICAgICAgIHJldHVybiBzdGFja2VkID09IG90aGVyO1xuXHQgICAgICB9XG5cdCAgICAgIGJpdG1hc2sgfD0gVU5PUkRFUkVEX0NPTVBBUkVfRkxBRztcblx0ICAgICAgc3RhY2suc2V0KG9iamVjdCwgb3RoZXIpO1xuXHRcblx0ICAgICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG5cdCAgICAgIHJldHVybiBlcXVhbEFycmF5cyhjb252ZXJ0KG9iamVjdCksIGNvbnZlcnQob3RoZXIpLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKTtcblx0XG5cdCAgICBjYXNlIHN5bWJvbFRhZzpcblx0ICAgICAgaWYgKHN5bWJvbFZhbHVlT2YpIHtcblx0ICAgICAgICByZXR1cm4gc3ltYm9sVmFsdWVPZi5jYWxsKG9iamVjdCkgPT0gc3ltYm9sVmFsdWVPZi5jYWxsKG90aGVyKTtcblx0ICAgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gZmFsc2U7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZXF1YWxCeVRhZztcblxuXG4vKioqLyB9LFxuLyogMTExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZUhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpLFxuXHQgICAga2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHRcblx0LyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG5cdHZhciBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cdFxuXHQvKipcblx0ICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBvYmplY3RzIHdpdGggc3VwcG9ydCBmb3Jcblx0ICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIG9mIGNvbXBhcmlzb24gZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgXG5cdCAqICBmb3IgbW9yZSBkZXRhaWxzLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gc3RhY2sgVHJhY2tzIHRyYXZlcnNlZCBgb2JqZWN0YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGVxdWFsT2JqZWN0cyhvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSB7XG5cdCAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRyxcblx0ICAgICAgb2JqUHJvcHMgPSBrZXlzKG9iamVjdCksXG5cdCAgICAgIG9iakxlbmd0aCA9IG9ialByb3BzLmxlbmd0aCxcblx0ICAgICAgb3RoUHJvcHMgPSBrZXlzKG90aGVyKSxcblx0ICAgICAgb3RoTGVuZ3RoID0gb3RoUHJvcHMubGVuZ3RoO1xuXHRcblx0ICBpZiAob2JqTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhaXNQYXJ0aWFsKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciBpbmRleCA9IG9iakxlbmd0aDtcblx0ICB3aGlsZSAoaW5kZXgtLSkge1xuXHQgICAgdmFyIGtleSA9IG9ialByb3BzW2luZGV4XTtcblx0ICAgIGlmICghKGlzUGFydGlhbCA/IGtleSBpbiBvdGhlciA6IGJhc2VIYXMob3RoZXIsIGtleSkpKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuXHQgIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KG9iamVjdCk7XG5cdCAgaWYgKHN0YWNrZWQpIHtcblx0ICAgIHJldHVybiBzdGFja2VkID09IG90aGVyO1xuXHQgIH1cblx0ICB2YXIgcmVzdWx0ID0gdHJ1ZTtcblx0ICBzdGFjay5zZXQob2JqZWN0LCBvdGhlcik7XG5cdFxuXHQgIHZhciBza2lwQ3RvciA9IGlzUGFydGlhbDtcblx0ICB3aGlsZSAoKytpbmRleCA8IG9iakxlbmd0aCkge1xuXHQgICAga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuXHQgICAgdmFyIG9ialZhbHVlID0gb2JqZWN0W2tleV0sXG5cdCAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltrZXldO1xuXHRcblx0ICAgIGlmIChjdXN0b21pemVyKSB7XG5cdCAgICAgIHZhciBjb21wYXJlZCA9IGlzUGFydGlhbFxuXHQgICAgICAgID8gY3VzdG9taXplcihvdGhWYWx1ZSwgb2JqVmFsdWUsIGtleSwgb3RoZXIsIG9iamVjdCwgc3RhY2spXG5cdCAgICAgICAgOiBjdXN0b21pemVyKG9ialZhbHVlLCBvdGhWYWx1ZSwga2V5LCBvYmplY3QsIG90aGVyLCBzdGFjayk7XG5cdCAgICB9XG5cdCAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cblx0ICAgIGlmICghKGNvbXBhcmVkID09PSB1bmRlZmluZWRcblx0ICAgICAgICAgID8gKG9ialZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMob2JqVmFsdWUsIG90aFZhbHVlLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykpXG5cdCAgICAgICAgICA6IGNvbXBhcmVkXG5cdCAgICAgICAgKSkge1xuXHQgICAgICByZXN1bHQgPSBmYWxzZTtcblx0ICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdCAgICBza2lwQ3RvciB8fCAoc2tpcEN0b3IgPSBrZXkgPT0gJ2NvbnN0cnVjdG9yJyk7XG5cdCAgfVxuXHQgIGlmIChyZXN1bHQgJiYgIXNraXBDdG9yKSB7XG5cdCAgICB2YXIgb2JqQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3Rvcixcblx0ICAgICAgICBvdGhDdG9yID0gb3RoZXIuY29uc3RydWN0b3I7XG5cdFxuXHQgICAgLy8gTm9uIGBPYmplY3RgIG9iamVjdCBpbnN0YW5jZXMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1YWwuXG5cdCAgICBpZiAob2JqQ3RvciAhPSBvdGhDdG9yICYmXG5cdCAgICAgICAgKCdjb25zdHJ1Y3RvcicgaW4gb2JqZWN0ICYmICdjb25zdHJ1Y3RvcicgaW4gb3RoZXIpICYmXG5cdCAgICAgICAgISh0eXBlb2Ygb2JqQ3RvciA9PSAnZnVuY3Rpb24nICYmIG9iakN0b3IgaW5zdGFuY2VvZiBvYmpDdG9yICYmXG5cdCAgICAgICAgICB0eXBlb2Ygb3RoQ3RvciA9PSAnZnVuY3Rpb24nICYmIG90aEN0b3IgaW5zdGFuY2VvZiBvdGhDdG9yKSkge1xuXHQgICAgICByZXN1bHQgPSBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgc3RhY2tbJ2RlbGV0ZSddKG9iamVjdCk7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBlcXVhbE9iamVjdHM7XG5cblxuLyoqKi8gfSxcbi8qIDExMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIFwibGVuZ3RoXCIgcHJvcGVydHkgdmFsdWUgb2YgYG9iamVjdGAuXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gYXZvaWQgYVxuXHQgKiBbSklUIGJ1Z10oaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE0Mjc5MikgdGhhdCBhZmZlY3RzXG5cdCAqIFNhZmFyaSBvbiBhdCBsZWFzdCBpT1MgOC4xLTguMyBBUk02NC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgXCJsZW5ndGhcIiB2YWx1ZS5cblx0ICovXG5cdHZhciBnZXRMZW5ndGggPSBiYXNlUHJvcGVydHkoJ2xlbmd0aCcpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXRMZW5ndGg7XG5cblxuLyoqKi8gfSxcbi8qIDExMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzU3RyaWN0Q29tcGFyYWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpLFxuXHQgICAga2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIHByb3BlcnR5IG5hbWVzLCB2YWx1ZXMsIGFuZCBjb21wYXJlIGZsYWdzIG9mIGBvYmplY3RgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbWF0Y2ggZGF0YSBvZiBgb2JqZWN0YC5cblx0ICovXG5cdGZ1bmN0aW9uIGdldE1hdGNoRGF0YShvYmplY3QpIHtcblx0ICB2YXIgcmVzdWx0ID0ga2V5cyhvYmplY3QpLFxuXHQgICAgICBsZW5ndGggPSByZXN1bHQubGVuZ3RoO1xuXHRcblx0ICB3aGlsZSAobGVuZ3RoLS0pIHtcblx0ICAgIHZhciBrZXkgPSByZXN1bHRbbGVuZ3RoXSxcblx0ICAgICAgICB2YWx1ZSA9IG9iamVjdFtrZXldO1xuXHRcblx0ICAgIHJlc3VsdFtsZW5ndGhdID0gW2tleSwgdmFsdWUsIGlzU3RyaWN0Q29tcGFyYWJsZSh2YWx1ZSldO1xuXHQgIH1cblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGdldE1hdGNoRGF0YTtcblxuXG4vKioqLyB9LFxuLyogMTE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG5cdHZhciBuYXRpdmVHZXRQcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgYFtbUHJvdG90eXBlXV1gIG9mIGB2YWx1ZWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuXHQgKiBAcmV0dXJucyB7bnVsbHxPYmplY3R9IFJldHVybnMgdGhlIGBbW1Byb3RvdHlwZV1dYC5cblx0ICovXG5cdGZ1bmN0aW9uIGdldFByb3RvdHlwZSh2YWx1ZSkge1xuXHQgIHJldHVybiBuYXRpdmVHZXRQcm90b3R5cGUoT2JqZWN0KHZhbHVlKSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZ2V0UHJvdG90eXBlO1xuXG5cbi8qKiovIH0sXG4vKiAxMTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBEYXRhVmlldyA9IF9fd2VicGFja19yZXF1aXJlX18oODYpLFxuXHQgICAgTWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMiksXG5cdCAgICBQcm9taXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OCksXG5cdCAgICBTZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg5KSxcblx0ICAgIFdlYWtNYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKSxcblx0ICAgIHRvU291cmNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSk7XG5cdFxuXHQvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG5cdHZhciBtYXBUYWcgPSAnW29iamVjdCBNYXBdJyxcblx0ICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nLFxuXHQgICAgcHJvbWlzZVRhZyA9ICdbb2JqZWN0IFByb21pc2VdJyxcblx0ICAgIHNldFRhZyA9ICdbb2JqZWN0IFNldF0nLFxuXHQgICAgd2Vha01hcFRhZyA9ICdbb2JqZWN0IFdlYWtNYXBdJztcblx0XG5cdHZhciBkYXRhVmlld1RhZyA9ICdbb2JqZWN0IERhdGFWaWV3XSc7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogVXNlZCB0byByZXNvbHZlIHRoZVxuXHQgKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcblx0ICogb2YgdmFsdWVzLlxuXHQgKi9cblx0dmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgbWFwcywgc2V0cywgYW5kIHdlYWttYXBzLiAqL1xuXHR2YXIgZGF0YVZpZXdDdG9yU3RyaW5nID0gdG9Tb3VyY2UoRGF0YVZpZXcpLFxuXHQgICAgbWFwQ3RvclN0cmluZyA9IHRvU291cmNlKE1hcCksXG5cdCAgICBwcm9taXNlQ3RvclN0cmluZyA9IHRvU291cmNlKFByb21pc2UpLFxuXHQgICAgc2V0Q3RvclN0cmluZyA9IHRvU291cmNlKFNldCksXG5cdCAgICB3ZWFrTWFwQ3RvclN0cmluZyA9IHRvU291cmNlKFdlYWtNYXApO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIGB0b1N0cmluZ1RhZ2Agb2YgYHZhbHVlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGB0b1N0cmluZ1RhZ2AuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRUYWcodmFsdWUpIHtcblx0ICByZXR1cm4gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG5cdH1cblx0XG5cdC8vIEZhbGxiYWNrIGZvciBkYXRhIHZpZXdzLCBtYXBzLCBzZXRzLCBhbmQgd2VhayBtYXBzIGluIElFIDExLFxuXHQvLyBmb3IgZGF0YSB2aWV3cyBpbiBFZGdlLCBhbmQgcHJvbWlzZXMgaW4gTm9kZS5qcy5cblx0aWYgKChEYXRhVmlldyAmJiBnZXRUYWcobmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcigxKSkpICE9IGRhdGFWaWV3VGFnKSB8fFxuXHQgICAgKE1hcCAmJiBnZXRUYWcobmV3IE1hcCkgIT0gbWFwVGFnKSB8fFxuXHQgICAgKFByb21pc2UgJiYgZ2V0VGFnKFByb21pc2UucmVzb2x2ZSgpKSAhPSBwcm9taXNlVGFnKSB8fFxuXHQgICAgKFNldCAmJiBnZXRUYWcobmV3IFNldCkgIT0gc2V0VGFnKSB8fFxuXHQgICAgKFdlYWtNYXAgJiYgZ2V0VGFnKG5ldyBXZWFrTWFwKSAhPSB3ZWFrTWFwVGFnKSkge1xuXHQgIGdldFRhZyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICB2YXIgcmVzdWx0ID0gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSksXG5cdCAgICAgICAgQ3RvciA9IHJlc3VsdCA9PSBvYmplY3RUYWcgPyB2YWx1ZS5jb25zdHJ1Y3RvciA6IHVuZGVmaW5lZCxcblx0ICAgICAgICBjdG9yU3RyaW5nID0gQ3RvciA/IHRvU291cmNlKEN0b3IpIDogdW5kZWZpbmVkO1xuXHRcblx0ICAgIGlmIChjdG9yU3RyaW5nKSB7XG5cdCAgICAgIHN3aXRjaCAoY3RvclN0cmluZykge1xuXHQgICAgICAgIGNhc2UgZGF0YVZpZXdDdG9yU3RyaW5nOiByZXR1cm4gZGF0YVZpZXdUYWc7XG5cdCAgICAgICAgY2FzZSBtYXBDdG9yU3RyaW5nOiByZXR1cm4gbWFwVGFnO1xuXHQgICAgICAgIGNhc2UgcHJvbWlzZUN0b3JTdHJpbmc6IHJldHVybiBwcm9taXNlVGFnO1xuXHQgICAgICAgIGNhc2Ugc2V0Q3RvclN0cmluZzogcmV0dXJuIHNldFRhZztcblx0ICAgICAgICBjYXNlIHdlYWtNYXBDdG9yU3RyaW5nOiByZXR1cm4gd2Vha01hcFRhZztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGdldFRhZztcblxuXG4vKioqLyB9LFxuLyogMTE2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogR2V0cyB0aGUgdmFsdWUgYXQgYGtleWAgb2YgYG9iamVjdGAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0VmFsdWUob2JqZWN0LCBrZXkpIHtcblx0ICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXRWYWx1ZTtcblxuXG4vKioqLyB9LFxuLyogMTE3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgY2FzdFBhdGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KSxcblx0ICAgIGlzQXJndW1lbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyksXG5cdCAgICBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KSxcblx0ICAgIGlzSW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKSxcblx0ICAgIGlzS2V5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMiksXG5cdCAgICBpc0xlbmd0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpLFxuXHQgICAgaXNTdHJpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KSxcblx0ICAgIHRvS2V5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGBwYXRoYCBleGlzdHMgb24gYG9iamVjdGAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggdG8gY2hlY2suXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGhhc0Z1bmMgVGhlIGZ1bmN0aW9uIHRvIGNoZWNrIHByb3BlcnRpZXMuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgcGF0aGAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNQYXRoKG9iamVjdCwgcGF0aCwgaGFzRnVuYykge1xuXHQgIHBhdGggPSBpc0tleShwYXRoLCBvYmplY3QpID8gW3BhdGhdIDogY2FzdFBhdGgocGF0aCk7XG5cdFxuXHQgIHZhciByZXN1bHQsXG5cdCAgICAgIGluZGV4ID0gLTEsXG5cdCAgICAgIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xuXHRcblx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgdmFyIGtleSA9IHRvS2V5KHBhdGhbaW5kZXhdKTtcblx0ICAgIGlmICghKHJlc3VsdCA9IG9iamVjdCAhPSBudWxsICYmIGhhc0Z1bmMob2JqZWN0LCBrZXkpKSkge1xuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICAgIG9iamVjdCA9IG9iamVjdFtrZXldO1xuXHQgIH1cblx0ICBpZiAocmVzdWx0KSB7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0ICB2YXIgbGVuZ3RoID0gb2JqZWN0ID8gb2JqZWN0Lmxlbmd0aCA6IDA7XG5cdCAgcmV0dXJuICEhbGVuZ3RoICYmIGlzTGVuZ3RoKGxlbmd0aCkgJiYgaXNJbmRleChrZXksIGxlbmd0aCkgJiZcblx0ICAgIChpc0FycmF5KG9iamVjdCkgfHwgaXNTdHJpbmcob2JqZWN0KSB8fCBpc0FyZ3VtZW50cyhvYmplY3QpKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBoYXNQYXRoO1xuXG5cbi8qKiovIH0sXG4vKiAxMTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBuYXRpdmVDcmVhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBoYXNoLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBjbGVhclxuXHQgKiBAbWVtYmVyT2YgSGFzaFxuXHQgKi9cblx0ZnVuY3Rpb24gaGFzaENsZWFyKCkge1xuXHQgIHRoaXMuX19kYXRhX18gPSBuYXRpdmVDcmVhdGUgPyBuYXRpdmVDcmVhdGUobnVsbCkgOiB7fTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBoYXNoQ2xlYXI7XG5cblxuLyoqKi8gfSxcbi8qIDExOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBoYXNoLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBkZWxldGVcblx0ICogQG1lbWJlck9mIEhhc2hcblx0ICogQHBhcmFtIHtPYmplY3R9IGhhc2ggVGhlIGhhc2ggdG8gbW9kaWZ5LlxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaGFzaERlbGV0ZShrZXkpIHtcblx0ICByZXR1cm4gdGhpcy5oYXMoa2V5KSAmJiBkZWxldGUgdGhpcy5fX2RhdGFfX1trZXldO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGhhc2hEZWxldGU7XG5cblxuLyoqKi8gfSxcbi8qIDEyMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIG5hdGl2ZUNyZWF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0LyoqIFVzZWQgdG8gc3RhbmQtaW4gZm9yIGB1bmRlZmluZWRgIGhhc2ggdmFsdWVzLiAqL1xuXHR2YXIgSEFTSF9VTkRFRklORUQgPSAnX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyc7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cblx0dmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgaGFzaCB2YWx1ZSBmb3IgYGtleWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGdldFxuXHQgKiBAbWVtYmVyT2YgSGFzaFxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gaGFzaEdldChrZXkpIHtcblx0ICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG5cdCAgaWYgKG5hdGl2ZUNyZWF0ZSkge1xuXHQgICAgdmFyIHJlc3VsdCA9IGRhdGFba2V5XTtcblx0ICAgIHJldHVybiByZXN1bHQgPT09IEhBU0hfVU5ERUZJTkVEID8gdW5kZWZpbmVkIDogcmVzdWx0O1xuXHQgIH1cblx0ICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLCBrZXkpID8gZGF0YVtrZXldIDogdW5kZWZpbmVkO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGhhc2hHZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDEyMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIG5hdGl2ZUNyZWF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBhIGhhc2ggdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgaGFzXG5cdCAqIEBtZW1iZXJPZiBIYXNoXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNoSGFzKGtleSkge1xuXHQgIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcblx0ICByZXR1cm4gbmF0aXZlQ3JlYXRlID8gZGF0YVtrZXldICE9PSB1bmRlZmluZWQgOiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaGFzaEhhcztcblxuXG4vKioqLyB9LFxuLyogMTIyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgbmF0aXZlQ3JlYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHQvKiogVXNlZCB0byBzdGFuZC1pbiBmb3IgYHVuZGVmaW5lZGAgaGFzaCB2YWx1ZXMuICovXG5cdHZhciBIQVNIX1VOREVGSU5FRCA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJztcblx0XG5cdC8qKlxuXHQgKiBTZXRzIHRoZSBoYXNoIGBrZXlgIHRvIGB2YWx1ZWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIHNldFxuXHQgKiBAbWVtYmVyT2YgSGFzaFxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBoYXNoIGluc3RhbmNlLlxuXHQgKi9cblx0ZnVuY3Rpb24gaGFzaFNldChrZXksIHZhbHVlKSB7XG5cdCAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuXHQgIGRhdGFba2V5XSA9IChuYXRpdmVDcmVhdGUgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkgPyBIQVNIX1VOREVGSU5FRCA6IHZhbHVlO1xuXHQgIHJldHVybiB0aGlzO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGhhc2hTZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDEyMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VUaW1lcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA2KSxcblx0ICAgIGlzQXJndW1lbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyksXG5cdCAgICBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KSxcblx0ICAgIGlzTGVuZ3RoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSksXG5cdCAgICBpc1N0cmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgaW5kZXgga2V5cyBmb3IgYG9iamVjdGAgdmFsdWVzIG9mIGFycmF5cyxcblx0ICogYGFyZ3VtZW50c2Agb2JqZWN0cywgYW5kIHN0cmluZ3MsIG90aGVyd2lzZSBgbnVsbGAgaXMgcmV0dXJuZWQuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHJldHVybnMge0FycmF5fG51bGx9IFJldHVybnMgaW5kZXgga2V5cywgZWxzZSBgbnVsbGAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpbmRleEtleXMob2JqZWN0KSB7XG5cdCAgdmFyIGxlbmd0aCA9IG9iamVjdCA/IG9iamVjdC5sZW5ndGggOiB1bmRlZmluZWQ7XG5cdCAgaWYgKGlzTGVuZ3RoKGxlbmd0aCkgJiZcblx0ICAgICAgKGlzQXJyYXkob2JqZWN0KSB8fCBpc1N0cmluZyhvYmplY3QpIHx8IGlzQXJndW1lbnRzKG9iamVjdCkpKSB7XG5cdCAgICByZXR1cm4gYmFzZVRpbWVzKGxlbmd0aCwgU3RyaW5nKTtcblx0ICB9XG5cdCAgcmV0dXJuIG51bGw7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaW5kZXhLZXlzO1xuXG5cbi8qKiovIH0sXG4vKiAxMjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSBmb3IgdXNlIGFzIHVuaXF1ZSBvYmplY3Qga2V5LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgc3VpdGFibGUsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzS2V5YWJsZSh2YWx1ZSkge1xuXHQgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXHQgIHJldHVybiAodHlwZSA9PSAnc3RyaW5nJyB8fCB0eXBlID09ICdudW1iZXInIHx8IHR5cGUgPT0gJ3N5bWJvbCcgfHwgdHlwZSA9PSAnYm9vbGVhbicpXG5cdCAgICA/ICh2YWx1ZSAhPT0gJ19fcHJvdG9fXycpXG5cdCAgICA6ICh2YWx1ZSA9PT0gbnVsbCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNLZXlhYmxlO1xuXG5cbi8qKiovIH0sXG4vKiAxMjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBjb3JlSnNEYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDkpO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IG1ldGhvZHMgbWFzcXVlcmFkaW5nIGFzIG5hdGl2ZS4gKi9cblx0dmFyIG1hc2tTcmNLZXkgPSAoZnVuY3Rpb24oKSB7XG5cdCAgdmFyIHVpZCA9IC9bXi5dKyQvLmV4ZWMoY29yZUpzRGF0YSAmJiBjb3JlSnNEYXRhLmtleXMgJiYgY29yZUpzRGF0YS5rZXlzLklFX1BST1RPIHx8ICcnKTtcblx0ICByZXR1cm4gdWlkID8gKCdTeW1ib2woc3JjKV8xLicgKyB1aWQpIDogJyc7XG5cdH0oKSk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGBmdW5jYCBoYXMgaXRzIHNvdXJjZSBtYXNrZWQuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYGZ1bmNgIGlzIG1hc2tlZCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNNYXNrZWQoZnVuYykge1xuXHQgIHJldHVybiAhIW1hc2tTcmNLZXkgJiYgKG1hc2tTcmNLZXkgaW4gZnVuYyk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNNYXNrZWQ7XG5cblxuLyoqKi8gfSxcbi8qIDEyNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxpa2VseSBhIHByb3RvdHlwZSBvYmplY3QuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHByb3RvdHlwZSwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNQcm90b3R5cGUodmFsdWUpIHtcblx0ICB2YXIgQ3RvciA9IHZhbHVlICYmIHZhbHVlLmNvbnN0cnVjdG9yLFxuXHQgICAgICBwcm90byA9ICh0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmIEN0b3IucHJvdG90eXBlKSB8fCBvYmplY3RQcm90bztcblx0XG5cdCAgcmV0dXJuIHZhbHVlID09PSBwcm90bztcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc1Byb3RvdHlwZTtcblxuXG4vKioqLyB9LFxuLyogMTI3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgbGlzdCBjYWNoZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgY2xlYXJcblx0ICogQG1lbWJlck9mIExpc3RDYWNoZVxuXHQgKi9cblx0ZnVuY3Rpb24gbGlzdENhY2hlQ2xlYXIoKSB7XG5cdCAgdGhpcy5fX2RhdGFfXyA9IFtdO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGxpc3RDYWNoZUNsZWFyO1xuXG5cbi8qKiovIH0sXG4vKiAxMjggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBhc3NvY0luZGV4T2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG5cdFxuXHQvKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cblx0dmFyIHNwbGljZSA9IGFycmF5UHJvdG8uc3BsaWNlO1xuXHRcblx0LyoqXG5cdCAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBsaXN0IGNhY2hlLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBkZWxldGVcblx0ICogQG1lbWJlck9mIExpc3RDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gbGlzdENhY2hlRGVsZXRlKGtleSkge1xuXHQgIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcblx0ICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblx0XG5cdCAgaWYgKGluZGV4IDwgMCkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICB2YXIgbGFzdEluZGV4ID0gZGF0YS5sZW5ndGggLSAxO1xuXHQgIGlmIChpbmRleCA9PSBsYXN0SW5kZXgpIHtcblx0ICAgIGRhdGEucG9wKCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHNwbGljZS5jYWxsKGRhdGEsIGluZGV4LCAxKTtcblx0ICB9XG5cdCAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbGlzdENhY2hlRGVsZXRlO1xuXG5cbi8qKiovIH0sXG4vKiAxMjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBhc3NvY0luZGV4T2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBsaXN0IGNhY2hlIHZhbHVlIGZvciBga2V5YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgZ2V0XG5cdCAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cblx0ICovXG5cdGZ1bmN0aW9uIGxpc3RDYWNoZUdldChrZXkpIHtcblx0ICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG5cdCAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cdFxuXHQgIHJldHVybiBpbmRleCA8IDAgPyB1bmRlZmluZWQgOiBkYXRhW2luZGV4XVsxXTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBsaXN0Q2FjaGVHZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDEzMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGFzc29jSW5kZXhPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBhIGxpc3QgY2FjaGUgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgaGFzXG5cdCAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGxpc3RDYWNoZUhhcyhrZXkpIHtcblx0ICByZXR1cm4gYXNzb2NJbmRleE9mKHRoaXMuX19kYXRhX18sIGtleSkgPiAtMTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBsaXN0Q2FjaGVIYXM7XG5cblxuLyoqKi8gfSxcbi8qIDEzMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGFzc29jSW5kZXhPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0LyoqXG5cdCAqIFNldHMgdGhlIGxpc3QgY2FjaGUgYGtleWAgdG8gYHZhbHVlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgc2V0XG5cdCAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cblx0ICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbGlzdCBjYWNoZSBpbnN0YW5jZS5cblx0ICovXG5cdGZ1bmN0aW9uIGxpc3RDYWNoZVNldChrZXksIHZhbHVlKSB7XG5cdCAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuXHQgICAgICBpbmRleCA9IGFzc29jSW5kZXhPZihkYXRhLCBrZXkpO1xuXHRcblx0ICBpZiAoaW5kZXggPCAwKSB7XG5cdCAgICBkYXRhLnB1c2goW2tleSwgdmFsdWVdKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgZGF0YVtpbmRleF1bMV0gPSB2YWx1ZTtcblx0ICB9XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbGlzdENhY2hlU2V0O1xuXG5cbi8qKiovIH0sXG4vKiAxMzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBIYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NyksXG5cdCAgICBMaXN0Q2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpLFxuXHQgICAgTWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgbWFwLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBjbGVhclxuXHQgKiBAbWVtYmVyT2YgTWFwQ2FjaGVcblx0ICovXG5cdGZ1bmN0aW9uIG1hcENhY2hlQ2xlYXIoKSB7XG5cdCAgdGhpcy5fX2RhdGFfXyA9IHtcblx0ICAgICdoYXNoJzogbmV3IEhhc2gsXG5cdCAgICAnbWFwJzogbmV3IChNYXAgfHwgTGlzdENhY2hlKSxcblx0ICAgICdzdHJpbmcnOiBuZXcgSGFzaFxuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbWFwQ2FjaGVDbGVhcjtcblxuXG4vKioqLyB9LFxuLyogMTMzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2V0TWFwRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0LyoqXG5cdCAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBtYXAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGRlbGV0ZVxuXHQgKiBAbWVtYmVyT2YgTWFwQ2FjaGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcENhY2hlRGVsZXRlKGtleSkge1xuXHQgIHJldHVybiBnZXRNYXBEYXRhKHRoaXMsIGtleSlbJ2RlbGV0ZSddKGtleSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbWFwQ2FjaGVEZWxldGU7XG5cblxuLyoqKi8gfSxcbi8qIDEzNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldE1hcERhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBtYXAgdmFsdWUgZm9yIGBrZXlgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBnZXRcblx0ICogQG1lbWJlck9mIE1hcENhY2hlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXBDYWNoZUdldChrZXkpIHtcblx0ICByZXR1cm4gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLmdldChrZXkpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG1hcENhY2hlR2V0O1xuXG5cbi8qKiovIH0sXG4vKiAxMzUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXRNYXBEYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGEgbWFwIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGhhc1xuXHQgKiBAbWVtYmVyT2YgTWFwQ2FjaGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcENhY2hlSGFzKGtleSkge1xuXHQgIHJldHVybiBnZXRNYXBEYXRhKHRoaXMsIGtleSkuaGFzKGtleSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbWFwQ2FjaGVIYXM7XG5cblxuLyoqKi8gfSxcbi8qIDEzNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldE1hcERhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdC8qKlxuXHQgKiBTZXRzIHRoZSBtYXAgYGtleWAgdG8gYHZhbHVlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgc2V0XG5cdCAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBtYXAgY2FjaGUgaW5zdGFuY2UuXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXBDYWNoZVNldChrZXksIHZhbHVlKSB7XG5cdCAgZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLnNldChrZXksIHZhbHVlKTtcblx0ICByZXR1cm4gdGhpcztcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZVNldDtcblxuXG4vKioqLyB9LFxuLyogMTM3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ29udmVydHMgYG1hcGAgdG8gaXRzIGtleS12YWx1ZSBwYWlycy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG1hcCBUaGUgbWFwIHRvIGNvbnZlcnQuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUga2V5LXZhbHVlIHBhaXJzLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwVG9BcnJheShtYXApIHtcblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgcmVzdWx0ID0gQXJyYXkobWFwLnNpemUpO1xuXHRcblx0ICBtYXAuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG5cdCAgICByZXN1bHRbKytpbmRleF0gPSBba2V5LCB2YWx1ZV07XG5cdCAgfSk7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtYXBUb0FycmF5O1xuXG5cbi8qKiovIH0sXG4vKiAxMzggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKiBVc2VkIHRvIHN0YW5kLWluIGZvciBgdW5kZWZpbmVkYCBoYXNoIHZhbHVlcy4gKi9cblx0dmFyIEhBU0hfVU5ERUZJTkVEID0gJ19fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18nO1xuXHRcblx0LyoqXG5cdCAqIEFkZHMgYHZhbHVlYCB0byB0aGUgYXJyYXkgY2FjaGUuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGFkZFxuXHQgKiBAbWVtYmVyT2YgU2V0Q2FjaGVcblx0ICogQGFsaWFzIHB1c2hcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2FjaGUuXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNhY2hlIGluc3RhbmNlLlxuXHQgKi9cblx0ZnVuY3Rpb24gc2V0Q2FjaGVBZGQodmFsdWUpIHtcblx0ICB0aGlzLl9fZGF0YV9fLnNldCh2YWx1ZSwgSEFTSF9VTkRFRklORUQpO1xuXHQgIHJldHVybiB0aGlzO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHNldENhY2hlQWRkO1xuXG5cbi8qKiovIH0sXG4vKiAxMzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBpbiB0aGUgYXJyYXkgY2FjaGUuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGhhc1xuXHQgKiBAbWVtYmVyT2YgU2V0Q2FjaGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBmb3VuZCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gc2V0Q2FjaGVIYXModmFsdWUpIHtcblx0ICByZXR1cm4gdGhpcy5fX2RhdGFfXy5oYXModmFsdWUpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHNldENhY2hlSGFzO1xuXG5cbi8qKiovIH0sXG4vKiAxNDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgc2V0YCB0byBhbiBhcnJheSBvZiBpdHMgdmFsdWVzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gc2V0IFRoZSBzZXQgdG8gY29udmVydC5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSB2YWx1ZXMuXG5cdCAqL1xuXHRmdW5jdGlvbiBzZXRUb0FycmF5KHNldCkge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICByZXN1bHQgPSBBcnJheShzZXQuc2l6ZSk7XG5cdFxuXHQgIHNldC5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICByZXN1bHRbKytpbmRleF0gPSB2YWx1ZTtcblx0ICB9KTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHNldFRvQXJyYXk7XG5cblxuLyoqKi8gfSxcbi8qIDE0MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIExpc3RDYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgc3RhY2suXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGNsZWFyXG5cdCAqIEBtZW1iZXJPZiBTdGFja1xuXHQgKi9cblx0ZnVuY3Rpb24gc3RhY2tDbGVhcigpIHtcblx0ICB0aGlzLl9fZGF0YV9fID0gbmV3IExpc3RDYWNoZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBzdGFja0NsZWFyO1xuXG5cbi8qKiovIH0sXG4vKiAxNDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgc3RhY2suXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGRlbGV0ZVxuXHQgKiBAbWVtYmVyT2YgU3RhY2tcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIHN0YWNrRGVsZXRlKGtleSkge1xuXHQgIHJldHVybiB0aGlzLl9fZGF0YV9fWydkZWxldGUnXShrZXkpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHN0YWNrRGVsZXRlO1xuXG5cbi8qKiovIH0sXG4vKiAxNDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBzdGFjayB2YWx1ZSBmb3IgYGtleWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGdldFxuXHQgKiBAbWVtYmVyT2YgU3RhY2tcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cblx0ICovXG5cdGZ1bmN0aW9uIHN0YWNrR2V0KGtleSkge1xuXHQgIHJldHVybiB0aGlzLl9fZGF0YV9fLmdldChrZXkpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHN0YWNrR2V0O1xuXG5cbi8qKiovIH0sXG4vKiAxNDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYSBzdGFjayB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBoYXNcblx0ICogQG1lbWJlck9mIFN0YWNrXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBzdGFja0hhcyhrZXkpIHtcblx0ICByZXR1cm4gdGhpcy5fX2RhdGFfXy5oYXMoa2V5KTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBzdGFja0hhcztcblxuXG4vKioqLyB9LFxuLyogMTQ1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgTGlzdENhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KSxcblx0ICAgIE1hcENhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdFxuXHQvKiogVXNlZCBhcyB0aGUgc2l6ZSB0byBlbmFibGUgbGFyZ2UgYXJyYXkgb3B0aW1pemF0aW9ucy4gKi9cblx0dmFyIExBUkdFX0FSUkFZX1NJWkUgPSAyMDA7XG5cdFxuXHQvKipcblx0ICogU2V0cyB0aGUgc3RhY2sgYGtleWAgdG8gYHZhbHVlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgc2V0XG5cdCAqIEBtZW1iZXJPZiBTdGFja1xuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBzdGFjayBjYWNoZSBpbnN0YW5jZS5cblx0ICovXG5cdGZ1bmN0aW9uIHN0YWNrU2V0KGtleSwgdmFsdWUpIHtcblx0ICB2YXIgY2FjaGUgPSB0aGlzLl9fZGF0YV9fO1xuXHQgIGlmIChjYWNoZSBpbnN0YW5jZW9mIExpc3RDYWNoZSAmJiBjYWNoZS5fX2RhdGFfXy5sZW5ndGggPT0gTEFSR0VfQVJSQVlfU0laRSkge1xuXHQgICAgY2FjaGUgPSB0aGlzLl9fZGF0YV9fID0gbmV3IE1hcENhY2hlKGNhY2hlLl9fZGF0YV9fKTtcblx0ICB9XG5cdCAgY2FjaGUuc2V0KGtleSwgdmFsdWUpO1xuXHQgIHJldHVybiB0aGlzO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHN0YWNrU2V0O1xuXG5cbi8qKiovIH0sXG4vKiAxNDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBtZW1vaXplID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTUpLFxuXHQgICAgdG9TdHJpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2MCk7XG5cdFxuXHQvKiogVXNlZCB0byBtYXRjaCBwcm9wZXJ0eSBuYW1lcyB3aXRoaW4gcHJvcGVydHkgcGF0aHMuICovXG5cdHZhciByZVByb3BOYW1lID0gL1teLltcXF1dK3xcXFsoPzooLT9cXGQrKD86XFwuXFxkKyk/KXwoW1wiJ10pKCg/Oig/IVxcMilbXlxcXFxdfFxcXFwuKSo/KVxcMilcXF18KD89KFxcLnxcXFtcXF0pKD86XFw0fCQpKS9nO1xuXHRcblx0LyoqIFVzZWQgdG8gbWF0Y2ggYmFja3NsYXNoZXMgaW4gcHJvcGVydHkgcGF0aHMuICovXG5cdHZhciByZUVzY2FwZUNoYXIgPSAvXFxcXChcXFxcKT8vZztcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgc3RyaW5nYCB0byBhIHByb3BlcnR5IHBhdGggYXJyYXkuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBjb252ZXJ0LlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHByb3BlcnR5IHBhdGggYXJyYXkuXG5cdCAqL1xuXHR2YXIgc3RyaW5nVG9QYXRoID0gbWVtb2l6ZShmdW5jdGlvbihzdHJpbmcpIHtcblx0ICB2YXIgcmVzdWx0ID0gW107XG5cdCAgdG9TdHJpbmcoc3RyaW5nKS5yZXBsYWNlKHJlUHJvcE5hbWUsIGZ1bmN0aW9uKG1hdGNoLCBudW1iZXIsIHF1b3RlLCBzdHJpbmcpIHtcblx0ICAgIHJlc3VsdC5wdXNoKHF1b3RlID8gc3RyaW5nLnJlcGxhY2UocmVFc2NhcGVDaGFyLCAnJDEnKSA6IChudW1iZXIgfHwgbWF0Y2gpKTtcblx0ICB9KTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc3RyaW5nVG9QYXRoO1xuXG5cbi8qKiovIH0sXG4vKiAxNDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNyksXG5cdCAgICBub3cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1NiksXG5cdCAgICB0b051bWJlciA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHRcblx0LyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cblx0dmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cblx0dmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuXHQgICAgbmF0aXZlTWluID0gTWF0aC5taW47XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIGRlYm91bmNlZCBmdW5jdGlvbiB0aGF0IGRlbGF5cyBpbnZva2luZyBgZnVuY2AgdW50aWwgYWZ0ZXIgYHdhaXRgXG5cdCAqIG1pbGxpc2Vjb25kcyBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHdhc1xuXHQgKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG5cdCAqIGRlbGF5ZWQgYGZ1bmNgIGludm9jYXRpb25zIGFuZCBhIGBmbHVzaGAgbWV0aG9kIHRvIGltbWVkaWF0ZWx5IGludm9rZSB0aGVtLlxuXHQgKiBQcm92aWRlIGFuIG9wdGlvbnMgb2JqZWN0IHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uXG5cdCAqIHRoZSBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGAgdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkXG5cdCAqIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnQgY2FsbHNcblx0ICogdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2AgaW52b2NhdGlvbi5cblx0ICpcblx0ICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpcyBpbnZva2VkXG5cdCAqIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiBpc1xuXHQgKiBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG5cdCAqXG5cdCAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2RlYm91bmNpbmctdGhyb3R0bGluZy1leHBsYWluZWQtZXhhbXBsZXMvKVxuXHQgKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV1cblx0ICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdhaXRdXG5cdCAqICBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgaW52b2tlZC5cblx0ICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuXHQgKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiAvLyBBdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4LlxuXHQgKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuXHQgKlxuXHQgKiAvLyBJbnZva2UgYHNlbmRNYWlsYCB3aGVuIGNsaWNrZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxscy5cblx0ICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuXHQgKiAgICdsZWFkaW5nJzogdHJ1ZSxcblx0ICogICAndHJhaWxpbmcnOiBmYWxzZVxuXHQgKiB9KSk7XG5cdCAqXG5cdCAqIC8vIEVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHMuXG5cdCAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pO1xuXHQgKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7XG5cdCAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgZGVib3VuY2VkKTtcblx0ICpcblx0ICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyBkZWJvdW5jZWQgaW52b2NhdGlvbi5cblx0ICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgZGVib3VuY2VkLmNhbmNlbCk7XG5cdCAqL1xuXHRmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG5cdCAgdmFyIGxhc3RBcmdzLFxuXHQgICAgICBsYXN0VGhpcyxcblx0ICAgICAgbWF4V2FpdCxcblx0ICAgICAgcmVzdWx0LFxuXHQgICAgICB0aW1lcklkLFxuXHQgICAgICBsYXN0Q2FsbFRpbWUsXG5cdCAgICAgIGxhc3RJbnZva2VUaW1lID0gMCxcblx0ICAgICAgbGVhZGluZyA9IGZhbHNlLFxuXHQgICAgICBtYXhpbmcgPSBmYWxzZSxcblx0ICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXHRcblx0ICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuXHQgIH1cblx0ICB3YWl0ID0gdG9OdW1iZXIod2FpdCkgfHwgMDtcblx0ICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcblx0ICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZztcblx0ICAgIG1heGluZyA9ICdtYXhXYWl0JyBpbiBvcHRpb25zO1xuXHQgICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDtcblx0ICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcblx0ICAgIHZhciBhcmdzID0gbGFzdEFyZ3MsXG5cdCAgICAgICAgdGhpc0FyZyA9IGxhc3RUaGlzO1xuXHRcblx0ICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG5cdCAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG5cdCAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGxlYWRpbmdFZGdlKHRpbWUpIHtcblx0ICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuXG5cdCAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG5cdCAgICAvLyBTdGFydCB0aGUgdGltZXIgZm9yIHRoZSB0cmFpbGluZyBlZGdlLlxuXHQgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcblx0ICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLlxuXHQgICAgcmV0dXJuIGxlYWRpbmcgPyBpbnZva2VGdW5jKHRpbWUpIDogcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVtYWluaW5nV2FpdCh0aW1lKSB7XG5cdCAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuXHQgICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsXG5cdCAgICAgICAgcmVzdWx0ID0gd2FpdCAtIHRpbWVTaW5jZUxhc3RDYWxsO1xuXHRcblx0ICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0LCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuXHQgICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcblx0ICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lO1xuXHRcblx0ICAgIC8vIEVpdGhlciB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCBhY3Rpdml0eSBoYXMgc3RvcHBlZCBhbmQgd2UncmUgYXQgdGhlXG5cdCAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZ1xuXHQgICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuXHQgICAgcmV0dXJuIChsYXN0Q2FsbFRpbWUgPT09IHVuZGVmaW5lZCB8fCAodGltZVNpbmNlTGFzdENhbGwgPj0gd2FpdCkgfHxcblx0ICAgICAgKHRpbWVTaW5jZUxhc3RDYWxsIDwgMCkgfHwgKG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQpKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHRpbWVyRXhwaXJlZCgpIHtcblx0ICAgIHZhciB0aW1lID0gbm93KCk7XG5cdCAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7XG5cdCAgICAgIHJldHVybiB0cmFpbGluZ0VkZ2UodGltZSk7XG5cdCAgICB9XG5cdCAgICAvLyBSZXN0YXJ0IHRoZSB0aW1lci5cblx0ICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkge1xuXHQgICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblx0XG5cdCAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuXG5cdCAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cblx0ICAgIGlmICh0cmFpbGluZyAmJiBsYXN0QXJncykge1xuXHQgICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcblx0ICAgIH1cblx0ICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gY2FuY2VsKCkge1xuXHQgICAgbGFzdEludm9rZVRpbWUgPSAwO1xuXHQgICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBmbHVzaCgpIHtcblx0ICAgIHJldHVybiB0aW1lcklkID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiB0cmFpbGluZ0VkZ2Uobm93KCkpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuXHQgICAgdmFyIHRpbWUgPSBub3coKSxcblx0ICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuXHRcblx0ICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuXHQgICAgbGFzdFRoaXMgPSB0aGlzO1xuXHQgICAgbGFzdENhbGxUaW1lID0gdGltZTtcblx0XG5cdCAgICBpZiAoaXNJbnZva2luZykge1xuXHQgICAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgcmV0dXJuIGxlYWRpbmdFZGdlKGxhc3RDYWxsVGltZSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKG1heGluZykge1xuXHQgICAgICAgIC8vIEhhbmRsZSBpbnZvY2F0aW9ucyBpbiBhIHRpZ2h0IGxvb3AuXG5cdCAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcblx0ICAgICAgICByZXR1cm4gaW52b2tlRnVuYyhsYXN0Q2FsbFRpbWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0ICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuXHQgIGRlYm91bmNlZC5mbHVzaCA9IGZsdXNoO1xuXHQgIHJldHVybiBkZWJvdW5jZWQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG5cblxuLyoqKi8gfSxcbi8qIDE0OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIFBlcmZvcm1zIGFcblx0ICogW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtc2FtZXZhbHVlemVybylcblx0ICogY29tcGFyaXNvbiBiZXR3ZWVuIHR3byB2YWx1ZXMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlIGVxdWl2YWxlbnQuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG5cdCAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG5cdCAqIHZhciBvdGhlciA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcblx0ICpcblx0ICogXy5lcShvYmplY3QsIG9iamVjdCk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5lcShvYmplY3QsIG90aGVyKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICpcblx0ICogXy5lcSgnYScsICdhJyk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5lcSgnYScsIE9iamVjdCgnYScpKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICpcblx0ICogXy5lcShOYU4sIE5hTik7XG5cdCAqIC8vID0+IHRydWVcblx0ICovXG5cdGZ1bmN0aW9uIGVxKHZhbHVlLCBvdGhlcikge1xuXHQgIHJldHVybiB2YWx1ZSA9PT0gb3RoZXIgfHwgKHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXIpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGVxO1xuXG5cbi8qKiovIH0sXG4vKiAxNDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlRmluZEluZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NiksXG5cdCAgICBiYXNlSXRlcmF0ZWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMSksXG5cdCAgICB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cblx0dmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4O1xuXHRcblx0LyoqXG5cdCAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZGAgZXhjZXB0IHRoYXQgaXQgcmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0XG5cdCAqIGVsZW1lbnQgYHByZWRpY2F0ZWAgcmV0dXJucyB0cnV0aHkgZm9yIGluc3RlYWQgb2YgdGhlIGVsZW1lbnQgaXRzZWxmLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAxLjEuMFxuXHQgKiBAY2F0ZWdvcnkgQXJyYXlcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cblx0ICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbcHJlZGljYXRlPV8uaWRlbnRpdHldXG5cdCAqICBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2Zyb21JbmRleD0wXSBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmb3VuZCBlbGVtZW50LCBlbHNlIGAtMWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIHZhciB1c2VycyA9IFtcblx0ICogICB7ICd1c2VyJzogJ2Jhcm5leScsICAnYWN0aXZlJzogZmFsc2UgfSxcblx0ICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWN0aXZlJzogZmFsc2UgfSxcblx0ICogICB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWN0aXZlJzogdHJ1ZSB9XG5cdCAqIF07XG5cdCAqXG5cdCAqIF8uZmluZEluZGV4KHVzZXJzLCBmdW5jdGlvbihvKSB7IHJldHVybiBvLnVzZXIgPT0gJ2Jhcm5leSc7IH0pO1xuXHQgKiAvLyA9PiAwXG5cdCAqXG5cdCAqIC8vIFRoZSBgXy5tYXRjaGVzYCBpdGVyYXRlZSBzaG9ydGhhbmQuXG5cdCAqIF8uZmluZEluZGV4KHVzZXJzLCB7ICd1c2VyJzogJ2ZyZWQnLCAnYWN0aXZlJzogZmFsc2UgfSk7XG5cdCAqIC8vID0+IDFcblx0ICpcblx0ICogLy8gVGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuXHQgKiBfLmZpbmRJbmRleCh1c2VycywgWydhY3RpdmUnLCBmYWxzZV0pO1xuXHQgKiAvLyA9PiAwXG5cdCAqXG5cdCAqIC8vIFRoZSBgXy5wcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuXHQgKiBfLmZpbmRJbmRleCh1c2VycywgJ2FjdGl2ZScpO1xuXHQgKiAvLyA9PiAyXG5cdCAqL1xuXHRmdW5jdGlvbiBmaW5kSW5kZXgoYXJyYXksIHByZWRpY2F0ZSwgZnJvbUluZGV4KSB7XG5cdCAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcblx0ICBpZiAoIWxlbmd0aCkge1xuXHQgICAgcmV0dXJuIC0xO1xuXHQgIH1cblx0ICB2YXIgaW5kZXggPSBmcm9tSW5kZXggPT0gbnVsbCA/IDAgOiB0b0ludGVnZXIoZnJvbUluZGV4KTtcblx0ICBpZiAoaW5kZXggPCAwKSB7XG5cdCAgICBpbmRleCA9IG5hdGl2ZU1heChsZW5ndGggKyBpbmRleCwgMCk7XG5cdCAgfVxuXHQgIHJldHVybiBiYXNlRmluZEluZGV4KGFycmF5LCBiYXNlSXRlcmF0ZWUocHJlZGljYXRlLCAzKSwgaW5kZXgpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZpbmRJbmRleDtcblxuXG4vKioqLyB9LFxuLyogMTUwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZUdldCA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIHZhbHVlIGF0IGBwYXRoYCBvZiBgb2JqZWN0YC4gSWYgdGhlIHJlc29sdmVkIHZhbHVlIGlzXG5cdCAqIGB1bmRlZmluZWRgLCB0aGUgYGRlZmF1bHRWYWx1ZWAgaXMgdXNlZCBpbiBpdHMgcGxhY2UuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDMuNy4wXG5cdCAqIEBjYXRlZ29yeSBPYmplY3Rcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcGFyYW0geyp9IFtkZWZhdWx0VmFsdWVdIFRoZSB2YWx1ZSByZXR1cm5lZCBmb3IgYHVuZGVmaW5lZGAgcmVzb2x2ZWQgdmFsdWVzLlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIHZhciBvYmplY3QgPSB7ICdhJzogW3sgJ2InOiB7ICdjJzogMyB9IH1dIH07XG5cdCAqXG5cdCAqIF8uZ2V0KG9iamVjdCwgJ2FbMF0uYi5jJyk7XG5cdCAqIC8vID0+IDNcblx0ICpcblx0ICogXy5nZXQob2JqZWN0LCBbJ2EnLCAnMCcsICdiJywgJ2MnXSk7XG5cdCAqIC8vID0+IDNcblx0ICpcblx0ICogXy5nZXQob2JqZWN0LCAnYS5iLmMnLCAnZGVmYXVsdCcpO1xuXHQgKiAvLyA9PiAnZGVmYXVsdCdcblx0ICovXG5cdGZ1bmN0aW9uIGdldChvYmplY3QsIHBhdGgsIGRlZmF1bHRWYWx1ZSkge1xuXHQgIHZhciByZXN1bHQgPSBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGJhc2VHZXQob2JqZWN0LCBwYXRoKTtcblx0ICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyBkZWZhdWx0VmFsdWUgOiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZ2V0O1xuXG5cbi8qKiovIH0sXG4vKiAxNTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlSGFzSW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk3KSxcblx0ICAgIGhhc1BhdGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNyk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGBwYXRoYCBpcyBhIGRpcmVjdCBvciBpbmhlcml0ZWQgcHJvcGVydHkgb2YgYG9iamVjdGAuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBPYmplY3Rcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBwYXRoYCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIG9iamVjdCA9IF8uY3JlYXRlKHsgJ2EnOiBfLmNyZWF0ZSh7ICdiJzogMiB9KSB9KTtcblx0ICpcblx0ICogXy5oYXNJbihvYmplY3QsICdhJyk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5oYXNJbihvYmplY3QsICdhLmInKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmhhc0luKG9iamVjdCwgWydhJywgJ2InXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5oYXNJbihvYmplY3QsICdiJyk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNJbihvYmplY3QsIHBhdGgpIHtcblx0ICByZXR1cm4gb2JqZWN0ICE9IG51bGwgJiYgaGFzUGF0aChvYmplY3QsIHBhdGgsIGJhc2VIYXNJbik7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaGFzSW47XG5cblxuLyoqKi8gfSxcbi8qIDE1MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGZpcnN0IGFyZ3VtZW50IGdpdmVuIHRvIGl0LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgVXRpbFxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIEFueSB2YWx1ZS5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgYHZhbHVlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcblx0ICpcblx0ICogY29uc29sZS5sb2coXy5pZGVudGl0eShvYmplY3QpID09PSBvYmplY3QpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqL1xuXHRmdW5jdGlvbiBpZGVudGl0eSh2YWx1ZSkge1xuXHQgIHJldHVybiB2YWx1ZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpZGVudGl0eTtcblxuXG4vKioqLyB9LFxuLyogMTUzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNBcnJheUxpa2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KSxcblx0ICAgIGlzT2JqZWN0TGlrZSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHQvKipcblx0ICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5pc0FycmF5TGlrZWAgZXhjZXB0IHRoYXQgaXQgYWxzbyBjaGVja3MgaWYgYHZhbHVlYFxuXHQgKiBpcyBhbiBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBhcnJheS1saWtlIG9iamVjdCxcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc0FycmF5TGlrZU9iamVjdChbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNBcnJheUxpa2VPYmplY3QoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0FycmF5TGlrZU9iamVjdCgnYWJjJyk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqXG5cdCAqIF8uaXNBcnJheUxpa2VPYmplY3QoXy5ub29wKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKSB7XG5cdCAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNBcnJheUxpa2UodmFsdWUpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzQXJyYXlMaWtlT2JqZWN0O1xuXG5cbi8qKiovIH0sXG4vKiAxNTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc0xlbmd0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpLFxuXHQgICAgaXNPYmplY3RMaWtlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcblx0ICAgIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcblx0ICAgIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsXG5cdCAgICBkYXRlVGFnID0gJ1tvYmplY3QgRGF0ZV0nLFxuXHQgICAgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nLFxuXHQgICAgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG5cdCAgICBtYXBUYWcgPSAnW29iamVjdCBNYXBdJyxcblx0ICAgIG51bWJlclRhZyA9ICdbb2JqZWN0IE51bWJlcl0nLFxuXHQgICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XScsXG5cdCAgICByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJyxcblx0ICAgIHNldFRhZyA9ICdbb2JqZWN0IFNldF0nLFxuXHQgICAgc3RyaW5nVGFnID0gJ1tvYmplY3QgU3RyaW5nXScsXG5cdCAgICB3ZWFrTWFwVGFnID0gJ1tvYmplY3QgV2Vha01hcF0nO1xuXHRcblx0dmFyIGFycmF5QnVmZmVyVGFnID0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJyxcblx0ICAgIGRhdGFWaWV3VGFnID0gJ1tvYmplY3QgRGF0YVZpZXddJyxcblx0ICAgIGZsb2F0MzJUYWcgPSAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcblx0ICAgIGZsb2F0NjRUYWcgPSAnW29iamVjdCBGbG9hdDY0QXJyYXldJyxcblx0ICAgIGludDhUYWcgPSAnW29iamVjdCBJbnQ4QXJyYXldJyxcblx0ICAgIGludDE2VGFnID0gJ1tvYmplY3QgSW50MTZBcnJheV0nLFxuXHQgICAgaW50MzJUYWcgPSAnW29iamVjdCBJbnQzMkFycmF5XScsXG5cdCAgICB1aW50OFRhZyA9ICdbb2JqZWN0IFVpbnQ4QXJyYXldJyxcblx0ICAgIHVpbnQ4Q2xhbXBlZFRhZyA9ICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG5cdCAgICB1aW50MTZUYWcgPSAnW29iamVjdCBVaW50MTZBcnJheV0nLFxuXHQgICAgdWludDMyVGFnID0gJ1tvYmplY3QgVWludDMyQXJyYXldJztcblx0XG5cdC8qKiBVc2VkIHRvIGlkZW50aWZ5IGB0b1N0cmluZ1RhZ2AgdmFsdWVzIG9mIHR5cGVkIGFycmF5cy4gKi9cblx0dmFyIHR5cGVkQXJyYXlUYWdzID0ge307XG5cdHR5cGVkQXJyYXlUYWdzW2Zsb2F0MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbZmxvYXQ2NFRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1tpbnQ4VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2ludDE2VGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW2ludDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQ4VGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW3VpbnQ4Q2xhbXBlZFRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50MTZUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbdWludDMyVGFnXSA9IHRydWU7XG5cdHR5cGVkQXJyYXlUYWdzW2FyZ3NUYWddID0gdHlwZWRBcnJheVRhZ3NbYXJyYXlUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbYXJyYXlCdWZmZXJUYWddID0gdHlwZWRBcnJheVRhZ3NbYm9vbFRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1tkYXRhVmlld1RhZ10gPSB0eXBlZEFycmF5VGFnc1tkYXRlVGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW2Vycm9yVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Z1bmNUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbbWFwVGFnXSA9IHR5cGVkQXJyYXlUYWdzW251bWJlclRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1tvYmplY3RUYWddID0gdHlwZWRBcnJheVRhZ3NbcmVnZXhwVGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW3NldFRhZ10gPSB0eXBlZEFycmF5VGFnc1tzdHJpbmdUYWddID1cblx0dHlwZWRBcnJheVRhZ3Nbd2Vha01hcFRhZ10gPSBmYWxzZTtcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlXG5cdCAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgdHlwZWQgYXJyYXkuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDMuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc1R5cGVkQXJyYXkobmV3IFVpbnQ4QXJyYXkpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNUeXBlZEFycmF5KFtdKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzVHlwZWRBcnJheSh2YWx1ZSkge1xuXHQgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmXG5cdCAgICBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmICEhdHlwZWRBcnJheVRhZ3Nbb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSldO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzVHlwZWRBcnJheTtcblxuXG4vKioqLyB9LFxuLyogMTU1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgTWFwQ2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0XG5cdC8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG5cdHZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgbWVtb2l6ZXMgdGhlIHJlc3VsdCBvZiBgZnVuY2AuIElmIGByZXNvbHZlcmAgaXNcblx0ICogcHJvdmlkZWQsIGl0IGRldGVybWluZXMgdGhlIGNhY2hlIGtleSBmb3Igc3RvcmluZyB0aGUgcmVzdWx0IGJhc2VkIG9uIHRoZVxuXHQgKiBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIG1lbW9pemVkIGZ1bmN0aW9uLiBCeSBkZWZhdWx0LCB0aGUgZmlyc3QgYXJndW1lbnRcblx0ICogcHJvdmlkZWQgdG8gdGhlIG1lbW9pemVkIGZ1bmN0aW9uIGlzIHVzZWQgYXMgdGhlIG1hcCBjYWNoZSBrZXkuIFRoZSBgZnVuY2Bcblx0ICogaXMgaW52b2tlZCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24uXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGUgY2FjaGUgaXMgZXhwb3NlZCBhcyB0aGUgYGNhY2hlYCBwcm9wZXJ0eSBvbiB0aGUgbWVtb2l6ZWRcblx0ICogZnVuY3Rpb24uIEl0cyBjcmVhdGlvbiBtYXkgYmUgY3VzdG9taXplZCBieSByZXBsYWNpbmcgdGhlIGBfLm1lbW9pemUuQ2FjaGVgXG5cdCAqIGNvbnN0cnVjdG9yIHdpdGggb25lIHdob3NlIGluc3RhbmNlcyBpbXBsZW1lbnQgdGhlXG5cdCAqIFtgTWFwYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtcHJvcGVydGllcy1vZi10aGUtbWFwLXByb3RvdHlwZS1vYmplY3QpXG5cdCAqIG1ldGhvZCBpbnRlcmZhY2Ugb2YgYGRlbGV0ZWAsIGBnZXRgLCBgaGFzYCwgYW5kIGBzZXRgLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gaGF2ZSBpdHMgb3V0cHV0IG1lbW9pemVkLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcmVzb2x2ZXJdIFRoZSBmdW5jdGlvbiB0byByZXNvbHZlIHRoZSBjYWNoZSBrZXkuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IG1lbW9pemVkIGZ1bmN0aW9uLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEsICdiJzogMiB9O1xuXHQgKiB2YXIgb3RoZXIgPSB7ICdjJzogMywgJ2QnOiA0IH07XG5cdCAqXG5cdCAqIHZhciB2YWx1ZXMgPSBfLm1lbW9pemUoXy52YWx1ZXMpO1xuXHQgKiB2YWx1ZXMob2JqZWN0KTtcblx0ICogLy8gPT4gWzEsIDJdXG5cdCAqXG5cdCAqIHZhbHVlcyhvdGhlcik7XG5cdCAqIC8vID0+IFszLCA0XVxuXHQgKlxuXHQgKiBvYmplY3QuYSA9IDI7XG5cdCAqIHZhbHVlcyhvYmplY3QpO1xuXHQgKiAvLyA9PiBbMSwgMl1cblx0ICpcblx0ICogLy8gTW9kaWZ5IHRoZSByZXN1bHQgY2FjaGUuXG5cdCAqIHZhbHVlcy5jYWNoZS5zZXQob2JqZWN0LCBbJ2EnLCAnYiddKTtcblx0ICogdmFsdWVzKG9iamVjdCk7XG5cdCAqIC8vID0+IFsnYScsICdiJ11cblx0ICpcblx0ICogLy8gUmVwbGFjZSBgXy5tZW1vaXplLkNhY2hlYC5cblx0ICogXy5tZW1vaXplLkNhY2hlID0gV2Vha01hcDtcblx0ICovXG5cdGZ1bmN0aW9uIG1lbW9pemUoZnVuYywgcmVzb2x2ZXIpIHtcblx0ICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJyB8fCAocmVzb2x2ZXIgJiYgdHlwZW9mIHJlc29sdmVyICE9ICdmdW5jdGlvbicpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG5cdCAgfVxuXHQgIHZhciBtZW1vaXplZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG5cdCAgICAgICAga2V5ID0gcmVzb2x2ZXIgPyByZXNvbHZlci5hcHBseSh0aGlzLCBhcmdzKSA6IGFyZ3NbMF0sXG5cdCAgICAgICAgY2FjaGUgPSBtZW1vaXplZC5jYWNoZTtcblx0XG5cdCAgICBpZiAoY2FjaGUuaGFzKGtleSkpIHtcblx0ICAgICAgcmV0dXJuIGNhY2hlLmdldChrZXkpO1xuXHQgICAgfVxuXHQgICAgdmFyIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICBtZW1vaXplZC5jYWNoZSA9IGNhY2hlLnNldChrZXksIHJlc3VsdCk7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH07XG5cdCAgbWVtb2l6ZWQuY2FjaGUgPSBuZXcgKG1lbW9pemUuQ2FjaGUgfHwgTWFwQ2FjaGUpO1xuXHQgIHJldHVybiBtZW1vaXplZDtcblx0fVxuXHRcblx0Ly8gQXNzaWduIGNhY2hlIHRvIGBfLm1lbW9pemVgLlxuXHRtZW1vaXplLkNhY2hlID0gTWFwQ2FjaGU7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG1lbW9pemU7XG5cblxuLyoqKi8gfSxcbi8qIDE1NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuXHQgKiB0aGUgVW5peCBlcG9jaCAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMi40LjBcblx0ICogQGNhdGVnb3J5IERhdGVcblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXN0YW1wLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmRlZmVyKGZ1bmN0aW9uKHN0YW1wKSB7XG5cdCAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTtcblx0ICogfSwgXy5ub3coKSk7XG5cdCAqIC8vID0+IExvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGludm9jYXRpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBub3coKSB7XG5cdCAgcmV0dXJuIERhdGUubm93KCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbm93O1xuXG5cbi8qKiovIH0sXG4vKiAxNTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KSxcblx0ICAgIGJhc2VQcm9wZXJ0eURlZXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNSksXG5cdCAgICBpc0tleSA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpLFxuXHQgICAgdG9LZXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSB2YWx1ZSBhdCBgcGF0aGAgb2YgYSBnaXZlbiBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDIuNC4wXG5cdCAqIEBjYXRlZ29yeSBVdGlsXG5cdCAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiB2YXIgb2JqZWN0cyA9IFtcblx0ICogICB7ICdhJzogeyAnYic6IDIgfSB9LFxuXHQgKiAgIHsgJ2EnOiB7ICdiJzogMSB9IH1cblx0ICogXTtcblx0ICpcblx0ICogXy5tYXAob2JqZWN0cywgXy5wcm9wZXJ0eSgnYS5iJykpO1xuXHQgKiAvLyA9PiBbMiwgMV1cblx0ICpcblx0ICogXy5tYXAoXy5zb3J0Qnkob2JqZWN0cywgXy5wcm9wZXJ0eShbJ2EnLCAnYiddKSksICdhLmInKTtcblx0ICogLy8gPT4gWzEsIDJdXG5cdCAqL1xuXHRmdW5jdGlvbiBwcm9wZXJ0eShwYXRoKSB7XG5cdCAgcmV0dXJuIGlzS2V5KHBhdGgpID8gYmFzZVByb3BlcnR5KHRvS2V5KHBhdGgpKSA6IGJhc2VQcm9wZXJ0eURlZXAocGF0aCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gcHJvcGVydHk7XG5cblxuLyoqKi8gfSxcbi8qIDE1OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGFwcGx5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MyksXG5cdCAgICB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0XG5cdC8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG5cdHZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG5cdHZhciBuYXRpdmVNYXggPSBNYXRoLm1heDtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGVcblx0ICogY3JlYXRlZCBmdW5jdGlvbiBhbmQgYXJndW1lbnRzIGZyb20gYHN0YXJ0YCBhbmQgYmV5b25kIHByb3ZpZGVkIGFzXG5cdCAqIGFuIGFycmF5LlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgYmFzZWQgb24gdGhlXG5cdCAqIFtyZXN0IHBhcmFtZXRlcl0oaHR0cHM6Ly9tZG4uaW8vcmVzdF9wYXJhbWV0ZXJzKS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IEZ1bmN0aW9uXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGFwcGx5IGEgcmVzdCBwYXJhbWV0ZXIgdG8uXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9ZnVuYy5sZW5ndGgtMV0gVGhlIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSByZXN0IHBhcmFtZXRlci5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIHZhciBzYXkgPSBfLnJlc3QoZnVuY3Rpb24od2hhdCwgbmFtZXMpIHtcblx0ICogICByZXR1cm4gd2hhdCArICcgJyArIF8uaW5pdGlhbChuYW1lcykuam9pbignLCAnKSArXG5cdCAqICAgICAoXy5zaXplKG5hbWVzKSA+IDEgPyAnLCAmICcgOiAnJykgKyBfLmxhc3QobmFtZXMpO1xuXHQgKiB9KTtcblx0ICpcblx0ICogc2F5KCdoZWxsbycsICdmcmVkJywgJ2Jhcm5leScsICdwZWJibGVzJyk7XG5cdCAqIC8vID0+ICdoZWxsbyBmcmVkLCBiYXJuZXksICYgcGViYmxlcydcblx0ICovXG5cdGZ1bmN0aW9uIHJlc3QoZnVuYywgc3RhcnQpIHtcblx0ICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuXHQgIH1cblx0ICBzdGFydCA9IG5hdGl2ZU1heChzdGFydCA9PT0gdW5kZWZpbmVkID8gKGZ1bmMubGVuZ3RoIC0gMSkgOiB0b0ludGVnZXIoc3RhcnQpLCAwKTtcblx0ICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcblx0ICAgICAgICBpbmRleCA9IC0xLFxuXHQgICAgICAgIGxlbmd0aCA9IG5hdGl2ZU1heChhcmdzLmxlbmd0aCAtIHN0YXJ0LCAwKSxcblx0ICAgICAgICBhcnJheSA9IEFycmF5KGxlbmd0aCk7XG5cdFxuXHQgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0ICAgICAgYXJyYXlbaW5kZXhdID0gYXJnc1tzdGFydCArIGluZGV4XTtcblx0ICAgIH1cblx0ICAgIHN3aXRjaCAoc3RhcnQpIHtcblx0ICAgICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFycmF5KTtcblx0ICAgICAgY2FzZSAxOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3NbMF0sIGFycmF5KTtcblx0ICAgICAgY2FzZSAyOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFycmF5KTtcblx0ICAgIH1cblx0ICAgIHZhciBvdGhlckFyZ3MgPSBBcnJheShzdGFydCArIDEpO1xuXHQgICAgaW5kZXggPSAtMTtcblx0ICAgIHdoaWxlICgrK2luZGV4IDwgc3RhcnQpIHtcblx0ICAgICAgb3RoZXJBcmdzW2luZGV4XSA9IGFyZ3NbaW5kZXhdO1xuXHQgICAgfVxuXHQgICAgb3RoZXJBcmdzW3N0YXJ0XSA9IGFycmF5O1xuXHQgICAgcmV0dXJuIGFwcGx5KGZ1bmMsIHRoaXMsIG90aGVyQXJncyk7XG5cdCAgfTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSByZXN0O1xuXG5cbi8qKiovIH0sXG4vKiAxNTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciB0b051bWJlciA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHRcblx0LyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG5cdHZhciBJTkZJTklUWSA9IDEgLyAwLFxuXHQgICAgTUFYX0lOVEVHRVIgPSAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwODtcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgZmluaXRlIG51bWJlci5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4xMi4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBudW1iZXIuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8udG9GaW5pdGUoMy4yKTtcblx0ICogLy8gPT4gMy4yXG5cdCAqXG5cdCAqIF8udG9GaW5pdGUoTnVtYmVyLk1JTl9WQUxVRSk7XG5cdCAqIC8vID0+IDVlLTMyNFxuXHQgKlxuXHQgKiBfLnRvRmluaXRlKEluZmluaXR5KTtcblx0ICogLy8gPT4gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDhcblx0ICpcblx0ICogXy50b0Zpbml0ZSgnMy4yJyk7XG5cdCAqIC8vID0+IDMuMlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9GaW5pdGUodmFsdWUpIHtcblx0ICBpZiAoIXZhbHVlKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6IDA7XG5cdCAgfVxuXHQgIHZhbHVlID0gdG9OdW1iZXIodmFsdWUpO1xuXHQgIGlmICh2YWx1ZSA9PT0gSU5GSU5JVFkgfHwgdmFsdWUgPT09IC1JTkZJTklUWSkge1xuXHQgICAgdmFyIHNpZ24gPSAodmFsdWUgPCAwID8gLTEgOiAxKTtcblx0ICAgIHJldHVybiBzaWduICogTUFYX0lOVEVHRVI7XG5cdCAgfVxuXHQgIHJldHVybiB2YWx1ZSA9PT0gdmFsdWUgPyB2YWx1ZSA6IDA7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gdG9GaW5pdGU7XG5cblxuLyoqKi8gfSxcbi8qIDE2MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VUb1N0cmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA3KTtcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQgZm9yIGBudWxsYFxuXHQgKiBhbmQgYHVuZGVmaW5lZGAgdmFsdWVzLiBUaGUgc2lnbiBvZiBgLTBgIGlzIHByZXNlcnZlZC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cblx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLnRvU3RyaW5nKG51bGwpO1xuXHQgKiAvLyA9PiAnJ1xuXHQgKlxuXHQgKiBfLnRvU3RyaW5nKC0wKTtcblx0ICogLy8gPT4gJy0wJ1xuXHQgKlxuXHQgKiBfLnRvU3RyaW5nKFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+ICcxLDIsMydcblx0ICovXG5cdGZ1bmN0aW9uIHRvU3RyaW5nKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IGJhc2VUb1N0cmluZyh2YWx1ZSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gdG9TdHJpbmc7XG5cblxuLyoqKi8gfSxcbi8qIDE2MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xuXHQvKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgQmVnaW4gcHJpc20tY29yZS5qc1xuXHQqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cdFxuXHR2YXIgX3NlbGYgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpXG5cdFx0PyB3aW5kb3cgICAvLyBpZiBpbiBicm93c2VyXG5cdFx0OiAoXG5cdFx0XHQodHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAndW5kZWZpbmVkJyAmJiBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGUpXG5cdFx0XHQ/IHNlbGYgLy8gaWYgaW4gd29ya2VyXG5cdFx0XHQ6IHt9ICAgLy8gaWYgaW4gbm9kZSBqc1xuXHRcdCk7XG5cdFxuXHQvKipcblx0ICogUHJpc206IExpZ2h0d2VpZ2h0LCByb2J1c3QsIGVsZWdhbnQgc3ludGF4IGhpZ2hsaWdodGluZ1xuXHQgKiBNSVQgbGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocC9cblx0ICogQGF1dGhvciBMZWEgVmVyb3UgaHR0cDovL2xlYS52ZXJvdS5tZVxuXHQgKi9cblx0XG5cdHZhciBQcmlzbSA9IChmdW5jdGlvbigpe1xuXHRcblx0Ly8gUHJpdmF0ZSBoZWxwZXIgdmFyc1xuXHR2YXIgbGFuZyA9IC9cXGJsYW5nKD86dWFnZSk/LShcXHcrKVxcYi9pO1xuXHR2YXIgdW5pcXVlSWQgPSAwO1xuXHRcblx0dmFyIF8gPSBfc2VsZi5QcmlzbSA9IHtcblx0XHR1dGlsOiB7XG5cdFx0XHRlbmNvZGU6IGZ1bmN0aW9uICh0b2tlbnMpIHtcblx0XHRcdFx0aWYgKHRva2VucyBpbnN0YW5jZW9mIFRva2VuKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBUb2tlbih0b2tlbnMudHlwZSwgXy51dGlsLmVuY29kZSh0b2tlbnMuY29udGVudCksIHRva2Vucy5hbGlhcyk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoXy51dGlsLnR5cGUodG9rZW5zKSA9PT0gJ0FycmF5Jykge1xuXHRcdFx0XHRcdHJldHVybiB0b2tlbnMubWFwKF8udXRpbC5lbmNvZGUpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiB0b2tlbnMucmVwbGFjZSgvJi9nLCAnJmFtcDsnKS5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvXFx1MDBhMC9nLCAnICcpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcblx0XHRcdHR5cGU6IGZ1bmN0aW9uIChvKSB7XG5cdFx0XHRcdHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykubWF0Y2goL1xcW29iamVjdCAoXFx3KylcXF0vKVsxXTtcblx0XHRcdH0sXG5cdFxuXHRcdFx0b2JqSWQ6IGZ1bmN0aW9uIChvYmopIHtcblx0XHRcdFx0aWYgKCFvYmpbJ19faWQnXSkge1xuXHRcdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosICdfX2lkJywgeyB2YWx1ZTogKyt1bmlxdWVJZCB9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gb2JqWydfX2lkJ107XG5cdFx0XHR9LFxuXHRcblx0XHRcdC8vIERlZXAgY2xvbmUgYSBsYW5ndWFnZSBkZWZpbml0aW9uIChlLmcuIHRvIGV4dGVuZCBpdClcblx0XHRcdGNsb25lOiBmdW5jdGlvbiAobykge1xuXHRcdFx0XHR2YXIgdHlwZSA9IF8udXRpbC50eXBlKG8pO1xuXHRcblx0XHRcdFx0c3dpdGNoICh0eXBlKSB7XG5cdFx0XHRcdFx0Y2FzZSAnT2JqZWN0Jzpcblx0XHRcdFx0XHRcdHZhciBjbG9uZSA9IHt9O1xuXHRcblx0XHRcdFx0XHRcdGZvciAodmFyIGtleSBpbiBvKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChvLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0XHRcdFx0XHRcdFx0XHRjbG9uZVtrZXldID0gXy51dGlsLmNsb25lKG9ba2V5XSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRyZXR1cm4gY2xvbmU7XG5cdFxuXHRcdFx0XHRcdGNhc2UgJ0FycmF5Jzpcblx0XHRcdFx0XHRcdC8vIENoZWNrIGZvciBleGlzdGVuY2UgZm9yIElFOFxuXHRcdFx0XHRcdFx0cmV0dXJuIG8ubWFwICYmIG8ubWFwKGZ1bmN0aW9uKHYpIHsgcmV0dXJuIF8udXRpbC5jbG9uZSh2KTsgfSk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHJldHVybiBvO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFxuXHRcdGxhbmd1YWdlczoge1xuXHRcdFx0ZXh0ZW5kOiBmdW5jdGlvbiAoaWQsIHJlZGVmKSB7XG5cdFx0XHRcdHZhciBsYW5nID0gXy51dGlsLmNsb25lKF8ubGFuZ3VhZ2VzW2lkXSk7XG5cdFxuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gcmVkZWYpIHtcblx0XHRcdFx0XHRsYW5nW2tleV0gPSByZWRlZltrZXldO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRyZXR1cm4gbGFuZztcblx0XHRcdH0sXG5cdFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBJbnNlcnQgYSB0b2tlbiBiZWZvcmUgYW5vdGhlciB0b2tlbiBpbiBhIGxhbmd1YWdlIGxpdGVyYWxcblx0XHRcdCAqIEFzIHRoaXMgbmVlZHMgdG8gcmVjcmVhdGUgdGhlIG9iamVjdCAod2UgY2Fubm90IGFjdHVhbGx5IGluc2VydCBiZWZvcmUga2V5cyBpbiBvYmplY3QgbGl0ZXJhbHMpLFxuXHRcdFx0ICogd2UgY2Fubm90IGp1c3QgcHJvdmlkZSBhbiBvYmplY3QsIHdlIG5lZWQgYW5vYmplY3QgYW5kIGEga2V5LlxuXHRcdFx0ICogQHBhcmFtIGluc2lkZSBUaGUga2V5IChvciBsYW5ndWFnZSBpZCkgb2YgdGhlIHBhcmVudFxuXHRcdFx0ICogQHBhcmFtIGJlZm9yZSBUaGUga2V5IHRvIGluc2VydCBiZWZvcmUuIElmIG5vdCBwcm92aWRlZCwgdGhlIGZ1bmN0aW9uIGFwcGVuZHMgaW5zdGVhZC5cblx0XHRcdCAqIEBwYXJhbSBpbnNlcnQgT2JqZWN0IHdpdGggdGhlIGtleS92YWx1ZSBwYWlycyB0byBpbnNlcnRcblx0XHRcdCAqIEBwYXJhbSByb290IFRoZSBvYmplY3QgdGhhdCBjb250YWlucyBgaW5zaWRlYC4gSWYgZXF1YWwgdG8gUHJpc20ubGFuZ3VhZ2VzLCBpdCBjYW4gYmUgb21pdHRlZC5cblx0XHRcdCAqL1xuXHRcdFx0aW5zZXJ0QmVmb3JlOiBmdW5jdGlvbiAoaW5zaWRlLCBiZWZvcmUsIGluc2VydCwgcm9vdCkge1xuXHRcdFx0XHRyb290ID0gcm9vdCB8fCBfLmxhbmd1YWdlcztcblx0XHRcdFx0dmFyIGdyYW1tYXIgPSByb290W2luc2lkZV07XG5cdFxuXHRcdFx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAyKSB7XG5cdFx0XHRcdFx0aW5zZXJ0ID0gYXJndW1lbnRzWzFdO1xuXHRcblx0XHRcdFx0XHRmb3IgKHZhciBuZXdUb2tlbiBpbiBpbnNlcnQpIHtcblx0XHRcdFx0XHRcdGlmIChpbnNlcnQuaGFzT3duUHJvcGVydHkobmV3VG9rZW4pKSB7XG5cdFx0XHRcdFx0XHRcdGdyYW1tYXJbbmV3VG9rZW5dID0gaW5zZXJ0W25ld1Rva2VuXTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdHJldHVybiBncmFtbWFyO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHR2YXIgcmV0ID0ge307XG5cdFxuXHRcdFx0XHRmb3IgKHZhciB0b2tlbiBpbiBncmFtbWFyKSB7XG5cdFxuXHRcdFx0XHRcdGlmIChncmFtbWFyLmhhc093blByb3BlcnR5KHRva2VuKSkge1xuXHRcblx0XHRcdFx0XHRcdGlmICh0b2tlbiA9PSBiZWZvcmUpIHtcblx0XG5cdFx0XHRcdFx0XHRcdGZvciAodmFyIG5ld1Rva2VuIGluIGluc2VydCkge1xuXHRcblx0XHRcdFx0XHRcdFx0XHRpZiAoaW5zZXJ0Lmhhc093blByb3BlcnR5KG5ld1Rva2VuKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0W25ld1Rva2VuXSA9IGluc2VydFtuZXdUb2tlbl07XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0cmV0W3Rva2VuXSA9IGdyYW1tYXJbdG9rZW5dO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gVXBkYXRlIHJlZmVyZW5jZXMgaW4gb3RoZXIgbGFuZ3VhZ2UgZGVmaW5pdGlvbnNcblx0XHRcdFx0Xy5sYW5ndWFnZXMuREZTKF8ubGFuZ3VhZ2VzLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG5cdFx0XHRcdFx0aWYgKHZhbHVlID09PSByb290W2luc2lkZV0gJiYga2V5ICE9IGluc2lkZSkge1xuXHRcdFx0XHRcdFx0dGhpc1trZXldID0gcmV0O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFxuXHRcdFx0XHRyZXR1cm4gcm9vdFtpbnNpZGVdID0gcmV0O1xuXHRcdFx0fSxcblx0XG5cdFx0XHQvLyBUcmF2ZXJzZSBhIGxhbmd1YWdlIGRlZmluaXRpb24gd2l0aCBEZXB0aCBGaXJzdCBTZWFyY2hcblx0XHRcdERGUzogZnVuY3Rpb24obywgY2FsbGJhY2ssIHR5cGUsIHZpc2l0ZWQpIHtcblx0XHRcdFx0dmlzaXRlZCA9IHZpc2l0ZWQgfHwge307XG5cdFx0XHRcdGZvciAodmFyIGkgaW4gbykge1xuXHRcdFx0XHRcdGlmIChvLmhhc093blByb3BlcnR5KGkpKSB7XG5cdFx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKG8sIGksIG9baV0sIHR5cGUgfHwgaSk7XG5cdFxuXHRcdFx0XHRcdFx0aWYgKF8udXRpbC50eXBlKG9baV0pID09PSAnT2JqZWN0JyAmJiAhdmlzaXRlZFtfLnV0aWwub2JqSWQob1tpXSldKSB7XG5cdFx0XHRcdFx0XHRcdHZpc2l0ZWRbXy51dGlsLm9iaklkKG9baV0pXSA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdF8ubGFuZ3VhZ2VzLkRGUyhvW2ldLCBjYWxsYmFjaywgbnVsbCwgdmlzaXRlZCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlIGlmIChfLnV0aWwudHlwZShvW2ldKSA9PT0gJ0FycmF5JyAmJiAhdmlzaXRlZFtfLnV0aWwub2JqSWQob1tpXSldKSB7XG5cdFx0XHRcdFx0XHRcdHZpc2l0ZWRbXy51dGlsLm9iaklkKG9baV0pXSA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdF8ubGFuZ3VhZ2VzLkRGUyhvW2ldLCBjYWxsYmFjaywgaSwgdmlzaXRlZCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRwbHVnaW5zOiB7fSxcblx0XG5cdFx0aGlnaGxpZ2h0QWxsOiBmdW5jdGlvbihhc3luYywgY2FsbGJhY2spIHtcblx0XHRcdHZhciBlbnYgPSB7XG5cdFx0XHRcdGNhbGxiYWNrOiBjYWxsYmFjayxcblx0XHRcdFx0c2VsZWN0b3I6ICdjb2RlW2NsYXNzKj1cImxhbmd1YWdlLVwiXSwgW2NsYXNzKj1cImxhbmd1YWdlLVwiXSBjb2RlLCBjb2RlW2NsYXNzKj1cImxhbmctXCJdLCBbY2xhc3MqPVwibGFuZy1cIl0gY29kZSdcblx0XHRcdH07XG5cdFxuXHRcdFx0Xy5ob29rcy5ydW4oXCJiZWZvcmUtaGlnaGxpZ2h0YWxsXCIsIGVudik7XG5cdFxuXHRcdFx0dmFyIGVsZW1lbnRzID0gZW52LmVsZW1lbnRzIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZW52LnNlbGVjdG9yKTtcblx0XG5cdFx0XHRmb3IgKHZhciBpPTAsIGVsZW1lbnQ7IGVsZW1lbnQgPSBlbGVtZW50c1tpKytdOykge1xuXHRcdFx0XHRfLmhpZ2hsaWdodEVsZW1lbnQoZWxlbWVudCwgYXN5bmMgPT09IHRydWUsIGVudi5jYWxsYmFjayk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0aGlnaGxpZ2h0RWxlbWVudDogZnVuY3Rpb24oZWxlbWVudCwgYXN5bmMsIGNhbGxiYWNrKSB7XG5cdFx0XHQvLyBGaW5kIGxhbmd1YWdlXG5cdFx0XHR2YXIgbGFuZ3VhZ2UsIGdyYW1tYXIsIHBhcmVudCA9IGVsZW1lbnQ7XG5cdFxuXHRcdFx0d2hpbGUgKHBhcmVudCAmJiAhbGFuZy50ZXN0KHBhcmVudC5jbGFzc05hbWUpKSB7XG5cdFx0XHRcdHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlO1xuXHRcdFx0fVxuXHRcblx0XHRcdGlmIChwYXJlbnQpIHtcblx0XHRcdFx0bGFuZ3VhZ2UgPSAocGFyZW50LmNsYXNzTmFtZS5tYXRjaChsYW5nKSB8fCBbLCcnXSlbMV0udG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0Z3JhbW1hciA9IF8ubGFuZ3VhZ2VzW2xhbmd1YWdlXTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBTZXQgbGFuZ3VhZ2Ugb24gdGhlIGVsZW1lbnQsIGlmIG5vdCBwcmVzZW50XG5cdFx0XHRlbGVtZW50LmNsYXNzTmFtZSA9IGVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UobGFuZywgJycpLnJlcGxhY2UoL1xccysvZywgJyAnKSArICcgbGFuZ3VhZ2UtJyArIGxhbmd1YWdlO1xuXHRcblx0XHRcdC8vIFNldCBsYW5ndWFnZSBvbiB0aGUgcGFyZW50LCBmb3Igc3R5bGluZ1xuXHRcdFx0cGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuXHRcblx0XHRcdGlmICgvcHJlL2kudGVzdChwYXJlbnQubm9kZU5hbWUpKSB7XG5cdFx0XHRcdHBhcmVudC5jbGFzc05hbWUgPSBwYXJlbnQuY2xhc3NOYW1lLnJlcGxhY2UobGFuZywgJycpLnJlcGxhY2UoL1xccysvZywgJyAnKSArICcgbGFuZ3VhZ2UtJyArIGxhbmd1YWdlO1xuXHRcdFx0fVxuXHRcblx0XHRcdHZhciBjb2RlID0gZWxlbWVudC50ZXh0Q29udGVudDtcblx0XG5cdFx0XHR2YXIgZW52ID0ge1xuXHRcdFx0XHRlbGVtZW50OiBlbGVtZW50LFxuXHRcdFx0XHRsYW5ndWFnZTogbGFuZ3VhZ2UsXG5cdFx0XHRcdGdyYW1tYXI6IGdyYW1tYXIsXG5cdFx0XHRcdGNvZGU6IGNvZGVcblx0XHRcdH07XG5cdFxuXHRcdFx0Xy5ob29rcy5ydW4oJ2JlZm9yZS1zYW5pdHktY2hlY2snLCBlbnYpO1xuXHRcblx0XHRcdGlmICghZW52LmNvZGUgfHwgIWVudi5ncmFtbWFyKSB7XG5cdFx0XHRcdF8uaG9va3MucnVuKCdjb21wbGV0ZScsIGVudik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XG5cdFx0XHRfLmhvb2tzLnJ1bignYmVmb3JlLWhpZ2hsaWdodCcsIGVudik7XG5cdFxuXHRcdFx0aWYgKGFzeW5jICYmIF9zZWxmLldvcmtlcikge1xuXHRcdFx0XHR2YXIgd29ya2VyID0gbmV3IFdvcmtlcihfLmZpbGVuYW1lKTtcblx0XG5cdFx0XHRcdHdvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldnQpIHtcblx0XHRcdFx0XHRlbnYuaGlnaGxpZ2h0ZWRDb2RlID0gZXZ0LmRhdGE7XG5cdFxuXHRcdFx0XHRcdF8uaG9va3MucnVuKCdiZWZvcmUtaW5zZXJ0JywgZW52KTtcblx0XG5cdFx0XHRcdFx0ZW52LmVsZW1lbnQuaW5uZXJIVE1MID0gZW52LmhpZ2hsaWdodGVkQ29kZTtcblx0XG5cdFx0XHRcdFx0Y2FsbGJhY2sgJiYgY2FsbGJhY2suY2FsbChlbnYuZWxlbWVudCk7XG5cdFx0XHRcdFx0Xy5ob29rcy5ydW4oJ2FmdGVyLWhpZ2hsaWdodCcsIGVudik7XG5cdFx0XHRcdFx0Xy5ob29rcy5ydW4oJ2NvbXBsZXRlJywgZW52KTtcblx0XHRcdFx0fTtcblx0XG5cdFx0XHRcdHdvcmtlci5wb3N0TWVzc2FnZShKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRcdFx0bGFuZ3VhZ2U6IGVudi5sYW5ndWFnZSxcblx0XHRcdFx0XHRjb2RlOiBlbnYuY29kZSxcblx0XHRcdFx0XHRpbW1lZGlhdGVDbG9zZTogdHJ1ZVxuXHRcdFx0XHR9KSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0ZW52LmhpZ2hsaWdodGVkQ29kZSA9IF8uaGlnaGxpZ2h0KGVudi5jb2RlLCBlbnYuZ3JhbW1hciwgZW52Lmxhbmd1YWdlKTtcblx0XG5cdFx0XHRcdF8uaG9va3MucnVuKCdiZWZvcmUtaW5zZXJ0JywgZW52KTtcblx0XG5cdFx0XHRcdGVudi5lbGVtZW50LmlubmVySFRNTCA9IGVudi5oaWdobGlnaHRlZENvZGU7XG5cdFxuXHRcdFx0XHRjYWxsYmFjayAmJiBjYWxsYmFjay5jYWxsKGVsZW1lbnQpO1xuXHRcblx0XHRcdFx0Xy5ob29rcy5ydW4oJ2FmdGVyLWhpZ2hsaWdodCcsIGVudik7XG5cdFx0XHRcdF8uaG9va3MucnVuKCdjb21wbGV0ZScsIGVudik7XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0aGlnaGxpZ2h0OiBmdW5jdGlvbiAodGV4dCwgZ3JhbW1hciwgbGFuZ3VhZ2UpIHtcblx0XHRcdHZhciB0b2tlbnMgPSBfLnRva2VuaXplKHRleHQsIGdyYW1tYXIpO1xuXHRcdFx0cmV0dXJuIFRva2VuLnN0cmluZ2lmeShfLnV0aWwuZW5jb2RlKHRva2VucyksIGxhbmd1YWdlKTtcblx0XHR9LFxuXHRcblx0XHR0b2tlbml6ZTogZnVuY3Rpb24odGV4dCwgZ3JhbW1hciwgbGFuZ3VhZ2UpIHtcblx0XHRcdHZhciBUb2tlbiA9IF8uVG9rZW47XG5cdFxuXHRcdFx0dmFyIHN0cmFyciA9IFt0ZXh0XTtcblx0XG5cdFx0XHR2YXIgcmVzdCA9IGdyYW1tYXIucmVzdDtcblx0XG5cdFx0XHRpZiAocmVzdCkge1xuXHRcdFx0XHRmb3IgKHZhciB0b2tlbiBpbiByZXN0KSB7XG5cdFx0XHRcdFx0Z3JhbW1hclt0b2tlbl0gPSByZXN0W3Rva2VuXTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0ZGVsZXRlIGdyYW1tYXIucmVzdDtcblx0XHRcdH1cblx0XG5cdFx0XHR0b2tlbmxvb3A6IGZvciAodmFyIHRva2VuIGluIGdyYW1tYXIpIHtcblx0XHRcdFx0aWYoIWdyYW1tYXIuaGFzT3duUHJvcGVydHkodG9rZW4pIHx8ICFncmFtbWFyW3Rva2VuXSkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHR2YXIgcGF0dGVybnMgPSBncmFtbWFyW3Rva2VuXTtcblx0XHRcdFx0cGF0dGVybnMgPSAoXy51dGlsLnR5cGUocGF0dGVybnMpID09PSBcIkFycmF5XCIpID8gcGF0dGVybnMgOiBbcGF0dGVybnNdO1xuXHRcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBwYXR0ZXJucy5sZW5ndGg7ICsraikge1xuXHRcdFx0XHRcdHZhciBwYXR0ZXJuID0gcGF0dGVybnNbal0sXG5cdFx0XHRcdFx0XHRpbnNpZGUgPSBwYXR0ZXJuLmluc2lkZSxcblx0XHRcdFx0XHRcdGxvb2tiZWhpbmQgPSAhIXBhdHRlcm4ubG9va2JlaGluZCxcblx0XHRcdFx0XHRcdGdyZWVkeSA9ICEhcGF0dGVybi5ncmVlZHksXG5cdFx0XHRcdFx0XHRsb29rYmVoaW5kTGVuZ3RoID0gMCxcblx0XHRcdFx0XHRcdGFsaWFzID0gcGF0dGVybi5hbGlhcztcblx0XG5cdFx0XHRcdFx0cGF0dGVybiA9IHBhdHRlcm4ucGF0dGVybiB8fCBwYXR0ZXJuO1xuXHRcblx0XHRcdFx0XHRmb3IgKHZhciBpPTA7IGk8c3RyYXJyLmxlbmd0aDsgaSsrKSB7IC8vIERvbuKAmXQgY2FjaGUgbGVuZ3RoIGFzIGl0IGNoYW5nZXMgZHVyaW5nIHRoZSBsb29wXG5cdFxuXHRcdFx0XHRcdFx0dmFyIHN0ciA9IHN0cmFycltpXTtcblx0XG5cdFx0XHRcdFx0XHRpZiAoc3RyYXJyLmxlbmd0aCA+IHRleHQubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFNvbWV0aGluZyB3ZW50IHRlcnJpYmx5IHdyb25nLCBBQk9SVCwgQUJPUlQhXG5cdFx0XHRcdFx0XHRcdGJyZWFrIHRva2VubG9vcDtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRpZiAoc3RyIGluc3RhbmNlb2YgVG9rZW4pIHtcblx0XHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0cGF0dGVybi5sYXN0SW5kZXggPSAwO1xuXHRcblx0XHRcdFx0XHRcdHZhciBtYXRjaCA9IHBhdHRlcm4uZXhlYyhzdHIpLFxuXHRcdFx0XHRcdFx0ICAgIGRlbE51bSA9IDE7XG5cdFxuXHRcdFx0XHRcdFx0Ly8gR3JlZWR5IHBhdHRlcm5zIGNhbiBvdmVycmlkZS9yZW1vdmUgdXAgdG8gdHdvIHByZXZpb3VzbHkgbWF0Y2hlZCB0b2tlbnNcblx0XHRcdFx0XHRcdGlmICghbWF0Y2ggJiYgZ3JlZWR5ICYmIGkgIT0gc3RyYXJyLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0XHRcdFx0Ly8gUmVjb25zdHJ1Y3QgdGhlIG9yaWdpbmFsIHRleHQgdXNpbmcgdGhlIG5leHQgdHdvIHRva2Vuc1xuXHRcdFx0XHRcdFx0XHR2YXIgbmV4dFRva2VuID0gc3RyYXJyW2kgKyAxXS5tYXRjaGVkU3RyIHx8IHN0cmFycltpICsgMV0sXG5cdFx0XHRcdFx0XHRcdCAgICBjb21iU3RyID0gc3RyICsgbmV4dFRva2VuO1xuXHRcblx0XHRcdFx0XHRcdFx0aWYgKGkgPCBzdHJhcnIubGVuZ3RoIC0gMikge1xuXHRcdFx0XHRcdFx0XHRcdGNvbWJTdHIgKz0gc3RyYXJyW2kgKyAyXS5tYXRjaGVkU3RyIHx8IHN0cmFycltpICsgMl07XG5cdFx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRcdC8vIFRyeSB0aGUgcGF0dGVybiBhZ2FpbiBvbiB0aGUgcmVjb25zdHJ1Y3RlZCB0ZXh0XG5cdFx0XHRcdFx0XHRcdHBhdHRlcm4ubGFzdEluZGV4ID0gMDtcblx0XHRcdFx0XHRcdFx0bWF0Y2ggPSBwYXR0ZXJuLmV4ZWMoY29tYlN0cik7XG5cdFx0XHRcdFx0XHRcdGlmICghbWF0Y2gpIHtcblx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdFx0dmFyIGZyb20gPSBtYXRjaC5pbmRleCArIChsb29rYmVoaW5kID8gbWF0Y2hbMV0ubGVuZ3RoIDogMCk7XG5cdFx0XHRcdFx0XHRcdC8vIFRvIGJlIGEgdmFsaWQgY2FuZGlkYXRlLCB0aGUgbmV3IG1hdGNoIGhhcyB0byBzdGFydCBpbnNpZGUgb2Ygc3RyXG5cdFx0XHRcdFx0XHRcdGlmIChmcm9tID49IHN0ci5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR2YXIgdG8gPSBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCxcblx0XHRcdFx0XHRcdFx0ICAgIGxlbiA9IHN0ci5sZW5ndGggKyBuZXh0VG9rZW4ubGVuZ3RoO1xuXHRcblx0XHRcdFx0XHRcdFx0Ly8gTnVtYmVyIG9mIHRva2VucyB0byBkZWxldGUgYW5kIHJlcGxhY2Ugd2l0aCB0aGUgbmV3IG1hdGNoXG5cdFx0XHRcdFx0XHRcdGRlbE51bSA9IDM7XG5cdFxuXHRcdFx0XHRcdFx0XHRpZiAodG8gPD0gbGVuKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHN0cmFycltpICsgMV0uZ3JlZWR5KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0ZGVsTnVtID0gMjtcblx0XHRcdFx0XHRcdFx0XHRjb21iU3RyID0gY29tYlN0ci5zbGljZSgwLCBsZW4pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHN0ciA9IGNvbWJTdHI7XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0aWYgKCFtYXRjaCkge1xuXHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRpZihsb29rYmVoaW5kKSB7XG5cdFx0XHRcdFx0XHRcdGxvb2tiZWhpbmRMZW5ndGggPSBtYXRjaFsxXS5sZW5ndGg7XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0dmFyIGZyb20gPSBtYXRjaC5pbmRleCArIGxvb2tiZWhpbmRMZW5ndGgsXG5cdFx0XHRcdFx0XHQgICAgbWF0Y2ggPSBtYXRjaFswXS5zbGljZShsb29rYmVoaW5kTGVuZ3RoKSxcblx0XHRcdFx0XHRcdCAgICB0byA9IGZyb20gKyBtYXRjaC5sZW5ndGgsXG5cdFx0XHRcdFx0XHQgICAgYmVmb3JlID0gc3RyLnNsaWNlKDAsIGZyb20pLFxuXHRcdFx0XHRcdFx0ICAgIGFmdGVyID0gc3RyLnNsaWNlKHRvKTtcblx0XG5cdFx0XHRcdFx0XHR2YXIgYXJncyA9IFtpLCBkZWxOdW1dO1xuXHRcblx0XHRcdFx0XHRcdGlmIChiZWZvcmUpIHtcblx0XHRcdFx0XHRcdFx0YXJncy5wdXNoKGJlZm9yZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0dmFyIHdyYXBwZWQgPSBuZXcgVG9rZW4odG9rZW4sIGluc2lkZT8gXy50b2tlbml6ZShtYXRjaCwgaW5zaWRlKSA6IG1hdGNoLCBhbGlhcywgbWF0Y2gsIGdyZWVkeSk7XG5cdFxuXHRcdFx0XHRcdFx0YXJncy5wdXNoKHdyYXBwZWQpO1xuXHRcblx0XHRcdFx0XHRcdGlmIChhZnRlcikge1xuXHRcdFx0XHRcdFx0XHRhcmdzLnB1c2goYWZ0ZXIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdEFycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoc3RyYXJyLCBhcmdzKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gc3RyYXJyO1xuXHRcdH0sXG5cdFxuXHRcdGhvb2tzOiB7XG5cdFx0XHRhbGw6IHt9LFxuXHRcblx0XHRcdGFkZDogZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrKSB7XG5cdFx0XHRcdHZhciBob29rcyA9IF8uaG9va3MuYWxsO1xuXHRcblx0XHRcdFx0aG9va3NbbmFtZV0gPSBob29rc1tuYW1lXSB8fCBbXTtcblx0XG5cdFx0XHRcdGhvb2tzW25hbWVdLnB1c2goY2FsbGJhY2spO1xuXHRcdFx0fSxcblx0XG5cdFx0XHRydW46IGZ1bmN0aW9uIChuYW1lLCBlbnYpIHtcblx0XHRcdFx0dmFyIGNhbGxiYWNrcyA9IF8uaG9va3MuYWxsW25hbWVdO1xuXHRcblx0XHRcdFx0aWYgKCFjYWxsYmFja3MgfHwgIWNhbGxiYWNrcy5sZW5ndGgpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdGZvciAodmFyIGk9MCwgY2FsbGJhY2s7IGNhbGxiYWNrID0gY2FsbGJhY2tzW2krK107KSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soZW52KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0XG5cdHZhciBUb2tlbiA9IF8uVG9rZW4gPSBmdW5jdGlvbih0eXBlLCBjb250ZW50LCBhbGlhcywgbWF0Y2hlZFN0ciwgZ3JlZWR5KSB7XG5cdFx0dGhpcy50eXBlID0gdHlwZTtcblx0XHR0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuXHRcdHRoaXMuYWxpYXMgPSBhbGlhcztcblx0XHQvLyBDb3B5IG9mIHRoZSBmdWxsIHN0cmluZyB0aGlzIHRva2VuIHdhcyBjcmVhdGVkIGZyb21cblx0XHR0aGlzLm1hdGNoZWRTdHIgPSBtYXRjaGVkU3RyIHx8IG51bGw7XG5cdFx0dGhpcy5ncmVlZHkgPSAhIWdyZWVkeTtcblx0fTtcblx0XG5cdFRva2VuLnN0cmluZ2lmeSA9IGZ1bmN0aW9uKG8sIGxhbmd1YWdlLCBwYXJlbnQpIHtcblx0XHRpZiAodHlwZW9mIG8gPT0gJ3N0cmluZycpIHtcblx0XHRcdHJldHVybiBvO1xuXHRcdH1cblx0XG5cdFx0aWYgKF8udXRpbC50eXBlKG8pID09PSAnQXJyYXknKSB7XG5cdFx0XHRyZXR1cm4gby5tYXAoZnVuY3Rpb24oZWxlbWVudCkge1xuXHRcdFx0XHRyZXR1cm4gVG9rZW4uc3RyaW5naWZ5KGVsZW1lbnQsIGxhbmd1YWdlLCBvKTtcblx0XHRcdH0pLmpvaW4oJycpO1xuXHRcdH1cblx0XG5cdFx0dmFyIGVudiA9IHtcblx0XHRcdHR5cGU6IG8udHlwZSxcblx0XHRcdGNvbnRlbnQ6IFRva2VuLnN0cmluZ2lmeShvLmNvbnRlbnQsIGxhbmd1YWdlLCBwYXJlbnQpLFxuXHRcdFx0dGFnOiAnc3BhbicsXG5cdFx0XHRjbGFzc2VzOiBbJ3Rva2VuJywgby50eXBlXSxcblx0XHRcdGF0dHJpYnV0ZXM6IHt9LFxuXHRcdFx0bGFuZ3VhZ2U6IGxhbmd1YWdlLFxuXHRcdFx0cGFyZW50OiBwYXJlbnRcblx0XHR9O1xuXHRcblx0XHRpZiAoZW52LnR5cGUgPT0gJ2NvbW1lbnQnKSB7XG5cdFx0XHRlbnYuYXR0cmlidXRlc1snc3BlbGxjaGVjayddID0gJ3RydWUnO1xuXHRcdH1cblx0XG5cdFx0aWYgKG8uYWxpYXMpIHtcblx0XHRcdHZhciBhbGlhc2VzID0gXy51dGlsLnR5cGUoby5hbGlhcykgPT09ICdBcnJheScgPyBvLmFsaWFzIDogW28uYWxpYXNdO1xuXHRcdFx0QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoZW52LmNsYXNzZXMsIGFsaWFzZXMpO1xuXHRcdH1cblx0XG5cdFx0Xy5ob29rcy5ydW4oJ3dyYXAnLCBlbnYpO1xuXHRcblx0XHR2YXIgYXR0cmlidXRlcyA9ICcnO1xuXHRcblx0XHRmb3IgKHZhciBuYW1lIGluIGVudi5hdHRyaWJ1dGVzKSB7XG5cdFx0XHRhdHRyaWJ1dGVzICs9IChhdHRyaWJ1dGVzID8gJyAnIDogJycpICsgbmFtZSArICc9XCInICsgKGVudi5hdHRyaWJ1dGVzW25hbWVdIHx8ICcnKSArICdcIic7XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gJzwnICsgZW52LnRhZyArICcgY2xhc3M9XCInICsgZW52LmNsYXNzZXMuam9pbignICcpICsgJ1wiICcgKyBhdHRyaWJ1dGVzICsgJz4nICsgZW52LmNvbnRlbnQgKyAnPC8nICsgZW52LnRhZyArICc+Jztcblx0XG5cdH07XG5cdFxuXHRpZiAoIV9zZWxmLmRvY3VtZW50KSB7XG5cdFx0aWYgKCFfc2VsZi5hZGRFdmVudExpc3RlbmVyKSB7XG5cdFx0XHQvLyBpbiBOb2RlLmpzXG5cdFx0XHRyZXR1cm4gX3NlbGYuUHJpc207XG5cdFx0fVxuXHQgXHQvLyBJbiB3b3JrZXJcblx0XHRfc2VsZi5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZXZ0KSB7XG5cdFx0XHR2YXIgbWVzc2FnZSA9IEpTT04ucGFyc2UoZXZ0LmRhdGEpLFxuXHRcdFx0ICAgIGxhbmcgPSBtZXNzYWdlLmxhbmd1YWdlLFxuXHRcdFx0ICAgIGNvZGUgPSBtZXNzYWdlLmNvZGUsXG5cdFx0XHQgICAgaW1tZWRpYXRlQ2xvc2UgPSBtZXNzYWdlLmltbWVkaWF0ZUNsb3NlO1xuXHRcblx0XHRcdF9zZWxmLnBvc3RNZXNzYWdlKF8uaGlnaGxpZ2h0KGNvZGUsIF8ubGFuZ3VhZ2VzW2xhbmddLCBsYW5nKSk7XG5cdFx0XHRpZiAoaW1tZWRpYXRlQ2xvc2UpIHtcblx0XHRcdFx0X3NlbGYuY2xvc2UoKTtcblx0XHRcdH1cblx0XHR9LCBmYWxzZSk7XG5cdFxuXHRcdHJldHVybiBfc2VsZi5QcmlzbTtcblx0fVxuXHRcblx0Ly9HZXQgY3VycmVudCBzY3JpcHQgYW5kIGhpZ2hsaWdodFxuXHR2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdCB8fCBbXS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpKS5wb3AoKTtcblx0XG5cdGlmIChzY3JpcHQpIHtcblx0XHRfLmZpbGVuYW1lID0gc2NyaXB0LnNyYztcblx0XG5cdFx0aWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJiYgIXNjcmlwdC5oYXNBdHRyaWJ1dGUoJ2RhdGEtbWFudWFsJykpIHtcblx0XHRcdGlmKGRvY3VtZW50LnJlYWR5U3RhdGUgIT09IFwibG9hZGluZ1wiKSB7XG5cdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShfLmhpZ2hsaWdodEFsbCwgMCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIF8uaGlnaGxpZ2h0QWxsKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdHJldHVybiBfc2VsZi5QcmlzbTtcblx0XG5cdH0pKCk7XG5cdFxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IFByaXNtO1xuXHR9XG5cdFxuXHQvLyBoYWNrIGZvciBjb21wb25lbnRzIHRvIHdvcmsgY29ycmVjdGx5IGluIG5vZGUuanNcblx0aWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0Z2xvYmFsLlByaXNtID0gUHJpc207XG5cdH1cblx0XG5cdFxuXHQvKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgQmVnaW4gcHJpc20tbWFya3VwLmpzXG5cdCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblx0XG5cdFByaXNtLmxhbmd1YWdlcy5tYXJrdXAgPSB7XG5cdFx0J2NvbW1lbnQnOiAvPCEtLVtcXHdcXFddKj8tLT4vLFxuXHRcdCdwcm9sb2cnOiAvPFxcP1tcXHdcXFddKz9cXD8+Lyxcblx0XHQnZG9jdHlwZSc6IC88IURPQ1RZUEVbXFx3XFxXXSs/Pi8sXG5cdFx0J2NkYXRhJzogLzwhXFxbQ0RBVEFcXFtbXFx3XFxXXSo/XV0+L2ksXG5cdFx0J3RhZyc6IHtcblx0XHRcdHBhdHRlcm46IC88XFwvPyg/IVxcZClbXlxccz5cXC89LiQ8XSsoPzpcXHMrW15cXHM+XFwvPV0rKD86PSg/OihcInwnKSg/OlxcXFxcXDF8XFxcXD8oPyFcXDEpW1xcd1xcV10pKlxcMXxbXlxccydcIj49XSspKT8pKlxccypcXC8/Pi9pLFxuXHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdCd0YWcnOiB7XG5cdFx0XHRcdFx0cGF0dGVybjogL148XFwvP1teXFxzPlxcL10rL2ksXG5cdFx0XHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdFx0XHQncHVuY3R1YXRpb24nOiAvXjxcXC8/Lyxcblx0XHRcdFx0XHRcdCduYW1lc3BhY2UnOiAvXlteXFxzPlxcLzpdKzovXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHQnYXR0ci12YWx1ZSc6IHtcblx0XHRcdFx0XHRwYXR0ZXJuOiAvPSg/OignfFwiKVtcXHdcXFddKj8oXFwxKXxbXlxccz5dKykvaSxcblx0XHRcdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0XHRcdCdwdW5jdHVhdGlvbic6IC9bPT5cIiddL1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0J3B1bmN0dWF0aW9uJzogL1xcLz8+Lyxcblx0XHRcdFx0J2F0dHItbmFtZSc6IHtcblx0XHRcdFx0XHRwYXR0ZXJuOiAvW15cXHM+XFwvXSsvLFxuXHRcdFx0XHRcdGluc2lkZToge1xuXHRcdFx0XHRcdFx0J25hbWVzcGFjZSc6IC9eW15cXHM+XFwvOl0rOi9cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XG5cdFx0XHR9XG5cdFx0fSxcblx0XHQnZW50aXR5JzogLyYjP1tcXGRhLXpdezEsOH07L2lcblx0fTtcblx0XG5cdC8vIFBsdWdpbiB0byBtYWtlIGVudGl0eSB0aXRsZSBzaG93IHRoZSByZWFsIGVudGl0eSwgaWRlYSBieSBSb21hbiBLb21hcm92XG5cdFByaXNtLmhvb2tzLmFkZCgnd3JhcCcsIGZ1bmN0aW9uKGVudikge1xuXHRcblx0XHRpZiAoZW52LnR5cGUgPT09ICdlbnRpdHknKSB7XG5cdFx0XHRlbnYuYXR0cmlidXRlc1sndGl0bGUnXSA9IGVudi5jb250ZW50LnJlcGxhY2UoLyZhbXA7LywgJyYnKTtcblx0XHR9XG5cdH0pO1xuXHRcblx0UHJpc20ubGFuZ3VhZ2VzLnhtbCA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5cdFByaXNtLmxhbmd1YWdlcy5odG1sID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblx0UHJpc20ubGFuZ3VhZ2VzLm1hdGhtbCA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5cdFByaXNtLmxhbmd1YWdlcy5zdmcgPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwO1xuXHRcblx0XG5cdC8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICBCZWdpbiBwcmlzbS1jc3MuanNcblx0KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXHRcblx0UHJpc20ubGFuZ3VhZ2VzLmNzcyA9IHtcblx0XHQnY29tbWVudCc6IC9cXC9cXCpbXFx3XFxXXSo/XFwqXFwvLyxcblx0XHQnYXRydWxlJzoge1xuXHRcdFx0cGF0dGVybjogL0BbXFx3LV0rPy4qPyg7fCg/PVxccypcXHspKS9pLFxuXHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdCdydWxlJzogL0BbXFx3LV0rL1xuXHRcdFx0XHQvLyBTZWUgcmVzdCBiZWxvd1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0J3VybCc6IC91cmxcXCgoPzooW1wiJ10pKFxcXFwoPzpcXHJcXG58W1xcd1xcV10pfCg/IVxcMSlbXlxcXFxcXHJcXG5dKSpcXDF8Lio/KVxcKS9pLFxuXHRcdCdzZWxlY3Rvcic6IC9bXlxce1xcfVxcc11bXlxce1xcfTtdKj8oPz1cXHMqXFx7KS8sXG5cdFx0J3N0cmluZyc6IC8oXCJ8JykoXFxcXCg/OlxcclxcbnxbXFx3XFxXXSl8KD8hXFwxKVteXFxcXFxcclxcbl0pKlxcMS8sXG5cdFx0J3Byb3BlcnR5JzogLyhcXGJ8XFxCKVtcXHctXSsoPz1cXHMqOikvaSxcblx0XHQnaW1wb3J0YW50JzogL1xcQiFpbXBvcnRhbnRcXGIvaSxcblx0XHQnZnVuY3Rpb24nOiAvWy1hLXowLTldKyg/PVxcKCkvaSxcblx0XHQncHVuY3R1YXRpb24nOiAvWygpe307Ol0vXG5cdH07XG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMuY3NzWydhdHJ1bGUnXS5pbnNpZGUucmVzdCA9IFByaXNtLnV0aWwuY2xvbmUoUHJpc20ubGFuZ3VhZ2VzLmNzcyk7XG5cdFxuXHRpZiAoUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cCkge1xuXHRcdFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ21hcmt1cCcsICd0YWcnLCB7XG5cdFx0XHQnc3R5bGUnOiB7XG5cdFx0XHRcdHBhdHRlcm46IC8oPHN0eWxlW1xcd1xcV10qPz4pW1xcd1xcV10qPyg/PTxcXC9zdHlsZT4pL2ksXG5cdFx0XHRcdGxvb2tiZWhpbmQ6IHRydWUsXG5cdFx0XHRcdGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmNzcyxcblx0XHRcdFx0YWxpYXM6ICdsYW5ndWFnZS1jc3MnXG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0XG5cdFx0UHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnaW5zaWRlJywgJ2F0dHItdmFsdWUnLCB7XG5cdFx0XHQnc3R5bGUtYXR0cic6IHtcblx0XHRcdFx0cGF0dGVybjogL1xccypzdHlsZT0oXCJ8JykuKj9cXDEvaSxcblx0XHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdFx0J2F0dHItbmFtZSc6IHtcblx0XHRcdFx0XHRcdHBhdHRlcm46IC9eXFxzKnN0eWxlL2ksXG5cdFx0XHRcdFx0XHRpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5tYXJrdXAudGFnLmluc2lkZVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J3B1bmN0dWF0aW9uJzogL15cXHMqPVxccypbJ1wiXXxbJ1wiXVxccyokLyxcblx0XHRcdFx0XHQnYXR0ci12YWx1ZSc6IHtcblx0XHRcdFx0XHRcdHBhdHRlcm46IC8uKy9pLFxuXHRcdFx0XHRcdFx0aW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuY3NzXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRhbGlhczogJ2xhbmd1YWdlLWNzcydcblx0XHRcdH1cblx0XHR9LCBQcmlzbS5sYW5ndWFnZXMubWFya3VwLnRhZyk7XG5cdH1cblx0XG5cdC8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICBCZWdpbiBwcmlzbS1jbGlrZS5qc1xuXHQqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMuY2xpa2UgPSB7XG5cdFx0J2NvbW1lbnQnOiBbXG5cdFx0XHR7XG5cdFx0XHRcdHBhdHRlcm46IC8oXnxbXlxcXFxdKVxcL1xcKltcXHdcXFddKj9cXCpcXC8vLFxuXHRcdFx0XHRsb29rYmVoaW5kOiB0cnVlXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRwYXR0ZXJuOiAvKF58W15cXFxcOl0pXFwvXFwvLiovLFxuXHRcdFx0XHRsb29rYmVoaW5kOiB0cnVlXG5cdFx0XHR9XG5cdFx0XSxcblx0XHQnc3RyaW5nJzoge1xuXHRcdFx0cGF0dGVybjogLyhbXCInXSkoXFxcXCg/OlxcclxcbnxbXFxzXFxTXSl8KD8hXFwxKVteXFxcXFxcclxcbl0pKlxcMS8sXG5cdFx0XHRncmVlZHk6IHRydWVcblx0XHR9LFxuXHRcdCdjbGFzcy1uYW1lJzoge1xuXHRcdFx0cGF0dGVybjogLygoPzpcXGIoPzpjbGFzc3xpbnRlcmZhY2V8ZXh0ZW5kc3xpbXBsZW1lbnRzfHRyYWl0fGluc3RhbmNlb2Z8bmV3KVxccyspfCg/OmNhdGNoXFxzK1xcKCkpW2EtejAtOV9cXC5cXFxcXSsvaSxcblx0XHRcdGxvb2tiZWhpbmQ6IHRydWUsXG5cdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0cHVuY3R1YXRpb246IC8oXFwufFxcXFwpL1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0J2tleXdvcmQnOiAvXFxiKGlmfGVsc2V8d2hpbGV8ZG98Zm9yfHJldHVybnxpbnxpbnN0YW5jZW9mfGZ1bmN0aW9ufG5ld3x0cnl8dGhyb3d8Y2F0Y2h8ZmluYWxseXxudWxsfGJyZWFrfGNvbnRpbnVlKVxcYi8sXG5cdFx0J2Jvb2xlYW4nOiAvXFxiKHRydWV8ZmFsc2UpXFxiLyxcblx0XHQnZnVuY3Rpb24nOiAvW2EtejAtOV9dKyg/PVxcKCkvaSxcblx0XHQnbnVtYmVyJzogL1xcYi0/KD86MHhbXFxkYS1mXSt8XFxkKlxcLj9cXGQrKD86ZVsrLV0/XFxkKyk/KVxcYi9pLFxuXHRcdCdvcGVyYXRvcic6IC8tLT98XFwrXFwrP3whPT89P3w8PT98Pj0/fD09Pz0/fCYmP3xcXHxcXHw/fFxcP3xcXCp8XFwvfH58XFxefCUvLFxuXHRcdCdwdW5jdHVhdGlvbic6IC9be31bXFxdOygpLC46XS9cblx0fTtcblx0XG5cdFxuXHQvKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgQmVnaW4gcHJpc20tamF2YXNjcmlwdC5qc1xuXHQqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdCA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2NsaWtlJywge1xuXHRcdCdrZXl3b3JkJzogL1xcYihhc3xhc3luY3xhd2FpdHxicmVha3xjYXNlfGNhdGNofGNsYXNzfGNvbnN0fGNvbnRpbnVlfGRlYnVnZ2VyfGRlZmF1bHR8ZGVsZXRlfGRvfGVsc2V8ZW51bXxleHBvcnR8ZXh0ZW5kc3xmaW5hbGx5fGZvcnxmcm9tfGZ1bmN0aW9ufGdldHxpZnxpbXBsZW1lbnRzfGltcG9ydHxpbnxpbnN0YW5jZW9mfGludGVyZmFjZXxsZXR8bmV3fG51bGx8b2Z8cGFja2FnZXxwcml2YXRlfHByb3RlY3RlZHxwdWJsaWN8cmV0dXJufHNldHxzdGF0aWN8c3VwZXJ8c3dpdGNofHRoaXN8dGhyb3d8dHJ5fHR5cGVvZnx2YXJ8dm9pZHx3aGlsZXx3aXRofHlpZWxkKVxcYi8sXG5cdFx0J251bWJlcic6IC9cXGItPygweFtcXGRBLUZhLWZdK3wwYlswMV0rfDBvWzAtN10rfFxcZCpcXC4/XFxkKyhbRWVdWystXT9cXGQrKT98TmFOfEluZmluaXR5KVxcYi8sXG5cdFx0Ly8gQWxsb3cgZm9yIGFsbCBub24tQVNDSUkgY2hhcmFjdGVycyAoU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIwMDg0NDQpXG5cdFx0J2Z1bmN0aW9uJzogL1tfJGEtekEtWlxceEEwLVxcdUZGRkZdW18kYS16QS1aMC05XFx4QTAtXFx1RkZGRl0qKD89XFwoKS9pXG5cdH0pO1xuXHRcblx0UHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnamF2YXNjcmlwdCcsICdrZXl3b3JkJywge1xuXHRcdCdyZWdleCc6IHtcblx0XHRcdHBhdHRlcm46IC8oXnxbXi9dKVxcLyg/IVxcLykoXFxbLis/XXxcXFxcLnxbXi9cXFxcXFxyXFxuXSkrXFwvW2dpbXl1XXswLDV9KD89XFxzKigkfFtcXHJcXG4sLjt9KV0pKS8sXG5cdFx0XHRsb29rYmVoaW5kOiB0cnVlLFxuXHRcdFx0Z3JlZWR5OiB0cnVlXG5cdFx0fVxuXHR9KTtcblx0XG5cdFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2phdmFzY3JpcHQnLCAnc3RyaW5nJywge1xuXHRcdCd0ZW1wbGF0ZS1zdHJpbmcnOiB7XG5cdFx0XHRwYXR0ZXJuOiAvYCg/OlxcXFxcXFxcfFxcXFw/W15cXFxcXSkqP2AvLFxuXHRcdFx0Z3JlZWR5OiB0cnVlLFxuXHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdCdpbnRlcnBvbGF0aW9uJzoge1xuXHRcdFx0XHRcdHBhdHRlcm46IC9cXCRcXHtbXn1dK1xcfS8sXG5cdFx0XHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdFx0XHQnaW50ZXJwb2xhdGlvbi1wdW5jdHVhdGlvbic6IHtcblx0XHRcdFx0XHRcdFx0cGF0dGVybjogL15cXCRcXHt8XFx9JC8sXG5cdFx0XHRcdFx0XHRcdGFsaWFzOiAncHVuY3R1YXRpb24nXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0cmVzdDogUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdCdzdHJpbmcnOiAvW1xcc1xcU10rL1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cdFxuXHRpZiAoUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cCkge1xuXHRcdFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ21hcmt1cCcsICd0YWcnLCB7XG5cdFx0XHQnc2NyaXB0Jzoge1xuXHRcdFx0XHRwYXR0ZXJuOiAvKDxzY3JpcHRbXFx3XFxXXSo/PilbXFx3XFxXXSo/KD89PFxcL3NjcmlwdD4pL2ksXG5cdFx0XHRcdGxvb2tiZWhpbmQ6IHRydWUsXG5cdFx0XHRcdGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHQsXG5cdFx0XHRcdGFsaWFzOiAnbGFuZ3VhZ2UtamF2YXNjcmlwdCdcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHRcblx0UHJpc20ubGFuZ3VhZ2VzLmpzID0gUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHQ7XG5cdFxuXHQvKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgQmVnaW4gcHJpc20tZmlsZS1oaWdobGlnaHQuanNcblx0KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXHRcblx0KGZ1bmN0aW9uICgpIHtcblx0XHRpZiAodHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnIHx8ICFzZWxmLlByaXNtIHx8ICFzZWxmLmRvY3VtZW50IHx8ICFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcblx0XHRzZWxmLlByaXNtLmZpbGVIaWdobGlnaHQgPSBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHR2YXIgRXh0ZW5zaW9ucyA9IHtcblx0XHRcdFx0J2pzJzogJ2phdmFzY3JpcHQnLFxuXHRcdFx0XHQncHknOiAncHl0aG9uJyxcblx0XHRcdFx0J3JiJzogJ3J1YnknLFxuXHRcdFx0XHQncHMxJzogJ3Bvd2Vyc2hlbGwnLFxuXHRcdFx0XHQncHNtMSc6ICdwb3dlcnNoZWxsJyxcblx0XHRcdFx0J3NoJzogJ2Jhc2gnLFxuXHRcdFx0XHQnYmF0JzogJ2JhdGNoJyxcblx0XHRcdFx0J2gnOiAnYycsXG5cdFx0XHRcdCd0ZXgnOiAnbGF0ZXgnXG5cdFx0XHR9O1xuXHRcblx0XHRcdGlmKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSB7IC8vIENoZWNrIHRvIHByZXZlbnQgZXJyb3IgaW4gSUU4XG5cdFx0XHRcdEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3ByZVtkYXRhLXNyY10nKSkuZm9yRWFjaChmdW5jdGlvbiAocHJlKSB7XG5cdFx0XHRcdFx0dmFyIHNyYyA9IHByZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3JjJyk7XG5cdFxuXHRcdFx0XHRcdHZhciBsYW5ndWFnZSwgcGFyZW50ID0gcHJlO1xuXHRcdFx0XHRcdHZhciBsYW5nID0gL1xcYmxhbmcoPzp1YWdlKT8tKD8hXFwqKShcXHcrKVxcYi9pO1xuXHRcdFx0XHRcdHdoaWxlIChwYXJlbnQgJiYgIWxhbmcudGVzdChwYXJlbnQuY2xhc3NOYW1lKSkge1xuXHRcdFx0XHRcdFx0cGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRpZiAocGFyZW50KSB7XG5cdFx0XHRcdFx0XHRsYW5ndWFnZSA9IChwcmUuY2xhc3NOYW1lLm1hdGNoKGxhbmcpIHx8IFssICcnXSlbMV07XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRpZiAoIWxhbmd1YWdlKSB7XG5cdFx0XHRcdFx0XHR2YXIgZXh0ZW5zaW9uID0gKHNyYy5tYXRjaCgvXFwuKFxcdyspJC8pIHx8IFssICcnXSlbMV07XG5cdFx0XHRcdFx0XHRsYW5ndWFnZSA9IEV4dGVuc2lvbnNbZXh0ZW5zaW9uXSB8fCBleHRlbnNpb247XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHR2YXIgY29kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NvZGUnKTtcblx0XHRcdFx0XHRjb2RlLmNsYXNzTmFtZSA9ICdsYW5ndWFnZS0nICsgbGFuZ3VhZ2U7XG5cdFxuXHRcdFx0XHRcdHByZS50ZXh0Q29udGVudCA9ICcnO1xuXHRcblx0XHRcdFx0XHRjb2RlLnRleHRDb250ZW50ID0gJ0xvYWRpbmfigKYnO1xuXHRcblx0XHRcdFx0XHRwcmUuYXBwZW5kQ2hpbGQoY29kZSk7XG5cdFxuXHRcdFx0XHRcdHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XG5cdFx0XHRcdFx0eGhyLm9wZW4oJ0dFVCcsIHNyYywgdHJ1ZSk7XG5cdFxuXHRcdFx0XHRcdHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCkge1xuXHRcblx0XHRcdFx0XHRcdFx0aWYgKHhoci5zdGF0dXMgPCA0MDAgJiYgeGhyLnJlc3BvbnNlVGV4dCkge1xuXHRcdFx0XHRcdFx0XHRcdGNvZGUudGV4dENvbnRlbnQgPSB4aHIucmVzcG9uc2VUZXh0O1xuXHRcblx0XHRcdFx0XHRcdFx0XHRQcmlzbS5oaWdobGlnaHRFbGVtZW50KGNvZGUpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGVsc2UgaWYgKHhoci5zdGF0dXMgPj0gNDAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29kZS50ZXh0Q29udGVudCA9ICfinJYgRXJyb3IgJyArIHhoci5zdGF0dXMgKyAnIHdoaWxlIGZldGNoaW5nIGZpbGU6ICcgKyB4aHIuc3RhdHVzVGV4dDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRjb2RlLnRleHRDb250ZW50ID0gJ+KcliBFcnJvcjogRmlsZSBkb2VzIG5vdCBleGlzdCBvciBpcyBlbXB0eSc7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcblx0XHRcdFx0XHR4aHIuc2VuZChudWxsKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFxuXHRcdH07XG5cdFxuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBzZWxmLlByaXNtLmZpbGVIaWdobGlnaHQpO1xuXHRcblx0fSkoKTtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDE2MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjx0YWJsZSBjbGFzcz1zZ19jLWFwaS10YWJsZT4gPHRyPiA8dGg+IE5hbWUgPC90aD4gPHRoPiBUeXBlIDwvdGg+IDx0aD4gUmVxdWlyZWQgPC90aD4gPHRoPiBEZWZhdWx0IDwvdGg+IDx0aD4gRGVzY3JpcHRpb24gPC90aD4gPC90cj4gPHRyIHYtZm9yPVxcXCJpdGVtIGluIGl0ZW1zXFxcIj4gPHRkPnt7aXRlbS5uYW1lfX08L3RkPiA8dGQ+e3tpdGVtLnR5cGV9fTwvdGQ+IDx0ZD57e2l0ZW0uaXNSZXF1aXJlZH19PC90ZD4gPHRkPnt7aXRlbS5kZWZhdWx0fX08L3RkPiA8dGQ+e3tpdGVtLmRlc2N9fTwvdGQ+IDwvdHI+IDwvdGFibGU+IFwiO1xuXG4vKioqLyB9LFxuLyogMTYzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPG5hdiBjbGFzcz1cXFwic2dfYy1uYXYgaHlfdS1oaWRlIGh5X3Utc2hvd0BtZFxcXCIgQGNsaWNrPWhpZGVOYXY+IDxoMiBjbGFzcz1zZ19jLW5hdl9fc2VjdGlvbj5JTlRST0RVQ1RJT048L2gyPiA8dWwgY2xhc3M9aHlfby1saXN0IEBjbGljaz1oaWRlTmF2PiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9nZXQtc3RhcnRlZCcsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gR2V0IFN0YXJ0ZWQgPC9hPiA8L2xpPiA8L3VsPiA8aDIgY2xhc3M9c2dfYy1uYXZfX3NlY3Rpb24+Q09NUE9ORU5UUzwvaDI+IDx1bCBjbGFzcz1oeV9vLWxpc3Q+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL2FsZXJ0JywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBBbGVydCA8L2E+IDwvbGk+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL3NwaW5uZXInLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IFNwaW5uZXIgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9zdGVwLXRyYWNrZXInLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IFN0ZXAgVHJhY2tlciA8L2E+IDwvbGk+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL3RhYnMnLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IFRhYnMgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9vdmVybGF5JywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBPdmVybGF5IDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvbGVnYWwnLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IExlZ2FsIDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvY29sbGFwc2FibGUtcGFuZWwnLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IENvbGxhcHNhYmxlIFBhbmVsIDwvYT4gPC9saT4gPC91bD4gPGgyIGNsYXNzPXNnX2MtbmF2X19zZWN0aW9uPkRJUkVDVElWRVM8L2gyPiA8dWwgY2xhc3M9aHlfby1saXN0PiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9vdmVybGF5LW9wZW5lcicsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gT3ZlcmxheSBPcGVuZXIgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9zZXQtZm9jdXMnLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IFNldCBGb2N1cyA8L2E+IDwvbGk+IDwvdWw+IDwvbmF2PiBcIjtcblxuLyoqKi8gfSxcbi8qIDE2NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxoZWFkZXIgY2xhc3M9c2dfYy1zaXRlLWhlYWRlcj4gPGRpdiBjbGFzcz1zZ19jLXNpdGUtaGVhZGVyX19jb250YWluZXI+IDxidXR0b24gQGNsaWNrPXRvZ2dsZU5hdiBjbGFzcz1cXFwiaHlfdS1oaWRlQG1kIGpzLWFjdGl2ZSBzZ19jLXNpdGUtaGVhZGVyX190b2dnbGVidG5cXFwiIHR5cGU9YnV0dG9uIHJvbGU9YnV0dG9uPiA8c3BhbiBjbGFzcz1cXFwiXFxcIj48aSBjbGFzcz1cXFwiaHlfYy1pY29uIGh5X2MtaWNvbi0taGFtYnVyZ2VyXFxcIj48L2k+PC9zcGFuPiA8L2J1dHRvbj4gPGEgdi1saW5rPVxcXCJ7cGF0aDogJy9nZXQtc3RhcnRlZCd9XFxcIj4gPGltZyBjbGFzcz1sb2dvIHNyYz1cIiArIF9fd2VicGFja19yZXF1aXJlX18oODUpICsgXCIgYWx0PUxvZ28+IDwvYT4gPC9kaXY+IDwvaGVhZGVyPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE2NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPkFsZXJ0PC9oMj4gPGhyIGNsYXNzPWh5X3Utc3BhY2UtbWItMj4gPGRpdiBjbGFzcz1cXFwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxkaXYgY2xhc3M9c2dfYy1kZW1vX19jb250YWluZXI+IDxhbGVydCB0eXBlPWVycm9yPlRoaXMgaXMgYW4gZXJyb3IgYWxlcnQuPC9hbGVydD4gPGFsZXJ0IHR5cGU9aW5mbz5UaGlzIGlzIGFuIGluZm8gYWxlcnQuPC9hbGVydD4gPGFsZXJ0IHR5cGU9c3VjY2Vzcz5UaGlzIGlzIGEgc3VjY2VzcyBhbGVydC48L2FsZXJ0PiA8YWxlcnQgdHlwZT1zdWNjZXNzIDpkaXNtaXNzaWJsZT1mYWxzZT5UaGlzIGlzIG5vdCBhIGRpc21pc3NpYmxlIGFsZXJ0LjwvYWxlcnQ+IDxhbGVydCB0eXBlPXN1Y2Nlc3MgOm9uLWNsb3NlZD1kaXNtaXNzQ2FsbEJhY2s+VGhpcyBpcyBhbiBhbGVydCB3aXRoIGNhbGxiYWNrLjwvYWxlcnQ+IDxhbGVydCB0eXBlPWluZm8gOnRpbWVvdXQ9NTAwMD5UaGlzIGFsZXJ0IHNob3VsZCB0aW1lb3V0IGluIDUgc2Vjb25kcy48L2FsZXJ0PiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuJmx0O2FsZXJ0IHR5cGU9XFxcImVycm9yXFxcIiZndDtUaGlzIGlzIGFuIGVycm9yIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuJmx0O2FsZXJ0IHR5cGU9XFxcImluZm9cXFwiJmd0O1RoaXMgaXMgYW4gaW5mbyBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xcbiZsdDthbGVydCB0eXBlPVxcXCJzdWNjZXNzXFxcIiZndDtUaGlzIGlzIGEgc3VjY2VzcyBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xcbiZsdDthbGVydCB0eXBlPVxcXCJzdWNjZXNzXFxcIiA6ZGlzbWlzc2libGU9XFxcImZhbHNlXFxcIiZndDtUaGlzIGlzIG5vdCBhIGRpc21pc3NpYmxlIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuJmx0O2FsZXJ0IHR5cGU9XFxcInN1Y2Nlc3NcXFwiIDpvbi1jbG9zZWQ9XFxcImRpc21pc3NDYWxsQmFja1xcXCImZ3Q7VGhpcyBpcyBhbiBhbGVydCB3aXRoIGNhbGxiYWNrLiZsdDsvYWxlcnQmZ3Q7XFxuJmx0O2FsZXJ0IHR5cGU9XFxcInN1Y2Nlc3NcXFwiIDp0aW1lb3V0PVxcXCI1MDAwXFxcIiZndDtUaGlzIGFsZXJ0IHNob3VsZCB0aW1lb3V0IGluIDUgc2Vjb25kcy4mbHQ7L2FsZXJ0Jmd0O1xcbiAgICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiPkFQSTwvaDM+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxhcGktdGFibGUgOml0ZW1zPWFwaUl0ZW1zPjwvYXBpLXRhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5Db2xsYXBzYWJsZSBQYW5lbDwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XFxcIlBhbmVsIDFcXFwiIDppcy1vcGVuPXRydWU+IFBhbmVsIDEgY29udGVudCA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XFxcIlBhbmVsIDJcXFwiPiBQYW5lbCAyIGNvbnRlbnQgPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiZsdDtjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cXFwiUGFuZWwgMVxcXCIgOmlzLW9wZW49XFxcInRydWVcXFwiJmd0O1xcbiBQYW5lbCAxIGNvbnRlbnRcXG4mbHQ7L2NvbGxhcHNhYmxlLXBhbmVsJmd0O1xcbiZsdDtjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cXFwiUGFuZWwgMlxcXCImZ3Q7XFxuIFBhbmVsIDIgY29udGVudFxcbiZsdDsvY29sbGFwc2FibGUtcGFuZWwmZ3Q7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE2NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPkdldHRpbmcgU3RhcnRlZDwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS01IGh5X3QtZ3JleVxcXCI+Q0ROPC9oMz4gPHA+IC4uLiA8L3A+IDwvZGl2PiA8L2Rpdj48L3NlY3Rpb24+IFwiO1xuXG4vKioqLyB9LFxuLyogMTY4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+TGVnYWwgU3lzdGVtPC9oMj4gPGhyIGNsYXNzPWh5X3Utc3BhY2UtbWItMj4gPGRpdiBjbGFzcz1cXFwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxkaXYgY2xhc3M9c2dfYy1kZW1vX19jb250YWluZXI+IDxwIGNsYXNzPVxcXCJoeV9jLWNvcHkgaHlfYy1jb3B5LS1ib2R5IGh5X3QtZ3JleVxcXCI+IExvcmVtIGlwc3VtPGxlZ2FsLWNvdW50ZXIgdi1vdmVybGF5LW9wZW5lcj1sZWdhbC1vdmVybGF5IGxlZ2FsLWtleT1ocy1yZWZlcnJhbC10ZXJtcyBsZWdhbC1sYW5nPWVuIGxlZ2FsLXJlZ2lvbj1iYz48L2xlZ2FsLWNvdW50ZXI+IGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQsIHNlZCBkbyBlaXVzbW9kIHRlbXBvciBpbmNpZGlkdW50IHV0IGxhYm9yZSBldCBkb2xvcmUgbWFnbmEgYWxpcXVhLiA8bGVnYWwtY291bnRlciB2LW92ZXJsYXktb3BlbmVyPWxlZ2FsLW92ZXJsYXkgbGVnYWwta2V5PTEteWVhci1vZmZlci1zdGltIGxlZ2FsLWxhbmc9ZW4gbGVnYWwtcmVnaW9uPWJjPjwvbGVnYWwtY291bnRlcj4gPC9wPiA8L2Rpdj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPGxlZ2FsLWNvbnRhaW5lcj48L2xlZ2FsLWNvbnRhaW5lcj4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiZsdDtsZWdhbC1jb3VudGVyXFxuICBsZWdhbC1rZXk9XFxcImhzLXJlZmVycmFsLXRlcm1zXFxcIlxcbiAgbGVnYWwtbGFuZz1cXFwiZW5cXFwiXFxuICBsZWdhbC1yZWdpb249XFxcImJjXFxcIlxcbiZsdDsvbGVnYWwtY291bnRlciZndDtcXG4mbHQ7bGVnYWwtY29udGFpbmVyJmd0OyZsdDsvbGVnYWwtY29udGFpbmVyJmd0O1xcbiAgICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPWphdmFzY3JpcHQ+IDxwcmU+XFxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWphdmFzY3JpcHQ+XFxubGV0IHZtID0gbmV3IFZ1ZSh7XFxuIGVsOiAnYm9keScsXFxuIGRhdGEoKSB7XFxuICAgcmV0dXJuIHtcXG4gICAgIGxpZ2VyRW5kUG9pbnQ6ICdodHRwczovL2FwaS5jbXMudGVsdXMuY29tL2xlZ2FscycsXFxuICAgICBsaWdlckFwcGxpY2F0aW9uS2V5OiAnYjk3MzhkNjdiODlkZmM3ODI3NDZkNGE5Y2Y0YTEwOTMnXFxuICAgfTtcXG4gfSxcXG4gY29tcG9uZW50czoge1xcbiAgIExlZ2FsQ291bnRlcixcXG4gICBMZWdhbENvbnRhaW5lclxcbiB9XFxufSk7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJOiBMZWdhbCBDb3VudGVyPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE2OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPk92ZXJsYXkgU3lzdGVtPC9oMj4gPGhyIGNsYXNzPWh5X3Utc3BhY2UtbWItMj4gPGRpdiBjbGFzcz1cXFwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxkaXYgY2xhc3M9c2dfYy1kZW1vX19jb250YWluZXI+IDxwPiA8YnV0dG9uIHYtb3ZlcmxheS1vcGVuZXI9b3ZlcmxheS0xIGNsYXNzPVxcXCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tbGluayBoeV90LXB1cnBsZVxcXCIgdHlwZT1idXR0b24gcm9sZT1idXR0b24+IE9wZW4gb3ZlcmxheSAjMSA8aSBjbGFzcz1cXFwiaHlfYy1pY29uIGh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZCBoeV9jLWJ1dHRvbl9faWNvblxcXCI+PC9pPiA8L2J1dHRvbj4gPC9wPiA8cD4gPGJ1dHRvbiB2LW92ZXJsYXktb3BlbmVyPW92ZXJsYXktMiBjbGFzcz1cXFwiaHlfYy1idXR0b24gaHlfYy1idXR0b24tLWxpbmsgaHlfdC1wdXJwbGVcXFwiIHR5cGU9YnV0dG9uIHJvbGU9YnV0dG9uPiBPcGVuIG92ZXJsYXkgIzIgPGkgY2xhc3M9XFxcImh5X2MtaWNvbiBoeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQgaHlfYy1idXR0b25fX2ljb25cXFwiPjwvaT4gPC9idXR0b24+IDwvcD4gPG92ZXJsYXktY29udGFpbmVyPiA8b3ZlcmxheSBvdmVybGF5LWtleT1vdmVybGF5LTE+IDxoNCBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFxcXCIgc2xvdD1vdmVybGF5LWhlYWRlcj5UaGlzIGlzIG92ZXJsYXkgIzE8L2g0PiA8YXJ0aWNsZSBzbG90PW92ZXJsYXktYm9keT4gT3ZlcmxheSAjMSBib2R5IDwvYXJ0aWNsZT4gPC9vdmVybGF5PiA8b3ZlcmxheSBvdmVybGF5LWtleT1vdmVybGF5LTI+IDxoNCBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFxcXCIgc2xvdD1vdmVybGF5LWhlYWRlcj5UaGlzIGlzIG92ZXJsYXkgIzI8L2g0PiA8YXJ0aWNsZSBzbG90PW92ZXJsYXktYm9keT4gT3ZlcmxheSAjMiBib2R5IDwvYXJ0aWNsZT4gPC9vdmVybGF5PiA8L292ZXJsYXktY29udGFpbmVyPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuJmx0O292ZXJsYXktY29udGFpbmVyJmd0O1xcbiAmbHQ7b3ZlcmxheSBvdmVybGF5LWtleT1cXFwib3ZlcmxheS0xXFxcIiZndDtcXG4gICAmbHQ7aDQgIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XFxcIiBzbG90PVxcXCJvdmVybGF5LWhlYWRlclxcXCImZ3Q7XFxuICAgVGhpcyBpcyBvdmVybGF5ICMxXFxuICAgJmx0Oy9oNCZndDtcXG4gICAmbHQ7YXJ0aWNsZSBzbG90PVxcXCJvdmVybGF5LWJvZHlcXFwiJmd0O1xcbiAgICAgT3ZlcmxheSAjMSBib2R5XFxuICAgJmx0Oy9hcnRpY2xlJmd0O1xcbiAmbHQ7L292ZXJsYXkmZ3Q7XFxuICZsdDtvdmVybGF5IG92ZXJsYXkta2V5PVxcXCJvdmVybGF5LTJcXFwiJmd0O1xcbiAgICZsdDtoNCAgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcXFwiIHNsb3Q9XFxcIm92ZXJsYXktaGVhZGVyXFxcIiZndDtcXG4gICBUaGlzIGlzIG92ZXJsYXkgIzFcXG4gICAmbHQ7L2g0Jmd0O1xcbiAgICZsdDthcnRpY2xlIHNsb3Q9XFxcIm92ZXJsYXktYm9keVxcXCImZ3Q7XFxuICAgICBPdmVybGF5ICMyIGJvZHlcXG4gICAmbHQ7L2FydGljbGUmZ3Q7XFxuICZsdDsvb3ZlcmxheSZndDtcXG4mbHQ7L292ZXJsYXktY29udGFpbmVyJmd0O1xcbiAgICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiPkFQSTwvaDM+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxhcGktdGFibGUgOml0ZW1zPWFwaUl0ZW1zPjwvYXBpLXRhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5TcGlubmVyPC9oMj4gPGhyIGNsYXNzPWh5X3Utc3BhY2UtbWItMj4gPGRpdiBjbGFzcz1cXFwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxkaXYgY2xhc3M9c2dfYy1kZW1vX19jb250YWluZXI+IDxsYWJlbCBjbGFzcz1cXFwiaHlfYy1jb250cm9sIGh5X2MtY29udHJvbC0tY2hlY2tib3hcXFwiPiA8c3BhbiBjbGFzcz1oeV9jLWNvbnRyb2xfX2xhYmVsLXRleHQ+RnVsbCBTY3JlZW48L3NwYW4+IDxpbnB1dCB0eXBlPWNoZWNrYm94IHYtbW9kZWw9aXNGdWxsU2NyZWVuIC8+IDxkaXYgY2xhc3M9aHlfYy1jb250cm9sX19pbmRpY2F0b3I+PC9kaXY+IDwvbGFiZWw+IDxidXR0b24gQGNsaWNrPXNob3dTcGlubmVyIGNsYXNzPVxcXCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tcmFpc2VkIGh5X3QtZ3JlZW5cXFwiIHR5cGU9YnV0dG9uPiBTaG93IFNwaW5uZXIgPC9idXR0b24+IDxzcGlubmVyIDpmdWxsLXNjcmVlbj1pc0Z1bGxTY3JlZW4gOnRleHQ9bXNnPjwvc3Bpbm5lcj4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiZsdDtzcGlubmVyIHRleHQ9XFxcIkkgd2lsbCBjbG9zZSBpbiAzIHNlY29uZHNcXFwiIDpmdWxsLXNjcmVlbj1cXFwidHJ1ZVxcXCImZ3Q7Jmx0Oy9zcGlubmVyJmd0O1xcbiAgICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiPkFQSTwvaDM+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxhcGktdGFibGUgOml0ZW1zPWFwaUl0ZW1zPjwvYXBpLXRhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNzEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5TdGVwIFRyYWNrZXI8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPHN0ZXAtdHJhY2tlciA6Y3VycmVudC1zdGVwPXN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgOmNvbmZpZz1zdGVwVHJhY2tlckNvbmZpZz48L3N0ZXAtdHJhY2tlcj4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuJmx0O3N0ZXAtdHJhY2tlclxcbjpjdXJyZW50LXN0ZXA9XFxcInN0ZXBUcmFja2VyQ3VycmVudFN0ZXBcXFwiXFxuOmNvbmZpZz1cXFwic3RlcFRyYWNrZXJDb25maWdcXFwiJmd0O1xcbiZsdDsvc3RlcC10cmFja2VyJmd0O1xcbiAgICAgICAgIDwvY29kZT5cXG4gICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1qYXZhc2NyaXB0PiA8cHJlPlxcbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1qcz5cXG5sZXQgc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDI7XFxubGV0IHN0ZXBUcmFja2VyQ29uZmlnID0ge1xcbiAgaXNDbGlja2FibGU6IHRydWUsXFxuICBzdGVwczogW1xcbiAgICB7XFxuICAgICAgdGl0bGU6ICdTdGVwIEEnLFxcbiAgICAgIGxpbms6ICcnLFxcbiAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcXG4gICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDA7XFxuICAgICAgfVxcbiAgICB9LCB7XFxuICAgICAgdGl0bGU6ICdTdGVwIEInLFxcbiAgICAgIGxpbms6ICcnLFxcbiAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcXG4gICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDE7XFxuICAgICAgfVxcbiAgICB9LCB7XFxuICAgICAgdGl0bGU6ICdTdGVwIEMnLFxcbiAgICAgIGxpbms6ICcnLFxcbiAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcXG4gICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDI7XFxuICAgICAgfVxcbiAgICB9XFxuICBdXFxufTtcXG5sZXQgdm0gPSBuZXcgVnVlKHtcXG4gIGVsOiAnYm9keScsXFxuICBkYXRhOiB7XFxuICAgIHN0ZXBUcmFja2VyQ29uZmlnLFxcbiAgICBzdGVwVHJhY2tlckN1cnJlbnRTdGVwXFxufSxcXG4gIGNvbXBvbmVudHM6IHtcXG4gICAgU3RlcFRyYWNrZXJcXG4gIH1cXG59KTtcXG4gICAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG4vKioqLyB9LFxuLyogMTcyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+VGFiPC9oMj4gPGhyIGNsYXNzPWh5X3Utc3BhY2UtbWItMj4gPGRpdiBjbGFzcz1cXFwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxkaXYgY2xhc3M9c2dfYy1kZW1vX19jb250YWluZXI+IDx0YWJzIGNsYXNzPVxcXCJjLXByaWNlLWxvb2t1cCBoeV9vLWxheW91dF9faXRlbSBoeV91LXNpemUtM29mM0BzbSBoeV91LXNpemUtNG9mNEBtZCBoeV91LXNpemUtNm9mMTJAbGdcXFwiPiA8dGFiIGxhYmVsPVxcXCJUYWIgMVxcXCI+IDxwPiBUYWIgMSBjb250ZW50IDwvcD4gPC90YWI+IDx0YWIgbGFiZWw9XFxcIlRhYiAyXFxcIj4gPHA+IFRhYiAyIGNvbnRlbnQgPC9wPiA8L3RhYj4gPHRhYiBsYWJlbD1cXFwiVGFiIDNcXFwiIDppcy1kaXNhYmxlZD10cnVlPiA8cD4gVGFiIDMgY29udGVudCA8L3A+IDwvdGFiPiA8L3RhYnM+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4mbHQ7dGFicyZndDtcXG4gJmx0O3RhYiBsYWJlbD1cXFwiVGFiIDFcXFwiJmd0O1xcbiAgICZsdDtwJmd0O1xcbiAgICAgVGFiIDEgY29udGVudFxcbiAgICZsdDsvcCZndDtcXG4gJmx0Oy90YWImZ3Q7XFxuICZsdDt0YWIgbGFiZWw9XFxcIlRhYiAyXFxcIiZndDtcXG4gICAmbHQ7cCZndDtcXG4gICAgIFRhYiAyIGNvbnRlbnRcXG4gICAmbHQ7L3AmZ3Q7XFxuICZsdDsvdGFiJmd0O1xcbiAmbHQ7dGFiIGxhYmVsPVxcXCJUYWIgM1xcXCIgOmlzLWRpc2FibGVkPVxcXCJ0cnVlXFxcIiZndDtcXG4gICAmbHQ7cCZndDtcXG4gICAgIFRhYiAzIGNvbnRlbnRcXG4gICAmbHQ7L3AmZ3Q7XFxuICZsdDsvdGFiJmd0O1xcbiZsdDsvdGFicyZndDtcXG4gICAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG4vKioqLyB9LFxuLyogMTczICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiB2LWlmPWlzVmlzaWJsZSB0cmFuc2l0aW9uPWZhZGUgY2xhc3M9Yy1hbGVydCA6Y2xhc3M9XFxcIidjLWFsZXJ0LS0nICsgdHlwZVxcXCIgOmNsYXNzPVxcXCJ7ICdjLWFsZXJ0LS1kaXNtaXNzaWJsZSc6IGRpc21pc3NpYmxlIH1cXFwiIHJvbGU9YWxlcnQ+IDxidXR0b24gdi1pZj1kaXNtaXNzaWJsZSBAY2xpY2s9ZGlzbWlzcyB0eXBlPWJ1dHRvbiBjbGFzcz1jLWFsZXJ0X19jbG9zZS1idXR0b24gYXJpYS1sYWJlbD1DbG9zZT4gPHNwYW4gYXJpYS1oaWRkZW49dHJ1ZT4mdGltZXM7PC9zcGFuPiA8c3BhbiBjbGFzcz1oeV91LWludmlzaWJsZT5DbG9zZTwvc3Bhbj4gPC9idXR0b24+IDxzbG90Pjwvc2xvdD4gPC9kaXY+IFwiO1xuXG4vKioqLyB9LFxuLyogMTc0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLWNvbGxhcHNhYmxlLXBhbmVsPiA8aDMgQGNsaWNrLnByZXZlbnQ9dG9nZ2xlT3BlbiA6Y2xhc3M9XFxcIntcXG4gICAgICAnYy1jb2xsYXBzYWJsZS1wYW5lbF9faGVhZGVyLS1vcGVuJzogaXNPcGVuXFxuICAgIH1cXFwiIGNsYXNzPVxcXCJjLWNvbGxhcHNhYmxlLXBhbmVsX19oZWFkZXIgaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiIHYtaHRtbD1sYWJlbD4gPC9oMz4gPGRpdiBjbGFzcz1jLWNvbGxhcHNhYmxlLXBhbmVsX19ib2R5IDpjbGFzcz1cXFwie1xcbiAgICAnYy1jb2xsYXBzYWJsZS1wYW5lbF9fYm9keS0tb3Blbic6IGlzT3BlblxcbiAgfVxcXCI+IDxzbG90Pjwvc2xvdD4gPC9kaXY+IDwvZGl2PiBcIjtcblxuLyoqKi8gfSxcbi8qIDE3NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy1sZWdhbC1jb250YWluZXI+IDxvbCBjbGFzcz1jLWxlZ2FsLWNvbnRhaW5lcl9fb3JkZXJlZC1saXN0PiA8bGkgdi1zZXQtZm9jdXM9bGVnYWwuaXNTZWxlY3RlZCBjbGFzcz1jLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVtIDpjbGFzcz1cXFwie1xcbiAgICAgICdjLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVtLS1hY3RpdmUnOiBsZWdhbC5pc1NlbGVjdGVkXFxuICAgIH1cXFwiIHYtZm9yPVxcXCJsZWdhbCBpbiBpbmRleGVkTGVnYWxzXFxcIiB2LWh0bWw9bGVnYWwuY29udGVudD4gPC9saT4gPC9vbD4gPHVsIGNsYXNzPWMtbGVnYWwtY29udGFpbmVyX191bm9yZGVyZWQtbGlzdD4gPGxpIGNsYXNzPWMtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0gdi1mb3I9XFxcImxlZ2FsIGluIG5vbkluZGV4ZWRMZWdhbHNcXFwiIHYtaHRtbD1sZWdhbC5jb250ZW50PiA8L2xpPiA8L3VsPiA8L2Rpdj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNzYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8c3VwIGNsYXNzPWMtbGVnYWwtc3VwPiA8YSBocmVmPSMgQGNsaWNrLnByZXZlbnQ9Y2xpY2tIYW5kbGVyPiB7e2xlZ2FsQ291bnRlcn19IDwvYT4gPC9zdXA+IFwiO1xuXG4vKioqLyB9LFxuLyogMTc3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLW92ZXJsYXktY29udGFpbmVyPiA8ZGl2IGNsYXNzPWMtb3ZlcmxheS1jb250YWluZXJfX2N1cnRhaW4gOmNsYXNzPVxcXCJ7XFxuICAgICAgICAnYy1vdmVybGF5LWNvbnRhaW5lcl9fY3VydGFpbi0tYWN0aXZlJzogaXNWaXNpYmxlXFxuICAgIH1cXFwiIEBjbGljay5wcmV2ZW50PVxcXCJpc1Zpc2libGU9ZmFsc2VcXFwiPiA8L2Rpdj4gPGRpdiBjbGFzcz1jLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5cyA6Y2xhc3M9XFxcIntcXG4gICAgICAgICdjLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5cy0tYWN0aXZlJzogaXNWaXNpYmxlXFxuICAgIH1cXFwiPiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiA8L2Rpdj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNzggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8YXJ0aWNsZSBjbGFzcz1jLW92ZXJsYXkgdi1zaG93PWlzVmlzaWJsZT4gPGRpdiBjbGFzcz1jLW92ZXJsYXlfX2JvZHk+IDxzbG90IG5hbWU9b3ZlcmxheS1ib2R5Pjwvc2xvdD4gPC9kaXY+IDxoZWFkZXIgY2xhc3M9Yy1vdmVybGF5X19oZWFkZXI+IDxzbG90IG5hbWU9b3ZlcmxheS1oZWFkZXI+PC9zbG90PiA8YnV0dG9uIHR5cGU9YnV0dG9uIGNsYXNzPWMtb3ZlcmxheV9fY2xvc2UtYnV0dG9uIGFyaWEtbGFiZWw9Q2xvc2UgdGFiaW5kZXg9MCBAY2xpY2sucHJldmVudD1jbG9zZU92ZXJsYXk+PC9idXR0b24+IDwvaGVhZGVyPiA8L2FydGljbGU+IFwiO1xuXG4vKioqLyB9LFxuLyogMTc5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiB2LXNob3c9YWN0aXZlIGNsYXNzPWMtc3Bpbm5lciA6Y2xhc3M9XFxcInsgJ2Mtc3Bpbm5lci0tZnVsbHNjcmVlbic6IGZ1bGxTY3JlZW4gfVxcXCI+IDxzdmcgdmlld0JveD1cXFwiMCAwIDEwMCAxMDBcXFwiIHdpZHRoPTAgaGVpZ2h0PTA+IDxjaXJjbGUgc3Ryb2tlLXdpZHRoPTQgZmlsbD1ub25lIHN0cm9rZS1saW5lY2FwPXJvdW5kIHN0cm9rZS1kYXNob2Zmc2V0PTAgY3g9NTAgY3k9NTAgcj0yMD48L2NpcmNsZT4gPC9zdmc+IDxwIGNsYXNzPVxcXCJjLXNwaW5uZXJfX3RleHQgaHlfYy1jb3B5IGh5X3UtZm9udC13ZWlnaHQtLW1lZGl1bVxcXCIgdi1pZj0hIXRleHQ+e3t0ZXh0fX08L3A+IDwvZGl2PiBcIjtcblxuLyoqKi8gfSxcbi8qIDE4MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjx1bCBjbGFzcz1jLXN0ZXAtdHJhY2tlcj4gPGxpIGNsYXNzPWMtc3RlcC10cmFja2VyX19zdGVwIDpjbGFzcz1cXFwie1xcbiAgICAgICdjLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGUnOiBjdXJyZW50U3RlcCA+ICRpbmRleCxcXG4gICAgICAnYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWFjdGl2ZSc6IGN1cnJlbnRTdGVwID09PSAkaW5kZXgsXFxuICAgICAgJ2Mtc3RlcC10cmFja2VyX19zZXRwLS1jbGlja2FibGUnOiAoY3VycmVudFN0ZXAgPiAkaW5kZXggJiYgY29uZmlnLmlzQ2xpY2thYmxlKVxcbiAgfVxcXCIgdi1mb3I9XFxcInN0ZXAgaW4gY29uZmlnLnN0ZXBzXFxcIj4gPGEgOmhyZWY9XFxcInN0ZXAubGluayB8fCBmYWxzZVxcXCIgQGNsaWNrPVxcXCJjbGlja0hhbmRsZXIoJGV2ZW50LCBzdGVwLCAkaW5kZXgpXFxcIiB2LWlmPWNvbmZpZy5pc0NsaWNrYWJsZT4gPHNwYW4gY2xhc3M9Yy1zdGVwLXRyYWNrZXJfX2ljb24+PC9zcGFuPiA8c3BhbiBjbGFzcz1jLXN0ZXAtdHJhY2tlcl9fbGFiZWw+e3skaW5kZXggKyAxfX0uIHt7c3RlcC50aXRsZX19PC9zcGFuPiA8L2E+IDxzcGFuIHYtZWxzZSBjbGFzcz1jLXN0ZXAtdHJhY2tlcl9faWNvbj48L3NwYW4+IDxzcGFuIHYtZWxzZSBjbGFzcz1jLXN0ZXAtdHJhY2tlcl9fbGFiZWw+e3skaW5kZXggKyAxfX0uIHt7c3RlcC50aXRsZX19PC9zcGFuPiA8L2xpPiA8L3VsPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE4MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy10YWJzX19wYW5lIDpjbGFzcz1cXFwie1xcbiAgICAnYy10YWJzX19wYW5lLS1hY3RpdmUnOiBpc1Zpc2libGVcXG4gIH1cXFwiPiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiBcIjtcblxuLyoqKi8gfSxcbi8qIDE4MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy10YWJzPiA8dWwgY2xhc3M9Yy10YWJzX19oZWFkZXI+IDxsaSB2LWZvcj1cXFwidGFiIGluIHRhYnNcXFwiIGNsYXNzPWMtdGFic19faGVhZGVyLWl0ZW0gOmNsYXNzPVxcXCJ7XFxuICAgICAgICAgICAgICAgICdjLXRhYnNfX2hlYWRlci1pdGVtLS1hY3RpdmUnOiAoJGluZGV4ID09PSBhY3RpdmVUYWJJbmRleCksXFxuICAgICAgICAgICAgICAgICdjLXRhYnNfX2hlYWRlci1pdGVtLS1kaXNhYmxlZCc6IHRhYi5pc0Rpc2FibGVkXFxuICAgICAgICAgICAgICB9XFxcIiA6ZGlzYWJsZWQ9dGFiLmRpc2FibGVkPiA8YSBocmVmPSMgQGNsaWNrLnByZXZlbnQ9XFxcImhhbmRsZVRhYkxpc3RDbGljaygkaW5kZXgsIHRhYilcXFwiIHYtaHRtbD10YWIubGFiZWw+PC9hPiA8L2xpPiA8L3VsPiA8ZGl2IGNsYXNzPWMtdGFic19fYm9keT4gPHNsb3Q+PC9zbG90PiA8L2Rpdj4gPC9kaXY+IFwiO1xuXG4vKioqLyB9LFxuLyogMTgzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMDUpXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSlcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYzKVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE4NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjA2KVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NClcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxODUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NSlcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxODYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Nilcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxODcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIwNylcblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjcpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTg4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjgpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTg5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjkpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTkwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzApXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTkxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzEpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTkyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzIpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTkzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMDgpXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSlcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTczKVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE5NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjA5KVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3NClcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxOTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIxMClcblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzUpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTk2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMTEpXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OClcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTc2KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE5NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjEyKVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Nylcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxOTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIxMylcblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwKVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzgpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTk5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMTQpXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MSlcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTc5KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDIwMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjE1KVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4MClcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAyMDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjMpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4MSlcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAyMDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIxNilcblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODIpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMjAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiFcblx0ICogdnVlLXJvdXRlciB2MC43LjEzXG5cdCAqIChjKSAyMDE2IEV2YW4gWW91XG5cdCAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cblx0ICovXG5cdChmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdCAgIHRydWUgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG5cdCAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0ICBnbG9iYWwuVnVlUm91dGVyID0gZmFjdG9yeSgpO1xuXHR9KHRoaXMsIGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICB2YXIgYmFiZWxIZWxwZXJzID0ge307XG5cdFxuXHQgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgICB9XG5cdCAgfTtcblx0ICBmdW5jdGlvbiBUYXJnZXQocGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpIHtcblx0ICAgIHRoaXMucGF0aCA9IHBhdGg7XG5cdCAgICB0aGlzLm1hdGNoZXIgPSBtYXRjaGVyO1xuXHQgICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuXHQgIH1cblx0XG5cdCAgVGFyZ2V0LnByb3RvdHlwZSA9IHtcblx0ICAgIHRvOiBmdW5jdGlvbiB0byh0YXJnZXQsIGNhbGxiYWNrKSB7XG5cdCAgICAgIHZhciBkZWxlZ2F0ZSA9IHRoaXMuZGVsZWdhdGU7XG5cdFxuXHQgICAgICBpZiAoZGVsZWdhdGUgJiYgZGVsZWdhdGUud2lsbEFkZFJvdXRlKSB7XG5cdCAgICAgICAgdGFyZ2V0ID0gZGVsZWdhdGUud2lsbEFkZFJvdXRlKHRoaXMubWF0Y2hlci50YXJnZXQsIHRhcmdldCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMubWF0Y2hlci5hZGQodGhpcy5wYXRoLCB0YXJnZXQpO1xuXHRcblx0ICAgICAgaWYgKGNhbGxiYWNrKSB7XG5cdCAgICAgICAgaWYgKGNhbGxiYWNrLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG11c3QgaGF2ZSBhbiBhcmd1bWVudCBpbiB0aGUgZnVuY3Rpb24gcGFzc2VkIHRvIGB0b2BcIik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMubWF0Y2hlci5hZGRDaGlsZCh0aGlzLnBhdGgsIHRhcmdldCwgY2FsbGJhY2ssIHRoaXMuZGVsZWdhdGUpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIE1hdGNoZXIodGFyZ2V0KSB7XG5cdCAgICB0aGlzLnJvdXRlcyA9IHt9O1xuXHQgICAgdGhpcy5jaGlsZHJlbiA9IHt9O1xuXHQgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG5cdCAgfVxuXHRcblx0ICBNYXRjaGVyLnByb3RvdHlwZSA9IHtcblx0ICAgIGFkZDogZnVuY3Rpb24gYWRkKHBhdGgsIGhhbmRsZXIpIHtcblx0ICAgICAgdGhpcy5yb3V0ZXNbcGF0aF0gPSBoYW5kbGVyO1xuXHQgICAgfSxcblx0XG5cdCAgICBhZGRDaGlsZDogZnVuY3Rpb24gYWRkQ2hpbGQocGF0aCwgdGFyZ2V0LCBjYWxsYmFjaywgZGVsZWdhdGUpIHtcblx0ICAgICAgdmFyIG1hdGNoZXIgPSBuZXcgTWF0Y2hlcih0YXJnZXQpO1xuXHQgICAgICB0aGlzLmNoaWxkcmVuW3BhdGhdID0gbWF0Y2hlcjtcblx0XG5cdCAgICAgIHZhciBtYXRjaCA9IGdlbmVyYXRlTWF0Y2gocGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpO1xuXHRcblx0ICAgICAgaWYgKGRlbGVnYXRlICYmIGRlbGVnYXRlLmNvbnRleHRFbnRlcmVkKSB7XG5cdCAgICAgICAgZGVsZWdhdGUuY29udGV4dEVudGVyZWQodGFyZ2V0LCBtYXRjaCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGNhbGxiYWNrKG1hdGNoKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBnZW5lcmF0ZU1hdGNoKHN0YXJ0aW5nUGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbiAocGF0aCwgbmVzdGVkQ2FsbGJhY2spIHtcblx0ICAgICAgdmFyIGZ1bGxQYXRoID0gc3RhcnRpbmdQYXRoICsgcGF0aDtcblx0XG5cdCAgICAgIGlmIChuZXN0ZWRDYWxsYmFjaykge1xuXHQgICAgICAgIG5lc3RlZENhbGxiYWNrKGdlbmVyYXRlTWF0Y2goZnVsbFBhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXQoc3RhcnRpbmdQYXRoICsgcGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gYWRkUm91dGUocm91dGVBcnJheSwgcGF0aCwgaGFuZGxlcikge1xuXHQgICAgdmFyIGxlbiA9IDA7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IHJvdXRlQXJyYXkubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGxlbiArPSByb3V0ZUFycmF5W2ldLnBhdGgubGVuZ3RoO1xuXHQgICAgfVxuXHRcblx0ICAgIHBhdGggPSBwYXRoLnN1YnN0cihsZW4pO1xuXHQgICAgdmFyIHJvdXRlID0geyBwYXRoOiBwYXRoLCBoYW5kbGVyOiBoYW5kbGVyIH07XG5cdCAgICByb3V0ZUFycmF5LnB1c2gocm91dGUpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZWFjaFJvdXRlKGJhc2VSb3V0ZSwgbWF0Y2hlciwgY2FsbGJhY2ssIGJpbmRpbmcpIHtcblx0ICAgIHZhciByb3V0ZXMgPSBtYXRjaGVyLnJvdXRlcztcblx0XG5cdCAgICBmb3IgKHZhciBwYXRoIGluIHJvdXRlcykge1xuXHQgICAgICBpZiAocm91dGVzLmhhc093blByb3BlcnR5KHBhdGgpKSB7XG5cdCAgICAgICAgdmFyIHJvdXRlQXJyYXkgPSBiYXNlUm91dGUuc2xpY2UoKTtcblx0ICAgICAgICBhZGRSb3V0ZShyb3V0ZUFycmF5LCBwYXRoLCByb3V0ZXNbcGF0aF0pO1xuXHRcblx0ICAgICAgICBpZiAobWF0Y2hlci5jaGlsZHJlbltwYXRoXSkge1xuXHQgICAgICAgICAgZWFjaFJvdXRlKHJvdXRlQXJyYXksIG1hdGNoZXIuY2hpbGRyZW5bcGF0aF0sIGNhbGxiYWNrLCBiaW5kaW5nKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgY2FsbGJhY2suY2FsbChiaW5kaW5nLCByb3V0ZUFycmF5KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIG1hcCAoY2FsbGJhY2ssIGFkZFJvdXRlQ2FsbGJhY2spIHtcblx0ICAgIHZhciBtYXRjaGVyID0gbmV3IE1hdGNoZXIoKTtcblx0XG5cdCAgICBjYWxsYmFjayhnZW5lcmF0ZU1hdGNoKFwiXCIsIG1hdGNoZXIsIHRoaXMuZGVsZWdhdGUpKTtcblx0XG5cdCAgICBlYWNoUm91dGUoW10sIG1hdGNoZXIsIGZ1bmN0aW9uIChyb3V0ZSkge1xuXHQgICAgICBpZiAoYWRkUm91dGVDYWxsYmFjaykge1xuXHQgICAgICAgIGFkZFJvdXRlQ2FsbGJhY2sodGhpcywgcm91dGUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuYWRkKHJvdXRlKTtcblx0ICAgICAgfVxuXHQgICAgfSwgdGhpcyk7XG5cdCAgfVxuXHRcblx0ICB2YXIgc3BlY2lhbHMgPSBbJy8nLCAnLicsICcqJywgJysnLCAnPycsICd8JywgJygnLCAnKScsICdbJywgJ10nLCAneycsICd9JywgJ1xcXFwnXTtcblx0XG5cdCAgdmFyIGVzY2FwZVJlZ2V4ID0gbmV3IFJlZ0V4cCgnKFxcXFwnICsgc3BlY2lhbHMuam9pbignfFxcXFwnKSArICcpJywgJ2cnKTtcblx0XG5cdCAgdmFyIG5vV2FybmluZyA9IGZhbHNlO1xuXHQgIGZ1bmN0aW9uIHdhcm4obXNnKSB7XG5cdCAgICBpZiAoIW5vV2FybmluZyAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgY29uc29sZS5lcnJvcignW3Z1ZS1yb3V0ZXJdICcgKyBtc2cpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdHJ5RGVjb2RlKHVyaSwgYXNDb21wb25lbnQpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJldHVybiBhc0NvbXBvbmVudCA/IGRlY29kZVVSSUNvbXBvbmVudCh1cmkpIDogZGVjb2RlVVJJKHVyaSk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIHdhcm4oJ21hbGZvcm1lZCBVUkknICsgKGFzQ29tcG9uZW50ID8gJyBjb21wb25lbnQ6ICcgOiAnOiAnKSArIHVyaSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpc0FycmF5KHRlc3QpIHtcblx0ICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGVzdCkgPT09IFwiW29iamVjdCBBcnJheV1cIjtcblx0ICB9XG5cdFxuXHQgIC8vIEEgU2VnbWVudCByZXByZXNlbnRzIGEgc2VnbWVudCBpbiB0aGUgb3JpZ2luYWwgcm91dGUgZGVzY3JpcHRpb24uXG5cdCAgLy8gRWFjaCBTZWdtZW50IHR5cGUgcHJvdmlkZXMgYW4gYGVhY2hDaGFyYCBhbmQgYHJlZ2V4YCBtZXRob2QuXG5cdCAgLy9cblx0ICAvLyBUaGUgYGVhY2hDaGFyYCBtZXRob2QgaW52b2tlcyB0aGUgY2FsbGJhY2sgd2l0aCBvbmUgb3IgbW9yZSBjaGFyYWN0ZXJcblx0ICAvLyBzcGVjaWZpY2F0aW9ucy4gQSBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiBjb25zdW1lcyBvbmUgb3IgbW9yZSBpbnB1dFxuXHQgIC8vIGNoYXJhY3RlcnMuXG5cdCAgLy9cblx0ICAvLyBUaGUgYHJlZ2V4YCBtZXRob2QgcmV0dXJucyBhIHJlZ2V4IGZyYWdtZW50IGZvciB0aGUgc2VnbWVudC4gSWYgdGhlXG5cdCAgLy8gc2VnbWVudCBpcyBhIGR5bmFtaWMgb2Ygc3RhciBzZWdtZW50LCB0aGUgcmVnZXggZnJhZ21lbnQgYWxzbyBpbmNsdWRlc1xuXHQgIC8vIGEgY2FwdHVyZS5cblx0ICAvL1xuXHQgIC8vIEEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gY29udGFpbnM6XG5cdCAgLy9cblx0ICAvLyAqIGB2YWxpZENoYXJzYDogYSBTdHJpbmcgd2l0aCBhIGxpc3Qgb2YgYWxsIHZhbGlkIGNoYXJhY3RlcnMsIG9yXG5cdCAgLy8gKiBgaW52YWxpZENoYXJzYDogYSBTdHJpbmcgd2l0aCBhIGxpc3Qgb2YgYWxsIGludmFsaWQgY2hhcmFjdGVyc1xuXHQgIC8vICogYHJlcGVhdGA6IHRydWUgaWYgdGhlIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGNhbiByZXBlYXRcblx0XG5cdCAgZnVuY3Rpb24gU3RhdGljU2VnbWVudChzdHJpbmcpIHtcblx0ICAgIHRoaXMuc3RyaW5nID0gc3RyaW5nO1xuXHQgIH1cblx0ICBTdGF0aWNTZWdtZW50LnByb3RvdHlwZSA9IHtcblx0ICAgIGVhY2hDaGFyOiBmdW5jdGlvbiBlYWNoQ2hhcihjYWxsYmFjaykge1xuXHQgICAgICB2YXIgc3RyaW5nID0gdGhpcy5zdHJpbmcsXG5cdCAgICAgICAgICBjaDtcblx0XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gc3RyaW5nLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIGNoID0gc3RyaW5nLmNoYXJBdChpKTtcblx0ICAgICAgICBjYWxsYmFjayh7IHZhbGlkQ2hhcnM6IGNoIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlZ2V4OiBmdW5jdGlvbiByZWdleCgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nLnJlcGxhY2UoZXNjYXBlUmVnZXgsICdcXFxcJDEnKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2VuZXJhdGU6IGZ1bmN0aW9uIGdlbmVyYXRlKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5zdHJpbmc7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gRHluYW1pY1NlZ21lbnQobmFtZSkge1xuXHQgICAgdGhpcy5uYW1lID0gbmFtZTtcblx0ICB9XG5cdCAgRHluYW1pY1NlZ21lbnQucHJvdG90eXBlID0ge1xuXHQgICAgZWFjaENoYXI6IGZ1bmN0aW9uIGVhY2hDaGFyKGNhbGxiYWNrKSB7XG5cdCAgICAgIGNhbGxiYWNrKHsgaW52YWxpZENoYXJzOiBcIi9cIiwgcmVwZWF0OiB0cnVlIH0pO1xuXHQgICAgfSxcblx0XG5cdCAgICByZWdleDogZnVuY3Rpb24gcmVnZXgoKSB7XG5cdCAgICAgIHJldHVybiBcIihbXi9dKylcIjtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2VuZXJhdGU6IGZ1bmN0aW9uIGdlbmVyYXRlKHBhcmFtcykge1xuXHQgICAgICB2YXIgdmFsID0gcGFyYW1zW3RoaXMubmFtZV07XG5cdCAgICAgIHJldHVybiB2YWwgPT0gbnVsbCA/IFwiOlwiICsgdGhpcy5uYW1lIDogdmFsO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIFN0YXJTZWdtZW50KG5hbWUpIHtcblx0ICAgIHRoaXMubmFtZSA9IG5hbWU7XG5cdCAgfVxuXHQgIFN0YXJTZWdtZW50LnByb3RvdHlwZSA9IHtcblx0ICAgIGVhY2hDaGFyOiBmdW5jdGlvbiBlYWNoQ2hhcihjYWxsYmFjaykge1xuXHQgICAgICBjYWxsYmFjayh7IGludmFsaWRDaGFyczogXCJcIiwgcmVwZWF0OiB0cnVlIH0pO1xuXHQgICAgfSxcblx0XG5cdCAgICByZWdleDogZnVuY3Rpb24gcmVnZXgoKSB7XG5cdCAgICAgIHJldHVybiBcIiguKylcIjtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2VuZXJhdGU6IGZ1bmN0aW9uIGdlbmVyYXRlKHBhcmFtcykge1xuXHQgICAgICB2YXIgdmFsID0gcGFyYW1zW3RoaXMubmFtZV07XG5cdCAgICAgIHJldHVybiB2YWwgPT0gbnVsbCA/IFwiOlwiICsgdGhpcy5uYW1lIDogdmFsO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIEVwc2lsb25TZWdtZW50KCkge31cblx0ICBFcHNpbG9uU2VnbWVudC5wcm90b3R5cGUgPSB7XG5cdCAgICBlYWNoQ2hhcjogZnVuY3Rpb24gZWFjaENoYXIoKSB7fSxcblx0ICAgIHJlZ2V4OiBmdW5jdGlvbiByZWdleCgpIHtcblx0ICAgICAgcmV0dXJuIFwiXCI7XG5cdCAgICB9LFxuXHQgICAgZ2VuZXJhdGU6IGZ1bmN0aW9uIGdlbmVyYXRlKCkge1xuXHQgICAgICByZXR1cm4gXCJcIjtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBwYXJzZShyb3V0ZSwgbmFtZXMsIHNwZWNpZmljaXR5KSB7XG5cdCAgICAvLyBub3JtYWxpemUgcm91dGUgYXMgbm90IHN0YXJ0aW5nIHdpdGggYSBcIi9cIi4gUmVjb2duaXRpb24gd2lsbFxuXHQgICAgLy8gYWxzbyBub3JtYWxpemUuXG5cdCAgICBpZiAocm91dGUuY2hhckF0KDApID09PSBcIi9cIikge1xuXHQgICAgICByb3V0ZSA9IHJvdXRlLnN1YnN0cigxKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgc2VnbWVudHMgPSByb3V0ZS5zcGxpdChcIi9cIiksXG5cdCAgICAgICAgcmVzdWx0cyA9IFtdO1xuXHRcblx0ICAgIC8vIEEgcm91dGVzIGhhcyBzcGVjaWZpY2l0eSBkZXRlcm1pbmVkIGJ5IHRoZSBvcmRlciB0aGF0IGl0cyBkaWZmZXJlbnQgc2VnbWVudHNcblx0ICAgIC8vIGFwcGVhciBpbi4gVGhpcyBzeXN0ZW0gbWlycm9ycyBob3cgdGhlIG1hZ25pdHVkZSBvZiBudW1iZXJzIHdyaXR0ZW4gYXMgc3RyaW5nc1xuXHQgICAgLy8gd29ya3MuXG5cdCAgICAvLyBDb25zaWRlciBhIG51bWJlciB3cml0dGVuIGFzOiBcImFiY1wiLiBBbiBleGFtcGxlIHdvdWxkIGJlIFwiMjAwXCIuIEFueSBvdGhlciBudW1iZXIgd3JpdHRlblxuXHQgICAgLy8gXCJ4eXpcIiB3aWxsIGJlIHNtYWxsZXIgdGhhbiBcImFiY1wiIHNvIGxvbmcgYXMgYGEgPiB6YC4gRm9yIGluc3RhbmNlLCBcIjE5OVwiIGlzIHNtYWxsZXJcblx0ICAgIC8vIHRoZW4gXCIyMDBcIiwgZXZlbiB0aG91Z2ggXCJ5XCIgYW5kIFwielwiICh3aGljaCBhcmUgYm90aCA5KSBhcmUgbGFyZ2VyIHRoYW4gXCIwXCIgKHRoZSB2YWx1ZVxuXHQgICAgLy8gb2YgKGBiYCBhbmQgYGNgKS4gVGhpcyBpcyBiZWNhdXNlIHRoZSBsZWFkaW5nIHN5bWJvbCwgXCIyXCIsIGlzIGxhcmdlciB0aGFuIHRoZSBvdGhlclxuXHQgICAgLy8gbGVhZGluZyBzeW1ib2wsIFwiMVwiLlxuXHQgICAgLy8gVGhlIHJ1bGUgaXMgdGhhdCBzeW1ib2xzIHRvIHRoZSBsZWZ0IGNhcnJ5IG1vcmUgd2VpZ2h0IHRoYW4gc3ltYm9scyB0byB0aGUgcmlnaHRcblx0ICAgIC8vIHdoZW4gYSBudW1iZXIgaXMgd3JpdHRlbiBvdXQgYXMgYSBzdHJpbmcuIEluIHRoZSBhYm92ZSBzdHJpbmdzLCB0aGUgbGVhZGluZyBkaWdpdFxuXHQgICAgLy8gcmVwcmVzZW50cyBob3cgbWFueSAxMDAncyBhcmUgaW4gdGhlIG51bWJlciwgYW5kIGl0IGNhcnJpZXMgbW9yZSB3ZWlnaHQgdGhhbiB0aGUgbWlkZGxlXG5cdCAgICAvLyBudW1iZXIgd2hpY2ggcmVwcmVzZW50cyBob3cgbWFueSAxMCdzIGFyZSBpbiB0aGUgbnVtYmVyLlxuXHQgICAgLy8gVGhpcyBzeXN0ZW0gb2YgbnVtYmVyIG1hZ25pdHVkZSB3b3JrcyB3ZWxsIGZvciByb3V0ZSBzcGVjaWZpY2l0eSwgdG9vLiBBIHJvdXRlIHdyaXR0ZW4gYXNcblx0ICAgIC8vIGBhL2IvY2Agd2lsbCBiZSBtb3JlIHNwZWNpZmljIHRoYW4gYHgveS96YCBhcyBsb25nIGFzIGBhYCBpcyBtb3JlIHNwZWNpZmljIHRoYW5cblx0ICAgIC8vIGB4YCwgaXJyZXNwZWN0aXZlIG9mIHRoZSBvdGhlciBwYXJ0cy5cblx0ICAgIC8vIEJlY2F1c2Ugb2YgdGhpcyBzaW1pbGFyaXR5LCB3ZSBhc3NpZ24gZWFjaCB0eXBlIG9mIHNlZ21lbnQgYSBudW1iZXIgdmFsdWUgd3JpdHRlbiBhcyBhXG5cdCAgICAvLyBzdHJpbmcuIFdlIGNhbiBmaW5kIHRoZSBzcGVjaWZpY2l0eSBvZiBjb21wb3VuZCByb3V0ZXMgYnkgY29uY2F0ZW5hdGluZyB0aGVzZSBzdHJpbmdzXG5cdCAgICAvLyB0b2dldGhlciwgZnJvbSBsZWZ0IHRvIHJpZ2h0LiBBZnRlciB3ZSBoYXZlIGxvb3BlZCB0aHJvdWdoIGFsbCBvZiB0aGUgc2VnbWVudHMsXG5cdCAgICAvLyB3ZSBjb252ZXJ0IHRoZSBzdHJpbmcgdG8gYSBudW1iZXIuXG5cdCAgICBzcGVjaWZpY2l0eS52YWwgPSAnJztcblx0XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IHNlZ21lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2ldLFxuXHQgICAgICAgICAgbWF0Y2g7XG5cdFxuXHQgICAgICBpZiAobWF0Y2ggPSBzZWdtZW50Lm1hdGNoKC9eOihbXlxcL10rKSQvKSkge1xuXHQgICAgICAgIHJlc3VsdHMucHVzaChuZXcgRHluYW1pY1NlZ21lbnQobWF0Y2hbMV0pKTtcblx0ICAgICAgICBuYW1lcy5wdXNoKG1hdGNoWzFdKTtcblx0ICAgICAgICBzcGVjaWZpY2l0eS52YWwgKz0gJzMnO1xuXHQgICAgICB9IGVsc2UgaWYgKG1hdGNoID0gc2VnbWVudC5tYXRjaCgvXlxcKihbXlxcL10rKSQvKSkge1xuXHQgICAgICAgIHJlc3VsdHMucHVzaChuZXcgU3RhclNlZ21lbnQobWF0Y2hbMV0pKTtcblx0ICAgICAgICBzcGVjaWZpY2l0eS52YWwgKz0gJzInO1xuXHQgICAgICAgIG5hbWVzLnB1c2gobWF0Y2hbMV0pO1xuXHQgICAgICB9IGVsc2UgaWYgKHNlZ21lbnQgPT09IFwiXCIpIHtcblx0ICAgICAgICByZXN1bHRzLnB1c2gobmV3IEVwc2lsb25TZWdtZW50KCkpO1xuXHQgICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnMSc7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBTdGF0aWNTZWdtZW50KHNlZ21lbnQpKTtcblx0ICAgICAgICBzcGVjaWZpY2l0eS52YWwgKz0gJzQnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgc3BlY2lmaWNpdHkudmFsID0gK3NwZWNpZmljaXR5LnZhbDtcblx0XG5cdCAgICByZXR1cm4gcmVzdWx0cztcblx0ICB9XG5cdFxuXHQgIC8vIEEgU3RhdGUgaGFzIGEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gYW5kIChgY2hhclNwZWNgKSBhbmQgYSBsaXN0IG9mIHBvc3NpYmxlXG5cdCAgLy8gc3Vic2VxdWVudCBzdGF0ZXMgKGBuZXh0U3RhdGVzYCkuXG5cdCAgLy9cblx0ICAvLyBJZiBhIFN0YXRlIGlzIGFuIGFjY2VwdGluZyBzdGF0ZSwgaXQgd2lsbCBhbHNvIGhhdmUgc2V2ZXJhbCBhZGRpdGlvbmFsXG5cdCAgLy8gcHJvcGVydGllczpcblx0ICAvL1xuXHQgIC8vICogYHJlZ2V4YDogQSByZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBpcyB1c2VkIHRvIGV4dHJhY3QgcGFyYW1ldGVycyBmcm9tIHBhdGhzXG5cdCAgLy8gICB0aGF0IHJlYWNoZWQgdGhpcyBhY2NlcHRpbmcgc3RhdGUuXG5cdCAgLy8gKiBgaGFuZGxlcnNgOiBJbmZvcm1hdGlvbiBvbiBob3cgdG8gY29udmVydCB0aGUgbGlzdCBvZiBjYXB0dXJlcyBpbnRvIGNhbGxzXG5cdCAgLy8gICB0byByZWdpc3RlcmVkIGhhbmRsZXJzIHdpdGggdGhlIHNwZWNpZmllZCBwYXJhbWV0ZXJzXG5cdCAgLy8gKiBgdHlwZXNgOiBIb3cgbWFueSBzdGF0aWMsIGR5bmFtaWMgb3Igc3RhciBzZWdtZW50cyBpbiB0aGlzIHJvdXRlLiBVc2VkIHRvXG5cdCAgLy8gICBkZWNpZGUgd2hpY2ggcm91dGUgdG8gdXNlIGlmIG11bHRpcGxlIHJlZ2lzdGVyZWQgcm91dGVzIG1hdGNoIGEgcGF0aC5cblx0ICAvL1xuXHQgIC8vIEN1cnJlbnRseSwgU3RhdGUgaXMgaW1wbGVtZW50ZWQgbmFpdmVseSBieSBsb29waW5nIG92ZXIgYG5leHRTdGF0ZXNgIGFuZFxuXHQgIC8vIGNvbXBhcmluZyBhIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGFnYWluc3QgYSBjaGFyYWN0ZXIuIEEgbW9yZSBlZmZpY2llbnRcblx0ICAvLyBpbXBsZW1lbnRhdGlvbiB3b3VsZCB1c2UgYSBoYXNoIG9mIGtleXMgcG9pbnRpbmcgYXQgb25lIG9yIG1vcmUgbmV4dCBzdGF0ZXMuXG5cdFxuXHQgIGZ1bmN0aW9uIFN0YXRlKGNoYXJTcGVjKSB7XG5cdCAgICB0aGlzLmNoYXJTcGVjID0gY2hhclNwZWM7XG5cdCAgICB0aGlzLm5leHRTdGF0ZXMgPSBbXTtcblx0ICB9XG5cdFxuXHQgIFN0YXRlLnByb3RvdHlwZSA9IHtcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KGNoYXJTcGVjKSB7XG5cdCAgICAgIHZhciBuZXh0U3RhdGVzID0gdGhpcy5uZXh0U3RhdGVzO1xuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBuZXh0U3RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHZhciBjaGlsZCA9IG5leHRTdGF0ZXNbaV07XG5cdFxuXHQgICAgICAgIHZhciBpc0VxdWFsID0gY2hpbGQuY2hhclNwZWMudmFsaWRDaGFycyA9PT0gY2hhclNwZWMudmFsaWRDaGFycztcblx0ICAgICAgICBpc0VxdWFsID0gaXNFcXVhbCAmJiBjaGlsZC5jaGFyU3BlYy5pbnZhbGlkQ2hhcnMgPT09IGNoYXJTcGVjLmludmFsaWRDaGFycztcblx0XG5cdCAgICAgICAgaWYgKGlzRXF1YWwpIHtcblx0ICAgICAgICAgIHJldHVybiBjaGlsZDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgcHV0OiBmdW5jdGlvbiBwdXQoY2hhclNwZWMpIHtcblx0ICAgICAgdmFyIHN0YXRlO1xuXHRcblx0ICAgICAgLy8gSWYgdGhlIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGFscmVhZHkgZXhpc3RzIGluIGEgY2hpbGQgb2YgdGhlIGN1cnJlbnRcblx0ICAgICAgLy8gc3RhdGUsIGp1c3QgcmV0dXJuIHRoYXQgc3RhdGUuXG5cdCAgICAgIGlmIChzdGF0ZSA9IHRoaXMuZ2V0KGNoYXJTcGVjKSkge1xuXHQgICAgICAgIHJldHVybiBzdGF0ZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gTWFrZSBhIG5ldyBzdGF0ZSBmb3IgdGhlIGNoYXJhY3RlciBzcGVjXG5cdCAgICAgIHN0YXRlID0gbmV3IFN0YXRlKGNoYXJTcGVjKTtcblx0XG5cdCAgICAgIC8vIEluc2VydCB0aGUgbmV3IHN0YXRlIGFzIGEgY2hpbGQgb2YgdGhlIGN1cnJlbnQgc3RhdGVcblx0ICAgICAgdGhpcy5uZXh0U3RhdGVzLnB1c2goc3RhdGUpO1xuXHRcblx0ICAgICAgLy8gSWYgdGhpcyBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiByZXBlYXRzLCBpbnNlcnQgdGhlIG5ldyBzdGF0ZSBhcyBhIGNoaWxkXG5cdCAgICAgIC8vIG9mIGl0c2VsZi4gTm90ZSB0aGF0IHRoaXMgd2lsbCBub3QgdHJpZ2dlciBhbiBpbmZpbml0ZSBsb29wIGJlY2F1c2UgZWFjaFxuXHQgICAgICAvLyB0cmFuc2l0aW9uIGR1cmluZyByZWNvZ25pdGlvbiBjb25zdW1lcyBhIGNoYXJhY3Rlci5cblx0ICAgICAgaWYgKGNoYXJTcGVjLnJlcGVhdCkge1xuXHQgICAgICAgIHN0YXRlLm5leHRTdGF0ZXMucHVzaChzdGF0ZSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIFJldHVybiB0aGUgbmV3IHN0YXRlXG5cdCAgICAgIHJldHVybiBzdGF0ZTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gRmluZCBhIGxpc3Qgb2YgY2hpbGQgc3RhdGVzIG1hdGNoaW5nIHRoZSBuZXh0IGNoYXJhY3RlclxuXHQgICAgbWF0Y2g6IGZ1bmN0aW9uIG1hdGNoKGNoKSB7XG5cdCAgICAgIC8vIERFQlVHIFwiUHJvY2Vzc2luZyBgXCIgKyBjaCArIFwiYDpcIlxuXHQgICAgICB2YXIgbmV4dFN0YXRlcyA9IHRoaXMubmV4dFN0YXRlcyxcblx0ICAgICAgICAgIGNoaWxkLFxuXHQgICAgICAgICAgY2hhclNwZWMsXG5cdCAgICAgICAgICBjaGFycztcblx0XG5cdCAgICAgIC8vIERFQlVHIFwiICBcIiArIGRlYnVnU3RhdGUodGhpcylcblx0ICAgICAgdmFyIHJldHVybmVkID0gW107XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5leHRTdGF0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgY2hpbGQgPSBuZXh0U3RhdGVzW2ldO1xuXHRcblx0ICAgICAgICBjaGFyU3BlYyA9IGNoaWxkLmNoYXJTcGVjO1xuXHRcblx0ICAgICAgICBpZiAodHlwZW9mIChjaGFycyA9IGNoYXJTcGVjLnZhbGlkQ2hhcnMpICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgaWYgKGNoYXJzLmluZGV4T2YoY2gpICE9PSAtMSkge1xuXHQgICAgICAgICAgICByZXR1cm5lZC5wdXNoKGNoaWxkKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiAoY2hhcnMgPSBjaGFyU3BlYy5pbnZhbGlkQ2hhcnMpICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgaWYgKGNoYXJzLmluZGV4T2YoY2gpID09PSAtMSkge1xuXHQgICAgICAgICAgICByZXR1cm5lZC5wdXNoKGNoaWxkKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiByZXR1cm5lZDtcblx0ICAgIH1cblx0XG5cdCAgICAvKiogSUYgREVCVUdcblx0ICAgICwgZGVidWc6IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgY2hhclNwZWMgPSB0aGlzLmNoYXJTcGVjLFxuXHQgICAgICAgICAgZGVidWcgPSBcIltcIixcblx0ICAgICAgICAgIGNoYXJzID0gY2hhclNwZWMudmFsaWRDaGFycyB8fCBjaGFyU3BlYy5pbnZhbGlkQ2hhcnM7XG5cdCAgICAgICBpZiAoY2hhclNwZWMuaW52YWxpZENoYXJzKSB7IGRlYnVnICs9IFwiXlwiOyB9XG5cdCAgICAgIGRlYnVnICs9IGNoYXJzO1xuXHQgICAgICBkZWJ1ZyArPSBcIl1cIjtcblx0ICAgICAgIGlmIChjaGFyU3BlYy5yZXBlYXQpIHsgZGVidWcgKz0gXCIrXCI7IH1cblx0ICAgICAgIHJldHVybiBkZWJ1Zztcblx0ICAgIH1cblx0ICAgIEVORCBJRiAqKi9cblx0ICB9O1xuXHRcblx0ICAvKiogSUYgREVCVUdcblx0ICBmdW5jdGlvbiBkZWJ1Zyhsb2cpIHtcblx0ICAgIGNvbnNvbGUubG9nKGxvZyk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBkZWJ1Z1N0YXRlKHN0YXRlKSB7XG5cdCAgICByZXR1cm4gc3RhdGUubmV4dFN0YXRlcy5tYXAoZnVuY3Rpb24obikge1xuXHQgICAgICBpZiAobi5uZXh0U3RhdGVzLmxlbmd0aCA9PT0gMCkgeyByZXR1cm4gXCIoIFwiICsgbi5kZWJ1ZygpICsgXCIgW2FjY2VwdGluZ10gKVwiOyB9XG5cdCAgICAgIHJldHVybiBcIiggXCIgKyBuLmRlYnVnKCkgKyBcIiA8dGhlbj4gXCIgKyBuLm5leHRTdGF0ZXMubWFwKGZ1bmN0aW9uKHMpIHsgcmV0dXJuIHMuZGVidWcoKSB9KS5qb2luKFwiIG9yIFwiKSArIFwiIClcIjtcblx0ICAgIH0pLmpvaW4oXCIsIFwiKVxuXHQgIH1cblx0ICBFTkQgSUYgKiovXG5cdFxuXHQgIC8vIFNvcnQgdGhlIHJvdXRlcyBieSBzcGVjaWZpY2l0eVxuXHQgIGZ1bmN0aW9uIHNvcnRTb2x1dGlvbnMoc3RhdGVzKSB7XG5cdCAgICByZXR1cm4gc3RhdGVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcblx0ICAgICAgcmV0dXJuIGIuc3BlY2lmaWNpdHkudmFsIC0gYS5zcGVjaWZpY2l0eS52YWw7XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHJlY29nbml6ZUNoYXIoc3RhdGVzLCBjaCkge1xuXHQgICAgdmFyIG5leHRTdGF0ZXMgPSBbXTtcblx0XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0YXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIHN0YXRlID0gc3RhdGVzW2ldO1xuXHRcblx0ICAgICAgbmV4dFN0YXRlcyA9IG5leHRTdGF0ZXMuY29uY2F0KHN0YXRlLm1hdGNoKGNoKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG5leHRTdGF0ZXM7XG5cdCAgfVxuXHRcblx0ICB2YXIgb0NyZWF0ZSA9IE9iamVjdC5jcmVhdGUgfHwgZnVuY3Rpb24gKHByb3RvKSB7XG5cdCAgICBmdW5jdGlvbiBGKCkge31cblx0ICAgIEYucHJvdG90eXBlID0gcHJvdG87XG5cdCAgICByZXR1cm4gbmV3IEYoKTtcblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBSZWNvZ25pemVSZXN1bHRzKHF1ZXJ5UGFyYW1zKSB7XG5cdCAgICB0aGlzLnF1ZXJ5UGFyYW1zID0gcXVlcnlQYXJhbXMgfHwge307XG5cdCAgfVxuXHQgIFJlY29nbml6ZVJlc3VsdHMucHJvdG90eXBlID0gb0NyZWF0ZSh7XG5cdCAgICBzcGxpY2U6IEFycmF5LnByb3RvdHlwZS5zcGxpY2UsXG5cdCAgICBzbGljZTogQXJyYXkucHJvdG90eXBlLnNsaWNlLFxuXHQgICAgcHVzaDogQXJyYXkucHJvdG90eXBlLnB1c2gsXG5cdCAgICBsZW5ndGg6IDAsXG5cdCAgICBxdWVyeVBhcmFtczogbnVsbFxuXHQgIH0pO1xuXHRcblx0ICBmdW5jdGlvbiBmaW5kSGFuZGxlcihzdGF0ZSwgcGF0aCwgcXVlcnlQYXJhbXMpIHtcblx0ICAgIHZhciBoYW5kbGVycyA9IHN0YXRlLmhhbmRsZXJzLFxuXHQgICAgICAgIHJlZ2V4ID0gc3RhdGUucmVnZXg7XG5cdCAgICB2YXIgY2FwdHVyZXMgPSBwYXRoLm1hdGNoKHJlZ2V4KSxcblx0ICAgICAgICBjdXJyZW50Q2FwdHVyZSA9IDE7XG5cdCAgICB2YXIgcmVzdWx0ID0gbmV3IFJlY29nbml6ZVJlc3VsdHMocXVlcnlQYXJhbXMpO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBoYW5kbGVyID0gaGFuZGxlcnNbaV0sXG5cdCAgICAgICAgICBuYW1lcyA9IGhhbmRsZXIubmFtZXMsXG5cdCAgICAgICAgICBwYXJhbXMgPSB7fTtcblx0XG5cdCAgICAgIGZvciAodmFyIGogPSAwLCBtID0gbmFtZXMubGVuZ3RoOyBqIDwgbTsgaisrKSB7XG5cdCAgICAgICAgcGFyYW1zW25hbWVzW2pdXSA9IGNhcHR1cmVzW2N1cnJlbnRDYXB0dXJlKytdO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXN1bHQucHVzaCh7IGhhbmRsZXI6IGhhbmRsZXIuaGFuZGxlciwgcGFyYW1zOiBwYXJhbXMsIGlzRHluYW1pYzogISFuYW1lcy5sZW5ndGggfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGFkZFNlZ21lbnQoY3VycmVudFN0YXRlLCBzZWdtZW50KSB7XG5cdCAgICBzZWdtZW50LmVhY2hDaGFyKGZ1bmN0aW9uIChjaCkge1xuXHQgICAgICB2YXIgc3RhdGU7XG5cdFxuXHQgICAgICBjdXJyZW50U3RhdGUgPSBjdXJyZW50U3RhdGUucHV0KGNoKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHJldHVybiBjdXJyZW50U3RhdGU7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBkZWNvZGVRdWVyeVBhcmFtUGFydChwYXJ0KSB7XG5cdCAgICAvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNDAxL2ludGVyYWN0L2Zvcm1zLmh0bWwjaC0xNy4xMy40LjFcblx0ICAgIHBhcnQgPSBwYXJ0LnJlcGxhY2UoL1xcKy9nbSwgJyUyMCcpO1xuXHQgICAgcmV0dXJuIHRyeURlY29kZShwYXJ0LCB0cnVlKTtcblx0ICB9XG5cdFxuXHQgIC8vIFRoZSBtYWluIGludGVyZmFjZVxuXHRcblx0ICB2YXIgUm91dGVSZWNvZ25pemVyID0gZnVuY3Rpb24gUm91dGVSZWNvZ25pemVyKCkge1xuXHQgICAgdGhpcy5yb290U3RhdGUgPSBuZXcgU3RhdGUoKTtcblx0ICAgIHRoaXMubmFtZXMgPSB7fTtcblx0ICB9O1xuXHRcblx0ICBSb3V0ZVJlY29nbml6ZXIucHJvdG90eXBlID0ge1xuXHQgICAgYWRkOiBmdW5jdGlvbiBhZGQocm91dGVzLCBvcHRpb25zKSB7XG5cdCAgICAgIHZhciBjdXJyZW50U3RhdGUgPSB0aGlzLnJvb3RTdGF0ZSxcblx0ICAgICAgICAgIHJlZ2V4ID0gXCJeXCIsXG5cdCAgICAgICAgICBzcGVjaWZpY2l0eSA9IHt9LFxuXHQgICAgICAgICAgaGFuZGxlcnMgPSBbXSxcblx0ICAgICAgICAgIGFsbFNlZ21lbnRzID0gW10sXG5cdCAgICAgICAgICBuYW1lO1xuXHRcblx0ICAgICAgdmFyIGlzRW1wdHkgPSB0cnVlO1xuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSByb3V0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIHJvdXRlID0gcm91dGVzW2ldLFxuXHQgICAgICAgICAgICBuYW1lcyA9IFtdO1xuXHRcblx0ICAgICAgICB2YXIgc2VnbWVudHMgPSBwYXJzZShyb3V0ZS5wYXRoLCBuYW1lcywgc3BlY2lmaWNpdHkpO1xuXHRcblx0ICAgICAgICBhbGxTZWdtZW50cyA9IGFsbFNlZ21lbnRzLmNvbmNhdChzZWdtZW50cyk7XG5cdFxuXHQgICAgICAgIGZvciAodmFyIGogPSAwLCBtID0gc2VnbWVudHMubGVuZ3RoOyBqIDwgbTsgaisrKSB7XG5cdCAgICAgICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2pdO1xuXHRcblx0ICAgICAgICAgIGlmIChzZWdtZW50IGluc3RhbmNlb2YgRXBzaWxvblNlZ21lbnQpIHtcblx0ICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuXHRcblx0ICAgICAgICAgIC8vIEFkZCBhIFwiL1wiIGZvciB0aGUgbmV3IHNlZ21lbnRcblx0ICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRTdGF0ZS5wdXQoeyB2YWxpZENoYXJzOiBcIi9cIiB9KTtcblx0ICAgICAgICAgIHJlZ2V4ICs9IFwiL1wiO1xuXHRcblx0ICAgICAgICAgIC8vIEFkZCBhIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBzZWdtZW50IHRvIHRoZSBORkEgYW5kIHJlZ2V4XG5cdCAgICAgICAgICBjdXJyZW50U3RhdGUgPSBhZGRTZWdtZW50KGN1cnJlbnRTdGF0ZSwgc2VnbWVudCk7XG5cdCAgICAgICAgICByZWdleCArPSBzZWdtZW50LnJlZ2V4KCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgaGFuZGxlciA9IHsgaGFuZGxlcjogcm91dGUuaGFuZGxlciwgbmFtZXM6IG5hbWVzIH07XG5cdCAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGlzRW1wdHkpIHtcblx0ICAgICAgICBjdXJyZW50U3RhdGUgPSBjdXJyZW50U3RhdGUucHV0KHsgdmFsaWRDaGFyczogXCIvXCIgfSk7XG5cdCAgICAgICAgcmVnZXggKz0gXCIvXCI7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGN1cnJlbnRTdGF0ZS5oYW5kbGVycyA9IGhhbmRsZXJzO1xuXHQgICAgICBjdXJyZW50U3RhdGUucmVnZXggPSBuZXcgUmVnRXhwKHJlZ2V4ICsgXCIkXCIpO1xuXHQgICAgICBjdXJyZW50U3RhdGUuc3BlY2lmaWNpdHkgPSBzcGVjaWZpY2l0eTtcblx0XG5cdCAgICAgIGlmIChuYW1lID0gb3B0aW9ucyAmJiBvcHRpb25zLmFzKSB7XG5cdCAgICAgICAgdGhpcy5uYW1lc1tuYW1lXSA9IHtcblx0ICAgICAgICAgIHNlZ21lbnRzOiBhbGxTZWdtZW50cyxcblx0ICAgICAgICAgIGhhbmRsZXJzOiBoYW5kbGVyc1xuXHQgICAgICAgIH07XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgaGFuZGxlcnNGb3I6IGZ1bmN0aW9uIGhhbmRsZXJzRm9yKG5hbWUpIHtcblx0ICAgICAgdmFyIHJvdXRlID0gdGhpcy5uYW1lc1tuYW1lXSxcblx0ICAgICAgICAgIHJlc3VsdCA9IFtdO1xuXHQgICAgICBpZiAoIXJvdXRlKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgbm8gcm91dGUgbmFtZWQgXCIgKyBuYW1lKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSByb3V0ZS5oYW5kbGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICByZXN1bHQucHVzaChyb3V0ZS5oYW5kbGVyc1tpXSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiByZXN1bHQ7XG5cdCAgICB9LFxuXHRcblx0ICAgIGhhc1JvdXRlOiBmdW5jdGlvbiBoYXNSb3V0ZShuYW1lKSB7XG5cdCAgICAgIHJldHVybiAhIXRoaXMubmFtZXNbbmFtZV07XG5cdCAgICB9LFxuXHRcblx0ICAgIGdlbmVyYXRlOiBmdW5jdGlvbiBnZW5lcmF0ZShuYW1lLCBwYXJhbXMpIHtcblx0ICAgICAgdmFyIHJvdXRlID0gdGhpcy5uYW1lc1tuYW1lXSxcblx0ICAgICAgICAgIG91dHB1dCA9IFwiXCI7XG5cdCAgICAgIGlmICghcm91dGUpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGVyZSBpcyBubyByb3V0ZSBuYW1lZCBcIiArIG5hbWUpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgc2VnbWVudHMgPSByb3V0ZS5zZWdtZW50cztcblx0XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gc2VnbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50c1tpXTtcblx0XG5cdCAgICAgICAgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBFcHNpbG9uU2VnbWVudCkge1xuXHQgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBvdXRwdXQgKz0gXCIvXCI7XG5cdCAgICAgICAgb3V0cHV0ICs9IHNlZ21lbnQuZ2VuZXJhdGUocGFyYW1zKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKG91dHB1dC5jaGFyQXQoMCkgIT09ICcvJykge1xuXHQgICAgICAgIG91dHB1dCA9ICcvJyArIG91dHB1dDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMucXVlcnlQYXJhbXMpIHtcblx0ICAgICAgICBvdXRwdXQgKz0gdGhpcy5nZW5lcmF0ZVF1ZXJ5U3RyaW5nKHBhcmFtcy5xdWVyeVBhcmFtcyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBvdXRwdXQ7XG5cdCAgICB9LFxuXHRcblx0ICAgIGdlbmVyYXRlUXVlcnlTdHJpbmc6IGZ1bmN0aW9uIGdlbmVyYXRlUXVlcnlTdHJpbmcocGFyYW1zKSB7XG5cdCAgICAgIHZhciBwYWlycyA9IFtdO1xuXHQgICAgICB2YXIga2V5cyA9IFtdO1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gcGFyYW1zKSB7XG5cdCAgICAgICAgaWYgKHBhcmFtcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdCAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAga2V5cy5zb3J0KCk7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBrZXlzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgICB2YXIgdmFsdWUgPSBwYXJhbXNba2V5XTtcblx0ICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuXHQgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBwYWlyID0gZW5jb2RlVVJJQ29tcG9uZW50KGtleSk7XG5cdCAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaiA8IGw7IGorKykge1xuXHQgICAgICAgICAgICB2YXIgYXJyYXlQYWlyID0ga2V5ICsgJ1tdJyArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZVtqXSk7XG5cdCAgICAgICAgICAgIHBhaXJzLnB1c2goYXJyYXlQYWlyKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcGFpciArPSBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG5cdCAgICAgICAgICBwYWlycy5wdXNoKHBhaXIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHBhaXJzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgIHJldHVybiAnJztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIFwiP1wiICsgcGFpcnMuam9pbihcIiZcIik7XG5cdCAgICB9LFxuXHRcblx0ICAgIHBhcnNlUXVlcnlTdHJpbmc6IGZ1bmN0aW9uIHBhcnNlUXVlcnlTdHJpbmcocXVlcnlTdHJpbmcpIHtcblx0ICAgICAgdmFyIHBhaXJzID0gcXVlcnlTdHJpbmcuc3BsaXQoXCImXCIpLFxuXHQgICAgICAgICAgcXVlcnlQYXJhbXMgPSB7fTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWlycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHZhciBwYWlyID0gcGFpcnNbaV0uc3BsaXQoJz0nKSxcblx0ICAgICAgICAgICAga2V5ID0gZGVjb2RlUXVlcnlQYXJhbVBhcnQocGFpclswXSksXG5cdCAgICAgICAgICAgIGtleUxlbmd0aCA9IGtleS5sZW5ndGgsXG5cdCAgICAgICAgICAgIGlzQXJyYXkgPSBmYWxzZSxcblx0ICAgICAgICAgICAgdmFsdWU7XG5cdCAgICAgICAgaWYgKHBhaXIubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgICAgICB2YWx1ZSA9ICd0cnVlJztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy9IYW5kbGUgYXJyYXlzXG5cdCAgICAgICAgICBpZiAoa2V5TGVuZ3RoID4gMiAmJiBrZXkuc2xpY2Uoa2V5TGVuZ3RoIC0gMikgPT09ICdbXScpIHtcblx0ICAgICAgICAgICAgaXNBcnJheSA9IHRydWU7XG5cdCAgICAgICAgICAgIGtleSA9IGtleS5zbGljZSgwLCBrZXlMZW5ndGggLSAyKTtcblx0ICAgICAgICAgICAgaWYgKCFxdWVyeVBhcmFtc1trZXldKSB7XG5cdCAgICAgICAgICAgICAgcXVlcnlQYXJhbXNba2V5XSA9IFtdO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICB2YWx1ZSA9IHBhaXJbMV0gPyBkZWNvZGVRdWVyeVBhcmFtUGFydChwYWlyWzFdKSA6ICcnO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoaXNBcnJheSkge1xuXHQgICAgICAgICAgcXVlcnlQYXJhbXNba2V5XS5wdXNoKHZhbHVlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcXVlcnlQYXJhbXNba2V5XSA9IHZhbHVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gcXVlcnlQYXJhbXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlY29nbml6ZTogZnVuY3Rpb24gcmVjb2duaXplKHBhdGgsIHNpbGVudCkge1xuXHQgICAgICBub1dhcm5pbmcgPSBzaWxlbnQ7XG5cdCAgICAgIHZhciBzdGF0ZXMgPSBbdGhpcy5yb290U3RhdGVdLFxuXHQgICAgICAgICAgcGF0aExlbixcblx0ICAgICAgICAgIGksXG5cdCAgICAgICAgICBsLFxuXHQgICAgICAgICAgcXVlcnlTdGFydCxcblx0ICAgICAgICAgIHF1ZXJ5UGFyYW1zID0ge30sXG5cdCAgICAgICAgICBpc1NsYXNoRHJvcHBlZCA9IGZhbHNlO1xuXHRcblx0ICAgICAgcXVlcnlTdGFydCA9IHBhdGguaW5kZXhPZignPycpO1xuXHQgICAgICBpZiAocXVlcnlTdGFydCAhPT0gLTEpIHtcblx0ICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSBwYXRoLnN1YnN0cihxdWVyeVN0YXJ0ICsgMSwgcGF0aC5sZW5ndGgpO1xuXHQgICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cigwLCBxdWVyeVN0YXJ0KTtcblx0ICAgICAgICBpZiAocXVlcnlTdHJpbmcpIHtcblx0ICAgICAgICAgIHF1ZXJ5UGFyYW1zID0gdGhpcy5wYXJzZVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHBhdGggPSB0cnlEZWNvZGUocGF0aCk7XG5cdCAgICAgIGlmICghcGF0aCkgcmV0dXJuO1xuXHRcblx0ICAgICAgLy8gREVCVUcgR1JPVVAgcGF0aFxuXHRcblx0ICAgICAgaWYgKHBhdGguY2hhckF0KDApICE9PSBcIi9cIikge1xuXHQgICAgICAgIHBhdGggPSBcIi9cIiArIHBhdGg7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHBhdGhMZW4gPSBwYXRoLmxlbmd0aDtcblx0ICAgICAgaWYgKHBhdGhMZW4gPiAxICYmIHBhdGguY2hhckF0KHBhdGhMZW4gLSAxKSA9PT0gXCIvXCIpIHtcblx0ICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHIoMCwgcGF0aExlbiAtIDEpO1xuXHQgICAgICAgIGlzU2xhc2hEcm9wcGVkID0gdHJ1ZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgZm9yIChpID0gMCwgbCA9IHBhdGgubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgc3RhdGVzID0gcmVjb2duaXplQ2hhcihzdGF0ZXMsIHBhdGguY2hhckF0KGkpKTtcblx0ICAgICAgICBpZiAoIXN0YXRlcy5sZW5ndGgpIHtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gRU5EIERFQlVHIEdST1VQXG5cdFxuXHQgICAgICB2YXIgc29sdXRpb25zID0gW107XG5cdCAgICAgIGZvciAoaSA9IDAsIGwgPSBzdGF0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgaWYgKHN0YXRlc1tpXS5oYW5kbGVycykge1xuXHQgICAgICAgICAgc29sdXRpb25zLnB1c2goc3RhdGVzW2ldKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHN0YXRlcyA9IHNvcnRTb2x1dGlvbnMoc29sdXRpb25zKTtcblx0XG5cdCAgICAgIHZhciBzdGF0ZSA9IHNvbHV0aW9uc1swXTtcblx0XG5cdCAgICAgIGlmIChzdGF0ZSAmJiBzdGF0ZS5oYW5kbGVycykge1xuXHQgICAgICAgIC8vIGlmIGEgdHJhaWxpbmcgc2xhc2ggd2FzIGRyb3BwZWQgYW5kIGEgc3RhciBzZWdtZW50IGlzIHRoZSBsYXN0IHNlZ21lbnRcblx0ICAgICAgICAvLyBzcGVjaWZpZWQsIHB1dCB0aGUgdHJhaWxpbmcgc2xhc2ggYmFja1xuXHQgICAgICAgIGlmIChpc1NsYXNoRHJvcHBlZCAmJiBzdGF0ZS5yZWdleC5zb3VyY2Uuc2xpY2UoLTUpID09PSBcIiguKykkXCIpIHtcblx0ICAgICAgICAgIHBhdGggPSBwYXRoICsgXCIvXCI7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBmaW5kSGFuZGxlcihzdGF0ZSwgcGF0aCwgcXVlcnlQYXJhbXMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgUm91dGVSZWNvZ25pemVyLnByb3RvdHlwZS5tYXAgPSBtYXA7XG5cdFxuXHQgIHZhciBnZW5RdWVyeSA9IFJvdXRlUmVjb2duaXplci5wcm90b3R5cGUuZ2VuZXJhdGVRdWVyeVN0cmluZztcblx0XG5cdCAgLy8gZXhwb3J0IGRlZmF1bHQgZm9yIGhvbGRpbmcgdGhlIFZ1ZSByZWZlcmVuY2Vcblx0ICB2YXIgZXhwb3J0cyQxID0ge307XG5cdCAgLyoqXG5cdCAgICogV2FybiBzdHVmZi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtc2dcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gd2FybiQxKG1zZykge1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0ICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgY29uc29sZS5lcnJvcignW3Z1ZS1yb3V0ZXJdICcgKyBtc2cpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmVzb2x2ZSBhIHJlbGF0aXZlIHBhdGguXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gYmFzZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSByZWxhdGl2ZVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gYXBwZW5kXG5cdCAgICogQHJldHVybiB7U3RyaW5nfVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZXNvbHZlUGF0aChiYXNlLCByZWxhdGl2ZSwgYXBwZW5kKSB7XG5cdCAgICB2YXIgcXVlcnkgPSBiYXNlLm1hdGNoKC8oXFw/LiopJC8pO1xuXHQgICAgaWYgKHF1ZXJ5KSB7XG5cdCAgICAgIHF1ZXJ5ID0gcXVlcnlbMV07XG5cdCAgICAgIGJhc2UgPSBiYXNlLnNsaWNlKDAsIC1xdWVyeS5sZW5ndGgpO1xuXHQgICAgfVxuXHQgICAgLy8gYSBxdWVyeSFcblx0ICAgIGlmIChyZWxhdGl2ZS5jaGFyQXQoMCkgPT09ICc/Jykge1xuXHQgICAgICByZXR1cm4gYmFzZSArIHJlbGF0aXZlO1xuXHQgICAgfVxuXHQgICAgdmFyIHN0YWNrID0gYmFzZS5zcGxpdCgnLycpO1xuXHQgICAgLy8gcmVtb3ZlIHRyYWlsaW5nIHNlZ21lbnQgaWY6XG5cdCAgICAvLyAtIG5vdCBhcHBlbmRpbmdcblx0ICAgIC8vIC0gYXBwZW5kaW5nIHRvIHRyYWlsaW5nIHNsYXNoIChsYXN0IHNlZ21lbnQgaXMgZW1wdHkpXG5cdCAgICBpZiAoIWFwcGVuZCB8fCAhc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0pIHtcblx0ICAgICAgc3RhY2sucG9wKCk7XG5cdCAgICB9XG5cdCAgICAvLyByZXNvbHZlIHJlbGF0aXZlIHBhdGhcblx0ICAgIHZhciBzZWdtZW50cyA9IHJlbGF0aXZlLnJlcGxhY2UoL15cXC8vLCAnJykuc3BsaXQoJy8nKTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50c1tpXTtcblx0ICAgICAgaWYgKHNlZ21lbnQgPT09ICcuJykge1xuXHQgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICB9IGVsc2UgaWYgKHNlZ21lbnQgPT09ICcuLicpIHtcblx0ICAgICAgICBzdGFjay5wb3AoKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzdGFjay5wdXNoKHNlZ21lbnQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBlbnN1cmUgbGVhZGluZyBzbGFzaFxuXHQgICAgaWYgKHN0YWNrWzBdICE9PSAnJykge1xuXHQgICAgICBzdGFjay51bnNoaWZ0KCcnKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBzdGFjay5qb2luKCcvJyk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBGb3JnaXZpbmcgY2hlY2sgZm9yIGEgcHJvbWlzZVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IHBcblx0ICAgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBpc1Byb21pc2UocCkge1xuXHQgICAgcmV0dXJuIHAgJiYgdHlwZW9mIHAudGhlbiA9PT0gJ2Z1bmN0aW9uJztcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJldHJpdmUgYSByb3V0ZSBjb25maWcgZmllbGQgZnJvbSBhIGNvbXBvbmVudCBpbnN0YW5jZVxuXHQgICAqIE9SIGEgY29tcG9uZW50IGNvbnRydWN0b3IuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufFZ1ZX0gY29tcG9uZW50XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICAgKiBAcmV0dXJuIHsqfVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBnZXRSb3V0ZUNvbmZpZyhjb21wb25lbnQsIG5hbWUpIHtcblx0ICAgIHZhciBvcHRpb25zID0gY29tcG9uZW50ICYmIChjb21wb25lbnQuJG9wdGlvbnMgfHwgY29tcG9uZW50Lm9wdGlvbnMpO1xuXHQgICAgcmV0dXJuIG9wdGlvbnMgJiYgb3B0aW9ucy5yb3V0ZSAmJiBvcHRpb25zLnJvdXRlW25hbWVdO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmVzb2x2ZSBhbiBhc3luYyBjb21wb25lbnQgZmFjdG9yeS4gSGF2ZSB0byBkbyBhIGRpcnR5XG5cdCAgICogbW9jayBoZXJlIGJlY2F1c2Ugb2YgVnVlIGNvcmUncyBpbnRlcm5hbCBBUEkgZGVwZW5kcyBvblxuXHQgICAqIGFuIElEIGNoZWNrLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAqL1xuXHRcblx0ICB2YXIgcmVzb2x2ZXIgPSB1bmRlZmluZWQ7XG5cdFxuXHQgIGZ1bmN0aW9uIHJlc29sdmVBc3luY0NvbXBvbmVudChoYW5kbGVyLCBjYikge1xuXHQgICAgaWYgKCFyZXNvbHZlcikge1xuXHQgICAgICByZXNvbHZlciA9IHtcblx0ICAgICAgICByZXNvbHZlOiBleHBvcnRzJDEuVnVlLnByb3RvdHlwZS5fcmVzb2x2ZUNvbXBvbmVudCxcblx0ICAgICAgICAkb3B0aW9uczoge1xuXHQgICAgICAgICAgY29tcG9uZW50czoge1xuXHQgICAgICAgICAgICBfOiBoYW5kbGVyLmNvbXBvbmVudFxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJlc29sdmVyLiRvcHRpb25zLmNvbXBvbmVudHMuXyA9IGhhbmRsZXIuY29tcG9uZW50O1xuXHQgICAgfVxuXHQgICAgcmVzb2x2ZXIucmVzb2x2ZSgnXycsIGZ1bmN0aW9uIChDb21wb25lbnQpIHtcblx0ICAgICAgaGFuZGxlci5jb21wb25lbnQgPSBDb21wb25lbnQ7XG5cdCAgICAgIGNiKENvbXBvbmVudCk7XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIE1hcCB0aGUgZHluYW1pYyBzZWdtZW50cyBpbiBhIHBhdGggdG8gcGFyYW1zLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IHF1ZXJ5XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIG1hcFBhcmFtcyhwYXRoLCBwYXJhbXMsIHF1ZXJ5KSB7XG5cdCAgICBpZiAocGFyYW1zID09PSB1bmRlZmluZWQpIHBhcmFtcyA9IHt9O1xuXHRcblx0ICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoLzooW15cXC9dKykvZywgZnVuY3Rpb24gKF8sIGtleSkge1xuXHQgICAgICB2YXIgdmFsID0gcGFyYW1zW2tleV07XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoIXZhbCkge1xuXHQgICAgICAgIHdhcm4kMSgncGFyYW0gXCInICsga2V5ICsgJ1wiIG5vdCBmb3VuZCB3aGVuIGdlbmVyYXRpbmcgJyArICdwYXRoIGZvciBcIicgKyBwYXRoICsgJ1wiIHdpdGggcGFyYW1zICcgKyBKU09OLnN0cmluZ2lmeShwYXJhbXMpKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdmFsIHx8ICcnO1xuXHQgICAgfSk7XG5cdCAgICBpZiAocXVlcnkpIHtcblx0ICAgICAgcGF0aCArPSBnZW5RdWVyeShxdWVyeSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcGF0aDtcblx0ICB9XG5cdFxuXHQgIHZhciBoYXNoUkUgPSAvIy4qJC87XG5cdFxuXHQgIHZhciBIVE1MNUhpc3RvcnkgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gSFRNTDVIaXN0b3J5KF9yZWYpIHtcblx0ICAgICAgdmFyIHJvb3QgPSBfcmVmLnJvb3Q7XG5cdCAgICAgIHZhciBvbkNoYW5nZSA9IF9yZWYub25DaGFuZ2U7XG5cdCAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBIVE1MNUhpc3RvcnkpO1xuXHRcblx0ICAgICAgaWYgKHJvb3QgJiYgcm9vdCAhPT0gJy8nKSB7XG5cdCAgICAgICAgLy8gbWFrZSBzdXJlIHRoZXJlJ3MgdGhlIHN0YXJ0aW5nIHNsYXNoXG5cdCAgICAgICAgaWYgKHJvb3QuY2hhckF0KDApICE9PSAnLycpIHtcblx0ICAgICAgICAgIHJvb3QgPSAnLycgKyByb290O1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyByZW1vdmUgdHJhaWxpbmcgc2xhc2hcblx0ICAgICAgICB0aGlzLnJvb3QgPSByb290LnJlcGxhY2UoL1xcLyQvLCAnJyk7XG5cdCAgICAgICAgdGhpcy5yb290UkUgPSBuZXcgUmVnRXhwKCdeXFxcXCcgKyB0aGlzLnJvb3QpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMucm9vdCA9IG51bGw7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5vbkNoYW5nZSA9IG9uQ2hhbmdlO1xuXHQgICAgICAvLyBjaGVjayBiYXNlIHRhZ1xuXHQgICAgICB2YXIgYmFzZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYmFzZScpO1xuXHQgICAgICB0aGlzLmJhc2UgPSBiYXNlRWwgJiYgYmFzZUVsLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuXHQgICAgfVxuXHRcblx0ICAgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydCgpIHtcblx0ICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHZhciB1cmwgPSBsb2NhdGlvbi5wYXRobmFtZSArIGxvY2F0aW9uLnNlYXJjaDtcblx0ICAgICAgICBpZiAoX3RoaXMucm9vdCkge1xuXHQgICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoX3RoaXMucm9vdFJFLCAnJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIF90aGlzLm9uQ2hhbmdlKHVybCwgZSAmJiBlLnN0YXRlLCBsb2NhdGlvbi5oYXNoKTtcblx0ICAgICAgfTtcblx0ICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICAgIHRoaXMubGlzdGVuZXIoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gc3RvcCgpIHtcblx0ICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICB9O1xuXHRcblx0ICAgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyhwYXRoLCByZXBsYWNlLCBhcHBlbmQpIHtcblx0ICAgICAgdmFyIHVybCA9IHRoaXMuZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpO1xuXHQgICAgICBpZiAocmVwbGFjZSkge1xuXHQgICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCAnJywgdXJsKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyByZWNvcmQgc2Nyb2xsIHBvc2l0aW9uIGJ5IHJlcGxhY2luZyBjdXJyZW50IHN0YXRlXG5cdCAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoe1xuXHQgICAgICAgICAgcG9zOiB7XG5cdCAgICAgICAgICAgIHg6IHdpbmRvdy5wYWdlWE9mZnNldCxcblx0ICAgICAgICAgICAgeTogd2luZG93LnBhZ2VZT2Zmc2V0XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwgJycsIGxvY2F0aW9uLmhyZWYpO1xuXHQgICAgICAgIC8vIHRoZW4gcHVzaCBuZXcgc3RhdGVcblx0ICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZSh7fSwgJycsIHVybCk7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGhhc2hNYXRjaCA9IHBhdGgubWF0Y2goaGFzaFJFKTtcblx0ICAgICAgdmFyIGhhc2ggPSBoYXNoTWF0Y2ggJiYgaGFzaE1hdGNoWzBdO1xuXHQgICAgICBwYXRoID0gdXJsXG5cdCAgICAgIC8vIHN0cmlwIGhhc2ggc28gaXQgZG9lc24ndCBtZXNzIHVwIHBhcmFtc1xuXHQgICAgICAucmVwbGFjZShoYXNoUkUsICcnKVxuXHQgICAgICAvLyByZW1vdmUgcm9vdCBiZWZvcmUgbWF0Y2hpbmdcblx0ICAgICAgLnJlcGxhY2UodGhpcy5yb290UkUsICcnKTtcblx0ICAgICAgdGhpcy5vbkNoYW5nZShwYXRoLCBudWxsLCBoYXNoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5mb3JtYXRQYXRoID0gZnVuY3Rpb24gZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpIHtcblx0ICAgICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLydcblx0ICAgICAgLy8gYWJzb2x1dGUgcGF0aFxuXHQgICAgICA/IHRoaXMucm9vdCA/IHRoaXMucm9vdCArICcvJyArIHBhdGgucmVwbGFjZSgvXlxcLy8sICcnKSA6IHBhdGggOiByZXNvbHZlUGF0aCh0aGlzLmJhc2UgfHwgbG9jYXRpb24ucGF0aG5hbWUsIHBhdGgsIGFwcGVuZCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBIVE1MNUhpc3Rvcnk7XG5cdCAgfSkoKTtcblx0XG5cdCAgdmFyIEhhc2hIaXN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEhhc2hIaXN0b3J5KF9yZWYpIHtcblx0ICAgICAgdmFyIGhhc2hiYW5nID0gX3JlZi5oYXNoYmFuZztcblx0ICAgICAgdmFyIG9uQ2hhbmdlID0gX3JlZi5vbkNoYW5nZTtcblx0ICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIEhhc2hIaXN0b3J5KTtcblx0XG5cdCAgICAgIHRoaXMuaGFzaGJhbmcgPSBoYXNoYmFuZztcblx0ICAgICAgdGhpcy5vbkNoYW5nZSA9IG9uQ2hhbmdlO1xuXHQgICAgfVxuXHRcblx0ICAgIEhhc2hIaXN0b3J5LnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KCkge1xuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHBhdGggPSBsb2NhdGlvbi5oYXNoO1xuXHQgICAgICAgIHZhciByYXcgPSBwYXRoLnJlcGxhY2UoL14jIT8vLCAnJyk7XG5cdCAgICAgICAgLy8gYWx3YXlzXG5cdCAgICAgICAgaWYgKHJhdy5jaGFyQXQoMCkgIT09ICcvJykge1xuXHQgICAgICAgICAgcmF3ID0gJy8nICsgcmF3O1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgZm9ybWF0dGVkUGF0aCA9IHNlbGYuZm9ybWF0UGF0aChyYXcpO1xuXHQgICAgICAgIGlmIChmb3JtYXR0ZWRQYXRoICE9PSBwYXRoKSB7XG5cdCAgICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKGZvcm1hdHRlZFBhdGgpO1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBkZXRlcm1pbmUgcXVlcnlcblx0ICAgICAgICAvLyBub3RlIGl0J3MgcG9zc2libGUgdG8gaGF2ZSBxdWVyaWVzIGluIGJvdGggdGhlIGFjdHVhbCBVUkxcblx0ICAgICAgICAvLyBhbmQgdGhlIGhhc2ggZnJhZ21lbnQgaXRzZWxmLlxuXHQgICAgICAgIHZhciBxdWVyeSA9IGxvY2F0aW9uLnNlYXJjaCAmJiBwYXRoLmluZGV4T2YoJz8nKSA+IC0xID8gJyYnICsgbG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpIDogbG9jYXRpb24uc2VhcmNoO1xuXHQgICAgICAgIHNlbGYub25DaGFuZ2UocGF0aC5yZXBsYWNlKC9eIyE/LywgJycpICsgcXVlcnkpO1xuXHQgICAgICB9O1xuXHQgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgICB0aGlzLmxpc3RlbmVyKCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIEhhc2hIaXN0b3J5LnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gc3RvcCgpIHtcblx0ICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgIH07XG5cdFxuXHQgICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gZ28ocGF0aCwgcmVwbGFjZSwgYXBwZW5kKSB7XG5cdCAgICAgIHBhdGggPSB0aGlzLmZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKTtcblx0ICAgICAgaWYgKHJlcGxhY2UpIHtcblx0ICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKHBhdGgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGxvY2F0aW9uLmhhc2ggPSBwYXRoO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIEhhc2hIaXN0b3J5LnByb3RvdHlwZS5mb3JtYXRQYXRoID0gZnVuY3Rpb24gZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpIHtcblx0ICAgICAgdmFyIGlzQWJzb2xvdXRlID0gcGF0aC5jaGFyQXQoMCkgPT09ICcvJztcblx0ICAgICAgdmFyIHByZWZpeCA9ICcjJyArICh0aGlzLmhhc2hiYW5nID8gJyEnIDogJycpO1xuXHQgICAgICByZXR1cm4gaXNBYnNvbG91dGUgPyBwcmVmaXggKyBwYXRoIDogcHJlZml4ICsgcmVzb2x2ZVBhdGgobG9jYXRpb24uaGFzaC5yZXBsYWNlKC9eIyE/LywgJycpLCBwYXRoLCBhcHBlbmQpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gSGFzaEhpc3Rvcnk7XG5cdCAgfSkoKTtcblx0XG5cdCAgdmFyIEFic3RyYWN0SGlzdG9yeSA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBBYnN0cmFjdEhpc3RvcnkoX3JlZikge1xuXHQgICAgICB2YXIgb25DaGFuZ2UgPSBfcmVmLm9uQ2hhbmdlO1xuXHQgICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgQWJzdHJhY3RIaXN0b3J5KTtcblx0XG5cdCAgICAgIHRoaXMub25DaGFuZ2UgPSBvbkNoYW5nZTtcblx0ICAgICAgdGhpcy5jdXJyZW50UGF0aCA9ICcvJztcblx0ICAgIH1cblx0XG5cdCAgICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoKSB7XG5cdCAgICAgIHRoaXMub25DaGFuZ2UoJy8nKTtcblx0ICAgIH07XG5cdFxuXHQgICAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gc3RvcCgpIHtcblx0ICAgICAgLy8gbm9vcFxuXHQgICAgfTtcblx0XG5cdCAgICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gZ28ocGF0aCwgcmVwbGFjZSwgYXBwZW5kKSB7XG5cdCAgICAgIHBhdGggPSB0aGlzLmN1cnJlbnRQYXRoID0gdGhpcy5mb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCk7XG5cdCAgICAgIHRoaXMub25DaGFuZ2UocGF0aCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuZm9ybWF0UGF0aCA9IGZ1bmN0aW9uIGZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKSB7XG5cdCAgICAgIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nID8gcGF0aCA6IHJlc29sdmVQYXRoKHRoaXMuY3VycmVudFBhdGgsIHBhdGgsIGFwcGVuZCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBBYnN0cmFjdEhpc3Rvcnk7XG5cdCAgfSkoKTtcblx0XG5cdCAgLyoqXG5cdCAgICogRGV0ZXJtaW5lIHRoZSByZXVzYWJpbGl0eSBvZiBhbiBleGlzdGluZyByb3V0ZXIgdmlldy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XG5cdCAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcblx0ICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gY2FuUmV1c2UodmlldywgaGFuZGxlciwgdHJhbnNpdGlvbikge1xuXHQgICAgdmFyIGNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcblx0ICAgIGlmICghY29tcG9uZW50IHx8ICFoYW5kbGVyKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICAgIC8vIGltcG9ydGFudDogY2hlY2sgdmlldy5Db21wb25lbnQgaGVyZSBiZWNhdXNlIGl0IG1heVxuXHQgICAgLy8gaGF2ZSBiZWVuIGNoYW5nZWQgaW4gYWN0aXZhdGUgaG9va1xuXHQgICAgaWYgKHZpZXcuQ29tcG9uZW50ICE9PSBoYW5kbGVyLmNvbXBvbmVudCkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICB2YXIgY2FuUmV1c2VGbiA9IGdldFJvdXRlQ29uZmlnKGNvbXBvbmVudCwgJ2NhblJldXNlJyk7XG5cdCAgICByZXR1cm4gdHlwZW9mIGNhblJldXNlRm4gPT09ICdib29sZWFuJyA/IGNhblJldXNlRm4gOiBjYW5SZXVzZUZuID8gY2FuUmV1c2VGbi5jYWxsKGNvbXBvbmVudCwge1xuXHQgICAgICB0bzogdHJhbnNpdGlvbi50byxcblx0ICAgICAgZnJvbTogdHJhbnNpdGlvbi5mcm9tXG5cdCAgICB9KSA6IHRydWU7IC8vIGRlZmF1bHRzIHRvIHRydWVcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIENoZWNrIGlmIGEgY29tcG9uZW50IGNhbiBkZWFjdGl2YXRlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcblx0ICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXh0XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGNhbkRlYWN0aXZhdGUodmlldywgdHJhbnNpdGlvbiwgbmV4dCkge1xuXHQgICAgdmFyIGZyb21Db21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG5cdCAgICB2YXIgaG9vayA9IGdldFJvdXRlQ29uZmlnKGZyb21Db21wb25lbnQsICdjYW5EZWFjdGl2YXRlJyk7XG5cdCAgICBpZiAoIWhvb2spIHtcblx0ICAgICAgbmV4dCgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdHJhbnNpdGlvbi5jYWxsSG9vayhob29rLCBmcm9tQ29tcG9uZW50LCBuZXh0LCB7XG5cdCAgICAgICAgZXhwZWN0Qm9vbGVhbjogdHJ1ZVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIENoZWNrIGlmIGEgY29tcG9uZW50IGNhbiBhY3RpdmF0ZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG5cdCAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjYW5BY3RpdmF0ZShoYW5kbGVyLCB0cmFuc2l0aW9uLCBuZXh0KSB7XG5cdCAgICByZXNvbHZlQXN5bmNDb21wb25lbnQoaGFuZGxlciwgZnVuY3Rpb24gKENvbXBvbmVudCkge1xuXHQgICAgICAvLyBoYXZlIHRvIGNoZWNrIGR1ZSB0byBhc3luYy1uZXNzXG5cdCAgICAgIGlmICh0cmFuc2l0aW9uLmFib3J0ZWQpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgLy8gZGV0ZXJtaW5lIGlmIHRoaXMgY29tcG9uZW50IGNhbiBiZSBhY3RpdmF0ZWRcblx0ICAgICAgdmFyIGhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhDb21wb25lbnQsICdjYW5BY3RpdmF0ZScpO1xuXHQgICAgICBpZiAoIWhvb2spIHtcblx0ICAgICAgICBuZXh0KCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdHJhbnNpdGlvbi5jYWxsSG9vayhob29rLCBudWxsLCBuZXh0LCB7XG5cdCAgICAgICAgICBleHBlY3RCb29sZWFuOiB0cnVlXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQ2FsbCBkZWFjdGl2YXRlIGhvb2tzIGZvciBleGlzdGluZyByb3V0ZXItdmlld3MuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuXHQgICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gZGVhY3RpdmF0ZSh2aWV3LCB0cmFuc2l0aW9uLCBuZXh0KSB7XG5cdCAgICB2YXIgY29tcG9uZW50ID0gdmlldy5jaGlsZFZNO1xuXHQgICAgdmFyIGhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhjb21wb25lbnQsICdkZWFjdGl2YXRlJyk7XG5cdCAgICBpZiAoIWhvb2spIHtcblx0ICAgICAgbmV4dCgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdHJhbnNpdGlvbi5jYWxsSG9va3MoaG9vaywgY29tcG9uZW50LCBuZXh0KTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEFjdGl2YXRlIC8gc3dpdGNoIGNvbXBvbmVudCBmb3IgYSByb3V0ZXItdmlldy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XG5cdCAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGRlcHRoXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBhY3RpdmF0ZSh2aWV3LCB0cmFuc2l0aW9uLCBkZXB0aCwgY2IsIHJldXNlKSB7XG5cdCAgICB2YXIgaGFuZGxlciA9IHRyYW5zaXRpb24uYWN0aXZhdGVRdWV1ZVtkZXB0aF07XG5cdCAgICBpZiAoIWhhbmRsZXIpIHtcblx0ICAgICAgc2F2ZUNoaWxkVmlldyh2aWV3KTtcblx0ICAgICAgaWYgKHZpZXcuX2JvdW5kKSB7XG5cdCAgICAgICAgdmlldy5zZXRDb21wb25lbnQobnVsbCk7XG5cdCAgICAgIH1cblx0ICAgICAgY2IgJiYgY2IoKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBDb21wb25lbnQgPSB2aWV3LkNvbXBvbmVudCA9IGhhbmRsZXIuY29tcG9uZW50O1xuXHQgICAgdmFyIGFjdGl2YXRlSG9vayA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ2FjdGl2YXRlJyk7XG5cdCAgICB2YXIgZGF0YUhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhDb21wb25lbnQsICdkYXRhJyk7XG5cdCAgICB2YXIgd2FpdEZvckRhdGEgPSBnZXRSb3V0ZUNvbmZpZyhDb21wb25lbnQsICd3YWl0Rm9yRGF0YScpO1xuXHRcblx0ICAgIHZpZXcuZGVwdGggPSBkZXB0aDtcblx0ICAgIHZpZXcuYWN0aXZhdGVkID0gZmFsc2U7XG5cdFxuXHQgICAgdmFyIGNvbXBvbmVudCA9IHVuZGVmaW5lZDtcblx0ICAgIHZhciBsb2FkaW5nID0gISEoZGF0YUhvb2sgJiYgIXdhaXRGb3JEYXRhKTtcblx0XG5cdCAgICAvLyBcInJldXNlXCIgaXMgYSBmbGFnIHBhc3NlZCBkb3duIHdoZW4gdGhlIHBhcmVudCB2aWV3IGlzXG5cdCAgICAvLyBlaXRoZXIgcmV1c2VkIHZpYSBrZWVwLWFsaXZlIG9yIGFzIGEgY2hpbGQgb2YgYSBrZXB0LWFsaXZlIHZpZXcuXG5cdCAgICAvLyBvZiBjb3Vyc2Ugd2UgY2FuIG9ubHkgcmV1c2UgaWYgdGhlIGN1cnJlbnQga2VwdC1hbGl2ZSBpbnN0YW5jZVxuXHQgICAgLy8gaXMgb2YgdGhlIGNvcnJlY3QgdHlwZS5cblx0ICAgIHJldXNlID0gcmV1c2UgJiYgdmlldy5jaGlsZFZNICYmIHZpZXcuY2hpbGRWTS5jb25zdHJ1Y3RvciA9PT0gQ29tcG9uZW50O1xuXHRcblx0ICAgIGlmIChyZXVzZSkge1xuXHQgICAgICAvLyBqdXN0IHJldXNlXG5cdCAgICAgIGNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcblx0ICAgICAgY29tcG9uZW50LiRsb2FkaW5nUm91dGVEYXRhID0gbG9hZGluZztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHNhdmVDaGlsZFZpZXcodmlldyk7XG5cdFxuXHQgICAgICAvLyB1bmJ1aWxkIGN1cnJlbnQgY29tcG9uZW50LiB0aGlzIHN0ZXAgYWxzbyBkZXN0cm95c1xuXHQgICAgICAvLyBhbmQgcmVtb3ZlcyBhbGwgbmVzdGVkIGNoaWxkIHZpZXdzLlxuXHQgICAgICB2aWV3LnVuYnVpbGQodHJ1ZSk7XG5cdFxuXHQgICAgICAvLyBidWlsZCB0aGUgbmV3IGNvbXBvbmVudC4gdGhpcyB3aWxsIGFsc28gY3JlYXRlIHRoZVxuXHQgICAgICAvLyBkaXJlY3QgY2hpbGQgdmlldyBvZiB0aGUgY3VycmVudCBvbmUuIGl0IHdpbGwgcmVnaXN0ZXJcblx0ICAgICAgLy8gaXRzZWxmIGFzIHZpZXcuY2hpbGRWaWV3LlxuXHQgICAgICBjb21wb25lbnQgPSB2aWV3LmJ1aWxkKHtcblx0ICAgICAgICBfbWV0YToge1xuXHQgICAgICAgICAgJGxvYWRpbmdSb3V0ZURhdGE6IGxvYWRpbmdcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7XG5cdCAgICAgICAgICB0aGlzLl9yb3V0ZXJWaWV3ID0gdmlldztcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgLy8gaGFuZGxlIGtlZXAtYWxpdmUuXG5cdCAgICAgIC8vIHdoZW4gYSBrZXB0LWFsaXZlIGNoaWxkIHZtIGlzIHJlc3RvcmVkLCB3ZSBuZWVkIHRvXG5cdCAgICAgIC8vIGFkZCBpdHMgY2FjaGVkIGNoaWxkIHZpZXdzIGludG8gdGhlIHJvdXRlcidzIHZpZXcgbGlzdCxcblx0ICAgICAgLy8gYW5kIGFsc28gcHJvcGVybHkgdXBkYXRlIGN1cnJlbnQgdmlldydzIGNoaWxkIHZpZXcuXG5cdCAgICAgIGlmICh2aWV3LmtlZXBBbGl2ZSkge1xuXHQgICAgICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IGxvYWRpbmc7XG5cdCAgICAgICAgdmFyIGNhY2hlZENoaWxkVmlldyA9IGNvbXBvbmVudC5fa2VlcEFsaXZlUm91dGVyVmlldztcblx0ICAgICAgICBpZiAoY2FjaGVkQ2hpbGRWaWV3KSB7XG5cdCAgICAgICAgICB2aWV3LmNoaWxkVmlldyA9IGNhY2hlZENoaWxkVmlldztcblx0ICAgICAgICAgIGNvbXBvbmVudC5fa2VlcEFsaXZlUm91dGVyVmlldyA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gY2xlYW51cCB0aGUgY29tcG9uZW50IGluIGNhc2UgdGhlIHRyYW5zaXRpb24gaXMgYWJvcnRlZFxuXHQgICAgLy8gYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgZXZlciBpbnNlcnRlZC5cblx0ICAgIHZhciBjbGVhbnVwID0gZnVuY3Rpb24gY2xlYW51cCgpIHtcblx0ICAgICAgY29tcG9uZW50LiRkZXN0cm95KCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGFjdHVhbGx5IGluc2VydCB0aGUgY29tcG9uZW50IGFuZCB0cmlnZ2VyIHRyYW5zaXRpb25cblx0ICAgIHZhciBpbnNlcnQgPSBmdW5jdGlvbiBpbnNlcnQoKSB7XG5cdCAgICAgIGlmIChyZXVzZSkge1xuXHQgICAgICAgIGNiICYmIGNiKCk7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciByb3V0ZXIgPSB0cmFuc2l0aW9uLnJvdXRlcjtcblx0ICAgICAgaWYgKHJvdXRlci5fcmVuZGVyZWQgfHwgcm91dGVyLl90cmFuc2l0aW9uT25Mb2FkKSB7XG5cdCAgICAgICAgdmlldy50cmFuc2l0aW9uKGNvbXBvbmVudCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gbm8gdHJhbnNpdGlvbiBvbiBmaXJzdCByZW5kZXIsIG1hbnVhbCB0cmFuc2l0aW9uXG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKHZpZXcuc2V0Q3VycmVudCkge1xuXHQgICAgICAgICAgLy8gMC4xMiBjb21wYXRcblx0ICAgICAgICAgIHZpZXcuc2V0Q3VycmVudChjb21wb25lbnQpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvLyAxLjBcblx0ICAgICAgICAgIHZpZXcuY2hpbGRWTSA9IGNvbXBvbmVudDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY29tcG9uZW50LiRiZWZvcmUodmlldy5hbmNob3IsIG51bGwsIGZhbHNlKTtcblx0ICAgICAgfVxuXHQgICAgICBjYiAmJiBjYigpO1xuXHQgICAgfTtcblx0XG5cdCAgICB2YXIgYWZ0ZXJEYXRhID0gZnVuY3Rpb24gYWZ0ZXJEYXRhKCkge1xuXHQgICAgICAvLyBhY3RpdmF0ZSB0aGUgY2hpbGQgdmlld1xuXHQgICAgICBpZiAodmlldy5jaGlsZFZpZXcpIHtcblx0ICAgICAgICBhY3RpdmF0ZSh2aWV3LmNoaWxkVmlldywgdHJhbnNpdGlvbiwgZGVwdGggKyAxLCBudWxsLCByZXVzZSB8fCB2aWV3LmtlZXBBbGl2ZSk7XG5cdCAgICAgIH1cblx0ICAgICAgaW5zZXJ0KCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGNhbGxlZCBhZnRlciBhY3RpdmF0aW9uIGhvb2sgaXMgcmVzb2x2ZWRcblx0ICAgIHZhciBhZnRlckFjdGl2YXRlID0gZnVuY3Rpb24gYWZ0ZXJBY3RpdmF0ZSgpIHtcblx0ICAgICAgdmlldy5hY3RpdmF0ZWQgPSB0cnVlO1xuXHQgICAgICBpZiAoZGF0YUhvb2sgJiYgd2FpdEZvckRhdGEpIHtcblx0ICAgICAgICAvLyB3YWl0IHVudGlsIGRhdGEgbG9hZGVkIHRvIGluc2VydFxuXHQgICAgICAgIGxvYWREYXRhKGNvbXBvbmVudCwgdHJhbnNpdGlvbiwgZGF0YUhvb2ssIGFmdGVyRGF0YSwgY2xlYW51cCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gbG9hZCBkYXRhIGFuZCBpbnNlcnQgYXQgdGhlIHNhbWUgdGltZVxuXHQgICAgICAgIGlmIChkYXRhSG9vaykge1xuXHQgICAgICAgICAgbG9hZERhdGEoY29tcG9uZW50LCB0cmFuc2l0aW9uLCBkYXRhSG9vayk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGFmdGVyRGF0YSgpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIGlmIChhY3RpdmF0ZUhvb2spIHtcblx0ICAgICAgdHJhbnNpdGlvbi5jYWxsSG9va3MoYWN0aXZhdGVIb29rLCBjb21wb25lbnQsIGFmdGVyQWN0aXZhdGUsIHtcblx0ICAgICAgICBjbGVhbnVwOiBjbGVhbnVwLFxuXHQgICAgICAgIHBvc3RBY3RpdmF0ZTogdHJ1ZVxuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGFmdGVyQWN0aXZhdGUoKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJldXNlIGEgdmlldywganVzdCByZWxvYWQgZGF0YSBpZiBuZWNlc3NhcnkuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuXHQgICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZXVzZSh2aWV3LCB0cmFuc2l0aW9uKSB7XG5cdCAgICB2YXIgY29tcG9uZW50ID0gdmlldy5jaGlsZFZNO1xuXHQgICAgdmFyIGRhdGFIb29rID0gZ2V0Um91dGVDb25maWcoY29tcG9uZW50LCAnZGF0YScpO1xuXHQgICAgaWYgKGRhdGFIb29rKSB7XG5cdCAgICAgIGxvYWREYXRhKGNvbXBvbmVudCwgdHJhbnNpdGlvbiwgZGF0YUhvb2spO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQXN5bmNocm9ub3VzbHkgbG9hZCBhbmQgYXBwbHkgZGF0YSB0byBjb21wb25lbnQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gY29tcG9uZW50XG5cdCAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gaG9va1xuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2xlYW51cFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBsb2FkRGF0YShjb21wb25lbnQsIHRyYW5zaXRpb24sIGhvb2ssIGNiLCBjbGVhbnVwKSB7XG5cdCAgICBjb21wb25lbnQuJGxvYWRpbmdSb3V0ZURhdGEgPSB0cnVlO1xuXHQgICAgdHJhbnNpdGlvbi5jYWxsSG9va3MoaG9vaywgY29tcG9uZW50LCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IGZhbHNlO1xuXHQgICAgICBjb21wb25lbnQuJGVtaXQoJ3JvdXRlLWRhdGEtbG9hZGVkJywgY29tcG9uZW50KTtcblx0ICAgICAgY2IgJiYgY2IoKTtcblx0ICAgIH0sIHtcblx0ICAgICAgY2xlYW51cDogY2xlYW51cCxcblx0ICAgICAgcG9zdEFjdGl2YXRlOiB0cnVlLFxuXHQgICAgICBwcm9jZXNzRGF0YTogZnVuY3Rpb24gcHJvY2Vzc0RhdGEoZGF0YSkge1xuXHQgICAgICAgIC8vIGhhbmRsZSBwcm9taXNlIHN1Z2FyIHN5bnRheFxuXHQgICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xuXHQgICAgICAgIGlmIChpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG5cdCAgICAgICAgICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICAgICAgdmFyIHZhbCA9IGRhdGFba2V5XTtcblx0ICAgICAgICAgICAgaWYgKGlzUHJvbWlzZSh2YWwpKSB7XG5cdCAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh2YWwudGhlbihmdW5jdGlvbiAocmVzb2x2ZWRWYWwpIHtcblx0ICAgICAgICAgICAgICAgIGNvbXBvbmVudC4kc2V0KGtleSwgcmVzb2x2ZWRWYWwpO1xuXHQgICAgICAgICAgICAgIH0pKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICBjb21wb25lbnQuJHNldChrZXksIHZhbCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAocHJvbWlzZXMubGVuZ3RoKSB7XG5cdCAgICAgICAgICByZXR1cm4gcHJvbWlzZXNbMF0uY29uc3RydWN0b3IuYWxsKHByb21pc2VzKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogU2F2ZSB0aGUgY2hpbGQgdmlldyBmb3IgYSBrZXB0LWFsaXZlIHZpZXcgc28gdGhhdFxuXHQgICAqIHdlIGNhbiByZXN0b3JlIGl0IHdoZW4gaXQgaXMgc3dpdGNoZWQgYmFjayB0by5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHNhdmVDaGlsZFZpZXcodmlldykge1xuXHQgICAgaWYgKHZpZXcua2VlcEFsaXZlICYmIHZpZXcuY2hpbGRWTSAmJiB2aWV3LmNoaWxkVmlldykge1xuXHQgICAgICB2aWV3LmNoaWxkVk0uX2tlZXBBbGl2ZVJvdXRlclZpZXcgPSB2aWV3LmNoaWxkVmlldztcblx0ICAgIH1cblx0ICAgIHZpZXcuY2hpbGRWaWV3ID0gbnVsbDtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIENoZWNrIHBsYWluIG9iamVjdC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsKSB7XG5cdCAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQSBSb3V0ZVRyYW5zaXRpb24gb2JqZWN0IG1hbmFnZXMgdGhlIHBpcGVsaW5lIG9mIGFcblx0ICAgKiByb3V0ZXItdmlldyBzd2l0Y2hpbmcgcHJvY2Vzcy4gVGhpcyBpcyBhbHNvIHRoZSBvYmplY3Rcblx0ICAgKiBwYXNzZWQgaW50byB1c2VyIHJvdXRlIGhvb2tzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtSb3V0ZXJ9IHJvdXRlclxuXHQgICAqIEBwYXJhbSB7Um91dGV9IHRvXG5cdCAgICogQHBhcmFtIHtSb3V0ZX0gZnJvbVxuXHQgICAqL1xuXHRcblx0ICB2YXIgUm91dGVUcmFuc2l0aW9uID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFJvdXRlVHJhbnNpdGlvbihyb3V0ZXIsIHRvLCBmcm9tKSB7XG5cdCAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBSb3V0ZVRyYW5zaXRpb24pO1xuXHRcblx0ICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG5cdCAgICAgIHRoaXMudG8gPSB0bztcblx0ICAgICAgdGhpcy5mcm9tID0gZnJvbTtcblx0ICAgICAgdGhpcy5uZXh0ID0gbnVsbDtcblx0ICAgICAgdGhpcy5hYm9ydGVkID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQWJvcnQgY3VycmVudCB0cmFuc2l0aW9uIGFuZCByZXR1cm4gdG8gcHJldmlvdXMgbG9jYXRpb24uXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZVRyYW5zaXRpb24ucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24gYWJvcnQoKSB7XG5cdCAgICAgIGlmICghdGhpcy5hYm9ydGVkKSB7XG5cdCAgICAgICAgdGhpcy5hYm9ydGVkID0gdHJ1ZTtcblx0ICAgICAgICAvLyBpZiB0aGUgcm9vdCBwYXRoIHRocm93cyBhbiBlcnJvciBkdXJpbmcgdmFsaWRhdGlvblxuXHQgICAgICAgIC8vIG9uIGluaXRpYWwgbG9hZCwgaXQgZ2V0cyBjYXVnaHQgaW4gYW4gaW5maW5pdGUgbG9vcC5cblx0ICAgICAgICB2YXIgYWJvcnRpbmdPbkxvYWQgPSAhdGhpcy5mcm9tLnBhdGggJiYgdGhpcy50by5wYXRoID09PSAnLyc7XG5cdCAgICAgICAgaWYgKCFhYm9ydGluZ09uTG9hZCkge1xuXHQgICAgICAgICAgdGhpcy5yb3V0ZXIucmVwbGFjZSh0aGlzLmZyb20ucGF0aCB8fCAnLycpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEFib3J0IGN1cnJlbnQgdHJhbnNpdGlvbiBhbmQgcmVkaXJlY3QgdG8gYSBuZXcgbG9jYXRpb24uXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUucmVkaXJlY3QgPSBmdW5jdGlvbiByZWRpcmVjdChwYXRoKSB7XG5cdCAgICAgIGlmICghdGhpcy5hYm9ydGVkKSB7XG5cdCAgICAgICAgdGhpcy5hYm9ydGVkID0gdHJ1ZTtcblx0ICAgICAgICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICBwYXRoID0gbWFwUGFyYW1zKHBhdGgsIHRoaXMudG8ucGFyYW1zLCB0aGlzLnRvLnF1ZXJ5KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcGF0aC5wYXJhbXMgPSBwYXRoLnBhcmFtcyB8fCB0aGlzLnRvLnBhcmFtcztcblx0ICAgICAgICAgIHBhdGgucXVlcnkgPSBwYXRoLnF1ZXJ5IHx8IHRoaXMudG8ucXVlcnk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMucm91dGVyLnJlcGxhY2UocGF0aCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBIHJvdXRlciB2aWV3IHRyYW5zaXRpb24ncyBwaXBlbGluZSBjYW4gYmUgZGVzY3JpYmVkIGFzXG5cdCAgICAgKiBmb2xsb3dzLCBhc3N1bWluZyB3ZSBhcmUgdHJhbnNpdGlvbmluZyBmcm9tIGFuIGV4aXN0aW5nXG5cdCAgICAgKiA8cm91dGVyLXZpZXc+IGNoYWluIFtDb21wb25lbnQgQSwgQ29tcG9uZW50IEJdIHRvIGEgbmV3XG5cdCAgICAgKiBjaGFpbiBbQ29tcG9uZW50IEEsIENvbXBvbmVudCBDXTpcblx0ICAgICAqXG5cdCAgICAgKiAgQSAgICBBXG5cdCAgICAgKiAgfCA9PiB8XG5cdCAgICAgKiAgQiAgICBDXG5cdCAgICAgKlxuXHQgICAgICogMS4gUmV1c2FibGl0eSBwaGFzZTpcblx0ICAgICAqICAgLT4gY2FuUmV1c2UoQSwgQSlcblx0ICAgICAqICAgLT4gY2FuUmV1c2UoQiwgQylcblx0ICAgICAqICAgLT4gZGV0ZXJtaW5lIG5ldyBxdWV1ZXM6XG5cdCAgICAgKiAgICAgIC0gZGVhY3RpdmF0aW9uOiBbQl1cblx0ICAgICAqICAgICAgLSBhY3RpdmF0aW9uOiBbQ11cblx0ICAgICAqXG5cdCAgICAgKiAyLiBWYWxpZGF0aW9uIHBoYXNlOlxuXHQgICAgICogICAtPiBjYW5EZWFjdGl2YXRlKEIpXG5cdCAgICAgKiAgIC0+IGNhbkFjdGl2YXRlKEMpXG5cdCAgICAgKlxuXHQgICAgICogMy4gQWN0aXZhdGlvbiBwaGFzZTpcblx0ICAgICAqICAgLT4gZGVhY3RpdmF0ZShCKVxuXHQgICAgICogICAtPiBhY3RpdmF0ZShDKVxuXHQgICAgICpcblx0ICAgICAqIEVhY2ggb2YgdGhlc2Ugc3RlcHMgY2FuIGJlIGFzeW5jaHJvbm91cywgYW5kIGFueVxuXHQgICAgICogc3RlcCBjYW4gcG90ZW50aWFsbHkgYWJvcnQgdGhlIHRyYW5zaXRpb24uXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydChjYikge1xuXHQgICAgICB2YXIgdHJhbnNpdGlvbiA9IHRoaXM7XG5cdFxuXHQgICAgICAvLyBkZXRlcm1pbmUgdGhlIHF1ZXVlIG9mIHZpZXdzIHRvIGRlYWN0aXZhdGVcblx0ICAgICAgdmFyIGRlYWN0aXZhdGVRdWV1ZSA9IFtdO1xuXHQgICAgICB2YXIgdmlldyA9IHRoaXMucm91dGVyLl9yb290Vmlldztcblx0ICAgICAgd2hpbGUgKHZpZXcpIHtcblx0ICAgICAgICBkZWFjdGl2YXRlUXVldWUudW5zaGlmdCh2aWV3KTtcblx0ICAgICAgICB2aWV3ID0gdmlldy5jaGlsZFZpZXc7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHJldmVyc2VEZWFjdGl2YXRlUXVldWUgPSBkZWFjdGl2YXRlUXVldWUuc2xpY2UoKS5yZXZlcnNlKCk7XG5cdFxuXHQgICAgICAvLyBkZXRlcm1pbmUgdGhlIHF1ZXVlIG9mIHJvdXRlIGhhbmRsZXJzIHRvIGFjdGl2YXRlXG5cdCAgICAgIHZhciBhY3RpdmF0ZVF1ZXVlID0gdGhpcy5hY3RpdmF0ZVF1ZXVlID0gdG9BcnJheSh0aGlzLnRvLm1hdGNoZWQpLm1hcChmdW5jdGlvbiAobWF0Y2gpIHtcblx0ICAgICAgICByZXR1cm4gbWF0Y2guaGFuZGxlcjtcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICAvLyAxLiBSZXVzYWJpbGl0eSBwaGFzZVxuXHQgICAgICB2YXIgaSA9IHVuZGVmaW5lZCxcblx0ICAgICAgICAgIHJldXNlUXVldWUgPSB1bmRlZmluZWQ7XG5cdCAgICAgIGZvciAoaSA9IDA7IGkgPCByZXZlcnNlRGVhY3RpdmF0ZVF1ZXVlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgaWYgKCFjYW5SZXVzZShyZXZlcnNlRGVhY3RpdmF0ZVF1ZXVlW2ldLCBhY3RpdmF0ZVF1ZXVlW2ldLCB0cmFuc2l0aW9uKSkge1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGlmIChpID4gMCkge1xuXHQgICAgICAgIHJldXNlUXVldWUgPSByZXZlcnNlRGVhY3RpdmF0ZVF1ZXVlLnNsaWNlKDAsIGkpO1xuXHQgICAgICAgIGRlYWN0aXZhdGVRdWV1ZSA9IHJldmVyc2VEZWFjdGl2YXRlUXVldWUuc2xpY2UoaSkucmV2ZXJzZSgpO1xuXHQgICAgICAgIGFjdGl2YXRlUXVldWUgPSBhY3RpdmF0ZVF1ZXVlLnNsaWNlKGkpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyAyLiBWYWxpZGF0aW9uIHBoYXNlXG5cdCAgICAgIHRyYW5zaXRpb24ucnVuUXVldWUoZGVhY3RpdmF0ZVF1ZXVlLCBjYW5EZWFjdGl2YXRlLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShhY3RpdmF0ZVF1ZXVlLCBjYW5BY3RpdmF0ZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShkZWFjdGl2YXRlUXVldWUsIGRlYWN0aXZhdGUsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgLy8gMy4gQWN0aXZhdGlvbiBwaGFzZVxuXHRcblx0ICAgICAgICAgICAgLy8gVXBkYXRlIHJvdXRlciBjdXJyZW50IHJvdXRlXG5cdCAgICAgICAgICAgIHRyYW5zaXRpb24ucm91dGVyLl9vblRyYW5zaXRpb25WYWxpZGF0ZWQodHJhbnNpdGlvbik7XG5cdFxuXHQgICAgICAgICAgICAvLyB0cmlnZ2VyIHJldXNlIGZvciBhbGwgcmV1c2VkIHZpZXdzXG5cdCAgICAgICAgICAgIHJldXNlUXVldWUgJiYgcmV1c2VRdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uICh2aWV3KSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIHJldXNlKHZpZXcsIHRyYW5zaXRpb24pO1xuXHQgICAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICAgIC8vIHRoZSByb290IG9mIHRoZSBjaGFpbiB0aGF0IG5lZWRzIHRvIGJlIHJlcGxhY2VkXG5cdCAgICAgICAgICAgIC8vIGlzIHRoZSB0b3AtbW9zdCBub24tcmV1c2FibGUgdmlldy5cblx0ICAgICAgICAgICAgaWYgKGRlYWN0aXZhdGVRdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgICB2YXIgX3ZpZXcgPSBkZWFjdGl2YXRlUXVldWVbZGVhY3RpdmF0ZVF1ZXVlLmxlbmd0aCAtIDFdO1xuXHQgICAgICAgICAgICAgIHZhciBkZXB0aCA9IHJldXNlUXVldWUgPyByZXVzZVF1ZXVlLmxlbmd0aCA6IDA7XG5cdCAgICAgICAgICAgICAgYWN0aXZhdGUoX3ZpZXcsIHRyYW5zaXRpb24sIGRlcHRoLCBjYik7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgY2IoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEFzeW5jaHJvbm91c2x5IGFuZCBzZXF1ZW50aWFsbHkgYXBwbHkgYSBmdW5jdGlvbiB0byBhXG5cdCAgICAgKiBxdWV1ZS5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge0FycmF5fSBxdWV1ZVxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZVRyYW5zaXRpb24ucHJvdG90eXBlLnJ1blF1ZXVlID0gZnVuY3Rpb24gcnVuUXVldWUocXVldWUsIGZuLCBjYikge1xuXHQgICAgICB2YXIgdHJhbnNpdGlvbiA9IHRoaXM7XG5cdCAgICAgIHN0ZXAoMCk7XG5cdCAgICAgIGZ1bmN0aW9uIHN0ZXAoaW5kZXgpIHtcblx0ICAgICAgICBpZiAoaW5kZXggPj0gcXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgICBjYigpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBmbihxdWV1ZVtpbmRleF0sIHRyYW5zaXRpb24sIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgc3RlcChpbmRleCArIDEpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQ2FsbCBhIHVzZXIgcHJvdmlkZWQgcm91dGUgdHJhbnNpdGlvbiBob29rIGFuZCBoYW5kbGVcblx0ICAgICAqIHRoZSByZXNwb25zZSAoZS5nLiBpZiB0aGUgdXNlciByZXR1cm5zIGEgcHJvbWlzZSkuXG5cdCAgICAgKlxuXHQgICAgICogSWYgdGhlIHVzZXIgbmVpdGhlciBleHBlY3RzIGFuIGFyZ3VtZW50IG5vciByZXR1cm5zIGFcblx0ICAgICAqIHByb21pc2UsIHRoZSBob29rIGlzIGFzc3VtZWQgdG8gYmUgc3luY2hyb25vdXMuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaG9va1xuXHQgICAgICogQHBhcmFtIHsqfSBbY29udGV4dF1cblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBleHBlY3RCb29sZWFuXG5cdCAgICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gcG9zdEFjdGl2ZVxuXHQgICAgICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBwcm9jZXNzRGF0YVxuXHQgICAgICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBjbGVhbnVwXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZVRyYW5zaXRpb24ucHJvdG90eXBlLmNhbGxIb29rID0gZnVuY3Rpb24gY2FsbEhvb2soaG9vaywgY29udGV4dCwgY2IpIHtcblx0ICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1szXTtcblx0XG5cdCAgICAgIHZhciBfcmVmJGV4cGVjdEJvb2xlYW4gPSBfcmVmLmV4cGVjdEJvb2xlYW47XG5cdCAgICAgIHZhciBleHBlY3RCb29sZWFuID0gX3JlZiRleHBlY3RCb29sZWFuID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkZXhwZWN0Qm9vbGVhbjtcblx0ICAgICAgdmFyIF9yZWYkcG9zdEFjdGl2YXRlID0gX3JlZi5wb3N0QWN0aXZhdGU7XG5cdCAgICAgIHZhciBwb3N0QWN0aXZhdGUgPSBfcmVmJHBvc3RBY3RpdmF0ZSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJHBvc3RBY3RpdmF0ZTtcblx0ICAgICAgdmFyIHByb2Nlc3NEYXRhID0gX3JlZi5wcm9jZXNzRGF0YTtcblx0ICAgICAgdmFyIGNsZWFudXAgPSBfcmVmLmNsZWFudXA7XG5cdFxuXHQgICAgICB2YXIgdHJhbnNpdGlvbiA9IHRoaXM7XG5cdCAgICAgIHZhciBuZXh0Q2FsbGVkID0gZmFsc2U7XG5cdFxuXHQgICAgICAvLyBhYm9ydCB0aGUgdHJhbnNpdGlvblxuXHQgICAgICB2YXIgYWJvcnQgPSBmdW5jdGlvbiBhYm9ydCgpIHtcblx0ICAgICAgICBjbGVhbnVwICYmIGNsZWFudXAoKTtcblx0ICAgICAgICB0cmFuc2l0aW9uLmFib3J0KCk7XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICAvLyBoYW5kbGUgZXJyb3JzXG5cdCAgICAgIHZhciBvbkVycm9yID0gZnVuY3Rpb24gb25FcnJvcihlcnIpIHtcblx0ICAgICAgICBwb3N0QWN0aXZhdGUgPyBuZXh0KCkgOiBhYm9ydCgpO1xuXHQgICAgICAgIGlmIChlcnIgJiYgIXRyYW5zaXRpb24ucm91dGVyLl9zdXBwcmVzcykge1xuXHQgICAgICAgICAgd2FybiQxKCdVbmNhdWdodCBlcnJvciBkdXJpbmcgdHJhbnNpdGlvbjogJyk7XG5cdCAgICAgICAgICB0aHJvdyBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyciA6IG5ldyBFcnJvcihlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0XG5cdCAgICAgIC8vIHNpbmNlIHByb21pc2Ugc3dhbGxvd3MgZXJyb3JzLCB3ZSBoYXZlIHRvXG5cdCAgICAgIC8vIHRocm93IGl0IGluIHRoZSBuZXh0IHRpY2suLi5cblx0ICAgICAgdmFyIG9uUHJvbWlzZUVycm9yID0gZnVuY3Rpb24gb25Qcm9taXNlRXJyb3IoZXJyKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIG9uRXJyb3IoZXJyKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgdGhyb3cgZTtcblx0ICAgICAgICAgIH0sIDApO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0XG5cdCAgICAgIC8vIGFkdmFuY2UgdGhlIHRyYW5zaXRpb24gdG8gdGhlIG5leHQgc3RlcFxuXHQgICAgICB2YXIgbmV4dCA9IGZ1bmN0aW9uIG5leHQoKSB7XG5cdCAgICAgICAgaWYgKG5leHRDYWxsZWQpIHtcblx0ICAgICAgICAgIHdhcm4kMSgndHJhbnNpdGlvbi5uZXh0KCkgc2hvdWxkIGJlIGNhbGxlZCBvbmx5IG9uY2UuJyk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIG5leHRDYWxsZWQgPSB0cnVlO1xuXHQgICAgICAgIGlmICh0cmFuc2l0aW9uLmFib3J0ZWQpIHtcblx0ICAgICAgICAgIGNsZWFudXAgJiYgY2xlYW51cCgpO1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYiAmJiBjYigpO1xuXHQgICAgICB9O1xuXHRcblx0ICAgICAgdmFyIG5leHRXaXRoQm9vbGVhbiA9IGZ1bmN0aW9uIG5leHRXaXRoQm9vbGVhbihyZXMpIHtcblx0ICAgICAgICBpZiAodHlwZW9mIHJlcyA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICAgICAgICByZXMgPyBuZXh0KCkgOiBhYm9ydCgpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoaXNQcm9taXNlKHJlcykpIHtcblx0ICAgICAgICAgIHJlcy50aGVuKGZ1bmN0aW9uIChvaykge1xuXHQgICAgICAgICAgICBvayA/IG5leHQoKSA6IGFib3J0KCk7XG5cdCAgICAgICAgICB9LCBvblByb21pc2VFcnJvcik7XG5cdCAgICAgICAgfSBlbHNlIGlmICghaG9vay5sZW5ndGgpIHtcblx0ICAgICAgICAgIG5leHQoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICB2YXIgbmV4dFdpdGhEYXRhID0gZnVuY3Rpb24gbmV4dFdpdGhEYXRhKGRhdGEpIHtcblx0ICAgICAgICB2YXIgcmVzID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICByZXMgPSBwcm9jZXNzRGF0YShkYXRhKTtcblx0ICAgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgIHJldHVybiBvbkVycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChpc1Byb21pc2UocmVzKSkge1xuXHQgICAgICAgICAgcmVzLnRoZW4obmV4dCwgb25Qcm9taXNlRXJyb3IpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBuZXh0KCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgLy8gZXhwb3NlIGEgY2xvbmUgb2YgdGhlIHRyYW5zaXRpb24gb2JqZWN0LCBzbyB0aGF0IGVhY2hcblx0ICAgICAgLy8gaG9vayBnZXRzIGEgY2xlYW4gY29weSBhbmQgcHJldmVudCB0aGUgdXNlciBmcm9tXG5cdCAgICAgIC8vIG1lc3Npbmcgd2l0aCB0aGUgaW50ZXJuYWxzLlxuXHQgICAgICB2YXIgZXhwb3NlZCA9IHtcblx0ICAgICAgICB0bzogdHJhbnNpdGlvbi50byxcblx0ICAgICAgICBmcm9tOiB0cmFuc2l0aW9uLmZyb20sXG5cdCAgICAgICAgYWJvcnQ6IGFib3J0LFxuXHQgICAgICAgIG5leHQ6IHByb2Nlc3NEYXRhID8gbmV4dFdpdGhEYXRhIDogbmV4dCxcblx0ICAgICAgICByZWRpcmVjdDogZnVuY3Rpb24gcmVkaXJlY3QoKSB7XG5cdCAgICAgICAgICB0cmFuc2l0aW9uLnJlZGlyZWN0LmFwcGx5KHRyYW5zaXRpb24sIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgLy8gYWN0dWFsbHkgY2FsbCB0aGUgaG9va1xuXHQgICAgICB2YXIgcmVzID0gdW5kZWZpbmVkO1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHJlcyA9IGhvb2suY2FsbChjb250ZXh0LCBleHBvc2VkKTtcblx0ICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgcmV0dXJuIG9uRXJyb3IoZXJyKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGV4cGVjdEJvb2xlYW4pIHtcblx0ICAgICAgICAvLyBib29sZWFuIGhvb2tzXG5cdCAgICAgICAgbmV4dFdpdGhCb29sZWFuKHJlcyk7XG5cdCAgICAgIH0gZWxzZSBpZiAoaXNQcm9taXNlKHJlcykpIHtcblx0ICAgICAgICAvLyBwcm9taXNlXG5cdCAgICAgICAgaWYgKHByb2Nlc3NEYXRhKSB7XG5cdCAgICAgICAgICByZXMudGhlbihuZXh0V2l0aERhdGEsIG9uUHJvbWlzZUVycm9yKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmVzLnRoZW4obmV4dCwgb25Qcm9taXNlRXJyb3IpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmIChwcm9jZXNzRGF0YSAmJiBpc1BsYWluT2piZWN0KHJlcykpIHtcblx0ICAgICAgICAvLyBkYXRhIHByb21pc2Ugc3VnYXJcblx0ICAgICAgICBuZXh0V2l0aERhdGEocmVzKTtcblx0ICAgICAgfSBlbHNlIGlmICghaG9vay5sZW5ndGgpIHtcblx0ICAgICAgICBuZXh0KCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBDYWxsIGEgc2luZ2xlIGhvb2sgb3IgYW4gYXJyYXkgb2YgYXN5bmMgaG9va3MgaW4gc2VyaWVzLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7QXJyYXl9IGhvb2tzXG5cdCAgICAgKiBAcGFyYW0geyp9IGNvbnRleHRcblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZVRyYW5zaXRpb24ucHJvdG90eXBlLmNhbGxIb29rcyA9IGZ1bmN0aW9uIGNhbGxIb29rcyhob29rcywgY29udGV4dCwgY2IsIG9wdGlvbnMpIHtcblx0ICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgIGlmIChBcnJheS5pc0FycmF5KGhvb2tzKSkge1xuXHQgICAgICAgIHRoaXMucnVuUXVldWUoaG9va3MsIGZ1bmN0aW9uIChob29rLCBfLCBuZXh0KSB7XG5cdCAgICAgICAgICBpZiAoIV90aGlzLmFib3J0ZWQpIHtcblx0ICAgICAgICAgICAgX3RoaXMuY2FsbEhvb2soaG9vaywgY29udGV4dCwgbmV4dCwgb3B0aW9ucyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwgY2IpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuY2FsbEhvb2soaG9va3MsIGNvbnRleHQsIGNiLCBvcHRpb25zKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gUm91dGVUcmFuc2l0aW9uO1xuXHQgIH0pKCk7XG5cdFxuXHQgIGZ1bmN0aW9uIGlzUGxhaW5PamJlY3QodmFsKSB7XG5cdCAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdG9BcnJheSh2YWwpIHtcblx0ICAgIHJldHVybiB2YWwgPyBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh2YWwpIDogW107XG5cdCAgfVxuXHRcblx0ICB2YXIgaW50ZXJuYWxLZXlzUkUgPSAvXihjb21wb25lbnR8c3ViUm91dGVzfGZ1bGxQYXRoKSQvO1xuXHRcblx0ICAvKipcblx0ICAgKiBSb3V0ZSBDb250ZXh0IE9iamVjdFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgKiBAcGFyYW0ge1JvdXRlcn0gcm91dGVyXG5cdCAgICovXG5cdFxuXHQgIHZhciBSb3V0ZSA9IGZ1bmN0aW9uIFJvdXRlKHBhdGgsIHJvdXRlcikge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgUm91dGUpO1xuXHRcblx0ICAgIHZhciBtYXRjaGVkID0gcm91dGVyLl9yZWNvZ25pemVyLnJlY29nbml6ZShwYXRoKTtcblx0ICAgIGlmIChtYXRjaGVkKSB7XG5cdCAgICAgIC8vIGNvcHkgYWxsIGN1c3RvbSBmaWVsZHMgZnJvbSByb3V0ZSBjb25maWdzXG5cdCAgICAgIFtdLmZvckVhY2guY2FsbChtYXRjaGVkLCBmdW5jdGlvbiAobWF0Y2gpIHtcblx0ICAgICAgICBmb3IgKHZhciBrZXkgaW4gbWF0Y2guaGFuZGxlcikge1xuXHQgICAgICAgICAgaWYgKCFpbnRlcm5hbEtleXNSRS50ZXN0KGtleSkpIHtcblx0ICAgICAgICAgICAgX3RoaXNba2V5XSA9IG1hdGNoLmhhbmRsZXJba2V5XTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICAvLyBzZXQgcXVlcnkgYW5kIHBhcmFtc1xuXHQgICAgICB0aGlzLnF1ZXJ5ID0gbWF0Y2hlZC5xdWVyeVBhcmFtcztcblx0ICAgICAgdGhpcy5wYXJhbXMgPSBbXS5yZWR1Y2UuY2FsbChtYXRjaGVkLCBmdW5jdGlvbiAocHJldiwgY3VyKSB7XG5cdCAgICAgICAgaWYgKGN1ci5wYXJhbXMpIHtcblx0ICAgICAgICAgIGZvciAodmFyIGtleSBpbiBjdXIucGFyYW1zKSB7XG5cdCAgICAgICAgICAgIHByZXZba2V5XSA9IGN1ci5wYXJhbXNba2V5XTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHByZXY7XG5cdCAgICAgIH0sIHt9KTtcblx0ICAgIH1cblx0ICAgIC8vIGV4cG9zZSBwYXRoIGFuZCByb3V0ZXJcblx0ICAgIHRoaXMucGF0aCA9IHBhdGg7XG5cdCAgICAvLyBmb3IgaW50ZXJuYWwgdXNlXG5cdCAgICB0aGlzLm1hdGNoZWQgPSBtYXRjaGVkIHx8IHJvdXRlci5fbm90Rm91bmRIYW5kbGVyO1xuXHQgICAgLy8gaW50ZXJuYWwgcmVmZXJlbmNlIHRvIHJvdXRlclxuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdyb3V0ZXInLCB7XG5cdCAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuXHQgICAgICB2YWx1ZTogcm91dGVyXG5cdCAgICB9KTtcblx0ICAgIC8vIEltcG9ydGFudDogZnJlZXplIHNlbGYgdG8gcHJldmVudCBvYnNlcnZhdGlvblxuXHQgICAgT2JqZWN0LmZyZWV6ZSh0aGlzKTtcblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBhcHBseU92ZXJyaWRlIChWdWUpIHtcblx0ICAgIHZhciBfVnVlJHV0aWwgPSBWdWUudXRpbDtcblx0ICAgIHZhciBleHRlbmQgPSBfVnVlJHV0aWwuZXh0ZW5kO1xuXHQgICAgdmFyIGlzQXJyYXkgPSBfVnVlJHV0aWwuaXNBcnJheTtcblx0ICAgIHZhciBkZWZpbmVSZWFjdGl2ZSA9IF9WdWUkdXRpbC5kZWZpbmVSZWFjdGl2ZTtcblx0XG5cdCAgICAvLyBvdmVycmlkZSBWdWUncyBpbml0IGFuZCBkZXN0cm95IHByb2Nlc3MgdG8ga2VlcCB0cmFjayBvZiByb3V0ZXIgaW5zdGFuY2VzXG5cdCAgICB2YXIgaW5pdCA9IFZ1ZS5wcm90b3R5cGUuX2luaXQ7XG5cdCAgICBWdWUucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcblx0ICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdCAgICAgIHZhciByb290ID0gb3B0aW9ucy5fcGFyZW50IHx8IG9wdGlvbnMucGFyZW50IHx8IHRoaXM7XG5cdCAgICAgIHZhciByb3V0ZXIgPSByb290LiRyb3V0ZXI7XG5cdCAgICAgIHZhciByb3V0ZSA9IHJvb3QuJHJvdXRlO1xuXHQgICAgICBpZiAocm91dGVyKSB7XG5cdCAgICAgICAgLy8gZXhwb3NlIHJvdXRlclxuXHQgICAgICAgIHRoaXMuJHJvdXRlciA9IHJvdXRlcjtcblx0ICAgICAgICByb3V0ZXIuX2NoaWxkcmVuLnB1c2godGhpcyk7XG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKHRoaXMuX2RlZmluZU1ldGEpIHtcblx0ICAgICAgICAgIC8vIDAuMTJcblx0ICAgICAgICAgIHRoaXMuX2RlZmluZU1ldGEoJyRyb3V0ZScsIHJvdXRlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8gMS4wXG5cdCAgICAgICAgICBkZWZpbmVSZWFjdGl2ZSh0aGlzLCAnJHJvdXRlJywgcm91dGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBpbml0LmNhbGwodGhpcywgb3B0aW9ucyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHZhciBkZXN0cm95ID0gVnVlLnByb3RvdHlwZS5fZGVzdHJveTtcblx0ICAgIFZ1ZS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmICghdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCAmJiB0aGlzLiRyb3V0ZXIpIHtcblx0ICAgICAgICB0aGlzLiRyb3V0ZXIuX2NoaWxkcmVuLiRyZW1vdmUodGhpcyk7XG5cdCAgICAgIH1cblx0ICAgICAgZGVzdHJveS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyAxLjAgb25seTogZW5hYmxlIHJvdXRlIG1peGluc1xuXHQgICAgdmFyIHN0cmF0cyA9IFZ1ZS5jb25maWcub3B0aW9uTWVyZ2VTdHJhdGVnaWVzO1xuXHQgICAgdmFyIGhvb2tzVG9NZXJnZVJFID0gL14oZGF0YXxhY3RpdmF0ZXxkZWFjdGl2YXRlKSQvO1xuXHRcblx0ICAgIGlmIChzdHJhdHMpIHtcblx0ICAgICAgc3RyYXRzLnJvdXRlID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcblx0ICAgICAgICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsO1xuXHQgICAgICAgIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG5cdCAgICAgICAgdmFyIHJldCA9IHt9O1xuXHQgICAgICAgIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG5cdCAgICAgICAgZm9yICh2YXIga2V5IGluIGNoaWxkVmFsKSB7XG5cdCAgICAgICAgICB2YXIgYSA9IHJldFtrZXldO1xuXHQgICAgICAgICAgdmFyIGIgPSBjaGlsZFZhbFtrZXldO1xuXHQgICAgICAgICAgLy8gZm9yIGRhdGEsIGFjdGl2YXRlIGFuZCBkZWFjdGl2YXRlLCB3ZSBuZWVkIHRvIG1lcmdlIHRoZW0gaW50b1xuXHQgICAgICAgICAgLy8gYXJyYXlzIHNpbWlsYXIgdG8gbGlmZWN5Y2xlIGhvb2tzLlxuXHQgICAgICAgICAgaWYgKGEgJiYgaG9va3NUb01lcmdlUkUudGVzdChrZXkpKSB7XG5cdCAgICAgICAgICAgIHJldFtrZXldID0gKGlzQXJyYXkoYSkgPyBhIDogW2FdKS5jb25jYXQoYik7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICByZXRba2V5XSA9IGI7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiByZXQ7XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBWaWV3IChWdWUpIHtcblx0XG5cdCAgICB2YXIgXyA9IFZ1ZS51dGlsO1xuXHQgICAgdmFyIGNvbXBvbmVudERlZiA9XG5cdCAgICAvLyAwLjEyXG5cdCAgICBWdWUuZGlyZWN0aXZlKCdfY29tcG9uZW50JykgfHxcblx0ICAgIC8vIDEuMFxuXHQgICAgVnVlLmludGVybmFsRGlyZWN0aXZlcy5jb21wb25lbnQ7XG5cdCAgICAvLyA8cm91dGVyLXZpZXc+IGV4dGVuZHMgdGhlIGludGVybmFsIGNvbXBvbmVudCBkaXJlY3RpdmVcblx0ICAgIHZhciB2aWV3RGVmID0gXy5leHRlbmQoe30sIGNvbXBvbmVudERlZik7XG5cdFxuXHQgICAgLy8gd2l0aCBzb21lIG92ZXJyaWRlc1xuXHQgICAgXy5leHRlbmQodmlld0RlZiwge1xuXHRcblx0ICAgICAgX2lzUm91dGVyVmlldzogdHJ1ZSxcblx0XG5cdCAgICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAgICAgdmFyIHJvdXRlID0gdGhpcy52bS4kcm91dGU7XG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKCFyb3V0ZSkge1xuXHQgICAgICAgICAgd2FybiQxKCc8cm91dGVyLXZpZXc+IGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIGEgJyArICdyb3V0ZXItZW5hYmxlZCBhcHAuJyk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIGZvcmNlIGR5bmFtaWMgZGlyZWN0aXZlIHNvIHYtY29tcG9uZW50IGRvZXNuJ3Rcblx0ICAgICAgICAvLyBhdHRlbXB0IHRvIGJ1aWxkIHJpZ2h0IG5vd1xuXHQgICAgICAgIHRoaXMuX2lzRHluYW1pY0xpdGVyYWwgPSB0cnVlO1xuXHQgICAgICAgIC8vIGZpbmFsbHksIGluaXQgYnkgZGVsZWdhdGluZyB0byB2LWNvbXBvbmVudFxuXHQgICAgICAgIGNvbXBvbmVudERlZi5iaW5kLmNhbGwodGhpcyk7XG5cdFxuXHQgICAgICAgIC8vIGxvY2F0ZSB0aGUgcGFyZW50IHZpZXdcblx0ICAgICAgICB2YXIgcGFyZW50VmlldyA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy52bTtcblx0ICAgICAgICB3aGlsZSAocGFyZW50KSB7XG5cdCAgICAgICAgICBpZiAocGFyZW50Ll9yb3V0ZXJWaWV3KSB7XG5cdCAgICAgICAgICAgIHBhcmVudFZpZXcgPSBwYXJlbnQuX3JvdXRlclZpZXc7XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChwYXJlbnRWaWV3KSB7XG5cdCAgICAgICAgICAvLyByZWdpc3RlciBzZWxmIGFzIGEgY2hpbGQgb2YgdGhlIHBhcmVudCB2aWV3LFxuXHQgICAgICAgICAgLy8gaW5zdGVhZCBvZiBhY3RpdmF0aW5nIG5vdy4gVGhpcyBpcyBzbyB0aGF0IHRoZVxuXHQgICAgICAgICAgLy8gY2hpbGQncyBhY3RpdmF0ZSBob29rIGlzIGNhbGxlZCBhZnRlciB0aGVcblx0ICAgICAgICAgIC8vIHBhcmVudCdzIGhhcyByZXNvbHZlZC5cblx0ICAgICAgICAgIHRoaXMucGFyZW50VmlldyA9IHBhcmVudFZpZXc7XG5cdCAgICAgICAgICBwYXJlbnRWaWV3LmNoaWxkVmlldyA9IHRoaXM7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIHRoaXMgaXMgdGhlIHJvb3QgdmlldyFcblx0ICAgICAgICAgIHZhciByb3V0ZXIgPSByb3V0ZS5yb3V0ZXI7XG5cdCAgICAgICAgICByb3V0ZXIuX3Jvb3RWaWV3ID0gdGhpcztcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIGhhbmRsZSBsYXRlLXJlbmRlcmVkIHZpZXdcblx0ICAgICAgICAvLyB0d28gcG9zc2liaWxpdGllczpcblx0ICAgICAgICAvLyAxLiByb290IHZpZXcgcmVuZGVyZWQgYWZ0ZXIgdHJhbnNpdGlvbiBoYXMgYmVlblxuXHQgICAgICAgIC8vICAgIHZhbGlkYXRlZDtcblx0ICAgICAgICAvLyAyLiBjaGlsZCB2aWV3IHJlbmRlcmVkIGFmdGVyIHBhcmVudCB2aWV3IGhhcyBiZWVuXG5cdCAgICAgICAgLy8gICAgYWN0aXZhdGVkLlxuXHQgICAgICAgIHZhciB0cmFuc2l0aW9uID0gcm91dGUucm91dGVyLl9jdXJyZW50VHJhbnNpdGlvbjtcblx0ICAgICAgICBpZiAoIXBhcmVudFZpZXcgJiYgdHJhbnNpdGlvbi5kb25lIHx8IHBhcmVudFZpZXcgJiYgcGFyZW50Vmlldy5hY3RpdmF0ZWQpIHtcblx0ICAgICAgICAgIHZhciBkZXB0aCA9IHBhcmVudFZpZXcgPyBwYXJlbnRWaWV3LmRlcHRoICsgMSA6IDA7XG5cdCAgICAgICAgICBhY3RpdmF0ZSh0aGlzLCB0cmFuc2l0aW9uLCBkZXB0aCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHRcblx0ICAgICAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICAgICAgaWYgKHRoaXMucGFyZW50Vmlldykge1xuXHQgICAgICAgICAgdGhpcy5wYXJlbnRWaWV3LmNoaWxkVmlldyA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNvbXBvbmVudERlZi51bmJpbmQuY2FsbCh0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgVnVlLmVsZW1lbnREaXJlY3RpdmUoJ3JvdXRlci12aWV3Jywgdmlld0RlZik7XG5cdCAgfVxuXHRcblx0ICB2YXIgdHJhaWxpbmdTbGFzaFJFID0gL1xcLyQvO1xuXHQgIHZhciByZWdleEVzY2FwZVJFID0gL1stLiorP14ke30oKXxbXFxdXFwvXFxcXF0vZztcblx0ICB2YXIgcXVlcnlTdHJpbmdSRSA9IC9cXD8uKiQvO1xuXHRcblx0ICAvLyBpbnN0YWxsIHYtbGluaywgd2hpY2ggcHJvdmlkZXMgbmF2aWdhdGlvbiBzdXBwb3J0IGZvclxuXHQgIC8vIEhUTUw1IGhpc3RvcnkgbW9kZVxuXHQgIGZ1bmN0aW9uIExpbmsgKFZ1ZSkge1xuXHQgICAgdmFyIF9WdWUkdXRpbCA9IFZ1ZS51dGlsO1xuXHQgICAgdmFyIF9iaW5kID0gX1Z1ZSR1dGlsLmJpbmQ7XG5cdCAgICB2YXIgaXNPYmplY3QgPSBfVnVlJHV0aWwuaXNPYmplY3Q7XG5cdCAgICB2YXIgYWRkQ2xhc3MgPSBfVnVlJHV0aWwuYWRkQ2xhc3M7XG5cdCAgICB2YXIgcmVtb3ZlQ2xhc3MgPSBfVnVlJHV0aWwucmVtb3ZlQ2xhc3M7XG5cdFxuXHQgICAgdmFyIG9uUHJpb3JpdHkgPSBWdWUuZGlyZWN0aXZlKCdvbicpLnByaW9yaXR5O1xuXHQgICAgdmFyIExJTktfVVBEQVRFID0gJ19fdnVlLXJvdXRlci1saW5rLXVwZGF0ZV9fJztcblx0XG5cdCAgICB2YXIgYWN0aXZlSWQgPSAwO1xuXHRcblx0ICAgIFZ1ZS5kaXJlY3RpdmUoJ2xpbmstYWN0aXZlJywge1xuXHQgICAgICBwcmlvcml0eTogOTk5OSxcblx0ICAgICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgICB2YXIgaWQgPSBTdHJpbmcoYWN0aXZlSWQrKyk7XG5cdCAgICAgICAgLy8gY29sbGVjdCB2LWxpbmtzIGNvbnRhaW5lZCB3aXRoaW4gdGhpcyBlbGVtZW50LlxuXHQgICAgICAgIC8vIHdlIG5lZWQgZG8gdGhpcyBoZXJlIGJlZm9yZSB0aGUgcGFyZW50LWNoaWxkIHJlbGF0aW9uc2hpcFxuXHQgICAgICAgIC8vIGdldHMgbWVzc2VkIHVwIGJ5IHRlcm1pbmFsIGRpcmVjdGl2ZXMgKGlmLCBmb3IsIGNvbXBvbmVudHMpXG5cdCAgICAgICAgdmFyIGNoaWxkTGlua3MgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1t2LWxpbmtdJyk7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZExpbmtzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgICAgdmFyIGxpbmsgPSBjaGlsZExpbmtzW2ldO1xuXHQgICAgICAgICAgdmFyIGV4aXN0aW5nSWQgPSBsaW5rLmdldEF0dHJpYnV0ZShMSU5LX1VQREFURSk7XG5cdCAgICAgICAgICB2YXIgdmFsdWUgPSBleGlzdGluZ0lkID8gZXhpc3RpbmdJZCArICcsJyArIGlkIDogaWQ7XG5cdCAgICAgICAgICAvLyBsZWF2ZSBhIG1hcmsgb24gdGhlIGxpbmsgZWxlbWVudCB3aGljaCBjYW4gYmUgcGVyc2lzdGVkXG5cdCAgICAgICAgICAvLyB0aHJvdWdoIGZyYWdtZW50IGNsb25lcy5cblx0ICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKExJTktfVVBEQVRFLCB2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMudm0uJG9uKExJTktfVVBEQVRFLCB0aGlzLmNiID0gZnVuY3Rpb24gKGxpbmssIHBhdGgpIHtcblx0ICAgICAgICAgIGlmIChsaW5rLmFjdGl2ZUlkcy5pbmRleE9mKGlkKSA+IC0xKSB7XG5cdCAgICAgICAgICAgIGxpbmsudXBkYXRlQ2xhc3NlcyhwYXRoLCBfdGhpcy5lbCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0sXG5cdCAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgICAgIHRoaXMudm0uJG9mZihMSU5LX1VQREFURSwgdGhpcy5jYik7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHRcblx0ICAgIFZ1ZS5kaXJlY3RpdmUoJ2xpbmsnLCB7XG5cdCAgICAgIHByaW9yaXR5OiBvblByaW9yaXR5IC0gMixcblx0XG5cdCAgICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAgICAgdmFyIHZtID0gdGhpcy52bTtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAoIXZtLiRyb3V0ZSkge1xuXHQgICAgICAgICAgd2FybiQxKCd2LWxpbmsgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgYSByb3V0ZXItZW5hYmxlZCBhcHAuJyk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMucm91dGVyID0gdm0uJHJvdXRlLnJvdXRlcjtcblx0ICAgICAgICAvLyB1cGRhdGUgdGhpbmdzIHdoZW4gdGhlIHJvdXRlIGNoYW5nZXNcblx0ICAgICAgICB0aGlzLnVud2F0Y2ggPSB2bS4kd2F0Y2goJyRyb3V0ZScsIF9iaW5kKHRoaXMub25Sb3V0ZVVwZGF0ZSwgdGhpcykpO1xuXHQgICAgICAgIC8vIGNoZWNrIHYtbGluay1hY3RpdmUgaWRzXG5cdCAgICAgICAgdmFyIGFjdGl2ZUlkcyA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKExJTktfVVBEQVRFKTtcblx0ICAgICAgICBpZiAoYWN0aXZlSWRzKSB7XG5cdCAgICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShMSU5LX1VQREFURSk7XG5cdCAgICAgICAgICB0aGlzLmFjdGl2ZUlkcyA9IGFjdGl2ZUlkcy5zcGxpdCgnLCcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBubyBuZWVkIHRvIGhhbmRsZSBjbGljayBpZiBsaW5rIGV4cGVjdHMgdG8gYmUgb3BlbmVkXG5cdCAgICAgICAgLy8gaW4gYSBuZXcgd2luZG93L3RhYi5cblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAodGhpcy5lbC50YWdOYW1lID09PSAnQScgJiYgdGhpcy5lbC5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpID09PSAnX2JsYW5rJykge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBoYW5kbGUgY2xpY2tcblx0ICAgICAgICB0aGlzLmhhbmRsZXIgPSBfYmluZCh0aGlzLm9uQ2xpY2ssIHRoaXMpO1xuXHQgICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZXIpO1xuXHQgICAgICB9LFxuXHRcblx0ICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodGFyZ2V0KSB7XG5cdCAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG5cdCAgICAgICAgaWYgKGlzT2JqZWN0KHRhcmdldCkpIHtcblx0ICAgICAgICAgIHRoaXMuYXBwZW5kID0gdGFyZ2V0LmFwcGVuZDtcblx0ICAgICAgICAgIHRoaXMuZXhhY3QgPSB0YXJnZXQuZXhhY3Q7XG5cdCAgICAgICAgICB0aGlzLnByZXZBY3RpdmVDbGFzcyA9IHRoaXMuYWN0aXZlQ2xhc3M7XG5cdCAgICAgICAgICB0aGlzLmFjdGl2ZUNsYXNzID0gdGFyZ2V0LmFjdGl2ZUNsYXNzO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLm9uUm91dGVVcGRhdGUodGhpcy52bS4kcm91dGUpO1xuXHQgICAgICB9LFxuXHRcblx0ICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG5cdCAgICAgICAgLy8gZG9uJ3QgcmVkaXJlY3Qgd2l0aCBjb250cm9sIGtleXNcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAoZS5tZXRhS2V5IHx8IGUuY3RybEtleSB8fCBlLnNoaWZ0S2V5KSByZXR1cm47XG5cdCAgICAgICAgLy8gZG9uJ3QgcmVkaXJlY3Qgd2hlbiBwcmV2ZW50RGVmYXVsdCBjYWxsZWRcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XG5cdCAgICAgICAgLy8gZG9uJ3QgcmVkaXJlY3Qgb24gcmlnaHQgY2xpY2tcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAoZS5idXR0b24gIT09IDApIHJldHVybjtcblx0XG5cdCAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMudGFyZ2V0O1xuXHQgICAgICAgIGlmICh0YXJnZXQpIHtcblx0ICAgICAgICAgIC8vIHYtbGluayB3aXRoIGV4cHJlc3Npb24sIGp1c3QgZ29cblx0ICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICAgIHRoaXMucm91dGVyLmdvKHRhcmdldCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIG5vIGV4cHJlc3Npb24sIGRlbGVnYXRlIGZvciBhbiA8YT4gaW5zaWRlXG5cdCAgICAgICAgICB2YXIgZWwgPSBlLnRhcmdldDtcblx0ICAgICAgICAgIHdoaWxlIChlbC50YWdOYW1lICE9PSAnQScgJiYgZWwgIT09IHRoaXMuZWwpIHtcblx0ICAgICAgICAgICAgZWwgPSBlbC5wYXJlbnROb2RlO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgaWYgKGVsLnRhZ05hbWUgPT09ICdBJyAmJiBzYW1lT3JpZ2luKGVsKSkge1xuXHQgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICAgICAgICAgIHZhciBwYXRoID0gZWwucGF0aG5hbWU7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnJvdXRlci5oaXN0b3J5LnJvb3QpIHtcblx0ICAgICAgICAgICAgICBwYXRoID0gcGF0aC5yZXBsYWNlKHRoaXMucm91dGVyLmhpc3Rvcnkucm9vdFJFLCAnJyk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGhpcy5yb3V0ZXIuZ28oe1xuXHQgICAgICAgICAgICAgIHBhdGg6IHBhdGgsXG5cdCAgICAgICAgICAgICAgcmVwbGFjZTogdGFyZ2V0ICYmIHRhcmdldC5yZXBsYWNlLFxuXHQgICAgICAgICAgICAgIGFwcGVuZDogdGFyZ2V0ICYmIHRhcmdldC5hcHBlbmRcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHRcblx0ICAgICAgb25Sb3V0ZVVwZGF0ZTogZnVuY3Rpb24gb25Sb3V0ZVVwZGF0ZShyb3V0ZSkge1xuXHQgICAgICAgIC8vIHJvdXRlci5zdHJpbmdpZnlQYXRoIGlzIGRlcGVuZGVudCBvbiBjdXJyZW50IHJvdXRlXG5cdCAgICAgICAgLy8gYW5kIG5lZWRzIHRvIGJlIGNhbGxlZCBhZ2FpbiB3aGVudmVyIHJvdXRlIGNoYW5nZXMuXG5cdCAgICAgICAgdmFyIG5ld1BhdGggPSB0aGlzLnJvdXRlci5zdHJpbmdpZnlQYXRoKHRoaXMudGFyZ2V0KTtcblx0ICAgICAgICBpZiAodGhpcy5wYXRoICE9PSBuZXdQYXRoKSB7XG5cdCAgICAgICAgICB0aGlzLnBhdGggPSBuZXdQYXRoO1xuXHQgICAgICAgICAgdGhpcy51cGRhdGVBY3RpdmVNYXRjaCgpO1xuXHQgICAgICAgICAgdGhpcy51cGRhdGVIcmVmKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh0aGlzLmFjdGl2ZUlkcykge1xuXHQgICAgICAgICAgdGhpcy52bS4kZW1pdChMSU5LX1VQREFURSwgdGhpcywgcm91dGUucGF0aCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRoaXMudXBkYXRlQ2xhc3Nlcyhyb3V0ZS5wYXRoLCB0aGlzLmVsKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICB1cGRhdGVBY3RpdmVNYXRjaDogZnVuY3Rpb24gdXBkYXRlQWN0aXZlTWF0Y2goKSB7XG5cdCAgICAgICAgdGhpcy5hY3RpdmVSRSA9IHRoaXMucGF0aCAmJiAhdGhpcy5leGFjdCA/IG5ldyBSZWdFeHAoJ14nICsgdGhpcy5wYXRoLnJlcGxhY2UoL1xcLyQvLCAnJykucmVwbGFjZShxdWVyeVN0cmluZ1JFLCAnJykucmVwbGFjZShyZWdleEVzY2FwZVJFLCAnXFxcXCQmJykgKyAnKFxcXFwvfCQpJykgOiBudWxsO1xuXHQgICAgICB9LFxuXHRcblx0ICAgICAgdXBkYXRlSHJlZjogZnVuY3Rpb24gdXBkYXRlSHJlZigpIHtcblx0ICAgICAgICBpZiAodGhpcy5lbC50YWdOYW1lICE9PSAnQScpIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHBhdGggPSB0aGlzLnBhdGg7XG5cdCAgICAgICAgdmFyIHJvdXRlciA9IHRoaXMucm91dGVyO1xuXHQgICAgICAgIHZhciBpc0Fic29sdXRlID0gcGF0aC5jaGFyQXQoMCkgPT09ICcvJztcblx0ICAgICAgICAvLyBkbyBub3QgZm9ybWF0IG5vbi1oYXNoIHJlbGF0aXZlIHBhdGhzXG5cdCAgICAgICAgdmFyIGhyZWYgPSBwYXRoICYmIChyb3V0ZXIubW9kZSA9PT0gJ2hhc2gnIHx8IGlzQWJzb2x1dGUpID8gcm91dGVyLmhpc3RvcnkuZm9ybWF0UGF0aChwYXRoLCB0aGlzLmFwcGVuZCkgOiBwYXRoO1xuXHQgICAgICAgIGlmIChocmVmKSB7XG5cdCAgICAgICAgICB0aGlzLmVsLmhyZWYgPSBocmVmO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnaHJlZicpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0XG5cdCAgICAgIHVwZGF0ZUNsYXNzZXM6IGZ1bmN0aW9uIHVwZGF0ZUNsYXNzZXMocGF0aCwgZWwpIHtcblx0ICAgICAgICB2YXIgYWN0aXZlQ2xhc3MgPSB0aGlzLmFjdGl2ZUNsYXNzIHx8IHRoaXMucm91dGVyLl9saW5rQWN0aXZlQ2xhc3M7XG5cdCAgICAgICAgLy8gY2xlYXIgb2xkIGNsYXNzXG5cdCAgICAgICAgaWYgKHRoaXMucHJldkFjdGl2ZUNsYXNzICYmIHRoaXMucHJldkFjdGl2ZUNsYXNzICE9PSBhY3RpdmVDbGFzcykge1xuXHQgICAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgdGhpcy5wcmV2QWN0aXZlQ2xhc3MsIHJlbW92ZUNsYXNzKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gcmVtb3ZlIHF1ZXJ5IHN0cmluZyBiZWZvcmUgbWF0Y2hpbmdcblx0ICAgICAgICB2YXIgZGVzdCA9IHRoaXMucGF0aC5yZXBsYWNlKHF1ZXJ5U3RyaW5nUkUsICcnKTtcblx0ICAgICAgICBwYXRoID0gcGF0aC5yZXBsYWNlKHF1ZXJ5U3RyaW5nUkUsICcnKTtcblx0ICAgICAgICAvLyBhZGQgbmV3IGNsYXNzXG5cdCAgICAgICAgaWYgKHRoaXMuZXhhY3QpIHtcblx0ICAgICAgICAgIGlmIChkZXN0ID09PSBwYXRoIHx8XG5cdCAgICAgICAgICAvLyBhbHNvIGFsbG93IGFkZGl0aW9uYWwgdHJhaWxpbmcgc2xhc2hcblx0ICAgICAgICAgIGRlc3QuY2hhckF0KGRlc3QubGVuZ3RoIC0gMSkgIT09ICcvJyAmJiBkZXN0ID09PSBwYXRoLnJlcGxhY2UodHJhaWxpbmdTbGFzaFJFLCAnJykpIHtcblx0ICAgICAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgYWN0aXZlQ2xhc3MsIGFkZENsYXNzKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGFjdGl2ZUNsYXNzLCByZW1vdmVDbGFzcyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVJFICYmIHRoaXMuYWN0aXZlUkUudGVzdChwYXRoKSkge1xuXHQgICAgICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBhY3RpdmVDbGFzcywgYWRkQ2xhc3MpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgYWN0aXZlQ2xhc3MsIHJlbW92ZUNsYXNzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVyKTtcblx0ICAgICAgICB0aGlzLnVud2F0Y2ggJiYgdGhpcy51bndhdGNoKCk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHRcblx0ICAgIGZ1bmN0aW9uIHNhbWVPcmlnaW4obGluaykge1xuXHQgICAgICByZXR1cm4gbGluay5wcm90b2NvbCA9PT0gbG9jYXRpb24ucHJvdG9jb2wgJiYgbGluay5ob3N0bmFtZSA9PT0gbG9jYXRpb24uaG9zdG5hbWUgJiYgbGluay5wb3J0ID09PSBsb2NhdGlvbi5wb3J0O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHRoaXMgZnVuY3Rpb24gaXMgY29waWVkIGZyb20gdi1iaW5kOmNsYXNzIGltcGxlbWVudGF0aW9uIHVudGlsXG5cdCAgICAvLyB3ZSBwcm9wZXJseSBleHBvc2UgaXQuLi5cblx0ICAgIGZ1bmN0aW9uIHRvZ2dsZUNsYXNzZXMoZWwsIGtleSwgZm4pIHtcblx0ICAgICAga2V5ID0ga2V5LnRyaW0oKTtcblx0ICAgICAgaWYgKGtleS5pbmRleE9mKCcgJykgPT09IC0xKSB7XG5cdCAgICAgICAgZm4oZWwsIGtleSk7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBrZXlzID0ga2V5LnNwbGl0KC9cXHMrLyk7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBmbihlbCwga2V5c1tpXSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHZhciBoaXN0b3J5QmFja2VuZHMgPSB7XG5cdCAgICBhYnN0cmFjdDogQWJzdHJhY3RIaXN0b3J5LFxuXHQgICAgaGFzaDogSGFzaEhpc3RvcnksXG5cdCAgICBodG1sNTogSFRNTDVIaXN0b3J5XG5cdCAgfTtcblx0XG5cdCAgLy8gbGF0ZSBiaW5kIGR1cmluZyBpbnN0YWxsXG5cdCAgdmFyIFZ1ZSA9IHVuZGVmaW5lZDtcblx0XG5cdCAgLyoqXG5cdCAgICogUm91dGVyIGNvbnN0cnVjdG9yXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG5cdCAgICovXG5cdFxuXHQgIHZhciBSb3V0ZXIgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gUm91dGVyKCkge1xuXHQgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcblx0XG5cdCAgICAgIHZhciBfcmVmJGhhc2hiYW5nID0gX3JlZi5oYXNoYmFuZztcblx0ICAgICAgdmFyIGhhc2hiYW5nID0gX3JlZiRoYXNoYmFuZyA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IF9yZWYkaGFzaGJhbmc7XG5cdCAgICAgIHZhciBfcmVmJGFic3RyYWN0ID0gX3JlZi5hYnN0cmFjdDtcblx0ICAgICAgdmFyIGFic3RyYWN0ID0gX3JlZiRhYnN0cmFjdCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJGFic3RyYWN0O1xuXHQgICAgICB2YXIgX3JlZiRoaXN0b3J5ID0gX3JlZi5oaXN0b3J5O1xuXHQgICAgICB2YXIgaGlzdG9yeSA9IF9yZWYkaGlzdG9yeSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJGhpc3Rvcnk7XG5cdCAgICAgIHZhciBfcmVmJHNhdmVTY3JvbGxQb3NpdGlvbiA9IF9yZWYuc2F2ZVNjcm9sbFBvc2l0aW9uO1xuXHQgICAgICB2YXIgc2F2ZVNjcm9sbFBvc2l0aW9uID0gX3JlZiRzYXZlU2Nyb2xsUG9zaXRpb24gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRzYXZlU2Nyb2xsUG9zaXRpb247XG5cdCAgICAgIHZhciBfcmVmJHRyYW5zaXRpb25PbkxvYWQgPSBfcmVmLnRyYW5zaXRpb25PbkxvYWQ7XG5cdCAgICAgIHZhciB0cmFuc2l0aW9uT25Mb2FkID0gX3JlZiR0cmFuc2l0aW9uT25Mb2FkID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkdHJhbnNpdGlvbk9uTG9hZDtcblx0ICAgICAgdmFyIF9yZWYkc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3IgPSBfcmVmLnN1cHByZXNzVHJhbnNpdGlvbkVycm9yO1xuXHQgICAgICB2YXIgc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3IgPSBfcmVmJHN1cHByZXNzVHJhbnNpdGlvbkVycm9yID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3I7XG5cdCAgICAgIHZhciBfcmVmJHJvb3QgPSBfcmVmLnJvb3Q7XG5cdCAgICAgIHZhciByb290ID0gX3JlZiRyb290ID09PSB1bmRlZmluZWQgPyBudWxsIDogX3JlZiRyb290O1xuXHQgICAgICB2YXIgX3JlZiRsaW5rQWN0aXZlQ2xhc3MgPSBfcmVmLmxpbmtBY3RpdmVDbGFzcztcblx0ICAgICAgdmFyIGxpbmtBY3RpdmVDbGFzcyA9IF9yZWYkbGlua0FjdGl2ZUNsYXNzID09PSB1bmRlZmluZWQgPyAndi1saW5rLWFjdGl2ZScgOiBfcmVmJGxpbmtBY3RpdmVDbGFzcztcblx0ICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIFJvdXRlcik7XG5cdFxuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKCFSb3V0ZXIuaW5zdGFsbGVkKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgaW5zdGFsbCB0aGUgUm91dGVyIHdpdGggVnVlLnVzZSgpIGJlZm9yZSAnICsgJ2NyZWF0aW5nIGFuIGluc3RhbmNlLicpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBWdWUgaW5zdGFuY2VzXG5cdCAgICAgIHRoaXMuYXBwID0gbnVsbDtcblx0ICAgICAgdGhpcy5fY2hpbGRyZW4gPSBbXTtcblx0XG5cdCAgICAgIC8vIHJvdXRlIHJlY29nbml6ZXJcblx0ICAgICAgdGhpcy5fcmVjb2duaXplciA9IG5ldyBSb3V0ZVJlY29nbml6ZXIoKTtcblx0ICAgICAgdGhpcy5fZ3VhcmRSZWNvZ25pemVyID0gbmV3IFJvdXRlUmVjb2duaXplcigpO1xuXHRcblx0ICAgICAgLy8gc3RhdGVcblx0ICAgICAgdGhpcy5fc3RhcnRlZCA9IGZhbHNlO1xuXHQgICAgICB0aGlzLl9zdGFydENiID0gbnVsbDtcblx0ICAgICAgdGhpcy5fY3VycmVudFJvdXRlID0ge307XG5cdCAgICAgIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uID0gbnVsbDtcblx0ICAgICAgdGhpcy5fcHJldmlvdXNUcmFuc2l0aW9uID0gbnVsbDtcblx0ICAgICAgdGhpcy5fbm90Rm91bmRIYW5kbGVyID0gbnVsbDtcblx0ICAgICAgdGhpcy5fbm90Rm91bmRSZWRpcmVjdCA9IG51bGw7XG5cdCAgICAgIHRoaXMuX2JlZm9yZUVhY2hIb29rcyA9IFtdO1xuXHQgICAgICB0aGlzLl9hZnRlckVhY2hIb29rcyA9IFtdO1xuXHRcblx0ICAgICAgLy8gdHJpZ2dlciB0cmFuc2l0aW9uIG9uIGluaXRpYWwgcmVuZGVyP1xuXHQgICAgICB0aGlzLl9yZW5kZXJlZCA9IGZhbHNlO1xuXHQgICAgICB0aGlzLl90cmFuc2l0aW9uT25Mb2FkID0gdHJhbnNpdGlvbk9uTG9hZDtcblx0XG5cdCAgICAgIC8vIGhpc3RvcnkgbW9kZVxuXHQgICAgICB0aGlzLl9yb290ID0gcm9vdDtcblx0ICAgICAgdGhpcy5fYWJzdHJhY3QgPSBhYnN0cmFjdDtcblx0ICAgICAgdGhpcy5faGFzaGJhbmcgPSBoYXNoYmFuZztcblx0XG5cdCAgICAgIC8vIGNoZWNrIGlmIEhUTUw1IGhpc3RvcnkgaXMgYXZhaWxhYmxlXG5cdCAgICAgIHZhciBoYXNQdXNoU3RhdGUgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuaGlzdG9yeSAmJiB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGU7XG5cdCAgICAgIHRoaXMuX2hpc3RvcnkgPSBoaXN0b3J5ICYmIGhhc1B1c2hTdGF0ZTtcblx0ICAgICAgdGhpcy5faGlzdG9yeUZhbGxiYWNrID0gaGlzdG9yeSAmJiAhaGFzUHVzaFN0YXRlO1xuXHRcblx0ICAgICAgLy8gY3JlYXRlIGhpc3Rvcnkgb2JqZWN0XG5cdCAgICAgIHZhciBpbkJyb3dzZXIgPSBWdWUudXRpbC5pbkJyb3dzZXI7XG5cdCAgICAgIHRoaXMubW9kZSA9ICFpbkJyb3dzZXIgfHwgdGhpcy5fYWJzdHJhY3QgPyAnYWJzdHJhY3QnIDogdGhpcy5faGlzdG9yeSA/ICdodG1sNScgOiAnaGFzaCc7XG5cdFxuXHQgICAgICB2YXIgSGlzdG9yeSA9IGhpc3RvcnlCYWNrZW5kc1t0aGlzLm1vZGVdO1xuXHQgICAgICB0aGlzLmhpc3RvcnkgPSBuZXcgSGlzdG9yeSh7XG5cdCAgICAgICAgcm9vdDogcm9vdCxcblx0ICAgICAgICBoYXNoYmFuZzogdGhpcy5faGFzaGJhbmcsXG5cdCAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHBhdGgsIHN0YXRlLCBhbmNob3IpIHtcblx0ICAgICAgICAgIF90aGlzLl9tYXRjaChwYXRoLCBzdGF0ZSwgYW5jaG9yKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgLy8gb3RoZXIgb3B0aW9uc1xuXHQgICAgICB0aGlzLl9zYXZlU2Nyb2xsUG9zaXRpb24gPSBzYXZlU2Nyb2xsUG9zaXRpb247XG5cdCAgICAgIHRoaXMuX2xpbmtBY3RpdmVDbGFzcyA9IGxpbmtBY3RpdmVDbGFzcztcblx0ICAgICAgdGhpcy5fc3VwcHJlc3MgPSBzdXBwcmVzc1RyYW5zaXRpb25FcnJvcjtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEFsbG93IGRpcmVjdGx5IHBhc3NpbmcgY29tcG9uZW50cyB0byBhIHJvdXRlXG5cdCAgICAgKiBkZWZpbml0aW9uLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuXHQgICAgICovXG5cdFxuXHQgICAgLy8gQVBJID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcblx0ICAgIC8qKlxuXHQgICAgKiBSZWdpc3RlciBhIG1hcCBvZiB0b3AtbGV2ZWwgcGF0aHMuXG5cdCAgICAqXG5cdCAgICAqIEBwYXJhbSB7T2JqZWN0fSBtYXBcblx0ICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbiBtYXAoX21hcCkge1xuXHQgICAgICBmb3IgKHZhciByb3V0ZSBpbiBfbWFwKSB7XG5cdCAgICAgICAgdGhpcy5vbihyb3V0ZSwgX21hcFtyb3V0ZV0pO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFJlZ2lzdGVyIGEgc2luZ2xlIHJvb3QtbGV2ZWwgcGF0aFxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSByb290UGF0aFxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcblx0ICAgICAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGNvbXBvbmVudFxuXHQgICAgICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gW3N1YlJvdXRlc11cblx0ICAgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBbZm9yY2VSZWZyZXNoXVxuXHQgICAgICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbYmVmb3JlXVxuXHQgICAgICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbYWZ0ZXJdXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gb24ocm9vdFBhdGgsIGhhbmRsZXIpIHtcblx0ICAgICAgaWYgKHJvb3RQYXRoID09PSAnKicpIHtcblx0ICAgICAgICB0aGlzLl9ub3RGb3VuZChoYW5kbGVyKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLl9hZGRSb3V0ZShyb290UGF0aCwgaGFuZGxlciwgW10pO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFNldCByZWRpcmVjdHMuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IG1hcFxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5yZWRpcmVjdCA9IGZ1bmN0aW9uIHJlZGlyZWN0KG1hcCkge1xuXHQgICAgICBmb3IgKHZhciBwYXRoIGluIG1hcCkge1xuXHQgICAgICAgIHRoaXMuX2FkZFJlZGlyZWN0KHBhdGgsIG1hcFtwYXRoXSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0IGFsaWFzZXMuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IG1hcFxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5hbGlhcyA9IGZ1bmN0aW9uIGFsaWFzKG1hcCkge1xuXHQgICAgICBmb3IgKHZhciBwYXRoIGluIG1hcCkge1xuXHQgICAgICAgIHRoaXMuX2FkZEFsaWFzKHBhdGgsIG1hcFtwYXRoXSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0IGdsb2JhbCBiZWZvcmUgaG9vay5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5iZWZvcmVFYWNoID0gZnVuY3Rpb24gYmVmb3JlRWFjaChmbikge1xuXHQgICAgICB0aGlzLl9iZWZvcmVFYWNoSG9va3MucHVzaChmbik7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFNldCBnbG9iYWwgYWZ0ZXIgaG9vay5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5hZnRlckVhY2ggPSBmdW5jdGlvbiBhZnRlckVhY2goZm4pIHtcblx0ICAgICAgdGhpcy5fYWZ0ZXJFYWNoSG9va3MucHVzaChmbik7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIE5hdmlnYXRlIHRvIGEgZ2l2ZW4gcGF0aC5cblx0ICAgICAqIFRoZSBwYXRoIGNhbiBiZSBhbiBvYmplY3QgZGVzY3JpYmluZyBhIG5hbWVkIHBhdGggaW5cblx0ICAgICAqIHRoZSBmb3JtYXQgb2YgeyBuYW1lOiAnLi4uJywgcGFyYW1zOiB7fSwgcXVlcnk6IHt9fVxuXHQgICAgICogVGhlIHBhdGggaXMgYXNzdW1lZCB0byBiZSBhbHJlYWR5IGRlY29kZWQsIGFuZCB3aWxsXG5cdCAgICAgKiBiZSByZXNvbHZlZCBhZ2FpbnN0IHJvb3QgKGlmIHByb3ZpZGVkKVxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gcGF0aFxuXHQgICAgICogQHBhcmFtIHtCb29sZWFufSBbcmVwbGFjZV1cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyhwYXRoKSB7XG5cdCAgICAgIHZhciByZXBsYWNlID0gZmFsc2U7XG5cdCAgICAgIHZhciBhcHBlbmQgPSBmYWxzZTtcblx0ICAgICAgaWYgKFZ1ZS51dGlsLmlzT2JqZWN0KHBhdGgpKSB7XG5cdCAgICAgICAgcmVwbGFjZSA9IHBhdGgucmVwbGFjZTtcblx0ICAgICAgICBhcHBlbmQgPSBwYXRoLmFwcGVuZDtcblx0ICAgICAgfVxuXHQgICAgICBwYXRoID0gdGhpcy5zdHJpbmdpZnlQYXRoKHBhdGgpO1xuXHQgICAgICBpZiAocGF0aCkge1xuXHQgICAgICAgIHRoaXMuaGlzdG9yeS5nbyhwYXRoLCByZXBsYWNlLCBhcHBlbmQpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2hvcnQgaGFuZCBmb3IgcmVwbGFjaW5nIGN1cnJlbnQgcGF0aFxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlKHBhdGgpIHtcblx0ICAgICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgIHBhdGggPSB7IHBhdGg6IHBhdGggfTtcblx0ICAgICAgfVxuXHQgICAgICBwYXRoLnJlcGxhY2UgPSB0cnVlO1xuXHQgICAgICB0aGlzLmdvKHBhdGgpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFN0YXJ0IHRoZSByb3V0ZXIuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtWdWVDb25zdHJ1Y3Rvcn0gQXBwXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBjb250YWluZXJcblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydChBcHAsIGNvbnRhaW5lciwgY2IpIHtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmICh0aGlzLl9zdGFydGVkKSB7XG5cdCAgICAgICAgd2FybiQxKCdhbHJlYWR5IHN0YXJ0ZWQuJyk7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuX3N0YXJ0ZWQgPSB0cnVlO1xuXHQgICAgICB0aGlzLl9zdGFydENiID0gY2I7XG5cdCAgICAgIGlmICghdGhpcy5hcHApIHtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAoIUFwcCB8fCAhY29udGFpbmVyKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3Qgc3RhcnQgdnVlLXJvdXRlciB3aXRoIGEgY29tcG9uZW50IGFuZCBhICcgKyAncm9vdCBjb250YWluZXIuJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmIChBcHAgaW5zdGFuY2VvZiBWdWUpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTXVzdCBzdGFydCB2dWUtcm91dGVyIHdpdGggYSBjb21wb25lbnQsIG5vdCBhICcgKyAnVnVlIGluc3RhbmNlLicpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLl9hcHBDb250YWluZXIgPSBjb250YWluZXI7XG5cdCAgICAgICAgdmFyIEN0b3IgPSB0aGlzLl9hcHBDb25zdHJ1Y3RvciA9IHR5cGVvZiBBcHAgPT09ICdmdW5jdGlvbicgPyBBcHAgOiBWdWUuZXh0ZW5kKEFwcCk7XG5cdCAgICAgICAgLy8gZ2l2ZSBpdCBhIG5hbWUgZm9yIGJldHRlciBkZWJ1Z2dpbmdcblx0ICAgICAgICBDdG9yLm9wdGlvbnMubmFtZSA9IEN0b3Iub3B0aW9ucy5uYW1lIHx8ICdSb3V0ZXJBcHAnO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBoYW5kbGUgaGlzdG9yeSBmYWxsYmFjayBpbiBicm93c2VycyB0aGF0IGRvIG5vdFxuXHQgICAgICAvLyBzdXBwb3J0IEhUTUw1IGhpc3RvcnkgQVBJXG5cdCAgICAgIGlmICh0aGlzLl9oaXN0b3J5RmFsbGJhY2spIHtcblx0ICAgICAgICB2YXIgX2xvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xuXHQgICAgICAgIHZhciBfaGlzdG9yeSA9IG5ldyBIVE1MNUhpc3RvcnkoeyByb290OiB0aGlzLl9yb290IH0pO1xuXHQgICAgICAgIHZhciBwYXRoID0gX2hpc3Rvcnkucm9vdCA/IF9sb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKF9oaXN0b3J5LnJvb3RSRSwgJycpIDogX2xvY2F0aW9uLnBhdGhuYW1lO1xuXHQgICAgICAgIGlmIChwYXRoICYmIHBhdGggIT09ICcvJykge1xuXHQgICAgICAgICAgX2xvY2F0aW9uLmFzc2lnbigoX2hpc3Rvcnkucm9vdCB8fCAnJykgKyAnLycgKyB0aGlzLmhpc3RvcnkuZm9ybWF0UGF0aChwYXRoKSArIF9sb2NhdGlvbi5zZWFyY2gpO1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5oaXN0b3J5LnN0YXJ0KCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU3RvcCBsaXN0ZW5pbmcgdG8gcm91dGUgY2hhbmdlcy5cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XG5cdCAgICAgIHRoaXMuaGlzdG9yeS5zdG9wKCk7XG5cdCAgICAgIHRoaXMuX3N0YXJ0ZWQgPSBmYWxzZTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBOb3JtYWxpemUgbmFtZWQgcm91dGUgb2JqZWN0IC8gc3RyaW5nIHBhdGhzIGludG9cblx0ICAgICAqIGEgc3RyaW5nLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ3xOdW1iZXJ9IHBhdGhcblx0ICAgICAqIEByZXR1cm4ge1N0cmluZ31cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuc3RyaW5naWZ5UGF0aCA9IGZ1bmN0aW9uIHN0cmluZ2lmeVBhdGgocGF0aCkge1xuXHQgICAgICB2YXIgZ2VuZXJhdGVkUGF0aCA9ICcnO1xuXHQgICAgICBpZiAocGF0aCAmJiB0eXBlb2YgcGF0aCA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICBpZiAocGF0aC5uYW1lKSB7XG5cdCAgICAgICAgICB2YXIgZXh0ZW5kID0gVnVlLnV0aWwuZXh0ZW5kO1xuXHQgICAgICAgICAgdmFyIGN1cnJlbnRQYXJhbXMgPSB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbiAmJiB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbi50by5wYXJhbXM7XG5cdCAgICAgICAgICB2YXIgdGFyZ2V0UGFyYW1zID0gcGF0aC5wYXJhbXMgfHwge307XG5cdCAgICAgICAgICB2YXIgcGFyYW1zID0gY3VycmVudFBhcmFtcyA/IGV4dGVuZChleHRlbmQoe30sIGN1cnJlbnRQYXJhbXMpLCB0YXJnZXRQYXJhbXMpIDogdGFyZ2V0UGFyYW1zO1xuXHQgICAgICAgICAgZ2VuZXJhdGVkUGF0aCA9IGVuY29kZVVSSSh0aGlzLl9yZWNvZ25pemVyLmdlbmVyYXRlKHBhdGgubmFtZSwgcGFyYW1zKSk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChwYXRoLnBhdGgpIHtcblx0ICAgICAgICAgIGdlbmVyYXRlZFBhdGggPSBlbmNvZGVVUkkocGF0aC5wYXRoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHBhdGgucXVlcnkpIHtcblx0ICAgICAgICAgIC8vIG5vdGU6IHRoZSBnZW5lcmF0ZWQgcXVlcnkgc3RyaW5nIGlzIHByZS1VUkwtZW5jb2RlZCBieSB0aGUgcmVjb2duaXplclxuXHQgICAgICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5fcmVjb2duaXplci5nZW5lcmF0ZVF1ZXJ5U3RyaW5nKHBhdGgucXVlcnkpO1xuXHQgICAgICAgICAgaWYgKGdlbmVyYXRlZFBhdGguaW5kZXhPZignPycpID4gLTEpIHtcblx0ICAgICAgICAgICAgZ2VuZXJhdGVkUGF0aCArPSAnJicgKyBxdWVyeS5zbGljZSgxKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGdlbmVyYXRlZFBhdGggKz0gcXVlcnk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGdlbmVyYXRlZFBhdGggPSBlbmNvZGVVUkkocGF0aCA/IHBhdGggKyAnJyA6ICcnKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZ2VuZXJhdGVkUGF0aDtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gSW50ZXJuYWwgbWV0aG9kcyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcblx0ICAgIC8qKlxuXHQgICAgKiBBZGQgYSByb3V0ZSBjb250YWluaW5nIGEgbGlzdCBvZiBzZWdtZW50cyB0byB0aGUgaW50ZXJuYWxcblx0ICAgICogcm91dGUgcmVjb2duaXplci4gV2lsbCBiZSBjYWxsZWQgcmVjdXJzaXZlbHkgdG8gYWRkIGFsbFxuXHQgICAgKiBwb3NzaWJsZSBzdWItcm91dGVzLlxuXHQgICAgKlxuXHQgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuXHQgICAgKiBAcGFyYW0ge0FycmF5fSBzZWdtZW50c1xuXHQgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLl9hZGRSb3V0ZSA9IGZ1bmN0aW9uIF9hZGRSb3V0ZShwYXRoLCBoYW5kbGVyLCBzZWdtZW50cykge1xuXHQgICAgICBndWFyZENvbXBvbmVudChwYXRoLCBoYW5kbGVyKTtcblx0ICAgICAgaGFuZGxlci5wYXRoID0gcGF0aDtcblx0ICAgICAgaGFuZGxlci5mdWxsUGF0aCA9IChzZWdtZW50cy5yZWR1Y2UoZnVuY3Rpb24gKHBhdGgsIHNlZ21lbnQpIHtcblx0ICAgICAgICByZXR1cm4gcGF0aCArIHNlZ21lbnQucGF0aDtcblx0ICAgICAgfSwgJycpICsgcGF0aCkucmVwbGFjZSgnLy8nLCAnLycpO1xuXHQgICAgICBzZWdtZW50cy5wdXNoKHtcblx0ICAgICAgICBwYXRoOiBwYXRoLFxuXHQgICAgICAgIGhhbmRsZXI6IGhhbmRsZXJcblx0ICAgICAgfSk7XG5cdCAgICAgIHRoaXMuX3JlY29nbml6ZXIuYWRkKHNlZ21lbnRzLCB7XG5cdCAgICAgICAgYXM6IGhhbmRsZXIubmFtZVxuXHQgICAgICB9KTtcblx0ICAgICAgLy8gYWRkIHN1YiByb3V0ZXNcblx0ICAgICAgaWYgKGhhbmRsZXIuc3ViUm91dGVzKSB7XG5cdCAgICAgICAgZm9yICh2YXIgc3ViUGF0aCBpbiBoYW5kbGVyLnN1YlJvdXRlcykge1xuXHQgICAgICAgICAgLy8gcmVjdXJzaXZlbHkgd2FsayBhbGwgc3ViIHJvdXRlc1xuXHQgICAgICAgICAgdGhpcy5fYWRkUm91dGUoc3ViUGF0aCwgaGFuZGxlci5zdWJSb3V0ZXNbc3ViUGF0aF0sXG5cdCAgICAgICAgICAvLyBwYXNzIGEgY29weSBpbiByZWN1cnNpb24gdG8gYXZvaWQgbXV0YXRpbmdcblx0ICAgICAgICAgIC8vIGFjcm9zcyBicmFuY2hlc1xuXHQgICAgICAgICAgc2VnbWVudHMuc2xpY2UoKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0IHRoZSBub3RGb3VuZCByb3V0ZSBoYW5kbGVyLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLl9ub3RGb3VuZCA9IGZ1bmN0aW9uIF9ub3RGb3VuZChoYW5kbGVyKSB7XG5cdCAgICAgIGd1YXJkQ29tcG9uZW50KCcqJywgaGFuZGxlcik7XG5cdCAgICAgIHRoaXMuX25vdEZvdW5kSGFuZGxlciA9IFt7IGhhbmRsZXI6IGhhbmRsZXIgfV07XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQWRkIGEgcmVkaXJlY3QgcmVjb3JkLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gcmVkaXJlY3RQYXRoXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLl9hZGRSZWRpcmVjdCA9IGZ1bmN0aW9uIF9hZGRSZWRpcmVjdChwYXRoLCByZWRpcmVjdFBhdGgpIHtcblx0ICAgICAgaWYgKHBhdGggPT09ICcqJykge1xuXHQgICAgICAgIHRoaXMuX25vdEZvdW5kUmVkaXJlY3QgPSByZWRpcmVjdFBhdGg7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5fYWRkR3VhcmQocGF0aCwgcmVkaXJlY3RQYXRoLCB0aGlzLnJlcGxhY2UpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQWRkIGFuIGFsaWFzIHJlY29yZC5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IGFsaWFzUGF0aFxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5fYWRkQWxpYXMgPSBmdW5jdGlvbiBfYWRkQWxpYXMocGF0aCwgYWxpYXNQYXRoKSB7XG5cdCAgICAgIHRoaXMuX2FkZEd1YXJkKHBhdGgsIGFsaWFzUGF0aCwgdGhpcy5fbWF0Y2gpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEFkZCBhIHBhdGggZ3VhcmQuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtYXBwZWRQYXRoXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLl9hZGRHdWFyZCA9IGZ1bmN0aW9uIF9hZGRHdWFyZChwYXRoLCBtYXBwZWRQYXRoLCBfaGFuZGxlcikge1xuXHQgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblx0XG5cdCAgICAgIHRoaXMuX2d1YXJkUmVjb2duaXplci5hZGQoW3tcblx0ICAgICAgICBwYXRoOiBwYXRoLFxuXHQgICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIobWF0Y2gsIHF1ZXJ5KSB7XG5cdCAgICAgICAgICB2YXIgcmVhbFBhdGggPSBtYXBQYXJhbXMobWFwcGVkUGF0aCwgbWF0Y2gucGFyYW1zLCBxdWVyeSk7XG5cdCAgICAgICAgICBfaGFuZGxlci5jYWxsKF90aGlzMiwgcmVhbFBhdGgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfV0pO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIENoZWNrIGlmIGEgcGF0aCBtYXRjaGVzIGFueSByZWRpcmVjdCByZWNvcmRzLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICAgKiBAcmV0dXJuIHtCb29sZWFufSAtIGlmIHRydWUsIHdpbGwgc2tpcCBub3JtYWwgbWF0Y2guXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLl9jaGVja0d1YXJkID0gZnVuY3Rpb24gX2NoZWNrR3VhcmQocGF0aCkge1xuXHQgICAgICB2YXIgbWF0Y2hlZCA9IHRoaXMuX2d1YXJkUmVjb2duaXplci5yZWNvZ25pemUocGF0aCwgdHJ1ZSk7XG5cdCAgICAgIGlmIChtYXRjaGVkKSB7XG5cdCAgICAgICAgbWF0Y2hlZFswXS5oYW5kbGVyKG1hdGNoZWRbMF0sIG1hdGNoZWQucXVlcnlQYXJhbXMpO1xuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICB9IGVsc2UgaWYgKHRoaXMuX25vdEZvdW5kUmVkaXJlY3QpIHtcblx0ICAgICAgICBtYXRjaGVkID0gdGhpcy5fcmVjb2duaXplci5yZWNvZ25pemUocGF0aCk7XG5cdCAgICAgICAgaWYgKCFtYXRjaGVkKSB7XG5cdCAgICAgICAgICB0aGlzLnJlcGxhY2UodGhpcy5fbm90Rm91bmRSZWRpcmVjdCk7XG5cdCAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBNYXRjaCBhIFVSTCBwYXRoIGFuZCBzZXQgdGhlIHJvdXRlIGNvbnRleHQgb24gdm0sXG5cdCAgICAgKiB0cmlnZ2VyaW5nIHZpZXcgdXBkYXRlcy5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IFtzdGF0ZV1cblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbYW5jaG9yXVxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5fbWF0Y2ggPSBmdW5jdGlvbiBfbWF0Y2gocGF0aCwgc3RhdGUsIGFuY2hvcikge1xuXHQgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblx0XG5cdCAgICAgIGlmICh0aGlzLl9jaGVja0d1YXJkKHBhdGgpKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgY3VycmVudFJvdXRlID0gdGhpcy5fY3VycmVudFJvdXRlO1xuXHQgICAgICB2YXIgY3VycmVudFRyYW5zaXRpb24gPSB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbjtcblx0XG5cdCAgICAgIGlmIChjdXJyZW50VHJhbnNpdGlvbikge1xuXHQgICAgICAgIGlmIChjdXJyZW50VHJhbnNpdGlvbi50by5wYXRoID09PSBwYXRoKSB7XG5cdCAgICAgICAgICAvLyBkbyBub3RoaW5nIGlmIHdlIGhhdmUgYW4gYWN0aXZlIHRyYW5zaXRpb24gZ29pbmcgdG8gdGhlIHNhbWUgcGF0aFxuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFJvdXRlLnBhdGggPT09IHBhdGgpIHtcblx0ICAgICAgICAgIC8vIFdlIGFyZSBnb2luZyB0byB0aGUgc2FtZSBwYXRoLCBidXQgd2UgYWxzbyBoYXZlIGFuIG9uZ29pbmcgYnV0XG5cdCAgICAgICAgICAvLyBub3QteWV0LXZhbGlkYXRlZCB0cmFuc2l0aW9uLiBBYm9ydCB0aGF0IHRyYW5zaXRpb24gYW5kIHJlc2V0IHRvXG5cdCAgICAgICAgICAvLyBwcmV2IHRyYW5zaXRpb24uXG5cdCAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbi5hYm9ydGVkID0gdHJ1ZTtcblx0ICAgICAgICAgIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uID0gdGhpcy5fcHJldlRyYW5zaXRpb247XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIGdvaW5nIHRvIGEgdG90YWxseSBkaWZmZXJlbnQgcGF0aC4gYWJvcnQgb25nb2luZyB0cmFuc2l0aW9uLlxuXHQgICAgICAgICAgY3VycmVudFRyYW5zaXRpb24uYWJvcnRlZCA9IHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBjb25zdHJ1Y3QgbmV3IHJvdXRlIGFuZCB0cmFuc2l0aW9uIGNvbnRleHRcblx0ICAgICAgdmFyIHJvdXRlID0gbmV3IFJvdXRlKHBhdGgsIHRoaXMpO1xuXHQgICAgICB2YXIgdHJhbnNpdGlvbiA9IG5ldyBSb3V0ZVRyYW5zaXRpb24odGhpcywgcm91dGUsIGN1cnJlbnRSb3V0ZSk7XG5cdFxuXHQgICAgICAvLyBjdXJyZW50IHRyYW5zaXRpb24gaXMgdXBkYXRlZCByaWdodCBub3cuXG5cdCAgICAgIC8vIGhvd2V2ZXIsIGN1cnJlbnQgcm91dGUgd2lsbCBvbmx5IGJlIHVwZGF0ZWQgYWZ0ZXIgdGhlIHRyYW5zaXRpb24gaGFzXG5cdCAgICAgIC8vIGJlZW4gdmFsaWRhdGVkLlxuXHQgICAgICB0aGlzLl9wcmV2VHJhbnNpdGlvbiA9IGN1cnJlbnRUcmFuc2l0aW9uO1xuXHQgICAgICB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbiA9IHRyYW5zaXRpb247XG5cdFxuXHQgICAgICBpZiAoIXRoaXMuYXBwKSB7XG5cdCAgICAgICAgKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIC8vIGluaXRpYWwgcmVuZGVyXG5cdCAgICAgICAgICB2YXIgcm91dGVyID0gX3RoaXMzO1xuXHQgICAgICAgICAgX3RoaXMzLmFwcCA9IG5ldyBfdGhpczMuX2FwcENvbnN0cnVjdG9yKHtcblx0ICAgICAgICAgICAgZWw6IF90aGlzMy5fYXBwQ29udGFpbmVyLFxuXHQgICAgICAgICAgICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge1xuXHQgICAgICAgICAgICAgIHRoaXMuJHJvdXRlciA9IHJvdXRlcjtcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX21ldGE6IHtcblx0ICAgICAgICAgICAgICAkcm91dGU6IHJvdXRlXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0pKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIGNoZWNrIGdsb2JhbCBiZWZvcmUgaG9va1xuXHQgICAgICB2YXIgYmVmb3JlSG9va3MgPSB0aGlzLl9iZWZvcmVFYWNoSG9va3M7XG5cdCAgICAgIHZhciBzdGFydFRyYW5zaXRpb24gPSBmdW5jdGlvbiBzdGFydFRyYW5zaXRpb24oKSB7XG5cdCAgICAgICAgdHJhbnNpdGlvbi5zdGFydChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBfdGhpczMuX3Bvc3RUcmFuc2l0aW9uKHJvdXRlLCBzdGF0ZSwgYW5jaG9yKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIGlmIChiZWZvcmVIb29rcy5sZW5ndGgpIHtcblx0ICAgICAgICB0cmFuc2l0aW9uLnJ1blF1ZXVlKGJlZm9yZUhvb2tzLCBmdW5jdGlvbiAoaG9vaywgXywgbmV4dCkge1xuXHQgICAgICAgICAgaWYgKHRyYW5zaXRpb24gPT09IF90aGlzMy5fY3VycmVudFRyYW5zaXRpb24pIHtcblx0ICAgICAgICAgICAgdHJhbnNpdGlvbi5jYWxsSG9vayhob29rLCBudWxsLCBuZXh0LCB7XG5cdCAgICAgICAgICAgICAgZXhwZWN0Qm9vbGVhbjogdHJ1ZVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCBzdGFydFRyYW5zaXRpb24pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHN0YXJ0VHJhbnNpdGlvbigpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIXRoaXMuX3JlbmRlcmVkICYmIHRoaXMuX3N0YXJ0Q2IpIHtcblx0ICAgICAgICB0aGlzLl9zdGFydENiLmNhbGwobnVsbCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIEhBQ0s6XG5cdCAgICAgIC8vIHNldCByZW5kZXJlZCB0byB0cnVlIGFmdGVyIHRoZSB0cmFuc2l0aW9uIHN0YXJ0LCBzb1xuXHQgICAgICAvLyB0aGF0IGNvbXBvbmVudHMgdGhhdCBhcmUgYWNpdHZhdGVkIHN5bmNocm9ub3VzbHkga25vd1xuXHQgICAgICAvLyB3aGV0aGVyIGl0IGlzIHRoZSBpbml0aWFsIHJlbmRlci5cblx0ICAgICAgdGhpcy5fcmVuZGVyZWQgPSB0cnVlO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFNldCBjdXJyZW50IHRvIHRoZSBuZXcgdHJhbnNpdGlvbi5cblx0ICAgICAqIFRoaXMgaXMgY2FsbGVkIGJ5IHRoZSB0cmFuc2l0aW9uIG9iamVjdCB3aGVuIHRoZVxuXHQgICAgICogdmFsaWRhdGlvbiBvZiBhIHJvdXRlIGhhcyBzdWNjZWVkZWQuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLl9vblRyYW5zaXRpb25WYWxpZGF0ZWQgPSBmdW5jdGlvbiBfb25UcmFuc2l0aW9uVmFsaWRhdGVkKHRyYW5zaXRpb24pIHtcblx0ICAgICAgLy8gc2V0IGN1cnJlbnQgcm91dGVcblx0ICAgICAgdmFyIHJvdXRlID0gdGhpcy5fY3VycmVudFJvdXRlID0gdHJhbnNpdGlvbi50bztcblx0ICAgICAgLy8gdXBkYXRlIHJvdXRlIGNvbnRleHQgZm9yIGFsbCBjaGlsZHJlblxuXHQgICAgICBpZiAodGhpcy5hcHAuJHJvdXRlICE9PSByb3V0ZSkge1xuXHQgICAgICAgIHRoaXMuYXBwLiRyb3V0ZSA9IHJvdXRlO1xuXHQgICAgICAgIHRoaXMuX2NoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG5cdCAgICAgICAgICBjaGlsZC4kcm91dGUgPSByb3V0ZTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBjYWxsIGdsb2JhbCBhZnRlciBob29rXG5cdCAgICAgIGlmICh0aGlzLl9hZnRlckVhY2hIb29rcy5sZW5ndGgpIHtcblx0ICAgICAgICB0aGlzLl9hZnRlckVhY2hIb29rcy5mb3JFYWNoKGZ1bmN0aW9uIChob29rKSB7XG5cdCAgICAgICAgICByZXR1cm4gaG9vay5jYWxsKG51bGwsIHtcblx0ICAgICAgICAgICAgdG86IHRyYW5zaXRpb24udG8sXG5cdCAgICAgICAgICAgIGZyb206IHRyYW5zaXRpb24uZnJvbVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5fY3VycmVudFRyYW5zaXRpb24uZG9uZSA9IHRydWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogSGFuZGxlIHN0dWZmIGFmdGVyIHRoZSB0cmFuc2l0aW9uLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7Um91dGV9IHJvdXRlXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gW3N0YXRlXVxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IFthbmNob3JdXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLl9wb3N0VHJhbnNpdGlvbiA9IGZ1bmN0aW9uIF9wb3N0VHJhbnNpdGlvbihyb3V0ZSwgc3RhdGUsIGFuY2hvcikge1xuXHQgICAgICAvLyBoYW5kbGUgc2Nyb2xsIHBvc2l0aW9uc1xuXHQgICAgICAvLyBzYXZlZCBzY3JvbGwgcG9zaXRpb25zIHRha2UgcHJpb3JpdHlcblx0ICAgICAgLy8gdGhlbiB3ZSBjaGVjayBpZiB0aGUgcGF0aCBoYXMgYW4gYW5jaG9yXG5cdCAgICAgIHZhciBwb3MgPSBzdGF0ZSAmJiBzdGF0ZS5wb3M7XG5cdCAgICAgIGlmIChwb3MgJiYgdGhpcy5fc2F2ZVNjcm9sbFBvc2l0aW9uKSB7XG5cdCAgICAgICAgVnVlLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyhwb3MueCwgcG9zLnkpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGVsc2UgaWYgKGFuY2hvcikge1xuXHQgICAgICAgIFZ1ZS5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhbmNob3Iuc2xpY2UoMSkpO1xuXHQgICAgICAgICAgaWYgKGVsKSB7XG5cdCAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyh3aW5kb3cuc2Nyb2xsWCwgZWwub2Zmc2V0VG9wKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gUm91dGVyO1xuXHQgIH0pKCk7XG5cdFxuXHQgIGZ1bmN0aW9uIGd1YXJkQ29tcG9uZW50KHBhdGgsIGhhbmRsZXIpIHtcblx0ICAgIHZhciBjb21wID0gaGFuZGxlci5jb21wb25lbnQ7XG5cdCAgICBpZiAoVnVlLnV0aWwuaXNQbGFpbk9iamVjdChjb21wKSkge1xuXHQgICAgICBjb21wID0gaGFuZGxlci5jb21wb25lbnQgPSBWdWUuZXh0ZW5kKGNvbXApO1xuXHQgICAgfVxuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAodHlwZW9mIGNvbXAgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgaGFuZGxlci5jb21wb25lbnQgPSBudWxsO1xuXHQgICAgICB3YXJuJDEoJ2ludmFsaWQgY29tcG9uZW50IGZvciByb3V0ZSBcIicgKyBwYXRoICsgJ1wiLicpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyogSW5zdGFsbGF0aW9uICovXG5cdFxuXHQgIFJvdXRlci5pbnN0YWxsZWQgPSBmYWxzZTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5zdGFsbGF0aW9uIGludGVyZmFjZS5cblx0ICAgKiBJbnN0YWxsIHRoZSBuZWNlc3NhcnkgZGlyZWN0aXZlcy5cblx0ICAgKi9cblx0XG5cdCAgUm91dGVyLmluc3RhbGwgPSBmdW5jdGlvbiAoZXh0ZXJuYWxWdWUpIHtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKFJvdXRlci5pbnN0YWxsZWQpIHtcblx0ICAgICAgd2FybiQxKCdhbHJlYWR5IGluc3RhbGxlZC4nKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgVnVlID0gZXh0ZXJuYWxWdWU7XG5cdCAgICBhcHBseU92ZXJyaWRlKFZ1ZSk7XG5cdCAgICBWaWV3KFZ1ZSk7XG5cdCAgICBMaW5rKFZ1ZSk7XG5cdCAgICBleHBvcnRzJDEuVnVlID0gVnVlO1xuXHQgICAgUm91dGVyLmluc3RhbGxlZCA9IHRydWU7XG5cdCAgfTtcblx0XG5cdCAgLy8gYXV0byBpbnN0YWxsXG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5WdWUpIHtcblx0ICAgIHdpbmRvdy5WdWUudXNlKFJvdXRlcik7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gUm91dGVyO1xuXHRcblx0fSkpO1xuXG4vKioqLyB9LFxuLyogMjA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Myk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vZ2V0LXN0YXJ0ZWQudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vZ2V0LXN0YXJ0ZWQudnVlXCIpO1xuXHRcdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NCk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NSk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nik7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY29udGFpbmVyLnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2xlZ2FsLWNvbnRhaW5lci52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3KTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9sZWdhbC1jb3VudGVyLnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2xlZ2FsLWNvdW50ZXIudnVlXCIpO1xuXHRcdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OCk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vb3ZlcmxheS1jb250YWluZXIudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vb3ZlcmxheS1jb250YWluZXIudnVlXCIpO1xuXHRcdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjEzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OSk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vb3ZlcmxheS52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIxNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oODApO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIxNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oODEpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIxNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oODIpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3RhYnMudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vdGFicy52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwsIHByb2Nlc3MpIHsvKiFcblx0ICogVnVlLmpzIHYxLjAuMjZcblx0ICogKGMpIDIwMTYgRXZhbiBZb3Vcblx0ICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZnVuY3Rpb24gc2V0KG9iaiwga2V5LCB2YWwpIHtcblx0ICBpZiAoaGFzT3duKG9iaiwga2V5KSkge1xuXHQgICAgb2JqW2tleV0gPSB2YWw7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIGlmIChvYmouX2lzVnVlKSB7XG5cdCAgICBzZXQob2JqLl9kYXRhLCBrZXksIHZhbCk7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBvYiA9IG9iai5fX29iX187XG5cdCAgaWYgKCFvYikge1xuXHQgICAgb2JqW2tleV0gPSB2YWw7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIG9iLmNvbnZlcnQoa2V5LCB2YWwpO1xuXHQgIG9iLmRlcC5ub3RpZnkoKTtcblx0ICBpZiAob2Iudm1zKSB7XG5cdCAgICB2YXIgaSA9IG9iLnZtcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhciB2bSA9IG9iLnZtc1tpXTtcblx0ICAgICAgdm0uX3Byb3h5KGtleSk7XG5cdCAgICAgIHZtLl9kaWdlc3QoKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHZhbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIERlbGV0ZSBhIHByb3BlcnR5IGFuZCB0cmlnZ2VyIGNoYW5nZSBpZiBuZWNlc3NhcnkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGRlbChvYmosIGtleSkge1xuXHQgIGlmICghaGFzT3duKG9iaiwga2V5KSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBkZWxldGUgb2JqW2tleV07XG5cdCAgdmFyIG9iID0gb2JqLl9fb2JfXztcblx0ICBpZiAoIW9iKSB7XG5cdCAgICBpZiAob2JqLl9pc1Z1ZSkge1xuXHQgICAgICBkZWxldGUgb2JqLl9kYXRhW2tleV07XG5cdCAgICAgIG9iai5fZGlnZXN0KCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIG9iLmRlcC5ub3RpZnkoKTtcblx0ICBpZiAob2Iudm1zKSB7XG5cdCAgICB2YXIgaSA9IG9iLnZtcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhciB2bSA9IG9iLnZtc1tpXTtcblx0ICAgICAgdm0uX3VucHJveHkoa2V5KTtcblx0ICAgICAgdm0uX2RpZ2VzdCgpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblx0LyoqXG5cdCAqIENoZWNrIHdoZXRoZXIgdGhlIG9iamVjdCBoYXMgdGhlIHByb3BlcnR5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBoYXNPd24ob2JqLCBrZXkpIHtcblx0ICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBleHByZXNzaW9uIGlzIGEgbGl0ZXJhbCB2YWx1ZS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdHZhciBsaXRlcmFsVmFsdWVSRSA9IC9eXFxzPyh0cnVlfGZhbHNlfC0/W1xcZFxcLl0rfCdbXiddKid8XCJbXlwiXSpcIilcXHM/JC87XG5cdFxuXHRmdW5jdGlvbiBpc0xpdGVyYWwoZXhwKSB7XG5cdCAgcmV0dXJuIGxpdGVyYWxWYWx1ZVJFLnRlc3QoZXhwKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGEgc3RyaW5nIHN0YXJ0cyB3aXRoICQgb3IgX1xuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNSZXNlcnZlZChzdHIpIHtcblx0ICB2YXIgYyA9IChzdHIgKyAnJykuY2hhckNvZGVBdCgwKTtcblx0ICByZXR1cm4gYyA9PT0gMHgyNCB8fCBjID09PSAweDVGO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR3VhcmQgdGV4dCBvdXRwdXQsIG1ha2Ugc3VyZSB1bmRlZmluZWQgb3V0cHV0c1xuXHQgKiBlbXB0eSBzdHJpbmdcblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gX3RvU3RyaW5nKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlLnRvU3RyaW5nKCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBhbmQgY29udmVydCBwb3NzaWJsZSBudW1lcmljIHN0cmluZ3MgdG8gbnVtYmVyc1xuXHQgKiBiZWZvcmUgc2V0dGluZyBiYWNrIHRvIGRhdGFcblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHsqfE51bWJlcn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuXHQgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBwYXJzZWQgPSBOdW1iZXIodmFsdWUpO1xuXHQgICAgcmV0dXJuIGlzTmFOKHBhcnNlZCkgPyB2YWx1ZSA6IHBhcnNlZDtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IHN0cmluZyBib29sZWFuIGxpdGVyYWxzIGludG8gcmVhbCBib29sZWFucy5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHsqfEJvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdG9Cb29sZWFuKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlID09PSAndHJ1ZScgPyB0cnVlIDogdmFsdWUgPT09ICdmYWxzZScgPyBmYWxzZSA6IHZhbHVlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU3RyaXAgcXVvdGVzIGZyb20gYSBzdHJpbmdcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtTdHJpbmcgfCBmYWxzZX1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzdHJpcFF1b3RlcyhzdHIpIHtcblx0ICB2YXIgYSA9IHN0ci5jaGFyQ29kZUF0KDApO1xuXHQgIHZhciBiID0gc3RyLmNoYXJDb2RlQXQoc3RyLmxlbmd0aCAtIDEpO1xuXHQgIHJldHVybiBhID09PSBiICYmIChhID09PSAweDIyIHx8IGEgPT09IDB4MjcpID8gc3RyLnNsaWNlKDEsIC0xKSA6IHN0cjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENhbWVsaXplIGEgaHlwaGVuLWRlbG1pdGVkIHN0cmluZy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0dmFyIGNhbWVsaXplUkUgPSAvLShcXHcpL2c7XG5cdFxuXHRmdW5jdGlvbiBjYW1lbGl6ZShzdHIpIHtcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UoY2FtZWxpemVSRSwgdG9VcHBlcik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvVXBwZXIoXywgYykge1xuXHQgIHJldHVybiBjID8gYy50b1VwcGVyQ2FzZSgpIDogJyc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBIeXBoZW5hdGUgYSBjYW1lbENhc2Ugc3RyaW5nLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHR2YXIgaHlwaGVuYXRlUkUgPSAvKFthLXpcXGRdKShbQS1aXSkvZztcblx0XG5cdGZ1bmN0aW9uIGh5cGhlbmF0ZShzdHIpIHtcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UoaHlwaGVuYXRlUkUsICckMS0kMicpLnRvTG93ZXJDYXNlKCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBoeXBoZW4vdW5kZXJzY29yZS9zbGFzaCBkZWxpbWl0ZXJlZCBuYW1lcyBpbnRvXG5cdCAqIGNhbWVsaXplZCBjbGFzc05hbWVzLlxuXHQgKlxuXHQgKiBlLmcuIG15LWNvbXBvbmVudCA9PiBNeUNvbXBvbmVudFxuXHQgKiAgICAgIHNvbWVfZWxzZSAgICA9PiBTb21lRWxzZVxuXHQgKiAgICAgIHNvbWUvY29tcCAgICA9PiBTb21lQ29tcFxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHR2YXIgY2xhc3NpZnlSRSA9IC8oPzpefFstX1xcL10pKFxcdykvZztcblx0XG5cdGZ1bmN0aW9uIGNsYXNzaWZ5KHN0cikge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZShjbGFzc2lmeVJFLCB0b1VwcGVyKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFNpbXBsZSBiaW5kLCBmYXN0ZXIgdGhhbiBuYXRpdmVcblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICogQHBhcmFtIHtPYmplY3R9IGN0eFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBiaW5kKGZuLCBjdHgpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gKGEpIHtcblx0ICAgIHZhciBsID0gYXJndW1lbnRzLmxlbmd0aDtcblx0ICAgIHJldHVybiBsID8gbCA+IDEgPyBmbi5hcHBseShjdHgsIGFyZ3VtZW50cykgOiBmbi5jYWxsKGN0eCwgYSkgOiBmbi5jYWxsKGN0eCk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgYW4gQXJyYXktbGlrZSBvYmplY3QgdG8gYSByZWFsIEFycmF5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5LWxpa2V9IGxpc3Rcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtzdGFydF0gLSBzdGFydCBpbmRleFxuXHQgKiBAcmV0dXJuIHtBcnJheX1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0b0FycmF5KGxpc3QsIHN0YXJ0KSB7XG5cdCAgc3RhcnQgPSBzdGFydCB8fCAwO1xuXHQgIHZhciBpID0gbGlzdC5sZW5ndGggLSBzdGFydDtcblx0ICB2YXIgcmV0ID0gbmV3IEFycmF5KGkpO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHJldFtpXSA9IGxpc3RbaSArIHN0YXJ0XTtcblx0ICB9XG5cdCAgcmV0dXJuIHJldDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIE1peCBwcm9wZXJ0aWVzIGludG8gdGFyZ2V0IG9iamVjdC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHRvXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBmcm9tXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZXh0ZW5kKHRvLCBmcm9tKSB7XG5cdCAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhmcm9tKTtcblx0ICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHRvW2tleXNbaV1dID0gZnJvbVtrZXlzW2ldXTtcblx0ICB9XG5cdCAgcmV0dXJuIHRvO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUXVpY2sgb2JqZWN0IGNoZWNrIC0gdGhpcyBpcyBwcmltYXJpbHkgdXNlZCB0byB0ZWxsXG5cdCAqIE9iamVjdHMgZnJvbSBwcmltaXRpdmUgdmFsdWVzIHdoZW4gd2Uga25vdyB0aGUgdmFsdWVcblx0ICogaXMgYSBKU09OLWNvbXBsaWFudCB0eXBlLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IG9ialxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xuXHQgIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTdHJpY3Qgb2JqZWN0IHR5cGUgY2hlY2suIE9ubHkgcmV0dXJucyB0cnVlXG5cdCAqIGZvciBwbGFpbiBKYXZhU2NyaXB0IG9iamVjdHMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gb2JqXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0dmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblx0dmFyIE9CSkVDVF9TVFJJTkcgPSAnW29iamVjdCBPYmplY3RdJztcblx0XG5cdGZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qob2JqKSB7XG5cdCAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gT0JKRUNUX1NUUklORztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFycmF5IHR5cGUgY2hlY2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gb2JqXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0dmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXHRcblx0LyoqXG5cdCAqIERlZmluZSBhIHByb3BlcnR5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICogQHBhcmFtIHtCb29sZWFufSBbZW51bWVyYWJsZV1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkZWYob2JqLCBrZXksIHZhbCwgZW51bWVyYWJsZSkge1xuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuXHQgICAgdmFsdWU6IHZhbCxcblx0ICAgIGVudW1lcmFibGU6ICEhZW51bWVyYWJsZSxcblx0ICAgIHdyaXRhYmxlOiB0cnVlLFxuXHQgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZWJvdW5jZSBhIGZ1bmN0aW9uIHNvIGl0IG9ubHkgZ2V0cyBjYWxsZWQgYWZ0ZXIgdGhlXG5cdCAqIGlucHV0IHN0b3BzIGFycml2aW5nIGFmdGVyIHRoZSBnaXZlbiB3YWl0IHBlcmlvZC5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuY1xuXHQgKiBAcGFyYW0ge051bWJlcn0gd2FpdFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gX2RlYm91bmNlKGZ1bmMsIHdhaXQpIHtcblx0ICB2YXIgdGltZW91dCwgYXJncywgY29udGV4dCwgdGltZXN0YW1wLCByZXN1bHQ7XG5cdCAgdmFyIGxhdGVyID0gZnVuY3Rpb24gbGF0ZXIoKSB7XG5cdCAgICB2YXIgbGFzdCA9IERhdGUubm93KCkgLSB0aW1lc3RhbXA7XG5cdCAgICBpZiAobGFzdCA8IHdhaXQgJiYgbGFzdCA+PSAwKSB7XG5cdCAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0IC0gbGFzdCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aW1lb3V0ID0gbnVsbDtcblx0ICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcblx0ICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG5cdCAgICB9XG5cdCAgfTtcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgY29udGV4dCA9IHRoaXM7XG5cdCAgICBhcmdzID0gYXJndW1lbnRzO1xuXHQgICAgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcblx0ICAgIGlmICghdGltZW91dCkge1xuXHQgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNYW51YWwgaW5kZXhPZiBiZWNhdXNlIGl0J3Mgc2xpZ2h0bHkgZmFzdGVyIHRoYW5cblx0ICogbmF0aXZlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJcblx0ICogQHBhcmFtIHsqfSBvYmpcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpbmRleE9mKGFyciwgb2JqKSB7XG5cdCAgdmFyIGkgPSBhcnIubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGlmIChhcnJbaV0gPT09IG9iaikgcmV0dXJuIGk7XG5cdCAgfVxuXHQgIHJldHVybiAtMTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIE1ha2UgYSBjYW5jZWxsYWJsZSB2ZXJzaW9uIG9mIGFuIGFzeW5jIGNhbGxiYWNrLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjYW5jZWxsYWJsZShmbikge1xuXHQgIHZhciBjYiA9IGZ1bmN0aW9uIGNiKCkge1xuXHQgICAgaWYgKCFjYi5jYW5jZWxsZWQpIHtcblx0ICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgfTtcblx0ICBjYi5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBjYi5jYW5jZWxsZWQgPSB0cnVlO1xuXHQgIH07XG5cdCAgcmV0dXJuIGNiO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgdHdvIHZhbHVlcyBhcmUgbG9vc2VseSBlcXVhbCAtIHRoYXQgaXMsXG5cdCAqIGlmIHRoZXkgYXJlIHBsYWluIG9iamVjdHMsIGRvIHRoZXkgaGF2ZSB0aGUgc2FtZSBzaGFwZT9cblx0ICpcblx0ICogQHBhcmFtIHsqfSBhXG5cdCAqIEBwYXJhbSB7Kn0gYlxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGxvb3NlRXF1YWwoYSwgYikge1xuXHQgIC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuXHQgIHJldHVybiBhID09IGIgfHwgKGlzT2JqZWN0KGEpICYmIGlzT2JqZWN0KGIpID8gSlNPTi5zdHJpbmdpZnkoYSkgPT09IEpTT04uc3RyaW5naWZ5KGIpIDogZmFsc2UpO1xuXHQgIC8qIGVzbGludC1lbmFibGUgZXFlcWVxICovXG5cdH1cblx0XG5cdHZhciBoYXNQcm90byA9ICgnX19wcm90b19fJyBpbiB7fSk7XG5cdFxuXHQvLyBCcm93c2VyIGVudmlyb25tZW50IHNuaWZmaW5nXG5cdHZhciBpbkJyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwod2luZG93KSAhPT0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cdFxuXHQvLyBkZXRlY3QgZGV2dG9vbHNcblx0dmFyIGRldnRvb2xzID0gaW5Ccm93c2VyICYmIHdpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO1xuXHRcblx0Ly8gVUEgc25pZmZpbmcgZm9yIHdvcmtpbmcgYXJvdW5kIGJyb3dzZXItc3BlY2lmaWMgcXVpcmtzXG5cdHZhciBVQSA9IGluQnJvd3NlciAmJiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuXHR2YXIgaXNJRSA9IFVBICYmIFVBLmluZGV4T2YoJ3RyaWRlbnQnKSA+IDA7XG5cdHZhciBpc0lFOSA9IFVBICYmIFVBLmluZGV4T2YoJ21zaWUgOS4wJykgPiAwO1xuXHR2YXIgaXNBbmRyb2lkID0gVUEgJiYgVUEuaW5kZXhPZignYW5kcm9pZCcpID4gMDtcblx0dmFyIGlzSW9zID0gVUEgJiYgLyhpcGhvbmV8aXBhZHxpcG9kfGlvcykvaS50ZXN0KFVBKTtcblx0dmFyIGlvc1ZlcnNpb25NYXRjaCA9IGlzSW9zICYmIFVBLm1hdGNoKC9vcyAoW1xcZF9dKykvKTtcblx0dmFyIGlvc1ZlcnNpb24gPSBpb3NWZXJzaW9uTWF0Y2ggJiYgaW9zVmVyc2lvbk1hdGNoWzFdLnNwbGl0KCdfJyk7XG5cdFxuXHQvLyBkZXRlY3RpbmcgaU9TIFVJV2ViVmlldyBieSBpbmRleGVkREJcblx0dmFyIGhhc011dGF0aW9uT2JzZXJ2ZXJCdWcgPSBpb3NWZXJzaW9uICYmIE51bWJlcihpb3NWZXJzaW9uWzBdKSA+PSA5ICYmIE51bWJlcihpb3NWZXJzaW9uWzFdKSA+PSAzICYmICF3aW5kb3cuaW5kZXhlZERCO1xuXHRcblx0dmFyIHRyYW5zaXRpb25Qcm9wID0gdW5kZWZpbmVkO1xuXHR2YXIgdHJhbnNpdGlvbkVuZEV2ZW50ID0gdW5kZWZpbmVkO1xuXHR2YXIgYW5pbWF0aW9uUHJvcCA9IHVuZGVmaW5lZDtcblx0dmFyIGFuaW1hdGlvbkVuZEV2ZW50ID0gdW5kZWZpbmVkO1xuXHRcblx0Ly8gVHJhbnNpdGlvbiBwcm9wZXJ0eS9ldmVudCBzbmlmZmluZ1xuXHRpZiAoaW5Ccm93c2VyICYmICFpc0lFOSkge1xuXHQgIHZhciBpc1dlYmtpdFRyYW5zID0gd2luZG93Lm9udHJhbnNpdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmIHdpbmRvdy5vbndlYmtpdHRyYW5zaXRpb25lbmQgIT09IHVuZGVmaW5lZDtcblx0ICB2YXIgaXNXZWJraXRBbmltID0gd2luZG93Lm9uYW5pbWF0aW9uZW5kID09PSB1bmRlZmluZWQgJiYgd2luZG93Lm9ud2Via2l0YW5pbWF0aW9uZW5kICE9PSB1bmRlZmluZWQ7XG5cdCAgdHJhbnNpdGlvblByb3AgPSBpc1dlYmtpdFRyYW5zID8gJ1dlYmtpdFRyYW5zaXRpb24nIDogJ3RyYW5zaXRpb24nO1xuXHQgIHRyYW5zaXRpb25FbmRFdmVudCA9IGlzV2Via2l0VHJhbnMgPyAnd2Via2l0VHJhbnNpdGlvbkVuZCcgOiAndHJhbnNpdGlvbmVuZCc7XG5cdCAgYW5pbWF0aW9uUHJvcCA9IGlzV2Via2l0QW5pbSA/ICdXZWJraXRBbmltYXRpb24nIDogJ2FuaW1hdGlvbic7XG5cdCAgYW5pbWF0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdEFuaW0gPyAnd2Via2l0QW5pbWF0aW9uRW5kJyA6ICdhbmltYXRpb25lbmQnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGVmZXIgYSB0YXNrIHRvIGV4ZWN1dGUgaXQgYXN5bmNocm9ub3VzbHkuIElkZWFsbHkgdGhpc1xuXHQgKiBzaG91bGQgYmUgZXhlY3V0ZWQgYXMgYSBtaWNyb3Rhc2ssIHNvIHdlIGxldmVyYWdlXG5cdCAqIE11dGF0aW9uT2JzZXJ2ZXIgaWYgaXQncyBhdmFpbGFibGUsIGFuZCBmYWxsYmFjayB0b1xuXHQgKiBzZXRUaW1lb3V0KDApLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKiBAcGFyYW0ge09iamVjdH0gY3R4XG5cdCAqL1xuXHRcblx0dmFyIG5leHRUaWNrID0gKGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgY2FsbGJhY2tzID0gW107XG5cdCAgdmFyIHBlbmRpbmcgPSBmYWxzZTtcblx0ICB2YXIgdGltZXJGdW5jO1xuXHQgIGZ1bmN0aW9uIG5leHRUaWNrSGFuZGxlcigpIHtcblx0ICAgIHBlbmRpbmcgPSBmYWxzZTtcblx0ICAgIHZhciBjb3BpZXMgPSBjYWxsYmFja3Muc2xpY2UoMCk7XG5cdCAgICBjYWxsYmFja3MgPSBbXTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29waWVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGNvcGllc1tpXSgpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyICE9PSAndW5kZWZpbmVkJyAmJiAhaGFzTXV0YXRpb25PYnNlcnZlckJ1Zykge1xuXHQgICAgdmFyIGNvdW50ZXIgPSAxO1xuXHQgICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobmV4dFRpY2tIYW5kbGVyKTtcblx0ICAgIHZhciB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNvdW50ZXIpO1xuXHQgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0ZXh0Tm9kZSwge1xuXHQgICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlXG5cdCAgICB9KTtcblx0ICAgIHRpbWVyRnVuYyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgY291bnRlciA9IChjb3VudGVyICsgMSkgJSAyO1xuXHQgICAgICB0ZXh0Tm9kZS5kYXRhID0gY291bnRlcjtcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIHdlYnBhY2sgYXR0ZW1wdHMgdG8gaW5qZWN0IGEgc2hpbSBmb3Igc2V0SW1tZWRpYXRlXG5cdCAgICAvLyBpZiBpdCBpcyB1c2VkIGFzIGEgZ2xvYmFsLCBzbyB3ZSBoYXZlIHRvIHdvcmsgYXJvdW5kIHRoYXQgdG9cblx0ICAgIC8vIGF2b2lkIGJ1bmRsaW5nIHVubmVjZXNzYXJ5IGNvZGUuXG5cdCAgICB2YXIgY29udGV4dCA9IGluQnJvd3NlciA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDoge307XG5cdCAgICB0aW1lckZ1bmMgPSBjb250ZXh0LnNldEltbWVkaWF0ZSB8fCBzZXRUaW1lb3V0O1xuXHQgIH1cblx0ICByZXR1cm4gZnVuY3Rpb24gKGNiLCBjdHgpIHtcblx0ICAgIHZhciBmdW5jID0gY3R4ID8gZnVuY3Rpb24gKCkge1xuXHQgICAgICBjYi5jYWxsKGN0eCk7XG5cdCAgICB9IDogY2I7XG5cdCAgICBjYWxsYmFja3MucHVzaChmdW5jKTtcblx0ICAgIGlmIChwZW5kaW5nKSByZXR1cm47XG5cdCAgICBwZW5kaW5nID0gdHJ1ZTtcblx0ICAgIHRpbWVyRnVuYyhuZXh0VGlja0hhbmRsZXIsIDApO1xuXHQgIH07XG5cdH0pKCk7XG5cdFxuXHR2YXIgX1NldCA9IHVuZGVmaW5lZDtcblx0LyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdGlmICh0eXBlb2YgU2V0ICE9PSAndW5kZWZpbmVkJyAmJiBTZXQudG9TdHJpbmcoKS5tYXRjaCgvbmF0aXZlIGNvZGUvKSkge1xuXHQgIC8vIHVzZSBuYXRpdmUgU2V0IHdoZW4gYXZhaWxhYmxlLlxuXHQgIF9TZXQgPSBTZXQ7XG5cdH0gZWxzZSB7XG5cdCAgLy8gYSBub24tc3RhbmRhcmQgU2V0IHBvbHlmaWxsIHRoYXQgb25seSB3b3JrcyB3aXRoIHByaW1pdGl2ZSBrZXlzLlxuXHQgIF9TZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgfTtcblx0ICBfU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICByZXR1cm4gdGhpcy5zZXRba2V5XSAhPT0gdW5kZWZpbmVkO1xuXHQgIH07XG5cdCAgX1NldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgdGhpcy5zZXRba2V5XSA9IDE7XG5cdCAgfTtcblx0ICBfU2V0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuc2V0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBDYWNoZShsaW1pdCkge1xuXHQgIHRoaXMuc2l6ZSA9IDA7XG5cdCAgdGhpcy5saW1pdCA9IGxpbWl0O1xuXHQgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IHVuZGVmaW5lZDtcblx0ICB0aGlzLl9rZXltYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHR9XG5cdFxuXHR2YXIgcCA9IENhY2hlLnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBQdXQgPHZhbHVlPiBpbnRvIHRoZSBjYWNoZSBhc3NvY2lhdGVkIHdpdGggPGtleT4uXG5cdCAqIFJldHVybnMgdGhlIGVudHJ5IHdoaWNoIHdhcyByZW1vdmVkIHRvIG1ha2Ugcm9vbSBmb3Jcblx0ICogdGhlIG5ldyBlbnRyeS4gT3RoZXJ3aXNlIHVuZGVmaW5lZCBpcyByZXR1cm5lZC5cblx0ICogKGkuZS4gaWYgdGhlcmUgd2FzIGVub3VnaCByb29tIGFscmVhZHkpLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybiB7RW50cnl8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdHAucHV0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0ICB2YXIgcmVtb3ZlZDtcblx0XG5cdCAgdmFyIGVudHJ5ID0gdGhpcy5nZXQoa2V5LCB0cnVlKTtcblx0ICBpZiAoIWVudHJ5KSB7XG5cdCAgICBpZiAodGhpcy5zaXplID09PSB0aGlzLmxpbWl0KSB7XG5cdCAgICAgIHJlbW92ZWQgPSB0aGlzLnNoaWZ0KCk7XG5cdCAgICB9XG5cdCAgICBlbnRyeSA9IHtcblx0ICAgICAga2V5OiBrZXlcblx0ICAgIH07XG5cdCAgICB0aGlzLl9rZXltYXBba2V5XSA9IGVudHJ5O1xuXHQgICAgaWYgKHRoaXMudGFpbCkge1xuXHQgICAgICB0aGlzLnRhaWwubmV3ZXIgPSBlbnRyeTtcblx0ICAgICAgZW50cnkub2xkZXIgPSB0aGlzLnRhaWw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmhlYWQgPSBlbnRyeTtcblx0ICAgIH1cblx0ICAgIHRoaXMudGFpbCA9IGVudHJ5O1xuXHQgICAgdGhpcy5zaXplKys7XG5cdCAgfVxuXHQgIGVudHJ5LnZhbHVlID0gdmFsdWU7XG5cdFxuXHQgIHJldHVybiByZW1vdmVkO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFB1cmdlIHRoZSBsZWFzdCByZWNlbnRseSB1c2VkIChvbGRlc3QpIGVudHJ5IGZyb20gdGhlXG5cdCAqIGNhY2hlLiBSZXR1cm5zIHRoZSByZW1vdmVkIGVudHJ5IG9yIHVuZGVmaW5lZCBpZiB0aGVcblx0ICogY2FjaGUgd2FzIGVtcHR5LlxuXHQgKi9cblx0XG5cdHAuc2hpZnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGVudHJ5ID0gdGhpcy5oZWFkO1xuXHQgIGlmIChlbnRyeSkge1xuXHQgICAgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5ld2VyO1xuXHQgICAgdGhpcy5oZWFkLm9sZGVyID0gdW5kZWZpbmVkO1xuXHQgICAgZW50cnkubmV3ZXIgPSBlbnRyeS5vbGRlciA9IHVuZGVmaW5lZDtcblx0ICAgIHRoaXMuX2tleW1hcFtlbnRyeS5rZXldID0gdW5kZWZpbmVkO1xuXHQgICAgdGhpcy5zaXplLS07XG5cdCAgfVxuXHQgIHJldHVybiBlbnRyeTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBHZXQgYW5kIHJlZ2lzdGVyIHJlY2VudCB1c2Ugb2YgPGtleT4uIFJldHVybnMgdGhlIHZhbHVlXG5cdCAqIGFzc29jaWF0ZWQgd2l0aCA8a2V5PiBvciB1bmRlZmluZWQgaWYgbm90IGluIGNhY2hlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gcmV0dXJuRW50cnlcblx0ICogQHJldHVybiB7RW50cnl8Kn1cblx0ICovXG5cdFxuXHRwLmdldCA9IGZ1bmN0aW9uIChrZXksIHJldHVybkVudHJ5KSB7XG5cdCAgdmFyIGVudHJ5ID0gdGhpcy5fa2V5bWFwW2tleV07XG5cdCAgaWYgKGVudHJ5ID09PSB1bmRlZmluZWQpIHJldHVybjtcblx0ICBpZiAoZW50cnkgPT09IHRoaXMudGFpbCkge1xuXHQgICAgcmV0dXJuIHJldHVybkVudHJ5ID8gZW50cnkgOiBlbnRyeS52YWx1ZTtcblx0ICB9XG5cdCAgLy8gSEVBRC0tLS0tLS0tLS0tLS0tVEFJTFxuXHQgIC8vICAgPC5vbGRlciAgIC5uZXdlcj5cblx0ICAvLyAgPC0tLSBhZGQgZGlyZWN0aW9uIC0tXG5cdCAgLy8gICBBICBCICBDICA8RD4gIEVcblx0ICBpZiAoZW50cnkubmV3ZXIpIHtcblx0ICAgIGlmIChlbnRyeSA9PT0gdGhpcy5oZWFkKSB7XG5cdCAgICAgIHRoaXMuaGVhZCA9IGVudHJ5Lm5ld2VyO1xuXHQgICAgfVxuXHQgICAgZW50cnkubmV3ZXIub2xkZXIgPSBlbnRyeS5vbGRlcjsgLy8gQyA8LS0gRS5cblx0ICB9XG5cdCAgaWYgKGVudHJ5Lm9sZGVyKSB7XG5cdCAgICBlbnRyeS5vbGRlci5uZXdlciA9IGVudHJ5Lm5ld2VyOyAvLyBDLiAtLT4gRVxuXHQgIH1cblx0ICBlbnRyeS5uZXdlciA9IHVuZGVmaW5lZDsgLy8gRCAtLXhcblx0ICBlbnRyeS5vbGRlciA9IHRoaXMudGFpbDsgLy8gRC4gLS0+IEVcblx0ICBpZiAodGhpcy50YWlsKSB7XG5cdCAgICB0aGlzLnRhaWwubmV3ZXIgPSBlbnRyeTsgLy8gRS4gPC0tIERcblx0ICB9XG5cdCAgdGhpcy50YWlsID0gZW50cnk7XG5cdCAgcmV0dXJuIHJldHVybkVudHJ5ID8gZW50cnkgOiBlbnRyeS52YWx1ZTtcblx0fTtcblx0XG5cdHZhciBjYWNoZSQxID0gbmV3IENhY2hlKDEwMDApO1xuXHR2YXIgZmlsdGVyVG9rZW5SRSA9IC9bXlxccydcIl0rfCdbXiddKid8XCJbXlwiXSpcIi9nO1xuXHR2YXIgcmVzZXJ2ZWRBcmdSRSA9IC9eaW4kfF4tP1xcZCsvO1xuXHRcblx0LyoqXG5cdCAqIFBhcnNlciBzdGF0ZVxuXHQgKi9cblx0XG5cdHZhciBzdHI7XG5cdHZhciBkaXI7XG5cdHZhciBjO1xuXHR2YXIgcHJldjtcblx0dmFyIGk7XG5cdHZhciBsO1xuXHR2YXIgbGFzdEZpbHRlckluZGV4O1xuXHR2YXIgaW5TaW5nbGU7XG5cdHZhciBpbkRvdWJsZTtcblx0dmFyIGN1cmx5O1xuXHR2YXIgc3F1YXJlO1xuXHR2YXIgcGFyZW47XG5cdC8qKlxuXHQgKiBQdXNoIGEgZmlsdGVyIHRvIHRoZSBjdXJyZW50IGRpcmVjdGl2ZSBvYmplY3Rcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwdXNoRmlsdGVyKCkge1xuXHQgIHZhciBleHAgPSBzdHIuc2xpY2UobGFzdEZpbHRlckluZGV4LCBpKS50cmltKCk7XG5cdCAgdmFyIGZpbHRlcjtcblx0ICBpZiAoZXhwKSB7XG5cdCAgICBmaWx0ZXIgPSB7fTtcblx0ICAgIHZhciB0b2tlbnMgPSBleHAubWF0Y2goZmlsdGVyVG9rZW5SRSk7XG5cdCAgICBmaWx0ZXIubmFtZSA9IHRva2Vuc1swXTtcblx0ICAgIGlmICh0b2tlbnMubGVuZ3RoID4gMSkge1xuXHQgICAgICBmaWx0ZXIuYXJncyA9IHRva2Vucy5zbGljZSgxKS5tYXAocHJvY2Vzc0ZpbHRlckFyZyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmIChmaWx0ZXIpIHtcblx0ICAgIChkaXIuZmlsdGVycyA9IGRpci5maWx0ZXJzIHx8IFtdKS5wdXNoKGZpbHRlcik7XG5cdCAgfVxuXHQgIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gYXJndW1lbnQgaXMgZHluYW1pYyBhbmQgc3RyaXAgcXVvdGVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gYXJnXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzRmlsdGVyQXJnKGFyZykge1xuXHQgIGlmIChyZXNlcnZlZEFyZ1JFLnRlc3QoYXJnKSkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgdmFsdWU6IHRvTnVtYmVyKGFyZyksXG5cdCAgICAgIGR5bmFtaWM6IGZhbHNlXG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgc3RyaXBwZWQgPSBzdHJpcFF1b3RlcyhhcmcpO1xuXHQgICAgdmFyIGR5bmFtaWMgPSBzdHJpcHBlZCA9PT0gYXJnO1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgdmFsdWU6IGR5bmFtaWMgPyBhcmcgOiBzdHJpcHBlZCxcblx0ICAgICAgZHluYW1pYzogZHluYW1pY1xuXHQgICAgfTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBhIGRpcmVjdGl2ZSB2YWx1ZSBhbmQgZXh0cmFjdCB0aGUgZXhwcmVzc2lvblxuXHQgKiBhbmQgaXRzIGZpbHRlcnMgaW50byBhIGRlc2NyaXB0b3IuXG5cdCAqXG5cdCAqIEV4YW1wbGU6XG5cdCAqXG5cdCAqIFwiYSArIDEgfCB1cHBlcmNhc2VcIiB3aWxsIHlpZWxkOlxuXHQgKiB7XG5cdCAqICAgZXhwcmVzc2lvbjogJ2EgKyAxJyxcblx0ICogICBmaWx0ZXJzOiBbXG5cdCAqICAgICB7IG5hbWU6ICd1cHBlcmNhc2UnLCBhcmdzOiBudWxsIH1cblx0ICogICBdXG5cdCAqIH1cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHNcblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlRGlyZWN0aXZlKHMpIHtcblx0ICB2YXIgaGl0ID0gY2FjaGUkMS5nZXQocyk7XG5cdCAgaWYgKGhpdCkge1xuXHQgICAgcmV0dXJuIGhpdDtcblx0ICB9XG5cdFxuXHQgIC8vIHJlc2V0IHBhcnNlciBzdGF0ZVxuXHQgIHN0ciA9IHM7XG5cdCAgaW5TaW5nbGUgPSBpbkRvdWJsZSA9IGZhbHNlO1xuXHQgIGN1cmx5ID0gc3F1YXJlID0gcGFyZW4gPSAwO1xuXHQgIGxhc3RGaWx0ZXJJbmRleCA9IDA7XG5cdCAgZGlyID0ge307XG5cdFxuXHQgIGZvciAoaSA9IDAsIGwgPSBzdHIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBwcmV2ID0gYztcblx0ICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcblx0ICAgIGlmIChpblNpbmdsZSkge1xuXHQgICAgICAvLyBjaGVjayBzaW5nbGUgcXVvdGVcblx0ICAgICAgaWYgKGMgPT09IDB4MjcgJiYgcHJldiAhPT0gMHg1QykgaW5TaW5nbGUgPSAhaW5TaW5nbGU7XG5cdCAgICB9IGVsc2UgaWYgKGluRG91YmxlKSB7XG5cdCAgICAgIC8vIGNoZWNrIGRvdWJsZSBxdW90ZVxuXHQgICAgICBpZiAoYyA9PT0gMHgyMiAmJiBwcmV2ICE9PSAweDVDKSBpbkRvdWJsZSA9ICFpbkRvdWJsZTtcblx0ICAgIH0gZWxzZSBpZiAoYyA9PT0gMHg3QyAmJiAvLyBwaXBlXG5cdCAgICBzdHIuY2hhckNvZGVBdChpICsgMSkgIT09IDB4N0MgJiYgc3RyLmNoYXJDb2RlQXQoaSAtIDEpICE9PSAweDdDKSB7XG5cdCAgICAgIGlmIChkaXIuZXhwcmVzc2lvbiA9PSBudWxsKSB7XG5cdCAgICAgICAgLy8gZmlyc3QgZmlsdGVyLCBlbmQgb2YgZXhwcmVzc2lvblxuXHQgICAgICAgIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxO1xuXHQgICAgICAgIGRpci5leHByZXNzaW9uID0gc3RyLnNsaWNlKDAsIGkpLnRyaW0oKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBhbHJlYWR5IGhhcyBmaWx0ZXJcblx0ICAgICAgICBwdXNoRmlsdGVyKCk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN3aXRjaCAoYykge1xuXHQgICAgICAgIGNhc2UgMHgyMjpcblx0ICAgICAgICAgIGluRG91YmxlID0gdHJ1ZTticmVhazsgLy8gXCJcblx0ICAgICAgICBjYXNlIDB4Mjc6XG5cdCAgICAgICAgICBpblNpbmdsZSA9IHRydWU7YnJlYWs7IC8vICdcblx0ICAgICAgICBjYXNlIDB4Mjg6XG5cdCAgICAgICAgICBwYXJlbisrO2JyZWFrOyAvLyAoXG5cdCAgICAgICAgY2FzZSAweDI5OlxuXHQgICAgICAgICAgcGFyZW4tLTticmVhazsgLy8gKVxuXHQgICAgICAgIGNhc2UgMHg1Qjpcblx0ICAgICAgICAgIHNxdWFyZSsrO2JyZWFrOyAvLyBbXG5cdCAgICAgICAgY2FzZSAweDVEOlxuXHQgICAgICAgICAgc3F1YXJlLS07YnJlYWs7IC8vIF1cblx0ICAgICAgICBjYXNlIDB4N0I6XG5cdCAgICAgICAgICBjdXJseSsrO2JyZWFrOyAvLyB7XG5cdCAgICAgICAgY2FzZSAweDdEOlxuXHQgICAgICAgICAgY3VybHktLTticmVhazsgLy8gfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpZiAoZGlyLmV4cHJlc3Npb24gPT0gbnVsbCkge1xuXHQgICAgZGlyLmV4cHJlc3Npb24gPSBzdHIuc2xpY2UoMCwgaSkudHJpbSgpO1xuXHQgIH0gZWxzZSBpZiAobGFzdEZpbHRlckluZGV4ICE9PSAwKSB7XG5cdCAgICBwdXNoRmlsdGVyKCk7XG5cdCAgfVxuXHRcblx0ICBjYWNoZSQxLnB1dChzLCBkaXIpO1xuXHQgIHJldHVybiBkaXI7XG5cdH1cblx0XG5cdHZhciBkaXJlY3RpdmUgPSBPYmplY3QuZnJlZXplKHtcblx0ICBwYXJzZURpcmVjdGl2ZTogcGFyc2VEaXJlY3RpdmVcblx0fSk7XG5cdFxuXHR2YXIgcmVnZXhFc2NhcGVSRSA9IC9bLS4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2c7XG5cdHZhciBjYWNoZSA9IHVuZGVmaW5lZDtcblx0dmFyIHRhZ1JFID0gdW5kZWZpbmVkO1xuXHR2YXIgaHRtbFJFID0gdW5kZWZpbmVkO1xuXHQvKipcblx0ICogRXNjYXBlIGEgc3RyaW5nIHNvIGl0IGNhbiBiZSB1c2VkIGluIGEgUmVnRXhwXG5cdCAqIGNvbnN0cnVjdG9yLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZXNjYXBlUmVnZXgoc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXFxcJCYnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY29tcGlsZVJlZ2V4KCkge1xuXHQgIHZhciBvcGVuID0gZXNjYXBlUmVnZXgoY29uZmlnLmRlbGltaXRlcnNbMF0pO1xuXHQgIHZhciBjbG9zZSA9IGVzY2FwZVJlZ2V4KGNvbmZpZy5kZWxpbWl0ZXJzWzFdKTtcblx0ICB2YXIgdW5zYWZlT3BlbiA9IGVzY2FwZVJlZ2V4KGNvbmZpZy51bnNhZmVEZWxpbWl0ZXJzWzBdKTtcblx0ICB2YXIgdW5zYWZlQ2xvc2UgPSBlc2NhcGVSZWdleChjb25maWcudW5zYWZlRGVsaW1pdGVyc1sxXSk7XG5cdCAgdGFnUkUgPSBuZXcgUmVnRXhwKHVuc2FmZU9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIHVuc2FmZUNsb3NlICsgJ3wnICsgb3BlbiArICcoKD86LnxcXFxcbikrPyknICsgY2xvc2UsICdnJyk7XG5cdCAgaHRtbFJFID0gbmV3IFJlZ0V4cCgnXicgKyB1bnNhZmVPcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyB1bnNhZmVDbG9zZSArICckJyk7XG5cdCAgLy8gcmVzZXQgY2FjaGVcblx0ICBjYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhcnNlIGEgdGVtcGxhdGUgdGV4dCBzdHJpbmcgaW50byBhbiBhcnJheSBvZiB0b2tlbnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG5cdCAqIEByZXR1cm4ge0FycmF5PE9iamVjdD4gfCBudWxsfVxuXHQgKiAgICAgICAgICAgICAgIC0ge1N0cmluZ30gdHlwZVxuXHQgKiAgICAgICAgICAgICAgIC0ge1N0cmluZ30gdmFsdWVcblx0ICogICAgICAgICAgICAgICAtIHtCb29sZWFufSBbaHRtbF1cblx0ICogICAgICAgICAgICAgICAtIHtCb29sZWFufSBbb25lVGltZV1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZVRleHQodGV4dCkge1xuXHQgIGlmICghY2FjaGUpIHtcblx0ICAgIGNvbXBpbGVSZWdleCgpO1xuXHQgIH1cblx0ICB2YXIgaGl0ID0gY2FjaGUuZ2V0KHRleHQpO1xuXHQgIGlmIChoaXQpIHtcblx0ICAgIHJldHVybiBoaXQ7XG5cdCAgfVxuXHQgIGlmICghdGFnUkUudGVzdCh0ZXh0KSkge1xuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHQgIHZhciB0b2tlbnMgPSBbXTtcblx0ICB2YXIgbGFzdEluZGV4ID0gdGFnUkUubGFzdEluZGV4ID0gMDtcblx0ICB2YXIgbWF0Y2gsIGluZGV4LCBodG1sLCB2YWx1ZSwgZmlyc3QsIG9uZVRpbWU7XG5cdCAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICB3aGlsZSAobWF0Y2ggPSB0YWdSRS5leGVjKHRleHQpKSB7XG5cdCAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICBpbmRleCA9IG1hdGNoLmluZGV4O1xuXHQgICAgLy8gcHVzaCB0ZXh0IHRva2VuXG5cdCAgICBpZiAoaW5kZXggPiBsYXN0SW5kZXgpIHtcblx0ICAgICAgdG9rZW5zLnB1c2goe1xuXHQgICAgICAgIHZhbHVlOiB0ZXh0LnNsaWNlKGxhc3RJbmRleCwgaW5kZXgpXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgICAgLy8gdGFnIHRva2VuXG5cdCAgICBodG1sID0gaHRtbFJFLnRlc3QobWF0Y2hbMF0pO1xuXHQgICAgdmFsdWUgPSBodG1sID8gbWF0Y2hbMV0gOiBtYXRjaFsyXTtcblx0ICAgIGZpcnN0ID0gdmFsdWUuY2hhckNvZGVBdCgwKTtcblx0ICAgIG9uZVRpbWUgPSBmaXJzdCA9PT0gNDI7IC8vICpcblx0ICAgIHZhbHVlID0gb25lVGltZSA/IHZhbHVlLnNsaWNlKDEpIDogdmFsdWU7XG5cdCAgICB0b2tlbnMucHVzaCh7XG5cdCAgICAgIHRhZzogdHJ1ZSxcblx0ICAgICAgdmFsdWU6IHZhbHVlLnRyaW0oKSxcblx0ICAgICAgaHRtbDogaHRtbCxcblx0ICAgICAgb25lVGltZTogb25lVGltZVxuXHQgICAgfSk7XG5cdCAgICBsYXN0SW5kZXggPSBpbmRleCArIG1hdGNoWzBdLmxlbmd0aDtcblx0ICB9XG5cdCAgaWYgKGxhc3RJbmRleCA8IHRleHQubGVuZ3RoKSB7XG5cdCAgICB0b2tlbnMucHVzaCh7XG5cdCAgICAgIHZhbHVlOiB0ZXh0LnNsaWNlKGxhc3RJbmRleClcblx0ICAgIH0pO1xuXHQgIH1cblx0ICBjYWNoZS5wdXQodGV4dCwgdG9rZW5zKTtcblx0ICByZXR1cm4gdG9rZW5zO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9ybWF0IGEgbGlzdCBvZiB0b2tlbnMgaW50byBhbiBleHByZXNzaW9uLlxuXHQgKiBlLmcuIHRva2VucyBwYXJzZWQgZnJvbSAnYSB7e2J9fSBjJyBjYW4gYmUgc2VyaWFsaXplZFxuXHQgKiBpbnRvIG9uZSBzaW5nbGUgZXhwcmVzc2lvbiBhcyAnXCJhIFwiICsgYiArIFwiIGNcIicuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xuXHQgKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdG9rZW5zVG9FeHAodG9rZW5zLCB2bSkge1xuXHQgIGlmICh0b2tlbnMubGVuZ3RoID4gMSkge1xuXHQgICAgcmV0dXJuIHRva2Vucy5tYXAoZnVuY3Rpb24gKHRva2VuKSB7XG5cdCAgICAgIHJldHVybiBmb3JtYXRUb2tlbih0b2tlbiwgdm0pO1xuXHQgICAgfSkuam9pbignKycpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gZm9ybWF0VG9rZW4odG9rZW5zWzBdLCB2bSwgdHJ1ZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRm9ybWF0IGEgc2luZ2xlIHRva2VuLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdG9rZW5cblx0ICogQHBhcmFtIHtWdWV9IFt2bV1cblx0ICogQHBhcmFtIHtCb29sZWFufSBbc2luZ2xlXVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZm9ybWF0VG9rZW4odG9rZW4sIHZtLCBzaW5nbGUpIHtcblx0ICByZXR1cm4gdG9rZW4udGFnID8gdG9rZW4ub25lVGltZSAmJiB2bSA/ICdcIicgKyB2bS4kZXZhbCh0b2tlbi52YWx1ZSkgKyAnXCInIDogaW5saW5lRmlsdGVycyh0b2tlbi52YWx1ZSwgc2luZ2xlKSA6ICdcIicgKyB0b2tlbi52YWx1ZSArICdcIic7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3IgYW4gYXR0cmlidXRlIHdpdGggbXVsdGlwbGUgaW50ZXJwb2xhdGlvbiB0YWdzLFxuXHQgKiBlLmcuIGF0dHI9XCJzb21lLXt7dGhpbmcgfCBmaWx0ZXJ9fVwiLCBpbiBvcmRlciB0byBjb21iaW5lXG5cdCAqIHRoZSB3aG9sZSB0aGluZyBpbnRvIGEgc2luZ2xlIHdhdGNoYWJsZSBleHByZXNzaW9uLCB3ZVxuXHQgKiBoYXZlIHRvIGlubGluZSB0aG9zZSBmaWx0ZXJzLiBUaGlzIGZ1bmN0aW9uIGRvZXMgZXhhY3RseVxuXHQgKiB0aGF0LiBUaGlzIGlzIGEgYml0IGhhY2t5IGJ1dCBpdCBhdm9pZHMgaGVhdnkgY2hhbmdlc1xuXHQgKiB0byBkaXJlY3RpdmUgcGFyc2VyIGFuZCB3YXRjaGVyIG1lY2hhbmlzbS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHNpbmdsZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0dmFyIGZpbHRlclJFID0gL1tefF1cXHxbXnxdLztcblx0ZnVuY3Rpb24gaW5saW5lRmlsdGVycyhleHAsIHNpbmdsZSkge1xuXHQgIGlmICghZmlsdGVyUkUudGVzdChleHApKSB7XG5cdCAgICByZXR1cm4gc2luZ2xlID8gZXhwIDogJygnICsgZXhwICsgJyknO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgZGlyID0gcGFyc2VEaXJlY3RpdmUoZXhwKTtcblx0ICAgIGlmICghZGlyLmZpbHRlcnMpIHtcblx0ICAgICAgcmV0dXJuICcoJyArIGV4cCArICcpJztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAndGhpcy5fYXBwbHlGaWx0ZXJzKCcgKyBkaXIuZXhwcmVzc2lvbiArIC8vIHZhbHVlXG5cdCAgICAgICcsbnVsbCwnICsgLy8gb2xkVmFsdWUgKG51bGwgZm9yIHJlYWQpXG5cdCAgICAgIEpTT04uc3RyaW5naWZ5KGRpci5maWx0ZXJzKSArIC8vIGZpbHRlciBkZXNjcmlwdG9yc1xuXHQgICAgICAnLGZhbHNlKSc7IC8vIHdyaXRlP1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIHRleHQgPSBPYmplY3QuZnJlZXplKHtcblx0ICBjb21waWxlUmVnZXg6IGNvbXBpbGVSZWdleCxcblx0ICBwYXJzZVRleHQ6IHBhcnNlVGV4dCxcblx0ICB0b2tlbnNUb0V4cDogdG9rZW5zVG9FeHBcblx0fSk7XG5cdFxuXHR2YXIgZGVsaW1pdGVycyA9IFsne3snLCAnfX0nXTtcblx0dmFyIHVuc2FmZURlbGltaXRlcnMgPSBbJ3t7eycsICd9fX0nXTtcblx0XG5cdHZhciBjb25maWcgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7XG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gcHJpbnQgZGVidWcgbWVzc2FnZXMuXG5cdCAgICogQWxzbyBlbmFibGVzIHN0YWNrIHRyYWNlIGZvciB3YXJuaW5ncy5cblx0ICAgKlxuXHQgICAqIEB0eXBlIHtCb29sZWFufVxuXHQgICAqL1xuXHRcblx0ICBkZWJ1ZzogZmFsc2UsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gc3VwcHJlc3Mgd2FybmluZ3MuXG5cdCAgICpcblx0ICAgKiBAdHlwZSB7Qm9vbGVhbn1cblx0ICAgKi9cblx0XG5cdCAgc2lsZW50OiBmYWxzZSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hldGhlciB0byB1c2UgYXN5bmMgcmVuZGVyaW5nLlxuXHQgICAqL1xuXHRcblx0ICBhc3luYzogdHJ1ZSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hldGhlciB0byB3YXJuIGFnYWluc3QgZXJyb3JzIGNhdWdodCB3aGVuIGV2YWx1YXRpbmdcblx0ICAgKiBleHByZXNzaW9ucy5cblx0ICAgKi9cblx0XG5cdCAgd2FybkV4cHJlc3Npb25FcnJvcnM6IHRydWUsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gYWxsb3cgZGV2dG9vbHMgaW5zcGVjdGlvbi5cblx0ICAgKiBEaXNhYmxlZCBieSBkZWZhdWx0IGluIHByb2R1Y3Rpb24gYnVpbGRzLlxuXHQgICAqL1xuXHRcblx0ICBkZXZ0b29sczogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyxcblx0XG5cdCAgLyoqXG5cdCAgICogSW50ZXJuYWwgZmxhZyB0byBpbmRpY2F0ZSB0aGUgZGVsaW1pdGVycyBoYXZlIGJlZW5cblx0ICAgKiBjaGFuZ2VkLlxuXHQgICAqXG5cdCAgICogQHR5cGUge0Jvb2xlYW59XG5cdCAgICovXG5cdFxuXHQgIF9kZWxpbWl0ZXJzQ2hhbmdlZDogdHJ1ZSxcblx0XG5cdCAgLyoqXG5cdCAgICogTGlzdCBvZiBhc3NldCB0eXBlcyB0aGF0IGEgY29tcG9uZW50IGNhbiBvd24uXG5cdCAgICpcblx0ICAgKiBAdHlwZSB7QXJyYXl9XG5cdCAgICovXG5cdFxuXHQgIF9hc3NldFR5cGVzOiBbJ2NvbXBvbmVudCcsICdkaXJlY3RpdmUnLCAnZWxlbWVudERpcmVjdGl2ZScsICdmaWx0ZXInLCAndHJhbnNpdGlvbicsICdwYXJ0aWFsJ10sXG5cdFxuXHQgIC8qKlxuXHQgICAqIHByb3AgYmluZGluZyBtb2Rlc1xuXHQgICAqL1xuXHRcblx0ICBfcHJvcEJpbmRpbmdNb2Rlczoge1xuXHQgICAgT05FX1dBWTogMCxcblx0ICAgIFRXT19XQVk6IDEsXG5cdCAgICBPTkVfVElNRTogMlxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIE1heCBjaXJjdWxhciB1cGRhdGVzIGFsbG93ZWQgaW4gYSBiYXRjaGVyIGZsdXNoIGN5Y2xlLlxuXHQgICAqL1xuXHRcblx0ICBfbWF4VXBkYXRlQ291bnQ6IDEwMFxuXHRcblx0fSwge1xuXHQgIGRlbGltaXRlcnM6IHsgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbnRlcnBvbGF0aW9uIGRlbGltaXRlcnMuIENoYW5naW5nIHRoZXNlIHdvdWxkIHRyaWdnZXJcblx0ICAgICAgICAgICAgICAgICAqIHRoZSB0ZXh0IHBhcnNlciB0byByZS1jb21waWxlIHRoZSByZWd1bGFyIGV4cHJlc3Npb25zLlxuXHQgICAgICAgICAgICAgICAgICpcblx0ICAgICAgICAgICAgICAgICAqIEB0eXBlIHtBcnJheTxTdHJpbmc+fVxuXHQgICAgICAgICAgICAgICAgICovXG5cdFxuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIHJldHVybiBkZWxpbWl0ZXJzO1xuXHQgICAgfSxcblx0ICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuXHQgICAgICBkZWxpbWl0ZXJzID0gdmFsO1xuXHQgICAgICBjb21waWxlUmVnZXgoKTtcblx0ICAgIH0sXG5cdCAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICBlbnVtZXJhYmxlOiB0cnVlXG5cdCAgfSxcblx0ICB1bnNhZmVEZWxpbWl0ZXJzOiB7XG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgcmV0dXJuIHVuc2FmZURlbGltaXRlcnM7XG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7XG5cdCAgICAgIHVuc2FmZURlbGltaXRlcnMgPSB2YWw7XG5cdCAgICAgIGNvbXBpbGVSZWdleCgpO1xuXHQgICAgfSxcblx0ICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0ICAgIGVudW1lcmFibGU6IHRydWVcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIHdhcm4gPSB1bmRlZmluZWQ7XG5cdHZhciBmb3JtYXRDb21wb25lbnROYW1lID0gdW5kZWZpbmVkO1xuXHRcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAoZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGhhc0NvbnNvbGUgPSB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCc7XG5cdFxuXHQgICAgd2FybiA9IGZ1bmN0aW9uIChtc2csIHZtKSB7XG5cdCAgICAgIGlmIChoYXNDb25zb2xlICYmICFjb25maWcuc2lsZW50KSB7XG5cdCAgICAgICAgY29uc29sZS5lcnJvcignW1Z1ZSB3YXJuXTogJyArIG1zZyArICh2bSA/IGZvcm1hdENvbXBvbmVudE5hbWUodm0pIDogJycpKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBmb3JtYXRDb21wb25lbnROYW1lID0gZnVuY3Rpb24gKHZtKSB7XG5cdCAgICAgIHZhciBuYW1lID0gdm0uX2lzVnVlID8gdm0uJG9wdGlvbnMubmFtZSA6IHZtLm5hbWU7XG5cdCAgICAgIHJldHVybiBuYW1lID8gJyAoZm91bmQgaW4gY29tcG9uZW50OiA8JyArIGh5cGhlbmF0ZShuYW1lKSArICc+KScgOiAnJztcblx0ICAgIH07XG5cdCAgfSkoKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFwcGVuZCB3aXRoIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhcHBlbmRXaXRoVHJhbnNpdGlvbihlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcblx0ICBhcHBseVRyYW5zaXRpb24oZWwsIDEsIGZ1bmN0aW9uICgpIHtcblx0ICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfSwgdm0sIGNiKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEluc2VydEJlZm9yZSB3aXRoIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBiZWZvcmVXaXRoVHJhbnNpdGlvbihlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcblx0ICBhcHBseVRyYW5zaXRpb24oZWwsIDEsIGZ1bmN0aW9uICgpIHtcblx0ICAgIGJlZm9yZShlbCwgdGFyZ2V0KTtcblx0ICB9LCB2bSwgY2IpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIHdpdGggdHJhbnNpdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZVdpdGhUcmFuc2l0aW9uKGVsLCB2bSwgY2IpIHtcblx0ICBhcHBseVRyYW5zaXRpb24oZWwsIC0xLCBmdW5jdGlvbiAoKSB7XG5cdCAgICByZW1vdmUoZWwpO1xuXHQgIH0sIHZtLCBjYik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBcHBseSB0cmFuc2l0aW9ucyB3aXRoIGFuIG9wZXJhdGlvbiBjYWxsYmFjay5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge051bWJlcn0gZGlyZWN0aW9uXG5cdCAqICAgICAgICAgICAgICAgICAgMTogZW50ZXJcblx0ICogICAgICAgICAgICAgICAgIC0xOiBsZWF2ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIHRoZSBhY3R1YWwgRE9NIG9wZXJhdGlvblxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFwcGx5VHJhbnNpdGlvbihlbCwgZGlyZWN0aW9uLCBvcCwgdm0sIGNiKSB7XG5cdCAgdmFyIHRyYW5zaXRpb24gPSBlbC5fX3ZfdHJhbnM7XG5cdCAgaWYgKCF0cmFuc2l0aW9uIHx8XG5cdCAgLy8gc2tpcCBpZiB0aGVyZSBhcmUgbm8ganMgaG9va3MgYW5kIENTUyB0cmFuc2l0aW9uIGlzXG5cdCAgLy8gbm90IHN1cHBvcnRlZFxuXHQgICF0cmFuc2l0aW9uLmhvb2tzICYmICF0cmFuc2l0aW9uRW5kRXZlbnQgfHxcblx0ICAvLyBza2lwIHRyYW5zaXRpb25zIGZvciBpbml0aWFsIGNvbXBpbGVcblx0ICAhdm0uX2lzQ29tcGlsZWQgfHxcblx0ICAvLyBpZiB0aGUgdm0gaXMgYmVpbmcgbWFuaXB1bGF0ZWQgYnkgYSBwYXJlbnQgZGlyZWN0aXZlXG5cdCAgLy8gZHVyaW5nIHRoZSBwYXJlbnQncyBjb21waWxhdGlvbiBwaGFzZSwgc2tpcCB0aGVcblx0ICAvLyBhbmltYXRpb24uXG5cdCAgdm0uJHBhcmVudCAmJiAhdm0uJHBhcmVudC5faXNDb21waWxlZCkge1xuXHQgICAgb3AoKTtcblx0ICAgIGlmIChjYikgY2IoKTtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIGFjdGlvbiA9IGRpcmVjdGlvbiA+IDAgPyAnZW50ZXInIDogJ2xlYXZlJztcblx0ICB0cmFuc2l0aW9uW2FjdGlvbl0ob3AsIGNiKTtcblx0fVxuXHRcblx0dmFyIHRyYW5zaXRpb24gPSBPYmplY3QuZnJlZXplKHtcblx0ICBhcHBlbmRXaXRoVHJhbnNpdGlvbjogYXBwZW5kV2l0aFRyYW5zaXRpb24sXG5cdCAgYmVmb3JlV2l0aFRyYW5zaXRpb246IGJlZm9yZVdpdGhUcmFuc2l0aW9uLFxuXHQgIHJlbW92ZVdpdGhUcmFuc2l0aW9uOiByZW1vdmVXaXRoVHJhbnNpdGlvbixcblx0ICBhcHBseVRyYW5zaXRpb246IGFwcGx5VHJhbnNpdGlvblxuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBRdWVyeSBhbiBlbGVtZW50IHNlbGVjdG9yIGlmIGl0J3Mgbm90IGFuIGVsZW1lbnQgYWxyZWFkeS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gZWxcblx0ICogQHJldHVybiB7RWxlbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBxdWVyeShlbCkge1xuXHQgIGlmICh0eXBlb2YgZWwgPT09ICdzdHJpbmcnKSB7XG5cdCAgICB2YXIgc2VsZWN0b3IgPSBlbDtcblx0ICAgIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCk7XG5cdCAgICBpZiAoIWVsKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQ2Fubm90IGZpbmQgZWxlbWVudDogJyArIHNlbGVjdG9yKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGVsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYSBub2RlIGlzIGluIHRoZSBkb2N1bWVudC5cblx0ICogTm90ZTogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zIHNob3VsZCB3b3JrIGhlcmVcblx0ICogYnV0IGFsd2F5cyByZXR1cm5zIGZhbHNlIGZvciBjb21tZW50IG5vZGVzIGluIHBoYW50b21qcyxcblx0ICogbWFraW5nIHVuaXQgdGVzdHMgZGlmZmljdWx0LiBUaGlzIGlzIGZpeGVkIGJ5IGRvaW5nIHRoZVxuXHQgKiBjb250YWlucygpIGNoZWNrIG9uIHRoZSBub2RlJ3MgcGFyZW50Tm9kZSBpbnN0ZWFkIG9mXG5cdCAqIHRoZSBub2RlIGl0c2VsZi5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaW5Eb2Mobm9kZSkge1xuXHQgIGlmICghbm9kZSkgcmV0dXJuIGZhbHNlO1xuXHQgIHZhciBkb2MgPSBub2RlLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXHQgIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG5cdCAgcmV0dXJuIGRvYyA9PT0gbm9kZSB8fCBkb2MgPT09IHBhcmVudCB8fCAhIShwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlID09PSAxICYmIGRvYy5jb250YWlucyhwYXJlbnQpKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCBhbmQgcmVtb3ZlIGFuIGF0dHJpYnV0ZSBmcm9tIGEgbm9kZS5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBfYXR0clxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldEF0dHIobm9kZSwgX2F0dHIpIHtcblx0ICB2YXIgdmFsID0gbm9kZS5nZXRBdHRyaWJ1dGUoX2F0dHIpO1xuXHQgIGlmICh2YWwgIT09IG51bGwpIHtcblx0ICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKF9hdHRyKTtcblx0ICB9XG5cdCAgcmV0dXJuIHZhbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCBhbiBhdHRyaWJ1dGUgd2l0aCBjb2xvbiBvciB2LWJpbmQ6IHByZWZpeC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCAqIEByZXR1cm4ge1N0cmluZ3xudWxsfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldEJpbmRBdHRyKG5vZGUsIG5hbWUpIHtcblx0ICB2YXIgdmFsID0gZ2V0QXR0cihub2RlLCAnOicgKyBuYW1lKTtcblx0ICBpZiAodmFsID09PSBudWxsKSB7XG5cdCAgICB2YWwgPSBnZXRBdHRyKG5vZGUsICd2LWJpbmQ6JyArIG5hbWUpO1xuXHQgIH1cblx0ICByZXR1cm4gdmFsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgdGhlIHByZXNlbmNlIG9mIGEgYmluZCBhdHRyaWJ1dGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGhhc0JpbmRBdHRyKG5vZGUsIG5hbWUpIHtcblx0ICByZXR1cm4gbm9kZS5oYXNBdHRyaWJ1dGUobmFtZSkgfHwgbm9kZS5oYXNBdHRyaWJ1dGUoJzonICsgbmFtZSkgfHwgbm9kZS5oYXNBdHRyaWJ1dGUoJ3YtYmluZDonICsgbmFtZSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbnNlcnQgZWwgYmVmb3JlIHRhcmdldFxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYmVmb3JlKGVsLCB0YXJnZXQpIHtcblx0ICB0YXJnZXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWwsIHRhcmdldCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbnNlcnQgZWwgYWZ0ZXIgdGFyZ2V0XG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhZnRlcihlbCwgdGFyZ2V0KSB7XG5cdCAgaWYgKHRhcmdldC5uZXh0U2libGluZykge1xuXHQgICAgYmVmb3JlKGVsLCB0YXJnZXQubmV4dFNpYmxpbmcpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0YXJnZXQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGVsIGZyb20gRE9NXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZW1vdmUoZWwpIHtcblx0ICBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByZXBlbmQgZWwgdG8gdGFyZ2V0XG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcmVwZW5kKGVsLCB0YXJnZXQpIHtcblx0ICBpZiAodGFyZ2V0LmZpcnN0Q2hpbGQpIHtcblx0ICAgIGJlZm9yZShlbCwgdGFyZ2V0LmZpcnN0Q2hpbGQpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlcGxhY2UgdGFyZ2V0IHdpdGggZWxcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlcGxhY2UodGFyZ2V0LCBlbCkge1xuXHQgIHZhciBwYXJlbnQgPSB0YXJnZXQucGFyZW50Tm9kZTtcblx0ICBpZiAocGFyZW50KSB7XG5cdCAgICBwYXJlbnQucmVwbGFjZUNoaWxkKGVsLCB0YXJnZXQpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEFkZCBldmVudCBsaXN0ZW5lciBzaG9ydGhhbmQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW3VzZUNhcHR1cmVdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gb24oZWwsIGV2ZW50LCBjYiwgdXNlQ2FwdHVyZSkge1xuXHQgIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNiLCB1c2VDYXB0dXJlKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBldmVudCBsaXN0ZW5lciBzaG9ydGhhbmQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gb2ZmKGVsLCBldmVudCwgY2IpIHtcblx0ICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBjYik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3IgSUU5IGNvbXBhdDogd2hlbiBib3RoIGNsYXNzIGFuZCA6Y2xhc3MgYXJlIHByZXNlbnRcblx0ICogZ2V0QXR0cmlidXRlKCdjbGFzcycpIHJldHVybnMgd3JvbmcgdmFsdWUuLi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0Q2xhc3MoZWwpIHtcblx0ICB2YXIgY2xhc3NuYW1lID0gZWwuY2xhc3NOYW1lO1xuXHQgIGlmICh0eXBlb2YgY2xhc3NuYW1lID09PSAnb2JqZWN0Jykge1xuXHQgICAgY2xhc3NuYW1lID0gY2xhc3NuYW1lLmJhc2VWYWwgfHwgJyc7XG5cdCAgfVxuXHQgIHJldHVybiBjbGFzc25hbWU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbiBJRTksIHNldEF0dHJpYnV0ZSgnY2xhc3MnKSB3aWxsIHJlc3VsdCBpbiBlbXB0eSBjbGFzc1xuXHQgKiBpZiB0aGUgZWxlbWVudCBhbHNvIGhhcyB0aGUgOmNsYXNzIGF0dHJpYnV0ZTsgSG93ZXZlciBpblxuXHQgKiBQaGFudG9tSlMsIHNldHRpbmcgYGNsYXNzTmFtZWAgZG9lcyBub3Qgd29yayBvbiBTVkcgZWxlbWVudHMuLi5cblx0ICogU28gd2UgaGF2ZSB0byBkbyBhIGNvbmRpdGlvbmFsIGNoZWNrIGhlcmUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHNldENsYXNzKGVsLCBjbHMpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaXNJRTkgJiYgIS9zdmckLy50ZXN0KGVsLm5hbWVzcGFjZVVSSSkpIHtcblx0ICAgIGVsLmNsYXNzTmFtZSA9IGNscztcblx0ICB9IGVsc2Uge1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNscyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQWRkIGNsYXNzIHdpdGggY29tcGF0aWJpbGl0eSBmb3IgSUUgJiBTVkdcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY2xzXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYWRkQ2xhc3MoZWwsIGNscykge1xuXHQgIGlmIChlbC5jbGFzc0xpc3QpIHtcblx0ICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xzKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGN1ciA9ICcgJyArIGdldENsYXNzKGVsKSArICcgJztcblx0ICAgIGlmIChjdXIuaW5kZXhPZignICcgKyBjbHMgKyAnICcpIDwgMCkge1xuXHQgICAgICBzZXRDbGFzcyhlbCwgKGN1ciArIGNscykudHJpbSgpKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBJRSAmIFNWR1xuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZW1vdmVDbGFzcyhlbCwgY2xzKSB7XG5cdCAgaWYgKGVsLmNsYXNzTGlzdCkge1xuXHQgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbHMpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgY3VyID0gJyAnICsgZ2V0Q2xhc3MoZWwpICsgJyAnO1xuXHQgICAgdmFyIHRhciA9ICcgJyArIGNscyArICcgJztcblx0ICAgIHdoaWxlIChjdXIuaW5kZXhPZih0YXIpID49IDApIHtcblx0ICAgICAgY3VyID0gY3VyLnJlcGxhY2UodGFyLCAnICcpO1xuXHQgICAgfVxuXHQgICAgc2V0Q2xhc3MoZWwsIGN1ci50cmltKCkpO1xuXHQgIH1cblx0ICBpZiAoIWVsLmNsYXNzTmFtZSkge1xuXHQgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEV4dHJhY3QgcmF3IGNvbnRlbnQgaW5zaWRlIGFuIGVsZW1lbnQgaW50byBhIHRlbXBvcmFyeVxuXHQgKiBjb250YWluZXIgZGl2XG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtCb29sZWFufSBhc0ZyYWdtZW50XG5cdCAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBleHRyYWN0Q29udGVudChlbCwgYXNGcmFnbWVudCkge1xuXHQgIHZhciBjaGlsZDtcblx0ICB2YXIgcmF3Q29udGVudDtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaXNUZW1wbGF0ZShlbCkgJiYgaXNGcmFnbWVudChlbC5jb250ZW50KSkge1xuXHQgICAgZWwgPSBlbC5jb250ZW50O1xuXHQgIH1cblx0ICBpZiAoZWwuaGFzQ2hpbGROb2RlcygpKSB7XG5cdCAgICB0cmltTm9kZShlbCk7XG5cdCAgICByYXdDb250ZW50ID0gYXNGcmFnbWVudCA/IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIHdoaWxlIChjaGlsZCA9IGVsLmZpcnN0Q2hpbGQpIHtcblx0ICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgICByYXdDb250ZW50LmFwcGVuZENoaWxkKGNoaWxkKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJhd0NvbnRlbnQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUcmltIHBvc3NpYmxlIGVtcHR5IGhlYWQvdGFpbCB0ZXh0IGFuZCBjb21tZW50XG5cdCAqIG5vZGVzIGluc2lkZSBhIHBhcmVudC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdHJpbU5vZGUobm9kZSkge1xuXHQgIHZhciBjaGlsZDtcblx0ICAvKiBlc2xpbnQtZGlzYWJsZSBuby1zZXF1ZW5jZXMgKi9cblx0ICB3aGlsZSAoKGNoaWxkID0gbm9kZS5maXJzdENoaWxkLCBpc1RyaW1tYWJsZShjaGlsZCkpKSB7XG5cdCAgICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcblx0ICB9XG5cdCAgd2hpbGUgKChjaGlsZCA9IG5vZGUubGFzdENoaWxkLCBpc1RyaW1tYWJsZShjaGlsZCkpKSB7XG5cdCAgICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcblx0ICB9XG5cdCAgLyogZXNsaW50LWVuYWJsZSBuby1zZXF1ZW5jZXMgKi9cblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNUcmltbWFibGUobm9kZSkge1xuXHQgIHJldHVybiBub2RlICYmIChub2RlLm5vZGVUeXBlID09PSAzICYmICFub2RlLmRhdGEudHJpbSgpIHx8IG5vZGUubm9kZVR5cGUgPT09IDgpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIHRlbXBsYXRlIHRhZy5cblx0ICogTm90ZSBpZiB0aGUgdGVtcGxhdGUgYXBwZWFycyBpbnNpZGUgYW4gU1ZHIGl0cyB0YWdOYW1lXG5cdCAqIHdpbGwgYmUgaW4gbG93ZXJjYXNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNUZW1wbGF0ZShlbCkge1xuXHQgIHJldHVybiBlbC50YWdOYW1lICYmIGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RlbXBsYXRlJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZSBhbiBcImFuY2hvclwiIGZvciBwZXJmb3JtaW5nIGRvbSBpbnNlcnRpb24vcmVtb3ZhbHMuXG5cdCAqIFRoaXMgaXMgdXNlZCBpbiBhIG51bWJlciBvZiBzY2VuYXJpb3M6XG5cdCAqIC0gZnJhZ21lbnQgaW5zdGFuY2Vcblx0ICogLSB2LWh0bWxcblx0ICogLSB2LWlmXG5cdCAqIC0gdi1mb3Jcblx0ICogLSBjb21wb25lbnRcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRcblx0ICogQHBhcmFtIHtCb29sZWFufSBwZXJzaXN0IC0gSUUgdHJhc2hlcyBlbXB0eSB0ZXh0Tm9kZXMgb25cblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVOb2RlKHRydWUpLCBzbyBpbiBjZXJ0YWluXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2VzIHRoZSBhbmNob3IgbmVlZHMgdG8gYmVcblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9uLWVtcHR5IHRvIGJlIHBlcnNpc3RlZCBpblxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZXMuXG5cdCAqIEByZXR1cm4ge0NvbW1lbnR8VGV4dH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVBbmNob3IoY29udGVudCwgcGVyc2lzdCkge1xuXHQgIHZhciBhbmNob3IgPSBjb25maWcuZGVidWcgPyBkb2N1bWVudC5jcmVhdGVDb21tZW50KGNvbnRlbnQpIDogZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocGVyc2lzdCA/ICcgJyA6ICcnKTtcblx0ICBhbmNob3IuX192X2FuY2hvciA9IHRydWU7XG5cdCAgcmV0dXJuIGFuY2hvcjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZpbmQgYSBjb21wb25lbnQgcmVmIGF0dHJpYnV0ZSB0aGF0IHN0YXJ0cyB3aXRoICQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdHZhciByZWZSRSA9IC9edi1yZWY6Lztcblx0XG5cdGZ1bmN0aW9uIGZpbmRSZWYobm9kZSkge1xuXHQgIGlmIChub2RlLmhhc0F0dHJpYnV0ZXMoKSkge1xuXHQgICAgdmFyIGF0dHJzID0gbm9kZS5hdHRyaWJ1dGVzO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuXHQgICAgICBpZiAocmVmUkUudGVzdChuYW1lKSkge1xuXHQgICAgICAgIHJldHVybiBjYW1lbGl6ZShuYW1lLnJlcGxhY2UocmVmUkUsICcnKSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNYXAgYSBmdW5jdGlvbiB0byBhIHJhbmdlIG9mIG5vZGVzIC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7Tm9kZX0gZW5kXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG9wXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFwTm9kZVJhbmdlKG5vZGUsIGVuZCwgb3ApIHtcblx0ICB2YXIgbmV4dDtcblx0ICB3aGlsZSAobm9kZSAhPT0gZW5kKSB7XG5cdCAgICBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcblx0ICAgIG9wKG5vZGUpO1xuXHQgICAgbm9kZSA9IG5leHQ7XG5cdCAgfVxuXHQgIG9wKGVuZCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgYSByYW5nZSBvZiBub2RlcyB3aXRoIHRyYW5zaXRpb24sIHN0b3JlXG5cdCAqIHRoZSBub2RlcyBpbiBhIGZyYWdtZW50IHdpdGggY29ycmVjdCBvcmRlcmluZyxcblx0ICogYW5kIGNhbGwgY2FsbGJhY2sgd2hlbiBkb25lLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IHN0YXJ0XG5cdCAqIEBwYXJhbSB7Tm9kZX0gZW5kXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZW1vdmVOb2RlUmFuZ2Uoc3RhcnQsIGVuZCwgdm0sIGZyYWcsIGNiKSB7XG5cdCAgdmFyIGRvbmUgPSBmYWxzZTtcblx0ICB2YXIgcmVtb3ZlZCA9IDA7XG5cdCAgdmFyIG5vZGVzID0gW107XG5cdCAgbWFwTm9kZVJhbmdlKHN0YXJ0LCBlbmQsIGZ1bmN0aW9uIChub2RlKSB7XG5cdCAgICBpZiAobm9kZSA9PT0gZW5kKSBkb25lID0gdHJ1ZTtcblx0ICAgIG5vZGVzLnB1c2gobm9kZSk7XG5cdCAgICByZW1vdmVXaXRoVHJhbnNpdGlvbihub2RlLCB2bSwgb25SZW1vdmVkKTtcblx0ICB9KTtcblx0ICBmdW5jdGlvbiBvblJlbW92ZWQoKSB7XG5cdCAgICByZW1vdmVkKys7XG5cdCAgICBpZiAoZG9uZSAmJiByZW1vdmVkID49IG5vZGVzLmxlbmd0aCkge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChub2Rlc1tpXSk7XG5cdCAgICAgIH1cblx0ICAgICAgY2IgJiYgY2IoKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhIG5vZGUgaXMgYSBEb2N1bWVudEZyYWdtZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc0ZyYWdtZW50KG5vZGUpIHtcblx0ICByZXR1cm4gbm9kZSAmJiBub2RlLm5vZGVUeXBlID09PSAxMTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCBvdXRlckhUTUwgb2YgZWxlbWVudHMsIHRha2luZyBjYXJlXG5cdCAqIG9mIFNWRyBlbGVtZW50cyBpbiBJRSBhcyB3ZWxsLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRPdXRlckhUTUwoZWwpIHtcblx0ICBpZiAoZWwub3V0ZXJIVE1MKSB7XG5cdCAgICByZXR1cm4gZWwub3V0ZXJIVE1MO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWwuY2xvbmVOb2RlKHRydWUpKTtcblx0ICAgIHJldHVybiBjb250YWluZXIuaW5uZXJIVE1MO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGNvbW1vblRhZ1JFID0gL14oZGl2fHB8c3BhbnxpbWd8YXxifGl8YnJ8dWx8b2x8bGl8aDF8aDJ8aDN8aDR8aDV8aDZ8Y29kZXxwcmV8dGFibGV8dGh8dGR8dHJ8Zm9ybXxsYWJlbHxpbnB1dHxzZWxlY3R8b3B0aW9ufG5hdnxhcnRpY2xlfHNlY3Rpb258aGVhZGVyfGZvb3RlcikkL2k7XG5cdHZhciByZXNlcnZlZFRhZ1JFID0gL14oc2xvdHxwYXJ0aWFsfGNvbXBvbmVudCkkL2k7XG5cdFxuXHR2YXIgaXNVbmtub3duRWxlbWVudCA9IHVuZGVmaW5lZDtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICBpc1Vua25vd25FbGVtZW50ID0gZnVuY3Rpb24gKGVsLCB0YWcpIHtcblx0ICAgIGlmICh0YWcuaW5kZXhPZignLScpID4gLTEpIHtcblx0ICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjgyMTAzNjQvMTA3MDI0NFxuXHQgICAgICByZXR1cm4gZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQgfHwgZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MRWxlbWVudDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAoL0hUTUxVbmtub3duRWxlbWVudC8udGVzdChlbC50b1N0cmluZygpKSAmJlxuXHQgICAgICAgIC8vIENocm9tZSByZXR1cm5zIHVua25vd24gZm9yIHNldmVyYWwgSFRNTDUgZWxlbWVudHMuXG5cdCAgICAgICAgLy8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTU0MDUyNlxuXHQgICAgICAgIC8vIEZpcmVmb3ggcmV0dXJucyB1bmtub3duIGZvciBzb21lIFwiSW50ZXJhY3RpdmUgZWxlbWVudHMuXCJcblx0ICAgICAgICAhL14oZGF0YXx0aW1lfHJ0Y3xyYnxkZXRhaWxzfGRpYWxvZ3xzdW1tYXJ5KSQvLnRlc3QodGFnKVxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgY29tcG9uZW50LCBpZiB5ZXMgcmV0dXJuIGl0c1xuXHQgKiBjb21wb25lbnQgaWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjaGVja0NvbXBvbmVudEF0dHIoZWwsIG9wdGlvbnMpIHtcblx0ICB2YXIgdGFnID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHQgIHZhciBoYXNBdHRycyA9IGVsLmhhc0F0dHJpYnV0ZXMoKTtcblx0ICBpZiAoIWNvbW1vblRhZ1JFLnRlc3QodGFnKSAmJiAhcmVzZXJ2ZWRUYWdSRS50ZXN0KHRhZykpIHtcblx0ICAgIGlmIChyZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCB0YWcpKSB7XG5cdCAgICAgIHJldHVybiB7IGlkOiB0YWcgfTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBpcyA9IGhhc0F0dHJzICYmIGdldElzQmluZGluZyhlbCwgb3B0aW9ucyk7XG5cdCAgICAgIGlmIChpcykge1xuXHQgICAgICAgIHJldHVybiBpcztcblx0ICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgdmFyIGV4cGVjdGVkVGFnID0gb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcCAmJiBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwW3RhZ107XG5cdCAgICAgICAgaWYgKGV4cGVjdGVkVGFnKSB7XG5cdCAgICAgICAgICB3YXJuKCdVbmtub3duIGN1c3RvbSBlbGVtZW50OiA8JyArIHRhZyArICc+IC0gJyArICdkaWQgeW91IG1lYW4gPCcgKyBleHBlY3RlZFRhZyArICc+PyAnICsgJ0hUTUwgaXMgY2FzZS1pbnNlbnNpdGl2ZSwgcmVtZW1iZXIgdG8gdXNlIGtlYmFiLWNhc2UgaW4gdGVtcGxhdGVzLicpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoaXNVbmtub3duRWxlbWVudChlbCwgdGFnKSkge1xuXHQgICAgICAgICAgd2FybignVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtIGRpZCB5b3UgJyArICdyZWdpc3RlciB0aGUgY29tcG9uZW50IGNvcnJlY3RseT8gRm9yIHJlY3Vyc2l2ZSBjb21wb25lbnRzLCAnICsgJ21ha2Ugc3VyZSB0byBwcm92aWRlIHRoZSBcIm5hbWVcIiBvcHRpb24uJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChoYXNBdHRycykge1xuXHQgICAgcmV0dXJuIGdldElzQmluZGluZyhlbCwgb3B0aW9ucyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IFwiaXNcIiBiaW5kaW5nIGZyb20gYW4gZWxlbWVudC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldElzQmluZGluZyhlbCwgb3B0aW9ucykge1xuXHQgIC8vIGR5bmFtaWMgc3ludGF4XG5cdCAgdmFyIGV4cCA9IGVsLmdldEF0dHJpYnV0ZSgnaXMnKTtcblx0ICBpZiAoZXhwICE9IG51bGwpIHtcblx0ICAgIGlmIChyZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCBleHApKSB7XG5cdCAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnaXMnKTtcblx0ICAgICAgcmV0dXJuIHsgaWQ6IGV4cCB9O1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBleHAgPSBnZXRCaW5kQXR0cihlbCwgJ2lzJyk7XG5cdCAgICBpZiAoZXhwICE9IG51bGwpIHtcblx0ICAgICAgcmV0dXJuIHsgaWQ6IGV4cCwgZHluYW1pYzogdHJ1ZSB9O1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIE9wdGlvbiBvdmVyd3JpdGluZyBzdHJhdGVnaWVzIGFyZSBmdW5jdGlvbnMgdGhhdCBoYW5kbGVcblx0ICogaG93IHRvIG1lcmdlIGEgcGFyZW50IG9wdGlvbiB2YWx1ZSBhbmQgYSBjaGlsZCBvcHRpb25cblx0ICogdmFsdWUgaW50byB0aGUgZmluYWwgdmFsdWUuXG5cdCAqXG5cdCAqIEFsbCBzdHJhdGVneSBmdW5jdGlvbnMgZm9sbG93IHRoZSBzYW1lIHNpZ25hdHVyZTpcblx0ICpcblx0ICogQHBhcmFtIHsqfSBwYXJlbnRWYWxcblx0ICogQHBhcmFtIHsqfSBjaGlsZFZhbFxuXHQgKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuXHQgKi9cblx0XG5cdHZhciBzdHJhdHMgPSBjb25maWcub3B0aW9uTWVyZ2VTdHJhdGVnaWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0XG5cdC8qKlxuXHQgKiBIZWxwZXIgdGhhdCByZWN1cnNpdmVseSBtZXJnZXMgdHdvIGRhdGEgb2JqZWN0cyB0b2dldGhlci5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtZXJnZURhdGEodG8sIGZyb20pIHtcblx0ICB2YXIga2V5LCB0b1ZhbCwgZnJvbVZhbDtcblx0ICBmb3IgKGtleSBpbiBmcm9tKSB7XG5cdCAgICB0b1ZhbCA9IHRvW2tleV07XG5cdCAgICBmcm9tVmFsID0gZnJvbVtrZXldO1xuXHQgICAgaWYgKCFoYXNPd24odG8sIGtleSkpIHtcblx0ICAgICAgc2V0KHRvLCBrZXksIGZyb21WYWwpO1xuXHQgICAgfSBlbHNlIGlmIChpc09iamVjdCh0b1ZhbCkgJiYgaXNPYmplY3QoZnJvbVZhbCkpIHtcblx0ICAgICAgbWVyZ2VEYXRhKHRvVmFsLCBmcm9tVmFsKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRvO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGF0YVxuXHQgKi9cblx0XG5cdHN0cmF0cy5kYXRhID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKSB7XG5cdCAgaWYgKCF2bSkge1xuXHQgICAgLy8gaW4gYSBWdWUuZXh0ZW5kIG1lcmdlLCBib3RoIHNob3VsZCBiZSBmdW5jdGlvbnNcblx0ICAgIGlmICghY2hpbGRWYWwpIHtcblx0ICAgICAgcmV0dXJuIHBhcmVudFZhbDtcblx0ICAgIH1cblx0ICAgIGlmICh0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdUaGUgXCJkYXRhXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgKyAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICsgJ2RlZmluaXRpb25zLicsIHZtKTtcblx0ICAgICAgcmV0dXJuIHBhcmVudFZhbDtcblx0ICAgIH1cblx0ICAgIGlmICghcGFyZW50VmFsKSB7XG5cdCAgICAgIHJldHVybiBjaGlsZFZhbDtcblx0ICAgIH1cblx0ICAgIC8vIHdoZW4gcGFyZW50VmFsICYgY2hpbGRWYWwgYXJlIGJvdGggcHJlc2VudCxcblx0ICAgIC8vIHdlIG5lZWQgdG8gcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZVxuXHQgICAgLy8gbWVyZ2VkIHJlc3VsdCBvZiBib3RoIGZ1bmN0aW9ucy4uLiBubyBuZWVkIHRvXG5cdCAgICAvLyBjaGVjayBpZiBwYXJlbnRWYWwgaXMgYSBmdW5jdGlvbiBoZXJlIGJlY2F1c2Vcblx0ICAgIC8vIGl0IGhhcyB0byBiZSBhIGZ1bmN0aW9uIHRvIHBhc3MgcHJldmlvdXMgbWVyZ2VzLlxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZERhdGFGbigpIHtcblx0ICAgICAgcmV0dXJuIG1lcmdlRGF0YShjaGlsZFZhbC5jYWxsKHRoaXMpLCBwYXJlbnRWYWwuY2FsbCh0aGlzKSk7XG5cdCAgICB9O1xuXHQgIH0gZWxzZSBpZiAocGFyZW50VmFsIHx8IGNoaWxkVmFsKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkSW5zdGFuY2VEYXRhRm4oKSB7XG5cdCAgICAgIC8vIGluc3RhbmNlIG1lcmdlXG5cdCAgICAgIHZhciBpbnN0YW5jZURhdGEgPSB0eXBlb2YgY2hpbGRWYWwgPT09ICdmdW5jdGlvbicgPyBjaGlsZFZhbC5jYWxsKHZtKSA6IGNoaWxkVmFsO1xuXHQgICAgICB2YXIgZGVmYXVsdERhdGEgPSB0eXBlb2YgcGFyZW50VmFsID09PSAnZnVuY3Rpb24nID8gcGFyZW50VmFsLmNhbGwodm0pIDogdW5kZWZpbmVkO1xuXHQgICAgICBpZiAoaW5zdGFuY2VEYXRhKSB7XG5cdCAgICAgICAgcmV0dXJuIG1lcmdlRGF0YShpbnN0YW5jZURhdGEsIGRlZmF1bHREYXRhKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gZGVmYXVsdERhdGE7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEVsXG5cdCAqL1xuXHRcblx0c3RyYXRzLmVsID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKSB7XG5cdCAgaWYgKCF2bSAmJiBjaGlsZFZhbCAmJiB0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVGhlIFwiZWxcIiBvcHRpb24gc2hvdWxkIGJlIGEgZnVuY3Rpb24gJyArICd0aGF0IHJldHVybnMgYSBwZXItaW5zdGFuY2UgdmFsdWUgaW4gY29tcG9uZW50ICcgKyAnZGVmaW5pdGlvbnMuJywgdm0pO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgcmV0ID0gY2hpbGRWYWwgfHwgcGFyZW50VmFsO1xuXHQgIC8vIGludm9rZSB0aGUgZWxlbWVudCBmYWN0b3J5IGlmIHRoaXMgaXMgaW5zdGFuY2UgbWVyZ2Vcblx0ICByZXR1cm4gdm0gJiYgdHlwZW9mIHJldCA9PT0gJ2Z1bmN0aW9uJyA/IHJldC5jYWxsKHZtKSA6IHJldDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBIb29rcyBhbmQgcGFyYW0gYXR0cmlidXRlcyBhcmUgbWVyZ2VkIGFzIGFycmF5cy5cblx0ICovXG5cdFxuXHRzdHJhdHMuaW5pdCA9IHN0cmF0cy5jcmVhdGVkID0gc3RyYXRzLnJlYWR5ID0gc3RyYXRzLmF0dGFjaGVkID0gc3RyYXRzLmRldGFjaGVkID0gc3RyYXRzLmJlZm9yZUNvbXBpbGUgPSBzdHJhdHMuY29tcGlsZWQgPSBzdHJhdHMuYmVmb3JlRGVzdHJveSA9IHN0cmF0cy5kZXN0cm95ZWQgPSBzdHJhdHMuYWN0aXZhdGUgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgIHJldHVybiBjaGlsZFZhbCA/IHBhcmVudFZhbCA/IHBhcmVudFZhbC5jb25jYXQoY2hpbGRWYWwpIDogaXNBcnJheShjaGlsZFZhbCkgPyBjaGlsZFZhbCA6IFtjaGlsZFZhbF0gOiBwYXJlbnRWYWw7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQXNzZXRzXG5cdCAqXG5cdCAqIFdoZW4gYSB2bSBpcyBwcmVzZW50IChpbnN0YW5jZSBjcmVhdGlvbiksIHdlIG5lZWQgdG8gZG9cblx0ICogYSB0aHJlZS13YXkgbWVyZ2UgYmV0d2VlbiBjb25zdHJ1Y3RvciBvcHRpb25zLCBpbnN0YW5jZVxuXHQgKiBvcHRpb25zIGFuZCBwYXJlbnQgb3B0aW9ucy5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtZXJnZUFzc2V0cyhwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG5cdCAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUocGFyZW50VmFsIHx8IG51bGwpO1xuXHQgIHJldHVybiBjaGlsZFZhbCA/IGV4dGVuZChyZXMsIGd1YXJkQXJyYXlBc3NldHMoY2hpbGRWYWwpKSA6IHJlcztcblx0fVxuXHRcblx0Y29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcblx0ICBzdHJhdHNbdHlwZSArICdzJ10gPSBtZXJnZUFzc2V0cztcblx0fSk7XG5cdFxuXHQvKipcblx0ICogRXZlbnRzICYgV2F0Y2hlcnMuXG5cdCAqXG5cdCAqIEV2ZW50cyAmIHdhdGNoZXJzIGhhc2hlcyBzaG91bGQgbm90IG92ZXJ3cml0ZSBvbmVcblx0ICogYW5vdGhlciwgc28gd2UgbWVyZ2UgdGhlbSBhcyBhcnJheXMuXG5cdCAqL1xuXHRcblx0c3RyYXRzLndhdGNoID0gc3RyYXRzLmV2ZW50cyA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG5cdCAgaWYgKCFjaGlsZFZhbCkgcmV0dXJuIHBhcmVudFZhbDtcblx0ICBpZiAoIXBhcmVudFZhbCkgcmV0dXJuIGNoaWxkVmFsO1xuXHQgIHZhciByZXQgPSB7fTtcblx0ICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuXHQgIGZvciAodmFyIGtleSBpbiBjaGlsZFZhbCkge1xuXHQgICAgdmFyIHBhcmVudCA9IHJldFtrZXldO1xuXHQgICAgdmFyIGNoaWxkID0gY2hpbGRWYWxba2V5XTtcblx0ICAgIGlmIChwYXJlbnQgJiYgIWlzQXJyYXkocGFyZW50KSkge1xuXHQgICAgICBwYXJlbnQgPSBbcGFyZW50XTtcblx0ICAgIH1cblx0ICAgIHJldFtrZXldID0gcGFyZW50ID8gcGFyZW50LmNvbmNhdChjaGlsZCkgOiBbY2hpbGRdO1xuXHQgIH1cblx0ICByZXR1cm4gcmV0O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE90aGVyIG9iamVjdCBoYXNoZXMuXG5cdCAqL1xuXHRcblx0c3RyYXRzLnByb3BzID0gc3RyYXRzLm1ldGhvZHMgPSBzdHJhdHMuY29tcHV0ZWQgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG5cdCAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbDtcblx0ICB2YXIgcmV0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuXHQgIGV4dGVuZChyZXQsIGNoaWxkVmFsKTtcblx0ICByZXR1cm4gcmV0O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIERlZmF1bHQgc3RyYXRlZ3kuXG5cdCAqL1xuXHRcblx0dmFyIGRlZmF1bHRTdHJhdCA9IGZ1bmN0aW9uIGRlZmF1bHRTdHJhdChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG5cdCAgcmV0dXJuIGNoaWxkVmFsID09PSB1bmRlZmluZWQgPyBwYXJlbnRWYWwgOiBjaGlsZFZhbDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBNYWtlIHN1cmUgY29tcG9uZW50IG9wdGlvbnMgZ2V0IGNvbnZlcnRlZCB0byBhY3R1YWxcblx0ICogY29uc3RydWN0b3JzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGd1YXJkQ29tcG9uZW50cyhvcHRpb25zKSB7XG5cdCAgaWYgKG9wdGlvbnMuY29tcG9uZW50cykge1xuXHQgICAgdmFyIGNvbXBvbmVudHMgPSBvcHRpb25zLmNvbXBvbmVudHMgPSBndWFyZEFycmF5QXNzZXRzKG9wdGlvbnMuY29tcG9uZW50cyk7XG5cdCAgICB2YXIgaWRzID0gT2JqZWN0LmtleXMoY29tcG9uZW50cyk7XG5cdCAgICB2YXIgZGVmO1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgdmFyIG1hcCA9IG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXAgPSB7fTtcblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gaWRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIga2V5ID0gaWRzW2ldO1xuXHQgICAgICBpZiAoY29tbW9uVGFnUkUudGVzdChrZXkpIHx8IHJlc2VydmVkVGFnUkUudGVzdChrZXkpKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgKyAnaWQ6ICcgKyBrZXkpO1xuXHQgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIHJlY29yZCBhIGFsbCBsb3dlcmNhc2UgPC0+IGtlYmFiLWNhc2UgbWFwcGluZyBmb3Jcblx0ICAgICAgLy8gcG9zc2libGUgY3VzdG9tIGVsZW1lbnQgY2FzZSBlcnJvciB3YXJuaW5nXG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgbWFwW2tleS5yZXBsYWNlKC8tL2csICcnKS50b0xvd2VyQ2FzZSgpXSA9IGh5cGhlbmF0ZShrZXkpO1xuXHQgICAgICB9XG5cdCAgICAgIGRlZiA9IGNvbXBvbmVudHNba2V5XTtcblx0ICAgICAgaWYgKGlzUGxhaW5PYmplY3QoZGVmKSkge1xuXHQgICAgICAgIGNvbXBvbmVudHNba2V5XSA9IFZ1ZS5leHRlbmQoZGVmKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEVuc3VyZSBhbGwgcHJvcHMgb3B0aW9uIHN5bnRheCBhcmUgbm9ybWFsaXplZCBpbnRvIHRoZVxuXHQgKiBPYmplY3QtYmFzZWQgZm9ybWF0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGd1YXJkUHJvcHMob3B0aW9ucykge1xuXHQgIHZhciBwcm9wcyA9IG9wdGlvbnMucHJvcHM7XG5cdCAgdmFyIGksIHZhbDtcblx0ICBpZiAoaXNBcnJheShwcm9wcykpIHtcblx0ICAgIG9wdGlvbnMucHJvcHMgPSB7fTtcblx0ICAgIGkgPSBwcm9wcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhbCA9IHByb3BzW2ldO1xuXHQgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICBvcHRpb25zLnByb3BzW3ZhbF0gPSBudWxsO1xuXHQgICAgICB9IGVsc2UgaWYgKHZhbC5uYW1lKSB7XG5cdCAgICAgICAgb3B0aW9ucy5wcm9wc1t2YWwubmFtZV0gPSB2YWw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QocHJvcHMpKSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BzKTtcblx0ICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdmFsID0gcHJvcHNba2V5c1tpXV07XG5cdCAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgcHJvcHNba2V5c1tpXV0gPSB7IHR5cGU6IHZhbCB9O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogR3VhcmQgYW4gQXJyYXktZm9ybWF0IGFzc2V0cyBvcHRpb24gYW5kIGNvbnZlcnRlZCBpdFxuXHQgKiBpbnRvIHRoZSBrZXktdmFsdWUgT2JqZWN0IGZvcm1hdC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGFzc2V0c1xuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ3VhcmRBcnJheUFzc2V0cyhhc3NldHMpIHtcblx0ICBpZiAoaXNBcnJheShhc3NldHMpKSB7XG5cdCAgICB2YXIgcmVzID0ge307XG5cdCAgICB2YXIgaSA9IGFzc2V0cy5sZW5ndGg7XG5cdCAgICB2YXIgYXNzZXQ7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGFzc2V0ID0gYXNzZXRzW2ldO1xuXHQgICAgICB2YXIgaWQgPSB0eXBlb2YgYXNzZXQgPT09ICdmdW5jdGlvbicgPyBhc3NldC5vcHRpb25zICYmIGFzc2V0Lm9wdGlvbnMubmFtZSB8fCBhc3NldC5pZCA6IGFzc2V0Lm5hbWUgfHwgYXNzZXQuaWQ7XG5cdCAgICAgIGlmICghaWQpIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0FycmF5LXN5bnRheCBhc3NldHMgbXVzdCBwcm92aWRlIGEgXCJuYW1lXCIgb3IgXCJpZFwiIGZpZWxkLicpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlc1tpZF0gPSBhc3NldDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlcztcblx0ICB9XG5cdCAgcmV0dXJuIGFzc2V0cztcblx0fVxuXHRcblx0LyoqXG5cdCAqIE1lcmdlIHR3byBvcHRpb24gb2JqZWN0cyBpbnRvIGEgbmV3IG9uZS5cblx0ICogQ29yZSB1dGlsaXR5IHVzZWQgaW4gYm90aCBpbnN0YW50aWF0aW9uIGFuZCBpbmhlcml0YW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHBhcmVudFxuXHQgKiBAcGFyYW0ge09iamVjdH0gY2hpbGRcblx0ICogQHBhcmFtIHtWdWV9IFt2bV0gLSBpZiB2bSBpcyBwcmVzZW50LCBpbmRpY2F0ZXMgdGhpcyBpc1xuXHQgKiAgICAgICAgICAgICAgICAgICAgIGFuIGluc3RhbnRpYXRpb24gbWVyZ2UuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGQsIHZtKSB7XG5cdCAgZ3VhcmRDb21wb25lbnRzKGNoaWxkKTtcblx0ICBndWFyZFByb3BzKGNoaWxkKTtcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgaWYgKGNoaWxkLnByb3BzRGF0YSAmJiAhdm0pIHtcblx0ICAgICAgd2FybigncHJvcHNEYXRhIGNhbiBvbmx5IGJlIHVzZWQgYXMgYW4gaW5zdGFudGlhdGlvbiBvcHRpb24uJyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciBvcHRpb25zID0ge307XG5cdCAgdmFyIGtleTtcblx0ICBpZiAoY2hpbGRbJ2V4dGVuZHMnXSkge1xuXHQgICAgcGFyZW50ID0gdHlwZW9mIGNoaWxkWydleHRlbmRzJ10gPT09ICdmdW5jdGlvbicgPyBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZFsnZXh0ZW5kcyddLm9wdGlvbnMsIHZtKSA6IG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkWydleHRlbmRzJ10sIHZtKTtcblx0ICB9XG5cdCAgaWYgKGNoaWxkLm1peGlucykge1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZC5taXhpbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBtaXhpbiA9IGNoaWxkLm1peGluc1tpXTtcblx0ICAgICAgdmFyIG1peGluT3B0aW9ucyA9IG1peGluLnByb3RvdHlwZSBpbnN0YW5jZW9mIFZ1ZSA/IG1peGluLm9wdGlvbnMgOiBtaXhpbjtcblx0ICAgICAgcGFyZW50ID0gbWVyZ2VPcHRpb25zKHBhcmVudCwgbWl4aW5PcHRpb25zLCB2bSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGZvciAoa2V5IGluIHBhcmVudCkge1xuXHQgICAgbWVyZ2VGaWVsZChrZXkpO1xuXHQgIH1cblx0ICBmb3IgKGtleSBpbiBjaGlsZCkge1xuXHQgICAgaWYgKCFoYXNPd24ocGFyZW50LCBrZXkpKSB7XG5cdCAgICAgIG1lcmdlRmllbGQoa2V5KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgZnVuY3Rpb24gbWVyZ2VGaWVsZChrZXkpIHtcblx0ICAgIHZhciBzdHJhdCA9IHN0cmF0c1trZXldIHx8IGRlZmF1bHRTdHJhdDtcblx0ICAgIG9wdGlvbnNba2V5XSA9IHN0cmF0KHBhcmVudFtrZXldLCBjaGlsZFtrZXldLCB2bSwga2V5KTtcblx0ICB9XG5cdCAgcmV0dXJuIG9wdGlvbnM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZXNvbHZlIGFuIGFzc2V0LlxuXHQgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYmVjYXVzZSBjaGlsZCBpbnN0YW5jZXMgbmVlZCBhY2Nlc3Ncblx0ICogdG8gYXNzZXRzIGRlZmluZWQgaW4gaXRzIGFuY2VzdG9yIGNoYWluLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaWRcblx0ICogQHBhcmFtIHtCb29sZWFufSB3YXJuTWlzc2luZ1xuXHQgKiBAcmV0dXJuIHtPYmplY3R8RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsIHR5cGUsIGlkLCB3YXJuTWlzc2luZykge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICh0eXBlb2YgaWQgIT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBhc3NldHMgPSBvcHRpb25zW3R5cGVdO1xuXHQgIHZhciBjYW1lbGl6ZWRJZDtcblx0ICB2YXIgcmVzID0gYXNzZXRzW2lkXSB8fFxuXHQgIC8vIGNhbWVsQ2FzZSBJRFxuXHQgIGFzc2V0c1tjYW1lbGl6ZWRJZCA9IGNhbWVsaXplKGlkKV0gfHxcblx0ICAvLyBQYXNjYWwgQ2FzZSBJRFxuXHQgIGFzc2V0c1tjYW1lbGl6ZWRJZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbWVsaXplZElkLnNsaWNlKDEpXTtcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuTWlzc2luZyAmJiAhcmVzKSB7XG5cdCAgICB3YXJuKCdGYWlsZWQgdG8gcmVzb2x2ZSAnICsgdHlwZS5zbGljZSgwLCAtMSkgKyAnOiAnICsgaWQsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHR2YXIgdWlkJDEgPSAwO1xuXHRcblx0LyoqXG5cdCAqIEEgZGVwIGlzIGFuIG9ic2VydmFibGUgdGhhdCBjYW4gaGF2ZSBtdWx0aXBsZVxuXHQgKiBkaXJlY3RpdmVzIHN1YnNjcmliaW5nIHRvIGl0LlxuXHQgKlxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICovXG5cdGZ1bmN0aW9uIERlcCgpIHtcblx0ICB0aGlzLmlkID0gdWlkJDErKztcblx0ICB0aGlzLnN1YnMgPSBbXTtcblx0fVxuXHRcblx0Ly8gdGhlIGN1cnJlbnQgdGFyZ2V0IHdhdGNoZXIgYmVpbmcgZXZhbHVhdGVkLlxuXHQvLyB0aGlzIGlzIGdsb2JhbGx5IHVuaXF1ZSBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG9ubHkgb25lXG5cdC8vIHdhdGNoZXIgYmVpbmcgZXZhbHVhdGVkIGF0IGFueSB0aW1lLlxuXHREZXAudGFyZ2V0ID0gbnVsbDtcblx0XG5cdC8qKlxuXHQgKiBBZGQgYSBkaXJlY3RpdmUgc3Vic2NyaWJlci5cblx0ICpcblx0ICogQHBhcmFtIHtEaXJlY3RpdmV9IHN1YlxuXHQgKi9cblx0XG5cdERlcC5wcm90b3R5cGUuYWRkU3ViID0gZnVuY3Rpb24gKHN1Yikge1xuXHQgIHRoaXMuc3Vicy5wdXNoKHN1Yik7XG5cdH07XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGEgZGlyZWN0aXZlIHN1YnNjcmliZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RGlyZWN0aXZlfSBzdWJcblx0ICovXG5cdFxuXHREZXAucHJvdG90eXBlLnJlbW92ZVN1YiA9IGZ1bmN0aW9uIChzdWIpIHtcblx0ICB0aGlzLnN1YnMuJHJlbW92ZShzdWIpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEFkZCBzZWxmIGFzIGEgZGVwZW5kZW5jeSB0byB0aGUgdGFyZ2V0IHdhdGNoZXIuXG5cdCAqL1xuXHRcblx0RGVwLnByb3RvdHlwZS5kZXBlbmQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgRGVwLnRhcmdldC5hZGREZXAodGhpcyk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogTm90aWZ5IGFsbCBzdWJzY3JpYmVycyBvZiBhIG5ldyB2YWx1ZS5cblx0ICovXG5cdFxuXHREZXAucHJvdG90eXBlLm5vdGlmeSA9IGZ1bmN0aW9uICgpIHtcblx0ICAvLyBzdGFibGl6ZSB0aGUgc3Vic2NyaWJlciBsaXN0IGZpcnN0XG5cdCAgdmFyIHN1YnMgPSB0b0FycmF5KHRoaXMuc3Vicyk7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdWJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgc3Vic1tpXS51cGRhdGUoKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTtcblx0dmFyIGFycmF5TWV0aG9kcyA9IE9iamVjdC5jcmVhdGUoYXJyYXlQcm90bylcblx0XG5cdC8qKlxuXHQgKiBJbnRlcmNlcHQgbXV0YXRpbmcgbWV0aG9kcyBhbmQgZW1pdCBldmVudHNcblx0ICovXG5cdFxuXHQ7WydwdXNoJywgJ3BvcCcsICdzaGlmdCcsICd1bnNoaWZ0JywgJ3NwbGljZScsICdzb3J0JywgJ3JldmVyc2UnXS5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHtcblx0ICAvLyBjYWNoZSBvcmlnaW5hbCBtZXRob2Rcblx0ICB2YXIgb3JpZ2luYWwgPSBhcnJheVByb3RvW21ldGhvZF07XG5cdCAgZGVmKGFycmF5TWV0aG9kcywgbWV0aG9kLCBmdW5jdGlvbiBtdXRhdG9yKCkge1xuXHQgICAgLy8gYXZvaWQgbGVha2luZyBhcmd1bWVudHM6XG5cdCAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9jbG9zdXJlLXdpdGgtYXJndW1lbnRzXG5cdCAgICB2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShpKTtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgIH1cblx0ICAgIHZhciByZXN1bHQgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmdzKTtcblx0ICAgIHZhciBvYiA9IHRoaXMuX19vYl9fO1xuXHQgICAgdmFyIGluc2VydGVkO1xuXHQgICAgc3dpdGNoIChtZXRob2QpIHtcblx0ICAgICAgY2FzZSAncHVzaCc6XG5cdCAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICd1bnNoaWZ0Jzpcblx0ICAgICAgICBpbnNlcnRlZCA9IGFyZ3M7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ3NwbGljZSc6XG5cdCAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzLnNsaWNlKDIpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHQgICAgaWYgKGluc2VydGVkKSBvYi5vYnNlcnZlQXJyYXkoaW5zZXJ0ZWQpO1xuXHQgICAgLy8gbm90aWZ5IGNoYW5nZVxuXHQgICAgb2IuZGVwLm5vdGlmeSgpO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9KTtcblx0fSk7XG5cdFxuXHQvKipcblx0ICogU3dhcCB0aGUgZWxlbWVudCBhdCB0aGUgZ2l2ZW4gaW5kZXggd2l0aCBhIG5ldyB2YWx1ZVxuXHQgKiBhbmQgZW1pdHMgY29ycmVzcG9uZGluZyBldmVudC5cblx0ICpcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqIEByZXR1cm4geyp9IC0gcmVwbGFjZWQgZWxlbWVudFxuXHQgKi9cblx0XG5cdGRlZihhcnJheVByb3RvLCAnJHNldCcsIGZ1bmN0aW9uICRzZXQoaW5kZXgsIHZhbCkge1xuXHQgIGlmIChpbmRleCA+PSB0aGlzLmxlbmd0aCkge1xuXHQgICAgdGhpcy5sZW5ndGggPSBOdW1iZXIoaW5kZXgpICsgMTtcblx0ICB9XG5cdCAgcmV0dXJuIHRoaXMuc3BsaWNlKGluZGV4LCAxLCB2YWwpWzBdO1xuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcmVtb3ZlIHRoZSBlbGVtZW50IGF0IGdpdmVuIGluZGV4IG9yIHRhcmdldCBlbGVtZW50IHJlZmVyZW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHsqfSBpdGVtXG5cdCAqL1xuXHRcblx0ZGVmKGFycmF5UHJvdG8sICckcmVtb3ZlJywgZnVuY3Rpb24gJHJlbW92ZShpdGVtKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKCF0aGlzLmxlbmd0aCkgcmV0dXJuO1xuXHQgIHZhciBpbmRleCA9IGluZGV4T2YodGhpcywgaXRlbSk7XG5cdCAgaWYgKGluZGV4ID4gLTEpIHtcblx0ICAgIHJldHVybiB0aGlzLnNwbGljZShpbmRleCwgMSk7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBhcnJheUtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhcnJheU1ldGhvZHMpO1xuXHRcblx0LyoqXG5cdCAqIEJ5IGRlZmF1bHQsIHdoZW4gYSByZWFjdGl2ZSBwcm9wZXJ0eSBpcyBzZXQsIHRoZSBuZXcgdmFsdWUgaXNcblx0ICogYWxzbyBjb252ZXJ0ZWQgdG8gYmVjb21lIHJlYWN0aXZlLiBIb3dldmVyIGluIGNlcnRhaW4gY2FzZXMsIGUuZy5cblx0ICogdi1mb3Igc2NvcGUgYWxpYXMgYW5kIHByb3BzLCB3ZSBkb24ndCB3YW50IHRvIGZvcmNlIGNvbnZlcnNpb25cblx0ICogYmVjYXVzZSB0aGUgdmFsdWUgbWF5IGJlIGEgbmVzdGVkIHZhbHVlIHVuZGVyIGEgZnJvemVuIGRhdGEgc3RydWN0dXJlLlxuXHQgKlxuXHQgKiBTbyB3aGVuZXZlciB3ZSB3YW50IHRvIHNldCBhIHJlYWN0aXZlIHByb3BlcnR5IHdpdGhvdXQgZm9yY2luZ1xuXHQgKiBjb252ZXJzaW9uIG9uIHRoZSBuZXcgdmFsdWUsIHdlIHdyYXAgdGhhdCBjYWxsIGluc2lkZSB0aGlzIGZ1bmN0aW9uLlxuXHQgKi9cblx0XG5cdHZhciBzaG91bGRDb252ZXJ0ID0gdHJ1ZTtcblx0XG5cdGZ1bmN0aW9uIHdpdGhvdXRDb252ZXJzaW9uKGZuKSB7XG5cdCAgc2hvdWxkQ29udmVydCA9IGZhbHNlO1xuXHQgIGZuKCk7XG5cdCAgc2hvdWxkQ29udmVydCA9IHRydWU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBPYnNlcnZlciBjbGFzcyB0aGF0IGFyZSBhdHRhY2hlZCB0byBlYWNoIG9ic2VydmVkXG5cdCAqIG9iamVjdC4gT25jZSBhdHRhY2hlZCwgdGhlIG9ic2VydmVyIGNvbnZlcnRzIHRhcmdldFxuXHQgKiBvYmplY3QncyBwcm9wZXJ0eSBrZXlzIGludG8gZ2V0dGVyL3NldHRlcnMgdGhhdFxuXHQgKiBjb2xsZWN0IGRlcGVuZGVuY2llcyBhbmQgZGlzcGF0Y2hlcyB1cGRhdGVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gdmFsdWVcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gT2JzZXJ2ZXIodmFsdWUpIHtcblx0ICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cdCAgdGhpcy5kZXAgPSBuZXcgRGVwKCk7XG5cdCAgZGVmKHZhbHVlLCAnX19vYl9fJywgdGhpcyk7XG5cdCAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICB2YXIgYXVnbWVudCA9IGhhc1Byb3RvID8gcHJvdG9BdWdtZW50IDogY29weUF1Z21lbnQ7XG5cdCAgICBhdWdtZW50KHZhbHVlLCBhcnJheU1ldGhvZHMsIGFycmF5S2V5cyk7XG5cdCAgICB0aGlzLm9ic2VydmVBcnJheSh2YWx1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRoaXMud2Fsayh2YWx1ZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyBJbnN0YW5jZSBtZXRob2RzXG5cdFxuXHQvKipcblx0ICogV2FsayB0aHJvdWdoIGVhY2ggcHJvcGVydHkgYW5kIGNvbnZlcnQgdGhlbSBpbnRvXG5cdCAqIGdldHRlci9zZXR0ZXJzLiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgd2hlblxuXHQgKiB2YWx1ZSB0eXBlIGlzIE9iamVjdC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKi9cblx0XG5cdE9ic2VydmVyLnByb3RvdHlwZS53YWxrID0gZnVuY3Rpb24gKG9iaikge1xuXHQgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICB0aGlzLmNvbnZlcnQoa2V5c1tpXSwgb2JqW2tleXNbaV1dKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogT2JzZXJ2ZSBhIGxpc3Qgb2YgQXJyYXkgaXRlbXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGl0ZW1zXG5cdCAqL1xuXHRcblx0T2JzZXJ2ZXIucHJvdG90eXBlLm9ic2VydmVBcnJheSA9IGZ1bmN0aW9uIChpdGVtcykge1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gaXRlbXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBvYnNlcnZlKGl0ZW1zW2ldKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBhIHByb3BlcnR5IGludG8gZ2V0dGVyL3NldHRlciBzbyB3ZSBjYW4gZW1pdFxuXHQgKiB0aGUgZXZlbnRzIHdoZW4gdGhlIHByb3BlcnR5IGlzIGFjY2Vzc2VkL2NoYW5nZWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICovXG5cdFxuXHRPYnNlcnZlci5wcm90b3R5cGUuY29udmVydCA9IGZ1bmN0aW9uIChrZXksIHZhbCkge1xuXHQgIGRlZmluZVJlYWN0aXZlKHRoaXMudmFsdWUsIGtleSwgdmFsKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBZGQgYW4gb3duZXIgdm0sIHNvIHRoYXQgd2hlbiAkc2V0LyRkZWxldGUgbXV0YXRpb25zXG5cdCAqIGhhcHBlbiB3ZSBjYW4gbm90aWZ5IG93bmVyIHZtcyB0byBwcm94eSB0aGUga2V5cyBhbmRcblx0ICogZGlnZXN0IHRoZSB3YXRjaGVycy4gVGhpcyBpcyBvbmx5IGNhbGxlZCB3aGVuIHRoZSBvYmplY3Rcblx0ICogaXMgb2JzZXJ2ZWQgYXMgYW4gaW5zdGFuY2UncyByb290ICRkYXRhLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICovXG5cdFxuXHRPYnNlcnZlci5wcm90b3R5cGUuYWRkVm0gPSBmdW5jdGlvbiAodm0pIHtcblx0ICAodGhpcy52bXMgfHwgKHRoaXMudm1zID0gW10pKS5wdXNoKHZtKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgYW4gb3duZXIgdm0uIFRoaXMgaXMgY2FsbGVkIHdoZW4gdGhlIG9iamVjdCBpc1xuXHQgKiBzd2FwcGVkIG91dCBhcyBhbiBpbnN0YW5jZSdzICRkYXRhIG9iamVjdC5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRcblx0T2JzZXJ2ZXIucHJvdG90eXBlLnJlbW92ZVZtID0gZnVuY3Rpb24gKHZtKSB7XG5cdCAgdGhpcy52bXMuJHJlbW92ZSh2bSk7XG5cdH07XG5cdFxuXHQvLyBoZWxwZXJzXG5cdFxuXHQvKipcblx0ICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGludGVyY2VwdGluZ1xuXHQgKiB0aGUgcHJvdG90eXBlIGNoYWluIHVzaW5nIF9fcHJvdG9fX1xuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzcmNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcm90b0F1Z21lbnQodGFyZ2V0LCBzcmMpIHtcblx0ICAvKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuXHQgIHRhcmdldC5fX3Byb3RvX18gPSBzcmM7XG5cdCAgLyogZXNsaW50LWVuYWJsZSBuby1wcm90byAqL1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGRlZmluaW5nXG5cdCAqIGhpZGRlbiBwcm9wZXJ0aWVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm90b1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvcHlBdWdtZW50KHRhcmdldCwgc3JjLCBrZXlzKSB7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdmFyIGtleSA9IGtleXNbaV07XG5cdCAgICBkZWYodGFyZ2V0LCBrZXksIHNyY1trZXldKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBdHRlbXB0IHRvIGNyZWF0ZSBhbiBvYnNlcnZlciBpbnN0YW5jZSBmb3IgYSB2YWx1ZSxcblx0ICogcmV0dXJucyB0aGUgbmV3IG9ic2VydmVyIGlmIHN1Y2Nlc3NmdWxseSBvYnNlcnZlZCxcblx0ICogb3IgdGhlIGV4aXN0aW5nIG9ic2VydmVyIGlmIHRoZSB2YWx1ZSBhbHJlYWR5IGhhcyBvbmUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHBhcmFtIHtWdWV9IFt2bV1cblx0ICogQHJldHVybiB7T2JzZXJ2ZXJ8dW5kZWZpbmVkfVxuXHQgKiBAc3RhdGljXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gb2JzZXJ2ZSh2YWx1ZSwgdm0pIHtcblx0ICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIG9iO1xuXHQgIGlmIChoYXNPd24odmFsdWUsICdfX29iX18nKSAmJiB2YWx1ZS5fX29iX18gaW5zdGFuY2VvZiBPYnNlcnZlcikge1xuXHQgICAgb2IgPSB2YWx1ZS5fX29iX187XG5cdCAgfSBlbHNlIGlmIChzaG91bGRDb252ZXJ0ICYmIChpc0FycmF5KHZhbHVlKSB8fCBpc1BsYWluT2JqZWN0KHZhbHVlKSkgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWx1ZSkgJiYgIXZhbHVlLl9pc1Z1ZSkge1xuXHQgICAgb2IgPSBuZXcgT2JzZXJ2ZXIodmFsdWUpO1xuXHQgIH1cblx0ICBpZiAob2IgJiYgdm0pIHtcblx0ICAgIG9iLmFkZFZtKHZtKTtcblx0ICB9XG5cdCAgcmV0dXJuIG9iO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGVmaW5lIGEgcmVhY3RpdmUgcHJvcGVydHkgb24gYW4gT2JqZWN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkZWZpbmVSZWFjdGl2ZShvYmosIGtleSwgdmFsKSB7XG5cdCAgdmFyIGRlcCA9IG5ldyBEZXAoKTtcblx0XG5cdCAgdmFyIHByb3BlcnR5ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG5cdCAgaWYgKHByb3BlcnR5ICYmIHByb3BlcnR5LmNvbmZpZ3VyYWJsZSA9PT0gZmFsc2UpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdFxuXHQgIC8vIGNhdGVyIGZvciBwcmUtZGVmaW5lZCBnZXR0ZXIvc2V0dGVyc1xuXHQgIHZhciBnZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5nZXQ7XG5cdCAgdmFyIHNldHRlciA9IHByb3BlcnR5ICYmIHByb3BlcnR5LnNldDtcblx0XG5cdCAgdmFyIGNoaWxkT2IgPSBvYnNlcnZlKHZhbCk7XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG5cdCAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiByZWFjdGl2ZUdldHRlcigpIHtcblx0ICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcblx0ICAgICAgaWYgKERlcC50YXJnZXQpIHtcblx0ICAgICAgICBkZXAuZGVwZW5kKCk7XG5cdCAgICAgICAgaWYgKGNoaWxkT2IpIHtcblx0ICAgICAgICAgIGNoaWxkT2IuZGVwLmRlcGVuZCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgICAgIGZvciAodmFyIGUsIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGUgPSB2YWx1ZVtpXTtcblx0ICAgICAgICAgICAgZSAmJiBlLl9fb2JfXyAmJiBlLl9fb2JfXy5kZXAuZGVwZW5kKCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlU2V0dGVyKG5ld1ZhbCkge1xuXHQgICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogdmFsO1xuXHQgICAgICBpZiAobmV3VmFsID09PSB2YWx1ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoc2V0dGVyKSB7XG5cdCAgICAgICAgc2V0dGVyLmNhbGwob2JqLCBuZXdWYWwpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHZhbCA9IG5ld1ZhbDtcblx0ICAgICAgfVxuXHQgICAgICBjaGlsZE9iID0gb2JzZXJ2ZShuZXdWYWwpO1xuXHQgICAgICBkZXAubm90aWZ5KCk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdH1cblx0XG5cdFxuXHRcblx0dmFyIHV0aWwgPSBPYmplY3QuZnJlZXplKHtcblx0XHRkZWZpbmVSZWFjdGl2ZTogZGVmaW5lUmVhY3RpdmUsXG5cdFx0c2V0OiBzZXQsXG5cdFx0ZGVsOiBkZWwsXG5cdFx0aGFzT3duOiBoYXNPd24sXG5cdFx0aXNMaXRlcmFsOiBpc0xpdGVyYWwsXG5cdFx0aXNSZXNlcnZlZDogaXNSZXNlcnZlZCxcblx0XHRfdG9TdHJpbmc6IF90b1N0cmluZyxcblx0XHR0b051bWJlcjogdG9OdW1iZXIsXG5cdFx0dG9Cb29sZWFuOiB0b0Jvb2xlYW4sXG5cdFx0c3RyaXBRdW90ZXM6IHN0cmlwUXVvdGVzLFxuXHRcdGNhbWVsaXplOiBjYW1lbGl6ZSxcblx0XHRoeXBoZW5hdGU6IGh5cGhlbmF0ZSxcblx0XHRjbGFzc2lmeTogY2xhc3NpZnksXG5cdFx0YmluZDogYmluZCxcblx0XHR0b0FycmF5OiB0b0FycmF5LFxuXHRcdGV4dGVuZDogZXh0ZW5kLFxuXHRcdGlzT2JqZWN0OiBpc09iamVjdCxcblx0XHRpc1BsYWluT2JqZWN0OiBpc1BsYWluT2JqZWN0LFxuXHRcdGRlZjogZGVmLFxuXHRcdGRlYm91bmNlOiBfZGVib3VuY2UsXG5cdFx0aW5kZXhPZjogaW5kZXhPZixcblx0XHRjYW5jZWxsYWJsZTogY2FuY2VsbGFibGUsXG5cdFx0bG9vc2VFcXVhbDogbG9vc2VFcXVhbCxcblx0XHRpc0FycmF5OiBpc0FycmF5LFxuXHRcdGhhc1Byb3RvOiBoYXNQcm90byxcblx0XHRpbkJyb3dzZXI6IGluQnJvd3Nlcixcblx0XHRkZXZ0b29sczogZGV2dG9vbHMsXG5cdFx0aXNJRTogaXNJRSxcblx0XHRpc0lFOTogaXNJRTksXG5cdFx0aXNBbmRyb2lkOiBpc0FuZHJvaWQsXG5cdFx0aXNJb3M6IGlzSW9zLFxuXHRcdGlvc1ZlcnNpb25NYXRjaDogaW9zVmVyc2lvbk1hdGNoLFxuXHRcdGlvc1ZlcnNpb246IGlvc1ZlcnNpb24sXG5cdFx0aGFzTXV0YXRpb25PYnNlcnZlckJ1ZzogaGFzTXV0YXRpb25PYnNlcnZlckJ1Zyxcblx0XHRnZXQgdHJhbnNpdGlvblByb3AgKCkgeyByZXR1cm4gdHJhbnNpdGlvblByb3A7IH0sXG5cdFx0Z2V0IHRyYW5zaXRpb25FbmRFdmVudCAoKSB7IHJldHVybiB0cmFuc2l0aW9uRW5kRXZlbnQ7IH0sXG5cdFx0Z2V0IGFuaW1hdGlvblByb3AgKCkgeyByZXR1cm4gYW5pbWF0aW9uUHJvcDsgfSxcblx0XHRnZXQgYW5pbWF0aW9uRW5kRXZlbnQgKCkgeyByZXR1cm4gYW5pbWF0aW9uRW5kRXZlbnQ7IH0sXG5cdFx0bmV4dFRpY2s6IG5leHRUaWNrLFxuXHRcdGdldCBfU2V0ICgpIHsgcmV0dXJuIF9TZXQ7IH0sXG5cdFx0cXVlcnk6IHF1ZXJ5LFxuXHRcdGluRG9jOiBpbkRvYyxcblx0XHRnZXRBdHRyOiBnZXRBdHRyLFxuXHRcdGdldEJpbmRBdHRyOiBnZXRCaW5kQXR0cixcblx0XHRoYXNCaW5kQXR0cjogaGFzQmluZEF0dHIsXG5cdFx0YmVmb3JlOiBiZWZvcmUsXG5cdFx0YWZ0ZXI6IGFmdGVyLFxuXHRcdHJlbW92ZTogcmVtb3ZlLFxuXHRcdHByZXBlbmQ6IHByZXBlbmQsXG5cdFx0cmVwbGFjZTogcmVwbGFjZSxcblx0XHRvbjogb24sXG5cdFx0b2ZmOiBvZmYsXG5cdFx0c2V0Q2xhc3M6IHNldENsYXNzLFxuXHRcdGFkZENsYXNzOiBhZGRDbGFzcyxcblx0XHRyZW1vdmVDbGFzczogcmVtb3ZlQ2xhc3MsXG5cdFx0ZXh0cmFjdENvbnRlbnQ6IGV4dHJhY3RDb250ZW50LFxuXHRcdHRyaW1Ob2RlOiB0cmltTm9kZSxcblx0XHRpc1RlbXBsYXRlOiBpc1RlbXBsYXRlLFxuXHRcdGNyZWF0ZUFuY2hvcjogY3JlYXRlQW5jaG9yLFxuXHRcdGZpbmRSZWY6IGZpbmRSZWYsXG5cdFx0bWFwTm9kZVJhbmdlOiBtYXBOb2RlUmFuZ2UsXG5cdFx0cmVtb3ZlTm9kZVJhbmdlOiByZW1vdmVOb2RlUmFuZ2UsXG5cdFx0aXNGcmFnbWVudDogaXNGcmFnbWVudCxcblx0XHRnZXRPdXRlckhUTUw6IGdldE91dGVySFRNTCxcblx0XHRtZXJnZU9wdGlvbnM6IG1lcmdlT3B0aW9ucyxcblx0XHRyZXNvbHZlQXNzZXQ6IHJlc29sdmVBc3NldCxcblx0XHRjaGVja0NvbXBvbmVudEF0dHI6IGNoZWNrQ29tcG9uZW50QXR0cixcblx0XHRjb21tb25UYWdSRTogY29tbW9uVGFnUkUsXG5cdFx0cmVzZXJ2ZWRUYWdSRTogcmVzZXJ2ZWRUYWdSRSxcblx0XHRnZXQgd2FybiAoKSB7IHJldHVybiB3YXJuOyB9XG5cdH0pO1xuXHRcblx0dmFyIHVpZCA9IDA7XG5cdFxuXHRmdW5jdGlvbiBpbml0TWl4aW4gKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIFRoZSBtYWluIGluaXQgc2VxdWVuY2UuIFRoaXMgaXMgY2FsbGVkIGZvciBldmVyeVxuXHQgICAqIGluc3RhbmNlLCBpbmNsdWRpbmcgb25lcyB0aGF0IGFyZSBjcmVhdGVkIGZyb20gZXh0ZW5kZWRcblx0ICAgKiBjb25zdHJ1Y3RvcnMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIHRoaXMgb3B0aW9ucyBvYmplY3Qgc2hvdWxkIGJlXG5cdCAgICogICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgcmVzdWx0IG9mIG1lcmdpbmcgY2xhc3Ncblx0ICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgYW5kIHRoZSBvcHRpb25zIHBhc3NlZFxuXHQgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gdG8gdGhlIGNvbnN0cnVjdG9yLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcblx0ICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcblx0ICAgIHRoaXMuJGVsID0gbnVsbDtcblx0ICAgIHRoaXMuJHBhcmVudCA9IG9wdGlvbnMucGFyZW50O1xuXHQgICAgdGhpcy4kcm9vdCA9IHRoaXMuJHBhcmVudCA/IHRoaXMuJHBhcmVudC4kcm9vdCA6IHRoaXM7XG5cdCAgICB0aGlzLiRjaGlsZHJlbiA9IFtdO1xuXHQgICAgdGhpcy4kcmVmcyA9IHt9OyAvLyBjaGlsZCB2bSByZWZlcmVuY2VzXG5cdCAgICB0aGlzLiRlbHMgPSB7fTsgLy8gZWxlbWVudCByZWZlcmVuY2VzXG5cdCAgICB0aGlzLl93YXRjaGVycyA9IFtdOyAvLyBhbGwgd2F0Y2hlcnMgYXMgYW4gYXJyYXlcblx0ICAgIHRoaXMuX2RpcmVjdGl2ZXMgPSBbXTsgLy8gYWxsIGRpcmVjdGl2ZXNcblx0XG5cdCAgICAvLyBhIHVpZFxuXHQgICAgdGhpcy5fdWlkID0gdWlkKys7XG5cdFxuXHQgICAgLy8gYSBmbGFnIHRvIGF2b2lkIHRoaXMgYmVpbmcgb2JzZXJ2ZWRcblx0ICAgIHRoaXMuX2lzVnVlID0gdHJ1ZTtcblx0XG5cdCAgICAvLyBldmVudHMgYm9va2tlZXBpbmdcblx0ICAgIHRoaXMuX2V2ZW50cyA9IHt9OyAvLyByZWdpc3RlcmVkIGNhbGxiYWNrc1xuXHQgICAgdGhpcy5fZXZlbnRzQ291bnQgPSB7fTsgLy8gZm9yICRicm9hZGNhc3Qgb3B0aW1pemF0aW9uXG5cdFxuXHQgICAgLy8gZnJhZ21lbnQgaW5zdGFuY2UgcHJvcGVydGllc1xuXHQgICAgdGhpcy5faXNGcmFnbWVudCA9IGZhbHNlO1xuXHQgICAgdGhpcy5fZnJhZ21lbnQgPSAvLyBAdHlwZSB7RG9jdW1lbnRGcmFnbWVudH1cblx0ICAgIHRoaXMuX2ZyYWdtZW50U3RhcnQgPSAvLyBAdHlwZSB7VGV4dHxDb21tZW50fVxuXHQgICAgdGhpcy5fZnJhZ21lbnRFbmQgPSBudWxsOyAvLyBAdHlwZSB7VGV4dHxDb21tZW50fVxuXHRcblx0ICAgIC8vIGxpZmVjeWNsZSBzdGF0ZVxuXHQgICAgdGhpcy5faXNDb21waWxlZCA9IHRoaXMuX2lzRGVzdHJveWVkID0gdGhpcy5faXNSZWFkeSA9IHRoaXMuX2lzQXR0YWNoZWQgPSB0aGlzLl9pc0JlaW5nRGVzdHJveWVkID0gdGhpcy5fdkZvclJlbW92aW5nID0gZmFsc2U7XG5cdCAgICB0aGlzLl91bmxpbmtGbiA9IG51bGw7XG5cdFxuXHQgICAgLy8gY29udGV4dDpcblx0ICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGNvbnRleHRcblx0ICAgIC8vIHdpbGwgYmUgdGhlIGNvbW1vbiBwYXJlbnQgdm0gb2YgdGhpcyBpbnN0YW5jZVxuXHQgICAgLy8gYW5kIGl0cyBob3N0LlxuXHQgICAgdGhpcy5fY29udGV4dCA9IG9wdGlvbnMuX2NvbnRleHQgfHwgdGhpcy4kcGFyZW50O1xuXHRcblx0ICAgIC8vIHNjb3BlOlxuXHQgICAgLy8gaWYgdGhpcyBpcyBpbnNpZGUgYW4gaW5saW5lIHYtZm9yLCB0aGUgc2NvcGVcblx0ICAgIC8vIHdpbGwgYmUgdGhlIGludGVybWVkaWF0ZSBzY29wZSBjcmVhdGVkIGZvciB0aGlzXG5cdCAgICAvLyByZXBlYXQgZnJhZ21lbnQuIHRoaXMgaXMgdXNlZCBmb3IgbGlua2luZyBwcm9wc1xuXHQgICAgLy8gYW5kIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuXHQgICAgdGhpcy5fc2NvcGUgPSBvcHRpb25zLl9zY29wZTtcblx0XG5cdCAgICAvLyBmcmFnbWVudDpcblx0ICAgIC8vIGlmIHRoaXMgaW5zdGFuY2UgaXMgY29tcGlsZWQgaW5zaWRlIGEgRnJhZ21lbnQsIGl0XG5cdCAgICAvLyBuZWVkcyB0byByZWlnc3RlciBpdHNlbGYgYXMgYSBjaGlsZCBvZiB0aGF0IGZyYWdtZW50XG5cdCAgICAvLyBmb3IgYXR0YWNoL2RldGFjaCB0byB3b3JrIHByb3Blcmx5LlxuXHQgICAgdGhpcy5fZnJhZyA9IG9wdGlvbnMuX2ZyYWc7XG5cdCAgICBpZiAodGhpcy5fZnJhZykge1xuXHQgICAgICB0aGlzLl9mcmFnLmNoaWxkcmVuLnB1c2godGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gcHVzaCBzZWxmIGludG8gcGFyZW50IC8gdHJhbnNjbHVzaW9uIGhvc3Rcblx0ICAgIGlmICh0aGlzLiRwYXJlbnQpIHtcblx0ICAgICAgdGhpcy4kcGFyZW50LiRjaGlsZHJlbi5wdXNoKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIG1lcmdlIG9wdGlvbnMuXG5cdCAgICBvcHRpb25zID0gdGhpcy4kb3B0aW9ucyA9IG1lcmdlT3B0aW9ucyh0aGlzLmNvbnN0cnVjdG9yLm9wdGlvbnMsIG9wdGlvbnMsIHRoaXMpO1xuXHRcblx0ICAgIC8vIHNldCByZWZcblx0ICAgIHRoaXMuX3VwZGF0ZVJlZigpO1xuXHRcblx0ICAgIC8vIGluaXRpYWxpemUgZGF0YSBhcyBlbXB0eSBvYmplY3QuXG5cdCAgICAvLyBpdCB3aWxsIGJlIGZpbGxlZCB1cCBpbiBfaW5pdERhdGEoKS5cblx0ICAgIHRoaXMuX2RhdGEgPSB7fTtcblx0XG5cdCAgICAvLyBjYWxsIGluaXQgaG9va1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2luaXQnKTtcblx0XG5cdCAgICAvLyBpbml0aWFsaXplIGRhdGEgb2JzZXJ2YXRpb24gYW5kIHNjb3BlIGluaGVyaXRhbmNlLlxuXHQgICAgdGhpcy5faW5pdFN0YXRlKCk7XG5cdFxuXHQgICAgLy8gc2V0dXAgZXZlbnQgc3lzdGVtIGFuZCBvcHRpb24gZXZlbnRzLlxuXHQgICAgdGhpcy5faW5pdEV2ZW50cygpO1xuXHRcblx0ICAgIC8vIGNhbGwgY3JlYXRlZCBob29rXG5cdCAgICB0aGlzLl9jYWxsSG9vaygnY3JlYXRlZCcpO1xuXHRcblx0ICAgIC8vIGlmIGBlbGAgb3B0aW9uIGlzIHBhc3NlZCwgc3RhcnQgY29tcGlsYXRpb24uXG5cdCAgICBpZiAob3B0aW9ucy5lbCkge1xuXHQgICAgICB0aGlzLiRtb3VudChvcHRpb25zLmVsKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgcGF0aENhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXHRcblx0Ly8gYWN0aW9uc1xuXHR2YXIgQVBQRU5EID0gMDtcblx0dmFyIFBVU0ggPSAxO1xuXHR2YXIgSU5DX1NVQl9QQVRIX0RFUFRIID0gMjtcblx0dmFyIFBVU0hfU1VCX1BBVEggPSAzO1xuXHRcblx0Ly8gc3RhdGVzXG5cdHZhciBCRUZPUkVfUEFUSCA9IDA7XG5cdHZhciBJTl9QQVRIID0gMTtcblx0dmFyIEJFRk9SRV9JREVOVCA9IDI7XG5cdHZhciBJTl9JREVOVCA9IDM7XG5cdHZhciBJTl9TVUJfUEFUSCA9IDQ7XG5cdHZhciBJTl9TSU5HTEVfUVVPVEUgPSA1O1xuXHR2YXIgSU5fRE9VQkxFX1FVT1RFID0gNjtcblx0dmFyIEFGVEVSX1BBVEggPSA3O1xuXHR2YXIgRVJST1IgPSA4O1xuXHRcblx0dmFyIHBhdGhTdGF0ZU1hY2hpbmUgPSBbXTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbQkVGT1JFX1BBVEhdID0ge1xuXHQgICd3cyc6IFtCRUZPUkVfUEFUSF0sXG5cdCAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdLFxuXHQgICdbJzogW0lOX1NVQl9QQVRIXSxcblx0ICAnZW9mJzogW0FGVEVSX1BBVEhdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0lOX1BBVEhdID0ge1xuXHQgICd3cyc6IFtJTl9QQVRIXSxcblx0ICAnLic6IFtCRUZPUkVfSURFTlRdLFxuXHQgICdbJzogW0lOX1NVQl9QQVRIXSxcblx0ICAnZW9mJzogW0FGVEVSX1BBVEhdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9JREVOVF0gPSB7XG5cdCAgJ3dzJzogW0JFRk9SRV9JREVOVF0sXG5cdCAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0lOX0lERU5UXSA9IHtcblx0ICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sXG5cdCAgJzAnOiBbSU5fSURFTlQsIEFQUEVORF0sXG5cdCAgJ251bWJlcic6IFtJTl9JREVOVCwgQVBQRU5EXSxcblx0ICAnd3MnOiBbSU5fUEFUSCwgUFVTSF0sXG5cdCAgJy4nOiBbQkVGT1JFX0lERU5ULCBQVVNIXSxcblx0ICAnWyc6IFtJTl9TVUJfUEFUSCwgUFVTSF0sXG5cdCAgJ2VvZic6IFtBRlRFUl9QQVRILCBQVVNIXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtJTl9TVUJfUEFUSF0gPSB7XG5cdCAgXCInXCI6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF0sXG5cdCAgJ1wiJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5EXSxcblx0ICAnWyc6IFtJTl9TVUJfUEFUSCwgSU5DX1NVQl9QQVRIX0RFUFRIXSxcblx0ICAnXSc6IFtJTl9QQVRILCBQVVNIX1NVQl9QQVRIXSxcblx0ICAnZW9mJzogRVJST1IsXG5cdCAgJ2Vsc2UnOiBbSU5fU1VCX1BBVEgsIEFQUEVORF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbSU5fU0lOR0xFX1FVT1RFXSA9IHtcblx0ICBcIidcIjogW0lOX1NVQl9QQVRILCBBUFBFTkRdLFxuXHQgICdlb2YnOiBFUlJPUixcblx0ICAnZWxzZSc6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbSU5fRE9VQkxFX1FVT1RFXSA9IHtcblx0ICAnXCInOiBbSU5fU1VCX1BBVEgsIEFQUEVORF0sXG5cdCAgJ2VvZic6IEVSUk9SLFxuXHQgICdlbHNlJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5EXVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSB0aGUgdHlwZSBvZiBhIGNoYXJhY3RlciBpbiBhIGtleXBhdGguXG5cdCAqXG5cdCAqIEBwYXJhbSB7Q2hhcn0gY2hcblx0ICogQHJldHVybiB7U3RyaW5nfSB0eXBlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0UGF0aENoYXJUeXBlKGNoKSB7XG5cdCAgaWYgKGNoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHJldHVybiAnZW9mJztcblx0ICB9XG5cdFxuXHQgIHZhciBjb2RlID0gY2guY2hhckNvZGVBdCgwKTtcblx0XG5cdCAgc3dpdGNoIChjb2RlKSB7XG5cdCAgICBjYXNlIDB4NUI6IC8vIFtcblx0ICAgIGNhc2UgMHg1RDogLy8gXVxuXHQgICAgY2FzZSAweDJFOiAvLyAuXG5cdCAgICBjYXNlIDB4MjI6IC8vIFwiXG5cdCAgICBjYXNlIDB4Mjc6IC8vICdcblx0ICAgIGNhc2UgMHgzMDpcblx0ICAgICAgLy8gMFxuXHQgICAgICByZXR1cm4gY2g7XG5cdFxuXHQgICAgY2FzZSAweDVGOiAvLyBfXG5cdCAgICBjYXNlIDB4MjQ6XG5cdCAgICAgIC8vICRcblx0ICAgICAgcmV0dXJuICdpZGVudCc7XG5cdFxuXHQgICAgY2FzZSAweDIwOiAvLyBTcGFjZVxuXHQgICAgY2FzZSAweDA5OiAvLyBUYWJcblx0ICAgIGNhc2UgMHgwQTogLy8gTmV3bGluZVxuXHQgICAgY2FzZSAweDBEOiAvLyBSZXR1cm5cblx0ICAgIGNhc2UgMHhBMDogLy8gTm8tYnJlYWsgc3BhY2Vcblx0ICAgIGNhc2UgMHhGRUZGOiAvLyBCeXRlIE9yZGVyIE1hcmtcblx0ICAgIGNhc2UgMHgyMDI4OiAvLyBMaW5lIFNlcGFyYXRvclxuXHQgICAgY2FzZSAweDIwMjk6XG5cdCAgICAgIC8vIFBhcmFncmFwaCBTZXBhcmF0b3Jcblx0ICAgICAgcmV0dXJuICd3cyc7XG5cdCAgfVxuXHRcblx0ICAvLyBhLXosIEEtWlxuXHQgIGlmIChjb2RlID49IDB4NjEgJiYgY29kZSA8PSAweDdBIHx8IGNvZGUgPj0gMHg0MSAmJiBjb2RlIDw9IDB4NUEpIHtcblx0ICAgIHJldHVybiAnaWRlbnQnO1xuXHQgIH1cblx0XG5cdCAgLy8gMS05XG5cdCAgaWYgKGNvZGUgPj0gMHgzMSAmJiBjb2RlIDw9IDB4MzkpIHtcblx0ICAgIHJldHVybiAnbnVtYmVyJztcblx0ICB9XG5cdFxuXHQgIHJldHVybiAnZWxzZSc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JtYXQgYSBzdWJQYXRoLCByZXR1cm4gaXRzIHBsYWluIGZvcm0gaWYgaXQgaXNcblx0ICogYSBsaXRlcmFsIHN0cmluZyBvciBudW1iZXIuIE90aGVyd2lzZSBwcmVwZW5kIHRoZVxuXHQgKiBkeW5hbWljIGluZGljYXRvciAoKikuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRTdWJQYXRoKHBhdGgpIHtcblx0ICB2YXIgdHJpbW1lZCA9IHBhdGgudHJpbSgpO1xuXHQgIC8vIGludmFsaWQgbGVhZGluZyAwXG5cdCAgaWYgKHBhdGguY2hhckF0KDApID09PSAnMCcgJiYgaXNOYU4ocGF0aCkpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgcmV0dXJuIGlzTGl0ZXJhbCh0cmltbWVkKSA/IHN0cmlwUXVvdGVzKHRyaW1tZWQpIDogJyonICsgdHJpbW1lZDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhcnNlIGEgc3RyaW5nIHBhdGggaW50byBhbiBhcnJheSBvZiBzZWdtZW50c1xuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2UocGF0aCkge1xuXHQgIHZhciBrZXlzID0gW107XG5cdCAgdmFyIGluZGV4ID0gLTE7XG5cdCAgdmFyIG1vZGUgPSBCRUZPUkVfUEFUSDtcblx0ICB2YXIgc3ViUGF0aERlcHRoID0gMDtcblx0ICB2YXIgYywgbmV3Q2hhciwga2V5LCB0eXBlLCB0cmFuc2l0aW9uLCBhY3Rpb24sIHR5cGVNYXA7XG5cdFxuXHQgIHZhciBhY3Rpb25zID0gW107XG5cdFxuXHQgIGFjdGlvbnNbUFVTSF0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoa2V5ICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAga2V5cy5wdXNoKGtleSk7XG5cdCAgICAgIGtleSA9IHVuZGVmaW5lZDtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBhY3Rpb25zW0FQUEVORF0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAga2V5ID0gbmV3Q2hhcjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGtleSArPSBuZXdDaGFyO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGFjdGlvbnNbSU5DX1NVQl9QQVRIX0RFUFRIXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xuXHQgICAgc3ViUGF0aERlcHRoKys7XG5cdCAgfTtcblx0XG5cdCAgYWN0aW9uc1tQVVNIX1NVQl9QQVRIXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChzdWJQYXRoRGVwdGggPiAwKSB7XG5cdCAgICAgIHN1YlBhdGhEZXB0aC0tO1xuXHQgICAgICBtb2RlID0gSU5fU1VCX1BBVEg7XG5cdCAgICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc3ViUGF0aERlcHRoID0gMDtcblx0ICAgICAga2V5ID0gZm9ybWF0U3ViUGF0aChrZXkpO1xuXHQgICAgICBpZiAoa2V5ID09PSBmYWxzZSkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBhY3Rpb25zW1BVU0hdKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBtYXliZVVuZXNjYXBlUXVvdGUoKSB7XG5cdCAgICB2YXIgbmV4dENoYXIgPSBwYXRoW2luZGV4ICsgMV07XG5cdCAgICBpZiAobW9kZSA9PT0gSU5fU0lOR0xFX1FVT1RFICYmIG5leHRDaGFyID09PSBcIidcIiB8fCBtb2RlID09PSBJTl9ET1VCTEVfUVVPVEUgJiYgbmV4dENoYXIgPT09ICdcIicpIHtcblx0ICAgICAgaW5kZXgrKztcblx0ICAgICAgbmV3Q2hhciA9ICdcXFxcJyArIG5leHRDaGFyO1xuXHQgICAgICBhY3Rpb25zW0FQUEVORF0oKTtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB3aGlsZSAobW9kZSAhPSBudWxsKSB7XG5cdCAgICBpbmRleCsrO1xuXHQgICAgYyA9IHBhdGhbaW5kZXhdO1xuXHRcblx0ICAgIGlmIChjID09PSAnXFxcXCcgJiYgbWF5YmVVbmVzY2FwZVF1b3RlKCkpIHtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdFxuXHQgICAgdHlwZSA9IGdldFBhdGhDaGFyVHlwZShjKTtcblx0ICAgIHR5cGVNYXAgPSBwYXRoU3RhdGVNYWNoaW5lW21vZGVdO1xuXHQgICAgdHJhbnNpdGlvbiA9IHR5cGVNYXBbdHlwZV0gfHwgdHlwZU1hcFsnZWxzZSddIHx8IEVSUk9SO1xuXHRcblx0ICAgIGlmICh0cmFuc2l0aW9uID09PSBFUlJPUikge1xuXHQgICAgICByZXR1cm47IC8vIHBhcnNlIGVycm9yXG5cdCAgICB9XG5cdFxuXHQgICAgbW9kZSA9IHRyYW5zaXRpb25bMF07XG5cdCAgICBhY3Rpb24gPSBhY3Rpb25zW3RyYW5zaXRpb25bMV1dO1xuXHQgICAgaWYgKGFjdGlvbikge1xuXHQgICAgICBuZXdDaGFyID0gdHJhbnNpdGlvblsyXTtcblx0ICAgICAgbmV3Q2hhciA9IG5ld0NoYXIgPT09IHVuZGVmaW5lZCA/IGMgOiBuZXdDaGFyO1xuXHQgICAgICBpZiAoYWN0aW9uKCkgPT09IGZhbHNlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKG1vZGUgPT09IEFGVEVSX1BBVEgpIHtcblx0ICAgICAga2V5cy5yYXcgPSBwYXRoO1xuXHQgICAgICByZXR1cm4ga2V5cztcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFeHRlcm5hbCBwYXJzZSB0aGF0IGNoZWNrIGZvciBhIGNhY2hlIGhpdCBmaXJzdFxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgpIHtcblx0ICB2YXIgaGl0ID0gcGF0aENhY2hlLmdldChwYXRoKTtcblx0ICBpZiAoIWhpdCkge1xuXHQgICAgaGl0ID0gcGFyc2UocGF0aCk7XG5cdCAgICBpZiAoaGl0KSB7XG5cdCAgICAgIHBhdGhDYWNoZS5wdXQocGF0aCwgaGl0KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGhpdDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCBmcm9tIGFuIG9iamVjdCBmcm9tIGEgcGF0aCBzdHJpbmdcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldFBhdGgob2JqLCBwYXRoKSB7XG5cdCAgcmV0dXJuIHBhcnNlRXhwcmVzc2lvbihwYXRoKS5nZXQob2JqKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFdhcm4gYWdhaW5zdCBzZXR0aW5nIG5vbi1leGlzdGVudCByb290IHBhdGggb24gYSB2bS5cblx0ICovXG5cdFxuXHR2YXIgd2Fybk5vbkV4aXN0ZW50O1xuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIHdhcm5Ob25FeGlzdGVudCA9IGZ1bmN0aW9uIChwYXRoLCB2bSkge1xuXHQgICAgd2FybignWW91IGFyZSBzZXR0aW5nIGEgbm9uLWV4aXN0ZW50IHBhdGggXCInICsgcGF0aC5yYXcgKyAnXCIgJyArICdvbiBhIHZtIGluc3RhbmNlLiBDb25zaWRlciBwcmUtaW5pdGlhbGl6aW5nIHRoZSBwcm9wZXJ0eSAnICsgJ3dpdGggdGhlIFwiZGF0YVwiIG9wdGlvbiBmb3IgbW9yZSByZWxpYWJsZSByZWFjdGl2aXR5ICcgKyAnYW5kIGJldHRlciBwZXJmb3JtYW5jZS4nLCB2bSk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFNldCBvbiBhbiBvYmplY3QgZnJvbSBhIHBhdGhcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZyB8IEFycmF5fSBwYXRoXG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2V0UGF0aChvYmosIHBhdGgsIHZhbCkge1xuXHQgIHZhciBvcmlnaW5hbCA9IG9iajtcblx0ICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG5cdCAgICBwYXRoID0gcGFyc2UocGF0aCk7XG5cdCAgfVxuXHQgIGlmICghcGF0aCB8fCAhaXNPYmplY3Qob2JqKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICB2YXIgbGFzdCwga2V5O1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gcGF0aC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGxhc3QgPSBvYmo7XG5cdCAgICBrZXkgPSBwYXRoW2ldO1xuXHQgICAgaWYgKGtleS5jaGFyQXQoMCkgPT09ICcqJykge1xuXHQgICAgICBrZXkgPSBwYXJzZUV4cHJlc3Npb24oa2V5LnNsaWNlKDEpKS5nZXQuY2FsbChvcmlnaW5hbCwgb3JpZ2luYWwpO1xuXHQgICAgfVxuXHQgICAgaWYgKGkgPCBsIC0gMSkge1xuXHQgICAgICBvYmogPSBvYmpba2V5XTtcblx0ICAgICAgaWYgKCFpc09iamVjdChvYmopKSB7XG5cdCAgICAgICAgb2JqID0ge307XG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgbGFzdC5faXNWdWUpIHtcblx0ICAgICAgICAgIHdhcm5Ob25FeGlzdGVudChwYXRoLCBsYXN0KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc2V0KGxhc3QsIGtleSwgb2JqKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKGlzQXJyYXkob2JqKSkge1xuXHQgICAgICAgIG9iai4kc2V0KGtleSwgdmFsKTtcblx0ICAgICAgfSBlbHNlIGlmIChrZXkgaW4gb2JqKSB7XG5cdCAgICAgICAgb2JqW2tleV0gPSB2YWw7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgb2JqLl9pc1Z1ZSkge1xuXHQgICAgICAgICAgd2Fybk5vbkV4aXN0ZW50KHBhdGgsIG9iaik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHNldChvYmosIGtleSwgdmFsKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0dmFyIHBhdGggPSBPYmplY3QuZnJlZXplKHtcblx0ICBwYXJzZVBhdGg6IHBhcnNlUGF0aCxcblx0ICBnZXRQYXRoOiBnZXRQYXRoLFxuXHQgIHNldFBhdGg6IHNldFBhdGhcblx0fSk7XG5cdFxuXHR2YXIgZXhwcmVzc2lvbkNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXHRcblx0dmFyIGFsbG93ZWRLZXl3b3JkcyA9ICdNYXRoLERhdGUsdGhpcyx0cnVlLGZhbHNlLG51bGwsdW5kZWZpbmVkLEluZmluaXR5LE5hTiwnICsgJ2lzTmFOLGlzRmluaXRlLGRlY29kZVVSSSxkZWNvZGVVUklDb21wb25lbnQsZW5jb2RlVVJJLCcgKyAnZW5jb2RlVVJJQ29tcG9uZW50LHBhcnNlSW50LHBhcnNlRmxvYXQnO1xuXHR2YXIgYWxsb3dlZEtleXdvcmRzUkUgPSBuZXcgUmVnRXhwKCdeKCcgKyBhbGxvd2VkS2V5d29yZHMucmVwbGFjZSgvLC9nLCAnXFxcXGJ8JykgKyAnXFxcXGIpJyk7XG5cdFxuXHQvLyBrZXl3b3JkcyB0aGF0IGRvbid0IG1ha2Ugc2Vuc2UgaW5zaWRlIGV4cHJlc3Npb25zXG5cdHZhciBpbXByb3BlcktleXdvcmRzID0gJ2JyZWFrLGNhc2UsY2xhc3MsY2F0Y2gsY29uc3QsY29udGludWUsZGVidWdnZXIsZGVmYXVsdCwnICsgJ2RlbGV0ZSxkbyxlbHNlLGV4cG9ydCxleHRlbmRzLGZpbmFsbHksZm9yLGZ1bmN0aW9uLGlmLCcgKyAnaW1wb3J0LGluLGluc3RhbmNlb2YsbGV0LHJldHVybixzdXBlcixzd2l0Y2gsdGhyb3csdHJ5LCcgKyAndmFyLHdoaWxlLHdpdGgseWllbGQsZW51bSxhd2FpdCxpbXBsZW1lbnRzLHBhY2thZ2UsJyArICdwcm90ZWN0ZWQsc3RhdGljLGludGVyZmFjZSxwcml2YXRlLHB1YmxpYyc7XG5cdHZhciBpbXByb3BlcktleXdvcmRzUkUgPSBuZXcgUmVnRXhwKCdeKCcgKyBpbXByb3BlcktleXdvcmRzLnJlcGxhY2UoLywvZywgJ1xcXFxifCcpICsgJ1xcXFxiKScpO1xuXHRcblx0dmFyIHdzUkUgPSAvXFxzL2c7XG5cdHZhciBuZXdsaW5lUkUgPSAvXFxuL2c7XG5cdHZhciBzYXZlUkUgPSAvW1xceyxdXFxzKltcXHdcXCRfXStcXHMqOnwoJyg/OlteJ1xcXFxdfFxcXFwuKSonfFwiKD86W15cIlxcXFxdfFxcXFwuKSpcInxgKD86W15gXFxcXF18XFxcXC4pKlxcJFxce3xcXH0oPzpbXmBcXFxcXXxcXFxcLikqYHxgKD86W15gXFxcXF18XFxcXC4pKmApfG5ldyB8dHlwZW9mIHx2b2lkIC9nO1xuXHR2YXIgcmVzdG9yZVJFID0gL1wiKFxcZCspXCIvZztcblx0dmFyIHBhdGhUZXN0UkUgPSAvXltBLVphLXpfJF1bXFx3JF0qKD86XFwuW0EtWmEtel8kXVtcXHckXSp8XFxbJy4qPydcXF18XFxbXCIuKj9cIlxcXXxcXFtcXGQrXFxdfFxcW1tBLVphLXpfJF1bXFx3JF0qXFxdKSokLztcblx0dmFyIGlkZW50UkUgPSAvW15cXHckXFwuXSg/OltBLVphLXpfJF1bXFx3JF0qKS9nO1xuXHR2YXIgbGl0ZXJhbFZhbHVlUkUkMSA9IC9eKD86dHJ1ZXxmYWxzZXxudWxsfHVuZGVmaW5lZHxJbmZpbml0eXxOYU4pJC87XG5cdFxuXHRmdW5jdGlvbiBub29wKCkge31cblx0XG5cdC8qKlxuXHQgKiBTYXZlIC8gUmV3cml0ZSAvIFJlc3RvcmVcblx0ICpcblx0ICogV2hlbiByZXdyaXRpbmcgcGF0aHMgZm91bmQgaW4gYW4gZXhwcmVzc2lvbiwgaXQgaXNcblx0ICogcG9zc2libGUgZm9yIHRoZSBzYW1lIGxldHRlciBzZXF1ZW5jZXMgdG8gYmUgZm91bmQgaW5cblx0ICogc3RyaW5ncyBhbmQgT2JqZWN0IGxpdGVyYWwgcHJvcGVydHkga2V5cy4gVGhlcmVmb3JlIHdlXG5cdCAqIHJlbW92ZSBhbmQgc3RvcmUgdGhlc2UgcGFydHMgaW4gYSB0ZW1wb3JhcnkgYXJyYXksIGFuZFxuXHQgKiByZXN0b3JlIHRoZW0gYWZ0ZXIgdGhlIHBhdGggcmV3cml0ZS5cblx0ICovXG5cdFxuXHR2YXIgc2F2ZWQgPSBbXTtcblx0XG5cdC8qKlxuXHQgKiBTYXZlIHJlcGxhY2VyXG5cdCAqXG5cdCAqIFRoZSBzYXZlIHJlZ2V4IGNhbiBtYXRjaCB0d28gcG9zc2libGUgY2FzZXM6XG5cdCAqIDEuIEFuIG9wZW5pbmcgb2JqZWN0IGxpdGVyYWxcblx0ICogMi4gQSBzdHJpbmdcblx0ICogSWYgbWF0Y2hlZCBhcyBhIHBsYWluIHN0cmluZywgd2UgbmVlZCB0byBlc2NhcGUgaXRzXG5cdCAqIG5ld2xpbmVzLCBzaW5jZSB0aGUgc3RyaW5nIG5lZWRzIHRvIGJlIHByZXNlcnZlZCB3aGVuXG5cdCAqIGdlbmVyYXRpbmcgdGhlIGZ1bmN0aW9uIGJvZHkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlzU3RyaW5nIC0gc3RyIGlmIG1hdGNoZWQgYXMgYSBzdHJpbmdcblx0ICogQHJldHVybiB7U3RyaW5nfSAtIHBsYWNlaG9sZGVyIHdpdGggaW5kZXhcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzYXZlKHN0ciwgaXNTdHJpbmcpIHtcblx0ICB2YXIgaSA9IHNhdmVkLmxlbmd0aDtcblx0ICBzYXZlZFtpXSA9IGlzU3RyaW5nID8gc3RyLnJlcGxhY2UobmV3bGluZVJFLCAnXFxcXG4nKSA6IHN0cjtcblx0ICByZXR1cm4gJ1wiJyArIGkgKyAnXCInO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUGF0aCByZXdyaXRlIHJlcGxhY2VyXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSByYXdcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJld3JpdGUocmF3KSB7XG5cdCAgdmFyIGMgPSByYXcuY2hhckF0KDApO1xuXHQgIHZhciBwYXRoID0gcmF3LnNsaWNlKDEpO1xuXHQgIGlmIChhbGxvd2VkS2V5d29yZHNSRS50ZXN0KHBhdGgpKSB7XG5cdCAgICByZXR1cm4gcmF3O1xuXHQgIH0gZWxzZSB7XG5cdCAgICBwYXRoID0gcGF0aC5pbmRleE9mKCdcIicpID4gLTEgPyBwYXRoLnJlcGxhY2UocmVzdG9yZVJFLCByZXN0b3JlKSA6IHBhdGg7XG5cdCAgICByZXR1cm4gYyArICdzY29wZS4nICsgcGF0aDtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZXN0b3JlIHJlcGxhY2VyXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IGkgLSBtYXRjaGVkIHNhdmUgaW5kZXhcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlc3RvcmUoc3RyLCBpKSB7XG5cdCAgcmV0dXJuIHNhdmVkW2ldO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmV3cml0ZSBhbiBleHByZXNzaW9uLCBwcmVmaXhpbmcgYWxsIHBhdGggYWNjZXNzb3JzIHdpdGhcblx0ICogYHNjb3BlLmAgYW5kIGdlbmVyYXRlIGdldHRlci9zZXR0ZXIgZnVuY3Rpb25zLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVHZXR0ZXIoZXhwKSB7XG5cdCAgaWYgKGltcHJvcGVyS2V5d29yZHNSRS50ZXN0KGV4cCkpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQXZvaWQgdXNpbmcgcmVzZXJ2ZWQga2V5d29yZHMgaW4gZXhwcmVzc2lvbjogJyArIGV4cCk7XG5cdCAgfVxuXHQgIC8vIHJlc2V0IHN0YXRlXG5cdCAgc2F2ZWQubGVuZ3RoID0gMDtcblx0ICAvLyBzYXZlIHN0cmluZ3MgYW5kIG9iamVjdCBsaXRlcmFsIGtleXNcblx0ICB2YXIgYm9keSA9IGV4cC5yZXBsYWNlKHNhdmVSRSwgc2F2ZSkucmVwbGFjZSh3c1JFLCAnJyk7XG5cdCAgLy8gcmV3cml0ZSBhbGwgcGF0aHNcblx0ICAvLyBwYWQgMSBzcGFjZSBoZXJlIGJlY2F1c2UgdGhlIHJlZ2V4IG1hdGNoZXMgMSBleHRyYSBjaGFyXG5cdCAgYm9keSA9ICgnICcgKyBib2R5KS5yZXBsYWNlKGlkZW50UkUsIHJld3JpdGUpLnJlcGxhY2UocmVzdG9yZVJFLCByZXN0b3JlKTtcblx0ICByZXR1cm4gbWFrZUdldHRlckZuKGJvZHkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQnVpbGQgYSBnZXR0ZXIgZnVuY3Rpb24uIFJlcXVpcmVzIGV2YWwuXG5cdCAqXG5cdCAqIFdlIGlzb2xhdGUgdGhlIHRyeS9jYXRjaCBzbyBpdCBkb2Vzbid0IGFmZmVjdCB0aGVcblx0ICogb3B0aW1pemF0aW9uIG9mIHRoZSBwYXJzZSBmdW5jdGlvbiB3aGVuIGl0IGlzIG5vdCBjYWxsZWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBib2R5XG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlR2V0dGVyRm4oYm9keSkge1xuXHQgIHRyeSB7XG5cdCAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1uZXctZnVuYyAqL1xuXHQgICAgcmV0dXJuIG5ldyBGdW5jdGlvbignc2NvcGUnLCAncmV0dXJuICcgKyBib2R5ICsgJzsnKTtcblx0ICAgIC8qIGVzbGludC1lbmFibGUgbm8tbmV3LWZ1bmMgKi9cblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKGUudG9TdHJpbmcoKS5tYXRjaCgvdW5zYWZlLWV2YWx8Q1NQLykpIHtcblx0ICAgICAgICB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHRoZSBkZWZhdWx0IGJ1aWxkIG9mIFZ1ZS5qcyBpbiBhbiBlbnZpcm9ubWVudCAnICsgJ3dpdGggQ29udGVudCBTZWN1cml0eSBQb2xpY3kgdGhhdCBwcm9oaWJpdHMgdW5zYWZlLWV2YWwuICcgKyAnVXNlIHRoZSBDU1AtY29tcGxpYW50IGJ1aWxkIGluc3RlYWQ6ICcgKyAnaHR0cDovL3Z1ZWpzLm9yZy9ndWlkZS9pbnN0YWxsYXRpb24uaHRtbCNDU1AtY29tcGxpYW50LWJ1aWxkJyk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgd2FybignSW52YWxpZCBleHByZXNzaW9uLiAnICsgJ0dlbmVyYXRlZCBmdW5jdGlvbiBib2R5OiAnICsgYm9keSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBub29wO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYSBzZXR0ZXIgZnVuY3Rpb24gZm9yIHRoZSBleHByZXNzaW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlU2V0dGVyKGV4cCkge1xuXHQgIHZhciBwYXRoID0gcGFyc2VQYXRoKGV4cCk7XG5cdCAgaWYgKHBhdGgpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIHZhbCkge1xuXHQgICAgICBzZXRQYXRoKHNjb3BlLCBwYXRoLCB2YWwpO1xuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHNldHRlciBleHByZXNzaW9uOiAnICsgZXhwKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBhbiBleHByZXNzaW9uIGludG8gcmUtd3JpdHRlbiBnZXR0ZXIvc2V0dGVycy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IG5lZWRTZXRcblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VFeHByZXNzaW9uKGV4cCwgbmVlZFNldCkge1xuXHQgIGV4cCA9IGV4cC50cmltKCk7XG5cdCAgLy8gdHJ5IGNhY2hlXG5cdCAgdmFyIGhpdCA9IGV4cHJlc3Npb25DYWNoZS5nZXQoZXhwKTtcblx0ICBpZiAoaGl0KSB7XG5cdCAgICBpZiAobmVlZFNldCAmJiAhaGl0LnNldCkge1xuXHQgICAgICBoaXQuc2V0ID0gY29tcGlsZVNldHRlcihoaXQuZXhwKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBoaXQ7XG5cdCAgfVxuXHQgIHZhciByZXMgPSB7IGV4cDogZXhwIH07XG5cdCAgcmVzLmdldCA9IGlzU2ltcGxlUGF0aChleHApICYmIGV4cC5pbmRleE9mKCdbJykgPCAwXG5cdCAgLy8gb3B0aW1pemVkIHN1cGVyIHNpbXBsZSBnZXR0ZXJcblx0ICA/IG1ha2VHZXR0ZXJGbignc2NvcGUuJyArIGV4cClcblx0ICAvLyBkeW5hbWljIGdldHRlclxuXHQgIDogY29tcGlsZUdldHRlcihleHApO1xuXHQgIGlmIChuZWVkU2V0KSB7XG5cdCAgICByZXMuc2V0ID0gY29tcGlsZVNldHRlcihleHApO1xuXHQgIH1cblx0ICBleHByZXNzaW9uQ2FjaGUucHV0KGV4cCwgcmVzKTtcblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZXhwcmVzc2lvbiBpcyBhIHNpbXBsZSBwYXRoLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNTaW1wbGVQYXRoKGV4cCkge1xuXHQgIHJldHVybiBwYXRoVGVzdFJFLnRlc3QoZXhwKSAmJlxuXHQgIC8vIGRvbid0IHRyZWF0IGxpdGVyYWwgdmFsdWVzIGFzIHBhdGhzXG5cdCAgIWxpdGVyYWxWYWx1ZVJFJDEudGVzdChleHApICYmXG5cdCAgLy8gTWF0aCBjb25zdGFudHMgZS5nLiBNYXRoLlBJLCBNYXRoLkUgZXRjLlxuXHQgIGV4cC5zbGljZSgwLCA1KSAhPT0gJ01hdGguJztcblx0fVxuXHRcblx0dmFyIGV4cHJlc3Npb24gPSBPYmplY3QuZnJlZXplKHtcblx0ICBwYXJzZUV4cHJlc3Npb246IHBhcnNlRXhwcmVzc2lvbixcblx0ICBpc1NpbXBsZVBhdGg6IGlzU2ltcGxlUGF0aFxuXHR9KTtcblx0XG5cdC8vIHdlIGhhdmUgdHdvIHNlcGFyYXRlIHF1ZXVlczogb25lIGZvciBkaXJlY3RpdmUgdXBkYXRlc1xuXHQvLyBhbmQgb25lIGZvciB1c2VyIHdhdGNoZXIgcmVnaXN0ZXJlZCB2aWEgJHdhdGNoKCkuXG5cdC8vIHdlIHdhbnQgdG8gZ3VhcmFudGVlIGRpcmVjdGl2ZSB1cGRhdGVzIHRvIGJlIGNhbGxlZFxuXHQvLyBiZWZvcmUgdXNlciB3YXRjaGVycyBzbyB0aGF0IHdoZW4gdXNlciB3YXRjaGVycyBhcmVcblx0Ly8gdHJpZ2dlcmVkLCB0aGUgRE9NIHdvdWxkIGhhdmUgYWxyZWFkeSBiZWVuIGluIHVwZGF0ZWRcblx0Ly8gc3RhdGUuXG5cdFxuXHR2YXIgcXVldWUgPSBbXTtcblx0dmFyIHVzZXJRdWV1ZSA9IFtdO1xuXHR2YXIgaGFzID0ge307XG5cdHZhciBjaXJjdWxhciA9IHt9O1xuXHR2YXIgd2FpdGluZyA9IGZhbHNlO1xuXHRcblx0LyoqXG5cdCAqIFJlc2V0IHRoZSBiYXRjaGVyJ3Mgc3RhdGUuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVzZXRCYXRjaGVyU3RhdGUoKSB7XG5cdCAgcXVldWUubGVuZ3RoID0gMDtcblx0ICB1c2VyUXVldWUubGVuZ3RoID0gMDtcblx0ICBoYXMgPSB7fTtcblx0ICBjaXJjdWxhciA9IHt9O1xuXHQgIHdhaXRpbmcgPSBmYWxzZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZsdXNoIGJvdGggcXVldWVzIGFuZCBydW4gdGhlIHdhdGNoZXJzLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZsdXNoQmF0Y2hlclF1ZXVlKCkge1xuXHQgIHZhciBfYWdhaW4gPSB0cnVlO1xuXHRcblx0ICBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHtcblx0ICAgIF9hZ2FpbiA9IGZhbHNlO1xuXHRcblx0ICAgIHJ1bkJhdGNoZXJRdWV1ZShxdWV1ZSk7XG5cdCAgICBydW5CYXRjaGVyUXVldWUodXNlclF1ZXVlKTtcblx0ICAgIC8vIHVzZXIgd2F0Y2hlcnMgdHJpZ2dlcmVkIG1vcmUgd2F0Y2hlcnMsXG5cdCAgICAvLyBrZWVwIGZsdXNoaW5nIHVudGlsIGl0IGRlcGxldGVzXG5cdCAgICBpZiAocXVldWUubGVuZ3RoKSB7XG5cdCAgICAgIF9hZ2FpbiA9IHRydWU7XG5cdCAgICAgIGNvbnRpbnVlIF9mdW5jdGlvbjtcblx0ICAgIH1cblx0ICAgIC8vIGRldiB0b29sIGhvb2tcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKGRldnRvb2xzICYmIGNvbmZpZy5kZXZ0b29scykge1xuXHQgICAgICBkZXZ0b29scy5lbWl0KCdmbHVzaCcpO1xuXHQgICAgfVxuXHQgICAgcmVzZXRCYXRjaGVyU3RhdGUoKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSdW4gdGhlIHdhdGNoZXJzIGluIGEgc2luZ2xlIHF1ZXVlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBxdWV1ZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJ1bkJhdGNoZXJRdWV1ZShxdWV1ZSkge1xuXHQgIC8vIGRvIG5vdCBjYWNoZSBsZW5ndGggYmVjYXVzZSBtb3JlIHdhdGNoZXJzIG1pZ2h0IGJlIHB1c2hlZFxuXHQgIC8vIGFzIHdlIHJ1biBleGlzdGluZyB3YXRjaGVyc1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciB3YXRjaGVyID0gcXVldWVbaV07XG5cdCAgICB2YXIgaWQgPSB3YXRjaGVyLmlkO1xuXHQgICAgaGFzW2lkXSA9IG51bGw7XG5cdCAgICB3YXRjaGVyLnJ1bigpO1xuXHQgICAgLy8gaW4gZGV2IGJ1aWxkLCBjaGVjayBhbmQgc3RvcCBjaXJjdWxhciB1cGRhdGVzLlxuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgaGFzW2lkXSAhPSBudWxsKSB7XG5cdCAgICAgIGNpcmN1bGFyW2lkXSA9IChjaXJjdWxhcltpZF0gfHwgMCkgKyAxO1xuXHQgICAgICBpZiAoY2lyY3VsYXJbaWRdID4gY29uZmlnLl9tYXhVcGRhdGVDb3VudCkge1xuXHQgICAgICAgIHdhcm4oJ1lvdSBtYXkgaGF2ZSBhbiBpbmZpbml0ZSB1cGRhdGUgbG9vcCBmb3Igd2F0Y2hlciAnICsgJ3dpdGggZXhwcmVzc2lvbiBcIicgKyB3YXRjaGVyLmV4cHJlc3Npb24gKyAnXCInLCB3YXRjaGVyLnZtKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICBxdWV1ZS5sZW5ndGggPSAwO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHVzaCBhIHdhdGNoZXIgaW50byB0aGUgd2F0Y2hlciBxdWV1ZS5cblx0ICogSm9icyB3aXRoIGR1cGxpY2F0ZSBJRHMgd2lsbCBiZSBza2lwcGVkIHVubGVzcyBpdCdzXG5cdCAqIHB1c2hlZCB3aGVuIHRoZSBxdWV1ZSBpcyBiZWluZyBmbHVzaGVkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1dhdGNoZXJ9IHdhdGNoZXJcblx0ICogICBwcm9wZXJ0aWVzOlxuXHQgKiAgIC0ge051bWJlcn0gaWRcblx0ICogICAtIHtGdW5jdGlvbn0gcnVuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHVzaFdhdGNoZXIod2F0Y2hlcikge1xuXHQgIHZhciBpZCA9IHdhdGNoZXIuaWQ7XG5cdCAgaWYgKGhhc1tpZF0gPT0gbnVsbCkge1xuXHQgICAgLy8gcHVzaCB3YXRjaGVyIGludG8gYXBwcm9wcmlhdGUgcXVldWVcblx0ICAgIHZhciBxID0gd2F0Y2hlci51c2VyID8gdXNlclF1ZXVlIDogcXVldWU7XG5cdCAgICBoYXNbaWRdID0gcS5sZW5ndGg7XG5cdCAgICBxLnB1c2god2F0Y2hlcik7XG5cdCAgICAvLyBxdWV1ZSB0aGUgZmx1c2hcblx0ICAgIGlmICghd2FpdGluZykge1xuXHQgICAgICB3YWl0aW5nID0gdHJ1ZTtcblx0ICAgICAgbmV4dFRpY2soZmx1c2hCYXRjaGVyUXVldWUpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIHVpZCQyID0gMDtcblx0XG5cdC8qKlxuXHQgKiBBIHdhdGNoZXIgcGFyc2VzIGFuIGV4cHJlc3Npb24sIGNvbGxlY3RzIGRlcGVuZGVuY2llcyxcblx0ICogYW5kIGZpcmVzIGNhbGxiYWNrIHdoZW4gdGhlIGV4cHJlc3Npb24gdmFsdWUgY2hhbmdlcy5cblx0ICogVGhpcyBpcyB1c2VkIGZvciBib3RoIHRoZSAkd2F0Y2goKSBhcGkgYW5kIGRpcmVjdGl2ZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gZXhwT3JGblxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiAgICAgICAgICAgICAgICAgLSB7QXJyYXl9IGZpbHRlcnNcblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHR3b1dheVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gZGVlcFxuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gdXNlclxuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gc3luY1xuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gbGF6eVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtwcmVQcm9jZXNzXVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtwb3N0UHJvY2Vzc11cblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqL1xuXHRmdW5jdGlvbiBXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwgb3B0aW9ucykge1xuXHQgIC8vIG1peCBpbiBvcHRpb25zXG5cdCAgaWYgKG9wdGlvbnMpIHtcblx0ICAgIGV4dGVuZCh0aGlzLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgdmFyIGlzRm4gPSB0eXBlb2YgZXhwT3JGbiA9PT0gJ2Z1bmN0aW9uJztcblx0ICB0aGlzLnZtID0gdm07XG5cdCAgdm0uX3dhdGNoZXJzLnB1c2godGhpcyk7XG5cdCAgdGhpcy5leHByZXNzaW9uID0gZXhwT3JGbjtcblx0ICB0aGlzLmNiID0gY2I7XG5cdCAgdGhpcy5pZCA9ICsrdWlkJDI7IC8vIHVpZCBmb3IgYmF0Y2hpbmdcblx0ICB0aGlzLmFjdGl2ZSA9IHRydWU7XG5cdCAgdGhpcy5kaXJ0eSA9IHRoaXMubGF6eTsgLy8gZm9yIGxhenkgd2F0Y2hlcnNcblx0ICB0aGlzLmRlcHMgPSBbXTtcblx0ICB0aGlzLm5ld0RlcHMgPSBbXTtcblx0ICB0aGlzLmRlcElkcyA9IG5ldyBfU2V0KCk7XG5cdCAgdGhpcy5uZXdEZXBJZHMgPSBuZXcgX1NldCgpO1xuXHQgIHRoaXMucHJldkVycm9yID0gbnVsbDsgLy8gZm9yIGFzeW5jIGVycm9yIHN0YWNrc1xuXHQgIC8vIHBhcnNlIGV4cHJlc3Npb24gZm9yIGdldHRlci9zZXR0ZXJcblx0ICBpZiAoaXNGbikge1xuXHQgICAgdGhpcy5nZXR0ZXIgPSBleHBPckZuO1xuXHQgICAgdGhpcy5zZXR0ZXIgPSB1bmRlZmluZWQ7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwT3JGbiwgdGhpcy50d29XYXkpO1xuXHQgICAgdGhpcy5nZXR0ZXIgPSByZXMuZ2V0O1xuXHQgICAgdGhpcy5zZXR0ZXIgPSByZXMuc2V0O1xuXHQgIH1cblx0ICB0aGlzLnZhbHVlID0gdGhpcy5sYXp5ID8gdW5kZWZpbmVkIDogdGhpcy5nZXQoKTtcblx0ICAvLyBzdGF0ZSBmb3IgYXZvaWRpbmcgZmFsc2UgdHJpZ2dlcnMgZm9yIGRlZXAgYW5kIEFycmF5XG5cdCAgLy8gd2F0Y2hlcnMgZHVyaW5nIHZtLl9kaWdlc3QoKVxuXHQgIHRoaXMucXVldWVkID0gdGhpcy5zaGFsbG93ID0gZmFsc2U7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFdmFsdWF0ZSB0aGUgZ2V0dGVyLCBhbmQgcmUtY29sbGVjdCBkZXBlbmRlbmNpZXMuXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHRoaXMuYmVmb3JlR2V0KCk7XG5cdCAgdmFyIHNjb3BlID0gdGhpcy5zY29wZSB8fCB0aGlzLnZtO1xuXHQgIHZhciB2YWx1ZTtcblx0ICB0cnkge1xuXHQgICAgdmFsdWUgPSB0aGlzLmdldHRlci5jYWxsKHNjb3BlLCBzY29wZSk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLndhcm5FeHByZXNzaW9uRXJyb3JzKSB7XG5cdCAgICAgIHdhcm4oJ0Vycm9yIHdoZW4gZXZhbHVhdGluZyBleHByZXNzaW9uICcgKyAnXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiOiAnICsgZS50b1N0cmluZygpLCB0aGlzLnZtKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gXCJ0b3VjaFwiIGV2ZXJ5IHByb3BlcnR5IHNvIHRoZXkgYXJlIGFsbCB0cmFja2VkIGFzXG5cdCAgLy8gZGVwZW5kZW5jaWVzIGZvciBkZWVwIHdhdGNoaW5nXG5cdCAgaWYgKHRoaXMuZGVlcCkge1xuXHQgICAgdHJhdmVyc2UodmFsdWUpO1xuXHQgIH1cblx0ICBpZiAodGhpcy5wcmVQcm9jZXNzKSB7XG5cdCAgICB2YWx1ZSA9IHRoaXMucHJlUHJvY2Vzcyh2YWx1ZSk7XG5cdCAgfVxuXHQgIGlmICh0aGlzLmZpbHRlcnMpIHtcblx0ICAgIHZhbHVlID0gc2NvcGUuX2FwcGx5RmlsdGVycyh2YWx1ZSwgbnVsbCwgdGhpcy5maWx0ZXJzLCBmYWxzZSk7XG5cdCAgfVxuXHQgIGlmICh0aGlzLnBvc3RQcm9jZXNzKSB7XG5cdCAgICB2YWx1ZSA9IHRoaXMucG9zdFByb2Nlc3ModmFsdWUpO1xuXHQgIH1cblx0ICB0aGlzLmFmdGVyR2V0KCk7XG5cdCAgcmV0dXJuIHZhbHVlO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFNldCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSB3aXRoIHRoZSBzZXR0ZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm07XG5cdCAgaWYgKHRoaXMuZmlsdGVycykge1xuXHQgICAgdmFsdWUgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKHZhbHVlLCB0aGlzLnZhbHVlLCB0aGlzLmZpbHRlcnMsIHRydWUpO1xuXHQgIH1cblx0ICB0cnkge1xuXHQgICAgdGhpcy5zZXR0ZXIuY2FsbChzY29wZSwgc2NvcGUsIHZhbHVlKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcud2FybkV4cHJlc3Npb25FcnJvcnMpIHtcblx0ICAgICAgd2FybignRXJyb3Igd2hlbiBldmFsdWF0aW5nIHNldHRlciAnICsgJ1wiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIjogJyArIGUudG9TdHJpbmcoKSwgdGhpcy52bSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIHR3by13YXkgc3luYyBmb3Igdi1mb3IgYWxpYXNcblx0ICB2YXIgZm9yQ29udGV4dCA9IHNjb3BlLiRmb3JDb250ZXh0O1xuXHQgIGlmIChmb3JDb250ZXh0ICYmIGZvckNvbnRleHQuYWxpYXMgPT09IHRoaXMuZXhwcmVzc2lvbikge1xuXHQgICAgaWYgKGZvckNvbnRleHQuZmlsdGVycykge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgdHdvLXdheSBiaW5kaW5nIG9uICcgKyAnYSB2LWZvciBhbGlhcyAoJyArIHRoaXMuZXhwcmVzc2lvbiArICcpLCBhbmQgdGhlICcgKyAndi1mb3IgaGFzIGZpbHRlcnMuIFRoaXMgd2lsbCBub3Qgd29yayBwcm9wZXJseS4gJyArICdFaXRoZXIgcmVtb3ZlIHRoZSBmaWx0ZXJzIG9yIHVzZSBhbiBhcnJheSBvZiAnICsgJ29iamVjdHMgYW5kIGJpbmQgdG8gb2JqZWN0IHByb3BlcnRpZXMgaW5zdGVhZC4nLCB0aGlzLnZtKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZm9yQ29udGV4dC5fd2l0aExvY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoc2NvcGUuJGtleSkge1xuXHQgICAgICAgIC8vIG9yaWdpbmFsIGlzIGFuIG9iamVjdFxuXHQgICAgICAgIGZvckNvbnRleHQucmF3VmFsdWVbc2NvcGUuJGtleV0gPSB2YWx1ZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBmb3JDb250ZXh0LnJhd1ZhbHVlLiRzZXQoc2NvcGUuJGluZGV4LCB2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBQcmVwYXJlIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuYmVmb3JlR2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIERlcC50YXJnZXQgPSB0aGlzO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEFkZCBhIGRlcGVuZGVuY3kgdG8gdGhpcyBkaXJlY3RpdmUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RGVwfSBkZXBcblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5hZGREZXAgPSBmdW5jdGlvbiAoZGVwKSB7XG5cdCAgdmFyIGlkID0gZGVwLmlkO1xuXHQgIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGlkKSkge1xuXHQgICAgdGhpcy5uZXdEZXBJZHMuYWRkKGlkKTtcblx0ICAgIHRoaXMubmV3RGVwcy5wdXNoKGRlcCk7XG5cdCAgICBpZiAoIXRoaXMuZGVwSWRzLmhhcyhpZCkpIHtcblx0ICAgICAgZGVwLmFkZFN1Yih0aGlzKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2xlYW4gdXAgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5hZnRlckdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICBEZXAudGFyZ2V0ID0gbnVsbDtcblx0ICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgdmFyIGRlcCA9IHRoaXMuZGVwc1tpXTtcblx0ICAgIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGRlcC5pZCkpIHtcblx0ICAgICAgZGVwLnJlbW92ZVN1Yih0aGlzKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgdmFyIHRtcCA9IHRoaXMuZGVwSWRzO1xuXHQgIHRoaXMuZGVwSWRzID0gdGhpcy5uZXdEZXBJZHM7XG5cdCAgdGhpcy5uZXdEZXBJZHMgPSB0bXA7XG5cdCAgdGhpcy5uZXdEZXBJZHMuY2xlYXIoKTtcblx0ICB0bXAgPSB0aGlzLmRlcHM7XG5cdCAgdGhpcy5kZXBzID0gdGhpcy5uZXdEZXBzO1xuXHQgIHRoaXMubmV3RGVwcyA9IHRtcDtcblx0ICB0aGlzLm5ld0RlcHMubGVuZ3RoID0gMDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTdWJzY3JpYmVyIGludGVyZmFjZS5cblx0ICogV2lsbCBiZSBjYWxsZWQgd2hlbiBhIGRlcGVuZGVuY3kgY2hhbmdlcy5cblx0ICpcblx0ICogQHBhcmFtIHtCb29sZWFufSBzaGFsbG93XG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHNoYWxsb3cpIHtcblx0ICBpZiAodGhpcy5sYXp5KSB7XG5cdCAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcblx0ICB9IGVsc2UgaWYgKHRoaXMuc3luYyB8fCAhY29uZmlnLmFzeW5jKSB7XG5cdCAgICB0aGlzLnJ1bigpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBpZiBxdWV1ZWQsIG9ubHkgb3ZlcndyaXRlIHNoYWxsb3cgd2l0aCBub24tc2hhbGxvdyxcblx0ICAgIC8vIGJ1dCBub3QgdGhlIG90aGVyIHdheSBhcm91bmQuXG5cdCAgICB0aGlzLnNoYWxsb3cgPSB0aGlzLnF1ZXVlZCA/IHNoYWxsb3cgPyB0aGlzLnNoYWxsb3cgOiBmYWxzZSA6ICEhc2hhbGxvdztcblx0ICAgIHRoaXMucXVldWVkID0gdHJ1ZTtcblx0ICAgIC8vIHJlY29yZCBiZWZvcmUtcHVzaCBlcnJvciBzdGFjayBpbiBkZWJ1ZyBtb2RlXG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5kZWJ1Zykge1xuXHQgICAgICB0aGlzLnByZXZFcnJvciA9IG5ldyBFcnJvcignW3Z1ZV0gYXN5bmMgc3RhY2sgdHJhY2UnKTtcblx0ICAgIH1cblx0ICAgIHB1c2hXYXRjaGVyKHRoaXMpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBCYXRjaGVyIGpvYiBpbnRlcmZhY2UuXG5cdCAqIFdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBiYXRjaGVyLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblx0ICBpZiAodGhpcy5hY3RpdmUpIHtcblx0ICAgIHZhciB2YWx1ZSA9IHRoaXMuZ2V0KCk7XG5cdCAgICBpZiAodmFsdWUgIT09IHRoaXMudmFsdWUgfHxcblx0ICAgIC8vIERlZXAgd2F0Y2hlcnMgYW5kIHdhdGNoZXJzIG9uIE9iamVjdC9BcnJheXMgc2hvdWxkIGZpcmUgZXZlblxuXHQgICAgLy8gd2hlbiB0aGUgdmFsdWUgaXMgdGhlIHNhbWUsIGJlY2F1c2UgdGhlIHZhbHVlIG1heVxuXHQgICAgLy8gaGF2ZSBtdXRhdGVkOyBidXQgb25seSBkbyBzbyBpZiB0aGlzIGlzIGFcblx0ICAgIC8vIG5vbi1zaGFsbG93IHVwZGF0ZSAoY2F1c2VkIGJ5IGEgdm0gZGlnZXN0KS5cblx0ICAgIChpc09iamVjdCh2YWx1ZSkgfHwgdGhpcy5kZWVwKSAmJiAhdGhpcy5zaGFsbG93KSB7XG5cdCAgICAgIC8vIHNldCBuZXcgdmFsdWVcblx0ICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZTtcblx0ICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuXHQgICAgICAvLyBpbiBkZWJ1ZyArIGFzeW5jIG1vZGUsIHdoZW4gYSB3YXRjaGVyIGNhbGxiYWNrc1xuXHQgICAgICAvLyB0aHJvd3MsIHdlIGFsc28gdGhyb3cgdGhlIHNhdmVkIGJlZm9yZS1wdXNoIGVycm9yXG5cdCAgICAgIC8vIHNvIHRoZSBmdWxsIGNyb3NzLXRpY2sgc3RhY2sgdHJhY2UgaXMgYXZhaWxhYmxlLlxuXHQgICAgICB2YXIgcHJldkVycm9yID0gdGhpcy5wcmV2RXJyb3I7XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcuZGVidWcgJiYgcHJldkVycm9yKSB7XG5cdCAgICAgICAgdGhpcy5wcmV2RXJyb3IgPSBudWxsO1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy52bSwgdmFsdWUsIG9sZFZhbHVlKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHRocm93IHByZXZFcnJvcjtcblx0ICAgICAgICAgIH0sIDApO1xuXHQgICAgICAgICAgdGhyb3cgZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHRoaXMucXVldWVkID0gdGhpcy5zaGFsbG93ID0gZmFsc2U7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEV2YWx1YXRlIHRoZSB2YWx1ZSBvZiB0aGUgd2F0Y2hlci5cblx0ICogVGhpcyBvbmx5IGdldHMgY2FsbGVkIGZvciBsYXp5IHdhdGNoZXJzLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gKCkge1xuXHQgIC8vIGF2b2lkIG92ZXJ3cml0aW5nIGFub3RoZXIgd2F0Y2hlciB0aGF0IGlzIGJlaW5nXG5cdCAgLy8gY29sbGVjdGVkLlxuXHQgIHZhciBjdXJyZW50ID0gRGVwLnRhcmdldDtcblx0ICB0aGlzLnZhbHVlID0gdGhpcy5nZXQoKTtcblx0ICB0aGlzLmRpcnR5ID0gZmFsc2U7XG5cdCAgRGVwLnRhcmdldCA9IGN1cnJlbnQ7XG5cdH07XG5cdFxuXHQvKipcblx0ICogRGVwZW5kIG9uIGFsbCBkZXBzIGNvbGxlY3RlZCBieSB0aGlzIHdhdGNoZXIuXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICB0aGlzLmRlcHNbaV0uZGVwZW5kKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBzZWxmIGZyb20gYWxsIGRlcGVuZGVuY2llcycgc3ViY3JpYmVyIGxpc3QuXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUudGVhcmRvd24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKHRoaXMuYWN0aXZlKSB7XG5cdCAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHZtJ3Mgd2F0Y2hlciBsaXN0XG5cdCAgICAvLyB0aGlzIGlzIGEgc29tZXdoYXQgZXhwZW5zaXZlIG9wZXJhdGlvbiBzbyB3ZSBza2lwIGl0XG5cdCAgICAvLyBpZiB0aGUgdm0gaXMgYmVpbmcgZGVzdHJveWVkIG9yIGlzIHBlcmZvcm1pbmcgYSB2LWZvclxuXHQgICAgLy8gcmUtcmVuZGVyICh0aGUgd2F0Y2hlciBsaXN0IGlzIHRoZW4gZmlsdGVyZWQgYnkgdi1mb3IpLlxuXHQgICAgaWYgKCF0aGlzLnZtLl9pc0JlaW5nRGVzdHJveWVkICYmICF0aGlzLnZtLl92Rm9yUmVtb3ZpbmcpIHtcblx0ICAgICAgdGhpcy52bS5fd2F0Y2hlcnMuJHJlbW92ZSh0aGlzKTtcblx0ICAgIH1cblx0ICAgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdGhpcy5kZXBzW2ldLnJlbW92ZVN1Yih0aGlzKTtcblx0ICAgIH1cblx0ICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG5cdCAgICB0aGlzLnZtID0gdGhpcy5jYiA9IHRoaXMudmFsdWUgPSBudWxsO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBSZWNydXNpdmVseSB0cmF2ZXJzZSBhbiBvYmplY3QgdG8gZXZva2UgYWxsIGNvbnZlcnRlZFxuXHQgKiBnZXR0ZXJzLCBzbyB0aGF0IGV2ZXJ5IG5lc3RlZCBwcm9wZXJ0eSBpbnNpZGUgdGhlIG9iamVjdFxuXHQgKiBpcyBjb2xsZWN0ZWQgYXMgYSBcImRlZXBcIiBkZXBlbmRlbmN5LlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKi9cblx0XG5cdHZhciBzZWVuT2JqZWN0cyA9IG5ldyBfU2V0KCk7XG5cdGZ1bmN0aW9uIHRyYXZlcnNlKHZhbCwgc2Vlbikge1xuXHQgIHZhciBpID0gdW5kZWZpbmVkLFxuXHQgICAgICBrZXlzID0gdW5kZWZpbmVkO1xuXHQgIGlmICghc2Vlbikge1xuXHQgICAgc2VlbiA9IHNlZW5PYmplY3RzO1xuXHQgICAgc2Vlbi5jbGVhcigpO1xuXHQgIH1cblx0ICB2YXIgaXNBID0gaXNBcnJheSh2YWwpO1xuXHQgIHZhciBpc08gPSBpc09iamVjdCh2YWwpO1xuXHQgIGlmICgoaXNBIHx8IGlzTykgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWwpKSB7XG5cdCAgICBpZiAodmFsLl9fb2JfXykge1xuXHQgICAgICB2YXIgZGVwSWQgPSB2YWwuX19vYl9fLmRlcC5pZDtcblx0ICAgICAgaWYgKHNlZW4uaGFzKGRlcElkKSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzZWVuLmFkZChkZXBJZCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChpc0EpIHtcblx0ICAgICAgaSA9IHZhbC5sZW5ndGg7XG5cdCAgICAgIHdoaWxlIChpLS0pIHRyYXZlcnNlKHZhbFtpXSwgc2Vlbik7XG5cdCAgICB9IGVsc2UgaWYgKGlzTykge1xuXHQgICAgICBrZXlzID0gT2JqZWN0LmtleXModmFsKTtcblx0ICAgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgICB3aGlsZSAoaS0tKSB0cmF2ZXJzZSh2YWxba2V5c1tpXV0sIHNlZW4pO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIHRleHQkMSA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHRoaXMuYXR0ciA9IHRoaXMuZWwubm9kZVR5cGUgPT09IDMgPyAnZGF0YScgOiAndGV4dENvbnRlbnQnO1xuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB0aGlzLmVsW3RoaXMuYXR0cl0gPSBfdG9TdHJpbmcodmFsdWUpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciB0ZW1wbGF0ZUNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXHR2YXIgaWRTZWxlY3RvckNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXHRcblx0dmFyIG1hcCA9IHtcblx0ICBlZmF1bHQ6IFswLCAnJywgJyddLFxuXHQgIGxlZ2VuZDogWzEsICc8ZmllbGRzZXQ+JywgJzwvZmllbGRzZXQ+J10sXG5cdCAgdHI6IFsyLCAnPHRhYmxlPjx0Ym9keT4nLCAnPC90Ym9keT48L3RhYmxlPiddLFxuXHQgIGNvbDogWzIsICc8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPicsICc8L2NvbGdyb3VwPjwvdGFibGU+J11cblx0fTtcblx0XG5cdG1hcC50ZCA9IG1hcC50aCA9IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddO1xuXHRcblx0bWFwLm9wdGlvbiA9IG1hcC5vcHRncm91cCA9IFsxLCAnPHNlbGVjdCBtdWx0aXBsZT1cIm11bHRpcGxlXCI+JywgJzwvc2VsZWN0PiddO1xuXHRcblx0bWFwLnRoZWFkID0gbWFwLnRib2R5ID0gbWFwLmNvbGdyb3VwID0gbWFwLmNhcHRpb24gPSBtYXAudGZvb3QgPSBbMSwgJzx0YWJsZT4nLCAnPC90YWJsZT4nXTtcblx0XG5cdG1hcC5nID0gbWFwLmRlZnMgPSBtYXAuc3ltYm9sID0gbWFwLnVzZSA9IG1hcC5pbWFnZSA9IG1hcC50ZXh0ID0gbWFwLmNpcmNsZSA9IG1hcC5lbGxpcHNlID0gbWFwLmxpbmUgPSBtYXAucGF0aCA9IG1hcC5wb2x5Z29uID0gbWFwLnBvbHlsaW5lID0gbWFwLnJlY3QgPSBbMSwgJzxzdmcgJyArICd4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgJyArICd4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiAnICsgJ3htbG5zOmV2PVwiaHR0cDovL3d3dy53My5vcmcvMjAwMS94bWwtZXZlbnRzXCInICsgJ3ZlcnNpb249XCIxLjFcIj4nLCAnPC9zdmc+J107XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYSBub2RlIGlzIGEgc3VwcG9ydGVkIHRlbXBsYXRlIG5vZGUgd2l0aCBhXG5cdCAqIERvY3VtZW50RnJhZ21lbnQgY29udGVudC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNSZWFsVGVtcGxhdGUobm9kZSkge1xuXHQgIHJldHVybiBpc1RlbXBsYXRlKG5vZGUpICYmIGlzRnJhZ21lbnQobm9kZS5jb250ZW50KTtcblx0fVxuXHRcblx0dmFyIHRhZ1JFJDEgPSAvPChbXFx3Oi1dKykvO1xuXHR2YXIgZW50aXR5UkUgPSAvJiM/XFx3Kz87Lztcblx0dmFyIGNvbW1lbnRSRSA9IC88IS0tLztcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IGEgc3RyaW5nIHRlbXBsYXRlIHRvIGEgRG9jdW1lbnRGcmFnbWVudC5cblx0ICogRGV0ZXJtaW5lcyBjb3JyZWN0IHdyYXBwaW5nIGJ5IHRhZyB0eXBlcy4gV3JhcHBpbmdcblx0ICogc3RyYXRlZ3kgZm91bmQgaW4galF1ZXJ5ICYgY29tcG9uZW50L2RvbWlmeS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHRlbXBsYXRlU3RyaW5nXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gcmF3XG5cdCAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc3RyaW5nVG9GcmFnbWVudCh0ZW1wbGF0ZVN0cmluZywgcmF3KSB7XG5cdCAgLy8gdHJ5IGEgY2FjaGUgaGl0IGZpcnN0XG5cdCAgdmFyIGNhY2hlS2V5ID0gcmF3ID8gdGVtcGxhdGVTdHJpbmcgOiB0ZW1wbGF0ZVN0cmluZy50cmltKCk7XG5cdCAgdmFyIGhpdCA9IHRlbXBsYXRlQ2FjaGUuZ2V0KGNhY2hlS2V5KTtcblx0ICBpZiAoaGl0KSB7XG5cdCAgICByZXR1cm4gaGl0O1xuXHQgIH1cblx0XG5cdCAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdCAgdmFyIHRhZ01hdGNoID0gdGVtcGxhdGVTdHJpbmcubWF0Y2godGFnUkUkMSk7XG5cdCAgdmFyIGVudGl0eU1hdGNoID0gZW50aXR5UkUudGVzdCh0ZW1wbGF0ZVN0cmluZyk7XG5cdCAgdmFyIGNvbW1lbnRNYXRjaCA9IGNvbW1lbnRSRS50ZXN0KHRlbXBsYXRlU3RyaW5nKTtcblx0XG5cdCAgaWYgKCF0YWdNYXRjaCAmJiAhZW50aXR5TWF0Y2ggJiYgIWNvbW1lbnRNYXRjaCkge1xuXHQgICAgLy8gdGV4dCBvbmx5LCByZXR1cm4gYSBzaW5nbGUgdGV4dCBub2RlLlxuXHQgICAgZnJhZy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZW1wbGF0ZVN0cmluZykpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgdGFnID0gdGFnTWF0Y2ggJiYgdGFnTWF0Y2hbMV07XG5cdCAgICB2YXIgd3JhcCA9IG1hcFt0YWddIHx8IG1hcC5lZmF1bHQ7XG5cdCAgICB2YXIgZGVwdGggPSB3cmFwWzBdO1xuXHQgICAgdmFyIHByZWZpeCA9IHdyYXBbMV07XG5cdCAgICB2YXIgc3VmZml4ID0gd3JhcFsyXTtcblx0ICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFxuXHQgICAgbm9kZS5pbm5lckhUTUwgPSBwcmVmaXggKyB0ZW1wbGF0ZVN0cmluZyArIHN1ZmZpeDtcblx0ICAgIHdoaWxlIChkZXB0aC0tKSB7XG5cdCAgICAgIG5vZGUgPSBub2RlLmxhc3RDaGlsZDtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgY2hpbGQ7XG5cdCAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgd2hpbGUgKGNoaWxkID0gbm9kZS5maXJzdENoaWxkKSB7XG5cdCAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgICAgZnJhZy5hcHBlbmRDaGlsZChjaGlsZCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmICghcmF3KSB7XG5cdCAgICB0cmltTm9kZShmcmFnKTtcblx0ICB9XG5cdCAgdGVtcGxhdGVDYWNoZS5wdXQoY2FjaGVLZXksIGZyYWcpO1xuXHQgIHJldHVybiBmcmFnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBhIHRlbXBsYXRlIG5vZGUgdG8gYSBEb2N1bWVudEZyYWdtZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBub2RlVG9GcmFnbWVudChub2RlKSB7XG5cdCAgLy8gaWYgaXRzIGEgdGVtcGxhdGUgdGFnIGFuZCB0aGUgYnJvd3NlciBzdXBwb3J0cyBpdCxcblx0ICAvLyBpdHMgY29udGVudCBpcyBhbHJlYWR5IGEgZG9jdW1lbnQgZnJhZ21lbnQuIEhvd2V2ZXIsIGlPUyBTYWZhcmkgaGFzXG5cdCAgLy8gYnVnIHdoZW4gdXNpbmcgZGlyZWN0bHkgY2xvbmVkIHRlbXBsYXRlIGNvbnRlbnQgd2l0aCB0b3VjaFxuXHQgIC8vIGV2ZW50cyBhbmQgY2FuIGNhdXNlIGNyYXNoZXMgd2hlbiB0aGUgbm9kZXMgYXJlIHJlbW92ZWQgZnJvbSBET00sIHNvIHdlXG5cdCAgLy8gaGF2ZSB0byB0cmVhdCB0ZW1wbGF0ZSBlbGVtZW50cyBhcyBzdHJpbmcgdGVtcGxhdGVzLiAoIzI4MDUpXG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGlzUmVhbFRlbXBsYXRlKG5vZGUpKSB7XG5cdCAgICByZXR1cm4gc3RyaW5nVG9GcmFnbWVudChub2RlLmlubmVySFRNTCk7XG5cdCAgfVxuXHQgIC8vIHNjcmlwdCB0ZW1wbGF0ZVxuXHQgIGlmIChub2RlLnRhZ05hbWUgPT09ICdTQ1JJUFQnKSB7XG5cdCAgICByZXR1cm4gc3RyaW5nVG9GcmFnbWVudChub2RlLnRleHRDb250ZW50KTtcblx0ICB9XG5cdCAgLy8gbm9ybWFsIG5vZGUsIGNsb25lIGl0IHRvIGF2b2lkIG11dGF0aW5nIHRoZSBvcmlnaW5hbFxuXHQgIHZhciBjbG9uZWROb2RlID0gY2xvbmVOb2RlKG5vZGUpO1xuXHQgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXHQgIHZhciBjaGlsZDtcblx0ICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgIHdoaWxlIChjaGlsZCA9IGNsb25lZE5vZGUuZmlyc3RDaGlsZCkge1xuXHQgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgZnJhZy5hcHBlbmRDaGlsZChjaGlsZCk7XG5cdCAgfVxuXHQgIHRyaW1Ob2RlKGZyYWcpO1xuXHQgIHJldHVybiBmcmFnO1xuXHR9XG5cdFxuXHQvLyBUZXN0IGZvciB0aGUgcHJlc2VuY2Ugb2YgdGhlIFNhZmFyaSB0ZW1wbGF0ZSBjbG9uaW5nIGJ1Z1xuXHQvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93dWcuY2dpP2lkPTEzNzc1NVxuXHR2YXIgaGFzQnJva2VuVGVtcGxhdGUgPSAoZnVuY3Rpb24gKCkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgaWYgKGluQnJvd3Nlcikge1xuXHQgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIGEuaW5uZXJIVE1MID0gJzx0ZW1wbGF0ZT4xPC90ZW1wbGF0ZT4nO1xuXHQgICAgcmV0dXJuICFhLmNsb25lTm9kZSh0cnVlKS5maXJzdENoaWxkLmlubmVySFRNTDtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0fSkoKTtcblx0XG5cdC8vIFRlc3QgZm9yIElFMTAvMTEgdGV4dGFyZWEgcGxhY2Vob2xkZXIgY2xvbmUgYnVnXG5cdHZhciBoYXNUZXh0YXJlYUNsb25lQnVnID0gKGZ1bmN0aW9uICgpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuXHQgIGlmIChpbkJyb3dzZXIpIHtcblx0ICAgIHZhciB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcblx0ICAgIHQucGxhY2Vob2xkZXIgPSAndCc7XG5cdCAgICByZXR1cm4gdC5jbG9uZU5vZGUodHJ1ZSkudmFsdWUgPT09ICd0Jztcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0fSkoKTtcblx0XG5cdC8qKlxuXHQgKiAxLiBEZWFsIHdpdGggU2FmYXJpIGNsb25pbmcgbmVzdGVkIDx0ZW1wbGF0ZT4gYnVnIGJ5XG5cdCAqICAgIG1hbnVhbGx5IGNsb25pbmcgYWxsIHRlbXBsYXRlIGluc3RhbmNlcy5cblx0ICogMi4gRGVhbCB3aXRoIElFMTAvMTEgdGV4dGFyZWEgcGxhY2Vob2xkZXIgYnVnIGJ5IHNldHRpbmdcblx0ICogICAgdGhlIGNvcnJlY3QgdmFsdWUgYWZ0ZXIgY2xvbmluZy5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IG5vZGVcblx0ICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNsb25lTm9kZShub2RlKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKCFub2RlLnF1ZXJ5U2VsZWN0b3JBbGwpIHtcblx0ICAgIHJldHVybiBub2RlLmNsb25lTm9kZSgpO1xuXHQgIH1cblx0ICB2YXIgcmVzID0gbm9kZS5jbG9uZU5vZGUodHJ1ZSk7XG5cdCAgdmFyIGksIG9yaWdpbmFsLCBjbG9uZWQ7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGhhc0Jyb2tlblRlbXBsYXRlKSB7XG5cdCAgICB2YXIgdGVtcENsb25lID0gcmVzO1xuXHQgICAgaWYgKGlzUmVhbFRlbXBsYXRlKG5vZGUpKSB7XG5cdCAgICAgIG5vZGUgPSBub2RlLmNvbnRlbnQ7XG5cdCAgICAgIHRlbXBDbG9uZSA9IHJlcy5jb250ZW50O1xuXHQgICAgfVxuXHQgICAgb3JpZ2luYWwgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RlbXBsYXRlJyk7XG5cdCAgICBpZiAob3JpZ2luYWwubGVuZ3RoKSB7XG5cdCAgICAgIGNsb25lZCA9IHRlbXBDbG9uZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpO1xuXHQgICAgICBpID0gY2xvbmVkLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICAgIGNsb25lZFtpXS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChjbG9uZU5vZGUob3JpZ2luYWxbaV0pLCBjbG9uZWRbaV0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChoYXNUZXh0YXJlYUNsb25lQnVnKSB7XG5cdCAgICBpZiAobm9kZS50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG5cdCAgICAgIHJlcy52YWx1ZSA9IG5vZGUudmFsdWU7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvcmlnaW5hbCA9IG5vZGUucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKTtcblx0ICAgICAgaWYgKG9yaWdpbmFsLmxlbmd0aCkge1xuXHQgICAgICAgIGNsb25lZCA9IHJlcy5xdWVyeVNlbGVjdG9yQWxsKCd0ZXh0YXJlYScpO1xuXHQgICAgICAgIGkgPSBjbG9uZWQubGVuZ3RoO1xuXHQgICAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICAgIGNsb25lZFtpXS52YWx1ZSA9IG9yaWdpbmFsW2ldLnZhbHVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJvY2VzcyB0aGUgdGVtcGxhdGUgb3B0aW9uIGFuZCBub3JtYWxpemVzIGl0IGludG8gYVxuXHQgKiBhIERvY3VtZW50RnJhZ21lbnQgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHBhcnRpYWwgb3IgYVxuXHQgKiBpbnN0YW5jZSB0ZW1wbGF0ZS5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB0ZW1wbGF0ZVxuXHQgKiAgICAgICAgUG9zc2libGUgdmFsdWVzIGluY2x1ZGU6XG5cdCAqICAgICAgICAtIERvY3VtZW50RnJhZ21lbnQgb2JqZWN0XG5cdCAqICAgICAgICAtIE5vZGUgb2JqZWN0IG9mIHR5cGUgVGVtcGxhdGVcblx0ICogICAgICAgIC0gaWQgc2VsZWN0b3I6ICcjc29tZS10ZW1wbGF0ZS1pZCdcblx0ICogICAgICAgIC0gdGVtcGxhdGUgc3RyaW5nOiAnPGRpdj48c3Bhbj57e21zZ319PC9zcGFuPjwvZGl2Pidcblx0ICogQHBhcmFtIHtCb29sZWFufSBzaG91bGRDbG9uZVxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHJhd1xuXHQgKiAgICAgICAgaW5saW5lIEhUTUwgaW50ZXJwb2xhdGlvbi4gRG8gbm90IGNoZWNrIGZvciBpZFxuXHQgKiAgICAgICAgc2VsZWN0b3IgYW5kIGtlZXAgd2hpdGVzcGFjZSBpbiB0aGUgc3RyaW5nLlxuXHQgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZVRlbXBsYXRlKHRlbXBsYXRlLCBzaG91bGRDbG9uZSwgcmF3KSB7XG5cdCAgdmFyIG5vZGUsIGZyYWc7XG5cdFxuXHQgIC8vIGlmIHRoZSB0ZW1wbGF0ZSBpcyBhbHJlYWR5IGEgZG9jdW1lbnQgZnJhZ21lbnQsXG5cdCAgLy8gZG8gbm90aGluZ1xuXHQgIGlmIChpc0ZyYWdtZW50KHRlbXBsYXRlKSkge1xuXHQgICAgdHJpbU5vZGUodGVtcGxhdGUpO1xuXHQgICAgcmV0dXJuIHNob3VsZENsb25lID8gY2xvbmVOb2RlKHRlbXBsYXRlKSA6IHRlbXBsYXRlO1xuXHQgIH1cblx0XG5cdCAgaWYgKHR5cGVvZiB0ZW1wbGF0ZSA9PT0gJ3N0cmluZycpIHtcblx0ICAgIC8vIGlkIHNlbGVjdG9yXG5cdCAgICBpZiAoIXJhdyAmJiB0ZW1wbGF0ZS5jaGFyQXQoMCkgPT09ICcjJykge1xuXHQgICAgICAvLyBpZCBzZWxlY3RvciBjYW4gYmUgY2FjaGVkIHRvb1xuXHQgICAgICBmcmFnID0gaWRTZWxlY3RvckNhY2hlLmdldCh0ZW1wbGF0ZSk7XG5cdCAgICAgIGlmICghZnJhZykge1xuXHQgICAgICAgIG5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0ZW1wbGF0ZS5zbGljZSgxKSk7XG5cdCAgICAgICAgaWYgKG5vZGUpIHtcblx0ICAgICAgICAgIGZyYWcgPSBub2RlVG9GcmFnbWVudChub2RlKTtcblx0ICAgICAgICAgIC8vIHNhdmUgc2VsZWN0b3IgdG8gY2FjaGVcblx0ICAgICAgICAgIGlkU2VsZWN0b3JDYWNoZS5wdXQodGVtcGxhdGUsIGZyYWcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gbm9ybWFsIHN0cmluZyB0ZW1wbGF0ZVxuXHQgICAgICBmcmFnID0gc3RyaW5nVG9GcmFnbWVudCh0ZW1wbGF0ZSwgcmF3KTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHRlbXBsYXRlLm5vZGVUeXBlKSB7XG5cdCAgICAvLyBhIGRpcmVjdCBub2RlXG5cdCAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQodGVtcGxhdGUpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGZyYWcgJiYgc2hvdWxkQ2xvbmUgPyBjbG9uZU5vZGUoZnJhZykgOiBmcmFnO1xuXHR9XG5cdFxuXHR2YXIgdGVtcGxhdGUgPSBPYmplY3QuZnJlZXplKHtcblx0ICBjbG9uZU5vZGU6IGNsb25lTm9kZSxcblx0ICBwYXJzZVRlbXBsYXRlOiBwYXJzZVRlbXBsYXRlXG5cdH0pO1xuXHRcblx0dmFyIGh0bWwgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyBhIGNvbW1lbnQgbm9kZSBtZWFucyB0aGlzIGlzIGEgYmluZGluZyBmb3Jcblx0ICAgIC8vIHt7eyBpbmxpbmUgdW5lc2NhcGVkIGh0bWwgfX19XG5cdCAgICBpZiAodGhpcy5lbC5ub2RlVHlwZSA9PT0gOCkge1xuXHQgICAgICAvLyBob2xkIG5vZGVzXG5cdCAgICAgIHRoaXMubm9kZXMgPSBbXTtcblx0ICAgICAgLy8gcmVwbGFjZSB0aGUgcGxhY2Vob2xkZXIgd2l0aCBwcm9wZXIgYW5jaG9yXG5cdCAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWh0bWwnKTtcblx0ICAgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIHZhbHVlID0gX3RvU3RyaW5nKHZhbHVlKTtcblx0ICAgIGlmICh0aGlzLm5vZGVzKSB7XG5cdCAgICAgIHRoaXMuc3dhcCh2YWx1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmVsLmlubmVySFRNTCA9IHZhbHVlO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHN3YXA6IGZ1bmN0aW9uIHN3YXAodmFsdWUpIHtcblx0ICAgIC8vIHJlbW92ZSBvbGQgbm9kZXNcblx0ICAgIHZhciBpID0gdGhpcy5ub2Rlcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHJlbW92ZSh0aGlzLm5vZGVzW2ldKTtcblx0ICAgIH1cblx0ICAgIC8vIGNvbnZlcnQgbmV3IHZhbHVlIHRvIGEgZnJhZ21lbnRcblx0ICAgIC8vIGRvIG5vdCBhdHRlbXB0IHRvIHJldHJpZXZlIGZyb20gaWQgc2VsZWN0b3Jcblx0ICAgIHZhciBmcmFnID0gcGFyc2VUZW1wbGF0ZSh2YWx1ZSwgdHJ1ZSwgdHJ1ZSk7XG5cdCAgICAvLyBzYXZlIGEgcmVmZXJlbmNlIHRvIHRoZXNlIG5vZGVzIHNvIHdlIGNhbiByZW1vdmUgbGF0ZXJcblx0ICAgIHRoaXMubm9kZXMgPSB0b0FycmF5KGZyYWcuY2hpbGROb2Rlcyk7XG5cdCAgICBiZWZvcmUoZnJhZywgdGhpcy5hbmNob3IpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBYnN0cmFjdGlvbiBmb3IgYSBwYXJ0aWFsbHktY29tcGlsZWQgZnJhZ21lbnQuXG5cdCAqIENhbiBvcHRpb25hbGx5IGNvbXBpbGUgY29udGVudCB3aXRoIGEgY2hpbGQgc2NvcGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGxpbmtlclxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG5cdCAqIEBwYXJhbSB7VnVlfSBbaG9zdF1cblx0ICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cblx0ICogQHBhcmFtIHtGcmFnbWVudH0gW3BhcmVudEZyYWddXG5cdCAqL1xuXHRmdW5jdGlvbiBGcmFnbWVudChsaW5rZXIsIHZtLCBmcmFnLCBob3N0LCBzY29wZSwgcGFyZW50RnJhZykge1xuXHQgIHRoaXMuY2hpbGRyZW4gPSBbXTtcblx0ICB0aGlzLmNoaWxkRnJhZ3MgPSBbXTtcblx0ICB0aGlzLnZtID0gdm07XG5cdCAgdGhpcy5zY29wZSA9IHNjb3BlO1xuXHQgIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcblx0ICB0aGlzLnBhcmVudEZyYWcgPSBwYXJlbnRGcmFnO1xuXHQgIGlmIChwYXJlbnRGcmFnKSB7XG5cdCAgICBwYXJlbnRGcmFnLmNoaWxkRnJhZ3MucHVzaCh0aGlzKTtcblx0ICB9XG5cdCAgdGhpcy51bmxpbmsgPSBsaW5rZXIodm0sIGZyYWcsIGhvc3QsIHNjb3BlLCB0aGlzKTtcblx0ICB2YXIgc2luZ2xlID0gdGhpcy5zaW5nbGUgPSBmcmFnLmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICYmXG5cdCAgLy8gZG8gbm90IGdvIHNpbmdsZSBtb2RlIGlmIHRoZSBvbmx5IG5vZGUgaXMgYW4gYW5jaG9yXG5cdCAgIWZyYWcuY2hpbGROb2Rlc1swXS5fX3ZfYW5jaG9yO1xuXHQgIGlmIChzaW5nbGUpIHtcblx0ICAgIHRoaXMubm9kZSA9IGZyYWcuY2hpbGROb2Rlc1swXTtcblx0ICAgIHRoaXMuYmVmb3JlID0gc2luZ2xlQmVmb3JlO1xuXHQgICAgdGhpcy5yZW1vdmUgPSBzaW5nbGVSZW1vdmU7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRoaXMubm9kZSA9IGNyZWF0ZUFuY2hvcignZnJhZ21lbnQtc3RhcnQnKTtcblx0ICAgIHRoaXMuZW5kID0gY3JlYXRlQW5jaG9yKCdmcmFnbWVudC1lbmQnKTtcblx0ICAgIHRoaXMuZnJhZyA9IGZyYWc7XG5cdCAgICBwcmVwZW5kKHRoaXMubm9kZSwgZnJhZyk7XG5cdCAgICBmcmFnLmFwcGVuZENoaWxkKHRoaXMuZW5kKTtcblx0ICAgIHRoaXMuYmVmb3JlID0gbXVsdGlCZWZvcmU7XG5cdCAgICB0aGlzLnJlbW92ZSA9IG11bHRpUmVtb3ZlO1xuXHQgIH1cblx0ICB0aGlzLm5vZGUuX192X2ZyYWcgPSB0aGlzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2FsbCBhdHRhY2gvZGV0YWNoIGZvciBhbGwgY29tcG9uZW50cyBjb250YWluZWQgd2l0aGluXG5cdCAqIHRoaXMgZnJhZ21lbnQuIEFsc28gZG8gc28gcmVjdXJzaXZlbHkgZm9yIGFsbCBjaGlsZFxuXHQgKiBmcmFnbWVudHMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGhvb2tcblx0ICovXG5cdFxuXHRGcmFnbWVudC5wcm90b3R5cGUuY2FsbEhvb2sgPSBmdW5jdGlvbiAoaG9vaykge1xuXHQgIHZhciBpLCBsO1xuXHQgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICB0aGlzLmNoaWxkRnJhZ3NbaV0uY2FsbEhvb2soaG9vayk7XG5cdCAgfVxuXHQgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgaG9vayh0aGlzLmNoaWxkcmVuW2ldKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogSW5zZXJ0IGZyYWdtZW50IGJlZm9yZSB0YXJnZXQsIHNpbmdsZSBub2RlIHZlcnNpb25cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICogQHBhcmFtIHtCb29sZWFufSB3aXRoVHJhbnNpdGlvblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHNpbmdsZUJlZm9yZSh0YXJnZXQsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgdGhpcy5pbnNlcnRlZCA9IHRydWU7XG5cdCAgdmFyIG1ldGhvZCA9IHdpdGhUcmFuc2l0aW9uICE9PSBmYWxzZSA/IGJlZm9yZVdpdGhUcmFuc2l0aW9uIDogYmVmb3JlO1xuXHQgIG1ldGhvZCh0aGlzLm5vZGUsIHRhcmdldCwgdGhpcy52bSk7XG5cdCAgaWYgKGluRG9jKHRoaXMubm9kZSkpIHtcblx0ICAgIHRoaXMuY2FsbEhvb2soYXR0YWNoKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgZnJhZ21lbnQsIHNpbmdsZSBub2RlIHZlcnNpb25cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzaW5nbGVSZW1vdmUoKSB7XG5cdCAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuXHQgIHZhciBzaG91bGRDYWxsUmVtb3ZlID0gaW5Eb2ModGhpcy5ub2RlKTtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgdGhpcy5iZWZvcmVSZW1vdmUoKTtcblx0ICByZW1vdmVXaXRoVHJhbnNpdGlvbih0aGlzLm5vZGUsIHRoaXMudm0sIGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChzaG91bGRDYWxsUmVtb3ZlKSB7XG5cdCAgICAgIHNlbGYuY2FsbEhvb2soZGV0YWNoKTtcblx0ICAgIH1cblx0ICAgIHNlbGYuZGVzdHJveSgpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSW5zZXJ0IGZyYWdtZW50IGJlZm9yZSB0YXJnZXQsIG11bHRpLW5vZGVzIHZlcnNpb25cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICogQHBhcmFtIHtCb29sZWFufSB3aXRoVHJhbnNpdGlvblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG11bHRpQmVmb3JlKHRhcmdldCwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICB0aGlzLmluc2VydGVkID0gdHJ1ZTtcblx0ICB2YXIgdm0gPSB0aGlzLnZtO1xuXHQgIHZhciBtZXRob2QgPSB3aXRoVHJhbnNpdGlvbiAhPT0gZmFsc2UgPyBiZWZvcmVXaXRoVHJhbnNpdGlvbiA6IGJlZm9yZTtcblx0ICBtYXBOb2RlUmFuZ2UodGhpcy5ub2RlLCB0aGlzLmVuZCwgZnVuY3Rpb24gKG5vZGUpIHtcblx0ICAgIG1ldGhvZChub2RlLCB0YXJnZXQsIHZtKTtcblx0ICB9KTtcblx0ICBpZiAoaW5Eb2ModGhpcy5ub2RlKSkge1xuXHQgICAgdGhpcy5jYWxsSG9vayhhdHRhY2gpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBmcmFnbWVudCwgbXVsdGktbm9kZXMgdmVyc2lvblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG11bHRpUmVtb3ZlKCkge1xuXHQgIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgdmFyIHNob3VsZENhbGxSZW1vdmUgPSBpbkRvYyh0aGlzLm5vZGUpO1xuXHQgIHRoaXMuYmVmb3JlUmVtb3ZlKCk7XG5cdCAgcmVtb3ZlTm9kZVJhbmdlKHRoaXMubm9kZSwgdGhpcy5lbmQsIHRoaXMudm0sIHRoaXMuZnJhZywgZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKHNob3VsZENhbGxSZW1vdmUpIHtcblx0ICAgICAgc2VsZi5jYWxsSG9vayhkZXRhY2gpO1xuXHQgICAgfVxuXHQgICAgc2VsZi5kZXN0cm95KCk7XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcmVwYXJlIHRoZSBmcmFnbWVudCBmb3IgcmVtb3ZhbC5cblx0ICovXG5cdFxuXHRGcmFnbWVudC5wcm90b3R5cGUuYmVmb3JlUmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBpLCBsO1xuXHQgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAvLyBjYWxsIHRoZSBzYW1lIG1ldGhvZCByZWN1cnNpdmVseSBvbiBjaGlsZFxuXHQgICAgLy8gZnJhZ21lbnRzLCBkZXB0aC1maXJzdFxuXHQgICAgdGhpcy5jaGlsZEZyYWdzW2ldLmJlZm9yZVJlbW92ZShmYWxzZSk7XG5cdCAgfVxuXHQgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgLy8gQ2FsbCBkZXN0cm95IGZvciBhbGwgY29udGFpbmVkIGluc3RhbmNlcyxcblx0ICAgIC8vIHdpdGggcmVtb3ZlOmZhbHNlIGFuZCBkZWZlcjp0cnVlLlxuXHQgICAgLy8gRGVmZXIgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugd2UgbmVlZCB0b1xuXHQgICAgLy8ga2VlcCB0aGUgY2hpbGRyZW4gdG8gY2FsbCBkZXRhY2ggaG9va3Ncblx0ICAgIC8vIG9uIHRoZW0uXG5cdCAgICB0aGlzLmNoaWxkcmVuW2ldLiRkZXN0cm95KGZhbHNlLCB0cnVlKTtcblx0ICB9XG5cdCAgdmFyIGRpcnMgPSB0aGlzLnVubGluay5kaXJzO1xuXHQgIGZvciAoaSA9IDAsIGwgPSBkaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgLy8gZGlzYWJsZSB0aGUgd2F0Y2hlcnMgb24gYWxsIHRoZSBkaXJlY3RpdmVzXG5cdCAgICAvLyBzbyB0aGF0IHRoZSByZW5kZXJlZCBjb250ZW50IHN0YXlzIHRoZSBzYW1lXG5cdCAgICAvLyBkdXJpbmcgcmVtb3ZhbC5cblx0ICAgIGRpcnNbaV0uX3dhdGNoZXIgJiYgZGlyc1tpXS5fd2F0Y2hlci50ZWFyZG93bigpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBEZXN0cm95IHRoZSBmcmFnbWVudC5cblx0ICovXG5cdFxuXHRGcmFnbWVudC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcblx0ICBpZiAodGhpcy5wYXJlbnRGcmFnKSB7XG5cdCAgICB0aGlzLnBhcmVudEZyYWcuY2hpbGRGcmFncy4kcmVtb3ZlKHRoaXMpO1xuXHQgIH1cblx0ICB0aGlzLm5vZGUuX192X2ZyYWcgPSBudWxsO1xuXHQgIHRoaXMudW5saW5rKCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2FsbCBhdHRhY2ggaG9vayBmb3IgYSBWdWUgaW5zdGFuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGF0dGFjaChjaGlsZCkge1xuXHQgIGlmICghY2hpbGQuX2lzQXR0YWNoZWQgJiYgaW5Eb2MoY2hpbGQuJGVsKSkge1xuXHQgICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENhbGwgZGV0YWNoIGhvb2sgZm9yIGEgVnVlIGluc3RhbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkZXRhY2goY2hpbGQpIHtcblx0ICBpZiAoY2hpbGQuX2lzQXR0YWNoZWQgJiYgIWluRG9jKGNoaWxkLiRlbCkpIHtcblx0ICAgIGNoaWxkLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBsaW5rZXJDYWNoZSA9IG5ldyBDYWNoZSg1MDAwKTtcblx0XG5cdC8qKlxuXHQgKiBBIGZhY3RvcnkgdGhhdCBjYW4gYmUgdXNlZCB0byBjcmVhdGUgaW5zdGFuY2VzIG9mIGFcblx0ICogZnJhZ21lbnQuIENhY2hlcyB0aGUgY29tcGlsZWQgbGlua2VyIGlmIHBvc3NpYmxlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtFbGVtZW50fFN0cmluZ30gZWxcblx0ICovXG5cdGZ1bmN0aW9uIEZyYWdtZW50RmFjdG9yeSh2bSwgZWwpIHtcblx0ICB0aGlzLnZtID0gdm07XG5cdCAgdmFyIHRlbXBsYXRlO1xuXHQgIHZhciBpc1N0cmluZyA9IHR5cGVvZiBlbCA9PT0gJ3N0cmluZyc7XG5cdCAgaWYgKGlzU3RyaW5nIHx8IGlzVGVtcGxhdGUoZWwpICYmICFlbC5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuXHQgICAgdGVtcGxhdGUgPSBwYXJzZVRlbXBsYXRlKGVsLCB0cnVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdCAgICB0ZW1wbGF0ZS5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfVxuXHQgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcblx0ICAvLyBsaW5rZXIgY2FuIGJlIGNhY2hlZCwgYnV0IG9ubHkgZm9yIGNvbXBvbmVudHNcblx0ICB2YXIgbGlua2VyO1xuXHQgIHZhciBjaWQgPSB2bS5jb25zdHJ1Y3Rvci5jaWQ7XG5cdCAgaWYgKGNpZCA+IDApIHtcblx0ICAgIHZhciBjYWNoZUlkID0gY2lkICsgKGlzU3RyaW5nID8gZWwgOiBnZXRPdXRlckhUTUwoZWwpKTtcblx0ICAgIGxpbmtlciA9IGxpbmtlckNhY2hlLmdldChjYWNoZUlkKTtcblx0ICAgIGlmICghbGlua2VyKSB7XG5cdCAgICAgIGxpbmtlciA9IGNvbXBpbGUodGVtcGxhdGUsIHZtLiRvcHRpb25zLCB0cnVlKTtcblx0ICAgICAgbGlua2VyQ2FjaGUucHV0KGNhY2hlSWQsIGxpbmtlcik7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIGxpbmtlciA9IGNvbXBpbGUodGVtcGxhdGUsIHZtLiRvcHRpb25zLCB0cnVlKTtcblx0ICB9XG5cdCAgdGhpcy5saW5rZXIgPSBsaW5rZXI7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGUgYSBmcmFnbWVudCBpbnN0YW5jZSB3aXRoIGdpdmVuIGhvc3QgYW5kIHNjb3BlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gaG9zdFxuXHQgKiBAcGFyYW0ge09iamVjdH0gc2NvcGVcblx0ICogQHBhcmFtIHtGcmFnbWVudH0gcGFyZW50RnJhZ1xuXHQgKi9cblx0XG5cdEZyYWdtZW50RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKSB7XG5cdCAgdmFyIGZyYWcgPSBjbG9uZU5vZGUodGhpcy50ZW1wbGF0ZSk7XG5cdCAgcmV0dXJuIG5ldyBGcmFnbWVudCh0aGlzLmxpbmtlciwgdGhpcy52bSwgZnJhZywgaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpO1xuXHR9O1xuXHRcblx0dmFyIE9OID0gNzAwO1xuXHR2YXIgTU9ERUwgPSA4MDA7XG5cdHZhciBCSU5EID0gODUwO1xuXHR2YXIgVFJBTlNJVElPTiA9IDExMDA7XG5cdHZhciBFTCA9IDE1MDA7XG5cdHZhciBDT01QT05FTlQgPSAxNTAwO1xuXHR2YXIgUEFSVElBTCA9IDE3NTA7XG5cdHZhciBJRiA9IDIxMDA7XG5cdHZhciBGT1IgPSAyMjAwO1xuXHR2YXIgU0xPVCA9IDIzMDA7XG5cdFxuXHR2YXIgdWlkJDMgPSAwO1xuXHRcblx0dmFyIHZGb3IgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBGT1IsXG5cdCAgdGVybWluYWw6IHRydWUsXG5cdFxuXHQgIHBhcmFtczogWyd0cmFjay1ieScsICdzdGFnZ2VyJywgJ2VudGVyLXN0YWdnZXInLCAnbGVhdmUtc3RhZ2dlciddLFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gc3VwcG9ydCBcIml0ZW0gaW4vb2YgaXRlbXNcIiBzeW50YXhcblx0ICAgIHZhciBpbk1hdGNoID0gdGhpcy5leHByZXNzaW9uLm1hdGNoKC8oLiopICg/OmlufG9mKSAoLiopLyk7XG5cdCAgICBpZiAoaW5NYXRjaCkge1xuXHQgICAgICB2YXIgaXRNYXRjaCA9IGluTWF0Y2hbMV0ubWF0Y2goL1xcKCguKiksKC4qKVxcKS8pO1xuXHQgICAgICBpZiAoaXRNYXRjaCkge1xuXHQgICAgICAgIHRoaXMuaXRlcmF0b3IgPSBpdE1hdGNoWzFdLnRyaW0oKTtcblx0ICAgICAgICB0aGlzLmFsaWFzID0gaXRNYXRjaFsyXS50cmltKCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5hbGlhcyA9IGluTWF0Y2hbMV0udHJpbSgpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGluTWF0Y2hbMl07XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCF0aGlzLmFsaWFzKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCB2LWZvciBleHByZXNzaW9uIFwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyAnYWxpYXMgaXMgcmVxdWlyZWQuJywgdGhpcy52bSk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICAvLyB1aWQgYXMgYSBjYWNoZSBpZGVudGlmaWVyXG5cdCAgICB0aGlzLmlkID0gJ19fdi1mb3JfXycgKyArK3VpZCQzO1xuXHRcblx0ICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgYW4gb3B0aW9uIGxpc3QsXG5cdCAgICAvLyBzbyB0aGF0IHdlIGtub3cgaWYgd2UgbmVlZCB0byB1cGRhdGUgdGhlIDxzZWxlY3Q+J3Ncblx0ICAgIC8vIHYtbW9kZWwgd2hlbiB0aGUgb3B0aW9uIGxpc3QgaGFzIGNoYW5nZWQuXG5cdCAgICAvLyBiZWNhdXNlIHYtbW9kZWwgaGFzIGEgbG93ZXIgcHJpb3JpdHkgdGhhbiB2LWZvcixcblx0ICAgIC8vIHRoZSB2LW1vZGVsIGlzIG5vdCBib3VuZCBoZXJlIHlldCwgc28gd2UgaGF2ZSB0b1xuXHQgICAgLy8gcmV0cml2ZSBpdCBpbiB0aGUgYWN0dWFsIHVwZGF0ZU1vZGVsKCkgZnVuY3Rpb24uXG5cdCAgICB2YXIgdGFnID0gdGhpcy5lbC50YWdOYW1lO1xuXHQgICAgdGhpcy5pc09wdGlvbiA9ICh0YWcgPT09ICdPUFRJT04nIHx8IHRhZyA9PT0gJ09QVEdST1VQJykgJiYgdGhpcy5lbC5wYXJlbnROb2RlLnRhZ05hbWUgPT09ICdTRUxFQ1QnO1xuXHRcblx0ICAgIC8vIHNldHVwIGFuY2hvciBub2Rlc1xuXHQgICAgdGhpcy5zdGFydCA9IGNyZWF0ZUFuY2hvcigndi1mb3Itc3RhcnQnKTtcblx0ICAgIHRoaXMuZW5kID0gY3JlYXRlQW5jaG9yKCd2LWZvci1lbmQnKTtcblx0ICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5lbmQpO1xuXHQgICAgYmVmb3JlKHRoaXMuc3RhcnQsIHRoaXMuZW5kKTtcblx0XG5cdCAgICAvLyBjYWNoZVxuXHQgICAgdGhpcy5jYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdFxuXHQgICAgLy8gZnJhZ21lbnQgZmFjdG9yeVxuXHQgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCB0aGlzLmVsKTtcblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShkYXRhKSB7XG5cdCAgICB0aGlzLmRpZmYoZGF0YSk7XG5cdCAgICB0aGlzLnVwZGF0ZVJlZigpO1xuXHQgICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIERpZmYsIGJhc2VkIG9uIG5ldyBkYXRhIGFuZCBvbGQgZGF0YSwgZGV0ZXJtaW5lIHRoZVxuXHQgICAqIG1pbmltdW0gYW1vdW50IG9mIERPTSBtYW5pcHVsYXRpb25zIG5lZWRlZCB0byBtYWtlIHRoZVxuXHQgICAqIERPTSByZWZsZWN0IHRoZSBuZXcgZGF0YSBBcnJheS5cblx0ICAgKlxuXHQgICAqIFRoZSBhbGdvcml0aG0gZGlmZnMgdGhlIG5ldyBkYXRhIEFycmF5IGJ5IHN0b3JpbmcgYVxuXHQgICAqIGhpZGRlbiByZWZlcmVuY2UgdG8gYW4gb3duZXIgdm0gaW5zdGFuY2Ugb24gcHJldmlvdXNseVxuXHQgICAqIHNlZW4gZGF0YS4gVGhpcyBhbGxvd3MgdXMgdG8gYWNoaWV2ZSBPKG4pIHdoaWNoIGlzXG5cdCAgICogYmV0dGVyIHRoYW4gYSBsZXZlbnNodGVpbiBkaXN0YW5jZSBiYXNlZCBhbGdvcml0aG0sXG5cdCAgICogd2hpY2ggaXMgTyhtICogbikuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0FycmF5fSBkYXRhXG5cdCAgICovXG5cdFxuXHQgIGRpZmY6IGZ1bmN0aW9uIGRpZmYoZGF0YSkge1xuXHQgICAgLy8gY2hlY2sgaWYgdGhlIEFycmF5IHdhcyBjb252ZXJ0ZWQgZnJvbSBhbiBPYmplY3Rcblx0ICAgIHZhciBpdGVtID0gZGF0YVswXTtcblx0ICAgIHZhciBjb252ZXJ0ZWRGcm9tT2JqZWN0ID0gdGhpcy5mcm9tT2JqZWN0ID0gaXNPYmplY3QoaXRlbSkgJiYgaGFzT3duKGl0ZW0sICcka2V5JykgJiYgaGFzT3duKGl0ZW0sICckdmFsdWUnKTtcblx0XG5cdCAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG5cdCAgICB2YXIgb2xkRnJhZ3MgPSB0aGlzLmZyYWdzO1xuXHQgICAgdmFyIGZyYWdzID0gdGhpcy5mcmFncyA9IG5ldyBBcnJheShkYXRhLmxlbmd0aCk7XG5cdCAgICB2YXIgYWxpYXMgPSB0aGlzLmFsaWFzO1xuXHQgICAgdmFyIGl0ZXJhdG9yID0gdGhpcy5pdGVyYXRvcjtcblx0ICAgIHZhciBzdGFydCA9IHRoaXMuc3RhcnQ7XG5cdCAgICB2YXIgZW5kID0gdGhpcy5lbmQ7XG5cdCAgICB2YXIgaW5Eb2N1bWVudCA9IGluRG9jKHN0YXJ0KTtcblx0ICAgIHZhciBpbml0ID0gIW9sZEZyYWdzO1xuXHQgICAgdmFyIGksIGwsIGZyYWcsIGtleSwgdmFsdWUsIHByaW1pdGl2ZTtcblx0XG5cdCAgICAvLyBGaXJzdCBwYXNzLCBnbyB0aHJvdWdoIHRoZSBuZXcgQXJyYXkgYW5kIGZpbGwgdXBcblx0ICAgIC8vIHRoZSBuZXcgZnJhZ3MgYXJyYXkuIElmIGEgcGllY2Ugb2YgZGF0YSBoYXMgYSBjYWNoZWRcblx0ICAgIC8vIGluc3RhbmNlIGZvciBpdCwgd2UgcmV1c2UgaXQuIE90aGVyd2lzZSBidWlsZCBhIG5ld1xuXHQgICAgLy8gaW5zdGFuY2UuXG5cdCAgICBmb3IgKGkgPSAwLCBsID0gZGF0YS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgaXRlbSA9IGRhdGFbaV07XG5cdCAgICAgIGtleSA9IGNvbnZlcnRlZEZyb21PYmplY3QgPyBpdGVtLiRrZXkgOiBudWxsO1xuXHQgICAgICB2YWx1ZSA9IGNvbnZlcnRlZEZyb21PYmplY3QgPyBpdGVtLiR2YWx1ZSA6IGl0ZW07XG5cdCAgICAgIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG5cdCAgICAgIGZyYWcgPSAhaW5pdCAmJiB0aGlzLmdldENhY2hlZEZyYWcodmFsdWUsIGksIGtleSk7XG5cdCAgICAgIGlmIChmcmFnKSB7XG5cdCAgICAgICAgLy8gcmV1c2FibGUgZnJhZ21lbnRcblx0ICAgICAgICBmcmFnLnJldXNlZCA9IHRydWU7XG5cdCAgICAgICAgLy8gdXBkYXRlICRpbmRleFxuXHQgICAgICAgIGZyYWcuc2NvcGUuJGluZGV4ID0gaTtcblx0ICAgICAgICAvLyB1cGRhdGUgJGtleVxuXHQgICAgICAgIGlmIChrZXkpIHtcblx0ICAgICAgICAgIGZyYWcuc2NvcGUuJGtleSA9IGtleTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gdXBkYXRlIGl0ZXJhdG9yXG5cdCAgICAgICAgaWYgKGl0ZXJhdG9yKSB7XG5cdCAgICAgICAgICBmcmFnLnNjb3BlW2l0ZXJhdG9yXSA9IGtleSAhPT0gbnVsbCA/IGtleSA6IGk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIHVwZGF0ZSBkYXRhIGZvciB0cmFjay1ieSwgb2JqZWN0IHJlcGVhdCAmXG5cdCAgICAgICAgLy8gcHJpbWl0aXZlIHZhbHVlcy5cblx0ICAgICAgICBpZiAodHJhY2tCeUtleSB8fCBjb252ZXJ0ZWRGcm9tT2JqZWN0IHx8IHByaW1pdGl2ZSkge1xuXHQgICAgICAgICAgd2l0aG91dENvbnZlcnNpb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBmcmFnLnNjb3BlW2FsaWFzXSA9IHZhbHVlO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIG5ldyBpc250YW5jZVxuXHQgICAgICAgIGZyYWcgPSB0aGlzLmNyZWF0ZSh2YWx1ZSwgYWxpYXMsIGksIGtleSk7XG5cdCAgICAgICAgZnJhZy5mcmVzaCA9ICFpbml0O1xuXHQgICAgICB9XG5cdCAgICAgIGZyYWdzW2ldID0gZnJhZztcblx0ICAgICAgaWYgKGluaXQpIHtcblx0ICAgICAgICBmcmFnLmJlZm9yZShlbmQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gd2UncmUgZG9uZSBmb3IgdGhlIGluaXRpYWwgcmVuZGVyLlxuXHQgICAgaWYgKGluaXQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIFNlY29uZCBwYXNzLCBnbyB0aHJvdWdoIHRoZSBvbGQgZnJhZ21lbnRzIGFuZFxuXHQgICAgLy8gZGVzdHJveSB0aG9zZSB3aG8gYXJlIG5vdCByZXVzZWQgKGFuZCByZW1vdmUgdGhlbVxuXHQgICAgLy8gZnJvbSBjYWNoZSlcblx0ICAgIHZhciByZW1vdmFsSW5kZXggPSAwO1xuXHQgICAgdmFyIHRvdGFsUmVtb3ZlZCA9IG9sZEZyYWdzLmxlbmd0aCAtIGZyYWdzLmxlbmd0aDtcblx0ICAgIC8vIHdoZW4gcmVtb3ZpbmcgYSBsYXJnZSBudW1iZXIgb2YgZnJhZ21lbnRzLCB3YXRjaGVyIHJlbW92YWxcblx0ICAgIC8vIHR1cm5zIG91dCB0byBiZSBhIHBlcmYgYm90dGxlbmVjaywgc28gd2UgYmF0Y2ggdGhlIHdhdGNoZXJcblx0ICAgIC8vIHJlbW92YWxzIGludG8gYSBzaW5nbGUgZmlsdGVyIGNhbGwhXG5cdCAgICB0aGlzLnZtLl92Rm9yUmVtb3ZpbmcgPSB0cnVlO1xuXHQgICAgZm9yIChpID0gMCwgbCA9IG9sZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBmcmFnID0gb2xkRnJhZ3NbaV07XG5cdCAgICAgIGlmICghZnJhZy5yZXVzZWQpIHtcblx0ICAgICAgICB0aGlzLmRlbGV0ZUNhY2hlZEZyYWcoZnJhZyk7XG5cdCAgICAgICAgdGhpcy5yZW1vdmUoZnJhZywgcmVtb3ZhbEluZGV4KyssIHRvdGFsUmVtb3ZlZCwgaW5Eb2N1bWVudCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHRoaXMudm0uX3ZGb3JSZW1vdmluZyA9IGZhbHNlO1xuXHQgICAgaWYgKHJlbW92YWxJbmRleCkge1xuXHQgICAgICB0aGlzLnZtLl93YXRjaGVycyA9IHRoaXMudm0uX3dhdGNoZXJzLmZpbHRlcihmdW5jdGlvbiAodykge1xuXHQgICAgICAgIHJldHVybiB3LmFjdGl2ZTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gRmluYWwgcGFzcywgbW92ZS9pbnNlcnQgbmV3IGZyYWdtZW50cyBpbnRvIHRoZVxuXHQgICAgLy8gcmlnaHQgcGxhY2UuXG5cdCAgICB2YXIgdGFyZ2V0UHJldiwgcHJldkVsLCBjdXJyZW50UHJldjtcblx0ICAgIHZhciBpbnNlcnRpb25JbmRleCA9IDA7XG5cdCAgICBmb3IgKGkgPSAwLCBsID0gZnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGZyYWcgPSBmcmFnc1tpXTtcblx0ICAgICAgLy8gdGhpcyBpcyB0aGUgZnJhZyB0aGF0IHdlIHNob3VsZCBiZSBhZnRlclxuXHQgICAgICB0YXJnZXRQcmV2ID0gZnJhZ3NbaSAtIDFdO1xuXHQgICAgICBwcmV2RWwgPSB0YXJnZXRQcmV2ID8gdGFyZ2V0UHJldi5zdGFnZ2VyQ2IgPyB0YXJnZXRQcmV2LnN0YWdnZXJBbmNob3IgOiB0YXJnZXRQcmV2LmVuZCB8fCB0YXJnZXRQcmV2Lm5vZGUgOiBzdGFydDtcblx0ICAgICAgaWYgKGZyYWcucmV1c2VkICYmICFmcmFnLnN0YWdnZXJDYikge1xuXHQgICAgICAgIGN1cnJlbnRQcmV2ID0gZmluZFByZXZGcmFnKGZyYWcsIHN0YXJ0LCB0aGlzLmlkKTtcblx0ICAgICAgICBpZiAoY3VycmVudFByZXYgIT09IHRhcmdldFByZXYgJiYgKCFjdXJyZW50UHJldiB8fFxuXHQgICAgICAgIC8vIG9wdGltaXphdGlvbiBmb3IgbW92aW5nIGEgc2luZ2xlIGl0ZW0uXG5cdCAgICAgICAgLy8gdGhhbmtzIHRvIHN1Z2dlc3Rpb25zIGJ5IEBsaXZvcmFzIGluICMxODA3XG5cdCAgICAgICAgZmluZFByZXZGcmFnKGN1cnJlbnRQcmV2LCBzdGFydCwgdGhpcy5pZCkgIT09IHRhcmdldFByZXYpKSB7XG5cdCAgICAgICAgICB0aGlzLm1vdmUoZnJhZywgcHJldkVsKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gbmV3IGluc3RhbmNlLCBvciBzdGlsbCBpbiBzdGFnZ2VyLlxuXHQgICAgICAgIC8vIGluc2VydCB3aXRoIHVwZGF0ZWQgc3RhZ2dlciBpbmRleC5cblx0ICAgICAgICB0aGlzLmluc2VydChmcmFnLCBpbnNlcnRpb25JbmRleCsrLCBwcmV2RWwsIGluRG9jdW1lbnQpO1xuXHQgICAgICB9XG5cdCAgICAgIGZyYWcucmV1c2VkID0gZnJhZy5mcmVzaCA9IGZhbHNlO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENyZWF0ZSBhIG5ldyBmcmFnbWVudCBpbnN0YW5jZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gYWxpYXNcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gW2tleV1cblx0ICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cblx0ICAgKi9cblx0XG5cdCAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUodmFsdWUsIGFsaWFzLCBpbmRleCwga2V5KSB7XG5cdCAgICB2YXIgaG9zdCA9IHRoaXMuX2hvc3Q7XG5cdCAgICAvLyBjcmVhdGUgaXRlcmF0aW9uIHNjb3BlXG5cdCAgICB2YXIgcGFyZW50U2NvcGUgPSB0aGlzLl9zY29wZSB8fCB0aGlzLnZtO1xuXHQgICAgdmFyIHNjb3BlID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZSk7XG5cdCAgICAvLyByZWYgaG9sZGVyIGZvciB0aGUgc2NvcGVcblx0ICAgIHNjb3BlLiRyZWZzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZS4kcmVmcyk7XG5cdCAgICBzY29wZS4kZWxzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZS4kZWxzKTtcblx0ICAgIC8vIG1ha2Ugc3VyZSBwb2ludCAkcGFyZW50IHRvIHBhcmVudCBzY29wZVxuXHQgICAgc2NvcGUuJHBhcmVudCA9IHBhcmVudFNjb3BlO1xuXHQgICAgLy8gZm9yIHR3by13YXkgYmluZGluZyBvbiBhbGlhc1xuXHQgICAgc2NvcGUuJGZvckNvbnRleHQgPSB0aGlzO1xuXHQgICAgLy8gZGVmaW5lIHNjb3BlIHByb3BlcnRpZXNcblx0ICAgIC8vIGltcG9ydGFudDogZGVmaW5lIHRoZSBzY29wZSBhbGlhcyB3aXRob3V0IGZvcmNlZCBjb252ZXJzaW9uXG5cdCAgICAvLyBzbyB0aGF0IGZyb3plbiBkYXRhIHN0cnVjdHVyZXMgcmVtYWluIG5vbi1yZWFjdGl2ZS5cblx0ICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsIGFsaWFzLCB2YWx1ZSk7XG5cdCAgICB9KTtcblx0ICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCAnJGluZGV4JywgaW5kZXgpO1xuXHQgICAgaWYgKGtleSkge1xuXHQgICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgJyRrZXknLCBrZXkpO1xuXHQgICAgfSBlbHNlIGlmIChzY29wZS4ka2V5KSB7XG5cdCAgICAgIC8vIGF2b2lkIGFjY2lkZW50YWwgZmFsbGJhY2tcblx0ICAgICAgZGVmKHNjb3BlLCAnJGtleScsIG51bGwpO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuaXRlcmF0b3IpIHtcblx0ICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsIHRoaXMuaXRlcmF0b3IsIGtleSAhPT0gbnVsbCA/IGtleSA6IGluZGV4KTtcblx0ICAgIH1cblx0ICAgIHZhciBmcmFnID0gdGhpcy5mYWN0b3J5LmNyZWF0ZShob3N0LCBzY29wZSwgdGhpcy5fZnJhZyk7XG5cdCAgICBmcmFnLmZvcklkID0gdGhpcy5pZDtcblx0ICAgIHRoaXMuY2FjaGVGcmFnKHZhbHVlLCBmcmFnLCBpbmRleCwga2V5KTtcblx0ICAgIHJldHVybiBmcmFnO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFVwZGF0ZSB0aGUgdi1yZWYgb24gb3duZXIgdm0uXG5cdCAgICovXG5cdFxuXHQgIHVwZGF0ZVJlZjogZnVuY3Rpb24gdXBkYXRlUmVmKCkge1xuXHQgICAgdmFyIHJlZiA9IHRoaXMuZGVzY3JpcHRvci5yZWY7XG5cdCAgICBpZiAoIXJlZikgcmV0dXJuO1xuXHQgICAgdmFyIGhhc2ggPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHJlZnM7XG5cdCAgICB2YXIgcmVmcztcblx0ICAgIGlmICghdGhpcy5mcm9tT2JqZWN0KSB7XG5cdCAgICAgIHJlZnMgPSB0aGlzLmZyYWdzLm1hcChmaW5kVm1Gcm9tRnJhZyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZWZzID0ge307XG5cdCAgICAgIHRoaXMuZnJhZ3MuZm9yRWFjaChmdW5jdGlvbiAoZnJhZykge1xuXHQgICAgICAgIHJlZnNbZnJhZy5zY29wZS4ka2V5XSA9IGZpbmRWbUZyb21GcmFnKGZyYWcpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIGhhc2hbcmVmXSA9IHJlZnM7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRm9yIG9wdGlvbiBsaXN0cywgdXBkYXRlIHRoZSBjb250YWluaW5nIHYtbW9kZWwgb25cblx0ICAgKiBwYXJlbnQgPHNlbGVjdD4uXG5cdCAgICovXG5cdFxuXHQgIHVwZGF0ZU1vZGVsOiBmdW5jdGlvbiB1cGRhdGVNb2RlbCgpIHtcblx0ICAgIGlmICh0aGlzLmlzT3B0aW9uKSB7XG5cdCAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnN0YXJ0LnBhcmVudE5vZGU7XG5cdCAgICAgIHZhciBtb2RlbCA9IHBhcmVudCAmJiBwYXJlbnQuX192X21vZGVsO1xuXHQgICAgICBpZiAobW9kZWwpIHtcblx0ICAgICAgICBtb2RlbC5mb3JjZVVwZGF0ZSgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogSW5zZXJ0IGEgZnJhZ21lbnQuIEhhbmRsZXMgc3RhZ2dlcmluZy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICAgKiBAcGFyYW0ge05vZGV9IHByZXZFbFxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5Eb2N1bWVudFxuXHQgICAqL1xuXHRcblx0ICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydChmcmFnLCBpbmRleCwgcHJldkVsLCBpbkRvY3VtZW50KSB7XG5cdCAgICBpZiAoZnJhZy5zdGFnZ2VyQ2IpIHtcblx0ICAgICAgZnJhZy5zdGFnZ2VyQ2IuY2FuY2VsKCk7XG5cdCAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIHZhciBzdGFnZ2VyQW1vdW50ID0gdGhpcy5nZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCBudWxsLCAnZW50ZXInKTtcblx0ICAgIGlmIChpbkRvY3VtZW50ICYmIHN0YWdnZXJBbW91bnQpIHtcblx0ICAgICAgLy8gY3JlYXRlIGFuIGFuY2hvciBhbmQgaW5zZXJ0IGl0IHN5bmNocm9ub3VzbHksXG5cdCAgICAgIC8vIHNvIHRoYXQgd2UgY2FuIHJlc29sdmUgdGhlIGNvcnJlY3Qgb3JkZXIgd2l0aG91dFxuXHQgICAgICAvLyB3b3JyeWluZyBhYm91dCBzb21lIGVsZW1lbnRzIG5vdCBpbnNlcnRlZCB5ZXRcblx0ICAgICAgdmFyIGFuY2hvciA9IGZyYWcuc3RhZ2dlckFuY2hvcjtcblx0ICAgICAgaWYgKCFhbmNob3IpIHtcblx0ICAgICAgICBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3IgPSBjcmVhdGVBbmNob3IoJ3N0YWdnZXItYW5jaG9yJyk7XG5cdCAgICAgICAgYW5jaG9yLl9fdl9mcmFnID0gZnJhZztcblx0ICAgICAgfVxuXHQgICAgICBhZnRlcihhbmNob3IsIHByZXZFbCk7XG5cdCAgICAgIHZhciBvcCA9IGZyYWcuc3RhZ2dlckNiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcblx0ICAgICAgICBmcmFnLmJlZm9yZShhbmNob3IpO1xuXHQgICAgICAgIHJlbW92ZShhbmNob3IpO1xuXHQgICAgICB9KTtcblx0ICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgdGFyZ2V0ID0gcHJldkVsLm5leHRTaWJsaW5nO1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKCF0YXJnZXQpIHtcblx0ICAgICAgICAvLyByZXNldCBlbmQgYW5jaG9yIHBvc2l0aW9uIGluIGNhc2UgdGhlIHBvc2l0aW9uIHdhcyBtZXNzZWQgdXBcblx0ICAgICAgICAvLyBieSBhbiBleHRlcm5hbCBkcmFnLW4tZHJvcCBsaWJyYXJ5LlxuXHQgICAgICAgIGFmdGVyKHRoaXMuZW5kLCBwcmV2RWwpO1xuXHQgICAgICAgIHRhcmdldCA9IHRoaXMuZW5kO1xuXHQgICAgICB9XG5cdCAgICAgIGZyYWcuYmVmb3JlKHRhcmdldCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVtb3ZlIGEgZnJhZ21lbnQuIEhhbmRsZXMgc3RhZ2dlcmluZy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gdG90YWxcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IGluRG9jdW1lbnRcblx0ICAgKi9cblx0XG5cdCAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoZnJhZywgaW5kZXgsIHRvdGFsLCBpbkRvY3VtZW50KSB7XG5cdCAgICBpZiAoZnJhZy5zdGFnZ2VyQ2IpIHtcblx0ICAgICAgZnJhZy5zdGFnZ2VyQ2IuY2FuY2VsKCk7XG5cdCAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcblx0ICAgICAgLy8gaXQncyBub3QgcG9zc2libGUgZm9yIHRoZSBzYW1lIGZyYWcgdG8gYmUgcmVtb3ZlZFxuXHQgICAgICAvLyB0d2ljZSwgc28gaWYgd2UgaGF2ZSBhIHBlbmRpbmcgc3RhZ2dlciBjYWxsYmFjayxcblx0ICAgICAgLy8gaXQgbWVhbnMgdGhpcyBmcmFnIGlzIHF1ZXVlZCBmb3IgZW50ZXIgYnV0IHJlbW92ZWRcblx0ICAgICAgLy8gYmVmb3JlIGl0cyB0cmFuc2l0aW9uIHN0YXJ0ZWQuIFNpbmNlIGl0IGlzIGFscmVhZHlcblx0ICAgICAgLy8gZGVzdHJveWVkLCB3ZSBjYW4ganVzdCBsZWF2ZSBpdCBpbiBkZXRhY2hlZCBzdGF0ZS5cblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIHN0YWdnZXJBbW91bnQgPSB0aGlzLmdldFN0YWdnZXIoZnJhZywgaW5kZXgsIHRvdGFsLCAnbGVhdmUnKTtcblx0ICAgIGlmIChpbkRvY3VtZW50ICYmIHN0YWdnZXJBbW91bnQpIHtcblx0ICAgICAgdmFyIG9wID0gZnJhZy5zdGFnZ2VyQ2IgPSBjYW5jZWxsYWJsZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuXHQgICAgICAgIGZyYWcucmVtb3ZlKCk7XG5cdCAgICAgIH0pO1xuXHQgICAgICBzZXRUaW1lb3V0KG9wLCBzdGFnZ2VyQW1vdW50KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGZyYWcucmVtb3ZlKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogTW92ZSBhIGZyYWdtZW50IHRvIGEgbmV3IHBvc2l0aW9uLlxuXHQgICAqIEZvcmNlIG5vIHRyYW5zaXRpb24uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICogQHBhcmFtIHtOb2RlfSBwcmV2RWxcblx0ICAgKi9cblx0XG5cdCAgbW92ZTogZnVuY3Rpb24gbW92ZShmcmFnLCBwcmV2RWwpIHtcblx0ICAgIC8vIGZpeCBhIGNvbW1vbiBpc3N1ZSB3aXRoIFNvcnRhYmxlOlxuXHQgICAgLy8gaWYgcHJldkVsIGRvZXNuJ3QgaGF2ZSBuZXh0U2libGluZywgdGhpcyBtZWFucyBpdCdzXG5cdCAgICAvLyBiZWVuIGRyYWdnZWQgYWZ0ZXIgdGhlIGVuZCBhbmNob3IuIEp1c3QgcmUtcG9zaXRpb25cblx0ICAgIC8vIHRoZSBlbmQgYW5jaG9yIHRvIHRoZSBlbmQgb2YgdGhlIGNvbnRhaW5lci5cblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKCFwcmV2RWwubmV4dFNpYmxpbmcpIHtcblx0ICAgICAgdGhpcy5lbmQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0aGlzLmVuZCk7XG5cdCAgICB9XG5cdCAgICBmcmFnLmJlZm9yZShwcmV2RWwubmV4dFNpYmxpbmcsIGZhbHNlKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBDYWNoZSBhIGZyYWdtZW50IHVzaW5nIHRyYWNrLWJ5IG9yIHRoZSBvYmplY3Qga2V5LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gW2tleV1cblx0ICAgKi9cblx0XG5cdCAgY2FjaGVGcmFnOiBmdW5jdGlvbiBjYWNoZUZyYWcodmFsdWUsIGZyYWcsIGluZGV4LCBrZXkpIHtcblx0ICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcblx0ICAgIHZhciBjYWNoZSA9IHRoaXMuY2FjaGU7XG5cdCAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcblx0ICAgIHZhciBpZDtcblx0ICAgIGlmIChrZXkgfHwgdHJhY2tCeUtleSB8fCBwcmltaXRpdmUpIHtcblx0ICAgICAgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcblx0ICAgICAgaWYgKCFjYWNoZVtpZF0pIHtcblx0ICAgICAgICBjYWNoZVtpZF0gPSBmcmFnO1xuXHQgICAgICB9IGVsc2UgaWYgKHRyYWNrQnlLZXkgIT09ICckaW5kZXgnKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZCA9IHRoaXMuaWQ7XG5cdCAgICAgIGlmIChoYXNPd24odmFsdWUsIGlkKSkge1xuXHQgICAgICAgIGlmICh2YWx1ZVtpZF0gPT09IG51bGwpIHtcblx0ICAgICAgICAgIHZhbHVlW2lkXSA9IGZyYWc7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWx1ZSkpIHtcblx0ICAgICAgICBkZWYodmFsdWUsIGlkLCBmcmFnKTtcblx0ICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgd2FybignRnJvemVuIHYtZm9yIG9iamVjdHMgY2Fubm90IGJlIGF1dG9tYXRpY2FsbHkgdHJhY2tlZCwgbWFrZSBzdXJlIHRvICcgKyAncHJvdmlkZSBhIHRyYWNrLWJ5IGtleS4nKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgZnJhZy5yYXcgPSB2YWx1ZTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBHZXQgYSBjYWNoZWQgZnJhZ21lbnQgZnJvbSB0aGUgdmFsdWUvaW5kZXgva2V5XG5cdCAgICpcblx0ICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqIEByZXR1cm4ge0ZyYWdtZW50fVxuXHQgICAqL1xuXHRcblx0ICBnZXRDYWNoZWRGcmFnOiBmdW5jdGlvbiBnZXRDYWNoZWRGcmFnKHZhbHVlLCBpbmRleCwga2V5KSB7XG5cdCAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG5cdCAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcblx0ICAgIHZhciBmcmFnO1xuXHQgICAgaWYgKGtleSB8fCB0cmFja0J5S2V5IHx8IHByaW1pdGl2ZSkge1xuXHQgICAgICB2YXIgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcblx0ICAgICAgZnJhZyA9IHRoaXMuY2FjaGVbaWRdO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZnJhZyA9IHZhbHVlW3RoaXMuaWRdO1xuXHQgICAgfVxuXHQgICAgaWYgKGZyYWcgJiYgKGZyYWcucmV1c2VkIHx8IGZyYWcuZnJlc2gpKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmcmFnO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIERlbGV0ZSBhIGZyYWdtZW50IGZyb20gY2FjaGUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICovXG5cdFxuXHQgIGRlbGV0ZUNhY2hlZEZyYWc6IGZ1bmN0aW9uIGRlbGV0ZUNhY2hlZEZyYWcoZnJhZykge1xuXHQgICAgdmFyIHZhbHVlID0gZnJhZy5yYXc7XG5cdCAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG5cdCAgICB2YXIgc2NvcGUgPSBmcmFnLnNjb3BlO1xuXHQgICAgdmFyIGluZGV4ID0gc2NvcGUuJGluZGV4O1xuXHQgICAgLy8gZml4ICM5NDg6IGF2b2lkIGFjY2lkZW50YWxseSBmYWxsIHRocm91Z2ggdG9cblx0ICAgIC8vIGEgcGFyZW50IHJlcGVhdGVyIHdoaWNoIGhhcHBlbnMgdG8gaGF2ZSAka2V5LlxuXHQgICAgdmFyIGtleSA9IGhhc093bihzY29wZSwgJyRrZXknKSAmJiBzY29wZS4ka2V5O1xuXHQgICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG5cdCAgICBpZiAodHJhY2tCeUtleSB8fCBrZXkgfHwgcHJpbWl0aXZlKSB7XG5cdCAgICAgIHZhciBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xuXHQgICAgICB0aGlzLmNhY2hlW2lkXSA9IG51bGw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YWx1ZVt0aGlzLmlkXSA9IG51bGw7XG5cdCAgICAgIGZyYWcucmF3ID0gbnVsbDtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBHZXQgdGhlIHN0YWdnZXIgYW1vdW50IGZvciBhbiBpbnNlcnRpb24vcmVtb3ZhbC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gdG90YWxcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHQgICAqL1xuXHRcblx0ICBnZXRTdGFnZ2VyOiBmdW5jdGlvbiBnZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCB0b3RhbCwgdHlwZSkge1xuXHQgICAgdHlwZSA9IHR5cGUgKyAnU3RhZ2dlcic7XG5cdCAgICB2YXIgdHJhbnMgPSBmcmFnLm5vZGUuX192X3RyYW5zO1xuXHQgICAgdmFyIGhvb2tzID0gdHJhbnMgJiYgdHJhbnMuaG9va3M7XG5cdCAgICB2YXIgaG9vayA9IGhvb2tzICYmIChob29rc1t0eXBlXSB8fCBob29rcy5zdGFnZ2VyKTtcblx0ICAgIHJldHVybiBob29rID8gaG9vay5jYWxsKGZyYWcsIGluZGV4LCB0b3RhbCkgOiBpbmRleCAqIHBhcnNlSW50KHRoaXMucGFyYW1zW3R5cGVdIHx8IHRoaXMucGFyYW1zLnN0YWdnZXIsIDEwKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBQcmUtcHJvY2VzcyB0aGUgdmFsdWUgYmVmb3JlIHBpcGluZyBpdCB0aHJvdWdoIHRoZVxuXHQgICAqIGZpbHRlcnMuIFRoaXMgaXMgcGFzc2VkIHRvIGFuZCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIuXG5cdCAgICovXG5cdFxuXHQgIF9wcmVQcm9jZXNzOiBmdW5jdGlvbiBfcHJlUHJvY2Vzcyh2YWx1ZSkge1xuXHQgICAgLy8gcmVnYXJkbGVzcyBvZiB0eXBlLCBzdG9yZSB0aGUgdW4tZmlsdGVyZWQgcmF3IHZhbHVlLlxuXHQgICAgdGhpcy5yYXdWYWx1ZSA9IHZhbHVlO1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFBvc3QtcHJvY2VzcyB0aGUgdmFsdWUgYWZ0ZXIgaXQgaGFzIGJlZW4gcGlwZWQgdGhyb3VnaFxuXHQgICAqIHRoZSBmaWx0ZXJzLiBUaGlzIGlzIHBhc3NlZCB0byBhbmQgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyLlxuXHQgICAqXG5cdCAgICogSXQgaXMgbmVjZXNzYXJ5IGZvciB0aGlzIHRvIGJlIGNhbGxlZCBkdXJpbmcgdGhlXG5cdCAgICogd2F0Y2hlcidzIGRlcGVuZGVuY3kgY29sbGVjdGlvbiBwaGFzZSBiZWNhdXNlIHdlIHdhbnRcblx0ICAgKiB0aGUgdi1mb3IgdG8gdXBkYXRlIHdoZW4gdGhlIHNvdXJjZSBPYmplY3QgaXMgbXV0YXRlZC5cblx0ICAgKi9cblx0XG5cdCAgX3Bvc3RQcm9jZXNzOiBmdW5jdGlvbiBfcG9zdFByb2Nlc3ModmFsdWUpIHtcblx0ICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgICByZXR1cm4gdmFsdWU7XG5cdCAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG5cdCAgICAgIC8vIGNvbnZlcnQgcGxhaW4gb2JqZWN0IHRvIGFycmF5LlxuXHQgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcblx0ICAgICAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgICAgdmFyIHJlcyA9IG5ldyBBcnJheShpKTtcblx0ICAgICAgdmFyIGtleTtcblx0ICAgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICAgIGtleSA9IGtleXNbaV07XG5cdCAgICAgICAgcmVzW2ldID0ge1xuXHQgICAgICAgICAgJGtleToga2V5LFxuXHQgICAgICAgICAgJHZhbHVlOiB2YWx1ZVtrZXldXG5cdCAgICAgICAgfTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gcmVzO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHZhbHVlKSkge1xuXHQgICAgICAgIHZhbHVlID0gcmFuZ2UodmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2YWx1ZSB8fCBbXTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIGlmICh0aGlzLmRlc2NyaXB0b3IucmVmKSB7XG5cdCAgICAgICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kcmVmc1t0aGlzLmRlc2NyaXB0b3IucmVmXSA9IG51bGw7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5mcmFncykge1xuXHQgICAgICB2YXIgaSA9IHRoaXMuZnJhZ3MubGVuZ3RoO1xuXHQgICAgICB2YXIgZnJhZztcblx0ICAgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICAgIGZyYWcgPSB0aGlzLmZyYWdzW2ldO1xuXHQgICAgICAgIHRoaXMuZGVsZXRlQ2FjaGVkRnJhZyhmcmFnKTtcblx0ICAgICAgICBmcmFnLmRlc3Ryb3koKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBIZWxwZXIgdG8gZmluZCB0aGUgcHJldmlvdXMgZWxlbWVudCB0aGF0IGlzIGEgZnJhZ21lbnRcblx0ICogYW5jaG9yLiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIGEgZGVzdHJveWVkIGZyYWcnc1xuXHQgKiBlbGVtZW50IGNvdWxkIHN0aWxsIGJlIGxpbmdlcmluZyBpbiB0aGUgRE9NIGJlZm9yZSBpdHNcblx0ICogbGVhdmluZyB0cmFuc2l0aW9uIGZpbmlzaGVzLCBidXQgaXRzIGluc2VydGVkIGZsYWdcblx0ICogc2hvdWxkIGhhdmUgYmVlbiBzZXQgdG8gZmFsc2Ugc28gd2UgY2FuIHNraXAgdGhlbS5cblx0ICpcblx0ICogSWYgdGhpcyBpcyBhIGJsb2NrIHJlcGVhdCwgd2Ugd2FudCB0byBtYWtlIHN1cmUgd2Ugb25seVxuXHQgKiByZXR1cm4gZnJhZyB0aGF0IGlzIGJvdW5kIHRvIHRoaXMgdi1mb3IuIChzZWUgIzkyOSlcblx0ICpcblx0ICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgKiBAcGFyYW0ge0NvbW1lbnR8VGV4dH0gYW5jaG9yXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuXHQgKiBAcmV0dXJuIHtGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmaW5kUHJldkZyYWcoZnJhZywgYW5jaG9yLCBpZCkge1xuXHQgIHZhciBlbCA9IGZyYWcubm9kZS5wcmV2aW91c1NpYmxpbmc7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKCFlbCkgcmV0dXJuO1xuXHQgIGZyYWcgPSBlbC5fX3ZfZnJhZztcblx0ICB3aGlsZSAoKCFmcmFnIHx8IGZyYWcuZm9ySWQgIT09IGlkIHx8ICFmcmFnLmluc2VydGVkKSAmJiBlbCAhPT0gYW5jaG9yKSB7XG5cdCAgICBlbCA9IGVsLnByZXZpb3VzU2libGluZztcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKCFlbCkgcmV0dXJuO1xuXHQgICAgZnJhZyA9IGVsLl9fdl9mcmFnO1xuXHQgIH1cblx0ICByZXR1cm4gZnJhZztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZpbmQgYSB2bSBmcm9tIGEgZnJhZ21lbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICogQHJldHVybiB7VnVlfHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmaW5kVm1Gcm9tRnJhZyhmcmFnKSB7XG5cdCAgdmFyIG5vZGUgPSBmcmFnLm5vZGU7XG5cdCAgLy8gaGFuZGxlIG11bHRpLW5vZGUgZnJhZ1xuXHQgIGlmIChmcmFnLmVuZCkge1xuXHQgICAgd2hpbGUgKCFub2RlLl9fdnVlX18gJiYgbm9kZSAhPT0gZnJhZy5lbmQgJiYgbm9kZS5uZXh0U2libGluZykge1xuXHQgICAgICBub2RlID0gbm9kZS5uZXh0U2libGluZztcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG5vZGUuX192dWVfXztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZSBhIHJhbmdlIGFycmF5IGZyb20gZ2l2ZW4gbnVtYmVyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge051bWJlcn0gblxuXHQgKiBAcmV0dXJuIHtBcnJheX1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByYW5nZShuKSB7XG5cdCAgdmFyIGkgPSAtMTtcblx0ICB2YXIgcmV0ID0gbmV3IEFycmF5KE1hdGguZmxvb3IobikpO1xuXHQgIHdoaWxlICgrK2kgPCBuKSB7XG5cdCAgICByZXRbaV0gPSBpO1xuXHQgIH1cblx0ICByZXR1cm4gcmV0O1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IHRoZSB0cmFjayBieSBrZXkgZm9yIGFuIGl0ZW0uXG5cdCAqXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHBhcmFtIHtTdHJpbmd9IFt0cmFja0J5S2V5XVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpIHtcblx0ICByZXR1cm4gdHJhY2tCeUtleSA/IHRyYWNrQnlLZXkgPT09ICckaW5kZXgnID8gaW5kZXggOiB0cmFja0J5S2V5LmNoYXJBdCgwKS5tYXRjaCgvXFx3LykgPyBnZXRQYXRoKHZhbHVlLCB0cmFja0J5S2V5KSA6IHZhbHVlW3RyYWNrQnlLZXldIDoga2V5IHx8IHZhbHVlO1xuXHR9XG5cdFxuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIHZGb3Iud2FybkR1cGxpY2F0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgd2FybignRHVwbGljYXRlIHZhbHVlIGZvdW5kIGluIHYtZm9yPVwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgKyAnLiBVc2UgdHJhY2stYnk9XCIkaW5kZXhcIiBpZiAnICsgJ3lvdSBhcmUgZXhwZWN0aW5nIGR1cGxpY2F0ZSB2YWx1ZXMuJywgdGhpcy52bSk7XG5cdCAgfTtcblx0fVxuXHRcblx0dmFyIHZJZiA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IElGLFxuXHQgIHRlcm1pbmFsOiB0cnVlLFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIGlmICghZWwuX192dWVfXykge1xuXHQgICAgICAvLyBjaGVjayBlbHNlIGJsb2NrXG5cdCAgICAgIHZhciBuZXh0ID0gZWwubmV4dEVsZW1lbnRTaWJsaW5nO1xuXHQgICAgICBpZiAobmV4dCAmJiBnZXRBdHRyKG5leHQsICd2LWVsc2UnKSAhPT0gbnVsbCkge1xuXHQgICAgICAgIHJlbW92ZShuZXh0KTtcblx0ICAgICAgICB0aGlzLmVsc2VFbCA9IG5leHQ7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gY2hlY2sgbWFpbiBibG9ja1xuXHQgICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1pZicpO1xuXHQgICAgICByZXBsYWNlKGVsLCB0aGlzLmFuY2hvcik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3YtaWY9XCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiIGNhbm5vdCBiZSAnICsgJ3VzZWQgb24gYW4gaW5zdGFuY2Ugcm9vdCBlbGVtZW50LicsIHRoaXMudm0pO1xuXHQgICAgICB0aGlzLmludmFsaWQgPSB0cnVlO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICBpZiAodGhpcy5pbnZhbGlkKSByZXR1cm47XG5cdCAgICBpZiAodmFsdWUpIHtcblx0ICAgICAgaWYgKCF0aGlzLmZyYWcpIHtcblx0ICAgICAgICB0aGlzLmluc2VydCgpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLnJlbW92ZSgpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KCkge1xuXHQgICAgaWYgKHRoaXMuZWxzZUZyYWcpIHtcblx0ICAgICAgdGhpcy5lbHNlRnJhZy5yZW1vdmUoKTtcblx0ICAgICAgdGhpcy5lbHNlRnJhZyA9IG51bGw7XG5cdCAgICB9XG5cdCAgICAvLyBsYXp5IGluaXQgZmFjdG9yeVxuXHQgICAgaWYgKCF0aGlzLmZhY3RvcnkpIHtcblx0ICAgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCB0aGlzLmVsKTtcblx0ICAgIH1cblx0ICAgIHRoaXMuZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUodGhpcy5faG9zdCwgdGhpcy5fc2NvcGUsIHRoaXMuX2ZyYWcpO1xuXHQgICAgdGhpcy5mcmFnLmJlZm9yZSh0aGlzLmFuY2hvcik7XG5cdCAgfSxcblx0XG5cdCAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG5cdCAgICBpZiAodGhpcy5mcmFnKSB7XG5cdCAgICAgIHRoaXMuZnJhZy5yZW1vdmUoKTtcblx0ICAgICAgdGhpcy5mcmFnID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLmVsc2VFbCAmJiAhdGhpcy5lbHNlRnJhZykge1xuXHQgICAgICBpZiAoIXRoaXMuZWxzZUZhY3RvcnkpIHtcblx0ICAgICAgICB0aGlzLmVsc2VGYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLmVsc2VFbC5fY29udGV4dCB8fCB0aGlzLnZtLCB0aGlzLmVsc2VFbCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5lbHNlRnJhZyA9IHRoaXMuZWxzZUZhY3RvcnkuY3JlYXRlKHRoaXMuX2hvc3QsIHRoaXMuX3Njb3BlLCB0aGlzLl9mcmFnKTtcblx0ICAgICAgdGhpcy5lbHNlRnJhZy5iZWZvcmUodGhpcy5hbmNob3IpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgaWYgKHRoaXMuZnJhZykge1xuXHQgICAgICB0aGlzLmZyYWcuZGVzdHJveSgpO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuZWxzZUZyYWcpIHtcblx0ICAgICAgdGhpcy5lbHNlRnJhZy5kZXN0cm95KCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHNob3cgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyBjaGVjayBlbHNlIGJsb2NrXG5cdCAgICB2YXIgbmV4dCA9IHRoaXMuZWwubmV4dEVsZW1lbnRTaWJsaW5nO1xuXHQgICAgaWYgKG5leHQgJiYgZ2V0QXR0cihuZXh0LCAndi1lbHNlJykgIT09IG51bGwpIHtcblx0ICAgICAgdGhpcy5lbHNlRWwgPSBuZXh0O1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB0aGlzLmFwcGx5KHRoaXMuZWwsIHZhbHVlKTtcblx0ICAgIGlmICh0aGlzLmVsc2VFbCkge1xuXHQgICAgICB0aGlzLmFwcGx5KHRoaXMuZWxzZUVsLCAhdmFsdWUpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGFwcGx5OiBmdW5jdGlvbiBhcHBseShlbCwgdmFsdWUpIHtcblx0ICAgIGlmIChpbkRvYyhlbCkpIHtcblx0ICAgICAgYXBwbHlUcmFuc2l0aW9uKGVsLCB2YWx1ZSA/IDEgOiAtMSwgdG9nZ2xlLCB0aGlzLnZtKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRvZ2dsZSgpO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gdG9nZ2xlKCkge1xuXHQgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPyAnJyA6ICdub25lJztcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgdGV4dCQyID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIHZhciBpc1JhbmdlID0gZWwudHlwZSA9PT0gJ3JhbmdlJztcblx0ICAgIHZhciBsYXp5ID0gdGhpcy5wYXJhbXMubGF6eTtcblx0ICAgIHZhciBudW1iZXIgPSB0aGlzLnBhcmFtcy5udW1iZXI7XG5cdCAgICB2YXIgZGVib3VuY2UgPSB0aGlzLnBhcmFtcy5kZWJvdW5jZTtcblx0XG5cdCAgICAvLyBoYW5kbGUgY29tcG9zaXRpb24gZXZlbnRzLlxuXHQgICAgLy8gICBodHRwOi8vYmxvZy5ldmFueW91Lm1lLzIwMTQvMDEvMDMvY29tcG9zaXRpb24tZXZlbnQvXG5cdCAgICAvLyBza2lwIHRoaXMgZm9yIEFuZHJvaWQgYmVjYXVzZSBpdCBoYW5kbGVzIGNvbXBvc2l0aW9uXG5cdCAgICAvLyBldmVudHMgcXVpdGUgZGlmZmVyZW50bHkuIEFuZHJvaWQgZG9lc24ndCB0cmlnZ2VyXG5cdCAgICAvLyBjb21wb3NpdGlvbiBldmVudHMgZm9yIGxhbmd1YWdlIGlucHV0IG1ldGhvZHMgZS5nLlxuXHQgICAgLy8gQ2hpbmVzZSwgYnV0IGluc3RlYWQgdHJpZ2dlcnMgdGhlbSBmb3Igc3BlbGxpbmdcblx0ICAgIC8vIHN1Z2dlc3Rpb25zLi4uIChzZWUgRGlzY3Vzc2lvbi8jMTYyKVxuXHQgICAgdmFyIGNvbXBvc2luZyA9IGZhbHNlO1xuXHQgICAgaWYgKCFpc0FuZHJvaWQgJiYgIWlzUmFuZ2UpIHtcblx0ICAgICAgdGhpcy5vbignY29tcG9zaXRpb25zdGFydCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBjb21wb3NpbmcgPSB0cnVlO1xuXHQgICAgICB9KTtcblx0ICAgICAgdGhpcy5vbignY29tcG9zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgY29tcG9zaW5nID0gZmFsc2U7XG5cdCAgICAgICAgLy8gaW4gSUUxMSB0aGUgXCJjb21wb3NpdGlvbmVuZFwiIGV2ZW50IGZpcmVzIEFGVEVSXG5cdCAgICAgICAgLy8gdGhlIFwiaW5wdXRcIiBldmVudCwgc28gdGhlIGlucHV0IGhhbmRsZXIgaXMgYmxvY2tlZFxuXHQgICAgICAgIC8vIGF0IHRoZSBlbmQuLi4gaGF2ZSB0byBjYWxsIGl0IGhlcmUuXG5cdCAgICAgICAgLy9cblx0ICAgICAgICAvLyAjMTMyNzogaW4gbGF6eSBtb2RlIHRoaXMgaXMgdW5lY2Vzc2FyeS5cblx0ICAgICAgICBpZiAoIWxhenkpIHtcblx0ICAgICAgICAgIHNlbGYubGlzdGVuZXIoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHByZXZlbnQgbWVzc2luZyB3aXRoIHRoZSBpbnB1dCB3aGVuIHVzZXIgaXMgdHlwaW5nLFxuXHQgICAgLy8gYW5kIGZvcmNlIHVwZGF0ZSBvbiBibHVyLlxuXHQgICAgdGhpcy5mb2N1c2VkID0gZmFsc2U7XG5cdCAgICBpZiAoIWlzUmFuZ2UgJiYgIWxhenkpIHtcblx0ICAgICAgdGhpcy5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgc2VsZi5mb2N1c2VkID0gdHJ1ZTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHRoaXMub24oJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgc2VsZi5mb2N1c2VkID0gZmFsc2U7XG5cdCAgICAgICAgLy8gZG8gbm90IHN5bmMgdmFsdWUgYWZ0ZXIgZnJhZ21lbnQgcmVtb3ZhbCAoIzIwMTcpXG5cdCAgICAgICAgaWYgKCFzZWxmLl9mcmFnIHx8IHNlbGYuX2ZyYWcuaW5zZXJ0ZWQpIHtcblx0ICAgICAgICAgIHNlbGYucmF3TGlzdGVuZXIoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIE5vdyBhdHRhY2ggdGhlIG1haW4gbGlzdGVuZXJcblx0ICAgIHRoaXMubGlzdGVuZXIgPSB0aGlzLnJhd0xpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoY29tcG9zaW5nIHx8ICFzZWxmLl9ib3VuZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgdmFsID0gbnVtYmVyIHx8IGlzUmFuZ2UgPyB0b051bWJlcihlbC52YWx1ZSkgOiBlbC52YWx1ZTtcblx0ICAgICAgc2VsZi5zZXQodmFsKTtcblx0ICAgICAgLy8gZm9yY2UgdXBkYXRlIG9uIG5leHQgdGljayB0byBhdm9pZCBsb2NrICYgc2FtZSB2YWx1ZVxuXHQgICAgICAvLyBhbHNvIG9ubHkgdXBkYXRlIHdoZW4gdXNlciBpcyBub3QgdHlwaW5nXG5cdCAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoc2VsZi5fYm91bmQgJiYgIXNlbGYuZm9jdXNlZCkge1xuXHQgICAgICAgICAgc2VsZi51cGRhdGUoc2VsZi5fd2F0Y2hlci52YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gYXBwbHkgZGVib3VuY2Vcblx0ICAgIGlmIChkZWJvdW5jZSkge1xuXHQgICAgICB0aGlzLmxpc3RlbmVyID0gX2RlYm91bmNlKHRoaXMubGlzdGVuZXIsIGRlYm91bmNlKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBTdXBwb3J0IGpRdWVyeSBldmVudHMsIHNpbmNlIGpRdWVyeS50cmlnZ2VyKCkgZG9lc24ndFxuXHQgICAgLy8gdHJpZ2dlciBuYXRpdmUgZXZlbnRzIGluIHNvbWUgY2FzZXMgYW5kIHNvbWUgcGx1Z2luc1xuXHQgICAgLy8gcmVseSBvbiAkLnRyaWdnZXIoKVxuXHQgICAgLy9cblx0ICAgIC8vIFdlIHdhbnQgdG8gbWFrZSBzdXJlIGlmIGEgbGlzdGVuZXIgaXMgYXR0YWNoZWQgdXNpbmdcblx0ICAgIC8vIGpRdWVyeSwgaXQgaXMgYWxzbyByZW1vdmVkIHdpdGggalF1ZXJ5LCB0aGF0J3Mgd2h5XG5cdCAgICAvLyB3ZSBkbyB0aGUgY2hlY2sgZm9yIGVhY2ggZGlyZWN0aXZlIGluc3RhbmNlIGFuZFxuXHQgICAgLy8gc3RvcmUgdGhhdCBjaGVjayByZXN1bHQgb24gaXRzZWxmLiBUaGlzIGFsc28gYWxsb3dzXG5cdCAgICAvLyBlYXNpZXIgdGVzdCBjb3ZlcmFnZSBjb250cm9sIGJ5IHVuc2V0dGluZyB0aGUgZ2xvYmFsXG5cdCAgICAvLyBqUXVlcnkgdmFyaWFibGUgaW4gdGVzdHMuXG5cdCAgICB0aGlzLmhhc2pRdWVyeSA9IHR5cGVvZiBqUXVlcnkgPT09ICdmdW5jdGlvbic7XG5cdCAgICBpZiAodGhpcy5oYXNqUXVlcnkpIHtcblx0ICAgICAgdmFyIG1ldGhvZCA9IGpRdWVyeS5mbi5vbiA/ICdvbicgOiAnYmluZCc7XG5cdCAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnY2hhbmdlJywgdGhpcy5yYXdMaXN0ZW5lcik7XG5cdCAgICAgIGlmICghbGF6eSkge1xuXHQgICAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5yYXdMaXN0ZW5lcik7XG5cdCAgICAgIGlmICghbGF6eSkge1xuXHQgICAgICAgIHRoaXMub24oJ2lucHV0JywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBJRTkgZG9lc24ndCBmaXJlIGlucHV0IGV2ZW50IG9uIGJhY2tzcGFjZS9kZWwvY3V0XG5cdCAgICBpZiAoIWxhenkgJiYgaXNJRTkpIHtcblx0ICAgICAgdGhpcy5vbignY3V0JywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIG5leHRUaWNrKHNlbGYubGlzdGVuZXIpO1xuXHQgICAgICB9KTtcblx0ICAgICAgdGhpcy5vbigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDQ2IHx8IGUua2V5Q29kZSA9PT0gOCkge1xuXHQgICAgICAgICAgc2VsZi5saXN0ZW5lcigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gc2V0IGluaXRpYWwgdmFsdWUgaWYgcHJlc2VudFxuXHQgICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgndmFsdWUnKSB8fCBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnICYmIGVsLnZhbHVlLnRyaW0oKSkge1xuXHQgICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIC8vICMzMDI5IG9ubHkgdXBkYXRlIHdoZW4gdGhlIHZhbHVlIGNoYW5nZXMuIFRoaXMgcHJldmVudFxuXHQgICAgLy8gYnJvd3NlcnMgZnJvbSBvdmVyd3JpdGluZyB2YWx1ZXMgbGlrZSBzZWxlY3Rpb25TdGFydFxuXHQgICAgdmFsdWUgPSBfdG9TdHJpbmcodmFsdWUpO1xuXHQgICAgaWYgKHZhbHVlICE9PSB0aGlzLmVsLnZhbHVlKSB0aGlzLmVsLnZhbHVlID0gdmFsdWU7XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgaWYgKHRoaXMuaGFzalF1ZXJ5KSB7XG5cdCAgICAgIHZhciBtZXRob2QgPSBqUXVlcnkuZm4ub2ZmID8gJ29mZicgOiAndW5iaW5kJztcblx0ICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciByYWRpbyA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdFxuXHQgICAgdGhpcy5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgLy8gdmFsdWUgb3ZlcndyaXRlIHZpYSB2LWJpbmQ6dmFsdWVcblx0ICAgICAgaWYgKGVsLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSkge1xuXHQgICAgICAgIHJldHVybiBlbC5fdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHZhbCA9IGVsLnZhbHVlO1xuXHQgICAgICBpZiAoc2VsZi5wYXJhbXMubnVtYmVyKSB7XG5cdCAgICAgICAgdmFsID0gdG9OdW1iZXIodmFsKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdmFsO1xuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBzZWxmLnNldChzZWxmLmdldFZhbHVlKCkpO1xuXHQgICAgfTtcblx0ICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXHRcblx0ICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkge1xuXHQgICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIHRoaXMuZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIHRoaXMuZ2V0VmFsdWUoKSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHNlbGVjdCA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0XG5cdCAgICAvLyBtZXRob2QgdG8gZm9yY2UgdXBkYXRlIERPTSB1c2luZyBsYXRlc3QgdmFsdWUuXG5cdCAgICB0aGlzLmZvcmNlVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoc2VsZi5fd2F0Y2hlcikge1xuXHQgICAgICAgIHNlbGYudXBkYXRlKHNlbGYuX3dhdGNoZXIuZ2V0KCkpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgYSBtdWx0aXBsZSBzZWxlY3Rcblx0ICAgIHZhciBtdWx0aXBsZSA9IHRoaXMubXVsdGlwbGUgPSBlbC5oYXNBdHRyaWJ1dGUoJ211bHRpcGxlJyk7XG5cdFxuXHQgICAgLy8gYXR0YWNoIGxpc3RlbmVyXG5cdCAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgdmFsdWUgPSBnZXRWYWx1ZShlbCwgbXVsdGlwbGUpO1xuXHQgICAgICB2YWx1ZSA9IHNlbGYucGFyYW1zLm51bWJlciA/IGlzQXJyYXkodmFsdWUpID8gdmFsdWUubWFwKHRvTnVtYmVyKSA6IHRvTnVtYmVyKHZhbHVlKSA6IHZhbHVlO1xuXHQgICAgICBzZWxmLnNldCh2YWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cdFxuXHQgICAgLy8gaWYgaGFzIGluaXRpYWwgdmFsdWUsIHNldCBhZnRlckJpbmRcblx0ICAgIHZhciBpbml0VmFsdWUgPSBnZXRWYWx1ZShlbCwgbXVsdGlwbGUsIHRydWUpO1xuXHQgICAgaWYgKG11bHRpcGxlICYmIGluaXRWYWx1ZS5sZW5ndGggfHwgIW11bHRpcGxlICYmIGluaXRWYWx1ZSAhPT0gbnVsbCkge1xuXHQgICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gQWxsIG1ham9yIGJyb3dzZXJzIGV4Y2VwdCBGaXJlZm94IHJlc2V0c1xuXHQgICAgLy8gc2VsZWN0ZWRJbmRleCB3aXRoIHZhbHVlIC0xIHRvIDAgd2hlbiB0aGUgZWxlbWVudFxuXHQgICAgLy8gaXMgYXBwZW5kZWQgdG8gYSBuZXcgcGFyZW50LCB0aGVyZWZvcmUgd2UgaGF2ZSB0b1xuXHQgICAgLy8gZm9yY2UgYSBET00gdXBkYXRlIHdoZW5ldmVyIHRoYXQgaGFwcGVucy4uLlxuXHQgICAgdGhpcy52bS4kb24oJ2hvb2s6YXR0YWNoZWQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIG5leHRUaWNrKF90aGlzLmZvcmNlVXBkYXRlKTtcblx0ICAgIH0pO1xuXHQgICAgaWYgKCFpbkRvYyhlbCkpIHtcblx0ICAgICAgbmV4dFRpY2sodGhpcy5mb3JjZVVwZGF0ZSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICBlbC5zZWxlY3RlZEluZGV4ID0gLTE7XG5cdCAgICB2YXIgbXVsdGkgPSB0aGlzLm11bHRpcGxlICYmIGlzQXJyYXkodmFsdWUpO1xuXHQgICAgdmFyIG9wdGlvbnMgPSBlbC5vcHRpb25zO1xuXHQgICAgdmFyIGkgPSBvcHRpb25zLmxlbmd0aDtcblx0ICAgIHZhciBvcCwgdmFsO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBvcCA9IG9wdGlvbnNbaV07XG5cdCAgICAgIHZhbCA9IG9wLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IG9wLl92YWx1ZSA6IG9wLnZhbHVlO1xuXHQgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cblx0ICAgICAgb3Auc2VsZWN0ZWQgPSBtdWx0aSA/IGluZGV4T2YkMSh2YWx1ZSwgdmFsKSA+IC0xIDogbG9vc2VFcXVhbCh2YWx1ZSwgdmFsKTtcblx0ICAgICAgLyogZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdCAgICB0aGlzLnZtLiRvZmYoJ2hvb2s6YXR0YWNoZWQnLCB0aGlzLmZvcmNlVXBkYXRlKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogR2V0IHNlbGVjdCB2YWx1ZVxuXHQgKlxuXHQgKiBAcGFyYW0ge1NlbGVjdEVsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gbXVsdGlcblx0ICogQHBhcmFtIHtCb29sZWFufSBpbml0XG5cdCAqIEByZXR1cm4ge0FycmF5fCp9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0VmFsdWUoZWwsIG11bHRpLCBpbml0KSB7XG5cdCAgdmFyIHJlcyA9IG11bHRpID8gW10gOiBudWxsO1xuXHQgIHZhciBvcCwgdmFsLCBzZWxlY3RlZDtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGVsLm9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBvcCA9IGVsLm9wdGlvbnNbaV07XG5cdCAgICBzZWxlY3RlZCA9IGluaXQgPyBvcC5oYXNBdHRyaWJ1dGUoJ3NlbGVjdGVkJykgOiBvcC5zZWxlY3RlZDtcblx0ICAgIGlmIChzZWxlY3RlZCkge1xuXHQgICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBvcC5fdmFsdWUgOiBvcC52YWx1ZTtcblx0ICAgICAgaWYgKG11bHRpKSB7XG5cdCAgICAgICAgcmVzLnB1c2godmFsKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gdmFsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBOYXRpdmUgQXJyYXkuaW5kZXhPZiB1c2VzIHN0cmljdCBlcXVhbCwgYnV0IGluIHRoaXNcblx0ICogY2FzZSB3ZSBuZWVkIHRvIG1hdGNoIHN0cmluZy9udW1iZXJzIHdpdGggY3VzdG9tIGVxdWFsLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpbmRleE9mJDEoYXJyLCB2YWwpIHtcblx0ICB2YXIgaSA9IGFyci5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgaWYgKGxvb3NlRXF1YWwoYXJyW2ldLCB2YWwpKSB7XG5cdCAgICAgIHJldHVybiBpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gLTE7XG5cdH1cblx0XG5cdHZhciBjaGVja2JveCA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdFxuXHQgICAgdGhpcy5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgcmV0dXJuIGVsLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IGVsLl92YWx1ZSA6IHNlbGYucGFyYW1zLm51bWJlciA/IHRvTnVtYmVyKGVsLnZhbHVlKSA6IGVsLnZhbHVlO1xuXHQgICAgfTtcblx0XG5cdCAgICBmdW5jdGlvbiBnZXRCb29sZWFuVmFsdWUoKSB7XG5cdCAgICAgIHZhciB2YWwgPSBlbC5jaGVja2VkO1xuXHQgICAgICBpZiAodmFsICYmIGVsLmhhc093blByb3BlcnR5KCdfdHJ1ZVZhbHVlJykpIHtcblx0ICAgICAgICByZXR1cm4gZWwuX3RydWVWYWx1ZTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoIXZhbCAmJiBlbC5oYXNPd25Qcm9wZXJ0eSgnX2ZhbHNlVmFsdWUnKSkge1xuXHQgICAgICAgIHJldHVybiBlbC5fZmFsc2VWYWx1ZTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdmFsO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBtb2RlbCA9IHNlbGYuX3dhdGNoZXIudmFsdWU7XG5cdCAgICAgIGlmIChpc0FycmF5KG1vZGVsKSkge1xuXHQgICAgICAgIHZhciB2YWwgPSBzZWxmLmdldFZhbHVlKCk7XG5cdCAgICAgICAgaWYgKGVsLmNoZWNrZWQpIHtcblx0ICAgICAgICAgIGlmIChpbmRleE9mKG1vZGVsLCB2YWwpIDwgMCkge1xuXHQgICAgICAgICAgICBtb2RlbC5wdXNoKHZhbCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIG1vZGVsLiRyZW1vdmUodmFsKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc2VsZi5zZXQoZ2V0Qm9vbGVhblZhbHVlKCkpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgnY2hlY2tlZCcpKSB7XG5cdCAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgICBlbC5jaGVja2VkID0gaW5kZXhPZih2YWx1ZSwgdGhpcy5nZXRWYWx1ZSgpKSA+IC0xO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKGVsLmhhc093blByb3BlcnR5KCdfdHJ1ZVZhbHVlJykpIHtcblx0ICAgICAgICBlbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgZWwuX3RydWVWYWx1ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZWwuY2hlY2tlZCA9ICEhdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgaGFuZGxlcnMgPSB7XG5cdCAgdGV4dDogdGV4dCQyLFxuXHQgIHJhZGlvOiByYWRpbyxcblx0ICBzZWxlY3Q6IHNlbGVjdCxcblx0ICBjaGVja2JveDogY2hlY2tib3hcblx0fTtcblx0XG5cdHZhciBtb2RlbCA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IE1PREVMLFxuXHQgIHR3b1dheTogdHJ1ZSxcblx0ICBoYW5kbGVyczogaGFuZGxlcnMsXG5cdCAgcGFyYW1zOiBbJ2xhenknLCAnbnVtYmVyJywgJ2RlYm91bmNlJ10sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFBvc3NpYmxlIGVsZW1lbnRzOlxuXHQgICAqICAgPHNlbGVjdD5cblx0ICAgKiAgIDx0ZXh0YXJlYT5cblx0ICAgKiAgIDxpbnB1dCB0eXBlPVwiKlwiPlxuXHQgICAqICAgICAtIHRleHRcblx0ICAgKiAgICAgLSBjaGVja2JveFxuXHQgICAqICAgICAtIHJhZGlvXG5cdCAgICogICAgIC0gbnVtYmVyXG5cdCAgICovXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyBmcmllbmRseSB3YXJuaW5nLi4uXG5cdCAgICB0aGlzLmNoZWNrRmlsdGVycygpO1xuXHQgICAgaWYgKHRoaXMuaGFzUmVhZCAmJiAhdGhpcy5oYXNXcml0ZSkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgYSByZWFkLW9ubHkgZmlsdGVyIHdpdGggJyArICd2LW1vZGVsPVwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCIuICcgKyAnWW91IG1pZ2h0IHdhbnQgdG8gdXNlIGEgdHdvLXdheSBmaWx0ZXIgdG8gZW5zdXJlIGNvcnJlY3QgYmVoYXZpb3IuJywgdGhpcy52bSk7XG5cdCAgICB9XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgdmFyIHRhZyA9IGVsLnRhZ05hbWU7XG5cdCAgICB2YXIgaGFuZGxlcjtcblx0ICAgIGlmICh0YWcgPT09ICdJTlBVVCcpIHtcblx0ICAgICAgaGFuZGxlciA9IGhhbmRsZXJzW2VsLnR5cGVdIHx8IGhhbmRsZXJzLnRleHQ7XG5cdCAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1NFTEVDVCcpIHtcblx0ICAgICAgaGFuZGxlciA9IGhhbmRsZXJzLnNlbGVjdDtcblx0ICAgIH0gZWxzZSBpZiAodGFnID09PSAnVEVYVEFSRUEnKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBoYW5kbGVycy50ZXh0O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LW1vZGVsIGRvZXMgbm90IHN1cHBvcnQgZWxlbWVudCB0eXBlOiAnICsgdGFnLCB0aGlzLnZtKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZWwuX192X21vZGVsID0gdGhpcztcblx0ICAgIGhhbmRsZXIuYmluZC5jYWxsKHRoaXMpO1xuXHQgICAgdGhpcy51cGRhdGUgPSBoYW5kbGVyLnVwZGF0ZTtcblx0ICAgIHRoaXMuX3VuYmluZCA9IGhhbmRsZXIudW5iaW5kO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENoZWNrIHJlYWQvd3JpdGUgZmlsdGVyIHN0YXRzLlxuXHQgICAqL1xuXHRcblx0ICBjaGVja0ZpbHRlcnM6IGZ1bmN0aW9uIGNoZWNrRmlsdGVycygpIHtcblx0ICAgIHZhciBmaWx0ZXJzID0gdGhpcy5maWx0ZXJzO1xuXHQgICAgaWYgKCFmaWx0ZXJzKSByZXR1cm47XG5cdCAgICB2YXIgaSA9IGZpbHRlcnMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YXIgZmlsdGVyID0gcmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICdmaWx0ZXJzJywgZmlsdGVyc1tpXS5uYW1lKTtcblx0ICAgICAgaWYgKHR5cGVvZiBmaWx0ZXIgPT09ICdmdW5jdGlvbicgfHwgZmlsdGVyLnJlYWQpIHtcblx0ICAgICAgICB0aGlzLmhhc1JlYWQgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChmaWx0ZXIud3JpdGUpIHtcblx0ICAgICAgICB0aGlzLmhhc1dyaXRlID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdGhpcy5lbC5fX3ZfbW9kZWwgPSBudWxsO1xuXHQgICAgdGhpcy5fdW5iaW5kICYmIHRoaXMuX3VuYmluZCgpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIGtleUNvZGUgYWxpYXNlc1xuXHR2YXIga2V5Q29kZXMgPSB7XG5cdCAgZXNjOiAyNyxcblx0ICB0YWI6IDksXG5cdCAgZW50ZXI6IDEzLFxuXHQgIHNwYWNlOiAzMixcblx0ICAnZGVsZXRlJzogWzgsIDQ2XSxcblx0ICB1cDogMzgsXG5cdCAgbGVmdDogMzcsXG5cdCAgcmlnaHQ6IDM5LFxuXHQgIGRvd246IDQwXG5cdH07XG5cdFxuXHRmdW5jdGlvbiBrZXlGaWx0ZXIoaGFuZGxlciwga2V5cykge1xuXHQgIHZhciBjb2RlcyA9IGtleXMubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIHZhciBjaGFyQ29kZSA9IGtleS5jaGFyQ29kZUF0KDApO1xuXHQgICAgaWYgKGNoYXJDb2RlID4gNDcgJiYgY2hhckNvZGUgPCA1OCkge1xuXHQgICAgICByZXR1cm4gcGFyc2VJbnQoa2V5LCAxMCk7XG5cdCAgICB9XG5cdCAgICBpZiAoa2V5Lmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICBjaGFyQ29kZSA9IGtleS50b1VwcGVyQ2FzZSgpLmNoYXJDb2RlQXQoMCk7XG5cdCAgICAgIGlmIChjaGFyQ29kZSA+IDY0ICYmIGNoYXJDb2RlIDwgOTEpIHtcblx0ICAgICAgICByZXR1cm4gY2hhckNvZGU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBrZXlDb2Rlc1trZXldO1xuXHQgIH0pO1xuXHQgIGNvZGVzID0gW10uY29uY2F0LmFwcGx5KFtdLCBjb2Rlcyk7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGtleUhhbmRsZXIoZSkge1xuXHQgICAgaWYgKGNvZGVzLmluZGV4T2YoZS5rZXlDb2RlKSA+IC0xKSB7XG5cdCAgICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc3RvcEZpbHRlcihoYW5kbGVyKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHN0b3BIYW5kbGVyKGUpIHtcblx0ICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdCAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHByZXZlbnRGaWx0ZXIoaGFuZGxlcikge1xuXHQgIHJldHVybiBmdW5jdGlvbiBwcmV2ZW50SGFuZGxlcihlKSB7XG5cdCAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNlbGZGaWx0ZXIoaGFuZGxlcikge1xuXHQgIHJldHVybiBmdW5jdGlvbiBzZWxmSGFuZGxlcihlKSB7XG5cdCAgICBpZiAoZS50YXJnZXQgPT09IGUuY3VycmVudFRhcmdldCkge1xuXHQgICAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdHZhciBvbiQxID0ge1xuXHRcblx0ICBwcmlvcml0eTogT04sXG5cdCAgYWNjZXB0U3RhdGVtZW50OiB0cnVlLFxuXHQgIGtleUNvZGVzOiBrZXlDb2Rlcyxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8vIGRlYWwgd2l0aCBpZnJhbWVzXG5cdCAgICBpZiAodGhpcy5lbC50YWdOYW1lID09PSAnSUZSQU1FJyAmJiB0aGlzLmFyZyAhPT0gJ2xvYWQnKSB7XG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgdGhpcy5pZnJhbWVCaW5kID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIG9uKHNlbGYuZWwuY29udGVudFdpbmRvdywgc2VsZi5hcmcsIHNlbGYuaGFuZGxlciwgc2VsZi5tb2RpZmllcnMuY2FwdHVyZSk7XG5cdCAgICAgIH07XG5cdCAgICAgIHRoaXMub24oJ2xvYWQnLCB0aGlzLmlmcmFtZUJpbmQpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGhhbmRsZXIpIHtcblx0ICAgIC8vIHN0dWIgYSBub29wIGZvciB2LW9uIHdpdGggbm8gdmFsdWUsXG5cdCAgICAvLyBlLmcuIEBtb3VzZWRvd24ucHJldmVudFxuXHQgICAgaWYgKCF0aGlzLmRlc2NyaXB0b3IucmF3KSB7XG5cdCAgICAgIGhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7fTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LW9uOicgKyB0aGlzLmFyZyArICc9XCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiIGV4cGVjdHMgYSBmdW5jdGlvbiB2YWx1ZSwgJyArICdnb3QgJyArIGhhbmRsZXIsIHRoaXMudm0pO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gYXBwbHkgbW9kaWZpZXJzXG5cdCAgICBpZiAodGhpcy5tb2RpZmllcnMuc3RvcCkge1xuXHQgICAgICBoYW5kbGVyID0gc3RvcEZpbHRlcihoYW5kbGVyKTtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLm1vZGlmaWVycy5wcmV2ZW50KSB7XG5cdCAgICAgIGhhbmRsZXIgPSBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMubW9kaWZpZXJzLnNlbGYpIHtcblx0ICAgICAgaGFuZGxlciA9IHNlbGZGaWx0ZXIoaGFuZGxlcik7XG5cdCAgICB9XG5cdCAgICAvLyBrZXkgZmlsdGVyXG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMubW9kaWZpZXJzKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4ga2V5ICE9PSAnc3RvcCcgJiYga2V5ICE9PSAncHJldmVudCcgJiYga2V5ICE9PSAnc2VsZicgJiYga2V5ICE9PSAnY2FwdHVyZSc7XG5cdCAgICB9KTtcblx0ICAgIGlmIChrZXlzLmxlbmd0aCkge1xuXHQgICAgICBoYW5kbGVyID0ga2V5RmlsdGVyKGhhbmRsZXIsIGtleXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMucmVzZXQoKTtcblx0ICAgIHRoaXMuaGFuZGxlciA9IGhhbmRsZXI7XG5cdFxuXHQgICAgaWYgKHRoaXMuaWZyYW1lQmluZCkge1xuXHQgICAgICB0aGlzLmlmcmFtZUJpbmQoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG9uKHRoaXMuZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIsIHRoaXMubW9kaWZpZXJzLmNhcHR1cmUpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuaWZyYW1lQmluZCA/IHRoaXMuZWwuY29udGVudFdpbmRvdyA6IHRoaXMuZWw7XG5cdCAgICBpZiAodGhpcy5oYW5kbGVyKSB7XG5cdCAgICAgIG9mZihlbCwgdGhpcy5hcmcsIHRoaXMuaGFuZGxlcik7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB0aGlzLnJlc2V0KCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHByZWZpeGVzID0gWyctd2Via2l0LScsICctbW96LScsICctbXMtJ107XG5cdHZhciBjYW1lbFByZWZpeGVzID0gWydXZWJraXQnLCAnTW96JywgJ21zJ107XG5cdHZhciBpbXBvcnRhbnRSRSA9IC8haW1wb3J0YW50Oz8kLztcblx0dmFyIHByb3BDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdFxuXHR2YXIgdGVzdEVsID0gbnVsbDtcblx0XG5cdHZhciBzdHlsZSA9IHtcblx0XG5cdCAgZGVlcDogdHJ1ZSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHRoaXMuZWwuc3R5bGUuY3NzVGV4dCA9IHZhbHVlO1xuXHQgICAgfSBlbHNlIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZS5yZWR1Y2UoZXh0ZW5kLCB7fSkpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUgfHwge30pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGhhbmRsZU9iamVjdDogZnVuY3Rpb24gaGFuZGxlT2JqZWN0KHZhbHVlKSB7XG5cdCAgICAvLyBjYWNoZSBvYmplY3Qgc3R5bGVzIHNvIHRoYXQgb25seSBjaGFuZ2VkIHByb3BzXG5cdCAgICAvLyBhcmUgYWN0dWFsbHkgdXBkYXRlZC5cblx0ICAgIHZhciBjYWNoZSA9IHRoaXMuY2FjaGUgfHwgKHRoaXMuY2FjaGUgPSB7fSk7XG5cdCAgICB2YXIgbmFtZSwgdmFsO1xuXHQgICAgZm9yIChuYW1lIGluIGNhY2hlKSB7XG5cdCAgICAgIGlmICghKG5hbWUgaW4gdmFsdWUpKSB7XG5cdCAgICAgICAgdGhpcy5oYW5kbGVTaW5nbGUobmFtZSwgbnVsbCk7XG5cdCAgICAgICAgZGVsZXRlIGNhY2hlW25hbWVdO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBmb3IgKG5hbWUgaW4gdmFsdWUpIHtcblx0ICAgICAgdmFsID0gdmFsdWVbbmFtZV07XG5cdCAgICAgIGlmICh2YWwgIT09IGNhY2hlW25hbWVdKSB7XG5cdCAgICAgICAgY2FjaGVbbmFtZV0gPSB2YWw7XG5cdCAgICAgICAgdGhpcy5oYW5kbGVTaW5nbGUobmFtZSwgdmFsKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGhhbmRsZVNpbmdsZTogZnVuY3Rpb24gaGFuZGxlU2luZ2xlKHByb3AsIHZhbHVlKSB7XG5cdCAgICBwcm9wID0gbm9ybWFsaXplKHByb3ApO1xuXHQgICAgaWYgKCFwcm9wKSByZXR1cm47IC8vIHVuc3VwcG9ydGVkIHByb3Bcblx0ICAgIC8vIGNhc3QgcG9zc2libGUgbnVtYmVycy9ib29sZWFucyBpbnRvIHN0cmluZ3Ncblx0ICAgIGlmICh2YWx1ZSAhPSBudWxsKSB2YWx1ZSArPSAnJztcblx0ICAgIGlmICh2YWx1ZSkge1xuXHQgICAgICB2YXIgaXNJbXBvcnRhbnQgPSBpbXBvcnRhbnRSRS50ZXN0KHZhbHVlKSA/ICdpbXBvcnRhbnQnIDogJyc7XG5cdCAgICAgIGlmIChpc0ltcG9ydGFudCkge1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgICB3YXJuKCdJdFxcJ3MgcHJvYmFibHkgYSBiYWQgaWRlYSB0byB1c2UgIWltcG9ydGFudCB3aXRoIGlubGluZSBydWxlcy4gJyArICdUaGlzIGZlYXR1cmUgd2lsbCBiZSBkZXByZWNhdGVkIGluIGEgZnV0dXJlIHZlcnNpb24gb2YgVnVlLicpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoaW1wb3J0YW50UkUsICcnKS50cmltKCk7XG5cdCAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eShwcm9wLmtlYmFiLCB2YWx1ZSwgaXNJbXBvcnRhbnQpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuZWwuc3R5bGVbcHJvcC5jYW1lbF0gPSB2YWx1ZTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5lbC5zdHlsZVtwcm9wLmNhbWVsXSA9ICcnO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdH07XG5cdFxuXHQvKipcblx0ICogTm9ybWFsaXplIGEgQ1NTIHByb3BlcnR5IG5hbWUuXG5cdCAqIC0gY2FjaGUgcmVzdWx0XG5cdCAqIC0gYXV0byBwcmVmaXhcblx0ICogLSBjYW1lbENhc2UgLT4gZGFzaC1jYXNlXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBub3JtYWxpemUocHJvcCkge1xuXHQgIGlmIChwcm9wQ2FjaGVbcHJvcF0pIHtcblx0ICAgIHJldHVybiBwcm9wQ2FjaGVbcHJvcF07XG5cdCAgfVxuXHQgIHZhciByZXMgPSBwcmVmaXgocHJvcCk7XG5cdCAgcHJvcENhY2hlW3Byb3BdID0gcHJvcENhY2hlW3Jlc10gPSByZXM7XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEF1dG8gZGV0ZWN0IHRoZSBhcHByb3ByaWF0ZSBwcmVmaXggZm9yIGEgQ1NTIHByb3BlcnR5LlxuXHQgKiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9wYXVsaXJpc2gvNTIzNjkyXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcmVmaXgocHJvcCkge1xuXHQgIHByb3AgPSBoeXBoZW5hdGUocHJvcCk7XG5cdCAgdmFyIGNhbWVsID0gY2FtZWxpemUocHJvcCk7XG5cdCAgdmFyIHVwcGVyID0gY2FtZWwuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbC5zbGljZSgxKTtcblx0ICBpZiAoIXRlc3RFbCkge1xuXHQgICAgdGVzdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgfVxuXHQgIHZhciBpID0gcHJlZml4ZXMubGVuZ3RoO1xuXHQgIHZhciBwcmVmaXhlZDtcblx0ICBpZiAoY2FtZWwgIT09ICdmaWx0ZXInICYmIGNhbWVsIGluIHRlc3RFbC5zdHlsZSkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAga2ViYWI6IHByb3AsXG5cdCAgICAgIGNhbWVsOiBjYW1lbFxuXHQgICAgfTtcblx0ICB9XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgcHJlZml4ZWQgPSBjYW1lbFByZWZpeGVzW2ldICsgdXBwZXI7XG5cdCAgICBpZiAocHJlZml4ZWQgaW4gdGVzdEVsLnN0eWxlKSB7XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAga2ViYWI6IHByZWZpeGVzW2ldICsgcHJvcCxcblx0ICAgICAgICBjYW1lbDogcHJlZml4ZWRcblx0ICAgICAgfTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8vIHhsaW5rXG5cdHZhciB4bGlua05TID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnO1xuXHR2YXIgeGxpbmtSRSA9IC9eeGxpbms6Lztcblx0XG5cdC8vIGNoZWNrIGZvciBhdHRyaWJ1dGVzIHRoYXQgcHJvaGliaXQgaW50ZXJwb2xhdGlvbnNcblx0dmFyIGRpc2FsbG93ZWRJbnRlcnBBdHRyUkUgPSAvXnYtfF46fF5AfF4oPzppc3x0cmFuc2l0aW9ufHRyYW5zaXRpb24tbW9kZXxkZWJvdW5jZXx0cmFjay1ieXxzdGFnZ2VyfGVudGVyLXN0YWdnZXJ8bGVhdmUtc3RhZ2dlcikkLztcblx0Ly8gdGhlc2UgYXR0cmlidXRlcyBzaG91bGQgYWxzbyBzZXQgdGhlaXIgY29ycmVzcG9uZGluZyBwcm9wZXJ0aWVzXG5cdC8vIGJlY2F1c2UgdGhleSBvbmx5IGFmZmVjdCB0aGUgaW5pdGlhbCBzdGF0ZSBvZiB0aGUgZWxlbWVudFxuXHR2YXIgYXR0cldpdGhQcm9wc1JFID0gL14oPzp2YWx1ZXxjaGVja2VkfHNlbGVjdGVkfG11dGVkKSQvO1xuXHQvLyB0aGVzZSBhdHRyaWJ1dGVzIGV4cGVjdCBlbnVtcmF0ZWQgdmFsdWVzIG9mIFwidHJ1ZVwiIG9yIFwiZmFsc2VcIlxuXHQvLyBidXQgYXJlIG5vdCBib29sZWFuIGF0dHJpYnV0ZXNcblx0dmFyIGVudW1lcmF0ZWRBdHRyUkUgPSAvXig/OmRyYWdnYWJsZXxjb250ZW50ZWRpdGFibGV8c3BlbGxjaGVjaykkLztcblx0XG5cdC8vIHRoZXNlIGF0dHJpYnV0ZXMgc2hvdWxkIHNldCBhIGhpZGRlbiBwcm9wZXJ0eSBmb3Jcblx0Ly8gYmluZGluZyB2LW1vZGVsIHRvIG9iamVjdCB2YWx1ZXNcblx0dmFyIG1vZGVsUHJvcHMgPSB7XG5cdCAgdmFsdWU6ICdfdmFsdWUnLFxuXHQgICd0cnVlLXZhbHVlJzogJ190cnVlVmFsdWUnLFxuXHQgICdmYWxzZS12YWx1ZSc6ICdfZmFsc2VWYWx1ZSdcblx0fTtcblx0XG5cdHZhciBiaW5kJDEgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBCSU5ELFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIGF0dHIgPSB0aGlzLmFyZztcblx0ICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWU7XG5cdCAgICAvLyBzaG91bGQgYmUgZGVlcCB3YXRjaCBvbiBvYmplY3QgbW9kZVxuXHQgICAgaWYgKCFhdHRyKSB7XG5cdCAgICAgIHRoaXMuZGVlcCA9IHRydWU7XG5cdCAgICB9XG5cdCAgICAvLyBoYW5kbGUgaW50ZXJwb2xhdGlvbiBiaW5kaW5nc1xuXHQgICAgdmFyIGRlc2NyaXB0b3IgPSB0aGlzLmRlc2NyaXB0b3I7XG5cdCAgICB2YXIgdG9rZW5zID0gZGVzY3JpcHRvci5pbnRlcnA7XG5cdCAgICBpZiAodG9rZW5zKSB7XG5cdCAgICAgIC8vIGhhbmRsZSBpbnRlcnBvbGF0aW9ucyB3aXRoIG9uZS10aW1lIHRva2Vuc1xuXHQgICAgICBpZiAoZGVzY3JpcHRvci5oYXNPbmVUaW1lKSB7XG5cdCAgICAgICAgdGhpcy5leHByZXNzaW9uID0gdG9rZW5zVG9FeHAodG9rZW5zLCB0aGlzLl9zY29wZSB8fCB0aGlzLnZtKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gb25seSBhbGxvdyBiaW5kaW5nIG9uIG5hdGl2ZSBhdHRyaWJ1dGVzXG5cdCAgICAgIGlmIChkaXNhbGxvd2VkSW50ZXJwQXR0clJFLnRlc3QoYXR0cikgfHwgYXR0ciA9PT0gJ25hbWUnICYmICh0YWcgPT09ICdQQVJUSUFMJyB8fCB0YWcgPT09ICdTTE9UJykpIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oYXR0ciArICc9XCInICsgZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyAnYXR0cmlidXRlIGludGVycG9sYXRpb24gaXMgbm90IGFsbG93ZWQgaW4gVnVlLmpzICcgKyAnZGlyZWN0aXZlcyBhbmQgc3BlY2lhbCBhdHRyaWJ1dGVzLicsIHRoaXMudm0pO1xuXHQgICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuXHQgICAgICAgIHRoaXMuaW52YWxpZCA9IHRydWU7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHZhciByYXcgPSBhdHRyICsgJz1cIicgKyBkZXNjcmlwdG9yLnJhdyArICdcIjogJztcblx0ICAgICAgICAvLyB3YXJuIHNyY1xuXHQgICAgICAgIGlmIChhdHRyID09PSAnc3JjJykge1xuXHQgICAgICAgICAgd2FybihyYXcgKyAnaW50ZXJwb2xhdGlvbiBpbiBcInNyY1wiIGF0dHJpYnV0ZSB3aWxsIGNhdXNlICcgKyAnYSA0MDQgcmVxdWVzdC4gVXNlIHYtYmluZDpzcmMgaW5zdGVhZC4nLCB0aGlzLnZtKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIHdhcm4gc3R5bGVcblx0ICAgICAgICBpZiAoYXR0ciA9PT0gJ3N0eWxlJykge1xuXHQgICAgICAgICAgd2FybihyYXcgKyAnaW50ZXJwb2xhdGlvbiBpbiBcInN0eWxlXCIgYXR0cmlidXRlIHdpbGwgY2F1c2UgJyArICd0aGUgYXR0cmlidXRlIHRvIGJlIGRpc2NhcmRlZCBpbiBJbnRlcm5ldCBFeHBsb3Jlci4gJyArICdVc2Ugdi1iaW5kOnN0eWxlIGluc3RlYWQuJywgdGhpcy52bSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIGlmICh0aGlzLmludmFsaWQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIGF0dHIgPSB0aGlzLmFyZztcblx0ICAgIGlmICh0aGlzLmFyZykge1xuXHQgICAgICB0aGlzLmhhbmRsZVNpbmdsZShhdHRyLCB2YWx1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZSB8fCB7fSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLy8gc2hhcmUgb2JqZWN0IGhhbmRsZXIgd2l0aCB2LWJpbmQ6Y2xhc3Ncblx0ICBoYW5kbGVPYmplY3Q6IHN0eWxlLmhhbmRsZU9iamVjdCxcblx0XG5cdCAgaGFuZGxlU2luZ2xlOiBmdW5jdGlvbiBoYW5kbGVTaW5nbGUoYXR0ciwgdmFsdWUpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICB2YXIgaW50ZXJwID0gdGhpcy5kZXNjcmlwdG9yLmludGVycDtcblx0ICAgIGlmICh0aGlzLm1vZGlmaWVycy5jYW1lbCkge1xuXHQgICAgICBhdHRyID0gY2FtZWxpemUoYXR0cik7XG5cdCAgICB9XG5cdCAgICBpZiAoIWludGVycCAmJiBhdHRyV2l0aFByb3BzUkUudGVzdChhdHRyKSAmJiBhdHRyIGluIGVsKSB7XG5cdCAgICAgIHZhciBhdHRyVmFsdWUgPSBhdHRyID09PSAndmFsdWUnID8gdmFsdWUgPT0gbnVsbCAvLyBJRTkgd2lsbCBzZXQgaW5wdXQudmFsdWUgdG8gXCJudWxsXCIgZm9yIG51bGwuLi5cblx0ICAgICAgPyAnJyA6IHZhbHVlIDogdmFsdWU7XG5cdFxuXHQgICAgICBpZiAoZWxbYXR0cl0gIT09IGF0dHJWYWx1ZSkge1xuXHQgICAgICAgIGVsW2F0dHJdID0gYXR0clZhbHVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBzZXQgbW9kZWwgcHJvcHNcblx0ICAgIHZhciBtb2RlbFByb3AgPSBtb2RlbFByb3BzW2F0dHJdO1xuXHQgICAgaWYgKCFpbnRlcnAgJiYgbW9kZWxQcm9wKSB7XG5cdCAgICAgIGVsW21vZGVsUHJvcF0gPSB2YWx1ZTtcblx0ICAgICAgLy8gdXBkYXRlIHYtbW9kZWwgaWYgcHJlc2VudFxuXHQgICAgICB2YXIgbW9kZWwgPSBlbC5fX3ZfbW9kZWw7XG5cdCAgICAgIGlmIChtb2RlbCkge1xuXHQgICAgICAgIG1vZGVsLmxpc3RlbmVyKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIGRvIG5vdCBzZXQgdmFsdWUgYXR0cmlidXRlIGZvciB0ZXh0YXJlYVxuXHQgICAgaWYgKGF0dHIgPT09ICd2YWx1ZScgJiYgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuXHQgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIC8vIHVwZGF0ZSBhdHRyaWJ1dGVcblx0ICAgIGlmIChlbnVtZXJhdGVkQXR0clJFLnRlc3QoYXR0cikpIHtcblx0ICAgICAgZWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlID8gJ3RydWUnIDogJ2ZhbHNlJyk7XG5cdCAgICB9IGVsc2UgaWYgKHZhbHVlICE9IG51bGwgJiYgdmFsdWUgIT09IGZhbHNlKSB7XG5cdCAgICAgIGlmIChhdHRyID09PSAnY2xhc3MnKSB7XG5cdCAgICAgICAgLy8gaGFuZGxlIGVkZ2UgY2FzZSAjMTk2MDpcblx0ICAgICAgICAvLyBjbGFzcyBpbnRlcnBvbGF0aW9uIHNob3VsZCBub3Qgb3ZlcndyaXRlIFZ1ZSB0cmFuc2l0aW9uIGNsYXNzXG5cdCAgICAgICAgaWYgKGVsLl9fdl90cmFucykge1xuXHQgICAgICAgICAgdmFsdWUgKz0gJyAnICsgZWwuX192X3RyYW5zLmlkICsgJy10cmFuc2l0aW9uJztcblx0ICAgICAgICB9XG5cdCAgICAgICAgc2V0Q2xhc3MoZWwsIHZhbHVlKTtcblx0ICAgICAgfSBlbHNlIGlmICh4bGlua1JFLnRlc3QoYXR0cikpIHtcblx0ICAgICAgICBlbC5zZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBhdHRyLCB2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogdmFsdWUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogdmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGVsID0ge1xuXHRcblx0ICBwcmlvcml0eTogRUwsXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghdGhpcy5hcmcpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIGlkID0gdGhpcy5pZCA9IGNhbWVsaXplKHRoaXMuYXJnKTtcblx0ICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRlbHM7XG5cdCAgICBpZiAoaGFzT3duKHJlZnMsIGlkKSkge1xuXHQgICAgICByZWZzW2lkXSA9IHRoaXMuZWw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBkZWZpbmVSZWFjdGl2ZShyZWZzLCBpZCwgdGhpcy5lbCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kZWxzO1xuXHQgICAgaWYgKHJlZnNbdGhpcy5pZF0gPT09IHRoaXMuZWwpIHtcblx0ICAgICAgcmVmc1t0aGlzLmlkXSA9IG51bGw7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHJlZiA9IHtcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LXJlZjonICsgdGhpcy5hcmcgKyAnIG11c3QgYmUgdXNlZCBvbiBhIGNoaWxkICcgKyAnY29tcG9uZW50LiBGb3VuZCBvbiA8JyArIHRoaXMuZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICsgJz4uJywgdGhpcy52bSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGNsb2FrID0ge1xuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgdGhpcy52bS4kb25jZSgncHJlLWhvb2s6Y29tcGlsZWQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgndi1jbG9haycpO1xuXHQgICAgfSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8gbXVzdCBleHBvcnQgcGxhaW4gb2JqZWN0XG5cdHZhciBkaXJlY3RpdmVzID0ge1xuXHQgIHRleHQ6IHRleHQkMSxcblx0ICBodG1sOiBodG1sLFxuXHQgICdmb3InOiB2Rm9yLFxuXHQgICdpZic6IHZJZixcblx0ICBzaG93OiBzaG93LFxuXHQgIG1vZGVsOiBtb2RlbCxcblx0ICBvbjogb24kMSxcblx0ICBiaW5kOiBiaW5kJDEsXG5cdCAgZWw6IGVsLFxuXHQgIHJlZjogcmVmLFxuXHQgIGNsb2FrOiBjbG9ha1xuXHR9O1xuXHRcblx0dmFyIHZDbGFzcyA9IHtcblx0XG5cdCAgZGVlcDogdHJ1ZSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIGlmICghdmFsdWUpIHtcblx0ICAgICAgdGhpcy5jbGVhbnVwKCk7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgdGhpcy5zZXRDbGFzcyh2YWx1ZS50cmltKCkuc3BsaXQoL1xccysvKSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLnNldENsYXNzKG5vcm1hbGl6ZSQxKHZhbHVlKSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgc2V0Q2xhc3M6IGZ1bmN0aW9uIHNldENsYXNzKHZhbHVlKSB7XG5cdCAgICB0aGlzLmNsZWFudXAodmFsdWUpO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIHZhbCA9IHZhbHVlW2ldO1xuXHQgICAgICBpZiAodmFsKSB7XG5cdCAgICAgICAgYXBwbHkodGhpcy5lbCwgdmFsLCBhZGRDbGFzcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHRoaXMucHJldktleXMgPSB2YWx1ZTtcblx0ICB9LFxuXHRcblx0ICBjbGVhbnVwOiBmdW5jdGlvbiBjbGVhbnVwKHZhbHVlKSB7XG5cdCAgICB2YXIgcHJldktleXMgPSB0aGlzLnByZXZLZXlzO1xuXHQgICAgaWYgKCFwcmV2S2V5cykgcmV0dXJuO1xuXHQgICAgdmFyIGkgPSBwcmV2S2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhciBrZXkgPSBwcmV2S2V5c1tpXTtcblx0ICAgICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZS5pbmRleE9mKGtleSkgPCAwKSB7XG5cdCAgICAgICAgYXBwbHkodGhpcy5lbCwga2V5LCByZW1vdmVDbGFzcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogTm9ybWFsaXplIG9iamVjdHMgYW5kIGFycmF5cyAocG90ZW50aWFsbHkgY29udGFpbmluZyBvYmplY3RzKVxuXHQgKiBpbnRvIGFycmF5IG9mIHN0cmluZ3MuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fEFycmF5PFN0cmluZ3xPYmplY3Q+fSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHtBcnJheTxTdHJpbmc+fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZSQxKHZhbHVlKSB7XG5cdCAgdmFyIHJlcyA9IFtdO1xuXHQgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIF9rZXkgPSB2YWx1ZVtpXTtcblx0ICAgICAgaWYgKF9rZXkpIHtcblx0ICAgICAgICBpZiAodHlwZW9mIF9rZXkgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICByZXMucHVzaChfa2V5KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgZm9yICh2YXIgayBpbiBfa2V5KSB7XG5cdCAgICAgICAgICAgIGlmIChfa2V5W2tdKSByZXMucHVzaChrKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuXHQgICAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG5cdCAgICAgIGlmICh2YWx1ZVtrZXldKSByZXMucHVzaChrZXkpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQWRkIG9yIHJlbW92ZSBhIGNsYXNzL2NsYXNzZXMgb24gYW4gZWxlbWVudFxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgVGhlIGNsYXNzIG5hbWUuIFRoaXMgbWF5IG9yIG1heSBub3Rcblx0ICogICAgICAgICAgICAgICAgICAgICBjb250YWluIGEgc3BhY2UgY2hhcmFjdGVyLCBpbiBzdWNoIGFcblx0ICogICAgICAgICAgICAgICAgICAgICBjYXNlIHdlJ2xsIGRlYWwgd2l0aCBtdWx0aXBsZSBjbGFzc1xuXHQgKiAgICAgICAgICAgICAgICAgICAgIG5hbWVzIGF0IG9uY2UuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXBwbHkoZWwsIGtleSwgZm4pIHtcblx0ICBrZXkgPSBrZXkudHJpbSgpO1xuXHQgIGlmIChrZXkuaW5kZXhPZignICcpID09PSAtMSkge1xuXHQgICAgZm4oZWwsIGtleSk7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIC8vIFRoZSBrZXkgY29udGFpbnMgb25lIG9yIG1vcmUgc3BhY2UgY2hhcmFjdGVycy5cblx0ICAvLyBTaW5jZSBhIGNsYXNzIG5hbWUgZG9lc24ndCBhY2NlcHQgc3VjaCBjaGFyYWN0ZXJzLCB3ZVxuXHQgIC8vIHRyZWF0IGl0IGFzIG11bHRpcGxlIGNsYXNzZXMuXG5cdCAgdmFyIGtleXMgPSBrZXkuc3BsaXQoL1xccysvKTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBmbihlbCwga2V5c1tpXSk7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgY29tcG9uZW50ID0ge1xuXHRcblx0ICBwcmlvcml0eTogQ09NUE9ORU5ULFxuXHRcblx0ICBwYXJhbXM6IFsna2VlcC1hbGl2ZScsICd0cmFuc2l0aW9uLW1vZGUnLCAnaW5saW5lLXRlbXBsYXRlJ10sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHVwLiBUd28gcG9zc2libGUgdXNhZ2VzOlxuXHQgICAqXG5cdCAgICogLSBzdGF0aWM6XG5cdCAgICogICA8Y29tcD4gb3IgPGRpdiB2LWNvbXBvbmVudD1cImNvbXBcIj5cblx0ICAgKlxuXHQgICAqIC0gZHluYW1pYzpcblx0ICAgKiAgIDxjb21wb25lbnQgOmlzPVwidmlld1wiPlxuXHQgICAqL1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgaWYgKCF0aGlzLmVsLl9fdnVlX18pIHtcblx0ICAgICAgLy8ga2VlcC1hbGl2ZSBjYWNoZVxuXHQgICAgICB0aGlzLmtlZXBBbGl2ZSA9IHRoaXMucGFyYW1zLmtlZXBBbGl2ZTtcblx0ICAgICAgaWYgKHRoaXMua2VlcEFsaXZlKSB7XG5cdCAgICAgICAgdGhpcy5jYWNoZSA9IHt9O1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGNoZWNrIGlubGluZS10ZW1wbGF0ZVxuXHQgICAgICBpZiAodGhpcy5wYXJhbXMuaW5saW5lVGVtcGxhdGUpIHtcblx0ICAgICAgICAvLyBleHRyYWN0IGlubGluZSB0ZW1wbGF0ZSBhcyBhIERvY3VtZW50RnJhZ21lbnRcblx0ICAgICAgICB0aGlzLmlubGluZVRlbXBsYXRlID0gZXh0cmFjdENvbnRlbnQodGhpcy5lbCwgdHJ1ZSk7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gY29tcG9uZW50IHJlc29sdXRpb24gcmVsYXRlZCBzdGF0ZVxuXHQgICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IHRoaXMuQ29tcG9uZW50ID0gbnVsbDtcblx0ICAgICAgLy8gdHJhbnNpdGlvbiByZWxhdGVkIHN0YXRlXG5cdCAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxzID0gMDtcblx0ICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbENiID0gbnVsbDtcblx0ICAgICAgLy8gY3JlYXRlIGEgcmVmIGFuY2hvclxuXHQgICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1jb21wb25lbnQnKTtcblx0ICAgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG5cdCAgICAgIC8vIHJlbW92ZSBpcyBhdHRyaWJ1dGUuXG5cdCAgICAgIC8vIHRoaXMgaXMgcmVtb3ZlZCBkdXJpbmcgY29tcGlsYXRpb24sIGJ1dCBiZWNhdXNlIGNvbXBpbGF0aW9uIGlzXG5cdCAgICAgIC8vIGNhY2hlZCwgd2hlbiB0aGUgY29tcG9uZW50IGlzIHVzZWQgZWxzZXdoZXJlIHRoaXMgYXR0cmlidXRlXG5cdCAgICAgIC8vIHdpbGwgcmVtYWluIGF0IGxpbmsgdGltZS5cblx0ICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ2lzJyk7XG5cdCAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCc6aXMnKTtcblx0ICAgICAgLy8gcmVtb3ZlIHJlZiwgc2FtZSBhcyBhYm92ZVxuXHQgICAgICBpZiAodGhpcy5kZXNjcmlwdG9yLnJlZikge1xuXHQgICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCd2LXJlZjonICsgaHlwaGVuYXRlKHRoaXMuZGVzY3JpcHRvci5yZWYpKTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBpZiBzdGF0aWMsIGJ1aWxkIHJpZ2h0IG5vdy5cblx0ICAgICAgaWYgKHRoaXMubGl0ZXJhbCkge1xuXHQgICAgICAgIHRoaXMuc2V0Q29tcG9uZW50KHRoaXMuZXhwcmVzc2lvbik7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignY2Fubm90IG1vdW50IGNvbXBvbmVudCBcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgJyArICdvbiBhbHJlYWR5IG1vdW50ZWQgZWxlbWVudDogJyArIHRoaXMuZWwpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFB1YmxpYyB1cGRhdGUsIGNhbGxlZCBieSB0aGUgd2F0Y2hlciBpbiB0aGUgZHluYW1pY1xuXHQgICAqIGxpdGVyYWwgc2NlbmFyaW8sIGUuZy4gPGNvbXBvbmVudCA6aXM9XCJ2aWV3XCI+XG5cdCAgICovXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICBpZiAoIXRoaXMubGl0ZXJhbCkge1xuXHQgICAgICB0aGlzLnNldENvbXBvbmVudCh2YWx1ZSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogU3dpdGNoIGR5bmFtaWMgY29tcG9uZW50cy4gTWF5IHJlc29sdmUgdGhlIGNvbXBvbmVudFxuXHQgICAqIGFzeW5jaHJvbm91c2x5LCBhbmQgcGVyZm9ybSB0cmFuc2l0aW9uIGJhc2VkIG9uXG5cdCAgICogc3BlY2lmaWVkIHRyYW5zaXRpb24gbW9kZS4gQWNjZXB0cyBhIGZldyBhZGRpdGlvbmFsXG5cdCAgICogYXJndW1lbnRzIHNwZWNpZmljYWxseSBmb3IgdnVlLXJvdXRlci5cblx0ICAgKlxuXHQgICAqIFRoZSBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiB0aGUgZnVsbCB0cmFuc2l0aW9uIGlzXG5cdCAgICogZmluaXNoZWQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIHNldENvbXBvbmVudDogZnVuY3Rpb24gc2V0Q29tcG9uZW50KHZhbHVlLCBjYikge1xuXHQgICAgdGhpcy5pbnZhbGlkYXRlUGVuZGluZygpO1xuXHQgICAgaWYgKCF2YWx1ZSkge1xuXHQgICAgICAvLyBqdXN0IHJlbW92ZSBjdXJyZW50XG5cdCAgICAgIHRoaXMudW5idWlsZCh0cnVlKTtcblx0ICAgICAgdGhpcy5yZW1vdmUodGhpcy5jaGlsZFZNLCBjYik7XG5cdCAgICAgIHRoaXMuY2hpbGRWTSA9IG51bGw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIHRoaXMucmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHNlbGYubW91bnRDb21wb25lbnQoY2IpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBSZXNvbHZlIHRoZSBjb21wb25lbnQgY29uc3RydWN0b3IgdG8gdXNlIHdoZW4gY3JlYXRpbmdcblx0ICAgKiB0aGUgY2hpbGQgdm0uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAqL1xuXHRcblx0ICByZXNvbHZlQ29tcG9uZW50OiBmdW5jdGlvbiByZXNvbHZlQ29tcG9uZW50KHZhbHVlLCBjYikge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSBjYW5jZWxsYWJsZShmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG5cdCAgICAgIHNlbGYuQ29tcG9uZW50TmFtZSA9IENvbXBvbmVudC5vcHRpb25zLm5hbWUgfHwgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyB2YWx1ZSA6IG51bGwpO1xuXHQgICAgICBzZWxmLkNvbXBvbmVudCA9IENvbXBvbmVudDtcblx0ICAgICAgY2IoKTtcblx0ICAgIH0pO1xuXHQgICAgdGhpcy52bS5fcmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSB1c2luZyB0aGUgY3VycmVudCBjb25zdHJ1Y3RvciBhbmRcblx0ICAgKiByZXBsYWNlIHRoZSBleGlzdGluZyBpbnN0YW5jZS4gVGhpcyBtZXRob2QgZG9lc24ndCBjYXJlXG5cdCAgICogd2hldGhlciB0aGUgbmV3IGNvbXBvbmVudCBhbmQgdGhlIG9sZCBvbmUgYXJlIGFjdHVhbGx5XG5cdCAgICogdGhlIHNhbWUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIG1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiBtb3VudENvbXBvbmVudChjYikge1xuXHQgICAgLy8gYWN0dWFsIG1vdW50XG5cdCAgICB0aGlzLnVuYnVpbGQodHJ1ZSk7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgYWN0aXZhdGVIb29rcyA9IHRoaXMuQ29tcG9uZW50Lm9wdGlvbnMuYWN0aXZhdGU7XG5cdCAgICB2YXIgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWQoKTtcblx0ICAgIHZhciBuZXdDb21wb25lbnQgPSB0aGlzLmJ1aWxkKCk7XG5cdCAgICBpZiAoYWN0aXZhdGVIb29rcyAmJiAhY2FjaGVkKSB7XG5cdCAgICAgIHRoaXMud2FpdGluZ0ZvciA9IG5ld0NvbXBvbmVudDtcblx0ICAgICAgY2FsbEFjdGl2YXRlSG9va3MoYWN0aXZhdGVIb29rcywgbmV3Q29tcG9uZW50LCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHNlbGYud2FpdGluZ0ZvciAhPT0gbmV3Q29tcG9uZW50KSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHNlbGYud2FpdGluZ0ZvciA9IG51bGw7XG5cdCAgICAgICAgc2VsZi50cmFuc2l0aW9uKG5ld0NvbXBvbmVudCwgY2IpO1xuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIHVwZGF0ZSByZWYgZm9yIGtlcHQtYWxpdmUgY29tcG9uZW50XG5cdCAgICAgIGlmIChjYWNoZWQpIHtcblx0ICAgICAgICBuZXdDb21wb25lbnQuX3VwZGF0ZVJlZigpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMudHJhbnNpdGlvbihuZXdDb21wb25lbnQsIGNiKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBXaGVuIHRoZSBjb21wb25lbnQgY2hhbmdlcyBvciB1bmJpbmRzIGJlZm9yZSBhbiBhc3luY1xuXHQgICAqIGNvbnN0cnVjdG9yIGlzIHJlc29sdmVkLCB3ZSBuZWVkIHRvIGludmFsaWRhdGUgaXRzXG5cdCAgICogcGVuZGluZyBjYWxsYmFjay5cblx0ICAgKi9cblx0XG5cdCAgaW52YWxpZGF0ZVBlbmRpbmc6IGZ1bmN0aW9uIGludmFsaWRhdGVQZW5kaW5nKCkge1xuXHQgICAgaWYgKHRoaXMucGVuZGluZ0NvbXBvbmVudENiKSB7XG5cdCAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiLmNhbmNlbCgpO1xuXHQgICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IG51bGw7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogSW5zdGFudGlhdGUvaW5zZXJ0IGEgbmV3IGNoaWxkIHZtLlxuXHQgICAqIElmIGtlZXAgYWxpdmUgYW5kIGhhcyBjYWNoZWQgaW5zdGFuY2UsIGluc2VydCB0aGF0XG5cdCAgICogaW5zdGFuY2U7IG90aGVyd2lzZSBidWlsZCBhIG5ldyBvbmUgYW5kIGNhY2hlIGl0LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtleHRyYU9wdGlvbnNdXG5cdCAgICogQHJldHVybiB7VnVlfSAtIHRoZSBjcmVhdGVkIGluc3RhbmNlXG5cdCAgICovXG5cdFxuXHQgIGJ1aWxkOiBmdW5jdGlvbiBidWlsZChleHRyYU9wdGlvbnMpIHtcblx0ICAgIHZhciBjYWNoZWQgPSB0aGlzLmdldENhY2hlZCgpO1xuXHQgICAgaWYgKGNhY2hlZCkge1xuXHQgICAgICByZXR1cm4gY2FjaGVkO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuQ29tcG9uZW50KSB7XG5cdCAgICAgIC8vIGRlZmF1bHQgb3B0aW9uc1xuXHQgICAgICB2YXIgb3B0aW9ucyA9IHtcblx0ICAgICAgICBuYW1lOiB0aGlzLkNvbXBvbmVudE5hbWUsXG5cdCAgICAgICAgZWw6IGNsb25lTm9kZSh0aGlzLmVsKSxcblx0ICAgICAgICB0ZW1wbGF0ZTogdGhpcy5pbmxpbmVUZW1wbGF0ZSxcblx0ICAgICAgICAvLyBtYWtlIHN1cmUgdG8gYWRkIHRoZSBjaGlsZCB3aXRoIGNvcnJlY3QgcGFyZW50XG5cdCAgICAgICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgaXRzIHBhcmVudFxuXHQgICAgICAgIC8vIHNob3VsZCBiZSB0aGUgdHJhbnNjbHVzaW9uIGhvc3QuXG5cdCAgICAgICAgcGFyZW50OiB0aGlzLl9ob3N0IHx8IHRoaXMudm0sXG5cdCAgICAgICAgLy8gaWYgbm8gaW5saW5lLXRlbXBsYXRlLCB0aGVuIHRoZSBjb21waWxlZFxuXHQgICAgICAgIC8vIGxpbmtlciBjYW4gYmUgY2FjaGVkIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuXG5cdCAgICAgICAgX2xpbmtlckNhY2hhYmxlOiAhdGhpcy5pbmxpbmVUZW1wbGF0ZSxcblx0ICAgICAgICBfcmVmOiB0aGlzLmRlc2NyaXB0b3IucmVmLFxuXHQgICAgICAgIF9hc0NvbXBvbmVudDogdHJ1ZSxcblx0ICAgICAgICBfaXNSb3V0ZXJWaWV3OiB0aGlzLl9pc1JvdXRlclZpZXcsXG5cdCAgICAgICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgY29udGV4dFxuXHQgICAgICAgIC8vIHdpbGwgYmUgdGhlIGNvbW1vbiBwYXJlbnQgdm0gb2YgdGhpcyBpbnN0YW5jZVxuXHQgICAgICAgIC8vIGFuZCBpdHMgaG9zdC5cblx0ICAgICAgICBfY29udGV4dDogdGhpcy52bSxcblx0ICAgICAgICAvLyBpZiB0aGlzIGlzIGluc2lkZSBhbiBpbmxpbmUgdi1mb3IsIHRoZSBzY29wZVxuXHQgICAgICAgIC8vIHdpbGwgYmUgdGhlIGludGVybWVkaWF0ZSBzY29wZSBjcmVhdGVkIGZvciB0aGlzXG5cdCAgICAgICAgLy8gcmVwZWF0IGZyYWdtZW50LiB0aGlzIGlzIHVzZWQgZm9yIGxpbmtpbmcgcHJvcHNcblx0ICAgICAgICAvLyBhbmQgY29udGFpbmVyIGRpcmVjdGl2ZXMuXG5cdCAgICAgICAgX3Njb3BlOiB0aGlzLl9zY29wZSxcblx0ICAgICAgICAvLyBwYXNzIGluIHRoZSBvd25lciBmcmFnbWVudCBvZiB0aGlzIGNvbXBvbmVudC5cblx0ICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBzbyB0aGF0IHRoZSBmcmFnbWVudCBjYW4ga2VlcFxuXHQgICAgICAgIC8vIHRyYWNrIG9mIGl0cyBjb250YWluZWQgY29tcG9uZW50cyBpbiBvcmRlciB0b1xuXHQgICAgICAgIC8vIGNhbGwgYXR0YWNoL2RldGFjaCBob29rcyBmb3IgdGhlbS5cblx0ICAgICAgICBfZnJhZzogdGhpcy5fZnJhZ1xuXHQgICAgICB9O1xuXHQgICAgICAvLyBleHRyYSBvcHRpb25zXG5cdCAgICAgIC8vIGluIDEuMC4wIHRoaXMgaXMgdXNlZCBieSB2dWUtcm91dGVyIG9ubHlcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChleHRyYU9wdGlvbnMpIHtcblx0ICAgICAgICBleHRlbmQob3B0aW9ucywgZXh0cmFPcHRpb25zKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5Db21wb25lbnQob3B0aW9ucyk7XG5cdCAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xuXHQgICAgICAgIHRoaXMuY2FjaGVbdGhpcy5Db21wb25lbnQuY2lkXSA9IGNoaWxkO1xuXHQgICAgICB9XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsLmhhc0F0dHJpYnV0ZSgndHJhbnNpdGlvbicpICYmIGNoaWxkLl9pc0ZyYWdtZW50KSB7XG5cdCAgICAgICAgd2FybignVHJhbnNpdGlvbnMgd2lsbCBub3Qgd29yayBvbiBhIGZyYWdtZW50IGluc3RhbmNlLiAnICsgJ1RlbXBsYXRlOiAnICsgY2hpbGQuJG9wdGlvbnMudGVtcGxhdGUsIGNoaWxkKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gY2hpbGQ7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogVHJ5IHRvIGdldCBhIGNhY2hlZCBpbnN0YW5jZSBvZiB0aGUgY3VycmVudCBjb21wb25lbnQuXG5cdCAgICpcblx0ICAgKiBAcmV0dXJuIHtWdWV8dW5kZWZpbmVkfVxuXHQgICAqL1xuXHRcblx0ICBnZXRDYWNoZWQ6IGZ1bmN0aW9uIGdldENhY2hlZCgpIHtcblx0ICAgIHJldHVybiB0aGlzLmtlZXBBbGl2ZSAmJiB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF07XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogVGVhcmRvd24gdGhlIGN1cnJlbnQgY2hpbGQsIGJ1dCBkZWZlcnMgY2xlYW51cCBzb1xuXHQgICAqIHRoYXQgd2UgY2FuIHNlcGFyYXRlIHRoZSBkZXN0cm95IGFuZCByZW1vdmFsIHN0ZXBzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBkZWZlclxuXHQgICAqL1xuXHRcblx0ICB1bmJ1aWxkOiBmdW5jdGlvbiB1bmJ1aWxkKGRlZmVyKSB7XG5cdCAgICBpZiAodGhpcy53YWl0aW5nRm9yKSB7XG5cdCAgICAgIGlmICghdGhpcy5rZWVwQWxpdmUpIHtcblx0ICAgICAgICB0aGlzLndhaXRpbmdGb3IuJGRlc3Ryb3koKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLndhaXRpbmdGb3IgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgdmFyIGNoaWxkID0gdGhpcy5jaGlsZFZNO1xuXHQgICAgaWYgKCFjaGlsZCB8fCB0aGlzLmtlZXBBbGl2ZSkge1xuXHQgICAgICBpZiAoY2hpbGQpIHtcblx0ICAgICAgICAvLyByZW1vdmUgcmVmXG5cdCAgICAgICAgY2hpbGQuX2luYWN0aXZlID0gdHJ1ZTtcblx0ICAgICAgICBjaGlsZC5fdXBkYXRlUmVmKHRydWUpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIC8vIHRoZSBzb2xlIHB1cnBvc2Ugb2YgYGRlZmVyQ2xlYW51cGAgaXMgc28gdGhhdCB3ZSBjYW5cblx0ICAgIC8vIFwiZGVhY3RpdmF0ZVwiIHRoZSB2bSByaWdodCBub3cgYW5kIHBlcmZvcm0gRE9NIHJlbW92YWxcblx0ICAgIC8vIGxhdGVyLlxuXHQgICAgY2hpbGQuJGRlc3Ryb3koZmFsc2UsIGRlZmVyKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBSZW1vdmUgY3VycmVudCBkZXN0cm95ZWQgY2hpbGQgYW5kIG1hbnVhbGx5IGRvXG5cdCAgICogdGhlIGNsZWFudXAgYWZ0ZXIgcmVtb3ZhbC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICovXG5cdFxuXHQgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGNoaWxkLCBjYikge1xuXHQgICAgdmFyIGtlZXBBbGl2ZSA9IHRoaXMua2VlcEFsaXZlO1xuXHQgICAgaWYgKGNoaWxkKSB7XG5cdCAgICAgIC8vIHdlIG1heSBoYXZlIGEgY29tcG9uZW50IHN3aXRjaCB3aGVuIGEgcHJldmlvdXNcblx0ICAgICAgLy8gY29tcG9uZW50IGlzIHN0aWxsIGJlaW5nIHRyYW5zaXRpb25lZCBvdXQuXG5cdCAgICAgIC8vIHdlIHdhbnQgdG8gdHJpZ2dlciBvbmx5IG9uZSBsYXN0ZXN0IGluc2VydGlvbiBjYlxuXHQgICAgICAvLyB3aGVuIHRoZSBleGlzdGluZyB0cmFuc2l0aW9uIGZpbmlzaGVzLiAoIzExMTkpXG5cdCAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxzKys7XG5cdCAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxDYiA9IGNiO1xuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIGNoaWxkLiRyZW1vdmUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxzLS07XG5cdCAgICAgICAgaWYgKCFrZWVwQWxpdmUpIGNoaWxkLl9jbGVhbnVwKCk7XG5cdCAgICAgICAgaWYgKCFzZWxmLnBlbmRpbmdSZW1vdmFscyAmJiBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IpIHtcblx0ICAgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxDYigpO1xuXHQgICAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbENiID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIGlmIChjYikge1xuXHQgICAgICBjYigpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEFjdHVhbGx5IHN3YXAgdGhlIGNvbXBvbmVudHMsIGRlcGVuZGluZyBvbiB0aGVcblx0ICAgKiB0cmFuc2l0aW9uIG1vZGUuIERlZmF1bHRzIHRvIHNpbXVsdGFuZW91cy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIHRyYW5zaXRpb246IGZ1bmN0aW9uIHRyYW5zaXRpb24odGFyZ2V0LCBjYikge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGN1cnJlbnQgPSB0aGlzLmNoaWxkVk07XG5cdCAgICAvLyBmb3IgZGV2dG9vbCBpbnNwZWN0aW9uXG5cdCAgICBpZiAoY3VycmVudCkgY3VycmVudC5faW5hY3RpdmUgPSB0cnVlO1xuXHQgICAgdGFyZ2V0Ll9pbmFjdGl2ZSA9IGZhbHNlO1xuXHQgICAgdGhpcy5jaGlsZFZNID0gdGFyZ2V0O1xuXHQgICAgc3dpdGNoIChzZWxmLnBhcmFtcy50cmFuc2l0aW9uTW9kZSkge1xuXHQgICAgICBjYXNlICdpbi1vdXQnOlxuXHQgICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50LCBjYik7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ291dC1pbic6XG5cdCAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGNiKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgZGVmYXVsdDpcblx0ICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50KTtcblx0ICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgY2IpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFVuYmluZC5cblx0ICAgKi9cblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB0aGlzLmludmFsaWRhdGVQZW5kaW5nKCk7XG5cdCAgICAvLyBEbyBub3QgZGVmZXIgY2xlYW51cCB3aGVuIHVuYmluZGluZ1xuXHQgICAgdGhpcy51bmJ1aWxkKCk7XG5cdCAgICAvLyBkZXN0cm95IGFsbCBrZWVwLWFsaXZlIGNhY2hlZCBpbnN0YW5jZXNcblx0ICAgIGlmICh0aGlzLmNhY2hlKSB7XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmNhY2hlKSB7XG5cdCAgICAgICAgdGhpcy5jYWNoZVtrZXldLiRkZXN0cm95KCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5jYWNoZSA9IG51bGw7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENhbGwgYWN0aXZhdGUgaG9va3MgaW4gb3JkZXIgKGFzeW5jaHJvbm91cylcblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gaG9va3Ncblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2FsbEFjdGl2YXRlSG9va3MoaG9va3MsIHZtLCBjYikge1xuXHQgIHZhciB0b3RhbCA9IGhvb2tzLmxlbmd0aDtcblx0ICB2YXIgY2FsbGVkID0gMDtcblx0ICBob29rc1swXS5jYWxsKHZtLCBuZXh0KTtcblx0ICBmdW5jdGlvbiBuZXh0KCkge1xuXHQgICAgaWYgKCsrY2FsbGVkID49IHRvdGFsKSB7XG5cdCAgICAgIGNiKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBob29rc1tjYWxsZWRdLmNhbGwodm0sIG5leHQpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIHByb3BCaW5kaW5nTW9kZXMgPSBjb25maWcuX3Byb3BCaW5kaW5nTW9kZXM7XG5cdHZhciBlbXB0eSA9IHt9O1xuXHRcblx0Ly8gcmVnZXhlc1xuXHR2YXIgaWRlbnRSRSQxID0gL15bJF9hLXpBLVpdK1tcXHckXSokLztcblx0dmFyIHNldHRhYmxlUGF0aFJFID0gL15bQS1aYS16XyRdW1xcdyRdKihcXC5bQS1aYS16XyRdW1xcdyRdKnxcXFtbXlxcW1xcXV0rXFxdKSokLztcblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIHByb3BzIG9uIGEgcm9vdCBlbGVtZW50IGFuZCByZXR1cm5cblx0ICogYSBwcm9wcyBsaW5rIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcblx0ICogQHBhcmFtIHtBcnJheX0gcHJvcE9wdGlvbnNcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSBwcm9wc0xpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVQcm9wcyhlbCwgcHJvcE9wdGlvbnMsIHZtKSB7XG5cdCAgdmFyIHByb3BzID0gW107XG5cdCAgdmFyIG5hbWVzID0gT2JqZWN0LmtleXMocHJvcE9wdGlvbnMpO1xuXHQgIHZhciBpID0gbmFtZXMubGVuZ3RoO1xuXHQgIHZhciBvcHRpb25zLCBuYW1lLCBhdHRyLCB2YWx1ZSwgcGF0aCwgcGFyc2VkLCBwcm9wO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIG5hbWUgPSBuYW1lc1tpXTtcblx0ICAgIG9wdGlvbnMgPSBwcm9wT3B0aW9uc1tuYW1lXSB8fCBlbXB0eTtcblx0XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBuYW1lID09PSAnJGRhdGEnKSB7XG5cdCAgICAgIHdhcm4oJ0RvIG5vdCB1c2UgJGRhdGEgYXMgcHJvcC4nLCB2bSk7XG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHByb3BzIGNvdWxkIGNvbnRhaW4gZGFzaGVzLCB3aGljaCB3aWxsIGJlXG5cdCAgICAvLyBpbnRlcnByZXRlZCBhcyBtaW51cyBjYWxjdWxhdGlvbnMgYnkgdGhlIHBhcnNlclxuXHQgICAgLy8gc28gd2UgbmVlZCB0byBjYW1lbGl6ZSB0aGUgcGF0aCBoZXJlXG5cdCAgICBwYXRoID0gY2FtZWxpemUobmFtZSk7XG5cdCAgICBpZiAoIWlkZW50UkUkMS50ZXN0KHBhdGgpKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBwcm9wIGtleTogXCInICsgbmFtZSArICdcIi4gUHJvcCBrZXlzICcgKyAnbXVzdCBiZSB2YWxpZCBpZGVudGlmaWVycy4nLCB2bSk7XG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIHByb3AgPSB7XG5cdCAgICAgIG5hbWU6IG5hbWUsXG5cdCAgICAgIHBhdGg6IHBhdGgsXG5cdCAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG5cdCAgICAgIG1vZGU6IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWSxcblx0ICAgICAgcmF3OiBudWxsXG5cdCAgICB9O1xuXHRcblx0ICAgIGF0dHIgPSBoeXBoZW5hdGUobmFtZSk7XG5cdCAgICAvLyBmaXJzdCBjaGVjayBkeW5hbWljIHZlcnNpb25cblx0ICAgIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0cikpID09PSBudWxsKSB7XG5cdCAgICAgIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0ciArICcuc3luYycpKSAhPT0gbnVsbCkge1xuXHQgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWTtcblx0ICAgICAgfSBlbHNlIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0ciArICcub25jZScpKSAhPT0gbnVsbCkge1xuXHQgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuT05FX1RJTUU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuXHQgICAgICAvLyBoYXMgZHluYW1pYyBiaW5kaW5nIVxuXHQgICAgICBwcm9wLnJhdyA9IHZhbHVlO1xuXHQgICAgICBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG5cdCAgICAgIHZhbHVlID0gcGFyc2VkLmV4cHJlc3Npb247XG5cdCAgICAgIHByb3AuZmlsdGVycyA9IHBhcnNlZC5maWx0ZXJzO1xuXHQgICAgICAvLyBjaGVjayBiaW5kaW5nIHR5cGVcblx0ICAgICAgaWYgKGlzTGl0ZXJhbCh2YWx1ZSkgJiYgIXBhcnNlZC5maWx0ZXJzKSB7XG5cdCAgICAgICAgLy8gZm9yIGV4cHJlc3Npb25zIGNvbnRhaW5pbmcgbGl0ZXJhbCBudW1iZXJzIGFuZFxuXHQgICAgICAgIC8vIGJvb2xlYW5zLCB0aGVyZSdzIG5vIG5lZWQgdG8gc2V0dXAgYSBwcm9wIGJpbmRpbmcsXG5cdCAgICAgICAgLy8gc28gd2UgY2FuIG9wdGltaXplIHRoZW0gYXMgYSBvbmUtdGltZSBzZXQuXG5cdCAgICAgICAgcHJvcC5vcHRpbWl6ZWRMaXRlcmFsID0gdHJ1ZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwcm9wLmR5bmFtaWMgPSB0cnVlO1xuXHQgICAgICAgIC8vIGNoZWNrIG5vbi1zZXR0YWJsZSBwYXRoIGZvciB0d28td2F5IGJpbmRpbmdzXG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgcHJvcC5tb2RlID09PSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVkgJiYgIXNldHRhYmxlUGF0aFJFLnRlc3QodmFsdWUpKSB7XG5cdCAgICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLk9ORV9XQVk7XG5cdCAgICAgICAgICB3YXJuKCdDYW5ub3QgYmluZCB0d28td2F5IHByb3Agd2l0aCBub24tc2V0dGFibGUgJyArICdwYXJlbnQgcGF0aDogJyArIHZhbHVlLCB2bSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHByb3AucGFyZW50UGF0aCA9IHZhbHVlO1xuXHRcblx0ICAgICAgLy8gd2FybiByZXF1aXJlZCB0d28td2F5XG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG9wdGlvbnMudHdvV2F5ICYmIHByb3AubW9kZSAhPT0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZKSB7XG5cdCAgICAgICAgd2FybignUHJvcCBcIicgKyBuYW1lICsgJ1wiIGV4cGVjdHMgYSB0d28td2F5IGJpbmRpbmcgdHlwZS4nLCB2bSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoKHZhbHVlID0gZ2V0QXR0cihlbCwgYXR0cikpICE9PSBudWxsKSB7XG5cdCAgICAgIC8vIGhhcyBsaXRlcmFsIGJpbmRpbmchXG5cdCAgICAgIHByb3AucmF3ID0gdmFsdWU7XG5cdCAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgLy8gY2hlY2sgcG9zc2libGUgY2FtZWxDYXNlIHByb3AgdXNhZ2Vcblx0ICAgICAgdmFyIGxvd2VyQ2FzZU5hbWUgPSBwYXRoLnRvTG93ZXJDYXNlKCk7XG5cdCAgICAgIHZhbHVlID0gL1tBLVpcXC1dLy50ZXN0KG5hbWUpICYmIChlbC5nZXRBdHRyaWJ1dGUobG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSArICcub25jZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lICsgJy5vbmNlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLnN5bmMnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSArICcuc3luYycpKTtcblx0ICAgICAgaWYgKHZhbHVlKSB7XG5cdCAgICAgICAgd2FybignUG9zc2libGUgdXNhZ2UgZXJyb3IgZm9yIHByb3AgYCcgKyBsb3dlckNhc2VOYW1lICsgJ2AgLSAnICsgJ2RpZCB5b3UgbWVhbiBgJyArIGF0dHIgKyAnYD8gSFRNTCBpcyBjYXNlLWluc2Vuc2l0aXZlLCByZW1lbWJlciB0byB1c2UgJyArICdrZWJhYi1jYXNlIGZvciBwcm9wcyBpbiB0ZW1wbGF0ZXMuJywgdm0pO1xuXHQgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucmVxdWlyZWQpIHtcblx0ICAgICAgICAvLyB3YXJuIG1pc3NpbmcgcmVxdWlyZWRcblx0ICAgICAgICB3YXJuKCdNaXNzaW5nIHJlcXVpcmVkIHByb3A6ICcgKyBuYW1lLCB2bSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIHB1c2ggcHJvcFxuXHQgICAgcHJvcHMucHVzaChwcm9wKTtcblx0ICB9XG5cdCAgcmV0dXJuIG1ha2VQcm9wc0xpbmtGbihwcm9wcyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBCdWlsZCBhIGZ1bmN0aW9uIHRoYXQgYXBwbGllcyBwcm9wcyB0byBhIHZtLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBwcm9wc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gcHJvcHNMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlUHJvcHNMaW5rRm4ocHJvcHMpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gcHJvcHNMaW5rRm4odm0sIHNjb3BlKSB7XG5cdCAgICAvLyBzdG9yZSByZXNvbHZlZCBwcm9wcyBpbmZvXG5cdCAgICB2bS5fcHJvcHMgPSB7fTtcblx0ICAgIHZhciBpbmxpbmVQcm9wcyA9IHZtLiRvcHRpb25zLnByb3BzRGF0YTtcblx0ICAgIHZhciBpID0gcHJvcHMubGVuZ3RoO1xuXHQgICAgdmFyIHByb3AsIHBhdGgsIG9wdGlvbnMsIHZhbHVlLCByYXc7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHByb3AgPSBwcm9wc1tpXTtcblx0ICAgICAgcmF3ID0gcHJvcC5yYXc7XG5cdCAgICAgIHBhdGggPSBwcm9wLnBhdGg7XG5cdCAgICAgIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG5cdCAgICAgIHZtLl9wcm9wc1twYXRoXSA9IHByb3A7XG5cdCAgICAgIGlmIChpbmxpbmVQcm9wcyAmJiBoYXNPd24oaW5saW5lUHJvcHMsIHBhdGgpKSB7XG5cdCAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIGlubGluZVByb3BzW3BhdGhdKTtcblx0ICAgICAgfWlmIChyYXcgPT09IG51bGwpIHtcblx0ICAgICAgICAvLyBpbml0aWFsaXplIGFic2VudCBwcm9wXG5cdCAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHVuZGVmaW5lZCk7XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvcC5keW5hbWljKSB7XG5cdCAgICAgICAgLy8gZHluYW1pYyBwcm9wXG5cdCAgICAgICAgaWYgKHByb3AubW9kZSA9PT0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfVElNRSkge1xuXHQgICAgICAgICAgLy8gb25lIHRpbWUgYmluZGluZ1xuXHQgICAgICAgICAgdmFsdWUgPSAoc2NvcGUgfHwgdm0uX2NvbnRleHQgfHwgdm0pLiRnZXQocHJvcC5wYXJlbnRQYXRoKTtcblx0ICAgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGlmICh2bS5fY29udGV4dCkge1xuXHQgICAgICAgICAgICAvLyBkeW5hbWljIGJpbmRpbmdcblx0ICAgICAgICAgICAgdm0uX2JpbmREaXIoe1xuXHQgICAgICAgICAgICAgIG5hbWU6ICdwcm9wJyxcblx0ICAgICAgICAgICAgICBkZWY6IHByb3BEZWYsXG5cdCAgICAgICAgICAgICAgcHJvcDogcHJvcFxuXHQgICAgICAgICAgICB9LCBudWxsLCBudWxsLCBzY29wZSk7IC8vIGVsLCBob3N0LCBzY29wZVxuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAvLyByb290IGluc3RhbmNlXG5cdCAgICAgICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZtLiRnZXQocHJvcC5wYXJlbnRQYXRoKSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvcC5vcHRpbWl6ZWRMaXRlcmFsKSB7XG5cdCAgICAgICAgLy8gb3B0aW1pemVkIGxpdGVyYWwsIGNhc3QgaXQgYW5kIGp1c3Qgc2V0IG9uY2Vcblx0ICAgICAgICB2YXIgc3RyaXBwZWQgPSBzdHJpcFF1b3RlcyhyYXcpO1xuXHQgICAgICAgIHZhbHVlID0gc3RyaXBwZWQgPT09IHJhdyA/IHRvQm9vbGVhbih0b051bWJlcihyYXcpKSA6IHN0cmlwcGVkO1xuXHQgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gc3RyaW5nIGxpdGVyYWwsIGJ1dCB3ZSBuZWVkIHRvIGNhdGVyIGZvclxuXHQgICAgICAgIC8vIEJvb2xlYW4gcHJvcHMgd2l0aCBubyB2YWx1ZSwgb3Igd2l0aCBzYW1lXG5cdCAgICAgICAgLy8gbGl0ZXJhbCB2YWx1ZSAoZS5nLiBkaXNhYmxlZD1cImRpc2FibGVkXCIpXG5cdCAgICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtbG9hZGVyL2lzc3Vlcy8xODJcblx0ICAgICAgICB2YWx1ZSA9IG9wdGlvbnMudHlwZSA9PT0gQm9vbGVhbiAmJiAocmF3ID09PSAnJyB8fCByYXcgPT09IGh5cGhlbmF0ZShwcm9wLm5hbWUpKSA/IHRydWUgOiByYXc7XG5cdCAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcm9jZXNzIGEgcHJvcCB3aXRoIGEgcmF3VmFsdWUsIGFwcGx5aW5nIG5lY2Vzc2FyeSBjb2Vyc2lvbnMsXG5cdCAqIGRlZmF1bHQgdmFsdWVzICYgYXNzZXJ0aW9ucyBhbmQgY2FsbCB0aGUgZ2l2ZW4gY2FsbGJhY2sgd2l0aFxuXHQgKiBwcm9jZXNzZWQgdmFsdWUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuXHQgKiBAcGFyYW0geyp9IHJhd1ZhbHVlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgcmF3VmFsdWUsIGZuKSB7XG5cdCAgdmFyIGlzU2ltcGxlID0gcHJvcC5keW5hbWljICYmIGlzU2ltcGxlUGF0aChwcm9wLnBhcmVudFBhdGgpO1xuXHQgIHZhciB2YWx1ZSA9IHJhd1ZhbHVlO1xuXHQgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICB2YWx1ZSA9IGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3ApO1xuXHQgIH1cblx0ICB2YWx1ZSA9IGNvZXJjZVByb3AocHJvcCwgdmFsdWUsIHZtKTtcblx0ICB2YXIgY29lcmNlZCA9IHZhbHVlICE9PSByYXdWYWx1ZTtcblx0ICBpZiAoIWFzc2VydFByb3AocHJvcCwgdmFsdWUsIHZtKSkge1xuXHQgICAgdmFsdWUgPSB1bmRlZmluZWQ7XG5cdCAgfVxuXHQgIGlmIChpc1NpbXBsZSAmJiAhY29lcmNlZCkge1xuXHQgICAgd2l0aG91dENvbnZlcnNpb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICBmbih2YWx1ZSk7XG5cdCAgICB9KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgZm4odmFsdWUpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFNldCBhIHByb3AncyBpbml0aWFsIHZhbHVlIG9uIGEgdm0gYW5kIGl0cyBkYXRhIG9iamVjdC5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpIHtcblx0ICBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCB2YWx1ZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICBkZWZpbmVSZWFjdGl2ZSh2bSwgcHJvcC5wYXRoLCB2YWx1ZSk7XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBVcGRhdGUgYSBwcm9wJ3MgdmFsdWUgb24gYSB2bS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVQcm9wKHZtLCBwcm9wLCB2YWx1ZSkge1xuXHQgIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHZhbHVlLCBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgIHZtW3Byb3AucGF0aF0gPSB2YWx1ZTtcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHByb3AuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuXHQgKiBAcmV0dXJuIHsqfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3ApIHtcblx0ICAvLyBubyBkZWZhdWx0LCByZXR1cm4gdW5kZWZpbmVkXG5cdCAgdmFyIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG5cdCAgaWYgKCFoYXNPd24ob3B0aW9ucywgJ2RlZmF1bHQnKSkge1xuXHQgICAgLy8gYWJzZW50IGJvb2xlYW4gdmFsdWUgZGVmYXVsdHMgdG8gZmFsc2Vcblx0ICAgIHJldHVybiBvcHRpb25zLnR5cGUgPT09IEJvb2xlYW4gPyBmYWxzZSA6IHVuZGVmaW5lZDtcblx0ICB9XG5cdCAgdmFyIGRlZiA9IG9wdGlvbnNbJ2RlZmF1bHQnXTtcblx0ICAvLyB3YXJuIGFnYWluc3Qgbm9uLWZhY3RvcnkgZGVmYXVsdHMgZm9yIE9iamVjdCAmIEFycmF5XG5cdCAgaWYgKGlzT2JqZWN0KGRlZikpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBkZWZhdWx0IHZhbHVlIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIjogJyArICdQcm9wcyB3aXRoIHR5cGUgT2JqZWN0L0FycmF5IG11c3QgdXNlIGEgZmFjdG9yeSBmdW5jdGlvbiAnICsgJ3RvIHJldHVybiB0aGUgZGVmYXVsdCB2YWx1ZS4nLCB2bSk7XG5cdCAgfVxuXHQgIC8vIGNhbGwgZmFjdG9yeSBmdW5jdGlvbiBmb3Igbm9uLUZ1bmN0aW9uIHR5cGVzXG5cdCAgcmV0dXJuIHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicgJiYgb3B0aW9ucy50eXBlICE9PSBGdW5jdGlvbiA/IGRlZi5jYWxsKHZtKSA6IGRlZjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFzc2VydCB3aGV0aGVyIGEgcHJvcCBpcyB2YWxpZC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3Bcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhc3NlcnRQcm9wKHByb3AsIHZhbHVlLCB2bSkge1xuXHQgIGlmICghcHJvcC5vcHRpb25zLnJlcXVpcmVkICYmICggLy8gbm9uLXJlcXVpcmVkXG5cdCAgcHJvcC5yYXcgPT09IG51bGwgfHwgLy8gYWJzY2VudFxuXHQgIHZhbHVlID09IG51bGwpIC8vIG51bGwgb3IgdW5kZWZpbmVkXG5cdCAgKSB7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfVxuXHQgIHZhciBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xuXHQgIHZhciB0eXBlID0gb3B0aW9ucy50eXBlO1xuXHQgIHZhciB2YWxpZCA9ICF0eXBlO1xuXHQgIHZhciBleHBlY3RlZFR5cGVzID0gW107XG5cdCAgaWYgKHR5cGUpIHtcblx0ICAgIGlmICghaXNBcnJheSh0eXBlKSkge1xuXHQgICAgICB0eXBlID0gW3R5cGVdO1xuXHQgICAgfVxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0eXBlLmxlbmd0aCAmJiAhdmFsaWQ7IGkrKykge1xuXHQgICAgICB2YXIgYXNzZXJ0ZWRUeXBlID0gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZVtpXSk7XG5cdCAgICAgIGV4cGVjdGVkVHlwZXMucHVzaChhc3NlcnRlZFR5cGUuZXhwZWN0ZWRUeXBlKTtcblx0ICAgICAgdmFsaWQgPSBhc3NlcnRlZFR5cGUudmFsaWQ7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmICghdmFsaWQpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIHdhcm4oJ0ludmFsaWQgcHJvcDogdHlwZSBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiLicgKyAnIEV4cGVjdGVkICcgKyBleHBlY3RlZFR5cGVzLm1hcChmb3JtYXRUeXBlKS5qb2luKCcsICcpICsgJywgZ290ICcgKyBmb3JtYXRWYWx1ZSh2YWx1ZSkgKyAnLicsIHZtKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgdmFyIHZhbGlkYXRvciA9IG9wdGlvbnMudmFsaWRhdG9yO1xuXHQgIGlmICh2YWxpZGF0b3IpIHtcblx0ICAgIGlmICghdmFsaWRhdG9yKHZhbHVlKSkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgcHJvcDogY3VzdG9tIHZhbGlkYXRvciBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiLicsIHZtKTtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcmNlIHBhcnNpbmcgdmFsdWUgd2l0aCBjb2VyY2Ugb3B0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4geyp9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29lcmNlUHJvcChwcm9wLCB2YWx1ZSwgdm0pIHtcblx0ICB2YXIgY29lcmNlID0gcHJvcC5vcHRpb25zLmNvZXJjZTtcblx0ICBpZiAoIWNvZXJjZSkge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIGNvZXJjZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgcmV0dXJuIGNvZXJjZSh2YWx1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBjb2VyY2UgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiOiBleHBlY3RlZCBmdW5jdGlvbiwgZ290ICcgKyB0eXBlb2YgY29lcmNlICsgJy4nLCB2bSk7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQXNzZXJ0IHRoZSB0eXBlIG9mIGEgdmFsdWVcblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0eXBlXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlKSB7XG5cdCAgdmFyIHZhbGlkO1xuXHQgIHZhciBleHBlY3RlZFR5cGU7XG5cdCAgaWYgKHR5cGUgPT09IFN0cmluZykge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ3N0cmluZyc7XG5cdCAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gTnVtYmVyKSB7XG5cdCAgICBleHBlY3RlZFR5cGUgPSAnbnVtYmVyJztcblx0ICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSBCb29sZWFuKSB7XG5cdCAgICBleHBlY3RlZFR5cGUgPSAnYm9vbGVhbic7XG5cdCAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gRnVuY3Rpb24pIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdmdW5jdGlvbic7XG5cdCAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gT2JqZWN0KSB7XG5cdCAgICBleHBlY3RlZFR5cGUgPSAnb2JqZWN0Jztcblx0ICAgIHZhbGlkID0gaXNQbGFpbk9iamVjdCh2YWx1ZSk7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSBBcnJheSkge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ2FycmF5Jztcblx0ICAgIHZhbGlkID0gaXNBcnJheSh2YWx1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhbGlkID0gdmFsdWUgaW5zdGFuY2VvZiB0eXBlO1xuXHQgIH1cblx0ICByZXR1cm4ge1xuXHQgICAgdmFsaWQ6IHZhbGlkLFxuXHQgICAgZXhwZWN0ZWRUeXBlOiBleHBlY3RlZFR5cGVcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9ybWF0IHR5cGUgZm9yIG91dHB1dFxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZm9ybWF0VHlwZSh0eXBlKSB7XG5cdCAgcmV0dXJuIHR5cGUgPyB0eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdHlwZS5zbGljZSgxKSA6ICdjdXN0b20gdHlwZSc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JtYXQgdmFsdWVcblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZm9ybWF0VmFsdWUodmFsKSB7XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpLnNsaWNlKDgsIC0xKTtcblx0fVxuXHRcblx0dmFyIGJpbmRpbmdNb2RlcyA9IGNvbmZpZy5fcHJvcEJpbmRpbmdNb2Rlcztcblx0XG5cdHZhciBwcm9wRGVmID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIGNoaWxkID0gdGhpcy52bTtcblx0ICAgIHZhciBwYXJlbnQgPSBjaGlsZC5fY29udGV4dDtcblx0ICAgIC8vIHBhc3NlZCBpbiBmcm9tIGNvbXBpbGVyIGRpcmVjdGx5XG5cdCAgICB2YXIgcHJvcCA9IHRoaXMuZGVzY3JpcHRvci5wcm9wO1xuXHQgICAgdmFyIGNoaWxkS2V5ID0gcHJvcC5wYXRoO1xuXHQgICAgdmFyIHBhcmVudEtleSA9IHByb3AucGFyZW50UGF0aDtcblx0ICAgIHZhciB0d29XYXkgPSBwcm9wLm1vZGUgPT09IGJpbmRpbmdNb2Rlcy5UV09fV0FZO1xuXHRcblx0ICAgIHZhciBwYXJlbnRXYXRjaGVyID0gdGhpcy5wYXJlbnRXYXRjaGVyID0gbmV3IFdhdGNoZXIocGFyZW50LCBwYXJlbnRLZXksIGZ1bmN0aW9uICh2YWwpIHtcblx0ICAgICAgdXBkYXRlUHJvcChjaGlsZCwgcHJvcCwgdmFsKTtcblx0ICAgIH0sIHtcblx0ICAgICAgdHdvV2F5OiB0d29XYXksXG5cdCAgICAgIGZpbHRlcnM6IHByb3AuZmlsdGVycyxcblx0ICAgICAgLy8gaW1wb3J0YW50OiBwcm9wcyBuZWVkIHRvIGJlIG9ic2VydmVkIG9uIHRoZVxuXHQgICAgICAvLyB2LWZvciBzY29wZSBpZiBwcmVzZW50XG5cdCAgICAgIHNjb3BlOiB0aGlzLl9zY29wZVxuXHQgICAgfSk7XG5cdFxuXHQgICAgLy8gc2V0IHRoZSBjaGlsZCBpbml0aWFsIHZhbHVlLlxuXHQgICAgaW5pdFByb3AoY2hpbGQsIHByb3AsIHBhcmVudFdhdGNoZXIudmFsdWUpO1xuXHRcblx0ICAgIC8vIHNldHVwIHR3by13YXkgYmluZGluZ1xuXHQgICAgaWYgKHR3b1dheSkge1xuXHQgICAgICAvLyBpbXBvcnRhbnQ6IGRlZmVyIHRoZSBjaGlsZCB3YXRjaGVyIGNyZWF0aW9uIHVudGlsXG5cdCAgICAgIC8vIHRoZSBjcmVhdGVkIGhvb2sgKGFmdGVyIGRhdGEgb2JzZXJ2YXRpb24pXG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgY2hpbGQuJG9uY2UoJ3ByZS1ob29rOmNyZWF0ZWQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgc2VsZi5jaGlsZFdhdGNoZXIgPSBuZXcgV2F0Y2hlcihjaGlsZCwgY2hpbGRLZXksIGZ1bmN0aW9uICh2YWwpIHtcblx0ICAgICAgICAgIHBhcmVudFdhdGNoZXIuc2V0KHZhbCk7XG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgLy8gZW5zdXJlIHN5bmMgdXB3YXJkIGJlZm9yZSBwYXJlbnQgc3luYyBkb3duLlxuXHQgICAgICAgICAgLy8gdGhpcyBpcyBuZWNlc3NhcnkgaW4gY2FzZXMgZS5nLiB0aGUgY2hpbGRcblx0ICAgICAgICAgIC8vIG11dGF0ZXMgYSBwcm9wIGFycmF5LCB0aGVuIHJlcGxhY2VzIGl0LiAoIzE2ODMpXG5cdCAgICAgICAgICBzeW5jOiB0cnVlXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdGhpcy5wYXJlbnRXYXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgICBpZiAodGhpcy5jaGlsZFdhdGNoZXIpIHtcblx0ICAgICAgdGhpcy5jaGlsZFdhdGNoZXIudGVhcmRvd24oKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcXVldWUkMSA9IFtdO1xuXHR2YXIgcXVldWVkID0gZmFsc2U7XG5cdFxuXHQvKipcblx0ICogUHVzaCBhIGpvYiBpbnRvIHRoZSBxdWV1ZS5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gam9iXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHVzaEpvYihqb2IpIHtcblx0ICBxdWV1ZSQxLnB1c2goam9iKTtcblx0ICBpZiAoIXF1ZXVlZCkge1xuXHQgICAgcXVldWVkID0gdHJ1ZTtcblx0ICAgIG5leHRUaWNrKGZsdXNoKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGbHVzaCB0aGUgcXVldWUsIGFuZCBkbyBvbmUgZm9yY2VkIHJlZmxvdyBiZWZvcmVcblx0ICogdHJpZ2dlcmluZyB0cmFuc2l0aW9ucy5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmbHVzaCgpIHtcblx0ICAvLyBGb3JjZSBsYXlvdXRcblx0ICB2YXIgZiA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQ7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZSQxLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBxdWV1ZSQxW2ldKCk7XG5cdCAgfVxuXHQgIHF1ZXVlJDEgPSBbXTtcblx0ICBxdWV1ZWQgPSBmYWxzZTtcblx0ICAvLyBkdW1teSByZXR1cm4sIHNvIGpzIGxpbnRlcnMgZG9uJ3QgY29tcGxhaW4gYWJvdXRcblx0ICAvLyB1bnVzZWQgdmFyaWFibGUgZlxuXHQgIHJldHVybiBmO1xuXHR9XG5cdFxuXHR2YXIgVFlQRV9UUkFOU0lUSU9OID0gJ3RyYW5zaXRpb24nO1xuXHR2YXIgVFlQRV9BTklNQVRJT04gPSAnYW5pbWF0aW9uJztcblx0dmFyIHRyYW5zRHVyYXRpb25Qcm9wID0gdHJhbnNpdGlvblByb3AgKyAnRHVyYXRpb24nO1xuXHR2YXIgYW5pbUR1cmF0aW9uUHJvcCA9IGFuaW1hdGlvblByb3AgKyAnRHVyYXRpb24nO1xuXHRcblx0LyoqXG5cdCAqIElmIGEganVzdC1lbnRlcmVkIGVsZW1lbnQgaXMgYXBwbGllZCB0aGVcblx0ICogbGVhdmUgY2xhc3Mgd2hpbGUgaXRzIGVudGVyIHRyYW5zaXRpb24gaGFzbid0IHN0YXJ0ZWQgeWV0LFxuXHQgKiBhbmQgdGhlIHRyYW5zaXRpb25lZCBwcm9wZXJ0eSBoYXMgdGhlIHNhbWUgdmFsdWUgZm9yIGJvdGhcblx0ICogZW50ZXIvbGVhdmUsIHRoZW4gdGhlIGxlYXZlIHRyYW5zaXRpb24gd2lsbCBiZSBza2lwcGVkIGFuZFxuXHQgKiB0aGUgdHJhbnNpdGlvbmVuZCBldmVudCBuZXZlciBmaXJlcy4gVGhpcyBmdW5jdGlvbiBlbnN1cmVzXG5cdCAqIGl0cyBjYWxsYmFjayB0byBiZSBjYWxsZWQgYWZ0ZXIgYSB0cmFuc2l0aW9uIGhhcyBzdGFydGVkXG5cdCAqIGJ5IHdhaXRpbmcgZm9yIGRvdWJsZSByYWYuXG5cdCAqXG5cdCAqIEl0IGZhbGxzIGJhY2sgdG8gc2V0VGltZW91dCBvbiBkZXZpY2VzIHRoYXQgc3VwcG9ydCBDU1Ncblx0ICogdHJhbnNpdGlvbnMgYnV0IG5vdCByYWYgKGUuZy4gQW5kcm9pZCA0LjIgYnJvd3NlcikgLSBzaW5jZVxuXHQgKiB0aGVzZSBlbnZpcm9ubWVudHMgYXJlIHVzdWFsbHkgc2xvdywgd2UgYXJlIGdpdmluZyBpdCBhXG5cdCAqIHJlbGF0aXZlbHkgbGFyZ2UgdGltZW91dC5cblx0ICovXG5cdFxuXHR2YXIgcmFmID0gaW5Ccm93c2VyICYmIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG5cdHZhciB3YWl0Rm9yVHJhbnNpdGlvblN0YXJ0ID0gcmFmXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdD8gZnVuY3Rpb24gKGZuKSB7XG5cdCAgcmFmKGZ1bmN0aW9uICgpIHtcblx0ICAgIHJhZihmbik7XG5cdCAgfSk7XG5cdH0gOiBmdW5jdGlvbiAoZm4pIHtcblx0ICBzZXRUaW1lb3V0KGZuLCA1MCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQSBUcmFuc2l0aW9uIG9iamVjdCB0aGF0IGVuY2Fwc3VsYXRlcyB0aGUgc3RhdGUgYW5kIGxvZ2ljXG5cdCAqIG9mIHRoZSB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuXHQgKiBAcGFyYW0ge09iamVjdH0gaG9va3Ncblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRmdW5jdGlvbiBUcmFuc2l0aW9uKGVsLCBpZCwgaG9va3MsIHZtKSB7XG5cdCAgdGhpcy5pZCA9IGlkO1xuXHQgIHRoaXMuZWwgPSBlbDtcblx0ICB0aGlzLmVudGVyQ2xhc3MgPSBob29rcyAmJiBob29rcy5lbnRlckNsYXNzIHx8IGlkICsgJy1lbnRlcic7XG5cdCAgdGhpcy5sZWF2ZUNsYXNzID0gaG9va3MgJiYgaG9va3MubGVhdmVDbGFzcyB8fCBpZCArICctbGVhdmUnO1xuXHQgIHRoaXMuaG9va3MgPSBob29rcztcblx0ICB0aGlzLnZtID0gdm07XG5cdCAgLy8gYXN5bmMgc3RhdGVcblx0ICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gdGhpcy5vcCA9IHRoaXMuY2IgPSBudWxsO1xuXHQgIHRoaXMuanVzdEVudGVyZWQgPSBmYWxzZTtcblx0ICB0aGlzLmVudGVyZWQgPSB0aGlzLmxlZnQgPSBmYWxzZTtcblx0ICB0aGlzLnR5cGVDYWNoZSA9IHt9O1xuXHQgIC8vIGNoZWNrIGNzcyB0cmFuc2l0aW9uIHR5cGVcblx0ICB0aGlzLnR5cGUgPSBob29rcyAmJiBob29rcy50eXBlO1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBpZiAodGhpcy50eXBlICYmIHRoaXMudHlwZSAhPT0gVFlQRV9UUkFOU0lUSU9OICYmIHRoaXMudHlwZSAhPT0gVFlQRV9BTklNQVRJT04pIHtcblx0ICAgICAgd2FybignaW52YWxpZCBDU1MgdHJhbnNpdGlvbiB0eXBlIGZvciB0cmFuc2l0aW9uPVwiJyArIHRoaXMuaWQgKyAnXCI6ICcgKyB0aGlzLnR5cGUsIHZtKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gYmluZFxuXHQgIHZhciBzZWxmID0gdGhpcztbJ2VudGVyTmV4dFRpY2snLCAnZW50ZXJEb25lJywgJ2xlYXZlTmV4dFRpY2snLCAnbGVhdmVEb25lJ10uZm9yRWFjaChmdW5jdGlvbiAobSkge1xuXHQgICAgc2VsZlttXSA9IGJpbmQoc2VsZlttXSwgc2VsZik7XG5cdCAgfSk7XG5cdH1cblx0XG5cdHZhciBwJDEgPSBUcmFuc2l0aW9uLnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBTdGFydCBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiAxLiBlbnRlciB0cmFuc2l0aW9uIHRyaWdnZXJlZFxuXHQgKiAyLiBjYWxsIGJlZm9yZUVudGVyIGhvb2tcblx0ICogMy4gYWRkIGVudGVyIGNsYXNzXG5cdCAqIDQuIGluc2VydC9zaG93IGVsZW1lbnRcblx0ICogNS4gY2FsbCBlbnRlciBob29rICh3aXRoIHBvc3NpYmxlIGV4cGxpY2l0IGpzIGNhbGxiYWNrKVxuXHQgKiA2LiByZWZsb3dcblx0ICogNy4gYmFzZWQgb24gdHJhbnNpdGlvbiB0eXBlOlxuXHQgKiAgICAtIHRyYW5zaXRpb246XG5cdCAqICAgICAgICByZW1vdmUgY2xhc3Mgbm93LCB3YWl0IGZvciB0cmFuc2l0aW9uZW5kLFxuXHQgKiAgICAgICAgdGhlbiBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG5cdCAqICAgIC0gYW5pbWF0aW9uOlxuXHQgKiAgICAgICAgd2FpdCBmb3IgYW5pbWF0aW9uZW5kLCByZW1vdmUgY2xhc3MsXG5cdCAqICAgICAgICB0aGVuIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cblx0ICogICAgLSBubyBjc3MgdHJhbnNpdGlvbjpcblx0ICogICAgICAgIGRvbmUgbm93IGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG5cdCAqIDguIHdhaXQgZm9yIGVpdGhlciBkb25lIG9yIGpzIGNhbGxiYWNrLCB0aGVuIGNhbGxcblx0ICogICAgYWZ0ZXJFbnRlciBob29rLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIGluc2VydC9zaG93IHRoZSBlbGVtZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRwJDEuZW50ZXIgPSBmdW5jdGlvbiAob3AsIGNiKSB7XG5cdCAgdGhpcy5jYW5jZWxQZW5kaW5nKCk7XG5cdCAgdGhpcy5jYWxsSG9vaygnYmVmb3JlRW50ZXInKTtcblx0ICB0aGlzLmNiID0gY2I7XG5cdCAgYWRkQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcblx0ICBvcCgpO1xuXHQgIHRoaXMuZW50ZXJlZCA9IGZhbHNlO1xuXHQgIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2VudGVyJyk7XG5cdCAgaWYgKHRoaXMuZW50ZXJlZCkge1xuXHQgICAgcmV0dXJuOyAvLyB1c2VyIGNhbGxlZCBkb25lIHN5bmNocm9ub3VzbHkuXG5cdCAgfVxuXHQgIHRoaXMuY2FuY2VsID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmVudGVyQ2FuY2VsbGVkO1xuXHQgIHB1c2hKb2IodGhpcy5lbnRlck5leHRUaWNrKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgXCJuZXh0VGlja1wiIHBoYXNlIG9mIGFuIGVudGVyaW5nIHRyYW5zaXRpb24sIHdoaWNoIGlzXG5cdCAqIHRvIGJlIHB1c2hlZCBpbnRvIGEgcXVldWUgYW5kIGV4ZWN1dGVkIGFmdGVyIGEgcmVmbG93IHNvXG5cdCAqIHRoYXQgcmVtb3ZpbmcgdGhlIGNsYXNzIGNhbiB0cmlnZ2VyIGEgQ1NTIHRyYW5zaXRpb24uXG5cdCAqL1xuXHRcblx0cCQxLmVudGVyTmV4dFRpY2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgLy8gcHJldmVudCB0cmFuc2l0aW9uIHNraXBwaW5nXG5cdCAgdGhpcy5qdXN0RW50ZXJlZCA9IHRydWU7XG5cdCAgd2FpdEZvclRyYW5zaXRpb25TdGFydChmdW5jdGlvbiAoKSB7XG5cdCAgICBfdGhpcy5qdXN0RW50ZXJlZCA9IGZhbHNlO1xuXHQgIH0pO1xuXHQgIHZhciBlbnRlckRvbmUgPSB0aGlzLmVudGVyRG9uZTtcblx0ICB2YXIgdHlwZSA9IHRoaXMuZ2V0Q3NzVHJhbnNpdGlvblR5cGUodGhpcy5lbnRlckNsYXNzKTtcblx0ICBpZiAoIXRoaXMucGVuZGluZ0pzQ2IpIHtcblx0ICAgIGlmICh0eXBlID09PSBUWVBFX1RSQU5TSVRJT04pIHtcblx0ICAgICAgLy8gdHJpZ2dlciB0cmFuc2l0aW9uIGJ5IHJlbW92aW5nIGVudGVyIGNsYXNzIG5vd1xuXHQgICAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuXHQgICAgICB0aGlzLnNldHVwQ3NzQ2IodHJhbnNpdGlvbkVuZEV2ZW50LCBlbnRlckRvbmUpO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlID09PSBUWVBFX0FOSU1BVElPTikge1xuXHQgICAgICB0aGlzLnNldHVwQ3NzQ2IoYW5pbWF0aW9uRW5kRXZlbnQsIGVudGVyRG9uZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbnRlckRvbmUoKTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTikge1xuXHQgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogVGhlIFwiY2xlYW51cFwiIHBoYXNlIG9mIGFuIGVudGVyaW5nIHRyYW5zaXRpb24uXG5cdCAqL1xuXHRcblx0cCQxLmVudGVyRG9uZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB0aGlzLmVudGVyZWQgPSB0cnVlO1xuXHQgIHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG5cdCAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcblx0ICB0aGlzLmNhbGxIb29rKCdhZnRlckVudGVyJyk7XG5cdCAgaWYgKHRoaXMuY2IpIHRoaXMuY2IoKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTdGFydCBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cblx0ICpcblx0ICogMS4gbGVhdmUgdHJhbnNpdGlvbiB0cmlnZ2VyZWQuXG5cdCAqIDIuIGNhbGwgYmVmb3JlTGVhdmUgaG9va1xuXHQgKiAzLiBhZGQgbGVhdmUgY2xhc3MgKHRyaWdnZXIgY3NzIHRyYW5zaXRpb24pXG5cdCAqIDQuIGNhbGwgbGVhdmUgaG9vayAod2l0aCBwb3NzaWJsZSBleHBsaWNpdCBqcyBjYWxsYmFjaylcblx0ICogNS4gcmVmbG93IGlmIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrIGlzIHByb3ZpZGVkXG5cdCAqIDYuIGJhc2VkIG9uIHRyYW5zaXRpb24gdHlwZTpcblx0ICogICAgLSB0cmFuc2l0aW9uIG9yIGFuaW1hdGlvbjpcblx0ICogICAgICAgIHdhaXQgZm9yIGVuZCBldmVudCwgcmVtb3ZlIGNsYXNzLCB0aGVuIGRvbmUgaWZcblx0ICogICAgICAgIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG5cdCAqICAgIC0gbm8gY3NzIHRyYW5zaXRpb246XG5cdCAqICAgICAgICBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG5cdCAqIDcuIHdhaXQgZm9yIGVpdGhlciBkb25lIG9yIGpzIGNhbGxiYWNrLCB0aGVuIGNhbGxcblx0ICogICAgYWZ0ZXJMZWF2ZSBob29rLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIHJlbW92ZS9oaWRlIHRoZSBlbGVtZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRwJDEubGVhdmUgPSBmdW5jdGlvbiAob3AsIGNiKSB7XG5cdCAgdGhpcy5jYW5jZWxQZW5kaW5nKCk7XG5cdCAgdGhpcy5jYWxsSG9vaygnYmVmb3JlTGVhdmUnKTtcblx0ICB0aGlzLm9wID0gb3A7XG5cdCAgdGhpcy5jYiA9IGNiO1xuXHQgIGFkZENsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG5cdCAgdGhpcy5sZWZ0ID0gZmFsc2U7XG5cdCAgdGhpcy5jYWxsSG9va1dpdGhDYignbGVhdmUnKTtcblx0ICBpZiAodGhpcy5sZWZ0KSB7XG5cdCAgICByZXR1cm47IC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cblx0ICB9XG5cdCAgdGhpcy5jYW5jZWwgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MubGVhdmVDYW5jZWxsZWQ7XG5cdCAgLy8gb25seSBuZWVkIHRvIGhhbmRsZSBsZWF2ZURvbmUgaWZcblx0ICAvLyAxLiB0aGUgdHJhbnNpdGlvbiBpcyBhbHJlYWR5IGRvbmUgKHN5bmNocm9ub3VzbHkgY2FsbGVkXG5cdCAgLy8gICAgYnkgdGhlIHVzZXIsIHdoaWNoIGNhdXNlcyB0aGlzLm9wIHNldCB0byBudWxsKVxuXHQgIC8vIDIuIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2tcblx0ICBpZiAodGhpcy5vcCAmJiAhdGhpcy5wZW5kaW5nSnNDYikge1xuXHQgICAgLy8gaWYgYSBDU1MgdHJhbnNpdGlvbiBsZWF2ZXMgaW1tZWRpYXRlbHkgYWZ0ZXIgZW50ZXIsXG5cdCAgICAvLyB0aGUgdHJhbnNpdGlvbmVuZCBldmVudCBuZXZlciBmaXJlcy4gdGhlcmVmb3JlIHdlXG5cdCAgICAvLyBkZXRlY3Qgc3VjaCBjYXNlcyBhbmQgZW5kIHRoZSBsZWF2ZSBpbW1lZGlhdGVseS5cblx0ICAgIGlmICh0aGlzLmp1c3RFbnRlcmVkKSB7XG5cdCAgICAgIHRoaXMubGVhdmVEb25lKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBwdXNoSm9iKHRoaXMubGVhdmVOZXh0VGljayk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFRoZSBcIm5leHRUaWNrXCIgcGhhc2Ugb2YgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG5cdCAqL1xuXHRcblx0cCQxLmxlYXZlTmV4dFRpY2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIHR5cGUgPSB0aGlzLmdldENzc1RyYW5zaXRpb25UeXBlKHRoaXMubGVhdmVDbGFzcyk7XG5cdCAgaWYgKHR5cGUpIHtcblx0ICAgIHZhciBldmVudCA9IHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTiA/IHRyYW5zaXRpb25FbmRFdmVudCA6IGFuaW1hdGlvbkVuZEV2ZW50O1xuXHQgICAgdGhpcy5zZXR1cENzc0NiKGV2ZW50LCB0aGlzLmxlYXZlRG9uZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRoaXMubGVhdmVEb25lKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFRoZSBcImNsZWFudXBcIiBwaGFzZSBvZiBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cblx0ICovXG5cdFxuXHRwJDEubGVhdmVEb25lID0gZnVuY3Rpb24gKCkge1xuXHQgIHRoaXMubGVmdCA9IHRydWU7XG5cdCAgdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcblx0ICB0aGlzLm9wKCk7XG5cdCAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcblx0ICB0aGlzLmNhbGxIb29rKCdhZnRlckxlYXZlJyk7XG5cdCAgaWYgKHRoaXMuY2IpIHRoaXMuY2IoKTtcblx0ICB0aGlzLm9wID0gbnVsbDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDYW5jZWwgYW55IHBlbmRpbmcgY2FsbGJhY2tzIGZyb20gYSBwcmV2aW91c2x5IHJ1bm5pbmdcblx0ICogYnV0IG5vdCBmaW5pc2hlZCB0cmFuc2l0aW9uLlxuXHQgKi9cblx0XG5cdHAkMS5jYW5jZWxQZW5kaW5nID0gZnVuY3Rpb24gKCkge1xuXHQgIHRoaXMub3AgPSB0aGlzLmNiID0gbnVsbDtcblx0ICB2YXIgaGFzUGVuZGluZyA9IGZhbHNlO1xuXHQgIGlmICh0aGlzLnBlbmRpbmdDc3NDYikge1xuXHQgICAgaGFzUGVuZGluZyA9IHRydWU7XG5cdCAgICBvZmYodGhpcy5lbCwgdGhpcy5wZW5kaW5nQ3NzRXZlbnQsIHRoaXMucGVuZGluZ0Nzc0NiKTtcblx0ICAgIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSBudWxsO1xuXHQgIH1cblx0ICBpZiAodGhpcy5wZW5kaW5nSnNDYikge1xuXHQgICAgaGFzUGVuZGluZyA9IHRydWU7XG5cdCAgICB0aGlzLnBlbmRpbmdKc0NiLmNhbmNlbCgpO1xuXHQgICAgdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG5cdCAgfVxuXHQgIGlmIChoYXNQZW5kaW5nKSB7XG5cdCAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuXHQgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcblx0ICB9XG5cdCAgaWYgKHRoaXMuY2FuY2VsKSB7XG5cdCAgICB0aGlzLmNhbmNlbC5jYWxsKHRoaXMudm0sIHRoaXMuZWwpO1xuXHQgICAgdGhpcy5jYW5jZWwgPSBudWxsO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDYWxsIGEgdXNlci1wcm92aWRlZCBzeW5jaHJvbm91cyBob29rIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHQgKi9cblx0XG5cdHAkMS5jYWxsSG9vayA9IGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgaWYgKHRoaXMuaG9va3MgJiYgdGhpcy5ob29rc1t0eXBlXSkge1xuXHQgICAgdGhpcy5ob29rc1t0eXBlXS5jYWxsKHRoaXMudm0sIHRoaXMuZWwpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDYWxsIGEgdXNlci1wcm92aWRlZCwgcG90ZW50aWFsbHktYXN5bmMgaG9vayBmdW5jdGlvbi5cblx0ICogV2UgY2hlY2sgZm9yIHRoZSBsZW5ndGggb2YgYXJndW1lbnRzIHRvIHNlZSBpZiB0aGUgaG9va1xuXHQgKiBleHBlY3RzIGEgYGRvbmVgIGNhbGxiYWNrLiBJZiB0cnVlLCB0aGUgdHJhbnNpdGlvbidzIGVuZFxuXHQgKiB3aWxsIGJlIGRldGVybWluZWQgYnkgd2hlbiB0aGUgdXNlciBjYWxscyB0aGF0IGNhbGxiYWNrO1xuXHQgKiBvdGhlcndpc2UsIHRoZSBlbmQgaXMgZGV0ZXJtaW5lZCBieSB0aGUgQ1NTIHRyYW5zaXRpb24gb3Jcblx0ICogYW5pbWF0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHQgKi9cblx0XG5cdHAkMS5jYWxsSG9va1dpdGhDYiA9IGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgdmFyIGhvb2sgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV07XG5cdCAgaWYgKGhvb2spIHtcblx0ICAgIGlmIChob29rLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgdGhpcy5wZW5kaW5nSnNDYiA9IGNhbmNlbGxhYmxlKHRoaXNbdHlwZSArICdEb25lJ10pO1xuXHQgICAgfVxuXHQgICAgaG9vay5jYWxsKHRoaXMudm0sIHRoaXMuZWwsIHRoaXMucGVuZGluZ0pzQ2IpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBHZXQgYW4gZWxlbWVudCdzIHRyYW5zaXRpb24gdHlwZSBiYXNlZCBvbiB0aGVcblx0ICogY2FsY3VsYXRlZCBzdHlsZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjbGFzc05hbWVcblx0ICogQHJldHVybiB7TnVtYmVyfVxuXHQgKi9cblx0XG5cdHAkMS5nZXRDc3NUcmFuc2l0aW9uVHlwZSA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoIXRyYW5zaXRpb25FbmRFdmVudCB8fFxuXHQgIC8vIHNraXAgQ1NTIHRyYW5zaXRpb25zIGlmIHBhZ2UgaXMgbm90IHZpc2libGUgLVxuXHQgIC8vIHRoaXMgc29sdmVzIHRoZSBpc3N1ZSBvZiB0cmFuc2l0aW9uZW5kIGV2ZW50cyBub3Rcblx0ICAvLyBmaXJpbmcgdW50aWwgdGhlIHBhZ2UgaXMgdmlzaWJsZSBhZ2Fpbi5cblx0ICAvLyBwYWdlVmlzaWJpbGl0eSBBUEkgaXMgc3VwcG9ydGVkIGluIElFMTArLCBzYW1lIGFzXG5cdCAgLy8gQ1NTIHRyYW5zaXRpb25zLlxuXHQgIGRvY3VtZW50LmhpZGRlbiB8fFxuXHQgIC8vIGV4cGxpY2l0IGpzLW9ubHkgdHJhbnNpdGlvblxuXHQgIHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5jc3MgPT09IGZhbHNlIHx8XG5cdCAgLy8gZWxlbWVudCBpcyBoaWRkZW5cblx0ICBpc0hpZGRlbih0aGlzLmVsKSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgdHlwZSA9IHRoaXMudHlwZSB8fCB0aGlzLnR5cGVDYWNoZVtjbGFzc05hbWVdO1xuXHQgIGlmICh0eXBlKSByZXR1cm4gdHlwZTtcblx0ICB2YXIgaW5saW5lU3R5bGVzID0gdGhpcy5lbC5zdHlsZTtcblx0ICB2YXIgY29tcHV0ZWRTdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKTtcblx0ICB2YXIgdHJhbnNEdXJhdGlvbiA9IGlubGluZVN0eWxlc1t0cmFuc0R1cmF0aW9uUHJvcF0gfHwgY29tcHV0ZWRTdHlsZXNbdHJhbnNEdXJhdGlvblByb3BdO1xuXHQgIGlmICh0cmFuc0R1cmF0aW9uICYmIHRyYW5zRHVyYXRpb24gIT09ICcwcycpIHtcblx0ICAgIHR5cGUgPSBUWVBFX1RSQU5TSVRJT047XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBhbmltRHVyYXRpb24gPSBpbmxpbmVTdHlsZXNbYW5pbUR1cmF0aW9uUHJvcF0gfHwgY29tcHV0ZWRTdHlsZXNbYW5pbUR1cmF0aW9uUHJvcF07XG5cdCAgICBpZiAoYW5pbUR1cmF0aW9uICYmIGFuaW1EdXJhdGlvbiAhPT0gJzBzJykge1xuXHQgICAgICB0eXBlID0gVFlQRV9BTklNQVRJT047XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmICh0eXBlKSB7XG5cdCAgICB0aGlzLnR5cGVDYWNoZVtjbGFzc05hbWVdID0gdHlwZTtcblx0ICB9XG5cdCAgcmV0dXJuIHR5cGU7XG5cdH07XG5cdFxuXHQvKipcblx0ICogU2V0dXAgYSBDU1MgdHJhbnNpdGlvbmVuZC9hbmltYXRpb25lbmQgY2FsbGJhY2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKi9cblx0XG5cdHAkMS5zZXR1cENzc0NiID0gZnVuY3Rpb24gKGV2ZW50LCBjYikge1xuXHQgIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gZXZlbnQ7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgdmFyIG9uRW5kID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgaWYgKGUudGFyZ2V0ID09PSBlbCkge1xuXHQgICAgICBvZmYoZWwsIGV2ZW50LCBvbkVuZCk7XG5cdCAgICAgIHNlbGYucGVuZGluZ0Nzc0V2ZW50ID0gc2VsZi5wZW5kaW5nQ3NzQ2IgPSBudWxsO1xuXHQgICAgICBpZiAoIXNlbGYucGVuZGluZ0pzQ2IgJiYgY2IpIHtcblx0ICAgICAgICBjYigpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0ICBvbihlbCwgZXZlbnQsIG9uRW5kKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGhpZGRlbiAtIGluIHRoYXQgY2FzZSB3ZSBjYW4ganVzdFxuXHQgKiBza2lwIHRoZSB0cmFuc2l0aW9uIGFsbHRvZ2V0aGVyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNIaWRkZW4oZWwpIHtcblx0ICBpZiAoL3N2ZyQvLnRlc3QoZWwubmFtZXNwYWNlVVJJKSkge1xuXHQgICAgLy8gU1ZHIGVsZW1lbnRzIGRvIG5vdCBoYXZlIG9mZnNldChXaWR0aHxIZWlnaHQpXG5cdCAgICAvLyBzbyB3ZSBuZWVkIHRvIGNoZWNrIHRoZSBjbGllbnQgcmVjdFxuXHQgICAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0ICAgIHJldHVybiAhKHJlY3Qud2lkdGggfHwgcmVjdC5oZWlnaHQpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gIShlbC5vZmZzZXRXaWR0aCB8fCBlbC5vZmZzZXRIZWlnaHQgfHwgZWwuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIHRyYW5zaXRpb24kMSA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IFRSQU5TSVRJT04sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGlkLCBvbGRJZCkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIC8vIHJlc29sdmUgb24gb3duZXIgdm1cblx0ICAgIHZhciBob29rcyA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAndHJhbnNpdGlvbnMnLCBpZCk7XG5cdCAgICBpZCA9IGlkIHx8ICd2Jztcblx0ICAgIG9sZElkID0gb2xkSWQgfHwgJ3YnO1xuXHQgICAgZWwuX192X3RyYW5zID0gbmV3IFRyYW5zaXRpb24oZWwsIGlkLCBob29rcywgdGhpcy52bSk7XG5cdCAgICByZW1vdmVDbGFzcyhlbCwgb2xkSWQgKyAnLXRyYW5zaXRpb24nKTtcblx0ICAgIGFkZENsYXNzKGVsLCBpZCArICctdHJhbnNpdGlvbicpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBpbnRlcm5hbERpcmVjdGl2ZXMgPSB7XG5cdCAgc3R5bGU6IHN0eWxlLFxuXHQgICdjbGFzcyc6IHZDbGFzcyxcblx0ICBjb21wb25lbnQ6IGNvbXBvbmVudCxcblx0ICBwcm9wOiBwcm9wRGVmLFxuXHQgIHRyYW5zaXRpb246IHRyYW5zaXRpb24kMVxuXHR9O1xuXHRcblx0Ly8gc3BlY2lhbCBiaW5kaW5nIHByZWZpeGVzXG5cdHZhciBiaW5kUkUgPSAvXnYtYmluZDp8XjovO1xuXHR2YXIgb25SRSA9IC9edi1vbjp8XkAvO1xuXHR2YXIgZGlyQXR0clJFID0gL152LShbXjpdKykoPzokfDooLiopJCkvO1xuXHR2YXIgbW9kaWZpZXJSRSA9IC9cXC5bXlxcLl0rL2c7XG5cdHZhciB0cmFuc2l0aW9uUkUgPSAvXih2LWJpbmQ6fDopP3RyYW5zaXRpb24kLztcblx0XG5cdC8vIGRlZmF1bHQgZGlyZWN0aXZlIHByaW9yaXR5XG5cdHZhciBERUZBVUxUX1BSSU9SSVRZID0gMTAwMDtcblx0dmFyIERFRkFVTFRfVEVSTUlOQUxfUFJJT1JJVFkgPSAyMDAwO1xuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYSB0ZW1wbGF0ZSBhbmQgcmV0dXJuIGEgcmV1c2FibGUgY29tcG9zaXRlIGxpbmtcblx0ICogZnVuY3Rpb24sIHdoaWNoIHJlY3Vyc2l2ZWx5IGNvbnRhaW5zIG1vcmUgbGluayBmdW5jdGlvbnNcblx0ICogaW5zaWRlLiBUaGlzIHRvcCBsZXZlbCBjb21waWxlIGZ1bmN0aW9uIHdvdWxkIG5vcm1hbGx5XG5cdCAqIGJlIGNhbGxlZCBvbiBpbnN0YW5jZSByb290IG5vZGVzLCBidXQgY2FuIGFsc28gYmUgdXNlZFxuXHQgKiBmb3IgcGFydGlhbCBjb21waWxhdGlvbiBpZiB0aGUgcGFydGlhbCBhcmd1bWVudCBpcyB0cnVlLlxuXHQgKlxuXHQgKiBUaGUgcmV0dXJuZWQgY29tcG9zaXRlIGxpbmsgZnVuY3Rpb24sIHdoZW4gY2FsbGVkLCB3aWxsXG5cdCAqIHJldHVybiBhbiB1bmxpbmsgZnVuY3Rpb24gdGhhdCB0ZWFyc2Rvd24gYWxsIGRpcmVjdGl2ZXNcblx0ICogY3JlYXRlZCBkdXJpbmcgdGhlIGxpbmtpbmcgcGhhc2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHBhcnRpYWxcblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZShlbCwgb3B0aW9ucywgcGFydGlhbCkge1xuXHQgIC8vIGxpbmsgZnVuY3Rpb24gZm9yIHRoZSBub2RlIGl0c2VsZi5cblx0ICB2YXIgbm9kZUxpbmtGbiA9IHBhcnRpYWwgfHwgIW9wdGlvbnMuX2FzQ29tcG9uZW50ID8gY29tcGlsZU5vZGUoZWwsIG9wdGlvbnMpIDogbnVsbDtcblx0ICAvLyBsaW5rIGZ1bmN0aW9uIGZvciB0aGUgY2hpbGROb2Rlc1xuXHQgIHZhciBjaGlsZExpbmtGbiA9ICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJiAhaXNTY3JpcHQoZWwpICYmIGVsLmhhc0NoaWxkTm9kZXMoKSA/IGNvbXBpbGVOb2RlTGlzdChlbC5jaGlsZE5vZGVzLCBvcHRpb25zKSA6IG51bGw7XG5cdFxuXHQgIC8qKlxuXHQgICAqIEEgY29tcG9zaXRlIGxpbmtlciBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gYSBhbHJlYWR5XG5cdCAgICogY29tcGlsZWQgcGllY2Ugb2YgRE9NLCB3aGljaCBpbnN0YW50aWF0ZXMgYWxsIGRpcmVjdGl2ZVxuXHQgICAqIGluc3RhbmNlcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuXHQgICAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSBob3N0IHZtIG9mIHRyYW5zY2x1ZGVkIGNvbnRlbnRcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddIC0gbGluayBjb250ZXh0IGZyYWdtZW50XG5cdCAgICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuXHQgICAqL1xuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gY29tcG9zaXRlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIC8vIGNhY2hlIGNoaWxkTm9kZXMgYmVmb3JlIGxpbmtpbmcgcGFyZW50LCBmaXggIzY1N1xuXHQgICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KGVsLmNoaWxkTm9kZXMpO1xuXHQgICAgLy8gbGlua1xuXHQgICAgdmFyIGRpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiBjb21wb3NpdGVMaW5rQ2FwdHVyZXIoKSB7XG5cdCAgICAgIGlmIChub2RlTGlua0ZuKSBub2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgICBpZiAoY2hpbGRMaW5rRm4pIGNoaWxkTGlua0ZuKHZtLCBjaGlsZE5vZGVzLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgICB9LCB2bSk7XG5cdCAgICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBkaXJzKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXBwbHkgYSBsaW5rZXIgdG8gYSB2bS9lbGVtZW50IHBhaXIgYW5kIGNhcHR1cmUgdGhlXG5cdCAqIGRpcmVjdGl2ZXMgY3JlYXRlZCBkdXJpbmcgdGhlIHByb2Nlc3MuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGxpbmtlclxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBsaW5rQW5kQ2FwdHVyZShsaW5rZXIsIHZtKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIC8vIHJlc2V0IGRpcmVjdGl2ZXMgYmVmb3JlIGV2ZXJ5IGNhcHR1cmUgaW4gcHJvZHVjdGlvblxuXHQgICAgLy8gbW9kZSwgc28gdGhhdCB3aGVuIHVubGlua2luZyB3ZSBkb24ndCBuZWVkIHRvIHNwbGljZVxuXHQgICAgLy8gdGhlbSBvdXQgKHdoaWNoIHR1cm5zIG91dCB0byBiZSBhIHBlcmYgaGl0KS5cblx0ICAgIC8vIHRoZXkgYXJlIGtlcHQgaW4gZGV2ZWxvcG1lbnQgbW9kZSBiZWNhdXNlIHRoZXkgYXJlXG5cdCAgICAvLyB1c2VmdWwgZm9yIFZ1ZSdzIG93biB0ZXN0cy5cblx0ICAgIHZtLl9kaXJlY3RpdmVzID0gW107XG5cdCAgfVxuXHQgIHZhciBvcmlnaW5hbERpckNvdW50ID0gdm0uX2RpcmVjdGl2ZXMubGVuZ3RoO1xuXHQgIGxpbmtlcigpO1xuXHQgIHZhciBkaXJzID0gdm0uX2RpcmVjdGl2ZXMuc2xpY2Uob3JpZ2luYWxEaXJDb3VudCk7XG5cdCAgZGlycy5zb3J0KGRpcmVjdGl2ZUNvbXBhcmF0b3IpO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gZGlycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGRpcnNbaV0uX2JpbmQoKTtcblx0ICB9XG5cdCAgcmV0dXJuIGRpcnM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEaXJlY3RpdmUgcHJpb3JpdHkgc29ydCBjb21wYXJhdG9yXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBhXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBiXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGlyZWN0aXZlQ29tcGFyYXRvcihhLCBiKSB7XG5cdCAgYSA9IGEuZGVzY3JpcHRvci5kZWYucHJpb3JpdHkgfHwgREVGQVVMVF9QUklPUklUWTtcblx0ICBiID0gYi5kZXNjcmlwdG9yLmRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZO1xuXHQgIHJldHVybiBhID4gYiA/IC0xIDogYSA9PT0gYiA/IDAgOiAxO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTGlua2VyIGZ1bmN0aW9ucyByZXR1cm4gYW4gdW5saW5rIGZ1bmN0aW9uIHRoYXRcblx0ICogdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzIGluc3RhbmNlcyBnZW5lcmF0ZWQgZHVyaW5nXG5cdCAqIHRoZSBwcm9jZXNzLlxuXHQgKlxuXHQgKiBXZSBjcmVhdGUgdW5saW5rIGZ1bmN0aW9ucyB3aXRoIG9ubHkgdGhlIG5lY2Vzc2FyeVxuXHQgKiBpbmZvcm1hdGlvbiB0byBhdm9pZCByZXRhaW5pbmcgYWRkaXRpb25hbCBjbG9zdXJlcy5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGRpcnNcblx0ICogQHBhcmFtIHtWdWV9IFtjb250ZXh0XVxuXHQgKiBAcGFyYW0ge0FycmF5fSBbY29udGV4dERpcnNdXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VVbmxpbmtGbih2bSwgZGlycywgY29udGV4dCwgY29udGV4dERpcnMpIHtcblx0ICBmdW5jdGlvbiB1bmxpbmsoZGVzdHJveWluZykge1xuXHQgICAgdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKTtcblx0ICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHREaXJzKSB7XG5cdCAgICAgIHRlYXJkb3duRGlycyhjb250ZXh0LCBjb250ZXh0RGlycyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIGV4cG9zZSBsaW5rZWQgZGlyZWN0aXZlc1xuXHQgIHVubGluay5kaXJzID0gZGlycztcblx0ICByZXR1cm4gdW5saW5rO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGVhcmRvd24gcGFydGlhbCBsaW5rZWQgZGlyZWN0aXZlcy5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGRpcnNcblx0ICogQHBhcmFtIHtCb29sZWFufSBkZXN0cm95aW5nXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKSB7XG5cdCAgdmFyIGkgPSBkaXJzLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBkaXJzW2ldLl90ZWFyZG93bigpO1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIWRlc3Ryb3lpbmcpIHtcblx0ICAgICAgdm0uX2RpcmVjdGl2ZXMuJHJlbW92ZShkaXJzW2ldKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGxpbmsgcHJvcHMgb24gYW4gaW5zdGFuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlQW5kTGlua1Byb3BzKHZtLCBlbCwgcHJvcHMsIHNjb3BlKSB7XG5cdCAgdmFyIHByb3BzTGlua0ZuID0gY29tcGlsZVByb3BzKGVsLCBwcm9wcywgdm0pO1xuXHQgIHZhciBwcm9wRGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uICgpIHtcblx0ICAgIHByb3BzTGlua0ZuKHZtLCBzY29wZSk7XG5cdCAgfSwgdm0pO1xuXHQgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIHByb3BEaXJzKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgdGhlIHJvb3QgZWxlbWVudCBvZiBhbiBpbnN0YW5jZS5cblx0ICpcblx0ICogMS4gYXR0cnMgb24gY29udGV4dCBjb250YWluZXIgKGNvbnRleHQgc2NvcGUpXG5cdCAqIDIuIGF0dHJzIG9uIHRoZSBjb21wb25lbnQgdGVtcGxhdGUgcm9vdCBub2RlLCBpZlxuXHQgKiAgICByZXBsYWNlOnRydWUgKGNoaWxkIHNjb3BlKVxuXHQgKlxuXHQgKiBJZiB0aGlzIGlzIGEgZnJhZ21lbnQgaW5zdGFuY2UsIHdlIG9ubHkgbmVlZCB0byBjb21waWxlIDEuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRPcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVSb290KGVsLCBvcHRpb25zLCBjb250ZXh0T3B0aW9ucykge1xuXHQgIHZhciBjb250YWluZXJBdHRycyA9IG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzO1xuXHQgIHZhciByZXBsYWNlckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRycztcblx0ICB2YXIgY29udGV4dExpbmtGbiwgcmVwbGFjZXJMaW5rRm47XG5cdFxuXHQgIC8vIG9ubHkgbmVlZCB0byBjb21waWxlIG90aGVyIGF0dHJpYnV0ZXMgZm9yXG5cdCAgLy8gbm9uLWZyYWdtZW50IGluc3RhbmNlc1xuXHQgIGlmIChlbC5ub2RlVHlwZSAhPT0gMTEpIHtcblx0ICAgIC8vIGZvciBjb21wb25lbnRzLCBjb250YWluZXIgYW5kIHJlcGxhY2VyIG5lZWQgdG8gYmVcblx0ICAgIC8vIGNvbXBpbGVkIHNlcGFyYXRlbHkgYW5kIGxpbmtlZCBpbiBkaWZmZXJlbnQgc2NvcGVzLlxuXHQgICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50KSB7XG5cdCAgICAgIC8vIDIuIGNvbnRhaW5lciBhdHRyaWJ1dGVzXG5cdCAgICAgIGlmIChjb250YWluZXJBdHRycyAmJiBjb250ZXh0T3B0aW9ucykge1xuXHQgICAgICAgIGNvbnRleHRMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhjb250YWluZXJBdHRycywgY29udGV4dE9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChyZXBsYWNlckF0dHJzKSB7XG5cdCAgICAgICAgLy8gMy4gcmVwbGFjZXIgYXR0cmlidXRlc1xuXHQgICAgICAgIHJlcGxhY2VyTGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMocmVwbGFjZXJBdHRycywgb3B0aW9ucyk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIG5vbi1jb21wb25lbnQsIGp1c3QgY29tcGlsZSBhcyBhIG5vcm1hbCBlbGVtZW50LlxuXHQgICAgICByZXBsYWNlckxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGVsLmF0dHJpYnV0ZXMsIG9wdGlvbnMpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb250YWluZXJBdHRycykge1xuXHQgICAgLy8gd2FybiBjb250YWluZXIgZGlyZWN0aXZlcyBmb3IgZnJhZ21lbnQgaW5zdGFuY2VzXG5cdCAgICB2YXIgbmFtZXMgPSBjb250YWluZXJBdHRycy5maWx0ZXIoZnVuY3Rpb24gKGF0dHIpIHtcblx0ICAgICAgLy8gYWxsb3cgdnVlLWxvYWRlci92dWVpZnkgc2NvcGVkIGNzcyBhdHRyaWJ1dGVzXG5cdCAgICAgIHJldHVybiBhdHRyLm5hbWUuaW5kZXhPZignX3YtJykgPCAwICYmXG5cdCAgICAgIC8vIGFsbG93IGV2ZW50IGxpc3RlbmVyc1xuXHQgICAgICAhb25SRS50ZXN0KGF0dHIubmFtZSkgJiZcblx0ICAgICAgLy8gYWxsb3cgc2xvdHNcblx0ICAgICAgYXR0ci5uYW1lICE9PSAnc2xvdCc7XG5cdCAgICB9KS5tYXAoZnVuY3Rpb24gKGF0dHIpIHtcblx0ICAgICAgcmV0dXJuICdcIicgKyBhdHRyLm5hbWUgKyAnXCInO1xuXHQgICAgfSk7XG5cdCAgICBpZiAobmFtZXMubGVuZ3RoKSB7XG5cdCAgICAgIHZhciBwbHVyYWwgPSBuYW1lcy5sZW5ndGggPiAxO1xuXHQgICAgICB3YXJuKCdBdHRyaWJ1dGUnICsgKHBsdXJhbCA/ICdzICcgOiAnICcpICsgbmFtZXMuam9pbignLCAnKSArIChwbHVyYWwgPyAnIGFyZScgOiAnIGlzJykgKyAnIGlnbm9yZWQgb24gY29tcG9uZW50ICcgKyAnPCcgKyBvcHRpb25zLmVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICc+IGJlY2F1c2UgJyArICd0aGUgY29tcG9uZW50IGlzIGEgZnJhZ21lbnQgaW5zdGFuY2U6ICcgKyAnaHR0cDovL3Z1ZWpzLm9yZy9ndWlkZS9jb21wb25lbnRzLmh0bWwjRnJhZ21lbnQtSW5zdGFuY2UnKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRycyA9IG51bGw7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHJvb3RMaW5rRm4odm0sIGVsLCBzY29wZSkge1xuXHQgICAgLy8gbGluayBjb250ZXh0IHNjb3BlIGRpcnNcblx0ICAgIHZhciBjb250ZXh0ID0gdm0uX2NvbnRleHQ7XG5cdCAgICB2YXIgY29udGV4dERpcnM7XG5cdCAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0TGlua0ZuKSB7XG5cdCAgICAgIGNvbnRleHREaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGNvbnRleHRMaW5rRm4oY29udGV4dCwgZWwsIG51bGwsIHNjb3BlKTtcblx0ICAgICAgfSwgY29udGV4dCk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gbGluayBzZWxmXG5cdCAgICB2YXIgc2VsZkRpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChyZXBsYWNlckxpbmtGbikgcmVwbGFjZXJMaW5rRm4odm0sIGVsKTtcblx0ICAgIH0sIHZtKTtcblx0XG5cdCAgICAvLyByZXR1cm4gdGhlIHVubGluayBmdW5jdGlvbiB0aGF0IHRlYXJzZG93biBjb250ZXh0XG5cdCAgICAvLyBjb250YWluZXIgZGlyZWN0aXZlcy5cblx0ICAgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIHNlbGZEaXJzLCBjb250ZXh0LCBjb250ZXh0RGlycyk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYSBub2RlIGFuZCByZXR1cm4gYSBub2RlTGlua0ZuIGJhc2VkIG9uIHRoZVxuXHQgKiBub2RlIHR5cGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVOb2RlKG5vZGUsIG9wdGlvbnMpIHtcblx0ICB2YXIgdHlwZSA9IG5vZGUubm9kZVR5cGU7XG5cdCAgaWYgKHR5cGUgPT09IDEgJiYgIWlzU2NyaXB0KG5vZGUpKSB7XG5cdCAgICByZXR1cm4gY29tcGlsZUVsZW1lbnQobm9kZSwgb3B0aW9ucyk7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSAzICYmIG5vZGUuZGF0YS50cmltKCkpIHtcblx0ICAgIHJldHVybiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYW4gZWxlbWVudCBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVFbGVtZW50KGVsLCBvcHRpb25zKSB7XG5cdCAgLy8gcHJlcHJvY2VzcyB0ZXh0YXJlYXMuXG5cdCAgLy8gdGV4dGFyZWEgdHJlYXRzIGl0cyB0ZXh0IGNvbnRlbnQgYXMgdGhlIGluaXRpYWwgdmFsdWUuXG5cdCAgLy8ganVzdCBiaW5kIGl0IGFzIGFuIGF0dHIgZGlyZWN0aXZlIGZvciB2YWx1ZS5cblx0ICBpZiAoZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuXHQgICAgdmFyIHRva2VucyA9IHBhcnNlVGV4dChlbC52YWx1ZSk7XG5cdCAgICBpZiAodG9rZW5zKSB7XG5cdCAgICAgIGVsLnNldEF0dHJpYnV0ZSgnOnZhbHVlJywgdG9rZW5zVG9FeHAodG9rZW5zKSk7XG5cdCAgICAgIGVsLnZhbHVlID0gJyc7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciBsaW5rRm47XG5cdCAgdmFyIGhhc0F0dHJzID0gZWwuaGFzQXR0cmlidXRlcygpO1xuXHQgIHZhciBhdHRycyA9IGhhc0F0dHJzICYmIHRvQXJyYXkoZWwuYXR0cmlidXRlcyk7XG5cdCAgLy8gY2hlY2sgdGVybWluYWwgZGlyZWN0aXZlcyAoZm9yICYgaWYpXG5cdCAgaWYgKGhhc0F0dHJzKSB7XG5cdCAgICBsaW5rRm4gPSBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyhlbCwgYXR0cnMsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICAvLyBjaGVjayBlbGVtZW50IGRpcmVjdGl2ZXNcblx0ICBpZiAoIWxpbmtGbikge1xuXHQgICAgbGlua0ZuID0gY2hlY2tFbGVtZW50RGlyZWN0aXZlcyhlbCwgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIC8vIGNoZWNrIGNvbXBvbmVudFxuXHQgIGlmICghbGlua0ZuKSB7XG5cdCAgICBsaW5rRm4gPSBjaGVja0NvbXBvbmVudChlbCwgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIC8vIG5vcm1hbCBkaXJlY3RpdmVzXG5cdCAgaWYgKCFsaW5rRm4gJiYgaGFzQXR0cnMpIHtcblx0ICAgIGxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGF0dHJzLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgcmV0dXJuIGxpbmtGbjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYSB0ZXh0Tm9kZSBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbi5cblx0ICpcblx0ICogQHBhcmFtIHtUZXh0Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfSB0ZXh0Tm9kZUxpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVUZXh0Tm9kZShub2RlLCBvcHRpb25zKSB7XG5cdCAgLy8gc2tpcCBtYXJrZWQgdGV4dCBub2Rlc1xuXHQgIGlmIChub2RlLl9za2lwKSB7XG5cdCAgICByZXR1cm4gcmVtb3ZlVGV4dDtcblx0ICB9XG5cdFxuXHQgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQobm9kZS53aG9sZVRleHQpO1xuXHQgIGlmICghdG9rZW5zKSB7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdFxuXHQgIC8vIG1hcmsgYWRqYWNlbnQgdGV4dCBub2RlcyBhcyBza2lwcGVkLFxuXHQgIC8vIGJlY2F1c2Ugd2UgYXJlIHVzaW5nIG5vZGUud2hvbGVUZXh0IHRvIGNvbXBpbGVcblx0ICAvLyBhbGwgYWRqYWNlbnQgdGV4dCBub2RlcyB0b2dldGhlci4gVGhpcyBmaXhlc1xuXHQgIC8vIGlzc3VlcyBpbiBJRSB3aGVyZSBzb21ldGltZXMgaXQgc3BsaXRzIHVwIGEgc2luZ2xlXG5cdCAgLy8gdGV4dCBub2RlIGludG8gbXVsdGlwbGUgb25lcy5cblx0ICB2YXIgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG5cdCAgd2hpbGUgKG5leHQgJiYgbmV4dC5ub2RlVHlwZSA9PT0gMykge1xuXHQgICAgbmV4dC5fc2tpcCA9IHRydWU7XG5cdCAgICBuZXh0ID0gbmV4dC5uZXh0U2libGluZztcblx0ICB9XG5cdFxuXHQgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXHQgIHZhciBlbCwgdG9rZW47XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSB0b2tlbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICB0b2tlbiA9IHRva2Vuc1tpXTtcblx0ICAgIGVsID0gdG9rZW4udGFnID8gcHJvY2Vzc1RleHRUb2tlbih0b2tlbiwgb3B0aW9ucykgOiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0b2tlbi52YWx1ZSk7XG5cdCAgICBmcmFnLmFwcGVuZENoaWxkKGVsKTtcblx0ICB9XG5cdCAgcmV0dXJuIG1ha2VUZXh0Tm9kZUxpbmtGbih0b2tlbnMsIGZyYWcsIG9wdGlvbnMpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTGlua2VyIGZvciBhbiBza2lwcGVkIHRleHQgbm9kZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7VGV4dH0gbm9kZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZVRleHQodm0sIG5vZGUpIHtcblx0ICByZW1vdmUobm9kZSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcm9jZXNzIGEgc2luZ2xlIHRleHQgdG9rZW4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB0b2tlblxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtOb2RlfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NUZXh0VG9rZW4odG9rZW4sIG9wdGlvbnMpIHtcblx0ICB2YXIgZWw7XG5cdCAgaWYgKHRva2VuLm9uZVRpbWUpIHtcblx0ICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodG9rZW4udmFsdWUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBpZiAodG9rZW4uaHRtbCkge1xuXHQgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJ3YtaHRtbCcpO1xuXHQgICAgICBzZXRUb2tlblR5cGUoJ2h0bWwnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIElFIHdpbGwgY2xlYW4gdXAgZW1wdHkgdGV4dE5vZGVzIGR1cmluZ1xuXHQgICAgICAvLyBmcmFnLmNsb25lTm9kZSh0cnVlKSwgc28gd2UgaGF2ZSB0byBnaXZlIGl0XG5cdCAgICAgIC8vIHNvbWV0aGluZyBoZXJlLi4uXG5cdCAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJyAnKTtcblx0ICAgICAgc2V0VG9rZW5UeXBlKCd0ZXh0Jyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGZ1bmN0aW9uIHNldFRva2VuVHlwZSh0eXBlKSB7XG5cdCAgICBpZiAodG9rZW4uZGVzY3JpcHRvcikgcmV0dXJuO1xuXHQgICAgdmFyIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKHRva2VuLnZhbHVlKTtcblx0ICAgIHRva2VuLmRlc2NyaXB0b3IgPSB7XG5cdCAgICAgIG5hbWU6IHR5cGUsXG5cdCAgICAgIGRlZjogZGlyZWN0aXZlc1t0eXBlXSxcblx0ICAgICAgZXhwcmVzc2lvbjogcGFyc2VkLmV4cHJlc3Npb24sXG5cdCAgICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzXG5cdCAgICB9O1xuXHQgIH1cblx0ICByZXR1cm4gZWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBCdWlsZCBhIGZ1bmN0aW9uIHRoYXQgcHJvY2Vzc2VzIGEgdGV4dE5vZGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gdG9rZW5zXG5cdCAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VUZXh0Tm9kZUxpbmtGbih0b2tlbnMsIGZyYWcpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gdGV4dE5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSkge1xuXHQgICAgdmFyIGZyYWdDbG9uZSA9IGZyYWcuY2xvbmVOb2RlKHRydWUpO1xuXHQgICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KGZyYWdDbG9uZS5jaGlsZE5vZGVzKTtcblx0ICAgIHZhciB0b2tlbiwgdmFsdWUsIG5vZGU7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRva2Vucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdG9rZW4gPSB0b2tlbnNbaV07XG5cdCAgICAgIHZhbHVlID0gdG9rZW4udmFsdWU7XG5cdCAgICAgIGlmICh0b2tlbi50YWcpIHtcblx0ICAgICAgICBub2RlID0gY2hpbGROb2Rlc1tpXTtcblx0ICAgICAgICBpZiAodG9rZW4ub25lVGltZSkge1xuXHQgICAgICAgICAgdmFsdWUgPSAoc2NvcGUgfHwgdm0pLiRldmFsKHZhbHVlKTtcblx0ICAgICAgICAgIGlmICh0b2tlbi5odG1sKSB7XG5cdCAgICAgICAgICAgIHJlcGxhY2Uobm9kZSwgcGFyc2VUZW1wbGF0ZSh2YWx1ZSwgdHJ1ZSkpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgbm9kZS5kYXRhID0gX3RvU3RyaW5nKHZhbHVlKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdm0uX2JpbmREaXIodG9rZW4uZGVzY3JpcHRvciwgbm9kZSwgaG9zdCwgc2NvcGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmVwbGFjZShlbCwgZnJhZ0Nsb25lKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBhIG5vZGUgbGlzdCBhbmQgcmV0dXJuIGEgY2hpbGRMaW5rRm4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVMaXN0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlTm9kZUxpc3Qobm9kZUxpc3QsIG9wdGlvbnMpIHtcblx0ICB2YXIgbGlua0ZucyA9IFtdO1xuXHQgIHZhciBub2RlTGlua0ZuLCBjaGlsZExpbmtGbiwgbm9kZTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVMaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgbm9kZSA9IG5vZGVMaXN0W2ldO1xuXHQgICAgbm9kZUxpbmtGbiA9IGNvbXBpbGVOb2RlKG5vZGUsIG9wdGlvbnMpO1xuXHQgICAgY2hpbGRMaW5rRm4gPSAhKG5vZGVMaW5rRm4gJiYgbm9kZUxpbmtGbi50ZXJtaW5hbCkgJiYgbm9kZS50YWdOYW1lICE9PSAnU0NSSVBUJyAmJiBub2RlLmhhc0NoaWxkTm9kZXMoKSA/IGNvbXBpbGVOb2RlTGlzdChub2RlLmNoaWxkTm9kZXMsIG9wdGlvbnMpIDogbnVsbDtcblx0ICAgIGxpbmtGbnMucHVzaChub2RlTGlua0ZuLCBjaGlsZExpbmtGbik7XG5cdCAgfVxuXHQgIHJldHVybiBsaW5rRm5zLmxlbmd0aCA/IG1ha2VDaGlsZExpbmtGbihsaW5rRm5zKSA6IG51bGw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNYWtlIGEgY2hpbGQgbGluayBmdW5jdGlvbiBmb3IgYSBub2RlJ3MgY2hpbGROb2Rlcy5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheTxGdW5jdGlvbj59IGxpbmtGbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb259IGNoaWxkTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZUNoaWxkTGlua0ZuKGxpbmtGbnMpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gY2hpbGRMaW5rRm4odm0sIG5vZGVzLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgdmFyIG5vZGUsIG5vZGVMaW5rRm4sIGNoaWxkcmVuTGlua0ZuO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIG4gPSAwLCBsID0gbGlua0Zucy5sZW5ndGg7IGkgPCBsOyBuKyspIHtcblx0ICAgICAgbm9kZSA9IG5vZGVzW25dO1xuXHQgICAgICBub2RlTGlua0ZuID0gbGlua0Zuc1tpKytdO1xuXHQgICAgICBjaGlsZHJlbkxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcblx0ICAgICAgLy8gY2FjaGUgY2hpbGROb2RlcyBiZWZvcmUgbGlua2luZyBwYXJlbnQsIGZpeCAjNjU3XG5cdCAgICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShub2RlLmNoaWxkTm9kZXMpO1xuXHQgICAgICBpZiAobm9kZUxpbmtGbikge1xuXHQgICAgICAgIG5vZGVMaW5rRm4odm0sIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoY2hpbGRyZW5MaW5rRm4pIHtcblx0ICAgICAgICBjaGlsZHJlbkxpbmtGbih2bSwgY2hpbGROb2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGZvciBlbGVtZW50IGRpcmVjdGl2ZXMgKGN1c3RvbSBlbGVtZW50cyB0aGF0IHNob3VsZFxuXHQgKiBiZSByZXNvdmxlZCBhcyB0ZXJtaW5hbCBkaXJlY3RpdmVzKS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNoZWNrRWxlbWVudERpcmVjdGl2ZXMoZWwsIG9wdGlvbnMpIHtcblx0ICB2YXIgdGFnID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHQgIGlmIChjb21tb25UYWdSRS50ZXN0KHRhZykpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIGRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZWxlbWVudERpcmVjdGl2ZXMnLCB0YWcpO1xuXHQgIGlmIChkZWYpIHtcblx0ICAgIHJldHVybiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCB0YWcsICcnLCBvcHRpb25zLCBkZWYpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSBjb21wb25lbnQuIElmIHllcywgcmV0dXJuXG5cdCAqIGEgY29tcG9uZW50IGxpbmsgZnVuY3Rpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNoZWNrQ29tcG9uZW50KGVsLCBvcHRpb25zKSB7XG5cdCAgdmFyIGNvbXBvbmVudCA9IGNoZWNrQ29tcG9uZW50QXR0cihlbCwgb3B0aW9ucyk7XG5cdCAgaWYgKGNvbXBvbmVudCkge1xuXHQgICAgdmFyIHJlZiA9IGZpbmRSZWYoZWwpO1xuXHQgICAgdmFyIGRlc2NyaXB0b3IgPSB7XG5cdCAgICAgIG5hbWU6ICdjb21wb25lbnQnLFxuXHQgICAgICByZWY6IHJlZixcblx0ICAgICAgZXhwcmVzc2lvbjogY29tcG9uZW50LmlkLFxuXHQgICAgICBkZWY6IGludGVybmFsRGlyZWN0aXZlcy5jb21wb25lbnQsXG5cdCAgICAgIG1vZGlmaWVyczoge1xuXHQgICAgICAgIGxpdGVyYWw6ICFjb21wb25lbnQuZHluYW1pY1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgdmFyIGNvbXBvbmVudExpbmtGbiA9IGZ1bmN0aW9uIGNvbXBvbmVudExpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICAgIGlmIChyZWYpIHtcblx0ICAgICAgICBkZWZpbmVSZWFjdGl2ZSgoc2NvcGUgfHwgdm0pLiRyZWZzLCByZWYsIG51bGwpO1xuXHQgICAgICB9XG5cdCAgICAgIHZtLl9iaW5kRGlyKGRlc2NyaXB0b3IsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgICB9O1xuXHQgICAgY29tcG9uZW50TGlua0ZuLnRlcm1pbmFsID0gdHJ1ZTtcblx0ICAgIHJldHVybiBjb21wb25lbnRMaW5rRm47XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgYW4gZWxlbWVudCBmb3IgdGVybWluYWwgZGlyZWN0aXZlcyBpbiBmaXhlZCBvcmRlci5cblx0ICogSWYgaXQgZmluZHMgb25lLCByZXR1cm4gYSB0ZXJtaW5hbCBsaW5rIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGF0dHJzXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0ZXJtaW5hbExpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNoZWNrVGVybWluYWxEaXJlY3RpdmVzKGVsLCBhdHRycywgb3B0aW9ucykge1xuXHQgIC8vIHNraXAgdi1wcmVcblx0ICBpZiAoZ2V0QXR0cihlbCwgJ3YtcHJlJykgIT09IG51bGwpIHtcblx0ICAgIHJldHVybiBza2lwO1xuXHQgIH1cblx0ICAvLyBza2lwIHYtZWxzZSBibG9jaywgYnV0IG9ubHkgaWYgZm9sbG93aW5nIHYtaWZcblx0ICBpZiAoZWwuaGFzQXR0cmlidXRlKCd2LWVsc2UnKSkge1xuXHQgICAgdmFyIHByZXYgPSBlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuXHQgICAgaWYgKHByZXYgJiYgcHJldi5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuXHQgICAgICByZXR1cm4gc2tpcDtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHZhciBhdHRyLCBuYW1lLCB2YWx1ZSwgbW9kaWZpZXJzLCBtYXRjaGVkLCBkaXJOYW1lLCByYXdOYW1lLCBhcmcsIGRlZiwgdGVybURlZjtcblx0ICBmb3IgKHZhciBpID0gMCwgaiA9IGF0dHJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHQgICAgYXR0ciA9IGF0dHJzW2ldO1xuXHQgICAgbmFtZSA9IGF0dHIubmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKTtcblx0ICAgIGlmIChtYXRjaGVkID0gbmFtZS5tYXRjaChkaXJBdHRyUkUpKSB7XG5cdCAgICAgIGRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZGlyZWN0aXZlcycsIG1hdGNoZWRbMV0pO1xuXHQgICAgICBpZiAoZGVmICYmIGRlZi50ZXJtaW5hbCkge1xuXHQgICAgICAgIGlmICghdGVybURlZiB8fCAoZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfVEVSTUlOQUxfUFJJT1JJVFkpID4gdGVybURlZi5wcmlvcml0eSkge1xuXHQgICAgICAgICAgdGVybURlZiA9IGRlZjtcblx0ICAgICAgICAgIHJhd05hbWUgPSBhdHRyLm5hbWU7XG5cdCAgICAgICAgICBtb2RpZmllcnMgPSBwYXJzZU1vZGlmaWVycyhhdHRyLm5hbWUpO1xuXHQgICAgICAgICAgdmFsdWUgPSBhdHRyLnZhbHVlO1xuXHQgICAgICAgICAgZGlyTmFtZSA9IG1hdGNoZWRbMV07XG5cdCAgICAgICAgICBhcmcgPSBtYXRjaGVkWzJdO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKHRlcm1EZWYpIHtcblx0ICAgIHJldHVybiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCBkaXJOYW1lLCB2YWx1ZSwgb3B0aW9ucywgdGVybURlZiwgcmF3TmFtZSwgYXJnLCBtb2RpZmllcnMpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gc2tpcCgpIHt9XG5cdHNraXAudGVybWluYWwgPSB0cnVlO1xuXHRcblx0LyoqXG5cdCAqIEJ1aWxkIGEgbm9kZSBsaW5rIGZ1bmN0aW9uIGZvciBhIHRlcm1pbmFsIGRpcmVjdGl2ZS5cblx0ICogQSB0ZXJtaW5hbCBsaW5rIGZ1bmN0aW9uIHRlcm1pbmF0ZXMgdGhlIGN1cnJlbnRcblx0ICogY29tcGlsYXRpb24gcmVjdXJzaW9uIGFuZCBoYW5kbGVzIGNvbXBpbGF0aW9uIG9mIHRoZVxuXHQgKiBzdWJ0cmVlIGluIHRoZSBkaXJlY3RpdmUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGRpck5hbWVcblx0ICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBkZWZcblx0ICogQHBhcmFtIHtTdHJpbmd9IFtyYXdOYW1lXVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW2FyZ11cblx0ICogQHBhcmFtIHtPYmplY3R9IFttb2RpZmllcnNdXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0ZXJtaW5hbExpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIGRpck5hbWUsIHZhbHVlLCBvcHRpb25zLCBkZWYsIHJhd05hbWUsIGFyZywgbW9kaWZpZXJzKSB7XG5cdCAgdmFyIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcblx0ICB2YXIgZGVzY3JpcHRvciA9IHtcblx0ICAgIG5hbWU6IGRpck5hbWUsXG5cdCAgICBhcmc6IGFyZyxcblx0ICAgIGV4cHJlc3Npb246IHBhcnNlZC5leHByZXNzaW9uLFxuXHQgICAgZmlsdGVyczogcGFyc2VkLmZpbHRlcnMsXG5cdCAgICByYXc6IHZhbHVlLFxuXHQgICAgYXR0cjogcmF3TmFtZSxcblx0ICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLFxuXHQgICAgZGVmOiBkZWZcblx0ICB9O1xuXHQgIC8vIGNoZWNrIHJlZiBmb3Igdi1mb3IgYW5kIHJvdXRlci12aWV3XG5cdCAgaWYgKGRpck5hbWUgPT09ICdmb3InIHx8IGRpck5hbWUgPT09ICdyb3V0ZXItdmlldycpIHtcblx0ICAgIGRlc2NyaXB0b3IucmVmID0gZmluZFJlZihlbCk7XG5cdCAgfVxuXHQgIHZhciBmbiA9IGZ1bmN0aW9uIHRlcm1pbmFsTm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICBpZiAoZGVzY3JpcHRvci5yZWYpIHtcblx0ICAgICAgZGVmaW5lUmVhY3RpdmUoKHNjb3BlIHx8IHZtKS4kcmVmcywgZGVzY3JpcHRvci5yZWYsIG51bGwpO1xuXHQgICAgfVxuXHQgICAgdm0uX2JpbmREaXIoZGVzY3JpcHRvciwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICB9O1xuXHQgIGZuLnRlcm1pbmFsID0gdHJ1ZTtcblx0ICByZXR1cm4gZm47XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIHRoZSBkaXJlY3RpdmVzIG9uIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIGxpbmtlci5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheXxOYW1lZE5vZGVNYXB9IGF0dHJzXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVEaXJlY3RpdmVzKGF0dHJzLCBvcHRpb25zKSB7XG5cdCAgdmFyIGkgPSBhdHRycy5sZW5ndGg7XG5cdCAgdmFyIGRpcnMgPSBbXTtcblx0ICB2YXIgYXR0ciwgbmFtZSwgdmFsdWUsIHJhd05hbWUsIHJhd1ZhbHVlLCBkaXJOYW1lLCBhcmcsIG1vZGlmaWVycywgZGlyRGVmLCB0b2tlbnMsIG1hdGNoZWQ7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgYXR0ciA9IGF0dHJzW2ldO1xuXHQgICAgbmFtZSA9IHJhd05hbWUgPSBhdHRyLm5hbWU7XG5cdCAgICB2YWx1ZSA9IHJhd1ZhbHVlID0gYXR0ci52YWx1ZTtcblx0ICAgIHRva2VucyA9IHBhcnNlVGV4dCh2YWx1ZSk7XG5cdCAgICAvLyByZXNldCBhcmdcblx0ICAgIGFyZyA9IG51bGw7XG5cdCAgICAvLyBjaGVjayBtb2RpZmllcnNcblx0ICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKG5hbWUpO1xuXHQgICAgbmFtZSA9IG5hbWUucmVwbGFjZShtb2RpZmllclJFLCAnJyk7XG5cdFxuXHQgICAgLy8gYXR0cmlidXRlIGludGVycG9sYXRpb25zXG5cdCAgICBpZiAodG9rZW5zKSB7XG5cdCAgICAgIHZhbHVlID0gdG9rZW5zVG9FeHAodG9rZW5zKTtcblx0ICAgICAgYXJnID0gbmFtZTtcblx0ICAgICAgcHVzaERpcignYmluZCcsIGRpcmVjdGl2ZXMuYmluZCwgdG9rZW5zKTtcblx0ICAgICAgLy8gd2FybiBhZ2FpbnN0IG1peGluZyBtdXN0YWNoZXMgd2l0aCB2LWJpbmRcblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICBpZiAobmFtZSA9PT0gJ2NsYXNzJyAmJiBBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGF0dHJzLCBmdW5jdGlvbiAoYXR0cikge1xuXHQgICAgICAgICAgcmV0dXJuIGF0dHIubmFtZSA9PT0gJzpjbGFzcycgfHwgYXR0ci5uYW1lID09PSAndi1iaW5kOmNsYXNzJztcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgd2FybignY2xhc3M9XCInICsgcmF3VmFsdWUgKyAnXCI6IERvIG5vdCBtaXggbXVzdGFjaGUgaW50ZXJwb2xhdGlvbiAnICsgJ2FuZCB2LWJpbmQgZm9yIFwiY2xhc3NcIiBvbiB0aGUgc2FtZSBlbGVtZW50LiBVc2Ugb25lIG9yIHRoZSBvdGhlci4nLCBvcHRpb25zKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZVxuXHRcblx0ICAgICAgLy8gc3BlY2lhbCBhdHRyaWJ1dGU6IHRyYW5zaXRpb25cblx0ICAgICAgaWYgKHRyYW5zaXRpb25SRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgbW9kaWZpZXJzLmxpdGVyYWwgPSAhYmluZFJFLnRlc3QobmFtZSk7XG5cdCAgICAgICAgcHVzaERpcigndHJhbnNpdGlvbicsIGludGVybmFsRGlyZWN0aXZlcy50cmFuc2l0aW9uKTtcblx0ICAgICAgfSBlbHNlXG5cdFxuXHQgICAgICAgIC8vIGV2ZW50IGhhbmRsZXJzXG5cdCAgICAgICAgaWYgKG9uUkUudGVzdChuYW1lKSkge1xuXHQgICAgICAgICAgYXJnID0gbmFtZS5yZXBsYWNlKG9uUkUsICcnKTtcblx0ICAgICAgICAgIHB1c2hEaXIoJ29uJywgZGlyZWN0aXZlcy5vbik7XG5cdCAgICAgICAgfSBlbHNlXG5cdFxuXHQgICAgICAgICAgLy8gYXR0cmlidXRlIGJpbmRpbmdzXG5cdCAgICAgICAgICBpZiAoYmluZFJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICAgICAgZGlyTmFtZSA9IG5hbWUucmVwbGFjZShiaW5kUkUsICcnKTtcblx0ICAgICAgICAgICAgaWYgKGRpck5hbWUgPT09ICdzdHlsZScgfHwgZGlyTmFtZSA9PT0gJ2NsYXNzJykge1xuXHQgICAgICAgICAgICAgIHB1c2hEaXIoZGlyTmFtZSwgaW50ZXJuYWxEaXJlY3RpdmVzW2Rpck5hbWVdKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICBhcmcgPSBkaXJOYW1lO1xuXHQgICAgICAgICAgICAgIHB1c2hEaXIoJ2JpbmQnLCBkaXJlY3RpdmVzLmJpbmQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9IGVsc2Vcblx0XG5cdCAgICAgICAgICAgIC8vIG5vcm1hbCBkaXJlY3RpdmVzXG5cdCAgICAgICAgICAgIGlmIChtYXRjaGVkID0gbmFtZS5tYXRjaChkaXJBdHRyUkUpKSB7XG5cdCAgICAgICAgICAgICAgZGlyTmFtZSA9IG1hdGNoZWRbMV07XG5cdCAgICAgICAgICAgICAgYXJnID0gbWF0Y2hlZFsyXTtcblx0XG5cdCAgICAgICAgICAgICAgLy8gc2tpcCB2LWVsc2UgKHdoZW4gdXNlZCB3aXRoIHYtc2hvdylcblx0ICAgICAgICAgICAgICBpZiAoZGlyTmFtZSA9PT0gJ2Vsc2UnKSB7XG5cdCAgICAgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgIGRpckRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZGlyZWN0aXZlcycsIGRpck5hbWUsIHRydWUpO1xuXHQgICAgICAgICAgICAgIGlmIChkaXJEZWYpIHtcblx0ICAgICAgICAgICAgICAgIHB1c2hEaXIoZGlyTmFtZSwgZGlyRGVmKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFB1c2ggYSBkaXJlY3RpdmUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZGlyTmFtZVxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSBkZWZcblx0ICAgKiBAcGFyYW0ge0FycmF5fSBbaW50ZXJwVG9rZW5zXVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBwdXNoRGlyKGRpck5hbWUsIGRlZiwgaW50ZXJwVG9rZW5zKSB7XG5cdCAgICB2YXIgaGFzT25lVGltZVRva2VuID0gaW50ZXJwVG9rZW5zICYmIGhhc09uZVRpbWUoaW50ZXJwVG9rZW5zKTtcblx0ICAgIHZhciBwYXJzZWQgPSAhaGFzT25lVGltZVRva2VuICYmIHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcblx0ICAgIGRpcnMucHVzaCh7XG5cdCAgICAgIG5hbWU6IGRpck5hbWUsXG5cdCAgICAgIGF0dHI6IHJhd05hbWUsXG5cdCAgICAgIHJhdzogcmF3VmFsdWUsXG5cdCAgICAgIGRlZjogZGVmLFxuXHQgICAgICBhcmc6IGFyZyxcblx0ICAgICAgbW9kaWZpZXJzOiBtb2RpZmllcnMsXG5cdCAgICAgIC8vIGNvbnZlcnNpb24gZnJvbSBpbnRlcnBvbGF0aW9uIHN0cmluZ3Mgd2l0aCBvbmUtdGltZSB0b2tlblxuXHQgICAgICAvLyB0byBleHByZXNzaW9uIGlzIGRpZmZlcmVkIHVudGlsIGRpcmVjdGl2ZSBiaW5kIHRpbWUgc28gdGhhdCB3ZVxuXHQgICAgICAvLyBoYXZlIGFjY2VzcyB0byB0aGUgYWN0dWFsIHZtIGNvbnRleHQgZm9yIG9uZS10aW1lIGJpbmRpbmdzLlxuXHQgICAgICBleHByZXNzaW9uOiBwYXJzZWQgJiYgcGFyc2VkLmV4cHJlc3Npb24sXG5cdCAgICAgIGZpbHRlcnM6IHBhcnNlZCAmJiBwYXJzZWQuZmlsdGVycyxcblx0ICAgICAgaW50ZXJwOiBpbnRlcnBUb2tlbnMsXG5cdCAgICAgIGhhc09uZVRpbWU6IGhhc09uZVRpbWVUb2tlblxuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICBpZiAoZGlycy5sZW5ndGgpIHtcblx0ICAgIHJldHVybiBtYWtlTm9kZUxpbmtGbihkaXJzKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBtb2RpZmllcnMgZnJvbSBkaXJlY3RpdmUgYXR0cmlidXRlIG5hbWUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZU1vZGlmaWVycyhuYW1lKSB7XG5cdCAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgdmFyIG1hdGNoID0gbmFtZS5tYXRjaChtb2RpZmllclJFKTtcblx0ICBpZiAobWF0Y2gpIHtcblx0ICAgIHZhciBpID0gbWF0Y2gubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICByZXNbbWF0Y2hbaV0uc2xpY2UoMSldID0gdHJ1ZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEJ1aWxkIGEgbGluayBmdW5jdGlvbiBmb3IgYWxsIGRpcmVjdGl2ZXMgb24gYSBzaW5nbGUgbm9kZS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gZGlyZWN0aXZlc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gZGlyZWN0aXZlc0xpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VOb2RlTGlua0ZuKGRpcmVjdGl2ZXMpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gbm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICAvLyByZXZlcnNlIGFwcGx5IGJlY2F1c2UgaXQncyBzb3J0ZWQgbG93IHRvIGhpZ2hcblx0ICAgIHZhciBpID0gZGlyZWN0aXZlcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZtLl9iaW5kRGlyKGRpcmVjdGl2ZXNbaV0sIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGludGVycG9sYXRpb24gc3RyaW5nIGNvbnRhaW5zIG9uZS10aW1lIHRva2Vucy5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gdG9rZW5zXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaGFzT25lVGltZSh0b2tlbnMpIHtcblx0ICB2YXIgaSA9IHRva2Vucy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgaWYgKHRva2Vuc1tpXS5vbmVUaW1lKSByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzU2NyaXB0KGVsKSB7XG5cdCAgcmV0dXJuIGVsLnRhZ05hbWUgPT09ICdTQ1JJUFQnICYmICghZWwuaGFzQXR0cmlidXRlKCd0eXBlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCd0eXBlJykgPT09ICd0ZXh0L2phdmFzY3JpcHQnKTtcblx0fVxuXHRcblx0dmFyIHNwZWNpYWxDaGFyUkUgPSAvW15cXHdcXC06XFwuXS87XG5cdFxuXHQvKipcblx0ICogUHJvY2VzcyBhbiBlbGVtZW50IG9yIGEgRG9jdW1lbnRGcmFnbWVudCBiYXNlZCBvbiBhXG5cdCAqIGluc3RhbmNlIG9wdGlvbiBvYmplY3QuIFRoaXMgYWxsb3dzIHVzIHRvIHRyYW5zY2x1ZGVcblx0ICogYSB0ZW1wbGF0ZSBub2RlL2ZyYWdtZW50IGJlZm9yZSB0aGUgaW5zdGFuY2UgaXMgY3JlYXRlZCxcblx0ICogc28gdGhlIHByb2Nlc3NlZCBmcmFnbWVudCBjYW4gdGhlbiBiZSBjbG9uZWQgYW5kIHJldXNlZFxuXHQgKiBpbiB2LWZvci5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdHJhbnNjbHVkZShlbCwgb3B0aW9ucykge1xuXHQgIC8vIGV4dHJhY3QgY29udGFpbmVyIGF0dHJpYnV0ZXMgdG8gcGFzcyB0aGVtIGRvd25cblx0ICAvLyB0byBjb21waWxlciwgYmVjYXVzZSB0aGV5IG5lZWQgdG8gYmUgY29tcGlsZWQgaW5cblx0ICAvLyBwYXJlbnQgc2NvcGUuIHdlIGFyZSBtdXRhdGluZyB0aGUgb3B0aW9ucyBvYmplY3QgaGVyZVxuXHQgIC8vIGFzc3VtaW5nIHRoZSBzYW1lIG9iamVjdCB3aWxsIGJlIHVzZWQgZm9yIGNvbXBpbGVcblx0ICAvLyByaWdodCBhZnRlciB0aGlzLlxuXHQgIGlmIChvcHRpb25zKSB7XG5cdCAgICBvcHRpb25zLl9jb250YWluZXJBdHRycyA9IGV4dHJhY3RBdHRycyhlbCk7XG5cdCAgfVxuXHQgIC8vIGZvciB0ZW1wbGF0ZSB0YWdzLCB3aGF0IHdlIHdhbnQgaXMgaXRzIGNvbnRlbnQgYXNcblx0ICAvLyBhIGRvY3VtZW50RnJhZ21lbnQgKGZvciBmcmFnbWVudCBpbnN0YW5jZXMpXG5cdCAgaWYgKGlzVGVtcGxhdGUoZWwpKSB7XG5cdCAgICBlbCA9IHBhcnNlVGVtcGxhdGUoZWwpO1xuXHQgIH1cblx0ICBpZiAob3B0aW9ucykge1xuXHQgICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50ICYmICFvcHRpb25zLnRlbXBsYXRlKSB7XG5cdCAgICAgIG9wdGlvbnMudGVtcGxhdGUgPSAnPHNsb3Q+PC9zbG90Pic7XG5cdCAgICB9XG5cdCAgICBpZiAob3B0aW9ucy50ZW1wbGF0ZSkge1xuXHQgICAgICBvcHRpb25zLl9jb250ZW50ID0gZXh0cmFjdENvbnRlbnQoZWwpO1xuXHQgICAgICBlbCA9IHRyYW5zY2x1ZGVUZW1wbGF0ZShlbCwgb3B0aW9ucyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmIChpc0ZyYWdtZW50KGVsKSkge1xuXHQgICAgLy8gYW5jaG9ycyBmb3IgZnJhZ21lbnQgaW5zdGFuY2Vcblx0ICAgIC8vIHBhc3NpbmcgaW4gYHBlcnNpc3Q6IHRydWVgIHRvIGF2b2lkIHRoZW0gYmVpbmdcblx0ICAgIC8vIGRpc2NhcmRlZCBieSBJRSBkdXJpbmcgdGVtcGxhdGUgY2xvbmluZ1xuXHQgICAgcHJlcGVuZChjcmVhdGVBbmNob3IoJ3Ytc3RhcnQnLCB0cnVlKSwgZWwpO1xuXHQgICAgZWwuYXBwZW5kQ2hpbGQoY3JlYXRlQW5jaG9yKCd2LWVuZCcsIHRydWUpKTtcblx0ICB9XG5cdCAgcmV0dXJuIGVsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJvY2VzcyB0aGUgdGVtcGxhdGUgb3B0aW9uLlxuXHQgKiBJZiB0aGUgcmVwbGFjZSBvcHRpb24gaXMgdHJ1ZSB0aGlzIHdpbGwgc3dhcCB0aGUgJGVsLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0cmFuc2NsdWRlVGVtcGxhdGUoZWwsIG9wdGlvbnMpIHtcblx0ICB2YXIgdGVtcGxhdGUgPSBvcHRpb25zLnRlbXBsYXRlO1xuXHQgIHZhciBmcmFnID0gcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgdHJ1ZSk7XG5cdCAgaWYgKGZyYWcpIHtcblx0ICAgIHZhciByZXBsYWNlciA9IGZyYWcuZmlyc3RDaGlsZDtcblx0ICAgIHZhciB0YWcgPSByZXBsYWNlci50YWdOYW1lICYmIHJlcGxhY2VyLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblx0ICAgIGlmIChvcHRpb25zLnJlcGxhY2UpIHtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChlbCA9PT0gZG9jdW1lbnQuYm9keSkge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignWW91IGFyZSBtb3VudGluZyBhbiBpbnN0YW5jZSB3aXRoIGEgdGVtcGxhdGUgdG8gJyArICc8Ym9keT4uIFRoaXMgd2lsbCByZXBsYWNlIDxib2R5PiBlbnRpcmVseS4gWW91ICcgKyAnc2hvdWxkIHByb2JhYmx5IHVzZSBgcmVwbGFjZTogZmFsc2VgIGhlcmUuJyk7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gdGhlcmUgYXJlIG1hbnkgY2FzZXMgd2hlcmUgdGhlIGluc3RhbmNlIG11c3Rcblx0ICAgICAgLy8gYmVjb21lIGEgZnJhZ21lbnQgaW5zdGFuY2U6IGJhc2ljYWxseSBhbnl0aGluZyB0aGF0XG5cdCAgICAgIC8vIGNhbiBjcmVhdGUgbW9yZSB0aGFuIDEgcm9vdCBub2Rlcy5cblx0ICAgICAgaWYgKFxuXHQgICAgICAvLyBtdWx0aS1jaGlsZHJlbiB0ZW1wbGF0ZVxuXHQgICAgICBmcmFnLmNoaWxkTm9kZXMubGVuZ3RoID4gMSB8fFxuXHQgICAgICAvLyBub24tZWxlbWVudCB0ZW1wbGF0ZVxuXHQgICAgICByZXBsYWNlci5ub2RlVHlwZSAhPT0gMSB8fFxuXHQgICAgICAvLyBzaW5nbGUgbmVzdGVkIGNvbXBvbmVudFxuXHQgICAgICB0YWcgPT09ICdjb21wb25lbnQnIHx8IHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykgfHwgaGFzQmluZEF0dHIocmVwbGFjZXIsICdpcycpIHx8XG5cdCAgICAgIC8vIGVsZW1lbnQgZGlyZWN0aXZlXG5cdCAgICAgIHJlc29sdmVBc3NldChvcHRpb25zLCAnZWxlbWVudERpcmVjdGl2ZXMnLCB0YWcpIHx8XG5cdCAgICAgIC8vIGZvciBibG9ja1xuXHQgICAgICByZXBsYWNlci5oYXNBdHRyaWJ1dGUoJ3YtZm9yJykgfHxcblx0ICAgICAgLy8gaWYgYmxvY2tcblx0ICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcblx0ICAgICAgICByZXR1cm4gZnJhZztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBvcHRpb25zLl9yZXBsYWNlckF0dHJzID0gZXh0cmFjdEF0dHJzKHJlcGxhY2VyKTtcblx0ICAgICAgICBtZXJnZUF0dHJzKGVsLCByZXBsYWNlcik7XG5cdCAgICAgICAgcmV0dXJuIHJlcGxhY2VyO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbC5hcHBlbmRDaGlsZChmcmFnKTtcblx0ICAgICAgcmV0dXJuIGVsO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgdGVtcGxhdGUgb3B0aW9uOiAnICsgdGVtcGxhdGUpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEhlbHBlciB0byBleHRyYWN0IGEgY29tcG9uZW50IGNvbnRhaW5lcidzIGF0dHJpYnV0ZXNcblx0ICogaW50byBhIHBsYWluIG9iamVjdCBhcnJheS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcmV0dXJuIHtBcnJheX1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBleHRyYWN0QXR0cnMoZWwpIHtcblx0ICBpZiAoZWwubm9kZVR5cGUgPT09IDEgJiYgZWwuaGFzQXR0cmlidXRlcygpKSB7XG5cdCAgICByZXR1cm4gdG9BcnJheShlbC5hdHRyaWJ1dGVzKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNZXJnZSB0aGUgYXR0cmlidXRlcyBvZiB0d28gZWxlbWVudHMsIGFuZCBtYWtlIHN1cmVcblx0ICogdGhlIGNsYXNzIG5hbWVzIGFyZSBtZXJnZWQgcHJvcGVybHkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZnJvbVxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRvXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWVyZ2VBdHRycyhmcm9tLCB0bykge1xuXHQgIHZhciBhdHRycyA9IGZyb20uYXR0cmlidXRlcztcblx0ICB2YXIgaSA9IGF0dHJzLmxlbmd0aDtcblx0ICB2YXIgbmFtZSwgdmFsdWU7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG5cdCAgICB2YWx1ZSA9IGF0dHJzW2ldLnZhbHVlO1xuXHQgICAgaWYgKCF0by5oYXNBdHRyaWJ1dGUobmFtZSkgJiYgIXNwZWNpYWxDaGFyUkUudGVzdChuYW1lKSkge1xuXHQgICAgICB0by5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuXHQgICAgfSBlbHNlIGlmIChuYW1lID09PSAnY2xhc3MnICYmICFwYXJzZVRleHQodmFsdWUpICYmICh2YWx1ZSA9IHZhbHVlLnRyaW0oKSkpIHtcblx0ICAgICAgdmFsdWUuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcblx0ICAgICAgICBhZGRDbGFzcyh0bywgY2xzKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogU2NhbiBhbmQgZGV0ZXJtaW5lIHNsb3QgY29udGVudCBkaXN0cmlidXRpb24uXG5cdCAqIFdlIGRvIHRoaXMgZHVyaW5nIHRyYW5zY2x1c2lvbiBpbnN0ZWFkIGF0IGNvbXBpbGUgdGltZSBzbyB0aGF0XG5cdCAqIHRoZSBkaXN0cmlidXRpb24gaXMgZGVjb3VwbGVkIGZyb20gdGhlIGNvbXBpbGF0aW9uIG9yZGVyIG9mXG5cdCAqIHRoZSBzbG90cy5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IHRlbXBsYXRlXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gY29udGVudFxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXNvbHZlU2xvdHModm0sIGNvbnRlbnQpIHtcblx0ICBpZiAoIWNvbnRlbnQpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIGNvbnRlbnRzID0gdm0uX3Nsb3RDb250ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgdmFyIGVsLCBuYW1lO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gY29udGVudC5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGVsID0gY29udGVudC5jaGlsZHJlbltpXTtcblx0ICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICBpZiAobmFtZSA9IGVsLmdldEF0dHJpYnV0ZSgnc2xvdCcpKSB7XG5cdCAgICAgIChjb250ZW50c1tuYW1lXSB8fCAoY29udGVudHNbbmFtZV0gPSBbXSkpLnB1c2goZWwpO1xuXHQgICAgfVxuXHQgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgZ2V0QmluZEF0dHIoZWwsICdzbG90JykpIHtcblx0ICAgICAgd2FybignVGhlIFwic2xvdFwiIGF0dHJpYnV0ZSBtdXN0IGJlIHN0YXRpYy4nLCB2bS4kcGFyZW50KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgZm9yIChuYW1lIGluIGNvbnRlbnRzKSB7XG5cdCAgICBjb250ZW50c1tuYW1lXSA9IGV4dHJhY3RGcmFnbWVudChjb250ZW50c1tuYW1lXSwgY29udGVudCk7XG5cdCAgfVxuXHQgIGlmIChjb250ZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xuXHQgICAgdmFyIG5vZGVzID0gY29udGVudC5jaGlsZE5vZGVzO1xuXHQgICAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gMSAmJiBub2Rlc1swXS5ub2RlVHlwZSA9PT0gMyAmJiAhbm9kZXNbMF0uZGF0YS50cmltKCkpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgY29udGVudHNbJ2RlZmF1bHQnXSA9IGV4dHJhY3RGcmFnbWVudChjb250ZW50LmNoaWxkTm9kZXMsIGNvbnRlbnQpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEV4dHJhY3QgcXVhbGlmaWVkIGNvbnRlbnQgbm9kZXMgZnJvbSBhIG5vZGUgbGlzdC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlTGlzdH0gbm9kZXNcblx0ICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBleHRyYWN0RnJhZ21lbnQobm9kZXMsIHBhcmVudCkge1xuXHQgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXHQgIG5vZGVzID0gdG9BcnJheShub2Rlcyk7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHZhciBub2RlID0gbm9kZXNbaV07XG5cdCAgICBpZiAoaXNUZW1wbGF0ZShub2RlKSAmJiAhbm9kZS5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSAmJiAhbm9kZS5oYXNBdHRyaWJ1dGUoJ3YtZm9yJykpIHtcblx0ICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xuXHQgICAgICBub2RlID0gcGFyc2VUZW1wbGF0ZShub2RlLCB0cnVlKTtcblx0ICAgIH1cblx0ICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZSk7XG5cdCAgfVxuXHQgIHJldHVybiBmcmFnO1xuXHR9XG5cdFxuXHRcblx0XG5cdHZhciBjb21waWxlciA9IE9iamVjdC5mcmVlemUoe1xuXHRcdGNvbXBpbGU6IGNvbXBpbGUsXG5cdFx0Y29tcGlsZUFuZExpbmtQcm9wczogY29tcGlsZUFuZExpbmtQcm9wcyxcblx0XHRjb21waWxlUm9vdDogY29tcGlsZVJvb3QsXG5cdFx0dHJhbnNjbHVkZTogdHJhbnNjbHVkZSxcblx0XHRyZXNvbHZlU2xvdHM6IHJlc29sdmVTbG90c1xuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIHN0YXRlTWl4aW4gKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIEFjY2Vzc29yIGZvciBgJGRhdGFgIHByb3BlcnR5LCBzaW5jZSBzZXR0aW5nICRkYXRhXG5cdCAgICogcmVxdWlyZXMgb2JzZXJ2aW5nIHRoZSBuZXcgb2JqZWN0IGFuZCB1cGRhdGluZ1xuXHQgICAqIHByb3hpZWQgcHJvcGVydGllcy5cblx0ICAgKi9cblx0XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckZGF0YScsIHtcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5fZGF0YTtcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXdEYXRhKSB7XG5cdCAgICAgIGlmIChuZXdEYXRhICE9PSB0aGlzLl9kYXRhKSB7XG5cdCAgICAgICAgdGhpcy5fc2V0RGF0YShuZXdEYXRhKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICAvKipcblx0ICAgKiBTZXR1cCB0aGUgc2NvcGUgb2YgYW4gaW5zdGFuY2UsIHdoaWNoIGNvbnRhaW5zOlxuXHQgICAqIC0gb2JzZXJ2ZWQgZGF0YVxuXHQgICAqIC0gY29tcHV0ZWQgcHJvcGVydGllc1xuXHQgICAqIC0gdXNlciBtZXRob2RzXG5cdCAgICogLSBtZXRhIHByb3BlcnRpZXNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdFN0YXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5faW5pdFByb3BzKCk7XG5cdCAgICB0aGlzLl9pbml0TWV0YSgpO1xuXHQgICAgdGhpcy5faW5pdE1ldGhvZHMoKTtcblx0ICAgIHRoaXMuX2luaXREYXRhKCk7XG5cdCAgICB0aGlzLl9pbml0Q29tcHV0ZWQoKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbml0aWFsaXplIHByb3BzLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0UHJvcHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG5cdCAgICB2YXIgZWwgPSBvcHRpb25zLmVsO1xuXHQgICAgdmFyIHByb3BzID0gb3B0aW9ucy5wcm9wcztcblx0ICAgIGlmIChwcm9wcyAmJiAhZWwpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdQcm9wcyB3aWxsIG5vdCBiZSBjb21waWxlZCBpZiBubyBgZWxgIG9wdGlvbiBpcyAnICsgJ3Byb3ZpZGVkIGF0IGluc3RhbnRpYXRpb24uJywgdGhpcyk7XG5cdCAgICB9XG5cdCAgICAvLyBtYWtlIHN1cmUgdG8gY29udmVydCBzdHJpbmcgc2VsZWN0b3JzIGludG8gZWxlbWVudCBub3dcblx0ICAgIGVsID0gb3B0aW9ucy5lbCA9IHF1ZXJ5KGVsKTtcblx0ICAgIHRoaXMuX3Byb3BzVW5saW5rRm4gPSBlbCAmJiBlbC5ub2RlVHlwZSA9PT0gMSAmJiBwcm9wc1xuXHQgICAgLy8gcHJvcHMgbXVzdCBiZSBsaW5rZWQgaW4gcHJvcGVyIHNjb3BlIGlmIGluc2lkZSB2LWZvclxuXHQgICAgPyBjb21waWxlQW5kTGlua1Byb3BzKHRoaXMsIGVsLCBwcm9wcywgdGhpcy5fc2NvcGUpIDogbnVsbDtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbml0aWFsaXplIHRoZSBkYXRhLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0RGF0YSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBkYXRhRm4gPSB0aGlzLiRvcHRpb25zLmRhdGE7XG5cdCAgICB2YXIgZGF0YSA9IHRoaXMuX2RhdGEgPSBkYXRhRm4gPyBkYXRhRm4oKSA6IHt9O1xuXHQgICAgaWYgKCFpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG5cdCAgICAgIGRhdGEgPSB7fTtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdkYXRhIGZ1bmN0aW9ucyBzaG91bGQgcmV0dXJuIGFuIG9iamVjdC4nLCB0aGlzKTtcblx0ICAgIH1cblx0ICAgIHZhciBwcm9wcyA9IHRoaXMuX3Byb3BzO1xuXHQgICAgLy8gcHJveHkgZGF0YSBvbiBpbnN0YW5jZVxuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKTtcblx0ICAgIHZhciBpLCBrZXk7XG5cdCAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGtleSA9IGtleXNbaV07XG5cdCAgICAgIC8vIHRoZXJlIGFyZSB0d28gc2NlbmFyaW9zIHdoZXJlIHdlIGNhbiBwcm94eSBhIGRhdGEga2V5OlxuXHQgICAgICAvLyAxLiBpdCdzIG5vdCBhbHJlYWR5IGRlZmluZWQgYXMgYSBwcm9wXG5cdCAgICAgIC8vIDIuIGl0J3MgcHJvdmlkZWQgdmlhIGEgaW5zdGFudGlhdGlvbiBvcHRpb24gQU5EIHRoZXJlIGFyZSBub1xuXHQgICAgICAvLyAgICB0ZW1wbGF0ZSBwcm9wIHByZXNlbnRcblx0ICAgICAgaWYgKCFwcm9wcyB8fCAhaGFzT3duKHByb3BzLCBrZXkpKSB7XG5cdCAgICAgICAgdGhpcy5fcHJveHkoa2V5KTtcblx0ICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgd2FybignRGF0YSBmaWVsZCBcIicgKyBrZXkgKyAnXCIgaXMgYWxyZWFkeSBkZWZpbmVkICcgKyAnYXMgYSBwcm9wLiBUbyBwcm92aWRlIGRlZmF1bHQgdmFsdWUgZm9yIGEgcHJvcCwgdXNlIHRoZSBcImRlZmF1bHRcIiAnICsgJ3Byb3Agb3B0aW9uOyBpZiB5b3Ugd2FudCB0byBwYXNzIHByb3AgdmFsdWVzIHRvIGFuIGluc3RhbnRpYXRpb24gJyArICdjYWxsLCB1c2UgdGhlIFwicHJvcHNEYXRhXCIgb3B0aW9uLicsIHRoaXMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBvYnNlcnZlIGRhdGFcblx0ICAgIG9ic2VydmUoZGF0YSwgdGhpcyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogU3dhcCB0aGUgaW5zdGFuY2UncyAkZGF0YS4gQ2FsbGVkIGluICRkYXRhJ3Mgc2V0dGVyLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG5ld0RhdGFcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fc2V0RGF0YSA9IGZ1bmN0aW9uIChuZXdEYXRhKSB7XG5cdCAgICBuZXdEYXRhID0gbmV3RGF0YSB8fCB7fTtcblx0ICAgIHZhciBvbGREYXRhID0gdGhpcy5fZGF0YTtcblx0ICAgIHRoaXMuX2RhdGEgPSBuZXdEYXRhO1xuXHQgICAgdmFyIGtleXMsIGtleSwgaTtcblx0ICAgIC8vIHVucHJveHkga2V5cyBub3QgcHJlc2VudCBpbiBuZXcgZGF0YVxuXHQgICAga2V5cyA9IE9iamVjdC5rZXlzKG9sZERhdGEpO1xuXHQgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICBpZiAoIShrZXkgaW4gbmV3RGF0YSkpIHtcblx0ICAgICAgICB0aGlzLl91bnByb3h5KGtleSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIHByb3h5IGtleXMgbm90IGFscmVhZHkgcHJveGllZCxcblx0ICAgIC8vIGFuZCB0cmlnZ2VyIGNoYW5nZSBmb3IgY2hhbmdlZCB2YWx1ZXNcblx0ICAgIGtleXMgPSBPYmplY3Qua2V5cyhuZXdEYXRhKTtcblx0ICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgaWYgKCFoYXNPd24odGhpcywga2V5KSkge1xuXHQgICAgICAgIC8vIG5ldyBwcm9wZXJ0eVxuXHQgICAgICAgIHRoaXMuX3Byb3h5KGtleSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIG9sZERhdGEuX19vYl9fLnJlbW92ZVZtKHRoaXMpO1xuXHQgICAgb2JzZXJ2ZShuZXdEYXRhLCB0aGlzKTtcblx0ICAgIHRoaXMuX2RpZ2VzdCgpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFByb3h5IGEgcHJvcGVydHksIHNvIHRoYXRcblx0ICAgKiB2bS5wcm9wID09PSB2bS5fZGF0YS5wcm9wXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX3Byb3h5ID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgaWYgKCFpc1Jlc2VydmVkKGtleSkpIHtcblx0ICAgICAgLy8gbmVlZCB0byBzdG9yZSByZWYgdG8gc2VsZiBoZXJlXG5cdCAgICAgIC8vIGJlY2F1c2UgdGhlc2UgZ2V0dGVyL3NldHRlcnMgbWlnaHRcblx0ICAgICAgLy8gYmUgY2FsbGVkIGJ5IGNoaWxkIHNjb3BlcyB2aWFcblx0ICAgICAgLy8gcHJvdG90eXBlIGluaGVyaXRhbmNlLlxuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCBrZXksIHtcblx0ICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uIHByb3h5R2V0dGVyKCkge1xuXHQgICAgICAgICAgcmV0dXJuIHNlbGYuX2RhdGFba2V5XTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHNldDogZnVuY3Rpb24gcHJveHlTZXR0ZXIodmFsKSB7XG5cdCAgICAgICAgICBzZWxmLl9kYXRhW2tleV0gPSB2YWw7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBVbnByb3h5IGEgcHJvcGVydHkuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX3VucHJveHkgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICBpZiAoIWlzUmVzZXJ2ZWQoa2V5KSkge1xuXHQgICAgICBkZWxldGUgdGhpc1trZXldO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEZvcmNlIHVwZGF0ZSBvbiBldmVyeSB3YXRjaGVyIGluIHNjb3BlLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9kaWdlc3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMuX3dhdGNoZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB0aGlzLl93YXRjaGVyc1tpXS51cGRhdGUodHJ1ZSk7IC8vIHNoYWxsb3cgdXBkYXRlc1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHVwIGNvbXB1dGVkIHByb3BlcnRpZXMuIFRoZXkgYXJlIGVzc2VudGlhbGx5XG5cdCAgICogc3BlY2lhbCBnZXR0ZXIvc2V0dGVyc1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBub29wKCkge31cblx0ICBWdWUucHJvdG90eXBlLl9pbml0Q29tcHV0ZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgY29tcHV0ZWQgPSB0aGlzLiRvcHRpb25zLmNvbXB1dGVkO1xuXHQgICAgaWYgKGNvbXB1dGVkKSB7XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiBjb21wdXRlZCkge1xuXHQgICAgICAgIHZhciB1c2VyRGVmID0gY29tcHV0ZWRba2V5XTtcblx0ICAgICAgICB2YXIgZGVmID0ge1xuXHQgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgaWYgKHR5cGVvZiB1c2VyRGVmID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICBkZWYuZ2V0ID0gbWFrZUNvbXB1dGVkR2V0dGVyKHVzZXJEZWYsIHRoaXMpO1xuXHQgICAgICAgICAgZGVmLnNldCA9IG5vb3A7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGRlZi5nZXQgPSB1c2VyRGVmLmdldCA/IHVzZXJEZWYuY2FjaGUgIT09IGZhbHNlID8gbWFrZUNvbXB1dGVkR2V0dGVyKHVzZXJEZWYuZ2V0LCB0aGlzKSA6IGJpbmQodXNlckRlZi5nZXQsIHRoaXMpIDogbm9vcDtcblx0ICAgICAgICAgIGRlZi5zZXQgPSB1c2VyRGVmLnNldCA/IGJpbmQodXNlckRlZi5zZXQsIHRoaXMpIDogbm9vcDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGtleSwgZGVmKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIG1ha2VDb21wdXRlZEdldHRlcihnZXR0ZXIsIG93bmVyKSB7XG5cdCAgICB2YXIgd2F0Y2hlciA9IG5ldyBXYXRjaGVyKG93bmVyLCBnZXR0ZXIsIG51bGwsIHtcblx0ICAgICAgbGF6eTogdHJ1ZVxuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gY29tcHV0ZWRHZXR0ZXIoKSB7XG5cdCAgICAgIGlmICh3YXRjaGVyLmRpcnR5KSB7XG5cdCAgICAgICAgd2F0Y2hlci5ldmFsdWF0ZSgpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG5cdCAgICAgICAgd2F0Y2hlci5kZXBlbmQoKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gd2F0Y2hlci52YWx1ZTtcblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBTZXR1cCBpbnN0YW5jZSBtZXRob2RzLiBNZXRob2RzIG11c3QgYmUgYm91bmQgdG8gdGhlXG5cdCAgICogaW5zdGFuY2Ugc2luY2UgdGhleSBtaWdodCBiZSBwYXNzZWQgZG93biBhcyBhIHByb3AgdG9cblx0ICAgKiBjaGlsZCBjb21wb25lbnRzLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0TWV0aG9kcyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBtZXRob2RzID0gdGhpcy4kb3B0aW9ucy5tZXRob2RzO1xuXHQgICAgaWYgKG1ldGhvZHMpIHtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIG1ldGhvZHMpIHtcblx0ICAgICAgICB0aGlzW2tleV0gPSBiaW5kKG1ldGhvZHNba2V5XSwgdGhpcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbml0aWFsaXplIG1ldGEgaW5mb3JtYXRpb24gbGlrZSAkaW5kZXgsICRrZXkgJiAkdmFsdWUuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRNZXRhID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIG1ldGFzID0gdGhpcy4kb3B0aW9ucy5fbWV0YTtcblx0ICAgIGlmIChtZXRhcykge1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gbWV0YXMpIHtcblx0ICAgICAgICBkZWZpbmVSZWFjdGl2ZSh0aGlzLCBrZXksIG1ldGFzW2tleV0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0dmFyIGV2ZW50UkUgPSAvXnYtb246fF5ALztcblx0XG5cdGZ1bmN0aW9uIGV2ZW50c01peGluIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBTZXR1cCB0aGUgaW5zdGFuY2UncyBvcHRpb24gZXZlbnRzICYgd2F0Y2hlcnMuXG5cdCAgICogSWYgdGhlIHZhbHVlIGlzIGEgc3RyaW5nLCB3ZSBwdWxsIGl0IGZyb20gdGhlXG5cdCAgICogaW5zdGFuY2UncyBtZXRob2RzIGJ5IG5hbWUuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG5cdCAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQpIHtcblx0ICAgICAgcmVnaXN0ZXJDb21wb25lbnRFdmVudHModGhpcywgb3B0aW9ucy5lbCk7XG5cdCAgICB9XG5cdCAgICByZWdpc3RlckNhbGxiYWNrcyh0aGlzLCAnJG9uJywgb3B0aW9ucy5ldmVudHMpO1xuXHQgICAgcmVnaXN0ZXJDYWxsYmFja3ModGhpcywgJyR3YXRjaCcsIG9wdGlvbnMud2F0Y2gpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlZ2lzdGVyIHYtb24gZXZlbnRzIG9uIGEgY2hpbGQgY29tcG9uZW50XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJlZ2lzdGVyQ29tcG9uZW50RXZlbnRzKHZtLCBlbCkge1xuXHQgICAgdmFyIGF0dHJzID0gZWwuYXR0cmlidXRlcztcblx0ICAgIHZhciBuYW1lLCB2YWx1ZSwgaGFuZGxlcjtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuXHQgICAgICBpZiAoZXZlbnRSRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShldmVudFJFLCAnJyk7XG5cdCAgICAgICAgLy8gZm9yY2UgdGhlIGV4cHJlc3Npb24gaW50byBhIHN0YXRlbWVudCBzbyB0aGF0XG5cdCAgICAgICAgLy8gaXQgYWx3YXlzIGR5bmFtaWNhbGx5IHJlc29sdmVzIHRoZSBtZXRob2QgdG8gY2FsbCAoIzI2NzApXG5cdCAgICAgICAgLy8ga2luZGEgdWdseSBoYWNrLCBidXQgZG9lcyB0aGUgam9iLlxuXHQgICAgICAgIHZhbHVlID0gYXR0cnNbaV0udmFsdWU7XG5cdCAgICAgICAgaWYgKGlzU2ltcGxlUGF0aCh2YWx1ZSkpIHtcblx0ICAgICAgICAgIHZhbHVlICs9ICcuYXBwbHkodGhpcywgJGFyZ3VtZW50cyknO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBoYW5kbGVyID0gKHZtLl9zY29wZSB8fCB2bS5fY29udGV4dCkuJGV2YWwodmFsdWUsIHRydWUpO1xuXHQgICAgICAgIGhhbmRsZXIuX2Zyb21QYXJlbnQgPSB0cnVlO1xuXHQgICAgICAgIHZtLiRvbihuYW1lLnJlcGxhY2UoZXZlbnRSRSksIGhhbmRsZXIpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBSZWdpc3RlciBjYWxsYmFja3MgZm9yIG9wdGlvbiBldmVudHMgYW5kIHdhdGNoZXJzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvblxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBoYXNoXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJlZ2lzdGVyQ2FsbGJhY2tzKHZtLCBhY3Rpb24sIGhhc2gpIHtcblx0ICAgIGlmICghaGFzaCkgcmV0dXJuO1xuXHQgICAgdmFyIGhhbmRsZXJzLCBrZXksIGksIGo7XG5cdCAgICBmb3IgKGtleSBpbiBoYXNoKSB7XG5cdCAgICAgIGhhbmRsZXJzID0gaGFzaFtrZXldO1xuXHQgICAgICBpZiAoaXNBcnJheShoYW5kbGVycykpIHtcblx0ICAgICAgICBmb3IgKGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdCAgICAgICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXJzW2ldKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVycyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEhlbHBlciB0byByZWdpc3RlciBhbiBldmVudC93YXRjaCBjYWxsYmFjay5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25cblx0ICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbnxTdHJpbmd8T2JqZWN0fSBoYW5kbGVyXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXIsIG9wdGlvbnMpIHtcblx0ICAgIHZhciB0eXBlID0gdHlwZW9mIGhhbmRsZXI7XG5cdCAgICBpZiAodHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICB2bVthY3Rpb25dKGtleSwgaGFuZGxlciwgb3B0aW9ucyk7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHZhciBtZXRob2RzID0gdm0uJG9wdGlvbnMubWV0aG9kcztcblx0ICAgICAgdmFyIG1ldGhvZCA9IG1ldGhvZHMgJiYgbWV0aG9kc1toYW5kbGVyXTtcblx0ICAgICAgaWYgKG1ldGhvZCkge1xuXHQgICAgICAgIHZtW2FjdGlvbl0oa2V5LCBtZXRob2QsIG9wdGlvbnMpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVW5rbm93biBtZXRob2Q6IFwiJyArIGhhbmRsZXIgKyAnXCIgd2hlbiAnICsgJ3JlZ2lzdGVyaW5nIGNhbGxiYWNrIGZvciAnICsgYWN0aW9uICsgJzogXCInICsga2V5ICsgJ1wiLicsIHZtKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChoYW5kbGVyICYmIHR5cGUgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlci5oYW5kbGVyLCBoYW5kbGVyKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHVwIHJlY3Vyc2l2ZSBhdHRhY2hlZC9kZXRhY2hlZCBjYWxsc1xuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0RE9NSG9va3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLiRvbignaG9vazphdHRhY2hlZCcsIG9uQXR0YWNoZWQpO1xuXHQgICAgdGhpcy4kb24oJ2hvb2s6ZGV0YWNoZWQnLCBvbkRldGFjaGVkKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBDYWxsYmFjayB0byByZWN1cnNpdmVseSBjYWxsIGF0dGFjaGVkIGhvb2sgb24gY2hpbGRyZW5cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gb25BdHRhY2hlZCgpIHtcblx0ICAgIGlmICghdGhpcy5faXNBdHRhY2hlZCkge1xuXHQgICAgICB0aGlzLl9pc0F0dGFjaGVkID0gdHJ1ZTtcblx0ICAgICAgdGhpcy4kY2hpbGRyZW4uZm9yRWFjaChjYWxsQXR0YWNoKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEl0ZXJhdG9yIHRvIGNhbGwgYXR0YWNoZWQgaG9va1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IGNoaWxkXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGNhbGxBdHRhY2goY2hpbGQpIHtcblx0ICAgIGlmICghY2hpbGQuX2lzQXR0YWNoZWQgJiYgaW5Eb2MoY2hpbGQuJGVsKSkge1xuXHQgICAgICBjaGlsZC5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBDYWxsYmFjayB0byByZWN1cnNpdmVseSBjYWxsIGRldGFjaGVkIGhvb2sgb24gY2hpbGRyZW5cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gb25EZXRhY2hlZCgpIHtcblx0ICAgIGlmICh0aGlzLl9pc0F0dGFjaGVkKSB7XG5cdCAgICAgIHRoaXMuX2lzQXR0YWNoZWQgPSBmYWxzZTtcblx0ICAgICAgdGhpcy4kY2hpbGRyZW4uZm9yRWFjaChjYWxsRGV0YWNoKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEl0ZXJhdG9yIHRvIGNhbGwgZGV0YWNoZWQgaG9va1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IGNoaWxkXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGNhbGxEZXRhY2goY2hpbGQpIHtcblx0ICAgIGlmIChjaGlsZC5faXNBdHRhY2hlZCAmJiAhaW5Eb2MoY2hpbGQuJGVsKSkge1xuXHQgICAgICBjaGlsZC5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBUcmlnZ2VyIGFsbCBoYW5kbGVycyBmb3IgYSBob29rXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gaG9va1xuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9jYWxsSG9vayA9IGZ1bmN0aW9uIChob29rKSB7XG5cdCAgICB0aGlzLiRlbWl0KCdwcmUtaG9vazonICsgaG9vayk7XG5cdCAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLiRvcHRpb25zW2hvb2tdO1xuXHQgICAgaWYgKGhhbmRsZXJzKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdCAgICAgICAgaGFuZGxlcnNbaV0uY2FsbCh0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdGhpcy4kZW1pdCgnaG9vazonICsgaG9vayk7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbm9vcCQxKCkge31cblx0XG5cdC8qKlxuXHQgKiBBIGRpcmVjdGl2ZSBsaW5rcyBhIERPTSBlbGVtZW50IHdpdGggYSBwaWVjZSBvZiBkYXRhLFxuXHQgKiB3aGljaCBpcyB0aGUgcmVzdWx0IG9mIGV2YWx1YXRpbmcgYW4gZXhwcmVzc2lvbi5cblx0ICogSXQgcmVnaXN0ZXJzIGEgd2F0Y2hlciB3aXRoIHRoZSBleHByZXNzaW9uIGFuZCBjYWxsc1xuXHQgKiB0aGUgRE9NIHVwZGF0ZSBmdW5jdGlvbiB3aGVuIGEgY2hhbmdlIGlzIHRyaWdnZXJlZC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3Jcblx0ICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gbmFtZVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBkZWZcblx0ICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gZXhwcmVzc2lvblxuXHQgKiAgICAgICAgICAgICAgICAgLSB7QXJyYXk8T2JqZWN0Pn0gW2ZpbHRlcnNdXG5cdCAqICAgICAgICAgICAgICAgICAtIHtPYmplY3R9IFttb2RpZmllcnNdXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBsaXRlcmFsXG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGF0dHJcblx0ICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gYXJnXG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IHJhd1xuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBbcmVmXVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7QXJyYXk8T2JqZWN0Pn0gW2ludGVycF1cblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtoYXNPbmVUaW1lXVxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtOb2RlfSBlbFxuXHQgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gdHJhbnNjbHVzaW9uIGhvc3QgY29tcG9uZW50XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcblx0ICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddIC0gb3duZXIgZnJhZ21lbnRcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqL1xuXHRmdW5jdGlvbiBEaXJlY3RpdmUoZGVzY3JpcHRvciwgdm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgIHRoaXMudm0gPSB2bTtcblx0ICB0aGlzLmVsID0gZWw7XG5cdCAgLy8gY29weSBkZXNjcmlwdG9yIHByb3BlcnRpZXNcblx0ICB0aGlzLmRlc2NyaXB0b3IgPSBkZXNjcmlwdG9yO1xuXHQgIHRoaXMubmFtZSA9IGRlc2NyaXB0b3IubmFtZTtcblx0ICB0aGlzLmV4cHJlc3Npb24gPSBkZXNjcmlwdG9yLmV4cHJlc3Npb247XG5cdCAgdGhpcy5hcmcgPSBkZXNjcmlwdG9yLmFyZztcblx0ICB0aGlzLm1vZGlmaWVycyA9IGRlc2NyaXB0b3IubW9kaWZpZXJzO1xuXHQgIHRoaXMuZmlsdGVycyA9IGRlc2NyaXB0b3IuZmlsdGVycztcblx0ICB0aGlzLmxpdGVyYWwgPSB0aGlzLm1vZGlmaWVycyAmJiB0aGlzLm1vZGlmaWVycy5saXRlcmFsO1xuXHQgIC8vIHByaXZhdGVcblx0ICB0aGlzLl9sb2NrZWQgPSBmYWxzZTtcblx0ICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xuXHQgIHRoaXMuX2xpc3RlbmVycyA9IG51bGw7XG5cdCAgLy8gbGluayBjb250ZXh0XG5cdCAgdGhpcy5faG9zdCA9IGhvc3Q7XG5cdCAgdGhpcy5fc2NvcGUgPSBzY29wZTtcblx0ICB0aGlzLl9mcmFnID0gZnJhZztcblx0ICAvLyBzdG9yZSBkaXJlY3RpdmVzIG9uIG5vZGUgaW4gZGV2IG1vZGVcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsKSB7XG5cdCAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcyA9IHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzIHx8IFtdO1xuXHQgICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMucHVzaCh0aGlzKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbml0aWFsaXplIHRoZSBkaXJlY3RpdmUsIG1peGluIGRlZmluaXRpb24gcHJvcGVydGllcyxcblx0ICogc2V0dXAgdGhlIHdhdGNoZXIsIGNhbGwgZGVmaW5pdGlvbiBiaW5kKCkgYW5kIHVwZGF0ZSgpXG5cdCAqIGlmIHByZXNlbnQuXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5fYmluZCA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgbmFtZSA9IHRoaXMubmFtZTtcblx0ICB2YXIgZGVzY3JpcHRvciA9IHRoaXMuZGVzY3JpcHRvcjtcblx0XG5cdCAgLy8gcmVtb3ZlIGF0dHJpYnV0ZVxuXHQgIGlmICgobmFtZSAhPT0gJ2Nsb2FrJyB8fCB0aGlzLnZtLl9pc0NvbXBpbGVkKSAmJiB0aGlzLmVsICYmIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKSB7XG5cdCAgICB2YXIgYXR0ciA9IGRlc2NyaXB0b3IuYXR0ciB8fCAndi0nICsgbmFtZTtcblx0ICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuXHQgIH1cblx0XG5cdCAgLy8gY29weSBkZWYgcHJvcGVydGllc1xuXHQgIHZhciBkZWYgPSBkZXNjcmlwdG9yLmRlZjtcblx0ICBpZiAodHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdGhpcy51cGRhdGUgPSBkZWY7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGV4dGVuZCh0aGlzLCBkZWYpO1xuXHQgIH1cblx0XG5cdCAgLy8gc2V0dXAgZGlyZWN0aXZlIHBhcmFtc1xuXHQgIHRoaXMuX3NldHVwUGFyYW1zKCk7XG5cdFxuXHQgIC8vIGluaXRpYWwgYmluZFxuXHQgIGlmICh0aGlzLmJpbmQpIHtcblx0ICAgIHRoaXMuYmluZCgpO1xuXHQgIH1cblx0ICB0aGlzLl9ib3VuZCA9IHRydWU7XG5cdFxuXHQgIGlmICh0aGlzLmxpdGVyYWwpIHtcblx0ICAgIHRoaXMudXBkYXRlICYmIHRoaXMudXBkYXRlKGRlc2NyaXB0b3IucmF3KTtcblx0ICB9IGVsc2UgaWYgKCh0aGlzLmV4cHJlc3Npb24gfHwgdGhpcy5tb2RpZmllcnMpICYmICh0aGlzLnVwZGF0ZSB8fCB0aGlzLnR3b1dheSkgJiYgIXRoaXMuX2NoZWNrU3RhdGVtZW50KCkpIHtcblx0ICAgIC8vIHdyYXBwZWQgdXBkYXRlciBmb3IgY29udGV4dFxuXHQgICAgdmFyIGRpciA9IHRoaXM7XG5cdCAgICBpZiAodGhpcy51cGRhdGUpIHtcblx0ICAgICAgdGhpcy5fdXBkYXRlID0gZnVuY3Rpb24gKHZhbCwgb2xkVmFsKSB7XG5cdCAgICAgICAgaWYgKCFkaXIuX2xvY2tlZCkge1xuXHQgICAgICAgICAgZGlyLnVwZGF0ZSh2YWwsIG9sZFZhbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5fdXBkYXRlID0gbm9vcCQxO1xuXHQgICAgfVxuXHQgICAgdmFyIHByZVByb2Nlc3MgPSB0aGlzLl9wcmVQcm9jZXNzID8gYmluZCh0aGlzLl9wcmVQcm9jZXNzLCB0aGlzKSA6IG51bGw7XG5cdCAgICB2YXIgcG9zdFByb2Nlc3MgPSB0aGlzLl9wb3N0UHJvY2VzcyA/IGJpbmQodGhpcy5fcG9zdFByb2Nlc3MsIHRoaXMpIDogbnVsbDtcblx0ICAgIHZhciB3YXRjaGVyID0gdGhpcy5fd2F0Y2hlciA9IG5ldyBXYXRjaGVyKHRoaXMudm0sIHRoaXMuZXhwcmVzc2lvbiwgdGhpcy5fdXBkYXRlLCAvLyBjYWxsYmFja1xuXHQgICAge1xuXHQgICAgICBmaWx0ZXJzOiB0aGlzLmZpbHRlcnMsXG5cdCAgICAgIHR3b1dheTogdGhpcy50d29XYXksXG5cdCAgICAgIGRlZXA6IHRoaXMuZGVlcCxcblx0ICAgICAgcHJlUHJvY2VzczogcHJlUHJvY2Vzcyxcblx0ICAgICAgcG9zdFByb2Nlc3M6IHBvc3RQcm9jZXNzLFxuXHQgICAgICBzY29wZTogdGhpcy5fc2NvcGVcblx0ICAgIH0pO1xuXHQgICAgLy8gdi1tb2RlbCB3aXRoIGluaXRhbCBpbmxpbmUgdmFsdWUgbmVlZCB0byBzeW5jIGJhY2sgdG9cblx0ICAgIC8vIG1vZGVsIGluc3RlYWQgb2YgdXBkYXRlIHRvIERPTSBvbiBpbml0LiBUaGV5IHdvdWxkXG5cdCAgICAvLyBzZXQgdGhlIGFmdGVyQmluZCBob29rIHRvIGluZGljYXRlIHRoYXQuXG5cdCAgICBpZiAodGhpcy5hZnRlckJpbmQpIHtcblx0ICAgICAgdGhpcy5hZnRlckJpbmQoKTtcblx0ICAgIH0gZWxzZSBpZiAodGhpcy51cGRhdGUpIHtcblx0ICAgICAgdGhpcy51cGRhdGUod2F0Y2hlci52YWx1ZSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFNldHVwIGFsbCBwYXJhbSBhdHRyaWJ1dGVzLCBlLmcuIHRyYWNrLWJ5LFxuXHQgKiB0cmFuc2l0aW9uLW1vZGUsIGV0Yy4uLlxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX3NldHVwUGFyYW1zID0gZnVuY3Rpb24gKCkge1xuXHQgIGlmICghdGhpcy5wYXJhbXMpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIHBhcmFtcyA9IHRoaXMucGFyYW1zO1xuXHQgIC8vIHN3YXAgdGhlIHBhcmFtcyBhcnJheSB3aXRoIGEgZnJlc2ggb2JqZWN0LlxuXHQgIHRoaXMucGFyYW1zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB2YXIgaSA9IHBhcmFtcy5sZW5ndGg7XG5cdCAgdmFyIGtleSwgdmFsLCBtYXBwZWRLZXk7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAga2V5ID0gaHlwaGVuYXRlKHBhcmFtc1tpXSk7XG5cdCAgICBtYXBwZWRLZXkgPSBjYW1lbGl6ZShrZXkpO1xuXHQgICAgdmFsID0gZ2V0QmluZEF0dHIodGhpcy5lbCwga2V5KTtcblx0ICAgIGlmICh2YWwgIT0gbnVsbCkge1xuXHQgICAgICAvLyBkeW5hbWljXG5cdCAgICAgIHRoaXMuX3NldHVwUGFyYW1XYXRjaGVyKG1hcHBlZEtleSwgdmFsKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIHN0YXRpY1xuXHQgICAgICB2YWwgPSBnZXRBdHRyKHRoaXMuZWwsIGtleSk7XG5cdCAgICAgIGlmICh2YWwgIT0gbnVsbCkge1xuXHQgICAgICAgIHRoaXMucGFyYW1zW21hcHBlZEtleV0gPSB2YWwgPT09ICcnID8gdHJ1ZSA6IHZhbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTZXR1cCBhIHdhdGNoZXIgZm9yIGEgZHluYW1pYyBwYXJhbS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwcmVzc2lvblxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX3NldHVwUGFyYW1XYXRjaGVyID0gZnVuY3Rpb24gKGtleSwgZXhwcmVzc2lvbikge1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICB2YXIgY2FsbGVkID0gZmFsc2U7XG5cdCAgdmFyIHVud2F0Y2ggPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHdhdGNoKGV4cHJlc3Npb24sIGZ1bmN0aW9uICh2YWwsIG9sZFZhbCkge1xuXHQgICAgc2VsZi5wYXJhbXNba2V5XSA9IHZhbDtcblx0ICAgIC8vIHNpbmNlIHdlIGFyZSBpbiBpbW1lZGlhdGUgbW9kZSxcblx0ICAgIC8vIG9ubHkgY2FsbCB0aGUgcGFyYW0gY2hhbmdlIGNhbGxiYWNrcyBpZiB0aGlzIGlzIG5vdCB0aGUgZmlyc3QgdXBkYXRlLlxuXHQgICAgaWYgKGNhbGxlZCkge1xuXHQgICAgICB2YXIgY2IgPSBzZWxmLnBhcmFtV2F0Y2hlcnMgJiYgc2VsZi5wYXJhbVdhdGNoZXJzW2tleV07XG5cdCAgICAgIGlmIChjYikge1xuXHQgICAgICAgIGNiLmNhbGwoc2VsZiwgdmFsLCBvbGRWYWwpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBjYWxsZWQgPSB0cnVlO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGltbWVkaWF0ZTogdHJ1ZSxcblx0ICAgIHVzZXI6IGZhbHNlXG5cdCAgfSk7KHRoaXMuX3BhcmFtVW53YXRjaEZucyB8fCAodGhpcy5fcGFyYW1VbndhdGNoRm5zID0gW10pKS5wdXNoKHVud2F0Y2gpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIHRoZSBkaXJlY3RpdmUgaXMgYSBmdW5jdGlvbiBjYWxsZXJcblx0ICogYW5kIGlmIHRoZSBleHByZXNzaW9uIGlzIGEgY2FsbGFibGUgb25lLiBJZiBib3RoIHRydWUsXG5cdCAqIHdlIHdyYXAgdXAgdGhlIGV4cHJlc3Npb24gYW5kIHVzZSBpdCBhcyB0aGUgZXZlbnRcblx0ICogaGFuZGxlci5cblx0ICpcblx0ICogZS5nLiBvbi1jbGljaz1cImErK1wiXG5cdCAqXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5fY2hlY2tTdGF0ZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGV4cHJlc3Npb24gPSB0aGlzLmV4cHJlc3Npb247XG5cdCAgaWYgKGV4cHJlc3Npb24gJiYgdGhpcy5hY2NlcHRTdGF0ZW1lbnQgJiYgIWlzU2ltcGxlUGF0aChleHByZXNzaW9uKSkge1xuXHQgICAgdmFyIGZuID0gcGFyc2VFeHByZXNzaW9uKGV4cHJlc3Npb24pLmdldDtcblx0ICAgIHZhciBzY29wZSA9IHRoaXMuX3Njb3BlIHx8IHRoaXMudm07XG5cdCAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXIoZSkge1xuXHQgICAgICBzY29wZS4kZXZlbnQgPSBlO1xuXHQgICAgICBmbi5jYWxsKHNjb3BlLCBzY29wZSk7XG5cdCAgICAgIHNjb3BlLiRldmVudCA9IG51bGw7XG5cdCAgICB9O1xuXHQgICAgaWYgKHRoaXMuZmlsdGVycykge1xuXHQgICAgICBoYW5kbGVyID0gc2NvcGUuX2FwcGx5RmlsdGVycyhoYW5kbGVyLCBudWxsLCB0aGlzLmZpbHRlcnMpO1xuXHQgICAgfVxuXHQgICAgdGhpcy51cGRhdGUoaGFuZGxlcik7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogU2V0IHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIHdpdGggdGhlIHNldHRlci5cblx0ICogVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIGluIHR3by13YXkgZGlyZWN0aXZlc1xuXHQgKiBlLmcuIHYtbW9kZWwuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHB1YmxpY1xuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICBpZiAodGhpcy50d29XYXkpIHtcblx0ICAgIHRoaXMuX3dpdGhMb2NrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhpcy5fd2F0Y2hlci5zZXQodmFsdWUpO1xuXHQgICAgfSk7XG5cdCAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICB3YXJuKCdEaXJlY3RpdmUuc2V0KCkgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgdHdvV2F5JyArICdkaXJlY3RpdmVzLicpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBFeGVjdXRlIGEgZnVuY3Rpb24gd2hpbGUgcHJldmVudGluZyB0aGF0IGZ1bmN0aW9uIGZyb21cblx0ICogdHJpZ2dlcmluZyB1cGRhdGVzIG9uIHRoaXMgZGlyZWN0aXZlIGluc3RhbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX3dpdGhMb2NrID0gZnVuY3Rpb24gKGZuKSB7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIHNlbGYuX2xvY2tlZCA9IHRydWU7XG5cdCAgZm4uY2FsbChzZWxmKTtcblx0ICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdCAgICBzZWxmLl9sb2NrZWQgPSBmYWxzZTtcblx0ICB9KTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDb252ZW5pZW5jZSBtZXRob2QgdGhhdCBhdHRhY2hlcyBhIERPTSBldmVudCBsaXN0ZW5lclxuXHQgKiB0byB0aGUgZGlyZWN0aXZlIGVsZW1lbnQgYW5kIGF1dG9tZXRpY2FsbHkgdGVhcnMgaXQgZG93blxuXHQgKiBkdXJpbmcgdW5iaW5kLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VDYXB0dXJlXVxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnQsIGhhbmRsZXIsIHVzZUNhcHR1cmUpIHtcblx0ICBvbih0aGlzLmVsLCBldmVudCwgaGFuZGxlciwgdXNlQ2FwdHVyZSk7KHRoaXMuX2xpc3RlbmVycyB8fCAodGhpcy5fbGlzdGVuZXJzID0gW10pKS5wdXNoKFtldmVudCwgaGFuZGxlcl0pO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFRlYXJkb3duIHRoZSB3YXRjaGVyIGFuZCBjYWxsIHVuYmluZC5cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl90ZWFyZG93biA9IGZ1bmN0aW9uICgpIHtcblx0ICBpZiAodGhpcy5fYm91bmQpIHtcblx0ICAgIHRoaXMuX2JvdW5kID0gZmFsc2U7XG5cdCAgICBpZiAodGhpcy51bmJpbmQpIHtcblx0ICAgICAgdGhpcy51bmJpbmQoKTtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLl93YXRjaGVyKSB7XG5cdCAgICAgIHRoaXMuX3dhdGNoZXIudGVhcmRvd24oKTtcblx0ICAgIH1cblx0ICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG5cdCAgICB2YXIgaTtcblx0ICAgIGlmIChsaXN0ZW5lcnMpIHtcblx0ICAgICAgaSA9IGxpc3RlbmVycy5sZW5ndGg7XG5cdCAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICBvZmYodGhpcy5lbCwgbGlzdGVuZXJzW2ldWzBdLCBsaXN0ZW5lcnNbaV1bMV0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB2YXIgdW53YXRjaEZucyA9IHRoaXMuX3BhcmFtVW53YXRjaEZucztcblx0ICAgIGlmICh1bndhdGNoRm5zKSB7XG5cdCAgICAgIGkgPSB1bndhdGNoRm5zLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICAgIHVud2F0Y2hGbnNbaV0oKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbCkge1xuXHQgICAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcy4kcmVtb3ZlKHRoaXMpO1xuXHQgICAgfVxuXHQgICAgdGhpcy52bSA9IHRoaXMuZWwgPSB0aGlzLl93YXRjaGVyID0gdGhpcy5fbGlzdGVuZXJzID0gbnVsbDtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBsaWZlY3ljbGVNaXhpbiAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogVXBkYXRlIHYtcmVmIGZvciBjb21wb25lbnQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl91cGRhdGVSZWYgPSBmdW5jdGlvbiAocmVtb3ZlKSB7XG5cdCAgICB2YXIgcmVmID0gdGhpcy4kb3B0aW9ucy5fcmVmO1xuXHQgICAgaWYgKHJlZikge1xuXHQgICAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLl9jb250ZXh0KS4kcmVmcztcblx0ICAgICAgaWYgKHJlbW92ZSkge1xuXHQgICAgICAgIGlmIChyZWZzW3JlZl0gPT09IHRoaXMpIHtcblx0ICAgICAgICAgIHJlZnNbcmVmXSA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlZnNbcmVmXSA9IHRoaXM7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBUcmFuc2NsdWRlLCBjb21waWxlIGFuZCBsaW5rIGVsZW1lbnQuXG5cdCAgICpcblx0ICAgKiBJZiBhIHByZS1jb21waWxlZCBsaW5rZXIgaXMgYXZhaWxhYmxlLCB0aGF0IG1lYW5zIHRoZVxuXHQgICAqIHBhc3NlZCBpbiBlbGVtZW50IHdpbGwgYmUgcHJlLXRyYW5zY2x1ZGVkIGFuZCBjb21waWxlZFxuXHQgICAqIGFzIHdlbGwgLSBhbGwgd2UgbmVlZCB0byBkbyBpcyB0byBjYWxsIHRoZSBsaW5rZXIuXG5cdCAgICpcblx0ICAgKiBPdGhlcndpc2Ugd2UgbmVlZCB0byBjYWxsIHRyYW5zY2x1ZGUvY29tcGlsZS9saW5rIGhlcmUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2NvbXBpbGUgPSBmdW5jdGlvbiAoZWwpIHtcblx0ICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcblx0XG5cdCAgICAvLyB0cmFuc2NsdWRlIGFuZCBpbml0IGVsZW1lbnRcblx0ICAgIC8vIHRyYW5zY2x1ZGUgY2FuIHBvdGVudGlhbGx5IHJlcGxhY2Ugb3JpZ2luYWxcblx0ICAgIC8vIHNvIHdlIG5lZWQgdG8ga2VlcCByZWZlcmVuY2U7IHRoaXMgc3RlcCBhbHNvIGluamVjdHNcblx0ICAgIC8vIHRoZSB0ZW1wbGF0ZSBhbmQgY2FjaGVzIHRoZSBvcmlnaW5hbCBhdHRyaWJ1dGVzXG5cdCAgICAvLyBvbiB0aGUgY29udGFpbmVyIG5vZGUgYW5kIHJlcGxhY2VyIG5vZGUuXG5cdCAgICB2YXIgb3JpZ2luYWwgPSBlbDtcblx0ICAgIGVsID0gdHJhbnNjbHVkZShlbCwgb3B0aW9ucyk7XG5cdCAgICB0aGlzLl9pbml0RWxlbWVudChlbCk7XG5cdFxuXHQgICAgLy8gaGFuZGxlIHYtcHJlIG9uIHJvb3Qgbm9kZSAoIzIwMjYpXG5cdCAgICBpZiAoZWwubm9kZVR5cGUgPT09IDEgJiYgZ2V0QXR0cihlbCwgJ3YtcHJlJykgIT09IG51bGwpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHJvb3QgaXMgYWx3YXlzIGNvbXBpbGVkIHBlci1pbnN0YW5jZSwgYmVjYXVzZVxuXHQgICAgLy8gY29udGFpbmVyIGF0dHJzIGFuZCBwcm9wcyBjYW4gYmUgZGlmZmVyZW50IGV2ZXJ5IHRpbWUuXG5cdCAgICB2YXIgY29udGV4dE9wdGlvbnMgPSB0aGlzLl9jb250ZXh0ICYmIHRoaXMuX2NvbnRleHQuJG9wdGlvbnM7XG5cdCAgICB2YXIgcm9vdExpbmtlciA9IGNvbXBpbGVSb290KGVsLCBvcHRpb25zLCBjb250ZXh0T3B0aW9ucyk7XG5cdFxuXHQgICAgLy8gcmVzb2x2ZSBzbG90IGRpc3RyaWJ1dGlvblxuXHQgICAgcmVzb2x2ZVNsb3RzKHRoaXMsIG9wdGlvbnMuX2NvbnRlbnQpO1xuXHRcblx0ICAgIC8vIGNvbXBpbGUgYW5kIGxpbmsgdGhlIHJlc3Rcblx0ICAgIHZhciBjb250ZW50TGlua0ZuO1xuXHQgICAgdmFyIGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuXHQgICAgLy8gY29tcG9uZW50IGNvbXBpbGF0aW9uIGNhbiBiZSBjYWNoZWRcblx0ICAgIC8vIGFzIGxvbmcgYXMgaXQncyBub3QgdXNpbmcgaW5saW5lLXRlbXBsYXRlXG5cdCAgICBpZiAob3B0aW9ucy5fbGlua2VyQ2FjaGFibGUpIHtcblx0ICAgICAgY29udGVudExpbmtGbiA9IGN0b3IubGlua2VyO1xuXHQgICAgICBpZiAoIWNvbnRlbnRMaW5rRm4pIHtcblx0ICAgICAgICBjb250ZW50TGlua0ZuID0gY3Rvci5saW5rZXIgPSBjb21waWxlKGVsLCBvcHRpb25zKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIGxpbmsgcGhhc2Vcblx0ICAgIC8vIG1ha2Ugc3VyZSB0byBsaW5rIHJvb3Qgd2l0aCBwcm9wIHNjb3BlIVxuXHQgICAgdmFyIHJvb3RVbmxpbmtGbiA9IHJvb3RMaW5rZXIodGhpcywgZWwsIHRoaXMuX3Njb3BlKTtcblx0ICAgIHZhciBjb250ZW50VW5saW5rRm4gPSBjb250ZW50TGlua0ZuID8gY29udGVudExpbmtGbih0aGlzLCBlbCkgOiBjb21waWxlKGVsLCBvcHRpb25zKSh0aGlzLCBlbCk7XG5cdFxuXHQgICAgLy8gcmVnaXN0ZXIgY29tcG9zaXRlIHVubGluayBmdW5jdGlvblxuXHQgICAgLy8gdG8gYmUgY2FsbGVkIGR1cmluZyBpbnN0YW5jZSBkZXN0cnVjdGlvblxuXHQgICAgdGhpcy5fdW5saW5rRm4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJvb3RVbmxpbmtGbigpO1xuXHQgICAgICAvLyBwYXNzaW5nIGRlc3Ryb3lpbmc6IHRydWUgdG8gYXZvaWQgc2VhcmNoaW5nIGFuZFxuXHQgICAgICAvLyBzcGxpY2luZyB0aGUgZGlyZWN0aXZlc1xuXHQgICAgICBjb250ZW50VW5saW5rRm4odHJ1ZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGZpbmFsbHkgcmVwbGFjZSBvcmlnaW5hbFxuXHQgICAgaWYgKG9wdGlvbnMucmVwbGFjZSkge1xuXHQgICAgICByZXBsYWNlKG9yaWdpbmFsLCBlbCk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5faXNDb21waWxlZCA9IHRydWU7XG5cdCAgICB0aGlzLl9jYWxsSG9vaygnY29tcGlsZWQnKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbml0aWFsaXplIGluc3RhbmNlIGVsZW1lbnQuIENhbGxlZCBpbiB0aGUgcHVibGljXG5cdCAgICogJG1vdW50KCkgbWV0aG9kLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0RWxlbWVudCA9IGZ1bmN0aW9uIChlbCkge1xuXHQgICAgaWYgKGlzRnJhZ21lbnQoZWwpKSB7XG5cdCAgICAgIHRoaXMuX2lzRnJhZ21lbnQgPSB0cnVlO1xuXHQgICAgICB0aGlzLiRlbCA9IHRoaXMuX2ZyYWdtZW50U3RhcnQgPSBlbC5maXJzdENoaWxkO1xuXHQgICAgICB0aGlzLl9mcmFnbWVudEVuZCA9IGVsLmxhc3RDaGlsZDtcblx0ICAgICAgLy8gc2V0IHBlcnNpc3RlZCB0ZXh0IGFuY2hvcnMgdG8gZW1wdHlcblx0ICAgICAgaWYgKHRoaXMuX2ZyYWdtZW50U3RhcnQubm9kZVR5cGUgPT09IDMpIHtcblx0ICAgICAgICB0aGlzLl9mcmFnbWVudFN0YXJ0LmRhdGEgPSB0aGlzLl9mcmFnbWVudEVuZC5kYXRhID0gJyc7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5fZnJhZ21lbnQgPSBlbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuJGVsID0gZWw7XG5cdCAgICB9XG5cdCAgICB0aGlzLiRlbC5fX3Z1ZV9fID0gdGhpcztcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdiZWZvcmVDb21waWxlJyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ3JlYXRlIGFuZCBiaW5kIGEgZGlyZWN0aXZlIHRvIGFuIGVsZW1lbnQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gZGVzY3JpcHRvciAtIHBhcnNlZCBkaXJlY3RpdmUgZGVzY3JpcHRvclxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAgIC0gdGFyZ2V0IG5vZGVcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gdHJhbnNjbHVzaW9uIGhvc3QgY29tcG9uZW50XG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIG93bmVyIGZyYWdtZW50XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2JpbmREaXIgPSBmdW5jdGlvbiAoZGVzY3JpcHRvciwgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIHRoaXMuX2RpcmVjdGl2ZXMucHVzaChuZXcgRGlyZWN0aXZlKGRlc2NyaXB0b3IsIHRoaXMsIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogVGVhcmRvd24gYW4gaW5zdGFuY2UsIHVub2JzZXJ2ZXMgdGhlIGRhdGEsIHVuYmluZCBhbGwgdGhlXG5cdCAgICogZGlyZWN0aXZlcywgdHVybiBvZmYgYWxsIHRoZSBldmVudCBsaXN0ZW5lcnMsIGV0Yy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlIC0gd2hldGhlciB0byByZW1vdmUgdGhlIERPTSBub2RlLlxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJDbGVhbnVwIC0gaWYgdHJ1ZSwgZGVmZXIgY2xlYW51cCB0b1xuXHQgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmUgY2FsbGVkIGxhdGVyXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAocmVtb3ZlLCBkZWZlckNsZWFudXApIHtcblx0ICAgIGlmICh0aGlzLl9pc0JlaW5nRGVzdHJveWVkKSB7XG5cdCAgICAgIGlmICghZGVmZXJDbGVhbnVwKSB7XG5cdCAgICAgICAgdGhpcy5fY2xlYW51cCgpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZGVzdHJveVJlYWR5O1xuXHQgICAgdmFyIHBlbmRpbmdSZW1vdmFsO1xuXHRcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIC8vIENsZWFudXAgc2hvdWxkIGJlIGNhbGxlZCBlaXRoZXIgc3luY2hyb25vdXNseSBvciBhc3luY2hyb25veXNseSBhc1xuXHQgICAgLy8gY2FsbGJhY2sgb2YgdGhpcy4kcmVtb3ZlKCksIG9yIGlmIHJlbW92ZSBhbmQgZGVmZXJDbGVhbnVwIGFyZSBmYWxzZS5cblx0ICAgIC8vIEluIGFueSBjYXNlIGl0IHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgYWxsIG90aGVyIHJlbW92aW5nLCB1bmJpbmRpbmcgYW5kXG5cdCAgICAvLyB0dXJuaW5nIG9mIGlzIGRvbmVcblx0ICAgIHZhciBjbGVhbnVwSWZQb3NzaWJsZSA9IGZ1bmN0aW9uIGNsZWFudXBJZlBvc3NpYmxlKCkge1xuXHQgICAgICBpZiAoZGVzdHJveVJlYWR5ICYmICFwZW5kaW5nUmVtb3ZhbCAmJiAhZGVmZXJDbGVhbnVwKSB7XG5cdCAgICAgICAgc2VsZi5fY2xlYW51cCgpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIHJlbW92ZSBET00gZWxlbWVudFxuXHQgICAgaWYgKHJlbW92ZSAmJiB0aGlzLiRlbCkge1xuXHQgICAgICBwZW5kaW5nUmVtb3ZhbCA9IHRydWU7XG5cdCAgICAgIHRoaXMuJHJlbW92ZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcGVuZGluZ1JlbW92YWwgPSBmYWxzZTtcblx0ICAgICAgICBjbGVhbnVwSWZQb3NzaWJsZSgpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLl9jYWxsSG9vaygnYmVmb3JlRGVzdHJveScpO1xuXHQgICAgdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCA9IHRydWU7XG5cdCAgICB2YXIgaTtcblx0ICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gcGFyZW50LiBvbmx5IG5lY2Vzc2FyeVxuXHQgICAgLy8gaWYgcGFyZW50IGlzIG5vdCBiZWluZyBkZXN0cm95ZWQgYXMgd2VsbC5cblx0ICAgIHZhciBwYXJlbnQgPSB0aGlzLiRwYXJlbnQ7XG5cdCAgICBpZiAocGFyZW50ICYmICFwYXJlbnQuX2lzQmVpbmdEZXN0cm95ZWQpIHtcblx0ICAgICAgcGFyZW50LiRjaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xuXHQgICAgICAvLyB1bnJlZ2lzdGVyIHJlZiAocmVtb3ZlOiB0cnVlKVxuXHQgICAgICB0aGlzLl91cGRhdGVSZWYodHJ1ZSk7XG5cdCAgICB9XG5cdCAgICAvLyBkZXN0cm95IGFsbCBjaGlsZHJlbi5cblx0ICAgIGkgPSB0aGlzLiRjaGlsZHJlbi5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHRoaXMuJGNoaWxkcmVuW2ldLiRkZXN0cm95KCk7XG5cdCAgICB9XG5cdCAgICAvLyB0ZWFyZG93biBwcm9wc1xuXHQgICAgaWYgKHRoaXMuX3Byb3BzVW5saW5rRm4pIHtcblx0ICAgICAgdGhpcy5fcHJvcHNVbmxpbmtGbigpO1xuXHQgICAgfVxuXHQgICAgLy8gdGVhcmRvd24gYWxsIGRpcmVjdGl2ZXMuIHRoaXMgYWxzbyB0ZWFyc2Rvd24gYWxsXG5cdCAgICAvLyBkaXJlY3RpdmUtb3duZWQgd2F0Y2hlcnMuXG5cdCAgICBpZiAodGhpcy5fdW5saW5rRm4pIHtcblx0ICAgICAgdGhpcy5fdW5saW5rRm4oKTtcblx0ICAgIH1cblx0ICAgIGkgPSB0aGlzLl93YXRjaGVycy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHRoaXMuX3dhdGNoZXJzW2ldLnRlYXJkb3duKCk7XG5cdCAgICB9XG5cdCAgICAvLyByZW1vdmUgcmVmZXJlbmNlIHRvIHNlbGYgb24gJGVsXG5cdCAgICBpZiAodGhpcy4kZWwpIHtcblx0ICAgICAgdGhpcy4kZWwuX192dWVfXyA9IG51bGw7XG5cdCAgICB9XG5cdFxuXHQgICAgZGVzdHJveVJlYWR5ID0gdHJ1ZTtcblx0ICAgIGNsZWFudXBJZlBvc3NpYmxlKCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ2xlYW4gdXAgdG8gZW5zdXJlIGdhcmJhZ2UgY29sbGVjdGlvbi5cblx0ICAgKiBUaGlzIGlzIGNhbGxlZCBhZnRlciB0aGUgbGVhdmUgdHJhbnNpdGlvbiBpZiB0aGVyZVxuXHQgICAqIGlzIGFueS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICh0aGlzLl9pc0Rlc3Ryb3llZCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICAvLyByZW1vdmUgc2VsZiBmcm9tIG93bmVyIGZyYWdtZW50XG5cdCAgICAvLyBkbyBpdCBpbiBjbGVhbnVwIHNvIHRoYXQgd2UgY2FuIGNhbGwgJGRlc3Ryb3kgd2l0aFxuXHQgICAgLy8gZGVmZXIgcmlnaHQgd2hlbiBhIGZyYWdtZW50IGlzIGFib3V0IHRvIGJlIHJlbW92ZWQuXG5cdCAgICBpZiAodGhpcy5fZnJhZykge1xuXHQgICAgICB0aGlzLl9mcmFnLmNoaWxkcmVuLiRyZW1vdmUodGhpcyk7XG5cdCAgICB9XG5cdCAgICAvLyByZW1vdmUgcmVmZXJlbmNlIGZyb20gZGF0YSBvYlxuXHQgICAgLy8gZnJvemVuIG9iamVjdCBtYXkgbm90IGhhdmUgb2JzZXJ2ZXIuXG5cdCAgICBpZiAodGhpcy5fZGF0YSAmJiB0aGlzLl9kYXRhLl9fb2JfXykge1xuXHQgICAgICB0aGlzLl9kYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKTtcblx0ICAgIH1cblx0ICAgIC8vIENsZWFuIHVwIHJlZmVyZW5jZXMgdG8gcHJpdmF0ZSBwcm9wZXJ0aWVzIGFuZCBvdGhlclxuXHQgICAgLy8gaW5zdGFuY2VzLiBwcmVzZXJ2ZSByZWZlcmVuY2UgdG8gX2RhdGEgc28gdGhhdCBwcm94eVxuXHQgICAgLy8gYWNjZXNzb3JzIHN0aWxsIHdvcmsuIFRoZSBvbmx5IHBvdGVudGlhbCBzaWRlIGVmZmVjdFxuXHQgICAgLy8gaGVyZSBpcyB0aGF0IG11dGF0aW5nIHRoZSBpbnN0YW5jZSBhZnRlciBpdCdzIGRlc3Ryb3llZFxuXHQgICAgLy8gbWF5IGFmZmVjdCB0aGUgc3RhdGUgb2Ygb3RoZXIgY29tcG9uZW50cyB0aGF0IGFyZSBzdGlsbFxuXHQgICAgLy8gb2JzZXJ2aW5nIHRoZSBzYW1lIG9iamVjdCwgYnV0IHRoYXQgc2VlbXMgdG8gYmUgYVxuXHQgICAgLy8gcmVhc29uYWJsZSByZXNwb25zaWJpbGl0eSBmb3IgdGhlIHVzZXIgcmF0aGVyIHRoYW5cblx0ICAgIC8vIGFsd2F5cyB0aHJvd2luZyBhbiBlcnJvciBvbiB0aGVtLlxuXHQgICAgdGhpcy4kZWwgPSB0aGlzLiRwYXJlbnQgPSB0aGlzLiRyb290ID0gdGhpcy4kY2hpbGRyZW4gPSB0aGlzLl93YXRjaGVycyA9IHRoaXMuX2NvbnRleHQgPSB0aGlzLl9zY29wZSA9IHRoaXMuX2RpcmVjdGl2ZXMgPSBudWxsO1xuXHQgICAgLy8gY2FsbCB0aGUgbGFzdCBob29rLi4uXG5cdCAgICB0aGlzLl9pc0Rlc3Ryb3llZCA9IHRydWU7XG5cdCAgICB0aGlzLl9jYWxsSG9vaygnZGVzdHJveWVkJyk7XG5cdCAgICAvLyB0dXJuIG9mZiBhbGwgaW5zdGFuY2UgbGlzdGVuZXJzLlxuXHQgICAgdGhpcy4kb2ZmKCk7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWlzY01peGluIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBBcHBseSBhIGxpc3Qgb2YgZmlsdGVyIChkZXNjcmlwdG9ycykgdG8gYSB2YWx1ZS5cblx0ICAgKiBVc2luZyBwbGFpbiBmb3IgbG9vcHMgaGVyZSBiZWNhdXNlIHRoaXMgd2lsbCBiZSBjYWxsZWQgaW5cblx0ICAgKiB0aGUgZ2V0dGVyIG9mIGFueSB3YXRjaGVyIHdpdGggZmlsdGVycyBzbyBpdCBpcyB2ZXJ5XG5cdCAgICogcGVyZm9ybWFuY2Ugc2Vuc2l0aXZlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7Kn0gW29sZFZhbHVlXVxuXHQgICAqIEBwYXJhbSB7QXJyYXl9IGZpbHRlcnNcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IHdyaXRlXG5cdCAgICogQHJldHVybiB7Kn1cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fYXBwbHlGaWx0ZXJzID0gZnVuY3Rpb24gKHZhbHVlLCBvbGRWYWx1ZSwgZmlsdGVycywgd3JpdGUpIHtcblx0ICAgIHZhciBmaWx0ZXIsIGZuLCBhcmdzLCBhcmcsIG9mZnNldCwgaSwgbCwgaiwgaztcblx0ICAgIGZvciAoaSA9IDAsIGwgPSBmaWx0ZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBmaWx0ZXIgPSBmaWx0ZXJzW3dyaXRlID8gbCAtIGkgLSAxIDogaV07XG5cdCAgICAgIGZuID0gcmVzb2x2ZUFzc2V0KHRoaXMuJG9wdGlvbnMsICdmaWx0ZXJzJywgZmlsdGVyLm5hbWUsIHRydWUpO1xuXHQgICAgICBpZiAoIWZuKSBjb250aW51ZTtcblx0ICAgICAgZm4gPSB3cml0ZSA/IGZuLndyaXRlIDogZm4ucmVhZCB8fCBmbjtcblx0ICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgY29udGludWU7XG5cdCAgICAgIGFyZ3MgPSB3cml0ZSA/IFt2YWx1ZSwgb2xkVmFsdWVdIDogW3ZhbHVlXTtcblx0ICAgICAgb2Zmc2V0ID0gd3JpdGUgPyAyIDogMTtcblx0ICAgICAgaWYgKGZpbHRlci5hcmdzKSB7XG5cdCAgICAgICAgZm9yIChqID0gMCwgayA9IGZpbHRlci5hcmdzLmxlbmd0aDsgaiA8IGs7IGorKykge1xuXHQgICAgICAgICAgYXJnID0gZmlsdGVyLmFyZ3Nbal07XG5cdCAgICAgICAgICBhcmdzW2ogKyBvZmZzZXRdID0gYXJnLmR5bmFtaWMgPyB0aGlzLiRnZXQoYXJnLnZhbHVlKSA6IGFyZy52YWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgdmFsdWUgPSBmbi5hcHBseSh0aGlzLCBhcmdzKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZXNvbHZlIGEgY29tcG9uZW50LCBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgY29tcG9uZW50XG5cdCAgICogaXMgZGVmaW5lZCBub3JtYWxseSBvciB1c2luZyBhbiBhc3luYyBmYWN0b3J5IGZ1bmN0aW9uLlxuXHQgICAqIFJlc29sdmVzIHN5bmNocm9ub3VzbHkgaWYgYWxyZWFkeSByZXNvbHZlZCwgb3RoZXJ3aXNlXG5cdCAgICogcmVzb2x2ZXMgYXN5bmNocm9ub3VzbHkgYW5kIGNhY2hlcyB0aGUgcmVzb2x2ZWRcblx0ICAgKiBjb25zdHJ1Y3RvciBvbiB0aGUgZmFjdG9yeS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX3Jlc29sdmVDb21wb25lbnQgPSBmdW5jdGlvbiAodmFsdWUsIGNiKSB7XG5cdCAgICB2YXIgZmFjdG9yeTtcblx0ICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgZmFjdG9yeSA9IHZhbHVlO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZmFjdG9yeSA9IHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnY29tcG9uZW50cycsIHZhbHVlLCB0cnVlKTtcblx0ICAgIH1cblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKCFmYWN0b3J5KSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIC8vIGFzeW5jIGNvbXBvbmVudCBmYWN0b3J5XG5cdCAgICBpZiAoIWZhY3Rvcnkub3B0aW9ucykge1xuXHQgICAgICBpZiAoZmFjdG9yeS5yZXNvbHZlZCkge1xuXHQgICAgICAgIC8vIGNhY2hlZFxuXHQgICAgICAgIGNiKGZhY3RvcnkucmVzb2x2ZWQpO1xuXHQgICAgICB9IGVsc2UgaWYgKGZhY3RvcnkucmVxdWVzdGVkKSB7XG5cdCAgICAgICAgLy8gcG9vbCBjYWxsYmFja3Ncblx0ICAgICAgICBmYWN0b3J5LnBlbmRpbmdDYWxsYmFja3MucHVzaChjYik7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZmFjdG9yeS5yZXF1ZXN0ZWQgPSB0cnVlO1xuXHQgICAgICAgIHZhciBjYnMgPSBmYWN0b3J5LnBlbmRpbmdDYWxsYmFja3MgPSBbY2JdO1xuXHQgICAgICAgIGZhY3RvcnkuY2FsbCh0aGlzLCBmdW5jdGlvbiByZXNvbHZlKHJlcykge1xuXHQgICAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QocmVzKSkge1xuXHQgICAgICAgICAgICByZXMgPSBWdWUuZXh0ZW5kKHJlcyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICAvLyBjYWNoZSByZXNvbHZlZFxuXHQgICAgICAgICAgZmFjdG9yeS5yZXNvbHZlZCA9IHJlcztcblx0ICAgICAgICAgIC8vIGludm9rZSBjYWxsYmFja3Ncblx0ICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgICAgICBjYnNbaV0ocmVzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG5cdCAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ZhaWxlZCB0byByZXNvbHZlIGFzeW5jIGNvbXBvbmVudCcgKyAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/ICc6ICcgKyB2YWx1ZSA6ICcnKSArICcuICcgKyAocmVhc29uID8gJ1xcblJlYXNvbjogJyArIHJlYXNvbiA6ICcnKSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIG5vcm1hbCBjb21wb25lbnRcblx0ICAgICAgY2IoZmFjdG9yeSk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0dmFyIGZpbHRlclJFJDEgPSAvW158XVxcfFtefF0vO1xuXHRcblx0ZnVuY3Rpb24gZGF0YUFQSSAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogR2V0IHRoZSB2YWx1ZSBmcm9tIGFuIGV4cHJlc3Npb24gb24gdGhpcyB2bS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFthc1N0YXRlbWVudF1cblx0ICAgKiBAcmV0dXJuIHsqfVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRnZXQgPSBmdW5jdGlvbiAoZXhwLCBhc1N0YXRlbWVudCkge1xuXHQgICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHApO1xuXHQgICAgaWYgKHJlcykge1xuXHQgICAgICBpZiAoYXNTdGF0ZW1lbnQpIHtcblx0ICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN0YXRlbWVudEhhbmRsZXIoKSB7XG5cdCAgICAgICAgICBzZWxmLiRhcmd1bWVudHMgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVzLmdldC5jYWxsKHNlbGYsIHNlbGYpO1xuXHQgICAgICAgICAgc2VsZi4kYXJndW1lbnRzID0gbnVsbDtcblx0ICAgICAgICAgIHJldHVybiByZXN1bHQ7XG5cdCAgICAgICAgfTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgcmV0dXJuIHJlcy5nZXQuY2FsbCh0aGlzLCB0aGlzKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogU2V0IHRoZSB2YWx1ZSBmcm9tIGFuIGV4cHJlc3Npb24gb24gdGhpcyB2bS5cblx0ICAgKiBUaGUgZXhwcmVzc2lvbiBtdXN0IGJlIGEgdmFsaWQgbGVmdC1oYW5kXG5cdCAgICogZXhwcmVzc2lvbiBpbiBhbiBhc3NpZ25tZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJHNldCA9IGZ1bmN0aW9uIChleHAsIHZhbCkge1xuXHQgICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHAsIHRydWUpO1xuXHQgICAgaWYgKHJlcyAmJiByZXMuc2V0KSB7XG5cdCAgICAgIHJlcy5zZXQuY2FsbCh0aGlzLCB0aGlzLCB2YWwpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIERlbGV0ZSBhIHByb3BlcnR5IG9uIHRoZSBWTVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRkZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICBkZWwodGhpcy5fZGF0YSwga2V5KTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBXYXRjaCBhbiBleHByZXNzaW9uLCB0cmlnZ2VyIGNhbGxiYWNrIHdoZW4gaXRzXG5cdCAgICogdmFsdWUgY2hhbmdlcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBleHBPckZuXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG5cdCAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGRlZXBcblx0ICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gaW1tZWRpYXRlXG5cdCAgICogQHJldHVybiB7RnVuY3Rpb259IC0gdW53YXRjaEZuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJHdhdGNoID0gZnVuY3Rpb24gKGV4cE9yRm4sIGNiLCBvcHRpb25zKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgdmFyIHBhcnNlZDtcblx0ICAgIGlmICh0eXBlb2YgZXhwT3JGbiA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUoZXhwT3JGbik7XG5cdCAgICAgIGV4cE9yRm4gPSBwYXJzZWQuZXhwcmVzc2lvbjtcblx0ICAgIH1cblx0ICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCB7XG5cdCAgICAgIGRlZXA6IG9wdGlvbnMgJiYgb3B0aW9ucy5kZWVwLFxuXHQgICAgICBzeW5jOiBvcHRpb25zICYmIG9wdGlvbnMuc3luYyxcblx0ICAgICAgZmlsdGVyczogcGFyc2VkICYmIHBhcnNlZC5maWx0ZXJzLFxuXHQgICAgICB1c2VyOiAhb3B0aW9ucyB8fCBvcHRpb25zLnVzZXIgIT09IGZhbHNlXG5cdCAgICB9KTtcblx0ICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuaW1tZWRpYXRlKSB7XG5cdCAgICAgIGNiLmNhbGwodm0sIHdhdGNoZXIudmFsdWUpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIHVud2F0Y2hGbigpIHtcblx0ICAgICAgd2F0Y2hlci50ZWFyZG93bigpO1xuXHQgICAgfTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBFdmFsdWF0ZSBhIHRleHQgZGlyZWN0aXZlLCBpbmNsdWRpbmcgZmlsdGVycy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXG5cdCAgICogQHJldHVybiB7U3RyaW5nfVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRldmFsID0gZnVuY3Rpb24gKHRleHQsIGFzU3RhdGVtZW50KSB7XG5cdCAgICAvLyBjaGVjayBmb3IgZmlsdGVycy5cblx0ICAgIGlmIChmaWx0ZXJSRSQxLnRlc3QodGV4dCkpIHtcblx0ICAgICAgdmFyIGRpciA9IHBhcnNlRGlyZWN0aXZlKHRleHQpO1xuXHQgICAgICAvLyB0aGUgZmlsdGVyIHJlZ2V4IGNoZWNrIG1pZ2h0IGdpdmUgZmFsc2UgcG9zaXRpdmVcblx0ICAgICAgLy8gZm9yIHBpcGVzIGluc2lkZSBzdHJpbmdzLCBzbyBpdCdzIHBvc3NpYmxlIHRoYXRcblx0ICAgICAgLy8gd2UgZG9uJ3QgZ2V0IGFueSBmaWx0ZXJzIGhlcmVcblx0ICAgICAgdmFyIHZhbCA9IHRoaXMuJGdldChkaXIuZXhwcmVzc2lvbiwgYXNTdGF0ZW1lbnQpO1xuXHQgICAgICByZXR1cm4gZGlyLmZpbHRlcnMgPyB0aGlzLl9hcHBseUZpbHRlcnModmFsLCBudWxsLCBkaXIuZmlsdGVycykgOiB2YWw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBubyBmaWx0ZXJcblx0ICAgICAgcmV0dXJuIHRoaXMuJGdldCh0ZXh0LCBhc1N0YXRlbWVudCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW50ZXJwb2xhdGUgYSBwaWVjZSBvZiB0ZW1wbGF0ZSB0ZXh0LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRcblx0ICAgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGludGVycG9sYXRlID0gZnVuY3Rpb24gKHRleHQpIHtcblx0ICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQodGV4dCk7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgaWYgKHRva2Vucykge1xuXHQgICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICAgIHJldHVybiB2bS4kZXZhbCh0b2tlbnNbMF0udmFsdWUpICsgJyc7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIHRva2Vucy5tYXAoZnVuY3Rpb24gKHRva2VuKSB7XG5cdCAgICAgICAgICByZXR1cm4gdG9rZW4udGFnID8gdm0uJGV2YWwodG9rZW4udmFsdWUpIDogdG9rZW4udmFsdWU7XG5cdCAgICAgICAgfSkuam9pbignJyk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiB0ZXh0O1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIExvZyBpbnN0YW5jZSBkYXRhIGFzIGEgcGxhaW4gSlMgb2JqZWN0XG5cdCAgICogc28gdGhhdCBpdCBpcyBlYXNpZXIgdG8gaW5zcGVjdCBpbiBjb25zb2xlLlxuXHQgICAqIFRoaXMgbWV0aG9kIGFzc3VtZXMgY29uc29sZSBpcyBhdmFpbGFibGUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gW3BhdGhdXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGxvZyA9IGZ1bmN0aW9uIChwYXRoKSB7XG5cdCAgICB2YXIgZGF0YSA9IHBhdGggPyBnZXRQYXRoKHRoaXMuX2RhdGEsIHBhdGgpIDogdGhpcy5fZGF0YTtcblx0ICAgIGlmIChkYXRhKSB7XG5cdCAgICAgIGRhdGEgPSBjbGVhbihkYXRhKTtcblx0ICAgIH1cblx0ICAgIC8vIGluY2x1ZGUgY29tcHV0ZWQgZmllbGRzXG5cdCAgICBpZiAoIXBhdGgpIHtcblx0ICAgICAgdmFyIGtleTtcblx0ICAgICAgZm9yIChrZXkgaW4gdGhpcy4kb3B0aW9ucy5jb21wdXRlZCkge1xuXHQgICAgICAgIGRhdGFba2V5XSA9IGNsZWFuKHRoaXNba2V5XSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHRoaXMuX3Byb3BzKSB7XG5cdCAgICAgICAgZm9yIChrZXkgaW4gdGhpcy5fcHJvcHMpIHtcblx0ICAgICAgICAgIGRhdGFba2V5XSA9IGNsZWFuKHRoaXNba2V5XSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBjb25zb2xlLmxvZyhkYXRhKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBcImNsZWFuXCIgYSBnZXR0ZXIvc2V0dGVyIGNvbnZlcnRlZCBvYmplY3QgaW50byBhIHBsYWluXG5cdCAgICogb2JqZWN0IGNvcHkuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gLSBvYmpcblx0ICAgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGNsZWFuKG9iaikge1xuXHQgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBkb21BUEkgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIENvbnZlbmllbmNlIG9uLWluc3RhbmNlIG5leHRUaWNrLiBUaGUgY2FsbGJhY2sgaXNcblx0ICAgKiBhdXRvLWJvdW5kIHRvIHRoZSBpbnN0YW5jZSwgYW5kIHRoaXMgYXZvaWRzIGNvbXBvbmVudFxuXHQgICAqIG1vZHVsZXMgaGF2aW5nIHRvIHJlbHkgb24gdGhlIGdsb2JhbCBWdWUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRuZXh0VGljayA9IGZ1bmN0aW9uIChmbikge1xuXHQgICAgbmV4dFRpY2soZm4sIHRoaXMpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEFwcGVuZCBpbnN0YW5jZSB0byB0YXJnZXRcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kYXBwZW5kVG8gPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICAgIHJldHVybiBpbnNlcnQodGhpcywgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIGFwcGVuZCwgYXBwZW5kV2l0aFRyYW5zaXRpb24pO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFByZXBlbmQgaW5zdGFuY2UgdG8gdGFyZ2V0XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJHByZXBlbmRUbyA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuXHQgICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcblx0ICAgIGlmICh0YXJnZXQuaGFzQ2hpbGROb2RlcygpKSB7XG5cdCAgICAgIHRoaXMuJGJlZm9yZSh0YXJnZXQuZmlyc3RDaGlsZCwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuJGFwcGVuZFRvKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluc2VydCBpbnN0YW5jZSBiZWZvcmUgdGFyZ2V0XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGJlZm9yZSA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuXHQgICAgcmV0dXJuIGluc2VydCh0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgYmVmb3JlV2l0aENiLCBiZWZvcmVXaXRoVHJhbnNpdGlvbik7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5zZXJ0IGluc3RhbmNlIGFmdGVyIHRhcmdldFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRhZnRlciA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuXHQgICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcblx0ICAgIGlmICh0YXJnZXQubmV4dFNpYmxpbmcpIHtcblx0ICAgICAgdGhpcy4kYmVmb3JlKHRhcmdldC5uZXh0U2libGluZywgY2IsIHdpdGhUcmFuc2l0aW9uKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuJGFwcGVuZFRvKHRhcmdldC5wYXJlbnROb2RlLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVtb3ZlIGluc3RhbmNlIGZyb20gRE9NXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRyZW1vdmUgPSBmdW5jdGlvbiAoY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgICBpZiAoIXRoaXMuJGVsLnBhcmVudE5vZGUpIHtcblx0ICAgICAgcmV0dXJuIGNiICYmIGNiKCk7XG5cdCAgICB9XG5cdCAgICB2YXIgaW5Eb2N1bWVudCA9IHRoaXMuX2lzQXR0YWNoZWQgJiYgaW5Eb2ModGhpcy4kZWwpO1xuXHQgICAgLy8gaWYgd2UgYXJlIG5vdCBpbiBkb2N1bWVudCwgbm8gbmVlZCB0byBjaGVja1xuXHQgICAgLy8gZm9yIHRyYW5zaXRpb25zXG5cdCAgICBpZiAoIWluRG9jdW1lbnQpIHdpdGhUcmFuc2l0aW9uID0gZmFsc2U7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgcmVhbENiID0gZnVuY3Rpb24gcmVhbENiKCkge1xuXHQgICAgICBpZiAoaW5Eb2N1bWVudCkgc2VsZi5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XG5cdCAgICAgIGlmIChjYikgY2IoKTtcblx0ICAgIH07XG5cdCAgICBpZiAodGhpcy5faXNGcmFnbWVudCkge1xuXHQgICAgICByZW1vdmVOb2RlUmFuZ2UodGhpcy5fZnJhZ21lbnRTdGFydCwgdGhpcy5fZnJhZ21lbnRFbmQsIHRoaXMsIHRoaXMuX2ZyYWdtZW50LCByZWFsQ2IpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIG9wID0gd2l0aFRyYW5zaXRpb24gPT09IGZhbHNlID8gcmVtb3ZlV2l0aENiIDogcmVtb3ZlV2l0aFRyYW5zaXRpb247XG5cdCAgICAgIG9wKHRoaXMuJGVsLCB0aGlzLCByZWFsQ2IpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogU2hhcmVkIERPTSBpbnNlcnRpb24gZnVuY3Rpb24uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl1cblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcDEgLSBvcCBmb3Igbm9uLXRyYW5zaXRpb24gaW5zZXJ0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3AyIC0gb3AgZm9yIHRyYW5zaXRpb24gaW5zZXJ0XG5cdCAgICogQHJldHVybiB2bVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBpbnNlcnQodm0sIHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uLCBvcDEsIG9wMikge1xuXHQgICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcblx0ICAgIHZhciB0YXJnZXRJc0RldGFjaGVkID0gIWluRG9jKHRhcmdldCk7XG5cdCAgICB2YXIgb3AgPSB3aXRoVHJhbnNpdGlvbiA9PT0gZmFsc2UgfHwgdGFyZ2V0SXNEZXRhY2hlZCA/IG9wMSA6IG9wMjtcblx0ICAgIHZhciBzaG91bGRDYWxsSG9vayA9ICF0YXJnZXRJc0RldGFjaGVkICYmICF2bS5faXNBdHRhY2hlZCAmJiAhaW5Eb2Modm0uJGVsKTtcblx0ICAgIGlmICh2bS5faXNGcmFnbWVudCkge1xuXHQgICAgICBtYXBOb2RlUmFuZ2Uodm0uX2ZyYWdtZW50U3RhcnQsIHZtLl9mcmFnbWVudEVuZCwgZnVuY3Rpb24gKG5vZGUpIHtcblx0ICAgICAgICBvcChub2RlLCB0YXJnZXQsIHZtKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIGNiICYmIGNiKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvcCh2bS4kZWwsIHRhcmdldCwgdm0sIGNiKTtcblx0ICAgIH1cblx0ICAgIGlmIChzaG91bGRDYWxsSG9vaykge1xuXHQgICAgICB2bS5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdm07XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBDaGVjayBmb3Igc2VsZWN0b3JzXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBlbFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBxdWVyeShlbCkge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBlbCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsKSA6IGVsO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQXBwZW5kIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IGVsXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGFwcGVuZChlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcblx0ICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XG5cdCAgICBpZiAoY2IpIGNiKCk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBJbnNlcnRCZWZvcmUgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gZWxcblx0ICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gYmVmb3JlV2l0aENiKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuXHQgICAgYmVmb3JlKGVsLCB0YXJnZXQpO1xuXHQgICAgaWYgKGNiKSBjYigpO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmVtb3ZlIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IGVsXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZW1vdmVXaXRoQ2IoZWwsIHZtLCBjYikge1xuXHQgICAgcmVtb3ZlKGVsKTtcblx0ICAgIGlmIChjYikgY2IoKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGV2ZW50c0FQSSAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogTGlzdGVuIG9uIHRoZSBnaXZlbiBgZXZlbnRgIHdpdGggYGZuYC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJG9uID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuXHQgICAgKHRoaXMuX2V2ZW50c1tldmVudF0gfHwgKHRoaXMuX2V2ZW50c1tldmVudF0gPSBbXSkpLnB1c2goZm4pO1xuXHQgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgMSk7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBBZGRzIGFuIGBldmVudGAgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGludm9rZWQgYSBzaW5nbGVcblx0ICAgKiB0aW1lIHRoZW4gYXV0b21hdGljYWxseSByZW1vdmVkLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kb25jZSA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIGZ1bmN0aW9uIG9uKCkge1xuXHQgICAgICBzZWxmLiRvZmYoZXZlbnQsIG9uKTtcblx0ICAgICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0ICAgIG9uLmZuID0gZm47XG5cdCAgICB0aGlzLiRvbihldmVudCwgb24pO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVtb3ZlIHRoZSBnaXZlbiBjYWxsYmFjayBmb3IgYGV2ZW50YCBvciBhbGxcblx0ICAgKiByZWdpc3RlcmVkIGNhbGxiYWNrcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJG9mZiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcblx0ICAgIHZhciBjYnM7XG5cdCAgICAvLyBhbGxcblx0ICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuXHQgICAgICBpZiAodGhpcy4kcGFyZW50KSB7XG5cdCAgICAgICAgZm9yIChldmVudCBpbiB0aGlzLl9ldmVudHMpIHtcblx0ICAgICAgICAgIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF07XG5cdCAgICAgICAgICBpZiAoY2JzKSB7XG5cdCAgICAgICAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC1jYnMubGVuZ3RoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5fZXZlbnRzID0ge307XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXHQgICAgLy8gc3BlY2lmaWMgZXZlbnRcblx0ICAgIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF07XG5cdCAgICBpZiAoIWNicykge1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC1jYnMubGVuZ3RoKTtcblx0ICAgICAgdGhpcy5fZXZlbnRzW2V2ZW50XSA9IG51bGw7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXHQgICAgLy8gc3BlY2lmaWMgaGFuZGxlclxuXHQgICAgdmFyIGNiO1xuXHQgICAgdmFyIGkgPSBjYnMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBjYiA9IGNic1tpXTtcblx0ICAgICAgaWYgKGNiID09PSBmbiB8fCBjYi5mbiA9PT0gZm4pIHtcblx0ICAgICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtMSk7XG5cdCAgICAgICAgY2JzLnNwbGljZShpLCAxKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogVHJpZ2dlciBhbiBldmVudCBvbiBzZWxmLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBldmVudFxuXHQgICAqIEByZXR1cm4ge0Jvb2xlYW59IHNob3VsZFByb3BhZ2F0ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRlbWl0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICB2YXIgaXNTb3VyY2UgPSB0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnO1xuXHQgICAgZXZlbnQgPSBpc1NvdXJjZSA/IGV2ZW50IDogZXZlbnQubmFtZTtcblx0ICAgIHZhciBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuXHQgICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IGlzU291cmNlIHx8ICFjYnM7XG5cdCAgICBpZiAoY2JzKSB7XG5cdCAgICAgIGNicyA9IGNicy5sZW5ndGggPiAxID8gdG9BcnJheShjYnMpIDogY2JzO1xuXHQgICAgICAvLyB0aGlzIGlzIGEgc29tZXdoYXQgaGFja3kgc29sdXRpb24gdG8gdGhlIHF1ZXN0aW9uIHJhaXNlZFxuXHQgICAgICAvLyBpbiAjMjEwMjogZm9yIGFuIGlubGluZSBjb21wb25lbnQgbGlzdGVuZXIgbGlrZSA8Y29tcCBAdGVzdD1cImRvVGhpc1wiPixcblx0ICAgICAgLy8gdGhlIHByb3BhZ2F0aW9uIGhhbmRsaW5nIGlzIHNvbWV3aGF0IGJyb2tlbi4gVGhlcmVmb3JlIHdlXG5cdCAgICAgIC8vIG5lZWQgdG8gdHJlYXQgdGhlc2UgaW5saW5lIGNhbGxiYWNrcyBkaWZmZXJlbnRseS5cblx0ICAgICAgdmFyIGhhc1BhcmVudENicyA9IGlzU291cmNlICYmIGNicy5zb21lKGZ1bmN0aW9uIChjYikge1xuXHQgICAgICAgIHJldHVybiBjYi5fZnJvbVBhcmVudDtcblx0ICAgICAgfSk7XG5cdCAgICAgIGlmIChoYXNQYXJlbnRDYnMpIHtcblx0ICAgICAgICBzaG91bGRQcm9wYWdhdGUgPSBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjYnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIGNiID0gY2JzW2ldO1xuXHQgICAgICAgIHZhciByZXMgPSBjYi5hcHBseSh0aGlzLCBhcmdzKTtcblx0ICAgICAgICBpZiAocmVzID09PSB0cnVlICYmICghaGFzUGFyZW50Q2JzIHx8IGNiLl9mcm9tUGFyZW50KSkge1xuXHQgICAgICAgICAgc2hvdWxkUHJvcGFnYXRlID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBzaG91bGRQcm9wYWdhdGU7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVjdXJzaXZlbHkgYnJvYWRjYXN0IGFuIGV2ZW50IHRvIGFsbCBjaGlsZHJlbiBpbnN0YW5jZXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGV2ZW50XG5cdCAgICogQHBhcmFtIHsuLi4qfSBhZGRpdGlvbmFsIGFyZ3VtZW50c1xuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRicm9hZGNhc3QgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIHZhciBpc1NvdXJjZSA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZyc7XG5cdCAgICBldmVudCA9IGlzU291cmNlID8gZXZlbnQgOiBldmVudC5uYW1lO1xuXHQgICAgLy8gaWYgbm8gY2hpbGQgaGFzIHJlZ2lzdGVyZWQgZm9yIHRoaXMgZXZlbnQsXG5cdCAgICAvLyB0aGVuIHRoZXJlJ3Mgbm8gbmVlZCB0byBicm9hZGNhc3QuXG5cdCAgICBpZiAoIXRoaXMuX2V2ZW50c0NvdW50W2V2ZW50XSkgcmV0dXJuO1xuXHQgICAgdmFyIGNoaWxkcmVuID0gdGhpcy4kY2hpbGRyZW47XG5cdCAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcblx0ICAgIGlmIChpc1NvdXJjZSkge1xuXHQgICAgICAvLyB1c2Ugb2JqZWN0IGV2ZW50IHRvIGluZGljYXRlIG5vbi1zb3VyY2UgZW1pdFxuXHQgICAgICAvLyBvbiBjaGlsZHJlblxuXHQgICAgICBhcmdzWzBdID0geyBuYW1lOiBldmVudCwgc291cmNlOiB0aGlzIH07XG5cdCAgICB9XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTtcblx0ICAgICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IGNoaWxkLiRlbWl0LmFwcGx5KGNoaWxkLCBhcmdzKTtcblx0ICAgICAgaWYgKHNob3VsZFByb3BhZ2F0ZSkge1xuXHQgICAgICAgIGNoaWxkLiRicm9hZGNhc3QuYXBwbHkoY2hpbGQsIGFyZ3MpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZWN1cnNpdmVseSBwcm9wYWdhdGUgYW4gZXZlbnQgdXAgdGhlIHBhcmVudCBjaGFpbi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgICAqIEBwYXJhbSB7Li4uKn0gYWRkaXRpb25hbCBhcmd1bWVudHNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZGlzcGF0Y2ggPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSB0aGlzLiRlbWl0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICBpZiAoIXNob3VsZFByb3BhZ2F0ZSkgcmV0dXJuO1xuXHQgICAgdmFyIHBhcmVudCA9IHRoaXMuJHBhcmVudDtcblx0ICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO1xuXHQgICAgLy8gdXNlIG9iamVjdCBldmVudCB0byBpbmRpY2F0ZSBub24tc291cmNlIGVtaXRcblx0ICAgIC8vIG9uIHBhcmVudHNcblx0ICAgIGFyZ3NbMF0gPSB7IG5hbWU6IGV2ZW50LCBzb3VyY2U6IHRoaXMgfTtcblx0ICAgIHdoaWxlIChwYXJlbnQpIHtcblx0ICAgICAgc2hvdWxkUHJvcGFnYXRlID0gcGFyZW50LiRlbWl0LmFwcGx5KHBhcmVudCwgYXJncyk7XG5cdCAgICAgIHBhcmVudCA9IHNob3VsZFByb3BhZ2F0ZSA/IHBhcmVudC4kcGFyZW50IDogbnVsbDtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIE1vZGlmeSB0aGUgbGlzdGVuZXIgY291bnRzIG9uIGFsbCBwYXJlbnRzLlxuXHQgICAqIFRoaXMgYm9va2tlZXBpbmcgYWxsb3dzICRicm9hZGNhc3QgdG8gcmV0dXJuIGVhcmx5IHdoZW5cblx0ICAgKiBubyBjaGlsZCBoYXMgbGlzdGVuZWQgdG8gYSBjZXJ0YWluIGV2ZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50XG5cdCAgICovXG5cdFxuXHQgIHZhciBob29rUkUgPSAvXmhvb2s6Lztcblx0ICBmdW5jdGlvbiBtb2RpZnlMaXN0ZW5lckNvdW50KHZtLCBldmVudCwgY291bnQpIHtcblx0ICAgIHZhciBwYXJlbnQgPSB2bS4kcGFyZW50O1xuXHQgICAgLy8gaG9va3MgZG8gbm90IGdldCBicm9hZGNhc3RlZCBzbyBubyBuZWVkXG5cdCAgICAvLyB0byBkbyBib29ra2VlcGluZyBmb3IgdGhlbVxuXHQgICAgaWYgKCFwYXJlbnQgfHwgIWNvdW50IHx8IGhvb2tSRS50ZXN0KGV2ZW50KSkgcmV0dXJuO1xuXHQgICAgd2hpbGUgKHBhcmVudCkge1xuXHQgICAgICBwYXJlbnQuX2V2ZW50c0NvdW50W2V2ZW50XSA9IChwYXJlbnQuX2V2ZW50c0NvdW50W2V2ZW50XSB8fCAwKSArIGNvdW50O1xuXHQgICAgICBwYXJlbnQgPSBwYXJlbnQuJHBhcmVudDtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxpZmVjeWNsZUFQSSAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogU2V0IGluc3RhbmNlIHRhcmdldCBlbGVtZW50IGFuZCBraWNrIG9mZiB0aGUgY29tcGlsYXRpb25cblx0ICAgKiBwcm9jZXNzLiBUaGUgcGFzc2VkIGluIGBlbGAgY2FuIGJlIGEgc2VsZWN0b3Igc3RyaW5nLCBhblxuXHQgICAqIGV4aXN0aW5nIEVsZW1lbnQsIG9yIGEgRG9jdW1lbnRGcmFnbWVudCAoZm9yIGJsb2NrXG5cdCAgICogaW5zdGFuY2VzKS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fHN0cmluZ30gZWxcblx0ICAgKiBAcHVibGljXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJG1vdW50ID0gZnVuY3Rpb24gKGVsKSB7XG5cdCAgICBpZiAodGhpcy5faXNDb21waWxlZCkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJyRtb3VudCgpIHNob3VsZCBiZSBjYWxsZWQgb25seSBvbmNlLicsIHRoaXMpO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBlbCA9IHF1ZXJ5KGVsKTtcblx0ICAgIGlmICghZWwpIHtcblx0ICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIH1cblx0ICAgIHRoaXMuX2NvbXBpbGUoZWwpO1xuXHQgICAgdGhpcy5faW5pdERPTUhvb2tzKCk7XG5cdCAgICBpZiAoaW5Eb2ModGhpcy4kZWwpKSB7XG5cdCAgICAgIHRoaXMuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuXHQgICAgICByZWFkeS5jYWxsKHRoaXMpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy4kb25jZSgnaG9vazphdHRhY2hlZCcsIHJlYWR5KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIE1hcmsgYW4gaW5zdGFuY2UgYXMgcmVhZHkuXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJlYWR5KCkge1xuXHQgICAgdGhpcy5faXNBdHRhY2hlZCA9IHRydWU7XG5cdCAgICB0aGlzLl9pc1JlYWR5ID0gdHJ1ZTtcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdyZWFkeScpO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogVGVhcmRvd24gdGhlIGluc3RhbmNlLCBzaW1wbHkgZGVsZWdhdGUgdG8gdGhlIGludGVybmFsXG5cdCAgICogX2Rlc3Ryb3kuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJDbGVhbnVwXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGRlc3Ryb3kgPSBmdW5jdGlvbiAocmVtb3ZlLCBkZWZlckNsZWFudXApIHtcblx0ICAgIHRoaXMuX2Rlc3Ryb3kocmVtb3ZlLCBkZWZlckNsZWFudXApO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFBhcnRpYWxseSBjb21waWxlIGEgcGllY2Ugb2YgRE9NIGFuZCByZXR1cm4gYVxuXHQgICAqIGRlY29tcGlsZSBmdW5jdGlvbi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuXHQgICAqIEBwYXJhbSB7VnVlfSBbaG9zdF1cblx0ICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXVxuXHQgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRjb21waWxlID0gZnVuY3Rpb24gKGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgcmV0dXJuIGNvbXBpbGUoZWwsIHRoaXMuJG9wdGlvbnMsIHRydWUpKHRoaXMsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoZSBleHBvc2VkIFZ1ZSBjb25zdHJ1Y3Rvci5cblx0ICpcblx0ICogQVBJIGNvbnZlbnRpb25zOlxuXHQgKiAtIHB1YmxpYyBBUEkgbWV0aG9kcy9wcm9wZXJ0aWVzIGFyZSBwcmVmaXhlZCB3aXRoIGAkYFxuXHQgKiAtIGludGVybmFsIG1ldGhvZHMvcHJvcGVydGllcyBhcmUgcHJlZml4ZWQgd2l0aCBgX2Bcblx0ICogLSBub24tcHJlZml4ZWQgcHJvcGVydGllcyBhcmUgYXNzdW1lZCB0byBiZSBwcm94aWVkIHVzZXJcblx0ICogICBkYXRhLlxuXHQgKlxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gVnVlKG9wdGlvbnMpIHtcblx0ICB0aGlzLl9pbml0KG9wdGlvbnMpO1xuXHR9XG5cdFxuXHQvLyBpbnN0YWxsIGludGVybmFsc1xuXHRpbml0TWl4aW4oVnVlKTtcblx0c3RhdGVNaXhpbihWdWUpO1xuXHRldmVudHNNaXhpbihWdWUpO1xuXHRsaWZlY3ljbGVNaXhpbihWdWUpO1xuXHRtaXNjTWl4aW4oVnVlKTtcblx0XG5cdC8vIGluc3RhbGwgaW5zdGFuY2UgQVBJc1xuXHRkYXRhQVBJKFZ1ZSk7XG5cdGRvbUFQSShWdWUpO1xuXHRldmVudHNBUEkoVnVlKTtcblx0bGlmZWN5Y2xlQVBJKFZ1ZSk7XG5cdFxuXHR2YXIgc2xvdCA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IFNMT1QsXG5cdCAgcGFyYW1zOiBbJ25hbWUnXSxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8vIHRoaXMgd2FzIHJlc29sdmVkIGR1cmluZyBjb21wb25lbnQgdHJhbnNjbHVzaW9uXG5cdCAgICB2YXIgbmFtZSA9IHRoaXMucGFyYW1zLm5hbWUgfHwgJ2RlZmF1bHQnO1xuXHQgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnZtLl9zbG90Q29udGVudHMgJiYgdGhpcy52bS5fc2xvdENvbnRlbnRzW25hbWVdO1xuXHQgICAgaWYgKCFjb250ZW50IHx8ICFjb250ZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xuXHQgICAgICB0aGlzLmZhbGxiYWNrKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmNvbXBpbGUoY29udGVudC5jbG9uZU5vZGUodHJ1ZSksIHRoaXMudm0uX2NvbnRleHQsIHRoaXMudm0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGNvbXBpbGU6IGZ1bmN0aW9uIGNvbXBpbGUoY29udGVudCwgY29udGV4dCwgaG9zdCkge1xuXHQgICAgaWYgKGNvbnRlbnQgJiYgY29udGV4dCkge1xuXHQgICAgICBpZiAodGhpcy5lbC5oYXNDaGlsZE5vZGVzKCkgJiYgY29udGVudC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSAmJiBjb250ZW50LmNoaWxkTm9kZXNbMF0ubm9kZVR5cGUgPT09IDEgJiYgY29udGVudC5jaGlsZE5vZGVzWzBdLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG5cdCAgICAgICAgLy8gaWYgdGhlIGluc2VydGVkIHNsb3QgaGFzIHYtaWZcblx0ICAgICAgICAvLyBpbmplY3QgZmFsbGJhY2sgY29udGVudCBhcyB0aGUgdi1lbHNlXG5cdCAgICAgICAgdmFyIGVsc2VCbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG5cdCAgICAgICAgZWxzZUJsb2NrLnNldEF0dHJpYnV0ZSgndi1lbHNlJywgJycpO1xuXHQgICAgICAgIGVsc2VCbG9jay5pbm5lckhUTUwgPSB0aGlzLmVsLmlubmVySFRNTDtcblx0ICAgICAgICAvLyB0aGUgZWxzZSBibG9jayBzaG91bGQgYmUgY29tcGlsZWQgaW4gY2hpbGQgc2NvcGVcblx0ICAgICAgICBlbHNlQmxvY2suX2NvbnRleHQgPSB0aGlzLnZtO1xuXHQgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWxzZUJsb2NrKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgc2NvcGUgPSBob3N0ID8gaG9zdC5fc2NvcGUgOiB0aGlzLl9zY29wZTtcblx0ICAgICAgdGhpcy51bmxpbmsgPSBjb250ZXh0LiRjb21waWxlKGNvbnRlbnQsIGhvc3QsIHNjb3BlLCB0aGlzLl9mcmFnKTtcblx0ICAgIH1cblx0ICAgIGlmIChjb250ZW50KSB7XG5cdCAgICAgIHJlcGxhY2UodGhpcy5lbCwgY29udGVudCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZW1vdmUodGhpcy5lbCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgZmFsbGJhY2s6IGZ1bmN0aW9uIGZhbGxiYWNrKCkge1xuXHQgICAgdGhpcy5jb21waWxlKGV4dHJhY3RDb250ZW50KHRoaXMuZWwsIHRydWUpLCB0aGlzLnZtKTtcblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIGlmICh0aGlzLnVubGluaykge1xuXHQgICAgICB0aGlzLnVubGluaygpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBwYXJ0aWFsID0ge1xuXHRcblx0ICBwcmlvcml0eTogUEFSVElBTCxcblx0XG5cdCAgcGFyYW1zOiBbJ25hbWUnXSxcblx0XG5cdCAgLy8gd2F0Y2ggY2hhbmdlcyB0byBuYW1lIGZvciBkeW5hbWljIHBhcnRpYWxzXG5cdCAgcGFyYW1XYXRjaGVyczoge1xuXHQgICAgbmFtZTogZnVuY3Rpb24gbmFtZSh2YWx1ZSkge1xuXHQgICAgICB2SWYucmVtb3ZlLmNhbGwodGhpcyk7XG5cdCAgICAgIGlmICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMuaW5zZXJ0KHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1wYXJ0aWFsJyk7XG5cdCAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcblx0ICAgIHRoaXMuaW5zZXJ0KHRoaXMucGFyYW1zLm5hbWUpO1xuXHQgIH0sXG5cdFxuXHQgIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KGlkKSB7XG5cdCAgICB2YXIgcGFydGlhbCA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAncGFydGlhbHMnLCBpZCwgdHJ1ZSk7XG5cdCAgICBpZiAocGFydGlhbCkge1xuXHQgICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHBhcnRpYWwpO1xuXHQgICAgICB2SWYuaW5zZXJ0LmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICBpZiAodGhpcy5mcmFnKSB7XG5cdCAgICAgIHRoaXMuZnJhZy5kZXN0cm95KCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGVsZW1lbnREaXJlY3RpdmVzID0ge1xuXHQgIHNsb3Q6IHNsb3QsXG5cdCAgcGFydGlhbDogcGFydGlhbFxuXHR9O1xuXHRcblx0dmFyIGNvbnZlcnRBcnJheSA9IHZGb3IuX3Bvc3RQcm9jZXNzO1xuXHRcblx0LyoqXG5cdCAqIExpbWl0IGZpbHRlciBmb3IgYXJyYXlzXG5cdCAqXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBuXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgKERlY2ltYWwgZXhwZWN0ZWQpXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbGltaXRCeShhcnIsIG4sIG9mZnNldCkge1xuXHQgIG9mZnNldCA9IG9mZnNldCA/IHBhcnNlSW50KG9mZnNldCwgMTApIDogMDtcblx0ICBuID0gdG9OdW1iZXIobik7XG5cdCAgcmV0dXJuIHR5cGVvZiBuID09PSAnbnVtYmVyJyA/IGFyci5zbGljZShvZmZzZXQsIG9mZnNldCArIG4pIDogYXJyO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRmlsdGVyIGZpbHRlciBmb3IgYXJyYXlzXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcblx0ICogQHBhcmFtIHtTdHJpbmd9IFtkZWxpbWl0ZXJdXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSAuLi5kYXRhS2V5c1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZpbHRlckJ5KGFyciwgc2VhcmNoLCBkZWxpbWl0ZXIpIHtcblx0ICBhcnIgPSBjb252ZXJ0QXJyYXkoYXJyKTtcblx0ICBpZiAoc2VhcmNoID09IG51bGwpIHtcblx0ICAgIHJldHVybiBhcnI7XG5cdCAgfVxuXHQgIGlmICh0eXBlb2Ygc2VhcmNoID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICByZXR1cm4gYXJyLmZpbHRlcihzZWFyY2gpO1xuXHQgIH1cblx0ICAvLyBjYXN0IHRvIGxvd2VyY2FzZSBzdHJpbmdcblx0ICBzZWFyY2ggPSAoJycgKyBzZWFyY2gpLnRvTG93ZXJDYXNlKCk7XG5cdCAgLy8gYWxsb3cgb3B0aW9uYWwgYGluYCBkZWxpbWl0ZXJcblx0ICAvLyBiZWNhdXNlIHdoeSBub3Rcblx0ICB2YXIgbiA9IGRlbGltaXRlciA9PT0gJ2luJyA/IDMgOiAyO1xuXHQgIC8vIGV4dHJhY3QgYW5kIGZsYXR0ZW4ga2V5c1xuXHQgIHZhciBrZXlzID0gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgdG9BcnJheShhcmd1bWVudHMsIG4pKTtcblx0ICB2YXIgcmVzID0gW107XG5cdCAgdmFyIGl0ZW0sIGtleSwgdmFsLCBqO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gYXJyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgaXRlbSA9IGFycltpXTtcblx0ICAgIHZhbCA9IGl0ZW0gJiYgaXRlbS4kdmFsdWUgfHwgaXRlbTtcblx0ICAgIGogPSBrZXlzLmxlbmd0aDtcblx0ICAgIGlmIChqKSB7XG5cdCAgICAgIHdoaWxlIChqLS0pIHtcblx0ICAgICAgICBrZXkgPSBrZXlzW2pdO1xuXHQgICAgICAgIGlmIChrZXkgPT09ICcka2V5JyAmJiBjb250YWlucyhpdGVtLiRrZXksIHNlYXJjaCkgfHwgY29udGFpbnMoZ2V0UGF0aCh2YWwsIGtleSksIHNlYXJjaCkpIHtcblx0ICAgICAgICAgIHJlcy5wdXNoKGl0ZW0pO1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKGNvbnRhaW5zKGl0ZW0sIHNlYXJjaCkpIHtcblx0ICAgICAgcmVzLnB1c2goaXRlbSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGaWx0ZXIgZmlsdGVyIGZvciBhcnJheXNcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd8QXJyYXk8U3RyaW5nPnxGdW5jdGlvbn0gLi4uc29ydEtleXNcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtvcmRlcl1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBvcmRlckJ5KGFycikge1xuXHQgIHZhciBjb21wYXJhdG9yID0gbnVsbDtcblx0ICB2YXIgc29ydEtleXMgPSB1bmRlZmluZWQ7XG5cdCAgYXJyID0gY29udmVydEFycmF5KGFycik7XG5cdFxuXHQgIC8vIGRldGVybWluZSBvcmRlciAobGFzdCBhcmd1bWVudClcblx0ICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcblx0ICB2YXIgb3JkZXIgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07XG5cdCAgaWYgKHR5cGVvZiBvcmRlciA9PT0gJ251bWJlcicpIHtcblx0ICAgIG9yZGVyID0gb3JkZXIgPCAwID8gLTEgOiAxO1xuXHQgICAgYXJncyA9IGFyZ3MubGVuZ3RoID4gMSA/IGFyZ3Muc2xpY2UoMCwgLTEpIDogYXJncztcblx0ICB9IGVsc2Uge1xuXHQgICAgb3JkZXIgPSAxO1xuXHQgIH1cblx0XG5cdCAgLy8gZGV0ZXJtaW5lIHNvcnRLZXlzICYgY29tcGFyYXRvclxuXHQgIHZhciBmaXJzdEFyZyA9IGFyZ3NbMF07XG5cdCAgaWYgKCFmaXJzdEFyZykge1xuXHQgICAgcmV0dXJuIGFycjtcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBmaXJzdEFyZyA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgLy8gY3VzdG9tIGNvbXBhcmF0b3Jcblx0ICAgIGNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikge1xuXHQgICAgICByZXR1cm4gZmlyc3RBcmcoYSwgYikgKiBvcmRlcjtcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIHN0cmluZyBrZXlzLiBmbGF0dGVuIGZpcnN0XG5cdCAgICBzb3J0S2V5cyA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIGFyZ3MpO1xuXHQgICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uIChhLCBiLCBpKSB7XG5cdCAgICAgIGkgPSBpIHx8IDA7XG5cdCAgICAgIHJldHVybiBpID49IHNvcnRLZXlzLmxlbmd0aCAtIDEgPyBiYXNlQ29tcGFyZShhLCBiLCBpKSA6IGJhc2VDb21wYXJlKGEsIGIsIGkpIHx8IGNvbXBhcmF0b3IoYSwgYiwgaSArIDEpO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGJhc2VDb21wYXJlKGEsIGIsIHNvcnRLZXlJbmRleCkge1xuXHQgICAgdmFyIHNvcnRLZXkgPSBzb3J0S2V5c1tzb3J0S2V5SW5kZXhdO1xuXHQgICAgaWYgKHNvcnRLZXkpIHtcblx0ICAgICAgaWYgKHNvcnRLZXkgIT09ICcka2V5Jykge1xuXHQgICAgICAgIGlmIChpc09iamVjdChhKSAmJiAnJHZhbHVlJyBpbiBhKSBhID0gYS4kdmFsdWU7XG5cdCAgICAgICAgaWYgKGlzT2JqZWN0KGIpICYmICckdmFsdWUnIGluIGIpIGIgPSBiLiR2YWx1ZTtcblx0ICAgICAgfVxuXHQgICAgICBhID0gaXNPYmplY3QoYSkgPyBnZXRQYXRoKGEsIHNvcnRLZXkpIDogYTtcblx0ICAgICAgYiA9IGlzT2JqZWN0KGIpID8gZ2V0UGF0aChiLCBzb3J0S2V5KSA6IGI7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gYSA9PT0gYiA/IDAgOiBhID4gYiA/IG9yZGVyIDogLW9yZGVyO1xuXHQgIH1cblx0XG5cdCAgLy8gc29ydCBvbiBhIGNvcHkgdG8gYXZvaWQgbXV0YXRpbmcgb3JpZ2luYWwgYXJyYXlcblx0ICByZXR1cm4gYXJyLnNsaWNlKCkuc29ydChjb21wYXJhdG9yKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFN0cmluZyBjb250YWluIGhlbHBlclxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29udGFpbnModmFsLCBzZWFyY2gpIHtcblx0ICB2YXIgaTtcblx0ICBpZiAoaXNQbGFpbk9iamVjdCh2YWwpKSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7XG5cdCAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGlmIChjb250YWlucyh2YWxba2V5c1tpXV0sIHNlYXJjaCkpIHtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWwpKSB7XG5cdCAgICBpID0gdmFsLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgaWYgKGNvbnRhaW5zKHZhbFtpXSwgc2VhcmNoKSkge1xuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICh2YWwgIT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIHZhbC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzZWFyY2gpID4gLTE7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgZGlnaXRzUkUgPSAvKFxcZHszfSkoPz1cXGQpL2c7XG5cdFxuXHQvLyBhc3NldCBjb2xsZWN0aW9ucyBtdXN0IGJlIGEgcGxhaW4gb2JqZWN0LlxuXHR2YXIgZmlsdGVycyA9IHtcblx0XG5cdCAgb3JkZXJCeTogb3JkZXJCeSxcblx0ICBmaWx0ZXJCeTogZmlsdGVyQnksXG5cdCAgbGltaXRCeTogbGltaXRCeSxcblx0XG5cdCAgLyoqXG5cdCAgICogU3RyaW5naWZ5IHZhbHVlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGVudFxuXHQgICAqL1xuXHRcblx0ICBqc29uOiB7XG5cdCAgICByZWFkOiBmdW5jdGlvbiByZWFkKHZhbHVlLCBpbmRlbnQpIHtcblx0ICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyB2YWx1ZSA6IEpTT04uc3RyaW5naWZ5KHZhbHVlLCBudWxsLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGluZGVudCA6IDIpO1xuXHQgICAgfSxcblx0ICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZSh2YWx1ZSkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqICdhYmMnID0+ICdBYmMnXG5cdCAgICovXG5cdFxuXHQgIGNhcGl0YWxpemU6IGZ1bmN0aW9uIGNhcGl0YWxpemUodmFsdWUpIHtcblx0ICAgIGlmICghdmFsdWUgJiYgdmFsdWUgIT09IDApIHJldHVybiAnJztcblx0ICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcblx0ICAgIHJldHVybiB2YWx1ZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHZhbHVlLnNsaWNlKDEpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqICdhYmMnID0+ICdBQkMnXG5cdCAgICovXG5cdFxuXHQgIHVwcGVyY2FzZTogZnVuY3Rpb24gdXBwZXJjYXNlKHZhbHVlKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgfHwgdmFsdWUgPT09IDAgPyB2YWx1ZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgOiAnJztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiAnQWJDJyA9PiAnYWJjJ1xuXHQgICAqL1xuXHRcblx0ICBsb3dlcmNhc2U6IGZ1bmN0aW9uIGxvd2VyY2FzZSh2YWx1ZSkge1xuXHQgICAgcmV0dXJuIHZhbHVlIHx8IHZhbHVlID09PSAwID8gdmFsdWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpIDogJyc7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogMTIzNDUgPT4gJDEyLDM0NS4wMFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHNpZ25cblx0ICAgKiBAcGFyYW0ge051bWJlcn0gZGVjaW1hbHMgRGVjaW1hbCBwbGFjZXNcblx0ICAgKi9cblx0XG5cdCAgY3VycmVuY3k6IGZ1bmN0aW9uIGN1cnJlbmN5KHZhbHVlLCBfY3VycmVuY3ksIGRlY2ltYWxzKSB7XG5cdCAgICB2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpO1xuXHQgICAgaWYgKCFpc0Zpbml0ZSh2YWx1ZSkgfHwgIXZhbHVlICYmIHZhbHVlICE9PSAwKSByZXR1cm4gJyc7XG5cdCAgICBfY3VycmVuY3kgPSBfY3VycmVuY3kgIT0gbnVsbCA/IF9jdXJyZW5jeSA6ICckJztcblx0ICAgIGRlY2ltYWxzID0gZGVjaW1hbHMgIT0gbnVsbCA/IGRlY2ltYWxzIDogMjtcblx0ICAgIHZhciBzdHJpbmdpZmllZCA9IE1hdGguYWJzKHZhbHVlKS50b0ZpeGVkKGRlY2ltYWxzKTtcblx0ICAgIHZhciBfaW50ID0gZGVjaW1hbHMgPyBzdHJpbmdpZmllZC5zbGljZSgwLCAtMSAtIGRlY2ltYWxzKSA6IHN0cmluZ2lmaWVkO1xuXHQgICAgdmFyIGkgPSBfaW50Lmxlbmd0aCAlIDM7XG5cdCAgICB2YXIgaGVhZCA9IGkgPiAwID8gX2ludC5zbGljZSgwLCBpKSArIChfaW50Lmxlbmd0aCA+IDMgPyAnLCcgOiAnJykgOiAnJztcblx0ICAgIHZhciBfZmxvYXQgPSBkZWNpbWFscyA/IHN0cmluZ2lmaWVkLnNsaWNlKC0xIC0gZGVjaW1hbHMpIDogJyc7XG5cdCAgICB2YXIgc2lnbiA9IHZhbHVlIDwgMCA/ICctJyA6ICcnO1xuXHQgICAgcmV0dXJuIHNpZ24gKyBfY3VycmVuY3kgKyBoZWFkICsgX2ludC5zbGljZShpKS5yZXBsYWNlKGRpZ2l0c1JFLCAnJDEsJykgKyBfZmxvYXQ7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogJ2l0ZW0nID0+ICdpdGVtcydcblx0ICAgKlxuXHQgICAqIEBwYXJhbXNcblx0ICAgKiAgYW4gYXJyYXkgb2Ygc3RyaW5ncyBjb3JyZXNwb25kaW5nIHRvXG5cdCAgICogIHRoZSBzaW5nbGUsIGRvdWJsZSwgdHJpcGxlIC4uLiBmb3JtcyBvZiB0aGUgd29yZCB0b1xuXHQgICAqICBiZSBwbHVyYWxpemVkLiBXaGVuIHRoZSBudW1iZXIgdG8gYmUgcGx1cmFsaXplZFxuXHQgICAqICBleGNlZWRzIHRoZSBsZW5ndGggb2YgdGhlIGFyZ3MsIGl0IHdpbGwgdXNlIHRoZSBsYXN0XG5cdCAgICogIGVudHJ5IGluIHRoZSBhcnJheS5cblx0ICAgKlxuXHQgICAqICBlLmcuIFsnc2luZ2xlJywgJ2RvdWJsZScsICd0cmlwbGUnLCAnbXVsdGlwbGUnXVxuXHQgICAqL1xuXHRcblx0ICBwbHVyYWxpemU6IGZ1bmN0aW9uIHBsdXJhbGl6ZSh2YWx1ZSkge1xuXHQgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG5cdCAgICB2YXIgbGVuZ3RoID0gYXJncy5sZW5ndGg7XG5cdCAgICBpZiAobGVuZ3RoID4gMSkge1xuXHQgICAgICB2YXIgaW5kZXggPSB2YWx1ZSAlIDEwIC0gMTtcblx0ICAgICAgcmV0dXJuIGluZGV4IGluIGFyZ3MgPyBhcmdzW2luZGV4XSA6IGFyZ3NbbGVuZ3RoIC0gMV07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gYXJnc1swXSArICh2YWx1ZSA9PT0gMSA/ICcnIDogJ3MnKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBEZWJvdW5jZSBhIGhhbmRsZXIgZnVuY3Rpb24uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGRlbGF5ID0gMzAwXG5cdCAgICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAgICovXG5cdFxuXHQgIGRlYm91bmNlOiBmdW5jdGlvbiBkZWJvdW5jZShoYW5kbGVyLCBkZWxheSkge1xuXHQgICAgaWYgKCFoYW5kbGVyKSByZXR1cm47XG5cdCAgICBpZiAoIWRlbGF5KSB7XG5cdCAgICAgIGRlbGF5ID0gMzAwO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIF9kZWJvdW5jZShoYW5kbGVyLCBkZWxheSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gaW5zdGFsbEdsb2JhbEFQSSAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogVnVlIGFuZCBldmVyeSBjb25zdHJ1Y3RvciB0aGF0IGV4dGVuZHMgVnVlIGhhcyBhblxuXHQgICAqIGFzc29jaWF0ZWQgb3B0aW9ucyBvYmplY3QsIHdoaWNoIGNhbiBiZSBhY2Nlc3NlZCBkdXJpbmdcblx0ICAgKiBjb21waWxhdGlvbiBzdGVwcyBhcyBgdGhpcy5jb25zdHJ1Y3Rvci5vcHRpb25zYC5cblx0ICAgKlxuXHQgICAqIFRoZXNlIGNhbiBiZSBzZWVuIGFzIHRoZSBkZWZhdWx0IG9wdGlvbnMgb2YgZXZlcnlcblx0ICAgKiBWdWUgaW5zdGFuY2UuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5vcHRpb25zID0ge1xuXHQgICAgZGlyZWN0aXZlczogZGlyZWN0aXZlcyxcblx0ICAgIGVsZW1lbnREaXJlY3RpdmVzOiBlbGVtZW50RGlyZWN0aXZlcyxcblx0ICAgIGZpbHRlcnM6IGZpbHRlcnMsXG5cdCAgICB0cmFuc2l0aW9uczoge30sXG5cdCAgICBjb21wb25lbnRzOiB7fSxcblx0ICAgIHBhcnRpYWxzOiB7fSxcblx0ICAgIHJlcGxhY2U6IHRydWVcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBFeHBvc2UgdXNlZnVsIGludGVybmFsc1xuXHQgICAqL1xuXHRcblx0ICBWdWUudXRpbCA9IHV0aWw7XG5cdCAgVnVlLmNvbmZpZyA9IGNvbmZpZztcblx0ICBWdWUuc2V0ID0gc2V0O1xuXHQgIFZ1ZVsnZGVsZXRlJ10gPSBkZWw7XG5cdCAgVnVlLm5leHRUaWNrID0gbmV4dFRpY2s7XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRoZSBmb2xsb3dpbmcgYXJlIGV4cG9zZWQgZm9yIGFkdmFuY2VkIHVzYWdlIC8gcGx1Z2luc1xuXHQgICAqL1xuXHRcblx0ICBWdWUuY29tcGlsZXIgPSBjb21waWxlcjtcblx0ICBWdWUuRnJhZ21lbnRGYWN0b3J5ID0gRnJhZ21lbnRGYWN0b3J5O1xuXHQgIFZ1ZS5pbnRlcm5hbERpcmVjdGl2ZXMgPSBpbnRlcm5hbERpcmVjdGl2ZXM7XG5cdCAgVnVlLnBhcnNlcnMgPSB7XG5cdCAgICBwYXRoOiBwYXRoLFxuXHQgICAgdGV4dDogdGV4dCxcblx0ICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZSxcblx0ICAgIGRpcmVjdGl2ZTogZGlyZWN0aXZlLFxuXHQgICAgZXhwcmVzc2lvbjogZXhwcmVzc2lvblxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEVhY2ggaW5zdGFuY2UgY29uc3RydWN0b3IsIGluY2x1ZGluZyBWdWUsIGhhcyBhIHVuaXF1ZVxuXHQgICAqIGNpZC4gVGhpcyBlbmFibGVzIHVzIHRvIGNyZWF0ZSB3cmFwcGVkIFwiY2hpbGRcblx0ICAgKiBjb25zdHJ1Y3RvcnNcIiBmb3IgcHJvdG90eXBhbCBpbmhlcml0YW5jZSBhbmQgY2FjaGUgdGhlbS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLmNpZCA9IDA7XG5cdCAgdmFyIGNpZCA9IDE7XG5cdFxuXHQgIC8qKlxuXHQgICAqIENsYXNzIGluaGVyaXRhbmNlXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gZXh0ZW5kT3B0aW9uc1xuXHQgICAqL1xuXHRcblx0ICBWdWUuZXh0ZW5kID0gZnVuY3Rpb24gKGV4dGVuZE9wdGlvbnMpIHtcblx0ICAgIGV4dGVuZE9wdGlvbnMgPSBleHRlbmRPcHRpb25zIHx8IHt9O1xuXHQgICAgdmFyIFN1cGVyID0gdGhpcztcblx0ICAgIHZhciBpc0ZpcnN0RXh0ZW5kID0gU3VwZXIuY2lkID09PSAwO1xuXHQgICAgaWYgKGlzRmlyc3RFeHRlbmQgJiYgZXh0ZW5kT3B0aW9ucy5fQ3Rvcikge1xuXHQgICAgICByZXR1cm4gZXh0ZW5kT3B0aW9ucy5fQ3Rvcjtcblx0ICAgIH1cblx0ICAgIHZhciBuYW1lID0gZXh0ZW5kT3B0aW9ucy5uYW1lIHx8IFN1cGVyLm9wdGlvbnMubmFtZTtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIGlmICghL15bYS16QS1aXVtcXHctXSokLy50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgd2FybignSW52YWxpZCBjb21wb25lbnQgbmFtZTogXCInICsgbmFtZSArICdcIi4gQ29tcG9uZW50IG5hbWVzICcgKyAnY2FuIG9ubHkgY29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjYXRlcnMgYW5kIHRoZSBoeXBoZW4uJyk7XG5cdCAgICAgICAgbmFtZSA9IG51bGw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHZhciBTdWIgPSBjcmVhdGVDbGFzcyhuYW1lIHx8ICdWdWVDb21wb25lbnQnKTtcblx0ICAgIFN1Yi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN1cGVyLnByb3RvdHlwZSk7XG5cdCAgICBTdWIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3ViO1xuXHQgICAgU3ViLmNpZCA9IGNpZCsrO1xuXHQgICAgU3ViLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoU3VwZXIub3B0aW9ucywgZXh0ZW5kT3B0aW9ucyk7XG5cdCAgICBTdWJbJ3N1cGVyJ10gPSBTdXBlcjtcblx0ICAgIC8vIGFsbG93IGZ1cnRoZXIgZXh0ZW5zaW9uXG5cdCAgICBTdWIuZXh0ZW5kID0gU3VwZXIuZXh0ZW5kO1xuXHQgICAgLy8gY3JlYXRlIGFzc2V0IHJlZ2lzdGVycywgc28gZXh0ZW5kZWQgY2xhc3Nlc1xuXHQgICAgLy8gY2FuIGhhdmUgdGhlaXIgcHJpdmF0ZSBhc3NldHMgdG9vLlxuXHQgICAgY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcblx0ICAgICAgU3ViW3R5cGVdID0gU3VwZXJbdHlwZV07XG5cdCAgICB9KTtcblx0ICAgIC8vIGVuYWJsZSByZWN1cnNpdmUgc2VsZi1sb29rdXBcblx0ICAgIGlmIChuYW1lKSB7XG5cdCAgICAgIFN1Yi5vcHRpb25zLmNvbXBvbmVudHNbbmFtZV0gPSBTdWI7XG5cdCAgICB9XG5cdCAgICAvLyBjYWNoZSBjb25zdHJ1Y3RvclxuXHQgICAgaWYgKGlzRmlyc3RFeHRlbmQpIHtcblx0ICAgICAgZXh0ZW5kT3B0aW9ucy5fQ3RvciA9IFN1Yjtcblx0ICAgIH1cblx0ICAgIHJldHVybiBTdWI7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBzdWItY2xhc3MgY29uc3RydWN0b3Igd2l0aCB0aGVcblx0ICAgKiBnaXZlbiBuYW1lLiBUaGlzIGdpdmVzIHVzIG11Y2ggbmljZXIgb3V0cHV0IHdoZW5cblx0ICAgKiBsb2dnaW5nIGluc3RhbmNlcyBpbiB0aGUgY29uc29sZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCAgICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGNyZWF0ZUNsYXNzKG5hbWUpIHtcblx0ICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jICovXG5cdCAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdyZXR1cm4gZnVuY3Rpb24gJyArIGNsYXNzaWZ5KG5hbWUpICsgJyAob3B0aW9ucykgeyB0aGlzLl9pbml0KG9wdGlvbnMpIH0nKSgpO1xuXHQgICAgLyogZXNsaW50LWVuYWJsZSBuby1uZXctZnVuYyAqL1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUGx1Z2luIHN5c3RlbVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IHBsdWdpblxuXHQgICAqL1xuXHRcblx0ICBWdWUudXNlID0gZnVuY3Rpb24gKHBsdWdpbikge1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAocGx1Z2luLmluc3RhbGxlZCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICAvLyBhZGRpdGlvbmFsIHBhcmFtZXRlcnNcblx0ICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuXHQgICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuXHQgICAgaWYgKHR5cGVvZiBwbHVnaW4uaW5zdGFsbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBwbHVnaW4uaW5zdGFsbC5hcHBseShwbHVnaW4sIGFyZ3MpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcGx1Z2luLmFwcGx5KG51bGwsIGFyZ3MpO1xuXHQgICAgfVxuXHQgICAgcGx1Z2luLmluc3RhbGxlZCA9IHRydWU7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBBcHBseSBhIGdsb2JhbCBtaXhpbiBieSBtZXJnaW5nIGl0IGludG8gdGhlIGRlZmF1bHRcblx0ICAgKiBvcHRpb25zLlxuXHQgICAqL1xuXHRcblx0ICBWdWUubWl4aW4gPSBmdW5jdGlvbiAobWl4aW4pIHtcblx0ICAgIFZ1ZS5vcHRpb25zID0gbWVyZ2VPcHRpb25zKFZ1ZS5vcHRpb25zLCBtaXhpbik7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ3JlYXRlIGFzc2V0IHJlZ2lzdHJhdGlvbiBtZXRob2RzIHdpdGggdGhlIGZvbGxvd2luZ1xuXHQgICAqIHNpZ25hdHVyZTpcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuXHQgICAqIEBwYXJhbSB7Kn0gZGVmaW5pdGlvblxuXHQgICAqL1xuXHRcblx0ICBjb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuXHQgICAgVnVlW3R5cGVdID0gZnVuY3Rpb24gKGlkLCBkZWZpbml0aW9uKSB7XG5cdCAgICAgIGlmICghZGVmaW5pdGlvbikge1xuXHQgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgKGNvbW1vblRhZ1JFLnRlc3QoaWQpIHx8IHJlc2VydmVkVGFnUkUudGVzdChpZCkpKSB7XG5cdCAgICAgICAgICAgIHdhcm4oJ0RvIG5vdCB1c2UgYnVpbHQtaW4gb3IgcmVzZXJ2ZWQgSFRNTCBlbGVtZW50cyBhcyBjb21wb25lbnQgJyArICdpZDogJyArIGlkKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHR5cGUgPT09ICdjb21wb25lbnQnICYmIGlzUGxhaW5PYmplY3QoZGVmaW5pdGlvbikpIHtcblx0ICAgICAgICAgIGlmICghZGVmaW5pdGlvbi5uYW1lKSB7XG5cdCAgICAgICAgICAgIGRlZmluaXRpb24ubmFtZSA9IGlkO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgZGVmaW5pdGlvbiA9IFZ1ZS5leHRlbmQoZGVmaW5pdGlvbik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF0gPSBkZWZpbml0aW9uO1xuXHQgICAgICAgIHJldHVybiBkZWZpbml0aW9uO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH0pO1xuXHRcblx0ICAvLyBleHBvc2UgaW50ZXJuYWwgdHJhbnNpdGlvbiBBUElcblx0ICBleHRlbmQoVnVlLnRyYW5zaXRpb24sIHRyYW5zaXRpb24pO1xuXHR9XG5cdFxuXHRpbnN0YWxsR2xvYmFsQVBJKFZ1ZSk7XG5cdFxuXHRWdWUudmVyc2lvbiA9ICcxLjAuMjYnO1xuXHRcblx0Ly8gZGV2dG9vbHMgZ2xvYmFsIGhvb2tcblx0LyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKGNvbmZpZy5kZXZ0b29scykge1xuXHQgICAgaWYgKGRldnRvb2xzKSB7XG5cdCAgICAgIGRldnRvb2xzLmVtaXQoJ2luaXQnLCBWdWUpO1xuXHQgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGluQnJvd3NlciAmJiAvQ2hyb21lXFwvXFxkKy8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcblx0ICAgICAgY29uc29sZS5sb2coJ0Rvd25sb2FkIHRoZSBWdWUgRGV2dG9vbHMgZm9yIGEgYmV0dGVyIGRldmVsb3BtZW50IGV4cGVyaWVuY2U6XFxuJyArICdodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWRldnRvb2xzJyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9LCAwKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gVnVlO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSwgX193ZWJwYWNrX3JlcXVpcmVfXygxOSkpKVxuXG4vKioqLyB9LFxuLyogMjE4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJkZWZpbmUgY2Fubm90IGJlIHVzZWQgaW5kaXJlY3RcIik7IH07XHJcblxuXG4vKioqLyB9LFxuLyogMjE5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xyXG5cdFx0aWYoIW1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcclxuXHRcdFx0bW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307XHJcblx0XHRcdG1vZHVsZS5wYXRocyA9IFtdO1xyXG5cdFx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcclxuXHRcdFx0bW9kdWxlLmNoaWxkcmVuID0gW107XHJcblx0XHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG1vZHVsZTtcclxuXHR9XHJcblxuXG4vKioqLyB9LFxuLyogMjIwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiAoaWdub3JlZCkgKi9cblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogdnVlLmpzXG4gKiovIiwiIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4gXHR2YXIgcGFyZW50SnNvbnBGdW5jdGlvbiA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXTtcbiBcdHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSA9IGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGNodW5rSWRzLCBtb3JlTW9kdWxlcykge1xuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIGNhbGxiYWNrcyA9IFtdO1xuIFx0XHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcbiBcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pXG4gXHRcdFx0XHRjYWxsYmFja3MucHVzaC5hcHBseShjYWxsYmFja3MsIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSk7XG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcbiBcdFx0fVxuIFx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbiBcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0fVxuIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGNodW5rSWRzLCBtb3JlTW9kdWxlcyk7XG4gXHRcdHdoaWxlKGNhbGxiYWNrcy5sZW5ndGgpXG4gXHRcdFx0Y2FsbGJhY2tzLnNoaWZ0KCkuY2FsbChudWxsLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0fTtcblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3NcbiBcdC8vIFwiMFwiIG1lYW5zIFwiYWxyZWFkeSBsb2FkZWRcIlxuIFx0Ly8gQXJyYXkgbWVhbnMgXCJsb2FkaW5nXCIsIGFycmF5IGNvbnRhaW5zIGNhbGxiYWNrc1xuIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbiBcdFx0MDowLFxuIFx0XHQxOjAsXG4gXHRcdDI6MFxuIFx0fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG4gXHQvLyBUaGlzIGZpbGUgY29udGFpbnMgb25seSB0aGUgZW50cnkgY2h1bmsuXG4gXHQvLyBUaGUgY2h1bmsgbG9hZGluZyBmdW5jdGlvbiBmb3IgYWRkaXRpb25hbCBjaHVua3NcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZSA9IGZ1bmN0aW9uIHJlcXVpcmVFbnN1cmUoY2h1bmtJZCwgY2FsbGJhY2spIHtcbiBcdFx0Ly8gXCIwXCIgaXMgdGhlIHNpZ25hbCBmb3IgXCJhbHJlYWR5IGxvYWRlZFwiXG4gXHRcdGlmKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMClcbiBcdFx0XHRyZXR1cm4gY2FsbGJhY2suY2FsbChudWxsLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBhbiBhcnJheSBtZWFucyBcImN1cnJlbnRseSBsb2FkaW5nXCIuXG4gXHRcdGlmKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSAhPT0gdW5kZWZpbmVkKSB7XG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdLnB1c2goY2FsbGJhY2spO1xuIFx0XHR9IGVsc2Uge1xuIFx0XHRcdC8vIHN0YXJ0IGNodW5rIGxvYWRpbmdcbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSBbY2FsbGJhY2tdO1xuIFx0XHRcdHZhciBoZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbiBcdFx0XHR2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gXHRcdFx0c2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiBcdFx0XHRzY3JpcHQuY2hhcnNldCA9ICd1dGYtOCc7XG4gXHRcdFx0c2NyaXB0LmFzeW5jID0gdHJ1ZTtcblxuIFx0XHRcdHNjcmlwdC5zcmMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcIlwiICsgY2h1bmtJZCArIFwiLmFwcC5qc1wiO1xuIFx0XHRcdGhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvaHlicmlkLXRob3JpdW0vZGV2L2FwcC9cIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIDE1ZDFiYmQxMDhiOWUyYWQ4M2E4XG4gKiovIiwiaW1wb3J0IFZ1ZSBmcm9tICdWdWUnO1xuaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICd2dWUtcm91dGVyJztcbmltcG9ydCByb3V0ZXMgZnJvbSAnLi9yb3V0ZXMnO1xuaW1wb3J0IEh5YnJpZFRob3JpdW0gZnJvbSAnaHlicmlkLXRob3JpdW0nO1xuaW1wb3J0IFByaXNtIGZyb20gJ3ByaXNtanMnO1xuaW1wb3J0IFNpZGVOYXYgZnJvbSAnLi9jb21wb25lbnRzL3NpZGUtbmF2L2luZGV4LnZ1ZSc7XG5pbXBvcnQgU2l0ZUhlYWRlciBmcm9tICcuL2NvbXBvbmVudHMvc2l0ZS1oZWFkZXIvaW5kZXgudnVlJztcblZ1ZS5jb25maWcuZGVidWcgPSB0cnVlO1xuXG5WdWUudXNlKFZ1ZVJvdXRlcik7XG5WdWUudXNlKEh5YnJpZFRob3JpdW0pO1xuXG5sZXQgcm91dGVyID0gbmV3IFZ1ZVJvdXRlcigpO1xubGV0IEFwcCA9IFZ1ZS5leHRlbmQoe1xuICBjb21wb25lbnRzOiB7XG4gICAgU2lkZU5hdixcbiAgICBTaXRlSGVhZGVyXG4gIH0sXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxpZ2VyRW5kUG9pbnQ6ICdodHRwczovL2FwaS5jbXMudGVsdXMuY29tL2xlZ2FscycsXG4gICAgICBsaWdlckFwcGxpY2F0aW9uS2V5OiAnYjk3MzhkNjdiODlkZmM3ODI3NDZkNGE5Y2Y0YTEwOTMnXG4gICAgfTtcbiAgfVxufSk7XG5yb3V0ZXIubWFwKHJvdXRlcyk7XG5yb3V0ZXIuYWZ0ZXJFYWNoKCgpID0+IHtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgUHJpc20uaGlnaGxpZ2h0QWxsKCk7XG4gIH0sIDApO1xufSk7XG5yb3V0ZXIucmVkaXJlY3Qoe1xuICAnKic6ICcvZ2V0LXN0YXJ0ZWQnXG59KTtcbnJvdXRlci5zdGFydChBcHAsICcjYXBwLW1haW4nKTtcblxuLy8gcm91dGVyLmdvKCcvZ2V0LXN0YXJ0ZWQnKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vZGV2L3NyYy9tYWluLmpzXG4gKiovIiwiLypcclxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcclxuKi9cclxuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcclxuXHR2YXIgbGlzdCA9IFtdO1xyXG5cclxuXHQvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXHJcblx0bGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xyXG5cdFx0dmFyIHJlc3VsdCA9IFtdO1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSB0aGlzW2ldO1xyXG5cdFx0XHRpZihpdGVtWzJdKSB7XHJcblx0XHRcdFx0cmVzdWx0LnB1c2goXCJAbWVkaWEgXCIgKyBpdGVtWzJdICsgXCJ7XCIgKyBpdGVtWzFdICsgXCJ9XCIpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJlc3VsdC5wdXNoKGl0ZW1bMV0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzdWx0LmpvaW4oXCJcIik7XHJcblx0fTtcclxuXHJcblx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcclxuXHRsaXN0LmkgPSBmdW5jdGlvbihtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XHJcblx0XHRpZih0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIilcclxuXHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xyXG5cdFx0dmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcclxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XHJcblx0XHRcdGlmKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIilcclxuXHRcdFx0XHRhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XHJcblx0XHR9XHJcblx0XHRmb3IoaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBpdGVtID0gbW9kdWxlc1tpXTtcclxuXHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxyXG5cdFx0XHQvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xyXG5cdFx0XHQvLyAgd2hlbiBhIG1vZHVsZSBpcyBpbXBvcnRlZCBtdWx0aXBsZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBtZWRpYSBxdWVyaWVzLlxyXG5cdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxyXG5cdFx0XHRpZih0eXBlb2YgaXRlbVswXSAhPT0gXCJudW1iZXJcIiB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xyXG5cdFx0XHRcdGlmKG1lZGlhUXVlcnkgJiYgIWl0ZW1bMl0pIHtcclxuXHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xyXG5cdFx0XHRcdH0gZWxzZSBpZihtZWRpYVF1ZXJ5KSB7XHJcblx0XHRcdFx0XHRpdGVtWzJdID0gXCIoXCIgKyBpdGVtWzJdICsgXCIpIGFuZCAoXCIgKyBtZWRpYVF1ZXJ5ICsgXCIpXCI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGxpc3QucHVzaChpdGVtKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcblx0cmV0dXJuIGxpc3Q7XHJcbn07XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXG4gKiogbW9kdWxlIGlkID0gMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbnZhciBzdHlsZXNJbkRvbSA9IHt9LFxuXHRtZW1vaXplID0gZnVuY3Rpb24oZm4pIHtcblx0XHR2YXIgbWVtbztcblx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYgKHR5cGVvZiBtZW1vID09PSBcInVuZGVmaW5lZFwiKSBtZW1vID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdHJldHVybiBtZW1vO1xuXHRcdH07XG5cdH0sXG5cdGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAvbXNpZSBbNi05XVxcYi8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTtcblx0fSksXG5cdGdldEhlYWRFbGVtZW50ID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO1xuXHR9KSxcblx0c2luZ2xldG9uRWxlbWVudCA9IG51bGwsXG5cdHNpbmdsZXRvbkNvdW50ZXIgPSAwLFxuXHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QsIG9wdGlvbnMpIHtcblx0aWYodHlwZW9mIERFQlVHICE9PSBcInVuZGVmaW5lZFwiICYmIERFQlVHKSB7XG5cdFx0aWYodHlwZW9mIGRvY3VtZW50ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XG5cdH1cblxuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0Ly8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG5cdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2Vcblx0aWYgKHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiA9PT0gXCJ1bmRlZmluZWRcIikgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgYm90dG9tIG9mIDxoZWFkPi5cblx0aWYgKHR5cGVvZiBvcHRpb25zLmluc2VydEF0ID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLmluc2VydEF0ID0gXCJib3R0b21cIjtcblxuXHR2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QpO1xuXHRhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuXHRcdHZhciBtYXlSZW1vdmUgPSBbXTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xuXHRcdFx0bWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuXHRcdH1cblx0XHRpZihuZXdMaXN0KSB7XG5cdFx0XHR2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QpO1xuXHRcdFx0YWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcblx0XHR9XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gbWF5UmVtb3ZlW2ldO1xuXHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xuXHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspXG5cdFx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oKTtcblx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucykge1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cdFx0aWYoZG9tU3R5bGUpIHtcblx0XHRcdGRvbVN0eWxlLnJlZnMrKztcblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcblx0XHRcdH1cblx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgcGFydHMgPSBbXTtcblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXHRcdFx0c3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7aWQ6IGl0ZW0uaWQsIHJlZnM6IDEsIHBhcnRzOiBwYXJ0c307XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGxpc3RUb1N0eWxlcyhsaXN0KSB7XG5cdHZhciBzdHlsZXMgPSBbXTtcblx0dmFyIG5ld1N0eWxlcyA9IHt9O1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gbGlzdFtpXTtcblx0XHR2YXIgaWQgPSBpdGVtWzBdO1xuXHRcdHZhciBjc3MgPSBpdGVtWzFdO1xuXHRcdHZhciBtZWRpYSA9IGl0ZW1bMl07XG5cdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG5cdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xuXHRcdGlmKCFuZXdTdHlsZXNbaWRdKVxuXHRcdFx0c3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcblx0XHRlbHNlXG5cdFx0XHRuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XG5cdH1cblx0cmV0dXJuIHN0eWxlcztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlRWxlbWVudCkge1xuXHR2YXIgaGVhZCA9IGdldEhlYWRFbGVtZW50KCk7XG5cdHZhciBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCA9IHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wW3N0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xuXHRpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xuXHRcdGlmKCFsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCkge1xuXHRcdFx0aGVhZC5pbnNlcnRCZWZvcmUoc3R5bGVFbGVtZW50LCBoZWFkLmZpcnN0Q2hpbGQpO1xuXHRcdH0gZWxzZSBpZihsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xuXHRcdFx0aGVhZC5pbnNlcnRCZWZvcmUoc3R5bGVFbGVtZW50LCBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0XHR9XG5cdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AucHVzaChzdHlsZUVsZW1lbnQpO1xuXHR9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwiYm90dG9tXCIpIHtcblx0XHRoZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcuIE11c3QgYmUgJ3RvcCcgb3IgJ2JvdHRvbScuXCIpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpIHtcblx0c3R5bGVFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0dmFyIGlkeCA9IHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLmluZGV4T2Yoc3R5bGVFbGVtZW50KTtcblx0aWYoaWR4ID49IDApIHtcblx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuXHR2YXIgc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXHRzdHlsZUVsZW1lbnQudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlRWxlbWVudCk7XG5cdHJldHVybiBzdHlsZUVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGVFbGVtZW50LCB1cGRhdGUsIHJlbW92ZTtcblxuXHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcblx0XHR2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcblx0XHRzdHlsZUVsZW1lbnQgPSBzaW5nbGV0b25FbGVtZW50IHx8IChzaW5nbGV0b25FbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcblx0XHR1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCBmYWxzZSk7XG5cdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCwgc3R5bGVJbmRleCwgdHJ1ZSk7XG5cdH0gZWxzZSB7XG5cdFx0c3R5bGVFbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XG5cdFx0fTtcblx0fVxuXG5cdHVwZGF0ZShvYmopO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcblx0XHRpZihuZXdPYmopIHtcblx0XHRcdGlmKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcClcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlbW92ZSgpO1xuXHRcdH1cblx0fTtcbn1cblxudmFyIHJlcGxhY2VUZXh0ID0gKGZ1bmN0aW9uICgpIHtcblx0dmFyIHRleHRTdG9yZSA9IFtdO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG5cdFx0dGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuXHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuXHR9O1xufSkoKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZUVsZW1lbnQsIGluZGV4LCByZW1vdmUsIG9iaikge1xuXHR2YXIgY3NzID0gcmVtb3ZlID8gXCJcIiA6IG9iai5jc3M7XG5cblx0aWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuXHR9IGVsc2Uge1xuXHRcdHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcblx0XHR2YXIgY2hpbGROb2RlcyA9IHN0eWxlRWxlbWVudC5jaGlsZE5vZGVzO1xuXHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHRpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcblx0XHRcdHN0eWxlRWxlbWVudC5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGVFbGVtZW50LCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcblx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cblx0aWYgKG1lZGlhKSB7XG5cdFx0c3R5bGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsIG1lZGlhKTtcblx0fVxuXG5cdGlmIChzb3VyY2VNYXApIHtcblx0XHQvLyBodHRwczovL2RldmVsb3Blci5jaHJvbWUuY29tL2RldnRvb2xzL2RvY3MvamF2YXNjcmlwdC1kZWJ1Z2dpbmdcblx0XHQvLyB0aGlzIG1ha2VzIHNvdXJjZSBtYXBzIGluc2lkZSBzdHlsZSB0YWdzIHdvcmsgcHJvcGVybHkgaW4gQ2hyb21lXG5cdFx0Y3NzICs9ICdcXG4vKiMgc291cmNlVVJMPScgKyBzb3VyY2VNYXAuc291cmNlc1swXSArICcgKi8nO1xuXHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XG5cdFx0Y3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIiArIGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSkgKyBcIiAqL1wiO1xuXHR9XG5cblx0aWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcblx0fSBlbHNlIHtcblx0XHR3aGlsZShzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCkge1xuXHRcdFx0c3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcblx0XHR9XG5cdFx0c3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuXHR9XG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1xuICoqIG1vZHVsZSBpZCA9IDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBjaGVja0dsb2JhbCA9IHJlcXVpcmUoJy4vX2NoZWNrR2xvYmFsJyk7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IGNoZWNrR2xvYmFsKHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsKTtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IGNoZWNrR2xvYmFsKHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYpO1xuXG4vKiogRGV0ZWN0IGB0aGlzYCBhcyB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciB0aGlzR2xvYmFsID0gY2hlY2tHbG9iYWwodHlwZW9mIHRoaXMgPT0gJ29iamVjdCcgJiYgdGhpcyk7XG5cbi8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IHRoaXNHbG9iYWwgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxubW9kdWxlLmV4cG9ydHMgPSByb290O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19yb290LmpzXG4gKiogbW9kdWxlIGlkID0gM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBBcnJheWAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEB0eXBlIHtGdW5jdGlvbn1cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXkoJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXkoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxubW9kdWxlLmV4cG9ydHMgPSBpc0FycmF5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzQXJyYXkuanNcbiAqKiBtb2R1bGUgaWQgPSA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL2FwaS10YWJsZS5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvY29tcG9uZW50cy9hcGktdGFibGUvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VJc05hdGl2ZSA9IHJlcXVpcmUoJy4vX2Jhc2VJc05hdGl2ZScpLFxuICAgIGdldFZhbHVlID0gcmVxdWlyZSgnLi9fZ2V0VmFsdWUnKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBuYXRpdmUgZnVuY3Rpb24gYXQgYGtleWAgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmdW5jdGlvbiBpZiBpdCdzIG5hdGl2ZSwgZWxzZSBgdW5kZWZpbmVkYC5cbiAqL1xuZnVuY3Rpb24gZ2V0TmF0aXZlKG9iamVjdCwga2V5KSB7XG4gIHZhciB2YWx1ZSA9IGdldFZhbHVlKG9iamVjdCwga2V5KTtcbiAgcmV0dXJuIGJhc2VJc05hdGl2ZSh2YWx1ZSkgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXROYXRpdmU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2dldE5hdGl2ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG4gKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG4gKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzT2JqZWN0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzT2JqZWN0LmpzXG4gKiogbW9kdWxlIGlkID0gN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNPYmplY3RMaWtlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzT2JqZWN0TGlrZS5qc1xuICoqIG1vZHVsZSBpZCA9IDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBsaXN0Q2FjaGVDbGVhciA9IHJlcXVpcmUoJy4vX2xpc3RDYWNoZUNsZWFyJyksXG4gICAgbGlzdENhY2hlRGVsZXRlID0gcmVxdWlyZSgnLi9fbGlzdENhY2hlRGVsZXRlJyksXG4gICAgbGlzdENhY2hlR2V0ID0gcmVxdWlyZSgnLi9fbGlzdENhY2hlR2V0JyksXG4gICAgbGlzdENhY2hlSGFzID0gcmVxdWlyZSgnLi9fbGlzdENhY2hlSGFzJyksXG4gICAgbGlzdENhY2hlU2V0ID0gcmVxdWlyZSgnLi9fbGlzdENhY2hlU2V0Jyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBsaXN0IGNhY2hlIG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cbiAqL1xuZnVuY3Rpb24gTGlzdENhY2hlKGVudHJpZXMpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBlbnRyaWVzID8gZW50cmllcy5sZW5ndGggOiAwO1xuXG4gIHRoaXMuY2xlYXIoKTtcbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcbiAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pO1xuICB9XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBMaXN0Q2FjaGVgLlxuTGlzdENhY2hlLnByb3RvdHlwZS5jbGVhciA9IGxpc3RDYWNoZUNsZWFyO1xuTGlzdENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBsaXN0Q2FjaGVEZWxldGU7XG5MaXN0Q2FjaGUucHJvdG90eXBlLmdldCA9IGxpc3RDYWNoZUdldDtcbkxpc3RDYWNoZS5wcm90b3R5cGUuaGFzID0gbGlzdENhY2hlSGFzO1xuTGlzdENhY2hlLnByb3RvdHlwZS5zZXQgPSBsaXN0Q2FjaGVTZXQ7XG5cbm1vZHVsZS5leHBvcnRzID0gTGlzdENhY2hlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19MaXN0Q2FjaGUuanNcbiAqKiBtb2R1bGUgaWQgPSA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZXEgPSByZXF1aXJlKCcuL2VxJyk7XG5cbi8qKlxuICogR2V0cyB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGBrZXlgIGlzIGZvdW5kIGluIGBhcnJheWAgb2Yga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuICogQHBhcmFtIHsqfSBrZXkgVGhlIGtleSB0byBzZWFyY2ggZm9yLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cbiAqL1xuZnVuY3Rpb24gYXNzb2NJbmRleE9mKGFycmF5LCBrZXkpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgaWYgKGVxKGFycmF5W2xlbmd0aF1bMF0sIGtleSkpIHtcbiAgICAgIHJldHVybiBsZW5ndGg7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhc3NvY0luZGV4T2Y7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Fzc29jSW5kZXhPZi5qc1xuICoqIG1vZHVsZSBpZCA9IDEwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNLZXlhYmxlID0gcmVxdWlyZSgnLi9faXNLZXlhYmxlJyk7XG5cbi8qKlxuICogR2V0cyB0aGUgZGF0YSBmb3IgYG1hcGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBtYXAgVGhlIG1hcCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIHJlZmVyZW5jZSBrZXkuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWFwIGRhdGEuXG4gKi9cbmZ1bmN0aW9uIGdldE1hcERhdGEobWFwLCBrZXkpIHtcbiAgdmFyIGRhdGEgPSBtYXAuX19kYXRhX187XG4gIHJldHVybiBpc0tleWFibGUoa2V5KVxuICAgID8gZGF0YVt0eXBlb2Yga2V5ID09ICdzdHJpbmcnID8gJ3N0cmluZycgOiAnaGFzaCddXG4gICAgOiBkYXRhLm1hcDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRNYXBEYXRhO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19nZXRNYXBEYXRhLmpzXG4gKiogbW9kdWxlIGlkID0gMTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc0FycmF5ID0gcmVxdWlyZSgnLi9pc0FycmF5JyksXG4gICAgaXNTeW1ib2wgPSByZXF1aXJlKCcuL2lzU3ltYm9sJyk7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cbnZhciByZUlzRGVlcFByb3AgPSAvXFwufFxcWyg/OlteW1xcXV0qfChbXCInXSkoPzooPyFcXDEpW15cXFxcXXxcXFxcLikqP1xcMSlcXF0vLFxuICAgIHJlSXNQbGFpblByb3AgPSAvXlxcdyokLztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUgYW5kIG5vdCBhIHByb3BlcnR5IHBhdGguXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkga2V5cyBvbi5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvcGVydHkgbmFtZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0tleSh2YWx1ZSwgb2JqZWN0KSB7XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgaWYgKHR5cGUgPT0gJ251bWJlcicgfHwgdHlwZSA9PSAnc3ltYm9sJyB8fCB0eXBlID09ICdib29sZWFuJyB8fFxuICAgICAgdmFsdWUgPT0gbnVsbCB8fCBpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gcmVJc1BsYWluUHJvcC50ZXN0KHZhbHVlKSB8fCAhcmVJc0RlZXBQcm9wLnRlc3QodmFsdWUpIHx8XG4gICAgKG9iamVjdCAhPSBudWxsICYmIHZhbHVlIGluIE9iamVjdChvYmplY3QpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0tleTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faXNLZXkuanNcbiAqKiBtb2R1bGUgaWQgPSAxMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdldE5hdGl2ZSA9IHJlcXVpcmUoJy4vX2dldE5hdGl2ZScpO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG52YXIgbmF0aXZlQ3JlYXRlID0gZ2V0TmF0aXZlKE9iamVjdCwgJ2NyZWF0ZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG5hdGl2ZUNyZWF0ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbmF0aXZlQ3JlYXRlLmpzXG4gKiogbW9kdWxlIGlkID0gMTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc1N5bWJvbCA9IHJlcXVpcmUoJy4vaXNTeW1ib2wnKTtcblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgSU5GSU5JVFkgPSAxIC8gMDtcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIGtleSBpZiBpdCdzIG5vdCBhIHN0cmluZyBvciBzeW1ib2wuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGluc3BlY3QuXG4gKiBAcmV0dXJucyB7c3RyaW5nfHN5bWJvbH0gUmV0dXJucyB0aGUga2V5LlxuICovXG5mdW5jdGlvbiB0b0tleSh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnIHx8IGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICB2YXIgcmVzdWx0ID0gKHZhbHVlICsgJycpO1xuICByZXR1cm4gKHJlc3VsdCA9PSAnMCcgJiYgKDEgLyB2YWx1ZSkgPT0gLUlORklOSVRZKSA/ICctMCcgOiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9LZXk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3RvS2V5LmpzXG4gKiogbW9kdWxlIGlkID0gMTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG4gKlxuICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgbG9vc2VseSBiYXNlZCBvblxuICogW2BUb0xlbmd0aGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXRvbGVuZ3RoKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNMZW5ndGgoMyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0xlbmd0aChOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0xlbmd0aChJbmZpbml0eSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNMZW5ndGgoJzMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiZcbiAgICB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNMZW5ndGg7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaXNMZW5ndGguanNcbiAqKiBtb2R1bGUgaWQgPSAxNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4vaXNPYmplY3RMaWtlJyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N5bWJvbCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1N5bWJvbDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9pc1N5bWJvbC5qc1xuICoqIG1vZHVsZSBpZCA9IDE2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgbWFwQ2FjaGVDbGVhciA9IHJlcXVpcmUoJy4vX21hcENhY2hlQ2xlYXInKSxcbiAgICBtYXBDYWNoZURlbGV0ZSA9IHJlcXVpcmUoJy4vX21hcENhY2hlRGVsZXRlJyksXG4gICAgbWFwQ2FjaGVHZXQgPSByZXF1aXJlKCcuL19tYXBDYWNoZUdldCcpLFxuICAgIG1hcENhY2hlSGFzID0gcmVxdWlyZSgnLi9fbWFwQ2FjaGVIYXMnKSxcbiAgICBtYXBDYWNoZVNldCA9IHJlcXVpcmUoJy4vX21hcENhY2hlU2V0Jyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG1hcCBjYWNoZSBvYmplY3QgdG8gc3RvcmUga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBNYXBDYWNoZShlbnRyaWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gZW50cmllcyA/IGVudHJpZXMubGVuZ3RoIDogMDtcblxuICB0aGlzLmNsZWFyKCk7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG4gICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcbiAgfVxufVxuXG4vLyBBZGQgbWV0aG9kcyB0byBgTWFwQ2FjaGVgLlxuTWFwQ2FjaGUucHJvdG90eXBlLmNsZWFyID0gbWFwQ2FjaGVDbGVhcjtcbk1hcENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBtYXBDYWNoZURlbGV0ZTtcbk1hcENhY2hlLnByb3RvdHlwZS5nZXQgPSBtYXBDYWNoZUdldDtcbk1hcENhY2hlLnByb3RvdHlwZS5oYXMgPSBtYXBDYWNoZUhhcztcbk1hcENhY2hlLnByb3RvdHlwZS5zZXQgPSBtYXBDYWNoZVNldDtcblxubW9kdWxlLmV4cG9ydHMgPSBNYXBDYWNoZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fTWFwQ2FjaGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pc09iamVjdCcpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG4gICAgZ2VuVGFnID0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJztcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBGdW5jdGlvbmAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0Z1bmN0aW9uKF8pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNGdW5jdGlvbigvYWJjLyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7XG4gIC8vIFRoZSB1c2Ugb2YgYE9iamVjdCN0b1N0cmluZ2AgYXZvaWRzIGlzc3VlcyB3aXRoIHRoZSBgdHlwZW9mYCBvcGVyYXRvclxuICAvLyBpbiBTYWZhcmkgOCB3aGljaCByZXR1cm5zICdvYmplY3QnIGZvciB0eXBlZCBhcnJheSBhbmQgd2VhayBtYXAgY29uc3RydWN0b3JzLFxuICAvLyBhbmQgUGhhbnRvbUpTIDEuOSB3aGljaCByZXR1cm5zICdmdW5jdGlvbicgZm9yIGBOb2RlTGlzdGAgaW5zdGFuY2VzLlxuICB2YXIgdGFnID0gaXNPYmplY3QodmFsdWUpID8gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgOiAnJztcbiAgcmV0dXJuIHRhZyA9PSBmdW5jVGFnIHx8IHRhZyA9PSBnZW5UYWc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNGdW5jdGlvbjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9pc0Z1bmN0aW9uLmpzXG4gKiogbW9kdWxlIGlkID0gMThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHRyeSB7XG4gICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGlzIG5vdCBkZWZpbmVkJyk7XG4gICAgfVxuICB9XG4gIHRyeSB7XG4gICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICB9IGNhdGNoIChlKSB7XG4gICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaXMgbm90IGRlZmluZWQnKTtcbiAgICB9XG4gIH1cbn0gKCkpXG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBjYWNoZWRTZXRUaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBjYWNoZWRDbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0KGRyYWluUXVldWUsIDApO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcHJvY2Vzcy9icm93c2VyLmpzXG4gKiogbW9kdWxlIGlkID0gMTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qXG4gIEBkZXNjIEFkZCBiZWhhdmlvciB0byBhbnkgZWxlbWVudC5cbiAgV2hlbiBldmFsIHRvIHRydWUsIGl0IHdpbGwgc2V0IGVsZW1lbnQgdGFiIGluZGV4IHRvIDAgYW5kIGZvY3VzIG9uIGl0LlxuICBFeGFtcGxlOiA8ZGl2IHNldC1mb2N1cz1cIndpbGxGb2N1c1doZW5UcnVlXCI+PC9kaXY+XG4qL1xuXG5pbXBvcnQgZGVmZXIgZnJvbSAnbG9kYXNoL2RlZmVyJztcbmV4cG9ydCBkZWZhdWx0IHtcbiAgdXBkYXRlKG5ld1ZhbCkge1xuICAgIGlmIChuZXdWYWwgPT09IHRydWUpIHtcbiAgICAgIGRlZmVyKCgpID0+IHtcbiAgICAgICAgdGhpcy5lbC50YWJJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuZWwuZm9jdXMoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9kaXJlY3RpdmVzL3NldC1mb2N1cy5qc1xuICoqLyIsImltcG9ydCBldmVudHMgZnJvbSAnLi9ldmVudHMnO1xuaW1wb3J0IHhoclJlc3BvbnNlIGZyb20gJy4veGhyLXJlc3BvbnNlJztcbmV4cG9ydCBkZWZhdWx0IFtcbiAgZXZlbnRzLFxuICB4aHJSZXNwb25zZSxcbl07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9taXhpbnMvaW5kZXguanNcbiAqKi8iLCJ2YXIgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi9fZ2V0TmF0aXZlJyksXG4gICAgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xudmFyIE1hcCA9IGdldE5hdGl2ZShyb290LCAnTWFwJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gTWFwO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19NYXAuanNcbiAqKiBtb2R1bGUgaWQgPSAyMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIExpc3RDYWNoZSA9IHJlcXVpcmUoJy4vX0xpc3RDYWNoZScpLFxuICAgIHN0YWNrQ2xlYXIgPSByZXF1aXJlKCcuL19zdGFja0NsZWFyJyksXG4gICAgc3RhY2tEZWxldGUgPSByZXF1aXJlKCcuL19zdGFja0RlbGV0ZScpLFxuICAgIHN0YWNrR2V0ID0gcmVxdWlyZSgnLi9fc3RhY2tHZXQnKSxcbiAgICBzdGFja0hhcyA9IHJlcXVpcmUoJy4vX3N0YWNrSGFzJyksXG4gICAgc3RhY2tTZXQgPSByZXF1aXJlKCcuL19zdGFja1NldCcpO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBzdGFjayBjYWNoZSBvYmplY3QgdG8gc3RvcmUga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBTdGFjayhlbnRyaWVzKSB7XG4gIHRoaXMuX19kYXRhX18gPSBuZXcgTGlzdENhY2hlKGVudHJpZXMpO1xufVxuXG4vLyBBZGQgbWV0aG9kcyB0byBgU3RhY2tgLlxuU3RhY2sucHJvdG90eXBlLmNsZWFyID0gc3RhY2tDbGVhcjtcblN0YWNrLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBzdGFja0RlbGV0ZTtcblN0YWNrLnByb3RvdHlwZS5nZXQgPSBzdGFja0dldDtcblN0YWNrLnByb3RvdHlwZS5oYXMgPSBzdGFja0hhcztcblN0YWNrLnByb3RvdHlwZS5zZXQgPSBzdGFja1NldDtcblxubW9kdWxlLmV4cG9ydHMgPSBTdGFjaztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fU3RhY2suanNcbiAqKiBtb2R1bGUgaWQgPSAyM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIHJvb3QgPSByZXF1aXJlKCcuL19yb290Jyk7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIFN5bWJvbCA9IHJvb3QuU3ltYm9sO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bWJvbDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fU3ltYm9sLmpzXG4gKiogbW9kdWxlIGlkID0gMjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBjYXN0UGF0aCA9IHJlcXVpcmUoJy4vX2Nhc3RQYXRoJyksXG4gICAgaXNLZXkgPSByZXF1aXJlKCcuL19pc0tleScpLFxuICAgIHRvS2V5ID0gcmVxdWlyZSgnLi9fdG9LZXknKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5nZXRgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVmYXVsdCB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGJhc2VHZXQob2JqZWN0LCBwYXRoKSB7XG4gIHBhdGggPSBpc0tleShwYXRoLCBvYmplY3QpID8gW3BhdGhdIDogY2FzdFBhdGgocGF0aCk7XG5cbiAgdmFyIGluZGV4ID0gMCxcbiAgICAgIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xuXG4gIHdoaWxlIChvYmplY3QgIT0gbnVsbCAmJiBpbmRleCA8IGxlbmd0aCkge1xuICAgIG9iamVjdCA9IG9iamVjdFt0b0tleShwYXRoW2luZGV4KytdKV07XG4gIH1cbiAgcmV0dXJuIChpbmRleCAmJiBpbmRleCA9PSBsZW5ndGgpID8gb2JqZWN0IDogdW5kZWZpbmVkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VHZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VHZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAyNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdldFByb3RvdHlwZSA9IHJlcXVpcmUoJy4vX2dldFByb3RvdHlwZScpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmhhc2Agd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBrZXkgVGhlIGtleSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUhhcyhvYmplY3QsIGtleSkge1xuICAvLyBBdm9pZCBhIGJ1ZyBpbiBJRSAxMC0xMSB3aGVyZSBvYmplY3RzIHdpdGggYSBbW1Byb3RvdHlwZV1dIG9mIGBudWxsYCxcbiAgLy8gdGhhdCBhcmUgY29tcG9zZWQgZW50aXJlbHkgb2YgaW5kZXggcHJvcGVydGllcywgcmV0dXJuIGBmYWxzZWAgZm9yXG4gIC8vIGBoYXNPd25Qcm9wZXJ0eWAgY2hlY2tzIG9mIHRoZW0uXG4gIHJldHVybiBvYmplY3QgIT0gbnVsbCAmJlxuICAgIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSB8fFxuICAgICAgKHR5cGVvZiBvYmplY3QgPT0gJ29iamVjdCcgJiYga2V5IGluIG9iamVjdCAmJiBnZXRQcm90b3R5cGUob2JqZWN0KSA9PT0gbnVsbCkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VIYXM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VIYXMuanNcbiAqKiBtb2R1bGUgaWQgPSAyNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VJc0VxdWFsRGVlcCA9IHJlcXVpcmUoJy4vX2Jhc2VJc0VxdWFsRGVlcCcpLFxuICAgIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pc09iamVjdCcpLFxuICAgIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4vaXNPYmplY3RMaWtlJyk7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNFcXVhbGAgd2hpY2ggc3VwcG9ydHMgcGFydGlhbCBjb21wYXJpc29uc1xuICogYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2JpdG1hc2tdIFRoZSBiaXRtYXNrIG9mIGNvbXBhcmlzb24gZmxhZ3MuXG4gKiAgVGhlIGJpdG1hc2sgbWF5IGJlIGNvbXBvc2VkIG9mIHRoZSBmb2xsb3dpbmcgZmxhZ3M6XG4gKiAgICAgMSAtIFVub3JkZXJlZCBjb21wYXJpc29uXG4gKiAgICAgMiAtIFBhcnRpYWwgY29tcGFyaXNvblxuICogQHBhcmFtIHtPYmplY3R9IFtzdGFja10gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSB7XG4gIGlmICh2YWx1ZSA9PT0gb3RoZXIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAodmFsdWUgPT0gbnVsbCB8fCBvdGhlciA9PSBudWxsIHx8ICghaXNPYmplY3QodmFsdWUpICYmICFpc09iamVjdExpa2Uob3RoZXIpKSkge1xuICAgIHJldHVybiB2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyO1xuICB9XG4gIHJldHVybiBiYXNlSXNFcXVhbERlZXAodmFsdWUsIG90aGVyLCBiYXNlSXNFcXVhbCwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VJc0VxdWFsO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlSXNFcXVhbC5qc1xuICoqIG1vZHVsZSBpZCA9IDI3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnByb3BlcnR5YCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYWNjZXNzb3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGJhc2VQcm9wZXJ0eShrZXkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VQcm9wZXJ0eTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZVByb3BlcnR5LmpzXG4gKiogbW9kdWxlIGlkID0gMjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc0FycmF5ID0gcmVxdWlyZSgnLi9pc0FycmF5JyksXG4gICAgc3RyaW5nVG9QYXRoID0gcmVxdWlyZSgnLi9fc3RyaW5nVG9QYXRoJyk7XG5cbi8qKlxuICogQ2FzdHMgYHZhbHVlYCB0byBhIHBhdGggYXJyYXkgaWYgaXQncyBub3Qgb25lLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBpbnNwZWN0LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBjYXN0IHByb3BlcnR5IHBhdGggYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIGNhc3RQYXRoKHZhbHVlKSB7XG4gIHJldHVybiBpc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogc3RyaW5nVG9QYXRoKHZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjYXN0UGF0aDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fY2FzdFBhdGguanNcbiAqKiBtb2R1bGUgaWQgPSAyOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIFNldENhY2hlID0gcmVxdWlyZSgnLi9fU2V0Q2FjaGUnKSxcbiAgICBhcnJheVNvbWUgPSByZXF1aXJlKCcuL19hcnJheVNvbWUnKTtcblxuLyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG52YXIgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyA9IDEsXG4gICAgUEFSVElBTF9DT01QQVJFX0ZMQUcgPSAyO1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgYXJyYXlzIHdpdGggc3VwcG9ydCBmb3JcbiAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0FycmF5fSBvdGhlciBUaGUgb3RoZXIgYXJyYXkgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIG9mIGNvbXBhcmlzb24gZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgXG4gKiAgZm9yIG1vcmUgZGV0YWlscy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzdGFjayBUcmFja3MgdHJhdmVyc2VkIGBhcnJheWAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXJyYXlzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGVxdWFsQXJyYXlzKGFycmF5LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuICB2YXIgaXNQYXJ0aWFsID0gYml0bWFzayAmIFBBUlRJQUxfQ09NUEFSRV9GTEFHLFxuICAgICAgYXJyTGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgb3RoTGVuZ3RoID0gb3RoZXIubGVuZ3RoO1xuXG4gIGlmIChhcnJMZW5ndGggIT0gb3RoTGVuZ3RoICYmICEoaXNQYXJ0aWFsICYmIG90aExlbmd0aCA+IGFyckxlbmd0aCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuICB2YXIgc3RhY2tlZCA9IHN0YWNrLmdldChhcnJheSk7XG4gIGlmIChzdGFja2VkKSB7XG4gICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG4gIH1cbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSB0cnVlLFxuICAgICAgc2VlbiA9IChiaXRtYXNrICYgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRykgPyBuZXcgU2V0Q2FjaGUgOiB1bmRlZmluZWQ7XG5cbiAgc3RhY2suc2V0KGFycmF5LCBvdGhlcik7XG5cbiAgLy8gSWdub3JlIG5vbi1pbmRleCBwcm9wZXJ0aWVzLlxuICB3aGlsZSAoKytpbmRleCA8IGFyckxlbmd0aCkge1xuICAgIHZhciBhcnJWYWx1ZSA9IGFycmF5W2luZGV4XSxcbiAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltpbmRleF07XG5cbiAgICBpZiAoY3VzdG9taXplcikge1xuICAgICAgdmFyIGNvbXBhcmVkID0gaXNQYXJ0aWFsXG4gICAgICAgID8gY3VzdG9taXplcihvdGhWYWx1ZSwgYXJyVmFsdWUsIGluZGV4LCBvdGhlciwgYXJyYXksIHN0YWNrKVxuICAgICAgICA6IGN1c3RvbWl6ZXIoYXJyVmFsdWUsIG90aFZhbHVlLCBpbmRleCwgYXJyYXksIG90aGVyLCBzdGFjayk7XG4gICAgfVxuICAgIGlmIChjb21wYXJlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoY29tcGFyZWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgIGlmIChzZWVuKSB7XG4gICAgICBpZiAoIWFycmF5U29tZShvdGhlciwgZnVuY3Rpb24ob3RoVmFsdWUsIG90aEluZGV4KSB7XG4gICAgICAgICAgICBpZiAoIXNlZW4uaGFzKG90aEluZGV4KSAmJlxuICAgICAgICAgICAgICAgIChhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spKSkge1xuICAgICAgICAgICAgICByZXR1cm4gc2Vlbi5hZGQob3RoSW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pKSB7XG4gICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCEoXG4gICAgICAgICAgYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8XG4gICAgICAgICAgICBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaylcbiAgICAgICAgKSkge1xuICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgc3RhY2tbJ2RlbGV0ZSddKGFycmF5KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlcXVhbEFycmF5cztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fZXF1YWxBcnJheXMuanNcbiAqKiBtb2R1bGUgaWQgPSAzMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIGhvc3Qgb2JqZWN0IGluIElFIDwgOS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGhvc3Qgb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSG9zdE9iamVjdCh2YWx1ZSkge1xuICAvLyBNYW55IGhvc3Qgb2JqZWN0cyBhcmUgYE9iamVjdGAgb2JqZWN0cyB0aGF0IGNhbiBjb2VyY2UgdG8gc3RyaW5nc1xuICAvLyBkZXNwaXRlIGhhdmluZyBpbXByb3Blcmx5IGRlZmluZWQgYHRvU3RyaW5nYCBtZXRob2RzLlxuICB2YXIgcmVzdWx0ID0gZmFsc2U7XG4gIGlmICh2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZS50b1N0cmluZyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9ICEhKHZhbHVlICsgJycpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0hvc3RPYmplY3Q7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2lzSG9zdE9iamVjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDMxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqL1xudmFyIHJlSXNVaW50ID0gL14oPzowfFsxLTldXFxkKikkLztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgaW5kZXguXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBpbmRleCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHtcbiAgbGVuZ3RoID0gbGVuZ3RoID09IG51bGwgPyBNQVhfU0FGRV9JTlRFR0VSIDogbGVuZ3RoO1xuICByZXR1cm4gISFsZW5ndGggJiZcbiAgICAodHlwZW9mIHZhbHVlID09ICdudW1iZXInIHx8IHJlSXNVaW50LnRlc3QodmFsdWUpKSAmJlxuICAgICh2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0luZGV4O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19pc0luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMzJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vaXNPYmplY3QnKTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSBmb3Igc3RyaWN0IGVxdWFsaXR5IGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlmIHN1aXRhYmxlIGZvciBzdHJpY3RcbiAqICBlcXVhbGl0eSBjb21wYXJpc29ucywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc1N0cmljdENvbXBhcmFibGUodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSAmJiAhaXNPYmplY3QodmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzU3RyaWN0Q29tcGFyYWJsZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faXNTdHJpY3RDb21wYXJhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBtYXRjaGVzUHJvcGVydHlgIGZvciBzb3VyY2UgdmFsdWVzIHN1aXRhYmxlXG4gKiBmb3Igc3RyaWN0IGVxdWFsaXR5IGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEBwYXJhbSB7Kn0gc3JjVmFsdWUgVGhlIHZhbHVlIHRvIG1hdGNoLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgc3BlYyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gbWF0Y2hlc1N0cmljdENvbXBhcmFibGUoa2V5LCBzcmNWYWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBvYmplY3Rba2V5XSA9PT0gc3JjVmFsdWUgJiZcbiAgICAgIChzcmNWYWx1ZSAhPT0gdW5kZWZpbmVkIHx8IChrZXkgaW4gT2JqZWN0KG9iamVjdCkpKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbWF0Y2hlc1N0cmljdENvbXBhcmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xudmFyIGZ1bmNUb1N0cmluZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqXG4gKiBDb252ZXJ0cyBgZnVuY2AgdG8gaXRzIHNvdXJjZSBjb2RlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc291cmNlIGNvZGUuXG4gKi9cbmZ1bmN0aW9uIHRvU291cmNlKGZ1bmMpIHtcbiAgaWYgKGZ1bmMgIT0gbnVsbCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZnVuY1RvU3RyaW5nLmNhbGwoZnVuYyk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIChmdW5jICsgJycpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRvU291cmNlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL190b1NvdXJjZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZURlbGF5ID0gcmVxdWlyZSgnLi9fYmFzZURlbGF5JyksXG4gICAgcmVzdCA9IHJlcXVpcmUoJy4vcmVzdCcpO1xuXG4vKipcbiAqIERlZmVycyBpbnZva2luZyB0aGUgYGZ1bmNgIHVudGlsIHRoZSBjdXJyZW50IGNhbGwgc3RhY2sgaGFzIGNsZWFyZWQuIEFueVxuICogYWRkaXRpb25hbCBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIHRvIGBmdW5jYCB3aGVuIGl0J3MgaW52b2tlZC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlZmVyLlxuICogQHBhcmFtIHsuLi4qfSBbYXJnc10gVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgYGZ1bmNgIHdpdGguXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lciBpZC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5kZWZlcihmdW5jdGlvbih0ZXh0KSB7XG4gKiAgIGNvbnNvbGUubG9nKHRleHQpO1xuICogfSwgJ2RlZmVycmVkJyk7XG4gKiAvLyA9PiBMb2dzICdkZWZlcnJlZCcgYWZ0ZXIgb25lIG9yIG1vcmUgbWlsbGlzZWNvbmRzLlxuICovXG52YXIgZGVmZXIgPSByZXN0KGZ1bmN0aW9uKGZ1bmMsIGFyZ3MpIHtcbiAgcmV0dXJuIGJhc2VEZWxheShmdW5jLCAxLCBhcmdzKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlZmVyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2RlZmVyLmpzXG4gKiogbW9kdWxlIGlkID0gMzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc0FycmF5TGlrZU9iamVjdCA9IHJlcXVpcmUoJy4vaXNBcnJheUxpa2VPYmplY3QnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJztcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIHByb3BlcnR5SXNFbnVtZXJhYmxlID0gb2JqZWN0UHJvdG8ucHJvcGVydHlJc0VudW1lcmFibGU7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGFuIGBhcmd1bWVudHNgIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcmd1bWVudHMoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FyZ3VtZW50cyhbMSwgMiwgM10pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcmd1bWVudHModmFsdWUpIHtcbiAgLy8gU2FmYXJpIDguMSBpbmNvcnJlY3RseSBtYWtlcyBgYXJndW1lbnRzLmNhbGxlZWAgZW51bWVyYWJsZSBpbiBzdHJpY3QgbW9kZS5cbiAgcmV0dXJuIGlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKSAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCAnY2FsbGVlJykgJiZcbiAgICAoIXByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodmFsdWUsICdjYWxsZWUnKSB8fCBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBhcmdzVGFnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0FyZ3VtZW50cztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9pc0FyZ3VtZW50cy5qc1xuICoqIG1vZHVsZSBpZCA9IDM3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0TGVuZ3RoID0gcmVxdWlyZSgnLi9fZ2V0TGVuZ3RoJyksXG4gICAgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJy4vaXNGdW5jdGlvbicpLFxuICAgIGlzTGVuZ3RoID0gcmVxdWlyZSgnLi9pc0xlbmd0aCcpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UuIEEgdmFsdWUgaXMgY29uc2lkZXJlZCBhcnJheS1saWtlIGlmIGl0J3NcbiAqIG5vdCBhIGZ1bmN0aW9uIGFuZCBoYXMgYSBgdmFsdWUubGVuZ3RoYCB0aGF0J3MgYW4gaW50ZWdlciBncmVhdGVyIHRoYW4gb3JcbiAqIGVxdWFsIHRvIGAwYCBhbmQgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUmAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZShkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKCdhYmMnKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBpc0xlbmd0aChnZXRMZW5ndGgodmFsdWUpKSAmJiAhaXNGdW5jdGlvbih2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNBcnJheUxpa2U7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaXNBcnJheUxpa2UuanNcbiAqKiBtb2R1bGUgaWQgPSAzOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzQXJyYXkgPSByZXF1aXJlKCcuL2lzQXJyYXknKSxcbiAgICBpc09iamVjdExpa2UgPSByZXF1aXJlKCcuL2lzT2JqZWN0TGlrZScpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgc3RyaW5nVGFnID0gJ1tvYmplY3QgU3RyaW5nXSc7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3RyaW5nYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBzaW5jZSAwLjEuMFxuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1N0cmluZygnYWJjJyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N0cmluZygxKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgfHxcbiAgICAoIWlzQXJyYXkodmFsdWUpICYmIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3RyaW5nVGFnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1N0cmluZztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9pc1N0cmluZy5qc1xuICoqIG1vZHVsZSBpZCA9IDM5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZUhhcyA9IHJlcXVpcmUoJy4vX2Jhc2VIYXMnKSxcbiAgICBiYXNlS2V5cyA9IHJlcXVpcmUoJy4vX2Jhc2VLZXlzJyksXG4gICAgaW5kZXhLZXlzID0gcmVxdWlyZSgnLi9faW5kZXhLZXlzJyksXG4gICAgaXNBcnJheUxpa2UgPSByZXF1aXJlKCcuL2lzQXJyYXlMaWtlJyksXG4gICAgaXNJbmRleCA9IHJlcXVpcmUoJy4vX2lzSW5kZXgnKSxcbiAgICBpc1Byb3RvdHlwZSA9IHJlcXVpcmUoJy4vX2lzUHJvdG90eXBlJyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuXG4gKlxuICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuIFNlZSB0aGVcbiAqIFtFUyBzcGVjXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3Qua2V5cylcbiAqIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogQHN0YXRpY1xuICogQHNpbmNlIDAuMS4wXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IE9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqIEBleGFtcGxlXG4gKlxuICogZnVuY3Rpb24gRm9vKCkge1xuICogICB0aGlzLmEgPSAxO1xuICogICB0aGlzLmIgPSAyO1xuICogfVxuICpcbiAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gKlxuICogXy5rZXlzKG5ldyBGb28pO1xuICogLy8gPT4gWydhJywgJ2InXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICpcbiAqIF8ua2V5cygnaGknKTtcbiAqIC8vID0+IFsnMCcsICcxJ11cbiAqL1xuZnVuY3Rpb24ga2V5cyhvYmplY3QpIHtcbiAgdmFyIGlzUHJvdG8gPSBpc1Byb3RvdHlwZShvYmplY3QpO1xuICBpZiAoIShpc1Byb3RvIHx8IGlzQXJyYXlMaWtlKG9iamVjdCkpKSB7XG4gICAgcmV0dXJuIGJhc2VLZXlzKG9iamVjdCk7XG4gIH1cbiAgdmFyIGluZGV4ZXMgPSBpbmRleEtleXMob2JqZWN0KSxcbiAgICAgIHNraXBJbmRleGVzID0gISFpbmRleGVzLFxuICAgICAgcmVzdWx0ID0gaW5kZXhlcyB8fCBbXSxcbiAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG5cbiAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgIGlmIChiYXNlSGFzKG9iamVjdCwga2V5KSAmJlxuICAgICAgICAhKHNraXBJbmRleGVzICYmIChrZXkgPT0gJ2xlbmd0aCcgfHwgaXNJbmRleChrZXksIGxlbmd0aCkpKSAmJlxuICAgICAgICAhKGlzUHJvdG8gJiYga2V5ID09ICdjb25zdHJ1Y3RvcicpKSB7XG4gICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGtleXM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gva2V5cy5qc1xuICoqIG1vZHVsZSBpZCA9IDQwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgdG9GaW5pdGUgPSByZXF1aXJlKCcuL3RvRmluaXRlJyk7XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBpbnRlZ2VyLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uXG4gKiBbYFRvSW50ZWdlcmBdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy10b2ludGVnZXIpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29udmVydGVkIGludGVnZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9JbnRlZ2VyKDMuMik7XG4gKiAvLyA9PiAzXG4gKlxuICogXy50b0ludGVnZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiAwXG4gKlxuICogXy50b0ludGVnZXIoSW5maW5pdHkpO1xuICogLy8gPT4gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDhcbiAqXG4gKiBfLnRvSW50ZWdlcignMy4yJyk7XG4gKiAvLyA9PiAzXG4gKi9cbmZ1bmN0aW9uIHRvSW50ZWdlcih2YWx1ZSkge1xuICB2YXIgcmVzdWx0ID0gdG9GaW5pdGUodmFsdWUpLFxuICAgICAgcmVtYWluZGVyID0gcmVzdWx0ICUgMTtcblxuICByZXR1cm4gcmVzdWx0ID09PSByZXN1bHQgPyAocmVtYWluZGVyID8gcmVzdWx0IC0gcmVtYWluZGVyIDogcmVzdWx0KSA6IDA7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9JbnRlZ2VyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL3RvSW50ZWdlci5qc1xuICoqIG1vZHVsZSBpZCA9IDQxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJy4vaXNGdW5jdGlvbicpLFxuICAgIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pc09iamVjdCcpLFxuICAgIGlzU3ltYm9sID0gcmVxdWlyZSgnLi9pc1N5bWJvbCcpO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBOQU4gPSAwIC8gMDtcblxuLyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS4gKi9cbnZhciByZVRyaW0gPSAvXlxccyt8XFxzKyQvZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJhZCBzaWduZWQgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiaW5hcnkgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3Qgb2N0YWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pO1xuXG4vKiogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgd2l0aG91dCBhIGRlcGVuZGVuY3kgb24gYHJvb3RgLiAqL1xudmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9OdW1iZXIoMy4yKTtcbiAqIC8vID0+IDMuMlxuICpcbiAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiA1ZS0zMjRcbiAqXG4gKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcbiAqIC8vID0+IEluZmluaXR5XG4gKlxuICogXy50b051bWJlcignMy4yJyk7XG4gKiAvLyA9PiAzLjJcbiAqL1xuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIE5BTjtcbiAgfVxuICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgdmFyIG90aGVyID0gaXNGdW5jdGlvbih2YWx1ZS52YWx1ZU9mKSA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICB9XG4gIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcbiAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcbiAgcmV0dXJuIChpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkpXG4gICAgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpXG4gICAgOiAocmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9OdW1iZXI7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvdG9OdW1iZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA0MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiBWdWUuanMgdjEuMC4yNlxuICogKGMpIDIwMTYgRXZhbiBZb3VcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBzZXQob2JqLCBrZXksIHZhbCkge1xuICBpZiAoaGFzT3duKG9iaiwga2V5KSkge1xuICAgIG9ialtrZXldID0gdmFsO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAob2JqLl9pc1Z1ZSkge1xuICAgIHNldChvYmouX2RhdGEsIGtleSwgdmFsKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG9iID0gb2JqLl9fb2JfXztcbiAgaWYgKCFvYikge1xuICAgIG9ialtrZXldID0gdmFsO1xuICAgIHJldHVybjtcbiAgfVxuICBvYi5jb252ZXJ0KGtleSwgdmFsKTtcbiAgb2IuZGVwLm5vdGlmeSgpO1xuICBpZiAob2Iudm1zKSB7XG4gICAgdmFyIGkgPSBvYi52bXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciB2bSA9IG9iLnZtc1tpXTtcbiAgICAgIHZtLl9wcm94eShrZXkpO1xuICAgICAgdm0uX2RpZ2VzdCgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdmFsO1xufVxuXG4vKipcbiAqIERlbGV0ZSBhIHByb3BlcnR5IGFuZCB0cmlnZ2VyIGNoYW5nZSBpZiBuZWNlc3NhcnkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICovXG5cbmZ1bmN0aW9uIGRlbChvYmosIGtleSkge1xuICBpZiAoIWhhc093bihvYmosIGtleSkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZGVsZXRlIG9ialtrZXldO1xuICB2YXIgb2IgPSBvYmouX19vYl9fO1xuICBpZiAoIW9iKSB7XG4gICAgaWYgKG9iai5faXNWdWUpIHtcbiAgICAgIGRlbGV0ZSBvYmouX2RhdGFba2V5XTtcbiAgICAgIG9iai5fZGlnZXN0KCk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBvYi5kZXAubm90aWZ5KCk7XG4gIGlmIChvYi52bXMpIHtcbiAgICB2YXIgaSA9IG9iLnZtcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFyIHZtID0gb2Iudm1zW2ldO1xuICAgICAgdm0uX3VucHJveHkoa2V5KTtcbiAgICAgIHZtLl9kaWdlc3QoKTtcbiAgICB9XG4gIH1cbn1cblxudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbi8qKlxuICogQ2hlY2sgd2hldGhlciB0aGUgb2JqZWN0IGhhcyB0aGUgcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBoYXNPd24ob2JqLCBrZXkpIHtcbiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBsaXRlcmFsIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxudmFyIGxpdGVyYWxWYWx1ZVJFID0gL15cXHM/KHRydWV8ZmFsc2V8LT9bXFxkXFwuXSt8J1teJ10qJ3xcIlteXCJdKlwiKVxccz8kLztcblxuZnVuY3Rpb24gaXNMaXRlcmFsKGV4cCkge1xuICByZXR1cm4gbGl0ZXJhbFZhbHVlUkUudGVzdChleHApO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgc3RyaW5nIHN0YXJ0cyB3aXRoICQgb3IgX1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNSZXNlcnZlZChzdHIpIHtcbiAgdmFyIGMgPSAoc3RyICsgJycpLmNoYXJDb2RlQXQoMCk7XG4gIHJldHVybiBjID09PSAweDI0IHx8IGMgPT09IDB4NUY7XG59XG5cbi8qKlxuICogR3VhcmQgdGV4dCBvdXRwdXQsIG1ha2Ugc3VyZSB1bmRlZmluZWQgb3V0cHV0c1xuICogZW1wdHkgc3RyaW5nXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIF90b1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWUudG9TdHJpbmcoKTtcbn1cblxuLyoqXG4gKiBDaGVjayBhbmQgY29udmVydCBwb3NzaWJsZSBudW1lcmljIHN0cmluZ3MgdG8gbnVtYmVyc1xuICogYmVmb3JlIHNldHRpbmcgYmFjayB0byBkYXRhXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7KnxOdW1iZXJ9XG4gKi9cblxuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHBhcnNlZCA9IE51bWJlcih2YWx1ZSk7XG4gICAgcmV0dXJuIGlzTmFOKHBhcnNlZCkgPyB2YWx1ZSA6IHBhcnNlZDtcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlcnQgc3RyaW5nIGJvb2xlYW4gbGl0ZXJhbHMgaW50byByZWFsIGJvb2xlYW5zLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4geyp8Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiB0b0Jvb2xlYW4odmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09PSAndHJ1ZScgPyB0cnVlIDogdmFsdWUgPT09ICdmYWxzZScgPyBmYWxzZSA6IHZhbHVlO1xufVxuXG4vKipcbiAqIFN0cmlwIHF1b3RlcyBmcm9tIGEgc3RyaW5nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nIHwgZmFsc2V9XG4gKi9cblxuZnVuY3Rpb24gc3RyaXBRdW90ZXMoc3RyKSB7XG4gIHZhciBhID0gc3RyLmNoYXJDb2RlQXQoMCk7XG4gIHZhciBiID0gc3RyLmNoYXJDb2RlQXQoc3RyLmxlbmd0aCAtIDEpO1xuICByZXR1cm4gYSA9PT0gYiAmJiAoYSA9PT0gMHgyMiB8fCBhID09PSAweDI3KSA/IHN0ci5zbGljZSgxLCAtMSkgOiBzdHI7XG59XG5cbi8qKlxuICogQ2FtZWxpemUgYSBoeXBoZW4tZGVsbWl0ZWQgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG52YXIgY2FtZWxpemVSRSA9IC8tKFxcdykvZztcblxuZnVuY3Rpb24gY2FtZWxpemUoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShjYW1lbGl6ZVJFLCB0b1VwcGVyKTtcbn1cblxuZnVuY3Rpb24gdG9VcHBlcihfLCBjKSB7XG4gIHJldHVybiBjID8gYy50b1VwcGVyQ2FzZSgpIDogJyc7XG59XG5cbi8qKlxuICogSHlwaGVuYXRlIGEgY2FtZWxDYXNlIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxudmFyIGh5cGhlbmF0ZVJFID0gLyhbYS16XFxkXSkoW0EtWl0pL2c7XG5cbmZ1bmN0aW9uIGh5cGhlbmF0ZShzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKGh5cGhlbmF0ZVJFLCAnJDEtJDInKS50b0xvd2VyQ2FzZSgpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGh5cGhlbi91bmRlcnNjb3JlL3NsYXNoIGRlbGltaXRlcmVkIG5hbWVzIGludG9cbiAqIGNhbWVsaXplZCBjbGFzc05hbWVzLlxuICpcbiAqIGUuZy4gbXktY29tcG9uZW50ID0+IE15Q29tcG9uZW50XG4gKiAgICAgIHNvbWVfZWxzZSAgICA9PiBTb21lRWxzZVxuICogICAgICBzb21lL2NvbXAgICAgPT4gU29tZUNvbXBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxudmFyIGNsYXNzaWZ5UkUgPSAvKD86XnxbLV9cXC9dKShcXHcpL2c7XG5cbmZ1bmN0aW9uIGNsYXNzaWZ5KHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoY2xhc3NpZnlSRSwgdG9VcHBlcik7XG59XG5cbi8qKlxuICogU2ltcGxlIGJpbmQsIGZhc3RlciB0aGFuIG5hdGl2ZVxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge09iamVjdH0gY3R4XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBiaW5kKGZuLCBjdHgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG4gICAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHJldHVybiBsID8gbCA+IDEgPyBmbi5hcHBseShjdHgsIGFyZ3VtZW50cykgOiBmbi5jYWxsKGN0eCwgYSkgOiBmbi5jYWxsKGN0eCk7XG4gIH07XG59XG5cbi8qKlxuICogQ29udmVydCBhbiBBcnJheS1saWtlIG9iamVjdCB0byBhIHJlYWwgQXJyYXkuXG4gKlxuICogQHBhcmFtIHtBcnJheS1saWtlfSBsaXN0XG4gKiBAcGFyYW0ge051bWJlcn0gW3N0YXJ0XSAtIHN0YXJ0IGluZGV4XG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuXG5mdW5jdGlvbiB0b0FycmF5KGxpc3QsIHN0YXJ0KSB7XG4gIHN0YXJ0ID0gc3RhcnQgfHwgMDtcbiAgdmFyIGkgPSBsaXN0Lmxlbmd0aCAtIHN0YXJ0O1xuICB2YXIgcmV0ID0gbmV3IEFycmF5KGkpO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgcmV0W2ldID0gbGlzdFtpICsgc3RhcnRdO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogTWl4IHByb3BlcnRpZXMgaW50byB0YXJnZXQgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0b1xuICogQHBhcmFtIHtPYmplY3R9IGZyb21cbiAqL1xuXG5mdW5jdGlvbiBleHRlbmQodG8sIGZyb20pIHtcbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhmcm9tKTtcbiAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIHRvW2tleXNbaV1dID0gZnJvbVtrZXlzW2ldXTtcbiAgfVxuICByZXR1cm4gdG87XG59XG5cbi8qKlxuICogUXVpY2sgb2JqZWN0IGNoZWNrIC0gdGhpcyBpcyBwcmltYXJpbHkgdXNlZCB0byB0ZWxsXG4gKiBPYmplY3RzIGZyb20gcHJpbWl0aXZlIHZhbHVlcyB3aGVuIHdlIGtub3cgdGhlIHZhbHVlXG4gKiBpcyBhIEpTT04tY29tcGxpYW50IHR5cGUuXG4gKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG4gIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogU3RyaWN0IG9iamVjdCB0eXBlIGNoZWNrLiBPbmx5IHJldHVybnMgdHJ1ZVxuICogZm9yIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xudmFyIE9CSkVDVF9TVFJJTkcgPSAnW29iamVjdCBPYmplY3RdJztcblxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gT0JKRUNUX1NUUklORztcbn1cblxuLyoqXG4gKiBBcnJheSB0eXBlIGNoZWNrLlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuLyoqXG4gKiBEZWZpbmUgYSBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0geyp9IHZhbFxuICogQHBhcmFtIHtCb29sZWFufSBbZW51bWVyYWJsZV1cbiAqL1xuXG5mdW5jdGlvbiBkZWYob2JqLCBrZXksIHZhbCwgZW51bWVyYWJsZSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICB2YWx1ZTogdmFsLFxuICAgIGVudW1lcmFibGU6ICEhZW51bWVyYWJsZSxcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5cbi8qKlxuICogRGVib3VuY2UgYSBmdW5jdGlvbiBzbyBpdCBvbmx5IGdldHMgY2FsbGVkIGFmdGVyIHRoZVxuICogaW5wdXQgc3RvcHMgYXJyaXZpbmcgYWZ0ZXIgdGhlIGdpdmVuIHdhaXQgcGVyaW9kLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmNcbiAqIEBwYXJhbSB7TnVtYmVyfSB3YWl0XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG4gKi9cblxuZnVuY3Rpb24gX2RlYm91bmNlKGZ1bmMsIHdhaXQpIHtcbiAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xuICB2YXIgbGF0ZXIgPSBmdW5jdGlvbiBsYXRlcigpIHtcbiAgICB2YXIgbGFzdCA9IERhdGUubm93KCkgLSB0aW1lc3RhbXA7XG4gICAgaWYgKGxhc3QgPCB3YWl0ICYmIGxhc3QgPj0gMCkge1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgfVxuICB9O1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGNvbnRleHQgPSB0aGlzO1xuICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICBpZiAoIXRpbWVvdXQpIHtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cblxuLyoqXG4gKiBNYW51YWwgaW5kZXhPZiBiZWNhdXNlIGl0J3Mgc2xpZ2h0bHkgZmFzdGVyIHRoYW5cbiAqIG5hdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKi9cblxuZnVuY3Rpb24gaW5kZXhPZihhcnIsIG9iaikge1xuICB2YXIgaSA9IGFyci5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBpZiAoYXJyW2ldID09PSBvYmopIHJldHVybiBpO1xuICB9XG4gIHJldHVybiAtMTtcbn1cblxuLyoqXG4gKiBNYWtlIGEgY2FuY2VsbGFibGUgdmVyc2lvbiBvZiBhbiBhc3luYyBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY2FuY2VsbGFibGUoZm4pIHtcbiAgdmFyIGNiID0gZnVuY3Rpb24gY2IoKSB7XG4gICAgaWYgKCFjYi5jYW5jZWxsZWQpIHtcbiAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfTtcbiAgY2IuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgIGNiLmNhbmNlbGxlZCA9IHRydWU7XG4gIH07XG4gIHJldHVybiBjYjtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0d28gdmFsdWVzIGFyZSBsb29zZWx5IGVxdWFsIC0gdGhhdCBpcyxcbiAqIGlmIHRoZXkgYXJlIHBsYWluIG9iamVjdHMsIGRvIHRoZXkgaGF2ZSB0aGUgc2FtZSBzaGFwZT9cbiAqXG4gKiBAcGFyYW0geyp9IGFcbiAqIEBwYXJhbSB7Kn0gYlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBsb29zZUVxdWFsKGEsIGIpIHtcbiAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gIHJldHVybiBhID09IGIgfHwgKGlzT2JqZWN0KGEpICYmIGlzT2JqZWN0KGIpID8gSlNPTi5zdHJpbmdpZnkoYSkgPT09IEpTT04uc3RyaW5naWZ5KGIpIDogZmFsc2UpO1xuICAvKiBlc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xufVxuXG52YXIgaGFzUHJvdG8gPSAoJ19fcHJvdG9fXycgaW4ge30pO1xuXG4vLyBCcm93c2VyIGVudmlyb25tZW50IHNuaWZmaW5nXG52YXIgaW5Ccm93c2VyID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHdpbmRvdykgIT09ICdbb2JqZWN0IE9iamVjdF0nO1xuXG4vLyBkZXRlY3QgZGV2dG9vbHNcbnZhciBkZXZ0b29scyA9IGluQnJvd3NlciAmJiB3aW5kb3cuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXztcblxuLy8gVUEgc25pZmZpbmcgZm9yIHdvcmtpbmcgYXJvdW5kIGJyb3dzZXItc3BlY2lmaWMgcXVpcmtzXG52YXIgVUEgPSBpbkJyb3dzZXIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbnZhciBpc0lFID0gVUEgJiYgVUEuaW5kZXhPZigndHJpZGVudCcpID4gMDtcbnZhciBpc0lFOSA9IFVBICYmIFVBLmluZGV4T2YoJ21zaWUgOS4wJykgPiAwO1xudmFyIGlzQW5kcm9pZCA9IFVBICYmIFVBLmluZGV4T2YoJ2FuZHJvaWQnKSA+IDA7XG52YXIgaXNJb3MgPSBVQSAmJiAvKGlwaG9uZXxpcGFkfGlwb2R8aW9zKS9pLnRlc3QoVUEpO1xudmFyIGlvc1ZlcnNpb25NYXRjaCA9IGlzSW9zICYmIFVBLm1hdGNoKC9vcyAoW1xcZF9dKykvKTtcbnZhciBpb3NWZXJzaW9uID0gaW9zVmVyc2lvbk1hdGNoICYmIGlvc1ZlcnNpb25NYXRjaFsxXS5zcGxpdCgnXycpO1xuXG4vLyBkZXRlY3RpbmcgaU9TIFVJV2ViVmlldyBieSBpbmRleGVkREJcbnZhciBoYXNNdXRhdGlvbk9ic2VydmVyQnVnID0gaW9zVmVyc2lvbiAmJiBOdW1iZXIoaW9zVmVyc2lvblswXSkgPj0gOSAmJiBOdW1iZXIoaW9zVmVyc2lvblsxXSkgPj0gMyAmJiAhd2luZG93LmluZGV4ZWREQjtcblxudmFyIHRyYW5zaXRpb25Qcm9wID0gdW5kZWZpbmVkO1xudmFyIHRyYW5zaXRpb25FbmRFdmVudCA9IHVuZGVmaW5lZDtcbnZhciBhbmltYXRpb25Qcm9wID0gdW5kZWZpbmVkO1xudmFyIGFuaW1hdGlvbkVuZEV2ZW50ID0gdW5kZWZpbmVkO1xuXG4vLyBUcmFuc2l0aW9uIHByb3BlcnR5L2V2ZW50IHNuaWZmaW5nXG5pZiAoaW5Ccm93c2VyICYmICFpc0lFOSkge1xuICB2YXIgaXNXZWJraXRUcmFucyA9IHdpbmRvdy5vbnRyYW5zaXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kICE9PSB1bmRlZmluZWQ7XG4gIHZhciBpc1dlYmtpdEFuaW0gPSB3aW5kb3cub25hbmltYXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQgIT09IHVuZGVmaW5lZDtcbiAgdHJhbnNpdGlvblByb3AgPSBpc1dlYmtpdFRyYW5zID8gJ1dlYmtpdFRyYW5zaXRpb24nIDogJ3RyYW5zaXRpb24nO1xuICB0cmFuc2l0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdFRyYW5zID8gJ3dlYmtpdFRyYW5zaXRpb25FbmQnIDogJ3RyYW5zaXRpb25lbmQnO1xuICBhbmltYXRpb25Qcm9wID0gaXNXZWJraXRBbmltID8gJ1dlYmtpdEFuaW1hdGlvbicgOiAnYW5pbWF0aW9uJztcbiAgYW5pbWF0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdEFuaW0gPyAnd2Via2l0QW5pbWF0aW9uRW5kJyA6ICdhbmltYXRpb25lbmQnO1xufVxuXG4vKipcbiAqIERlZmVyIGEgdGFzayB0byBleGVjdXRlIGl0IGFzeW5jaHJvbm91c2x5LiBJZGVhbGx5IHRoaXNcbiAqIHNob3VsZCBiZSBleGVjdXRlZCBhcyBhIG1pY3JvdGFzaywgc28gd2UgbGV2ZXJhZ2VcbiAqIE11dGF0aW9uT2JzZXJ2ZXIgaWYgaXQncyBhdmFpbGFibGUsIGFuZCBmYWxsYmFjayB0b1xuICogc2V0VGltZW91dCgwKS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtIHtPYmplY3R9IGN0eFxuICovXG5cbnZhciBuZXh0VGljayA9IChmdW5jdGlvbiAoKSB7XG4gIHZhciBjYWxsYmFja3MgPSBbXTtcbiAgdmFyIHBlbmRpbmcgPSBmYWxzZTtcbiAgdmFyIHRpbWVyRnVuYztcbiAgZnVuY3Rpb24gbmV4dFRpY2tIYW5kbGVyKCkge1xuICAgIHBlbmRpbmcgPSBmYWxzZTtcbiAgICB2YXIgY29waWVzID0gY2FsbGJhY2tzLnNsaWNlKDApO1xuICAgIGNhbGxiYWNrcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29waWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb3BpZXNbaV0oKTtcbiAgICB9XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyICE9PSAndW5kZWZpbmVkJyAmJiAhaGFzTXV0YXRpb25PYnNlcnZlckJ1Zykge1xuICAgIHZhciBjb3VudGVyID0gMTtcbiAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihuZXh0VGlja0hhbmRsZXIpO1xuICAgIHZhciB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNvdW50ZXIpO1xuICAgIG9ic2VydmVyLm9ic2VydmUodGV4dE5vZGUsIHtcbiAgICAgIGNoYXJhY3RlckRhdGE6IHRydWVcbiAgICB9KTtcbiAgICB0aW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBjb3VudGVyID0gKGNvdW50ZXIgKyAxKSAlIDI7XG4gICAgICB0ZXh0Tm9kZS5kYXRhID0gY291bnRlcjtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIHdlYnBhY2sgYXR0ZW1wdHMgdG8gaW5qZWN0IGEgc2hpbSBmb3Igc2V0SW1tZWRpYXRlXG4gICAgLy8gaWYgaXQgaXMgdXNlZCBhcyBhIGdsb2JhbCwgc28gd2UgaGF2ZSB0byB3b3JrIGFyb3VuZCB0aGF0IHRvXG4gICAgLy8gYXZvaWQgYnVuZGxpbmcgdW5uZWNlc3NhcnkgY29kZS5cbiAgICB2YXIgY29udGV4dCA9IGluQnJvd3NlciA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDoge307XG4gICAgdGltZXJGdW5jID0gY29udGV4dC5zZXRJbW1lZGlhdGUgfHwgc2V0VGltZW91dDtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKGNiLCBjdHgpIHtcbiAgICB2YXIgZnVuYyA9IGN0eCA/IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNiLmNhbGwoY3R4KTtcbiAgICB9IDogY2I7XG4gICAgY2FsbGJhY2tzLnB1c2goZnVuYyk7XG4gICAgaWYgKHBlbmRpbmcpIHJldHVybjtcbiAgICBwZW5kaW5nID0gdHJ1ZTtcbiAgICB0aW1lckZ1bmMobmV4dFRpY2tIYW5kbGVyLCAwKTtcbiAgfTtcbn0pKCk7XG5cbnZhciBfU2V0ID0gdW5kZWZpbmVkO1xuLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5pZiAodHlwZW9mIFNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgU2V0LnRvU3RyaW5nKCkubWF0Y2goL25hdGl2ZSBjb2RlLykpIHtcbiAgLy8gdXNlIG5hdGl2ZSBTZXQgd2hlbiBhdmFpbGFibGUuXG4gIF9TZXQgPSBTZXQ7XG59IGVsc2Uge1xuICAvLyBhIG5vbi1zdGFuZGFyZCBTZXQgcG9seWZpbGwgdGhhdCBvbmx5IHdvcmtzIHdpdGggcHJpbWl0aXZlIGtleXMuXG4gIF9TZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5zZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9O1xuICBfU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0W2tleV0gIT09IHVuZGVmaW5lZDtcbiAgfTtcbiAgX1NldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHRoaXMuc2V0W2tleV0gPSAxO1xuICB9O1xuICBfU2V0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIENhY2hlKGxpbWl0KSB7XG4gIHRoaXMuc2l6ZSA9IDA7XG4gIHRoaXMubGltaXQgPSBsaW1pdDtcbiAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gdW5kZWZpbmVkO1xuICB0aGlzLl9rZXltYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xufVxuXG52YXIgcCA9IENhY2hlLnByb3RvdHlwZTtcblxuLyoqXG4gKiBQdXQgPHZhbHVlPiBpbnRvIHRoZSBjYWNoZSBhc3NvY2lhdGVkIHdpdGggPGtleT4uXG4gKiBSZXR1cm5zIHRoZSBlbnRyeSB3aGljaCB3YXMgcmVtb3ZlZCB0byBtYWtlIHJvb20gZm9yXG4gKiB0aGUgbmV3IGVudHJ5LiBPdGhlcndpc2UgdW5kZWZpbmVkIGlzIHJldHVybmVkLlxuICogKGkuZS4gaWYgdGhlcmUgd2FzIGVub3VnaCByb29tIGFscmVhZHkpLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge0VudHJ5fHVuZGVmaW5lZH1cbiAqL1xuXG5wLnB1dCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gIHZhciByZW1vdmVkO1xuXG4gIHZhciBlbnRyeSA9IHRoaXMuZ2V0KGtleSwgdHJ1ZSk7XG4gIGlmICghZW50cnkpIHtcbiAgICBpZiAodGhpcy5zaXplID09PSB0aGlzLmxpbWl0KSB7XG4gICAgICByZW1vdmVkID0gdGhpcy5zaGlmdCgpO1xuICAgIH1cbiAgICBlbnRyeSA9IHtcbiAgICAgIGtleToga2V5XG4gICAgfTtcbiAgICB0aGlzLl9rZXltYXBba2V5XSA9IGVudHJ5O1xuICAgIGlmICh0aGlzLnRhaWwpIHtcbiAgICAgIHRoaXMudGFpbC5uZXdlciA9IGVudHJ5O1xuICAgICAgZW50cnkub2xkZXIgPSB0aGlzLnRhaWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGVhZCA9IGVudHJ5O1xuICAgIH1cbiAgICB0aGlzLnRhaWwgPSBlbnRyeTtcbiAgICB0aGlzLnNpemUrKztcbiAgfVxuICBlbnRyeS52YWx1ZSA9IHZhbHVlO1xuXG4gIHJldHVybiByZW1vdmVkO1xufTtcblxuLyoqXG4gKiBQdXJnZSB0aGUgbGVhc3QgcmVjZW50bHkgdXNlZCAob2xkZXN0KSBlbnRyeSBmcm9tIHRoZVxuICogY2FjaGUuIFJldHVybnMgdGhlIHJlbW92ZWQgZW50cnkgb3IgdW5kZWZpbmVkIGlmIHRoZVxuICogY2FjaGUgd2FzIGVtcHR5LlxuICovXG5cbnAuc2hpZnQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBlbnRyeSA9IHRoaXMuaGVhZDtcbiAgaWYgKGVudHJ5KSB7XG4gICAgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5ld2VyO1xuICAgIHRoaXMuaGVhZC5vbGRlciA9IHVuZGVmaW5lZDtcbiAgICBlbnRyeS5uZXdlciA9IGVudHJ5Lm9sZGVyID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2tleW1hcFtlbnRyeS5rZXldID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2l6ZS0tO1xuICB9XG4gIHJldHVybiBlbnRyeTtcbn07XG5cbi8qKlxuICogR2V0IGFuZCByZWdpc3RlciByZWNlbnQgdXNlIG9mIDxrZXk+LiBSZXR1cm5zIHRoZSB2YWx1ZVxuICogYXNzb2NpYXRlZCB3aXRoIDxrZXk+IG9yIHVuZGVmaW5lZCBpZiBub3QgaW4gY2FjaGUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHtCb29sZWFufSByZXR1cm5FbnRyeVxuICogQHJldHVybiB7RW50cnl8Kn1cbiAqL1xuXG5wLmdldCA9IGZ1bmN0aW9uIChrZXksIHJldHVybkVudHJ5KSB7XG4gIHZhciBlbnRyeSA9IHRoaXMuX2tleW1hcFtrZXldO1xuICBpZiAoZW50cnkgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICBpZiAoZW50cnkgPT09IHRoaXMudGFpbCkge1xuICAgIHJldHVybiByZXR1cm5FbnRyeSA/IGVudHJ5IDogZW50cnkudmFsdWU7XG4gIH1cbiAgLy8gSEVBRC0tLS0tLS0tLS0tLS0tVEFJTFxuICAvLyAgIDwub2xkZXIgICAubmV3ZXI+XG4gIC8vICA8LS0tIGFkZCBkaXJlY3Rpb24gLS1cbiAgLy8gICBBICBCICBDICA8RD4gIEVcbiAgaWYgKGVudHJ5Lm5ld2VyKSB7XG4gICAgaWYgKGVudHJ5ID09PSB0aGlzLmhlYWQpIHtcbiAgICAgIHRoaXMuaGVhZCA9IGVudHJ5Lm5ld2VyO1xuICAgIH1cbiAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyOyAvLyBDIDwtLSBFLlxuICB9XG4gIGlmIChlbnRyeS5vbGRlcikge1xuICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gZW50cnkubmV3ZXI7IC8vIEMuIC0tPiBFXG4gIH1cbiAgZW50cnkubmV3ZXIgPSB1bmRlZmluZWQ7IC8vIEQgLS14XG4gIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsOyAvLyBELiAtLT4gRVxuICBpZiAodGhpcy50YWlsKSB7XG4gICAgdGhpcy50YWlsLm5ld2VyID0gZW50cnk7IC8vIEUuIDwtLSBEXG4gIH1cbiAgdGhpcy50YWlsID0gZW50cnk7XG4gIHJldHVybiByZXR1cm5FbnRyeSA/IGVudHJ5IDogZW50cnkudmFsdWU7XG59O1xuXG52YXIgY2FjaGUkMSA9IG5ldyBDYWNoZSgxMDAwKTtcbnZhciBmaWx0ZXJUb2tlblJFID0gL1teXFxzJ1wiXSt8J1teJ10qJ3xcIlteXCJdKlwiL2c7XG52YXIgcmVzZXJ2ZWRBcmdSRSA9IC9eaW4kfF4tP1xcZCsvO1xuXG4vKipcbiAqIFBhcnNlciBzdGF0ZVxuICovXG5cbnZhciBzdHI7XG52YXIgZGlyO1xudmFyIGM7XG52YXIgcHJldjtcbnZhciBpO1xudmFyIGw7XG52YXIgbGFzdEZpbHRlckluZGV4O1xudmFyIGluU2luZ2xlO1xudmFyIGluRG91YmxlO1xudmFyIGN1cmx5O1xudmFyIHNxdWFyZTtcbnZhciBwYXJlbjtcbi8qKlxuICogUHVzaCBhIGZpbHRlciB0byB0aGUgY3VycmVudCBkaXJlY3RpdmUgb2JqZWN0XG4gKi9cblxuZnVuY3Rpb24gcHVzaEZpbHRlcigpIHtcbiAgdmFyIGV4cCA9IHN0ci5zbGljZShsYXN0RmlsdGVySW5kZXgsIGkpLnRyaW0oKTtcbiAgdmFyIGZpbHRlcjtcbiAgaWYgKGV4cCkge1xuICAgIGZpbHRlciA9IHt9O1xuICAgIHZhciB0b2tlbnMgPSBleHAubWF0Y2goZmlsdGVyVG9rZW5SRSk7XG4gICAgZmlsdGVyLm5hbWUgPSB0b2tlbnNbMF07XG4gICAgaWYgKHRva2Vucy5sZW5ndGggPiAxKSB7XG4gICAgICBmaWx0ZXIuYXJncyA9IHRva2Vucy5zbGljZSgxKS5tYXAocHJvY2Vzc0ZpbHRlckFyZyk7XG4gICAgfVxuICB9XG4gIGlmIChmaWx0ZXIpIHtcbiAgICAoZGlyLmZpbHRlcnMgPSBkaXIuZmlsdGVycyB8fCBbXSkucHVzaChmaWx0ZXIpO1xuICB9XG4gIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGFyZ3VtZW50IGlzIGR5bmFtaWMgYW5kIHN0cmlwIHF1b3Rlcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYXJnXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gcHJvY2Vzc0ZpbHRlckFyZyhhcmcpIHtcbiAgaWYgKHJlc2VydmVkQXJnUkUudGVzdChhcmcpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiB0b051bWJlcihhcmcpLFxuICAgICAgZHluYW1pYzogZmFsc2VcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHZhciBzdHJpcHBlZCA9IHN0cmlwUXVvdGVzKGFyZyk7XG4gICAgdmFyIGR5bmFtaWMgPSBzdHJpcHBlZCA9PT0gYXJnO1xuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZTogZHluYW1pYyA/IGFyZyA6IHN0cmlwcGVkLFxuICAgICAgZHluYW1pYzogZHluYW1pY1xuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZSBhIGRpcmVjdGl2ZSB2YWx1ZSBhbmQgZXh0cmFjdCB0aGUgZXhwcmVzc2lvblxuICogYW5kIGl0cyBmaWx0ZXJzIGludG8gYSBkZXNjcmlwdG9yLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogXCJhICsgMSB8IHVwcGVyY2FzZVwiIHdpbGwgeWllbGQ6XG4gKiB7XG4gKiAgIGV4cHJlc3Npb246ICdhICsgMScsXG4gKiAgIGZpbHRlcnM6IFtcbiAqICAgICB7IG5hbWU6ICd1cHBlcmNhc2UnLCBhcmdzOiBudWxsIH1cbiAqICAgXVxuICogfVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VEaXJlY3RpdmUocykge1xuICB2YXIgaGl0ID0gY2FjaGUkMS5nZXQocyk7XG4gIGlmIChoaXQpIHtcbiAgICByZXR1cm4gaGl0O1xuICB9XG5cbiAgLy8gcmVzZXQgcGFyc2VyIHN0YXRlXG4gIHN0ciA9IHM7XG4gIGluU2luZ2xlID0gaW5Eb3VibGUgPSBmYWxzZTtcbiAgY3VybHkgPSBzcXVhcmUgPSBwYXJlbiA9IDA7XG4gIGxhc3RGaWx0ZXJJbmRleCA9IDA7XG4gIGRpciA9IHt9O1xuXG4gIGZvciAoaSA9IDAsIGwgPSBzdHIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgcHJldiA9IGM7XG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIGlmIChpblNpbmdsZSkge1xuICAgICAgLy8gY2hlY2sgc2luZ2xlIHF1b3RlXG4gICAgICBpZiAoYyA9PT0gMHgyNyAmJiBwcmV2ICE9PSAweDVDKSBpblNpbmdsZSA9ICFpblNpbmdsZTtcbiAgICB9IGVsc2UgaWYgKGluRG91YmxlKSB7XG4gICAgICAvLyBjaGVjayBkb3VibGUgcXVvdGVcbiAgICAgIGlmIChjID09PSAweDIyICYmIHByZXYgIT09IDB4NUMpIGluRG91YmxlID0gIWluRG91YmxlO1xuICAgIH0gZWxzZSBpZiAoYyA9PT0gMHg3QyAmJiAvLyBwaXBlXG4gICAgc3RyLmNoYXJDb2RlQXQoaSArIDEpICE9PSAweDdDICYmIHN0ci5jaGFyQ29kZUF0KGkgLSAxKSAhPT0gMHg3Qykge1xuICAgICAgaWYgKGRpci5leHByZXNzaW9uID09IG51bGwpIHtcbiAgICAgICAgLy8gZmlyc3QgZmlsdGVyLCBlbmQgb2YgZXhwcmVzc2lvblxuICAgICAgICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTtcbiAgICAgICAgZGlyLmV4cHJlc3Npb24gPSBzdHIuc2xpY2UoMCwgaSkudHJpbSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYWxyZWFkeSBoYXMgZmlsdGVyXG4gICAgICAgIHB1c2hGaWx0ZXIoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoIChjKSB7XG4gICAgICAgIGNhc2UgMHgyMjpcbiAgICAgICAgICBpbkRvdWJsZSA9IHRydWU7YnJlYWs7IC8vIFwiXG4gICAgICAgIGNhc2UgMHgyNzpcbiAgICAgICAgICBpblNpbmdsZSA9IHRydWU7YnJlYWs7IC8vICdcbiAgICAgICAgY2FzZSAweDI4OlxuICAgICAgICAgIHBhcmVuKys7YnJlYWs7IC8vIChcbiAgICAgICAgY2FzZSAweDI5OlxuICAgICAgICAgIHBhcmVuLS07YnJlYWs7IC8vIClcbiAgICAgICAgY2FzZSAweDVCOlxuICAgICAgICAgIHNxdWFyZSsrO2JyZWFrOyAvLyBbXG4gICAgICAgIGNhc2UgMHg1RDpcbiAgICAgICAgICBzcXVhcmUtLTticmVhazsgLy8gXVxuICAgICAgICBjYXNlIDB4N0I6XG4gICAgICAgICAgY3VybHkrKzticmVhazsgLy8ge1xuICAgICAgICBjYXNlIDB4N0Q6XG4gICAgICAgICAgY3VybHktLTticmVhazsgLy8gfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChkaXIuZXhwcmVzc2lvbiA9PSBudWxsKSB7XG4gICAgZGlyLmV4cHJlc3Npb24gPSBzdHIuc2xpY2UoMCwgaSkudHJpbSgpO1xuICB9IGVsc2UgaWYgKGxhc3RGaWx0ZXJJbmRleCAhPT0gMCkge1xuICAgIHB1c2hGaWx0ZXIoKTtcbiAgfVxuXG4gIGNhY2hlJDEucHV0KHMsIGRpcik7XG4gIHJldHVybiBkaXI7XG59XG5cbnZhciBkaXJlY3RpdmUgPSBPYmplY3QuZnJlZXplKHtcbiAgcGFyc2VEaXJlY3RpdmU6IHBhcnNlRGlyZWN0aXZlXG59KTtcblxudmFyIHJlZ2V4RXNjYXBlUkUgPSAvWy0uKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nO1xudmFyIGNhY2hlID0gdW5kZWZpbmVkO1xudmFyIHRhZ1JFID0gdW5kZWZpbmVkO1xudmFyIGh0bWxSRSA9IHVuZGVmaW5lZDtcbi8qKlxuICogRXNjYXBlIGEgc3RyaW5nIHNvIGl0IGNhbiBiZSB1c2VkIGluIGEgUmVnRXhwXG4gKiBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKi9cblxuZnVuY3Rpb24gZXNjYXBlUmVnZXgoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShyZWdleEVzY2FwZVJFLCAnXFxcXCQmJyk7XG59XG5cbmZ1bmN0aW9uIGNvbXBpbGVSZWdleCgpIHtcbiAgdmFyIG9wZW4gPSBlc2NhcGVSZWdleChjb25maWcuZGVsaW1pdGVyc1swXSk7XG4gIHZhciBjbG9zZSA9IGVzY2FwZVJlZ2V4KGNvbmZpZy5kZWxpbWl0ZXJzWzFdKTtcbiAgdmFyIHVuc2FmZU9wZW4gPSBlc2NhcGVSZWdleChjb25maWcudW5zYWZlRGVsaW1pdGVyc1swXSk7XG4gIHZhciB1bnNhZmVDbG9zZSA9IGVzY2FwZVJlZ2V4KGNvbmZpZy51bnNhZmVEZWxpbWl0ZXJzWzFdKTtcbiAgdGFnUkUgPSBuZXcgUmVnRXhwKHVuc2FmZU9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIHVuc2FmZUNsb3NlICsgJ3wnICsgb3BlbiArICcoKD86LnxcXFxcbikrPyknICsgY2xvc2UsICdnJyk7XG4gIGh0bWxSRSA9IG5ldyBSZWdFeHAoJ14nICsgdW5zYWZlT3BlbiArICcoKD86LnxcXFxcbikrPyknICsgdW5zYWZlQ2xvc2UgKyAnJCcpO1xuICAvLyByZXNldCBjYWNoZVxuICBjYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHRlbXBsYXRlIHRleHQgc3RyaW5nIGludG8gYW4gYXJyYXkgb2YgdG9rZW5zLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gKiBAcmV0dXJuIHtBcnJheTxPYmplY3Q+IHwgbnVsbH1cbiAqICAgICAgICAgICAgICAgLSB7U3RyaW5nfSB0eXBlXG4gKiAgICAgICAgICAgICAgIC0ge1N0cmluZ30gdmFsdWVcbiAqICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW2h0bWxdXG4gKiAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtvbmVUaW1lXVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlVGV4dCh0ZXh0KSB7XG4gIGlmICghY2FjaGUpIHtcbiAgICBjb21waWxlUmVnZXgoKTtcbiAgfVxuICB2YXIgaGl0ID0gY2FjaGUuZ2V0KHRleHQpO1xuICBpZiAoaGl0KSB7XG4gICAgcmV0dXJuIGhpdDtcbiAgfVxuICBpZiAoIXRhZ1JFLnRlc3QodGV4dCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICB2YXIgdG9rZW5zID0gW107XG4gIHZhciBsYXN0SW5kZXggPSB0YWdSRS5sYXN0SW5kZXggPSAwO1xuICB2YXIgbWF0Y2gsIGluZGV4LCBodG1sLCB2YWx1ZSwgZmlyc3QsIG9uZVRpbWU7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gIHdoaWxlIChtYXRjaCA9IHRhZ1JFLmV4ZWModGV4dCkpIHtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgaW5kZXggPSBtYXRjaC5pbmRleDtcbiAgICAvLyBwdXNoIHRleHQgdG9rZW5cbiAgICBpZiAoaW5kZXggPiBsYXN0SW5kZXgpIHtcbiAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgdmFsdWU6IHRleHQuc2xpY2UobGFzdEluZGV4LCBpbmRleClcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyB0YWcgdG9rZW5cbiAgICBodG1sID0gaHRtbFJFLnRlc3QobWF0Y2hbMF0pO1xuICAgIHZhbHVlID0gaHRtbCA/IG1hdGNoWzFdIDogbWF0Y2hbMl07XG4gICAgZmlyc3QgPSB2YWx1ZS5jaGFyQ29kZUF0KDApO1xuICAgIG9uZVRpbWUgPSBmaXJzdCA9PT0gNDI7IC8vICpcbiAgICB2YWx1ZSA9IG9uZVRpbWUgPyB2YWx1ZS5zbGljZSgxKSA6IHZhbHVlO1xuICAgIHRva2Vucy5wdXNoKHtcbiAgICAgIHRhZzogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2YWx1ZS50cmltKCksXG4gICAgICBodG1sOiBodG1sLFxuICAgICAgb25lVGltZTogb25lVGltZVxuICAgIH0pO1xuICAgIGxhc3RJbmRleCA9IGluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuICB9XG4gIGlmIChsYXN0SW5kZXggPCB0ZXh0Lmxlbmd0aCkge1xuICAgIHRva2Vucy5wdXNoKHtcbiAgICAgIHZhbHVlOiB0ZXh0LnNsaWNlKGxhc3RJbmRleClcbiAgICB9KTtcbiAgfVxuICBjYWNoZS5wdXQodGV4dCwgdG9rZW5zKTtcbiAgcmV0dXJuIHRva2Vucztcbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBsaXN0IG9mIHRva2VucyBpbnRvIGFuIGV4cHJlc3Npb24uXG4gKiBlLmcuIHRva2VucyBwYXJzZWQgZnJvbSAnYSB7e2J9fSBjJyBjYW4gYmUgc2VyaWFsaXplZFxuICogaW50byBvbmUgc2luZ2xlIGV4cHJlc3Npb24gYXMgJ1wiYSBcIiArIGIgKyBcIiBjXCInLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xuICogQHBhcmFtIHtWdWV9IFt2bV1cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiB0b2tlbnNUb0V4cCh0b2tlbnMsIHZtKSB7XG4gIGlmICh0b2tlbnMubGVuZ3RoID4gMSkge1xuICAgIHJldHVybiB0b2tlbnMubWFwKGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgcmV0dXJuIGZvcm1hdFRva2VuKHRva2VuLCB2bSk7XG4gICAgfSkuam9pbignKycpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmb3JtYXRUb2tlbih0b2tlbnNbMF0sIHZtLCB0cnVlKTtcbiAgfVxufVxuXG4vKipcbiAqIEZvcm1hdCBhIHNpbmdsZSB0b2tlbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdG9rZW5cbiAqIEBwYXJhbSB7VnVlfSBbdm1dXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtzaW5nbGVdXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0VG9rZW4odG9rZW4sIHZtLCBzaW5nbGUpIHtcbiAgcmV0dXJuIHRva2VuLnRhZyA/IHRva2VuLm9uZVRpbWUgJiYgdm0gPyAnXCInICsgdm0uJGV2YWwodG9rZW4udmFsdWUpICsgJ1wiJyA6IGlubGluZUZpbHRlcnModG9rZW4udmFsdWUsIHNpbmdsZSkgOiAnXCInICsgdG9rZW4udmFsdWUgKyAnXCInO1xufVxuXG4vKipcbiAqIEZvciBhbiBhdHRyaWJ1dGUgd2l0aCBtdWx0aXBsZSBpbnRlcnBvbGF0aW9uIHRhZ3MsXG4gKiBlLmcuIGF0dHI9XCJzb21lLXt7dGhpbmcgfCBmaWx0ZXJ9fVwiLCBpbiBvcmRlciB0byBjb21iaW5lXG4gKiB0aGUgd2hvbGUgdGhpbmcgaW50byBhIHNpbmdsZSB3YXRjaGFibGUgZXhwcmVzc2lvbiwgd2VcbiAqIGhhdmUgdG8gaW5saW5lIHRob3NlIGZpbHRlcnMuIFRoaXMgZnVuY3Rpb24gZG9lcyBleGFjdGx5XG4gKiB0aGF0LiBUaGlzIGlzIGEgYml0IGhhY2t5IGJ1dCBpdCBhdm9pZHMgaGVhdnkgY2hhbmdlc1xuICogdG8gZGlyZWN0aXZlIHBhcnNlciBhbmQgd2F0Y2hlciBtZWNoYW5pc20uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHBhcmFtIHtCb29sZWFufSBzaW5nbGVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG52YXIgZmlsdGVyUkUgPSAvW158XVxcfFtefF0vO1xuZnVuY3Rpb24gaW5saW5lRmlsdGVycyhleHAsIHNpbmdsZSkge1xuICBpZiAoIWZpbHRlclJFLnRlc3QoZXhwKSkge1xuICAgIHJldHVybiBzaW5nbGUgPyBleHAgOiAnKCcgKyBleHAgKyAnKSc7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGRpciA9IHBhcnNlRGlyZWN0aXZlKGV4cCk7XG4gICAgaWYgKCFkaXIuZmlsdGVycykge1xuICAgICAgcmV0dXJuICcoJyArIGV4cCArICcpJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICd0aGlzLl9hcHBseUZpbHRlcnMoJyArIGRpci5leHByZXNzaW9uICsgLy8gdmFsdWVcbiAgICAgICcsbnVsbCwnICsgLy8gb2xkVmFsdWUgKG51bGwgZm9yIHJlYWQpXG4gICAgICBKU09OLnN0cmluZ2lmeShkaXIuZmlsdGVycykgKyAvLyBmaWx0ZXIgZGVzY3JpcHRvcnNcbiAgICAgICcsZmFsc2UpJzsgLy8gd3JpdGU/XG4gICAgfVxuICB9XG59XG5cbnZhciB0ZXh0ID0gT2JqZWN0LmZyZWV6ZSh7XG4gIGNvbXBpbGVSZWdleDogY29tcGlsZVJlZ2V4LFxuICBwYXJzZVRleHQ6IHBhcnNlVGV4dCxcbiAgdG9rZW5zVG9FeHA6IHRva2Vuc1RvRXhwXG59KTtcblxudmFyIGRlbGltaXRlcnMgPSBbJ3t7JywgJ319J107XG52YXIgdW5zYWZlRGVsaW1pdGVycyA9IFsne3t7JywgJ319fSddO1xuXG52YXIgY29uZmlnID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHByaW50IGRlYnVnIG1lc3NhZ2VzLlxuICAgKiBBbHNvIGVuYWJsZXMgc3RhY2sgdHJhY2UgZm9yIHdhcm5pbmdzLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgZGVidWc6IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHN1cHByZXNzIHdhcm5pbmdzLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgc2lsZW50OiBmYWxzZSxcblxuICAvKipcbiAgICogV2hldGhlciB0byB1c2UgYXN5bmMgcmVuZGVyaW5nLlxuICAgKi9cblxuICBhc3luYzogdHJ1ZSxcblxuICAvKipcbiAgICogV2hldGhlciB0byB3YXJuIGFnYWluc3QgZXJyb3JzIGNhdWdodCB3aGVuIGV2YWx1YXRpbmdcbiAgICogZXhwcmVzc2lvbnMuXG4gICAqL1xuXG4gIHdhcm5FeHByZXNzaW9uRXJyb3JzOiB0cnVlLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGFsbG93IGRldnRvb2xzIGluc3BlY3Rpb24uXG4gICAqIERpc2FibGVkIGJ5IGRlZmF1bHQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG4gICAqL1xuXG4gIGRldnRvb2xzOiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nLFxuXG4gIC8qKlxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIGluZGljYXRlIHRoZSBkZWxpbWl0ZXJzIGhhdmUgYmVlblxuICAgKiBjaGFuZ2VkLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgX2RlbGltaXRlcnNDaGFuZ2VkOiB0cnVlLFxuXG4gIC8qKlxuICAgKiBMaXN0IG9mIGFzc2V0IHR5cGVzIHRoYXQgYSBjb21wb25lbnQgY2FuIG93bi5cbiAgICpcbiAgICogQHR5cGUge0FycmF5fVxuICAgKi9cblxuICBfYXNzZXRUeXBlczogWydjb21wb25lbnQnLCAnZGlyZWN0aXZlJywgJ2VsZW1lbnREaXJlY3RpdmUnLCAnZmlsdGVyJywgJ3RyYW5zaXRpb24nLCAncGFydGlhbCddLFxuXG4gIC8qKlxuICAgKiBwcm9wIGJpbmRpbmcgbW9kZXNcbiAgICovXG5cbiAgX3Byb3BCaW5kaW5nTW9kZXM6IHtcbiAgICBPTkVfV0FZOiAwLFxuICAgIFRXT19XQVk6IDEsXG4gICAgT05FX1RJTUU6IDJcbiAgfSxcblxuICAvKipcbiAgICogTWF4IGNpcmN1bGFyIHVwZGF0ZXMgYWxsb3dlZCBpbiBhIGJhdGNoZXIgZmx1c2ggY3ljbGUuXG4gICAqL1xuXG4gIF9tYXhVcGRhdGVDb3VudDogMTAwXG5cbn0sIHtcbiAgZGVsaW1pdGVyczogeyAvKipcbiAgICAgICAgICAgICAgICAgKiBJbnRlcnBvbGF0aW9uIGRlbGltaXRlcnMuIENoYW5naW5nIHRoZXNlIHdvdWxkIHRyaWdnZXJcbiAgICAgICAgICAgICAgICAgKiB0aGUgdGV4dCBwYXJzZXIgdG8gcmUtY29tcGlsZSB0aGUgcmVndWxhciBleHByZXNzaW9ucy5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEB0eXBlIHtBcnJheTxTdHJpbmc+fVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gZGVsaW1pdGVycztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuICAgICAgZGVsaW1pdGVycyA9IHZhbDtcbiAgICAgIGNvbXBpbGVSZWdleCgpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgdW5zYWZlRGVsaW1pdGVyczoge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHVuc2FmZURlbGltaXRlcnM7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcbiAgICAgIHVuc2FmZURlbGltaXRlcnMgPSB2YWw7XG4gICAgICBjb21waWxlUmVnZXgoKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH1cbn0pO1xuXG52YXIgd2FybiA9IHVuZGVmaW5lZDtcbnZhciBmb3JtYXRDb21wb25lbnROYW1lID0gdW5kZWZpbmVkO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBoYXNDb25zb2xlID0gdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnO1xuXG4gICAgd2FybiA9IGZ1bmN0aW9uIChtc2csIHZtKSB7XG4gICAgICBpZiAoaGFzQ29uc29sZSAmJiAhY29uZmlnLnNpbGVudCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbVnVlIHdhcm5dOiAnICsgbXNnICsgKHZtID8gZm9ybWF0Q29tcG9uZW50TmFtZSh2bSkgOiAnJykpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmb3JtYXRDb21wb25lbnROYW1lID0gZnVuY3Rpb24gKHZtKSB7XG4gICAgICB2YXIgbmFtZSA9IHZtLl9pc1Z1ZSA/IHZtLiRvcHRpb25zLm5hbWUgOiB2bS5uYW1lO1xuICAgICAgcmV0dXJuIG5hbWUgPyAnIChmb3VuZCBpbiBjb21wb25lbnQ6IDwnICsgaHlwaGVuYXRlKG5hbWUpICsgJz4pJyA6ICcnO1xuICAgIH07XG4gIH0pKCk7XG59XG5cbi8qKlxuICogQXBwZW5kIHdpdGggdHJhbnNpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxuZnVuY3Rpb24gYXBwZW5kV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gIGFwcGx5VHJhbnNpdGlvbihlbCwgMSwgZnVuY3Rpb24gKCkge1xuICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XG4gIH0sIHZtLCBjYik7XG59XG5cbi8qKlxuICogSW5zZXJ0QmVmb3JlIHdpdGggdHJhbnNpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxuZnVuY3Rpb24gYmVmb3JlV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gIGFwcGx5VHJhbnNpdGlvbihlbCwgMSwgZnVuY3Rpb24gKCkge1xuICAgIGJlZm9yZShlbCwgdGFyZ2V0KTtcbiAgfSwgdm0sIGNiKTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgd2l0aCB0cmFuc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbmZ1bmN0aW9uIHJlbW92ZVdpdGhUcmFuc2l0aW9uKGVsLCB2bSwgY2IpIHtcbiAgYXBwbHlUcmFuc2l0aW9uKGVsLCAtMSwgZnVuY3Rpb24gKCkge1xuICAgIHJlbW92ZShlbCk7XG4gIH0sIHZtLCBjYik7XG59XG5cbi8qKlxuICogQXBwbHkgdHJhbnNpdGlvbnMgd2l0aCBhbiBvcGVyYXRpb24gY2FsbGJhY2suXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtOdW1iZXJ9IGRpcmVjdGlvblxuICogICAgICAgICAgICAgICAgICAxOiBlbnRlclxuICogICAgICAgICAgICAgICAgIC0xOiBsZWF2ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSB0aGUgYWN0dWFsIERPTSBvcGVyYXRpb25cbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbmZ1bmN0aW9uIGFwcGx5VHJhbnNpdGlvbihlbCwgZGlyZWN0aW9uLCBvcCwgdm0sIGNiKSB7XG4gIHZhciB0cmFuc2l0aW9uID0gZWwuX192X3RyYW5zO1xuICBpZiAoIXRyYW5zaXRpb24gfHxcbiAgLy8gc2tpcCBpZiB0aGVyZSBhcmUgbm8ganMgaG9va3MgYW5kIENTUyB0cmFuc2l0aW9uIGlzXG4gIC8vIG5vdCBzdXBwb3J0ZWRcbiAgIXRyYW5zaXRpb24uaG9va3MgJiYgIXRyYW5zaXRpb25FbmRFdmVudCB8fFxuICAvLyBza2lwIHRyYW5zaXRpb25zIGZvciBpbml0aWFsIGNvbXBpbGVcbiAgIXZtLl9pc0NvbXBpbGVkIHx8XG4gIC8vIGlmIHRoZSB2bSBpcyBiZWluZyBtYW5pcHVsYXRlZCBieSBhIHBhcmVudCBkaXJlY3RpdmVcbiAgLy8gZHVyaW5nIHRoZSBwYXJlbnQncyBjb21waWxhdGlvbiBwaGFzZSwgc2tpcCB0aGVcbiAgLy8gYW5pbWF0aW9uLlxuICB2bS4kcGFyZW50ICYmICF2bS4kcGFyZW50Ll9pc0NvbXBpbGVkKSB7XG4gICAgb3AoKTtcbiAgICBpZiAoY2IpIGNiKCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBhY3Rpb24gPSBkaXJlY3Rpb24gPiAwID8gJ2VudGVyJyA6ICdsZWF2ZSc7XG4gIHRyYW5zaXRpb25bYWN0aW9uXShvcCwgY2IpO1xufVxuXG52YXIgdHJhbnNpdGlvbiA9IE9iamVjdC5mcmVlemUoe1xuICBhcHBlbmRXaXRoVHJhbnNpdGlvbjogYXBwZW5kV2l0aFRyYW5zaXRpb24sXG4gIGJlZm9yZVdpdGhUcmFuc2l0aW9uOiBiZWZvcmVXaXRoVHJhbnNpdGlvbixcbiAgcmVtb3ZlV2l0aFRyYW5zaXRpb246IHJlbW92ZVdpdGhUcmFuc2l0aW9uLFxuICBhcHBseVRyYW5zaXRpb246IGFwcGx5VHJhbnNpdGlvblxufSk7XG5cbi8qKlxuICogUXVlcnkgYW4gZWxlbWVudCBzZWxlY3RvciBpZiBpdCdzIG5vdCBhbiBlbGVtZW50IGFscmVhZHkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKi9cblxuZnVuY3Rpb24gcXVlcnkoZWwpIHtcbiAgaWYgKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHtcbiAgICB2YXIgc2VsZWN0b3IgPSBlbDtcbiAgICBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpO1xuICAgIGlmICghZWwpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQ2Fubm90IGZpbmQgZWxlbWVudDogJyArIHNlbGVjdG9yKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGVsO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgbm9kZSBpcyBpbiB0aGUgZG9jdW1lbnQuXG4gKiBOb3RlOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMgc2hvdWxkIHdvcmsgaGVyZVxuICogYnV0IGFsd2F5cyByZXR1cm5zIGZhbHNlIGZvciBjb21tZW50IG5vZGVzIGluIHBoYW50b21qcyxcbiAqIG1ha2luZyB1bml0IHRlc3RzIGRpZmZpY3VsdC4gVGhpcyBpcyBmaXhlZCBieSBkb2luZyB0aGVcbiAqIGNvbnRhaW5zKCkgY2hlY2sgb24gdGhlIG5vZGUncyBwYXJlbnROb2RlIGluc3RlYWQgb2ZcbiAqIHRoZSBub2RlIGl0c2VsZi5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaW5Eb2Mobm9kZSkge1xuICBpZiAoIW5vZGUpIHJldHVybiBmYWxzZTtcbiAgdmFyIGRvYyA9IG5vZGUub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gIHJldHVybiBkb2MgPT09IG5vZGUgfHwgZG9jID09PSBwYXJlbnQgfHwgISEocGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSA9PT0gMSAmJiBkb2MuY29udGFpbnMocGFyZW50KSk7XG59XG5cbi8qKlxuICogR2V0IGFuZCByZW1vdmUgYW4gYXR0cmlidXRlIGZyb20gYSBub2RlLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtTdHJpbmd9IF9hdHRyXG4gKi9cblxuZnVuY3Rpb24gZ2V0QXR0cihub2RlLCBfYXR0cikge1xuICB2YXIgdmFsID0gbm9kZS5nZXRBdHRyaWJ1dGUoX2F0dHIpO1xuICBpZiAodmFsICE9PSBudWxsKSB7XG4gICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoX2F0dHIpO1xuICB9XG4gIHJldHVybiB2YWw7XG59XG5cbi8qKlxuICogR2V0IGFuIGF0dHJpYnV0ZSB3aXRoIGNvbG9uIG9yIHYtYmluZDogcHJlZml4LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge1N0cmluZ3xudWxsfVxuICovXG5cbmZ1bmN0aW9uIGdldEJpbmRBdHRyKG5vZGUsIG5hbWUpIHtcbiAgdmFyIHZhbCA9IGdldEF0dHIobm9kZSwgJzonICsgbmFtZSk7XG4gIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICB2YWwgPSBnZXRBdHRyKG5vZGUsICd2LWJpbmQ6JyArIG5hbWUpO1xuICB9XG4gIHJldHVybiB2YWw7XG59XG5cbi8qKlxuICogQ2hlY2sgdGhlIHByZXNlbmNlIG9mIGEgYmluZCBhdHRyaWJ1dGUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBoYXNCaW5kQXR0cihub2RlLCBuYW1lKSB7XG4gIHJldHVybiBub2RlLmhhc0F0dHJpYnV0ZShuYW1lKSB8fCBub2RlLmhhc0F0dHJpYnV0ZSgnOicgKyBuYW1lKSB8fCBub2RlLmhhc0F0dHJpYnV0ZSgndi1iaW5kOicgKyBuYW1lKTtcbn1cblxuLyoqXG4gKiBJbnNlcnQgZWwgYmVmb3JlIHRhcmdldFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKi9cblxuZnVuY3Rpb24gYmVmb3JlKGVsLCB0YXJnZXQpIHtcbiAgdGFyZ2V0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsLCB0YXJnZXQpO1xufVxuXG4vKipcbiAqIEluc2VydCBlbCBhZnRlciB0YXJnZXRcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICovXG5cbmZ1bmN0aW9uIGFmdGVyKGVsLCB0YXJnZXQpIHtcbiAgaWYgKHRhcmdldC5uZXh0U2libGluZykge1xuICAgIGJlZm9yZShlbCwgdGFyZ2V0Lm5leHRTaWJsaW5nKTtcbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChlbCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgZWwgZnJvbSBET01cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKi9cblxuZnVuY3Rpb24gcmVtb3ZlKGVsKSB7XG4gIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xufVxuXG4vKipcbiAqIFByZXBlbmQgZWwgdG8gdGFyZ2V0XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqL1xuXG5mdW5jdGlvbiBwcmVwZW5kKGVsLCB0YXJnZXQpIHtcbiAgaWYgKHRhcmdldC5maXJzdENoaWxkKSB7XG4gICAgYmVmb3JlKGVsLCB0YXJnZXQuZmlyc3RDaGlsZCk7XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlcGxhY2UgdGFyZ2V0IHdpdGggZWxcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICovXG5cbmZ1bmN0aW9uIHJlcGxhY2UodGFyZ2V0LCBlbCkge1xuICB2YXIgcGFyZW50ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG4gIGlmIChwYXJlbnQpIHtcbiAgICBwYXJlbnQucmVwbGFjZUNoaWxkKGVsLCB0YXJnZXQpO1xuICB9XG59XG5cbi8qKlxuICogQWRkIGV2ZW50IGxpc3RlbmVyIHNob3J0aGFuZC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VDYXB0dXJlXVxuICovXG5cbmZ1bmN0aW9uIG9uKGVsLCBldmVudCwgY2IsIHVzZUNhcHR1cmUpIHtcbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2IsIHVzZUNhcHR1cmUpO1xufVxuXG4vKipcbiAqIFJlbW92ZSBldmVudCBsaXN0ZW5lciBzaG9ydGhhbmQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICovXG5cbmZ1bmN0aW9uIG9mZihlbCwgZXZlbnQsIGNiKSB7XG4gIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGNiKTtcbn1cblxuLyoqXG4gKiBGb3IgSUU5IGNvbXBhdDogd2hlbiBib3RoIGNsYXNzIGFuZCA6Y2xhc3MgYXJlIHByZXNlbnRcbiAqIGdldEF0dHJpYnV0ZSgnY2xhc3MnKSByZXR1cm5zIHdyb25nIHZhbHVlLi4uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGdldENsYXNzKGVsKSB7XG4gIHZhciBjbGFzc25hbWUgPSBlbC5jbGFzc05hbWU7XG4gIGlmICh0eXBlb2YgY2xhc3NuYW1lID09PSAnb2JqZWN0Jykge1xuICAgIGNsYXNzbmFtZSA9IGNsYXNzbmFtZS5iYXNlVmFsIHx8ICcnO1xuICB9XG4gIHJldHVybiBjbGFzc25hbWU7XG59XG5cbi8qKlxuICogSW4gSUU5LCBzZXRBdHRyaWJ1dGUoJ2NsYXNzJykgd2lsbCByZXN1bHQgaW4gZW1wdHkgY2xhc3NcbiAqIGlmIHRoZSBlbGVtZW50IGFsc28gaGFzIHRoZSA6Y2xhc3MgYXR0cmlidXRlOyBIb3dldmVyIGluXG4gKiBQaGFudG9tSlMsIHNldHRpbmcgYGNsYXNzTmFtZWAgZG9lcyBub3Qgd29yayBvbiBTVkcgZWxlbWVudHMuLi5cbiAqIFNvIHdlIGhhdmUgdG8gZG8gYSBjb25kaXRpb25hbCBjaGVjayBoZXJlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcbiAqL1xuXG5mdW5jdGlvbiBzZXRDbGFzcyhlbCwgY2xzKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaXNJRTkgJiYgIS9zdmckLy50ZXN0KGVsLm5hbWVzcGFjZVVSSSkpIHtcbiAgICBlbC5jbGFzc05hbWUgPSBjbHM7XG4gIH0gZWxzZSB7XG4gICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNscyk7XG4gIH1cbn1cblxuLyoqXG4gKiBBZGQgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBJRSAmIFNWR1xuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcbiAqL1xuXG5mdW5jdGlvbiBhZGRDbGFzcyhlbCwgY2xzKSB7XG4gIGlmIChlbC5jbGFzc0xpc3QpIHtcbiAgICBlbC5jbGFzc0xpc3QuYWRkKGNscyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGN1ciA9ICcgJyArIGdldENsYXNzKGVsKSArICcgJztcbiAgICBpZiAoY3VyLmluZGV4T2YoJyAnICsgY2xzICsgJyAnKSA8IDApIHtcbiAgICAgIHNldENsYXNzKGVsLCAoY3VyICsgY2xzKS50cmltKCkpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIElFICYgU1ZHXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuICovXG5cbmZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsLCBjbHMpIHtcbiAgaWYgKGVsLmNsYXNzTGlzdCkge1xuICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3VyID0gJyAnICsgZ2V0Q2xhc3MoZWwpICsgJyAnO1xuICAgIHZhciB0YXIgPSAnICcgKyBjbHMgKyAnICc7XG4gICAgd2hpbGUgKGN1ci5pbmRleE9mKHRhcikgPj0gMCkge1xuICAgICAgY3VyID0gY3VyLnJlcGxhY2UodGFyLCAnICcpO1xuICAgIH1cbiAgICBzZXRDbGFzcyhlbCwgY3VyLnRyaW0oKSk7XG4gIH1cbiAgaWYgKCFlbC5jbGFzc05hbWUpIHtcbiAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRyYWN0IHJhdyBjb250ZW50IGluc2lkZSBhbiBlbGVtZW50IGludG8gYSB0ZW1wb3JhcnlcbiAqIGNvbnRhaW5lciBkaXZcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGFzRnJhZ21lbnRcbiAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBleHRyYWN0Q29udGVudChlbCwgYXNGcmFnbWVudCkge1xuICB2YXIgY2hpbGQ7XG4gIHZhciByYXdDb250ZW50O1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGlzVGVtcGxhdGUoZWwpICYmIGlzRnJhZ21lbnQoZWwuY29udGVudCkpIHtcbiAgICBlbCA9IGVsLmNvbnRlbnQ7XG4gIH1cbiAgaWYgKGVsLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgIHRyaW1Ob2RlKGVsKTtcbiAgICByYXdDb250ZW50ID0gYXNGcmFnbWVudCA/IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgd2hpbGUgKGNoaWxkID0gZWwuZmlyc3RDaGlsZCkge1xuICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgICAgcmF3Q29udGVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgfVxuICB9XG4gIHJldHVybiByYXdDb250ZW50O1xufVxuXG4vKipcbiAqIFRyaW0gcG9zc2libGUgZW1wdHkgaGVhZC90YWlsIHRleHQgYW5kIGNvbW1lbnRcbiAqIG5vZGVzIGluc2lkZSBhIHBhcmVudC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqL1xuXG5mdW5jdGlvbiB0cmltTm9kZShub2RlKSB7XG4gIHZhciBjaGlsZDtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tc2VxdWVuY2VzICovXG4gIHdoaWxlICgoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcbiAgICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgfVxuICB3aGlsZSAoKGNoaWxkID0gbm9kZS5sYXN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcbiAgICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlIG5vLXNlcXVlbmNlcyAqL1xufVxuXG5mdW5jdGlvbiBpc1RyaW1tYWJsZShub2RlKSB7XG4gIHJldHVybiBub2RlICYmIChub2RlLm5vZGVUeXBlID09PSAzICYmICFub2RlLmRhdGEudHJpbSgpIHx8IG5vZGUubm9kZVR5cGUgPT09IDgpO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSB0ZW1wbGF0ZSB0YWcuXG4gKiBOb3RlIGlmIHRoZSB0ZW1wbGF0ZSBhcHBlYXJzIGluc2lkZSBhbiBTVkcgaXRzIHRhZ05hbWVcbiAqIHdpbGwgYmUgaW4gbG93ZXJjYXNlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqL1xuXG5mdW5jdGlvbiBpc1RlbXBsYXRlKGVsKSB7XG4gIHJldHVybiBlbC50YWdOYW1lICYmIGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RlbXBsYXRlJztcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gXCJhbmNob3JcIiBmb3IgcGVyZm9ybWluZyBkb20gaW5zZXJ0aW9uL3JlbW92YWxzLlxuICogVGhpcyBpcyB1c2VkIGluIGEgbnVtYmVyIG9mIHNjZW5hcmlvczpcbiAqIC0gZnJhZ21lbnQgaW5zdGFuY2VcbiAqIC0gdi1odG1sXG4gKiAtIHYtaWZcbiAqIC0gdi1mb3JcbiAqIC0gY29tcG9uZW50XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcGVyc2lzdCAtIElFIHRyYXNoZXMgZW1wdHkgdGV4dE5vZGVzIG9uXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZU5vZGUodHJ1ZSksIHNvIGluIGNlcnRhaW5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2VzIHRoZSBhbmNob3IgbmVlZHMgdG8gYmVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbi1lbXB0eSB0byBiZSBwZXJzaXN0ZWQgaW5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlcy5cbiAqIEByZXR1cm4ge0NvbW1lbnR8VGV4dH1cbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVBbmNob3IoY29udGVudCwgcGVyc2lzdCkge1xuICB2YXIgYW5jaG9yID0gY29uZmlnLmRlYnVnID8gZG9jdW1lbnQuY3JlYXRlQ29tbWVudChjb250ZW50KSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHBlcnNpc3QgPyAnICcgOiAnJyk7XG4gIGFuY2hvci5fX3ZfYW5jaG9yID0gdHJ1ZTtcbiAgcmV0dXJuIGFuY2hvcjtcbn1cblxuLyoqXG4gKiBGaW5kIGEgY29tcG9uZW50IHJlZiBhdHRyaWJ1dGUgdGhhdCBzdGFydHMgd2l0aCAkLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZVxuICogQHJldHVybiB7U3RyaW5nfHVuZGVmaW5lZH1cbiAqL1xuXG52YXIgcmVmUkUgPSAvXnYtcmVmOi87XG5cbmZ1bmN0aW9uIGZpbmRSZWYobm9kZSkge1xuICBpZiAobm9kZS5oYXNBdHRyaWJ1dGVzKCkpIHtcbiAgICB2YXIgYXR0cnMgPSBub2RlLmF0dHJpYnV0ZXM7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBuYW1lID0gYXR0cnNbaV0ubmFtZTtcbiAgICAgIGlmIChyZWZSRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIHJldHVybiBjYW1lbGl6ZShuYW1lLnJlcGxhY2UocmVmUkUsICcnKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogTWFwIGEgZnVuY3Rpb24gdG8gYSByYW5nZSBvZiBub2RlcyAuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge05vZGV9IGVuZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3BcbiAqL1xuXG5mdW5jdGlvbiBtYXBOb2RlUmFuZ2Uobm9kZSwgZW5kLCBvcCkge1xuICB2YXIgbmV4dDtcbiAgd2hpbGUgKG5vZGUgIT09IGVuZCkge1xuICAgIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgIG9wKG5vZGUpO1xuICAgIG5vZGUgPSBuZXh0O1xuICB9XG4gIG9wKGVuZCk7XG59XG5cbi8qKlxuICogUmVtb3ZlIGEgcmFuZ2Ugb2Ygbm9kZXMgd2l0aCB0cmFuc2l0aW9uLCBzdG9yZVxuICogdGhlIG5vZGVzIGluIGEgZnJhZ21lbnQgd2l0aCBjb3JyZWN0IG9yZGVyaW5nLFxuICogYW5kIGNhbGwgY2FsbGJhY2sgd2hlbiBkb25lLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gc3RhcnRcbiAqIEBwYXJhbSB7Tm9kZX0gZW5kXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVOb2RlUmFuZ2Uoc3RhcnQsIGVuZCwgdm0sIGZyYWcsIGNiKSB7XG4gIHZhciBkb25lID0gZmFsc2U7XG4gIHZhciByZW1vdmVkID0gMDtcbiAgdmFyIG5vZGVzID0gW107XG4gIG1hcE5vZGVSYW5nZShzdGFydCwgZW5kLCBmdW5jdGlvbiAobm9kZSkge1xuICAgIGlmIChub2RlID09PSBlbmQpIGRvbmUgPSB0cnVlO1xuICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgcmVtb3ZlV2l0aFRyYW5zaXRpb24obm9kZSwgdm0sIG9uUmVtb3ZlZCk7XG4gIH0pO1xuICBmdW5jdGlvbiBvblJlbW92ZWQoKSB7XG4gICAgcmVtb3ZlZCsrO1xuICAgIGlmIChkb25lICYmIHJlbW92ZWQgPj0gbm9kZXMubGVuZ3RoKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZXNbaV0pO1xuICAgICAgfVxuICAgICAgY2IgJiYgY2IoKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIG5vZGUgaXMgYSBEb2N1bWVudEZyYWdtZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc0ZyYWdtZW50KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMTE7XG59XG5cbi8qKlxuICogR2V0IG91dGVySFRNTCBvZiBlbGVtZW50cywgdGFraW5nIGNhcmVcbiAqIG9mIFNWRyBlbGVtZW50cyBpbiBJRSBhcyB3ZWxsLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBnZXRPdXRlckhUTUwoZWwpIHtcbiAgaWYgKGVsLm91dGVySFRNTCkge1xuICAgIHJldHVybiBlbC5vdXRlckhUTUw7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChlbC5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgIHJldHVybiBjb250YWluZXIuaW5uZXJIVE1MO1xuICB9XG59XG5cbnZhciBjb21tb25UYWdSRSA9IC9eKGRpdnxwfHNwYW58aW1nfGF8YnxpfGJyfHVsfG9sfGxpfGgxfGgyfGgzfGg0fGg1fGg2fGNvZGV8cHJlfHRhYmxlfHRofHRkfHRyfGZvcm18bGFiZWx8aW5wdXR8c2VsZWN0fG9wdGlvbnxuYXZ8YXJ0aWNsZXxzZWN0aW9ufGhlYWRlcnxmb290ZXIpJC9pO1xudmFyIHJlc2VydmVkVGFnUkUgPSAvXihzbG90fHBhcnRpYWx8Y29tcG9uZW50KSQvaTtcblxudmFyIGlzVW5rbm93bkVsZW1lbnQgPSB1bmRlZmluZWQ7XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBpc1Vua25vd25FbGVtZW50ID0gZnVuY3Rpb24gKGVsLCB0YWcpIHtcbiAgICBpZiAodGFnLmluZGV4T2YoJy0nKSA+IC0xKSB7XG4gICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yODIxMDM2NC8xMDcwMjQ0XG4gICAgICByZXR1cm4gZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQgfHwgZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MRWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICgvSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KGVsLnRvU3RyaW5nKCkpICYmXG4gICAgICAgIC8vIENocm9tZSByZXR1cm5zIHVua25vd24gZm9yIHNldmVyYWwgSFRNTDUgZWxlbWVudHMuXG4gICAgICAgIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD01NDA1MjZcbiAgICAgICAgLy8gRmlyZWZveCByZXR1cm5zIHVua25vd24gZm9yIHNvbWUgXCJJbnRlcmFjdGl2ZSBlbGVtZW50cy5cIlxuICAgICAgICAhL14oZGF0YXx0aW1lfHJ0Y3xyYnxkZXRhaWxzfGRpYWxvZ3xzdW1tYXJ5KSQvLnRlc3QodGFnKVxuICAgICAgKTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIGNvbXBvbmVudCwgaWYgeWVzIHJldHVybiBpdHNcbiAqIGNvbXBvbmVudCBpZC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBjaGVja0NvbXBvbmVudEF0dHIoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgdmFyIGhhc0F0dHJzID0gZWwuaGFzQXR0cmlidXRlcygpO1xuICBpZiAoIWNvbW1vblRhZ1JFLnRlc3QodGFnKSAmJiAhcmVzZXJ2ZWRUYWdSRS50ZXN0KHRhZykpIHtcbiAgICBpZiAocmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgdGFnKSkge1xuICAgICAgcmV0dXJuIHsgaWQ6IHRhZyB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgaXMgPSBoYXNBdHRycyAmJiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpO1xuICAgICAgaWYgKGlzKSB7XG4gICAgICAgIHJldHVybiBpcztcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YXIgZXhwZWN0ZWRUYWcgPSBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwICYmIG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXBbdGFnXTtcbiAgICAgICAgaWYgKGV4cGVjdGVkVGFnKSB7XG4gICAgICAgICAgd2FybignVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtICcgKyAnZGlkIHlvdSBtZWFuIDwnICsgZXhwZWN0ZWRUYWcgKyAnPj8gJyArICdIVE1MIGlzIGNhc2UtaW5zZW5zaXRpdmUsIHJlbWVtYmVyIHRvIHVzZSBrZWJhYi1jYXNlIGluIHRlbXBsYXRlcy4nKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1Vua25vd25FbGVtZW50KGVsLCB0YWcpKSB7XG4gICAgICAgICAgd2FybignVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtIGRpZCB5b3UgJyArICdyZWdpc3RlciB0aGUgY29tcG9uZW50IGNvcnJlY3RseT8gRm9yIHJlY3Vyc2l2ZSBjb21wb25lbnRzLCAnICsgJ21ha2Ugc3VyZSB0byBwcm92aWRlIHRoZSBcIm5hbWVcIiBvcHRpb24uJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaGFzQXR0cnMpIHtcbiAgICByZXR1cm4gZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBcImlzXCIgYmluZGluZyBmcm9tIGFuIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKSB7XG4gIC8vIGR5bmFtaWMgc3ludGF4XG4gIHZhciBleHAgPSBlbC5nZXRBdHRyaWJ1dGUoJ2lzJyk7XG4gIGlmIChleHAgIT0gbnVsbCkge1xuICAgIGlmIChyZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCBleHApKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2lzJyk7XG4gICAgICByZXR1cm4geyBpZDogZXhwIH07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGV4cCA9IGdldEJpbmRBdHRyKGVsLCAnaXMnKTtcbiAgICBpZiAoZXhwICE9IG51bGwpIHtcbiAgICAgIHJldHVybiB7IGlkOiBleHAsIGR5bmFtaWM6IHRydWUgfTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBPcHRpb24gb3ZlcndyaXRpbmcgc3RyYXRlZ2llcyBhcmUgZnVuY3Rpb25zIHRoYXQgaGFuZGxlXG4gKiBob3cgdG8gbWVyZ2UgYSBwYXJlbnQgb3B0aW9uIHZhbHVlIGFuZCBhIGNoaWxkIG9wdGlvblxuICogdmFsdWUgaW50byB0aGUgZmluYWwgdmFsdWUuXG4gKlxuICogQWxsIHN0cmF0ZWd5IGZ1bmN0aW9ucyBmb2xsb3cgdGhlIHNhbWUgc2lnbmF0dXJlOlxuICpcbiAqIEBwYXJhbSB7Kn0gcGFyZW50VmFsXG4gKiBAcGFyYW0geyp9IGNoaWxkVmFsXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuICovXG5cbnZhciBzdHJhdHMgPSBjb25maWcub3B0aW9uTWVyZ2VTdHJhdGVnaWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuLyoqXG4gKiBIZWxwZXIgdGhhdCByZWN1cnNpdmVseSBtZXJnZXMgdHdvIGRhdGEgb2JqZWN0cyB0b2dldGhlci5cbiAqL1xuXG5mdW5jdGlvbiBtZXJnZURhdGEodG8sIGZyb20pIHtcbiAgdmFyIGtleSwgdG9WYWwsIGZyb21WYWw7XG4gIGZvciAoa2V5IGluIGZyb20pIHtcbiAgICB0b1ZhbCA9IHRvW2tleV07XG4gICAgZnJvbVZhbCA9IGZyb21ba2V5XTtcbiAgICBpZiAoIWhhc093bih0bywga2V5KSkge1xuICAgICAgc2V0KHRvLCBrZXksIGZyb21WYWwpO1xuICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodG9WYWwpICYmIGlzT2JqZWN0KGZyb21WYWwpKSB7XG4gICAgICBtZXJnZURhdGEodG9WYWwsIGZyb21WYWwpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdG87XG59XG5cbi8qKlxuICogRGF0YVxuICovXG5cbnN0cmF0cy5kYXRhID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKSB7XG4gIGlmICghdm0pIHtcbiAgICAvLyBpbiBhIFZ1ZS5leHRlbmQgbWVyZ2UsIGJvdGggc2hvdWxkIGJlIGZ1bmN0aW9uc1xuICAgIGlmICghY2hpbGRWYWwpIHtcbiAgICAgIHJldHVybiBwYXJlbnRWYWw7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVGhlIFwiZGF0YVwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICsgJ3RoYXQgcmV0dXJucyBhIHBlci1pbnN0YW5jZSB2YWx1ZSBpbiBjb21wb25lbnQgJyArICdkZWZpbml0aW9ucy4nLCB2bSk7XG4gICAgICByZXR1cm4gcGFyZW50VmFsO1xuICAgIH1cbiAgICBpZiAoIXBhcmVudFZhbCkge1xuICAgICAgcmV0dXJuIGNoaWxkVmFsO1xuICAgIH1cbiAgICAvLyB3aGVuIHBhcmVudFZhbCAmIGNoaWxkVmFsIGFyZSBib3RoIHByZXNlbnQsXG4gICAgLy8gd2UgbmVlZCB0byByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlXG4gICAgLy8gbWVyZ2VkIHJlc3VsdCBvZiBib3RoIGZ1bmN0aW9ucy4uLiBubyBuZWVkIHRvXG4gICAgLy8gY2hlY2sgaWYgcGFyZW50VmFsIGlzIGEgZnVuY3Rpb24gaGVyZSBiZWNhdXNlXG4gICAgLy8gaXQgaGFzIHRvIGJlIGEgZnVuY3Rpb24gdG8gcGFzcyBwcmV2aW91cyBtZXJnZXMuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZERhdGFGbigpIHtcbiAgICAgIHJldHVybiBtZXJnZURhdGEoY2hpbGRWYWwuY2FsbCh0aGlzKSwgcGFyZW50VmFsLmNhbGwodGhpcykpO1xuICAgIH07XG4gIH0gZWxzZSBpZiAocGFyZW50VmFsIHx8IGNoaWxkVmFsKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZEluc3RhbmNlRGF0YUZuKCkge1xuICAgICAgLy8gaW5zdGFuY2UgbWVyZ2VcbiAgICAgIHZhciBpbnN0YW5jZURhdGEgPSB0eXBlb2YgY2hpbGRWYWwgPT09ICdmdW5jdGlvbicgPyBjaGlsZFZhbC5jYWxsKHZtKSA6IGNoaWxkVmFsO1xuICAgICAgdmFyIGRlZmF1bHREYXRhID0gdHlwZW9mIHBhcmVudFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IHBhcmVudFZhbC5jYWxsKHZtKSA6IHVuZGVmaW5lZDtcbiAgICAgIGlmIChpbnN0YW5jZURhdGEpIHtcbiAgICAgICAgcmV0dXJuIG1lcmdlRGF0YShpbnN0YW5jZURhdGEsIGRlZmF1bHREYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0RGF0YTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59O1xuXG4vKipcbiAqIEVsXG4gKi9cblxuc3RyYXRzLmVsID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKSB7XG4gIGlmICghdm0gJiYgY2hpbGRWYWwgJiYgdHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdUaGUgXCJlbFwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICsgJ3RoYXQgcmV0dXJucyBhIHBlci1pbnN0YW5jZSB2YWx1ZSBpbiBjb21wb25lbnQgJyArICdkZWZpbml0aW9ucy4nLCB2bSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciByZXQgPSBjaGlsZFZhbCB8fCBwYXJlbnRWYWw7XG4gIC8vIGludm9rZSB0aGUgZWxlbWVudCBmYWN0b3J5IGlmIHRoaXMgaXMgaW5zdGFuY2UgbWVyZ2VcbiAgcmV0dXJuIHZtICYmIHR5cGVvZiByZXQgPT09ICdmdW5jdGlvbicgPyByZXQuY2FsbCh2bSkgOiByZXQ7XG59O1xuXG4vKipcbiAqIEhvb2tzIGFuZCBwYXJhbSBhdHRyaWJ1dGVzIGFyZSBtZXJnZWQgYXMgYXJyYXlzLlxuICovXG5cbnN0cmF0cy5pbml0ID0gc3RyYXRzLmNyZWF0ZWQgPSBzdHJhdHMucmVhZHkgPSBzdHJhdHMuYXR0YWNoZWQgPSBzdHJhdHMuZGV0YWNoZWQgPSBzdHJhdHMuYmVmb3JlQ29tcGlsZSA9IHN0cmF0cy5jb21waWxlZCA9IHN0cmF0cy5iZWZvcmVEZXN0cm95ID0gc3RyYXRzLmRlc3Ryb3llZCA9IHN0cmF0cy5hY3RpdmF0ZSA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIHJldHVybiBjaGlsZFZhbCA/IHBhcmVudFZhbCA/IHBhcmVudFZhbC5jb25jYXQoY2hpbGRWYWwpIDogaXNBcnJheShjaGlsZFZhbCkgPyBjaGlsZFZhbCA6IFtjaGlsZFZhbF0gOiBwYXJlbnRWYWw7XG59O1xuXG4vKipcbiAqIEFzc2V0c1xuICpcbiAqIFdoZW4gYSB2bSBpcyBwcmVzZW50IChpbnN0YW5jZSBjcmVhdGlvbiksIHdlIG5lZWQgdG8gZG9cbiAqIGEgdGhyZWUtd2F5IG1lcmdlIGJldHdlZW4gY29uc3RydWN0b3Igb3B0aW9ucywgaW5zdGFuY2VcbiAqIG9wdGlvbnMgYW5kIHBhcmVudCBvcHRpb25zLlxuICovXG5cbmZ1bmN0aW9uIG1lcmdlQXNzZXRzKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUocGFyZW50VmFsIHx8IG51bGwpO1xuICByZXR1cm4gY2hpbGRWYWwgPyBleHRlbmQocmVzLCBndWFyZEFycmF5QXNzZXRzKGNoaWxkVmFsKSkgOiByZXM7XG59XG5cbmNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gIHN0cmF0c1t0eXBlICsgJ3MnXSA9IG1lcmdlQXNzZXRzO1xufSk7XG5cbi8qKlxuICogRXZlbnRzICYgV2F0Y2hlcnMuXG4gKlxuICogRXZlbnRzICYgd2F0Y2hlcnMgaGFzaGVzIHNob3VsZCBub3Qgb3ZlcndyaXRlIG9uZVxuICogYW5vdGhlciwgc28gd2UgbWVyZ2UgdGhlbSBhcyBhcnJheXMuXG4gKi9cblxuc3RyYXRzLndhdGNoID0gc3RyYXRzLmV2ZW50cyA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG4gIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG4gIHZhciByZXQgPSB7fTtcbiAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcbiAgZm9yICh2YXIga2V5IGluIGNoaWxkVmFsKSB7XG4gICAgdmFyIHBhcmVudCA9IHJldFtrZXldO1xuICAgIHZhciBjaGlsZCA9IGNoaWxkVmFsW2tleV07XG4gICAgaWYgKHBhcmVudCAmJiAhaXNBcnJheShwYXJlbnQpKSB7XG4gICAgICBwYXJlbnQgPSBbcGFyZW50XTtcbiAgICB9XG4gICAgcmV0W2tleV0gPSBwYXJlbnQgPyBwYXJlbnQuY29uY2F0KGNoaWxkKSA6IFtjaGlsZF07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn07XG5cbi8qKlxuICogT3RoZXIgb2JqZWN0IGhhc2hlcy5cbiAqL1xuXG5zdHJhdHMucHJvcHMgPSBzdHJhdHMubWV0aG9kcyA9IHN0cmF0cy5jb21wdXRlZCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG4gIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG4gIHZhciByZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuICBleHRlbmQocmV0LCBjaGlsZFZhbCk7XG4gIHJldHVybiByZXQ7XG59O1xuXG4vKipcbiAqIERlZmF1bHQgc3RyYXRlZ3kuXG4gKi9cblxudmFyIGRlZmF1bHRTdHJhdCA9IGZ1bmN0aW9uIGRlZmF1bHRTdHJhdChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIHJldHVybiBjaGlsZFZhbCA9PT0gdW5kZWZpbmVkID8gcGFyZW50VmFsIDogY2hpbGRWYWw7XG59O1xuXG4vKipcbiAqIE1ha2Ugc3VyZSBjb21wb25lbnQgb3B0aW9ucyBnZXQgY29udmVydGVkIHRvIGFjdHVhbFxuICogY29uc3RydWN0b3JzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cblxuZnVuY3Rpb24gZ3VhcmRDb21wb25lbnRzKG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMuY29tcG9uZW50cykge1xuICAgIHZhciBjb21wb25lbnRzID0gb3B0aW9ucy5jb21wb25lbnRzID0gZ3VhcmRBcnJheUFzc2V0cyhvcHRpb25zLmNvbXBvbmVudHMpO1xuICAgIHZhciBpZHMgPSBPYmplY3Qua2V5cyhjb21wb25lbnRzKTtcbiAgICB2YXIgZGVmO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgbWFwID0gb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcCA9IHt9O1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGlkcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBpZHNbaV07XG4gICAgICBpZiAoY29tbW9uVGFnUkUudGVzdChrZXkpIHx8IHJlc2VydmVkVGFnUkUudGVzdChrZXkpKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCAnICsgJ2lkOiAnICsga2V5KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICAvLyByZWNvcmQgYSBhbGwgbG93ZXJjYXNlIDwtPiBrZWJhYi1jYXNlIG1hcHBpbmcgZm9yXG4gICAgICAvLyBwb3NzaWJsZSBjdXN0b20gZWxlbWVudCBjYXNlIGVycm9yIHdhcm5pbmdcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIG1hcFtrZXkucmVwbGFjZSgvLS9nLCAnJykudG9Mb3dlckNhc2UoKV0gPSBoeXBoZW5hdGUoa2V5KTtcbiAgICAgIH1cbiAgICAgIGRlZiA9IGNvbXBvbmVudHNba2V5XTtcbiAgICAgIGlmIChpc1BsYWluT2JqZWN0KGRlZikpIHtcbiAgICAgICAgY29tcG9uZW50c1trZXldID0gVnVlLmV4dGVuZChkZWYpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEVuc3VyZSBhbGwgcHJvcHMgb3B0aW9uIHN5bnRheCBhcmUgbm9ybWFsaXplZCBpbnRvIHRoZVxuICogT2JqZWN0LWJhc2VkIGZvcm1hdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5cbmZ1bmN0aW9uIGd1YXJkUHJvcHMob3B0aW9ucykge1xuICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuICB2YXIgaSwgdmFsO1xuICBpZiAoaXNBcnJheShwcm9wcykpIHtcbiAgICBvcHRpb25zLnByb3BzID0ge307XG4gICAgaSA9IHByb3BzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YWwgPSBwcm9wc1tpXTtcbiAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgICAgICBvcHRpb25zLnByb3BzW3ZhbF0gPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICh2YWwubmFtZSkge1xuICAgICAgICBvcHRpb25zLnByb3BzW3ZhbC5uYW1lXSA9IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChwcm9wcykpIHtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BzKTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFsID0gcHJvcHNba2V5c1tpXV07XG4gICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBwcm9wc1trZXlzW2ldXSA9IHsgdHlwZTogdmFsIH07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogR3VhcmQgYW4gQXJyYXktZm9ybWF0IGFzc2V0cyBvcHRpb24gYW5kIGNvbnZlcnRlZCBpdFxuICogaW50byB0aGUga2V5LXZhbHVlIE9iamVjdCBmb3JtYXQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGFzc2V0c1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIGd1YXJkQXJyYXlBc3NldHMoYXNzZXRzKSB7XG4gIGlmIChpc0FycmF5KGFzc2V0cykpIHtcbiAgICB2YXIgcmVzID0ge307XG4gICAgdmFyIGkgPSBhc3NldHMubGVuZ3RoO1xuICAgIHZhciBhc3NldDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBhc3NldCA9IGFzc2V0c1tpXTtcbiAgICAgIHZhciBpZCA9IHR5cGVvZiBhc3NldCA9PT0gJ2Z1bmN0aW9uJyA/IGFzc2V0Lm9wdGlvbnMgJiYgYXNzZXQub3B0aW9ucy5uYW1lIHx8IGFzc2V0LmlkIDogYXNzZXQubmFtZSB8fCBhc3NldC5pZDtcbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdBcnJheS1zeW50YXggYXNzZXRzIG11c3QgcHJvdmlkZSBhIFwibmFtZVwiIG9yIFwiaWRcIiBmaWVsZC4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc1tpZF0gPSBhc3NldDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuICByZXR1cm4gYXNzZXRzO1xufVxuXG4vKipcbiAqIE1lcmdlIHR3byBvcHRpb24gb2JqZWN0cyBpbnRvIGEgbmV3IG9uZS5cbiAqIENvcmUgdXRpbGl0eSB1c2VkIGluIGJvdGggaW5zdGFudGlhdGlvbiBhbmQgaW5oZXJpdGFuY2UuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhcmVudFxuICogQHBhcmFtIHtPYmplY3R9IGNoaWxkXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXSAtIGlmIHZtIGlzIHByZXNlbnQsIGluZGljYXRlcyB0aGlzIGlzXG4gKiAgICAgICAgICAgICAgICAgICAgIGFuIGluc3RhbnRpYXRpb24gbWVyZ2UuXG4gKi9cblxuZnVuY3Rpb24gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGQsIHZtKSB7XG4gIGd1YXJkQ29tcG9uZW50cyhjaGlsZCk7XG4gIGd1YXJkUHJvcHMoY2hpbGQpO1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChjaGlsZC5wcm9wc0RhdGEgJiYgIXZtKSB7XG4gICAgICB3YXJuKCdwcm9wc0RhdGEgY2FuIG9ubHkgYmUgdXNlZCBhcyBhbiBpbnN0YW50aWF0aW9uIG9wdGlvbi4nKTtcbiAgICB9XG4gIH1cbiAgdmFyIG9wdGlvbnMgPSB7fTtcbiAgdmFyIGtleTtcbiAgaWYgKGNoaWxkWydleHRlbmRzJ10pIHtcbiAgICBwYXJlbnQgPSB0eXBlb2YgY2hpbGRbJ2V4dGVuZHMnXSA9PT0gJ2Z1bmN0aW9uJyA/IG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkWydleHRlbmRzJ10ub3B0aW9ucywgdm0pIDogbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGRbJ2V4dGVuZHMnXSwgdm0pO1xuICB9XG4gIGlmIChjaGlsZC5taXhpbnMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkLm1peGlucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBtaXhpbiA9IGNoaWxkLm1peGluc1tpXTtcbiAgICAgIHZhciBtaXhpbk9wdGlvbnMgPSBtaXhpbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBWdWUgPyBtaXhpbi5vcHRpb25zIDogbWl4aW47XG4gICAgICBwYXJlbnQgPSBtZXJnZU9wdGlvbnMocGFyZW50LCBtaXhpbk9wdGlvbnMsIHZtKTtcbiAgICB9XG4gIH1cbiAgZm9yIChrZXkgaW4gcGFyZW50KSB7XG4gICAgbWVyZ2VGaWVsZChrZXkpO1xuICB9XG4gIGZvciAoa2V5IGluIGNoaWxkKSB7XG4gICAgaWYgKCFoYXNPd24ocGFyZW50LCBrZXkpKSB7XG4gICAgICBtZXJnZUZpZWxkKGtleSk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIG1lcmdlRmllbGQoa2V5KSB7XG4gICAgdmFyIHN0cmF0ID0gc3RyYXRzW2tleV0gfHwgZGVmYXVsdFN0cmF0O1xuICAgIG9wdGlvbnNba2V5XSA9IHN0cmF0KHBhcmVudFtrZXldLCBjaGlsZFtrZXldLCB2bSwga2V5KTtcbiAgfVxuICByZXR1cm4gb3B0aW9ucztcbn1cblxuLyoqXG4gKiBSZXNvbHZlIGFuIGFzc2V0LlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJlY2F1c2UgY2hpbGQgaW5zdGFuY2VzIG5lZWQgYWNjZXNzXG4gKiB0byBhc3NldHMgZGVmaW5lZCBpbiBpdHMgYW5jZXN0b3IgY2hhaW4uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2Fybk1pc3NpbmdcbiAqIEByZXR1cm4ge09iamVjdHxGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiByZXNvbHZlQXNzZXQob3B0aW9ucywgdHlwZSwgaWQsIHdhcm5NaXNzaW5nKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgYXNzZXRzID0gb3B0aW9uc1t0eXBlXTtcbiAgdmFyIGNhbWVsaXplZElkO1xuICB2YXIgcmVzID0gYXNzZXRzW2lkXSB8fFxuICAvLyBjYW1lbENhc2UgSURcbiAgYXNzZXRzW2NhbWVsaXplZElkID0gY2FtZWxpemUoaWQpXSB8fFxuICAvLyBQYXNjYWwgQ2FzZSBJRFxuICBhc3NldHNbY2FtZWxpemVkSWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbGl6ZWRJZC5zbGljZSgxKV07XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm5NaXNzaW5nICYmICFyZXMpIHtcbiAgICB3YXJuKCdGYWlsZWQgdG8gcmVzb2x2ZSAnICsgdHlwZS5zbGljZSgwLCAtMSkgKyAnOiAnICsgaWQsIG9wdGlvbnMpO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5cbnZhciB1aWQkMSA9IDA7XG5cbi8qKlxuICogQSBkZXAgaXMgYW4gb2JzZXJ2YWJsZSB0aGF0IGNhbiBoYXZlIG11bHRpcGxlXG4gKiBkaXJlY3RpdmVzIHN1YnNjcmliaW5nIHRvIGl0LlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBEZXAoKSB7XG4gIHRoaXMuaWQgPSB1aWQkMSsrO1xuICB0aGlzLnN1YnMgPSBbXTtcbn1cblxuLy8gdGhlIGN1cnJlbnQgdGFyZ2V0IHdhdGNoZXIgYmVpbmcgZXZhbHVhdGVkLlxuLy8gdGhpcyBpcyBnbG9iYWxseSB1bmlxdWUgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvbmx5IG9uZVxuLy8gd2F0Y2hlciBiZWluZyBldmFsdWF0ZWQgYXQgYW55IHRpbWUuXG5EZXAudGFyZ2V0ID0gbnVsbDtcblxuLyoqXG4gKiBBZGQgYSBkaXJlY3RpdmUgc3Vic2NyaWJlci5cbiAqXG4gKiBAcGFyYW0ge0RpcmVjdGl2ZX0gc3ViXG4gKi9cblxuRGVwLnByb3RvdHlwZS5hZGRTdWIgPSBmdW5jdGlvbiAoc3ViKSB7XG4gIHRoaXMuc3Vicy5wdXNoKHN1Yik7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhIGRpcmVjdGl2ZSBzdWJzY3JpYmVyLlxuICpcbiAqIEBwYXJhbSB7RGlyZWN0aXZlfSBzdWJcbiAqL1xuXG5EZXAucHJvdG90eXBlLnJlbW92ZVN1YiA9IGZ1bmN0aW9uIChzdWIpIHtcbiAgdGhpcy5zdWJzLiRyZW1vdmUoc3ViKTtcbn07XG5cbi8qKlxuICogQWRkIHNlbGYgYXMgYSBkZXBlbmRlbmN5IHRvIHRoZSB0YXJnZXQgd2F0Y2hlci5cbiAqL1xuXG5EZXAucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgRGVwLnRhcmdldC5hZGREZXAodGhpcyk7XG59O1xuXG4vKipcbiAqIE5vdGlmeSBhbGwgc3Vic2NyaWJlcnMgb2YgYSBuZXcgdmFsdWUuXG4gKi9cblxuRGVwLnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIHN0YWJsaXplIHRoZSBzdWJzY3JpYmVyIGxpc3QgZmlyc3RcbiAgdmFyIHN1YnMgPSB0b0FycmF5KHRoaXMuc3Vicyk7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gc3Vicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBzdWJzW2ldLnVwZGF0ZSgpO1xuICB9XG59O1xuXG52YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTtcbnZhciBhcnJheU1ldGhvZHMgPSBPYmplY3QuY3JlYXRlKGFycmF5UHJvdG8pXG5cbi8qKlxuICogSW50ZXJjZXB0IG11dGF0aW5nIG1ldGhvZHMgYW5kIGVtaXQgZXZlbnRzXG4gKi9cblxuO1sncHVzaCcsICdwb3AnLCAnc2hpZnQnLCAndW5zaGlmdCcsICdzcGxpY2UnLCAnc29ydCcsICdyZXZlcnNlJ10uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG4gIC8vIGNhY2hlIG9yaWdpbmFsIG1ldGhvZFxuICB2YXIgb3JpZ2luYWwgPSBhcnJheVByb3RvW21ldGhvZF07XG4gIGRlZihhcnJheU1ldGhvZHMsIG1ldGhvZCwgZnVuY3Rpb24gbXV0YXRvcigpIHtcbiAgICAvLyBhdm9pZCBsZWFraW5nIGFyZ3VtZW50czpcbiAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9jbG9zdXJlLXdpdGgtYXJndW1lbnRzXG4gICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGkpO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB2YXIgb2IgPSB0aGlzLl9fb2JfXztcbiAgICB2YXIgaW5zZXJ0ZWQ7XG4gICAgc3dpdGNoIChtZXRob2QpIHtcbiAgICAgIGNhc2UgJ3B1c2gnOlxuICAgICAgICBpbnNlcnRlZCA9IGFyZ3M7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndW5zaGlmdCc6XG4gICAgICAgIGluc2VydGVkID0gYXJncztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzcGxpY2UnOlxuICAgICAgICBpbnNlcnRlZCA9IGFyZ3Muc2xpY2UoMik7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAoaW5zZXJ0ZWQpIG9iLm9ic2VydmVBcnJheShpbnNlcnRlZCk7XG4gICAgLy8gbm90aWZ5IGNoYW5nZVxuICAgIG9iLmRlcC5ub3RpZnkoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9KTtcbn0pO1xuXG4vKipcbiAqIFN3YXAgdGhlIGVsZW1lbnQgYXQgdGhlIGdpdmVuIGluZGV4IHdpdGggYSBuZXcgdmFsdWVcbiAqIGFuZCBlbWl0cyBjb3JyZXNwb25kaW5nIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICogQHBhcmFtIHsqfSB2YWxcbiAqIEByZXR1cm4geyp9IC0gcmVwbGFjZWQgZWxlbWVudFxuICovXG5cbmRlZihhcnJheVByb3RvLCAnJHNldCcsIGZ1bmN0aW9uICRzZXQoaW5kZXgsIHZhbCkge1xuICBpZiAoaW5kZXggPj0gdGhpcy5sZW5ndGgpIHtcbiAgICB0aGlzLmxlbmd0aCA9IE51bWJlcihpbmRleCkgKyAxO1xuICB9XG4gIHJldHVybiB0aGlzLnNwbGljZShpbmRleCwgMSwgdmFsKVswXTtcbn0pO1xuXG4vKipcbiAqIENvbnZlbmllbmNlIG1ldGhvZCB0byByZW1vdmUgdGhlIGVsZW1lbnQgYXQgZ2l2ZW4gaW5kZXggb3IgdGFyZ2V0IGVsZW1lbnQgcmVmZXJlbmNlLlxuICpcbiAqIEBwYXJhbSB7Kn0gaXRlbVxuICovXG5cbmRlZihhcnJheVByb3RvLCAnJHJlbW92ZScsIGZ1bmN0aW9uICRyZW1vdmUoaXRlbSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCF0aGlzLmxlbmd0aCkgcmV0dXJuO1xuICB2YXIgaW5kZXggPSBpbmRleE9mKHRoaXMsIGl0ZW0pO1xuICBpZiAoaW5kZXggPiAtMSkge1xuICAgIHJldHVybiB0aGlzLnNwbGljZShpbmRleCwgMSk7XG4gIH1cbn0pO1xuXG52YXIgYXJyYXlLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYXJyYXlNZXRob2RzKTtcblxuLyoqXG4gKiBCeSBkZWZhdWx0LCB3aGVuIGEgcmVhY3RpdmUgcHJvcGVydHkgaXMgc2V0LCB0aGUgbmV3IHZhbHVlIGlzXG4gKiBhbHNvIGNvbnZlcnRlZCB0byBiZWNvbWUgcmVhY3RpdmUuIEhvd2V2ZXIgaW4gY2VydGFpbiBjYXNlcywgZS5nLlxuICogdi1mb3Igc2NvcGUgYWxpYXMgYW5kIHByb3BzLCB3ZSBkb24ndCB3YW50IHRvIGZvcmNlIGNvbnZlcnNpb25cbiAqIGJlY2F1c2UgdGhlIHZhbHVlIG1heSBiZSBhIG5lc3RlZCB2YWx1ZSB1bmRlciBhIGZyb3plbiBkYXRhIHN0cnVjdHVyZS5cbiAqXG4gKiBTbyB3aGVuZXZlciB3ZSB3YW50IHRvIHNldCBhIHJlYWN0aXZlIHByb3BlcnR5IHdpdGhvdXQgZm9yY2luZ1xuICogY29udmVyc2lvbiBvbiB0aGUgbmV3IHZhbHVlLCB3ZSB3cmFwIHRoYXQgY2FsbCBpbnNpZGUgdGhpcyBmdW5jdGlvbi5cbiAqL1xuXG52YXIgc2hvdWxkQ29udmVydCA9IHRydWU7XG5cbmZ1bmN0aW9uIHdpdGhvdXRDb252ZXJzaW9uKGZuKSB7XG4gIHNob3VsZENvbnZlcnQgPSBmYWxzZTtcbiAgZm4oKTtcbiAgc2hvdWxkQ29udmVydCA9IHRydWU7XG59XG5cbi8qKlxuICogT2JzZXJ2ZXIgY2xhc3MgdGhhdCBhcmUgYXR0YWNoZWQgdG8gZWFjaCBvYnNlcnZlZFxuICogb2JqZWN0LiBPbmNlIGF0dGFjaGVkLCB0aGUgb2JzZXJ2ZXIgY29udmVydHMgdGFyZ2V0XG4gKiBvYmplY3QncyBwcm9wZXJ0eSBrZXlzIGludG8gZ2V0dGVyL3NldHRlcnMgdGhhdFxuICogY29sbGVjdCBkZXBlbmRlbmNpZXMgYW5kIGRpc3BhdGNoZXMgdXBkYXRlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gdmFsdWVcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5cbmZ1bmN0aW9uIE9ic2VydmVyKHZhbHVlKSB7XG4gIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgdGhpcy5kZXAgPSBuZXcgRGVwKCk7XG4gIGRlZih2YWx1ZSwgJ19fb2JfXycsIHRoaXMpO1xuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICB2YXIgYXVnbWVudCA9IGhhc1Byb3RvID8gcHJvdG9BdWdtZW50IDogY29weUF1Z21lbnQ7XG4gICAgYXVnbWVudCh2YWx1ZSwgYXJyYXlNZXRob2RzLCBhcnJheUtleXMpO1xuICAgIHRoaXMub2JzZXJ2ZUFycmF5KHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLndhbGsodmFsdWUpO1xuICB9XG59XG5cbi8vIEluc3RhbmNlIG1ldGhvZHNcblxuLyoqXG4gKiBXYWxrIHRocm91Z2ggZWFjaCBwcm9wZXJ0eSBhbmQgY29udmVydCB0aGVtIGludG9cbiAqIGdldHRlci9zZXR0ZXJzLiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgd2hlblxuICogdmFsdWUgdHlwZSBpcyBPYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICovXG5cbk9ic2VydmVyLnByb3RvdHlwZS53YWxrID0gZnVuY3Rpb24gKG9iaikge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB0aGlzLmNvbnZlcnQoa2V5c1tpXSwgb2JqW2tleXNbaV1dKTtcbiAgfVxufTtcblxuLyoqXG4gKiBPYnNlcnZlIGEgbGlzdCBvZiBBcnJheSBpdGVtcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBpdGVtc1xuICovXG5cbk9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlQXJyYXkgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBpdGVtcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBvYnNlcnZlKGl0ZW1zW2ldKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDb252ZXJ0IGEgcHJvcGVydHkgaW50byBnZXR0ZXIvc2V0dGVyIHNvIHdlIGNhbiBlbWl0XG4gKiB0aGUgZXZlbnRzIHdoZW4gdGhlIHByb3BlcnR5IGlzIGFjY2Vzc2VkL2NoYW5nZWQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5PYnNlcnZlci5wcm90b3R5cGUuY29udmVydCA9IGZ1bmN0aW9uIChrZXksIHZhbCkge1xuICBkZWZpbmVSZWFjdGl2ZSh0aGlzLnZhbHVlLCBrZXksIHZhbCk7XG59O1xuXG4vKipcbiAqIEFkZCBhbiBvd25lciB2bSwgc28gdGhhdCB3aGVuICRzZXQvJGRlbGV0ZSBtdXRhdGlvbnNcbiAqIGhhcHBlbiB3ZSBjYW4gbm90aWZ5IG93bmVyIHZtcyB0byBwcm94eSB0aGUga2V5cyBhbmRcbiAqIGRpZ2VzdCB0aGUgd2F0Y2hlcnMuIFRoaXMgaXMgb25seSBjYWxsZWQgd2hlbiB0aGUgb2JqZWN0XG4gKiBpcyBvYnNlcnZlZCBhcyBhbiBpbnN0YW5jZSdzIHJvb3QgJGRhdGEuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLmFkZFZtID0gZnVuY3Rpb24gKHZtKSB7XG4gICh0aGlzLnZtcyB8fCAodGhpcy52bXMgPSBbXSkpLnB1c2godm0pO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYW4gb3duZXIgdm0uIFRoaXMgaXMgY2FsbGVkIHdoZW4gdGhlIG9iamVjdCBpc1xuICogc3dhcHBlZCBvdXQgYXMgYW4gaW5zdGFuY2UncyAkZGF0YSBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLnJlbW92ZVZtID0gZnVuY3Rpb24gKHZtKSB7XG4gIHRoaXMudm1zLiRyZW1vdmUodm0pO1xufTtcblxuLy8gaGVscGVyc1xuXG4vKipcbiAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBpbnRlcmNlcHRpbmdcbiAqIHRoZSBwcm90b3R5cGUgY2hhaW4gdXNpbmcgX19wcm90b19fXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHRhcmdldFxuICogQHBhcmFtIHtPYmplY3R9IHNyY1xuICovXG5cbmZ1bmN0aW9uIHByb3RvQXVnbWVudCh0YXJnZXQsIHNyYykge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuICB0YXJnZXQuX19wcm90b19fID0gc3JjO1xuICAvKiBlc2xpbnQtZW5hYmxlIG5vLXByb3RvICovXG59XG5cbi8qKlxuICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGRlZmluaW5nXG4gKiBoaWRkZW4gcHJvcGVydGllcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gdGFyZ2V0XG4gKiBAcGFyYW0ge09iamVjdH0gcHJvdG9cbiAqL1xuXG5mdW5jdGlvbiBjb3B5QXVnbWVudCh0YXJnZXQsIHNyYywga2V5cykge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgZGVmKHRhcmdldCwga2V5LCBzcmNba2V5XSk7XG4gIH1cbn1cblxuLyoqXG4gKiBBdHRlbXB0IHRvIGNyZWF0ZSBhbiBvYnNlcnZlciBpbnN0YW5jZSBmb3IgYSB2YWx1ZSxcbiAqIHJldHVybnMgdGhlIG5ldyBvYnNlcnZlciBpZiBzdWNjZXNzZnVsbHkgb2JzZXJ2ZWQsXG4gKiBvciB0aGUgZXhpc3Rpbmcgb2JzZXJ2ZXIgaWYgdGhlIHZhbHVlIGFscmVhZHkgaGFzIG9uZS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuICogQHJldHVybiB7T2JzZXJ2ZXJ8dW5kZWZpbmVkfVxuICogQHN0YXRpY1xuICovXG5cbmZ1bmN0aW9uIG9ic2VydmUodmFsdWUsIHZtKSB7XG4gIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgb2I7XG4gIGlmIChoYXNPd24odmFsdWUsICdfX29iX18nKSAmJiB2YWx1ZS5fX29iX18gaW5zdGFuY2VvZiBPYnNlcnZlcikge1xuICAgIG9iID0gdmFsdWUuX19vYl9fO1xuICB9IGVsc2UgaWYgKHNob3VsZENvbnZlcnQgJiYgKGlzQXJyYXkodmFsdWUpIHx8IGlzUGxhaW5PYmplY3QodmFsdWUpKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSAmJiAhdmFsdWUuX2lzVnVlKSB7XG4gICAgb2IgPSBuZXcgT2JzZXJ2ZXIodmFsdWUpO1xuICB9XG4gIGlmIChvYiAmJiB2bSkge1xuICAgIG9iLmFkZFZtKHZtKTtcbiAgfVxuICByZXR1cm4gb2I7XG59XG5cbi8qKlxuICogRGVmaW5lIGEgcmVhY3RpdmUgcHJvcGVydHkgb24gYW4gT2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuZnVuY3Rpb24gZGVmaW5lUmVhY3RpdmUob2JqLCBrZXksIHZhbCkge1xuICB2YXIgZGVwID0gbmV3IERlcCgpO1xuXG4gIHZhciBwcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpO1xuICBpZiAocHJvcGVydHkgJiYgcHJvcGVydHkuY29uZmlndXJhYmxlID09PSBmYWxzZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIGNhdGVyIGZvciBwcmUtZGVmaW5lZCBnZXR0ZXIvc2V0dGVyc1xuICB2YXIgZ2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuZ2V0O1xuICB2YXIgc2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuc2V0O1xuXG4gIHZhciBjaGlsZE9iID0gb2JzZXJ2ZSh2YWwpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlR2V0dGVyKCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcbiAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG4gICAgICAgIGRlcC5kZXBlbmQoKTtcbiAgICAgICAgaWYgKGNoaWxkT2IpIHtcbiAgICAgICAgICBjaGlsZE9iLmRlcC5kZXBlbmQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICBmb3IgKHZhciBlLCBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgZSA9IHZhbHVlW2ldO1xuICAgICAgICAgICAgZSAmJiBlLl9fb2JfXyAmJiBlLl9fb2JfXy5kZXAuZGVwZW5kKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlU2V0dGVyKG5ld1ZhbCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcbiAgICAgIGlmIChuZXdWYWwgPT09IHZhbHVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChzZXR0ZXIpIHtcbiAgICAgICAgc2V0dGVyLmNhbGwob2JqLCBuZXdWYWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsID0gbmV3VmFsO1xuICAgICAgfVxuICAgICAgY2hpbGRPYiA9IG9ic2VydmUobmV3VmFsKTtcbiAgICAgIGRlcC5ub3RpZnkoKTtcbiAgICB9XG4gIH0pO1xufVxuXG5cblxudmFyIHV0aWwgPSBPYmplY3QuZnJlZXplKHtcblx0ZGVmaW5lUmVhY3RpdmU6IGRlZmluZVJlYWN0aXZlLFxuXHRzZXQ6IHNldCxcblx0ZGVsOiBkZWwsXG5cdGhhc093bjogaGFzT3duLFxuXHRpc0xpdGVyYWw6IGlzTGl0ZXJhbCxcblx0aXNSZXNlcnZlZDogaXNSZXNlcnZlZCxcblx0X3RvU3RyaW5nOiBfdG9TdHJpbmcsXG5cdHRvTnVtYmVyOiB0b051bWJlcixcblx0dG9Cb29sZWFuOiB0b0Jvb2xlYW4sXG5cdHN0cmlwUXVvdGVzOiBzdHJpcFF1b3Rlcyxcblx0Y2FtZWxpemU6IGNhbWVsaXplLFxuXHRoeXBoZW5hdGU6IGh5cGhlbmF0ZSxcblx0Y2xhc3NpZnk6IGNsYXNzaWZ5LFxuXHRiaW5kOiBiaW5kLFxuXHR0b0FycmF5OiB0b0FycmF5LFxuXHRleHRlbmQ6IGV4dGVuZCxcblx0aXNPYmplY3Q6IGlzT2JqZWN0LFxuXHRpc1BsYWluT2JqZWN0OiBpc1BsYWluT2JqZWN0LFxuXHRkZWY6IGRlZixcblx0ZGVib3VuY2U6IF9kZWJvdW5jZSxcblx0aW5kZXhPZjogaW5kZXhPZixcblx0Y2FuY2VsbGFibGU6IGNhbmNlbGxhYmxlLFxuXHRsb29zZUVxdWFsOiBsb29zZUVxdWFsLFxuXHRpc0FycmF5OiBpc0FycmF5LFxuXHRoYXNQcm90bzogaGFzUHJvdG8sXG5cdGluQnJvd3NlcjogaW5Ccm93c2VyLFxuXHRkZXZ0b29sczogZGV2dG9vbHMsXG5cdGlzSUU6IGlzSUUsXG5cdGlzSUU5OiBpc0lFOSxcblx0aXNBbmRyb2lkOiBpc0FuZHJvaWQsXG5cdGlzSW9zOiBpc0lvcyxcblx0aW9zVmVyc2lvbk1hdGNoOiBpb3NWZXJzaW9uTWF0Y2gsXG5cdGlvc1ZlcnNpb246IGlvc1ZlcnNpb24sXG5cdGhhc011dGF0aW9uT2JzZXJ2ZXJCdWc6IGhhc011dGF0aW9uT2JzZXJ2ZXJCdWcsXG5cdGdldCB0cmFuc2l0aW9uUHJvcCAoKSB7IHJldHVybiB0cmFuc2l0aW9uUHJvcDsgfSxcblx0Z2V0IHRyYW5zaXRpb25FbmRFdmVudCAoKSB7IHJldHVybiB0cmFuc2l0aW9uRW5kRXZlbnQ7IH0sXG5cdGdldCBhbmltYXRpb25Qcm9wICgpIHsgcmV0dXJuIGFuaW1hdGlvblByb3A7IH0sXG5cdGdldCBhbmltYXRpb25FbmRFdmVudCAoKSB7IHJldHVybiBhbmltYXRpb25FbmRFdmVudDsgfSxcblx0bmV4dFRpY2s6IG5leHRUaWNrLFxuXHRnZXQgX1NldCAoKSB7IHJldHVybiBfU2V0OyB9LFxuXHRxdWVyeTogcXVlcnksXG5cdGluRG9jOiBpbkRvYyxcblx0Z2V0QXR0cjogZ2V0QXR0cixcblx0Z2V0QmluZEF0dHI6IGdldEJpbmRBdHRyLFxuXHRoYXNCaW5kQXR0cjogaGFzQmluZEF0dHIsXG5cdGJlZm9yZTogYmVmb3JlLFxuXHRhZnRlcjogYWZ0ZXIsXG5cdHJlbW92ZTogcmVtb3ZlLFxuXHRwcmVwZW5kOiBwcmVwZW5kLFxuXHRyZXBsYWNlOiByZXBsYWNlLFxuXHRvbjogb24sXG5cdG9mZjogb2ZmLFxuXHRzZXRDbGFzczogc2V0Q2xhc3MsXG5cdGFkZENsYXNzOiBhZGRDbGFzcyxcblx0cmVtb3ZlQ2xhc3M6IHJlbW92ZUNsYXNzLFxuXHRleHRyYWN0Q29udGVudDogZXh0cmFjdENvbnRlbnQsXG5cdHRyaW1Ob2RlOiB0cmltTm9kZSxcblx0aXNUZW1wbGF0ZTogaXNUZW1wbGF0ZSxcblx0Y3JlYXRlQW5jaG9yOiBjcmVhdGVBbmNob3IsXG5cdGZpbmRSZWY6IGZpbmRSZWYsXG5cdG1hcE5vZGVSYW5nZTogbWFwTm9kZVJhbmdlLFxuXHRyZW1vdmVOb2RlUmFuZ2U6IHJlbW92ZU5vZGVSYW5nZSxcblx0aXNGcmFnbWVudDogaXNGcmFnbWVudCxcblx0Z2V0T3V0ZXJIVE1MOiBnZXRPdXRlckhUTUwsXG5cdG1lcmdlT3B0aW9uczogbWVyZ2VPcHRpb25zLFxuXHRyZXNvbHZlQXNzZXQ6IHJlc29sdmVBc3NldCxcblx0Y2hlY2tDb21wb25lbnRBdHRyOiBjaGVja0NvbXBvbmVudEF0dHIsXG5cdGNvbW1vblRhZ1JFOiBjb21tb25UYWdSRSxcblx0cmVzZXJ2ZWRUYWdSRTogcmVzZXJ2ZWRUYWdSRSxcblx0Z2V0IHdhcm4gKCkgeyByZXR1cm4gd2FybjsgfVxufSk7XG5cbnZhciB1aWQgPSAwO1xuXG5mdW5jdGlvbiBpbml0TWl4aW4gKFZ1ZSkge1xuICAvKipcbiAgICogVGhlIG1haW4gaW5pdCBzZXF1ZW5jZS4gVGhpcyBpcyBjYWxsZWQgZm9yIGV2ZXJ5XG4gICAqIGluc3RhbmNlLCBpbmNsdWRpbmcgb25lcyB0aGF0IGFyZSBjcmVhdGVkIGZyb20gZXh0ZW5kZWRcbiAgICogY29uc3RydWN0b3JzLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIHRoaXMgb3B0aW9ucyBvYmplY3Qgc2hvdWxkIGJlXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHJlc3VsdCBvZiBtZXJnaW5nIGNsYXNzXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyBhbmQgdGhlIG9wdGlvbnMgcGFzc2VkXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gdG8gdGhlIGNvbnN0cnVjdG9yLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIHRoaXMuJGVsID0gbnVsbDtcbiAgICB0aGlzLiRwYXJlbnQgPSBvcHRpb25zLnBhcmVudDtcbiAgICB0aGlzLiRyb290ID0gdGhpcy4kcGFyZW50ID8gdGhpcy4kcGFyZW50LiRyb290IDogdGhpcztcbiAgICB0aGlzLiRjaGlsZHJlbiA9IFtdO1xuICAgIHRoaXMuJHJlZnMgPSB7fTsgLy8gY2hpbGQgdm0gcmVmZXJlbmNlc1xuICAgIHRoaXMuJGVscyA9IHt9OyAvLyBlbGVtZW50IHJlZmVyZW5jZXNcbiAgICB0aGlzLl93YXRjaGVycyA9IFtdOyAvLyBhbGwgd2F0Y2hlcnMgYXMgYW4gYXJyYXlcbiAgICB0aGlzLl9kaXJlY3RpdmVzID0gW107IC8vIGFsbCBkaXJlY3RpdmVzXG5cbiAgICAvLyBhIHVpZFxuICAgIHRoaXMuX3VpZCA9IHVpZCsrO1xuXG4gICAgLy8gYSBmbGFnIHRvIGF2b2lkIHRoaXMgYmVpbmcgb2JzZXJ2ZWRcbiAgICB0aGlzLl9pc1Z1ZSA9IHRydWU7XG5cbiAgICAvLyBldmVudHMgYm9va2tlZXBpbmdcbiAgICB0aGlzLl9ldmVudHMgPSB7fTsgLy8gcmVnaXN0ZXJlZCBjYWxsYmFja3NcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IHt9OyAvLyBmb3IgJGJyb2FkY2FzdCBvcHRpbWl6YXRpb25cblxuICAgIC8vIGZyYWdtZW50IGluc3RhbmNlIHByb3BlcnRpZXNcbiAgICB0aGlzLl9pc0ZyYWdtZW50ID0gZmFsc2U7XG4gICAgdGhpcy5fZnJhZ21lbnQgPSAvLyBAdHlwZSB7RG9jdW1lbnRGcmFnbWVudH1cbiAgICB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gLy8gQHR5cGUge1RleHR8Q29tbWVudH1cbiAgICB0aGlzLl9mcmFnbWVudEVuZCA9IG51bGw7IC8vIEB0eXBlIHtUZXh0fENvbW1lbnR9XG5cbiAgICAvLyBsaWZlY3ljbGUgc3RhdGVcbiAgICB0aGlzLl9pc0NvbXBpbGVkID0gdGhpcy5faXNEZXN0cm95ZWQgPSB0aGlzLl9pc1JlYWR5ID0gdGhpcy5faXNBdHRhY2hlZCA9IHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgPSB0aGlzLl92Rm9yUmVtb3ZpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl91bmxpbmtGbiA9IG51bGw7XG5cbiAgICAvLyBjb250ZXh0OlxuICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGNvbnRleHRcbiAgICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2VcbiAgICAvLyBhbmQgaXRzIGhvc3QuXG4gICAgdGhpcy5fY29udGV4dCA9IG9wdGlvbnMuX2NvbnRleHQgfHwgdGhpcy4kcGFyZW50O1xuXG4gICAgLy8gc2NvcGU6XG4gICAgLy8gaWYgdGhpcyBpcyBpbnNpZGUgYW4gaW5saW5lIHYtZm9yLCB0aGUgc2NvcGVcbiAgICAvLyB3aWxsIGJlIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgY3JlYXRlZCBmb3IgdGhpc1xuICAgIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXG4gICAgLy8gYW5kIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuICAgIHRoaXMuX3Njb3BlID0gb3B0aW9ucy5fc2NvcGU7XG5cbiAgICAvLyBmcmFnbWVudDpcbiAgICAvLyBpZiB0aGlzIGluc3RhbmNlIGlzIGNvbXBpbGVkIGluc2lkZSBhIEZyYWdtZW50LCBpdFxuICAgIC8vIG5lZWRzIHRvIHJlaWdzdGVyIGl0c2VsZiBhcyBhIGNoaWxkIG9mIHRoYXQgZnJhZ21lbnRcbiAgICAvLyBmb3IgYXR0YWNoL2RldGFjaCB0byB3b3JrIHByb3Blcmx5LlxuICAgIHRoaXMuX2ZyYWcgPSBvcHRpb25zLl9mcmFnO1xuICAgIGlmICh0aGlzLl9mcmFnKSB7XG4gICAgICB0aGlzLl9mcmFnLmNoaWxkcmVuLnB1c2godGhpcyk7XG4gICAgfVxuXG4gICAgLy8gcHVzaCBzZWxmIGludG8gcGFyZW50IC8gdHJhbnNjbHVzaW9uIGhvc3RcbiAgICBpZiAodGhpcy4kcGFyZW50KSB7XG4gICAgICB0aGlzLiRwYXJlbnQuJGNoaWxkcmVuLnB1c2godGhpcyk7XG4gICAgfVxuXG4gICAgLy8gbWVyZ2Ugb3B0aW9ucy5cbiAgICBvcHRpb25zID0gdGhpcy4kb3B0aW9ucyA9IG1lcmdlT3B0aW9ucyh0aGlzLmNvbnN0cnVjdG9yLm9wdGlvbnMsIG9wdGlvbnMsIHRoaXMpO1xuXG4gICAgLy8gc2V0IHJlZlxuICAgIHRoaXMuX3VwZGF0ZVJlZigpO1xuXG4gICAgLy8gaW5pdGlhbGl6ZSBkYXRhIGFzIGVtcHR5IG9iamVjdC5cbiAgICAvLyBpdCB3aWxsIGJlIGZpbGxlZCB1cCBpbiBfaW5pdERhdGEoKS5cbiAgICB0aGlzLl9kYXRhID0ge307XG5cbiAgICAvLyBjYWxsIGluaXQgaG9va1xuICAgIHRoaXMuX2NhbGxIb29rKCdpbml0Jyk7XG5cbiAgICAvLyBpbml0aWFsaXplIGRhdGEgb2JzZXJ2YXRpb24gYW5kIHNjb3BlIGluaGVyaXRhbmNlLlxuICAgIHRoaXMuX2luaXRTdGF0ZSgpO1xuXG4gICAgLy8gc2V0dXAgZXZlbnQgc3lzdGVtIGFuZCBvcHRpb24gZXZlbnRzLlxuICAgIHRoaXMuX2luaXRFdmVudHMoKTtcblxuICAgIC8vIGNhbGwgY3JlYXRlZCBob29rXG4gICAgdGhpcy5fY2FsbEhvb2soJ2NyZWF0ZWQnKTtcblxuICAgIC8vIGlmIGBlbGAgb3B0aW9uIGlzIHBhc3NlZCwgc3RhcnQgY29tcGlsYXRpb24uXG4gICAgaWYgKG9wdGlvbnMuZWwpIHtcbiAgICAgIHRoaXMuJG1vdW50KG9wdGlvbnMuZWwpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIHBhdGhDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblxuLy8gYWN0aW9uc1xudmFyIEFQUEVORCA9IDA7XG52YXIgUFVTSCA9IDE7XG52YXIgSU5DX1NVQl9QQVRIX0RFUFRIID0gMjtcbnZhciBQVVNIX1NVQl9QQVRIID0gMztcblxuLy8gc3RhdGVzXG52YXIgQkVGT1JFX1BBVEggPSAwO1xudmFyIElOX1BBVEggPSAxO1xudmFyIEJFRk9SRV9JREVOVCA9IDI7XG52YXIgSU5fSURFTlQgPSAzO1xudmFyIElOX1NVQl9QQVRIID0gNDtcbnZhciBJTl9TSU5HTEVfUVVPVEUgPSA1O1xudmFyIElOX0RPVUJMRV9RVU9URSA9IDY7XG52YXIgQUZURVJfUEFUSCA9IDc7XG52YXIgRVJST1IgPSA4O1xuXG52YXIgcGF0aFN0YXRlTWFjaGluZSA9IFtdO1xuXG5wYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9QQVRIXSA9IHtcbiAgJ3dzJzogW0JFRk9SRV9QQVRIXSxcbiAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnWyc6IFtJTl9TVUJfUEFUSF0sXG4gICdlb2YnOiBbQUZURVJfUEFUSF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fUEFUSF0gPSB7XG4gICd3cyc6IFtJTl9QQVRIXSxcbiAgJy4nOiBbQkVGT1JFX0lERU5UXSxcbiAgJ1snOiBbSU5fU1VCX1BBVEhdLFxuICAnZW9mJzogW0FGVEVSX1BBVEhdXG59O1xuXG5wYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9JREVOVF0gPSB7XG4gICd3cyc6IFtCRUZPUkVfSURFTlRdLFxuICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fSURFTlRdID0ge1xuICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sXG4gICcwJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnbnVtYmVyJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnd3MnOiBbSU5fUEFUSCwgUFVTSF0sXG4gICcuJzogW0JFRk9SRV9JREVOVCwgUFVTSF0sXG4gICdbJzogW0lOX1NVQl9QQVRILCBQVVNIXSxcbiAgJ2VvZic6IFtBRlRFUl9QQVRILCBQVVNIXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtJTl9TVUJfUEFUSF0gPSB7XG4gIFwiJ1wiOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkRdLFxuICAnXCInOiBbSU5fRE9VQkxFX1FVT1RFLCBBUFBFTkRdLFxuICAnWyc6IFtJTl9TVUJfUEFUSCwgSU5DX1NVQl9QQVRIX0RFUFRIXSxcbiAgJ10nOiBbSU5fUEFUSCwgUFVTSF9TVUJfUEFUSF0sXG4gICdlb2YnOiBFUlJPUixcbiAgJ2Vsc2UnOiBbSU5fU1VCX1BBVEgsIEFQUEVORF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fU0lOR0xFX1FVT1RFXSA9IHtcbiAgXCInXCI6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXSxcbiAgJ2VvZic6IEVSUk9SLFxuICAnZWxzZSc6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fRE9VQkxFX1FVT1RFXSA9IHtcbiAgJ1wiJzogW0lOX1NVQl9QQVRILCBBUFBFTkRdLFxuICAnZW9mJzogRVJST1IsXG4gICdlbHNlJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5EXVxufTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgdGhlIHR5cGUgb2YgYSBjaGFyYWN0ZXIgaW4gYSBrZXlwYXRoLlxuICpcbiAqIEBwYXJhbSB7Q2hhcn0gY2hcbiAqIEByZXR1cm4ge1N0cmluZ30gdHlwZVxuICovXG5cbmZ1bmN0aW9uIGdldFBhdGhDaGFyVHlwZShjaCkge1xuICBpZiAoY2ggPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAnZW9mJztcbiAgfVxuXG4gIHZhciBjb2RlID0gY2guY2hhckNvZGVBdCgwKTtcblxuICBzd2l0Y2ggKGNvZGUpIHtcbiAgICBjYXNlIDB4NUI6IC8vIFtcbiAgICBjYXNlIDB4NUQ6IC8vIF1cbiAgICBjYXNlIDB4MkU6IC8vIC5cbiAgICBjYXNlIDB4MjI6IC8vIFwiXG4gICAgY2FzZSAweDI3OiAvLyAnXG4gICAgY2FzZSAweDMwOlxuICAgICAgLy8gMFxuICAgICAgcmV0dXJuIGNoO1xuXG4gICAgY2FzZSAweDVGOiAvLyBfXG4gICAgY2FzZSAweDI0OlxuICAgICAgLy8gJFxuICAgICAgcmV0dXJuICdpZGVudCc7XG5cbiAgICBjYXNlIDB4MjA6IC8vIFNwYWNlXG4gICAgY2FzZSAweDA5OiAvLyBUYWJcbiAgICBjYXNlIDB4MEE6IC8vIE5ld2xpbmVcbiAgICBjYXNlIDB4MEQ6IC8vIFJldHVyblxuICAgIGNhc2UgMHhBMDogLy8gTm8tYnJlYWsgc3BhY2VcbiAgICBjYXNlIDB4RkVGRjogLy8gQnl0ZSBPcmRlciBNYXJrXG4gICAgY2FzZSAweDIwMjg6IC8vIExpbmUgU2VwYXJhdG9yXG4gICAgY2FzZSAweDIwMjk6XG4gICAgICAvLyBQYXJhZ3JhcGggU2VwYXJhdG9yXG4gICAgICByZXR1cm4gJ3dzJztcbiAgfVxuXG4gIC8vIGEteiwgQS1aXG4gIGlmIChjb2RlID49IDB4NjEgJiYgY29kZSA8PSAweDdBIHx8IGNvZGUgPj0gMHg0MSAmJiBjb2RlIDw9IDB4NUEpIHtcbiAgICByZXR1cm4gJ2lkZW50JztcbiAgfVxuXG4gIC8vIDEtOVxuICBpZiAoY29kZSA+PSAweDMxICYmIGNvZGUgPD0gMHgzOSkge1xuICAgIHJldHVybiAnbnVtYmVyJztcbiAgfVxuXG4gIHJldHVybiAnZWxzZSc7XG59XG5cbi8qKlxuICogRm9ybWF0IGEgc3ViUGF0aCwgcmV0dXJuIGl0cyBwbGFpbiBmb3JtIGlmIGl0IGlzXG4gKiBhIGxpdGVyYWwgc3RyaW5nIG9yIG51bWJlci4gT3RoZXJ3aXNlIHByZXBlbmQgdGhlXG4gKiBkeW5hbWljIGluZGljYXRvciAoKikuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRTdWJQYXRoKHBhdGgpIHtcbiAgdmFyIHRyaW1tZWQgPSBwYXRoLnRyaW0oKTtcbiAgLy8gaW52YWxpZCBsZWFkaW5nIDBcbiAgaWYgKHBhdGguY2hhckF0KDApID09PSAnMCcgJiYgaXNOYU4ocGF0aCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIGlzTGl0ZXJhbCh0cmltbWVkKSA/IHN0cmlwUXVvdGVzKHRyaW1tZWQpIDogJyonICsgdHJpbW1lZDtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHN0cmluZyBwYXRoIGludG8gYW4gYXJyYXkgb2Ygc2VnbWVudHNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICogQHJldHVybiB7QXJyYXl8dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlKHBhdGgpIHtcbiAgdmFyIGtleXMgPSBbXTtcbiAgdmFyIGluZGV4ID0gLTE7XG4gIHZhciBtb2RlID0gQkVGT1JFX1BBVEg7XG4gIHZhciBzdWJQYXRoRGVwdGggPSAwO1xuICB2YXIgYywgbmV3Q2hhciwga2V5LCB0eXBlLCB0cmFuc2l0aW9uLCBhY3Rpb24sIHR5cGVNYXA7XG5cbiAgdmFyIGFjdGlvbnMgPSBbXTtcblxuICBhY3Rpb25zW1BVU0hdID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgICBrZXkgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9O1xuXG4gIGFjdGlvbnNbQVBQRU5EXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGtleSA9IG5ld0NoYXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleSArPSBuZXdDaGFyO1xuICAgIH1cbiAgfTtcblxuICBhY3Rpb25zW0lOQ19TVUJfUEFUSF9ERVBUSF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgYWN0aW9uc1tBUFBFTkRdKCk7XG4gICAgc3ViUGF0aERlcHRoKys7XG4gIH07XG5cbiAgYWN0aW9uc1tQVVNIX1NVQl9QQVRIXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc3ViUGF0aERlcHRoID4gMCkge1xuICAgICAgc3ViUGF0aERlcHRoLS07XG4gICAgICBtb2RlID0gSU5fU1VCX1BBVEg7XG4gICAgICBhY3Rpb25zW0FQUEVORF0oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3ViUGF0aERlcHRoID0gMDtcbiAgICAgIGtleSA9IGZvcm1hdFN1YlBhdGgoa2V5KTtcbiAgICAgIGlmIChrZXkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFjdGlvbnNbUFVTSF0oKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gbWF5YmVVbmVzY2FwZVF1b3RlKCkge1xuICAgIHZhciBuZXh0Q2hhciA9IHBhdGhbaW5kZXggKyAxXTtcbiAgICBpZiAobW9kZSA9PT0gSU5fU0lOR0xFX1FVT1RFICYmIG5leHRDaGFyID09PSBcIidcIiB8fCBtb2RlID09PSBJTl9ET1VCTEVfUVVPVEUgJiYgbmV4dENoYXIgPT09ICdcIicpIHtcbiAgICAgIGluZGV4Kys7XG4gICAgICBuZXdDaGFyID0gJ1xcXFwnICsgbmV4dENoYXI7XG4gICAgICBhY3Rpb25zW0FQUEVORF0oKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHdoaWxlIChtb2RlICE9IG51bGwpIHtcbiAgICBpbmRleCsrO1xuICAgIGMgPSBwYXRoW2luZGV4XTtcblxuICAgIGlmIChjID09PSAnXFxcXCcgJiYgbWF5YmVVbmVzY2FwZVF1b3RlKCkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHR5cGUgPSBnZXRQYXRoQ2hhclR5cGUoYyk7XG4gICAgdHlwZU1hcCA9IHBhdGhTdGF0ZU1hY2hpbmVbbW9kZV07XG4gICAgdHJhbnNpdGlvbiA9IHR5cGVNYXBbdHlwZV0gfHwgdHlwZU1hcFsnZWxzZSddIHx8IEVSUk9SO1xuXG4gICAgaWYgKHRyYW5zaXRpb24gPT09IEVSUk9SKSB7XG4gICAgICByZXR1cm47IC8vIHBhcnNlIGVycm9yXG4gICAgfVxuXG4gICAgbW9kZSA9IHRyYW5zaXRpb25bMF07XG4gICAgYWN0aW9uID0gYWN0aW9uc1t0cmFuc2l0aW9uWzFdXTtcbiAgICBpZiAoYWN0aW9uKSB7XG4gICAgICBuZXdDaGFyID0gdHJhbnNpdGlvblsyXTtcbiAgICAgIG5ld0NoYXIgPSBuZXdDaGFyID09PSB1bmRlZmluZWQgPyBjIDogbmV3Q2hhcjtcbiAgICAgIGlmIChhY3Rpb24oKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtb2RlID09PSBBRlRFUl9QQVRIKSB7XG4gICAgICBrZXlzLnJhdyA9IHBhdGg7XG4gICAgICByZXR1cm4ga2V5cztcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRlcm5hbCBwYXJzZSB0aGF0IGNoZWNrIGZvciBhIGNhY2hlIGhpdCBmaXJzdFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgpIHtcbiAgdmFyIGhpdCA9IHBhdGhDYWNoZS5nZXQocGF0aCk7XG4gIGlmICghaGl0KSB7XG4gICAgaGl0ID0gcGFyc2UocGF0aCk7XG4gICAgaWYgKGhpdCkge1xuICAgICAgcGF0aENhY2hlLnB1dChwYXRoLCBoaXQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaGl0O1xufVxuXG4vKipcbiAqIEdldCBmcm9tIGFuIG9iamVjdCBmcm9tIGEgcGF0aCBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICovXG5cbmZ1bmN0aW9uIGdldFBhdGgob2JqLCBwYXRoKSB7XG4gIHJldHVybiBwYXJzZUV4cHJlc3Npb24ocGF0aCkuZ2V0KG9iaik7XG59XG5cbi8qKlxuICogV2FybiBhZ2FpbnN0IHNldHRpbmcgbm9uLWV4aXN0ZW50IHJvb3QgcGF0aCBvbiBhIHZtLlxuICovXG5cbnZhciB3YXJuTm9uRXhpc3RlbnQ7XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICB3YXJuTm9uRXhpc3RlbnQgPSBmdW5jdGlvbiAocGF0aCwgdm0pIHtcbiAgICB3YXJuKCdZb3UgYXJlIHNldHRpbmcgYSBub24tZXhpc3RlbnQgcGF0aCBcIicgKyBwYXRoLnJhdyArICdcIiAnICsgJ29uIGEgdm0gaW5zdGFuY2UuIENvbnNpZGVyIHByZS1pbml0aWFsaXppbmcgdGhlIHByb3BlcnR5ICcgKyAnd2l0aCB0aGUgXCJkYXRhXCIgb3B0aW9uIGZvciBtb3JlIHJlbGlhYmxlIHJlYWN0aXZpdHkgJyArICdhbmQgYmV0dGVyIHBlcmZvcm1hbmNlLicsIHZtKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBTZXQgb24gYW4gb2JqZWN0IGZyb20gYSBwYXRoXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmcgfCBBcnJheX0gcGF0aFxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5mdW5jdGlvbiBzZXRQYXRoKG9iaiwgcGF0aCwgdmFsKSB7XG4gIHZhciBvcmlnaW5hbCA9IG9iajtcbiAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgIHBhdGggPSBwYXJzZShwYXRoKTtcbiAgfVxuICBpZiAoIXBhdGggfHwgIWlzT2JqZWN0KG9iaikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIGxhc3QsIGtleTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBwYXRoLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGxhc3QgPSBvYmo7XG4gICAga2V5ID0gcGF0aFtpXTtcbiAgICBpZiAoa2V5LmNoYXJBdCgwKSA9PT0gJyonKSB7XG4gICAgICBrZXkgPSBwYXJzZUV4cHJlc3Npb24oa2V5LnNsaWNlKDEpKS5nZXQuY2FsbChvcmlnaW5hbCwgb3JpZ2luYWwpO1xuICAgIH1cbiAgICBpZiAoaSA8IGwgLSAxKSB7XG4gICAgICBvYmogPSBvYmpba2V5XTtcbiAgICAgIGlmICghaXNPYmplY3Qob2JqKSkge1xuICAgICAgICBvYmogPSB7fTtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgbGFzdC5faXNWdWUpIHtcbiAgICAgICAgICB3YXJuTm9uRXhpc3RlbnQocGF0aCwgbGFzdCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0KGxhc3QsIGtleSwgb2JqKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGlzQXJyYXkob2JqKSkge1xuICAgICAgICBvYmouJHNldChrZXksIHZhbCk7XG4gICAgICB9IGVsc2UgaWYgKGtleSBpbiBvYmopIHtcbiAgICAgICAgb2JqW2tleV0gPSB2YWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBvYmouX2lzVnVlKSB7XG4gICAgICAgICAgd2Fybk5vbkV4aXN0ZW50KHBhdGgsIG9iaik7XG4gICAgICAgIH1cbiAgICAgICAgc2V0KG9iaiwga2V5LCB2YWwpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxudmFyIHBhdGggPSBPYmplY3QuZnJlZXplKHtcbiAgcGFyc2VQYXRoOiBwYXJzZVBhdGgsXG4gIGdldFBhdGg6IGdldFBhdGgsXG4gIHNldFBhdGg6IHNldFBhdGhcbn0pO1xuXG52YXIgZXhwcmVzc2lvbkNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXG52YXIgYWxsb3dlZEtleXdvcmRzID0gJ01hdGgsRGF0ZSx0aGlzLHRydWUsZmFsc2UsbnVsbCx1bmRlZmluZWQsSW5maW5pdHksTmFOLCcgKyAnaXNOYU4saXNGaW5pdGUsZGVjb2RlVVJJLGRlY29kZVVSSUNvbXBvbmVudCxlbmNvZGVVUkksJyArICdlbmNvZGVVUklDb21wb25lbnQscGFyc2VJbnQscGFyc2VGbG9hdCc7XG52YXIgYWxsb3dlZEtleXdvcmRzUkUgPSBuZXcgUmVnRXhwKCdeKCcgKyBhbGxvd2VkS2V5d29yZHMucmVwbGFjZSgvLC9nLCAnXFxcXGJ8JykgKyAnXFxcXGIpJyk7XG5cbi8vIGtleXdvcmRzIHRoYXQgZG9uJ3QgbWFrZSBzZW5zZSBpbnNpZGUgZXhwcmVzc2lvbnNcbnZhciBpbXByb3BlcktleXdvcmRzID0gJ2JyZWFrLGNhc2UsY2xhc3MsY2F0Y2gsY29uc3QsY29udGludWUsZGVidWdnZXIsZGVmYXVsdCwnICsgJ2RlbGV0ZSxkbyxlbHNlLGV4cG9ydCxleHRlbmRzLGZpbmFsbHksZm9yLGZ1bmN0aW9uLGlmLCcgKyAnaW1wb3J0LGluLGluc3RhbmNlb2YsbGV0LHJldHVybixzdXBlcixzd2l0Y2gsdGhyb3csdHJ5LCcgKyAndmFyLHdoaWxlLHdpdGgseWllbGQsZW51bSxhd2FpdCxpbXBsZW1lbnRzLHBhY2thZ2UsJyArICdwcm90ZWN0ZWQsc3RhdGljLGludGVyZmFjZSxwcml2YXRlLHB1YmxpYyc7XG52YXIgaW1wcm9wZXJLZXl3b3Jkc1JFID0gbmV3IFJlZ0V4cCgnXignICsgaW1wcm9wZXJLZXl3b3Jkcy5yZXBsYWNlKC8sL2csICdcXFxcYnwnKSArICdcXFxcYiknKTtcblxudmFyIHdzUkUgPSAvXFxzL2c7XG52YXIgbmV3bGluZVJFID0gL1xcbi9nO1xudmFyIHNhdmVSRSA9IC9bXFx7LF1cXHMqW1xcd1xcJF9dK1xccyo6fCgnKD86W14nXFxcXF18XFxcXC4pKid8XCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifGAoPzpbXmBcXFxcXXxcXFxcLikqXFwkXFx7fFxcfSg/OlteYFxcXFxdfFxcXFwuKSpgfGAoPzpbXmBcXFxcXXxcXFxcLikqYCl8bmV3IHx0eXBlb2YgfHZvaWQgL2c7XG52YXIgcmVzdG9yZVJFID0gL1wiKFxcZCspXCIvZztcbnZhciBwYXRoVGVzdFJFID0gL15bQS1aYS16XyRdW1xcdyRdKig/OlxcLltBLVphLXpfJF1bXFx3JF0qfFxcWycuKj8nXFxdfFxcW1wiLio/XCJcXF18XFxbXFxkK1xcXXxcXFtbQS1aYS16XyRdW1xcdyRdKlxcXSkqJC87XG52YXIgaWRlbnRSRSA9IC9bXlxcdyRcXC5dKD86W0EtWmEtel8kXVtcXHckXSopL2c7XG52YXIgbGl0ZXJhbFZhbHVlUkUkMSA9IC9eKD86dHJ1ZXxmYWxzZXxudWxsfHVuZGVmaW5lZHxJbmZpbml0eXxOYU4pJC87XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG4vKipcbiAqIFNhdmUgLyBSZXdyaXRlIC8gUmVzdG9yZVxuICpcbiAqIFdoZW4gcmV3cml0aW5nIHBhdGhzIGZvdW5kIGluIGFuIGV4cHJlc3Npb24sIGl0IGlzXG4gKiBwb3NzaWJsZSBmb3IgdGhlIHNhbWUgbGV0dGVyIHNlcXVlbmNlcyB0byBiZSBmb3VuZCBpblxuICogc3RyaW5ncyBhbmQgT2JqZWN0IGxpdGVyYWwgcHJvcGVydHkga2V5cy4gVGhlcmVmb3JlIHdlXG4gKiByZW1vdmUgYW5kIHN0b3JlIHRoZXNlIHBhcnRzIGluIGEgdGVtcG9yYXJ5IGFycmF5LCBhbmRcbiAqIHJlc3RvcmUgdGhlbSBhZnRlciB0aGUgcGF0aCByZXdyaXRlLlxuICovXG5cbnZhciBzYXZlZCA9IFtdO1xuXG4vKipcbiAqIFNhdmUgcmVwbGFjZXJcbiAqXG4gKiBUaGUgc2F2ZSByZWdleCBjYW4gbWF0Y2ggdHdvIHBvc3NpYmxlIGNhc2VzOlxuICogMS4gQW4gb3BlbmluZyBvYmplY3QgbGl0ZXJhbFxuICogMi4gQSBzdHJpbmdcbiAqIElmIG1hdGNoZWQgYXMgYSBwbGFpbiBzdHJpbmcsIHdlIG5lZWQgdG8gZXNjYXBlIGl0c1xuICogbmV3bGluZXMsIHNpbmNlIHRoZSBzdHJpbmcgbmVlZHMgdG8gYmUgcHJlc2VydmVkIHdoZW5cbiAqIGdlbmVyYXRpbmcgdGhlIGZ1bmN0aW9uIGJvZHkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtTdHJpbmd9IGlzU3RyaW5nIC0gc3RyIGlmIG1hdGNoZWQgYXMgYSBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ30gLSBwbGFjZWhvbGRlciB3aXRoIGluZGV4XG4gKi9cblxuZnVuY3Rpb24gc2F2ZShzdHIsIGlzU3RyaW5nKSB7XG4gIHZhciBpID0gc2F2ZWQubGVuZ3RoO1xuICBzYXZlZFtpXSA9IGlzU3RyaW5nID8gc3RyLnJlcGxhY2UobmV3bGluZVJFLCAnXFxcXG4nKSA6IHN0cjtcbiAgcmV0dXJuICdcIicgKyBpICsgJ1wiJztcbn1cblxuLyoqXG4gKiBQYXRoIHJld3JpdGUgcmVwbGFjZXJcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcmF3XG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gcmV3cml0ZShyYXcpIHtcbiAgdmFyIGMgPSByYXcuY2hhckF0KDApO1xuICB2YXIgcGF0aCA9IHJhdy5zbGljZSgxKTtcbiAgaWYgKGFsbG93ZWRLZXl3b3Jkc1JFLnRlc3QocGF0aCkpIHtcbiAgICByZXR1cm4gcmF3O1xuICB9IGVsc2Uge1xuICAgIHBhdGggPSBwYXRoLmluZGV4T2YoJ1wiJykgPiAtMSA/IHBhdGgucmVwbGFjZShyZXN0b3JlUkUsIHJlc3RvcmUpIDogcGF0aDtcbiAgICByZXR1cm4gYyArICdzY29wZS4nICsgcGF0aDtcbiAgfVxufVxuXG4vKipcbiAqIFJlc3RvcmUgcmVwbGFjZXJcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge1N0cmluZ30gaSAtIG1hdGNoZWQgc2F2ZSBpbmRleFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHJlc3RvcmUoc3RyLCBpKSB7XG4gIHJldHVybiBzYXZlZFtpXTtcbn1cblxuLyoqXG4gKiBSZXdyaXRlIGFuIGV4cHJlc3Npb24sIHByZWZpeGluZyBhbGwgcGF0aCBhY2Nlc3NvcnMgd2l0aFxuICogYHNjb3BlLmAgYW5kIGdlbmVyYXRlIGdldHRlci9zZXR0ZXIgZnVuY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVHZXR0ZXIoZXhwKSB7XG4gIGlmIChpbXByb3BlcktleXdvcmRzUkUudGVzdChleHApKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdBdm9pZCB1c2luZyByZXNlcnZlZCBrZXl3b3JkcyBpbiBleHByZXNzaW9uOiAnICsgZXhwKTtcbiAgfVxuICAvLyByZXNldCBzdGF0ZVxuICBzYXZlZC5sZW5ndGggPSAwO1xuICAvLyBzYXZlIHN0cmluZ3MgYW5kIG9iamVjdCBsaXRlcmFsIGtleXNcbiAgdmFyIGJvZHkgPSBleHAucmVwbGFjZShzYXZlUkUsIHNhdmUpLnJlcGxhY2Uod3NSRSwgJycpO1xuICAvLyByZXdyaXRlIGFsbCBwYXRoc1xuICAvLyBwYWQgMSBzcGFjZSBoZXJlIGJlY2F1c2UgdGhlIHJlZ2V4IG1hdGNoZXMgMSBleHRyYSBjaGFyXG4gIGJvZHkgPSAoJyAnICsgYm9keSkucmVwbGFjZShpZGVudFJFLCByZXdyaXRlKS5yZXBsYWNlKHJlc3RvcmVSRSwgcmVzdG9yZSk7XG4gIHJldHVybiBtYWtlR2V0dGVyRm4oYm9keSk7XG59XG5cbi8qKlxuICogQnVpbGQgYSBnZXR0ZXIgZnVuY3Rpb24uIFJlcXVpcmVzIGV2YWwuXG4gKlxuICogV2UgaXNvbGF0ZSB0aGUgdHJ5L2NhdGNoIHNvIGl0IGRvZXNuJ3QgYWZmZWN0IHRoZVxuICogb3B0aW1pemF0aW9uIG9mIHRoZSBwYXJzZSBmdW5jdGlvbiB3aGVuIGl0IGlzIG5vdCBjYWxsZWQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGJvZHlcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBtYWtlR2V0dGVyRm4oYm9keSkge1xuICB0cnkge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jICovXG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbignc2NvcGUnLCAncmV0dXJuICcgKyBib2R5ICsgJzsnKTtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLW5ldy1mdW5jICovXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoZS50b1N0cmluZygpLm1hdGNoKC91bnNhZmUtZXZhbHxDU1AvKSkge1xuICAgICAgICB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHRoZSBkZWZhdWx0IGJ1aWxkIG9mIFZ1ZS5qcyBpbiBhbiBlbnZpcm9ubWVudCAnICsgJ3dpdGggQ29udGVudCBTZWN1cml0eSBQb2xpY3kgdGhhdCBwcm9oaWJpdHMgdW5zYWZlLWV2YWwuICcgKyAnVXNlIHRoZSBDU1AtY29tcGxpYW50IGJ1aWxkIGluc3RlYWQ6ICcgKyAnaHR0cDovL3Z1ZWpzLm9yZy9ndWlkZS9pbnN0YWxsYXRpb24uaHRtbCNDU1AtY29tcGxpYW50LWJ1aWxkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3YXJuKCdJbnZhbGlkIGV4cHJlc3Npb24uICcgKyAnR2VuZXJhdGVkIGZ1bmN0aW9uIGJvZHk6ICcgKyBib2R5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vb3A7XG4gIH1cbn1cblxuLyoqXG4gKiBDb21waWxlIGEgc2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgZXhwcmVzc2lvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZVNldHRlcihleHApIHtcbiAgdmFyIHBhdGggPSBwYXJzZVBhdGgoZXhwKTtcbiAgaWYgKHBhdGgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCB2YWwpIHtcbiAgICAgIHNldFBhdGgoc2NvcGUsIHBhdGgsIHZhbCk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgc2V0dGVyIGV4cHJlc3Npb246ICcgKyBleHApO1xuICB9XG59XG5cbi8qKlxuICogUGFyc2UgYW4gZXhwcmVzc2lvbiBpbnRvIHJlLXdyaXR0ZW4gZ2V0dGVyL3NldHRlcnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHBhcmFtIHtCb29sZWFufSBuZWVkU2V0XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZUV4cHJlc3Npb24oZXhwLCBuZWVkU2V0KSB7XG4gIGV4cCA9IGV4cC50cmltKCk7XG4gIC8vIHRyeSBjYWNoZVxuICB2YXIgaGl0ID0gZXhwcmVzc2lvbkNhY2hlLmdldChleHApO1xuICBpZiAoaGl0KSB7XG4gICAgaWYgKG5lZWRTZXQgJiYgIWhpdC5zZXQpIHtcbiAgICAgIGhpdC5zZXQgPSBjb21waWxlU2V0dGVyKGhpdC5leHApO1xuICAgIH1cbiAgICByZXR1cm4gaGl0O1xuICB9XG4gIHZhciByZXMgPSB7IGV4cDogZXhwIH07XG4gIHJlcy5nZXQgPSBpc1NpbXBsZVBhdGgoZXhwKSAmJiBleHAuaW5kZXhPZignWycpIDwgMFxuICAvLyBvcHRpbWl6ZWQgc3VwZXIgc2ltcGxlIGdldHRlclxuICA/IG1ha2VHZXR0ZXJGbignc2NvcGUuJyArIGV4cClcbiAgLy8gZHluYW1pYyBnZXR0ZXJcbiAgOiBjb21waWxlR2V0dGVyKGV4cCk7XG4gIGlmIChuZWVkU2V0KSB7XG4gICAgcmVzLnNldCA9IGNvbXBpbGVTZXR0ZXIoZXhwKTtcbiAgfVxuICBleHByZXNzaW9uQ2FjaGUucHV0KGV4cCwgcmVzKTtcbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBleHByZXNzaW9uIGlzIGEgc2ltcGxlIHBhdGguXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc1NpbXBsZVBhdGgoZXhwKSB7XG4gIHJldHVybiBwYXRoVGVzdFJFLnRlc3QoZXhwKSAmJlxuICAvLyBkb24ndCB0cmVhdCBsaXRlcmFsIHZhbHVlcyBhcyBwYXRoc1xuICAhbGl0ZXJhbFZhbHVlUkUkMS50ZXN0KGV4cCkgJiZcbiAgLy8gTWF0aCBjb25zdGFudHMgZS5nLiBNYXRoLlBJLCBNYXRoLkUgZXRjLlxuICBleHAuc2xpY2UoMCwgNSkgIT09ICdNYXRoLic7XG59XG5cbnZhciBleHByZXNzaW9uID0gT2JqZWN0LmZyZWV6ZSh7XG4gIHBhcnNlRXhwcmVzc2lvbjogcGFyc2VFeHByZXNzaW9uLFxuICBpc1NpbXBsZVBhdGg6IGlzU2ltcGxlUGF0aFxufSk7XG5cbi8vIHdlIGhhdmUgdHdvIHNlcGFyYXRlIHF1ZXVlczogb25lIGZvciBkaXJlY3RpdmUgdXBkYXRlc1xuLy8gYW5kIG9uZSBmb3IgdXNlciB3YXRjaGVyIHJlZ2lzdGVyZWQgdmlhICR3YXRjaCgpLlxuLy8gd2Ugd2FudCB0byBndWFyYW50ZWUgZGlyZWN0aXZlIHVwZGF0ZXMgdG8gYmUgY2FsbGVkXG4vLyBiZWZvcmUgdXNlciB3YXRjaGVycyBzbyB0aGF0IHdoZW4gdXNlciB3YXRjaGVycyBhcmVcbi8vIHRyaWdnZXJlZCwgdGhlIERPTSB3b3VsZCBoYXZlIGFscmVhZHkgYmVlbiBpbiB1cGRhdGVkXG4vLyBzdGF0ZS5cblxudmFyIHF1ZXVlID0gW107XG52YXIgdXNlclF1ZXVlID0gW107XG52YXIgaGFzID0ge307XG52YXIgY2lyY3VsYXIgPSB7fTtcbnZhciB3YWl0aW5nID0gZmFsc2U7XG5cbi8qKlxuICogUmVzZXQgdGhlIGJhdGNoZXIncyBzdGF0ZS5cbiAqL1xuXG5mdW5jdGlvbiByZXNldEJhdGNoZXJTdGF0ZSgpIHtcbiAgcXVldWUubGVuZ3RoID0gMDtcbiAgdXNlclF1ZXVlLmxlbmd0aCA9IDA7XG4gIGhhcyA9IHt9O1xuICBjaXJjdWxhciA9IHt9O1xuICB3YWl0aW5nID0gZmFsc2U7XG59XG5cbi8qKlxuICogRmx1c2ggYm90aCBxdWV1ZXMgYW5kIHJ1biB0aGUgd2F0Y2hlcnMuXG4gKi9cblxuZnVuY3Rpb24gZmx1c2hCYXRjaGVyUXVldWUoKSB7XG4gIHZhciBfYWdhaW4gPSB0cnVlO1xuXG4gIF9mdW5jdGlvbjogd2hpbGUgKF9hZ2Fpbikge1xuICAgIF9hZ2FpbiA9IGZhbHNlO1xuXG4gICAgcnVuQmF0Y2hlclF1ZXVlKHF1ZXVlKTtcbiAgICBydW5CYXRjaGVyUXVldWUodXNlclF1ZXVlKTtcbiAgICAvLyB1c2VyIHdhdGNoZXJzIHRyaWdnZXJlZCBtb3JlIHdhdGNoZXJzLFxuICAgIC8vIGtlZXAgZmx1c2hpbmcgdW50aWwgaXQgZGVwbGV0ZXNcbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICBfYWdhaW4gPSB0cnVlO1xuICAgICAgY29udGludWUgX2Z1bmN0aW9uO1xuICAgIH1cbiAgICAvLyBkZXYgdG9vbCBob29rXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKGRldnRvb2xzICYmIGNvbmZpZy5kZXZ0b29scykge1xuICAgICAgZGV2dG9vbHMuZW1pdCgnZmx1c2gnKTtcbiAgICB9XG4gICAgcmVzZXRCYXRjaGVyU3RhdGUoKTtcbiAgfVxufVxuXG4vKipcbiAqIFJ1biB0aGUgd2F0Y2hlcnMgaW4gYSBzaW5nbGUgcXVldWUuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gcXVldWVcbiAqL1xuXG5mdW5jdGlvbiBydW5CYXRjaGVyUXVldWUocXVldWUpIHtcbiAgLy8gZG8gbm90IGNhY2hlIGxlbmd0aCBiZWNhdXNlIG1vcmUgd2F0Y2hlcnMgbWlnaHQgYmUgcHVzaGVkXG4gIC8vIGFzIHdlIHJ1biBleGlzdGluZyB3YXRjaGVyc1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHdhdGNoZXIgPSBxdWV1ZVtpXTtcbiAgICB2YXIgaWQgPSB3YXRjaGVyLmlkO1xuICAgIGhhc1tpZF0gPSBudWxsO1xuICAgIHdhdGNoZXIucnVuKCk7XG4gICAgLy8gaW4gZGV2IGJ1aWxkLCBjaGVjayBhbmQgc3RvcCBjaXJjdWxhciB1cGRhdGVzLlxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGhhc1tpZF0gIT0gbnVsbCkge1xuICAgICAgY2lyY3VsYXJbaWRdID0gKGNpcmN1bGFyW2lkXSB8fCAwKSArIDE7XG4gICAgICBpZiAoY2lyY3VsYXJbaWRdID4gY29uZmlnLl9tYXhVcGRhdGVDb3VudCkge1xuICAgICAgICB3YXJuKCdZb3UgbWF5IGhhdmUgYW4gaW5maW5pdGUgdXBkYXRlIGxvb3AgZm9yIHdhdGNoZXIgJyArICd3aXRoIGV4cHJlc3Npb24gXCInICsgd2F0Y2hlci5leHByZXNzaW9uICsgJ1wiJywgd2F0Y2hlci52bSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBxdWV1ZS5sZW5ndGggPSAwO1xufVxuXG4vKipcbiAqIFB1c2ggYSB3YXRjaGVyIGludG8gdGhlIHdhdGNoZXIgcXVldWUuXG4gKiBKb2JzIHdpdGggZHVwbGljYXRlIElEcyB3aWxsIGJlIHNraXBwZWQgdW5sZXNzIGl0J3NcbiAqIHB1c2hlZCB3aGVuIHRoZSBxdWV1ZSBpcyBiZWluZyBmbHVzaGVkLlxuICpcbiAqIEBwYXJhbSB7V2F0Y2hlcn0gd2F0Y2hlclxuICogICBwcm9wZXJ0aWVzOlxuICogICAtIHtOdW1iZXJ9IGlkXG4gKiAgIC0ge0Z1bmN0aW9ufSBydW5cbiAqL1xuXG5mdW5jdGlvbiBwdXNoV2F0Y2hlcih3YXRjaGVyKSB7XG4gIHZhciBpZCA9IHdhdGNoZXIuaWQ7XG4gIGlmIChoYXNbaWRdID09IG51bGwpIHtcbiAgICAvLyBwdXNoIHdhdGNoZXIgaW50byBhcHByb3ByaWF0ZSBxdWV1ZVxuICAgIHZhciBxID0gd2F0Y2hlci51c2VyID8gdXNlclF1ZXVlIDogcXVldWU7XG4gICAgaGFzW2lkXSA9IHEubGVuZ3RoO1xuICAgIHEucHVzaCh3YXRjaGVyKTtcbiAgICAvLyBxdWV1ZSB0aGUgZmx1c2hcbiAgICBpZiAoIXdhaXRpbmcpIHtcbiAgICAgIHdhaXRpbmcgPSB0cnVlO1xuICAgICAgbmV4dFRpY2soZmx1c2hCYXRjaGVyUXVldWUpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgdWlkJDIgPSAwO1xuXG4vKipcbiAqIEEgd2F0Y2hlciBwYXJzZXMgYW4gZXhwcmVzc2lvbiwgY29sbGVjdHMgZGVwZW5kZW5jaWVzLFxuICogYW5kIGZpcmVzIGNhbGxiYWNrIHdoZW4gdGhlIGV4cHJlc3Npb24gdmFsdWUgY2hhbmdlcy5cbiAqIFRoaXMgaXMgdXNlZCBmb3IgYm90aCB0aGUgJHdhdGNoKCkgYXBpIGFuZCBkaXJlY3RpdmVzLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IGV4cE9yRm5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogICAgICAgICAgICAgICAgIC0ge0FycmF5fSBmaWx0ZXJzXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gdHdvV2F5XG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gZGVlcFxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHVzZXJcbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBzeW5jXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gbGF6eVxuICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbcHJlUHJvY2Vzc11cbiAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW3Bvc3RQcm9jZXNzXVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCBvcHRpb25zKSB7XG4gIC8vIG1peCBpbiBvcHRpb25zXG4gIGlmIChvcHRpb25zKSB7XG4gICAgZXh0ZW5kKHRoaXMsIG9wdGlvbnMpO1xuICB9XG4gIHZhciBpc0ZuID0gdHlwZW9mIGV4cE9yRm4gPT09ICdmdW5jdGlvbic7XG4gIHRoaXMudm0gPSB2bTtcbiAgdm0uX3dhdGNoZXJzLnB1c2godGhpcyk7XG4gIHRoaXMuZXhwcmVzc2lvbiA9IGV4cE9yRm47XG4gIHRoaXMuY2IgPSBjYjtcbiAgdGhpcy5pZCA9ICsrdWlkJDI7IC8vIHVpZCBmb3IgYmF0Y2hpbmdcbiAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICB0aGlzLmRpcnR5ID0gdGhpcy5sYXp5OyAvLyBmb3IgbGF6eSB3YXRjaGVyc1xuICB0aGlzLmRlcHMgPSBbXTtcbiAgdGhpcy5uZXdEZXBzID0gW107XG4gIHRoaXMuZGVwSWRzID0gbmV3IF9TZXQoKTtcbiAgdGhpcy5uZXdEZXBJZHMgPSBuZXcgX1NldCgpO1xuICB0aGlzLnByZXZFcnJvciA9IG51bGw7IC8vIGZvciBhc3luYyBlcnJvciBzdGFja3NcbiAgLy8gcGFyc2UgZXhwcmVzc2lvbiBmb3IgZ2V0dGVyL3NldHRlclxuICBpZiAoaXNGbikge1xuICAgIHRoaXMuZ2V0dGVyID0gZXhwT3JGbjtcbiAgICB0aGlzLnNldHRlciA9IHVuZGVmaW5lZDtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cE9yRm4sIHRoaXMudHdvV2F5KTtcbiAgICB0aGlzLmdldHRlciA9IHJlcy5nZXQ7XG4gICAgdGhpcy5zZXR0ZXIgPSByZXMuc2V0O1xuICB9XG4gIHRoaXMudmFsdWUgPSB0aGlzLmxhenkgPyB1bmRlZmluZWQgOiB0aGlzLmdldCgpO1xuICAvLyBzdGF0ZSBmb3IgYXZvaWRpbmcgZmFsc2UgdHJpZ2dlcnMgZm9yIGRlZXAgYW5kIEFycmF5XG4gIC8vIHdhdGNoZXJzIGR1cmluZyB2bS5fZGlnZXN0KClcbiAgdGhpcy5xdWV1ZWQgPSB0aGlzLnNoYWxsb3cgPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBFdmFsdWF0ZSB0aGUgZ2V0dGVyLCBhbmQgcmUtY29sbGVjdCBkZXBlbmRlbmNpZXMuXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmJlZm9yZUdldCgpO1xuICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm07XG4gIHZhciB2YWx1ZTtcbiAgdHJ5IHtcbiAgICB2YWx1ZSA9IHRoaXMuZ2V0dGVyLmNhbGwoc2NvcGUsIHNjb3BlKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy53YXJuRXhwcmVzc2lvbkVycm9ycykge1xuICAgICAgd2FybignRXJyb3Igd2hlbiBldmFsdWF0aW5nIGV4cHJlc3Npb24gJyArICdcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCI6ICcgKyBlLnRvU3RyaW5nKCksIHRoaXMudm0pO1xuICAgIH1cbiAgfVxuICAvLyBcInRvdWNoXCIgZXZlcnkgcHJvcGVydHkgc28gdGhleSBhcmUgYWxsIHRyYWNrZWQgYXNcbiAgLy8gZGVwZW5kZW5jaWVzIGZvciBkZWVwIHdhdGNoaW5nXG4gIGlmICh0aGlzLmRlZXApIHtcbiAgICB0cmF2ZXJzZSh2YWx1ZSk7XG4gIH1cbiAgaWYgKHRoaXMucHJlUHJvY2Vzcykge1xuICAgIHZhbHVlID0gdGhpcy5wcmVQcm9jZXNzKHZhbHVlKTtcbiAgfVxuICBpZiAodGhpcy5maWx0ZXJzKSB7XG4gICAgdmFsdWUgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKHZhbHVlLCBudWxsLCB0aGlzLmZpbHRlcnMsIGZhbHNlKTtcbiAgfVxuICBpZiAodGhpcy5wb3N0UHJvY2Vzcykge1xuICAgIHZhbHVlID0gdGhpcy5wb3N0UHJvY2Vzcyh2YWx1ZSk7XG4gIH1cbiAgdGhpcy5hZnRlckdldCgpO1xuICByZXR1cm4gdmFsdWU7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSB3aXRoIHRoZSBzZXR0ZXIuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm07XG4gIGlmICh0aGlzLmZpbHRlcnMpIHtcbiAgICB2YWx1ZSA9IHNjb3BlLl9hcHBseUZpbHRlcnModmFsdWUsIHRoaXMudmFsdWUsIHRoaXMuZmlsdGVycywgdHJ1ZSk7XG4gIH1cbiAgdHJ5IHtcbiAgICB0aGlzLnNldHRlci5jYWxsKHNjb3BlLCBzY29wZSwgdmFsdWUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLndhcm5FeHByZXNzaW9uRXJyb3JzKSB7XG4gICAgICB3YXJuKCdFcnJvciB3aGVuIGV2YWx1YXRpbmcgc2V0dGVyICcgKyAnXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiOiAnICsgZS50b1N0cmluZygpLCB0aGlzLnZtKTtcbiAgICB9XG4gIH1cbiAgLy8gdHdvLXdheSBzeW5jIGZvciB2LWZvciBhbGlhc1xuICB2YXIgZm9yQ29udGV4dCA9IHNjb3BlLiRmb3JDb250ZXh0O1xuICBpZiAoZm9yQ29udGV4dCAmJiBmb3JDb250ZXh0LmFsaWFzID09PSB0aGlzLmV4cHJlc3Npb24pIHtcbiAgICBpZiAoZm9yQ29udGV4dC5maWx0ZXJzKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgdHdvLXdheSBiaW5kaW5nIG9uICcgKyAnYSB2LWZvciBhbGlhcyAoJyArIHRoaXMuZXhwcmVzc2lvbiArICcpLCBhbmQgdGhlICcgKyAndi1mb3IgaGFzIGZpbHRlcnMuIFRoaXMgd2lsbCBub3Qgd29yayBwcm9wZXJseS4gJyArICdFaXRoZXIgcmVtb3ZlIHRoZSBmaWx0ZXJzIG9yIHVzZSBhbiBhcnJheSBvZiAnICsgJ29iamVjdHMgYW5kIGJpbmQgdG8gb2JqZWN0IHByb3BlcnRpZXMgaW5zdGVhZC4nLCB0aGlzLnZtKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yQ29udGV4dC5fd2l0aExvY2soZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHNjb3BlLiRrZXkpIHtcbiAgICAgICAgLy8gb3JpZ2luYWwgaXMgYW4gb2JqZWN0XG4gICAgICAgIGZvckNvbnRleHQucmF3VmFsdWVbc2NvcGUuJGtleV0gPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvckNvbnRleHQucmF3VmFsdWUuJHNldChzY29wZS4kaW5kZXgsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufTtcblxuLyoqXG4gKiBQcmVwYXJlIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuYmVmb3JlR2V0ID0gZnVuY3Rpb24gKCkge1xuICBEZXAudGFyZ2V0ID0gdGhpcztcbn07XG5cbi8qKlxuICogQWRkIGEgZGVwZW5kZW5jeSB0byB0aGlzIGRpcmVjdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge0RlcH0gZGVwXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuYWRkRGVwID0gZnVuY3Rpb24gKGRlcCkge1xuICB2YXIgaWQgPSBkZXAuaWQ7XG4gIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGlkKSkge1xuICAgIHRoaXMubmV3RGVwSWRzLmFkZChpZCk7XG4gICAgdGhpcy5uZXdEZXBzLnB1c2goZGVwKTtcbiAgICBpZiAoIXRoaXMuZGVwSWRzLmhhcyhpZCkpIHtcbiAgICAgIGRlcC5hZGRTdWIodGhpcyk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIENsZWFuIHVwIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuYWZ0ZXJHZXQgPSBmdW5jdGlvbiAoKSB7XG4gIERlcC50YXJnZXQgPSBudWxsO1xuICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICB2YXIgZGVwID0gdGhpcy5kZXBzW2ldO1xuICAgIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGRlcC5pZCkpIHtcbiAgICAgIGRlcC5yZW1vdmVTdWIodGhpcyk7XG4gICAgfVxuICB9XG4gIHZhciB0bXAgPSB0aGlzLmRlcElkcztcbiAgdGhpcy5kZXBJZHMgPSB0aGlzLm5ld0RlcElkcztcbiAgdGhpcy5uZXdEZXBJZHMgPSB0bXA7XG4gIHRoaXMubmV3RGVwSWRzLmNsZWFyKCk7XG4gIHRtcCA9IHRoaXMuZGVwcztcbiAgdGhpcy5kZXBzID0gdGhpcy5uZXdEZXBzO1xuICB0aGlzLm5ld0RlcHMgPSB0bXA7XG4gIHRoaXMubmV3RGVwcy5sZW5ndGggPSAwO1xufTtcblxuLyoqXG4gKiBTdWJzY3JpYmVyIGludGVyZmFjZS5cbiAqIFdpbGwgYmUgY2FsbGVkIHdoZW4gYSBkZXBlbmRlbmN5IGNoYW5nZXMuXG4gKlxuICogQHBhcmFtIHtCb29sZWFufSBzaGFsbG93XG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHNoYWxsb3cpIHtcbiAgaWYgKHRoaXMubGF6eSkge1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICB9IGVsc2UgaWYgKHRoaXMuc3luYyB8fCAhY29uZmlnLmFzeW5jKSB7XG4gICAgdGhpcy5ydW4oKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBpZiBxdWV1ZWQsIG9ubHkgb3ZlcndyaXRlIHNoYWxsb3cgd2l0aCBub24tc2hhbGxvdyxcbiAgICAvLyBidXQgbm90IHRoZSBvdGhlciB3YXkgYXJvdW5kLlxuICAgIHRoaXMuc2hhbGxvdyA9IHRoaXMucXVldWVkID8gc2hhbGxvdyA/IHRoaXMuc2hhbGxvdyA6IGZhbHNlIDogISFzaGFsbG93O1xuICAgIHRoaXMucXVldWVkID0gdHJ1ZTtcbiAgICAvLyByZWNvcmQgYmVmb3JlLXB1c2ggZXJyb3Igc3RhY2sgaW4gZGVidWcgbW9kZVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5kZWJ1Zykge1xuICAgICAgdGhpcy5wcmV2RXJyb3IgPSBuZXcgRXJyb3IoJ1t2dWVdIGFzeW5jIHN0YWNrIHRyYWNlJyk7XG4gICAgfVxuICAgIHB1c2hXYXRjaGVyKHRoaXMpO1xuICB9XG59O1xuXG4vKipcbiAqIEJhdGNoZXIgam9iIGludGVyZmFjZS5cbiAqIFdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBiYXRjaGVyLlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgdmFyIHZhbHVlID0gdGhpcy5nZXQoKTtcbiAgICBpZiAodmFsdWUgIT09IHRoaXMudmFsdWUgfHxcbiAgICAvLyBEZWVwIHdhdGNoZXJzIGFuZCB3YXRjaGVycyBvbiBPYmplY3QvQXJyYXlzIHNob3VsZCBmaXJlIGV2ZW5cbiAgICAvLyB3aGVuIHRoZSB2YWx1ZSBpcyB0aGUgc2FtZSwgYmVjYXVzZSB0aGUgdmFsdWUgbWF5XG4gICAgLy8gaGF2ZSBtdXRhdGVkOyBidXQgb25seSBkbyBzbyBpZiB0aGlzIGlzIGFcbiAgICAvLyBub24tc2hhbGxvdyB1cGRhdGUgKGNhdXNlZCBieSBhIHZtIGRpZ2VzdCkuXG4gICAgKGlzT2JqZWN0KHZhbHVlKSB8fCB0aGlzLmRlZXApICYmICF0aGlzLnNoYWxsb3cpIHtcbiAgICAgIC8vIHNldCBuZXcgdmFsdWVcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAvLyBpbiBkZWJ1ZyArIGFzeW5jIG1vZGUsIHdoZW4gYSB3YXRjaGVyIGNhbGxiYWNrc1xuICAgICAgLy8gdGhyb3dzLCB3ZSBhbHNvIHRocm93IHRoZSBzYXZlZCBiZWZvcmUtcHVzaCBlcnJvclxuICAgICAgLy8gc28gdGhlIGZ1bGwgY3Jvc3MtdGljayBzdGFjayB0cmFjZSBpcyBhdmFpbGFibGUuXG4gICAgICB2YXIgcHJldkVycm9yID0gdGhpcy5wcmV2RXJyb3I7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5kZWJ1ZyAmJiBwcmV2RXJyb3IpIHtcbiAgICAgICAgdGhpcy5wcmV2RXJyb3IgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhyb3cgcHJldkVycm9yO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnF1ZXVlZCA9IHRoaXMuc2hhbGxvdyA9IGZhbHNlO1xuICB9XG59O1xuXG4vKipcbiAqIEV2YWx1YXRlIHRoZSB2YWx1ZSBvZiB0aGUgd2F0Y2hlci5cbiAqIFRoaXMgb25seSBnZXRzIGNhbGxlZCBmb3IgbGF6eSB3YXRjaGVycy5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gYXZvaWQgb3ZlcndyaXRpbmcgYW5vdGhlciB3YXRjaGVyIHRoYXQgaXMgYmVpbmdcbiAgLy8gY29sbGVjdGVkLlxuICB2YXIgY3VycmVudCA9IERlcC50YXJnZXQ7XG4gIHRoaXMudmFsdWUgPSB0aGlzLmdldCgpO1xuICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gIERlcC50YXJnZXQgPSBjdXJyZW50O1xufTtcblxuLyoqXG4gKiBEZXBlbmQgb24gYWxsIGRlcHMgY29sbGVjdGVkIGJ5IHRoaXMgd2F0Y2hlci5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5kZXBlbmQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIHRoaXMuZGVwc1tpXS5kZXBlbmQoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZW1vdmUgc2VsZiBmcm9tIGFsbCBkZXBlbmRlbmNpZXMnIHN1YmNyaWJlciBsaXN0LlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLnRlYXJkb3duID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHZtJ3Mgd2F0Y2hlciBsaXN0XG4gICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGV4cGVuc2l2ZSBvcGVyYXRpb24gc28gd2Ugc2tpcCBpdFxuICAgIC8vIGlmIHRoZSB2bSBpcyBiZWluZyBkZXN0cm95ZWQgb3IgaXMgcGVyZm9ybWluZyBhIHYtZm9yXG4gICAgLy8gcmUtcmVuZGVyICh0aGUgd2F0Y2hlciBsaXN0IGlzIHRoZW4gZmlsdGVyZWQgYnkgdi1mb3IpLlxuICAgIGlmICghdGhpcy52bS5faXNCZWluZ0Rlc3Ryb3llZCAmJiAhdGhpcy52bS5fdkZvclJlbW92aW5nKSB7XG4gICAgICB0aGlzLnZtLl93YXRjaGVycy4kcmVtb3ZlKHRoaXMpO1xuICAgIH1cbiAgICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdGhpcy5kZXBzW2ldLnJlbW92ZVN1Yih0aGlzKTtcbiAgICB9XG4gICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLnZtID0gdGhpcy5jYiA9IHRoaXMudmFsdWUgPSBudWxsO1xuICB9XG59O1xuXG4vKipcbiAqIFJlY3J1c2l2ZWx5IHRyYXZlcnNlIGFuIG9iamVjdCB0byBldm9rZSBhbGwgY29udmVydGVkXG4gKiBnZXR0ZXJzLCBzbyB0aGF0IGV2ZXJ5IG5lc3RlZCBwcm9wZXJ0eSBpbnNpZGUgdGhlIG9iamVjdFxuICogaXMgY29sbGVjdGVkIGFzIGEgXCJkZWVwXCIgZGVwZW5kZW5jeS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5cbnZhciBzZWVuT2JqZWN0cyA9IG5ldyBfU2V0KCk7XG5mdW5jdGlvbiB0cmF2ZXJzZSh2YWwsIHNlZW4pIHtcbiAgdmFyIGkgPSB1bmRlZmluZWQsXG4gICAgICBrZXlzID0gdW5kZWZpbmVkO1xuICBpZiAoIXNlZW4pIHtcbiAgICBzZWVuID0gc2Vlbk9iamVjdHM7XG4gICAgc2Vlbi5jbGVhcigpO1xuICB9XG4gIHZhciBpc0EgPSBpc0FycmF5KHZhbCk7XG4gIHZhciBpc08gPSBpc09iamVjdCh2YWwpO1xuICBpZiAoKGlzQSB8fCBpc08pICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsKSkge1xuICAgIGlmICh2YWwuX19vYl9fKSB7XG4gICAgICB2YXIgZGVwSWQgPSB2YWwuX19vYl9fLmRlcC5pZDtcbiAgICAgIGlmIChzZWVuLmhhcyhkZXBJZCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2Vlbi5hZGQoZGVwSWQpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNBKSB7XG4gICAgICBpID0gdmFsLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHRyYXZlcnNlKHZhbFtpXSwgc2Vlbik7XG4gICAgfSBlbHNlIGlmIChpc08pIHtcbiAgICAgIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xuICAgICAgaSA9IGtleXMubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkgdHJhdmVyc2UodmFsW2tleXNbaV1dLCBzZWVuKTtcbiAgICB9XG4gIH1cbn1cblxudmFyIHRleHQkMSA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHRoaXMuYXR0ciA9IHRoaXMuZWwubm9kZVR5cGUgPT09IDMgPyAnZGF0YScgOiAndGV4dENvbnRlbnQnO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdGhpcy5lbFt0aGlzLmF0dHJdID0gX3RvU3RyaW5nKHZhbHVlKTtcbiAgfVxufTtcblxudmFyIHRlbXBsYXRlQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG52YXIgaWRTZWxlY3RvckNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXG52YXIgbWFwID0ge1xuICBlZmF1bHQ6IFswLCAnJywgJyddLFxuICBsZWdlbmQ6IFsxLCAnPGZpZWxkc2V0PicsICc8L2ZpZWxkc2V0PiddLFxuICB0cjogWzIsICc8dGFibGU+PHRib2R5PicsICc8L3Rib2R5PjwvdGFibGU+J10sXG4gIGNvbDogWzIsICc8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPicsICc8L2NvbGdyb3VwPjwvdGFibGU+J11cbn07XG5cbm1hcC50ZCA9IG1hcC50aCA9IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddO1xuXG5tYXAub3B0aW9uID0gbWFwLm9wdGdyb3VwID0gWzEsICc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLCAnPC9zZWxlY3Q+J107XG5cbm1hcC50aGVhZCA9IG1hcC50Ym9keSA9IG1hcC5jb2xncm91cCA9IG1hcC5jYXB0aW9uID0gbWFwLnRmb290ID0gWzEsICc8dGFibGU+JywgJzwvdGFibGU+J107XG5cbm1hcC5nID0gbWFwLmRlZnMgPSBtYXAuc3ltYm9sID0gbWFwLnVzZSA9IG1hcC5pbWFnZSA9IG1hcC50ZXh0ID0gbWFwLmNpcmNsZSA9IG1hcC5lbGxpcHNlID0gbWFwLmxpbmUgPSBtYXAucGF0aCA9IG1hcC5wb2x5Z29uID0gbWFwLnBvbHlsaW5lID0gbWFwLnJlY3QgPSBbMSwgJzxzdmcgJyArICd4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgJyArICd4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiAnICsgJ3htbG5zOmV2PVwiaHR0cDovL3d3dy53My5vcmcvMjAwMS94bWwtZXZlbnRzXCInICsgJ3ZlcnNpb249XCIxLjFcIj4nLCAnPC9zdmc+J107XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBub2RlIGlzIGEgc3VwcG9ydGVkIHRlbXBsYXRlIG5vZGUgd2l0aCBhXG4gKiBEb2N1bWVudEZyYWdtZW50IGNvbnRlbnQuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzUmVhbFRlbXBsYXRlKG5vZGUpIHtcbiAgcmV0dXJuIGlzVGVtcGxhdGUobm9kZSkgJiYgaXNGcmFnbWVudChub2RlLmNvbnRlbnQpO1xufVxuXG52YXIgdGFnUkUkMSA9IC88KFtcXHc6LV0rKS87XG52YXIgZW50aXR5UkUgPSAvJiM/XFx3Kz87LztcbnZhciBjb21tZW50UkUgPSAvPCEtLS87XG5cbi8qKlxuICogQ29udmVydCBhIHN0cmluZyB0ZW1wbGF0ZSB0byBhIERvY3VtZW50RnJhZ21lbnQuXG4gKiBEZXRlcm1pbmVzIGNvcnJlY3Qgd3JhcHBpbmcgYnkgdGFnIHR5cGVzLiBXcmFwcGluZ1xuICogc3RyYXRlZ3kgZm91bmQgaW4galF1ZXJ5ICYgY29tcG9uZW50L2RvbWlmeS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdGVtcGxhdGVTdHJpbmdcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcmF3XG4gKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIHN0cmluZ1RvRnJhZ21lbnQodGVtcGxhdGVTdHJpbmcsIHJhdykge1xuICAvLyB0cnkgYSBjYWNoZSBoaXQgZmlyc3RcbiAgdmFyIGNhY2hlS2V5ID0gcmF3ID8gdGVtcGxhdGVTdHJpbmcgOiB0ZW1wbGF0ZVN0cmluZy50cmltKCk7XG4gIHZhciBoaXQgPSB0ZW1wbGF0ZUNhY2hlLmdldChjYWNoZUtleSk7XG4gIGlmIChoaXQpIHtcbiAgICByZXR1cm4gaGl0O1xuICB9XG5cbiAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIHZhciB0YWdNYXRjaCA9IHRlbXBsYXRlU3RyaW5nLm1hdGNoKHRhZ1JFJDEpO1xuICB2YXIgZW50aXR5TWF0Y2ggPSBlbnRpdHlSRS50ZXN0KHRlbXBsYXRlU3RyaW5nKTtcbiAgdmFyIGNvbW1lbnRNYXRjaCA9IGNvbW1lbnRSRS50ZXN0KHRlbXBsYXRlU3RyaW5nKTtcblxuICBpZiAoIXRhZ01hdGNoICYmICFlbnRpdHlNYXRjaCAmJiAhY29tbWVudE1hdGNoKSB7XG4gICAgLy8gdGV4dCBvbmx5LCByZXR1cm4gYSBzaW5nbGUgdGV4dCBub2RlLlxuICAgIGZyYWcuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGVtcGxhdGVTdHJpbmcpKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFnID0gdGFnTWF0Y2ggJiYgdGFnTWF0Y2hbMV07XG4gICAgdmFyIHdyYXAgPSBtYXBbdGFnXSB8fCBtYXAuZWZhdWx0O1xuICAgIHZhciBkZXB0aCA9IHdyYXBbMF07XG4gICAgdmFyIHByZWZpeCA9IHdyYXBbMV07XG4gICAgdmFyIHN1ZmZpeCA9IHdyYXBbMl07XG4gICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIG5vZGUuaW5uZXJIVE1MID0gcHJlZml4ICsgdGVtcGxhdGVTdHJpbmcgKyBzdWZmaXg7XG4gICAgd2hpbGUgKGRlcHRoLS0pIHtcbiAgICAgIG5vZGUgPSBub2RlLmxhc3RDaGlsZDtcbiAgICB9XG5cbiAgICB2YXIgY2hpbGQ7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICB3aGlsZSAoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICAgIGZyYWcuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgIH1cbiAgfVxuICBpZiAoIXJhdykge1xuICAgIHRyaW1Ob2RlKGZyYWcpO1xuICB9XG4gIHRlbXBsYXRlQ2FjaGUucHV0KGNhY2hlS2V5LCBmcmFnKTtcbiAgcmV0dXJuIGZyYWc7XG59XG5cbi8qKlxuICogQ29udmVydCBhIHRlbXBsYXRlIG5vZGUgdG8gYSBEb2N1bWVudEZyYWdtZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBub2RlVG9GcmFnbWVudChub2RlKSB7XG4gIC8vIGlmIGl0cyBhIHRlbXBsYXRlIHRhZyBhbmQgdGhlIGJyb3dzZXIgc3VwcG9ydHMgaXQsXG4gIC8vIGl0cyBjb250ZW50IGlzIGFscmVhZHkgYSBkb2N1bWVudCBmcmFnbWVudC4gSG93ZXZlciwgaU9TIFNhZmFyaSBoYXNcbiAgLy8gYnVnIHdoZW4gdXNpbmcgZGlyZWN0bHkgY2xvbmVkIHRlbXBsYXRlIGNvbnRlbnQgd2l0aCB0b3VjaFxuICAvLyBldmVudHMgYW5kIGNhbiBjYXVzZSBjcmFzaGVzIHdoZW4gdGhlIG5vZGVzIGFyZSByZW1vdmVkIGZyb20gRE9NLCBzbyB3ZVxuICAvLyBoYXZlIHRvIHRyZWF0IHRlbXBsYXRlIGVsZW1lbnRzIGFzIHN0cmluZyB0ZW1wbGF0ZXMuICgjMjgwNSlcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChpc1JlYWxUZW1wbGF0ZShub2RlKSkge1xuICAgIHJldHVybiBzdHJpbmdUb0ZyYWdtZW50KG5vZGUuaW5uZXJIVE1MKTtcbiAgfVxuICAvLyBzY3JpcHQgdGVtcGxhdGVcbiAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ1NDUklQVCcpIHtcbiAgICByZXR1cm4gc3RyaW5nVG9GcmFnbWVudChub2RlLnRleHRDb250ZW50KTtcbiAgfVxuICAvLyBub3JtYWwgbm9kZSwgY2xvbmUgaXQgdG8gYXZvaWQgbXV0YXRpbmcgdGhlIG9yaWdpbmFsXG4gIHZhciBjbG9uZWROb2RlID0gY2xvbmVOb2RlKG5vZGUpO1xuICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgdmFyIGNoaWxkO1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICB3aGlsZSAoY2hpbGQgPSBjbG9uZWROb2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgZnJhZy5hcHBlbmRDaGlsZChjaGlsZCk7XG4gIH1cbiAgdHJpbU5vZGUoZnJhZyk7XG4gIHJldHVybiBmcmFnO1xufVxuXG4vLyBUZXN0IGZvciB0aGUgcHJlc2VuY2Ugb2YgdGhlIFNhZmFyaSB0ZW1wbGF0ZSBjbG9uaW5nIGJ1Z1xuLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd3VnLmNnaT9pZD0xMzc3NTVcbnZhciBoYXNCcm9rZW5UZW1wbGF0ZSA9IChmdW5jdGlvbiAoKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChpbkJyb3dzZXIpIHtcbiAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGEuaW5uZXJIVE1MID0gJzx0ZW1wbGF0ZT4xPC90ZW1wbGF0ZT4nO1xuICAgIHJldHVybiAhYS5jbG9uZU5vZGUodHJ1ZSkuZmlyc3RDaGlsZC5pbm5lckhUTUw7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59KSgpO1xuXG4vLyBUZXN0IGZvciBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGNsb25lIGJ1Z1xudmFyIGhhc1RleHRhcmVhQ2xvbmVCdWcgPSAoZnVuY3Rpb24gKCkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAoaW5Ccm93c2VyKSB7XG4gICAgdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgIHQucGxhY2Vob2xkZXIgPSAndCc7XG4gICAgcmV0dXJuIHQuY2xvbmVOb2RlKHRydWUpLnZhbHVlID09PSAndCc7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59KSgpO1xuXG4vKipcbiAqIDEuIERlYWwgd2l0aCBTYWZhcmkgY2xvbmluZyBuZXN0ZWQgPHRlbXBsYXRlPiBidWcgYnlcbiAqICAgIG1hbnVhbGx5IGNsb25pbmcgYWxsIHRlbXBsYXRlIGluc3RhbmNlcy5cbiAqIDIuIERlYWwgd2l0aCBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGJ1ZyBieSBzZXR0aW5nXG4gKiAgICB0aGUgY29ycmVjdCB2YWx1ZSBhZnRlciBjbG9uaW5nLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBub2RlXG4gKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gY2xvbmVOb2RlKG5vZGUpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICghbm9kZS5xdWVyeVNlbGVjdG9yQWxsKSB7XG4gICAgcmV0dXJuIG5vZGUuY2xvbmVOb2RlKCk7XG4gIH1cbiAgdmFyIHJlcyA9IG5vZGUuY2xvbmVOb2RlKHRydWUpO1xuICB2YXIgaSwgb3JpZ2luYWwsIGNsb25lZDtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChoYXNCcm9rZW5UZW1wbGF0ZSkge1xuICAgIHZhciB0ZW1wQ2xvbmUgPSByZXM7XG4gICAgaWYgKGlzUmVhbFRlbXBsYXRlKG5vZGUpKSB7XG4gICAgICBub2RlID0gbm9kZS5jb250ZW50O1xuICAgICAgdGVtcENsb25lID0gcmVzLmNvbnRlbnQ7XG4gICAgfVxuICAgIG9yaWdpbmFsID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpO1xuICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcbiAgICAgIGNsb25lZCA9IHRlbXBDbG9uZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpO1xuICAgICAgaSA9IGNsb25lZC5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGNsb25lZFtpXS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChjbG9uZU5vZGUob3JpZ2luYWxbaV0pLCBjbG9uZWRbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGhhc1RleHRhcmVhQ2xvbmVCdWcpIHtcbiAgICBpZiAobm9kZS50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICByZXMudmFsdWUgPSBub2RlLnZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcmlnaW5hbCA9IG5vZGUucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKTtcbiAgICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcbiAgICAgICAgY2xvbmVkID0gcmVzLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJyk7XG4gICAgICAgIGkgPSBjbG9uZWQubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgY2xvbmVkW2ldLnZhbHVlID0gb3JpZ2luYWxbaV0udmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBQcm9jZXNzIHRoZSB0ZW1wbGF0ZSBvcHRpb24gYW5kIG5vcm1hbGl6ZXMgaXQgaW50byBhXG4gKiBhIERvY3VtZW50RnJhZ21lbnQgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHBhcnRpYWwgb3IgYVxuICogaW5zdGFuY2UgdGVtcGxhdGUuXG4gKlxuICogQHBhcmFtIHsqfSB0ZW1wbGF0ZVxuICogICAgICAgIFBvc3NpYmxlIHZhbHVlcyBpbmNsdWRlOlxuICogICAgICAgIC0gRG9jdW1lbnRGcmFnbWVudCBvYmplY3RcbiAqICAgICAgICAtIE5vZGUgb2JqZWN0IG9mIHR5cGUgVGVtcGxhdGVcbiAqICAgICAgICAtIGlkIHNlbGVjdG9yOiAnI3NvbWUtdGVtcGxhdGUtaWQnXG4gKiAgICAgICAgLSB0ZW1wbGF0ZSBzdHJpbmc6ICc8ZGl2PjxzcGFuPnt7bXNnfX08L3NwYW4+PC9kaXY+J1xuICogQHBhcmFtIHtCb29sZWFufSBzaG91bGRDbG9uZVxuICogQHBhcmFtIHtCb29sZWFufSByYXdcbiAqICAgICAgICBpbmxpbmUgSFRNTCBpbnRlcnBvbGF0aW9uLiBEbyBub3QgY2hlY2sgZm9yIGlkXG4gKiAgICAgICAgc2VsZWN0b3IgYW5kIGtlZXAgd2hpdGVzcGFjZSBpbiB0aGUgc3RyaW5nLlxuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudHx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgc2hvdWxkQ2xvbmUsIHJhdykge1xuICB2YXIgbm9kZSwgZnJhZztcblxuICAvLyBpZiB0aGUgdGVtcGxhdGUgaXMgYWxyZWFkeSBhIGRvY3VtZW50IGZyYWdtZW50LFxuICAvLyBkbyBub3RoaW5nXG4gIGlmIChpc0ZyYWdtZW50KHRlbXBsYXRlKSkge1xuICAgIHRyaW1Ob2RlKHRlbXBsYXRlKTtcbiAgICByZXR1cm4gc2hvdWxkQ2xvbmUgPyBjbG9uZU5vZGUodGVtcGxhdGUpIDogdGVtcGxhdGU7XG4gIH1cblxuICBpZiAodHlwZW9mIHRlbXBsYXRlID09PSAnc3RyaW5nJykge1xuICAgIC8vIGlkIHNlbGVjdG9yXG4gICAgaWYgKCFyYXcgJiYgdGVtcGxhdGUuY2hhckF0KDApID09PSAnIycpIHtcbiAgICAgIC8vIGlkIHNlbGVjdG9yIGNhbiBiZSBjYWNoZWQgdG9vXG4gICAgICBmcmFnID0gaWRTZWxlY3RvckNhY2hlLmdldCh0ZW1wbGF0ZSk7XG4gICAgICBpZiAoIWZyYWcpIHtcbiAgICAgICAgbm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRlbXBsYXRlLnNsaWNlKDEpKTtcbiAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQobm9kZSk7XG4gICAgICAgICAgLy8gc2F2ZSBzZWxlY3RvciB0byBjYWNoZVxuICAgICAgICAgIGlkU2VsZWN0b3JDYWNoZS5wdXQodGVtcGxhdGUsIGZyYWcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vcm1hbCBzdHJpbmcgdGVtcGxhdGVcbiAgICAgIGZyYWcgPSBzdHJpbmdUb0ZyYWdtZW50KHRlbXBsYXRlLCByYXcpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0ZW1wbGF0ZS5ub2RlVHlwZSkge1xuICAgIC8vIGEgZGlyZWN0IG5vZGVcbiAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQodGVtcGxhdGUpO1xuICB9XG5cbiAgcmV0dXJuIGZyYWcgJiYgc2hvdWxkQ2xvbmUgPyBjbG9uZU5vZGUoZnJhZykgOiBmcmFnO1xufVxuXG52YXIgdGVtcGxhdGUgPSBPYmplY3QuZnJlZXplKHtcbiAgY2xvbmVOb2RlOiBjbG9uZU5vZGUsXG4gIHBhcnNlVGVtcGxhdGU6IHBhcnNlVGVtcGxhdGVcbn0pO1xuXG52YXIgaHRtbCA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIGEgY29tbWVudCBub2RlIG1lYW5zIHRoaXMgaXMgYSBiaW5kaW5nIGZvclxuICAgIC8vIHt7eyBpbmxpbmUgdW5lc2NhcGVkIGh0bWwgfX19XG4gICAgaWYgKHRoaXMuZWwubm9kZVR5cGUgPT09IDgpIHtcbiAgICAgIC8vIGhvbGQgbm9kZXNcbiAgICAgIHRoaXMubm9kZXMgPSBbXTtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIHBsYWNlaG9sZGVyIHdpdGggcHJvcGVyIGFuY2hvclxuICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtaHRtbCcpO1xuICAgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdmFsdWUgPSBfdG9TdHJpbmcodmFsdWUpO1xuICAgIGlmICh0aGlzLm5vZGVzKSB7XG4gICAgICB0aGlzLnN3YXAodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsLmlubmVySFRNTCA9IHZhbHVlO1xuICAgIH1cbiAgfSxcblxuICBzd2FwOiBmdW5jdGlvbiBzd2FwKHZhbHVlKSB7XG4gICAgLy8gcmVtb3ZlIG9sZCBub2Rlc1xuICAgIHZhciBpID0gdGhpcy5ub2Rlcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgcmVtb3ZlKHRoaXMubm9kZXNbaV0pO1xuICAgIH1cbiAgICAvLyBjb252ZXJ0IG5ldyB2YWx1ZSB0byBhIGZyYWdtZW50XG4gICAgLy8gZG8gbm90IGF0dGVtcHQgdG8gcmV0cmlldmUgZnJvbSBpZCBzZWxlY3RvclxuICAgIHZhciBmcmFnID0gcGFyc2VUZW1wbGF0ZSh2YWx1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgLy8gc2F2ZSBhIHJlZmVyZW5jZSB0byB0aGVzZSBub2RlcyBzbyB3ZSBjYW4gcmVtb3ZlIGxhdGVyXG4gICAgdGhpcy5ub2RlcyA9IHRvQXJyYXkoZnJhZy5jaGlsZE5vZGVzKTtcbiAgICBiZWZvcmUoZnJhZywgdGhpcy5hbmNob3IpO1xuICB9XG59O1xuXG4vKipcbiAqIEFic3RyYWN0aW9uIGZvciBhIHBhcnRpYWxseS1jb21waWxlZCBmcmFnbWVudC5cbiAqIENhbiBvcHRpb25hbGx5IGNvbXBpbGUgY29udGVudCB3aXRoIGEgY2hpbGQgc2NvcGUuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gbGlua2VyXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuICogQHBhcmFtIHtWdWV9IFtob3N0XVxuICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cbiAqIEBwYXJhbSB7RnJhZ21lbnR9IFtwYXJlbnRGcmFnXVxuICovXG5mdW5jdGlvbiBGcmFnbWVudChsaW5rZXIsIHZtLCBmcmFnLCBob3N0LCBzY29wZSwgcGFyZW50RnJhZykge1xuICB0aGlzLmNoaWxkcmVuID0gW107XG4gIHRoaXMuY2hpbGRGcmFncyA9IFtdO1xuICB0aGlzLnZtID0gdm07XG4gIHRoaXMuc2NvcGUgPSBzY29wZTtcbiAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuICB0aGlzLnBhcmVudEZyYWcgPSBwYXJlbnRGcmFnO1xuICBpZiAocGFyZW50RnJhZykge1xuICAgIHBhcmVudEZyYWcuY2hpbGRGcmFncy5wdXNoKHRoaXMpO1xuICB9XG4gIHRoaXMudW5saW5rID0gbGlua2VyKHZtLCBmcmFnLCBob3N0LCBzY29wZSwgdGhpcyk7XG4gIHZhciBzaW5nbGUgPSB0aGlzLnNpbmdsZSA9IGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiZcbiAgLy8gZG8gbm90IGdvIHNpbmdsZSBtb2RlIGlmIHRoZSBvbmx5IG5vZGUgaXMgYW4gYW5jaG9yXG4gICFmcmFnLmNoaWxkTm9kZXNbMF0uX192X2FuY2hvcjtcbiAgaWYgKHNpbmdsZSkge1xuICAgIHRoaXMubm9kZSA9IGZyYWcuY2hpbGROb2Rlc1swXTtcbiAgICB0aGlzLmJlZm9yZSA9IHNpbmdsZUJlZm9yZTtcbiAgICB0aGlzLnJlbW92ZSA9IHNpbmdsZVJlbW92ZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLm5vZGUgPSBjcmVhdGVBbmNob3IoJ2ZyYWdtZW50LXN0YXJ0Jyk7XG4gICAgdGhpcy5lbmQgPSBjcmVhdGVBbmNob3IoJ2ZyYWdtZW50LWVuZCcpO1xuICAgIHRoaXMuZnJhZyA9IGZyYWc7XG4gICAgcHJlcGVuZCh0aGlzLm5vZGUsIGZyYWcpO1xuICAgIGZyYWcuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xuICAgIHRoaXMuYmVmb3JlID0gbXVsdGlCZWZvcmU7XG4gICAgdGhpcy5yZW1vdmUgPSBtdWx0aVJlbW92ZTtcbiAgfVxuICB0aGlzLm5vZGUuX192X2ZyYWcgPSB0aGlzO1xufVxuXG4vKipcbiAqIENhbGwgYXR0YWNoL2RldGFjaCBmb3IgYWxsIGNvbXBvbmVudHMgY29udGFpbmVkIHdpdGhpblxuICogdGhpcyBmcmFnbWVudC4gQWxzbyBkbyBzbyByZWN1cnNpdmVseSBmb3IgYWxsIGNoaWxkXG4gKiBmcmFnbWVudHMuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaG9va1xuICovXG5cbkZyYWdtZW50LnByb3RvdHlwZS5jYWxsSG9vayA9IGZ1bmN0aW9uIChob29rKSB7XG4gIHZhciBpLCBsO1xuICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHRoaXMuY2hpbGRGcmFnc1tpXS5jYWxsSG9vayhob29rKTtcbiAgfVxuICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBob29rKHRoaXMuY2hpbGRyZW5baV0pO1xuICB9XG59O1xuXG4vKipcbiAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG4gKlxuICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cbiAqL1xuXG5mdW5jdGlvbiBzaW5nbGVCZWZvcmUodGFyZ2V0LCB3aXRoVHJhbnNpdGlvbikge1xuICB0aGlzLmluc2VydGVkID0gdHJ1ZTtcbiAgdmFyIG1ldGhvZCA9IHdpdGhUcmFuc2l0aW9uICE9PSBmYWxzZSA/IGJlZm9yZVdpdGhUcmFuc2l0aW9uIDogYmVmb3JlO1xuICBtZXRob2QodGhpcy5ub2RlLCB0YXJnZXQsIHRoaXMudm0pO1xuICBpZiAoaW5Eb2ModGhpcy5ub2RlKSkge1xuICAgIHRoaXMuY2FsbEhvb2soYXR0YWNoKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBmcmFnbWVudCwgc2luZ2xlIG5vZGUgdmVyc2lvblxuICovXG5cbmZ1bmN0aW9uIHNpbmdsZVJlbW92ZSgpIHtcbiAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuICB2YXIgc2hvdWxkQ2FsbFJlbW92ZSA9IGluRG9jKHRoaXMubm9kZSk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5iZWZvcmVSZW1vdmUoKTtcbiAgcmVtb3ZlV2l0aFRyYW5zaXRpb24odGhpcy5ub2RlLCB0aGlzLnZtLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHNob3VsZENhbGxSZW1vdmUpIHtcbiAgICAgIHNlbGYuY2FsbEhvb2soZGV0YWNoKTtcbiAgICB9XG4gICAgc2VsZi5kZXN0cm95KCk7XG4gIH0pO1xufVxuXG4vKipcbiAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG4gKlxuICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cbiAqL1xuXG5mdW5jdGlvbiBtdWx0aUJlZm9yZSh0YXJnZXQsIHdpdGhUcmFuc2l0aW9uKSB7XG4gIHRoaXMuaW5zZXJ0ZWQgPSB0cnVlO1xuICB2YXIgdm0gPSB0aGlzLnZtO1xuICB2YXIgbWV0aG9kID0gd2l0aFRyYW5zaXRpb24gIT09IGZhbHNlID8gYmVmb3JlV2l0aFRyYW5zaXRpb24gOiBiZWZvcmU7XG4gIG1hcE5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCBmdW5jdGlvbiAobm9kZSkge1xuICAgIG1ldGhvZChub2RlLCB0YXJnZXQsIHZtKTtcbiAgfSk7XG4gIGlmIChpbkRvYyh0aGlzLm5vZGUpKSB7XG4gICAgdGhpcy5jYWxsSG9vayhhdHRhY2gpO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIGZyYWdtZW50LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG4gKi9cblxuZnVuY3Rpb24gbXVsdGlSZW1vdmUoKSB7XG4gIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgc2hvdWxkQ2FsbFJlbW92ZSA9IGluRG9jKHRoaXMubm9kZSk7XG4gIHRoaXMuYmVmb3JlUmVtb3ZlKCk7XG4gIHJlbW92ZU5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCB0aGlzLnZtLCB0aGlzLmZyYWcsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc2hvdWxkQ2FsbFJlbW92ZSkge1xuICAgICAgc2VsZi5jYWxsSG9vayhkZXRhY2gpO1xuICAgIH1cbiAgICBzZWxmLmRlc3Ryb3koKTtcbiAgfSk7XG59XG5cbi8qKlxuICogUHJlcGFyZSB0aGUgZnJhZ21lbnQgZm9yIHJlbW92YWwuXG4gKi9cblxuRnJhZ21lbnQucHJvdG90eXBlLmJlZm9yZVJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGksIGw7XG4gIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgLy8gY2FsbCB0aGUgc2FtZSBtZXRob2QgcmVjdXJzaXZlbHkgb24gY2hpbGRcbiAgICAvLyBmcmFnbWVudHMsIGRlcHRoLWZpcnN0XG4gICAgdGhpcy5jaGlsZEZyYWdzW2ldLmJlZm9yZVJlbW92ZShmYWxzZSk7XG4gIH1cbiAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgLy8gQ2FsbCBkZXN0cm95IGZvciBhbGwgY29udGFpbmVkIGluc3RhbmNlcyxcbiAgICAvLyB3aXRoIHJlbW92ZTpmYWxzZSBhbmQgZGVmZXI6dHJ1ZS5cbiAgICAvLyBEZWZlciBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZSBuZWVkIHRvXG4gICAgLy8ga2VlcCB0aGUgY2hpbGRyZW4gdG8gY2FsbCBkZXRhY2ggaG9va3NcbiAgICAvLyBvbiB0aGVtLlxuICAgIHRoaXMuY2hpbGRyZW5baV0uJGRlc3Ryb3koZmFsc2UsIHRydWUpO1xuICB9XG4gIHZhciBkaXJzID0gdGhpcy51bmxpbmsuZGlycztcbiAgZm9yIChpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgLy8gZGlzYWJsZSB0aGUgd2F0Y2hlcnMgb24gYWxsIHRoZSBkaXJlY3RpdmVzXG4gICAgLy8gc28gdGhhdCB0aGUgcmVuZGVyZWQgY29udGVudCBzdGF5cyB0aGUgc2FtZVxuICAgIC8vIGR1cmluZyByZW1vdmFsLlxuICAgIGRpcnNbaV0uX3dhdGNoZXIgJiYgZGlyc1tpXS5fd2F0Y2hlci50ZWFyZG93bigpO1xuICB9XG59O1xuXG4vKipcbiAqIERlc3Ryb3kgdGhlIGZyYWdtZW50LlxuICovXG5cbkZyYWdtZW50LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5wYXJlbnRGcmFnKSB7XG4gICAgdGhpcy5wYXJlbnRGcmFnLmNoaWxkRnJhZ3MuJHJlbW92ZSh0aGlzKTtcbiAgfVxuICB0aGlzLm5vZGUuX192X2ZyYWcgPSBudWxsO1xuICB0aGlzLnVubGluaygpO1xufTtcblxuLyoqXG4gKiBDYWxsIGF0dGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcbiAqL1xuXG5mdW5jdGlvbiBhdHRhY2goY2hpbGQpIHtcbiAgaWYgKCFjaGlsZC5faXNBdHRhY2hlZCAmJiBpbkRvYyhjaGlsZC4kZWwpKSB7XG4gICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuICB9XG59XG5cbi8qKlxuICogQ2FsbCBkZXRhY2ggaG9vayBmb3IgYSBWdWUgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHtWdWV9IGNoaWxkXG4gKi9cblxuZnVuY3Rpb24gZGV0YWNoKGNoaWxkKSB7XG4gIGlmIChjaGlsZC5faXNBdHRhY2hlZCAmJiAhaW5Eb2MoY2hpbGQuJGVsKSkge1xuICAgIGNoaWxkLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcbiAgfVxufVxuXG52YXIgbGlua2VyQ2FjaGUgPSBuZXcgQ2FjaGUoNTAwMCk7XG5cbi8qKlxuICogQSBmYWN0b3J5IHRoYXQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGluc3RhbmNlcyBvZiBhXG4gKiBmcmFnbWVudC4gQ2FjaGVzIHRoZSBjb21waWxlZCBsaW5rZXIgaWYgcG9zc2libGUuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0VsZW1lbnR8U3RyaW5nfSBlbFxuICovXG5mdW5jdGlvbiBGcmFnbWVudEZhY3Rvcnkodm0sIGVsKSB7XG4gIHRoaXMudm0gPSB2bTtcbiAgdmFyIHRlbXBsYXRlO1xuICB2YXIgaXNTdHJpbmcgPSB0eXBlb2YgZWwgPT09ICdzdHJpbmcnO1xuICBpZiAoaXNTdHJpbmcgfHwgaXNUZW1wbGF0ZShlbCkgJiYgIWVsLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG4gICAgdGVtcGxhdGUgPSBwYXJzZVRlbXBsYXRlKGVsLCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICB0ZW1wbGF0ZS5hcHBlbmRDaGlsZChlbCk7XG4gIH1cbiAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAvLyBsaW5rZXIgY2FuIGJlIGNhY2hlZCwgYnV0IG9ubHkgZm9yIGNvbXBvbmVudHNcbiAgdmFyIGxpbmtlcjtcbiAgdmFyIGNpZCA9IHZtLmNvbnN0cnVjdG9yLmNpZDtcbiAgaWYgKGNpZCA+IDApIHtcbiAgICB2YXIgY2FjaGVJZCA9IGNpZCArIChpc1N0cmluZyA/IGVsIDogZ2V0T3V0ZXJIVE1MKGVsKSk7XG4gICAgbGlua2VyID0gbGlua2VyQ2FjaGUuZ2V0KGNhY2hlSWQpO1xuICAgIGlmICghbGlua2VyKSB7XG4gICAgICBsaW5rZXIgPSBjb21waWxlKHRlbXBsYXRlLCB2bS4kb3B0aW9ucywgdHJ1ZSk7XG4gICAgICBsaW5rZXJDYWNoZS5wdXQoY2FjaGVJZCwgbGlua2VyKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGlua2VyID0gY29tcGlsZSh0ZW1wbGF0ZSwgdm0uJG9wdGlvbnMsIHRydWUpO1xuICB9XG4gIHRoaXMubGlua2VyID0gbGlua2VyO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGZyYWdtZW50IGluc3RhbmNlIHdpdGggZ2l2ZW4gaG9zdCBhbmQgc2NvcGUuXG4gKlxuICogQHBhcmFtIHtWdWV9IGhvc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBzY29wZVxuICogQHBhcmFtIHtGcmFnbWVudH0gcGFyZW50RnJhZ1xuICovXG5cbkZyYWdtZW50RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKSB7XG4gIHZhciBmcmFnID0gY2xvbmVOb2RlKHRoaXMudGVtcGxhdGUpO1xuICByZXR1cm4gbmV3IEZyYWdtZW50KHRoaXMubGlua2VyLCB0aGlzLnZtLCBmcmFnLCBob3N0LCBzY29wZSwgcGFyZW50RnJhZyk7XG59O1xuXG52YXIgT04gPSA3MDA7XG52YXIgTU9ERUwgPSA4MDA7XG52YXIgQklORCA9IDg1MDtcbnZhciBUUkFOU0lUSU9OID0gMTEwMDtcbnZhciBFTCA9IDE1MDA7XG52YXIgQ09NUE9ORU5UID0gMTUwMDtcbnZhciBQQVJUSUFMID0gMTc1MDtcbnZhciBJRiA9IDIxMDA7XG52YXIgRk9SID0gMjIwMDtcbnZhciBTTE9UID0gMjMwMDtcblxudmFyIHVpZCQzID0gMDtcblxudmFyIHZGb3IgPSB7XG5cbiAgcHJpb3JpdHk6IEZPUixcbiAgdGVybWluYWw6IHRydWUsXG5cbiAgcGFyYW1zOiBbJ3RyYWNrLWJ5JywgJ3N0YWdnZXInLCAnZW50ZXItc3RhZ2dlcicsICdsZWF2ZS1zdGFnZ2VyJ10sXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyBzdXBwb3J0IFwiaXRlbSBpbi9vZiBpdGVtc1wiIHN5bnRheFxuICAgIHZhciBpbk1hdGNoID0gdGhpcy5leHByZXNzaW9uLm1hdGNoKC8oLiopICg/OmlufG9mKSAoLiopLyk7XG4gICAgaWYgKGluTWF0Y2gpIHtcbiAgICAgIHZhciBpdE1hdGNoID0gaW5NYXRjaFsxXS5tYXRjaCgvXFwoKC4qKSwoLiopXFwpLyk7XG4gICAgICBpZiAoaXRNYXRjaCkge1xuICAgICAgICB0aGlzLml0ZXJhdG9yID0gaXRNYXRjaFsxXS50cmltKCk7XG4gICAgICAgIHRoaXMuYWxpYXMgPSBpdE1hdGNoWzJdLnRyaW0oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYWxpYXMgPSBpbk1hdGNoWzFdLnRyaW0oKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGluTWF0Y2hbMl07XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmFsaWFzKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgdi1mb3IgZXhwcmVzc2lvbiBcIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2FsaWFzIGlzIHJlcXVpcmVkLicsIHRoaXMudm0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHVpZCBhcyBhIGNhY2hlIGlkZW50aWZpZXJcbiAgICB0aGlzLmlkID0gJ19fdi1mb3JfXycgKyArK3VpZCQzO1xuXG4gICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhbiBvcHRpb24gbGlzdCxcbiAgICAvLyBzbyB0aGF0IHdlIGtub3cgaWYgd2UgbmVlZCB0byB1cGRhdGUgdGhlIDxzZWxlY3Q+J3NcbiAgICAvLyB2LW1vZGVsIHdoZW4gdGhlIG9wdGlvbiBsaXN0IGhhcyBjaGFuZ2VkLlxuICAgIC8vIGJlY2F1c2Ugdi1tb2RlbCBoYXMgYSBsb3dlciBwcmlvcml0eSB0aGFuIHYtZm9yLFxuICAgIC8vIHRoZSB2LW1vZGVsIGlzIG5vdCBib3VuZCBoZXJlIHlldCwgc28gd2UgaGF2ZSB0b1xuICAgIC8vIHJldHJpdmUgaXQgaW4gdGhlIGFjdHVhbCB1cGRhdGVNb2RlbCgpIGZ1bmN0aW9uLlxuICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWU7XG4gICAgdGhpcy5pc09wdGlvbiA9ICh0YWcgPT09ICdPUFRJT04nIHx8IHRhZyA9PT0gJ09QVEdST1VQJykgJiYgdGhpcy5lbC5wYXJlbnROb2RlLnRhZ05hbWUgPT09ICdTRUxFQ1QnO1xuXG4gICAgLy8gc2V0dXAgYW5jaG9yIG5vZGVzXG4gICAgdGhpcy5zdGFydCA9IGNyZWF0ZUFuY2hvcigndi1mb3Itc3RhcnQnKTtcbiAgICB0aGlzLmVuZCA9IGNyZWF0ZUFuY2hvcigndi1mb3ItZW5kJyk7XG4gICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmVuZCk7XG4gICAgYmVmb3JlKHRoaXMuc3RhcnQsIHRoaXMuZW5kKTtcblxuICAgIC8vIGNhY2hlXG4gICAgdGhpcy5jYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICAvLyBmcmFnbWVudCBmYWN0b3J5XG4gICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCB0aGlzLmVsKTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShkYXRhKSB7XG4gICAgdGhpcy5kaWZmKGRhdGEpO1xuICAgIHRoaXMudXBkYXRlUmVmKCk7XG4gICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBEaWZmLCBiYXNlZCBvbiBuZXcgZGF0YSBhbmQgb2xkIGRhdGEsIGRldGVybWluZSB0aGVcbiAgICogbWluaW11bSBhbW91bnQgb2YgRE9NIG1hbmlwdWxhdGlvbnMgbmVlZGVkIHRvIG1ha2UgdGhlXG4gICAqIERPTSByZWZsZWN0IHRoZSBuZXcgZGF0YSBBcnJheS5cbiAgICpcbiAgICogVGhlIGFsZ29yaXRobSBkaWZmcyB0aGUgbmV3IGRhdGEgQXJyYXkgYnkgc3RvcmluZyBhXG4gICAqIGhpZGRlbiByZWZlcmVuY2UgdG8gYW4gb3duZXIgdm0gaW5zdGFuY2Ugb24gcHJldmlvdXNseVxuICAgKiBzZWVuIGRhdGEuIFRoaXMgYWxsb3dzIHVzIHRvIGFjaGlldmUgTyhuKSB3aGljaCBpc1xuICAgKiBiZXR0ZXIgdGhhbiBhIGxldmVuc2h0ZWluIGRpc3RhbmNlIGJhc2VkIGFsZ29yaXRobSxcbiAgICogd2hpY2ggaXMgTyhtICogbikuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGRhdGFcbiAgICovXG5cbiAgZGlmZjogZnVuY3Rpb24gZGlmZihkYXRhKSB7XG4gICAgLy8gY2hlY2sgaWYgdGhlIEFycmF5IHdhcyBjb252ZXJ0ZWQgZnJvbSBhbiBPYmplY3RcbiAgICB2YXIgaXRlbSA9IGRhdGFbMF07XG4gICAgdmFyIGNvbnZlcnRlZEZyb21PYmplY3QgPSB0aGlzLmZyb21PYmplY3QgPSBpc09iamVjdChpdGVtKSAmJiBoYXNPd24oaXRlbSwgJyRrZXknKSAmJiBoYXNPd24oaXRlbSwgJyR2YWx1ZScpO1xuXG4gICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuICAgIHZhciBvbGRGcmFncyA9IHRoaXMuZnJhZ3M7XG4gICAgdmFyIGZyYWdzID0gdGhpcy5mcmFncyA9IG5ldyBBcnJheShkYXRhLmxlbmd0aCk7XG4gICAgdmFyIGFsaWFzID0gdGhpcy5hbGlhcztcbiAgICB2YXIgaXRlcmF0b3IgPSB0aGlzLml0ZXJhdG9yO1xuICAgIHZhciBzdGFydCA9IHRoaXMuc3RhcnQ7XG4gICAgdmFyIGVuZCA9IHRoaXMuZW5kO1xuICAgIHZhciBpbkRvY3VtZW50ID0gaW5Eb2Moc3RhcnQpO1xuICAgIHZhciBpbml0ID0gIW9sZEZyYWdzO1xuICAgIHZhciBpLCBsLCBmcmFnLCBrZXksIHZhbHVlLCBwcmltaXRpdmU7XG5cbiAgICAvLyBGaXJzdCBwYXNzLCBnbyB0aHJvdWdoIHRoZSBuZXcgQXJyYXkgYW5kIGZpbGwgdXBcbiAgICAvLyB0aGUgbmV3IGZyYWdzIGFycmF5LiBJZiBhIHBpZWNlIG9mIGRhdGEgaGFzIGEgY2FjaGVkXG4gICAgLy8gaW5zdGFuY2UgZm9yIGl0LCB3ZSByZXVzZSBpdC4gT3RoZXJ3aXNlIGJ1aWxkIGEgbmV3XG4gICAgLy8gaW5zdGFuY2UuXG4gICAgZm9yIChpID0gMCwgbCA9IGRhdGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBpdGVtID0gZGF0YVtpXTtcbiAgICAgIGtleSA9IGNvbnZlcnRlZEZyb21PYmplY3QgPyBpdGVtLiRrZXkgOiBudWxsO1xuICAgICAgdmFsdWUgPSBjb252ZXJ0ZWRGcm9tT2JqZWN0ID8gaXRlbS4kdmFsdWUgOiBpdGVtO1xuICAgICAgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcbiAgICAgIGZyYWcgPSAhaW5pdCAmJiB0aGlzLmdldENhY2hlZEZyYWcodmFsdWUsIGksIGtleSk7XG4gICAgICBpZiAoZnJhZykge1xuICAgICAgICAvLyByZXVzYWJsZSBmcmFnbWVudFxuICAgICAgICBmcmFnLnJldXNlZCA9IHRydWU7XG4gICAgICAgIC8vIHVwZGF0ZSAkaW5kZXhcbiAgICAgICAgZnJhZy5zY29wZS4kaW5kZXggPSBpO1xuICAgICAgICAvLyB1cGRhdGUgJGtleVxuICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgZnJhZy5zY29wZS4ka2V5ID0ga2V5O1xuICAgICAgICB9XG4gICAgICAgIC8vIHVwZGF0ZSBpdGVyYXRvclxuICAgICAgICBpZiAoaXRlcmF0b3IpIHtcbiAgICAgICAgICBmcmFnLnNjb3BlW2l0ZXJhdG9yXSA9IGtleSAhPT0gbnVsbCA/IGtleSA6IGk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdXBkYXRlIGRhdGEgZm9yIHRyYWNrLWJ5LCBvYmplY3QgcmVwZWF0ICZcbiAgICAgICAgLy8gcHJpbWl0aXZlIHZhbHVlcy5cbiAgICAgICAgaWYgKHRyYWNrQnlLZXkgfHwgY29udmVydGVkRnJvbU9iamVjdCB8fCBwcmltaXRpdmUpIHtcbiAgICAgICAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmcmFnLnNjb3BlW2FsaWFzXSA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBuZXcgaXNudGFuY2VcbiAgICAgICAgZnJhZyA9IHRoaXMuY3JlYXRlKHZhbHVlLCBhbGlhcywgaSwga2V5KTtcbiAgICAgICAgZnJhZy5mcmVzaCA9ICFpbml0O1xuICAgICAgfVxuICAgICAgZnJhZ3NbaV0gPSBmcmFnO1xuICAgICAgaWYgKGluaXQpIHtcbiAgICAgICAgZnJhZy5iZWZvcmUoZW5kKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB3ZSdyZSBkb25lIGZvciB0aGUgaW5pdGlhbCByZW5kZXIuXG4gICAgaWYgKGluaXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTZWNvbmQgcGFzcywgZ28gdGhyb3VnaCB0aGUgb2xkIGZyYWdtZW50cyBhbmRcbiAgICAvLyBkZXN0cm95IHRob3NlIHdobyBhcmUgbm90IHJldXNlZCAoYW5kIHJlbW92ZSB0aGVtXG4gICAgLy8gZnJvbSBjYWNoZSlcbiAgICB2YXIgcmVtb3ZhbEluZGV4ID0gMDtcbiAgICB2YXIgdG90YWxSZW1vdmVkID0gb2xkRnJhZ3MubGVuZ3RoIC0gZnJhZ3MubGVuZ3RoO1xuICAgIC8vIHdoZW4gcmVtb3ZpbmcgYSBsYXJnZSBudW1iZXIgb2YgZnJhZ21lbnRzLCB3YXRjaGVyIHJlbW92YWxcbiAgICAvLyB0dXJucyBvdXQgdG8gYmUgYSBwZXJmIGJvdHRsZW5lY2ssIHNvIHdlIGJhdGNoIHRoZSB3YXRjaGVyXG4gICAgLy8gcmVtb3ZhbHMgaW50byBhIHNpbmdsZSBmaWx0ZXIgY2FsbCFcbiAgICB0aGlzLnZtLl92Rm9yUmVtb3ZpbmcgPSB0cnVlO1xuICAgIGZvciAoaSA9IDAsIGwgPSBvbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGZyYWcgPSBvbGRGcmFnc1tpXTtcbiAgICAgIGlmICghZnJhZy5yZXVzZWQpIHtcbiAgICAgICAgdGhpcy5kZWxldGVDYWNoZWRGcmFnKGZyYWcpO1xuICAgICAgICB0aGlzLnJlbW92ZShmcmFnLCByZW1vdmFsSW5kZXgrKywgdG90YWxSZW1vdmVkLCBpbkRvY3VtZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy52bS5fdkZvclJlbW92aW5nID0gZmFsc2U7XG4gICAgaWYgKHJlbW92YWxJbmRleCkge1xuICAgICAgdGhpcy52bS5fd2F0Y2hlcnMgPSB0aGlzLnZtLl93YXRjaGVycy5maWx0ZXIoZnVuY3Rpb24gKHcpIHtcbiAgICAgICAgcmV0dXJuIHcuYWN0aXZlO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gRmluYWwgcGFzcywgbW92ZS9pbnNlcnQgbmV3IGZyYWdtZW50cyBpbnRvIHRoZVxuICAgIC8vIHJpZ2h0IHBsYWNlLlxuICAgIHZhciB0YXJnZXRQcmV2LCBwcmV2RWwsIGN1cnJlbnRQcmV2O1xuICAgIHZhciBpbnNlcnRpb25JbmRleCA9IDA7XG4gICAgZm9yIChpID0gMCwgbCA9IGZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZnJhZyA9IGZyYWdzW2ldO1xuICAgICAgLy8gdGhpcyBpcyB0aGUgZnJhZyB0aGF0IHdlIHNob3VsZCBiZSBhZnRlclxuICAgICAgdGFyZ2V0UHJldiA9IGZyYWdzW2kgLSAxXTtcbiAgICAgIHByZXZFbCA9IHRhcmdldFByZXYgPyB0YXJnZXRQcmV2LnN0YWdnZXJDYiA/IHRhcmdldFByZXYuc3RhZ2dlckFuY2hvciA6IHRhcmdldFByZXYuZW5kIHx8IHRhcmdldFByZXYubm9kZSA6IHN0YXJ0O1xuICAgICAgaWYgKGZyYWcucmV1c2VkICYmICFmcmFnLnN0YWdnZXJDYikge1xuICAgICAgICBjdXJyZW50UHJldiA9IGZpbmRQcmV2RnJhZyhmcmFnLCBzdGFydCwgdGhpcy5pZCk7XG4gICAgICAgIGlmIChjdXJyZW50UHJldiAhPT0gdGFyZ2V0UHJldiAmJiAoIWN1cnJlbnRQcmV2IHx8XG4gICAgICAgIC8vIG9wdGltaXphdGlvbiBmb3IgbW92aW5nIGEgc2luZ2xlIGl0ZW0uXG4gICAgICAgIC8vIHRoYW5rcyB0byBzdWdnZXN0aW9ucyBieSBAbGl2b3JhcyBpbiAjMTgwN1xuICAgICAgICBmaW5kUHJldkZyYWcoY3VycmVudFByZXYsIHN0YXJ0LCB0aGlzLmlkKSAhPT0gdGFyZ2V0UHJldikpIHtcbiAgICAgICAgICB0aGlzLm1vdmUoZnJhZywgcHJldkVsKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbmV3IGluc3RhbmNlLCBvciBzdGlsbCBpbiBzdGFnZ2VyLlxuICAgICAgICAvLyBpbnNlcnQgd2l0aCB1cGRhdGVkIHN0YWdnZXIgaW5kZXguXG4gICAgICAgIHRoaXMuaW5zZXJ0KGZyYWcsIGluc2VydGlvbkluZGV4KyssIHByZXZFbCwgaW5Eb2N1bWVudCk7XG4gICAgICB9XG4gICAgICBmcmFnLnJldXNlZCA9IGZyYWcuZnJlc2ggPSBmYWxzZTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBmcmFnbWVudCBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWxpYXNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cbiAgICovXG5cbiAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUodmFsdWUsIGFsaWFzLCBpbmRleCwga2V5KSB7XG4gICAgdmFyIGhvc3QgPSB0aGlzLl9ob3N0O1xuICAgIC8vIGNyZWF0ZSBpdGVyYXRpb24gc2NvcGVcbiAgICB2YXIgcGFyZW50U2NvcGUgPSB0aGlzLl9zY29wZSB8fCB0aGlzLnZtO1xuICAgIHZhciBzY29wZSA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUpO1xuICAgIC8vIHJlZiBob2xkZXIgZm9yIHRoZSBzY29wZVxuICAgIHNjb3BlLiRyZWZzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZS4kcmVmcyk7XG4gICAgc2NvcGUuJGVscyA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUuJGVscyk7XG4gICAgLy8gbWFrZSBzdXJlIHBvaW50ICRwYXJlbnQgdG8gcGFyZW50IHNjb3BlXG4gICAgc2NvcGUuJHBhcmVudCA9IHBhcmVudFNjb3BlO1xuICAgIC8vIGZvciB0d28td2F5IGJpbmRpbmcgb24gYWxpYXNcbiAgICBzY29wZS4kZm9yQ29udGV4dCA9IHRoaXM7XG4gICAgLy8gZGVmaW5lIHNjb3BlIHByb3BlcnRpZXNcbiAgICAvLyBpbXBvcnRhbnQ6IGRlZmluZSB0aGUgc2NvcGUgYWxpYXMgd2l0aG91dCBmb3JjZWQgY29udmVyc2lvblxuICAgIC8vIHNvIHRoYXQgZnJvemVuIGRhdGEgc3RydWN0dXJlcyByZW1haW4gbm9uLXJlYWN0aXZlLlxuICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCBhbGlhcywgdmFsdWUpO1xuICAgIH0pO1xuICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCAnJGluZGV4JywgaW5kZXgpO1xuICAgIGlmIChrZXkpIHtcbiAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCAnJGtleScsIGtleSk7XG4gICAgfSBlbHNlIGlmIChzY29wZS4ka2V5KSB7XG4gICAgICAvLyBhdm9pZCBhY2NpZGVudGFsIGZhbGxiYWNrXG4gICAgICBkZWYoc2NvcGUsICcka2V5JywgbnVsbCk7XG4gICAgfVxuICAgIGlmICh0aGlzLml0ZXJhdG9yKSB7XG4gICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgdGhpcy5pdGVyYXRvciwga2V5ICE9PSBudWxsID8ga2V5IDogaW5kZXgpO1xuICAgIH1cbiAgICB2YXIgZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUoaG9zdCwgc2NvcGUsIHRoaXMuX2ZyYWcpO1xuICAgIGZyYWcuZm9ySWQgPSB0aGlzLmlkO1xuICAgIHRoaXMuY2FjaGVGcmFnKHZhbHVlLCBmcmFnLCBpbmRleCwga2V5KTtcbiAgICByZXR1cm4gZnJhZztcbiAgfSxcblxuICAvKipcbiAgICogVXBkYXRlIHRoZSB2LXJlZiBvbiBvd25lciB2bS5cbiAgICovXG5cbiAgdXBkYXRlUmVmOiBmdW5jdGlvbiB1cGRhdGVSZWYoKSB7XG4gICAgdmFyIHJlZiA9IHRoaXMuZGVzY3JpcHRvci5yZWY7XG4gICAgaWYgKCFyZWYpIHJldHVybjtcbiAgICB2YXIgaGFzaCA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kcmVmcztcbiAgICB2YXIgcmVmcztcbiAgICBpZiAoIXRoaXMuZnJvbU9iamVjdCkge1xuICAgICAgcmVmcyA9IHRoaXMuZnJhZ3MubWFwKGZpbmRWbUZyb21GcmFnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVmcyA9IHt9O1xuICAgICAgdGhpcy5mcmFncy5mb3JFYWNoKGZ1bmN0aW9uIChmcmFnKSB7XG4gICAgICAgIHJlZnNbZnJhZy5zY29wZS4ka2V5XSA9IGZpbmRWbUZyb21GcmFnKGZyYWcpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGhhc2hbcmVmXSA9IHJlZnM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZvciBvcHRpb24gbGlzdHMsIHVwZGF0ZSB0aGUgY29udGFpbmluZyB2LW1vZGVsIG9uXG4gICAqIHBhcmVudCA8c2VsZWN0Pi5cbiAgICovXG5cbiAgdXBkYXRlTW9kZWw6IGZ1bmN0aW9uIHVwZGF0ZU1vZGVsKCkge1xuICAgIGlmICh0aGlzLmlzT3B0aW9uKSB7XG4gICAgICB2YXIgcGFyZW50ID0gdGhpcy5zdGFydC5wYXJlbnROb2RlO1xuICAgICAgdmFyIG1vZGVsID0gcGFyZW50ICYmIHBhcmVudC5fX3ZfbW9kZWw7XG4gICAgICBpZiAobW9kZWwpIHtcbiAgICAgICAgbW9kZWwuZm9yY2VVcGRhdGUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEluc2VydCBhIGZyYWdtZW50LiBIYW5kbGVzIHN0YWdnZXJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7Tm9kZX0gcHJldkVsXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5Eb2N1bWVudFxuICAgKi9cblxuICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydChmcmFnLCBpbmRleCwgcHJldkVsLCBpbkRvY3VtZW50KSB7XG4gICAgaWYgKGZyYWcuc3RhZ2dlckNiKSB7XG4gICAgICBmcmFnLnN0YWdnZXJDYi5jYW5jZWwoKTtcbiAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcbiAgICB9XG4gICAgdmFyIHN0YWdnZXJBbW91bnQgPSB0aGlzLmdldFN0YWdnZXIoZnJhZywgaW5kZXgsIG51bGwsICdlbnRlcicpO1xuICAgIGlmIChpbkRvY3VtZW50ICYmIHN0YWdnZXJBbW91bnQpIHtcbiAgICAgIC8vIGNyZWF0ZSBhbiBhbmNob3IgYW5kIGluc2VydCBpdCBzeW5jaHJvbm91c2x5LFxuICAgICAgLy8gc28gdGhhdCB3ZSBjYW4gcmVzb2x2ZSB0aGUgY29ycmVjdCBvcmRlciB3aXRob3V0XG4gICAgICAvLyB3b3JyeWluZyBhYm91dCBzb21lIGVsZW1lbnRzIG5vdCBpbnNlcnRlZCB5ZXRcbiAgICAgIHZhciBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3I7XG4gICAgICBpZiAoIWFuY2hvcikge1xuICAgICAgICBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3IgPSBjcmVhdGVBbmNob3IoJ3N0YWdnZXItYW5jaG9yJyk7XG4gICAgICAgIGFuY2hvci5fX3ZfZnJhZyA9IGZyYWc7XG4gICAgICB9XG4gICAgICBhZnRlcihhbmNob3IsIHByZXZFbCk7XG4gICAgICB2YXIgb3AgPSBmcmFnLnN0YWdnZXJDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuICAgICAgICBmcmFnLmJlZm9yZShhbmNob3IpO1xuICAgICAgICByZW1vdmUoYW5jaG9yKTtcbiAgICAgIH0pO1xuICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB0YXJnZXQgPSBwcmV2RWwubmV4dFNpYmxpbmc7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgIC8vIHJlc2V0IGVuZCBhbmNob3IgcG9zaXRpb24gaW4gY2FzZSB0aGUgcG9zaXRpb24gd2FzIG1lc3NlZCB1cFxuICAgICAgICAvLyBieSBhbiBleHRlcm5hbCBkcmFnLW4tZHJvcCBsaWJyYXJ5LlxuICAgICAgICBhZnRlcih0aGlzLmVuZCwgcHJldkVsKTtcbiAgICAgICAgdGFyZ2V0ID0gdGhpcy5lbmQ7XG4gICAgICB9XG4gICAgICBmcmFnLmJlZm9yZSh0YXJnZXQpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlIGEgZnJhZ21lbnQuIEhhbmRsZXMgc3RhZ2dlcmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5Eb2N1bWVudFxuICAgKi9cblxuICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShmcmFnLCBpbmRleCwgdG90YWwsIGluRG9jdW1lbnQpIHtcbiAgICBpZiAoZnJhZy5zdGFnZ2VyQ2IpIHtcbiAgICAgIGZyYWcuc3RhZ2dlckNiLmNhbmNlbCgpO1xuICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuICAgICAgLy8gaXQncyBub3QgcG9zc2libGUgZm9yIHRoZSBzYW1lIGZyYWcgdG8gYmUgcmVtb3ZlZFxuICAgICAgLy8gdHdpY2UsIHNvIGlmIHdlIGhhdmUgYSBwZW5kaW5nIHN0YWdnZXIgY2FsbGJhY2ssXG4gICAgICAvLyBpdCBtZWFucyB0aGlzIGZyYWcgaXMgcXVldWVkIGZvciBlbnRlciBidXQgcmVtb3ZlZFxuICAgICAgLy8gYmVmb3JlIGl0cyB0cmFuc2l0aW9uIHN0YXJ0ZWQuIFNpbmNlIGl0IGlzIGFscmVhZHlcbiAgICAgIC8vIGRlc3Ryb3llZCwgd2UgY2FuIGp1c3QgbGVhdmUgaXQgaW4gZGV0YWNoZWQgc3RhdGUuXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBzdGFnZ2VyQW1vdW50ID0gdGhpcy5nZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCB0b3RhbCwgJ2xlYXZlJyk7XG4gICAgaWYgKGluRG9jdW1lbnQgJiYgc3RhZ2dlckFtb3VudCkge1xuICAgICAgdmFyIG9wID0gZnJhZy5zdGFnZ2VyQ2IgPSBjYW5jZWxsYWJsZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcbiAgICAgICAgZnJhZy5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZyYWcucmVtb3ZlKCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBNb3ZlIGEgZnJhZ21lbnQgdG8gYSBuZXcgcG9zaXRpb24uXG4gICAqIEZvcmNlIG5vIHRyYW5zaXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOb2RlfSBwcmV2RWxcbiAgICovXG5cbiAgbW92ZTogZnVuY3Rpb24gbW92ZShmcmFnLCBwcmV2RWwpIHtcbiAgICAvLyBmaXggYSBjb21tb24gaXNzdWUgd2l0aCBTb3J0YWJsZTpcbiAgICAvLyBpZiBwcmV2RWwgZG9lc24ndCBoYXZlIG5leHRTaWJsaW5nLCB0aGlzIG1lYW5zIGl0J3NcbiAgICAvLyBiZWVuIGRyYWdnZWQgYWZ0ZXIgdGhlIGVuZCBhbmNob3IuIEp1c3QgcmUtcG9zaXRpb25cbiAgICAvLyB0aGUgZW5kIGFuY2hvciB0byB0aGUgZW5kIG9mIHRoZSBjb250YWluZXIuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFwcmV2RWwubmV4dFNpYmxpbmcpIHtcbiAgICAgIHRoaXMuZW5kLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xuICAgIH1cbiAgICBmcmFnLmJlZm9yZShwcmV2RWwubmV4dFNpYmxpbmcsIGZhbHNlKTtcbiAgfSxcblxuICAvKipcbiAgICogQ2FjaGUgYSBmcmFnbWVudCB1c2luZyB0cmFjay1ieSBvciB0aGUgb2JqZWN0IGtleS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge1N0cmluZ30gW2tleV1cbiAgICovXG5cbiAgY2FjaGVGcmFnOiBmdW5jdGlvbiBjYWNoZUZyYWcodmFsdWUsIGZyYWcsIGluZGV4LCBrZXkpIHtcbiAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG4gICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZTtcbiAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcbiAgICB2YXIgaWQ7XG4gICAgaWYgKGtleSB8fCB0cmFja0J5S2V5IHx8IHByaW1pdGl2ZSkge1xuICAgICAgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcbiAgICAgIGlmICghY2FjaGVbaWRdKSB7XG4gICAgICAgIGNhY2hlW2lkXSA9IGZyYWc7XG4gICAgICB9IGVsc2UgaWYgKHRyYWNrQnlLZXkgIT09ICckaW5kZXgnKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWQgPSB0aGlzLmlkO1xuICAgICAgaWYgKGhhc093bih2YWx1ZSwgaWQpKSB7XG4gICAgICAgIGlmICh2YWx1ZVtpZF0gPT09IG51bGwpIHtcbiAgICAgICAgICB2YWx1ZVtpZF0gPSBmcmFnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSkge1xuICAgICAgICBkZWYodmFsdWUsIGlkLCBmcmFnKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuKCdGcm96ZW4gdi1mb3Igb2JqZWN0cyBjYW5ub3QgYmUgYXV0b21hdGljYWxseSB0cmFja2VkLCBtYWtlIHN1cmUgdG8gJyArICdwcm92aWRlIGEgdHJhY2stYnkga2V5LicpO1xuICAgICAgfVxuICAgIH1cbiAgICBmcmFnLnJhdyA9IHZhbHVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgYSBjYWNoZWQgZnJhZ21lbnQgZnJvbSB0aGUgdmFsdWUvaW5kZXgva2V5XG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICogQHJldHVybiB7RnJhZ21lbnR9XG4gICAqL1xuXG4gIGdldENhY2hlZEZyYWc6IGZ1bmN0aW9uIGdldENhY2hlZEZyYWcodmFsdWUsIGluZGV4LCBrZXkpIHtcbiAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG4gICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG4gICAgdmFyIGZyYWc7XG4gICAgaWYgKGtleSB8fCB0cmFja0J5S2V5IHx8IHByaW1pdGl2ZSkge1xuICAgICAgdmFyIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG4gICAgICBmcmFnID0gdGhpcy5jYWNoZVtpZF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGZyYWcgPSB2YWx1ZVt0aGlzLmlkXTtcbiAgICB9XG4gICAgaWYgKGZyYWcgJiYgKGZyYWcucmV1c2VkIHx8IGZyYWcuZnJlc2gpKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBmcmFnO1xuICB9LFxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBmcmFnbWVudCBmcm9tIGNhY2hlLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqL1xuXG4gIGRlbGV0ZUNhY2hlZEZyYWc6IGZ1bmN0aW9uIGRlbGV0ZUNhY2hlZEZyYWcoZnJhZykge1xuICAgIHZhciB2YWx1ZSA9IGZyYWcucmF3O1xuICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcbiAgICB2YXIgc2NvcGUgPSBmcmFnLnNjb3BlO1xuICAgIHZhciBpbmRleCA9IHNjb3BlLiRpbmRleDtcbiAgICAvLyBmaXggIzk0ODogYXZvaWQgYWNjaWRlbnRhbGx5IGZhbGwgdGhyb3VnaCB0b1xuICAgIC8vIGEgcGFyZW50IHJlcGVhdGVyIHdoaWNoIGhhcHBlbnMgdG8gaGF2ZSAka2V5LlxuICAgIHZhciBrZXkgPSBoYXNPd24oc2NvcGUsICcka2V5JykgJiYgc2NvcGUuJGtleTtcbiAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcbiAgICBpZiAodHJhY2tCeUtleSB8fCBrZXkgfHwgcHJpbWl0aXZlKSB7XG4gICAgICB2YXIgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcbiAgICAgIHRoaXMuY2FjaGVbaWRdID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWVbdGhpcy5pZF0gPSBudWxsO1xuICAgICAgZnJhZy5yYXcgPSBudWxsO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBzdGFnZ2VyIGFtb3VudCBmb3IgYW4gaW5zZXJ0aW9uL3JlbW92YWwuXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7TnVtYmVyfSB0b3RhbFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICAgKi9cblxuICBnZXRTdGFnZ2VyOiBmdW5jdGlvbiBnZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCB0b3RhbCwgdHlwZSkge1xuICAgIHR5cGUgPSB0eXBlICsgJ1N0YWdnZXInO1xuICAgIHZhciB0cmFucyA9IGZyYWcubm9kZS5fX3ZfdHJhbnM7XG4gICAgdmFyIGhvb2tzID0gdHJhbnMgJiYgdHJhbnMuaG9va3M7XG4gICAgdmFyIGhvb2sgPSBob29rcyAmJiAoaG9va3NbdHlwZV0gfHwgaG9va3Muc3RhZ2dlcik7XG4gICAgcmV0dXJuIGhvb2sgPyBob29rLmNhbGwoZnJhZywgaW5kZXgsIHRvdGFsKSA6IGluZGV4ICogcGFyc2VJbnQodGhpcy5wYXJhbXNbdHlwZV0gfHwgdGhpcy5wYXJhbXMuc3RhZ2dlciwgMTApO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQcmUtcHJvY2VzcyB0aGUgdmFsdWUgYmVmb3JlIHBpcGluZyBpdCB0aHJvdWdoIHRoZVxuICAgKiBmaWx0ZXJzLiBUaGlzIGlzIHBhc3NlZCB0byBhbmQgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyLlxuICAgKi9cblxuICBfcHJlUHJvY2VzczogZnVuY3Rpb24gX3ByZVByb2Nlc3ModmFsdWUpIHtcbiAgICAvLyByZWdhcmRsZXNzIG9mIHR5cGUsIHN0b3JlIHRoZSB1bi1maWx0ZXJlZCByYXcgdmFsdWUuXG4gICAgdGhpcy5yYXdWYWx1ZSA9IHZhbHVlO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcblxuICAvKipcbiAgICogUG9zdC1wcm9jZXNzIHRoZSB2YWx1ZSBhZnRlciBpdCBoYXMgYmVlbiBwaXBlZCB0aHJvdWdoXG4gICAqIHRoZSBmaWx0ZXJzLiBUaGlzIGlzIHBhc3NlZCB0byBhbmQgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyLlxuICAgKlxuICAgKiBJdCBpcyBuZWNlc3NhcnkgZm9yIHRoaXMgdG8gYmUgY2FsbGVkIGR1cmluZyB0aGVcbiAgICogd2F0Y2hlcidzIGRlcGVuZGVuY3kgY29sbGVjdGlvbiBwaGFzZSBiZWNhdXNlIHdlIHdhbnRcbiAgICogdGhlIHYtZm9yIHRvIHVwZGF0ZSB3aGVuIHRoZSBzb3VyY2UgT2JqZWN0IGlzIG11dGF0ZWQuXG4gICAqL1xuXG4gIF9wb3N0UHJvY2VzczogZnVuY3Rpb24gX3Bvc3RQcm9jZXNzKHZhbHVlKSB7XG4gICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgICAgLy8gY29udmVydCBwbGFpbiBvYmplY3QgdG8gYXJyYXkuXG4gICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcbiAgICAgIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gICAgICB2YXIgcmVzID0gbmV3IEFycmF5KGkpO1xuICAgICAgdmFyIGtleTtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgcmVzW2ldID0ge1xuICAgICAgICAgICRrZXk6IGtleSxcbiAgICAgICAgICAkdmFsdWU6IHZhbHVlW2tleV1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmICFpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSByYW5nZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWUgfHwgW107XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIGlmICh0aGlzLmRlc2NyaXB0b3IucmVmKSB7XG4gICAgICAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHJlZnNbdGhpcy5kZXNjcmlwdG9yLnJlZl0gPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5mcmFncykge1xuICAgICAgdmFyIGkgPSB0aGlzLmZyYWdzLmxlbmd0aDtcbiAgICAgIHZhciBmcmFnO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBmcmFnID0gdGhpcy5mcmFnc1tpXTtcbiAgICAgICAgdGhpcy5kZWxldGVDYWNoZWRGcmFnKGZyYWcpO1xuICAgICAgICBmcmFnLmRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogSGVscGVyIHRvIGZpbmQgdGhlIHByZXZpb3VzIGVsZW1lbnQgdGhhdCBpcyBhIGZyYWdtZW50XG4gKiBhbmNob3IuIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYSBkZXN0cm95ZWQgZnJhZydzXG4gKiBlbGVtZW50IGNvdWxkIHN0aWxsIGJlIGxpbmdlcmluZyBpbiB0aGUgRE9NIGJlZm9yZSBpdHNcbiAqIGxlYXZpbmcgdHJhbnNpdGlvbiBmaW5pc2hlcywgYnV0IGl0cyBpbnNlcnRlZCBmbGFnXG4gKiBzaG91bGQgaGF2ZSBiZWVuIHNldCB0byBmYWxzZSBzbyB3ZSBjYW4gc2tpcCB0aGVtLlxuICpcbiAqIElmIHRoaXMgaXMgYSBibG9jayByZXBlYXQsIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHdlIG9ubHlcbiAqIHJldHVybiBmcmFnIHRoYXQgaXMgYm91bmQgdG8gdGhpcyB2LWZvci4gKHNlZSAjOTI5KVxuICpcbiAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAqIEBwYXJhbSB7Q29tbWVudHxUZXh0fSBhbmNob3JcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICogQHJldHVybiB7RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gZmluZFByZXZGcmFnKGZyYWcsIGFuY2hvciwgaWQpIHtcbiAgdmFyIGVsID0gZnJhZy5ub2RlLnByZXZpb3VzU2libGluZztcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICghZWwpIHJldHVybjtcbiAgZnJhZyA9IGVsLl9fdl9mcmFnO1xuICB3aGlsZSAoKCFmcmFnIHx8IGZyYWcuZm9ySWQgIT09IGlkIHx8ICFmcmFnLmluc2VydGVkKSAmJiBlbCAhPT0gYW5jaG9yKSB7XG4gICAgZWwgPSBlbC5wcmV2aW91c1NpYmxpbmc7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFlbCkgcmV0dXJuO1xuICAgIGZyYWcgPSBlbC5fX3ZfZnJhZztcbiAgfVxuICByZXR1cm4gZnJhZztcbn1cblxuLyoqXG4gKiBGaW5kIGEgdm0gZnJvbSBhIGZyYWdtZW50LlxuICpcbiAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAqIEByZXR1cm4ge1Z1ZXx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gZmluZFZtRnJvbUZyYWcoZnJhZykge1xuICB2YXIgbm9kZSA9IGZyYWcubm9kZTtcbiAgLy8gaGFuZGxlIG11bHRpLW5vZGUgZnJhZ1xuICBpZiAoZnJhZy5lbmQpIHtcbiAgICB3aGlsZSAoIW5vZGUuX192dWVfXyAmJiBub2RlICE9PSBmcmFnLmVuZCAmJiBub2RlLm5leHRTaWJsaW5nKSB7XG4gICAgICBub2RlID0gbm9kZS5uZXh0U2libGluZztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5vZGUuX192dWVfXztcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSByYW5nZSBhcnJheSBmcm9tIGdpdmVuIG51bWJlci5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gblxuICogQHJldHVybiB7QXJyYXl9XG4gKi9cblxuZnVuY3Rpb24gcmFuZ2Uobikge1xuICB2YXIgaSA9IC0xO1xuICB2YXIgcmV0ID0gbmV3IEFycmF5KE1hdGguZmxvb3IobikpO1xuICB3aGlsZSAoKytpIDwgbikge1xuICAgIHJldFtpXSA9IGk7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHRyYWNrIGJ5IGtleSBmb3IgYW4gaXRlbS5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7U3RyaW5nfSBbdHJhY2tCeUtleV1cbiAqL1xuXG5mdW5jdGlvbiBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KSB7XG4gIHJldHVybiB0cmFja0J5S2V5ID8gdHJhY2tCeUtleSA9PT0gJyRpbmRleCcgPyBpbmRleCA6IHRyYWNrQnlLZXkuY2hhckF0KDApLm1hdGNoKC9cXHcvKSA/IGdldFBhdGgodmFsdWUsIHRyYWNrQnlLZXkpIDogdmFsdWVbdHJhY2tCeUtleV0gOiBrZXkgfHwgdmFsdWU7XG59XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZGb3Iud2FybkR1cGxpY2F0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHdhcm4oJ0R1cGxpY2F0ZSB2YWx1ZSBmb3VuZCBpbiB2LWZvcj1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpICsgJy4gVXNlIHRyYWNrLWJ5PVwiJGluZGV4XCIgaWYgJyArICd5b3UgYXJlIGV4cGVjdGluZyBkdXBsaWNhdGUgdmFsdWVzLicsIHRoaXMudm0pO1xuICB9O1xufVxuXG52YXIgdklmID0ge1xuXG4gIHByaW9yaXR5OiBJRixcbiAgdGVybWluYWw6IHRydWUsXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIGlmICghZWwuX192dWVfXykge1xuICAgICAgLy8gY2hlY2sgZWxzZSBibG9ja1xuICAgICAgdmFyIG5leHQgPSBlbC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICBpZiAobmV4dCAmJiBnZXRBdHRyKG5leHQsICd2LWVsc2UnKSAhPT0gbnVsbCkge1xuICAgICAgICByZW1vdmUobmV4dCk7XG4gICAgICAgIHRoaXMuZWxzZUVsID0gbmV4dDtcbiAgICAgIH1cbiAgICAgIC8vIGNoZWNrIG1haW4gYmxvY2tcbiAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWlmJyk7XG4gICAgICByZXBsYWNlKGVsLCB0aGlzLmFuY2hvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1pZj1cIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgY2Fubm90IGJlICcgKyAndXNlZCBvbiBhbiBpbnN0YW5jZSByb290IGVsZW1lbnQuJywgdGhpcy52bSk7XG4gICAgICB0aGlzLmludmFsaWQgPSB0cnVlO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmludmFsaWQpIHJldHVybjtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGlmICghdGhpcy5mcmFnKSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0KCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlKCk7XG4gICAgfVxuICB9LFxuXG4gIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KCkge1xuICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XG4gICAgICB0aGlzLmVsc2VGcmFnLnJlbW92ZSgpO1xuICAgICAgdGhpcy5lbHNlRnJhZyA9IG51bGw7XG4gICAgfVxuICAgIC8vIGxhenkgaW5pdCBmYWN0b3J5XG4gICAgaWYgKCF0aGlzLmZhY3RvcnkpIHtcbiAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgdGhpcy5lbCk7XG4gICAgfVxuICAgIHRoaXMuZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUodGhpcy5faG9zdCwgdGhpcy5fc2NvcGUsIHRoaXMuX2ZyYWcpO1xuICAgIHRoaXMuZnJhZy5iZWZvcmUodGhpcy5hbmNob3IpO1xuICB9LFxuXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgIGlmICh0aGlzLmZyYWcpIHtcbiAgICAgIHRoaXMuZnJhZy5yZW1vdmUoKTtcbiAgICAgIHRoaXMuZnJhZyA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLmVsc2VFbCAmJiAhdGhpcy5lbHNlRnJhZykge1xuICAgICAgaWYgKCF0aGlzLmVsc2VGYWN0b3J5KSB7XG4gICAgICAgIHRoaXMuZWxzZUZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMuZWxzZUVsLl9jb250ZXh0IHx8IHRoaXMudm0sIHRoaXMuZWxzZUVsKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZWxzZUZyYWcgPSB0aGlzLmVsc2VGYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZyk7XG4gICAgICB0aGlzLmVsc2VGcmFnLmJlZm9yZSh0aGlzLmFuY2hvcik7XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIGlmICh0aGlzLmZyYWcpIHtcbiAgICAgIHRoaXMuZnJhZy5kZXN0cm95KCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XG4gICAgICB0aGlzLmVsc2VGcmFnLmRlc3Ryb3koKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBzaG93ID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gY2hlY2sgZWxzZSBibG9ja1xuICAgIHZhciBuZXh0ID0gdGhpcy5lbC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgaWYgKG5leHQgJiYgZ2V0QXR0cihuZXh0LCAndi1lbHNlJykgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuZWxzZUVsID0gbmV4dDtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB0aGlzLmFwcGx5KHRoaXMuZWwsIHZhbHVlKTtcbiAgICBpZiAodGhpcy5lbHNlRWwpIHtcbiAgICAgIHRoaXMuYXBwbHkodGhpcy5lbHNlRWwsICF2YWx1ZSk7XG4gICAgfVxuICB9LFxuXG4gIGFwcGx5OiBmdW5jdGlvbiBhcHBseShlbCwgdmFsdWUpIHtcbiAgICBpZiAoaW5Eb2MoZWwpKSB7XG4gICAgICBhcHBseVRyYW5zaXRpb24oZWwsIHZhbHVlID8gMSA6IC0xLCB0b2dnbGUsIHRoaXMudm0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b2dnbGUoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdG9nZ2xlKCkge1xuICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gJycgOiAnbm9uZSc7XG4gICAgfVxuICB9XG59O1xuXG52YXIgdGV4dCQyID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIGlzUmFuZ2UgPSBlbC50eXBlID09PSAncmFuZ2UnO1xuICAgIHZhciBsYXp5ID0gdGhpcy5wYXJhbXMubGF6eTtcbiAgICB2YXIgbnVtYmVyID0gdGhpcy5wYXJhbXMubnVtYmVyO1xuICAgIHZhciBkZWJvdW5jZSA9IHRoaXMucGFyYW1zLmRlYm91bmNlO1xuXG4gICAgLy8gaGFuZGxlIGNvbXBvc2l0aW9uIGV2ZW50cy5cbiAgICAvLyAgIGh0dHA6Ly9ibG9nLmV2YW55b3UubWUvMjAxNC8wMS8wMy9jb21wb3NpdGlvbi1ldmVudC9cbiAgICAvLyBza2lwIHRoaXMgZm9yIEFuZHJvaWQgYmVjYXVzZSBpdCBoYW5kbGVzIGNvbXBvc2l0aW9uXG4gICAgLy8gZXZlbnRzIHF1aXRlIGRpZmZlcmVudGx5LiBBbmRyb2lkIGRvZXNuJ3QgdHJpZ2dlclxuICAgIC8vIGNvbXBvc2l0aW9uIGV2ZW50cyBmb3IgbGFuZ3VhZ2UgaW5wdXQgbWV0aG9kcyBlLmcuXG4gICAgLy8gQ2hpbmVzZSwgYnV0IGluc3RlYWQgdHJpZ2dlcnMgdGhlbSBmb3Igc3BlbGxpbmdcbiAgICAvLyBzdWdnZXN0aW9ucy4uLiAoc2VlIERpc2N1c3Npb24vIzE2MilcbiAgICB2YXIgY29tcG9zaW5nID0gZmFsc2U7XG4gICAgaWYgKCFpc0FuZHJvaWQgJiYgIWlzUmFuZ2UpIHtcbiAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbXBvc2luZyA9IHRydWU7XG4gICAgICB9KTtcbiAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb21wb3NpbmcgPSBmYWxzZTtcbiAgICAgICAgLy8gaW4gSUUxMSB0aGUgXCJjb21wb3NpdGlvbmVuZFwiIGV2ZW50IGZpcmVzIEFGVEVSXG4gICAgICAgIC8vIHRoZSBcImlucHV0XCIgZXZlbnQsIHNvIHRoZSBpbnB1dCBoYW5kbGVyIGlzIGJsb2NrZWRcbiAgICAgICAgLy8gYXQgdGhlIGVuZC4uLiBoYXZlIHRvIGNhbGwgaXQgaGVyZS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gIzEzMjc6IGluIGxhenkgbW9kZSB0aGlzIGlzIHVuZWNlc3NhcnkuXG4gICAgICAgIGlmICghbGF6eSkge1xuICAgICAgICAgIHNlbGYubGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gcHJldmVudCBtZXNzaW5nIHdpdGggdGhlIGlucHV0IHdoZW4gdXNlciBpcyB0eXBpbmcsXG4gICAgLy8gYW5kIGZvcmNlIHVwZGF0ZSBvbiBibHVyLlxuICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlO1xuICAgIGlmICghaXNSYW5nZSAmJiAhbGF6eSkge1xuICAgICAgdGhpcy5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuZm9jdXNlZCA9IHRydWU7XG4gICAgICB9KTtcbiAgICAgIHRoaXMub24oJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuZm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAvLyBkbyBub3Qgc3luYyB2YWx1ZSBhZnRlciBmcmFnbWVudCByZW1vdmFsICgjMjAxNylcbiAgICAgICAgaWYgKCFzZWxmLl9mcmFnIHx8IHNlbGYuX2ZyYWcuaW5zZXJ0ZWQpIHtcbiAgICAgICAgICBzZWxmLnJhd0xpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE5vdyBhdHRhY2ggdGhlIG1haW4gbGlzdGVuZXJcbiAgICB0aGlzLmxpc3RlbmVyID0gdGhpcy5yYXdMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChjb21wb3NpbmcgfHwgIXNlbGYuX2JvdW5kKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciB2YWwgPSBudW1iZXIgfHwgaXNSYW5nZSA/IHRvTnVtYmVyKGVsLnZhbHVlKSA6IGVsLnZhbHVlO1xuICAgICAgc2VsZi5zZXQodmFsKTtcbiAgICAgIC8vIGZvcmNlIHVwZGF0ZSBvbiBuZXh0IHRpY2sgdG8gYXZvaWQgbG9jayAmIHNhbWUgdmFsdWVcbiAgICAgIC8vIGFsc28gb25seSB1cGRhdGUgd2hlbiB1c2VyIGlzIG5vdCB0eXBpbmdcbiAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlbGYuX2JvdW5kICYmICFzZWxmLmZvY3VzZWQpIHtcbiAgICAgICAgICBzZWxmLnVwZGF0ZShzZWxmLl93YXRjaGVyLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIGFwcGx5IGRlYm91bmNlXG4gICAgaWYgKGRlYm91bmNlKSB7XG4gICAgICB0aGlzLmxpc3RlbmVyID0gX2RlYm91bmNlKHRoaXMubGlzdGVuZXIsIGRlYm91bmNlKTtcbiAgICB9XG5cbiAgICAvLyBTdXBwb3J0IGpRdWVyeSBldmVudHMsIHNpbmNlIGpRdWVyeS50cmlnZ2VyKCkgZG9lc24ndFxuICAgIC8vIHRyaWdnZXIgbmF0aXZlIGV2ZW50cyBpbiBzb21lIGNhc2VzIGFuZCBzb21lIHBsdWdpbnNcbiAgICAvLyByZWx5IG9uICQudHJpZ2dlcigpXG4gICAgLy9cbiAgICAvLyBXZSB3YW50IHRvIG1ha2Ugc3VyZSBpZiBhIGxpc3RlbmVyIGlzIGF0dGFjaGVkIHVzaW5nXG4gICAgLy8galF1ZXJ5LCBpdCBpcyBhbHNvIHJlbW92ZWQgd2l0aCBqUXVlcnksIHRoYXQncyB3aHlcbiAgICAvLyB3ZSBkbyB0aGUgY2hlY2sgZm9yIGVhY2ggZGlyZWN0aXZlIGluc3RhbmNlIGFuZFxuICAgIC8vIHN0b3JlIHRoYXQgY2hlY2sgcmVzdWx0IG9uIGl0c2VsZi4gVGhpcyBhbHNvIGFsbG93c1xuICAgIC8vIGVhc2llciB0ZXN0IGNvdmVyYWdlIGNvbnRyb2wgYnkgdW5zZXR0aW5nIHRoZSBnbG9iYWxcbiAgICAvLyBqUXVlcnkgdmFyaWFibGUgaW4gdGVzdHMuXG4gICAgdGhpcy5oYXNqUXVlcnkgPSB0eXBlb2YgalF1ZXJ5ID09PSAnZnVuY3Rpb24nO1xuICAgIGlmICh0aGlzLmhhc2pRdWVyeSkge1xuICAgICAgdmFyIG1ldGhvZCA9IGpRdWVyeS5mbi5vbiA/ICdvbicgOiAnYmluZCc7XG4gICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2NoYW5nZScsIHRoaXMucmF3TGlzdGVuZXIpO1xuICAgICAgaWYgKCFsYXp5KSB7XG4gICAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5yYXdMaXN0ZW5lcik7XG4gICAgICBpZiAoIWxhenkpIHtcbiAgICAgICAgdGhpcy5vbignaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJRTkgZG9lc24ndCBmaXJlIGlucHV0IGV2ZW50IG9uIGJhY2tzcGFjZS9kZWwvY3V0XG4gICAgaWYgKCFsYXp5ICYmIGlzSUU5KSB7XG4gICAgICB0aGlzLm9uKCdjdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG5leHRUaWNrKHNlbGYubGlzdGVuZXIpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDQ2IHx8IGUua2V5Q29kZSA9PT0gOCkge1xuICAgICAgICAgIHNlbGYubGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gc2V0IGluaXRpYWwgdmFsdWUgaWYgcHJlc2VudFxuICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykgfHwgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyAmJiBlbC52YWx1ZS50cmltKCkpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICAvLyAjMzAyOSBvbmx5IHVwZGF0ZSB3aGVuIHRoZSB2YWx1ZSBjaGFuZ2VzLiBUaGlzIHByZXZlbnRcbiAgICAvLyBicm93c2VycyBmcm9tIG92ZXJ3cml0aW5nIHZhbHVlcyBsaWtlIHNlbGVjdGlvblN0YXJ0XG4gICAgdmFsdWUgPSBfdG9TdHJpbmcodmFsdWUpO1xuICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5lbC52YWx1ZSkgdGhpcy5lbC52YWx1ZSA9IHZhbHVlO1xuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgaWYgKHRoaXMuaGFzalF1ZXJ5KSB7XG4gICAgICB2YXIgbWV0aG9kID0galF1ZXJ5LmZuLm9mZiA/ICdvZmYnIDogJ3VuYmluZCc7XG4gICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHJhZGlvID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cbiAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gdmFsdWUgb3ZlcndyaXRlIHZpYSB2LWJpbmQ6dmFsdWVcbiAgICAgIGlmIChlbC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykpIHtcbiAgICAgICAgcmV0dXJuIGVsLl92YWx1ZTtcbiAgICAgIH1cbiAgICAgIHZhciB2YWwgPSBlbC52YWx1ZTtcbiAgICAgIGlmIChzZWxmLnBhcmFtcy5udW1iZXIpIHtcbiAgICAgICAgdmFsID0gdG9OdW1iZXIodmFsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfTtcblxuICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBzZWxmLnNldChzZWxmLmdldFZhbHVlKCkpO1xuICAgIH07XG4gICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cbiAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdjaGVja2VkJykpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB0aGlzLmVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCB0aGlzLmdldFZhbHVlKCkpO1xuICB9XG59O1xuXG52YXIgc2VsZWN0ID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXG4gICAgLy8gbWV0aG9kIHRvIGZvcmNlIHVwZGF0ZSBET00gdXNpbmcgbGF0ZXN0IHZhbHVlLlxuICAgIHRoaXMuZm9yY2VVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoc2VsZi5fd2F0Y2hlcikge1xuICAgICAgICBzZWxmLnVwZGF0ZShzZWxmLl93YXRjaGVyLmdldCgpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhIG11bHRpcGxlIHNlbGVjdFxuICAgIHZhciBtdWx0aXBsZSA9IHRoaXMubXVsdGlwbGUgPSBlbC5oYXNBdHRyaWJ1dGUoJ211bHRpcGxlJyk7XG5cbiAgICAvLyBhdHRhY2ggbGlzdGVuZXJcbiAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0VmFsdWUoZWwsIG11bHRpcGxlKTtcbiAgICAgIHZhbHVlID0gc2VsZi5wYXJhbXMubnVtYmVyID8gaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5tYXAodG9OdW1iZXIpIDogdG9OdW1iZXIodmFsdWUpIDogdmFsdWU7XG4gICAgICBzZWxmLnNldCh2YWx1ZSk7XG4gICAgfTtcbiAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblxuICAgIC8vIGlmIGhhcyBpbml0aWFsIHZhbHVlLCBzZXQgYWZ0ZXJCaW5kXG4gICAgdmFyIGluaXRWYWx1ZSA9IGdldFZhbHVlKGVsLCBtdWx0aXBsZSwgdHJ1ZSk7XG4gICAgaWYgKG11bHRpcGxlICYmIGluaXRWYWx1ZS5sZW5ndGggfHwgIW11bHRpcGxlICYmIGluaXRWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuICAgIH1cblxuICAgIC8vIEFsbCBtYWpvciBicm93c2VycyBleGNlcHQgRmlyZWZveCByZXNldHNcbiAgICAvLyBzZWxlY3RlZEluZGV4IHdpdGggdmFsdWUgLTEgdG8gMCB3aGVuIHRoZSBlbGVtZW50XG4gICAgLy8gaXMgYXBwZW5kZWQgdG8gYSBuZXcgcGFyZW50LCB0aGVyZWZvcmUgd2UgaGF2ZSB0b1xuICAgIC8vIGZvcmNlIGEgRE9NIHVwZGF0ZSB3aGVuZXZlciB0aGF0IGhhcHBlbnMuLi5cbiAgICB0aGlzLnZtLiRvbignaG9vazphdHRhY2hlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIG5leHRUaWNrKF90aGlzLmZvcmNlVXBkYXRlKTtcbiAgICB9KTtcbiAgICBpZiAoIWluRG9jKGVsKSkge1xuICAgICAgbmV4dFRpY2sodGhpcy5mb3JjZVVwZGF0ZSk7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICBlbC5zZWxlY3RlZEluZGV4ID0gLTE7XG4gICAgdmFyIG11bHRpID0gdGhpcy5tdWx0aXBsZSAmJiBpc0FycmF5KHZhbHVlKTtcbiAgICB2YXIgb3B0aW9ucyA9IGVsLm9wdGlvbnM7XG4gICAgdmFyIGkgPSBvcHRpb25zLmxlbmd0aDtcbiAgICB2YXIgb3AsIHZhbDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBvcCA9IG9wdGlvbnNbaV07XG4gICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBvcC5fdmFsdWUgOiBvcC52YWx1ZTtcbiAgICAgIC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuICAgICAgb3Auc2VsZWN0ZWQgPSBtdWx0aSA/IGluZGV4T2YkMSh2YWx1ZSwgdmFsKSA+IC0xIDogbG9vc2VFcXVhbCh2YWx1ZSwgdmFsKTtcbiAgICAgIC8qIGVzbGludC1lbmFibGUgZXFlcWVxICovXG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgdGhpcy52bS4kb2ZmKCdob29rOmF0dGFjaGVkJywgdGhpcy5mb3JjZVVwZGF0ZSk7XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IHNlbGVjdCB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7U2VsZWN0RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gbXVsdGlcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5pdFxuICogQHJldHVybiB7QXJyYXl8Kn1cbiAqL1xuXG5mdW5jdGlvbiBnZXRWYWx1ZShlbCwgbXVsdGksIGluaXQpIHtcbiAgdmFyIHJlcyA9IG11bHRpID8gW10gOiBudWxsO1xuICB2YXIgb3AsIHZhbCwgc2VsZWN0ZWQ7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gZWwub3B0aW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBvcCA9IGVsLm9wdGlvbnNbaV07XG4gICAgc2VsZWN0ZWQgPSBpbml0ID8gb3AuaGFzQXR0cmlidXRlKCdzZWxlY3RlZCcpIDogb3Auc2VsZWN0ZWQ7XG4gICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBvcC5fdmFsdWUgOiBvcC52YWx1ZTtcbiAgICAgIGlmIChtdWx0aSkge1xuICAgICAgICByZXMucHVzaCh2YWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBOYXRpdmUgQXJyYXkuaW5kZXhPZiB1c2VzIHN0cmljdCBlcXVhbCwgYnV0IGluIHRoaXNcbiAqIGNhc2Ugd2UgbmVlZCB0byBtYXRjaCBzdHJpbmcvbnVtYmVycyB3aXRoIGN1c3RvbSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuZnVuY3Rpb24gaW5kZXhPZiQxKGFyciwgdmFsKSB7XG4gIHZhciBpID0gYXJyLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIGlmIChsb29zZUVxdWFsKGFycltpXSwgdmFsKSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxudmFyIGNoZWNrYm94ID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cbiAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGVsLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IGVsLl92YWx1ZSA6IHNlbGYucGFyYW1zLm51bWJlciA/IHRvTnVtYmVyKGVsLnZhbHVlKSA6IGVsLnZhbHVlO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXRCb29sZWFuVmFsdWUoKSB7XG4gICAgICB2YXIgdmFsID0gZWwuY2hlY2tlZDtcbiAgICAgIGlmICh2YWwgJiYgZWwuaGFzT3duUHJvcGVydHkoJ190cnVlVmFsdWUnKSkge1xuICAgICAgICByZXR1cm4gZWwuX3RydWVWYWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmICghdmFsICYmIGVsLmhhc093blByb3BlcnR5KCdfZmFsc2VWYWx1ZScpKSB7XG4gICAgICAgIHJldHVybiBlbC5fZmFsc2VWYWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuXG4gICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBtb2RlbCA9IHNlbGYuX3dhdGNoZXIudmFsdWU7XG4gICAgICBpZiAoaXNBcnJheShtb2RlbCkpIHtcbiAgICAgICAgdmFyIHZhbCA9IHNlbGYuZ2V0VmFsdWUoKTtcbiAgICAgICAgaWYgKGVsLmNoZWNrZWQpIHtcbiAgICAgICAgICBpZiAoaW5kZXhPZihtb2RlbCwgdmFsKSA8IDApIHtcbiAgICAgICAgICAgIG1vZGVsLnB1c2godmFsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbW9kZWwuJHJlbW92ZSh2YWwpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLnNldChnZXRCb29sZWFuVmFsdWUoKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkge1xuICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICBlbC5jaGVja2VkID0gaW5kZXhPZih2YWx1ZSwgdGhpcy5nZXRWYWx1ZSgpKSA+IC0xO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZWwuaGFzT3duUHJvcGVydHkoJ190cnVlVmFsdWUnKSkge1xuICAgICAgICBlbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgZWwuX3RydWVWYWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5jaGVja2VkID0gISF2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbnZhciBoYW5kbGVycyA9IHtcbiAgdGV4dDogdGV4dCQyLFxuICByYWRpbzogcmFkaW8sXG4gIHNlbGVjdDogc2VsZWN0LFxuICBjaGVja2JveDogY2hlY2tib3hcbn07XG5cbnZhciBtb2RlbCA9IHtcblxuICBwcmlvcml0eTogTU9ERUwsXG4gIHR3b1dheTogdHJ1ZSxcbiAgaGFuZGxlcnM6IGhhbmRsZXJzLFxuICBwYXJhbXM6IFsnbGF6eScsICdudW1iZXInLCAnZGVib3VuY2UnXSxcblxuICAvKipcbiAgICogUG9zc2libGUgZWxlbWVudHM6XG4gICAqICAgPHNlbGVjdD5cbiAgICogICA8dGV4dGFyZWE+XG4gICAqICAgPGlucHV0IHR5cGU9XCIqXCI+XG4gICAqICAgICAtIHRleHRcbiAgICogICAgIC0gY2hlY2tib3hcbiAgICogICAgIC0gcmFkaW9cbiAgICogICAgIC0gbnVtYmVyXG4gICAqL1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gZnJpZW5kbHkgd2FybmluZy4uLlxuICAgIHRoaXMuY2hlY2tGaWx0ZXJzKCk7XG4gICAgaWYgKHRoaXMuaGFzUmVhZCAmJiAhdGhpcy5oYXNXcml0ZSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIGEgcmVhZC1vbmx5IGZpbHRlciB3aXRoICcgKyAndi1tb2RlbD1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiLiAnICsgJ1lvdSBtaWdodCB3YW50IHRvIHVzZSBhIHR3by13YXkgZmlsdGVyIHRvIGVuc3VyZSBjb3JyZWN0IGJlaGF2aW9yLicsIHRoaXMudm0pO1xuICAgIH1cbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciB0YWcgPSBlbC50YWdOYW1lO1xuICAgIHZhciBoYW5kbGVyO1xuICAgIGlmICh0YWcgPT09ICdJTlBVVCcpIHtcbiAgICAgIGhhbmRsZXIgPSBoYW5kbGVyc1tlbC50eXBlXSB8fCBoYW5kbGVycy50ZXh0O1xuICAgIH0gZWxzZSBpZiAodGFnID09PSAnU0VMRUNUJykge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXJzLnNlbGVjdDtcbiAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXJzLnRleHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1tb2RlbCBkb2VzIG5vdCBzdXBwb3J0IGVsZW1lbnQgdHlwZTogJyArIHRhZywgdGhpcy52bSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGVsLl9fdl9tb2RlbCA9IHRoaXM7XG4gICAgaGFuZGxlci5iaW5kLmNhbGwodGhpcyk7XG4gICAgdGhpcy51cGRhdGUgPSBoYW5kbGVyLnVwZGF0ZTtcbiAgICB0aGlzLl91bmJpbmQgPSBoYW5kbGVyLnVuYmluZDtcbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2sgcmVhZC93cml0ZSBmaWx0ZXIgc3RhdHMuXG4gICAqL1xuXG4gIGNoZWNrRmlsdGVyczogZnVuY3Rpb24gY2hlY2tGaWx0ZXJzKCkge1xuICAgIHZhciBmaWx0ZXJzID0gdGhpcy5maWx0ZXJzO1xuICAgIGlmICghZmlsdGVycykgcmV0dXJuO1xuICAgIHZhciBpID0gZmlsdGVycy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFyIGZpbHRlciA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlcnNbaV0ubmFtZSk7XG4gICAgICBpZiAodHlwZW9mIGZpbHRlciA9PT0gJ2Z1bmN0aW9uJyB8fCBmaWx0ZXIucmVhZCkge1xuICAgICAgICB0aGlzLmhhc1JlYWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKGZpbHRlci53cml0ZSkge1xuICAgICAgICB0aGlzLmhhc1dyaXRlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdGhpcy5lbC5fX3ZfbW9kZWwgPSBudWxsO1xuICAgIHRoaXMuX3VuYmluZCAmJiB0aGlzLl91bmJpbmQoKTtcbiAgfVxufTtcblxuLy8ga2V5Q29kZSBhbGlhc2VzXG52YXIga2V5Q29kZXMgPSB7XG4gIGVzYzogMjcsXG4gIHRhYjogOSxcbiAgZW50ZXI6IDEzLFxuICBzcGFjZTogMzIsXG4gICdkZWxldGUnOiBbOCwgNDZdLFxuICB1cDogMzgsXG4gIGxlZnQ6IDM3LFxuICByaWdodDogMzksXG4gIGRvd246IDQwXG59O1xuXG5mdW5jdGlvbiBrZXlGaWx0ZXIoaGFuZGxlciwga2V5cykge1xuICB2YXIgY29kZXMgPSBrZXlzLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIGNoYXJDb2RlID0ga2V5LmNoYXJDb2RlQXQoMCk7XG4gICAgaWYgKGNoYXJDb2RlID4gNDcgJiYgY2hhckNvZGUgPCA1OCkge1xuICAgICAgcmV0dXJuIHBhcnNlSW50KGtleSwgMTApO1xuICAgIH1cbiAgICBpZiAoa2V5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgY2hhckNvZGUgPSBrZXkudG9VcHBlckNhc2UoKS5jaGFyQ29kZUF0KDApO1xuICAgICAgaWYgKGNoYXJDb2RlID4gNjQgJiYgY2hhckNvZGUgPCA5MSkge1xuICAgICAgICByZXR1cm4gY2hhckNvZGU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBrZXlDb2Rlc1trZXldO1xuICB9KTtcbiAgY29kZXMgPSBbXS5jb25jYXQuYXBwbHkoW10sIGNvZGVzKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIGtleUhhbmRsZXIoZSkge1xuICAgIGlmIChjb2Rlcy5pbmRleE9mKGUua2V5Q29kZSkgPiAtMSkge1xuICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0b3BGaWx0ZXIoaGFuZGxlcikge1xuICByZXR1cm4gZnVuY3Rpb24gc3RvcEhhbmRsZXIoZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcHJldmVudEZpbHRlcihoYW5kbGVyKSB7XG4gIHJldHVybiBmdW5jdGlvbiBwcmV2ZW50SGFuZGxlcihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHNlbGZGaWx0ZXIoaGFuZGxlcikge1xuICByZXR1cm4gZnVuY3Rpb24gc2VsZkhhbmRsZXIoZSkge1xuICAgIGlmIChlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIG9uJDEgPSB7XG5cbiAgcHJpb3JpdHk6IE9OLFxuICBhY2NlcHRTdGF0ZW1lbnQ6IHRydWUsXG4gIGtleUNvZGVzOiBrZXlDb2RlcyxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIGRlYWwgd2l0aCBpZnJhbWVzXG4gICAgaWYgKHRoaXMuZWwudGFnTmFtZSA9PT0gJ0lGUkFNRScgJiYgdGhpcy5hcmcgIT09ICdsb2FkJykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdGhpcy5pZnJhbWVCaW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBvbihzZWxmLmVsLmNvbnRlbnRXaW5kb3csIHNlbGYuYXJnLCBzZWxmLmhhbmRsZXIsIHNlbGYubW9kaWZpZXJzLmNhcHR1cmUpO1xuICAgICAgfTtcbiAgICAgIHRoaXMub24oJ2xvYWQnLCB0aGlzLmlmcmFtZUJpbmQpO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShoYW5kbGVyKSB7XG4gICAgLy8gc3R1YiBhIG5vb3AgZm9yIHYtb24gd2l0aCBubyB2YWx1ZSxcbiAgICAvLyBlLmcuIEBtb3VzZWRvd24ucHJldmVudFxuICAgIGlmICghdGhpcy5kZXNjcmlwdG9yLnJhdykge1xuICAgICAgaGFuZGxlciA9IGZ1bmN0aW9uICgpIHt9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgaGFuZGxlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LW9uOicgKyB0aGlzLmFyZyArICc9XCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiIGV4cGVjdHMgYSBmdW5jdGlvbiB2YWx1ZSwgJyArICdnb3QgJyArIGhhbmRsZXIsIHRoaXMudm0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGFwcGx5IG1vZGlmaWVyc1xuICAgIGlmICh0aGlzLm1vZGlmaWVycy5zdG9wKSB7XG4gICAgICBoYW5kbGVyID0gc3RvcEZpbHRlcihoYW5kbGVyKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubW9kaWZpZXJzLnByZXZlbnQpIHtcbiAgICAgIGhhbmRsZXIgPSBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5tb2RpZmllcnMuc2VsZikge1xuICAgICAgaGFuZGxlciA9IHNlbGZGaWx0ZXIoaGFuZGxlcik7XG4gICAgfVxuICAgIC8vIGtleSBmaWx0ZXJcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMubW9kaWZpZXJzKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIGtleSAhPT0gJ3N0b3AnICYmIGtleSAhPT0gJ3ByZXZlbnQnICYmIGtleSAhPT0gJ3NlbGYnICYmIGtleSAhPT0gJ2NhcHR1cmUnO1xuICAgIH0pO1xuICAgIGlmIChrZXlzLmxlbmd0aCkge1xuICAgICAgaGFuZGxlciA9IGtleUZpbHRlcihoYW5kbGVyLCBrZXlzKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlc2V0KCk7XG4gICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlcjtcblxuICAgIGlmICh0aGlzLmlmcmFtZUJpbmQpIHtcbiAgICAgIHRoaXMuaWZyYW1lQmluZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvbih0aGlzLmVsLCB0aGlzLmFyZywgdGhpcy5oYW5kbGVyLCB0aGlzLm1vZGlmaWVycy5jYXB0dXJlKTtcbiAgICB9XG4gIH0sXG5cbiAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIHZhciBlbCA9IHRoaXMuaWZyYW1lQmluZCA/IHRoaXMuZWwuY29udGVudFdpbmRvdyA6IHRoaXMuZWw7XG4gICAgaWYgKHRoaXMuaGFuZGxlcikge1xuICAgICAgb2ZmKGVsLCB0aGlzLmFyZywgdGhpcy5oYW5kbGVyKTtcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdGhpcy5yZXNldCgpO1xuICB9XG59O1xuXG52YXIgcHJlZml4ZXMgPSBbJy13ZWJraXQtJywgJy1tb3otJywgJy1tcy0nXTtcbnZhciBjYW1lbFByZWZpeGVzID0gWydXZWJraXQnLCAnTW96JywgJ21zJ107XG52YXIgaW1wb3J0YW50UkUgPSAvIWltcG9ydGFudDs/JC87XG52YXIgcHJvcENhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxudmFyIHRlc3RFbCA9IG51bGw7XG5cbnZhciBzdHlsZSA9IHtcblxuICBkZWVwOiB0cnVlLFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuZWwuc3R5bGUuY3NzVGV4dCA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlLnJlZHVjZShleHRlbmQsIHt9KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlIHx8IHt9KTtcbiAgICB9XG4gIH0sXG5cbiAgaGFuZGxlT2JqZWN0OiBmdW5jdGlvbiBoYW5kbGVPYmplY3QodmFsdWUpIHtcbiAgICAvLyBjYWNoZSBvYmplY3Qgc3R5bGVzIHNvIHRoYXQgb25seSBjaGFuZ2VkIHByb3BzXG4gICAgLy8gYXJlIGFjdHVhbGx5IHVwZGF0ZWQuXG4gICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZSB8fCAodGhpcy5jYWNoZSA9IHt9KTtcbiAgICB2YXIgbmFtZSwgdmFsO1xuICAgIGZvciAobmFtZSBpbiBjYWNoZSkge1xuICAgICAgaWYgKCEobmFtZSBpbiB2YWx1ZSkpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVTaW5nbGUobmFtZSwgbnVsbCk7XG4gICAgICAgIGRlbGV0ZSBjYWNoZVtuYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChuYW1lIGluIHZhbHVlKSB7XG4gICAgICB2YWwgPSB2YWx1ZVtuYW1lXTtcbiAgICAgIGlmICh2YWwgIT09IGNhY2hlW25hbWVdKSB7XG4gICAgICAgIGNhY2hlW25hbWVdID0gdmFsO1xuICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShuYW1lLCB2YWwpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBoYW5kbGVTaW5nbGU6IGZ1bmN0aW9uIGhhbmRsZVNpbmdsZShwcm9wLCB2YWx1ZSkge1xuICAgIHByb3AgPSBub3JtYWxpemUocHJvcCk7XG4gICAgaWYgKCFwcm9wKSByZXR1cm47IC8vIHVuc3VwcG9ydGVkIHByb3BcbiAgICAvLyBjYXN0IHBvc3NpYmxlIG51bWJlcnMvYm9vbGVhbnMgaW50byBzdHJpbmdzXG4gICAgaWYgKHZhbHVlICE9IG51bGwpIHZhbHVlICs9ICcnO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdmFyIGlzSW1wb3J0YW50ID0gaW1wb3J0YW50UkUudGVzdCh2YWx1ZSkgPyAnaW1wb3J0YW50JyA6ICcnO1xuICAgICAgaWYgKGlzSW1wb3J0YW50KSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIHdhcm4oJ0l0XFwncyBwcm9iYWJseSBhIGJhZCBpZGVhIHRvIHVzZSAhaW1wb3J0YW50IHdpdGggaW5saW5lIHJ1bGVzLiAnICsgJ1RoaXMgZmVhdHVyZSB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiBvZiBWdWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKGltcG9ydGFudFJFLCAnJykudHJpbSgpO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KHByb3Aua2ViYWIsIHZhbHVlLCBpc0ltcG9ydGFudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVsLnN0eWxlW3Byb3AuY2FtZWxdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWwuc3R5bGVbcHJvcC5jYW1lbF0gPSAnJztcbiAgICB9XG4gIH1cblxufTtcblxuLyoqXG4gKiBOb3JtYWxpemUgYSBDU1MgcHJvcGVydHkgbmFtZS5cbiAqIC0gY2FjaGUgcmVzdWx0XG4gKiAtIGF1dG8gcHJlZml4XG4gKiAtIGNhbWVsQ2FzZSAtPiBkYXNoLWNhc2VcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZShwcm9wKSB7XG4gIGlmIChwcm9wQ2FjaGVbcHJvcF0pIHtcbiAgICByZXR1cm4gcHJvcENhY2hlW3Byb3BdO1xuICB9XG4gIHZhciByZXMgPSBwcmVmaXgocHJvcCk7XG4gIHByb3BDYWNoZVtwcm9wXSA9IHByb3BDYWNoZVtyZXNdID0gcmVzO1xuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEF1dG8gZGV0ZWN0IHRoZSBhcHByb3ByaWF0ZSBwcmVmaXggZm9yIGEgQ1NTIHByb3BlcnR5LlxuICogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vcGF1bGlyaXNoLzUyMzY5MlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gcHJlZml4KHByb3ApIHtcbiAgcHJvcCA9IGh5cGhlbmF0ZShwcm9wKTtcbiAgdmFyIGNhbWVsID0gY2FtZWxpemUocHJvcCk7XG4gIHZhciB1cHBlciA9IGNhbWVsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWwuc2xpY2UoMSk7XG4gIGlmICghdGVzdEVsKSB7XG4gICAgdGVzdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIH1cbiAgdmFyIGkgPSBwcmVmaXhlcy5sZW5ndGg7XG4gIHZhciBwcmVmaXhlZDtcbiAgaWYgKGNhbWVsICE9PSAnZmlsdGVyJyAmJiBjYW1lbCBpbiB0ZXN0RWwuc3R5bGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAga2ViYWI6IHByb3AsXG4gICAgICBjYW1lbDogY2FtZWxcbiAgICB9O1xuICB9XG4gIHdoaWxlIChpLS0pIHtcbiAgICBwcmVmaXhlZCA9IGNhbWVsUHJlZml4ZXNbaV0gKyB1cHBlcjtcbiAgICBpZiAocHJlZml4ZWQgaW4gdGVzdEVsLnN0eWxlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBrZWJhYjogcHJlZml4ZXNbaV0gKyBwcm9wLFxuICAgICAgICBjYW1lbDogcHJlZml4ZWRcbiAgICAgIH07XG4gICAgfVxuICB9XG59XG5cbi8vIHhsaW5rXG52YXIgeGxpbmtOUyA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJztcbnZhciB4bGlua1JFID0gL154bGluazovO1xuXG4vLyBjaGVjayBmb3IgYXR0cmlidXRlcyB0aGF0IHByb2hpYml0IGludGVycG9sYXRpb25zXG52YXIgZGlzYWxsb3dlZEludGVycEF0dHJSRSA9IC9edi18Xjp8XkB8Xig/OmlzfHRyYW5zaXRpb258dHJhbnNpdGlvbi1tb2RlfGRlYm91bmNlfHRyYWNrLWJ5fHN0YWdnZXJ8ZW50ZXItc3RhZ2dlcnxsZWF2ZS1zdGFnZ2VyKSQvO1xuLy8gdGhlc2UgYXR0cmlidXRlcyBzaG91bGQgYWxzbyBzZXQgdGhlaXIgY29ycmVzcG9uZGluZyBwcm9wZXJ0aWVzXG4vLyBiZWNhdXNlIHRoZXkgb25seSBhZmZlY3QgdGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIGVsZW1lbnRcbnZhciBhdHRyV2l0aFByb3BzUkUgPSAvXig/OnZhbHVlfGNoZWNrZWR8c2VsZWN0ZWR8bXV0ZWQpJC87XG4vLyB0aGVzZSBhdHRyaWJ1dGVzIGV4cGVjdCBlbnVtcmF0ZWQgdmFsdWVzIG9mIFwidHJ1ZVwiIG9yIFwiZmFsc2VcIlxuLy8gYnV0IGFyZSBub3QgYm9vbGVhbiBhdHRyaWJ1dGVzXG52YXIgZW51bWVyYXRlZEF0dHJSRSA9IC9eKD86ZHJhZ2dhYmxlfGNvbnRlbnRlZGl0YWJsZXxzcGVsbGNoZWNrKSQvO1xuXG4vLyB0aGVzZSBhdHRyaWJ1dGVzIHNob3VsZCBzZXQgYSBoaWRkZW4gcHJvcGVydHkgZm9yXG4vLyBiaW5kaW5nIHYtbW9kZWwgdG8gb2JqZWN0IHZhbHVlc1xudmFyIG1vZGVsUHJvcHMgPSB7XG4gIHZhbHVlOiAnX3ZhbHVlJyxcbiAgJ3RydWUtdmFsdWUnOiAnX3RydWVWYWx1ZScsXG4gICdmYWxzZS12YWx1ZSc6ICdfZmFsc2VWYWx1ZSdcbn07XG5cbnZhciBiaW5kJDEgPSB7XG5cbiAgcHJpb3JpdHk6IEJJTkQsXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgYXR0ciA9IHRoaXMuYXJnO1xuICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWU7XG4gICAgLy8gc2hvdWxkIGJlIGRlZXAgd2F0Y2ggb24gb2JqZWN0IG1vZGVcbiAgICBpZiAoIWF0dHIpIHtcbiAgICAgIHRoaXMuZGVlcCA9IHRydWU7XG4gICAgfVxuICAgIC8vIGhhbmRsZSBpbnRlcnBvbGF0aW9uIGJpbmRpbmdzXG4gICAgdmFyIGRlc2NyaXB0b3IgPSB0aGlzLmRlc2NyaXB0b3I7XG4gICAgdmFyIHRva2VucyA9IGRlc2NyaXB0b3IuaW50ZXJwO1xuICAgIGlmICh0b2tlbnMpIHtcbiAgICAgIC8vIGhhbmRsZSBpbnRlcnBvbGF0aW9ucyB3aXRoIG9uZS10aW1lIHRva2Vuc1xuICAgICAgaWYgKGRlc2NyaXB0b3IuaGFzT25lVGltZSkge1xuICAgICAgICB0aGlzLmV4cHJlc3Npb24gPSB0b2tlbnNUb0V4cCh0b2tlbnMsIHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pO1xuICAgICAgfVxuXG4gICAgICAvLyBvbmx5IGFsbG93IGJpbmRpbmcgb24gbmF0aXZlIGF0dHJpYnV0ZXNcbiAgICAgIGlmIChkaXNhbGxvd2VkSW50ZXJwQXR0clJFLnRlc3QoYXR0cikgfHwgYXR0ciA9PT0gJ25hbWUnICYmICh0YWcgPT09ICdQQVJUSUFMJyB8fCB0YWcgPT09ICdTTE9UJykpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKGF0dHIgKyAnPVwiJyArIGRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2F0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uIGlzIG5vdCBhbGxvd2VkIGluIFZ1ZS5qcyAnICsgJ2RpcmVjdGl2ZXMgYW5kIHNwZWNpYWwgYXR0cmlidXRlcy4nLCB0aGlzLnZtKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgICAgIHRoaXMuaW52YWxpZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgdmFyIHJhdyA9IGF0dHIgKyAnPVwiJyArIGRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnO1xuICAgICAgICAvLyB3YXJuIHNyY1xuICAgICAgICBpZiAoYXR0ciA9PT0gJ3NyYycpIHtcbiAgICAgICAgICB3YXJuKHJhdyArICdpbnRlcnBvbGF0aW9uIGluIFwic3JjXCIgYXR0cmlidXRlIHdpbGwgY2F1c2UgJyArICdhIDQwNCByZXF1ZXN0LiBVc2Ugdi1iaW5kOnNyYyBpbnN0ZWFkLicsIHRoaXMudm0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2FybiBzdHlsZVxuICAgICAgICBpZiAoYXR0ciA9PT0gJ3N0eWxlJykge1xuICAgICAgICAgIHdhcm4ocmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzdHlsZVwiIGF0dHJpYnV0ZSB3aWxsIGNhdXNlICcgKyAndGhlIGF0dHJpYnV0ZSB0byBiZSBkaXNjYXJkZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIuICcgKyAnVXNlIHYtYmluZDpzdHlsZSBpbnN0ZWFkLicsIHRoaXMudm0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuaW52YWxpZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgYXR0ciA9IHRoaXMuYXJnO1xuICAgIGlmICh0aGlzLmFyZykge1xuICAgICAgdGhpcy5oYW5kbGVTaW5nbGUoYXR0ciwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZSB8fCB7fSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIHNoYXJlIG9iamVjdCBoYW5kbGVyIHdpdGggdi1iaW5kOmNsYXNzXG4gIGhhbmRsZU9iamVjdDogc3R5bGUuaGFuZGxlT2JqZWN0LFxuXG4gIGhhbmRsZVNpbmdsZTogZnVuY3Rpb24gaGFuZGxlU2luZ2xlKGF0dHIsIHZhbHVlKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgaW50ZXJwID0gdGhpcy5kZXNjcmlwdG9yLmludGVycDtcbiAgICBpZiAodGhpcy5tb2RpZmllcnMuY2FtZWwpIHtcbiAgICAgIGF0dHIgPSBjYW1lbGl6ZShhdHRyKTtcbiAgICB9XG4gICAgaWYgKCFpbnRlcnAgJiYgYXR0cldpdGhQcm9wc1JFLnRlc3QoYXR0cikgJiYgYXR0ciBpbiBlbCkge1xuICAgICAgdmFyIGF0dHJWYWx1ZSA9IGF0dHIgPT09ICd2YWx1ZScgPyB2YWx1ZSA9PSBudWxsIC8vIElFOSB3aWxsIHNldCBpbnB1dC52YWx1ZSB0byBcIm51bGxcIiBmb3IgbnVsbC4uLlxuICAgICAgPyAnJyA6IHZhbHVlIDogdmFsdWU7XG5cbiAgICAgIGlmIChlbFthdHRyXSAhPT0gYXR0clZhbHVlKSB7XG4gICAgICAgIGVsW2F0dHJdID0gYXR0clZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBzZXQgbW9kZWwgcHJvcHNcbiAgICB2YXIgbW9kZWxQcm9wID0gbW9kZWxQcm9wc1thdHRyXTtcbiAgICBpZiAoIWludGVycCAmJiBtb2RlbFByb3ApIHtcbiAgICAgIGVsW21vZGVsUHJvcF0gPSB2YWx1ZTtcbiAgICAgIC8vIHVwZGF0ZSB2LW1vZGVsIGlmIHByZXNlbnRcbiAgICAgIHZhciBtb2RlbCA9IGVsLl9fdl9tb2RlbDtcbiAgICAgIGlmIChtb2RlbCkge1xuICAgICAgICBtb2RlbC5saXN0ZW5lcigpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBkbyBub3Qgc2V0IHZhbHVlIGF0dHJpYnV0ZSBmb3IgdGV4dGFyZWFcbiAgICBpZiAoYXR0ciA9PT0gJ3ZhbHVlJyAmJiBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHVwZGF0ZSBhdHRyaWJ1dGVcbiAgICBpZiAoZW51bWVyYXRlZEF0dHJSRS50ZXN0KGF0dHIpKSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUgPyAndHJ1ZScgOiAnZmFsc2UnKTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlICE9IG51bGwgJiYgdmFsdWUgIT09IGZhbHNlKSB7XG4gICAgICBpZiAoYXR0ciA9PT0gJ2NsYXNzJykge1xuICAgICAgICAvLyBoYW5kbGUgZWRnZSBjYXNlICMxOTYwOlxuICAgICAgICAvLyBjbGFzcyBpbnRlcnBvbGF0aW9uIHNob3VsZCBub3Qgb3ZlcndyaXRlIFZ1ZSB0cmFuc2l0aW9uIGNsYXNzXG4gICAgICAgIGlmIChlbC5fX3ZfdHJhbnMpIHtcbiAgICAgICAgICB2YWx1ZSArPSAnICcgKyBlbC5fX3ZfdHJhbnMuaWQgKyAnLXRyYW5zaXRpb24nO1xuICAgICAgICB9XG4gICAgICAgIHNldENsYXNzKGVsLCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHhsaW5rUkUudGVzdChhdHRyKSkge1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBhdHRyLCB2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlID09PSB0cnVlID8gJycgOiB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBlbCA9IHtcblxuICBwcmlvcml0eTogRUwsXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIXRoaXMuYXJnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpZCA9IHRoaXMuaWQgPSBjYW1lbGl6ZSh0aGlzLmFyZyk7XG4gICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJGVscztcbiAgICBpZiAoaGFzT3duKHJlZnMsIGlkKSkge1xuICAgICAgcmVmc1tpZF0gPSB0aGlzLmVsO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWZpbmVSZWFjdGl2ZShyZWZzLCBpZCwgdGhpcy5lbCk7XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRlbHM7XG4gICAgaWYgKHJlZnNbdGhpcy5pZF0gPT09IHRoaXMuZWwpIHtcbiAgICAgIHJlZnNbdGhpcy5pZF0gPSBudWxsO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHJlZiA9IHtcbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3YtcmVmOicgKyB0aGlzLmFyZyArICcgbXVzdCBiZSB1c2VkIG9uIGEgY2hpbGQgJyArICdjb21wb25lbnQuIEZvdW5kIG9uIDwnICsgdGhpcy5lbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyAnPi4nLCB0aGlzLnZtKTtcbiAgfVxufTtcblxudmFyIGNsb2FrID0ge1xuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdGhpcy52bS4kb25jZSgncHJlLWhvb2s6Y29tcGlsZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3YtY2xvYWsnKTtcbiAgICB9KTtcbiAgfVxufTtcblxuLy8gbXVzdCBleHBvcnQgcGxhaW4gb2JqZWN0XG52YXIgZGlyZWN0aXZlcyA9IHtcbiAgdGV4dDogdGV4dCQxLFxuICBodG1sOiBodG1sLFxuICAnZm9yJzogdkZvcixcbiAgJ2lmJzogdklmLFxuICBzaG93OiBzaG93LFxuICBtb2RlbDogbW9kZWwsXG4gIG9uOiBvbiQxLFxuICBiaW5kOiBiaW5kJDEsXG4gIGVsOiBlbCxcbiAgcmVmOiByZWYsXG4gIGNsb2FrOiBjbG9ha1xufTtcblxudmFyIHZDbGFzcyA9IHtcblxuICBkZWVwOiB0cnVlLFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgdGhpcy5jbGVhbnVwKCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLnNldENsYXNzKHZhbHVlLnRyaW0oKS5zcGxpdCgvXFxzKy8pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRDbGFzcyhub3JtYWxpemUkMSh2YWx1ZSkpO1xuICAgIH1cbiAgfSxcblxuICBzZXRDbGFzczogZnVuY3Rpb24gc2V0Q2xhc3ModmFsdWUpIHtcbiAgICB0aGlzLmNsZWFudXAodmFsdWUpO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgdmFsID0gdmFsdWVbaV07XG4gICAgICBpZiAodmFsKSB7XG4gICAgICAgIGFwcGx5KHRoaXMuZWwsIHZhbCwgYWRkQ2xhc3MpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnByZXZLZXlzID0gdmFsdWU7XG4gIH0sXG5cbiAgY2xlYW51cDogZnVuY3Rpb24gY2xlYW51cCh2YWx1ZSkge1xuICAgIHZhciBwcmV2S2V5cyA9IHRoaXMucHJldktleXM7XG4gICAgaWYgKCFwcmV2S2V5cykgcmV0dXJuO1xuICAgIHZhciBpID0gcHJldktleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciBrZXkgPSBwcmV2S2V5c1tpXTtcbiAgICAgIGlmICghdmFsdWUgfHwgdmFsdWUuaW5kZXhPZihrZXkpIDwgMCkge1xuICAgICAgICBhcHBseSh0aGlzLmVsLCBrZXksIHJlbW92ZUNsYXNzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogTm9ybWFsaXplIG9iamVjdHMgYW5kIGFycmF5cyAocG90ZW50aWFsbHkgY29udGFpbmluZyBvYmplY3RzKVxuICogaW50byBhcnJheSBvZiBzdHJpbmdzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5PFN0cmluZ3xPYmplY3Q+fSB2YWx1ZVxuICogQHJldHVybiB7QXJyYXk8U3RyaW5nPn1cbiAqL1xuXG5mdW5jdGlvbiBub3JtYWxpemUkMSh2YWx1ZSkge1xuICB2YXIgcmVzID0gW107XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgX2tleSA9IHZhbHVlW2ldO1xuICAgICAgaWYgKF9rZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBfa2V5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHJlcy5wdXNoKF9rZXkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAodmFyIGsgaW4gX2tleSkge1xuICAgICAgICAgICAgaWYgKF9rZXlba10pIHJlcy5wdXNoKGspO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZVtrZXldKSByZXMucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEFkZCBvciByZW1vdmUgYSBjbGFzcy9jbGFzc2VzIG9uIGFuIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBjbGFzcyBuYW1lLiBUaGlzIG1heSBvciBtYXkgbm90XG4gKiAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW4gYSBzcGFjZSBjaGFyYWN0ZXIsIGluIHN1Y2ggYVxuICogICAgICAgICAgICAgICAgICAgICBjYXNlIHdlJ2xsIGRlYWwgd2l0aCBtdWx0aXBsZSBjbGFzc1xuICogICAgICAgICAgICAgICAgICAgICBuYW1lcyBhdCBvbmNlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuXG5mdW5jdGlvbiBhcHBseShlbCwga2V5LCBmbikge1xuICBrZXkgPSBrZXkudHJpbSgpO1xuICBpZiAoa2V5LmluZGV4T2YoJyAnKSA9PT0gLTEpIHtcbiAgICBmbihlbCwga2V5KTtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gVGhlIGtleSBjb250YWlucyBvbmUgb3IgbW9yZSBzcGFjZSBjaGFyYWN0ZXJzLlxuICAvLyBTaW5jZSBhIGNsYXNzIG5hbWUgZG9lc24ndCBhY2NlcHQgc3VjaCBjaGFyYWN0ZXJzLCB3ZVxuICAvLyB0cmVhdCBpdCBhcyBtdWx0aXBsZSBjbGFzc2VzLlxuICB2YXIga2V5cyA9IGtleS5zcGxpdCgvXFxzKy8pO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZm4oZWwsIGtleXNbaV0pO1xuICB9XG59XG5cbnZhciBjb21wb25lbnQgPSB7XG5cbiAgcHJpb3JpdHk6IENPTVBPTkVOVCxcblxuICBwYXJhbXM6IFsna2VlcC1hbGl2ZScsICd0cmFuc2l0aW9uLW1vZGUnLCAnaW5saW5lLXRlbXBsYXRlJ10sXG5cbiAgLyoqXG4gICAqIFNldHVwLiBUd28gcG9zc2libGUgdXNhZ2VzOlxuICAgKlxuICAgKiAtIHN0YXRpYzpcbiAgICogICA8Y29tcD4gb3IgPGRpdiB2LWNvbXBvbmVudD1cImNvbXBcIj5cbiAgICpcbiAgICogLSBkeW5hbWljOlxuICAgKiAgIDxjb21wb25lbnQgOmlzPVwidmlld1wiPlxuICAgKi9cblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIGlmICghdGhpcy5lbC5fX3Z1ZV9fKSB7XG4gICAgICAvLyBrZWVwLWFsaXZlIGNhY2hlXG4gICAgICB0aGlzLmtlZXBBbGl2ZSA9IHRoaXMucGFyYW1zLmtlZXBBbGl2ZTtcbiAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgICB0aGlzLmNhY2hlID0ge307XG4gICAgICB9XG4gICAgICAvLyBjaGVjayBpbmxpbmUtdGVtcGxhdGVcbiAgICAgIGlmICh0aGlzLnBhcmFtcy5pbmxpbmVUZW1wbGF0ZSkge1xuICAgICAgICAvLyBleHRyYWN0IGlubGluZSB0ZW1wbGF0ZSBhcyBhIERvY3VtZW50RnJhZ21lbnRcbiAgICAgICAgdGhpcy5pbmxpbmVUZW1wbGF0ZSA9IGV4dHJhY3RDb250ZW50KHRoaXMuZWwsIHRydWUpO1xuICAgICAgfVxuICAgICAgLy8gY29tcG9uZW50IHJlc29sdXRpb24gcmVsYXRlZCBzdGF0ZVxuICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSB0aGlzLkNvbXBvbmVudCA9IG51bGw7XG4gICAgICAvLyB0cmFuc2l0aW9uIHJlbGF0ZWQgc3RhdGVcbiAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxzID0gMDtcbiAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxDYiA9IG51bGw7XG4gICAgICAvLyBjcmVhdGUgYSByZWYgYW5jaG9yXG4gICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1jb21wb25lbnQnKTtcbiAgICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuICAgICAgLy8gcmVtb3ZlIGlzIGF0dHJpYnV0ZS5cbiAgICAgIC8vIHRoaXMgaXMgcmVtb3ZlZCBkdXJpbmcgY29tcGlsYXRpb24sIGJ1dCBiZWNhdXNlIGNvbXBpbGF0aW9uIGlzXG4gICAgICAvLyBjYWNoZWQsIHdoZW4gdGhlIGNvbXBvbmVudCBpcyB1c2VkIGVsc2V3aGVyZSB0aGlzIGF0dHJpYnV0ZVxuICAgICAgLy8gd2lsbCByZW1haW4gYXQgbGluayB0aW1lLlxuICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ2lzJyk7XG4gICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnOmlzJyk7XG4gICAgICAvLyByZW1vdmUgcmVmLCBzYW1lIGFzIGFib3ZlXG4gICAgICBpZiAodGhpcy5kZXNjcmlwdG9yLnJlZikge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgndi1yZWY6JyArIGh5cGhlbmF0ZSh0aGlzLmRlc2NyaXB0b3IucmVmKSk7XG4gICAgICB9XG4gICAgICAvLyBpZiBzdGF0aWMsIGJ1aWxkIHJpZ2h0IG5vdy5cbiAgICAgIGlmICh0aGlzLmxpdGVyYWwpIHtcbiAgICAgICAgdGhpcy5zZXRDb21wb25lbnQodGhpcy5leHByZXNzaW9uKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdjYW5ub3QgbW91bnQgY29tcG9uZW50IFwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiAnICsgJ29uIGFscmVhZHkgbW91bnRlZCBlbGVtZW50OiAnICsgdGhpcy5lbCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBQdWJsaWMgdXBkYXRlLCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIgaW4gdGhlIGR5bmFtaWNcbiAgICogbGl0ZXJhbCBzY2VuYXJpbywgZS5nLiA8Y29tcG9uZW50IDppcz1cInZpZXdcIj5cbiAgICovXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICBpZiAoIXRoaXMubGl0ZXJhbCkge1xuICAgICAgdGhpcy5zZXRDb21wb25lbnQodmFsdWUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogU3dpdGNoIGR5bmFtaWMgY29tcG9uZW50cy4gTWF5IHJlc29sdmUgdGhlIGNvbXBvbmVudFxuICAgKiBhc3luY2hyb25vdXNseSwgYW5kIHBlcmZvcm0gdHJhbnNpdGlvbiBiYXNlZCBvblxuICAgKiBzcGVjaWZpZWQgdHJhbnNpdGlvbiBtb2RlLiBBY2NlcHRzIGEgZmV3IGFkZGl0aW9uYWxcbiAgICogYXJndW1lbnRzIHNwZWNpZmljYWxseSBmb3IgdnVlLXJvdXRlci5cbiAgICpcbiAgICogVGhlIGNhbGxiYWNrIGlzIGNhbGxlZCB3aGVuIHRoZSBmdWxsIHRyYW5zaXRpb24gaXNcbiAgICogZmluaXNoZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIHNldENvbXBvbmVudDogZnVuY3Rpb24gc2V0Q29tcG9uZW50KHZhbHVlLCBjYikge1xuICAgIHRoaXMuaW52YWxpZGF0ZVBlbmRpbmcoKTtcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAvLyBqdXN0IHJlbW92ZSBjdXJyZW50XG4gICAgICB0aGlzLnVuYnVpbGQodHJ1ZSk7XG4gICAgICB0aGlzLnJlbW92ZSh0aGlzLmNoaWxkVk0sIGNiKTtcbiAgICAgIHRoaXMuY2hpbGRWTSA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHRoaXMucmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLm1vdW50Q29tcG9uZW50KGNiKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVzb2x2ZSB0aGUgY29tcG9uZW50IGNvbnN0cnVjdG9yIHRvIHVzZSB3aGVuIGNyZWF0aW5nXG4gICAqIHRoZSBjaGlsZCB2bS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHZhbHVlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqL1xuXG4gIHJlc29sdmVDb21wb25lbnQ6IGZ1bmN0aW9uIHJlc29sdmVDb21wb25lbnQodmFsdWUsIGNiKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKENvbXBvbmVudCkge1xuICAgICAgc2VsZi5Db21wb25lbnROYW1lID0gQ29tcG9uZW50Lm9wdGlvbnMubmFtZSB8fCAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogbnVsbCk7XG4gICAgICBzZWxmLkNvbXBvbmVudCA9IENvbXBvbmVudDtcbiAgICAgIGNiKCk7XG4gICAgfSk7XG4gICAgdGhpcy52bS5fcmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2UgdXNpbmcgdGhlIGN1cnJlbnQgY29uc3RydWN0b3IgYW5kXG4gICAqIHJlcGxhY2UgdGhlIGV4aXN0aW5nIGluc3RhbmNlLiBUaGlzIG1ldGhvZCBkb2Vzbid0IGNhcmVcbiAgICogd2hldGhlciB0aGUgbmV3IGNvbXBvbmVudCBhbmQgdGhlIG9sZCBvbmUgYXJlIGFjdHVhbGx5XG4gICAqIHRoZSBzYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIG1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiBtb3VudENvbXBvbmVudChjYikge1xuICAgIC8vIGFjdHVhbCBtb3VudFxuICAgIHRoaXMudW5idWlsZCh0cnVlKTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGFjdGl2YXRlSG9va3MgPSB0aGlzLkNvbXBvbmVudC5vcHRpb25zLmFjdGl2YXRlO1xuICAgIHZhciBjYWNoZWQgPSB0aGlzLmdldENhY2hlZCgpO1xuICAgIHZhciBuZXdDb21wb25lbnQgPSB0aGlzLmJ1aWxkKCk7XG4gICAgaWYgKGFjdGl2YXRlSG9va3MgJiYgIWNhY2hlZCkge1xuICAgICAgdGhpcy53YWl0aW5nRm9yID0gbmV3Q29tcG9uZW50O1xuICAgICAgY2FsbEFjdGl2YXRlSG9va3MoYWN0aXZhdGVIb29rcywgbmV3Q29tcG9uZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChzZWxmLndhaXRpbmdGb3IgIT09IG5ld0NvbXBvbmVudCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLndhaXRpbmdGb3IgPSBudWxsO1xuICAgICAgICBzZWxmLnRyYW5zaXRpb24obmV3Q29tcG9uZW50LCBjYik7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlIHJlZiBmb3Iga2VwdC1hbGl2ZSBjb21wb25lbnRcbiAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgbmV3Q29tcG9uZW50Ll91cGRhdGVSZWYoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudHJhbnNpdGlvbihuZXdDb21wb25lbnQsIGNiKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIGNvbXBvbmVudCBjaGFuZ2VzIG9yIHVuYmluZHMgYmVmb3JlIGFuIGFzeW5jXG4gICAqIGNvbnN0cnVjdG9yIGlzIHJlc29sdmVkLCB3ZSBuZWVkIHRvIGludmFsaWRhdGUgaXRzXG4gICAqIHBlbmRpbmcgY2FsbGJhY2suXG4gICAqL1xuXG4gIGludmFsaWRhdGVQZW5kaW5nOiBmdW5jdGlvbiBpbnZhbGlkYXRlUGVuZGluZygpIHtcbiAgICBpZiAodGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpIHtcbiAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiLmNhbmNlbCgpO1xuICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSBudWxsO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSW5zdGFudGlhdGUvaW5zZXJ0IGEgbmV3IGNoaWxkIHZtLlxuICAgKiBJZiBrZWVwIGFsaXZlIGFuZCBoYXMgY2FjaGVkIGluc3RhbmNlLCBpbnNlcnQgdGhhdFxuICAgKiBpbnN0YW5jZTsgb3RoZXJ3aXNlIGJ1aWxkIGEgbmV3IG9uZSBhbmQgY2FjaGUgaXQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbZXh0cmFPcHRpb25zXVxuICAgKiBAcmV0dXJuIHtWdWV9IC0gdGhlIGNyZWF0ZWQgaW5zdGFuY2VcbiAgICovXG5cbiAgYnVpbGQ6IGZ1bmN0aW9uIGJ1aWxkKGV4dHJhT3B0aW9ucykge1xuICAgIHZhciBjYWNoZWQgPSB0aGlzLmdldENhY2hlZCgpO1xuICAgIGlmIChjYWNoZWQpIHtcbiAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLkNvbXBvbmVudCkge1xuICAgICAgLy8gZGVmYXVsdCBvcHRpb25zXG4gICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgbmFtZTogdGhpcy5Db21wb25lbnROYW1lLFxuICAgICAgICBlbDogY2xvbmVOb2RlKHRoaXMuZWwpLFxuICAgICAgICB0ZW1wbGF0ZTogdGhpcy5pbmxpbmVUZW1wbGF0ZSxcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRvIGFkZCB0aGUgY2hpbGQgd2l0aCBjb3JyZWN0IHBhcmVudFxuICAgICAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBpdHMgcGFyZW50XG4gICAgICAgIC8vIHNob3VsZCBiZSB0aGUgdHJhbnNjbHVzaW9uIGhvc3QuXG4gICAgICAgIHBhcmVudDogdGhpcy5faG9zdCB8fCB0aGlzLnZtLFxuICAgICAgICAvLyBpZiBubyBpbmxpbmUtdGVtcGxhdGUsIHRoZW4gdGhlIGNvbXBpbGVkXG4gICAgICAgIC8vIGxpbmtlciBjYW4gYmUgY2FjaGVkIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuXG4gICAgICAgIF9saW5rZXJDYWNoYWJsZTogIXRoaXMuaW5saW5lVGVtcGxhdGUsXG4gICAgICAgIF9yZWY6IHRoaXMuZGVzY3JpcHRvci5yZWYsXG4gICAgICAgIF9hc0NvbXBvbmVudDogdHJ1ZSxcbiAgICAgICAgX2lzUm91dGVyVmlldzogdGhpcy5faXNSb3V0ZXJWaWV3LFxuICAgICAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBjb250ZXh0XG4gICAgICAgIC8vIHdpbGwgYmUgdGhlIGNvbW1vbiBwYXJlbnQgdm0gb2YgdGhpcyBpbnN0YW5jZVxuICAgICAgICAvLyBhbmQgaXRzIGhvc3QuXG4gICAgICAgIF9jb250ZXh0OiB0aGlzLnZtLFxuICAgICAgICAvLyBpZiB0aGlzIGlzIGluc2lkZSBhbiBpbmxpbmUgdi1mb3IsIHRoZSBzY29wZVxuICAgICAgICAvLyB3aWxsIGJlIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgY3JlYXRlZCBmb3IgdGhpc1xuICAgICAgICAvLyByZXBlYXQgZnJhZ21lbnQuIHRoaXMgaXMgdXNlZCBmb3IgbGlua2luZyBwcm9wc1xuICAgICAgICAvLyBhbmQgY29udGFpbmVyIGRpcmVjdGl2ZXMuXG4gICAgICAgIF9zY29wZTogdGhpcy5fc2NvcGUsXG4gICAgICAgIC8vIHBhc3MgaW4gdGhlIG93bmVyIGZyYWdtZW50IG9mIHRoaXMgY29tcG9uZW50LlxuICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBzbyB0aGF0IHRoZSBmcmFnbWVudCBjYW4ga2VlcFxuICAgICAgICAvLyB0cmFjayBvZiBpdHMgY29udGFpbmVkIGNvbXBvbmVudHMgaW4gb3JkZXIgdG9cbiAgICAgICAgLy8gY2FsbCBhdHRhY2gvZGV0YWNoIGhvb2tzIGZvciB0aGVtLlxuICAgICAgICBfZnJhZzogdGhpcy5fZnJhZ1xuICAgICAgfTtcbiAgICAgIC8vIGV4dHJhIG9wdGlvbnNcbiAgICAgIC8vIGluIDEuMC4wIHRoaXMgaXMgdXNlZCBieSB2dWUtcm91dGVyIG9ubHlcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKGV4dHJhT3B0aW9ucykge1xuICAgICAgICBleHRlbmQob3B0aW9ucywgZXh0cmFPcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIHZhciBjaGlsZCA9IG5ldyB0aGlzLkNvbXBvbmVudChvcHRpb25zKTtcbiAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgICB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF0gPSBjaGlsZDtcbiAgICAgIH1cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbC5oYXNBdHRyaWJ1dGUoJ3RyYW5zaXRpb24nKSAmJiBjaGlsZC5faXNGcmFnbWVudCkge1xuICAgICAgICB3YXJuKCdUcmFuc2l0aW9ucyB3aWxsIG5vdCB3b3JrIG9uIGEgZnJhZ21lbnQgaW5zdGFuY2UuICcgKyAnVGVtcGxhdGU6ICcgKyBjaGlsZC4kb3B0aW9ucy50ZW1wbGF0ZSwgY2hpbGQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVHJ5IHRvIGdldCBhIGNhY2hlZCBpbnN0YW5jZSBvZiB0aGUgY3VycmVudCBjb21wb25lbnQuXG4gICAqXG4gICAqIEByZXR1cm4ge1Z1ZXx1bmRlZmluZWR9XG4gICAqL1xuXG4gIGdldENhY2hlZDogZnVuY3Rpb24gZ2V0Q2FjaGVkKCkge1xuICAgIHJldHVybiB0aGlzLmtlZXBBbGl2ZSAmJiB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF07XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRlYXJkb3duIHRoZSBjdXJyZW50IGNoaWxkLCBidXQgZGVmZXJzIGNsZWFudXAgc29cbiAgICogdGhhdCB3ZSBjYW4gc2VwYXJhdGUgdGhlIGRlc3Ryb3kgYW5kIHJlbW92YWwgc3RlcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJcbiAgICovXG5cbiAgdW5idWlsZDogZnVuY3Rpb24gdW5idWlsZChkZWZlcikge1xuICAgIGlmICh0aGlzLndhaXRpbmdGb3IpIHtcbiAgICAgIGlmICghdGhpcy5rZWVwQWxpdmUpIHtcbiAgICAgICAgdGhpcy53YWl0aW5nRm9yLiRkZXN0cm95KCk7XG4gICAgICB9XG4gICAgICB0aGlzLndhaXRpbmdGb3IgPSBudWxsO1xuICAgIH1cbiAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkVk07XG4gICAgaWYgKCFjaGlsZCB8fCB0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgaWYgKGNoaWxkKSB7XG4gICAgICAgIC8vIHJlbW92ZSByZWZcbiAgICAgICAgY2hpbGQuX2luYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgY2hpbGQuX3VwZGF0ZVJlZih0cnVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gdGhlIHNvbGUgcHVycG9zZSBvZiBgZGVmZXJDbGVhbnVwYCBpcyBzbyB0aGF0IHdlIGNhblxuICAgIC8vIFwiZGVhY3RpdmF0ZVwiIHRoZSB2bSByaWdodCBub3cgYW5kIHBlcmZvcm0gRE9NIHJlbW92YWxcbiAgICAvLyBsYXRlci5cbiAgICBjaGlsZC4kZGVzdHJveShmYWxzZSwgZGVmZXIpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZW1vdmUgY3VycmVudCBkZXN0cm95ZWQgY2hpbGQgYW5kIG1hbnVhbGx5IGRvXG4gICAqIHRoZSBjbGVhbnVwIGFmdGVyIHJlbW92YWwuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqL1xuXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGNoaWxkLCBjYikge1xuICAgIHZhciBrZWVwQWxpdmUgPSB0aGlzLmtlZXBBbGl2ZTtcbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgIC8vIHdlIG1heSBoYXZlIGEgY29tcG9uZW50IHN3aXRjaCB3aGVuIGEgcHJldmlvdXNcbiAgICAgIC8vIGNvbXBvbmVudCBpcyBzdGlsbCBiZWluZyB0cmFuc2l0aW9uZWQgb3V0LlxuICAgICAgLy8gd2Ugd2FudCB0byB0cmlnZ2VyIG9ubHkgb25lIGxhc3Rlc3QgaW5zZXJ0aW9uIGNiXG4gICAgICAvLyB3aGVuIHRoZSBleGlzdGluZyB0cmFuc2l0aW9uIGZpbmlzaGVzLiAoIzExMTkpXG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmFscysrO1xuICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbENiID0gY2I7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBjaGlsZC4kcmVtb3ZlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbHMtLTtcbiAgICAgICAgaWYgKCFrZWVwQWxpdmUpIGNoaWxkLl9jbGVhbnVwKCk7XG4gICAgICAgIGlmICghc2VsZi5wZW5kaW5nUmVtb3ZhbHMgJiYgc2VsZi5wZW5kaW5nUmVtb3ZhbENiKSB7XG4gICAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbENiKCk7XG4gICAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbENiID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChjYikge1xuICAgICAgY2IoKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFjdHVhbGx5IHN3YXAgdGhlIGNvbXBvbmVudHMsIGRlcGVuZGluZyBvbiB0aGVcbiAgICogdHJhbnNpdGlvbiBtb2RlLiBEZWZhdWx0cyB0byBzaW11bHRhbmVvdXMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICB0cmFuc2l0aW9uOiBmdW5jdGlvbiB0cmFuc2l0aW9uKHRhcmdldCwgY2IpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGN1cnJlbnQgPSB0aGlzLmNoaWxkVk07XG4gICAgLy8gZm9yIGRldnRvb2wgaW5zcGVjdGlvblxuICAgIGlmIChjdXJyZW50KSBjdXJyZW50Ll9pbmFjdGl2ZSA9IHRydWU7XG4gICAgdGFyZ2V0Ll9pbmFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuY2hpbGRWTSA9IHRhcmdldDtcbiAgICBzd2l0Y2ggKHNlbGYucGFyYW1zLnRyYW5zaXRpb25Nb2RlKSB7XG4gICAgICBjYXNlICdpbi1vdXQnOlxuICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQsIGNiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnb3V0LWluJzpcbiAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBjYik7XG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQpO1xuICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgY2IpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVW5iaW5kLlxuICAgKi9cblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB0aGlzLmludmFsaWRhdGVQZW5kaW5nKCk7XG4gICAgLy8gRG8gbm90IGRlZmVyIGNsZWFudXAgd2hlbiB1bmJpbmRpbmdcbiAgICB0aGlzLnVuYnVpbGQoKTtcbiAgICAvLyBkZXN0cm95IGFsbCBrZWVwLWFsaXZlIGNhY2hlZCBpbnN0YW5jZXNcbiAgICBpZiAodGhpcy5jYWNoZSkge1xuICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuY2FjaGUpIHtcbiAgICAgICAgdGhpcy5jYWNoZVtrZXldLiRkZXN0cm95KCk7XG4gICAgICB9XG4gICAgICB0aGlzLmNhY2hlID0gbnVsbDtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQ2FsbCBhY3RpdmF0ZSBob29rcyBpbiBvcmRlciAoYXN5bmNocm9ub3VzKVxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGhvb2tzXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKi9cblxuZnVuY3Rpb24gY2FsbEFjdGl2YXRlSG9va3MoaG9va3MsIHZtLCBjYikge1xuICB2YXIgdG90YWwgPSBob29rcy5sZW5ndGg7XG4gIHZhciBjYWxsZWQgPSAwO1xuICBob29rc1swXS5jYWxsKHZtLCBuZXh0KTtcbiAgZnVuY3Rpb24gbmV4dCgpIHtcbiAgICBpZiAoKytjYWxsZWQgPj0gdG90YWwpIHtcbiAgICAgIGNiKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhvb2tzW2NhbGxlZF0uY2FsbCh2bSwgbmV4dCk7XG4gICAgfVxuICB9XG59XG5cbnZhciBwcm9wQmluZGluZ01vZGVzID0gY29uZmlnLl9wcm9wQmluZGluZ01vZGVzO1xudmFyIGVtcHR5ID0ge307XG5cbi8vIHJlZ2V4ZXNcbnZhciBpZGVudFJFJDEgPSAvXlskX2EtekEtWl0rW1xcdyRdKiQvO1xudmFyIHNldHRhYmxlUGF0aFJFID0gL15bQS1aYS16XyRdW1xcdyRdKihcXC5bQS1aYS16XyRdW1xcdyRdKnxcXFtbXlxcW1xcXV0rXFxdKSokLztcblxuLyoqXG4gKiBDb21waWxlIHByb3BzIG9uIGEgcm9vdCBlbGVtZW50IGFuZCByZXR1cm5cbiAqIGEgcHJvcHMgbGluayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BPcHRpb25zXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBwcm9wc0xpbmtGblxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVQcm9wcyhlbCwgcHJvcE9wdGlvbnMsIHZtKSB7XG4gIHZhciBwcm9wcyA9IFtdO1xuICB2YXIgbmFtZXMgPSBPYmplY3Qua2V5cyhwcm9wT3B0aW9ucyk7XG4gIHZhciBpID0gbmFtZXMubGVuZ3RoO1xuICB2YXIgb3B0aW9ucywgbmFtZSwgYXR0ciwgdmFsdWUsIHBhdGgsIHBhcnNlZCwgcHJvcDtcbiAgd2hpbGUgKGktLSkge1xuICAgIG5hbWUgPSBuYW1lc1tpXTtcbiAgICBvcHRpb25zID0gcHJvcE9wdGlvbnNbbmFtZV0gfHwgZW1wdHk7XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBuYW1lID09PSAnJGRhdGEnKSB7XG4gICAgICB3YXJuKCdEbyBub3QgdXNlICRkYXRhIGFzIHByb3AuJywgdm0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gcHJvcHMgY291bGQgY29udGFpbiBkYXNoZXMsIHdoaWNoIHdpbGwgYmVcbiAgICAvLyBpbnRlcnByZXRlZCBhcyBtaW51cyBjYWxjdWxhdGlvbnMgYnkgdGhlIHBhcnNlclxuICAgIC8vIHNvIHdlIG5lZWQgdG8gY2FtZWxpemUgdGhlIHBhdGggaGVyZVxuICAgIHBhdGggPSBjYW1lbGl6ZShuYW1lKTtcbiAgICBpZiAoIWlkZW50UkUkMS50ZXN0KHBhdGgpKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgcHJvcCBrZXk6IFwiJyArIG5hbWUgKyAnXCIuIFByb3Aga2V5cyAnICsgJ211c3QgYmUgdmFsaWQgaWRlbnRpZmllcnMuJywgdm0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgcHJvcCA9IHtcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBwYXRoOiBwYXRoLFxuICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgIG1vZGU6IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWSxcbiAgICAgIHJhdzogbnVsbFxuICAgIH07XG5cbiAgICBhdHRyID0gaHlwaGVuYXRlKG5hbWUpO1xuICAgIC8vIGZpcnN0IGNoZWNrIGR5bmFtaWMgdmVyc2lvblxuICAgIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0cikpID09PSBudWxsKSB7XG4gICAgICBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIgKyAnLnN5bmMnKSkgIT09IG51bGwpIHtcbiAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZO1xuICAgICAgfSBlbHNlIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0ciArICcub25jZScpKSAhPT0gbnVsbCkge1xuICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLk9ORV9USU1FO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcbiAgICAgIC8vIGhhcyBkeW5hbWljIGJpbmRpbmchXG4gICAgICBwcm9wLnJhdyA9IHZhbHVlO1xuICAgICAgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuICAgICAgdmFsdWUgPSBwYXJzZWQuZXhwcmVzc2lvbjtcbiAgICAgIHByb3AuZmlsdGVycyA9IHBhcnNlZC5maWx0ZXJzO1xuICAgICAgLy8gY2hlY2sgYmluZGluZyB0eXBlXG4gICAgICBpZiAoaXNMaXRlcmFsKHZhbHVlKSAmJiAhcGFyc2VkLmZpbHRlcnMpIHtcbiAgICAgICAgLy8gZm9yIGV4cHJlc3Npb25zIGNvbnRhaW5pbmcgbGl0ZXJhbCBudW1iZXJzIGFuZFxuICAgICAgICAvLyBib29sZWFucywgdGhlcmUncyBubyBuZWVkIHRvIHNldHVwIGEgcHJvcCBiaW5kaW5nLFxuICAgICAgICAvLyBzbyB3ZSBjYW4gb3B0aW1pemUgdGhlbSBhcyBhIG9uZS10aW1lIHNldC5cbiAgICAgICAgcHJvcC5vcHRpbWl6ZWRMaXRlcmFsID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb3AuZHluYW1pYyA9IHRydWU7XG4gICAgICAgIC8vIGNoZWNrIG5vbi1zZXR0YWJsZSBwYXRoIGZvciB0d28td2F5IGJpbmRpbmdzXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHByb3AubW9kZSA9PT0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZICYmICFzZXR0YWJsZVBhdGhSRS50ZXN0KHZhbHVlKSkge1xuICAgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWTtcbiAgICAgICAgICB3YXJuKCdDYW5ub3QgYmluZCB0d28td2F5IHByb3Agd2l0aCBub24tc2V0dGFibGUgJyArICdwYXJlbnQgcGF0aDogJyArIHZhbHVlLCB2bSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHByb3AucGFyZW50UGF0aCA9IHZhbHVlO1xuXG4gICAgICAvLyB3YXJuIHJlcXVpcmVkIHR3by13YXlcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG9wdGlvbnMudHdvV2F5ICYmIHByb3AubW9kZSAhPT0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZKSB7XG4gICAgICAgIHdhcm4oJ1Byb3AgXCInICsgbmFtZSArICdcIiBleHBlY3RzIGEgdHdvLXdheSBiaW5kaW5nIHR5cGUuJywgdm0pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoKHZhbHVlID0gZ2V0QXR0cihlbCwgYXR0cikpICE9PSBudWxsKSB7XG4gICAgICAvLyBoYXMgbGl0ZXJhbCBiaW5kaW5nIVxuICAgICAgcHJvcC5yYXcgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIGNoZWNrIHBvc3NpYmxlIGNhbWVsQ2FzZSBwcm9wIHVzYWdlXG4gICAgICB2YXIgbG93ZXJDYXNlTmFtZSA9IHBhdGgudG9Mb3dlckNhc2UoKTtcbiAgICAgIHZhbHVlID0gL1tBLVpcXC1dLy50ZXN0KG5hbWUpICYmIChlbC5nZXRBdHRyaWJ1dGUobG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSArICcub25jZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lICsgJy5vbmNlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLnN5bmMnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSArICcuc3luYycpKTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICB3YXJuKCdQb3NzaWJsZSB1c2FnZSBlcnJvciBmb3IgcHJvcCBgJyArIGxvd2VyQ2FzZU5hbWUgKyAnYCAtICcgKyAnZGlkIHlvdSBtZWFuIGAnICsgYXR0ciArICdgPyBIVE1MIGlzIGNhc2UtaW5zZW5zaXRpdmUsIHJlbWVtYmVyIHRvIHVzZSAnICsgJ2tlYmFiLWNhc2UgZm9yIHByb3BzIGluIHRlbXBsYXRlcy4nLCB2bSk7XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucmVxdWlyZWQpIHtcbiAgICAgICAgLy8gd2FybiBtaXNzaW5nIHJlcXVpcmVkXG4gICAgICAgIHdhcm4oJ01pc3NpbmcgcmVxdWlyZWQgcHJvcDogJyArIG5hbWUsIHZtKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gcHVzaCBwcm9wXG4gICAgcHJvcHMucHVzaChwcm9wKTtcbiAgfVxuICByZXR1cm4gbWFrZVByb3BzTGlua0ZuKHByb3BzKTtcbn1cblxuLyoqXG4gKiBCdWlsZCBhIGZ1bmN0aW9uIHRoYXQgYXBwbGllcyBwcm9wcyB0byBhIHZtLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BzXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gcHJvcHNMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlUHJvcHNMaW5rRm4ocHJvcHMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHByb3BzTGlua0ZuKHZtLCBzY29wZSkge1xuICAgIC8vIHN0b3JlIHJlc29sdmVkIHByb3BzIGluZm9cbiAgICB2bS5fcHJvcHMgPSB7fTtcbiAgICB2YXIgaW5saW5lUHJvcHMgPSB2bS4kb3B0aW9ucy5wcm9wc0RhdGE7XG4gICAgdmFyIGkgPSBwcm9wcy5sZW5ndGg7XG4gICAgdmFyIHByb3AsIHBhdGgsIG9wdGlvbnMsIHZhbHVlLCByYXc7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgcHJvcCA9IHByb3BzW2ldO1xuICAgICAgcmF3ID0gcHJvcC5yYXc7XG4gICAgICBwYXRoID0gcHJvcC5wYXRoO1xuICAgICAgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcbiAgICAgIHZtLl9wcm9wc1twYXRoXSA9IHByb3A7XG4gICAgICBpZiAoaW5saW5lUHJvcHMgJiYgaGFzT3duKGlubGluZVByb3BzLCBwYXRoKSkge1xuICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgaW5saW5lUHJvcHNbcGF0aF0pO1xuICAgICAgfWlmIChyYXcgPT09IG51bGwpIHtcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBhYnNlbnQgcHJvcFxuICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdW5kZWZpbmVkKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcC5keW5hbWljKSB7XG4gICAgICAgIC8vIGR5bmFtaWMgcHJvcFxuICAgICAgICBpZiAocHJvcC5tb2RlID09PSBwcm9wQmluZGluZ01vZGVzLk9ORV9USU1FKSB7XG4gICAgICAgICAgLy8gb25lIHRpbWUgYmluZGluZ1xuICAgICAgICAgIHZhbHVlID0gKHNjb3BlIHx8IHZtLl9jb250ZXh0IHx8IHZtKS4kZ2V0KHByb3AucGFyZW50UGF0aCk7XG4gICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodm0uX2NvbnRleHQpIHtcbiAgICAgICAgICAgIC8vIGR5bmFtaWMgYmluZGluZ1xuICAgICAgICAgICAgdm0uX2JpbmREaXIoe1xuICAgICAgICAgICAgICBuYW1lOiAncHJvcCcsXG4gICAgICAgICAgICAgIGRlZjogcHJvcERlZixcbiAgICAgICAgICAgICAgcHJvcDogcHJvcFxuICAgICAgICAgICAgfSwgbnVsbCwgbnVsbCwgc2NvcGUpOyAvLyBlbCwgaG9zdCwgc2NvcGVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyByb290IGluc3RhbmNlXG4gICAgICAgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2bS4kZ2V0KHByb3AucGFyZW50UGF0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHByb3Aub3B0aW1pemVkTGl0ZXJhbCkge1xuICAgICAgICAvLyBvcHRpbWl6ZWQgbGl0ZXJhbCwgY2FzdCBpdCBhbmQganVzdCBzZXQgb25jZVxuICAgICAgICB2YXIgc3RyaXBwZWQgPSBzdHJpcFF1b3RlcyhyYXcpO1xuICAgICAgICB2YWx1ZSA9IHN0cmlwcGVkID09PSByYXcgPyB0b0Jvb2xlYW4odG9OdW1iZXIocmF3KSkgOiBzdHJpcHBlZDtcbiAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHN0cmluZyBsaXRlcmFsLCBidXQgd2UgbmVlZCB0byBjYXRlciBmb3JcbiAgICAgICAgLy8gQm9vbGVhbiBwcm9wcyB3aXRoIG5vIHZhbHVlLCBvciB3aXRoIHNhbWVcbiAgICAgICAgLy8gbGl0ZXJhbCB2YWx1ZSAoZS5nLiBkaXNhYmxlZD1cImRpc2FibGVkXCIpXG4gICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWxvYWRlci9pc3N1ZXMvMTgyXG4gICAgICAgIHZhbHVlID0gb3B0aW9ucy50eXBlID09PSBCb29sZWFuICYmIChyYXcgPT09ICcnIHx8IHJhdyA9PT0gaHlwaGVuYXRlKHByb3AubmFtZSkpID8gdHJ1ZSA6IHJhdztcbiAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogUHJvY2VzcyBhIHByb3Agd2l0aCBhIHJhd1ZhbHVlLCBhcHBseWluZyBuZWNlc3NhcnkgY29lcnNpb25zLFxuICogZGVmYXVsdCB2YWx1ZXMgJiBhc3NlcnRpb25zIGFuZCBjYWxsIHRoZSBnaXZlbiBjYWxsYmFjayB3aXRoXG4gKiBwcm9jZXNzZWQgdmFsdWUuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSByYXdWYWx1ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuXG5mdW5jdGlvbiBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCByYXdWYWx1ZSwgZm4pIHtcbiAgdmFyIGlzU2ltcGxlID0gcHJvcC5keW5hbWljICYmIGlzU2ltcGxlUGF0aChwcm9wLnBhcmVudFBhdGgpO1xuICB2YXIgdmFsdWUgPSByYXdWYWx1ZTtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICB2YWx1ZSA9IGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3ApO1xuICB9XG4gIHZhbHVlID0gY29lcmNlUHJvcChwcm9wLCB2YWx1ZSwgdm0pO1xuICB2YXIgY29lcmNlZCA9IHZhbHVlICE9PSByYXdWYWx1ZTtcbiAgaWYgKCFhc3NlcnRQcm9wKHByb3AsIHZhbHVlLCB2bSkpIHtcbiAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoaXNTaW1wbGUgJiYgIWNvZXJjZWQpIHtcbiAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG4gICAgICBmbih2YWx1ZSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgZm4odmFsdWUpO1xuICB9XG59XG5cbi8qKlxuICogU2V0IGEgcHJvcCdzIGluaXRpYWwgdmFsdWUgb24gYSB2bSBhbmQgaXRzIGRhdGEgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqL1xuXG5mdW5jdGlvbiBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpIHtcbiAgcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgdmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGRlZmluZVJlYWN0aXZlKHZtLCBwcm9wLnBhdGgsIHZhbHVlKTtcbiAgfSk7XG59XG5cbi8qKlxuICogVXBkYXRlIGEgcHJvcCdzIHZhbHVlIG9uIGEgdm0uXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICovXG5cbmZ1bmN0aW9uIHVwZGF0ZVByb3Aodm0sIHByb3AsIHZhbHVlKSB7XG4gIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHZhbHVlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2bVtwcm9wLnBhdGhdID0gdmFsdWU7XG4gIH0pO1xufVxuXG4vKipcbiAqIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHByb3AuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHJldHVybiB7Kn1cbiAqL1xuXG5mdW5jdGlvbiBnZXRQcm9wRGVmYXVsdFZhbHVlKHZtLCBwcm9wKSB7XG4gIC8vIG5vIGRlZmF1bHQsIHJldHVybiB1bmRlZmluZWRcbiAgdmFyIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG4gIGlmICghaGFzT3duKG9wdGlvbnMsICdkZWZhdWx0JykpIHtcbiAgICAvLyBhYnNlbnQgYm9vbGVhbiB2YWx1ZSBkZWZhdWx0cyB0byBmYWxzZVxuICAgIHJldHVybiBvcHRpb25zLnR5cGUgPT09IEJvb2xlYW4gPyBmYWxzZSA6IHVuZGVmaW5lZDtcbiAgfVxuICB2YXIgZGVmID0gb3B0aW9uc1snZGVmYXVsdCddO1xuICAvLyB3YXJuIGFnYWluc3Qgbm9uLWZhY3RvcnkgZGVmYXVsdHMgZm9yIE9iamVjdCAmIEFycmF5XG4gIGlmIChpc09iamVjdChkZWYpKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIGRlZmF1bHQgdmFsdWUgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiOiAnICsgJ1Byb3BzIHdpdGggdHlwZSBPYmplY3QvQXJyYXkgbXVzdCB1c2UgYSBmYWN0b3J5IGZ1bmN0aW9uICcgKyAndG8gcmV0dXJuIHRoZSBkZWZhdWx0IHZhbHVlLicsIHZtKTtcbiAgfVxuICAvLyBjYWxsIGZhY3RvcnkgZnVuY3Rpb24gZm9yIG5vbi1GdW5jdGlvbiB0eXBlc1xuICByZXR1cm4gdHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJyAmJiBvcHRpb25zLnR5cGUgIT09IEZ1bmN0aW9uID8gZGVmLmNhbGwodm0pIDogZGVmO1xufVxuXG4vKipcbiAqIEFzc2VydCB3aGV0aGVyIGEgcHJvcCBpcyB2YWxpZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuZnVuY3Rpb24gYXNzZXJ0UHJvcChwcm9wLCB2YWx1ZSwgdm0pIHtcbiAgaWYgKCFwcm9wLm9wdGlvbnMucmVxdWlyZWQgJiYgKCAvLyBub24tcmVxdWlyZWRcbiAgcHJvcC5yYXcgPT09IG51bGwgfHwgLy8gYWJzY2VudFxuICB2YWx1ZSA9PSBudWxsKSAvLyBudWxsIG9yIHVuZGVmaW5lZFxuICApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgdmFyIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG4gIHZhciB0eXBlID0gb3B0aW9ucy50eXBlO1xuICB2YXIgdmFsaWQgPSAhdHlwZTtcbiAgdmFyIGV4cGVjdGVkVHlwZXMgPSBbXTtcbiAgaWYgKHR5cGUpIHtcbiAgICBpZiAoIWlzQXJyYXkodHlwZSkpIHtcbiAgICAgIHR5cGUgPSBbdHlwZV07XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHlwZS5sZW5ndGggJiYgIXZhbGlkOyBpKyspIHtcbiAgICAgIHZhciBhc3NlcnRlZFR5cGUgPSBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlW2ldKTtcbiAgICAgIGV4cGVjdGVkVHlwZXMucHVzaChhc3NlcnRlZFR5cGUuZXhwZWN0ZWRUeXBlKTtcbiAgICAgIHZhbGlkID0gYXNzZXJ0ZWRUeXBlLnZhbGlkO1xuICAgIH1cbiAgfVxuICBpZiAoIXZhbGlkKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHdhcm4oJ0ludmFsaWQgcHJvcDogdHlwZSBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiLicgKyAnIEV4cGVjdGVkICcgKyBleHBlY3RlZFR5cGVzLm1hcChmb3JtYXRUeXBlKS5qb2luKCcsICcpICsgJywgZ290ICcgKyBmb3JtYXRWYWx1ZSh2YWx1ZSkgKyAnLicsIHZtKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciB2YWxpZGF0b3IgPSBvcHRpb25zLnZhbGlkYXRvcjtcbiAgaWYgKHZhbGlkYXRvcikge1xuICAgIGlmICghdmFsaWRhdG9yKHZhbHVlKSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHByb3A6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIi4nLCB2bSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEZvcmNlIHBhcnNpbmcgdmFsdWUgd2l0aCBjb2VyY2Ugb3B0aW9uLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHsqfVxuICovXG5cbmZ1bmN0aW9uIGNvZXJjZVByb3AocHJvcCwgdmFsdWUsIHZtKSB7XG4gIHZhciBjb2VyY2UgPSBwcm9wLm9wdGlvbnMuY29lcmNlO1xuICBpZiAoIWNvZXJjZSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAodHlwZW9mIGNvZXJjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBjb2VyY2UodmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBjb2VyY2UgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiOiBleHBlY3RlZCBmdW5jdGlvbiwgZ290ICcgKyB0eXBlb2YgY29lcmNlICsgJy4nLCB2bSk7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5cbi8qKlxuICogQXNzZXJ0IHRoZSB0eXBlIG9mIGEgdmFsdWVcbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB0eXBlXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZSkge1xuICB2YXIgdmFsaWQ7XG4gIHZhciBleHBlY3RlZFR5cGU7XG4gIGlmICh0eXBlID09PSBTdHJpbmcpIHtcbiAgICBleHBlY3RlZFR5cGUgPSAnc3RyaW5nJztcbiAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IE51bWJlcikge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdudW1iZXInO1xuICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gQm9vbGVhbikge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdib29sZWFuJztcbiAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IEZ1bmN0aW9uKSB7XG4gICAgZXhwZWN0ZWRUeXBlID0gJ2Z1bmN0aW9uJztcbiAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IE9iamVjdCkge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdvYmplY3QnO1xuICAgIHZhbGlkID0gaXNQbGFpbk9iamVjdCh2YWx1ZSk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gQXJyYXkpIHtcbiAgICBleHBlY3RlZFR5cGUgPSAnYXJyYXknO1xuICAgIHZhbGlkID0gaXNBcnJheSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB2YWxpZDogdmFsaWQsXG4gICAgZXhwZWN0ZWRUeXBlOiBleHBlY3RlZFR5cGVcbiAgfTtcbn1cblxuLyoqXG4gKiBGb3JtYXQgdHlwZSBmb3Igb3V0cHV0XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRUeXBlKHR5cGUpIHtcbiAgcmV0dXJuIHR5cGUgPyB0eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdHlwZS5zbGljZSgxKSA6ICdjdXN0b20gdHlwZSc7XG59XG5cbi8qKlxuICogRm9ybWF0IHZhbHVlXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGZvcm1hdFZhbHVlKHZhbCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkuc2xpY2UoOCwgLTEpO1xufVxuXG52YXIgYmluZGluZ01vZGVzID0gY29uZmlnLl9wcm9wQmluZGluZ01vZGVzO1xuXG52YXIgcHJvcERlZiA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBjaGlsZCA9IHRoaXMudm07XG4gICAgdmFyIHBhcmVudCA9IGNoaWxkLl9jb250ZXh0O1xuICAgIC8vIHBhc3NlZCBpbiBmcm9tIGNvbXBpbGVyIGRpcmVjdGx5XG4gICAgdmFyIHByb3AgPSB0aGlzLmRlc2NyaXB0b3IucHJvcDtcbiAgICB2YXIgY2hpbGRLZXkgPSBwcm9wLnBhdGg7XG4gICAgdmFyIHBhcmVudEtleSA9IHByb3AucGFyZW50UGF0aDtcbiAgICB2YXIgdHdvV2F5ID0gcHJvcC5tb2RlID09PSBiaW5kaW5nTW9kZXMuVFdPX1dBWTtcblxuICAgIHZhciBwYXJlbnRXYXRjaGVyID0gdGhpcy5wYXJlbnRXYXRjaGVyID0gbmV3IFdhdGNoZXIocGFyZW50LCBwYXJlbnRLZXksIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgIHVwZGF0ZVByb3AoY2hpbGQsIHByb3AsIHZhbCk7XG4gICAgfSwge1xuICAgICAgdHdvV2F5OiB0d29XYXksXG4gICAgICBmaWx0ZXJzOiBwcm9wLmZpbHRlcnMsXG4gICAgICAvLyBpbXBvcnRhbnQ6IHByb3BzIG5lZWQgdG8gYmUgb2JzZXJ2ZWQgb24gdGhlXG4gICAgICAvLyB2LWZvciBzY29wZSBpZiBwcmVzZW50XG4gICAgICBzY29wZTogdGhpcy5fc2NvcGVcbiAgICB9KTtcblxuICAgIC8vIHNldCB0aGUgY2hpbGQgaW5pdGlhbCB2YWx1ZS5cbiAgICBpbml0UHJvcChjaGlsZCwgcHJvcCwgcGFyZW50V2F0Y2hlci52YWx1ZSk7XG5cbiAgICAvLyBzZXR1cCB0d28td2F5IGJpbmRpbmdcbiAgICBpZiAodHdvV2F5KSB7XG4gICAgICAvLyBpbXBvcnRhbnQ6IGRlZmVyIHRoZSBjaGlsZCB3YXRjaGVyIGNyZWF0aW9uIHVudGlsXG4gICAgICAvLyB0aGUgY3JlYXRlZCBob29rIChhZnRlciBkYXRhIG9ic2VydmF0aW9uKVxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgY2hpbGQuJG9uY2UoJ3ByZS1ob29rOmNyZWF0ZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuY2hpbGRXYXRjaGVyID0gbmV3IFdhdGNoZXIoY2hpbGQsIGNoaWxkS2V5LCBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgcGFyZW50V2F0Y2hlci5zZXQodmFsKTtcbiAgICAgICAgfSwge1xuICAgICAgICAgIC8vIGVuc3VyZSBzeW5jIHVwd2FyZCBiZWZvcmUgcGFyZW50IHN5bmMgZG93bi5cbiAgICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBpbiBjYXNlcyBlLmcuIHRoZSBjaGlsZFxuICAgICAgICAgIC8vIG11dGF0ZXMgYSBwcm9wIGFycmF5LCB0aGVuIHJlcGxhY2VzIGl0LiAoIzE2ODMpXG4gICAgICAgICAgc3luYzogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB0aGlzLnBhcmVudFdhdGNoZXIudGVhcmRvd24oKTtcbiAgICBpZiAodGhpcy5jaGlsZFdhdGNoZXIpIHtcbiAgICAgIHRoaXMuY2hpbGRXYXRjaGVyLnRlYXJkb3duKCk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgcXVldWUkMSA9IFtdO1xudmFyIHF1ZXVlZCA9IGZhbHNlO1xuXG4vKipcbiAqIFB1c2ggYSBqb2IgaW50byB0aGUgcXVldWUuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gam9iXG4gKi9cblxuZnVuY3Rpb24gcHVzaEpvYihqb2IpIHtcbiAgcXVldWUkMS5wdXNoKGpvYik7XG4gIGlmICghcXVldWVkKSB7XG4gICAgcXVldWVkID0gdHJ1ZTtcbiAgICBuZXh0VGljayhmbHVzaCk7XG4gIH1cbn1cblxuLyoqXG4gKiBGbHVzaCB0aGUgcXVldWUsIGFuZCBkbyBvbmUgZm9yY2VkIHJlZmxvdyBiZWZvcmVcbiAqIHRyaWdnZXJpbmcgdHJhbnNpdGlvbnMuXG4gKi9cblxuZnVuY3Rpb24gZmx1c2goKSB7XG4gIC8vIEZvcmNlIGxheW91dFxuICB2YXIgZiA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUkMS5sZW5ndGg7IGkrKykge1xuICAgIHF1ZXVlJDFbaV0oKTtcbiAgfVxuICBxdWV1ZSQxID0gW107XG4gIHF1ZXVlZCA9IGZhbHNlO1xuICAvLyBkdW1teSByZXR1cm4sIHNvIGpzIGxpbnRlcnMgZG9uJ3QgY29tcGxhaW4gYWJvdXRcbiAgLy8gdW51c2VkIHZhcmlhYmxlIGZcbiAgcmV0dXJuIGY7XG59XG5cbnZhciBUWVBFX1RSQU5TSVRJT04gPSAndHJhbnNpdGlvbic7XG52YXIgVFlQRV9BTklNQVRJT04gPSAnYW5pbWF0aW9uJztcbnZhciB0cmFuc0R1cmF0aW9uUHJvcCA9IHRyYW5zaXRpb25Qcm9wICsgJ0R1cmF0aW9uJztcbnZhciBhbmltRHVyYXRpb25Qcm9wID0gYW5pbWF0aW9uUHJvcCArICdEdXJhdGlvbic7XG5cbi8qKlxuICogSWYgYSBqdXN0LWVudGVyZWQgZWxlbWVudCBpcyBhcHBsaWVkIHRoZVxuICogbGVhdmUgY2xhc3Mgd2hpbGUgaXRzIGVudGVyIHRyYW5zaXRpb24gaGFzbid0IHN0YXJ0ZWQgeWV0LFxuICogYW5kIHRoZSB0cmFuc2l0aW9uZWQgcHJvcGVydHkgaGFzIHRoZSBzYW1lIHZhbHVlIGZvciBib3RoXG4gKiBlbnRlci9sZWF2ZSwgdGhlbiB0aGUgbGVhdmUgdHJhbnNpdGlvbiB3aWxsIGJlIHNraXBwZWQgYW5kXG4gKiB0aGUgdHJhbnNpdGlvbmVuZCBldmVudCBuZXZlciBmaXJlcy4gVGhpcyBmdW5jdGlvbiBlbnN1cmVzXG4gKiBpdHMgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIGFmdGVyIGEgdHJhbnNpdGlvbiBoYXMgc3RhcnRlZFxuICogYnkgd2FpdGluZyBmb3IgZG91YmxlIHJhZi5cbiAqXG4gKiBJdCBmYWxscyBiYWNrIHRvIHNldFRpbWVvdXQgb24gZGV2aWNlcyB0aGF0IHN1cHBvcnQgQ1NTXG4gKiB0cmFuc2l0aW9ucyBidXQgbm90IHJhZiAoZS5nLiBBbmRyb2lkIDQuMiBicm93c2VyKSAtIHNpbmNlXG4gKiB0aGVzZSBlbnZpcm9ubWVudHMgYXJlIHVzdWFsbHkgc2xvdywgd2UgYXJlIGdpdmluZyBpdCBhXG4gKiByZWxhdGl2ZWx5IGxhcmdlIHRpbWVvdXQuXG4gKi9cblxudmFyIHJhZiA9IGluQnJvd3NlciAmJiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xudmFyIHdhaXRGb3JUcmFuc2l0aW9uU3RhcnQgPSByYWZcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4/IGZ1bmN0aW9uIChmbikge1xuICByYWYoZnVuY3Rpb24gKCkge1xuICAgIHJhZihmbik7XG4gIH0pO1xufSA6IGZ1bmN0aW9uIChmbikge1xuICBzZXRUaW1lb3V0KGZuLCA1MCk7XG59O1xuXG4vKipcbiAqIEEgVHJhbnNpdGlvbiBvYmplY3QgdGhhdCBlbmNhcHN1bGF0ZXMgdGhlIHN0YXRlIGFuZCBsb2dpY1xuICogb2YgdGhlIHRyYW5zaXRpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gKiBAcGFyYW0ge09iamVjdH0gaG9va3NcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICovXG5mdW5jdGlvbiBUcmFuc2l0aW9uKGVsLCBpZCwgaG9va3MsIHZtKSB7XG4gIHRoaXMuaWQgPSBpZDtcbiAgdGhpcy5lbCA9IGVsO1xuICB0aGlzLmVudGVyQ2xhc3MgPSBob29rcyAmJiBob29rcy5lbnRlckNsYXNzIHx8IGlkICsgJy1lbnRlcic7XG4gIHRoaXMubGVhdmVDbGFzcyA9IGhvb2tzICYmIGhvb2tzLmxlYXZlQ2xhc3MgfHwgaWQgKyAnLWxlYXZlJztcbiAgdGhpcy5ob29rcyA9IGhvb2tzO1xuICB0aGlzLnZtID0gdm07XG4gIC8vIGFzeW5jIHN0YXRlXG4gIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSB0aGlzLm9wID0gdGhpcy5jYiA9IG51bGw7XG4gIHRoaXMuanVzdEVudGVyZWQgPSBmYWxzZTtcbiAgdGhpcy5lbnRlcmVkID0gdGhpcy5sZWZ0ID0gZmFsc2U7XG4gIHRoaXMudHlwZUNhY2hlID0ge307XG4gIC8vIGNoZWNrIGNzcyB0cmFuc2l0aW9uIHR5cGVcbiAgdGhpcy50eXBlID0gaG9va3MgJiYgaG9va3MudHlwZTtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKHRoaXMudHlwZSAmJiB0aGlzLnR5cGUgIT09IFRZUEVfVFJBTlNJVElPTiAmJiB0aGlzLnR5cGUgIT09IFRZUEVfQU5JTUFUSU9OKSB7XG4gICAgICB3YXJuKCdpbnZhbGlkIENTUyB0cmFuc2l0aW9uIHR5cGUgZm9yIHRyYW5zaXRpb249XCInICsgdGhpcy5pZCArICdcIjogJyArIHRoaXMudHlwZSwgdm0pO1xuICAgIH1cbiAgfVxuICAvLyBiaW5kXG4gIHZhciBzZWxmID0gdGhpcztbJ2VudGVyTmV4dFRpY2snLCAnZW50ZXJEb25lJywgJ2xlYXZlTmV4dFRpY2snLCAnbGVhdmVEb25lJ10uZm9yRWFjaChmdW5jdGlvbiAobSkge1xuICAgIHNlbGZbbV0gPSBiaW5kKHNlbGZbbV0sIHNlbGYpO1xuICB9KTtcbn1cblxudmFyIHAkMSA9IFRyYW5zaXRpb24ucHJvdG90eXBlO1xuXG4vKipcbiAqIFN0YXJ0IGFuIGVudGVyaW5nIHRyYW5zaXRpb24uXG4gKlxuICogMS4gZW50ZXIgdHJhbnNpdGlvbiB0cmlnZ2VyZWRcbiAqIDIuIGNhbGwgYmVmb3JlRW50ZXIgaG9va1xuICogMy4gYWRkIGVudGVyIGNsYXNzXG4gKiA0LiBpbnNlcnQvc2hvdyBlbGVtZW50XG4gKiA1LiBjYWxsIGVudGVyIGhvb2sgKHdpdGggcG9zc2libGUgZXhwbGljaXQganMgY2FsbGJhY2spXG4gKiA2LiByZWZsb3dcbiAqIDcuIGJhc2VkIG9uIHRyYW5zaXRpb24gdHlwZTpcbiAqICAgIC0gdHJhbnNpdGlvbjpcbiAqICAgICAgICByZW1vdmUgY2xhc3Mgbm93LCB3YWl0IGZvciB0cmFuc2l0aW9uZW5kLFxuICogICAgICAgIHRoZW4gZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogICAgLSBhbmltYXRpb246XG4gKiAgICAgICAgd2FpdCBmb3IgYW5pbWF0aW9uZW5kLCByZW1vdmUgY2xhc3MsXG4gKiAgICAgICAgdGhlbiBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiAgICAtIG5vIGNzcyB0cmFuc2l0aW9uOlxuICogICAgICAgIGRvbmUgbm93IGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiA4LiB3YWl0IGZvciBlaXRoZXIgZG9uZSBvciBqcyBjYWxsYmFjaywgdGhlbiBjYWxsXG4gKiAgICBhZnRlckVudGVyIGhvb2suXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSBpbnNlcnQvc2hvdyB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbnAkMS5lbnRlciA9IGZ1bmN0aW9uIChvcCwgY2IpIHtcbiAgdGhpcy5jYW5jZWxQZW5kaW5nKCk7XG4gIHRoaXMuY2FsbEhvb2soJ2JlZm9yZUVudGVyJyk7XG4gIHRoaXMuY2IgPSBjYjtcbiAgYWRkQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcbiAgb3AoKTtcbiAgdGhpcy5lbnRlcmVkID0gZmFsc2U7XG4gIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2VudGVyJyk7XG4gIGlmICh0aGlzLmVudGVyZWQpIHtcbiAgICByZXR1cm47IC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cbiAgfVxuICB0aGlzLmNhbmNlbCA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5lbnRlckNhbmNlbGxlZDtcbiAgcHVzaEpvYih0aGlzLmVudGVyTmV4dFRpY2spO1xufTtcblxuLyoqXG4gKiBUaGUgXCJuZXh0VGlja1wiIHBoYXNlIG9mIGFuIGVudGVyaW5nIHRyYW5zaXRpb24sIHdoaWNoIGlzXG4gKiB0byBiZSBwdXNoZWQgaW50byBhIHF1ZXVlIGFuZCBleGVjdXRlZCBhZnRlciBhIHJlZmxvdyBzb1xuICogdGhhdCByZW1vdmluZyB0aGUgY2xhc3MgY2FuIHRyaWdnZXIgYSBDU1MgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEuZW50ZXJOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICAvLyBwcmV2ZW50IHRyYW5zaXRpb24gc2tpcHBpbmdcbiAgdGhpcy5qdXN0RW50ZXJlZCA9IHRydWU7XG4gIHdhaXRGb3JUcmFuc2l0aW9uU3RhcnQoZnVuY3Rpb24gKCkge1xuICAgIF90aGlzLmp1c3RFbnRlcmVkID0gZmFsc2U7XG4gIH0pO1xuICB2YXIgZW50ZXJEb25lID0gdGhpcy5lbnRlckRvbmU7XG4gIHZhciB0eXBlID0gdGhpcy5nZXRDc3NUcmFuc2l0aW9uVHlwZSh0aGlzLmVudGVyQ2xhc3MpO1xuICBpZiAoIXRoaXMucGVuZGluZ0pzQ2IpIHtcbiAgICBpZiAodHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OKSB7XG4gICAgICAvLyB0cmlnZ2VyIHRyYW5zaXRpb24gYnkgcmVtb3ZpbmcgZW50ZXIgY2xhc3Mgbm93XG4gICAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICAgICAgdGhpcy5zZXR1cENzc0NiKHRyYW5zaXRpb25FbmRFdmVudCwgZW50ZXJEb25lKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFRZUEVfQU5JTUFUSU9OKSB7XG4gICAgICB0aGlzLnNldHVwQ3NzQ2IoYW5pbWF0aW9uRW5kRXZlbnQsIGVudGVyRG9uZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVudGVyRG9uZSgpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlID09PSBUWVBFX1RSQU5TSVRJT04pIHtcbiAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICB9XG59O1xuXG4vKipcbiAqIFRoZSBcImNsZWFudXBcIiBwaGFzZSBvZiBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLlxuICovXG5cbnAkMS5lbnRlckRvbmUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZW50ZXJlZCA9IHRydWU7XG4gIHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG4gIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG4gIHRoaXMuY2FsbEhvb2soJ2FmdGVyRW50ZXInKTtcbiAgaWYgKHRoaXMuY2IpIHRoaXMuY2IoKTtcbn07XG5cbi8qKlxuICogU3RhcnQgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG4gKlxuICogMS4gbGVhdmUgdHJhbnNpdGlvbiB0cmlnZ2VyZWQuXG4gKiAyLiBjYWxsIGJlZm9yZUxlYXZlIGhvb2tcbiAqIDMuIGFkZCBsZWF2ZSBjbGFzcyAodHJpZ2dlciBjc3MgdHJhbnNpdGlvbilcbiAqIDQuIGNhbGwgbGVhdmUgaG9vayAod2l0aCBwb3NzaWJsZSBleHBsaWNpdCBqcyBjYWxsYmFjaylcbiAqIDUuIHJlZmxvdyBpZiBubyBleHBsaWNpdCBqcyBjYWxsYmFjayBpcyBwcm92aWRlZFxuICogNi4gYmFzZWQgb24gdHJhbnNpdGlvbiB0eXBlOlxuICogICAgLSB0cmFuc2l0aW9uIG9yIGFuaW1hdGlvbjpcbiAqICAgICAgICB3YWl0IGZvciBlbmQgZXZlbnQsIHJlbW92ZSBjbGFzcywgdGhlbiBkb25lIGlmXG4gKiAgICAgICAgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAqICAgIC0gbm8gY3NzIHRyYW5zaXRpb246XG4gKiAgICAgICAgZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogNy4gd2FpdCBmb3IgZWl0aGVyIGRvbmUgb3IganMgY2FsbGJhY2ssIHRoZW4gY2FsbFxuICogICAgYWZ0ZXJMZWF2ZSBob29rLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gcmVtb3ZlL2hpZGUgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5wJDEubGVhdmUgPSBmdW5jdGlvbiAob3AsIGNiKSB7XG4gIHRoaXMuY2FuY2VsUGVuZGluZygpO1xuICB0aGlzLmNhbGxIb29rKCdiZWZvcmVMZWF2ZScpO1xuICB0aGlzLm9wID0gb3A7XG4gIHRoaXMuY2IgPSBjYjtcbiAgYWRkQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcbiAgdGhpcy5sZWZ0ID0gZmFsc2U7XG4gIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2xlYXZlJyk7XG4gIGlmICh0aGlzLmxlZnQpIHtcbiAgICByZXR1cm47IC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cbiAgfVxuICB0aGlzLmNhbmNlbCA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5sZWF2ZUNhbmNlbGxlZDtcbiAgLy8gb25seSBuZWVkIHRvIGhhbmRsZSBsZWF2ZURvbmUgaWZcbiAgLy8gMS4gdGhlIHRyYW5zaXRpb24gaXMgYWxyZWFkeSBkb25lIChzeW5jaHJvbm91c2x5IGNhbGxlZFxuICAvLyAgICBieSB0aGUgdXNlciwgd2hpY2ggY2F1c2VzIHRoaXMub3Agc2V0IHRvIG51bGwpXG4gIC8vIDIuIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2tcbiAgaWYgKHRoaXMub3AgJiYgIXRoaXMucGVuZGluZ0pzQ2IpIHtcbiAgICAvLyBpZiBhIENTUyB0cmFuc2l0aW9uIGxlYXZlcyBpbW1lZGlhdGVseSBhZnRlciBlbnRlcixcbiAgICAvLyB0aGUgdHJhbnNpdGlvbmVuZCBldmVudCBuZXZlciBmaXJlcy4gdGhlcmVmb3JlIHdlXG4gICAgLy8gZGV0ZWN0IHN1Y2ggY2FzZXMgYW5kIGVuZCB0aGUgbGVhdmUgaW1tZWRpYXRlbHkuXG4gICAgaWYgKHRoaXMuanVzdEVudGVyZWQpIHtcbiAgICAgIHRoaXMubGVhdmVEb25lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHB1c2hKb2IodGhpcy5sZWF2ZU5leHRUaWNrKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogVGhlIFwibmV4dFRpY2tcIiBwaGFzZSBvZiBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEubGVhdmVOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHR5cGUgPSB0aGlzLmdldENzc1RyYW5zaXRpb25UeXBlKHRoaXMubGVhdmVDbGFzcyk7XG4gIGlmICh0eXBlKSB7XG4gICAgdmFyIGV2ZW50ID0gdHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OID8gdHJhbnNpdGlvbkVuZEV2ZW50IDogYW5pbWF0aW9uRW5kRXZlbnQ7XG4gICAgdGhpcy5zZXR1cENzc0NiKGV2ZW50LCB0aGlzLmxlYXZlRG9uZSk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5sZWF2ZURvbmUoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBUaGUgXCJjbGVhbnVwXCIgcGhhc2Ugb2YgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG4gKi9cblxucCQxLmxlYXZlRG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5sZWZ0ID0gdHJ1ZTtcbiAgdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcbiAgdGhpcy5vcCgpO1xuICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuICB0aGlzLmNhbGxIb29rKCdhZnRlckxlYXZlJyk7XG4gIGlmICh0aGlzLmNiKSB0aGlzLmNiKCk7XG4gIHRoaXMub3AgPSBudWxsO1xufTtcblxuLyoqXG4gKiBDYW5jZWwgYW55IHBlbmRpbmcgY2FsbGJhY2tzIGZyb20gYSBwcmV2aW91c2x5IHJ1bm5pbmdcbiAqIGJ1dCBub3QgZmluaXNoZWQgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEuY2FuY2VsUGVuZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5vcCA9IHRoaXMuY2IgPSBudWxsO1xuICB2YXIgaGFzUGVuZGluZyA9IGZhbHNlO1xuICBpZiAodGhpcy5wZW5kaW5nQ3NzQ2IpIHtcbiAgICBoYXNQZW5kaW5nID0gdHJ1ZTtcbiAgICBvZmYodGhpcy5lbCwgdGhpcy5wZW5kaW5nQ3NzRXZlbnQsIHRoaXMucGVuZGluZ0Nzc0NiKTtcbiAgICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gbnVsbDtcbiAgfVxuICBpZiAodGhpcy5wZW5kaW5nSnNDYikge1xuICAgIGhhc1BlbmRpbmcgPSB0cnVlO1xuICAgIHRoaXMucGVuZGluZ0pzQ2IuY2FuY2VsKCk7XG4gICAgdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG4gIH1cbiAgaWYgKGhhc1BlbmRpbmcpIHtcbiAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG4gIH1cbiAgaWYgKHRoaXMuY2FuY2VsKSB7XG4gICAgdGhpcy5jYW5jZWwuY2FsbCh0aGlzLnZtLCB0aGlzLmVsKTtcbiAgICB0aGlzLmNhbmNlbCA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogQ2FsbCBhIHVzZXItcHJvdmlkZWQgc3luY2hyb25vdXMgaG9vayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5cbnAkMS5jYWxsSG9vayA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gIGlmICh0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV0pIHtcbiAgICB0aGlzLmhvb2tzW3R5cGVdLmNhbGwodGhpcy52bSwgdGhpcy5lbCk7XG4gIH1cbn07XG5cbi8qKlxuICogQ2FsbCBhIHVzZXItcHJvdmlkZWQsIHBvdGVudGlhbGx5LWFzeW5jIGhvb2sgZnVuY3Rpb24uXG4gKiBXZSBjaGVjayBmb3IgdGhlIGxlbmd0aCBvZiBhcmd1bWVudHMgdG8gc2VlIGlmIHRoZSBob29rXG4gKiBleHBlY3RzIGEgYGRvbmVgIGNhbGxiYWNrLiBJZiB0cnVlLCB0aGUgdHJhbnNpdGlvbidzIGVuZFxuICogd2lsbCBiZSBkZXRlcm1pbmVkIGJ5IHdoZW4gdGhlIHVzZXIgY2FsbHMgdGhhdCBjYWxsYmFjaztcbiAqIG90aGVyd2lzZSwgdGhlIGVuZCBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBDU1MgdHJhbnNpdGlvbiBvclxuICogYW5pbWF0aW9uLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cblxucCQxLmNhbGxIb29rV2l0aENiID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgdmFyIGhvb2sgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV07XG4gIGlmIChob29rKSB7XG4gICAgaWYgKGhvb2subGVuZ3RoID4gMSkge1xuICAgICAgdGhpcy5wZW5kaW5nSnNDYiA9IGNhbmNlbGxhYmxlKHRoaXNbdHlwZSArICdEb25lJ10pO1xuICAgIH1cbiAgICBob29rLmNhbGwodGhpcy52bSwgdGhpcy5lbCwgdGhpcy5wZW5kaW5nSnNDYik7XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IGFuIGVsZW1lbnQncyB0cmFuc2l0aW9uIHR5cGUgYmFzZWQgb24gdGhlXG4gKiBjYWxjdWxhdGVkIHN0eWxlcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY2xhc3NOYW1lXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKi9cblxucCQxLmdldENzc1RyYW5zaXRpb25UeXBlID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCF0cmFuc2l0aW9uRW5kRXZlbnQgfHxcbiAgLy8gc2tpcCBDU1MgdHJhbnNpdGlvbnMgaWYgcGFnZSBpcyBub3QgdmlzaWJsZSAtXG4gIC8vIHRoaXMgc29sdmVzIHRoZSBpc3N1ZSBvZiB0cmFuc2l0aW9uZW5kIGV2ZW50cyBub3RcbiAgLy8gZmlyaW5nIHVudGlsIHRoZSBwYWdlIGlzIHZpc2libGUgYWdhaW4uXG4gIC8vIHBhZ2VWaXNpYmlsaXR5IEFQSSBpcyBzdXBwb3J0ZWQgaW4gSUUxMCssIHNhbWUgYXNcbiAgLy8gQ1NTIHRyYW5zaXRpb25zLlxuICBkb2N1bWVudC5oaWRkZW4gfHxcbiAgLy8gZXhwbGljaXQganMtb25seSB0cmFuc2l0aW9uXG4gIHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5jc3MgPT09IGZhbHNlIHx8XG4gIC8vIGVsZW1lbnQgaXMgaGlkZGVuXG4gIGlzSGlkZGVuKHRoaXMuZWwpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciB0eXBlID0gdGhpcy50eXBlIHx8IHRoaXMudHlwZUNhY2hlW2NsYXNzTmFtZV07XG4gIGlmICh0eXBlKSByZXR1cm4gdHlwZTtcbiAgdmFyIGlubGluZVN0eWxlcyA9IHRoaXMuZWwuc3R5bGU7XG4gIHZhciBjb21wdXRlZFN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWwpO1xuICB2YXIgdHJhbnNEdXJhdGlvbiA9IGlubGluZVN0eWxlc1t0cmFuc0R1cmF0aW9uUHJvcF0gfHwgY29tcHV0ZWRTdHlsZXNbdHJhbnNEdXJhdGlvblByb3BdO1xuICBpZiAodHJhbnNEdXJhdGlvbiAmJiB0cmFuc0R1cmF0aW9uICE9PSAnMHMnKSB7XG4gICAgdHlwZSA9IFRZUEVfVFJBTlNJVElPTjtcbiAgfSBlbHNlIHtcbiAgICB2YXIgYW5pbUR1cmF0aW9uID0gaW5saW5lU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdIHx8IGNvbXB1dGVkU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdO1xuICAgIGlmIChhbmltRHVyYXRpb24gJiYgYW5pbUR1cmF0aW9uICE9PSAnMHMnKSB7XG4gICAgICB0eXBlID0gVFlQRV9BTklNQVRJT047XG4gICAgfVxuICB9XG4gIGlmICh0eXBlKSB7XG4gICAgdGhpcy50eXBlQ2FjaGVbY2xhc3NOYW1lXSA9IHR5cGU7XG4gIH1cbiAgcmV0dXJuIHR5cGU7XG59O1xuXG4vKipcbiAqIFNldHVwIGEgQ1NTIHRyYW5zaXRpb25lbmQvYW5pbWF0aW9uZW5kIGNhbGxiYWNrLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuXG5wJDEuc2V0dXBDc3NDYiA9IGZ1bmN0aW9uIChldmVudCwgY2IpIHtcbiAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSBldmVudDtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgZWwgPSB0aGlzLmVsO1xuICB2YXIgb25FbmQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBlbCkge1xuICAgICAgb2ZmKGVsLCBldmVudCwgb25FbmQpO1xuICAgICAgc2VsZi5wZW5kaW5nQ3NzRXZlbnQgPSBzZWxmLnBlbmRpbmdDc3NDYiA9IG51bGw7XG4gICAgICBpZiAoIXNlbGYucGVuZGluZ0pzQ2IgJiYgY2IpIHtcbiAgICAgICAgY2IoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIG9uKGVsLCBldmVudCwgb25FbmQpO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGhpZGRlbiAtIGluIHRoYXQgY2FzZSB3ZSBjYW4ganVzdFxuICogc2tpcCB0aGUgdHJhbnNpdGlvbiBhbGx0b2dldGhlci5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzSGlkZGVuKGVsKSB7XG4gIGlmICgvc3ZnJC8udGVzdChlbC5uYW1lc3BhY2VVUkkpKSB7XG4gICAgLy8gU1ZHIGVsZW1lbnRzIGRvIG5vdCBoYXZlIG9mZnNldChXaWR0aHxIZWlnaHQpXG4gICAgLy8gc28gd2UgbmVlZCB0byBjaGVjayB0aGUgY2xpZW50IHJlY3RcbiAgICB2YXIgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiAhKHJlY3Qud2lkdGggfHwgcmVjdC5oZWlnaHQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAhKGVsLm9mZnNldFdpZHRoIHx8IGVsLm9mZnNldEhlaWdodCB8fCBlbC5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCk7XG4gIH1cbn1cblxudmFyIHRyYW5zaXRpb24kMSA9IHtcblxuICBwcmlvcml0eTogVFJBTlNJVElPTixcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShpZCwgb2xkSWQpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIC8vIHJlc29sdmUgb24gb3duZXIgdm1cbiAgICB2YXIgaG9va3MgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3RyYW5zaXRpb25zJywgaWQpO1xuICAgIGlkID0gaWQgfHwgJ3YnO1xuICAgIG9sZElkID0gb2xkSWQgfHwgJ3YnO1xuICAgIGVsLl9fdl90cmFucyA9IG5ldyBUcmFuc2l0aW9uKGVsLCBpZCwgaG9va3MsIHRoaXMudm0pO1xuICAgIHJlbW92ZUNsYXNzKGVsLCBvbGRJZCArICctdHJhbnNpdGlvbicpO1xuICAgIGFkZENsYXNzKGVsLCBpZCArICctdHJhbnNpdGlvbicpO1xuICB9XG59O1xuXG52YXIgaW50ZXJuYWxEaXJlY3RpdmVzID0ge1xuICBzdHlsZTogc3R5bGUsXG4gICdjbGFzcyc6IHZDbGFzcyxcbiAgY29tcG9uZW50OiBjb21wb25lbnQsXG4gIHByb3A6IHByb3BEZWYsXG4gIHRyYW5zaXRpb246IHRyYW5zaXRpb24kMVxufTtcblxuLy8gc3BlY2lhbCBiaW5kaW5nIHByZWZpeGVzXG52YXIgYmluZFJFID0gL152LWJpbmQ6fF46LztcbnZhciBvblJFID0gL152LW9uOnxeQC87XG52YXIgZGlyQXR0clJFID0gL152LShbXjpdKykoPzokfDooLiopJCkvO1xudmFyIG1vZGlmaWVyUkUgPSAvXFwuW15cXC5dKy9nO1xudmFyIHRyYW5zaXRpb25SRSA9IC9eKHYtYmluZDp8Oik/dHJhbnNpdGlvbiQvO1xuXG4vLyBkZWZhdWx0IGRpcmVjdGl2ZSBwcmlvcml0eVxudmFyIERFRkFVTFRfUFJJT1JJVFkgPSAxMDAwO1xudmFyIERFRkFVTFRfVEVSTUlOQUxfUFJJT1JJVFkgPSAyMDAwO1xuXG4vKipcbiAqIENvbXBpbGUgYSB0ZW1wbGF0ZSBhbmQgcmV0dXJuIGEgcmV1c2FibGUgY29tcG9zaXRlIGxpbmtcbiAqIGZ1bmN0aW9uLCB3aGljaCByZWN1cnNpdmVseSBjb250YWlucyBtb3JlIGxpbmsgZnVuY3Rpb25zXG4gKiBpbnNpZGUuIFRoaXMgdG9wIGxldmVsIGNvbXBpbGUgZnVuY3Rpb24gd291bGQgbm9ybWFsbHlcbiAqIGJlIGNhbGxlZCBvbiBpbnN0YW5jZSByb290IG5vZGVzLCBidXQgY2FuIGFsc28gYmUgdXNlZFxuICogZm9yIHBhcnRpYWwgY29tcGlsYXRpb24gaWYgdGhlIHBhcnRpYWwgYXJndW1lbnQgaXMgdHJ1ZS5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgY29tcG9zaXRlIGxpbmsgZnVuY3Rpb24sIHdoZW4gY2FsbGVkLCB3aWxsXG4gKiByZXR1cm4gYW4gdW5saW5rIGZ1bmN0aW9uIHRoYXQgdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzXG4gKiBjcmVhdGVkIGR1cmluZyB0aGUgbGlua2luZyBwaGFzZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHBhcnRpYWxcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGUoZWwsIG9wdGlvbnMsIHBhcnRpYWwpIHtcbiAgLy8gbGluayBmdW5jdGlvbiBmb3IgdGhlIG5vZGUgaXRzZWxmLlxuICB2YXIgbm9kZUxpbmtGbiA9IHBhcnRpYWwgfHwgIW9wdGlvbnMuX2FzQ29tcG9uZW50ID8gY29tcGlsZU5vZGUoZWwsIG9wdGlvbnMpIDogbnVsbDtcbiAgLy8gbGluayBmdW5jdGlvbiBmb3IgdGhlIGNoaWxkTm9kZXNcbiAgdmFyIGNoaWxkTGlua0ZuID0gIShub2RlTGlua0ZuICYmIG5vZGVMaW5rRm4udGVybWluYWwpICYmICFpc1NjcmlwdChlbCkgJiYgZWwuaGFzQ2hpbGROb2RlcygpID8gY29tcGlsZU5vZGVMaXN0KGVsLmNoaWxkTm9kZXMsIG9wdGlvbnMpIDogbnVsbDtcblxuICAvKipcbiAgICogQSBjb21wb3NpdGUgbGlua2VyIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbiBhIGFscmVhZHlcbiAgICogY29tcGlsZWQgcGllY2Ugb2YgRE9NLCB3aGljaCBpbnN0YW50aWF0ZXMgYWxsIGRpcmVjdGl2ZVxuICAgKiBpbnN0YW5jZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAgICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIGhvc3Qgdm0gb2YgdHJhbnNjbHVkZWQgY29udGVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIGxpbmsgY29udGV4dCBmcmFnbWVudFxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gICAqL1xuXG4gIHJldHVybiBmdW5jdGlvbiBjb21wb3NpdGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIC8vIGNhY2hlIGNoaWxkTm9kZXMgYmVmb3JlIGxpbmtpbmcgcGFyZW50LCBmaXggIzY1N1xuICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShlbC5jaGlsZE5vZGVzKTtcbiAgICAvLyBsaW5rXG4gICAgdmFyIGRpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiBjb21wb3NpdGVMaW5rQ2FwdHVyZXIoKSB7XG4gICAgICBpZiAobm9kZUxpbmtGbikgbm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICAgIGlmIChjaGlsZExpbmtGbikgY2hpbGRMaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICB9LCB2bSk7XG4gICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgZGlycyk7XG4gIH07XG59XG5cbi8qKlxuICogQXBwbHkgYSBsaW5rZXIgdG8gYSB2bS9lbGVtZW50IHBhaXIgYW5kIGNhcHR1cmUgdGhlXG4gKiBkaXJlY3RpdmVzIGNyZWF0ZWQgZHVyaW5nIHRoZSBwcm9jZXNzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGxpbmtlclxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuZnVuY3Rpb24gbGlua0FuZENhcHR1cmUobGlua2VyLCB2bSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgICAvLyByZXNldCBkaXJlY3RpdmVzIGJlZm9yZSBldmVyeSBjYXB0dXJlIGluIHByb2R1Y3Rpb25cbiAgICAvLyBtb2RlLCBzbyB0aGF0IHdoZW4gdW5saW5raW5nIHdlIGRvbid0IG5lZWQgdG8gc3BsaWNlXG4gICAgLy8gdGhlbSBvdXQgKHdoaWNoIHR1cm5zIG91dCB0byBiZSBhIHBlcmYgaGl0KS5cbiAgICAvLyB0aGV5IGFyZSBrZXB0IGluIGRldmVsb3BtZW50IG1vZGUgYmVjYXVzZSB0aGV5IGFyZVxuICAgIC8vIHVzZWZ1bCBmb3IgVnVlJ3Mgb3duIHRlc3RzLlxuICAgIHZtLl9kaXJlY3RpdmVzID0gW107XG4gIH1cbiAgdmFyIG9yaWdpbmFsRGlyQ291bnQgPSB2bS5fZGlyZWN0aXZlcy5sZW5ndGg7XG4gIGxpbmtlcigpO1xuICB2YXIgZGlycyA9IHZtLl9kaXJlY3RpdmVzLnNsaWNlKG9yaWdpbmFsRGlyQ291bnQpO1xuICBkaXJzLnNvcnQoZGlyZWN0aXZlQ29tcGFyYXRvcik7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gZGlycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBkaXJzW2ldLl9iaW5kKCk7XG4gIH1cbiAgcmV0dXJuIGRpcnM7XG59XG5cbi8qKlxuICogRGlyZWN0aXZlIHByaW9yaXR5IHNvcnQgY29tcGFyYXRvclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhXG4gKiBAcGFyYW0ge09iamVjdH0gYlxuICovXG5cbmZ1bmN0aW9uIGRpcmVjdGl2ZUNvbXBhcmF0b3IoYSwgYikge1xuICBhID0gYS5kZXNjcmlwdG9yLmRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZO1xuICBiID0gYi5kZXNjcmlwdG9yLmRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZO1xuICByZXR1cm4gYSA+IGIgPyAtMSA6IGEgPT09IGIgPyAwIDogMTtcbn1cblxuLyoqXG4gKiBMaW5rZXIgZnVuY3Rpb25zIHJldHVybiBhbiB1bmxpbmsgZnVuY3Rpb24gdGhhdFxuICogdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzIGluc3RhbmNlcyBnZW5lcmF0ZWQgZHVyaW5nXG4gKiB0aGUgcHJvY2Vzcy5cbiAqXG4gKiBXZSBjcmVhdGUgdW5saW5rIGZ1bmN0aW9ucyB3aXRoIG9ubHkgdGhlIG5lY2Vzc2FyeVxuICogaW5mb3JtYXRpb24gdG8gYXZvaWQgcmV0YWluaW5nIGFkZGl0aW9uYWwgY2xvc3VyZXMuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0FycmF5fSBkaXJzXG4gKiBAcGFyYW0ge1Z1ZX0gW2NvbnRleHRdXG4gKiBAcGFyYW0ge0FycmF5fSBbY29udGV4dERpcnNdXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBtYWtlVW5saW5rRm4odm0sIGRpcnMsIGNvbnRleHQsIGNvbnRleHREaXJzKSB7XG4gIGZ1bmN0aW9uIHVubGluayhkZXN0cm95aW5nKSB7XG4gICAgdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKTtcbiAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0RGlycykge1xuICAgICAgdGVhcmRvd25EaXJzKGNvbnRleHQsIGNvbnRleHREaXJzKTtcbiAgICB9XG4gIH1cbiAgLy8gZXhwb3NlIGxpbmtlZCBkaXJlY3RpdmVzXG4gIHVubGluay5kaXJzID0gZGlycztcbiAgcmV0dXJuIHVubGluaztcbn1cblxuLyoqXG4gKiBUZWFyZG93biBwYXJ0aWFsIGxpbmtlZCBkaXJlY3RpdmVzLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtBcnJheX0gZGlyc1xuICogQHBhcmFtIHtCb29sZWFufSBkZXN0cm95aW5nXG4gKi9cblxuZnVuY3Rpb24gdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKSB7XG4gIHZhciBpID0gZGlycy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBkaXJzW2ldLl90ZWFyZG93bigpO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFkZXN0cm95aW5nKSB7XG4gICAgICB2bS5fZGlyZWN0aXZlcy4kcmVtb3ZlKGRpcnNbaV0pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENvbXBpbGUgbGluayBwcm9wcyBvbiBhbiBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1xuICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVBbmRMaW5rUHJvcHModm0sIGVsLCBwcm9wcywgc2NvcGUpIHtcbiAgdmFyIHByb3BzTGlua0ZuID0gY29tcGlsZVByb3BzKGVsLCBwcm9wcywgdm0pO1xuICB2YXIgcHJvcERpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG4gICAgcHJvcHNMaW5rRm4odm0sIHNjb3BlKTtcbiAgfSwgdm0pO1xuICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBwcm9wRGlycyk7XG59XG5cbi8qKlxuICogQ29tcGlsZSB0aGUgcm9vdCBlbGVtZW50IG9mIGFuIGluc3RhbmNlLlxuICpcbiAqIDEuIGF0dHJzIG9uIGNvbnRleHQgY29udGFpbmVyIChjb250ZXh0IHNjb3BlKVxuICogMi4gYXR0cnMgb24gdGhlIGNvbXBvbmVudCB0ZW1wbGF0ZSByb290IG5vZGUsIGlmXG4gKiAgICByZXBsYWNlOnRydWUgKGNoaWxkIHNjb3BlKVxuICpcbiAqIElmIHRoaXMgaXMgYSBmcmFnbWVudCBpbnN0YW5jZSwgd2Ugb25seSBuZWVkIHRvIGNvbXBpbGUgMS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRPcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlUm9vdChlbCwgb3B0aW9ucywgY29udGV4dE9wdGlvbnMpIHtcbiAgdmFyIGNvbnRhaW5lckF0dHJzID0gb3B0aW9ucy5fY29udGFpbmVyQXR0cnM7XG4gIHZhciByZXBsYWNlckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRycztcbiAgdmFyIGNvbnRleHRMaW5rRm4sIHJlcGxhY2VyTGlua0ZuO1xuXG4gIC8vIG9ubHkgbmVlZCB0byBjb21waWxlIG90aGVyIGF0dHJpYnV0ZXMgZm9yXG4gIC8vIG5vbi1mcmFnbWVudCBpbnN0YW5jZXNcbiAgaWYgKGVsLm5vZGVUeXBlICE9PSAxMSkge1xuICAgIC8vIGZvciBjb21wb25lbnRzLCBjb250YWluZXIgYW5kIHJlcGxhY2VyIG5lZWQgdG8gYmVcbiAgICAvLyBjb21waWxlZCBzZXBhcmF0ZWx5IGFuZCBsaW5rZWQgaW4gZGlmZmVyZW50IHNjb3Blcy5cbiAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQpIHtcbiAgICAgIC8vIDIuIGNvbnRhaW5lciBhdHRyaWJ1dGVzXG4gICAgICBpZiAoY29udGFpbmVyQXR0cnMgJiYgY29udGV4dE9wdGlvbnMpIHtcbiAgICAgICAgY29udGV4dExpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGNvbnRhaW5lckF0dHJzLCBjb250ZXh0T3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBpZiAocmVwbGFjZXJBdHRycykge1xuICAgICAgICAvLyAzLiByZXBsYWNlciBhdHRyaWJ1dGVzXG4gICAgICAgIHJlcGxhY2VyTGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMocmVwbGFjZXJBdHRycywgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vbi1jb21wb25lbnQsIGp1c3QgY29tcGlsZSBhcyBhIG5vcm1hbCBlbGVtZW50LlxuICAgICAgcmVwbGFjZXJMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhlbC5hdHRyaWJ1dGVzLCBvcHRpb25zKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb250YWluZXJBdHRycykge1xuICAgIC8vIHdhcm4gY29udGFpbmVyIGRpcmVjdGl2ZXMgZm9yIGZyYWdtZW50IGluc3RhbmNlc1xuICAgIHZhciBuYW1lcyA9IGNvbnRhaW5lckF0dHJzLmZpbHRlcihmdW5jdGlvbiAoYXR0cikge1xuICAgICAgLy8gYWxsb3cgdnVlLWxvYWRlci92dWVpZnkgc2NvcGVkIGNzcyBhdHRyaWJ1dGVzXG4gICAgICByZXR1cm4gYXR0ci5uYW1lLmluZGV4T2YoJ192LScpIDwgMCAmJlxuICAgICAgLy8gYWxsb3cgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAhb25SRS50ZXN0KGF0dHIubmFtZSkgJiZcbiAgICAgIC8vIGFsbG93IHNsb3RzXG4gICAgICBhdHRyLm5hbWUgIT09ICdzbG90JztcbiAgICB9KS5tYXAoZnVuY3Rpb24gKGF0dHIpIHtcbiAgICAgIHJldHVybiAnXCInICsgYXR0ci5uYW1lICsgJ1wiJztcbiAgICB9KTtcbiAgICBpZiAobmFtZXMubGVuZ3RoKSB7XG4gICAgICB2YXIgcGx1cmFsID0gbmFtZXMubGVuZ3RoID4gMTtcbiAgICAgIHdhcm4oJ0F0dHJpYnV0ZScgKyAocGx1cmFsID8gJ3MgJyA6ICcgJykgKyBuYW1lcy5qb2luKCcsICcpICsgKHBsdXJhbCA/ICcgYXJlJyA6ICcgaXMnKSArICcgaWdub3JlZCBvbiBjb21wb25lbnQgJyArICc8JyArIG9wdGlvbnMuZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICsgJz4gYmVjYXVzZSAnICsgJ3RoZSBjb21wb25lbnQgaXMgYSBmcmFnbWVudCBpbnN0YW5jZTogJyArICdodHRwOi8vdnVlanMub3JnL2d1aWRlL2NvbXBvbmVudHMuaHRtbCNGcmFnbWVudC1JbnN0YW5jZScpO1xuICAgIH1cbiAgfVxuXG4gIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRycyA9IG51bGw7XG4gIHJldHVybiBmdW5jdGlvbiByb290TGlua0ZuKHZtLCBlbCwgc2NvcGUpIHtcbiAgICAvLyBsaW5rIGNvbnRleHQgc2NvcGUgZGlyc1xuICAgIHZhciBjb250ZXh0ID0gdm0uX2NvbnRleHQ7XG4gICAgdmFyIGNvbnRleHREaXJzO1xuICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHRMaW5rRm4pIHtcbiAgICAgIGNvbnRleHREaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBjb250ZXh0TGlua0ZuKGNvbnRleHQsIGVsLCBudWxsLCBzY29wZSk7XG4gICAgICB9LCBjb250ZXh0KTtcbiAgICB9XG5cbiAgICAvLyBsaW5rIHNlbGZcbiAgICB2YXIgc2VsZkRpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAocmVwbGFjZXJMaW5rRm4pIHJlcGxhY2VyTGlua0ZuKHZtLCBlbCk7XG4gICAgfSwgdm0pO1xuXG4gICAgLy8gcmV0dXJuIHRoZSB1bmxpbmsgZnVuY3Rpb24gdGhhdCB0ZWFyc2Rvd24gY29udGV4dFxuICAgIC8vIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuICAgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIHNlbGZEaXJzLCBjb250ZXh0LCBjb250ZXh0RGlycyk7XG4gIH07XG59XG5cbi8qKlxuICogQ29tcGlsZSBhIG5vZGUgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4gYmFzZWQgb24gdGhlXG4gKiBub2RlIHR5cGUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258bnVsbH1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKSB7XG4gIHZhciB0eXBlID0gbm9kZS5ub2RlVHlwZTtcbiAgaWYgKHR5cGUgPT09IDEgJiYgIWlzU2NyaXB0KG5vZGUpKSB7XG4gICAgcmV0dXJuIGNvbXBpbGVFbGVtZW50KG5vZGUsIG9wdGlvbnMpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IDMgJiYgbm9kZS5kYXRhLnRyaW0oKSkge1xuICAgIHJldHVybiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBDb21waWxlIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZUVsZW1lbnQoZWwsIG9wdGlvbnMpIHtcbiAgLy8gcHJlcHJvY2VzcyB0ZXh0YXJlYXMuXG4gIC8vIHRleHRhcmVhIHRyZWF0cyBpdHMgdGV4dCBjb250ZW50IGFzIHRoZSBpbml0aWFsIHZhbHVlLlxuICAvLyBqdXN0IGJpbmQgaXQgYXMgYW4gYXR0ciBkaXJlY3RpdmUgZm9yIHZhbHVlLlxuICBpZiAoZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQoZWwudmFsdWUpO1xuICAgIGlmICh0b2tlbnMpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnOnZhbHVlJywgdG9rZW5zVG9FeHAodG9rZW5zKSk7XG4gICAgICBlbC52YWx1ZSA9ICcnO1xuICAgIH1cbiAgfVxuICB2YXIgbGlua0ZuO1xuICB2YXIgaGFzQXR0cnMgPSBlbC5oYXNBdHRyaWJ1dGVzKCk7XG4gIHZhciBhdHRycyA9IGhhc0F0dHJzICYmIHRvQXJyYXkoZWwuYXR0cmlidXRlcyk7XG4gIC8vIGNoZWNrIHRlcm1pbmFsIGRpcmVjdGl2ZXMgKGZvciAmIGlmKVxuICBpZiAoaGFzQXR0cnMpIHtcbiAgICBsaW5rRm4gPSBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyhlbCwgYXR0cnMsIG9wdGlvbnMpO1xuICB9XG4gIC8vIGNoZWNrIGVsZW1lbnQgZGlyZWN0aXZlc1xuICBpZiAoIWxpbmtGbikge1xuICAgIGxpbmtGbiA9IGNoZWNrRWxlbWVudERpcmVjdGl2ZXMoZWwsIG9wdGlvbnMpO1xuICB9XG4gIC8vIGNoZWNrIGNvbXBvbmVudFxuICBpZiAoIWxpbmtGbikge1xuICAgIGxpbmtGbiA9IGNoZWNrQ29tcG9uZW50KGVsLCBvcHRpb25zKTtcbiAgfVxuICAvLyBub3JtYWwgZGlyZWN0aXZlc1xuICBpZiAoIWxpbmtGbiAmJiBoYXNBdHRycykge1xuICAgIGxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGF0dHJzLCBvcHRpb25zKTtcbiAgfVxuICByZXR1cm4gbGlua0ZuO1xufVxuXG4vKipcbiAqIENvbXBpbGUgYSB0ZXh0Tm9kZSBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbi5cbiAqXG4gKiBAcGFyYW0ge1RleHROb2RlfSBub2RlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258bnVsbH0gdGV4dE5vZGVMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucykge1xuICAvLyBza2lwIG1hcmtlZCB0ZXh0IG5vZGVzXG4gIGlmIChub2RlLl9za2lwKSB7XG4gICAgcmV0dXJuIHJlbW92ZVRleHQ7XG4gIH1cblxuICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KG5vZGUud2hvbGVUZXh0KTtcbiAgaWYgKCF0b2tlbnMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIG1hcmsgYWRqYWNlbnQgdGV4dCBub2RlcyBhcyBza2lwcGVkLFxuICAvLyBiZWNhdXNlIHdlIGFyZSB1c2luZyBub2RlLndob2xlVGV4dCB0byBjb21waWxlXG4gIC8vIGFsbCBhZGphY2VudCB0ZXh0IG5vZGVzIHRvZ2V0aGVyLiBUaGlzIGZpeGVzXG4gIC8vIGlzc3VlcyBpbiBJRSB3aGVyZSBzb21ldGltZXMgaXQgc3BsaXRzIHVwIGEgc2luZ2xlXG4gIC8vIHRleHQgbm9kZSBpbnRvIG11bHRpcGxlIG9uZXMuXG4gIHZhciBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcbiAgd2hpbGUgKG5leHQgJiYgbmV4dC5ub2RlVHlwZSA9PT0gMykge1xuICAgIG5leHQuX3NraXAgPSB0cnVlO1xuICAgIG5leHQgPSBuZXh0Lm5leHRTaWJsaW5nO1xuICB9XG5cbiAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIHZhciBlbCwgdG9rZW47XG4gIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHRva2VuID0gdG9rZW5zW2ldO1xuICAgIGVsID0gdG9rZW4udGFnID8gcHJvY2Vzc1RleHRUb2tlbih0b2tlbiwgb3B0aW9ucykgOiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0b2tlbi52YWx1ZSk7XG4gICAgZnJhZy5hcHBlbmRDaGlsZChlbCk7XG4gIH1cbiAgcmV0dXJuIG1ha2VUZXh0Tm9kZUxpbmtGbih0b2tlbnMsIGZyYWcsIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIExpbmtlciBmb3IgYW4gc2tpcHBlZCB0ZXh0IG5vZGUuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge1RleHR9IG5vZGVcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVUZXh0KHZtLCBub2RlKSB7XG4gIHJlbW92ZShub2RlKTtcbn1cblxuLyoqXG4gKiBQcm9jZXNzIGEgc2luZ2xlIHRleHQgdG9rZW4uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRva2VuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7Tm9kZX1cbiAqL1xuXG5mdW5jdGlvbiBwcm9jZXNzVGV4dFRva2VuKHRva2VuLCBvcHRpb25zKSB7XG4gIHZhciBlbDtcbiAgaWYgKHRva2VuLm9uZVRpbWUpIHtcbiAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRva2VuLnZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodG9rZW4uaHRtbCkge1xuICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KCd2LWh0bWwnKTtcbiAgICAgIHNldFRva2VuVHlwZSgnaHRtbCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJRSB3aWxsIGNsZWFuIHVwIGVtcHR5IHRleHROb2RlcyBkdXJpbmdcbiAgICAgIC8vIGZyYWcuY2xvbmVOb2RlKHRydWUpLCBzbyB3ZSBoYXZlIHRvIGdpdmUgaXRcbiAgICAgIC8vIHNvbWV0aGluZyBoZXJlLi4uXG4gICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcgJyk7XG4gICAgICBzZXRUb2tlblR5cGUoJ3RleHQnKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gc2V0VG9rZW5UeXBlKHR5cGUpIHtcbiAgICBpZiAodG9rZW4uZGVzY3JpcHRvcikgcmV0dXJuO1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh0b2tlbi52YWx1ZSk7XG4gICAgdG9rZW4uZGVzY3JpcHRvciA9IHtcbiAgICAgIG5hbWU6IHR5cGUsXG4gICAgICBkZWY6IGRpcmVjdGl2ZXNbdHlwZV0sXG4gICAgICBleHByZXNzaW9uOiBwYXJzZWQuZXhwcmVzc2lvbixcbiAgICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzXG4gICAgfTtcbiAgfVxuICByZXR1cm4gZWw7XG59XG5cbi8qKlxuICogQnVpbGQgYSBmdW5jdGlvbiB0aGF0IHByb2Nlc3NlcyBhIHRleHROb2RlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gdG9rZW5zXG4gKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcbiAqL1xuXG5mdW5jdGlvbiBtYWtlVGV4dE5vZGVMaW5rRm4odG9rZW5zLCBmcmFnKSB7XG4gIHJldHVybiBmdW5jdGlvbiB0ZXh0Tm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlKSB7XG4gICAgdmFyIGZyYWdDbG9uZSA9IGZyYWcuY2xvbmVOb2RlKHRydWUpO1xuICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShmcmFnQ2xvbmUuY2hpbGROb2Rlcyk7XG4gICAgdmFyIHRva2VuLCB2YWx1ZSwgbm9kZTtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRva2Vucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHRva2VuID0gdG9rZW5zW2ldO1xuICAgICAgdmFsdWUgPSB0b2tlbi52YWx1ZTtcbiAgICAgIGlmICh0b2tlbi50YWcpIHtcbiAgICAgICAgbm9kZSA9IGNoaWxkTm9kZXNbaV07XG4gICAgICAgIGlmICh0b2tlbi5vbmVUaW1lKSB7XG4gICAgICAgICAgdmFsdWUgPSAoc2NvcGUgfHwgdm0pLiRldmFsKHZhbHVlKTtcbiAgICAgICAgICBpZiAodG9rZW4uaHRtbCkge1xuICAgICAgICAgICAgcmVwbGFjZShub2RlLCBwYXJzZVRlbXBsYXRlKHZhbHVlLCB0cnVlKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5vZGUuZGF0YSA9IF90b1N0cmluZyh2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLl9iaW5kRGlyKHRva2VuLmRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXBsYWNlKGVsLCBmcmFnQ2xvbmUpO1xuICB9O1xufVxuXG4vKipcbiAqIENvbXBpbGUgYSBub2RlIGxpc3QgYW5kIHJldHVybiBhIGNoaWxkTGlua0ZuLlxuICpcbiAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVMaXN0XG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVOb2RlTGlzdChub2RlTGlzdCwgb3B0aW9ucykge1xuICB2YXIgbGlua0ZucyA9IFtdO1xuICB2YXIgbm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4sIG5vZGU7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZUxpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgbm9kZSA9IG5vZGVMaXN0W2ldO1xuICAgIG5vZGVMaW5rRm4gPSBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKTtcbiAgICBjaGlsZExpbmtGbiA9ICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJiBub2RlLnRhZ05hbWUgIT09ICdTQ1JJUFQnICYmIG5vZGUuaGFzQ2hpbGROb2RlcygpID8gY29tcGlsZU5vZGVMaXN0KG5vZGUuY2hpbGROb2Rlcywgb3B0aW9ucykgOiBudWxsO1xuICAgIGxpbmtGbnMucHVzaChub2RlTGlua0ZuLCBjaGlsZExpbmtGbik7XG4gIH1cbiAgcmV0dXJuIGxpbmtGbnMubGVuZ3RoID8gbWFrZUNoaWxkTGlua0ZuKGxpbmtGbnMpIDogbnVsbDtcbn1cblxuLyoqXG4gKiBNYWtlIGEgY2hpbGQgbGluayBmdW5jdGlvbiBmb3IgYSBub2RlJ3MgY2hpbGROb2Rlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PEZ1bmN0aW9uPn0gbGlua0Zuc1xuICogQHJldHVybiB7RnVuY3Rpb259IGNoaWxkTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gbWFrZUNoaWxkTGlua0ZuKGxpbmtGbnMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGNoaWxkTGlua0ZuKHZtLCBub2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICB2YXIgbm9kZSwgbm9kZUxpbmtGbiwgY2hpbGRyZW5MaW5rRm47XG4gICAgZm9yICh2YXIgaSA9IDAsIG4gPSAwLCBsID0gbGlua0Zucy5sZW5ndGg7IGkgPCBsOyBuKyspIHtcbiAgICAgIG5vZGUgPSBub2Rlc1tuXTtcbiAgICAgIG5vZGVMaW5rRm4gPSBsaW5rRm5zW2krK107XG4gICAgICBjaGlsZHJlbkxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcbiAgICAgIC8vIGNhY2hlIGNoaWxkTm9kZXMgYmVmb3JlIGxpbmtpbmcgcGFyZW50LCBmaXggIzY1N1xuICAgICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KG5vZGUuY2hpbGROb2Rlcyk7XG4gICAgICBpZiAobm9kZUxpbmtGbikge1xuICAgICAgICBub2RlTGlua0ZuKHZtLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgICB9XG4gICAgICBpZiAoY2hpbGRyZW5MaW5rRm4pIHtcbiAgICAgICAgY2hpbGRyZW5MaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2sgZm9yIGVsZW1lbnQgZGlyZWN0aXZlcyAoY3VzdG9tIGVsZW1lbnRzIHRoYXQgc2hvdWxkXG4gKiBiZSByZXNvdmxlZCBhcyB0ZXJtaW5hbCBkaXJlY3RpdmVzKS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5cbmZ1bmN0aW9uIGNoZWNrRWxlbWVudERpcmVjdGl2ZXMoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgaWYgKGNvbW1vblRhZ1JFLnRlc3QodGFnKSkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgZGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdlbGVtZW50RGlyZWN0aXZlcycsIHRhZyk7XG4gIGlmIChkZWYpIHtcbiAgICByZXR1cm4gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgdGFnLCAnJywgb3B0aW9ucywgZGVmKTtcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSBjb21wb25lbnQuIElmIHllcywgcmV0dXJuXG4gKiBhIGNvbXBvbmVudCBsaW5rIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gY2hlY2tDb21wb25lbnQoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIGNvbXBvbmVudCA9IGNoZWNrQ29tcG9uZW50QXR0cihlbCwgb3B0aW9ucyk7XG4gIGlmIChjb21wb25lbnQpIHtcbiAgICB2YXIgcmVmID0gZmluZFJlZihlbCk7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSB7XG4gICAgICBuYW1lOiAnY29tcG9uZW50JyxcbiAgICAgIHJlZjogcmVmLFxuICAgICAgZXhwcmVzc2lvbjogY29tcG9uZW50LmlkLFxuICAgICAgZGVmOiBpbnRlcm5hbERpcmVjdGl2ZXMuY29tcG9uZW50LFxuICAgICAgbW9kaWZpZXJzOiB7XG4gICAgICAgIGxpdGVyYWw6ICFjb21wb25lbnQuZHluYW1pY1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIGNvbXBvbmVudExpbmtGbiA9IGZ1bmN0aW9uIGNvbXBvbmVudExpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgICBpZiAocmVmKSB7XG4gICAgICAgIGRlZmluZVJlYWN0aXZlKChzY29wZSB8fCB2bSkuJHJlZnMsIHJlZiwgbnVsbCk7XG4gICAgICB9XG4gICAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgIH07XG4gICAgY29tcG9uZW50TGlua0ZuLnRlcm1pbmFsID0gdHJ1ZTtcbiAgICByZXR1cm4gY29tcG9uZW50TGlua0ZuO1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgYW4gZWxlbWVudCBmb3IgdGVybWluYWwgZGlyZWN0aXZlcyBpbiBmaXhlZCBvcmRlci5cbiAqIElmIGl0IGZpbmRzIG9uZSwgcmV0dXJuIGEgdGVybWluYWwgbGluayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0FycmF5fSBhdHRyc1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0ZXJtaW5hbExpbmtGblxuICovXG5cbmZ1bmN0aW9uIGNoZWNrVGVybWluYWxEaXJlY3RpdmVzKGVsLCBhdHRycywgb3B0aW9ucykge1xuICAvLyBza2lwIHYtcHJlXG4gIGlmIChnZXRBdHRyKGVsLCAndi1wcmUnKSAhPT0gbnVsbCkge1xuICAgIHJldHVybiBza2lwO1xuICB9XG4gIC8vIHNraXAgdi1lbHNlIGJsb2NrLCBidXQgb25seSBpZiBmb2xsb3dpbmcgdi1pZlxuICBpZiAoZWwuaGFzQXR0cmlidXRlKCd2LWVsc2UnKSkge1xuICAgIHZhciBwcmV2ID0gZWwucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICBpZiAocHJldiAmJiBwcmV2Lmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG4gICAgICByZXR1cm4gc2tpcDtcbiAgICB9XG4gIH1cblxuICB2YXIgYXR0ciwgbmFtZSwgdmFsdWUsIG1vZGlmaWVycywgbWF0Y2hlZCwgZGlyTmFtZSwgcmF3TmFtZSwgYXJnLCBkZWYsIHRlcm1EZWY7XG4gIGZvciAodmFyIGkgPSAwLCBqID0gYXR0cnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgYXR0ciA9IGF0dHJzW2ldO1xuICAgIG5hbWUgPSBhdHRyLm5hbWUucmVwbGFjZShtb2RpZmllclJFLCAnJyk7XG4gICAgaWYgKG1hdGNoZWQgPSBuYW1lLm1hdGNoKGRpckF0dHJSRSkpIHtcbiAgICAgIGRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZGlyZWN0aXZlcycsIG1hdGNoZWRbMV0pO1xuICAgICAgaWYgKGRlZiAmJiBkZWYudGVybWluYWwpIHtcbiAgICAgICAgaWYgKCF0ZXJtRGVmIHx8IChkZWYucHJpb3JpdHkgfHwgREVGQVVMVF9URVJNSU5BTF9QUklPUklUWSkgPiB0ZXJtRGVmLnByaW9yaXR5KSB7XG4gICAgICAgICAgdGVybURlZiA9IGRlZjtcbiAgICAgICAgICByYXdOYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKGF0dHIubmFtZSk7XG4gICAgICAgICAgdmFsdWUgPSBhdHRyLnZhbHVlO1xuICAgICAgICAgIGRpck5hbWUgPSBtYXRjaGVkWzFdO1xuICAgICAgICAgIGFyZyA9IG1hdGNoZWRbMl07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAodGVybURlZikge1xuICAgIHJldHVybiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCBkaXJOYW1lLCB2YWx1ZSwgb3B0aW9ucywgdGVybURlZiwgcmF3TmFtZSwgYXJnLCBtb2RpZmllcnMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNraXAoKSB7fVxuc2tpcC50ZXJtaW5hbCA9IHRydWU7XG5cbi8qKlxuICogQnVpbGQgYSBub2RlIGxpbmsgZnVuY3Rpb24gZm9yIGEgdGVybWluYWwgZGlyZWN0aXZlLlxuICogQSB0ZXJtaW5hbCBsaW5rIGZ1bmN0aW9uIHRlcm1pbmF0ZXMgdGhlIGN1cnJlbnRcbiAqIGNvbXBpbGF0aW9uIHJlY3Vyc2lvbiBhbmQgaGFuZGxlcyBjb21waWxhdGlvbiBvZiB0aGVcbiAqIHN1YnRyZWUgaW4gdGhlIGRpcmVjdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gZGlyTmFtZVxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtPYmplY3R9IGRlZlxuICogQHBhcmFtIHtTdHJpbmd9IFtyYXdOYW1lXVxuICogQHBhcmFtIHtTdHJpbmd9IFthcmddXG4gKiBAcGFyYW0ge09iamVjdH0gW21vZGlmaWVyc11cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0ZXJtaW5hbExpbmtGblxuICovXG5cbmZ1bmN0aW9uIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIGRpck5hbWUsIHZhbHVlLCBvcHRpb25zLCBkZWYsIHJhd05hbWUsIGFyZywgbW9kaWZpZXJzKSB7XG4gIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG4gIHZhciBkZXNjcmlwdG9yID0ge1xuICAgIG5hbWU6IGRpck5hbWUsXG4gICAgYXJnOiBhcmcsXG4gICAgZXhwcmVzc2lvbjogcGFyc2VkLmV4cHJlc3Npb24sXG4gICAgZmlsdGVyczogcGFyc2VkLmZpbHRlcnMsXG4gICAgcmF3OiB2YWx1ZSxcbiAgICBhdHRyOiByYXdOYW1lLFxuICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLFxuICAgIGRlZjogZGVmXG4gIH07XG4gIC8vIGNoZWNrIHJlZiBmb3Igdi1mb3IgYW5kIHJvdXRlci12aWV3XG4gIGlmIChkaXJOYW1lID09PSAnZm9yJyB8fCBkaXJOYW1lID09PSAncm91dGVyLXZpZXcnKSB7XG4gICAgZGVzY3JpcHRvci5yZWYgPSBmaW5kUmVmKGVsKTtcbiAgfVxuICB2YXIgZm4gPSBmdW5jdGlvbiB0ZXJtaW5hbE5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIGlmIChkZXNjcmlwdG9yLnJlZikge1xuICAgICAgZGVmaW5lUmVhY3RpdmUoKHNjb3BlIHx8IHZtKS4kcmVmcywgZGVzY3JpcHRvci5yZWYsIG51bGwpO1xuICAgIH1cbiAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICB9O1xuICBmbi50ZXJtaW5hbCA9IHRydWU7XG4gIHJldHVybiBmbjtcbn1cblxuLyoqXG4gKiBDb21waWxlIHRoZSBkaXJlY3RpdmVzIG9uIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIGxpbmtlci5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fE5hbWVkTm9kZU1hcH0gYXR0cnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlRGlyZWN0aXZlcyhhdHRycywgb3B0aW9ucykge1xuICB2YXIgaSA9IGF0dHJzLmxlbmd0aDtcbiAgdmFyIGRpcnMgPSBbXTtcbiAgdmFyIGF0dHIsIG5hbWUsIHZhbHVlLCByYXdOYW1lLCByYXdWYWx1ZSwgZGlyTmFtZSwgYXJnLCBtb2RpZmllcnMsIGRpckRlZiwgdG9rZW5zLCBtYXRjaGVkO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgYXR0ciA9IGF0dHJzW2ldO1xuICAgIG5hbWUgPSByYXdOYW1lID0gYXR0ci5uYW1lO1xuICAgIHZhbHVlID0gcmF3VmFsdWUgPSBhdHRyLnZhbHVlO1xuICAgIHRva2VucyA9IHBhcnNlVGV4dCh2YWx1ZSk7XG4gICAgLy8gcmVzZXQgYXJnXG4gICAgYXJnID0gbnVsbDtcbiAgICAvLyBjaGVjayBtb2RpZmllcnNcbiAgICBtb2RpZmllcnMgPSBwYXJzZU1vZGlmaWVycyhuYW1lKTtcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKTtcblxuICAgIC8vIGF0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uc1xuICAgIGlmICh0b2tlbnMpIHtcbiAgICAgIHZhbHVlID0gdG9rZW5zVG9FeHAodG9rZW5zKTtcbiAgICAgIGFyZyA9IG5hbWU7XG4gICAgICBwdXNoRGlyKCdiaW5kJywgZGlyZWN0aXZlcy5iaW5kLCB0b2tlbnMpO1xuICAgICAgLy8gd2FybiBhZ2FpbnN0IG1peGluZyBtdXN0YWNoZXMgd2l0aCB2LWJpbmRcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmIChuYW1lID09PSAnY2xhc3MnICYmIEFycmF5LnByb3RvdHlwZS5zb21lLmNhbGwoYXR0cnMsIGZ1bmN0aW9uIChhdHRyKSB7XG4gICAgICAgICAgcmV0dXJuIGF0dHIubmFtZSA9PT0gJzpjbGFzcycgfHwgYXR0ci5uYW1lID09PSAndi1iaW5kOmNsYXNzJztcbiAgICAgICAgfSkpIHtcbiAgICAgICAgICB3YXJuKCdjbGFzcz1cIicgKyByYXdWYWx1ZSArICdcIjogRG8gbm90IG1peCBtdXN0YWNoZSBpbnRlcnBvbGF0aW9uICcgKyAnYW5kIHYtYmluZCBmb3IgXCJjbGFzc1wiIG9uIHRoZSBzYW1lIGVsZW1lbnQuIFVzZSBvbmUgb3IgdGhlIG90aGVyLicsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlXG5cbiAgICAgIC8vIHNwZWNpYWwgYXR0cmlidXRlOiB0cmFuc2l0aW9uXG4gICAgICBpZiAodHJhbnNpdGlvblJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgbW9kaWZpZXJzLmxpdGVyYWwgPSAhYmluZFJFLnRlc3QobmFtZSk7XG4gICAgICAgIHB1c2hEaXIoJ3RyYW5zaXRpb24nLCBpbnRlcm5hbERpcmVjdGl2ZXMudHJhbnNpdGlvbik7XG4gICAgICB9IGVsc2VcblxuICAgICAgICAvLyBldmVudCBoYW5kbGVyc1xuICAgICAgICBpZiAob25SRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgICAgYXJnID0gbmFtZS5yZXBsYWNlKG9uUkUsICcnKTtcbiAgICAgICAgICBwdXNoRGlyKCdvbicsIGRpcmVjdGl2ZXMub24pO1xuICAgICAgICB9IGVsc2VcblxuICAgICAgICAgIC8vIGF0dHJpYnV0ZSBiaW5kaW5nc1xuICAgICAgICAgIGlmIChiaW5kUkUudGVzdChuYW1lKSkge1xuICAgICAgICAgICAgZGlyTmFtZSA9IG5hbWUucmVwbGFjZShiaW5kUkUsICcnKTtcbiAgICAgICAgICAgIGlmIChkaXJOYW1lID09PSAnc3R5bGUnIHx8IGRpck5hbWUgPT09ICdjbGFzcycpIHtcbiAgICAgICAgICAgICAgcHVzaERpcihkaXJOYW1lLCBpbnRlcm5hbERpcmVjdGl2ZXNbZGlyTmFtZV0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYXJnID0gZGlyTmFtZTtcbiAgICAgICAgICAgICAgcHVzaERpcignYmluZCcsIGRpcmVjdGl2ZXMuYmluZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlXG5cbiAgICAgICAgICAgIC8vIG5vcm1hbCBkaXJlY3RpdmVzXG4gICAgICAgICAgICBpZiAobWF0Y2hlZCA9IG5hbWUubWF0Y2goZGlyQXR0clJFKSkge1xuICAgICAgICAgICAgICBkaXJOYW1lID0gbWF0Y2hlZFsxXTtcbiAgICAgICAgICAgICAgYXJnID0gbWF0Y2hlZFsyXTtcblxuICAgICAgICAgICAgICAvLyBza2lwIHYtZWxzZSAod2hlbiB1c2VkIHdpdGggdi1zaG93KVxuICAgICAgICAgICAgICBpZiAoZGlyTmFtZSA9PT0gJ2Vsc2UnKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBkaXJEZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBkaXJOYW1lLCB0cnVlKTtcbiAgICAgICAgICAgICAgaWYgKGRpckRlZikge1xuICAgICAgICAgICAgICAgIHB1c2hEaXIoZGlyTmFtZSwgZGlyRGVmKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFB1c2ggYSBkaXJlY3RpdmUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBkaXJOYW1lXG4gICAqIEBwYXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSBkZWZcbiAgICogQHBhcmFtIHtBcnJheX0gW2ludGVycFRva2Vuc11cbiAgICovXG5cbiAgZnVuY3Rpb24gcHVzaERpcihkaXJOYW1lLCBkZWYsIGludGVycFRva2Vucykge1xuICAgIHZhciBoYXNPbmVUaW1lVG9rZW4gPSBpbnRlcnBUb2tlbnMgJiYgaGFzT25lVGltZShpbnRlcnBUb2tlbnMpO1xuICAgIHZhciBwYXJzZWQgPSAhaGFzT25lVGltZVRva2VuICYmIHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcbiAgICBkaXJzLnB1c2goe1xuICAgICAgbmFtZTogZGlyTmFtZSxcbiAgICAgIGF0dHI6IHJhd05hbWUsXG4gICAgICByYXc6IHJhd1ZhbHVlLFxuICAgICAgZGVmOiBkZWYsXG4gICAgICBhcmc6IGFyZyxcbiAgICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLFxuICAgICAgLy8gY29udmVyc2lvbiBmcm9tIGludGVycG9sYXRpb24gc3RyaW5ncyB3aXRoIG9uZS10aW1lIHRva2VuXG4gICAgICAvLyB0byBleHByZXNzaW9uIGlzIGRpZmZlcmVkIHVudGlsIGRpcmVjdGl2ZSBiaW5kIHRpbWUgc28gdGhhdCB3ZVxuICAgICAgLy8gaGF2ZSBhY2Nlc3MgdG8gdGhlIGFjdHVhbCB2bSBjb250ZXh0IGZvciBvbmUtdGltZSBiaW5kaW5ncy5cbiAgICAgIGV4cHJlc3Npb246IHBhcnNlZCAmJiBwYXJzZWQuZXhwcmVzc2lvbixcbiAgICAgIGZpbHRlcnM6IHBhcnNlZCAmJiBwYXJzZWQuZmlsdGVycyxcbiAgICAgIGludGVycDogaW50ZXJwVG9rZW5zLFxuICAgICAgaGFzT25lVGltZTogaGFzT25lVGltZVRva2VuXG4gICAgfSk7XG4gIH1cblxuICBpZiAoZGlycy5sZW5ndGgpIHtcbiAgICByZXR1cm4gbWFrZU5vZGVMaW5rRm4oZGlycyk7XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZSBtb2RpZmllcnMgZnJvbSBkaXJlY3RpdmUgYXR0cmlidXRlIG5hbWUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZU1vZGlmaWVycyhuYW1lKSB7XG4gIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB2YXIgbWF0Y2ggPSBuYW1lLm1hdGNoKG1vZGlmaWVyUkUpO1xuICBpZiAobWF0Y2gpIHtcbiAgICB2YXIgaSA9IG1hdGNoLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICByZXNbbWF0Y2hbaV0uc2xpY2UoMSldID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBCdWlsZCBhIGxpbmsgZnVuY3Rpb24gZm9yIGFsbCBkaXJlY3RpdmVzIG9uIGEgc2luZ2xlIG5vZGUuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gZGlyZWN0aXZlc1xuICogQHJldHVybiB7RnVuY3Rpb259IGRpcmVjdGl2ZXNMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlTm9kZUxpbmtGbihkaXJlY3RpdmVzKSB7XG4gIHJldHVybiBmdW5jdGlvbiBub2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICAvLyByZXZlcnNlIGFwcGx5IGJlY2F1c2UgaXQncyBzb3J0ZWQgbG93IHRvIGhpZ2hcbiAgICB2YXIgaSA9IGRpcmVjdGl2ZXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZtLl9iaW5kRGlyKGRpcmVjdGl2ZXNbaV0sIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGludGVycG9sYXRpb24gc3RyaW5nIGNvbnRhaW5zIG9uZS10aW1lIHRva2Vucy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSB0b2tlbnNcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaGFzT25lVGltZSh0b2tlbnMpIHtcbiAgdmFyIGkgPSB0b2tlbnMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgaWYgKHRva2Vuc1tpXS5vbmVUaW1lKSByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1NjcmlwdChlbCkge1xuICByZXR1cm4gZWwudGFnTmFtZSA9PT0gJ1NDUklQVCcgJiYgKCFlbC5oYXNBdHRyaWJ1dGUoJ3R5cGUnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PT0gJ3RleHQvamF2YXNjcmlwdCcpO1xufVxuXG52YXIgc3BlY2lhbENoYXJSRSA9IC9bXlxcd1xcLTpcXC5dLztcblxuLyoqXG4gKiBQcm9jZXNzIGFuIGVsZW1lbnQgb3IgYSBEb2N1bWVudEZyYWdtZW50IGJhc2VkIG9uIGFcbiAqIGluc3RhbmNlIG9wdGlvbiBvYmplY3QuIFRoaXMgYWxsb3dzIHVzIHRvIHRyYW5zY2x1ZGVcbiAqIGEgdGVtcGxhdGUgbm9kZS9mcmFnbWVudCBiZWZvcmUgdGhlIGluc3RhbmNlIGlzIGNyZWF0ZWQsXG4gKiBzbyB0aGUgcHJvY2Vzc2VkIGZyYWdtZW50IGNhbiB0aGVuIGJlIGNsb25lZCBhbmQgcmV1c2VkXG4gKiBpbiB2LWZvci5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIHRyYW5zY2x1ZGUoZWwsIG9wdGlvbnMpIHtcbiAgLy8gZXh0cmFjdCBjb250YWluZXIgYXR0cmlidXRlcyB0byBwYXNzIHRoZW0gZG93blxuICAvLyB0byBjb21waWxlciwgYmVjYXVzZSB0aGV5IG5lZWQgdG8gYmUgY29tcGlsZWQgaW5cbiAgLy8gcGFyZW50IHNjb3BlLiB3ZSBhcmUgbXV0YXRpbmcgdGhlIG9wdGlvbnMgb2JqZWN0IGhlcmVcbiAgLy8gYXNzdW1pbmcgdGhlIHNhbWUgb2JqZWN0IHdpbGwgYmUgdXNlZCBmb3IgY29tcGlsZVxuICAvLyByaWdodCBhZnRlciB0aGlzLlxuICBpZiAob3B0aW9ucykge1xuICAgIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gZXh0cmFjdEF0dHJzKGVsKTtcbiAgfVxuICAvLyBmb3IgdGVtcGxhdGUgdGFncywgd2hhdCB3ZSB3YW50IGlzIGl0cyBjb250ZW50IGFzXG4gIC8vIGEgZG9jdW1lbnRGcmFnbWVudCAoZm9yIGZyYWdtZW50IGluc3RhbmNlcylcbiAgaWYgKGlzVGVtcGxhdGUoZWwpKSB7XG4gICAgZWwgPSBwYXJzZVRlbXBsYXRlKGVsKTtcbiAgfVxuICBpZiAob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCAmJiAhb3B0aW9ucy50ZW1wbGF0ZSkge1xuICAgICAgb3B0aW9ucy50ZW1wbGF0ZSA9ICc8c2xvdD48L3Nsb3Q+JztcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMudGVtcGxhdGUpIHtcbiAgICAgIG9wdGlvbnMuX2NvbnRlbnQgPSBleHRyYWN0Q29udGVudChlbCk7XG4gICAgICBlbCA9IHRyYW5zY2x1ZGVUZW1wbGF0ZShlbCwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG4gIGlmIChpc0ZyYWdtZW50KGVsKSkge1xuICAgIC8vIGFuY2hvcnMgZm9yIGZyYWdtZW50IGluc3RhbmNlXG4gICAgLy8gcGFzc2luZyBpbiBgcGVyc2lzdDogdHJ1ZWAgdG8gYXZvaWQgdGhlbSBiZWluZ1xuICAgIC8vIGRpc2NhcmRlZCBieSBJRSBkdXJpbmcgdGVtcGxhdGUgY2xvbmluZ1xuICAgIHByZXBlbmQoY3JlYXRlQW5jaG9yKCd2LXN0YXJ0JywgdHJ1ZSksIGVsKTtcbiAgICBlbC5hcHBlbmRDaGlsZChjcmVhdGVBbmNob3IoJ3YtZW5kJywgdHJ1ZSkpO1xuICB9XG4gIHJldHVybiBlbDtcbn1cblxuLyoqXG4gKiBQcm9jZXNzIHRoZSB0ZW1wbGF0ZSBvcHRpb24uXG4gKiBJZiB0aGUgcmVwbGFjZSBvcHRpb24gaXMgdHJ1ZSB0aGlzIHdpbGwgc3dhcCB0aGUgJGVsLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gdHJhbnNjbHVkZVRlbXBsYXRlKGVsLCBvcHRpb25zKSB7XG4gIHZhciB0ZW1wbGF0ZSA9IG9wdGlvbnMudGVtcGxhdGU7XG4gIHZhciBmcmFnID0gcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgdHJ1ZSk7XG4gIGlmIChmcmFnKSB7XG4gICAgdmFyIHJlcGxhY2VyID0gZnJhZy5maXJzdENoaWxkO1xuICAgIHZhciB0YWcgPSByZXBsYWNlci50YWdOYW1lICYmIHJlcGxhY2VyLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAob3B0aW9ucy5yZXBsYWNlKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChlbCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1lvdSBhcmUgbW91bnRpbmcgYW4gaW5zdGFuY2Ugd2l0aCBhIHRlbXBsYXRlIHRvICcgKyAnPGJvZHk+LiBUaGlzIHdpbGwgcmVwbGFjZSA8Ym9keT4gZW50aXJlbHkuIFlvdSAnICsgJ3Nob3VsZCBwcm9iYWJseSB1c2UgYHJlcGxhY2U6IGZhbHNlYCBoZXJlLicpO1xuICAgICAgfVxuICAgICAgLy8gdGhlcmUgYXJlIG1hbnkgY2FzZXMgd2hlcmUgdGhlIGluc3RhbmNlIG11c3RcbiAgICAgIC8vIGJlY29tZSBhIGZyYWdtZW50IGluc3RhbmNlOiBiYXNpY2FsbHkgYW55dGhpbmcgdGhhdFxuICAgICAgLy8gY2FuIGNyZWF0ZSBtb3JlIHRoYW4gMSByb290IG5vZGVzLlxuICAgICAgaWYgKFxuICAgICAgLy8gbXVsdGktY2hpbGRyZW4gdGVtcGxhdGVcbiAgICAgIGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPiAxIHx8XG4gICAgICAvLyBub24tZWxlbWVudCB0ZW1wbGF0ZVxuICAgICAgcmVwbGFjZXIubm9kZVR5cGUgIT09IDEgfHxcbiAgICAgIC8vIHNpbmdsZSBuZXN0ZWQgY29tcG9uZW50XG4gICAgICB0YWcgPT09ICdjb21wb25lbnQnIHx8IHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykgfHwgaGFzQmluZEF0dHIocmVwbGFjZXIsICdpcycpIHx8XG4gICAgICAvLyBlbGVtZW50IGRpcmVjdGl2ZVxuICAgICAgcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdlbGVtZW50RGlyZWN0aXZlcycsIHRhZykgfHxcbiAgICAgIC8vIGZvciBibG9ja1xuICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWZvcicpIHx8XG4gICAgICAvLyBpZiBibG9ja1xuICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcbiAgICAgICAgcmV0dXJuIGZyYWc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zLl9yZXBsYWNlckF0dHJzID0gZXh0cmFjdEF0dHJzKHJlcGxhY2VyKTtcbiAgICAgICAgbWVyZ2VBdHRycyhlbCwgcmVwbGFjZXIpO1xuICAgICAgICByZXR1cm4gcmVwbGFjZXI7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLmFwcGVuZENoaWxkKGZyYWcpO1xuICAgICAgcmV0dXJuIGVsO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgdGVtcGxhdGUgb3B0aW9uOiAnICsgdGVtcGxhdGUpO1xuICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGV4dHJhY3QgYSBjb21wb25lbnQgY29udGFpbmVyJ3MgYXR0cmlidXRlc1xuICogaW50byBhIHBsYWluIG9iamVjdCBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuXG5mdW5jdGlvbiBleHRyYWN0QXR0cnMoZWwpIHtcbiAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGVsLmhhc0F0dHJpYnV0ZXMoKSkge1xuICAgIHJldHVybiB0b0FycmF5KGVsLmF0dHJpYnV0ZXMpO1xuICB9XG59XG5cbi8qKlxuICogTWVyZ2UgdGhlIGF0dHJpYnV0ZXMgb2YgdHdvIGVsZW1lbnRzLCBhbmQgbWFrZSBzdXJlXG4gKiB0aGUgY2xhc3MgbmFtZXMgYXJlIG1lcmdlZCBwcm9wZXJseS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGZyb21cbiAqIEBwYXJhbSB7RWxlbWVudH0gdG9cbiAqL1xuXG5mdW5jdGlvbiBtZXJnZUF0dHJzKGZyb20sIHRvKSB7XG4gIHZhciBhdHRycyA9IGZyb20uYXR0cmlidXRlcztcbiAgdmFyIGkgPSBhdHRycy5sZW5ndGg7XG4gIHZhciBuYW1lLCB2YWx1ZTtcbiAgd2hpbGUgKGktLSkge1xuICAgIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuICAgIHZhbHVlID0gYXR0cnNbaV0udmFsdWU7XG4gICAgaWYgKCF0by5oYXNBdHRyaWJ1dGUobmFtZSkgJiYgIXNwZWNpYWxDaGFyUkUudGVzdChuYW1lKSkge1xuICAgICAgdG8uc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgIXBhcnNlVGV4dCh2YWx1ZSkgJiYgKHZhbHVlID0gdmFsdWUudHJpbSgpKSkge1xuICAgICAgdmFsdWUuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcbiAgICAgICAgYWRkQ2xhc3ModG8sIGNscyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBTY2FuIGFuZCBkZXRlcm1pbmUgc2xvdCBjb250ZW50IGRpc3RyaWJ1dGlvbi5cbiAqIFdlIGRvIHRoaXMgZHVyaW5nIHRyYW5zY2x1c2lvbiBpbnN0ZWFkIGF0IGNvbXBpbGUgdGltZSBzbyB0aGF0XG4gKiB0aGUgZGlzdHJpYnV0aW9uIGlzIGRlY291cGxlZCBmcm9tIHRoZSBjb21waWxhdGlvbiBvcmRlciBvZlxuICogdGhlIHNsb3RzLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSB0ZW1wbGF0ZVxuICogQHBhcmFtIHtFbGVtZW50fSBjb250ZW50XG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5mdW5jdGlvbiByZXNvbHZlU2xvdHModm0sIGNvbnRlbnQpIHtcbiAgaWYgKCFjb250ZW50KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBjb250ZW50cyA9IHZtLl9zbG90Q29udGVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB2YXIgZWwsIG5hbWU7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gY29udGVudC5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBlbCA9IGNvbnRlbnQuY2hpbGRyZW5baV07XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICBpZiAobmFtZSA9IGVsLmdldEF0dHJpYnV0ZSgnc2xvdCcpKSB7XG4gICAgICAoY29udGVudHNbbmFtZV0gfHwgKGNvbnRlbnRzW25hbWVdID0gW10pKS5wdXNoKGVsKTtcbiAgICB9XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGdldEJpbmRBdHRyKGVsLCAnc2xvdCcpKSB7XG4gICAgICB3YXJuKCdUaGUgXCJzbG90XCIgYXR0cmlidXRlIG11c3QgYmUgc3RhdGljLicsIHZtLiRwYXJlbnQpO1xuICAgIH1cbiAgfVxuICBmb3IgKG5hbWUgaW4gY29udGVudHMpIHtcbiAgICBjb250ZW50c1tuYW1lXSA9IGV4dHJhY3RGcmFnbWVudChjb250ZW50c1tuYW1lXSwgY29udGVudCk7XG4gIH1cbiAgaWYgKGNvbnRlbnQuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgdmFyIG5vZGVzID0gY29udGVudC5jaGlsZE5vZGVzO1xuICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDEgJiYgbm9kZXNbMF0ubm9kZVR5cGUgPT09IDMgJiYgIW5vZGVzWzBdLmRhdGEudHJpbSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnRlbnRzWydkZWZhdWx0J10gPSBleHRyYWN0RnJhZ21lbnQoY29udGVudC5jaGlsZE5vZGVzLCBjb250ZW50KTtcbiAgfVxufVxuXG4vKipcbiAqIEV4dHJhY3QgcXVhbGlmaWVkIGNvbnRlbnQgbm9kZXMgZnJvbSBhIG5vZGUgbGlzdC5cbiAqXG4gKiBAcGFyYW0ge05vZGVMaXN0fSBub2Rlc1xuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBleHRyYWN0RnJhZ21lbnQobm9kZXMsIHBhcmVudCkge1xuICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgbm9kZXMgPSB0b0FycmF5KG5vZGVzKTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB2YXIgbm9kZSA9IG5vZGVzW2ldO1xuICAgIGlmIChpc1RlbXBsYXRlKG5vZGUpICYmICFub2RlLmhhc0F0dHJpYnV0ZSgndi1pZicpICYmICFub2RlLmhhc0F0dHJpYnV0ZSgndi1mb3InKSkge1xuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgICAgbm9kZSA9IHBhcnNlVGVtcGxhdGUobm9kZSwgdHJ1ZSk7XG4gICAgfVxuICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZSk7XG4gIH1cbiAgcmV0dXJuIGZyYWc7XG59XG5cblxuXG52YXIgY29tcGlsZXIgPSBPYmplY3QuZnJlZXplKHtcblx0Y29tcGlsZTogY29tcGlsZSxcblx0Y29tcGlsZUFuZExpbmtQcm9wczogY29tcGlsZUFuZExpbmtQcm9wcyxcblx0Y29tcGlsZVJvb3Q6IGNvbXBpbGVSb290LFxuXHR0cmFuc2NsdWRlOiB0cmFuc2NsdWRlLFxuXHRyZXNvbHZlU2xvdHM6IHJlc29sdmVTbG90c1xufSk7XG5cbmZ1bmN0aW9uIHN0YXRlTWl4aW4gKFZ1ZSkge1xuICAvKipcbiAgICogQWNjZXNzb3IgZm9yIGAkZGF0YWAgcHJvcGVydHksIHNpbmNlIHNldHRpbmcgJGRhdGFcbiAgICogcmVxdWlyZXMgb2JzZXJ2aW5nIHRoZSBuZXcgb2JqZWN0IGFuZCB1cGRhdGluZ1xuICAgKiBwcm94aWVkIHByb3BlcnRpZXMuXG4gICAqL1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJGRhdGEnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld0RhdGEpIHtcbiAgICAgIGlmIChuZXdEYXRhICE9PSB0aGlzLl9kYXRhKSB7XG4gICAgICAgIHRoaXMuX3NldERhdGEobmV3RGF0YSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogU2V0dXAgdGhlIHNjb3BlIG9mIGFuIGluc3RhbmNlLCB3aGljaCBjb250YWluczpcbiAgICogLSBvYnNlcnZlZCBkYXRhXG4gICAqIC0gY29tcHV0ZWQgcHJvcGVydGllc1xuICAgKiAtIHVzZXIgbWV0aG9kc1xuICAgKiAtIG1ldGEgcHJvcGVydGllc1xuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5faW5pdFByb3BzKCk7XG4gICAgdGhpcy5faW5pdE1ldGEoKTtcbiAgICB0aGlzLl9pbml0TWV0aG9kcygpO1xuICAgIHRoaXMuX2luaXREYXRhKCk7XG4gICAgdGhpcy5faW5pdENvbXB1dGVkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgcHJvcHMuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRQcm9wcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG4gICAgdmFyIGVsID0gb3B0aW9ucy5lbDtcbiAgICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuICAgIGlmIChwcm9wcyAmJiAhZWwpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignUHJvcHMgd2lsbCBub3QgYmUgY29tcGlsZWQgaWYgbm8gYGVsYCBvcHRpb24gaXMgJyArICdwcm92aWRlZCBhdCBpbnN0YW50aWF0aW9uLicsIHRoaXMpO1xuICAgIH1cbiAgICAvLyBtYWtlIHN1cmUgdG8gY29udmVydCBzdHJpbmcgc2VsZWN0b3JzIGludG8gZWxlbWVudCBub3dcbiAgICBlbCA9IG9wdGlvbnMuZWwgPSBxdWVyeShlbCk7XG4gICAgdGhpcy5fcHJvcHNVbmxpbmtGbiA9IGVsICYmIGVsLm5vZGVUeXBlID09PSAxICYmIHByb3BzXG4gICAgLy8gcHJvcHMgbXVzdCBiZSBsaW5rZWQgaW4gcHJvcGVyIHNjb3BlIGlmIGluc2lkZSB2LWZvclxuICAgID8gY29tcGlsZUFuZExpbmtQcm9wcyh0aGlzLCBlbCwgcHJvcHMsIHRoaXMuX3Njb3BlKSA6IG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgdGhlIGRhdGEuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXREYXRhID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBkYXRhRm4gPSB0aGlzLiRvcHRpb25zLmRhdGE7XG4gICAgdmFyIGRhdGEgPSB0aGlzLl9kYXRhID0gZGF0YUZuID8gZGF0YUZuKCkgOiB7fTtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3QoZGF0YSkpIHtcbiAgICAgIGRhdGEgPSB7fTtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignZGF0YSBmdW5jdGlvbnMgc2hvdWxkIHJldHVybiBhbiBvYmplY3QuJywgdGhpcyk7XG4gICAgfVxuICAgIHZhciBwcm9wcyA9IHRoaXMuX3Byb3BzO1xuICAgIC8vIHByb3h5IGRhdGEgb24gaW5zdGFuY2VcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpO1xuICAgIHZhciBpLCBrZXk7XG4gICAgaSA9IGtleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAvLyB0aGVyZSBhcmUgdHdvIHNjZW5hcmlvcyB3aGVyZSB3ZSBjYW4gcHJveHkgYSBkYXRhIGtleTpcbiAgICAgIC8vIDEuIGl0J3Mgbm90IGFscmVhZHkgZGVmaW5lZCBhcyBhIHByb3BcbiAgICAgIC8vIDIuIGl0J3MgcHJvdmlkZWQgdmlhIGEgaW5zdGFudGlhdGlvbiBvcHRpb24gQU5EIHRoZXJlIGFyZSBub1xuICAgICAgLy8gICAgdGVtcGxhdGUgcHJvcCBwcmVzZW50XG4gICAgICBpZiAoIXByb3BzIHx8ICFoYXNPd24ocHJvcHMsIGtleSkpIHtcbiAgICAgICAgdGhpcy5fcHJveHkoa2V5KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuKCdEYXRhIGZpZWxkIFwiJyArIGtleSArICdcIiBpcyBhbHJlYWR5IGRlZmluZWQgJyArICdhcyBhIHByb3AuIFRvIHByb3ZpZGUgZGVmYXVsdCB2YWx1ZSBmb3IgYSBwcm9wLCB1c2UgdGhlIFwiZGVmYXVsdFwiICcgKyAncHJvcCBvcHRpb247IGlmIHlvdSB3YW50IHRvIHBhc3MgcHJvcCB2YWx1ZXMgdG8gYW4gaW5zdGFudGlhdGlvbiAnICsgJ2NhbGwsIHVzZSB0aGUgXCJwcm9wc0RhdGFcIiBvcHRpb24uJywgdGhpcyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIG9ic2VydmUgZGF0YVxuICAgIG9ic2VydmUoZGF0YSwgdGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN3YXAgdGhlIGluc3RhbmNlJ3MgJGRhdGEuIENhbGxlZCBpbiAkZGF0YSdzIHNldHRlci5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG5ld0RhdGFcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fc2V0RGF0YSA9IGZ1bmN0aW9uIChuZXdEYXRhKSB7XG4gICAgbmV3RGF0YSA9IG5ld0RhdGEgfHwge307XG4gICAgdmFyIG9sZERhdGEgPSB0aGlzLl9kYXRhO1xuICAgIHRoaXMuX2RhdGEgPSBuZXdEYXRhO1xuICAgIHZhciBrZXlzLCBrZXksIGk7XG4gICAgLy8gdW5wcm94eSBrZXlzIG5vdCBwcmVzZW50IGluIG5ldyBkYXRhXG4gICAga2V5cyA9IE9iamVjdC5rZXlzKG9sZERhdGEpO1xuICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYgKCEoa2V5IGluIG5ld0RhdGEpKSB7XG4gICAgICAgIHRoaXMuX3VucHJveHkoa2V5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gcHJveHkga2V5cyBub3QgYWxyZWFkeSBwcm94aWVkLFxuICAgIC8vIGFuZCB0cmlnZ2VyIGNoYW5nZSBmb3IgY2hhbmdlZCB2YWx1ZXNcbiAgICBrZXlzID0gT2JqZWN0LmtleXMobmV3RGF0YSk7XG4gICAgaSA9IGtleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICBpZiAoIWhhc093bih0aGlzLCBrZXkpKSB7XG4gICAgICAgIC8vIG5ldyBwcm9wZXJ0eVxuICAgICAgICB0aGlzLl9wcm94eShrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICBvbGREYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKTtcbiAgICBvYnNlcnZlKG5ld0RhdGEsIHRoaXMpO1xuICAgIHRoaXMuX2RpZ2VzdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcm94eSBhIHByb3BlcnR5LCBzbyB0aGF0XG4gICAqIHZtLnByb3AgPT09IHZtLl9kYXRhLnByb3BcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICBpZiAoIWlzUmVzZXJ2ZWQoa2V5KSkge1xuICAgICAgLy8gbmVlZCB0byBzdG9yZSByZWYgdG8gc2VsZiBoZXJlXG4gICAgICAvLyBiZWNhdXNlIHRoZXNlIGdldHRlci9zZXR0ZXJzIG1pZ2h0XG4gICAgICAvLyBiZSBjYWxsZWQgYnkgY2hpbGQgc2NvcGVzIHZpYVxuICAgICAgLy8gcHJvdG90eXBlIGluaGVyaXRhbmNlLlxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYsIGtleSwge1xuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldDogZnVuY3Rpb24gcHJveHlHZXR0ZXIoKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuX2RhdGFba2V5XTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBwcm94eVNldHRlcih2YWwpIHtcbiAgICAgICAgICBzZWxmLl9kYXRhW2tleV0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVW5wcm94eSBhIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX3VucHJveHkgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgaWYgKCFpc1Jlc2VydmVkKGtleSkpIHtcbiAgICAgIGRlbGV0ZSB0aGlzW2tleV07XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBGb3JjZSB1cGRhdGUgb24gZXZlcnkgd2F0Y2hlciBpbiBzY29wZS5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5fd2F0Y2hlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB0aGlzLl93YXRjaGVyc1tpXS51cGRhdGUodHJ1ZSk7IC8vIHNoYWxsb3cgdXBkYXRlc1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0dXAgY29tcHV0ZWQgcHJvcGVydGllcy4gVGhleSBhcmUgZXNzZW50aWFsbHlcbiAgICogc3BlY2lhbCBnZXR0ZXIvc2V0dGVyc1xuICAgKi9cblxuICBmdW5jdGlvbiBub29wKCkge31cbiAgVnVlLnByb3RvdHlwZS5faW5pdENvbXB1dGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjb21wdXRlZCA9IHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQ7XG4gICAgaWYgKGNvbXB1dGVkKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gY29tcHV0ZWQpIHtcbiAgICAgICAgdmFyIHVzZXJEZWYgPSBjb21wdXRlZFtrZXldO1xuICAgICAgICB2YXIgZGVmID0ge1xuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2YgdXNlckRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGRlZi5nZXQgPSBtYWtlQ29tcHV0ZWRHZXR0ZXIodXNlckRlZiwgdGhpcyk7XG4gICAgICAgICAgZGVmLnNldCA9IG5vb3A7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVmLmdldCA9IHVzZXJEZWYuZ2V0ID8gdXNlckRlZi5jYWNoZSAhPT0gZmFsc2UgPyBtYWtlQ29tcHV0ZWRHZXR0ZXIodXNlckRlZi5nZXQsIHRoaXMpIDogYmluZCh1c2VyRGVmLmdldCwgdGhpcykgOiBub29wO1xuICAgICAgICAgIGRlZi5zZXQgPSB1c2VyRGVmLnNldCA/IGJpbmQodXNlckRlZi5zZXQsIHRoaXMpIDogbm9vcDtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywga2V5LCBkZWYpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBtYWtlQ29tcHV0ZWRHZXR0ZXIoZ2V0dGVyLCBvd25lcikge1xuICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIob3duZXIsIGdldHRlciwgbnVsbCwge1xuICAgICAgbGF6eTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBmdW5jdGlvbiBjb21wdXRlZEdldHRlcigpIHtcbiAgICAgIGlmICh3YXRjaGVyLmRpcnR5KSB7XG4gICAgICAgIHdhdGNoZXIuZXZhbHVhdGUoKTtcbiAgICAgIH1cbiAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG4gICAgICAgIHdhdGNoZXIuZGVwZW5kKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gd2F0Y2hlci52YWx1ZTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGluc3RhbmNlIG1ldGhvZHMuIE1ldGhvZHMgbXVzdCBiZSBib3VuZCB0byB0aGVcbiAgICogaW5zdGFuY2Ugc2luY2UgdGhleSBtaWdodCBiZSBwYXNzZWQgZG93biBhcyBhIHByb3AgdG9cbiAgICogY2hpbGQgY29tcG9uZW50cy5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdE1ldGhvZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1ldGhvZHMgPSB0aGlzLiRvcHRpb25zLm1ldGhvZHM7XG4gICAgaWYgKG1ldGhvZHMpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBtZXRob2RzKSB7XG4gICAgICAgIHRoaXNba2V5XSA9IGJpbmQobWV0aG9kc1trZXldLCB0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgbWV0YSBpbmZvcm1hdGlvbiBsaWtlICRpbmRleCwgJGtleSAmICR2YWx1ZS5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdE1ldGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1ldGFzID0gdGhpcy4kb3B0aW9ucy5fbWV0YTtcbiAgICBpZiAobWV0YXMpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBtZXRhcykge1xuICAgICAgICBkZWZpbmVSZWFjdGl2ZSh0aGlzLCBrZXksIG1ldGFzW2tleV0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxudmFyIGV2ZW50UkUgPSAvXnYtb246fF5ALztcblxuZnVuY3Rpb24gZXZlbnRzTWl4aW4gKFZ1ZSkge1xuICAvKipcbiAgICogU2V0dXAgdGhlIGluc3RhbmNlJ3Mgb3B0aW9uIGV2ZW50cyAmIHdhdGNoZXJzLlxuICAgKiBJZiB0aGUgdmFsdWUgaXMgYSBzdHJpbmcsIHdlIHB1bGwgaXQgZnJvbSB0aGVcbiAgICogaW5zdGFuY2UncyBtZXRob2RzIGJ5IG5hbWUuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCkge1xuICAgICAgcmVnaXN0ZXJDb21wb25lbnRFdmVudHModGhpcywgb3B0aW9ucy5lbCk7XG4gICAgfVxuICAgIHJlZ2lzdGVyQ2FsbGJhY2tzKHRoaXMsICckb24nLCBvcHRpb25zLmV2ZW50cyk7XG4gICAgcmVnaXN0ZXJDYWxsYmFja3ModGhpcywgJyR3YXRjaCcsIG9wdGlvbnMud2F0Y2gpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlciB2LW9uIGV2ZW50cyBvbiBhIGNoaWxkIGNvbXBvbmVudFxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKi9cblxuICBmdW5jdGlvbiByZWdpc3RlckNvbXBvbmVudEV2ZW50cyh2bSwgZWwpIHtcbiAgICB2YXIgYXR0cnMgPSBlbC5hdHRyaWJ1dGVzO1xuICAgIHZhciBuYW1lLCB2YWx1ZSwgaGFuZGxlcjtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG4gICAgICBpZiAoZXZlbnRSRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoZXZlbnRSRSwgJycpO1xuICAgICAgICAvLyBmb3JjZSB0aGUgZXhwcmVzc2lvbiBpbnRvIGEgc3RhdGVtZW50IHNvIHRoYXRcbiAgICAgICAgLy8gaXQgYWx3YXlzIGR5bmFtaWNhbGx5IHJlc29sdmVzIHRoZSBtZXRob2QgdG8gY2FsbCAoIzI2NzApXG4gICAgICAgIC8vIGtpbmRhIHVnbHkgaGFjaywgYnV0IGRvZXMgdGhlIGpvYi5cbiAgICAgICAgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZTtcbiAgICAgICAgaWYgKGlzU2ltcGxlUGF0aCh2YWx1ZSkpIHtcbiAgICAgICAgICB2YWx1ZSArPSAnLmFwcGx5KHRoaXMsICRhcmd1bWVudHMpJztcbiAgICAgICAgfVxuICAgICAgICBoYW5kbGVyID0gKHZtLl9zY29wZSB8fCB2bS5fY29udGV4dCkuJGV2YWwodmFsdWUsIHRydWUpO1xuICAgICAgICBoYW5kbGVyLl9mcm9tUGFyZW50ID0gdHJ1ZTtcbiAgICAgICAgdm0uJG9uKG5hbWUucmVwbGFjZShldmVudFJFKSwgaGFuZGxlcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGNhbGxiYWNrcyBmb3Igb3B0aW9uIGV2ZW50cyBhbmQgd2F0Y2hlcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBoYXNoXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyQ2FsbGJhY2tzKHZtLCBhY3Rpb24sIGhhc2gpIHtcbiAgICBpZiAoIWhhc2gpIHJldHVybjtcbiAgICB2YXIgaGFuZGxlcnMsIGtleSwgaSwgajtcbiAgICBmb3IgKGtleSBpbiBoYXNoKSB7XG4gICAgICBoYW5kbGVycyA9IGhhc2hba2V5XTtcbiAgICAgIGlmIChpc0FycmF5KGhhbmRsZXJzKSkge1xuICAgICAgICBmb3IgKGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlcnMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgdG8gcmVnaXN0ZXIgYW4gZXZlbnQvd2F0Y2ggY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICogQHBhcmFtIHtGdW5jdGlvbnxTdHJpbmd8T2JqZWN0fSBoYW5kbGVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgdmFyIHR5cGUgPSB0eXBlb2YgaGFuZGxlcjtcbiAgICBpZiAodHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdm1bYWN0aW9uXShrZXksIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHZhciBtZXRob2RzID0gdm0uJG9wdGlvbnMubWV0aG9kcztcbiAgICAgIHZhciBtZXRob2QgPSBtZXRob2RzICYmIG1ldGhvZHNbaGFuZGxlcl07XG4gICAgICBpZiAobWV0aG9kKSB7XG4gICAgICAgIHZtW2FjdGlvbl0oa2V5LCBtZXRob2QsIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdVbmtub3duIG1ldGhvZDogXCInICsgaGFuZGxlciArICdcIiB3aGVuICcgKyAncmVnaXN0ZXJpbmcgY2FsbGJhY2sgZm9yICcgKyBhY3Rpb24gKyAnOiBcIicgKyBrZXkgKyAnXCIuJywgdm0pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaGFuZGxlciAmJiB0eXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLmhhbmRsZXIsIGhhbmRsZXIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCByZWN1cnNpdmUgYXR0YWNoZWQvZGV0YWNoZWQgY2FsbHNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdERPTUhvb2tzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuJG9uKCdob29rOmF0dGFjaGVkJywgb25BdHRhY2hlZCk7XG4gICAgdGhpcy4kb24oJ2hvb2s6ZGV0YWNoZWQnLCBvbkRldGFjaGVkKTtcbiAgfTtcblxuICAvKipcbiAgICogQ2FsbGJhY2sgdG8gcmVjdXJzaXZlbHkgY2FsbCBhdHRhY2hlZCBob29rIG9uIGNoaWxkcmVuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIG9uQXR0YWNoZWQoKSB7XG4gICAgaWYgKCF0aGlzLl9pc0F0dGFjaGVkKSB7XG4gICAgICB0aGlzLl9pc0F0dGFjaGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuJGNoaWxkcmVuLmZvckVhY2goY2FsbEF0dGFjaCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEl0ZXJhdG9yIHRvIGNhbGwgYXR0YWNoZWQgaG9va1xuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcbiAgICovXG5cbiAgZnVuY3Rpb24gY2FsbEF0dGFjaChjaGlsZCkge1xuICAgIGlmICghY2hpbGQuX2lzQXR0YWNoZWQgJiYgaW5Eb2MoY2hpbGQuJGVsKSkge1xuICAgICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0byByZWN1cnNpdmVseSBjYWxsIGRldGFjaGVkIGhvb2sgb24gY2hpbGRyZW5cbiAgICovXG5cbiAgZnVuY3Rpb24gb25EZXRhY2hlZCgpIHtcbiAgICBpZiAodGhpcy5faXNBdHRhY2hlZCkge1xuICAgICAgdGhpcy5faXNBdHRhY2hlZCA9IGZhbHNlO1xuICAgICAgdGhpcy4kY2hpbGRyZW4uZm9yRWFjaChjYWxsRGV0YWNoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSXRlcmF0b3IgdG8gY2FsbCBkZXRhY2hlZCBob29rXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuICAgKi9cblxuICBmdW5jdGlvbiBjYWxsRGV0YWNoKGNoaWxkKSB7XG4gICAgaWYgKGNoaWxkLl9pc0F0dGFjaGVkICYmICFpbkRvYyhjaGlsZC4kZWwpKSB7XG4gICAgICBjaGlsZC5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgYWxsIGhhbmRsZXJzIGZvciBhIGhvb2tcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGhvb2tcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fY2FsbEhvb2sgPSBmdW5jdGlvbiAoaG9vaykge1xuICAgIHRoaXMuJGVtaXQoJ3ByZS1ob29rOicgKyBob29rKTtcbiAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLiRvcHRpb25zW2hvb2tdO1xuICAgIGlmIChoYW5kbGVycykge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgaGFuZGxlcnNbaV0uY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy4kZW1pdCgnaG9vazonICsgaG9vayk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIG5vb3AkMSgpIHt9XG5cbi8qKlxuICogQSBkaXJlY3RpdmUgbGlua3MgYSBET00gZWxlbWVudCB3aXRoIGEgcGllY2Ugb2YgZGF0YSxcbiAqIHdoaWNoIGlzIHRoZSByZXN1bHQgb2YgZXZhbHVhdGluZyBhbiBleHByZXNzaW9uLlxuICogSXQgcmVnaXN0ZXJzIGEgd2F0Y2hlciB3aXRoIHRoZSBleHByZXNzaW9uIGFuZCBjYWxsc1xuICogdGhlIERPTSB1cGRhdGUgZnVuY3Rpb24gd2hlbiBhIGNoYW5nZSBpcyB0cmlnZ2VyZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3JcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IG5hbWVcbiAqICAgICAgICAgICAgICAgICAtIHtPYmplY3R9IGRlZlxuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gZXhwcmVzc2lvblxuICogICAgICAgICAgICAgICAgIC0ge0FycmF5PE9iamVjdD59IFtmaWx0ZXJzXVxuICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gW21vZGlmaWVyc11cbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBsaXRlcmFsXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBhdHRyXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBhcmdcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IHJhd1xuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gW3JlZl1cbiAqICAgICAgICAgICAgICAgICAtIHtBcnJheTxPYmplY3Q+fSBbaW50ZXJwXVxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtoYXNPbmVUaW1lXVxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge05vZGV9IGVsXG4gKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gdHJhbnNjbHVzaW9uIGhvc3QgY29tcG9uZW50XG4gKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG4gKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBvd25lciBmcmFnbWVudFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIERpcmVjdGl2ZShkZXNjcmlwdG9yLCB2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gIHRoaXMudm0gPSB2bTtcbiAgdGhpcy5lbCA9IGVsO1xuICAvLyBjb3B5IGRlc2NyaXB0b3IgcHJvcGVydGllc1xuICB0aGlzLmRlc2NyaXB0b3IgPSBkZXNjcmlwdG9yO1xuICB0aGlzLm5hbWUgPSBkZXNjcmlwdG9yLm5hbWU7XG4gIHRoaXMuZXhwcmVzc2lvbiA9IGRlc2NyaXB0b3IuZXhwcmVzc2lvbjtcbiAgdGhpcy5hcmcgPSBkZXNjcmlwdG9yLmFyZztcbiAgdGhpcy5tb2RpZmllcnMgPSBkZXNjcmlwdG9yLm1vZGlmaWVycztcbiAgdGhpcy5maWx0ZXJzID0gZGVzY3JpcHRvci5maWx0ZXJzO1xuICB0aGlzLmxpdGVyYWwgPSB0aGlzLm1vZGlmaWVycyAmJiB0aGlzLm1vZGlmaWVycy5saXRlcmFsO1xuICAvLyBwcml2YXRlXG4gIHRoaXMuX2xvY2tlZCA9IGZhbHNlO1xuICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xuICB0aGlzLl9saXN0ZW5lcnMgPSBudWxsO1xuICAvLyBsaW5rIGNvbnRleHRcbiAgdGhpcy5faG9zdCA9IGhvc3Q7XG4gIHRoaXMuX3Njb3BlID0gc2NvcGU7XG4gIHRoaXMuX2ZyYWcgPSBmcmFnO1xuICAvLyBzdG9yZSBkaXJlY3RpdmVzIG9uIG5vZGUgaW4gZGV2IG1vZGVcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbCkge1xuICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzID0gdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMgfHwgW107XG4gICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMucHVzaCh0aGlzKTtcbiAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemUgdGhlIGRpcmVjdGl2ZSwgbWl4aW4gZGVmaW5pdGlvbiBwcm9wZXJ0aWVzLFxuICogc2V0dXAgdGhlIHdhdGNoZXIsIGNhbGwgZGVmaW5pdGlvbiBiaW5kKCkgYW5kIHVwZGF0ZSgpXG4gKiBpZiBwcmVzZW50LlxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX2JpbmQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBuYW1lID0gdGhpcy5uYW1lO1xuICB2YXIgZGVzY3JpcHRvciA9IHRoaXMuZGVzY3JpcHRvcjtcblxuICAvLyByZW1vdmUgYXR0cmlidXRlXG4gIGlmICgobmFtZSAhPT0gJ2Nsb2FrJyB8fCB0aGlzLnZtLl9pc0NvbXBpbGVkKSAmJiB0aGlzLmVsICYmIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKSB7XG4gICAgdmFyIGF0dHIgPSBkZXNjcmlwdG9yLmF0dHIgfHwgJ3YtJyArIG5hbWU7XG4gICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gIH1cblxuICAvLyBjb3B5IGRlZiBwcm9wZXJ0aWVzXG4gIHZhciBkZWYgPSBkZXNjcmlwdG9yLmRlZjtcbiAgaWYgKHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICB0aGlzLnVwZGF0ZSA9IGRlZjtcbiAgfSBlbHNlIHtcbiAgICBleHRlbmQodGhpcywgZGVmKTtcbiAgfVxuXG4gIC8vIHNldHVwIGRpcmVjdGl2ZSBwYXJhbXNcbiAgdGhpcy5fc2V0dXBQYXJhbXMoKTtcblxuICAvLyBpbml0aWFsIGJpbmRcbiAgaWYgKHRoaXMuYmluZCkge1xuICAgIHRoaXMuYmluZCgpO1xuICB9XG4gIHRoaXMuX2JvdW5kID0gdHJ1ZTtcblxuICBpZiAodGhpcy5saXRlcmFsKSB7XG4gICAgdGhpcy51cGRhdGUgJiYgdGhpcy51cGRhdGUoZGVzY3JpcHRvci5yYXcpO1xuICB9IGVsc2UgaWYgKCh0aGlzLmV4cHJlc3Npb24gfHwgdGhpcy5tb2RpZmllcnMpICYmICh0aGlzLnVwZGF0ZSB8fCB0aGlzLnR3b1dheSkgJiYgIXRoaXMuX2NoZWNrU3RhdGVtZW50KCkpIHtcbiAgICAvLyB3cmFwcGVkIHVwZGF0ZXIgZm9yIGNvbnRleHRcbiAgICB2YXIgZGlyID0gdGhpcztcbiAgICBpZiAodGhpcy51cGRhdGUpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZSA9IGZ1bmN0aW9uICh2YWwsIG9sZFZhbCkge1xuICAgICAgICBpZiAoIWRpci5fbG9ja2VkKSB7XG4gICAgICAgICAgZGlyLnVwZGF0ZSh2YWwsIG9sZFZhbCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3VwZGF0ZSA9IG5vb3AkMTtcbiAgICB9XG4gICAgdmFyIHByZVByb2Nlc3MgPSB0aGlzLl9wcmVQcm9jZXNzID8gYmluZCh0aGlzLl9wcmVQcm9jZXNzLCB0aGlzKSA6IG51bGw7XG4gICAgdmFyIHBvc3RQcm9jZXNzID0gdGhpcy5fcG9zdFByb2Nlc3MgPyBiaW5kKHRoaXMuX3Bvc3RQcm9jZXNzLCB0aGlzKSA6IG51bGw7XG4gICAgdmFyIHdhdGNoZXIgPSB0aGlzLl93YXRjaGVyID0gbmV3IFdhdGNoZXIodGhpcy52bSwgdGhpcy5leHByZXNzaW9uLCB0aGlzLl91cGRhdGUsIC8vIGNhbGxiYWNrXG4gICAge1xuICAgICAgZmlsdGVyczogdGhpcy5maWx0ZXJzLFxuICAgICAgdHdvV2F5OiB0aGlzLnR3b1dheSxcbiAgICAgIGRlZXA6IHRoaXMuZGVlcCxcbiAgICAgIHByZVByb2Nlc3M6IHByZVByb2Nlc3MsXG4gICAgICBwb3N0UHJvY2VzczogcG9zdFByb2Nlc3MsXG4gICAgICBzY29wZTogdGhpcy5fc2NvcGVcbiAgICB9KTtcbiAgICAvLyB2LW1vZGVsIHdpdGggaW5pdGFsIGlubGluZSB2YWx1ZSBuZWVkIHRvIHN5bmMgYmFjayB0b1xuICAgIC8vIG1vZGVsIGluc3RlYWQgb2YgdXBkYXRlIHRvIERPTSBvbiBpbml0LiBUaGV5IHdvdWxkXG4gICAgLy8gc2V0IHRoZSBhZnRlckJpbmQgaG9vayB0byBpbmRpY2F0ZSB0aGF0LlxuICAgIGlmICh0aGlzLmFmdGVyQmluZCkge1xuICAgICAgdGhpcy5hZnRlckJpbmQoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMudXBkYXRlKSB7XG4gICAgICB0aGlzLnVwZGF0ZSh3YXRjaGVyLnZhbHVlKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogU2V0dXAgYWxsIHBhcmFtIGF0dHJpYnV0ZXMsIGUuZy4gdHJhY2stYnksXG4gKiB0cmFuc2l0aW9uLW1vZGUsIGV0Yy4uLlxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3NldHVwUGFyYW1zID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMucGFyYW1zKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBwYXJhbXMgPSB0aGlzLnBhcmFtcztcbiAgLy8gc3dhcCB0aGUgcGFyYW1zIGFycmF5IHdpdGggYSBmcmVzaCBvYmplY3QuXG4gIHRoaXMucGFyYW1zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdmFyIGkgPSBwYXJhbXMubGVuZ3RoO1xuICB2YXIga2V5LCB2YWwsIG1hcHBlZEtleTtcbiAgd2hpbGUgKGktLSkge1xuICAgIGtleSA9IGh5cGhlbmF0ZShwYXJhbXNbaV0pO1xuICAgIG1hcHBlZEtleSA9IGNhbWVsaXplKGtleSk7XG4gICAgdmFsID0gZ2V0QmluZEF0dHIodGhpcy5lbCwga2V5KTtcbiAgICBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgIC8vIGR5bmFtaWNcbiAgICAgIHRoaXMuX3NldHVwUGFyYW1XYXRjaGVyKG1hcHBlZEtleSwgdmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gc3RhdGljXG4gICAgICB2YWwgPSBnZXRBdHRyKHRoaXMuZWwsIGtleSk7XG4gICAgICBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5wYXJhbXNbbWFwcGVkS2V5XSA9IHZhbCA9PT0gJycgPyB0cnVlIDogdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBTZXR1cCBhIHdhdGNoZXIgZm9yIGEgZHluYW1pYyBwYXJhbS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwcmVzc2lvblxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3NldHVwUGFyYW1XYXRjaGVyID0gZnVuY3Rpb24gKGtleSwgZXhwcmVzc2lvbikge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBjYWxsZWQgPSBmYWxzZTtcbiAgdmFyIHVud2F0Y2ggPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHdhdGNoKGV4cHJlc3Npb24sIGZ1bmN0aW9uICh2YWwsIG9sZFZhbCkge1xuICAgIHNlbGYucGFyYW1zW2tleV0gPSB2YWw7XG4gICAgLy8gc2luY2Ugd2UgYXJlIGluIGltbWVkaWF0ZSBtb2RlLFxuICAgIC8vIG9ubHkgY2FsbCB0aGUgcGFyYW0gY2hhbmdlIGNhbGxiYWNrcyBpZiB0aGlzIGlzIG5vdCB0aGUgZmlyc3QgdXBkYXRlLlxuICAgIGlmIChjYWxsZWQpIHtcbiAgICAgIHZhciBjYiA9IHNlbGYucGFyYW1XYXRjaGVycyAmJiBzZWxmLnBhcmFtV2F0Y2hlcnNba2V5XTtcbiAgICAgIGlmIChjYikge1xuICAgICAgICBjYi5jYWxsKHNlbGYsIHZhbCwgb2xkVmFsKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBpbW1lZGlhdGU6IHRydWUsXG4gICAgdXNlcjogZmFsc2VcbiAgfSk7KHRoaXMuX3BhcmFtVW53YXRjaEZucyB8fCAodGhpcy5fcGFyYW1VbndhdGNoRm5zID0gW10pKS5wdXNoKHVud2F0Y2gpO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgZGlyZWN0aXZlIGlzIGEgZnVuY3Rpb24gY2FsbGVyXG4gKiBhbmQgaWYgdGhlIGV4cHJlc3Npb24gaXMgYSBjYWxsYWJsZSBvbmUuIElmIGJvdGggdHJ1ZSxcbiAqIHdlIHdyYXAgdXAgdGhlIGV4cHJlc3Npb24gYW5kIHVzZSBpdCBhcyB0aGUgZXZlbnRcbiAqIGhhbmRsZXIuXG4gKlxuICogZS5nLiBvbi1jbGljaz1cImErK1wiXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl9jaGVja1N0YXRlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGV4cHJlc3Npb24gPSB0aGlzLmV4cHJlc3Npb247XG4gIGlmIChleHByZXNzaW9uICYmIHRoaXMuYWNjZXB0U3RhdGVtZW50ICYmICFpc1NpbXBsZVBhdGgoZXhwcmVzc2lvbikpIHtcbiAgICB2YXIgZm4gPSBwYXJzZUV4cHJlc3Npb24oZXhwcmVzc2lvbikuZ2V0O1xuICAgIHZhciBzY29wZSA9IHRoaXMuX3Njb3BlIHx8IHRoaXMudm07XG4gICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyKGUpIHtcbiAgICAgIHNjb3BlLiRldmVudCA9IGU7XG4gICAgICBmbi5jYWxsKHNjb3BlLCBzY29wZSk7XG4gICAgICBzY29wZS4kZXZlbnQgPSBudWxsO1xuICAgIH07XG4gICAgaWYgKHRoaXMuZmlsdGVycykge1xuICAgICAgaGFuZGxlciA9IHNjb3BlLl9hcHBseUZpbHRlcnMoaGFuZGxlciwgbnVsbCwgdGhpcy5maWx0ZXJzKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGUoaGFuZGxlcik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07XG5cbi8qKlxuICogU2V0IHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIHdpdGggdGhlIHNldHRlci5cbiAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0d28td2F5IGRpcmVjdGl2ZXNcbiAqIGUuZy4gdi1tb2RlbC5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcHVibGljXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKHRoaXMudHdvV2F5KSB7XG4gICAgdGhpcy5fd2l0aExvY2soZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fd2F0Y2hlci5zZXQodmFsdWUpO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB3YXJuKCdEaXJlY3RpdmUuc2V0KCkgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgdHdvV2F5JyArICdkaXJlY3RpdmVzLicpO1xuICB9XG59O1xuXG4vKipcbiAqIEV4ZWN1dGUgYSBmdW5jdGlvbiB3aGlsZSBwcmV2ZW50aW5nIHRoYXQgZnVuY3Rpb24gZnJvbVxuICogdHJpZ2dlcmluZyB1cGRhdGVzIG9uIHRoaXMgZGlyZWN0aXZlIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fd2l0aExvY2sgPSBmdW5jdGlvbiAoZm4pIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBzZWxmLl9sb2NrZWQgPSB0cnVlO1xuICBmbi5jYWxsKHNlbGYpO1xuICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgc2VsZi5fbG9ja2VkID0gZmFsc2U7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBDb252ZW5pZW5jZSBtZXRob2QgdGhhdCBhdHRhY2hlcyBhIERPTSBldmVudCBsaXN0ZW5lclxuICogdG8gdGhlIGRpcmVjdGl2ZSBlbGVtZW50IGFuZCBhdXRvbWV0aWNhbGx5IHRlYXJzIGl0IGRvd25cbiAqIGR1cmluZyB1bmJpbmQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VDYXB0dXJlXVxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnQsIGhhbmRsZXIsIHVzZUNhcHR1cmUpIHtcbiAgb24odGhpcy5lbCwgZXZlbnQsIGhhbmRsZXIsIHVzZUNhcHR1cmUpOyh0aGlzLl9saXN0ZW5lcnMgfHwgKHRoaXMuX2xpc3RlbmVycyA9IFtdKSkucHVzaChbZXZlbnQsIGhhbmRsZXJdKTtcbn07XG5cbi8qKlxuICogVGVhcmRvd24gdGhlIHdhdGNoZXIgYW5kIGNhbGwgdW5iaW5kLlxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3RlYXJkb3duID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5fYm91bmQpIHtcbiAgICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xuICAgIGlmICh0aGlzLnVuYmluZCkge1xuICAgICAgdGhpcy51bmJpbmQoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3dhdGNoZXIpIHtcbiAgICAgIHRoaXMuX3dhdGNoZXIudGVhcmRvd24oKTtcbiAgICB9XG4gICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcbiAgICB2YXIgaTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICBpID0gbGlzdGVuZXJzLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgb2ZmKHRoaXMuZWwsIGxpc3RlbmVyc1tpXVswXSwgbGlzdGVuZXJzW2ldWzFdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIHVud2F0Y2hGbnMgPSB0aGlzLl9wYXJhbVVud2F0Y2hGbnM7XG4gICAgaWYgKHVud2F0Y2hGbnMpIHtcbiAgICAgIGkgPSB1bndhdGNoRm5zLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdW53YXRjaEZuc1tpXSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsKSB7XG4gICAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcy4kcmVtb3ZlKHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLnZtID0gdGhpcy5lbCA9IHRoaXMuX3dhdGNoZXIgPSB0aGlzLl9saXN0ZW5lcnMgPSBudWxsO1xuICB9XG59O1xuXG5mdW5jdGlvbiBsaWZlY3ljbGVNaXhpbiAoVnVlKSB7XG4gIC8qKlxuICAgKiBVcGRhdGUgdi1yZWYgZm9yIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fdXBkYXRlUmVmID0gZnVuY3Rpb24gKHJlbW92ZSkge1xuICAgIHZhciByZWYgPSB0aGlzLiRvcHRpb25zLl9yZWY7XG4gICAgaWYgKHJlZikge1xuICAgICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy5fY29udGV4dCkuJHJlZnM7XG4gICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgIGlmIChyZWZzW3JlZl0gPT09IHRoaXMpIHtcbiAgICAgICAgICByZWZzW3JlZl0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWZzW3JlZl0gPSB0aGlzO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVHJhbnNjbHVkZSwgY29tcGlsZSBhbmQgbGluayBlbGVtZW50LlxuICAgKlxuICAgKiBJZiBhIHByZS1jb21waWxlZCBsaW5rZXIgaXMgYXZhaWxhYmxlLCB0aGF0IG1lYW5zIHRoZVxuICAgKiBwYXNzZWQgaW4gZWxlbWVudCB3aWxsIGJlIHByZS10cmFuc2NsdWRlZCBhbmQgY29tcGlsZWRcbiAgICogYXMgd2VsbCAtIGFsbCB3ZSBuZWVkIHRvIGRvIGlzIHRvIGNhbGwgdGhlIGxpbmtlci5cbiAgICpcbiAgICogT3RoZXJ3aXNlIHdlIG5lZWQgdG8gY2FsbCB0cmFuc2NsdWRlL2NvbXBpbGUvbGluayBoZXJlLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2NvbXBpbGUgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG5cbiAgICAvLyB0cmFuc2NsdWRlIGFuZCBpbml0IGVsZW1lbnRcbiAgICAvLyB0cmFuc2NsdWRlIGNhbiBwb3RlbnRpYWxseSByZXBsYWNlIG9yaWdpbmFsXG4gICAgLy8gc28gd2UgbmVlZCB0byBrZWVwIHJlZmVyZW5jZTsgdGhpcyBzdGVwIGFsc28gaW5qZWN0c1xuICAgIC8vIHRoZSB0ZW1wbGF0ZSBhbmQgY2FjaGVzIHRoZSBvcmlnaW5hbCBhdHRyaWJ1dGVzXG4gICAgLy8gb24gdGhlIGNvbnRhaW5lciBub2RlIGFuZCByZXBsYWNlciBub2RlLlxuICAgIHZhciBvcmlnaW5hbCA9IGVsO1xuICAgIGVsID0gdHJhbnNjbHVkZShlbCwgb3B0aW9ucyk7XG4gICAgdGhpcy5faW5pdEVsZW1lbnQoZWwpO1xuXG4gICAgLy8gaGFuZGxlIHYtcHJlIG9uIHJvb3Qgbm9kZSAoIzIwMjYpXG4gICAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGdldEF0dHIoZWwsICd2LXByZScpICE9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gcm9vdCBpcyBhbHdheXMgY29tcGlsZWQgcGVyLWluc3RhbmNlLCBiZWNhdXNlXG4gICAgLy8gY29udGFpbmVyIGF0dHJzIGFuZCBwcm9wcyBjYW4gYmUgZGlmZmVyZW50IGV2ZXJ5IHRpbWUuXG4gICAgdmFyIGNvbnRleHRPcHRpb25zID0gdGhpcy5fY29udGV4dCAmJiB0aGlzLl9jb250ZXh0LiRvcHRpb25zO1xuICAgIHZhciByb290TGlua2VyID0gY29tcGlsZVJvb3QoZWwsIG9wdGlvbnMsIGNvbnRleHRPcHRpb25zKTtcblxuICAgIC8vIHJlc29sdmUgc2xvdCBkaXN0cmlidXRpb25cbiAgICByZXNvbHZlU2xvdHModGhpcywgb3B0aW9ucy5fY29udGVudCk7XG5cbiAgICAvLyBjb21waWxlIGFuZCBsaW5rIHRoZSByZXN0XG4gICAgdmFyIGNvbnRlbnRMaW5rRm47XG4gICAgdmFyIGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgIC8vIGNvbXBvbmVudCBjb21waWxhdGlvbiBjYW4gYmUgY2FjaGVkXG4gICAgLy8gYXMgbG9uZyBhcyBpdCdzIG5vdCB1c2luZyBpbmxpbmUtdGVtcGxhdGVcbiAgICBpZiAob3B0aW9ucy5fbGlua2VyQ2FjaGFibGUpIHtcbiAgICAgIGNvbnRlbnRMaW5rRm4gPSBjdG9yLmxpbmtlcjtcbiAgICAgIGlmICghY29udGVudExpbmtGbikge1xuICAgICAgICBjb250ZW50TGlua0ZuID0gY3Rvci5saW5rZXIgPSBjb21waWxlKGVsLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBsaW5rIHBoYXNlXG4gICAgLy8gbWFrZSBzdXJlIHRvIGxpbmsgcm9vdCB3aXRoIHByb3Agc2NvcGUhXG4gICAgdmFyIHJvb3RVbmxpbmtGbiA9IHJvb3RMaW5rZXIodGhpcywgZWwsIHRoaXMuX3Njb3BlKTtcbiAgICB2YXIgY29udGVudFVubGlua0ZuID0gY29udGVudExpbmtGbiA/IGNvbnRlbnRMaW5rRm4odGhpcywgZWwpIDogY29tcGlsZShlbCwgb3B0aW9ucykodGhpcywgZWwpO1xuXG4gICAgLy8gcmVnaXN0ZXIgY29tcG9zaXRlIHVubGluayBmdW5jdGlvblxuICAgIC8vIHRvIGJlIGNhbGxlZCBkdXJpbmcgaW5zdGFuY2UgZGVzdHJ1Y3Rpb25cbiAgICB0aGlzLl91bmxpbmtGbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJvb3RVbmxpbmtGbigpO1xuICAgICAgLy8gcGFzc2luZyBkZXN0cm95aW5nOiB0cnVlIHRvIGF2b2lkIHNlYXJjaGluZyBhbmRcbiAgICAgIC8vIHNwbGljaW5nIHRoZSBkaXJlY3RpdmVzXG4gICAgICBjb250ZW50VW5saW5rRm4odHJ1ZSk7XG4gICAgfTtcblxuICAgIC8vIGZpbmFsbHkgcmVwbGFjZSBvcmlnaW5hbFxuICAgIGlmIChvcHRpb25zLnJlcGxhY2UpIHtcbiAgICAgIHJlcGxhY2Uob3JpZ2luYWwsIGVsKTtcbiAgICB9XG5cbiAgICB0aGlzLl9pc0NvbXBpbGVkID0gdHJ1ZTtcbiAgICB0aGlzLl9jYWxsSG9vaygnY29tcGlsZWQnKTtcbiAgfTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBpbnN0YW5jZSBlbGVtZW50LiBDYWxsZWQgaW4gdGhlIHB1YmxpY1xuICAgKiAkbW91bnQoKSBtZXRob2QuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICBpZiAoaXNGcmFnbWVudChlbCkpIHtcbiAgICAgIHRoaXMuX2lzRnJhZ21lbnQgPSB0cnVlO1xuICAgICAgdGhpcy4kZWwgPSB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gZWwuZmlyc3RDaGlsZDtcbiAgICAgIHRoaXMuX2ZyYWdtZW50RW5kID0gZWwubGFzdENoaWxkO1xuICAgICAgLy8gc2V0IHBlcnNpc3RlZCB0ZXh0IGFuY2hvcnMgdG8gZW1wdHlcbiAgICAgIGlmICh0aGlzLl9mcmFnbWVudFN0YXJ0Lm5vZGVUeXBlID09PSAzKSB7XG4gICAgICAgIHRoaXMuX2ZyYWdtZW50U3RhcnQuZGF0YSA9IHRoaXMuX2ZyYWdtZW50RW5kLmRhdGEgPSAnJztcbiAgICAgIH1cbiAgICAgIHRoaXMuX2ZyYWdtZW50ID0gZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJGVsID0gZWw7XG4gICAgfVxuICAgIHRoaXMuJGVsLl9fdnVlX18gPSB0aGlzO1xuICAgIHRoaXMuX2NhbGxIb29rKCdiZWZvcmVDb21waWxlJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbmQgYmluZCBhIGRpcmVjdGl2ZSB0byBhbiBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGVzY3JpcHRvciAtIHBhcnNlZCBkaXJlY3RpdmUgZGVzY3JpcHRvclxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgICAtIHRhcmdldCBub2RlXG4gICAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSB0cmFuc2NsdXNpb24gaG9zdCBjb21wb25lbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBvd25lciBmcmFnbWVudFxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9iaW5kRGlyID0gZnVuY3Rpb24gKGRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgdGhpcy5fZGlyZWN0aXZlcy5wdXNoKG5ldyBEaXJlY3RpdmUoZGVzY3JpcHRvciwgdGhpcywgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpKTtcbiAgfTtcblxuICAvKipcbiAgICogVGVhcmRvd24gYW4gaW5zdGFuY2UsIHVub2JzZXJ2ZXMgdGhlIGRhdGEsIHVuYmluZCBhbGwgdGhlXG4gICAqIGRpcmVjdGl2ZXMsIHR1cm4gb2ZmIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzLCBldGMuXG4gICAqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlIC0gd2hldGhlciB0byByZW1vdmUgdGhlIERPTSBub2RlLlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cCAtIGlmIHRydWUsIGRlZmVyIGNsZWFudXAgdG9cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZSBjYWxsZWQgbGF0ZXJcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChyZW1vdmUsIGRlZmVyQ2xlYW51cCkge1xuICAgIGlmICh0aGlzLl9pc0JlaW5nRGVzdHJveWVkKSB7XG4gICAgICBpZiAoIWRlZmVyQ2xlYW51cCkge1xuICAgICAgICB0aGlzLl9jbGVhbnVwKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGRlc3Ryb3lSZWFkeTtcbiAgICB2YXIgcGVuZGluZ1JlbW92YWw7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy8gQ2xlYW51cCBzaG91bGQgYmUgY2FsbGVkIGVpdGhlciBzeW5jaHJvbm91c2x5IG9yIGFzeW5jaHJvbm95c2x5IGFzXG4gICAgLy8gY2FsbGJhY2sgb2YgdGhpcy4kcmVtb3ZlKCksIG9yIGlmIHJlbW92ZSBhbmQgZGVmZXJDbGVhbnVwIGFyZSBmYWxzZS5cbiAgICAvLyBJbiBhbnkgY2FzZSBpdCBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIGFsbCBvdGhlciByZW1vdmluZywgdW5iaW5kaW5nIGFuZFxuICAgIC8vIHR1cm5pbmcgb2YgaXMgZG9uZVxuICAgIHZhciBjbGVhbnVwSWZQb3NzaWJsZSA9IGZ1bmN0aW9uIGNsZWFudXBJZlBvc3NpYmxlKCkge1xuICAgICAgaWYgKGRlc3Ryb3lSZWFkeSAmJiAhcGVuZGluZ1JlbW92YWwgJiYgIWRlZmVyQ2xlYW51cCkge1xuICAgICAgICBzZWxmLl9jbGVhbnVwKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIHJlbW92ZSBET00gZWxlbWVudFxuICAgIGlmIChyZW1vdmUgJiYgdGhpcy4kZWwpIHtcbiAgICAgIHBlbmRpbmdSZW1vdmFsID0gdHJ1ZTtcbiAgICAgIHRoaXMuJHJlbW92ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHBlbmRpbmdSZW1vdmFsID0gZmFsc2U7XG4gICAgICAgIGNsZWFudXBJZlBvc3NpYmxlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLl9jYWxsSG9vaygnYmVmb3JlRGVzdHJveScpO1xuICAgIHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgPSB0cnVlO1xuICAgIHZhciBpO1xuICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gcGFyZW50LiBvbmx5IG5lY2Vzc2FyeVxuICAgIC8vIGlmIHBhcmVudCBpcyBub3QgYmVpbmcgZGVzdHJveWVkIGFzIHdlbGwuXG4gICAgdmFyIHBhcmVudCA9IHRoaXMuJHBhcmVudDtcbiAgICBpZiAocGFyZW50ICYmICFwYXJlbnQuX2lzQmVpbmdEZXN0cm95ZWQpIHtcbiAgICAgIHBhcmVudC4kY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcbiAgICAgIC8vIHVucmVnaXN0ZXIgcmVmIChyZW1vdmU6IHRydWUpXG4gICAgICB0aGlzLl91cGRhdGVSZWYodHJ1ZSk7XG4gICAgfVxuICAgIC8vIGRlc3Ryb3kgYWxsIGNoaWxkcmVuLlxuICAgIGkgPSB0aGlzLiRjaGlsZHJlbi5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdGhpcy4kY2hpbGRyZW5baV0uJGRlc3Ryb3koKTtcbiAgICB9XG4gICAgLy8gdGVhcmRvd24gcHJvcHNcbiAgICBpZiAodGhpcy5fcHJvcHNVbmxpbmtGbikge1xuICAgICAgdGhpcy5fcHJvcHNVbmxpbmtGbigpO1xuICAgIH1cbiAgICAvLyB0ZWFyZG93biBhbGwgZGlyZWN0aXZlcy4gdGhpcyBhbHNvIHRlYXJzZG93biBhbGxcbiAgICAvLyBkaXJlY3RpdmUtb3duZWQgd2F0Y2hlcnMuXG4gICAgaWYgKHRoaXMuX3VubGlua0ZuKSB7XG4gICAgICB0aGlzLl91bmxpbmtGbigpO1xuICAgIH1cbiAgICBpID0gdGhpcy5fd2F0Y2hlcnMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHRoaXMuX3dhdGNoZXJzW2ldLnRlYXJkb3duKCk7XG4gICAgfVxuICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgdG8gc2VsZiBvbiAkZWxcbiAgICBpZiAodGhpcy4kZWwpIHtcbiAgICAgIHRoaXMuJGVsLl9fdnVlX18gPSBudWxsO1xuICAgIH1cblxuICAgIGRlc3Ryb3lSZWFkeSA9IHRydWU7XG4gICAgY2xlYW51cElmUG9zc2libGUoKTtcbiAgfTtcblxuICAvKipcbiAgICogQ2xlYW4gdXAgdG8gZW5zdXJlIGdhcmJhZ2UgY29sbGVjdGlvbi5cbiAgICogVGhpcyBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGxlYXZlIHRyYW5zaXRpb24gaWYgdGhlcmVcbiAgICogaXMgYW55LlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9pc0Rlc3Ryb3llZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyByZW1vdmUgc2VsZiBmcm9tIG93bmVyIGZyYWdtZW50XG4gICAgLy8gZG8gaXQgaW4gY2xlYW51cCBzbyB0aGF0IHdlIGNhbiBjYWxsICRkZXN0cm95IHdpdGhcbiAgICAvLyBkZWZlciByaWdodCB3aGVuIGEgZnJhZ21lbnQgaXMgYWJvdXQgdG8gYmUgcmVtb3ZlZC5cbiAgICBpZiAodGhpcy5fZnJhZykge1xuICAgICAgdGhpcy5fZnJhZy5jaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xuICAgIH1cbiAgICAvLyByZW1vdmUgcmVmZXJlbmNlIGZyb20gZGF0YSBvYlxuICAgIC8vIGZyb3plbiBvYmplY3QgbWF5IG5vdCBoYXZlIG9ic2VydmVyLlxuICAgIGlmICh0aGlzLl9kYXRhICYmIHRoaXMuX2RhdGEuX19vYl9fKSB7XG4gICAgICB0aGlzLl9kYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKTtcbiAgICB9XG4gICAgLy8gQ2xlYW4gdXAgcmVmZXJlbmNlcyB0byBwcml2YXRlIHByb3BlcnRpZXMgYW5kIG90aGVyXG4gICAgLy8gaW5zdGFuY2VzLiBwcmVzZXJ2ZSByZWZlcmVuY2UgdG8gX2RhdGEgc28gdGhhdCBwcm94eVxuICAgIC8vIGFjY2Vzc29ycyBzdGlsbCB3b3JrLiBUaGUgb25seSBwb3RlbnRpYWwgc2lkZSBlZmZlY3RcbiAgICAvLyBoZXJlIGlzIHRoYXQgbXV0YXRpbmcgdGhlIGluc3RhbmNlIGFmdGVyIGl0J3MgZGVzdHJveWVkXG4gICAgLy8gbWF5IGFmZmVjdCB0aGUgc3RhdGUgb2Ygb3RoZXIgY29tcG9uZW50cyB0aGF0IGFyZSBzdGlsbFxuICAgIC8vIG9ic2VydmluZyB0aGUgc2FtZSBvYmplY3QsIGJ1dCB0aGF0IHNlZW1zIHRvIGJlIGFcbiAgICAvLyByZWFzb25hYmxlIHJlc3BvbnNpYmlsaXR5IGZvciB0aGUgdXNlciByYXRoZXIgdGhhblxuICAgIC8vIGFsd2F5cyB0aHJvd2luZyBhbiBlcnJvciBvbiB0aGVtLlxuICAgIHRoaXMuJGVsID0gdGhpcy4kcGFyZW50ID0gdGhpcy4kcm9vdCA9IHRoaXMuJGNoaWxkcmVuID0gdGhpcy5fd2F0Y2hlcnMgPSB0aGlzLl9jb250ZXh0ID0gdGhpcy5fc2NvcGUgPSB0aGlzLl9kaXJlY3RpdmVzID0gbnVsbDtcbiAgICAvLyBjYWxsIHRoZSBsYXN0IGhvb2suLi5cbiAgICB0aGlzLl9pc0Rlc3Ryb3llZCA9IHRydWU7XG4gICAgdGhpcy5fY2FsbEhvb2soJ2Rlc3Ryb3llZCcpO1xuICAgIC8vIHR1cm4gb2ZmIGFsbCBpbnN0YW5jZSBsaXN0ZW5lcnMuXG4gICAgdGhpcy4kb2ZmKCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIG1pc2NNaXhpbiAoVnVlKSB7XG4gIC8qKlxuICAgKiBBcHBseSBhIGxpc3Qgb2YgZmlsdGVyIChkZXNjcmlwdG9ycykgdG8gYSB2YWx1ZS5cbiAgICogVXNpbmcgcGxhaW4gZm9yIGxvb3BzIGhlcmUgYmVjYXVzZSB0aGlzIHdpbGwgYmUgY2FsbGVkIGluXG4gICAqIHRoZSBnZXR0ZXIgb2YgYW55IHdhdGNoZXIgd2l0aCBmaWx0ZXJzIHNvIGl0IGlzIHZlcnlcbiAgICogcGVyZm9ybWFuY2Ugc2Vuc2l0aXZlLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7Kn0gW29sZFZhbHVlXVxuICAgKiBAcGFyYW0ge0FycmF5fSBmaWx0ZXJzXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gd3JpdGVcbiAgICogQHJldHVybiB7Kn1cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fYXBwbHlGaWx0ZXJzID0gZnVuY3Rpb24gKHZhbHVlLCBvbGRWYWx1ZSwgZmlsdGVycywgd3JpdGUpIHtcbiAgICB2YXIgZmlsdGVyLCBmbiwgYXJncywgYXJnLCBvZmZzZXQsIGksIGwsIGosIGs7XG4gICAgZm9yIChpID0gMCwgbCA9IGZpbHRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmaWx0ZXIgPSBmaWx0ZXJzW3dyaXRlID8gbCAtIGkgLSAxIDogaV07XG4gICAgICBmbiA9IHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlci5uYW1lLCB0cnVlKTtcbiAgICAgIGlmICghZm4pIGNvbnRpbnVlO1xuICAgICAgZm4gPSB3cml0ZSA/IGZuLndyaXRlIDogZm4ucmVhZCB8fCBmbjtcbiAgICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIGNvbnRpbnVlO1xuICAgICAgYXJncyA9IHdyaXRlID8gW3ZhbHVlLCBvbGRWYWx1ZV0gOiBbdmFsdWVdO1xuICAgICAgb2Zmc2V0ID0gd3JpdGUgPyAyIDogMTtcbiAgICAgIGlmIChmaWx0ZXIuYXJncykge1xuICAgICAgICBmb3IgKGogPSAwLCBrID0gZmlsdGVyLmFyZ3MubGVuZ3RoOyBqIDwgazsgaisrKSB7XG4gICAgICAgICAgYXJnID0gZmlsdGVyLmFyZ3Nbal07XG4gICAgICAgICAgYXJnc1tqICsgb2Zmc2V0XSA9IGFyZy5keW5hbWljID8gdGhpcy4kZ2V0KGFyZy52YWx1ZSkgOiBhcmcudmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhbHVlID0gZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcblxuICAvKipcbiAgICogUmVzb2x2ZSBhIGNvbXBvbmVudCwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGNvbXBvbmVudFxuICAgKiBpcyBkZWZpbmVkIG5vcm1hbGx5IG9yIHVzaW5nIGFuIGFzeW5jIGZhY3RvcnkgZnVuY3Rpb24uXG4gICAqIFJlc29sdmVzIHN5bmNocm9ub3VzbHkgaWYgYWxyZWFkeSByZXNvbHZlZCwgb3RoZXJ3aXNlXG4gICAqIHJlc29sdmVzIGFzeW5jaHJvbm91c2x5IGFuZCBjYWNoZXMgdGhlIHJlc29sdmVkXG4gICAqIGNvbnN0cnVjdG9yIG9uIHRoZSBmYWN0b3J5LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gdmFsdWVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fcmVzb2x2ZUNvbXBvbmVudCA9IGZ1bmN0aW9uICh2YWx1ZSwgY2IpIHtcbiAgICB2YXIgZmFjdG9yeTtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBmYWN0b3J5ID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZhY3RvcnkgPSByZXNvbHZlQXNzZXQodGhpcy4kb3B0aW9ucywgJ2NvbXBvbmVudHMnLCB2YWx1ZSwgdHJ1ZSk7XG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghZmFjdG9yeSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBhc3luYyBjb21wb25lbnQgZmFjdG9yeVxuICAgIGlmICghZmFjdG9yeS5vcHRpb25zKSB7XG4gICAgICBpZiAoZmFjdG9yeS5yZXNvbHZlZCkge1xuICAgICAgICAvLyBjYWNoZWRcbiAgICAgICAgY2IoZmFjdG9yeS5yZXNvbHZlZCk7XG4gICAgICB9IGVsc2UgaWYgKGZhY3RvcnkucmVxdWVzdGVkKSB7XG4gICAgICAgIC8vIHBvb2wgY2FsbGJhY2tzXG4gICAgICAgIGZhY3RvcnkucGVuZGluZ0NhbGxiYWNrcy5wdXNoKGNiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZhY3RvcnkucmVxdWVzdGVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIGNicyA9IGZhY3RvcnkucGVuZGluZ0NhbGxiYWNrcyA9IFtjYl07XG4gICAgICAgIGZhY3RvcnkuY2FsbCh0aGlzLCBmdW5jdGlvbiByZXNvbHZlKHJlcykge1xuICAgICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHJlcykpIHtcbiAgICAgICAgICAgIHJlcyA9IFZ1ZS5leHRlbmQocmVzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY2FjaGUgcmVzb2x2ZWRcbiAgICAgICAgICBmYWN0b3J5LnJlc29sdmVkID0gcmVzO1xuICAgICAgICAgIC8vIGludm9rZSBjYWxsYmFja3NcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGNic1tpXShyZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignRmFpbGVkIHRvIHJlc29sdmUgYXN5bmMgY29tcG9uZW50JyArICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gJzogJyArIHZhbHVlIDogJycpICsgJy4gJyArIChyZWFzb24gPyAnXFxuUmVhc29uOiAnICsgcmVhc29uIDogJycpKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vcm1hbCBjb21wb25lbnRcbiAgICAgIGNiKGZhY3RvcnkpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIGZpbHRlclJFJDEgPSAvW158XVxcfFtefF0vO1xuXG5mdW5jdGlvbiBkYXRhQVBJIChWdWUpIHtcbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXG4gICAqIEByZXR1cm4geyp9XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGdldCA9IGZ1bmN0aW9uIChleHAsIGFzU3RhdGVtZW50KSB7XG4gICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHApO1xuICAgIGlmIChyZXMpIHtcbiAgICAgIGlmIChhc1N0YXRlbWVudCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBzdGF0ZW1lbnRIYW5kbGVyKCkge1xuICAgICAgICAgIHNlbGYuJGFyZ3VtZW50cyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVzLmdldC5jYWxsKHNlbGYsIHNlbGYpO1xuICAgICAgICAgIHNlbGYuJGFyZ3VtZW50cyA9IG51bGw7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5nZXQuY2FsbCh0aGlzLCB0aGlzKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG4gICAqIFRoZSBleHByZXNzaW9uIG11c3QgYmUgYSB2YWxpZCBsZWZ0LWhhbmRcbiAgICogZXhwcmVzc2lvbiBpbiBhbiBhc3NpZ25tZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gICAqIEBwYXJhbSB7Kn0gdmFsXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJHNldCA9IGZ1bmN0aW9uIChleHAsIHZhbCkge1xuICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwLCB0cnVlKTtcbiAgICBpZiAocmVzICYmIHJlcy5zZXQpIHtcbiAgICAgIHJlcy5zZXQuY2FsbCh0aGlzLCB0aGlzLCB2YWwpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRGVsZXRlIGEgcHJvcGVydHkgb24gdGhlIFZNXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xuICAgIGRlbCh0aGlzLl9kYXRhLCBrZXkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXYXRjaCBhbiBleHByZXNzaW9uLCB0cmlnZ2VyIGNhbGxiYWNrIHdoZW4gaXRzXG4gICAqIHZhbHVlIGNoYW5nZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBleHBPckZuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGRlZXBcbiAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGltbWVkaWF0ZVxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB1bndhdGNoRm5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kd2F0Y2ggPSBmdW5jdGlvbiAoZXhwT3JGbiwgY2IsIG9wdGlvbnMpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZhciBwYXJzZWQ7XG4gICAgaWYgKHR5cGVvZiBleHBPckZuID09PSAnc3RyaW5nJykge1xuICAgICAgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUoZXhwT3JGbik7XG4gICAgICBleHBPckZuID0gcGFyc2VkLmV4cHJlc3Npb247XG4gICAgfVxuICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCB7XG4gICAgICBkZWVwOiBvcHRpb25zICYmIG9wdGlvbnMuZGVlcCxcbiAgICAgIHN5bmM6IG9wdGlvbnMgJiYgb3B0aW9ucy5zeW5jLFxuICAgICAgZmlsdGVyczogcGFyc2VkICYmIHBhcnNlZC5maWx0ZXJzLFxuICAgICAgdXNlcjogIW9wdGlvbnMgfHwgb3B0aW9ucy51c2VyICE9PSBmYWxzZVxuICAgIH0pO1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuaW1tZWRpYXRlKSB7XG4gICAgICBjYi5jYWxsKHZtLCB3YXRjaGVyLnZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVud2F0Y2hGbigpIHtcbiAgICAgIHdhdGNoZXIudGVhcmRvd24oKTtcbiAgICB9O1xuICB9O1xuXG4gIC8qKlxuICAgKiBFdmFsdWF0ZSBhIHRleHQgZGlyZWN0aXZlLCBpbmNsdWRpbmcgZmlsdGVycy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZXZhbCA9IGZ1bmN0aW9uICh0ZXh0LCBhc1N0YXRlbWVudCkge1xuICAgIC8vIGNoZWNrIGZvciBmaWx0ZXJzLlxuICAgIGlmIChmaWx0ZXJSRSQxLnRlc3QodGV4dCkpIHtcbiAgICAgIHZhciBkaXIgPSBwYXJzZURpcmVjdGl2ZSh0ZXh0KTtcbiAgICAgIC8vIHRoZSBmaWx0ZXIgcmVnZXggY2hlY2sgbWlnaHQgZ2l2ZSBmYWxzZSBwb3NpdGl2ZVxuICAgICAgLy8gZm9yIHBpcGVzIGluc2lkZSBzdHJpbmdzLCBzbyBpdCdzIHBvc3NpYmxlIHRoYXRcbiAgICAgIC8vIHdlIGRvbid0IGdldCBhbnkgZmlsdGVycyBoZXJlXG4gICAgICB2YXIgdmFsID0gdGhpcy4kZ2V0KGRpci5leHByZXNzaW9uLCBhc1N0YXRlbWVudCk7XG4gICAgICByZXR1cm4gZGlyLmZpbHRlcnMgPyB0aGlzLl9hcHBseUZpbHRlcnModmFsLCBudWxsLCBkaXIuZmlsdGVycykgOiB2YWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vIGZpbHRlclxuICAgICAgcmV0dXJuIHRoaXMuJGdldCh0ZXh0LCBhc1N0YXRlbWVudCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBJbnRlcnBvbGF0ZSBhIHBpZWNlIG9mIHRlbXBsYXRlIHRleHQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kaW50ZXJwb2xhdGUgPSBmdW5jdGlvbiAodGV4dCkge1xuICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQodGV4dCk7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICBpZiAodG9rZW5zKSB7XG4gICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gdm0uJGV2YWwodG9rZW5zWzBdLnZhbHVlKSArICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRva2Vucy5tYXAoZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgICAgcmV0dXJuIHRva2VuLnRhZyA/IHZtLiRldmFsKHRva2VuLnZhbHVlKSA6IHRva2VuLnZhbHVlO1xuICAgICAgICB9KS5qb2luKCcnKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBMb2cgaW5zdGFuY2UgZGF0YSBhcyBhIHBsYWluIEpTIG9iamVjdFxuICAgKiBzbyB0aGF0IGl0IGlzIGVhc2llciB0byBpbnNwZWN0IGluIGNvbnNvbGUuXG4gICAqIFRoaXMgbWV0aG9kIGFzc3VtZXMgY29uc29sZSBpcyBhdmFpbGFibGUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbcGF0aF1cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kbG9nID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgICB2YXIgZGF0YSA9IHBhdGggPyBnZXRQYXRoKHRoaXMuX2RhdGEsIHBhdGgpIDogdGhpcy5fZGF0YTtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgZGF0YSA9IGNsZWFuKGRhdGEpO1xuICAgIH1cbiAgICAvLyBpbmNsdWRlIGNvbXB1dGVkIGZpZWxkc1xuICAgIGlmICghcGF0aCkge1xuICAgICAgdmFyIGtleTtcbiAgICAgIGZvciAoa2V5IGluIHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQpIHtcbiAgICAgICAgZGF0YVtrZXldID0gY2xlYW4odGhpc1trZXldKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9wcm9wcykge1xuICAgICAgICBmb3IgKGtleSBpbiB0aGlzLl9wcm9wcykge1xuICAgICAgICAgIGRhdGFba2V5XSA9IGNsZWFuKHRoaXNba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFwiY2xlYW5cIiBhIGdldHRlci9zZXR0ZXIgY29udmVydGVkIG9iamVjdCBpbnRvIGEgcGxhaW5cbiAgICogb2JqZWN0IGNvcHkuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAtIG9ialxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNsZWFuKG9iaikge1xuICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRvbUFQSSAoVnVlKSB7XG4gIC8qKlxuICAgKiBDb252ZW5pZW5jZSBvbi1pbnN0YW5jZSBuZXh0VGljay4gVGhlIGNhbGxiYWNrIGlzXG4gICAqIGF1dG8tYm91bmQgdG8gdGhlIGluc3RhbmNlLCBhbmQgdGhpcyBhdm9pZHMgY29tcG9uZW50XG4gICAqIG1vZHVsZXMgaGF2aW5nIHRvIHJlbHkgb24gdGhlIGdsb2JhbCBWdWUuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG5leHRUaWNrID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgbmV4dFRpY2soZm4sIHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBcHBlbmQgaW5zdGFuY2UgdG8gdGFyZ2V0XG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRhcHBlbmRUbyA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICAgIHJldHVybiBpbnNlcnQodGhpcywgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIGFwcGVuZCwgYXBwZW5kV2l0aFRyYW5zaXRpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcmVwZW5kIGluc3RhbmNlIHRvIHRhcmdldFxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kcHJlcGVuZFRvID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcbiAgICBpZiAodGFyZ2V0Lmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgdGhpcy4kYmVmb3JlKHRhcmdldC5maXJzdENoaWxkLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbnNlcnQgaW5zdGFuY2UgYmVmb3JlIHRhcmdldFxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kYmVmb3JlID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgcmV0dXJuIGluc2VydCh0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgYmVmb3JlV2l0aENiLCBiZWZvcmVXaXRoVHJhbnNpdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluc2VydCBpbnN0YW5jZSBhZnRlciB0YXJnZXRcbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGFmdGVyID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcbiAgICBpZiAodGFyZ2V0Lm5leHRTaWJsaW5nKSB7XG4gICAgICB0aGlzLiRiZWZvcmUodGFyZ2V0Lm5leHRTaWJsaW5nLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQucGFyZW50Tm9kZSwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBpbnN0YW5jZSBmcm9tIERPTVxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kcmVtb3ZlID0gZnVuY3Rpb24gKGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICAgIGlmICghdGhpcy4kZWwucGFyZW50Tm9kZSkge1xuICAgICAgcmV0dXJuIGNiICYmIGNiKCk7XG4gICAgfVxuICAgIHZhciBpbkRvY3VtZW50ID0gdGhpcy5faXNBdHRhY2hlZCAmJiBpbkRvYyh0aGlzLiRlbCk7XG4gICAgLy8gaWYgd2UgYXJlIG5vdCBpbiBkb2N1bWVudCwgbm8gbmVlZCB0byBjaGVja1xuICAgIC8vIGZvciB0cmFuc2l0aW9uc1xuICAgIGlmICghaW5Eb2N1bWVudCkgd2l0aFRyYW5zaXRpb24gPSBmYWxzZTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHJlYWxDYiA9IGZ1bmN0aW9uIHJlYWxDYigpIHtcbiAgICAgIGlmIChpbkRvY3VtZW50KSBzZWxmLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcbiAgICAgIGlmIChjYikgY2IoKTtcbiAgICB9O1xuICAgIGlmICh0aGlzLl9pc0ZyYWdtZW50KSB7XG4gICAgICByZW1vdmVOb2RlUmFuZ2UodGhpcy5fZnJhZ21lbnRTdGFydCwgdGhpcy5fZnJhZ21lbnRFbmQsIHRoaXMsIHRoaXMuX2ZyYWdtZW50LCByZWFsQ2IpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgb3AgPSB3aXRoVHJhbnNpdGlvbiA9PT0gZmFsc2UgPyByZW1vdmVXaXRoQ2IgOiByZW1vdmVXaXRoVHJhbnNpdGlvbjtcbiAgICAgIG9wKHRoaXMuJGVsLCB0aGlzLCByZWFsQ2IpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU2hhcmVkIERPTSBpbnNlcnRpb24gZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcDEgLSBvcCBmb3Igbm9uLXRyYW5zaXRpb24gaW5zZXJ0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMiAtIG9wIGZvciB0cmFuc2l0aW9uIGluc2VydFxuICAgKiBAcmV0dXJuIHZtXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGluc2VydCh2bSwgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIG9wMSwgb3AyKSB7XG4gICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcbiAgICB2YXIgdGFyZ2V0SXNEZXRhY2hlZCA9ICFpbkRvYyh0YXJnZXQpO1xuICAgIHZhciBvcCA9IHdpdGhUcmFuc2l0aW9uID09PSBmYWxzZSB8fCB0YXJnZXRJc0RldGFjaGVkID8gb3AxIDogb3AyO1xuICAgIHZhciBzaG91bGRDYWxsSG9vayA9ICF0YXJnZXRJc0RldGFjaGVkICYmICF2bS5faXNBdHRhY2hlZCAmJiAhaW5Eb2Modm0uJGVsKTtcbiAgICBpZiAodm0uX2lzRnJhZ21lbnQpIHtcbiAgICAgIG1hcE5vZGVSYW5nZSh2bS5fZnJhZ21lbnRTdGFydCwgdm0uX2ZyYWdtZW50RW5kLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBvcChub2RlLCB0YXJnZXQsIHZtKTtcbiAgICAgIH0pO1xuICAgICAgY2IgJiYgY2IoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3Aodm0uJGVsLCB0YXJnZXQsIHZtLCBjYik7XG4gICAgfVxuICAgIGlmIChzaG91bGRDYWxsSG9vaykge1xuICAgICAgdm0uX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuICAgIH1cbiAgICByZXR1cm4gdm07XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgZm9yIHNlbGVjdG9yc1xuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBlbFxuICAgKi9cblxuICBmdW5jdGlvbiBxdWVyeShlbCkge1xuICAgIHJldHVybiB0eXBlb2YgZWwgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCkgOiBlbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBlbmQgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBlbFxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBmdW5jdGlvbiBhcHBlbmQoZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcbiAgICBpZiAoY2IpIGNiKCk7XG4gIH1cblxuICAvKipcbiAgICogSW5zZXJ0QmVmb3JlIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgZnVuY3Rpb24gYmVmb3JlV2l0aENiKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuICAgIGJlZm9yZShlbCwgdGFyZ2V0KTtcbiAgICBpZiAoY2IpIGNiKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVtb3ZlV2l0aENiKGVsLCB2bSwgY2IpIHtcbiAgICByZW1vdmUoZWwpO1xuICAgIGlmIChjYikgY2IoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBldmVudHNBUEkgKFZ1ZSkge1xuICAvKipcbiAgICogTGlzdGVuIG9uIHRoZSBnaXZlbiBgZXZlbnRgIHdpdGggYGZuYC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG9uID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuICAgICh0aGlzLl9ldmVudHNbZXZlbnRdIHx8ICh0aGlzLl9ldmVudHNbZXZlbnRdID0gW10pKS5wdXNoKGZuKTtcbiAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAxKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQWRkcyBhbiBgZXZlbnRgIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBpbnZva2VkIGEgc2luZ2xlXG4gICAqIHRpbWUgdGhlbiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRvbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBmdW5jdGlvbiBvbigpIHtcbiAgICAgIHNlbGYuJG9mZihldmVudCwgb24pO1xuICAgICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgb24uZm4gPSBmbjtcbiAgICB0aGlzLiRvbihldmVudCwgb24pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGdpdmVuIGNhbGxiYWNrIGZvciBgZXZlbnRgIG9yIGFsbFxuICAgKiByZWdpc3RlcmVkIGNhbGxiYWNrcy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG9mZiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICB2YXIgY2JzO1xuICAgIC8vIGFsbFxuICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgaWYgKHRoaXMuJHBhcmVudCkge1xuICAgICAgICBmb3IgKGV2ZW50IGluIHRoaXMuX2V2ZW50cykge1xuICAgICAgICAgIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF07XG4gICAgICAgICAgaWYgKGNicykge1xuICAgICAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLWNicy5sZW5ndGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8gc3BlY2lmaWMgZXZlbnRcbiAgICBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuICAgIGlmICghY2JzKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC1jYnMubGVuZ3RoKTtcbiAgICAgIHRoaXMuX2V2ZW50c1tldmVudF0gPSBudWxsO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIHNwZWNpZmljIGhhbmRsZXJcbiAgICB2YXIgY2I7XG4gICAgdmFyIGkgPSBjYnMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGNiID0gY2JzW2ldO1xuICAgICAgaWYgKGNiID09PSBmbiB8fCBjYi5mbiA9PT0gZm4pIHtcbiAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLTEpO1xuICAgICAgICBjYnMuc3BsaWNlKGksIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgYW4gZXZlbnQgb24gc2VsZi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBldmVudFxuICAgKiBAcmV0dXJuIHtCb29sZWFufSBzaG91bGRQcm9wYWdhdGVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZW1pdCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBpc1NvdXJjZSA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZyc7XG4gICAgZXZlbnQgPSBpc1NvdXJjZSA/IGV2ZW50IDogZXZlbnQubmFtZTtcbiAgICB2YXIgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcbiAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gaXNTb3VyY2UgfHwgIWNicztcbiAgICBpZiAoY2JzKSB7XG4gICAgICBjYnMgPSBjYnMubGVuZ3RoID4gMSA/IHRvQXJyYXkoY2JzKSA6IGNicztcbiAgICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBoYWNreSBzb2x1dGlvbiB0byB0aGUgcXVlc3Rpb24gcmFpc2VkXG4gICAgICAvLyBpbiAjMjEwMjogZm9yIGFuIGlubGluZSBjb21wb25lbnQgbGlzdGVuZXIgbGlrZSA8Y29tcCBAdGVzdD1cImRvVGhpc1wiPixcbiAgICAgIC8vIHRoZSBwcm9wYWdhdGlvbiBoYW5kbGluZyBpcyBzb21ld2hhdCBicm9rZW4uIFRoZXJlZm9yZSB3ZVxuICAgICAgLy8gbmVlZCB0byB0cmVhdCB0aGVzZSBpbmxpbmUgY2FsbGJhY2tzIGRpZmZlcmVudGx5LlxuICAgICAgdmFyIGhhc1BhcmVudENicyA9IGlzU291cmNlICYmIGNicy5zb21lKGZ1bmN0aW9uIChjYikge1xuICAgICAgICByZXR1cm4gY2IuX2Zyb21QYXJlbnQ7XG4gICAgICB9KTtcbiAgICAgIGlmIChoYXNQYXJlbnRDYnMpIHtcbiAgICAgICAgc2hvdWxkUHJvcGFnYXRlID0gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgY2IgPSBjYnNbaV07XG4gICAgICAgIHZhciByZXMgPSBjYi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgaWYgKHJlcyA9PT0gdHJ1ZSAmJiAoIWhhc1BhcmVudENicyB8fCBjYi5fZnJvbVBhcmVudCkpIHtcbiAgICAgICAgICBzaG91bGRQcm9wYWdhdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaG91bGRQcm9wYWdhdGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlY3Vyc2l2ZWx5IGJyb2FkY2FzdCBhbiBldmVudCB0byBhbGwgY2hpbGRyZW4gaW5zdGFuY2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGV2ZW50XG4gICAqIEBwYXJhbSB7Li4uKn0gYWRkaXRpb25hbCBhcmd1bWVudHNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kYnJvYWRjYXN0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIGlzU291cmNlID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJztcbiAgICBldmVudCA9IGlzU291cmNlID8gZXZlbnQgOiBldmVudC5uYW1lO1xuICAgIC8vIGlmIG5vIGNoaWxkIGhhcyByZWdpc3RlcmVkIGZvciB0aGlzIGV2ZW50LFxuICAgIC8vIHRoZW4gdGhlcmUncyBubyBuZWVkIHRvIGJyb2FkY2FzdC5cbiAgICBpZiAoIXRoaXMuX2V2ZW50c0NvdW50W2V2ZW50XSkgcmV0dXJuO1xuICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuJGNoaWxkcmVuO1xuICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO1xuICAgIGlmIChpc1NvdXJjZSkge1xuICAgICAgLy8gdXNlIG9iamVjdCBldmVudCB0byBpbmRpY2F0ZSBub24tc291cmNlIGVtaXRcbiAgICAgIC8vIG9uIGNoaWxkcmVuXG4gICAgICBhcmdzWzBdID0geyBuYW1lOiBldmVudCwgc291cmNlOiB0aGlzIH07XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSBjaGlsZC4kZW1pdC5hcHBseShjaGlsZCwgYXJncyk7XG4gICAgICBpZiAoc2hvdWxkUHJvcGFnYXRlKSB7XG4gICAgICAgIGNoaWxkLiRicm9hZGNhc3QuYXBwbHkoY2hpbGQsIGFyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVjdXJzaXZlbHkgcHJvcGFnYXRlIGFuIGV2ZW50IHVwIHRoZSBwYXJlbnQgY2hhaW4uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0gey4uLip9IGFkZGl0aW9uYWwgYXJndW1lbnRzXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGRpc3BhdGNoID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IHRoaXMuJGVtaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoIXNob3VsZFByb3BhZ2F0ZSkgcmV0dXJuO1xuICAgIHZhciBwYXJlbnQgPSB0aGlzLiRwYXJlbnQ7XG4gICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG4gICAgLy8gdXNlIG9iamVjdCBldmVudCB0byBpbmRpY2F0ZSBub24tc291cmNlIGVtaXRcbiAgICAvLyBvbiBwYXJlbnRzXG4gICAgYXJnc1swXSA9IHsgbmFtZTogZXZlbnQsIHNvdXJjZTogdGhpcyB9O1xuICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IHBhcmVudC4kZW1pdC5hcHBseShwYXJlbnQsIGFyZ3MpO1xuICAgICAgcGFyZW50ID0gc2hvdWxkUHJvcGFnYXRlID8gcGFyZW50LiRwYXJlbnQgOiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogTW9kaWZ5IHRoZSBsaXN0ZW5lciBjb3VudHMgb24gYWxsIHBhcmVudHMuXG4gICAqIFRoaXMgYm9va2tlZXBpbmcgYWxsb3dzICRicm9hZGNhc3QgdG8gcmV0dXJuIGVhcmx5IHdoZW5cbiAgICogbm8gY2hpbGQgaGFzIGxpc3RlbmVkIHRvIGEgY2VydGFpbiBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge051bWJlcn0gY291bnRcbiAgICovXG5cbiAgdmFyIGhvb2tSRSA9IC9eaG9vazovO1xuICBmdW5jdGlvbiBtb2RpZnlMaXN0ZW5lckNvdW50KHZtLCBldmVudCwgY291bnQpIHtcbiAgICB2YXIgcGFyZW50ID0gdm0uJHBhcmVudDtcbiAgICAvLyBob29rcyBkbyBub3QgZ2V0IGJyb2FkY2FzdGVkIHNvIG5vIG5lZWRcbiAgICAvLyB0byBkbyBib29ra2VlcGluZyBmb3IgdGhlbVxuICAgIGlmICghcGFyZW50IHx8ICFjb3VudCB8fCBob29rUkUudGVzdChldmVudCkpIHJldHVybjtcbiAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICBwYXJlbnQuX2V2ZW50c0NvdW50W2V2ZW50XSA9IChwYXJlbnQuX2V2ZW50c0NvdW50W2V2ZW50XSB8fCAwKSArIGNvdW50O1xuICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGxpZmVjeWNsZUFQSSAoVnVlKSB7XG4gIC8qKlxuICAgKiBTZXQgaW5zdGFuY2UgdGFyZ2V0IGVsZW1lbnQgYW5kIGtpY2sgb2ZmIHRoZSBjb21waWxhdGlvblxuICAgKiBwcm9jZXNzLiBUaGUgcGFzc2VkIGluIGBlbGAgY2FuIGJlIGEgc2VsZWN0b3Igc3RyaW5nLCBhblxuICAgKiBleGlzdGluZyBFbGVtZW50LCBvciBhIERvY3VtZW50RnJhZ21lbnQgKGZvciBibG9ja1xuICAgKiBpbnN0YW5jZXMpLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudHxzdHJpbmd9IGVsXG4gICAqIEBwdWJsaWNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kbW91bnQgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICBpZiAodGhpcy5faXNDb21waWxlZCkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCckbW91bnQoKSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZS4nLCB0aGlzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWwgPSBxdWVyeShlbCk7XG4gICAgaWYgKCFlbCkge1xuICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB9XG4gICAgdGhpcy5fY29tcGlsZShlbCk7XG4gICAgdGhpcy5faW5pdERPTUhvb2tzKCk7XG4gICAgaWYgKGluRG9jKHRoaXMuJGVsKSkge1xuICAgICAgdGhpcy5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG4gICAgICByZWFkeS5jYWxsKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRvbmNlKCdob29rOmF0dGFjaGVkJywgcmVhZHkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogTWFyayBhbiBpbnN0YW5jZSBhcyByZWFkeS5cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVhZHkoKSB7XG4gICAgdGhpcy5faXNBdHRhY2hlZCA9IHRydWU7XG4gICAgdGhpcy5faXNSZWFkeSA9IHRydWU7XG4gICAgdGhpcy5fY2FsbEhvb2soJ3JlYWR5Jyk7XG4gIH1cblxuICAvKipcbiAgICogVGVhcmRvd24gdGhlIGluc3RhbmNlLCBzaW1wbHkgZGVsZWdhdGUgdG8gdGhlIGludGVybmFsXG4gICAqIF9kZXN0cm95LlxuICAgKlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cFxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRkZXN0cm95ID0gZnVuY3Rpb24gKHJlbW92ZSwgZGVmZXJDbGVhbnVwKSB7XG4gICAgdGhpcy5fZGVzdHJveShyZW1vdmUsIGRlZmVyQ2xlYW51cCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFBhcnRpYWxseSBjb21waWxlIGEgcGllY2Ugb2YgRE9NIGFuZCByZXR1cm4gYVxuICAgKiBkZWNvbXBpbGUgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXVxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kY29tcGlsZSA9IGZ1bmN0aW9uIChlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICByZXR1cm4gY29tcGlsZShlbCwgdGhpcy4kb3B0aW9ucywgdHJ1ZSkodGhpcywgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGUgZXhwb3NlZCBWdWUgY29uc3RydWN0b3IuXG4gKlxuICogQVBJIGNvbnZlbnRpb25zOlxuICogLSBwdWJsaWMgQVBJIG1ldGhvZHMvcHJvcGVydGllcyBhcmUgcHJlZml4ZWQgd2l0aCBgJGBcbiAqIC0gaW50ZXJuYWwgbWV0aG9kcy9wcm9wZXJ0aWVzIGFyZSBwcmVmaXhlZCB3aXRoIGBfYFxuICogLSBub24tcHJlZml4ZWQgcHJvcGVydGllcyBhcmUgYXNzdW1lZCB0byBiZSBwcm94aWVkIHVzZXJcbiAqICAgZGF0YS5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBWdWUob3B0aW9ucykge1xuICB0aGlzLl9pbml0KG9wdGlvbnMpO1xufVxuXG4vLyBpbnN0YWxsIGludGVybmFsc1xuaW5pdE1peGluKFZ1ZSk7XG5zdGF0ZU1peGluKFZ1ZSk7XG5ldmVudHNNaXhpbihWdWUpO1xubGlmZWN5Y2xlTWl4aW4oVnVlKTtcbm1pc2NNaXhpbihWdWUpO1xuXG4vLyBpbnN0YWxsIGluc3RhbmNlIEFQSXNcbmRhdGFBUEkoVnVlKTtcbmRvbUFQSShWdWUpO1xuZXZlbnRzQVBJKFZ1ZSk7XG5saWZlY3ljbGVBUEkoVnVlKTtcblxudmFyIHNsb3QgPSB7XG5cbiAgcHJpb3JpdHk6IFNMT1QsXG4gIHBhcmFtczogWyduYW1lJ10sXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyB0aGlzIHdhcyByZXNvbHZlZCBkdXJpbmcgY29tcG9uZW50IHRyYW5zY2x1c2lvblxuICAgIHZhciBuYW1lID0gdGhpcy5wYXJhbXMubmFtZSB8fCAnZGVmYXVsdCc7XG4gICAgdmFyIGNvbnRlbnQgPSB0aGlzLnZtLl9zbG90Q29udGVudHMgJiYgdGhpcy52bS5fc2xvdENvbnRlbnRzW25hbWVdO1xuICAgIGlmICghY29udGVudCB8fCAhY29udGVudC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgIHRoaXMuZmFsbGJhY2soKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb21waWxlKGNvbnRlbnQuY2xvbmVOb2RlKHRydWUpLCB0aGlzLnZtLl9jb250ZXh0LCB0aGlzLnZtKTtcbiAgICB9XG4gIH0sXG5cbiAgY29tcGlsZTogZnVuY3Rpb24gY29tcGlsZShjb250ZW50LCBjb250ZXh0LCBob3N0KSB7XG4gICAgaWYgKGNvbnRlbnQgJiYgY29udGV4dCkge1xuICAgICAgaWYgKHRoaXMuZWwuaGFzQ2hpbGROb2RlcygpICYmIGNvbnRlbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiYgY29udGVudC5jaGlsZE5vZGVzWzBdLm5vZGVUeXBlID09PSAxICYmIGNvbnRlbnQuY2hpbGROb2Rlc1swXS5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuICAgICAgICAvLyBpZiB0aGUgaW5zZXJ0ZWQgc2xvdCBoYXMgdi1pZlxuICAgICAgICAvLyBpbmplY3QgZmFsbGJhY2sgY29udGVudCBhcyB0aGUgdi1lbHNlXG4gICAgICAgIHZhciBlbHNlQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuICAgICAgICBlbHNlQmxvY2suc2V0QXR0cmlidXRlKCd2LWVsc2UnLCAnJyk7XG4gICAgICAgIGVsc2VCbG9jay5pbm5lckhUTUwgPSB0aGlzLmVsLmlubmVySFRNTDtcbiAgICAgICAgLy8gdGhlIGVsc2UgYmxvY2sgc2hvdWxkIGJlIGNvbXBpbGVkIGluIGNoaWxkIHNjb3BlXG4gICAgICAgIGVsc2VCbG9jay5fY29udGV4dCA9IHRoaXMudm07XG4gICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWxzZUJsb2NrKTtcbiAgICAgIH1cbiAgICAgIHZhciBzY29wZSA9IGhvc3QgPyBob3N0Ll9zY29wZSA6IHRoaXMuX3Njb3BlO1xuICAgICAgdGhpcy51bmxpbmsgPSBjb250ZXh0LiRjb21waWxlKGNvbnRlbnQsIGhvc3QsIHNjb3BlLCB0aGlzLl9mcmFnKTtcbiAgICB9XG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgIHJlcGxhY2UodGhpcy5lbCwgY29udGVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZSh0aGlzLmVsKTtcbiAgICB9XG4gIH0sXG5cbiAgZmFsbGJhY2s6IGZ1bmN0aW9uIGZhbGxiYWNrKCkge1xuICAgIHRoaXMuY29tcGlsZShleHRyYWN0Q29udGVudCh0aGlzLmVsLCB0cnVlKSwgdGhpcy52bSk7XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgaWYgKHRoaXMudW5saW5rKSB7XG4gICAgICB0aGlzLnVubGluaygpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHBhcnRpYWwgPSB7XG5cbiAgcHJpb3JpdHk6IFBBUlRJQUwsXG5cbiAgcGFyYW1zOiBbJ25hbWUnXSxcblxuICAvLyB3YXRjaCBjaGFuZ2VzIHRvIG5hbWUgZm9yIGR5bmFtaWMgcGFydGlhbHNcbiAgcGFyYW1XYXRjaGVyczoge1xuICAgIG5hbWU6IGZ1bmN0aW9uIG5hbWUodmFsdWUpIHtcbiAgICAgIHZJZi5yZW1vdmUuY2FsbCh0aGlzKTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmluc2VydCh2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtcGFydGlhbCcpO1xuICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuICAgIHRoaXMuaW5zZXJ0KHRoaXMucGFyYW1zLm5hbWUpO1xuICB9LFxuXG4gIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KGlkKSB7XG4gICAgdmFyIHBhcnRpYWwgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3BhcnRpYWxzJywgaWQsIHRydWUpO1xuICAgIGlmIChwYXJ0aWFsKSB7XG4gICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHBhcnRpYWwpO1xuICAgICAgdklmLmluc2VydC5jYWxsKHRoaXMpO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICBpZiAodGhpcy5mcmFnKSB7XG4gICAgICB0aGlzLmZyYWcuZGVzdHJveSgpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIGVsZW1lbnREaXJlY3RpdmVzID0ge1xuICBzbG90OiBzbG90LFxuICBwYXJ0aWFsOiBwYXJ0aWFsXG59O1xuXG52YXIgY29udmVydEFycmF5ID0gdkZvci5fcG9zdFByb2Nlc3M7XG5cbi8qKlxuICogTGltaXQgZmlsdGVyIGZvciBhcnJheXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gblxuICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCAoRGVjaW1hbCBleHBlY3RlZClcbiAqL1xuXG5mdW5jdGlvbiBsaW1pdEJ5KGFyciwgbiwgb2Zmc2V0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA/IHBhcnNlSW50KG9mZnNldCwgMTApIDogMDtcbiAgbiA9IHRvTnVtYmVyKG4pO1xuICByZXR1cm4gdHlwZW9mIG4gPT09ICdudW1iZXInID8gYXJyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgbikgOiBhcnI7XG59XG5cbi8qKlxuICogRmlsdGVyIGZpbHRlciBmb3IgYXJyYXlzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuICogQHBhcmFtIHtTdHJpbmd9IFtkZWxpbWl0ZXJdXG4gKiBAcGFyYW0ge1N0cmluZ30gLi4uZGF0YUtleXNcbiAqL1xuXG5mdW5jdGlvbiBmaWx0ZXJCeShhcnIsIHNlYXJjaCwgZGVsaW1pdGVyKSB7XG4gIGFyciA9IGNvbnZlcnRBcnJheShhcnIpO1xuICBpZiAoc2VhcmNoID09IG51bGwpIHtcbiAgICByZXR1cm4gYXJyO1xuICB9XG4gIGlmICh0eXBlb2Ygc2VhcmNoID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGFyci5maWx0ZXIoc2VhcmNoKTtcbiAgfVxuICAvLyBjYXN0IHRvIGxvd2VyY2FzZSBzdHJpbmdcbiAgc2VhcmNoID0gKCcnICsgc2VhcmNoKS50b0xvd2VyQ2FzZSgpO1xuICAvLyBhbGxvdyBvcHRpb25hbCBgaW5gIGRlbGltaXRlclxuICAvLyBiZWNhdXNlIHdoeSBub3RcbiAgdmFyIG4gPSBkZWxpbWl0ZXIgPT09ICdpbicgPyAzIDogMjtcbiAgLy8gZXh0cmFjdCBhbmQgZmxhdHRlbiBrZXlzXG4gIHZhciBrZXlzID0gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgdG9BcnJheShhcmd1bWVudHMsIG4pKTtcbiAgdmFyIHJlcyA9IFtdO1xuICB2YXIgaXRlbSwga2V5LCB2YWwsIGo7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gYXJyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGl0ZW0gPSBhcnJbaV07XG4gICAgdmFsID0gaXRlbSAmJiBpdGVtLiR2YWx1ZSB8fCBpdGVtO1xuICAgIGogPSBrZXlzLmxlbmd0aDtcbiAgICBpZiAoaikge1xuICAgICAgd2hpbGUgKGotLSkge1xuICAgICAgICBrZXkgPSBrZXlzW2pdO1xuICAgICAgICBpZiAoa2V5ID09PSAnJGtleScgJiYgY29udGFpbnMoaXRlbS4ka2V5LCBzZWFyY2gpIHx8IGNvbnRhaW5zKGdldFBhdGgodmFsLCBrZXkpLCBzZWFyY2gpKSB7XG4gICAgICAgICAgcmVzLnB1c2goaXRlbSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNvbnRhaW5zKGl0ZW0sIHNlYXJjaCkpIHtcbiAgICAgIHJlcy5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEZpbHRlciBmaWx0ZXIgZm9yIGFycmF5c1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5PFN0cmluZz58RnVuY3Rpb259IC4uLnNvcnRLZXlzXG4gKiBAcGFyYW0ge051bWJlcn0gW29yZGVyXVxuICovXG5cbmZ1bmN0aW9uIG9yZGVyQnkoYXJyKSB7XG4gIHZhciBjb21wYXJhdG9yID0gbnVsbDtcbiAgdmFyIHNvcnRLZXlzID0gdW5kZWZpbmVkO1xuICBhcnIgPSBjb252ZXJ0QXJyYXkoYXJyKTtcblxuICAvLyBkZXRlcm1pbmUgb3JkZXIgKGxhc3QgYXJndW1lbnQpXG4gIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuICB2YXIgb3JkZXIgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07XG4gIGlmICh0eXBlb2Ygb3JkZXIgPT09ICdudW1iZXInKSB7XG4gICAgb3JkZXIgPSBvcmRlciA8IDAgPyAtMSA6IDE7XG4gICAgYXJncyA9IGFyZ3MubGVuZ3RoID4gMSA/IGFyZ3Muc2xpY2UoMCwgLTEpIDogYXJncztcbiAgfSBlbHNlIHtcbiAgICBvcmRlciA9IDE7XG4gIH1cblxuICAvLyBkZXRlcm1pbmUgc29ydEtleXMgJiBjb21wYXJhdG9yXG4gIHZhciBmaXJzdEFyZyA9IGFyZ3NbMF07XG4gIGlmICghZmlyc3RBcmcpIHtcbiAgICByZXR1cm4gYXJyO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBmaXJzdEFyZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIGN1c3RvbSBjb21wYXJhdG9yXG4gICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gZmlyc3RBcmcoYSwgYikgKiBvcmRlcjtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIHN0cmluZyBrZXlzLiBmbGF0dGVuIGZpcnN0XG4gICAgc29ydEtleXMgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBhcmdzKTtcbiAgICBjb21wYXJhdG9yID0gZnVuY3Rpb24gKGEsIGIsIGkpIHtcbiAgICAgIGkgPSBpIHx8IDA7XG4gICAgICByZXR1cm4gaSA+PSBzb3J0S2V5cy5sZW5ndGggLSAxID8gYmFzZUNvbXBhcmUoYSwgYiwgaSkgOiBiYXNlQ29tcGFyZShhLCBiLCBpKSB8fCBjb21wYXJhdG9yKGEsIGIsIGkgKyAxKTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gYmFzZUNvbXBhcmUoYSwgYiwgc29ydEtleUluZGV4KSB7XG4gICAgdmFyIHNvcnRLZXkgPSBzb3J0S2V5c1tzb3J0S2V5SW5kZXhdO1xuICAgIGlmIChzb3J0S2V5KSB7XG4gICAgICBpZiAoc29ydEtleSAhPT0gJyRrZXknKSB7XG4gICAgICAgIGlmIChpc09iamVjdChhKSAmJiAnJHZhbHVlJyBpbiBhKSBhID0gYS4kdmFsdWU7XG4gICAgICAgIGlmIChpc09iamVjdChiKSAmJiAnJHZhbHVlJyBpbiBiKSBiID0gYi4kdmFsdWU7XG4gICAgICB9XG4gICAgICBhID0gaXNPYmplY3QoYSkgPyBnZXRQYXRoKGEsIHNvcnRLZXkpIDogYTtcbiAgICAgIGIgPSBpc09iamVjdChiKSA/IGdldFBhdGgoYiwgc29ydEtleSkgOiBiO1xuICAgIH1cbiAgICByZXR1cm4gYSA9PT0gYiA/IDAgOiBhID4gYiA/IG9yZGVyIDogLW9yZGVyO1xuICB9XG5cbiAgLy8gc29ydCBvbiBhIGNvcHkgdG8gYXZvaWQgbXV0YXRpbmcgb3JpZ2luYWwgYXJyYXlcbiAgcmV0dXJuIGFyci5zbGljZSgpLnNvcnQoY29tcGFyYXRvcik7XG59XG5cbi8qKlxuICogU3RyaW5nIGNvbnRhaW4gaGVscGVyXG4gKlxuICogQHBhcmFtIHsqfSB2YWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcbiAqL1xuXG5mdW5jdGlvbiBjb250YWlucyh2YWwsIHNlYXJjaCkge1xuICB2YXIgaTtcbiAgaWYgKGlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsKTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgaWYgKGNvbnRhaW5zKHZhbFtrZXlzW2ldXSwgc2VhcmNoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNBcnJheSh2YWwpKSB7XG4gICAgaSA9IHZhbC5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgaWYgKGNvbnRhaW5zKHZhbFtpXSwgc2VhcmNoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAodmFsICE9IG51bGwpIHtcbiAgICByZXR1cm4gdmFsLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlYXJjaCkgPiAtMTtcbiAgfVxufVxuXG52YXIgZGlnaXRzUkUgPSAvKFxcZHszfSkoPz1cXGQpL2c7XG5cbi8vIGFzc2V0IGNvbGxlY3Rpb25zIG11c3QgYmUgYSBwbGFpbiBvYmplY3QuXG52YXIgZmlsdGVycyA9IHtcblxuICBvcmRlckJ5OiBvcmRlckJ5LFxuICBmaWx0ZXJCeTogZmlsdGVyQnksXG4gIGxpbWl0Qnk6IGxpbWl0QnksXG5cbiAgLyoqXG4gICAqIFN0cmluZ2lmeSB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGVudFxuICAgKi9cblxuICBqc29uOiB7XG4gICAgcmVhZDogZnVuY3Rpb24gcmVhZCh2YWx1ZSwgaW5kZW50KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogSlNPTi5zdHJpbmdpZnkodmFsdWUsIG51bGwsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gaW5kZW50IDogMik7XG4gICAgfSxcbiAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUodmFsdWUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogJ2FiYycgPT4gJ0FiYydcbiAgICovXG5cbiAgY2FwaXRhbGl6ZTogZnVuY3Rpb24gY2FwaXRhbGl6ZSh2YWx1ZSkge1xuICAgIGlmICghdmFsdWUgJiYgdmFsdWUgIT09IDApIHJldHVybiAnJztcbiAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIHZhbHVlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdmFsdWUuc2xpY2UoMSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqICdhYmMnID0+ICdBQkMnXG4gICAqL1xuXG4gIHVwcGVyY2FzZTogZnVuY3Rpb24gdXBwZXJjYXNlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlIHx8IHZhbHVlID09PSAwID8gdmFsdWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpIDogJyc7XG4gIH0sXG5cbiAgLyoqXG4gICAqICdBYkMnID0+ICdhYmMnXG4gICAqL1xuXG4gIGxvd2VyY2FzZTogZnVuY3Rpb24gbG93ZXJjYXNlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlIHx8IHZhbHVlID09PSAwID8gdmFsdWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpIDogJyc7XG4gIH0sXG5cbiAgLyoqXG4gICAqIDEyMzQ1ID0+ICQxMiwzNDUuMDBcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHNpZ25cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRlY2ltYWxzIERlY2ltYWwgcGxhY2VzXG4gICAqL1xuXG4gIGN1cnJlbmN5OiBmdW5jdGlvbiBjdXJyZW5jeSh2YWx1ZSwgX2N1cnJlbmN5LCBkZWNpbWFscykge1xuICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgaWYgKCFpc0Zpbml0ZSh2YWx1ZSkgfHwgIXZhbHVlICYmIHZhbHVlICE9PSAwKSByZXR1cm4gJyc7XG4gICAgX2N1cnJlbmN5ID0gX2N1cnJlbmN5ICE9IG51bGwgPyBfY3VycmVuY3kgOiAnJCc7XG4gICAgZGVjaW1hbHMgPSBkZWNpbWFscyAhPSBudWxsID8gZGVjaW1hbHMgOiAyO1xuICAgIHZhciBzdHJpbmdpZmllZCA9IE1hdGguYWJzKHZhbHVlKS50b0ZpeGVkKGRlY2ltYWxzKTtcbiAgICB2YXIgX2ludCA9IGRlY2ltYWxzID8gc3RyaW5naWZpZWQuc2xpY2UoMCwgLTEgLSBkZWNpbWFscykgOiBzdHJpbmdpZmllZDtcbiAgICB2YXIgaSA9IF9pbnQubGVuZ3RoICUgMztcbiAgICB2YXIgaGVhZCA9IGkgPiAwID8gX2ludC5zbGljZSgwLCBpKSArIChfaW50Lmxlbmd0aCA+IDMgPyAnLCcgOiAnJykgOiAnJztcbiAgICB2YXIgX2Zsb2F0ID0gZGVjaW1hbHMgPyBzdHJpbmdpZmllZC5zbGljZSgtMSAtIGRlY2ltYWxzKSA6ICcnO1xuICAgIHZhciBzaWduID0gdmFsdWUgPCAwID8gJy0nIDogJyc7XG4gICAgcmV0dXJuIHNpZ24gKyBfY3VycmVuY3kgKyBoZWFkICsgX2ludC5zbGljZShpKS5yZXBsYWNlKGRpZ2l0c1JFLCAnJDEsJykgKyBfZmxvYXQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqICdpdGVtJyA9PiAnaXRlbXMnXG4gICAqXG4gICAqIEBwYXJhbXNcbiAgICogIGFuIGFycmF5IG9mIHN0cmluZ3MgY29ycmVzcG9uZGluZyB0b1xuICAgKiAgdGhlIHNpbmdsZSwgZG91YmxlLCB0cmlwbGUgLi4uIGZvcm1zIG9mIHRoZSB3b3JkIHRvXG4gICAqICBiZSBwbHVyYWxpemVkLiBXaGVuIHRoZSBudW1iZXIgdG8gYmUgcGx1cmFsaXplZFxuICAgKiAgZXhjZWVkcyB0aGUgbGVuZ3RoIG9mIHRoZSBhcmdzLCBpdCB3aWxsIHVzZSB0aGUgbGFzdFxuICAgKiAgZW50cnkgaW4gdGhlIGFycmF5LlxuICAgKlxuICAgKiAgZS5nLiBbJ3NpbmdsZScsICdkb3VibGUnLCAndHJpcGxlJywgJ211bHRpcGxlJ11cbiAgICovXG5cbiAgcGx1cmFsaXplOiBmdW5jdGlvbiBwbHVyYWxpemUodmFsdWUpIHtcbiAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcbiAgICB2YXIgbGVuZ3RoID0gYXJncy5sZW5ndGg7XG4gICAgaWYgKGxlbmd0aCA+IDEpIHtcbiAgICAgIHZhciBpbmRleCA9IHZhbHVlICUgMTAgLSAxO1xuICAgICAgcmV0dXJuIGluZGV4IGluIGFyZ3MgPyBhcmdzW2luZGV4XSA6IGFyZ3NbbGVuZ3RoIC0gMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhcmdzWzBdICsgKHZhbHVlID09PSAxID8gJycgOiAncycpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRGVib3VuY2UgYSBoYW5kbGVyIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheSA9IDMwMFxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICovXG5cbiAgZGVib3VuY2U6IGZ1bmN0aW9uIGRlYm91bmNlKGhhbmRsZXIsIGRlbGF5KSB7XG4gICAgaWYgKCFoYW5kbGVyKSByZXR1cm47XG4gICAgaWYgKCFkZWxheSkge1xuICAgICAgZGVsYXkgPSAzMDA7XG4gICAgfVxuICAgIHJldHVybiBfZGVib3VuY2UoaGFuZGxlciwgZGVsYXkpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBpbnN0YWxsR2xvYmFsQVBJIChWdWUpIHtcbiAgLyoqXG4gICAqIFZ1ZSBhbmQgZXZlcnkgY29uc3RydWN0b3IgdGhhdCBleHRlbmRzIFZ1ZSBoYXMgYW5cbiAgICogYXNzb2NpYXRlZCBvcHRpb25zIG9iamVjdCwgd2hpY2ggY2FuIGJlIGFjY2Vzc2VkIGR1cmluZ1xuICAgKiBjb21waWxhdGlvbiBzdGVwcyBhcyBgdGhpcy5jb25zdHJ1Y3Rvci5vcHRpb25zYC5cbiAgICpcbiAgICogVGhlc2UgY2FuIGJlIHNlZW4gYXMgdGhlIGRlZmF1bHQgb3B0aW9ucyBvZiBldmVyeVxuICAgKiBWdWUgaW5zdGFuY2UuXG4gICAqL1xuXG4gIFZ1ZS5vcHRpb25zID0ge1xuICAgIGRpcmVjdGl2ZXM6IGRpcmVjdGl2ZXMsXG4gICAgZWxlbWVudERpcmVjdGl2ZXM6IGVsZW1lbnREaXJlY3RpdmVzLFxuICAgIGZpbHRlcnM6IGZpbHRlcnMsXG4gICAgdHJhbnNpdGlvbnM6IHt9LFxuICAgIGNvbXBvbmVudHM6IHt9LFxuICAgIHBhcnRpYWxzOiB7fSxcbiAgICByZXBsYWNlOiB0cnVlXG4gIH07XG5cbiAgLyoqXG4gICAqIEV4cG9zZSB1c2VmdWwgaW50ZXJuYWxzXG4gICAqL1xuXG4gIFZ1ZS51dGlsID0gdXRpbDtcbiAgVnVlLmNvbmZpZyA9IGNvbmZpZztcbiAgVnVlLnNldCA9IHNldDtcbiAgVnVlWydkZWxldGUnXSA9IGRlbDtcbiAgVnVlLm5leHRUaWNrID0gbmV4dFRpY2s7XG5cbiAgLyoqXG4gICAqIFRoZSBmb2xsb3dpbmcgYXJlIGV4cG9zZWQgZm9yIGFkdmFuY2VkIHVzYWdlIC8gcGx1Z2luc1xuICAgKi9cblxuICBWdWUuY29tcGlsZXIgPSBjb21waWxlcjtcbiAgVnVlLkZyYWdtZW50RmFjdG9yeSA9IEZyYWdtZW50RmFjdG9yeTtcbiAgVnVlLmludGVybmFsRGlyZWN0aXZlcyA9IGludGVybmFsRGlyZWN0aXZlcztcbiAgVnVlLnBhcnNlcnMgPSB7XG4gICAgcGF0aDogcGF0aCxcbiAgICB0ZXh0OiB0ZXh0LFxuICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZSxcbiAgICBkaXJlY3RpdmU6IGRpcmVjdGl2ZSxcbiAgICBleHByZXNzaW9uOiBleHByZXNzaW9uXG4gIH07XG5cbiAgLyoqXG4gICAqIEVhY2ggaW5zdGFuY2UgY29uc3RydWN0b3IsIGluY2x1ZGluZyBWdWUsIGhhcyBhIHVuaXF1ZVxuICAgKiBjaWQuIFRoaXMgZW5hYmxlcyB1cyB0byBjcmVhdGUgd3JhcHBlZCBcImNoaWxkXG4gICAqIGNvbnN0cnVjdG9yc1wiIGZvciBwcm90b3R5cGFsIGluaGVyaXRhbmNlIGFuZCBjYWNoZSB0aGVtLlxuICAgKi9cblxuICBWdWUuY2lkID0gMDtcbiAgdmFyIGNpZCA9IDE7XG5cbiAgLyoqXG4gICAqIENsYXNzIGluaGVyaXRhbmNlXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBleHRlbmRPcHRpb25zXG4gICAqL1xuXG4gIFZ1ZS5leHRlbmQgPSBmdW5jdGlvbiAoZXh0ZW5kT3B0aW9ucykge1xuICAgIGV4dGVuZE9wdGlvbnMgPSBleHRlbmRPcHRpb25zIHx8IHt9O1xuICAgIHZhciBTdXBlciA9IHRoaXM7XG4gICAgdmFyIGlzRmlyc3RFeHRlbmQgPSBTdXBlci5jaWQgPT09IDA7XG4gICAgaWYgKGlzRmlyc3RFeHRlbmQgJiYgZXh0ZW5kT3B0aW9ucy5fQ3Rvcikge1xuICAgICAgcmV0dXJuIGV4dGVuZE9wdGlvbnMuX0N0b3I7XG4gICAgfVxuICAgIHZhciBuYW1lID0gZXh0ZW5kT3B0aW9ucy5uYW1lIHx8IFN1cGVyLm9wdGlvbnMubmFtZTtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKCEvXlthLXpBLVpdW1xcdy1dKiQvLnRlc3QobmFtZSkpIHtcbiAgICAgICAgd2FybignSW52YWxpZCBjb21wb25lbnQgbmFtZTogXCInICsgbmFtZSArICdcIi4gQ29tcG9uZW50IG5hbWVzICcgKyAnY2FuIG9ubHkgY29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjYXRlcnMgYW5kIHRoZSBoeXBoZW4uJyk7XG4gICAgICAgIG5hbWUgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgU3ViID0gY3JlYXRlQ2xhc3MobmFtZSB8fCAnVnVlQ29tcG9uZW50Jyk7XG4gICAgU3ViLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3VwZXIucHJvdG90eXBlKTtcbiAgICBTdWIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3ViO1xuICAgIFN1Yi5jaWQgPSBjaWQrKztcbiAgICBTdWIub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhTdXBlci5vcHRpb25zLCBleHRlbmRPcHRpb25zKTtcbiAgICBTdWJbJ3N1cGVyJ10gPSBTdXBlcjtcbiAgICAvLyBhbGxvdyBmdXJ0aGVyIGV4dGVuc2lvblxuICAgIFN1Yi5leHRlbmQgPSBTdXBlci5leHRlbmQ7XG4gICAgLy8gY3JlYXRlIGFzc2V0IHJlZ2lzdGVycywgc28gZXh0ZW5kZWQgY2xhc3Nlc1xuICAgIC8vIGNhbiBoYXZlIHRoZWlyIHByaXZhdGUgYXNzZXRzIHRvby5cbiAgICBjb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgU3ViW3R5cGVdID0gU3VwZXJbdHlwZV07XG4gICAgfSk7XG4gICAgLy8gZW5hYmxlIHJlY3Vyc2l2ZSBzZWxmLWxvb2t1cFxuICAgIGlmIChuYW1lKSB7XG4gICAgICBTdWIub3B0aW9ucy5jb21wb25lbnRzW25hbWVdID0gU3ViO1xuICAgIH1cbiAgICAvLyBjYWNoZSBjb25zdHJ1Y3RvclxuICAgIGlmIChpc0ZpcnN0RXh0ZW5kKSB7XG4gICAgICBleHRlbmRPcHRpb25zLl9DdG9yID0gU3ViO1xuICAgIH1cbiAgICByZXR1cm4gU3ViO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHN1Yi1jbGFzcyBjb25zdHJ1Y3RvciB3aXRoIHRoZVxuICAgKiBnaXZlbiBuYW1lLiBUaGlzIGdpdmVzIHVzIG11Y2ggbmljZXIgb3V0cHV0IHdoZW5cbiAgICogbG9nZ2luZyBpbnN0YW5jZXMgaW4gdGhlIGNvbnNvbGUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgKi9cblxuICBmdW5jdGlvbiBjcmVhdGVDbGFzcyhuYW1lKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tbmV3LWZ1bmMgKi9cbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdyZXR1cm4gZnVuY3Rpb24gJyArIGNsYXNzaWZ5KG5hbWUpICsgJyAob3B0aW9ucykgeyB0aGlzLl9pbml0KG9wdGlvbnMpIH0nKSgpO1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tbmV3LWZ1bmMgKi9cbiAgfVxuXG4gIC8qKlxuICAgKiBQbHVnaW4gc3lzdGVtXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwbHVnaW5cbiAgICovXG5cbiAgVnVlLnVzZSA9IGZ1bmN0aW9uIChwbHVnaW4pIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAocGx1Z2luLmluc3RhbGxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBhZGRpdGlvbmFsIHBhcmFtZXRlcnNcbiAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcbiAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG4gICAgaWYgKHR5cGVvZiBwbHVnaW4uaW5zdGFsbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcGx1Z2luLmluc3RhbGwuYXBwbHkocGx1Z2luLCBhcmdzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGx1Z2luLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH1cbiAgICBwbHVnaW4uaW5zdGFsbGVkID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQXBwbHkgYSBnbG9iYWwgbWl4aW4gYnkgbWVyZ2luZyBpdCBpbnRvIHRoZSBkZWZhdWx0XG4gICAqIG9wdGlvbnMuXG4gICAqL1xuXG4gIFZ1ZS5taXhpbiA9IGZ1bmN0aW9uIChtaXhpbikge1xuICAgIFZ1ZS5vcHRpb25zID0gbWVyZ2VPcHRpb25zKFZ1ZS5vcHRpb25zLCBtaXhpbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhc3NldCByZWdpc3RyYXRpb24gbWV0aG9kcyB3aXRoIHRoZSBmb2xsb3dpbmdcbiAgICogc2lnbmF0dXJlOlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAgICogQHBhcmFtIHsqfSBkZWZpbml0aW9uXG4gICAqL1xuXG4gIGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgVnVlW3R5cGVdID0gZnVuY3Rpb24gKGlkLCBkZWZpbml0aW9uKSB7XG4gICAgICBpZiAoIWRlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgKGNvbW1vblRhZ1JFLnRlc3QoaWQpIHx8IHJlc2VydmVkVGFnUkUudGVzdChpZCkpKSB7XG4gICAgICAgICAgICB3YXJuKCdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgKyAnaWQ6ICcgKyBpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiBpc1BsYWluT2JqZWN0KGRlZmluaXRpb24pKSB7XG4gICAgICAgICAgaWYgKCFkZWZpbml0aW9uLm5hbWUpIHtcbiAgICAgICAgICAgIGRlZmluaXRpb24ubmFtZSA9IGlkO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZpbml0aW9uID0gVnVlLmV4dGVuZChkZWZpbml0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdID0gZGVmaW5pdGlvbjtcbiAgICAgICAgcmV0dXJuIGRlZmluaXRpb247XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gZXhwb3NlIGludGVybmFsIHRyYW5zaXRpb24gQVBJXG4gIGV4dGVuZChWdWUudHJhbnNpdGlvbiwgdHJhbnNpdGlvbik7XG59XG5cbmluc3RhbGxHbG9iYWxBUEkoVnVlKTtcblxuVnVlLnZlcnNpb24gPSAnMS4wLjI2JztcblxuLy8gZGV2dG9vbHMgZ2xvYmFsIGhvb2tcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgaWYgKGNvbmZpZy5kZXZ0b29scykge1xuICAgIGlmIChkZXZ0b29scykge1xuICAgICAgZGV2dG9vbHMuZW1pdCgnaW5pdCcsIFZ1ZSk7XG4gICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGluQnJvd3NlciAmJiAvQ2hyb21lXFwvXFxkKy8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdEb3dubG9hZCB0aGUgVnVlIERldnRvb2xzIGZvciBhIGJldHRlciBkZXZlbG9wbWVudCBleHBlcmllbmNlOlxcbicgKyAnaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1kZXZ0b29scycpO1xuICAgIH1cbiAgfVxufSwgMCk7XG5cbm1vZHVsZS5leHBvcnRzID0gVnVlO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L1Z1ZS9kaXN0L3Z1ZS5jb21tb24uanNcbiAqKiBtb2R1bGUgaWQgPSA0M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvY29tcG9uZW50cy91aS9pY29uJztcbiAgICBAaW1wb3J0ICcuL2FwaS10YWJsZSc7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9hcGktdGFibGUuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5leHBvcnQgZGVmYXVsdCB7XG4gIHByb3BzOiB7XG4gICAgaXRlbXM6IHtcbiAgICAgIHR5cGU6IEFycmF5XG4gICAgfVxuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBpbmRleC52dWU/N2ZhMzBmNjNcbiAqKi8iLCI8c3R5bGUgbGFuZz1cInNhc3NcIj5cbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuICAgIEBpbXBvcnQgJy4vc2lkZS1uYXYnO1xuPC9zdHlsZT5cblxuPHRlbXBsYXRlIHNyYz1cIi4vc2lkZS1uYXYuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5sZXQgY2xhc3NOYW1lID0gJ2h5X3UtaGlkZSc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIG1ldGhvZHM6IHtcbiAgICBzaG93TmF2KCkge1xuICAgICAgdGhpcy4kZWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuICAgIH0sXG4gICAgaGlkZU5hdigpIHtcbiAgICAgIGxldCBjbGFzc2VzID0gdGhpcy4kZWwuY2xhc3NOYW1lLnNwbGl0KCcgJyk7XG4gICAgICBjbGFzc2VzLnB1c2goY2xhc3NOYW1lKTtcbiAgICAgIHRoaXMuJGVsLmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbignICcpO1xuICAgIH1cbiAgfSxcbiAgZXZlbnRzOiB7XG4gICAgJ3RvZ2dsZTo6c2l0ZU5hdicoKSB7XG4gICAgICBpZiAodGhpcy4kZWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcbiAgICAgICAgdGhpcy5zaG93TmF2KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhpZGVOYXYoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGluZGV4LnZ1ZT8yNmYwODc4YlxuICoqLyIsIjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnLi9zaXRlLWhlYWRlcic7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9zaXRlLWhlYWRlci5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbWV0aG9kczoge1xuICAgIHRvZ2dsZU5hdigpIHtcbiAgICAgIHRoaXMuJHJvb3QuJGJyb2FkY2FzdCgndG9nZ2xlOjpzaXRlTmF2Jyk7XG4gICAgfVxuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBpbmRleC52dWU/MGMwYjc2M2RcbiAqKi8iLCI8dGVtcGxhdGU+XG4gIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG4gICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG4gICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+QWxlcnQ8L2gyPlxuICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cbiAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuICAgICAgICAgICA8YWxlcnQgdHlwZT1cImVycm9yXCI+VGhpcyBpcyBhbiBlcnJvciBhbGVydC48L2FsZXJ0PlxuICAgICAgICAgICA8YWxlcnQgdHlwZT1cImluZm9cIj5UaGlzIGlzIGFuIGluZm8gYWxlcnQuPC9hbGVydD5cbiAgICAgICAgICAgPGFsZXJ0IHR5cGU9XCJzdWNjZXNzXCI+VGhpcyBpcyBhIHN1Y2Nlc3MgYWxlcnQuPC9hbGVydD5cbiAgICAgICAgICAgPGFsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOmRpc21pc3NpYmxlPVwiZmFsc2VcIj5UaGlzIGlzIG5vdCBhIGRpc21pc3NpYmxlIGFsZXJ0LjwvYWxlcnQ+XG4gICAgICAgICAgIDxhbGVydCB0eXBlPVwic3VjY2Vzc1wiIDpvbi1jbG9zZWQ9XCJkaXNtaXNzQ2FsbEJhY2tcIj5UaGlzIGlzIGFuIGFsZXJ0IHdpdGggY2FsbGJhY2suPC9hbGVydD5cbiAgICAgICAgICAgPGFsZXJ0IHR5cGU9XCJpbmZvXCIgOnRpbWVvdXQ9XCI1MDAwXCI+VGhpcyBhbGVydCBzaG91bGQgdGltZW91dCBpbiA1IHNlY29uZHMuPC9hbGVydD5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiSFRNTFwiPlxuICAgICAgICAgICA8cHJlPlxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuJmx0O2FsZXJ0IHR5cGU9XCJlcnJvclwiJmd0O1RoaXMgaXMgYW4gZXJyb3IgYWxlcnQuJmx0Oy9hbGVydCZndDtcbiZsdDthbGVydCB0eXBlPVwiaW5mb1wiJmd0O1RoaXMgaXMgYW4gaW5mbyBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xuJmx0O2FsZXJ0IHR5cGU9XCJzdWNjZXNzXCImZ3Q7VGhpcyBpcyBhIHN1Y2Nlc3MgYWxlcnQuJmx0Oy9hbGVydCZndDtcbiZsdDthbGVydCB0eXBlPVwic3VjY2Vzc1wiIDpkaXNtaXNzaWJsZT1cImZhbHNlXCImZ3Q7VGhpcyBpcyBub3QgYSBkaXNtaXNzaWJsZSBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xuJmx0O2FsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOm9uLWNsb3NlZD1cImRpc21pc3NDYWxsQmFja1wiJmd0O1RoaXMgaXMgYW4gYWxlcnQgd2l0aCBjYWxsYmFjay4mbHQ7L2FsZXJ0Jmd0O1xuJmx0O2FsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOnRpbWVvdXQ9XCI1MDAwXCImZ3Q7VGhpcyBhbGVydCBzaG91bGQgdGltZW91dCBpbiA1IHNlY29uZHMuJmx0Oy9hbGVydCZndDtcbiAgICAgICAgICAgICA8L2NvZGU+XG4gICAgICAgICAgIDwvcHJlPlxuICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk8L2gzPlxuICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG4gICAgICA8L2Rpdj5cblxuICAgPC9kaXY+XG4gIDwvc2VjdGlvbj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5pbXBvcnQgQXBpVGFibGUgZnJvbSAnLi4vY29tcG9uZW50cy9hcGktdGFibGUvaW5kZXgudnVlJztcbmV4cG9ydCBkZWZhdWx0IHtcbiAgY29tcG9uZW50czoge1xuICAgIEFwaVRhYmxlXG4gIH0sXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpc21pc3NDYWxsQmFjaygpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2FsZXJ0ISEhJyk7XG4gICAgICB9LFxuICAgICAgYXBpSXRlbXM6IFt7XG4gICAgICAgIG5hbWU6ICd0eXBlJyxcbiAgICAgICAgdHlwZTogJ1N0cmluZycsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAnVGhlIHR5cGUgb2YgYWxlcnQgKGVycm9yLCBpbmZvLCBzdWNjZXNzKSdcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ2Rpc21pc3NpYmxlJyxcbiAgICAgICAgdHlwZTogJ0Jvb2xlYW4nLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogdHJ1ZSxcbiAgICAgICAgZGVzYzogJ0lzIHRoZSBhbGVydCBkaXNtaXNzaWJsZT8nXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICd0aW1lb3V0JyxcbiAgICAgICAgdHlwZTogJ051bWJlcicsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0OiAtMSxcbiAgICAgICAgZGVzYzogJ1RoZSBkdXJhdGlvbiBhbGVydCBzdGF5cyBvbiBzY3JlZW4gaW4gbXMnXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdvbkNsb3NlZCcsXG4gICAgICAgIHR5cGU6ICdGdW5jdGlvbicsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ0NhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIGFsZXJ0IGlzIGNsb3NlZC4nXG4gICAgICB9XVxuICAgIH07XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGFsZXJ0LXBhZ2UudnVlPzc5YTRkZTg2XG4gKiovIiwiPHRlbXBsYXRlPlxuICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuICAgPGRpdiBjbGFzcz1cImh5X28td3JhcHBlclwiPlxuICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPkNvbGxhcHNhYmxlIFBhbmVsPC9oMj5cbiAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG4gICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cbiAgICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiUGFuZWwgMVwiIDppcy1vcGVuPVwidHJ1ZVwiPlxuICAgICAgICAgICAgUGFuZWwgMSBjb250ZW50XG4gICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cbiAgICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiUGFuZWwgMlwiPlxuICAgICAgICAgICAgUGFuZWwgMiBjb250ZW50XG4gICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cbiAgICAgICAgICAgPHByZT5cbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cbiZsdDtjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIlBhbmVsIDFcIiA6aXMtb3Blbj1cInRydWVcIiZndDtcbiBQYW5lbCAxIGNvbnRlbnRcbiZsdDsvY29sbGFwc2FibGUtcGFuZWwmZ3Q7XG4mbHQ7Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJQYW5lbCAyXCImZ3Q7XG4gUGFuZWwgMiBjb250ZW50XG4mbHQ7L2NvbGxhcHNhYmxlLXBhbmVsJmd0O1xuICAgICAgICAgICAgIDwvY29kZT5cbiAgICAgICAgICAgPC9wcmU+XG4gICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuICAgICAgPC9kaXY+XG4gICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG4gICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cbiAgICAgIDwvZGl2PlxuXG4gICA8L2Rpdj5cbiAgPC9zZWN0aW9uPlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmltcG9ydCBBcGlUYWJsZSBmcm9tICcuLi9jb21wb25lbnRzL2FwaS10YWJsZS9pbmRleC52dWUnO1xuZXhwb3J0IGRlZmF1bHQge1xuICBjb21wb25lbnRzOiB7XG4gICAgQXBpVGFibGVcbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYXBpSXRlbXM6IFt7XG4gICAgICAgIG5hbWU6ICdsYWJlbCcsXG4gICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ1RoZSBsYWJsZSBvZiB0aGUgcGFuZWwnXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdpc09wZW4nLFxuICAgICAgICB0eXBlOiAnQm9vbGVhbicsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgZGVzYzogJ0lzIHRoZSBwYW5lbCBvcGVuLidcbiAgICAgIH1dXG4gICAgfTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogY29sbGFwc2FibGUtcGFuZWwtcGFnZS52dWU/MDkxMmIxYmRcbiAqKi8iLCI8dGVtcGxhdGU+XG4gIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG4gICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG4gICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+TGVnYWwgU3lzdGVtPC9oMj5cbiAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG4gICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cbiAgICAgICAgICAgPHAgY2xhc3M9XCJoeV9jLWNvcHkgaHlfYy1jb3B5LS1ib2R5IGh5X3QtZ3JleVwiPlxuICAgICAgICAgICAgIExvcmVtIGlwc3VtPGxlZ2FsLWNvdW50ZXJcbiAgICAgICAgICAgICAgIHYtb3ZlcmxheS1vcGVuZXI9XCJsZWdhbC1vdmVybGF5XCJcbiAgICAgICAgICAgICAgIGxlZ2FsLWtleT1cImhzLXJlZmVycmFsLXRlcm1zXCJcbiAgICAgICAgICAgICAgIGxlZ2FsLWxhbmc9XCJlblwiIGxlZ2FsLXJlZ2lvbj1cImJjXCJcbiAgICAgICAgICAgICAgID48L2xlZ2FsLWNvdW50ZXI+IGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQsXG4gICAgICAgICAgICAgc2VkIGRvIGVpdXNtb2QgdGVtcG9yIGluY2lkaWR1bnQgdXQgbGFib3JlIGV0IGRvbG9yZSBtYWduYSBhbGlxdWEuXG4gICAgICAgICAgICAgPGxlZ2FsLWNvdW50ZXJcbiAgICAgICAgICAgICAgIHYtb3ZlcmxheS1vcGVuZXI9XCJsZWdhbC1vdmVybGF5XCJcbiAgICAgICAgICAgICAgIGxlZ2FsLWtleT1cIjEteWVhci1vZmZlci1zdGltXCJcbiAgICAgICAgICAgICAgIGxlZ2FsLWxhbmc9XCJlblwiIGxlZ2FsLXJlZ2lvbj1cImJjXCJcbiAgICAgICAgICAgICAgID48L2xlZ2FsLWNvdW50ZXI+XG4gICAgICAgICAgICAgPC9wPlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8bGVnYWwtY29udGFpbmVyPjwvbGVnYWwtY29udGFpbmVyPlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG4gICAgICAgICAgIDxwcmU+XG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG4mbHQ7bGVnYWwtY291bnRlclxuICBsZWdhbC1rZXk9XCJocy1yZWZlcnJhbC10ZXJtc1wiXG4gIGxlZ2FsLWxhbmc9XCJlblwiXG4gIGxlZ2FsLXJlZ2lvbj1cImJjXCJcbiZsdDsvbGVnYWwtY291bnRlciZndDtcbiZsdDtsZWdhbC1jb250YWluZXImZ3Q7Jmx0Oy9sZWdhbC1jb250YWluZXImZ3Q7XG4gICAgICAgICAgICAgPC9jb2RlPlxuICAgICAgICAgICA8L3ByZT5cbiAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJqYXZhc2NyaXB0XCI+XG4gICAgICAgICAgIDxwcmU+XG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1qYXZhc2NyaXB0XCI+XG5sZXQgdm0gPSBuZXcgVnVlKHtcbiBlbDogJ2JvZHknLFxuIGRhdGEoKSB7XG4gICByZXR1cm4ge1xuICAgICBsaWdlckVuZFBvaW50OiAnaHR0cHM6Ly9hcGkuY21zLnRlbHVzLmNvbS9sZWdhbHMnLFxuICAgICBsaWdlckFwcGxpY2F0aW9uS2V5OiAnYjk3MzhkNjdiODlkZmM3ODI3NDZkNGE5Y2Y0YTEwOTMnXG4gICB9O1xuIH0sXG4gY29tcG9uZW50czoge1xuICAgTGVnYWxDb3VudGVyLFxuICAgTGVnYWxDb250YWluZXJcbiB9XG59KTtcbiAgICAgICAgICAgICA8L2NvZGU+XG4gICAgICAgICAgIDwvcHJlPlxuICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk6IExlZ2FsIENvdW50ZXI8L2gzPlxuICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG4gICAgICA8L2Rpdj5cbiAgIDwvZGl2PlxuICA8L3NlY3Rpb24+XG5cblxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmltcG9ydCBBcGlUYWJsZSBmcm9tICcuLi9jb21wb25lbnRzL2FwaS10YWJsZS9pbmRleC52dWUnO1xuZXhwb3J0IGRlZmF1bHQge1xuICBjb21wb25lbnRzOiB7XG4gICAgQXBpVGFibGVcbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYXBpSXRlbXM6IFt7XG4gICAgICAgIG5hbWU6ICdsZWdhbEtleScsXG4gICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ3RoZSBrZXkgb2YgbGVnYWwgaW4gY21zJ1xuICAgICAgfSwge1xuICAgICAgICBuYW1lOiAnbGVnYWxMYW5nJyxcbiAgICAgICAgdHlwZTogJ1N0cmluZycsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAndGhlIGxhbmd1YWdlIG9mIGxlZ2FsIGluIGNtcydcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ2xlZ2FsUmVnaW9uJyxcbiAgICAgICAgdHlwZTogJ1N0cmluZycsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAndGhlIHJlZ2lvbiBvZiBsZWdhbCBpbiBjbXMnXG4gICAgICB9XVxuICAgIH07XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGxlZ2FsLXBhZ2UudnVlPzI2NTdlNWYxXG4gKiovIiwiPHRlbXBsYXRlPlxuICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuICAgPGRpdiBjbGFzcz1cImh5X28td3JhcHBlclwiPlxuICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPk92ZXJsYXkgU3lzdGVtPC9oMj5cbiAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG4gICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cbiAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgPGJ1dHRvbiB2LW92ZXJsYXktb3BlbmVyPVwib3ZlcmxheS0xXCIgY2xhc3M9XCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tbGluayBoeV90LXB1cnBsZVwiIHR5cGU9XCJidXR0b25cIiByb2xlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICBPcGVuIG92ZXJsYXkgIzEgPGkgY2xhc3M9XCJoeV9jLWljb24gaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkIGh5X2MtYnV0dG9uX19pY29uXCI+PC9pPlxuICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICA8L3A+XG4gICAgICAgICAgIDxwPlxuICAgICAgICAgICAgIDxidXR0b24gdi1vdmVybGF5LW9wZW5lcj1cIm92ZXJsYXktMlwiIGNsYXNzPVwiaHlfYy1idXR0b24gaHlfYy1idXR0b24tLWxpbmsgaHlfdC1wdXJwbGVcIiB0eXBlPVwiYnV0dG9uXCIgcm9sZT1cImJ1dHRvblwiPlxuICAgICAgICAgICAgICAgT3BlbiBvdmVybGF5ICMyIDxpIGNsYXNzPVwiaHlfYy1pY29uIGh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZCBoeV9jLWJ1dHRvbl9faWNvblwiPjwvaT5cbiAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgPC9wPlxuICAgICAgICAgICA8b3ZlcmxheS1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgICA8b3ZlcmxheSBvdmVybGF5LWtleT1cIm92ZXJsYXktMVwiPlxuICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XCIgc2xvdD1cIm92ZXJsYXktaGVhZGVyXCI+VGhpcyBpcyBvdmVybGF5ICMxPC9oND5cbiAgICAgICAgICAgICAgICAgICAgPGFydGljbGUgc2xvdD1cIm92ZXJsYXktYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgT3ZlcmxheSAjMSBib2R5XG4gICAgICAgICAgICAgICAgICAgIDwvYXJ0aWNsZT5cbiAgICAgICAgICAgICAgICAgIDwvb3ZlcmxheT5cbiAgICAgICAgICAgICAgICAgIDxvdmVybGF5IG92ZXJsYXkta2V5PVwib3ZlcmxheS0yXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcIiBzbG90PVwib3ZlcmxheS1oZWFkZXJcIj5UaGlzIGlzIG92ZXJsYXkgIzI8L2g0PlxuICAgICAgICAgICAgICAgICAgICA8YXJ0aWNsZSBzbG90PVwib3ZlcmxheS1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICBPdmVybGF5ICMyIGJvZHlcbiAgICAgICAgICAgICAgICAgICAgPC9hcnRpY2xlPlxuICAgICAgICAgICAgICAgICAgPC9vdmVybGF5PlxuICAgICAgICAgIDwvb3ZlcmxheS1jb250YWluZXI+XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cbiAgICAgICAgICAgPHByZT5cbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cbiZsdDtvdmVybGF5LWNvbnRhaW5lciZndDtcbiAmbHQ7b3ZlcmxheSBvdmVybGF5LWtleT1cIm92ZXJsYXktMVwiJmd0O1xuICAgJmx0O2g0ICBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcIiBzbG90PVwib3ZlcmxheS1oZWFkZXJcIiZndDtcbiAgIFRoaXMgaXMgb3ZlcmxheSAjMVxuICAgJmx0Oy9oNCZndDtcbiAgICZsdDthcnRpY2xlIHNsb3Q9XCJvdmVybGF5LWJvZHlcIiZndDtcbiAgICAgT3ZlcmxheSAjMSBib2R5XG4gICAmbHQ7L2FydGljbGUmZ3Q7XG4gJmx0Oy9vdmVybGF5Jmd0O1xuICZsdDtvdmVybGF5IG92ZXJsYXkta2V5PVwib3ZlcmxheS0yXCImZ3Q7XG4gICAmbHQ7aDQgIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFwiIHNsb3Q9XCJvdmVybGF5LWhlYWRlclwiJmd0O1xuICAgVGhpcyBpcyBvdmVybGF5ICMxXG4gICAmbHQ7L2g0Jmd0O1xuICAgJmx0O2FydGljbGUgc2xvdD1cIm92ZXJsYXktYm9keVwiJmd0O1xuICAgICBPdmVybGF5ICMyIGJvZHlcbiAgICZsdDsvYXJ0aWNsZSZndDtcbiAmbHQ7L292ZXJsYXkmZ3Q7XG4mbHQ7L292ZXJsYXktY29udGFpbmVyJmd0O1xuICAgICAgICAgICAgIDwvY29kZT5cbiAgICAgICAgICAgPC9wcmU+XG4gICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuICAgICAgPC9kaXY+XG4gICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG4gICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cbiAgICAgIDwvZGl2PlxuICAgPC9kaXY+XG4gIDwvc2VjdGlvbj5cblxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmltcG9ydCBBcGlUYWJsZSBmcm9tICcuLi9jb21wb25lbnRzL2FwaS10YWJsZS9pbmRleC52dWUnO1xuZXhwb3J0IGRlZmF1bHQge1xuICBjb21wb25lbnRzOiB7XG4gICAgQXBpVGFibGVcbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYXBpSXRlbXM6IFt7XG4gICAgICAgIG5hbWU6ICdvdmVybGF5S2V5JyxcbiAgICAgICAgdHlwZTogJ1N0cmluZycsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAnVGhlIGtleSBvZiB0aGUgb3ZlcmxheS4gVXNlZCBieSB0aGUgb3ZlcmxheSBvcGVuZXIgZGlyZWN0aXZlIHRvIHRhcmdldCB0aGUgb3ZlcmxleS4nXG4gICAgICB9XVxuICAgIH07XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIG92ZXJsYXktcGFnZS52dWU/OWQ2Mzc5NzZcbiAqKi8iLCI8dGVtcGxhdGU+XG4gIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG4gICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG4gICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+U3Bpbm5lcjwvaDI+XG4gICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG4gICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImh5X2MtY29udHJvbCBoeV9jLWNvbnRyb2wtLWNoZWNrYm94XCIgPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJoeV9jLWNvbnRyb2xfX2xhYmVsLXRleHRcIj5GdWxsIFNjcmVlbjwvc3Bhbj5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiAgdi1tb2RlbD1cImlzRnVsbFNjcmVlblwiIC8+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaHlfYy1jb250cm9sX19pbmRpY2F0b3JcIj48L2Rpdj5cbiAgICAgICAgICA8L2xhYmVsPlxuXG4gICAgICAgICAgPGJ1dHRvbiBAY2xpY2s9XCJzaG93U3Bpbm5lclwiIGNsYXNzPVwiaHlfYy1idXR0b24gaHlfYy1idXR0b24tLXJhaXNlZCBoeV90LWdyZWVuXCIgdHlwZT1cImJ1dHRvblwiPlxuICAgICAgICAgICAgU2hvdyBTcGlubmVyXG4gICAgICAgICAgPC9idXR0b24+XG5cblxuXG4gICAgICAgICAgIDxzcGlubmVyIDpmdWxsLXNjcmVlbj1cImlzRnVsbFNjcmVlblwiIDp0ZXh0PVwibXNnXCI+PC9zcGlubmVyPlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG4gICAgICAgICAgIDxwcmU+XG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG4mbHQ7c3Bpbm5lciB0ZXh0PVwiSSB3aWxsIGNsb3NlIGluIDMgc2Vjb25kc1wiIDpmdWxsLXNjcmVlbj1cInRydWVcIiZndDsmbHQ7L3NwaW5uZXImZ3Q7XG4gICAgICAgICAgICAgPC9jb2RlPlxuICAgICAgICAgICA8L3ByZT5cbiAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJPC9oMz5cbiAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuICAgICAgPC9kaXY+XG5cbiAgIDwvZGl2PlxuICA8L3NlY3Rpb24+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuaW1wb3J0IEFwaVRhYmxlIGZyb20gJy4uL2NvbXBvbmVudHMvYXBpLXRhYmxlL2luZGV4LnZ1ZSc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIGNvbXBvbmVudHM6IHtcbiAgICBBcGlUYWJsZVxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgc2hvd1NwaW5uZXIoKSB7XG4gICAgICB0aGlzLl9yZXNldE1zZygpO1xuICAgICAgdGhpcy4kcm9vdC4kYnJvYWRjYXN0KCdzaG93OjpzcGlubmVyJyk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy4kcm9vdC4kYnJvYWRjYXN0KCdoaWRlOjpzcGlubmVyJyk7XG4gICAgICB9LCAzMDAwKTtcbiAgICB9LFxuICAgIF9yZXNldE1zZygpIHtcbiAgICAgIGxldCBjb3VudGVyID0gMztcbiAgICAgIGxldCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgaWYgKGNvdW50ZXIgPiAwKSB7XG4gICAgICAgICAgY291bnRlciAtLTtcbiAgICAgICAgICB0aGlzLm1zZyA9IGBJIHdpbGwgY2xvc2UgaW4gJHtjb3VudGVyfSBzZWNvbmRzYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgfVxuICAgICAgfSwgMTAwMCk7XG4gICAgICB0aGlzLm1zZyA9IGBJIHdpbGwgY2xvc2UgaW4gJHtjb3VudGVyfSBzZWNvbmRzYDtcbiAgICB9XG4gIH0sXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1zZzogJycsXG4gICAgICBpc0Z1bGxTY3JlZW46IGZhbHNlLFxuICAgICAgYXBpSXRlbXM6IFt7XG4gICAgICAgIG5hbWU6ICdmdWxsU2NyZWVuJyxcbiAgICAgICAgdHlwZTogJ0Jvb2xlYW4nLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgICAgIGRlc2M6ICdTaG91bGQgdGhlIHNwaW5uZXIgdGFrZSBmdWxsIHNjcmVlbidcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ3RleHQnLFxuICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHQ6ICdcXCdcXCcnLFxuICAgICAgICBkZXNjOiAnVGhlIHRleHQgb2YgdGhlIHNwaW5uZXIuIERlZmF1bHQgZW1wdHknXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdzaG93OjpzcGlubmVyJyxcbiAgICAgICAgdHlwZTogJ0V2ZW50JyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAnQWN0aXZlIHRoZSBzcGlubmVyJ1xuICAgICAgfSwge1xuICAgICAgICBuYW1lOiAnaGlkZTo6c3Bpbm5lcicsXG4gICAgICAgIHR5cGU6ICdFdmVudCcsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ0hpZGUgdGhlIHNwaW5uZXInXG4gICAgICB9XVxuICAgIH07XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNwaW5uZXItcGFnZS52dWU/MzcyN2Q1ODBcbiAqKi8iLCI8dGVtcGxhdGU+XG4gIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG4gICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG4gICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+U3RlcCBUcmFja2VyPC9oMj5cbiAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG4gICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cbiAgICAgICAgICAgPHN0ZXAtdHJhY2tlciA6Y3VycmVudC1zdGVwPVwic3RlcFRyYWNrZXJDdXJyZW50U3RlcFwiIDpjb25maWc9XCJzdGVwVHJhY2tlckNvbmZpZ1wiPjwvc3RlcC10cmFja2VyPlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG4gICAgICAgPHByZT5cbiAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuJmx0O3N0ZXAtdHJhY2tlclxuOmN1cnJlbnQtc3RlcD1cInN0ZXBUcmFja2VyQ3VycmVudFN0ZXBcIlxuOmNvbmZpZz1cInN0ZXBUcmFja2VyQ29uZmlnXCImZ3Q7XG4mbHQ7L3N0ZXAtdHJhY2tlciZndDtcbiAgICAgICAgIDwvY29kZT5cbiAgICAgICA8L3ByZT5cbiAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJqYXZhc2NyaXB0XCI+XG4gICAgICAgICAgIDxwcmU+XG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1qc1wiPlxubGV0IHN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAyO1xubGV0IHN0ZXBUcmFja2VyQ29uZmlnID0ge1xuICBpc0NsaWNrYWJsZTogdHJ1ZSxcbiAgc3RlcHM6IFtcbiAgICB7XG4gICAgICB0aXRsZTogJ1N0ZXAgQScsXG4gICAgICBsaW5rOiAnJyxcbiAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICB0aXRsZTogJ1N0ZXAgQicsXG4gICAgICBsaW5rOiAnJyxcbiAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICB0aXRsZTogJ1N0ZXAgQycsXG4gICAgICBsaW5rOiAnJyxcbiAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMjtcbiAgICAgIH1cbiAgICB9XG4gIF1cbn07XG5sZXQgdm0gPSBuZXcgVnVlKHtcbiAgZWw6ICdib2R5JyxcbiAgZGF0YToge1xuICAgIHN0ZXBUcmFja2VyQ29uZmlnLFxuICAgIHN0ZXBUcmFja2VyQ3VycmVudFN0ZXBcbn0sXG4gIGNvbXBvbmVudHM6IHtcbiAgICBTdGVwVHJhY2tlclxuICB9XG59KTtcbiAgICAgICAgICAgICA8L2NvZGU+XG4gICAgICAgICAgIDwvcHJlPlxuICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk8L2gzPlxuICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG4gICAgICA8L2Rpdj5cbiAgIDwvZGl2PlxuICA8L3NlY3Rpb24+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuaW1wb3J0IEFwaVRhYmxlIGZyb20gJy4uL2NvbXBvbmVudHMvYXBpLXRhYmxlL2luZGV4LnZ1ZSc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIGNvbXBvbmVudHM6IHtcbiAgICBBcGlUYWJsZVxuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGVwVHJhY2tlckN1cnJlbnRTdGVwOiAyLFxuICAgICAgc3RlcFRyYWNrZXJDb25maWc6IHtcbiAgICAgICAgaXNDbGlja2FibGU6IHRydWUsXG4gICAgICAgIHN0ZXBzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGl0bGU6ICdTdGVwIEEnLFxuICAgICAgICAgICAgbGluazogJycsXG4gICAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQicsXG4gICAgICAgICAgICBsaW5rOiAnJyxcbiAgICAgICAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiAnU3RlcCBDJyxcbiAgICAgICAgICAgIGxpbms6ICcnLFxuICAgICAgICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIGFwaUl0ZW1zOiBbe1xuICAgICAgICBuYW1lOiAnY3VycmVudFN0ZXAnLFxuICAgICAgICB0eXBlOiAnSW50ZWdlcicsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICAgIGRlc2M6ICd0b2RvJ1xuICAgICAgfSwge1xuICAgICAgICBuYW1lOiAnY29uZmlnJyxcbiAgICAgICAgdHlwZTogJ09iamVjdCcsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAndG9kbydcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ2NvbmZpZy50aXRsZScsXG4gICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ1RoZSB0aXRsZSBvZiB0aGUgc3RlcCdcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ2NvbmZpZy5saW5rJyxcbiAgICAgICAgdHlwZTogJ1N0cmluZycsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ1RoZSBsaW5rIG9mIHRoZSBzdGVwLiAnXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdjb25maWcub25DbGlja0hhbmRsZXInLFxuICAgICAgICB0eXBlOiAnRnVuY3Rpb24nLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICdUaGUgY2FsbGJhY2sgZnVuY3Rpb24gd2hlbiBzdGVwIGlzIGNsaWNrZWQuJ1xuICAgICAgfV1cbiAgICB9O1xuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzdGVwLXRyYWNrZXItcGFnZS52dWU/MDFmNGYzZDdcbiAqKi8iLCI8dGVtcGxhdGU+XG4gIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG4gICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG4gICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+VGFiPC9oMj5cbiAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG4gICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cbiAgICAgICAgICAgPHRhYnMgY2xhc3M9XCJjLXByaWNlLWxvb2t1cCBoeV9vLWxheW91dF9faXRlbSAgaHlfdS1zaXplLTNvZjNAc20gaHlfdS1zaXplLTRvZjRAbWQgaHlfdS1zaXplLTZvZjEyQGxnXCI+XG4gICAgICAgICAgICAgPHRhYiBsYWJlbD1cIlRhYiAxXCI+XG4gICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgIFRhYiAxIGNvbnRlbnRcbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgIDwvdGFiPlxuICAgICAgICAgICAgIDx0YWIgbGFiZWw9XCJUYWIgMlwiPlxuICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgIFRhYiAyIGNvbnRlbnRcbiAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICA8L3RhYj5cbiAgICAgICAgICAgICA8dGFiIGxhYmVsPVwiVGFiIDNcIiA6aXMtZGlzYWJsZWQ9XCJ0cnVlXCI+XG4gICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgVGFiIDMgY29udGVudFxuICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgIDwvdGFiPlxuICAgICAgICAgICA8L3RhYnM+XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cbiAgICAgICAgICAgPHByZT5cbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cbiZsdDt0YWJzJmd0O1xuICZsdDt0YWIgbGFiZWw9XCJUYWIgMVwiJmd0O1xuICAgJmx0O3AmZ3Q7XG4gICAgIFRhYiAxIGNvbnRlbnRcbiAgICZsdDsvcCZndDtcbiAmbHQ7L3RhYiZndDtcbiAmbHQ7dGFiIGxhYmVsPVwiVGFiIDJcIiZndDtcbiAgICZsdDtwJmd0O1xuICAgICBUYWIgMiBjb250ZW50XG4gICAmbHQ7L3AmZ3Q7XG4gJmx0Oy90YWImZ3Q7XG4gJmx0O3RhYiBsYWJlbD1cIlRhYiAzXCIgOmlzLWRpc2FibGVkPVwidHJ1ZVwiJmd0O1xuICAgJmx0O3AmZ3Q7XG4gICAgIFRhYiAzIGNvbnRlbnRcbiAgICZsdDsvcCZndDtcbiAmbHQ7L3RhYiZndDtcbiZsdDsvdGFicyZndDtcbiAgICAgICAgICAgICA8L2NvZGU+XG4gICAgICAgICAgIDwvcHJlPlxuICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk8L2gzPlxuICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG4gICAgICA8L2Rpdj5cblxuICAgPC9kaXY+XG4gIDwvc2VjdGlvbj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5pbXBvcnQgQXBpVGFibGUgZnJvbSAnLi4vY29tcG9uZW50cy9hcGktdGFibGUvaW5kZXgudnVlJztcbmV4cG9ydCBkZWZhdWx0IHtcbiAgY29tcG9uZW50czoge1xuICAgIEFwaVRhYmxlXG4gIH0sXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFwaUl0ZW1zOiBbe1xuICAgICAgICBuYW1lOiAnbGFiZWwnLFxuICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICdUaGUgbGFibGUgb2YgdGhlIHRhYidcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ2lzRGlzYWJsZWQnLFxuICAgICAgICB0eXBlOiAnQm9vbGVhbicsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgZGVzYzogJ0lzIHRoZSB0YWIgZGlzYWJsZWQgb3Igbm90LiBXaGVuIHNldCB0byB0cnVlLCB0aGUgdGFiIGlzIG5vdCBjbGlja2FibGUuJ1xuICAgICAgfV1cbiAgICB9O1xuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB0YWJzLXBhZ2UudnVlPzdhODY2YzM3XG4gKiovIiwiPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvY29tcG9uZW50cy91aS9pY29uJztcbiAgICBAaW1wb3J0ICcuLi8uLi90cmFuc2l0aW9ucy9mYWRlLnNjc3MnO1xuICAgIEBpbXBvcnQgJy4vYWxlcnQuc2Nzcyc7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9hbGVydC5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNWaXNpYmxlOiB0cnVlXG4gICAgfTtcbiAgfSxcbiAgcHJvcHM6IHtcbiAgICB0eXBlOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH0sXG4gICAgZGlzbWlzc2libGU6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiB0cnVlXG4gICAgfSxcbiAgICB0aW1lb3V0OiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBkZWZhdWx0OiAtMVxuICAgIH0sXG4gICAgb25DbG9zZWQ6IHtcbiAgICAgIHR5cGU6IEZ1bmN0aW9uXG4gICAgfVxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgZGlzbWlzcygpIHtcbiAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKCEhdGhpcy5vbkNsb3NlZCkge1xuICAgICAgICAgICAgdGhpcy5vbkNsb3NlZC5hcHBseSh0aGlzKTtcbiAgICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIHJlYWR5KCkge1xuICAgIGlmICh0aGlzLnRpbWVvdXQgPj0gMCkge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuZGlzbWlzcygpO1xuICAgICAgfSwgdGhpcy50aW1lb3V0KTtcbiAgICB9XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGluZGV4LnZ1ZT80OTlmYmVhZlxuICoqLyIsIjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL2NvbXBvbmVudHMvdWkvaWNvbic7XG4gICAgQGltcG9ydCAnLi9jb2xsYXBzYWJsZS1wYW5lbC5zY3NzJztcbjwvc3R5bGU+XG5cbjx0ZW1wbGF0ZSBzcmM9XCIuL2NvbGxhcHNhYmxlLXBhbmVsLmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuZXhwb3J0IGRlZmF1bHQge1xuICBwcm9wczoge1xuICAgIGlzT3Blbjoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgfSxcbiAgICBsYWJlbDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICB0b2dnbGVPcGVuKCRldmVudCkge1xuICAgICAgdGhpcy5pc09wZW4gPSAhdGhpcy5pc09wZW47XG4gICAgfVxuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBpbmRleC52dWU/MDVjMjI4NzBcbiAqKi8iLCJcbjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnLi9sZWdhbC1jb250YWluZXIuc2Nzcyc7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9sZWdhbC1jb250YWluZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG4gLypcbiAgKiBBUEk6IDxsZWdhbC1jb250YWluZXI+PC9sZWdhbC1jb250YWluZXI+XG4gKi9cblxuaW1wb3J0IG1peGlucyBmcm9tICcuLi8uLi9taXhpbnMnO1xuaW1wb3J0IGZpbmRJbmRleCBmcm9tICdsb2Rhc2gvZmluZEluZGV4JztcbmltcG9ydCBkZWJvdW5jZSBmcm9tICdsb2Rhc2gvZGVib3VuY2UnO1xuaW1wb3J0IHNldEZvY3VzIGZyb20gJy4uLy4uL2RpcmVjdGl2ZXMvc2V0LWZvY3VzJztcblxuZXhwb3J0IGRlZmF1bHQge1xuICBtaXhpbnMsXG4gIGRpcmVjdGl2ZXM6IHtcbiAgICBzZXRGb2N1c1xuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpbmRleGVkTGVnYWxzOiBbXSxcbiAgICAgIG5vbkluZGV4ZWRMZWdhbHM6IFtdLFxuICAgICAgYXBpTGFuZzogbnVsbCxcbiAgICAgIGFwaVJlZ2lvbjogbnVsbFxuICAgIH07XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBmZXRjaExlZ2FscyhrZXlzKSB7XG4gICAgICByZXR1cm4gZmV0Y2goYFxuICAgICAgICAgICR7dGhpcy4kcm9vdC5saWdlckVuZFBvaW50fT9sYW5nPSR7dGhpcy5hcGlMYW5nfSZyZWdpb249JHt0aGlzLmFwaVJlZ2lvbn0maHRtbD10cnVlXG4gICAgICAgIGAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgIGFwcGxpY2F0aW9uS2V5OiB0aGlzLiRyb290LmxpZ2VyQXBwbGljYXRpb25LZXlcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGtleXM6IGtleXNcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXBwZW5kUmVzcG9uc2VUb0xlZ2FsQ29udGFpbmVyKHR5cGUsIGRhdGEpIHtcbiAgICAgIGxldCBwcm9jZXNzID0gKHRhcmdldCwgZGF0YUFyeSkgPT4ge1xuICAgICAgICBkYXRhQXJ5LmZvckVhY2gobGVnYWxSZXNwb25zZSA9PiB7XG4gICAgICAgICAgbGV0IGluZGV4ID0gdGFyZ2V0LmZpbmRJbmRleChsID0+IGwua2V5ID09PSBsZWdhbFJlc3BvbnNlLmtleSk7XG4gICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIHRhcmdldC4kc2V0KGluZGV4LCB7XG4gICAgICAgICAgICAgIGNvbnRlbnQ6IGxlZ2FsUmVzcG9uc2UuY29udGVudCxcbiAgICAgICAgICAgICAga2V5OiBsZWdhbFJlc3BvbnNlLmtleVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICBpZiAodHlwZSA9PT0gJ2luZGV4ZWQnKSB7XG4gICAgICAgIHByb2Nlc3ModGhpcy5pbmRleGVkTGVnYWxzLCBkYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2Nlc3ModGhpcy5ub25JbmRleGVkTGVnYWxzLCBkYXRhKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGdldExlZ2FsczogKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGRlYm91bmNlLmNhbGwodGhpcywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGxldCBpbmRleGVkS2V5cyA9IHRoaXMuaW5kZXhlZExlZ2Fscy5tYXAobGVnYWwgPT4gbGVnYWwua2V5KTtcbiAgICAgICAgbGV0IG5vbkluZGV4ZWRLZXlzID0gdGhpcy5ub25JbmRleGVkTGVnYWxzLm1hcChsZWdhbCA9PiBsZWdhbC5rZXkpO1xuXG4gICAgICAgIGlmIChpbmRleGVkS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5mZXRjaExlZ2FscyhpbmRleGVkS2V5cylcbiAgICAgICAgICAudGhlbih0aGlzLnBhcnNlSlNPTilcbiAgICAgICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kUmVzcG9uc2VUb0xlZ2FsQ29udGFpbmVyKCdpbmRleGVkJywgZGF0YSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vbkluZGV4ZWRLZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLmZldGNoTGVnYWxzKG5vbkluZGV4ZWRLZXlzKVxuICAgICAgICAgIC50aGVuKHRoaXMucGFyc2VKU09OKVxuICAgICAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRSZXNwb25zZVRvTGVnYWxDb250YWluZXIoJ25vbkluZGV4ZWQnLCBkYXRhKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSwgMTApO1xuICAgIH0pKClcbiAgfSxcbiAgZXZlbnRzOiB7XG4gICAgJ2xlZ2FsOjpjbGljaycobGVnYWxLZXkpIHtcbiAgICAgIGxldCB0YXJnZXRMZWdhbEluZGV4ID0gdGhpcy5pbmRleGVkTGVnYWxzLmZpbmRJbmRleChsID0+IGwua2V5ID09PSBsZWdhbEtleSk7XG4gICAgICBpZiAodGFyZ2V0TGVnYWxJbmRleCA+IC0xKSB7XG4gICAgICAgIHRoaXMuaW5kZXhlZExlZ2Fscy5mb3JFYWNoKChsLCBpKSA9PiB7XG4gICAgICAgICAgaWYgKGkgIT09IHRhcmdldExlZ2FsSW5kZXgpIHtcbiAgICAgICAgICAgIGwuaXNTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmluZGV4ZWRMZWdhbHNcbiAgICAgICAgICAgIC4kc2V0KFxuICAgICAgICAgICAgICBpLFxuICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKFxuICAgICAgICAgICAgICAgIHt9LFxuICAgICAgICAgICAgICAgIHRoaXMuaW5kZXhlZExlZ2Fsc1tpXSxcbiAgICAgICAgICAgICAgICB7IGlzU2VsZWN0ZWQ6IHRydWUgfVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAnbGVnYWw6OmluaXQnKGxlZ2FsSW5pdERldGFpbCkge1xuICAgICAgdGhpcy5hcGlMYW5nID0gbGVnYWxJbml0RGV0YWlsLmxhbmc7XG4gICAgICB0aGlzLmFwaVJlZ2lvbiA9IGxlZ2FsSW5pdERldGFpbC5yZWdpb247XG4gICAgICAvLyBjaGVjayBpZiBsb2FkZWQgYWxyZWFkeVxuICAgICAgbGV0IGNvbnRhaW5lclJlZiA9IGxlZ2FsSW5pdERldGFpbC5pc05vbkluZGV4ZWQgPyB0aGlzLm5vbkluZGV4ZWRMZWdhbHMgOiB0aGlzLmluZGV4ZWRMZWdhbHM7XG4gICAgICBsZXQgaW5kZXggPSBmaW5kSW5kZXgoY29udGFpbmVyUmVmLCBsZWdhbCA9PiBsZWdhbC5rZXkgPT09IGxlZ2FsSW5pdERldGFpbC5rZXkpO1xuICAgICAgLy8gaWYgbm90IGZvdW5kXG4gICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgIGluZGV4ID0gY29udGFpbmVyUmVmLnB1c2gobGVnYWxJbml0RGV0YWlsKSAtIDE7XG4gICAgICAgIHRoaXMuZ2V0TGVnYWxzKCk7XG4gICAgICB9XG4gICAgICBpZiAoIWxlZ2FsSW5pdERldGFpbC5pc05vbkluZGV4ZWQpIHtcbiAgICAgICAgdGhpcy5yb290QnJvYWRjYXN0KCdsZWdhbDo6dWRwYXRlJywge1xuICAgICAgICAgIGtleTogbGVnYWxJbml0RGV0YWlsLmtleSxcbiAgICAgICAgICBpc05vbkluZGV4ZWQ6IGxlZ2FsSW5pdERldGFpbC5pc05vbkluZGV4ZWQsXG4gICAgICAgICAgaW5kZXg6IGluZGV4XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogbGVnYWwtY29udGFpbmVyLnZ1ZT9hNTFlZTJkNlxuICoqLyIsIjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnLi9sZWdhbC1jb3VudGVyLnNjc3MnO1xuPC9zdHlsZT5cblxuPHRlbXBsYXRlIHNyYz1cIi4vbGVnYWwtY291bnRlci5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbi8qXG4gKiBBUEk6IDxsZWdhbC1jb3VudGVyXG4gKiAgICAgICAgbGVnYWwta2V5PVwiKFN0cmluZykga2V5XCJcbiAqICAgICAgICBsZWdhbC1sYW5nPVwiKFN0cmluZykgbGFuZ1wiXG4gKiAgICAgICAgbGVnYWwtcmVnaW9uPVwiKFN0cmluZykgcmVnaW9uXCJcbiAqICAgICAgICBpcy1ub24taW5kZXhlZD1cIihCb29sZWFuKSBpc05vbkluZGV4ZWRcIlxuICogICAgICA+PC9sZWdhbC1jb3VudGVyPlxuKi9cblxuaW1wb3J0IG1peGlucyBmcm9tICcuLi8uLi9taXhpbnMnO1xuaW1wb3J0IGRlZmVyIGZyb20gJ2xvZGFzaC9kZWZlcic7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbWl4aW5zOiBtaXhpbnMsXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxlZ2FsQ291bnRlcjogbnVsbFxuICAgIH07XG4gIH0sXG4gIHByb3BzOiB7XG4gICAgbGVnYWxLZXk6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfSxcbiAgICBpc05vbkluZGV4ZWQ6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZVxuICAgIH0sXG4gICAgbGVnYWxMYW5nOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH0sXG4gICAgbGVnYWxSZWdpb246IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfVxuICB9LFxuICBldmVudHM6IHtcbiAgICAnbGVnYWw6OnVkcGF0ZScodXBkYXRlRGV0YWlsKSB7XG4gICAgICAgIGlmICghdGhpcy5pc05vbkluZGV4ZWQgJiYgdXBkYXRlRGV0YWlsLmtleSA9PT0gdGhpcy5sZWdhbEtleSkge1xuICAgICAgICAgIHRoaXMubGVnYWxDb3VudGVyID0gdXBkYXRlRGV0YWlsLmluZGV4ICsgMTtcbiAgICAgICAgfVxuICAgIH1cbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIGNsaWNrSGFuZGxlcigpIHtcbiAgICAgIHRoaXMucm9vdEJyb2FkY2FzdCgnbGVnYWw6OmNsaWNrJywgdGhpcy5sZWdhbEtleSk7XG4gICAgfVxuICB9LFxuICBiZWZvcmVDb21waWxlKCkge1xuICB9LFxuICByZWFkeSgpIHtcbiAgICBkZWZlcigoKSA9PiB7XG4gICAgICB0aGlzLnJvb3RCcm9hZGNhc3QoJ2xlZ2FsOjppbml0Jywge1xuICAgICAgICBrZXk6IHRoaXMubGVnYWxLZXksXG4gICAgICAgIGxhbmc6IHRoaXMubGVnYWxMYW5nLFxuICAgICAgICByZWdpb246IHRoaXMubGVnYWxSZWdpb24sXG4gICAgICAgIGlzTm9uSW5kZXhlZDogdGhpcy5pc05vbkluZGV4ZWRcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBsZWdhbC1jb3VudGVyLnZ1ZT80ZmUwZGM4ZVxuICoqLyIsIjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnLi9vdmVybGF5LWNvbnRhaW5lci5zY3NzJztcbjwvc3R5bGU+XG5cbjx0ZW1wbGF0ZSBzcmM9XCIuL292ZXJsYXktY29udGFpbmVyLmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuLypcbiogRXg6IDxvdmVybGF5LWNvbnRhaW5lciBpcy12aXNpYmxlPVwiKEJvb2xlYW4pIGZhbHNlXCI+XG4gICAgICA8L292ZXJsYXktY29udGFpbmVyPlxuKi9cbmNvbnN0IEVTQyA9IDI3O1xuZXhwb3J0IGRlZmF1bHQge1xuICBwcm9wczoge1xuICAgIGlzVmlzaWJsZToge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgfVxuICB9LFxuICB3YXRjaDoge1xuICAgIGlzVmlzaWJsZShpc1Zpc2libGUpIHtcbiAgICAgIGxldCBlbCA9IHdpbmRvdy5kb2N1bWVudC5ib2R5O1xuICAgICAgbGV0IGNsYXNzTmFtZSA9ICduby1zY3JvbGwnO1xuICAgICAgaWYgKGlzVmlzaWJsZSkge1xuICAgICAgICBpZiAoISFlbC5jbGFzc0xpc3QpIHtcbiAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWwuY2xhc3NOYW1lICs9ICcgJyArIGNsYXNzTmFtZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGVsLmNsYXNzTGlzdCkge1xuICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbC5jbGFzc05hbWUgPSBlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NOYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBSZWdFeHAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnKF58XFxcXGIpJyArIGNsYXNzTmFtZS5zcGxpdCgnICcpLmpvaW4oJ3wnKSArICcoXFxcXGJ8JCknLCAnZ2knKSwgJyAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGV2ZW50czoge1xuICAgICdvdmVybGF5Q29udGFpbmVyOjpvcGVuJygpIHtcbiAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcbiAgICB9LFxuICAgICdvdmVybGF5Q29udGFpbmVyOjpjbG9zZScoKSB7XG4gICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuICAgIH1cbiAgICB9LFxuICByZWFkeSgpIHtcbiAgICB3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldnQpID0+IHtcbiAgICAgIGV2dCA9IGV2dCB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IEVTQykge1xuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBvdmVybGF5LWNvbnRhaW5lci52dWU/M2ZjMjMwNThcbiAqKi8iLCI8c3R5bGUgbGFuZz1cInNhc3NcIj5cbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuICAgIEBpbXBvcnQgJy4vb3ZlcmxheS5zY3NzJztcbjwvc3R5bGU+XG5cbjx0ZW1wbGF0ZSBzcmM9XCIuL292ZXJsYXkuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG4vKlxuICogRXg6IDxvdmVybGF5IG92ZXJsYXkta2V5PVwiKFN0cmluZykga2V5XCI+XG4gKiAgICAgICAgQW55IGNvbnRlbnRcbiAqICAgICAgPC9vdmVybGF5PlxuKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNWaXNpYmxlOiBmYWxzZVxuICAgIH07XG4gIH0sXG4gIHByb3BzOiB7XG4gICAgb3ZlcmxheUtleToge1xuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfVxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgY2xvc2VPdmVybGF5KCkge1xuICAgICAgICB0aGlzLiRkaXNwYXRjaCgnb3ZlcmxheUNvbnRhaW5lcjo6Y2xvc2UnKTtcbiAgICB9XG4gIH0sXG4gIGV2ZW50czoge1xuICAgICdvdmVybGF5OjpvcGVuJyhvdmVybGF5S2V5KSB7XG4gICAgICBpZiAob3ZlcmxheUtleSA9PT0gdGhpcy5vdmVybGF5S2V5KSB7XG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcbiAgICB9XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIG92ZXJsYXkudnVlPzFmMzdmZDRhXG4gKiovIiwiPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcbiAgICBAaW1wb3J0ICcuL3NwaW5uZXIuc2Nzcyc7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9zcGlubmVyLmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuZXhwb3J0IGRlZmF1bHQge1xuICByZXBsYWNlOiB0cnVlLFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhY3RpdmU6IGZhbHNlXG4gICAgfTtcbiAgfSxcbiAgcHJvcHM6IHtcbiAgICB0ZXh0OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnJ1xuICAgIH0sXG4gICAgZnVsbFNjcmVlbjoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgfVxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgc2hvdygpIHtcbiAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgICAgIHRoaXMuJHJvb3QuJGJyb2FkY2FzdCgnc2hvd246OnNwaW5uZXInKTtcbiAgICB9LFxuICAgIGhpZGUoKSB7XG4gICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgdGhpcy4kcm9vdC4kYnJvYWRjYXN0KCdoaWRkZW46OnNwaW5uZXInKTtcbiAgICB9XG4gIH0sXG4gIGV2ZW50czoge1xuICAgICdzaG93OjpzcGlubmVyJygpIHtcbiAgICAgIHRoaXMuc2hvdygpO1xuICAgIH0sXG4gICAgJ2hpZGU6OnNwaW5uZXInKCkge1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfVxuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBpbmRleC52dWU/MzY3N2MyZDVcbiAqKi8iLCI8c3R5bGUgbGFuZz1cInNhc3NcIj5cbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9jb21wb25lbnRzL3VpL2ljb24nO1xuICAgIEBpbXBvcnQgJy4vc3RlcC10cmFja2VyLnNjc3MnO1xuPC9zdHlsZT5cblxuPHRlbXBsYXRlIHNyYz1cIi4vc3RlcC10cmFja2VyLmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuZXhwb3J0IGRlZmF1bHQge1xuICBwcm9wczoge1xuICAgIGNvbmZpZzoge1xuICAgICAgdHlwZTogT2JqZWN0XG4gICAgfSxcbiAgICBjdXJyZW50U3RlcDoge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogMFxuICAgIH0sXG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBjbGlja0hhbmRsZXIoJGV2ZW50LCBzdGVwLCBpbmRleCkge1xuICAgICAgaWYgKCEhc3RlcC5vbkNsaWNrSGFuZGxlcikge1xuICAgICAgICAkZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFN0ZXAgPiBpbmRleCkge1xuICAgICAgICAgIHN0ZXAub25DbGlja0hhbmRsZXIoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogaW5kZXgudnVlPzM1YzA1YmRiXG4gKiovIiwiPHRlbXBsYXRlIHNyYz1cIi4vdGFiLmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuZXhwb3J0IGRlZmF1bHQge1xuICBwcm9wczoge1xuICAgIGxhYmVsOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgfSxcbiAgICBpc0Rpc2FibGVkOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgfSxcbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGFiSW5kZXg6IDAsXG4gICAgICBpc1Zpc2libGU6IGZhbHNlLFxuICAgIH07XG4gIH0sXG4gIGNvbXB1dGVkOiB7XG4gICAgaXNWaXNpYmxlKCkge1xuICAgICAgcmV0dXJuICh0aGlzLiRwYXJlbnQuYWN0aXZlVGFiSW5kZXggPT09IHRoaXMudGFiSW5kZXgpO1xuICAgIH0sXG4gIH0sXG4gIGNyZWF0ZWQoKSB7XG4gICAgdGhpcy4kcGFyZW50LnRhYnMucHVzaCh7XG4gICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgIGlzRGlzYWJsZWQ6IHRoaXMuaXNEaXNhYmxlZCxcbiAgICB9KTtcbiAgfSxcbiAgcmVhZHkoKSB7XG4gICAgdGhpcy4kcGFyZW50LiRjaGlsZHJlbi5mb3JFYWNoKChjLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKGMuJGVsID09PSB0aGlzLiRlbCkge1xuICAgICAgICB0aGlzLnRhYkluZGV4ID0gaW5kZXg7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIGJlZm9yZURlc3Ryb3koKSB7XG4gICAgdGhpcy4kcGFyZW50LnRhYnMuc3BsaWNlKHRoaXMudGFiSW5kZXgsIDEpO1xuICB9LFxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogdGFiLnZ1ZT8wYzhjMjFiZlxuICoqLyIsIjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnLi90YWJzLnNjc3MnO1xuPC9zdHlsZT5cblxuPHRlbXBsYXRlIHNyYz1cIi4vdGFicy5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbi8qXG4gKiAgRXg6IDx0YWJzIGFjdGl2ZS10YWItaW5kZXg9XCIoSW50ZWdlcikgMFwiPlxuICogICAgICAgIDx0YWIgbGFiZWw9XCJUYWIgQVwiPlxuICogICAgICAgICAgQW55IGNvbnRlbnRcbiAqICAgICAgICA8L3RhYj5cbiAqICAgICAgICA8dGFiIGxhYmVsPVwiVGFiIEJcIiBpcy1kaXNhYmxlZD1cIihCb29sZWFuKSBmYWxzZVwiPlxuICogICAgICAgICAgQW55IGNvbnRlbnRcbiAqICAgICAgICA8L3RhYj5cbiAqICAgICAgIDx0YWJzPlxuKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgcHJvcHM6IHtcbiAgICBhY3RpdmVUYWJJbmRleDoge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogMFxuICAgIH1cbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIGlzQWN0aXZlKGluZGV4KSB7XG4gICAgICByZXR1cm4gYWN0aXZlVGFiSW5kZXggPT09IGluZGV4O1xuICAgIH1cbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGFiczogW11cbiAgICB9O1xuICB9LFxuICBtZXRob2RzOiB7XG4gICAgICBoYW5kbGVUYWJMaXN0Q2xpY2soaW5kZXgsIHRhYikge1xuICAgICAgICAgIGlmICghdGFiLmlzRGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlVGFiSW5kZXggPSBpbmRleDtcbiAgICAgICAgICB9XG4gICAgICB9XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHRhYnMudnVlP2VjNjYyN2M0XG4gKiovIiwiaW1wb3J0IEdldFN0YXJ0ZWQgZnJvbSAnLi92aWV3cy9nZXQtc3RhcnRlZC52dWUnO1xuaW1wb3J0IFN0ZXBUcmFja2VyUGFnZSBmcm9tICcuL3ZpZXdzL3N0ZXAtdHJhY2tlci1wYWdlLnZ1ZSc7XG5pbXBvcnQgVGFic1BhZ2UgZnJvbSAnLi92aWV3cy90YWJzLXBhZ2UudnVlJztcbmltcG9ydCBMZWdhbFBhZ2UgZnJvbSAnLi92aWV3cy9sZWdhbC1wYWdlLnZ1ZSc7XG5pbXBvcnQgT3ZlcmxheVBhZ2UgZnJvbSAnLi92aWV3cy9vdmVybGF5LXBhZ2UudnVlJztcbmltcG9ydCBDb2xsYXBzYWJsZVBhbmVsUGFnZSBmcm9tICcuL3ZpZXdzL2NvbGxhcHNhYmxlLXBhbmVsLXBhZ2UudnVlJztcbmltcG9ydCBBbGVydFBhZ2UgZnJvbSAnLi92aWV3cy9hbGVydC1wYWdlLnZ1ZSc7XG5pbXBvcnQgU3Bpbm5lclBhZ2UgZnJvbSAnLi92aWV3cy9zcGlubmVyLXBhZ2UudnVlJztcblxuZXhwb3J0IGRlZmF1bHQge1xuICAnL2dldC1zdGFydGVkJzoge1xuICAgIGNvbXBvbmVudDogR2V0U3RhcnRlZFxuICB9LFxuICAnL2FsZXJ0Jzoge1xuICAgIGNvbXBvbmVudDoge1xuICAgICAgdGVtcGxhdGU6ICc8YWxlcnQtcGFnZT48L2FsZXJ0LXBhZ2U+JyxcbiAgICAgIGNvbXBvbmVudHM6IHsgQWxlcnRQYWdlIH1cbiAgICB9XG4gIH0sXG4gICcvc3Bpbm5lcic6IHtcbiAgICBjb21wb25lbnQ6IHtcbiAgICAgIHRlbXBsYXRlOiAnPHNwaW5uZXItcGFnZT48L3NwaW5uZXItcGFnZT4nLFxuICAgICAgY29tcG9uZW50czogeyBTcGlubmVyUGFnZSB9XG4gICAgfVxuICB9LFxuICAnL3N0ZXAtdHJhY2tlcic6IHtcbiAgICBjb21wb25lbnQ6IHtcbiAgICAgIHRlbXBsYXRlOiAnPHN0ZXAtdHJhY2tlci1wYWdlPjwvc3RlcC10cmFja2VyLXBhZ2U+JyxcbiAgICAgIGNvbXBvbmVudHM6IHsgU3RlcFRyYWNrZXJQYWdlIH1cbiAgICB9XG4gIH0sXG4gICcvdGFicyc6IHtcbiAgICBjb21wb25lbnQ6IHtcbiAgICAgIHRlbXBsYXRlOiAnPHRhYnMtcGFnZT48L3RhYnMtcGFnZT4nLFxuICAgICAgY29tcG9uZW50czogeyBUYWJzUGFnZSB9XG4gICAgfVxuICB9LFxuICAnL2xlZ2FsJzoge1xuICAgIGNvbXBvbmVudDoge1xuICAgICAgdGVtcGxhdGU6ICc8bGVnYWwtcGFnZT48L2xlZ2FsLXBhZ2U+JyxcbiAgICAgIGNvbXBvbmVudHM6IHsgTGVnYWxQYWdlIH1cbiAgICB9XG4gIH0sXG4gICcvb3ZlcmxheSc6IHtcbiAgICBjb21wb25lbnQ6IHtcbiAgICAgIHRlbXBsYXRlOiAnPG92ZXJsYXktcGFnZT48L292ZXJsYXktcGFnZT4nLFxuICAgICAgY29tcG9uZW50czogeyBPdmVybGF5UGFnZSB9XG4gICAgfVxuICB9LFxuICAnL2NvbGxhcHNhYmxlLXBhbmVsJzoge1xuICAgIGNvbXBvbmVudDoge1xuICAgICAgdGVtcGxhdGU6ICc8Y29sbGFwc2FibGUtcGFuZWwtcGFnZT48L2NvbGxhcHNhYmxlLXBhbmVsLXBhZ2U+JyxcbiAgICAgIGNvbXBvbmVudHM6IHsgQ29sbGFwc2FibGVQYW5lbFBhZ2UgfVxuICAgIH1cbiAgfVxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vZGV2L3NyYy9yb3V0ZXMuanNcbiAqKi8iLCIvKlxuICBAZGVzYyBBZGQgYmVoYXZpb3IgdG8gYW55IGVsZW1lbnQuIFdoZW4gY2xpY2tlZCwgaXQgd2lsbCBvcGVuIHRoZSBjb3JyZXNwb25kaW5nIG92ZXJsYXlcbiAgRXhhbXBsZTogPGJ1dHRvbiBvdmVybGF5LW9wZW5lcj1cIm15LW92ZXJsYXlcIj48L2J1dHRvbj5cbiovXG5leHBvcnQgZGVmYXVsdCB7XG4gIGlzTGl0ZXJhbDogdHJ1ZSxcbiAgZXZlbnRIYW5kbGVyKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy52bS4kcm9vdC4kYnJvYWRjYXN0KCdvdmVybGF5OjpvcGVuJywgdGhpcy5leHByZXNzaW9uKTtcbiAgICB0aGlzLnZtLiRyb290LiRicm9hZGNhc3QoJ292ZXJsYXlDb250YWluZXI6Om9wZW4nKTtcbiAgfSxcbiAgYmluZCgpIHtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5ldmVudEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gIH0sXG4gIHVuYmluZCgpIHtcbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5ldmVudEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gIH0sXG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvZGlyZWN0aXZlcy9vdmVybGF5LW9wZW5lci5qc1xuICoqLyIsImltcG9ydCBvdmVybGF5T3BlbmVyIGZyb20gJy4vZGlyZWN0aXZlcy9vdmVybGF5LW9wZW5lcic7XG5pbXBvcnQgc2V0Rm9jdXMgZnJvbSAnLi9kaXJlY3RpdmVzL3NldC1mb2N1cyc7XG5pbXBvcnQgU3RlcFRyYWNrZXIgZnJvbSAnLi9jb21wb25lbnRzL3N0ZXAtdHJhY2tlci9pbmRleC52dWUnO1xuaW1wb3J0IE92ZXJsYXlDb250YWluZXIgZnJvbSAnLi9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS1jb250YWluZXIudnVlJztcbmltcG9ydCBPdmVybGF5IGZyb20gJy4vY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXkudnVlJztcbmltcG9ydCBMZWdhbENvdW50ZXIgZnJvbSAnLi9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvdW50ZXIudnVlJztcbmltcG9ydCBMZWdhbENvbnRhaW5lciBmcm9tICcuL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY29udGFpbmVyLnZ1ZSc7XG5pbXBvcnQgVGFicyBmcm9tICcuL2NvbXBvbmVudHMvdGFiL3RhYnMudnVlJztcbmltcG9ydCBUYWIgZnJvbSAnLi9jb21wb25lbnRzL3RhYi90YWIudnVlJztcbmltcG9ydCBDb2xsYXBzYWJsZVBhbmVsIGZyb20gJy4vY29tcG9uZW50cy9jb2xsYXBzYWJsZS1wYW5lbC9pbmRleC52dWUnO1xuaW1wb3J0IEFsZXJ0IGZyb20gJy4vY29tcG9uZW50cy9hbGVydC9pbmRleC52dWUnO1xuaW1wb3J0IFNwaW5uZXIgZnJvbSAnLi9jb21wb25lbnRzL3NwaW5uZXIvaW5kZXgudnVlJztcblxubGV0IGNvbXBvbmVudHMgPSB7XG4gIFN0ZXBUcmFja2VyLFxuICBPdmVybGF5Q29udGFpbmVyLFxuICBPdmVybGF5LFxuICBMZWdhbENvdW50ZXIsXG4gIExlZ2FsQ29udGFpbmVyLFxuICBUYWJzLFxuICBUYWIsXG4gIENvbGxhcHNhYmxlUGFuZWwsXG4gIEFsZXJ0LFxuICBTcGlubmVyXG59O1xubGV0IGRpcmVjdGl2ZXMgPSB7XG4gIG92ZXJsYXlPcGVuZXIsXG4gIHNldEZvY3VzXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluc3RhbGwoVnVlKSB7XG4gIGZvciAobGV0IG5hbWUgaW4gY29tcG9uZW50cykge1xuICAgIFZ1ZS5jb21wb25lbnQobmFtZSwgY29tcG9uZW50c1tuYW1lXSk7XG4gIH1cbiAgZm9yIChsZXQgbmFtZSBpbiBkaXJlY3RpdmVzKSB7XG4gICAgVnVlLmRpcmVjdGl2ZShuYW1lLCBkaXJlY3RpdmVzW25hbWVdKTtcbiAgfVxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL21haW4uanNcbiAqKi8iLCJleHBvcnQgZGVmYXVsdCB7XG4gIG1ldGhvZHM6IHtcbiAgICByb290QnJvYWRjYXN0KC4uLmFyZ3MpIHtcbiAgICAgIHRoaXMuJGJyb2FkY2FzdC5hcHBseSh0aGlzLiRyb290LCBhcmdzKTtcbiAgICB9LFxuICB9LFxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL21peGlucy9ldmVudHMuanNcbiAqKi8iLCJleHBvcnQgZGVmYXVsdCB7XG4gIG1ldGhvZHM6IHtcbiAgICBwYXJzZUpTT04ocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSxcbiAgfSxcbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9taXhpbnMveGhyLXJlc3BvbnNlLmpzXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuaHlfYy1pY29ue2ZvbnQtZmFtaWx5OlRlbHVzIEljb24sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7dGV4dC1kZWNvcmF0aW9uOm5vbmU7dGV4dC1yZW5kZXJpbmc6b3B0aW1pemVMZWdpYmlsaXR5O2NvbG9yOmluaGVyaXQ7dmVydGljYWwtYWxpZ246bWlkZGxlO2ZvbnQtc2l6ZTppbmhlcml0O2xpbmUtaGVpZ2h0OmluaGVyaXR9Lmh5X2MtaWNvbl9fc3F1YXJle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToyLjVyZW07bGluZS1oZWlnaHQ6M3JlbTt3aWR0aDozcmVtO2hlaWdodDozcmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLTJ4e2ZvbnQtc2l6ZToyZW19Lmh5X2MtaWNvbi0tM3h7Zm9udC1zaXplOjNlbX0uaHlfYy1pY29uLS00eHtmb250LXNpemU6NGVtfS5oeV9jLWljb25fX3N0eWxlZ3VpZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjJyZW07bGluZS1oZWlnaHQ6NHJlbTt3aWR0aDo0cmVtO2hlaWdodDo0cmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLWNpcmNsZS10aGljay1vdXRsaW5lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMVxcXCJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMlxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNVxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA2XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1sb2dvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwOVxcXCJ9Lmh5X2MtaWNvbi0tYmFyLWNoYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMFxcXCJ9Lmh5X2MtaWNvbi0tcGljdHVyZS1mcmFtZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTFcXFwifS5oeV9jLWljb24tLXBhcGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEzXFxcIn0uaHlfYy1pY29uLS1mb2xkZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE0XFxcIn0uaHlfYy1pY29uLS1zaGFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTVcXFwifS5oeV9jLWljb24tLW1hZ25pZnktZ2xhc3M6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE2XFxcIn0uaHlfYy1pY29uLS13YXJuaW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOFxcXCJ9Lmh5X2MtaWNvbi0tc3Rhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTlcXFwifS5oeV9jLWljb24tLXN0YXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIwXFxcIn0uaHlfYy1pY29uLS1oZWFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjFcXFwifS5oeV9jLWljb24tLWxpZmVzYXZlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjJcXFwifS5oeV9jLWljb24tLWhhbWJ1cmdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjRcXFwifS5oeV9jLWljb24tLWdyaWQtc3F1YXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNVxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNlxcXCJ9Lmh5X2MtaWNvbi0tbGlnaHRidWxiOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyN1xcXCJ9Lmh5X2MtaWNvbi0tc3BlZWRvbWV0ZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI4XFxcIn0uaHlfYy1pY29uLS1hZGQtcmVtb3ZlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOVxcXCJ9Lmh5X2MtaWNvbi0tY2FydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzBcXFwifS5oeV9jLWljb24tLXR3aXR0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMxXFxcIn0uaHlfYy1pY29uLS1mYWNlYm9vazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzJcXFwifS5oeV9jLWljb24tLXlvdXR1YmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMzXFxcIn0uaHlfYy1pY29uLS1nb29nbGUtcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzRcXFwifS5oeV9jLWljb24tLXRyZW5kLWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM1XFxcIn0uaHlfYy1pY29uLS1wbGF5LWJ1dHRvbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzZcXFwifS5oeV9jLWljb24tLXZpZGVvLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzN1xcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzhcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOVxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQwXFxcIn0uaHlfYy1pY29uLS1jbG9jay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDFcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQyXFxcIn0uaHlfYy1pY29uLS10YWJsZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQzXFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ0XFxcIn0uaHlfYy1pY29uLS1tb3VzZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDVcXFwifS5oeV9jLWljb24tLXByaWNldGFnOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItbm90ZXMtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ3XFxcIn0uaHlfYy1pY29uLS10djpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDhcXFwifS5oeV9jLWljb24tLWZpbG06YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ5XFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTBcXFwifS5oeV9jLWljb24tLXVzYi1zdGljazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTFcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUyXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1M1xcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NVxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU2XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU3XFxcIn0uaHlfYy1pY29uLS11c2VyczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTlcXFwifS5oeV9jLWljb24tLXVzZXJzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYwXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1ib3hlZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjNcXFwifS5oeV9jLWljb24tLWdlYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY0XFxcIn0uaHlfYy1pY29uLS1nZWFyLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY1XFxcIn0uaHlfYy1pY29uLS1nZWFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NlxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjhcXFwifS5oeV9jLWljb24tLXBhZGxvY2staW52ZXJldGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OVxcXCJ9Lmh5X2MtaWNvbi0tc3RhY2tlZC1wYXBlcnMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcxXFxcIn0uaHlfYy1pY29uLS1tdXNpYy1ub3RlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MlxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzNcXFwifS5oeV9jLWljb24tLXRhYmxldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzRcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzVcXFwifS5oeV9jLWljb24tLW1vdXNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NlxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc3XFxcIn0uaHlfYy1pY29uLS1wYXBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzhcXFwifS5oeV9jLWljb24tLXR2LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OVxcXCJ9Lmh5X2MtaWNvbi0tZmlsbS1jbGFwcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MFxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgxXFxcIn0uaHlfYy1pY29uLS1waG9uZS1oYW5kc2V0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MlxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODRcXFwifS5oeV9jLWljb24tLWhvbWUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODVcXFwifS5oeV9jLWljb24tLWhvbWUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg2XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODhcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTJcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkzXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTRcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk1XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk2XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk3XFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTlcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAwXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDFcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMlxcXCJ9Lmh5X2MtaWNvbi0teDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDRcXFwifS5oeV9jLWljb24tLXgtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDVcXFwifS5oeV9jLWljb24tLXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA2XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcms6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA4XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDlcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTBcXFwifS5oeV9jLWljb24tLWluZmluaXR5OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMVxcXCJ9Lmh5X2MtaWNvbi0tcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTJcXFwifS5oeV9jLWljb24tLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTNcXFwifS5oeV9jLWljb24tLXBsdXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE0XFxcIn0uaHlfYy1pY29uLS1taW51czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTVcXFwifS5oeV9jLWljb24tLW1pbnVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE2XFxcIn0uaHlfYy1pY29uLS1taW51cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTdcXFwifS5oeV9jLWljb24tLWNoYXQtYnViYmxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExOVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMFxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjFcXFwifS5oeV9jLWljb24tLWNoYXQteDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjJcXFwifS5oeV9jLWljb24tLWNoYXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIzXFxcIn0uaHlfYy1pY29uLS1zaW0tY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjVcXFwifS5oeV9jLWljb24tLWNhbGN1bGF0b3I6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI2XFxcIn0uaHlfYy1pY29uLS1ibHVldG9vdGgtaGVhZHNldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjdcXFwifS5oeV9jLWljb24tLW91dGdvaW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI5XFxcIn0uaHlfYy1pY29uLS1pbmNvbWluZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMFxcXCJ9Lmh5X2MtaWNvbi0tY2F1dGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzFcXFwifS5oeV9jLWljb24tLXdpZmktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMyXFxcIn0uaHlfYy1pY29uLS13aWZpOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzM1xcXCJ9Lmh5X2MtaWNvbi0tdGhpbi1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM1XFxcIn0uaHlfYy1pY29uLS1pbmZvLWludmVydGVkOmJlZm9yZSwuaHlfYy1pY29uLS1pbmZvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNlxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM4XFxcIn0uaHlfYy1pY29uLS1nbG9iZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDBcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDJcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDRcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ1XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDZcXFwifS5oeV9jLWljb24tLW92ZXJ2aWV3LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0N1xcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtY2lyY2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OFxcXCJ9Lmh5X2MtaWNvbi0tcHVsc2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ5XFxcIn0uaHlfYy1pY29uLS1taWtlLW1vYmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTBcXFwifS5oeV9jLWljb24tLXJld2FyZHMtYmFkZ2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUxXFxcIn0uaHlfYy1pY29uLS1maWx0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUyXFxcIn0uaHlfYy1pY29uLS1zY2hlZHVsZS10YWxrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1M1xcXCJ9Lmh5X2MtaWNvbi0td2FybmluZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTRcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTVcXFwifS5oeV9jLWljb24tLWNhcnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU2XFxcIn0uaHlfYy1pY29uLS1saXZlLWNoYXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU3XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OFxcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTlcXFwifS5oeV9jLWljb24tLWNsb3VkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MFxcXCJ9Lmh5X2MtaWNvbi0tZGF0YTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjFcXFwifS5oeV9jLWljb24tLWRlbGl2ZXJ5LXRydWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MlxcXCJ9Lmh5X2MtaWNvbi0tcHJvdGVjdGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjNcXFwifS5oeV9jLWljb24tLWNvbG91ci1waWNrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY0XFxcIn0uaHlfYy1pY29uLS1tdWx0aS1hY2NvdW50LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NVxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY2XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjdcXFwifS5oeV9jLWljb24tLWRvbGxhci1zaWduOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OFxcXCJ9Lmh5X2MtaWNvbi0tbGluay1hY2NvdW50OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OVxcXCJ9Lmh5X2MtaWNvbi0tZGF0YS1tYW5hZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MFxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcxXFxcIn0uaHlfYy1pY29uLS10b29scy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzJcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3M1xcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc0XFxcIn0uaHlfYy1pY29uLS1pcC1mYXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc1XFxcIn0uaHlfYy1pY29uLS1pcC1mYXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc2XFxcIn0uaHlfYy1pY29uLS1saW5rZWQtaW4taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc3XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzhcXFwifS5oeV9jLWljb24tLW1pY3JvcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc5XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODBcXFwifS5oeV9jLWljb24tLW5ldHdvcmtpbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgxXFxcIn0uaHlfYy1pY29uLS1jeWNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODJcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODNcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODRcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtYWRkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NVxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg2XFxcIn0uc2dfYy1hcGktdGFibGV7Ym9yZGVyLXNwYWNpbmc6MCAxMHB4O3dpZHRoOjEwMCV9LnNnX2MtYXBpLXRhYmxlIHRyey13ZWJraXQtYm94LWZsZXg6MTstbXMtZmxleDoxO2ZsZXg6MX0uc2dfYy1hcGktdGFibGUgdGgsLnNnX2MtYXBpLXRhYmxlIHRyOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2VlZX0uc2dfYy1hcGktdGFibGUgdGR7dGV4dC1hbGlnbjpjZW50ZXJ9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9kZXYvc3JjL2NvbXBvbmVudHMvYXBpLXRhYmxlL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDcwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5zZ19jLW5hdntkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmZpeGVkO2xlZnQ6MDt3aWR0aDoyNXJlbTtoZWlnaHQ6MTAwJTtib3JkZXItcmlnaHQ6LjFyZW0gc29saWQgI2UyZTJlMjtwYWRkaW5nOjJyZW07cGFkZGluZy10b3A6NjhweDtvdmVyZmxvdy14OmhpZGRlbjtvdmVyZmxvdy15OmF1dG87YmFja2dyb3VuZC1jb2xvcjojZmZmO3otaW5kZXg6OTk5fS5zZ19jLW5hdl9fc2VjdGlvbntmb250LWZhbWlseTpUZWx1cyBNZWRpdW0sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7Zm9udC1zaXplOjEuMnJlbTtib3JkZXItYm90dG9tOi4xcmVtIHNvbGlkICNlMmUyZTI7cGFkZGluZy10b3A6MXJlbTtwYWRkaW5nLWJvdHRvbTouNXJlbTttYXJnaW46MXJlbSAwfS5zZ19jLW5hdl9fbGlzdC1pdGVte3BhZGRpbmc6NXB4IDB9LnNnX2MtbmF2X19saW5rOmhvdmVye2NvbG9yOiM4YzY4YTZ9LnNnX2MtbmF2X19saW5rLS1hY3RpdmV7Y29sb3I6IzU3YTcwOH1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2Rldi9zcmMvY29tcG9uZW50cy9zaWRlLW5hdi9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSA3MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJoZWFkZXIuc2dfYy1zaXRlLWhlYWRlcntiYWNrZ3JvdW5kLWNvbG9yOiM0YjI4NmQ7aGVpZ2h0OjY4cHg7dGV4dC1hbGlnbjpsZWZ0O3Bvc2l0aW9uOmZpeGVkO3dpZHRoOjEwMCU7ei1pbmRleDo5OTk5fWhlYWRlci5zZ19jLXNpdGUtaGVhZGVyIC5zZ19jLXNpdGUtaGVhZGVyX19jb250YWluZXJ7aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJX1oZWFkZXIuc2dfYy1zaXRlLWhlYWRlciAuc2dfYy1zaXRlLWhlYWRlcl9fY29udGFpbmVyIGltZy5sb2dve2hlaWdodDoxMDAlO3BhZGRpbmc6MjBweDtkaXNwbGF5OmlubGluZS1ibG9jazttYXgtd2lkdGg6MTAwJX1oZWFkZXIuc2dfYy1zaXRlLWhlYWRlciAuc2dfYy1zaXRlLWhlYWRlcl9fdG9nZ2xlYnRue2NvbG9yOiNmZmY7Zm9udC1zaXplOjJyZW07bWFyZ2luOjA7YmFja2dyb3VuZDpoc2xhKDAsMCUsMTAwJSwuMSk7cGFkZGluZzoxLjVyZW07ZmxvYXQ6bGVmdDtjdXJzb3I6cG9pbnRlcjtib3JkZXI6MDtoZWlnaHQ6MTAwJTtkaXNwbGF5OmlubGluZS1ibG9ja31cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2Rldi9zcmMvY29tcG9uZW50cy9zaXRlLWhlYWRlci9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSA3MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJib2R5e2JhY2tncm91bmQtY29sb3I6I2Y1ZjZmN30uc2dfYy1zaXRlX19tYWlue3BhZGRpbmctdG9wOjY4cHg7bWFyZ2luLWxlZnQ6MjVyZW19QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDo1OTlweCl7LnNnX2Mtc2l0ZV9fbWFpbnttYXJnaW4tbGVmdDowfX0uc2dfYy1kZW1ve21hcmdpbjoyMHB4IDB9LnNnX2MtZGVtb19fY29udGFpbmVye2JhY2tncm91bmQtY29sb3I6I2ZmZjtvdmVyZmxvdzpoaWRkZW47Ym9yZGVyLXJhZGl1czo1cHg7Ym9yZGVyOjFweCBzb2xpZCAjZWVlO3BhZGRpbmc6MjVweDttYXJnaW46MjBweCAwfWNvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de2NvbG9yOiMwMDA7YmFja2dyb3VuZDpub25lO3RleHQtc2hhZG93OjAgMXB4ICNmZmY7Zm9udC1mYW1pbHk6Q29uc29sYXMsTW9uYWNvLEFuZGFsZSBNb25vLFVidW50dSBNb25vLG1vbm9zcGFjZTt0ZXh0LWFsaWduOmxlZnQ7d2hpdGUtc3BhY2U6cHJlO3dvcmQtc3BhY2luZzpub3JtYWw7d29yZC1icmVhazpub3JtYWw7d29yZC13cmFwOm5vcm1hbDtsaW5lLWhlaWdodDoxLjU7LW1vei10YWItc2l6ZTo0Oy1vLXRhYi1zaXplOjQ7dGFiLXNpemU6NDstd2Via2l0LWh5cGhlbnM6bm9uZTstbXMtaHlwaGVuczpub25lO2h5cGhlbnM6bm9uZX1jb2RlW2NsYXNzKj1sYW5ndWFnZS1dOjotbW96LXNlbGVjdGlvbixjb2RlW2NsYXNzKj1sYW5ndWFnZS1dIDo6LW1vei1zZWxlY3Rpb24scHJlW2NsYXNzKj1sYW5ndWFnZS1dOjotbW96LXNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV0gOjotbW96LXNlbGVjdGlvbnt0ZXh0LXNoYWRvdzpub25lO2JhY2tncm91bmQ6I2IzZDRmY31jb2RlW2NsYXNzKj1sYW5ndWFnZS1dOjpzZWxlY3Rpb24sY29kZVtjbGFzcyo9bGFuZ3VhZ2UtXSA6OnNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV06OnNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV0gOjpzZWxlY3Rpb257dGV4dC1zaGFkb3c6bm9uZTtiYWNrZ3JvdW5kOiNiM2Q0ZmN9QG1lZGlhIHByaW50e2NvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de3RleHQtc2hhZG93Om5vbmV9fXByZVtjbGFzcyo9bGFuZ3VhZ2UtXXtwYWRkaW5nOjFlbTttYXJnaW46LjVlbSAwO292ZXJmbG93OmF1dG99Om5vdChwcmUpPmNvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de2JhY2tncm91bmQ6I2Y1ZjJmMH06bm90KHByZSk+Y29kZVtjbGFzcyo9bGFuZ3VhZ2UtXXtwYWRkaW5nOi4xZW07Ym9yZGVyLXJhZGl1czouM2VtO3doaXRlLXNwYWNlOm5vcm1hbH0udG9rZW4uY2RhdGEsLnRva2VuLmNvbW1lbnQsLnRva2VuLmRvY3R5cGUsLnRva2VuLnByb2xvZ3tjb2xvcjojNzA4MDkwfS50b2tlbi5wdW5jdHVhdGlvbntjb2xvcjojOTk5fS5uYW1lc3BhY2V7b3BhY2l0eTouN30udG9rZW4uYm9vbGVhbiwudG9rZW4uY29uc3RhbnQsLnRva2VuLmRlbGV0ZWQsLnRva2VuLm51bWJlciwudG9rZW4ucHJvcGVydHksLnRva2VuLnN5bWJvbCwudG9rZW4udGFne2NvbG9yOiM5MDV9LnRva2VuLmF0dHItbmFtZSwudG9rZW4uYnVpbHRpbiwudG9rZW4uY2hhciwudG9rZW4uaW5zZXJ0ZWQsLnRva2VuLnNlbGVjdG9yLC50b2tlbi5zdHJpbmd7Y29sb3I6IzY5MH0ubGFuZ3VhZ2UtY3NzIC50b2tlbi5zdHJpbmcsLnN0eWxlIC50b2tlbi5zdHJpbmcsLnRva2VuLmVudGl0eSwudG9rZW4ub3BlcmF0b3IsLnRva2VuLnVybHtjb2xvcjojYTY3ZjU5O2JhY2tncm91bmQ6aHNsYSgwLDAlLDEwMCUsLjUpfS50b2tlbi5hdHJ1bGUsLnRva2VuLmF0dHItdmFsdWUsLnRva2VuLmtleXdvcmR7Y29sb3I6IzA3YX0udG9rZW4uZnVuY3Rpb257Y29sb3I6I2RkNGE2OH0udG9rZW4uaW1wb3J0YW50LC50b2tlbi5yZWdleCwudG9rZW4udmFyaWFibGV7Y29sb3I6I2U5MH0udG9rZW4uYm9sZCwudG9rZW4uaW1wb3J0YW50e2ZvbnQtd2VpZ2h0OjcwMH0udG9rZW4uaXRhbGlje2ZvbnQtc3R5bGU6aXRhbGljfS50b2tlbi5lbnRpdHl7Y3Vyc29yOmhlbHB9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL2dldC1zdGFydGVkLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDczXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5oeV9jLWljb257Zm9udC1mYW1pbHk6VGVsdXMgSWNvbixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjt0ZXh0LWRlY29yYXRpb246bm9uZTt0ZXh0LXJlbmRlcmluZzpvcHRpbWl6ZUxlZ2liaWxpdHk7Y29sb3I6aW5oZXJpdDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Zm9udC1zaXplOmluaGVyaXQ7bGluZS1oZWlnaHQ6aW5oZXJpdH0uaHlfYy1pY29uX19zcXVhcmV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjIuNXJlbTtsaW5lLWhlaWdodDozcmVtO3dpZHRoOjNyZW07aGVpZ2h0OjNyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tMnh7Zm9udC1zaXplOjJlbX0uaHlfYy1pY29uLS0zeHtmb250LXNpemU6M2VtfS5oeV9jLWljb24tLTR4e2ZvbnQtc2l6ZTo0ZW19Lmh5X2MtaWNvbl9fc3R5bGVndWlkZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6MnJlbTtsaW5lLWhlaWdodDo0cmVtO3dpZHRoOjRyZW07aGVpZ2h0OjRyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXRoaWNrLW91dGxpbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uaHlfYy1pY29uLS1jaXJjbGUtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA1XFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDZcXFwifS5oeV9jLWljb24tLXRlbHVzLWxvZ286YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA5XFxcIn0uaHlfYy1pY29uLS1iYXItY2hhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEwXFxcIn0uaHlfYy1pY29uLS1waWN0dXJlLWZyYW1lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMVxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEyXFxcIn0uaHlfYy1pY29uLS1wYXBlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTNcXFwifS5oeV9jLWljb24tLWZvbGRlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTRcXFwifS5oeV9jLWljb24tLXNoYXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNVxcXCJ9Lmh5X2MtaWNvbi0tbWFnbmlmeS1nbGFzczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTZcXFwifS5oeV9jLWljb24tLXdhcm5pbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE4XFxcIn0uaHlfYy1pY29uLS1zdGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOVxcXCJ9Lmh5X2MtaWNvbi0tc3RhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjBcXFwifS5oeV9jLWljb24tLWhlYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMVxcXCJ9Lmh5X2MtaWNvbi0tbGlmZXNhdmVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMlxcXCJ9Lmh5X2MtaWNvbi0taGFtYnVyZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNFxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI1XFxcIn0uaHlfYy1pY29uLS1ncmlkLWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI2XFxcIn0uaHlfYy1pY29uLS1saWdodGJ1bGI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI3XFxcIn0uaHlfYy1pY29uLS1zcGVlZG9tZXRlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjhcXFwifS5oeV9jLWljb24tLWFkZC1yZW1vdmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI5XFxcIn0uaHlfYy1pY29uLS1jYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMFxcXCJ9Lmh5X2MtaWNvbi0tdHdpdHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzFcXFwifS5oeV9jLWljb24tLWZhY2Vib29rOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMlxcXCJ9Lmh5X2MtaWNvbi0teW91dHViZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzNcXFwifS5oeV9jLWljb24tLWdvb2dsZS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNFxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzVcXFwifS5oeV9jLWljb24tLXBsYXktYnV0dG9uLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNlxcXCJ9Lmh5X2MtaWNvbi0tdmlkZW8taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM3XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM5XFxcIn0uaHlfYy1pY29uLS1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDBcXFwifS5oeV9jLWljb24tLWNsb2NrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MVxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDJcXFwifS5oeV9jLWljb24tLXRhYmxldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDNcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDRcXFwifS5oeV9jLWljb24tLW1vdXNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NVxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ2XFxcIn0uaHlfYy1pY29uLS1wYXBlci1ub3Rlcy1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDdcXFwifS5oeV9jLWljb24tLXR2OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OFxcXCJ9Lmh5X2MtaWNvbi0tZmlsbTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDlcXFwifS5oeV9jLWljb24tLWVudmVsb3BlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MFxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MVxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTJcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUzXFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU1XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTZcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTdcXFwifS5oeV9jLWljb24tLXVzZXJzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1OVxcXCJ9Lmh5X2MtaWNvbi0tdXNlcnMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjBcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYyXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWJveGVkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2M1xcXCJ9Lmh5X2MtaWNvbi0tZ2VhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjRcXFwifS5oeV9jLWljb24tLWdlYXItY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjVcXFwifS5oeV9jLWljb24tLWdlYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY2XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OFxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jay1pbnZlcmV0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY5XFxcIn0uaHlfYy1pY29uLS1zdGFja2VkLXBhcGVycy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzFcXFwifS5oeV9jLWljb24tLW11c2ljLW5vdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcyXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3M1xcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NVxcXCJ9Lmh5X2MtaWNvbi0tbW91c2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc2XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzdcXFwifS5oeV9jLWljb24tLXBhcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OFxcXCJ9Lmh5X2MtaWNvbi0tdHYtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc5XFxcIn0uaHlfYy1pY29uLS1maWxtLWNsYXBwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgwXFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODFcXFwifS5oeV9jLWljb24tLXBob25lLWhhbmRzZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgyXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgzXFxcIn0uaHlfYy1pY29uLS1ob21lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NVxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODZcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTNcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTVcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24tY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTZcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTdcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDBcXFwifS5oeV9jLWljb24tLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAyXFxcIn0uaHlfYy1pY29uLS14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNFxcXCJ9Lmh5X2MtaWNvbi0teC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNVxcXCJ9Lmh5X2MtaWNvbi0teC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDZcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDhcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOVxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTExXFxcIn0uaHlfYy1pY29uLS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMlxcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExM1xcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTRcXFwifS5oeV9jLWljb24tLW1pbnVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNVxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTZcXFwifS5oeV9jLWljb24tLW1pbnVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExN1xcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1idWJibGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE5XFxcIn0uaHlfYy1pY29uLS1jaGF0LWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIwXFxcIn0uaHlfYy1pY29uLS1jaGF0LWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMlxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjNcXFwifS5oeV9jLWljb24tLXNpbS1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNVxcXCJ9Lmh5X2MtaWNvbi0tY2FsY3VsYXRvcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjZcXFwifS5oeV9jLWljb24tLWJsdWV0b290aC1oZWFkc2V0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyN1xcXCJ9Lmh5X2MtaWNvbi0tb3V0Z29pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjlcXFwifS5oeV9jLWljb24tLWluY29taW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMwXFxcIn0uaHlfYy1pY29uLS1jYXV0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzJcXFwifS5oeV9jLWljb24tLXdpZmk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMzXFxcIn0uaHlfYy1pY29uLS10aGluLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzVcXFwifS5oeV9jLWljb24tLWluZm8taW52ZXJ0ZWQ6YmVmb3JlLC5oeV9jLWljb24tLWluZm86YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM2XFxcIn0uaHlfYy1pY29uLS10cmVuZC11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzhcXFwifS5oeV9jLWljb24tLWdsb2JlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MlxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NFxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDVcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NlxcXCJ9Lmh5X2MtaWNvbi0tb3ZlcnZpZXctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ3XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1jaXJjbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ4XFxcIn0uaHlfYy1pY29uLS1wdWxzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDlcXFwifS5oeV9jLWljb24tLW1pa2UtbW9iaWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MFxcXCJ9Lmh5X2MtaWNvbi0tcmV3YXJkcy1iYWRnZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTFcXFwifS5oeV9jLWljb24tLWZpbHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTJcXFwifS5oeV9jLWljb24tLXNjaGVkdWxlLXRhbGs6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUzXFxcIn0uaHlfYy1pY29uLS13YXJuaW5nOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NVxcXCJ9Lmh5X2MtaWNvbi0tY2FydC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTZcXFwifS5oeV9jLWljb24tLWxpdmUtY2hhdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTdcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3QtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU4XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OVxcXCJ9Lmh5X2MtaWNvbi0tY2xvdWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYwXFxcIn0uaHlfYy1pY29uLS1kYXRhOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MVxcXCJ9Lmh5X2MtaWNvbi0tZGVsaXZlcnktdHJ1Y2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYyXFxcIn0uaHlfYy1pY29uLS1wcm90ZWN0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2M1xcXCJ9Lmh5X2MtaWNvbi0tY29sb3VyLXBpY2tlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjRcXFwifS5oeV9jLWljb24tLW11bHRpLWFjY291bnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY1XFxcIn0uaHlfYy1pY29uLS1hY2Nlc3Nvcmllcy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjZcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2N1xcXCJ9Lmh5X2MtaWNvbi0tZG9sbGFyLXNpZ246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY4XFxcIn0uaHlfYy1pY29uLS1saW5rLWFjY291bnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY5XFxcIn0uaHlfYy1pY29uLS1kYXRhLW1hbmFnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcwXFxcIn0uaHlfYy1pY29uLS1hY2Nlc3NvcmllczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzFcXFwifS5oeV9jLWljb24tLXRvb2xzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MlxcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTczXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzRcXFwifS5oeV9jLWljb24tLWlwLWZheDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzVcXFwifS5oeV9jLWljb24tLWlwLWZheC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzZcXFwifS5oeV9jLWljb24tLWxpbmtlZC1pbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzdcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OFxcXCJ9Lmh5X2MtaWNvbi0tbWljcm9waG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzlcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MFxcXCJ9Lmh5X2MtaWNvbi0tbmV0d29ya2luZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODFcXFwifS5oeV9jLWljb24tLWN5Y2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MlxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4M1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NFxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1hZGQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg1XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODZcXFwifS5mYWRlLXRyYW5zaXRpb257LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZX0uZmFkZS1lbnRlciwuZmFkZS1sZWF2ZXtvcGFjaXR5OjB9LmMtYWxlcnR7cG9zaXRpb246cmVsYXRpdmU7cGFkZGluZzo3cHggMTVweDttYXJnaW4tYm90dG9tOjFyZW07Ym9yZGVyOjFweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItcmFkaXVzOi4yNXJlbX0uYy1hbGVydC0taW5mb3tiYWNrZ3JvdW5kLWNvbG9yOiMzMzM7Ym9yZGVyLWNvbG9yOiMwMDA7Y29sb3I6I2ZmZn0uYy1hbGVydC0taW5mbyBidXR0b257Y29sb3I6I2ZmZn0uYy1hbGVydC0tc3VjY2Vzc3tiYWNrZ3JvdW5kLWNvbG9yOiNlNmZmY2M7Ym9yZGVyLWNvbG9yOiM5ZjM7Y29sb3I6IzQwODAwMH0uYy1hbGVydC0tZXJyb3J7YmFja2dyb3VuZC1jb2xvcjojZjhkZGUzO2JvcmRlci1jb2xvcjojZjJjMGNhO2NvbG9yOiNjODEyMzV9LmMtYWxlcnRfX2Nsb3NlLWJ1dHRvbntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDoxMHB4Oy13ZWJraXQtYXBwZWFyYW5jZTpub25lO3BhZGRpbmc6MDtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kOjAgMDtib3JkZXI6MDtmb250LXNpemU6Mi41cmVtO29wYWNpdHk6LjJ9LmMtYWxlcnRfX2Nsb3NlLWJ1dHRvbjpob3ZlcntvcGFjaXR5Oi4zfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvYWxlcnQvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gNzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmh5X2MtaWNvbntmb250LWZhbWlseTpUZWx1cyBJY29uLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO3RleHQtZGVjb3JhdGlvbjpub25lO3RleHQtcmVuZGVyaW5nOm9wdGltaXplTGVnaWJpbGl0eTtjb2xvcjppbmhlcml0O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtmb250LXNpemU6aW5oZXJpdDtsaW5lLWhlaWdodDppbmhlcml0fS5oeV9jLWljb25fX3NxdWFyZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6Mi41cmVtO2xpbmUtaGVpZ2h0OjNyZW07d2lkdGg6M3JlbTtoZWlnaHQ6M3JlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS0yeHtmb250LXNpemU6MmVtfS5oeV9jLWljb24tLTN4e2ZvbnQtc2l6ZTozZW19Lmh5X2MtaWNvbi0tNHh7Zm9udC1zaXplOjRlbX0uaHlfYy1pY29uX19zdHlsZWd1aWRle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToycmVtO2xpbmUtaGVpZ2h0OjRyZW07d2lkdGg6NHJlbTtoZWlnaHQ6NHJlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS1jaXJjbGUtdGhpY2stb3V0bGluZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDFcXFwifS5oeV9jLWljb24tLWNpcmNsZS1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDJcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDVcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtbG9nbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDlcXFwifS5oeV9jLWljb24tLWJhci1jaGFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTBcXFwifS5oeV9jLWljb24tLXBpY3R1cmUtZnJhbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDExXFxcIn0uaHlfYy1pY29uLS1wYXBlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTJcXFwifS5oeV9jLWljb24tLXBhcGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxM1xcXCJ9Lmh5X2MtaWNvbi0tZm9sZGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNFxcXCJ9Lmh5X2MtaWNvbi0tc2hhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE1XFxcIn0uaHlfYy1pY29uLS1tYWduaWZ5LWdsYXNzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNlxcXCJ9Lmh5X2MtaWNvbi0td2FybmluZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMThcXFwifS5oeV9jLWljb24tLXN0YXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE5XFxcIn0uaHlfYy1pY29uLS1zdGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMFxcXCJ9Lmh5X2MtaWNvbi0taGVhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIxXFxcIn0uaHlfYy1pY29uLS1saWZlc2F2ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIyXFxcIn0uaHlfYy1pY29uLS1oYW1idXJnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI0XFxcIn0uaHlfYy1pY29uLS1ncmlkLXNxdWFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjVcXFwifS5oeV9jLWljb24tLWdyaWQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjZcXFwifS5oeV9jLWljb24tLWxpZ2h0YnVsYjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjdcXFwifS5oeV9jLWljb24tLXNwZWVkb21ldGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOFxcXCJ9Lmh5X2MtaWNvbi0tYWRkLXJlbW92ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjlcXFwifS5oeV9jLWljb24tLWNhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMwXFxcIn0uaHlfYy1pY29uLS10d2l0dGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMVxcXCJ9Lmh5X2MtaWNvbi0tZmFjZWJvb2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMyXFxcIn0uaHlfYy1pY29uLS15b3V0dWJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzM1xcXCJ9Lmh5X2MtaWNvbi0tZ29vZ2xlLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM0XFxcIn0uaHlfYy1pY29uLS10cmVuZC1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNVxcXCJ9Lmh5X2MtaWNvbi0tcGxheS1idXR0b24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM2XFxcIn0uaHlfYy1pY29uLS12aWRlby1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzdcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM4XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzlcXFwifS5oeV9jLWljb24tLWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MFxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQxXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MlxcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NFxcXCJ9Lmh5X2MtaWNvbi0tbW91c2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ1XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDZcXFwifS5oeV9jLWljb24tLXBhcGVyLW5vdGVzLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0N1xcXCJ9Lmh5X2MtaWNvbi0tdHY6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ4XFxcIn0uaHlfYy1pY29uLS1maWxtOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OVxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUwXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUxXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MlxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTNcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTVcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NlxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1N1xcXCJ9Lmh5X2MtaWNvbi0tdXNlcnM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU5XFxcIn0uaHlfYy1pY29uLS11c2Vycy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MFxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjJcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtYm94ZWQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYzXFxcIn0uaHlfYy1pY29uLS1nZWFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NFxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NVxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjZcXFwifS5oeV9jLWljb24tLXBhZGxvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY4XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrLWludmVyZXRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjlcXFwifS5oeV9jLWljb24tLXN0YWNrZWQtcGFwZXJzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MVxcXCJ9Lmh5X2MtaWNvbi0tbXVzaWMtbm90ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzJcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDczXFxcIn0uaHlfYy1pY29uLS10YWJsZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc0XFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc1XFxcIn0uaHlfYy1pY29uLS1tb3VzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzZcXFwifS5oeV9jLWljb24tLXByaWNldGFnLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3N1xcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc4XFxcIn0uaHlfYy1pY29uLS10di1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzlcXFwifS5oeV9jLWljb24tLWZpbG0tY2xhcHBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODBcXFwifS5oeV9jLWljb24tLWVudmVsb3BlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MVxcXCJ9Lmh5X2MtaWNvbi0tcGhvbmUtaGFuZHNldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODJcXFwifS5oeV9jLWljb24tLXVzYi1zdGljay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODNcXFwifS5oeV9jLWljb24tLWhvbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg0XFxcIn0uaHlfYy1pY29uLS1ob21lLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg1XFxcIn0uaHlfYy1pY29uLS1ob21lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NlxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTFcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkyXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5M1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk0XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5N1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOThcXFwifS5oeV9jLWljb24tLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk5XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDJcXFwifS5oeV9jLWljb24tLXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA0XFxcIn0uaHlfYy1pY29uLS14LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA1XFxcIn0uaHlfYy1pY29uLS14LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNlxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOFxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA5XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEwXFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTFcXFwifS5oeV9jLWljb24tLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEyXFxcIn0uaHlfYy1pY29uLS1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEzXFxcIn0uaHlfYy1pY29uLS1wbHVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNFxcXCJ9Lmh5X2MtaWNvbi0tbWludXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE1XFxcIn0uaHlfYy1pY29uLS1taW51cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNlxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE3XFxcIn0uaHlfYy1pY29uLS1jaGF0LWJ1YmJsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTlcXFwifS5oeV9jLWljb24tLWNoYXQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjBcXFwifS5oeV9jLWljb24tLWNoYXQtY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIxXFxcIn0uaHlfYy1pY29uLS1jaGF0LXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIyXFxcIn0uaHlfYy1pY29uLS1jaGF0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyM1xcXCJ9Lmh5X2MtaWNvbi0tc2ltLWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI1XFxcIn0uaHlfYy1pY29uLS1jYWxjdWxhdG9yOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNlxcXCJ9Lmh5X2MtaWNvbi0tYmx1ZXRvb3RoLWhlYWRzZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI3XFxcIn0uaHlfYy1pY29uLS1vdXRnb2luZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyOVxcXCJ9Lmh5X2MtaWNvbi0taW5jb21pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzBcXFwifS5oeV9jLWljb24tLWNhdXRpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMxXFxcIn0uaHlfYy1pY29uLS13aWZpLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMlxcXCJ9Lmh5X2MtaWNvbi0td2lmaTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzNcXFwifS5oeV9jLWljb24tLXRoaW4tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNVxcXCJ9Lmh5X2MtaWNvbi0taW5mby1pbnZlcnRlZDpiZWZvcmUsLmh5X2MtaWNvbi0taW5mbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzZcXFwifS5oeV9jLWljb24tLXRyZW5kLXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzOFxcXCJ9Lmh5X2MtaWNvbi0tZ2xvYmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQwXFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQyXFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ0XFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NVxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ2XFxcIn0uaHlfYy1pY29uLS1vdmVydmlldy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDdcXFwifS5oeV9jLWljb24tLXRlbHVzLWNpcmNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDhcXFwifS5oeV9jLWljb24tLXB1bHNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OVxcXCJ9Lmh5X2MtaWNvbi0tbWlrZS1tb2JpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUwXFxcIn0uaHlfYy1pY29uLS1yZXdhcmRzLWJhZGdlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MVxcXCJ9Lmh5X2MtaWNvbi0tZmlsdGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MlxcXCJ9Lmh5X2MtaWNvbi0tc2NoZWR1bGUtdGFsazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTNcXFwifS5oeV9jLWljb24tLXdhcm5pbmc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU0XFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU1XFxcIn0uaHlfYy1pY29uLS1jYXJ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NlxcXCJ9Lmh5X2MtaWNvbi0tbGl2ZS1jaGF0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1N1xcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNThcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3Q6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU5XFxcIn0uaHlfYy1pY29uLS1jbG91ZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjBcXFwifS5oeV9jLWljb24tLWRhdGE6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYxXFxcIn0uaHlfYy1pY29uLS1kZWxpdmVyeS10cnVjazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjJcXFwifS5oeV9jLWljb24tLXByb3RlY3Rpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYzXFxcIn0uaHlfYy1pY29uLS1jb2xvdXItcGlja2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NFxcXCJ9Lmh5X2MtaWNvbi0tbXVsdGktYWNjb3VudC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjVcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NlxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY3XFxcIn0uaHlfYy1pY29uLS1kb2xsYXItc2lnbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjhcXFwifS5oeV9jLWljb24tLWxpbmstYWNjb3VudDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjlcXFwifS5oeV9jLWljb24tLWRhdGEtbWFuYWdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzBcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MVxcXCJ9Lmh5X2MtaWNvbi0tdG9vbHMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcyXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzNcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NFxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NVxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NlxcXCJ9Lmh5X2MtaWNvbi0tbGlua2VkLWluLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3N1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc4XFxcIn0uaHlfYy1pY29uLS1taWNyb3Bob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgwXFxcIn0uaHlfYy1pY29uLS1uZXR3b3JraW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MVxcXCJ9Lmh5X2MtaWNvbi0tY3ljbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgyXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgzXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg0XFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWFkZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODVcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NlxcXCJ9LmMtY29sbGFwc2FibGUtcGFuZWx7Ym9yZGVyOjFweCBzb2xpZCAjZTJlMmUyO2JveC1zaGFkb3c6MCAxcHggM3B4IDFweCAjZTJlMmUyfS5jLWNvbGxhcHNhYmxlLXBhbmVsX19oZWFkZXJ7Y3Vyc29yOnBvaW50ZXI7cGFkZGluZzoxMHB4IDE1cHg7cG9zaXRpb246cmVsYXRpdmV9LmMtY29sbGFwc2FibGUtcGFuZWxfX2hlYWRlcjphZnRlcntwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDoxZW07dG9wOi43NWVtO2ZvbnQtc2l6ZTouNzVlbTtmb250LWZhbWlseTpUZWx1cyBJY29uO2NvbnRlbnQ6J1xcXFxFMTE0Jztjb2xvcjojNTdhNzA4fS5jLWNvbGxhcHNhYmxlLXBhbmVsX19oZWFkZXItLW9wZW46YWZ0ZXJ7Y29udGVudDonXFxcXEUxMTcnfS5jLWNvbGxhcHNhYmxlLXBhbmVsX19ib2R5e2JvcmRlci10b3A6MXB4IHNvbGlkICNlMmUyZTI7bWF4LWhlaWdodDowO3BhZGRpbmc6MCAxNXB4Oy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2UtaW4tb3V0O3RyYW5zaXRpb246YWxsIC4zcyBlYXNlLWluLW91dDtvdmVyZmxvdzpoaWRkZW47b3BhY2l0eTowfS5jLWNvbGxhcHNhYmxlLXBhbmVsX19ib2R5LS1vcGVue29wYWNpdHk6MTtwYWRkaW5nOjE1cHg7bWF4LWhlaWdodDo5OTk5cHh9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9jb2xsYXBzYWJsZS1wYW5lbC9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSA3NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYy1sZWdhbC1jb250YWluZXJfX29yZGVyZWQtbGlzdHttYXJnaW4tdG9wOjEwcHg7bWFyZ2luLWJvdHRvbToyMHB4O2xpc3Qtc3R5bGU6ZGVjaW1hbDtsaXN0LXN0eWxlLXR5cGU6ZGVjaW1hbDtwYWRkaW5nLWxlZnQ6MjBweH0uYy1sZWdhbC1jb250YWluZXJfX3Vub3JkZXJlZC1saXN0e21hcmdpbi10b3A6MTBweDttYXJnaW4tYm90dG9tOjIwcHg7cGFkZGluZy1sZWZ0OjIwcHg7bGlzdC1zdHlsZTpub25lO2xpc3Qtc3R5bGUtdHlwZTpub25lfS5jLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVte2xpbmUtaGVpZ2h0OjE5cHg7bWFyZ2luLWJvdHRvbToxMHB4O3BhZGRpbmc6MTBweH0uYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbS0tYWN0aXZle2JhY2tncm91bmQtY29sb3I6I2Y5ZjFmZn0uYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbSBhe2NvbG9yOiM0OTE2NmQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Ym9yZGVyLWJvdHRvbToxcHggZG90dGVkO3BhZGRpbmctYm90dG9tOjFweH0uYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbSBhOmhvdmVye2NvbG9yOiM4YzY4YTZ9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb250YWluZXIudnVlXG4gKiogbW9kdWxlIGlkID0gNzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtbGVnYWwtc3Vwe2ZvbnQtc2l6ZTouNzVlbTtsaW5lLWhlaWdodDowO3ZlcnRpY2FsLWFsaWduOnN1cGVyO3RleHQtZGVjb3JhdGlvbjpub25lO3RvcDowIWltcG9ydGFudDtjdXJzb3I6cG9pbnRlcn0uYy1sZWdhbC1zdXAgYXtjb2xvcjojNDkxNjZkfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY291bnRlci52dWVcbiAqKiBtb2R1bGUgaWQgPSA3N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIubm8tc2Nyb2xse292ZXJmbG93LXg6aGlkZGVuO292ZXJmbG93OmhpZGRlbjtvdmVyZmxvdy15OmhpZGRlbjtwb3NpdGlvbjpyZWxhdGl2ZTtoZWlnaHQ6MTAwJX0uYy1vdmVybGF5LWNvbnRhaW5lcl9fY3VydGFpbntvcGFjaXR5OjA7LXdlYmtpdC10cmFuc2l0aW9uOm9wYWNpdHkgLjdzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSk7dHJhbnNpdGlvbjpvcGFjaXR5IC43cyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpfS5jLW92ZXJsYXktY29udGFpbmVyX19jdXJ0YWluLS1hY3RpdmV7b3BhY2l0eToxO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuNTUpO3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDtyaWdodDowO2JvdHRvbTowfS5jLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5c3twb3NpdGlvbjpmaXhlZDtyaWdodDowO3RvcDowO2JvdHRvbTowO2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuNSk7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgxMDAlKTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgxMDAlKTstd2Via2l0LXRyYW5zaXRpb246LjdzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSk7dHJhbnNpdGlvbjouN3MgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKX1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjU5OXB4KXsuYy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXN7d2lkdGg6MTAwJX19QG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDo2MDBweCl7LmMtb3ZlcmxheS1jb250YWluZXJfX292ZXJsYXlze3dpZHRoOjY2JX19LmMtb3ZlcmxheS1jb250YWluZXJfX292ZXJsYXlzLS1hY3RpdmV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgwKTt6LWluZGV4Ojk5OTk5fVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LWNvbnRhaW5lci52dWVcbiAqKiBtb2R1bGUgaWQgPSA3OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYy1vdmVybGF5e2hlaWdodDoxMDAlO3dpZHRoOjEwMCU7YmFja2dyb3VuZC1jb2xvcjojZmZmfS5jLW92ZXJsYXlfX2hlYWRlcntwYWRkaW5nOjIwcHg7cG9zaXRpb246Zml4ZWQ7dG9wOjA7aGVpZ2h0Ojc1cHg7d2lkdGg6MTAwJTtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZTJlMmUyO2JhY2tncm91bmQtY29sb3I6I2Y1ZjZmN30uYy1vdmVybGF5X19jbG9zZS1idXR0b257Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZDowO2JvcmRlcjowO3Bvc2l0aW9uOmFic29sdXRlO3RvcDoyMHB4O3JpZ2h0OjIwcHg7Zm9udC1mYW1pbHk6VGVsdXMgSWNvbjtmb250LXNpemU6MmVtO2NvbG9yOiM0OTE2NmR9LmMtb3ZlcmxheV9fY2xvc2UtYnV0dG9uOmJlZm9yZXtjb250ZW50OidcXFxcRTEwNid9LmMtb3ZlcmxheV9fYm9keXtwb3NpdGlvbjpmaXhlZDstd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzp0b3VjaDtvdmVyZmxvdy15OnNjcm9sbDt0b3A6NzVweDtib3R0b206MDt3aWR0aDoxMDAlO3BhZGRpbmc6MjBweCAyMHB4IDUwcHh9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXkudnVlXG4gKiogbW9kdWxlIGlkID0gNzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiQC13ZWJraXQta2V5ZnJhbWVzIHJvdGF0ZXt0b3std2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMXR1cm4pO3RyYW5zZm9ybTpyb3RhdGUoMXR1cm4pfX1Aa2V5ZnJhbWVzIHJvdGF0ZXt0b3std2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMXR1cm4pO3RyYW5zZm9ybTpyb3RhdGUoMXR1cm4pfX1ALXdlYmtpdC1rZXlmcmFtZXMgZGFzaHswJXtzdHJva2UtZGFzaGFycmF5OjEsMjAwO3N0cm9rZS1kYXNob2Zmc2V0OjB9NTAle3N0cm9rZS1kYXNoYXJyYXk6ODksMjAwO3N0cm9rZS1kYXNob2Zmc2V0Oi0zNX10b3tzdHJva2UtZGFzaGFycmF5Ojg5LDIwMDtzdHJva2UtZGFzaG9mZnNldDotMTI0fX1Aa2V5ZnJhbWVzIGRhc2h7MCV7c3Ryb2tlLWRhc2hhcnJheToxLDIwMDtzdHJva2UtZGFzaG9mZnNldDowfTUwJXtzdHJva2UtZGFzaGFycmF5Ojg5LDIwMDtzdHJva2UtZGFzaG9mZnNldDotMzV9dG97c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTEyNH19QC13ZWJraXQta2V5ZnJhbWVzIHNwaW5uZXItY29sb3J7MCUsdG97c3Ryb2tlOiM2YzB9MjUle3N0cm9rZTojNmMwfTUwJXtzdHJva2U6IzU3YTcwOH03NSV7c3Ryb2tlOiM1N2E3MDh9fUBrZXlmcmFtZXMgc3Bpbm5lci1jb2xvcnswJSx0b3tzdHJva2U6IzZjMH0yNSV7c3Ryb2tlOiM2YzB9NTAle3N0cm9rZTojNTdhNzA4fTc1JXtzdHJva2U6IzU3YTcwOH19LmMtc3Bpbm5lcntkaXNwbGF5Oi13ZWJraXQtYm94O2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy13ZWJraXQtYm94LWFsaWduOmNlbnRlcjstbXMtZmxleC1hbGlnbjpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2Rpc3BsYXk6LXdlYmtpdC1mbGV4Oy13ZWJraXQtYWxpZ24taXRlbXM6Y2VudGVyOy13ZWJraXQtYm94LXBhY2s6Y2VudGVyOy1tcy1mbGV4LXBhY2s6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7bWFyZ2luOmF1dG87LXdlYmtpdC1ib3gtb3JpZW50OnZlcnRpY2FsOy13ZWJraXQtYm94LWRpcmVjdGlvbjpub3JtYWw7LW1zLWZsZXgtZGlyZWN0aW9uOmNvbHVtbjtmbGV4LWRpcmVjdGlvbjpjb2x1bW59LmMtc3Bpbm5lci0tZnVsbHNjcmVlbntwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7cmlnaHQ6MDtib3R0b206MDt6LWluZGV4Ojk5OTg7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtiYWNrZ3JvdW5kOmhzbGEoMCwwJSwxMDAlLC44KX0uYy1zcGlubmVyIHN2Z3thbmltYXRpb24tbmFtZTpyb3RhdGU7LXdlYmtpdC1hbmltYXRpb24tbmFtZTpyb3RhdGU7LW1vei1hbmltYXRpb24tbmFtZTpyb3RhdGU7YW5pbWF0aW9uLWR1cmF0aW9uOjEuOHM7LXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246MS44czstbW96LWFuaW1hdGlvbi1kdXJhdGlvbjoxLjhzO2FuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6aW5maW5pdGU7LXdlYmtpdC1hbmltYXRpb24taXRlcmF0aW9uLWNvdW50OmluZmluaXRlOy1tb3otYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDppbmZpbml0ZTthbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmxpbmVhcjstd2Via2l0LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246bGluZWFyOy1tb3otYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpsaW5lYXI7aGVpZ2h0OjEwMHB4O3dpZHRoOjEwMHB4fS5jLXNwaW5uZXIgY2lyY2xle2FuaW1hdGlvbjpkYXNoIDEuN3MgZWFzZS1pbi1vdXQgaW5maW5pdGUgMHMsc3Bpbm5lci1jb2xvciA2cyBlYXNlLWluLW91dCBpbmZpbml0ZSAtLjc1czstd2Via2l0LWFuaW1hdGlvbjpkYXNoIDEuN3MgZWFzZS1pbi1vdXQgaW5maW5pdGUgMHMsc3Bpbm5lci1jb2xvciA2cyBlYXNlLWluLW91dCBpbmZpbml0ZSAtLjc1czstbW96LWFuaW1hdGlvbjpkYXNoIDEuN3MgZWFzZS1pbi1vdXQgaW5maW5pdGUgMHMsc3Bpbm5lci1jb2xvciA2cyBlYXNlLWluLW91dCBpbmZpbml0ZSAtLjc1c31cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL3NwaW5uZXIvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gODBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtc3RlcC10cmFja2VyX19pY29uLC5oeV9jLWljb257Zm9udC1mYW1pbHk6VGVsdXMgSWNvbixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjt0ZXh0LWRlY29yYXRpb246bm9uZTt0ZXh0LXJlbmRlcmluZzpvcHRpbWl6ZUxlZ2liaWxpdHk7Y29sb3I6aW5oZXJpdDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Zm9udC1zaXplOmluaGVyaXQ7bGluZS1oZWlnaHQ6aW5oZXJpdH0uaHlfYy1pY29uX19zcXVhcmV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjIuNXJlbTtsaW5lLWhlaWdodDozcmVtO3dpZHRoOjNyZW07aGVpZ2h0OjNyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tMnh7Zm9udC1zaXplOjJlbX0uaHlfYy1pY29uLS0zeHtmb250LXNpemU6M2VtfS5oeV9jLWljb24tLTR4e2ZvbnQtc2l6ZTo0ZW19Lmh5X2MtaWNvbl9fc3R5bGVndWlkZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6MnJlbTtsaW5lLWhlaWdodDo0cmVtO3dpZHRoOjRyZW07aGVpZ2h0OjRyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXRoaWNrLW91dGxpbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uaHlfYy1pY29uLS1jaXJjbGUtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA1XFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDZcXFwifS5oeV9jLWljb24tLXRlbHVzLWxvZ286YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA5XFxcIn0uaHlfYy1pY29uLS1iYXItY2hhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEwXFxcIn0uaHlfYy1pY29uLS1waWN0dXJlLWZyYW1lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMVxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEyXFxcIn0uaHlfYy1pY29uLS1wYXBlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTNcXFwifS5oeV9jLWljb24tLWZvbGRlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTRcXFwifS5oeV9jLWljb24tLXNoYXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNVxcXCJ9Lmh5X2MtaWNvbi0tbWFnbmlmeS1nbGFzczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTZcXFwifS5oeV9jLWljb24tLXdhcm5pbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE4XFxcIn0uaHlfYy1pY29uLS1zdGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOVxcXCJ9Lmh5X2MtaWNvbi0tc3RhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjBcXFwifS5oeV9jLWljb24tLWhlYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMVxcXCJ9Lmh5X2MtaWNvbi0tbGlmZXNhdmVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMlxcXCJ9Lmh5X2MtaWNvbi0taGFtYnVyZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNFxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI1XFxcIn0uaHlfYy1pY29uLS1ncmlkLWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI2XFxcIn0uaHlfYy1pY29uLS1saWdodGJ1bGI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI3XFxcIn0uaHlfYy1pY29uLS1zcGVlZG9tZXRlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjhcXFwifS5oeV9jLWljb24tLWFkZC1yZW1vdmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI5XFxcIn0uaHlfYy1pY29uLS1jYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMFxcXCJ9Lmh5X2MtaWNvbi0tdHdpdHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzFcXFwifS5oeV9jLWljb24tLWZhY2Vib29rOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMlxcXCJ9Lmh5X2MtaWNvbi0teW91dHViZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzNcXFwifS5oeV9jLWljb24tLWdvb2dsZS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNFxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzVcXFwifS5oeV9jLWljb24tLXBsYXktYnV0dG9uLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNlxcXCJ9Lmh5X2MtaWNvbi0tdmlkZW8taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM3XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM5XFxcIn0uaHlfYy1pY29uLS1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDBcXFwifS5oeV9jLWljb24tLWNsb2NrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MVxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDJcXFwifS5oeV9jLWljb24tLXRhYmxldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDNcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDRcXFwifS5oeV9jLWljb24tLW1vdXNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NVxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ2XFxcIn0uaHlfYy1pY29uLS1wYXBlci1ub3Rlcy1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDdcXFwifS5oeV9jLWljb24tLXR2OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OFxcXCJ9Lmh5X2MtaWNvbi0tZmlsbTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDlcXFwifS5oeV9jLWljb24tLWVudmVsb3BlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MFxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MVxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTJcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUzXFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU1XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTZcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTdcXFwifS5oeV9jLWljb24tLXVzZXJzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1OVxcXCJ9Lmh5X2MtaWNvbi0tdXNlcnMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjBcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYyXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWJveGVkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2M1xcXCJ9Lmh5X2MtaWNvbi0tZ2VhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjRcXFwifS5oeV9jLWljb24tLWdlYXItY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjVcXFwifS5oeV9jLWljb24tLWdlYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY2XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OFxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jay1pbnZlcmV0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY5XFxcIn0uaHlfYy1pY29uLS1zdGFja2VkLXBhcGVycy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzFcXFwifS5oeV9jLWljb24tLW11c2ljLW5vdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcyXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3M1xcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NVxcXCJ9Lmh5X2MtaWNvbi0tbW91c2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc2XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzdcXFwifS5oeV9jLWljb24tLXBhcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OFxcXCJ9Lmh5X2MtaWNvbi0tdHYtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc5XFxcIn0uaHlfYy1pY29uLS1maWxtLWNsYXBwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgwXFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODFcXFwifS5oeV9jLWljb24tLXBob25lLWhhbmRzZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgyXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgzXFxcIn0uaHlfYy1pY29uLS1ob21lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NVxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODZcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTNcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTVcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24tY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTZcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTdcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDBcXFwifS5oeV9jLWljb24tLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAyXFxcIn0uaHlfYy1pY29uLS14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNFxcXCJ9Lmh5X2MtaWNvbi0teC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNVxcXCJ9Lmh5X2MtaWNvbi0teC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDZcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDhcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOVxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTExXFxcIn0uaHlfYy1pY29uLS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMlxcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExM1xcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTRcXFwifS5oeV9jLWljb24tLW1pbnVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNVxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTZcXFwifS5oeV9jLWljb24tLW1pbnVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExN1xcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1idWJibGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE5XFxcIn0uaHlfYy1pY29uLS1jaGF0LWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIwXFxcIn0uaHlfYy1pY29uLS1jaGF0LWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMlxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjNcXFwifS5oeV9jLWljb24tLXNpbS1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNVxcXCJ9Lmh5X2MtaWNvbi0tY2FsY3VsYXRvcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjZcXFwifS5oeV9jLWljb24tLWJsdWV0b290aC1oZWFkc2V0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyN1xcXCJ9Lmh5X2MtaWNvbi0tb3V0Z29pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjlcXFwifS5oeV9jLWljb24tLWluY29taW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMwXFxcIn0uaHlfYy1pY29uLS1jYXV0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzJcXFwifS5oeV9jLWljb24tLXdpZmk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMzXFxcIn0uaHlfYy1pY29uLS10aGluLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzVcXFwifS5oeV9jLWljb24tLWluZm8taW52ZXJ0ZWQ6YmVmb3JlLC5oeV9jLWljb24tLWluZm86YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM2XFxcIn0uaHlfYy1pY29uLS10cmVuZC11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzhcXFwifS5oeV9jLWljb24tLWdsb2JlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MlxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NFxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDVcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NlxcXCJ9Lmh5X2MtaWNvbi0tb3ZlcnZpZXctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ3XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1jaXJjbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ4XFxcIn0uaHlfYy1pY29uLS1wdWxzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDlcXFwifS5oeV9jLWljb24tLW1pa2UtbW9iaWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MFxcXCJ9Lmh5X2MtaWNvbi0tcmV3YXJkcy1iYWRnZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTFcXFwifS5oeV9jLWljb24tLWZpbHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTJcXFwifS5oeV9jLWljb24tLXNjaGVkdWxlLXRhbGs6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUzXFxcIn0uaHlfYy1pY29uLS13YXJuaW5nOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NVxcXCJ9Lmh5X2MtaWNvbi0tY2FydC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTZcXFwifS5oeV9jLWljb24tLWxpdmUtY2hhdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTdcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3QtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU4XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OVxcXCJ9Lmh5X2MtaWNvbi0tY2xvdWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYwXFxcIn0uaHlfYy1pY29uLS1kYXRhOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MVxcXCJ9Lmh5X2MtaWNvbi0tZGVsaXZlcnktdHJ1Y2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYyXFxcIn0uaHlfYy1pY29uLS1wcm90ZWN0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2M1xcXCJ9Lmh5X2MtaWNvbi0tY29sb3VyLXBpY2tlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjRcXFwifS5oeV9jLWljb24tLW11bHRpLWFjY291bnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY1XFxcIn0uaHlfYy1pY29uLS1hY2Nlc3Nvcmllcy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjZcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2N1xcXCJ9Lmh5X2MtaWNvbi0tZG9sbGFyLXNpZ246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY4XFxcIn0uaHlfYy1pY29uLS1saW5rLWFjY291bnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY5XFxcIn0uaHlfYy1pY29uLS1kYXRhLW1hbmFnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcwXFxcIn0uaHlfYy1pY29uLS1hY2Nlc3NvcmllczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzFcXFwifS5oeV9jLWljb24tLXRvb2xzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MlxcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTczXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzRcXFwifS5oeV9jLWljb24tLWlwLWZheDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzVcXFwifS5oeV9jLWljb24tLWlwLWZheC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzZcXFwifS5oeV9jLWljb24tLWxpbmtlZC1pbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzdcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OFxcXCJ9Lmh5X2MtaWNvbi0tbWljcm9waG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzlcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MFxcXCJ9Lmh5X2MtaWNvbi0tbmV0d29ya2luZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODFcXFwifS5oeV9jLWljb24tLWN5Y2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MlxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4M1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NFxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1hZGQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg1XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODZcXFwifS5jLXN0ZXAtdHJhY2tlcntsaXN0LXN0eWxlOm5vbmU7cGFkZGluZzowO3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6LXdlYmtpdC1ib3g7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7LXdlYmtpdC1ib3gtcGFjazpqdXN0aWZ5Oy1tcy1mbGV4LXBhY2s6anVzdGlmeTtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjttYXJnaW46MXJlbSAtMS41cmVtfUBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6NjAwcHgpey5jLXN0ZXAtdHJhY2tlcntwYWRkaW5nLWJvdHRvbToyLjVyZW07bWFyZ2luOjFyZW0gMH19LmMtc3RlcC10cmFja2VyX19zdGVwe3dpZHRoOjEwMCU7cG9zaXRpb246cmVsYXRpdmU7dGV4dC1hbGlnbjpjZW50ZXJ9LmMtc3RlcC10cmFja2VyX19zdGVwOmFmdGVyLC5jLXN0ZXAtdHJhY2tlcl9fc3RlcDpiZWZvcmV7cG9zaXRpb246YWJzb2x1dGU7dG9wOjUwJTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpO3dpZHRoOmNhbGMoNTAlIC0gMS40cmVtKTtjb250ZW50OicgJztib3JkZXItYm90dG9tOi42cmVtIHNvbGlkICNhZWFlYWV9LmMtc3RlcC10cmFja2VyX19zdGVwOmJlZm9yZXtsZWZ0OjB9LmMtc3RlcC10cmFja2VyX19zdGVwOmFmdGVye3JpZ2h0OjB9LmMtc3RlcC10cmFja2VyIC5jLXN0ZXAtdHJhY2tlcl9fc3RlcDpmaXJzdC1jaGlsZDpiZWZvcmUsLmMtc3RlcC10cmFja2VyIC5jLXN0ZXAtdHJhY2tlcl9fc3RlcDpsYXN0LWNoaWxkOmFmdGVye2NvbnRlbnQ6bm9uZX0uYy1zdGVwLXRyYWNrZXJfX2xhYmVse3Bvc2l0aW9uOmFic29sdXRlO2JvdHRvbTotM3JlbTtsZWZ0OjA7Zm9udC1zaXplOjEuN3JlbTt3aWR0aDoxMDAlO2hlaWdodDoyLjVyZW07Zm9udC1mYW1pbHk6VGVsdXMgUmVndWxhcixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjojNjY2fUBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6NTk5cHgpey5jLXN0ZXAtdHJhY2tlcl9fbGFiZWx7ZGlzcGxheTpub25lfX0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWFjdGl2ZSAuYy1zdGVwLXRyYWNrZXJfX2xhYmVse2ZvbnQtZmFtaWx5OlRlbHVzIE1lZGl1bSxIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjojNDA4MDAwfS5jLXN0ZXAtdHJhY2tlcl9faWNvbntmb250LXNpemU6M3JlbTtjb2xvcjojYWVhZWFlfS5jLXN0ZXAtdHJhY2tlcl9faWNvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDFcXFwifS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tYWN0aXZlIC5jLXN0ZXAtdHJhY2tlcl9faWNvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDJcXFwifS5jLXN0ZXAtdHJhY2tlcl9fc2V0cC0tY2xpY2thYmxlIGF7Y3Vyc29yOnBvaW50ZXJ9LmMtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZTphZnRlcntib3JkZXItYm90dG9tOi42cmVtIHNvbGlkICM1N2E3MDh9LmMtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZSAuYy1zdGVwLXRyYWNrZXJfX2ljb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEwXFxcIn0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWFjdGl2ZSAuYy1zdGVwLXRyYWNrZXJfX2ljb246YmVmb3JlLC5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGUgLmMtc3RlcC10cmFja2VyX19pY29uOmJlZm9yZXtjb2xvcjojNTdhNzA4fS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGUrLmMtc3RlcC10cmFja2VyX19zdGVwLS1hY3RpdmU6YmVmb3JlLC5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGUrLmMtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZTpiZWZvcmV7Ym9yZGVyLWJvdHRvbTouNnJlbSBzb2xpZCAjNTdhNzA4fS5jLXN0ZXAtdHJhY2tlci1tb2JpbGUtbGFiZWx7Zm9udC1zaXplOjEuN3JlbTt0ZXh0LWFsaWduOmNlbnRlcjtmb250LWZhbWlseTpUZWx1cyBSZWd1bGFyLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2NvbG9yOiM2NjZ9QG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDo2MDBweCl7LmMtc3RlcC10cmFja2VyLW1vYmlsZS1sYWJlbHtkaXNwbGF5Om5vbmV9fS5jLXN0ZXAtdHJhY2tlci1tb2JpbGUtbGFiZWxfX3N0ZXB7Zm9udC1mYW1pbHk6VGVsdXMgTWVkaXVtLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2NvbG9yOiM0MDgwMDB9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9zdGVwLXRyYWNrZXIvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gODFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtdGFic19faGVhZGVye2xpc3Qtc3R5bGU6bm9uZTtwYWRkaW5nOjA7bWFyZ2luOjA7ZGlzcGxheTotd2Via2l0LWJveDtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleH0uYy10YWJzX19oZWFkZXItaXRlbXttYXJnaW4tdG9wOjJweDtoZWlnaHQ6NDVweDtwYWRkaW5nOjAgMnB4Oy13ZWJraXQtYm94LWZsZXg6MTstbXMtZmxleDoxO2ZsZXg6MX0uYy10YWJzX19oZWFkZXItaXRlbSBhe2JhY2tncm91bmQtY29sb3I6I2UyZTJlMjt0ZXh0LWRlY29yYXRpb246bm9uZTtwYWRkaW5nOjEzcHggMjBweDtjb2xvcjojNDkxNjZkO2Rpc3BsYXk6YmxvY2t9LmMtdGFic19faGVhZGVyLWl0ZW0tLWFjdGl2ZXttYXJnaW4tdG9wOjFweDtoZWlnaHQ6NDZweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym9yZGVyLXRvcDoxcHggc29saWQgI2UyZTJlMjtib3JkZXItbGVmdDoxcHggc29saWQgI2UyZTJlMjtib3JkZXItcmlnaHQ6MXB4IHNvbGlkICNlMmUyZTJ9LmMtdGFic19faGVhZGVyLWl0ZW0tLWFjdGl2ZSBhe2JhY2tncm91bmQtY29sb3I6I2ZmZjtjb2xvcjojMzMzfS5jLXRhYnNfX2hlYWRlci1pdGVtLS1kaXNhYmxlZCBhe2JhY2tncm91bmQtY29sb3I6I2Y1ZjZmNztjb2xvcjojYWVhZWFlO2N1cnNvcjpub3QtYWxsb3dlZH0uYy10YWJzX19ib2R5e2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICNlMmUyZTI7bWFyZ2luLXRvcDotMXB4O3BhZGRpbmc6MjBweH0uYy10YWJzX19wYW5le2Rpc3BsYXk6YmxvY2s7Ym9yZGVyLXRvcDpub25lO29wYWNpdHk6MDtoZWlnaHQ6MDtvdmVyZmxvdzpoaWRkZW47cGFkZGluZzowIDVweDstd2Via2l0LXRyYW5zaXRpb246YWxsIC41cyBlYXNlLW91dDt0cmFuc2l0aW9uOmFsbCAuNXMgZWFzZS1vdXR9LmMtdGFic19fcGFuZS0tYWN0aXZle29wYWNpdHk6MTtwYWRkaW5nOjVweDtoZWlnaHQ6YXV0b31cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL3RhYi90YWJzLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDgyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIEBvdmVydmlldyBlczYtcHJvbWlzZSAtIGEgdGlueSBpbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlcy9BKy5cbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDE0IFllaHVkYSBLYXR6LCBUb20gRGFsZSwgU3RlZmFuIFBlbm5lciBhbmQgY29udHJpYnV0b3JzIChDb252ZXJzaW9uIHRvIEVTNiBBUEkgYnkgSmFrZSBBcmNoaWJhbGQpXG4gKiBAbGljZW5zZSAgIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlXG4gKiAgICAgICAgICAgIFNlZSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vamFrZWFyY2hpYmFsZC9lczYtcHJvbWlzZS9tYXN0ZXIvTElDRU5TRVxuICogQHZlcnNpb24gICAzLjIuMVxuICovXG5cbihmdW5jdGlvbigpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkdXRpbHMkJG9iamVjdE9yRnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nIHx8ICh0eXBlb2YgeCA9PT0gJ29iamVjdCcgJiYgeCAhPT0gbnVsbCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0Z1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzTWF5YmVUaGVuYWJsZSh4KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdvYmplY3QnICYmIHggIT09IG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkdXRpbHMkJF9pc0FycmF5ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuICAgIH1cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzQXJyYXkgPSBsaWIkZXM2JHByb21pc2UkdXRpbHMkJF9pc0FycmF5O1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuID0gMDtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJHZlcnR4TmV4dDtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuO1xuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwID0gZnVuY3Rpb24gYXNhcChjYWxsYmFjaywgYXJnKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbl0gPSBjYWxsYmFjaztcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuICsgMV0gPSBhcmc7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuICs9IDI7XG4gICAgICBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiA9PT0gMikge1xuICAgICAgICAvLyBJZiBsZW4gaXMgMiwgdGhhdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gc2NoZWR1bGUgYW4gYXN5bmMgZmx1c2guXG4gICAgICAgIC8vIElmIGFkZGl0aW9uYWwgY2FsbGJhY2tzIGFyZSBxdWV1ZWQgYmVmb3JlIHRoZSBxdWV1ZSBpcyBmbHVzaGVkLCB0aGV5XG4gICAgICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cbiAgICAgICAgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRjdXN0b21TY2hlZHVsZXJGbikge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRjdXN0b21TY2hlZHVsZXJGbihsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRjdXN0b21TY2hlZHVsZXJGbiA9IHNjaGVkdWxlRm47XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHNldEFzYXAoYXNhcEZuKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcCA9IGFzYXBGbjtcbiAgICB9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJXaW5kb3cgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpID8gd2luZG93IDogdW5kZWZpbmVkO1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3Nlckdsb2JhbCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93IHx8IHt9O1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3Nlckdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyR2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc05vZGUgPSB0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHt9LnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJztcblxuICAgIC8vIHRlc3QgZm9yIHdlYiB3b3JrZXIgYnV0IG5vdCBpbiBJRTEwXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc1dvcmtlciA9IHR5cGVvZiBVaW50OENsYW1wZWRBcnJheSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBpbXBvcnRTY3JpcHRzICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIE1lc3NhZ2VDaGFubmVsICE9PSAndW5kZWZpbmVkJztcblxuICAgIC8vIG5vZGVcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTmV4dFRpY2soKSB7XG4gICAgICAvLyBub2RlIHZlcnNpb24gMC4xMC54IGRpc3BsYXlzIGEgZGVwcmVjYXRpb24gd2FybmluZyB3aGVuIG5leHRUaWNrIGlzIHVzZWQgcmVjdXJzaXZlbHlcbiAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY3Vqb2pzL3doZW4vaXNzdWVzLzQxMCBmb3IgZGV0YWlsc1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIHZlcnR4XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVZlcnR4VGltZXIoKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR2ZXJ0eE5leHQobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU11dGF0aW9uT2JzZXJ2ZXIoKSB7XG4gICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG4gICAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgbGliJGVzNiRwcm9taXNlJGFzYXAkJEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCk7XG4gICAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcbiAgICAgIG9ic2VydmVyLm9ic2VydmUobm9kZSwgeyBjaGFyYWN0ZXJEYXRhOiB0cnVlIH0pO1xuXG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIG5vZGUuZGF0YSA9IChpdGVyYXRpb25zID0gKytpdGVyYXRpb25zICUgMik7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIHdlYiB3b3JrZXJcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTWVzc2FnZUNoYW5uZWwoKSB7XG4gICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2g7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlU2V0VGltZW91dCgpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0VGltZW91dChsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gsIDEpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlID0gbmV3IEFycmF5KDEwMDApO1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCgpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbjsgaSs9Mikge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaV07XG4gICAgICAgIHZhciBhcmcgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaSsxXTtcblxuICAgICAgICBjYWxsYmFjayhhcmcpO1xuXG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2krMV0gPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gPSAwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhdHRlbXB0VmVydHgoKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgciA9IHJlcXVpcmU7XG4gICAgICAgIHZhciB2ZXJ0eCA9IHIoJ3ZlcnR4Jyk7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR2ZXJ0eE5leHQgPSB2ZXJ0eC5ydW5Pbkxvb3AgfHwgdmVydHgucnVuT25Db250ZXh0O1xuICAgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVZlcnR4VGltZXIoKTtcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVNldFRpbWVvdXQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2g7XG4gICAgLy8gRGVjaWRlIHdoYXQgYXN5bmMgbWV0aG9kIHRvIHVzZSB0byB0cmlnZ2VyaW5nIHByb2Nlc3Npbmcgb2YgcXVldWVkIGNhbGxiYWNrczpcbiAgICBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGlzTm9kZSkge1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTmV4dFRpY2soKTtcbiAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRCcm93c2VyTXV0YXRpb25PYnNlcnZlcikge1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTXV0YXRpb25PYnNlcnZlcigpO1xuICAgIH0gZWxzZSBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGlzV29ya2VyKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNZXNzYWdlQ2hhbm5lbCgpO1xuICAgIH0gZWxzZSBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJXaW5kb3cgPT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgcmVxdWlyZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXR0ZW1wdFZlcnR4KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVNldFRpbWVvdXQoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHRoZW4kJHRoZW4ob25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgICAgIHZhciBwYXJlbnQgPSB0aGlzO1xuXG4gICAgICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcblxuICAgICAgaWYgKGNoaWxkW2xpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBST01JU0VfSURdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbWFrZVByb21pc2UoY2hpbGQpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xuXG4gICAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzW3N0YXRlIC0gMV07XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW52b2tlQ2FsbGJhY2soc3RhdGUsIGNoaWxkLCBjYWxsYmFjaywgcGFyZW50Ll9yZXN1bHQpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSR0aGVuJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHRoZW4kJHRoZW47XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkcmVzb2x2ZShvYmplY3QpIHtcbiAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXG4gICAgICBpZiAob2JqZWN0ICYmIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gQ29uc3RydWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgIH1cblxuICAgICAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG4gICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIG9iamVjdCk7XG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRyZXNvbHZlO1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDE2KTtcblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3AoKSB7fVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcgICA9IHZvaWQgMDtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEID0gMTtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQgID0gMjtcblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUiA9IG5ldyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRFcnJvck9iamVjdCgpO1xuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc2VsZkZ1bGZpbGxtZW50KCkge1xuICAgICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJZb3UgY2Fubm90IHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXRzZWxmXCIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGNhbm5vdFJldHVybk93bigpIHtcbiAgICAgIHJldHVybiBuZXcgVHlwZUVycm9yKCdBIHByb21pc2VzIGNhbGxiYWNrIGNhbm5vdCByZXR1cm4gdGhhdCBzYW1lIHByb21pc2UuJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZ2V0VGhlbihwcm9taXNlKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gcHJvbWlzZS50aGVuO1xuICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUi5lcnJvciA9IGVycm9yO1xuICAgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1I7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5VGhlbih0aGVuLCB2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7XG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlLCB0aGVuKSB7XG4gICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAoZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgICAgICB2YXIgc2VhbGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBlcnJvciA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeVRoZW4odGhlbiwgdGhlbmFibGUsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKHNlYWxlZCkgeyByZXR1cm47IH1cbiAgICAgICAgICBzZWFsZWQgPSB0cnVlO1xuICAgICAgICAgIGlmICh0aGVuYWJsZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICAgIGlmIChzZWFsZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgc2VhbGVkID0gdHJ1ZTtcblxuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgICAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpO1xuXG4gICAgICAgIGlmICghc2VhbGVkICYmIGVycm9yKSB7XG4gICAgICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9LCBwcm9taXNlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSkge1xuICAgICAgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG4gICAgICB9IGVsc2UgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlKHRoZW5hYmxlLCB1bmRlZmluZWQsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4pIHtcbiAgICAgIGlmIChtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yID09PSBwcm9taXNlLmNvbnN0cnVjdG9yICYmXG4gICAgICAgICAgdGhlbiA9PT0gbGliJGVzNiRwcm9taXNlJHRoZW4kJGRlZmF1bHQgJiZcbiAgICAgICAgICBjb25zdHJ1Y3Rvci5yZXNvbHZlID09PSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRkZWZhdWx0KSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoZW4gPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SLmVycm9yKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGVuID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgICAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbih0aGVuKSkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSkge1xuICAgICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzZWxmRnVsZmlsbG1lbnQoKSk7XG4gICAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSR1dGlscyQkb2JqZWN0T3JGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCB2YWx1ZSwgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZ2V0VGhlbih2YWx1ZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaFJlamVjdGlvbihwcm9taXNlKSB7XG4gICAgICBpZiAocHJvbWlzZS5fb25lcnJvcikge1xuICAgICAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7XG4gICAgICB9XG5cbiAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gocHJvbWlzZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSkge1xuICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7IHJldHVybjsgfVxuXG4gICAgICBwcm9taXNlLl9yZXN1bHQgPSB2YWx1ZTtcbiAgICAgIHByb21pc2UuX3N0YXRlID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEO1xuXG4gICAgICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gsIHByb21pc2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pIHtcbiAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykgeyByZXR1cm47IH1cbiAgICAgIHByb21pc2UuX3N0YXRlID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQ7XG4gICAgICBwcm9taXNlLl9yZXN1bHQgPSByZWFzb247XG5cbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2hSZWplY3Rpb24sIHByb21pc2UpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICAgICAgdmFyIHN1YnNjcmliZXJzID0gcGFyZW50Ll9zdWJzY3JpYmVycztcbiAgICAgIHZhciBsZW5ndGggPSBzdWJzY3JpYmVycy5sZW5ndGg7XG5cbiAgICAgIHBhcmVudC5fb25lcnJvciA9IG51bGw7XG5cbiAgICAgIHN1YnNjcmliZXJzW2xlbmd0aF0gPSBjaGlsZDtcbiAgICAgIHN1YnNjcmliZXJzW2xlbmd0aCArIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRF0gPSBvbkZ1bGZpbGxtZW50O1xuICAgICAgc3Vic2NyaWJlcnNbbGVuZ3RoICsgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURURdICA9IG9uUmVqZWN0aW9uO1xuXG4gICAgICBpZiAobGVuZ3RoID09PSAwICYmIHBhcmVudC5fc3RhdGUpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaCwgcGFyZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoKHByb21pc2UpIHtcbiAgICAgIHZhciBzdWJzY3JpYmVycyA9IHByb21pc2UuX3N1YnNjcmliZXJzO1xuICAgICAgdmFyIHNldHRsZWQgPSBwcm9taXNlLl9zdGF0ZTtcblxuICAgICAgaWYgKHN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkgeyByZXR1cm47IH1cblxuICAgICAgdmFyIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsID0gcHJvbWlzZS5fcmVzdWx0O1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnNjcmliZXJzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICAgIGNoaWxkID0gc3Vic2NyaWJlcnNbaV07XG4gICAgICAgIGNhbGxiYWNrID0gc3Vic2NyaWJlcnNbaSArIHNldHRsZWRdO1xuXG4gICAgICAgIGlmIChjaGlsZCkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGludm9rZUNhbGxiYWNrKHNldHRsZWQsIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYWxsYmFjayhkZXRhaWwpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCA9IDA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRXJyb3JPYmplY3QoKSB7XG4gICAgICB0aGlzLmVycm9yID0gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SID0gbmV3IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEVycm9yT2JqZWN0KCk7XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlsKTtcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlO1xuICAgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGludm9rZUNhbGxiYWNrKHNldHRsZWQsIHByb21pc2UsIGNhbGxiYWNrLCBkZXRhaWwpIHtcbiAgICAgIHZhciBoYXNDYWxsYmFjayA9IGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbihjYWxsYmFjayksXG4gICAgICAgICAgdmFsdWUsIGVycm9yLCBzdWNjZWVkZWQsIGZhaWxlZDtcblxuICAgICAgaWYgKGhhc0NhbGxiYWNrKSB7XG4gICAgICAgIHZhbHVlID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCk7XG5cbiAgICAgICAgaWYgKHZhbHVlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1IpIHtcbiAgICAgICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgICAgIGVycm9yID0gdmFsdWUuZXJyb3I7XG4gICAgICAgICAgdmFsdWUgPSBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkY2Fubm90UmV0dXJuT3duKCkpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IGRldGFpbDtcbiAgICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7XG4gICAgICAgIC8vIG5vb3BcbiAgICAgIH0gZWxzZSBpZiAoaGFzQ2FsbGJhY2sgJiYgc3VjY2VlZGVkKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChmYWlsZWQpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGluaXRpYWxpemVQcm9taXNlKHByb21pc2UsIHJlc29sdmVyKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXNvbHZlcihmdW5jdGlvbiByZXNvbHZlUHJvbWlzZSh2YWx1ZSl7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIHJlamVjdFByb21pc2UocmVhc29uKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaWQgPSAwO1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5leHRJZCgpIHtcbiAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpZCsrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG1ha2VQcm9taXNlKHByb21pc2UpIHtcbiAgICAgIHByb21pc2VbbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUFJPTUlTRV9JRF0gPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpZCsrO1xuICAgICAgcHJvbWlzZS5fc3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICBwcm9taXNlLl9yZXN1bHQgPSB1bmRlZmluZWQ7XG4gICAgICBwcm9taXNlLl9zdWJzY3JpYmVycyA9IFtdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkYWxsKGVudHJpZXMpIHtcbiAgICAgIHJldHVybiBuZXcgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJGRlZmF1bHQodGhpcywgZW50cmllcykucHJvbWlzZTtcbiAgICB9XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkYWxsO1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJHJhY2UoZW50cmllcykge1xuICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgICAgIGlmICghbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0FycmF5KGVudHJpZXMpKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS4nKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICB2YXIgbGVuZ3RoID0gZW50cmllcy5sZW5ndGg7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgQ29uc3RydWN0b3IucmVzb2x2ZShlbnRyaWVzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRyYWNlO1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkcmVqZWN0KHJlYXNvbikge1xuICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG4gICAgICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZWplY3QkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZWplY3QkJHJlamVjdDtcblxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzUmVzb2x2ZXIoKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzTmV3KCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTtcbiAgICB9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZTtcbiAgICAvKipcbiAgICAgIFByb21pc2Ugb2JqZWN0cyByZXByZXNlbnQgdGhlIGV2ZW50dWFsIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLiBUaGVcbiAgICAgIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsIHdoaWNoXG4gICAgICByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZSByZWFzb25cbiAgICAgIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuXG4gICAgICBUZXJtaW5vbG9neVxuICAgICAgLS0tLS0tLS0tLS1cblxuICAgICAgLSBgcHJvbWlzZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHdpdGggYSBgdGhlbmAgbWV0aG9kIHdob3NlIGJlaGF2aW9yIGNvbmZvcm1zIHRvIHRoaXMgc3BlY2lmaWNhdGlvbi5cbiAgICAgIC0gYHRoZW5hYmxlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gdGhhdCBkZWZpbmVzIGEgYHRoZW5gIG1ldGhvZC5cbiAgICAgIC0gYHZhbHVlYCBpcyBhbnkgbGVnYWwgSmF2YVNjcmlwdCB2YWx1ZSAoaW5jbHVkaW5nIHVuZGVmaW5lZCwgYSB0aGVuYWJsZSwgb3IgYSBwcm9taXNlKS5cbiAgICAgIC0gYGV4Y2VwdGlvbmAgaXMgYSB2YWx1ZSB0aGF0IGlzIHRocm93biB1c2luZyB0aGUgdGhyb3cgc3RhdGVtZW50LlxuICAgICAgLSBgcmVhc29uYCBpcyBhIHZhbHVlIHRoYXQgaW5kaWNhdGVzIHdoeSBhIHByb21pc2Ugd2FzIHJlamVjdGVkLlxuICAgICAgLSBgc2V0dGxlZGAgdGhlIGZpbmFsIHJlc3Rpbmcgc3RhdGUgb2YgYSBwcm9taXNlLCBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuXG5cbiAgICAgIEEgcHJvbWlzZSBjYW4gYmUgaW4gb25lIG9mIHRocmVlIHN0YXRlczogcGVuZGluZywgZnVsZmlsbGVkLCBvciByZWplY3RlZC5cblxuICAgICAgUHJvbWlzZXMgdGhhdCBhcmUgZnVsZmlsbGVkIGhhdmUgYSBmdWxmaWxsbWVudCB2YWx1ZSBhbmQgYXJlIGluIHRoZSBmdWxmaWxsZWRcbiAgICAgIHN0YXRlLiAgUHJvbWlzZXMgdGhhdCBhcmUgcmVqZWN0ZWQgaGF2ZSBhIHJlamVjdGlvbiByZWFzb24gYW5kIGFyZSBpbiB0aGVcbiAgICAgIHJlamVjdGVkIHN0YXRlLiAgQSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZXZlciBhIHRoZW5hYmxlLlxuXG4gICAgICBQcm9taXNlcyBjYW4gYWxzbyBiZSBzYWlkIHRvICpyZXNvbHZlKiBhIHZhbHVlLiAgSWYgdGhpcyB2YWx1ZSBpcyBhbHNvIGFcbiAgICAgIHByb21pc2UsIHRoZW4gdGhlIG9yaWdpbmFsIHByb21pc2UncyBzZXR0bGVkIHN0YXRlIHdpbGwgbWF0Y2ggdGhlIHZhbHVlJ3NcbiAgICAgIHNldHRsZWQgc3RhdGUuICBTbyBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IHJlamVjdHMgd2lsbFxuICAgICAgaXRzZWxmIHJlamVjdCwgYW5kIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgd2lsbFxuICAgICAgaXRzZWxmIGZ1bGZpbGwuXG5cblxuICAgICAgQmFzaWMgVXNhZ2U6XG4gICAgICAtLS0tLS0tLS0tLS1cblxuICAgICAgYGBganNcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vIG9uIHN1Y2Nlc3NcbiAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG5cbiAgICAgICAgLy8gb24gZmFpbHVyZVxuICAgICAgICByZWplY3QocmVhc29uKTtcbiAgICAgIH0pO1xuXG4gICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICAvLyBvbiByZWplY3Rpb25cbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIEFkdmFuY2VkIFVzYWdlOlxuICAgICAgLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAgIFByb21pc2VzIHNoaW5lIHdoZW4gYWJzdHJhY3RpbmcgYXdheSBhc3luY2hyb25vdXMgaW50ZXJhY3Rpb25zIHN1Y2ggYXNcbiAgICAgIGBYTUxIdHRwUmVxdWVzdGBzLlxuXG4gICAgICBgYGBqc1xuICAgICAgZnVuY3Rpb24gZ2V0SlNPTih1cmwpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7XG4gICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgICAgICB4aHIuc2VuZCgpO1xuXG4gICAgICAgICAgZnVuY3Rpb24gaGFuZGxlcigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuRE9ORSkge1xuICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignZ2V0SlNPTjogYCcgKyB1cmwgKyAnYCBmYWlsZWQgd2l0aCBzdGF0dXM6IFsnICsgdGhpcy5zdGF0dXMgKyAnXScpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBnZXRKU09OKCcvcG9zdHMuanNvbicpLnRoZW4oZnVuY3Rpb24oanNvbikge1xuICAgICAgICAvLyBvbiBmdWxmaWxsbWVudFxuICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgIC8vIG9uIHJlamVjdGlvblxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgVW5saWtlIGNhbGxiYWNrcywgcHJvbWlzZXMgYXJlIGdyZWF0IGNvbXBvc2FibGUgcHJpbWl0aXZlcy5cblxuICAgICAgYGBganNcbiAgICAgIFByb21pc2UuYWxsKFtcbiAgICAgICAgZ2V0SlNPTignL3Bvc3RzJyksXG4gICAgICAgIGdldEpTT04oJy9jb21tZW50cycpXG4gICAgICBdKS50aGVuKGZ1bmN0aW9uKHZhbHVlcyl7XG4gICAgICAgIHZhbHVlc1swXSAvLyA9PiBwb3N0c0pTT05cbiAgICAgICAgdmFsdWVzWzFdIC8vID0+IGNvbW1lbnRzSlNPTlxuXG4gICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBAY2xhc3MgUHJvbWlzZVxuICAgICAgQHBhcmFtIHtmdW5jdGlvbn0gcmVzb2x2ZXJcbiAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICAgIEBjb25zdHJ1Y3RvclxuICAgICovXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UocmVzb2x2ZXIpIHtcbiAgICAgIHRoaXNbbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUFJPTUlTRV9JRF0gPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRuZXh0SWQoKTtcbiAgICAgIHRoaXMuX3Jlc3VsdCA9IHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblxuICAgICAgaWYgKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3AgIT09IHJlc29sdmVyKSB7XG4gICAgICAgIHR5cGVvZiByZXNvbHZlciAhPT0gJ2Z1bmN0aW9uJyAmJiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkbmVlZHNSZXNvbHZlcigpO1xuICAgICAgICB0aGlzIGluc3RhbmNlb2YgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UgPyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbml0aWFsaXplUHJvbWlzZSh0aGlzLCByZXNvbHZlcikgOiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkbmVlZHNOZXcoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5hbGwgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGRlZmF1bHQ7XG4gICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UucmFjZSA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJGRlZmF1bHQ7XG4gICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UucmVzb2x2ZSA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJGRlZmF1bHQ7XG4gICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UucmVqZWN0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRkZWZhdWx0O1xuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLl9zZXRTY2hlZHVsZXIgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0U2NoZWR1bGVyO1xuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLl9zZXRBc2FwID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHNldEFzYXA7XG4gICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuX2FzYXAgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcDtcblxuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnByb3RvdHlwZSA9IHtcbiAgICAgIGNvbnN0cnVjdG9yOiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZSxcblxuICAgIC8qKlxuICAgICAgVGhlIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsXG4gICAgICB3aGljaCByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZVxuICAgICAgcmVhc29uIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuXG4gICAgICBgYGBqc1xuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uKHVzZXIpe1xuICAgICAgICAvLyB1c2VyIGlzIGF2YWlsYWJsZVxuICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgICAgLy8gdXNlciBpcyB1bmF2YWlsYWJsZSwgYW5kIHlvdSBhcmUgZ2l2ZW4gdGhlIHJlYXNvbiB3aHlcbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIENoYWluaW5nXG4gICAgICAtLS0tLS0tLVxuXG4gICAgICBUaGUgcmV0dXJuIHZhbHVlIG9mIGB0aGVuYCBpcyBpdHNlbGYgYSBwcm9taXNlLiAgVGhpcyBzZWNvbmQsICdkb3duc3RyZWFtJ1xuICAgICAgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZpcnN0IHByb21pc2UncyBmdWxmaWxsbWVudFxuICAgICAgb3IgcmVqZWN0aW9uIGhhbmRsZXIsIG9yIHJlamVjdGVkIGlmIHRoZSBoYW5kbGVyIHRocm93cyBhbiBleGNlcHRpb24uXG5cbiAgICAgIGBgYGpzXG4gICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHVzZXIubmFtZTtcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgcmV0dXJuICdkZWZhdWx0IG5hbWUnO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAodXNlck5hbWUpIHtcbiAgICAgICAgLy8gSWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGB1c2VyTmFtZWAgd2lsbCBiZSB0aGUgdXNlcidzIG5hbWUsIG90aGVyd2lzZSBpdFxuICAgICAgICAvLyB3aWxsIGJlIGAnZGVmYXVsdCBuYW1lJ2BcbiAgICAgIH0pO1xuXG4gICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScpO1xuICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknKTtcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgLy8gaWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGByZWFzb25gIHdpbGwgYmUgJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jy5cbiAgICAgICAgLy8gSWYgYGZpbmRVc2VyYCByZWplY3RlZCwgYHJlYXNvbmAgd2lsbCBiZSAnYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScuXG4gICAgICB9KTtcbiAgICAgIGBgYFxuICAgICAgSWYgdGhlIGRvd25zdHJlYW0gcHJvbWlzZSBkb2VzIG5vdCBzcGVjaWZ5IGEgcmVqZWN0aW9uIGhhbmRsZXIsIHJlamVjdGlvbiByZWFzb25zIHdpbGwgYmUgcHJvcGFnYXRlZCBmdXJ0aGVyIGRvd25zdHJlYW0uXG5cbiAgICAgIGBgYGpzXG4gICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFBlZGFnb2dpY2FsRXhjZXB0aW9uKCdVcHN0cmVhbSBlcnJvcicpO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAvLyBUaGUgYFBlZGdhZ29jaWFsRXhjZXB0aW9uYCBpcyBwcm9wYWdhdGVkIGFsbCB0aGUgd2F5IGRvd24gdG8gaGVyZVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgQXNzaW1pbGF0aW9uXG4gICAgICAtLS0tLS0tLS0tLS1cblxuICAgICAgU29tZXRpbWVzIHRoZSB2YWx1ZSB5b3Ugd2FudCB0byBwcm9wYWdhdGUgdG8gYSBkb3duc3RyZWFtIHByb21pc2UgY2FuIG9ubHkgYmVcbiAgICAgIHJldHJpZXZlZCBhc3luY2hyb25vdXNseS4gVGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcmV0dXJuaW5nIGEgcHJvbWlzZSBpbiB0aGVcbiAgICAgIGZ1bGZpbGxtZW50IG9yIHJlamVjdGlvbiBoYW5kbGVyLiBUaGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgdGhlbiBiZSBwZW5kaW5nXG4gICAgICB1bnRpbCB0aGUgcmV0dXJuZWQgcHJvbWlzZSBpcyBzZXR0bGVkLiBUaGlzIGlzIGNhbGxlZCAqYXNzaW1pbGF0aW9uKi5cblxuICAgICAgYGBganNcbiAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgICAgICAvLyBUaGUgdXNlcidzIGNvbW1lbnRzIGFyZSBub3cgYXZhaWxhYmxlXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBJZiB0aGUgYXNzaW1saWF0ZWQgcHJvbWlzZSByZWplY3RzLCB0aGVuIHRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCBhbHNvIHJlamVjdC5cblxuICAgICAgYGBganNcbiAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIGZ1bGZpbGxzLCB3ZSdsbCBoYXZlIHRoZSB2YWx1ZSBoZXJlXG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgcmVqZWN0cywgd2UnbGwgaGF2ZSB0aGUgcmVhc29uIGhlcmVcbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIFNpbXBsZSBFeGFtcGxlXG4gICAgICAtLS0tLS0tLS0tLS0tLVxuXG4gICAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG5cbiAgICAgIGBgYGphdmFzY3JpcHRcbiAgICAgIHZhciByZXN1bHQ7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHJlc3VsdCA9IGZpbmRSZXN1bHQoKTtcbiAgICAgICAgLy8gc3VjY2Vzc1xuICAgICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgfVxuICAgICAgYGBgXG5cbiAgICAgIEVycmJhY2sgRXhhbXBsZVxuXG4gICAgICBgYGBqc1xuICAgICAgZmluZFJlc3VsdChmdW5jdGlvbihyZXN1bHQsIGVycil7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAvLyBmYWlsdXJlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gc3VjY2Vzc1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBQcm9taXNlIEV4YW1wbGU7XG5cbiAgICAgIGBgYGphdmFzY3JpcHRcbiAgICAgIGZpbmRSZXN1bHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIEFkdmFuY2VkIEV4YW1wbGVcbiAgICAgIC0tLS0tLS0tLS0tLS0tXG5cbiAgICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcblxuICAgICAgYGBgamF2YXNjcmlwdFxuICAgICAgdmFyIGF1dGhvciwgYm9va3M7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF1dGhvciA9IGZpbmRBdXRob3IoKTtcbiAgICAgICAgYm9va3MgID0gZmluZEJvb2tzQnlBdXRob3IoYXV0aG9yKTtcbiAgICAgICAgLy8gc3VjY2Vzc1xuICAgICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgfVxuICAgICAgYGBgXG5cbiAgICAgIEVycmJhY2sgRXhhbXBsZVxuXG4gICAgICBgYGBqc1xuXG4gICAgICBmdW5jdGlvbiBmb3VuZEJvb2tzKGJvb2tzKSB7XG5cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZmFpbHVyZShyZWFzb24pIHtcblxuICAgICAgfVxuXG4gICAgICBmaW5kQXV0aG9yKGZ1bmN0aW9uKGF1dGhvciwgZXJyKXtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgICAgICAvLyBmYWlsdXJlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZpbmRCb29va3NCeUF1dGhvcihhdXRob3IsIGZ1bmN0aW9uKGJvb2tzLCBlcnIpIHtcbiAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgZm91bmRCb29rcyhib29rcyk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgIGZhaWx1cmUocmVhc29uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcbiAgICAgICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gc3VjY2Vzc1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBQcm9taXNlIEV4YW1wbGU7XG5cbiAgICAgIGBgYGphdmFzY3JpcHRcbiAgICAgIGZpbmRBdXRob3IoKS5cbiAgICAgICAgdGhlbihmaW5kQm9va3NCeUF1dGhvcikuXG4gICAgICAgIHRoZW4oZnVuY3Rpb24oYm9va3Mpe1xuICAgICAgICAgIC8vIGZvdW5kIGJvb2tzXG4gICAgICB9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgQG1ldGhvZCB0aGVuXG4gICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvbkZ1bGZpbGxlZFxuICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3RlZFxuICAgICAgVXNlZnVsIGZvciB0b29saW5nLlxuICAgICAgQHJldHVybiB7UHJvbWlzZX1cbiAgICAqL1xuICAgICAgdGhlbjogbGliJGVzNiRwcm9taXNlJHRoZW4kJGRlZmF1bHQsXG5cbiAgICAvKipcbiAgICAgIGBjYXRjaGAgaXMgc2ltcGx5IHN1Z2FyIGZvciBgdGhlbih1bmRlZmluZWQsIG9uUmVqZWN0aW9uKWAgd2hpY2ggbWFrZXMgaXQgdGhlIHNhbWVcbiAgICAgIGFzIHRoZSBjYXRjaCBibG9jayBvZiBhIHRyeS9jYXRjaCBzdGF0ZW1lbnQuXG5cbiAgICAgIGBgYGpzXG4gICAgICBmdW5jdGlvbiBmaW5kQXV0aG9yKCl7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGRuJ3QgZmluZCB0aGF0IGF1dGhvcicpO1xuICAgICAgfVxuXG4gICAgICAvLyBzeW5jaHJvbm91c1xuICAgICAgdHJ5IHtcbiAgICAgICAgZmluZEF1dGhvcigpO1xuICAgICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICAgIH1cblxuICAgICAgLy8gYXN5bmMgd2l0aCBwcm9taXNlc1xuICAgICAgZmluZEF1dGhvcigpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBAbWV0aG9kIGNhdGNoXG4gICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGlvblxuICAgICAgVXNlZnVsIGZvciB0b29saW5nLlxuICAgICAgQHJldHVybiB7UHJvbWlzZX1cbiAgICAqL1xuICAgICAgJ2NhdGNoJzogZnVuY3Rpb24ob25SZWplY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGlvbik7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvcjtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvcihDb25zdHJ1Y3RvciwgaW5wdXQpIHtcbiAgICAgIHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjtcbiAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcblxuICAgICAgaWYgKCF0aGlzLnByb21pc2VbbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUFJPTUlTRV9JRF0pIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbWFrZVByb21pc2UodGhpcy5wcm9taXNlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNBcnJheShpbnB1dCkpIHtcbiAgICAgICAgdGhpcy5faW5wdXQgICAgID0gaW5wdXQ7XG4gICAgICAgIHRoaXMubGVuZ3RoICAgICA9IGlucHV0Lmxlbmd0aDtcbiAgICAgICAgdGhpcy5fcmVtYWluaW5nID0gaW5wdXQubGVuZ3RoO1xuXG4gICAgICAgIHRoaXMuX3Jlc3VsdCA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7XG5cbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLmxlbmd0aCB8fCAwO1xuICAgICAgICAgIHRoaXMuX2VudW1lcmF0ZSgpO1xuICAgICAgICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHRoaXMucHJvbWlzZSwgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJHZhbGlkYXRpb25FcnJvcigpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkdmFsaWRhdGlvbkVycm9yKCkge1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignQXJyYXkgTWV0aG9kcyBtdXN0IGJlIHByb3ZpZGVkIGFuIEFycmF5Jyk7XG4gICAgfVxuXG4gICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl9lbnVtZXJhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBsZW5ndGggID0gdGhpcy5sZW5ndGg7XG4gICAgICB2YXIgaW5wdXQgICA9IHRoaXMuX2lucHV0O1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgdGhpcy5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcgJiYgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuX2VhY2hFbnRyeShpbnB1dFtpXSwgaSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24oZW50cnksIGkpIHtcbiAgICAgIHZhciBjID0gdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvcjtcbiAgICAgIHZhciByZXNvbHZlID0gYy5yZXNvbHZlO1xuXG4gICAgICBpZiAocmVzb2x2ZSA9PT0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdCkge1xuICAgICAgICB2YXIgdGhlbiA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGdldFRoZW4oZW50cnkpO1xuXG4gICAgICAgIGlmICh0aGVuID09PSBsaWIkZXM2JHByb21pc2UkdGhlbiQkZGVmYXVsdCAmJlxuICAgICAgICAgICAgZW50cnkuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7XG4gICAgICAgICAgdGhpcy5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoZW4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aGlzLl9yZW1haW5pbmctLTtcbiAgICAgICAgICB0aGlzLl9yZXN1bHRbaV0gPSBlbnRyeTtcbiAgICAgICAgfSBlbHNlIGlmIChjID09PSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdCkge1xuICAgICAgICAgIHZhciBwcm9taXNlID0gbmV3IGMobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBlbnRyeSwgdGhlbik7XG4gICAgICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KHByb21pc2UsIGkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChuZXcgYyhmdW5jdGlvbihyZXNvbHZlKSB7IHJlc29sdmUoZW50cnkpOyB9KSwgaSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChyZXNvbHZlKGVudHJ5KSwgaSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fc2V0dGxlZEF0ID0gZnVuY3Rpb24oc3RhdGUsIGksIHZhbHVlKSB7XG4gICAgICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTtcblxuICAgICAgaWYgKHByb21pc2UuX3N0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7XG4gICAgICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuXG4gICAgICAgIGlmIChzdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX3dpbGxTZXR0bGVBdCA9IGZ1bmN0aW9uKHByb21pc2UsIGkpIHtcbiAgICAgIHZhciBlbnVtZXJhdG9yID0gdGhpcztcblxuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlKHByb21pc2UsIHVuZGVmaW5lZCwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgZW51bWVyYXRvci5fc2V0dGxlZEF0KGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCwgaSwgdmFsdWUpO1xuICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgIGVudW1lcmF0b3IuX3NldHRsZWRBdChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCwgaSwgcmVhc29uKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRwb2x5ZmlsbCgpIHtcbiAgICAgIHZhciBsb2NhbDtcblxuICAgICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgbG9jYWwgPSBnbG9iYWw7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGxvY2FsID0gc2VsZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBQID0gbG9jYWwuUHJvbWlzZTtcblxuICAgICAgaWYgKFAgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFAucmVzb2x2ZSgpKSA9PT0gJ1tvYmplY3QgUHJvbWlzZV0nICYmICFQLmNhc3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBsb2NhbC5Qcm9taXNlID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGRlZmF1bHQ7XG4gICAgfVxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJHBvbHlmaWxsO1xuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2UgPSB7XG4gICAgICAnUHJvbWlzZSc6IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0LFxuICAgICAgJ3BvbHlmaWxsJzogbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRkZWZhdWx0XG4gICAgfTtcblxuICAgIC8qIGdsb2JhbCBkZWZpbmU6dHJ1ZSBtb2R1bGU6dHJ1ZSB3aW5kb3c6IHRydWUgKi9cbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmVbJ2FtZCddKSB7XG4gICAgICBkZWZpbmUoZnVuY3Rpb24oKSB7IHJldHVybiBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlOyB9KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZVsnZXhwb3J0cyddKSB7XG4gICAgICBtb2R1bGVbJ2V4cG9ydHMnXSA9IGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2U7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXNbJ0VTNlByb21pc2UnXSA9IGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2U7XG4gICAgfVxuXG4gICAgbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRkZWZhdWx0KCk7XG59KS5jYWxsKHRoaXMpO1xuXG5cblxuLyoqKiBFWFBPUlRTIEZST00gZXhwb3J0cy1sb2FkZXIgKioqL1xubW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwuUHJvbWlzZTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9leHBvcnRzLWxvYWRlcj9nbG9iYWwuUHJvbWlzZSEuL34vZXM2LXByb21pc2UvZGlzdC9lczYtcHJvbWlzZS5qc1xuICoqIG1vZHVsZSBpZCA9IDgzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIoZnVuY3Rpb24oc2VsZikge1xuICAndXNlIHN0cmljdCc7XG5cbiAgaWYgKHNlbGYuZmV0Y2gpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIHZhciBzdXBwb3J0ID0ge1xuICAgIHNlYXJjaFBhcmFtczogJ1VSTFNlYXJjaFBhcmFtcycgaW4gc2VsZixcbiAgICBpdGVyYWJsZTogJ1N5bWJvbCcgaW4gc2VsZiAmJiAnaXRlcmF0b3InIGluIFN5bWJvbCxcbiAgICBibG9iOiAnRmlsZVJlYWRlcicgaW4gc2VsZiAmJiAnQmxvYicgaW4gc2VsZiAmJiAoZnVuY3Rpb24oKSB7XG4gICAgICB0cnkge1xuICAgICAgICBuZXcgQmxvYigpXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSkoKSxcbiAgICBmb3JtRGF0YTogJ0Zvcm1EYXRhJyBpbiBzZWxmLFxuICAgIGFycmF5QnVmZmVyOiAnQXJyYXlCdWZmZXInIGluIHNlbGZcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZU5hbWUobmFtZSkge1xuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIG5hbWUgPSBTdHJpbmcobmFtZSlcbiAgICB9XG4gICAgaWYgKC9bXmEtejAtOVxcLSMkJSYnKisuXFxeX2B8fl0vaS50ZXN0KG5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGNoYXJhY3RlciBpbiBoZWFkZXIgZmllbGQgbmFtZScpXG4gICAgfVxuICAgIHJldHVybiBuYW1lLnRvTG93ZXJDYXNlKClcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZVZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHZhbHVlID0gU3RyaW5nKHZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIC8vIEJ1aWxkIGEgZGVzdHJ1Y3RpdmUgaXRlcmF0b3IgZm9yIHRoZSB2YWx1ZSBsaXN0XG4gIGZ1bmN0aW9uIGl0ZXJhdG9yRm9yKGl0ZW1zKSB7XG4gICAgdmFyIGl0ZXJhdG9yID0ge1xuICAgICAgbmV4dDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGl0ZW1zLnNoaWZ0KClcbiAgICAgICAgcmV0dXJuIHtkb25lOiB2YWx1ZSA9PT0gdW5kZWZpbmVkLCB2YWx1ZTogdmFsdWV9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnQuaXRlcmFibGUpIHtcbiAgICAgIGl0ZXJhdG9yW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGl0ZXJhdG9yXG4gIH1cblxuICBmdW5jdGlvbiBIZWFkZXJzKGhlYWRlcnMpIHtcbiAgICB0aGlzLm1hcCA9IHt9XG5cbiAgICBpZiAoaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMpIHtcbiAgICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgICB0aGlzLmFwcGVuZChuYW1lLCB2YWx1ZSlcbiAgICAgIH0sIHRoaXMpXG5cbiAgICB9IGVsc2UgaWYgKGhlYWRlcnMpIHtcbiAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgICAgICB0aGlzLmFwcGVuZChuYW1lLCBoZWFkZXJzW25hbWVdKVxuICAgICAgfSwgdGhpcylcbiAgICB9XG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIG5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpXG4gICAgdmFsdWUgPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSlcbiAgICB2YXIgbGlzdCA9IHRoaXMubWFwW25hbWVdXG4gICAgaWYgKCFsaXN0KSB7XG4gICAgICBsaXN0ID0gW11cbiAgICAgIHRoaXMubWFwW25hbWVdID0gbGlzdFxuICAgIH1cbiAgICBsaXN0LnB1c2godmFsdWUpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGVsZXRlIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIHZhbHVlcyA9IHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldXG4gICAgcmV0dXJuIHZhbHVlcyA/IHZhbHVlc1swXSA6IG51bGxcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmdldEFsbCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV0gfHwgW11cbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAuaGFzT3duUHJvcGVydHkobm9ybWFsaXplTmFtZShuYW1lKSlcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV0gPSBbbm9ybWFsaXplVmFsdWUodmFsdWUpXVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uKGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcy5tYXApLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgICAgdGhpcy5tYXBbbmFtZV0uZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHZhbHVlLCBuYW1lLCB0aGlzKVxuICAgICAgfSwgdGhpcylcbiAgICB9LCB0aGlzKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpdGVtcyA9IFtdXG4gICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7IGl0ZW1zLnB1c2gobmFtZSkgfSlcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS52YWx1ZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaXRlbXMgPSBbXVxuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkgeyBpdGVtcy5wdXNoKHZhbHVlKSB9KVxuICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaXRlbXMgPSBbXVxuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkgeyBpdGVtcy5wdXNoKFtuYW1lLCB2YWx1ZV0pIH0pXG4gICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuICB9XG5cbiAgaWYgKHN1cHBvcnQuaXRlcmFibGUpIHtcbiAgICBIZWFkZXJzLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0gSGVhZGVycy5wcm90b3R5cGUuZW50cmllc1xuICB9XG5cbiAgZnVuY3Rpb24gY29uc3VtZWQoYm9keSkge1xuICAgIGlmIChib2R5LmJvZHlVc2VkKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcignQWxyZWFkeSByZWFkJykpXG4gICAgfVxuICAgIGJvZHkuYm9keVVzZWQgPSB0cnVlXG4gIH1cblxuICBmdW5jdGlvbiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNvbHZlKHJlYWRlci5yZXN1bHQpXG4gICAgICB9XG4gICAgICByZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QocmVhZGVyLmVycm9yKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBmdW5jdGlvbiByZWFkQmxvYkFzQXJyYXlCdWZmZXIoYmxvYikge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2IpXG4gICAgcmV0dXJuIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpXG4gIH1cblxuICBmdW5jdGlvbiByZWFkQmxvYkFzVGV4dChibG9iKSB7XG4gICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgICByZWFkZXIucmVhZEFzVGV4dChibG9iKVxuICAgIHJldHVybiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuICB9XG5cbiAgZnVuY3Rpb24gQm9keSgpIHtcbiAgICB0aGlzLmJvZHlVc2VkID0gZmFsc2VcblxuICAgIHRoaXMuX2luaXRCb2R5ID0gZnVuY3Rpb24oYm9keSkge1xuICAgICAgdGhpcy5fYm9keUluaXQgPSBib2R5XG4gICAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keVxuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmJsb2IgJiYgQmxvYi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICB0aGlzLl9ib2R5QmxvYiA9IGJvZHlcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5mb3JtRGF0YSAmJiBGb3JtRGF0YS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICB0aGlzLl9ib2R5Rm9ybURhdGEgPSBib2R5XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuc2VhcmNoUGFyYW1zICYmIFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHkudG9TdHJpbmcoKVxuICAgICAgfSBlbHNlIGlmICghYm9keSkge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9ICcnXG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIgJiYgQXJyYXlCdWZmZXIucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgLy8gT25seSBzdXBwb3J0IEFycmF5QnVmZmVycyBmb3IgUE9TVCBtZXRob2QuXG4gICAgICAgIC8vIFJlY2VpdmluZyBBcnJheUJ1ZmZlcnMgaGFwcGVucyB2aWEgQmxvYnMsIGluc3RlYWQuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIEJvZHlJbml0IHR5cGUnKVxuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAndGV4dC9wbGFpbjtjaGFyc2V0PVVURi04JylcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QmxvYiAmJiB0aGlzLl9ib2R5QmxvYi50eXBlKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgdGhpcy5fYm9keUJsb2IudHlwZSlcbiAgICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLTgnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnQuYmxvYikge1xuICAgICAgdGhpcy5ibG9iID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG4gICAgICAgIGlmIChyZWplY3RlZCkge1xuICAgICAgICAgIHJldHVybiByZWplY3RlZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QmxvYilcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYicpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keVRleHRdKSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmFycmF5QnVmZmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJsb2IoKS50aGVuKHJlYWRCbG9iQXNBcnJheUJ1ZmZlcilcbiAgICAgIH1cblxuICAgICAgdGhpcy50ZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG4gICAgICAgIGlmIChyZWplY3RlZCkge1xuICAgICAgICAgIHJldHVybiByZWplY3RlZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG4gICAgICAgICAgcmV0dXJuIHJlYWRCbG9iQXNUZXh0KHRoaXMuX2JvZHlCbG9iKVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlGb3JtRGF0YSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyB0ZXh0JylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlUZXh0KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgICByZXR1cm4gcmVqZWN0ZWQgPyByZWplY3RlZCA6IFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3VwcG9ydC5mb3JtRGF0YSkge1xuICAgICAgdGhpcy5mb3JtRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihkZWNvZGUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5qc29uID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihKU09OLnBhcnNlKVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvLyBIVFRQIG1ldGhvZHMgd2hvc2UgY2FwaXRhbGl6YXRpb24gc2hvdWxkIGJlIG5vcm1hbGl6ZWRcbiAgdmFyIG1ldGhvZHMgPSBbJ0RFTEVURScsICdHRVQnLCAnSEVBRCcsICdPUFRJT05TJywgJ1BPU1QnLCAnUFVUJ11cblxuICBmdW5jdGlvbiBub3JtYWxpemVNZXRob2QobWV0aG9kKSB7XG4gICAgdmFyIHVwY2FzZWQgPSBtZXRob2QudG9VcHBlckNhc2UoKVxuICAgIHJldHVybiAobWV0aG9kcy5pbmRleE9mKHVwY2FzZWQpID4gLTEpID8gdXBjYXNlZCA6IG1ldGhvZFxuICB9XG5cbiAgZnVuY3Rpb24gUmVxdWVzdChpbnB1dCwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG4gICAgdmFyIGJvZHkgPSBvcHRpb25zLmJvZHlcbiAgICBpZiAoUmVxdWVzdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihpbnB1dCkpIHtcbiAgICAgIGlmIChpbnB1dC5ib2R5VXNlZCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKVxuICAgICAgfVxuICAgICAgdGhpcy51cmwgPSBpbnB1dC51cmxcbiAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBpbnB1dC5jcmVkZW50aWFsc1xuICAgICAgaWYgKCFvcHRpb25zLmhlYWRlcnMpIHtcbiAgICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMoaW5wdXQuaGVhZGVycylcbiAgICAgIH1cbiAgICAgIHRoaXMubWV0aG9kID0gaW5wdXQubWV0aG9kXG4gICAgICB0aGlzLm1vZGUgPSBpbnB1dC5tb2RlXG4gICAgICBpZiAoIWJvZHkpIHtcbiAgICAgICAgYm9keSA9IGlucHV0Ll9ib2R5SW5pdFxuICAgICAgICBpbnB1dC5ib2R5VXNlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51cmwgPSBpbnB1dFxuICAgIH1cblxuICAgIHRoaXMuY3JlZGVudGlhbHMgPSBvcHRpb25zLmNyZWRlbnRpYWxzIHx8IHRoaXMuY3JlZGVudGlhbHMgfHwgJ29taXQnXG4gICAgaWYgKG9wdGlvbnMuaGVhZGVycyB8fCAhdGhpcy5oZWFkZXJzKSB7XG4gICAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpXG4gICAgfVxuICAgIHRoaXMubWV0aG9kID0gbm9ybWFsaXplTWV0aG9kKG9wdGlvbnMubWV0aG9kIHx8IHRoaXMubWV0aG9kIHx8ICdHRVQnKVxuICAgIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCB0aGlzLm1vZGUgfHwgbnVsbFxuICAgIHRoaXMucmVmZXJyZXIgPSBudWxsXG5cbiAgICBpZiAoKHRoaXMubWV0aG9kID09PSAnR0VUJyB8fCB0aGlzLm1ldGhvZCA9PT0gJ0hFQUQnKSAmJiBib2R5KSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCb2R5IG5vdCBhbGxvd2VkIGZvciBHRVQgb3IgSEVBRCByZXF1ZXN0cycpXG4gICAgfVxuICAgIHRoaXMuX2luaXRCb2R5KGJvZHkpXG4gIH1cblxuICBSZXF1ZXN0LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUmVxdWVzdCh0aGlzKVxuICB9XG5cbiAgZnVuY3Rpb24gZGVjb2RlKGJvZHkpIHtcbiAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpXG4gICAgYm9keS50cmltKCkuc3BsaXQoJyYnKS5mb3JFYWNoKGZ1bmN0aW9uKGJ5dGVzKSB7XG4gICAgICBpZiAoYnl0ZXMpIHtcbiAgICAgICAgdmFyIHNwbGl0ID0gYnl0ZXMuc3BsaXQoJz0nKVxuICAgICAgICB2YXIgbmFtZSA9IHNwbGl0LnNoaWZ0KCkucmVwbGFjZSgvXFwrL2csICcgJylcbiAgICAgICAgdmFyIHZhbHVlID0gc3BsaXQuam9pbignPScpLnJlcGxhY2UoL1xcKy9nLCAnICcpXG4gICAgICAgIGZvcm0uYXBwZW5kKGRlY29kZVVSSUNvbXBvbmVudChuYW1lKSwgZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSlcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBmb3JtXG4gIH1cblxuICBmdW5jdGlvbiBoZWFkZXJzKHhocikge1xuICAgIHZhciBoZWFkID0gbmV3IEhlYWRlcnMoKVxuICAgIHZhciBwYWlycyA9ICh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkgfHwgJycpLnRyaW0oKS5zcGxpdCgnXFxuJylcbiAgICBwYWlycy5mb3JFYWNoKGZ1bmN0aW9uKGhlYWRlcikge1xuICAgICAgdmFyIHNwbGl0ID0gaGVhZGVyLnRyaW0oKS5zcGxpdCgnOicpXG4gICAgICB2YXIga2V5ID0gc3BsaXQuc2hpZnQoKS50cmltKClcbiAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJzonKS50cmltKClcbiAgICAgIGhlYWQuYXBwZW5kKGtleSwgdmFsdWUpXG4gICAgfSlcbiAgICByZXR1cm4gaGVhZFxuICB9XG5cbiAgQm9keS5jYWxsKFJlcXVlc3QucHJvdG90eXBlKVxuXG4gIGZ1bmN0aW9uIFJlc3BvbnNlKGJvZHlJbml0LCBvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0ge31cbiAgICB9XG5cbiAgICB0aGlzLnR5cGUgPSAnZGVmYXVsdCdcbiAgICB0aGlzLnN0YXR1cyA9IG9wdGlvbnMuc3RhdHVzXG4gICAgdGhpcy5vayA9IHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMFxuICAgIHRoaXMuc3RhdHVzVGV4dCA9IG9wdGlvbnMuc3RhdHVzVGV4dFxuICAgIHRoaXMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMgPyBvcHRpb25zLmhlYWRlcnMgOiBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpXG4gICAgdGhpcy51cmwgPSBvcHRpb25zLnVybCB8fCAnJ1xuICAgIHRoaXMuX2luaXRCb2R5KGJvZHlJbml0KVxuICB9XG5cbiAgQm9keS5jYWxsKFJlc3BvbnNlLnByb3RvdHlwZSlcblxuICBSZXNwb25zZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKHRoaXMuX2JvZHlJbml0LCB7XG4gICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxuICAgICAgc3RhdHVzVGV4dDogdGhpcy5zdGF0dXNUZXh0LFxuICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnModGhpcy5oZWFkZXJzKSxcbiAgICAgIHVybDogdGhpcy51cmxcbiAgICB9KVxuICB9XG5cbiAgUmVzcG9uc2UuZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogMCwgc3RhdHVzVGV4dDogJyd9KVxuICAgIHJlc3BvbnNlLnR5cGUgPSAnZXJyb3InXG4gICAgcmV0dXJuIHJlc3BvbnNlXG4gIH1cblxuICB2YXIgcmVkaXJlY3RTdGF0dXNlcyA9IFszMDEsIDMwMiwgMzAzLCAzMDcsIDMwOF1cblxuICBSZXNwb25zZS5yZWRpcmVjdCA9IGZ1bmN0aW9uKHVybCwgc3RhdHVzKSB7XG4gICAgaWYgKHJlZGlyZWN0U3RhdHVzZXMuaW5kZXhPZihzdGF0dXMpID09PSAtMSkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgc3RhdHVzIGNvZGUnKVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogc3RhdHVzLCBoZWFkZXJzOiB7bG9jYXRpb246IHVybH19KVxuICB9XG5cbiAgc2VsZi5IZWFkZXJzID0gSGVhZGVyc1xuICBzZWxmLlJlcXVlc3QgPSBSZXF1ZXN0XG4gIHNlbGYuUmVzcG9uc2UgPSBSZXNwb25zZVxuXG4gIHNlbGYuZmV0Y2ggPSBmdW5jdGlvbihpbnB1dCwgaW5pdCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciByZXF1ZXN0XG4gICAgICBpZiAoUmVxdWVzdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihpbnB1dCkgJiYgIWluaXQpIHtcbiAgICAgICAgcmVxdWVzdCA9IGlucHV0XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoaW5wdXQsIGluaXQpXG4gICAgICB9XG5cbiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuXG4gICAgICBmdW5jdGlvbiByZXNwb25zZVVSTCgpIHtcbiAgICAgICAgaWYgKCdyZXNwb25zZVVSTCcgaW4geGhyKSB7XG4gICAgICAgICAgcmV0dXJuIHhoci5yZXNwb25zZVVSTFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQXZvaWQgc2VjdXJpdHkgd2FybmluZ3Mgb24gZ2V0UmVzcG9uc2VIZWFkZXIgd2hlbiBub3QgYWxsb3dlZCBieSBDT1JTXG4gICAgICAgIGlmICgvXlgtUmVxdWVzdC1VUkw6L20udGVzdCh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKSB7XG4gICAgICAgICAgcmV0dXJuIHhoci5nZXRSZXNwb25zZUhlYWRlcignWC1SZXF1ZXN0LVVSTCcpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICBzdGF0dXM6IHhoci5zdGF0dXMsXG4gICAgICAgICAgc3RhdHVzVGV4dDogeGhyLnN0YXR1c1RleHQsXG4gICAgICAgICAgaGVhZGVyczogaGVhZGVycyh4aHIpLFxuICAgICAgICAgIHVybDogcmVzcG9uc2VVUkwoKVxuICAgICAgICB9XG4gICAgICAgIHZhciBib2R5ID0gJ3Jlc3BvbnNlJyBpbiB4aHIgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0XG4gICAgICAgIHJlc29sdmUobmV3IFJlc3BvbnNlKGJvZHksIG9wdGlvbnMpKVxuICAgICAgfVxuXG4gICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IGZhaWxlZCcpKVxuICAgICAgfVxuXG4gICAgICB4aHIub250aW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG4gICAgICB9XG5cbiAgICAgIHhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnVybCwgdHJ1ZSlcblxuICAgICAgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdpbmNsdWRlJykge1xuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBpZiAoJ3Jlc3BvbnNlVHlwZScgaW4geGhyICYmIHN1cHBvcnQuYmxvYikge1xuICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InXG4gICAgICB9XG5cbiAgICAgIHJlcXVlc3QuaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIHZhbHVlKVxuICAgICAgfSlcblxuICAgICAgeGhyLnNlbmQodHlwZW9mIHJlcXVlc3QuX2JvZHlJbml0ID09PSAndW5kZWZpbmVkJyA/IG51bGwgOiByZXF1ZXN0Ll9ib2R5SW5pdClcbiAgICB9KVxuICB9XG4gIHNlbGYuZmV0Y2gucG9seWZpbGwgPSB0cnVlXG59KSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcyk7XG5cblxuLyoqKiBFWFBPUlRTIEZST00gZXhwb3J0cy1sb2FkZXIgKioqL1xubW9kdWxlLmV4cG9ydHMgPSBzZWxmLmZldGNoO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2V4cG9ydHMtbG9hZGVyP3NlbGYuZmV0Y2ghLi9+L3doYXR3Zy1mZXRjaC9mZXRjaC5qc1xuICoqIG1vZHVsZSBpZCA9IDg0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJiNGRlMjlmZTQzYWM4NWVmMGI2NmY5YzdkZmM0NzRkMy5wbmdcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vZGV2L3NyYy9jb21wb25lbnRzL3NpdGUtaGVhZGVyL2xvZ28ucG5nXG4gKiogbW9kdWxlIGlkID0gODVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnZXROYXRpdmUgPSByZXF1aXJlKCcuL19nZXROYXRpdmUnKSxcbiAgICByb290ID0gcmVxdWlyZSgnLi9fcm9vdCcpO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG52YXIgRGF0YVZpZXcgPSBnZXROYXRpdmUocm9vdCwgJ0RhdGFWaWV3Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gRGF0YVZpZXc7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX0RhdGFWaWV3LmpzXG4gKiogbW9kdWxlIGlkID0gODZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBoYXNoQ2xlYXIgPSByZXF1aXJlKCcuL19oYXNoQ2xlYXInKSxcbiAgICBoYXNoRGVsZXRlID0gcmVxdWlyZSgnLi9faGFzaERlbGV0ZScpLFxuICAgIGhhc2hHZXQgPSByZXF1aXJlKCcuL19oYXNoR2V0JyksXG4gICAgaGFzaEhhcyA9IHJlcXVpcmUoJy4vX2hhc2hIYXMnKSxcbiAgICBoYXNoU2V0ID0gcmVxdWlyZSgnLi9faGFzaFNldCcpO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBoYXNoIG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cbiAqL1xuZnVuY3Rpb24gSGFzaChlbnRyaWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gZW50cmllcyA/IGVudHJpZXMubGVuZ3RoIDogMDtcblxuICB0aGlzLmNsZWFyKCk7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG4gICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcbiAgfVxufVxuXG4vLyBBZGQgbWV0aG9kcyB0byBgSGFzaGAuXG5IYXNoLnByb3RvdHlwZS5jbGVhciA9IGhhc2hDbGVhcjtcbkhhc2gucHJvdG90eXBlWydkZWxldGUnXSA9IGhhc2hEZWxldGU7XG5IYXNoLnByb3RvdHlwZS5nZXQgPSBoYXNoR2V0O1xuSGFzaC5wcm90b3R5cGUuaGFzID0gaGFzaEhhcztcbkhhc2gucHJvdG90eXBlLnNldCA9IGhhc2hTZXQ7XG5cbm1vZHVsZS5leHBvcnRzID0gSGFzaDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fSGFzaC5qc1xuICoqIG1vZHVsZSBpZCA9IDg3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi9fZ2V0TmF0aXZlJyksXG4gICAgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xudmFyIFByb21pc2UgPSBnZXROYXRpdmUocm9vdCwgJ1Byb21pc2UnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBQcm9taXNlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19Qcm9taXNlLmpzXG4gKiogbW9kdWxlIGlkID0gODhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnZXROYXRpdmUgPSByZXF1aXJlKCcuL19nZXROYXRpdmUnKSxcbiAgICByb290ID0gcmVxdWlyZSgnLi9fcm9vdCcpO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG52YXIgU2V0ID0gZ2V0TmF0aXZlKHJvb3QsICdTZXQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX1NldC5qc1xuICoqIG1vZHVsZSBpZCA9IDg5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgTWFwQ2FjaGUgPSByZXF1aXJlKCcuL19NYXBDYWNoZScpLFxuICAgIHNldENhY2hlQWRkID0gcmVxdWlyZSgnLi9fc2V0Q2FjaGVBZGQnKSxcbiAgICBzZXRDYWNoZUhhcyA9IHJlcXVpcmUoJy4vX3NldENhY2hlSGFzJyk7XG5cbi8qKlxuICpcbiAqIENyZWF0ZXMgYW4gYXJyYXkgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIHVuaXF1ZSB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW3ZhbHVlc10gVGhlIHZhbHVlcyB0byBjYWNoZS5cbiAqL1xuZnVuY3Rpb24gU2V0Q2FjaGUodmFsdWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gdmFsdWVzID8gdmFsdWVzLmxlbmd0aCA6IDA7XG5cbiAgdGhpcy5fX2RhdGFfXyA9IG5ldyBNYXBDYWNoZTtcbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB0aGlzLmFkZCh2YWx1ZXNbaW5kZXhdKTtcbiAgfVxufVxuXG4vLyBBZGQgbWV0aG9kcyB0byBgU2V0Q2FjaGVgLlxuU2V0Q2FjaGUucHJvdG90eXBlLmFkZCA9IFNldENhY2hlLnByb3RvdHlwZS5wdXNoID0gc2V0Q2FjaGVBZGQ7XG5TZXRDYWNoZS5wcm90b3R5cGUuaGFzID0gc2V0Q2FjaGVIYXM7XG5cbm1vZHVsZS5leHBvcnRzID0gU2V0Q2FjaGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX1NldENhY2hlLmpzXG4gKiogbW9kdWxlIGlkID0gOTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciByb290ID0gcmVxdWlyZSgnLi9fcm9vdCcpO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBVaW50OEFycmF5ID0gcm9vdC5VaW50OEFycmF5O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFVpbnQ4QXJyYXk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX1VpbnQ4QXJyYXkuanNcbiAqKiBtb2R1bGUgaWQgPSA5MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdldE5hdGl2ZSA9IHJlcXVpcmUoJy4vX2dldE5hdGl2ZScpLFxuICAgIHJvb3QgPSByZXF1aXJlKCcuL19yb290Jyk7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cbnZhciBXZWFrTWFwID0gZ2V0TmF0aXZlKHJvb3QsICdXZWFrTWFwJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gV2Vha01hcDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fV2Vha01hcC5qc1xuICoqIG1vZHVsZSBpZCA9IDkyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIEEgZmFzdGVyIGFsdGVybmF0aXZlIHRvIGBGdW5jdGlvbiNhcHBseWAsIHRoaXMgZnVuY3Rpb24gaW52b2tlcyBgZnVuY2BcbiAqIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIGB0aGlzQXJnYCBhbmQgdGhlIGFyZ3VtZW50cyBvZiBgYXJnc2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGludm9rZS5cbiAqIEBwYXJhbSB7Kn0gdGhpc0FyZyBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICogQHBhcmFtIHtBcnJheX0gYXJncyBUaGUgYXJndW1lbnRzIHRvIGludm9rZSBgZnVuY2Agd2l0aC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXN1bHQgb2YgYGZ1bmNgLlxuICovXG5mdW5jdGlvbiBhcHBseShmdW5jLCB0aGlzQXJnLCBhcmdzKSB7XG4gIHZhciBsZW5ndGggPSBhcmdzLmxlbmd0aDtcbiAgc3dpdGNoIChsZW5ndGgpIHtcbiAgICBjYXNlIDA6IHJldHVybiBmdW5jLmNhbGwodGhpc0FyZyk7XG4gICAgY2FzZSAxOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0pO1xuICAgIGNhc2UgMjogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICBjYXNlIDM6IHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYXBwbHk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2FwcGx5LmpzXG4gKiogbW9kdWxlIGlkID0gOTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLnNvbWVgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZVxuICogc2hvcnRoYW5kcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gW2FycmF5XSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW55IGVsZW1lbnQgcGFzc2VzIHRoZSBwcmVkaWNhdGUgY2hlY2ssXG4gKiAgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBhcnJheVNvbWUoYXJyYXksIHByZWRpY2F0ZSkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFycmF5U29tZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYXJyYXlTb21lLmpzXG4gKiogbW9kdWxlIGlkID0gOTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmRlbGF5YCBhbmQgYF8uZGVmZXJgIHdoaWNoIGFjY2VwdHMgYW4gYXJyYXlcbiAqIG9mIGBmdW5jYCBhcmd1bWVudHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlbGF5LlxuICogQHBhcmFtIHtudW1iZXJ9IHdhaXQgVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkgaW52b2NhdGlvbi5cbiAqIEBwYXJhbSB7T2JqZWN0fSBhcmdzIFRoZSBhcmd1bWVudHMgdG8gcHJvdmlkZSB0byBgZnVuY2AuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lciBpZC5cbiAqL1xuZnVuY3Rpb24gYmFzZURlbGF5KGZ1bmMsIHdhaXQsIGFyZ3MpIHtcbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGZ1bmMuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTsgfSwgd2FpdCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZURlbGF5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlRGVsYXkuanNcbiAqKiBtb2R1bGUgaWQgPSA5NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5maW5kSW5kZXhgIGFuZCBgXy5maW5kTGFzdEluZGV4YCB3aXRob3V0XG4gKiBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gZnJvbUluZGV4IFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUZpbmRJbmRleChhcnJheSwgcHJlZGljYXRlLCBmcm9tSW5kZXgsIGZyb21SaWdodCkge1xuICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgaW5kZXggPSBmcm9tSW5kZXggKyAoZnJvbVJpZ2h0ID8gMSA6IC0xKTtcblxuICB3aGlsZSAoKGZyb21SaWdodCA/IGluZGV4LS0gOiArK2luZGV4IDwgbGVuZ3RoKSkge1xuICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlRmluZEluZGV4O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlRmluZEluZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gOTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaGFzSW5gIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ30ga2V5IFRoZSBrZXkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VIYXNJbihvYmplY3QsIGtleSkge1xuICByZXR1cm4gb2JqZWN0ICE9IG51bGwgJiYga2V5IGluIE9iamVjdChvYmplY3QpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VIYXNJbjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUhhc0luLmpzXG4gKiogbW9kdWxlIGlkID0gOTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBTdGFjayA9IHJlcXVpcmUoJy4vX1N0YWNrJyksXG4gICAgZXF1YWxBcnJheXMgPSByZXF1aXJlKCcuL19lcXVhbEFycmF5cycpLFxuICAgIGVxdWFsQnlUYWcgPSByZXF1aXJlKCcuL19lcXVhbEJ5VGFnJyksXG4gICAgZXF1YWxPYmplY3RzID0gcmVxdWlyZSgnLi9fZXF1YWxPYmplY3RzJyksXG4gICAgZ2V0VGFnID0gcmVxdWlyZSgnLi9fZ2V0VGFnJyksXG4gICAgaXNBcnJheSA9IHJlcXVpcmUoJy4vaXNBcnJheScpLFxuICAgIGlzSG9zdE9iamVjdCA9IHJlcXVpcmUoJy4vX2lzSG9zdE9iamVjdCcpLFxuICAgIGlzVHlwZWRBcnJheSA9IHJlcXVpcmUoJy4vaXNUeXBlZEFycmF5Jyk7XG5cbi8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNvbXBhcmlzb24gc3R5bGVzLiAqL1xudmFyIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcbiAgICBhcnJheVRhZyA9ICdbb2JqZWN0IEFycmF5XScsXG4gICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbGAgZm9yIGFycmF5cyBhbmQgb2JqZWN0cyB3aGljaCBwZXJmb3Jtc1xuICogZGVlcCBjb21wYXJpc29ucyBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzIGVuYWJsaW5nIG9iamVjdHMgd2l0aCBjaXJjdWxhclxuICogcmVmZXJlbmNlcyB0byBiZSBjb21wYXJlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge251bWJlcn0gW2JpdG1hc2tdIFRoZSBiaXRtYXNrIG9mIGNvbXBhcmlzb24gZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgXG4gKiAgZm9yIG1vcmUgZGV0YWlscy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhY2tdIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNFcXVhbERlZXAob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuICB2YXIgb2JqSXNBcnIgPSBpc0FycmF5KG9iamVjdCksXG4gICAgICBvdGhJc0FyciA9IGlzQXJyYXkob3RoZXIpLFxuICAgICAgb2JqVGFnID0gYXJyYXlUYWcsXG4gICAgICBvdGhUYWcgPSBhcnJheVRhZztcblxuICBpZiAoIW9iaklzQXJyKSB7XG4gICAgb2JqVGFnID0gZ2V0VGFnKG9iamVjdCk7XG4gICAgb2JqVGFnID0gb2JqVGFnID09IGFyZ3NUYWcgPyBvYmplY3RUYWcgOiBvYmpUYWc7XG4gIH1cbiAgaWYgKCFvdGhJc0Fycikge1xuICAgIG90aFRhZyA9IGdldFRhZyhvdGhlcik7XG4gICAgb3RoVGFnID0gb3RoVGFnID09IGFyZ3NUYWcgPyBvYmplY3RUYWcgOiBvdGhUYWc7XG4gIH1cbiAgdmFyIG9iaklzT2JqID0gb2JqVGFnID09IG9iamVjdFRhZyAmJiAhaXNIb3N0T2JqZWN0KG9iamVjdCksXG4gICAgICBvdGhJc09iaiA9IG90aFRhZyA9PSBvYmplY3RUYWcgJiYgIWlzSG9zdE9iamVjdChvdGhlciksXG4gICAgICBpc1NhbWVUYWcgPSBvYmpUYWcgPT0gb3RoVGFnO1xuXG4gIGlmIChpc1NhbWVUYWcgJiYgIW9iaklzT2JqKSB7XG4gICAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcbiAgICByZXR1cm4gKG9iaklzQXJyIHx8IGlzVHlwZWRBcnJheShvYmplY3QpKVxuICAgICAgPyBlcXVhbEFycmF5cyhvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKVxuICAgICAgOiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIG9ialRhZywgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG4gIH1cbiAgaWYgKCEoYml0bWFzayAmIFBBUlRJQUxfQ09NUEFSRV9GTEFHKSkge1xuICAgIHZhciBvYmpJc1dyYXBwZWQgPSBvYmpJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgJ19fd3JhcHBlZF9fJyksXG4gICAgICAgIG90aElzV3JhcHBlZCA9IG90aElzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsICdfX3dyYXBwZWRfXycpO1xuXG4gICAgaWYgKG9iaklzV3JhcHBlZCB8fCBvdGhJc1dyYXBwZWQpIHtcbiAgICAgIHZhciBvYmpVbndyYXBwZWQgPSBvYmpJc1dyYXBwZWQgPyBvYmplY3QudmFsdWUoKSA6IG9iamVjdCxcbiAgICAgICAgICBvdGhVbndyYXBwZWQgPSBvdGhJc1dyYXBwZWQgPyBvdGhlci52YWx1ZSgpIDogb3RoZXI7XG5cbiAgICAgIHN0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjayk7XG4gICAgICByZXR1cm4gZXF1YWxGdW5jKG9ialVud3JhcHBlZCwgb3RoVW53cmFwcGVkLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG4gICAgfVxuICB9XG4gIGlmICghaXNTYW1lVGFnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHN0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjayk7XG4gIHJldHVybiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUlzRXF1YWxEZWVwO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlSXNFcXVhbERlZXAuanNcbiAqKiBtb2R1bGUgaWQgPSA5OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIFN0YWNrID0gcmVxdWlyZSgnLi9fU3RhY2snKSxcbiAgICBiYXNlSXNFcXVhbCA9IHJlcXVpcmUoJy4vX2Jhc2VJc0VxdWFsJyk7XG5cbi8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNvbXBhcmlzb24gc3R5bGVzLiAqL1xudmFyIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgPSAxLFxuICAgIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc01hdGNoYCB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IG9mIHByb3BlcnR5IHZhbHVlcyB0byBtYXRjaC5cbiAqIEBwYXJhbSB7QXJyYXl9IG1hdGNoRGF0YSBUaGUgcHJvcGVydHkgbmFtZXMsIHZhbHVlcywgYW5kIGNvbXBhcmUgZmxhZ3MgdG8gbWF0Y2guXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgb2JqZWN0YCBpcyBhIG1hdGNoLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc01hdGNoKG9iamVjdCwgc291cmNlLCBtYXRjaERhdGEsIGN1c3RvbWl6ZXIpIHtcbiAgdmFyIGluZGV4ID0gbWF0Y2hEYXRhLmxlbmd0aCxcbiAgICAgIGxlbmd0aCA9IGluZGV4LFxuICAgICAgbm9DdXN0b21pemVyID0gIWN1c3RvbWl6ZXI7XG5cbiAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgcmV0dXJuICFsZW5ndGg7XG4gIH1cbiAgb2JqZWN0ID0gT2JqZWN0KG9iamVjdCk7XG4gIHdoaWxlIChpbmRleC0tKSB7XG4gICAgdmFyIGRhdGEgPSBtYXRjaERhdGFbaW5kZXhdO1xuICAgIGlmICgobm9DdXN0b21pemVyICYmIGRhdGFbMl0pXG4gICAgICAgICAgPyBkYXRhWzFdICE9PSBvYmplY3RbZGF0YVswXV1cbiAgICAgICAgICA6ICEoZGF0YVswXSBpbiBvYmplY3QpXG4gICAgICAgICkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIGRhdGEgPSBtYXRjaERhdGFbaW5kZXhdO1xuICAgIHZhciBrZXkgPSBkYXRhWzBdLFxuICAgICAgICBvYmpWYWx1ZSA9IG9iamVjdFtrZXldLFxuICAgICAgICBzcmNWYWx1ZSA9IGRhdGFbMV07XG5cbiAgICBpZiAobm9DdXN0b21pemVyICYmIGRhdGFbMl0pIHtcbiAgICAgIGlmIChvYmpWYWx1ZSA9PT0gdW5kZWZpbmVkICYmICEoa2V5IGluIG9iamVjdCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgc3RhY2sgPSBuZXcgU3RhY2s7XG4gICAgICBpZiAoY3VzdG9taXplcikge1xuICAgICAgICB2YXIgcmVzdWx0ID0gY3VzdG9taXplcihvYmpWYWx1ZSwgc3JjVmFsdWUsIGtleSwgb2JqZWN0LCBzb3VyY2UsIHN0YWNrKTtcbiAgICAgIH1cbiAgICAgIGlmICghKHJlc3VsdCA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IGJhc2VJc0VxdWFsKHNyY1ZhbHVlLCBvYmpWYWx1ZSwgY3VzdG9taXplciwgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyB8IFBBUlRJQUxfQ09NUEFSRV9GTEFHLCBzdGFjaylcbiAgICAgICAgICAgIDogcmVzdWx0XG4gICAgICAgICAgKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VJc01hdGNoO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlSXNNYXRjaC5qc1xuICoqIG1vZHVsZSBpZCA9IDk5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJy4vaXNGdW5jdGlvbicpLFxuICAgIGlzSG9zdE9iamVjdCA9IHJlcXVpcmUoJy4vX2lzSG9zdE9iamVjdCcpLFxuICAgIGlzTWFza2VkID0gcmVxdWlyZSgnLi9faXNNYXNrZWQnKSxcbiAgICBpc09iamVjdCA9IHJlcXVpcmUoJy4vaXNPYmplY3QnKSxcbiAgICB0b1NvdXJjZSA9IHJlcXVpcmUoJy4vX3RvU291cmNlJyk7XG5cbi8qKlxuICogVXNlZCB0byBtYXRjaCBgUmVnRXhwYFxuICogW3N5bnRheCBjaGFyYWN0ZXJzXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1wYXR0ZXJucykuXG4gKi9cbnZhciByZVJlZ0V4cENoYXIgPSAvW1xcXFxeJC4qKz8oKVtcXF17fXxdL2c7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBob3N0IGNvbnN0cnVjdG9ycyAoU2FmYXJpKS4gKi9cbnZhciByZUlzSG9zdEN0b3IgPSAvXlxcW29iamVjdCAuKz9Db25zdHJ1Y3RvclxcXSQvO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovXG52YXIgZnVuY1RvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKiogVXNlZCB0byBkZXRlY3QgaWYgYSBtZXRob2QgaXMgbmF0aXZlLiAqL1xudmFyIHJlSXNOYXRpdmUgPSBSZWdFeHAoJ14nICtcbiAgZnVuY1RvU3RyaW5nLmNhbGwoaGFzT3duUHJvcGVydHkpLnJlcGxhY2UocmVSZWdFeHBDaGFyLCAnXFxcXCQmJylcbiAgLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFxcXFwoKXwgZm9yIC4rPyg/PVxcXFxcXF0pL2csICckMS4qPycpICsgJyQnXG4pO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzTmF0aXZlYCB3aXRob3V0IGJhZCBzaGltIGNoZWNrcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbixcbiAqICBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc05hdGl2ZSh2YWx1ZSkge1xuICBpZiAoIWlzT2JqZWN0KHZhbHVlKSB8fCBpc01hc2tlZCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIHBhdHRlcm4gPSAoaXNGdW5jdGlvbih2YWx1ZSkgfHwgaXNIb3N0T2JqZWN0KHZhbHVlKSkgPyByZUlzTmF0aXZlIDogcmVJc0hvc3RDdG9yO1xuICByZXR1cm4gcGF0dGVybi50ZXN0KHRvU291cmNlKHZhbHVlKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUlzTmF0aXZlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlSXNOYXRpdmUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlTWF0Y2hlcyA9IHJlcXVpcmUoJy4vX2Jhc2VNYXRjaGVzJyksXG4gICAgYmFzZU1hdGNoZXNQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vX2Jhc2VNYXRjaGVzUHJvcGVydHknKSxcbiAgICBpZGVudGl0eSA9IHJlcXVpcmUoJy4vaWRlbnRpdHknKSxcbiAgICBpc0FycmF5ID0gcmVxdWlyZSgnLi9pc0FycmF5JyksXG4gICAgcHJvcGVydHkgPSByZXF1aXJlKCcuL3Byb3BlcnR5Jyk7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXRlcmF0ZWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IFt2YWx1ZT1fLmlkZW50aXR5XSBUaGUgdmFsdWUgdG8gY29udmVydCB0byBhbiBpdGVyYXRlZS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgaXRlcmF0ZWUuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJdGVyYXRlZSh2YWx1ZSkge1xuICAvLyBEb24ndCBzdG9yZSB0aGUgYHR5cGVvZmAgcmVzdWx0IGluIGEgdmFyaWFibGUgdG8gYXZvaWQgYSBKSVQgYnVnIGluIFNhZmFyaSA5LlxuICAvLyBTZWUgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE1NjAzNCBmb3IgbW9yZSBkZXRhaWxzLlxuICBpZiAodHlwZW9mIHZhbHVlID09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICByZXR1cm4gaWRlbnRpdHk7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBpc0FycmF5KHZhbHVlKVxuICAgICAgPyBiYXNlTWF0Y2hlc1Byb3BlcnR5KHZhbHVlWzBdLCB2YWx1ZVsxXSlcbiAgICAgIDogYmFzZU1hdGNoZXModmFsdWUpO1xuICB9XG4gIHJldHVybiBwcm9wZXJ0eSh2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUl0ZXJhdGVlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlSXRlcmF0ZWUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVLZXlzID0gT2JqZWN0LmtleXM7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ua2V5c2Agd2hpY2ggZG9lc24ndCBza2lwIHRoZSBjb25zdHJ1Y3RvclxuICogcHJvcGVydHkgb2YgcHJvdG90eXBlcyBvciB0cmVhdCBzcGFyc2UgYXJyYXlzIGFzIGRlbnNlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICovXG5mdW5jdGlvbiBiYXNlS2V5cyhvYmplY3QpIHtcbiAgcmV0dXJuIG5hdGl2ZUtleXMoT2JqZWN0KG9iamVjdCkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VLZXlzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlS2V5cy5qc1xuICoqIG1vZHVsZSBpZCA9IDEwMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VJc01hdGNoID0gcmVxdWlyZSgnLi9fYmFzZUlzTWF0Y2gnKSxcbiAgICBnZXRNYXRjaERhdGEgPSByZXF1aXJlKCcuL19nZXRNYXRjaERhdGEnKSxcbiAgICBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZSA9IHJlcXVpcmUoJy4vX21hdGNoZXNTdHJpY3RDb21wYXJhYmxlJyk7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWF0Y2hlc2Agd2hpY2ggZG9lc24ndCBjbG9uZSBgc291cmNlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IG9mIHByb3BlcnR5IHZhbHVlcyB0byBtYXRjaC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHNwZWMgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGJhc2VNYXRjaGVzKHNvdXJjZSkge1xuICB2YXIgbWF0Y2hEYXRhID0gZ2V0TWF0Y2hEYXRhKHNvdXJjZSk7XG4gIGlmIChtYXRjaERhdGEubGVuZ3RoID09IDEgJiYgbWF0Y2hEYXRhWzBdWzJdKSB7XG4gICAgcmV0dXJuIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlKG1hdGNoRGF0YVswXVswXSwgbWF0Y2hEYXRhWzBdWzFdKTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgcmV0dXJuIG9iamVjdCA9PT0gc291cmNlIHx8IGJhc2VJc01hdGNoKG9iamVjdCwgc291cmNlLCBtYXRjaERhdGEpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VNYXRjaGVzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlTWF0Y2hlcy5qc1xuICoqIG1vZHVsZSBpZCA9IDEwM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VJc0VxdWFsID0gcmVxdWlyZSgnLi9fYmFzZUlzRXF1YWwnKSxcbiAgICBnZXQgPSByZXF1aXJlKCcuL2dldCcpLFxuICAgIGhhc0luID0gcmVxdWlyZSgnLi9oYXNJbicpLFxuICAgIGlzS2V5ID0gcmVxdWlyZSgnLi9faXNLZXknKSxcbiAgICBpc1N0cmljdENvbXBhcmFibGUgPSByZXF1aXJlKCcuL19pc1N0cmljdENvbXBhcmFibGUnKSxcbiAgICBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZSA9IHJlcXVpcmUoJy4vX21hdGNoZXNTdHJpY3RDb21wYXJhYmxlJyksXG4gICAgdG9LZXkgPSByZXF1aXJlKCcuL190b0tleScpO1xuXG4vKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cbnZhciBVTk9SREVSRURfQ09NUEFSRV9GTEFHID0gMSxcbiAgICBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWF0Y2hlc1Byb3BlcnR5YCB3aGljaCBkb2Vzbid0IGNsb25lIGBzcmNWYWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcGFyYW0geyp9IHNyY1ZhbHVlIFRoZSB2YWx1ZSB0byBtYXRjaC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHNwZWMgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGJhc2VNYXRjaGVzUHJvcGVydHkocGF0aCwgc3JjVmFsdWUpIHtcbiAgaWYgKGlzS2V5KHBhdGgpICYmIGlzU3RyaWN0Q29tcGFyYWJsZShzcmNWYWx1ZSkpIHtcbiAgICByZXR1cm4gbWF0Y2hlc1N0cmljdENvbXBhcmFibGUodG9LZXkocGF0aCksIHNyY1ZhbHVlKTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgdmFyIG9ialZhbHVlID0gZ2V0KG9iamVjdCwgcGF0aCk7XG4gICAgcmV0dXJuIChvYmpWYWx1ZSA9PT0gdW5kZWZpbmVkICYmIG9ialZhbHVlID09PSBzcmNWYWx1ZSlcbiAgICAgID8gaGFzSW4ob2JqZWN0LCBwYXRoKVxuICAgICAgOiBiYXNlSXNFcXVhbChzcmNWYWx1ZSwgb2JqVmFsdWUsIHVuZGVmaW5lZCwgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyB8IFBBUlRJQUxfQ09NUEFSRV9GTEFHKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlTWF0Y2hlc1Byb3BlcnR5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlTWF0Y2hlc1Byb3BlcnR5LmpzXG4gKiogbW9kdWxlIGlkID0gMTA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZUdldCA9IHJlcXVpcmUoJy4vX2Jhc2VHZXQnKTtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VQcm9wZXJ0eWAgd2hpY2ggc3VwcG9ydHMgZGVlcCBwYXRocy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlUHJvcGVydHlEZWVwKHBhdGgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHJldHVybiBiYXNlR2V0KG9iamVjdCwgcGF0aCk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZVByb3BlcnR5RGVlcDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZVByb3BlcnR5RGVlcC5qc1xuICoqIG1vZHVsZSBpZCA9IDEwNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50aW1lc2Agd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzXG4gKiBvciBtYXggYXJyYXkgbGVuZ3RoIGNoZWNrcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiB0aW1lcyB0byBpbnZva2UgYGl0ZXJhdGVlYC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHJlc3VsdHMuXG4gKi9cbmZ1bmN0aW9uIGJhc2VUaW1lcyhuLCBpdGVyYXRlZSkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIHJlc3VsdCA9IEFycmF5KG4pO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbikge1xuICAgIHJlc3VsdFtpbmRleF0gPSBpdGVyYXRlZShpbmRleCk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlVGltZXM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VUaW1lcy5qc1xuICoqIG1vZHVsZSBpZCA9IDEwNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIFN5bWJvbCA9IHJlcXVpcmUoJy4vX1N5bWJvbCcpLFxuICAgIGlzU3ltYm9sID0gcmVxdWlyZSgnLi9pc1N5bWJvbCcpO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBJTkZJTklUWSA9IDEgLyAwO1xuXG4vKiogVXNlZCB0byBjb252ZXJ0IHN5bWJvbHMgdG8gcHJpbWl0aXZlcyBhbmQgc3RyaW5ncy4gKi9cbnZhciBzeW1ib2xQcm90byA9IFN5bWJvbCA/IFN5bWJvbC5wcm90b3R5cGUgOiB1bmRlZmluZWQsXG4gICAgc3ltYm9sVG9TdHJpbmcgPSBzeW1ib2xQcm90byA/IHN5bWJvbFByb3RvLnRvU3RyaW5nIDogdW5kZWZpbmVkO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRvU3RyaW5nYCB3aGljaCBkb2Vzbid0IGNvbnZlcnQgbnVsbGlzaFxuICogdmFsdWVzIHRvIGVtcHR5IHN0cmluZ3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGJhc2VUb1N0cmluZyh2YWx1ZSkge1xuICAvLyBFeGl0IGVhcmx5IGZvciBzdHJpbmdzIHRvIGF2b2lkIGEgcGVyZm9ybWFuY2UgaGl0IGluIHNvbWUgZW52aXJvbm1lbnRzLlxuICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gc3ltYm9sVG9TdHJpbmcgPyBzeW1ib2xUb1N0cmluZy5jYWxsKHZhbHVlKSA6ICcnO1xuICB9XG4gIHZhciByZXN1bHQgPSAodmFsdWUgKyAnJyk7XG4gIHJldHVybiAocmVzdWx0ID09ICcwJyAmJiAoMSAvIHZhbHVlKSA9PSAtSU5GSU5JVFkpID8gJy0wJyA6IHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlVG9TdHJpbmc7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VUb1N0cmluZy5qc1xuICoqIG1vZHVsZSBpZCA9IDEwN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIGdsb2JhbCBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge251bGx8T2JqZWN0fSBSZXR1cm5zIGB2YWx1ZWAgaWYgaXQncyBhIGdsb2JhbCBvYmplY3QsIGVsc2UgYG51bGxgLlxuICovXG5mdW5jdGlvbiBjaGVja0dsb2JhbCh2YWx1ZSkge1xuICByZXR1cm4gKHZhbHVlICYmIHZhbHVlLk9iamVjdCA9PT0gT2JqZWN0KSA/IHZhbHVlIDogbnVsbDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjaGVja0dsb2JhbDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fY2hlY2tHbG9iYWwuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciByb290ID0gcmVxdWlyZSgnLi9fcm9vdCcpO1xuXG4vKiogVXNlZCB0byBkZXRlY3Qgb3ZlcnJlYWNoaW5nIGNvcmUtanMgc2hpbXMuICovXG52YXIgY29yZUpzRGF0YSA9IHJvb3RbJ19fY29yZS1qc19zaGFyZWRfXyddO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNvcmVKc0RhdGE7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2NvcmVKc0RhdGEuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBTeW1ib2wgPSByZXF1aXJlKCcuL19TeW1ib2wnKSxcbiAgICBVaW50OEFycmF5ID0gcmVxdWlyZSgnLi9fVWludDhBcnJheScpLFxuICAgIGVxdWFsQXJyYXlzID0gcmVxdWlyZSgnLi9fZXF1YWxBcnJheXMnKSxcbiAgICBtYXBUb0FycmF5ID0gcmVxdWlyZSgnLi9fbWFwVG9BcnJheScpLFxuICAgIHNldFRvQXJyYXkgPSByZXF1aXJlKCcuL19zZXRUb0FycmF5Jyk7XG5cbi8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNvbXBhcmlzb24gc3R5bGVzLiAqL1xudmFyIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgPSAxLFxuICAgIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsXG4gICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcbiAgICBlcnJvclRhZyA9ICdbb2JqZWN0IEVycm9yXScsXG4gICAgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG4gICAgbnVtYmVyVGFnID0gJ1tvYmplY3QgTnVtYmVyXScsXG4gICAgcmVnZXhwVGFnID0gJ1tvYmplY3QgUmVnRXhwXScsXG4gICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG4gICAgc3RyaW5nVGFnID0gJ1tvYmplY3QgU3RyaW5nXScsXG4gICAgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbnZhciBhcnJheUJ1ZmZlclRhZyA9ICdbb2JqZWN0IEFycmF5QnVmZmVyXScsXG4gICAgZGF0YVZpZXdUYWcgPSAnW29iamVjdCBEYXRhVmlld10nO1xuXG4vKiogVXNlZCB0byBjb252ZXJ0IHN5bWJvbHMgdG8gcHJpbWl0aXZlcyBhbmQgc3RyaW5ncy4gKi9cbnZhciBzeW1ib2xQcm90byA9IFN5bWJvbCA/IFN5bWJvbC5wcm90b3R5cGUgOiB1bmRlZmluZWQsXG4gICAgc3ltYm9sVmFsdWVPZiA9IHN5bWJvbFByb3RvID8gc3ltYm9sUHJvdG8udmFsdWVPZiA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGNvbXBhcmluZyBvYmplY3RzIG9mXG4gKiB0aGUgc2FtZSBgdG9TdHJpbmdUYWdgLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIG9ubHkgc3VwcG9ydHMgY29tcGFyaW5nIHZhbHVlcyB3aXRoIHRhZ3Mgb2ZcbiAqIGBCb29sZWFuYCwgYERhdGVgLCBgRXJyb3JgLCBgTnVtYmVyYCwgYFJlZ0V4cGAsIG9yIGBTdHJpbmdgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnIFRoZSBgdG9TdHJpbmdUYWdgIG9mIHRoZSBvYmplY3RzIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYFxuICogIGZvciBtb3JlIGRldGFpbHMuXG4gKiBAcGFyYW0ge09iamVjdH0gc3RhY2sgVHJhY2tzIHRyYXZlcnNlZCBgb2JqZWN0YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgdGFnLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSB7XG4gIHN3aXRjaCAodGFnKSB7XG4gICAgY2FzZSBkYXRhVmlld1RhZzpcbiAgICAgIGlmICgob2JqZWN0LmJ5dGVMZW5ndGggIT0gb3RoZXIuYnl0ZUxlbmd0aCkgfHxcbiAgICAgICAgICAob2JqZWN0LmJ5dGVPZmZzZXQgIT0gb3RoZXIuYnl0ZU9mZnNldCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgb2JqZWN0ID0gb2JqZWN0LmJ1ZmZlcjtcbiAgICAgIG90aGVyID0gb3RoZXIuYnVmZmVyO1xuXG4gICAgY2FzZSBhcnJheUJ1ZmZlclRhZzpcbiAgICAgIGlmICgob2JqZWN0LmJ5dGVMZW5ndGggIT0gb3RoZXIuYnl0ZUxlbmd0aCkgfHxcbiAgICAgICAgICAhZXF1YWxGdW5jKG5ldyBVaW50OEFycmF5KG9iamVjdCksIG5ldyBVaW50OEFycmF5KG90aGVyKSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICBjYXNlIGJvb2xUYWc6XG4gICAgY2FzZSBkYXRlVGFnOlxuICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1iZXJzLCBkYXRlcyB0byBtaWxsaXNlY29uZHMgYW5kXG4gICAgICAvLyBib29sZWFucyB0byBgMWAgb3IgYDBgIHRyZWF0aW5nIGludmFsaWQgZGF0ZXMgY29lcmNlZCB0byBgTmFOYCBhc1xuICAgICAgLy8gbm90IGVxdWFsLlxuICAgICAgcmV0dXJuICtvYmplY3QgPT0gK290aGVyO1xuXG4gICAgY2FzZSBlcnJvclRhZzpcbiAgICAgIHJldHVybiBvYmplY3QubmFtZSA9PSBvdGhlci5uYW1lICYmIG9iamVjdC5tZXNzYWdlID09IG90aGVyLm1lc3NhZ2U7XG5cbiAgICBjYXNlIG51bWJlclRhZzpcbiAgICAgIC8vIFRyZWF0IGBOYU5gIHZzLiBgTmFOYCBhcyBlcXVhbC5cbiAgICAgIHJldHVybiAob2JqZWN0ICE9ICtvYmplY3QpID8gb3RoZXIgIT0gK290aGVyIDogb2JqZWN0ID09ICtvdGhlcjtcblxuICAgIGNhc2UgcmVnZXhwVGFnOlxuICAgIGNhc2Ugc3RyaW5nVGFnOlxuICAgICAgLy8gQ29lcmNlIHJlZ2V4ZXMgdG8gc3RyaW5ncyBhbmQgdHJlYXQgc3RyaW5ncywgcHJpbWl0aXZlcyBhbmQgb2JqZWN0cyxcbiAgICAgIC8vIGFzIGVxdWFsLiBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXJlZ2V4cC5wcm90b3R5cGUudG9zdHJpbmdcbiAgICAgIC8vIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICByZXR1cm4gb2JqZWN0ID09IChvdGhlciArICcnKTtcblxuICAgIGNhc2UgbWFwVGFnOlxuICAgICAgdmFyIGNvbnZlcnQgPSBtYXBUb0FycmF5O1xuXG4gICAgY2FzZSBzZXRUYWc6XG4gICAgICB2YXIgaXNQYXJ0aWFsID0gYml0bWFzayAmIFBBUlRJQUxfQ09NUEFSRV9GTEFHO1xuICAgICAgY29udmVydCB8fCAoY29udmVydCA9IHNldFRvQXJyYXkpO1xuXG4gICAgICBpZiAob2JqZWN0LnNpemUgIT0gb3RoZXIuc2l6ZSAmJiAhaXNQYXJ0aWFsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cbiAgICAgIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KG9iamVjdCk7XG4gICAgICBpZiAoc3RhY2tlZCkge1xuICAgICAgICByZXR1cm4gc3RhY2tlZCA9PSBvdGhlcjtcbiAgICAgIH1cbiAgICAgIGJpdG1hc2sgfD0gVU5PUkRFUkVEX0NPTVBBUkVfRkxBRztcbiAgICAgIHN0YWNrLnNldChvYmplY3QsIG90aGVyKTtcblxuICAgICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgICByZXR1cm4gZXF1YWxBcnJheXMoY29udmVydChvYmplY3QpLCBjb252ZXJ0KG90aGVyKSwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG5cbiAgICBjYXNlIHN5bWJvbFRhZzpcbiAgICAgIGlmIChzeW1ib2xWYWx1ZU9mKSB7XG4gICAgICAgIHJldHVybiBzeW1ib2xWYWx1ZU9mLmNhbGwob2JqZWN0KSA9PSBzeW1ib2xWYWx1ZU9mLmNhbGwob3RoZXIpO1xuICAgICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlcXVhbEJ5VGFnO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19lcXVhbEJ5VGFnLmpzXG4gKiogbW9kdWxlIGlkID0gMTEwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZUhhcyA9IHJlcXVpcmUoJy4vX2Jhc2VIYXMnKSxcbiAgICBrZXlzID0gcmVxdWlyZSgnLi9rZXlzJyk7XG5cbi8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNvbXBhcmlzb24gc3R5bGVzLiAqL1xudmFyIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIG9iamVjdHMgd2l0aCBzdXBwb3J0IGZvclxuICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYFxuICogIGZvciBtb3JlIGRldGFpbHMuXG4gKiBAcGFyYW0ge09iamVjdH0gc3RhY2sgVHJhY2tzIHRyYXZlcnNlZCBgb2JqZWN0YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGVxdWFsT2JqZWN0cyhvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSB7XG4gIHZhciBpc1BhcnRpYWwgPSBiaXRtYXNrICYgUEFSVElBTF9DT01QQVJFX0ZMQUcsXG4gICAgICBvYmpQcm9wcyA9IGtleXMob2JqZWN0KSxcbiAgICAgIG9iakxlbmd0aCA9IG9ialByb3BzLmxlbmd0aCxcbiAgICAgIG90aFByb3BzID0ga2V5cyhvdGhlciksXG4gICAgICBvdGhMZW5ndGggPSBvdGhQcm9wcy5sZW5ndGg7XG5cbiAgaWYgKG9iakxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIWlzUGFydGlhbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgaW5kZXggPSBvYmpMZW5ndGg7XG4gIHdoaWxlIChpbmRleC0tKSB7XG4gICAgdmFyIGtleSA9IG9ialByb3BzW2luZGV4XTtcbiAgICBpZiAoIShpc1BhcnRpYWwgPyBrZXkgaW4gb3RoZXIgOiBiYXNlSGFzKG90aGVyLCBrZXkpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG4gIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KG9iamVjdCk7XG4gIGlmIChzdGFja2VkKSB7XG4gICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG4gIH1cbiAgdmFyIHJlc3VsdCA9IHRydWU7XG4gIHN0YWNrLnNldChvYmplY3QsIG90aGVyKTtcblxuICB2YXIgc2tpcEN0b3IgPSBpc1BhcnRpYWw7XG4gIHdoaWxlICgrK2luZGV4IDwgb2JqTGVuZ3RoKSB7XG4gICAga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuICAgIHZhciBvYmpWYWx1ZSA9IG9iamVjdFtrZXldLFxuICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2tleV07XG5cbiAgICBpZiAoY3VzdG9taXplcikge1xuICAgICAgdmFyIGNvbXBhcmVkID0gaXNQYXJ0aWFsXG4gICAgICAgID8gY3VzdG9taXplcihvdGhWYWx1ZSwgb2JqVmFsdWUsIGtleSwgb3RoZXIsIG9iamVjdCwgc3RhY2spXG4gICAgICAgIDogY3VzdG9taXplcihvYmpWYWx1ZSwgb3RoVmFsdWUsIGtleSwgb2JqZWN0LCBvdGhlciwgc3RhY2spO1xuICAgIH1cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICBpZiAoIShjb21wYXJlZCA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgPyAob2JqVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhvYmpWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSlcbiAgICAgICAgICA6IGNvbXBhcmVkXG4gICAgICAgICkpIHtcbiAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHNraXBDdG9yIHx8IChza2lwQ3RvciA9IGtleSA9PSAnY29uc3RydWN0b3InKTtcbiAgfVxuICBpZiAocmVzdWx0ICYmICFza2lwQ3Rvcikge1xuICAgIHZhciBvYmpDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yLFxuICAgICAgICBvdGhDdG9yID0gb3RoZXIuY29uc3RydWN0b3I7XG5cbiAgICAvLyBOb24gYE9iamVjdGAgb2JqZWN0IGluc3RhbmNlcyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVhbC5cbiAgICBpZiAob2JqQ3RvciAhPSBvdGhDdG9yICYmXG4gICAgICAgICgnY29uc3RydWN0b3InIGluIG9iamVjdCAmJiAnY29uc3RydWN0b3InIGluIG90aGVyKSAmJlxuICAgICAgICAhKHR5cGVvZiBvYmpDdG9yID09ICdmdW5jdGlvbicgJiYgb2JqQ3RvciBpbnN0YW5jZW9mIG9iakN0b3IgJiZcbiAgICAgICAgICB0eXBlb2Ygb3RoQ3RvciA9PSAnZnVuY3Rpb24nICYmIG90aEN0b3IgaW5zdGFuY2VvZiBvdGhDdG9yKSkge1xuICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIHN0YWNrWydkZWxldGUnXShvYmplY3QpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVxdWFsT2JqZWN0cztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fZXF1YWxPYmplY3RzLmpzXG4gKiogbW9kdWxlIGlkID0gMTExXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9fYmFzZVByb3BlcnR5Jyk7XG5cbi8qKlxuICogR2V0cyB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSB2YWx1ZSBvZiBgb2JqZWN0YC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGF2b2lkIGFcbiAqIFtKSVQgYnVnXShodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTQyNzkyKSB0aGF0IGFmZmVjdHNcbiAqIFNhZmFyaSBvbiBhdCBsZWFzdCBpT1MgOC4xLTguMyBBUk02NC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIFwibGVuZ3RoXCIgdmFsdWUuXG4gKi9cbnZhciBnZXRMZW5ndGggPSBiYXNlUHJvcGVydHkoJ2xlbmd0aCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGdldExlbmd0aDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fZ2V0TGVuZ3RoLmpzXG4gKiogbW9kdWxlIGlkID0gMTEyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNTdHJpY3RDb21wYXJhYmxlID0gcmVxdWlyZSgnLi9faXNTdHJpY3RDb21wYXJhYmxlJyksXG4gICAga2V5cyA9IHJlcXVpcmUoJy4va2V5cycpO1xuXG4vKipcbiAqIEdldHMgdGhlIHByb3BlcnR5IG5hbWVzLCB2YWx1ZXMsIGFuZCBjb21wYXJlIGZsYWdzIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG1hdGNoIGRhdGEgb2YgYG9iamVjdGAuXG4gKi9cbmZ1bmN0aW9uIGdldE1hdGNoRGF0YShvYmplY3QpIHtcbiAgdmFyIHJlc3VsdCA9IGtleXMob2JqZWN0KSxcbiAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG5cbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgdmFyIGtleSA9IHJlc3VsdFtsZW5ndGhdLFxuICAgICAgICB2YWx1ZSA9IG9iamVjdFtrZXldO1xuXG4gICAgcmVzdWx0W2xlbmd0aF0gPSBba2V5LCB2YWx1ZSwgaXNTdHJpY3RDb21wYXJhYmxlKHZhbHVlKV07XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRNYXRjaERhdGE7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2dldE1hdGNoRGF0YS5qc1xuICoqIG1vZHVsZSBpZCA9IDExM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZUdldFByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcblxuLyoqXG4gKiBHZXRzIHRoZSBgW1tQcm90b3R5cGVdXWAgb2YgYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7bnVsbHxPYmplY3R9IFJldHVybnMgdGhlIGBbW1Byb3RvdHlwZV1dYC5cbiAqL1xuZnVuY3Rpb24gZ2V0UHJvdG90eXBlKHZhbHVlKSB7XG4gIHJldHVybiBuYXRpdmVHZXRQcm90b3R5cGUoT2JqZWN0KHZhbHVlKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0UHJvdG90eXBlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19nZXRQcm90b3R5cGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBEYXRhVmlldyA9IHJlcXVpcmUoJy4vX0RhdGFWaWV3JyksXG4gICAgTWFwID0gcmVxdWlyZSgnLi9fTWFwJyksXG4gICAgUHJvbWlzZSA9IHJlcXVpcmUoJy4vX1Byb21pc2UnKSxcbiAgICBTZXQgPSByZXF1aXJlKCcuL19TZXQnKSxcbiAgICBXZWFrTWFwID0gcmVxdWlyZSgnLi9fV2Vha01hcCcpLFxuICAgIHRvU291cmNlID0gcmVxdWlyZSgnLi9fdG9Tb3VyY2UnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nLFxuICAgIHByb21pc2VUYWcgPSAnW29iamVjdCBQcm9taXNlXScsXG4gICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG4gICAgd2Vha01hcFRhZyA9ICdbb2JqZWN0IFdlYWtNYXBdJztcblxudmFyIGRhdGFWaWV3VGFnID0gJ1tvYmplY3QgRGF0YVZpZXddJztcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBtYXBzLCBzZXRzLCBhbmQgd2Vha21hcHMuICovXG52YXIgZGF0YVZpZXdDdG9yU3RyaW5nID0gdG9Tb3VyY2UoRGF0YVZpZXcpLFxuICAgIG1hcEN0b3JTdHJpbmcgPSB0b1NvdXJjZShNYXApLFxuICAgIHByb21pc2VDdG9yU3RyaW5nID0gdG9Tb3VyY2UoUHJvbWlzZSksXG4gICAgc2V0Q3RvclN0cmluZyA9IHRvU291cmNlKFNldCksXG4gICAgd2Vha01hcEN0b3JTdHJpbmcgPSB0b1NvdXJjZShXZWFrTWFwKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBgdG9TdHJpbmdUYWdgIG9mIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgYHRvU3RyaW5nVGFnYC5cbiAqL1xuZnVuY3Rpb24gZ2V0VGFnKHZhbHVlKSB7XG4gIHJldHVybiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIGRhdGEgdmlld3MsIG1hcHMsIHNldHMsIGFuZCB3ZWFrIG1hcHMgaW4gSUUgMTEsXG4vLyBmb3IgZGF0YSB2aWV3cyBpbiBFZGdlLCBhbmQgcHJvbWlzZXMgaW4gTm9kZS5qcy5cbmlmICgoRGF0YVZpZXcgJiYgZ2V0VGFnKG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoMSkpKSAhPSBkYXRhVmlld1RhZykgfHxcbiAgICAoTWFwICYmIGdldFRhZyhuZXcgTWFwKSAhPSBtYXBUYWcpIHx8XG4gICAgKFByb21pc2UgJiYgZ2V0VGFnKFByb21pc2UucmVzb2x2ZSgpKSAhPSBwcm9taXNlVGFnKSB8fFxuICAgIChTZXQgJiYgZ2V0VGFnKG5ldyBTZXQpICE9IHNldFRhZykgfHxcbiAgICAoV2Vha01hcCAmJiBnZXRUYWcobmV3IFdlYWtNYXApICE9IHdlYWtNYXBUYWcpKSB7XG4gIGdldFRhZyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdmFyIHJlc3VsdCA9IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpLFxuICAgICAgICBDdG9yID0gcmVzdWx0ID09IG9iamVjdFRhZyA/IHZhbHVlLmNvbnN0cnVjdG9yIDogdW5kZWZpbmVkLFxuICAgICAgICBjdG9yU3RyaW5nID0gQ3RvciA/IHRvU291cmNlKEN0b3IpIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKGN0b3JTdHJpbmcpIHtcbiAgICAgIHN3aXRjaCAoY3RvclN0cmluZykge1xuICAgICAgICBjYXNlIGRhdGFWaWV3Q3RvclN0cmluZzogcmV0dXJuIGRhdGFWaWV3VGFnO1xuICAgICAgICBjYXNlIG1hcEN0b3JTdHJpbmc6IHJldHVybiBtYXBUYWc7XG4gICAgICAgIGNhc2UgcHJvbWlzZUN0b3JTdHJpbmc6IHJldHVybiBwcm9taXNlVGFnO1xuICAgICAgICBjYXNlIHNldEN0b3JTdHJpbmc6IHJldHVybiBzZXRUYWc7XG4gICAgICAgIGNhc2Ugd2Vha01hcEN0b3JTdHJpbmc6IHJldHVybiB3ZWFrTWFwVGFnO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFRhZztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fZ2V0VGFnLmpzXG4gKiogbW9kdWxlIGlkID0gMTE1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIEdldHMgdGhlIHZhbHVlIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBnZXRWYWx1ZShvYmplY3QsIGtleSkge1xuICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRWYWx1ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fZ2V0VmFsdWUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBjYXN0UGF0aCA9IHJlcXVpcmUoJy4vX2Nhc3RQYXRoJyksXG4gICAgaXNBcmd1bWVudHMgPSByZXF1aXJlKCcuL2lzQXJndW1lbnRzJyksXG4gICAgaXNBcnJheSA9IHJlcXVpcmUoJy4vaXNBcnJheScpLFxuICAgIGlzSW5kZXggPSByZXF1aXJlKCcuL19pc0luZGV4JyksXG4gICAgaXNLZXkgPSByZXF1aXJlKCcuL19pc0tleScpLFxuICAgIGlzTGVuZ3RoID0gcmVxdWlyZSgnLi9pc0xlbmd0aCcpLFxuICAgIGlzU3RyaW5nID0gcmVxdWlyZSgnLi9pc1N0cmluZycpLFxuICAgIHRvS2V5ID0gcmVxdWlyZSgnLi9fdG9LZXknKTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHBhdGhgIGV4aXN0cyBvbiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggdG8gY2hlY2suXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYXNGdW5jIFRoZSBmdW5jdGlvbiB0byBjaGVjayBwcm9wZXJ0aWVzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBwYXRoYCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaGFzUGF0aChvYmplY3QsIHBhdGgsIGhhc0Z1bmMpIHtcbiAgcGF0aCA9IGlzS2V5KHBhdGgsIG9iamVjdCkgPyBbcGF0aF0gOiBjYXN0UGF0aChwYXRoKTtcblxuICB2YXIgcmVzdWx0LFxuICAgICAgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGtleSA9IHRvS2V5KHBhdGhbaW5kZXhdKTtcbiAgICBpZiAoIShyZXN1bHQgPSBvYmplY3QgIT0gbnVsbCAmJiBoYXNGdW5jKG9iamVjdCwga2V5KSkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBvYmplY3QgPSBvYmplY3Rba2V5XTtcbiAgfVxuICBpZiAocmVzdWx0KSB7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICB2YXIgbGVuZ3RoID0gb2JqZWN0ID8gb2JqZWN0Lmxlbmd0aCA6IDA7XG4gIHJldHVybiAhIWxlbmd0aCAmJiBpc0xlbmd0aChsZW5ndGgpICYmIGlzSW5kZXgoa2V5LCBsZW5ndGgpICYmXG4gICAgKGlzQXJyYXkob2JqZWN0KSB8fCBpc1N0cmluZyhvYmplY3QpIHx8IGlzQXJndW1lbnRzKG9iamVjdCkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGhhc1BhdGg7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2hhc1BhdGguanNcbiAqKiBtb2R1bGUgaWQgPSAxMTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBuYXRpdmVDcmVhdGUgPSByZXF1aXJlKCcuL19uYXRpdmVDcmVhdGUnKTtcblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBoYXNoLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBjbGVhclxuICogQG1lbWJlck9mIEhhc2hcbiAqL1xuZnVuY3Rpb24gaGFzaENsZWFyKCkge1xuICB0aGlzLl9fZGF0YV9fID0gbmF0aXZlQ3JlYXRlID8gbmF0aXZlQ3JlYXRlKG51bGwpIDoge307XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaGFzaENsZWFyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19oYXNoQ2xlYXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxMThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGhhc2guXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGRlbGV0ZVxuICogQG1lbWJlck9mIEhhc2hcbiAqIEBwYXJhbSB7T2JqZWN0fSBoYXNoIFRoZSBoYXNoIHRvIG1vZGlmeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBoYXNoRGVsZXRlKGtleSkge1xuICByZXR1cm4gdGhpcy5oYXMoa2V5KSAmJiBkZWxldGUgdGhpcy5fX2RhdGFfX1trZXldO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGhhc2hEZWxldGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2hhc2hEZWxldGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBuYXRpdmVDcmVhdGUgPSByZXF1aXJlKCcuL19uYXRpdmVDcmVhdGUnKTtcblxuLyoqIFVzZWQgdG8gc3RhbmQtaW4gZm9yIGB1bmRlZmluZWRgIGhhc2ggdmFsdWVzLiAqL1xudmFyIEhBU0hfVU5ERUZJTkVEID0gJ19fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18nO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIEdldHMgdGhlIGhhc2ggdmFsdWUgZm9yIGBrZXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBnZXRcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gaGFzaEdldChrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICBpZiAobmF0aXZlQ3JlYXRlKSB7XG4gICAgdmFyIHJlc3VsdCA9IGRhdGFba2V5XTtcbiAgICByZXR1cm4gcmVzdWx0ID09PSBIQVNIX1VOREVGSU5FRCA/IHVuZGVmaW5lZCA6IHJlc3VsdDtcbiAgfVxuICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLCBrZXkpID8gZGF0YVtrZXldIDogdW5kZWZpbmVkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGhhc2hHZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2hhc2hHZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMjBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBuYXRpdmVDcmVhdGUgPSByZXF1aXJlKCcuL19uYXRpdmVDcmVhdGUnKTtcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYSBoYXNoIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIEhhc2hcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBoYXNoSGFzKGtleSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG4gIHJldHVybiBuYXRpdmVDcmVhdGUgPyBkYXRhW2tleV0gIT09IHVuZGVmaW5lZCA6IGhhc093blByb3BlcnR5LmNhbGwoZGF0YSwga2V5KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBoYXNoSGFzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19oYXNoSGFzLmpzXG4gKiogbW9kdWxlIGlkID0gMTIxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgbmF0aXZlQ3JlYXRlID0gcmVxdWlyZSgnLi9fbmF0aXZlQ3JlYXRlJyk7XG5cbi8qKiBVc2VkIHRvIHN0YW5kLWluIGZvciBgdW5kZWZpbmVkYCBoYXNoIHZhbHVlcy4gKi9cbnZhciBIQVNIX1VOREVGSU5FRCA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJztcblxuLyoqXG4gKiBTZXRzIHRoZSBoYXNoIGBrZXlgIHRvIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIHNldFxuICogQG1lbWJlck9mIEhhc2hcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgaGFzaCBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gaGFzaFNldChrZXksIHZhbHVlKSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcbiAgZGF0YVtrZXldID0gKG5hdGl2ZUNyZWF0ZSAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkKSA/IEhBU0hfVU5ERUZJTkVEIDogdmFsdWU7XG4gIHJldHVybiB0aGlzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGhhc2hTZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2hhc2hTZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlVGltZXMgPSByZXF1aXJlKCcuL19iYXNlVGltZXMnKSxcbiAgICBpc0FyZ3VtZW50cyA9IHJlcXVpcmUoJy4vaXNBcmd1bWVudHMnKSxcbiAgICBpc0FycmF5ID0gcmVxdWlyZSgnLi9pc0FycmF5JyksXG4gICAgaXNMZW5ndGggPSByZXF1aXJlKCcuL2lzTGVuZ3RoJyksXG4gICAgaXNTdHJpbmcgPSByZXF1aXJlKCcuL2lzU3RyaW5nJyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiBpbmRleCBrZXlzIGZvciBgb2JqZWN0YCB2YWx1ZXMgb2YgYXJyYXlzLFxuICogYGFyZ3VtZW50c2Agb2JqZWN0cywgYW5kIHN0cmluZ3MsIG90aGVyd2lzZSBgbnVsbGAgaXMgcmV0dXJuZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheXxudWxsfSBSZXR1cm5zIGluZGV4IGtleXMsIGVsc2UgYG51bGxgLlxuICovXG5mdW5jdGlvbiBpbmRleEtleXMob2JqZWN0KSB7XG4gIHZhciBsZW5ndGggPSBvYmplY3QgPyBvYmplY3QubGVuZ3RoIDogdW5kZWZpbmVkO1xuICBpZiAoaXNMZW5ndGgobGVuZ3RoKSAmJlxuICAgICAgKGlzQXJyYXkob2JqZWN0KSB8fCBpc1N0cmluZyhvYmplY3QpIHx8IGlzQXJndW1lbnRzKG9iamVjdCkpKSB7XG4gICAgcmV0dXJuIGJhc2VUaW1lcyhsZW5ndGgsIFN0cmluZyk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW5kZXhLZXlzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19pbmRleEtleXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgc3VpdGFibGUgZm9yIHVzZSBhcyB1bmlxdWUgb2JqZWN0IGtleS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0tleWFibGUodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAodHlwZSA9PSAnc3RyaW5nJyB8fCB0eXBlID09ICdudW1iZXInIHx8IHR5cGUgPT0gJ3N5bWJvbCcgfHwgdHlwZSA9PSAnYm9vbGVhbicpXG4gICAgPyAodmFsdWUgIT09ICdfX3Byb3RvX18nKVxuICAgIDogKHZhbHVlID09PSBudWxsKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0tleWFibGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2lzS2V5YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEyNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGNvcmVKc0RhdGEgPSByZXF1aXJlKCcuL19jb3JlSnNEYXRhJyk7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBtZXRob2RzIG1hc3F1ZXJhZGluZyBhcyBuYXRpdmUuICovXG52YXIgbWFza1NyY0tleSA9IChmdW5jdGlvbigpIHtcbiAgdmFyIHVpZCA9IC9bXi5dKyQvLmV4ZWMoY29yZUpzRGF0YSAmJiBjb3JlSnNEYXRhLmtleXMgJiYgY29yZUpzRGF0YS5rZXlzLklFX1BST1RPIHx8ICcnKTtcbiAgcmV0dXJuIHVpZCA/ICgnU3ltYm9sKHNyYylfMS4nICsgdWlkKSA6ICcnO1xufSgpKTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYGZ1bmNgIGhhcyBpdHMgc291cmNlIG1hc2tlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYGZ1bmNgIGlzIG1hc2tlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc01hc2tlZChmdW5jKSB7XG4gIHJldHVybiAhIW1hc2tTcmNLZXkgJiYgKG1hc2tTcmNLZXkgaW4gZnVuYyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNNYXNrZWQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2lzTWFza2VkLmpzXG4gKiogbW9kdWxlIGlkID0gMTI1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxpa2VseSBhIHByb3RvdHlwZSBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwcm90b3R5cGUsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNQcm90b3R5cGUodmFsdWUpIHtcbiAgdmFyIEN0b3IgPSB2YWx1ZSAmJiB2YWx1ZS5jb25zdHJ1Y3RvcixcbiAgICAgIHByb3RvID0gKHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUpIHx8IG9iamVjdFByb3RvO1xuXG4gIHJldHVybiB2YWx1ZSA9PT0gcHJvdG87XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNQcm90b3R5cGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2lzUHJvdG90eXBlLmpzXG4gKiogbW9kdWxlIGlkID0gMTI2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIGxpc3QgY2FjaGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGNsZWFyXG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZUNsZWFyKCkge1xuICB0aGlzLl9fZGF0YV9fID0gW107XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbGlzdENhY2hlQ2xlYXI7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2xpc3RDYWNoZUNsZWFyLmpzXG4gKiogbW9kdWxlIGlkID0gMTI3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYXNzb2NJbmRleE9mID0gcmVxdWlyZSgnLi9fYXNzb2NJbmRleE9mJyk7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBzcGxpY2UgPSBhcnJheVByb3RvLnNwbGljZTtcblxuLyoqXG4gKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgbGlzdCBjYWNoZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZGVsZXRlXG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gbGlzdENhY2hlRGVsZXRlKGtleSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG4gICAgICBpbmRleCA9IGFzc29jSW5kZXhPZihkYXRhLCBrZXkpO1xuXG4gIGlmIChpbmRleCA8IDApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIGxhc3RJbmRleCA9IGRhdGEubGVuZ3RoIC0gMTtcbiAgaWYgKGluZGV4ID09IGxhc3RJbmRleCkge1xuICAgIGRhdGEucG9wKCk7XG4gIH0gZWxzZSB7XG4gICAgc3BsaWNlLmNhbGwoZGF0YSwgaW5kZXgsIDEpO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGxpc3RDYWNoZURlbGV0ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbGlzdENhY2hlRGVsZXRlLmpzXG4gKiogbW9kdWxlIGlkID0gMTI4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYXNzb2NJbmRleE9mID0gcmVxdWlyZSgnLi9fYXNzb2NJbmRleE9mJyk7XG5cbi8qKlxuICogR2V0cyB0aGUgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGdldFxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZUdldChrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblxuICByZXR1cm4gaW5kZXggPCAwID8gdW5kZWZpbmVkIDogZGF0YVtpbmRleF1bMV07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbGlzdENhY2hlR2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19saXN0Q2FjaGVHZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMjlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBhc3NvY0luZGV4T2YgPSByZXF1aXJlKCcuL19hc3NvY0luZGV4T2YnKTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYSBsaXN0IGNhY2hlIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZUhhcyhrZXkpIHtcbiAgcmV0dXJuIGFzc29jSW5kZXhPZih0aGlzLl9fZGF0YV9fLCBrZXkpID4gLTE7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbGlzdENhY2hlSGFzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19saXN0Q2FjaGVIYXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBhc3NvY0luZGV4T2YgPSByZXF1aXJlKCcuL19hc3NvY0luZGV4T2YnKTtcblxuLyoqXG4gKiBTZXRzIHRoZSBsaXN0IGNhY2hlIGBrZXlgIHRvIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIHNldFxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBsaXN0IGNhY2hlIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVTZXQoa2V5LCB2YWx1ZSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG4gICAgICBpbmRleCA9IGFzc29jSW5kZXhPZihkYXRhLCBrZXkpO1xuXG4gIGlmIChpbmRleCA8IDApIHtcbiAgICBkYXRhLnB1c2goW2tleSwgdmFsdWVdKTtcbiAgfSBlbHNlIHtcbiAgICBkYXRhW2luZGV4XVsxXSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiB0aGlzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGxpc3RDYWNoZVNldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbGlzdENhY2hlU2V0LmpzXG4gKiogbW9kdWxlIGlkID0gMTMxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgSGFzaCA9IHJlcXVpcmUoJy4vX0hhc2gnKSxcbiAgICBMaXN0Q2FjaGUgPSByZXF1aXJlKCcuL19MaXN0Q2FjaGUnKSxcbiAgICBNYXAgPSByZXF1aXJlKCcuL19NYXAnKTtcblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBtYXAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGNsZWFyXG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqL1xuZnVuY3Rpb24gbWFwQ2FjaGVDbGVhcigpIHtcbiAgdGhpcy5fX2RhdGFfXyA9IHtcbiAgICAnaGFzaCc6IG5ldyBIYXNoLFxuICAgICdtYXAnOiBuZXcgKE1hcCB8fCBMaXN0Q2FjaGUpLFxuICAgICdzdHJpbmcnOiBuZXcgSGFzaFxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG1hcENhY2hlQ2xlYXI7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX21hcENhY2hlQ2xlYXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnZXRNYXBEYXRhID0gcmVxdWlyZSgnLi9fZ2V0TWFwRGF0YScpO1xuXG4vKipcbiAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBtYXAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGRlbGV0ZVxuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gbWFwQ2FjaGVEZWxldGUoa2V5KSB7XG4gIHJldHVybiBnZXRNYXBEYXRhKHRoaXMsIGtleSlbJ2RlbGV0ZSddKGtleSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbWFwQ2FjaGVEZWxldGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX21hcENhY2hlRGVsZXRlLmpzXG4gKiogbW9kdWxlIGlkID0gMTMzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0TWFwRGF0YSA9IHJlcXVpcmUoJy4vX2dldE1hcERhdGEnKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBtYXAgdmFsdWUgZm9yIGBrZXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBnZXRcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlR2V0KGtleSkge1xuICByZXR1cm4gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLmdldChrZXkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG1hcENhY2hlR2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19tYXBDYWNoZUdldC5qc1xuICoqIG1vZHVsZSBpZCA9IDEzNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdldE1hcERhdGEgPSByZXF1aXJlKCcuL19nZXRNYXBEYXRhJyk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgbWFwIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gbWFwQ2FjaGVIYXMoa2V5KSB7XG4gIHJldHVybiBnZXRNYXBEYXRhKHRoaXMsIGtleSkuaGFzKGtleSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbWFwQ2FjaGVIYXM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX21hcENhY2hlSGFzLmpzXG4gKiogbW9kdWxlIGlkID0gMTM1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0TWFwRGF0YSA9IHJlcXVpcmUoJy4vX2dldE1hcERhdGEnKTtcblxuLyoqXG4gKiBTZXRzIHRoZSBtYXAgYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbWFwIGNhY2hlIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBtYXBDYWNoZVNldChrZXksIHZhbHVlKSB7XG4gIGdldE1hcERhdGEodGhpcywga2V5KS5zZXQoa2V5LCB2YWx1ZSk7XG4gIHJldHVybiB0aGlzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG1hcENhY2hlU2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19tYXBDYWNoZVNldC5qc1xuICoqIG1vZHVsZSBpZCA9IDEzNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDb252ZXJ0cyBgbWFwYCB0byBpdHMga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUga2V5LXZhbHVlIHBhaXJzLlxuICovXG5mdW5jdGlvbiBtYXBUb0FycmF5KG1hcCkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIHJlc3VsdCA9IEFycmF5KG1hcC5zaXplKTtcblxuICBtYXAuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgcmVzdWx0WysraW5kZXhdID0gW2tleSwgdmFsdWVdO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtYXBUb0FycmF5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19tYXBUb0FycmF5LmpzXG4gKiogbW9kdWxlIGlkID0gMTM3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiogVXNlZCB0byBzdGFuZC1pbiBmb3IgYHVuZGVmaW5lZGAgaGFzaCB2YWx1ZXMuICovXG52YXIgSEFTSF9VTkRFRklORUQgPSAnX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyc7XG5cbi8qKlxuICogQWRkcyBgdmFsdWVgIHRvIHRoZSBhcnJheSBjYWNoZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgYWRkXG4gKiBAbWVtYmVyT2YgU2V0Q2FjaGVcbiAqIEBhbGlhcyBwdXNoXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjYWNoZS5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNhY2hlIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBzZXRDYWNoZUFkZCh2YWx1ZSkge1xuICB0aGlzLl9fZGF0YV9fLnNldCh2YWx1ZSwgSEFTSF9VTkRFRklORUQpO1xuICByZXR1cm4gdGhpcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXRDYWNoZUFkZDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fc2V0Q2FjaGVBZGQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgaW4gdGhlIGFycmF5IGNhY2hlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBTZXRDYWNoZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgZm91bmQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gc2V0Q2FjaGVIYXModmFsdWUpIHtcbiAgcmV0dXJuIHRoaXMuX19kYXRhX18uaGFzKHZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXRDYWNoZUhhcztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fc2V0Q2FjaGVIYXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ29udmVydHMgYHNldGAgdG8gYW4gYXJyYXkgb2YgaXRzIHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IHNldCBUaGUgc2V0IHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHZhbHVlcy5cbiAqL1xuZnVuY3Rpb24gc2V0VG9BcnJheShzZXQpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSBBcnJheShzZXQuc2l6ZSk7XG5cbiAgc2V0LmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXN1bHRbKytpbmRleF0gPSB2YWx1ZTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0VG9BcnJheTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fc2V0VG9BcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDE0MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIExpc3RDYWNoZSA9IHJlcXVpcmUoJy4vX0xpc3RDYWNoZScpO1xuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIHN0YWNrLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBjbGVhclxuICogQG1lbWJlck9mIFN0YWNrXG4gKi9cbmZ1bmN0aW9uIHN0YWNrQ2xlYXIoKSB7XG4gIHRoaXMuX19kYXRhX18gPSBuZXcgTGlzdENhY2hlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN0YWNrQ2xlYXI7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3N0YWNrQ2xlYXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxNDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIHN0YWNrLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBTdGFja1xuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIHN0YWNrRGVsZXRlKGtleSkge1xuICByZXR1cm4gdGhpcy5fX2RhdGFfX1snZGVsZXRlJ10oa2V5KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzdGFja0RlbGV0ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fc3RhY2tEZWxldGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxNDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogR2V0cyB0aGUgc3RhY2sgdmFsdWUgZm9yIGBrZXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBnZXRcbiAqIEBtZW1iZXJPZiBTdGFja1xuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIHN0YWNrR2V0KGtleSkge1xuICByZXR1cm4gdGhpcy5fX2RhdGFfXy5nZXQoa2V5KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzdGFja0dldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fc3RhY2tHZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAxNDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ2hlY2tzIGlmIGEgc3RhY2sgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBzdGFja0hhcyhrZXkpIHtcbiAgcmV0dXJuIHRoaXMuX19kYXRhX18uaGFzKGtleSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc3RhY2tIYXM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3N0YWNrSGFzLmpzXG4gKiogbW9kdWxlIGlkID0gMTQ0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgTGlzdENhY2hlID0gcmVxdWlyZSgnLi9fTGlzdENhY2hlJyksXG4gICAgTWFwQ2FjaGUgPSByZXF1aXJlKCcuL19NYXBDYWNoZScpO1xuXG4vKiogVXNlZCBhcyB0aGUgc2l6ZSB0byBlbmFibGUgbGFyZ2UgYXJyYXkgb3B0aW1pemF0aW9ucy4gKi9cbnZhciBMQVJHRV9BUlJBWV9TSVpFID0gMjAwO1xuXG4vKipcbiAqIFNldHMgdGhlIHN0YWNrIGBrZXlgIHRvIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIHNldFxuICogQG1lbWJlck9mIFN0YWNrXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIHN0YWNrIGNhY2hlIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBzdGFja1NldChrZXksIHZhbHVlKSB7XG4gIHZhciBjYWNoZSA9IHRoaXMuX19kYXRhX187XG4gIGlmIChjYWNoZSBpbnN0YW5jZW9mIExpc3RDYWNoZSAmJiBjYWNoZS5fX2RhdGFfXy5sZW5ndGggPT0gTEFSR0VfQVJSQVlfU0laRSkge1xuICAgIGNhY2hlID0gdGhpcy5fX2RhdGFfXyA9IG5ldyBNYXBDYWNoZShjYWNoZS5fX2RhdGFfXyk7XG4gIH1cbiAgY2FjaGUuc2V0KGtleSwgdmFsdWUpO1xuICByZXR1cm4gdGhpcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzdGFja1NldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fc3RhY2tTZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAxNDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBtZW1vaXplID0gcmVxdWlyZSgnLi9tZW1vaXplJyksXG4gICAgdG9TdHJpbmcgPSByZXF1aXJlKCcuL3RvU3RyaW5nJyk7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cbnZhciByZVByb3BOYW1lID0gL1teLltcXF1dK3xcXFsoPzooLT9cXGQrKD86XFwuXFxkKyk/KXwoW1wiJ10pKCg/Oig/IVxcMilbXlxcXFxdfFxcXFwuKSo/KVxcMilcXF18KD89KFxcLnxcXFtcXF0pKD86XFw0fCQpKS9nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBiYWNrc2xhc2hlcyBpbiBwcm9wZXJ0eSBwYXRocy4gKi9cbnZhciByZUVzY2FwZUNoYXIgPSAvXFxcXChcXFxcKT8vZztcblxuLyoqXG4gKiBDb252ZXJ0cyBgc3RyaW5nYCB0byBhIHByb3BlcnR5IHBhdGggYXJyYXkuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBjb252ZXJ0LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBwcm9wZXJ0eSBwYXRoIGFycmF5LlxuICovXG52YXIgc3RyaW5nVG9QYXRoID0gbWVtb2l6ZShmdW5jdGlvbihzdHJpbmcpIHtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuICB0b1N0cmluZyhzdHJpbmcpLnJlcGxhY2UocmVQcm9wTmFtZSwgZnVuY3Rpb24obWF0Y2gsIG51bWJlciwgcXVvdGUsIHN0cmluZykge1xuICAgIHJlc3VsdC5wdXNoKHF1b3RlID8gc3RyaW5nLnJlcGxhY2UocmVFc2NhcGVDaGFyLCAnJDEnKSA6IChudW1iZXIgfHwgbWF0Y2gpKTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBzdHJpbmdUb1BhdGg7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3N0cmluZ1RvUGF0aC5qc1xuICoqIG1vZHVsZSBpZCA9IDE0NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pc09iamVjdCcpLFxuICAgIG5vdyA9IHJlcXVpcmUoJy4vbm93JyksXG4gICAgdG9OdW1iZXIgPSByZXF1aXJlKCcuL3RvTnVtYmVyJyk7XG5cbi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG4gICAgbmF0aXZlTWluID0gTWF0aC5taW47XG5cbi8qKlxuICogQ3JlYXRlcyBhIGRlYm91bmNlZCBmdW5jdGlvbiB0aGF0IGRlbGF5cyBpbnZva2luZyBgZnVuY2AgdW50aWwgYWZ0ZXIgYHdhaXRgXG4gKiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3YXNcbiAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWxcbiAqIGRlbGF5ZWQgYGZ1bmNgIGludm9jYXRpb25zIGFuZCBhIGBmbHVzaGAgbWV0aG9kIHRvIGltbWVkaWF0ZWx5IGludm9rZSB0aGVtLlxuICogUHJvdmlkZSBhbiBvcHRpb25zIG9iamVjdCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvblxuICogdGhlIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcbiAqIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnQgY2FsbHNcbiAqIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgIGludm9jYXRpb24uXG4gKlxuICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpcyBpbnZva2VkXG4gKiBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gaXNcbiAqIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAqXG4gKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9kZWJvdW5jaW5nLXRocm90dGxpbmctZXhwbGFpbmVkLWV4YW1wbGVzLylcbiAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XVxuICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG4gKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuICpcbiAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuICogICAnbGVhZGluZyc6IHRydWUsXG4gKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gKiB9KSk7XG4gKlxuICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cbiAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pO1xuICogdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL3N0cmVhbScpO1xuICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuICpcbiAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgZGVib3VuY2VkIGludm9jYXRpb24uXG4gKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcbiAqL1xuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgbGFzdEFyZ3MsXG4gICAgICBsYXN0VGhpcyxcbiAgICAgIG1heFdhaXQsXG4gICAgICByZXN1bHQsXG4gICAgICB0aW1lcklkLFxuICAgICAgbGFzdENhbGxUaW1lLFxuICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuICAgICAgbGVhZGluZyA9IGZhbHNlLFxuICAgICAgbWF4aW5nID0gZmFsc2UsXG4gICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG4gIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZztcbiAgICBtYXhpbmcgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucztcbiAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcbiAgICB2YXIgYXJncyA9IGxhc3RBcmdzLFxuICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG4gICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgLy8gU3RhcnQgdGhlIHRpbWVyIGZvciB0aGUgdHJhaWxpbmcgZWRnZS5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLlxuICAgIHJldHVybiBsZWFkaW5nID8gaW52b2tlRnVuYyh0aW1lKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbWFpbmluZ1dhaXQodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsXG4gICAgICAgIHJlc3VsdCA9IHdhaXQgLSB0aW1lU2luY2VMYXN0Q2FsbDtcblxuICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0LCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cbiAgICAvLyBFaXRoZXIgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgYWN0aXZpdHkgaGFzIHN0b3BwZWQgYW5kIHdlJ3JlIGF0IHRoZVxuICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG4gICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuICAgIHJldHVybiAobGFzdENhbGxUaW1lID09PSB1bmRlZmluZWQgfHwgKHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQpIHx8XG4gICAgICAodGltZVNpbmNlTGFzdENhbGwgPCAwKSB8fCAobWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCk7XG4gICAgaWYgKHNob3VsZEludm9rZSh0aW1lKSkge1xuICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcbiAgICB9XG4gICAgLy8gUmVzdGFydCB0aGUgdGltZXIuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG4gICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cbiAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cbiAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcbiAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuICAgIH1cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgbGFzdEludm9rZVRpbWUgPSAwO1xuICAgIGxhc3RBcmdzID0gbGFzdENhbGxUaW1lID0gbGFzdFRoaXMgPSB0aW1lcklkID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgdmFyIHRpbWUgPSBub3coKSxcbiAgICAgICAgaXNJbnZva2luZyA9IHNob3VsZEludm9rZSh0aW1lKTtcblxuICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuICAgIGxhc3RUaGlzID0gdGhpcztcbiAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuXG4gICAgaWYgKGlzSW52b2tpbmcpIHtcbiAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGxlYWRpbmdFZGdlKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgICBpZiAobWF4aW5nKSB7XG4gICAgICAgIC8vIEhhbmRsZSBpbnZvY2F0aW9ucyBpbiBhIHRpZ2h0IGxvb3AuXG4gICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcbiAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG4gIHJldHVybiBkZWJvdW5jZWQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvZGVib3VuY2UuanNcbiAqKiBtb2R1bGUgaWQgPSAxNDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogUGVyZm9ybXMgYVxuICogW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAqIGNvbXBhcmlzb24gYmV0d2VlbiB0d28gdmFsdWVzIHRvIGRldGVybWluZSBpZiB0aGV5IGFyZSBlcXVpdmFsZW50LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG4gKiB2YXIgb3RoZXIgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG4gKlxuICogXy5lcShvYmplY3QsIG9iamVjdCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5lcShvYmplY3QsIG90aGVyKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5lcSgnYScsICdhJyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5lcSgnYScsIE9iamVjdCgnYScpKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5lcShOYU4sIE5hTik7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGVxKHZhbHVlLCBvdGhlcikge1xuICByZXR1cm4gdmFsdWUgPT09IG90aGVyIHx8ICh2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlcTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9lcS5qc1xuICoqIG1vZHVsZSBpZCA9IDE0OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VGaW5kSW5kZXggPSByZXF1aXJlKCcuL19iYXNlRmluZEluZGV4JyksXG4gICAgYmFzZUl0ZXJhdGVlID0gcmVxdWlyZSgnLi9fYmFzZUl0ZXJhdGVlJyksXG4gICAgdG9JbnRlZ2VyID0gcmVxdWlyZSgnLi90b0ludGVnZXInKTtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4O1xuXG4vKipcbiAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZGAgZXhjZXB0IHRoYXQgaXQgcmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0XG4gKiBlbGVtZW50IGBwcmVkaWNhdGVgIHJldHVybnMgdHJ1dGh5IGZvciBpbnN0ZWFkIG9mIHRoZSBlbGVtZW50IGl0c2VsZi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDEuMS4wXG4gKiBAY2F0ZWdvcnkgQXJyYXlcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG4gKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV1cbiAqICBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IFtmcm9tSW5kZXg9MF0gVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZvdW5kIGVsZW1lbnQsIGVsc2UgYC0xYC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIHVzZXJzID0gW1xuICogICB7ICd1c2VyJzogJ2Jhcm5leScsICAnYWN0aXZlJzogZmFsc2UgfSxcbiAqICAgeyAndXNlcic6ICdmcmVkJywgICAgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gKiAgIHsgJ3VzZXInOiAncGViYmxlcycsICdhY3RpdmUnOiB0cnVlIH1cbiAqIF07XG4gKlxuICogXy5maW5kSW5kZXgodXNlcnMsIGZ1bmN0aW9uKG8pIHsgcmV0dXJuIG8udXNlciA9PSAnYmFybmV5JzsgfSk7XG4gKiAvLyA9PiAwXG4gKlxuICogLy8gVGhlIGBfLm1hdGNoZXNgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAqIF8uZmluZEluZGV4KHVzZXJzLCB7ICd1c2VyJzogJ2ZyZWQnLCAnYWN0aXZlJzogZmFsc2UgfSk7XG4gKiAvLyA9PiAxXG4gKlxuICogLy8gVGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICogXy5maW5kSW5kZXgodXNlcnMsIFsnYWN0aXZlJywgZmFsc2VdKTtcbiAqIC8vID0+IDBcbiAqXG4gKiAvLyBUaGUgYF8ucHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAqIF8uZmluZEluZGV4KHVzZXJzLCAnYWN0aXZlJyk7XG4gKiAvLyA9PiAyXG4gKi9cbmZ1bmN0aW9uIGZpbmRJbmRleChhcnJheSwgcHJlZGljYXRlLCBmcm9tSW5kZXgpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcbiAgaWYgKCFsZW5ndGgpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgdmFyIGluZGV4ID0gZnJvbUluZGV4ID09IG51bGwgPyAwIDogdG9JbnRlZ2VyKGZyb21JbmRleCk7XG4gIGlmIChpbmRleCA8IDApIHtcbiAgICBpbmRleCA9IG5hdGl2ZU1heChsZW5ndGggKyBpbmRleCwgMCk7XG4gIH1cbiAgcmV0dXJuIGJhc2VGaW5kSW5kZXgoYXJyYXksIGJhc2VJdGVyYXRlZShwcmVkaWNhdGUsIDMpLCBpbmRleCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZmluZEluZGV4O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2ZpbmRJbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDE0OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VHZXQgPSByZXF1aXJlKCcuL19iYXNlR2V0Jyk7XG5cbi8qKlxuICogR2V0cyB0aGUgdmFsdWUgYXQgYHBhdGhgIG9mIGBvYmplY3RgLiBJZiB0aGUgcmVzb2x2ZWQgdmFsdWUgaXNcbiAqIGB1bmRlZmluZWRgLCB0aGUgYGRlZmF1bHRWYWx1ZWAgaXMgdXNlZCBpbiBpdHMgcGxhY2UuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAzLjcuMFxuICogQGNhdGVnb3J5IE9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEBwYXJhbSB7Kn0gW2RlZmF1bHRWYWx1ZV0gVGhlIHZhbHVlIHJldHVybmVkIGZvciBgdW5kZWZpbmVkYCByZXNvbHZlZCB2YWx1ZXMuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICdhJzogW3sgJ2InOiB7ICdjJzogMyB9IH1dIH07XG4gKlxuICogXy5nZXQob2JqZWN0LCAnYVswXS5iLmMnKTtcbiAqIC8vID0+IDNcbiAqXG4gKiBfLmdldChvYmplY3QsIFsnYScsICcwJywgJ2InLCAnYyddKTtcbiAqIC8vID0+IDNcbiAqXG4gKiBfLmdldChvYmplY3QsICdhLmIuYycsICdkZWZhdWx0Jyk7XG4gKiAvLyA9PiAnZGVmYXVsdCdcbiAqL1xuZnVuY3Rpb24gZ2V0KG9iamVjdCwgcGF0aCwgZGVmYXVsdFZhbHVlKSB7XG4gIHZhciByZXN1bHQgPSBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGJhc2VHZXQob2JqZWN0LCBwYXRoKTtcbiAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdFZhbHVlIDogcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9nZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAxNTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlSGFzSW4gPSByZXF1aXJlKCcuL19iYXNlSGFzSW4nKSxcbiAgICBoYXNQYXRoID0gcmVxdWlyZSgnLi9faGFzUGF0aCcpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgcGF0aGAgaXMgYSBkaXJlY3Qgb3IgaW5oZXJpdGVkIHByb3BlcnR5IG9mIGBvYmplY3RgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBwYXRoYCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IF8uY3JlYXRlKHsgJ2EnOiBfLmNyZWF0ZSh7ICdiJzogMiB9KSB9KTtcbiAqXG4gKiBfLmhhc0luKG9iamVjdCwgJ2EnKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmhhc0luKG9iamVjdCwgJ2EuYicpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaGFzSW4ob2JqZWN0LCBbJ2EnLCAnYiddKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmhhc0luKG9iamVjdCwgJ2InKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGhhc0luKG9iamVjdCwgcGF0aCkge1xuICByZXR1cm4gb2JqZWN0ICE9IG51bGwgJiYgaGFzUGF0aChvYmplY3QsIHBhdGgsIGJhc2VIYXNJbik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaGFzSW47XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaGFzSW4uanNcbiAqKiBtb2R1bGUgaWQgPSAxNTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3QgYXJndW1lbnQgZ2l2ZW4gdG8gaXQuXG4gKlxuICogQHN0YXRpY1xuICogQHNpbmNlIDAuMS4wXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IFV0aWxcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgQW55IHZhbHVlLlxuICogQHJldHVybnMgeyp9IFJldHVybnMgYHZhbHVlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcbiAqXG4gKiBjb25zb2xlLmxvZyhfLmlkZW50aXR5KG9iamVjdCkgPT09IG9iamVjdCk7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGlkZW50aXR5KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpZGVudGl0eTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9pZGVudGl0eS5qc1xuICoqIG1vZHVsZSBpZCA9IDE1MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzQXJyYXlMaWtlID0gcmVxdWlyZSgnLi9pc0FycmF5TGlrZScpLFxuICAgIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4vaXNPYmplY3RMaWtlJyk7XG5cbi8qKlxuICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5pc0FycmF5TGlrZWAgZXhjZXB0IHRoYXQgaXQgYWxzbyBjaGVja3MgaWYgYHZhbHVlYFxuICogaXMgYW4gb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGFycmF5LWxpa2Ugb2JqZWN0LFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzQXJyYXlMaWtlKHZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0FycmF5TGlrZU9iamVjdDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9pc0FycmF5TGlrZU9iamVjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDE1M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzTGVuZ3RoID0gcmVxdWlyZSgnLi9pc0xlbmd0aCcpLFxuICAgIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4vaXNPYmplY3RMaWtlJyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG4gICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuICAgIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsXG4gICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcbiAgICBlcnJvclRhZyA9ICdbb2JqZWN0IEVycm9yXScsXG4gICAgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG4gICAgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG4gICAgbnVtYmVyVGFnID0gJ1tvYmplY3QgTnVtYmVyXScsXG4gICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XScsXG4gICAgcmVnZXhwVGFnID0gJ1tvYmplY3QgUmVnRXhwXScsXG4gICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG4gICAgc3RyaW5nVGFnID0gJ1tvYmplY3QgU3RyaW5nXScsXG4gICAgd2Vha01hcFRhZyA9ICdbb2JqZWN0IFdlYWtNYXBdJztcblxudmFyIGFycmF5QnVmZmVyVGFnID0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJyxcbiAgICBkYXRhVmlld1RhZyA9ICdbb2JqZWN0IERhdGFWaWV3XScsXG4gICAgZmxvYXQzMlRhZyA9ICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nLFxuICAgIGZsb2F0NjRUYWcgPSAnW29iamVjdCBGbG9hdDY0QXJyYXldJyxcbiAgICBpbnQ4VGFnID0gJ1tvYmplY3QgSW50OEFycmF5XScsXG4gICAgaW50MTZUYWcgPSAnW29iamVjdCBJbnQxNkFycmF5XScsXG4gICAgaW50MzJUYWcgPSAnW29iamVjdCBJbnQzMkFycmF5XScsXG4gICAgdWludDhUYWcgPSAnW29iamVjdCBVaW50OEFycmF5XScsXG4gICAgdWludDhDbGFtcGVkVGFnID0gJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJyxcbiAgICB1aW50MTZUYWcgPSAnW29iamVjdCBVaW50MTZBcnJheV0nLFxuICAgIHVpbnQzMlRhZyA9ICdbb2JqZWN0IFVpbnQzMkFycmF5XSc7XG5cbi8qKiBVc2VkIHRvIGlkZW50aWZ5IGB0b1N0cmluZ1RhZ2AgdmFsdWVzIG9mIHR5cGVkIGFycmF5cy4gKi9cbnZhciB0eXBlZEFycmF5VGFncyA9IHt9O1xudHlwZWRBcnJheVRhZ3NbZmxvYXQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1tmbG9hdDY0VGFnXSA9XG50eXBlZEFycmF5VGFnc1tpbnQ4VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2ludDE2VGFnXSA9XG50eXBlZEFycmF5VGFnc1tpbnQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50OFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbdWludDhDbGFtcGVkVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQxNlRhZ10gPVxudHlwZWRBcnJheVRhZ3NbdWludDMyVGFnXSA9IHRydWU7XG50eXBlZEFycmF5VGFnc1thcmdzVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2FycmF5VGFnXSA9XG50eXBlZEFycmF5VGFnc1thcnJheUJ1ZmZlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tib29sVGFnXSA9XG50eXBlZEFycmF5VGFnc1tkYXRhVmlld1RhZ10gPSB0eXBlZEFycmF5VGFnc1tkYXRlVGFnXSA9XG50eXBlZEFycmF5VGFnc1tlcnJvclRhZ10gPSB0eXBlZEFycmF5VGFnc1tmdW5jVGFnXSA9XG50eXBlZEFycmF5VGFnc1ttYXBUYWddID0gdHlwZWRBcnJheVRhZ3NbbnVtYmVyVGFnXSA9XG50eXBlZEFycmF5VGFnc1tvYmplY3RUYWddID0gdHlwZWRBcnJheVRhZ3NbcmVnZXhwVGFnXSA9XG50eXBlZEFycmF5VGFnc1tzZXRUYWddID0gdHlwZWRBcnJheVRhZ3Nbc3RyaW5nVGFnXSA9XG50eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgdHlwZWQgYXJyYXkuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAzLjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzVHlwZWRBcnJheShuZXcgVWludDhBcnJheSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1R5cGVkQXJyYXkoW10pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNUeXBlZEFycmF5KHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmXG4gICAgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhIXR5cGVkQXJyYXlUYWdzW29iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1R5cGVkQXJyYXk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaXNUeXBlZEFycmF5LmpzXG4gKiogbW9kdWxlIGlkID0gMTU0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgTWFwQ2FjaGUgPSByZXF1aXJlKCcuL19NYXBDYWNoZScpO1xuXG4vKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBtZW1vaXplcyB0aGUgcmVzdWx0IG9mIGBmdW5jYC4gSWYgYHJlc29sdmVyYCBpc1xuICogcHJvdmlkZWQsIGl0IGRldGVybWluZXMgdGhlIGNhY2hlIGtleSBmb3Igc3RvcmluZyB0aGUgcmVzdWx0IGJhc2VkIG9uIHRoZVxuICogYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBtZW1vaXplZCBmdW5jdGlvbi4gQnkgZGVmYXVsdCwgdGhlIGZpcnN0IGFyZ3VtZW50XG4gKiBwcm92aWRlZCB0byB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24gaXMgdXNlZCBhcyB0aGUgbWFwIGNhY2hlIGtleS4gVGhlIGBmdW5jYFxuICogaXMgaW52b2tlZCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24uXG4gKlxuICogKipOb3RlOioqIFRoZSBjYWNoZSBpcyBleHBvc2VkIGFzIHRoZSBgY2FjaGVgIHByb3BlcnR5IG9uIHRoZSBtZW1vaXplZFxuICogZnVuY3Rpb24uIEl0cyBjcmVhdGlvbiBtYXkgYmUgY3VzdG9taXplZCBieSByZXBsYWNpbmcgdGhlIGBfLm1lbW9pemUuQ2FjaGVgXG4gKiBjb25zdHJ1Y3RvciB3aXRoIG9uZSB3aG9zZSBpbnN0YW5jZXMgaW1wbGVtZW50IHRoZVxuICogW2BNYXBgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1wcm9wZXJ0aWVzLW9mLXRoZS1tYXAtcHJvdG90eXBlLW9iamVjdClcbiAqIG1ldGhvZCBpbnRlcmZhY2Ugb2YgYGRlbGV0ZWAsIGBnZXRgLCBgaGFzYCwgYW5kIGBzZXRgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gaGF2ZSBpdHMgb3V0cHV0IG1lbW9pemVkLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW3Jlc29sdmVyXSBUaGUgZnVuY3Rpb24gdG8gcmVzb2x2ZSB0aGUgY2FjaGUga2V5LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgbWVtb2l6ZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICdhJzogMSwgJ2InOiAyIH07XG4gKiB2YXIgb3RoZXIgPSB7ICdjJzogMywgJ2QnOiA0IH07XG4gKlxuICogdmFyIHZhbHVlcyA9IF8ubWVtb2l6ZShfLnZhbHVlcyk7XG4gKiB2YWx1ZXMob2JqZWN0KTtcbiAqIC8vID0+IFsxLCAyXVxuICpcbiAqIHZhbHVlcyhvdGhlcik7XG4gKiAvLyA9PiBbMywgNF1cbiAqXG4gKiBvYmplY3QuYSA9IDI7XG4gKiB2YWx1ZXMob2JqZWN0KTtcbiAqIC8vID0+IFsxLCAyXVxuICpcbiAqIC8vIE1vZGlmeSB0aGUgcmVzdWx0IGNhY2hlLlxuICogdmFsdWVzLmNhY2hlLnNldChvYmplY3QsIFsnYScsICdiJ10pO1xuICogdmFsdWVzKG9iamVjdCk7XG4gKiAvLyA9PiBbJ2EnLCAnYiddXG4gKlxuICogLy8gUmVwbGFjZSBgXy5tZW1vaXplLkNhY2hlYC5cbiAqIF8ubWVtb2l6ZS5DYWNoZSA9IFdlYWtNYXA7XG4gKi9cbmZ1bmN0aW9uIG1lbW9pemUoZnVuYywgcmVzb2x2ZXIpIHtcbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicgfHwgKHJlc29sdmVyICYmIHR5cGVvZiByZXNvbHZlciAhPSAnZnVuY3Rpb24nKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICB2YXIgbWVtb2l6ZWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAga2V5ID0gcmVzb2x2ZXIgPyByZXNvbHZlci5hcHBseSh0aGlzLCBhcmdzKSA6IGFyZ3NbMF0sXG4gICAgICAgIGNhY2hlID0gbWVtb2l6ZWQuY2FjaGU7XG5cbiAgICBpZiAoY2FjaGUuaGFzKGtleSkpIHtcbiAgICAgIHJldHVybiBjYWNoZS5nZXQoa2V5KTtcbiAgICB9XG4gICAgdmFyIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG4gICAgbWVtb2l6ZWQuY2FjaGUgPSBjYWNoZS5zZXQoa2V5LCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG4gIG1lbW9pemVkLmNhY2hlID0gbmV3IChtZW1vaXplLkNhY2hlIHx8IE1hcENhY2hlKTtcbiAgcmV0dXJuIG1lbW9pemVkO1xufVxuXG4vLyBBc3NpZ24gY2FjaGUgdG8gYF8ubWVtb2l6ZWAuXG5tZW1vaXplLkNhY2hlID0gTWFwQ2FjaGU7XG5cbm1vZHVsZS5leHBvcnRzID0gbWVtb2l6ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9tZW1vaXplLmpzXG4gKiogbW9kdWxlIGlkID0gMTU1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuICogdGhlIFVuaXggZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAyLjQuMFxuICogQGNhdGVnb3J5IERhdGVcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVzdGFtcC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuICogfSwgXy5ub3coKSk7XG4gKiAvLyA9PiBMb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBpbnZvY2F0aW9uLlxuICovXG5mdW5jdGlvbiBub3coKSB7XG4gIHJldHVybiBEYXRlLm5vdygpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5vdztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9ub3cuanNcbiAqKiBtb2R1bGUgaWQgPSAxNTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlUHJvcGVydHkgPSByZXF1aXJlKCcuL19iYXNlUHJvcGVydHknKSxcbiAgICBiYXNlUHJvcGVydHlEZWVwID0gcmVxdWlyZSgnLi9fYmFzZVByb3BlcnR5RGVlcCcpLFxuICAgIGlzS2V5ID0gcmVxdWlyZSgnLi9faXNLZXknKSxcbiAgICB0b0tleSA9IHJlcXVpcmUoJy4vX3RvS2V5Jyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgdmFsdWUgYXQgYHBhdGhgIG9mIGEgZ2l2ZW4gb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMi40LjBcbiAqIEBjYXRlZ29yeSBVdGlsXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYWNjZXNzb3IgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3RzID0gW1xuICogICB7ICdhJzogeyAnYic6IDIgfSB9LFxuICogICB7ICdhJzogeyAnYic6IDEgfSB9XG4gKiBdO1xuICpcbiAqIF8ubWFwKG9iamVjdHMsIF8ucHJvcGVydHkoJ2EuYicpKTtcbiAqIC8vID0+IFsyLCAxXVxuICpcbiAqIF8ubWFwKF8uc29ydEJ5KG9iamVjdHMsIF8ucHJvcGVydHkoWydhJywgJ2InXSkpLCAnYS5iJyk7XG4gKiAvLyA9PiBbMSwgMl1cbiAqL1xuZnVuY3Rpb24gcHJvcGVydHkocGF0aCkge1xuICByZXR1cm4gaXNLZXkocGF0aCkgPyBiYXNlUHJvcGVydHkodG9LZXkocGF0aCkpIDogYmFzZVByb3BlcnR5RGVlcChwYXRoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBwcm9wZXJ0eTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9wcm9wZXJ0eS5qc1xuICoqIG1vZHVsZSBpZCA9IDE1N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGFwcGx5ID0gcmVxdWlyZSgnLi9fYXBwbHknKSxcbiAgICB0b0ludGVnZXIgPSByZXF1aXJlKCcuL3RvSW50ZWdlcicpO1xuXG4vKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZVxuICogY3JlYXRlZCBmdW5jdGlvbiBhbmQgYXJndW1lbnRzIGZyb20gYHN0YXJ0YCBhbmQgYmV5b25kIHByb3ZpZGVkIGFzXG4gKiBhbiBhcnJheS5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgYmFzZWQgb24gdGhlXG4gKiBbcmVzdCBwYXJhbWV0ZXJdKGh0dHBzOi8vbWRuLmlvL3Jlc3RfcGFyYW1ldGVycykuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBhcHBseSBhIHJlc3QgcGFyYW1ldGVyIHRvLlxuICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD1mdW5jLmxlbmd0aC0xXSBUaGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIHJlc3QgcGFyYW1ldGVyLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBzYXkgPSBfLnJlc3QoZnVuY3Rpb24od2hhdCwgbmFtZXMpIHtcbiAqICAgcmV0dXJuIHdoYXQgKyAnICcgKyBfLmluaXRpYWwobmFtZXMpLmpvaW4oJywgJykgK1xuICogICAgIChfLnNpemUobmFtZXMpID4gMSA/ICcsICYgJyA6ICcnKSArIF8ubGFzdChuYW1lcyk7XG4gKiB9KTtcbiAqXG4gKiBzYXkoJ2hlbGxvJywgJ2ZyZWQnLCAnYmFybmV5JywgJ3BlYmJsZXMnKTtcbiAqIC8vID0+ICdoZWxsbyBmcmVkLCBiYXJuZXksICYgcGViYmxlcydcbiAqL1xuZnVuY3Rpb24gcmVzdChmdW5jLCBzdGFydCkge1xuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICBzdGFydCA9IG5hdGl2ZU1heChzdGFydCA9PT0gdW5kZWZpbmVkID8gKGZ1bmMubGVuZ3RoIC0gMSkgOiB0b0ludGVnZXIoc3RhcnQpLCAwKTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBuYXRpdmVNYXgoYXJncy5sZW5ndGggLSBzdGFydCwgMCksXG4gICAgICAgIGFycmF5ID0gQXJyYXkobGVuZ3RoKTtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICBhcnJheVtpbmRleF0gPSBhcmdzW3N0YXJ0ICsgaW5kZXhdO1xuICAgIH1cbiAgICBzd2l0Y2ggKHN0YXJ0KSB7XG4gICAgICBjYXNlIDA6IHJldHVybiBmdW5jLmNhbGwodGhpcywgYXJyYXkpO1xuICAgICAgY2FzZSAxOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3NbMF0sIGFycmF5KTtcbiAgICAgIGNhc2UgMjogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzLCBhcmdzWzBdLCBhcmdzWzFdLCBhcnJheSk7XG4gICAgfVxuICAgIHZhciBvdGhlckFyZ3MgPSBBcnJheShzdGFydCArIDEpO1xuICAgIGluZGV4ID0gLTE7XG4gICAgd2hpbGUgKCsraW5kZXggPCBzdGFydCkge1xuICAgICAgb3RoZXJBcmdzW2luZGV4XSA9IGFyZ3NbaW5kZXhdO1xuICAgIH1cbiAgICBvdGhlckFyZ3Nbc3RhcnRdID0gYXJyYXk7XG4gICAgcmV0dXJuIGFwcGx5KGZ1bmMsIHRoaXMsIG90aGVyQXJncyk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVzdDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9yZXN0LmpzXG4gKiogbW9kdWxlIGlkID0gMTU4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgdG9OdW1iZXIgPSByZXF1aXJlKCcuL3RvTnVtYmVyJyk7XG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIElORklOSVRZID0gMSAvIDAsXG4gICAgTUFYX0lOVEVHRVIgPSAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwODtcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgZmluaXRlIG51bWJlci5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMTIuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgbnVtYmVyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvRmluaXRlKDMuMik7XG4gKiAvLyA9PiAzLjJcbiAqXG4gKiBfLnRvRmluaXRlKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gNWUtMzI0XG4gKlxuICogXy50b0Zpbml0ZShJbmZpbml0eSk7XG4gKiAvLyA9PiAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOFxuICpcbiAqIF8udG9GaW5pdGUoJzMuMicpO1xuICogLy8gPT4gMy4yXG4gKi9cbmZ1bmN0aW9uIHRvRmluaXRlKHZhbHVlKSB7XG4gIGlmICghdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6IDA7XG4gIH1cbiAgdmFsdWUgPSB0b051bWJlcih2YWx1ZSk7XG4gIGlmICh2YWx1ZSA9PT0gSU5GSU5JVFkgfHwgdmFsdWUgPT09IC1JTkZJTklUWSkge1xuICAgIHZhciBzaWduID0gKHZhbHVlIDwgMCA/IC0xIDogMSk7XG4gICAgcmV0dXJuIHNpZ24gKiBNQVhfSU5URUdFUjtcbiAgfVxuICByZXR1cm4gdmFsdWUgPT09IHZhbHVlID8gdmFsdWUgOiAwO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRvRmluaXRlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL3RvRmluaXRlLmpzXG4gKiogbW9kdWxlIGlkID0gMTU5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZVRvU3RyaW5nID0gcmVxdWlyZSgnLi9fYmFzZVRvU3RyaW5nJyk7XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZy4gQW4gZW1wdHkgc3RyaW5nIGlzIHJldHVybmVkIGZvciBgbnVsbGBcbiAqIGFuZCBgdW5kZWZpbmVkYCB2YWx1ZXMuIFRoZSBzaWduIG9mIGAtMGAgaXMgcHJlc2VydmVkLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvU3RyaW5nKG51bGwpO1xuICogLy8gPT4gJydcbiAqXG4gKiBfLnRvU3RyaW5nKC0wKTtcbiAqIC8vID0+ICctMCdcbiAqXG4gKiBfLnRvU3RyaW5nKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiAnMSwyLDMnXG4gKi9cbmZ1bmN0aW9uIHRvU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiBiYXNlVG9TdHJpbmcodmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRvU3RyaW5nO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL3RvU3RyaW5nLmpzXG4gKiogbW9kdWxlIGlkID0gMTYwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcbi8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgQmVnaW4gcHJpc20tY29yZS5qc1xuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG52YXIgX3NlbGYgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpXG5cdD8gd2luZG93ICAgLy8gaWYgaW4gYnJvd3NlclxuXHQ6IChcblx0XHQodHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAndW5kZWZpbmVkJyAmJiBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGUpXG5cdFx0PyBzZWxmIC8vIGlmIGluIHdvcmtlclxuXHRcdDoge30gICAvLyBpZiBpbiBub2RlIGpzXG5cdCk7XG5cbi8qKlxuICogUHJpc206IExpZ2h0d2VpZ2h0LCByb2J1c3QsIGVsZWdhbnQgc3ludGF4IGhpZ2hsaWdodGluZ1xuICogTUlUIGxpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHAvXG4gKiBAYXV0aG9yIExlYSBWZXJvdSBodHRwOi8vbGVhLnZlcm91Lm1lXG4gKi9cblxudmFyIFByaXNtID0gKGZ1bmN0aW9uKCl7XG5cbi8vIFByaXZhdGUgaGVscGVyIHZhcnNcbnZhciBsYW5nID0gL1xcYmxhbmcoPzp1YWdlKT8tKFxcdyspXFxiL2k7XG52YXIgdW5pcXVlSWQgPSAwO1xuXG52YXIgXyA9IF9zZWxmLlByaXNtID0ge1xuXHR1dGlsOiB7XG5cdFx0ZW5jb2RlOiBmdW5jdGlvbiAodG9rZW5zKSB7XG5cdFx0XHRpZiAodG9rZW5zIGluc3RhbmNlb2YgVG9rZW4pIHtcblx0XHRcdFx0cmV0dXJuIG5ldyBUb2tlbih0b2tlbnMudHlwZSwgXy51dGlsLmVuY29kZSh0b2tlbnMuY29udGVudCksIHRva2Vucy5hbGlhcyk7XG5cdFx0XHR9IGVsc2UgaWYgKF8udXRpbC50eXBlKHRva2VucykgPT09ICdBcnJheScpIHtcblx0XHRcdFx0cmV0dXJuIHRva2Vucy5tYXAoXy51dGlsLmVuY29kZSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gdG9rZW5zLnJlcGxhY2UoLyYvZywgJyZhbXA7JykucmVwbGFjZSgvPC9nLCAnJmx0OycpLnJlcGxhY2UoL1xcdTAwYTAvZywgJyAnKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0dHlwZTogZnVuY3Rpb24gKG8pIHtcblx0XHRcdHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykubWF0Y2goL1xcW29iamVjdCAoXFx3KylcXF0vKVsxXTtcblx0XHR9LFxuXG5cdFx0b2JqSWQ6IGZ1bmN0aW9uIChvYmopIHtcblx0XHRcdGlmICghb2JqWydfX2lkJ10pIHtcblx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgJ19faWQnLCB7IHZhbHVlOiArK3VuaXF1ZUlkIH0pO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG9ialsnX19pZCddO1xuXHRcdH0sXG5cblx0XHQvLyBEZWVwIGNsb25lIGEgbGFuZ3VhZ2UgZGVmaW5pdGlvbiAoZS5nLiB0byBleHRlbmQgaXQpXG5cdFx0Y2xvbmU6IGZ1bmN0aW9uIChvKSB7XG5cdFx0XHR2YXIgdHlwZSA9IF8udXRpbC50eXBlKG8pO1xuXG5cdFx0XHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRcdFx0Y2FzZSAnT2JqZWN0Jzpcblx0XHRcdFx0XHR2YXIgY2xvbmUgPSB7fTtcblxuXHRcdFx0XHRcdGZvciAodmFyIGtleSBpbiBvKSB7XG5cdFx0XHRcdFx0XHRpZiAoby5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdFx0XHRcdFx0XHRcdGNsb25lW2tleV0gPSBfLnV0aWwuY2xvbmUob1trZXldKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gY2xvbmU7XG5cblx0XHRcdFx0Y2FzZSAnQXJyYXknOlxuXHRcdFx0XHRcdC8vIENoZWNrIGZvciBleGlzdGVuY2UgZm9yIElFOFxuXHRcdFx0XHRcdHJldHVybiBvLm1hcCAmJiBvLm1hcChmdW5jdGlvbih2KSB7IHJldHVybiBfLnV0aWwuY2xvbmUodik7IH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbztcblx0XHR9XG5cdH0sXG5cblx0bGFuZ3VhZ2VzOiB7XG5cdFx0ZXh0ZW5kOiBmdW5jdGlvbiAoaWQsIHJlZGVmKSB7XG5cdFx0XHR2YXIgbGFuZyA9IF8udXRpbC5jbG9uZShfLmxhbmd1YWdlc1tpZF0pO1xuXG5cdFx0XHRmb3IgKHZhciBrZXkgaW4gcmVkZWYpIHtcblx0XHRcdFx0bGFuZ1trZXldID0gcmVkZWZba2V5XTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGxhbmc7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEluc2VydCBhIHRva2VuIGJlZm9yZSBhbm90aGVyIHRva2VuIGluIGEgbGFuZ3VhZ2UgbGl0ZXJhbFxuXHRcdCAqIEFzIHRoaXMgbmVlZHMgdG8gcmVjcmVhdGUgdGhlIG9iamVjdCAod2UgY2Fubm90IGFjdHVhbGx5IGluc2VydCBiZWZvcmUga2V5cyBpbiBvYmplY3QgbGl0ZXJhbHMpLFxuXHRcdCAqIHdlIGNhbm5vdCBqdXN0IHByb3ZpZGUgYW4gb2JqZWN0LCB3ZSBuZWVkIGFub2JqZWN0IGFuZCBhIGtleS5cblx0XHQgKiBAcGFyYW0gaW5zaWRlIFRoZSBrZXkgKG9yIGxhbmd1YWdlIGlkKSBvZiB0aGUgcGFyZW50XG5cdFx0ICogQHBhcmFtIGJlZm9yZSBUaGUga2V5IHRvIGluc2VydCBiZWZvcmUuIElmIG5vdCBwcm92aWRlZCwgdGhlIGZ1bmN0aW9uIGFwcGVuZHMgaW5zdGVhZC5cblx0XHQgKiBAcGFyYW0gaW5zZXJ0IE9iamVjdCB3aXRoIHRoZSBrZXkvdmFsdWUgcGFpcnMgdG8gaW5zZXJ0XG5cdFx0ICogQHBhcmFtIHJvb3QgVGhlIG9iamVjdCB0aGF0IGNvbnRhaW5zIGBpbnNpZGVgLiBJZiBlcXVhbCB0byBQcmlzbS5sYW5ndWFnZXMsIGl0IGNhbiBiZSBvbWl0dGVkLlxuXHRcdCAqL1xuXHRcdGluc2VydEJlZm9yZTogZnVuY3Rpb24gKGluc2lkZSwgYmVmb3JlLCBpbnNlcnQsIHJvb3QpIHtcblx0XHRcdHJvb3QgPSByb290IHx8IF8ubGFuZ3VhZ2VzO1xuXHRcdFx0dmFyIGdyYW1tYXIgPSByb290W2luc2lkZV07XG5cblx0XHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID09IDIpIHtcblx0XHRcdFx0aW5zZXJ0ID0gYXJndW1lbnRzWzFdO1xuXG5cdFx0XHRcdGZvciAodmFyIG5ld1Rva2VuIGluIGluc2VydCkge1xuXHRcdFx0XHRcdGlmIChpbnNlcnQuaGFzT3duUHJvcGVydHkobmV3VG9rZW4pKSB7XG5cdFx0XHRcdFx0XHRncmFtbWFyW25ld1Rva2VuXSA9IGluc2VydFtuZXdUb2tlbl07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGdyYW1tYXI7XG5cdFx0XHR9XG5cblx0XHRcdHZhciByZXQgPSB7fTtcblxuXHRcdFx0Zm9yICh2YXIgdG9rZW4gaW4gZ3JhbW1hcikge1xuXG5cdFx0XHRcdGlmIChncmFtbWFyLmhhc093blByb3BlcnR5KHRva2VuKSkge1xuXG5cdFx0XHRcdFx0aWYgKHRva2VuID09IGJlZm9yZSkge1xuXG5cdFx0XHRcdFx0XHRmb3IgKHZhciBuZXdUb2tlbiBpbiBpbnNlcnQpIHtcblxuXHRcdFx0XHRcdFx0XHRpZiAoaW5zZXJ0Lmhhc093blByb3BlcnR5KG5ld1Rva2VuKSkge1xuXHRcdFx0XHRcdFx0XHRcdHJldFtuZXdUb2tlbl0gPSBpbnNlcnRbbmV3VG9rZW5dO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0W3Rva2VuXSA9IGdyYW1tYXJbdG9rZW5dO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFVwZGF0ZSByZWZlcmVuY2VzIGluIG90aGVyIGxhbmd1YWdlIGRlZmluaXRpb25zXG5cdFx0XHRfLmxhbmd1YWdlcy5ERlMoXy5sYW5ndWFnZXMsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcblx0XHRcdFx0aWYgKHZhbHVlID09PSByb290W2luc2lkZV0gJiYga2V5ICE9IGluc2lkZSkge1xuXHRcdFx0XHRcdHRoaXNba2V5XSA9IHJldDtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiByb290W2luc2lkZV0gPSByZXQ7XG5cdFx0fSxcblxuXHRcdC8vIFRyYXZlcnNlIGEgbGFuZ3VhZ2UgZGVmaW5pdGlvbiB3aXRoIERlcHRoIEZpcnN0IFNlYXJjaFxuXHRcdERGUzogZnVuY3Rpb24obywgY2FsbGJhY2ssIHR5cGUsIHZpc2l0ZWQpIHtcblx0XHRcdHZpc2l0ZWQgPSB2aXNpdGVkIHx8IHt9O1xuXHRcdFx0Zm9yICh2YXIgaSBpbiBvKSB7XG5cdFx0XHRcdGlmIChvLmhhc093blByb3BlcnR5KGkpKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2suY2FsbChvLCBpLCBvW2ldLCB0eXBlIHx8IGkpO1xuXG5cdFx0XHRcdFx0aWYgKF8udXRpbC50eXBlKG9baV0pID09PSAnT2JqZWN0JyAmJiAhdmlzaXRlZFtfLnV0aWwub2JqSWQob1tpXSldKSB7XG5cdFx0XHRcdFx0XHR2aXNpdGVkW18udXRpbC5vYmpJZChvW2ldKV0gPSB0cnVlO1xuXHRcdFx0XHRcdFx0Xy5sYW5ndWFnZXMuREZTKG9baV0sIGNhbGxiYWNrLCBudWxsLCB2aXNpdGVkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSBpZiAoXy51dGlsLnR5cGUob1tpXSkgPT09ICdBcnJheScgJiYgIXZpc2l0ZWRbXy51dGlsLm9iaklkKG9baV0pXSkge1xuXHRcdFx0XHRcdFx0dmlzaXRlZFtfLnV0aWwub2JqSWQob1tpXSldID0gdHJ1ZTtcblx0XHRcdFx0XHRcdF8ubGFuZ3VhZ2VzLkRGUyhvW2ldLCBjYWxsYmFjaywgaSwgdmlzaXRlZCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXHRwbHVnaW5zOiB7fSxcblxuXHRoaWdobGlnaHRBbGw6IGZ1bmN0aW9uKGFzeW5jLCBjYWxsYmFjaykge1xuXHRcdHZhciBlbnYgPSB7XG5cdFx0XHRjYWxsYmFjazogY2FsbGJhY2ssXG5cdFx0XHRzZWxlY3RvcjogJ2NvZGVbY2xhc3MqPVwibGFuZ3VhZ2UtXCJdLCBbY2xhc3MqPVwibGFuZ3VhZ2UtXCJdIGNvZGUsIGNvZGVbY2xhc3MqPVwibGFuZy1cIl0sIFtjbGFzcyo9XCJsYW5nLVwiXSBjb2RlJ1xuXHRcdH07XG5cblx0XHRfLmhvb2tzLnJ1bihcImJlZm9yZS1oaWdobGlnaHRhbGxcIiwgZW52KTtcblxuXHRcdHZhciBlbGVtZW50cyA9IGVudi5lbGVtZW50cyB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVudi5zZWxlY3Rvcik7XG5cblx0XHRmb3IgKHZhciBpPTAsIGVsZW1lbnQ7IGVsZW1lbnQgPSBlbGVtZW50c1tpKytdOykge1xuXHRcdFx0Xy5oaWdobGlnaHRFbGVtZW50KGVsZW1lbnQsIGFzeW5jID09PSB0cnVlLCBlbnYuY2FsbGJhY2spO1xuXHRcdH1cblx0fSxcblxuXHRoaWdobGlnaHRFbGVtZW50OiBmdW5jdGlvbihlbGVtZW50LCBhc3luYywgY2FsbGJhY2spIHtcblx0XHQvLyBGaW5kIGxhbmd1YWdlXG5cdFx0dmFyIGxhbmd1YWdlLCBncmFtbWFyLCBwYXJlbnQgPSBlbGVtZW50O1xuXG5cdFx0d2hpbGUgKHBhcmVudCAmJiAhbGFuZy50ZXN0KHBhcmVudC5jbGFzc05hbWUpKSB7XG5cdFx0XHRwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcblx0XHR9XG5cblx0XHRpZiAocGFyZW50KSB7XG5cdFx0XHRsYW5ndWFnZSA9IChwYXJlbnQuY2xhc3NOYW1lLm1hdGNoKGxhbmcpIHx8IFssJyddKVsxXS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0Z3JhbW1hciA9IF8ubGFuZ3VhZ2VzW2xhbmd1YWdlXTtcblx0XHR9XG5cblx0XHQvLyBTZXQgbGFuZ3VhZ2Ugb24gdGhlIGVsZW1lbnQsIGlmIG5vdCBwcmVzZW50XG5cdFx0ZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKGxhbmcsICcnKS5yZXBsYWNlKC9cXHMrL2csICcgJykgKyAnIGxhbmd1YWdlLScgKyBsYW5ndWFnZTtcblxuXHRcdC8vIFNldCBsYW5ndWFnZSBvbiB0aGUgcGFyZW50LCBmb3Igc3R5bGluZ1xuXHRcdHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcblxuXHRcdGlmICgvcHJlL2kudGVzdChwYXJlbnQubm9kZU5hbWUpKSB7XG5cdFx0XHRwYXJlbnQuY2xhc3NOYW1lID0gcGFyZW50LmNsYXNzTmFtZS5yZXBsYWNlKGxhbmcsICcnKS5yZXBsYWNlKC9cXHMrL2csICcgJykgKyAnIGxhbmd1YWdlLScgKyBsYW5ndWFnZTtcblx0XHR9XG5cblx0XHR2YXIgY29kZSA9IGVsZW1lbnQudGV4dENvbnRlbnQ7XG5cblx0XHR2YXIgZW52ID0ge1xuXHRcdFx0ZWxlbWVudDogZWxlbWVudCxcblx0XHRcdGxhbmd1YWdlOiBsYW5ndWFnZSxcblx0XHRcdGdyYW1tYXI6IGdyYW1tYXIsXG5cdFx0XHRjb2RlOiBjb2RlXG5cdFx0fTtcblxuXHRcdF8uaG9va3MucnVuKCdiZWZvcmUtc2FuaXR5LWNoZWNrJywgZW52KTtcblxuXHRcdGlmICghZW52LmNvZGUgfHwgIWVudi5ncmFtbWFyKSB7XG5cdFx0XHRfLmhvb2tzLnJ1bignY29tcGxldGUnLCBlbnYpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdF8uaG9va3MucnVuKCdiZWZvcmUtaGlnaGxpZ2h0JywgZW52KTtcblxuXHRcdGlmIChhc3luYyAmJiBfc2VsZi5Xb3JrZXIpIHtcblx0XHRcdHZhciB3b3JrZXIgPSBuZXcgV29ya2VyKF8uZmlsZW5hbWUpO1xuXG5cdFx0XHR3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24oZXZ0KSB7XG5cdFx0XHRcdGVudi5oaWdobGlnaHRlZENvZGUgPSBldnQuZGF0YTtcblxuXHRcdFx0XHRfLmhvb2tzLnJ1bignYmVmb3JlLWluc2VydCcsIGVudik7XG5cblx0XHRcdFx0ZW52LmVsZW1lbnQuaW5uZXJIVE1MID0gZW52LmhpZ2hsaWdodGVkQ29kZTtcblxuXHRcdFx0XHRjYWxsYmFjayAmJiBjYWxsYmFjay5jYWxsKGVudi5lbGVtZW50KTtcblx0XHRcdFx0Xy5ob29rcy5ydW4oJ2FmdGVyLWhpZ2hsaWdodCcsIGVudik7XG5cdFx0XHRcdF8uaG9va3MucnVuKCdjb21wbGV0ZScsIGVudik7XG5cdFx0XHR9O1xuXG5cdFx0XHR3b3JrZXIucG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0XHRsYW5ndWFnZTogZW52Lmxhbmd1YWdlLFxuXHRcdFx0XHRjb2RlOiBlbnYuY29kZSxcblx0XHRcdFx0aW1tZWRpYXRlQ2xvc2U6IHRydWVcblx0XHRcdH0pKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRlbnYuaGlnaGxpZ2h0ZWRDb2RlID0gXy5oaWdobGlnaHQoZW52LmNvZGUsIGVudi5ncmFtbWFyLCBlbnYubGFuZ3VhZ2UpO1xuXG5cdFx0XHRfLmhvb2tzLnJ1bignYmVmb3JlLWluc2VydCcsIGVudik7XG5cblx0XHRcdGVudi5lbGVtZW50LmlubmVySFRNTCA9IGVudi5oaWdobGlnaHRlZENvZGU7XG5cblx0XHRcdGNhbGxiYWNrICYmIGNhbGxiYWNrLmNhbGwoZWxlbWVudCk7XG5cblx0XHRcdF8uaG9va3MucnVuKCdhZnRlci1oaWdobGlnaHQnLCBlbnYpO1xuXHRcdFx0Xy5ob29rcy5ydW4oJ2NvbXBsZXRlJywgZW52KTtcblx0XHR9XG5cdH0sXG5cblx0aGlnaGxpZ2h0OiBmdW5jdGlvbiAodGV4dCwgZ3JhbW1hciwgbGFuZ3VhZ2UpIHtcblx0XHR2YXIgdG9rZW5zID0gXy50b2tlbml6ZSh0ZXh0LCBncmFtbWFyKTtcblx0XHRyZXR1cm4gVG9rZW4uc3RyaW5naWZ5KF8udXRpbC5lbmNvZGUodG9rZW5zKSwgbGFuZ3VhZ2UpO1xuXHR9LFxuXG5cdHRva2VuaXplOiBmdW5jdGlvbih0ZXh0LCBncmFtbWFyLCBsYW5ndWFnZSkge1xuXHRcdHZhciBUb2tlbiA9IF8uVG9rZW47XG5cblx0XHR2YXIgc3RyYXJyID0gW3RleHRdO1xuXG5cdFx0dmFyIHJlc3QgPSBncmFtbWFyLnJlc3Q7XG5cblx0XHRpZiAocmVzdCkge1xuXHRcdFx0Zm9yICh2YXIgdG9rZW4gaW4gcmVzdCkge1xuXHRcdFx0XHRncmFtbWFyW3Rva2VuXSA9IHJlc3RbdG9rZW5dO1xuXHRcdFx0fVxuXG5cdFx0XHRkZWxldGUgZ3JhbW1hci5yZXN0O1xuXHRcdH1cblxuXHRcdHRva2VubG9vcDogZm9yICh2YXIgdG9rZW4gaW4gZ3JhbW1hcikge1xuXHRcdFx0aWYoIWdyYW1tYXIuaGFzT3duUHJvcGVydHkodG9rZW4pIHx8ICFncmFtbWFyW3Rva2VuXSkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIHBhdHRlcm5zID0gZ3JhbW1hclt0b2tlbl07XG5cdFx0XHRwYXR0ZXJucyA9IChfLnV0aWwudHlwZShwYXR0ZXJucykgPT09IFwiQXJyYXlcIikgPyBwYXR0ZXJucyA6IFtwYXR0ZXJuc107XG5cblx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgcGF0dGVybnMubGVuZ3RoOyArK2opIHtcblx0XHRcdFx0dmFyIHBhdHRlcm4gPSBwYXR0ZXJuc1tqXSxcblx0XHRcdFx0XHRpbnNpZGUgPSBwYXR0ZXJuLmluc2lkZSxcblx0XHRcdFx0XHRsb29rYmVoaW5kID0gISFwYXR0ZXJuLmxvb2tiZWhpbmQsXG5cdFx0XHRcdFx0Z3JlZWR5ID0gISFwYXR0ZXJuLmdyZWVkeSxcblx0XHRcdFx0XHRsb29rYmVoaW5kTGVuZ3RoID0gMCxcblx0XHRcdFx0XHRhbGlhcyA9IHBhdHRlcm4uYWxpYXM7XG5cblx0XHRcdFx0cGF0dGVybiA9IHBhdHRlcm4ucGF0dGVybiB8fCBwYXR0ZXJuO1xuXG5cdFx0XHRcdGZvciAodmFyIGk9MDsgaTxzdHJhcnIubGVuZ3RoOyBpKyspIHsgLy8gRG9u4oCZdCBjYWNoZSBsZW5ndGggYXMgaXQgY2hhbmdlcyBkdXJpbmcgdGhlIGxvb3BcblxuXHRcdFx0XHRcdHZhciBzdHIgPSBzdHJhcnJbaV07XG5cblx0XHRcdFx0XHRpZiAoc3RyYXJyLmxlbmd0aCA+IHRleHQubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHQvLyBTb21ldGhpbmcgd2VudCB0ZXJyaWJseSB3cm9uZywgQUJPUlQsIEFCT1JUIVxuXHRcdFx0XHRcdFx0YnJlYWsgdG9rZW5sb29wO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChzdHIgaW5zdGFuY2VvZiBUb2tlbikge1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cGF0dGVybi5sYXN0SW5kZXggPSAwO1xuXG5cdFx0XHRcdFx0dmFyIG1hdGNoID0gcGF0dGVybi5leGVjKHN0ciksXG5cdFx0XHRcdFx0ICAgIGRlbE51bSA9IDE7XG5cblx0XHRcdFx0XHQvLyBHcmVlZHkgcGF0dGVybnMgY2FuIG92ZXJyaWRlL3JlbW92ZSB1cCB0byB0d28gcHJldmlvdXNseSBtYXRjaGVkIHRva2Vuc1xuXHRcdFx0XHRcdGlmICghbWF0Y2ggJiYgZ3JlZWR5ICYmIGkgIT0gc3RyYXJyLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0XHRcdC8vIFJlY29uc3RydWN0IHRoZSBvcmlnaW5hbCB0ZXh0IHVzaW5nIHRoZSBuZXh0IHR3byB0b2tlbnNcblx0XHRcdFx0XHRcdHZhciBuZXh0VG9rZW4gPSBzdHJhcnJbaSArIDFdLm1hdGNoZWRTdHIgfHwgc3RyYXJyW2kgKyAxXSxcblx0XHRcdFx0XHRcdCAgICBjb21iU3RyID0gc3RyICsgbmV4dFRva2VuO1xuXG5cdFx0XHRcdFx0XHRpZiAoaSA8IHN0cmFyci5sZW5ndGggLSAyKSB7XG5cdFx0XHRcdFx0XHRcdGNvbWJTdHIgKz0gc3RyYXJyW2kgKyAyXS5tYXRjaGVkU3RyIHx8IHN0cmFycltpICsgMl07XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIFRyeSB0aGUgcGF0dGVybiBhZ2FpbiBvbiB0aGUgcmVjb25zdHJ1Y3RlZCB0ZXh0XG5cdFx0XHRcdFx0XHRwYXR0ZXJuLmxhc3RJbmRleCA9IDA7XG5cdFx0XHRcdFx0XHRtYXRjaCA9IHBhdHRlcm4uZXhlYyhjb21iU3RyKTtcblx0XHRcdFx0XHRcdGlmICghbWF0Y2gpIHtcblx0XHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHZhciBmcm9tID0gbWF0Y2guaW5kZXggKyAobG9va2JlaGluZCA/IG1hdGNoWzFdLmxlbmd0aCA6IDApO1xuXHRcdFx0XHRcdFx0Ly8gVG8gYmUgYSB2YWxpZCBjYW5kaWRhdGUsIHRoZSBuZXcgbWF0Y2ggaGFzIHRvIHN0YXJ0IGluc2lkZSBvZiBzdHJcblx0XHRcdFx0XHRcdGlmIChmcm9tID49IHN0ci5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR2YXIgdG8gPSBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCxcblx0XHRcdFx0XHRcdCAgICBsZW4gPSBzdHIubGVuZ3RoICsgbmV4dFRva2VuLmxlbmd0aDtcblxuXHRcdFx0XHRcdFx0Ly8gTnVtYmVyIG9mIHRva2VucyB0byBkZWxldGUgYW5kIHJlcGxhY2Ugd2l0aCB0aGUgbmV3IG1hdGNoXG5cdFx0XHRcdFx0XHRkZWxOdW0gPSAzO1xuXG5cdFx0XHRcdFx0XHRpZiAodG8gPD0gbGVuKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChzdHJhcnJbaSArIDFdLmdyZWVkeSkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGRlbE51bSA9IDI7XG5cdFx0XHRcdFx0XHRcdGNvbWJTdHIgPSBjb21iU3RyLnNsaWNlKDAsIGxlbik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRzdHIgPSBjb21iU3RyO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICghbWF0Y2gpIHtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmKGxvb2tiZWhpbmQpIHtcblx0XHRcdFx0XHRcdGxvb2tiZWhpbmRMZW5ndGggPSBtYXRjaFsxXS5sZW5ndGg7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dmFyIGZyb20gPSBtYXRjaC5pbmRleCArIGxvb2tiZWhpbmRMZW5ndGgsXG5cdFx0XHRcdFx0ICAgIG1hdGNoID0gbWF0Y2hbMF0uc2xpY2UobG9va2JlaGluZExlbmd0aCksXG5cdFx0XHRcdFx0ICAgIHRvID0gZnJvbSArIG1hdGNoLmxlbmd0aCxcblx0XHRcdFx0XHQgICAgYmVmb3JlID0gc3RyLnNsaWNlKDAsIGZyb20pLFxuXHRcdFx0XHRcdCAgICBhZnRlciA9IHN0ci5zbGljZSh0byk7XG5cblx0XHRcdFx0XHR2YXIgYXJncyA9IFtpLCBkZWxOdW1dO1xuXG5cdFx0XHRcdFx0aWYgKGJlZm9yZSkge1xuXHRcdFx0XHRcdFx0YXJncy5wdXNoKGJlZm9yZSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dmFyIHdyYXBwZWQgPSBuZXcgVG9rZW4odG9rZW4sIGluc2lkZT8gXy50b2tlbml6ZShtYXRjaCwgaW5zaWRlKSA6IG1hdGNoLCBhbGlhcywgbWF0Y2gsIGdyZWVkeSk7XG5cblx0XHRcdFx0XHRhcmdzLnB1c2god3JhcHBlZCk7XG5cblx0XHRcdFx0XHRpZiAoYWZ0ZXIpIHtcblx0XHRcdFx0XHRcdGFyZ3MucHVzaChhZnRlcik7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0QXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShzdHJhcnIsIGFyZ3MpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHN0cmFycjtcblx0fSxcblxuXHRob29rczoge1xuXHRcdGFsbDoge30sXG5cblx0XHRhZGQ6IGZ1bmN0aW9uIChuYW1lLCBjYWxsYmFjaykge1xuXHRcdFx0dmFyIGhvb2tzID0gXy5ob29rcy5hbGw7XG5cblx0XHRcdGhvb2tzW25hbWVdID0gaG9va3NbbmFtZV0gfHwgW107XG5cblx0XHRcdGhvb2tzW25hbWVdLnB1c2goY2FsbGJhY2spO1xuXHRcdH0sXG5cblx0XHRydW46IGZ1bmN0aW9uIChuYW1lLCBlbnYpIHtcblx0XHRcdHZhciBjYWxsYmFja3MgPSBfLmhvb2tzLmFsbFtuYW1lXTtcblxuXHRcdFx0aWYgKCFjYWxsYmFja3MgfHwgIWNhbGxiYWNrcy5sZW5ndGgpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3IgKHZhciBpPTAsIGNhbGxiYWNrOyBjYWxsYmFjayA9IGNhbGxiYWNrc1tpKytdOykge1xuXHRcdFx0XHRjYWxsYmFjayhlbnYpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxudmFyIFRva2VuID0gXy5Ub2tlbiA9IGZ1bmN0aW9uKHR5cGUsIGNvbnRlbnQsIGFsaWFzLCBtYXRjaGVkU3RyLCBncmVlZHkpIHtcblx0dGhpcy50eXBlID0gdHlwZTtcblx0dGhpcy5jb250ZW50ID0gY29udGVudDtcblx0dGhpcy5hbGlhcyA9IGFsaWFzO1xuXHQvLyBDb3B5IG9mIHRoZSBmdWxsIHN0cmluZyB0aGlzIHRva2VuIHdhcyBjcmVhdGVkIGZyb21cblx0dGhpcy5tYXRjaGVkU3RyID0gbWF0Y2hlZFN0ciB8fCBudWxsO1xuXHR0aGlzLmdyZWVkeSA9ICEhZ3JlZWR5O1xufTtcblxuVG9rZW4uc3RyaW5naWZ5ID0gZnVuY3Rpb24obywgbGFuZ3VhZ2UsIHBhcmVudCkge1xuXHRpZiAodHlwZW9mIG8gPT0gJ3N0cmluZycpIHtcblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdGlmIChfLnV0aWwudHlwZShvKSA9PT0gJ0FycmF5Jykge1xuXHRcdHJldHVybiBvLm1hcChmdW5jdGlvbihlbGVtZW50KSB7XG5cdFx0XHRyZXR1cm4gVG9rZW4uc3RyaW5naWZ5KGVsZW1lbnQsIGxhbmd1YWdlLCBvKTtcblx0XHR9KS5qb2luKCcnKTtcblx0fVxuXG5cdHZhciBlbnYgPSB7XG5cdFx0dHlwZTogby50eXBlLFxuXHRcdGNvbnRlbnQ6IFRva2VuLnN0cmluZ2lmeShvLmNvbnRlbnQsIGxhbmd1YWdlLCBwYXJlbnQpLFxuXHRcdHRhZzogJ3NwYW4nLFxuXHRcdGNsYXNzZXM6IFsndG9rZW4nLCBvLnR5cGVdLFxuXHRcdGF0dHJpYnV0ZXM6IHt9LFxuXHRcdGxhbmd1YWdlOiBsYW5ndWFnZSxcblx0XHRwYXJlbnQ6IHBhcmVudFxuXHR9O1xuXG5cdGlmIChlbnYudHlwZSA9PSAnY29tbWVudCcpIHtcblx0XHRlbnYuYXR0cmlidXRlc1snc3BlbGxjaGVjayddID0gJ3RydWUnO1xuXHR9XG5cblx0aWYgKG8uYWxpYXMpIHtcblx0XHR2YXIgYWxpYXNlcyA9IF8udXRpbC50eXBlKG8uYWxpYXMpID09PSAnQXJyYXknID8gby5hbGlhcyA6IFtvLmFsaWFzXTtcblx0XHRBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShlbnYuY2xhc3NlcywgYWxpYXNlcyk7XG5cdH1cblxuXHRfLmhvb2tzLnJ1bignd3JhcCcsIGVudik7XG5cblx0dmFyIGF0dHJpYnV0ZXMgPSAnJztcblxuXHRmb3IgKHZhciBuYW1lIGluIGVudi5hdHRyaWJ1dGVzKSB7XG5cdFx0YXR0cmlidXRlcyArPSAoYXR0cmlidXRlcyA/ICcgJyA6ICcnKSArIG5hbWUgKyAnPVwiJyArIChlbnYuYXR0cmlidXRlc1tuYW1lXSB8fCAnJykgKyAnXCInO1xuXHR9XG5cblx0cmV0dXJuICc8JyArIGVudi50YWcgKyAnIGNsYXNzPVwiJyArIGVudi5jbGFzc2VzLmpvaW4oJyAnKSArICdcIiAnICsgYXR0cmlidXRlcyArICc+JyArIGVudi5jb250ZW50ICsgJzwvJyArIGVudi50YWcgKyAnPic7XG5cbn07XG5cbmlmICghX3NlbGYuZG9jdW1lbnQpIHtcblx0aWYgKCFfc2VsZi5hZGRFdmVudExpc3RlbmVyKSB7XG5cdFx0Ly8gaW4gTm9kZS5qc1xuXHRcdHJldHVybiBfc2VsZi5QcmlzbTtcblx0fVxuIFx0Ly8gSW4gd29ya2VyXG5cdF9zZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihldnQpIHtcblx0XHR2YXIgbWVzc2FnZSA9IEpTT04ucGFyc2UoZXZ0LmRhdGEpLFxuXHRcdCAgICBsYW5nID0gbWVzc2FnZS5sYW5ndWFnZSxcblx0XHQgICAgY29kZSA9IG1lc3NhZ2UuY29kZSxcblx0XHQgICAgaW1tZWRpYXRlQ2xvc2UgPSBtZXNzYWdlLmltbWVkaWF0ZUNsb3NlO1xuXG5cdFx0X3NlbGYucG9zdE1lc3NhZ2UoXy5oaWdobGlnaHQoY29kZSwgXy5sYW5ndWFnZXNbbGFuZ10sIGxhbmcpKTtcblx0XHRpZiAoaW1tZWRpYXRlQ2xvc2UpIHtcblx0XHRcdF9zZWxmLmNsb3NlKCk7XG5cdFx0fVxuXHR9LCBmYWxzZSk7XG5cblx0cmV0dXJuIF9zZWxmLlByaXNtO1xufVxuXG4vL0dldCBjdXJyZW50IHNjcmlwdCBhbmQgaGlnaGxpZ2h0XG52YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdCB8fCBbXS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpKS5wb3AoKTtcblxuaWYgKHNjcmlwdCkge1xuXHRfLmZpbGVuYW1lID0gc2NyaXB0LnNyYztcblxuXHRpZiAoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAmJiAhc2NyaXB0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1tYW51YWwnKSkge1xuXHRcdGlmKGRvY3VtZW50LnJlYWR5U3RhdGUgIT09IFwibG9hZGluZ1wiKSB7XG5cdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoXy5oaWdobGlnaHRBbGwsIDApO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBfLmhpZ2hsaWdodEFsbCk7XG5cdFx0fVxuXHR9XG59XG5cbnJldHVybiBfc2VsZi5QcmlzbTtcblxufSkoKTtcblxuaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdG1vZHVsZS5leHBvcnRzID0gUHJpc207XG59XG5cbi8vIGhhY2sgZm9yIGNvbXBvbmVudHMgdG8gd29yayBjb3JyZWN0bHkgaW4gbm9kZS5qc1xuaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG5cdGdsb2JhbC5QcmlzbSA9IFByaXNtO1xufVxuXG5cbi8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgQmVnaW4gcHJpc20tbWFya3VwLmpzXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cblByaXNtLmxhbmd1YWdlcy5tYXJrdXAgPSB7XG5cdCdjb21tZW50JzogLzwhLS1bXFx3XFxXXSo/LS0+Lyxcblx0J3Byb2xvZyc6IC88XFw/W1xcd1xcV10rP1xcPz4vLFxuXHQnZG9jdHlwZSc6IC88IURPQ1RZUEVbXFx3XFxXXSs/Pi8sXG5cdCdjZGF0YSc6IC88IVxcW0NEQVRBXFxbW1xcd1xcV10qP11dPi9pLFxuXHQndGFnJzoge1xuXHRcdHBhdHRlcm46IC88XFwvPyg/IVxcZClbXlxccz5cXC89LiQ8XSsoPzpcXHMrW15cXHM+XFwvPV0rKD86PSg/OihcInwnKSg/OlxcXFxcXDF8XFxcXD8oPyFcXDEpW1xcd1xcV10pKlxcMXxbXlxccydcIj49XSspKT8pKlxccypcXC8/Pi9pLFxuXHRcdGluc2lkZToge1xuXHRcdFx0J3RhZyc6IHtcblx0XHRcdFx0cGF0dGVybjogL148XFwvP1teXFxzPlxcL10rL2ksXG5cdFx0XHRcdGluc2lkZToge1xuXHRcdFx0XHRcdCdwdW5jdHVhdGlvbic6IC9ePFxcLz8vLFxuXHRcdFx0XHRcdCduYW1lc3BhY2UnOiAvXlteXFxzPlxcLzpdKzovXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHQnYXR0ci12YWx1ZSc6IHtcblx0XHRcdFx0cGF0dGVybjogLz0oPzooJ3xcIilbXFx3XFxXXSo/KFxcMSl8W15cXHM+XSspL2ksXG5cdFx0XHRcdGluc2lkZToge1xuXHRcdFx0XHRcdCdwdW5jdHVhdGlvbic6IC9bPT5cIiddL1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0J3B1bmN0dWF0aW9uJzogL1xcLz8+Lyxcblx0XHRcdCdhdHRyLW5hbWUnOiB7XG5cdFx0XHRcdHBhdHRlcm46IC9bXlxccz5cXC9dKy8sXG5cdFx0XHRcdGluc2lkZToge1xuXHRcdFx0XHRcdCduYW1lc3BhY2UnOiAvXlteXFxzPlxcLzpdKzovXG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdH1cblx0fSxcblx0J2VudGl0eSc6IC8mIz9bXFxkYS16XXsxLDh9Oy9pXG59O1xuXG4vLyBQbHVnaW4gdG8gbWFrZSBlbnRpdHkgdGl0bGUgc2hvdyB0aGUgcmVhbCBlbnRpdHksIGlkZWEgYnkgUm9tYW4gS29tYXJvdlxuUHJpc20uaG9va3MuYWRkKCd3cmFwJywgZnVuY3Rpb24oZW52KSB7XG5cblx0aWYgKGVudi50eXBlID09PSAnZW50aXR5Jykge1xuXHRcdGVudi5hdHRyaWJ1dGVzWyd0aXRsZSddID0gZW52LmNvbnRlbnQucmVwbGFjZSgvJmFtcDsvLCAnJicpO1xuXHR9XG59KTtcblxuUHJpc20ubGFuZ3VhZ2VzLnhtbCA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5QcmlzbS5sYW5ndWFnZXMuaHRtbCA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5QcmlzbS5sYW5ndWFnZXMubWF0aG1sID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblByaXNtLmxhbmd1YWdlcy5zdmcgPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwO1xuXG5cbi8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgQmVnaW4gcHJpc20tY3NzLmpzXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cblByaXNtLmxhbmd1YWdlcy5jc3MgPSB7XG5cdCdjb21tZW50JzogL1xcL1xcKltcXHdcXFddKj9cXCpcXC8vLFxuXHQnYXRydWxlJzoge1xuXHRcdHBhdHRlcm46IC9AW1xcdy1dKz8uKj8oO3woPz1cXHMqXFx7KSkvaSxcblx0XHRpbnNpZGU6IHtcblx0XHRcdCdydWxlJzogL0BbXFx3LV0rL1xuXHRcdFx0Ly8gU2VlIHJlc3QgYmVsb3dcblx0XHR9XG5cdH0sXG5cdCd1cmwnOiAvdXJsXFwoKD86KFtcIiddKShcXFxcKD86XFxyXFxufFtcXHdcXFddKXwoPyFcXDEpW15cXFxcXFxyXFxuXSkqXFwxfC4qPylcXCkvaSxcblx0J3NlbGVjdG9yJzogL1teXFx7XFx9XFxzXVteXFx7XFx9O10qPyg/PVxccypcXHspLyxcblx0J3N0cmluZyc6IC8oXCJ8JykoXFxcXCg/OlxcclxcbnxbXFx3XFxXXSl8KD8hXFwxKVteXFxcXFxcclxcbl0pKlxcMS8sXG5cdCdwcm9wZXJ0eSc6IC8oXFxifFxcQilbXFx3LV0rKD89XFxzKjopL2ksXG5cdCdpbXBvcnRhbnQnOiAvXFxCIWltcG9ydGFudFxcYi9pLFxuXHQnZnVuY3Rpb24nOiAvWy1hLXowLTldKyg/PVxcKCkvaSxcblx0J3B1bmN0dWF0aW9uJzogL1soKXt9OzpdL1xufTtcblxuUHJpc20ubGFuZ3VhZ2VzLmNzc1snYXRydWxlJ10uaW5zaWRlLnJlc3QgPSBQcmlzbS51dGlsLmNsb25lKFByaXNtLmxhbmd1YWdlcy5jc3MpO1xuXG5pZiAoUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cCkge1xuXHRQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdtYXJrdXAnLCAndGFnJywge1xuXHRcdCdzdHlsZSc6IHtcblx0XHRcdHBhdHRlcm46IC8oPHN0eWxlW1xcd1xcV10qPz4pW1xcd1xcV10qPyg/PTxcXC9zdHlsZT4pL2ksXG5cdFx0XHRsb29rYmVoaW5kOiB0cnVlLFxuXHRcdFx0aW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuY3NzLFxuXHRcdFx0YWxpYXM6ICdsYW5ndWFnZS1jc3MnXG5cdFx0fVxuXHR9KTtcblx0XG5cdFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2luc2lkZScsICdhdHRyLXZhbHVlJywge1xuXHRcdCdzdHlsZS1hdHRyJzoge1xuXHRcdFx0cGF0dGVybjogL1xccypzdHlsZT0oXCJ8JykuKj9cXDEvaSxcblx0XHRcdGluc2lkZToge1xuXHRcdFx0XHQnYXR0ci1uYW1lJzoge1xuXHRcdFx0XHRcdHBhdHRlcm46IC9eXFxzKnN0eWxlL2ksXG5cdFx0XHRcdFx0aW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMubWFya3VwLnRhZy5pbnNpZGVcblx0XHRcdFx0fSxcblx0XHRcdFx0J3B1bmN0dWF0aW9uJzogL15cXHMqPVxccypbJ1wiXXxbJ1wiXVxccyokLyxcblx0XHRcdFx0J2F0dHItdmFsdWUnOiB7XG5cdFx0XHRcdFx0cGF0dGVybjogLy4rL2ksXG5cdFx0XHRcdFx0aW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuY3NzXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRhbGlhczogJ2xhbmd1YWdlLWNzcydcblx0XHR9XG5cdH0sIFByaXNtLmxhbmd1YWdlcy5tYXJrdXAudGFnKTtcbn1cblxuLyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICBCZWdpbiBwcmlzbS1jbGlrZS5qc1xuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG5QcmlzbS5sYW5ndWFnZXMuY2xpa2UgPSB7XG5cdCdjb21tZW50JzogW1xuXHRcdHtcblx0XHRcdHBhdHRlcm46IC8oXnxbXlxcXFxdKVxcL1xcKltcXHdcXFddKj9cXCpcXC8vLFxuXHRcdFx0bG9va2JlaGluZDogdHJ1ZVxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0cGF0dGVybjogLyhefFteXFxcXDpdKVxcL1xcLy4qLyxcblx0XHRcdGxvb2tiZWhpbmQ6IHRydWVcblx0XHR9XG5cdF0sXG5cdCdzdHJpbmcnOiB7XG5cdFx0cGF0dGVybjogLyhbXCInXSkoXFxcXCg/OlxcclxcbnxbXFxzXFxTXSl8KD8hXFwxKVteXFxcXFxcclxcbl0pKlxcMS8sXG5cdFx0Z3JlZWR5OiB0cnVlXG5cdH0sXG5cdCdjbGFzcy1uYW1lJzoge1xuXHRcdHBhdHRlcm46IC8oKD86XFxiKD86Y2xhc3N8aW50ZXJmYWNlfGV4dGVuZHN8aW1wbGVtZW50c3x0cmFpdHxpbnN0YW5jZW9mfG5ldylcXHMrKXwoPzpjYXRjaFxccytcXCgpKVthLXowLTlfXFwuXFxcXF0rL2ksXG5cdFx0bG9va2JlaGluZDogdHJ1ZSxcblx0XHRpbnNpZGU6IHtcblx0XHRcdHB1bmN0dWF0aW9uOiAvKFxcLnxcXFxcKS9cblx0XHR9XG5cdH0sXG5cdCdrZXl3b3JkJzogL1xcYihpZnxlbHNlfHdoaWxlfGRvfGZvcnxyZXR1cm58aW58aW5zdGFuY2VvZnxmdW5jdGlvbnxuZXd8dHJ5fHRocm93fGNhdGNofGZpbmFsbHl8bnVsbHxicmVha3xjb250aW51ZSlcXGIvLFxuXHQnYm9vbGVhbic6IC9cXGIodHJ1ZXxmYWxzZSlcXGIvLFxuXHQnZnVuY3Rpb24nOiAvW2EtejAtOV9dKyg/PVxcKCkvaSxcblx0J251bWJlcic6IC9cXGItPyg/OjB4W1xcZGEtZl0rfFxcZCpcXC4/XFxkKyg/OmVbKy1dP1xcZCspPylcXGIvaSxcblx0J29wZXJhdG9yJzogLy0tP3xcXCtcXCs/fCE9Pz0/fDw9P3w+PT98PT0/PT98JiY/fFxcfFxcfD98XFw/fFxcKnxcXC98fnxcXF58JS8sXG5cdCdwdW5jdHVhdGlvbic6IC9be31bXFxdOygpLC46XS9cbn07XG5cblxuLyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICBCZWdpbiBwcmlzbS1qYXZhc2NyaXB0LmpzXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cblByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0ID0gUHJpc20ubGFuZ3VhZ2VzLmV4dGVuZCgnY2xpa2UnLCB7XG5cdCdrZXl3b3JkJzogL1xcYihhc3xhc3luY3xhd2FpdHxicmVha3xjYXNlfGNhdGNofGNsYXNzfGNvbnN0fGNvbnRpbnVlfGRlYnVnZ2VyfGRlZmF1bHR8ZGVsZXRlfGRvfGVsc2V8ZW51bXxleHBvcnR8ZXh0ZW5kc3xmaW5hbGx5fGZvcnxmcm9tfGZ1bmN0aW9ufGdldHxpZnxpbXBsZW1lbnRzfGltcG9ydHxpbnxpbnN0YW5jZW9mfGludGVyZmFjZXxsZXR8bmV3fG51bGx8b2Z8cGFja2FnZXxwcml2YXRlfHByb3RlY3RlZHxwdWJsaWN8cmV0dXJufHNldHxzdGF0aWN8c3VwZXJ8c3dpdGNofHRoaXN8dGhyb3d8dHJ5fHR5cGVvZnx2YXJ8dm9pZHx3aGlsZXx3aXRofHlpZWxkKVxcYi8sXG5cdCdudW1iZXInOiAvXFxiLT8oMHhbXFxkQS1GYS1mXSt8MGJbMDFdK3wwb1swLTddK3xcXGQqXFwuP1xcZCsoW0VlXVsrLV0/XFxkKyk/fE5hTnxJbmZpbml0eSlcXGIvLFxuXHQvLyBBbGxvdyBmb3IgYWxsIG5vbi1BU0NJSSBjaGFyYWN0ZXJzIChTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjAwODQ0NClcblx0J2Z1bmN0aW9uJzogL1tfJGEtekEtWlxceEEwLVxcdUZGRkZdW18kYS16QS1aMC05XFx4QTAtXFx1RkZGRl0qKD89XFwoKS9pXG59KTtcblxuUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnamF2YXNjcmlwdCcsICdrZXl3b3JkJywge1xuXHQncmVnZXgnOiB7XG5cdFx0cGF0dGVybjogLyhefFteL10pXFwvKD8hXFwvKShcXFsuKz9dfFxcXFwufFteL1xcXFxcXHJcXG5dKStcXC9bZ2lteXVdezAsNX0oPz1cXHMqKCR8W1xcclxcbiwuO30pXSkpLyxcblx0XHRsb29rYmVoaW5kOiB0cnVlLFxuXHRcdGdyZWVkeTogdHJ1ZVxuXHR9XG59KTtcblxuUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnamF2YXNjcmlwdCcsICdzdHJpbmcnLCB7XG5cdCd0ZW1wbGF0ZS1zdHJpbmcnOiB7XG5cdFx0cGF0dGVybjogL2AoPzpcXFxcXFxcXHxcXFxcP1teXFxcXF0pKj9gLyxcblx0XHRncmVlZHk6IHRydWUsXG5cdFx0aW5zaWRlOiB7XG5cdFx0XHQnaW50ZXJwb2xhdGlvbic6IHtcblx0XHRcdFx0cGF0dGVybjogL1xcJFxce1tefV0rXFx9Lyxcblx0XHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdFx0J2ludGVycG9sYXRpb24tcHVuY3R1YXRpb24nOiB7XG5cdFx0XHRcdFx0XHRwYXR0ZXJuOiAvXlxcJFxce3xcXH0kLyxcblx0XHRcdFx0XHRcdGFsaWFzOiAncHVuY3R1YXRpb24nXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRyZXN0OiBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdFxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0J3N0cmluZyc6IC9bXFxzXFxTXSsvXG5cdFx0fVxuXHR9XG59KTtcblxuaWYgKFByaXNtLmxhbmd1YWdlcy5tYXJrdXApIHtcblx0UHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnbWFya3VwJywgJ3RhZycsIHtcblx0XHQnc2NyaXB0Jzoge1xuXHRcdFx0cGF0dGVybjogLyg8c2NyaXB0W1xcd1xcV10qPz4pW1xcd1xcV10qPyg/PTxcXC9zY3JpcHQ+KS9pLFxuXHRcdFx0bG9va2JlaGluZDogdHJ1ZSxcblx0XHRcdGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHQsXG5cdFx0XHRhbGlhczogJ2xhbmd1YWdlLWphdmFzY3JpcHQnXG5cdFx0fVxuXHR9KTtcbn1cblxuUHJpc20ubGFuZ3VhZ2VzLmpzID0gUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHQ7XG5cbi8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgQmVnaW4gcHJpc20tZmlsZS1oaWdobGlnaHQuanNcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0aWYgKHR5cGVvZiBzZWxmID09PSAndW5kZWZpbmVkJyB8fCAhc2VsZi5QcmlzbSB8fCAhc2VsZi5kb2N1bWVudCB8fCAhZG9jdW1lbnQucXVlcnlTZWxlY3Rvcikge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdHNlbGYuUHJpc20uZmlsZUhpZ2hsaWdodCA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIEV4dGVuc2lvbnMgPSB7XG5cdFx0XHQnanMnOiAnamF2YXNjcmlwdCcsXG5cdFx0XHQncHknOiAncHl0aG9uJyxcblx0XHRcdCdyYic6ICdydWJ5Jyxcblx0XHRcdCdwczEnOiAncG93ZXJzaGVsbCcsXG5cdFx0XHQncHNtMSc6ICdwb3dlcnNoZWxsJyxcblx0XHRcdCdzaCc6ICdiYXNoJyxcblx0XHRcdCdiYXQnOiAnYmF0Y2gnLFxuXHRcdFx0J2gnOiAnYycsXG5cdFx0XHQndGV4JzogJ2xhdGV4J1xuXHRcdH07XG5cblx0XHRpZihBcnJheS5wcm90b3R5cGUuZm9yRWFjaCkgeyAvLyBDaGVjayB0byBwcmV2ZW50IGVycm9yIGluIElFOFxuXHRcdFx0QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgncHJlW2RhdGEtc3JjXScpKS5mb3JFYWNoKGZ1bmN0aW9uIChwcmUpIHtcblx0XHRcdFx0dmFyIHNyYyA9IHByZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3JjJyk7XG5cblx0XHRcdFx0dmFyIGxhbmd1YWdlLCBwYXJlbnQgPSBwcmU7XG5cdFx0XHRcdHZhciBsYW5nID0gL1xcYmxhbmcoPzp1YWdlKT8tKD8hXFwqKShcXHcrKVxcYi9pO1xuXHRcdFx0XHR3aGlsZSAocGFyZW50ICYmICFsYW5nLnRlc3QocGFyZW50LmNsYXNzTmFtZSkpIHtcblx0XHRcdFx0XHRwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChwYXJlbnQpIHtcblx0XHRcdFx0XHRsYW5ndWFnZSA9IChwcmUuY2xhc3NOYW1lLm1hdGNoKGxhbmcpIHx8IFssICcnXSlbMV07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIWxhbmd1YWdlKSB7XG5cdFx0XHRcdFx0dmFyIGV4dGVuc2lvbiA9IChzcmMubWF0Y2goL1xcLihcXHcrKSQvKSB8fCBbLCAnJ10pWzFdO1xuXHRcdFx0XHRcdGxhbmd1YWdlID0gRXh0ZW5zaW9uc1tleHRlbnNpb25dIHx8IGV4dGVuc2lvbjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBjb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY29kZScpO1xuXHRcdFx0XHRjb2RlLmNsYXNzTmFtZSA9ICdsYW5ndWFnZS0nICsgbGFuZ3VhZ2U7XG5cblx0XHRcdFx0cHJlLnRleHRDb250ZW50ID0gJyc7XG5cblx0XHRcdFx0Y29kZS50ZXh0Q29udGVudCA9ICdMb2FkaW5n4oCmJztcblxuXHRcdFx0XHRwcmUuYXBwZW5kQ2hpbGQoY29kZSk7XG5cblx0XHRcdFx0dmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG5cdFx0XHRcdHhoci5vcGVuKCdHRVQnLCBzcmMsIHRydWUpO1xuXG5cdFx0XHRcdHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0aWYgKHhoci5yZWFkeVN0YXRlID09IDQpIHtcblxuXHRcdFx0XHRcdFx0aWYgKHhoci5zdGF0dXMgPCA0MDAgJiYgeGhyLnJlc3BvbnNlVGV4dCkge1xuXHRcdFx0XHRcdFx0XHRjb2RlLnRleHRDb250ZW50ID0geGhyLnJlc3BvbnNlVGV4dDtcblxuXHRcdFx0XHRcdFx0XHRQcmlzbS5oaWdobGlnaHRFbGVtZW50KGNvZGUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoeGhyLnN0YXR1cyA+PSA0MDApIHtcblx0XHRcdFx0XHRcdFx0Y29kZS50ZXh0Q29udGVudCA9ICfinJYgRXJyb3IgJyArIHhoci5zdGF0dXMgKyAnIHdoaWxlIGZldGNoaW5nIGZpbGU6ICcgKyB4aHIuc3RhdHVzVGV4dDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjb2RlLnRleHRDb250ZW50ID0gJ+KcliBFcnJvcjogRmlsZSBkb2VzIG5vdCBleGlzdCBvciBpcyBlbXB0eSc7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdHhoci5zZW5kKG51bGwpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdH07XG5cblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHNlbGYuUHJpc20uZmlsZUhpZ2hsaWdodCk7XG5cbn0pKCk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9wcmlzbWpzL3ByaXNtLmpzXG4gKiogbW9kdWxlIGlkID0gMTYxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHRhYmxlIGNsYXNzPXNnX2MtYXBpLXRhYmxlPiA8dHI+IDx0aD4gTmFtZSA8L3RoPiA8dGg+IFR5cGUgPC90aD4gPHRoPiBSZXF1aXJlZCA8L3RoPiA8dGg+IERlZmF1bHQgPC90aD4gPHRoPiBEZXNjcmlwdGlvbiA8L3RoPiA8L3RyPiA8dHIgdi1mb3I9XFxcIml0ZW0gaW4gaXRlbXNcXFwiPiA8dGQ+e3tpdGVtLm5hbWV9fTwvdGQ+IDx0ZD57e2l0ZW0udHlwZX19PC90ZD4gPHRkPnt7aXRlbS5pc1JlcXVpcmVkfX08L3RkPiA8dGQ+e3tpdGVtLmRlZmF1bHR9fTwvdGQ+IDx0ZD57e2l0ZW0uZGVzY319PC90ZD4gPC90cj4gPC90YWJsZT4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9kZXYvc3JjL2NvbXBvbmVudHMvYXBpLXRhYmxlL2FwaS10YWJsZS5odG1sXG4gKiogbW9kdWxlIGlkID0gMTYyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPG5hdiBjbGFzcz1cXFwic2dfYy1uYXYgaHlfdS1oaWRlIGh5X3Utc2hvd0BtZFxcXCIgQGNsaWNrPWhpZGVOYXY+IDxoMiBjbGFzcz1zZ19jLW5hdl9fc2VjdGlvbj5JTlRST0RVQ1RJT048L2gyPiA8dWwgY2xhc3M9aHlfby1saXN0IEBjbGljaz1oaWRlTmF2PiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9nZXQtc3RhcnRlZCcsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gR2V0IFN0YXJ0ZWQgPC9hPiA8L2xpPiA8L3VsPiA8aDIgY2xhc3M9c2dfYy1uYXZfX3NlY3Rpb24+Q09NUE9ORU5UUzwvaDI+IDx1bCBjbGFzcz1oeV9vLWxpc3Q+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL2FsZXJ0JywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBBbGVydCA8L2E+IDwvbGk+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL3NwaW5uZXInLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IFNwaW5uZXIgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9zdGVwLXRyYWNrZXInLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IFN0ZXAgVHJhY2tlciA8L2E+IDwvbGk+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL3RhYnMnLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IFRhYnMgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9vdmVybGF5JywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBPdmVybGF5IDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvbGVnYWwnLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IExlZ2FsIDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvY29sbGFwc2FibGUtcGFuZWwnLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IENvbGxhcHNhYmxlIFBhbmVsIDwvYT4gPC9saT4gPC91bD4gPGgyIGNsYXNzPXNnX2MtbmF2X19zZWN0aW9uPkRJUkVDVElWRVM8L2gyPiA8dWwgY2xhc3M9aHlfby1saXN0PiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9vdmVybGF5LW9wZW5lcicsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gT3ZlcmxheSBPcGVuZXIgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9zZXQtZm9jdXMnLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IFNldCBGb2N1cyA8L2E+IDwvbGk+IDwvdWw+IDwvbmF2PiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL2Rldi9zcmMvY29tcG9uZW50cy9zaWRlLW5hdi9zaWRlLW5hdi5odG1sXG4gKiogbW9kdWxlIGlkID0gMTYzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGhlYWRlciBjbGFzcz1zZ19jLXNpdGUtaGVhZGVyPiA8ZGl2IGNsYXNzPXNnX2Mtc2l0ZS1oZWFkZXJfX2NvbnRhaW5lcj4gPGJ1dHRvbiBAY2xpY2s9dG9nZ2xlTmF2IGNsYXNzPVxcXCJoeV91LWhpZGVAbWQganMtYWN0aXZlIHNnX2Mtc2l0ZS1oZWFkZXJfX3RvZ2dsZWJ0blxcXCIgdHlwZT1idXR0b24gcm9sZT1idXR0b24+IDxzcGFuIGNsYXNzPVxcXCJcXFwiPjxpIGNsYXNzPVxcXCJoeV9jLWljb24gaHlfYy1pY29uLS1oYW1idXJnZXJcXFwiPjwvaT48L3NwYW4+IDwvYnV0dG9uPiA8YSB2LWxpbms9XFxcIntwYXRoOiAnL2dldC1zdGFydGVkJ31cXFwiPiA8aW1nIGNsYXNzPWxvZ28gc3JjPVwiICsgcmVxdWlyZShcIi4vbG9nby5wbmdcIikgKyBcIiBhbHQ9TG9nbz4gPC9hPiA8L2Rpdj4gPC9oZWFkZXI+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vZGV2L3NyYy9jb21wb25lbnRzL3NpdGUtaGVhZGVyL3NpdGUtaGVhZGVyLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxNjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5BbGVydDwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8YWxlcnQgdHlwZT1lcnJvcj5UaGlzIGlzIGFuIGVycm9yIGFsZXJ0LjwvYWxlcnQ+IDxhbGVydCB0eXBlPWluZm8+VGhpcyBpcyBhbiBpbmZvIGFsZXJ0LjwvYWxlcnQ+IDxhbGVydCB0eXBlPXN1Y2Nlc3M+VGhpcyBpcyBhIHN1Y2Nlc3MgYWxlcnQuPC9hbGVydD4gPGFsZXJ0IHR5cGU9c3VjY2VzcyA6ZGlzbWlzc2libGU9ZmFsc2U+VGhpcyBpcyBub3QgYSBkaXNtaXNzaWJsZSBhbGVydC48L2FsZXJ0PiA8YWxlcnQgdHlwZT1zdWNjZXNzIDpvbi1jbG9zZWQ9ZGlzbWlzc0NhbGxCYWNrPlRoaXMgaXMgYW4gYWxlcnQgd2l0aCBjYWxsYmFjay48L2FsZXJ0PiA8YWxlcnQgdHlwZT1pbmZvIDp0aW1lb3V0PTUwMDA+VGhpcyBhbGVydCBzaG91bGQgdGltZW91dCBpbiA1IHNlY29uZHMuPC9hbGVydD4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiZsdDthbGVydCB0eXBlPVxcXCJlcnJvclxcXCImZ3Q7VGhpcyBpcyBhbiBlcnJvciBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xcbiZsdDthbGVydCB0eXBlPVxcXCJpbmZvXFxcIiZndDtUaGlzIGlzIGFuIGluZm8gYWxlcnQuJmx0Oy9hbGVydCZndDtcXG4mbHQ7YWxlcnQgdHlwZT1cXFwic3VjY2Vzc1xcXCImZ3Q7VGhpcyBpcyBhIHN1Y2Nlc3MgYWxlcnQuJmx0Oy9hbGVydCZndDtcXG4mbHQ7YWxlcnQgdHlwZT1cXFwic3VjY2Vzc1xcXCIgOmRpc21pc3NpYmxlPVxcXCJmYWxzZVxcXCImZ3Q7VGhpcyBpcyBub3QgYSBkaXNtaXNzaWJsZSBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xcbiZsdDthbGVydCB0eXBlPVxcXCJzdWNjZXNzXFxcIiA6b24tY2xvc2VkPVxcXCJkaXNtaXNzQ2FsbEJhY2tcXFwiJmd0O1RoaXMgaXMgYW4gYWxlcnQgd2l0aCBjYWxsYmFjay4mbHQ7L2FsZXJ0Jmd0O1xcbiZsdDthbGVydCB0eXBlPVxcXCJzdWNjZXNzXFxcIiA6dGltZW91dD1cXFwiNTAwMFxcXCImZ3Q7VGhpcyBhbGVydCBzaG91bGQgdGltZW91dCBpbiA1IHNlY29uZHMuJmx0Oy9hbGVydCZndDtcXG4gICAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL2FsZXJ0LXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTY1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+Q29sbGFwc2FibGUgUGFuZWw8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVxcXCJQYW5lbCAxXFxcIiA6aXMtb3Blbj10cnVlPiBQYW5lbCAxIGNvbnRlbnQgPC9jb2xsYXBzYWJsZS1wYW5lbD4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVxcXCJQYW5lbCAyXFxcIj4gUGFuZWwgMiBjb250ZW50IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4mbHQ7Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XFxcIlBhbmVsIDFcXFwiIDppcy1vcGVuPVxcXCJ0cnVlXFxcIiZndDtcXG4gUGFuZWwgMSBjb250ZW50XFxuJmx0Oy9jb2xsYXBzYWJsZS1wYW5lbCZndDtcXG4mbHQ7Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XFxcIlBhbmVsIDJcXFwiJmd0O1xcbiBQYW5lbCAyIGNvbnRlbnRcXG4mbHQ7L2NvbGxhcHNhYmxlLXBhbmVsJmd0O1xcbiAgICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiPkFQSTwvaDM+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxhcGktdGFibGUgOml0ZW1zPWFwaUl0ZW1zPjwvYXBpLXRhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2Rldi9zcmMvdmlld3MvY29sbGFwc2FibGUtcGFuZWwtcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxNjZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5HZXR0aW5nIFN0YXJ0ZWQ8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0tNSBoeV90LWdyZXlcXFwiPkNETjwvaDM+IDxwPiAuLi4gPC9wPiA8L2Rpdj4gPC9kaXY+PC9zZWN0aW9uPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vZGV2L3NyYy92aWV3cy9nZXQtc3RhcnRlZC52dWVcbiAqKiBtb2R1bGUgaWQgPSAxNjdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5MZWdhbCBTeXN0ZW08L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPHAgY2xhc3M9XFxcImh5X2MtY29weSBoeV9jLWNvcHktLWJvZHkgaHlfdC1ncmV5XFxcIj4gTG9yZW0gaXBzdW08bGVnYWwtY291bnRlciB2LW92ZXJsYXktb3BlbmVyPWxlZ2FsLW92ZXJsYXkgbGVnYWwta2V5PWhzLXJlZmVycmFsLXRlcm1zIGxlZ2FsLWxhbmc9ZW4gbGVnYWwtcmVnaW9uPWJjPjwvbGVnYWwtY291bnRlcj4gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdCwgc2VkIGRvIGVpdXNtb2QgdGVtcG9yIGluY2lkaWR1bnQgdXQgbGFib3JlIGV0IGRvbG9yZSBtYWduYSBhbGlxdWEuIDxsZWdhbC1jb3VudGVyIHYtb3ZlcmxheS1vcGVuZXI9bGVnYWwtb3ZlcmxheSBsZWdhbC1rZXk9MS15ZWFyLW9mZmVyLXN0aW0gbGVnYWwtbGFuZz1lbiBsZWdhbC1yZWdpb249YmM+PC9sZWdhbC1jb3VudGVyPiA8L3A+IDwvZGl2PiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8bGVnYWwtY29udGFpbmVyPjwvbGVnYWwtY29udGFpbmVyPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuJmx0O2xlZ2FsLWNvdW50ZXJcXG4gIGxlZ2FsLWtleT1cXFwiaHMtcmVmZXJyYWwtdGVybXNcXFwiXFxuICBsZWdhbC1sYW5nPVxcXCJlblxcXCJcXG4gIGxlZ2FsLXJlZ2lvbj1cXFwiYmNcXFwiXFxuJmx0Oy9sZWdhbC1jb3VudGVyJmd0O1xcbiZsdDtsZWdhbC1jb250YWluZXImZ3Q7Jmx0Oy9sZWdhbC1jb250YWluZXImZ3Q7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9amF2YXNjcmlwdD4gPHByZT5cXG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtamF2YXNjcmlwdD5cXG5sZXQgdm0gPSBuZXcgVnVlKHtcXG4gZWw6ICdib2R5JyxcXG4gZGF0YSgpIHtcXG4gICByZXR1cm4ge1xcbiAgICAgbGlnZXJFbmRQb2ludDogJ2h0dHBzOi8vYXBpLmNtcy50ZWx1cy5jb20vbGVnYWxzJyxcXG4gICAgIGxpZ2VyQXBwbGljYXRpb25LZXk6ICdiOTczOGQ2N2I4OWRmYzc4Mjc0NmQ0YTljZjRhMTA5MydcXG4gICB9O1xcbiB9LFxcbiBjb21wb25lbnRzOiB7XFxuICAgTGVnYWxDb3VudGVyLFxcbiAgIExlZ2FsQ29udGFpbmVyXFxuIH1cXG59KTtcXG4gICAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk6IExlZ2FsIENvdW50ZXI8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL2xlZ2FsLXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTY4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+T3ZlcmxheSBTeXN0ZW08L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPHA+IDxidXR0b24gdi1vdmVybGF5LW9wZW5lcj1vdmVybGF5LTEgY2xhc3M9XFxcImh5X2MtYnV0dG9uIGh5X2MtYnV0dG9uLS1saW5rIGh5X3QtcHVycGxlXFxcIiB0eXBlPWJ1dHRvbiByb2xlPWJ1dHRvbj4gT3BlbiBvdmVybGF5ICMxIDxpIGNsYXNzPVxcXCJoeV9jLWljb24gaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkIGh5X2MtYnV0dG9uX19pY29uXFxcIj48L2k+IDwvYnV0dG9uPiA8L3A+IDxwPiA8YnV0dG9uIHYtb3ZlcmxheS1vcGVuZXI9b3ZlcmxheS0yIGNsYXNzPVxcXCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tbGluayBoeV90LXB1cnBsZVxcXCIgdHlwZT1idXR0b24gcm9sZT1idXR0b24+IE9wZW4gb3ZlcmxheSAjMiA8aSBjbGFzcz1cXFwiaHlfYy1pY29uIGh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZCBoeV9jLWJ1dHRvbl9faWNvblxcXCI+PC9pPiA8L2J1dHRvbj4gPC9wPiA8b3ZlcmxheS1jb250YWluZXI+IDxvdmVybGF5IG92ZXJsYXkta2V5PW92ZXJsYXktMT4gPGg0IGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XFxcIiBzbG90PW92ZXJsYXktaGVhZGVyPlRoaXMgaXMgb3ZlcmxheSAjMTwvaDQ+IDxhcnRpY2xlIHNsb3Q9b3ZlcmxheS1ib2R5PiBPdmVybGF5ICMxIGJvZHkgPC9hcnRpY2xlPiA8L292ZXJsYXk+IDxvdmVybGF5IG92ZXJsYXkta2V5PW92ZXJsYXktMj4gPGg0IGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XFxcIiBzbG90PW92ZXJsYXktaGVhZGVyPlRoaXMgaXMgb3ZlcmxheSAjMjwvaDQ+IDxhcnRpY2xlIHNsb3Q9b3ZlcmxheS1ib2R5PiBPdmVybGF5ICMyIGJvZHkgPC9hcnRpY2xlPiA8L292ZXJsYXk+IDwvb3ZlcmxheS1jb250YWluZXI+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4mbHQ7b3ZlcmxheS1jb250YWluZXImZ3Q7XFxuICZsdDtvdmVybGF5IG92ZXJsYXkta2V5PVxcXCJvdmVybGF5LTFcXFwiJmd0O1xcbiAgICZsdDtoNCAgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcXFwiIHNsb3Q9XFxcIm92ZXJsYXktaGVhZGVyXFxcIiZndDtcXG4gICBUaGlzIGlzIG92ZXJsYXkgIzFcXG4gICAmbHQ7L2g0Jmd0O1xcbiAgICZsdDthcnRpY2xlIHNsb3Q9XFxcIm92ZXJsYXktYm9keVxcXCImZ3Q7XFxuICAgICBPdmVybGF5ICMxIGJvZHlcXG4gICAmbHQ7L2FydGljbGUmZ3Q7XFxuICZsdDsvb3ZlcmxheSZndDtcXG4gJmx0O292ZXJsYXkgb3ZlcmxheS1rZXk9XFxcIm92ZXJsYXktMlxcXCImZ3Q7XFxuICAgJmx0O2g0ICBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFxcXCIgc2xvdD1cXFwib3ZlcmxheS1oZWFkZXJcXFwiJmd0O1xcbiAgIFRoaXMgaXMgb3ZlcmxheSAjMVxcbiAgICZsdDsvaDQmZ3Q7XFxuICAgJmx0O2FydGljbGUgc2xvdD1cXFwib3ZlcmxheS1ib2R5XFxcIiZndDtcXG4gICAgIE92ZXJsYXkgIzIgYm9keVxcbiAgICZsdDsvYXJ0aWNsZSZndDtcXG4gJmx0Oy9vdmVybGF5Jmd0O1xcbiZsdDsvb3ZlcmxheS1jb250YWluZXImZ3Q7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vZGV2L3NyYy92aWV3cy9vdmVybGF5LXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTY5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+U3Bpbm5lcjwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8bGFiZWwgY2xhc3M9XFxcImh5X2MtY29udHJvbCBoeV9jLWNvbnRyb2wtLWNoZWNrYm94XFxcIj4gPHNwYW4gY2xhc3M9aHlfYy1jb250cm9sX19sYWJlbC10ZXh0PkZ1bGwgU2NyZWVuPC9zcGFuPiA8aW5wdXQgdHlwZT1jaGVja2JveCB2LW1vZGVsPWlzRnVsbFNjcmVlbiAvPiA8ZGl2IGNsYXNzPWh5X2MtY29udHJvbF9faW5kaWNhdG9yPjwvZGl2PiA8L2xhYmVsPiA8YnV0dG9uIEBjbGljaz1zaG93U3Bpbm5lciBjbGFzcz1cXFwiaHlfYy1idXR0b24gaHlfYy1idXR0b24tLXJhaXNlZCBoeV90LWdyZWVuXFxcIiB0eXBlPWJ1dHRvbj4gU2hvdyBTcGlubmVyIDwvYnV0dG9uPiA8c3Bpbm5lciA6ZnVsbC1zY3JlZW49aXNGdWxsU2NyZWVuIDp0ZXh0PW1zZz48L3NwaW5uZXI+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4mbHQ7c3Bpbm5lciB0ZXh0PVxcXCJJIHdpbGwgY2xvc2UgaW4gMyBzZWNvbmRzXFxcIiA6ZnVsbC1zY3JlZW49XFxcInRydWVcXFwiJmd0OyZsdDsvc3Bpbm5lciZndDtcXG4gICAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL3NwaW5uZXItcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxNzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5TdGVwIFRyYWNrZXI8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPHN0ZXAtdHJhY2tlciA6Y3VycmVudC1zdGVwPXN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgOmNvbmZpZz1zdGVwVHJhY2tlckNvbmZpZz48L3N0ZXAtdHJhY2tlcj4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuJmx0O3N0ZXAtdHJhY2tlclxcbjpjdXJyZW50LXN0ZXA9XFxcInN0ZXBUcmFja2VyQ3VycmVudFN0ZXBcXFwiXFxuOmNvbmZpZz1cXFwic3RlcFRyYWNrZXJDb25maWdcXFwiJmd0O1xcbiZsdDsvc3RlcC10cmFja2VyJmd0O1xcbiAgICAgICAgIDwvY29kZT5cXG4gICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1qYXZhc2NyaXB0PiA8cHJlPlxcbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1qcz5cXG5sZXQgc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDI7XFxubGV0IHN0ZXBUcmFja2VyQ29uZmlnID0ge1xcbiAgaXNDbGlja2FibGU6IHRydWUsXFxuICBzdGVwczogW1xcbiAgICB7XFxuICAgICAgdGl0bGU6ICdTdGVwIEEnLFxcbiAgICAgIGxpbms6ICcnLFxcbiAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcXG4gICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDA7XFxuICAgICAgfVxcbiAgICB9LCB7XFxuICAgICAgdGl0bGU6ICdTdGVwIEInLFxcbiAgICAgIGxpbms6ICcnLFxcbiAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcXG4gICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDE7XFxuICAgICAgfVxcbiAgICB9LCB7XFxuICAgICAgdGl0bGU6ICdTdGVwIEMnLFxcbiAgICAgIGxpbms6ICcnLFxcbiAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcXG4gICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDI7XFxuICAgICAgfVxcbiAgICB9XFxuICBdXFxufTtcXG5sZXQgdm0gPSBuZXcgVnVlKHtcXG4gIGVsOiAnYm9keScsXFxuICBkYXRhOiB7XFxuICAgIHN0ZXBUcmFja2VyQ29uZmlnLFxcbiAgICBzdGVwVHJhY2tlckN1cnJlbnRTdGVwXFxufSxcXG4gIGNvbXBvbmVudHM6IHtcXG4gICAgU3RlcFRyYWNrZXJcXG4gIH1cXG59KTtcXG4gICAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL3N0ZXAtdHJhY2tlci1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE3MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPlRhYjwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8dGFicyBjbGFzcz1cXFwiYy1wcmljZS1sb29rdXAgaHlfby1sYXlvdXRfX2l0ZW0gaHlfdS1zaXplLTNvZjNAc20gaHlfdS1zaXplLTRvZjRAbWQgaHlfdS1zaXplLTZvZjEyQGxnXFxcIj4gPHRhYiBsYWJlbD1cXFwiVGFiIDFcXFwiPiA8cD4gVGFiIDEgY29udGVudCA8L3A+IDwvdGFiPiA8dGFiIGxhYmVsPVxcXCJUYWIgMlxcXCI+IDxwPiBUYWIgMiBjb250ZW50IDwvcD4gPC90YWI+IDx0YWIgbGFiZWw9XFxcIlRhYiAzXFxcIiA6aXMtZGlzYWJsZWQ9dHJ1ZT4gPHA+IFRhYiAzIGNvbnRlbnQgPC9wPiA8L3RhYj4gPC90YWJzPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuJmx0O3RhYnMmZ3Q7XFxuICZsdDt0YWIgbGFiZWw9XFxcIlRhYiAxXFxcIiZndDtcXG4gICAmbHQ7cCZndDtcXG4gICAgIFRhYiAxIGNvbnRlbnRcXG4gICAmbHQ7L3AmZ3Q7XFxuICZsdDsvdGFiJmd0O1xcbiAmbHQ7dGFiIGxhYmVsPVxcXCJUYWIgMlxcXCImZ3Q7XFxuICAgJmx0O3AmZ3Q7XFxuICAgICBUYWIgMiBjb250ZW50XFxuICAgJmx0Oy9wJmd0O1xcbiAmbHQ7L3RhYiZndDtcXG4gJmx0O3RhYiBsYWJlbD1cXFwiVGFiIDNcXFwiIDppcy1kaXNhYmxlZD1cXFwidHJ1ZVxcXCImZ3Q7XFxuICAgJmx0O3AmZ3Q7XFxuICAgICBUYWIgMyBjb250ZW50XFxuICAgJmx0Oy9wJmd0O1xcbiAmbHQ7L3RhYiZndDtcXG4mbHQ7L3RhYnMmZ3Q7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vZGV2L3NyYy92aWV3cy90YWJzLXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTcyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiB2LWlmPWlzVmlzaWJsZSB0cmFuc2l0aW9uPWZhZGUgY2xhc3M9Yy1hbGVydCA6Y2xhc3M9XFxcIidjLWFsZXJ0LS0nICsgdHlwZVxcXCIgOmNsYXNzPVxcXCJ7ICdjLWFsZXJ0LS1kaXNtaXNzaWJsZSc6IGRpc21pc3NpYmxlIH1cXFwiIHJvbGU9YWxlcnQ+IDxidXR0b24gdi1pZj1kaXNtaXNzaWJsZSBAY2xpY2s9ZGlzbWlzcyB0eXBlPWJ1dHRvbiBjbGFzcz1jLWFsZXJ0X19jbG9zZS1idXR0b24gYXJpYS1sYWJlbD1DbG9zZT4gPHNwYW4gYXJpYS1oaWRkZW49dHJ1ZT4mdGltZXM7PC9zcGFuPiA8c3BhbiBjbGFzcz1oeV91LWludmlzaWJsZT5DbG9zZTwvc3Bhbj4gPC9idXR0b24+IDxzbG90Pjwvc2xvdD4gPC9kaXY+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3JjL2NvbXBvbmVudHMvYWxlcnQvYWxlcnQuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE3M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy1jb2xsYXBzYWJsZS1wYW5lbD4gPGgzIEBjbGljay5wcmV2ZW50PXRvZ2dsZU9wZW4gOmNsYXNzPVxcXCJ7XFxuICAgICAgJ2MtY29sbGFwc2FibGUtcGFuZWxfX2hlYWRlci0tb3Blbic6IGlzT3BlblxcbiAgICB9XFxcIiBjbGFzcz1cXFwiYy1jb2xsYXBzYWJsZS1wYW5lbF9faGVhZGVyIGh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIiB2LWh0bWw9bGFiZWw+IDwvaDM+IDxkaXYgY2xhc3M9Yy1jb2xsYXBzYWJsZS1wYW5lbF9fYm9keSA6Y2xhc3M9XFxcIntcXG4gICAgJ2MtY29sbGFwc2FibGUtcGFuZWxfX2JvZHktLW9wZW4nOiBpc09wZW5cXG4gIH1cXFwiPiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiA8L2Rpdj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zcmMvY29tcG9uZW50cy9jb2xsYXBzYWJsZS1wYW5lbC9jb2xsYXBzYWJsZS1wYW5lbC5odG1sXG4gKiogbW9kdWxlIGlkID0gMTc0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLWxlZ2FsLWNvbnRhaW5lcj4gPG9sIGNsYXNzPWMtbGVnYWwtY29udGFpbmVyX19vcmRlcmVkLWxpc3Q+IDxsaSB2LXNldC1mb2N1cz1sZWdhbC5pc1NlbGVjdGVkIGNsYXNzPWMtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0gOmNsYXNzPVxcXCJ7XFxuICAgICAgJ2MtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0tLWFjdGl2ZSc6IGxlZ2FsLmlzU2VsZWN0ZWRcXG4gICAgfVxcXCIgdi1mb3I9XFxcImxlZ2FsIGluIGluZGV4ZWRMZWdhbHNcXFwiIHYtaHRtbD1sZWdhbC5jb250ZW50PiA8L2xpPiA8L29sPiA8dWwgY2xhc3M9Yy1sZWdhbC1jb250YWluZXJfX3Vub3JkZXJlZC1saXN0PiA8bGkgY2xhc3M9Yy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbSB2LWZvcj1cXFwibGVnYWwgaW4gbm9uSW5kZXhlZExlZ2Fsc1xcXCIgdi1odG1sPWxlZ2FsLmNvbnRlbnQ+IDwvbGk+IDwvdWw+IDwvZGl2PiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci5odG1sXG4gKiogbW9kdWxlIGlkID0gMTc1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN1cCBjbGFzcz1jLWxlZ2FsLXN1cD4gPGEgaHJlZj0jIEBjbGljay5wcmV2ZW50PWNsaWNrSGFuZGxlcj4ge3tsZWdhbENvdW50ZXJ9fSA8L2E+IDwvc3VwPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvdW50ZXIuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE3NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy1vdmVybGF5LWNvbnRhaW5lcj4gPGRpdiBjbGFzcz1jLW92ZXJsYXktY29udGFpbmVyX19jdXJ0YWluIDpjbGFzcz1cXFwie1xcbiAgICAgICAgJ2Mtb3ZlcmxheS1jb250YWluZXJfX2N1cnRhaW4tLWFjdGl2ZSc6IGlzVmlzaWJsZVxcbiAgICB9XFxcIiBAY2xpY2sucHJldmVudD1cXFwiaXNWaXNpYmxlPWZhbHNlXFxcIj4gPC9kaXY+IDxkaXYgY2xhc3M9Yy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXMgOmNsYXNzPVxcXCJ7XFxuICAgICAgICAnYy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXMtLWFjdGl2ZSc6IGlzVmlzaWJsZVxcbiAgICB9XFxcIj4gPHNsb3Q+PC9zbG90PiA8L2Rpdj4gPC9kaXY+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LWNvbnRhaW5lci5odG1sXG4gKiogbW9kdWxlIGlkID0gMTc3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGFydGljbGUgY2xhc3M9Yy1vdmVybGF5IHYtc2hvdz1pc1Zpc2libGU+IDxkaXYgY2xhc3M9Yy1vdmVybGF5X19ib2R5PiA8c2xvdCBuYW1lPW92ZXJsYXktYm9keT48L3Nsb3Q+IDwvZGl2PiA8aGVhZGVyIGNsYXNzPWMtb3ZlcmxheV9faGVhZGVyPiA8c2xvdCBuYW1lPW92ZXJsYXktaGVhZGVyPjwvc2xvdD4gPGJ1dHRvbiB0eXBlPWJ1dHRvbiBjbGFzcz1jLW92ZXJsYXlfX2Nsb3NlLWJ1dHRvbiBhcmlhLWxhYmVsPUNsb3NlIHRhYmluZGV4PTAgQGNsaWNrLnByZXZlbnQ9Y2xvc2VPdmVybGF5PjwvYnV0dG9uPiA8L2hlYWRlcj4gPC9hcnRpY2xlPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS5odG1sXG4gKiogbW9kdWxlIGlkID0gMTc4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiB2LXNob3c9YWN0aXZlIGNsYXNzPWMtc3Bpbm5lciA6Y2xhc3M9XFxcInsgJ2Mtc3Bpbm5lci0tZnVsbHNjcmVlbic6IGZ1bGxTY3JlZW4gfVxcXCI+IDxzdmcgdmlld0JveD1cXFwiMCAwIDEwMCAxMDBcXFwiIHdpZHRoPTAgaGVpZ2h0PTA+IDxjaXJjbGUgc3Ryb2tlLXdpZHRoPTQgZmlsbD1ub25lIHN0cm9rZS1saW5lY2FwPXJvdW5kIHN0cm9rZS1kYXNob2Zmc2V0PTAgY3g9NTAgY3k9NTAgcj0yMD48L2NpcmNsZT4gPC9zdmc+IDxwIGNsYXNzPVxcXCJjLXNwaW5uZXJfX3RleHQgaHlfYy1jb3B5IGh5X3UtZm9udC13ZWlnaHQtLW1lZGl1bVxcXCIgdi1pZj0hIXRleHQ+e3t0ZXh0fX08L3A+IDwvZGl2PiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3NyYy9jb21wb25lbnRzL3NwaW5uZXIvc3Bpbm5lci5odG1sXG4gKiogbW9kdWxlIGlkID0gMTc5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHVsIGNsYXNzPWMtc3RlcC10cmFja2VyPiA8bGkgY2xhc3M9Yy1zdGVwLXRyYWNrZXJfX3N0ZXAgOmNsYXNzPVxcXCJ7XFxuICAgICAgJ2Mtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZSc6IGN1cnJlbnRTdGVwID4gJGluZGV4LFxcbiAgICAgICdjLXN0ZXAtdHJhY2tlcl9fc3RlcC0tYWN0aXZlJzogY3VycmVudFN0ZXAgPT09ICRpbmRleCxcXG4gICAgICAnYy1zdGVwLXRyYWNrZXJfX3NldHAtLWNsaWNrYWJsZSc6IChjdXJyZW50U3RlcCA+ICRpbmRleCAmJiBjb25maWcuaXNDbGlja2FibGUpXFxuICB9XFxcIiB2LWZvcj1cXFwic3RlcCBpbiBjb25maWcuc3RlcHNcXFwiPiA8YSA6aHJlZj1cXFwic3RlcC5saW5rIHx8IGZhbHNlXFxcIiBAY2xpY2s9XFxcImNsaWNrSGFuZGxlcigkZXZlbnQsIHN0ZXAsICRpbmRleClcXFwiIHYtaWY9Y29uZmlnLmlzQ2xpY2thYmxlPiA8c3BhbiBjbGFzcz1jLXN0ZXAtdHJhY2tlcl9faWNvbj48L3NwYW4+IDxzcGFuIGNsYXNzPWMtc3RlcC10cmFja2VyX19sYWJlbD57eyRpbmRleCArIDF9fS4ge3tzdGVwLnRpdGxlfX08L3NwYW4+IDwvYT4gPHNwYW4gdi1lbHNlIGNsYXNzPWMtc3RlcC10cmFja2VyX19pY29uPjwvc3Bhbj4gPHNwYW4gdi1lbHNlIGNsYXNzPWMtc3RlcC10cmFja2VyX19sYWJlbD57eyRpbmRleCArIDF9fS4ge3tzdGVwLnRpdGxlfX08L3NwYW4+IDwvbGk+IDwvdWw+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3JjL2NvbXBvbmVudHMvc3RlcC10cmFja2VyL3N0ZXAtdHJhY2tlci5odG1sXG4gKiogbW9kdWxlIGlkID0gMTgwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLXRhYnNfX3BhbmUgOmNsYXNzPVxcXCJ7XFxuICAgICdjLXRhYnNfX3BhbmUtLWFjdGl2ZSc6IGlzVmlzaWJsZVxcbiAgfVxcXCI+IDxzbG90Pjwvc2xvdD4gPC9kaXY+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYi5odG1sXG4gKiogbW9kdWxlIGlkID0gMTgxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLXRhYnM+IDx1bCBjbGFzcz1jLXRhYnNfX2hlYWRlcj4gPGxpIHYtZm9yPVxcXCJ0YWIgaW4gdGFic1xcXCIgY2xhc3M9Yy10YWJzX19oZWFkZXItaXRlbSA6Y2xhc3M9XFxcIntcXG4gICAgICAgICAgICAgICAgJ2MtdGFic19faGVhZGVyLWl0ZW0tLWFjdGl2ZSc6ICgkaW5kZXggPT09IGFjdGl2ZVRhYkluZGV4KSxcXG4gICAgICAgICAgICAgICAgJ2MtdGFic19faGVhZGVyLWl0ZW0tLWRpc2FibGVkJzogdGFiLmlzRGlzYWJsZWRcXG4gICAgICAgICAgICAgIH1cXFwiIDpkaXNhYmxlZD10YWIuZGlzYWJsZWQ+IDxhIGhyZWY9IyBAY2xpY2sucHJldmVudD1cXFwiaGFuZGxlVGFiTGlzdENsaWNrKCRpbmRleCwgdGFiKVxcXCIgdi1odG1sPXRhYi5sYWJlbD48L2E+IDwvbGk+IDwvdWw+IDxkaXYgY2xhc3M9Yy10YWJzX19ib2R5PiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiA8L2Rpdj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zcmMvY29tcG9uZW50cy90YWIvdGFicy5odG1sXG4gKiogbW9kdWxlIGlkID0gMTgyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3NpZGUtbmF2Lmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vZGV2L3NyYy9jb21wb25lbnRzL3NpZGUtbmF2L2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE4M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXIhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhc2FzcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zaXRlLWhlYWRlci5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvY29tcG9uZW50cy9zaXRlLWhlYWRlci9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAxODRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vYWxlcnQtcGFnZS52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2FsZXJ0LXBhZ2UudnVlXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvdmlld3MvYWxlcnQtcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxODVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vY29sbGFwc2FibGUtcGFuZWwtcGFnZS52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2NvbGxhcHNhYmxlLXBhbmVsLXBhZ2UudnVlXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvdmlld3MvY29sbGFwc2FibGUtcGFuZWwtcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxODZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vZ2V0LXN0YXJ0ZWQudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9nZXQtc3RhcnRlZC52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2dldC1zdGFydGVkLnZ1ZVwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9kZXYvc3JjL3ZpZXdzL2dldC1zdGFydGVkLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE4N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9sZWdhbC1wYWdlLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vbGVnYWwtcGFnZS52dWVcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vZGV2L3NyYy92aWV3cy9sZWdhbC1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE4OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9vdmVybGF5LXBhZ2UudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9vdmVybGF5LXBhZ2UudnVlXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvdmlld3Mvb3ZlcmxheS1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE4OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9zcGlubmVyLXBhZ2UudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9zcGlubmVyLXBhZ2UudnVlXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvdmlld3Mvc3Bpbm5lci1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9zdGVwLXRyYWNrZXItcGFnZS52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL3N0ZXAtdHJhY2tlci1wYWdlLnZ1ZVwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9kZXYvc3JjL3ZpZXdzL3N0ZXAtdHJhY2tlci1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi90YWJzLXBhZ2UudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi90YWJzLXBhZ2UudnVlXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvdmlld3MvdGFicy1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhc2FzcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9hbGVydC5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL2FsZXJ0L2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhc2FzcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9jb2xsYXBzYWJsZS1wYW5lbC5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL2NvbGxhcHNhYmxlLXBhbmVsL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhc2FzcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9sZWdhbC1jb250YWluZXIudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9sZWdhbC1jb250YWluZXIudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL2xlZ2FsLWNvbnRhaW5lci5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci52dWVcbiAqKiBtb2R1bGUgaWQgPSAxOTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY291bnRlci52dWVcIilcbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2xlZ2FsLWNvdW50ZXIudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL2xlZ2FsLWNvdW50ZXIuaHRtbFwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb3VudGVyLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhc2FzcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LWNvbnRhaW5lci52dWVcIilcbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL292ZXJsYXktY29udGFpbmVyLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9vdmVybGF5LWNvbnRhaW5lci5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS1jb250YWluZXIudnVlXG4gKiogbW9kdWxlIGlkID0gMTk3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXkudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9vdmVybGF5LnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9vdmVybGF5Lmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhc2FzcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zcGlubmVyLmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2NvbXBvbmVudHMvc3Bpbm5lci9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAxOTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3RlcC10cmFja2VyLmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2NvbXBvbmVudHMvc3RlcC10cmFja2VyL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIwMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi90YWIudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3RhYi5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL3RhYi90YWIudnVlXG4gKiogbW9kdWxlIGlkID0gMjAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3RhYnMudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi90YWJzLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi90YWJzLmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYnMudnVlXG4gKiogbW9kdWxlIGlkID0gMjAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIHZ1ZS1yb3V0ZXIgdjAuNy4xM1xuICogKGMpIDIwMTYgRXZhbiBZb3VcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICBnbG9iYWwuVnVlUm91dGVyID0gZmFjdG9yeSgpO1xufSh0aGlzLCBmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuICB2YXIgYmFiZWxIZWxwZXJzID0ge307XG5cbiAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICAgIH1cbiAgfTtcbiAgZnVuY3Rpb24gVGFyZ2V0KHBhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKSB7XG4gICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICB0aGlzLm1hdGNoZXIgPSBtYXRjaGVyO1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgfVxuXG4gIFRhcmdldC5wcm90b3R5cGUgPSB7XG4gICAgdG86IGZ1bmN0aW9uIHRvKHRhcmdldCwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBkZWxlZ2F0ZSA9IHRoaXMuZGVsZWdhdGU7XG5cbiAgICAgIGlmIChkZWxlZ2F0ZSAmJiBkZWxlZ2F0ZS53aWxsQWRkUm91dGUpIHtcbiAgICAgICAgdGFyZ2V0ID0gZGVsZWdhdGUud2lsbEFkZFJvdXRlKHRoaXMubWF0Y2hlci50YXJnZXQsIHRhcmdldCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMubWF0Y2hlci5hZGQodGhpcy5wYXRoLCB0YXJnZXQpO1xuXG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBtdXN0IGhhdmUgYW4gYXJndW1lbnQgaW4gdGhlIGZ1bmN0aW9uIHBhc3NlZCB0byBgdG9gXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWF0Y2hlci5hZGRDaGlsZCh0aGlzLnBhdGgsIHRhcmdldCwgY2FsbGJhY2ssIHRoaXMuZGVsZWdhdGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIE1hdGNoZXIodGFyZ2V0KSB7XG4gICAgdGhpcy5yb3V0ZXMgPSB7fTtcbiAgICB0aGlzLmNoaWxkcmVuID0ge307XG4gICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gIH1cblxuICBNYXRjaGVyLnByb3RvdHlwZSA9IHtcbiAgICBhZGQ6IGZ1bmN0aW9uIGFkZChwYXRoLCBoYW5kbGVyKSB7XG4gICAgICB0aGlzLnJvdXRlc1twYXRoXSA9IGhhbmRsZXI7XG4gICAgfSxcblxuICAgIGFkZENoaWxkOiBmdW5jdGlvbiBhZGRDaGlsZChwYXRoLCB0YXJnZXQsIGNhbGxiYWNrLCBkZWxlZ2F0ZSkge1xuICAgICAgdmFyIG1hdGNoZXIgPSBuZXcgTWF0Y2hlcih0YXJnZXQpO1xuICAgICAgdGhpcy5jaGlsZHJlbltwYXRoXSA9IG1hdGNoZXI7XG5cbiAgICAgIHZhciBtYXRjaCA9IGdlbmVyYXRlTWF0Y2gocGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpO1xuXG4gICAgICBpZiAoZGVsZWdhdGUgJiYgZGVsZWdhdGUuY29udGV4dEVudGVyZWQpIHtcbiAgICAgICAgZGVsZWdhdGUuY29udGV4dEVudGVyZWQodGFyZ2V0LCBtYXRjaCk7XG4gICAgICB9XG5cbiAgICAgIGNhbGxiYWNrKG1hdGNoKTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2VuZXJhdGVNYXRjaChzdGFydGluZ1BhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChwYXRoLCBuZXN0ZWRDYWxsYmFjaykge1xuICAgICAgdmFyIGZ1bGxQYXRoID0gc3RhcnRpbmdQYXRoICsgcGF0aDtcblxuICAgICAgaWYgKG5lc3RlZENhbGxiYWNrKSB7XG4gICAgICAgIG5lc3RlZENhbGxiYWNrKGdlbmVyYXRlTWF0Y2goZnVsbFBhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IFRhcmdldChzdGFydGluZ1BhdGggKyBwYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFJvdXRlKHJvdXRlQXJyYXksIHBhdGgsIGhhbmRsZXIpIHtcbiAgICB2YXIgbGVuID0gMDtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHJvdXRlQXJyYXkubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBsZW4gKz0gcm91dGVBcnJheVtpXS5wYXRoLmxlbmd0aDtcbiAgICB9XG5cbiAgICBwYXRoID0gcGF0aC5zdWJzdHIobGVuKTtcbiAgICB2YXIgcm91dGUgPSB7IHBhdGg6IHBhdGgsIGhhbmRsZXI6IGhhbmRsZXIgfTtcbiAgICByb3V0ZUFycmF5LnB1c2gocm91dGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZWFjaFJvdXRlKGJhc2VSb3V0ZSwgbWF0Y2hlciwgY2FsbGJhY2ssIGJpbmRpbmcpIHtcbiAgICB2YXIgcm91dGVzID0gbWF0Y2hlci5yb3V0ZXM7XG5cbiAgICBmb3IgKHZhciBwYXRoIGluIHJvdXRlcykge1xuICAgICAgaWYgKHJvdXRlcy5oYXNPd25Qcm9wZXJ0eShwYXRoKSkge1xuICAgICAgICB2YXIgcm91dGVBcnJheSA9IGJhc2VSb3V0ZS5zbGljZSgpO1xuICAgICAgICBhZGRSb3V0ZShyb3V0ZUFycmF5LCBwYXRoLCByb3V0ZXNbcGF0aF0pO1xuXG4gICAgICAgIGlmIChtYXRjaGVyLmNoaWxkcmVuW3BhdGhdKSB7XG4gICAgICAgICAgZWFjaFJvdXRlKHJvdXRlQXJyYXksIG1hdGNoZXIuY2hpbGRyZW5bcGF0aF0sIGNhbGxiYWNrLCBiaW5kaW5nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYWxsYmFjay5jYWxsKGJpbmRpbmcsIHJvdXRlQXJyYXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbWFwIChjYWxsYmFjaywgYWRkUm91dGVDYWxsYmFjaykge1xuICAgIHZhciBtYXRjaGVyID0gbmV3IE1hdGNoZXIoKTtcblxuICAgIGNhbGxiYWNrKGdlbmVyYXRlTWF0Y2goXCJcIiwgbWF0Y2hlciwgdGhpcy5kZWxlZ2F0ZSkpO1xuXG4gICAgZWFjaFJvdXRlKFtdLCBtYXRjaGVyLCBmdW5jdGlvbiAocm91dGUpIHtcbiAgICAgIGlmIChhZGRSb3V0ZUNhbGxiYWNrKSB7XG4gICAgICAgIGFkZFJvdXRlQ2FsbGJhY2sodGhpcywgcm91dGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hZGQocm91dGUpO1xuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuICB9XG5cbiAgdmFyIHNwZWNpYWxzID0gWycvJywgJy4nLCAnKicsICcrJywgJz8nLCAnfCcsICcoJywgJyknLCAnWycsICddJywgJ3snLCAnfScsICdcXFxcJ107XG5cbiAgdmFyIGVzY2FwZVJlZ2V4ID0gbmV3IFJlZ0V4cCgnKFxcXFwnICsgc3BlY2lhbHMuam9pbignfFxcXFwnKSArICcpJywgJ2cnKTtcblxuICB2YXIgbm9XYXJuaW5nID0gZmFsc2U7XG4gIGZ1bmN0aW9uIHdhcm4obXNnKSB7XG4gICAgaWYgKCFub1dhcm5pbmcgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbdnVlLXJvdXRlcl0gJyArIG1zZyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdHJ5RGVjb2RlKHVyaSwgYXNDb21wb25lbnQpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGFzQ29tcG9uZW50ID8gZGVjb2RlVVJJQ29tcG9uZW50KHVyaSkgOiBkZWNvZGVVUkkodXJpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB3YXJuKCdtYWxmb3JtZWQgVVJJJyArIChhc0NvbXBvbmVudCA/ICcgY29tcG9uZW50OiAnIDogJzogJykgKyB1cmkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGlzQXJyYXkodGVzdCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGVzdCkgPT09IFwiW29iamVjdCBBcnJheV1cIjtcbiAgfVxuXG4gIC8vIEEgU2VnbWVudCByZXByZXNlbnRzIGEgc2VnbWVudCBpbiB0aGUgb3JpZ2luYWwgcm91dGUgZGVzY3JpcHRpb24uXG4gIC8vIEVhY2ggU2VnbWVudCB0eXBlIHByb3ZpZGVzIGFuIGBlYWNoQ2hhcmAgYW5kIGByZWdleGAgbWV0aG9kLlxuICAvL1xuICAvLyBUaGUgYGVhY2hDaGFyYCBtZXRob2QgaW52b2tlcyB0aGUgY2FsbGJhY2sgd2l0aCBvbmUgb3IgbW9yZSBjaGFyYWN0ZXJcbiAgLy8gc3BlY2lmaWNhdGlvbnMuIEEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gY29uc3VtZXMgb25lIG9yIG1vcmUgaW5wdXRcbiAgLy8gY2hhcmFjdGVycy5cbiAgLy9cbiAgLy8gVGhlIGByZWdleGAgbWV0aG9kIHJldHVybnMgYSByZWdleCBmcmFnbWVudCBmb3IgdGhlIHNlZ21lbnQuIElmIHRoZVxuICAvLyBzZWdtZW50IGlzIGEgZHluYW1pYyBvZiBzdGFyIHNlZ21lbnQsIHRoZSByZWdleCBmcmFnbWVudCBhbHNvIGluY2x1ZGVzXG4gIC8vIGEgY2FwdHVyZS5cbiAgLy9cbiAgLy8gQSBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiBjb250YWluczpcbiAgLy9cbiAgLy8gKiBgdmFsaWRDaGFyc2A6IGEgU3RyaW5nIHdpdGggYSBsaXN0IG9mIGFsbCB2YWxpZCBjaGFyYWN0ZXJzLCBvclxuICAvLyAqIGBpbnZhbGlkQ2hhcnNgOiBhIFN0cmluZyB3aXRoIGEgbGlzdCBvZiBhbGwgaW52YWxpZCBjaGFyYWN0ZXJzXG4gIC8vICogYHJlcGVhdGA6IHRydWUgaWYgdGhlIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGNhbiByZXBlYXRcblxuICBmdW5jdGlvbiBTdGF0aWNTZWdtZW50KHN0cmluZykge1xuICAgIHRoaXMuc3RyaW5nID0gc3RyaW5nO1xuICB9XG4gIFN0YXRpY1NlZ21lbnQucHJvdG90eXBlID0ge1xuICAgIGVhY2hDaGFyOiBmdW5jdGlvbiBlYWNoQ2hhcihjYWxsYmFjaykge1xuICAgICAgdmFyIHN0cmluZyA9IHRoaXMuc3RyaW5nLFxuICAgICAgICAgIGNoO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0cmluZy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgY2ggPSBzdHJpbmcuY2hhckF0KGkpO1xuICAgICAgICBjYWxsYmFjayh7IHZhbGlkQ2hhcnM6IGNoIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICByZWdleDogZnVuY3Rpb24gcmVnZXgoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdHJpbmcucmVwbGFjZShlc2NhcGVSZWdleCwgJ1xcXFwkMScpO1xuICAgIH0sXG5cbiAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdHJpbmc7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIER5bmFtaWNTZWdtZW50KG5hbWUpIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICB9XG4gIER5bmFtaWNTZWdtZW50LnByb3RvdHlwZSA9IHtcbiAgICBlYWNoQ2hhcjogZnVuY3Rpb24gZWFjaENoYXIoY2FsbGJhY2spIHtcbiAgICAgIGNhbGxiYWNrKHsgaW52YWxpZENoYXJzOiBcIi9cIiwgcmVwZWF0OiB0cnVlIH0pO1xuICAgIH0sXG5cbiAgICByZWdleDogZnVuY3Rpb24gcmVnZXgoKSB7XG4gICAgICByZXR1cm4gXCIoW14vXSspXCI7XG4gICAgfSxcblxuICAgIGdlbmVyYXRlOiBmdW5jdGlvbiBnZW5lcmF0ZShwYXJhbXMpIHtcbiAgICAgIHZhciB2YWwgPSBwYXJhbXNbdGhpcy5uYW1lXTtcbiAgICAgIHJldHVybiB2YWwgPT0gbnVsbCA/IFwiOlwiICsgdGhpcy5uYW1lIDogdmFsO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBTdGFyU2VnbWVudChuYW1lKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgfVxuICBTdGFyU2VnbWVudC5wcm90b3R5cGUgPSB7XG4gICAgZWFjaENoYXI6IGZ1bmN0aW9uIGVhY2hDaGFyKGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjayh7IGludmFsaWRDaGFyczogXCJcIiwgcmVwZWF0OiB0cnVlIH0pO1xuICAgIH0sXG5cbiAgICByZWdleDogZnVuY3Rpb24gcmVnZXgoKSB7XG4gICAgICByZXR1cm4gXCIoLispXCI7XG4gICAgfSxcblxuICAgIGdlbmVyYXRlOiBmdW5jdGlvbiBnZW5lcmF0ZShwYXJhbXMpIHtcbiAgICAgIHZhciB2YWwgPSBwYXJhbXNbdGhpcy5uYW1lXTtcbiAgICAgIHJldHVybiB2YWwgPT0gbnVsbCA/IFwiOlwiICsgdGhpcy5uYW1lIDogdmFsO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBFcHNpbG9uU2VnbWVudCgpIHt9XG4gIEVwc2lsb25TZWdtZW50LnByb3RvdHlwZSA9IHtcbiAgICBlYWNoQ2hhcjogZnVuY3Rpb24gZWFjaENoYXIoKSB7fSxcbiAgICByZWdleDogZnVuY3Rpb24gcmVnZXgoKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9LFxuICAgIGdlbmVyYXRlOiBmdW5jdGlvbiBnZW5lcmF0ZSgpIHtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBwYXJzZShyb3V0ZSwgbmFtZXMsIHNwZWNpZmljaXR5KSB7XG4gICAgLy8gbm9ybWFsaXplIHJvdXRlIGFzIG5vdCBzdGFydGluZyB3aXRoIGEgXCIvXCIuIFJlY29nbml0aW9uIHdpbGxcbiAgICAvLyBhbHNvIG5vcm1hbGl6ZS5cbiAgICBpZiAocm91dGUuY2hhckF0KDApID09PSBcIi9cIikge1xuICAgICAgcm91dGUgPSByb3V0ZS5zdWJzdHIoMSk7XG4gICAgfVxuXG4gICAgdmFyIHNlZ21lbnRzID0gcm91dGUuc3BsaXQoXCIvXCIpLFxuICAgICAgICByZXN1bHRzID0gW107XG5cbiAgICAvLyBBIHJvdXRlcyBoYXMgc3BlY2lmaWNpdHkgZGV0ZXJtaW5lZCBieSB0aGUgb3JkZXIgdGhhdCBpdHMgZGlmZmVyZW50IHNlZ21lbnRzXG4gICAgLy8gYXBwZWFyIGluLiBUaGlzIHN5c3RlbSBtaXJyb3JzIGhvdyB0aGUgbWFnbml0dWRlIG9mIG51bWJlcnMgd3JpdHRlbiBhcyBzdHJpbmdzXG4gICAgLy8gd29ya3MuXG4gICAgLy8gQ29uc2lkZXIgYSBudW1iZXIgd3JpdHRlbiBhczogXCJhYmNcIi4gQW4gZXhhbXBsZSB3b3VsZCBiZSBcIjIwMFwiLiBBbnkgb3RoZXIgbnVtYmVyIHdyaXR0ZW5cbiAgICAvLyBcInh5elwiIHdpbGwgYmUgc21hbGxlciB0aGFuIFwiYWJjXCIgc28gbG9uZyBhcyBgYSA+IHpgLiBGb3IgaW5zdGFuY2UsIFwiMTk5XCIgaXMgc21hbGxlclxuICAgIC8vIHRoZW4gXCIyMDBcIiwgZXZlbiB0aG91Z2ggXCJ5XCIgYW5kIFwielwiICh3aGljaCBhcmUgYm90aCA5KSBhcmUgbGFyZ2VyIHRoYW4gXCIwXCIgKHRoZSB2YWx1ZVxuICAgIC8vIG9mIChgYmAgYW5kIGBjYCkuIFRoaXMgaXMgYmVjYXVzZSB0aGUgbGVhZGluZyBzeW1ib2wsIFwiMlwiLCBpcyBsYXJnZXIgdGhhbiB0aGUgb3RoZXJcbiAgICAvLyBsZWFkaW5nIHN5bWJvbCwgXCIxXCIuXG4gICAgLy8gVGhlIHJ1bGUgaXMgdGhhdCBzeW1ib2xzIHRvIHRoZSBsZWZ0IGNhcnJ5IG1vcmUgd2VpZ2h0IHRoYW4gc3ltYm9scyB0byB0aGUgcmlnaHRcbiAgICAvLyB3aGVuIGEgbnVtYmVyIGlzIHdyaXR0ZW4gb3V0IGFzIGEgc3RyaW5nLiBJbiB0aGUgYWJvdmUgc3RyaW5ncywgdGhlIGxlYWRpbmcgZGlnaXRcbiAgICAvLyByZXByZXNlbnRzIGhvdyBtYW55IDEwMCdzIGFyZSBpbiB0aGUgbnVtYmVyLCBhbmQgaXQgY2FycmllcyBtb3JlIHdlaWdodCB0aGFuIHRoZSBtaWRkbGVcbiAgICAvLyBudW1iZXIgd2hpY2ggcmVwcmVzZW50cyBob3cgbWFueSAxMCdzIGFyZSBpbiB0aGUgbnVtYmVyLlxuICAgIC8vIFRoaXMgc3lzdGVtIG9mIG51bWJlciBtYWduaXR1ZGUgd29ya3Mgd2VsbCBmb3Igcm91dGUgc3BlY2lmaWNpdHksIHRvby4gQSByb3V0ZSB3cml0dGVuIGFzXG4gICAgLy8gYGEvYi9jYCB3aWxsIGJlIG1vcmUgc3BlY2lmaWMgdGhhbiBgeC95L3pgIGFzIGxvbmcgYXMgYGFgIGlzIG1vcmUgc3BlY2lmaWMgdGhhblxuICAgIC8vIGB4YCwgaXJyZXNwZWN0aXZlIG9mIHRoZSBvdGhlciBwYXJ0cy5cbiAgICAvLyBCZWNhdXNlIG9mIHRoaXMgc2ltaWxhcml0eSwgd2UgYXNzaWduIGVhY2ggdHlwZSBvZiBzZWdtZW50IGEgbnVtYmVyIHZhbHVlIHdyaXR0ZW4gYXMgYVxuICAgIC8vIHN0cmluZy4gV2UgY2FuIGZpbmQgdGhlIHNwZWNpZmljaXR5IG9mIGNvbXBvdW5kIHJvdXRlcyBieSBjb25jYXRlbmF0aW5nIHRoZXNlIHN0cmluZ3NcbiAgICAvLyB0b2dldGhlciwgZnJvbSBsZWZ0IHRvIHJpZ2h0LiBBZnRlciB3ZSBoYXZlIGxvb3BlZCB0aHJvdWdoIGFsbCBvZiB0aGUgc2VnbWVudHMsXG4gICAgLy8gd2UgY29udmVydCB0aGUgc3RyaW5nIHRvIGEgbnVtYmVyLlxuICAgIHNwZWNpZmljaXR5LnZhbCA9ICcnO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzZWdtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbaV0sXG4gICAgICAgICAgbWF0Y2g7XG5cbiAgICAgIGlmIChtYXRjaCA9IHNlZ21lbnQubWF0Y2goL146KFteXFwvXSspJC8pKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgRHluYW1pY1NlZ21lbnQobWF0Y2hbMV0pKTtcbiAgICAgICAgbmFtZXMucHVzaChtYXRjaFsxXSk7XG4gICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnMyc7XG4gICAgICB9IGVsc2UgaWYgKG1hdGNoID0gc2VnbWVudC5tYXRjaCgvXlxcKihbXlxcL10rKSQvKSkge1xuICAgICAgICByZXN1bHRzLnB1c2gobmV3IFN0YXJTZWdtZW50KG1hdGNoWzFdKSk7XG4gICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnMic7XG4gICAgICAgIG5hbWVzLnB1c2gobWF0Y2hbMV0pO1xuICAgICAgfSBlbHNlIGlmIChzZWdtZW50ID09PSBcIlwiKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgRXBzaWxvblNlZ21lbnQoKSk7XG4gICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnMSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHRzLnB1c2gobmV3IFN0YXRpY1NlZ21lbnQoc2VnbWVudCkpO1xuICAgICAgICBzcGVjaWZpY2l0eS52YWwgKz0gJzQnO1xuICAgICAgfVxuICAgIH1cblxuICAgIHNwZWNpZmljaXR5LnZhbCA9ICtzcGVjaWZpY2l0eS52YWw7XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIC8vIEEgU3RhdGUgaGFzIGEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gYW5kIChgY2hhclNwZWNgKSBhbmQgYSBsaXN0IG9mIHBvc3NpYmxlXG4gIC8vIHN1YnNlcXVlbnQgc3RhdGVzIChgbmV4dFN0YXRlc2ApLlxuICAvL1xuICAvLyBJZiBhIFN0YXRlIGlzIGFuIGFjY2VwdGluZyBzdGF0ZSwgaXQgd2lsbCBhbHNvIGhhdmUgc2V2ZXJhbCBhZGRpdGlvbmFsXG4gIC8vIHByb3BlcnRpZXM6XG4gIC8vXG4gIC8vICogYHJlZ2V4YDogQSByZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBpcyB1c2VkIHRvIGV4dHJhY3QgcGFyYW1ldGVycyBmcm9tIHBhdGhzXG4gIC8vICAgdGhhdCByZWFjaGVkIHRoaXMgYWNjZXB0aW5nIHN0YXRlLlxuICAvLyAqIGBoYW5kbGVyc2A6IEluZm9ybWF0aW9uIG9uIGhvdyB0byBjb252ZXJ0IHRoZSBsaXN0IG9mIGNhcHR1cmVzIGludG8gY2FsbHNcbiAgLy8gICB0byByZWdpc3RlcmVkIGhhbmRsZXJzIHdpdGggdGhlIHNwZWNpZmllZCBwYXJhbWV0ZXJzXG4gIC8vICogYHR5cGVzYDogSG93IG1hbnkgc3RhdGljLCBkeW5hbWljIG9yIHN0YXIgc2VnbWVudHMgaW4gdGhpcyByb3V0ZS4gVXNlZCB0b1xuICAvLyAgIGRlY2lkZSB3aGljaCByb3V0ZSB0byB1c2UgaWYgbXVsdGlwbGUgcmVnaXN0ZXJlZCByb3V0ZXMgbWF0Y2ggYSBwYXRoLlxuICAvL1xuICAvLyBDdXJyZW50bHksIFN0YXRlIGlzIGltcGxlbWVudGVkIG5haXZlbHkgYnkgbG9vcGluZyBvdmVyIGBuZXh0U3RhdGVzYCBhbmRcbiAgLy8gY29tcGFyaW5nIGEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gYWdhaW5zdCBhIGNoYXJhY3Rlci4gQSBtb3JlIGVmZmljaWVudFxuICAvLyBpbXBsZW1lbnRhdGlvbiB3b3VsZCB1c2UgYSBoYXNoIG9mIGtleXMgcG9pbnRpbmcgYXQgb25lIG9yIG1vcmUgbmV4dCBzdGF0ZXMuXG5cbiAgZnVuY3Rpb24gU3RhdGUoY2hhclNwZWMpIHtcbiAgICB0aGlzLmNoYXJTcGVjID0gY2hhclNwZWM7XG4gICAgdGhpcy5uZXh0U3RhdGVzID0gW107XG4gIH1cblxuICBTdGF0ZS5wcm90b3R5cGUgPSB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoY2hhclNwZWMpIHtcbiAgICAgIHZhciBuZXh0U3RhdGVzID0gdGhpcy5uZXh0U3RhdGVzO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5leHRTdGF0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBjaGlsZCA9IG5leHRTdGF0ZXNbaV07XG5cbiAgICAgICAgdmFyIGlzRXF1YWwgPSBjaGlsZC5jaGFyU3BlYy52YWxpZENoYXJzID09PSBjaGFyU3BlYy52YWxpZENoYXJzO1xuICAgICAgICBpc0VxdWFsID0gaXNFcXVhbCAmJiBjaGlsZC5jaGFyU3BlYy5pbnZhbGlkQ2hhcnMgPT09IGNoYXJTcGVjLmludmFsaWRDaGFycztcblxuICAgICAgICBpZiAoaXNFcXVhbCkge1xuICAgICAgICAgIHJldHVybiBjaGlsZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBwdXQ6IGZ1bmN0aW9uIHB1dChjaGFyU3BlYykge1xuICAgICAgdmFyIHN0YXRlO1xuXG4gICAgICAvLyBJZiB0aGUgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gYWxyZWFkeSBleGlzdHMgaW4gYSBjaGlsZCBvZiB0aGUgY3VycmVudFxuICAgICAgLy8gc3RhdGUsIGp1c3QgcmV0dXJuIHRoYXQgc3RhdGUuXG4gICAgICBpZiAoc3RhdGUgPSB0aGlzLmdldChjaGFyU3BlYykpIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIGEgbmV3IHN0YXRlIGZvciB0aGUgY2hhcmFjdGVyIHNwZWNcbiAgICAgIHN0YXRlID0gbmV3IFN0YXRlKGNoYXJTcGVjKTtcblxuICAgICAgLy8gSW5zZXJ0IHRoZSBuZXcgc3RhdGUgYXMgYSBjaGlsZCBvZiB0aGUgY3VycmVudCBzdGF0ZVxuICAgICAgdGhpcy5uZXh0U3RhdGVzLnB1c2goc3RhdGUpO1xuXG4gICAgICAvLyBJZiB0aGlzIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIHJlcGVhdHMsIGluc2VydCB0aGUgbmV3IHN0YXRlIGFzIGEgY2hpbGRcbiAgICAgIC8vIG9mIGl0c2VsZi4gTm90ZSB0aGF0IHRoaXMgd2lsbCBub3QgdHJpZ2dlciBhbiBpbmZpbml0ZSBsb29wIGJlY2F1c2UgZWFjaFxuICAgICAgLy8gdHJhbnNpdGlvbiBkdXJpbmcgcmVjb2duaXRpb24gY29uc3VtZXMgYSBjaGFyYWN0ZXIuXG4gICAgICBpZiAoY2hhclNwZWMucmVwZWF0KSB7XG4gICAgICAgIHN0YXRlLm5leHRTdGF0ZXMucHVzaChzdGF0ZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJldHVybiB0aGUgbmV3IHN0YXRlXG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfSxcblxuICAgIC8vIEZpbmQgYSBsaXN0IG9mIGNoaWxkIHN0YXRlcyBtYXRjaGluZyB0aGUgbmV4dCBjaGFyYWN0ZXJcbiAgICBtYXRjaDogZnVuY3Rpb24gbWF0Y2goY2gpIHtcbiAgICAgIC8vIERFQlVHIFwiUHJvY2Vzc2luZyBgXCIgKyBjaCArIFwiYDpcIlxuICAgICAgdmFyIG5leHRTdGF0ZXMgPSB0aGlzLm5leHRTdGF0ZXMsXG4gICAgICAgICAgY2hpbGQsXG4gICAgICAgICAgY2hhclNwZWMsXG4gICAgICAgICAgY2hhcnM7XG5cbiAgICAgIC8vIERFQlVHIFwiICBcIiArIGRlYnVnU3RhdGUodGhpcylcbiAgICAgIHZhciByZXR1cm5lZCA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5leHRTdGF0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGNoaWxkID0gbmV4dFN0YXRlc1tpXTtcblxuICAgICAgICBjaGFyU3BlYyA9IGNoaWxkLmNoYXJTcGVjO1xuXG4gICAgICAgIGlmICh0eXBlb2YgKGNoYXJzID0gY2hhclNwZWMudmFsaWRDaGFycykgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaWYgKGNoYXJzLmluZGV4T2YoY2gpICE9PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuZWQucHVzaChjaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiAoY2hhcnMgPSBjaGFyU3BlYy5pbnZhbGlkQ2hhcnMpICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGlmIChjaGFycy5pbmRleE9mKGNoKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybmVkLnB1c2goY2hpbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmV0dXJuZWQ7XG4gICAgfVxuXG4gICAgLyoqIElGIERFQlVHXG4gICAgLCBkZWJ1ZzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY2hhclNwZWMgPSB0aGlzLmNoYXJTcGVjLFxuICAgICAgICAgIGRlYnVnID0gXCJbXCIsXG4gICAgICAgICAgY2hhcnMgPSBjaGFyU3BlYy52YWxpZENoYXJzIHx8IGNoYXJTcGVjLmludmFsaWRDaGFycztcbiAgICAgICBpZiAoY2hhclNwZWMuaW52YWxpZENoYXJzKSB7IGRlYnVnICs9IFwiXlwiOyB9XG4gICAgICBkZWJ1ZyArPSBjaGFycztcbiAgICAgIGRlYnVnICs9IFwiXVwiO1xuICAgICAgIGlmIChjaGFyU3BlYy5yZXBlYXQpIHsgZGVidWcgKz0gXCIrXCI7IH1cbiAgICAgICByZXR1cm4gZGVidWc7XG4gICAgfVxuICAgIEVORCBJRiAqKi9cbiAgfTtcblxuICAvKiogSUYgREVCVUdcbiAgZnVuY3Rpb24gZGVidWcobG9nKSB7XG4gICAgY29uc29sZS5sb2cobG9nKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlYnVnU3RhdGUoc3RhdGUpIHtcbiAgICByZXR1cm4gc3RhdGUubmV4dFN0YXRlcy5tYXAoZnVuY3Rpb24obikge1xuICAgICAgaWYgKG4ubmV4dFN0YXRlcy5sZW5ndGggPT09IDApIHsgcmV0dXJuIFwiKCBcIiArIG4uZGVidWcoKSArIFwiIFthY2NlcHRpbmddIClcIjsgfVxuICAgICAgcmV0dXJuIFwiKCBcIiArIG4uZGVidWcoKSArIFwiIDx0aGVuPiBcIiArIG4ubmV4dFN0YXRlcy5tYXAoZnVuY3Rpb24ocykgeyByZXR1cm4gcy5kZWJ1ZygpIH0pLmpvaW4oXCIgb3IgXCIpICsgXCIgKVwiO1xuICAgIH0pLmpvaW4oXCIsIFwiKVxuICB9XG4gIEVORCBJRiAqKi9cblxuICAvLyBTb3J0IHRoZSByb3V0ZXMgYnkgc3BlY2lmaWNpdHlcbiAgZnVuY3Rpb24gc29ydFNvbHV0aW9ucyhzdGF0ZXMpIHtcbiAgICByZXR1cm4gc3RhdGVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiBiLnNwZWNpZmljaXR5LnZhbCAtIGEuc3BlY2lmaWNpdHkudmFsO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVjb2duaXplQ2hhcihzdGF0ZXMsIGNoKSB7XG4gICAgdmFyIG5leHRTdGF0ZXMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gc3RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIHN0YXRlID0gc3RhdGVzW2ldO1xuXG4gICAgICBuZXh0U3RhdGVzID0gbmV4dFN0YXRlcy5jb25jYXQoc3RhdGUubWF0Y2goY2gpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV4dFN0YXRlcztcbiAgfVxuXG4gIHZhciBvQ3JlYXRlID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbiAocHJvdG8pIHtcbiAgICBmdW5jdGlvbiBGKCkge31cbiAgICBGLnByb3RvdHlwZSA9IHByb3RvO1xuICAgIHJldHVybiBuZXcgRigpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIFJlY29nbml6ZVJlc3VsdHMocXVlcnlQYXJhbXMpIHtcbiAgICB0aGlzLnF1ZXJ5UGFyYW1zID0gcXVlcnlQYXJhbXMgfHwge307XG4gIH1cbiAgUmVjb2duaXplUmVzdWx0cy5wcm90b3R5cGUgPSBvQ3JlYXRlKHtcbiAgICBzcGxpY2U6IEFycmF5LnByb3RvdHlwZS5zcGxpY2UsXG4gICAgc2xpY2U6IEFycmF5LnByb3RvdHlwZS5zbGljZSxcbiAgICBwdXNoOiBBcnJheS5wcm90b3R5cGUucHVzaCxcbiAgICBsZW5ndGg6IDAsXG4gICAgcXVlcnlQYXJhbXM6IG51bGxcbiAgfSk7XG5cbiAgZnVuY3Rpb24gZmluZEhhbmRsZXIoc3RhdGUsIHBhdGgsIHF1ZXJ5UGFyYW1zKSB7XG4gICAgdmFyIGhhbmRsZXJzID0gc3RhdGUuaGFuZGxlcnMsXG4gICAgICAgIHJlZ2V4ID0gc3RhdGUucmVnZXg7XG4gICAgdmFyIGNhcHR1cmVzID0gcGF0aC5tYXRjaChyZWdleCksXG4gICAgICAgIGN1cnJlbnRDYXB0dXJlID0gMTtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IFJlY29nbml6ZVJlc3VsdHMocXVlcnlQYXJhbXMpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBoYW5kbGVyID0gaGFuZGxlcnNbaV0sXG4gICAgICAgICAgbmFtZXMgPSBoYW5kbGVyLm5hbWVzLFxuICAgICAgICAgIHBhcmFtcyA9IHt9O1xuXG4gICAgICBmb3IgKHZhciBqID0gMCwgbSA9IG5hbWVzLmxlbmd0aDsgaiA8IG07IGorKykge1xuICAgICAgICBwYXJhbXNbbmFtZXNbal1dID0gY2FwdHVyZXNbY3VycmVudENhcHR1cmUrK107XG4gICAgICB9XG5cbiAgICAgIHJlc3VsdC5wdXNoKHsgaGFuZGxlcjogaGFuZGxlci5oYW5kbGVyLCBwYXJhbXM6IHBhcmFtcywgaXNEeW5hbWljOiAhIW5hbWVzLmxlbmd0aCB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkU2VnbWVudChjdXJyZW50U3RhdGUsIHNlZ21lbnQpIHtcbiAgICBzZWdtZW50LmVhY2hDaGFyKGZ1bmN0aW9uIChjaCkge1xuICAgICAgdmFyIHN0YXRlO1xuXG4gICAgICBjdXJyZW50U3RhdGUgPSBjdXJyZW50U3RhdGUucHV0KGNoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBjdXJyZW50U3RhdGU7XG4gIH1cblxuICBmdW5jdGlvbiBkZWNvZGVRdWVyeVBhcmFtUGFydChwYXJ0KSB7XG4gICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDQwMS9pbnRlcmFjdC9mb3Jtcy5odG1sI2gtMTcuMTMuNC4xXG4gICAgcGFydCA9IHBhcnQucmVwbGFjZSgvXFwrL2dtLCAnJTIwJyk7XG4gICAgcmV0dXJuIHRyeURlY29kZShwYXJ0LCB0cnVlKTtcbiAgfVxuXG4gIC8vIFRoZSBtYWluIGludGVyZmFjZVxuXG4gIHZhciBSb3V0ZVJlY29nbml6ZXIgPSBmdW5jdGlvbiBSb3V0ZVJlY29nbml6ZXIoKSB7XG4gICAgdGhpcy5yb290U3RhdGUgPSBuZXcgU3RhdGUoKTtcbiAgICB0aGlzLm5hbWVzID0ge307XG4gIH07XG5cbiAgUm91dGVSZWNvZ25pemVyLnByb3RvdHlwZSA9IHtcbiAgICBhZGQ6IGZ1bmN0aW9uIGFkZChyb3V0ZXMsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBjdXJyZW50U3RhdGUgPSB0aGlzLnJvb3RTdGF0ZSxcbiAgICAgICAgICByZWdleCA9IFwiXlwiLFxuICAgICAgICAgIHNwZWNpZmljaXR5ID0ge30sXG4gICAgICAgICAgaGFuZGxlcnMgPSBbXSxcbiAgICAgICAgICBhbGxTZWdtZW50cyA9IFtdLFxuICAgICAgICAgIG5hbWU7XG5cbiAgICAgIHZhciBpc0VtcHR5ID0gdHJ1ZTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSByb3V0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciByb3V0ZSA9IHJvdXRlc1tpXSxcbiAgICAgICAgICAgIG5hbWVzID0gW107XG5cbiAgICAgICAgdmFyIHNlZ21lbnRzID0gcGFyc2Uocm91dGUucGF0aCwgbmFtZXMsIHNwZWNpZmljaXR5KTtcblxuICAgICAgICBhbGxTZWdtZW50cyA9IGFsbFNlZ21lbnRzLmNvbmNhdChzZWdtZW50cyk7XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IDAsIG0gPSBzZWdtZW50cy5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICAgICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2pdO1xuXG4gICAgICAgICAgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBFcHNpbG9uU2VnbWVudCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuXG4gICAgICAgICAgLy8gQWRkIGEgXCIvXCIgZm9yIHRoZSBuZXcgc2VnbWVudFxuICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRTdGF0ZS5wdXQoeyB2YWxpZENoYXJzOiBcIi9cIiB9KTtcbiAgICAgICAgICByZWdleCArPSBcIi9cIjtcblxuICAgICAgICAgIC8vIEFkZCBhIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBzZWdtZW50IHRvIHRoZSBORkEgYW5kIHJlZ2V4XG4gICAgICAgICAgY3VycmVudFN0YXRlID0gYWRkU2VnbWVudChjdXJyZW50U3RhdGUsIHNlZ21lbnQpO1xuICAgICAgICAgIHJlZ2V4ICs9IHNlZ21lbnQucmVnZXgoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoYW5kbGVyID0geyBoYW5kbGVyOiByb3V0ZS5oYW5kbGVyLCBuYW1lczogbmFtZXMgfTtcbiAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzRW1wdHkpIHtcbiAgICAgICAgY3VycmVudFN0YXRlID0gY3VycmVudFN0YXRlLnB1dCh7IHZhbGlkQ2hhcnM6IFwiL1wiIH0pO1xuICAgICAgICByZWdleCArPSBcIi9cIjtcbiAgICAgIH1cblxuICAgICAgY3VycmVudFN0YXRlLmhhbmRsZXJzID0gaGFuZGxlcnM7XG4gICAgICBjdXJyZW50U3RhdGUucmVnZXggPSBuZXcgUmVnRXhwKHJlZ2V4ICsgXCIkXCIpO1xuICAgICAgY3VycmVudFN0YXRlLnNwZWNpZmljaXR5ID0gc3BlY2lmaWNpdHk7XG5cbiAgICAgIGlmIChuYW1lID0gb3B0aW9ucyAmJiBvcHRpb25zLmFzKSB7XG4gICAgICAgIHRoaXMubmFtZXNbbmFtZV0gPSB7XG4gICAgICAgICAgc2VnbWVudHM6IGFsbFNlZ21lbnRzLFxuICAgICAgICAgIGhhbmRsZXJzOiBoYW5kbGVyc1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBoYW5kbGVyc0ZvcjogZnVuY3Rpb24gaGFuZGxlcnNGb3IobmFtZSkge1xuICAgICAgdmFyIHJvdXRlID0gdGhpcy5uYW1lc1tuYW1lXSxcbiAgICAgICAgICByZXN1bHQgPSBbXTtcbiAgICAgIGlmICghcm91dGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgbm8gcm91dGUgbmFtZWQgXCIgKyBuYW1lKTtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSByb3V0ZS5oYW5kbGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgcmVzdWx0LnB1c2gocm91dGUuaGFuZGxlcnNbaV0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICBoYXNSb3V0ZTogZnVuY3Rpb24gaGFzUm91dGUobmFtZSkge1xuICAgICAgcmV0dXJuICEhdGhpcy5uYW1lc1tuYW1lXTtcbiAgICB9LFxuXG4gICAgZ2VuZXJhdGU6IGZ1bmN0aW9uIGdlbmVyYXRlKG5hbWUsIHBhcmFtcykge1xuICAgICAgdmFyIHJvdXRlID0gdGhpcy5uYW1lc1tuYW1lXSxcbiAgICAgICAgICBvdXRwdXQgPSBcIlwiO1xuICAgICAgaWYgKCFyb3V0ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGVyZSBpcyBubyByb3V0ZSBuYW1lZCBcIiArIG5hbWUpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2VnbWVudHMgPSByb3V0ZS5zZWdtZW50cztcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzZWdtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50c1tpXTtcblxuICAgICAgICBpZiAoc2VnbWVudCBpbnN0YW5jZW9mIEVwc2lsb25TZWdtZW50KSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBvdXRwdXQgKz0gXCIvXCI7XG4gICAgICAgIG91dHB1dCArPSBzZWdtZW50LmdlbmVyYXRlKHBhcmFtcyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvdXRwdXQuY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgICAgb3V0cHV0ID0gJy8nICsgb3V0cHV0O1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5xdWVyeVBhcmFtcykge1xuICAgICAgICBvdXRwdXQgKz0gdGhpcy5nZW5lcmF0ZVF1ZXJ5U3RyaW5nKHBhcmFtcy5xdWVyeVBhcmFtcyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfSxcblxuICAgIGdlbmVyYXRlUXVlcnlTdHJpbmc6IGZ1bmN0aW9uIGdlbmVyYXRlUXVlcnlTdHJpbmcocGFyYW1zKSB7XG4gICAgICB2YXIgcGFpcnMgPSBbXTtcbiAgICAgIHZhciBrZXlzID0gW107XG4gICAgICBmb3IgKHZhciBrZXkgaW4gcGFyYW1zKSB7XG4gICAgICAgIGlmIChwYXJhbXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBrZXlzLnNvcnQoKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBrZXlzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgIHZhciB2YWx1ZSA9IHBhcmFtc1trZXldO1xuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYWlyID0gZW5jb2RlVVJJQ29tcG9uZW50KGtleSk7XG4gICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgIGZvciAodmFyIGogPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBqIDwgbDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgYXJyYXlQYWlyID0ga2V5ICsgJ1tdJyArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZVtqXSk7XG4gICAgICAgICAgICBwYWlycy5wdXNoKGFycmF5UGFpcik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhaXIgKz0gXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuICAgICAgICAgIHBhaXJzLnB1c2gocGFpcik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHBhaXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBcIj9cIiArIHBhaXJzLmpvaW4oXCImXCIpO1xuICAgIH0sXG5cbiAgICBwYXJzZVF1ZXJ5U3RyaW5nOiBmdW5jdGlvbiBwYXJzZVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nKSB7XG4gICAgICB2YXIgcGFpcnMgPSBxdWVyeVN0cmluZy5zcGxpdChcIiZcIiksXG4gICAgICAgICAgcXVlcnlQYXJhbXMgPSB7fTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFpcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHBhaXIgPSBwYWlyc1tpXS5zcGxpdCgnPScpLFxuICAgICAgICAgICAga2V5ID0gZGVjb2RlUXVlcnlQYXJhbVBhcnQocGFpclswXSksXG4gICAgICAgICAgICBrZXlMZW5ndGggPSBrZXkubGVuZ3RoLFxuICAgICAgICAgICAgaXNBcnJheSA9IGZhbHNlLFxuICAgICAgICAgICAgdmFsdWU7XG4gICAgICAgIGlmIChwYWlyLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIHZhbHVlID0gJ3RydWUnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vSGFuZGxlIGFycmF5c1xuICAgICAgICAgIGlmIChrZXlMZW5ndGggPiAyICYmIGtleS5zbGljZShrZXlMZW5ndGggLSAyKSA9PT0gJ1tdJykge1xuICAgICAgICAgICAgaXNBcnJheSA9IHRydWU7XG4gICAgICAgICAgICBrZXkgPSBrZXkuc2xpY2UoMCwga2V5TGVuZ3RoIC0gMik7XG4gICAgICAgICAgICBpZiAoIXF1ZXJ5UGFyYW1zW2tleV0pIHtcbiAgICAgICAgICAgICAgcXVlcnlQYXJhbXNba2V5XSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB2YWx1ZSA9IHBhaXJbMV0gPyBkZWNvZGVRdWVyeVBhcmFtUGFydChwYWlyWzFdKSA6ICcnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FycmF5KSB7XG4gICAgICAgICAgcXVlcnlQYXJhbXNba2V5XS5wdXNoKHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBxdWVyeVBhcmFtc1trZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBxdWVyeVBhcmFtcztcbiAgICB9LFxuXG4gICAgcmVjb2duaXplOiBmdW5jdGlvbiByZWNvZ25pemUocGF0aCwgc2lsZW50KSB7XG4gICAgICBub1dhcm5pbmcgPSBzaWxlbnQ7XG4gICAgICB2YXIgc3RhdGVzID0gW3RoaXMucm9vdFN0YXRlXSxcbiAgICAgICAgICBwYXRoTGVuLFxuICAgICAgICAgIGksXG4gICAgICAgICAgbCxcbiAgICAgICAgICBxdWVyeVN0YXJ0LFxuICAgICAgICAgIHF1ZXJ5UGFyYW1zID0ge30sXG4gICAgICAgICAgaXNTbGFzaERyb3BwZWQgPSBmYWxzZTtcblxuICAgICAgcXVlcnlTdGFydCA9IHBhdGguaW5kZXhPZignPycpO1xuICAgICAgaWYgKHF1ZXJ5U3RhcnQgIT09IC0xKSB7XG4gICAgICAgIHZhciBxdWVyeVN0cmluZyA9IHBhdGguc3Vic3RyKHF1ZXJ5U3RhcnQgKyAxLCBwYXRoLmxlbmd0aCk7XG4gICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cigwLCBxdWVyeVN0YXJ0KTtcbiAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbXMgPSB0aGlzLnBhcnNlUXVlcnlTdHJpbmcocXVlcnlTdHJpbmcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHBhdGggPSB0cnlEZWNvZGUocGF0aCk7XG4gICAgICBpZiAoIXBhdGgpIHJldHVybjtcblxuICAgICAgLy8gREVCVUcgR1JPVVAgcGF0aFxuXG4gICAgICBpZiAocGF0aC5jaGFyQXQoMCkgIT09IFwiL1wiKSB7XG4gICAgICAgIHBhdGggPSBcIi9cIiArIHBhdGg7XG4gICAgICB9XG5cbiAgICAgIHBhdGhMZW4gPSBwYXRoLmxlbmd0aDtcbiAgICAgIGlmIChwYXRoTGVuID4gMSAmJiBwYXRoLmNoYXJBdChwYXRoTGVuIC0gMSkgPT09IFwiL1wiKSB7XG4gICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cigwLCBwYXRoTGVuIC0gMSk7XG4gICAgICAgIGlzU2xhc2hEcm9wcGVkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgZm9yIChpID0gMCwgbCA9IHBhdGgubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHN0YXRlcyA9IHJlY29nbml6ZUNoYXIoc3RhdGVzLCBwYXRoLmNoYXJBdChpKSk7XG4gICAgICAgIGlmICghc3RhdGVzLmxlbmd0aCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEVORCBERUJVRyBHUk9VUFxuXG4gICAgICB2YXIgc29sdXRpb25zID0gW107XG4gICAgICBmb3IgKGkgPSAwLCBsID0gc3RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoc3RhdGVzW2ldLmhhbmRsZXJzKSB7XG4gICAgICAgICAgc29sdXRpb25zLnB1c2goc3RhdGVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzdGF0ZXMgPSBzb3J0U29sdXRpb25zKHNvbHV0aW9ucyk7XG5cbiAgICAgIHZhciBzdGF0ZSA9IHNvbHV0aW9uc1swXTtcblxuICAgICAgaWYgKHN0YXRlICYmIHN0YXRlLmhhbmRsZXJzKSB7XG4gICAgICAgIC8vIGlmIGEgdHJhaWxpbmcgc2xhc2ggd2FzIGRyb3BwZWQgYW5kIGEgc3RhciBzZWdtZW50IGlzIHRoZSBsYXN0IHNlZ21lbnRcbiAgICAgICAgLy8gc3BlY2lmaWVkLCBwdXQgdGhlIHRyYWlsaW5nIHNsYXNoIGJhY2tcbiAgICAgICAgaWYgKGlzU2xhc2hEcm9wcGVkICYmIHN0YXRlLnJlZ2V4LnNvdXJjZS5zbGljZSgtNSkgPT09IFwiKC4rKSRcIikge1xuICAgICAgICAgIHBhdGggPSBwYXRoICsgXCIvXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbmRIYW5kbGVyKHN0YXRlLCBwYXRoLCBxdWVyeVBhcmFtcyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIFJvdXRlUmVjb2duaXplci5wcm90b3R5cGUubWFwID0gbWFwO1xuXG4gIHZhciBnZW5RdWVyeSA9IFJvdXRlUmVjb2duaXplci5wcm90b3R5cGUuZ2VuZXJhdGVRdWVyeVN0cmluZztcblxuICAvLyBleHBvcnQgZGVmYXVsdCBmb3IgaG9sZGluZyB0aGUgVnVlIHJlZmVyZW5jZVxuICB2YXIgZXhwb3J0cyQxID0ge307XG4gIC8qKlxuICAgKiBXYXJuIHN0dWZmLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbXNnXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHdhcm4kMShtc2cpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1t2dWUtcm91dGVyXSAnICsgbXNnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzb2x2ZSBhIHJlbGF0aXZlIHBhdGguXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBiYXNlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSByZWxhdGl2ZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGFwcGVuZFxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlc29sdmVQYXRoKGJhc2UsIHJlbGF0aXZlLCBhcHBlbmQpIHtcbiAgICB2YXIgcXVlcnkgPSBiYXNlLm1hdGNoKC8oXFw/LiopJC8pO1xuICAgIGlmIChxdWVyeSkge1xuICAgICAgcXVlcnkgPSBxdWVyeVsxXTtcbiAgICAgIGJhc2UgPSBiYXNlLnNsaWNlKDAsIC1xdWVyeS5sZW5ndGgpO1xuICAgIH1cbiAgICAvLyBhIHF1ZXJ5IVxuICAgIGlmIChyZWxhdGl2ZS5jaGFyQXQoMCkgPT09ICc/Jykge1xuICAgICAgcmV0dXJuIGJhc2UgKyByZWxhdGl2ZTtcbiAgICB9XG4gICAgdmFyIHN0YWNrID0gYmFzZS5zcGxpdCgnLycpO1xuICAgIC8vIHJlbW92ZSB0cmFpbGluZyBzZWdtZW50IGlmOlxuICAgIC8vIC0gbm90IGFwcGVuZGluZ1xuICAgIC8vIC0gYXBwZW5kaW5nIHRvIHRyYWlsaW5nIHNsYXNoIChsYXN0IHNlZ21lbnQgaXMgZW1wdHkpXG4gICAgaWYgKCFhcHBlbmQgfHwgIXN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdKSB7XG4gICAgICBzdGFjay5wb3AoKTtcbiAgICB9XG4gICAgLy8gcmVzb2x2ZSByZWxhdGl2ZSBwYXRoXG4gICAgdmFyIHNlZ21lbnRzID0gcmVsYXRpdmUucmVwbGFjZSgvXlxcLy8sICcnKS5zcGxpdCgnLycpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbaV07XG4gICAgICBpZiAoc2VnbWVudCA9PT0gJy4nKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIGlmIChzZWdtZW50ID09PSAnLi4nKSB7XG4gICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhY2sucHVzaChzZWdtZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gZW5zdXJlIGxlYWRpbmcgc2xhc2hcbiAgICBpZiAoc3RhY2tbMF0gIT09ICcnKSB7XG4gICAgICBzdGFjay51bnNoaWZ0KCcnKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YWNrLmpvaW4oJy8nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JnaXZpbmcgY2hlY2sgZm9yIGEgcHJvbWlzZVxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gcFxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cblxuICBmdW5jdGlvbiBpc1Byb21pc2UocCkge1xuICAgIHJldHVybiBwICYmIHR5cGVvZiBwLnRoZW4gPT09ICdmdW5jdGlvbic7XG4gIH1cblxuICAvKipcbiAgICogUmV0cml2ZSBhIHJvdXRlIGNvbmZpZyBmaWVsZCBmcm9tIGEgY29tcG9uZW50IGluc3RhbmNlXG4gICAqIE9SIGEgY29tcG9uZW50IGNvbnRydWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb258VnVlfSBjb21wb25lbnRcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7Kn1cbiAgICovXG5cbiAgZnVuY3Rpb24gZ2V0Um91dGVDb25maWcoY29tcG9uZW50LCBuYW1lKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBjb21wb25lbnQgJiYgKGNvbXBvbmVudC4kb3B0aW9ucyB8fCBjb21wb25lbnQub3B0aW9ucyk7XG4gICAgcmV0dXJuIG9wdGlvbnMgJiYgb3B0aW9ucy5yb3V0ZSAmJiBvcHRpb25zLnJvdXRlW25hbWVdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc29sdmUgYW4gYXN5bmMgY29tcG9uZW50IGZhY3RvcnkuIEhhdmUgdG8gZG8gYSBkaXJ0eVxuICAgKiBtb2NrIGhlcmUgYmVjYXVzZSBvZiBWdWUgY29yZSdzIGludGVybmFsIEFQSSBkZXBlbmRzIG9uXG4gICAqIGFuIElEIGNoZWNrLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgKi9cblxuICB2YXIgcmVzb2x2ZXIgPSB1bmRlZmluZWQ7XG5cbiAgZnVuY3Rpb24gcmVzb2x2ZUFzeW5jQ29tcG9uZW50KGhhbmRsZXIsIGNiKSB7XG4gICAgaWYgKCFyZXNvbHZlcikge1xuICAgICAgcmVzb2x2ZXIgPSB7XG4gICAgICAgIHJlc29sdmU6IGV4cG9ydHMkMS5WdWUucHJvdG90eXBlLl9yZXNvbHZlQ29tcG9uZW50LFxuICAgICAgICAkb3B0aW9uczoge1xuICAgICAgICAgIGNvbXBvbmVudHM6IHtcbiAgICAgICAgICAgIF86IGhhbmRsZXIuY29tcG9uZW50XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNvbHZlci4kb3B0aW9ucy5jb21wb25lbnRzLl8gPSBoYW5kbGVyLmNvbXBvbmVudDtcbiAgICB9XG4gICAgcmVzb2x2ZXIucmVzb2x2ZSgnXycsIGZ1bmN0aW9uIChDb21wb25lbnQpIHtcbiAgICAgIGhhbmRsZXIuY29tcG9uZW50ID0gQ29tcG9uZW50O1xuICAgICAgY2IoQ29tcG9uZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXAgdGhlIGR5bmFtaWMgc2VnbWVudHMgaW4gYSBwYXRoIHRvIHBhcmFtcy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtc1xuICAgKiBAcGFyYW0ge09iamVjdH0gcXVlcnlcbiAgICovXG5cbiAgZnVuY3Rpb24gbWFwUGFyYW1zKHBhdGgsIHBhcmFtcywgcXVlcnkpIHtcbiAgICBpZiAocGFyYW1zID09PSB1bmRlZmluZWQpIHBhcmFtcyA9IHt9O1xuXG4gICAgcGF0aCA9IHBhdGgucmVwbGFjZSgvOihbXlxcL10rKS9nLCBmdW5jdGlvbiAoXywga2V5KSB7XG4gICAgICB2YXIgdmFsID0gcGFyYW1zW2tleV07XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICghdmFsKSB7XG4gICAgICAgIHdhcm4kMSgncGFyYW0gXCInICsga2V5ICsgJ1wiIG5vdCBmb3VuZCB3aGVuIGdlbmVyYXRpbmcgJyArICdwYXRoIGZvciBcIicgKyBwYXRoICsgJ1wiIHdpdGggcGFyYW1zICcgKyBKU09OLnN0cmluZ2lmeShwYXJhbXMpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWwgfHwgJyc7XG4gICAgfSk7XG4gICAgaWYgKHF1ZXJ5KSB7XG4gICAgICBwYXRoICs9IGdlblF1ZXJ5KHF1ZXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGg7XG4gIH1cblxuICB2YXIgaGFzaFJFID0gLyMuKiQvO1xuXG4gIHZhciBIVE1MNUhpc3RvcnkgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEhUTUw1SGlzdG9yeShfcmVmKSB7XG4gICAgICB2YXIgcm9vdCA9IF9yZWYucm9vdDtcbiAgICAgIHZhciBvbkNoYW5nZSA9IF9yZWYub25DaGFuZ2U7XG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgSFRNTDVIaXN0b3J5KTtcblxuICAgICAgaWYgKHJvb3QgJiYgcm9vdCAhPT0gJy8nKSB7XG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0aGVyZSdzIHRoZSBzdGFydGluZyBzbGFzaFxuICAgICAgICBpZiAocm9vdC5jaGFyQXQoMCkgIT09ICcvJykge1xuICAgICAgICAgIHJvb3QgPSAnLycgKyByb290O1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlbW92ZSB0cmFpbGluZyBzbGFzaFxuICAgICAgICB0aGlzLnJvb3QgPSByb290LnJlcGxhY2UoL1xcLyQvLCAnJyk7XG4gICAgICAgIHRoaXMucm9vdFJFID0gbmV3IFJlZ0V4cCgnXlxcXFwnICsgdGhpcy5yb290KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucm9vdCA9IG51bGw7XG4gICAgICB9XG4gICAgICB0aGlzLm9uQ2hhbmdlID0gb25DaGFuZ2U7XG4gICAgICAvLyBjaGVjayBiYXNlIHRhZ1xuICAgICAgdmFyIGJhc2VFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Jhc2UnKTtcbiAgICAgIHRoaXMuYmFzZSA9IGJhc2VFbCAmJiBiYXNlRWwuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG4gICAgfVxuXG4gICAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciB1cmwgPSBsb2NhdGlvbi5wYXRobmFtZSArIGxvY2F0aW9uLnNlYXJjaDtcbiAgICAgICAgaWYgKF90aGlzLnJvb3QpIHtcbiAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZShfdGhpcy5yb290UkUsICcnKTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5vbkNoYW5nZSh1cmwsIGUgJiYgZS5zdGF0ZSwgbG9jYXRpb24uaGFzaCk7XG4gICAgICB9O1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5saXN0ZW5lcik7XG4gICAgICB0aGlzLmxpc3RlbmVyKCk7XG4gICAgfTtcblxuICAgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICB9O1xuXG4gICAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvKHBhdGgsIHJlcGxhY2UsIGFwcGVuZCkge1xuICAgICAgdmFyIHVybCA9IHRoaXMuZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpO1xuICAgICAgaWYgKHJlcGxhY2UpIHtcbiAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sICcnLCB1cmwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcmVjb3JkIHNjcm9sbCBwb3NpdGlvbiBieSByZXBsYWNpbmcgY3VycmVudCBzdGF0ZVxuICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZSh7XG4gICAgICAgICAgcG9zOiB7XG4gICAgICAgICAgICB4OiB3aW5kb3cucGFnZVhPZmZzZXQsXG4gICAgICAgICAgICB5OiB3aW5kb3cucGFnZVlPZmZzZXRcbiAgICAgICAgICB9XG4gICAgICAgIH0sICcnLCBsb2NhdGlvbi5ocmVmKTtcbiAgICAgICAgLy8gdGhlbiBwdXNoIG5ldyBzdGF0ZVxuICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZSh7fSwgJycsIHVybCk7XG4gICAgICB9XG4gICAgICB2YXIgaGFzaE1hdGNoID0gcGF0aC5tYXRjaChoYXNoUkUpO1xuICAgICAgdmFyIGhhc2ggPSBoYXNoTWF0Y2ggJiYgaGFzaE1hdGNoWzBdO1xuICAgICAgcGF0aCA9IHVybFxuICAgICAgLy8gc3RyaXAgaGFzaCBzbyBpdCBkb2Vzbid0IG1lc3MgdXAgcGFyYW1zXG4gICAgICAucmVwbGFjZShoYXNoUkUsICcnKVxuICAgICAgLy8gcmVtb3ZlIHJvb3QgYmVmb3JlIG1hdGNoaW5nXG4gICAgICAucmVwbGFjZSh0aGlzLnJvb3RSRSwgJycpO1xuICAgICAgdGhpcy5vbkNoYW5nZShwYXRoLCBudWxsLCBoYXNoKTtcbiAgICB9O1xuXG4gICAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5mb3JtYXRQYXRoID0gZnVuY3Rpb24gZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpIHtcbiAgICAgIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nXG4gICAgICAvLyBhYnNvbHV0ZSBwYXRoXG4gICAgICA/IHRoaXMucm9vdCA/IHRoaXMucm9vdCArICcvJyArIHBhdGgucmVwbGFjZSgvXlxcLy8sICcnKSA6IHBhdGggOiByZXNvbHZlUGF0aCh0aGlzLmJhc2UgfHwgbG9jYXRpb24ucGF0aG5hbWUsIHBhdGgsIGFwcGVuZCk7XG4gICAgfTtcblxuICAgIHJldHVybiBIVE1MNUhpc3Rvcnk7XG4gIH0pKCk7XG5cbiAgdmFyIEhhc2hIaXN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIYXNoSGlzdG9yeShfcmVmKSB7XG4gICAgICB2YXIgaGFzaGJhbmcgPSBfcmVmLmhhc2hiYW5nO1xuICAgICAgdmFyIG9uQ2hhbmdlID0gX3JlZi5vbkNoYW5nZTtcbiAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBIYXNoSGlzdG9yeSk7XG5cbiAgICAgIHRoaXMuaGFzaGJhbmcgPSBoYXNoYmFuZztcbiAgICAgIHRoaXMub25DaGFuZ2UgPSBvbkNoYW5nZTtcbiAgICB9XG5cbiAgICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwYXRoID0gbG9jYXRpb24uaGFzaDtcbiAgICAgICAgdmFyIHJhdyA9IHBhdGgucmVwbGFjZSgvXiMhPy8sICcnKTtcbiAgICAgICAgLy8gYWx3YXlzXG4gICAgICAgIGlmIChyYXcuY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgICAgICByYXcgPSAnLycgKyByYXc7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZvcm1hdHRlZFBhdGggPSBzZWxmLmZvcm1hdFBhdGgocmF3KTtcbiAgICAgICAgaWYgKGZvcm1hdHRlZFBhdGggIT09IHBhdGgpIHtcbiAgICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKGZvcm1hdHRlZFBhdGgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBkZXRlcm1pbmUgcXVlcnlcbiAgICAgICAgLy8gbm90ZSBpdCdzIHBvc3NpYmxlIHRvIGhhdmUgcXVlcmllcyBpbiBib3RoIHRoZSBhY3R1YWwgVVJMXG4gICAgICAgIC8vIGFuZCB0aGUgaGFzaCBmcmFnbWVudCBpdHNlbGYuXG4gICAgICAgIHZhciBxdWVyeSA9IGxvY2F0aW9uLnNlYXJjaCAmJiBwYXRoLmluZGV4T2YoJz8nKSA+IC0xID8gJyYnICsgbG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpIDogbG9jYXRpb24uc2VhcmNoO1xuICAgICAgICBzZWxmLm9uQ2hhbmdlKHBhdGgucmVwbGFjZSgvXiMhPy8sICcnKSArIHF1ZXJ5KTtcbiAgICAgIH07XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuICAgICAgdGhpcy5saXN0ZW5lcigpO1xuICAgIH07XG5cbiAgICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuICAgIH07XG5cbiAgICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyhwYXRoLCByZXBsYWNlLCBhcHBlbmQpIHtcbiAgICAgIHBhdGggPSB0aGlzLmZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKTtcbiAgICAgIGlmIChyZXBsYWNlKSB7XG4gICAgICAgIGxvY2F0aW9uLnJlcGxhY2UocGF0aCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2NhdGlvbi5oYXNoID0gcGF0aDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLmZvcm1hdFBhdGggPSBmdW5jdGlvbiBmb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCkge1xuICAgICAgdmFyIGlzQWJzb2xvdXRlID0gcGF0aC5jaGFyQXQoMCkgPT09ICcvJztcbiAgICAgIHZhciBwcmVmaXggPSAnIycgKyAodGhpcy5oYXNoYmFuZyA/ICchJyA6ICcnKTtcbiAgICAgIHJldHVybiBpc0Fic29sb3V0ZSA/IHByZWZpeCArIHBhdGggOiBwcmVmaXggKyByZXNvbHZlUGF0aChsb2NhdGlvbi5oYXNoLnJlcGxhY2UoL14jIT8vLCAnJyksIHBhdGgsIGFwcGVuZCk7XG4gICAgfTtcblxuICAgIHJldHVybiBIYXNoSGlzdG9yeTtcbiAgfSkoKTtcblxuICB2YXIgQWJzdHJhY3RIaXN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBYnN0cmFjdEhpc3RvcnkoX3JlZikge1xuICAgICAgdmFyIG9uQ2hhbmdlID0gX3JlZi5vbkNoYW5nZTtcbiAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBBYnN0cmFjdEhpc3RvcnkpO1xuXG4gICAgICB0aGlzLm9uQ2hhbmdlID0gb25DaGFuZ2U7XG4gICAgICB0aGlzLmN1cnJlbnRQYXRoID0gJy8nO1xuICAgIH1cblxuICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgIHRoaXMub25DaGFuZ2UoJy8nKTtcbiAgICB9O1xuXG4gICAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gc3RvcCgpIHtcbiAgICAgIC8vIG5vb3BcbiAgICB9O1xuXG4gICAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvKHBhdGgsIHJlcGxhY2UsIGFwcGVuZCkge1xuICAgICAgcGF0aCA9IHRoaXMuY3VycmVudFBhdGggPSB0aGlzLmZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKTtcbiAgICAgIHRoaXMub25DaGFuZ2UocGF0aCk7XG4gICAgfTtcblxuICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuZm9ybWF0UGF0aCA9IGZ1bmN0aW9uIGZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKSB7XG4gICAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJyA/IHBhdGggOiByZXNvbHZlUGF0aCh0aGlzLmN1cnJlbnRQYXRoLCBwYXRoLCBhcHBlbmQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQWJzdHJhY3RIaXN0b3J5O1xuICB9KSgpO1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgdGhlIHJldXNhYmlsaXR5IG9mIGFuIGV4aXN0aW5nIHJvdXRlciB2aWV3LlxuICAgKlxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICovXG5cbiAgZnVuY3Rpb24gY2FuUmV1c2UodmlldywgaGFuZGxlciwgdHJhbnNpdGlvbikge1xuICAgIHZhciBjb21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG4gICAgaWYgKCFjb21wb25lbnQgfHwgIWhhbmRsZXIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gaW1wb3J0YW50OiBjaGVjayB2aWV3LkNvbXBvbmVudCBoZXJlIGJlY2F1c2UgaXQgbWF5XG4gICAgLy8gaGF2ZSBiZWVuIGNoYW5nZWQgaW4gYWN0aXZhdGUgaG9va1xuICAgIGlmICh2aWV3LkNvbXBvbmVudCAhPT0gaGFuZGxlci5jb21wb25lbnQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIGNhblJldXNlRm4gPSBnZXRSb3V0ZUNvbmZpZyhjb21wb25lbnQsICdjYW5SZXVzZScpO1xuICAgIHJldHVybiB0eXBlb2YgY2FuUmV1c2VGbiA9PT0gJ2Jvb2xlYW4nID8gY2FuUmV1c2VGbiA6IGNhblJldXNlRm4gPyBjYW5SZXVzZUZuLmNhbGwoY29tcG9uZW50LCB7XG4gICAgICB0bzogdHJhbnNpdGlvbi50byxcbiAgICAgIGZyb206IHRyYW5zaXRpb24uZnJvbVxuICAgIH0pIDogdHJ1ZTsgLy8gZGVmYXVsdHMgdG8gdHJ1ZVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgY29tcG9uZW50IGNhbiBkZWFjdGl2YXRlLlxuICAgKlxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dFxuICAgKi9cblxuICBmdW5jdGlvbiBjYW5EZWFjdGl2YXRlKHZpZXcsIHRyYW5zaXRpb24sIG5leHQpIHtcbiAgICB2YXIgZnJvbUNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcbiAgICB2YXIgaG9vayA9IGdldFJvdXRlQ29uZmlnKGZyb21Db21wb25lbnQsICdjYW5EZWFjdGl2YXRlJyk7XG4gICAgaWYgKCFob29rKSB7XG4gICAgICBuZXh0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyYW5zaXRpb24uY2FsbEhvb2soaG9vaywgZnJvbUNvbXBvbmVudCwgbmV4dCwge1xuICAgICAgICBleHBlY3RCb29sZWFuOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBjb21wb25lbnQgY2FuIGFjdGl2YXRlLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dFxuICAgKi9cblxuICBmdW5jdGlvbiBjYW5BY3RpdmF0ZShoYW5kbGVyLCB0cmFuc2l0aW9uLCBuZXh0KSB7XG4gICAgcmVzb2x2ZUFzeW5jQ29tcG9uZW50KGhhbmRsZXIsIGZ1bmN0aW9uIChDb21wb25lbnQpIHtcbiAgICAgIC8vIGhhdmUgdG8gY2hlY2sgZHVlIHRvIGFzeW5jLW5lc3NcbiAgICAgIGlmICh0cmFuc2l0aW9uLmFib3J0ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gZGV0ZXJtaW5lIGlmIHRoaXMgY29tcG9uZW50IGNhbiBiZSBhY3RpdmF0ZWRcbiAgICAgIHZhciBob29rID0gZ2V0Um91dGVDb25maWcoQ29tcG9uZW50LCAnY2FuQWN0aXZhdGUnKTtcbiAgICAgIGlmICghaG9vaykge1xuICAgICAgICBuZXh0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cmFuc2l0aW9uLmNhbGxIb29rKGhvb2ssIG51bGwsIG5leHQsIHtcbiAgICAgICAgICBleHBlY3RCb29sZWFuOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGwgZGVhY3RpdmF0ZSBob29rcyBmb3IgZXhpc3Rpbmcgcm91dGVyLXZpZXdzLlxuICAgKlxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dFxuICAgKi9cblxuICBmdW5jdGlvbiBkZWFjdGl2YXRlKHZpZXcsIHRyYW5zaXRpb24sIG5leHQpIHtcbiAgICB2YXIgY29tcG9uZW50ID0gdmlldy5jaGlsZFZNO1xuICAgIHZhciBob29rID0gZ2V0Um91dGVDb25maWcoY29tcG9uZW50LCAnZGVhY3RpdmF0ZScpO1xuICAgIGlmICghaG9vaykge1xuICAgICAgbmV4dCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cmFuc2l0aW9uLmNhbGxIb29rcyhob29rLCBjb21wb25lbnQsIG5leHQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZSAvIHN3aXRjaCBjb21wb25lbnQgZm9yIGEgcm91dGVyLXZpZXcuXG4gICAqXG4gICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XG4gICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuICAgKiBAcGFyYW0ge051bWJlcn0gZGVwdGhcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBmdW5jdGlvbiBhY3RpdmF0ZSh2aWV3LCB0cmFuc2l0aW9uLCBkZXB0aCwgY2IsIHJldXNlKSB7XG4gICAgdmFyIGhhbmRsZXIgPSB0cmFuc2l0aW9uLmFjdGl2YXRlUXVldWVbZGVwdGhdO1xuICAgIGlmICghaGFuZGxlcikge1xuICAgICAgc2F2ZUNoaWxkVmlldyh2aWV3KTtcbiAgICAgIGlmICh2aWV3Ll9ib3VuZCkge1xuICAgICAgICB2aWV3LnNldENvbXBvbmVudChudWxsKTtcbiAgICAgIH1cbiAgICAgIGNiICYmIGNiKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIENvbXBvbmVudCA9IHZpZXcuQ29tcG9uZW50ID0gaGFuZGxlci5jb21wb25lbnQ7XG4gICAgdmFyIGFjdGl2YXRlSG9vayA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ2FjdGl2YXRlJyk7XG4gICAgdmFyIGRhdGFIb29rID0gZ2V0Um91dGVDb25maWcoQ29tcG9uZW50LCAnZGF0YScpO1xuICAgIHZhciB3YWl0Rm9yRGF0YSA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ3dhaXRGb3JEYXRhJyk7XG5cbiAgICB2aWV3LmRlcHRoID0gZGVwdGg7XG4gICAgdmlldy5hY3RpdmF0ZWQgPSBmYWxzZTtcblxuICAgIHZhciBjb21wb25lbnQgPSB1bmRlZmluZWQ7XG4gICAgdmFyIGxvYWRpbmcgPSAhIShkYXRhSG9vayAmJiAhd2FpdEZvckRhdGEpO1xuXG4gICAgLy8gXCJyZXVzZVwiIGlzIGEgZmxhZyBwYXNzZWQgZG93biB3aGVuIHRoZSBwYXJlbnQgdmlldyBpc1xuICAgIC8vIGVpdGhlciByZXVzZWQgdmlhIGtlZXAtYWxpdmUgb3IgYXMgYSBjaGlsZCBvZiBhIGtlcHQtYWxpdmUgdmlldy5cbiAgICAvLyBvZiBjb3Vyc2Ugd2UgY2FuIG9ubHkgcmV1c2UgaWYgdGhlIGN1cnJlbnQga2VwdC1hbGl2ZSBpbnN0YW5jZVxuICAgIC8vIGlzIG9mIHRoZSBjb3JyZWN0IHR5cGUuXG4gICAgcmV1c2UgPSByZXVzZSAmJiB2aWV3LmNoaWxkVk0gJiYgdmlldy5jaGlsZFZNLmNvbnN0cnVjdG9yID09PSBDb21wb25lbnQ7XG5cbiAgICBpZiAocmV1c2UpIHtcbiAgICAgIC8vIGp1c3QgcmV1c2VcbiAgICAgIGNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcbiAgICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IGxvYWRpbmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNhdmVDaGlsZFZpZXcodmlldyk7XG5cbiAgICAgIC8vIHVuYnVpbGQgY3VycmVudCBjb21wb25lbnQuIHRoaXMgc3RlcCBhbHNvIGRlc3Ryb3lzXG4gICAgICAvLyBhbmQgcmVtb3ZlcyBhbGwgbmVzdGVkIGNoaWxkIHZpZXdzLlxuICAgICAgdmlldy51bmJ1aWxkKHRydWUpO1xuXG4gICAgICAvLyBidWlsZCB0aGUgbmV3IGNvbXBvbmVudC4gdGhpcyB3aWxsIGFsc28gY3JlYXRlIHRoZVxuICAgICAgLy8gZGlyZWN0IGNoaWxkIHZpZXcgb2YgdGhlIGN1cnJlbnQgb25lLiBpdCB3aWxsIHJlZ2lzdGVyXG4gICAgICAvLyBpdHNlbGYgYXMgdmlldy5jaGlsZFZpZXcuXG4gICAgICBjb21wb25lbnQgPSB2aWV3LmJ1aWxkKHtcbiAgICAgICAgX21ldGE6IHtcbiAgICAgICAgICAkbG9hZGluZ1JvdXRlRGF0YTogbG9hZGluZ1xuICAgICAgICB9LFxuICAgICAgICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge1xuICAgICAgICAgIHRoaXMuX3JvdXRlclZpZXcgPSB2aWV3O1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gaGFuZGxlIGtlZXAtYWxpdmUuXG4gICAgICAvLyB3aGVuIGEga2VwdC1hbGl2ZSBjaGlsZCB2bSBpcyByZXN0b3JlZCwgd2UgbmVlZCB0b1xuICAgICAgLy8gYWRkIGl0cyBjYWNoZWQgY2hpbGQgdmlld3MgaW50byB0aGUgcm91dGVyJ3MgdmlldyBsaXN0LFxuICAgICAgLy8gYW5kIGFsc28gcHJvcGVybHkgdXBkYXRlIGN1cnJlbnQgdmlldydzIGNoaWxkIHZpZXcuXG4gICAgICBpZiAodmlldy5rZWVwQWxpdmUpIHtcbiAgICAgICAgY29tcG9uZW50LiRsb2FkaW5nUm91dGVEYXRhID0gbG9hZGluZztcbiAgICAgICAgdmFyIGNhY2hlZENoaWxkVmlldyA9IGNvbXBvbmVudC5fa2VlcEFsaXZlUm91dGVyVmlldztcbiAgICAgICAgaWYgKGNhY2hlZENoaWxkVmlldykge1xuICAgICAgICAgIHZpZXcuY2hpbGRWaWV3ID0gY2FjaGVkQ2hpbGRWaWV3O1xuICAgICAgICAgIGNvbXBvbmVudC5fa2VlcEFsaXZlUm91dGVyVmlldyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjbGVhbnVwIHRoZSBjb21wb25lbnQgaW4gY2FzZSB0aGUgdHJhbnNpdGlvbiBpcyBhYm9ydGVkXG4gICAgLy8gYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgZXZlciBpbnNlcnRlZC5cbiAgICB2YXIgY2xlYW51cCA9IGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgICBjb21wb25lbnQuJGRlc3Ryb3koKTtcbiAgICB9O1xuXG4gICAgLy8gYWN0dWFsbHkgaW5zZXJ0IHRoZSBjb21wb25lbnQgYW5kIHRyaWdnZXIgdHJhbnNpdGlvblxuICAgIHZhciBpbnNlcnQgPSBmdW5jdGlvbiBpbnNlcnQoKSB7XG4gICAgICBpZiAocmV1c2UpIHtcbiAgICAgICAgY2IgJiYgY2IoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIHJvdXRlciA9IHRyYW5zaXRpb24ucm91dGVyO1xuICAgICAgaWYgKHJvdXRlci5fcmVuZGVyZWQgfHwgcm91dGVyLl90cmFuc2l0aW9uT25Mb2FkKSB7XG4gICAgICAgIHZpZXcudHJhbnNpdGlvbihjb21wb25lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbm8gdHJhbnNpdGlvbiBvbiBmaXJzdCByZW5kZXIsIG1hbnVhbCB0cmFuc2l0aW9uXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAodmlldy5zZXRDdXJyZW50KSB7XG4gICAgICAgICAgLy8gMC4xMiBjb21wYXRcbiAgICAgICAgICB2aWV3LnNldEN1cnJlbnQoY29tcG9uZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyAxLjBcbiAgICAgICAgICB2aWV3LmNoaWxkVk0gPSBjb21wb25lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgY29tcG9uZW50LiRiZWZvcmUodmlldy5hbmNob3IsIG51bGwsIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIGNiICYmIGNiKCk7XG4gICAgfTtcblxuICAgIHZhciBhZnRlckRhdGEgPSBmdW5jdGlvbiBhZnRlckRhdGEoKSB7XG4gICAgICAvLyBhY3RpdmF0ZSB0aGUgY2hpbGQgdmlld1xuICAgICAgaWYgKHZpZXcuY2hpbGRWaWV3KSB7XG4gICAgICAgIGFjdGl2YXRlKHZpZXcuY2hpbGRWaWV3LCB0cmFuc2l0aW9uLCBkZXB0aCArIDEsIG51bGwsIHJldXNlIHx8IHZpZXcua2VlcEFsaXZlKTtcbiAgICAgIH1cbiAgICAgIGluc2VydCgpO1xuICAgIH07XG5cbiAgICAvLyBjYWxsZWQgYWZ0ZXIgYWN0aXZhdGlvbiBob29rIGlzIHJlc29sdmVkXG4gICAgdmFyIGFmdGVyQWN0aXZhdGUgPSBmdW5jdGlvbiBhZnRlckFjdGl2YXRlKCkge1xuICAgICAgdmlldy5hY3RpdmF0ZWQgPSB0cnVlO1xuICAgICAgaWYgKGRhdGFIb29rICYmIHdhaXRGb3JEYXRhKSB7XG4gICAgICAgIC8vIHdhaXQgdW50aWwgZGF0YSBsb2FkZWQgdG8gaW5zZXJ0XG4gICAgICAgIGxvYWREYXRhKGNvbXBvbmVudCwgdHJhbnNpdGlvbiwgZGF0YUhvb2ssIGFmdGVyRGF0YSwgY2xlYW51cCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBsb2FkIGRhdGEgYW5kIGluc2VydCBhdCB0aGUgc2FtZSB0aW1lXG4gICAgICAgIGlmIChkYXRhSG9vaykge1xuICAgICAgICAgIGxvYWREYXRhKGNvbXBvbmVudCwgdHJhbnNpdGlvbiwgZGF0YUhvb2spO1xuICAgICAgICB9XG4gICAgICAgIGFmdGVyRGF0YSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoYWN0aXZhdGVIb29rKSB7XG4gICAgICB0cmFuc2l0aW9uLmNhbGxIb29rcyhhY3RpdmF0ZUhvb2ssIGNvbXBvbmVudCwgYWZ0ZXJBY3RpdmF0ZSwge1xuICAgICAgICBjbGVhbnVwOiBjbGVhbnVwLFxuICAgICAgICBwb3N0QWN0aXZhdGU6IHRydWVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBhZnRlckFjdGl2YXRlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldXNlIGEgdmlldywganVzdCByZWxvYWQgZGF0YSBpZiBuZWNlc3NhcnkuXG4gICAqXG4gICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XG4gICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuICAgKi9cblxuICBmdW5jdGlvbiByZXVzZSh2aWV3LCB0cmFuc2l0aW9uKSB7XG4gICAgdmFyIGNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcbiAgICB2YXIgZGF0YUhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhjb21wb25lbnQsICdkYXRhJyk7XG4gICAgaWYgKGRhdGFIb29rKSB7XG4gICAgICBsb2FkRGF0YShjb21wb25lbnQsIHRyYW5zaXRpb24sIGRhdGFIb29rKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQXN5bmNocm9ub3VzbHkgbG9hZCBhbmQgYXBwbHkgZGF0YSB0byBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSBjb21wb25lbnRcbiAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGhvb2tcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2xlYW51cFxuICAgKi9cblxuICBmdW5jdGlvbiBsb2FkRGF0YShjb21wb25lbnQsIHRyYW5zaXRpb24sIGhvb2ssIGNiLCBjbGVhbnVwKSB7XG4gICAgY29tcG9uZW50LiRsb2FkaW5nUm91dGVEYXRhID0gdHJ1ZTtcbiAgICB0cmFuc2l0aW9uLmNhbGxIb29rcyhob29rLCBjb21wb25lbnQsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IGZhbHNlO1xuICAgICAgY29tcG9uZW50LiRlbWl0KCdyb3V0ZS1kYXRhLWxvYWRlZCcsIGNvbXBvbmVudCk7XG4gICAgICBjYiAmJiBjYigpO1xuICAgIH0sIHtcbiAgICAgIGNsZWFudXA6IGNsZWFudXAsXG4gICAgICBwb3N0QWN0aXZhdGU6IHRydWUsXG4gICAgICBwcm9jZXNzRGF0YTogZnVuY3Rpb24gcHJvY2Vzc0RhdGEoZGF0YSkge1xuICAgICAgICAvLyBoYW5kbGUgcHJvbWlzZSBzdWdhciBzeW50YXhcbiAgICAgICAgdmFyIHByb21pc2VzID0gW107XG4gICAgICAgIGlmIChpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG4gICAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICB2YXIgdmFsID0gZGF0YVtrZXldO1xuICAgICAgICAgICAgaWYgKGlzUHJvbWlzZSh2YWwpKSB7XG4gICAgICAgICAgICAgIHByb21pc2VzLnB1c2godmFsLnRoZW4oZnVuY3Rpb24gKHJlc29sdmVkVmFsKSB7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50LiRzZXQoa2V5LCByZXNvbHZlZFZhbCk7XG4gICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbXBvbmVudC4kc2V0KGtleSwgdmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvbWlzZXMubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHByb21pc2VzWzBdLmNvbnN0cnVjdG9yLmFsbChwcm9taXNlcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTYXZlIHRoZSBjaGlsZCB2aWV3IGZvciBhIGtlcHQtYWxpdmUgdmlldyBzbyB0aGF0XG4gICAqIHdlIGNhbiByZXN0b3JlIGl0IHdoZW4gaXQgaXMgc3dpdGNoZWQgYmFjayB0by5cbiAgICpcbiAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcbiAgICovXG5cbiAgZnVuY3Rpb24gc2F2ZUNoaWxkVmlldyh2aWV3KSB7XG4gICAgaWYgKHZpZXcua2VlcEFsaXZlICYmIHZpZXcuY2hpbGRWTSAmJiB2aWV3LmNoaWxkVmlldykge1xuICAgICAgdmlldy5jaGlsZFZNLl9rZWVwQWxpdmVSb3V0ZXJWaWV3ID0gdmlldy5jaGlsZFZpZXc7XG4gICAgfVxuICAgIHZpZXcuY2hpbGRWaWV3ID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBwbGFpbiBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsKSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBPYmplY3RdJztcbiAgfVxuXG4gIC8qKlxuICAgKiBBIFJvdXRlVHJhbnNpdGlvbiBvYmplY3QgbWFuYWdlcyB0aGUgcGlwZWxpbmUgb2YgYVxuICAgKiByb3V0ZXItdmlldyBzd2l0Y2hpbmcgcHJvY2Vzcy4gVGhpcyBpcyBhbHNvIHRoZSBvYmplY3RcbiAgICogcGFzc2VkIGludG8gdXNlciByb3V0ZSBob29rcy5cbiAgICpcbiAgICogQHBhcmFtIHtSb3V0ZXJ9IHJvdXRlclxuICAgKiBAcGFyYW0ge1JvdXRlfSB0b1xuICAgKiBAcGFyYW0ge1JvdXRlfSBmcm9tXG4gICAqL1xuXG4gIHZhciBSb3V0ZVRyYW5zaXRpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJvdXRlVHJhbnNpdGlvbihyb3V0ZXIsIHRvLCBmcm9tKSB7XG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgUm91dGVUcmFuc2l0aW9uKTtcblxuICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG4gICAgICB0aGlzLnRvID0gdG87XG4gICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgdGhpcy5uZXh0ID0gbnVsbDtcbiAgICAgIHRoaXMuYWJvcnRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWJvcnQgY3VycmVudCB0cmFuc2l0aW9uIGFuZCByZXR1cm4gdG8gcHJldmlvdXMgbG9jYXRpb24uXG4gICAgICovXG5cbiAgICBSb3V0ZVRyYW5zaXRpb24ucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24gYWJvcnQoKSB7XG4gICAgICBpZiAoIXRoaXMuYWJvcnRlZCkge1xuICAgICAgICB0aGlzLmFib3J0ZWQgPSB0cnVlO1xuICAgICAgICAvLyBpZiB0aGUgcm9vdCBwYXRoIHRocm93cyBhbiBlcnJvciBkdXJpbmcgdmFsaWRhdGlvblxuICAgICAgICAvLyBvbiBpbml0aWFsIGxvYWQsIGl0IGdldHMgY2F1Z2h0IGluIGFuIGluZmluaXRlIGxvb3AuXG4gICAgICAgIHZhciBhYm9ydGluZ09uTG9hZCA9ICF0aGlzLmZyb20ucGF0aCAmJiB0aGlzLnRvLnBhdGggPT09ICcvJztcbiAgICAgICAgaWYgKCFhYm9ydGluZ09uTG9hZCkge1xuICAgICAgICAgIHRoaXMucm91dGVyLnJlcGxhY2UodGhpcy5mcm9tLnBhdGggfHwgJy8nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBYm9ydCBjdXJyZW50IHRyYW5zaXRpb24gYW5kIHJlZGlyZWN0IHRvIGEgbmV3IGxvY2F0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKi9cblxuICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUucmVkaXJlY3QgPSBmdW5jdGlvbiByZWRpcmVjdChwYXRoKSB7XG4gICAgICBpZiAoIXRoaXMuYWJvcnRlZCkge1xuICAgICAgICB0aGlzLmFib3J0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcGF0aCA9IG1hcFBhcmFtcyhwYXRoLCB0aGlzLnRvLnBhcmFtcywgdGhpcy50by5xdWVyeSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGF0aC5wYXJhbXMgPSBwYXRoLnBhcmFtcyB8fCB0aGlzLnRvLnBhcmFtcztcbiAgICAgICAgICBwYXRoLnF1ZXJ5ID0gcGF0aC5xdWVyeSB8fCB0aGlzLnRvLnF1ZXJ5O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucm91dGVyLnJlcGxhY2UocGF0aCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEEgcm91dGVyIHZpZXcgdHJhbnNpdGlvbidzIHBpcGVsaW5lIGNhbiBiZSBkZXNjcmliZWQgYXNcbiAgICAgKiBmb2xsb3dzLCBhc3N1bWluZyB3ZSBhcmUgdHJhbnNpdGlvbmluZyBmcm9tIGFuIGV4aXN0aW5nXG4gICAgICogPHJvdXRlci12aWV3PiBjaGFpbiBbQ29tcG9uZW50IEEsIENvbXBvbmVudCBCXSB0byBhIG5ld1xuICAgICAqIGNoYWluIFtDb21wb25lbnQgQSwgQ29tcG9uZW50IENdOlxuICAgICAqXG4gICAgICogIEEgICAgQVxuICAgICAqICB8ID0+IHxcbiAgICAgKiAgQiAgICBDXG4gICAgICpcbiAgICAgKiAxLiBSZXVzYWJsaXR5IHBoYXNlOlxuICAgICAqICAgLT4gY2FuUmV1c2UoQSwgQSlcbiAgICAgKiAgIC0+IGNhblJldXNlKEIsIEMpXG4gICAgICogICAtPiBkZXRlcm1pbmUgbmV3IHF1ZXVlczpcbiAgICAgKiAgICAgIC0gZGVhY3RpdmF0aW9uOiBbQl1cbiAgICAgKiAgICAgIC0gYWN0aXZhdGlvbjogW0NdXG4gICAgICpcbiAgICAgKiAyLiBWYWxpZGF0aW9uIHBoYXNlOlxuICAgICAqICAgLT4gY2FuRGVhY3RpdmF0ZShCKVxuICAgICAqICAgLT4gY2FuQWN0aXZhdGUoQylcbiAgICAgKlxuICAgICAqIDMuIEFjdGl2YXRpb24gcGhhc2U6XG4gICAgICogICAtPiBkZWFjdGl2YXRlKEIpXG4gICAgICogICAtPiBhY3RpdmF0ZShDKVxuICAgICAqXG4gICAgICogRWFjaCBvZiB0aGVzZSBzdGVwcyBjYW4gYmUgYXN5bmNocm9ub3VzLCBhbmQgYW55XG4gICAgICogc3RlcCBjYW4gcG90ZW50aWFsbHkgYWJvcnQgdGhlIHRyYW5zaXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgICAqL1xuXG4gICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KGNiKSB7XG4gICAgICB2YXIgdHJhbnNpdGlvbiA9IHRoaXM7XG5cbiAgICAgIC8vIGRldGVybWluZSB0aGUgcXVldWUgb2Ygdmlld3MgdG8gZGVhY3RpdmF0ZVxuICAgICAgdmFyIGRlYWN0aXZhdGVRdWV1ZSA9IFtdO1xuICAgICAgdmFyIHZpZXcgPSB0aGlzLnJvdXRlci5fcm9vdFZpZXc7XG4gICAgICB3aGlsZSAodmlldykge1xuICAgICAgICBkZWFjdGl2YXRlUXVldWUudW5zaGlmdCh2aWV3KTtcbiAgICAgICAgdmlldyA9IHZpZXcuY2hpbGRWaWV3O1xuICAgICAgfVxuICAgICAgdmFyIHJldmVyc2VEZWFjdGl2YXRlUXVldWUgPSBkZWFjdGl2YXRlUXVldWUuc2xpY2UoKS5yZXZlcnNlKCk7XG5cbiAgICAgIC8vIGRldGVybWluZSB0aGUgcXVldWUgb2Ygcm91dGUgaGFuZGxlcnMgdG8gYWN0aXZhdGVcbiAgICAgIHZhciBhY3RpdmF0ZVF1ZXVlID0gdGhpcy5hY3RpdmF0ZVF1ZXVlID0gdG9BcnJheSh0aGlzLnRvLm1hdGNoZWQpLm1hcChmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoLmhhbmRsZXI7XG4gICAgICB9KTtcblxuICAgICAgLy8gMS4gUmV1c2FiaWxpdHkgcGhhc2VcbiAgICAgIHZhciBpID0gdW5kZWZpbmVkLFxuICAgICAgICAgIHJldXNlUXVldWUgPSB1bmRlZmluZWQ7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgcmV2ZXJzZURlYWN0aXZhdGVRdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIWNhblJldXNlKHJldmVyc2VEZWFjdGl2YXRlUXVldWVbaV0sIGFjdGl2YXRlUXVldWVbaV0sIHRyYW5zaXRpb24pKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpID4gMCkge1xuICAgICAgICByZXVzZVF1ZXVlID0gcmV2ZXJzZURlYWN0aXZhdGVRdWV1ZS5zbGljZSgwLCBpKTtcbiAgICAgICAgZGVhY3RpdmF0ZVF1ZXVlID0gcmV2ZXJzZURlYWN0aXZhdGVRdWV1ZS5zbGljZShpKS5yZXZlcnNlKCk7XG4gICAgICAgIGFjdGl2YXRlUXVldWUgPSBhY3RpdmF0ZVF1ZXVlLnNsaWNlKGkpO1xuICAgICAgfVxuXG4gICAgICAvLyAyLiBWYWxpZGF0aW9uIHBoYXNlXG4gICAgICB0cmFuc2l0aW9uLnJ1blF1ZXVlKGRlYWN0aXZhdGVRdWV1ZSwgY2FuRGVhY3RpdmF0ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICB0cmFuc2l0aW9uLnJ1blF1ZXVlKGFjdGl2YXRlUXVldWUsIGNhbkFjdGl2YXRlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShkZWFjdGl2YXRlUXVldWUsIGRlYWN0aXZhdGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIDMuIEFjdGl2YXRpb24gcGhhc2VcblxuICAgICAgICAgICAgLy8gVXBkYXRlIHJvdXRlciBjdXJyZW50IHJvdXRlXG4gICAgICAgICAgICB0cmFuc2l0aW9uLnJvdXRlci5fb25UcmFuc2l0aW9uVmFsaWRhdGVkKHRyYW5zaXRpb24pO1xuXG4gICAgICAgICAgICAvLyB0cmlnZ2VyIHJldXNlIGZvciBhbGwgcmV1c2VkIHZpZXdzXG4gICAgICAgICAgICByZXVzZVF1ZXVlICYmIHJldXNlUXVldWUuZm9yRWFjaChmdW5jdGlvbiAodmlldykge1xuICAgICAgICAgICAgICByZXR1cm4gcmV1c2UodmlldywgdHJhbnNpdGlvbik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gdGhlIHJvb3Qgb2YgdGhlIGNoYWluIHRoYXQgbmVlZHMgdG8gYmUgcmVwbGFjZWRcbiAgICAgICAgICAgIC8vIGlzIHRoZSB0b3AtbW9zdCBub24tcmV1c2FibGUgdmlldy5cbiAgICAgICAgICAgIGlmIChkZWFjdGl2YXRlUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHZhciBfdmlldyA9IGRlYWN0aXZhdGVRdWV1ZVtkZWFjdGl2YXRlUXVldWUubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgIHZhciBkZXB0aCA9IHJldXNlUXVldWUgPyByZXVzZVF1ZXVlLmxlbmd0aCA6IDA7XG4gICAgICAgICAgICAgIGFjdGl2YXRlKF92aWV3LCB0cmFuc2l0aW9uLCBkZXB0aCwgY2IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQXN5bmNocm9ub3VzbHkgYW5kIHNlcXVlbnRpYWxseSBhcHBseSBhIGZ1bmN0aW9uIHRvIGFcbiAgICAgKiBxdWV1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHF1ZXVlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgICAqL1xuXG4gICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5ydW5RdWV1ZSA9IGZ1bmN0aW9uIHJ1blF1ZXVlKHF1ZXVlLCBmbiwgY2IpIHtcbiAgICAgIHZhciB0cmFuc2l0aW9uID0gdGhpcztcbiAgICAgIHN0ZXAoMCk7XG4gICAgICBmdW5jdGlvbiBzdGVwKGluZGV4KSB7XG4gICAgICAgIGlmIChpbmRleCA+PSBxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICBjYigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZuKHF1ZXVlW2luZGV4XSwgdHJhbnNpdGlvbiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc3RlcChpbmRleCArIDEpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENhbGwgYSB1c2VyIHByb3ZpZGVkIHJvdXRlIHRyYW5zaXRpb24gaG9vayBhbmQgaGFuZGxlXG4gICAgICogdGhlIHJlc3BvbnNlIChlLmcuIGlmIHRoZSB1c2VyIHJldHVybnMgYSBwcm9taXNlKS5cbiAgICAgKlxuICAgICAqIElmIHRoZSB1c2VyIG5laXRoZXIgZXhwZWN0cyBhbiBhcmd1bWVudCBub3IgcmV0dXJucyBhXG4gICAgICogcHJvbWlzZSwgdGhlIGhvb2sgaXMgYXNzdW1lZCB0byBiZSBzeW5jaHJvbm91cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhvb2tcbiAgICAgKiBAcGFyYW0geyp9IFtjb250ZXh0XVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGV4cGVjdEJvb2xlYW5cbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gcG9zdEFjdGl2ZVxuICAgICAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gcHJvY2Vzc0RhdGFcbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IGNsZWFudXBcbiAgICAgKi9cblxuICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuY2FsbEhvb2sgPSBmdW5jdGlvbiBjYWxsSG9vayhob29rLCBjb250ZXh0LCBjYikge1xuICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1szXTtcblxuICAgICAgdmFyIF9yZWYkZXhwZWN0Qm9vbGVhbiA9IF9yZWYuZXhwZWN0Qm9vbGVhbjtcbiAgICAgIHZhciBleHBlY3RCb29sZWFuID0gX3JlZiRleHBlY3RCb29sZWFuID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkZXhwZWN0Qm9vbGVhbjtcbiAgICAgIHZhciBfcmVmJHBvc3RBY3RpdmF0ZSA9IF9yZWYucG9zdEFjdGl2YXRlO1xuICAgICAgdmFyIHBvc3RBY3RpdmF0ZSA9IF9yZWYkcG9zdEFjdGl2YXRlID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkcG9zdEFjdGl2YXRlO1xuICAgICAgdmFyIHByb2Nlc3NEYXRhID0gX3JlZi5wcm9jZXNzRGF0YTtcbiAgICAgIHZhciBjbGVhbnVwID0gX3JlZi5jbGVhbnVwO1xuXG4gICAgICB2YXIgdHJhbnNpdGlvbiA9IHRoaXM7XG4gICAgICB2YXIgbmV4dENhbGxlZCA9IGZhbHNlO1xuXG4gICAgICAvLyBhYm9ydCB0aGUgdHJhbnNpdGlvblxuICAgICAgdmFyIGFib3J0ID0gZnVuY3Rpb24gYWJvcnQoKSB7XG4gICAgICAgIGNsZWFudXAgJiYgY2xlYW51cCgpO1xuICAgICAgICB0cmFuc2l0aW9uLmFib3J0KCk7XG4gICAgICB9O1xuXG4gICAgICAvLyBoYW5kbGUgZXJyb3JzXG4gICAgICB2YXIgb25FcnJvciA9IGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7XG4gICAgICAgIHBvc3RBY3RpdmF0ZSA/IG5leHQoKSA6IGFib3J0KCk7XG4gICAgICAgIGlmIChlcnIgJiYgIXRyYW5zaXRpb24ucm91dGVyLl9zdXBwcmVzcykge1xuICAgICAgICAgIHdhcm4kMSgnVW5jYXVnaHQgZXJyb3IgZHVyaW5nIHRyYW5zaXRpb246ICcpO1xuICAgICAgICAgIHRocm93IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyIDogbmV3IEVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIHNpbmNlIHByb21pc2Ugc3dhbGxvd3MgZXJyb3JzLCB3ZSBoYXZlIHRvXG4gICAgICAvLyB0aHJvdyBpdCBpbiB0aGUgbmV4dCB0aWNrLi4uXG4gICAgICB2YXIgb25Qcm9taXNlRXJyb3IgPSBmdW5jdGlvbiBvblByb21pc2VFcnJvcihlcnIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBvbkVycm9yKGVycik7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIGFkdmFuY2UgdGhlIHRyYW5zaXRpb24gdG8gdGhlIG5leHQgc3RlcFxuICAgICAgdmFyIG5leHQgPSBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICBpZiAobmV4dENhbGxlZCkge1xuICAgICAgICAgIHdhcm4kMSgndHJhbnNpdGlvbi5uZXh0KCkgc2hvdWxkIGJlIGNhbGxlZCBvbmx5IG9uY2UuJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIG5leHRDYWxsZWQgPSB0cnVlO1xuICAgICAgICBpZiAodHJhbnNpdGlvbi5hYm9ydGVkKSB7XG4gICAgICAgICAgY2xlYW51cCAmJiBjbGVhbnVwKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNiICYmIGNiKCk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgbmV4dFdpdGhCb29sZWFuID0gZnVuY3Rpb24gbmV4dFdpdGhCb29sZWFuKHJlcykge1xuICAgICAgICBpZiAodHlwZW9mIHJlcyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgcmVzID8gbmV4dCgpIDogYWJvcnQoKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1Byb21pc2UocmVzKSkge1xuICAgICAgICAgIHJlcy50aGVuKGZ1bmN0aW9uIChvaykge1xuICAgICAgICAgICAgb2sgPyBuZXh0KCkgOiBhYm9ydCgpO1xuICAgICAgICAgIH0sIG9uUHJvbWlzZUVycm9yKTtcbiAgICAgICAgfSBlbHNlIGlmICghaG9vay5sZW5ndGgpIHtcbiAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHZhciBuZXh0V2l0aERhdGEgPSBmdW5jdGlvbiBuZXh0V2l0aERhdGEoZGF0YSkge1xuICAgICAgICB2YXIgcmVzID0gdW5kZWZpbmVkO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJlcyA9IHByb2Nlc3NEYXRhKGRhdGEpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gb25FcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1Byb21pc2UocmVzKSkge1xuICAgICAgICAgIHJlcy50aGVuKG5leHQsIG9uUHJvbWlzZUVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIGV4cG9zZSBhIGNsb25lIG9mIHRoZSB0cmFuc2l0aW9uIG9iamVjdCwgc28gdGhhdCBlYWNoXG4gICAgICAvLyBob29rIGdldHMgYSBjbGVhbiBjb3B5IGFuZCBwcmV2ZW50IHRoZSB1c2VyIGZyb21cbiAgICAgIC8vIG1lc3Npbmcgd2l0aCB0aGUgaW50ZXJuYWxzLlxuICAgICAgdmFyIGV4cG9zZWQgPSB7XG4gICAgICAgIHRvOiB0cmFuc2l0aW9uLnRvLFxuICAgICAgICBmcm9tOiB0cmFuc2l0aW9uLmZyb20sXG4gICAgICAgIGFib3J0OiBhYm9ydCxcbiAgICAgICAgbmV4dDogcHJvY2Vzc0RhdGEgPyBuZXh0V2l0aERhdGEgOiBuZXh0LFxuICAgICAgICByZWRpcmVjdDogZnVuY3Rpb24gcmVkaXJlY3QoKSB7XG4gICAgICAgICAgdHJhbnNpdGlvbi5yZWRpcmVjdC5hcHBseSh0cmFuc2l0aW9uLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBhY3R1YWxseSBjYWxsIHRoZSBob29rXG4gICAgICB2YXIgcmVzID0gdW5kZWZpbmVkO1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVzID0gaG9vay5jYWxsKGNvbnRleHQsIGV4cG9zZWQpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJldHVybiBvbkVycm9yKGVycik7XG4gICAgICB9XG5cbiAgICAgIGlmIChleHBlY3RCb29sZWFuKSB7XG4gICAgICAgIC8vIGJvb2xlYW4gaG9va3NcbiAgICAgICAgbmV4dFdpdGhCb29sZWFuKHJlcyk7XG4gICAgICB9IGVsc2UgaWYgKGlzUHJvbWlzZShyZXMpKSB7XG4gICAgICAgIC8vIHByb21pc2VcbiAgICAgICAgaWYgKHByb2Nlc3NEYXRhKSB7XG4gICAgICAgICAgcmVzLnRoZW4obmV4dFdpdGhEYXRhLCBvblByb21pc2VFcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzLnRoZW4obmV4dCwgb25Qcm9taXNlRXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHByb2Nlc3NEYXRhICYmIGlzUGxhaW5PamJlY3QocmVzKSkge1xuICAgICAgICAvLyBkYXRhIHByb21pc2Ugc3VnYXJcbiAgICAgICAgbmV4dFdpdGhEYXRhKHJlcyk7XG4gICAgICB9IGVsc2UgaWYgKCFob29rLmxlbmd0aCkge1xuICAgICAgICBuZXh0KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENhbGwgYSBzaW5nbGUgaG9vayBvciBhbiBhcnJheSBvZiBhc3luYyBob29rcyBpbiBzZXJpZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBob29rc1xuICAgICAqIEBwYXJhbSB7Kn0gY29udGV4dFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqL1xuXG4gICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5jYWxsSG9va3MgPSBmdW5jdGlvbiBjYWxsSG9va3MoaG9va3MsIGNvbnRleHQsIGNiLCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShob29rcykpIHtcbiAgICAgICAgdGhpcy5ydW5RdWV1ZShob29rcywgZnVuY3Rpb24gKGhvb2ssIF8sIG5leHQpIHtcbiAgICAgICAgICBpZiAoIV90aGlzLmFib3J0ZWQpIHtcbiAgICAgICAgICAgIF90aGlzLmNhbGxIb29rKGhvb2ssIGNvbnRleHQsIG5leHQsIG9wdGlvbnMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgY2IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jYWxsSG9vayhob29rcywgY29udGV4dCwgY2IsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gUm91dGVUcmFuc2l0aW9uO1xuICB9KSgpO1xuXG4gIGZ1bmN0aW9uIGlzUGxhaW5PamJlY3QodmFsKSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBPYmplY3RdJztcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvQXJyYXkodmFsKSB7XG4gICAgcmV0dXJuIHZhbCA/IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHZhbCkgOiBbXTtcbiAgfVxuXG4gIHZhciBpbnRlcm5hbEtleXNSRSA9IC9eKGNvbXBvbmVudHxzdWJSb3V0ZXN8ZnVsbFBhdGgpJC87XG5cbiAgLyoqXG4gICAqIFJvdXRlIENvbnRleHQgT2JqZWN0XG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAqIEBwYXJhbSB7Um91dGVyfSByb3V0ZXJcbiAgICovXG5cbiAgdmFyIFJvdXRlID0gZnVuY3Rpb24gUm91dGUocGF0aCwgcm91dGVyKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBSb3V0ZSk7XG5cbiAgICB2YXIgbWF0Y2hlZCA9IHJvdXRlci5fcmVjb2duaXplci5yZWNvZ25pemUocGF0aCk7XG4gICAgaWYgKG1hdGNoZWQpIHtcbiAgICAgIC8vIGNvcHkgYWxsIGN1c3RvbSBmaWVsZHMgZnJvbSByb3V0ZSBjb25maWdzXG4gICAgICBbXS5mb3JFYWNoLmNhbGwobWF0Y2hlZCwgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBtYXRjaC5oYW5kbGVyKSB7XG4gICAgICAgICAgaWYgKCFpbnRlcm5hbEtleXNSRS50ZXN0KGtleSkpIHtcbiAgICAgICAgICAgIF90aGlzW2tleV0gPSBtYXRjaC5oYW5kbGVyW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vIHNldCBxdWVyeSBhbmQgcGFyYW1zXG4gICAgICB0aGlzLnF1ZXJ5ID0gbWF0Y2hlZC5xdWVyeVBhcmFtcztcbiAgICAgIHRoaXMucGFyYW1zID0gW10ucmVkdWNlLmNhbGwobWF0Y2hlZCwgZnVuY3Rpb24gKHByZXYsIGN1cikge1xuICAgICAgICBpZiAoY3VyLnBhcmFtcykge1xuICAgICAgICAgIGZvciAodmFyIGtleSBpbiBjdXIucGFyYW1zKSB7XG4gICAgICAgICAgICBwcmV2W2tleV0gPSBjdXIucGFyYW1zW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgfSwge30pO1xuICAgIH1cbiAgICAvLyBleHBvc2UgcGF0aCBhbmQgcm91dGVyXG4gICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICAvLyBmb3IgaW50ZXJuYWwgdXNlXG4gICAgdGhpcy5tYXRjaGVkID0gbWF0Y2hlZCB8fCByb3V0ZXIuX25vdEZvdW5kSGFuZGxlcjtcbiAgICAvLyBpbnRlcm5hbCByZWZlcmVuY2UgdG8gcm91dGVyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdyb3V0ZXInLCB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIHZhbHVlOiByb3V0ZXJcbiAgICB9KTtcbiAgICAvLyBJbXBvcnRhbnQ6IGZyZWV6ZSBzZWxmIHRvIHByZXZlbnQgb2JzZXJ2YXRpb25cbiAgICBPYmplY3QuZnJlZXplKHRoaXMpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGFwcGx5T3ZlcnJpZGUgKFZ1ZSkge1xuICAgIHZhciBfVnVlJHV0aWwgPSBWdWUudXRpbDtcbiAgICB2YXIgZXh0ZW5kID0gX1Z1ZSR1dGlsLmV4dGVuZDtcbiAgICB2YXIgaXNBcnJheSA9IF9WdWUkdXRpbC5pc0FycmF5O1xuICAgIHZhciBkZWZpbmVSZWFjdGl2ZSA9IF9WdWUkdXRpbC5kZWZpbmVSZWFjdGl2ZTtcblxuICAgIC8vIG92ZXJyaWRlIFZ1ZSdzIGluaXQgYW5kIGRlc3Ryb3kgcHJvY2VzcyB0byBrZWVwIHRyYWNrIG9mIHJvdXRlciBpbnN0YW5jZXNcbiAgICB2YXIgaW5pdCA9IFZ1ZS5wcm90b3R5cGUuX2luaXQ7XG4gICAgVnVlLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgIHZhciByb290ID0gb3B0aW9ucy5fcGFyZW50IHx8IG9wdGlvbnMucGFyZW50IHx8IHRoaXM7XG4gICAgICB2YXIgcm91dGVyID0gcm9vdC4kcm91dGVyO1xuICAgICAgdmFyIHJvdXRlID0gcm9vdC4kcm91dGU7XG4gICAgICBpZiAocm91dGVyKSB7XG4gICAgICAgIC8vIGV4cG9zZSByb3V0ZXJcbiAgICAgICAgdGhpcy4kcm91dGVyID0gcm91dGVyO1xuICAgICAgICByb3V0ZXIuX2NoaWxkcmVuLnB1c2godGhpcyk7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAodGhpcy5fZGVmaW5lTWV0YSkge1xuICAgICAgICAgIC8vIDAuMTJcbiAgICAgICAgICB0aGlzLl9kZWZpbmVNZXRhKCckcm91dGUnLCByb3V0ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gMS4wXG4gICAgICAgICAgZGVmaW5lUmVhY3RpdmUodGhpcywgJyRyb3V0ZScsIHJvdXRlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaW5pdC5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuICAgIH07XG5cbiAgICB2YXIgZGVzdHJveSA9IFZ1ZS5wcm90b3R5cGUuX2Rlc3Ryb3k7XG4gICAgVnVlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCAmJiB0aGlzLiRyb3V0ZXIpIHtcbiAgICAgICAgdGhpcy4kcm91dGVyLl9jaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xuICAgICAgfVxuICAgICAgZGVzdHJveS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICAvLyAxLjAgb25seTogZW5hYmxlIHJvdXRlIG1peGluc1xuICAgIHZhciBzdHJhdHMgPSBWdWUuY29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llcztcbiAgICB2YXIgaG9va3NUb01lcmdlUkUgPSAvXihkYXRhfGFjdGl2YXRlfGRlYWN0aXZhdGUpJC87XG5cbiAgICBpZiAoc3RyYXRzKSB7XG4gICAgICBzdHJhdHMucm91dGUgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuICAgICAgICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsO1xuICAgICAgICBpZiAoIXBhcmVudFZhbCkgcmV0dXJuIGNoaWxkVmFsO1xuICAgICAgICB2YXIgcmV0ID0ge307XG4gICAgICAgIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBjaGlsZFZhbCkge1xuICAgICAgICAgIHZhciBhID0gcmV0W2tleV07XG4gICAgICAgICAgdmFyIGIgPSBjaGlsZFZhbFtrZXldO1xuICAgICAgICAgIC8vIGZvciBkYXRhLCBhY3RpdmF0ZSBhbmQgZGVhY3RpdmF0ZSwgd2UgbmVlZCB0byBtZXJnZSB0aGVtIGludG9cbiAgICAgICAgICAvLyBhcnJheXMgc2ltaWxhciB0byBsaWZlY3ljbGUgaG9va3MuXG4gICAgICAgICAgaWYgKGEgJiYgaG9va3NUb01lcmdlUkUudGVzdChrZXkpKSB7XG4gICAgICAgICAgICByZXRba2V5XSA9IChpc0FycmF5KGEpID8gYSA6IFthXSkuY29uY2F0KGIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRba2V5XSA9IGI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIFZpZXcgKFZ1ZSkge1xuXG4gICAgdmFyIF8gPSBWdWUudXRpbDtcbiAgICB2YXIgY29tcG9uZW50RGVmID1cbiAgICAvLyAwLjEyXG4gICAgVnVlLmRpcmVjdGl2ZSgnX2NvbXBvbmVudCcpIHx8XG4gICAgLy8gMS4wXG4gICAgVnVlLmludGVybmFsRGlyZWN0aXZlcy5jb21wb25lbnQ7XG4gICAgLy8gPHJvdXRlci12aWV3PiBleHRlbmRzIHRoZSBpbnRlcm5hbCBjb21wb25lbnQgZGlyZWN0aXZlXG4gICAgdmFyIHZpZXdEZWYgPSBfLmV4dGVuZCh7fSwgY29tcG9uZW50RGVmKTtcblxuICAgIC8vIHdpdGggc29tZSBvdmVycmlkZXNcbiAgICBfLmV4dGVuZCh2aWV3RGVmLCB7XG5cbiAgICAgIF9pc1JvdXRlclZpZXc6IHRydWUsXG5cbiAgICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgICAgIHZhciByb3V0ZSA9IHRoaXMudm0uJHJvdXRlO1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKCFyb3V0ZSkge1xuICAgICAgICAgIHdhcm4kMSgnPHJvdXRlci12aWV3PiBjYW4gb25seSBiZSB1c2VkIGluc2lkZSBhICcgKyAncm91dGVyLWVuYWJsZWQgYXBwLicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBmb3JjZSBkeW5hbWljIGRpcmVjdGl2ZSBzbyB2LWNvbXBvbmVudCBkb2Vzbid0XG4gICAgICAgIC8vIGF0dGVtcHQgdG8gYnVpbGQgcmlnaHQgbm93XG4gICAgICAgIHRoaXMuX2lzRHluYW1pY0xpdGVyYWwgPSB0cnVlO1xuICAgICAgICAvLyBmaW5hbGx5LCBpbml0IGJ5IGRlbGVnYXRpbmcgdG8gdi1jb21wb25lbnRcbiAgICAgICAgY29tcG9uZW50RGVmLmJpbmQuY2FsbCh0aGlzKTtcblxuICAgICAgICAvLyBsb2NhdGUgdGhlIHBhcmVudCB2aWV3XG4gICAgICAgIHZhciBwYXJlbnRWaWV3ID0gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy52bTtcbiAgICAgICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICAgIGlmIChwYXJlbnQuX3JvdXRlclZpZXcpIHtcbiAgICAgICAgICAgIHBhcmVudFZpZXcgPSBwYXJlbnQuX3JvdXRlclZpZXc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmVudFZpZXcpIHtcbiAgICAgICAgICAvLyByZWdpc3RlciBzZWxmIGFzIGEgY2hpbGQgb2YgdGhlIHBhcmVudCB2aWV3LFxuICAgICAgICAgIC8vIGluc3RlYWQgb2YgYWN0aXZhdGluZyBub3cuIFRoaXMgaXMgc28gdGhhdCB0aGVcbiAgICAgICAgICAvLyBjaGlsZCdzIGFjdGl2YXRlIGhvb2sgaXMgY2FsbGVkIGFmdGVyIHRoZVxuICAgICAgICAgIC8vIHBhcmVudCdzIGhhcyByZXNvbHZlZC5cbiAgICAgICAgICB0aGlzLnBhcmVudFZpZXcgPSBwYXJlbnRWaWV3O1xuICAgICAgICAgIHBhcmVudFZpZXcuY2hpbGRWaWV3ID0gdGhpcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyB0aGlzIGlzIHRoZSByb290IHZpZXchXG4gICAgICAgICAgdmFyIHJvdXRlciA9IHJvdXRlLnJvdXRlcjtcbiAgICAgICAgICByb3V0ZXIuX3Jvb3RWaWV3ID0gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGhhbmRsZSBsYXRlLXJlbmRlcmVkIHZpZXdcbiAgICAgICAgLy8gdHdvIHBvc3NpYmlsaXRpZXM6XG4gICAgICAgIC8vIDEuIHJvb3QgdmlldyByZW5kZXJlZCBhZnRlciB0cmFuc2l0aW9uIGhhcyBiZWVuXG4gICAgICAgIC8vICAgIHZhbGlkYXRlZDtcbiAgICAgICAgLy8gMi4gY2hpbGQgdmlldyByZW5kZXJlZCBhZnRlciBwYXJlbnQgdmlldyBoYXMgYmVlblxuICAgICAgICAvLyAgICBhY3RpdmF0ZWQuXG4gICAgICAgIHZhciB0cmFuc2l0aW9uID0gcm91dGUucm91dGVyLl9jdXJyZW50VHJhbnNpdGlvbjtcbiAgICAgICAgaWYgKCFwYXJlbnRWaWV3ICYmIHRyYW5zaXRpb24uZG9uZSB8fCBwYXJlbnRWaWV3ICYmIHBhcmVudFZpZXcuYWN0aXZhdGVkKSB7XG4gICAgICAgICAgdmFyIGRlcHRoID0gcGFyZW50VmlldyA/IHBhcmVudFZpZXcuZGVwdGggKyAxIDogMDtcbiAgICAgICAgICBhY3RpdmF0ZSh0aGlzLCB0cmFuc2l0aW9uLCBkZXB0aCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgICAgICBpZiAodGhpcy5wYXJlbnRWaWV3KSB7XG4gICAgICAgICAgdGhpcy5wYXJlbnRWaWV3LmNoaWxkVmlldyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29tcG9uZW50RGVmLnVuYmluZC5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgVnVlLmVsZW1lbnREaXJlY3RpdmUoJ3JvdXRlci12aWV3Jywgdmlld0RlZik7XG4gIH1cblxuICB2YXIgdHJhaWxpbmdTbGFzaFJFID0gL1xcLyQvO1xuICB2YXIgcmVnZXhFc2NhcGVSRSA9IC9bLS4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2c7XG4gIHZhciBxdWVyeVN0cmluZ1JFID0gL1xcPy4qJC87XG5cbiAgLy8gaW5zdGFsbCB2LWxpbmssIHdoaWNoIHByb3ZpZGVzIG5hdmlnYXRpb24gc3VwcG9ydCBmb3JcbiAgLy8gSFRNTDUgaGlzdG9yeSBtb2RlXG4gIGZ1bmN0aW9uIExpbmsgKFZ1ZSkge1xuICAgIHZhciBfVnVlJHV0aWwgPSBWdWUudXRpbDtcbiAgICB2YXIgX2JpbmQgPSBfVnVlJHV0aWwuYmluZDtcbiAgICB2YXIgaXNPYmplY3QgPSBfVnVlJHV0aWwuaXNPYmplY3Q7XG4gICAgdmFyIGFkZENsYXNzID0gX1Z1ZSR1dGlsLmFkZENsYXNzO1xuICAgIHZhciByZW1vdmVDbGFzcyA9IF9WdWUkdXRpbC5yZW1vdmVDbGFzcztcblxuICAgIHZhciBvblByaW9yaXR5ID0gVnVlLmRpcmVjdGl2ZSgnb24nKS5wcmlvcml0eTtcbiAgICB2YXIgTElOS19VUERBVEUgPSAnX192dWUtcm91dGVyLWxpbmstdXBkYXRlX18nO1xuXG4gICAgdmFyIGFjdGl2ZUlkID0gMDtcblxuICAgIFZ1ZS5kaXJlY3RpdmUoJ2xpbmstYWN0aXZlJywge1xuICAgICAgcHJpb3JpdHk6IDk5OTksXG4gICAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIHZhciBpZCA9IFN0cmluZyhhY3RpdmVJZCsrKTtcbiAgICAgICAgLy8gY29sbGVjdCB2LWxpbmtzIGNvbnRhaW5lZCB3aXRoaW4gdGhpcyBlbGVtZW50LlxuICAgICAgICAvLyB3ZSBuZWVkIGRvIHRoaXMgaGVyZSBiZWZvcmUgdGhlIHBhcmVudC1jaGlsZCByZWxhdGlvbnNoaXBcbiAgICAgICAgLy8gZ2V0cyBtZXNzZWQgdXAgYnkgdGVybWluYWwgZGlyZWN0aXZlcyAoaWYsIGZvciwgY29tcG9uZW50cylcbiAgICAgICAgdmFyIGNoaWxkTGlua3MgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1t2LWxpbmtdJyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGRMaW5rcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICB2YXIgbGluayA9IGNoaWxkTGlua3NbaV07XG4gICAgICAgICAgdmFyIGV4aXN0aW5nSWQgPSBsaW5rLmdldEF0dHJpYnV0ZShMSU5LX1VQREFURSk7XG4gICAgICAgICAgdmFyIHZhbHVlID0gZXhpc3RpbmdJZCA/IGV4aXN0aW5nSWQgKyAnLCcgKyBpZCA6IGlkO1xuICAgICAgICAgIC8vIGxlYXZlIGEgbWFyayBvbiB0aGUgbGluayBlbGVtZW50IHdoaWNoIGNhbiBiZSBwZXJzaXN0ZWRcbiAgICAgICAgICAvLyB0aHJvdWdoIGZyYWdtZW50IGNsb25lcy5cbiAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShMSU5LX1VQREFURSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudm0uJG9uKExJTktfVVBEQVRFLCB0aGlzLmNiID0gZnVuY3Rpb24gKGxpbmssIHBhdGgpIHtcbiAgICAgICAgICBpZiAobGluay5hY3RpdmVJZHMuaW5kZXhPZihpZCkgPiAtMSkge1xuICAgICAgICAgICAgbGluay51cGRhdGVDbGFzc2VzKHBhdGgsIF90aGlzLmVsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgICAgICB0aGlzLnZtLiRvZmYoTElOS19VUERBVEUsIHRoaXMuY2IpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgVnVlLmRpcmVjdGl2ZSgnbGluaycsIHtcbiAgICAgIHByaW9yaXR5OiBvblByaW9yaXR5IC0gMixcblxuICAgICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcy52bTtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmICghdm0uJHJvdXRlKSB7XG4gICAgICAgICAgd2FybiQxKCd2LWxpbmsgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgYSByb3V0ZXItZW5hYmxlZCBhcHAuJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucm91dGVyID0gdm0uJHJvdXRlLnJvdXRlcjtcbiAgICAgICAgLy8gdXBkYXRlIHRoaW5ncyB3aGVuIHRoZSByb3V0ZSBjaGFuZ2VzXG4gICAgICAgIHRoaXMudW53YXRjaCA9IHZtLiR3YXRjaCgnJHJvdXRlJywgX2JpbmQodGhpcy5vblJvdXRlVXBkYXRlLCB0aGlzKSk7XG4gICAgICAgIC8vIGNoZWNrIHYtbGluay1hY3RpdmUgaWRzXG4gICAgICAgIHZhciBhY3RpdmVJZHMgPSB0aGlzLmVsLmdldEF0dHJpYnV0ZShMSU5LX1VQREFURSk7XG4gICAgICAgIGlmIChhY3RpdmVJZHMpIHtcbiAgICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShMSU5LX1VQREFURSk7XG4gICAgICAgICAgdGhpcy5hY3RpdmVJZHMgPSBhY3RpdmVJZHMuc3BsaXQoJywnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBubyBuZWVkIHRvIGhhbmRsZSBjbGljayBpZiBsaW5rIGV4cGVjdHMgdG8gYmUgb3BlbmVkXG4gICAgICAgIC8vIGluIGEgbmV3IHdpbmRvdy90YWIuXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAodGhpcy5lbC50YWdOYW1lID09PSAnQScgJiYgdGhpcy5lbC5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpID09PSAnX2JsYW5rJykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBoYW5kbGUgY2xpY2tcbiAgICAgICAgdGhpcy5oYW5kbGVyID0gX2JpbmQodGhpcy5vbkNsaWNrLCB0aGlzKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlcik7XG4gICAgICB9LFxuXG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh0YXJnZXQpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIGlmIChpc09iamVjdCh0YXJnZXQpKSB7XG4gICAgICAgICAgdGhpcy5hcHBlbmQgPSB0YXJnZXQuYXBwZW5kO1xuICAgICAgICAgIHRoaXMuZXhhY3QgPSB0YXJnZXQuZXhhY3Q7XG4gICAgICAgICAgdGhpcy5wcmV2QWN0aXZlQ2xhc3MgPSB0aGlzLmFjdGl2ZUNsYXNzO1xuICAgICAgICAgIHRoaXMuYWN0aXZlQ2xhc3MgPSB0YXJnZXQuYWN0aXZlQ2xhc3M7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vblJvdXRlVXBkYXRlKHRoaXMudm0uJHJvdXRlKTtcbiAgICAgIH0sXG5cbiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAvLyBkb24ndCByZWRpcmVjdCB3aXRoIGNvbnRyb2wga2V5c1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKGUubWV0YUtleSB8fCBlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSkgcmV0dXJuO1xuICAgICAgICAvLyBkb24ndCByZWRpcmVjdCB3aGVuIHByZXZlbnREZWZhdWx0IGNhbGxlZFxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuICAgICAgICAvLyBkb24ndCByZWRpcmVjdCBvbiByaWdodCBjbGlja1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKGUuYnV0dG9uICE9PSAwKSByZXR1cm47XG5cbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMudGFyZ2V0O1xuICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgLy8gdi1saW5rIHdpdGggZXhwcmVzc2lvbiwganVzdCBnb1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzLnJvdXRlci5nbyh0YXJnZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG5vIGV4cHJlc3Npb24sIGRlbGVnYXRlIGZvciBhbiA8YT4gaW5zaWRlXG4gICAgICAgICAgdmFyIGVsID0gZS50YXJnZXQ7XG4gICAgICAgICAgd2hpbGUgKGVsLnRhZ05hbWUgIT09ICdBJyAmJiBlbCAhPT0gdGhpcy5lbCkge1xuICAgICAgICAgICAgZWwgPSBlbC5wYXJlbnROb2RlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZWwudGFnTmFtZSA9PT0gJ0EnICYmIHNhbWVPcmlnaW4oZWwpKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgcGF0aCA9IGVsLnBhdGhuYW1lO1xuICAgICAgICAgICAgaWYgKHRoaXMucm91dGVyLmhpc3Rvcnkucm9vdCkge1xuICAgICAgICAgICAgICBwYXRoID0gcGF0aC5yZXBsYWNlKHRoaXMucm91dGVyLmhpc3Rvcnkucm9vdFJFLCAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJvdXRlci5nbyh7XG4gICAgICAgICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgICAgICAgIHJlcGxhY2U6IHRhcmdldCAmJiB0YXJnZXQucmVwbGFjZSxcbiAgICAgICAgICAgICAgYXBwZW5kOiB0YXJnZXQgJiYgdGFyZ2V0LmFwcGVuZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBvblJvdXRlVXBkYXRlOiBmdW5jdGlvbiBvblJvdXRlVXBkYXRlKHJvdXRlKSB7XG4gICAgICAgIC8vIHJvdXRlci5zdHJpbmdpZnlQYXRoIGlzIGRlcGVuZGVudCBvbiBjdXJyZW50IHJvdXRlXG4gICAgICAgIC8vIGFuZCBuZWVkcyB0byBiZSBjYWxsZWQgYWdhaW4gd2hlbnZlciByb3V0ZSBjaGFuZ2VzLlxuICAgICAgICB2YXIgbmV3UGF0aCA9IHRoaXMucm91dGVyLnN0cmluZ2lmeVBhdGgodGhpcy50YXJnZXQpO1xuICAgICAgICBpZiAodGhpcy5wYXRoICE9PSBuZXdQYXRoKSB7XG4gICAgICAgICAgdGhpcy5wYXRoID0gbmV3UGF0aDtcbiAgICAgICAgICB0aGlzLnVwZGF0ZUFjdGl2ZU1hdGNoKCk7XG4gICAgICAgICAgdGhpcy51cGRhdGVIcmVmKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlSWRzKSB7XG4gICAgICAgICAgdGhpcy52bS4kZW1pdChMSU5LX1VQREFURSwgdGhpcywgcm91dGUucGF0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy51cGRhdGVDbGFzc2VzKHJvdXRlLnBhdGgsIHRoaXMuZWwpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICB1cGRhdGVBY3RpdmVNYXRjaDogZnVuY3Rpb24gdXBkYXRlQWN0aXZlTWF0Y2goKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlUkUgPSB0aGlzLnBhdGggJiYgIXRoaXMuZXhhY3QgPyBuZXcgUmVnRXhwKCdeJyArIHRoaXMucGF0aC5yZXBsYWNlKC9cXC8kLywgJycpLnJlcGxhY2UocXVlcnlTdHJpbmdSRSwgJycpLnJlcGxhY2UocmVnZXhFc2NhcGVSRSwgJ1xcXFwkJicpICsgJyhcXFxcL3wkKScpIDogbnVsbDtcbiAgICAgIH0sXG5cbiAgICAgIHVwZGF0ZUhyZWY6IGZ1bmN0aW9uIHVwZGF0ZUhyZWYoKSB7XG4gICAgICAgIGlmICh0aGlzLmVsLnRhZ05hbWUgIT09ICdBJykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGF0aCA9IHRoaXMucGF0aDtcbiAgICAgICAgdmFyIHJvdXRlciA9IHRoaXMucm91dGVyO1xuICAgICAgICB2YXIgaXNBYnNvbHV0ZSA9IHBhdGguY2hhckF0KDApID09PSAnLyc7XG4gICAgICAgIC8vIGRvIG5vdCBmb3JtYXQgbm9uLWhhc2ggcmVsYXRpdmUgcGF0aHNcbiAgICAgICAgdmFyIGhyZWYgPSBwYXRoICYmIChyb3V0ZXIubW9kZSA9PT0gJ2hhc2gnIHx8IGlzQWJzb2x1dGUpID8gcm91dGVyLmhpc3RvcnkuZm9ybWF0UGF0aChwYXRoLCB0aGlzLmFwcGVuZCkgOiBwYXRoO1xuICAgICAgICBpZiAoaHJlZikge1xuICAgICAgICAgIHRoaXMuZWwuaHJlZiA9IGhyZWY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ2hyZWYnKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgdXBkYXRlQ2xhc3NlczogZnVuY3Rpb24gdXBkYXRlQ2xhc3NlcyhwYXRoLCBlbCkge1xuICAgICAgICB2YXIgYWN0aXZlQ2xhc3MgPSB0aGlzLmFjdGl2ZUNsYXNzIHx8IHRoaXMucm91dGVyLl9saW5rQWN0aXZlQ2xhc3M7XG4gICAgICAgIC8vIGNsZWFyIG9sZCBjbGFzc1xuICAgICAgICBpZiAodGhpcy5wcmV2QWN0aXZlQ2xhc3MgJiYgdGhpcy5wcmV2QWN0aXZlQ2xhc3MgIT09IGFjdGl2ZUNsYXNzKSB7XG4gICAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgdGhpcy5wcmV2QWN0aXZlQ2xhc3MsIHJlbW92ZUNsYXNzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZW1vdmUgcXVlcnkgc3RyaW5nIGJlZm9yZSBtYXRjaGluZ1xuICAgICAgICB2YXIgZGVzdCA9IHRoaXMucGF0aC5yZXBsYWNlKHF1ZXJ5U3RyaW5nUkUsICcnKTtcbiAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZShxdWVyeVN0cmluZ1JFLCAnJyk7XG4gICAgICAgIC8vIGFkZCBuZXcgY2xhc3NcbiAgICAgICAgaWYgKHRoaXMuZXhhY3QpIHtcbiAgICAgICAgICBpZiAoZGVzdCA9PT0gcGF0aCB8fFxuICAgICAgICAgIC8vIGFsc28gYWxsb3cgYWRkaXRpb25hbCB0cmFpbGluZyBzbGFzaFxuICAgICAgICAgIGRlc3QuY2hhckF0KGRlc3QubGVuZ3RoIC0gMSkgIT09ICcvJyAmJiBkZXN0ID09PSBwYXRoLnJlcGxhY2UodHJhaWxpbmdTbGFzaFJFLCAnJykpIHtcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGFjdGl2ZUNsYXNzLCBhZGRDbGFzcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGFjdGl2ZUNsYXNzLCByZW1vdmVDbGFzcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVJFICYmIHRoaXMuYWN0aXZlUkUudGVzdChwYXRoKSkge1xuICAgICAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgYWN0aXZlQ2xhc3MsIGFkZENsYXNzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgYWN0aXZlQ2xhc3MsIHJlbW92ZUNsYXNzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVyKTtcbiAgICAgICAgdGhpcy51bndhdGNoICYmIHRoaXMudW53YXRjaCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gc2FtZU9yaWdpbihsaW5rKSB7XG4gICAgICByZXR1cm4gbGluay5wcm90b2NvbCA9PT0gbG9jYXRpb24ucHJvdG9jb2wgJiYgbGluay5ob3N0bmFtZSA9PT0gbG9jYXRpb24uaG9zdG5hbWUgJiYgbGluay5wb3J0ID09PSBsb2NhdGlvbi5wb3J0O1xuICAgIH1cblxuICAgIC8vIHRoaXMgZnVuY3Rpb24gaXMgY29waWVkIGZyb20gdi1iaW5kOmNsYXNzIGltcGxlbWVudGF0aW9uIHVudGlsXG4gICAgLy8gd2UgcHJvcGVybHkgZXhwb3NlIGl0Li4uXG4gICAgZnVuY3Rpb24gdG9nZ2xlQ2xhc3NlcyhlbCwga2V5LCBmbikge1xuICAgICAga2V5ID0ga2V5LnRyaW0oKTtcbiAgICAgIGlmIChrZXkuaW5kZXhPZignICcpID09PSAtMSkge1xuICAgICAgICBmbihlbCwga2V5KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIGtleXMgPSBrZXkuc3BsaXQoL1xccysvKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgZm4oZWwsIGtleXNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBoaXN0b3J5QmFja2VuZHMgPSB7XG4gICAgYWJzdHJhY3Q6IEFic3RyYWN0SGlzdG9yeSxcbiAgICBoYXNoOiBIYXNoSGlzdG9yeSxcbiAgICBodG1sNTogSFRNTDVIaXN0b3J5XG4gIH07XG5cbiAgLy8gbGF0ZSBiaW5kIGR1cmluZyBpbnN0YWxsXG4gIHZhciBWdWUgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFJvdXRlciBjb25zdHJ1Y3RvclxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqL1xuXG4gIHZhciBSb3V0ZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJvdXRlcigpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMF07XG5cbiAgICAgIHZhciBfcmVmJGhhc2hiYW5nID0gX3JlZi5oYXNoYmFuZztcbiAgICAgIHZhciBoYXNoYmFuZyA9IF9yZWYkaGFzaGJhbmcgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBfcmVmJGhhc2hiYW5nO1xuICAgICAgdmFyIF9yZWYkYWJzdHJhY3QgPSBfcmVmLmFic3RyYWN0O1xuICAgICAgdmFyIGFic3RyYWN0ID0gX3JlZiRhYnN0cmFjdCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJGFic3RyYWN0O1xuICAgICAgdmFyIF9yZWYkaGlzdG9yeSA9IF9yZWYuaGlzdG9yeTtcbiAgICAgIHZhciBoaXN0b3J5ID0gX3JlZiRoaXN0b3J5ID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkaGlzdG9yeTtcbiAgICAgIHZhciBfcmVmJHNhdmVTY3JvbGxQb3NpdGlvbiA9IF9yZWYuc2F2ZVNjcm9sbFBvc2l0aW9uO1xuICAgICAgdmFyIHNhdmVTY3JvbGxQb3NpdGlvbiA9IF9yZWYkc2F2ZVNjcm9sbFBvc2l0aW9uID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkc2F2ZVNjcm9sbFBvc2l0aW9uO1xuICAgICAgdmFyIF9yZWYkdHJhbnNpdGlvbk9uTG9hZCA9IF9yZWYudHJhbnNpdGlvbk9uTG9hZDtcbiAgICAgIHZhciB0cmFuc2l0aW9uT25Mb2FkID0gX3JlZiR0cmFuc2l0aW9uT25Mb2FkID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkdHJhbnNpdGlvbk9uTG9hZDtcbiAgICAgIHZhciBfcmVmJHN1cHByZXNzVHJhbnNpdGlvbkVycm9yID0gX3JlZi5zdXBwcmVzc1RyYW5zaXRpb25FcnJvcjtcbiAgICAgIHZhciBzdXBwcmVzc1RyYW5zaXRpb25FcnJvciA9IF9yZWYkc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3IgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRzdXBwcmVzc1RyYW5zaXRpb25FcnJvcjtcbiAgICAgIHZhciBfcmVmJHJvb3QgPSBfcmVmLnJvb3Q7XG4gICAgICB2YXIgcm9vdCA9IF9yZWYkcm9vdCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IF9yZWYkcm9vdDtcbiAgICAgIHZhciBfcmVmJGxpbmtBY3RpdmVDbGFzcyA9IF9yZWYubGlua0FjdGl2ZUNsYXNzO1xuICAgICAgdmFyIGxpbmtBY3RpdmVDbGFzcyA9IF9yZWYkbGlua0FjdGl2ZUNsYXNzID09PSB1bmRlZmluZWQgPyAndi1saW5rLWFjdGl2ZScgOiBfcmVmJGxpbmtBY3RpdmVDbGFzcztcbiAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBSb3V0ZXIpO1xuXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICghUm91dGVyLmluc3RhbGxlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBpbnN0YWxsIHRoZSBSb3V0ZXIgd2l0aCBWdWUudXNlKCkgYmVmb3JlICcgKyAnY3JlYXRpbmcgYW4gaW5zdGFuY2UuJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFZ1ZSBpbnN0YW5jZXNcbiAgICAgIHRoaXMuYXBwID0gbnVsbDtcbiAgICAgIHRoaXMuX2NoaWxkcmVuID0gW107XG5cbiAgICAgIC8vIHJvdXRlIHJlY29nbml6ZXJcbiAgICAgIHRoaXMuX3JlY29nbml6ZXIgPSBuZXcgUm91dGVSZWNvZ25pemVyKCk7XG4gICAgICB0aGlzLl9ndWFyZFJlY29nbml6ZXIgPSBuZXcgUm91dGVSZWNvZ25pemVyKCk7XG5cbiAgICAgIC8vIHN0YXRlXG4gICAgICB0aGlzLl9zdGFydGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9zdGFydENiID0gbnVsbDtcbiAgICAgIHRoaXMuX2N1cnJlbnRSb3V0ZSA9IHt9O1xuICAgICAgdGhpcy5fY3VycmVudFRyYW5zaXRpb24gPSBudWxsO1xuICAgICAgdGhpcy5fcHJldmlvdXNUcmFuc2l0aW9uID0gbnVsbDtcbiAgICAgIHRoaXMuX25vdEZvdW5kSGFuZGxlciA9IG51bGw7XG4gICAgICB0aGlzLl9ub3RGb3VuZFJlZGlyZWN0ID0gbnVsbDtcbiAgICAgIHRoaXMuX2JlZm9yZUVhY2hIb29rcyA9IFtdO1xuICAgICAgdGhpcy5fYWZ0ZXJFYWNoSG9va3MgPSBbXTtcblxuICAgICAgLy8gdHJpZ2dlciB0cmFuc2l0aW9uIG9uIGluaXRpYWwgcmVuZGVyP1xuICAgICAgdGhpcy5fcmVuZGVyZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3RyYW5zaXRpb25PbkxvYWQgPSB0cmFuc2l0aW9uT25Mb2FkO1xuXG4gICAgICAvLyBoaXN0b3J5IG1vZGVcbiAgICAgIHRoaXMuX3Jvb3QgPSByb290O1xuICAgICAgdGhpcy5fYWJzdHJhY3QgPSBhYnN0cmFjdDtcbiAgICAgIHRoaXMuX2hhc2hiYW5nID0gaGFzaGJhbmc7XG5cbiAgICAgIC8vIGNoZWNrIGlmIEhUTUw1IGhpc3RvcnkgaXMgYXZhaWxhYmxlXG4gICAgICB2YXIgaGFzUHVzaFN0YXRlID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lmhpc3RvcnkgJiYgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlO1xuICAgICAgdGhpcy5faGlzdG9yeSA9IGhpc3RvcnkgJiYgaGFzUHVzaFN0YXRlO1xuICAgICAgdGhpcy5faGlzdG9yeUZhbGxiYWNrID0gaGlzdG9yeSAmJiAhaGFzUHVzaFN0YXRlO1xuXG4gICAgICAvLyBjcmVhdGUgaGlzdG9yeSBvYmplY3RcbiAgICAgIHZhciBpbkJyb3dzZXIgPSBWdWUudXRpbC5pbkJyb3dzZXI7XG4gICAgICB0aGlzLm1vZGUgPSAhaW5Ccm93c2VyIHx8IHRoaXMuX2Fic3RyYWN0ID8gJ2Fic3RyYWN0JyA6IHRoaXMuX2hpc3RvcnkgPyAnaHRtbDUnIDogJ2hhc2gnO1xuXG4gICAgICB2YXIgSGlzdG9yeSA9IGhpc3RvcnlCYWNrZW5kc1t0aGlzLm1vZGVdO1xuICAgICAgdGhpcy5oaXN0b3J5ID0gbmV3IEhpc3Rvcnkoe1xuICAgICAgICByb290OiByb290LFxuICAgICAgICBoYXNoYmFuZzogdGhpcy5faGFzaGJhbmcsXG4gICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShwYXRoLCBzdGF0ZSwgYW5jaG9yKSB7XG4gICAgICAgICAgX3RoaXMuX21hdGNoKHBhdGgsIHN0YXRlLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gb3RoZXIgb3B0aW9uc1xuICAgICAgdGhpcy5fc2F2ZVNjcm9sbFBvc2l0aW9uID0gc2F2ZVNjcm9sbFBvc2l0aW9uO1xuICAgICAgdGhpcy5fbGlua0FjdGl2ZUNsYXNzID0gbGlua0FjdGl2ZUNsYXNzO1xuICAgICAgdGhpcy5fc3VwcHJlc3MgPSBzdXBwcmVzc1RyYW5zaXRpb25FcnJvcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbGxvdyBkaXJlY3RseSBwYXNzaW5nIGNvbXBvbmVudHMgdG8gYSByb3V0ZVxuICAgICAqIGRlZmluaXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG4gICAgICovXG5cbiAgICAvLyBBUEkgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAvKipcbiAgICAqIFJlZ2lzdGVyIGEgbWFwIG9mIHRvcC1sZXZlbCBwYXRocy5cbiAgICAqXG4gICAgKiBAcGFyYW0ge09iamVjdH0gbWFwXG4gICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24gbWFwKF9tYXApIHtcbiAgICAgIGZvciAodmFyIHJvdXRlIGluIF9tYXApIHtcbiAgICAgICAgdGhpcy5vbihyb3V0ZSwgX21hcFtyb3V0ZV0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGEgc2luZ2xlIHJvb3QtbGV2ZWwgcGF0aFxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHJvb3RQYXRoXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBjb21wb25lbnRcbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBbc3ViUm91dGVzXVxuICAgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBbZm9yY2VSZWZyZXNoXVxuICAgICAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW2JlZm9yZV1cbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFthZnRlcl1cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihyb290UGF0aCwgaGFuZGxlcikge1xuICAgICAgaWYgKHJvb3RQYXRoID09PSAnKicpIHtcbiAgICAgICAgdGhpcy5fbm90Rm91bmQoaGFuZGxlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9hZGRSb3V0ZShyb290UGF0aCwgaGFuZGxlciwgW10pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNldCByZWRpcmVjdHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFwXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLnJlZGlyZWN0ID0gZnVuY3Rpb24gcmVkaXJlY3QobWFwKSB7XG4gICAgICBmb3IgKHZhciBwYXRoIGluIG1hcCkge1xuICAgICAgICB0aGlzLl9hZGRSZWRpcmVjdChwYXRoLCBtYXBbcGF0aF0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNldCBhbGlhc2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1hcFxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5hbGlhcyA9IGZ1bmN0aW9uIGFsaWFzKG1hcCkge1xuICAgICAgZm9yICh2YXIgcGF0aCBpbiBtYXApIHtcbiAgICAgICAgdGhpcy5fYWRkQWxpYXMocGF0aCwgbWFwW3BhdGhdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXQgZ2xvYmFsIGJlZm9yZSBob29rLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuYmVmb3JlRWFjaCA9IGZ1bmN0aW9uIGJlZm9yZUVhY2goZm4pIHtcbiAgICAgIHRoaXMuX2JlZm9yZUVhY2hIb29rcy5wdXNoKGZuKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXQgZ2xvYmFsIGFmdGVyIGhvb2suXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5hZnRlckVhY2ggPSBmdW5jdGlvbiBhZnRlckVhY2goZm4pIHtcbiAgICAgIHRoaXMuX2FmdGVyRWFjaEhvb2tzLnB1c2goZm4pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE5hdmlnYXRlIHRvIGEgZ2l2ZW4gcGF0aC5cbiAgICAgKiBUaGUgcGF0aCBjYW4gYmUgYW4gb2JqZWN0IGRlc2NyaWJpbmcgYSBuYW1lZCBwYXRoIGluXG4gICAgICogdGhlIGZvcm1hdCBvZiB7IG5hbWU6ICcuLi4nLCBwYXJhbXM6IHt9LCBxdWVyeToge319XG4gICAgICogVGhlIHBhdGggaXMgYXNzdW1lZCB0byBiZSBhbHJlYWR5IGRlY29kZWQsIGFuZCB3aWxsXG4gICAgICogYmUgcmVzb2x2ZWQgYWdhaW5zdCByb290IChpZiBwcm92aWRlZClcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gcGF0aFxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3JlcGxhY2VdXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gZ28ocGF0aCkge1xuICAgICAgdmFyIHJlcGxhY2UgPSBmYWxzZTtcbiAgICAgIHZhciBhcHBlbmQgPSBmYWxzZTtcbiAgICAgIGlmIChWdWUudXRpbC5pc09iamVjdChwYXRoKSkge1xuICAgICAgICByZXBsYWNlID0gcGF0aC5yZXBsYWNlO1xuICAgICAgICBhcHBlbmQgPSBwYXRoLmFwcGVuZDtcbiAgICAgIH1cbiAgICAgIHBhdGggPSB0aGlzLnN0cmluZ2lmeVBhdGgocGF0aCk7XG4gICAgICBpZiAocGF0aCkge1xuICAgICAgICB0aGlzLmhpc3RvcnkuZ28ocGF0aCwgcmVwbGFjZSwgYXBwZW5kKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2hvcnQgaGFuZCBmb3IgcmVwbGFjaW5nIGN1cnJlbnQgcGF0aFxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUucmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UocGF0aCkge1xuICAgICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgICAgICBwYXRoID0geyBwYXRoOiBwYXRoIH07XG4gICAgICB9XG4gICAgICBwYXRoLnJlcGxhY2UgPSB0cnVlO1xuICAgICAgdGhpcy5nbyhwYXRoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3RhcnQgdGhlIHJvdXRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VnVlQ29uc3RydWN0b3J9IEFwcFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGNvbnRhaW5lclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydChBcHAsIGNvbnRhaW5lciwgY2IpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHRoaXMuX3N0YXJ0ZWQpIHtcbiAgICAgICAgd2FybiQxKCdhbHJlYWR5IHN0YXJ0ZWQuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fc3RhcnRDYiA9IGNiO1xuICAgICAgaWYgKCF0aGlzLmFwcCkge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKCFBcHAgfHwgIWNvbnRhaW5lcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTXVzdCBzdGFydCB2dWUtcm91dGVyIHdpdGggYSBjb21wb25lbnQgYW5kIGEgJyArICdyb290IGNvbnRhaW5lci4nKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKEFwcCBpbnN0YW5jZW9mIFZ1ZSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTXVzdCBzdGFydCB2dWUtcm91dGVyIHdpdGggYSBjb21wb25lbnQsIG5vdCBhICcgKyAnVnVlIGluc3RhbmNlLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2FwcENvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdmFyIEN0b3IgPSB0aGlzLl9hcHBDb25zdHJ1Y3RvciA9IHR5cGVvZiBBcHAgPT09ICdmdW5jdGlvbicgPyBBcHAgOiBWdWUuZXh0ZW5kKEFwcCk7XG4gICAgICAgIC8vIGdpdmUgaXQgYSBuYW1lIGZvciBiZXR0ZXIgZGVidWdnaW5nXG4gICAgICAgIEN0b3Iub3B0aW9ucy5uYW1lID0gQ3Rvci5vcHRpb25zLm5hbWUgfHwgJ1JvdXRlckFwcCc7XG4gICAgICB9XG5cbiAgICAgIC8vIGhhbmRsZSBoaXN0b3J5IGZhbGxiYWNrIGluIGJyb3dzZXJzIHRoYXQgZG8gbm90XG4gICAgICAvLyBzdXBwb3J0IEhUTUw1IGhpc3RvcnkgQVBJXG4gICAgICBpZiAodGhpcy5faGlzdG9yeUZhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG4gICAgICAgIHZhciBfaGlzdG9yeSA9IG5ldyBIVE1MNUhpc3RvcnkoeyByb290OiB0aGlzLl9yb290IH0pO1xuICAgICAgICB2YXIgcGF0aCA9IF9oaXN0b3J5LnJvb3QgPyBfbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZShfaGlzdG9yeS5yb290UkUsICcnKSA6IF9sb2NhdGlvbi5wYXRobmFtZTtcbiAgICAgICAgaWYgKHBhdGggJiYgcGF0aCAhPT0gJy8nKSB7XG4gICAgICAgICAgX2xvY2F0aW9uLmFzc2lnbigoX2hpc3Rvcnkucm9vdCB8fCAnJykgKyAnLycgKyB0aGlzLmhpc3RvcnkuZm9ybWF0UGF0aChwYXRoKSArIF9sb2NhdGlvbi5zZWFyY2gpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmhpc3Rvcnkuc3RhcnQoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3RvcCBsaXN0ZW5pbmcgdG8gcm91dGUgY2hhbmdlcy5cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICB0aGlzLmhpc3Rvcnkuc3RvcCgpO1xuICAgICAgdGhpcy5fc3RhcnRlZCA9IGZhbHNlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBOb3JtYWxpemUgbmFtZWQgcm91dGUgb2JqZWN0IC8gc3RyaW5nIHBhdGhzIGludG9cbiAgICAgKiBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ3xOdW1iZXJ9IHBhdGhcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLnN0cmluZ2lmeVBhdGggPSBmdW5jdGlvbiBzdHJpbmdpZnlQYXRoKHBhdGgpIHtcbiAgICAgIHZhciBnZW5lcmF0ZWRQYXRoID0gJyc7XG4gICAgICBpZiAocGF0aCAmJiB0eXBlb2YgcGF0aCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgaWYgKHBhdGgubmFtZSkge1xuICAgICAgICAgIHZhciBleHRlbmQgPSBWdWUudXRpbC5leHRlbmQ7XG4gICAgICAgICAgdmFyIGN1cnJlbnRQYXJhbXMgPSB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbiAmJiB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbi50by5wYXJhbXM7XG4gICAgICAgICAgdmFyIHRhcmdldFBhcmFtcyA9IHBhdGgucGFyYW1zIHx8IHt9O1xuICAgICAgICAgIHZhciBwYXJhbXMgPSBjdXJyZW50UGFyYW1zID8gZXh0ZW5kKGV4dGVuZCh7fSwgY3VycmVudFBhcmFtcyksIHRhcmdldFBhcmFtcykgOiB0YXJnZXRQYXJhbXM7XG4gICAgICAgICAgZ2VuZXJhdGVkUGF0aCA9IGVuY29kZVVSSSh0aGlzLl9yZWNvZ25pemVyLmdlbmVyYXRlKHBhdGgubmFtZSwgcGFyYW1zKSk7XG4gICAgICAgIH0gZWxzZSBpZiAocGF0aC5wYXRoKSB7XG4gICAgICAgICAgZ2VuZXJhdGVkUGF0aCA9IGVuY29kZVVSSShwYXRoLnBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXRoLnF1ZXJ5KSB7XG4gICAgICAgICAgLy8gbm90ZTogdGhlIGdlbmVyYXRlZCBxdWVyeSBzdHJpbmcgaXMgcHJlLVVSTC1lbmNvZGVkIGJ5IHRoZSByZWNvZ25pemVyXG4gICAgICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5fcmVjb2duaXplci5nZW5lcmF0ZVF1ZXJ5U3RyaW5nKHBhdGgucXVlcnkpO1xuICAgICAgICAgIGlmIChnZW5lcmF0ZWRQYXRoLmluZGV4T2YoJz8nKSA+IC0xKSB7XG4gICAgICAgICAgICBnZW5lcmF0ZWRQYXRoICs9ICcmJyArIHF1ZXJ5LnNsaWNlKDEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnZW5lcmF0ZWRQYXRoICs9IHF1ZXJ5O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2VuZXJhdGVkUGF0aCA9IGVuY29kZVVSSShwYXRoID8gcGF0aCArICcnIDogJycpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGdlbmVyYXRlZFBhdGg7XG4gICAgfTtcblxuICAgIC8vIEludGVybmFsIG1ldGhvZHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIC8qKlxuICAgICogQWRkIGEgcm91dGUgY29udGFpbmluZyBhIGxpc3Qgb2Ygc2VnbWVudHMgdG8gdGhlIGludGVybmFsXG4gICAgKiByb3V0ZSByZWNvZ25pemVyLiBXaWxsIGJlIGNhbGxlZCByZWN1cnNpdmVseSB0byBhZGQgYWxsXG4gICAgKiBwb3NzaWJsZSBzdWItcm91dGVzLlxuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuICAgICogQHBhcmFtIHtBcnJheX0gc2VnbWVudHNcbiAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5fYWRkUm91dGUgPSBmdW5jdGlvbiBfYWRkUm91dGUocGF0aCwgaGFuZGxlciwgc2VnbWVudHMpIHtcbiAgICAgIGd1YXJkQ29tcG9uZW50KHBhdGgsIGhhbmRsZXIpO1xuICAgICAgaGFuZGxlci5wYXRoID0gcGF0aDtcbiAgICAgIGhhbmRsZXIuZnVsbFBhdGggPSAoc2VnbWVudHMucmVkdWNlKGZ1bmN0aW9uIChwYXRoLCBzZWdtZW50KSB7XG4gICAgICAgIHJldHVybiBwYXRoICsgc2VnbWVudC5wYXRoO1xuICAgICAgfSwgJycpICsgcGF0aCkucmVwbGFjZSgnLy8nLCAnLycpO1xuICAgICAgc2VnbWVudHMucHVzaCh7XG4gICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgIGhhbmRsZXI6IGhhbmRsZXJcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fcmVjb2duaXplci5hZGQoc2VnbWVudHMsIHtcbiAgICAgICAgYXM6IGhhbmRsZXIubmFtZVxuICAgICAgfSk7XG4gICAgICAvLyBhZGQgc3ViIHJvdXRlc1xuICAgICAgaWYgKGhhbmRsZXIuc3ViUm91dGVzKSB7XG4gICAgICAgIGZvciAodmFyIHN1YlBhdGggaW4gaGFuZGxlci5zdWJSb3V0ZXMpIHtcbiAgICAgICAgICAvLyByZWN1cnNpdmVseSB3YWxrIGFsbCBzdWIgcm91dGVzXG4gICAgICAgICAgdGhpcy5fYWRkUm91dGUoc3ViUGF0aCwgaGFuZGxlci5zdWJSb3V0ZXNbc3ViUGF0aF0sXG4gICAgICAgICAgLy8gcGFzcyBhIGNvcHkgaW4gcmVjdXJzaW9uIHRvIGF2b2lkIG11dGF0aW5nXG4gICAgICAgICAgLy8gYWNyb3NzIGJyYW5jaGVzXG4gICAgICAgICAgc2VnbWVudHMuc2xpY2UoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBub3RGb3VuZCByb3V0ZSBoYW5kbGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuX25vdEZvdW5kID0gZnVuY3Rpb24gX25vdEZvdW5kKGhhbmRsZXIpIHtcbiAgICAgIGd1YXJkQ29tcG9uZW50KCcqJywgaGFuZGxlcik7XG4gICAgICB0aGlzLl9ub3RGb3VuZEhhbmRsZXIgPSBbeyBoYW5kbGVyOiBoYW5kbGVyIH1dO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSByZWRpcmVjdCByZWNvcmQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSByZWRpcmVjdFBhdGhcbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuX2FkZFJlZGlyZWN0ID0gZnVuY3Rpb24gX2FkZFJlZGlyZWN0KHBhdGgsIHJlZGlyZWN0UGF0aCkge1xuICAgICAgaWYgKHBhdGggPT09ICcqJykge1xuICAgICAgICB0aGlzLl9ub3RGb3VuZFJlZGlyZWN0ID0gcmVkaXJlY3RQYXRoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYWRkR3VhcmQocGF0aCwgcmVkaXJlY3RQYXRoLCB0aGlzLnJlcGxhY2UpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gYWxpYXMgcmVjb3JkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYWxpYXNQYXRoXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLl9hZGRBbGlhcyA9IGZ1bmN0aW9uIF9hZGRBbGlhcyhwYXRoLCBhbGlhc1BhdGgpIHtcbiAgICAgIHRoaXMuX2FkZEd1YXJkKHBhdGgsIGFsaWFzUGF0aCwgdGhpcy5fbWF0Y2gpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBwYXRoIGd1YXJkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWFwcGVkUGF0aFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuX2FkZEd1YXJkID0gZnVuY3Rpb24gX2FkZEd1YXJkKHBhdGgsIG1hcHBlZFBhdGgsIF9oYW5kbGVyKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdGhpcy5fZ3VhcmRSZWNvZ25pemVyLmFkZChbe1xuICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG1hdGNoLCBxdWVyeSkge1xuICAgICAgICAgIHZhciByZWFsUGF0aCA9IG1hcFBhcmFtcyhtYXBwZWRQYXRoLCBtYXRjaC5wYXJhbXMsIHF1ZXJ5KTtcbiAgICAgICAgICBfaGFuZGxlci5jYWxsKF90aGlzMiwgcmVhbFBhdGgpO1xuICAgICAgICB9XG4gICAgICB9XSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGEgcGF0aCBtYXRjaGVzIGFueSByZWRpcmVjdCByZWNvcmRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSAtIGlmIHRydWUsIHdpbGwgc2tpcCBub3JtYWwgbWF0Y2guXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLl9jaGVja0d1YXJkID0gZnVuY3Rpb24gX2NoZWNrR3VhcmQocGF0aCkge1xuICAgICAgdmFyIG1hdGNoZWQgPSB0aGlzLl9ndWFyZFJlY29nbml6ZXIucmVjb2duaXplKHBhdGgsIHRydWUpO1xuICAgICAgaWYgKG1hdGNoZWQpIHtcbiAgICAgICAgbWF0Y2hlZFswXS5oYW5kbGVyKG1hdGNoZWRbMF0sIG1hdGNoZWQucXVlcnlQYXJhbXMpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fbm90Rm91bmRSZWRpcmVjdCkge1xuICAgICAgICBtYXRjaGVkID0gdGhpcy5fcmVjb2duaXplci5yZWNvZ25pemUocGF0aCk7XG4gICAgICAgIGlmICghbWF0Y2hlZCkge1xuICAgICAgICAgIHRoaXMucmVwbGFjZSh0aGlzLl9ub3RGb3VuZFJlZGlyZWN0KTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBNYXRjaCBhIFVSTCBwYXRoIGFuZCBzZXQgdGhlIHJvdXRlIGNvbnRleHQgb24gdm0sXG4gICAgICogdHJpZ2dlcmluZyB2aWV3IHVwZGF0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhdGVdXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFthbmNob3JdXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLl9tYXRjaCA9IGZ1bmN0aW9uIF9tYXRjaChwYXRoLCBzdGF0ZSwgYW5jaG9yKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMuX2NoZWNrR3VhcmQocGF0aCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgY3VycmVudFJvdXRlID0gdGhpcy5fY3VycmVudFJvdXRlO1xuICAgICAgdmFyIGN1cnJlbnRUcmFuc2l0aW9uID0gdGhpcy5fY3VycmVudFRyYW5zaXRpb247XG5cbiAgICAgIGlmIChjdXJyZW50VHJhbnNpdGlvbikge1xuICAgICAgICBpZiAoY3VycmVudFRyYW5zaXRpb24udG8ucGF0aCA9PT0gcGF0aCkge1xuICAgICAgICAgIC8vIGRvIG5vdGhpbmcgaWYgd2UgaGF2ZSBhbiBhY3RpdmUgdHJhbnNpdGlvbiBnb2luZyB0byB0aGUgc2FtZSBwYXRoXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRSb3V0ZS5wYXRoID09PSBwYXRoKSB7XG4gICAgICAgICAgLy8gV2UgYXJlIGdvaW5nIHRvIHRoZSBzYW1lIHBhdGgsIGJ1dCB3ZSBhbHNvIGhhdmUgYW4gb25nb2luZyBidXRcbiAgICAgICAgICAvLyBub3QteWV0LXZhbGlkYXRlZCB0cmFuc2l0aW9uLiBBYm9ydCB0aGF0IHRyYW5zaXRpb24gYW5kIHJlc2V0IHRvXG4gICAgICAgICAgLy8gcHJldiB0cmFuc2l0aW9uLlxuICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uLmFib3J0ZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uID0gdGhpcy5fcHJldlRyYW5zaXRpb247XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGdvaW5nIHRvIGEgdG90YWxseSBkaWZmZXJlbnQgcGF0aC4gYWJvcnQgb25nb2luZyB0cmFuc2l0aW9uLlxuICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uLmFib3J0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGNvbnN0cnVjdCBuZXcgcm91dGUgYW5kIHRyYW5zaXRpb24gY29udGV4dFxuICAgICAgdmFyIHJvdXRlID0gbmV3IFJvdXRlKHBhdGgsIHRoaXMpO1xuICAgICAgdmFyIHRyYW5zaXRpb24gPSBuZXcgUm91dGVUcmFuc2l0aW9uKHRoaXMsIHJvdXRlLCBjdXJyZW50Um91dGUpO1xuXG4gICAgICAvLyBjdXJyZW50IHRyYW5zaXRpb24gaXMgdXBkYXRlZCByaWdodCBub3cuXG4gICAgICAvLyBob3dldmVyLCBjdXJyZW50IHJvdXRlIHdpbGwgb25seSBiZSB1cGRhdGVkIGFmdGVyIHRoZSB0cmFuc2l0aW9uIGhhc1xuICAgICAgLy8gYmVlbiB2YWxpZGF0ZWQuXG4gICAgICB0aGlzLl9wcmV2VHJhbnNpdGlvbiA9IGN1cnJlbnRUcmFuc2l0aW9uO1xuICAgICAgdGhpcy5fY3VycmVudFRyYW5zaXRpb24gPSB0cmFuc2l0aW9uO1xuXG4gICAgICBpZiAoIXRoaXMuYXBwKSB7XG4gICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gaW5pdGlhbCByZW5kZXJcbiAgICAgICAgICB2YXIgcm91dGVyID0gX3RoaXMzO1xuICAgICAgICAgIF90aGlzMy5hcHAgPSBuZXcgX3RoaXMzLl9hcHBDb25zdHJ1Y3Rvcih7XG4gICAgICAgICAgICBlbDogX3RoaXMzLl9hcHBDb250YWluZXIsXG4gICAgICAgICAgICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge1xuICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIgPSByb3V0ZXI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX21ldGE6IHtcbiAgICAgICAgICAgICAgJHJvdXRlOiByb3V0ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBjaGVjayBnbG9iYWwgYmVmb3JlIGhvb2tcbiAgICAgIHZhciBiZWZvcmVIb29rcyA9IHRoaXMuX2JlZm9yZUVhY2hIb29rcztcbiAgICAgIHZhciBzdGFydFRyYW5zaXRpb24gPSBmdW5jdGlvbiBzdGFydFRyYW5zaXRpb24oKSB7XG4gICAgICAgIHRyYW5zaXRpb24uc3RhcnQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzMy5fcG9zdFRyYW5zaXRpb24ocm91dGUsIHN0YXRlLCBhbmNob3IpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIGlmIChiZWZvcmVIb29rcy5sZW5ndGgpIHtcbiAgICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShiZWZvcmVIb29rcywgZnVuY3Rpb24gKGhvb2ssIF8sIG5leHQpIHtcbiAgICAgICAgICBpZiAodHJhbnNpdGlvbiA9PT0gX3RoaXMzLl9jdXJyZW50VHJhbnNpdGlvbikge1xuICAgICAgICAgICAgdHJhbnNpdGlvbi5jYWxsSG9vayhob29rLCBudWxsLCBuZXh0LCB7XG4gICAgICAgICAgICAgIGV4cGVjdEJvb2xlYW46IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgc3RhcnRUcmFuc2l0aW9uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXJ0VHJhbnNpdGlvbigpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuX3JlbmRlcmVkICYmIHRoaXMuX3N0YXJ0Q2IpIHtcbiAgICAgICAgdGhpcy5fc3RhcnRDYi5jYWxsKG51bGwpO1xuICAgICAgfVxuXG4gICAgICAvLyBIQUNLOlxuICAgICAgLy8gc2V0IHJlbmRlcmVkIHRvIHRydWUgYWZ0ZXIgdGhlIHRyYW5zaXRpb24gc3RhcnQsIHNvXG4gICAgICAvLyB0aGF0IGNvbXBvbmVudHMgdGhhdCBhcmUgYWNpdHZhdGVkIHN5bmNocm9ub3VzbHkga25vd1xuICAgICAgLy8gd2hldGhlciBpdCBpcyB0aGUgaW5pdGlhbCByZW5kZXIuXG4gICAgICB0aGlzLl9yZW5kZXJlZCA9IHRydWU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNldCBjdXJyZW50IHRvIHRoZSBuZXcgdHJhbnNpdGlvbi5cbiAgICAgKiBUaGlzIGlzIGNhbGxlZCBieSB0aGUgdHJhbnNpdGlvbiBvYmplY3Qgd2hlbiB0aGVcbiAgICAgKiB2YWxpZGF0aW9uIG9mIGEgcm91dGUgaGFzIHN1Y2NlZWRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5fb25UcmFuc2l0aW9uVmFsaWRhdGVkID0gZnVuY3Rpb24gX29uVHJhbnNpdGlvblZhbGlkYXRlZCh0cmFuc2l0aW9uKSB7XG4gICAgICAvLyBzZXQgY3VycmVudCByb3V0ZVxuICAgICAgdmFyIHJvdXRlID0gdGhpcy5fY3VycmVudFJvdXRlID0gdHJhbnNpdGlvbi50bztcbiAgICAgIC8vIHVwZGF0ZSByb3V0ZSBjb250ZXh0IGZvciBhbGwgY2hpbGRyZW5cbiAgICAgIGlmICh0aGlzLmFwcC4kcm91dGUgIT09IHJvdXRlKSB7XG4gICAgICAgIHRoaXMuYXBwLiRyb3V0ZSA9IHJvdXRlO1xuICAgICAgICB0aGlzLl9jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgIGNoaWxkLiRyb3V0ZSA9IHJvdXRlO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIGNhbGwgZ2xvYmFsIGFmdGVyIGhvb2tcbiAgICAgIGlmICh0aGlzLl9hZnRlckVhY2hIb29rcy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5fYWZ0ZXJFYWNoSG9va3MuZm9yRWFjaChmdW5jdGlvbiAoaG9vaykge1xuICAgICAgICAgIHJldHVybiBob29rLmNhbGwobnVsbCwge1xuICAgICAgICAgICAgdG86IHRyYW5zaXRpb24udG8sXG4gICAgICAgICAgICBmcm9tOiB0cmFuc2l0aW9uLmZyb21cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbi5kb25lID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIHN0dWZmIGFmdGVyIHRoZSB0cmFuc2l0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSb3V0ZX0gcm91dGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3N0YXRlXVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbYW5jaG9yXVxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5fcG9zdFRyYW5zaXRpb24gPSBmdW5jdGlvbiBfcG9zdFRyYW5zaXRpb24ocm91dGUsIHN0YXRlLCBhbmNob3IpIHtcbiAgICAgIC8vIGhhbmRsZSBzY3JvbGwgcG9zaXRpb25zXG4gICAgICAvLyBzYXZlZCBzY3JvbGwgcG9zaXRpb25zIHRha2UgcHJpb3JpdHlcbiAgICAgIC8vIHRoZW4gd2UgY2hlY2sgaWYgdGhlIHBhdGggaGFzIGFuIGFuY2hvclxuICAgICAgdmFyIHBvcyA9IHN0YXRlICYmIHN0YXRlLnBvcztcbiAgICAgIGlmIChwb3MgJiYgdGhpcy5fc2F2ZVNjcm9sbFBvc2l0aW9uKSB7XG4gICAgICAgIFZ1ZS5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgd2luZG93LnNjcm9sbFRvKHBvcy54LCBwb3MueSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChhbmNob3IpIHtcbiAgICAgICAgVnVlLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhbmNob3Iuc2xpY2UoMSkpO1xuICAgICAgICAgIGlmIChlbCkge1xuICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKHdpbmRvdy5zY3JvbGxYLCBlbC5vZmZzZXRUb3ApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBSb3V0ZXI7XG4gIH0pKCk7XG5cbiAgZnVuY3Rpb24gZ3VhcmRDb21wb25lbnQocGF0aCwgaGFuZGxlcikge1xuICAgIHZhciBjb21wID0gaGFuZGxlci5jb21wb25lbnQ7XG4gICAgaWYgKFZ1ZS51dGlsLmlzUGxhaW5PYmplY3QoY29tcCkpIHtcbiAgICAgIGNvbXAgPSBoYW5kbGVyLmNvbXBvbmVudCA9IFZ1ZS5leHRlbmQoY29tcCk7XG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICh0eXBlb2YgY29tcCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaGFuZGxlci5jb21wb25lbnQgPSBudWxsO1xuICAgICAgd2FybiQxKCdpbnZhbGlkIGNvbXBvbmVudCBmb3Igcm91dGUgXCInICsgcGF0aCArICdcIi4nKTtcbiAgICB9XG4gIH1cblxuICAvKiBJbnN0YWxsYXRpb24gKi9cblxuICBSb3V0ZXIuaW5zdGFsbGVkID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIEluc3RhbGxhdGlvbiBpbnRlcmZhY2UuXG4gICAqIEluc3RhbGwgdGhlIG5lY2Vzc2FyeSBkaXJlY3RpdmVzLlxuICAgKi9cblxuICBSb3V0ZXIuaW5zdGFsbCA9IGZ1bmN0aW9uIChleHRlcm5hbFZ1ZSkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChSb3V0ZXIuaW5zdGFsbGVkKSB7XG4gICAgICB3YXJuJDEoJ2FscmVhZHkgaW5zdGFsbGVkLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBWdWUgPSBleHRlcm5hbFZ1ZTtcbiAgICBhcHBseU92ZXJyaWRlKFZ1ZSk7XG4gICAgVmlldyhWdWUpO1xuICAgIExpbmsoVnVlKTtcbiAgICBleHBvcnRzJDEuVnVlID0gVnVlO1xuICAgIFJvdXRlci5pbnN0YWxsZWQgPSB0cnVlO1xuICB9O1xuXG4gIC8vIGF1dG8gaW5zdGFsbFxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5WdWUpIHtcbiAgICB3aW5kb3cuVnVlLnVzZShSb3V0ZXIpO1xuICB9XG5cbiAgcmV0dXJuIFJvdXRlcjtcblxufSkpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1yb3V0ZXIvZGlzdC92dWUtcm91dGVyLmpzXG4gKiogbW9kdWxlIGlkID0gMjAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2Rldi9zcmMvY29tcG9uZW50cy9hcGktdGFibGUvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMjA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2Rldi9zcmMvY29tcG9uZW50cy9zaWRlLW5hdi9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vZGV2L3NyYy9jb21wb25lbnRzL3NpdGUtaGVhZGVyL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIwNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vZ2V0LXN0YXJ0ZWQudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vZ2V0LXN0YXJ0ZWQudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2dldC1zdGFydGVkLnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL2dldC1zdGFydGVkLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIwN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9hbGVydC9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvY29sbGFwc2FibGUtcGFuZWwvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMjA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9sZWdhbC1jb250YWluZXIudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY29udGFpbmVyLnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9sZWdhbC1jb250YWluZXIudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2xlZ2FsLWNvdW50ZXIudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY291bnRlci52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY291bnRlci52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY291bnRlci52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXktY29udGFpbmVyLnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXktY29udGFpbmVyLnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LWNvbnRhaW5lci52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LWNvbnRhaW5lci52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXkudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vb3ZlcmxheS52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vb3ZlcmxheS52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIxM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9zcGlubmVyL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIxNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9zdGVwLXRyYWNrZXIvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMjE1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi90YWJzLnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3RhYnMudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3RhYnMudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL3RhYi90YWJzLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIxNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiBWdWUuanMgdjEuMC4yNlxuICogKGMpIDIwMTYgRXZhbiBZb3VcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBzZXQob2JqLCBrZXksIHZhbCkge1xuICBpZiAoaGFzT3duKG9iaiwga2V5KSkge1xuICAgIG9ialtrZXldID0gdmFsO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAob2JqLl9pc1Z1ZSkge1xuICAgIHNldChvYmouX2RhdGEsIGtleSwgdmFsKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG9iID0gb2JqLl9fb2JfXztcbiAgaWYgKCFvYikge1xuICAgIG9ialtrZXldID0gdmFsO1xuICAgIHJldHVybjtcbiAgfVxuICBvYi5jb252ZXJ0KGtleSwgdmFsKTtcbiAgb2IuZGVwLm5vdGlmeSgpO1xuICBpZiAob2Iudm1zKSB7XG4gICAgdmFyIGkgPSBvYi52bXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciB2bSA9IG9iLnZtc1tpXTtcbiAgICAgIHZtLl9wcm94eShrZXkpO1xuICAgICAgdm0uX2RpZ2VzdCgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdmFsO1xufVxuXG4vKipcbiAqIERlbGV0ZSBhIHByb3BlcnR5IGFuZCB0cmlnZ2VyIGNoYW5nZSBpZiBuZWNlc3NhcnkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICovXG5cbmZ1bmN0aW9uIGRlbChvYmosIGtleSkge1xuICBpZiAoIWhhc093bihvYmosIGtleSkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZGVsZXRlIG9ialtrZXldO1xuICB2YXIgb2IgPSBvYmouX19vYl9fO1xuICBpZiAoIW9iKSB7XG4gICAgaWYgKG9iai5faXNWdWUpIHtcbiAgICAgIGRlbGV0ZSBvYmouX2RhdGFba2V5XTtcbiAgICAgIG9iai5fZGlnZXN0KCk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBvYi5kZXAubm90aWZ5KCk7XG4gIGlmIChvYi52bXMpIHtcbiAgICB2YXIgaSA9IG9iLnZtcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFyIHZtID0gb2Iudm1zW2ldO1xuICAgICAgdm0uX3VucHJveHkoa2V5KTtcbiAgICAgIHZtLl9kaWdlc3QoKTtcbiAgICB9XG4gIH1cbn1cblxudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbi8qKlxuICogQ2hlY2sgd2hldGhlciB0aGUgb2JqZWN0IGhhcyB0aGUgcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBoYXNPd24ob2JqLCBrZXkpIHtcbiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBsaXRlcmFsIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxudmFyIGxpdGVyYWxWYWx1ZVJFID0gL15cXHM/KHRydWV8ZmFsc2V8LT9bXFxkXFwuXSt8J1teJ10qJ3xcIlteXCJdKlwiKVxccz8kLztcblxuZnVuY3Rpb24gaXNMaXRlcmFsKGV4cCkge1xuICByZXR1cm4gbGl0ZXJhbFZhbHVlUkUudGVzdChleHApO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgc3RyaW5nIHN0YXJ0cyB3aXRoICQgb3IgX1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNSZXNlcnZlZChzdHIpIHtcbiAgdmFyIGMgPSAoc3RyICsgJycpLmNoYXJDb2RlQXQoMCk7XG4gIHJldHVybiBjID09PSAweDI0IHx8IGMgPT09IDB4NUY7XG59XG5cbi8qKlxuICogR3VhcmQgdGV4dCBvdXRwdXQsIG1ha2Ugc3VyZSB1bmRlZmluZWQgb3V0cHV0c1xuICogZW1wdHkgc3RyaW5nXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIF90b1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWUudG9TdHJpbmcoKTtcbn1cblxuLyoqXG4gKiBDaGVjayBhbmQgY29udmVydCBwb3NzaWJsZSBudW1lcmljIHN0cmluZ3MgdG8gbnVtYmVyc1xuICogYmVmb3JlIHNldHRpbmcgYmFjayB0byBkYXRhXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7KnxOdW1iZXJ9XG4gKi9cblxuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHBhcnNlZCA9IE51bWJlcih2YWx1ZSk7XG4gICAgcmV0dXJuIGlzTmFOKHBhcnNlZCkgPyB2YWx1ZSA6IHBhcnNlZDtcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlcnQgc3RyaW5nIGJvb2xlYW4gbGl0ZXJhbHMgaW50byByZWFsIGJvb2xlYW5zLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4geyp8Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiB0b0Jvb2xlYW4odmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09PSAndHJ1ZScgPyB0cnVlIDogdmFsdWUgPT09ICdmYWxzZScgPyBmYWxzZSA6IHZhbHVlO1xufVxuXG4vKipcbiAqIFN0cmlwIHF1b3RlcyBmcm9tIGEgc3RyaW5nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nIHwgZmFsc2V9XG4gKi9cblxuZnVuY3Rpb24gc3RyaXBRdW90ZXMoc3RyKSB7XG4gIHZhciBhID0gc3RyLmNoYXJDb2RlQXQoMCk7XG4gIHZhciBiID0gc3RyLmNoYXJDb2RlQXQoc3RyLmxlbmd0aCAtIDEpO1xuICByZXR1cm4gYSA9PT0gYiAmJiAoYSA9PT0gMHgyMiB8fCBhID09PSAweDI3KSA/IHN0ci5zbGljZSgxLCAtMSkgOiBzdHI7XG59XG5cbi8qKlxuICogQ2FtZWxpemUgYSBoeXBoZW4tZGVsbWl0ZWQgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG52YXIgY2FtZWxpemVSRSA9IC8tKFxcdykvZztcblxuZnVuY3Rpb24gY2FtZWxpemUoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShjYW1lbGl6ZVJFLCB0b1VwcGVyKTtcbn1cblxuZnVuY3Rpb24gdG9VcHBlcihfLCBjKSB7XG4gIHJldHVybiBjID8gYy50b1VwcGVyQ2FzZSgpIDogJyc7XG59XG5cbi8qKlxuICogSHlwaGVuYXRlIGEgY2FtZWxDYXNlIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxudmFyIGh5cGhlbmF0ZVJFID0gLyhbYS16XFxkXSkoW0EtWl0pL2c7XG5cbmZ1bmN0aW9uIGh5cGhlbmF0ZShzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKGh5cGhlbmF0ZVJFLCAnJDEtJDInKS50b0xvd2VyQ2FzZSgpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGh5cGhlbi91bmRlcnNjb3JlL3NsYXNoIGRlbGltaXRlcmVkIG5hbWVzIGludG9cbiAqIGNhbWVsaXplZCBjbGFzc05hbWVzLlxuICpcbiAqIGUuZy4gbXktY29tcG9uZW50ID0+IE15Q29tcG9uZW50XG4gKiAgICAgIHNvbWVfZWxzZSAgICA9PiBTb21lRWxzZVxuICogICAgICBzb21lL2NvbXAgICAgPT4gU29tZUNvbXBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxudmFyIGNsYXNzaWZ5UkUgPSAvKD86XnxbLV9cXC9dKShcXHcpL2c7XG5cbmZ1bmN0aW9uIGNsYXNzaWZ5KHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoY2xhc3NpZnlSRSwgdG9VcHBlcik7XG59XG5cbi8qKlxuICogU2ltcGxlIGJpbmQsIGZhc3RlciB0aGFuIG5hdGl2ZVxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge09iamVjdH0gY3R4XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBiaW5kKGZuLCBjdHgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG4gICAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHJldHVybiBsID8gbCA+IDEgPyBmbi5hcHBseShjdHgsIGFyZ3VtZW50cykgOiBmbi5jYWxsKGN0eCwgYSkgOiBmbi5jYWxsKGN0eCk7XG4gIH07XG59XG5cbi8qKlxuICogQ29udmVydCBhbiBBcnJheS1saWtlIG9iamVjdCB0byBhIHJlYWwgQXJyYXkuXG4gKlxuICogQHBhcmFtIHtBcnJheS1saWtlfSBsaXN0XG4gKiBAcGFyYW0ge051bWJlcn0gW3N0YXJ0XSAtIHN0YXJ0IGluZGV4XG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuXG5mdW5jdGlvbiB0b0FycmF5KGxpc3QsIHN0YXJ0KSB7XG4gIHN0YXJ0ID0gc3RhcnQgfHwgMDtcbiAgdmFyIGkgPSBsaXN0Lmxlbmd0aCAtIHN0YXJ0O1xuICB2YXIgcmV0ID0gbmV3IEFycmF5KGkpO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgcmV0W2ldID0gbGlzdFtpICsgc3RhcnRdO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogTWl4IHByb3BlcnRpZXMgaW50byB0YXJnZXQgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0b1xuICogQHBhcmFtIHtPYmplY3R9IGZyb21cbiAqL1xuXG5mdW5jdGlvbiBleHRlbmQodG8sIGZyb20pIHtcbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhmcm9tKTtcbiAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIHRvW2tleXNbaV1dID0gZnJvbVtrZXlzW2ldXTtcbiAgfVxuICByZXR1cm4gdG87XG59XG5cbi8qKlxuICogUXVpY2sgb2JqZWN0IGNoZWNrIC0gdGhpcyBpcyBwcmltYXJpbHkgdXNlZCB0byB0ZWxsXG4gKiBPYmplY3RzIGZyb20gcHJpbWl0aXZlIHZhbHVlcyB3aGVuIHdlIGtub3cgdGhlIHZhbHVlXG4gKiBpcyBhIEpTT04tY29tcGxpYW50IHR5cGUuXG4gKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG4gIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogU3RyaWN0IG9iamVjdCB0eXBlIGNoZWNrLiBPbmx5IHJldHVybnMgdHJ1ZVxuICogZm9yIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xudmFyIE9CSkVDVF9TVFJJTkcgPSAnW29iamVjdCBPYmplY3RdJztcblxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gT0JKRUNUX1NUUklORztcbn1cblxuLyoqXG4gKiBBcnJheSB0eXBlIGNoZWNrLlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuLyoqXG4gKiBEZWZpbmUgYSBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0geyp9IHZhbFxuICogQHBhcmFtIHtCb29sZWFufSBbZW51bWVyYWJsZV1cbiAqL1xuXG5mdW5jdGlvbiBkZWYob2JqLCBrZXksIHZhbCwgZW51bWVyYWJsZSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICB2YWx1ZTogdmFsLFxuICAgIGVudW1lcmFibGU6ICEhZW51bWVyYWJsZSxcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5cbi8qKlxuICogRGVib3VuY2UgYSBmdW5jdGlvbiBzbyBpdCBvbmx5IGdldHMgY2FsbGVkIGFmdGVyIHRoZVxuICogaW5wdXQgc3RvcHMgYXJyaXZpbmcgYWZ0ZXIgdGhlIGdpdmVuIHdhaXQgcGVyaW9kLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmNcbiAqIEBwYXJhbSB7TnVtYmVyfSB3YWl0XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG4gKi9cblxuZnVuY3Rpb24gX2RlYm91bmNlKGZ1bmMsIHdhaXQpIHtcbiAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xuICB2YXIgbGF0ZXIgPSBmdW5jdGlvbiBsYXRlcigpIHtcbiAgICB2YXIgbGFzdCA9IERhdGUubm93KCkgLSB0aW1lc3RhbXA7XG4gICAgaWYgKGxhc3QgPCB3YWl0ICYmIGxhc3QgPj0gMCkge1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgfVxuICB9O1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGNvbnRleHQgPSB0aGlzO1xuICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICBpZiAoIXRpbWVvdXQpIHtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cblxuLyoqXG4gKiBNYW51YWwgaW5kZXhPZiBiZWNhdXNlIGl0J3Mgc2xpZ2h0bHkgZmFzdGVyIHRoYW5cbiAqIG5hdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKi9cblxuZnVuY3Rpb24gaW5kZXhPZihhcnIsIG9iaikge1xuICB2YXIgaSA9IGFyci5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBpZiAoYXJyW2ldID09PSBvYmopIHJldHVybiBpO1xuICB9XG4gIHJldHVybiAtMTtcbn1cblxuLyoqXG4gKiBNYWtlIGEgY2FuY2VsbGFibGUgdmVyc2lvbiBvZiBhbiBhc3luYyBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY2FuY2VsbGFibGUoZm4pIHtcbiAgdmFyIGNiID0gZnVuY3Rpb24gY2IoKSB7XG4gICAgaWYgKCFjYi5jYW5jZWxsZWQpIHtcbiAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfTtcbiAgY2IuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgIGNiLmNhbmNlbGxlZCA9IHRydWU7XG4gIH07XG4gIHJldHVybiBjYjtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0d28gdmFsdWVzIGFyZSBsb29zZWx5IGVxdWFsIC0gdGhhdCBpcyxcbiAqIGlmIHRoZXkgYXJlIHBsYWluIG9iamVjdHMsIGRvIHRoZXkgaGF2ZSB0aGUgc2FtZSBzaGFwZT9cbiAqXG4gKiBAcGFyYW0geyp9IGFcbiAqIEBwYXJhbSB7Kn0gYlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBsb29zZUVxdWFsKGEsIGIpIHtcbiAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gIHJldHVybiBhID09IGIgfHwgKGlzT2JqZWN0KGEpICYmIGlzT2JqZWN0KGIpID8gSlNPTi5zdHJpbmdpZnkoYSkgPT09IEpTT04uc3RyaW5naWZ5KGIpIDogZmFsc2UpO1xuICAvKiBlc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xufVxuXG52YXIgaGFzUHJvdG8gPSAoJ19fcHJvdG9fXycgaW4ge30pO1xuXG4vLyBCcm93c2VyIGVudmlyb25tZW50IHNuaWZmaW5nXG52YXIgaW5Ccm93c2VyID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHdpbmRvdykgIT09ICdbb2JqZWN0IE9iamVjdF0nO1xuXG4vLyBkZXRlY3QgZGV2dG9vbHNcbnZhciBkZXZ0b29scyA9IGluQnJvd3NlciAmJiB3aW5kb3cuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXztcblxuLy8gVUEgc25pZmZpbmcgZm9yIHdvcmtpbmcgYXJvdW5kIGJyb3dzZXItc3BlY2lmaWMgcXVpcmtzXG52YXIgVUEgPSBpbkJyb3dzZXIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbnZhciBpc0lFID0gVUEgJiYgVUEuaW5kZXhPZigndHJpZGVudCcpID4gMDtcbnZhciBpc0lFOSA9IFVBICYmIFVBLmluZGV4T2YoJ21zaWUgOS4wJykgPiAwO1xudmFyIGlzQW5kcm9pZCA9IFVBICYmIFVBLmluZGV4T2YoJ2FuZHJvaWQnKSA+IDA7XG52YXIgaXNJb3MgPSBVQSAmJiAvKGlwaG9uZXxpcGFkfGlwb2R8aW9zKS9pLnRlc3QoVUEpO1xudmFyIGlvc1ZlcnNpb25NYXRjaCA9IGlzSW9zICYmIFVBLm1hdGNoKC9vcyAoW1xcZF9dKykvKTtcbnZhciBpb3NWZXJzaW9uID0gaW9zVmVyc2lvbk1hdGNoICYmIGlvc1ZlcnNpb25NYXRjaFsxXS5zcGxpdCgnXycpO1xuXG4vLyBkZXRlY3RpbmcgaU9TIFVJV2ViVmlldyBieSBpbmRleGVkREJcbnZhciBoYXNNdXRhdGlvbk9ic2VydmVyQnVnID0gaW9zVmVyc2lvbiAmJiBOdW1iZXIoaW9zVmVyc2lvblswXSkgPj0gOSAmJiBOdW1iZXIoaW9zVmVyc2lvblsxXSkgPj0gMyAmJiAhd2luZG93LmluZGV4ZWREQjtcblxudmFyIHRyYW5zaXRpb25Qcm9wID0gdW5kZWZpbmVkO1xudmFyIHRyYW5zaXRpb25FbmRFdmVudCA9IHVuZGVmaW5lZDtcbnZhciBhbmltYXRpb25Qcm9wID0gdW5kZWZpbmVkO1xudmFyIGFuaW1hdGlvbkVuZEV2ZW50ID0gdW5kZWZpbmVkO1xuXG4vLyBUcmFuc2l0aW9uIHByb3BlcnR5L2V2ZW50IHNuaWZmaW5nXG5pZiAoaW5Ccm93c2VyICYmICFpc0lFOSkge1xuICB2YXIgaXNXZWJraXRUcmFucyA9IHdpbmRvdy5vbnRyYW5zaXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kICE9PSB1bmRlZmluZWQ7XG4gIHZhciBpc1dlYmtpdEFuaW0gPSB3aW5kb3cub25hbmltYXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQgIT09IHVuZGVmaW5lZDtcbiAgdHJhbnNpdGlvblByb3AgPSBpc1dlYmtpdFRyYW5zID8gJ1dlYmtpdFRyYW5zaXRpb24nIDogJ3RyYW5zaXRpb24nO1xuICB0cmFuc2l0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdFRyYW5zID8gJ3dlYmtpdFRyYW5zaXRpb25FbmQnIDogJ3RyYW5zaXRpb25lbmQnO1xuICBhbmltYXRpb25Qcm9wID0gaXNXZWJraXRBbmltID8gJ1dlYmtpdEFuaW1hdGlvbicgOiAnYW5pbWF0aW9uJztcbiAgYW5pbWF0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdEFuaW0gPyAnd2Via2l0QW5pbWF0aW9uRW5kJyA6ICdhbmltYXRpb25lbmQnO1xufVxuXG4vKipcbiAqIERlZmVyIGEgdGFzayB0byBleGVjdXRlIGl0IGFzeW5jaHJvbm91c2x5LiBJZGVhbGx5IHRoaXNcbiAqIHNob3VsZCBiZSBleGVjdXRlZCBhcyBhIG1pY3JvdGFzaywgc28gd2UgbGV2ZXJhZ2VcbiAqIE11dGF0aW9uT2JzZXJ2ZXIgaWYgaXQncyBhdmFpbGFibGUsIGFuZCBmYWxsYmFjayB0b1xuICogc2V0VGltZW91dCgwKS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtIHtPYmplY3R9IGN0eFxuICovXG5cbnZhciBuZXh0VGljayA9IChmdW5jdGlvbiAoKSB7XG4gIHZhciBjYWxsYmFja3MgPSBbXTtcbiAgdmFyIHBlbmRpbmcgPSBmYWxzZTtcbiAgdmFyIHRpbWVyRnVuYztcbiAgZnVuY3Rpb24gbmV4dFRpY2tIYW5kbGVyKCkge1xuICAgIHBlbmRpbmcgPSBmYWxzZTtcbiAgICB2YXIgY29waWVzID0gY2FsbGJhY2tzLnNsaWNlKDApO1xuICAgIGNhbGxiYWNrcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29waWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb3BpZXNbaV0oKTtcbiAgICB9XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyICE9PSAndW5kZWZpbmVkJyAmJiAhaGFzTXV0YXRpb25PYnNlcnZlckJ1Zykge1xuICAgIHZhciBjb3VudGVyID0gMTtcbiAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihuZXh0VGlja0hhbmRsZXIpO1xuICAgIHZhciB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNvdW50ZXIpO1xuICAgIG9ic2VydmVyLm9ic2VydmUodGV4dE5vZGUsIHtcbiAgICAgIGNoYXJhY3RlckRhdGE6IHRydWVcbiAgICB9KTtcbiAgICB0aW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBjb3VudGVyID0gKGNvdW50ZXIgKyAxKSAlIDI7XG4gICAgICB0ZXh0Tm9kZS5kYXRhID0gY291bnRlcjtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIHdlYnBhY2sgYXR0ZW1wdHMgdG8gaW5qZWN0IGEgc2hpbSBmb3Igc2V0SW1tZWRpYXRlXG4gICAgLy8gaWYgaXQgaXMgdXNlZCBhcyBhIGdsb2JhbCwgc28gd2UgaGF2ZSB0byB3b3JrIGFyb3VuZCB0aGF0IHRvXG4gICAgLy8gYXZvaWQgYnVuZGxpbmcgdW5uZWNlc3NhcnkgY29kZS5cbiAgICB2YXIgY29udGV4dCA9IGluQnJvd3NlciA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDoge307XG4gICAgdGltZXJGdW5jID0gY29udGV4dC5zZXRJbW1lZGlhdGUgfHwgc2V0VGltZW91dDtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKGNiLCBjdHgpIHtcbiAgICB2YXIgZnVuYyA9IGN0eCA/IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNiLmNhbGwoY3R4KTtcbiAgICB9IDogY2I7XG4gICAgY2FsbGJhY2tzLnB1c2goZnVuYyk7XG4gICAgaWYgKHBlbmRpbmcpIHJldHVybjtcbiAgICBwZW5kaW5nID0gdHJ1ZTtcbiAgICB0aW1lckZ1bmMobmV4dFRpY2tIYW5kbGVyLCAwKTtcbiAgfTtcbn0pKCk7XG5cbnZhciBfU2V0ID0gdW5kZWZpbmVkO1xuLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5pZiAodHlwZW9mIFNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgU2V0LnRvU3RyaW5nKCkubWF0Y2goL25hdGl2ZSBjb2RlLykpIHtcbiAgLy8gdXNlIG5hdGl2ZSBTZXQgd2hlbiBhdmFpbGFibGUuXG4gIF9TZXQgPSBTZXQ7XG59IGVsc2Uge1xuICAvLyBhIG5vbi1zdGFuZGFyZCBTZXQgcG9seWZpbGwgdGhhdCBvbmx5IHdvcmtzIHdpdGggcHJpbWl0aXZlIGtleXMuXG4gIF9TZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5zZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9O1xuICBfU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0W2tleV0gIT09IHVuZGVmaW5lZDtcbiAgfTtcbiAgX1NldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHRoaXMuc2V0W2tleV0gPSAxO1xuICB9O1xuICBfU2V0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIENhY2hlKGxpbWl0KSB7XG4gIHRoaXMuc2l6ZSA9IDA7XG4gIHRoaXMubGltaXQgPSBsaW1pdDtcbiAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gdW5kZWZpbmVkO1xuICB0aGlzLl9rZXltYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xufVxuXG52YXIgcCA9IENhY2hlLnByb3RvdHlwZTtcblxuLyoqXG4gKiBQdXQgPHZhbHVlPiBpbnRvIHRoZSBjYWNoZSBhc3NvY2lhdGVkIHdpdGggPGtleT4uXG4gKiBSZXR1cm5zIHRoZSBlbnRyeSB3aGljaCB3YXMgcmVtb3ZlZCB0byBtYWtlIHJvb20gZm9yXG4gKiB0aGUgbmV3IGVudHJ5LiBPdGhlcndpc2UgdW5kZWZpbmVkIGlzIHJldHVybmVkLlxuICogKGkuZS4gaWYgdGhlcmUgd2FzIGVub3VnaCByb29tIGFscmVhZHkpLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge0VudHJ5fHVuZGVmaW5lZH1cbiAqL1xuXG5wLnB1dCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gIHZhciByZW1vdmVkO1xuXG4gIHZhciBlbnRyeSA9IHRoaXMuZ2V0KGtleSwgdHJ1ZSk7XG4gIGlmICghZW50cnkpIHtcbiAgICBpZiAodGhpcy5zaXplID09PSB0aGlzLmxpbWl0KSB7XG4gICAgICByZW1vdmVkID0gdGhpcy5zaGlmdCgpO1xuICAgIH1cbiAgICBlbnRyeSA9IHtcbiAgICAgIGtleToga2V5XG4gICAgfTtcbiAgICB0aGlzLl9rZXltYXBba2V5XSA9IGVudHJ5O1xuICAgIGlmICh0aGlzLnRhaWwpIHtcbiAgICAgIHRoaXMudGFpbC5uZXdlciA9IGVudHJ5O1xuICAgICAgZW50cnkub2xkZXIgPSB0aGlzLnRhaWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGVhZCA9IGVudHJ5O1xuICAgIH1cbiAgICB0aGlzLnRhaWwgPSBlbnRyeTtcbiAgICB0aGlzLnNpemUrKztcbiAgfVxuICBlbnRyeS52YWx1ZSA9IHZhbHVlO1xuXG4gIHJldHVybiByZW1vdmVkO1xufTtcblxuLyoqXG4gKiBQdXJnZSB0aGUgbGVhc3QgcmVjZW50bHkgdXNlZCAob2xkZXN0KSBlbnRyeSBmcm9tIHRoZVxuICogY2FjaGUuIFJldHVybnMgdGhlIHJlbW92ZWQgZW50cnkgb3IgdW5kZWZpbmVkIGlmIHRoZVxuICogY2FjaGUgd2FzIGVtcHR5LlxuICovXG5cbnAuc2hpZnQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBlbnRyeSA9IHRoaXMuaGVhZDtcbiAgaWYgKGVudHJ5KSB7XG4gICAgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5ld2VyO1xuICAgIHRoaXMuaGVhZC5vbGRlciA9IHVuZGVmaW5lZDtcbiAgICBlbnRyeS5uZXdlciA9IGVudHJ5Lm9sZGVyID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2tleW1hcFtlbnRyeS5rZXldID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2l6ZS0tO1xuICB9XG4gIHJldHVybiBlbnRyeTtcbn07XG5cbi8qKlxuICogR2V0IGFuZCByZWdpc3RlciByZWNlbnQgdXNlIG9mIDxrZXk+LiBSZXR1cm5zIHRoZSB2YWx1ZVxuICogYXNzb2NpYXRlZCB3aXRoIDxrZXk+IG9yIHVuZGVmaW5lZCBpZiBub3QgaW4gY2FjaGUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHtCb29sZWFufSByZXR1cm5FbnRyeVxuICogQHJldHVybiB7RW50cnl8Kn1cbiAqL1xuXG5wLmdldCA9IGZ1bmN0aW9uIChrZXksIHJldHVybkVudHJ5KSB7XG4gIHZhciBlbnRyeSA9IHRoaXMuX2tleW1hcFtrZXldO1xuICBpZiAoZW50cnkgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICBpZiAoZW50cnkgPT09IHRoaXMudGFpbCkge1xuICAgIHJldHVybiByZXR1cm5FbnRyeSA/IGVudHJ5IDogZW50cnkudmFsdWU7XG4gIH1cbiAgLy8gSEVBRC0tLS0tLS0tLS0tLS0tVEFJTFxuICAvLyAgIDwub2xkZXIgICAubmV3ZXI+XG4gIC8vICA8LS0tIGFkZCBkaXJlY3Rpb24gLS1cbiAgLy8gICBBICBCICBDICA8RD4gIEVcbiAgaWYgKGVudHJ5Lm5ld2VyKSB7XG4gICAgaWYgKGVudHJ5ID09PSB0aGlzLmhlYWQpIHtcbiAgICAgIHRoaXMuaGVhZCA9IGVudHJ5Lm5ld2VyO1xuICAgIH1cbiAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyOyAvLyBDIDwtLSBFLlxuICB9XG4gIGlmIChlbnRyeS5vbGRlcikge1xuICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gZW50cnkubmV3ZXI7IC8vIEMuIC0tPiBFXG4gIH1cbiAgZW50cnkubmV3ZXIgPSB1bmRlZmluZWQ7IC8vIEQgLS14XG4gIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsOyAvLyBELiAtLT4gRVxuICBpZiAodGhpcy50YWlsKSB7XG4gICAgdGhpcy50YWlsLm5ld2VyID0gZW50cnk7IC8vIEUuIDwtLSBEXG4gIH1cbiAgdGhpcy50YWlsID0gZW50cnk7XG4gIHJldHVybiByZXR1cm5FbnRyeSA/IGVudHJ5IDogZW50cnkudmFsdWU7XG59O1xuXG52YXIgY2FjaGUkMSA9IG5ldyBDYWNoZSgxMDAwKTtcbnZhciBmaWx0ZXJUb2tlblJFID0gL1teXFxzJ1wiXSt8J1teJ10qJ3xcIlteXCJdKlwiL2c7XG52YXIgcmVzZXJ2ZWRBcmdSRSA9IC9eaW4kfF4tP1xcZCsvO1xuXG4vKipcbiAqIFBhcnNlciBzdGF0ZVxuICovXG5cbnZhciBzdHI7XG52YXIgZGlyO1xudmFyIGM7XG52YXIgcHJldjtcbnZhciBpO1xudmFyIGw7XG52YXIgbGFzdEZpbHRlckluZGV4O1xudmFyIGluU2luZ2xlO1xudmFyIGluRG91YmxlO1xudmFyIGN1cmx5O1xudmFyIHNxdWFyZTtcbnZhciBwYXJlbjtcbi8qKlxuICogUHVzaCBhIGZpbHRlciB0byB0aGUgY3VycmVudCBkaXJlY3RpdmUgb2JqZWN0XG4gKi9cblxuZnVuY3Rpb24gcHVzaEZpbHRlcigpIHtcbiAgdmFyIGV4cCA9IHN0ci5zbGljZShsYXN0RmlsdGVySW5kZXgsIGkpLnRyaW0oKTtcbiAgdmFyIGZpbHRlcjtcbiAgaWYgKGV4cCkge1xuICAgIGZpbHRlciA9IHt9O1xuICAgIHZhciB0b2tlbnMgPSBleHAubWF0Y2goZmlsdGVyVG9rZW5SRSk7XG4gICAgZmlsdGVyLm5hbWUgPSB0b2tlbnNbMF07XG4gICAgaWYgKHRva2Vucy5sZW5ndGggPiAxKSB7XG4gICAgICBmaWx0ZXIuYXJncyA9IHRva2Vucy5zbGljZSgxKS5tYXAocHJvY2Vzc0ZpbHRlckFyZyk7XG4gICAgfVxuICB9XG4gIGlmIChmaWx0ZXIpIHtcbiAgICAoZGlyLmZpbHRlcnMgPSBkaXIuZmlsdGVycyB8fCBbXSkucHVzaChmaWx0ZXIpO1xuICB9XG4gIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGFyZ3VtZW50IGlzIGR5bmFtaWMgYW5kIHN0cmlwIHF1b3Rlcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYXJnXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gcHJvY2Vzc0ZpbHRlckFyZyhhcmcpIHtcbiAgaWYgKHJlc2VydmVkQXJnUkUudGVzdChhcmcpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiB0b051bWJlcihhcmcpLFxuICAgICAgZHluYW1pYzogZmFsc2VcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHZhciBzdHJpcHBlZCA9IHN0cmlwUXVvdGVzKGFyZyk7XG4gICAgdmFyIGR5bmFtaWMgPSBzdHJpcHBlZCA9PT0gYXJnO1xuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZTogZHluYW1pYyA/IGFyZyA6IHN0cmlwcGVkLFxuICAgICAgZHluYW1pYzogZHluYW1pY1xuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZSBhIGRpcmVjdGl2ZSB2YWx1ZSBhbmQgZXh0cmFjdCB0aGUgZXhwcmVzc2lvblxuICogYW5kIGl0cyBmaWx0ZXJzIGludG8gYSBkZXNjcmlwdG9yLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogXCJhICsgMSB8IHVwcGVyY2FzZVwiIHdpbGwgeWllbGQ6XG4gKiB7XG4gKiAgIGV4cHJlc3Npb246ICdhICsgMScsXG4gKiAgIGZpbHRlcnM6IFtcbiAqICAgICB7IG5hbWU6ICd1cHBlcmNhc2UnLCBhcmdzOiBudWxsIH1cbiAqICAgXVxuICogfVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VEaXJlY3RpdmUocykge1xuICB2YXIgaGl0ID0gY2FjaGUkMS5nZXQocyk7XG4gIGlmIChoaXQpIHtcbiAgICByZXR1cm4gaGl0O1xuICB9XG5cbiAgLy8gcmVzZXQgcGFyc2VyIHN0YXRlXG4gIHN0ciA9IHM7XG4gIGluU2luZ2xlID0gaW5Eb3VibGUgPSBmYWxzZTtcbiAgY3VybHkgPSBzcXVhcmUgPSBwYXJlbiA9IDA7XG4gIGxhc3RGaWx0ZXJJbmRleCA9IDA7XG4gIGRpciA9IHt9O1xuXG4gIGZvciAoaSA9IDAsIGwgPSBzdHIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgcHJldiA9IGM7XG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIGlmIChpblNpbmdsZSkge1xuICAgICAgLy8gY2hlY2sgc2luZ2xlIHF1b3RlXG4gICAgICBpZiAoYyA9PT0gMHgyNyAmJiBwcmV2ICE9PSAweDVDKSBpblNpbmdsZSA9ICFpblNpbmdsZTtcbiAgICB9IGVsc2UgaWYgKGluRG91YmxlKSB7XG4gICAgICAvLyBjaGVjayBkb3VibGUgcXVvdGVcbiAgICAgIGlmIChjID09PSAweDIyICYmIHByZXYgIT09IDB4NUMpIGluRG91YmxlID0gIWluRG91YmxlO1xuICAgIH0gZWxzZSBpZiAoYyA9PT0gMHg3QyAmJiAvLyBwaXBlXG4gICAgc3RyLmNoYXJDb2RlQXQoaSArIDEpICE9PSAweDdDICYmIHN0ci5jaGFyQ29kZUF0KGkgLSAxKSAhPT0gMHg3Qykge1xuICAgICAgaWYgKGRpci5leHByZXNzaW9uID09IG51bGwpIHtcbiAgICAgICAgLy8gZmlyc3QgZmlsdGVyLCBlbmQgb2YgZXhwcmVzc2lvblxuICAgICAgICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTtcbiAgICAgICAgZGlyLmV4cHJlc3Npb24gPSBzdHIuc2xpY2UoMCwgaSkudHJpbSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYWxyZWFkeSBoYXMgZmlsdGVyXG4gICAgICAgIHB1c2hGaWx0ZXIoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoIChjKSB7XG4gICAgICAgIGNhc2UgMHgyMjpcbiAgICAgICAgICBpbkRvdWJsZSA9IHRydWU7YnJlYWs7IC8vIFwiXG4gICAgICAgIGNhc2UgMHgyNzpcbiAgICAgICAgICBpblNpbmdsZSA9IHRydWU7YnJlYWs7IC8vICdcbiAgICAgICAgY2FzZSAweDI4OlxuICAgICAgICAgIHBhcmVuKys7YnJlYWs7IC8vIChcbiAgICAgICAgY2FzZSAweDI5OlxuICAgICAgICAgIHBhcmVuLS07YnJlYWs7IC8vIClcbiAgICAgICAgY2FzZSAweDVCOlxuICAgICAgICAgIHNxdWFyZSsrO2JyZWFrOyAvLyBbXG4gICAgICAgIGNhc2UgMHg1RDpcbiAgICAgICAgICBzcXVhcmUtLTticmVhazsgLy8gXVxuICAgICAgICBjYXNlIDB4N0I6XG4gICAgICAgICAgY3VybHkrKzticmVhazsgLy8ge1xuICAgICAgICBjYXNlIDB4N0Q6XG4gICAgICAgICAgY3VybHktLTticmVhazsgLy8gfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChkaXIuZXhwcmVzc2lvbiA9PSBudWxsKSB7XG4gICAgZGlyLmV4cHJlc3Npb24gPSBzdHIuc2xpY2UoMCwgaSkudHJpbSgpO1xuICB9IGVsc2UgaWYgKGxhc3RGaWx0ZXJJbmRleCAhPT0gMCkge1xuICAgIHB1c2hGaWx0ZXIoKTtcbiAgfVxuXG4gIGNhY2hlJDEucHV0KHMsIGRpcik7XG4gIHJldHVybiBkaXI7XG59XG5cbnZhciBkaXJlY3RpdmUgPSBPYmplY3QuZnJlZXplKHtcbiAgcGFyc2VEaXJlY3RpdmU6IHBhcnNlRGlyZWN0aXZlXG59KTtcblxudmFyIHJlZ2V4RXNjYXBlUkUgPSAvWy0uKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nO1xudmFyIGNhY2hlID0gdW5kZWZpbmVkO1xudmFyIHRhZ1JFID0gdW5kZWZpbmVkO1xudmFyIGh0bWxSRSA9IHVuZGVmaW5lZDtcbi8qKlxuICogRXNjYXBlIGEgc3RyaW5nIHNvIGl0IGNhbiBiZSB1c2VkIGluIGEgUmVnRXhwXG4gKiBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKi9cblxuZnVuY3Rpb24gZXNjYXBlUmVnZXgoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShyZWdleEVzY2FwZVJFLCAnXFxcXCQmJyk7XG59XG5cbmZ1bmN0aW9uIGNvbXBpbGVSZWdleCgpIHtcbiAgdmFyIG9wZW4gPSBlc2NhcGVSZWdleChjb25maWcuZGVsaW1pdGVyc1swXSk7XG4gIHZhciBjbG9zZSA9IGVzY2FwZVJlZ2V4KGNvbmZpZy5kZWxpbWl0ZXJzWzFdKTtcbiAgdmFyIHVuc2FmZU9wZW4gPSBlc2NhcGVSZWdleChjb25maWcudW5zYWZlRGVsaW1pdGVyc1swXSk7XG4gIHZhciB1bnNhZmVDbG9zZSA9IGVzY2FwZVJlZ2V4KGNvbmZpZy51bnNhZmVEZWxpbWl0ZXJzWzFdKTtcbiAgdGFnUkUgPSBuZXcgUmVnRXhwKHVuc2FmZU9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIHVuc2FmZUNsb3NlICsgJ3wnICsgb3BlbiArICcoKD86LnxcXFxcbikrPyknICsgY2xvc2UsICdnJyk7XG4gIGh0bWxSRSA9IG5ldyBSZWdFeHAoJ14nICsgdW5zYWZlT3BlbiArICcoKD86LnxcXFxcbikrPyknICsgdW5zYWZlQ2xvc2UgKyAnJCcpO1xuICAvLyByZXNldCBjYWNoZVxuICBjYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHRlbXBsYXRlIHRleHQgc3RyaW5nIGludG8gYW4gYXJyYXkgb2YgdG9rZW5zLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gKiBAcmV0dXJuIHtBcnJheTxPYmplY3Q+IHwgbnVsbH1cbiAqICAgICAgICAgICAgICAgLSB7U3RyaW5nfSB0eXBlXG4gKiAgICAgICAgICAgICAgIC0ge1N0cmluZ30gdmFsdWVcbiAqICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW2h0bWxdXG4gKiAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtvbmVUaW1lXVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlVGV4dCh0ZXh0KSB7XG4gIGlmICghY2FjaGUpIHtcbiAgICBjb21waWxlUmVnZXgoKTtcbiAgfVxuICB2YXIgaGl0ID0gY2FjaGUuZ2V0KHRleHQpO1xuICBpZiAoaGl0KSB7XG4gICAgcmV0dXJuIGhpdDtcbiAgfVxuICBpZiAoIXRhZ1JFLnRlc3QodGV4dCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICB2YXIgdG9rZW5zID0gW107XG4gIHZhciBsYXN0SW5kZXggPSB0YWdSRS5sYXN0SW5kZXggPSAwO1xuICB2YXIgbWF0Y2gsIGluZGV4LCBodG1sLCB2YWx1ZSwgZmlyc3QsIG9uZVRpbWU7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gIHdoaWxlIChtYXRjaCA9IHRhZ1JFLmV4ZWModGV4dCkpIHtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgaW5kZXggPSBtYXRjaC5pbmRleDtcbiAgICAvLyBwdXNoIHRleHQgdG9rZW5cbiAgICBpZiAoaW5kZXggPiBsYXN0SW5kZXgpIHtcbiAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgdmFsdWU6IHRleHQuc2xpY2UobGFzdEluZGV4LCBpbmRleClcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyB0YWcgdG9rZW5cbiAgICBodG1sID0gaHRtbFJFLnRlc3QobWF0Y2hbMF0pO1xuICAgIHZhbHVlID0gaHRtbCA/IG1hdGNoWzFdIDogbWF0Y2hbMl07XG4gICAgZmlyc3QgPSB2YWx1ZS5jaGFyQ29kZUF0KDApO1xuICAgIG9uZVRpbWUgPSBmaXJzdCA9PT0gNDI7IC8vICpcbiAgICB2YWx1ZSA9IG9uZVRpbWUgPyB2YWx1ZS5zbGljZSgxKSA6IHZhbHVlO1xuICAgIHRva2Vucy5wdXNoKHtcbiAgICAgIHRhZzogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2YWx1ZS50cmltKCksXG4gICAgICBodG1sOiBodG1sLFxuICAgICAgb25lVGltZTogb25lVGltZVxuICAgIH0pO1xuICAgIGxhc3RJbmRleCA9IGluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuICB9XG4gIGlmIChsYXN0SW5kZXggPCB0ZXh0Lmxlbmd0aCkge1xuICAgIHRva2Vucy5wdXNoKHtcbiAgICAgIHZhbHVlOiB0ZXh0LnNsaWNlKGxhc3RJbmRleClcbiAgICB9KTtcbiAgfVxuICBjYWNoZS5wdXQodGV4dCwgdG9rZW5zKTtcbiAgcmV0dXJuIHRva2Vucztcbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBsaXN0IG9mIHRva2VucyBpbnRvIGFuIGV4cHJlc3Npb24uXG4gKiBlLmcuIHRva2VucyBwYXJzZWQgZnJvbSAnYSB7e2J9fSBjJyBjYW4gYmUgc2VyaWFsaXplZFxuICogaW50byBvbmUgc2luZ2xlIGV4cHJlc3Npb24gYXMgJ1wiYSBcIiArIGIgKyBcIiBjXCInLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xuICogQHBhcmFtIHtWdWV9IFt2bV1cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiB0b2tlbnNUb0V4cCh0b2tlbnMsIHZtKSB7XG4gIGlmICh0b2tlbnMubGVuZ3RoID4gMSkge1xuICAgIHJldHVybiB0b2tlbnMubWFwKGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgcmV0dXJuIGZvcm1hdFRva2VuKHRva2VuLCB2bSk7XG4gICAgfSkuam9pbignKycpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmb3JtYXRUb2tlbih0b2tlbnNbMF0sIHZtLCB0cnVlKTtcbiAgfVxufVxuXG4vKipcbiAqIEZvcm1hdCBhIHNpbmdsZSB0b2tlbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdG9rZW5cbiAqIEBwYXJhbSB7VnVlfSBbdm1dXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtzaW5nbGVdXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0VG9rZW4odG9rZW4sIHZtLCBzaW5nbGUpIHtcbiAgcmV0dXJuIHRva2VuLnRhZyA/IHRva2VuLm9uZVRpbWUgJiYgdm0gPyAnXCInICsgdm0uJGV2YWwodG9rZW4udmFsdWUpICsgJ1wiJyA6IGlubGluZUZpbHRlcnModG9rZW4udmFsdWUsIHNpbmdsZSkgOiAnXCInICsgdG9rZW4udmFsdWUgKyAnXCInO1xufVxuXG4vKipcbiAqIEZvciBhbiBhdHRyaWJ1dGUgd2l0aCBtdWx0aXBsZSBpbnRlcnBvbGF0aW9uIHRhZ3MsXG4gKiBlLmcuIGF0dHI9XCJzb21lLXt7dGhpbmcgfCBmaWx0ZXJ9fVwiLCBpbiBvcmRlciB0byBjb21iaW5lXG4gKiB0aGUgd2hvbGUgdGhpbmcgaW50byBhIHNpbmdsZSB3YXRjaGFibGUgZXhwcmVzc2lvbiwgd2VcbiAqIGhhdmUgdG8gaW5saW5lIHRob3NlIGZpbHRlcnMuIFRoaXMgZnVuY3Rpb24gZG9lcyBleGFjdGx5XG4gKiB0aGF0LiBUaGlzIGlzIGEgYml0IGhhY2t5IGJ1dCBpdCBhdm9pZHMgaGVhdnkgY2hhbmdlc1xuICogdG8gZGlyZWN0aXZlIHBhcnNlciBhbmQgd2F0Y2hlciBtZWNoYW5pc20uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHBhcmFtIHtCb29sZWFufSBzaW5nbGVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG52YXIgZmlsdGVyUkUgPSAvW158XVxcfFtefF0vO1xuZnVuY3Rpb24gaW5saW5lRmlsdGVycyhleHAsIHNpbmdsZSkge1xuICBpZiAoIWZpbHRlclJFLnRlc3QoZXhwKSkge1xuICAgIHJldHVybiBzaW5nbGUgPyBleHAgOiAnKCcgKyBleHAgKyAnKSc7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGRpciA9IHBhcnNlRGlyZWN0aXZlKGV4cCk7XG4gICAgaWYgKCFkaXIuZmlsdGVycykge1xuICAgICAgcmV0dXJuICcoJyArIGV4cCArICcpJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICd0aGlzLl9hcHBseUZpbHRlcnMoJyArIGRpci5leHByZXNzaW9uICsgLy8gdmFsdWVcbiAgICAgICcsbnVsbCwnICsgLy8gb2xkVmFsdWUgKG51bGwgZm9yIHJlYWQpXG4gICAgICBKU09OLnN0cmluZ2lmeShkaXIuZmlsdGVycykgKyAvLyBmaWx0ZXIgZGVzY3JpcHRvcnNcbiAgICAgICcsZmFsc2UpJzsgLy8gd3JpdGU/XG4gICAgfVxuICB9XG59XG5cbnZhciB0ZXh0ID0gT2JqZWN0LmZyZWV6ZSh7XG4gIGNvbXBpbGVSZWdleDogY29tcGlsZVJlZ2V4LFxuICBwYXJzZVRleHQ6IHBhcnNlVGV4dCxcbiAgdG9rZW5zVG9FeHA6IHRva2Vuc1RvRXhwXG59KTtcblxudmFyIGRlbGltaXRlcnMgPSBbJ3t7JywgJ319J107XG52YXIgdW5zYWZlRGVsaW1pdGVycyA9IFsne3t7JywgJ319fSddO1xuXG52YXIgY29uZmlnID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHByaW50IGRlYnVnIG1lc3NhZ2VzLlxuICAgKiBBbHNvIGVuYWJsZXMgc3RhY2sgdHJhY2UgZm9yIHdhcm5pbmdzLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgZGVidWc6IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHN1cHByZXNzIHdhcm5pbmdzLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgc2lsZW50OiBmYWxzZSxcblxuICAvKipcbiAgICogV2hldGhlciB0byB1c2UgYXN5bmMgcmVuZGVyaW5nLlxuICAgKi9cblxuICBhc3luYzogdHJ1ZSxcblxuICAvKipcbiAgICogV2hldGhlciB0byB3YXJuIGFnYWluc3QgZXJyb3JzIGNhdWdodCB3aGVuIGV2YWx1YXRpbmdcbiAgICogZXhwcmVzc2lvbnMuXG4gICAqL1xuXG4gIHdhcm5FeHByZXNzaW9uRXJyb3JzOiB0cnVlLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGFsbG93IGRldnRvb2xzIGluc3BlY3Rpb24uXG4gICAqIERpc2FibGVkIGJ5IGRlZmF1bHQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG4gICAqL1xuXG4gIGRldnRvb2xzOiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nLFxuXG4gIC8qKlxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIGluZGljYXRlIHRoZSBkZWxpbWl0ZXJzIGhhdmUgYmVlblxuICAgKiBjaGFuZ2VkLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgX2RlbGltaXRlcnNDaGFuZ2VkOiB0cnVlLFxuXG4gIC8qKlxuICAgKiBMaXN0IG9mIGFzc2V0IHR5cGVzIHRoYXQgYSBjb21wb25lbnQgY2FuIG93bi5cbiAgICpcbiAgICogQHR5cGUge0FycmF5fVxuICAgKi9cblxuICBfYXNzZXRUeXBlczogWydjb21wb25lbnQnLCAnZGlyZWN0aXZlJywgJ2VsZW1lbnREaXJlY3RpdmUnLCAnZmlsdGVyJywgJ3RyYW5zaXRpb24nLCAncGFydGlhbCddLFxuXG4gIC8qKlxuICAgKiBwcm9wIGJpbmRpbmcgbW9kZXNcbiAgICovXG5cbiAgX3Byb3BCaW5kaW5nTW9kZXM6IHtcbiAgICBPTkVfV0FZOiAwLFxuICAgIFRXT19XQVk6IDEsXG4gICAgT05FX1RJTUU6IDJcbiAgfSxcblxuICAvKipcbiAgICogTWF4IGNpcmN1bGFyIHVwZGF0ZXMgYWxsb3dlZCBpbiBhIGJhdGNoZXIgZmx1c2ggY3ljbGUuXG4gICAqL1xuXG4gIF9tYXhVcGRhdGVDb3VudDogMTAwXG5cbn0sIHtcbiAgZGVsaW1pdGVyczogeyAvKipcbiAgICAgICAgICAgICAgICAgKiBJbnRlcnBvbGF0aW9uIGRlbGltaXRlcnMuIENoYW5naW5nIHRoZXNlIHdvdWxkIHRyaWdnZXJcbiAgICAgICAgICAgICAgICAgKiB0aGUgdGV4dCBwYXJzZXIgdG8gcmUtY29tcGlsZSB0aGUgcmVndWxhciBleHByZXNzaW9ucy5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEB0eXBlIHtBcnJheTxTdHJpbmc+fVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gZGVsaW1pdGVycztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuICAgICAgZGVsaW1pdGVycyA9IHZhbDtcbiAgICAgIGNvbXBpbGVSZWdleCgpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgdW5zYWZlRGVsaW1pdGVyczoge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHVuc2FmZURlbGltaXRlcnM7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcbiAgICAgIHVuc2FmZURlbGltaXRlcnMgPSB2YWw7XG4gICAgICBjb21waWxlUmVnZXgoKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH1cbn0pO1xuXG52YXIgd2FybiA9IHVuZGVmaW5lZDtcbnZhciBmb3JtYXRDb21wb25lbnROYW1lID0gdW5kZWZpbmVkO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBoYXNDb25zb2xlID0gdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnO1xuXG4gICAgd2FybiA9IGZ1bmN0aW9uIChtc2csIHZtKSB7XG4gICAgICBpZiAoaGFzQ29uc29sZSAmJiAhY29uZmlnLnNpbGVudCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbVnVlIHdhcm5dOiAnICsgbXNnICsgKHZtID8gZm9ybWF0Q29tcG9uZW50TmFtZSh2bSkgOiAnJykpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmb3JtYXRDb21wb25lbnROYW1lID0gZnVuY3Rpb24gKHZtKSB7XG4gICAgICB2YXIgbmFtZSA9IHZtLl9pc1Z1ZSA/IHZtLiRvcHRpb25zLm5hbWUgOiB2bS5uYW1lO1xuICAgICAgcmV0dXJuIG5hbWUgPyAnIChmb3VuZCBpbiBjb21wb25lbnQ6IDwnICsgaHlwaGVuYXRlKG5hbWUpICsgJz4pJyA6ICcnO1xuICAgIH07XG4gIH0pKCk7XG59XG5cbi8qKlxuICogQXBwZW5kIHdpdGggdHJhbnNpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxuZnVuY3Rpb24gYXBwZW5kV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gIGFwcGx5VHJhbnNpdGlvbihlbCwgMSwgZnVuY3Rpb24gKCkge1xuICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XG4gIH0sIHZtLCBjYik7XG59XG5cbi8qKlxuICogSW5zZXJ0QmVmb3JlIHdpdGggdHJhbnNpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxuZnVuY3Rpb24gYmVmb3JlV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gIGFwcGx5VHJhbnNpdGlvbihlbCwgMSwgZnVuY3Rpb24gKCkge1xuICAgIGJlZm9yZShlbCwgdGFyZ2V0KTtcbiAgfSwgdm0sIGNiKTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgd2l0aCB0cmFuc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbmZ1bmN0aW9uIHJlbW92ZVdpdGhUcmFuc2l0aW9uKGVsLCB2bSwgY2IpIHtcbiAgYXBwbHlUcmFuc2l0aW9uKGVsLCAtMSwgZnVuY3Rpb24gKCkge1xuICAgIHJlbW92ZShlbCk7XG4gIH0sIHZtLCBjYik7XG59XG5cbi8qKlxuICogQXBwbHkgdHJhbnNpdGlvbnMgd2l0aCBhbiBvcGVyYXRpb24gY2FsbGJhY2suXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtOdW1iZXJ9IGRpcmVjdGlvblxuICogICAgICAgICAgICAgICAgICAxOiBlbnRlclxuICogICAgICAgICAgICAgICAgIC0xOiBsZWF2ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSB0aGUgYWN0dWFsIERPTSBvcGVyYXRpb25cbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbmZ1bmN0aW9uIGFwcGx5VHJhbnNpdGlvbihlbCwgZGlyZWN0aW9uLCBvcCwgdm0sIGNiKSB7XG4gIHZhciB0cmFuc2l0aW9uID0gZWwuX192X3RyYW5zO1xuICBpZiAoIXRyYW5zaXRpb24gfHxcbiAgLy8gc2tpcCBpZiB0aGVyZSBhcmUgbm8ganMgaG9va3MgYW5kIENTUyB0cmFuc2l0aW9uIGlzXG4gIC8vIG5vdCBzdXBwb3J0ZWRcbiAgIXRyYW5zaXRpb24uaG9va3MgJiYgIXRyYW5zaXRpb25FbmRFdmVudCB8fFxuICAvLyBza2lwIHRyYW5zaXRpb25zIGZvciBpbml0aWFsIGNvbXBpbGVcbiAgIXZtLl9pc0NvbXBpbGVkIHx8XG4gIC8vIGlmIHRoZSB2bSBpcyBiZWluZyBtYW5pcHVsYXRlZCBieSBhIHBhcmVudCBkaXJlY3RpdmVcbiAgLy8gZHVyaW5nIHRoZSBwYXJlbnQncyBjb21waWxhdGlvbiBwaGFzZSwgc2tpcCB0aGVcbiAgLy8gYW5pbWF0aW9uLlxuICB2bS4kcGFyZW50ICYmICF2bS4kcGFyZW50Ll9pc0NvbXBpbGVkKSB7XG4gICAgb3AoKTtcbiAgICBpZiAoY2IpIGNiKCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBhY3Rpb24gPSBkaXJlY3Rpb24gPiAwID8gJ2VudGVyJyA6ICdsZWF2ZSc7XG4gIHRyYW5zaXRpb25bYWN0aW9uXShvcCwgY2IpO1xufVxuXG52YXIgdHJhbnNpdGlvbiA9IE9iamVjdC5mcmVlemUoe1xuICBhcHBlbmRXaXRoVHJhbnNpdGlvbjogYXBwZW5kV2l0aFRyYW5zaXRpb24sXG4gIGJlZm9yZVdpdGhUcmFuc2l0aW9uOiBiZWZvcmVXaXRoVHJhbnNpdGlvbixcbiAgcmVtb3ZlV2l0aFRyYW5zaXRpb246IHJlbW92ZVdpdGhUcmFuc2l0aW9uLFxuICBhcHBseVRyYW5zaXRpb246IGFwcGx5VHJhbnNpdGlvblxufSk7XG5cbi8qKlxuICogUXVlcnkgYW4gZWxlbWVudCBzZWxlY3RvciBpZiBpdCdzIG5vdCBhbiBlbGVtZW50IGFscmVhZHkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKi9cblxuZnVuY3Rpb24gcXVlcnkoZWwpIHtcbiAgaWYgKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHtcbiAgICB2YXIgc2VsZWN0b3IgPSBlbDtcbiAgICBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpO1xuICAgIGlmICghZWwpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQ2Fubm90IGZpbmQgZWxlbWVudDogJyArIHNlbGVjdG9yKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGVsO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgbm9kZSBpcyBpbiB0aGUgZG9jdW1lbnQuXG4gKiBOb3RlOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMgc2hvdWxkIHdvcmsgaGVyZVxuICogYnV0IGFsd2F5cyByZXR1cm5zIGZhbHNlIGZvciBjb21tZW50IG5vZGVzIGluIHBoYW50b21qcyxcbiAqIG1ha2luZyB1bml0IHRlc3RzIGRpZmZpY3VsdC4gVGhpcyBpcyBmaXhlZCBieSBkb2luZyB0aGVcbiAqIGNvbnRhaW5zKCkgY2hlY2sgb24gdGhlIG5vZGUncyBwYXJlbnROb2RlIGluc3RlYWQgb2ZcbiAqIHRoZSBub2RlIGl0c2VsZi5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaW5Eb2Mobm9kZSkge1xuICBpZiAoIW5vZGUpIHJldHVybiBmYWxzZTtcbiAgdmFyIGRvYyA9IG5vZGUub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gIHJldHVybiBkb2MgPT09IG5vZGUgfHwgZG9jID09PSBwYXJlbnQgfHwgISEocGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSA9PT0gMSAmJiBkb2MuY29udGFpbnMocGFyZW50KSk7XG59XG5cbi8qKlxuICogR2V0IGFuZCByZW1vdmUgYW4gYXR0cmlidXRlIGZyb20gYSBub2RlLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtTdHJpbmd9IF9hdHRyXG4gKi9cblxuZnVuY3Rpb24gZ2V0QXR0cihub2RlLCBfYXR0cikge1xuICB2YXIgdmFsID0gbm9kZS5nZXRBdHRyaWJ1dGUoX2F0dHIpO1xuICBpZiAodmFsICE9PSBudWxsKSB7XG4gICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoX2F0dHIpO1xuICB9XG4gIHJldHVybiB2YWw7XG59XG5cbi8qKlxuICogR2V0IGFuIGF0dHJpYnV0ZSB3aXRoIGNvbG9uIG9yIHYtYmluZDogcHJlZml4LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge1N0cmluZ3xudWxsfVxuICovXG5cbmZ1bmN0aW9uIGdldEJpbmRBdHRyKG5vZGUsIG5hbWUpIHtcbiAgdmFyIHZhbCA9IGdldEF0dHIobm9kZSwgJzonICsgbmFtZSk7XG4gIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICB2YWwgPSBnZXRBdHRyKG5vZGUsICd2LWJpbmQ6JyArIG5hbWUpO1xuICB9XG4gIHJldHVybiB2YWw7XG59XG5cbi8qKlxuICogQ2hlY2sgdGhlIHByZXNlbmNlIG9mIGEgYmluZCBhdHRyaWJ1dGUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBoYXNCaW5kQXR0cihub2RlLCBuYW1lKSB7XG4gIHJldHVybiBub2RlLmhhc0F0dHJpYnV0ZShuYW1lKSB8fCBub2RlLmhhc0F0dHJpYnV0ZSgnOicgKyBuYW1lKSB8fCBub2RlLmhhc0F0dHJpYnV0ZSgndi1iaW5kOicgKyBuYW1lKTtcbn1cblxuLyoqXG4gKiBJbnNlcnQgZWwgYmVmb3JlIHRhcmdldFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKi9cblxuZnVuY3Rpb24gYmVmb3JlKGVsLCB0YXJnZXQpIHtcbiAgdGFyZ2V0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsLCB0YXJnZXQpO1xufVxuXG4vKipcbiAqIEluc2VydCBlbCBhZnRlciB0YXJnZXRcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICovXG5cbmZ1bmN0aW9uIGFmdGVyKGVsLCB0YXJnZXQpIHtcbiAgaWYgKHRhcmdldC5uZXh0U2libGluZykge1xuICAgIGJlZm9yZShlbCwgdGFyZ2V0Lm5leHRTaWJsaW5nKTtcbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChlbCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgZWwgZnJvbSBET01cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKi9cblxuZnVuY3Rpb24gcmVtb3ZlKGVsKSB7XG4gIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xufVxuXG4vKipcbiAqIFByZXBlbmQgZWwgdG8gdGFyZ2V0XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqL1xuXG5mdW5jdGlvbiBwcmVwZW5kKGVsLCB0YXJnZXQpIHtcbiAgaWYgKHRhcmdldC5maXJzdENoaWxkKSB7XG4gICAgYmVmb3JlKGVsLCB0YXJnZXQuZmlyc3RDaGlsZCk7XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlcGxhY2UgdGFyZ2V0IHdpdGggZWxcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICovXG5cbmZ1bmN0aW9uIHJlcGxhY2UodGFyZ2V0LCBlbCkge1xuICB2YXIgcGFyZW50ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG4gIGlmIChwYXJlbnQpIHtcbiAgICBwYXJlbnQucmVwbGFjZUNoaWxkKGVsLCB0YXJnZXQpO1xuICB9XG59XG5cbi8qKlxuICogQWRkIGV2ZW50IGxpc3RlbmVyIHNob3J0aGFuZC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VDYXB0dXJlXVxuICovXG5cbmZ1bmN0aW9uIG9uKGVsLCBldmVudCwgY2IsIHVzZUNhcHR1cmUpIHtcbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2IsIHVzZUNhcHR1cmUpO1xufVxuXG4vKipcbiAqIFJlbW92ZSBldmVudCBsaXN0ZW5lciBzaG9ydGhhbmQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICovXG5cbmZ1bmN0aW9uIG9mZihlbCwgZXZlbnQsIGNiKSB7XG4gIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGNiKTtcbn1cblxuLyoqXG4gKiBGb3IgSUU5IGNvbXBhdDogd2hlbiBib3RoIGNsYXNzIGFuZCA6Y2xhc3MgYXJlIHByZXNlbnRcbiAqIGdldEF0dHJpYnV0ZSgnY2xhc3MnKSByZXR1cm5zIHdyb25nIHZhbHVlLi4uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGdldENsYXNzKGVsKSB7XG4gIHZhciBjbGFzc25hbWUgPSBlbC5jbGFzc05hbWU7XG4gIGlmICh0eXBlb2YgY2xhc3NuYW1lID09PSAnb2JqZWN0Jykge1xuICAgIGNsYXNzbmFtZSA9IGNsYXNzbmFtZS5iYXNlVmFsIHx8ICcnO1xuICB9XG4gIHJldHVybiBjbGFzc25hbWU7XG59XG5cbi8qKlxuICogSW4gSUU5LCBzZXRBdHRyaWJ1dGUoJ2NsYXNzJykgd2lsbCByZXN1bHQgaW4gZW1wdHkgY2xhc3NcbiAqIGlmIHRoZSBlbGVtZW50IGFsc28gaGFzIHRoZSA6Y2xhc3MgYXR0cmlidXRlOyBIb3dldmVyIGluXG4gKiBQaGFudG9tSlMsIHNldHRpbmcgYGNsYXNzTmFtZWAgZG9lcyBub3Qgd29yayBvbiBTVkcgZWxlbWVudHMuLi5cbiAqIFNvIHdlIGhhdmUgdG8gZG8gYSBjb25kaXRpb25hbCBjaGVjayBoZXJlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcbiAqL1xuXG5mdW5jdGlvbiBzZXRDbGFzcyhlbCwgY2xzKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaXNJRTkgJiYgIS9zdmckLy50ZXN0KGVsLm5hbWVzcGFjZVVSSSkpIHtcbiAgICBlbC5jbGFzc05hbWUgPSBjbHM7XG4gIH0gZWxzZSB7XG4gICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNscyk7XG4gIH1cbn1cblxuLyoqXG4gKiBBZGQgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBJRSAmIFNWR1xuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcbiAqL1xuXG5mdW5jdGlvbiBhZGRDbGFzcyhlbCwgY2xzKSB7XG4gIGlmIChlbC5jbGFzc0xpc3QpIHtcbiAgICBlbC5jbGFzc0xpc3QuYWRkKGNscyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGN1ciA9ICcgJyArIGdldENsYXNzKGVsKSArICcgJztcbiAgICBpZiAoY3VyLmluZGV4T2YoJyAnICsgY2xzICsgJyAnKSA8IDApIHtcbiAgICAgIHNldENsYXNzKGVsLCAoY3VyICsgY2xzKS50cmltKCkpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIElFICYgU1ZHXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuICovXG5cbmZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsLCBjbHMpIHtcbiAgaWYgKGVsLmNsYXNzTGlzdCkge1xuICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3VyID0gJyAnICsgZ2V0Q2xhc3MoZWwpICsgJyAnO1xuICAgIHZhciB0YXIgPSAnICcgKyBjbHMgKyAnICc7XG4gICAgd2hpbGUgKGN1ci5pbmRleE9mKHRhcikgPj0gMCkge1xuICAgICAgY3VyID0gY3VyLnJlcGxhY2UodGFyLCAnICcpO1xuICAgIH1cbiAgICBzZXRDbGFzcyhlbCwgY3VyLnRyaW0oKSk7XG4gIH1cbiAgaWYgKCFlbC5jbGFzc05hbWUpIHtcbiAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRyYWN0IHJhdyBjb250ZW50IGluc2lkZSBhbiBlbGVtZW50IGludG8gYSB0ZW1wb3JhcnlcbiAqIGNvbnRhaW5lciBkaXZcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGFzRnJhZ21lbnRcbiAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBleHRyYWN0Q29udGVudChlbCwgYXNGcmFnbWVudCkge1xuICB2YXIgY2hpbGQ7XG4gIHZhciByYXdDb250ZW50O1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGlzVGVtcGxhdGUoZWwpICYmIGlzRnJhZ21lbnQoZWwuY29udGVudCkpIHtcbiAgICBlbCA9IGVsLmNvbnRlbnQ7XG4gIH1cbiAgaWYgKGVsLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgIHRyaW1Ob2RlKGVsKTtcbiAgICByYXdDb250ZW50ID0gYXNGcmFnbWVudCA/IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgd2hpbGUgKGNoaWxkID0gZWwuZmlyc3RDaGlsZCkge1xuICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgICAgcmF3Q29udGVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgfVxuICB9XG4gIHJldHVybiByYXdDb250ZW50O1xufVxuXG4vKipcbiAqIFRyaW0gcG9zc2libGUgZW1wdHkgaGVhZC90YWlsIHRleHQgYW5kIGNvbW1lbnRcbiAqIG5vZGVzIGluc2lkZSBhIHBhcmVudC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqL1xuXG5mdW5jdGlvbiB0cmltTm9kZShub2RlKSB7XG4gIHZhciBjaGlsZDtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tc2VxdWVuY2VzICovXG4gIHdoaWxlICgoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcbiAgICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgfVxuICB3aGlsZSAoKGNoaWxkID0gbm9kZS5sYXN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcbiAgICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlIG5vLXNlcXVlbmNlcyAqL1xufVxuXG5mdW5jdGlvbiBpc1RyaW1tYWJsZShub2RlKSB7XG4gIHJldHVybiBub2RlICYmIChub2RlLm5vZGVUeXBlID09PSAzICYmICFub2RlLmRhdGEudHJpbSgpIHx8IG5vZGUubm9kZVR5cGUgPT09IDgpO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSB0ZW1wbGF0ZSB0YWcuXG4gKiBOb3RlIGlmIHRoZSB0ZW1wbGF0ZSBhcHBlYXJzIGluc2lkZSBhbiBTVkcgaXRzIHRhZ05hbWVcbiAqIHdpbGwgYmUgaW4gbG93ZXJjYXNlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqL1xuXG5mdW5jdGlvbiBpc1RlbXBsYXRlKGVsKSB7XG4gIHJldHVybiBlbC50YWdOYW1lICYmIGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RlbXBsYXRlJztcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gXCJhbmNob3JcIiBmb3IgcGVyZm9ybWluZyBkb20gaW5zZXJ0aW9uL3JlbW92YWxzLlxuICogVGhpcyBpcyB1c2VkIGluIGEgbnVtYmVyIG9mIHNjZW5hcmlvczpcbiAqIC0gZnJhZ21lbnQgaW5zdGFuY2VcbiAqIC0gdi1odG1sXG4gKiAtIHYtaWZcbiAqIC0gdi1mb3JcbiAqIC0gY29tcG9uZW50XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcGVyc2lzdCAtIElFIHRyYXNoZXMgZW1wdHkgdGV4dE5vZGVzIG9uXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZU5vZGUodHJ1ZSksIHNvIGluIGNlcnRhaW5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2VzIHRoZSBhbmNob3IgbmVlZHMgdG8gYmVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbi1lbXB0eSB0byBiZSBwZXJzaXN0ZWQgaW5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlcy5cbiAqIEByZXR1cm4ge0NvbW1lbnR8VGV4dH1cbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVBbmNob3IoY29udGVudCwgcGVyc2lzdCkge1xuICB2YXIgYW5jaG9yID0gY29uZmlnLmRlYnVnID8gZG9jdW1lbnQuY3JlYXRlQ29tbWVudChjb250ZW50KSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHBlcnNpc3QgPyAnICcgOiAnJyk7XG4gIGFuY2hvci5fX3ZfYW5jaG9yID0gdHJ1ZTtcbiAgcmV0dXJuIGFuY2hvcjtcbn1cblxuLyoqXG4gKiBGaW5kIGEgY29tcG9uZW50IHJlZiBhdHRyaWJ1dGUgdGhhdCBzdGFydHMgd2l0aCAkLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZVxuICogQHJldHVybiB7U3RyaW5nfHVuZGVmaW5lZH1cbiAqL1xuXG52YXIgcmVmUkUgPSAvXnYtcmVmOi87XG5cbmZ1bmN0aW9uIGZpbmRSZWYobm9kZSkge1xuICBpZiAobm9kZS5oYXNBdHRyaWJ1dGVzKCkpIHtcbiAgICB2YXIgYXR0cnMgPSBub2RlLmF0dHJpYnV0ZXM7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBuYW1lID0gYXR0cnNbaV0ubmFtZTtcbiAgICAgIGlmIChyZWZSRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIHJldHVybiBjYW1lbGl6ZShuYW1lLnJlcGxhY2UocmVmUkUsICcnKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogTWFwIGEgZnVuY3Rpb24gdG8gYSByYW5nZSBvZiBub2RlcyAuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge05vZGV9IGVuZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3BcbiAqL1xuXG5mdW5jdGlvbiBtYXBOb2RlUmFuZ2Uobm9kZSwgZW5kLCBvcCkge1xuICB2YXIgbmV4dDtcbiAgd2hpbGUgKG5vZGUgIT09IGVuZCkge1xuICAgIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgIG9wKG5vZGUpO1xuICAgIG5vZGUgPSBuZXh0O1xuICB9XG4gIG9wKGVuZCk7XG59XG5cbi8qKlxuICogUmVtb3ZlIGEgcmFuZ2Ugb2Ygbm9kZXMgd2l0aCB0cmFuc2l0aW9uLCBzdG9yZVxuICogdGhlIG5vZGVzIGluIGEgZnJhZ21lbnQgd2l0aCBjb3JyZWN0IG9yZGVyaW5nLFxuICogYW5kIGNhbGwgY2FsbGJhY2sgd2hlbiBkb25lLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gc3RhcnRcbiAqIEBwYXJhbSB7Tm9kZX0gZW5kXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVOb2RlUmFuZ2Uoc3RhcnQsIGVuZCwgdm0sIGZyYWcsIGNiKSB7XG4gIHZhciBkb25lID0gZmFsc2U7XG4gIHZhciByZW1vdmVkID0gMDtcbiAgdmFyIG5vZGVzID0gW107XG4gIG1hcE5vZGVSYW5nZShzdGFydCwgZW5kLCBmdW5jdGlvbiAobm9kZSkge1xuICAgIGlmIChub2RlID09PSBlbmQpIGRvbmUgPSB0cnVlO1xuICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgcmVtb3ZlV2l0aFRyYW5zaXRpb24obm9kZSwgdm0sIG9uUmVtb3ZlZCk7XG4gIH0pO1xuICBmdW5jdGlvbiBvblJlbW92ZWQoKSB7XG4gICAgcmVtb3ZlZCsrO1xuICAgIGlmIChkb25lICYmIHJlbW92ZWQgPj0gbm9kZXMubGVuZ3RoKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZXNbaV0pO1xuICAgICAgfVxuICAgICAgY2IgJiYgY2IoKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIG5vZGUgaXMgYSBEb2N1bWVudEZyYWdtZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc0ZyYWdtZW50KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMTE7XG59XG5cbi8qKlxuICogR2V0IG91dGVySFRNTCBvZiBlbGVtZW50cywgdGFraW5nIGNhcmVcbiAqIG9mIFNWRyBlbGVtZW50cyBpbiBJRSBhcyB3ZWxsLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBnZXRPdXRlckhUTUwoZWwpIHtcbiAgaWYgKGVsLm91dGVySFRNTCkge1xuICAgIHJldHVybiBlbC5vdXRlckhUTUw7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChlbC5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgIHJldHVybiBjb250YWluZXIuaW5uZXJIVE1MO1xuICB9XG59XG5cbnZhciBjb21tb25UYWdSRSA9IC9eKGRpdnxwfHNwYW58aW1nfGF8YnxpfGJyfHVsfG9sfGxpfGgxfGgyfGgzfGg0fGg1fGg2fGNvZGV8cHJlfHRhYmxlfHRofHRkfHRyfGZvcm18bGFiZWx8aW5wdXR8c2VsZWN0fG9wdGlvbnxuYXZ8YXJ0aWNsZXxzZWN0aW9ufGhlYWRlcnxmb290ZXIpJC9pO1xudmFyIHJlc2VydmVkVGFnUkUgPSAvXihzbG90fHBhcnRpYWx8Y29tcG9uZW50KSQvaTtcblxudmFyIGlzVW5rbm93bkVsZW1lbnQgPSB1bmRlZmluZWQ7XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBpc1Vua25vd25FbGVtZW50ID0gZnVuY3Rpb24gKGVsLCB0YWcpIHtcbiAgICBpZiAodGFnLmluZGV4T2YoJy0nKSA+IC0xKSB7XG4gICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yODIxMDM2NC8xMDcwMjQ0XG4gICAgICByZXR1cm4gZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQgfHwgZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MRWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICgvSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KGVsLnRvU3RyaW5nKCkpICYmXG4gICAgICAgIC8vIENocm9tZSByZXR1cm5zIHVua25vd24gZm9yIHNldmVyYWwgSFRNTDUgZWxlbWVudHMuXG4gICAgICAgIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD01NDA1MjZcbiAgICAgICAgLy8gRmlyZWZveCByZXR1cm5zIHVua25vd24gZm9yIHNvbWUgXCJJbnRlcmFjdGl2ZSBlbGVtZW50cy5cIlxuICAgICAgICAhL14oZGF0YXx0aW1lfHJ0Y3xyYnxkZXRhaWxzfGRpYWxvZ3xzdW1tYXJ5KSQvLnRlc3QodGFnKVxuICAgICAgKTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIGNvbXBvbmVudCwgaWYgeWVzIHJldHVybiBpdHNcbiAqIGNvbXBvbmVudCBpZC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBjaGVja0NvbXBvbmVudEF0dHIoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgdmFyIGhhc0F0dHJzID0gZWwuaGFzQXR0cmlidXRlcygpO1xuICBpZiAoIWNvbW1vblRhZ1JFLnRlc3QodGFnKSAmJiAhcmVzZXJ2ZWRUYWdSRS50ZXN0KHRhZykpIHtcbiAgICBpZiAocmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgdGFnKSkge1xuICAgICAgcmV0dXJuIHsgaWQ6IHRhZyB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgaXMgPSBoYXNBdHRycyAmJiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpO1xuICAgICAgaWYgKGlzKSB7XG4gICAgICAgIHJldHVybiBpcztcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YXIgZXhwZWN0ZWRUYWcgPSBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwICYmIG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXBbdGFnXTtcbiAgICAgICAgaWYgKGV4cGVjdGVkVGFnKSB7XG4gICAgICAgICAgd2FybignVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtICcgKyAnZGlkIHlvdSBtZWFuIDwnICsgZXhwZWN0ZWRUYWcgKyAnPj8gJyArICdIVE1MIGlzIGNhc2UtaW5zZW5zaXRpdmUsIHJlbWVtYmVyIHRvIHVzZSBrZWJhYi1jYXNlIGluIHRlbXBsYXRlcy4nKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1Vua25vd25FbGVtZW50KGVsLCB0YWcpKSB7XG4gICAgICAgICAgd2FybignVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtIGRpZCB5b3UgJyArICdyZWdpc3RlciB0aGUgY29tcG9uZW50IGNvcnJlY3RseT8gRm9yIHJlY3Vyc2l2ZSBjb21wb25lbnRzLCAnICsgJ21ha2Ugc3VyZSB0byBwcm92aWRlIHRoZSBcIm5hbWVcIiBvcHRpb24uJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaGFzQXR0cnMpIHtcbiAgICByZXR1cm4gZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBcImlzXCIgYmluZGluZyBmcm9tIGFuIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKSB7XG4gIC8vIGR5bmFtaWMgc3ludGF4XG4gIHZhciBleHAgPSBlbC5nZXRBdHRyaWJ1dGUoJ2lzJyk7XG4gIGlmIChleHAgIT0gbnVsbCkge1xuICAgIGlmIChyZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCBleHApKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2lzJyk7XG4gICAgICByZXR1cm4geyBpZDogZXhwIH07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGV4cCA9IGdldEJpbmRBdHRyKGVsLCAnaXMnKTtcbiAgICBpZiAoZXhwICE9IG51bGwpIHtcbiAgICAgIHJldHVybiB7IGlkOiBleHAsIGR5bmFtaWM6IHRydWUgfTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBPcHRpb24gb3ZlcndyaXRpbmcgc3RyYXRlZ2llcyBhcmUgZnVuY3Rpb25zIHRoYXQgaGFuZGxlXG4gKiBob3cgdG8gbWVyZ2UgYSBwYXJlbnQgb3B0aW9uIHZhbHVlIGFuZCBhIGNoaWxkIG9wdGlvblxuICogdmFsdWUgaW50byB0aGUgZmluYWwgdmFsdWUuXG4gKlxuICogQWxsIHN0cmF0ZWd5IGZ1bmN0aW9ucyBmb2xsb3cgdGhlIHNhbWUgc2lnbmF0dXJlOlxuICpcbiAqIEBwYXJhbSB7Kn0gcGFyZW50VmFsXG4gKiBAcGFyYW0geyp9IGNoaWxkVmFsXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuICovXG5cbnZhciBzdHJhdHMgPSBjb25maWcub3B0aW9uTWVyZ2VTdHJhdGVnaWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuLyoqXG4gKiBIZWxwZXIgdGhhdCByZWN1cnNpdmVseSBtZXJnZXMgdHdvIGRhdGEgb2JqZWN0cyB0b2dldGhlci5cbiAqL1xuXG5mdW5jdGlvbiBtZXJnZURhdGEodG8sIGZyb20pIHtcbiAgdmFyIGtleSwgdG9WYWwsIGZyb21WYWw7XG4gIGZvciAoa2V5IGluIGZyb20pIHtcbiAgICB0b1ZhbCA9IHRvW2tleV07XG4gICAgZnJvbVZhbCA9IGZyb21ba2V5XTtcbiAgICBpZiAoIWhhc093bih0bywga2V5KSkge1xuICAgICAgc2V0KHRvLCBrZXksIGZyb21WYWwpO1xuICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodG9WYWwpICYmIGlzT2JqZWN0KGZyb21WYWwpKSB7XG4gICAgICBtZXJnZURhdGEodG9WYWwsIGZyb21WYWwpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdG87XG59XG5cbi8qKlxuICogRGF0YVxuICovXG5cbnN0cmF0cy5kYXRhID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKSB7XG4gIGlmICghdm0pIHtcbiAgICAvLyBpbiBhIFZ1ZS5leHRlbmQgbWVyZ2UsIGJvdGggc2hvdWxkIGJlIGZ1bmN0aW9uc1xuICAgIGlmICghY2hpbGRWYWwpIHtcbiAgICAgIHJldHVybiBwYXJlbnRWYWw7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVGhlIFwiZGF0YVwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICsgJ3RoYXQgcmV0dXJucyBhIHBlci1pbnN0YW5jZSB2YWx1ZSBpbiBjb21wb25lbnQgJyArICdkZWZpbml0aW9ucy4nLCB2bSk7XG4gICAgICByZXR1cm4gcGFyZW50VmFsO1xuICAgIH1cbiAgICBpZiAoIXBhcmVudFZhbCkge1xuICAgICAgcmV0dXJuIGNoaWxkVmFsO1xuICAgIH1cbiAgICAvLyB3aGVuIHBhcmVudFZhbCAmIGNoaWxkVmFsIGFyZSBib3RoIHByZXNlbnQsXG4gICAgLy8gd2UgbmVlZCB0byByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlXG4gICAgLy8gbWVyZ2VkIHJlc3VsdCBvZiBib3RoIGZ1bmN0aW9ucy4uLiBubyBuZWVkIHRvXG4gICAgLy8gY2hlY2sgaWYgcGFyZW50VmFsIGlzIGEgZnVuY3Rpb24gaGVyZSBiZWNhdXNlXG4gICAgLy8gaXQgaGFzIHRvIGJlIGEgZnVuY3Rpb24gdG8gcGFzcyBwcmV2aW91cyBtZXJnZXMuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZERhdGFGbigpIHtcbiAgICAgIHJldHVybiBtZXJnZURhdGEoY2hpbGRWYWwuY2FsbCh0aGlzKSwgcGFyZW50VmFsLmNhbGwodGhpcykpO1xuICAgIH07XG4gIH0gZWxzZSBpZiAocGFyZW50VmFsIHx8IGNoaWxkVmFsKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZEluc3RhbmNlRGF0YUZuKCkge1xuICAgICAgLy8gaW5zdGFuY2UgbWVyZ2VcbiAgICAgIHZhciBpbnN0YW5jZURhdGEgPSB0eXBlb2YgY2hpbGRWYWwgPT09ICdmdW5jdGlvbicgPyBjaGlsZFZhbC5jYWxsKHZtKSA6IGNoaWxkVmFsO1xuICAgICAgdmFyIGRlZmF1bHREYXRhID0gdHlwZW9mIHBhcmVudFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IHBhcmVudFZhbC5jYWxsKHZtKSA6IHVuZGVmaW5lZDtcbiAgICAgIGlmIChpbnN0YW5jZURhdGEpIHtcbiAgICAgICAgcmV0dXJuIG1lcmdlRGF0YShpbnN0YW5jZURhdGEsIGRlZmF1bHREYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0RGF0YTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59O1xuXG4vKipcbiAqIEVsXG4gKi9cblxuc3RyYXRzLmVsID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKSB7XG4gIGlmICghdm0gJiYgY2hpbGRWYWwgJiYgdHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdUaGUgXCJlbFwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICsgJ3RoYXQgcmV0dXJucyBhIHBlci1pbnN0YW5jZSB2YWx1ZSBpbiBjb21wb25lbnQgJyArICdkZWZpbml0aW9ucy4nLCB2bSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciByZXQgPSBjaGlsZFZhbCB8fCBwYXJlbnRWYWw7XG4gIC8vIGludm9rZSB0aGUgZWxlbWVudCBmYWN0b3J5IGlmIHRoaXMgaXMgaW5zdGFuY2UgbWVyZ2VcbiAgcmV0dXJuIHZtICYmIHR5cGVvZiByZXQgPT09ICdmdW5jdGlvbicgPyByZXQuY2FsbCh2bSkgOiByZXQ7XG59O1xuXG4vKipcbiAqIEhvb2tzIGFuZCBwYXJhbSBhdHRyaWJ1dGVzIGFyZSBtZXJnZWQgYXMgYXJyYXlzLlxuICovXG5cbnN0cmF0cy5pbml0ID0gc3RyYXRzLmNyZWF0ZWQgPSBzdHJhdHMucmVhZHkgPSBzdHJhdHMuYXR0YWNoZWQgPSBzdHJhdHMuZGV0YWNoZWQgPSBzdHJhdHMuYmVmb3JlQ29tcGlsZSA9IHN0cmF0cy5jb21waWxlZCA9IHN0cmF0cy5iZWZvcmVEZXN0cm95ID0gc3RyYXRzLmRlc3Ryb3llZCA9IHN0cmF0cy5hY3RpdmF0ZSA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIHJldHVybiBjaGlsZFZhbCA/IHBhcmVudFZhbCA/IHBhcmVudFZhbC5jb25jYXQoY2hpbGRWYWwpIDogaXNBcnJheShjaGlsZFZhbCkgPyBjaGlsZFZhbCA6IFtjaGlsZFZhbF0gOiBwYXJlbnRWYWw7XG59O1xuXG4vKipcbiAqIEFzc2V0c1xuICpcbiAqIFdoZW4gYSB2bSBpcyBwcmVzZW50IChpbnN0YW5jZSBjcmVhdGlvbiksIHdlIG5lZWQgdG8gZG9cbiAqIGEgdGhyZWUtd2F5IG1lcmdlIGJldHdlZW4gY29uc3RydWN0b3Igb3B0aW9ucywgaW5zdGFuY2VcbiAqIG9wdGlvbnMgYW5kIHBhcmVudCBvcHRpb25zLlxuICovXG5cbmZ1bmN0aW9uIG1lcmdlQXNzZXRzKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUocGFyZW50VmFsIHx8IG51bGwpO1xuICByZXR1cm4gY2hpbGRWYWwgPyBleHRlbmQocmVzLCBndWFyZEFycmF5QXNzZXRzKGNoaWxkVmFsKSkgOiByZXM7XG59XG5cbmNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gIHN0cmF0c1t0eXBlICsgJ3MnXSA9IG1lcmdlQXNzZXRzO1xufSk7XG5cbi8qKlxuICogRXZlbnRzICYgV2F0Y2hlcnMuXG4gKlxuICogRXZlbnRzICYgd2F0Y2hlcnMgaGFzaGVzIHNob3VsZCBub3Qgb3ZlcndyaXRlIG9uZVxuICogYW5vdGhlciwgc28gd2UgbWVyZ2UgdGhlbSBhcyBhcnJheXMuXG4gKi9cblxuc3RyYXRzLndhdGNoID0gc3RyYXRzLmV2ZW50cyA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG4gIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG4gIHZhciByZXQgPSB7fTtcbiAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcbiAgZm9yICh2YXIga2V5IGluIGNoaWxkVmFsKSB7XG4gICAgdmFyIHBhcmVudCA9IHJldFtrZXldO1xuICAgIHZhciBjaGlsZCA9IGNoaWxkVmFsW2tleV07XG4gICAgaWYgKHBhcmVudCAmJiAhaXNBcnJheShwYXJlbnQpKSB7XG4gICAgICBwYXJlbnQgPSBbcGFyZW50XTtcbiAgICB9XG4gICAgcmV0W2tleV0gPSBwYXJlbnQgPyBwYXJlbnQuY29uY2F0KGNoaWxkKSA6IFtjaGlsZF07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn07XG5cbi8qKlxuICogT3RoZXIgb2JqZWN0IGhhc2hlcy5cbiAqL1xuXG5zdHJhdHMucHJvcHMgPSBzdHJhdHMubWV0aG9kcyA9IHN0cmF0cy5jb21wdXRlZCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG4gIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG4gIHZhciByZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuICBleHRlbmQocmV0LCBjaGlsZFZhbCk7XG4gIHJldHVybiByZXQ7XG59O1xuXG4vKipcbiAqIERlZmF1bHQgc3RyYXRlZ3kuXG4gKi9cblxudmFyIGRlZmF1bHRTdHJhdCA9IGZ1bmN0aW9uIGRlZmF1bHRTdHJhdChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIHJldHVybiBjaGlsZFZhbCA9PT0gdW5kZWZpbmVkID8gcGFyZW50VmFsIDogY2hpbGRWYWw7XG59O1xuXG4vKipcbiAqIE1ha2Ugc3VyZSBjb21wb25lbnQgb3B0aW9ucyBnZXQgY29udmVydGVkIHRvIGFjdHVhbFxuICogY29uc3RydWN0b3JzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cblxuZnVuY3Rpb24gZ3VhcmRDb21wb25lbnRzKG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMuY29tcG9uZW50cykge1xuICAgIHZhciBjb21wb25lbnRzID0gb3B0aW9ucy5jb21wb25lbnRzID0gZ3VhcmRBcnJheUFzc2V0cyhvcHRpb25zLmNvbXBvbmVudHMpO1xuICAgIHZhciBpZHMgPSBPYmplY3Qua2V5cyhjb21wb25lbnRzKTtcbiAgICB2YXIgZGVmO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgbWFwID0gb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcCA9IHt9O1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGlkcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBpZHNbaV07XG4gICAgICBpZiAoY29tbW9uVGFnUkUudGVzdChrZXkpIHx8IHJlc2VydmVkVGFnUkUudGVzdChrZXkpKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCAnICsgJ2lkOiAnICsga2V5KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICAvLyByZWNvcmQgYSBhbGwgbG93ZXJjYXNlIDwtPiBrZWJhYi1jYXNlIG1hcHBpbmcgZm9yXG4gICAgICAvLyBwb3NzaWJsZSBjdXN0b20gZWxlbWVudCBjYXNlIGVycm9yIHdhcm5pbmdcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIG1hcFtrZXkucmVwbGFjZSgvLS9nLCAnJykudG9Mb3dlckNhc2UoKV0gPSBoeXBoZW5hdGUoa2V5KTtcbiAgICAgIH1cbiAgICAgIGRlZiA9IGNvbXBvbmVudHNba2V5XTtcbiAgICAgIGlmIChpc1BsYWluT2JqZWN0KGRlZikpIHtcbiAgICAgICAgY29tcG9uZW50c1trZXldID0gVnVlLmV4dGVuZChkZWYpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEVuc3VyZSBhbGwgcHJvcHMgb3B0aW9uIHN5bnRheCBhcmUgbm9ybWFsaXplZCBpbnRvIHRoZVxuICogT2JqZWN0LWJhc2VkIGZvcm1hdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5cbmZ1bmN0aW9uIGd1YXJkUHJvcHMob3B0aW9ucykge1xuICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuICB2YXIgaSwgdmFsO1xuICBpZiAoaXNBcnJheShwcm9wcykpIHtcbiAgICBvcHRpb25zLnByb3BzID0ge307XG4gICAgaSA9IHByb3BzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YWwgPSBwcm9wc1tpXTtcbiAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgICAgICBvcHRpb25zLnByb3BzW3ZhbF0gPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICh2YWwubmFtZSkge1xuICAgICAgICBvcHRpb25zLnByb3BzW3ZhbC5uYW1lXSA9IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChwcm9wcykpIHtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BzKTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFsID0gcHJvcHNba2V5c1tpXV07XG4gICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBwcm9wc1trZXlzW2ldXSA9IHsgdHlwZTogdmFsIH07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogR3VhcmQgYW4gQXJyYXktZm9ybWF0IGFzc2V0cyBvcHRpb24gYW5kIGNvbnZlcnRlZCBpdFxuICogaW50byB0aGUga2V5LXZhbHVlIE9iamVjdCBmb3JtYXQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGFzc2V0c1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIGd1YXJkQXJyYXlBc3NldHMoYXNzZXRzKSB7XG4gIGlmIChpc0FycmF5KGFzc2V0cykpIHtcbiAgICB2YXIgcmVzID0ge307XG4gICAgdmFyIGkgPSBhc3NldHMubGVuZ3RoO1xuICAgIHZhciBhc3NldDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBhc3NldCA9IGFzc2V0c1tpXTtcbiAgICAgIHZhciBpZCA9IHR5cGVvZiBhc3NldCA9PT0gJ2Z1bmN0aW9uJyA/IGFzc2V0Lm9wdGlvbnMgJiYgYXNzZXQub3B0aW9ucy5uYW1lIHx8IGFzc2V0LmlkIDogYXNzZXQubmFtZSB8fCBhc3NldC5pZDtcbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdBcnJheS1zeW50YXggYXNzZXRzIG11c3QgcHJvdmlkZSBhIFwibmFtZVwiIG9yIFwiaWRcIiBmaWVsZC4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc1tpZF0gPSBhc3NldDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuICByZXR1cm4gYXNzZXRzO1xufVxuXG4vKipcbiAqIE1lcmdlIHR3byBvcHRpb24gb2JqZWN0cyBpbnRvIGEgbmV3IG9uZS5cbiAqIENvcmUgdXRpbGl0eSB1c2VkIGluIGJvdGggaW5zdGFudGlhdGlvbiBhbmQgaW5oZXJpdGFuY2UuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhcmVudFxuICogQHBhcmFtIHtPYmplY3R9IGNoaWxkXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXSAtIGlmIHZtIGlzIHByZXNlbnQsIGluZGljYXRlcyB0aGlzIGlzXG4gKiAgICAgICAgICAgICAgICAgICAgIGFuIGluc3RhbnRpYXRpb24gbWVyZ2UuXG4gKi9cblxuZnVuY3Rpb24gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGQsIHZtKSB7XG4gIGd1YXJkQ29tcG9uZW50cyhjaGlsZCk7XG4gIGd1YXJkUHJvcHMoY2hpbGQpO1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChjaGlsZC5wcm9wc0RhdGEgJiYgIXZtKSB7XG4gICAgICB3YXJuKCdwcm9wc0RhdGEgY2FuIG9ubHkgYmUgdXNlZCBhcyBhbiBpbnN0YW50aWF0aW9uIG9wdGlvbi4nKTtcbiAgICB9XG4gIH1cbiAgdmFyIG9wdGlvbnMgPSB7fTtcbiAgdmFyIGtleTtcbiAgaWYgKGNoaWxkWydleHRlbmRzJ10pIHtcbiAgICBwYXJlbnQgPSB0eXBlb2YgY2hpbGRbJ2V4dGVuZHMnXSA9PT0gJ2Z1bmN0aW9uJyA/IG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkWydleHRlbmRzJ10ub3B0aW9ucywgdm0pIDogbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGRbJ2V4dGVuZHMnXSwgdm0pO1xuICB9XG4gIGlmIChjaGlsZC5taXhpbnMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkLm1peGlucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBtaXhpbiA9IGNoaWxkLm1peGluc1tpXTtcbiAgICAgIHZhciBtaXhpbk9wdGlvbnMgPSBtaXhpbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBWdWUgPyBtaXhpbi5vcHRpb25zIDogbWl4aW47XG4gICAgICBwYXJlbnQgPSBtZXJnZU9wdGlvbnMocGFyZW50LCBtaXhpbk9wdGlvbnMsIHZtKTtcbiAgICB9XG4gIH1cbiAgZm9yIChrZXkgaW4gcGFyZW50KSB7XG4gICAgbWVyZ2VGaWVsZChrZXkpO1xuICB9XG4gIGZvciAoa2V5IGluIGNoaWxkKSB7XG4gICAgaWYgKCFoYXNPd24ocGFyZW50LCBrZXkpKSB7XG4gICAgICBtZXJnZUZpZWxkKGtleSk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIG1lcmdlRmllbGQoa2V5KSB7XG4gICAgdmFyIHN0cmF0ID0gc3RyYXRzW2tleV0gfHwgZGVmYXVsdFN0cmF0O1xuICAgIG9wdGlvbnNba2V5XSA9IHN0cmF0KHBhcmVudFtrZXldLCBjaGlsZFtrZXldLCB2bSwga2V5KTtcbiAgfVxuICByZXR1cm4gb3B0aW9ucztcbn1cblxuLyoqXG4gKiBSZXNvbHZlIGFuIGFzc2V0LlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJlY2F1c2UgY2hpbGQgaW5zdGFuY2VzIG5lZWQgYWNjZXNzXG4gKiB0byBhc3NldHMgZGVmaW5lZCBpbiBpdHMgYW5jZXN0b3IgY2hhaW4uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2Fybk1pc3NpbmdcbiAqIEByZXR1cm4ge09iamVjdHxGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiByZXNvbHZlQXNzZXQob3B0aW9ucywgdHlwZSwgaWQsIHdhcm5NaXNzaW5nKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgYXNzZXRzID0gb3B0aW9uc1t0eXBlXTtcbiAgdmFyIGNhbWVsaXplZElkO1xuICB2YXIgcmVzID0gYXNzZXRzW2lkXSB8fFxuICAvLyBjYW1lbENhc2UgSURcbiAgYXNzZXRzW2NhbWVsaXplZElkID0gY2FtZWxpemUoaWQpXSB8fFxuICAvLyBQYXNjYWwgQ2FzZSBJRFxuICBhc3NldHNbY2FtZWxpemVkSWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbGl6ZWRJZC5zbGljZSgxKV07XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm5NaXNzaW5nICYmICFyZXMpIHtcbiAgICB3YXJuKCdGYWlsZWQgdG8gcmVzb2x2ZSAnICsgdHlwZS5zbGljZSgwLCAtMSkgKyAnOiAnICsgaWQsIG9wdGlvbnMpO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5cbnZhciB1aWQkMSA9IDA7XG5cbi8qKlxuICogQSBkZXAgaXMgYW4gb2JzZXJ2YWJsZSB0aGF0IGNhbiBoYXZlIG11bHRpcGxlXG4gKiBkaXJlY3RpdmVzIHN1YnNjcmliaW5nIHRvIGl0LlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBEZXAoKSB7XG4gIHRoaXMuaWQgPSB1aWQkMSsrO1xuICB0aGlzLnN1YnMgPSBbXTtcbn1cblxuLy8gdGhlIGN1cnJlbnQgdGFyZ2V0IHdhdGNoZXIgYmVpbmcgZXZhbHVhdGVkLlxuLy8gdGhpcyBpcyBnbG9iYWxseSB1bmlxdWUgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvbmx5IG9uZVxuLy8gd2F0Y2hlciBiZWluZyBldmFsdWF0ZWQgYXQgYW55IHRpbWUuXG5EZXAudGFyZ2V0ID0gbnVsbDtcblxuLyoqXG4gKiBBZGQgYSBkaXJlY3RpdmUgc3Vic2NyaWJlci5cbiAqXG4gKiBAcGFyYW0ge0RpcmVjdGl2ZX0gc3ViXG4gKi9cblxuRGVwLnByb3RvdHlwZS5hZGRTdWIgPSBmdW5jdGlvbiAoc3ViKSB7XG4gIHRoaXMuc3Vicy5wdXNoKHN1Yik7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhIGRpcmVjdGl2ZSBzdWJzY3JpYmVyLlxuICpcbiAqIEBwYXJhbSB7RGlyZWN0aXZlfSBzdWJcbiAqL1xuXG5EZXAucHJvdG90eXBlLnJlbW92ZVN1YiA9IGZ1bmN0aW9uIChzdWIpIHtcbiAgdGhpcy5zdWJzLiRyZW1vdmUoc3ViKTtcbn07XG5cbi8qKlxuICogQWRkIHNlbGYgYXMgYSBkZXBlbmRlbmN5IHRvIHRoZSB0YXJnZXQgd2F0Y2hlci5cbiAqL1xuXG5EZXAucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgRGVwLnRhcmdldC5hZGREZXAodGhpcyk7XG59O1xuXG4vKipcbiAqIE5vdGlmeSBhbGwgc3Vic2NyaWJlcnMgb2YgYSBuZXcgdmFsdWUuXG4gKi9cblxuRGVwLnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIHN0YWJsaXplIHRoZSBzdWJzY3JpYmVyIGxpc3QgZmlyc3RcbiAgdmFyIHN1YnMgPSB0b0FycmF5KHRoaXMuc3Vicyk7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gc3Vicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBzdWJzW2ldLnVwZGF0ZSgpO1xuICB9XG59O1xuXG52YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTtcbnZhciBhcnJheU1ldGhvZHMgPSBPYmplY3QuY3JlYXRlKGFycmF5UHJvdG8pXG5cbi8qKlxuICogSW50ZXJjZXB0IG11dGF0aW5nIG1ldGhvZHMgYW5kIGVtaXQgZXZlbnRzXG4gKi9cblxuO1sncHVzaCcsICdwb3AnLCAnc2hpZnQnLCAndW5zaGlmdCcsICdzcGxpY2UnLCAnc29ydCcsICdyZXZlcnNlJ10uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG4gIC8vIGNhY2hlIG9yaWdpbmFsIG1ldGhvZFxuICB2YXIgb3JpZ2luYWwgPSBhcnJheVByb3RvW21ldGhvZF07XG4gIGRlZihhcnJheU1ldGhvZHMsIG1ldGhvZCwgZnVuY3Rpb24gbXV0YXRvcigpIHtcbiAgICAvLyBhdm9pZCBsZWFraW5nIGFyZ3VtZW50czpcbiAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9jbG9zdXJlLXdpdGgtYXJndW1lbnRzXG4gICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGkpO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB2YXIgb2IgPSB0aGlzLl9fb2JfXztcbiAgICB2YXIgaW5zZXJ0ZWQ7XG4gICAgc3dpdGNoIChtZXRob2QpIHtcbiAgICAgIGNhc2UgJ3B1c2gnOlxuICAgICAgICBpbnNlcnRlZCA9IGFyZ3M7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndW5zaGlmdCc6XG4gICAgICAgIGluc2VydGVkID0gYXJncztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzcGxpY2UnOlxuICAgICAgICBpbnNlcnRlZCA9IGFyZ3Muc2xpY2UoMik7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAoaW5zZXJ0ZWQpIG9iLm9ic2VydmVBcnJheShpbnNlcnRlZCk7XG4gICAgLy8gbm90aWZ5IGNoYW5nZVxuICAgIG9iLmRlcC5ub3RpZnkoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9KTtcbn0pO1xuXG4vKipcbiAqIFN3YXAgdGhlIGVsZW1lbnQgYXQgdGhlIGdpdmVuIGluZGV4IHdpdGggYSBuZXcgdmFsdWVcbiAqIGFuZCBlbWl0cyBjb3JyZXNwb25kaW5nIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICogQHBhcmFtIHsqfSB2YWxcbiAqIEByZXR1cm4geyp9IC0gcmVwbGFjZWQgZWxlbWVudFxuICovXG5cbmRlZihhcnJheVByb3RvLCAnJHNldCcsIGZ1bmN0aW9uICRzZXQoaW5kZXgsIHZhbCkge1xuICBpZiAoaW5kZXggPj0gdGhpcy5sZW5ndGgpIHtcbiAgICB0aGlzLmxlbmd0aCA9IE51bWJlcihpbmRleCkgKyAxO1xuICB9XG4gIHJldHVybiB0aGlzLnNwbGljZShpbmRleCwgMSwgdmFsKVswXTtcbn0pO1xuXG4vKipcbiAqIENvbnZlbmllbmNlIG1ldGhvZCB0byByZW1vdmUgdGhlIGVsZW1lbnQgYXQgZ2l2ZW4gaW5kZXggb3IgdGFyZ2V0IGVsZW1lbnQgcmVmZXJlbmNlLlxuICpcbiAqIEBwYXJhbSB7Kn0gaXRlbVxuICovXG5cbmRlZihhcnJheVByb3RvLCAnJHJlbW92ZScsIGZ1bmN0aW9uICRyZW1vdmUoaXRlbSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCF0aGlzLmxlbmd0aCkgcmV0dXJuO1xuICB2YXIgaW5kZXggPSBpbmRleE9mKHRoaXMsIGl0ZW0pO1xuICBpZiAoaW5kZXggPiAtMSkge1xuICAgIHJldHVybiB0aGlzLnNwbGljZShpbmRleCwgMSk7XG4gIH1cbn0pO1xuXG52YXIgYXJyYXlLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYXJyYXlNZXRob2RzKTtcblxuLyoqXG4gKiBCeSBkZWZhdWx0LCB3aGVuIGEgcmVhY3RpdmUgcHJvcGVydHkgaXMgc2V0LCB0aGUgbmV3IHZhbHVlIGlzXG4gKiBhbHNvIGNvbnZlcnRlZCB0byBiZWNvbWUgcmVhY3RpdmUuIEhvd2V2ZXIgaW4gY2VydGFpbiBjYXNlcywgZS5nLlxuICogdi1mb3Igc2NvcGUgYWxpYXMgYW5kIHByb3BzLCB3ZSBkb24ndCB3YW50IHRvIGZvcmNlIGNvbnZlcnNpb25cbiAqIGJlY2F1c2UgdGhlIHZhbHVlIG1heSBiZSBhIG5lc3RlZCB2YWx1ZSB1bmRlciBhIGZyb3plbiBkYXRhIHN0cnVjdHVyZS5cbiAqXG4gKiBTbyB3aGVuZXZlciB3ZSB3YW50IHRvIHNldCBhIHJlYWN0aXZlIHByb3BlcnR5IHdpdGhvdXQgZm9yY2luZ1xuICogY29udmVyc2lvbiBvbiB0aGUgbmV3IHZhbHVlLCB3ZSB3cmFwIHRoYXQgY2FsbCBpbnNpZGUgdGhpcyBmdW5jdGlvbi5cbiAqL1xuXG52YXIgc2hvdWxkQ29udmVydCA9IHRydWU7XG5cbmZ1bmN0aW9uIHdpdGhvdXRDb252ZXJzaW9uKGZuKSB7XG4gIHNob3VsZENvbnZlcnQgPSBmYWxzZTtcbiAgZm4oKTtcbiAgc2hvdWxkQ29udmVydCA9IHRydWU7XG59XG5cbi8qKlxuICogT2JzZXJ2ZXIgY2xhc3MgdGhhdCBhcmUgYXR0YWNoZWQgdG8gZWFjaCBvYnNlcnZlZFxuICogb2JqZWN0LiBPbmNlIGF0dGFjaGVkLCB0aGUgb2JzZXJ2ZXIgY29udmVydHMgdGFyZ2V0XG4gKiBvYmplY3QncyBwcm9wZXJ0eSBrZXlzIGludG8gZ2V0dGVyL3NldHRlcnMgdGhhdFxuICogY29sbGVjdCBkZXBlbmRlbmNpZXMgYW5kIGRpc3BhdGNoZXMgdXBkYXRlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gdmFsdWVcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5cbmZ1bmN0aW9uIE9ic2VydmVyKHZhbHVlKSB7XG4gIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgdGhpcy5kZXAgPSBuZXcgRGVwKCk7XG4gIGRlZih2YWx1ZSwgJ19fb2JfXycsIHRoaXMpO1xuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICB2YXIgYXVnbWVudCA9IGhhc1Byb3RvID8gcHJvdG9BdWdtZW50IDogY29weUF1Z21lbnQ7XG4gICAgYXVnbWVudCh2YWx1ZSwgYXJyYXlNZXRob2RzLCBhcnJheUtleXMpO1xuICAgIHRoaXMub2JzZXJ2ZUFycmF5KHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLndhbGsodmFsdWUpO1xuICB9XG59XG5cbi8vIEluc3RhbmNlIG1ldGhvZHNcblxuLyoqXG4gKiBXYWxrIHRocm91Z2ggZWFjaCBwcm9wZXJ0eSBhbmQgY29udmVydCB0aGVtIGludG9cbiAqIGdldHRlci9zZXR0ZXJzLiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgd2hlblxuICogdmFsdWUgdHlwZSBpcyBPYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICovXG5cbk9ic2VydmVyLnByb3RvdHlwZS53YWxrID0gZnVuY3Rpb24gKG9iaikge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB0aGlzLmNvbnZlcnQoa2V5c1tpXSwgb2JqW2tleXNbaV1dKTtcbiAgfVxufTtcblxuLyoqXG4gKiBPYnNlcnZlIGEgbGlzdCBvZiBBcnJheSBpdGVtcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBpdGVtc1xuICovXG5cbk9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlQXJyYXkgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBpdGVtcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBvYnNlcnZlKGl0ZW1zW2ldKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDb252ZXJ0IGEgcHJvcGVydHkgaW50byBnZXR0ZXIvc2V0dGVyIHNvIHdlIGNhbiBlbWl0XG4gKiB0aGUgZXZlbnRzIHdoZW4gdGhlIHByb3BlcnR5IGlzIGFjY2Vzc2VkL2NoYW5nZWQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5PYnNlcnZlci5wcm90b3R5cGUuY29udmVydCA9IGZ1bmN0aW9uIChrZXksIHZhbCkge1xuICBkZWZpbmVSZWFjdGl2ZSh0aGlzLnZhbHVlLCBrZXksIHZhbCk7XG59O1xuXG4vKipcbiAqIEFkZCBhbiBvd25lciB2bSwgc28gdGhhdCB3aGVuICRzZXQvJGRlbGV0ZSBtdXRhdGlvbnNcbiAqIGhhcHBlbiB3ZSBjYW4gbm90aWZ5IG93bmVyIHZtcyB0byBwcm94eSB0aGUga2V5cyBhbmRcbiAqIGRpZ2VzdCB0aGUgd2F0Y2hlcnMuIFRoaXMgaXMgb25seSBjYWxsZWQgd2hlbiB0aGUgb2JqZWN0XG4gKiBpcyBvYnNlcnZlZCBhcyBhbiBpbnN0YW5jZSdzIHJvb3QgJGRhdGEuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLmFkZFZtID0gZnVuY3Rpb24gKHZtKSB7XG4gICh0aGlzLnZtcyB8fCAodGhpcy52bXMgPSBbXSkpLnB1c2godm0pO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYW4gb3duZXIgdm0uIFRoaXMgaXMgY2FsbGVkIHdoZW4gdGhlIG9iamVjdCBpc1xuICogc3dhcHBlZCBvdXQgYXMgYW4gaW5zdGFuY2UncyAkZGF0YSBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLnJlbW92ZVZtID0gZnVuY3Rpb24gKHZtKSB7XG4gIHRoaXMudm1zLiRyZW1vdmUodm0pO1xufTtcblxuLy8gaGVscGVyc1xuXG4vKipcbiAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBpbnRlcmNlcHRpbmdcbiAqIHRoZSBwcm90b3R5cGUgY2hhaW4gdXNpbmcgX19wcm90b19fXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHRhcmdldFxuICogQHBhcmFtIHtPYmplY3R9IHNyY1xuICovXG5cbmZ1bmN0aW9uIHByb3RvQXVnbWVudCh0YXJnZXQsIHNyYykge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuICB0YXJnZXQuX19wcm90b19fID0gc3JjO1xuICAvKiBlc2xpbnQtZW5hYmxlIG5vLXByb3RvICovXG59XG5cbi8qKlxuICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGRlZmluaW5nXG4gKiBoaWRkZW4gcHJvcGVydGllcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gdGFyZ2V0XG4gKiBAcGFyYW0ge09iamVjdH0gcHJvdG9cbiAqL1xuXG5mdW5jdGlvbiBjb3B5QXVnbWVudCh0YXJnZXQsIHNyYywga2V5cykge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgZGVmKHRhcmdldCwga2V5LCBzcmNba2V5XSk7XG4gIH1cbn1cblxuLyoqXG4gKiBBdHRlbXB0IHRvIGNyZWF0ZSBhbiBvYnNlcnZlciBpbnN0YW5jZSBmb3IgYSB2YWx1ZSxcbiAqIHJldHVybnMgdGhlIG5ldyBvYnNlcnZlciBpZiBzdWNjZXNzZnVsbHkgb2JzZXJ2ZWQsXG4gKiBvciB0aGUgZXhpc3Rpbmcgb2JzZXJ2ZXIgaWYgdGhlIHZhbHVlIGFscmVhZHkgaGFzIG9uZS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuICogQHJldHVybiB7T2JzZXJ2ZXJ8dW5kZWZpbmVkfVxuICogQHN0YXRpY1xuICovXG5cbmZ1bmN0aW9uIG9ic2VydmUodmFsdWUsIHZtKSB7XG4gIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgb2I7XG4gIGlmIChoYXNPd24odmFsdWUsICdfX29iX18nKSAmJiB2YWx1ZS5fX29iX18gaW5zdGFuY2VvZiBPYnNlcnZlcikge1xuICAgIG9iID0gdmFsdWUuX19vYl9fO1xuICB9IGVsc2UgaWYgKHNob3VsZENvbnZlcnQgJiYgKGlzQXJyYXkodmFsdWUpIHx8IGlzUGxhaW5PYmplY3QodmFsdWUpKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSAmJiAhdmFsdWUuX2lzVnVlKSB7XG4gICAgb2IgPSBuZXcgT2JzZXJ2ZXIodmFsdWUpO1xuICB9XG4gIGlmIChvYiAmJiB2bSkge1xuICAgIG9iLmFkZFZtKHZtKTtcbiAgfVxuICByZXR1cm4gb2I7XG59XG5cbi8qKlxuICogRGVmaW5lIGEgcmVhY3RpdmUgcHJvcGVydHkgb24gYW4gT2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuZnVuY3Rpb24gZGVmaW5lUmVhY3RpdmUob2JqLCBrZXksIHZhbCkge1xuICB2YXIgZGVwID0gbmV3IERlcCgpO1xuXG4gIHZhciBwcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpO1xuICBpZiAocHJvcGVydHkgJiYgcHJvcGVydHkuY29uZmlndXJhYmxlID09PSBmYWxzZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIGNhdGVyIGZvciBwcmUtZGVmaW5lZCBnZXR0ZXIvc2V0dGVyc1xuICB2YXIgZ2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuZ2V0O1xuICB2YXIgc2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuc2V0O1xuXG4gIHZhciBjaGlsZE9iID0gb2JzZXJ2ZSh2YWwpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlR2V0dGVyKCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcbiAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG4gICAgICAgIGRlcC5kZXBlbmQoKTtcbiAgICAgICAgaWYgKGNoaWxkT2IpIHtcbiAgICAgICAgICBjaGlsZE9iLmRlcC5kZXBlbmQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICBmb3IgKHZhciBlLCBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgZSA9IHZhbHVlW2ldO1xuICAgICAgICAgICAgZSAmJiBlLl9fb2JfXyAmJiBlLl9fb2JfXy5kZXAuZGVwZW5kKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlU2V0dGVyKG5ld1ZhbCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcbiAgICAgIGlmIChuZXdWYWwgPT09IHZhbHVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChzZXR0ZXIpIHtcbiAgICAgICAgc2V0dGVyLmNhbGwob2JqLCBuZXdWYWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsID0gbmV3VmFsO1xuICAgICAgfVxuICAgICAgY2hpbGRPYiA9IG9ic2VydmUobmV3VmFsKTtcbiAgICAgIGRlcC5ub3RpZnkoKTtcbiAgICB9XG4gIH0pO1xufVxuXG5cblxudmFyIHV0aWwgPSBPYmplY3QuZnJlZXplKHtcblx0ZGVmaW5lUmVhY3RpdmU6IGRlZmluZVJlYWN0aXZlLFxuXHRzZXQ6IHNldCxcblx0ZGVsOiBkZWwsXG5cdGhhc093bjogaGFzT3duLFxuXHRpc0xpdGVyYWw6IGlzTGl0ZXJhbCxcblx0aXNSZXNlcnZlZDogaXNSZXNlcnZlZCxcblx0X3RvU3RyaW5nOiBfdG9TdHJpbmcsXG5cdHRvTnVtYmVyOiB0b051bWJlcixcblx0dG9Cb29sZWFuOiB0b0Jvb2xlYW4sXG5cdHN0cmlwUXVvdGVzOiBzdHJpcFF1b3Rlcyxcblx0Y2FtZWxpemU6IGNhbWVsaXplLFxuXHRoeXBoZW5hdGU6IGh5cGhlbmF0ZSxcblx0Y2xhc3NpZnk6IGNsYXNzaWZ5LFxuXHRiaW5kOiBiaW5kLFxuXHR0b0FycmF5OiB0b0FycmF5LFxuXHRleHRlbmQ6IGV4dGVuZCxcblx0aXNPYmplY3Q6IGlzT2JqZWN0LFxuXHRpc1BsYWluT2JqZWN0OiBpc1BsYWluT2JqZWN0LFxuXHRkZWY6IGRlZixcblx0ZGVib3VuY2U6IF9kZWJvdW5jZSxcblx0aW5kZXhPZjogaW5kZXhPZixcblx0Y2FuY2VsbGFibGU6IGNhbmNlbGxhYmxlLFxuXHRsb29zZUVxdWFsOiBsb29zZUVxdWFsLFxuXHRpc0FycmF5OiBpc0FycmF5LFxuXHRoYXNQcm90bzogaGFzUHJvdG8sXG5cdGluQnJvd3NlcjogaW5Ccm93c2VyLFxuXHRkZXZ0b29sczogZGV2dG9vbHMsXG5cdGlzSUU6IGlzSUUsXG5cdGlzSUU5OiBpc0lFOSxcblx0aXNBbmRyb2lkOiBpc0FuZHJvaWQsXG5cdGlzSW9zOiBpc0lvcyxcblx0aW9zVmVyc2lvbk1hdGNoOiBpb3NWZXJzaW9uTWF0Y2gsXG5cdGlvc1ZlcnNpb246IGlvc1ZlcnNpb24sXG5cdGhhc011dGF0aW9uT2JzZXJ2ZXJCdWc6IGhhc011dGF0aW9uT2JzZXJ2ZXJCdWcsXG5cdGdldCB0cmFuc2l0aW9uUHJvcCAoKSB7IHJldHVybiB0cmFuc2l0aW9uUHJvcDsgfSxcblx0Z2V0IHRyYW5zaXRpb25FbmRFdmVudCAoKSB7IHJldHVybiB0cmFuc2l0aW9uRW5kRXZlbnQ7IH0sXG5cdGdldCBhbmltYXRpb25Qcm9wICgpIHsgcmV0dXJuIGFuaW1hdGlvblByb3A7IH0sXG5cdGdldCBhbmltYXRpb25FbmRFdmVudCAoKSB7IHJldHVybiBhbmltYXRpb25FbmRFdmVudDsgfSxcblx0bmV4dFRpY2s6IG5leHRUaWNrLFxuXHRnZXQgX1NldCAoKSB7IHJldHVybiBfU2V0OyB9LFxuXHRxdWVyeTogcXVlcnksXG5cdGluRG9jOiBpbkRvYyxcblx0Z2V0QXR0cjogZ2V0QXR0cixcblx0Z2V0QmluZEF0dHI6IGdldEJpbmRBdHRyLFxuXHRoYXNCaW5kQXR0cjogaGFzQmluZEF0dHIsXG5cdGJlZm9yZTogYmVmb3JlLFxuXHRhZnRlcjogYWZ0ZXIsXG5cdHJlbW92ZTogcmVtb3ZlLFxuXHRwcmVwZW5kOiBwcmVwZW5kLFxuXHRyZXBsYWNlOiByZXBsYWNlLFxuXHRvbjogb24sXG5cdG9mZjogb2ZmLFxuXHRzZXRDbGFzczogc2V0Q2xhc3MsXG5cdGFkZENsYXNzOiBhZGRDbGFzcyxcblx0cmVtb3ZlQ2xhc3M6IHJlbW92ZUNsYXNzLFxuXHRleHRyYWN0Q29udGVudDogZXh0cmFjdENvbnRlbnQsXG5cdHRyaW1Ob2RlOiB0cmltTm9kZSxcblx0aXNUZW1wbGF0ZTogaXNUZW1wbGF0ZSxcblx0Y3JlYXRlQW5jaG9yOiBjcmVhdGVBbmNob3IsXG5cdGZpbmRSZWY6IGZpbmRSZWYsXG5cdG1hcE5vZGVSYW5nZTogbWFwTm9kZVJhbmdlLFxuXHRyZW1vdmVOb2RlUmFuZ2U6IHJlbW92ZU5vZGVSYW5nZSxcblx0aXNGcmFnbWVudDogaXNGcmFnbWVudCxcblx0Z2V0T3V0ZXJIVE1MOiBnZXRPdXRlckhUTUwsXG5cdG1lcmdlT3B0aW9uczogbWVyZ2VPcHRpb25zLFxuXHRyZXNvbHZlQXNzZXQ6IHJlc29sdmVBc3NldCxcblx0Y2hlY2tDb21wb25lbnRBdHRyOiBjaGVja0NvbXBvbmVudEF0dHIsXG5cdGNvbW1vblRhZ1JFOiBjb21tb25UYWdSRSxcblx0cmVzZXJ2ZWRUYWdSRTogcmVzZXJ2ZWRUYWdSRSxcblx0Z2V0IHdhcm4gKCkgeyByZXR1cm4gd2FybjsgfVxufSk7XG5cbnZhciB1aWQgPSAwO1xuXG5mdW5jdGlvbiBpbml0TWl4aW4gKFZ1ZSkge1xuICAvKipcbiAgICogVGhlIG1haW4gaW5pdCBzZXF1ZW5jZS4gVGhpcyBpcyBjYWxsZWQgZm9yIGV2ZXJ5XG4gICAqIGluc3RhbmNlLCBpbmNsdWRpbmcgb25lcyB0aGF0IGFyZSBjcmVhdGVkIGZyb20gZXh0ZW5kZWRcbiAgICogY29uc3RydWN0b3JzLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIHRoaXMgb3B0aW9ucyBvYmplY3Qgc2hvdWxkIGJlXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHJlc3VsdCBvZiBtZXJnaW5nIGNsYXNzXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyBhbmQgdGhlIG9wdGlvbnMgcGFzc2VkXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gdG8gdGhlIGNvbnN0cnVjdG9yLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIHRoaXMuJGVsID0gbnVsbDtcbiAgICB0aGlzLiRwYXJlbnQgPSBvcHRpb25zLnBhcmVudDtcbiAgICB0aGlzLiRyb290ID0gdGhpcy4kcGFyZW50ID8gdGhpcy4kcGFyZW50LiRyb290IDogdGhpcztcbiAgICB0aGlzLiRjaGlsZHJlbiA9IFtdO1xuICAgIHRoaXMuJHJlZnMgPSB7fTsgLy8gY2hpbGQgdm0gcmVmZXJlbmNlc1xuICAgIHRoaXMuJGVscyA9IHt9OyAvLyBlbGVtZW50IHJlZmVyZW5jZXNcbiAgICB0aGlzLl93YXRjaGVycyA9IFtdOyAvLyBhbGwgd2F0Y2hlcnMgYXMgYW4gYXJyYXlcbiAgICB0aGlzLl9kaXJlY3RpdmVzID0gW107IC8vIGFsbCBkaXJlY3RpdmVzXG5cbiAgICAvLyBhIHVpZFxuICAgIHRoaXMuX3VpZCA9IHVpZCsrO1xuXG4gICAgLy8gYSBmbGFnIHRvIGF2b2lkIHRoaXMgYmVpbmcgb2JzZXJ2ZWRcbiAgICB0aGlzLl9pc1Z1ZSA9IHRydWU7XG5cbiAgICAvLyBldmVudHMgYm9va2tlZXBpbmdcbiAgICB0aGlzLl9ldmVudHMgPSB7fTsgLy8gcmVnaXN0ZXJlZCBjYWxsYmFja3NcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IHt9OyAvLyBmb3IgJGJyb2FkY2FzdCBvcHRpbWl6YXRpb25cblxuICAgIC8vIGZyYWdtZW50IGluc3RhbmNlIHByb3BlcnRpZXNcbiAgICB0aGlzLl9pc0ZyYWdtZW50ID0gZmFsc2U7XG4gICAgdGhpcy5fZnJhZ21lbnQgPSAvLyBAdHlwZSB7RG9jdW1lbnRGcmFnbWVudH1cbiAgICB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gLy8gQHR5cGUge1RleHR8Q29tbWVudH1cbiAgICB0aGlzLl9mcmFnbWVudEVuZCA9IG51bGw7IC8vIEB0eXBlIHtUZXh0fENvbW1lbnR9XG5cbiAgICAvLyBsaWZlY3ljbGUgc3RhdGVcbiAgICB0aGlzLl9pc0NvbXBpbGVkID0gdGhpcy5faXNEZXN0cm95ZWQgPSB0aGlzLl9pc1JlYWR5ID0gdGhpcy5faXNBdHRhY2hlZCA9IHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgPSB0aGlzLl92Rm9yUmVtb3ZpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl91bmxpbmtGbiA9IG51bGw7XG5cbiAgICAvLyBjb250ZXh0OlxuICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGNvbnRleHRcbiAgICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2VcbiAgICAvLyBhbmQgaXRzIGhvc3QuXG4gICAgdGhpcy5fY29udGV4dCA9IG9wdGlvbnMuX2NvbnRleHQgfHwgdGhpcy4kcGFyZW50O1xuXG4gICAgLy8gc2NvcGU6XG4gICAgLy8gaWYgdGhpcyBpcyBpbnNpZGUgYW4gaW5saW5lIHYtZm9yLCB0aGUgc2NvcGVcbiAgICAvLyB3aWxsIGJlIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgY3JlYXRlZCBmb3IgdGhpc1xuICAgIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXG4gICAgLy8gYW5kIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuICAgIHRoaXMuX3Njb3BlID0gb3B0aW9ucy5fc2NvcGU7XG5cbiAgICAvLyBmcmFnbWVudDpcbiAgICAvLyBpZiB0aGlzIGluc3RhbmNlIGlzIGNvbXBpbGVkIGluc2lkZSBhIEZyYWdtZW50LCBpdFxuICAgIC8vIG5lZWRzIHRvIHJlaWdzdGVyIGl0c2VsZiBhcyBhIGNoaWxkIG9mIHRoYXQgZnJhZ21lbnRcbiAgICAvLyBmb3IgYXR0YWNoL2RldGFjaCB0byB3b3JrIHByb3Blcmx5LlxuICAgIHRoaXMuX2ZyYWcgPSBvcHRpb25zLl9mcmFnO1xuICAgIGlmICh0aGlzLl9mcmFnKSB7XG4gICAgICB0aGlzLl9mcmFnLmNoaWxkcmVuLnB1c2godGhpcyk7XG4gICAgfVxuXG4gICAgLy8gcHVzaCBzZWxmIGludG8gcGFyZW50IC8gdHJhbnNjbHVzaW9uIGhvc3RcbiAgICBpZiAodGhpcy4kcGFyZW50KSB7XG4gICAgICB0aGlzLiRwYXJlbnQuJGNoaWxkcmVuLnB1c2godGhpcyk7XG4gICAgfVxuXG4gICAgLy8gbWVyZ2Ugb3B0aW9ucy5cbiAgICBvcHRpb25zID0gdGhpcy4kb3B0aW9ucyA9IG1lcmdlT3B0aW9ucyh0aGlzLmNvbnN0cnVjdG9yLm9wdGlvbnMsIG9wdGlvbnMsIHRoaXMpO1xuXG4gICAgLy8gc2V0IHJlZlxuICAgIHRoaXMuX3VwZGF0ZVJlZigpO1xuXG4gICAgLy8gaW5pdGlhbGl6ZSBkYXRhIGFzIGVtcHR5IG9iamVjdC5cbiAgICAvLyBpdCB3aWxsIGJlIGZpbGxlZCB1cCBpbiBfaW5pdERhdGEoKS5cbiAgICB0aGlzLl9kYXRhID0ge307XG5cbiAgICAvLyBjYWxsIGluaXQgaG9va1xuICAgIHRoaXMuX2NhbGxIb29rKCdpbml0Jyk7XG5cbiAgICAvLyBpbml0aWFsaXplIGRhdGEgb2JzZXJ2YXRpb24gYW5kIHNjb3BlIGluaGVyaXRhbmNlLlxuICAgIHRoaXMuX2luaXRTdGF0ZSgpO1xuXG4gICAgLy8gc2V0dXAgZXZlbnQgc3lzdGVtIGFuZCBvcHRpb24gZXZlbnRzLlxuICAgIHRoaXMuX2luaXRFdmVudHMoKTtcblxuICAgIC8vIGNhbGwgY3JlYXRlZCBob29rXG4gICAgdGhpcy5fY2FsbEhvb2soJ2NyZWF0ZWQnKTtcblxuICAgIC8vIGlmIGBlbGAgb3B0aW9uIGlzIHBhc3NlZCwgc3RhcnQgY29tcGlsYXRpb24uXG4gICAgaWYgKG9wdGlvbnMuZWwpIHtcbiAgICAgIHRoaXMuJG1vdW50KG9wdGlvbnMuZWwpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIHBhdGhDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblxuLy8gYWN0aW9uc1xudmFyIEFQUEVORCA9IDA7XG52YXIgUFVTSCA9IDE7XG52YXIgSU5DX1NVQl9QQVRIX0RFUFRIID0gMjtcbnZhciBQVVNIX1NVQl9QQVRIID0gMztcblxuLy8gc3RhdGVzXG52YXIgQkVGT1JFX1BBVEggPSAwO1xudmFyIElOX1BBVEggPSAxO1xudmFyIEJFRk9SRV9JREVOVCA9IDI7XG52YXIgSU5fSURFTlQgPSAzO1xudmFyIElOX1NVQl9QQVRIID0gNDtcbnZhciBJTl9TSU5HTEVfUVVPVEUgPSA1O1xudmFyIElOX0RPVUJMRV9RVU9URSA9IDY7XG52YXIgQUZURVJfUEFUSCA9IDc7XG52YXIgRVJST1IgPSA4O1xuXG52YXIgcGF0aFN0YXRlTWFjaGluZSA9IFtdO1xuXG5wYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9QQVRIXSA9IHtcbiAgJ3dzJzogW0JFRk9SRV9QQVRIXSxcbiAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnWyc6IFtJTl9TVUJfUEFUSF0sXG4gICdlb2YnOiBbQUZURVJfUEFUSF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fUEFUSF0gPSB7XG4gICd3cyc6IFtJTl9QQVRIXSxcbiAgJy4nOiBbQkVGT1JFX0lERU5UXSxcbiAgJ1snOiBbSU5fU1VCX1BBVEhdLFxuICAnZW9mJzogW0FGVEVSX1BBVEhdXG59O1xuXG5wYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9JREVOVF0gPSB7XG4gICd3cyc6IFtCRUZPUkVfSURFTlRdLFxuICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fSURFTlRdID0ge1xuICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sXG4gICcwJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnbnVtYmVyJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnd3MnOiBbSU5fUEFUSCwgUFVTSF0sXG4gICcuJzogW0JFRk9SRV9JREVOVCwgUFVTSF0sXG4gICdbJzogW0lOX1NVQl9QQVRILCBQVVNIXSxcbiAgJ2VvZic6IFtBRlRFUl9QQVRILCBQVVNIXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtJTl9TVUJfUEFUSF0gPSB7XG4gIFwiJ1wiOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkRdLFxuICAnXCInOiBbSU5fRE9VQkxFX1FVT1RFLCBBUFBFTkRdLFxuICAnWyc6IFtJTl9TVUJfUEFUSCwgSU5DX1NVQl9QQVRIX0RFUFRIXSxcbiAgJ10nOiBbSU5fUEFUSCwgUFVTSF9TVUJfUEFUSF0sXG4gICdlb2YnOiBFUlJPUixcbiAgJ2Vsc2UnOiBbSU5fU1VCX1BBVEgsIEFQUEVORF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fU0lOR0xFX1FVT1RFXSA9IHtcbiAgXCInXCI6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXSxcbiAgJ2VvZic6IEVSUk9SLFxuICAnZWxzZSc6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fRE9VQkxFX1FVT1RFXSA9IHtcbiAgJ1wiJzogW0lOX1NVQl9QQVRILCBBUFBFTkRdLFxuICAnZW9mJzogRVJST1IsXG4gICdlbHNlJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5EXVxufTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgdGhlIHR5cGUgb2YgYSBjaGFyYWN0ZXIgaW4gYSBrZXlwYXRoLlxuICpcbiAqIEBwYXJhbSB7Q2hhcn0gY2hcbiAqIEByZXR1cm4ge1N0cmluZ30gdHlwZVxuICovXG5cbmZ1bmN0aW9uIGdldFBhdGhDaGFyVHlwZShjaCkge1xuICBpZiAoY2ggPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAnZW9mJztcbiAgfVxuXG4gIHZhciBjb2RlID0gY2guY2hhckNvZGVBdCgwKTtcblxuICBzd2l0Y2ggKGNvZGUpIHtcbiAgICBjYXNlIDB4NUI6IC8vIFtcbiAgICBjYXNlIDB4NUQ6IC8vIF1cbiAgICBjYXNlIDB4MkU6IC8vIC5cbiAgICBjYXNlIDB4MjI6IC8vIFwiXG4gICAgY2FzZSAweDI3OiAvLyAnXG4gICAgY2FzZSAweDMwOlxuICAgICAgLy8gMFxuICAgICAgcmV0dXJuIGNoO1xuXG4gICAgY2FzZSAweDVGOiAvLyBfXG4gICAgY2FzZSAweDI0OlxuICAgICAgLy8gJFxuICAgICAgcmV0dXJuICdpZGVudCc7XG5cbiAgICBjYXNlIDB4MjA6IC8vIFNwYWNlXG4gICAgY2FzZSAweDA5OiAvLyBUYWJcbiAgICBjYXNlIDB4MEE6IC8vIE5ld2xpbmVcbiAgICBjYXNlIDB4MEQ6IC8vIFJldHVyblxuICAgIGNhc2UgMHhBMDogLy8gTm8tYnJlYWsgc3BhY2VcbiAgICBjYXNlIDB4RkVGRjogLy8gQnl0ZSBPcmRlciBNYXJrXG4gICAgY2FzZSAweDIwMjg6IC8vIExpbmUgU2VwYXJhdG9yXG4gICAgY2FzZSAweDIwMjk6XG4gICAgICAvLyBQYXJhZ3JhcGggU2VwYXJhdG9yXG4gICAgICByZXR1cm4gJ3dzJztcbiAgfVxuXG4gIC8vIGEteiwgQS1aXG4gIGlmIChjb2RlID49IDB4NjEgJiYgY29kZSA8PSAweDdBIHx8IGNvZGUgPj0gMHg0MSAmJiBjb2RlIDw9IDB4NUEpIHtcbiAgICByZXR1cm4gJ2lkZW50JztcbiAgfVxuXG4gIC8vIDEtOVxuICBpZiAoY29kZSA+PSAweDMxICYmIGNvZGUgPD0gMHgzOSkge1xuICAgIHJldHVybiAnbnVtYmVyJztcbiAgfVxuXG4gIHJldHVybiAnZWxzZSc7XG59XG5cbi8qKlxuICogRm9ybWF0IGEgc3ViUGF0aCwgcmV0dXJuIGl0cyBwbGFpbiBmb3JtIGlmIGl0IGlzXG4gKiBhIGxpdGVyYWwgc3RyaW5nIG9yIG51bWJlci4gT3RoZXJ3aXNlIHByZXBlbmQgdGhlXG4gKiBkeW5hbWljIGluZGljYXRvciAoKikuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRTdWJQYXRoKHBhdGgpIHtcbiAgdmFyIHRyaW1tZWQgPSBwYXRoLnRyaW0oKTtcbiAgLy8gaW52YWxpZCBsZWFkaW5nIDBcbiAgaWYgKHBhdGguY2hhckF0KDApID09PSAnMCcgJiYgaXNOYU4ocGF0aCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIGlzTGl0ZXJhbCh0cmltbWVkKSA/IHN0cmlwUXVvdGVzKHRyaW1tZWQpIDogJyonICsgdHJpbW1lZDtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHN0cmluZyBwYXRoIGludG8gYW4gYXJyYXkgb2Ygc2VnbWVudHNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICogQHJldHVybiB7QXJyYXl8dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlKHBhdGgpIHtcbiAgdmFyIGtleXMgPSBbXTtcbiAgdmFyIGluZGV4ID0gLTE7XG4gIHZhciBtb2RlID0gQkVGT1JFX1BBVEg7XG4gIHZhciBzdWJQYXRoRGVwdGggPSAwO1xuICB2YXIgYywgbmV3Q2hhciwga2V5LCB0eXBlLCB0cmFuc2l0aW9uLCBhY3Rpb24sIHR5cGVNYXA7XG5cbiAgdmFyIGFjdGlvbnMgPSBbXTtcblxuICBhY3Rpb25zW1BVU0hdID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgICBrZXkgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9O1xuXG4gIGFjdGlvbnNbQVBQRU5EXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGtleSA9IG5ld0NoYXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleSArPSBuZXdDaGFyO1xuICAgIH1cbiAgfTtcblxuICBhY3Rpb25zW0lOQ19TVUJfUEFUSF9ERVBUSF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgYWN0aW9uc1tBUFBFTkRdKCk7XG4gICAgc3ViUGF0aERlcHRoKys7XG4gIH07XG5cbiAgYWN0aW9uc1tQVVNIX1NVQl9QQVRIXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc3ViUGF0aERlcHRoID4gMCkge1xuICAgICAgc3ViUGF0aERlcHRoLS07XG4gICAgICBtb2RlID0gSU5fU1VCX1BBVEg7XG4gICAgICBhY3Rpb25zW0FQUEVORF0oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3ViUGF0aERlcHRoID0gMDtcbiAgICAgIGtleSA9IGZvcm1hdFN1YlBhdGgoa2V5KTtcbiAgICAgIGlmIChrZXkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFjdGlvbnNbUFVTSF0oKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gbWF5YmVVbmVzY2FwZVF1b3RlKCkge1xuICAgIHZhciBuZXh0Q2hhciA9IHBhdGhbaW5kZXggKyAxXTtcbiAgICBpZiAobW9kZSA9PT0gSU5fU0lOR0xFX1FVT1RFICYmIG5leHRDaGFyID09PSBcIidcIiB8fCBtb2RlID09PSBJTl9ET1VCTEVfUVVPVEUgJiYgbmV4dENoYXIgPT09ICdcIicpIHtcbiAgICAgIGluZGV4Kys7XG4gICAgICBuZXdDaGFyID0gJ1xcXFwnICsgbmV4dENoYXI7XG4gICAgICBhY3Rpb25zW0FQUEVORF0oKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHdoaWxlIChtb2RlICE9IG51bGwpIHtcbiAgICBpbmRleCsrO1xuICAgIGMgPSBwYXRoW2luZGV4XTtcblxuICAgIGlmIChjID09PSAnXFxcXCcgJiYgbWF5YmVVbmVzY2FwZVF1b3RlKCkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHR5cGUgPSBnZXRQYXRoQ2hhclR5cGUoYyk7XG4gICAgdHlwZU1hcCA9IHBhdGhTdGF0ZU1hY2hpbmVbbW9kZV07XG4gICAgdHJhbnNpdGlvbiA9IHR5cGVNYXBbdHlwZV0gfHwgdHlwZU1hcFsnZWxzZSddIHx8IEVSUk9SO1xuXG4gICAgaWYgKHRyYW5zaXRpb24gPT09IEVSUk9SKSB7XG4gICAgICByZXR1cm47IC8vIHBhcnNlIGVycm9yXG4gICAgfVxuXG4gICAgbW9kZSA9IHRyYW5zaXRpb25bMF07XG4gICAgYWN0aW9uID0gYWN0aW9uc1t0cmFuc2l0aW9uWzFdXTtcbiAgICBpZiAoYWN0aW9uKSB7XG4gICAgICBuZXdDaGFyID0gdHJhbnNpdGlvblsyXTtcbiAgICAgIG5ld0NoYXIgPSBuZXdDaGFyID09PSB1bmRlZmluZWQgPyBjIDogbmV3Q2hhcjtcbiAgICAgIGlmIChhY3Rpb24oKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtb2RlID09PSBBRlRFUl9QQVRIKSB7XG4gICAgICBrZXlzLnJhdyA9IHBhdGg7XG4gICAgICByZXR1cm4ga2V5cztcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRlcm5hbCBwYXJzZSB0aGF0IGNoZWNrIGZvciBhIGNhY2hlIGhpdCBmaXJzdFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgpIHtcbiAgdmFyIGhpdCA9IHBhdGhDYWNoZS5nZXQocGF0aCk7XG4gIGlmICghaGl0KSB7XG4gICAgaGl0ID0gcGFyc2UocGF0aCk7XG4gICAgaWYgKGhpdCkge1xuICAgICAgcGF0aENhY2hlLnB1dChwYXRoLCBoaXQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaGl0O1xufVxuXG4vKipcbiAqIEdldCBmcm9tIGFuIG9iamVjdCBmcm9tIGEgcGF0aCBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICovXG5cbmZ1bmN0aW9uIGdldFBhdGgob2JqLCBwYXRoKSB7XG4gIHJldHVybiBwYXJzZUV4cHJlc3Npb24ocGF0aCkuZ2V0KG9iaik7XG59XG5cbi8qKlxuICogV2FybiBhZ2FpbnN0IHNldHRpbmcgbm9uLWV4aXN0ZW50IHJvb3QgcGF0aCBvbiBhIHZtLlxuICovXG5cbnZhciB3YXJuTm9uRXhpc3RlbnQ7XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICB3YXJuTm9uRXhpc3RlbnQgPSBmdW5jdGlvbiAocGF0aCwgdm0pIHtcbiAgICB3YXJuKCdZb3UgYXJlIHNldHRpbmcgYSBub24tZXhpc3RlbnQgcGF0aCBcIicgKyBwYXRoLnJhdyArICdcIiAnICsgJ29uIGEgdm0gaW5zdGFuY2UuIENvbnNpZGVyIHByZS1pbml0aWFsaXppbmcgdGhlIHByb3BlcnR5ICcgKyAnd2l0aCB0aGUgXCJkYXRhXCIgb3B0aW9uIGZvciBtb3JlIHJlbGlhYmxlIHJlYWN0aXZpdHkgJyArICdhbmQgYmV0dGVyIHBlcmZvcm1hbmNlLicsIHZtKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBTZXQgb24gYW4gb2JqZWN0IGZyb20gYSBwYXRoXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmcgfCBBcnJheX0gcGF0aFxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5mdW5jdGlvbiBzZXRQYXRoKG9iaiwgcGF0aCwgdmFsKSB7XG4gIHZhciBvcmlnaW5hbCA9IG9iajtcbiAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgIHBhdGggPSBwYXJzZShwYXRoKTtcbiAgfVxuICBpZiAoIXBhdGggfHwgIWlzT2JqZWN0KG9iaikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIGxhc3QsIGtleTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBwYXRoLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGxhc3QgPSBvYmo7XG4gICAga2V5ID0gcGF0aFtpXTtcbiAgICBpZiAoa2V5LmNoYXJBdCgwKSA9PT0gJyonKSB7XG4gICAgICBrZXkgPSBwYXJzZUV4cHJlc3Npb24oa2V5LnNsaWNlKDEpKS5nZXQuY2FsbChvcmlnaW5hbCwgb3JpZ2luYWwpO1xuICAgIH1cbiAgICBpZiAoaSA8IGwgLSAxKSB7XG4gICAgICBvYmogPSBvYmpba2V5XTtcbiAgICAgIGlmICghaXNPYmplY3Qob2JqKSkge1xuICAgICAgICBvYmogPSB7fTtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgbGFzdC5faXNWdWUpIHtcbiAgICAgICAgICB3YXJuTm9uRXhpc3RlbnQocGF0aCwgbGFzdCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0KGxhc3QsIGtleSwgb2JqKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGlzQXJyYXkob2JqKSkge1xuICAgICAgICBvYmouJHNldChrZXksIHZhbCk7XG4gICAgICB9IGVsc2UgaWYgKGtleSBpbiBvYmopIHtcbiAgICAgICAgb2JqW2tleV0gPSB2YWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBvYmouX2lzVnVlKSB7XG4gICAgICAgICAgd2Fybk5vbkV4aXN0ZW50KHBhdGgsIG9iaik7XG4gICAgICAgIH1cbiAgICAgICAgc2V0KG9iaiwga2V5LCB2YWwpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxudmFyIHBhdGggPSBPYmplY3QuZnJlZXplKHtcbiAgcGFyc2VQYXRoOiBwYXJzZVBhdGgsXG4gIGdldFBhdGg6IGdldFBhdGgsXG4gIHNldFBhdGg6IHNldFBhdGhcbn0pO1xuXG52YXIgZXhwcmVzc2lvbkNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXG52YXIgYWxsb3dlZEtleXdvcmRzID0gJ01hdGgsRGF0ZSx0aGlzLHRydWUsZmFsc2UsbnVsbCx1bmRlZmluZWQsSW5maW5pdHksTmFOLCcgKyAnaXNOYU4saXNGaW5pdGUsZGVjb2RlVVJJLGRlY29kZVVSSUNvbXBvbmVudCxlbmNvZGVVUkksJyArICdlbmNvZGVVUklDb21wb25lbnQscGFyc2VJbnQscGFyc2VGbG9hdCc7XG52YXIgYWxsb3dlZEtleXdvcmRzUkUgPSBuZXcgUmVnRXhwKCdeKCcgKyBhbGxvd2VkS2V5d29yZHMucmVwbGFjZSgvLC9nLCAnXFxcXGJ8JykgKyAnXFxcXGIpJyk7XG5cbi8vIGtleXdvcmRzIHRoYXQgZG9uJ3QgbWFrZSBzZW5zZSBpbnNpZGUgZXhwcmVzc2lvbnNcbnZhciBpbXByb3BlcktleXdvcmRzID0gJ2JyZWFrLGNhc2UsY2xhc3MsY2F0Y2gsY29uc3QsY29udGludWUsZGVidWdnZXIsZGVmYXVsdCwnICsgJ2RlbGV0ZSxkbyxlbHNlLGV4cG9ydCxleHRlbmRzLGZpbmFsbHksZm9yLGZ1bmN0aW9uLGlmLCcgKyAnaW1wb3J0LGluLGluc3RhbmNlb2YsbGV0LHJldHVybixzdXBlcixzd2l0Y2gsdGhyb3csdHJ5LCcgKyAndmFyLHdoaWxlLHdpdGgseWllbGQsZW51bSxhd2FpdCxpbXBsZW1lbnRzLHBhY2thZ2UsJyArICdwcm90ZWN0ZWQsc3RhdGljLGludGVyZmFjZSxwcml2YXRlLHB1YmxpYyc7XG52YXIgaW1wcm9wZXJLZXl3b3Jkc1JFID0gbmV3IFJlZ0V4cCgnXignICsgaW1wcm9wZXJLZXl3b3Jkcy5yZXBsYWNlKC8sL2csICdcXFxcYnwnKSArICdcXFxcYiknKTtcblxudmFyIHdzUkUgPSAvXFxzL2c7XG52YXIgbmV3bGluZVJFID0gL1xcbi9nO1xudmFyIHNhdmVSRSA9IC9bXFx7LF1cXHMqW1xcd1xcJF9dK1xccyo6fCgnKD86W14nXFxcXF18XFxcXC4pKid8XCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifGAoPzpbXmBcXFxcXXxcXFxcLikqXFwkXFx7fFxcfSg/OlteYFxcXFxdfFxcXFwuKSpgfGAoPzpbXmBcXFxcXXxcXFxcLikqYCl8bmV3IHx0eXBlb2YgfHZvaWQgL2c7XG52YXIgcmVzdG9yZVJFID0gL1wiKFxcZCspXCIvZztcbnZhciBwYXRoVGVzdFJFID0gL15bQS1aYS16XyRdW1xcdyRdKig/OlxcLltBLVphLXpfJF1bXFx3JF0qfFxcWycuKj8nXFxdfFxcW1wiLio/XCJcXF18XFxbXFxkK1xcXXxcXFtbQS1aYS16XyRdW1xcdyRdKlxcXSkqJC87XG52YXIgaWRlbnRSRSA9IC9bXlxcdyRcXC5dKD86W0EtWmEtel8kXVtcXHckXSopL2c7XG52YXIgbGl0ZXJhbFZhbHVlUkUkMSA9IC9eKD86dHJ1ZXxmYWxzZXxudWxsfHVuZGVmaW5lZHxJbmZpbml0eXxOYU4pJC87XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG4vKipcbiAqIFNhdmUgLyBSZXdyaXRlIC8gUmVzdG9yZVxuICpcbiAqIFdoZW4gcmV3cml0aW5nIHBhdGhzIGZvdW5kIGluIGFuIGV4cHJlc3Npb24sIGl0IGlzXG4gKiBwb3NzaWJsZSBmb3IgdGhlIHNhbWUgbGV0dGVyIHNlcXVlbmNlcyB0byBiZSBmb3VuZCBpblxuICogc3RyaW5ncyBhbmQgT2JqZWN0IGxpdGVyYWwgcHJvcGVydHkga2V5cy4gVGhlcmVmb3JlIHdlXG4gKiByZW1vdmUgYW5kIHN0b3JlIHRoZXNlIHBhcnRzIGluIGEgdGVtcG9yYXJ5IGFycmF5LCBhbmRcbiAqIHJlc3RvcmUgdGhlbSBhZnRlciB0aGUgcGF0aCByZXdyaXRlLlxuICovXG5cbnZhciBzYXZlZCA9IFtdO1xuXG4vKipcbiAqIFNhdmUgcmVwbGFjZXJcbiAqXG4gKiBUaGUgc2F2ZSByZWdleCBjYW4gbWF0Y2ggdHdvIHBvc3NpYmxlIGNhc2VzOlxuICogMS4gQW4gb3BlbmluZyBvYmplY3QgbGl0ZXJhbFxuICogMi4gQSBzdHJpbmdcbiAqIElmIG1hdGNoZWQgYXMgYSBwbGFpbiBzdHJpbmcsIHdlIG5lZWQgdG8gZXNjYXBlIGl0c1xuICogbmV3bGluZXMsIHNpbmNlIHRoZSBzdHJpbmcgbmVlZHMgdG8gYmUgcHJlc2VydmVkIHdoZW5cbiAqIGdlbmVyYXRpbmcgdGhlIGZ1bmN0aW9uIGJvZHkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtTdHJpbmd9IGlzU3RyaW5nIC0gc3RyIGlmIG1hdGNoZWQgYXMgYSBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ30gLSBwbGFjZWhvbGRlciB3aXRoIGluZGV4XG4gKi9cblxuZnVuY3Rpb24gc2F2ZShzdHIsIGlzU3RyaW5nKSB7XG4gIHZhciBpID0gc2F2ZWQubGVuZ3RoO1xuICBzYXZlZFtpXSA9IGlzU3RyaW5nID8gc3RyLnJlcGxhY2UobmV3bGluZVJFLCAnXFxcXG4nKSA6IHN0cjtcbiAgcmV0dXJuICdcIicgKyBpICsgJ1wiJztcbn1cblxuLyoqXG4gKiBQYXRoIHJld3JpdGUgcmVwbGFjZXJcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcmF3XG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gcmV3cml0ZShyYXcpIHtcbiAgdmFyIGMgPSByYXcuY2hhckF0KDApO1xuICB2YXIgcGF0aCA9IHJhdy5zbGljZSgxKTtcbiAgaWYgKGFsbG93ZWRLZXl3b3Jkc1JFLnRlc3QocGF0aCkpIHtcbiAgICByZXR1cm4gcmF3O1xuICB9IGVsc2Uge1xuICAgIHBhdGggPSBwYXRoLmluZGV4T2YoJ1wiJykgPiAtMSA/IHBhdGgucmVwbGFjZShyZXN0b3JlUkUsIHJlc3RvcmUpIDogcGF0aDtcbiAgICByZXR1cm4gYyArICdzY29wZS4nICsgcGF0aDtcbiAgfVxufVxuXG4vKipcbiAqIFJlc3RvcmUgcmVwbGFjZXJcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge1N0cmluZ30gaSAtIG1hdGNoZWQgc2F2ZSBpbmRleFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHJlc3RvcmUoc3RyLCBpKSB7XG4gIHJldHVybiBzYXZlZFtpXTtcbn1cblxuLyoqXG4gKiBSZXdyaXRlIGFuIGV4cHJlc3Npb24sIHByZWZpeGluZyBhbGwgcGF0aCBhY2Nlc3NvcnMgd2l0aFxuICogYHNjb3BlLmAgYW5kIGdlbmVyYXRlIGdldHRlci9zZXR0ZXIgZnVuY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVHZXR0ZXIoZXhwKSB7XG4gIGlmIChpbXByb3BlcktleXdvcmRzUkUudGVzdChleHApKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdBdm9pZCB1c2luZyByZXNlcnZlZCBrZXl3b3JkcyBpbiBleHByZXNzaW9uOiAnICsgZXhwKTtcbiAgfVxuICAvLyByZXNldCBzdGF0ZVxuICBzYXZlZC5sZW5ndGggPSAwO1xuICAvLyBzYXZlIHN0cmluZ3MgYW5kIG9iamVjdCBsaXRlcmFsIGtleXNcbiAgdmFyIGJvZHkgPSBleHAucmVwbGFjZShzYXZlUkUsIHNhdmUpLnJlcGxhY2Uod3NSRSwgJycpO1xuICAvLyByZXdyaXRlIGFsbCBwYXRoc1xuICAvLyBwYWQgMSBzcGFjZSBoZXJlIGJlY2F1c2UgdGhlIHJlZ2V4IG1hdGNoZXMgMSBleHRyYSBjaGFyXG4gIGJvZHkgPSAoJyAnICsgYm9keSkucmVwbGFjZShpZGVudFJFLCByZXdyaXRlKS5yZXBsYWNlKHJlc3RvcmVSRSwgcmVzdG9yZSk7XG4gIHJldHVybiBtYWtlR2V0dGVyRm4oYm9keSk7XG59XG5cbi8qKlxuICogQnVpbGQgYSBnZXR0ZXIgZnVuY3Rpb24uIFJlcXVpcmVzIGV2YWwuXG4gKlxuICogV2UgaXNvbGF0ZSB0aGUgdHJ5L2NhdGNoIHNvIGl0IGRvZXNuJ3QgYWZmZWN0IHRoZVxuICogb3B0aW1pemF0aW9uIG9mIHRoZSBwYXJzZSBmdW5jdGlvbiB3aGVuIGl0IGlzIG5vdCBjYWxsZWQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGJvZHlcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBtYWtlR2V0dGVyRm4oYm9keSkge1xuICB0cnkge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jICovXG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbignc2NvcGUnLCAncmV0dXJuICcgKyBib2R5ICsgJzsnKTtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLW5ldy1mdW5jICovXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoZS50b1N0cmluZygpLm1hdGNoKC91bnNhZmUtZXZhbHxDU1AvKSkge1xuICAgICAgICB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHRoZSBkZWZhdWx0IGJ1aWxkIG9mIFZ1ZS5qcyBpbiBhbiBlbnZpcm9ubWVudCAnICsgJ3dpdGggQ29udGVudCBTZWN1cml0eSBQb2xpY3kgdGhhdCBwcm9oaWJpdHMgdW5zYWZlLWV2YWwuICcgKyAnVXNlIHRoZSBDU1AtY29tcGxpYW50IGJ1aWxkIGluc3RlYWQ6ICcgKyAnaHR0cDovL3Z1ZWpzLm9yZy9ndWlkZS9pbnN0YWxsYXRpb24uaHRtbCNDU1AtY29tcGxpYW50LWJ1aWxkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3YXJuKCdJbnZhbGlkIGV4cHJlc3Npb24uICcgKyAnR2VuZXJhdGVkIGZ1bmN0aW9uIGJvZHk6ICcgKyBib2R5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vb3A7XG4gIH1cbn1cblxuLyoqXG4gKiBDb21waWxlIGEgc2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgZXhwcmVzc2lvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZVNldHRlcihleHApIHtcbiAgdmFyIHBhdGggPSBwYXJzZVBhdGgoZXhwKTtcbiAgaWYgKHBhdGgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCB2YWwpIHtcbiAgICAgIHNldFBhdGgoc2NvcGUsIHBhdGgsIHZhbCk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgc2V0dGVyIGV4cHJlc3Npb246ICcgKyBleHApO1xuICB9XG59XG5cbi8qKlxuICogUGFyc2UgYW4gZXhwcmVzc2lvbiBpbnRvIHJlLXdyaXR0ZW4gZ2V0dGVyL3NldHRlcnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHBhcmFtIHtCb29sZWFufSBuZWVkU2V0XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZUV4cHJlc3Npb24oZXhwLCBuZWVkU2V0KSB7XG4gIGV4cCA9IGV4cC50cmltKCk7XG4gIC8vIHRyeSBjYWNoZVxuICB2YXIgaGl0ID0gZXhwcmVzc2lvbkNhY2hlLmdldChleHApO1xuICBpZiAoaGl0KSB7XG4gICAgaWYgKG5lZWRTZXQgJiYgIWhpdC5zZXQpIHtcbiAgICAgIGhpdC5zZXQgPSBjb21waWxlU2V0dGVyKGhpdC5leHApO1xuICAgIH1cbiAgICByZXR1cm4gaGl0O1xuICB9XG4gIHZhciByZXMgPSB7IGV4cDogZXhwIH07XG4gIHJlcy5nZXQgPSBpc1NpbXBsZVBhdGgoZXhwKSAmJiBleHAuaW5kZXhPZignWycpIDwgMFxuICAvLyBvcHRpbWl6ZWQgc3VwZXIgc2ltcGxlIGdldHRlclxuICA/IG1ha2VHZXR0ZXJGbignc2NvcGUuJyArIGV4cClcbiAgLy8gZHluYW1pYyBnZXR0ZXJcbiAgOiBjb21waWxlR2V0dGVyKGV4cCk7XG4gIGlmIChuZWVkU2V0KSB7XG4gICAgcmVzLnNldCA9IGNvbXBpbGVTZXR0ZXIoZXhwKTtcbiAgfVxuICBleHByZXNzaW9uQ2FjaGUucHV0KGV4cCwgcmVzKTtcbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBleHByZXNzaW9uIGlzIGEgc2ltcGxlIHBhdGguXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc1NpbXBsZVBhdGgoZXhwKSB7XG4gIHJldHVybiBwYXRoVGVzdFJFLnRlc3QoZXhwKSAmJlxuICAvLyBkb24ndCB0cmVhdCBsaXRlcmFsIHZhbHVlcyBhcyBwYXRoc1xuICAhbGl0ZXJhbFZhbHVlUkUkMS50ZXN0KGV4cCkgJiZcbiAgLy8gTWF0aCBjb25zdGFudHMgZS5nLiBNYXRoLlBJLCBNYXRoLkUgZXRjLlxuICBleHAuc2xpY2UoMCwgNSkgIT09ICdNYXRoLic7XG59XG5cbnZhciBleHByZXNzaW9uID0gT2JqZWN0LmZyZWV6ZSh7XG4gIHBhcnNlRXhwcmVzc2lvbjogcGFyc2VFeHByZXNzaW9uLFxuICBpc1NpbXBsZVBhdGg6IGlzU2ltcGxlUGF0aFxufSk7XG5cbi8vIHdlIGhhdmUgdHdvIHNlcGFyYXRlIHF1ZXVlczogb25lIGZvciBkaXJlY3RpdmUgdXBkYXRlc1xuLy8gYW5kIG9uZSBmb3IgdXNlciB3YXRjaGVyIHJlZ2lzdGVyZWQgdmlhICR3YXRjaCgpLlxuLy8gd2Ugd2FudCB0byBndWFyYW50ZWUgZGlyZWN0aXZlIHVwZGF0ZXMgdG8gYmUgY2FsbGVkXG4vLyBiZWZvcmUgdXNlciB3YXRjaGVycyBzbyB0aGF0IHdoZW4gdXNlciB3YXRjaGVycyBhcmVcbi8vIHRyaWdnZXJlZCwgdGhlIERPTSB3b3VsZCBoYXZlIGFscmVhZHkgYmVlbiBpbiB1cGRhdGVkXG4vLyBzdGF0ZS5cblxudmFyIHF1ZXVlID0gW107XG52YXIgdXNlclF1ZXVlID0gW107XG52YXIgaGFzID0ge307XG52YXIgY2lyY3VsYXIgPSB7fTtcbnZhciB3YWl0aW5nID0gZmFsc2U7XG5cbi8qKlxuICogUmVzZXQgdGhlIGJhdGNoZXIncyBzdGF0ZS5cbiAqL1xuXG5mdW5jdGlvbiByZXNldEJhdGNoZXJTdGF0ZSgpIHtcbiAgcXVldWUubGVuZ3RoID0gMDtcbiAgdXNlclF1ZXVlLmxlbmd0aCA9IDA7XG4gIGhhcyA9IHt9O1xuICBjaXJjdWxhciA9IHt9O1xuICB3YWl0aW5nID0gZmFsc2U7XG59XG5cbi8qKlxuICogRmx1c2ggYm90aCBxdWV1ZXMgYW5kIHJ1biB0aGUgd2F0Y2hlcnMuXG4gKi9cblxuZnVuY3Rpb24gZmx1c2hCYXRjaGVyUXVldWUoKSB7XG4gIHZhciBfYWdhaW4gPSB0cnVlO1xuXG4gIF9mdW5jdGlvbjogd2hpbGUgKF9hZ2Fpbikge1xuICAgIF9hZ2FpbiA9IGZhbHNlO1xuXG4gICAgcnVuQmF0Y2hlclF1ZXVlKHF1ZXVlKTtcbiAgICBydW5CYXRjaGVyUXVldWUodXNlclF1ZXVlKTtcbiAgICAvLyB1c2VyIHdhdGNoZXJzIHRyaWdnZXJlZCBtb3JlIHdhdGNoZXJzLFxuICAgIC8vIGtlZXAgZmx1c2hpbmcgdW50aWwgaXQgZGVwbGV0ZXNcbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICBfYWdhaW4gPSB0cnVlO1xuICAgICAgY29udGludWUgX2Z1bmN0aW9uO1xuICAgIH1cbiAgICAvLyBkZXYgdG9vbCBob29rXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKGRldnRvb2xzICYmIGNvbmZpZy5kZXZ0b29scykge1xuICAgICAgZGV2dG9vbHMuZW1pdCgnZmx1c2gnKTtcbiAgICB9XG4gICAgcmVzZXRCYXRjaGVyU3RhdGUoKTtcbiAgfVxufVxuXG4vKipcbiAqIFJ1biB0aGUgd2F0Y2hlcnMgaW4gYSBzaW5nbGUgcXVldWUuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gcXVldWVcbiAqL1xuXG5mdW5jdGlvbiBydW5CYXRjaGVyUXVldWUocXVldWUpIHtcbiAgLy8gZG8gbm90IGNhY2hlIGxlbmd0aCBiZWNhdXNlIG1vcmUgd2F0Y2hlcnMgbWlnaHQgYmUgcHVzaGVkXG4gIC8vIGFzIHdlIHJ1biBleGlzdGluZyB3YXRjaGVyc1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHdhdGNoZXIgPSBxdWV1ZVtpXTtcbiAgICB2YXIgaWQgPSB3YXRjaGVyLmlkO1xuICAgIGhhc1tpZF0gPSBudWxsO1xuICAgIHdhdGNoZXIucnVuKCk7XG4gICAgLy8gaW4gZGV2IGJ1aWxkLCBjaGVjayBhbmQgc3RvcCBjaXJjdWxhciB1cGRhdGVzLlxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGhhc1tpZF0gIT0gbnVsbCkge1xuICAgICAgY2lyY3VsYXJbaWRdID0gKGNpcmN1bGFyW2lkXSB8fCAwKSArIDE7XG4gICAgICBpZiAoY2lyY3VsYXJbaWRdID4gY29uZmlnLl9tYXhVcGRhdGVDb3VudCkge1xuICAgICAgICB3YXJuKCdZb3UgbWF5IGhhdmUgYW4gaW5maW5pdGUgdXBkYXRlIGxvb3AgZm9yIHdhdGNoZXIgJyArICd3aXRoIGV4cHJlc3Npb24gXCInICsgd2F0Y2hlci5leHByZXNzaW9uICsgJ1wiJywgd2F0Y2hlci52bSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBxdWV1ZS5sZW5ndGggPSAwO1xufVxuXG4vKipcbiAqIFB1c2ggYSB3YXRjaGVyIGludG8gdGhlIHdhdGNoZXIgcXVldWUuXG4gKiBKb2JzIHdpdGggZHVwbGljYXRlIElEcyB3aWxsIGJlIHNraXBwZWQgdW5sZXNzIGl0J3NcbiAqIHB1c2hlZCB3aGVuIHRoZSBxdWV1ZSBpcyBiZWluZyBmbHVzaGVkLlxuICpcbiAqIEBwYXJhbSB7V2F0Y2hlcn0gd2F0Y2hlclxuICogICBwcm9wZXJ0aWVzOlxuICogICAtIHtOdW1iZXJ9IGlkXG4gKiAgIC0ge0Z1bmN0aW9ufSBydW5cbiAqL1xuXG5mdW5jdGlvbiBwdXNoV2F0Y2hlcih3YXRjaGVyKSB7XG4gIHZhciBpZCA9IHdhdGNoZXIuaWQ7XG4gIGlmIChoYXNbaWRdID09IG51bGwpIHtcbiAgICAvLyBwdXNoIHdhdGNoZXIgaW50byBhcHByb3ByaWF0ZSBxdWV1ZVxuICAgIHZhciBxID0gd2F0Y2hlci51c2VyID8gdXNlclF1ZXVlIDogcXVldWU7XG4gICAgaGFzW2lkXSA9IHEubGVuZ3RoO1xuICAgIHEucHVzaCh3YXRjaGVyKTtcbiAgICAvLyBxdWV1ZSB0aGUgZmx1c2hcbiAgICBpZiAoIXdhaXRpbmcpIHtcbiAgICAgIHdhaXRpbmcgPSB0cnVlO1xuICAgICAgbmV4dFRpY2soZmx1c2hCYXRjaGVyUXVldWUpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgdWlkJDIgPSAwO1xuXG4vKipcbiAqIEEgd2F0Y2hlciBwYXJzZXMgYW4gZXhwcmVzc2lvbiwgY29sbGVjdHMgZGVwZW5kZW5jaWVzLFxuICogYW5kIGZpcmVzIGNhbGxiYWNrIHdoZW4gdGhlIGV4cHJlc3Npb24gdmFsdWUgY2hhbmdlcy5cbiAqIFRoaXMgaXMgdXNlZCBmb3IgYm90aCB0aGUgJHdhdGNoKCkgYXBpIGFuZCBkaXJlY3RpdmVzLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IGV4cE9yRm5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogICAgICAgICAgICAgICAgIC0ge0FycmF5fSBmaWx0ZXJzXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gdHdvV2F5XG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gZGVlcFxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHVzZXJcbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBzeW5jXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gbGF6eVxuICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbcHJlUHJvY2Vzc11cbiAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW3Bvc3RQcm9jZXNzXVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCBvcHRpb25zKSB7XG4gIC8vIG1peCBpbiBvcHRpb25zXG4gIGlmIChvcHRpb25zKSB7XG4gICAgZXh0ZW5kKHRoaXMsIG9wdGlvbnMpO1xuICB9XG4gIHZhciBpc0ZuID0gdHlwZW9mIGV4cE9yRm4gPT09ICdmdW5jdGlvbic7XG4gIHRoaXMudm0gPSB2bTtcbiAgdm0uX3dhdGNoZXJzLnB1c2godGhpcyk7XG4gIHRoaXMuZXhwcmVzc2lvbiA9IGV4cE9yRm47XG4gIHRoaXMuY2IgPSBjYjtcbiAgdGhpcy5pZCA9ICsrdWlkJDI7IC8vIHVpZCBmb3IgYmF0Y2hpbmdcbiAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICB0aGlzLmRpcnR5ID0gdGhpcy5sYXp5OyAvLyBmb3IgbGF6eSB3YXRjaGVyc1xuICB0aGlzLmRlcHMgPSBbXTtcbiAgdGhpcy5uZXdEZXBzID0gW107XG4gIHRoaXMuZGVwSWRzID0gbmV3IF9TZXQoKTtcbiAgdGhpcy5uZXdEZXBJZHMgPSBuZXcgX1NldCgpO1xuICB0aGlzLnByZXZFcnJvciA9IG51bGw7IC8vIGZvciBhc3luYyBlcnJvciBzdGFja3NcbiAgLy8gcGFyc2UgZXhwcmVzc2lvbiBmb3IgZ2V0dGVyL3NldHRlclxuICBpZiAoaXNGbikge1xuICAgIHRoaXMuZ2V0dGVyID0gZXhwT3JGbjtcbiAgICB0aGlzLnNldHRlciA9IHVuZGVmaW5lZDtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cE9yRm4sIHRoaXMudHdvV2F5KTtcbiAgICB0aGlzLmdldHRlciA9IHJlcy5nZXQ7XG4gICAgdGhpcy5zZXR0ZXIgPSByZXMuc2V0O1xuICB9XG4gIHRoaXMudmFsdWUgPSB0aGlzLmxhenkgPyB1bmRlZmluZWQgOiB0aGlzLmdldCgpO1xuICAvLyBzdGF0ZSBmb3IgYXZvaWRpbmcgZmFsc2UgdHJpZ2dlcnMgZm9yIGRlZXAgYW5kIEFycmF5XG4gIC8vIHdhdGNoZXJzIGR1cmluZyB2bS5fZGlnZXN0KClcbiAgdGhpcy5xdWV1ZWQgPSB0aGlzLnNoYWxsb3cgPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBFdmFsdWF0ZSB0aGUgZ2V0dGVyLCBhbmQgcmUtY29sbGVjdCBkZXBlbmRlbmNpZXMuXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmJlZm9yZUdldCgpO1xuICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm07XG4gIHZhciB2YWx1ZTtcbiAgdHJ5IHtcbiAgICB2YWx1ZSA9IHRoaXMuZ2V0dGVyLmNhbGwoc2NvcGUsIHNjb3BlKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy53YXJuRXhwcmVzc2lvbkVycm9ycykge1xuICAgICAgd2FybignRXJyb3Igd2hlbiBldmFsdWF0aW5nIGV4cHJlc3Npb24gJyArICdcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCI6ICcgKyBlLnRvU3RyaW5nKCksIHRoaXMudm0pO1xuICAgIH1cbiAgfVxuICAvLyBcInRvdWNoXCIgZXZlcnkgcHJvcGVydHkgc28gdGhleSBhcmUgYWxsIHRyYWNrZWQgYXNcbiAgLy8gZGVwZW5kZW5jaWVzIGZvciBkZWVwIHdhdGNoaW5nXG4gIGlmICh0aGlzLmRlZXApIHtcbiAgICB0cmF2ZXJzZSh2YWx1ZSk7XG4gIH1cbiAgaWYgKHRoaXMucHJlUHJvY2Vzcykge1xuICAgIHZhbHVlID0gdGhpcy5wcmVQcm9jZXNzKHZhbHVlKTtcbiAgfVxuICBpZiAodGhpcy5maWx0ZXJzKSB7XG4gICAgdmFsdWUgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKHZhbHVlLCBudWxsLCB0aGlzLmZpbHRlcnMsIGZhbHNlKTtcbiAgfVxuICBpZiAodGhpcy5wb3N0UHJvY2Vzcykge1xuICAgIHZhbHVlID0gdGhpcy5wb3N0UHJvY2Vzcyh2YWx1ZSk7XG4gIH1cbiAgdGhpcy5hZnRlckdldCgpO1xuICByZXR1cm4gdmFsdWU7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSB3aXRoIHRoZSBzZXR0ZXIuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm07XG4gIGlmICh0aGlzLmZpbHRlcnMpIHtcbiAgICB2YWx1ZSA9IHNjb3BlLl9hcHBseUZpbHRlcnModmFsdWUsIHRoaXMudmFsdWUsIHRoaXMuZmlsdGVycywgdHJ1ZSk7XG4gIH1cbiAgdHJ5IHtcbiAgICB0aGlzLnNldHRlci5jYWxsKHNjb3BlLCBzY29wZSwgdmFsdWUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLndhcm5FeHByZXNzaW9uRXJyb3JzKSB7XG4gICAgICB3YXJuKCdFcnJvciB3aGVuIGV2YWx1YXRpbmcgc2V0dGVyICcgKyAnXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiOiAnICsgZS50b1N0cmluZygpLCB0aGlzLnZtKTtcbiAgICB9XG4gIH1cbiAgLy8gdHdvLXdheSBzeW5jIGZvciB2LWZvciBhbGlhc1xuICB2YXIgZm9yQ29udGV4dCA9IHNjb3BlLiRmb3JDb250ZXh0O1xuICBpZiAoZm9yQ29udGV4dCAmJiBmb3JDb250ZXh0LmFsaWFzID09PSB0aGlzLmV4cHJlc3Npb24pIHtcbiAgICBpZiAoZm9yQ29udGV4dC5maWx0ZXJzKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgdHdvLXdheSBiaW5kaW5nIG9uICcgKyAnYSB2LWZvciBhbGlhcyAoJyArIHRoaXMuZXhwcmVzc2lvbiArICcpLCBhbmQgdGhlICcgKyAndi1mb3IgaGFzIGZpbHRlcnMuIFRoaXMgd2lsbCBub3Qgd29yayBwcm9wZXJseS4gJyArICdFaXRoZXIgcmVtb3ZlIHRoZSBmaWx0ZXJzIG9yIHVzZSBhbiBhcnJheSBvZiAnICsgJ29iamVjdHMgYW5kIGJpbmQgdG8gb2JqZWN0IHByb3BlcnRpZXMgaW5zdGVhZC4nLCB0aGlzLnZtKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yQ29udGV4dC5fd2l0aExvY2soZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHNjb3BlLiRrZXkpIHtcbiAgICAgICAgLy8gb3JpZ2luYWwgaXMgYW4gb2JqZWN0XG4gICAgICAgIGZvckNvbnRleHQucmF3VmFsdWVbc2NvcGUuJGtleV0gPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvckNvbnRleHQucmF3VmFsdWUuJHNldChzY29wZS4kaW5kZXgsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufTtcblxuLyoqXG4gKiBQcmVwYXJlIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuYmVmb3JlR2V0ID0gZnVuY3Rpb24gKCkge1xuICBEZXAudGFyZ2V0ID0gdGhpcztcbn07XG5cbi8qKlxuICogQWRkIGEgZGVwZW5kZW5jeSB0byB0aGlzIGRpcmVjdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge0RlcH0gZGVwXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuYWRkRGVwID0gZnVuY3Rpb24gKGRlcCkge1xuICB2YXIgaWQgPSBkZXAuaWQ7XG4gIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGlkKSkge1xuICAgIHRoaXMubmV3RGVwSWRzLmFkZChpZCk7XG4gICAgdGhpcy5uZXdEZXBzLnB1c2goZGVwKTtcbiAgICBpZiAoIXRoaXMuZGVwSWRzLmhhcyhpZCkpIHtcbiAgICAgIGRlcC5hZGRTdWIodGhpcyk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIENsZWFuIHVwIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuYWZ0ZXJHZXQgPSBmdW5jdGlvbiAoKSB7XG4gIERlcC50YXJnZXQgPSBudWxsO1xuICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICB2YXIgZGVwID0gdGhpcy5kZXBzW2ldO1xuICAgIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGRlcC5pZCkpIHtcbiAgICAgIGRlcC5yZW1vdmVTdWIodGhpcyk7XG4gICAgfVxuICB9XG4gIHZhciB0bXAgPSB0aGlzLmRlcElkcztcbiAgdGhpcy5kZXBJZHMgPSB0aGlzLm5ld0RlcElkcztcbiAgdGhpcy5uZXdEZXBJZHMgPSB0bXA7XG4gIHRoaXMubmV3RGVwSWRzLmNsZWFyKCk7XG4gIHRtcCA9IHRoaXMuZGVwcztcbiAgdGhpcy5kZXBzID0gdGhpcy5uZXdEZXBzO1xuICB0aGlzLm5ld0RlcHMgPSB0bXA7XG4gIHRoaXMubmV3RGVwcy5sZW5ndGggPSAwO1xufTtcblxuLyoqXG4gKiBTdWJzY3JpYmVyIGludGVyZmFjZS5cbiAqIFdpbGwgYmUgY2FsbGVkIHdoZW4gYSBkZXBlbmRlbmN5IGNoYW5nZXMuXG4gKlxuICogQHBhcmFtIHtCb29sZWFufSBzaGFsbG93XG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHNoYWxsb3cpIHtcbiAgaWYgKHRoaXMubGF6eSkge1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICB9IGVsc2UgaWYgKHRoaXMuc3luYyB8fCAhY29uZmlnLmFzeW5jKSB7XG4gICAgdGhpcy5ydW4oKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBpZiBxdWV1ZWQsIG9ubHkgb3ZlcndyaXRlIHNoYWxsb3cgd2l0aCBub24tc2hhbGxvdyxcbiAgICAvLyBidXQgbm90IHRoZSBvdGhlciB3YXkgYXJvdW5kLlxuICAgIHRoaXMuc2hhbGxvdyA9IHRoaXMucXVldWVkID8gc2hhbGxvdyA/IHRoaXMuc2hhbGxvdyA6IGZhbHNlIDogISFzaGFsbG93O1xuICAgIHRoaXMucXVldWVkID0gdHJ1ZTtcbiAgICAvLyByZWNvcmQgYmVmb3JlLXB1c2ggZXJyb3Igc3RhY2sgaW4gZGVidWcgbW9kZVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5kZWJ1Zykge1xuICAgICAgdGhpcy5wcmV2RXJyb3IgPSBuZXcgRXJyb3IoJ1t2dWVdIGFzeW5jIHN0YWNrIHRyYWNlJyk7XG4gICAgfVxuICAgIHB1c2hXYXRjaGVyKHRoaXMpO1xuICB9XG59O1xuXG4vKipcbiAqIEJhdGNoZXIgam9iIGludGVyZmFjZS5cbiAqIFdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBiYXRjaGVyLlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgdmFyIHZhbHVlID0gdGhpcy5nZXQoKTtcbiAgICBpZiAodmFsdWUgIT09IHRoaXMudmFsdWUgfHxcbiAgICAvLyBEZWVwIHdhdGNoZXJzIGFuZCB3YXRjaGVycyBvbiBPYmplY3QvQXJyYXlzIHNob3VsZCBmaXJlIGV2ZW5cbiAgICAvLyB3aGVuIHRoZSB2YWx1ZSBpcyB0aGUgc2FtZSwgYmVjYXVzZSB0aGUgdmFsdWUgbWF5XG4gICAgLy8gaGF2ZSBtdXRhdGVkOyBidXQgb25seSBkbyBzbyBpZiB0aGlzIGlzIGFcbiAgICAvLyBub24tc2hhbGxvdyB1cGRhdGUgKGNhdXNlZCBieSBhIHZtIGRpZ2VzdCkuXG4gICAgKGlzT2JqZWN0KHZhbHVlKSB8fCB0aGlzLmRlZXApICYmICF0aGlzLnNoYWxsb3cpIHtcbiAgICAgIC8vIHNldCBuZXcgdmFsdWVcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAvLyBpbiBkZWJ1ZyArIGFzeW5jIG1vZGUsIHdoZW4gYSB3YXRjaGVyIGNhbGxiYWNrc1xuICAgICAgLy8gdGhyb3dzLCB3ZSBhbHNvIHRocm93IHRoZSBzYXZlZCBiZWZvcmUtcHVzaCBlcnJvclxuICAgICAgLy8gc28gdGhlIGZ1bGwgY3Jvc3MtdGljayBzdGFjayB0cmFjZSBpcyBhdmFpbGFibGUuXG4gICAgICB2YXIgcHJldkVycm9yID0gdGhpcy5wcmV2RXJyb3I7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5kZWJ1ZyAmJiBwcmV2RXJyb3IpIHtcbiAgICAgICAgdGhpcy5wcmV2RXJyb3IgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhyb3cgcHJldkVycm9yO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnF1ZXVlZCA9IHRoaXMuc2hhbGxvdyA9IGZhbHNlO1xuICB9XG59O1xuXG4vKipcbiAqIEV2YWx1YXRlIHRoZSB2YWx1ZSBvZiB0aGUgd2F0Y2hlci5cbiAqIFRoaXMgb25seSBnZXRzIGNhbGxlZCBmb3IgbGF6eSB3YXRjaGVycy5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gYXZvaWQgb3ZlcndyaXRpbmcgYW5vdGhlciB3YXRjaGVyIHRoYXQgaXMgYmVpbmdcbiAgLy8gY29sbGVjdGVkLlxuICB2YXIgY3VycmVudCA9IERlcC50YXJnZXQ7XG4gIHRoaXMudmFsdWUgPSB0aGlzLmdldCgpO1xuICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gIERlcC50YXJnZXQgPSBjdXJyZW50O1xufTtcblxuLyoqXG4gKiBEZXBlbmQgb24gYWxsIGRlcHMgY29sbGVjdGVkIGJ5IHRoaXMgd2F0Y2hlci5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5kZXBlbmQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIHRoaXMuZGVwc1tpXS5kZXBlbmQoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZW1vdmUgc2VsZiBmcm9tIGFsbCBkZXBlbmRlbmNpZXMnIHN1YmNyaWJlciBsaXN0LlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLnRlYXJkb3duID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHZtJ3Mgd2F0Y2hlciBsaXN0XG4gICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGV4cGVuc2l2ZSBvcGVyYXRpb24gc28gd2Ugc2tpcCBpdFxuICAgIC8vIGlmIHRoZSB2bSBpcyBiZWluZyBkZXN0cm95ZWQgb3IgaXMgcGVyZm9ybWluZyBhIHYtZm9yXG4gICAgLy8gcmUtcmVuZGVyICh0aGUgd2F0Y2hlciBsaXN0IGlzIHRoZW4gZmlsdGVyZWQgYnkgdi1mb3IpLlxuICAgIGlmICghdGhpcy52bS5faXNCZWluZ0Rlc3Ryb3llZCAmJiAhdGhpcy52bS5fdkZvclJlbW92aW5nKSB7XG4gICAgICB0aGlzLnZtLl93YXRjaGVycy4kcmVtb3ZlKHRoaXMpO1xuICAgIH1cbiAgICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdGhpcy5kZXBzW2ldLnJlbW92ZVN1Yih0aGlzKTtcbiAgICB9XG4gICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLnZtID0gdGhpcy5jYiA9IHRoaXMudmFsdWUgPSBudWxsO1xuICB9XG59O1xuXG4vKipcbiAqIFJlY3J1c2l2ZWx5IHRyYXZlcnNlIGFuIG9iamVjdCB0byBldm9rZSBhbGwgY29udmVydGVkXG4gKiBnZXR0ZXJzLCBzbyB0aGF0IGV2ZXJ5IG5lc3RlZCBwcm9wZXJ0eSBpbnNpZGUgdGhlIG9iamVjdFxuICogaXMgY29sbGVjdGVkIGFzIGEgXCJkZWVwXCIgZGVwZW5kZW5jeS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5cbnZhciBzZWVuT2JqZWN0cyA9IG5ldyBfU2V0KCk7XG5mdW5jdGlvbiB0cmF2ZXJzZSh2YWwsIHNlZW4pIHtcbiAgdmFyIGkgPSB1bmRlZmluZWQsXG4gICAgICBrZXlzID0gdW5kZWZpbmVkO1xuICBpZiAoIXNlZW4pIHtcbiAgICBzZWVuID0gc2Vlbk9iamVjdHM7XG4gICAgc2Vlbi5jbGVhcigpO1xuICB9XG4gIHZhciBpc0EgPSBpc0FycmF5KHZhbCk7XG4gIHZhciBpc08gPSBpc09iamVjdCh2YWwpO1xuICBpZiAoKGlzQSB8fCBpc08pICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsKSkge1xuICAgIGlmICh2YWwuX19vYl9fKSB7XG4gICAgICB2YXIgZGVwSWQgPSB2YWwuX19vYl9fLmRlcC5pZDtcbiAgICAgIGlmIChzZWVuLmhhcyhkZXBJZCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2Vlbi5hZGQoZGVwSWQpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNBKSB7XG4gICAgICBpID0gdmFsLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHRyYXZlcnNlKHZhbFtpXSwgc2Vlbik7XG4gICAgfSBlbHNlIGlmIChpc08pIHtcbiAgICAgIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xuICAgICAgaSA9IGtleXMubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkgdHJhdmVyc2UodmFsW2tleXNbaV1dLCBzZWVuKTtcbiAgICB9XG4gIH1cbn1cblxudmFyIHRleHQkMSA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHRoaXMuYXR0ciA9IHRoaXMuZWwubm9kZVR5cGUgPT09IDMgPyAnZGF0YScgOiAndGV4dENvbnRlbnQnO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdGhpcy5lbFt0aGlzLmF0dHJdID0gX3RvU3RyaW5nKHZhbHVlKTtcbiAgfVxufTtcblxudmFyIHRlbXBsYXRlQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG52YXIgaWRTZWxlY3RvckNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXG52YXIgbWFwID0ge1xuICBlZmF1bHQ6IFswLCAnJywgJyddLFxuICBsZWdlbmQ6IFsxLCAnPGZpZWxkc2V0PicsICc8L2ZpZWxkc2V0PiddLFxuICB0cjogWzIsICc8dGFibGU+PHRib2R5PicsICc8L3Rib2R5PjwvdGFibGU+J10sXG4gIGNvbDogWzIsICc8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPicsICc8L2NvbGdyb3VwPjwvdGFibGU+J11cbn07XG5cbm1hcC50ZCA9IG1hcC50aCA9IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddO1xuXG5tYXAub3B0aW9uID0gbWFwLm9wdGdyb3VwID0gWzEsICc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLCAnPC9zZWxlY3Q+J107XG5cbm1hcC50aGVhZCA9IG1hcC50Ym9keSA9IG1hcC5jb2xncm91cCA9IG1hcC5jYXB0aW9uID0gbWFwLnRmb290ID0gWzEsICc8dGFibGU+JywgJzwvdGFibGU+J107XG5cbm1hcC5nID0gbWFwLmRlZnMgPSBtYXAuc3ltYm9sID0gbWFwLnVzZSA9IG1hcC5pbWFnZSA9IG1hcC50ZXh0ID0gbWFwLmNpcmNsZSA9IG1hcC5lbGxpcHNlID0gbWFwLmxpbmUgPSBtYXAucGF0aCA9IG1hcC5wb2x5Z29uID0gbWFwLnBvbHlsaW5lID0gbWFwLnJlY3QgPSBbMSwgJzxzdmcgJyArICd4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgJyArICd4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiAnICsgJ3htbG5zOmV2PVwiaHR0cDovL3d3dy53My5vcmcvMjAwMS94bWwtZXZlbnRzXCInICsgJ3ZlcnNpb249XCIxLjFcIj4nLCAnPC9zdmc+J107XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBub2RlIGlzIGEgc3VwcG9ydGVkIHRlbXBsYXRlIG5vZGUgd2l0aCBhXG4gKiBEb2N1bWVudEZyYWdtZW50IGNvbnRlbnQuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzUmVhbFRlbXBsYXRlKG5vZGUpIHtcbiAgcmV0dXJuIGlzVGVtcGxhdGUobm9kZSkgJiYgaXNGcmFnbWVudChub2RlLmNvbnRlbnQpO1xufVxuXG52YXIgdGFnUkUkMSA9IC88KFtcXHc6LV0rKS87XG52YXIgZW50aXR5UkUgPSAvJiM/XFx3Kz87LztcbnZhciBjb21tZW50UkUgPSAvPCEtLS87XG5cbi8qKlxuICogQ29udmVydCBhIHN0cmluZyB0ZW1wbGF0ZSB0byBhIERvY3VtZW50RnJhZ21lbnQuXG4gKiBEZXRlcm1pbmVzIGNvcnJlY3Qgd3JhcHBpbmcgYnkgdGFnIHR5cGVzLiBXcmFwcGluZ1xuICogc3RyYXRlZ3kgZm91bmQgaW4galF1ZXJ5ICYgY29tcG9uZW50L2RvbWlmeS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdGVtcGxhdGVTdHJpbmdcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcmF3XG4gKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIHN0cmluZ1RvRnJhZ21lbnQodGVtcGxhdGVTdHJpbmcsIHJhdykge1xuICAvLyB0cnkgYSBjYWNoZSBoaXQgZmlyc3RcbiAgdmFyIGNhY2hlS2V5ID0gcmF3ID8gdGVtcGxhdGVTdHJpbmcgOiB0ZW1wbGF0ZVN0cmluZy50cmltKCk7XG4gIHZhciBoaXQgPSB0ZW1wbGF0ZUNhY2hlLmdldChjYWNoZUtleSk7XG4gIGlmIChoaXQpIHtcbiAgICByZXR1cm4gaGl0O1xuICB9XG5cbiAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIHZhciB0YWdNYXRjaCA9IHRlbXBsYXRlU3RyaW5nLm1hdGNoKHRhZ1JFJDEpO1xuICB2YXIgZW50aXR5TWF0Y2ggPSBlbnRpdHlSRS50ZXN0KHRlbXBsYXRlU3RyaW5nKTtcbiAgdmFyIGNvbW1lbnRNYXRjaCA9IGNvbW1lbnRSRS50ZXN0KHRlbXBsYXRlU3RyaW5nKTtcblxuICBpZiAoIXRhZ01hdGNoICYmICFlbnRpdHlNYXRjaCAmJiAhY29tbWVudE1hdGNoKSB7XG4gICAgLy8gdGV4dCBvbmx5LCByZXR1cm4gYSBzaW5nbGUgdGV4dCBub2RlLlxuICAgIGZyYWcuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGVtcGxhdGVTdHJpbmcpKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFnID0gdGFnTWF0Y2ggJiYgdGFnTWF0Y2hbMV07XG4gICAgdmFyIHdyYXAgPSBtYXBbdGFnXSB8fCBtYXAuZWZhdWx0O1xuICAgIHZhciBkZXB0aCA9IHdyYXBbMF07XG4gICAgdmFyIHByZWZpeCA9IHdyYXBbMV07XG4gICAgdmFyIHN1ZmZpeCA9IHdyYXBbMl07XG4gICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIG5vZGUuaW5uZXJIVE1MID0gcHJlZml4ICsgdGVtcGxhdGVTdHJpbmcgKyBzdWZmaXg7XG4gICAgd2hpbGUgKGRlcHRoLS0pIHtcbiAgICAgIG5vZGUgPSBub2RlLmxhc3RDaGlsZDtcbiAgICB9XG5cbiAgICB2YXIgY2hpbGQ7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICB3aGlsZSAoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICAgIGZyYWcuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgIH1cbiAgfVxuICBpZiAoIXJhdykge1xuICAgIHRyaW1Ob2RlKGZyYWcpO1xuICB9XG4gIHRlbXBsYXRlQ2FjaGUucHV0KGNhY2hlS2V5LCBmcmFnKTtcbiAgcmV0dXJuIGZyYWc7XG59XG5cbi8qKlxuICogQ29udmVydCBhIHRlbXBsYXRlIG5vZGUgdG8gYSBEb2N1bWVudEZyYWdtZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBub2RlVG9GcmFnbWVudChub2RlKSB7XG4gIC8vIGlmIGl0cyBhIHRlbXBsYXRlIHRhZyBhbmQgdGhlIGJyb3dzZXIgc3VwcG9ydHMgaXQsXG4gIC8vIGl0cyBjb250ZW50IGlzIGFscmVhZHkgYSBkb2N1bWVudCBmcmFnbWVudC4gSG93ZXZlciwgaU9TIFNhZmFyaSBoYXNcbiAgLy8gYnVnIHdoZW4gdXNpbmcgZGlyZWN0bHkgY2xvbmVkIHRlbXBsYXRlIGNvbnRlbnQgd2l0aCB0b3VjaFxuICAvLyBldmVudHMgYW5kIGNhbiBjYXVzZSBjcmFzaGVzIHdoZW4gdGhlIG5vZGVzIGFyZSByZW1vdmVkIGZyb20gRE9NLCBzbyB3ZVxuICAvLyBoYXZlIHRvIHRyZWF0IHRlbXBsYXRlIGVsZW1lbnRzIGFzIHN0cmluZyB0ZW1wbGF0ZXMuICgjMjgwNSlcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChpc1JlYWxUZW1wbGF0ZShub2RlKSkge1xuICAgIHJldHVybiBzdHJpbmdUb0ZyYWdtZW50KG5vZGUuaW5uZXJIVE1MKTtcbiAgfVxuICAvLyBzY3JpcHQgdGVtcGxhdGVcbiAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ1NDUklQVCcpIHtcbiAgICByZXR1cm4gc3RyaW5nVG9GcmFnbWVudChub2RlLnRleHRDb250ZW50KTtcbiAgfVxuICAvLyBub3JtYWwgbm9kZSwgY2xvbmUgaXQgdG8gYXZvaWQgbXV0YXRpbmcgdGhlIG9yaWdpbmFsXG4gIHZhciBjbG9uZWROb2RlID0gY2xvbmVOb2RlKG5vZGUpO1xuICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgdmFyIGNoaWxkO1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICB3aGlsZSAoY2hpbGQgPSBjbG9uZWROb2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgZnJhZy5hcHBlbmRDaGlsZChjaGlsZCk7XG4gIH1cbiAgdHJpbU5vZGUoZnJhZyk7XG4gIHJldHVybiBmcmFnO1xufVxuXG4vLyBUZXN0IGZvciB0aGUgcHJlc2VuY2Ugb2YgdGhlIFNhZmFyaSB0ZW1wbGF0ZSBjbG9uaW5nIGJ1Z1xuLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd3VnLmNnaT9pZD0xMzc3NTVcbnZhciBoYXNCcm9rZW5UZW1wbGF0ZSA9IChmdW5jdGlvbiAoKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChpbkJyb3dzZXIpIHtcbiAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGEuaW5uZXJIVE1MID0gJzx0ZW1wbGF0ZT4xPC90ZW1wbGF0ZT4nO1xuICAgIHJldHVybiAhYS5jbG9uZU5vZGUodHJ1ZSkuZmlyc3RDaGlsZC5pbm5lckhUTUw7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59KSgpO1xuXG4vLyBUZXN0IGZvciBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGNsb25lIGJ1Z1xudmFyIGhhc1RleHRhcmVhQ2xvbmVCdWcgPSAoZnVuY3Rpb24gKCkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAoaW5Ccm93c2VyKSB7XG4gICAgdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgIHQucGxhY2Vob2xkZXIgPSAndCc7XG4gICAgcmV0dXJuIHQuY2xvbmVOb2RlKHRydWUpLnZhbHVlID09PSAndCc7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59KSgpO1xuXG4vKipcbiAqIDEuIERlYWwgd2l0aCBTYWZhcmkgY2xvbmluZyBuZXN0ZWQgPHRlbXBsYXRlPiBidWcgYnlcbiAqICAgIG1hbnVhbGx5IGNsb25pbmcgYWxsIHRlbXBsYXRlIGluc3RhbmNlcy5cbiAqIDIuIERlYWwgd2l0aCBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGJ1ZyBieSBzZXR0aW5nXG4gKiAgICB0aGUgY29ycmVjdCB2YWx1ZSBhZnRlciBjbG9uaW5nLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBub2RlXG4gKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gY2xvbmVOb2RlKG5vZGUpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICghbm9kZS5xdWVyeVNlbGVjdG9yQWxsKSB7XG4gICAgcmV0dXJuIG5vZGUuY2xvbmVOb2RlKCk7XG4gIH1cbiAgdmFyIHJlcyA9IG5vZGUuY2xvbmVOb2RlKHRydWUpO1xuICB2YXIgaSwgb3JpZ2luYWwsIGNsb25lZDtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChoYXNCcm9rZW5UZW1wbGF0ZSkge1xuICAgIHZhciB0ZW1wQ2xvbmUgPSByZXM7XG4gICAgaWYgKGlzUmVhbFRlbXBsYXRlKG5vZGUpKSB7XG4gICAgICBub2RlID0gbm9kZS5jb250ZW50O1xuICAgICAgdGVtcENsb25lID0gcmVzLmNvbnRlbnQ7XG4gICAgfVxuICAgIG9yaWdpbmFsID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpO1xuICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcbiAgICAgIGNsb25lZCA9IHRlbXBDbG9uZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpO1xuICAgICAgaSA9IGNsb25lZC5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGNsb25lZFtpXS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChjbG9uZU5vZGUob3JpZ2luYWxbaV0pLCBjbG9uZWRbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGhhc1RleHRhcmVhQ2xvbmVCdWcpIHtcbiAgICBpZiAobm9kZS50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICByZXMudmFsdWUgPSBub2RlLnZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcmlnaW5hbCA9IG5vZGUucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKTtcbiAgICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcbiAgICAgICAgY2xvbmVkID0gcmVzLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJyk7XG4gICAgICAgIGkgPSBjbG9uZWQubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgY2xvbmVkW2ldLnZhbHVlID0gb3JpZ2luYWxbaV0udmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBQcm9jZXNzIHRoZSB0ZW1wbGF0ZSBvcHRpb24gYW5kIG5vcm1hbGl6ZXMgaXQgaW50byBhXG4gKiBhIERvY3VtZW50RnJhZ21lbnQgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHBhcnRpYWwgb3IgYVxuICogaW5zdGFuY2UgdGVtcGxhdGUuXG4gKlxuICogQHBhcmFtIHsqfSB0ZW1wbGF0ZVxuICogICAgICAgIFBvc3NpYmxlIHZhbHVlcyBpbmNsdWRlOlxuICogICAgICAgIC0gRG9jdW1lbnRGcmFnbWVudCBvYmplY3RcbiAqICAgICAgICAtIE5vZGUgb2JqZWN0IG9mIHR5cGUgVGVtcGxhdGVcbiAqICAgICAgICAtIGlkIHNlbGVjdG9yOiAnI3NvbWUtdGVtcGxhdGUtaWQnXG4gKiAgICAgICAgLSB0ZW1wbGF0ZSBzdHJpbmc6ICc8ZGl2PjxzcGFuPnt7bXNnfX08L3NwYW4+PC9kaXY+J1xuICogQHBhcmFtIHtCb29sZWFufSBzaG91bGRDbG9uZVxuICogQHBhcmFtIHtCb29sZWFufSByYXdcbiAqICAgICAgICBpbmxpbmUgSFRNTCBpbnRlcnBvbGF0aW9uLiBEbyBub3QgY2hlY2sgZm9yIGlkXG4gKiAgICAgICAgc2VsZWN0b3IgYW5kIGtlZXAgd2hpdGVzcGFjZSBpbiB0aGUgc3RyaW5nLlxuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudHx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgc2hvdWxkQ2xvbmUsIHJhdykge1xuICB2YXIgbm9kZSwgZnJhZztcblxuICAvLyBpZiB0aGUgdGVtcGxhdGUgaXMgYWxyZWFkeSBhIGRvY3VtZW50IGZyYWdtZW50LFxuICAvLyBkbyBub3RoaW5nXG4gIGlmIChpc0ZyYWdtZW50KHRlbXBsYXRlKSkge1xuICAgIHRyaW1Ob2RlKHRlbXBsYXRlKTtcbiAgICByZXR1cm4gc2hvdWxkQ2xvbmUgPyBjbG9uZU5vZGUodGVtcGxhdGUpIDogdGVtcGxhdGU7XG4gIH1cblxuICBpZiAodHlwZW9mIHRlbXBsYXRlID09PSAnc3RyaW5nJykge1xuICAgIC8vIGlkIHNlbGVjdG9yXG4gICAgaWYgKCFyYXcgJiYgdGVtcGxhdGUuY2hhckF0KDApID09PSAnIycpIHtcbiAgICAgIC8vIGlkIHNlbGVjdG9yIGNhbiBiZSBjYWNoZWQgdG9vXG4gICAgICBmcmFnID0gaWRTZWxlY3RvckNhY2hlLmdldCh0ZW1wbGF0ZSk7XG4gICAgICBpZiAoIWZyYWcpIHtcbiAgICAgICAgbm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRlbXBsYXRlLnNsaWNlKDEpKTtcbiAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQobm9kZSk7XG4gICAgICAgICAgLy8gc2F2ZSBzZWxlY3RvciB0byBjYWNoZVxuICAgICAgICAgIGlkU2VsZWN0b3JDYWNoZS5wdXQodGVtcGxhdGUsIGZyYWcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vcm1hbCBzdHJpbmcgdGVtcGxhdGVcbiAgICAgIGZyYWcgPSBzdHJpbmdUb0ZyYWdtZW50KHRlbXBsYXRlLCByYXcpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0ZW1wbGF0ZS5ub2RlVHlwZSkge1xuICAgIC8vIGEgZGlyZWN0IG5vZGVcbiAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQodGVtcGxhdGUpO1xuICB9XG5cbiAgcmV0dXJuIGZyYWcgJiYgc2hvdWxkQ2xvbmUgPyBjbG9uZU5vZGUoZnJhZykgOiBmcmFnO1xufVxuXG52YXIgdGVtcGxhdGUgPSBPYmplY3QuZnJlZXplKHtcbiAgY2xvbmVOb2RlOiBjbG9uZU5vZGUsXG4gIHBhcnNlVGVtcGxhdGU6IHBhcnNlVGVtcGxhdGVcbn0pO1xuXG52YXIgaHRtbCA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIGEgY29tbWVudCBub2RlIG1lYW5zIHRoaXMgaXMgYSBiaW5kaW5nIGZvclxuICAgIC8vIHt7eyBpbmxpbmUgdW5lc2NhcGVkIGh0bWwgfX19XG4gICAgaWYgKHRoaXMuZWwubm9kZVR5cGUgPT09IDgpIHtcbiAgICAgIC8vIGhvbGQgbm9kZXNcbiAgICAgIHRoaXMubm9kZXMgPSBbXTtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIHBsYWNlaG9sZGVyIHdpdGggcHJvcGVyIGFuY2hvclxuICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtaHRtbCcpO1xuICAgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdmFsdWUgPSBfdG9TdHJpbmcodmFsdWUpO1xuICAgIGlmICh0aGlzLm5vZGVzKSB7XG4gICAgICB0aGlzLnN3YXAodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsLmlubmVySFRNTCA9IHZhbHVlO1xuICAgIH1cbiAgfSxcblxuICBzd2FwOiBmdW5jdGlvbiBzd2FwKHZhbHVlKSB7XG4gICAgLy8gcmVtb3ZlIG9sZCBub2Rlc1xuICAgIHZhciBpID0gdGhpcy5ub2Rlcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgcmVtb3ZlKHRoaXMubm9kZXNbaV0pO1xuICAgIH1cbiAgICAvLyBjb252ZXJ0IG5ldyB2YWx1ZSB0byBhIGZyYWdtZW50XG4gICAgLy8gZG8gbm90IGF0dGVtcHQgdG8gcmV0cmlldmUgZnJvbSBpZCBzZWxlY3RvclxuICAgIHZhciBmcmFnID0gcGFyc2VUZW1wbGF0ZSh2YWx1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgLy8gc2F2ZSBhIHJlZmVyZW5jZSB0byB0aGVzZSBub2RlcyBzbyB3ZSBjYW4gcmVtb3ZlIGxhdGVyXG4gICAgdGhpcy5ub2RlcyA9IHRvQXJyYXkoZnJhZy5jaGlsZE5vZGVzKTtcbiAgICBiZWZvcmUoZnJhZywgdGhpcy5hbmNob3IpO1xuICB9XG59O1xuXG4vKipcbiAqIEFic3RyYWN0aW9uIGZvciBhIHBhcnRpYWxseS1jb21waWxlZCBmcmFnbWVudC5cbiAqIENhbiBvcHRpb25hbGx5IGNvbXBpbGUgY29udGVudCB3aXRoIGEgY2hpbGQgc2NvcGUuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gbGlua2VyXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuICogQHBhcmFtIHtWdWV9IFtob3N0XVxuICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cbiAqIEBwYXJhbSB7RnJhZ21lbnR9IFtwYXJlbnRGcmFnXVxuICovXG5mdW5jdGlvbiBGcmFnbWVudChsaW5rZXIsIHZtLCBmcmFnLCBob3N0LCBzY29wZSwgcGFyZW50RnJhZykge1xuICB0aGlzLmNoaWxkcmVuID0gW107XG4gIHRoaXMuY2hpbGRGcmFncyA9IFtdO1xuICB0aGlzLnZtID0gdm07XG4gIHRoaXMuc2NvcGUgPSBzY29wZTtcbiAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuICB0aGlzLnBhcmVudEZyYWcgPSBwYXJlbnRGcmFnO1xuICBpZiAocGFyZW50RnJhZykge1xuICAgIHBhcmVudEZyYWcuY2hpbGRGcmFncy5wdXNoKHRoaXMpO1xuICB9XG4gIHRoaXMudW5saW5rID0gbGlua2VyKHZtLCBmcmFnLCBob3N0LCBzY29wZSwgdGhpcyk7XG4gIHZhciBzaW5nbGUgPSB0aGlzLnNpbmdsZSA9IGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiZcbiAgLy8gZG8gbm90IGdvIHNpbmdsZSBtb2RlIGlmIHRoZSBvbmx5IG5vZGUgaXMgYW4gYW5jaG9yXG4gICFmcmFnLmNoaWxkTm9kZXNbMF0uX192X2FuY2hvcjtcbiAgaWYgKHNpbmdsZSkge1xuICAgIHRoaXMubm9kZSA9IGZyYWcuY2hpbGROb2Rlc1swXTtcbiAgICB0aGlzLmJlZm9yZSA9IHNpbmdsZUJlZm9yZTtcbiAgICB0aGlzLnJlbW92ZSA9IHNpbmdsZVJlbW92ZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLm5vZGUgPSBjcmVhdGVBbmNob3IoJ2ZyYWdtZW50LXN0YXJ0Jyk7XG4gICAgdGhpcy5lbmQgPSBjcmVhdGVBbmNob3IoJ2ZyYWdtZW50LWVuZCcpO1xuICAgIHRoaXMuZnJhZyA9IGZyYWc7XG4gICAgcHJlcGVuZCh0aGlzLm5vZGUsIGZyYWcpO1xuICAgIGZyYWcuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xuICAgIHRoaXMuYmVmb3JlID0gbXVsdGlCZWZvcmU7XG4gICAgdGhpcy5yZW1vdmUgPSBtdWx0aVJlbW92ZTtcbiAgfVxuICB0aGlzLm5vZGUuX192X2ZyYWcgPSB0aGlzO1xufVxuXG4vKipcbiAqIENhbGwgYXR0YWNoL2RldGFjaCBmb3IgYWxsIGNvbXBvbmVudHMgY29udGFpbmVkIHdpdGhpblxuICogdGhpcyBmcmFnbWVudC4gQWxzbyBkbyBzbyByZWN1cnNpdmVseSBmb3IgYWxsIGNoaWxkXG4gKiBmcmFnbWVudHMuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaG9va1xuICovXG5cbkZyYWdtZW50LnByb3RvdHlwZS5jYWxsSG9vayA9IGZ1bmN0aW9uIChob29rKSB7XG4gIHZhciBpLCBsO1xuICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHRoaXMuY2hpbGRGcmFnc1tpXS5jYWxsSG9vayhob29rKTtcbiAgfVxuICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBob29rKHRoaXMuY2hpbGRyZW5baV0pO1xuICB9XG59O1xuXG4vKipcbiAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG4gKlxuICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cbiAqL1xuXG5mdW5jdGlvbiBzaW5nbGVCZWZvcmUodGFyZ2V0LCB3aXRoVHJhbnNpdGlvbikge1xuICB0aGlzLmluc2VydGVkID0gdHJ1ZTtcbiAgdmFyIG1ldGhvZCA9IHdpdGhUcmFuc2l0aW9uICE9PSBmYWxzZSA/IGJlZm9yZVdpdGhUcmFuc2l0aW9uIDogYmVmb3JlO1xuICBtZXRob2QodGhpcy5ub2RlLCB0YXJnZXQsIHRoaXMudm0pO1xuICBpZiAoaW5Eb2ModGhpcy5ub2RlKSkge1xuICAgIHRoaXMuY2FsbEhvb2soYXR0YWNoKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBmcmFnbWVudCwgc2luZ2xlIG5vZGUgdmVyc2lvblxuICovXG5cbmZ1bmN0aW9uIHNpbmdsZVJlbW92ZSgpIHtcbiAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuICB2YXIgc2hvdWxkQ2FsbFJlbW92ZSA9IGluRG9jKHRoaXMubm9kZSk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5iZWZvcmVSZW1vdmUoKTtcbiAgcmVtb3ZlV2l0aFRyYW5zaXRpb24odGhpcy5ub2RlLCB0aGlzLnZtLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHNob3VsZENhbGxSZW1vdmUpIHtcbiAgICAgIHNlbGYuY2FsbEhvb2soZGV0YWNoKTtcbiAgICB9XG4gICAgc2VsZi5kZXN0cm95KCk7XG4gIH0pO1xufVxuXG4vKipcbiAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG4gKlxuICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cbiAqL1xuXG5mdW5jdGlvbiBtdWx0aUJlZm9yZSh0YXJnZXQsIHdpdGhUcmFuc2l0aW9uKSB7XG4gIHRoaXMuaW5zZXJ0ZWQgPSB0cnVlO1xuICB2YXIgdm0gPSB0aGlzLnZtO1xuICB2YXIgbWV0aG9kID0gd2l0aFRyYW5zaXRpb24gIT09IGZhbHNlID8gYmVmb3JlV2l0aFRyYW5zaXRpb24gOiBiZWZvcmU7XG4gIG1hcE5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCBmdW5jdGlvbiAobm9kZSkge1xuICAgIG1ldGhvZChub2RlLCB0YXJnZXQsIHZtKTtcbiAgfSk7XG4gIGlmIChpbkRvYyh0aGlzLm5vZGUpKSB7XG4gICAgdGhpcy5jYWxsSG9vayhhdHRhY2gpO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIGZyYWdtZW50LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG4gKi9cblxuZnVuY3Rpb24gbXVsdGlSZW1vdmUoKSB7XG4gIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgc2hvdWxkQ2FsbFJlbW92ZSA9IGluRG9jKHRoaXMubm9kZSk7XG4gIHRoaXMuYmVmb3JlUmVtb3ZlKCk7XG4gIHJlbW92ZU5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCB0aGlzLnZtLCB0aGlzLmZyYWcsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc2hvdWxkQ2FsbFJlbW92ZSkge1xuICAgICAgc2VsZi5jYWxsSG9vayhkZXRhY2gpO1xuICAgIH1cbiAgICBzZWxmLmRlc3Ryb3koKTtcbiAgfSk7XG59XG5cbi8qKlxuICogUHJlcGFyZSB0aGUgZnJhZ21lbnQgZm9yIHJlbW92YWwuXG4gKi9cblxuRnJhZ21lbnQucHJvdG90eXBlLmJlZm9yZVJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGksIGw7XG4gIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgLy8gY2FsbCB0aGUgc2FtZSBtZXRob2QgcmVjdXJzaXZlbHkgb24gY2hpbGRcbiAgICAvLyBmcmFnbWVudHMsIGRlcHRoLWZpcnN0XG4gICAgdGhpcy5jaGlsZEZyYWdzW2ldLmJlZm9yZVJlbW92ZShmYWxzZSk7XG4gIH1cbiAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgLy8gQ2FsbCBkZXN0cm95IGZvciBhbGwgY29udGFpbmVkIGluc3RhbmNlcyxcbiAgICAvLyB3aXRoIHJlbW92ZTpmYWxzZSBhbmQgZGVmZXI6dHJ1ZS5cbiAgICAvLyBEZWZlciBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZSBuZWVkIHRvXG4gICAgLy8ga2VlcCB0aGUgY2hpbGRyZW4gdG8gY2FsbCBkZXRhY2ggaG9va3NcbiAgICAvLyBvbiB0aGVtLlxuICAgIHRoaXMuY2hpbGRyZW5baV0uJGRlc3Ryb3koZmFsc2UsIHRydWUpO1xuICB9XG4gIHZhciBkaXJzID0gdGhpcy51bmxpbmsuZGlycztcbiAgZm9yIChpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgLy8gZGlzYWJsZSB0aGUgd2F0Y2hlcnMgb24gYWxsIHRoZSBkaXJlY3RpdmVzXG4gICAgLy8gc28gdGhhdCB0aGUgcmVuZGVyZWQgY29udGVudCBzdGF5cyB0aGUgc2FtZVxuICAgIC8vIGR1cmluZyByZW1vdmFsLlxuICAgIGRpcnNbaV0uX3dhdGNoZXIgJiYgZGlyc1tpXS5fd2F0Y2hlci50ZWFyZG93bigpO1xuICB9XG59O1xuXG4vKipcbiAqIERlc3Ryb3kgdGhlIGZyYWdtZW50LlxuICovXG5cbkZyYWdtZW50LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5wYXJlbnRGcmFnKSB7XG4gICAgdGhpcy5wYXJlbnRGcmFnLmNoaWxkRnJhZ3MuJHJlbW92ZSh0aGlzKTtcbiAgfVxuICB0aGlzLm5vZGUuX192X2ZyYWcgPSBudWxsO1xuICB0aGlzLnVubGluaygpO1xufTtcblxuLyoqXG4gKiBDYWxsIGF0dGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcbiAqL1xuXG5mdW5jdGlvbiBhdHRhY2goY2hpbGQpIHtcbiAgaWYgKCFjaGlsZC5faXNBdHRhY2hlZCAmJiBpbkRvYyhjaGlsZC4kZWwpKSB7XG4gICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuICB9XG59XG5cbi8qKlxuICogQ2FsbCBkZXRhY2ggaG9vayBmb3IgYSBWdWUgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHtWdWV9IGNoaWxkXG4gKi9cblxuZnVuY3Rpb24gZGV0YWNoKGNoaWxkKSB7XG4gIGlmIChjaGlsZC5faXNBdHRhY2hlZCAmJiAhaW5Eb2MoY2hpbGQuJGVsKSkge1xuICAgIGNoaWxkLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcbiAgfVxufVxuXG52YXIgbGlua2VyQ2FjaGUgPSBuZXcgQ2FjaGUoNTAwMCk7XG5cbi8qKlxuICogQSBmYWN0b3J5IHRoYXQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGluc3RhbmNlcyBvZiBhXG4gKiBmcmFnbWVudC4gQ2FjaGVzIHRoZSBjb21waWxlZCBsaW5rZXIgaWYgcG9zc2libGUuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0VsZW1lbnR8U3RyaW5nfSBlbFxuICovXG5mdW5jdGlvbiBGcmFnbWVudEZhY3Rvcnkodm0sIGVsKSB7XG4gIHRoaXMudm0gPSB2bTtcbiAgdmFyIHRlbXBsYXRlO1xuICB2YXIgaXNTdHJpbmcgPSB0eXBlb2YgZWwgPT09ICdzdHJpbmcnO1xuICBpZiAoaXNTdHJpbmcgfHwgaXNUZW1wbGF0ZShlbCkgJiYgIWVsLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG4gICAgdGVtcGxhdGUgPSBwYXJzZVRlbXBsYXRlKGVsLCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICB0ZW1wbGF0ZS5hcHBlbmRDaGlsZChlbCk7XG4gIH1cbiAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAvLyBsaW5rZXIgY2FuIGJlIGNhY2hlZCwgYnV0IG9ubHkgZm9yIGNvbXBvbmVudHNcbiAgdmFyIGxpbmtlcjtcbiAgdmFyIGNpZCA9IHZtLmNvbnN0cnVjdG9yLmNpZDtcbiAgaWYgKGNpZCA+IDApIHtcbiAgICB2YXIgY2FjaGVJZCA9IGNpZCArIChpc1N0cmluZyA/IGVsIDogZ2V0T3V0ZXJIVE1MKGVsKSk7XG4gICAgbGlua2VyID0gbGlua2VyQ2FjaGUuZ2V0KGNhY2hlSWQpO1xuICAgIGlmICghbGlua2VyKSB7XG4gICAgICBsaW5rZXIgPSBjb21waWxlKHRlbXBsYXRlLCB2bS4kb3B0aW9ucywgdHJ1ZSk7XG4gICAgICBsaW5rZXJDYWNoZS5wdXQoY2FjaGVJZCwgbGlua2VyKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGlua2VyID0gY29tcGlsZSh0ZW1wbGF0ZSwgdm0uJG9wdGlvbnMsIHRydWUpO1xuICB9XG4gIHRoaXMubGlua2VyID0gbGlua2VyO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGZyYWdtZW50IGluc3RhbmNlIHdpdGggZ2l2ZW4gaG9zdCBhbmQgc2NvcGUuXG4gKlxuICogQHBhcmFtIHtWdWV9IGhvc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBzY29wZVxuICogQHBhcmFtIHtGcmFnbWVudH0gcGFyZW50RnJhZ1xuICovXG5cbkZyYWdtZW50RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKSB7XG4gIHZhciBmcmFnID0gY2xvbmVOb2RlKHRoaXMudGVtcGxhdGUpO1xuICByZXR1cm4gbmV3IEZyYWdtZW50KHRoaXMubGlua2VyLCB0aGlzLnZtLCBmcmFnLCBob3N0LCBzY29wZSwgcGFyZW50RnJhZyk7XG59O1xuXG52YXIgT04gPSA3MDA7XG52YXIgTU9ERUwgPSA4MDA7XG52YXIgQklORCA9IDg1MDtcbnZhciBUUkFOU0lUSU9OID0gMTEwMDtcbnZhciBFTCA9IDE1MDA7XG52YXIgQ09NUE9ORU5UID0gMTUwMDtcbnZhciBQQVJUSUFMID0gMTc1MDtcbnZhciBJRiA9IDIxMDA7XG52YXIgRk9SID0gMjIwMDtcbnZhciBTTE9UID0gMjMwMDtcblxudmFyIHVpZCQzID0gMDtcblxudmFyIHZGb3IgPSB7XG5cbiAgcHJpb3JpdHk6IEZPUixcbiAgdGVybWluYWw6IHRydWUsXG5cbiAgcGFyYW1zOiBbJ3RyYWNrLWJ5JywgJ3N0YWdnZXInLCAnZW50ZXItc3RhZ2dlcicsICdsZWF2ZS1zdGFnZ2VyJ10sXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyBzdXBwb3J0IFwiaXRlbSBpbi9vZiBpdGVtc1wiIHN5bnRheFxuICAgIHZhciBpbk1hdGNoID0gdGhpcy5leHByZXNzaW9uLm1hdGNoKC8oLiopICg/OmlufG9mKSAoLiopLyk7XG4gICAgaWYgKGluTWF0Y2gpIHtcbiAgICAgIHZhciBpdE1hdGNoID0gaW5NYXRjaFsxXS5tYXRjaCgvXFwoKC4qKSwoLiopXFwpLyk7XG4gICAgICBpZiAoaXRNYXRjaCkge1xuICAgICAgICB0aGlzLml0ZXJhdG9yID0gaXRNYXRjaFsxXS50cmltKCk7XG4gICAgICAgIHRoaXMuYWxpYXMgPSBpdE1hdGNoWzJdLnRyaW0oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYWxpYXMgPSBpbk1hdGNoWzFdLnRyaW0oKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGluTWF0Y2hbMl07XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmFsaWFzKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgdi1mb3IgZXhwcmVzc2lvbiBcIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2FsaWFzIGlzIHJlcXVpcmVkLicsIHRoaXMudm0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHVpZCBhcyBhIGNhY2hlIGlkZW50aWZpZXJcbiAgICB0aGlzLmlkID0gJ19fdi1mb3JfXycgKyArK3VpZCQzO1xuXG4gICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhbiBvcHRpb24gbGlzdCxcbiAgICAvLyBzbyB0aGF0IHdlIGtub3cgaWYgd2UgbmVlZCB0byB1cGRhdGUgdGhlIDxzZWxlY3Q+J3NcbiAgICAvLyB2LW1vZGVsIHdoZW4gdGhlIG9wdGlvbiBsaXN0IGhhcyBjaGFuZ2VkLlxuICAgIC8vIGJlY2F1c2Ugdi1tb2RlbCBoYXMgYSBsb3dlciBwcmlvcml0eSB0aGFuIHYtZm9yLFxuICAgIC8vIHRoZSB2LW1vZGVsIGlzIG5vdCBib3VuZCBoZXJlIHlldCwgc28gd2UgaGF2ZSB0b1xuICAgIC8vIHJldHJpdmUgaXQgaW4gdGhlIGFjdHVhbCB1cGRhdGVNb2RlbCgpIGZ1bmN0aW9uLlxuICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWU7XG4gICAgdGhpcy5pc09wdGlvbiA9ICh0YWcgPT09ICdPUFRJT04nIHx8IHRhZyA9PT0gJ09QVEdST1VQJykgJiYgdGhpcy5lbC5wYXJlbnROb2RlLnRhZ05hbWUgPT09ICdTRUxFQ1QnO1xuXG4gICAgLy8gc2V0dXAgYW5jaG9yIG5vZGVzXG4gICAgdGhpcy5zdGFydCA9IGNyZWF0ZUFuY2hvcigndi1mb3Itc3RhcnQnKTtcbiAgICB0aGlzLmVuZCA9IGNyZWF0ZUFuY2hvcigndi1mb3ItZW5kJyk7XG4gICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmVuZCk7XG4gICAgYmVmb3JlKHRoaXMuc3RhcnQsIHRoaXMuZW5kKTtcblxuICAgIC8vIGNhY2hlXG4gICAgdGhpcy5jYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICAvLyBmcmFnbWVudCBmYWN0b3J5XG4gICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCB0aGlzLmVsKTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShkYXRhKSB7XG4gICAgdGhpcy5kaWZmKGRhdGEpO1xuICAgIHRoaXMudXBkYXRlUmVmKCk7XG4gICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBEaWZmLCBiYXNlZCBvbiBuZXcgZGF0YSBhbmQgb2xkIGRhdGEsIGRldGVybWluZSB0aGVcbiAgICogbWluaW11bSBhbW91bnQgb2YgRE9NIG1hbmlwdWxhdGlvbnMgbmVlZGVkIHRvIG1ha2UgdGhlXG4gICAqIERPTSByZWZsZWN0IHRoZSBuZXcgZGF0YSBBcnJheS5cbiAgICpcbiAgICogVGhlIGFsZ29yaXRobSBkaWZmcyB0aGUgbmV3IGRhdGEgQXJyYXkgYnkgc3RvcmluZyBhXG4gICAqIGhpZGRlbiByZWZlcmVuY2UgdG8gYW4gb3duZXIgdm0gaW5zdGFuY2Ugb24gcHJldmlvdXNseVxuICAgKiBzZWVuIGRhdGEuIFRoaXMgYWxsb3dzIHVzIHRvIGFjaGlldmUgTyhuKSB3aGljaCBpc1xuICAgKiBiZXR0ZXIgdGhhbiBhIGxldmVuc2h0ZWluIGRpc3RhbmNlIGJhc2VkIGFsZ29yaXRobSxcbiAgICogd2hpY2ggaXMgTyhtICogbikuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGRhdGFcbiAgICovXG5cbiAgZGlmZjogZnVuY3Rpb24gZGlmZihkYXRhKSB7XG4gICAgLy8gY2hlY2sgaWYgdGhlIEFycmF5IHdhcyBjb252ZXJ0ZWQgZnJvbSBhbiBPYmplY3RcbiAgICB2YXIgaXRlbSA9IGRhdGFbMF07XG4gICAgdmFyIGNvbnZlcnRlZEZyb21PYmplY3QgPSB0aGlzLmZyb21PYmplY3QgPSBpc09iamVjdChpdGVtKSAmJiBoYXNPd24oaXRlbSwgJyRrZXknKSAmJiBoYXNPd24oaXRlbSwgJyR2YWx1ZScpO1xuXG4gICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuICAgIHZhciBvbGRGcmFncyA9IHRoaXMuZnJhZ3M7XG4gICAgdmFyIGZyYWdzID0gdGhpcy5mcmFncyA9IG5ldyBBcnJheShkYXRhLmxlbmd0aCk7XG4gICAgdmFyIGFsaWFzID0gdGhpcy5hbGlhcztcbiAgICB2YXIgaXRlcmF0b3IgPSB0aGlzLml0ZXJhdG9yO1xuICAgIHZhciBzdGFydCA9IHRoaXMuc3RhcnQ7XG4gICAgdmFyIGVuZCA9IHRoaXMuZW5kO1xuICAgIHZhciBpbkRvY3VtZW50ID0gaW5Eb2Moc3RhcnQpO1xuICAgIHZhciBpbml0ID0gIW9sZEZyYWdzO1xuICAgIHZhciBpLCBsLCBmcmFnLCBrZXksIHZhbHVlLCBwcmltaXRpdmU7XG5cbiAgICAvLyBGaXJzdCBwYXNzLCBnbyB0aHJvdWdoIHRoZSBuZXcgQXJyYXkgYW5kIGZpbGwgdXBcbiAgICAvLyB0aGUgbmV3IGZyYWdzIGFycmF5LiBJZiBhIHBpZWNlIG9mIGRhdGEgaGFzIGEgY2FjaGVkXG4gICAgLy8gaW5zdGFuY2UgZm9yIGl0LCB3ZSByZXVzZSBpdC4gT3RoZXJ3aXNlIGJ1aWxkIGEgbmV3XG4gICAgLy8gaW5zdGFuY2UuXG4gICAgZm9yIChpID0gMCwgbCA9IGRhdGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBpdGVtID0gZGF0YVtpXTtcbiAgICAgIGtleSA9IGNvbnZlcnRlZEZyb21PYmplY3QgPyBpdGVtLiRrZXkgOiBudWxsO1xuICAgICAgdmFsdWUgPSBjb252ZXJ0ZWRGcm9tT2JqZWN0ID8gaXRlbS4kdmFsdWUgOiBpdGVtO1xuICAgICAgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcbiAgICAgIGZyYWcgPSAhaW5pdCAmJiB0aGlzLmdldENhY2hlZEZyYWcodmFsdWUsIGksIGtleSk7XG4gICAgICBpZiAoZnJhZykge1xuICAgICAgICAvLyByZXVzYWJsZSBmcmFnbWVudFxuICAgICAgICBmcmFnLnJldXNlZCA9IHRydWU7XG4gICAgICAgIC8vIHVwZGF0ZSAkaW5kZXhcbiAgICAgICAgZnJhZy5zY29wZS4kaW5kZXggPSBpO1xuICAgICAgICAvLyB1cGRhdGUgJGtleVxuICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgZnJhZy5zY29wZS4ka2V5ID0ga2V5O1xuICAgICAgICB9XG4gICAgICAgIC8vIHVwZGF0ZSBpdGVyYXRvclxuICAgICAgICBpZiAoaXRlcmF0b3IpIHtcbiAgICAgICAgICBmcmFnLnNjb3BlW2l0ZXJhdG9yXSA9IGtleSAhPT0gbnVsbCA/IGtleSA6IGk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdXBkYXRlIGRhdGEgZm9yIHRyYWNrLWJ5LCBvYmplY3QgcmVwZWF0ICZcbiAgICAgICAgLy8gcHJpbWl0aXZlIHZhbHVlcy5cbiAgICAgICAgaWYgKHRyYWNrQnlLZXkgfHwgY29udmVydGVkRnJvbU9iamVjdCB8fCBwcmltaXRpdmUpIHtcbiAgICAgICAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmcmFnLnNjb3BlW2FsaWFzXSA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBuZXcgaXNudGFuY2VcbiAgICAgICAgZnJhZyA9IHRoaXMuY3JlYXRlKHZhbHVlLCBhbGlhcywgaSwga2V5KTtcbiAgICAgICAgZnJhZy5mcmVzaCA9ICFpbml0O1xuICAgICAgfVxuICAgICAgZnJhZ3NbaV0gPSBmcmFnO1xuICAgICAgaWYgKGluaXQpIHtcbiAgICAgICAgZnJhZy5iZWZvcmUoZW5kKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB3ZSdyZSBkb25lIGZvciB0aGUgaW5pdGlhbCByZW5kZXIuXG4gICAgaWYgKGluaXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTZWNvbmQgcGFzcywgZ28gdGhyb3VnaCB0aGUgb2xkIGZyYWdtZW50cyBhbmRcbiAgICAvLyBkZXN0cm95IHRob3NlIHdobyBhcmUgbm90IHJldXNlZCAoYW5kIHJlbW92ZSB0aGVtXG4gICAgLy8gZnJvbSBjYWNoZSlcbiAgICB2YXIgcmVtb3ZhbEluZGV4ID0gMDtcbiAgICB2YXIgdG90YWxSZW1vdmVkID0gb2xkRnJhZ3MubGVuZ3RoIC0gZnJhZ3MubGVuZ3RoO1xuICAgIC8vIHdoZW4gcmVtb3ZpbmcgYSBsYXJnZSBudW1iZXIgb2YgZnJhZ21lbnRzLCB3YXRjaGVyIHJlbW92YWxcbiAgICAvLyB0dXJucyBvdXQgdG8gYmUgYSBwZXJmIGJvdHRsZW5lY2ssIHNvIHdlIGJhdGNoIHRoZSB3YXRjaGVyXG4gICAgLy8gcmVtb3ZhbHMgaW50byBhIHNpbmdsZSBmaWx0ZXIgY2FsbCFcbiAgICB0aGlzLnZtLl92Rm9yUmVtb3ZpbmcgPSB0cnVlO1xuICAgIGZvciAoaSA9IDAsIGwgPSBvbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGZyYWcgPSBvbGRGcmFnc1tpXTtcbiAgICAgIGlmICghZnJhZy5yZXVzZWQpIHtcbiAgICAgICAgdGhpcy5kZWxldGVDYWNoZWRGcmFnKGZyYWcpO1xuICAgICAgICB0aGlzLnJlbW92ZShmcmFnLCByZW1vdmFsSW5kZXgrKywgdG90YWxSZW1vdmVkLCBpbkRvY3VtZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy52bS5fdkZvclJlbW92aW5nID0gZmFsc2U7XG4gICAgaWYgKHJlbW92YWxJbmRleCkge1xuICAgICAgdGhpcy52bS5fd2F0Y2hlcnMgPSB0aGlzLnZtLl93YXRjaGVycy5maWx0ZXIoZnVuY3Rpb24gKHcpIHtcbiAgICAgICAgcmV0dXJuIHcuYWN0aXZlO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gRmluYWwgcGFzcywgbW92ZS9pbnNlcnQgbmV3IGZyYWdtZW50cyBpbnRvIHRoZVxuICAgIC8vIHJpZ2h0IHBsYWNlLlxuICAgIHZhciB0YXJnZXRQcmV2LCBwcmV2RWwsIGN1cnJlbnRQcmV2O1xuICAgIHZhciBpbnNlcnRpb25JbmRleCA9IDA7XG4gICAgZm9yIChpID0gMCwgbCA9IGZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZnJhZyA9IGZyYWdzW2ldO1xuICAgICAgLy8gdGhpcyBpcyB0aGUgZnJhZyB0aGF0IHdlIHNob3VsZCBiZSBhZnRlclxuICAgICAgdGFyZ2V0UHJldiA9IGZyYWdzW2kgLSAxXTtcbiAgICAgIHByZXZFbCA9IHRhcmdldFByZXYgPyB0YXJnZXRQcmV2LnN0YWdnZXJDYiA/IHRhcmdldFByZXYuc3RhZ2dlckFuY2hvciA6IHRhcmdldFByZXYuZW5kIHx8IHRhcmdldFByZXYubm9kZSA6IHN0YXJ0O1xuICAgICAgaWYgKGZyYWcucmV1c2VkICYmICFmcmFnLnN0YWdnZXJDYikge1xuICAgICAgICBjdXJyZW50UHJldiA9IGZpbmRQcmV2RnJhZyhmcmFnLCBzdGFydCwgdGhpcy5pZCk7XG4gICAgICAgIGlmIChjdXJyZW50UHJldiAhPT0gdGFyZ2V0UHJldiAmJiAoIWN1cnJlbnRQcmV2IHx8XG4gICAgICAgIC8vIG9wdGltaXphdGlvbiBmb3IgbW92aW5nIGEgc2luZ2xlIGl0ZW0uXG4gICAgICAgIC8vIHRoYW5rcyB0byBzdWdnZXN0aW9ucyBieSBAbGl2b3JhcyBpbiAjMTgwN1xuICAgICAgICBmaW5kUHJldkZyYWcoY3VycmVudFByZXYsIHN0YXJ0LCB0aGlzLmlkKSAhPT0gdGFyZ2V0UHJldikpIHtcbiAgICAgICAgICB0aGlzLm1vdmUoZnJhZywgcHJldkVsKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbmV3IGluc3RhbmNlLCBvciBzdGlsbCBpbiBzdGFnZ2VyLlxuICAgICAgICAvLyBpbnNlcnQgd2l0aCB1cGRhdGVkIHN0YWdnZXIgaW5kZXguXG4gICAgICAgIHRoaXMuaW5zZXJ0KGZyYWcsIGluc2VydGlvbkluZGV4KyssIHByZXZFbCwgaW5Eb2N1bWVudCk7XG4gICAgICB9XG4gICAgICBmcmFnLnJldXNlZCA9IGZyYWcuZnJlc2ggPSBmYWxzZTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBmcmFnbWVudCBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWxpYXNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cbiAgICovXG5cbiAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUodmFsdWUsIGFsaWFzLCBpbmRleCwga2V5KSB7XG4gICAgdmFyIGhvc3QgPSB0aGlzLl9ob3N0O1xuICAgIC8vIGNyZWF0ZSBpdGVyYXRpb24gc2NvcGVcbiAgICB2YXIgcGFyZW50U2NvcGUgPSB0aGlzLl9zY29wZSB8fCB0aGlzLnZtO1xuICAgIHZhciBzY29wZSA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUpO1xuICAgIC8vIHJlZiBob2xkZXIgZm9yIHRoZSBzY29wZVxuICAgIHNjb3BlLiRyZWZzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZS4kcmVmcyk7XG4gICAgc2NvcGUuJGVscyA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUuJGVscyk7XG4gICAgLy8gbWFrZSBzdXJlIHBvaW50ICRwYXJlbnQgdG8gcGFyZW50IHNjb3BlXG4gICAgc2NvcGUuJHBhcmVudCA9IHBhcmVudFNjb3BlO1xuICAgIC8vIGZvciB0d28td2F5IGJpbmRpbmcgb24gYWxpYXNcbiAgICBzY29wZS4kZm9yQ29udGV4dCA9IHRoaXM7XG4gICAgLy8gZGVmaW5lIHNjb3BlIHByb3BlcnRpZXNcbiAgICAvLyBpbXBvcnRhbnQ6IGRlZmluZSB0aGUgc2NvcGUgYWxpYXMgd2l0aG91dCBmb3JjZWQgY29udmVyc2lvblxuICAgIC8vIHNvIHRoYXQgZnJvemVuIGRhdGEgc3RydWN0dXJlcyByZW1haW4gbm9uLXJlYWN0aXZlLlxuICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCBhbGlhcywgdmFsdWUpO1xuICAgIH0pO1xuICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCAnJGluZGV4JywgaW5kZXgpO1xuICAgIGlmIChrZXkpIHtcbiAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCAnJGtleScsIGtleSk7XG4gICAgfSBlbHNlIGlmIChzY29wZS4ka2V5KSB7XG4gICAgICAvLyBhdm9pZCBhY2NpZGVudGFsIGZhbGxiYWNrXG4gICAgICBkZWYoc2NvcGUsICcka2V5JywgbnVsbCk7XG4gICAgfVxuICAgIGlmICh0aGlzLml0ZXJhdG9yKSB7XG4gICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgdGhpcy5pdGVyYXRvciwga2V5ICE9PSBudWxsID8ga2V5IDogaW5kZXgpO1xuICAgIH1cbiAgICB2YXIgZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUoaG9zdCwgc2NvcGUsIHRoaXMuX2ZyYWcpO1xuICAgIGZyYWcuZm9ySWQgPSB0aGlzLmlkO1xuICAgIHRoaXMuY2FjaGVGcmFnKHZhbHVlLCBmcmFnLCBpbmRleCwga2V5KTtcbiAgICByZXR1cm4gZnJhZztcbiAgfSxcblxuICAvKipcbiAgICogVXBkYXRlIHRoZSB2LXJlZiBvbiBvd25lciB2bS5cbiAgICovXG5cbiAgdXBkYXRlUmVmOiBmdW5jdGlvbiB1cGRhdGVSZWYoKSB7XG4gICAgdmFyIHJlZiA9IHRoaXMuZGVzY3JpcHRvci5yZWY7XG4gICAgaWYgKCFyZWYpIHJldHVybjtcbiAgICB2YXIgaGFzaCA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kcmVmcztcbiAgICB2YXIgcmVmcztcbiAgICBpZiAoIXRoaXMuZnJvbU9iamVjdCkge1xuICAgICAgcmVmcyA9IHRoaXMuZnJhZ3MubWFwKGZpbmRWbUZyb21GcmFnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVmcyA9IHt9O1xuICAgICAgdGhpcy5mcmFncy5mb3JFYWNoKGZ1bmN0aW9uIChmcmFnKSB7XG4gICAgICAgIHJlZnNbZnJhZy5zY29wZS4ka2V5XSA9IGZpbmRWbUZyb21GcmFnKGZyYWcpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGhhc2hbcmVmXSA9IHJlZnM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZvciBvcHRpb24gbGlzdHMsIHVwZGF0ZSB0aGUgY29udGFpbmluZyB2LW1vZGVsIG9uXG4gICAqIHBhcmVudCA8c2VsZWN0Pi5cbiAgICovXG5cbiAgdXBkYXRlTW9kZWw6IGZ1bmN0aW9uIHVwZGF0ZU1vZGVsKCkge1xuICAgIGlmICh0aGlzLmlzT3B0aW9uKSB7XG4gICAgICB2YXIgcGFyZW50ID0gdGhpcy5zdGFydC5wYXJlbnROb2RlO1xuICAgICAgdmFyIG1vZGVsID0gcGFyZW50ICYmIHBhcmVudC5fX3ZfbW9kZWw7XG4gICAgICBpZiAobW9kZWwpIHtcbiAgICAgICAgbW9kZWwuZm9yY2VVcGRhdGUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEluc2VydCBhIGZyYWdtZW50LiBIYW5kbGVzIHN0YWdnZXJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7Tm9kZX0gcHJldkVsXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5Eb2N1bWVudFxuICAgKi9cblxuICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydChmcmFnLCBpbmRleCwgcHJldkVsLCBpbkRvY3VtZW50KSB7XG4gICAgaWYgKGZyYWcuc3RhZ2dlckNiKSB7XG4gICAgICBmcmFnLnN0YWdnZXJDYi5jYW5jZWwoKTtcbiAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcbiAgICB9XG4gICAgdmFyIHN0YWdnZXJBbW91bnQgPSB0aGlzLmdldFN0YWdnZXIoZnJhZywgaW5kZXgsIG51bGwsICdlbnRlcicpO1xuICAgIGlmIChpbkRvY3VtZW50ICYmIHN0YWdnZXJBbW91bnQpIHtcbiAgICAgIC8vIGNyZWF0ZSBhbiBhbmNob3IgYW5kIGluc2VydCBpdCBzeW5jaHJvbm91c2x5LFxuICAgICAgLy8gc28gdGhhdCB3ZSBjYW4gcmVzb2x2ZSB0aGUgY29ycmVjdCBvcmRlciB3aXRob3V0XG4gICAgICAvLyB3b3JyeWluZyBhYm91dCBzb21lIGVsZW1lbnRzIG5vdCBpbnNlcnRlZCB5ZXRcbiAgICAgIHZhciBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3I7XG4gICAgICBpZiAoIWFuY2hvcikge1xuICAgICAgICBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3IgPSBjcmVhdGVBbmNob3IoJ3N0YWdnZXItYW5jaG9yJyk7XG4gICAgICAgIGFuY2hvci5fX3ZfZnJhZyA9IGZyYWc7XG4gICAgICB9XG4gICAgICBhZnRlcihhbmNob3IsIHByZXZFbCk7XG4gICAgICB2YXIgb3AgPSBmcmFnLnN0YWdnZXJDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuICAgICAgICBmcmFnLmJlZm9yZShhbmNob3IpO1xuICAgICAgICByZW1vdmUoYW5jaG9yKTtcbiAgICAgIH0pO1xuICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB0YXJnZXQgPSBwcmV2RWwubmV4dFNpYmxpbmc7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgIC8vIHJlc2V0IGVuZCBhbmNob3IgcG9zaXRpb24gaW4gY2FzZSB0aGUgcG9zaXRpb24gd2FzIG1lc3NlZCB1cFxuICAgICAgICAvLyBieSBhbiBleHRlcm5hbCBkcmFnLW4tZHJvcCBsaWJyYXJ5LlxuICAgICAgICBhZnRlcih0aGlzLmVuZCwgcHJldkVsKTtcbiAgICAgICAgdGFyZ2V0ID0gdGhpcy5lbmQ7XG4gICAgICB9XG4gICAgICBmcmFnLmJlZm9yZSh0YXJnZXQpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlIGEgZnJhZ21lbnQuIEhhbmRsZXMgc3RhZ2dlcmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5Eb2N1bWVudFxuICAgKi9cblxuICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShmcmFnLCBpbmRleCwgdG90YWwsIGluRG9jdW1lbnQpIHtcbiAgICBpZiAoZnJhZy5zdGFnZ2VyQ2IpIHtcbiAgICAgIGZyYWcuc3RhZ2dlckNiLmNhbmNlbCgpO1xuICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuICAgICAgLy8gaXQncyBub3QgcG9zc2libGUgZm9yIHRoZSBzYW1lIGZyYWcgdG8gYmUgcmVtb3ZlZFxuICAgICAgLy8gdHdpY2UsIHNvIGlmIHdlIGhhdmUgYSBwZW5kaW5nIHN0YWdnZXIgY2FsbGJhY2ssXG4gICAgICAvLyBpdCBtZWFucyB0aGlzIGZyYWcgaXMgcXVldWVkIGZvciBlbnRlciBidXQgcmVtb3ZlZFxuICAgICAgLy8gYmVmb3JlIGl0cyB0cmFuc2l0aW9uIHN0YXJ0ZWQuIFNpbmNlIGl0IGlzIGFscmVhZHlcbiAgICAgIC8vIGRlc3Ryb3llZCwgd2UgY2FuIGp1c3QgbGVhdmUgaXQgaW4gZGV0YWNoZWQgc3RhdGUuXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBzdGFnZ2VyQW1vdW50ID0gdGhpcy5nZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCB0b3RhbCwgJ2xlYXZlJyk7XG4gICAgaWYgKGluRG9jdW1lbnQgJiYgc3RhZ2dlckFtb3VudCkge1xuICAgICAgdmFyIG9wID0gZnJhZy5zdGFnZ2VyQ2IgPSBjYW5jZWxsYWJsZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcbiAgICAgICAgZnJhZy5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZyYWcucmVtb3ZlKCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBNb3ZlIGEgZnJhZ21lbnQgdG8gYSBuZXcgcG9zaXRpb24uXG4gICAqIEZvcmNlIG5vIHRyYW5zaXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOb2RlfSBwcmV2RWxcbiAgICovXG5cbiAgbW92ZTogZnVuY3Rpb24gbW92ZShmcmFnLCBwcmV2RWwpIHtcbiAgICAvLyBmaXggYSBjb21tb24gaXNzdWUgd2l0aCBTb3J0YWJsZTpcbiAgICAvLyBpZiBwcmV2RWwgZG9lc24ndCBoYXZlIG5leHRTaWJsaW5nLCB0aGlzIG1lYW5zIGl0J3NcbiAgICAvLyBiZWVuIGRyYWdnZWQgYWZ0ZXIgdGhlIGVuZCBhbmNob3IuIEp1c3QgcmUtcG9zaXRpb25cbiAgICAvLyB0aGUgZW5kIGFuY2hvciB0byB0aGUgZW5kIG9mIHRoZSBjb250YWluZXIuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFwcmV2RWwubmV4dFNpYmxpbmcpIHtcbiAgICAgIHRoaXMuZW5kLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xuICAgIH1cbiAgICBmcmFnLmJlZm9yZShwcmV2RWwubmV4dFNpYmxpbmcsIGZhbHNlKTtcbiAgfSxcblxuICAvKipcbiAgICogQ2FjaGUgYSBmcmFnbWVudCB1c2luZyB0cmFjay1ieSBvciB0aGUgb2JqZWN0IGtleS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge1N0cmluZ30gW2tleV1cbiAgICovXG5cbiAgY2FjaGVGcmFnOiBmdW5jdGlvbiBjYWNoZUZyYWcodmFsdWUsIGZyYWcsIGluZGV4LCBrZXkpIHtcbiAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG4gICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZTtcbiAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcbiAgICB2YXIgaWQ7XG4gICAgaWYgKGtleSB8fCB0cmFja0J5S2V5IHx8IHByaW1pdGl2ZSkge1xuICAgICAgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcbiAgICAgIGlmICghY2FjaGVbaWRdKSB7XG4gICAgICAgIGNhY2hlW2lkXSA9IGZyYWc7XG4gICAgICB9IGVsc2UgaWYgKHRyYWNrQnlLZXkgIT09ICckaW5kZXgnKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWQgPSB0aGlzLmlkO1xuICAgICAgaWYgKGhhc093bih2YWx1ZSwgaWQpKSB7XG4gICAgICAgIGlmICh2YWx1ZVtpZF0gPT09IG51bGwpIHtcbiAgICAgICAgICB2YWx1ZVtpZF0gPSBmcmFnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSkge1xuICAgICAgICBkZWYodmFsdWUsIGlkLCBmcmFnKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuKCdGcm96ZW4gdi1mb3Igb2JqZWN0cyBjYW5ub3QgYmUgYXV0b21hdGljYWxseSB0cmFja2VkLCBtYWtlIHN1cmUgdG8gJyArICdwcm92aWRlIGEgdHJhY2stYnkga2V5LicpO1xuICAgICAgfVxuICAgIH1cbiAgICBmcmFnLnJhdyA9IHZhbHVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgYSBjYWNoZWQgZnJhZ21lbnQgZnJvbSB0aGUgdmFsdWUvaW5kZXgva2V5XG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICogQHJldHVybiB7RnJhZ21lbnR9XG4gICAqL1xuXG4gIGdldENhY2hlZEZyYWc6IGZ1bmN0aW9uIGdldENhY2hlZEZyYWcodmFsdWUsIGluZGV4LCBrZXkpIHtcbiAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG4gICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG4gICAgdmFyIGZyYWc7XG4gICAgaWYgKGtleSB8fCB0cmFja0J5S2V5IHx8IHByaW1pdGl2ZSkge1xuICAgICAgdmFyIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG4gICAgICBmcmFnID0gdGhpcy5jYWNoZVtpZF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGZyYWcgPSB2YWx1ZVt0aGlzLmlkXTtcbiAgICB9XG4gICAgaWYgKGZyYWcgJiYgKGZyYWcucmV1c2VkIHx8IGZyYWcuZnJlc2gpKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBmcmFnO1xuICB9LFxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBmcmFnbWVudCBmcm9tIGNhY2hlLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqL1xuXG4gIGRlbGV0ZUNhY2hlZEZyYWc6IGZ1bmN0aW9uIGRlbGV0ZUNhY2hlZEZyYWcoZnJhZykge1xuICAgIHZhciB2YWx1ZSA9IGZyYWcucmF3O1xuICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcbiAgICB2YXIgc2NvcGUgPSBmcmFnLnNjb3BlO1xuICAgIHZhciBpbmRleCA9IHNjb3BlLiRpbmRleDtcbiAgICAvLyBmaXggIzk0ODogYXZvaWQgYWNjaWRlbnRhbGx5IGZhbGwgdGhyb3VnaCB0b1xuICAgIC8vIGEgcGFyZW50IHJlcGVhdGVyIHdoaWNoIGhhcHBlbnMgdG8gaGF2ZSAka2V5LlxuICAgIHZhciBrZXkgPSBoYXNPd24oc2NvcGUsICcka2V5JykgJiYgc2NvcGUuJGtleTtcbiAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcbiAgICBpZiAodHJhY2tCeUtleSB8fCBrZXkgfHwgcHJpbWl0aXZlKSB7XG4gICAgICB2YXIgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcbiAgICAgIHRoaXMuY2FjaGVbaWRdID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWVbdGhpcy5pZF0gPSBudWxsO1xuICAgICAgZnJhZy5yYXcgPSBudWxsO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBzdGFnZ2VyIGFtb3VudCBmb3IgYW4gaW5zZXJ0aW9uL3JlbW92YWwuXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7TnVtYmVyfSB0b3RhbFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICAgKi9cblxuICBnZXRTdGFnZ2VyOiBmdW5jdGlvbiBnZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCB0b3RhbCwgdHlwZSkge1xuICAgIHR5cGUgPSB0eXBlICsgJ1N0YWdnZXInO1xuICAgIHZhciB0cmFucyA9IGZyYWcubm9kZS5fX3ZfdHJhbnM7XG4gICAgdmFyIGhvb2tzID0gdHJhbnMgJiYgdHJhbnMuaG9va3M7XG4gICAgdmFyIGhvb2sgPSBob29rcyAmJiAoaG9va3NbdHlwZV0gfHwgaG9va3Muc3RhZ2dlcik7XG4gICAgcmV0dXJuIGhvb2sgPyBob29rLmNhbGwoZnJhZywgaW5kZXgsIHRvdGFsKSA6IGluZGV4ICogcGFyc2VJbnQodGhpcy5wYXJhbXNbdHlwZV0gfHwgdGhpcy5wYXJhbXMuc3RhZ2dlciwgMTApO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQcmUtcHJvY2VzcyB0aGUgdmFsdWUgYmVmb3JlIHBpcGluZyBpdCB0aHJvdWdoIHRoZVxuICAgKiBmaWx0ZXJzLiBUaGlzIGlzIHBhc3NlZCB0byBhbmQgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyLlxuICAgKi9cblxuICBfcHJlUHJvY2VzczogZnVuY3Rpb24gX3ByZVByb2Nlc3ModmFsdWUpIHtcbiAgICAvLyByZWdhcmRsZXNzIG9mIHR5cGUsIHN0b3JlIHRoZSB1bi1maWx0ZXJlZCByYXcgdmFsdWUuXG4gICAgdGhpcy5yYXdWYWx1ZSA9IHZhbHVlO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcblxuICAvKipcbiAgICogUG9zdC1wcm9jZXNzIHRoZSB2YWx1ZSBhZnRlciBpdCBoYXMgYmVlbiBwaXBlZCB0aHJvdWdoXG4gICAqIHRoZSBmaWx0ZXJzLiBUaGlzIGlzIHBhc3NlZCB0byBhbmQgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyLlxuICAgKlxuICAgKiBJdCBpcyBuZWNlc3NhcnkgZm9yIHRoaXMgdG8gYmUgY2FsbGVkIGR1cmluZyB0aGVcbiAgICogd2F0Y2hlcidzIGRlcGVuZGVuY3kgY29sbGVjdGlvbiBwaGFzZSBiZWNhdXNlIHdlIHdhbnRcbiAgICogdGhlIHYtZm9yIHRvIHVwZGF0ZSB3aGVuIHRoZSBzb3VyY2UgT2JqZWN0IGlzIG11dGF0ZWQuXG4gICAqL1xuXG4gIF9wb3N0UHJvY2VzczogZnVuY3Rpb24gX3Bvc3RQcm9jZXNzKHZhbHVlKSB7XG4gICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgICAgLy8gY29udmVydCBwbGFpbiBvYmplY3QgdG8gYXJyYXkuXG4gICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcbiAgICAgIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gICAgICB2YXIgcmVzID0gbmV3IEFycmF5KGkpO1xuICAgICAgdmFyIGtleTtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgcmVzW2ldID0ge1xuICAgICAgICAgICRrZXk6IGtleSxcbiAgICAgICAgICAkdmFsdWU6IHZhbHVlW2tleV1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmICFpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSByYW5nZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWUgfHwgW107XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIGlmICh0aGlzLmRlc2NyaXB0b3IucmVmKSB7XG4gICAgICAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHJlZnNbdGhpcy5kZXNjcmlwdG9yLnJlZl0gPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5mcmFncykge1xuICAgICAgdmFyIGkgPSB0aGlzLmZyYWdzLmxlbmd0aDtcbiAgICAgIHZhciBmcmFnO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBmcmFnID0gdGhpcy5mcmFnc1tpXTtcbiAgICAgICAgdGhpcy5kZWxldGVDYWNoZWRGcmFnKGZyYWcpO1xuICAgICAgICBmcmFnLmRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogSGVscGVyIHRvIGZpbmQgdGhlIHByZXZpb3VzIGVsZW1lbnQgdGhhdCBpcyBhIGZyYWdtZW50XG4gKiBhbmNob3IuIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYSBkZXN0cm95ZWQgZnJhZydzXG4gKiBlbGVtZW50IGNvdWxkIHN0aWxsIGJlIGxpbmdlcmluZyBpbiB0aGUgRE9NIGJlZm9yZSBpdHNcbiAqIGxlYXZpbmcgdHJhbnNpdGlvbiBmaW5pc2hlcywgYnV0IGl0cyBpbnNlcnRlZCBmbGFnXG4gKiBzaG91bGQgaGF2ZSBiZWVuIHNldCB0byBmYWxzZSBzbyB3ZSBjYW4gc2tpcCB0aGVtLlxuICpcbiAqIElmIHRoaXMgaXMgYSBibG9jayByZXBlYXQsIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHdlIG9ubHlcbiAqIHJldHVybiBmcmFnIHRoYXQgaXMgYm91bmQgdG8gdGhpcyB2LWZvci4gKHNlZSAjOTI5KVxuICpcbiAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAqIEBwYXJhbSB7Q29tbWVudHxUZXh0fSBhbmNob3JcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICogQHJldHVybiB7RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gZmluZFByZXZGcmFnKGZyYWcsIGFuY2hvciwgaWQpIHtcbiAgdmFyIGVsID0gZnJhZy5ub2RlLnByZXZpb3VzU2libGluZztcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICghZWwpIHJldHVybjtcbiAgZnJhZyA9IGVsLl9fdl9mcmFnO1xuICB3aGlsZSAoKCFmcmFnIHx8IGZyYWcuZm9ySWQgIT09IGlkIHx8ICFmcmFnLmluc2VydGVkKSAmJiBlbCAhPT0gYW5jaG9yKSB7XG4gICAgZWwgPSBlbC5wcmV2aW91c1NpYmxpbmc7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFlbCkgcmV0dXJuO1xuICAgIGZyYWcgPSBlbC5fX3ZfZnJhZztcbiAgfVxuICByZXR1cm4gZnJhZztcbn1cblxuLyoqXG4gKiBGaW5kIGEgdm0gZnJvbSBhIGZyYWdtZW50LlxuICpcbiAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAqIEByZXR1cm4ge1Z1ZXx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gZmluZFZtRnJvbUZyYWcoZnJhZykge1xuICB2YXIgbm9kZSA9IGZyYWcubm9kZTtcbiAgLy8gaGFuZGxlIG11bHRpLW5vZGUgZnJhZ1xuICBpZiAoZnJhZy5lbmQpIHtcbiAgICB3aGlsZSAoIW5vZGUuX192dWVfXyAmJiBub2RlICE9PSBmcmFnLmVuZCAmJiBub2RlLm5leHRTaWJsaW5nKSB7XG4gICAgICBub2RlID0gbm9kZS5uZXh0U2libGluZztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5vZGUuX192dWVfXztcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSByYW5nZSBhcnJheSBmcm9tIGdpdmVuIG51bWJlci5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gblxuICogQHJldHVybiB7QXJyYXl9XG4gKi9cblxuZnVuY3Rpb24gcmFuZ2Uobikge1xuICB2YXIgaSA9IC0xO1xuICB2YXIgcmV0ID0gbmV3IEFycmF5KE1hdGguZmxvb3IobikpO1xuICB3aGlsZSAoKytpIDwgbikge1xuICAgIHJldFtpXSA9IGk7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHRyYWNrIGJ5IGtleSBmb3IgYW4gaXRlbS5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7U3RyaW5nfSBbdHJhY2tCeUtleV1cbiAqL1xuXG5mdW5jdGlvbiBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KSB7XG4gIHJldHVybiB0cmFja0J5S2V5ID8gdHJhY2tCeUtleSA9PT0gJyRpbmRleCcgPyBpbmRleCA6IHRyYWNrQnlLZXkuY2hhckF0KDApLm1hdGNoKC9cXHcvKSA/IGdldFBhdGgodmFsdWUsIHRyYWNrQnlLZXkpIDogdmFsdWVbdHJhY2tCeUtleV0gOiBrZXkgfHwgdmFsdWU7XG59XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZGb3Iud2FybkR1cGxpY2F0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHdhcm4oJ0R1cGxpY2F0ZSB2YWx1ZSBmb3VuZCBpbiB2LWZvcj1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpICsgJy4gVXNlIHRyYWNrLWJ5PVwiJGluZGV4XCIgaWYgJyArICd5b3UgYXJlIGV4cGVjdGluZyBkdXBsaWNhdGUgdmFsdWVzLicsIHRoaXMudm0pO1xuICB9O1xufVxuXG52YXIgdklmID0ge1xuXG4gIHByaW9yaXR5OiBJRixcbiAgdGVybWluYWw6IHRydWUsXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIGlmICghZWwuX192dWVfXykge1xuICAgICAgLy8gY2hlY2sgZWxzZSBibG9ja1xuICAgICAgdmFyIG5leHQgPSBlbC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICBpZiAobmV4dCAmJiBnZXRBdHRyKG5leHQsICd2LWVsc2UnKSAhPT0gbnVsbCkge1xuICAgICAgICByZW1vdmUobmV4dCk7XG4gICAgICAgIHRoaXMuZWxzZUVsID0gbmV4dDtcbiAgICAgIH1cbiAgICAgIC8vIGNoZWNrIG1haW4gYmxvY2tcbiAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWlmJyk7XG4gICAgICByZXBsYWNlKGVsLCB0aGlzLmFuY2hvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1pZj1cIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgY2Fubm90IGJlICcgKyAndXNlZCBvbiBhbiBpbnN0YW5jZSByb290IGVsZW1lbnQuJywgdGhpcy52bSk7XG4gICAgICB0aGlzLmludmFsaWQgPSB0cnVlO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmludmFsaWQpIHJldHVybjtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGlmICghdGhpcy5mcmFnKSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0KCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlKCk7XG4gICAgfVxuICB9LFxuXG4gIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KCkge1xuICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XG4gICAgICB0aGlzLmVsc2VGcmFnLnJlbW92ZSgpO1xuICAgICAgdGhpcy5lbHNlRnJhZyA9IG51bGw7XG4gICAgfVxuICAgIC8vIGxhenkgaW5pdCBmYWN0b3J5XG4gICAgaWYgKCF0aGlzLmZhY3RvcnkpIHtcbiAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgdGhpcy5lbCk7XG4gICAgfVxuICAgIHRoaXMuZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUodGhpcy5faG9zdCwgdGhpcy5fc2NvcGUsIHRoaXMuX2ZyYWcpO1xuICAgIHRoaXMuZnJhZy5iZWZvcmUodGhpcy5hbmNob3IpO1xuICB9LFxuXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgIGlmICh0aGlzLmZyYWcpIHtcbiAgICAgIHRoaXMuZnJhZy5yZW1vdmUoKTtcbiAgICAgIHRoaXMuZnJhZyA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLmVsc2VFbCAmJiAhdGhpcy5lbHNlRnJhZykge1xuICAgICAgaWYgKCF0aGlzLmVsc2VGYWN0b3J5KSB7XG4gICAgICAgIHRoaXMuZWxzZUZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMuZWxzZUVsLl9jb250ZXh0IHx8IHRoaXMudm0sIHRoaXMuZWxzZUVsKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZWxzZUZyYWcgPSB0aGlzLmVsc2VGYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZyk7XG4gICAgICB0aGlzLmVsc2VGcmFnLmJlZm9yZSh0aGlzLmFuY2hvcik7XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIGlmICh0aGlzLmZyYWcpIHtcbiAgICAgIHRoaXMuZnJhZy5kZXN0cm95KCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XG4gICAgICB0aGlzLmVsc2VGcmFnLmRlc3Ryb3koKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBzaG93ID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gY2hlY2sgZWxzZSBibG9ja1xuICAgIHZhciBuZXh0ID0gdGhpcy5lbC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgaWYgKG5leHQgJiYgZ2V0QXR0cihuZXh0LCAndi1lbHNlJykgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuZWxzZUVsID0gbmV4dDtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB0aGlzLmFwcGx5KHRoaXMuZWwsIHZhbHVlKTtcbiAgICBpZiAodGhpcy5lbHNlRWwpIHtcbiAgICAgIHRoaXMuYXBwbHkodGhpcy5lbHNlRWwsICF2YWx1ZSk7XG4gICAgfVxuICB9LFxuXG4gIGFwcGx5OiBmdW5jdGlvbiBhcHBseShlbCwgdmFsdWUpIHtcbiAgICBpZiAoaW5Eb2MoZWwpKSB7XG4gICAgICBhcHBseVRyYW5zaXRpb24oZWwsIHZhbHVlID8gMSA6IC0xLCB0b2dnbGUsIHRoaXMudm0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b2dnbGUoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdG9nZ2xlKCkge1xuICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gJycgOiAnbm9uZSc7XG4gICAgfVxuICB9XG59O1xuXG52YXIgdGV4dCQyID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIGlzUmFuZ2UgPSBlbC50eXBlID09PSAncmFuZ2UnO1xuICAgIHZhciBsYXp5ID0gdGhpcy5wYXJhbXMubGF6eTtcbiAgICB2YXIgbnVtYmVyID0gdGhpcy5wYXJhbXMubnVtYmVyO1xuICAgIHZhciBkZWJvdW5jZSA9IHRoaXMucGFyYW1zLmRlYm91bmNlO1xuXG4gICAgLy8gaGFuZGxlIGNvbXBvc2l0aW9uIGV2ZW50cy5cbiAgICAvLyAgIGh0dHA6Ly9ibG9nLmV2YW55b3UubWUvMjAxNC8wMS8wMy9jb21wb3NpdGlvbi1ldmVudC9cbiAgICAvLyBza2lwIHRoaXMgZm9yIEFuZHJvaWQgYmVjYXVzZSBpdCBoYW5kbGVzIGNvbXBvc2l0aW9uXG4gICAgLy8gZXZlbnRzIHF1aXRlIGRpZmZlcmVudGx5LiBBbmRyb2lkIGRvZXNuJ3QgdHJpZ2dlclxuICAgIC8vIGNvbXBvc2l0aW9uIGV2ZW50cyBmb3IgbGFuZ3VhZ2UgaW5wdXQgbWV0aG9kcyBlLmcuXG4gICAgLy8gQ2hpbmVzZSwgYnV0IGluc3RlYWQgdHJpZ2dlcnMgdGhlbSBmb3Igc3BlbGxpbmdcbiAgICAvLyBzdWdnZXN0aW9ucy4uLiAoc2VlIERpc2N1c3Npb24vIzE2MilcbiAgICB2YXIgY29tcG9zaW5nID0gZmFsc2U7XG4gICAgaWYgKCFpc0FuZHJvaWQgJiYgIWlzUmFuZ2UpIHtcbiAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbXBvc2luZyA9IHRydWU7XG4gICAgICB9KTtcbiAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb21wb3NpbmcgPSBmYWxzZTtcbiAgICAgICAgLy8gaW4gSUUxMSB0aGUgXCJjb21wb3NpdGlvbmVuZFwiIGV2ZW50IGZpcmVzIEFGVEVSXG4gICAgICAgIC8vIHRoZSBcImlucHV0XCIgZXZlbnQsIHNvIHRoZSBpbnB1dCBoYW5kbGVyIGlzIGJsb2NrZWRcbiAgICAgICAgLy8gYXQgdGhlIGVuZC4uLiBoYXZlIHRvIGNhbGwgaXQgaGVyZS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gIzEzMjc6IGluIGxhenkgbW9kZSB0aGlzIGlzIHVuZWNlc3NhcnkuXG4gICAgICAgIGlmICghbGF6eSkge1xuICAgICAgICAgIHNlbGYubGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gcHJldmVudCBtZXNzaW5nIHdpdGggdGhlIGlucHV0IHdoZW4gdXNlciBpcyB0eXBpbmcsXG4gICAgLy8gYW5kIGZvcmNlIHVwZGF0ZSBvbiBibHVyLlxuICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlO1xuICAgIGlmICghaXNSYW5nZSAmJiAhbGF6eSkge1xuICAgICAgdGhpcy5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuZm9jdXNlZCA9IHRydWU7XG4gICAgICB9KTtcbiAgICAgIHRoaXMub24oJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuZm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAvLyBkbyBub3Qgc3luYyB2YWx1ZSBhZnRlciBmcmFnbWVudCByZW1vdmFsICgjMjAxNylcbiAgICAgICAgaWYgKCFzZWxmLl9mcmFnIHx8IHNlbGYuX2ZyYWcuaW5zZXJ0ZWQpIHtcbiAgICAgICAgICBzZWxmLnJhd0xpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE5vdyBhdHRhY2ggdGhlIG1haW4gbGlzdGVuZXJcbiAgICB0aGlzLmxpc3RlbmVyID0gdGhpcy5yYXdMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChjb21wb3NpbmcgfHwgIXNlbGYuX2JvdW5kKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciB2YWwgPSBudW1iZXIgfHwgaXNSYW5nZSA/IHRvTnVtYmVyKGVsLnZhbHVlKSA6IGVsLnZhbHVlO1xuICAgICAgc2VsZi5zZXQodmFsKTtcbiAgICAgIC8vIGZvcmNlIHVwZGF0ZSBvbiBuZXh0IHRpY2sgdG8gYXZvaWQgbG9jayAmIHNhbWUgdmFsdWVcbiAgICAgIC8vIGFsc28gb25seSB1cGRhdGUgd2hlbiB1c2VyIGlzIG5vdCB0eXBpbmdcbiAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlbGYuX2JvdW5kICYmICFzZWxmLmZvY3VzZWQpIHtcbiAgICAgICAgICBzZWxmLnVwZGF0ZShzZWxmLl93YXRjaGVyLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIGFwcGx5IGRlYm91bmNlXG4gICAgaWYgKGRlYm91bmNlKSB7XG4gICAgICB0aGlzLmxpc3RlbmVyID0gX2RlYm91bmNlKHRoaXMubGlzdGVuZXIsIGRlYm91bmNlKTtcbiAgICB9XG5cbiAgICAvLyBTdXBwb3J0IGpRdWVyeSBldmVudHMsIHNpbmNlIGpRdWVyeS50cmlnZ2VyKCkgZG9lc24ndFxuICAgIC8vIHRyaWdnZXIgbmF0aXZlIGV2ZW50cyBpbiBzb21lIGNhc2VzIGFuZCBzb21lIHBsdWdpbnNcbiAgICAvLyByZWx5IG9uICQudHJpZ2dlcigpXG4gICAgLy9cbiAgICAvLyBXZSB3YW50IHRvIG1ha2Ugc3VyZSBpZiBhIGxpc3RlbmVyIGlzIGF0dGFjaGVkIHVzaW5nXG4gICAgLy8galF1ZXJ5LCBpdCBpcyBhbHNvIHJlbW92ZWQgd2l0aCBqUXVlcnksIHRoYXQncyB3aHlcbiAgICAvLyB3ZSBkbyB0aGUgY2hlY2sgZm9yIGVhY2ggZGlyZWN0aXZlIGluc3RhbmNlIGFuZFxuICAgIC8vIHN0b3JlIHRoYXQgY2hlY2sgcmVzdWx0IG9uIGl0c2VsZi4gVGhpcyBhbHNvIGFsbG93c1xuICAgIC8vIGVhc2llciB0ZXN0IGNvdmVyYWdlIGNvbnRyb2wgYnkgdW5zZXR0aW5nIHRoZSBnbG9iYWxcbiAgICAvLyBqUXVlcnkgdmFyaWFibGUgaW4gdGVzdHMuXG4gICAgdGhpcy5oYXNqUXVlcnkgPSB0eXBlb2YgalF1ZXJ5ID09PSAnZnVuY3Rpb24nO1xuICAgIGlmICh0aGlzLmhhc2pRdWVyeSkge1xuICAgICAgdmFyIG1ldGhvZCA9IGpRdWVyeS5mbi5vbiA/ICdvbicgOiAnYmluZCc7XG4gICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2NoYW5nZScsIHRoaXMucmF3TGlzdGVuZXIpO1xuICAgICAgaWYgKCFsYXp5KSB7XG4gICAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5yYXdMaXN0ZW5lcik7XG4gICAgICBpZiAoIWxhenkpIHtcbiAgICAgICAgdGhpcy5vbignaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJRTkgZG9lc24ndCBmaXJlIGlucHV0IGV2ZW50IG9uIGJhY2tzcGFjZS9kZWwvY3V0XG4gICAgaWYgKCFsYXp5ICYmIGlzSUU5KSB7XG4gICAgICB0aGlzLm9uKCdjdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG5leHRUaWNrKHNlbGYubGlzdGVuZXIpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDQ2IHx8IGUua2V5Q29kZSA9PT0gOCkge1xuICAgICAgICAgIHNlbGYubGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gc2V0IGluaXRpYWwgdmFsdWUgaWYgcHJlc2VudFxuICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykgfHwgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyAmJiBlbC52YWx1ZS50cmltKCkpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICAvLyAjMzAyOSBvbmx5IHVwZGF0ZSB3aGVuIHRoZSB2YWx1ZSBjaGFuZ2VzLiBUaGlzIHByZXZlbnRcbiAgICAvLyBicm93c2VycyBmcm9tIG92ZXJ3cml0aW5nIHZhbHVlcyBsaWtlIHNlbGVjdGlvblN0YXJ0XG4gICAgdmFsdWUgPSBfdG9TdHJpbmcodmFsdWUpO1xuICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5lbC52YWx1ZSkgdGhpcy5lbC52YWx1ZSA9IHZhbHVlO1xuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgaWYgKHRoaXMuaGFzalF1ZXJ5KSB7XG4gICAgICB2YXIgbWV0aG9kID0galF1ZXJ5LmZuLm9mZiA/ICdvZmYnIDogJ3VuYmluZCc7XG4gICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHJhZGlvID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cbiAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gdmFsdWUgb3ZlcndyaXRlIHZpYSB2LWJpbmQ6dmFsdWVcbiAgICAgIGlmIChlbC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykpIHtcbiAgICAgICAgcmV0dXJuIGVsLl92YWx1ZTtcbiAgICAgIH1cbiAgICAgIHZhciB2YWwgPSBlbC52YWx1ZTtcbiAgICAgIGlmIChzZWxmLnBhcmFtcy5udW1iZXIpIHtcbiAgICAgICAgdmFsID0gdG9OdW1iZXIodmFsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfTtcblxuICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBzZWxmLnNldChzZWxmLmdldFZhbHVlKCkpO1xuICAgIH07XG4gICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cbiAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdjaGVja2VkJykpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB0aGlzLmVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCB0aGlzLmdldFZhbHVlKCkpO1xuICB9XG59O1xuXG52YXIgc2VsZWN0ID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXG4gICAgLy8gbWV0aG9kIHRvIGZvcmNlIHVwZGF0ZSBET00gdXNpbmcgbGF0ZXN0IHZhbHVlLlxuICAgIHRoaXMuZm9yY2VVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoc2VsZi5fd2F0Y2hlcikge1xuICAgICAgICBzZWxmLnVwZGF0ZShzZWxmLl93YXRjaGVyLmdldCgpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhIG11bHRpcGxlIHNlbGVjdFxuICAgIHZhciBtdWx0aXBsZSA9IHRoaXMubXVsdGlwbGUgPSBlbC5oYXNBdHRyaWJ1dGUoJ211bHRpcGxlJyk7XG5cbiAgICAvLyBhdHRhY2ggbGlzdGVuZXJcbiAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0VmFsdWUoZWwsIG11bHRpcGxlKTtcbiAgICAgIHZhbHVlID0gc2VsZi5wYXJhbXMubnVtYmVyID8gaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5tYXAodG9OdW1iZXIpIDogdG9OdW1iZXIodmFsdWUpIDogdmFsdWU7XG4gICAgICBzZWxmLnNldCh2YWx1ZSk7XG4gICAgfTtcbiAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblxuICAgIC8vIGlmIGhhcyBpbml0aWFsIHZhbHVlLCBzZXQgYWZ0ZXJCaW5kXG4gICAgdmFyIGluaXRWYWx1ZSA9IGdldFZhbHVlKGVsLCBtdWx0aXBsZSwgdHJ1ZSk7XG4gICAgaWYgKG11bHRpcGxlICYmIGluaXRWYWx1ZS5sZW5ndGggfHwgIW11bHRpcGxlICYmIGluaXRWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuICAgIH1cblxuICAgIC8vIEFsbCBtYWpvciBicm93c2VycyBleGNlcHQgRmlyZWZveCByZXNldHNcbiAgICAvLyBzZWxlY3RlZEluZGV4IHdpdGggdmFsdWUgLTEgdG8gMCB3aGVuIHRoZSBlbGVtZW50XG4gICAgLy8gaXMgYXBwZW5kZWQgdG8gYSBuZXcgcGFyZW50LCB0aGVyZWZvcmUgd2UgaGF2ZSB0b1xuICAgIC8vIGZvcmNlIGEgRE9NIHVwZGF0ZSB3aGVuZXZlciB0aGF0IGhhcHBlbnMuLi5cbiAgICB0aGlzLnZtLiRvbignaG9vazphdHRhY2hlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIG5leHRUaWNrKF90aGlzLmZvcmNlVXBkYXRlKTtcbiAgICB9KTtcbiAgICBpZiAoIWluRG9jKGVsKSkge1xuICAgICAgbmV4dFRpY2sodGhpcy5mb3JjZVVwZGF0ZSk7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICBlbC5zZWxlY3RlZEluZGV4ID0gLTE7XG4gICAgdmFyIG11bHRpID0gdGhpcy5tdWx0aXBsZSAmJiBpc0FycmF5KHZhbHVlKTtcbiAgICB2YXIgb3B0aW9ucyA9IGVsLm9wdGlvbnM7XG4gICAgdmFyIGkgPSBvcHRpb25zLmxlbmd0aDtcbiAgICB2YXIgb3AsIHZhbDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBvcCA9IG9wdGlvbnNbaV07XG4gICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBvcC5fdmFsdWUgOiBvcC52YWx1ZTtcbiAgICAgIC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuICAgICAgb3Auc2VsZWN0ZWQgPSBtdWx0aSA/IGluZGV4T2YkMSh2YWx1ZSwgdmFsKSA+IC0xIDogbG9vc2VFcXVhbCh2YWx1ZSwgdmFsKTtcbiAgICAgIC8qIGVzbGludC1lbmFibGUgZXFlcWVxICovXG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgdGhpcy52bS4kb2ZmKCdob29rOmF0dGFjaGVkJywgdGhpcy5mb3JjZVVwZGF0ZSk7XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IHNlbGVjdCB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7U2VsZWN0RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gbXVsdGlcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5pdFxuICogQHJldHVybiB7QXJyYXl8Kn1cbiAqL1xuXG5mdW5jdGlvbiBnZXRWYWx1ZShlbCwgbXVsdGksIGluaXQpIHtcbiAgdmFyIHJlcyA9IG11bHRpID8gW10gOiBudWxsO1xuICB2YXIgb3AsIHZhbCwgc2VsZWN0ZWQ7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gZWwub3B0aW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBvcCA9IGVsLm9wdGlvbnNbaV07XG4gICAgc2VsZWN0ZWQgPSBpbml0ID8gb3AuaGFzQXR0cmlidXRlKCdzZWxlY3RlZCcpIDogb3Auc2VsZWN0ZWQ7XG4gICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBvcC5fdmFsdWUgOiBvcC52YWx1ZTtcbiAgICAgIGlmIChtdWx0aSkge1xuICAgICAgICByZXMucHVzaCh2YWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBOYXRpdmUgQXJyYXkuaW5kZXhPZiB1c2VzIHN0cmljdCBlcXVhbCwgYnV0IGluIHRoaXNcbiAqIGNhc2Ugd2UgbmVlZCB0byBtYXRjaCBzdHJpbmcvbnVtYmVycyB3aXRoIGN1c3RvbSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuZnVuY3Rpb24gaW5kZXhPZiQxKGFyciwgdmFsKSB7XG4gIHZhciBpID0gYXJyLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIGlmIChsb29zZUVxdWFsKGFycltpXSwgdmFsKSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxudmFyIGNoZWNrYm94ID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cbiAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGVsLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IGVsLl92YWx1ZSA6IHNlbGYucGFyYW1zLm51bWJlciA/IHRvTnVtYmVyKGVsLnZhbHVlKSA6IGVsLnZhbHVlO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXRCb29sZWFuVmFsdWUoKSB7XG4gICAgICB2YXIgdmFsID0gZWwuY2hlY2tlZDtcbiAgICAgIGlmICh2YWwgJiYgZWwuaGFzT3duUHJvcGVydHkoJ190cnVlVmFsdWUnKSkge1xuICAgICAgICByZXR1cm4gZWwuX3RydWVWYWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmICghdmFsICYmIGVsLmhhc093blByb3BlcnR5KCdfZmFsc2VWYWx1ZScpKSB7XG4gICAgICAgIHJldHVybiBlbC5fZmFsc2VWYWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuXG4gICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBtb2RlbCA9IHNlbGYuX3dhdGNoZXIudmFsdWU7XG4gICAgICBpZiAoaXNBcnJheShtb2RlbCkpIHtcbiAgICAgICAgdmFyIHZhbCA9IHNlbGYuZ2V0VmFsdWUoKTtcbiAgICAgICAgaWYgKGVsLmNoZWNrZWQpIHtcbiAgICAgICAgICBpZiAoaW5kZXhPZihtb2RlbCwgdmFsKSA8IDApIHtcbiAgICAgICAgICAgIG1vZGVsLnB1c2godmFsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbW9kZWwuJHJlbW92ZSh2YWwpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLnNldChnZXRCb29sZWFuVmFsdWUoKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkge1xuICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICBlbC5jaGVja2VkID0gaW5kZXhPZih2YWx1ZSwgdGhpcy5nZXRWYWx1ZSgpKSA+IC0xO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZWwuaGFzT3duUHJvcGVydHkoJ190cnVlVmFsdWUnKSkge1xuICAgICAgICBlbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgZWwuX3RydWVWYWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5jaGVja2VkID0gISF2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbnZhciBoYW5kbGVycyA9IHtcbiAgdGV4dDogdGV4dCQyLFxuICByYWRpbzogcmFkaW8sXG4gIHNlbGVjdDogc2VsZWN0LFxuICBjaGVja2JveDogY2hlY2tib3hcbn07XG5cbnZhciBtb2RlbCA9IHtcblxuICBwcmlvcml0eTogTU9ERUwsXG4gIHR3b1dheTogdHJ1ZSxcbiAgaGFuZGxlcnM6IGhhbmRsZXJzLFxuICBwYXJhbXM6IFsnbGF6eScsICdudW1iZXInLCAnZGVib3VuY2UnXSxcblxuICAvKipcbiAgICogUG9zc2libGUgZWxlbWVudHM6XG4gICAqICAgPHNlbGVjdD5cbiAgICogICA8dGV4dGFyZWE+XG4gICAqICAgPGlucHV0IHR5cGU9XCIqXCI+XG4gICAqICAgICAtIHRleHRcbiAgICogICAgIC0gY2hlY2tib3hcbiAgICogICAgIC0gcmFkaW9cbiAgICogICAgIC0gbnVtYmVyXG4gICAqL1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gZnJpZW5kbHkgd2FybmluZy4uLlxuICAgIHRoaXMuY2hlY2tGaWx0ZXJzKCk7XG4gICAgaWYgKHRoaXMuaGFzUmVhZCAmJiAhdGhpcy5oYXNXcml0ZSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIGEgcmVhZC1vbmx5IGZpbHRlciB3aXRoICcgKyAndi1tb2RlbD1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiLiAnICsgJ1lvdSBtaWdodCB3YW50IHRvIHVzZSBhIHR3by13YXkgZmlsdGVyIHRvIGVuc3VyZSBjb3JyZWN0IGJlaGF2aW9yLicsIHRoaXMudm0pO1xuICAgIH1cbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciB0YWcgPSBlbC50YWdOYW1lO1xuICAgIHZhciBoYW5kbGVyO1xuICAgIGlmICh0YWcgPT09ICdJTlBVVCcpIHtcbiAgICAgIGhhbmRsZXIgPSBoYW5kbGVyc1tlbC50eXBlXSB8fCBoYW5kbGVycy50ZXh0O1xuICAgIH0gZWxzZSBpZiAodGFnID09PSAnU0VMRUNUJykge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXJzLnNlbGVjdDtcbiAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXJzLnRleHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1tb2RlbCBkb2VzIG5vdCBzdXBwb3J0IGVsZW1lbnQgdHlwZTogJyArIHRhZywgdGhpcy52bSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGVsLl9fdl9tb2RlbCA9IHRoaXM7XG4gICAgaGFuZGxlci5iaW5kLmNhbGwodGhpcyk7XG4gICAgdGhpcy51cGRhdGUgPSBoYW5kbGVyLnVwZGF0ZTtcbiAgICB0aGlzLl91bmJpbmQgPSBoYW5kbGVyLnVuYmluZDtcbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2sgcmVhZC93cml0ZSBmaWx0ZXIgc3RhdHMuXG4gICAqL1xuXG4gIGNoZWNrRmlsdGVyczogZnVuY3Rpb24gY2hlY2tGaWx0ZXJzKCkge1xuICAgIHZhciBmaWx0ZXJzID0gdGhpcy5maWx0ZXJzO1xuICAgIGlmICghZmlsdGVycykgcmV0dXJuO1xuICAgIHZhciBpID0gZmlsdGVycy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFyIGZpbHRlciA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlcnNbaV0ubmFtZSk7XG4gICAgICBpZiAodHlwZW9mIGZpbHRlciA9PT0gJ2Z1bmN0aW9uJyB8fCBmaWx0ZXIucmVhZCkge1xuICAgICAgICB0aGlzLmhhc1JlYWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKGZpbHRlci53cml0ZSkge1xuICAgICAgICB0aGlzLmhhc1dyaXRlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdGhpcy5lbC5fX3ZfbW9kZWwgPSBudWxsO1xuICAgIHRoaXMuX3VuYmluZCAmJiB0aGlzLl91bmJpbmQoKTtcbiAgfVxufTtcblxuLy8ga2V5Q29kZSBhbGlhc2VzXG52YXIga2V5Q29kZXMgPSB7XG4gIGVzYzogMjcsXG4gIHRhYjogOSxcbiAgZW50ZXI6IDEzLFxuICBzcGFjZTogMzIsXG4gICdkZWxldGUnOiBbOCwgNDZdLFxuICB1cDogMzgsXG4gIGxlZnQ6IDM3LFxuICByaWdodDogMzksXG4gIGRvd246IDQwXG59O1xuXG5mdW5jdGlvbiBrZXlGaWx0ZXIoaGFuZGxlciwga2V5cykge1xuICB2YXIgY29kZXMgPSBrZXlzLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIGNoYXJDb2RlID0ga2V5LmNoYXJDb2RlQXQoMCk7XG4gICAgaWYgKGNoYXJDb2RlID4gNDcgJiYgY2hhckNvZGUgPCA1OCkge1xuICAgICAgcmV0dXJuIHBhcnNlSW50KGtleSwgMTApO1xuICAgIH1cbiAgICBpZiAoa2V5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgY2hhckNvZGUgPSBrZXkudG9VcHBlckNhc2UoKS5jaGFyQ29kZUF0KDApO1xuICAgICAgaWYgKGNoYXJDb2RlID4gNjQgJiYgY2hhckNvZGUgPCA5MSkge1xuICAgICAgICByZXR1cm4gY2hhckNvZGU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBrZXlDb2Rlc1trZXldO1xuICB9KTtcbiAgY29kZXMgPSBbXS5jb25jYXQuYXBwbHkoW10sIGNvZGVzKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIGtleUhhbmRsZXIoZSkge1xuICAgIGlmIChjb2Rlcy5pbmRleE9mKGUua2V5Q29kZSkgPiAtMSkge1xuICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0b3BGaWx0ZXIoaGFuZGxlcikge1xuICByZXR1cm4gZnVuY3Rpb24gc3RvcEhhbmRsZXIoZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcHJldmVudEZpbHRlcihoYW5kbGVyKSB7XG4gIHJldHVybiBmdW5jdGlvbiBwcmV2ZW50SGFuZGxlcihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHNlbGZGaWx0ZXIoaGFuZGxlcikge1xuICByZXR1cm4gZnVuY3Rpb24gc2VsZkhhbmRsZXIoZSkge1xuICAgIGlmIChlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIG9uJDEgPSB7XG5cbiAgcHJpb3JpdHk6IE9OLFxuICBhY2NlcHRTdGF0ZW1lbnQ6IHRydWUsXG4gIGtleUNvZGVzOiBrZXlDb2RlcyxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIGRlYWwgd2l0aCBpZnJhbWVzXG4gICAgaWYgKHRoaXMuZWwudGFnTmFtZSA9PT0gJ0lGUkFNRScgJiYgdGhpcy5hcmcgIT09ICdsb2FkJykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdGhpcy5pZnJhbWVCaW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBvbihzZWxmLmVsLmNvbnRlbnRXaW5kb3csIHNlbGYuYXJnLCBzZWxmLmhhbmRsZXIsIHNlbGYubW9kaWZpZXJzLmNhcHR1cmUpO1xuICAgICAgfTtcbiAgICAgIHRoaXMub24oJ2xvYWQnLCB0aGlzLmlmcmFtZUJpbmQpO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShoYW5kbGVyKSB7XG4gICAgLy8gc3R1YiBhIG5vb3AgZm9yIHYtb24gd2l0aCBubyB2YWx1ZSxcbiAgICAvLyBlLmcuIEBtb3VzZWRvd24ucHJldmVudFxuICAgIGlmICghdGhpcy5kZXNjcmlwdG9yLnJhdykge1xuICAgICAgaGFuZGxlciA9IGZ1bmN0aW9uICgpIHt9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgaGFuZGxlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LW9uOicgKyB0aGlzLmFyZyArICc9XCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiIGV4cGVjdHMgYSBmdW5jdGlvbiB2YWx1ZSwgJyArICdnb3QgJyArIGhhbmRsZXIsIHRoaXMudm0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGFwcGx5IG1vZGlmaWVyc1xuICAgIGlmICh0aGlzLm1vZGlmaWVycy5zdG9wKSB7XG4gICAgICBoYW5kbGVyID0gc3RvcEZpbHRlcihoYW5kbGVyKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubW9kaWZpZXJzLnByZXZlbnQpIHtcbiAgICAgIGhhbmRsZXIgPSBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5tb2RpZmllcnMuc2VsZikge1xuICAgICAgaGFuZGxlciA9IHNlbGZGaWx0ZXIoaGFuZGxlcik7XG4gICAgfVxuICAgIC8vIGtleSBmaWx0ZXJcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMubW9kaWZpZXJzKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIGtleSAhPT0gJ3N0b3AnICYmIGtleSAhPT0gJ3ByZXZlbnQnICYmIGtleSAhPT0gJ3NlbGYnICYmIGtleSAhPT0gJ2NhcHR1cmUnO1xuICAgIH0pO1xuICAgIGlmIChrZXlzLmxlbmd0aCkge1xuICAgICAgaGFuZGxlciA9IGtleUZpbHRlcihoYW5kbGVyLCBrZXlzKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlc2V0KCk7XG4gICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlcjtcblxuICAgIGlmICh0aGlzLmlmcmFtZUJpbmQpIHtcbiAgICAgIHRoaXMuaWZyYW1lQmluZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvbih0aGlzLmVsLCB0aGlzLmFyZywgdGhpcy5oYW5kbGVyLCB0aGlzLm1vZGlmaWVycy5jYXB0dXJlKTtcbiAgICB9XG4gIH0sXG5cbiAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIHZhciBlbCA9IHRoaXMuaWZyYW1lQmluZCA/IHRoaXMuZWwuY29udGVudFdpbmRvdyA6IHRoaXMuZWw7XG4gICAgaWYgKHRoaXMuaGFuZGxlcikge1xuICAgICAgb2ZmKGVsLCB0aGlzLmFyZywgdGhpcy5oYW5kbGVyKTtcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdGhpcy5yZXNldCgpO1xuICB9XG59O1xuXG52YXIgcHJlZml4ZXMgPSBbJy13ZWJraXQtJywgJy1tb3otJywgJy1tcy0nXTtcbnZhciBjYW1lbFByZWZpeGVzID0gWydXZWJraXQnLCAnTW96JywgJ21zJ107XG52YXIgaW1wb3J0YW50UkUgPSAvIWltcG9ydGFudDs/JC87XG52YXIgcHJvcENhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxudmFyIHRlc3RFbCA9IG51bGw7XG5cbnZhciBzdHlsZSA9IHtcblxuICBkZWVwOiB0cnVlLFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuZWwuc3R5bGUuY3NzVGV4dCA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlLnJlZHVjZShleHRlbmQsIHt9KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlIHx8IHt9KTtcbiAgICB9XG4gIH0sXG5cbiAgaGFuZGxlT2JqZWN0OiBmdW5jdGlvbiBoYW5kbGVPYmplY3QodmFsdWUpIHtcbiAgICAvLyBjYWNoZSBvYmplY3Qgc3R5bGVzIHNvIHRoYXQgb25seSBjaGFuZ2VkIHByb3BzXG4gICAgLy8gYXJlIGFjdHVhbGx5IHVwZGF0ZWQuXG4gICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZSB8fCAodGhpcy5jYWNoZSA9IHt9KTtcbiAgICB2YXIgbmFtZSwgdmFsO1xuICAgIGZvciAobmFtZSBpbiBjYWNoZSkge1xuICAgICAgaWYgKCEobmFtZSBpbiB2YWx1ZSkpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVTaW5nbGUobmFtZSwgbnVsbCk7XG4gICAgICAgIGRlbGV0ZSBjYWNoZVtuYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChuYW1lIGluIHZhbHVlKSB7XG4gICAgICB2YWwgPSB2YWx1ZVtuYW1lXTtcbiAgICAgIGlmICh2YWwgIT09IGNhY2hlW25hbWVdKSB7XG4gICAgICAgIGNhY2hlW25hbWVdID0gdmFsO1xuICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShuYW1lLCB2YWwpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBoYW5kbGVTaW5nbGU6IGZ1bmN0aW9uIGhhbmRsZVNpbmdsZShwcm9wLCB2YWx1ZSkge1xuICAgIHByb3AgPSBub3JtYWxpemUocHJvcCk7XG4gICAgaWYgKCFwcm9wKSByZXR1cm47IC8vIHVuc3VwcG9ydGVkIHByb3BcbiAgICAvLyBjYXN0IHBvc3NpYmxlIG51bWJlcnMvYm9vbGVhbnMgaW50byBzdHJpbmdzXG4gICAgaWYgKHZhbHVlICE9IG51bGwpIHZhbHVlICs9ICcnO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdmFyIGlzSW1wb3J0YW50ID0gaW1wb3J0YW50UkUudGVzdCh2YWx1ZSkgPyAnaW1wb3J0YW50JyA6ICcnO1xuICAgICAgaWYgKGlzSW1wb3J0YW50KSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIHdhcm4oJ0l0XFwncyBwcm9iYWJseSBhIGJhZCBpZGVhIHRvIHVzZSAhaW1wb3J0YW50IHdpdGggaW5saW5lIHJ1bGVzLiAnICsgJ1RoaXMgZmVhdHVyZSB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiBvZiBWdWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKGltcG9ydGFudFJFLCAnJykudHJpbSgpO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KHByb3Aua2ViYWIsIHZhbHVlLCBpc0ltcG9ydGFudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVsLnN0eWxlW3Byb3AuY2FtZWxdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWwuc3R5bGVbcHJvcC5jYW1lbF0gPSAnJztcbiAgICB9XG4gIH1cblxufTtcblxuLyoqXG4gKiBOb3JtYWxpemUgYSBDU1MgcHJvcGVydHkgbmFtZS5cbiAqIC0gY2FjaGUgcmVzdWx0XG4gKiAtIGF1dG8gcHJlZml4XG4gKiAtIGNhbWVsQ2FzZSAtPiBkYXNoLWNhc2VcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZShwcm9wKSB7XG4gIGlmIChwcm9wQ2FjaGVbcHJvcF0pIHtcbiAgICByZXR1cm4gcHJvcENhY2hlW3Byb3BdO1xuICB9XG4gIHZhciByZXMgPSBwcmVmaXgocHJvcCk7XG4gIHByb3BDYWNoZVtwcm9wXSA9IHByb3BDYWNoZVtyZXNdID0gcmVzO1xuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEF1dG8gZGV0ZWN0IHRoZSBhcHByb3ByaWF0ZSBwcmVmaXggZm9yIGEgQ1NTIHByb3BlcnR5LlxuICogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vcGF1bGlyaXNoLzUyMzY5MlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gcHJlZml4KHByb3ApIHtcbiAgcHJvcCA9IGh5cGhlbmF0ZShwcm9wKTtcbiAgdmFyIGNhbWVsID0gY2FtZWxpemUocHJvcCk7XG4gIHZhciB1cHBlciA9IGNhbWVsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWwuc2xpY2UoMSk7XG4gIGlmICghdGVzdEVsKSB7XG4gICAgdGVzdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIH1cbiAgdmFyIGkgPSBwcmVmaXhlcy5sZW5ndGg7XG4gIHZhciBwcmVmaXhlZDtcbiAgaWYgKGNhbWVsICE9PSAnZmlsdGVyJyAmJiBjYW1lbCBpbiB0ZXN0RWwuc3R5bGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAga2ViYWI6IHByb3AsXG4gICAgICBjYW1lbDogY2FtZWxcbiAgICB9O1xuICB9XG4gIHdoaWxlIChpLS0pIHtcbiAgICBwcmVmaXhlZCA9IGNhbWVsUHJlZml4ZXNbaV0gKyB1cHBlcjtcbiAgICBpZiAocHJlZml4ZWQgaW4gdGVzdEVsLnN0eWxlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBrZWJhYjogcHJlZml4ZXNbaV0gKyBwcm9wLFxuICAgICAgICBjYW1lbDogcHJlZml4ZWRcbiAgICAgIH07XG4gICAgfVxuICB9XG59XG5cbi8vIHhsaW5rXG52YXIgeGxpbmtOUyA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJztcbnZhciB4bGlua1JFID0gL154bGluazovO1xuXG4vLyBjaGVjayBmb3IgYXR0cmlidXRlcyB0aGF0IHByb2hpYml0IGludGVycG9sYXRpb25zXG52YXIgZGlzYWxsb3dlZEludGVycEF0dHJSRSA9IC9edi18Xjp8XkB8Xig/OmlzfHRyYW5zaXRpb258dHJhbnNpdGlvbi1tb2RlfGRlYm91bmNlfHRyYWNrLWJ5fHN0YWdnZXJ8ZW50ZXItc3RhZ2dlcnxsZWF2ZS1zdGFnZ2VyKSQvO1xuLy8gdGhlc2UgYXR0cmlidXRlcyBzaG91bGQgYWxzbyBzZXQgdGhlaXIgY29ycmVzcG9uZGluZyBwcm9wZXJ0aWVzXG4vLyBiZWNhdXNlIHRoZXkgb25seSBhZmZlY3QgdGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIGVsZW1lbnRcbnZhciBhdHRyV2l0aFByb3BzUkUgPSAvXig/OnZhbHVlfGNoZWNrZWR8c2VsZWN0ZWR8bXV0ZWQpJC87XG4vLyB0aGVzZSBhdHRyaWJ1dGVzIGV4cGVjdCBlbnVtcmF0ZWQgdmFsdWVzIG9mIFwidHJ1ZVwiIG9yIFwiZmFsc2VcIlxuLy8gYnV0IGFyZSBub3QgYm9vbGVhbiBhdHRyaWJ1dGVzXG52YXIgZW51bWVyYXRlZEF0dHJSRSA9IC9eKD86ZHJhZ2dhYmxlfGNvbnRlbnRlZGl0YWJsZXxzcGVsbGNoZWNrKSQvO1xuXG4vLyB0aGVzZSBhdHRyaWJ1dGVzIHNob3VsZCBzZXQgYSBoaWRkZW4gcHJvcGVydHkgZm9yXG4vLyBiaW5kaW5nIHYtbW9kZWwgdG8gb2JqZWN0IHZhbHVlc1xudmFyIG1vZGVsUHJvcHMgPSB7XG4gIHZhbHVlOiAnX3ZhbHVlJyxcbiAgJ3RydWUtdmFsdWUnOiAnX3RydWVWYWx1ZScsXG4gICdmYWxzZS12YWx1ZSc6ICdfZmFsc2VWYWx1ZSdcbn07XG5cbnZhciBiaW5kJDEgPSB7XG5cbiAgcHJpb3JpdHk6IEJJTkQsXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgYXR0ciA9IHRoaXMuYXJnO1xuICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWU7XG4gICAgLy8gc2hvdWxkIGJlIGRlZXAgd2F0Y2ggb24gb2JqZWN0IG1vZGVcbiAgICBpZiAoIWF0dHIpIHtcbiAgICAgIHRoaXMuZGVlcCA9IHRydWU7XG4gICAgfVxuICAgIC8vIGhhbmRsZSBpbnRlcnBvbGF0aW9uIGJpbmRpbmdzXG4gICAgdmFyIGRlc2NyaXB0b3IgPSB0aGlzLmRlc2NyaXB0b3I7XG4gICAgdmFyIHRva2VucyA9IGRlc2NyaXB0b3IuaW50ZXJwO1xuICAgIGlmICh0b2tlbnMpIHtcbiAgICAgIC8vIGhhbmRsZSBpbnRlcnBvbGF0aW9ucyB3aXRoIG9uZS10aW1lIHRva2Vuc1xuICAgICAgaWYgKGRlc2NyaXB0b3IuaGFzT25lVGltZSkge1xuICAgICAgICB0aGlzLmV4cHJlc3Npb24gPSB0b2tlbnNUb0V4cCh0b2tlbnMsIHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pO1xuICAgICAgfVxuXG4gICAgICAvLyBvbmx5IGFsbG93IGJpbmRpbmcgb24gbmF0aXZlIGF0dHJpYnV0ZXNcbiAgICAgIGlmIChkaXNhbGxvd2VkSW50ZXJwQXR0clJFLnRlc3QoYXR0cikgfHwgYXR0ciA9PT0gJ25hbWUnICYmICh0YWcgPT09ICdQQVJUSUFMJyB8fCB0YWcgPT09ICdTTE9UJykpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKGF0dHIgKyAnPVwiJyArIGRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2F0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uIGlzIG5vdCBhbGxvd2VkIGluIFZ1ZS5qcyAnICsgJ2RpcmVjdGl2ZXMgYW5kIHNwZWNpYWwgYXR0cmlidXRlcy4nLCB0aGlzLnZtKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgICAgIHRoaXMuaW52YWxpZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgdmFyIHJhdyA9IGF0dHIgKyAnPVwiJyArIGRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnO1xuICAgICAgICAvLyB3YXJuIHNyY1xuICAgICAgICBpZiAoYXR0ciA9PT0gJ3NyYycpIHtcbiAgICAgICAgICB3YXJuKHJhdyArICdpbnRlcnBvbGF0aW9uIGluIFwic3JjXCIgYXR0cmlidXRlIHdpbGwgY2F1c2UgJyArICdhIDQwNCByZXF1ZXN0LiBVc2Ugdi1iaW5kOnNyYyBpbnN0ZWFkLicsIHRoaXMudm0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2FybiBzdHlsZVxuICAgICAgICBpZiAoYXR0ciA9PT0gJ3N0eWxlJykge1xuICAgICAgICAgIHdhcm4ocmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzdHlsZVwiIGF0dHJpYnV0ZSB3aWxsIGNhdXNlICcgKyAndGhlIGF0dHJpYnV0ZSB0byBiZSBkaXNjYXJkZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIuICcgKyAnVXNlIHYtYmluZDpzdHlsZSBpbnN0ZWFkLicsIHRoaXMudm0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuaW52YWxpZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgYXR0ciA9IHRoaXMuYXJnO1xuICAgIGlmICh0aGlzLmFyZykge1xuICAgICAgdGhpcy5oYW5kbGVTaW5nbGUoYXR0ciwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZSB8fCB7fSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIHNoYXJlIG9iamVjdCBoYW5kbGVyIHdpdGggdi1iaW5kOmNsYXNzXG4gIGhhbmRsZU9iamVjdDogc3R5bGUuaGFuZGxlT2JqZWN0LFxuXG4gIGhhbmRsZVNpbmdsZTogZnVuY3Rpb24gaGFuZGxlU2luZ2xlKGF0dHIsIHZhbHVlKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgaW50ZXJwID0gdGhpcy5kZXNjcmlwdG9yLmludGVycDtcbiAgICBpZiAodGhpcy5tb2RpZmllcnMuY2FtZWwpIHtcbiAgICAgIGF0dHIgPSBjYW1lbGl6ZShhdHRyKTtcbiAgICB9XG4gICAgaWYgKCFpbnRlcnAgJiYgYXR0cldpdGhQcm9wc1JFLnRlc3QoYXR0cikgJiYgYXR0ciBpbiBlbCkge1xuICAgICAgdmFyIGF0dHJWYWx1ZSA9IGF0dHIgPT09ICd2YWx1ZScgPyB2YWx1ZSA9PSBudWxsIC8vIElFOSB3aWxsIHNldCBpbnB1dC52YWx1ZSB0byBcIm51bGxcIiBmb3IgbnVsbC4uLlxuICAgICAgPyAnJyA6IHZhbHVlIDogdmFsdWU7XG5cbiAgICAgIGlmIChlbFthdHRyXSAhPT0gYXR0clZhbHVlKSB7XG4gICAgICAgIGVsW2F0dHJdID0gYXR0clZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBzZXQgbW9kZWwgcHJvcHNcbiAgICB2YXIgbW9kZWxQcm9wID0gbW9kZWxQcm9wc1thdHRyXTtcbiAgICBpZiAoIWludGVycCAmJiBtb2RlbFByb3ApIHtcbiAgICAgIGVsW21vZGVsUHJvcF0gPSB2YWx1ZTtcbiAgICAgIC8vIHVwZGF0ZSB2LW1vZGVsIGlmIHByZXNlbnRcbiAgICAgIHZhciBtb2RlbCA9IGVsLl9fdl9tb2RlbDtcbiAgICAgIGlmIChtb2RlbCkge1xuICAgICAgICBtb2RlbC5saXN0ZW5lcigpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBkbyBub3Qgc2V0IHZhbHVlIGF0dHJpYnV0ZSBmb3IgdGV4dGFyZWFcbiAgICBpZiAoYXR0ciA9PT0gJ3ZhbHVlJyAmJiBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHVwZGF0ZSBhdHRyaWJ1dGVcbiAgICBpZiAoZW51bWVyYXRlZEF0dHJSRS50ZXN0KGF0dHIpKSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUgPyAndHJ1ZScgOiAnZmFsc2UnKTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlICE9IG51bGwgJiYgdmFsdWUgIT09IGZhbHNlKSB7XG4gICAgICBpZiAoYXR0ciA9PT0gJ2NsYXNzJykge1xuICAgICAgICAvLyBoYW5kbGUgZWRnZSBjYXNlICMxOTYwOlxuICAgICAgICAvLyBjbGFzcyBpbnRlcnBvbGF0aW9uIHNob3VsZCBub3Qgb3ZlcndyaXRlIFZ1ZSB0cmFuc2l0aW9uIGNsYXNzXG4gICAgICAgIGlmIChlbC5fX3ZfdHJhbnMpIHtcbiAgICAgICAgICB2YWx1ZSArPSAnICcgKyBlbC5fX3ZfdHJhbnMuaWQgKyAnLXRyYW5zaXRpb24nO1xuICAgICAgICB9XG4gICAgICAgIHNldENsYXNzKGVsLCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHhsaW5rUkUudGVzdChhdHRyKSkge1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBhdHRyLCB2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlID09PSB0cnVlID8gJycgOiB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBlbCA9IHtcblxuICBwcmlvcml0eTogRUwsXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIXRoaXMuYXJnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpZCA9IHRoaXMuaWQgPSBjYW1lbGl6ZSh0aGlzLmFyZyk7XG4gICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJGVscztcbiAgICBpZiAoaGFzT3duKHJlZnMsIGlkKSkge1xuICAgICAgcmVmc1tpZF0gPSB0aGlzLmVsO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWZpbmVSZWFjdGl2ZShyZWZzLCBpZCwgdGhpcy5lbCk7XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRlbHM7XG4gICAgaWYgKHJlZnNbdGhpcy5pZF0gPT09IHRoaXMuZWwpIHtcbiAgICAgIHJlZnNbdGhpcy5pZF0gPSBudWxsO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHJlZiA9IHtcbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3YtcmVmOicgKyB0aGlzLmFyZyArICcgbXVzdCBiZSB1c2VkIG9uIGEgY2hpbGQgJyArICdjb21wb25lbnQuIEZvdW5kIG9uIDwnICsgdGhpcy5lbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyAnPi4nLCB0aGlzLnZtKTtcbiAgfVxufTtcblxudmFyIGNsb2FrID0ge1xuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdGhpcy52bS4kb25jZSgncHJlLWhvb2s6Y29tcGlsZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3YtY2xvYWsnKTtcbiAgICB9KTtcbiAgfVxufTtcblxuLy8gbXVzdCBleHBvcnQgcGxhaW4gb2JqZWN0XG52YXIgZGlyZWN0aXZlcyA9IHtcbiAgdGV4dDogdGV4dCQxLFxuICBodG1sOiBodG1sLFxuICAnZm9yJzogdkZvcixcbiAgJ2lmJzogdklmLFxuICBzaG93OiBzaG93LFxuICBtb2RlbDogbW9kZWwsXG4gIG9uOiBvbiQxLFxuICBiaW5kOiBiaW5kJDEsXG4gIGVsOiBlbCxcbiAgcmVmOiByZWYsXG4gIGNsb2FrOiBjbG9ha1xufTtcblxudmFyIHZDbGFzcyA9IHtcblxuICBkZWVwOiB0cnVlLFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgdGhpcy5jbGVhbnVwKCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLnNldENsYXNzKHZhbHVlLnRyaW0oKS5zcGxpdCgvXFxzKy8pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRDbGFzcyhub3JtYWxpemUkMSh2YWx1ZSkpO1xuICAgIH1cbiAgfSxcblxuICBzZXRDbGFzczogZnVuY3Rpb24gc2V0Q2xhc3ModmFsdWUpIHtcbiAgICB0aGlzLmNsZWFudXAodmFsdWUpO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgdmFsID0gdmFsdWVbaV07XG4gICAgICBpZiAodmFsKSB7XG4gICAgICAgIGFwcGx5KHRoaXMuZWwsIHZhbCwgYWRkQ2xhc3MpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnByZXZLZXlzID0gdmFsdWU7XG4gIH0sXG5cbiAgY2xlYW51cDogZnVuY3Rpb24gY2xlYW51cCh2YWx1ZSkge1xuICAgIHZhciBwcmV2S2V5cyA9IHRoaXMucHJldktleXM7XG4gICAgaWYgKCFwcmV2S2V5cykgcmV0dXJuO1xuICAgIHZhciBpID0gcHJldktleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciBrZXkgPSBwcmV2S2V5c1tpXTtcbiAgICAgIGlmICghdmFsdWUgfHwgdmFsdWUuaW5kZXhPZihrZXkpIDwgMCkge1xuICAgICAgICBhcHBseSh0aGlzLmVsLCBrZXksIHJlbW92ZUNsYXNzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogTm9ybWFsaXplIG9iamVjdHMgYW5kIGFycmF5cyAocG90ZW50aWFsbHkgY29udGFpbmluZyBvYmplY3RzKVxuICogaW50byBhcnJheSBvZiBzdHJpbmdzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5PFN0cmluZ3xPYmplY3Q+fSB2YWx1ZVxuICogQHJldHVybiB7QXJyYXk8U3RyaW5nPn1cbiAqL1xuXG5mdW5jdGlvbiBub3JtYWxpemUkMSh2YWx1ZSkge1xuICB2YXIgcmVzID0gW107XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgX2tleSA9IHZhbHVlW2ldO1xuICAgICAgaWYgKF9rZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBfa2V5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHJlcy5wdXNoKF9rZXkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAodmFyIGsgaW4gX2tleSkge1xuICAgICAgICAgICAgaWYgKF9rZXlba10pIHJlcy5wdXNoKGspO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZVtrZXldKSByZXMucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEFkZCBvciByZW1vdmUgYSBjbGFzcy9jbGFzc2VzIG9uIGFuIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBjbGFzcyBuYW1lLiBUaGlzIG1heSBvciBtYXkgbm90XG4gKiAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW4gYSBzcGFjZSBjaGFyYWN0ZXIsIGluIHN1Y2ggYVxuICogICAgICAgICAgICAgICAgICAgICBjYXNlIHdlJ2xsIGRlYWwgd2l0aCBtdWx0aXBsZSBjbGFzc1xuICogICAgICAgICAgICAgICAgICAgICBuYW1lcyBhdCBvbmNlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuXG5mdW5jdGlvbiBhcHBseShlbCwga2V5LCBmbikge1xuICBrZXkgPSBrZXkudHJpbSgpO1xuICBpZiAoa2V5LmluZGV4T2YoJyAnKSA9PT0gLTEpIHtcbiAgICBmbihlbCwga2V5KTtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gVGhlIGtleSBjb250YWlucyBvbmUgb3IgbW9yZSBzcGFjZSBjaGFyYWN0ZXJzLlxuICAvLyBTaW5jZSBhIGNsYXNzIG5hbWUgZG9lc24ndCBhY2NlcHQgc3VjaCBjaGFyYWN0ZXJzLCB3ZVxuICAvLyB0cmVhdCBpdCBhcyBtdWx0aXBsZSBjbGFzc2VzLlxuICB2YXIga2V5cyA9IGtleS5zcGxpdCgvXFxzKy8pO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZm4oZWwsIGtleXNbaV0pO1xuICB9XG59XG5cbnZhciBjb21wb25lbnQgPSB7XG5cbiAgcHJpb3JpdHk6IENPTVBPTkVOVCxcblxuICBwYXJhbXM6IFsna2VlcC1hbGl2ZScsICd0cmFuc2l0aW9uLW1vZGUnLCAnaW5saW5lLXRlbXBsYXRlJ10sXG5cbiAgLyoqXG4gICAqIFNldHVwLiBUd28gcG9zc2libGUgdXNhZ2VzOlxuICAgKlxuICAgKiAtIHN0YXRpYzpcbiAgICogICA8Y29tcD4gb3IgPGRpdiB2LWNvbXBvbmVudD1cImNvbXBcIj5cbiAgICpcbiAgICogLSBkeW5hbWljOlxuICAgKiAgIDxjb21wb25lbnQgOmlzPVwidmlld1wiPlxuICAgKi9cblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIGlmICghdGhpcy5lbC5fX3Z1ZV9fKSB7XG4gICAgICAvLyBrZWVwLWFsaXZlIGNhY2hlXG4gICAgICB0aGlzLmtlZXBBbGl2ZSA9IHRoaXMucGFyYW1zLmtlZXBBbGl2ZTtcbiAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgICB0aGlzLmNhY2hlID0ge307XG4gICAgICB9XG4gICAgICAvLyBjaGVjayBpbmxpbmUtdGVtcGxhdGVcbiAgICAgIGlmICh0aGlzLnBhcmFtcy5pbmxpbmVUZW1wbGF0ZSkge1xuICAgICAgICAvLyBleHRyYWN0IGlubGluZSB0ZW1wbGF0ZSBhcyBhIERvY3VtZW50RnJhZ21lbnRcbiAgICAgICAgdGhpcy5pbmxpbmVUZW1wbGF0ZSA9IGV4dHJhY3RDb250ZW50KHRoaXMuZWwsIHRydWUpO1xuICAgICAgfVxuICAgICAgLy8gY29tcG9uZW50IHJlc29sdXRpb24gcmVsYXRlZCBzdGF0ZVxuICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSB0aGlzLkNvbXBvbmVudCA9IG51bGw7XG4gICAgICAvLyB0cmFuc2l0aW9uIHJlbGF0ZWQgc3RhdGVcbiAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxzID0gMDtcbiAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxDYiA9IG51bGw7XG4gICAgICAvLyBjcmVhdGUgYSByZWYgYW5jaG9yXG4gICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1jb21wb25lbnQnKTtcbiAgICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuICAgICAgLy8gcmVtb3ZlIGlzIGF0dHJpYnV0ZS5cbiAgICAgIC8vIHRoaXMgaXMgcmVtb3ZlZCBkdXJpbmcgY29tcGlsYXRpb24sIGJ1dCBiZWNhdXNlIGNvbXBpbGF0aW9uIGlzXG4gICAgICAvLyBjYWNoZWQsIHdoZW4gdGhlIGNvbXBvbmVudCBpcyB1c2VkIGVsc2V3aGVyZSB0aGlzIGF0dHJpYnV0ZVxuICAgICAgLy8gd2lsbCByZW1haW4gYXQgbGluayB0aW1lLlxuICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ2lzJyk7XG4gICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnOmlzJyk7XG4gICAgICAvLyByZW1vdmUgcmVmLCBzYW1lIGFzIGFib3ZlXG4gICAgICBpZiAodGhpcy5kZXNjcmlwdG9yLnJlZikge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgndi1yZWY6JyArIGh5cGhlbmF0ZSh0aGlzLmRlc2NyaXB0b3IucmVmKSk7XG4gICAgICB9XG4gICAgICAvLyBpZiBzdGF0aWMsIGJ1aWxkIHJpZ2h0IG5vdy5cbiAgICAgIGlmICh0aGlzLmxpdGVyYWwpIHtcbiAgICAgICAgdGhpcy5zZXRDb21wb25lbnQodGhpcy5leHByZXNzaW9uKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdjYW5ub3QgbW91bnQgY29tcG9uZW50IFwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiAnICsgJ29uIGFscmVhZHkgbW91bnRlZCBlbGVtZW50OiAnICsgdGhpcy5lbCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBQdWJsaWMgdXBkYXRlLCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIgaW4gdGhlIGR5bmFtaWNcbiAgICogbGl0ZXJhbCBzY2VuYXJpbywgZS5nLiA8Y29tcG9uZW50IDppcz1cInZpZXdcIj5cbiAgICovXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICBpZiAoIXRoaXMubGl0ZXJhbCkge1xuICAgICAgdGhpcy5zZXRDb21wb25lbnQodmFsdWUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogU3dpdGNoIGR5bmFtaWMgY29tcG9uZW50cy4gTWF5IHJlc29sdmUgdGhlIGNvbXBvbmVudFxuICAgKiBhc3luY2hyb25vdXNseSwgYW5kIHBlcmZvcm0gdHJhbnNpdGlvbiBiYXNlZCBvblxuICAgKiBzcGVjaWZpZWQgdHJhbnNpdGlvbiBtb2RlLiBBY2NlcHRzIGEgZmV3IGFkZGl0aW9uYWxcbiAgICogYXJndW1lbnRzIHNwZWNpZmljYWxseSBmb3IgdnVlLXJvdXRlci5cbiAgICpcbiAgICogVGhlIGNhbGxiYWNrIGlzIGNhbGxlZCB3aGVuIHRoZSBmdWxsIHRyYW5zaXRpb24gaXNcbiAgICogZmluaXNoZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIHNldENvbXBvbmVudDogZnVuY3Rpb24gc2V0Q29tcG9uZW50KHZhbHVlLCBjYikge1xuICAgIHRoaXMuaW52YWxpZGF0ZVBlbmRpbmcoKTtcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAvLyBqdXN0IHJlbW92ZSBjdXJyZW50XG4gICAgICB0aGlzLnVuYnVpbGQodHJ1ZSk7XG4gICAgICB0aGlzLnJlbW92ZSh0aGlzLmNoaWxkVk0sIGNiKTtcbiAgICAgIHRoaXMuY2hpbGRWTSA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHRoaXMucmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLm1vdW50Q29tcG9uZW50KGNiKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVzb2x2ZSB0aGUgY29tcG9uZW50IGNvbnN0cnVjdG9yIHRvIHVzZSB3aGVuIGNyZWF0aW5nXG4gICAqIHRoZSBjaGlsZCB2bS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHZhbHVlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqL1xuXG4gIHJlc29sdmVDb21wb25lbnQ6IGZ1bmN0aW9uIHJlc29sdmVDb21wb25lbnQodmFsdWUsIGNiKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKENvbXBvbmVudCkge1xuICAgICAgc2VsZi5Db21wb25lbnROYW1lID0gQ29tcG9uZW50Lm9wdGlvbnMubmFtZSB8fCAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogbnVsbCk7XG4gICAgICBzZWxmLkNvbXBvbmVudCA9IENvbXBvbmVudDtcbiAgICAgIGNiKCk7XG4gICAgfSk7XG4gICAgdGhpcy52bS5fcmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2UgdXNpbmcgdGhlIGN1cnJlbnQgY29uc3RydWN0b3IgYW5kXG4gICAqIHJlcGxhY2UgdGhlIGV4aXN0aW5nIGluc3RhbmNlLiBUaGlzIG1ldGhvZCBkb2Vzbid0IGNhcmVcbiAgICogd2hldGhlciB0aGUgbmV3IGNvbXBvbmVudCBhbmQgdGhlIG9sZCBvbmUgYXJlIGFjdHVhbGx5XG4gICAqIHRoZSBzYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIG1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiBtb3VudENvbXBvbmVudChjYikge1xuICAgIC8vIGFjdHVhbCBtb3VudFxuICAgIHRoaXMudW5idWlsZCh0cnVlKTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGFjdGl2YXRlSG9va3MgPSB0aGlzLkNvbXBvbmVudC5vcHRpb25zLmFjdGl2YXRlO1xuICAgIHZhciBjYWNoZWQgPSB0aGlzLmdldENhY2hlZCgpO1xuICAgIHZhciBuZXdDb21wb25lbnQgPSB0aGlzLmJ1aWxkKCk7XG4gICAgaWYgKGFjdGl2YXRlSG9va3MgJiYgIWNhY2hlZCkge1xuICAgICAgdGhpcy53YWl0aW5nRm9yID0gbmV3Q29tcG9uZW50O1xuICAgICAgY2FsbEFjdGl2YXRlSG9va3MoYWN0aXZhdGVIb29rcywgbmV3Q29tcG9uZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChzZWxmLndhaXRpbmdGb3IgIT09IG5ld0NvbXBvbmVudCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLndhaXRpbmdGb3IgPSBudWxsO1xuICAgICAgICBzZWxmLnRyYW5zaXRpb24obmV3Q29tcG9uZW50LCBjYik7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlIHJlZiBmb3Iga2VwdC1hbGl2ZSBjb21wb25lbnRcbiAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgbmV3Q29tcG9uZW50Ll91cGRhdGVSZWYoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudHJhbnNpdGlvbihuZXdDb21wb25lbnQsIGNiKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIGNvbXBvbmVudCBjaGFuZ2VzIG9yIHVuYmluZHMgYmVmb3JlIGFuIGFzeW5jXG4gICAqIGNvbnN0cnVjdG9yIGlzIHJlc29sdmVkLCB3ZSBuZWVkIHRvIGludmFsaWRhdGUgaXRzXG4gICAqIHBlbmRpbmcgY2FsbGJhY2suXG4gICAqL1xuXG4gIGludmFsaWRhdGVQZW5kaW5nOiBmdW5jdGlvbiBpbnZhbGlkYXRlUGVuZGluZygpIHtcbiAgICBpZiAodGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpIHtcbiAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiLmNhbmNlbCgpO1xuICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSBudWxsO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSW5zdGFudGlhdGUvaW5zZXJ0IGEgbmV3IGNoaWxkIHZtLlxuICAgKiBJZiBrZWVwIGFsaXZlIGFuZCBoYXMgY2FjaGVkIGluc3RhbmNlLCBpbnNlcnQgdGhhdFxuICAgKiBpbnN0YW5jZTsgb3RoZXJ3aXNlIGJ1aWxkIGEgbmV3IG9uZSBhbmQgY2FjaGUgaXQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbZXh0cmFPcHRpb25zXVxuICAgKiBAcmV0dXJuIHtWdWV9IC0gdGhlIGNyZWF0ZWQgaW5zdGFuY2VcbiAgICovXG5cbiAgYnVpbGQ6IGZ1bmN0aW9uIGJ1aWxkKGV4dHJhT3B0aW9ucykge1xuICAgIHZhciBjYWNoZWQgPSB0aGlzLmdldENhY2hlZCgpO1xuICAgIGlmIChjYWNoZWQpIHtcbiAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLkNvbXBvbmVudCkge1xuICAgICAgLy8gZGVmYXVsdCBvcHRpb25zXG4gICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgbmFtZTogdGhpcy5Db21wb25lbnROYW1lLFxuICAgICAgICBlbDogY2xvbmVOb2RlKHRoaXMuZWwpLFxuICAgICAgICB0ZW1wbGF0ZTogdGhpcy5pbmxpbmVUZW1wbGF0ZSxcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRvIGFkZCB0aGUgY2hpbGQgd2l0aCBjb3JyZWN0IHBhcmVudFxuICAgICAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBpdHMgcGFyZW50XG4gICAgICAgIC8vIHNob3VsZCBiZSB0aGUgdHJhbnNjbHVzaW9uIGhvc3QuXG4gICAgICAgIHBhcmVudDogdGhpcy5faG9zdCB8fCB0aGlzLnZtLFxuICAgICAgICAvLyBpZiBubyBpbmxpbmUtdGVtcGxhdGUsIHRoZW4gdGhlIGNvbXBpbGVkXG4gICAgICAgIC8vIGxpbmtlciBjYW4gYmUgY2FjaGVkIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuXG4gICAgICAgIF9saW5rZXJDYWNoYWJsZTogIXRoaXMuaW5saW5lVGVtcGxhdGUsXG4gICAgICAgIF9yZWY6IHRoaXMuZGVzY3JpcHRvci5yZWYsXG4gICAgICAgIF9hc0NvbXBvbmVudDogdHJ1ZSxcbiAgICAgICAgX2lzUm91dGVyVmlldzogdGhpcy5faXNSb3V0ZXJWaWV3LFxuICAgICAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBjb250ZXh0XG4gICAgICAgIC8vIHdpbGwgYmUgdGhlIGNvbW1vbiBwYXJlbnQgdm0gb2YgdGhpcyBpbnN0YW5jZVxuICAgICAgICAvLyBhbmQgaXRzIGhvc3QuXG4gICAgICAgIF9jb250ZXh0OiB0aGlzLnZtLFxuICAgICAgICAvLyBpZiB0aGlzIGlzIGluc2lkZSBhbiBpbmxpbmUgdi1mb3IsIHRoZSBzY29wZVxuICAgICAgICAvLyB3aWxsIGJlIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgY3JlYXRlZCBmb3IgdGhpc1xuICAgICAgICAvLyByZXBlYXQgZnJhZ21lbnQuIHRoaXMgaXMgdXNlZCBmb3IgbGlua2luZyBwcm9wc1xuICAgICAgICAvLyBhbmQgY29udGFpbmVyIGRpcmVjdGl2ZXMuXG4gICAgICAgIF9zY29wZTogdGhpcy5fc2NvcGUsXG4gICAgICAgIC8vIHBhc3MgaW4gdGhlIG93bmVyIGZyYWdtZW50IG9mIHRoaXMgY29tcG9uZW50LlxuICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBzbyB0aGF0IHRoZSBmcmFnbWVudCBjYW4ga2VlcFxuICAgICAgICAvLyB0cmFjayBvZiBpdHMgY29udGFpbmVkIGNvbXBvbmVudHMgaW4gb3JkZXIgdG9cbiAgICAgICAgLy8gY2FsbCBhdHRhY2gvZGV0YWNoIGhvb2tzIGZvciB0aGVtLlxuICAgICAgICBfZnJhZzogdGhpcy5fZnJhZ1xuICAgICAgfTtcbiAgICAgIC8vIGV4dHJhIG9wdGlvbnNcbiAgICAgIC8vIGluIDEuMC4wIHRoaXMgaXMgdXNlZCBieSB2dWUtcm91dGVyIG9ubHlcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKGV4dHJhT3B0aW9ucykge1xuICAgICAgICBleHRlbmQob3B0aW9ucywgZXh0cmFPcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIHZhciBjaGlsZCA9IG5ldyB0aGlzLkNvbXBvbmVudChvcHRpb25zKTtcbiAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgICB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF0gPSBjaGlsZDtcbiAgICAgIH1cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbC5oYXNBdHRyaWJ1dGUoJ3RyYW5zaXRpb24nKSAmJiBjaGlsZC5faXNGcmFnbWVudCkge1xuICAgICAgICB3YXJuKCdUcmFuc2l0aW9ucyB3aWxsIG5vdCB3b3JrIG9uIGEgZnJhZ21lbnQgaW5zdGFuY2UuICcgKyAnVGVtcGxhdGU6ICcgKyBjaGlsZC4kb3B0aW9ucy50ZW1wbGF0ZSwgY2hpbGQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVHJ5IHRvIGdldCBhIGNhY2hlZCBpbnN0YW5jZSBvZiB0aGUgY3VycmVudCBjb21wb25lbnQuXG4gICAqXG4gICAqIEByZXR1cm4ge1Z1ZXx1bmRlZmluZWR9XG4gICAqL1xuXG4gIGdldENhY2hlZDogZnVuY3Rpb24gZ2V0Q2FjaGVkKCkge1xuICAgIHJldHVybiB0aGlzLmtlZXBBbGl2ZSAmJiB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF07XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRlYXJkb3duIHRoZSBjdXJyZW50IGNoaWxkLCBidXQgZGVmZXJzIGNsZWFudXAgc29cbiAgICogdGhhdCB3ZSBjYW4gc2VwYXJhdGUgdGhlIGRlc3Ryb3kgYW5kIHJlbW92YWwgc3RlcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJcbiAgICovXG5cbiAgdW5idWlsZDogZnVuY3Rpb24gdW5idWlsZChkZWZlcikge1xuICAgIGlmICh0aGlzLndhaXRpbmdGb3IpIHtcbiAgICAgIGlmICghdGhpcy5rZWVwQWxpdmUpIHtcbiAgICAgICAgdGhpcy53YWl0aW5nRm9yLiRkZXN0cm95KCk7XG4gICAgICB9XG4gICAgICB0aGlzLndhaXRpbmdGb3IgPSBudWxsO1xuICAgIH1cbiAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkVk07XG4gICAgaWYgKCFjaGlsZCB8fCB0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgaWYgKGNoaWxkKSB7XG4gICAgICAgIC8vIHJlbW92ZSByZWZcbiAgICAgICAgY2hpbGQuX2luYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgY2hpbGQuX3VwZGF0ZVJlZih0cnVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gdGhlIHNvbGUgcHVycG9zZSBvZiBgZGVmZXJDbGVhbnVwYCBpcyBzbyB0aGF0IHdlIGNhblxuICAgIC8vIFwiZGVhY3RpdmF0ZVwiIHRoZSB2bSByaWdodCBub3cgYW5kIHBlcmZvcm0gRE9NIHJlbW92YWxcbiAgICAvLyBsYXRlci5cbiAgICBjaGlsZC4kZGVzdHJveShmYWxzZSwgZGVmZXIpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZW1vdmUgY3VycmVudCBkZXN0cm95ZWQgY2hpbGQgYW5kIG1hbnVhbGx5IGRvXG4gICAqIHRoZSBjbGVhbnVwIGFmdGVyIHJlbW92YWwuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqL1xuXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGNoaWxkLCBjYikge1xuICAgIHZhciBrZWVwQWxpdmUgPSB0aGlzLmtlZXBBbGl2ZTtcbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgIC8vIHdlIG1heSBoYXZlIGEgY29tcG9uZW50IHN3aXRjaCB3aGVuIGEgcHJldmlvdXNcbiAgICAgIC8vIGNvbXBvbmVudCBpcyBzdGlsbCBiZWluZyB0cmFuc2l0aW9uZWQgb3V0LlxuICAgICAgLy8gd2Ugd2FudCB0byB0cmlnZ2VyIG9ubHkgb25lIGxhc3Rlc3QgaW5zZXJ0aW9uIGNiXG4gICAgICAvLyB3aGVuIHRoZSBleGlzdGluZyB0cmFuc2l0aW9uIGZpbmlzaGVzLiAoIzExMTkpXG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmFscysrO1xuICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbENiID0gY2I7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBjaGlsZC4kcmVtb3ZlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbHMtLTtcbiAgICAgICAgaWYgKCFrZWVwQWxpdmUpIGNoaWxkLl9jbGVhbnVwKCk7XG4gICAgICAgIGlmICghc2VsZi5wZW5kaW5nUmVtb3ZhbHMgJiYgc2VsZi5wZW5kaW5nUmVtb3ZhbENiKSB7XG4gICAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbENiKCk7XG4gICAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbENiID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChjYikge1xuICAgICAgY2IoKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFjdHVhbGx5IHN3YXAgdGhlIGNvbXBvbmVudHMsIGRlcGVuZGluZyBvbiB0aGVcbiAgICogdHJhbnNpdGlvbiBtb2RlLiBEZWZhdWx0cyB0byBzaW11bHRhbmVvdXMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICB0cmFuc2l0aW9uOiBmdW5jdGlvbiB0cmFuc2l0aW9uKHRhcmdldCwgY2IpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGN1cnJlbnQgPSB0aGlzLmNoaWxkVk07XG4gICAgLy8gZm9yIGRldnRvb2wgaW5zcGVjdGlvblxuICAgIGlmIChjdXJyZW50KSBjdXJyZW50Ll9pbmFjdGl2ZSA9IHRydWU7XG4gICAgdGFyZ2V0Ll9pbmFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuY2hpbGRWTSA9IHRhcmdldDtcbiAgICBzd2l0Y2ggKHNlbGYucGFyYW1zLnRyYW5zaXRpb25Nb2RlKSB7XG4gICAgICBjYXNlICdpbi1vdXQnOlxuICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQsIGNiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnb3V0LWluJzpcbiAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBjYik7XG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQpO1xuICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgY2IpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVW5iaW5kLlxuICAgKi9cblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB0aGlzLmludmFsaWRhdGVQZW5kaW5nKCk7XG4gICAgLy8gRG8gbm90IGRlZmVyIGNsZWFudXAgd2hlbiB1bmJpbmRpbmdcbiAgICB0aGlzLnVuYnVpbGQoKTtcbiAgICAvLyBkZXN0cm95IGFsbCBrZWVwLWFsaXZlIGNhY2hlZCBpbnN0YW5jZXNcbiAgICBpZiAodGhpcy5jYWNoZSkge1xuICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuY2FjaGUpIHtcbiAgICAgICAgdGhpcy5jYWNoZVtrZXldLiRkZXN0cm95KCk7XG4gICAgICB9XG4gICAgICB0aGlzLmNhY2hlID0gbnVsbDtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQ2FsbCBhY3RpdmF0ZSBob29rcyBpbiBvcmRlciAoYXN5bmNocm9ub3VzKVxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGhvb2tzXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKi9cblxuZnVuY3Rpb24gY2FsbEFjdGl2YXRlSG9va3MoaG9va3MsIHZtLCBjYikge1xuICB2YXIgdG90YWwgPSBob29rcy5sZW5ndGg7XG4gIHZhciBjYWxsZWQgPSAwO1xuICBob29rc1swXS5jYWxsKHZtLCBuZXh0KTtcbiAgZnVuY3Rpb24gbmV4dCgpIHtcbiAgICBpZiAoKytjYWxsZWQgPj0gdG90YWwpIHtcbiAgICAgIGNiKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhvb2tzW2NhbGxlZF0uY2FsbCh2bSwgbmV4dCk7XG4gICAgfVxuICB9XG59XG5cbnZhciBwcm9wQmluZGluZ01vZGVzID0gY29uZmlnLl9wcm9wQmluZGluZ01vZGVzO1xudmFyIGVtcHR5ID0ge307XG5cbi8vIHJlZ2V4ZXNcbnZhciBpZGVudFJFJDEgPSAvXlskX2EtekEtWl0rW1xcdyRdKiQvO1xudmFyIHNldHRhYmxlUGF0aFJFID0gL15bQS1aYS16XyRdW1xcdyRdKihcXC5bQS1aYS16XyRdW1xcdyRdKnxcXFtbXlxcW1xcXV0rXFxdKSokLztcblxuLyoqXG4gKiBDb21waWxlIHByb3BzIG9uIGEgcm9vdCBlbGVtZW50IGFuZCByZXR1cm5cbiAqIGEgcHJvcHMgbGluayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BPcHRpb25zXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBwcm9wc0xpbmtGblxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVQcm9wcyhlbCwgcHJvcE9wdGlvbnMsIHZtKSB7XG4gIHZhciBwcm9wcyA9IFtdO1xuICB2YXIgbmFtZXMgPSBPYmplY3Qua2V5cyhwcm9wT3B0aW9ucyk7XG4gIHZhciBpID0gbmFtZXMubGVuZ3RoO1xuICB2YXIgb3B0aW9ucywgbmFtZSwgYXR0ciwgdmFsdWUsIHBhdGgsIHBhcnNlZCwgcHJvcDtcbiAgd2hpbGUgKGktLSkge1xuICAgIG5hbWUgPSBuYW1lc1tpXTtcbiAgICBvcHRpb25zID0gcHJvcE9wdGlvbnNbbmFtZV0gfHwgZW1wdHk7XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBuYW1lID09PSAnJGRhdGEnKSB7XG4gICAgICB3YXJuKCdEbyBub3QgdXNlICRkYXRhIGFzIHByb3AuJywgdm0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gcHJvcHMgY291bGQgY29udGFpbiBkYXNoZXMsIHdoaWNoIHdpbGwgYmVcbiAgICAvLyBpbnRlcnByZXRlZCBhcyBtaW51cyBjYWxjdWxhdGlvbnMgYnkgdGhlIHBhcnNlclxuICAgIC8vIHNvIHdlIG5lZWQgdG8gY2FtZWxpemUgdGhlIHBhdGggaGVyZVxuICAgIHBhdGggPSBjYW1lbGl6ZShuYW1lKTtcbiAgICBpZiAoIWlkZW50UkUkMS50ZXN0KHBhdGgpKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgcHJvcCBrZXk6IFwiJyArIG5hbWUgKyAnXCIuIFByb3Aga2V5cyAnICsgJ211c3QgYmUgdmFsaWQgaWRlbnRpZmllcnMuJywgdm0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgcHJvcCA9IHtcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBwYXRoOiBwYXRoLFxuICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgIG1vZGU6IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWSxcbiAgICAgIHJhdzogbnVsbFxuICAgIH07XG5cbiAgICBhdHRyID0gaHlwaGVuYXRlKG5hbWUpO1xuICAgIC8vIGZpcnN0IGNoZWNrIGR5bmFtaWMgdmVyc2lvblxuICAgIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0cikpID09PSBudWxsKSB7XG4gICAgICBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIgKyAnLnN5bmMnKSkgIT09IG51bGwpIHtcbiAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZO1xuICAgICAgfSBlbHNlIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0ciArICcub25jZScpKSAhPT0gbnVsbCkge1xuICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLk9ORV9USU1FO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcbiAgICAgIC8vIGhhcyBkeW5hbWljIGJpbmRpbmchXG4gICAgICBwcm9wLnJhdyA9IHZhbHVlO1xuICAgICAgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuICAgICAgdmFsdWUgPSBwYXJzZWQuZXhwcmVzc2lvbjtcbiAgICAgIHByb3AuZmlsdGVycyA9IHBhcnNlZC5maWx0ZXJzO1xuICAgICAgLy8gY2hlY2sgYmluZGluZyB0eXBlXG4gICAgICBpZiAoaXNMaXRlcmFsKHZhbHVlKSAmJiAhcGFyc2VkLmZpbHRlcnMpIHtcbiAgICAgICAgLy8gZm9yIGV4cHJlc3Npb25zIGNvbnRhaW5pbmcgbGl0ZXJhbCBudW1iZXJzIGFuZFxuICAgICAgICAvLyBib29sZWFucywgdGhlcmUncyBubyBuZWVkIHRvIHNldHVwIGEgcHJvcCBiaW5kaW5nLFxuICAgICAgICAvLyBzbyB3ZSBjYW4gb3B0aW1pemUgdGhlbSBhcyBhIG9uZS10aW1lIHNldC5cbiAgICAgICAgcHJvcC5vcHRpbWl6ZWRMaXRlcmFsID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb3AuZHluYW1pYyA9IHRydWU7XG4gICAgICAgIC8vIGNoZWNrIG5vbi1zZXR0YWJsZSBwYXRoIGZvciB0d28td2F5IGJpbmRpbmdzXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHByb3AubW9kZSA9PT0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZICYmICFzZXR0YWJsZVBhdGhSRS50ZXN0KHZhbHVlKSkge1xuICAgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWTtcbiAgICAgICAgICB3YXJuKCdDYW5ub3QgYmluZCB0d28td2F5IHByb3Agd2l0aCBub24tc2V0dGFibGUgJyArICdwYXJlbnQgcGF0aDogJyArIHZhbHVlLCB2bSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHByb3AucGFyZW50UGF0aCA9IHZhbHVlO1xuXG4gICAgICAvLyB3YXJuIHJlcXVpcmVkIHR3by13YXlcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG9wdGlvbnMudHdvV2F5ICYmIHByb3AubW9kZSAhPT0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZKSB7XG4gICAgICAgIHdhcm4oJ1Byb3AgXCInICsgbmFtZSArICdcIiBleHBlY3RzIGEgdHdvLXdheSBiaW5kaW5nIHR5cGUuJywgdm0pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoKHZhbHVlID0gZ2V0QXR0cihlbCwgYXR0cikpICE9PSBudWxsKSB7XG4gICAgICAvLyBoYXMgbGl0ZXJhbCBiaW5kaW5nIVxuICAgICAgcHJvcC5yYXcgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIGNoZWNrIHBvc3NpYmxlIGNhbWVsQ2FzZSBwcm9wIHVzYWdlXG4gICAgICB2YXIgbG93ZXJDYXNlTmFtZSA9IHBhdGgudG9Mb3dlckNhc2UoKTtcbiAgICAgIHZhbHVlID0gL1tBLVpcXC1dLy50ZXN0KG5hbWUpICYmIChlbC5nZXRBdHRyaWJ1dGUobG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSArICcub25jZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lICsgJy5vbmNlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLnN5bmMnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSArICcuc3luYycpKTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICB3YXJuKCdQb3NzaWJsZSB1c2FnZSBlcnJvciBmb3IgcHJvcCBgJyArIGxvd2VyQ2FzZU5hbWUgKyAnYCAtICcgKyAnZGlkIHlvdSBtZWFuIGAnICsgYXR0ciArICdgPyBIVE1MIGlzIGNhc2UtaW5zZW5zaXRpdmUsIHJlbWVtYmVyIHRvIHVzZSAnICsgJ2tlYmFiLWNhc2UgZm9yIHByb3BzIGluIHRlbXBsYXRlcy4nLCB2bSk7XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucmVxdWlyZWQpIHtcbiAgICAgICAgLy8gd2FybiBtaXNzaW5nIHJlcXVpcmVkXG4gICAgICAgIHdhcm4oJ01pc3NpbmcgcmVxdWlyZWQgcHJvcDogJyArIG5hbWUsIHZtKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gcHVzaCBwcm9wXG4gICAgcHJvcHMucHVzaChwcm9wKTtcbiAgfVxuICByZXR1cm4gbWFrZVByb3BzTGlua0ZuKHByb3BzKTtcbn1cblxuLyoqXG4gKiBCdWlsZCBhIGZ1bmN0aW9uIHRoYXQgYXBwbGllcyBwcm9wcyB0byBhIHZtLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BzXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gcHJvcHNMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlUHJvcHNMaW5rRm4ocHJvcHMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHByb3BzTGlua0ZuKHZtLCBzY29wZSkge1xuICAgIC8vIHN0b3JlIHJlc29sdmVkIHByb3BzIGluZm9cbiAgICB2bS5fcHJvcHMgPSB7fTtcbiAgICB2YXIgaW5saW5lUHJvcHMgPSB2bS4kb3B0aW9ucy5wcm9wc0RhdGE7XG4gICAgdmFyIGkgPSBwcm9wcy5sZW5ndGg7XG4gICAgdmFyIHByb3AsIHBhdGgsIG9wdGlvbnMsIHZhbHVlLCByYXc7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgcHJvcCA9IHByb3BzW2ldO1xuICAgICAgcmF3ID0gcHJvcC5yYXc7XG4gICAgICBwYXRoID0gcHJvcC5wYXRoO1xuICAgICAgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcbiAgICAgIHZtLl9wcm9wc1twYXRoXSA9IHByb3A7XG4gICAgICBpZiAoaW5saW5lUHJvcHMgJiYgaGFzT3duKGlubGluZVByb3BzLCBwYXRoKSkge1xuICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgaW5saW5lUHJvcHNbcGF0aF0pO1xuICAgICAgfWlmIChyYXcgPT09IG51bGwpIHtcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBhYnNlbnQgcHJvcFxuICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdW5kZWZpbmVkKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcC5keW5hbWljKSB7XG4gICAgICAgIC8vIGR5bmFtaWMgcHJvcFxuICAgICAgICBpZiAocHJvcC5tb2RlID09PSBwcm9wQmluZGluZ01vZGVzLk9ORV9USU1FKSB7XG4gICAgICAgICAgLy8gb25lIHRpbWUgYmluZGluZ1xuICAgICAgICAgIHZhbHVlID0gKHNjb3BlIHx8IHZtLl9jb250ZXh0IHx8IHZtKS4kZ2V0KHByb3AucGFyZW50UGF0aCk7XG4gICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodm0uX2NvbnRleHQpIHtcbiAgICAgICAgICAgIC8vIGR5bmFtaWMgYmluZGluZ1xuICAgICAgICAgICAgdm0uX2JpbmREaXIoe1xuICAgICAgICAgICAgICBuYW1lOiAncHJvcCcsXG4gICAgICAgICAgICAgIGRlZjogcHJvcERlZixcbiAgICAgICAgICAgICAgcHJvcDogcHJvcFxuICAgICAgICAgICAgfSwgbnVsbCwgbnVsbCwgc2NvcGUpOyAvLyBlbCwgaG9zdCwgc2NvcGVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyByb290IGluc3RhbmNlXG4gICAgICAgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2bS4kZ2V0KHByb3AucGFyZW50UGF0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHByb3Aub3B0aW1pemVkTGl0ZXJhbCkge1xuICAgICAgICAvLyBvcHRpbWl6ZWQgbGl0ZXJhbCwgY2FzdCBpdCBhbmQganVzdCBzZXQgb25jZVxuICAgICAgICB2YXIgc3RyaXBwZWQgPSBzdHJpcFF1b3RlcyhyYXcpO1xuICAgICAgICB2YWx1ZSA9IHN0cmlwcGVkID09PSByYXcgPyB0b0Jvb2xlYW4odG9OdW1iZXIocmF3KSkgOiBzdHJpcHBlZDtcbiAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHN0cmluZyBsaXRlcmFsLCBidXQgd2UgbmVlZCB0byBjYXRlciBmb3JcbiAgICAgICAgLy8gQm9vbGVhbiBwcm9wcyB3aXRoIG5vIHZhbHVlLCBvciB3aXRoIHNhbWVcbiAgICAgICAgLy8gbGl0ZXJhbCB2YWx1ZSAoZS5nLiBkaXNhYmxlZD1cImRpc2FibGVkXCIpXG4gICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWxvYWRlci9pc3N1ZXMvMTgyXG4gICAgICAgIHZhbHVlID0gb3B0aW9ucy50eXBlID09PSBCb29sZWFuICYmIChyYXcgPT09ICcnIHx8IHJhdyA9PT0gaHlwaGVuYXRlKHByb3AubmFtZSkpID8gdHJ1ZSA6IHJhdztcbiAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogUHJvY2VzcyBhIHByb3Agd2l0aCBhIHJhd1ZhbHVlLCBhcHBseWluZyBuZWNlc3NhcnkgY29lcnNpb25zLFxuICogZGVmYXVsdCB2YWx1ZXMgJiBhc3NlcnRpb25zIGFuZCBjYWxsIHRoZSBnaXZlbiBjYWxsYmFjayB3aXRoXG4gKiBwcm9jZXNzZWQgdmFsdWUuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSByYXdWYWx1ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuXG5mdW5jdGlvbiBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCByYXdWYWx1ZSwgZm4pIHtcbiAgdmFyIGlzU2ltcGxlID0gcHJvcC5keW5hbWljICYmIGlzU2ltcGxlUGF0aChwcm9wLnBhcmVudFBhdGgpO1xuICB2YXIgdmFsdWUgPSByYXdWYWx1ZTtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICB2YWx1ZSA9IGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3ApO1xuICB9XG4gIHZhbHVlID0gY29lcmNlUHJvcChwcm9wLCB2YWx1ZSwgdm0pO1xuICB2YXIgY29lcmNlZCA9IHZhbHVlICE9PSByYXdWYWx1ZTtcbiAgaWYgKCFhc3NlcnRQcm9wKHByb3AsIHZhbHVlLCB2bSkpIHtcbiAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoaXNTaW1wbGUgJiYgIWNvZXJjZWQpIHtcbiAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG4gICAgICBmbih2YWx1ZSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgZm4odmFsdWUpO1xuICB9XG59XG5cbi8qKlxuICogU2V0IGEgcHJvcCdzIGluaXRpYWwgdmFsdWUgb24gYSB2bSBhbmQgaXRzIGRhdGEgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqL1xuXG5mdW5jdGlvbiBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpIHtcbiAgcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgdmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGRlZmluZVJlYWN0aXZlKHZtLCBwcm9wLnBhdGgsIHZhbHVlKTtcbiAgfSk7XG59XG5cbi8qKlxuICogVXBkYXRlIGEgcHJvcCdzIHZhbHVlIG9uIGEgdm0uXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICovXG5cbmZ1bmN0aW9uIHVwZGF0ZVByb3Aodm0sIHByb3AsIHZhbHVlKSB7XG4gIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHZhbHVlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2bVtwcm9wLnBhdGhdID0gdmFsdWU7XG4gIH0pO1xufVxuXG4vKipcbiAqIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHByb3AuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHJldHVybiB7Kn1cbiAqL1xuXG5mdW5jdGlvbiBnZXRQcm9wRGVmYXVsdFZhbHVlKHZtLCBwcm9wKSB7XG4gIC8vIG5vIGRlZmF1bHQsIHJldHVybiB1bmRlZmluZWRcbiAgdmFyIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG4gIGlmICghaGFzT3duKG9wdGlvbnMsICdkZWZhdWx0JykpIHtcbiAgICAvLyBhYnNlbnQgYm9vbGVhbiB2YWx1ZSBkZWZhdWx0cyB0byBmYWxzZVxuICAgIHJldHVybiBvcHRpb25zLnR5cGUgPT09IEJvb2xlYW4gPyBmYWxzZSA6IHVuZGVmaW5lZDtcbiAgfVxuICB2YXIgZGVmID0gb3B0aW9uc1snZGVmYXVsdCddO1xuICAvLyB3YXJuIGFnYWluc3Qgbm9uLWZhY3RvcnkgZGVmYXVsdHMgZm9yIE9iamVjdCAmIEFycmF5XG4gIGlmIChpc09iamVjdChkZWYpKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIGRlZmF1bHQgdmFsdWUgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiOiAnICsgJ1Byb3BzIHdpdGggdHlwZSBPYmplY3QvQXJyYXkgbXVzdCB1c2UgYSBmYWN0b3J5IGZ1bmN0aW9uICcgKyAndG8gcmV0dXJuIHRoZSBkZWZhdWx0IHZhbHVlLicsIHZtKTtcbiAgfVxuICAvLyBjYWxsIGZhY3RvcnkgZnVuY3Rpb24gZm9yIG5vbi1GdW5jdGlvbiB0eXBlc1xuICByZXR1cm4gdHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJyAmJiBvcHRpb25zLnR5cGUgIT09IEZ1bmN0aW9uID8gZGVmLmNhbGwodm0pIDogZGVmO1xufVxuXG4vKipcbiAqIEFzc2VydCB3aGV0aGVyIGEgcHJvcCBpcyB2YWxpZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuZnVuY3Rpb24gYXNzZXJ0UHJvcChwcm9wLCB2YWx1ZSwgdm0pIHtcbiAgaWYgKCFwcm9wLm9wdGlvbnMucmVxdWlyZWQgJiYgKCAvLyBub24tcmVxdWlyZWRcbiAgcHJvcC5yYXcgPT09IG51bGwgfHwgLy8gYWJzY2VudFxuICB2YWx1ZSA9PSBudWxsKSAvLyBudWxsIG9yIHVuZGVmaW5lZFxuICApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgdmFyIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG4gIHZhciB0eXBlID0gb3B0aW9ucy50eXBlO1xuICB2YXIgdmFsaWQgPSAhdHlwZTtcbiAgdmFyIGV4cGVjdGVkVHlwZXMgPSBbXTtcbiAgaWYgKHR5cGUpIHtcbiAgICBpZiAoIWlzQXJyYXkodHlwZSkpIHtcbiAgICAgIHR5cGUgPSBbdHlwZV07XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHlwZS5sZW5ndGggJiYgIXZhbGlkOyBpKyspIHtcbiAgICAgIHZhciBhc3NlcnRlZFR5cGUgPSBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlW2ldKTtcbiAgICAgIGV4cGVjdGVkVHlwZXMucHVzaChhc3NlcnRlZFR5cGUuZXhwZWN0ZWRUeXBlKTtcbiAgICAgIHZhbGlkID0gYXNzZXJ0ZWRUeXBlLnZhbGlkO1xuICAgIH1cbiAgfVxuICBpZiAoIXZhbGlkKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHdhcm4oJ0ludmFsaWQgcHJvcDogdHlwZSBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiLicgKyAnIEV4cGVjdGVkICcgKyBleHBlY3RlZFR5cGVzLm1hcChmb3JtYXRUeXBlKS5qb2luKCcsICcpICsgJywgZ290ICcgKyBmb3JtYXRWYWx1ZSh2YWx1ZSkgKyAnLicsIHZtKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciB2YWxpZGF0b3IgPSBvcHRpb25zLnZhbGlkYXRvcjtcbiAgaWYgKHZhbGlkYXRvcikge1xuICAgIGlmICghdmFsaWRhdG9yKHZhbHVlKSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHByb3A6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIi4nLCB2bSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEZvcmNlIHBhcnNpbmcgdmFsdWUgd2l0aCBjb2VyY2Ugb3B0aW9uLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHsqfVxuICovXG5cbmZ1bmN0aW9uIGNvZXJjZVByb3AocHJvcCwgdmFsdWUsIHZtKSB7XG4gIHZhciBjb2VyY2UgPSBwcm9wLm9wdGlvbnMuY29lcmNlO1xuICBpZiAoIWNvZXJjZSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAodHlwZW9mIGNvZXJjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBjb2VyY2UodmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBjb2VyY2UgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiOiBleHBlY3RlZCBmdW5jdGlvbiwgZ290ICcgKyB0eXBlb2YgY29lcmNlICsgJy4nLCB2bSk7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5cbi8qKlxuICogQXNzZXJ0IHRoZSB0eXBlIG9mIGEgdmFsdWVcbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB0eXBlXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZSkge1xuICB2YXIgdmFsaWQ7XG4gIHZhciBleHBlY3RlZFR5cGU7XG4gIGlmICh0eXBlID09PSBTdHJpbmcpIHtcbiAgICBleHBlY3RlZFR5cGUgPSAnc3RyaW5nJztcbiAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IE51bWJlcikge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdudW1iZXInO1xuICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gQm9vbGVhbikge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdib29sZWFuJztcbiAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IEZ1bmN0aW9uKSB7XG4gICAgZXhwZWN0ZWRUeXBlID0gJ2Z1bmN0aW9uJztcbiAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IE9iamVjdCkge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdvYmplY3QnO1xuICAgIHZhbGlkID0gaXNQbGFpbk9iamVjdCh2YWx1ZSk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gQXJyYXkpIHtcbiAgICBleHBlY3RlZFR5cGUgPSAnYXJyYXknO1xuICAgIHZhbGlkID0gaXNBcnJheSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB2YWxpZDogdmFsaWQsXG4gICAgZXhwZWN0ZWRUeXBlOiBleHBlY3RlZFR5cGVcbiAgfTtcbn1cblxuLyoqXG4gKiBGb3JtYXQgdHlwZSBmb3Igb3V0cHV0XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRUeXBlKHR5cGUpIHtcbiAgcmV0dXJuIHR5cGUgPyB0eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdHlwZS5zbGljZSgxKSA6ICdjdXN0b20gdHlwZSc7XG59XG5cbi8qKlxuICogRm9ybWF0IHZhbHVlXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGZvcm1hdFZhbHVlKHZhbCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkuc2xpY2UoOCwgLTEpO1xufVxuXG52YXIgYmluZGluZ01vZGVzID0gY29uZmlnLl9wcm9wQmluZGluZ01vZGVzO1xuXG52YXIgcHJvcERlZiA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBjaGlsZCA9IHRoaXMudm07XG4gICAgdmFyIHBhcmVudCA9IGNoaWxkLl9jb250ZXh0O1xuICAgIC8vIHBhc3NlZCBpbiBmcm9tIGNvbXBpbGVyIGRpcmVjdGx5XG4gICAgdmFyIHByb3AgPSB0aGlzLmRlc2NyaXB0b3IucHJvcDtcbiAgICB2YXIgY2hpbGRLZXkgPSBwcm9wLnBhdGg7XG4gICAgdmFyIHBhcmVudEtleSA9IHByb3AucGFyZW50UGF0aDtcbiAgICB2YXIgdHdvV2F5ID0gcHJvcC5tb2RlID09PSBiaW5kaW5nTW9kZXMuVFdPX1dBWTtcblxuICAgIHZhciBwYXJlbnRXYXRjaGVyID0gdGhpcy5wYXJlbnRXYXRjaGVyID0gbmV3IFdhdGNoZXIocGFyZW50LCBwYXJlbnRLZXksIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgIHVwZGF0ZVByb3AoY2hpbGQsIHByb3AsIHZhbCk7XG4gICAgfSwge1xuICAgICAgdHdvV2F5OiB0d29XYXksXG4gICAgICBmaWx0ZXJzOiBwcm9wLmZpbHRlcnMsXG4gICAgICAvLyBpbXBvcnRhbnQ6IHByb3BzIG5lZWQgdG8gYmUgb2JzZXJ2ZWQgb24gdGhlXG4gICAgICAvLyB2LWZvciBzY29wZSBpZiBwcmVzZW50XG4gICAgICBzY29wZTogdGhpcy5fc2NvcGVcbiAgICB9KTtcblxuICAgIC8vIHNldCB0aGUgY2hpbGQgaW5pdGlhbCB2YWx1ZS5cbiAgICBpbml0UHJvcChjaGlsZCwgcHJvcCwgcGFyZW50V2F0Y2hlci52YWx1ZSk7XG5cbiAgICAvLyBzZXR1cCB0d28td2F5IGJpbmRpbmdcbiAgICBpZiAodHdvV2F5KSB7XG4gICAgICAvLyBpbXBvcnRhbnQ6IGRlZmVyIHRoZSBjaGlsZCB3YXRjaGVyIGNyZWF0aW9uIHVudGlsXG4gICAgICAvLyB0aGUgY3JlYXRlZCBob29rIChhZnRlciBkYXRhIG9ic2VydmF0aW9uKVxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgY2hpbGQuJG9uY2UoJ3ByZS1ob29rOmNyZWF0ZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuY2hpbGRXYXRjaGVyID0gbmV3IFdhdGNoZXIoY2hpbGQsIGNoaWxkS2V5LCBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgcGFyZW50V2F0Y2hlci5zZXQodmFsKTtcbiAgICAgICAgfSwge1xuICAgICAgICAgIC8vIGVuc3VyZSBzeW5jIHVwd2FyZCBiZWZvcmUgcGFyZW50IHN5bmMgZG93bi5cbiAgICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBpbiBjYXNlcyBlLmcuIHRoZSBjaGlsZFxuICAgICAgICAgIC8vIG11dGF0ZXMgYSBwcm9wIGFycmF5LCB0aGVuIHJlcGxhY2VzIGl0LiAoIzE2ODMpXG4gICAgICAgICAgc3luYzogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB0aGlzLnBhcmVudFdhdGNoZXIudGVhcmRvd24oKTtcbiAgICBpZiAodGhpcy5jaGlsZFdhdGNoZXIpIHtcbiAgICAgIHRoaXMuY2hpbGRXYXRjaGVyLnRlYXJkb3duKCk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgcXVldWUkMSA9IFtdO1xudmFyIHF1ZXVlZCA9IGZhbHNlO1xuXG4vKipcbiAqIFB1c2ggYSBqb2IgaW50byB0aGUgcXVldWUuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gam9iXG4gKi9cblxuZnVuY3Rpb24gcHVzaEpvYihqb2IpIHtcbiAgcXVldWUkMS5wdXNoKGpvYik7XG4gIGlmICghcXVldWVkKSB7XG4gICAgcXVldWVkID0gdHJ1ZTtcbiAgICBuZXh0VGljayhmbHVzaCk7XG4gIH1cbn1cblxuLyoqXG4gKiBGbHVzaCB0aGUgcXVldWUsIGFuZCBkbyBvbmUgZm9yY2VkIHJlZmxvdyBiZWZvcmVcbiAqIHRyaWdnZXJpbmcgdHJhbnNpdGlvbnMuXG4gKi9cblxuZnVuY3Rpb24gZmx1c2goKSB7XG4gIC8vIEZvcmNlIGxheW91dFxuICB2YXIgZiA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUkMS5sZW5ndGg7IGkrKykge1xuICAgIHF1ZXVlJDFbaV0oKTtcbiAgfVxuICBxdWV1ZSQxID0gW107XG4gIHF1ZXVlZCA9IGZhbHNlO1xuICAvLyBkdW1teSByZXR1cm4sIHNvIGpzIGxpbnRlcnMgZG9uJ3QgY29tcGxhaW4gYWJvdXRcbiAgLy8gdW51c2VkIHZhcmlhYmxlIGZcbiAgcmV0dXJuIGY7XG59XG5cbnZhciBUWVBFX1RSQU5TSVRJT04gPSAndHJhbnNpdGlvbic7XG52YXIgVFlQRV9BTklNQVRJT04gPSAnYW5pbWF0aW9uJztcbnZhciB0cmFuc0R1cmF0aW9uUHJvcCA9IHRyYW5zaXRpb25Qcm9wICsgJ0R1cmF0aW9uJztcbnZhciBhbmltRHVyYXRpb25Qcm9wID0gYW5pbWF0aW9uUHJvcCArICdEdXJhdGlvbic7XG5cbi8qKlxuICogSWYgYSBqdXN0LWVudGVyZWQgZWxlbWVudCBpcyBhcHBsaWVkIHRoZVxuICogbGVhdmUgY2xhc3Mgd2hpbGUgaXRzIGVudGVyIHRyYW5zaXRpb24gaGFzbid0IHN0YXJ0ZWQgeWV0LFxuICogYW5kIHRoZSB0cmFuc2l0aW9uZWQgcHJvcGVydHkgaGFzIHRoZSBzYW1lIHZhbHVlIGZvciBib3RoXG4gKiBlbnRlci9sZWF2ZSwgdGhlbiB0aGUgbGVhdmUgdHJhbnNpdGlvbiB3aWxsIGJlIHNraXBwZWQgYW5kXG4gKiB0aGUgdHJhbnNpdGlvbmVuZCBldmVudCBuZXZlciBmaXJlcy4gVGhpcyBmdW5jdGlvbiBlbnN1cmVzXG4gKiBpdHMgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIGFmdGVyIGEgdHJhbnNpdGlvbiBoYXMgc3RhcnRlZFxuICogYnkgd2FpdGluZyBmb3IgZG91YmxlIHJhZi5cbiAqXG4gKiBJdCBmYWxscyBiYWNrIHRvIHNldFRpbWVvdXQgb24gZGV2aWNlcyB0aGF0IHN1cHBvcnQgQ1NTXG4gKiB0cmFuc2l0aW9ucyBidXQgbm90IHJhZiAoZS5nLiBBbmRyb2lkIDQuMiBicm93c2VyKSAtIHNpbmNlXG4gKiB0aGVzZSBlbnZpcm9ubWVudHMgYXJlIHVzdWFsbHkgc2xvdywgd2UgYXJlIGdpdmluZyBpdCBhXG4gKiByZWxhdGl2ZWx5IGxhcmdlIHRpbWVvdXQuXG4gKi9cblxudmFyIHJhZiA9IGluQnJvd3NlciAmJiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xudmFyIHdhaXRGb3JUcmFuc2l0aW9uU3RhcnQgPSByYWZcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4/IGZ1bmN0aW9uIChmbikge1xuICByYWYoZnVuY3Rpb24gKCkge1xuICAgIHJhZihmbik7XG4gIH0pO1xufSA6IGZ1bmN0aW9uIChmbikge1xuICBzZXRUaW1lb3V0KGZuLCA1MCk7XG59O1xuXG4vKipcbiAqIEEgVHJhbnNpdGlvbiBvYmplY3QgdGhhdCBlbmNhcHN1bGF0ZXMgdGhlIHN0YXRlIGFuZCBsb2dpY1xuICogb2YgdGhlIHRyYW5zaXRpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gKiBAcGFyYW0ge09iamVjdH0gaG9va3NcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICovXG5mdW5jdGlvbiBUcmFuc2l0aW9uKGVsLCBpZCwgaG9va3MsIHZtKSB7XG4gIHRoaXMuaWQgPSBpZDtcbiAgdGhpcy5lbCA9IGVsO1xuICB0aGlzLmVudGVyQ2xhc3MgPSBob29rcyAmJiBob29rcy5lbnRlckNsYXNzIHx8IGlkICsgJy1lbnRlcic7XG4gIHRoaXMubGVhdmVDbGFzcyA9IGhvb2tzICYmIGhvb2tzLmxlYXZlQ2xhc3MgfHwgaWQgKyAnLWxlYXZlJztcbiAgdGhpcy5ob29rcyA9IGhvb2tzO1xuICB0aGlzLnZtID0gdm07XG4gIC8vIGFzeW5jIHN0YXRlXG4gIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSB0aGlzLm9wID0gdGhpcy5jYiA9IG51bGw7XG4gIHRoaXMuanVzdEVudGVyZWQgPSBmYWxzZTtcbiAgdGhpcy5lbnRlcmVkID0gdGhpcy5sZWZ0ID0gZmFsc2U7XG4gIHRoaXMudHlwZUNhY2hlID0ge307XG4gIC8vIGNoZWNrIGNzcyB0cmFuc2l0aW9uIHR5cGVcbiAgdGhpcy50eXBlID0gaG9va3MgJiYgaG9va3MudHlwZTtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKHRoaXMudHlwZSAmJiB0aGlzLnR5cGUgIT09IFRZUEVfVFJBTlNJVElPTiAmJiB0aGlzLnR5cGUgIT09IFRZUEVfQU5JTUFUSU9OKSB7XG4gICAgICB3YXJuKCdpbnZhbGlkIENTUyB0cmFuc2l0aW9uIHR5cGUgZm9yIHRyYW5zaXRpb249XCInICsgdGhpcy5pZCArICdcIjogJyArIHRoaXMudHlwZSwgdm0pO1xuICAgIH1cbiAgfVxuICAvLyBiaW5kXG4gIHZhciBzZWxmID0gdGhpcztbJ2VudGVyTmV4dFRpY2snLCAnZW50ZXJEb25lJywgJ2xlYXZlTmV4dFRpY2snLCAnbGVhdmVEb25lJ10uZm9yRWFjaChmdW5jdGlvbiAobSkge1xuICAgIHNlbGZbbV0gPSBiaW5kKHNlbGZbbV0sIHNlbGYpO1xuICB9KTtcbn1cblxudmFyIHAkMSA9IFRyYW5zaXRpb24ucHJvdG90eXBlO1xuXG4vKipcbiAqIFN0YXJ0IGFuIGVudGVyaW5nIHRyYW5zaXRpb24uXG4gKlxuICogMS4gZW50ZXIgdHJhbnNpdGlvbiB0cmlnZ2VyZWRcbiAqIDIuIGNhbGwgYmVmb3JlRW50ZXIgaG9va1xuICogMy4gYWRkIGVudGVyIGNsYXNzXG4gKiA0LiBpbnNlcnQvc2hvdyBlbGVtZW50XG4gKiA1LiBjYWxsIGVudGVyIGhvb2sgKHdpdGggcG9zc2libGUgZXhwbGljaXQganMgY2FsbGJhY2spXG4gKiA2LiByZWZsb3dcbiAqIDcuIGJhc2VkIG9uIHRyYW5zaXRpb24gdHlwZTpcbiAqICAgIC0gdHJhbnNpdGlvbjpcbiAqICAgICAgICByZW1vdmUgY2xhc3Mgbm93LCB3YWl0IGZvciB0cmFuc2l0aW9uZW5kLFxuICogICAgICAgIHRoZW4gZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogICAgLSBhbmltYXRpb246XG4gKiAgICAgICAgd2FpdCBmb3IgYW5pbWF0aW9uZW5kLCByZW1vdmUgY2xhc3MsXG4gKiAgICAgICAgdGhlbiBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiAgICAtIG5vIGNzcyB0cmFuc2l0aW9uOlxuICogICAgICAgIGRvbmUgbm93IGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiA4LiB3YWl0IGZvciBlaXRoZXIgZG9uZSBvciBqcyBjYWxsYmFjaywgdGhlbiBjYWxsXG4gKiAgICBhZnRlckVudGVyIGhvb2suXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSBpbnNlcnQvc2hvdyB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbnAkMS5lbnRlciA9IGZ1bmN0aW9uIChvcCwgY2IpIHtcbiAgdGhpcy5jYW5jZWxQZW5kaW5nKCk7XG4gIHRoaXMuY2FsbEhvb2soJ2JlZm9yZUVudGVyJyk7XG4gIHRoaXMuY2IgPSBjYjtcbiAgYWRkQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcbiAgb3AoKTtcbiAgdGhpcy5lbnRlcmVkID0gZmFsc2U7XG4gIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2VudGVyJyk7XG4gIGlmICh0aGlzLmVudGVyZWQpIHtcbiAgICByZXR1cm47IC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cbiAgfVxuICB0aGlzLmNhbmNlbCA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5lbnRlckNhbmNlbGxlZDtcbiAgcHVzaEpvYih0aGlzLmVudGVyTmV4dFRpY2spO1xufTtcblxuLyoqXG4gKiBUaGUgXCJuZXh0VGlja1wiIHBoYXNlIG9mIGFuIGVudGVyaW5nIHRyYW5zaXRpb24sIHdoaWNoIGlzXG4gKiB0byBiZSBwdXNoZWQgaW50byBhIHF1ZXVlIGFuZCBleGVjdXRlZCBhZnRlciBhIHJlZmxvdyBzb1xuICogdGhhdCByZW1vdmluZyB0aGUgY2xhc3MgY2FuIHRyaWdnZXIgYSBDU1MgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEuZW50ZXJOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICAvLyBwcmV2ZW50IHRyYW5zaXRpb24gc2tpcHBpbmdcbiAgdGhpcy5qdXN0RW50ZXJlZCA9IHRydWU7XG4gIHdhaXRGb3JUcmFuc2l0aW9uU3RhcnQoZnVuY3Rpb24gKCkge1xuICAgIF90aGlzLmp1c3RFbnRlcmVkID0gZmFsc2U7XG4gIH0pO1xuICB2YXIgZW50ZXJEb25lID0gdGhpcy5lbnRlckRvbmU7XG4gIHZhciB0eXBlID0gdGhpcy5nZXRDc3NUcmFuc2l0aW9uVHlwZSh0aGlzLmVudGVyQ2xhc3MpO1xuICBpZiAoIXRoaXMucGVuZGluZ0pzQ2IpIHtcbiAgICBpZiAodHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OKSB7XG4gICAgICAvLyB0cmlnZ2VyIHRyYW5zaXRpb24gYnkgcmVtb3ZpbmcgZW50ZXIgY2xhc3Mgbm93XG4gICAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICAgICAgdGhpcy5zZXR1cENzc0NiKHRyYW5zaXRpb25FbmRFdmVudCwgZW50ZXJEb25lKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFRZUEVfQU5JTUFUSU9OKSB7XG4gICAgICB0aGlzLnNldHVwQ3NzQ2IoYW5pbWF0aW9uRW5kRXZlbnQsIGVudGVyRG9uZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVudGVyRG9uZSgpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlID09PSBUWVBFX1RSQU5TSVRJT04pIHtcbiAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICB9XG59O1xuXG4vKipcbiAqIFRoZSBcImNsZWFudXBcIiBwaGFzZSBvZiBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLlxuICovXG5cbnAkMS5lbnRlckRvbmUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZW50ZXJlZCA9IHRydWU7XG4gIHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG4gIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG4gIHRoaXMuY2FsbEhvb2soJ2FmdGVyRW50ZXInKTtcbiAgaWYgKHRoaXMuY2IpIHRoaXMuY2IoKTtcbn07XG5cbi8qKlxuICogU3RhcnQgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG4gKlxuICogMS4gbGVhdmUgdHJhbnNpdGlvbiB0cmlnZ2VyZWQuXG4gKiAyLiBjYWxsIGJlZm9yZUxlYXZlIGhvb2tcbiAqIDMuIGFkZCBsZWF2ZSBjbGFzcyAodHJpZ2dlciBjc3MgdHJhbnNpdGlvbilcbiAqIDQuIGNhbGwgbGVhdmUgaG9vayAod2l0aCBwb3NzaWJsZSBleHBsaWNpdCBqcyBjYWxsYmFjaylcbiAqIDUuIHJlZmxvdyBpZiBubyBleHBsaWNpdCBqcyBjYWxsYmFjayBpcyBwcm92aWRlZFxuICogNi4gYmFzZWQgb24gdHJhbnNpdGlvbiB0eXBlOlxuICogICAgLSB0cmFuc2l0aW9uIG9yIGFuaW1hdGlvbjpcbiAqICAgICAgICB3YWl0IGZvciBlbmQgZXZlbnQsIHJlbW92ZSBjbGFzcywgdGhlbiBkb25lIGlmXG4gKiAgICAgICAgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAqICAgIC0gbm8gY3NzIHRyYW5zaXRpb246XG4gKiAgICAgICAgZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogNy4gd2FpdCBmb3IgZWl0aGVyIGRvbmUgb3IganMgY2FsbGJhY2ssIHRoZW4gY2FsbFxuICogICAgYWZ0ZXJMZWF2ZSBob29rLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gcmVtb3ZlL2hpZGUgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5wJDEubGVhdmUgPSBmdW5jdGlvbiAob3AsIGNiKSB7XG4gIHRoaXMuY2FuY2VsUGVuZGluZygpO1xuICB0aGlzLmNhbGxIb29rKCdiZWZvcmVMZWF2ZScpO1xuICB0aGlzLm9wID0gb3A7XG4gIHRoaXMuY2IgPSBjYjtcbiAgYWRkQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcbiAgdGhpcy5sZWZ0ID0gZmFsc2U7XG4gIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2xlYXZlJyk7XG4gIGlmICh0aGlzLmxlZnQpIHtcbiAgICByZXR1cm47IC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cbiAgfVxuICB0aGlzLmNhbmNlbCA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5sZWF2ZUNhbmNlbGxlZDtcbiAgLy8gb25seSBuZWVkIHRvIGhhbmRsZSBsZWF2ZURvbmUgaWZcbiAgLy8gMS4gdGhlIHRyYW5zaXRpb24gaXMgYWxyZWFkeSBkb25lIChzeW5jaHJvbm91c2x5IGNhbGxlZFxuICAvLyAgICBieSB0aGUgdXNlciwgd2hpY2ggY2F1c2VzIHRoaXMub3Agc2V0IHRvIG51bGwpXG4gIC8vIDIuIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2tcbiAgaWYgKHRoaXMub3AgJiYgIXRoaXMucGVuZGluZ0pzQ2IpIHtcbiAgICAvLyBpZiBhIENTUyB0cmFuc2l0aW9uIGxlYXZlcyBpbW1lZGlhdGVseSBhZnRlciBlbnRlcixcbiAgICAvLyB0aGUgdHJhbnNpdGlvbmVuZCBldmVudCBuZXZlciBmaXJlcy4gdGhlcmVmb3JlIHdlXG4gICAgLy8gZGV0ZWN0IHN1Y2ggY2FzZXMgYW5kIGVuZCB0aGUgbGVhdmUgaW1tZWRpYXRlbHkuXG4gICAgaWYgKHRoaXMuanVzdEVudGVyZWQpIHtcbiAgICAgIHRoaXMubGVhdmVEb25lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHB1c2hKb2IodGhpcy5sZWF2ZU5leHRUaWNrKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogVGhlIFwibmV4dFRpY2tcIiBwaGFzZSBvZiBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEubGVhdmVOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHR5cGUgPSB0aGlzLmdldENzc1RyYW5zaXRpb25UeXBlKHRoaXMubGVhdmVDbGFzcyk7XG4gIGlmICh0eXBlKSB7XG4gICAgdmFyIGV2ZW50ID0gdHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OID8gdHJhbnNpdGlvbkVuZEV2ZW50IDogYW5pbWF0aW9uRW5kRXZlbnQ7XG4gICAgdGhpcy5zZXR1cENzc0NiKGV2ZW50LCB0aGlzLmxlYXZlRG9uZSk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5sZWF2ZURvbmUoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBUaGUgXCJjbGVhbnVwXCIgcGhhc2Ugb2YgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG4gKi9cblxucCQxLmxlYXZlRG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5sZWZ0ID0gdHJ1ZTtcbiAgdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcbiAgdGhpcy5vcCgpO1xuICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuICB0aGlzLmNhbGxIb29rKCdhZnRlckxlYXZlJyk7XG4gIGlmICh0aGlzLmNiKSB0aGlzLmNiKCk7XG4gIHRoaXMub3AgPSBudWxsO1xufTtcblxuLyoqXG4gKiBDYW5jZWwgYW55IHBlbmRpbmcgY2FsbGJhY2tzIGZyb20gYSBwcmV2aW91c2x5IHJ1bm5pbmdcbiAqIGJ1dCBub3QgZmluaXNoZWQgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEuY2FuY2VsUGVuZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5vcCA9IHRoaXMuY2IgPSBudWxsO1xuICB2YXIgaGFzUGVuZGluZyA9IGZhbHNlO1xuICBpZiAodGhpcy5wZW5kaW5nQ3NzQ2IpIHtcbiAgICBoYXNQZW5kaW5nID0gdHJ1ZTtcbiAgICBvZmYodGhpcy5lbCwgdGhpcy5wZW5kaW5nQ3NzRXZlbnQsIHRoaXMucGVuZGluZ0Nzc0NiKTtcbiAgICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gbnVsbDtcbiAgfVxuICBpZiAodGhpcy5wZW5kaW5nSnNDYikge1xuICAgIGhhc1BlbmRpbmcgPSB0cnVlO1xuICAgIHRoaXMucGVuZGluZ0pzQ2IuY2FuY2VsKCk7XG4gICAgdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG4gIH1cbiAgaWYgKGhhc1BlbmRpbmcpIHtcbiAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG4gIH1cbiAgaWYgKHRoaXMuY2FuY2VsKSB7XG4gICAgdGhpcy5jYW5jZWwuY2FsbCh0aGlzLnZtLCB0aGlzLmVsKTtcbiAgICB0aGlzLmNhbmNlbCA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogQ2FsbCBhIHVzZXItcHJvdmlkZWQgc3luY2hyb25vdXMgaG9vayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5cbnAkMS5jYWxsSG9vayA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gIGlmICh0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV0pIHtcbiAgICB0aGlzLmhvb2tzW3R5cGVdLmNhbGwodGhpcy52bSwgdGhpcy5lbCk7XG4gIH1cbn07XG5cbi8qKlxuICogQ2FsbCBhIHVzZXItcHJvdmlkZWQsIHBvdGVudGlhbGx5LWFzeW5jIGhvb2sgZnVuY3Rpb24uXG4gKiBXZSBjaGVjayBmb3IgdGhlIGxlbmd0aCBvZiBhcmd1bWVudHMgdG8gc2VlIGlmIHRoZSBob29rXG4gKiBleHBlY3RzIGEgYGRvbmVgIGNhbGxiYWNrLiBJZiB0cnVlLCB0aGUgdHJhbnNpdGlvbidzIGVuZFxuICogd2lsbCBiZSBkZXRlcm1pbmVkIGJ5IHdoZW4gdGhlIHVzZXIgY2FsbHMgdGhhdCBjYWxsYmFjaztcbiAqIG90aGVyd2lzZSwgdGhlIGVuZCBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBDU1MgdHJhbnNpdGlvbiBvclxuICogYW5pbWF0aW9uLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cblxucCQxLmNhbGxIb29rV2l0aENiID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgdmFyIGhvb2sgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV07XG4gIGlmIChob29rKSB7XG4gICAgaWYgKGhvb2subGVuZ3RoID4gMSkge1xuICAgICAgdGhpcy5wZW5kaW5nSnNDYiA9IGNhbmNlbGxhYmxlKHRoaXNbdHlwZSArICdEb25lJ10pO1xuICAgIH1cbiAgICBob29rLmNhbGwodGhpcy52bSwgdGhpcy5lbCwgdGhpcy5wZW5kaW5nSnNDYik7XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IGFuIGVsZW1lbnQncyB0cmFuc2l0aW9uIHR5cGUgYmFzZWQgb24gdGhlXG4gKiBjYWxjdWxhdGVkIHN0eWxlcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY2xhc3NOYW1lXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKi9cblxucCQxLmdldENzc1RyYW5zaXRpb25UeXBlID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCF0cmFuc2l0aW9uRW5kRXZlbnQgfHxcbiAgLy8gc2tpcCBDU1MgdHJhbnNpdGlvbnMgaWYgcGFnZSBpcyBub3QgdmlzaWJsZSAtXG4gIC8vIHRoaXMgc29sdmVzIHRoZSBpc3N1ZSBvZiB0cmFuc2l0aW9uZW5kIGV2ZW50cyBub3RcbiAgLy8gZmlyaW5nIHVudGlsIHRoZSBwYWdlIGlzIHZpc2libGUgYWdhaW4uXG4gIC8vIHBhZ2VWaXNpYmlsaXR5IEFQSSBpcyBzdXBwb3J0ZWQgaW4gSUUxMCssIHNhbWUgYXNcbiAgLy8gQ1NTIHRyYW5zaXRpb25zLlxuICBkb2N1bWVudC5oaWRkZW4gfHxcbiAgLy8gZXhwbGljaXQganMtb25seSB0cmFuc2l0aW9uXG4gIHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5jc3MgPT09IGZhbHNlIHx8XG4gIC8vIGVsZW1lbnQgaXMgaGlkZGVuXG4gIGlzSGlkZGVuKHRoaXMuZWwpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciB0eXBlID0gdGhpcy50eXBlIHx8IHRoaXMudHlwZUNhY2hlW2NsYXNzTmFtZV07XG4gIGlmICh0eXBlKSByZXR1cm4gdHlwZTtcbiAgdmFyIGlubGluZVN0eWxlcyA9IHRoaXMuZWwuc3R5bGU7XG4gIHZhciBjb21wdXRlZFN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWwpO1xuICB2YXIgdHJhbnNEdXJhdGlvbiA9IGlubGluZVN0eWxlc1t0cmFuc0R1cmF0aW9uUHJvcF0gfHwgY29tcHV0ZWRTdHlsZXNbdHJhbnNEdXJhdGlvblByb3BdO1xuICBpZiAodHJhbnNEdXJhdGlvbiAmJiB0cmFuc0R1cmF0aW9uICE9PSAnMHMnKSB7XG4gICAgdHlwZSA9IFRZUEVfVFJBTlNJVElPTjtcbiAgfSBlbHNlIHtcbiAgICB2YXIgYW5pbUR1cmF0aW9uID0gaW5saW5lU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdIHx8IGNvbXB1dGVkU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdO1xuICAgIGlmIChhbmltRHVyYXRpb24gJiYgYW5pbUR1cmF0aW9uICE9PSAnMHMnKSB7XG4gICAgICB0eXBlID0gVFlQRV9BTklNQVRJT047XG4gICAgfVxuICB9XG4gIGlmICh0eXBlKSB7XG4gICAgdGhpcy50eXBlQ2FjaGVbY2xhc3NOYW1lXSA9IHR5cGU7XG4gIH1cbiAgcmV0dXJuIHR5cGU7XG59O1xuXG4vKipcbiAqIFNldHVwIGEgQ1NTIHRyYW5zaXRpb25lbmQvYW5pbWF0aW9uZW5kIGNhbGxiYWNrLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuXG5wJDEuc2V0dXBDc3NDYiA9IGZ1bmN0aW9uIChldmVudCwgY2IpIHtcbiAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSBldmVudDtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgZWwgPSB0aGlzLmVsO1xuICB2YXIgb25FbmQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBlbCkge1xuICAgICAgb2ZmKGVsLCBldmVudCwgb25FbmQpO1xuICAgICAgc2VsZi5wZW5kaW5nQ3NzRXZlbnQgPSBzZWxmLnBlbmRpbmdDc3NDYiA9IG51bGw7XG4gICAgICBpZiAoIXNlbGYucGVuZGluZ0pzQ2IgJiYgY2IpIHtcbiAgICAgICAgY2IoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIG9uKGVsLCBldmVudCwgb25FbmQpO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGhpZGRlbiAtIGluIHRoYXQgY2FzZSB3ZSBjYW4ganVzdFxuICogc2tpcCB0aGUgdHJhbnNpdGlvbiBhbGx0b2dldGhlci5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzSGlkZGVuKGVsKSB7XG4gIGlmICgvc3ZnJC8udGVzdChlbC5uYW1lc3BhY2VVUkkpKSB7XG4gICAgLy8gU1ZHIGVsZW1lbnRzIGRvIG5vdCBoYXZlIG9mZnNldChXaWR0aHxIZWlnaHQpXG4gICAgLy8gc28gd2UgbmVlZCB0byBjaGVjayB0aGUgY2xpZW50IHJlY3RcbiAgICB2YXIgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiAhKHJlY3Qud2lkdGggfHwgcmVjdC5oZWlnaHQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAhKGVsLm9mZnNldFdpZHRoIHx8IGVsLm9mZnNldEhlaWdodCB8fCBlbC5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCk7XG4gIH1cbn1cblxudmFyIHRyYW5zaXRpb24kMSA9IHtcblxuICBwcmlvcml0eTogVFJBTlNJVElPTixcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShpZCwgb2xkSWQpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIC8vIHJlc29sdmUgb24gb3duZXIgdm1cbiAgICB2YXIgaG9va3MgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3RyYW5zaXRpb25zJywgaWQpO1xuICAgIGlkID0gaWQgfHwgJ3YnO1xuICAgIG9sZElkID0gb2xkSWQgfHwgJ3YnO1xuICAgIGVsLl9fdl90cmFucyA9IG5ldyBUcmFuc2l0aW9uKGVsLCBpZCwgaG9va3MsIHRoaXMudm0pO1xuICAgIHJlbW92ZUNsYXNzKGVsLCBvbGRJZCArICctdHJhbnNpdGlvbicpO1xuICAgIGFkZENsYXNzKGVsLCBpZCArICctdHJhbnNpdGlvbicpO1xuICB9XG59O1xuXG52YXIgaW50ZXJuYWxEaXJlY3RpdmVzID0ge1xuICBzdHlsZTogc3R5bGUsXG4gICdjbGFzcyc6IHZDbGFzcyxcbiAgY29tcG9uZW50OiBjb21wb25lbnQsXG4gIHByb3A6IHByb3BEZWYsXG4gIHRyYW5zaXRpb246IHRyYW5zaXRpb24kMVxufTtcblxuLy8gc3BlY2lhbCBiaW5kaW5nIHByZWZpeGVzXG52YXIgYmluZFJFID0gL152LWJpbmQ6fF46LztcbnZhciBvblJFID0gL152LW9uOnxeQC87XG52YXIgZGlyQXR0clJFID0gL152LShbXjpdKykoPzokfDooLiopJCkvO1xudmFyIG1vZGlmaWVyUkUgPSAvXFwuW15cXC5dKy9nO1xudmFyIHRyYW5zaXRpb25SRSA9IC9eKHYtYmluZDp8Oik/dHJhbnNpdGlvbiQvO1xuXG4vLyBkZWZhdWx0IGRpcmVjdGl2ZSBwcmlvcml0eVxudmFyIERFRkFVTFRfUFJJT1JJVFkgPSAxMDAwO1xudmFyIERFRkFVTFRfVEVSTUlOQUxfUFJJT1JJVFkgPSAyMDAwO1xuXG4vKipcbiAqIENvbXBpbGUgYSB0ZW1wbGF0ZSBhbmQgcmV0dXJuIGEgcmV1c2FibGUgY29tcG9zaXRlIGxpbmtcbiAqIGZ1bmN0aW9uLCB3aGljaCByZWN1cnNpdmVseSBjb250YWlucyBtb3JlIGxpbmsgZnVuY3Rpb25zXG4gKiBpbnNpZGUuIFRoaXMgdG9wIGxldmVsIGNvbXBpbGUgZnVuY3Rpb24gd291bGQgbm9ybWFsbHlcbiAqIGJlIGNhbGxlZCBvbiBpbnN0YW5jZSByb290IG5vZGVzLCBidXQgY2FuIGFsc28gYmUgdXNlZFxuICogZm9yIHBhcnRpYWwgY29tcGlsYXRpb24gaWYgdGhlIHBhcnRpYWwgYXJndW1lbnQgaXMgdHJ1ZS5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgY29tcG9zaXRlIGxpbmsgZnVuY3Rpb24sIHdoZW4gY2FsbGVkLCB3aWxsXG4gKiByZXR1cm4gYW4gdW5saW5rIGZ1bmN0aW9uIHRoYXQgdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzXG4gKiBjcmVhdGVkIGR1cmluZyB0aGUgbGlua2luZyBwaGFzZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHBhcnRpYWxcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGUoZWwsIG9wdGlvbnMsIHBhcnRpYWwpIHtcbiAgLy8gbGluayBmdW5jdGlvbiBmb3IgdGhlIG5vZGUgaXRzZWxmLlxuICB2YXIgbm9kZUxpbmtGbiA9IHBhcnRpYWwgfHwgIW9wdGlvbnMuX2FzQ29tcG9uZW50ID8gY29tcGlsZU5vZGUoZWwsIG9wdGlvbnMpIDogbnVsbDtcbiAgLy8gbGluayBmdW5jdGlvbiBmb3IgdGhlIGNoaWxkTm9kZXNcbiAgdmFyIGNoaWxkTGlua0ZuID0gIShub2RlTGlua0ZuICYmIG5vZGVMaW5rRm4udGVybWluYWwpICYmICFpc1NjcmlwdChlbCkgJiYgZWwuaGFzQ2hpbGROb2RlcygpID8gY29tcGlsZU5vZGVMaXN0KGVsLmNoaWxkTm9kZXMsIG9wdGlvbnMpIDogbnVsbDtcblxuICAvKipcbiAgICogQSBjb21wb3NpdGUgbGlua2VyIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbiBhIGFscmVhZHlcbiAgICogY29tcGlsZWQgcGllY2Ugb2YgRE9NLCB3aGljaCBpbnN0YW50aWF0ZXMgYWxsIGRpcmVjdGl2ZVxuICAgKiBpbnN0YW5jZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAgICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIGhvc3Qgdm0gb2YgdHJhbnNjbHVkZWQgY29udGVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIGxpbmsgY29udGV4dCBmcmFnbWVudFxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gICAqL1xuXG4gIHJldHVybiBmdW5jdGlvbiBjb21wb3NpdGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIC8vIGNhY2hlIGNoaWxkTm9kZXMgYmVmb3JlIGxpbmtpbmcgcGFyZW50LCBmaXggIzY1N1xuICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShlbC5jaGlsZE5vZGVzKTtcbiAgICAvLyBsaW5rXG4gICAgdmFyIGRpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiBjb21wb3NpdGVMaW5rQ2FwdHVyZXIoKSB7XG4gICAgICBpZiAobm9kZUxpbmtGbikgbm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICAgIGlmIChjaGlsZExpbmtGbikgY2hpbGRMaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICB9LCB2bSk7XG4gICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgZGlycyk7XG4gIH07XG59XG5cbi8qKlxuICogQXBwbHkgYSBsaW5rZXIgdG8gYSB2bS9lbGVtZW50IHBhaXIgYW5kIGNhcHR1cmUgdGhlXG4gKiBkaXJlY3RpdmVzIGNyZWF0ZWQgZHVyaW5nIHRoZSBwcm9jZXNzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGxpbmtlclxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuZnVuY3Rpb24gbGlua0FuZENhcHR1cmUobGlua2VyLCB2bSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgICAvLyByZXNldCBkaXJlY3RpdmVzIGJlZm9yZSBldmVyeSBjYXB0dXJlIGluIHByb2R1Y3Rpb25cbiAgICAvLyBtb2RlLCBzbyB0aGF0IHdoZW4gdW5saW5raW5nIHdlIGRvbid0IG5lZWQgdG8gc3BsaWNlXG4gICAgLy8gdGhlbSBvdXQgKHdoaWNoIHR1cm5zIG91dCB0byBiZSBhIHBlcmYgaGl0KS5cbiAgICAvLyB0aGV5IGFyZSBrZXB0IGluIGRldmVsb3BtZW50IG1vZGUgYmVjYXVzZSB0aGV5IGFyZVxuICAgIC8vIHVzZWZ1bCBmb3IgVnVlJ3Mgb3duIHRlc3RzLlxuICAgIHZtLl9kaXJlY3RpdmVzID0gW107XG4gIH1cbiAgdmFyIG9yaWdpbmFsRGlyQ291bnQgPSB2bS5fZGlyZWN0aXZlcy5sZW5ndGg7XG4gIGxpbmtlcigpO1xuICB2YXIgZGlycyA9IHZtLl9kaXJlY3RpdmVzLnNsaWNlKG9yaWdpbmFsRGlyQ291bnQpO1xuICBkaXJzLnNvcnQoZGlyZWN0aXZlQ29tcGFyYXRvcik7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gZGlycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBkaXJzW2ldLl9iaW5kKCk7XG4gIH1cbiAgcmV0dXJuIGRpcnM7XG59XG5cbi8qKlxuICogRGlyZWN0aXZlIHByaW9yaXR5IHNvcnQgY29tcGFyYXRvclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhXG4gKiBAcGFyYW0ge09iamVjdH0gYlxuICovXG5cbmZ1bmN0aW9uIGRpcmVjdGl2ZUNvbXBhcmF0b3IoYSwgYikge1xuICBhID0gYS5kZXNjcmlwdG9yLmRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZO1xuICBiID0gYi5kZXNjcmlwdG9yLmRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZO1xuICByZXR1cm4gYSA+IGIgPyAtMSA6IGEgPT09IGIgPyAwIDogMTtcbn1cblxuLyoqXG4gKiBMaW5rZXIgZnVuY3Rpb25zIHJldHVybiBhbiB1bmxpbmsgZnVuY3Rpb24gdGhhdFxuICogdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzIGluc3RhbmNlcyBnZW5lcmF0ZWQgZHVyaW5nXG4gKiB0aGUgcHJvY2Vzcy5cbiAqXG4gKiBXZSBjcmVhdGUgdW5saW5rIGZ1bmN0aW9ucyB3aXRoIG9ubHkgdGhlIG5lY2Vzc2FyeVxuICogaW5mb3JtYXRpb24gdG8gYXZvaWQgcmV0YWluaW5nIGFkZGl0aW9uYWwgY2xvc3VyZXMuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0FycmF5fSBkaXJzXG4gKiBAcGFyYW0ge1Z1ZX0gW2NvbnRleHRdXG4gKiBAcGFyYW0ge0FycmF5fSBbY29udGV4dERpcnNdXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBtYWtlVW5saW5rRm4odm0sIGRpcnMsIGNvbnRleHQsIGNvbnRleHREaXJzKSB7XG4gIGZ1bmN0aW9uIHVubGluayhkZXN0cm95aW5nKSB7XG4gICAgdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKTtcbiAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0RGlycykge1xuICAgICAgdGVhcmRvd25EaXJzKGNvbnRleHQsIGNvbnRleHREaXJzKTtcbiAgICB9XG4gIH1cbiAgLy8gZXhwb3NlIGxpbmtlZCBkaXJlY3RpdmVzXG4gIHVubGluay5kaXJzID0gZGlycztcbiAgcmV0dXJuIHVubGluaztcbn1cblxuLyoqXG4gKiBUZWFyZG93biBwYXJ0aWFsIGxpbmtlZCBkaXJlY3RpdmVzLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtBcnJheX0gZGlyc1xuICogQHBhcmFtIHtCb29sZWFufSBkZXN0cm95aW5nXG4gKi9cblxuZnVuY3Rpb24gdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKSB7XG4gIHZhciBpID0gZGlycy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBkaXJzW2ldLl90ZWFyZG93bigpO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFkZXN0cm95aW5nKSB7XG4gICAgICB2bS5fZGlyZWN0aXZlcy4kcmVtb3ZlKGRpcnNbaV0pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENvbXBpbGUgbGluayBwcm9wcyBvbiBhbiBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1xuICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVBbmRMaW5rUHJvcHModm0sIGVsLCBwcm9wcywgc2NvcGUpIHtcbiAgdmFyIHByb3BzTGlua0ZuID0gY29tcGlsZVByb3BzKGVsLCBwcm9wcywgdm0pO1xuICB2YXIgcHJvcERpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG4gICAgcHJvcHNMaW5rRm4odm0sIHNjb3BlKTtcbiAgfSwgdm0pO1xuICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBwcm9wRGlycyk7XG59XG5cbi8qKlxuICogQ29tcGlsZSB0aGUgcm9vdCBlbGVtZW50IG9mIGFuIGluc3RhbmNlLlxuICpcbiAqIDEuIGF0dHJzIG9uIGNvbnRleHQgY29udGFpbmVyIChjb250ZXh0IHNjb3BlKVxuICogMi4gYXR0cnMgb24gdGhlIGNvbXBvbmVudCB0ZW1wbGF0ZSByb290IG5vZGUsIGlmXG4gKiAgICByZXBsYWNlOnRydWUgKGNoaWxkIHNjb3BlKVxuICpcbiAqIElmIHRoaXMgaXMgYSBmcmFnbWVudCBpbnN0YW5jZSwgd2Ugb25seSBuZWVkIHRvIGNvbXBpbGUgMS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRPcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlUm9vdChlbCwgb3B0aW9ucywgY29udGV4dE9wdGlvbnMpIHtcbiAgdmFyIGNvbnRhaW5lckF0dHJzID0gb3B0aW9ucy5fY29udGFpbmVyQXR0cnM7XG4gIHZhciByZXBsYWNlckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRycztcbiAgdmFyIGNvbnRleHRMaW5rRm4sIHJlcGxhY2VyTGlua0ZuO1xuXG4gIC8vIG9ubHkgbmVlZCB0byBjb21waWxlIG90aGVyIGF0dHJpYnV0ZXMgZm9yXG4gIC8vIG5vbi1mcmFnbWVudCBpbnN0YW5jZXNcbiAgaWYgKGVsLm5vZGVUeXBlICE9PSAxMSkge1xuICAgIC8vIGZvciBjb21wb25lbnRzLCBjb250YWluZXIgYW5kIHJlcGxhY2VyIG5lZWQgdG8gYmVcbiAgICAvLyBjb21waWxlZCBzZXBhcmF0ZWx5IGFuZCBsaW5rZWQgaW4gZGlmZmVyZW50IHNjb3Blcy5cbiAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQpIHtcbiAgICAgIC8vIDIuIGNvbnRhaW5lciBhdHRyaWJ1dGVzXG4gICAgICBpZiAoY29udGFpbmVyQXR0cnMgJiYgY29udGV4dE9wdGlvbnMpIHtcbiAgICAgICAgY29udGV4dExpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGNvbnRhaW5lckF0dHJzLCBjb250ZXh0T3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBpZiAocmVwbGFjZXJBdHRycykge1xuICAgICAgICAvLyAzLiByZXBsYWNlciBhdHRyaWJ1dGVzXG4gICAgICAgIHJlcGxhY2VyTGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMocmVwbGFjZXJBdHRycywgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vbi1jb21wb25lbnQsIGp1c3QgY29tcGlsZSBhcyBhIG5vcm1hbCBlbGVtZW50LlxuICAgICAgcmVwbGFjZXJMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhlbC5hdHRyaWJ1dGVzLCBvcHRpb25zKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb250YWluZXJBdHRycykge1xuICAgIC8vIHdhcm4gY29udGFpbmVyIGRpcmVjdGl2ZXMgZm9yIGZyYWdtZW50IGluc3RhbmNlc1xuICAgIHZhciBuYW1lcyA9IGNvbnRhaW5lckF0dHJzLmZpbHRlcihmdW5jdGlvbiAoYXR0cikge1xuICAgICAgLy8gYWxsb3cgdnVlLWxvYWRlci92dWVpZnkgc2NvcGVkIGNzcyBhdHRyaWJ1dGVzXG4gICAgICByZXR1cm4gYXR0ci5uYW1lLmluZGV4T2YoJ192LScpIDwgMCAmJlxuICAgICAgLy8gYWxsb3cgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAhb25SRS50ZXN0KGF0dHIubmFtZSkgJiZcbiAgICAgIC8vIGFsbG93IHNsb3RzXG4gICAgICBhdHRyLm5hbWUgIT09ICdzbG90JztcbiAgICB9KS5tYXAoZnVuY3Rpb24gKGF0dHIpIHtcbiAgICAgIHJldHVybiAnXCInICsgYXR0ci5uYW1lICsgJ1wiJztcbiAgICB9KTtcbiAgICBpZiAobmFtZXMubGVuZ3RoKSB7XG4gICAgICB2YXIgcGx1cmFsID0gbmFtZXMubGVuZ3RoID4gMTtcbiAgICAgIHdhcm4oJ0F0dHJpYnV0ZScgKyAocGx1cmFsID8gJ3MgJyA6ICcgJykgKyBuYW1lcy5qb2luKCcsICcpICsgKHBsdXJhbCA/ICcgYXJlJyA6ICcgaXMnKSArICcgaWdub3JlZCBvbiBjb21wb25lbnQgJyArICc8JyArIG9wdGlvbnMuZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICsgJz4gYmVjYXVzZSAnICsgJ3RoZSBjb21wb25lbnQgaXMgYSBmcmFnbWVudCBpbnN0YW5jZTogJyArICdodHRwOi8vdnVlanMub3JnL2d1aWRlL2NvbXBvbmVudHMuaHRtbCNGcmFnbWVudC1JbnN0YW5jZScpO1xuICAgIH1cbiAgfVxuXG4gIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRycyA9IG51bGw7XG4gIHJldHVybiBmdW5jdGlvbiByb290TGlua0ZuKHZtLCBlbCwgc2NvcGUpIHtcbiAgICAvLyBsaW5rIGNvbnRleHQgc2NvcGUgZGlyc1xuICAgIHZhciBjb250ZXh0ID0gdm0uX2NvbnRleHQ7XG4gICAgdmFyIGNvbnRleHREaXJzO1xuICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHRMaW5rRm4pIHtcbiAgICAgIGNvbnRleHREaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBjb250ZXh0TGlua0ZuKGNvbnRleHQsIGVsLCBudWxsLCBzY29wZSk7XG4gICAgICB9LCBjb250ZXh0KTtcbiAgICB9XG5cbiAgICAvLyBsaW5rIHNlbGZcbiAgICB2YXIgc2VsZkRpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAocmVwbGFjZXJMaW5rRm4pIHJlcGxhY2VyTGlua0ZuKHZtLCBlbCk7XG4gICAgfSwgdm0pO1xuXG4gICAgLy8gcmV0dXJuIHRoZSB1bmxpbmsgZnVuY3Rpb24gdGhhdCB0ZWFyc2Rvd24gY29udGV4dFxuICAgIC8vIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuICAgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIHNlbGZEaXJzLCBjb250ZXh0LCBjb250ZXh0RGlycyk7XG4gIH07XG59XG5cbi8qKlxuICogQ29tcGlsZSBhIG5vZGUgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4gYmFzZWQgb24gdGhlXG4gKiBub2RlIHR5cGUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258bnVsbH1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKSB7XG4gIHZhciB0eXBlID0gbm9kZS5ub2RlVHlwZTtcbiAgaWYgKHR5cGUgPT09IDEgJiYgIWlzU2NyaXB0KG5vZGUpKSB7XG4gICAgcmV0dXJuIGNvbXBpbGVFbGVtZW50KG5vZGUsIG9wdGlvbnMpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IDMgJiYgbm9kZS5kYXRhLnRyaW0oKSkge1xuICAgIHJldHVybiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBDb21waWxlIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZUVsZW1lbnQoZWwsIG9wdGlvbnMpIHtcbiAgLy8gcHJlcHJvY2VzcyB0ZXh0YXJlYXMuXG4gIC8vIHRleHRhcmVhIHRyZWF0cyBpdHMgdGV4dCBjb250ZW50IGFzIHRoZSBpbml0aWFsIHZhbHVlLlxuICAvLyBqdXN0IGJpbmQgaXQgYXMgYW4gYXR0ciBkaXJlY3RpdmUgZm9yIHZhbHVlLlxuICBpZiAoZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQoZWwudmFsdWUpO1xuICAgIGlmICh0b2tlbnMpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnOnZhbHVlJywgdG9rZW5zVG9FeHAodG9rZW5zKSk7XG4gICAgICBlbC52YWx1ZSA9ICcnO1xuICAgIH1cbiAgfVxuICB2YXIgbGlua0ZuO1xuICB2YXIgaGFzQXR0cnMgPSBlbC5oYXNBdHRyaWJ1dGVzKCk7XG4gIHZhciBhdHRycyA9IGhhc0F0dHJzICYmIHRvQXJyYXkoZWwuYXR0cmlidXRlcyk7XG4gIC8vIGNoZWNrIHRlcm1pbmFsIGRpcmVjdGl2ZXMgKGZvciAmIGlmKVxuICBpZiAoaGFzQXR0cnMpIHtcbiAgICBsaW5rRm4gPSBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyhlbCwgYXR0cnMsIG9wdGlvbnMpO1xuICB9XG4gIC8vIGNoZWNrIGVsZW1lbnQgZGlyZWN0aXZlc1xuICBpZiAoIWxpbmtGbikge1xuICAgIGxpbmtGbiA9IGNoZWNrRWxlbWVudERpcmVjdGl2ZXMoZWwsIG9wdGlvbnMpO1xuICB9XG4gIC8vIGNoZWNrIGNvbXBvbmVudFxuICBpZiAoIWxpbmtGbikge1xuICAgIGxpbmtGbiA9IGNoZWNrQ29tcG9uZW50KGVsLCBvcHRpb25zKTtcbiAgfVxuICAvLyBub3JtYWwgZGlyZWN0aXZlc1xuICBpZiAoIWxpbmtGbiAmJiBoYXNBdHRycykge1xuICAgIGxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGF0dHJzLCBvcHRpb25zKTtcbiAgfVxuICByZXR1cm4gbGlua0ZuO1xufVxuXG4vKipcbiAqIENvbXBpbGUgYSB0ZXh0Tm9kZSBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbi5cbiAqXG4gKiBAcGFyYW0ge1RleHROb2RlfSBub2RlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258bnVsbH0gdGV4dE5vZGVMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucykge1xuICAvLyBza2lwIG1hcmtlZCB0ZXh0IG5vZGVzXG4gIGlmIChub2RlLl9za2lwKSB7XG4gICAgcmV0dXJuIHJlbW92ZVRleHQ7XG4gIH1cblxuICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KG5vZGUud2hvbGVUZXh0KTtcbiAgaWYgKCF0b2tlbnMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIG1hcmsgYWRqYWNlbnQgdGV4dCBub2RlcyBhcyBza2lwcGVkLFxuICAvLyBiZWNhdXNlIHdlIGFyZSB1c2luZyBub2RlLndob2xlVGV4dCB0byBjb21waWxlXG4gIC8vIGFsbCBhZGphY2VudCB0ZXh0IG5vZGVzIHRvZ2V0aGVyLiBUaGlzIGZpeGVzXG4gIC8vIGlzc3VlcyBpbiBJRSB3aGVyZSBzb21ldGltZXMgaXQgc3BsaXRzIHVwIGEgc2luZ2xlXG4gIC8vIHRleHQgbm9kZSBpbnRvIG11bHRpcGxlIG9uZXMuXG4gIHZhciBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcbiAgd2hpbGUgKG5leHQgJiYgbmV4dC5ub2RlVHlwZSA9PT0gMykge1xuICAgIG5leHQuX3NraXAgPSB0cnVlO1xuICAgIG5leHQgPSBuZXh0Lm5leHRTaWJsaW5nO1xuICB9XG5cbiAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIHZhciBlbCwgdG9rZW47XG4gIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHRva2VuID0gdG9rZW5zW2ldO1xuICAgIGVsID0gdG9rZW4udGFnID8gcHJvY2Vzc1RleHRUb2tlbih0b2tlbiwgb3B0aW9ucykgOiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0b2tlbi52YWx1ZSk7XG4gICAgZnJhZy5hcHBlbmRDaGlsZChlbCk7XG4gIH1cbiAgcmV0dXJuIG1ha2VUZXh0Tm9kZUxpbmtGbih0b2tlbnMsIGZyYWcsIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIExpbmtlciBmb3IgYW4gc2tpcHBlZCB0ZXh0IG5vZGUuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge1RleHR9IG5vZGVcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVUZXh0KHZtLCBub2RlKSB7XG4gIHJlbW92ZShub2RlKTtcbn1cblxuLyoqXG4gKiBQcm9jZXNzIGEgc2luZ2xlIHRleHQgdG9rZW4uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRva2VuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7Tm9kZX1cbiAqL1xuXG5mdW5jdGlvbiBwcm9jZXNzVGV4dFRva2VuKHRva2VuLCBvcHRpb25zKSB7XG4gIHZhciBlbDtcbiAgaWYgKHRva2VuLm9uZVRpbWUpIHtcbiAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRva2VuLnZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodG9rZW4uaHRtbCkge1xuICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KCd2LWh0bWwnKTtcbiAgICAgIHNldFRva2VuVHlwZSgnaHRtbCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJRSB3aWxsIGNsZWFuIHVwIGVtcHR5IHRleHROb2RlcyBkdXJpbmdcbiAgICAgIC8vIGZyYWcuY2xvbmVOb2RlKHRydWUpLCBzbyB3ZSBoYXZlIHRvIGdpdmUgaXRcbiAgICAgIC8vIHNvbWV0aGluZyBoZXJlLi4uXG4gICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcgJyk7XG4gICAgICBzZXRUb2tlblR5cGUoJ3RleHQnKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gc2V0VG9rZW5UeXBlKHR5cGUpIHtcbiAgICBpZiAodG9rZW4uZGVzY3JpcHRvcikgcmV0dXJuO1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh0b2tlbi52YWx1ZSk7XG4gICAgdG9rZW4uZGVzY3JpcHRvciA9IHtcbiAgICAgIG5hbWU6IHR5cGUsXG4gICAgICBkZWY6IGRpcmVjdGl2ZXNbdHlwZV0sXG4gICAgICBleHByZXNzaW9uOiBwYXJzZWQuZXhwcmVzc2lvbixcbiAgICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzXG4gICAgfTtcbiAgfVxuICByZXR1cm4gZWw7XG59XG5cbi8qKlxuICogQnVpbGQgYSBmdW5jdGlvbiB0aGF0IHByb2Nlc3NlcyBhIHRleHROb2RlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gdG9rZW5zXG4gKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcbiAqL1xuXG5mdW5jdGlvbiBtYWtlVGV4dE5vZGVMaW5rRm4odG9rZW5zLCBmcmFnKSB7XG4gIHJldHVybiBmdW5jdGlvbiB0ZXh0Tm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlKSB7XG4gICAgdmFyIGZyYWdDbG9uZSA9IGZyYWcuY2xvbmVOb2RlKHRydWUpO1xuICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShmcmFnQ2xvbmUuY2hpbGROb2Rlcyk7XG4gICAgdmFyIHRva2VuLCB2YWx1ZSwgbm9kZTtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRva2Vucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHRva2VuID0gdG9rZW5zW2ldO1xuICAgICAgdmFsdWUgPSB0b2tlbi52YWx1ZTtcbiAgICAgIGlmICh0b2tlbi50YWcpIHtcbiAgICAgICAgbm9kZSA9IGNoaWxkTm9kZXNbaV07XG4gICAgICAgIGlmICh0b2tlbi5vbmVUaW1lKSB7XG4gICAgICAgICAgdmFsdWUgPSAoc2NvcGUgfHwgdm0pLiRldmFsKHZhbHVlKTtcbiAgICAgICAgICBpZiAodG9rZW4uaHRtbCkge1xuICAgICAgICAgICAgcmVwbGFjZShub2RlLCBwYXJzZVRlbXBsYXRlKHZhbHVlLCB0cnVlKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5vZGUuZGF0YSA9IF90b1N0cmluZyh2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLl9iaW5kRGlyKHRva2VuLmRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXBsYWNlKGVsLCBmcmFnQ2xvbmUpO1xuICB9O1xufVxuXG4vKipcbiAqIENvbXBpbGUgYSBub2RlIGxpc3QgYW5kIHJldHVybiBhIGNoaWxkTGlua0ZuLlxuICpcbiAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVMaXN0XG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVOb2RlTGlzdChub2RlTGlzdCwgb3B0aW9ucykge1xuICB2YXIgbGlua0ZucyA9IFtdO1xuICB2YXIgbm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4sIG5vZGU7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZUxpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgbm9kZSA9IG5vZGVMaXN0W2ldO1xuICAgIG5vZGVMaW5rRm4gPSBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKTtcbiAgICBjaGlsZExpbmtGbiA9ICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJiBub2RlLnRhZ05hbWUgIT09ICdTQ1JJUFQnICYmIG5vZGUuaGFzQ2hpbGROb2RlcygpID8gY29tcGlsZU5vZGVMaXN0KG5vZGUuY2hpbGROb2Rlcywgb3B0aW9ucykgOiBudWxsO1xuICAgIGxpbmtGbnMucHVzaChub2RlTGlua0ZuLCBjaGlsZExpbmtGbik7XG4gIH1cbiAgcmV0dXJuIGxpbmtGbnMubGVuZ3RoID8gbWFrZUNoaWxkTGlua0ZuKGxpbmtGbnMpIDogbnVsbDtcbn1cblxuLyoqXG4gKiBNYWtlIGEgY2hpbGQgbGluayBmdW5jdGlvbiBmb3IgYSBub2RlJ3MgY2hpbGROb2Rlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PEZ1bmN0aW9uPn0gbGlua0Zuc1xuICogQHJldHVybiB7RnVuY3Rpb259IGNoaWxkTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gbWFrZUNoaWxkTGlua0ZuKGxpbmtGbnMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGNoaWxkTGlua0ZuKHZtLCBub2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICB2YXIgbm9kZSwgbm9kZUxpbmtGbiwgY2hpbGRyZW5MaW5rRm47XG4gICAgZm9yICh2YXIgaSA9IDAsIG4gPSAwLCBsID0gbGlua0Zucy5sZW5ndGg7IGkgPCBsOyBuKyspIHtcbiAgICAgIG5vZGUgPSBub2Rlc1tuXTtcbiAgICAgIG5vZGVMaW5rRm4gPSBsaW5rRm5zW2krK107XG4gICAgICBjaGlsZHJlbkxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcbiAgICAgIC8vIGNhY2hlIGNoaWxkTm9kZXMgYmVmb3JlIGxpbmtpbmcgcGFyZW50LCBmaXggIzY1N1xuICAgICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KG5vZGUuY2hpbGROb2Rlcyk7XG4gICAgICBpZiAobm9kZUxpbmtGbikge1xuICAgICAgICBub2RlTGlua0ZuKHZtLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgICB9XG4gICAgICBpZiAoY2hpbGRyZW5MaW5rRm4pIHtcbiAgICAgICAgY2hpbGRyZW5MaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2sgZm9yIGVsZW1lbnQgZGlyZWN0aXZlcyAoY3VzdG9tIGVsZW1lbnRzIHRoYXQgc2hvdWxkXG4gKiBiZSByZXNvdmxlZCBhcyB0ZXJtaW5hbCBkaXJlY3RpdmVzKS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5cbmZ1bmN0aW9uIGNoZWNrRWxlbWVudERpcmVjdGl2ZXMoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgaWYgKGNvbW1vblRhZ1JFLnRlc3QodGFnKSkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgZGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdlbGVtZW50RGlyZWN0aXZlcycsIHRhZyk7XG4gIGlmIChkZWYpIHtcbiAgICByZXR1cm4gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgdGFnLCAnJywgb3B0aW9ucywgZGVmKTtcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSBjb21wb25lbnQuIElmIHllcywgcmV0dXJuXG4gKiBhIGNvbXBvbmVudCBsaW5rIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gY2hlY2tDb21wb25lbnQoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIGNvbXBvbmVudCA9IGNoZWNrQ29tcG9uZW50QXR0cihlbCwgb3B0aW9ucyk7XG4gIGlmIChjb21wb25lbnQpIHtcbiAgICB2YXIgcmVmID0gZmluZFJlZihlbCk7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSB7XG4gICAgICBuYW1lOiAnY29tcG9uZW50JyxcbiAgICAgIHJlZjogcmVmLFxuICAgICAgZXhwcmVzc2lvbjogY29tcG9uZW50LmlkLFxuICAgICAgZGVmOiBpbnRlcm5hbERpcmVjdGl2ZXMuY29tcG9uZW50LFxuICAgICAgbW9kaWZpZXJzOiB7XG4gICAgICAgIGxpdGVyYWw6ICFjb21wb25lbnQuZHluYW1pY1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIGNvbXBvbmVudExpbmtGbiA9IGZ1bmN0aW9uIGNvbXBvbmVudExpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgICBpZiAocmVmKSB7XG4gICAgICAgIGRlZmluZVJlYWN0aXZlKChzY29wZSB8fCB2bSkuJHJlZnMsIHJlZiwgbnVsbCk7XG4gICAgICB9XG4gICAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgIH07XG4gICAgY29tcG9uZW50TGlua0ZuLnRlcm1pbmFsID0gdHJ1ZTtcbiAgICByZXR1cm4gY29tcG9uZW50TGlua0ZuO1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgYW4gZWxlbWVudCBmb3IgdGVybWluYWwgZGlyZWN0aXZlcyBpbiBmaXhlZCBvcmRlci5cbiAqIElmIGl0IGZpbmRzIG9uZSwgcmV0dXJuIGEgdGVybWluYWwgbGluayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0FycmF5fSBhdHRyc1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0ZXJtaW5hbExpbmtGblxuICovXG5cbmZ1bmN0aW9uIGNoZWNrVGVybWluYWxEaXJlY3RpdmVzKGVsLCBhdHRycywgb3B0aW9ucykge1xuICAvLyBza2lwIHYtcHJlXG4gIGlmIChnZXRBdHRyKGVsLCAndi1wcmUnKSAhPT0gbnVsbCkge1xuICAgIHJldHVybiBza2lwO1xuICB9XG4gIC8vIHNraXAgdi1lbHNlIGJsb2NrLCBidXQgb25seSBpZiBmb2xsb3dpbmcgdi1pZlxuICBpZiAoZWwuaGFzQXR0cmlidXRlKCd2LWVsc2UnKSkge1xuICAgIHZhciBwcmV2ID0gZWwucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICBpZiAocHJldiAmJiBwcmV2Lmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG4gICAgICByZXR1cm4gc2tpcDtcbiAgICB9XG4gIH1cblxuICB2YXIgYXR0ciwgbmFtZSwgdmFsdWUsIG1vZGlmaWVycywgbWF0Y2hlZCwgZGlyTmFtZSwgcmF3TmFtZSwgYXJnLCBkZWYsIHRlcm1EZWY7XG4gIGZvciAodmFyIGkgPSAwLCBqID0gYXR0cnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgYXR0ciA9IGF0dHJzW2ldO1xuICAgIG5hbWUgPSBhdHRyLm5hbWUucmVwbGFjZShtb2RpZmllclJFLCAnJyk7XG4gICAgaWYgKG1hdGNoZWQgPSBuYW1lLm1hdGNoKGRpckF0dHJSRSkpIHtcbiAgICAgIGRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZGlyZWN0aXZlcycsIG1hdGNoZWRbMV0pO1xuICAgICAgaWYgKGRlZiAmJiBkZWYudGVybWluYWwpIHtcbiAgICAgICAgaWYgKCF0ZXJtRGVmIHx8IChkZWYucHJpb3JpdHkgfHwgREVGQVVMVF9URVJNSU5BTF9QUklPUklUWSkgPiB0ZXJtRGVmLnByaW9yaXR5KSB7XG4gICAgICAgICAgdGVybURlZiA9IGRlZjtcbiAgICAgICAgICByYXdOYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKGF0dHIubmFtZSk7XG4gICAgICAgICAgdmFsdWUgPSBhdHRyLnZhbHVlO1xuICAgICAgICAgIGRpck5hbWUgPSBtYXRjaGVkWzFdO1xuICAgICAgICAgIGFyZyA9IG1hdGNoZWRbMl07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAodGVybURlZikge1xuICAgIHJldHVybiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCBkaXJOYW1lLCB2YWx1ZSwgb3B0aW9ucywgdGVybURlZiwgcmF3TmFtZSwgYXJnLCBtb2RpZmllcnMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNraXAoKSB7fVxuc2tpcC50ZXJtaW5hbCA9IHRydWU7XG5cbi8qKlxuICogQnVpbGQgYSBub2RlIGxpbmsgZnVuY3Rpb24gZm9yIGEgdGVybWluYWwgZGlyZWN0aXZlLlxuICogQSB0ZXJtaW5hbCBsaW5rIGZ1bmN0aW9uIHRlcm1pbmF0ZXMgdGhlIGN1cnJlbnRcbiAqIGNvbXBpbGF0aW9uIHJlY3Vyc2lvbiBhbmQgaGFuZGxlcyBjb21waWxhdGlvbiBvZiB0aGVcbiAqIHN1YnRyZWUgaW4gdGhlIGRpcmVjdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gZGlyTmFtZVxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtPYmplY3R9IGRlZlxuICogQHBhcmFtIHtTdHJpbmd9IFtyYXdOYW1lXVxuICogQHBhcmFtIHtTdHJpbmd9IFthcmddXG4gKiBAcGFyYW0ge09iamVjdH0gW21vZGlmaWVyc11cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0ZXJtaW5hbExpbmtGblxuICovXG5cbmZ1bmN0aW9uIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIGRpck5hbWUsIHZhbHVlLCBvcHRpb25zLCBkZWYsIHJhd05hbWUsIGFyZywgbW9kaWZpZXJzKSB7XG4gIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG4gIHZhciBkZXNjcmlwdG9yID0ge1xuICAgIG5hbWU6IGRpck5hbWUsXG4gICAgYXJnOiBhcmcsXG4gICAgZXhwcmVzc2lvbjogcGFyc2VkLmV4cHJlc3Npb24sXG4gICAgZmlsdGVyczogcGFyc2VkLmZpbHRlcnMsXG4gICAgcmF3OiB2YWx1ZSxcbiAgICBhdHRyOiByYXdOYW1lLFxuICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLFxuICAgIGRlZjogZGVmXG4gIH07XG4gIC8vIGNoZWNrIHJlZiBmb3Igdi1mb3IgYW5kIHJvdXRlci12aWV3XG4gIGlmIChkaXJOYW1lID09PSAnZm9yJyB8fCBkaXJOYW1lID09PSAncm91dGVyLXZpZXcnKSB7XG4gICAgZGVzY3JpcHRvci5yZWYgPSBmaW5kUmVmKGVsKTtcbiAgfVxuICB2YXIgZm4gPSBmdW5jdGlvbiB0ZXJtaW5hbE5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIGlmIChkZXNjcmlwdG9yLnJlZikge1xuICAgICAgZGVmaW5lUmVhY3RpdmUoKHNjb3BlIHx8IHZtKS4kcmVmcywgZGVzY3JpcHRvci5yZWYsIG51bGwpO1xuICAgIH1cbiAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICB9O1xuICBmbi50ZXJtaW5hbCA9IHRydWU7XG4gIHJldHVybiBmbjtcbn1cblxuLyoqXG4gKiBDb21waWxlIHRoZSBkaXJlY3RpdmVzIG9uIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIGxpbmtlci5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fE5hbWVkTm9kZU1hcH0gYXR0cnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlRGlyZWN0aXZlcyhhdHRycywgb3B0aW9ucykge1xuICB2YXIgaSA9IGF0dHJzLmxlbmd0aDtcbiAgdmFyIGRpcnMgPSBbXTtcbiAgdmFyIGF0dHIsIG5hbWUsIHZhbHVlLCByYXdOYW1lLCByYXdWYWx1ZSwgZGlyTmFtZSwgYXJnLCBtb2RpZmllcnMsIGRpckRlZiwgdG9rZW5zLCBtYXRjaGVkO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgYXR0ciA9IGF0dHJzW2ldO1xuICAgIG5hbWUgPSByYXdOYW1lID0gYXR0ci5uYW1lO1xuICAgIHZhbHVlID0gcmF3VmFsdWUgPSBhdHRyLnZhbHVlO1xuICAgIHRva2VucyA9IHBhcnNlVGV4dCh2YWx1ZSk7XG4gICAgLy8gcmVzZXQgYXJnXG4gICAgYXJnID0gbnVsbDtcbiAgICAvLyBjaGVjayBtb2RpZmllcnNcbiAgICBtb2RpZmllcnMgPSBwYXJzZU1vZGlmaWVycyhuYW1lKTtcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKTtcblxuICAgIC8vIGF0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uc1xuICAgIGlmICh0b2tlbnMpIHtcbiAgICAgIHZhbHVlID0gdG9rZW5zVG9FeHAodG9rZW5zKTtcbiAgICAgIGFyZyA9IG5hbWU7XG4gICAgICBwdXNoRGlyKCdiaW5kJywgZGlyZWN0aXZlcy5iaW5kLCB0b2tlbnMpO1xuICAgICAgLy8gd2FybiBhZ2FpbnN0IG1peGluZyBtdXN0YWNoZXMgd2l0aCB2LWJpbmRcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmIChuYW1lID09PSAnY2xhc3MnICYmIEFycmF5LnByb3RvdHlwZS5zb21lLmNhbGwoYXR0cnMsIGZ1bmN0aW9uIChhdHRyKSB7XG4gICAgICAgICAgcmV0dXJuIGF0dHIubmFtZSA9PT0gJzpjbGFzcycgfHwgYXR0ci5uYW1lID09PSAndi1iaW5kOmNsYXNzJztcbiAgICAgICAgfSkpIHtcbiAgICAgICAgICB3YXJuKCdjbGFzcz1cIicgKyByYXdWYWx1ZSArICdcIjogRG8gbm90IG1peCBtdXN0YWNoZSBpbnRlcnBvbGF0aW9uICcgKyAnYW5kIHYtYmluZCBmb3IgXCJjbGFzc1wiIG9uIHRoZSBzYW1lIGVsZW1lbnQuIFVzZSBvbmUgb3IgdGhlIG90aGVyLicsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlXG5cbiAgICAgIC8vIHNwZWNpYWwgYXR0cmlidXRlOiB0cmFuc2l0aW9uXG4gICAgICBpZiAodHJhbnNpdGlvblJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgbW9kaWZpZXJzLmxpdGVyYWwgPSAhYmluZFJFLnRlc3QobmFtZSk7XG4gICAgICAgIHB1c2hEaXIoJ3RyYW5zaXRpb24nLCBpbnRlcm5hbERpcmVjdGl2ZXMudHJhbnNpdGlvbik7XG4gICAgICB9IGVsc2VcblxuICAgICAgICAvLyBldmVudCBoYW5kbGVyc1xuICAgICAgICBpZiAob25SRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgICAgYXJnID0gbmFtZS5yZXBsYWNlKG9uUkUsICcnKTtcbiAgICAgICAgICBwdXNoRGlyKCdvbicsIGRpcmVjdGl2ZXMub24pO1xuICAgICAgICB9IGVsc2VcblxuICAgICAgICAgIC8vIGF0dHJpYnV0ZSBiaW5kaW5nc1xuICAgICAgICAgIGlmIChiaW5kUkUudGVzdChuYW1lKSkge1xuICAgICAgICAgICAgZGlyTmFtZSA9IG5hbWUucmVwbGFjZShiaW5kUkUsICcnKTtcbiAgICAgICAgICAgIGlmIChkaXJOYW1lID09PSAnc3R5bGUnIHx8IGRpck5hbWUgPT09ICdjbGFzcycpIHtcbiAgICAgICAgICAgICAgcHVzaERpcihkaXJOYW1lLCBpbnRlcm5hbERpcmVjdGl2ZXNbZGlyTmFtZV0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYXJnID0gZGlyTmFtZTtcbiAgICAgICAgICAgICAgcHVzaERpcignYmluZCcsIGRpcmVjdGl2ZXMuYmluZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlXG5cbiAgICAgICAgICAgIC8vIG5vcm1hbCBkaXJlY3RpdmVzXG4gICAgICAgICAgICBpZiAobWF0Y2hlZCA9IG5hbWUubWF0Y2goZGlyQXR0clJFKSkge1xuICAgICAgICAgICAgICBkaXJOYW1lID0gbWF0Y2hlZFsxXTtcbiAgICAgICAgICAgICAgYXJnID0gbWF0Y2hlZFsyXTtcblxuICAgICAgICAgICAgICAvLyBza2lwIHYtZWxzZSAod2hlbiB1c2VkIHdpdGggdi1zaG93KVxuICAgICAgICAgICAgICBpZiAoZGlyTmFtZSA9PT0gJ2Vsc2UnKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBkaXJEZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBkaXJOYW1lLCB0cnVlKTtcbiAgICAgICAgICAgICAgaWYgKGRpckRlZikge1xuICAgICAgICAgICAgICAgIHB1c2hEaXIoZGlyTmFtZSwgZGlyRGVmKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFB1c2ggYSBkaXJlY3RpdmUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBkaXJOYW1lXG4gICAqIEBwYXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSBkZWZcbiAgICogQHBhcmFtIHtBcnJheX0gW2ludGVycFRva2Vuc11cbiAgICovXG5cbiAgZnVuY3Rpb24gcHVzaERpcihkaXJOYW1lLCBkZWYsIGludGVycFRva2Vucykge1xuICAgIHZhciBoYXNPbmVUaW1lVG9rZW4gPSBpbnRlcnBUb2tlbnMgJiYgaGFzT25lVGltZShpbnRlcnBUb2tlbnMpO1xuICAgIHZhciBwYXJzZWQgPSAhaGFzT25lVGltZVRva2VuICYmIHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcbiAgICBkaXJzLnB1c2goe1xuICAgICAgbmFtZTogZGlyTmFtZSxcbiAgICAgIGF0dHI6IHJhd05hbWUsXG4gICAgICByYXc6IHJhd1ZhbHVlLFxuICAgICAgZGVmOiBkZWYsXG4gICAgICBhcmc6IGFyZyxcbiAgICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLFxuICAgICAgLy8gY29udmVyc2lvbiBmcm9tIGludGVycG9sYXRpb24gc3RyaW5ncyB3aXRoIG9uZS10aW1lIHRva2VuXG4gICAgICAvLyB0byBleHByZXNzaW9uIGlzIGRpZmZlcmVkIHVudGlsIGRpcmVjdGl2ZSBiaW5kIHRpbWUgc28gdGhhdCB3ZVxuICAgICAgLy8gaGF2ZSBhY2Nlc3MgdG8gdGhlIGFjdHVhbCB2bSBjb250ZXh0IGZvciBvbmUtdGltZSBiaW5kaW5ncy5cbiAgICAgIGV4cHJlc3Npb246IHBhcnNlZCAmJiBwYXJzZWQuZXhwcmVzc2lvbixcbiAgICAgIGZpbHRlcnM6IHBhcnNlZCAmJiBwYXJzZWQuZmlsdGVycyxcbiAgICAgIGludGVycDogaW50ZXJwVG9rZW5zLFxuICAgICAgaGFzT25lVGltZTogaGFzT25lVGltZVRva2VuXG4gICAgfSk7XG4gIH1cblxuICBpZiAoZGlycy5sZW5ndGgpIHtcbiAgICByZXR1cm4gbWFrZU5vZGVMaW5rRm4oZGlycyk7XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZSBtb2RpZmllcnMgZnJvbSBkaXJlY3RpdmUgYXR0cmlidXRlIG5hbWUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZU1vZGlmaWVycyhuYW1lKSB7XG4gIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB2YXIgbWF0Y2ggPSBuYW1lLm1hdGNoKG1vZGlmaWVyUkUpO1xuICBpZiAobWF0Y2gpIHtcbiAgICB2YXIgaSA9IG1hdGNoLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICByZXNbbWF0Y2hbaV0uc2xpY2UoMSldID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBCdWlsZCBhIGxpbmsgZnVuY3Rpb24gZm9yIGFsbCBkaXJlY3RpdmVzIG9uIGEgc2luZ2xlIG5vZGUuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gZGlyZWN0aXZlc1xuICogQHJldHVybiB7RnVuY3Rpb259IGRpcmVjdGl2ZXNMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlTm9kZUxpbmtGbihkaXJlY3RpdmVzKSB7XG4gIHJldHVybiBmdW5jdGlvbiBub2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICAvLyByZXZlcnNlIGFwcGx5IGJlY2F1c2UgaXQncyBzb3J0ZWQgbG93IHRvIGhpZ2hcbiAgICB2YXIgaSA9IGRpcmVjdGl2ZXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZtLl9iaW5kRGlyKGRpcmVjdGl2ZXNbaV0sIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGludGVycG9sYXRpb24gc3RyaW5nIGNvbnRhaW5zIG9uZS10aW1lIHRva2Vucy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSB0b2tlbnNcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaGFzT25lVGltZSh0b2tlbnMpIHtcbiAgdmFyIGkgPSB0b2tlbnMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgaWYgKHRva2Vuc1tpXS5vbmVUaW1lKSByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1NjcmlwdChlbCkge1xuICByZXR1cm4gZWwudGFnTmFtZSA9PT0gJ1NDUklQVCcgJiYgKCFlbC5oYXNBdHRyaWJ1dGUoJ3R5cGUnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PT0gJ3RleHQvamF2YXNjcmlwdCcpO1xufVxuXG52YXIgc3BlY2lhbENoYXJSRSA9IC9bXlxcd1xcLTpcXC5dLztcblxuLyoqXG4gKiBQcm9jZXNzIGFuIGVsZW1lbnQgb3IgYSBEb2N1bWVudEZyYWdtZW50IGJhc2VkIG9uIGFcbiAqIGluc3RhbmNlIG9wdGlvbiBvYmplY3QuIFRoaXMgYWxsb3dzIHVzIHRvIHRyYW5zY2x1ZGVcbiAqIGEgdGVtcGxhdGUgbm9kZS9mcmFnbWVudCBiZWZvcmUgdGhlIGluc3RhbmNlIGlzIGNyZWF0ZWQsXG4gKiBzbyB0aGUgcHJvY2Vzc2VkIGZyYWdtZW50IGNhbiB0aGVuIGJlIGNsb25lZCBhbmQgcmV1c2VkXG4gKiBpbiB2LWZvci5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIHRyYW5zY2x1ZGUoZWwsIG9wdGlvbnMpIHtcbiAgLy8gZXh0cmFjdCBjb250YWluZXIgYXR0cmlidXRlcyB0byBwYXNzIHRoZW0gZG93blxuICAvLyB0byBjb21waWxlciwgYmVjYXVzZSB0aGV5IG5lZWQgdG8gYmUgY29tcGlsZWQgaW5cbiAgLy8gcGFyZW50IHNjb3BlLiB3ZSBhcmUgbXV0YXRpbmcgdGhlIG9wdGlvbnMgb2JqZWN0IGhlcmVcbiAgLy8gYXNzdW1pbmcgdGhlIHNhbWUgb2JqZWN0IHdpbGwgYmUgdXNlZCBmb3IgY29tcGlsZVxuICAvLyByaWdodCBhZnRlciB0aGlzLlxuICBpZiAob3B0aW9ucykge1xuICAgIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gZXh0cmFjdEF0dHJzKGVsKTtcbiAgfVxuICAvLyBmb3IgdGVtcGxhdGUgdGFncywgd2hhdCB3ZSB3YW50IGlzIGl0cyBjb250ZW50IGFzXG4gIC8vIGEgZG9jdW1lbnRGcmFnbWVudCAoZm9yIGZyYWdtZW50IGluc3RhbmNlcylcbiAgaWYgKGlzVGVtcGxhdGUoZWwpKSB7XG4gICAgZWwgPSBwYXJzZVRlbXBsYXRlKGVsKTtcbiAgfVxuICBpZiAob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCAmJiAhb3B0aW9ucy50ZW1wbGF0ZSkge1xuICAgICAgb3B0aW9ucy50ZW1wbGF0ZSA9ICc8c2xvdD48L3Nsb3Q+JztcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMudGVtcGxhdGUpIHtcbiAgICAgIG9wdGlvbnMuX2NvbnRlbnQgPSBleHRyYWN0Q29udGVudChlbCk7XG4gICAgICBlbCA9IHRyYW5zY2x1ZGVUZW1wbGF0ZShlbCwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG4gIGlmIChpc0ZyYWdtZW50KGVsKSkge1xuICAgIC8vIGFuY2hvcnMgZm9yIGZyYWdtZW50IGluc3RhbmNlXG4gICAgLy8gcGFzc2luZyBpbiBgcGVyc2lzdDogdHJ1ZWAgdG8gYXZvaWQgdGhlbSBiZWluZ1xuICAgIC8vIGRpc2NhcmRlZCBieSBJRSBkdXJpbmcgdGVtcGxhdGUgY2xvbmluZ1xuICAgIHByZXBlbmQoY3JlYXRlQW5jaG9yKCd2LXN0YXJ0JywgdHJ1ZSksIGVsKTtcbiAgICBlbC5hcHBlbmRDaGlsZChjcmVhdGVBbmNob3IoJ3YtZW5kJywgdHJ1ZSkpO1xuICB9XG4gIHJldHVybiBlbDtcbn1cblxuLyoqXG4gKiBQcm9jZXNzIHRoZSB0ZW1wbGF0ZSBvcHRpb24uXG4gKiBJZiB0aGUgcmVwbGFjZSBvcHRpb24gaXMgdHJ1ZSB0aGlzIHdpbGwgc3dhcCB0aGUgJGVsLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gdHJhbnNjbHVkZVRlbXBsYXRlKGVsLCBvcHRpb25zKSB7XG4gIHZhciB0ZW1wbGF0ZSA9IG9wdGlvbnMudGVtcGxhdGU7XG4gIHZhciBmcmFnID0gcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgdHJ1ZSk7XG4gIGlmIChmcmFnKSB7XG4gICAgdmFyIHJlcGxhY2VyID0gZnJhZy5maXJzdENoaWxkO1xuICAgIHZhciB0YWcgPSByZXBsYWNlci50YWdOYW1lICYmIHJlcGxhY2VyLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAob3B0aW9ucy5yZXBsYWNlKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChlbCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1lvdSBhcmUgbW91bnRpbmcgYW4gaW5zdGFuY2Ugd2l0aCBhIHRlbXBsYXRlIHRvICcgKyAnPGJvZHk+LiBUaGlzIHdpbGwgcmVwbGFjZSA8Ym9keT4gZW50aXJlbHkuIFlvdSAnICsgJ3Nob3VsZCBwcm9iYWJseSB1c2UgYHJlcGxhY2U6IGZhbHNlYCBoZXJlLicpO1xuICAgICAgfVxuICAgICAgLy8gdGhlcmUgYXJlIG1hbnkgY2FzZXMgd2hlcmUgdGhlIGluc3RhbmNlIG11c3RcbiAgICAgIC8vIGJlY29tZSBhIGZyYWdtZW50IGluc3RhbmNlOiBiYXNpY2FsbHkgYW55dGhpbmcgdGhhdFxuICAgICAgLy8gY2FuIGNyZWF0ZSBtb3JlIHRoYW4gMSByb290IG5vZGVzLlxuICAgICAgaWYgKFxuICAgICAgLy8gbXVsdGktY2hpbGRyZW4gdGVtcGxhdGVcbiAgICAgIGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPiAxIHx8XG4gICAgICAvLyBub24tZWxlbWVudCB0ZW1wbGF0ZVxuICAgICAgcmVwbGFjZXIubm9kZVR5cGUgIT09IDEgfHxcbiAgICAgIC8vIHNpbmdsZSBuZXN0ZWQgY29tcG9uZW50XG4gICAgICB0YWcgPT09ICdjb21wb25lbnQnIHx8IHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykgfHwgaGFzQmluZEF0dHIocmVwbGFjZXIsICdpcycpIHx8XG4gICAgICAvLyBlbGVtZW50IGRpcmVjdGl2ZVxuICAgICAgcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdlbGVtZW50RGlyZWN0aXZlcycsIHRhZykgfHxcbiAgICAgIC8vIGZvciBibG9ja1xuICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWZvcicpIHx8XG4gICAgICAvLyBpZiBibG9ja1xuICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcbiAgICAgICAgcmV0dXJuIGZyYWc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zLl9yZXBsYWNlckF0dHJzID0gZXh0cmFjdEF0dHJzKHJlcGxhY2VyKTtcbiAgICAgICAgbWVyZ2VBdHRycyhlbCwgcmVwbGFjZXIpO1xuICAgICAgICByZXR1cm4gcmVwbGFjZXI7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLmFwcGVuZENoaWxkKGZyYWcpO1xuICAgICAgcmV0dXJuIGVsO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgdGVtcGxhdGUgb3B0aW9uOiAnICsgdGVtcGxhdGUpO1xuICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGV4dHJhY3QgYSBjb21wb25lbnQgY29udGFpbmVyJ3MgYXR0cmlidXRlc1xuICogaW50byBhIHBsYWluIG9iamVjdCBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuXG5mdW5jdGlvbiBleHRyYWN0QXR0cnMoZWwpIHtcbiAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGVsLmhhc0F0dHJpYnV0ZXMoKSkge1xuICAgIHJldHVybiB0b0FycmF5KGVsLmF0dHJpYnV0ZXMpO1xuICB9XG59XG5cbi8qKlxuICogTWVyZ2UgdGhlIGF0dHJpYnV0ZXMgb2YgdHdvIGVsZW1lbnRzLCBhbmQgbWFrZSBzdXJlXG4gKiB0aGUgY2xhc3MgbmFtZXMgYXJlIG1lcmdlZCBwcm9wZXJseS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGZyb21cbiAqIEBwYXJhbSB7RWxlbWVudH0gdG9cbiAqL1xuXG5mdW5jdGlvbiBtZXJnZUF0dHJzKGZyb20sIHRvKSB7XG4gIHZhciBhdHRycyA9IGZyb20uYXR0cmlidXRlcztcbiAgdmFyIGkgPSBhdHRycy5sZW5ndGg7XG4gIHZhciBuYW1lLCB2YWx1ZTtcbiAgd2hpbGUgKGktLSkge1xuICAgIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuICAgIHZhbHVlID0gYXR0cnNbaV0udmFsdWU7XG4gICAgaWYgKCF0by5oYXNBdHRyaWJ1dGUobmFtZSkgJiYgIXNwZWNpYWxDaGFyUkUudGVzdChuYW1lKSkge1xuICAgICAgdG8uc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgIXBhcnNlVGV4dCh2YWx1ZSkgJiYgKHZhbHVlID0gdmFsdWUudHJpbSgpKSkge1xuICAgICAgdmFsdWUuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcbiAgICAgICAgYWRkQ2xhc3ModG8sIGNscyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBTY2FuIGFuZCBkZXRlcm1pbmUgc2xvdCBjb250ZW50IGRpc3RyaWJ1dGlvbi5cbiAqIFdlIGRvIHRoaXMgZHVyaW5nIHRyYW5zY2x1c2lvbiBpbnN0ZWFkIGF0IGNvbXBpbGUgdGltZSBzbyB0aGF0XG4gKiB0aGUgZGlzdHJpYnV0aW9uIGlzIGRlY291cGxlZCBmcm9tIHRoZSBjb21waWxhdGlvbiBvcmRlciBvZlxuICogdGhlIHNsb3RzLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSB0ZW1wbGF0ZVxuICogQHBhcmFtIHtFbGVtZW50fSBjb250ZW50XG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5mdW5jdGlvbiByZXNvbHZlU2xvdHModm0sIGNvbnRlbnQpIHtcbiAgaWYgKCFjb250ZW50KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBjb250ZW50cyA9IHZtLl9zbG90Q29udGVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB2YXIgZWwsIG5hbWU7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gY29udGVudC5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBlbCA9IGNvbnRlbnQuY2hpbGRyZW5baV07XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICBpZiAobmFtZSA9IGVsLmdldEF0dHJpYnV0ZSgnc2xvdCcpKSB7XG4gICAgICAoY29udGVudHNbbmFtZV0gfHwgKGNvbnRlbnRzW25hbWVdID0gW10pKS5wdXNoKGVsKTtcbiAgICB9XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGdldEJpbmRBdHRyKGVsLCAnc2xvdCcpKSB7XG4gICAgICB3YXJuKCdUaGUgXCJzbG90XCIgYXR0cmlidXRlIG11c3QgYmUgc3RhdGljLicsIHZtLiRwYXJlbnQpO1xuICAgIH1cbiAgfVxuICBmb3IgKG5hbWUgaW4gY29udGVudHMpIHtcbiAgICBjb250ZW50c1tuYW1lXSA9IGV4dHJhY3RGcmFnbWVudChjb250ZW50c1tuYW1lXSwgY29udGVudCk7XG4gIH1cbiAgaWYgKGNvbnRlbnQuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgdmFyIG5vZGVzID0gY29udGVudC5jaGlsZE5vZGVzO1xuICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDEgJiYgbm9kZXNbMF0ubm9kZVR5cGUgPT09IDMgJiYgIW5vZGVzWzBdLmRhdGEudHJpbSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnRlbnRzWydkZWZhdWx0J10gPSBleHRyYWN0RnJhZ21lbnQoY29udGVudC5jaGlsZE5vZGVzLCBjb250ZW50KTtcbiAgfVxufVxuXG4vKipcbiAqIEV4dHJhY3QgcXVhbGlmaWVkIGNvbnRlbnQgbm9kZXMgZnJvbSBhIG5vZGUgbGlzdC5cbiAqXG4gKiBAcGFyYW0ge05vZGVMaXN0fSBub2Rlc1xuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBleHRyYWN0RnJhZ21lbnQobm9kZXMsIHBhcmVudCkge1xuICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgbm9kZXMgPSB0b0FycmF5KG5vZGVzKTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB2YXIgbm9kZSA9IG5vZGVzW2ldO1xuICAgIGlmIChpc1RlbXBsYXRlKG5vZGUpICYmICFub2RlLmhhc0F0dHJpYnV0ZSgndi1pZicpICYmICFub2RlLmhhc0F0dHJpYnV0ZSgndi1mb3InKSkge1xuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgICAgbm9kZSA9IHBhcnNlVGVtcGxhdGUobm9kZSwgdHJ1ZSk7XG4gICAgfVxuICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZSk7XG4gIH1cbiAgcmV0dXJuIGZyYWc7XG59XG5cblxuXG52YXIgY29tcGlsZXIgPSBPYmplY3QuZnJlZXplKHtcblx0Y29tcGlsZTogY29tcGlsZSxcblx0Y29tcGlsZUFuZExpbmtQcm9wczogY29tcGlsZUFuZExpbmtQcm9wcyxcblx0Y29tcGlsZVJvb3Q6IGNvbXBpbGVSb290LFxuXHR0cmFuc2NsdWRlOiB0cmFuc2NsdWRlLFxuXHRyZXNvbHZlU2xvdHM6IHJlc29sdmVTbG90c1xufSk7XG5cbmZ1bmN0aW9uIHN0YXRlTWl4aW4gKFZ1ZSkge1xuICAvKipcbiAgICogQWNjZXNzb3IgZm9yIGAkZGF0YWAgcHJvcGVydHksIHNpbmNlIHNldHRpbmcgJGRhdGFcbiAgICogcmVxdWlyZXMgb2JzZXJ2aW5nIHRoZSBuZXcgb2JqZWN0IGFuZCB1cGRhdGluZ1xuICAgKiBwcm94aWVkIHByb3BlcnRpZXMuXG4gICAqL1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJGRhdGEnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld0RhdGEpIHtcbiAgICAgIGlmIChuZXdEYXRhICE9PSB0aGlzLl9kYXRhKSB7XG4gICAgICAgIHRoaXMuX3NldERhdGEobmV3RGF0YSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogU2V0dXAgdGhlIHNjb3BlIG9mIGFuIGluc3RhbmNlLCB3aGljaCBjb250YWluczpcbiAgICogLSBvYnNlcnZlZCBkYXRhXG4gICAqIC0gY29tcHV0ZWQgcHJvcGVydGllc1xuICAgKiAtIHVzZXIgbWV0aG9kc1xuICAgKiAtIG1ldGEgcHJvcGVydGllc1xuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5faW5pdFByb3BzKCk7XG4gICAgdGhpcy5faW5pdE1ldGEoKTtcbiAgICB0aGlzLl9pbml0TWV0aG9kcygpO1xuICAgIHRoaXMuX2luaXREYXRhKCk7XG4gICAgdGhpcy5faW5pdENvbXB1dGVkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgcHJvcHMuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRQcm9wcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG4gICAgdmFyIGVsID0gb3B0aW9ucy5lbDtcbiAgICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuICAgIGlmIChwcm9wcyAmJiAhZWwpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignUHJvcHMgd2lsbCBub3QgYmUgY29tcGlsZWQgaWYgbm8gYGVsYCBvcHRpb24gaXMgJyArICdwcm92aWRlZCBhdCBpbnN0YW50aWF0aW9uLicsIHRoaXMpO1xuICAgIH1cbiAgICAvLyBtYWtlIHN1cmUgdG8gY29udmVydCBzdHJpbmcgc2VsZWN0b3JzIGludG8gZWxlbWVudCBub3dcbiAgICBlbCA9IG9wdGlvbnMuZWwgPSBxdWVyeShlbCk7XG4gICAgdGhpcy5fcHJvcHNVbmxpbmtGbiA9IGVsICYmIGVsLm5vZGVUeXBlID09PSAxICYmIHByb3BzXG4gICAgLy8gcHJvcHMgbXVzdCBiZSBsaW5rZWQgaW4gcHJvcGVyIHNjb3BlIGlmIGluc2lkZSB2LWZvclxuICAgID8gY29tcGlsZUFuZExpbmtQcm9wcyh0aGlzLCBlbCwgcHJvcHMsIHRoaXMuX3Njb3BlKSA6IG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgdGhlIGRhdGEuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXREYXRhID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBkYXRhRm4gPSB0aGlzLiRvcHRpb25zLmRhdGE7XG4gICAgdmFyIGRhdGEgPSB0aGlzLl9kYXRhID0gZGF0YUZuID8gZGF0YUZuKCkgOiB7fTtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3QoZGF0YSkpIHtcbiAgICAgIGRhdGEgPSB7fTtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignZGF0YSBmdW5jdGlvbnMgc2hvdWxkIHJldHVybiBhbiBvYmplY3QuJywgdGhpcyk7XG4gICAgfVxuICAgIHZhciBwcm9wcyA9IHRoaXMuX3Byb3BzO1xuICAgIC8vIHByb3h5IGRhdGEgb24gaW5zdGFuY2VcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpO1xuICAgIHZhciBpLCBrZXk7XG4gICAgaSA9IGtleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAvLyB0aGVyZSBhcmUgdHdvIHNjZW5hcmlvcyB3aGVyZSB3ZSBjYW4gcHJveHkgYSBkYXRhIGtleTpcbiAgICAgIC8vIDEuIGl0J3Mgbm90IGFscmVhZHkgZGVmaW5lZCBhcyBhIHByb3BcbiAgICAgIC8vIDIuIGl0J3MgcHJvdmlkZWQgdmlhIGEgaW5zdGFudGlhdGlvbiBvcHRpb24gQU5EIHRoZXJlIGFyZSBub1xuICAgICAgLy8gICAgdGVtcGxhdGUgcHJvcCBwcmVzZW50XG4gICAgICBpZiAoIXByb3BzIHx8ICFoYXNPd24ocHJvcHMsIGtleSkpIHtcbiAgICAgICAgdGhpcy5fcHJveHkoa2V5KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuKCdEYXRhIGZpZWxkIFwiJyArIGtleSArICdcIiBpcyBhbHJlYWR5IGRlZmluZWQgJyArICdhcyBhIHByb3AuIFRvIHByb3ZpZGUgZGVmYXVsdCB2YWx1ZSBmb3IgYSBwcm9wLCB1c2UgdGhlIFwiZGVmYXVsdFwiICcgKyAncHJvcCBvcHRpb247IGlmIHlvdSB3YW50IHRvIHBhc3MgcHJvcCB2YWx1ZXMgdG8gYW4gaW5zdGFudGlhdGlvbiAnICsgJ2NhbGwsIHVzZSB0aGUgXCJwcm9wc0RhdGFcIiBvcHRpb24uJywgdGhpcyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIG9ic2VydmUgZGF0YVxuICAgIG9ic2VydmUoZGF0YSwgdGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN3YXAgdGhlIGluc3RhbmNlJ3MgJGRhdGEuIENhbGxlZCBpbiAkZGF0YSdzIHNldHRlci5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG5ld0RhdGFcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fc2V0RGF0YSA9IGZ1bmN0aW9uIChuZXdEYXRhKSB7XG4gICAgbmV3RGF0YSA9IG5ld0RhdGEgfHwge307XG4gICAgdmFyIG9sZERhdGEgPSB0aGlzLl9kYXRhO1xuICAgIHRoaXMuX2RhdGEgPSBuZXdEYXRhO1xuICAgIHZhciBrZXlzLCBrZXksIGk7XG4gICAgLy8gdW5wcm94eSBrZXlzIG5vdCBwcmVzZW50IGluIG5ldyBkYXRhXG4gICAga2V5cyA9IE9iamVjdC5rZXlzKG9sZERhdGEpO1xuICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYgKCEoa2V5IGluIG5ld0RhdGEpKSB7XG4gICAgICAgIHRoaXMuX3VucHJveHkoa2V5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gcHJveHkga2V5cyBub3QgYWxyZWFkeSBwcm94aWVkLFxuICAgIC8vIGFuZCB0cmlnZ2VyIGNoYW5nZSBmb3IgY2hhbmdlZCB2YWx1ZXNcbiAgICBrZXlzID0gT2JqZWN0LmtleXMobmV3RGF0YSk7XG4gICAgaSA9IGtleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICBpZiAoIWhhc093bih0aGlzLCBrZXkpKSB7XG4gICAgICAgIC8vIG5ldyBwcm9wZXJ0eVxuICAgICAgICB0aGlzLl9wcm94eShrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICBvbGREYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKTtcbiAgICBvYnNlcnZlKG5ld0RhdGEsIHRoaXMpO1xuICAgIHRoaXMuX2RpZ2VzdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcm94eSBhIHByb3BlcnR5LCBzbyB0aGF0XG4gICAqIHZtLnByb3AgPT09IHZtLl9kYXRhLnByb3BcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICBpZiAoIWlzUmVzZXJ2ZWQoa2V5KSkge1xuICAgICAgLy8gbmVlZCB0byBzdG9yZSByZWYgdG8gc2VsZiBoZXJlXG4gICAgICAvLyBiZWNhdXNlIHRoZXNlIGdldHRlci9zZXR0ZXJzIG1pZ2h0XG4gICAgICAvLyBiZSBjYWxsZWQgYnkgY2hpbGQgc2NvcGVzIHZpYVxuICAgICAgLy8gcHJvdG90eXBlIGluaGVyaXRhbmNlLlxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYsIGtleSwge1xuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldDogZnVuY3Rpb24gcHJveHlHZXR0ZXIoKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuX2RhdGFba2V5XTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBwcm94eVNldHRlcih2YWwpIHtcbiAgICAgICAgICBzZWxmLl9kYXRhW2tleV0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVW5wcm94eSBhIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX3VucHJveHkgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgaWYgKCFpc1Jlc2VydmVkKGtleSkpIHtcbiAgICAgIGRlbGV0ZSB0aGlzW2tleV07XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBGb3JjZSB1cGRhdGUgb24gZXZlcnkgd2F0Y2hlciBpbiBzY29wZS5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5fd2F0Y2hlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB0aGlzLl93YXRjaGVyc1tpXS51cGRhdGUodHJ1ZSk7IC8vIHNoYWxsb3cgdXBkYXRlc1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0dXAgY29tcHV0ZWQgcHJvcGVydGllcy4gVGhleSBhcmUgZXNzZW50aWFsbHlcbiAgICogc3BlY2lhbCBnZXR0ZXIvc2V0dGVyc1xuICAgKi9cblxuICBmdW5jdGlvbiBub29wKCkge31cbiAgVnVlLnByb3RvdHlwZS5faW5pdENvbXB1dGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjb21wdXRlZCA9IHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQ7XG4gICAgaWYgKGNvbXB1dGVkKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gY29tcHV0ZWQpIHtcbiAgICAgICAgdmFyIHVzZXJEZWYgPSBjb21wdXRlZFtrZXldO1xuICAgICAgICB2YXIgZGVmID0ge1xuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2YgdXNlckRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGRlZi5nZXQgPSBtYWtlQ29tcHV0ZWRHZXR0ZXIodXNlckRlZiwgdGhpcyk7XG4gICAgICAgICAgZGVmLnNldCA9IG5vb3A7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVmLmdldCA9IHVzZXJEZWYuZ2V0ID8gdXNlckRlZi5jYWNoZSAhPT0gZmFsc2UgPyBtYWtlQ29tcHV0ZWRHZXR0ZXIodXNlckRlZi5nZXQsIHRoaXMpIDogYmluZCh1c2VyRGVmLmdldCwgdGhpcykgOiBub29wO1xuICAgICAgICAgIGRlZi5zZXQgPSB1c2VyRGVmLnNldCA/IGJpbmQodXNlckRlZi5zZXQsIHRoaXMpIDogbm9vcDtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywga2V5LCBkZWYpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBtYWtlQ29tcHV0ZWRHZXR0ZXIoZ2V0dGVyLCBvd25lcikge1xuICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIob3duZXIsIGdldHRlciwgbnVsbCwge1xuICAgICAgbGF6eTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBmdW5jdGlvbiBjb21wdXRlZEdldHRlcigpIHtcbiAgICAgIGlmICh3YXRjaGVyLmRpcnR5KSB7XG4gICAgICAgIHdhdGNoZXIuZXZhbHVhdGUoKTtcbiAgICAgIH1cbiAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG4gICAgICAgIHdhdGNoZXIuZGVwZW5kKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gd2F0Y2hlci52YWx1ZTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGluc3RhbmNlIG1ldGhvZHMuIE1ldGhvZHMgbXVzdCBiZSBib3VuZCB0byB0aGVcbiAgICogaW5zdGFuY2Ugc2luY2UgdGhleSBtaWdodCBiZSBwYXNzZWQgZG93biBhcyBhIHByb3AgdG9cbiAgICogY2hpbGQgY29tcG9uZW50cy5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdE1ldGhvZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1ldGhvZHMgPSB0aGlzLiRvcHRpb25zLm1ldGhvZHM7XG4gICAgaWYgKG1ldGhvZHMpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBtZXRob2RzKSB7XG4gICAgICAgIHRoaXNba2V5XSA9IGJpbmQobWV0aG9kc1trZXldLCB0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgbWV0YSBpbmZvcm1hdGlvbiBsaWtlICRpbmRleCwgJGtleSAmICR2YWx1ZS5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdE1ldGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1ldGFzID0gdGhpcy4kb3B0aW9ucy5fbWV0YTtcbiAgICBpZiAobWV0YXMpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBtZXRhcykge1xuICAgICAgICBkZWZpbmVSZWFjdGl2ZSh0aGlzLCBrZXksIG1ldGFzW2tleV0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxudmFyIGV2ZW50UkUgPSAvXnYtb246fF5ALztcblxuZnVuY3Rpb24gZXZlbnRzTWl4aW4gKFZ1ZSkge1xuICAvKipcbiAgICogU2V0dXAgdGhlIGluc3RhbmNlJ3Mgb3B0aW9uIGV2ZW50cyAmIHdhdGNoZXJzLlxuICAgKiBJZiB0aGUgdmFsdWUgaXMgYSBzdHJpbmcsIHdlIHB1bGwgaXQgZnJvbSB0aGVcbiAgICogaW5zdGFuY2UncyBtZXRob2RzIGJ5IG5hbWUuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCkge1xuICAgICAgcmVnaXN0ZXJDb21wb25lbnRFdmVudHModGhpcywgb3B0aW9ucy5lbCk7XG4gICAgfVxuICAgIHJlZ2lzdGVyQ2FsbGJhY2tzKHRoaXMsICckb24nLCBvcHRpb25zLmV2ZW50cyk7XG4gICAgcmVnaXN0ZXJDYWxsYmFja3ModGhpcywgJyR3YXRjaCcsIG9wdGlvbnMud2F0Y2gpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlciB2LW9uIGV2ZW50cyBvbiBhIGNoaWxkIGNvbXBvbmVudFxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKi9cblxuICBmdW5jdGlvbiByZWdpc3RlckNvbXBvbmVudEV2ZW50cyh2bSwgZWwpIHtcbiAgICB2YXIgYXR0cnMgPSBlbC5hdHRyaWJ1dGVzO1xuICAgIHZhciBuYW1lLCB2YWx1ZSwgaGFuZGxlcjtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG4gICAgICBpZiAoZXZlbnRSRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoZXZlbnRSRSwgJycpO1xuICAgICAgICAvLyBmb3JjZSB0aGUgZXhwcmVzc2lvbiBpbnRvIGEgc3RhdGVtZW50IHNvIHRoYXRcbiAgICAgICAgLy8gaXQgYWx3YXlzIGR5bmFtaWNhbGx5IHJlc29sdmVzIHRoZSBtZXRob2QgdG8gY2FsbCAoIzI2NzApXG4gICAgICAgIC8vIGtpbmRhIHVnbHkgaGFjaywgYnV0IGRvZXMgdGhlIGpvYi5cbiAgICAgICAgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZTtcbiAgICAgICAgaWYgKGlzU2ltcGxlUGF0aCh2YWx1ZSkpIHtcbiAgICAgICAgICB2YWx1ZSArPSAnLmFwcGx5KHRoaXMsICRhcmd1bWVudHMpJztcbiAgICAgICAgfVxuICAgICAgICBoYW5kbGVyID0gKHZtLl9zY29wZSB8fCB2bS5fY29udGV4dCkuJGV2YWwodmFsdWUsIHRydWUpO1xuICAgICAgICBoYW5kbGVyLl9mcm9tUGFyZW50ID0gdHJ1ZTtcbiAgICAgICAgdm0uJG9uKG5hbWUucmVwbGFjZShldmVudFJFKSwgaGFuZGxlcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGNhbGxiYWNrcyBmb3Igb3B0aW9uIGV2ZW50cyBhbmQgd2F0Y2hlcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBoYXNoXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyQ2FsbGJhY2tzKHZtLCBhY3Rpb24sIGhhc2gpIHtcbiAgICBpZiAoIWhhc2gpIHJldHVybjtcbiAgICB2YXIgaGFuZGxlcnMsIGtleSwgaSwgajtcbiAgICBmb3IgKGtleSBpbiBoYXNoKSB7XG4gICAgICBoYW5kbGVycyA9IGhhc2hba2V5XTtcbiAgICAgIGlmIChpc0FycmF5KGhhbmRsZXJzKSkge1xuICAgICAgICBmb3IgKGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlcnMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgdG8gcmVnaXN0ZXIgYW4gZXZlbnQvd2F0Y2ggY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICogQHBhcmFtIHtGdW5jdGlvbnxTdHJpbmd8T2JqZWN0fSBoYW5kbGVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgdmFyIHR5cGUgPSB0eXBlb2YgaGFuZGxlcjtcbiAgICBpZiAodHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdm1bYWN0aW9uXShrZXksIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHZhciBtZXRob2RzID0gdm0uJG9wdGlvbnMubWV0aG9kcztcbiAgICAgIHZhciBtZXRob2QgPSBtZXRob2RzICYmIG1ldGhvZHNbaGFuZGxlcl07XG4gICAgICBpZiAobWV0aG9kKSB7XG4gICAgICAgIHZtW2FjdGlvbl0oa2V5LCBtZXRob2QsIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdVbmtub3duIG1ldGhvZDogXCInICsgaGFuZGxlciArICdcIiB3aGVuICcgKyAncmVnaXN0ZXJpbmcgY2FsbGJhY2sgZm9yICcgKyBhY3Rpb24gKyAnOiBcIicgKyBrZXkgKyAnXCIuJywgdm0pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaGFuZGxlciAmJiB0eXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLmhhbmRsZXIsIGhhbmRsZXIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCByZWN1cnNpdmUgYXR0YWNoZWQvZGV0YWNoZWQgY2FsbHNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdERPTUhvb2tzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuJG9uKCdob29rOmF0dGFjaGVkJywgb25BdHRhY2hlZCk7XG4gICAgdGhpcy4kb24oJ2hvb2s6ZGV0YWNoZWQnLCBvbkRldGFjaGVkKTtcbiAgfTtcblxuICAvKipcbiAgICogQ2FsbGJhY2sgdG8gcmVjdXJzaXZlbHkgY2FsbCBhdHRhY2hlZCBob29rIG9uIGNoaWxkcmVuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIG9uQXR0YWNoZWQoKSB7XG4gICAgaWYgKCF0aGlzLl9pc0F0dGFjaGVkKSB7XG4gICAgICB0aGlzLl9pc0F0dGFjaGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuJGNoaWxkcmVuLmZvckVhY2goY2FsbEF0dGFjaCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEl0ZXJhdG9yIHRvIGNhbGwgYXR0YWNoZWQgaG9va1xuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcbiAgICovXG5cbiAgZnVuY3Rpb24gY2FsbEF0dGFjaChjaGlsZCkge1xuICAgIGlmICghY2hpbGQuX2lzQXR0YWNoZWQgJiYgaW5Eb2MoY2hpbGQuJGVsKSkge1xuICAgICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0byByZWN1cnNpdmVseSBjYWxsIGRldGFjaGVkIGhvb2sgb24gY2hpbGRyZW5cbiAgICovXG5cbiAgZnVuY3Rpb24gb25EZXRhY2hlZCgpIHtcbiAgICBpZiAodGhpcy5faXNBdHRhY2hlZCkge1xuICAgICAgdGhpcy5faXNBdHRhY2hlZCA9IGZhbHNlO1xuICAgICAgdGhpcy4kY2hpbGRyZW4uZm9yRWFjaChjYWxsRGV0YWNoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSXRlcmF0b3IgdG8gY2FsbCBkZXRhY2hlZCBob29rXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuICAgKi9cblxuICBmdW5jdGlvbiBjYWxsRGV0YWNoKGNoaWxkKSB7XG4gICAgaWYgKGNoaWxkLl9pc0F0dGFjaGVkICYmICFpbkRvYyhjaGlsZC4kZWwpKSB7XG4gICAgICBjaGlsZC5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgYWxsIGhhbmRsZXJzIGZvciBhIGhvb2tcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGhvb2tcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fY2FsbEhvb2sgPSBmdW5jdGlvbiAoaG9vaykge1xuICAgIHRoaXMuJGVtaXQoJ3ByZS1ob29rOicgKyBob29rKTtcbiAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLiRvcHRpb25zW2hvb2tdO1xuICAgIGlmIChoYW5kbGVycykge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgaGFuZGxlcnNbaV0uY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy4kZW1pdCgnaG9vazonICsgaG9vayk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIG5vb3AkMSgpIHt9XG5cbi8qKlxuICogQSBkaXJlY3RpdmUgbGlua3MgYSBET00gZWxlbWVudCB3aXRoIGEgcGllY2Ugb2YgZGF0YSxcbiAqIHdoaWNoIGlzIHRoZSByZXN1bHQgb2YgZXZhbHVhdGluZyBhbiBleHByZXNzaW9uLlxuICogSXQgcmVnaXN0ZXJzIGEgd2F0Y2hlciB3aXRoIHRoZSBleHByZXNzaW9uIGFuZCBjYWxsc1xuICogdGhlIERPTSB1cGRhdGUgZnVuY3Rpb24gd2hlbiBhIGNoYW5nZSBpcyB0cmlnZ2VyZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3JcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IG5hbWVcbiAqICAgICAgICAgICAgICAgICAtIHtPYmplY3R9IGRlZlxuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gZXhwcmVzc2lvblxuICogICAgICAgICAgICAgICAgIC0ge0FycmF5PE9iamVjdD59IFtmaWx0ZXJzXVxuICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gW21vZGlmaWVyc11cbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBsaXRlcmFsXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBhdHRyXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBhcmdcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IHJhd1xuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gW3JlZl1cbiAqICAgICAgICAgICAgICAgICAtIHtBcnJheTxPYmplY3Q+fSBbaW50ZXJwXVxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtoYXNPbmVUaW1lXVxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge05vZGV9IGVsXG4gKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gdHJhbnNjbHVzaW9uIGhvc3QgY29tcG9uZW50XG4gKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG4gKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBvd25lciBmcmFnbWVudFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIERpcmVjdGl2ZShkZXNjcmlwdG9yLCB2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gIHRoaXMudm0gPSB2bTtcbiAgdGhpcy5lbCA9IGVsO1xuICAvLyBjb3B5IGRlc2NyaXB0b3IgcHJvcGVydGllc1xuICB0aGlzLmRlc2NyaXB0b3IgPSBkZXNjcmlwdG9yO1xuICB0aGlzLm5hbWUgPSBkZXNjcmlwdG9yLm5hbWU7XG4gIHRoaXMuZXhwcmVzc2lvbiA9IGRlc2NyaXB0b3IuZXhwcmVzc2lvbjtcbiAgdGhpcy5hcmcgPSBkZXNjcmlwdG9yLmFyZztcbiAgdGhpcy5tb2RpZmllcnMgPSBkZXNjcmlwdG9yLm1vZGlmaWVycztcbiAgdGhpcy5maWx0ZXJzID0gZGVzY3JpcHRvci5maWx0ZXJzO1xuICB0aGlzLmxpdGVyYWwgPSB0aGlzLm1vZGlmaWVycyAmJiB0aGlzLm1vZGlmaWVycy5saXRlcmFsO1xuICAvLyBwcml2YXRlXG4gIHRoaXMuX2xvY2tlZCA9IGZhbHNlO1xuICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xuICB0aGlzLl9saXN0ZW5lcnMgPSBudWxsO1xuICAvLyBsaW5rIGNvbnRleHRcbiAgdGhpcy5faG9zdCA9IGhvc3Q7XG4gIHRoaXMuX3Njb3BlID0gc2NvcGU7XG4gIHRoaXMuX2ZyYWcgPSBmcmFnO1xuICAvLyBzdG9yZSBkaXJlY3RpdmVzIG9uIG5vZGUgaW4gZGV2IG1vZGVcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbCkge1xuICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzID0gdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMgfHwgW107XG4gICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMucHVzaCh0aGlzKTtcbiAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemUgdGhlIGRpcmVjdGl2ZSwgbWl4aW4gZGVmaW5pdGlvbiBwcm9wZXJ0aWVzLFxuICogc2V0dXAgdGhlIHdhdGNoZXIsIGNhbGwgZGVmaW5pdGlvbiBiaW5kKCkgYW5kIHVwZGF0ZSgpXG4gKiBpZiBwcmVzZW50LlxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX2JpbmQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBuYW1lID0gdGhpcy5uYW1lO1xuICB2YXIgZGVzY3JpcHRvciA9IHRoaXMuZGVzY3JpcHRvcjtcblxuICAvLyByZW1vdmUgYXR0cmlidXRlXG4gIGlmICgobmFtZSAhPT0gJ2Nsb2FrJyB8fCB0aGlzLnZtLl9pc0NvbXBpbGVkKSAmJiB0aGlzLmVsICYmIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKSB7XG4gICAgdmFyIGF0dHIgPSBkZXNjcmlwdG9yLmF0dHIgfHwgJ3YtJyArIG5hbWU7XG4gICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gIH1cblxuICAvLyBjb3B5IGRlZiBwcm9wZXJ0aWVzXG4gIHZhciBkZWYgPSBkZXNjcmlwdG9yLmRlZjtcbiAgaWYgKHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICB0aGlzLnVwZGF0ZSA9IGRlZjtcbiAgfSBlbHNlIHtcbiAgICBleHRlbmQodGhpcywgZGVmKTtcbiAgfVxuXG4gIC8vIHNldHVwIGRpcmVjdGl2ZSBwYXJhbXNcbiAgdGhpcy5fc2V0dXBQYXJhbXMoKTtcblxuICAvLyBpbml0aWFsIGJpbmRcbiAgaWYgKHRoaXMuYmluZCkge1xuICAgIHRoaXMuYmluZCgpO1xuICB9XG4gIHRoaXMuX2JvdW5kID0gdHJ1ZTtcblxuICBpZiAodGhpcy5saXRlcmFsKSB7XG4gICAgdGhpcy51cGRhdGUgJiYgdGhpcy51cGRhdGUoZGVzY3JpcHRvci5yYXcpO1xuICB9IGVsc2UgaWYgKCh0aGlzLmV4cHJlc3Npb24gfHwgdGhpcy5tb2RpZmllcnMpICYmICh0aGlzLnVwZGF0ZSB8fCB0aGlzLnR3b1dheSkgJiYgIXRoaXMuX2NoZWNrU3RhdGVtZW50KCkpIHtcbiAgICAvLyB3cmFwcGVkIHVwZGF0ZXIgZm9yIGNvbnRleHRcbiAgICB2YXIgZGlyID0gdGhpcztcbiAgICBpZiAodGhpcy51cGRhdGUpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZSA9IGZ1bmN0aW9uICh2YWwsIG9sZFZhbCkge1xuICAgICAgICBpZiAoIWRpci5fbG9ja2VkKSB7XG4gICAgICAgICAgZGlyLnVwZGF0ZSh2YWwsIG9sZFZhbCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3VwZGF0ZSA9IG5vb3AkMTtcbiAgICB9XG4gICAgdmFyIHByZVByb2Nlc3MgPSB0aGlzLl9wcmVQcm9jZXNzID8gYmluZCh0aGlzLl9wcmVQcm9jZXNzLCB0aGlzKSA6IG51bGw7XG4gICAgdmFyIHBvc3RQcm9jZXNzID0gdGhpcy5fcG9zdFByb2Nlc3MgPyBiaW5kKHRoaXMuX3Bvc3RQcm9jZXNzLCB0aGlzKSA6IG51bGw7XG4gICAgdmFyIHdhdGNoZXIgPSB0aGlzLl93YXRjaGVyID0gbmV3IFdhdGNoZXIodGhpcy52bSwgdGhpcy5leHByZXNzaW9uLCB0aGlzLl91cGRhdGUsIC8vIGNhbGxiYWNrXG4gICAge1xuICAgICAgZmlsdGVyczogdGhpcy5maWx0ZXJzLFxuICAgICAgdHdvV2F5OiB0aGlzLnR3b1dheSxcbiAgICAgIGRlZXA6IHRoaXMuZGVlcCxcbiAgICAgIHByZVByb2Nlc3M6IHByZVByb2Nlc3MsXG4gICAgICBwb3N0UHJvY2VzczogcG9zdFByb2Nlc3MsXG4gICAgICBzY29wZTogdGhpcy5fc2NvcGVcbiAgICB9KTtcbiAgICAvLyB2LW1vZGVsIHdpdGggaW5pdGFsIGlubGluZSB2YWx1ZSBuZWVkIHRvIHN5bmMgYmFjayB0b1xuICAgIC8vIG1vZGVsIGluc3RlYWQgb2YgdXBkYXRlIHRvIERPTSBvbiBpbml0LiBUaGV5IHdvdWxkXG4gICAgLy8gc2V0IHRoZSBhZnRlckJpbmQgaG9vayB0byBpbmRpY2F0ZSB0aGF0LlxuICAgIGlmICh0aGlzLmFmdGVyQmluZCkge1xuICAgICAgdGhpcy5hZnRlckJpbmQoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMudXBkYXRlKSB7XG4gICAgICB0aGlzLnVwZGF0ZSh3YXRjaGVyLnZhbHVlKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogU2V0dXAgYWxsIHBhcmFtIGF0dHJpYnV0ZXMsIGUuZy4gdHJhY2stYnksXG4gKiB0cmFuc2l0aW9uLW1vZGUsIGV0Yy4uLlxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3NldHVwUGFyYW1zID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMucGFyYW1zKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBwYXJhbXMgPSB0aGlzLnBhcmFtcztcbiAgLy8gc3dhcCB0aGUgcGFyYW1zIGFycmF5IHdpdGggYSBmcmVzaCBvYmplY3QuXG4gIHRoaXMucGFyYW1zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdmFyIGkgPSBwYXJhbXMubGVuZ3RoO1xuICB2YXIga2V5LCB2YWwsIG1hcHBlZEtleTtcbiAgd2hpbGUgKGktLSkge1xuICAgIGtleSA9IGh5cGhlbmF0ZShwYXJhbXNbaV0pO1xuICAgIG1hcHBlZEtleSA9IGNhbWVsaXplKGtleSk7XG4gICAgdmFsID0gZ2V0QmluZEF0dHIodGhpcy5lbCwga2V5KTtcbiAgICBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgIC8vIGR5bmFtaWNcbiAgICAgIHRoaXMuX3NldHVwUGFyYW1XYXRjaGVyKG1hcHBlZEtleSwgdmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gc3RhdGljXG4gICAgICB2YWwgPSBnZXRBdHRyKHRoaXMuZWwsIGtleSk7XG4gICAgICBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5wYXJhbXNbbWFwcGVkS2V5XSA9IHZhbCA9PT0gJycgPyB0cnVlIDogdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBTZXR1cCBhIHdhdGNoZXIgZm9yIGEgZHluYW1pYyBwYXJhbS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwcmVzc2lvblxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3NldHVwUGFyYW1XYXRjaGVyID0gZnVuY3Rpb24gKGtleSwgZXhwcmVzc2lvbikge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBjYWxsZWQgPSBmYWxzZTtcbiAgdmFyIHVud2F0Y2ggPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHdhdGNoKGV4cHJlc3Npb24sIGZ1bmN0aW9uICh2YWwsIG9sZFZhbCkge1xuICAgIHNlbGYucGFyYW1zW2tleV0gPSB2YWw7XG4gICAgLy8gc2luY2Ugd2UgYXJlIGluIGltbWVkaWF0ZSBtb2RlLFxuICAgIC8vIG9ubHkgY2FsbCB0aGUgcGFyYW0gY2hhbmdlIGNhbGxiYWNrcyBpZiB0aGlzIGlzIG5vdCB0aGUgZmlyc3QgdXBkYXRlLlxuICAgIGlmIChjYWxsZWQpIHtcbiAgICAgIHZhciBjYiA9IHNlbGYucGFyYW1XYXRjaGVycyAmJiBzZWxmLnBhcmFtV2F0Y2hlcnNba2V5XTtcbiAgICAgIGlmIChjYikge1xuICAgICAgICBjYi5jYWxsKHNlbGYsIHZhbCwgb2xkVmFsKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBpbW1lZGlhdGU6IHRydWUsXG4gICAgdXNlcjogZmFsc2VcbiAgfSk7KHRoaXMuX3BhcmFtVW53YXRjaEZucyB8fCAodGhpcy5fcGFyYW1VbndhdGNoRm5zID0gW10pKS5wdXNoKHVud2F0Y2gpO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgZGlyZWN0aXZlIGlzIGEgZnVuY3Rpb24gY2FsbGVyXG4gKiBhbmQgaWYgdGhlIGV4cHJlc3Npb24gaXMgYSBjYWxsYWJsZSBvbmUuIElmIGJvdGggdHJ1ZSxcbiAqIHdlIHdyYXAgdXAgdGhlIGV4cHJlc3Npb24gYW5kIHVzZSBpdCBhcyB0aGUgZXZlbnRcbiAqIGhhbmRsZXIuXG4gKlxuICogZS5nLiBvbi1jbGljaz1cImErK1wiXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl9jaGVja1N0YXRlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGV4cHJlc3Npb24gPSB0aGlzLmV4cHJlc3Npb247XG4gIGlmIChleHByZXNzaW9uICYmIHRoaXMuYWNjZXB0U3RhdGVtZW50ICYmICFpc1NpbXBsZVBhdGgoZXhwcmVzc2lvbikpIHtcbiAgICB2YXIgZm4gPSBwYXJzZUV4cHJlc3Npb24oZXhwcmVzc2lvbikuZ2V0O1xuICAgIHZhciBzY29wZSA9IHRoaXMuX3Njb3BlIHx8IHRoaXMudm07XG4gICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyKGUpIHtcbiAgICAgIHNjb3BlLiRldmVudCA9IGU7XG4gICAgICBmbi5jYWxsKHNjb3BlLCBzY29wZSk7XG4gICAgICBzY29wZS4kZXZlbnQgPSBudWxsO1xuICAgIH07XG4gICAgaWYgKHRoaXMuZmlsdGVycykge1xuICAgICAgaGFuZGxlciA9IHNjb3BlLl9hcHBseUZpbHRlcnMoaGFuZGxlciwgbnVsbCwgdGhpcy5maWx0ZXJzKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGUoaGFuZGxlcik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07XG5cbi8qKlxuICogU2V0IHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIHdpdGggdGhlIHNldHRlci5cbiAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0d28td2F5IGRpcmVjdGl2ZXNcbiAqIGUuZy4gdi1tb2RlbC5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcHVibGljXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKHRoaXMudHdvV2F5KSB7XG4gICAgdGhpcy5fd2l0aExvY2soZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fd2F0Y2hlci5zZXQodmFsdWUpO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB3YXJuKCdEaXJlY3RpdmUuc2V0KCkgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgdHdvV2F5JyArICdkaXJlY3RpdmVzLicpO1xuICB9XG59O1xuXG4vKipcbiAqIEV4ZWN1dGUgYSBmdW5jdGlvbiB3aGlsZSBwcmV2ZW50aW5nIHRoYXQgZnVuY3Rpb24gZnJvbVxuICogdHJpZ2dlcmluZyB1cGRhdGVzIG9uIHRoaXMgZGlyZWN0aXZlIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fd2l0aExvY2sgPSBmdW5jdGlvbiAoZm4pIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBzZWxmLl9sb2NrZWQgPSB0cnVlO1xuICBmbi5jYWxsKHNlbGYpO1xuICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgc2VsZi5fbG9ja2VkID0gZmFsc2U7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBDb252ZW5pZW5jZSBtZXRob2QgdGhhdCBhdHRhY2hlcyBhIERPTSBldmVudCBsaXN0ZW5lclxuICogdG8gdGhlIGRpcmVjdGl2ZSBlbGVtZW50IGFuZCBhdXRvbWV0aWNhbGx5IHRlYXJzIGl0IGRvd25cbiAqIGR1cmluZyB1bmJpbmQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VDYXB0dXJlXVxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnQsIGhhbmRsZXIsIHVzZUNhcHR1cmUpIHtcbiAgb24odGhpcy5lbCwgZXZlbnQsIGhhbmRsZXIsIHVzZUNhcHR1cmUpOyh0aGlzLl9saXN0ZW5lcnMgfHwgKHRoaXMuX2xpc3RlbmVycyA9IFtdKSkucHVzaChbZXZlbnQsIGhhbmRsZXJdKTtcbn07XG5cbi8qKlxuICogVGVhcmRvd24gdGhlIHdhdGNoZXIgYW5kIGNhbGwgdW5iaW5kLlxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3RlYXJkb3duID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5fYm91bmQpIHtcbiAgICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xuICAgIGlmICh0aGlzLnVuYmluZCkge1xuICAgICAgdGhpcy51bmJpbmQoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3dhdGNoZXIpIHtcbiAgICAgIHRoaXMuX3dhdGNoZXIudGVhcmRvd24oKTtcbiAgICB9XG4gICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcbiAgICB2YXIgaTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICBpID0gbGlzdGVuZXJzLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgb2ZmKHRoaXMuZWwsIGxpc3RlbmVyc1tpXVswXSwgbGlzdGVuZXJzW2ldWzFdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIHVud2F0Y2hGbnMgPSB0aGlzLl9wYXJhbVVud2F0Y2hGbnM7XG4gICAgaWYgKHVud2F0Y2hGbnMpIHtcbiAgICAgIGkgPSB1bndhdGNoRm5zLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdW53YXRjaEZuc1tpXSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsKSB7XG4gICAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcy4kcmVtb3ZlKHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLnZtID0gdGhpcy5lbCA9IHRoaXMuX3dhdGNoZXIgPSB0aGlzLl9saXN0ZW5lcnMgPSBudWxsO1xuICB9XG59O1xuXG5mdW5jdGlvbiBsaWZlY3ljbGVNaXhpbiAoVnVlKSB7XG4gIC8qKlxuICAgKiBVcGRhdGUgdi1yZWYgZm9yIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fdXBkYXRlUmVmID0gZnVuY3Rpb24gKHJlbW92ZSkge1xuICAgIHZhciByZWYgPSB0aGlzLiRvcHRpb25zLl9yZWY7XG4gICAgaWYgKHJlZikge1xuICAgICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy5fY29udGV4dCkuJHJlZnM7XG4gICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgIGlmIChyZWZzW3JlZl0gPT09IHRoaXMpIHtcbiAgICAgICAgICByZWZzW3JlZl0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWZzW3JlZl0gPSB0aGlzO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVHJhbnNjbHVkZSwgY29tcGlsZSBhbmQgbGluayBlbGVtZW50LlxuICAgKlxuICAgKiBJZiBhIHByZS1jb21waWxlZCBsaW5rZXIgaXMgYXZhaWxhYmxlLCB0aGF0IG1lYW5zIHRoZVxuICAgKiBwYXNzZWQgaW4gZWxlbWVudCB3aWxsIGJlIHByZS10cmFuc2NsdWRlZCBhbmQgY29tcGlsZWRcbiAgICogYXMgd2VsbCAtIGFsbCB3ZSBuZWVkIHRvIGRvIGlzIHRvIGNhbGwgdGhlIGxpbmtlci5cbiAgICpcbiAgICogT3RoZXJ3aXNlIHdlIG5lZWQgdG8gY2FsbCB0cmFuc2NsdWRlL2NvbXBpbGUvbGluayBoZXJlLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2NvbXBpbGUgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG5cbiAgICAvLyB0cmFuc2NsdWRlIGFuZCBpbml0IGVsZW1lbnRcbiAgICAvLyB0cmFuc2NsdWRlIGNhbiBwb3RlbnRpYWxseSByZXBsYWNlIG9yaWdpbmFsXG4gICAgLy8gc28gd2UgbmVlZCB0byBrZWVwIHJlZmVyZW5jZTsgdGhpcyBzdGVwIGFsc28gaW5qZWN0c1xuICAgIC8vIHRoZSB0ZW1wbGF0ZSBhbmQgY2FjaGVzIHRoZSBvcmlnaW5hbCBhdHRyaWJ1dGVzXG4gICAgLy8gb24gdGhlIGNvbnRhaW5lciBub2RlIGFuZCByZXBsYWNlciBub2RlLlxuICAgIHZhciBvcmlnaW5hbCA9IGVsO1xuICAgIGVsID0gdHJhbnNjbHVkZShlbCwgb3B0aW9ucyk7XG4gICAgdGhpcy5faW5pdEVsZW1lbnQoZWwpO1xuXG4gICAgLy8gaGFuZGxlIHYtcHJlIG9uIHJvb3Qgbm9kZSAoIzIwMjYpXG4gICAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGdldEF0dHIoZWwsICd2LXByZScpICE9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gcm9vdCBpcyBhbHdheXMgY29tcGlsZWQgcGVyLWluc3RhbmNlLCBiZWNhdXNlXG4gICAgLy8gY29udGFpbmVyIGF0dHJzIGFuZCBwcm9wcyBjYW4gYmUgZGlmZmVyZW50IGV2ZXJ5IHRpbWUuXG4gICAgdmFyIGNvbnRleHRPcHRpb25zID0gdGhpcy5fY29udGV4dCAmJiB0aGlzLl9jb250ZXh0LiRvcHRpb25zO1xuICAgIHZhciByb290TGlua2VyID0gY29tcGlsZVJvb3QoZWwsIG9wdGlvbnMsIGNvbnRleHRPcHRpb25zKTtcblxuICAgIC8vIHJlc29sdmUgc2xvdCBkaXN0cmlidXRpb25cbiAgICByZXNvbHZlU2xvdHModGhpcywgb3B0aW9ucy5fY29udGVudCk7XG5cbiAgICAvLyBjb21waWxlIGFuZCBsaW5rIHRoZSByZXN0XG4gICAgdmFyIGNvbnRlbnRMaW5rRm47XG4gICAgdmFyIGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgIC8vIGNvbXBvbmVudCBjb21waWxhdGlvbiBjYW4gYmUgY2FjaGVkXG4gICAgLy8gYXMgbG9uZyBhcyBpdCdzIG5vdCB1c2luZyBpbmxpbmUtdGVtcGxhdGVcbiAgICBpZiAob3B0aW9ucy5fbGlua2VyQ2FjaGFibGUpIHtcbiAgICAgIGNvbnRlbnRMaW5rRm4gPSBjdG9yLmxpbmtlcjtcbiAgICAgIGlmICghY29udGVudExpbmtGbikge1xuICAgICAgICBjb250ZW50TGlua0ZuID0gY3Rvci5saW5rZXIgPSBjb21waWxlKGVsLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBsaW5rIHBoYXNlXG4gICAgLy8gbWFrZSBzdXJlIHRvIGxpbmsgcm9vdCB3aXRoIHByb3Agc2NvcGUhXG4gICAgdmFyIHJvb3RVbmxpbmtGbiA9IHJvb3RMaW5rZXIodGhpcywgZWwsIHRoaXMuX3Njb3BlKTtcbiAgICB2YXIgY29udGVudFVubGlua0ZuID0gY29udGVudExpbmtGbiA/IGNvbnRlbnRMaW5rRm4odGhpcywgZWwpIDogY29tcGlsZShlbCwgb3B0aW9ucykodGhpcywgZWwpO1xuXG4gICAgLy8gcmVnaXN0ZXIgY29tcG9zaXRlIHVubGluayBmdW5jdGlvblxuICAgIC8vIHRvIGJlIGNhbGxlZCBkdXJpbmcgaW5zdGFuY2UgZGVzdHJ1Y3Rpb25cbiAgICB0aGlzLl91bmxpbmtGbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJvb3RVbmxpbmtGbigpO1xuICAgICAgLy8gcGFzc2luZyBkZXN0cm95aW5nOiB0cnVlIHRvIGF2b2lkIHNlYXJjaGluZyBhbmRcbiAgICAgIC8vIHNwbGljaW5nIHRoZSBkaXJlY3RpdmVzXG4gICAgICBjb250ZW50VW5saW5rRm4odHJ1ZSk7XG4gICAgfTtcblxuICAgIC8vIGZpbmFsbHkgcmVwbGFjZSBvcmlnaW5hbFxuICAgIGlmIChvcHRpb25zLnJlcGxhY2UpIHtcbiAgICAgIHJlcGxhY2Uob3JpZ2luYWwsIGVsKTtcbiAgICB9XG5cbiAgICB0aGlzLl9pc0NvbXBpbGVkID0gdHJ1ZTtcbiAgICB0aGlzLl9jYWxsSG9vaygnY29tcGlsZWQnKTtcbiAgfTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBpbnN0YW5jZSBlbGVtZW50LiBDYWxsZWQgaW4gdGhlIHB1YmxpY1xuICAgKiAkbW91bnQoKSBtZXRob2QuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICBpZiAoaXNGcmFnbWVudChlbCkpIHtcbiAgICAgIHRoaXMuX2lzRnJhZ21lbnQgPSB0cnVlO1xuICAgICAgdGhpcy4kZWwgPSB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gZWwuZmlyc3RDaGlsZDtcbiAgICAgIHRoaXMuX2ZyYWdtZW50RW5kID0gZWwubGFzdENoaWxkO1xuICAgICAgLy8gc2V0IHBlcnNpc3RlZCB0ZXh0IGFuY2hvcnMgdG8gZW1wdHlcbiAgICAgIGlmICh0aGlzLl9mcmFnbWVudFN0YXJ0Lm5vZGVUeXBlID09PSAzKSB7XG4gICAgICAgIHRoaXMuX2ZyYWdtZW50U3RhcnQuZGF0YSA9IHRoaXMuX2ZyYWdtZW50RW5kLmRhdGEgPSAnJztcbiAgICAgIH1cbiAgICAgIHRoaXMuX2ZyYWdtZW50ID0gZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJGVsID0gZWw7XG4gICAgfVxuICAgIHRoaXMuJGVsLl9fdnVlX18gPSB0aGlzO1xuICAgIHRoaXMuX2NhbGxIb29rKCdiZWZvcmVDb21waWxlJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbmQgYmluZCBhIGRpcmVjdGl2ZSB0byBhbiBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGVzY3JpcHRvciAtIHBhcnNlZCBkaXJlY3RpdmUgZGVzY3JpcHRvclxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgICAtIHRhcmdldCBub2RlXG4gICAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSB0cmFuc2NsdXNpb24gaG9zdCBjb21wb25lbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBvd25lciBmcmFnbWVudFxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9iaW5kRGlyID0gZnVuY3Rpb24gKGRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgdGhpcy5fZGlyZWN0aXZlcy5wdXNoKG5ldyBEaXJlY3RpdmUoZGVzY3JpcHRvciwgdGhpcywgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpKTtcbiAgfTtcblxuICAvKipcbiAgICogVGVhcmRvd24gYW4gaW5zdGFuY2UsIHVub2JzZXJ2ZXMgdGhlIGRhdGEsIHVuYmluZCBhbGwgdGhlXG4gICAqIGRpcmVjdGl2ZXMsIHR1cm4gb2ZmIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzLCBldGMuXG4gICAqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlIC0gd2hldGhlciB0byByZW1vdmUgdGhlIERPTSBub2RlLlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cCAtIGlmIHRydWUsIGRlZmVyIGNsZWFudXAgdG9cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZSBjYWxsZWQgbGF0ZXJcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChyZW1vdmUsIGRlZmVyQ2xlYW51cCkge1xuICAgIGlmICh0aGlzLl9pc0JlaW5nRGVzdHJveWVkKSB7XG4gICAgICBpZiAoIWRlZmVyQ2xlYW51cCkge1xuICAgICAgICB0aGlzLl9jbGVhbnVwKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGRlc3Ryb3lSZWFkeTtcbiAgICB2YXIgcGVuZGluZ1JlbW92YWw7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy8gQ2xlYW51cCBzaG91bGQgYmUgY2FsbGVkIGVpdGhlciBzeW5jaHJvbm91c2x5IG9yIGFzeW5jaHJvbm95c2x5IGFzXG4gICAgLy8gY2FsbGJhY2sgb2YgdGhpcy4kcmVtb3ZlKCksIG9yIGlmIHJlbW92ZSBhbmQgZGVmZXJDbGVhbnVwIGFyZSBmYWxzZS5cbiAgICAvLyBJbiBhbnkgY2FzZSBpdCBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIGFsbCBvdGhlciByZW1vdmluZywgdW5iaW5kaW5nIGFuZFxuICAgIC8vIHR1cm5pbmcgb2YgaXMgZG9uZVxuICAgIHZhciBjbGVhbnVwSWZQb3NzaWJsZSA9IGZ1bmN0aW9uIGNsZWFudXBJZlBvc3NpYmxlKCkge1xuICAgICAgaWYgKGRlc3Ryb3lSZWFkeSAmJiAhcGVuZGluZ1JlbW92YWwgJiYgIWRlZmVyQ2xlYW51cCkge1xuICAgICAgICBzZWxmLl9jbGVhbnVwKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIHJlbW92ZSBET00gZWxlbWVudFxuICAgIGlmIChyZW1vdmUgJiYgdGhpcy4kZWwpIHtcbiAgICAgIHBlbmRpbmdSZW1vdmFsID0gdHJ1ZTtcbiAgICAgIHRoaXMuJHJlbW92ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHBlbmRpbmdSZW1vdmFsID0gZmFsc2U7XG4gICAgICAgIGNsZWFudXBJZlBvc3NpYmxlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLl9jYWxsSG9vaygnYmVmb3JlRGVzdHJveScpO1xuICAgIHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgPSB0cnVlO1xuICAgIHZhciBpO1xuICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gcGFyZW50LiBvbmx5IG5lY2Vzc2FyeVxuICAgIC8vIGlmIHBhcmVudCBpcyBub3QgYmVpbmcgZGVzdHJveWVkIGFzIHdlbGwuXG4gICAgdmFyIHBhcmVudCA9IHRoaXMuJHBhcmVudDtcbiAgICBpZiAocGFyZW50ICYmICFwYXJlbnQuX2lzQmVpbmdEZXN0cm95ZWQpIHtcbiAgICAgIHBhcmVudC4kY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcbiAgICAgIC8vIHVucmVnaXN0ZXIgcmVmIChyZW1vdmU6IHRydWUpXG4gICAgICB0aGlzLl91cGRhdGVSZWYodHJ1ZSk7XG4gICAgfVxuICAgIC8vIGRlc3Ryb3kgYWxsIGNoaWxkcmVuLlxuICAgIGkgPSB0aGlzLiRjaGlsZHJlbi5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdGhpcy4kY2hpbGRyZW5baV0uJGRlc3Ryb3koKTtcbiAgICB9XG4gICAgLy8gdGVhcmRvd24gcHJvcHNcbiAgICBpZiAodGhpcy5fcHJvcHNVbmxpbmtGbikge1xuICAgICAgdGhpcy5fcHJvcHNVbmxpbmtGbigpO1xuICAgIH1cbiAgICAvLyB0ZWFyZG93biBhbGwgZGlyZWN0aXZlcy4gdGhpcyBhbHNvIHRlYXJzZG93biBhbGxcbiAgICAvLyBkaXJlY3RpdmUtb3duZWQgd2F0Y2hlcnMuXG4gICAgaWYgKHRoaXMuX3VubGlua0ZuKSB7XG4gICAgICB0aGlzLl91bmxpbmtGbigpO1xuICAgIH1cbiAgICBpID0gdGhpcy5fd2F0Y2hlcnMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHRoaXMuX3dhdGNoZXJzW2ldLnRlYXJkb3duKCk7XG4gICAgfVxuICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgdG8gc2VsZiBvbiAkZWxcbiAgICBpZiAodGhpcy4kZWwpIHtcbiAgICAgIHRoaXMuJGVsLl9fdnVlX18gPSBudWxsO1xuICAgIH1cblxuICAgIGRlc3Ryb3lSZWFkeSA9IHRydWU7XG4gICAgY2xlYW51cElmUG9zc2libGUoKTtcbiAgfTtcblxuICAvKipcbiAgICogQ2xlYW4gdXAgdG8gZW5zdXJlIGdhcmJhZ2UgY29sbGVjdGlvbi5cbiAgICogVGhpcyBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGxlYXZlIHRyYW5zaXRpb24gaWYgdGhlcmVcbiAgICogaXMgYW55LlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9pc0Rlc3Ryb3llZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyByZW1vdmUgc2VsZiBmcm9tIG93bmVyIGZyYWdtZW50XG4gICAgLy8gZG8gaXQgaW4gY2xlYW51cCBzbyB0aGF0IHdlIGNhbiBjYWxsICRkZXN0cm95IHdpdGhcbiAgICAvLyBkZWZlciByaWdodCB3aGVuIGEgZnJhZ21lbnQgaXMgYWJvdXQgdG8gYmUgcmVtb3ZlZC5cbiAgICBpZiAodGhpcy5fZnJhZykge1xuICAgICAgdGhpcy5fZnJhZy5jaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xuICAgIH1cbiAgICAvLyByZW1vdmUgcmVmZXJlbmNlIGZyb20gZGF0YSBvYlxuICAgIC8vIGZyb3plbiBvYmplY3QgbWF5IG5vdCBoYXZlIG9ic2VydmVyLlxuICAgIGlmICh0aGlzLl9kYXRhICYmIHRoaXMuX2RhdGEuX19vYl9fKSB7XG4gICAgICB0aGlzLl9kYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKTtcbiAgICB9XG4gICAgLy8gQ2xlYW4gdXAgcmVmZXJlbmNlcyB0byBwcml2YXRlIHByb3BlcnRpZXMgYW5kIG90aGVyXG4gICAgLy8gaW5zdGFuY2VzLiBwcmVzZXJ2ZSByZWZlcmVuY2UgdG8gX2RhdGEgc28gdGhhdCBwcm94eVxuICAgIC8vIGFjY2Vzc29ycyBzdGlsbCB3b3JrLiBUaGUgb25seSBwb3RlbnRpYWwgc2lkZSBlZmZlY3RcbiAgICAvLyBoZXJlIGlzIHRoYXQgbXV0YXRpbmcgdGhlIGluc3RhbmNlIGFmdGVyIGl0J3MgZGVzdHJveWVkXG4gICAgLy8gbWF5IGFmZmVjdCB0aGUgc3RhdGUgb2Ygb3RoZXIgY29tcG9uZW50cyB0aGF0IGFyZSBzdGlsbFxuICAgIC8vIG9ic2VydmluZyB0aGUgc2FtZSBvYmplY3QsIGJ1dCB0aGF0IHNlZW1zIHRvIGJlIGFcbiAgICAvLyByZWFzb25hYmxlIHJlc3BvbnNpYmlsaXR5IGZvciB0aGUgdXNlciByYXRoZXIgdGhhblxuICAgIC8vIGFsd2F5cyB0aHJvd2luZyBhbiBlcnJvciBvbiB0aGVtLlxuICAgIHRoaXMuJGVsID0gdGhpcy4kcGFyZW50ID0gdGhpcy4kcm9vdCA9IHRoaXMuJGNoaWxkcmVuID0gdGhpcy5fd2F0Y2hlcnMgPSB0aGlzLl9jb250ZXh0ID0gdGhpcy5fc2NvcGUgPSB0aGlzLl9kaXJlY3RpdmVzID0gbnVsbDtcbiAgICAvLyBjYWxsIHRoZSBsYXN0IGhvb2suLi5cbiAgICB0aGlzLl9pc0Rlc3Ryb3llZCA9IHRydWU7XG4gICAgdGhpcy5fY2FsbEhvb2soJ2Rlc3Ryb3llZCcpO1xuICAgIC8vIHR1cm4gb2ZmIGFsbCBpbnN0YW5jZSBsaXN0ZW5lcnMuXG4gICAgdGhpcy4kb2ZmKCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIG1pc2NNaXhpbiAoVnVlKSB7XG4gIC8qKlxuICAgKiBBcHBseSBhIGxpc3Qgb2YgZmlsdGVyIChkZXNjcmlwdG9ycykgdG8gYSB2YWx1ZS5cbiAgICogVXNpbmcgcGxhaW4gZm9yIGxvb3BzIGhlcmUgYmVjYXVzZSB0aGlzIHdpbGwgYmUgY2FsbGVkIGluXG4gICAqIHRoZSBnZXR0ZXIgb2YgYW55IHdhdGNoZXIgd2l0aCBmaWx0ZXJzIHNvIGl0IGlzIHZlcnlcbiAgICogcGVyZm9ybWFuY2Ugc2Vuc2l0aXZlLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7Kn0gW29sZFZhbHVlXVxuICAgKiBAcGFyYW0ge0FycmF5fSBmaWx0ZXJzXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gd3JpdGVcbiAgICogQHJldHVybiB7Kn1cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fYXBwbHlGaWx0ZXJzID0gZnVuY3Rpb24gKHZhbHVlLCBvbGRWYWx1ZSwgZmlsdGVycywgd3JpdGUpIHtcbiAgICB2YXIgZmlsdGVyLCBmbiwgYXJncywgYXJnLCBvZmZzZXQsIGksIGwsIGosIGs7XG4gICAgZm9yIChpID0gMCwgbCA9IGZpbHRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmaWx0ZXIgPSBmaWx0ZXJzW3dyaXRlID8gbCAtIGkgLSAxIDogaV07XG4gICAgICBmbiA9IHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlci5uYW1lLCB0cnVlKTtcbiAgICAgIGlmICghZm4pIGNvbnRpbnVlO1xuICAgICAgZm4gPSB3cml0ZSA/IGZuLndyaXRlIDogZm4ucmVhZCB8fCBmbjtcbiAgICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIGNvbnRpbnVlO1xuICAgICAgYXJncyA9IHdyaXRlID8gW3ZhbHVlLCBvbGRWYWx1ZV0gOiBbdmFsdWVdO1xuICAgICAgb2Zmc2V0ID0gd3JpdGUgPyAyIDogMTtcbiAgICAgIGlmIChmaWx0ZXIuYXJncykge1xuICAgICAgICBmb3IgKGogPSAwLCBrID0gZmlsdGVyLmFyZ3MubGVuZ3RoOyBqIDwgazsgaisrKSB7XG4gICAgICAgICAgYXJnID0gZmlsdGVyLmFyZ3Nbal07XG4gICAgICAgICAgYXJnc1tqICsgb2Zmc2V0XSA9IGFyZy5keW5hbWljID8gdGhpcy4kZ2V0KGFyZy52YWx1ZSkgOiBhcmcudmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhbHVlID0gZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcblxuICAvKipcbiAgICogUmVzb2x2ZSBhIGNvbXBvbmVudCwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGNvbXBvbmVudFxuICAgKiBpcyBkZWZpbmVkIG5vcm1hbGx5IG9yIHVzaW5nIGFuIGFzeW5jIGZhY3RvcnkgZnVuY3Rpb24uXG4gICAqIFJlc29sdmVzIHN5bmNocm9ub3VzbHkgaWYgYWxyZWFkeSByZXNvbHZlZCwgb3RoZXJ3aXNlXG4gICAqIHJlc29sdmVzIGFzeW5jaHJvbm91c2x5IGFuZCBjYWNoZXMgdGhlIHJlc29sdmVkXG4gICAqIGNvbnN0cnVjdG9yIG9uIHRoZSBmYWN0b3J5LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gdmFsdWVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fcmVzb2x2ZUNvbXBvbmVudCA9IGZ1bmN0aW9uICh2YWx1ZSwgY2IpIHtcbiAgICB2YXIgZmFjdG9yeTtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBmYWN0b3J5ID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZhY3RvcnkgPSByZXNvbHZlQXNzZXQodGhpcy4kb3B0aW9ucywgJ2NvbXBvbmVudHMnLCB2YWx1ZSwgdHJ1ZSk7XG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghZmFjdG9yeSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBhc3luYyBjb21wb25lbnQgZmFjdG9yeVxuICAgIGlmICghZmFjdG9yeS5vcHRpb25zKSB7XG4gICAgICBpZiAoZmFjdG9yeS5yZXNvbHZlZCkge1xuICAgICAgICAvLyBjYWNoZWRcbiAgICAgICAgY2IoZmFjdG9yeS5yZXNvbHZlZCk7XG4gICAgICB9IGVsc2UgaWYgKGZhY3RvcnkucmVxdWVzdGVkKSB7XG4gICAgICAgIC8vIHBvb2wgY2FsbGJhY2tzXG4gICAgICAgIGZhY3RvcnkucGVuZGluZ0NhbGxiYWNrcy5wdXNoKGNiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZhY3RvcnkucmVxdWVzdGVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIGNicyA9IGZhY3RvcnkucGVuZGluZ0NhbGxiYWNrcyA9IFtjYl07XG4gICAgICAgIGZhY3RvcnkuY2FsbCh0aGlzLCBmdW5jdGlvbiByZXNvbHZlKHJlcykge1xuICAgICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHJlcykpIHtcbiAgICAgICAgICAgIHJlcyA9IFZ1ZS5leHRlbmQocmVzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY2FjaGUgcmVzb2x2ZWRcbiAgICAgICAgICBmYWN0b3J5LnJlc29sdmVkID0gcmVzO1xuICAgICAgICAgIC8vIGludm9rZSBjYWxsYmFja3NcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGNic1tpXShyZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignRmFpbGVkIHRvIHJlc29sdmUgYXN5bmMgY29tcG9uZW50JyArICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gJzogJyArIHZhbHVlIDogJycpICsgJy4gJyArIChyZWFzb24gPyAnXFxuUmVhc29uOiAnICsgcmVhc29uIDogJycpKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vcm1hbCBjb21wb25lbnRcbiAgICAgIGNiKGZhY3RvcnkpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIGZpbHRlclJFJDEgPSAvW158XVxcfFtefF0vO1xuXG5mdW5jdGlvbiBkYXRhQVBJIChWdWUpIHtcbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXG4gICAqIEByZXR1cm4geyp9XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGdldCA9IGZ1bmN0aW9uIChleHAsIGFzU3RhdGVtZW50KSB7XG4gICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHApO1xuICAgIGlmIChyZXMpIHtcbiAgICAgIGlmIChhc1N0YXRlbWVudCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBzdGF0ZW1lbnRIYW5kbGVyKCkge1xuICAgICAgICAgIHNlbGYuJGFyZ3VtZW50cyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVzLmdldC5jYWxsKHNlbGYsIHNlbGYpO1xuICAgICAgICAgIHNlbGYuJGFyZ3VtZW50cyA9IG51bGw7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5nZXQuY2FsbCh0aGlzLCB0aGlzKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG4gICAqIFRoZSBleHByZXNzaW9uIG11c3QgYmUgYSB2YWxpZCBsZWZ0LWhhbmRcbiAgICogZXhwcmVzc2lvbiBpbiBhbiBhc3NpZ25tZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gICAqIEBwYXJhbSB7Kn0gdmFsXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJHNldCA9IGZ1bmN0aW9uIChleHAsIHZhbCkge1xuICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwLCB0cnVlKTtcbiAgICBpZiAocmVzICYmIHJlcy5zZXQpIHtcbiAgICAgIHJlcy5zZXQuY2FsbCh0aGlzLCB0aGlzLCB2YWwpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRGVsZXRlIGEgcHJvcGVydHkgb24gdGhlIFZNXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xuICAgIGRlbCh0aGlzLl9kYXRhLCBrZXkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXYXRjaCBhbiBleHByZXNzaW9uLCB0cmlnZ2VyIGNhbGxiYWNrIHdoZW4gaXRzXG4gICAqIHZhbHVlIGNoYW5nZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBleHBPckZuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGRlZXBcbiAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGltbWVkaWF0ZVxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB1bndhdGNoRm5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kd2F0Y2ggPSBmdW5jdGlvbiAoZXhwT3JGbiwgY2IsIG9wdGlvbnMpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZhciBwYXJzZWQ7XG4gICAgaWYgKHR5cGVvZiBleHBPckZuID09PSAnc3RyaW5nJykge1xuICAgICAgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUoZXhwT3JGbik7XG4gICAgICBleHBPckZuID0gcGFyc2VkLmV4cHJlc3Npb247XG4gICAgfVxuICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCB7XG4gICAgICBkZWVwOiBvcHRpb25zICYmIG9wdGlvbnMuZGVlcCxcbiAgICAgIHN5bmM6IG9wdGlvbnMgJiYgb3B0aW9ucy5zeW5jLFxuICAgICAgZmlsdGVyczogcGFyc2VkICYmIHBhcnNlZC5maWx0ZXJzLFxuICAgICAgdXNlcjogIW9wdGlvbnMgfHwgb3B0aW9ucy51c2VyICE9PSBmYWxzZVxuICAgIH0pO1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuaW1tZWRpYXRlKSB7XG4gICAgICBjYi5jYWxsKHZtLCB3YXRjaGVyLnZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVud2F0Y2hGbigpIHtcbiAgICAgIHdhdGNoZXIudGVhcmRvd24oKTtcbiAgICB9O1xuICB9O1xuXG4gIC8qKlxuICAgKiBFdmFsdWF0ZSBhIHRleHQgZGlyZWN0aXZlLCBpbmNsdWRpbmcgZmlsdGVycy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZXZhbCA9IGZ1bmN0aW9uICh0ZXh0LCBhc1N0YXRlbWVudCkge1xuICAgIC8vIGNoZWNrIGZvciBmaWx0ZXJzLlxuICAgIGlmIChmaWx0ZXJSRSQxLnRlc3QodGV4dCkpIHtcbiAgICAgIHZhciBkaXIgPSBwYXJzZURpcmVjdGl2ZSh0ZXh0KTtcbiAgICAgIC8vIHRoZSBmaWx0ZXIgcmVnZXggY2hlY2sgbWlnaHQgZ2l2ZSBmYWxzZSBwb3NpdGl2ZVxuICAgICAgLy8gZm9yIHBpcGVzIGluc2lkZSBzdHJpbmdzLCBzbyBpdCdzIHBvc3NpYmxlIHRoYXRcbiAgICAgIC8vIHdlIGRvbid0IGdldCBhbnkgZmlsdGVycyBoZXJlXG4gICAgICB2YXIgdmFsID0gdGhpcy4kZ2V0KGRpci5leHByZXNzaW9uLCBhc1N0YXRlbWVudCk7XG4gICAgICByZXR1cm4gZGlyLmZpbHRlcnMgPyB0aGlzLl9hcHBseUZpbHRlcnModmFsLCBudWxsLCBkaXIuZmlsdGVycykgOiB2YWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vIGZpbHRlclxuICAgICAgcmV0dXJuIHRoaXMuJGdldCh0ZXh0LCBhc1N0YXRlbWVudCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBJbnRlcnBvbGF0ZSBhIHBpZWNlIG9mIHRlbXBsYXRlIHRleHQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kaW50ZXJwb2xhdGUgPSBmdW5jdGlvbiAodGV4dCkge1xuICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQodGV4dCk7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICBpZiAodG9rZW5zKSB7XG4gICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gdm0uJGV2YWwodG9rZW5zWzBdLnZhbHVlKSArICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRva2Vucy5tYXAoZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgICAgcmV0dXJuIHRva2VuLnRhZyA/IHZtLiRldmFsKHRva2VuLnZhbHVlKSA6IHRva2VuLnZhbHVlO1xuICAgICAgICB9KS5qb2luKCcnKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBMb2cgaW5zdGFuY2UgZGF0YSBhcyBhIHBsYWluIEpTIG9iamVjdFxuICAgKiBzbyB0aGF0IGl0IGlzIGVhc2llciB0byBpbnNwZWN0IGluIGNvbnNvbGUuXG4gICAqIFRoaXMgbWV0aG9kIGFzc3VtZXMgY29uc29sZSBpcyBhdmFpbGFibGUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbcGF0aF1cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kbG9nID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgICB2YXIgZGF0YSA9IHBhdGggPyBnZXRQYXRoKHRoaXMuX2RhdGEsIHBhdGgpIDogdGhpcy5fZGF0YTtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgZGF0YSA9IGNsZWFuKGRhdGEpO1xuICAgIH1cbiAgICAvLyBpbmNsdWRlIGNvbXB1dGVkIGZpZWxkc1xuICAgIGlmICghcGF0aCkge1xuICAgICAgdmFyIGtleTtcbiAgICAgIGZvciAoa2V5IGluIHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQpIHtcbiAgICAgICAgZGF0YVtrZXldID0gY2xlYW4odGhpc1trZXldKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9wcm9wcykge1xuICAgICAgICBmb3IgKGtleSBpbiB0aGlzLl9wcm9wcykge1xuICAgICAgICAgIGRhdGFba2V5XSA9IGNsZWFuKHRoaXNba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFwiY2xlYW5cIiBhIGdldHRlci9zZXR0ZXIgY29udmVydGVkIG9iamVjdCBpbnRvIGEgcGxhaW5cbiAgICogb2JqZWN0IGNvcHkuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAtIG9ialxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNsZWFuKG9iaikge1xuICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRvbUFQSSAoVnVlKSB7XG4gIC8qKlxuICAgKiBDb252ZW5pZW5jZSBvbi1pbnN0YW5jZSBuZXh0VGljay4gVGhlIGNhbGxiYWNrIGlzXG4gICAqIGF1dG8tYm91bmQgdG8gdGhlIGluc3RhbmNlLCBhbmQgdGhpcyBhdm9pZHMgY29tcG9uZW50XG4gICAqIG1vZHVsZXMgaGF2aW5nIHRvIHJlbHkgb24gdGhlIGdsb2JhbCBWdWUuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG5leHRUaWNrID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgbmV4dFRpY2soZm4sIHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBcHBlbmQgaW5zdGFuY2UgdG8gdGFyZ2V0XG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRhcHBlbmRUbyA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICAgIHJldHVybiBpbnNlcnQodGhpcywgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIGFwcGVuZCwgYXBwZW5kV2l0aFRyYW5zaXRpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcmVwZW5kIGluc3RhbmNlIHRvIHRhcmdldFxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kcHJlcGVuZFRvID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcbiAgICBpZiAodGFyZ2V0Lmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgdGhpcy4kYmVmb3JlKHRhcmdldC5maXJzdENoaWxkLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbnNlcnQgaW5zdGFuY2UgYmVmb3JlIHRhcmdldFxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kYmVmb3JlID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgcmV0dXJuIGluc2VydCh0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgYmVmb3JlV2l0aENiLCBiZWZvcmVXaXRoVHJhbnNpdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluc2VydCBpbnN0YW5jZSBhZnRlciB0YXJnZXRcbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGFmdGVyID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcbiAgICBpZiAodGFyZ2V0Lm5leHRTaWJsaW5nKSB7XG4gICAgICB0aGlzLiRiZWZvcmUodGFyZ2V0Lm5leHRTaWJsaW5nLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQucGFyZW50Tm9kZSwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBpbnN0YW5jZSBmcm9tIERPTVxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kcmVtb3ZlID0gZnVuY3Rpb24gKGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICAgIGlmICghdGhpcy4kZWwucGFyZW50Tm9kZSkge1xuICAgICAgcmV0dXJuIGNiICYmIGNiKCk7XG4gICAgfVxuICAgIHZhciBpbkRvY3VtZW50ID0gdGhpcy5faXNBdHRhY2hlZCAmJiBpbkRvYyh0aGlzLiRlbCk7XG4gICAgLy8gaWYgd2UgYXJlIG5vdCBpbiBkb2N1bWVudCwgbm8gbmVlZCB0byBjaGVja1xuICAgIC8vIGZvciB0cmFuc2l0aW9uc1xuICAgIGlmICghaW5Eb2N1bWVudCkgd2l0aFRyYW5zaXRpb24gPSBmYWxzZTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHJlYWxDYiA9IGZ1bmN0aW9uIHJlYWxDYigpIHtcbiAgICAgIGlmIChpbkRvY3VtZW50KSBzZWxmLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcbiAgICAgIGlmIChjYikgY2IoKTtcbiAgICB9O1xuICAgIGlmICh0aGlzLl9pc0ZyYWdtZW50KSB7XG4gICAgICByZW1vdmVOb2RlUmFuZ2UodGhpcy5fZnJhZ21lbnRTdGFydCwgdGhpcy5fZnJhZ21lbnRFbmQsIHRoaXMsIHRoaXMuX2ZyYWdtZW50LCByZWFsQ2IpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgb3AgPSB3aXRoVHJhbnNpdGlvbiA9PT0gZmFsc2UgPyByZW1vdmVXaXRoQ2IgOiByZW1vdmVXaXRoVHJhbnNpdGlvbjtcbiAgICAgIG9wKHRoaXMuJGVsLCB0aGlzLCByZWFsQ2IpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU2hhcmVkIERPTSBpbnNlcnRpb24gZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcDEgLSBvcCBmb3Igbm9uLXRyYW5zaXRpb24gaW5zZXJ0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMiAtIG9wIGZvciB0cmFuc2l0aW9uIGluc2VydFxuICAgKiBAcmV0dXJuIHZtXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGluc2VydCh2bSwgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIG9wMSwgb3AyKSB7XG4gICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcbiAgICB2YXIgdGFyZ2V0SXNEZXRhY2hlZCA9ICFpbkRvYyh0YXJnZXQpO1xuICAgIHZhciBvcCA9IHdpdGhUcmFuc2l0aW9uID09PSBmYWxzZSB8fCB0YXJnZXRJc0RldGFjaGVkID8gb3AxIDogb3AyO1xuICAgIHZhciBzaG91bGRDYWxsSG9vayA9ICF0YXJnZXRJc0RldGFjaGVkICYmICF2bS5faXNBdHRhY2hlZCAmJiAhaW5Eb2Modm0uJGVsKTtcbiAgICBpZiAodm0uX2lzRnJhZ21lbnQpIHtcbiAgICAgIG1hcE5vZGVSYW5nZSh2bS5fZnJhZ21lbnRTdGFydCwgdm0uX2ZyYWdtZW50RW5kLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBvcChub2RlLCB0YXJnZXQsIHZtKTtcbiAgICAgIH0pO1xuICAgICAgY2IgJiYgY2IoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3Aodm0uJGVsLCB0YXJnZXQsIHZtLCBjYik7XG4gICAgfVxuICAgIGlmIChzaG91bGRDYWxsSG9vaykge1xuICAgICAgdm0uX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuICAgIH1cbiAgICByZXR1cm4gdm07XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgZm9yIHNlbGVjdG9yc1xuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBlbFxuICAgKi9cblxuICBmdW5jdGlvbiBxdWVyeShlbCkge1xuICAgIHJldHVybiB0eXBlb2YgZWwgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCkgOiBlbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBlbmQgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBlbFxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBmdW5jdGlvbiBhcHBlbmQoZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcbiAgICBpZiAoY2IpIGNiKCk7XG4gIH1cblxuICAvKipcbiAgICogSW5zZXJ0QmVmb3JlIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgZnVuY3Rpb24gYmVmb3JlV2l0aENiKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuICAgIGJlZm9yZShlbCwgdGFyZ2V0KTtcbiAgICBpZiAoY2IpIGNiKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVtb3ZlV2l0aENiKGVsLCB2bSwgY2IpIHtcbiAgICByZW1vdmUoZWwpO1xuICAgIGlmIChjYikgY2IoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBldmVudHNBUEkgKFZ1ZSkge1xuICAvKipcbiAgICogTGlzdGVuIG9uIHRoZSBnaXZlbiBgZXZlbnRgIHdpdGggYGZuYC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG9uID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuICAgICh0aGlzLl9ldmVudHNbZXZlbnRdIHx8ICh0aGlzLl9ldmVudHNbZXZlbnRdID0gW10pKS5wdXNoKGZuKTtcbiAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAxKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQWRkcyBhbiBgZXZlbnRgIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBpbnZva2VkIGEgc2luZ2xlXG4gICAqIHRpbWUgdGhlbiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRvbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBmdW5jdGlvbiBvbigpIHtcbiAgICAgIHNlbGYuJG9mZihldmVudCwgb24pO1xuICAgICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgb24uZm4gPSBmbjtcbiAgICB0aGlzLiRvbihldmVudCwgb24pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGdpdmVuIGNhbGxiYWNrIGZvciBgZXZlbnRgIG9yIGFsbFxuICAgKiByZWdpc3RlcmVkIGNhbGxiYWNrcy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG9mZiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICB2YXIgY2JzO1xuICAgIC8vIGFsbFxuICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgaWYgKHRoaXMuJHBhcmVudCkge1xuICAgICAgICBmb3IgKGV2ZW50IGluIHRoaXMuX2V2ZW50cykge1xuICAgICAgICAgIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF07XG4gICAgICAgICAgaWYgKGNicykge1xuICAgICAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLWNicy5sZW5ndGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8gc3BlY2lmaWMgZXZlbnRcbiAgICBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuICAgIGlmICghY2JzKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC1jYnMubGVuZ3RoKTtcbiAgICAgIHRoaXMuX2V2ZW50c1tldmVudF0gPSBudWxsO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIHNwZWNpZmljIGhhbmRsZXJcbiAgICB2YXIgY2I7XG4gICAgdmFyIGkgPSBjYnMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGNiID0gY2JzW2ldO1xuICAgICAgaWYgKGNiID09PSBmbiB8fCBjYi5mbiA9PT0gZm4pIHtcbiAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLTEpO1xuICAgICAgICBjYnMuc3BsaWNlKGksIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgYW4gZXZlbnQgb24gc2VsZi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBldmVudFxuICAgKiBAcmV0dXJuIHtCb29sZWFufSBzaG91bGRQcm9wYWdhdGVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZW1pdCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBpc1NvdXJjZSA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZyc7XG4gICAgZXZlbnQgPSBpc1NvdXJjZSA/IGV2ZW50IDogZXZlbnQubmFtZTtcbiAgICB2YXIgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcbiAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gaXNTb3VyY2UgfHwgIWNicztcbiAgICBpZiAoY2JzKSB7XG4gICAgICBjYnMgPSBjYnMubGVuZ3RoID4gMSA/IHRvQXJyYXkoY2JzKSA6IGNicztcbiAgICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBoYWNreSBzb2x1dGlvbiB0byB0aGUgcXVlc3Rpb24gcmFpc2VkXG4gICAgICAvLyBpbiAjMjEwMjogZm9yIGFuIGlubGluZSBjb21wb25lbnQgbGlzdGVuZXIgbGlrZSA8Y29tcCBAdGVzdD1cImRvVGhpc1wiPixcbiAgICAgIC8vIHRoZSBwcm9wYWdhdGlvbiBoYW5kbGluZyBpcyBzb21ld2hhdCBicm9rZW4uIFRoZXJlZm9yZSB3ZVxuICAgICAgLy8gbmVlZCB0byB0cmVhdCB0aGVzZSBpbmxpbmUgY2FsbGJhY2tzIGRpZmZlcmVudGx5LlxuICAgICAgdmFyIGhhc1BhcmVudENicyA9IGlzU291cmNlICYmIGNicy5zb21lKGZ1bmN0aW9uIChjYikge1xuICAgICAgICByZXR1cm4gY2IuX2Zyb21QYXJlbnQ7XG4gICAgICB9KTtcbiAgICAgIGlmIChoYXNQYXJlbnRDYnMpIHtcbiAgICAgICAgc2hvdWxkUHJvcGFnYXRlID0gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgY2IgPSBjYnNbaV07XG4gICAgICAgIHZhciByZXMgPSBjYi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgaWYgKHJlcyA9PT0gdHJ1ZSAmJiAoIWhhc1BhcmVudENicyB8fCBjYi5fZnJvbVBhcmVudCkpIHtcbiAgICAgICAgICBzaG91bGRQcm9wYWdhdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaG91bGRQcm9wYWdhdGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlY3Vyc2l2ZWx5IGJyb2FkY2FzdCBhbiBldmVudCB0byBhbGwgY2hpbGRyZW4gaW5zdGFuY2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGV2ZW50XG4gICAqIEBwYXJhbSB7Li4uKn0gYWRkaXRpb25hbCBhcmd1bWVudHNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kYnJvYWRjYXN0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIGlzU291cmNlID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJztcbiAgICBldmVudCA9IGlzU291cmNlID8gZXZlbnQgOiBldmVudC5uYW1lO1xuICAgIC8vIGlmIG5vIGNoaWxkIGhhcyByZWdpc3RlcmVkIGZvciB0aGlzIGV2ZW50LFxuICAgIC8vIHRoZW4gdGhlcmUncyBubyBuZWVkIHRvIGJyb2FkY2FzdC5cbiAgICBpZiAoIXRoaXMuX2V2ZW50c0NvdW50W2V2ZW50XSkgcmV0dXJuO1xuICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuJGNoaWxkcmVuO1xuICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO1xuICAgIGlmIChpc1NvdXJjZSkge1xuICAgICAgLy8gdXNlIG9iamVjdCBldmVudCB0byBpbmRpY2F0ZSBub24tc291cmNlIGVtaXRcbiAgICAgIC8vIG9uIGNoaWxkcmVuXG4gICAgICBhcmdzWzBdID0geyBuYW1lOiBldmVudCwgc291cmNlOiB0aGlzIH07XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSBjaGlsZC4kZW1pdC5hcHBseShjaGlsZCwgYXJncyk7XG4gICAgICBpZiAoc2hvdWxkUHJvcGFnYXRlKSB7XG4gICAgICAgIGNoaWxkLiRicm9hZGNhc3QuYXBwbHkoY2hpbGQsIGFyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVjdXJzaXZlbHkgcHJvcGFnYXRlIGFuIGV2ZW50IHVwIHRoZSBwYXJlbnQgY2hhaW4uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0gey4uLip9IGFkZGl0aW9uYWwgYXJndW1lbnRzXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGRpc3BhdGNoID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IHRoaXMuJGVtaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoIXNob3VsZFByb3BhZ2F0ZSkgcmV0dXJuO1xuICAgIHZhciBwYXJlbnQgPSB0aGlzLiRwYXJlbnQ7XG4gICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG4gICAgLy8gdXNlIG9iamVjdCBldmVudCB0byBpbmRpY2F0ZSBub24tc291cmNlIGVtaXRcbiAgICAvLyBvbiBwYXJlbnRzXG4gICAgYXJnc1swXSA9IHsgbmFtZTogZXZlbnQsIHNvdXJjZTogdGhpcyB9O1xuICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IHBhcmVudC4kZW1pdC5hcHBseShwYXJlbnQsIGFyZ3MpO1xuICAgICAgcGFyZW50ID0gc2hvdWxkUHJvcGFnYXRlID8gcGFyZW50LiRwYXJlbnQgOiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogTW9kaWZ5IHRoZSBsaXN0ZW5lciBjb3VudHMgb24gYWxsIHBhcmVudHMuXG4gICAqIFRoaXMgYm9va2tlZXBpbmcgYWxsb3dzICRicm9hZGNhc3QgdG8gcmV0dXJuIGVhcmx5IHdoZW5cbiAgICogbm8gY2hpbGQgaGFzIGxpc3RlbmVkIHRvIGEgY2VydGFpbiBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge051bWJlcn0gY291bnRcbiAgICovXG5cbiAgdmFyIGhvb2tSRSA9IC9eaG9vazovO1xuICBmdW5jdGlvbiBtb2RpZnlMaXN0ZW5lckNvdW50KHZtLCBldmVudCwgY291bnQpIHtcbiAgICB2YXIgcGFyZW50ID0gdm0uJHBhcmVudDtcbiAgICAvLyBob29rcyBkbyBub3QgZ2V0IGJyb2FkY2FzdGVkIHNvIG5vIG5lZWRcbiAgICAvLyB0byBkbyBib29ra2VlcGluZyBmb3IgdGhlbVxuICAgIGlmICghcGFyZW50IHx8ICFjb3VudCB8fCBob29rUkUudGVzdChldmVudCkpIHJldHVybjtcbiAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICBwYXJlbnQuX2V2ZW50c0NvdW50W2V2ZW50XSA9IChwYXJlbnQuX2V2ZW50c0NvdW50W2V2ZW50XSB8fCAwKSArIGNvdW50O1xuICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGxpZmVjeWNsZUFQSSAoVnVlKSB7XG4gIC8qKlxuICAgKiBTZXQgaW5zdGFuY2UgdGFyZ2V0IGVsZW1lbnQgYW5kIGtpY2sgb2ZmIHRoZSBjb21waWxhdGlvblxuICAgKiBwcm9jZXNzLiBUaGUgcGFzc2VkIGluIGBlbGAgY2FuIGJlIGEgc2VsZWN0b3Igc3RyaW5nLCBhblxuICAgKiBleGlzdGluZyBFbGVtZW50LCBvciBhIERvY3VtZW50RnJhZ21lbnQgKGZvciBibG9ja1xuICAgKiBpbnN0YW5jZXMpLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudHxzdHJpbmd9IGVsXG4gICAqIEBwdWJsaWNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kbW91bnQgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICBpZiAodGhpcy5faXNDb21waWxlZCkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCckbW91bnQoKSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZS4nLCB0aGlzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWwgPSBxdWVyeShlbCk7XG4gICAgaWYgKCFlbCkge1xuICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB9XG4gICAgdGhpcy5fY29tcGlsZShlbCk7XG4gICAgdGhpcy5faW5pdERPTUhvb2tzKCk7XG4gICAgaWYgKGluRG9jKHRoaXMuJGVsKSkge1xuICAgICAgdGhpcy5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG4gICAgICByZWFkeS5jYWxsKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRvbmNlKCdob29rOmF0dGFjaGVkJywgcmVhZHkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogTWFyayBhbiBpbnN0YW5jZSBhcyByZWFkeS5cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVhZHkoKSB7XG4gICAgdGhpcy5faXNBdHRhY2hlZCA9IHRydWU7XG4gICAgdGhpcy5faXNSZWFkeSA9IHRydWU7XG4gICAgdGhpcy5fY2FsbEhvb2soJ3JlYWR5Jyk7XG4gIH1cblxuICAvKipcbiAgICogVGVhcmRvd24gdGhlIGluc3RhbmNlLCBzaW1wbHkgZGVsZWdhdGUgdG8gdGhlIGludGVybmFsXG4gICAqIF9kZXN0cm95LlxuICAgKlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cFxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRkZXN0cm95ID0gZnVuY3Rpb24gKHJlbW92ZSwgZGVmZXJDbGVhbnVwKSB7XG4gICAgdGhpcy5fZGVzdHJveShyZW1vdmUsIGRlZmVyQ2xlYW51cCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFBhcnRpYWxseSBjb21waWxlIGEgcGllY2Ugb2YgRE9NIGFuZCByZXR1cm4gYVxuICAgKiBkZWNvbXBpbGUgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXVxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kY29tcGlsZSA9IGZ1bmN0aW9uIChlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICByZXR1cm4gY29tcGlsZShlbCwgdGhpcy4kb3B0aW9ucywgdHJ1ZSkodGhpcywgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGUgZXhwb3NlZCBWdWUgY29uc3RydWN0b3IuXG4gKlxuICogQVBJIGNvbnZlbnRpb25zOlxuICogLSBwdWJsaWMgQVBJIG1ldGhvZHMvcHJvcGVydGllcyBhcmUgcHJlZml4ZWQgd2l0aCBgJGBcbiAqIC0gaW50ZXJuYWwgbWV0aG9kcy9wcm9wZXJ0aWVzIGFyZSBwcmVmaXhlZCB3aXRoIGBfYFxuICogLSBub24tcHJlZml4ZWQgcHJvcGVydGllcyBhcmUgYXNzdW1lZCB0byBiZSBwcm94aWVkIHVzZXJcbiAqICAgZGF0YS5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBWdWUob3B0aW9ucykge1xuICB0aGlzLl9pbml0KG9wdGlvbnMpO1xufVxuXG4vLyBpbnN0YWxsIGludGVybmFsc1xuaW5pdE1peGluKFZ1ZSk7XG5zdGF0ZU1peGluKFZ1ZSk7XG5ldmVudHNNaXhpbihWdWUpO1xubGlmZWN5Y2xlTWl4aW4oVnVlKTtcbm1pc2NNaXhpbihWdWUpO1xuXG4vLyBpbnN0YWxsIGluc3RhbmNlIEFQSXNcbmRhdGFBUEkoVnVlKTtcbmRvbUFQSShWdWUpO1xuZXZlbnRzQVBJKFZ1ZSk7XG5saWZlY3ljbGVBUEkoVnVlKTtcblxudmFyIHNsb3QgPSB7XG5cbiAgcHJpb3JpdHk6IFNMT1QsXG4gIHBhcmFtczogWyduYW1lJ10sXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyB0aGlzIHdhcyByZXNvbHZlZCBkdXJpbmcgY29tcG9uZW50IHRyYW5zY2x1c2lvblxuICAgIHZhciBuYW1lID0gdGhpcy5wYXJhbXMubmFtZSB8fCAnZGVmYXVsdCc7XG4gICAgdmFyIGNvbnRlbnQgPSB0aGlzLnZtLl9zbG90Q29udGVudHMgJiYgdGhpcy52bS5fc2xvdENvbnRlbnRzW25hbWVdO1xuICAgIGlmICghY29udGVudCB8fCAhY29udGVudC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgIHRoaXMuZmFsbGJhY2soKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb21waWxlKGNvbnRlbnQuY2xvbmVOb2RlKHRydWUpLCB0aGlzLnZtLl9jb250ZXh0LCB0aGlzLnZtKTtcbiAgICB9XG4gIH0sXG5cbiAgY29tcGlsZTogZnVuY3Rpb24gY29tcGlsZShjb250ZW50LCBjb250ZXh0LCBob3N0KSB7XG4gICAgaWYgKGNvbnRlbnQgJiYgY29udGV4dCkge1xuICAgICAgaWYgKHRoaXMuZWwuaGFzQ2hpbGROb2RlcygpICYmIGNvbnRlbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiYgY29udGVudC5jaGlsZE5vZGVzWzBdLm5vZGVUeXBlID09PSAxICYmIGNvbnRlbnQuY2hpbGROb2Rlc1swXS5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuICAgICAgICAvLyBpZiB0aGUgaW5zZXJ0ZWQgc2xvdCBoYXMgdi1pZlxuICAgICAgICAvLyBpbmplY3QgZmFsbGJhY2sgY29udGVudCBhcyB0aGUgdi1lbHNlXG4gICAgICAgIHZhciBlbHNlQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuICAgICAgICBlbHNlQmxvY2suc2V0QXR0cmlidXRlKCd2LWVsc2UnLCAnJyk7XG4gICAgICAgIGVsc2VCbG9jay5pbm5lckhUTUwgPSB0aGlzLmVsLmlubmVySFRNTDtcbiAgICAgICAgLy8gdGhlIGVsc2UgYmxvY2sgc2hvdWxkIGJlIGNvbXBpbGVkIGluIGNoaWxkIHNjb3BlXG4gICAgICAgIGVsc2VCbG9jay5fY29udGV4dCA9IHRoaXMudm07XG4gICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWxzZUJsb2NrKTtcbiAgICAgIH1cbiAgICAgIHZhciBzY29wZSA9IGhvc3QgPyBob3N0Ll9zY29wZSA6IHRoaXMuX3Njb3BlO1xuICAgICAgdGhpcy51bmxpbmsgPSBjb250ZXh0LiRjb21waWxlKGNvbnRlbnQsIGhvc3QsIHNjb3BlLCB0aGlzLl9mcmFnKTtcbiAgICB9XG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgIHJlcGxhY2UodGhpcy5lbCwgY29udGVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZSh0aGlzLmVsKTtcbiAgICB9XG4gIH0sXG5cbiAgZmFsbGJhY2s6IGZ1bmN0aW9uIGZhbGxiYWNrKCkge1xuICAgIHRoaXMuY29tcGlsZShleHRyYWN0Q29udGVudCh0aGlzLmVsLCB0cnVlKSwgdGhpcy52bSk7XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgaWYgKHRoaXMudW5saW5rKSB7XG4gICAgICB0aGlzLnVubGluaygpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHBhcnRpYWwgPSB7XG5cbiAgcHJpb3JpdHk6IFBBUlRJQUwsXG5cbiAgcGFyYW1zOiBbJ25hbWUnXSxcblxuICAvLyB3YXRjaCBjaGFuZ2VzIHRvIG5hbWUgZm9yIGR5bmFtaWMgcGFydGlhbHNcbiAgcGFyYW1XYXRjaGVyczoge1xuICAgIG5hbWU6IGZ1bmN0aW9uIG5hbWUodmFsdWUpIHtcbiAgICAgIHZJZi5yZW1vdmUuY2FsbCh0aGlzKTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmluc2VydCh2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtcGFydGlhbCcpO1xuICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuICAgIHRoaXMuaW5zZXJ0KHRoaXMucGFyYW1zLm5hbWUpO1xuICB9LFxuXG4gIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KGlkKSB7XG4gICAgdmFyIHBhcnRpYWwgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3BhcnRpYWxzJywgaWQsIHRydWUpO1xuICAgIGlmIChwYXJ0aWFsKSB7XG4gICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHBhcnRpYWwpO1xuICAgICAgdklmLmluc2VydC5jYWxsKHRoaXMpO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICBpZiAodGhpcy5mcmFnKSB7XG4gICAgICB0aGlzLmZyYWcuZGVzdHJveSgpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIGVsZW1lbnREaXJlY3RpdmVzID0ge1xuICBzbG90OiBzbG90LFxuICBwYXJ0aWFsOiBwYXJ0aWFsXG59O1xuXG52YXIgY29udmVydEFycmF5ID0gdkZvci5fcG9zdFByb2Nlc3M7XG5cbi8qKlxuICogTGltaXQgZmlsdGVyIGZvciBhcnJheXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gblxuICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCAoRGVjaW1hbCBleHBlY3RlZClcbiAqL1xuXG5mdW5jdGlvbiBsaW1pdEJ5KGFyciwgbiwgb2Zmc2V0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA/IHBhcnNlSW50KG9mZnNldCwgMTApIDogMDtcbiAgbiA9IHRvTnVtYmVyKG4pO1xuICByZXR1cm4gdHlwZW9mIG4gPT09ICdudW1iZXInID8gYXJyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgbikgOiBhcnI7XG59XG5cbi8qKlxuICogRmlsdGVyIGZpbHRlciBmb3IgYXJyYXlzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuICogQHBhcmFtIHtTdHJpbmd9IFtkZWxpbWl0ZXJdXG4gKiBAcGFyYW0ge1N0cmluZ30gLi4uZGF0YUtleXNcbiAqL1xuXG5mdW5jdGlvbiBmaWx0ZXJCeShhcnIsIHNlYXJjaCwgZGVsaW1pdGVyKSB7XG4gIGFyciA9IGNvbnZlcnRBcnJheShhcnIpO1xuICBpZiAoc2VhcmNoID09IG51bGwpIHtcbiAgICByZXR1cm4gYXJyO1xuICB9XG4gIGlmICh0eXBlb2Ygc2VhcmNoID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGFyci5maWx0ZXIoc2VhcmNoKTtcbiAgfVxuICAvLyBjYXN0IHRvIGxvd2VyY2FzZSBzdHJpbmdcbiAgc2VhcmNoID0gKCcnICsgc2VhcmNoKS50b0xvd2VyQ2FzZSgpO1xuICAvLyBhbGxvdyBvcHRpb25hbCBgaW5gIGRlbGltaXRlclxuICAvLyBiZWNhdXNlIHdoeSBub3RcbiAgdmFyIG4gPSBkZWxpbWl0ZXIgPT09ICdpbicgPyAzIDogMjtcbiAgLy8gZXh0cmFjdCBhbmQgZmxhdHRlbiBrZXlzXG4gIHZhciBrZXlzID0gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgdG9BcnJheShhcmd1bWVudHMsIG4pKTtcbiAgdmFyIHJlcyA9IFtdO1xuICB2YXIgaXRlbSwga2V5LCB2YWwsIGo7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gYXJyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGl0ZW0gPSBhcnJbaV07XG4gICAgdmFsID0gaXRlbSAmJiBpdGVtLiR2YWx1ZSB8fCBpdGVtO1xuICAgIGogPSBrZXlzLmxlbmd0aDtcbiAgICBpZiAoaikge1xuICAgICAgd2hpbGUgKGotLSkge1xuICAgICAgICBrZXkgPSBrZXlzW2pdO1xuICAgICAgICBpZiAoa2V5ID09PSAnJGtleScgJiYgY29udGFpbnMoaXRlbS4ka2V5LCBzZWFyY2gpIHx8IGNvbnRhaW5zKGdldFBhdGgodmFsLCBrZXkpLCBzZWFyY2gpKSB7XG4gICAgICAgICAgcmVzLnB1c2goaXRlbSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNvbnRhaW5zKGl0ZW0sIHNlYXJjaCkpIHtcbiAgICAgIHJlcy5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEZpbHRlciBmaWx0ZXIgZm9yIGFycmF5c1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5PFN0cmluZz58RnVuY3Rpb259IC4uLnNvcnRLZXlzXG4gKiBAcGFyYW0ge051bWJlcn0gW29yZGVyXVxuICovXG5cbmZ1bmN0aW9uIG9yZGVyQnkoYXJyKSB7XG4gIHZhciBjb21wYXJhdG9yID0gbnVsbDtcbiAgdmFyIHNvcnRLZXlzID0gdW5kZWZpbmVkO1xuICBhcnIgPSBjb252ZXJ0QXJyYXkoYXJyKTtcblxuICAvLyBkZXRlcm1pbmUgb3JkZXIgKGxhc3QgYXJndW1lbnQpXG4gIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuICB2YXIgb3JkZXIgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07XG4gIGlmICh0eXBlb2Ygb3JkZXIgPT09ICdudW1iZXInKSB7XG4gICAgb3JkZXIgPSBvcmRlciA8IDAgPyAtMSA6IDE7XG4gICAgYXJncyA9IGFyZ3MubGVuZ3RoID4gMSA/IGFyZ3Muc2xpY2UoMCwgLTEpIDogYXJncztcbiAgfSBlbHNlIHtcbiAgICBvcmRlciA9IDE7XG4gIH1cblxuICAvLyBkZXRlcm1pbmUgc29ydEtleXMgJiBjb21wYXJhdG9yXG4gIHZhciBmaXJzdEFyZyA9IGFyZ3NbMF07XG4gIGlmICghZmlyc3RBcmcpIHtcbiAgICByZXR1cm4gYXJyO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBmaXJzdEFyZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIGN1c3RvbSBjb21wYXJhdG9yXG4gICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gZmlyc3RBcmcoYSwgYikgKiBvcmRlcjtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIHN0cmluZyBrZXlzLiBmbGF0dGVuIGZpcnN0XG4gICAgc29ydEtleXMgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBhcmdzKTtcbiAgICBjb21wYXJhdG9yID0gZnVuY3Rpb24gKGEsIGIsIGkpIHtcbiAgICAgIGkgPSBpIHx8IDA7XG4gICAgICByZXR1cm4gaSA+PSBzb3J0S2V5cy5sZW5ndGggLSAxID8gYmFzZUNvbXBhcmUoYSwgYiwgaSkgOiBiYXNlQ29tcGFyZShhLCBiLCBpKSB8fCBjb21wYXJhdG9yKGEsIGIsIGkgKyAxKTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gYmFzZUNvbXBhcmUoYSwgYiwgc29ydEtleUluZGV4KSB7XG4gICAgdmFyIHNvcnRLZXkgPSBzb3J0S2V5c1tzb3J0S2V5SW5kZXhdO1xuICAgIGlmIChzb3J0S2V5KSB7XG4gICAgICBpZiAoc29ydEtleSAhPT0gJyRrZXknKSB7XG4gICAgICAgIGlmIChpc09iamVjdChhKSAmJiAnJHZhbHVlJyBpbiBhKSBhID0gYS4kdmFsdWU7XG4gICAgICAgIGlmIChpc09iamVjdChiKSAmJiAnJHZhbHVlJyBpbiBiKSBiID0gYi4kdmFsdWU7XG4gICAgICB9XG4gICAgICBhID0gaXNPYmplY3QoYSkgPyBnZXRQYXRoKGEsIHNvcnRLZXkpIDogYTtcbiAgICAgIGIgPSBpc09iamVjdChiKSA/IGdldFBhdGgoYiwgc29ydEtleSkgOiBiO1xuICAgIH1cbiAgICByZXR1cm4gYSA9PT0gYiA/IDAgOiBhID4gYiA/IG9yZGVyIDogLW9yZGVyO1xuICB9XG5cbiAgLy8gc29ydCBvbiBhIGNvcHkgdG8gYXZvaWQgbXV0YXRpbmcgb3JpZ2luYWwgYXJyYXlcbiAgcmV0dXJuIGFyci5zbGljZSgpLnNvcnQoY29tcGFyYXRvcik7XG59XG5cbi8qKlxuICogU3RyaW5nIGNvbnRhaW4gaGVscGVyXG4gKlxuICogQHBhcmFtIHsqfSB2YWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcbiAqL1xuXG5mdW5jdGlvbiBjb250YWlucyh2YWwsIHNlYXJjaCkge1xuICB2YXIgaTtcbiAgaWYgKGlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsKTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgaWYgKGNvbnRhaW5zKHZhbFtrZXlzW2ldXSwgc2VhcmNoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNBcnJheSh2YWwpKSB7XG4gICAgaSA9IHZhbC5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgaWYgKGNvbnRhaW5zKHZhbFtpXSwgc2VhcmNoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAodmFsICE9IG51bGwpIHtcbiAgICByZXR1cm4gdmFsLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlYXJjaCkgPiAtMTtcbiAgfVxufVxuXG52YXIgZGlnaXRzUkUgPSAvKFxcZHszfSkoPz1cXGQpL2c7XG5cbi8vIGFzc2V0IGNvbGxlY3Rpb25zIG11c3QgYmUgYSBwbGFpbiBvYmplY3QuXG52YXIgZmlsdGVycyA9IHtcblxuICBvcmRlckJ5OiBvcmRlckJ5LFxuICBmaWx0ZXJCeTogZmlsdGVyQnksXG4gIGxpbWl0Qnk6IGxpbWl0QnksXG5cbiAgLyoqXG4gICAqIFN0cmluZ2lmeSB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGVudFxuICAgKi9cblxuICBqc29uOiB7XG4gICAgcmVhZDogZnVuY3Rpb24gcmVhZCh2YWx1ZSwgaW5kZW50KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogSlNPTi5zdHJpbmdpZnkodmFsdWUsIG51bGwsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gaW5kZW50IDogMik7XG4gICAgfSxcbiAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUodmFsdWUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogJ2FiYycgPT4gJ0FiYydcbiAgICovXG5cbiAgY2FwaXRhbGl6ZTogZnVuY3Rpb24gY2FwaXRhbGl6ZSh2YWx1ZSkge1xuICAgIGlmICghdmFsdWUgJiYgdmFsdWUgIT09IDApIHJldHVybiAnJztcbiAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIHZhbHVlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdmFsdWUuc2xpY2UoMSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqICdhYmMnID0+ICdBQkMnXG4gICAqL1xuXG4gIHVwcGVyY2FzZTogZnVuY3Rpb24gdXBwZXJjYXNlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlIHx8IHZhbHVlID09PSAwID8gdmFsdWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpIDogJyc7XG4gIH0sXG5cbiAgLyoqXG4gICAqICdBYkMnID0+ICdhYmMnXG4gICAqL1xuXG4gIGxvd2VyY2FzZTogZnVuY3Rpb24gbG93ZXJjYXNlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlIHx8IHZhbHVlID09PSAwID8gdmFsdWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpIDogJyc7XG4gIH0sXG5cbiAgLyoqXG4gICAqIDEyMzQ1ID0+ICQxMiwzNDUuMDBcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHNpZ25cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRlY2ltYWxzIERlY2ltYWwgcGxhY2VzXG4gICAqL1xuXG4gIGN1cnJlbmN5OiBmdW5jdGlvbiBjdXJyZW5jeSh2YWx1ZSwgX2N1cnJlbmN5LCBkZWNpbWFscykge1xuICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgaWYgKCFpc0Zpbml0ZSh2YWx1ZSkgfHwgIXZhbHVlICYmIHZhbHVlICE9PSAwKSByZXR1cm4gJyc7XG4gICAgX2N1cnJlbmN5ID0gX2N1cnJlbmN5ICE9IG51bGwgPyBfY3VycmVuY3kgOiAnJCc7XG4gICAgZGVjaW1hbHMgPSBkZWNpbWFscyAhPSBudWxsID8gZGVjaW1hbHMgOiAyO1xuICAgIHZhciBzdHJpbmdpZmllZCA9IE1hdGguYWJzKHZhbHVlKS50b0ZpeGVkKGRlY2ltYWxzKTtcbiAgICB2YXIgX2ludCA9IGRlY2ltYWxzID8gc3RyaW5naWZpZWQuc2xpY2UoMCwgLTEgLSBkZWNpbWFscykgOiBzdHJpbmdpZmllZDtcbiAgICB2YXIgaSA9IF9pbnQubGVuZ3RoICUgMztcbiAgICB2YXIgaGVhZCA9IGkgPiAwID8gX2ludC5zbGljZSgwLCBpKSArIChfaW50Lmxlbmd0aCA+IDMgPyAnLCcgOiAnJykgOiAnJztcbiAgICB2YXIgX2Zsb2F0ID0gZGVjaW1hbHMgPyBzdHJpbmdpZmllZC5zbGljZSgtMSAtIGRlY2ltYWxzKSA6ICcnO1xuICAgIHZhciBzaWduID0gdmFsdWUgPCAwID8gJy0nIDogJyc7XG4gICAgcmV0dXJuIHNpZ24gKyBfY3VycmVuY3kgKyBoZWFkICsgX2ludC5zbGljZShpKS5yZXBsYWNlKGRpZ2l0c1JFLCAnJDEsJykgKyBfZmxvYXQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqICdpdGVtJyA9PiAnaXRlbXMnXG4gICAqXG4gICAqIEBwYXJhbXNcbiAgICogIGFuIGFycmF5IG9mIHN0cmluZ3MgY29ycmVzcG9uZGluZyB0b1xuICAgKiAgdGhlIHNpbmdsZSwgZG91YmxlLCB0cmlwbGUgLi4uIGZvcm1zIG9mIHRoZSB3b3JkIHRvXG4gICAqICBiZSBwbHVyYWxpemVkLiBXaGVuIHRoZSBudW1iZXIgdG8gYmUgcGx1cmFsaXplZFxuICAgKiAgZXhjZWVkcyB0aGUgbGVuZ3RoIG9mIHRoZSBhcmdzLCBpdCB3aWxsIHVzZSB0aGUgbGFzdFxuICAgKiAgZW50cnkgaW4gdGhlIGFycmF5LlxuICAgKlxuICAgKiAgZS5nLiBbJ3NpbmdsZScsICdkb3VibGUnLCAndHJpcGxlJywgJ211bHRpcGxlJ11cbiAgICovXG5cbiAgcGx1cmFsaXplOiBmdW5jdGlvbiBwbHVyYWxpemUodmFsdWUpIHtcbiAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcbiAgICB2YXIgbGVuZ3RoID0gYXJncy5sZW5ndGg7XG4gICAgaWYgKGxlbmd0aCA+IDEpIHtcbiAgICAgIHZhciBpbmRleCA9IHZhbHVlICUgMTAgLSAxO1xuICAgICAgcmV0dXJuIGluZGV4IGluIGFyZ3MgPyBhcmdzW2luZGV4XSA6IGFyZ3NbbGVuZ3RoIC0gMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhcmdzWzBdICsgKHZhbHVlID09PSAxID8gJycgOiAncycpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRGVib3VuY2UgYSBoYW5kbGVyIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheSA9IDMwMFxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICovXG5cbiAgZGVib3VuY2U6IGZ1bmN0aW9uIGRlYm91bmNlKGhhbmRsZXIsIGRlbGF5KSB7XG4gICAgaWYgKCFoYW5kbGVyKSByZXR1cm47XG4gICAgaWYgKCFkZWxheSkge1xuICAgICAgZGVsYXkgPSAzMDA7XG4gICAgfVxuICAgIHJldHVybiBfZGVib3VuY2UoaGFuZGxlciwgZGVsYXkpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBpbnN0YWxsR2xvYmFsQVBJIChWdWUpIHtcbiAgLyoqXG4gICAqIFZ1ZSBhbmQgZXZlcnkgY29uc3RydWN0b3IgdGhhdCBleHRlbmRzIFZ1ZSBoYXMgYW5cbiAgICogYXNzb2NpYXRlZCBvcHRpb25zIG9iamVjdCwgd2hpY2ggY2FuIGJlIGFjY2Vzc2VkIGR1cmluZ1xuICAgKiBjb21waWxhdGlvbiBzdGVwcyBhcyBgdGhpcy5jb25zdHJ1Y3Rvci5vcHRpb25zYC5cbiAgICpcbiAgICogVGhlc2UgY2FuIGJlIHNlZW4gYXMgdGhlIGRlZmF1bHQgb3B0aW9ucyBvZiBldmVyeVxuICAgKiBWdWUgaW5zdGFuY2UuXG4gICAqL1xuXG4gIFZ1ZS5vcHRpb25zID0ge1xuICAgIGRpcmVjdGl2ZXM6IGRpcmVjdGl2ZXMsXG4gICAgZWxlbWVudERpcmVjdGl2ZXM6IGVsZW1lbnREaXJlY3RpdmVzLFxuICAgIGZpbHRlcnM6IGZpbHRlcnMsXG4gICAgdHJhbnNpdGlvbnM6IHt9LFxuICAgIGNvbXBvbmVudHM6IHt9LFxuICAgIHBhcnRpYWxzOiB7fSxcbiAgICByZXBsYWNlOiB0cnVlXG4gIH07XG5cbiAgLyoqXG4gICAqIEV4cG9zZSB1c2VmdWwgaW50ZXJuYWxzXG4gICAqL1xuXG4gIFZ1ZS51dGlsID0gdXRpbDtcbiAgVnVlLmNvbmZpZyA9IGNvbmZpZztcbiAgVnVlLnNldCA9IHNldDtcbiAgVnVlWydkZWxldGUnXSA9IGRlbDtcbiAgVnVlLm5leHRUaWNrID0gbmV4dFRpY2s7XG5cbiAgLyoqXG4gICAqIFRoZSBmb2xsb3dpbmcgYXJlIGV4cG9zZWQgZm9yIGFkdmFuY2VkIHVzYWdlIC8gcGx1Z2luc1xuICAgKi9cblxuICBWdWUuY29tcGlsZXIgPSBjb21waWxlcjtcbiAgVnVlLkZyYWdtZW50RmFjdG9yeSA9IEZyYWdtZW50RmFjdG9yeTtcbiAgVnVlLmludGVybmFsRGlyZWN0aXZlcyA9IGludGVybmFsRGlyZWN0aXZlcztcbiAgVnVlLnBhcnNlcnMgPSB7XG4gICAgcGF0aDogcGF0aCxcbiAgICB0ZXh0OiB0ZXh0LFxuICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZSxcbiAgICBkaXJlY3RpdmU6IGRpcmVjdGl2ZSxcbiAgICBleHByZXNzaW9uOiBleHByZXNzaW9uXG4gIH07XG5cbiAgLyoqXG4gICAqIEVhY2ggaW5zdGFuY2UgY29uc3RydWN0b3IsIGluY2x1ZGluZyBWdWUsIGhhcyBhIHVuaXF1ZVxuICAgKiBjaWQuIFRoaXMgZW5hYmxlcyB1cyB0byBjcmVhdGUgd3JhcHBlZCBcImNoaWxkXG4gICAqIGNvbnN0cnVjdG9yc1wiIGZvciBwcm90b3R5cGFsIGluaGVyaXRhbmNlIGFuZCBjYWNoZSB0aGVtLlxuICAgKi9cblxuICBWdWUuY2lkID0gMDtcbiAgdmFyIGNpZCA9IDE7XG5cbiAgLyoqXG4gICAqIENsYXNzIGluaGVyaXRhbmNlXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBleHRlbmRPcHRpb25zXG4gICAqL1xuXG4gIFZ1ZS5leHRlbmQgPSBmdW5jdGlvbiAoZXh0ZW5kT3B0aW9ucykge1xuICAgIGV4dGVuZE9wdGlvbnMgPSBleHRlbmRPcHRpb25zIHx8IHt9O1xuICAgIHZhciBTdXBlciA9IHRoaXM7XG4gICAgdmFyIGlzRmlyc3RFeHRlbmQgPSBTdXBlci5jaWQgPT09IDA7XG4gICAgaWYgKGlzRmlyc3RFeHRlbmQgJiYgZXh0ZW5kT3B0aW9ucy5fQ3Rvcikge1xuICAgICAgcmV0dXJuIGV4dGVuZE9wdGlvbnMuX0N0b3I7XG4gICAgfVxuICAgIHZhciBuYW1lID0gZXh0ZW5kT3B0aW9ucy5uYW1lIHx8IFN1cGVyLm9wdGlvbnMubmFtZTtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKCEvXlthLXpBLVpdW1xcdy1dKiQvLnRlc3QobmFtZSkpIHtcbiAgICAgICAgd2FybignSW52YWxpZCBjb21wb25lbnQgbmFtZTogXCInICsgbmFtZSArICdcIi4gQ29tcG9uZW50IG5hbWVzICcgKyAnY2FuIG9ubHkgY29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjYXRlcnMgYW5kIHRoZSBoeXBoZW4uJyk7XG4gICAgICAgIG5hbWUgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgU3ViID0gY3JlYXRlQ2xhc3MobmFtZSB8fCAnVnVlQ29tcG9uZW50Jyk7XG4gICAgU3ViLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3VwZXIucHJvdG90eXBlKTtcbiAgICBTdWIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3ViO1xuICAgIFN1Yi5jaWQgPSBjaWQrKztcbiAgICBTdWIub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhTdXBlci5vcHRpb25zLCBleHRlbmRPcHRpb25zKTtcbiAgICBTdWJbJ3N1cGVyJ10gPSBTdXBlcjtcbiAgICAvLyBhbGxvdyBmdXJ0aGVyIGV4dGVuc2lvblxuICAgIFN1Yi5leHRlbmQgPSBTdXBlci5leHRlbmQ7XG4gICAgLy8gY3JlYXRlIGFzc2V0IHJlZ2lzdGVycywgc28gZXh0ZW5kZWQgY2xhc3Nlc1xuICAgIC8vIGNhbiBoYXZlIHRoZWlyIHByaXZhdGUgYXNzZXRzIHRvby5cbiAgICBjb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgU3ViW3R5cGVdID0gU3VwZXJbdHlwZV07XG4gICAgfSk7XG4gICAgLy8gZW5hYmxlIHJlY3Vyc2l2ZSBzZWxmLWxvb2t1cFxuICAgIGlmIChuYW1lKSB7XG4gICAgICBTdWIub3B0aW9ucy5jb21wb25lbnRzW25hbWVdID0gU3ViO1xuICAgIH1cbiAgICAvLyBjYWNoZSBjb25zdHJ1Y3RvclxuICAgIGlmIChpc0ZpcnN0RXh0ZW5kKSB7XG4gICAgICBleHRlbmRPcHRpb25zLl9DdG9yID0gU3ViO1xuICAgIH1cbiAgICByZXR1cm4gU3ViO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHN1Yi1jbGFzcyBjb25zdHJ1Y3RvciB3aXRoIHRoZVxuICAgKiBnaXZlbiBuYW1lLiBUaGlzIGdpdmVzIHVzIG11Y2ggbmljZXIgb3V0cHV0IHdoZW5cbiAgICogbG9nZ2luZyBpbnN0YW5jZXMgaW4gdGhlIGNvbnNvbGUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgKi9cblxuICBmdW5jdGlvbiBjcmVhdGVDbGFzcyhuYW1lKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tbmV3LWZ1bmMgKi9cbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdyZXR1cm4gZnVuY3Rpb24gJyArIGNsYXNzaWZ5KG5hbWUpICsgJyAob3B0aW9ucykgeyB0aGlzLl9pbml0KG9wdGlvbnMpIH0nKSgpO1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tbmV3LWZ1bmMgKi9cbiAgfVxuXG4gIC8qKlxuICAgKiBQbHVnaW4gc3lzdGVtXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwbHVnaW5cbiAgICovXG5cbiAgVnVlLnVzZSA9IGZ1bmN0aW9uIChwbHVnaW4pIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAocGx1Z2luLmluc3RhbGxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBhZGRpdGlvbmFsIHBhcmFtZXRlcnNcbiAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcbiAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG4gICAgaWYgKHR5cGVvZiBwbHVnaW4uaW5zdGFsbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcGx1Z2luLmluc3RhbGwuYXBwbHkocGx1Z2luLCBhcmdzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGx1Z2luLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH1cbiAgICBwbHVnaW4uaW5zdGFsbGVkID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQXBwbHkgYSBnbG9iYWwgbWl4aW4gYnkgbWVyZ2luZyBpdCBpbnRvIHRoZSBkZWZhdWx0XG4gICAqIG9wdGlvbnMuXG4gICAqL1xuXG4gIFZ1ZS5taXhpbiA9IGZ1bmN0aW9uIChtaXhpbikge1xuICAgIFZ1ZS5vcHRpb25zID0gbWVyZ2VPcHRpb25zKFZ1ZS5vcHRpb25zLCBtaXhpbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhc3NldCByZWdpc3RyYXRpb24gbWV0aG9kcyB3aXRoIHRoZSBmb2xsb3dpbmdcbiAgICogc2lnbmF0dXJlOlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAgICogQHBhcmFtIHsqfSBkZWZpbml0aW9uXG4gICAqL1xuXG4gIGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgVnVlW3R5cGVdID0gZnVuY3Rpb24gKGlkLCBkZWZpbml0aW9uKSB7XG4gICAgICBpZiAoIWRlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgKGNvbW1vblRhZ1JFLnRlc3QoaWQpIHx8IHJlc2VydmVkVGFnUkUudGVzdChpZCkpKSB7XG4gICAgICAgICAgICB3YXJuKCdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgKyAnaWQ6ICcgKyBpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiBpc1BsYWluT2JqZWN0KGRlZmluaXRpb24pKSB7XG4gICAgICAgICAgaWYgKCFkZWZpbml0aW9uLm5hbWUpIHtcbiAgICAgICAgICAgIGRlZmluaXRpb24ubmFtZSA9IGlkO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZpbml0aW9uID0gVnVlLmV4dGVuZChkZWZpbml0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdID0gZGVmaW5pdGlvbjtcbiAgICAgICAgcmV0dXJuIGRlZmluaXRpb247XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gZXhwb3NlIGludGVybmFsIHRyYW5zaXRpb24gQVBJXG4gIGV4dGVuZChWdWUudHJhbnNpdGlvbiwgdHJhbnNpdGlvbik7XG59XG5cbmluc3RhbGxHbG9iYWxBUEkoVnVlKTtcblxuVnVlLnZlcnNpb24gPSAnMS4wLjI2JztcblxuLy8gZGV2dG9vbHMgZ2xvYmFsIGhvb2tcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgaWYgKGNvbmZpZy5kZXZ0b29scykge1xuICAgIGlmIChkZXZ0b29scykge1xuICAgICAgZGV2dG9vbHMuZW1pdCgnaW5pdCcsIFZ1ZSk7XG4gICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGluQnJvd3NlciAmJiAvQ2hyb21lXFwvXFxkKy8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdEb3dubG9hZCB0aGUgVnVlIERldnRvb2xzIGZvciBhIGJldHRlciBkZXZlbG9wbWVudCBleHBlcmllbmNlOlxcbicgKyAnaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1kZXZ0b29scycpO1xuICAgIH1cbiAgfVxufSwgMCk7XG5cbm1vZHVsZS5leHBvcnRzID0gVnVlO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS9kaXN0L3Z1ZS5jb21tb24uanNcbiAqKiBtb2R1bGUgaWQgPSAyMTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7IHRocm93IG5ldyBFcnJvcihcImRlZmluZSBjYW5ub3QgYmUgdXNlZCBpbmRpcmVjdFwiKTsgfTtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAod2VicGFjaykvYnVpbGRpbi9hbWQtZGVmaW5lLmpzXG4gKiogbW9kdWxlIGlkID0gMjE4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xyXG5cdGlmKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XHJcblx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcclxuXHRcdG1vZHVsZS5wYXRocyA9IFtdO1xyXG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XHJcblx0XHRtb2R1bGUuY2hpbGRyZW4gPSBbXTtcclxuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xyXG5cdH1cclxuXHRyZXR1cm4gbW9kdWxlO1xyXG59XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzXG4gKiogbW9kdWxlIGlkID0gMjE5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9